# StackOverflow 问答 15538000-15538999

# phpword - PHPword 在模板中插入表格

> ID：15538007
> 
> 赞同：4
> 
> 时间：2013-03-21T01:41:21.607
> 
> 标签：phpword

```
$PHPWord = new PHPWord();
$section = $PHPWord->createSection();
$table = $section->addTable();
$i = 1;

$document = $PHPWord->loadTemplate('/var/sitLims/web/uploads/lmsSyllabus/lmsSyllabus.docx');
$document->setValue('Value1', $course_number);
$document->setValue('Value2', $course_name);
$document->setValue('Value3', $course_en_name);
$document->setValue('Value4', $course_summary);
$document->setValue('Value5', $course_purposes);
$document->setValue('Value6', $course_content);
$document->setValue('Value7', $course_exam);
$document->setValue('Value8', $course_description);
$document->setValue('Value9', $syllabus_person);
$document->setValue('Value10', $syllabus_academy_opinion);
foreach($syllabus_experiment as $a) {
$table->addRow();
$table->addCell(30)->addText($i);
$table->addCell(118)->addText($a->lmsExperiment->getExperimentName());
$table->addCell(118)->addText('');
$table->addCell(50)->addText($a->lmsExperiment->getExperimentExperimental());
    $table->addCell(50)->addText($a->lmsExperiment->getThisExperimentHours());
    $table->addCell(50)->addText($a->lmsExperiment->getExperimentEachNumber());
    $table->addCell(50)->addText($a->lmsExperiment->getExperimentLab());
    $table->addCell(50)->addText($a->lmsExperiment->getExperimentProjectArrange());
    $i ++;
}
$document->save('/var/sitLims/web/uploads/lmsSyllabus/' . $syllabus_name . '.docx');` 
```

创建word文件时我不确定如何插入表格我应该在模板中的任何地方插入表格吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-29T06:37:29.687

将其添加到 PHPWord\Writer\Word2007\Document.php

```
public function getObjectAsText($element){

    if($this->getParentWriter()->getUseDiskCaching()) {
        $objWriter = new PHPWord_Shared_XMLWriter(PHPWord_Shared_XMLWriter::STORAGE_DISK, $this->getParentWriter()->getDiskCachingDirectory());
    } else {
        $objWriter = new PHPWord_Shared_XMLWriter(PHPWord_Shared_XMLWriter::STORAGE_MEMORY);
    }
    if($element instanceof PHPWord_Section_Text) {
        $this->_writeText($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_TextRun) {
        $this->_writeTextRun($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_Link) {
        $this->_writeLink($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_Title) {
        $this->_writeTitle($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_TextBreak) {
        $this->_writeTextBreak($objWriter);
    } elseif($element instanceof PHPWord_Section_PageBreak) {
        $this->_writePageBreak($objWriter);
    } elseif($element instanceof PHPWord_Section_Table) {
        $this->_writeTable($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_ListItem) {
        $this->_writeListItem($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_Image ||
             $element instanceof PHPWord_Section_MemoryImage) {
        $this->_writeImage($objWriter, $element);
    } elseif($element instanceof PHPWord_Section_Object) {
        $this->_writeObject($objWriter, $element);
    } elseif($element instanceof PHPWord_TOC) {
        $this->_writeTOC($objWriter);
    }
    return trim(preg_replace("/[\x1-\x8\xB-\xC\xE-\x1F-\t+]/", "", $objWriter->getData()));

} 
```

插入表：

```
$obPHPWord = new PHPWord();
$obPHPWordDocument = $obPHPWord->loadTemplate('template.docx');
$section = $obPHPWord->createSection();
$table = $section->addTable();
$table->addRow(900);
// Add cells
$table->addCell(2000)->addText('Col 1');
$table->addCell(2000)->addText('Col 2');
$table->addCell(2000)->addText('Col 3');

$objWriter = PHPWord_IOFactory::createWriter($obPHPWord, 'Word2007');
$sTableText = $objWriter->getWriterPart('document')->getObjectAsText($table);
$obPHPWordDocument->setValue('myTable', $sTableText);
$obPHPWordDocument->save('result.docx'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T20:18:50.180

坏消息是：这行不通。

该`setValue`函数期望参数是纯文本，同时`$table`包含一个对象。目前没有解决方案让`$table`对象返回可以与`setValue`.

因为我遇到了同样的问题，所以我创建了一个解决方法。要使其正常工作，您必须在模板内的文档中添加要在文档中使用的表格。在此表内创建一行，每个单元格内都有一个变量名。

从 PHPWord 的修补版本调用该`cloneRow`函数以接收所需的表行数。之后，只需`setValue`将行号附加到每个变量。

您可以在我的网站上获取代码和完整说明：http: [//jeroen.is/phpword-templates-with-repeating-rows/](http://jeroen.is/phpword-templates-with-repeating-rows/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-05T13:31:59.933

你可以使用它：[https ://github.com/Arisse/PHPWord_CloneRow](https://github.com/Arisse/PHPWord_CloneRow)

**这是CloneRow()**和**setValue()**的新版本。稳定且易于使用。

# mysql - 单个选择语句错误“每个派生表都必须有自己的别名”

> ID：15538008
> 
> 赞同：0
> 
> 时间：2013-03-21T01:41:40.720
> 
> 标签：mysql, sql, mysql-error-1248

我一直试图让以下 select 语句工作几天，但没有任何运气。代码的快速总结是，它返回数据库中所有球队的列表，以及每支球队与排名前 10 名球队的胜利次数。胜利是从包含已玩过的每场比赛的比赛表中提取的。这是我的代码

```
SELECT     IF(@last_ranking <> formula, @current_rankings := @current_rankings + 1, @current_rankings)  AS rank, 
            @last_ranking := formula, 
            prequery.team, 
            prequery.formula
FROM        (select @current_rankings := 0) sqlvars, 
            (SELECT    team, 
                        SUM(score) formula 
            FROM (SELECT     g.home_team, 
                            SUM(CASE WHEN t.team_id IS NULL THEN 0 ELSE g.home_wins END) AS formula 
            FROM            games g LEFT JOIN 
                        _top_10 AS t ON g.away_team = t.team_id 
            WHERE       
                        g.season = 2012 AND 
                        g.completed = 1 
        UNION ALL SELECT     g.away_team, 
                        SUM(CASE WHEN t2.team_id IS NULL THEN 0 ELSE g.away_wins END) AS formula 
            FROM        games g LEFT JOIN 
                        _top_10 AS t2 ON g.home_team = t2.team_id 
            WHERE      
                        g.season = 2012 AND 
                        g.completed = 1), 
                            (SELECT @current_rankings := 0, @last_ranking := 0) r 
                GROUP BY team ORDER BY formula DESC ) prequery; 
```

但我不断收到以下错误

> 错误代码：1248。每个派生表都必须有自己的别名

谁能看到我在这里做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:44:11.730

`SELECT`由于语句的对齐方式，您可能会错过添加别名。

```
SELECT  IF(@last_ranking <> formula, @current_rankings := @current_rankings + 1, @current_rankings)  AS rank, 
        @last_ranking := formula, 
        prequery.team, 
        prequery.formula
FROM    (select @current_rankings := 0) sqlvars, 
        (
            SELECT  team, 
                    SUM(score) formula 
            FROM    (
                        SELECT  g.home_team, 
                                SUM(CASE WHEN t.team_id IS NULL THEN 0 ELSE g.home_wins END) AS formula 
                        FROM    games g LEFT JOIN 
                                _top_10 AS t ON g.away_team = t.team_id 
                        WHERE   g.season = 2012 AND 
                                g.completed = 1 
                        UNION ALL 
                        SELECT      g.away_team, 
                                    SUM(CASE WHEN t2.team_id IS NULL THEN 0 ELSE g.away_wins END) AS formula 
                        FROM        games g LEFT JOIN 
                                    _top_10 AS t2 ON g.home_team = t2.team_id 
                        WHERE      
                                    g.season = 2012 AND 
                                    g.completed = 1
                    ) AS AliasHere,  -- <<=== HERE
                    (SELECT @current_rankings := 0, @last_ranking := 0) r 
                GROUP BY team ORDER BY formula DESC 
        ) prequery; 
```

# jpa - 为什么 entityManager.contains 返回不同的结果？

> ID：15538017
> 
> 赞同：0
> 
> 时间：2013-03-21T01:42:39.570
> 
> 标签：jpa, ejb, persistence

这是在 JPA2 (EclipseLink) 和 JSF2 中。

我有一个实体类学生：

```
@Entity
public class Student implements Serializable {

private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;
private String firstname;
private String lastname;
private int age;

public Student(String firstname, String lastname, int age) {
    this.firstname = firstname;
    this.lastname = lastname;
    this.age = age;
}

public Student() {
}

// accessors and mutators here

} 
```

继承 AbstractFacade 的会话 bean StudentFacade：

```
public abstract class AbstractFacade<T> {

private Class<T> entityClass;

public AbstractFacade(Class<T> entityClass) {
    this.entityClass = entityClass;
}

protected abstract EntityManager getEntityManager();

public void create(T entity) {
    getEntityManager().persist(entity);
}

public T edit(T entity) {
    return getEntityManager().merge(entity);
}

public void remove(T entity) {
    getEntityManager().remove(getEntityManager().merge(entity));
}

public T find(Object id) {
    return getEntityManager().find(entityClass, id);
}

// other methods: findAll, findRange, count

}

@Stateless
public class StudentFacade extends AbstractFacade<Student> {

@PersistenceContext(unitName = "jpa2testsPU")
private EntityManager em;

@Override
protected EntityManager getEntityManager() {
    return em;
}

public StudentFacade() {
    super(Student.class);
}

public boolean contains(Student s) {
    return getEntityManager().contains(s);
}

public void testContains() {
    Student s = find(1L);
    boolean isContains = getEntityManager().contains(s);
}

} 
```

这是我的 JSF 托管 Bean：

```
@ManagedBean
@RequestScoped
public class IndexController {

@EJB
private StudentFacade studentFacade;

/**
 * Creates a new instance of IndexController
 */
public IndexController() {
}

public String test() {
    Student s = new Student("John", "Doe", 20);
    studentFacade.create(s);

    Student s1 = studentFacade.find(1L); // This works because table only has 1 record
    boolean isContains = studentFacade.contains(s);

    return null;
}
} 
```

当我从托管 bean 运行 test() 时，isContains 为假。但是当调用 StudentFacade 中的 testContains() 时，isContains 为真。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:26:00.617

StudentFacade 是一个无状态会话 Bean (SSB)。[不保证其实例变量的内容在方法调用（参考](http://en.wikipedia.org/wiki/Session_Beans)）中得以保留。这就像为每个方法调用创建一个不同的 EntityManager 实例。

当您从托管 bean 运行测试时，您在 SSB 上调用两个不同的方法，因此为每个调用创建一个不同的 EntityManager 实例，而第二个不包含 Student 实例，因为它尚未加载。

但是当您在 SSB 本身的方法中运行测试时，相同的 EntityManager 用于整个方法的范围，因此对 contains() 的调用返回 true。

# windows - 英特尔驱动程序上没有日志消息的程序链接错误

> ID：15538020
> 
> 赞同：1
> 
> 时间：2013-03-21T01:43:06.537
> 
> 标签：windows, visual-c++, opengl, glsl

注意：我将首先具体吐出我的问题，然后我会更好地解释我的场景。

在我的窗户上，使用我的英特尔驱动程序。我可以编译这两个（分别是顶点和片段着色器），但不能链接它们：

```
attribute vec4 vertex;
void main(void) {
       gl_Position = vertex;
} 
```

*,*

```
uniform sampler2D textures[2];
vec4 third(sampler2D texture) {
       return texture2D(texture,vec2(0.5,0.5));
}
vec4 second(float a) {
       return third(textures[0]);
}

void main(void) {
       gl_FragColor = second(0.0);
} 
```

我在链接时收到错误消息（链接状态为假），但信息日志为空。

问题是这个着色器在我的 Linux 中使用相同的 GPU 运行良好，并且在我的 NVIDIA 中运行良好。只有在使用英特尔驱动程序的 Windows 中，我才会遇到这个问题。我的 OpenGL 通知以下有关驱动程序的信息：

```
GL_VENDOR Intel
GL_RENDERER Intel(R) HD Graphics Family
GL_VERSION 3.0.0 - Build 8.15.10.2253
GL_SHADING_LANGUAGE_VERSION 1.30  - Intel Build 8.15.10.2253 
```

有趣的是，看起来无关紧要的修改使程序能够正确链接，到目前为止我发现了一些：

1.  如果第二个函数没有接收到任何参数，它就会起作用。
2.  如果 main() 直接调用第三个，它可以工作。
3.  如果制服不是数组，它是单个元素，它可以工作。
4.  如果不是将 sampler2D 从第二个传递到第三个，而是传递一个索引，第三个将用于访问纹理，它可以工作。

我的问题是如何使它工作但保持相同的语义？我需要三个函数，我需要`third`和`main`函数不使用制服，我需要只有`second`函数知道制服。另外，我需要`second`and`third`函数接收参数。在我的真实世界场景中，第二个和第三个函数用它收到的值做了很多事情。

只是为了澄清，我在做什么需要这个：

在我正在开发的框架中，使用了三种不同的片段着色器。第一个（`main`在我的参考代码中）是用户提供的，这个可以调用`second`框架中定义的函数（在我的参考代码中）。第三级也是用户提供的，但着色器只编译一次，不知道它会被使用多少次以及它的哪些值，它`second`负责分配正确数量的缓冲区并`third`为每个缓冲区调用。

这是我用来测试着色器的代码：

```
#include <SDL.h>
#include <GL/glew.h>
#include <iostream>
#include <vector>
#include <cassert>
#include <sstream>
#include <stdexcept>

#define WIDTH 800
#define HEIGHT 640

void warn(const std::exception& e) {
#ifndef NDEBUG
    std::cerr << "Warning: " << e.what() << std::endl;
#endif
};

namespace {
std::string tostr(unsigned a) { 
    std::stringstream ss;
    ss << a;
    return ss.str();
}

std::string errorname(unsigned a) {
    switch(a) {
    case GL_NO_ERROR:                      return "GL_NO_ERROR";
    case GL_INVALID_ENUM:                  return "GL_INVALID_ENUM";
    case GL_INVALID_VALUE:                 return "GL_INVALID_VALUE";
    case GL_INVALID_OPERATION:             return "GL_INVALID_OPERATION";
    case GL_INVALID_FRAMEBUFFER_OPERATION: return "GL_INVALID_FRAMEBUFFER_OPERATION";
    case GL_OUT_OF_MEMORY:                 return "GL_OUT_OF_MEMORY";
    }
    return "";
}

}

void checkGlErrorImpl(unsigned line, const char* file) {
    GLenum curerr = glGetError();
    if( curerr == GL_NO_ERROR )
        return;

    auto err = std::runtime_error(std::string("OpenGL ")+errorname(curerr)+" error on "+file+":"+tostr(line));
    warn(err);
    throw err;
}

#define checkGlError() checkGlErrorImpl(__LINE__,__FILE__)

int create_shader(unsigned type, const char* shaderSource) {
    unsigned id = glCreateShader(type);

    const char* shaderSources[2] = {"#version 130\n",shaderSource};
    glShaderSource(id,2,shaderSources,NULL);

    glCompileShader(id);
    GLint compileStatus;
    glGetShaderiv(id, GL_COMPILE_STATUS, &compileStatus);
        int msgLength;
        glGetShaderiv(id, GL_INFO_LOG_LENGTH, &msgLength);

        char* msg = new char[msgLength];
        glGetShaderInfoLog(id, msgLength, &msgLength, msg);

        std::cout << "(" << id << ") " << msg << std::endl;

        std::runtime_error except(std::string("Error on compiling shader:\n")+msg);
        delete[] msg;
        if( compileStatus == GL_FALSE ) {
            warn(except);
            throw except;
        }

    checkGlError();

    return id;
};

int create_program(const std::vector<int>& shaders) {
    int id = glCreateProgram();
    checkGlError();
    for( unsigned int i=0; i< shaders.size(); ++i ) {
        glAttachShader(id,shaders[i]);
    }

    glLinkProgram(id);
    GLint linkStatus=-1;
    glGetProgramiv(id, GL_LINK_STATUS, &linkStatus);
    assert(linkStatus != -1);
    checkGlError();
    if( linkStatus == GL_FALSE ) {
        int msgLength=-1;
        glGetProgramiv(id, GL_INFO_LOG_LENGTH, &msgLength);
        assert( msgLength != -1 );

        char* msg = new char[msgLength+1];
        msg[0] = '\0';
        std::cout << "Buffer(" << msgLength+1 << ")" << msg << std::endl;
        glGetProgramInfoLog(id, msgLength+1, &msgLength, msg);
        std::cout << "Second length " << msgLength << std::endl;
        std::cout << "Log " << msg << std::endl;
        std::string errormsg("Error on linking shader: ");
        errormsg += msg;
//      delete[] msg;

        auto err = std::runtime_error(errormsg);
        warn(err);
        throw err;
    }

    checkGlError();

    return id;
}

int main(int argc, char** argv) {
    if( SDL_Init( SDL_INIT_VIDEO ) < 0 ) {
        throw __LINE__;
    }

    int video_flags;
    video_flags = SDL_OPENGL;
    video_flags |= SDL_GL_DOUBLEBUFFER;
    video_flags |= SDL_HWSURFACE;
    video_flags |= SDL_HWACCEL;
    SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 );
    SDL_Surface* surface = SDL_SetVideoMode( WIDTH, HEIGHT, 24, video_flags );
    if( surface == NULL )
        throw __LINE__;

    unsigned width = WIDTH;
    unsigned height = HEIGHT;

    GLenum err = glewInit();
    if (GLEW_OK != err) {
        std::cerr << "Error: " << glewGetErrorString(err) << std::endl;
        throw __LINE__;
    }

    std::vector<int> shaders;
    shaders.push_back( create_shader(GL_VERTEX_SHADER,
        "attribute vec4 vertex;\n"
        "void main(void) {\n"
        "   gl_Position = vertex;\n"
        "}\n"
    ));
    shaders.push_back( create_shader(GL_FRAGMENT_SHADER,
        "uniform sampler2D textures[2];\n"
        "vec4 third(sampler2D texture) {\n"
        "   return texture2D(texture,vec2(0.5,0.5));\n"
        "}\n"
        "vec4 second(float a) {\n"
        "   return third(textures[0]);\n"
        "}\n"
        "\n"
        "void main(void) {\n"
        "   gl_FragColor = second(0.0);\n"
        "}\n"
    ));

    int program = create_program(shaders);

    try {
        while( true ) {
            SDL_Event event;
            while( SDL_PollEvent(&event) ) {
                switch( event.type ) {
                case SDL_QUIT:
                    throw 0;
                break;
                }
            }
            SDL_Delay(10);
        }
    } catch( int returnal) {
        return returnal;
    }
    return 0;
}; 
```

它依赖于 GLEW、SDL、OpenGL 和 C++11。

# java - 如何使用 jenkins 部署 java 项目

> ID：15538026
> 
> 赞同：3
> 
> 时间：2013-03-21T01:43:55.077
> 
> 标签：java, ant, jenkins

我用jenkins测试我的java项目，成功了，但是不知道怎么用ant把我的项目部署到tomcat，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:55:14.927

只需将以下代码添加到 build.xml：

```
 <target name="dist" description="Unpack the file to war file" depends="compile">
   <war basedir="${dir.webRoot}" warfile="${webapp.deployPath}/${project.distname}.war"
                                     webxml="${dir.webRoot}/WEB-INF/web.xml">
    <exclude name="WEB-INF/web.xml"/>
    <exclude name="WEB-INF/lib/junit-4.6.jar"/>
   </war>
</target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:24:57.003

现在，您需要[Deploy Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)。

这个插件需要一个 war/ear 文件，并在构建结束时将其部署到正在运行的远程应用程序服务器。该实现基于 Cargo。当前支持的容器列表包括：

```
Tomcat 4.x/5.x/6.x/7.x
JBoss 3.x/4.x
Glassfish 2.x/3.x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T01:54:54.133

您可以下载几个已定义的 ant 任务并将其合并到您的流程中以执行此操作。[Ant](http://wiki.apache.org/tomcat/AntDeploy)总结了您将用于配置它的步骤。

将其合并到您的 build.xml 中并在单独的部署作业中设置这些步骤，您应该一切顺利。

上述步骤适用于 Tomcat 5.5，但它们与您用于 Tomcat 7 的步骤没有什么不同。此外，只需将 war 文件复制到 Tomcat 中的 webapps 目录，如果它正在扫描自动进行新的战争。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T01:51:57.957

只需在 build.xml 中添加一些代码

```
<target name="dist" description="Unpack the file to war file" depends="compile">
   <war basedir="${dir.webRoot}" warfile="${webapp.deployPath}/${project.distname}.war"
                                     webxml="${dir.webRoot}/WEB-INF/web.xml">
    <exclude name="WEB-INF/web.xml"/>
    <exclude name="WEB-INF/lib/junit-4.6.jar"/>
   </war>
</target> 
```

# vb.net - 对于每个带有 sql 阅读器的

> ID：15538029
> 
> 赞同：1
> 
> 时间：2013-03-21T01:44:03.167
> 
> 标签：vb.net

我有一份报告，每 5 分钟生成和 Excel 表格，其中包含部门 ID（DeptID）和已售文章（qtysoldtoday）等列。我希望我的 VB 应用程序打开这个 excel 文件并阅读每个部门 ID，选择最畅销的产品并将其绑定到 DataGridViewer。这是我的excel表格的简单版本，

DeptID 文章数量

01 香蕉 2

```
 apple              3 
```

02橙4

```
 apple              5 
```

这是我的代码不起作用

```
WithEvents bsData1 As New BindingSource
Private FileName1 As String = IO.Path.Combine(Application.StartupPath, "C:\WIN\SA022.xls")
Private SheetName1 As String = "Data"
Private ConnectionNoHeader1 As String = "provider= Microsoft.ACE.OLEDB.12.0; data source='{0}';Extended Properties=""Excel 12.0; HDR=yes;"""

Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim Dept(0 To 2) As String
    Dept(0) = "01"
    Dept(1) = "02"
     Dim DeptNum As String

Using cn As New OleDbConnection With {.ConnectionString = String.Format(ConnectionNoHeader1, FileName1)}
        cn.Open()
        For Each DeptNum In Dept
            Dim cmd As OleDbCommand = New OleDbCommand(
                <Text>
                SELECT 
                    DeptID,
                         Article,
                              QTYSOLDTHISDAY

                FROM [<%= SheetName1 %>$]

WHERE DeptID = DeptNum and QTYSOLDTHISDAY=(select max(QTYSOLDTHISDAY) from [<%= 

SheetName1 %>$] where DeptID =  DeptNum )
</Text`>.Value,
                        cn
                )
                Dim dt As New DataTable
                dt.Load(cmd.ExecuteReader)
                dt.AcceptChanges()
                bsData1.DataSource = dt
                DataGridView2.DataSource = bsData1
            Next DeptNum
        End Using
    End Sub 
```

OP 在下面的评论中指出的问题：

对于下一个循环，我在 gridview 中一无所获。如果我只是在 select 语句中输入部门 ID，它就可以工作，但我不能为每个部门 ID 都这样做，谢谢

# installation - 使用 NSDialogs 禁用复选框

> ID：15538035
> 
> 赞同：1
> 
> 时间：2013-03-21T01:44:53.230
> 
> 标签：installation, nsis

NSDialogs 是否具有允许您禁用 CheckBox 小部件的功能？如果不是，我猜唯一的方法是本机 WinAPI 函数。

我查看了 NSDialogs api，但找不到任何禁用功能

**编辑：**即使使用 WinAPI 函数（SendMessage），我似乎也很难做到这一点，为什么？

```
${NSD_CreateCheckbox} 12u 67u 45u 10u "Version 10"
Pop $myChkBx
SendMessage $myChkBx ${WM_ENABLE} "FALSE" "FALSE" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T01:55:50.193

下面是如何做到这一点：

```
EnableWindow $myChkBx 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:58:03.660

您尝试的错误点是您将两个字符串传递`FALSE`给了`SendMessage`而不是假值，即`0`.

```
SendMessage $myChkBx ${WM_ENABLE} 0 0 
```

# wordpress - WordPress 数据库连接

> ID：15538038
> 
> 赞同：0
> 
> 时间：2013-03-21T01:45:15.470
> 
> 标签：wordpress

我正在创建一个 wordpress 业务，让用户注册到您的网站。我知道 wp-config.php 文件用于连接到数据库。但是在我的主题文件夹中，我是否需要再次连接到数据库，如下面的代码所示。 **连接.php**

```
mysql_connect('localhost','xxxxx','xxxxxx');
mysql_select_db('xxxxxx'); 
```

**初始化文件**

```
require 'connect.php'; 
```

**注册.php**

```
include 'init.php'; 
```

我`$connect_error = "Database error!";`在我的 connect.php 文件中使用并输入了错误的主机和用户名，但它没有提示我错误消息。我认为它没有连接到我的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T11:45:41.657

可以从您自己的主题连接到 wordpress 数据库，这样每当用户访问网站时，他们都可以看到可以验证的表单 过程如下：
1.要让用户注册到网站，需要在前端创建表单

2.创建自己的主题[http://www.siteground.com/tutorials/wordpress/wordpress_create_theme.htm](http://www.siteground.com/tutorials/wordpress/wordpress_create_theme.htm)

3.将订阅表添加到您的用户数据库，其中包含名称、用户名、密码、email_id 等列

4.在 index.php 文件中添加以下代码到该文件以连接数据库

```
$myrows = $wpdb->get_results( "INSERT INTO Subscribe(name, username, password, email_id)VALUES('$name', '$uname', '$pswd', '$email')" ); 
```

$wpdb 对象不限于 WordPress 创建的默认表。它可用于从 WordPress 数据库中的任何表中读取数据，例如自定义插件表

# c++ - C++，圆上的坐标，涉及的角度，for循环和if循环

> ID：15538039
> 
> 赞同：0
> 
> 时间：2013-03-21T01:45:18.530
> 
> 标签：c++, loops, geometry, coordinates

我有这个代码。

```
for(int j=0; j<=n; j++)
{
  Xnew2 = -j*(Y+R2)/n;
  Ynew2 = pow((((Y+R2)*(Y+R2)) - (Xnew2*Xnew2)), 0.5);

  if(abs(Ynew2) <=R1)
    cout<<"\n("<<Xnew2<<", "<<Ynew2<<")"<<endl;

  AngleB2 = acos(Xnew2/pow((pow(Xnew2, 2))+(pow(Ynew2, 2)), 0.5))* (180/Pi);
  cout<<"\nAngle 'B' = "<<AngleB2<<" Degrees"<<endl;

  AngleV2 = acos(((pow(Xnew2, 2))+(pow(Ynew2, 2))+(pow(100, 2))-(pow(65, 2)))/(200*(pow(((pow(Xnew2, 2))+(pow(Ynew2, 2))), 0.5))))* (180/Pi);
  cout<<"Angle 'V' = "<<AngleV2<<" Degrees"<<endl;

  AngleTheta12 = AngleB2 - AngleV2;
  cout<<"Theta 1 = "<<AngleTheta12<<" Degrees"<<endl;

  AngleTheta22 =(asin(pow(((sin(AngleV2*Pi/180))*(pow(((pow(Xnew2, 2))+(pow(Ynew2, 2))), 0.5))/65), 0.5)))*(180/Pi);
  cout<<"Theta 2 = "<<AngleTheta22<<" Degrees"<<endl;
} 
```

我们正在为机器人手设计一个程序，以便能够绘制 Syastro 字母“K”，它本质上是一个新月。我们必须首先计算曲线上的点，然后计算机械臂的角度，如上图所示。

当不涉及限制时（计算形状外线的点/角度时），我已经设法让我的代码工作，但是一旦我尝试将限制强加到“for”循环中，它就不会给出丢了点，但还是列出了很多角度....

有谁知道我哪里出错了？我试图限制这些值，以便“Y”坐标必须在 310 和 -310 之间。

谢谢，如果你明白这一点！

# php - mysql表创建新行而不是更新

> ID：15538040
> 
> 赞同：1
> 
> 时间：2013-03-21T01:45:18.670
> 
> 标签：php, mysql

它没有发现存在“bookName”等于“bookName”的行并进行更新，而是创建了一个全新的行。我的命令有什么问题？谢谢！

```
$query = mysql_query(
"INSERT INTO custombookinfo (userId, sendToAddress, work, caseStudies, url, entryPoint, date, bookName) 
 VALUES ('$userId', '$emailAddress', '$work', '$caseStudies', '$url', '$entryPoint', '$date', '$bookName') 
 ON DUPLICATE KEY UPDATE bookName = 'bookName'"
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:48:38.290

查询是正确的`INSERT`，但我认为您未能`UNIQUE`在 column 上定义约束`bookName`。执行以下语句：

```
ALTER TABLE custombookinfo ADD CONSTRAINT tb_uq UNIQUE (bookName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:15:04.407

根据您希望在表中成为 UNIQUE 的内容，您应该为 user_id 或 bookName 创建一个索引（PRIMARY 或 UNIQUE）。

有关插入的更多详细信息**...关于重复密钥更新** [http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# jetty - 如果您不使用 JSP，Jetty 是否需要 JDK

> ID：15538044
> 
> 赞同：0
> 
> 时间：2013-03-21T01:45:44.553
> 
> 标签：jetty, java

假设您的应用程序没有编译任何内容并且不使用 JSP 页面，那么仅使用 JRE 运行 Jetty 是否可以，或者在 JDK 上运行是否有其他要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T01:47:54.063

您可以使用 JRE，甚至用于 JSP 编译，因为 JSP 支持具有内置的 Eclipse Compiler for Java (ECJ)。

# ruby-on-rails - RAILS_ENV=staging cap deploy 在 rake 预编译资产上失败

> ID：15538050
> 
> 赞同：0
> 
> 时间：2013-03-21T01:47:01.427
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, capistrano, rubber

我在 AWS 上设置了一个 t1.micro 实例。我能够成功运行： `RAILS_ENV=staging rubber:create_staging`创建服务器、部署代码并运行应用程序。我对代码进行了一些更改，并希望部署到我的登台服务器，但是当我运行此命令时： `RAILS_ENV=staging cap deploy` 我收到以下错误：

```
 * executing "cd -- /mnt/domain-staging/releases/20130321005928 && bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile && cp -- /mnt/domain-staging/shared/assets/manifest.yml /mnt/domain-staging/releases/20130321005928/assets_manifest.yml"
    servers: ["staging.domain.com"]
    [staging.domain.com] executing command
 * [out :: staging.domain.com] /usr/local/rubies/1.9.3-p385/bin/ruby /mnt/domain-staging/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=staging RAILS_GROUPS=assets
 * [out :: staging.domain.com]
 * [out :: staging.domain.com] rake aborted!
 * [out :: staging.domain.com] Command failed with status (): [/usr/local/rubies/1.9.3-p385/bin/ruby /mnt...]
 * [out :: staging.domain.com] /mnt/domain-staging/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/sprockets/assets.rake:9:in `ruby_rake_task'
 * [out :: staging.domain.com] /mnt/domain-staging/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/sprockets/assets.rake:62:in `block (3 levels) in <top (required)>'
 * [out :: staging.domain.com] /mnt/domain-staging/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/sprockets/assets.rake:19:in `invoke_or_reboot_rake_task'
 * [out :: staging.domain.com] /mnt/domain-staging/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.3/lib/sprockets/assets.rake:25:in `block (2 levels) in <top (required)>'
 * [out :: staging.domain.com] Tasks: TOP => assets:precompile:all
 * [out :: staging.domain.com] (See full trace by running task with --trace)
    command finished in 223523ms
failed: "/bin/bash -l -c 'cd -- /mnt/domain-staging/releases/20130321005928 && bundle exec rake RAILS_ENV=staging RAILS_GROUPS=assets assets:precompile && cp -- /mnt/domain-staging/shared/assets/manifest.yml /mnt/domain-staging/releases/20130321005928/assets_manifest.yml'" on staging.domain.com 
```

我没有更改任何默认的 capistrano 配方，并且代码已成功部署 1 次。我已经能够为我的生产站点而不是暂存站点运行“cap deploy”。我无法在 Google 组中找到任何内容，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:43:54.323

您需要调整您的 application.rb 以包含以下内容：

```
if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test), :profiling => %w[staging development]))
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-16T15:46:25.110

这是由于运行“assets:precompile”时的高内存消耗造成的。尝试重新启动您的 EC2 实例并再次运行部署，它可能会工作。您还可以更改实例类型以增强实例的内存并避免此类问题。

# wif - WIF 如何为我的服务器端创建声明？我需要创建 STS 吗？

> ID：15538053
> 
> 赞同：0
> 
> 时间：2013-03-21T01:47:36.607
> 
> 标签：wif

我打算做的是，我想做的是创建一个基于声明的身份验证。但是我使用了一个公共的身份验证提供程序，例如 LIVE 连接 API。所以它只返回基于 OAuth 的数据给我。

考虑到我是服务器端，我只想

1 使用 OAuth 获取数据。
2 将其转换为索赔。
3 将当前委托人设置为我创建的声明。

我需要创建 STS 吗？我可以使用这些声明实现 SSO 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:42:32.987

当您希望将身份验证逻辑与业务逻辑分离时，您可以创建安全令牌服务 (STS)，使其作为两个独立的服务/应用程序工作，其中一个正在发布安全令牌，另一个（或多个）正在消耗它们。

对我来说，您似乎应该实现自己的 ClaimsAuthenticationManager 将 OAuth 接收到的所有数据（它正在为您进行身份验证）转换为声明，使用它生成 ClaimsPrincipal 并向其添加您自己的业务逻辑声明 => 设置生成校长成为您当前的校长。

根据您为 OAuth 使用的库，其中一些会为您创建初始声明主体，然后您可以使用 ClaimsAuthenticationManager 并将其转换为您自己的声明主体。

有关它的更多参考，请查看 www.leastprivillege.com，Dominick 有一系列关于 OAuth 和基于声明的身份验证的精彩文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:27:01.120

看看[here](http://thinktecture.github.com/)他实际实现它的地方。

或者[这里](http://msdn.microsoft.com/en-us/library/hh446535.aspx)展示了如何使用 Azure ACS 进行操作。

# php - PHP 意外的文件结尾语法错误

> ID：15538056
> 
> 赞同：-1
> 
> 时间：2013-03-21T01:48:17.883
> 
> 标签：php, mysql, unexpectendoffile

首先感谢任何和所有的答案。他们都很感激！好的，我正在编写一种为网站用户生成 TeamSpeak 权限令牌的方法。他们单击一个按钮并为他们生成 2 个令牌。这一切都很好。系统的另一部分获取会员网站用户名和IP地址，然后搜索TeamSpeak3服务器的MySQL数据库以找到会员服务器ID（自动增量主键）。在简单地加载该成员用来执行此操作的页面时，会给出一个错误：“解析错误：语法错误，第 92 行的 'FILEPATH-REPLACED' 中的文件意外结束” 这是该文件的代码：

```
<?php
    if(!isset($member) || substr($_SERVER['PHP_SELF'], -11) != "console.php") {
    exit();
    }
    else {
    $memberInfo = $member->get_info();
    $consoleObj->select($_GET['cID']);
    if(!$member->hasAccess($consoleObj)) {
    exit();
    }
    }

    $rankObj = new Rank($mysqli);
    $rankObj->select($memberInfo['rank_id']);
    $RankInfo = $rankObj->get_info_filtered();
    $rankname = $RankInfo['name'];
    $cID = $_GET['cID'];
    $tsuid = "";

    $dispError = "";
    $countErrors = 0;
    if($_POST['submit']) {
        if($memberInfo['tsuid'] != "") {
        $tsuid = $memberInfo['tsuid'];
        $arrColumns = array("tsuid");
        $arrValues = array("");
        $member->update($arrColumns, $arrValues);
        }
        $ts3 = new IVTS3($tshost, $tsuser, $tspass, $tsdb);
        if($tsuid == "") {
        $tsuid = $ts3->getuid($memberInfo['username'], $memberInfo['ipaddress'], 0);
        if($tsuid == false) {
        die("Unable to retrieve TS UIDs. Please ensure you have been on our TeamSpeak Server using the same name as your website nickname. If you haven't been on our server, do so now, then regenerate tokens. Otherwise, contact Operations Support.");
        }
        $lastmembertoken = $memberInfo['tslasttokenmem'];
        $lastranktoken = $memberInfo['tslasttokenrank'];
        $lasttokens = ['rank' => $lastranktoken, 'mem' => $lastmembertoken];
        $newtoken = $ts3->createtoken($memberInfo['username'], $rankname, $lasttokens, $tsuid);
        $arrColumns = array("tslasttokenrank", "tslasttokenmem");
        $arrValues = array($newtoken['rank'], $newtoken['mem']);
        $member->update($arrColumns, $arrValues);
        echo "
                    <div style='display: none' id='successBox'>
                        <p align='center'>
                            Successfully generated new tokens!
                        </p>
                    </div>

                    <script type='text/javascript'>
                        popupDialog('New Tokens Created', '".$MAIN_ROOT."members/console.php?cID=$cID', 'successBox');
                    </script>

                ";
    }
    if(!$_POST['submit']) {
    $currentTokenRank = $memberInfo['tslasttokenrank'];
    $currentTokenMem = $memberInfo['tslasttokenmem'];
    if($currentTokenRank == "") {
    $currentTokenRank = "No Previously Generated Rank Token Exists (Click Generate Tokens Below)";
    }
    if($currentTokenMem == "") {
    $currentTokenMem = "No Previously Generated Membership Token Exists (Click Generate Tokens Below)";
    }
    echo "
    <form action='".$MAIN_ROOT."members/console.php?cID=".$cID."' method='post'>
    <div class='formDiv'>
    ";
    echo "
                    <div align='center'><h2>======IMPORTANT TEAMSPEAK DATA======</h2></div>
                    You need to use the following keys in TeamSpeak, they will give you your rank and membership group in TeamSpeak:<br>
                    <h2>Use the Membership Token First! Use it before using the Rank Token! If you fail to do this right then generate new tokens. If one or both of the tokens below have already been used, then you will need to generate new tokens.</h2>
                    Your Membership Token (Copy It): <b><u>$currentTokenMem</u></b><br>
                    Your Rank Token (Copy It): <b><u>$currentTokenRank</u></b>
                    <br>
                    HOW TO USE:<br>
                    1.) Open Teamspeak and connect to our server.<br>
                    2.) In the top menu bar click PERMISSIONS then USE PRIVILEGE KEY.<br>
                    3.) Paste the privilege token in and click OK. Ensure you do the Member Token First!<br>
                    4.) Do the same with the other key.<br>
                    <table class='formTable'>
                        <tr>
                            <td class='main' align='center' colspan='2'><br>
                                <input type='submit' name='submit' value='Generate Tokens' class='submitButton' style='width: 125px'>
                            </td>
                        </tr>
                    </table>
                </div>
            </form>

        ";
    }
?> 
```

系统引用了 IVTS3 类中的 2 个函数（getuid 和 createtoken）。createtoken 代码坚如磐石。它没有错误。getuid 代码最近与主文件一起更改，所以这里是 getuid 代码：

```
public function getuid($membername, $memberip, $method=0) {
    $tsuid = array();
    $membername = strtolower($membername);
    $clientid = $this->MySQL->query("SELECT client_id FROM clients WHERE client_lastip LIKE '%$memberip%' AND LOWER(client_nickname) LIKE '%$membername%'");
    while ($row = $clientid->fetch_assoc()) {
        $tsuid[] = $row['client_id'];
    }
    if ($tsuid == "") {
    $clientid = $this->MySQL->query("SELECT client_id FROM clients WHERE client_lastip LIKE '%$memberip%'");
    while ($row = $clientid->fetch_assoc()) {
        $tsuid[] = $row['client_id'];
    }
    }
    if ($tsuid == "") {
    $clientid = $this->MySQL->query("SELECT client_id FROM clients WHERE LOWER(client_nickname) LIKE '%$membername%'");
    while ($row = $clientid->fetch_assoc()) {
        $tsuid[] = $row['client_id'];
    }
    }
    if ($tsuid == "") {
    return false;
    }
    else {
    return $tsuid;
    }
} 
```

如前所述，我在第一个代码块上收到文件结束错误。我可能遗漏了一些东西，但我一遍又一遍地检查它，仍然找不到任何东西。再次感谢各位。任何问题都会尽快得到解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:56:37.263

您在脚本末尾缺少大括号。这是固定代码：

```
if (!isset($member) || substr($_SERVER['PHP_SELF'], -11) != "console.php") {
    exit();
} else {
    $memberInfo = $member->get_info();
    $consoleObj->select($_GET['cID']);
    if (!$member->hasAccess($consoleObj)) {
        exit();
    }
}

$rankObj = new Rank($mysqli);
$rankObj->select($memberInfo['rank_id']);
$RankInfo = $rankObj->get_info_filtered();
$rankname = $RankInfo['name'];
$cID      = $_GET['cID'];
$tsuid    = "";

$dispError   = "";
$countErrors = 0;
if ($_POST['submit']) {
    if ($memberInfo['tsuid'] != "") {
        $tsuid      = $memberInfo['tsuid'];
        $arrColumns = array(
            "tsuid"
        );
        $arrValues  = array(
            ""
        );
        $member->update($arrColumns, $arrValues);
    }
    $ts3 = new IVTS3($tshost, $tsuser, $tspass, $tsdb);
    if ($tsuid == "") {
        $tsuid = $ts3->getuid($memberInfo['username'], $memberInfo['ipaddress'], 0);
        if ($tsuid == false) {
            die("Unable to retrieve TS UIDs. Please ensure you have been on our TeamSpeak Server using the same name as your website nickname. If you haven't been on our server, do so now, then regenerate tokens. Otherwise, contact Operations Support.");
        }
        $lastmembertoken = $memberInfo['tslasttokenmem'];
        $lastranktoken   = $memberInfo['tslasttokenrank'];
        $lasttokens      = array(
            'rank' => $lastranktoken,
            'mem' => $lastmembertoken
        );
        $newtoken        = $ts3->createtoken($memberInfo['username'], $rankname, $lasttokens, $tsuid);
        $arrColumns      = array(
            "tslasttokenrank",
            "tslasttokenmem"
        );
        $arrValues       = array(
            $newtoken['rank'],
            $newtoken['mem']
        );
        $member->update($arrColumns, $arrValues);
        echo "
                    <div style='display: none' id='successBox'>
                        <p align='center'>
                            Successfully generated new tokens!
                        </p>
                    </div>

                    <script type='text/javascript'>
                        popupDialog('New Tokens Created', '" . $MAIN_ROOT . "members/console.php?cID=$cID', 'successBox');
                    </script>

                ";
    }
    if (!$_POST['submit']) {
        $currentTokenRank = $memberInfo['tslasttokenrank'];
        $currentTokenMem  = $memberInfo['tslasttokenmem'];
        if ($currentTokenRank == "") {
            $currentTokenRank = "No Previously Generated Rank Token Exists (Click Generate Tokens Below)";
        }
        if ($currentTokenMem == "") {
            $currentTokenMem = "No Previously Generated Membership Token Exists (Click Generate Tokens Below)";
        }
        echo "
    <form action='" . $MAIN_ROOT . "members/console.php?cID=" . $cID . "' method='post'>
    <div class='formDiv'>
    ";
        echo "
                <div align='center'><h2>======IMPORTANT TEAMSPEAK DATA======</h2></div>
                You need to use the following keys in TeamSpeak, they will give you your rank and membership group in TeamSpeak:<br>
                <h2>Use the Membership Token First! Use it before using the Rank Token! If you fail to do this right then generate new tokens. If one or both of the tokens below have already been used, then you will need to generate new tokens.</h2>
                Your Membership Token (Copy It): <b><u>$currentTokenMem</u></b><br>
                Your Rank Token (Copy It): <b><u>$currentTokenRank</u></b>
                <br>
                HOW TO USE:<br>
                1.) Open Teamspeak and connect to our server.<br>
                2.) In the top menu bar click PERMISSIONS then USE PRIVILEGE KEY.<br>
                3.) Paste the privilege token in and click OK. Ensure you do the Member Token First!<br>
                4.) Do the same with the other key.<br>
                <table class='formTable'>
                    <tr>
                        <td class='main' align='center' colspan='2'><br>
                            <input type='submit' name='submit' value='Generate Tokens' class='submitButton' style='width: 125px'>
                        </td>
                    </tr>
                </table>
            </div>
        </form>

    ";
    }

} 
```

# linq-to-entities - EF 5 LINQ 在 ON 子句中加入多个条件的表

> ID：15538058
> 
> 赞同：2
> 
> 时间：2013-03-21T01:48:31.317
> 
> 标签：linq-to-entities, entity-framework-5, asp.net-4.5

我正在尝试在 on 子句中使用两个条件连接表，但出现错误

> 运算符 && 不能应用于 byte 和 byte 类型的操作数

如何在 ON 子句中使用多个条件来连接表？

```
 using (var db = new ReleaseInfo())
                {
                    lvReleaseInfo = (from r in db.ReleaseTranslations
                                     join c in db.Countries
                                     on r.SectionRelease.ReleaseCountryID equals c.CountryID && c.CultureID equals CultureID
                                     join pf in db.Platforms
                                     on r.SectionRelease.PlatformID equals pf.PlatformID && pf.PlatformID equals CultureID
                                     join pub in db.Publishers
                                     on r.SectionRelease.PublisherID equals pub.PublisherID && pub.CultureID equals CultureID
                                     where r.ReleaseID == SectionID && r.CultureID == CultureID
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:53:09.703

您可以为 equi-join 的每一侧创建一个匿名类型：

```
lvReleaseInfo = (from r in db.ReleaseTranslations
                 join c in db.Countries
                 on new {CountryID = r.SectionRelease.ReleaseCountryID, CultureID} equals new {c.CountryID, c.CultureID}
                 join pf in db.Platforms
                 on new {r.SectionRelease.PlatformID, CultureID} equals new {pf.PlatformID, CultureID = pf.PlatformID}
                 join pub in db.Publishers
                 on new {r.SectionRelease.PublisherID, r.CultureID} equals new {pub.PublisherID, pub.CultureID}
                 where r.ReleaseID == SectionID && r.CultureID == CultureID 
```

# java - 使用对象的 ArrayList 进行选择排序

> ID：15538059
> 
> 赞同：-4
> 
> 时间：2013-03-21T01:48:31.963
> 
> 标签：java, sorting, arraylist, selection

我在这种情况下遇到了一些麻烦。它只会按顺序正确显示第一个文件。有人看到我做错了什么吗？我已经试图弄清楚几个小时了，只是看不到我做错了什么。

```
public void sort() { 

    int i; //loop control
    int last; //last position in the arraylist
    int max; //position where last alphabetical filename is found

    max = 0; //largest position so far is first, since i haven't checked

    //I thought i should start at the end and work my way down
    for(last = fileList.size()-1; last >= 0; last--) {

        for(i = 0; i < fileList.size(); i++) {
            if(fileList.get(max).getFileName().compareTo(fileList.get(i).getFileName()) > 0)
                max = i;
        }

        //swap pixfile in last position with the last alphabetical
        Pixfile tempPix = fileList.get(last);
        fileList.set(last, fileList.get(max));
        fileList.set(max, tempPix);
        //i thought i would repeat until last = 0 and the arraylist is sorted
    }//end for

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:52:32.437

内部 for 循环应该是`for(int i = 0; i <= last; i++)`因为您正在从尚未排序的内容中选择最好的。在最后一次之后的所有内容，您已经在外循环的先前迭代中进行了排序。

此外，您不会`max`在每次迭代中重置值，所以在内部 for 循环之前，写`max = 0;`

另外，如果你懒得写排序算法，你总是可以使用`Arrays.sort()`或`Collections.sort()`

# c# - 如何在特定的验证控件中删除验证焦点

> ID：15538066
> 
> 赞同：0
> 
> 时间：2013-03-21T01:49:33.623
> 
> 标签：c#, asp.net

我发现最后一行的验证具有比我设置第一行验证控件的焦点更高的优先级，即使我将焦点设置在后面也是如此。

想要禁用一些验证焦点

发现即使我在某些验证中设置了 SetFocusOnError="false"，它仍然不会滚动到页面顶部

经过多次测试，大部分时间成功，少数情况下失败。我不确定是否有人同时在生产现场做事。我已经使用了我所有的方法。

我在生产站点中发现一件事，当向下滚动到底部页面时，我必须按两次提交按钮才能聚焦到页面顶部，

但是当不滚动到页面底部时，它不会聚焦到页面顶部，只是有时幸运的是它聚焦，大多数情况下它不会聚焦到页面顶部

**Firefox 和 Internet Explorer 使用此方法 100% 成功，Chrome 有时成功，在这种情况下大部分时间都失败**

但是，我仍然无法在后面的代码中设置焦点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:56:57.637

最后，我将重点放在文本框而不是标签上，它在生产站点上取得了成功。结论是未能在生产现场将重点放在 chrome 中的标签上，而仅在测试现场成功

# scala - 为什么在 Scala 中为模式匹配 Java 类定义提取器需要类型同义词？

> ID：15538068
> 
> 赞同：1
> 
> 时间：2013-03-21T01:49:48.560
> 
> 标签：scala, pattern-matching

如果存在现有的 Java 类 pkg.Test，

```
package pkg;
public class Test {
  public int v;
  public Test(int v) { this.v = v; }
} 
```

试图通过定义一个 scala 伴随对象来创建一个提取器

```
package pkg
object Test{
  def unapply(t : Test) : Option[Int] = Some(t.v)
} 
```

产生错误“测试已定义为对象测试”。但是，如果我在新包中为 java 类创建同义词，一切似乎都有效

```
package pkg
package object matchers {
  type Test = pkg.Test
} 
```

并在新包中定义一个对应的对象

```
package pkg.matchers
object Test {
  def unapply(t : Test) : Option[Int] = Some(t.v)
} 
```

现在模式和原始类的所有成员都可以从新包中获得

```
import pkg.matchers._
object main {
  def main(args : Array[String]) {
    val t = new Test(1)
    t match {case Test(v) => println(v)}
    println(t.v)
  }
} 
```

添加类型同义词让这个工作似乎很奇怪。除了必须使用新包之外，以这种方式添加模式匹配是否有任何问题？有什么方法可以使提取器在原始包装中可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T01:57:47.463

这是因为在与 Java 库交互时，Scala 需要一种将 Java 的静态方法映射到 Scala 的单例对象的方法。

例如，如果您有以下 Java 类：

```
package pkg;

class Test {
  public static void printHello() {
    System.out.println("Hello");
  }
} 
```

我们如何`printHello`在 Scala 中调用？它将如下所示：

```
import pkg.Test
Test.printHello() 
```

如您所见，语法与调用 中的方法完全相同`object Test`。从这个角度来看，`Test`单例已经定义好了，你不能`object`用相同的 FQN 定义两次。

这就是为什么你需要定义`pkg.matchers.Test`，这样它就不会与`pkg.Test`.

并且 Scala 的编译器足够聪明，可以判断出这`pkg.matchers.Test`是一个无法使用`new`关键字构造它的单例，所以当你编写时`new Test(1)`，它是`pkg.Test`而不是`pkg.matchers.Test`. 这就是为什么您可以在代码示例中同时使用它们的原因。

实际上，您根本不需要`type Test = pkg.Test`，以下工作正常：

```
package pkg

package matchers {
  object Test {
    def unapply(t : Test) : Option[Int] = Some(t.v)
  }
}

object main {

  import pkg.matchers._

  def main(args : Array[String]) {

    val t = new Test(1)
    t match {case Test(v) => println(v)}
    println(t.v)
  }
} 
```

# 更新

Extractor 不需要是伴生对象，这意味着您不需要相应的类。任何`object`with`unapply`方法都可以用作提取器。

```
object StringLength {
  def unapply(x: String): Option[Int] = Some(x.length)
}

object Main {

  def main(args: Array[String]) {

    "Hello World" match {
      case StringLength(x) => println("length:" + x)
    }
  }
} 
```

因此，如果 main 方法不在 中`pkg`，您有以下选择：

1.  将您的提取器重命名为另一个名称，以便编译器知道您正在使用提取器。

2.  使用 FQN，因此编译器知道您正在访问`pkg.matchers.Test`而不是`pkg.Test`.

    ```
    package pkg.matchers {

      import pkg._

      object Test { 
        def unapply(t : Test) : Option[Int] = Some(t.v)
      } 
    }

    object Main {

      def main(args: Array[String]) {

        import pkg.Test

        val t = new Test(1)
        t match {case pkg.matchers.Test(v) => println(v)}
        println(t.v)

      }

    } 
    ```

3.  使用语法重命名`pkg.Test`为另一个名称`import`，因此它不会与`pkg.matchers.Test`.

    ```
    object Main {

      def main(args: Array[String]) {

        import pkg.{Test => JTest}
        import pkg.matchers.Test

        val t = new JTest(1)
        t match {case Test(v) => println(v)}
        println(t.v)

      }
    } 
    ```

4.  只需从 导入所有内容`pkg`，特别是导入`pkg.matcher.Test`。

    ```
     def main(args: Array[String]) {

        import pkg._
        import pkg.matchers.Test

        val t = new Test(1)
        t match {case Test(v) => println(v)}
        println(t.v)

      } 
    ```

# google-app-engine - 无效的语法 jinja2 模板值

> ID：15538069
> 
> 赞同：-2
> 
> 时间：2013-03-21T01:49:51.587
> 
> 标签：google-app-engine, python-2.7, jinja2

为什么**max_height**会产生无效的语法错误？

**主文件**

```
max_height = 70

template_values = {   
   'max_height': max_height    # syntax error
   ...
} 
```

**索引.html**

```
<html>
    <body>      
        {% for person in people %}
            {% if person.filter("height <", max_height %)
                <b>{{ person.first_name }}</b> 
                <b>{{ person.last_name }}</b>
                <b>{{ person.city }}</b> 
                <b>{{ person.birth_year }}</b> 
                <b>{{ person.height }}</b> 
                <hr></hr>
            {% endif %}
        {% endfor %}
    </body>
</html> 
```

编辑 1 这是来自**main.py**的类 MainPage ：

```
class MainPage(webapp2.RequestHandler):
    def get(self):

        people_query = Person.all()
        people = people_query.fetch(10)

        max_height = 70

        template_values = {
            'people': people
            'max_height': max_height
        }

        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:52:24.580

这一行：

```
{% if person.filter("height <", max_height %) 
```

应该看起来像这样：

```
{% if person.filter("height <", max_height) %} 
```

另外，我建议不要在模板本身中使用任何类型的过滤逻辑。将该代码放入您的应用程序代码中，然后使用模板来呈现 HTML。

# javascript - 以编程方式触发对 UIWebView 中链接的长按

> ID：15538076
> 
> 赞同：0
> 
> 时间：2013-03-21T01:50:37.747
> 
> 标签：javascript, ios, uiwebview

有没有办法以编程方式触发长按 a 内的链接`UIWebView`，使上下文菜单操作表出现？

我知道可以通过其 id 检索链接并以编程方式单击它使用`[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('linkId').click;"];`

有什么功能可以代替`click`触发长按而不是常规的左键单击吗？

只要呈现的菜单确实与长按后呈现的菜单相同，任何呈现上下文菜单的解决方案（不仅使用 javascript）都对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:10:50.757

您可以简单地以`UIActionSheet`编程方式呈现并使其看起来像长按一样。像这样的东西：

```
UIActionSheet *ac = [[UIActionSheet alloc] initWithTitle:@"Link Actions"
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                  destructiveButtonTitle:nil
                                       otherButtonTitles:@"Open link in Safari", @"Copy link", nil]; 
```

不要忘记实现委托方法`actionSheet:clickedButtonAtIndex:`

# matlab - 与 mex 文件相关的 matlab 错误或 libsvm 错误

> ID：15538077
> 
> 赞同：0
> 
> 时间：2013-03-21T01:50:41.280
> 
> 标签：matlab, runtime-error, svm, mex, libsvm

我正在使用带有 Matlab R2011 的 libsvm。我的问题是它突然开始给我关于 mex 文件的错误并且它不会再次运行。有趣的是同一个程序运行了一段时间，但现在它不工作了。错误如下。

%%%%%%%%%%%%%%%%%%%%

在 2013 年 3 月 21 日星期四 07:01:31 检测到分段违规

.......然后是一些堆栈跟踪文件名......

运行 MEX 文件时检测到此错误。如果 MEX 文件不是 MathWorks 的官方函数，请检查其源代码是否有错误。有关调试 MEX 文件的信息，请参阅外部接口指南。捕获 MathWorks::System::FatalException

%%%%%%%%%%%%%%%%%%

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:12:34.703

您的输入数据格式可能存在一些错误。由于 libsvm 是开源的，您可以尝试使用 Visual Studio（在 Windows 中）通过附加到进程来调试您的 mex 文件。谷歌“mex 文件调试”了解更多详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T10:16:27.327

可能是忘记删除了一些路径，可以查看之前添加的一些路径。添加了一些路径后，必须删除。如果不这样做，它将不知道要使用什么功能。

# actionscript-3 - 是否可以通过 actionscript 的 Sound.load() 函数生成 XSS？

> ID：15538082
> 
> 赞同：1
> 
> 时间：2013-03-21T01:51:03.013
> 
> 标签：actionscript-3, flash, xss

我发现了一些类似的动作脚本代码：

```
var s:Sound = new Sound(); 
s.addEventListener(Event.COMPLETE, onSoundLoaded); 
var req:URLRequest = new URLRequest(XX_EXTERNAL_URL); 
s.load(req); 
```

在这种情况下，攻击者可以控制`XX_EXTERNAL_URL`，这是否易受攻击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:37:35.213

很可能它只会产生声音转换错误或垃圾声音，而不会对 SWF 播放器或系统产生任何额外影响。需要在声音代码中存在导致代码注入或数据损坏的错误才能使攻击成功。但是，使用预定义的`Sound`对象代码，它要么存在要么不存在，因此如果您从其他地方加载声音，它不会更容易受到攻击。

# python - 直观地表示 X 和 Y 值

> ID：15538085
> 
> 赞同：1
> 
> 时间：2013-03-21T01:51:48.437
> 
> 标签：python, matplotlib, plot

我有一个 (x,y) 值列表，这些值位于 [(x,y),(x,y),(x,y)....] 之类的列表中。我觉得在 matplotlib 中有一个解决方案，但由于我的格式，我无法做到。我想将其绘制为直方图或线图。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T02:03:45.780

您可以`(x, y)`使用 * ('splat') 运算符很容易地将元组列表转换为 x 和 y 坐标的两个元组的列表（另请参阅[此 SO question](https://stackoverflow.com/questions/5917522/unzipping-and-the-operator)）：

```
>>> zip(*[(0, 0), (1, 1), (2, 4), (3, 9)])
[(0, 1, 2, 3), (0, 1, 4, 9)] 
```

然后，您可以再次使用 * 运算符将这些参数解压缩到`plt.plot`

```
>>> plt.plot(*zip(*[(0, 0), (1, 1), (2, 4), (3, 9)])) 
```

甚至`plt.bar`

```
>>> plt.bar(*zip(*[(0, 0), (1, 1), (2, 4), (3, 9)])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T02:02:36.737

也许你可以尝试这样的事情（[另见](https://stackoverflow.com/questions/8806101/how-to-split-tuple-with-parentheses-in-python)）：

```
import numpy as np:
xs=[]; ys=[]
for x,y in xy_list:
  xs.append(x)
  ys.append(y)
xs=np.asarray(xs)
ys=np.asarray(ys)
plot(xs,ys,'ro') 
```

也许不是最优雅的解决方案，但它应该可以工作。干杯，特隆德

# c - C Socket Server，内存随文件写入而增加

> ID：15538094
> 
> 赞同：3
> 
> 时间：2013-03-21T01:52:39.043
> 
> 标签：c, linux, file-io, memory-leaks

我有一个用 C 编写的简单服务器程序，该程序在 Ubuntu Linux 发行版上运行。该程序旨在侦听从客户端发送的消息，将这些消息写入文件（每条消息进入一个单独的文件），并在收到并存储消息后向客户端发送确认。

我注意到，随着服务器继续接收和存储消息，可用系统内存量迅速减少并继续减少，直到消息停止。当没有消息被发送时，内存保持不变。但是，我也注意到我可以通过从磁盘中删除写入的文件来再次释放内存（即使服务器仍在运行，我也可以这样做）。因此，我相信内存问题与我的文件操作有关，尽管我看不到写入文件的代码有任何问题。

有人可以帮忙吗？

注意：我用“top”观察内存使用情况。

我已经包含了该程序的摘录。下面的函数处理来自客户端的输入并将该信息写入文件。这是我目前认为问题所在：

```
void handleinput (int sock)
{
    char filename[strlen(tempfolder) + 27];
    generatefilename(filename);

    int rv;
    int n = 1;
    int received = 0;
    char buffer[BUFFER_SIZE];
    FILE *p = NULL;
    fd_set set;
    char response[768];
    struct timeval timeout;
    timeout.tv_sec = 360;
    timeout.tv_usec = 0;

    FD_ZERO(&set);
    FD_SET(sock, &set);

    bzero(buffer, BUFFER_SIZE);
    bzero(response, sizeof response);
    rv = select(sock + 1, &set, NULL, NULL, &timeout);
    if (rv == -1)
    {
        error("error on select in handleinput");
        close(sock);
        exit(1);
    }
    else if (rv == 0)
    {
        close(sock);
        exit(0);
    }
    else
    {
            n = read(sock, buffer, BUFFER_SIZE-1);
            if (n <= 0)
            {
                close(sock);
                exit(0);
            }
    }

    // open file
    if (n != 0)
    {
        p = fopen(filename, "a");
        if (p == NULL)
        {
            error("ERROR writing message to file");
            close(sock);
            exit(1);
        }
    }

    // loop until full message is received
    while (n != 0)
    {
        if (n < 0)
        {
            error("ERROR reading from socket");
            close(sock);
            exit(1);
        }

        received = 1;
        // write content to file
        fwrite(buffer, strlen(buffer), 1, p);

        if (buffer[strlen(buffer)-1] == 0x1c)
        {
            break;
        }

        bzero(buffer, BUFFER_SIZE);
        rv = select(sock + 1, &set, NULL, NULL, &timeout);
        if (rv == -1)
        {
            error("ERROR select in loop in handleinput");
            close(sock);
            exit(1);
        }
        else if (rv == 0)
        {
            close(sock);
            exit(0);
        }
        else
        {
            n = read(sock, buffer, BUFFER_SIZE-1);
        }
    }

    // close file if we opened it earlier
    if (p != NULL)
    {
        fclose(p);
    }

    // send acknowledgement back to client
    if (received == 1)
    {
        generateResponse(response, filename);
        n = write(sock, response, strlen(response));

        if (n < 0)
        {
            error("ERROR writing to socket");
            close(sock);
            exit(1);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:41:33.497

这是因为写入的缓存机制。如果您有很多客户端尝试写入文件，则 IO 缓冲区会填充内核内存，但在您关闭套接字或缓冲区填满之前不会真正写入该文件。您可以通过刷新缓冲区来解决此问题。其他一些人的建议是摆脱 stdio 中的写入和读取包装器，而只使用内核调用 write，因为这将有助于提高性能并且可能会自动刷新缓冲区。

顺便说一句，您可以使用 fsync() 刷新。

# android - maps api v2 android中位置管理器的问题

> ID：15538096
> 
> 赞同：0
> 
> 时间：2013-03-21T01:52:48.297
> 
> 标签：android, locationmanager, android-maps-v2, currentlocation

我正在开发一个 android 应用程序，它在地图中显示用户的当前位置。

几个小时后，我发现了错误，locationManager 没有实现位置。

我将代码相对于 locationManager：

```
mapa = ((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.mapaTapas)).getMap();

String serviceString = Context.LOCATION_SERVICE;
LocationManager locationManager = (LocationManager)getSystemService (serviceString);
String proovedor1 = LocationManager.GPS_PROVIDER;
locationManager.getLastKnownLocation(proovedor1);
String proovedor2 = LocationManager.NETWORK_PROVIDER;
locationManager.getLastKnownLocation(proovedor2);

locationManager.requestLocationUpdates(proovedor1, 5000, 5, new LocationListener()
{
@Override
public void onStatusChanged(String arg0, int arg1,Bundle arg2) { }

@Override
public void onProviderEnabled(String arg0) {}

@Override
public void onProviderDisabled(String arg0) {}

@Override
public void onLocationChanged(Location Location)
   {
       location=Location;
   }
});

locationManager.requestLocationUpdates(proovedor2, 5000, 5, new LocationListener()
{
@Override
public void onStatusChanged(String arg0, int arg1,Bundle arg2) { }

@Override
public void onProviderEnabled(String arg0) {}

@Override
public void onProviderDisabled(String arg0) {}

@Override
public void onLocationChanged(Location Location)
{
    location=Location;
    }
});

location = locationManager.getLastKnownLocation(towers);

    if(location != null){

        glat = location.getLatitude();
        glon = location.getLongitude();

        Log.i("location", "latitud: "+glat);
        Log.i("location", "latitud: "+glon);

}

cp = new CameraPosition.Builder()
        .target(new LatLng(glat, glon))
        .zoom(15)
        .build();     
    mapa.animateCamera(CameraUpdateFactory.newCameraPosition(cp)); 
```

我需要将位置的当前值保存在 glat 和 glon 中，如果它可能实现一些方法来自动刷新它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:03:49.880

[引入](https://developers.google.com/maps/documentation/android/releases)接口后`LocationManager`，无需手动请求位置更新。`OnMyLocationChangeListener`

您只需要启用 my-location 层 ( `map.setMyLocationEnabled(true)`)，设置侦听器 ( `map.setOnMyLocationChangeListener(this)`) 并使用在相应回调中传回给您的当前位置（例如动画相机）做任何您想做的事情（通过实现该接口提供）。

# python - unicode 减号的转换（来自 matplotlib ticklabels）

> ID：15538099
> 
> 赞同：14
> 
> 时间：2013-03-21T01:53:03.103
> 
> 标签：python, string, unicode, python-2.7, matplotlib

我遇到了 matplotlib 用来表示刻度标签的 Text 对象的问题。

出于测试原因，我需要检查在图中创建的刻度标签的值。如果标签是字符串或正数，则没有问题：返回 unicode 字符串，我对其进行测试（或根据情况将其转换为数字），一切都很好。

但是，如果标签是负数，我得到的是一个损坏的 unicode 字符串，原因我无法理解。

让我们看这个示例代码：

```
import pylab as plt
fig, ax = plt.subplots(1)
ax.plot([-1, 0, 1, 2], range(4))
labels = ax.get_xticklabels() 
```

现在，如果我询问第二个标签（的`0`）的文本内容，我会得到一个普通的 unicode 字符串：

```
labels[1].get_text()
# u'0.0' 
```

但是第一个（the `-1`）的unicode是一件奇怪的事情

```
labels[1].get_text()
# u'\u22121' 
```

这在终端中正确打印，但在这种情况下，我需要用一个数值来处理它，并且每次转换都失败，无论是`int`和`float`。

我尝试将其转换为 UTF-8 字符串

```
text = labels[1].get_text()
text.encode('utf8')
# '\xe2\x88\x921' 
```

但它再次被正确打印并在转换时引发错误。我也查看了`unicodedata`模块，但看起来它只能转换单个字符，所以在这种情况下没用。我也尝试过使用`unicodedata.normalize`任何可能的格式来规范化字符串，但同样没有成功。

我搬到了 pipy 模块`unidecode`（如[Python and character normalization](https://stackoverflow.com/questions/4162603/python-and-character-normalization)中所建议的那样），再次没有任何成功

```
from unidecode import unidecode
unidecode(text)
# '[?]1' 
```

我还尝试使用[Matplotlib 中的非 ASCII 字符中](https://stackoverflow.com/questions/10960463/non-ascii-characters-in-matplotlib)的解决方案来避免字体问题，但结果相同（我不确定它是否应该有事可做，因为这是一个可视化问题......）。问题Matplotlib 中的[Accented characters](https://stackoverflow.com/questions/2406700/accented-characters-in-matplotlib)也有类似的问题，因为它关注的是可视化而不是值本身

我开始感到有点失落......我知道python 2.7有一些unicode“困难”，但通常我可以以某种方式避免它们。

我知道问题是减号，因为我可以通过粗暴替换罪魁祸首来避免问题：

```
text.replace(u'\u2212', '-')
# u'-1' 
```

但这不仅仅是一个解决方案，而且我几乎可以肯定它在不同的系统中不稳定，所以我想要更接近*解决方案*的东西。

我正在与

*   蟒蛇2.7.3
*   matplotlib 1.2.0
*   pylab 1.7.0
*   IPython 0.13.1

在 Kubuntu 12.10 上。

非常感谢您的帮助！

### 编辑：

更正了情节的顺序，因为我把 x 和 y 颠倒了，对不起

### 编辑2：

此链接中提供了类似的信息：http: [//www.coniferproductions.com/2012/12/17/unicode-character-dump-in-python/](http://www.coniferproductions.com/2012/12/17/unicode-character-dump-in-python/)

最后，它显示了在某些书中使用的减号如何在审美上更令人愉悦，但 Python 解释器不将其识别为有效字符。

### 编辑3：

谜底解开了。matplotlib 返回的字符是“减号”，即减号的正确印刷符号。键盘创建的实际上是“HYPHEN-MINUS”，这是常用的，但在印刷上不正确。请参阅维基百科上的解释[http://en.wikipedia.org/wiki/Hyphen-minus](http://en.wikipedia.org/wiki/Hyphen-minus)。

因此，我使用的简单替换实际上是正确的实际操作，但“道德上”是 python（2.7 和 3.x 类似）中的一个错误，它无法识别减号的正确符号。

[请参阅http://bugs.python.org/issue6632](http://bugs.python.org/issue6632)中的错误跟踪

### 编辑4：

要禁用此行为，matplotlib 上有一个简单的解决方案，只需在 .matplotlibrc 中或以编程方式修改 rcparams。

```
import matplotlib as mpl
mpl.rcParams['axes.unicode_minus']=False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:50:32.987

使用`plt.xticks()`代替`ax.get_xticklabels()`：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots(1)
ax.plot([-1, 0, 1, 2], range(4))
plt.savefig('/tmp/test.png')
loc, labels = plt.xticks()
print(type(loc))
# <type 'numpy.ndarray'>
print(loc)
# [-1\.  -0.5  0\.   0.5  1\.   1.5  2\. ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:17:49.167

所有有效的 Unicode 字符都有名称。我们可以检查已识别数字单词 ( `DIGIT.keys()`) 的名称，并在此基础上将“正常”数字字符 ( `DIGIT.values()`) 替换为给定的 unicode 标签：

```
import matplotlib.pyplot as plt
import unicodedata as UD

DIGIT = {
    'MINUS': u'-',
    'ZERO': u'0',
    'ONE': u'1',
    'TWO': u'2',
    'THREE': u'3',
    'FOUR': u'4',
    'FIVE': u'5',
    'SIX': u'6',
    'SEVEN': u'7',
    'EIGHT': u'8',
    'NINE': u'9',
    'STOP': u'.'
    }

def guess(unistr):
    return ''.join([value for u in unistr
                    for key,value in DIGIT.iteritems()
                    if key in UD.name(u)])

fig, ax = plt.subplots(1)
ax.plot([-1, 0, 1, 2], range(4))
plt.savefig('/tmp/test.png')
labels = ax.get_xticklabels()
for label in labels:
    label = label.get_text()
    print(guess(label)) 
```

产量

```
-1.0
-0.5
0.0
0.5
1.0
1.5
2.0 
```

# clojure - 删除给定 midje 测试中的冗余代码

> ID：15538111
> 
> 赞同：1
> 
> 时间：2013-03-21T01:54:45.517
> 
> 标签：clojure

在下面的代码中，有很多冗余代码，我在左侧对所有三个事实执行相同的操作。在右侧，我也有相同的 let 块。我该如何处理这种冗余？

```
(facts "Data is grouped by the given keys."
       (fact "The grouping keys are a subset of the :month/:day keys in data"
             (group-data data :day) => (fn [d]
                                           (let [months (map :day data)
                                                 grouped-by-keys (keys d)]
                                             (subset? (set grouped-by-keys) (set months)))))
       (fact "All the grouping keys are distinct"
             (group-data data :day) => (fn [d]
                                           (let [months (map :day data)
                                                 grouped-by-keys (keys d)]
                                             (apply distinct? grouped-by-keys))))
       (fact "All the distinct keys from data are present in grouping keys"
             (group-data data :day) => (fn [d]
                                           (let [months (map :day data)
                                                 grouped-by-keys (keys d)]
                                             (empty? (difference (set months) (set grouped-by-keys))))))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:45:11.963

宏可以帮助：

```
(defmacro day-facts [facts]
  (let [f (fn [[name expr]]
            `(~'fact ~name
                     (~'group-data ~'data :day) ~'=> (fn [~'d]
                                                       (let [~'months (map :day ~'data)
                                                             ~'grouped-by-keys (keys ~'d)]
                                                         ~expr))))]
    `(~'facts "Data is grouped by the given keys."
              ~@(map f facts))))

(day-facts [["The grouping keys are a subset of the :month/:day keys in data" (subset? (set grouped-by-keys) (set months))]
            ["All the grouping keys are distinct" (apply distinct? grouped-by-keys)]
            ["All the distinct keys from data are present in grouping keys" (empty? (difference (set months) (set grouped-by-keys)))]]) 
```

# javascript - onmousemove 事件未触发

> ID：15538114
> 
> 赞同：6
> 
> 时间：2013-03-21T01:54:55.333
> 
> 标签：javascript, html, onmouseover

我已经搜索了此博客和其他博客中提供的答案，但没有任何解决方案。非常感谢您的帮助。

我有一个 onmousemove 事件，它正在执行要触发的事件列表中的第一项，但不会执行第二项。 `document.getElementById("map_image_africa").onmousemove = maps.redraw; learnPanel.redraw;`

该问题似乎不是特定于浏览器的；它发生在 Chrome 和 Safari 中。还没试过火狐。

在 Chrome 中，我可以打开浏览器的控制台并执行`learnPanel.redraw();`它，它可以按预期工作。此外，如果我在 onmouseover 事件中的 maps.redraw 和 learnPanel.redraw 语句之间放置一条警告语句，则警告将按预期执行。

learnPanel 对象是使用下面的代码创建的

```
 LearnPanel.prototype = new Panel();
        LearnPanel.prototype.constructor = LearnPanel;
        function LearnPanel() {
        }
        LearnPanel.prototype.draw = function() {

            var br_element = document.createElement("br");

            /* country name */
            if(this.isCountryNamesSelected === "yes") {
                var temp_label;
                temp_label = document.createElement("label");
                temp_label.classList.add('quiz_question_heading_label');
                temp_label.innerHTML = "Country: ";

                this.flagColumnTab.appendChild(temp_label);

                this.labelCountryName = document.createElement("label");
                this.labelCountryName.id = "country_name";
                this.labelCountryName.classList.add('quiz_question_label');

                this.flagColumnTab.appendChild(this.labelCountryName);
                this.flagColumnTab.appendChild(document.createElement("br"));

            }
            /* capital */
            if(this.isCapitalNamesSelected === "yes") {
                var temp_label;
                temp_label = document.createElement("label");
                temp_label.classList.add('quiz_question_heading_label');
                temp_label.innerHTML = "Capital: ";

                this.flagColumnTab.appendChild(temp_label);

                this.labelCapitalName = document.createElement("label");
                this.labelCapitalName.id = "capital";
                this.labelCapitalName.classList.add('quiz_question_label');

                this.flagColumnTab.appendChild(this.labelCapitalName);
                this.flagColumnTab.appendChild(document.createElement("br"));

            }
            /* flag */
            if(this.isCountryFlagsSelected === "yes") {

                this.flagImage = document.createElement("img");
                this.flagImage.id = "flag_image";
                this.flagImage.src = "/images/flags/_flag.jpeg";
                this.flagImage.alt = "flag logo";

                this.flagColumnTab.appendChild(this.flagImage);

                this.flagColumnTab.appendChild(document.createElement("br"));
                this.flagColumnTab.appendChild(document.createElement("br"));

            }

        }
        LearnPanel.prototype.redraw = function() {

            alert('redrawing learnPanel');
            /* country name */
            if(learnPanel.isCountryNamesSelected === "yes") {
                learnPanel.labelCountryName.innerHTML = maps.getCurrentDisplayCountryDown();
            }
            /* capital */
            if(learnPanel.isCapitalNamesSelected === "yes") {
                learnPanel.labelCapitalName.innerHTML = maps.getCurrentCountryCapitalDown();
            }
            /* flag */
            if(learnPanel.isCountryFlagsSelected === "yes") {
                learnPanel.flagImage.src = "/images/flags/" + maps.getCurrentFlagDown() + "_flag.jpeg";
                learnPanel.flagImage.alt = "flag of " + maps.getCurrentFlagDown();
            }
            /* head of state */
            /* famous landmark */

        }

        learnPanel = new LearnPanel(); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T02:01:14.367

欢迎来到 StackOverflow！

你需要的是一个**匿名函数**。当您为`mousemove`on 属性分配函数时`#map_large_africa`，您希望出现两个不同的函数。不幸的是，由于您编写以下语句的方式：

```
`document.getElementById("map_image_africa").onmousemove = maps.redraw; learnPanel.redraw;` 
```

它实际上是这样解析的：

```
document.getElementById("map_image_africa").onmousemove = maps.redraw;

learnPanel.redraw; 
```

你看到问题了吗？分号充当命令的结尾。地图在 mousemove 上重绘，但`learnPanel.redraw`不是分配的一部分，并且该行仅在属性分配给`onmousemove`之后执行一次。通过将其包装在[匿名函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope#Functions_as_event_handlers)中，您可以一次执行多行 javascript。`onmousemove``#map_image_africa`

尝试以下操作：

```
document.getElementById("map_image_africa").onmousemove = function() {
    maps.redraw();    // note that these lines have () after the method name.
    learnPanel.redraw();
} 
```

* * *

虽然我有你，但请注意不鼓励直接修改`onmousemove`和之类的属性，**[事件](https://developer.mozilla.org/en-US/docs/DOM/event)**是与 DOM 元素交互的首选方式，因为它将 javascript 与 HTML 分开。`onclick`

上述`onmousemove`作业可以（并且应该）重写为：

```
document.getElementById("map_image_africa").addEventListener('mousemove', function() {
    maps.redraw();
    learnPanel.redraw();
}, false); 
```

# drag - KineticJS - 在另一个舞台上的对象被移动后更新 drawFunc

> ID：15538118
> 
> 赞同：0
> 
> 时间：2013-03-21T01:55:13.060
> 
> 标签：drag, kineticjs

在另一个 stackoverflow 用户的帮助下，我可以使用以下命令更改舞台上两条线和一个圆圈的位置：

```
 var circle2 = new Kinetic.Circle({
                    drawFunc: function(canvas) {
                        var context2 = canvas.getContext();
                        var centerX2 = blueLine2.getPosition().x;
                        centerY2 = greenLine2.getPosition().y;
                        context2.drawImage(gArrow2, -156, -23 + centerY2, 11, 23);
                        context2.drawImage(gArrow2, 156, -23 + centerY2, 11, 23);
                        context2.drawImage(bArrow2, centerX2, 156, 23, 11);
                        context2.drawImage(bArrow2, centerX2, -156, 23, 11);  
                        context2.beginPath();
                        context2.arc(centerX2, centerY2, this.getRadius(), 0, 2 * Math.PI, false);
                        context2.lineWidth = this.getStrokeWidth();
                        context2.strokeStyle = this.getStroke();
                        context2.stroke();
                    },
                    x: cx + gx,
                    y: cy + gy,
                    radius: 70,
                    stroke: '#00ffff',
                    strokeWidth: 3,
                    opacity: 0.5
                });
                layer2.add(circle2); 
```

效果很好，现在我的挑战是如果我在第二阶段移动一条线，例如水平线，我还可以使用以下方法在第一阶段移动水平线：

```
 greenLine2.on('dragend', function (event) {
        var y1 = greenLine2.getPosition().y;
        greenLine3.setPoints([0, 256 + y1, 512, 256 + y1]);
        centerY3 = 256 + y1;
        layer3.draw();
        layer2.draw();
    }); 
```

但是我无法更新图层以移动垂直线和圆圈。我会很感激你的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:07:57.310

假设 greenLine2 是您要移动的那个，并且您希望 greenLine3 移动到另一个舞台上的相同位置。我将假设这些阶段的大小相同，但您可以更改代码以解决这些更改。

```
 greenLine2.on('dragmove', function (event) {
    var userPos = stage.getUserPosition();  //if this doesnt work the way you need, try a different approach, such as below:
    //var userPos = greenLine.getPosition(); //other possibility
    greenLine3.setPosition(userPos);
    layer3.draw();
    layer2.draw();
 }); 
```

如果您还希望其他东西移动，您可以使用带有一些偏移量的 .setPosition() 执行相同类型的代码，以便绘图是相对的。

另一种方法是在每个阶段创建一个组，并使组可拖动，这样您就可以同时拖动组中的所有项目，并且跨阶段同步。

# python - 多个表格中的“加载更多”分页按钮。姜戈

> ID：15538122
> 
> 赞同：0
> 
> 时间：2013-03-21T01:55:24.827
> 
> 标签：python, django

我有一个查询数据库并返回放置在多个表中的信息的表单。每列的行数可以达到数百。每一行都作为我声明的自定义模型返回。某个表的所有行都存储在对象容器中。

我想最初只加载每个表中的前 50 行。在每个表的底部，我想放置一个“加载更多”按钮，单击该按钮会加载 50 个以上的查询（如果少于 50 个，则加载其余的结果）。

Django 的分页教程让我看起来只能将分页分成不同的页面。我可以使用加载更多按钮进行行分页吗？或者我想要的东西是不可能创造出来的？

编辑：这是我当前打印每个表的行的方式，这是一个简单的 for 循环

> ```
> {% for r in row %} 
> <tr>
> <td>{{ r.name }}</td>
> <td>{{ r.age }}</td>
> <td>{{ r.state }}</td> </tr> 
> ```
> 
> {% endfor %}

这是我对 1 张桌子的看法：

```
pers = Personal.objects.all()
pers = formfilter (name, age, state)

c = RequestContext(request, {
    "cname": name})

return HttpResponse(t.render(c)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:47:46.837

当然有可能。您必须使用所需信息对服务器进行 AJAX 调用。当您在 Django 中处理此请求时，您应该只响应表格行，而不是整个 HTML 页面。然后在客户端上，当您收到此响应时，只需将其添加到表的末尾即可。

响应应如下所示：

```
<tr><td>col1 row 51</td></tr>
...
<tr><td>col1 row 100</td></tr> 
```

这是一个可以解决问题的示例 JS 代码：

```
$.get("/yourapp/data", { page: 2}) .done(function(data) {
    $('.mytable').append(data);
}); 
```

但不是只`{page: 2}`提供 Django 分页所需的信息，我不记得它们是什么。我相信这`page`就是你所需要的。此外，您还想传递一些东西来表明您只请求表格行，而不需要页面的其余部分。

# entity-framework - EF查询不返回导航属性的外键值

> ID：15538123
> 
> 赞同：0
> 
> 时间：2013-03-21T01:55:26.953
> 
> 标签：entity-framework, entity-framework-5, code-first

我使用的是 EF5 Code First 并且延迟加载被禁用。我有以下代码：

```
//Model
public class Task
{
    public Guid Id {get; set;}
    //other properties that are not relevant here
    public Guid CreatorId {get; set;}
    public User Creator {get; set;}
    public Guid? OwnerId {get; set;}
    public User Owner {get; set;}
}

//Model
public class User
{
    public Guid Id { get; set; }
    //other properties that are not relevant here
    public string UserName { get; set; }

    public IList<Task> TasksCreated { get; set; }
    public IList<Task> TasksOwned { get; set; }
}

//Configuration for Task
public class TaskConfiguration : EntityTypeConfiguration<Task>
{
    public TaskConfiguration()
    {           
        HasRequired(task => task.Creator)
            .WithMany(creator => creator.TasksCreated)
            .HasForeignKey(task => task.CreatorId)
            .WillCascadeOnDelete(false);

        HasOptional(task => task.Owner)
            .WithMany(owner => owner.TasksOwned)
            .HasForeignKey(task => task.OwnerId)
            .WillCascadeOnDelete(false);
    }
} 
```

当我查询任务时，所有数据都按预期返回。当我使用以下查询查询用户时，所有者或创建者的任务属性为空。空值分配给与我正在查询的用户不匹配的任何属性。因此，如果 User2 是 User1 任务的所有者，则 User2 的 ID 将返回，但 Owner 属性将为空。这是查询：

```
var db = new MyContext();
var user = db.Users
             .Include("TasksCreated")
             .Include("TasksOwned")
             .SingleOrDefault(u => u.UserName.Equals("user1", StringComparison.OrdinalIgnoreCase)); 
```

我不确定是否缺少另一个步骤，或者我是否没有正确配置任务-用户关系。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:31:57.493

我试试你的代码，它运行。唯一的区别是我添加的上下文的构造函数：

```
public class TestEFContext : DbContext {
    public IDbSet<User> us { get; set; }
    public IDbSet<Task> ts { get; set; }

    public TestEFContext(String cs)
        : base(cs) {
        Database.SetInitializer<TestEFContext>(new DropCreateDatabaseAlways<TestEFContext>());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        base.OnModelCreating(modelBuilder);

        Configuration.LazyLoadingEnabled = false;

        modelBuilder.Configurations.Add(new TaskConfiguration());            
    }
} 
```

从这里开始：

```
class Program {
    static void Main(String[] args) {
        String cs = @"Data Source=ALIASTVALK;Initial Catalog=TestEF;Integrated Security=True; MultipleActiveResultSets=True";
        using (TestEFContext c = new TestEFContext(cs)) {
            User u1 = new User {
                Id = Guid.NewGuid(),
                UserName = "u1"
            };
            User u2 = new User {
                Id = Guid.NewGuid(),
                UserName = "u2"
            };
            c.us.Add(u1);
            c.us.Add(u2);
            Task t = new Task {
                Id = Guid.NewGuid(),
                Creator = u1,
                Owner = u1
            };                
            c.ts.Add(t);
            t = new Task {
                Id = Guid.NewGuid(),
                Creator = u2,
                Owner = u1
            };
            c.ts.Add(t);
            c.SaveChanges();                
        }

        using (TestEFContext c = new TestEFContext(cs)) {
            var user = c.us
             .Include("TasksCreated")
             .Include("TasksOwned")
             .SingleOrDefault(u => u.UserName.Equals("u1", StringComparison.OrdinalIgnoreCase));
            foreach (Task t in user.TasksCreated) {
                Console.WriteLine(t.Id);
            }
            Console.WriteLine("-----");
            foreach (Task t in user.TasksOwned) {
                Console.WriteLine(t.Id);
            }
        }
    }
} 
```

按预期显示：

```
a415c8c6-6b0a-4e1b-a42f-cd4230cf4d4a
-----
a415c8c6-6b0a-4e1b-a42f-cd4230cf4d4a
a2e9c527-d8cb-4db7-8879-7febb1c30a07
Appuyez sur une touche pour continuer... 
```

版本 ========== ==========

以下代码也运行：

```
using System;
using System.Linq;
using System.Data.Entity;
using System.Collections.Generic;
using System.Data.Entity.ModelConfiguration;

namespace testef {
    //Model
    public class Task {
        public Guid Id { get; set; }
        //other properties that are not relevant here
        public String ShortDescription { get; set; }
        public Guid CreatorId { get; set; }
        public User Creator { get; set; }
        public Guid? OwnerId { get; set; }
        public User Owner { get; set; }
    }

    //Model
    public class User {
        public Guid Id { get; set; }
        //other properties that are not relevant here
        public string UserName { get; set; }

        public IList<Task> TasksCreated { get; set; }
        public IList<Task> TasksOwned { get; set; }
    }

    //Configuration for Task
    public class TaskConfiguration : EntityTypeConfiguration<Task> {
        public TaskConfiguration() {
            HasRequired(task => task.Creator)
                .WithMany(creator => creator.TasksCreated)
                .HasForeignKey(task => task.CreatorId)
                .WillCascadeOnDelete(false);

            HasOptional(task => task.Owner)
                .WithMany(owner => owner.TasksOwned)
                .HasForeignKey(task => task.OwnerId)
                .WillCascadeOnDelete(false);
        }
    }
    public class TestEFContext : DbContext {
        public IDbSet<User> us { get; set; }
        public IDbSet<Task> ts { get; set; }

        public TestEFContext(String cs)
            : base(cs) {
            Database.SetInitializer<TestEFContext>(new DropCreateDatabaseAlways<TestEFContext>());
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder) {
            base.OnModelCreating(modelBuilder);

            Configuration.LazyLoadingEnabled = false;

            modelBuilder.Configurations.Add(new TaskConfiguration());            
        }
    }

    class Program {
        static void Main(String[] args) {
            String cs = @"Data Source=ALIASTVALK;Initial Catalog=TestEF;Integrated Security=True; MultipleActiveResultSets=True";
            using (TestEFContext c = new TestEFContext(cs)) {
                User u1 = new User {
                    Id = Guid.NewGuid(),
                    UserName = "u1"
                };
                User u2 = new User {
                    Id = Guid.NewGuid(),
                    UserName = "u2"
                };
                c.us.Add(u1);
                c.us.Add(u2);
                Task t = new Task {
                    Id = Guid.NewGuid(),
                    ShortDescription = "t1",
                    Creator = u1,
                    Owner = u1
                };
                c.ts.Add(t);
                t = new Task {
                    Id = Guid.NewGuid(),
                    ShortDescription = "t2",
                    Creator = u2,
                    Owner = u1
                };
                c.ts.Add(t);
                c.SaveChanges();
            }

            using (TestEFContext c = new TestEFContext(cs)) {
                var user = c.us
                 .Include("TasksCreated")
                 .Include("TasksOwned")
                 .SingleOrDefault(u => u.UserName.Equals("u1", StringComparison.OrdinalIgnoreCase));
                foreach (Task t in user.TasksCreated) {
                    Console.WriteLine("{0} - {1} is owned by {2}, was created by {3} ", t.ShortDescription, t.Id, t.OwnerId, t.CreatorId);
                }
                Console.WriteLine("-----");

                foreach (Task t in user.TasksOwned) {
                    Console.WriteLine("{0} - {1} is owned by {2}, was created by {3} ", t.ShortDescription, t.Id, t.OwnerId, t.CreatorId);
                }
            }
        }
    }
} 
```

# angularjs - 头部与身体中的 AngularJS

> ID：15538125
> 
> 赞同：72
> 
> 时间：2013-03-21T01:55:30.400
> 
> 标签：angularjs, html5boilerplate

在所有 AngularJS 示例中，Angular 库都放置在文档的 HEAD 标记中。我有一个基于 HTML5 样板布局构建的现有项目。`</BODY>`这定义了 JS 库应该放在标签之前的 DOM 的最底部。

AngularJS 是否需要放在 HEAD 中？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-21T14:44:36.930

AngularJS 不需要放在 HEAD 中，实际上你通常不应该，因为这会阻止加载 HTML。

但是，当您在页面底部加载 AngularJS 时，您将需要使用[ng-cloak](http://docs.angularjs.org/api/ng.directive:ngCloak)或[ng-bind](http://docs.angularjs.org/api/ng.directive:ngBind)来避免“未编译内容的闪烁”。请注意，您只需要在“index.html”页面上使用 ng-cloak/ng-bind。当 ng-include 或 ng-view 或其他 Angular 构造用于在初始页面加载后拉入额外内容时，该内容将在显示之前由 Angular 编译。

另请参阅[https://stackoverflow.com/a/14076004/215945](https://stackoverflow.com/a/14076004/215945)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-07-31T13:34:00.003

Google Groups 上的这个答案给了我完美的洞察力（缩短）：

> 这实际上取决于您的目标网页的内容。如果大部分是静态的，只有很少的 AngularJS 绑定，我同意，页面底部是最好的。但如果是完全动态的内容，您希望尽快 [在头部] 加载 AngularJS。

因此，如果您的内容大部分是通过 Angular 生成的，您`ng-cloak`只需在头部包含 Angular 就可以节省额外的 CSS 和指令。

[https://groups.google.com/d/msg/angular/XTJFkQHjW5Y/pbSotoaqlkwJ](https://groups.google.com/d/msg/angular/XTJFkQHjW5Y/pbSotoaqlkwJ)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T02:20:55.310

不必要。

请看一下这个[http://plnkr.co/edit/zzt41VUgR332IV01KPsO?p=preview](http://plnkr.co/edit/zzt41VUgR332IV01KPsO?p=preview)。角度 js 放置在页面底部的位置，如果将其放置在顶部，仍然呈现相同的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T22:28:51.733

在页面底部加载 Angular JS 确实会导致一闪而过的丑陋 {{ something }} html。在 body 标记中使用 ng-cloak 指令会在加载 JS 之前创建一个空 flash，因此与仅在 head 元素中加载 AngularJS 相比，它不会增加任何好处。您可以将 ng-cloak 添加到每个带有 ng 指令的元素，但最终会得到一闪而过的空元素。Soooo，只需将 Angular 和您的 app.js 文件加载到 head 元素中，正如 Angular 文档在其文档中的引用中所建议的那样：“为了获得最佳结果，必须将 angular.js 脚本加载到 html 文档的 head 部分”

# jquery - JQuery 使用 .after 可能的 ID 冲突添加 HTML

> ID：15538126
> 
> 赞同：0
> 
> 时间：2013-03-21T01:55:35.287
> 
> 标签：jquery, html

我在按钮单击时将 html 添加到页面。显示的 HTML 有一个附加按钮，可在单击按钮时添加 HTML。添加“主 HTML”两次后，如果我从添加的主 HTML 的第一个实例中单击辅助按钮，它会将 HTML 添加到添加的主 HTML 的第二个实例中。

我认为这是一个ID冲突。我正在把头发拉出来。

这是一个显示问题的jsfiddle。

[http://jsfiddle.net/JXeMS/19/](http://jsfiddle.net/JXeMS/19/)

要创建问题：添加产品，添加 2-3 层，再次添加产品，添加 2-3 层。最后，从第一个添加的产品添加一个新层，并将该层添加到第二个添加的产品。嗬！

jQuery代码

```
$(document).ready(function() {

    var cainc = 1;
    var afrinc=1;
    var mfrinc=1;
    var mfralinc=1;
    var earinc=1;
    var minmcinc=1;
    var maxmcinc=1;
    var parinc=1;
    var maapinc=1;
    var eprinc=1;
    var pprinc=1;
    var minscinc=1;
    var maxscinc=1; 

    $('#productbtn').on('click', function() {

        if ($('#prodselect option:selected').text() == "Commercial Attachments"){

            $('#productbtn').closest( "tr" ).after('<tr id="comattach0'+comtrinc+'"><td colspan=4>&nbsp;</td></tr><tr name="commercial" id="comattach1"><td ALIGN=left colspan=4><input id="buttonremc" type="button" style="width: 110px; height: 22px;" value="Remove Product"><font size=4><b><font color="#ADD8E6">Product: &nbsp;Commercial Attachments</b></font></td></tr><tr id="comattach2"><td colspan=4>&nbsp;</td></tr><TR id="comattach3"><td align=left><font color="#ADD8E6">Activity Type:</td><td align=left><select name="caacttype'+ (cainc++) +'" style="width:87px;"><option></option><option value="send">Send</option><option value="rec">Receive</option><option value="view">View</option></select></td><TD ALIGN=left><font color="#ADD8E6">Monthly Commission Percentage:</TD><TD ALIGN=left><input type="text" name="mthcom" maxlength=3 size=10 value="00"></TD><tr id="comattach4"><td colspan=4>&nbsp;</td></tr><TR id="comattach5"><TD ALIGN=left><font color="#ADD8E6">Annual Flat Rate:</TD><TD ALIGN=left><input type="text" name="afr'+ (afrinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Monthly Flat Rate:</TD><TD ALIGN=left><input type="text" name="mfr'+ (mfrinc++) +'" size=10 value="00.00" ></TD><TR id="comattach6"><TD ALIGN=left><font color="#ADD8E6">Monthly Flat Rate Attachment Limit:</TD><TD ALIGN=left><input type="text" name="mfral'+ (mfralinc++) +'" size=10 ></TD><TD ALIGN=left><font color="#ADD8E6">Excess Attachment Rate:</TD><TD ALIGN=left><input type="text" name="ear'+ (earinc++) +'" size=10 value="00.00" ></TD><tr id="comattach7"><td colspan=4>&nbsp;</td></tr><TR id="comattach11"><TD ALIGN=left><font color="#ADD8E6">Minimum Monthly Charge:</TD><TD ALIGN=left><input type="text" name="minmc'+ (minmcinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Maximum Monthly Charge:</TD><TD ALIGN=left><input type="text" name="maxmc'+ (maxmcinc++) +'" size=10 value="00.00" ></TD><tr id="comattach15"><td colspan=4>&nbsp;</td></tr><TR id="comattach8"><TD ALIGN=left><font color="#ADD8E6">Per Attachment Rate:</td><TD ALIGN=left><input type="text" name="par'+ (parinc++) +'" size=10 value="00.00" ></TD><td colspan=2>&nbsp;</td><TR id="comattach10"><TD ALIGN=left><font color="#ADD8E6">Maximum Allowed Attachment Pages:</TD><TD ALIGN=left><input type="text" name="maap'+ (maapinc++) +'" size=10 ></TD><TD ALIGN=left><font color="#ADD8E6">Excess Page Rate:</TD><TD ALIGN=left><input type="text" name="epr'+ (eprinc++) +'" size=10 value="00.00" ></TD><tr id="comattach12"><td colspan=4>&nbsp;</td></tr><tr id="comattach13"><TD ALIGN=left><font color="#ADD8E6">Per Page Rate:</TD><TD ALIGN=left><input type="text" name="ppr'+ (pprinc++) +'" size=10 value="00.00" ></TD><td colspan=2>&nbsp;</td><TR id="comattach14"><TD ALIGN=left><font color="#ADD8E6">Minimum Submission Charge:</TD><TD ALIGN=left><input type="text" name="minsc'+ (minscinc++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Maximum Submission Charge:</TD><TD ALIGN=left><input type="text" name="maxsc'+ (maxscinc++) +'" size=10 value="00.00" ></TD><tr id="comattach9"><td colspan=4><input id="addtiercom" type="button" style="width: 110px; height: 22px;" value="Add Tier"></td></tr>');

            var raisetierid = 1;
            var rateplus = 1;
            var rangeplus = 1;
            var catierrate = 1;
            var rangemin = 1;
            var rangemax = 1;

            $('#addtiercom').on('click', function() {

                $('#addtiercom').closest( "tr" ).after('<tr id="commtier1"><td colspan=4><input id="addnewtier" type="button" style="width: 110px; height: 20px;" value="Add Tier" >&nbsp;&nbsp;<input id="removetiercom" type="button" style="width: 110px; height: 20px;" value="Remove Tier" ></td></tr><TR id="commtier2"><TD ALIGN=left><font color="#ADD8E6">Tier Type</TD><TD ALIGN=left colspan=3>&nbsp;&nbsp;Attachments<input type="radio" name="brackettype" value="a">&nbsp;&nbsp;&nbsp;Pages<input type="radio" name="brackettype" value="p">&nbsp;&nbsp;&nbsp;Offices<input type="radio" name="brackettype" value="o"></TD><tr id="inctier'+(raisetierid++)+'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rateplus++) +' Rate</TD><TD ALIGN=left><input type="text" name="catierrate'+ (catierrate++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rangeplus++) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (rangemin++) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (rangemax++) +'" size=10 value="" ></TD></tr>');
                $('#comattach9').hide();
                $('#addnewtier').on('click', function() {
                    $('#inctier'+(raisetierid-1)+'').closest( "tr" ).after('<tr id="inctier'+(raisetierid++)+'"><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rateplus++) +' Rate</TD><TD ALIGN=left><input type="text" name="catierrate'+ (catierrate++) +'" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier '+ (rangeplus++) +' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin'+ (rangemin++) +'" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax'+ (rangemax++) +'" size=10 value="" ></TD>');
                });
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:00:42.503

出现问题是因为您在其他事件处理程序中绑定事件处理程序，以及创建具有相同 ID 的多个元素。

我建议您`this`更频繁地使用关键字，并将委托事件处理程序绑定到最近的静态父级（也不是嵌套处理程序！），当然，切换到类。

例如：

```
$('body').on('click', '.product-button', function() {
  // Your code for product buttons
  // $(this) is the button that's clicked
});
$('body').on('click', '.add-tier', function() {
  // Your code for adding a tier
}); 
```

...ETC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:22:46.970

您需要更改此部分：

```
 $('.addtierbtn' + comtrinc + '').on('click', function () {
                    $('#inctier' + (comtrinc) + (raisetierid - 1) + '').closest("tr").after('<tr id="inctier' + (comtrinc) + **(raisetierid--)** + '"><TD ALIGN=left><font color="#ADD8E6">Tier ' + (rateplus++) + ' Rate</TD><TD ALIGN=left><input type="text" name="catierrate' + (catierrate++) + '" size=10 value="00.00" ></TD><TD ALIGN=left><font color="#ADD8E6">Tier ' + (rangeplus++) + ' Range</TD><TD ALIGN=left><font color="#ADD8E6">Minimum&nbsp;<input type="text" name="rangemin' + (rangemin++) + '" size=10 value="" ><font color="#ADD8E6">&nbsp;Maximum&nbsp;<input type="text" name="rangemax' + (rangemax++) + '" size=10 value="" ></TD>');
                });
            }); } });
}); 
```

**raisetierid++ 应该是 raisetierid--**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T02:52:06.107

我相信这是一个身份冲突问题。我切换到按钮上的类并添加了一些 if、if else 条件循环以确定附加到 tr id 的变量值。

[http://jsfiddle.net/JXeMS/30/](http://jsfiddle.net/JXeMS/30/)

```
 $ 
```

# java - 如何从 JFrame 中的文本框接收输入？

> ID：15538127
> 
> 赞同：1
> 
> 时间：2013-03-21T01:55:36.717
> 
> 标签：java, swing, double, jtextcomponent, documentfilter

下面的方法扩展了一个 JFrame，但我需要在其中有一个 swing 文本框来接收双精度值并将它们存储在一个变量中。必须将文本框添加到容器中。

```
 public class myClass extends JFrame{
        Container container;
        container = getContentPane();

        //Item label
        JLabel labelText = new JLabel();        
       ...
        labelText.setText ("Item:");        
        container.add( labelText );

        //Item name: Textbox
        //code to make a textbox, add it to the container, and store the value in a                      variable goes here 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T01:58:54.583

使用`JTextField`：

```
 JTextField field = new JTextField(10);
 container.add(field, BorderLayout.SOUTH); 
```

要获取字段的值，请执行`Double.parseDouble(field.getText())`.

# php - 将数组插入多维数组

> ID：15538140
> 
> 赞同：1
> 
> 时间：2013-03-21T01:57:38.733
> 
> 标签：php, arrays, multidimensional-array

我有一个看起来像这样的数组：

```
{"calendar":{"date":"1","event":"1","description":"","code":"lab"}} 
```

我想在这个数组中输入一个新数组，但在日历中以实现这个输出：

```
{"calendar":
    {"date":"1","event":"1","description":"","code":"lab"}
    {"date":"2","event":"2","description":"","code":"lab"}
} 
```

这一切都发生在表单帖子中。

```
<?php 
$dy_date = $_GET['dy_date'];
$dy_event = $_GET['dy_event'];
$dy_description = $_GET['dy_description'];
$dy_code = $_GET['dy_code'];

$calendar = array("calendar" => array("date" => $dy_date, "event" => $dy_event, "description" => $dy_description, "code"=> $dy_code));

$calendar_check = json_decode(file_get_contents('../calendar_dynamic.js'),true);

$updated_cal = array();
foreach($calendar_check as $data){
    $updated_cal["date"] = $dy_date;
    $updated_cal["event"] = $dy_event;
    $updated_cal["description"] = $dy_description;
    $updated_cal["code"] = $dy_code;
    $updated_cal = array_merge($calendar_check['calendar'], $updated_cal);
    $filename = "../calendar_dynamic.js";
    file_put_contents($filename, json_encode($updated_cal), FILE_APPEND);
}

?> 
```

我似乎无法将添加的数组合并到现有数组中的正确位置。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:05:49.023

试试这个

```
$filename = "../uc3_stats/calendar_dynamic.js";

$dy_date = $_GET['dy_date'];
$dy_event = $_GET['dy_event'];
$dy_description = $_GET['dy_description'];
$dy_code = $_GET['dy_code'];

$newentry_calendar = array("calendar" => array("date" => $dy_date, "event" => $dy_event, "description" => $dy_description, "code"=> $dy_code));

$old_calendar = json_decode(file_get_contents($filename),true);

$new_calendar = $old_calendar; //keep old entries 
$new_calendar['calendar'][] = $newentry_calendar['calendar']; //add new entry
file_put_contents($filename, json_encode($new_calendar)); // save to file 
```

如果你愿意，你可以缩短它，但这尽可能接近你的代码；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:09:11.690

我会使用 array_push 函数而不是 array_merge，因为在你的情况下，array_merge 改变了返回数组的结构，因为你将内部数组与新数组结合起来。

```
array_push ($calendar_check['calendar'], $updated_cal) 
```

# oauth-2.0 - 谷歌云打印：令牌的有效期为（将作业提交到云打印）？

> ID：15538143
> 
> 赞同：3
> 
> 时间：2013-03-21T01:57:52.257
> 
> 标签：oauth-2.0, token, access-token, google-cloud-print

如果我的用户使用 oauth v2 到云打印来获取凭证，我如何获得至少 48 小时有效的凭证？

我们需要能够访问打印机，并将其保留几天。（可以想象，我们可以要求用户每周重新授权一次或两次谷歌，但肯定不会更多。）

如果谷歌云打印不能做到这一点，什么系统可以呢？（需要跨平台打印，从云到win、osx和linux，还需要能够对本地打印机进行原始打印，而不仅仅是打印驱动程序打印。）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T16:45:41.597

OAuth2 过程中有两种类型的“凭据”：**访问令牌**（其生命周期很短，由OAuth2 服务器响应的**expires_in字段确定）和****刷新令牌**，除非用户撤销授予的访问权限，否则它实际上是永久的。当您拥有刷新令牌时，您可以获得有效的访问令牌。

**在第一次使用参数access_type=offline**的身份验证请求时返回刷新令牌。您只需要安全地存储获得的刷新令牌，并在必要时使用它来请求访问令牌。

在文档 [https://developers.google.com/accounts/docs/OAuth2WebServer中阅读更多信息](https://developers.google.com/accounts/docs/OAuth2WebServer)

# javascript - 带有 Jquery 滑块的播放/停止按钮

> ID：15538147
> 
> 赞同：-1
> 
> 时间：2013-03-21T01:58:42.167
> 
> 标签：javascript, jquery-ui, jquery

我必须在我的网页中嵌入 jquery 滑块，在[http://jqueryui.com/slider/](http://jqueryui.com/slider/)给出， 我可以很容易地嵌入。问题是当我单击滑块前面的播放/停止按钮时，我必须播放/停止滑块。如何在 js/JQuery 中完成。滑块应该在 1/2 秒后向前移动，就像在视频播放器中一样（我不必制作视频播放器，只是想探索我的问题）。请帮忙怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T02:12:17.490

我不知道你在说什么，但我会尝试一些东西......

jquery 滑块可以禁用，它是选项之一：[http ://api.jqueryui.com/slider/#option-disabled](http://api.jqueryui.com/slider/#option-disabled)

您可以通过将值设置为 0 来重置它

如果播放/停止按钮实际上位于滑块顶部，您可以只使用 jquery 来防止事件冒泡：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

如果您想以编程方式处理值更改并且用户拖动不同：http: [//forum.jquery.com/topic/slider-event-originalevent](http://forum.jquery.com/topic/slider-event-originalevent)

希望这有帮助

# haskell - Haskell 中的建树功能（作业）

> ID：15538151
> 
> 赞同：2
> 
> 时间：2013-03-21T01:58:56.983
> 
> 标签：haskell, tree, functional-programming

```
data Tree a = Leaf | Node (Tree a) a (Tree a) deriving (Eq, Show)

unfoldTree:: (b -> Maybe (b, a, b)) -> b -> Tree a
unfoldTree f b =
    case f b of
      Nothing -> Leaf
      Just (lt, x, rt) -> Node (unfoldTree f lt) x (unfoldTree f rt) 
```

鉴于以上两条信息，我被要求实现一个树构建功能。

我的尝试是

```
treeBuild :: Integer -> Tree Integer
treeBuild 0 = Leaf
treeBuild n = treeUnfold (\b -> if b < 2^n-1 
                then Just(2*b, b + 1, 2*b + 1) 
                else Nothing) 
                0 
```

基本情况适用于 n = 0 工作正常但我知道该功能完全错误的情况。有人可以向我重新解释一下如何`3-tuple Just`工作吗？在正常展开中，a 中的第一个元素`Just`将是我想要的元素，第二个元素将用于继续展开，但这在 3 元组 Just 中如何工作？

作为示例输出： `treeBuild 2 ----> Node (Node Leaf 0 Leaf) 1 (Node Leaf 2 Leaf)`

编辑：我不完全确定 Just 在这里是如何工作的，对于`Just(2*b, b + 1, 2*b + 1)`b 从 0 开始的情况，它会变成`Just(0, 1, 0)`吗？我如何实际增加b？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:56:45.950

我认为您在粘贴 的定义时省略了一个空格`unfoldTree`。应该是这个吗？

```
展开树 fb =
    案例fb ...

```

本质上没有什么意义`Maybe (b, a, b)`，但在这种特殊情况下，您可以看到`unfoldTree`将元组中的项目绑定到`lt`、`x`和`rt`。中间值`x`用于创建节点，并`lt`用于`rt`为对 的递归调用播种`unfoldTree`。

为了解释您的示例输出，请注意`n`始终绑定到`2`. 的初始`0`参数`treeUnfold`意味着`(\b -> ...)`函数首先检查`0 < 2^n-1`，然后产生`Just (2*0, 0+1, 2*0+1)`。

中间值`0+1`是树中根节点的值。左子树的构建方式类似，除了`b`is now `2*0`，右子树使用`b`as构建`2*0+1`。

* * *

你提到这是家庭作业，应该用`2^n - 1`节点构建一棵树。我猜这些`Leaf`值不算数，并且您想按广度优先顺序对这些节点进行编号，希望这个示例能让您熟悉。以下是如何做到这一点：

```
treeBuild :: Int -> Tree Int
treeBuild n = treeUnfold (\b -> 如果 b < 2^n - 1
                                   然后就是 (2*b+1, b, 2*b+2)
                                   其他没有）0

```

我得出的方法是绘制一棵深度为 3 的二叉树。我将从根开始的节点编号为`0`，左节点为`1`，右节点为`2`。底部节点从左到右编号，从 开始到`4`结束`7`。

现在模式是可见的：如果当前节点被编号`b`，他的左右节点分别被编号`2*b+1`和`2*b+2`。因为`2^n - 1`是 depth 树中的节点总数`n`，并且我按广度优先顺序对节点进行编号，返回`Nothing`when`b >= 2^n-1`确保我在将树填充到 depth 后停止`n`。

# css - css下拉菜单不断扩大主

> ID：15538152
> 
> 赞同：1
> 
> 时间：2013-03-21T01:59:01.247
> 
> 标签：css, list, menu

我刚刚制作了我的第一个 css 下拉菜单，我为此感到非常自豪，但是我有一个问题，当子菜单扩展时，它会拉下主 ul，我不想要那个 .. 它必须保持我的高度给定它..所以即使子菜单展开，下面的紫色 div 也会保持在同一个位置.. 谢谢

这是 jsFiddle 链接[http://jsfiddle.net/v937B/71/](http://jsfiddle.net/v937B/71/)

这是我的代码

```
<ul  class="menu">      
    <li>
        <a href="#">Forside</a>
    </li>
    <li>
        <a href="#">Nyheder</a>
    </li> 
    <li>
        <a href="#">Galleri</a>
    </li> 
    <li>
        <a href="#">Andet</a>
    </li>     
    <li>Vores hunde
        <ul class="submenu">
            <li>
                <a href="#">Hvalpe</a>
            </li>
            <li>
                <a href="#">Hanner</a>
            </li>
            <li>
                <a href="#">Tæver</a>
            </li>
        </ul>
    </li>
</ul>

<div style="float:left; width:100%; background:#FF00FF;">&nbsp;</div> 
```

这是我的CSS

```
ul.menu{
text-align:center;
display: table; 
width: 100%;
height:48px;
line-height:48px;
border: 1px solid red;   
}

ul.menu li {
background:yellow;
display: table-cell; 
border: 0px solid yellow;   
}

ul.menu li a { 
display:block; 
background:blue;
}

ul.menu li a:hover {
display:block; 
background:purple;
}

.submenu {
display: none;
}

.menu li:hover .submenu {
display: block;
}

ul.submenu {
text-align:center;
}

ul.submenu  li {
display:block;
text-align:center;
background:green; 
border:0px;
}

ul.submenu li a { 
color:red; 
text-align:center; 
background:pink;
}

ul.submenu li a:hover {
color:red; 
text-align:center; 
background:orange;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:02:46.770

只需添加：

`position: absolute;`到你的`.submenu`班级

[**例子**](http://jsfiddle.net/Lotus/v937B/73/)

# javascript - 需要帮助调试 JQuery

> ID：15538153
> 
> 赞同：0
> 
> 时间：2013-03-21T01:59:02.507
> 
> 标签：javascript, jquery, debugging, joomla

我对 JQuery 很陌生，非常感谢尝试调试的手。我正在尝试在网站上使用任何滑块。我已经让滑块在一个普通的测试 html 文档上正常工作，但我不能在我的生活中让它在 Joomla 中工作（托管网站的地方）这是在我们开发和插入的自定义页面上进入Joomla，但这不应该有所作为。

我得到一个

> TypeError: $(...).anythingSlider 不是函数

在 Chrome 和 Firefox 检查器中，我读到这可能是由 JQuery 引起的，但据我所知，最后加载的 JQuery 脚本是滑块的脚本。我还使用了 bog 标准 Joomla 模板来缓解我们导入脚本的问题。

这是 URL [http://dev.turn2me.org/thought-catcher](http://dev.turn2me.org/thought-catcher) 忽略凌乱的布局，这只是我测试默认模板

如果有人可以看看它是什么，将不胜感激！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:04:21.867

您的[http://dev.turn2me.org/js/js/validation_registration.js](http://dev.turn2me.org/js/js/validation_registration.js)文件未加载。此外，您在多个图像上得到 404，因此看起来您有资源路径问题。我的第一个猜测是该`/js/js`部分不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:22:54.427

删除第 889 行，你正在加载 jquery 两次 - 当我将所有的anythingSlider.js 复制到 firebug 并在之后调用它时它工作 src="/flot/jquery/jquery.js"> 你在这里加载 jquery 1.5

要么在页面底部加载anythingslider.js

# gradle - Gradle PMD 插件 *有时* 无法找到 SAXParserFactoryImpl

> ID：15538155
> 
> 赞同：1
> 
> 时间：2013-03-21T01:59:20.913
> 
> 标签：gradle, pmd

在打开 PMD 插件运行 gradle 构建时，有时会发生这种情况，但并非总是如此。

```
FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies for configuration ':subproject:pmd'.
> Could not resolve net.sourceforge.pmd:pmd:5.0.2.
  Required by:
      XYZ:subproject:1.0b5.3625
   > Provider org.apache.xerces.jaxp.SAXParserFactoryImpl not found
   > Could not resolve org.sonatype.oss:oss-parent:7.
      > Provider org.apache.xerces.jaxp.SAXParserFactoryImpl not found
      > Provider org.apache.xerces.jaxp.SAXParserFactoryImpl not found 
```

我不知道如何处理这个暂时的问题。有什么线索吗？

# erlang - Erlang：用于函数调用返回的case..of构造？

> ID：15538157
> 
> 赞同：2
> 
> 时间：2013-03-21T01:59:22.613
> 
> 标签：erlang, switch-statement, message-passing

代码产生的错误是

```
2> X = "2".
"2"
3> case_:main(X).
main 50
sender 50
** exception error: bad argument
     in function  case_:sender/1 (case_.erl, line 14)
     in call from case_:main/1 (case_.erl, line 6)
4> Z = 2.
2
5> case_:main(Z).
** exception error: bad argument
     in function  io:format/3
        called as io:format(<0.25.0>,"main ~p~n",2)
     in call from case_:main/1 (case_.erl, line 5)
6> 
```

在第一次尝试中，我尝试传递一个字符串，这比第二次尝试传递一个整数要远得多。我不确定为什么这不起作用。

函数调用`sender(Input)`应该`{Data}`从`receiver()`函数调用返回。

我肯定需要程序的消息传递部分，因为我正在尝试编写一个循环来接收消息，评估它们并返回结果；但也许该`case...of`声明可能会被丢弃。

```
-module(case_).
-export([main/1, sender/1, receiver/0]).

main(Input) ->
    io:format("main ~p~n",Input),
    case sender(Input) of
        {Data} ->
            io:format("Received ~p~n",Data)
    end.

sender(Input) ->
    io:format("sender ~p~n",Input),
    Ref = make_ref(),
    ?MODULE  ! { self(), Ref, {send_data, Input}},
    receive
        {Ref, ok, Data} ->
            {Data}      
    end.    

receiver() ->
    io:format("receiver ~n"),
    receive
        {Pid, Ref, {send_data, Input}} ->
            Pid ! { Ref, ok, Input + Input} 
    end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:55:05.203

令人高兴的是，badarg 修复很容易完成。[`io:format/2`](http://erlang.org/doc/man/io.html#format-2)将术语列表作为其第二个参数。看：

```
(Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.2  (abort with ^G)
1> io:format("main ~p~n", 2).
** exception error: bad argument
     in function  io:format/3
        called as io:format(<0.24.0>,"main ~p~n",2)
2> io:format("main ~p~n", [2]).
main 2
ok 
```

您的第二个问题是`?MODULE`只返回当前模块名称的原子。您需要将消息发送到进程。如果您将代码修改为如下所示：

```
-module(case_).
-export([main/1, sender/2, receiver/0]).

main(Input) ->
    io:format("main ~p~n", [Input]),
    Recv = spawn(?MODULE, receiver, []),
    case sender(Recv, Input) of
        {Data} ->
            io:format("Received ~p~n", [Data])
    end.

sender(Pid, Input) ->
    io:format("sender ~p~n", [Input]),
    Ref = make_ref(),
    Pid ! { self(), Ref, {send_data, Input}},
    receive
        {Ref, ok, Data} ->
            {Data}
    end.

receiver() ->
    io:format("receiver ~n"),
    receive
        {Pid, Ref, {send_data, Input}} ->
            Pid ! { Ref, ok, Input + Input}
    end. 
```

然后repl中的交互：

```
Erlang R15B02 (erts-5.9.2) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.2  (abort with ^G)
1> c("case_").
{ok,case_}
2> case_:main(2).
main 2
sender 2
receiver 
Received 4
ok 
```

# iphone - 当其框架与 UIView 相交时反转 UIlabel 文本颜色

> ID：15538163
> 
> 赞同：12
> 
> 时间：2013-03-21T01:59:48.297
> 
> 标签：iphone, ios, ipad, core-graphics, core-text

嗨我试图在标签矩形与 UIView 相交的情况下更改 UILabel 的文本颜色，我在想也许有一个属性或我可以使用的东西。如下图所示：

![在此处输入图像描述](../Images/1d8addd04f216079cb0b2a4ad8cbf06c.png)

以前有人遇到过这个问题吗，或者我应该读什么来开始做这件事？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T03:43:25.887

好拼图！这是我要做的：

1.  两个 UIView。让我们称一个为背景，另一个为progressBar。progressBar 堆叠在背景之上，与`origin`它们的 common 相同`superview`。
2.  它们**都有**一个 UILabel 作为子视图，并且两个标签相对于它们的父级位于同一原点。背景有一个黑暗`backgroundColor`，它的标签有光`textColor`，进度视图有相反的东西。
3.  progressBar 具有比背景更窄的框架宽度，并且具有`clipsToBounds==YES`

诀窍是，视图的来源相同，标签的来源相同，顶视图上的 clipsToBounds ，一切都会看起来正确。

将这两个视图放到一个新的 UIView 子类中，该子类名为“ReallyCoolProgressView”，并为其提供一个公共方法：

`-(void)setProgress:(float)progress` 进度是一个从 0.0 到 1.0 的数字。该方法缩放progressBar宽度并设置**两个**标签的文本`@"Progress %f", progress*100`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-06T14:43:52.473

为任何正在寻找实际应用程序的人构建了一个 Swift 示例。关于这个 danh 的很好的指导 - 谢谢！

* * *

```
import UIKit

class CDSlideView: UIView {

    var leftBackView: UIView!
    var leftBackLabel: UILabel!
    var leftFrontView: UIView!
    var leftFrontLabel: UILabel!

    var rightBackView: UIView!
    var rightBackLabel: UILabel!
    var rightFrontView: UIView!
    var rightFrontLabel: UILabel!

    var foregroundView: UIView!
    var backgroundView: UIView!

    var slideGesture: UIPanGestureRecognizer!

    let lightColor: UIColor = UIColor.whiteColor()
    let darkColor: UIColor = UIColor.blueColor()
    let leftText: String = "Search"
    let rightText: String = "New"

    var viewWidth: CGFloat!
    var viewHeight: CGFloat!
    var leftOrigin: CGFloat!
    var rightOrigin: CGFloat!
    var foregroundPadding: CGFloat = 4

    override init(frame: CGRect) {
        super.init(frame: frame)

        // Init variables variables
        viewWidth = self.frame.size.width
        viewHeight = self.frame.size.height
        leftOrigin = foregroundPadding / 2
        rightOrigin = (viewWidth - foregroundPadding) / 2 + foregroundPadding / 2

        backgroundView = UIView()
        backgroundView.frame = CGRectMake(0, 0, viewWidth, viewHeight)
        backgroundView.layer.cornerRadius = backgroundView.frame.size.height / 2
        self.addSubview(backgroundView)

        leftBackView = UIView()
        leftBackView.frame = CGRectMake(0, 0, backgroundView.frame.size.width / 2, backgroundView.frame.size.height)
        self.backgroundView.addSubview(leftBackView)

        leftBackLabel = UILabel()
        leftBackLabel.frame = CGRectMake(0, 0, leftBackView.frame.size.width, leftBackView.frame.size.height)
        leftBackLabel.font = UIFont.systemFontOfSize(13, weight: UIFontWeightSemibold)
        leftBackLabel.backgroundColor = UIColor.clearColor()
        leftBackLabel.lineBreakMode = .ByClipping
        leftBackLabel.textAlignment = .Center
        self.leftBackView.addSubview(leftBackLabel)

        rightBackView = UIView()
        rightBackView.frame = CGRectMake(backgroundView.frame.size.width / 2, 0, backgroundView.frame.size.width / 2, backgroundView.frame.size.height)
        self.backgroundView.addSubview(rightBackView)

        rightBackLabel = UILabel()
        rightBackLabel.frame = CGRectMake(0, 0, rightBackView.frame.size.width, rightBackView.frame.size.height)
        rightBackLabel.font = UIFont.systemFontOfSize(13, weight: UIFontWeightSemibold)
        rightBackLabel.backgroundColor = UIColor.clearColor()
        rightBackLabel.lineBreakMode = .ByClipping
        rightBackLabel.textAlignment = .Center
        self.rightBackView.addSubview(rightBackLabel)

        foregroundView = UIView()
        foregroundView.frame = CGRectMake(foregroundPadding / 2, foregroundPadding / 2, (backgroundView.frame.size.width - foregroundPadding) / 2, backgroundView.frame.size.height - foregroundPadding)
        foregroundView.clipsToBounds = true
        foregroundView.layer.cornerRadius = (foregroundView.frame.size.height - foregroundPadding / 2) / 2
        self.addSubview(foregroundView)

        slideGesture = UIPanGestureRecognizer(target: self, action: #selector(CDSlideView.slideAction))
        self.foregroundView.addGestureRecognizer(slideGesture)

        leftFrontView = UIView()
        leftFrontView.frame = CGRectMake(0, 0, backgroundView.frame.size.width / 2, backgroundView.frame.size.height)
        self.foregroundView.addSubview(leftFrontView)

        leftFrontLabel = UILabel()
        leftFrontLabel.font = UIFont.systemFontOfSize(13, weight: UIFontWeightSemibold)
        leftFrontLabel.backgroundColor = UIColor.clearColor()
        leftFrontLabel.translatesAutoresizingMaskIntoConstraints = false
        leftFrontLabel.lineBreakMode = .ByClipping
        leftFrontLabel.textAlignment = .Center
        self.leftFrontView.addSubview(leftFrontLabel)

        let leftFrontLabelLeadingConstraint = NSLayoutConstraint(item: leftFrontLabel, attribute: .Leading, relatedBy: .Equal, toItem: self, attribute: .Leading, multiplier: 1, constant: self.backgroundView.frame.origin.x)
        self.addConstraint(leftFrontLabelLeadingConstraint)

        let leftFrontLabelTopConstraint = NSLayoutConstraint(item: leftFrontLabel, attribute: .Top, relatedBy: .Equal, toItem: self, attribute: .Top, multiplier: 1, constant: self.backgroundView.frame.origin.y)
        self.addConstraint(leftFrontLabelTopConstraint)

        let leftFrontLabelWidthConstraint = NSLayoutConstraint(item: leftFrontLabel, attribute: .Width, relatedBy: .Equal, toItem: nil, attribute: .NotAnAttribute, multiplier: 1, constant: leftFrontView.frame.size.width)
        self.addConstraint(leftFrontLabelWidthConstraint)

        let leftFrontLabelHeightConstraint = NSLayoutConstraint(item: leftFrontLabel, attribute: .Height, relatedBy: .Equal, toItem: nil, attribute: .NotAnAttribute, multiplier: 1, constant: leftFrontView.frame.size.height)
        self.addConstraint(leftFrontLabelHeightConstraint)

        rightFrontView = UIView()
        rightFrontView.frame = CGRectMake(backgroundView.frame.size.width / 2, 0, backgroundView.frame.size.width / 2, backgroundView.frame.size.height)
        self.foregroundView.addSubview(rightFrontView)

        rightFrontLabel = UILabel()
        rightFrontLabel.font = UIFont.systemFontOfSize(13, weight: UIFontWeightSemibold)
        rightFrontLabel.backgroundColor = UIColor.clearColor()
        rightFrontLabel.translatesAutoresizingMaskIntoConstraints = false
        rightFrontLabel.lineBreakMode = .ByClipping
        rightFrontLabel.textAlignment = .Center
        self.rightFrontView.addSubview(rightFrontLabel)

        let rightFrontLabelTrailingConstraint = NSLayoutConstraint(item: self, attribute: .Trailing, relatedBy: .Equal, toItem: rightFrontLabel, attribute: .Trailing, multiplier: 1, constant: self.backgroundView.frame.origin.x)
        self.addConstraint(rightFrontLabelTrailingConstraint)

        let rightFrontLabelTopConstraint = NSLayoutConstraint(item: rightFrontLabel, attribute: .Top, relatedBy: .Equal, toItem: self, attribute: .Top, multiplier: 1, constant: self.backgroundView.frame.origin.y)
        self.addConstraint(rightFrontLabelTopConstraint)

        let rightFrontLabelWidthConstraint = NSLayoutConstraint(item: rightFrontLabel, attribute: .Width, relatedBy: .Equal, toItem: nil, attribute: .NotAnAttribute, multiplier: 1, constant: rightFrontView.frame.size.width)
        self.addConstraint(rightFrontLabelWidthConstraint)

        let rightFrontLabelHeightConstraint = NSLayoutConstraint(item: rightFrontLabel, attribute: .Height, relatedBy: .Equal, toItem: nil, attribute: .NotAnAttribute, multiplier: 1, constant: rightFrontView.frame.size.height)
        self.addConstraint(rightFrontLabelHeightConstraint)

        let leftTapGesture: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(CDSlideView.leftTap(_:)))
        self.leftBackView.addGestureRecognizer(leftTapGesture)

        let rightTapGesture: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(CDSlideView.rightTap(_:)))
        self.rightBackView.addGestureRecognizer(rightTapGesture)

        self.setLabelText(leftText, rightText: rightText)
        self.setLightColor(lightColor)
        self.setDarkColor(darkColor)
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    // MARK: Setup
    func setLightColor(lightColor: UIColor) {
        let lightColor = lightColor
        self.foregroundView.backgroundColor = lightColor
        self.leftBackLabel.textColor = lightColor
        self.rightBackLabel.textColor = lightColor
    }

    func setDarkColor(darkColor: UIColor) {
        let darkColor = darkColor
        self.backgroundView.backgroundColor = darkColor
        self.leftFrontLabel.textColor = darkColor
        self.rightFrontLabel.textColor = darkColor
    }

    func setLabelText(leftText: String, rightText: String) {
        self.leftFrontLabel.text = leftText
        self.leftBackLabel.text = leftText
        self.rightFrontLabel.text = rightText
        self.rightBackLabel.text = rightText
    }

    // MARK: Actions
    func slideAction(sender: UIPanGestureRecognizer) {
        if sender.state == .Began || sender.state == .Changed {
            let translation = sender.translationInView(self)

            // Calculate where the user is trying to drag
            var newCenter: CGPoint = CGPointMake(sender.view!.center.x + translation.x, sender.view!.center.y)

            // Limit bounds & update center
            newCenter.x = max(self.frame.size.width * 0.25 + foregroundPadding / 2, newCenter.x)
            newCenter.x = min(self.frame.size.width * 0.75 - foregroundPadding / 2, newCenter.x)

            // Set new center
            sender.view!.center = newCenter
            sender.setTranslation(CGPointMake(0,0), inView: self)
        } else if sender.state == .Ended {
            let senderVCX = sender.view?.center.x

            // Snap to side
            if senderVCX <= viewWidth / 2 {
                print("called left")
                sender.view?.frame.origin.x = self.leftOrigin
            } else {
                print("called right")
                sender.view?.frame.origin.x = self.rightOrigin
            }
        }
    }

    func leftTap(sender: UITapGestureRecognizer) {
        UIView.animateWithDuration(0.05) {
            self.foregroundView.frame.origin.x = self.leftOrigin
        }
    }

    func rightTap(sender: UITapGestureRecognizer) {
        UIView.animateWithDuration(0.05) {
            self.foregroundView.frame.origin.x = self.rightOrigin
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T02:15:34.620

我建议你看看这些方法：

你可以通过检查 NSString 的大小来检查你的字符串有多少与视图重叠，使用这个方法：

```
[yourString sizeWithFont:yourFont constrainedToSize:maximumAllowedSize]; 
```

然后，您可以使用 NSMutableAttributedString 将标签字符串的一部分设置为一种颜色，将后一部分设置为另一种颜色。

```
//Just an example usage 
//It sets the color of characters starting from 3 to the end to blue
[str addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(3, str.length)];

//Now you have to set your string as attributed text just like below
//UILabels now support attributed strings by default which is quite handy

[yourLabel setAttributedString:str]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T03:51:28.223

查看[本教程，了解如何使用文本创建 alpha 蒙版](http://www.cocoawithlove.com/2009/09/creating-alpha-masks-from-text-on.html)。使用这种技术，您可以实现一个标准进度条，该进度条在前景和背景视图中移动，以实现您想要的效果。

# mysql - 嵌套评论系统mysql排序

> ID：15538168
> 
> 赞同：0
> 
> 时间：2013-03-21T02:00:20.787
> 
> 标签：mysql, database, comments, sql-order-by

好的，我意识到有很多方法可以完成评论。我选择的方式是这样设置的单个表。

```
id    comment    date       time    orig_comment
1     Hello   03-01-2013  10:10:10       0
2     Hello   03-02-2013  10:10:10       0
3     Hello   03-03-2013  10:10:10       1 
```

因此，要明确存在第一级，然后用户可以回复该评论（这是唯一的两个级别）。我给每个唯一递增的 id，并指定 orig_comment。如果 orig_comment 为“0”，那么它是一个基本级别的评论，如果它是嵌套的，那么 orig_comment 将是原始评论的 id。很简单。所以我当然需要订购评论。这是我现在的做法。

```
mysql_query("SELECT Comments.* FROM Comments ORDER BY 
IF(Comments.orig_comment = 0, Comments.id, Comments.orig_comment)DESC,Comments.id ASC") 
```

这可以首先检索最新的评论（这是我想要的），但是当涉及到嵌套评论时，它会按最旧的优先顺序（不是我需要的）。我需要将主要评论从最新到最旧排序，任何回复也应该从最新到最旧排序。我曾尝试修改我的查询以执行此操作但没有成功，但无法弄清楚。

作为一个附带问题，从可用性的角度来看，这个系统是否有意义？你认为以这种方式排序嵌套评论会令人困惑吗？我想这样做是因为我的回复按钮位于基本评论上，一旦点击就会在基本评论下方添加一个文本区域。我只是认为如果您的帖子也位于基本评论的正下方，而不是一直被扔到嵌套回复的底部，那么它会更容易看到。对此有什么想法吗？

还想解决我使用它来页面评论的另一个问题。我可以使用一个简单的限制来仅获取 x 条这样的评论：

```
mysql_query("SELECT Comments.* FROM Comments ORDER BY 
IF(Comments.orig_comment = 0, Comments.id, Comments.orig_comment)DESC,Comments.id ASC 
LIMIT 0, $page") 
```

这种方法显然没有关注每条主评论的回复数。所以我最终切断了对最后一条主要评论的回复。我想仅在 orig_comment='0' 时强制执行限制，这样无论对评论有多少回复，它都会显示所有回复。我试过了

```
mysql_query("SELECT Comments.* FROM Comments ORDER BY 
IF(Comments.orig_comment = 0, Comments.id, Comments.orig_comment)DESC,Comments.id ASC 
LIMIT 0, SELECT COUNT(id)FROM Comments WHERE orig_comment='0' LIMIT $page") 
```

但是，这会引发语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:10:12.010

考虑这个例子......

```
 DROP TABLE IF EXISTS comments;

 CREATE TABLE comments
 (comment_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
 ,comment VARCHAR(50) NOT NULL   
 ,comment_date DATETIME
 ,parent_id INT NULL
 );

 INSERT INTO comments VALUES
 (1     ,'Hello',                           '2013-03-01 10:10:10',NULL),
 (2     ,'Bonjour',                         '2013-03-02 10:10:10',NULL),
 (3     ,'How are you?',                    '2013-03-03  10:10:10',1),
 (4     ,'I\'m fine thank you, and you?',   '2013-03-04 10:10:10',1),
 (5     ,'Ça va?',                          '2013-03-05 10:10:10',2),
 (6     ,'Je vais bien, merci, et toi?',    '2013-03-06 10:10:10',2),
 (7     ,'Yes, not too bad thanks',         '2013-03-07 10:10:10',1),
 (8     ,'Oui, comme ci comme ça.',         '2013-03-08 10:10:10',2),
 (9     ,'Bon, à bientôt.',                 '2013-03-09 10:10:10',2),
 (10    ,'See you soon',                    '2013-03-10 10:10:10',1);

 SELECT * 
   FROM comments 
      x 
   JOIN comments y 
     ON y.parent_id = x.comment_id 
  ORDER 
     BY x.comment_date
      , y.comment_date;
 +------------+---------+---------------------+-----------+------------+------------------------------+---------------------+-----------+
 | comment_id | comment | comment_date        | parent_id | comment_id | comment                      | comment_date        | parent_id |
 +------------+---------+---------------------+-----------+------------+------------------------------+---------------------+-----------+
 |          1 | Hello   | 2013-03-01 10:10:10 |      NULL |          3 | How are you?                 | 2013-03-03 10:10:10 |         1 |
 |          1 | Hello   | 2013-03-01 10:10:10 |      NULL |          4 | I'm fine thank you, and you? | 2013-03-04 10:10:10 |         1 |
 |          1 | Hello   | 2013-03-01 10:10:10 |      NULL |          7 | Yes, not too bad thanks      | 2013-03-07 10:10:10 |         1 |
 |          1 | Hello   | 2013-03-01 10:10:10 |      NULL |         10 | See you soon                 | 2013-03-10 10:10:10 |         1 |
 |          2 | Bonjour | 2013-03-02 10:10:10 |      NULL |          5 | Ça va?                       | 2013-03-05 10:10:10 |         2 |
 |          2 | Bonjour | 2013-03-02 10:10:10 |      NULL |          6 | Je vais bien, merci, et toi? | 2013-03-06 10:10:10 |         2 |
 |          2 | Bonjour | 2013-03-02 10:10:10 |      NULL |          8 | Oui, comme ci comme ça.      | 2013-03-08 10:10:10 |         2 |
 |          2 | Bonjour | 2013-03-02 10:10:10 |      NULL |          9 | Bon, à bientôt.              | 2013-03-09 10:10:10 |         2 |
 +------------+---------+---------------------+-----------+------------+------------------------------+---------------------+-----------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:05:09.730

感谢您评论中的答案，我尝试并找到了一个解决方案，它不是很漂亮，但似乎可以完成工作。

```
SELECT *, CASE orig_comment
    WHEN 0 THEN CONCAT_WS('.',id,LPAD((SELECT MAX(id)+1 FROM Comments WHERE orig_comment = C.id),3,'0'))
    ELSE CONCAT_WS('.',orig_comment,LPAD(id,3,'0'))
END AS sort
FROM Comments as C
ORDER BY sort DESC 
```

输出将是：

```
id  comment time        orig_comment    sort
2   Hello   "2013-03-21 16:19:00"   0   2.005
3   Hello   "2013-03-21 16:19:00"   2   2.003
4   Hello   "2013-03-21 16:19:00"   2   2.004
1   Hello   "2013-03-21 16:19:00"   0   1 
```

这在排序时不会很麻烦，并且最多允许 999 个子评论（由于 LPAD 值 3） 它所做的是创建一个排序字符串，然后将其转换为小数以正确排序。（但我认为 mysql 确实可以正确处理它。）

尽管这可行，但我建议在手前计算排序值，然后为基本级别的注释创建一个好的值。（也许将其设置为 2.9 或任何适合您的需要）

# c++ - 省略循环值

> ID：15538169
> 
> 赞同：1
> 
> 时间：2013-03-21T02:00:23.913
> 
> 标签：c++

这是我在这里的第一篇文章，也是我第一次使用 C++。我正在查看从 Internet 获得的一些代码，但我对此有疑问。

它有一个 for 循环，如下所示：

```
for(cin >> t;t--;) 
```

我明白它在做什么，但我不明白它的条件是什么。

根据这种格式，`for ( init; condition; increment )`,`t--`是条件，但没有多大意义。我认为这`t--`是增量，但为什么它是第二个参数？

不应该是这样的：`for (cin >> t; ;t--);`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:02:44.173

该`--`运算符是一个“递减和返回”运算符。由于它用作后减量，因此它返回`t`然后减量该值。

在 C++ 中，所有与 0 不同的东西都是`true`，反之亦然，所以基本上它相当于

```
t == 0 
```

当然，在 的情况下情况会有所不同`--t`，因为它会在之前递减值然后返回它（它会提前一次迭代结束循环）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:05:06.127

`for ( init; condition; increment )`只是使用 for 循环的推荐方式。循环工作的真正方式是：

```
for(
    <runs once before loop>;
    <check before every iteration, loop if true/non-zero>;
    <run after every iteration>) 
```

# java - 矩阵及其行的初学者

> ID：15538177
> 
> 赞同：0
> 
> 时间：2013-03-21T02:01:31.100
> 
> 标签：java

我用数组和矩阵解决了一个问题。我开始了解它是如何工作的，但我收到了以下关于矩阵行的问题。这是问题要求我做的事情：

一种。编写方法 inputArray 的定义，提示用户输入 20 个数字，并将数字存储为 alpha。

湾。编写方法 doubleArray 的定义，将 beta 的元素初始化为 alpha 中对应元素的两倍。确保您阻止该方法修改 alpha 的元素。

C。**编写方法 copyGamma 的定义，将 inStock 的第一行的元素设置为 gamma，并将 inStock 的其余行设置为 inStock 先前行的三倍。确保您阻止该方法修改 gamma 的元素。**

这就是我所做的：

# 代码

```
public class ArrayQuiz {

    public static void main(String[]args){

        int count = 0;
        int [ ] [ ] inStock = new int [10][14];
        int[ ] alpha = new int[20];
        int[ ] beta = new int[20];
        int[ ] gamma = {11, 13, 15, 17};
        int[ ] delta = {3, 5, 2, 6, 10, 9, 7, 11, 1, 8};

        alpha(alpha,count);
        beta(beta,count,alpha);
        copyGamma(inStock,gamma,count);
    }

    public static int alpha(int alpha[],int count){
         count = 0;
        System.out.println("Enter 20 numbers:");

        for(int i = 0; i < 20; i++){
            Scanner input = new Scanner(System.in);
            alpha[i] = input.nextInt();
            count = alpha[i];
        }
        return count;

}

 public static int beta(int beta[], int count, int alpha[]){

     for(int i = 0; i< 20; i++){

         beta[i] = 2*alpha[i];
         count = beta[i];
     }

     return count;
 }

 public static int copyGamma(int inStock[][], int gamma[], int count){

     for(int i = 0; i < 10;i++){
         for(int j = 0; j < 14; j++) {
             if (i==0)  
             {
             gamma[i] = inStock[i][j];  
            count = gamma [i]; 
             }
             else
             {
                 inStock[i][j] = 3*inStock[i][j];
                count = inStock[i][j];
             }
         }

     }

         return count;
     }
 } 
```

输出没有给出错误，而且我还没有使用其他方法进行输出，因为我想确保 copyGamma 是正确的。当它表示 inStock 的第一行时，它是否表示矩阵的第一个 [] 并且对于其余的是否仅表示 inStock 的剩余行？由于 gamma 有 5 个元素 inStock 行剩下 5。所以这意味着只需将 i 乘以 3 或整个矩阵？如果我是正确的 [i] = rows 而 [j] 是列？我在那里很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:07:04.930

那是对的。`i`是行，`j`是列。但是，看起来您正在分配`gamma[i]`的值`inStock[i][j]`，而您似乎应该以相反的方式分配它。

# php - 有没有办法让客户端可以看到 $_SESSION 中的内容？

> ID：15538181
> 
> 赞同：1
> 
> 时间：2013-03-21T02:01:50.900
> 
> 标签：php, security, session

我需要`$_SESSION`在 PHP 中的变量上放置一些重要数据，并且想知道这些数据是否安全。客户是否能够看到此`$_SESSION`变量中的信息？在会话内存储敏感数据是否有任何安全隐患？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:04:41.467

不，客户端无法看到会话数据，因为它存储在服务器端。然而：

如果您在共享服务器上，则与您共享服务器的其他人能够访问它并非不可能。

此外，会话数据使用存储在客户端 cookie 中的会话 ID 与用户绑定。如果 Bob 能够获得 Alice 的 cookie，他将能够冒充她。

如果我不提出一些解决方案，我想我的答案是不完整的，所以：

要解决第一个问题，您应该将加密数据存储在会话中。

要解决第二个问题，您还应该比较 IP 地址等其他信息，以确保 Bob 没有尝试使用其他人的 cookie。这样，如果 Bob 窃取了 Alice 的 cookie，您就可以将 Bob 的 IP 与您存储在会话中的 Alice 的 IP 进行比较，并找出不匹配的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T17:42:54.283

确实，您应该采取措施使会话更加安全..

1) 仅通过 httponly cookie 使用会话 ID，并通过 url 禁用会话 ID ..

2) 将 session_save_path 设置为公共索引之外的新位置。如果您在共享主机上。他们不能使用会话注入来查看会话中的内容。更好..使用数据库作为会话处理程序..

3）禁用你的web服务器的http方法TRACE、TRACK、HEADER，如果攻击者可以包含一些java、flash或ajax，用户的http cookie也可以被窃取。

4）在IP用户代理或某种指纹上锁定会话......

5) 更新所有请求的 session_id 以使 session id 暴力破解更加困难

# solr - 提取相似术语 Solr

> ID：15538190
> 
> 赞同：0
> 
> 时间：2013-03-21T02:02:48.703
> 
> 标签：solr

我想从数据集中提取所有相似的术语，然后对它们进行否定约束查询。例如。

对于索引集，我如何推断黑莓和诺基亚是两个相似的术语。或者说是 2 种类似的商品。

这可以通过solr实现吗？? 这不是同义词。但我需要实现相似性约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:19:33.350

[当然不是您正在寻找的确切案例，但您可以使用 Mahout](http://searchhub.org/2010/03/16/integrating-apache-mahout-with-apache-lucene-and-solr-part-i-of-3/)查看Solr 。
Mahout 为主题建模提供[LDA](https://cwiki.apache.org/MAHOUT/latent-dirichlet-allocation.html)支持，这将帮助您从数据集中对主题进行分组

> 主题模型大致是一个分层贝叶斯模型，它与每个文档相关联“主题”的概率分布，而这些概率分布又是单词的分布。
> 例如，新闻专线集合中的主题可能包括有关“运动”的词，例如“棒球”、“本垒打”、“球员”，而有关棒球中使用类固醇的文档可能包括“运动”、“药物” ，和“政治”。请注意，标签“体育”、“毒品”和“政治”是人为分配的事后标签，并且算法本身仅分配与概率相关的词。这些模型中参数估计的任务是了解主题是什么，

因此，如果在一个数据集中，如果您有 Mobiles 的文档，您将获得一组包含 blackberry、iphone、mobile 等的术语。
这些可能不是相似的术语，但与同一主题相关。

# php - preg_match(): 未知修饰符 '@'

> ID：15538202
> 
> 赞同：0
> 
> 时间：2013-03-21T02:03:49.880
> 
> 标签：php, preg-match, ereg

我曾经使用我的函数`ereg`（检查是否有一个@符号），

`ereg("^[^@]{1,64}@[^@]{1,255}$", $email)`

但现在它已被弃用。`preg_match(): Unknown modifier '@'` 为什么我修复它时出现错误`preg_match("^[^@]{1,64}@[^@]{1,255}$", $email)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:06:14.347

您需要在表达式周围添加[分隔符。](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)

```
preg_match("/^[^@]{1,64}@[^@]{1,255}$/", $email) 
```

我强烈建议开始阅读[PCRE 模式语法](http://www.php.net/manual/en/reference.pcre.pattern.syntax.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:55:17.057

如果您想验证电子邮件地址：

```
preg_match('/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i', $email); 
```

这可能会对您有所帮助。

# python - 在 python 中通读 4 个 csv 文件并根据列 id 打印出行

> ID：15538206
> 
> 赞同：1
> 
> 时间：2013-03-21T02:04:18.460
> 
> 标签：python, python-2.7

大家好，我是python的菜鸟，目前正在学习，我想知道是否有人可以帮助我解决我面临的问题。我有四个文件 routes.txt、trips.txt、stop_times.txt、stops.txt，文件看起来像这样（文件有数千行）：

```
routes.txt 
"route_id","agency_id","route_short_name","route_long_name","route_desc","route_type","route_url","route_color","route_text_color"
"01","1","1",,,3,,"FFFF7C","000000"
"04","1","4",,,3,,"FFFF7C","000000"
"05","1","5",,,3,,"FFFF7C","000000"
"07","1","7",,,3,,"FFFF7C","000000"

trips.txt
"route_id","service_id","trip_id","trip_headsign","direction_id","block_id","shape_id"
"108","BUSN13-hbf13011-Weekday-02","19417636","Malden Station via Salem St.",1,"F411-75","1080037"
"94","BUSN13-hbf13011-Weekday-02","19417637","Medford Square via West Medford",0,"F94-5","940014"

stop_times.txt
"trip_id","arrival_time","departure_time","stop_id","stop_sequence","stop_headsign","pickup_type","drop_off_type"
"19417636","14:40:00","14:40:00","7412",1,,0,0
"19417636","14:41:00","14:41:00","6283",2,,0,0
"19417636","14:41:00","14:41:00","6284",3,,0,0

stops.txt
stop_id","stop_code","stop_name","stop_desc","stop_lat","stop_lon","zone_id","stop_url","location_type","parent_station"
"place-alfcl","","Alewife Station","","42.395428","-71.142483","","",1,""
"place-alsgr","","Allston St. Station","","42.348701","-71.137955","","",1,""
"place-andrw","","Andrew Station","","42.330154","-71.057655","","",1,"" 
```

我正在尝试根据列 ID 打印行。例如，如果我们有一个 route_id = "01"。

```
check the ID in the routes.txt file and check if that ID is equal to the route_id in the Trips.txt file. 
```

如果匹配相等

```
take the trip_id from the trips.txt file and compare it with the trip_id in the stop_times.txt file 
```

如果这是匹配检查

```
stop_id is equal to the stop_id of the stops_file.txt file then print. Now the stop_id can be a number or a     string 
```

我要打印的是打印出这样的东西，例如：

```
route_id, trip_id, arrival_time, departure_time, stop_name
01,19417636, 14:40:00,14:40:00, Alewife Station 
```

非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:45:21.130

我认为在这种情况下最简单的做法是将数据导入数据库并使用 SQL 连接。您可以只使用 sqlite3，这很简单。即使是内存数据库也可以工作，这取决于有多少数据以及脚本运行的频率。

确保为外键字段创建索引，否则查找速度可能会很慢。

此外，sqlite3 能够直接从 CSV 文件导入数据。只需创建表，然后使用“.import”命令（运行 sqlite3 并键入 .help 或查看文档）。

肖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:20:43.370

您正在尝试做的事情称为[join operation](https://en.wikipedia.org/wiki/Join_%28SQL%29)，并且可以使用[pandas](http://pandas.pydata.org/pandas-docs/dev/merging.html#database-style-dataframe-joining-merging)库很容易地完成：

```
import pandas as pd

routes = pd.read_csv('routes.txt')
trips = pd.read_csv('trips.txt')
stop_times = pd.read_csv('stop_times.txt')
stops = pd.read_csv('stops.txt') 
```

您可能必须更改[read_csv 的选项，](http://pandas.pydata.org/pandas-docs/dev/io.html)以便它正确解释您的数据（尤其是`route_id`s 上的前导零）

```
#   Please excuse the Dr. Seuss variable names
routes_trips = pd.merge(routes, trips, on=['route_id'])
routes_trips_stop_times = pd.merge(routes_trips, stop_times, on=['trip_id'])
routes_trips_stop_times_names = pd.merge(routes_trips_stop_times, stops, on=['stop_id']) 
```

默认情况下，pandas 执行内部连接，因此您最终只会得到匹配`route_id`s、`trip_id`s 和`stop_id`s 的那些行。

# c++ - 指针大小

> ID：15538210
> 
> 赞同：2
> 
> 时间：2013-03-21T02:04:37.377
> 
> 标签：c++, sizeof

```
int i=0;
int *p = &i;
std::cout<<sizeof(i)<<" vs "<<sizeof(p)<<"\n";

char c='0';
char*pc = &c;
std::cout<<sizeof(c)<<" vs "<<sizeof(pc)<<"\n";

double d=0.123456789;
double *pd = &d;
std::cout<<sizeof(d)<<" vs "<<sizeof(pd)<<"\n"; 
```

为什么指针的大小总是等于整数 4 的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T02:08:18.657

指针不*包含*它们指向的数据。

指针只是*指向*它们指向的数据。

`sizeof( double* )`是用于描述 a 所在位置的数据大小`double`。就像一张带有房子地址的纸在房子更大或更小时不会改变大小一样，指针的大小不是指向数据大小的函数。

嗯，通常。您可以想象国际地址更长，并且需要更多纸张。类似地，您可以想象与其他地址相比，公寓大楼内的地址需要多行“单元号”，甚至“公寓内”地址*仅*包含“单元号”，因此更短。该标准允许指向各种类型的指针的大小有所不同，并且某些体系结构（最著名的是 8086）具有近指针和远指针的概念（分别为 16 位和 32 位）。

这不再常见了（除了成员函数指针，但它们有多常见？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T02:09:10.813

~~指针实际上是一个包含地址的变量。在 32 位机器上，地址总是 32 位的，所以它是 4 个字节。16 位或 64 位机器的逻辑相同。~~

刚刚查看了 C99 标准，它说：

> 指针的大小不一定与任何整数类型的大小相同。一个实现可以支持多于一种大小的指针。

好吧，因此我认为了解指针大小的最安全方法是`sizeof()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T02:05:56.510

因为这是指针占用的内存量：4 个字节。

如果这是一个 64 位应用程序，它将返回 8。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T02:08:36.103

指针的大小取决于您正在编译的应用程序的类型。

指针类似于`32-bit unsigned int`32 位应用程序中的 a，因为它存储一个内存位置。

如果应用程序是`N-bit`应用程序，则任何指针的大小都会很`N bits`长，因为它需要足够大以存储内存位置。

任何`N-bit`可以运行`N-bit`应用程序的计算机的 RAM 限制为`2^N bytes`. 这使得最大的内存位置 id 等于`2^N - 1`（因为`0x00000000`是一个有效的内存地址）。

`2^N - 1`需要`N bits`用二进制表示，我的朋友就是为什么指针在 32 位应用程序中的大小为 4 字节的原因。

以一个`3-bit`简单的应用为例：（我宁愿不处理大数）

让我们假设它在一`3-bit`台机器上运行。由于`2^3 - 1`是可以用二进制表示的最大数，`3 bits`因此系统可以处理的最大内存将是`2^3`字节。（这些是无符号的。负内存地址不存在）

可能的内存地址是：

*   `0x0`（二进制表示`000`：）
*   `0x1`（二进制表示`001`：）
*   `0x2`（二进制表示`010`：）
*   `0x3`（二进制表示`011`：）
*   `0x4`（二进制表示`100`：）
*   `0x5`（二进制表示`101`：）
*   `0x6`（二进制表示`110`：）
*   `0x7`（二进制表示`111`：）

`3 bits`因此，在这种情况下，需要有一个指向内存地址的指针。

替换`3`为`32`，这将适用于您在这里所做的事情。

（矫枉过正的回答很多？是的。为什么？因为我很无聊。）

# php - 无法修改标头信息错误

> ID：15538214
> 
> 赞同：-1
> 
> 时间：2013-03-21T02:04:46.870
> 
> 标签：php, mysql

它没有将我带到成功的页面，而是停在脚本页面并在标题中给出错误“警告：无法修改标头信息 - 标头已由（输出开始于”）发送，我相信它与标头有关，并且在回声或其他东西之后有它，但我不知道如何修复它。非常感谢任何帮助

```
 <div style="position:absolute;left:750px;top:0px;width:160px;height:41px;overflow:hidden;">
<?php
if(isset($_SESSION['userName'])){
echo 'You are already logged in as <a href="recent.php" <a>'.$_SESSION['userName'].'</a>. Not you? <a href ="logout.php"</a>logout';
}else{
echo ' Please login <a href ="login_form.php" <a> click here</a>'.' Register <a href="register.php"<a>here</a>';
}

?>  
</div>
<div style="position:absolute;left:400px;top:150px;width:400px;height:141px;overflow:hidden;">
<?php
//=============Configuring Server and Database=======
$host        =    'localhost';
$user        =    'root';
$password    =    'revilo';
//=============Data Base Information=================
$database    =    'dbsneaker';

$conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish Connection with Server
 mysql_select_db($database,$conn) or die('Database Information is not correct');

 //===============End Server Configuration============

 //=============Starting Registration Script==========

 $userName    =    mysql_real_escape_string($_POST['txtUser']);

 $password    =    mysql_real_escape_string($_POST['txtPassword']);

 //=============To Encrypt Password===================
//$password    =    md5($password);
//============New Variable of Password is Now with an Encrypted Value========
if(!trim($userName) || !trim($password)){
echo 'Please fill in the form <br> <a href="register.php"<a>Click here</a> to return to registration';
}else{
// There's no empty field
// Check user exists
$checkQuerySql = "SELECT * FROM `bladmin` WHERE `admin_usr_name` = '$userName'";
$checkQuery = mysql_query($checkQuerySql);
if(mysql_fetch_assoc($checkQuery)){
    echo 'User already exists <br> <a href="register.php"<a>Click here</a> to return to registration';
   }else{
    if(isset($_POST['btnRegister'])) //===When I will Set the Button to 1 or Press Button to register
{
$query    =    "insert into bladmin(admin_usr_name,admin_pwd)values('$userName','$password')";
$res    =    mysql_query($query);
header('location:success_register.php');
}// User doesnt exists
}
}

?>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:08:05.963

回答您的问题很简单，在设置标题之前应该没有输出；对于没有真正使用标题的新手来说，这是一个常见的错误。

```
<?php
header ("Location: test.php");
?> 
```

这不会引发错误

```
<?php
 echo "blabla";
header ("Location: test.php");
?> 
```

或者

```
<strong> test</strong>
<?php
header ("Location: test.php");
?> 
```

以上将触发错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:07:09.763

> **[标题](http://php.net/manual/en/function.header.php)**
> 
> 请记住，**header() 必须在发送任何实际输出之前调用**，无论是通过普通的 HTML 标记、文件中的空白行还是通过 PHP。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

因此，您需要以在输出任何内容之前调用 header 的方式重新组织代码。

# python - Python：用于字典的生成器和装饰器

> ID：15538215
> 
> 赞同：0
> 
> 时间：2013-03-21T02:04:48.723
> 
> 标签：python, dictionary, generator, python-decorators

我创建了一个问题来锻炼一个人在 Python 中使用生成器、装饰器和字典的能力。

但是，我自己无法解决此练习，并且想知道是否有可能解决。

是否可以使用包装生成器的装饰器函数以字典的形式缓存函数输出？

练习是：

**编写一个装饰器来缓存函数调用结果。将 arg:result 对存储在函数对象属性中的字典中。使用生成器函数生成这些结果 在斐波那契函数上测试您的代码。**

我试图按如下方式实现它：

```
def cachefunc(func):
    def wrapper(*args, **kwargs):
        result = func(*args, **kwargs)
        return {func.__name__ + '(' + str(list(args))[1:-1] + ')' : str(result)}
    wrapper.__name__ = func.__name__
    wrapper.__doc__ = func.__doc__
    return wrapper

@cachefunc
def fibonacci(n):
    assert n >= 0
    if n < 2:
        return n
    else:
        return (fibonacci(n-1) + fibonacci(n-2))
def allfib():
    n = 0
    while True:
        yield fibonacci(n)
        n += 1

result = []
generator = allfib()
while len(result) < 10:
    x = next(generator)
    result.append(x)
print result 
```

但是，我收到以下错误：

```
python dg.py
Traceback (most recent call last):
  File "dg.py", line 32, in <module>
    x = next(generator)
  File "dg.py", line 26, in allfib
    yield fibonacci(n)
  File "dg.py", line 10, in wrapper
    result = func(*args, **kwargs)
  File "dg.py", line 22, in fibonacci
    return (fibonacci(n-1) + fibonacci(n-2))
TypeError: unsupported operand type(s) for +: 'dict' and 'dict' 
```

有人知道这样的问题的替代解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:10:04.833

## **您的具体错误**

错误在这里：

```
return {func.__name__ + '(' + str(list(args))[1:-1] + ')' : str(result)} 
```

当你想返回我相信的结果时，你正在返回字典。我不太清楚您实际上在缓存函数中在哪里进行缓存。

## **普通的留言**

这种缓存模式通常也称为记忆化。

试试这个[http://avinashv.net/2008/04/python-decorators-syntactic-sugar/](http://avinashv.net/2008/04/python-decorators-syntactic-sugar/)。向下滚动到关于斐波那契的部分。在那里可以找到以下代码：

```
class memoize:
  def __init__(self, function):
    self.function = function
    self.func_name = function.__name__
    self.memoized = {}

  def __call__(self, *args):
    try:
      print "Using Memo Solution for " + self.func_name + " on " + str(args)
      return self.memoized[args]
    except KeyError:
      print "Computing Solution Now for " + self.func_name + " on " + str(args)
      self.memoized[args] = self.function(*args)
    return self.memoized[args] 
```

然后只需执行以下操作：

```
@memoize
def fibonacci(n):
  assert n >= 0
  if n < 2:
    return n
  else:
    return (fibonacci(n-1) + fibonacci(n-2)) 
```

## 完整代码

在您的示例中，记忆仍然可以在生成器上工作，请注意打印语句向您显示正在获取记忆的结果。

```
class memoize:
  def __init__(self, function):
    self.function = function
    self.func_name = function.__name__
    self.memoized = {}

  def __call__(self, *args):
    try:
      print "Using Memo Solution for " + self.func_name + " on " + str(args)
      return self.memoized[args]
    except KeyError:
      print "Computing Solution Now for " + self.func_name + " on " + str(args)
      self.memoized[args] = self.function(*args)
    return self.memoized[args]

@memoize
def fibonacci(n):
  assert n >= 0
  if n < 2:
    return n
  else:
    return (fibonacci(n-1) + fibonacci(n-2))

def allfib():
  n = 0
  while True:
    yield fibonacci(n)
    n += 1

result = []
generator = allfib()
while len(result) < 10:
  x = next(generator)
  result.append(x)
print result 
```

# java - java.lang.Void vs void vs Null

> ID：15538219
> 
> 赞同：20
> 
> 时间：2013-03-21T02:05:18.497
> 
> 标签：java, android, null, void

`Void`, `void`, 和 can I just use之间到底有什么区别`null`？

我问这是因为我正在查看他们使用 Void 但 Eclipse 错误的示例 Android 代码（它说`Void cannot be resolved to a variable`）。

我的代码中断是

```
public class MyAsyncTask extends AsyncTask<Void, Void, Boolean>{
    ...
} 
```

我这样用

```
MyAsyncTask myAsyncTask = new MyAsyncTask();
myAsyncTask.execute((Void),null);//this is the line that breaks  "Void cannot be resolved to a variable" 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-21T02:13:40.510

**最常见的用途`Void`是反射，但这不是唯一可以使用它的地方。**

`void`是一个关键字，表示函数不会产生值。

`java.lang.Void`是引用类型，则以下内容有效：

```
 Void nil = null; 
```

（到目前为止它并不有趣......）

作为结果类型（返回值类型`Void`为 的函数），它意味着函数 *always * 返回`null`（它不能返回除 之外的任何内容`null`，因为`Void`没有实例）。

```
 Void function(int a, int b) {
    //do something
    return null;
 } 
```

**为什么我想要一个*总是*返回 null 的函数？**

在泛型发明之前，我没有`Void`.

对于泛型，有一些有趣的案例。例如，a[`Future<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)是其他线程执行的异步操作结果的持有者。`Future.get`将返回操作值（类型`T`），并阻塞直到执行计算。

但是……万一没有东西可以归还呢？很简单：使用`Future<Void>`. 例如，在 Google App Engine 中，异步数据存储服务[`delete`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/AsyncDatastoreService)操作返回一个`Future<Void>`. 在`get()`该未来调用时，在删除完成**后**`null`返回。[可以用Callable](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)写一个类似的例子。

 **另一个用例是 a`Map`没有值，即 a `Map<T,Void>`。这样的映射表现得像 a `Set<T>`，那么当没有等效的实现时它可能很有用`Set`（例如，没有`WeakHashSet`，那么可以使用 a [`WeakHashMap<T,Void>`](http://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T02:08:45.750

`Void`是“一个不可实例化的占位符类，用于保存对表示 Java 关键字 void 的 Class 对象的引用。” （来自[http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html)）

`void`是一个返回类型，表示不返回。

`null`是价值的缺失。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T02:24:37.547

您的代码中有一个额外的逗号。

```
myAsyncTask.execute((Void),null);
                        //^extra comma right here 
```

此外，不需要强制转换`null`为`Void`，因为 (1)`Void`没有实例，因此没有`Void`对象，并且 (2) 强制转换`null`为任何东西都相当无用，因为 null 是任何 Object 数据类型的有效值。

代码应该只是：

```
myAsyncTask.execute(null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T02:09:26.223

`java.lang.Void`是该`void`类型的盒装表示。由于您不能拥有 type 的实例`void`，因此它主要是为了完整性，而您需要它进行反射的非常罕见的实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-01T10:29:40.170

`void`: java 关键字表示方法不会返回任何东西。用于方法

`Void`: 包裹着空隙。它扩展了对象类。

需要，因为 Generic 不支持原始数据类型。（被认为是原始的无效是一个复杂的情况，但这只是为了解释）

应该用于反射

```
Constructor<Void> constructor = Void.class.getConstructor() 
```

`null`表示没有值。用于对象，与用于方法的 void 进行比较。**

# excel - 确定工作日包括周末但不包括假期

> ID：15538222
> 
> 赞同：0
> 
> 时间：2013-03-21T02:05:25.900
> 
> 标签：excel, excel-2007

我现在正在使用excel。我有一个问题。这是我的问题，您可能可以帮助我。

现在，我必须确定何时是到达日期。

例子：

我必须在 2012 年 1 月 20 日星期五寄出一些东西。我需要 3 天才能寄出。那么，2012 年 1 月 23 日星期一是假期。如果我手动计算，这很容易。我将得到 2012 年 1 月 24 日的答案。但我不知道如何制作公式以在 excel 中执行案例。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:39:02.833

在 Excel **2010**中，您可以使用`WORKDAY.INTL`类似的函数

`=WORKDAY.INTL(A2,B2,"0000000",holidays)`

其中 A2 是日期和 B2 天添加和假期一系列假期日期....但在 Excel **2007**中尝试这个数组公式

`=SMALL(IF(COUNTIF(holidays,A2+ROW(INDIRECT("1:"&B2*5)))=0,ROW(INDIRECT("1:"&B2*5))),B2)`+A2

用`CTRL`+ `SHIFT`+确认`ENTER`

假设您从未有超过 4 个连续的假期日期（如果您这样做，则将 *5 更改为 *10 或更高）

# knockout.js - 如何使用 Hot Towel 包含 text/html 脚本

> ID：15538223
> 
> 赞同：1
> 
> 时间：2013-03-21T02:05:28.627
> 
> 标签：knockout.js, single-page-application, hottowel

我正在尝试熟悉 Hot Towel SPA 模板。在阅读了 Ryan Vanderpol 的[这篇文章](http://blog.ryanvanderpol.com/index.php/2012/07/using-knockoutjs-to-create-an-edit-in-place-data-grid/)后，我想实现内联编辑。

现在，对于如何将“text/html”类型的脚本块插入到部分内容中，我感到很茫然。

这就是我在视图部分中的内容（注意里面的两个脚本块）。

```
<section>
    <h2 class="page-title" data-bind="text: title"></h2>

    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Company Name</th>
                <th>Last Name</th>
                <th>First Name</th>
                <th style="width: 50px; text-align:right;" />
            </tr>
        </thead>
        <tbody data-bind=" template: { name: templateToUse, foreach: customers }"></tbody>
    </table>        

    <script id="readTemplate" type="text/html">
        <tr>
            <td data-bind='value: CustomerID' ></td>
            <td data-bind='value: CompanyName' ></td>
            <td data-bind='value: LastName' ></td>
            <td data-bind='value: FirstName' ></td>
            <td class="buttons">
                <a class="btn" data-bind="click: edit" href="#" title="edit"><i class="icon-edit"></i></a>
                <a class="btn" data-bind="click: removeCustomer" href="#" title="remove"><i class="icon-remove"></i></a>
            </td>
        </tr>
    </script>

    <script id="editTemplate" type="text/html">
        <tr>
            <td><input data-bind='value: CustomerID' /></td>  
            <td><input data-bind='value: CompanyName' /></td>
            <td><input data-bind='value: LastName' /></td>
            <td><input data-bind='value: FirstName' /></td>
            <td class="buttons">
                <a class="btn btn-success" data-bind="click: save" href="#" title="save"><i class="icon-ok"></i></a>
                <a class="btn" data-bind="click: cancel" href="#" title="cancel"><i class="icon-trash"></i></a>
            </td>
        </tr>
    </script>
</section> 
```

这是我的视图模型。

```
define(['services/logger'], function (logger) {
    function Customer(data) {
        var self = this;
        self.CustomerID = ko.observable(data.CustomerID);
        self.CompanyName = ko.observable(data.CompanyName);
        self.LastName = ko.observable(data.LastName);
        self.FirstName = ko.observable(data.FirstName);
    };

    function ViewModel() {
        var self = this;
        self.title = 'Customers';
        self.customers = ko.observableArray([]);
        self.selectedItem = ko.observable();

        self.edit = function (item) {
            self.selectedItem(item);
        };
        self.cancel = function () {
            self.selectedItem(null);
        };
        self.removeCustomer = function (customer) {
            // Code for deleting row
        }       
        self.save = function () {
            // Code for saving changes
        };      
        self.templateToUse = function (item) {
            return self.selectedItem() === item ? 'editTemplate' : 'readTemplate';
        };
    }

    var vm = new ViewModel();
    return vm;
}); 
```

当我运行该应用程序时，在 Chrome 中调试它时出现“找不到 ID 为 readTemplate 的模板”的错误消息。

如何在 Hot Towel 中实现我的 html 模板？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:55:33.400

本周我们在使用内联模板时遇到了同样的问题。看起来 Durandal 不能很好地使用内联模板。

我们的解决方案是使用外部模板，存储在主文件旁边的文件中，然后使用以下行调用它们：

```
<!-- ko compose: { view: 'path/' + templateToUse + '.html', model: yourModel } --> 
```

可能不优雅，但至少它正在工作。

让我知道它是否解决了您的问题:)

# php - 我如何处理一个 作为一种形式

> ID：15538225
> 
> 赞同：7
> 
> 时间：2013-03-21T02:05:33.263
> 
> 标签：php, javascript, jquery, post

我所做的是：

HTML

```
<form>
    <div id="textBox" contenteditable="true" name="textBox"><?php echo $storyText; ?>
    </div>
    <textarea id="hiddeninput" name="hiddeninput"></textarea>
    <input type="submit" id="save" name="save" value="Submit"/>
</form> 
```

Javascript

```
$('#save').click(function () {
    var mysave = $('#textBox').html();
    $('#hiddeninput').val(mysave);
    $("form:first").submit();
    $('#hiddeninput').append(mysave);
    alert($('#hiddeninput').val());
}); 
```

因此，警报和附加都显示正确的信息，但是当我提交时它不会将#hiddeninput 保存为 php 变量。最初我把它作为一个隐藏的输入法，但我试图表明无论我做什么它都不会发布，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-21T02:42:31.603

您的代码几乎可以正常工作。但我宁愿使用普通`<input type="hidden">`的，你不需要`submit`在你的情况下触发你的表单，只需将值放在隐藏字段中。

给定您的标记，稍作修改

```
<form action="showrequest.php">
<div id="textBox" contenteditable="true" name="textBox" style="width:300px;height:100px;">
</div>
<textarea id="hiddeninput" name="hiddeninput"></textarea>
<input type="submit" id="save" name="save" value="Submit"/>
</form> 
```

js

```
$(function(){
    $('#save').click(function () {
        var mysave = $('#textBox').html();
        $('#hiddeninput').val(mysave);
    });
}); 
```

`var_dump($_REQUEST)`在 php 方面给出

```
array(2) {
  ["hiddeninput"]=>
  string(4) "test"
  ["save"]=>
  string(6) "Submit"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T02:20:38.110

尝试绑定提交事件而不是点击事件。可能发生的是表单在设置 textarea 的值之前提交。

```
$('form').submit(function(){
    var mysave = $('#textBox').html();
    $('#hiddeninput').val(mysave);
}); 
```

我使用 method="get" 测试了这个示例，并从 div 中获取了 html 以显示在 URL 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T02:14:22.483

我相信您的表单在您的 js 代码有机会运行之前已提交。由于您是从 jQuery 手动提交，请尝试阻止按钮的默认事件（也提交表单）：

```
$('#save').click(function(e) {
    e.preventDefault();
    var mysave = $('#textBox').html();
    $('#hiddeninput').val(mysave);
    $("form:first").submit();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T02:10:39.510

仅凭经验说，您不能`div`在表单中提交值`POST`。

您可以将其更改为 textarea，如果您想限制用户对其进行编辑，请将其设置为`disabled`.

或者，您可以使用 javascript 提交表单，并从中提取值`#hiddeninput`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-27T14:49:50.277

这是提交您想要的任何 div 内容元素的通用方法（请参阅下面的注释）：

```
<form method="post" id="f">
<div id="txt" addToForm="f" contenteditable spellcheck="true" style="height:100px;width:300px;font-family:arial,sans serif;border:1px solid black;font-weight:normal;overflow-y:auto;"
></div><br />
<input type="button" value="Go" id="btnGo">
</form>
<script type="text/javascript">
$(document).ready(function(){
    $("#btnGo").click(function(){
        $("div[addToForm]").each(function(){
            var tId=$(this).prop("id");
            $(this).after("<input type='hidden' name='"+tId+"' id='hdn"+tId+"'>");
            $("#hdn"+tId).val($(this).html());
        });
        ("#f").submit();
    });
});
</script> 
```

注 1） using`<input type="hidden">`保留任何格式（IE11 允许超过 FF）。如果您希望删除所有格式，包括`<br>`来自用户按 Enter/Return 的 CFLF（即 's），请`<textarea style="display:none;"></textarea>`改用。注意 2) 确保首先成功完成验证，否则您将得到多个具有相同名称的输入。

# xcode - 关闭或结束 UIScrollView

> ID：15538226
> 
> 赞同：0
> 
> 时间：2013-03-21T02:05:34.803
> 
> 标签：xcode, uiscrollview

我有一个我编写的代码，它在按下按钮时调用 UIScrollView。问题是即使按下另一个按钮，它仍然在屏幕上。我不知道如何结束或驳回这一点。

> (IBAction) onClickSize:(id)sender {
> 
> ```
> viewSizePrint.hidden = YES;
> scrlView.contentSize = CGSizeMake(1500, 214);
> 
> for (int i=0; i<20; i++) {
>     UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(158*i+22, 2, 154, 210)];
>     imgView.tag = i+10;
>     [scrlView addSubview:imgView];
> 
>     UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
>     [btn setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"layout%d_thumbnail", i+1]] forState:UIControlStateNormal];
>     btn.frame = CGRectMake(158*i+30, 10, 138, 194);
>     btn.tag = i;
>     [btn addTarget:self action:@selector(onClickTheme:) forControlEvents:UIControlEventTouchUpInside];
>     [scrlView addSubview:btn];
> }
> 
> [self refreshTheme:[AppDelegate sharedAppDelegate].shrTheme];
> 
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:08:11.300

```
[scrlView removeFromSuperview];
scrlView = nil; 
```

# jquery - 如何以 3 行排列图像 div？

> ID：15538233
> 
> 赞同：1
> 
> 时间：2013-03-21T02:06:05.853
> 
> 标签：jquery, html, css, styles

大家好，我有许多具有类名的 div，例如**ItemLeft、ItemMiddle 和 ItemRight**。我想知道如何使用 css 或任何简单的方法连续显示这些图像 div 3（目前所有图像都显示在彼此下方）？

我从 getjson 调用中获取图像 div，如下所示：

```
$.getJSON('http://www.awebsite.com/get?url=http://www.bwebsite.com/moreclips.php&callback=?', function(data){
    //$('#output').html(data.contents);

 var siteContents = data.contents;  

document.getElementById("myDiv").innerHTML=siteContents 
```

**注意：**每次我调用 getjson 时，我都会返回 6 个图像 div，这些 div 显示在彼此下方，而不是连续显示 3 个！

这是通过调用 getjson 检索到的 div 图像，但所有这些图像 div 彼此下方不是 3 行：

```
<div class="ItemLeft">

  <div class="Clipping">        
    <a class="ImageLink" href="/videos/id1234" title="galaxy">
      <img class="ItemImage" src="/Images/galaxyimg.jpg" alt="galaxy" />
      <img class="OverlayIcon" src="/Images/1.png" alt="" />
    </a>
    <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/id1234"><span class="Text">51:57</span></a>
  </div>

  <div class="Title"><a href="/videos/id1234" title="galaxy">galaxy</a></div>

  <div class="VideoAge">1 daybefore</div>

  <div class="PlaysInfo"> broadcast 265</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:23:25.473

根据您的问题，我复制了您的 leftItem 以创建多个项目并在此处添加了一个小提琴 [http://jsfiddle.net/tVMet/](http://jsfiddle.net/tVMet/)

为您的 div 提供浮动，第三个结束时只需给一个 div 清除浮动。

```
<div class="clear" />

.ItemLeft, .ItemMiddle, .ItemRight
{
    float:left;
}
.clear
{
    clear:both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:09:40.877

这可以使用 HTML 中的表格轻松完成。或者，如果您更喜欢没有表格单元格的 div，那么请尝试`float: left`使用需要彼此相邻的三个 div。每组结束后，换行。这是为了避免他们都走在同一条线上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:22:47.510

HTML：

```
 <div class="imagediv">

    <div class="imageitem"> // image content and stuff </div>
    <div class="imageitem"> // image content and stuff </div>
    <div class="imageitem"> // image content and stuff </div>

    <div class="clearfloat"></div>

    <div class="imageitem"> // image content and stuff </div>
    <div class="imageitem"> // image content and stuff </div>
    <div class="imageitem"> // image content and stuff </div>

    <div class="clearfloat"></div>

    </div> 
```

CSS：

```
.imageitem {
   float:left;
}

.clearfloat {
   clear:both;
} 
```

# c# - 编译器未绑定到正确的泛型方法重载

> ID：15538235
> 
> 赞同：0
> 
> 时间：2013-03-21T02:06:20.830
> 
> 标签：c#, compiler-errors, type-inference, overloading

通常，C# 编译器在方法绑定和类型参数推断方面很聪明。但我似乎把它难住了。

```
class Obj
{
    void Handler( int a, int b ) { }

    Obj() { Method( "", Handler ); }

    public void Method<T>( T t, Action<T> action ) { }

    public void Method<T, U>( T t, Action<U, U> action ) { }
} 
```

该`Method`调用导致编译器错误：

> 参数 2：无法从“方法组”转换为“System.Action”。

为什么编译器没有注意到调用适合第二个重载？我可以通过在`Method<string, int>( "", Handler )`or中使调用更明确来编译它`Method( "", (Action<int, int>)Handler )`。但为什么这是必要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T04:34:38.783

让我们采纳 Anthony 的建议并考虑一下：

```
class Obj
{
    void Handler( int a, int b ) { }
    Obj() { Method( "", Handler ); }
    public void Method<T, U>( T t, Action<U, U> action ) { }
} 
```

重载解析失败。为什么？好吧，我们必须推断出 T 和 U。显然 T 是字符串。什么是你？

这一点很重要：我们*在知道 Handler 是什么之后*推断出 U 是什么。现在，您可能会说我们知道 Handler 是什么，因为它可能只有一件事。但是没有 C# 规则说，如果方法组中只有一个方法，它会自动赢得重载决议游戏。规则是 Handler 的含义是通过在与 Handler 关联的方法组上运行*重载决议来确定的。*重载决议考虑了*参数*，我们没有任何 Handler 的参数，因为我们可能拥有的唯一参数列表是 (U, U)，而 U 是我们首先要确定的。

所以重载决议在这里失败了。现在，如果我们有：

```
class Obj
{
    double M(string s) { }
    Obj() { Method( "", M ); }
    public void Method<T, U>(T t, Func<T, U> f) { }
} 
```

That works fine. We infer T is string, and now we can do overload resolution on M, determine that M means `double M(string s)`, and now we know that U is double.

# java - 根据俄罗斯方块游戏创建的数组为 JTable 单元着色

> ID：15538237
> 
> 赞同：0
> 
> 时间：2013-03-21T02:06:29.683
> 
> 标签：java, swing, jtable, rendering, background-color

我正在尝试创建俄罗斯方块 GUI。我的朋友写了后端。到目前为止，我们只是将俄罗斯方块板（或我在代码中提到的网格）打印到控制台窗口。在下面的代码中，我设置了一个 JTable 作为俄罗斯方块游戏的棋盘。我想知道如何让我的 JTable 根据从 Window 类顶部声明的俄罗斯方块“游戏”传递的网格来渲染每个网格元素。这个网格是一个整数值的二维数组，它引用 Pieces 类中枚举的颜色。有什么建议么？到目前为止，它只打印一种颜色。

我还发布了一些俄罗斯方块类的代码，以便您可以看到那里可用的方法和参数。

这是我的代码（希望在 SSCCE =p 中）：

```
public class Window {
    JPanel cards;
    final static String SPLASHSCREEN = "SplashScreen";
    final static String MAINMENU = "MainMenu";
    final static String TETRIS = "Tetris";
    final static int GRID_ROW_HEIGHT = 30;
    final static int NUM_ROWS = 20;
    final static int NUM_COLS = 10;
    JTable table = new JTable(new MyTableModel());
    Tetris game = new Tetris(); 

    public void addComponentToWindow(Container pane) {
        // Create the "cards"
        .
        .
        .

        // SplashScreen setup
        .
        .
        .

        // MainMenu setup
        .
        .
        .

        // Tetris setup
        final JButton startGame = new JButton("START GAME");
        card3.setLayout(new GridBagLayout());
        GridBagConstraints gbc2 = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.insets = new Insets(2, 2, 2, 2);
        card3.add(startGame, gbc2);
        gbc.gridy = 1;
        startGame.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {                
                table.setDefaultRenderer(Object.class, new MyRenderer());
                table.setRowHeight(GRID_ROW_HEIGHT);
                table.setFocusable(false);
                table.setRowSelectionAllowed(false);
                for (int i = 0; i < game.getNumCols(); i++) {
                    table.getColumnModel().getColumn(i).setPreferredWidth(table.getRowHeight());
                }

                card3.add(table);
                card3.remove(0); //Removes button
                card3.revalidate(); //Redraws graphics
            }
        });

        // Sets up layout
        cards = new JPanel(new CardLayout());
        cards.add(card1, SPLASHSCREEN);
        cards.add(card2, MAINMENU);
        cards.add(card3, TETRIS);

        // Creates the actual window
        pane.add(cards, BorderLayout.CENTER);
    }

    public Color getTableCellBackground(JTable table, int row, int col) {
        TableCellRenderer renderer = table.getCellRenderer(row, col);
        Component component = table.prepareRenderer(renderer, row, col);    
        return component.getBackground();
    }

    class MyRenderer implements TableCellRenderer {
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            JTextField editor = new JTextField();
            if (value != null) {
                editor.setText(value.toString());
            }
            if (game.getCur_color().getKey() == 0) {
                editor.setBackground(Color.WHITE);
            }
            else if (game.getCur_color().getKey() == 1) {
                editor.setBackground(Color.RED);
            }
            else if (game.getCur_color().getKey() == 2) {
                editor.setBackground(Color.GREEN);
            }
            else if (game.getCur_color().getKey() == 3) {
                editor.setBackground(Color.BLUE);
            }
            else if (game.getCur_color().getKey() == 4) {
                editor.setBackground(Color.YELLOW);
            }
            return editor;
        }
    }

    @SuppressWarnings("serial")
    class MyTableModel extends AbstractTableModel {
        public int getColumnCount() {
            return NUM_COLS;
        }
        public int getRowCount() {
            return NUM_ROWS;
        }        
        public Object getValueAt(int row, int col) {
            return null;
        }
    }
} 
```

俄罗斯方块类：

```
public class Tetris 
{
    int NUM_ROWS = 20;
    int NUM_COLS = 10;

    int grid[][];
    int cur_row;
    int cur_col;
    Pieces cur_color;
    Style cur_style;
    Pieces next_color;
    Style next_style;
    boolean over;

    public Tetris()
    {
        grid = new int[10][20];

        for(int i = 0; i < 10; i ++)
        {
            for(int j = 0; j < 20; j ++)
            {
                grid[i][j] = Pieces.BLANK.getKey();
            }
        }

        next_color = Pieces.createColor();
        next_style = Style.createStyle();
        over = false;

        create_Piece();
    }

    public void createPiece(){...}
    public void setPiece(){...}
    public void removeRow(){...}
} 
```

连同 moveLeft、moveRight、moveDown、rotateLeft、rotateRight、printGame 以及所有字段的 getter 和 setter。Tetris 类中的所有方法都在控制台中进行了测试，并且可以正常工作。这是我到目前为止的输出。每次颜色都不同，我很确定我知道为什么，但是我很难考虑如何根据俄罗斯方块类中创建的网格数组为每个单元格着色。

![在此处输入图像描述](../Images/18fcb8bf1b5d6c7f84dafe0937dc6040.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T02:42:37.147

这纯粹是一个概念证明。

基本上，您已经有了游戏板的模型。您需要能够将其建模回屏幕。

我会将您的电路板模型包装在 a 中`TableModel`并与 一起`TableCellRenderer`，让两者一起工作。

您需要做的就是在棋盘数据更改时相应地更新表模型。

如果你写的关系正确，边框会通知表格模型，表格模型会通知表格。

![在此处输入图像描述](../Images/9c7ef5c95708832af8a2c48ebf843199.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Enumeration;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableColumn;

public class TetrisTable {

    public static void main(String[] args) {
        new TetrisTable();
    }

    public TetrisTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JTable table;
        private TetrisTabelModel model;
        private int currentRow = 0;
        private int blockHeight = 3;
        private int blockWidth = 3;

        public TestPane() {
            model = new TetrisTabelModel();
            table = new JTable(model);
            table.setDefaultRenderer(Integer.class, new TetrisTabelCellRenderer());
            table.setRowHeight(24);
            Enumeration<TableColumn> columns = table.getColumnModel().getColumns();
            while (columns.hasMoreElements()) {
                TableColumn column = columns.nextElement();
                column.setPreferredWidth(24);
                column.setMinWidth(24);
                column.setMaxWidth(24);
                column.setWidth(24);
            }
            setLayout(new GridBagLayout());
            add(table);

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {

                    int col = (model.getColumnCount() - blockWidth) / 2;
                    int row = currentRow - blockHeight;
                    if (row + blockHeight >= model.getRowCount()) {
                        ((Timer) e.getSource()).stop();
                    } else {
                        drawShape(row, col, 0);
                        currentRow++;
                        row = currentRow - blockHeight;
                        drawShape(row, col, 3);
                    }

                }

                public void drawShape(int row, int col, int color) {

                    for (int index = 0; index < blockHeight; index++) {

                        if (row >= 0 && row < model.getRowCount()) {

                            switch (index) {
                                case 0:
                                case 1:
                                    model.setValueAt(color, row, col);
                                    break;
                                case 2:
                                    model.setValueAt(color, row, col);
                                    model.setValueAt(color, row, col + 1);
                                    model.setValueAt(color, row, col + 2);
                                    break;
                            }

                        }
                        row++;

                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }
    }

    public class TetrisTabelModel extends AbstractTableModel {

        private int[][] values;

        public TetrisTabelModel() {
            values = new int[20][10];
        }

        @Override
        public int getRowCount() {
            return values.length;
        }

        @Override
        public int getColumnCount() {
            return values[0].length;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return Integer.class;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return values[rowIndex][columnIndex];
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            values[rowIndex][columnIndex] = (int) aValue;
            fireTableCellUpdated(rowIndex, columnIndex);
        }
    }

    public class TetrisTabelCellRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, "", false, false, row, column);
            setOpaque(true);
            if (value != null) {
                if (value == 0) {
                    setBackground(Color.WHITE);
                } else if (value == 1) {
                    setBackground(Color.RED);
                } else if (value == 2) {
                    setBackground(Color.GREEN);
                } else if (value == 3) {
                    setBackground(Color.BLUE);
                } else if (value == 4) {
                    setBackground(Color.YELLOW);
                }
            } else {
                setBackground(Color.DARK_GRAY);
            }
            return this;
        }
    }
} 
```

# css - 合并表格中的单元格？

> ID：15538241
> 
> 赞同：1
> 
> 时间：2013-03-21T02:06:48.217
> 
> 标签：css, video

如何将`youtube`视频嵌入到`table`?

我希望左列和右列有 2 个`rows`高，中间列有 2 个单元格，我想要底部单元格中的视频和顶部的文本，但我不知道如何将它移到那里

```
<div class="cbody">
        <table class="ctable">
            <tr>
                <td rowspan="2" style="width:105px"><img class="cimg1" src="meh.png" alt=" " width="100px" height="500px"></td>
                <td><p class="ctxt">
                my text here
                </p></td>
                <td rowspan="2" style="width:105px"><img class="cimg2" src="meh.png" alt=" " width="100px" height="500px"></td>
            </tr>
            <tr>
            <iframe width="420" height="315" src="http://www.youtube.com/embed/xI_6oLPC-S0" frameborder="0" allowfullscreen></iframe>
            </tr>
        </table>
    </div> 
```

和CSS...

```
.cbody {
width:800px;
margin-left: auto;
margin-right: auto;
border-style:solid;
border-width:3px;
}

.cimg1 {
padding-left:5px;
padding-top:5px;
padding-bottom:5px;
float:left;
}

.cimg2 {
padding-left:5px;
padding-top:5px;
padding-bottom:5px;
float:right;
}

.ctxt {
margin-left:5px;
margin-right:5px;
text-align:center;

}

.ctable {
width:800px;
margin-left:auto;
margin-right: auto;
border-style:solid;
border-width:2px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:19:11.477

您需要在 周围添加`<td>`标签`<iframe>`，即：

```
<td>
    <iframe width="420" height="315" src="http://www.youtube.com/embed/xI_6oLPC-S0" frameborder="0" allowfullscreen>
    </iframe>
</td> 
```

您还应该考虑使用`<th>`而不是`<td>`要放置文本的位置。

# c++ - 灰度化 BGR 图像的 ROI

> ID：15538243
> 
> 赞同：-2
> 
> 时间：2013-03-21T02:07:03.750
> 
> 标签：c++, opencv, grayscale

我遇到了 OpenCV 的一个小问题。

我可以在我的网络摄像头捕获中绘制一个矩形以绘制 ROI。我想知道是否可以对帧的这一部分进行灰度化。

我尝试了很多不同的方法来做到这一点，但我仍然无法做到。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:30:29.483

这是将捕获的图像 ROI 设置为灰度的粗略方法：

```
cv::VideoCapture capture;
cv::Mat frame, grayFrame, gray3;

if(!capture.open(-1))
{
    cout<<"Capture Not Opened"<<endl; return;
}

int width = capture.get(CV_CAP_PROP_FRAME_WIDTH);
int height = capture.get(CV_CAP_PROP_FRAME_HEIGHT);

cv::Rect roi(20,20,400,400); //The ROI to convert to gray

cv::Mat mask = cv::Mat::zeros(height,width,CV_8U);
for(int i = roi.y; i<roi.y + roi.height - 1; i++)
    for(int j= roi.x; j<roi.x + roi.width - 1; j++)
        mask.at<uchar>(i,j) = 1;

do 
{
    capture>>frame;

    if(frame.empty()) break;

    cv::cvtColor(frame,grayFrame,cv::COLOR_BGR2GRAY);

    cv::cvtColor(grayFrame, gray3, cv::COLOR_GRAY2BGR);

    frame.setTo(cv::Scalar::all(0),mask);
    cv::add(frame,gray3,frame,mask);

    cv::imshow("Image",frame);
    cv::waitKey(10);
} 
while (true); 
```

我找不到更简单的方法来使用蒙版操作设置图像值，因此替代方法是将 ROI 设置为零，并将蒙版值添加到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:53:10.777

这是一个例子

```
cv::Mat image, roi_image;
image = cv::imread("example.jpg");  
cv::Rect r = cv::Rect(10,10, 50,50); // 'r' defines the location of ROI
roi_image = image(r);                // select ROI 
cvtColor(roi_image, roi_image, CV_RGB2GRAY);  //modify ROI
imshow("Ouput", image);   // desired output image where ROI is in grayscale
cv::waitKey(10);         // add this line so that graphics can update 
```

请注意，这`roi_image`是一个指向 ROI 的矩阵`image`。如果您修改 roi_image 它也会修改`image`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:02:14.440

感谢你们的时间和耐心。我正在阅读 O'reilly 的“Learning openCV”一书，所有示例都是使用 IplImage 类而不是 Mat 类完成的。其实我也不知道有什么区别。

无论如何，我无法使用您的解决方案，因为我不使用任何 Mat 对象，这是我的解决方案（现在可以使用）：

```
while(1)
{
 frame = cvQueryFrame(cam);
 temp = cvCloneImage(frame);
 if(!frame)break;
 cvCopy(frame,temp);
 if(drawing_box || box_drew)
  draw_box(temp,box);

 if(grayScaleOn && box_drew)
 {
  for(int y=box.y;y<box.y+box.height;y++)
  {
    uchar* ptr = (uchar*)(temp->imageData+y*temp->widthStep);
    for(int x=box.x;x<box.x+box.width;x++)
    {
ptr[3*x+0] = ptr[0] * 0.114 + ptr[3*x+1]*0.587 + ptr[3*x+2]*0.299;
ptr[3*x+1] = ptr[0] * 0.114 + ptr[3*x+1]*0.587 + ptr[3*x+2]*0.299;
ptr[3*x+2] = ptr[0] * 0.114 + ptr[3*x+1]*0.587 + ptr[3*x+2]*0.299;
    }
  }
 cvShowImage("Output", temp); 
```

# android - 向地图添加多个标记 (v2)

> ID：15538247
> 
> 赞同：3
> 
> 时间：2013-03-21T02:07:30.937
> 
> 标签：android, google-maps, google-maps-api-3, google-maps-markers

我有一个从 API 中提取的位置的 ArrayList 列表，这些位置被添加到从 SupportMapFragment 生成的 GoogleMap 中。

我从列表中创建标记并将它们添加到地图中，然后将标记 ID 添加到标记索引的地图中，以便稍后通过 onInfoWindowClick 引用。

```
public void addLocationMarkers() {
    mGoogleMap.clear();
    LocationBlahObject thelocation;
    int size = mNearbyLocations.size();
    for (int i = 0; i < size; i++) {
        thelocation = mNearbyLocations.get(i);
        Marker m = mGoogleMap
                .addMarker(new MarkerOptions()
                        .position(
                                new LatLng(thelocation.Latitude,
                                        thelocation.Longitude))
                        .title(thelocation.Name)
                        .snippet(thelocation.Address)
                        .icon(BitmapDescriptorFactory
                                .defaultMarker(thelocation.getBGHue())));
        mMarkerIndexes.put(m.getId(), i);
    }
} 
```

我的问题是，有时位置列表可能有数百个，并且地图会在添加标记时挂起几秒钟。

我尝试过使用 AsyncTask，但显然这里的大部分工作是操纵 UI，而我所做的任何 runOnUiThread 或 publishProgress 恶作剧都没有表现出任何区别。

有没有更好的方法来做到这一点，或者创建标记并批量添加我不知道的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-23T17:38:22.387

刚从谷歌上看到这个。这就是我解决添加 100 多个标记的滞后问题的方法。它们慢慢地流行起来，但我认为没关系。

```
class DisplayPinLocationsTask extends AsyncTask<Void, Void, Void> {
    private List<Address> addresses;

    public DisplayPinLocationsTask(List<Address> addresses) {
        this.addresses = addresses;
    }

    @Override
    protected Void doInBackground(Void... voids) {
        for (final Address address : addresses) {
            getActivity().runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    LatLng latLng = new LatLng(address.latitude, address.longitude);
                    MarkerOptions markerOptions = new MarkerOptions();
                    markerOptions.position(latLng);
                    mMap.addMarker(markerOptions);
                }
            });

            // Sleep so we let other UI actions happen in between the markers.
            try {
                Thread.sleep(5);
            } catch (InterruptedException e) {
                // Don't care
            }
        }

        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T02:50:49.447

氪是对的。为避免 UI 线程滞后，您一次不能放置太多标记。放置几个标记然后让 UI 线程做其他事情然后放置更多标记。

# javascript - 仅 Firefox 中的 Edge 动画故障

> ID：15538248
> 
> 赞同：0
> 
> 时间：2013-03-21T02:07:31.770
> 
> 标签：javascript, jquery, html, css, adobe-edge

我正在使用 adobe edge animate 创建这个网站： [http ://www.reveriesrefined.com/myftp/5/](http://www.reveriesrefined.com/myftp/5/)

它在 Windows 机器上运行良好，但我在 Mac 上开始进行一些更改，而 Firefox 遇到了一些问题。它与 safari 的预期完全一样，昨天它在所有浏览器上都运行良好。基本上，当页面加载并且 div 从中心的五边形后面移出时，它们的故障非常糟糕。不知道为什么，我尝试删除/更改动画的缓动，尝试删除 div 本身的不同属性，似乎无法弄清楚发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:33:31.037

我解决了这个问题，基本上我已经创建了一个 542px 宽和 63px 高的圆角矩形，但是在将其转换为符号后，我想将其调整为 255 宽和 55 高，而不是调整 div 内的大小符号，我调整了整个符号的大小。因此，发生的故障是 div 同时具有两种不同的大小，而在 Firefox 中，它同时显示了这两种大小。

# python - 列表上的选择性迭代

> ID：15538252
> 
> 赞同：1
> 
> 时间：2013-03-21T02:08:03.920
> 
> 标签：python

我有一个巨大的列表，如下所示：

```
[ '0', '21', '51', '67', '96', '102', '128', '130', '0', '11', '36', '53', '81', '86', '113', 116', '0', '21', '48', '64', '91', '95','125', '139', '166', '175', '200', '205'] 
```

我必须对列表的元素进行简单的减法，这样：

> //考虑2个变量a & b//
> 
> a 应该存储 0-21 之间的差异（应该是 21-0 以避免负值）

然后

> b 应该存储 21-51 之间的差异（应该是 51-21 以避免负值）

然后再一次

> a 应该存储 51-67 之间的差异（应该是 67-51 以避免负值）

接着

```
b = 67-96
a = 96-102
b = 102-128
a = 128-130 
```

`130`和之间不应有减法`0`。新的迭代应该从`0-11,11-36`等等开始，直到`0`遇到下一个。

我完全不知道如何进行这一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:32:55.170

您对问题的描述仍不清楚，据我了解，这可能是您要查找的内容：

```
li = [ 0, '21', '51', '67', '96', '102', '128', '130', '0', '11', '36', '53', '81', '86', '113', '116', '0', '21', '48', '64', '91', '95','125', '139', '166', '175', '200', 205]   

# Convert all items to integers for calculations
li = [int(x) for x in li]

for x, y in zip(li, li[1:]):
    if y != 0:
        a = abs(x - y)      
        print '|%3d - %3d| = %3d' % (x, y, a)
    else:
        print '' 
```

输出：

```
|  0 -  21| =  21
| 21 -  51| =  30
| 51 -  67| =  16
| 67 -  96| =  29
| 96 - 102| =   6
|102 - 128| =  26
|128 - 130| =   2

|  0 -  11| =  11
| 11 -  36| =  25
| 36 -  53| =  17
| 53 -  81| =  28
| 81 -  86| =   5
| 86 - 113| =  27
|113 - 116| =   3

|  0 -  21| =  21
| 21 -  48| =  27
| 48 -  64| =  16
| 64 -  91| =  27
| 91 -  95| =   4
| 95 - 125| =  30
|125 - 139| =  14
|139 - 166| =  27
|166 - 175| =   9
|175 - 200| =  25
|200 - 205| =   5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:44:23.950

只要列表包含偶数个元素，这将起作用：

```
# original list
l = ['0', '21', '51', '67', '96', '102', '128', '130']

# convert items in list to integers
l = map(lambda x: int(x), l)

# split the list in two, even indices in p, odd indices in q
p = l[::2]
q = l[1::2]

# print out the calculations
for n in range(len(p)):
    print 'abs(%s - %s) = %s' % (p[n], q[n], abs(p[n]-q[n])) 
```

它打印出来是这样的：

```
abs(0 - 21) = 21
abs(51 - 67) = 16
abs(96 - 102) = 6
abs(128 - 130) = 2 
```

如果您不知道切片副本在上述代码中的作用，请查看：

```
>>> l[::2]
['0', '51', '96', '128']
>>> l[1::2]
['21', '67', '102', '130'] 
```

语法是这样的`list_name[starting_point:ending_point:increment_by]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:43:33.037

```
li = [ 0, '21', '51', '67', '96', '102', '128', '130', '0', '11', '36', '53', '81', '86', '113', '116', '0', '21', '48', '64', '91', '95','125', '139', '166', '175', '200', 205]

li = [(int(li[i]),int(li[i+1])) for i in range( len( li ) - 1 ) if li[i+1] != '0']

for a, b in li:
    x = abs(a - b)
    print '|%3d - %3d| = %3d' % (a,b,x) 
```

# eclipse - 如何在 Eclipse Juno 中使用协作式实时编辑

> ID：15538253
> 
> 赞同：1
> 
> 时间：2013-03-21T02:08:05.493
> 
> 标签：eclipse

我已经安装了 ECF 3.6.0 插件并查看了不同的线程，但找不到答案。我阅读了有关可乐的信息，但即使在阅读了文档后我也无法设置它。有没有人知道我和我的搭档如何同时编辑同一个文件并实时查看彼此的变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T13:03:48.360

你试过Saros插件吗？以下是该插件的链接。

[Eclipse 的 Saros 插件](http://marketplace.eclipse.org/content/saros-distributed-collaborative-editing-and-pair-programming-0#.UqhhOtJgcm8)

希望这对您有所帮助。

# java - 将 ActionListener 添加到 JRadioButton 和 JComboBox

> ID：15538263
> 
> 赞同：1
> 
> 时间：2013-03-21T02:08:55.690
> 
> 标签：java, swing, jcombobox, jradiobutton, itemlistener

所以我在这里想要实现的是，如果第一个单选按钮和第一个组合框中的第一个选项被选中，那么我想显示该类别下的食物，如果它是第一个单选按钮和第一个组合框中的第二个选项然后是该类别下的其他一些食物。我让单选按钮部分工作正常，但无法获得下拉部分。rb1.isSelected() && cmbItems[0].isSelected() 行给了我错误。请帮助我克服错误。这是我的代码：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Tryout extends JFrame  implements ActionListener {

        private static final long serialVersionUID = 1L;

        private JTabbedPane tabbedPane = new JTabbedPane();
        private JPanel inputpanel;
        private JPanel searchpanel;
        public JButton submit;
        public JRadioButton rb1, rb2;
        public JComboBox <String> cmb;
        public String cmbItems [] ={"North Indian","South Indian","East Indian", "West Indian"};
        JFrame frame=new JFrame("Get selected JRadioButton");  

        public Tryout() {           
                inputpanel = createPage1();
                searchpanel = createPage2();
                tabbedPane.addTab("Input Form", inputpanel);
                tabbedPane.addTab("Search Form", searchpanel);
                this.add(tabbedPane, BorderLayout.CENTER);           
        }

        public JPanel createPage1() {           
            String cmbItems2 [] ={"European","Asian","American"};          
            JPanel panel = new JPanel();
            panel.setLayout(new GridBagLayout());
            GridBagConstraints c = new GridBagConstraints();
            //Column1
            c.anchor = GridBagConstraints.LINE_START;
            c.weightx = 0.5;
            c.weighty = 0.5;
            JLabel region = new JLabel("Enter Region");      
            c.gridx = 0;
            c.gridy = 0;
            panel.add(region, c);
            JLabel subregion = new JLabel("Enter Sub-Region");
            c.gridx = 0;
            c.gridy = 1;
            panel.add(subregion, c);
            //Column2
            c.anchor = GridBagConstraints.LINE_START;
            ButtonGroup bg = new ButtonGroup();
            rb1 = new JRadioButton("Indian"); 
            c.gridx = 1;
            c.gridy = 0;
            bg.add(rb1);
            panel.add(rb1, c);
            cmb = new JComboBox<String>(cmbItems);
            c.gridx = 1;
            c.gridy = 1;   
            panel.add(cmb, c);        
            //Column3
            c.anchor = GridBagConstraints.LINE_START;
            rb2 = new JRadioButton("International");
            c.gridx = 2;
            c.gridy = 0;           
            bg.add(rb2);
            panel.add(rb2, c);          
            JComboBox<String> cmb2 = new JComboBox<String>(cmbItems2);
            c.gridx = 2;
            c.gridy = 1;      
            cmb2.setEnabled(false);
            panel.add(cmb2, c); 
            submit = new JButton("Submit");
            c.weighty = 10;
            c.anchor = GridBagConstraints.FIRST_LINE_START;
            c.gridx = 1;
            c.gridy = 2;
            panel.add(submit, c);
            submit.addActionListener(this);           
            return panel;            
        }

        public void actionPerformed(ActionEvent e) {
            if(e.getSource()==submit) {
                if(rb1.isSelected() && cmbItems[0].isSelected()) {
                    JOptionPane.showMessageDialog(frame,"You select : "+rb1.getText());
                }
                else if(rb2.isSelected()) {
                    JOptionPane.showMessageDialog(frame,"You select : "+rb2.getText());
                }               
            }           
        }

        public JPanel createPage2() {           
                JPanel panel = new JPanel();
                panel.setLayout(new GridBagLayout());
                GridBagConstraints c = new GridBagConstraints();
                c.fill = GridBagConstraints.RELATIVE;
                JTextField field = new JTextField(20);
                panel.add(field);
                JButton search = new JButton("SEARCH");
                panel.add(search);
                return panel;
        }

        public static void main(String args[]) {
                SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                                Tryout ex = new Tryout();
                                ex.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                                ex.setSize(500,500);
                                ex.setVisible(true);
                        }
                });
        }       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:14:47.823

`cmbItems`是一个字符串数组，所以它自然不会知道它是否被“选中”。你想问组合框本身选择的项目是什么，所以你应该说

```
if(rb1.isSelected() && cmb.getSelectedIndex() == 0) {
    JOptionPane.showMessageDialog(frame,"You select : "+rb1.getText());
} 
```

# jquery - jquery减乘法

> ID：15538264
> 
> 赞同：0
> 
> 时间：2013-03-21T02:09:02.537
> 
> 标签：jquery, html, math

我创建了一个非常简单的收款系统，并且添加项目似乎工作得很好，但是当从订单中删除项目时，它并不完全奏效。

在这里加载了我的代码[http://jsfiddle.net/Unjustified/sVX2x/](http://jsfiddle.net/Unjustified/sVX2x/)

一旦我添加了一些选项，然后删除第一项，它会将总数设置为 0，并减去值 * 我最初添加它们的顺序。IE

```
 item 1 = £2
    item 2 = £3
    item 3 = £4

    Total = £9 
```

然后删除第 2 项，总数应为 6 英镑，但改为 3 英镑（项目价值乘以列表中的位置）

如果有人有任何想法，我将非常感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:17:09.487

您有用于删除逻辑的单击事件处理程序嵌套在单击处理程序中以进行添加。它应该是分开的。

此外，由于您在购买列表中动态添加和删除元素，因此您需要使用`on()`( [API Docs](http://api.jquery.com/on/) ) 来捕获 DOM 中的更改。

工作小提琴：

[http://jsfiddle.net/gx8PK/](http://jsfiddle.net/gx8PK/)

# javascript - 输出的 Javascript 问题

> ID：15538266
> 
> 赞同：0
> 
> 时间：2013-03-21T02:09:07.733
> 
> 标签：javascript

我在 js 中有一个程序应该检查问题的进位数，即 55+20 = 0 进位数和总值 = 75。检查答案有问题，我似乎无法弄清楚是什么这是。但是，当我使用这种方法时，它没有给出正确的输出，并且说每个答案都是错误的。

```
var topNumber = new Array();//top number
topNumber[1] = "35"; 

var bottomNumber = new Array();//bottom number
bottomNumber[1] = "20";

var answer = Array();//answer
answer[1] = "55"; 

var carryover = new Array();//carry over number
carryover[1] = "0"; 

//create arrays to store user information

var userCarry = [];

var userAsn = [];

//creates user values

var userCarry1 = "";

var userAsn1 ="";

//sets the number of questions to zero
var qnumber = 0;    
//creates a function to display the page number, math problem, and an alert to save the user name.
function nextQuestions() {
    //every time the user clicks on the button the number will increase and will display question number and it will be used to display the rest of the question information.
    qnumber = qnumber + 1;  
    document.getElementById('questionNumber').value = qnumber;
        //sets up question numbers with qnumber is equal to a specific question number.
    switch (qnumber) {
        case 1: 
        // question number and question
        document.getElementById('topQuestionNumber').value = topNumber[1];
        document.getElementById('bottomQuestionNumber').value = bottomNumber[1];
        //creates values to store the user information
        userCarry1 = document.getElementById('carryOverNumber').value;
        userAsn1 = document.getElementById('answerNumber').value;
        break;  

//creates a function that will check if the user value is equal to the answer

function checkAnswer() {
    if((answer[1] == userAsn1) && (userCarry1 == carryover[1])) {
        alert("Your answer is correct!" + userCarry1 + userAsn1);
    }
     if((answer[2] == userAsn2) && (userCarry2 == carryover[2])) {
        alert("Your answer is correct! "  + userCarry2 + " "+ userAsn2);
    }
     if((answer[3] == userAsn3) && (userCarry3 == carryover[3])) {
        alert("Your answer is correct! "  + userCarry3 + " "+ userAsn3);
    }
     if((answer[4] == userAsn4) && (userCarry4 == carryover[4])) {
        alert("Your answer is correct! "  + userCarry4 + " "+ userAsn4);
    }
     if((answer[5] == userAsn5) && (userCarry5 == carryover[5])) {
        alert("Your answer is correct! "  + userCarry5 + " "+ userAsn5);
    }
     if((answer[6] == userAsn6) && (userCarry6 == carryover[6])) {
        alert("Your answer is correct! "  + userCarry6 + " "+ userAsn6);
    }
     if((answer[7] == userAsn7) && (userCarry7 == carryover[7])) {
        alert("Your answer is correct! "  + userCarry7 + " "+ userAsn7);
    }
     if((answer[8] == userAsn8) && (userCarry8 == carryover[8])) {
        alert("Your answer is correct! "  + userCarry8 + " "+ userAsn8);
    }
     if((answer[9] == userAsn9) && (userCarry9 == carryover[9])) {
        alert("Your answer is correct! "  + userCarry9 + " "+ userAsn9);
    }
     if((answer[10] == userAsn10) && (userCarry10 == carryover[10])) {
        alert("Your answer is correct! "  + userCarry10 + " "+ userAsn10);
    }
    else {
        alert("Your answer is wrong.");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:19:01.917

我最好的猜测是你在搞乱变量类型

topNumber[1] = "35" 告诉程序这是一段字符串，而不是 int

我会尝试 topNumber[1] = 35; 和 parseInt() 用户输入可以安全比较

# android - 用 Looper.getMainLooper() 初始化的处理程序不响应消息回调

> ID：15538270
> 
> 赞同：6
> 
> 时间：2013-03-21T02:09:27.567
> 
> 标签：android, multithreading, handler, looper

我正在尝试实现从不同线程监听同一个 Looper 的处理程序。

下面我有两个处理程序，一个在主线程中创建，另一个在子线程中创建，但是两者都被初始化为在 Main Looper 上侦听。

```
private Handler mMain;
public static final ThreadPoolExecutor tpe =
        (ThreadPoolExecutor) Executors.newCachedThreadPool();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mMain = new Handler(Looper.getMainLooper()) {
        @Override
        public void handleMessage(Message msg) {
            Log.wtf("", "main:" + msg);
        }
    };

    tpe.execute(new Runnable() {
        private Handler tChild = new Handler(Looper.getMainLooper()) {
            @Override
            public void handleMessage(Message msg) {
                Log.wtf("", "child:" + msg);
            }
        };

        @Override
        public void run() {
            Log.wtf("", "send msg to main looper");
            tChild.sendEmptyMessage(100);
        }
    });
} 
```

但是当我发送如下消息时，只有子处理程序会打印消息。主处理程序没有收到消息。

```
03-20 22:02:26.754: A/(12857): send msg to main looper
03-20 22:02:26.847: A/(12857): child:{ what=100 when=-8ms } 
```

我究竟做错了什么？感谢您的阅读。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T02:31:00.690

每个`Handler`实例都控制`Message`目标，无法让它们共享，因此发送到 a 的每条消息或帖子`Handler`仅由该实例执行。

`Looper`指示将在**哪个线程**上执行发送的消息/可运行文件。在您的代码中，两个处理程序都将`handleMessage()`在主线程上执行，尽管是在单独的线程上创建的。`Looper`这就是您可以将实例传递给`Handler`... 如果您传递 no的真正原因`Looper`，**那么**将`Handler`在创建它的线程上执行代码（该线程也**必须**是一个`Looper`线程）。

此外，因此没有理由创建多个处理程序以这种方式发布数据。single`Handler`被设计为从多个线程发送消息，它们都在 a 中序列化`MessageQueue`并在所选`Looper`线程上执行。您可以直接`mMain`从后台线程发布以在该线程上执行代码。`Looper`在这种情况下，在该代码已经在主线程上传递是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:16:16.950

发送到 a 的消息`Handler`将仅由 that 处理`Handler`，即使它正在共享 a `Looper`。

埋在 Handler 的源代码中的是这一行

```
msg.target = this; 
```

这确保没有其他`Handler`人会碰它。

# css - 页面顶部的页脚渲染——Rails

> ID：15538271
> 
> 赞同：0
> 
> 时间：2013-03-21T02:09:29.533
> 
> 标签：css, ruby-on-rails, render

我有一个基于[Michael Hartl's tutorial](http://ruby.railstutorial.org)的网站，但不幸的是，我在渲染我的特定页面时遇到了问题。该页面名为 /games/new

这是代码`Games/new.html.erb`：

```
<h1>New game</h1>

<div class='div_left'>
    <h2>Custom Game</h2>
    <%= render 'fantasy' %>
</div>

<div class='div_right'>
    <h2>Upcoming Games</h2>
    <%= render 'real' %>
</div> 
```

这是代码`custom.css.scss`：

```
@import "bootstrap";

/* mixins, variables, etc. */

$grayMediumLight: #eaeaea;

@mixin box_sizing {
  -moz-box-sizing: border-box; 
  -webkit-box-sizing: border-box; 
  box-sizing: border-box;
}

/* universal */

p.big {
    font-size:200%;
    display:inline;
}

div.div_left {
    width:400px;
    float:left;
}

div.div_right {
    width:400px;
    float:right;
}

div.div_left_small {
    width:175px;
    float:left;
}

div.div_right_small {
    width:175px;
    float:right;
}

div.div_center {
    width:400px;
    float:right;
}

div.inline {
    display:inline
}

html {
  overflow-y: scroll;
}

body {
  padding-top: 60px;
}

section {
  overflow: auto;
}

textarea {
  resize: vertical;
}

.center {
  text-align: center;
  h1 {
    margin-bottom: 10px;
  }
}

/* typography */

h1, h2, h3, h4, h5, h6 {
  line-height: 1;
}

h1 {
  font-size: 3em;
  letter-spacing: -2px;
  margin-bottom: 30px;
  text-align: center;
}

h2 {
  font-size: 1.7em;
  letter-spacing: -1px;
  margin-bottom: 30px;
  text-align: center;
  font-weight: normal;
  color: $grayLight;
}

p {
  font-size: 1.1em;
  line-height: 1.7em;
}

/* header */

#logo {
  float: left;
  margin-right: 10px;
  font-size: 1.7em;
  color: white;
  text-transform: uppercase;
  letter-spacing: -1px;
  padding-top: 9px;
  font-weight: bold;
  line-height: 1;
  &:hover {
    color: white;
    text-decoration: none;
  }
}

/* footer */

footer {
  margin-top: 45px;
  padding-top: 5px;
  border-top: 1px solid $grayMediumLight;
  color: $grayLight;
  a {
    color: $gray;
    &:hover { 
      color: $grayDarker;
    }
  }  
  small { 
    float: left; 
  }
  ul {
    float: right;
    list-style: none;
    li {
      float: left;
      margin-left: 10px;
    }
  }
}

/* miscellaneous */

.debug_dump {
  clear: both;
  float: left;
  width: 100%;
  margin-top: 45px;
  @include box_sizing;
}

/* sidebar */

aside {
  section {
    padding: 10px 0;
    border-top: 1px solid $grayLighter;
    &:first-child {
      border: 0;
      padding-top: 0;
    }
    span {
      display: block;
      margin-bottom: 3px;
      line-height: 1;
    }
    h1 {
      font-size: 1.4em;
      text-align: left;
      letter-spacing: -1px;
      margin-bottom: 3px;
      margin-top: 0px;
    }
  }
}

.gravatar {
  float: left;
  margin-right: 10px;
}

.stats {
  overflow: auto;
  a {
    float: left;
    padding: 0 10px;
    border-left: 1px solid $grayLighter;
    color: gray;
    &:first-child {
      padding-left: 0;
      border: 0;
    }
    &:hover {
      text-decoration: none;
      color: $blue;
    }
  }
  strong {
    display: block;
  }
}

.user_avatars {
  overflow: auto;
  margin-top: 10px;
  .gravatar {
    margin: 1px 1px;
  }
}

/* forms */

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  @include box_sizing;
}

input {
  height: auto !important;
}

#error_explanation {
  color:#f00;
  ul {
    list-style: none;
    margin: 0 0 18px 0;
  }
}

.field_with_errors {
  @extend .control-group;
  @extend .error;
 }

 /* users index */

.users {
  list-style: none;
  margin: 0;
  li {
    overflow: auto;
    padding: 10px 0;
    border-top: 1px solid $grayLighter;
    &:last-child {
      border-bottom: 1px solid $grayLighter;
    }
  }
}

/* microposts */

.microposts {
  list-style: none;
  margin: 10px 0 0 0;

  li {
    padding: 10px 0;
    border-top: 1px solid #e8e8e8;
  }
}

.content {
  display: block;
}

.timestamp {
  color: $grayLight;
}

aside {
  textarea {
    height: 100px;
    margin-bottom: 5px;
  }
} 
```

这是代码`_fantasy.html.erb`：

```
<%= simple_form_for(@game) do |f| %>
    <div class='form-inputs'>
        <%= f.error_notification %>

        <% choices = Team.all.map { |team| team[:name] } %>

        <%= f.input :first_team_name, collection: choices, label: 'Team 1' %>
        <%= f.input :second_team_name, collection: choices, label: 'Team 2' %>

        <%= f.input :user_guess, collection: [ 1, 2 ],
                                 label_method: lambda { |obj| "Team #{ obj }"},
                                 value_method: lambda { |obj| obj },
                                 label: 'Who do you think will win?',
                                 as: :radio_buttons%>
        <%= f.input :game_type_id, :as => :hidden, :input_html => { :value => 1 } %>
        <br>
        <%= f.submit 'Simulate!', class: 'btn btn-large btn-primary'%>
    </div>
<% end %> 
```

这是 _real.html.erb 的代码：

```
<%= simple_form_for(@game) do |f| %>
    <div class='form-inputs'>
        <% reference_games = Game.where(game_type_id: 3).map {
            |game| [ "#{ game.first_team_name } vs #{ game.second_team_name }", game.date_played ] }    %>

        <%= f.input :team_names, collection: reference_games,
                         label_method: lambda { |obj| obj[0] },
                         value_method: lambda { |obj| "#{ obj[0] } vs #{ obj[1] }".gsub( ' vs ', ',' ) },
                         label: 'Choose a game' %>

        <%= f.input :user_guess, collection: [ 1, 2 ],
                  label_method: lambda { |obj| "Team #{ obj }"},
                  value_method: lambda { |obj| obj },
                  label: 'Who do you think will win?',
                  as: :radio_buttons%>
      <%= f.input :game_type_id, :as => :hidden, :input_html => { :value => 2 } %>
        <br>
        <%= f.submit 'Simulate!', class: 'btn btn-large btn-primary'%>
    </div>
<% end %> 
```

这是代码`application.html.erb`：

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="shortcut icon" href="/favicon.ico" />
    <!--#<title><%= full_title(yield(:title)) %></title>  #TODO: Make custom titles work-->
    <title>Shoulak Predictions</title>
    <%= stylesheet_link_tag    "application", media: "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
    <%= render 'layouts/shim' %>    
  </head>
  <body>
    <%= render 'layouts/header' %>
    <div class="container">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>"><%= value %></div>
      <% end %>
      <%= yield %>
      <%= render 'layouts/footer' %>
      <%= debug(params) if Rails.env.development? %>
    </div>
  </body>
</html> 
```

最后，这里是代码`_footer.html.erb`：

```
<footer class="footer">
    <nav>
        <ul>
            <li><%= link_to "About", about_path, class: "class1" %></li>
        <li><%= link_to "Contact", contact_path, class: "class1 " %></li>
    </ul>
    </nav>
</footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:13:37.627

将页脚渲染移到“容器”之外`div`

```
 </div>
  <%= render 'layouts/footer' %>
  <%= debug(params) if Rails.env.development? %>
</body> 
```

# bash - Bash here docs <<- 跳过前导空格

> ID：15538280
> 
> 赞同：2
> 
> 时间：2013-03-21T02:11:02.570
> 
> 标签：bash

我可以做这个：

```
declare foo -r -d '' <<- 'EOF'
->-> Sopra la panca
->-> la capra campa
EOF 
```

（其中`->`代表一个 TAB）

然后将忽略前导选项卡。

可`<<-`用于跳过/忽略前导`space`s，而不仅仅是`tab`s？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:43:42.267

引用 [格雷格的话](http://mywiki.wooledge.org/HereDocument)

```
在这种形式中，所有前导制表符（不是空格！）都将被删除。有
没有删除前导空格或前导制表符和空格的规定。（回想一下
Makefile 的语法限制，你会没事的。）

```

# vb.net-2010 - 索引超出范围。在 VB.NET 中必须为非负数

> ID：15538283
> 
> 赞同：0
> 
> 时间：2013-03-21T02:12:01.750
> 
> 标签：vb.net-2010

我是这里的新手，我遇到了一个关于（DataGridView 删除部分）无法自行解决的错误，所以请来这里寻求指导并帮助我......感谢您的帮助！

# 加载数据事件

```
 `Public Sub loadtoDGV()
        Dim sqlq As String = "SELECT * FROM chattbl"
        Dim sqlcmd As New SqlCommand
        Dim sqladpt As New SqlDataAdapter
        Dim tbl As New DataTable

        With sqlcmd
            .CommandText = sqlq
            .Connection = conn
        End With

        With sqladpt
            .SelectCommand = sqlcmd
            .Fill(tbl)
        End With

        DataGridView1.Rows.Clear()
        For i = 0 To tbl.Rows.Count - 1
            With DataGridView1
                .Rows.Add(tbl.Rows(i)("ChatConttentID"), tbl.Rows(i)("Title"),   tbl.Rows(i)("ChatContent"), tbl.Rows(i)("ChatDateTime"), tbl.Rows(i)("Username"))
            End With
        Next
        conn.Close()
    End Sub` 
```

# 发生删除部分错误

```
 `If conn.State = ConnectionState.Closed Then
        conn.Open()
    End If
    For i = 0 To DataGridView1.Rows.Count - 1
        Dim deletemore As Integer = DataGridView1.SelectedRows(i).Cells(0).Value <------{line occurred error}
        Dim sqlq As String = ("DELETE FROM chattbl WHERE ChatConttentID = " &         deletemore & "")
        Dim sqlcmd As New SqlCommand

        With sqlcmd
            .CommandText = sqlq
            .Connection = conn
            .ExecuteNonQuery()
        End With
    Next

    loadtoDGV()` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:19:45.397

因此，我假设您的应用程序是 Windows 窗体应用程序，并且您正在使用[此](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)控件...抱歉，如果此假设不正确。

您的错误可能是因为您用于编写 For 循环的逻辑：

```
For i = 0 To DataGridView1.Rows.Count - 1
    Dim deletemore As Integer = DataGridView1.SelectedRows(i).Cells(0).Value <------{line occurred error} 
```

您正在遍历 DataGridView 中的所有行，然后尝试将该索引从[SelectedRows](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx)集合中取出。

我认为，您的循环假设在很多时候都是不正确的，因为它假设 DataGridView 中的所有行都被选中（因为这是唯一一次当 DataGridView 中的项目数和DataGridView.SelectedRows 中的项目数将相等并使循环工作）。

您可能会更好地使用以下方法循环遍历选定的行：

```
Dim numSelectedRows = DataGridView1.SelectedRows.Count

For i = 0 to (numSelectedRows - 1)
     Dim deletemore As Integer = DataGridView1.SelectedRows(i).Cells(0).Value 
```

PS。[围绕控件的选择模式的SelectedRows](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx)属性有一些注意事项（请参阅链接中的“备注”部分）。我假设您正在遵循这些警告。

# python - 我可以从第二个线程添加 pygame 事件吗

> ID：15538287
> 
> 赞同：6
> 
> 时间：2013-03-21T02:12:27.053
> 
> 标签：python, thread-safety, pygame

好吧，我在各个地方都读到过，pygame 事件处理必须在主线程中完成。我想这样做，但我的问题是，我可以从不同的线程将事件添加到事件队列吗？

我想`pygame.event.post(myEvent)`从不同的线程调用，而不是在主循环中处理事件。这可能吗？

编辑：为了澄清，我想为异步网络 i/o 运行一个单独的线程。当有新消息到达时，线程会将一个事件放入事件队列中，以表明有事情要做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T20:41:25.077

是时候进行一些侦探工作了！

查看`event_post`in [event.c](https://bitbucket.org/pygame/pygame/src/d4452e3b1471604bb7e226b9606e8cb730e708e3/src/event.c?at=default)的源代码表明 C 函数使用 SDL call `SDL_PushEvent`，而没有自行检查线程安全性。但是，文档[`SDL_PushEvent`](http://sdl.beuc.net/sdl.wiki/SDL_PushEvent)说：

> 该函数是线程安全的，可以安全地从其他线程调用。

所以看起来它确实是线程安全的。

# c - 在 C 程序和 shell 脚本之间共享头文件

> ID：15538290
> 
> 赞同：2
> 
> 时间：2013-03-21T02:13:09.107
> 
> 标签：c, bash, shell, header-files, named-pipes

如何与 shell 脚本共享 C 头文件？

shell 脚本通过命名管道与 C 程序通信。让我们假设 C 头文件中定义的枚举 SAMPLE_ONE 由 C 程序写入管道。shell 脚本从管道中读取枚举值。有没有办法在 C 程序和 shell 脚本之间共享头文件 - 这样我只需要更新一次头文件，而最终不必在 shell 脚本中编写相同的头文件常量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:44:16.117

请参见以下示例：

```
$ cat foo.h
#define ENUM  enum
#define COMMA ,

ENUM foo_t
{
    FOO_VALUE1=11 COMMA
    FOO_VALUE2=22 COMMA
    FOO_VALUE3=33
}; 
```

在 C 文件中使用：

```
$ cat foo.c
#include <stdio.h>
#include "foo.h"

#define print_enum(x) printf("%s=%d\n", #x, x)

int main()
{
    enum foo_t foo = FOO_VALUE1;

    print_enum(FOO_VALUE1);
    print_enum(FOO_VALUE2);
    print_enum(FOO_VALUE3);

    return 0;
} 
```

要在 Shell 脚本中使用：

```
$ cat foo.sh
#!/bin/bash

shopt -s expand_aliases
alias ENUM='true'
alias COMMA=

source foo.h

enum_names=( ${!FOO_*} )
for name in ${enum_names[@]}; do
    echo $name=${!name}
done 
```

让我们测试一下：

```
$ gcc foo.c
$ ./a.out
FOO_VALUE1=11
FOO_VALUE2=22
FOO_VALUE3=33
$ bash foo.sh
FOO_VALUE1=11
FOO_VALUE2=22
FOO_VALUE3=33
$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T00:28:19.810

将配置数据写入单独的配置文件可能是更好的方法。例如，您可以使用“Java 属性”格式：

```
key=value
key2=value2 
```

使用 C 解析它应该不是很困难，并且用 shell 解析它是微不足道的（**source config.cfg**）。您还可以从此文件生成带有#defines 的头文件。

我的观点是，如果您需要找到一种通用格式作为不同系统的来源，您应该尝试使用最简单的格式。解析 C 预处理器指令绝对不是那么简单。虽然您可能会认为“ *#define PORT 1234* ”直接映射到属性格式中的“port=1234”，但您可能会发现一个“*#define PORT BASE_PORT+1*”，它不容易正确导出到带有简单脚本的外壳。

# php - 在应用程序后台运行的 PHP 脚本 (MYSQL)

> ID：15538291
> 
> 赞同：0
> 
> 时间：2013-03-21T02:13:14.437
> 
> 标签：php, mysql, database

我目前有一个库存控制系统，一切正常。（在 PHP 和 MYSQL 中）

我所做的是在数据库中设置了一个“minimum_on_hand”列，在需要订购更多之前说明该特定库存项目的最小数量。

一旦单个项目达到（组成）公司可以运营的最低数量，我希望它发出警报，然后遍历数据库，查看哪些库存项目也很低......并且接近它们的 minimum_on_hand数量。

然后，给用户一份库存不足的物品清单，供他们编制订单

我目前唯一的想法是每次加载新页面时调用一个脚本，但这会导致数据库上的数百次点击。

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:43:45.640

除了人们推荐的 cron 工作之外，如果由于某种原因无法使用 cron，我建议使用这种替代方法：

放置一个模糊的图像标签，1x1 像素，src 属性指向需要在后台运行的脚本，该脚本`<img src="/scripts/run-some-background-tasks.php" />`会更改库存商品的数量（例如“订单成功完成”页面）。当然，如果您不在乎是否有人会看到该后台脚本的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:27:03.847

1.  使用系统 cronjobs 每 XXX 分钟执行一次脚本。
2.  缓存脚本最后一次执行的时间。在下一次执行之前，检查最后一次执行的时间。

> ```
> if(time() - $last < XXX){
>     return;
> }else{
>     //what you want to do 
> } 
> ```

# wordpress - 如何从wordpress中的帖子标题转换为情绪？

> ID：15538292
> 
> 赞同：0
> 
> 时间：2013-03-21T02:13:19.003
> 
> 标签：wordpress

在内容编辑器 wordpress 中，我可以转换为情绪`:)`, `;)`, `:(`...

但是在标题中我无法转换为情绪，如何转换想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:34:20.027

您应该[`convert_smilies()`](http://codex.wordpress.org/Function_Reference/convert_smilies)在显示标题时使用该功能。

而不是使用`the_title()`，使用：

```
echo convert_smilies( get_the_title() ); 
```

# javascript - YouTube 视频无法在移动设备上加载（嵌入在灯箱中）

> ID：15538293
> 
> 赞同：1
> 
> 时间：2013-03-21T02:13:37.360
> 
> 标签：javascript, video, youtube

我嵌入了一个**YouTube 视频**，它在一个名为**VideoBox**的 Javascript 中打开。（有点像灯箱）

在我的网站上一切正常，但当我尝试在我的 iPhone 上打开它时就不那么好了。我怀疑这是我嵌入它的方式，但我只能找到一种**启用自动播放的**方式（因为我希望在单击链接时开始播放视频）。

**此外**，Videobox/lightbox 可以在我的手机上使用。它会打开一个带有我包含的标题的框，但视频没有加载。

这个脚本只使用链接，所以我没有使用 iFrame 的选项......我不认为。

**这是HTML：**

```
<a href="http://www.youtube.com/v/2sAnENc6ObI&autoplay=1" rel="vidbox" 
title="The Rainbox Connection">
<img src="playbtn.png" class="fakeplay" alt="Play Button">
The Rainbow Connection (Video)</a> 
```

我不认为 VideoBox 是问题，但以防万一……这里是 Javascript。

**视频盒：**

```
var Videobox = {

init: function (options) {
    // init default options
    this.options = Object.extend({
        resizeDuration: 400,    // Duration of height and width resizing (ms)
        initialWidth: 250,      // Initial width of the box (px)
        initialHeight: 250,     // Initial height of the box (px)
        defaultWidth: 625,      // Default width of the box (px)
        defaultHeight: 350, // Default height of the box (px)
        animateCaption: true,   // Enable/Disable caption animation
        flvplayer: 'swf/flvplayer.swf'
    }, options || {});

    this.anchors = [];
    $A($$('a')).each(function(el){
        if(el.rel && el.href && el.rel.test('^vidbox', 'i')) {
            el.addEvent('click', function (e) {
      e = new Event(e);
      e.stop();
      this.click(el);
            }.bind(this));
            this.anchors.push(el);
        }
}, this);

    this.overlay = new Element('div').setProperty('id', 'lbOverlay').injectInside(document.body);
    this.center = new Element('div').setProperty('id', 'lbCenter').setStyles({width: this.options.initialWidth+'px', height: this.options.initialHeight+'px', marginLeft: '-'+(this.options.initialWidth/2)+'px', display: 'none'}).injectInside(document.body);

    this.bottomContainer = new Element('div').setProperty('id', 'lbBottomContainer').setStyle('display', 'none').injectInside(document.body);
    this.bottom = new Element('div').setProperty('id', 'lbBottom').injectInside(this.bottomContainer);
    new Element('a').setProperties({id: 'lbCloseLink', href: '#'}).injectInside(this.bottom).onclick = this.overlay.onclick = this.close.bind(this);
    this.caption = new Element('div').setProperty('id', 'lbCaption').injectInside(this.bottom);
    this.number = new Element('div').setProperty('id', 'lbNumber').injectInside(this.bottom);
    new Element('div').setStyle('clear', 'both').injectInside(this.bottom);

    var nextEffect = this.nextEffect.bind(this);
    this.fx = {
        overlay: this.overlay.effect('opacity', {duration: 500}).hide(),
        center: this.center.effects({duration: 500, transition: Fx.Transitions.sineInOut, onComplete: nextEffect}),
        bottom: this.bottom.effect('margin-top', {duration: 400})
    };

},

click: function(link) {

        return this.open (link.href, link.title, link.rel);

},
open: function(sLinkHref, sLinkTitle, sLinkRel) {
    this.href = sLinkHref;
    this.title = sLinkTitle;
    this.rel = sLinkRel;
    this.position();
    this.setup();
    this.video(this.href);
    this.top = Window.getScrollTop() + (Window.getHeight() / 15);
    this.center.setStyles({top: this.top+'px', display: ''});
    this.fx.overlay.start(0.8);
    this.step = 1;
    this.center.setStyle('background','#fff url(loading.gif) no-repeat center');
    this.caption.innerHTML = this.title;
    this.fx.center.start({'height': [this.options.contentsHeight]});
},

setup: function(){
    var aDim = this.rel.match(/[0-9]+/g);
    this.options.contentsWidth = (aDim && (aDim[0] > 0)) ? aDim[0] : this.options.defaultWidth;
    this.options.contentsHeight = (aDim && (aDim[1] > 0)) ? aDim[1] : this.options.defaultHeight;

},

position: function(){
this.overlay.setStyles({'top': window.getScrollTop()+'px', 'height': window.getHeight()+'px'});
},

video: function(sLinkHref){
    if (sLinkHref.match(/youtube\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.youtube.com/v/"+this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/metacafe\.com\/watch/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('/');
        this.videoID = videoId[4];
        this.so = new SWFObject("http://www.metacafe.com/fplayer/"+this.videoID+"/.swf", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/google\.com\/videoplay/i)) {
  this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('=');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://video.google.com/googleplayer.swf?docId="+this.videoID+"&hl=en", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/ifilm\.com\/video/i)) {
      this.flash = true;
        var hRef = sLinkHref;
        var videoId = hRef.split('video/');
        this.videoID = videoId[1];
        this.so = new SWFObject("http://www.ifilm.com/efp", "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
        this.so.addVariable("flvbaseclip", this.videoID+"&");
        this.so.addParam("wmode", "transparent");
    }
    else if (sLinkHref.match(/\.mov/i)) {
      this.flash = false;
        if (navigator.plugins && navigator.plugins.length) {
      this.other ='<object id="qtboxMovie" type="video/quicktime" codebase="http://www.apple.com/qtactivex/qtplugin.cab" data="'+sLinkHref+'" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  } else {
    this.other = '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" width="'+this.options.contentsWidth+'" height="'+this.options.contentsHeight+'" id="qtboxMovie"><param name="src" value="'+sLinkHref+'" /><param name="scale" value="aspect" /><param name="controller" value="true" /><param name="autoplay" value="true" /><param name="bgcolor" value="#000000" /><param name="enablejavascript" value="true" /></object>';
  }
    }
    else if (sLinkHref.match(/\.wmv/i) || sLinkHref.match(/\.asx/i)) {
    this.flash = false;
     this.other = '<object NAME="Player" WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" type="application/x-oleobject" CLASSID="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6"><param NAME="URL" VALUE="'+sLinkHref+'"><param><param NAME="AUTOSTART" VALUE="false"></param><param name="showControls" value="true"></param><embed WIDTH="'+this.options.contentsWidth+'" HEIGHT="'+this.options.contentsHeight+'" align="left" hspace="0" SRC="'+sLinkHref+'" TYPE="application/x-oleobject" AUTOSTART="false"></embed></object>'
    }
    else if (sLinkHref.match(/\.flv/i)) {
     this.flash = true;
     this.so = new SWFObject(this.options.flvplayer+"?file="+sLinkHref, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0", "#000");
    }
    else {
      this.flash = true;
        this.videoID = sLinkHref;
        this.so = new SWFObject(this.videoID, "flvvideo", this.options.contentsWidth, this.options.contentsHeight, "0");
    }
},

nextEffect: function(){
    switch (this.step++){
    case 1:
        this.fx.center.start({'width': [this.options.contentsWidth], 'marginLeft': [this.options.contentsWidth/-2]});
        break;
        this.step++;
    case 2:
        this.center.setStyle('background','#fff');
        this.flash ? this.so.write(this.center) : this.center.setHTML(this.other) ;
        this.bottomContainer.setStyles({top: (this.top + this.center.clientHeight)+'px', height: '0px', marginLeft: this.center.style.marginLeft, width: this.options.contentsWidth+'px',display: ''});
        if (this.options.animateCaption){
            this.fx.bottom.set(-this.bottom.offsetHeight);
            this.bottomContainer.style.height = '';
            this.fx.bottom.start(0);
            break;
        }
        this.bottomContainer.style.height = '';
        this.step++;
    }
},

close: function(){
    this.fx.overlay.start(0);
    this.center.style.display = this.bottomContainer.style.display = 'none';
    this.center.innerHTML = '';
    return false;
}};window.addEvent('domready', Videobox.init.bind(Videobox)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:41:58.467

如果您希望视频在 iPhone 上播放，您必须使用[YouTube 的 IFrame API 。](https://developers.google.com/youtube/iframe_api_reference)其他用于嵌入视频的 API 不支持 HTML5 视频格式，使用 Flash 嵌入视频，iOS 不支持。IFrame API 可以与您的示例一起使用，因为它仍然是一个 Javascript API，可以在您打开灯箱时进行初始化和调用。如果视口的宽度小于视口的宽度（即用户在移动设备上），我什至不会费心打开灯箱。

或者，您应该能够以这种格式链接到您的视频，以强制其使用 HTML5 播放器：`youtube.com/embed/2sAnENc6ObI?html5=1`

**编辑**：

使用上面的 URL，如果您修改插件并将以下`else if`块添加到`video`函数中，则可以使用 VideoBox 插件嵌入它：

```
else if (sLinkHref.match(/youtube\.com\/embed/i)) {
    this.flash = false;
    this.other = "<iframe type='text/html' width='640' height='385' src='" + sLinkHref + "' frameborder='0'></iframe>"; 
} 
```

# list - 从 Prolog 中的列表中获取特定元素

> ID：15538297
> 
> 赞同：1
> 
> 时间：2013-03-21T02:13:46.973
> 
> 标签：list, prolog

我一直在阅读有关 Prolog 列表以及如何从列表中获取特定元素的教程，并且遇到了这个示例：

```
 ?-  [_,X,_,Y|_]  =  [[],  dead(z),  [2,  [b,  c]],  [],  Z]. 

   X  =  dead(z) 
   Y  =  [] 
   Z  =  _9593 
```

我不明白的是，他们从哪里获得变量 Z 的值 _9593？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:55:42.237

我很担心@Templar 的解释，虽然技术细节是正确的，但我担心术语是否正确。

这里没有分配。只有统一。我们在这里要求 Prolog 做的是`[_, X, _, Y|_]`与`[[], dead(z), [2, [b, c]], [], Z]`. *哪*一侧有值或变量无关紧要。与其想象 Prolog 在无法继续时从左侧走，然后从右侧走，不如想象将列表压缩在一起可能更安全。

首先，Prolog 尝试将 _ 与 [] 统一起来。这很容易成功，因为 _ 表示“我不在乎”。这个统一没有建立任何绑定。

接下来，Prolog 尝试将 X 与`dead(z)`. 这很容易成功，因为 X 是未绑定的，这建立了一个绑定，`X = dead(z)`. 因为这个变量不以下划线开头，Prolog 认为你会对这个绑定感兴趣，所以它会报告给你。

接下来，Prolog 尝试将 _ 与`[2, [b, c]]`. 同样，这在没有建立绑定的情况下很容易成功。

接下来，Prolog 尝试将 Y 与 [] 统一，再次成功，但这次建立了它报告给您的绑定 Y = []。

在下一步之前，您必须进行符号更改。在 Prolog 中，`[X|T]`是以 X 开头并以 T 继续的列表。因此，`[X|_]`将 X 与列表的第一个元素统一并丢弃尾部。所以在这种情况下，`|_]`本质上说，这个列表可能还有更多，但我并不在乎特别想知道它是什么。（顺便说一句，空列表会匹配。）

接下来，Prolog 尝试将匿名尾部`|_`与 Z 统一起来。这又一次成功了，因为 Z 没有被绑定。Prolog 创建了一个匿名变量并将其绑定到 Z，因此这建立了一个绑定。

因此，与@Templar 提供的信息相同，但词汇略有不同，供您娱乐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T19:18:17.317

```
Z  =  _9593 
```

这只是一个自动生成的唯一变量名。规则和事实中的变量必须（一致地）重命名，以确保唯一性。如果我们`Z`在两个不相关的查询中使用，这两个变量是不相关的，所以必须有不同的名称。

您可以通过更简单的目标看到相同的效果，

```
1 ?- Z=Z.

Z = _G213 

Yes
2 ?- write(Z).
_G236

Z = _G236 
```

`213`,`9593`只是特定 Prolog 实现维护的一些内部计数器的反映。前导下划线通常表示它是一些一次性变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:14:34.297

下划线表示我们不关心变量和 int 你的例​​子

```
[_,X,_,Y|_]  =  [[],  dead(z),  [2,  [b,  c]],  [],  Z]. 
```

我们将第一个下划线分配给`[]`，然后`X`分配给`dead(z)`第二个下划线`[2\. [b.c]]`，然后`Y`分配给`[]`，然后尾部是下划线，这是我们不在乎的，但是因为你`Z`在右手边有变量，它分配`_`给`Z`和 Prolog 方式这样做是`_something`在你的情况下引入任意变量，从`_9593`. 毕竟，您不应该担心这一点，因为您不在乎下划线是什么。

# github - 当我在 GitHub 上移动一个 repo 时，如何转发旧位置？

> ID：15538300
> 
> 赞同：1
> 
> 时间：2013-03-21T02:14:05.723
> 
> 标签：github

随着越来越多的人参与到该项目中，我将我的存储库从个人帐户转移到了组织。但如果人们有旧 URL，我希望他们能够轻松找到新位置。我怎样才能做到这一点？

我知道 GitHub 不支持转发。我想用旧名称创建一个微不足道的回购，并`README.md`指向新位置，但我想知道这是否会给任何分叉旧位置的人带来麻烦？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:14:09.083

如果 SHA1 在您移动的存储库中未更改，他们可以简单地再次分叉，并查看他们是否可以继续将他们的提交从现有的本地克隆推送到新的分叉（只需删除他们的旧分叉并再次分叉：如果名称是不变，他们甚至不必用 a 来更改他们 fork 的远程`git remote set-url`url

但是如果 SHA1 不同，那么分叉旧位置的人将不得不将他们的本地提交报告到新的本地 repo，这将是新组织 repo 的新分支的克隆。

# ios - iOS 应用内购买 (IAP) 通过 Apple 托管内容

> ID：15538301
> 
> 赞同：1
> 
> 时间：2013-03-21T02:14:05.910
> 
> 标签：ios, upload, hosting, in-app-purchase

我有一个使用 IAP 的应用程序，并且已经通过了几个版本。前几天，我不小心点击了用苹果托管内容的按钮，我发现我无法撤消这个。更糟糕的是，除非我上传内容，否则我无法在沙盒环境中测试 IAP。我记得有一个幸运的人在这里发帖说他有这种情况，苹果在他写了苹果之后就为他取消了这个选项。然而，我没有这样的运气。我写信并打电话给苹果，要求取消该标志。经过 3 周的等待和少量电话后，我得到的答案是标记托管内容选项是不可逆的。我想我必须走其他路，但我有疑问和不确定性，沿着我能做的步骤。

1、我打算用IAP上传一个1行的文本文件。这样好吗？

2、这是我第一次制作.pkg文件。我下载了 PackageMaker，并将 1 行文件放到它的窗口中并制作了一个 pkg，还按照安装指南安装了它 --- 但我找不到它的安装位置（我选择了 Mac HD ......）。问题是：这样好吗？一个文本文件变成一个安装包？

3、我猜在正常情况下，当用户购买有内容的IAP时，应用程序应该处理下载的packagecontent.pkg并打开并安装它，对吧？就我而言，我只是忽略了下载步骤和内容。无需将代码添加到我当前的 IAP 处理脚本中，可以吗？

4，我将使用 Application Loader 为给定的 IAP 加载包。我也是第一次。在我真正这样做之前，我可以学习和避免任何经常犯的错误吗？

非常感谢您的输入！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T04:11:35.197

我现在也在添加一些内容托管的 IAP。我可以告诉你到目前为止我学到了什么：

首先，是的，您应该能够包含要包含在 IAP 包中的任何文件（包括 1 行文本文件）。

我使用 Xcode 创建了我的 IAP 包文件（包含文本和图像文件）并将包上传到 iTunes Connect。查看这个非常有用的教程，了解如何执行此操作：[http](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases) ://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases 。

购买后，您确实需要自己处理托管内容的下载。

祝你好运！

# c++ - 如何在 C++(MFC) 中开发 Maya 视口扩展

> ID：15538310
> 
> 赞同：-4
> 
> 时间：2013-03-21T02:15:05.117
> 
> 标签：c++, mfc, viewport, maya

我需要用（MFC）在C++中开发一个Maya Viewport Extension，还需要控制视图样式（如顶视图、左视图等）。我可以使用Maya SDK来存档以及如何制作吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:51:43.403

我不完全确定您所说的“视口扩展”是什么意思。我猜您正在尝试编写具有您自己的视口类型（通常称为“模型视图”）
的 Maya 插件。

MCF 与此无关。
您可以使用 Maya MEL/Python 命令来创建 Maya 窗口、面板和其他 UI 元素。
*（如果有一个 hack 可以让 Maya 与您自己创建的窗口一起工作，我不知道）*。

您可以通过创建两个类在 Maya 中开发自定义视口：
视口或模型视图，以及“**模型编辑器命令**”。

## 模型视图

一个是您的视口类，我们称之为“MyViewport”。
它必须继承“MPx3dModelView”。
通常，您会将相机与视口相关联。这让您可以控制从哪里看到场景。您可以将多个摄像机连接到您的视口（多通道显示，例如立体 3D），或者根本不连接（但是您必须自己设置所有渲染参数，这可能很乏味）。

您从该类继承的（回调）函数允许您设置视口的详细信息。

请参阅 MPx3dModelView 上的 Maya 文档以了解如何使用它。
[http://download.autodesk.com/us/maya/2010help/API/class_m_px3d_model_view.html](http://download.autodesk.com/us/maya/2010help/API/class_m_px3d_model_view.html)

## 模型编辑器命令

您需要的另一个类是视口命令。
当有人试图创建你的视口时，这就是被调用的东西。
它必须继承“MPxModelEditorCommand”。
它最重要的特性是它可以创建模型编辑器类的实例。

有关如何使用它的信息，请参阅 MPxModelEditorCommand 上的 Maya 文档：http:
[//download.autodesk.com/us/maya/2011help/API/class_m_px_model_editor_command.html](http://download.autodesk.com/us/maya/2011help/API/class_m_px_model_editor_command.html)

## 使用 Maya 插件注册视口命令

为了能够创建您的视口，您必须使用插件注册您的模型编辑器命令。
在您的 initializePlugin 函数中（您使用插件导出的函数）

```
 MStatus initializePlugin( MObject obj )

    {
        MFnPlugin plugin( obj, PLUGIN_COMPANY, "1.0", "Any");
        plugin.registerModelEditorCommand(MyModelViewCmd::commandName, MyModelViewCmd::creator, MyModelViewCmd::createModelView);
    } 
```

## 编写创建视口的脚本

最后，您在 Maya 中使用 MEL 或 Python 脚本来创建您的用户界面。
在最简单的设置中，您只需创建一个窗口，然后调用模型编辑器命令在此窗口中创建自定义视口。

```
 window MyWindow;
    paneLayout MyWindowPane;
    MyModelView MyModelView1; 
```

# python - 匹配的查询不存在 Python Django

> ID：15538313
> 
> 赞同：0
> 
> 时间：2013-03-21T02:15:23.583
> 
> 标签：python, django

我在 Windows Vista 上使用 Python 2.7 在 Django 1.4.3 中编程，制作一个提供产品的网站。所以我的`/productos`子页面中列出了各种产品。现在我正在尝试显示`/producto/#`包含列出产品的页面的页面。这是 my `urls.py`，它就像我的页面的索引：

```
from django.conf.urls.defaults import patterns, url

urlpatterns = patterns('demo.apps.home.views',
        url(r'^$','index_view', name = 'vista_principal'),
        url(r'^about/$','about_view', name = 'vista_about'),
        url(r'^productos/$','productos_view', name = 'vista_productos'),
        url(r'^producto/(?P<id_prod>.*)/$', 'singleProduct_view', 
            name = 'vista_single_producto'),
        url(r'^contacto/$','contacto_view', name = 'vista_contacto'),
        url(r'^login/$', 'login_view', name = 'vista_login'),
        url(r'^logout/$', 'logout_view', name = 'vista_logout'),
) 
```

我还有一个`singleProduct_view`功能`views.py`可以检索该产品并将其提供给我的网站。

```
def singleProduct_view(request, id_prod):
        prod = producto.objects.get(id = id_prod)
        ctx = {'producto':prod}
        return render_to_reponse('home/SingleProducto.html', ctx, 
                                  context_instance = RequestContext(request)) 
```

但是，当我键入`/producto/2', it gave me`producto 匹配查询不存在` 错误。似乎是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:16:43.263

那么问题很可能是您正在使用 unicode 字符串查询 Integerfield，但是按照建议更改 url 可能无法帮助您摆脱错误。因为您仍然会以字符串形式获取参数。

但是，您应该将参数 id_prod 转换为 int 并确保您在数据库中确实有一个 id = 2 的实体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:29:22.873

我建议更改您的产品页面的网址，如下所示

```
url(r'^producto/(?P<id_prod>\d+)/$', 'singleProduct_view', 
        name = 'vista_single_producto') 
```

您的正则表达式 .* 可能与字符串匹配，因此 singleProduct_view 中的 id_prod 实际上是字符串而不是数字

** 编辑 **

然后在您的视图中，您需要将 id_prod 转换为整数

```
def singleProduct_view(request, id_prod):
        prod = producto.objects.get(id = int(id_prod))
        ctx = {'producto':prod}
        return render_to_reponse('home/SingleProducto.html', ctx, 
                                  context_instance = RequestContext(request)) 
```

您还可以利用 get_object_or_404 来确保您的对象也存在于数据库中。那会改变你的看法

```
from django.shortcuts import render, get_object_or_404

def singleProduct_view(request, id_prod):
        prod = get_object_or_404( producto, id = int(id_prod) )
        ctx = {'producto':prod}
        return render_to_reponse('home/SingleProducto.html', ctx, 
                                  context_instance = RequestContext(request)) 
```

# c# - 是否可以从 wcf 服务或桌面应用程序完全访问 sql 成员资格提供程序？

> ID：15538318
> 
> 赞同：0
> 
> 时间：2013-03-21T02:16:45.013
> 
> 标签：c#, asp.net, asp.net-mvc, wcf, membership-provider

我正在创建一个 WCF 服务，它使用 asp.net SQL 成员资格提供程序来验证用户。我知道可以毫无问题地对用户进行身份验证，但是如果我想允许用户注册或更改他们的密码呢？我能否访问提供会员提供程序功能的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:34:39.760

是的，您只需确保您设置了配置文件以允许这样做。然后只需创建你的方法来做你需要的。[成员资格的 Web.config 设置](http://msdn.microsoft.com/en-us/library/ms731049.aspx)

```
public string ChangePassword(string NewPassword)
{
    MembershipUser u = Membership.GetUser();

    if (u.ChangePassword(u.ResetPassword(), NewPassword))
    {
          return "Password changed.";
    }
} 
```

# oauth-2.0 - Google oAuth v2 - 用户个人资料 - 缺少国家/地区参数

> ID：15538319
> 
> 赞同：1
> 
> 时间：2013-03-21T02:16:49.237
> 
> 标签：oauth-2.0, google-oauth

我想获取文档 [1] 中指定的用户国家信息。我尝试使用 Google API Explorer 和示例，但仍然无法获取国家信息。我什至尝试更新测试帐户的个人资料信息。

[1] [https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

[2] [https://developers.google.com/apis-explorer/#p/oauth2/v2/oauth2.userinfo.get?_h=15&](https://developers.google.com/apis-explorer/#p/oauth2/v2/oauth2.userinfo.get?_h=15&)

Google API 中的字段编辑器也没有列出*国家*/地区的参数。是否有一些任何人都知道的无证方式。假设用户将为他们的个人资料提供对客户端应用程序的完整访问权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T01:14:06.560

恐怕文档不一致。

在 userinfo.profile 范围的描述中，我们确实将“国家”列为用户授权的基本配置文件信息的一部分。但是，如文档后面所述，提供了区域设置信息。

文档将很快更新，以避免进一步混淆。

# java - 如何使用 Array 或 ArrayList 中的值加载 JComboBox？

> ID：15538324
> 
> 赞同：-1
> 
> 时间：2013-03-21T02:17:36.413
> 
> 标签：java, arrays, swing, jcombobox

我需要将以下数组放入 JComboBox 中，然后在单击“提交”按钮时存储所选值。

```
 listOfDepartments = new String[5];
    listOfDepartments[0] = "Mens Clothing";
    listOfDepartments[1] = "Womens Clothing";
    listOfDepartments[2] = "Childrens Clothing";
    listOfDepartments[3] = "Electronics";
    listOfDepartments[4] = "Toys";

    //Department: ComboBox that loads from array

    // Store values
    JButton buttonSubmit = new JButton();
    buttonSubmit.setText("Submit");
    container.add(buttonSubmit);

     buttonSubmit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent evt) {
        //store value from combobox in a variable
        }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T02:19:19.263

首先，创建一个模型...

```
DefaultComboBoxModel model = new DefaultComboBoxModel(listOfDepartments);
comboBox.setModel(model); 
```

其次，在`actionPerformed`引发事件时获取选定的值......

```
String value = (String)comboBox.getSelectedItem(); 
```

查看[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)了解更多详细信息。

# ruby-on-rails - Rails：将变量从类方法传递到实例方法

> ID：15538325
> 
> 赞同：2
> 
> 时间：2013-03-21T02:17:44.197
> 
> 标签：ruby-on-rails, variables, methods

我有几个模型有共同的担忧。每个模型都传入一个哈希，这是为了处理它们使用关注点的方式上的微小差异。我通过一个类方法传递哈希，如下所示：

```
add_update_to :group, :user 
```

关注的完整代码是：

```
module Updateable
  extend ActiveSupport::Concern

  attr_accessor :streams

  module ClassMethods
    def add_updates_to(*streams)
      @streams = streams
    end
  end

  module InstanceMethods
    def update_streams
      @streams.collect{|stream| self.public_send(stream)}
    end
  end

  included do
    has_one :update, :as => :updatable

    after_create :create_update_and_history
  end

  private
    def create_update_and_history
      update = self.create_update(:user_id => User.current.id)
      self.update_streams.each do |stream|
        stream.histories.create(:update_id => update.id)
      end
    end
end 
```

大部分代码都有效，但我无法将哈希从类传递到实例。目前，我试图通过创建一个虚拟属性，将哈希传递给属性，然后在实例中检索它来实现这种效果。这不仅感觉很hacky，而且不起作用。我假设它不起作用，因为它`@streams`是一个实例变量，所以类方法`add_update_to`实际上不能设置它？

无论如何，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:42:19.043

您可能可以在这里使用类变量，但是由于它们不可预测的性质，它们在 Ruby 社区中受到了相当的谴责。要记住的是，Ruby 中的类实际上也是类的实例，并且可以拥有自己的实例变量，这些变量只能由它们自己访问，而不能由它们的实例访问（如果这很清楚的话）。

在这种情况下，您定义的是*行为*，而不是*数据*，所以我认为实例变量和类变量都不合适。相反，我认为最好的办法是直接在类方法中定义实例方法，如下所示：

```
module Updateable
  extend ActiveSupport::Concern

  module ClassMethods
    def add_updates_to(*streams)
      define_method :update_streams do
        streams.collect {|stream| public_send(stream) }
      end
    end
  end
end 
```

顺便说一句，这里没有涉及哈希，所以我不确定你指的是什么。`*streams`将您的参数收集到一个数组中。

# vhdl - 没有 clk 的 Vhdl

> ID：15538335
> 
> 赞同：2
> 
> 时间：2013-03-21T02:19:15.853
> 
> 标签：vhdl, clock, fpga, fsm

我的 vhdl 代码中有一个时钟，但我不使用它，只是我的过程仅取决于一个组件完成并输出输出时的握手，此输出在我的 FSM 的灵敏度列表中，然后成为输入下一个组件，当然它的输出也在我的 FSM 的敏感度列表中（以便知道组件何时完成计算）......等等。这种方法错了吗？它可以在模拟和路由后模拟中工作，但会收到这样的警告：警告：HOLD High VIOLATION ON I WITH RESPECT TO CLK; 和警告：HOLD LVIOLATION ON I WITH RESPECT TO CLK；

这个警告不重要还是我的代码会损坏我的 fpga，因为它不依赖于时钟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:44:56.787

您收到的警告是时间违规。你得到这些是因为工具检测到你的设计不遵守内部原语的必要时序限制。

例如，查找表的输入（它是 FPGA 内部的主要构建模块之一）需要保持特定时间以使输出稳定。当您的整个时序仅依赖于组件本身的延迟和延迟，并且在完全异步的基础上切换时，这很难保证。

根据您的实际设计（主要是它的大小和复杂性），我敢打赌，一旦您将其放入 FPGA 中，您最终会遇到很多非常难以调试的错误。使用时钟你会轻松很多很多。这将使您能够清楚地了解信号何时到达何处，并允许您使用内部工具来检查您的时间。您还会发现与其他设备的接口更加容易，并且您的系统将不太容易受到嘈杂输入的影响。

所以总而言之，使用时钟。您（可能）不会因为不这样做而损坏您的 FPGA，但是时钟可以让您免于大量麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:46:41.710

您的代码很可能不会损坏您的 FPGA，因为它不依赖于时钟。但是，对于综合，您应该始终使用注册（时钟）逻辑。如果不使用时钟，您的设计将由于时序/延迟/路由/扇出/...而无法控制...这将使您的 FSM 在合成时表现“神秘”（即使它在模拟中工作）。在 google 的帮助下，你会发现很多优秀的 FSM 实现风格的例子（搜索*Moore*或*Mealy* FSM）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T16:34:51.923

一定要用时钟。整个设计中只有一个时钟。这是最简单的方法——工具很好地支持这种设计风格。您通常可以摆脱单一的时序约束，尤其是当您的输入速度很慢且与同一时钟同步时。

当您获得了以这种方式进行设计的经验后，您可以跳出这种方式，但在了解跨时钟域和异步信号的陷阱的同时，准备好进行更多分析、时序约束和潜在的构建迭代。

# python - 尝试将文件作为存档打开，否则作为常规文件读取

> ID：15538338
> 
> 赞同：2
> 
> 时间：2013-03-21T02:19:43.060
> 
> 标签：python, file, archive, bzip2

我正在尝试处理文件列表，其中每个文件可能是常规文本文件或 bz2 存档。

如何最有效地使用 try-except 块来尝试以适当的格式打开每个文件？我宁愿不检查文件的扩展名，因为这不能总是依赖（并且不是很 EAFP）。

目前我正在做：

```
def data_generator(*corpora):
    def parse_lines(fobj):
        for line in fobj:
            # Do lots of processing.
            # ...
            # Many lines here omitted.
            yield ('lots', 'of', 'data')

    for corpus in corpora:
        try:
            with bz2.BZ2File(corpus, mode='r') as f:
                for data in parse_lines(f):
                    yield data
        except IOError:
            with codecs.open(corpus, encoding='utf-8') as f:
                for data in parse_lines(f):
                    yield data 
```

我认为重复的`for data in parse_lines(f): ...`代码看起来是多余的，但我想不出办法摆脱它。有什么办法可以减少以前的，还是有另一种方法可以尝试“智能打开”文件？

### 编辑：可选跟进

什么是扩大检查格式数量的合适方法？例如，7zip 程序允许您右键单击任何文件并尝试将其作为存档打开（7zip 支持的任何文件）。使用当前的 try-except 块策略，即使只使用了几种格式，您似乎也会很快开始嵌套在块中，例如：

```
try:
    f = ...
except IOError:
    try:
        f = ...
    except IOError:
        try:
            ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:30:53.007

如果它真的只是让你担心的重复循环，你可以移出`f`try-catch 块的范围，然后在一切都说完之后放一个循环的副本：

```
try:
    f = bz2.BZ2File(corpus, mode='r')
except IOError:
    f = codecs.open(corpus, encoding='utf-8')
for data in parse_lines(f):
    yield data
f.close() 
```

虽然我只考虑打开文件一次，检查 BZ2 标头（字符`BZ`作为前两个字节），并使用它来决定是继续以纯文本形式读取它，还是将数据传递到`bz2.BZ2Decompressor`实例中。

# java - 在 Twilio 发起的呼叫期间发送短信或呼叫其他人

> ID：15538339
> 
> 赞同：1
> 
> 时间：2013-03-21T02:19:44.243
> 
> 标签：java, twilio

是否可以执行以下操作？我试过了，失败了！

我使用 Twilio 从一些 Java 代码发起调用，并且我正在使用 TwiML。然后我想启动另一个操作，例如发送 SMS、拨打电话或重定向到另一个 servlet。我无法让这些工作中的任何一个工作，并且想知道是否是因为 Twilio 正在发起呼叫，而不是用户拨打我的 Twilo 号码？希望我只是愚蠢！这是我在 url 文件中尝试过的（实际数字替换为 xxxx

**尝试发送短信***

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- page located at http://example.com/voicemail_record.xml -->
<Response>
    <Say>
        Hi John, Are you alright?
        If you would like me to get a carer, please wait.
        Or if you are alright, just hang up.  
        <Pause length="6"/>

    </Say>
    <Sms from="+1747999xxxx" to="+6422671xxxx">The king stay the king.</Sms>

    <Say>
        Okay, I have asked your carer to contact you

    </Say>
</Response> 
```

* ***或尝试拨打号码

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- page located at http://example.com/voicemail_record.xml -->
<Response>
    <Dial>
        <Number>64 7 856 xxxx</Number>
    </Dial>
<Say>Goodbye</Say>
  </Response> 
```

或尝试重定向

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- page located at http://example.com/voicemail_record.xml -->
<Response>
    <Gather method="POST" numDigits="5" action="https://myappengineapp.appspot.com/secure/twilio">
        <Say>Please confirm your SMS subscriptiong by pressing 1.</Say>
    </Gather>
</Response> 
```

****这是 Java 代码 - 我没有使用 Twilio 辅助 API 库，因为它在 Google App Engine 上不起作用*** ** *** *****

 **```
package testing;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.logging.Logger;

import nz.co.assistedfreedom.cron.GAEJCronServlet;

import org.apache.commons.codec.binary.Base64;

public class TestTwilioCall {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Map<String, String> vars = new HashMap<String, String>();
        x
        vars.put("To", "+647856xxxx");
        vars.put("From", "+1747999xxxx");

        vars.put("Url", "http://www.xxx.com/assistedliving/redirect1");
        "https://myappengineapp.appspot.com/secure/twilio");

        String accountSid = "*********secret*********";
        String authToken = "*********secret*********";
        makeCall(vars, accountSid, authToken);

    }

public static void makeCall(Map<String,String> vars, String accountSid, String authToken){

        try {

            String encoded = "";
            if(vars!=null){
                for(String key: vars.keySet()){
                    try {
                        encoded += "&"+key+"="+ URLEncoder.encode(vars.get(key),"UTF-8");
                    } catch (UnsupportedEncodingException e) {
                        e.printStackTrace();
                    }
                }
                encoded =encoded.substring(1);
            }           

            URL url = new URL("https://api.twilio.com/2010-04-01/Accounts/" + accountSid + "/Calls");       

            HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();

             String userpass = accountSid+":"+authToken;
                String encodeuserpass = new String(Base64.encodeBase64(userpass.getBytes()));
                                httpURLConnection.setRequestProperty ("Authorization", "Basic " + encodeuserpass);

            httpURLConnection.setDoOutput(true);
            httpURLConnection.setRequestMethod("POST");         

            OutputStreamWriter out = new OutputStreamWriter(httpURLConnection.getOutputStream());
            out.write(encoded);
            out.close();

            BufferedReader in = null;
            try {
                if(httpURLConnection.getInputStream()!=null){
                    in = new BufferedReader(
                            new InputStreamReader(
                                    httpURLConnection.getInputStream()));
                } 
            } catch(IOException e){
                e.printStackTrace();
                if(httpURLConnection.getErrorStream()!=null){
                    in = new BufferedReader(
                            new InputStreamReader(
                                    httpURLConnection.getErrorStream()));
                }
            }

            if(in==null) {
                System.out.println("Unable to read response from server");
            } 

            StringBuffer decodedString = new StringBuffer();
            String line;
            while ((line = in.readLine()) != null) {
                decodedString.append(line);
            }
            in.close();

            // get result code
            int responseCode = httpURLConnection.getResponseCode();
            System.out.println("response code is " + responseCode);

            } catch (Exception e) {
                  final Logger log2 = Logger.getLogger(GAEJCronServlet.class.getName());
                //  log2.log(Level.SEVERE, e.getMessage());
                e.printStackTrace();
            }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T09:20:29.357

在使用 TwiML 响应一个调用时，您可以通过 REST API 发起一个新调用。

看看这个：[REST API：拨打电话](http://www.twilio.com/docs/api/rest/making-calls)**

# python - python将静态文本与变量连接起来

> ID：15538340
> 
> 赞同：1
> 
> 时间：2013-03-21T02:19:44.850
> 
> 标签：python

我在尝试将静态文本与变量连接时遇到问题。变量打印没有问题，但是当我尝试向其中添加静态文本时，我没有得到任何输出。这是我到目前为止所拥有的，有什么想法可以解决这个问题吗？

```
for tweet in status:
    singletweet = 'URL' + tweet.GetId()
    print singletweet 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:41:19.210

说什么`print type(tweet.GetId())`？我不确定你为什么没有得到回溯 - 也许更高级别正在捕获它并将其丢弃。

如果它不是字符串，则必须将其转换为

```
singletweet = 'URL' + str(tweet.GetId()) 
```

或者

```
singletweet = 'URL%s'%tweet.GetId()  # For Python2.5 or older 
```

或者

```
singletweet = 'URL{id}'.format(id=tweet.GetId())  # For Python2.6 or newer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:03:28.957

尝试将连接的第二部分转换为字符串：

```
singleTweet = 'URL' + str(tweet.GetID()) 
```

# java - 分析/过滤所有变量而不声明每个变量？

> ID：15538349
> 
> 赞同：0
> 
> 时间：2013-03-21T02:21:08.810
> 
> 标签：java, filter, filtering

假设您有 70 个独立的 int 变量，并且您想分析所有这些变量并将任何一个等于 0 的值设置为 1，或者另一个数字。

除了为每个变量写 70 个 if else 语句，你能只写一个吗？

有没有办法做这样的事情：

```
if("anyInt"==0){
"thatInt" = 1;} 
```

?

（应该提到我不知道什么是“收藏”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:30:11.657

使用`int[]`Then 使用 for 循环遍历它们

```
int[] nums = new int[70];
//put all your numbers in the array, i.e. nums[0] = 5;
for(int i = 0; i < nums.length; i++){
    if(nums[i] == 0){
        //Do whatever to the number
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:42:30.497

如果您需要所有这些值的名称，请将它们放在 Map（这是一个集合）中：

```
Map<String, Integer> myMap = new HashMap<String, Integer>();

myMap.put("varname1",1); 
myMap.put("varname2",0);
myMap.put("varname3",0);
myMap.put("varname4",2);

for (Map.Entry e : myMap.entrySet())
    if (e.getValue()==0) e.setValue(null); 
```

您将需要导入集合（即 import java.util.*;）。

整数值在 int 和 Integer 之间自动装箱和拆箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:28:19.693

在不了解您的代码的任何其他内容的情况下，我会说您应该将变量放在 int 数组中。

然后，您将能够遍历数组并且只有一个 if 语句。

# php - 发现 PHP mySQL 语法错误

> ID：15538351
> 
> 赞同：0
> 
> 时间：2013-03-21T02:21:19.857
> 
> 标签：php, mysql

我在第 50 行收到一个错误，提示有意外的 ';' 在我的代码中。

```
if(mysql_num_rows($result) > 0) {
    mysqli_query($con, "UPDATE COOL_USERS SET COUNT = COUNT + 1
                WHERE USERNAME = '" .mysql_real_escape_string($user). "'";
} 
```

第 50 行是 WHERE USERNAME... 行。谁能发现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:22:17.467

你`)`不见了`mysqli_query`

```
if(mysql_num_rows($result) > 0) {
    mysqli_query($con, "UPDATE COOL_USERS SET COUNT = COUNT + 1 WHERE USERNAME = '" .mysql_real_escape_string($user). "'");
} 
```

# highcharts - 带梯度图带的 Highchart 量规

> ID：15538353
> 
> 赞同：1
> 
> 时间：2013-03-21T02:21:50.697
> 
> 标签：highcharts

我正在尝试使用 Highcharts 仪表。有没有办法将 plotband 设置为线性渐变？如果我的仪表的值介于 0-100 之间，我希望绘图带从 0 处的红色变为 50 处的黄色，再到 100 处的绿色。

我认为我可以为每个停止点生成单独的 plotband 部分，1-100 但如果有一种方法可以设置一个线性宏大，那就更干净了。有人知道方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:49:27.103

对的，这是可能的。尝试这样的事情：

```
yAxis: {
        min: 0,
        max: 100,
        plotBands: [{
            color: {
                linearGradient:  [300, 300, 0, 0],
                stops: [
                    [0, 'rgb(255, 255, 255)'],
                    [1, 'rgb(150, 200, 155)']
                ]
            },
            from: 0,
            to: 100
        }],
    }, 
```

[http://jsfiddle.net/fsQZ7/](http://jsfiddle.net/fsQZ7/)

通过仔细选择颜色、线性渐变和从/到，您应该能够组合多个绘图带来做您想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-28T09:43:45.187

阅读“线性渐变”

[http://www.highcharts.com/docs/chart-design-and-style/colors](http://www.highcharts.com/docs/chart-design-and-style/colors)

示例：从黄色到绿色到红色：

```
plotBands: [{
    from: 0,
    to: 29,
    color: '#DDDF0D' // yellow
},{
    from: 29,
    to: 40,
    color: {
        linearGradient:  { x1: 0, x2: 0, y1: 0, y2: 1 },
        stops: [
            [0, '#55BF3B'], //green
            [1, '#DDDF0D'] //yellow
        ]
    }
}, {
    from: 40,
    to: 51,
    color: {
        linearGradient:  { x1: 0, x2: 0, y1: 0, y2: 1 },
        stops: [
            [0, '#55BF3B'], //green
            [1, '#DF5353'] //red
        ]
    }
}, {
    from: 51,
    to: 80,
    color: '#DF5353' //red
}] 
```

# python - 在python中获取所有可能的单字节

> ID：15538354
> 
> 赞同：3
> 
> 时间：2013-03-21T02:21:50.980
> 
> 标签：python, byte, combinations

我正在尝试生成所有可能的字节来测试机器学习算法（8-3-8 壁画网络编码器）。有没有办法在没有 8 个循环的情况下在 python 中做到这一点？

排列有帮助吗？

我更喜欢一种优雅的方式来做到这一点，但我会尽我所能。

所需的输出：

```
[0,0,0,0,0,0,0,0]
[0,0,0,0,0,0,0,1]
[0,0,0,0,0,0,1,0]
[0,0,0,0,0,0,1,1]
[0,0,0,0,0,1,0,0]
[0,0,0,0,0,1,0,1]
.
.
.
[1,1,1,1,1,1,1,1] 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T02:29:15.400

是的，有[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
import itertools

itertools.product([0, 1], repeat=8)
>>> list(itertools.product([0, 1], repeat=8))
[(0, 0, 0, 0, 0, 0, 0, 0),
 (0, 0, 0, 0, 0, 0, 0, 1), 
```

[...]

```
 (1, 1, 1, 1, 1, 1, 1, 0),
 (1, 1, 1, 1, 1, 1, 1, 1)] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T02:34:28.153

```
[[x>>b&1 for b in range(8)] for x in range(256)] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T02:28:08.023

您可以遍历数字，然后转换为二进制：

```
[bin(x)[2:] for x in range(256)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T03:21:39.753

如果你碰巧已经在使用 numpy ......

```
In [48]: import numpy as np

In [49]: nbits = 4

In [50]: np.sign(np.bitwise_and(2 ** np.arange(nbits), np.arange(2 ** nbits).reshape(-1, 1)))
Out[50]: 
array([[0, 0, 0, 0],
       [1, 0, 0, 0],
       [0, 1, 0, 0],
       [1, 1, 0, 0],
       [0, 0, 1, 0],
       [1, 0, 1, 0],
       [0, 1, 1, 0],
       [1, 1, 1, 0],
       [0, 0, 0, 1],
       [1, 0, 0, 1],
       [0, 1, 0, 1],
       [1, 1, 0, 1],
       [0, 0, 1, 1],
       [1, 0, 1, 1],
       [0, 1, 1, 1],
       [1, 1, 1, 1]]) 
```

# jsf-2 - jsf Web 应用程序中的 Log4j 配置

> ID：15538359
> 
> 赞同：0
> 
> 时间：2013-03-21T02:22:12.600
> 
> 标签：jsf-2, log4j

当我在本地机器（windows）中部署 wep 应用程序时，以下配置有效

```
public void contextInitialized(ServletContextEvent sce) {
    Logger logger = null;
    ServletContext servletContext = sce.getServletContext();
    String prefix = servletContext.getRealPath("/");
    String log4jFile = servletContext.getInitParameter("log4j");       
    if (log4jFile != null) {
        DOMConfigurator.configure(prefix + log4jFile);
        logger = LogManager.getLogger(StartupListener.class.getName());
        logger.info("LOG4J loaded successfully: " + log4jFile);
    }
}

<context-param>
    <param-name>log4j</param-name>
    <param-value>WEB-INF/classes/com/domain/resources/log4j.xml</param-value>
</context-param>
<listener>
    <listener-class>com.domain.util.StartupListener</listener-class>
</listener> 
```

但是在 Linux 中安装 Web 应用程序时，我收到以下错误消息：

```
log4j:ERROR Could not parse file [nullWEB-INF/classes/com/domain/resources/log4j.xml].
 java.io.FileNotFoundException: /app/home/wdmt3/AdminServer/nullWEB-INF/classes/com/domain/resources/log4j.xml (No such file or directory) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:25:46.607

```
<context-param>
    <param-name>log4j</param-name>
    <param-value>/WEB-INF/classes/com/domain/resources/log4j.xml</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:34:34.957

**问题**：

*   *servletContext.getRealPath*返回 null 并且您的日志文件路径变为

    ```
     nullWEB-INF/classes/com/domain/resources/log4j.xml 
    ```

无法加载此文件，log4j 只会抛出您看到的错误消息。

*   那么为什么*servletContext.getRealPath*返回 null 呢？

[ServletContext.getRealPath(String path)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)状态的 API 文档：

> 如果 servlet 容器无法将给定的虚拟路径转换为真实路径，则此方法返回 null。

不同的容器可能有完全不同的行为。

**解决方案**：

*   尝试使用 spring mvc 的[解决方案](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-web/3.2.0.RELEASE/org/springframework/web/util/Log4jConfigListener.java#Log4jConfigListener)并确保 log4jFile 以“/”开头：

    ```
    String log4jFile = servletContext.getInitParameter("log4j"); 
    String fullPath = servletContext.getRealPath(log4jFile); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T15:43:30.740

该问题通过正确配置 weblogic 服务器以检索路径（域 -> Web 应用程序 -> 已启用存档真实路径）解决

# php - 使用 ？and : 与 { 和 } 相比的运算符

> ID：15538360
> 
> 赞同：-2
> 
> 时间：2013-03-21T02:22:14.943
> 
> 标签：php

我在堆栈溢出的许多情况下都看到过，我看到人们使用包含以下内容的示例：

```
$Var = isset($_SESSION['Key'])? $_SESSION['Key']: null; 
```

实际的结构和表示是什么？`if`与简单的和`else`语句相比，使用这些运算符是否有任何服务器方面的性能改进？还是这通常取决于个人编程偏好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:25:44.050

它只是为了产生更短的代码。它相当于：

```
if (someCondition) // do if true
else // do otherwise 
```

或为您的代码...

```
if ($_SESSION['Key']) $Var = $_SESSION['Key'];
else $Var = null; 
```

# c++ - 编译器可以删除“memset”函数调用吗？

> ID：15538366
> 
> 赞同：21
> 
> 时间：2013-03-21T02:23:00.073
> 
> 标签：c++, c, memory

[我在这里](http://www.viva64.com/en/b/0178/)读过，如果编译器`memset`知道传递的内存缓冲区不再使用，它​​可以自由地删除调用。这怎么可能？在我看来（从核心语言的角度来看）`memset`只是一个常规函数，编译器无权假设它内部发生的任何事情都没有副作用。

在[链接的文章中](http://www.viva64.com/en/d/0208/)，他们展示了 Visual C++ 10 如何删除`memset`. 我知道 Microsoft 编译器在标准合规性方面并不领先，所以我问 - 是根据标准，还是只是 msvc-ism？如果符合标准，请详细说明；）

**编辑：** @Cubbi

以下代码：

```
void testIt(){
    char foo[1234];
    for (int i=0; i<1233; i++){
        foo[i] = rand()%('Z'-'A'+1)+'A';
    }
    foo[1233]=0;
    printf(foo);
    memset(foo, 0, 1234);
} 
```

在 mingw 下编译，行：

```
g++ -c -O2 -frtti -fexceptions -mthreads -Wall -DUNICODE -o main.o main.cpp
g++ -Wl,-s -Wl,-subsystem,console -mthreads -o main.exe main.o
objdump -d -M intel -S main.exe > dump.asm 
```

给出输出：

```
 4013b0:    55                      push   ebp
 4013b1:    89 e5                   mov    ebp,esp
 4013b3:    57                      push   edi
 4013b4:    56                      push   esi
 4013b5:    53                      push   ebx
 4013b6:    81 ec fc 04 00 00       sub    esp,0x4fc
 4013bc:    31 db                   xor    ebx,ebx
 4013be:    8d b5 16 fb ff ff       lea    esi,[ebp-0x4ea]
 4013c4:    bf 1a 00 00 00          mov    edi,0x1a
 4013c9:    8d 76 00                lea    esi,[esi+0x0]
 4013cc:    e8 6f 02 00 00          call   0x401640
 4013d1:    99                      cdq    
 4013d2:    f7 ff                   idiv   edi
 4013d4:    83 c2 41                add    edx,0x41
 4013d7:    88 14 1e                mov    BYTE PTR [esi+ebx*1],dl
 4013da:    43                      inc    ebx
 4013db:    81 fb d1 04 00 00       cmp    ebx,0x4d1
 4013e1:    75 e9                   jne    0x4013cc
 4013e3:    c6 45 e7 00             mov    BYTE PTR [ebp-0x19],0x0
 4013e7:    89 34 24                mov    DWORD PTR [esp],esi
 4013ea:    e8 59 02 00 00          call   0x401648
 4013ef:    81 c4 fc 04 00 00       add    esp,0x4fc
 4013f5:    5b                      pop    ebx
 4013f6:    5e                      pop    esi
 4013f7:    5f                      pop    edi
 4013f8:    c9                      leave  
 4013f9:    c3                      ret 
```

在 4013ea 行有 memset 调用，所以 mingw 没有删除它。由于 mingw 在 Windows 皮肤中确实是 GCC，我想 GCC 也是这样做的——我会在重新启动到 linux 时检查它。

仍然无法找到这样的编译器？

编辑2：

我刚刚发现了 GCC 的`__attribute__ ((pure))`. 所以并不是编译器知道 memset 的一些特殊之处并忽略它，只是它的标题中允许使用它 - 使用它的程序员也应该看到它；）我的 mingw 在`memset`声明中没有这个属性，因此它没有从无论如何组装 - 正如我所期望的那样。我将不得不对此进行调查。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T02:40:02.623

“编译器无权假设它内部发生的任何事情都没有副作用。”

这是正确的。但是如果编译器实际上知道它内部*实际*发生了什么并且可以确定它确实*没有*副作用，那么就不需要假设了。

这就是几乎所有编译器优化的工作方式。代码显示“X”。编译器确定如果“Y”为真，那么它可以将代码“X”替换为代码“Z”并且不会有可检测的差异。它确定“Y”为真，然后将“X”替换为“Z”。

例如：

```
void func()
{
  int j = 2;
  foo();
  if (j == 2) bar();
   else baz();
} 
```

编译器可以将其优化为`foo(); bar();`. 编译器可以看到`foo`不能合法地修改`j`. 如果`foo()`以某种方式神奇地找出`j`堆栈上的位置并对其进行修改，那么优化将改变代码的行为，但这是程序员使用“魔术”的错。

```
void func()
{
  int j = 2;
  foo(&j);
  if (j == 2) bar();
   else baz();
} 
```

现在它不能因为`foo`可以合法地修改`j`没有任何魔法的值。（假设编译器无法查看内部`foo`，在某些情况下可以。）

如果您执行“魔术”，那么编译器可以进行优化以破坏您的代码。遵守规则，不要使用魔法。

在您链接到的示例中，代码依赖于编译器，他们将一个特定的值放入一个永远不会访问并立即不存在的变量中。编译器不需要做任何对代码操作没有影响的事情。

可能影响代码的唯一方法是它是否偷看堆栈的未分配部分或依赖于堆栈上具有先前具有的值的新分配。要求编译器这样做会使大量优化变得不可能，包括用寄存器替换局部变量。

# ruby-on-rails - 在 database.yml 中使用多个用户在 Rails 中设置 postgresql 开发？

> ID：15538374
> 
> 赞同：3
> 
> 时间：2013-03-21T02:24:13.177
> 
> 标签：ruby-on-rails

我正在将我的 SQL 迁移到 Postgresql，因为我想在与我的生产环境相同的环境中进行开发。

我安装了 Postgres，并且能够设置我的数据库 yml 文件，这样就可以正常`rake db:create:all`工作了。

但是在我推送之前，我意识到postgresql数据库的用户名和密码只能在我的电脑上使用。即我在我的计算机上创建了登录角色。当我的朋友也在开发应用程序时，拉代码时，他不会在我的计算机上拥有我创建的用户名和密码。

他是否也应该创建相同的登录角色？或者有没有办法将用户名/密码留空，以便开发的每个人都可以访问应用程序？更重要的是，对于这种情况，最佳做法是什么？

我在windows上开发，他在mac上。

我的 database.yml：用户名和密码遗漏了。

```
development:
  adapter: postgresql
  encoding: unicode
  database: volatility_development
  pool: 5
  timeout: 5000
  host: localhost

test:
  adapter: postgresql
  encoding: unicode
  database: volatility_test
  pool: 5
  timeout: 5000
  host: localhost

production:
  adapter: postgresql
  encoding: unicode
  database: volatility_production
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:57:27.117

一种可能性是使用 erb 和环境变量的组合，例如：

```
development:
  username: <%= ENV['USERNAME'] %>
  password: <%= ENV['PASSWORD'] %>
  adapter: postgresql
  encoding: unicode
  database: volatility_development
  pool: 5
  timeout: 5000
  host: localhost 
```

那么您可以执行以下任一操作：

1.  像这样启动你的服务器：`USERNAME=bob PASSWORD=secret rails s`
2.  将以下内容添加到您的**.bashrc**

    ```
    export USERNAME=bob
    export PASSWORD=secret 
    ```

# c++ - 如何使用 boost 程序选项库来解析具有重复部分的配置文件？

> ID：15538375
> 
> 赞同：1
> 
> 时间：2013-03-21T02:24:16.493
> 
> 标签：c++, boost, boost-program-options

如何解析这样的文件，尤其是在“设备”部分？此外，boost 是否处理输入流，或者是否已由其他代码处理？

```
[Configuration]
IPAddress=192.168.1.1
Device Port=12345
Management Port = 54321

[Devices]
main server DEADBEEF 0
sales FEEDBEEF 1
marketing DEADDEED  2 
```

我需要设备下的所有三列，它们是描述、MAC 地址和注册号。

这篇文章似乎很接近，但我想用一个文件来做到这一点： [使用 Boost 的 program_options 处理复杂选项](https://stackoverflow.com/questions/2935587/handle-complex-options-with-boosts-program-options)

我想我可以像这样构造设备：

```
[Device]
description='main server'
mac_address=DEADBEEF
register=0

[Device]
description-...
mac_address=...
register=... 
```

# html - CSS：试图一个接一个地进入 div

> ID：15538381
> 
> 赞同：-1
> 
> 时间：2013-03-21T02:24:55.320
> 
> 标签：html, css, twitter-bootstrap

第一个 div 是导航栏，我在`twitter-bootstrap`. 它有`90px height`.
其余高度将由另一个具有图像背景的 div 获取。这是第一个导航栏 div 的代码：

```
<div id="firstDiv" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <a class="brand" href="./index.php">Home</a>
    </div>
  </div>
 <div id="secondDiv" class="invite-bg">
<div class="row-fluid">
  <div class="span6">
      Fluid 6
      <div class="row-fluid">
        <div class="span6">Fluid 6</div>
        <div class="span6">Fluid 6</div>
      </div>
  </div>
</div> 
```

**第一个div CSS：**

```
.navbar {
  *position: relative;
  *z-index: 2;
  margin-bottom: 20px;
  overflow: visible;
}

.navbar-inner {
  min-height: 5.7em; /*change*/
  padding-right: 20px;
  padding-left: 20px;
  background-color: #fafafa;
} 
```

**第二个div CSS：**

```
div.invite-bg {
    background-image:url('../img/b1g.jpg');
    margin:0 auto;
    width: 100%;
    height: 70%;
    position: absolute;
} 
```

我面临以下问题：

1.  如何在不使用导航栏的情况下放置第二个 div `<br/>`？
2.  第二个 Div 与第一个 Div 重叠。我想将它们与高度 30% 和 70% 分开。
3.  应该选择什么大小的背景才能完美地适合第二个 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:07:15.427

```
div.invite-bg {
    background-image:url('../img/b1g.jpg');
    margin:0 auto;
    width: 100%;
    height: 70%;
    position: absolute;
    top: 30%;/*moves the div down 30% from the top of the screen*/
} 
```

添加的`top: 30%;`属性应该适用于我认为您要问的内容。

# c++ - 从字符串中读取（可能使用数组？）C++

> ID：15538382
> 
> 赞同：0
> 
> 时间：2013-03-21T02:25:08.653
> 
> 标签：c++

我正在尝试在这里编写基本上从字符串读取的 alil 函数。它每三个字符读取一次，并使用前置条件（if 语句）对其进行评估。如果满足条件，它将用新的三个字母替换这三个字母。然后它将输出新字符串。

我尝试编写代码，但似乎无法正确逻辑。程序运行，但它没有打印出任何东西。不要介意函数名称和不准确之处。我只是在做一个示例函数来测试它。

```
string amino_acids(string line)
{
    string acid;
    string acids;
    string newline;
    for( int i= 0; i < line.length(); i++)
    {
        acid = line[i];
    }
    for (int i = 0; i < 3; i++)
    {
        acids = acid[i];
        if(acids == "GUU")
        {
            acids = "ZAP";  
        }
        newline = acids;
    }
    cout << "Acids: " <<newline <<endl;
    return newline;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:32:03.533

`std::string`使用运算符索引 a会`[]`产生 a `char`，而对于它恰好是`operator=`字符串的重载。

即使您按照我认为您的意图循环（正如对问题的评论所提到的，您可能不是），因为酸（取单个字符的值）永远不会等于您的三个字符串重新比较它。因此，不会执行替换。

做你想做的事，试试这样的事情：

```
for (int i = 0; i + 3 < line.length(); i += 3) // counting by 3 until end of line
{
    if (line.substr(i, 3) == "GUU")            // if the substring matches
    {
        line.assign("ZAP", i, 3);              // overwrite it with new substring
    }
}
return line; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:34:48.060

```
for( int i= 0; i < line.length(); i++)
    acid = line[i]; 
```

假设行包含“abcd”，此循环将执行以下操作：

```
acid = 'a';
acid = 'b';
acid = 'c';
acid = 'd'; 
```

只有最后的分配有任何持久的影响。如果您实际上需要将三个字符从 line 转换为 acid - 您可能希望使用`+=`将字符添加到`acid`中，而不是`=`. 但是，如果你像这样遍历所有行，你最终会做`acid = line;`. 我假设您想要更多类似的东西`acid = line.substr(0, 3)`？

```
for (int i = 0; i < 3; i++)
{
     acids = acid[i]; 
```

这将崩溃。 `acid`绝对是单个字符串，并且您正在索引第二次`acid[1]`和`acid[2]`第三次迭代。在学习 C++ 时，您可能应该使用`.at(i)`which 在您尝试使用无效索引时会引发异常 - 您可以捕获异常并且至少有一些问题的迹象。照原样，这是未定义的行为。

要使用 at，您需要一个`try`/`catch`块...基本形式是：

```
int main()
try
{
    ...your code in here...
    some_string.at(i);
}
catch (const std::exception& e)
{
    std::cerr << "caught exception: " << e.what() << '\n';
} 
```

更一般地说，尝试在`std::cout`整个代码中添加一些语句，以便您知道变量实际具有的值......您很容易看到它们不是您所期望的。或者，使用交互式调试器并观察每个语句执行的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:42:03.380

从您的描述中阅读，您想要这样的东西

```
//note below does not compile, its just psuedo-code

string amino_acid(const string& sequence){
  string result = sequence; //make copy of original sequence
  For i = 0 to sequence.length - 3 
    string next3Seq = sequence(i,3); //grab next 3 character from current index
    If next3Seq == 'GUU' //if the next next three sequence is 'GUU'
      then result.replace(i,3,'ZAP'); //replace 'GUU' with 'ZAP'
    EndIf
  EndFor
  return result;   
} 
```

您可以将其用作编码的开始。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T02:43:57.443

根据我对你的问题的理解。我写了一些代码。请看下面

```
string acids;
string newLine;
int limit=1;
for(int i=0;i<line.length();i++)
{
    acids=acids+line[i];
    if(limit==3)//Every 3 characters
    {
      if(acids == "GUU")
        {
            acids = "ZAP";  
        }       
        limit=1;
        acids=""
        newline=newline+acids;
    }
limit++;
    return newline;
} 
```

# c# - 我的 ASP.NET Web 应用程序中 web.config 文件的 system.web 部分中的调试参数

> ID：15538390
> 
> 赞同：0
> 
> 时间：2013-03-21T02:26:03.487
> 
> 标签：c#, asp.net, debugging

我正在尝试查找有关`debug`参数在我的 Web 应用程序的 web.config 文件的这一行中的作用的一些信息：

```
<system.web>
    <compilation targetFramework="4.0" debug="true"/> 
```

有人可以解释吗？我是否需要将其保留在生产产品中？出于某种原因，当我发布 Web 应用程序时，该行保留在我的 web.config 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:36:14.903

它确定是否为已编译的程序集生成调试信息。IIS 自动编译内容，因此如果您更改页面文件，您的更改会自动生效。有问题的标签告诉 IIS 如何编译它。

# javascript - 使第一个链接处于活动状态 Javascript

> ID：15538395
> 
> 赞同：1
> 
> 时间：2013-03-21T02:26:50.417
> 
> 标签：javascript

我有这个 javascript 代码，我想让第一个链接（选项卡）处于活动状态，这样当有人访问该网站时可以看到它处于活动状态。同样，当单击下一个选项卡/链接时，第一个（活动选项卡/链接）必须将自身转换为普通选项卡/链接（非活动），依此类推！

这是Javascript：

```
<script type="text/javascript">
    function forumhome_tabs_switch(switch_id){
        document.getElementById('forumhome_tabs_switch_content').innerHTML =
        document.getElementById(switch_id).innerHTML;
    }
</script> 
```

这是 HTML 代码：

```
<td style="cursor:pointer;" onclick="javascript: forumhome_tabs_switch('forumhome_tabs_$forum[forumid]'); return false;">
    <a href="#" tabindex="2" onclick="javascript: forumhome_tabs_switch('forumhome_tabs_$forum[forumid]'); return false;">$forum[title]</a>  
</td> 
```

它不是这样的：

```
<li><a href="#">1</li> 
<li><a href="#">2</li> 
<li><a href="#">3</li>
... 
```

也不能那样做。这就是我需要帮助的原因。上面的代码将 3 个链接转换为 3 个选项卡，因此每个选项卡都会打开页面的一部分。我只想将第一个选项卡显示为活动状态，直到单击第二个选项卡。

PD 另外，我想将“a”（链接）中的“onclick”传递给 javascript 代码。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:08:36.057

我想这就是你的意思？如果你愿意，我可以继续。[http://jsfiddle.net/ftM2b/1/](http://jsfiddle.net/ftM2b/1/) 本质上，当单击另一个时，三个“选项卡”会改变状态。你可以很容易地把它变成一个带有页面的标签系统。

HTML

```
<a class="tab" id="Tab1">Tab1</a>
<a class="tab" id="Tab2">Tab2</a>
<a class="tab" id="Tab3">Tab3</a> 
```

JAVASCRIPT

```
$(function(){
$(".tab").click(function() {
$(".tab").css("background-color","blue");
$(this).css("background-color","red");
});
}); 
```

CSS

```
.tab{
width: 40px;
height: 20px;
background-color: blue;
}
#Tab1{
background-color: red;
} 
```

# python - 按照第一个 Django App 教程，我无法执行 runserver 命令

> ID：15538398
> 
> 赞同：2
> 
> 时间：2013-03-21T02:27:31.507
> 
> 标签：python, django

我无法让 django 服务器运行。我一直在关注本[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，但我没有运气。每当我运行命令时`python manage.py runserver`，我都会得到以下信息：

```
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x1005d5950>>
Traceback (most recent call last):
  File "/Library/Python/2.6/site-packages/django/core/management/commands/runserver.py", line 92, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.6/site-packages/django/core/management/base.py", line 280, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.6/site-packages/django/core/management/validation.py", line 35, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 166, in get_app_errors
    self._populate()
  File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 72, in _populate
    self.load_app(app_name, True)
  File "/Library/Python/2.6/site-packages/django/db/models/loading.py", line 96, in load_app
    models = import_module('.models', app_name)
  File "/Library/Python/2.6/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Library/Python/2.6/site-packages/django/contrib/auth/models.py", line 21, in <module>
    from django.contrib.contenttypes.models import ContentType
  File "/Library/Python/2.6/site-packages/django/contrib/contenttypes/models.py", line 127, in <module>
    class ContentType(models.Model):
  File "/Library/Python/2.6/site-packages/django/db/models/base.py", line 97, in __new__
    new_class.add_to_class('_meta', Options(meta, **kwargs))
TypeError: Error when calling the metaclass bases
    __init__() keywords must be strings 
```

任何输入都会有很大帮助。我正在使用 Mac 10.6 并使用 Python 2.6.1 我尝试重新安装 django 和 python。

编辑：这是我的 models.py 文件的代码。

```
from django.db import models
from django.utils.translation import ugettext_lazy as _
from django.utils.encoding import smart_text, force_text
from django.utils.encoding import python_2_unicode_compatible

class ContentTypeManager(models.Manager):

# Cache to avoid re-looking up ContentType objects all over the place.
# This cache is shared by all the get_for_* methods.
_cache = {}

def get_by_natural_key(self, app_label, model):
    try:
        ct = self.__class__._cache[self.db][(app_label, model)]
    except KeyError:
        ct = self.get(app_label=app_label, model=model)
        self._add_to_cache(self.db, ct)
    return ct

def _get_opts(self, model, for_concrete_model):
    if for_concrete_model:
        model = model._meta.concrete_model
    elif model._deferred:
        model = model._meta.proxy_for_model
    return model._meta

def _get_from_cache(self, opts):
    key = (opts.app_label, opts.object_name.lower())
    return self.__class__._cache[self.db][key]

def get_for_model(self, model, for_concrete_model=True):
    """
    Returns the ContentType object for a given model, creating the
    ContentType if necessary. Lookups are cached so that subsequent lookups
    for the same model don't hit the database.
    """
    opts = self._get_opts(model, for_concrete_model)
    try:
        ct = self._get_from_cache(opts)
    except KeyError:
        # Load or create the ContentType entry. The smart_text() is
        # needed around opts.verbose_name_raw because name_raw might be a
        # django.utils.functional.__proxy__ object.
        ct, created = self.get_or_create(
            app_label = opts.app_label,
            model = opts.object_name.lower(),
            defaults = {'name': smart_text(opts.verbose_name_raw)},
        )
        self._add_to_cache(self.db, ct)

    return ct

def get_for_models(self, *models, **kwargs):
    """
    Given *models, returns a dictionary mapping {model: content_type}.
    """
    for_concrete_models = kwargs.pop('for_concrete_models', True)
    # Final results
    results = {}
    # models that aren't already in the cache
    needed_app_labels = set()
    needed_models = set()
    needed_opts = set()
    for model in models:
        opts = self._get_opts(model, for_concrete_models)
        try:
            ct = self._get_from_cache(opts)
        except KeyError:
            needed_app_labels.add(opts.app_label)
            needed_models.add(opts.object_name.lower())
            needed_opts.add(opts)
        else:
            results[model] = ct
    if needed_opts:
        cts = self.filter(
            app_label__in=needed_app_labels,
            model__in=needed_models
        )
        for ct in cts:
            model = ct.model_class()
            if model._meta in needed_opts:
                results[model] = ct
                needed_opts.remove(model._meta)
            self._add_to_cache(self.db, ct)
    for opts in needed_opts:
        # These weren't in the cache, or the DB, create them.
        ct = self.create(
            app_label=opts.app_label,
            model=opts.object_name.lower(),
            name=smart_text(opts.verbose_name_raw),
        )
        self._add_to_cache(self.db, ct)
        results[ct.model_class()] = ct
    return results

def get_for_id(self, id):
    """
    Lookup a ContentType by ID. Uses the same shared cache as get_for_model
    (though ContentTypes are obviously not created on-the-fly by get_by_id).
    """
    try:
        ct = self.__class__._cache[self.db][id]
    except KeyError:
        # This could raise a DoesNotExist; that's correct behavior and will
        # make sure that only correct ctypes get stored in the cache dict.
        ct = self.get(pk=id)
        self._add_to_cache(self.db, ct)
    return ct

def clear_cache(self):
    """
    Clear out the content-type cache. This needs to happen during database
    flushes to prevent caching of "stale" content type IDs (see
    django.contrib.contenttypes.management.update_contenttypes for where
    this gets called).
    """
    self.__class__._cache.clear()

def _add_to_cache(self, using, ct):
    """Insert a ContentType into the cache."""
    model = ct.model_class()
    key = (model._meta.app_label, model._meta.object_name.lower())
    self.__class__._cache.setdefault(using, {})[key] = ct
    self.__class__._cache.setdefault(using, {})[ct.id] = ct

@python_2_unicode_compatible
class ContentType(models.Model):
name = models.CharField(max_length=100)
app_label = models.CharField(max_length=100)
model = models.CharField(_('python model class name'), max_length=100)
objects = ContentTypeManager()

class Meta:
    verbose_name = _('content type')
    verbose_name_plural = _('content types')
    db_table = 'django_content_type'
    ordering = ('name',)
    unique_together = (('app_label', 'model'),)

def __str__(self):
    # self.name is deprecated in favor of using model's verbose_name, which
    # can be translated. Formal deprecation is delayed until we have DB
    # migration to be able to remove the field from the database along with
    # the attribute.
    #
    # We return self.name only when users have changed its value from the
    # initial verbose_name_raw and might rely on it.
    model = self.model_class()
    if not model or self.name != model._meta.verbose_name_raw:
        return self.name
    else:
        return force_text(model._meta.verbose_name)

def model_class(self):
    "Returns the Python model class for this type of content."
    from django.db import models
    return models.get_model(self.app_label, self.model,
                            only_installed=False)

def get_object_for_this_type(self, **kwargs):
    """
    Returns an object of this type for the keyword arguments given.
    Basically, this is a proxy around this object_type's get_object() model
    method. The ObjectNotExist exception, if thrown, will not be caught,
    so code that calls this method should catch it.
    """
    return self.model_class()._base_manager.using(self._state.db).get(**kwargs)

def get_all_objects_for_this_type(self, **kwargs):
    """
    Returns all objects of this type for the keyword arguments given.
    """
    return self.model_class()._base_manager.using(self._state.db).filter(**kwargs)

def natural_key(self):
    return (self.app_label, self.model) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:28:13.720

您的模型无效。如果您可以在`models.py`.

同时，请查看[Django: Error when calling the metaclass bases](https://stackoverflow.com/questions/11657532/django-error-when-calling-the-metaclass-bases)，一个相关的问题。

# javascript - 添加文本颜色切换以显示/隐藏 jQuery 函数

> ID：15538401
> 
> 赞同：0
> 
> 时间：2013-03-21T02:27:59.257
> 
> 标签：javascript, jquery, toggle

我有一个工作切换功能：

```
$(document).ready(function(){
   $(".hidecontrol").click(function(){
      $(".hide").toggle(300)
    });
}); 
```

我想将文本颜色更改添加到也可以切换的新类“.nohide”。我已经试了

```
$(document).ready(function(){
  $(".hidecontrol").click(function(){
    $(".hide").toggle(300),
       $(".hidecontrol").css('color', 'red')
   });
 }); 
```

但这是第一次点击后的“永久”，并且不会切换回来。有没有办法将 CSS 颜色更改添加到 .toggle() 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:31:12.483

$(".hidecontrol").toggleClass('redcolor') 你的 css .redcolor {color:red}

# cakephp - 限制对控制器的外部访问，但允许从模型访问（CakePHP 2.X）

> ID：15538406
> 
> 赞同：0
> 
> 时间：2013-03-21T02:28:52.737
> 
> 标签：cakephp

在我们的应用程序中，我们使用控制器和视图来生成可以通过电子邮件发送给用户的 PDF 文件，控制器呈现视图文件并将其传递回模型。

之所以这样设置，是因为在应用程序的另一部分中，我们使用相同的视图文件在页面上显示 PDF（这需要 POST 数据）。

我的问题是我需要能够从我的模型中访问控制器功能，但是我想阻止某人（直接使用网站）直接执行控制器功能。

在模型中：

```
$Contents = new ContentsController();
$message = $Contents->generatePDF($viewVars); 
```

在控制器中：

```
public function generatePDF($input_data)
{

    //set the original data and the check result to build the page:
    foreach($input_data as $key => $value)
    {
        $this->set($key, $value);
    }

    //instantiate a new View class from the controller
    $view = new View($this);

    $viewData = $view->render('pdf_file', 'pdf');

    return $viewData;
} 
```

哪个有效，但是如果用户在他们的浏览器中输入 /Contents/generatePDF 他们可以访问这个控制器功能，所以我希望能够防止它被直接从网络访问。

我正在使用 CakePHP 2.X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:45:49.877

最简单的方法是在控制器方法的名称前加上下划线：`_generatePDF`. 此类方法无法通过浏览器访问。

# mysql - rails在保存到mysql DB之前更改日期格式

> ID：15538413
> 
> 赞同：3
> 
> 时间：2013-03-21T02:29:22.207
> 
> 标签：mysql, ruby-on-rails, date, datepicker

我有一个想要在 MM/DD/YYYY 中显示的日期选择器。但是我正在使用一个需要 YYYY-MM-DD 的 mysql 数据库。就目前而言，它的储蓄，但日期和月份正在颠倒。

现在我有一个初始化器 date_time_formats.rb 它有：

```
Date::DATE_FORMATS[:default] = '%m/%d/%Y' 
```

同样在我的 datepicker jscript 我有我想要显示的正确格式：

```
$(this).datepicker({"format": "mm/dd/yyyy", "weekStart": 0, "autoclose": true, "startDate":new Date()}); 
```

我试过这样的事情：

```
 Date.strptime(params[:location], "%d/%m/%Y") 
```

但是我得到了一个 HashWithIndifferentAccess 错误。

在分配给模型实例之前，如何重新格式化 params 哈希中的日期？原因是如果日期无效，它似乎会被模型拒绝（例如 2013 年 4 月 4 日很好，但 2013 年 4 月 20 日不是因为没有第 20 个月）。我是一个重要的时间轨道新手，所以也许我错了，但这似乎是它的工作方式。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T03:01:53.303

尝试位于此处的**美国**日期宝石：[https ://github.com/jeremyevans/ruby-american_date](https://github.com/jeremyevans/ruby-american_date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:38:16.517

查找各种日期类的[strftime方法。](http://www.ruby-doc.org/core/Time.html)你想要的咒语是`Time.local(params[:location]).strftime('%m/%d/%Y')`，希望对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T15:38:55.763

将日期清理为正确格式的一种快速方法是在保存之前在控制器中获取它并使用 strftime 来更正格式。例如：

```
@model = Model.new(model_params)
@model.date_you_want = @model.date_you_want.strftime('%Y/%d/%m')
@model.save 
```

这会以正确的格式保存日期。（我也在使用 datepicker-boostrap gem）

# ios - UICollectionView 单元格水平排列而不是垂直排列以模仿跳板？

> ID：15538423
> 
> 赞同：4
> 
> 时间：2013-03-21T02:30:39.260
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell

在我的收藏视图中，我试图模仿 iphone 5 应用程序跳板（水平行中的 4 个应用程序和 5 行）来显示我的应用程序。我目前有 5 个单元格（计划大约 25 个单元格左右），并且集合视图设置为水平滚动并启用分页，但当我使用此方法添加单元格时：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {
return apps.count; //currently 5
} 
```

它们垂直对齐而不是水平对齐，我怎样才能使它水平对齐？

这是一个草图

发生了什么：

```
cell

cell

cell

cell

cell 
```

我想要发生的事情：

```
cell cell cell cell

cell 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:35:19.463

您需要制作一个 UICollectionViewLayout。 [这是一个很棒的教程](http://www.skeuo.com/uicollectionview-custom-layout-tutorial)。

# cron - 在非高峰时段退出的 cronjob

> ID：15538425
> 
> 赞同：1
> 
> 时间：2013-03-21T02:30:44.253
> 
> 标签：cron, crontab

我有一个 crontab 每 30 分钟执行一次的 php 脚本，在凌晨 2 点到 7 点左右的非高峰时段我没有得到太多流量，所以我希望在这些时间里不运行脚本。

我不确定如何制作一个可以做到这一点的 cronjob，因为我发现很难测试。

我现在的 cronjob 看起来像这样

```
*/30 * * * *            /usr/bin/php    /var/www/update/inv.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T02:35:36.403

`*/30 0-1,8-23 * * * /usr/bin/php /var/www/update/inv.php`

范围包括在内，因此 0-1 将执行 00:30、01:30，然后 8-23 将执行 0830 到 2330

参考：[http ://team.macnn.com/drafts/crontab_defs.html](http://team.macnn.com/drafts/crontab_defs.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T02:41:16.823

您可以限制希望作业运行的时间。

```
*/30 0,1,7-23 * * *            /usr/bin/php    /var/www/update/inv.php 
```

时间将是每 30 分钟一次，直到 0130。它不会在 0200 运行。下一次运行将在 0700，然后每 30 分钟运行一次。

这里有一篇关于如何设置 cron 的很好的文章：

[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

# gem - 如何选择用于 CodeKit + Compass + Sass 项目的 Zurb Foundation 版本

> ID：15538426
> 
> 赞同：1
> 
> 时间：2013-03-21T02:30:48.453
> 
> 标签：gem, zurb-foundation, compass-geolocation, codekit

我希望将 Foundation 的新版本 (v4) 用于我正在处理的响应式项目，因此前几天我安装了 v4`gem install zurb-foundation`并启动并运行了 CodeKit。但是，我的客户要求我们支持 IE8（上帝帮助我），因为我们仍然有大量流量出现在分析中。

Foundation 版本 4 不支持 IE8，因为它的 Mobile-First。V3 的工作方式不同，仍然可以支持 IE8。

所以我想弄清楚如何回溯。我通过安装了最新的 V3 Foundation GEM，`gem install zurb-foundation -v 3.2.5`但我不确定如何强制 CodeKit + Compass 使用 V3 而不是 V4。

此外，当我使用 V4 设置新项目时，我在 CodeKit 中创建了一个 COMPASS 项目，然后通过终端按照以下命令在新的 Compass 项目文件夹中构建 Foundation 框架：

```
1\. Add require "zurb-foundation" to your config.rb file
2\. cd path/to/your-project
3\. run compass install foundation 
```

所以现在我的系统中有 v3 和 v4 的 GEMS，我如何才能为这个项目使用 3 并类似地设置文件夹。

任何帮助是极大的赞赏。我对使用 CodeKit + Compass + SASS 还是很陌生，所以请保持温和，随意冗长：)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T20:10:43.773

戴夫，在我有时间从工作中休息一下来解决这个问题之前，我已经为此苦苦挣扎了很长时间。有时我在不同的项目中使用 Foundation 2、3 和 4。我发现最好的事情是使用捆绑包。[尽管我在 ZURB 的文档转到部分运行多个版本](http://foundation.zurb.com/docs/sass.html)上找到了这篇文章，但最终弄清楚了

首先，如果你还没有安装 bundler 运行`gem install bundler`

现在比如说我正在创建一个新的指南针 zurb-foundation 项目“flowershop”

创建目录花店`mkdir flowershop && cd flowershop`

`Gemfile`使用内容创建一个新文件

```
source "https://rubygems.org"
gem "zurb-foundation", "4.0.9"
gem "compass" 
```

你也可以在这里使用任何其他版本。以基础 2 为例：

`gem "ZURB-foundation", "2.2.1.4"`

然后运行该命令`bundle install`，它应该会为您安装这些 gem，然后您可以运行所有前缀为`bundle execute`.

所以用基础运行创建一个新的指南针项目

`bundle exec compass create . -r zurb-foundation --using foundation`

然后为了观看您的新产品，您再次为 compass 命令添加前缀

`bundle exec compass watch .`

就个人而言，我喜欢使用我创建的`becw`别名`bundle execute compass watch`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T16:40:29.637

Foundation 项目中的 Config.rb 是一个简单的 ruby​​ 环境文件，因此选择 zurb-foundation 的版本与要求任何其他 gem 的特定版本相同。

```
gem 'zurb-foundation', '=3.2'
require 'zurb-foundation' 
```

# ios - 使用 AFNetworking 和 NSOperationQueue 对条件 HTTP 请求进行串行排队

> ID：15538430
> 
> 赞同：2
> 
> 时间：2013-03-21T02:31:16.300
> 
> 标签：ios, objective-c, macos, afnetworking, nsoperation

我正在重构一些现有的代码。它有大约 20 个连续执行的 HTTP 请求，假设前一个返回 HTTP 状态 200（OK）。如果状态不是 200，则进程停止。当前的代码是一堆委托回调、实例变量、一个巨大的`switch`语句和每个调用的单独方法。

我想改用 AFNetworking。我认为我需要制作一系列`AFJSONRequestOperation`对象并将它们放入`maxConcurrentOperationCount`设置为NSOperationQueue 的 NSOperationQueue 中，`1`以便它连续运行。

NSOperationQueue 的默认行为是继续执行操作，无论之前的操作是否成功。但是，如果其中一个操作调用其失败块（例如，如果 HTTP 请求返回 404（未找到文件）），我希望队列取消所有操作。

由于[AFJSONRequestOperation](http://engineering.gowalla.com/AFNetworking/Classes/AFJSONRequestOperation.html)的行为不是很可配置，我需要子类化它来实现我想要的吗？AFNetworking 是否有另一个内置功能可以让我简单地做到这一点？

# c# - Unity3d如何从另一个脚本引用滑动控件？

> ID：15538433
> 
> 赞同：1
> 
> 时间：2013-03-21T02:31:33.060
> 
> 标签：c#, android, unity3d, swipe

我已经尝试了所有可能的方法来让它工作但没有成功。我有一个滑动脚本和一个游戏/控制脚本。我试图在我的控制脚本中引用滑动控件作为控制我的角色的方法。到目前为止，我从 Unity 中只收到一个错误。

Assets/RuinRunStarterKit/Scripts/csTempleRun.cs(307,25)：错误 CS1501：方法`UpdatePlayer' takes`0' 参数没有重载

我尝试在 UpdatePlayer 的括号内添加 TouchDetector.enTouchType 但这给了我三个错误，而不仅仅是一个。我联系了许多人并访问了许多网站以寻找答案，但未能产生有效的结果。我没有受过编程教育。我只是在网上研究了如何在编程方面做一些事情。我这里的第二个脚本来自我在 Unity 资源商店购买的资源。我已经联系了他们以获得添加滑动控件的支持，他们通过电子邮件向我发送了触摸脚本，但没有告诉我如何实现它。我只想在手机上玩这个游戏，用滑动作为控件。这是供个人使用的。如果有人可以帮助我达到预期的结果，我将非常感激。再次，我希望能够使用滑动来控制角色。谢谢你。这是我的脚本：

TouchDetector.cs;

```
 using UnityEngine;
    using System.Collections;

    public class TouchDetector : MonoBehaviour {
public delegate void deTouchEvent
    (enTouchType touchType);

public static event
    deTouchEvent
    evTouchEvent;

public enum enTouchType
{
    SwipeLeft,
    SwipeRight,
    SwipeDown,
    SwipeUp,
}   

void Start ()
{   
}   

void Update ()
{   
    if (evTouchEvent == null)
        return;

    if (Input.GetKeyDown(KeyCode.UpArrow   )) evTouchEvent(enTouchType.SwipeUp   );
    if (Input.GetKeyDown(KeyCode.DownArrow )) evTouchEvent(enTouchType.SwipeDown );
    if (Input.GetKeyDown(KeyCode.LeftArrow )) evTouchEvent(enTouchType.SwipeLeft );
    if (Input.GetKeyDown(KeyCode.RightArrow)) evTouchEvent(enTouchType.SwipeRight);

    if (Input.touchCount > 0)
    {
        foreach (Touch t in Input.touches)
        {
            Vector3 swipe = t.deltaPosition * t.deltaTime;

            if (swipe.y >  0.5f) evTouchEvent(enTouchType.SwipeUp   );
            if (swipe.y < -0.5f) evTouchEvent(enTouchType.SwipeDown );
            if (swipe.x >  0.5f) evTouchEvent(enTouchType.SwipeRight);
            if (swipe.x < -0.5f) evTouchEvent(enTouchType.SwipeLeft );
        }
    }
}
    } 
```

csTempleRun.cs;

```
 void Update () 
    {   
        UpdatePlayer();

        if (m_player != null)
        {
            // Make the camera follow the player (if active)
            SmoothFollow sF = (SmoothFollow)Camera.mainCamera.GetComponent(typeof(SmoothFollow));
            sF.target = m_player.transform;         

            // Check for collisions with interactive objects
            UpdateCoins();
            UpdateMines();

            // Dynamically update the track
            CreateNewCellsIfNeeded(false);
        }       
    }

    private void UpdatePlayer(TouchDetector.enTouchType T)
{
    // if the player is dead (replaced with ragdoll) then exit since none of this code should fire.
    if (m_player == null) 
    {
        return;     
    }

    // Gradually increase the players' running speed, and update the animation to match.
    m_playerRunSpeed += Time.deltaTime * 0.005f;
    m_playerRunSpeed = Mathf.Clamp(m_playerRunSpeed, 0.5f, 3.0f);
    m_player.animation["run"].speed = m_playerRunSpeed * 2.0f;

    // ****************************************************************************************
    // INPUT

    // Player can only turn if they are not already sliding / jumping.  
    // Equally, sliding / jumping are mutually exclusive.

    if (Input.GetKeyDown (KeyCode.LeftArrow)&& m_playerJump <= -1.0f && m_playerSlide <=0.0f)
    {
        if (m_playerDirection == enCellDir.North) m_playerNextDirection = enCellDir.West;
        if (m_playerDirection == enCellDir.East ) m_playerNextDirection = enCellDir.North;
        if (m_playerDirection == enCellDir.South) m_playerNextDirection = enCellDir.East;
        if (m_playerDirection == enCellDir.West ) m_playerNextDirection = enCellDir.South;
    }

    if (Input.GetKeyDown(KeyCode.RightArrow) && m_playerJump <= -1.0f && m_playerSlide <=0.0f)
    {
        if (m_playerDirection == enCellDir.North) m_playerNextDirection = enCellDir.East;
        if (m_playerDirection == enCellDir.East ) m_playerNextDirection = enCellDir.South;
        if (m_playerDirection == enCellDir.South) m_playerNextDirection = enCellDir.West;
        if (m_playerDirection == enCellDir.West ) m_playerNextDirection = enCellDir.North;
    }   

    if (T==TouchDetector.enTouchType.SwipeDown && m_playerJump <= -1.0f && m_playerSlide <=0.0f)
    {
        m_playerSlide = 1.0f;
        m_player.animation.Play("slide_fake");
    }            

    if ((Input.GetKeyDown(KeyCode.UpArrow) || Input.GetKeyDown(KeyCode.Space)) && m_playerJump <= -1.0f && m_playerSlide <=0.0f)
    {
        AudioSource.PlayClipAtPoint(m_jumpAudio, m_player.transform.position);
        m_playerJump = 1.0f;
        m_playerYvel = 0.0f;
        m_player.animation.Play("jump");
    } 
```

我希望发布此脚本没有做错任何事，但我觉得我需要发布此脚本以获得所需的帮助。您会在 csTempleRun.cs 脚本中注意到，我将其中一个 KeyCode 调用替换为 TouchDetector.enTouchType.SwipeDown。但是我仍然遇到错误。提前感谢您的帮助。也感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:27:46.640

看看你的错误 - `No overload for method UpdatePlayer' takes0' arguments`。这意味着您需要为您的方法提供额外的数据。您需要提供哪些数据智能感知可以告诉您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:42:04.807

在您的代码中：

```
void Update () 
{   
    UpdatePlayer(); 
    ... 
```

你`UpdatePlayer()`用零参数调用。但是，`UpdatePlayer`需要一个论据：

```
private void UpdatePlayer(TouchDetector.enTouchType T)
{ 
```

因此，当您调用 时`UpdatePlayer()`，您需要发送一个该类型的对象`TouchDetector.enTouchType`作为参数。那将是以下之一：

*   向左滑动
*   向右滑动
*   刷下
*   向上滑动

# c# - 我是否需要使用 using 关键字关闭 SQL Server 连接？

> ID：15538434
> 
> 赞同：9
> 
> 时间：2013-03-21T02:31:41.033
> 
> 标签：c#, asp.net, database-connection

我一直在为这个问题找到相互矛盾的结果。让我们看一下运行 SQL 查询的 C# 代码：

```
using (SqlConnection cn = new SqlConnection(strConnectString))
{
    cn.Open();

    using (SqlCommand cmd = new SqlCommand(strSQL, cn))
    {
        cmd.ExecuteNonQuery();
    }

    //Do I need to call?
    cn.Close();
} 
```

我需要最后打电话`cn.Close()`吗？我问的原因是，在一个流量很大的网络应用程序中，我用完了池中的连接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T02:38:21.243

此处使用的`using`关键字：

```
using (SqlConnection cn = new SqlConnection(strConnectString))
{
    // Stuff
} 
```

简称：

```
SqlConnection cn = null;
try
{
    cn = new SqlConnection(strConnectString);
    // Stuff
}
finally
{
    if (cn != null) cn.Dispose();
} 
```

`cn.Dispose()`将在超出范围后*立即*调用，这又会立即关闭连接（因为 SqlConnection.Dispose() 就是这样做的）。`cn``using`

**更新**

这不应与垃圾收集相混淆。GC 在 .NET 中是不确定的，这正是引入*IDisposable*接口和[Dispose 模式](http://en.wikipedia.org/wiki/Dispose_pattern)的原因。 *IDisposable*允许及时、确定地释放昂贵的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:32:04.563

`Using`使用语句时不需要关闭连接。

Scott hanselman 在这里解释了[为什么 Using 语句比眼中的锋利棒和 SqlConnection 重构示例更好](http://www.hanselman.com/blog/WhyTheUsingStatementIsBetterThanASharpStickInTheEyeAndASqlConnectionRefactoringExample.aspx)。

> 在一个流量很大的网络应用程序中，我用完了一个池中的连接。

确保您使用相同的连接字符串，这样 SQL 将使用连接池。

> 连接是立即关闭，还是在垃圾收集器到达时关闭

**编辑：**

Dispose 模式用于提供资源的确定性销毁。由于 .net 运行时垃圾收集器是不确定的（这意味着您永远无法确定运行时何时会收集旧对象并调用它们的终结器）。因此，当您正确实施 Dispose 模式时，您提供了资源的确定性释放，并且在消费者粗心并且不处置对象的情况下，终结器将清理对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T02:37:22.957

`using`如果您使用它在内部调用，则无需关闭它`Displose()`。

这里有一些关于`using`ADO.NET 中关键字的详细信息，可能值得一读。

[利用 C# 中的“使用”关键字](http://www.c-sharpcorner.com/UploadFile/mahesh/UsingKeyword01162007063733AM/UsingKeyword.aspx)

快速搜索@SO 将引导你到[这篇文章](https://stackoverflow.com/questions/75401/uses-of-using-in-c-sharp)，你也可以在那里找到你的答案。

# javascript - 用 JavaScript 分割 url

> ID：15538435
> 
> 赞同：5
> 
> 时间：2013-03-21T02:31:48.653
> 
> 标签：javascript

我正在尝试拆分以下网址：

```
http://www.store.com/products.aspx/Books/The-happy-donkey 
```

为了得到`http://www.store.com/products.aspx`

我正在使用 JavaScript `window.location.href`，`split`但到目前为止还没有成功。

如何才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:39:58.013

Try this

```
var fullurl = "http://www.store.com/products.aspx/Books/The-happy-donkey",
    url = fullurl.split(".aspx")[0] + ".aspx"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T02:41:57.193

如果是 url：地址栏中的[http://www.store.com/products.aspx/Books/The-happy-donkey](http://www.store.com/products.aspx/Books/The-happy-donkey)

```
 var path = window.location.pathname;
 var str = path.split("/");
 var url = document.location.protocol + "//" + document.location.hostname + "/" + str[1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T02:46:28.550

这并不笨拙，是吗？

```
var url = 'http://www.store.com/products.aspx/Books/The-happy-donkey';

[
    url.split('://')[0] + '://', 
    url.split('://')[1].split('/').slice(0,2).join('/')
].join('') 
```

少一点厚脸皮：

```
url.split('/').slice(0, 4).join('/') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T02:48:16.853

更好的答案（比拆分）可能是诚实地使用正则表达式，除非您真的需要使用拆分（为了它的乐趣）：

```
var shorterUrl = window.location.href.replace(/\.aspx.+/gi, ".aspx"); 
```

这将替换给定 url 的结尾，从 .aspx 开始，只保留 .aspx 部分。

但最重要的是，这不是解决特定问题的好方法（尝试更通用地解决此类问题）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-26T07:50:23.813

试试这个，你会得到 url 的对象

```
console.log(new URL(document.URL)); 
```

# vb.net - 用...结束与在 VB.NET 中使用

> ID：15538438
> 
> 赞同：10
> 
> 时间：2013-03-21T02:32:20.240
> 
> 标签：vb.net, scope, idisposable, using-statement, with-statement

我刚刚发现，和 C# 一样，VB.NET 也有`using`关键字。

直到现在我都认为它没有它（我很愚蠢，我知道......）而是做了这样的事情：

```
With New OleDbConnection(MyConnectionString)
   ' Do stuff
End With 
```

`using`与使用这样的声明相比，这样做的含义是什么

```
Using cn as New OleDBConnection(MyConnectionString)
    With cn
        ' Do stuff with cn
    End With
End using 
```

**更新：**

我应该补充一点，我熟悉该`using`语句的作用，因为它在退出构造时处理对象。

但是，据我了解，`With New ...`当对象超出范围时，该构造将使对象将对象标记为准备好进行垃圾收集。

所以我的问题真的是，唯一的区别是`using`我会立即释放内存，而使用`With`构造它会在 GC 感觉时释放它？还是我在这里错过了更大的东西？

是否有任何最佳实践影响？我应该用`With New MyDisposableObject() ... End With`as重写所有代码`Using o as New MyDisposableObject()`吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T03:29:46.470

# `With`语句/块

> 但是，据我了解， With New ... 构造将使对象在超出范围时将对象标记为准备好进行垃圾收集。

这既是对的，也是不对的。从某种意义上说，*所有*对象都被“标记”（纯粹主义者可能会对此术语提出质疑，但细节无关紧要）当它们超出范围时准备好进行垃圾收集，这是正确的。但是从这个意义上说，它也不完全正确，因为`With`关键字在这种行为方面没有什么特别之处。当一个对象超出范围时，它就有资格进行垃圾回收。时期。这对于方法级范围是正确的，对于块级范围也是如此（例如，`With`、`For`、`Using`等）。

但这不是您使用`With`. 原因是它允许您在深度嵌套的对象上按顺序设置多个属性。换句话说，假设您有一个要设置一堆属性的对象，并且您可以通过以下方式访问它：`MyClass.MemberClass.AnotherMemberClass.Items(0)`. 看到所有这些点了吗？每次在对象上设置属性时，编写必须一遍又一遍地通过一系列点才能访问完全相同的对象的代码可能（理论上）变得低效。如果您对 C 或 C++（或任何其他具有指针的语言）有所了解，则可以将这些点中的每一个视为暗示指针取消引用。该`With`语句基本上只通过一次所有间接，[将结果对象存储在临时变量中](https://stackoverflow.com/a/4094549/366904)，并允许您直接在存储在临时变量中的该对象上设置属性。

也许一些代码有助于使事情更清楚。每当你看到一个点时，想想*可能会很慢！*

假设您从以下代码开始，从深度嵌套的`Items`集合中检索对象 1 并在其上设置多个属性。看看我们必须检索对象多少次，即使每次都是完全相同的对象？

```
MyClass.MemberClass.AnotherMemberClass.Items(0).Color   = Blue
MyClass.MemberClass.AnotherMemberClass.Items(0).Width   = 10
MyClass.MemberClass.AnotherMemberClass.Items(0).Height  = 5
MyClass.MemberClass.AnotherMemberClass.Items(0).Shape   = Circle
MyClass.MemberClass.AnotherMemberClass.Items(0).Texture = Shiny
MyClass.MemberClass.AnotherMemberClass.Items(0).Volume  = Loud 
```

现在我们修改该代码以使用`With`块：

```
With MyClass.MemberClass.AnotherMemberClass.Items(0)
    .Color   = Blue
    .Width   = 10
    .Height  = 5
    .Shape   = Circle
    .Texture = Shiny
    .Volume  = Loud
End With 
```

但是，这里的效果与以下代码相同：

```
Dim tempObj As MyObject = MyClass.MemberClass.AnotherMemberClass.Items(0)
tempObj.Color   = Blue
tempObj.Width   = 10
tempObj.Height  = 5
tempObj.Shape   = Circle
tempObj.Texture = Shiny
tempObj.Volume  = Loud 
```

当然，您不会引入新的范围，因此`tempObj`在更高级别的范围结束之前不会超出范围（因此有资格进行垃圾收集），但这几乎不是相关问题。性能增益（如果有的话）附加到后两个代码片段。

现在使用块的*真正*`With`胜利不是性能，而是可读性。有关`With`可能的性能改进、风格建议等的更多想法，请参阅[此问题的答案](https://stackoverflow.com/questions/283749/the-vb-net-with-statement-embrace-or-avoid)。

## `With New`?

将`New`关键字添加到`With`语句中与我们刚刚讨论的效果完全相同（创建一个局部临时变量来保存对象），只是它几乎完全没有意义。如果需要用 来创建对象`New`，不妨声明一个变量来保存它。稍后您可能需要对该对象*执行*某些操作，例如将其传递给另一个方法，而您不能在一个`With`块中执行此操作。

似乎唯一的目的`With New`是它允许您避免显式变量声明，而是导致编译器隐式执行它。说我疯了，但我看不出这有什么好处。

事实上，我可以说老实说我从未见过任何使用这种语法的实际代码。我在谷歌上唯一能找到的就是[这样的废话](https://stackoverflow.com/questions/3015489/vb-net-calling-new-without-assigning-value)（`Call`无论如何都是一个更好的选择）。

# `Using`语句/块

不像`With`,`Using`非常*有用*，应该经常出现在典型的 VB.NET 代码中。但是，它的适用性非常有限：它*仅*适用于类型实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口模式的对象。您可以通过检查该对象是否有一个`Dispose`方法来判断这一点，当您完成它以释放任何非托管资源时，您应该调用该方法。

也就是说，顺便说一句，当一个对象有一个`Dispose`方法时，你应该始终遵循一条规则：只要你用完该对象，就应该*始终调用它。*如果你不这样做，它不一定是世界末日——垃圾收集器可能会拯救你的培根——但它是记录在案的合同的一部分，并且始终是你调用`Dispose`每个提供它的对象的好习惯。

如果您尝试将*未*`IDisposable`在块中实现的对象的创建包装起来`Using`，编译器将向您咆哮并生成错误。它对任何其他类型都没有意义，因为它的功能本质上等同于`Try`/`Finally`块：

```
Try
    ' [1: Create/acquire the object]
    Dim g As Graphics = myForm.CreateGraphics()

    ' [2: Use the object]
    g.DrawLine(Pens.Blue, 10, 10, 100, 100)
    ' ... etc.
End Try
Finally
    ' [3: Ensure that the object gets disposed, no matter what!]
    g.Dispose()
End Finally 
```

但是当你开始嵌套时，这很丑陋并且变得相当笨拙（就像我们创建了一个`Pen`需要处理的对象一样）。相反，我们使用`Using`，它具有相同的效果：

```
' [1: Create/acquire the object]
Using g As Graphics = myForm.CreateGraphics()
    ' [2: Use the object]
    g.DrawLine(Pens.Blue, 10, 10, 100, 100)
    ' ...etc.
End Using  ' [3: Ensure that the object gets disposed, no matter what!] 
```

该`Using`语句既适用于您首先获取的对象（使用`New`关键字或通过调用类似的方法`CreateGraphics`），*也*适用于您已经创建的对象。在这两种情况下，它都能确保`Dispose`调用该方法，即使在块内的某个地方抛出异常，也能确保正确处理对象的非托管资源。

*你在 VB.NET 中编写代码而不*知道该`Using`语句，这让我有点害怕。您不会将它用于创建所有对象，但在处理实现`IDisposable`. 您绝对应该返回并重新检查您的代码，以确保您在适当的地方使用它！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T02:38:07.850

> 通过使用With...End With，您可以对指定对象执行一系列语句，而无需多次指定对象名称。
> 
> Using 块的行为类似于 Try...Finally 构造，其中 Try 块使用资源，Finally 块处理它们。

托管资源由垃圾收集器处理，无需您进行任何额外编码。您不需要**Using**或**With**语句。有时您的代码需要非托管资源。你负责他们的处置。**Using**块保证在您的代码使用完对象时调用对象的Dispose方法**。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T03:27:14.993

不同之处在于`Using With...End End`

```
Using cn as New OleDBConnection(MyConnectionString)
    With cn
        ' Do stuff with cn
    End With
End using 
```

`cn.Dispose()`超出范围时自动调用( `End Using`)。但在`With New...End`

```
With New OleDbConnection(MyConnectionString)
    ' Do stuff
End With 
```

.Dispose() 没有被显式调用。

同样使用命名对象，您可以`?cn`在即时窗口中创建监视。对于未命名的对象，您不能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-08T10:08:54.933

使用**连接**...结束使用：小心！此语句将关闭您的数据库**连接**！

在模块或表单的中间，即添加或更新记录，这将关闭连接。当您尝试在该模块中执行其他操作时，您将收到数据库错误。对于连接，我不再使用它。您可以使用 Try... End Try 而不使用 Using 语句。

我在进入模块时打开连接并在退出时关闭它。这样就解决了问题。

# applet - 奇数个非英语字符在 windows-chrome 中被破坏

> ID：15538439
> 
> 赞同：6
> 
> 时间：2013-03-21T02:32:29.893
> 
> 标签：applet, jnlp

我开发了打印出用户输入的 jnlp 小程序。

当我输入奇数个非英文字符（例如：中文）时，chrome 浏览器会打印出最后一个字符作为问号。

输入：가 输出：가��

我在 java 控制台上检查了字符是否正确。

一定是applet与chrome浏览器通信的bug。

IE 打印正确。

我可以通过在小程序上附加空格并在 java 脚本上将其删除来解决此问题。

有人对这个问题有任何线索吗？

代码如下。

```
*MainApplet.Java*
public class MainApplet extends JApplet implements JSInterface{//, Runnable {

    public int stringOut(String sData) {
        OutData = sData;
        return 0;
    }

}

*js File*

function TSToolkitRealWrapper ()
{   
    var OutData;
    var OutDataNum;
}
var TSToolkit = new TSToolkitRealWrapper();

var attributes = { id:'TSToolkitReal',code:'com.multibrowser.test.MainApplet', width:100, height:100} ;
var parameters = {jnlp_href: getContextPath() + '/download/pkitoolkit.jnlp',
                 separate_jvm:true, classloader_cache:false} ;
TSToolkitRealWrapper.prototype.stringOut=function(str)
{

          var   nRet = TSToolkitReal.stringOut(str) ;
          this.OutData= TSToolkitReal.OutData;
          return    nRet;
}

*HTML*
<SCRIPT language=javascript>
<!--
function StringOut(form)
{
    var data = form.data.value;
    var nRet = 0;
    var base64Data;
    nRet = TSToolkit.stringOut(data);
    if (nRet > 0)
    {
        alert(nRet + " : " + TSToolkit.GetErrorMessage());
    }
    else
    {
        form.data1.value = TSToolkit.OutData;
    }
}

-->
</SCRIPT>

*jnlp*
<?xml version="1.0" encoding="UTF-8"?>
<jnlp href="cmp.jnlp">
    <information>
        <title>MultiBrowser</title>
    </information>
    <security>
        <all-permissions/>
    </security>
    <resources>
        <j2se version="1.6+" />
            <jar href="MultiBrowser.jar"/>

    </resources>
    <applet-desc height="200" main-class="com.multibrowser.test.MainApplet" name="MainApplet" width="200"/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:06:42.493

> IE prints out correctly

Emm...

You give less details... anyway ***if you can enter chinese characters in your browser but get some rubbish on applet output means that your internet broswer supports chinese but your applet doesn't***;

I presume you should watch closer to your client machine JRE encoding settings because it maybe *doesn't support chinese encoding* by default so maybe your applet should have some manual localization control...

**A.** I can advise dig deeper into applet [Locale user language](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Locale.html#CHINESE) settings...

> I suspect that the file.encoding is the problem, if you look at my own answers below. I couldn't find how to set the encoding though

**B.** You can use static code like this to set property (*put it at the very beginning of your applet code*)

```
static {
 System.setProperty("file.encoding", "UTF-8"); } 
```

**C.**

> When I put odd number of non-english characters(eg: chinese), chrome browser prints out the last character as question mark.

and...

> encoding is ms949 and the jre version is 1.7.0_17

*...the conception is pretty weird :S If you have your chrome with korean letters support and it is ms949 as your client machine default encoding but at the same time you want to make your applet support utf-8 and output korean characters correctly with JS back to your ms494 encoded web page I do suspect you do face some kind of incompatible encodings* %P

So first, I do recommend to make your [applet web page support utf-8 encoding](http://www.w3.org/International/questions/qa-html-encoding-declarations) instead of the default ms494 because I suppose the applet and its web page cp(s) might be incompatible :S

* * *

Report if that helped

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T10:46:42.237

大约 2 个月前我在 J2ME 遇到了同样的问题，我使用 String.trim() 方法解决了问题，如果你的文本最后没有空格，你可以试试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T00:43:52.767

我在几个网络浏览器论坛上问过，但还没有答案。

Windows 和 Linux 之间的区别在于 file.encoding 值。Windows(ms959) 和 Linux(UTF-8)。

我不知道如何设置 file.encoding 值。

下面没有工作。当我在 java 控制台中按“s”时，它仍然打印 file.encoding=MS949。

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp href="pkitoolkit.jnlp">
    <security>
        <all-permissions/>
    </security>
    <resources>
            <j2se version="1.6+" java-vm-args="-Dfile.encoding=UTF-8" />
            <property name="file.encoding" value="UTF-8"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T07:53:08.267

将 Windows 控制面板中的语言环境更改为英语确实有效，而 file.encoding=UTF-8 没有。我仍在研究为什么会发生这种情况。

# javascript - 站点中使用发布消息垃圾邮件控制台的 Facebook 点赞按钮

> ID：15538444
> 
> 赞同：0
> 
> 时间：2013-03-21T02:33:08.753
> 
> 标签：javascript, facebook, postmessage

我有一个在 iframe 之间使用大量 postMessage 通信的站点。在我的网站中放置 Facebook 赞按钮会导致我的调试控制台收到垃圾邮件，例如

从 [domain] 接收到对象类型的消息，需要一个字符串。

这使得开发非常困难。有没有办法防止这种额外的日志记录发生？我是使用 facebooks api 的新手，所以我希望我只是错过了一些简单的东西。他们不可能假设除了他们之外没有人会使用 postmessage。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-05T19:32:29.107

实际上，禁用 console.log 是一个可怕的答案。如果我们想使用 console.log，但只想停止垃圾邮件错误消息怎么办？是什么原因造成的？我们如何真正解决它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T05:09:51.253

实际上，这不是额外的日志记录。它来自 Facebook SDK。简单地，您可以 uglify 用于从库中删除所有控制台的 sdk。

1.下载sdk。[https://connect.facebook.net/en_US/sdk.js](https://connect.facebook.net/en_US/sdk.js)

2.Uglify 它用于删除控制台日志记录（生产版本。） [https://github.com/mishoo/UglifyJS](https://github.com/mishoo/UglifyJS)

3.在您的网站中使用它。

另一个可能对您有所帮助的链接：http: [//elijahmanor.com/grunt-away-those-pesky-console-log-statements/](http://elijahmanor.com/grunt-away-those-pesky-console-log-statements/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:57:02.200

您可以通过执行以下操作简单地“取消设置”console.log 功能：

```
console.log = function(){} 
```

先将其保存在另一个变量中，例如：

```
var originalLog = console.log; 
```

现在，当 Facebook API 尝试使用日志功能时，什么都不会发生。如果您需要使用日志功能，只需先将其设置回您保存的 originalLog 变量，然后在使用完毕后取消设置即可。无论您对日志功能做了什么，未处理的错误仍将显示在您的控制台中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-02-28T09:06:31.327

在我的情况下，这是由 FVD Video Downloader 扩展引起的，所以也许你应该禁用所有浏览器扩展，看看是否能解决问题，然后将它们一一启用以找到罪魁祸首。

# html - 如何使文本标签宽度与可视文本相同？

> ID：15538445
> 
> 赞同：0
> 
> 时间：2013-03-21T02:33:11.913
> 
> 标签：html, css, web-deployment

我想知道是否有办法使 H1 标签的宽度与您在屏幕上看到的文本的宽度相同。

对我来说，如果我没有为 H1 标签设置宽度，它的宽度会达到 100%，如果它这么宽，我就无法留出余量。

jsfiddle：jsfiddle.net/PBWjr/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:15:53.730

如果我的问题是正确的：

为了使内容居中，您有两种选择：

1.  设置宽度和边距自动，在左边和右边。
2.  `H1`将a`div`和 set括起来`text-align:center`。

这是一个小提琴[http://jsfiddle.net/anirudhvarma/54Ujn/](http://jsfiddle.net/anirudhvarma/54Ujn/)

请注意，如果您想使用第一种方法，请不要忘记添加`<!doctype html>`，否则 IE 会将其全部放在左侧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:53:39.703

最好的方法是这样的：

```
<h1><span>Your text here</span></h1> 
```

然后，您可以根据需要设置样式`h1>span`。

# c# - 可能有多个var？

> ID：15538450
> 
> 赞同：0
> 
> 时间：2013-03-21T02:33:48.403
> 
> 标签：c#, icsharpcode

如何在此代码中添加多个 var？

```
var trimChars = "ab"; 
```

我要添加的示例：

```
"ab", "as", "Ab", "As" 
```

那可能吗？

更多继承人我的一些代码：

```
if (e.KeyCode == Keys.Enter)
         {
    string Slb = lb.SelectedText.ToString();
             var trimChars = "ab";
             var trimmed = Slb.TrimStart(trimChars.ToCharArray());
             rtb.SelectedText = trimmed;

             lb.Hide();
         } 
```

在此先感谢并为这个新手问题感到抱歉:) .more power！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:53:10.513

要从一开始就删除字符串，您可以使用：-

```
public string RemoveFromStart(string s, IEnumerable<string> strings )
        {
            foreach (var x in strings.Where(s.StartsWith))
            {
                return s.Remove(0, x.Length);
            }
            return s;
        } 
```

并像使用它一样

```
var x = RemoveFromStart("ablah", new[] { "ab", "as", "Ab", "As" }); 
```

或使用您的代码

```
var trimmed = RemoveFromStart(Slb, new string[] { "ab", "as", "Ab", "As" }); 
```

# grep - grep：重复运算符操作数无效

> ID：15538452
> 
> 赞同：19
> 
> 时间：2013-03-21T02:33:59.983
> 
> 标签：grep, ack

我有这个普通快递`(?<=heads\/)(.*?)(?=\n)`，你可以在这里看到它 [http://regexr.com?347dm](http://regexr.com?347dm)

我需要这个正则表达式才能在 grep 命令中工作，但我收到了这个错误。

```
$ grep -Eio '(?<=heads\/)(.*?)(?=\n)' text.txt 
grep: repetition-operator operand invalid 
```

它在 ack 中效果很好，但我在需要运行它的机器上没有 ack。

```
ack text.txt -o --match '(?<=heads\/)(.*?)(?=\n)' 
```

文本.txt

```
74f3649af36984e1b784e46502fe318e91d29570    HEAD
06d4463ab47a6246e6bd94dc3b9267d59fc16c2e    refs/heads/ARC
0597e13c22b6397a1b260951f9d064f668b26f08    refs/heads/LocationAge
e7e1ed942d15efb387c878b9d0335b37560c8807    refs/heads/feature/311-312-breaking-banner-updates
d0b2632b465702d840a358d0b192198ae505011c    refs/heads/gulf-news
509173eafc6792739787787de0d23b0c804d4593    refs/heads/jbb-new-applicationdidfinishlaunching
1e7b03ce75b1a7ba47ff4fb5128bc0bf43a7393b    refs/heads/locationdebug
74f3649af36984e1b784e46502fe318e91d29570    refs/heads/master
5d2ede384325877c24db7ba1ba0338dc7b7f84fb    refs/heads/mixed-media
3f3b6a81dd3baea8744aec6b95c2fe4aaeb20ea3    refs/heads/post-onezero
4198a43aab2dfe72d7ae9e9e53fbb401fc9dac1f    refs/heads/whitelabel
76741013b3b2200de29f53800d51dfd6dc7bac5e    refs/tags/r10
fc53b1a05dad3072614fb397a228819a67615b82    refs/tags/r10^{}
afdcfd970c9387f6fda0390ef781c2776aa666c3    refs/tags/r11 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-03T20:11:51.483

grep 不支持`(?<=...)`or `*?`or`(?=...)`运算符。见此[表](http://www.regular-expressions.info/refflavors.html)。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-08-06T16:27:39.390

```
$ grep -Pio '(?<=heads\/)(.*?)(?=\n)' text.txt # P option instead of E 
```

如果你使用 GNU grep，你可以使用`-P`or`--perl-regexp`选项。

如果您使用的是 OS X，则需要安装 GNU grep。

```
$ brew install grep 
```

由于最近的[变化](https://github.com/Homebrew/homebrew-core/search?q=default-names%20created%3A2019-01-01..2019-01-10&unscoped_q=default-names%20created%3A2019-01-01..2019-01-10&type=Commits)，要在 macOS 上使用 GNU grep，您必须在命令前加上“g”

```
$ ggrep -Pio '(?<=heads\/)(.*?)(?=\n)' text.txt # P option instead of E 
```

或者更改[路径名](https://apple.stackexchange.com/questions/69223/how-to-replace-mac-os-x-utilities-with-gnu-core-utilities)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-15T04:13:49.937

尝试这个

```
grep -Eoh 'heads/.*' text.txt | grep -Eoh '/.*' | grep -Eoh '[a-zA-Z].*' 
```

# string - Oracle：获取部分字符串匹配的长度

> ID：15538454
> 
> 赞同：4
> 
> 时间：2013-03-21T02:34:08.713
> 
> 标签：string, oracle, pattern-matching

想象一下我有一张像

```
Name
----
ABCDEFG
ABChello world
ABCDEfoo
ABbar
ABCDEF
ABCDEFGHIJKLMNOP
zzz
qABCD
ABCqqqGH
ABCABC 
```

我想做一个查询并找出每个字符串有多少个字符与所需的字符串“ABCDEFGHIJ”相匹配，总是从头开始。那是...

```
Name               MatchingLength
----               ----
ABCDEFG            7
ABChello world     3
ABCDEzoo           5
ABbar              2
ABCDEF             6
ABCDEFGHIJKLMNOP   10
zzz                0
qABCD              0
ABCqqqGH           3
ABCABC             3 
```

有没有办法在 Oracle 中干净地做到这一点？我不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T04:05:00.577

不知道“干净”，但这里有两个解决方案。

```
-- The hardcoded, bad performance. No transformation of your string though.
with patterns as (
        select substr('ABCDEFGHIJ', 1, rownum) txt
        from dual 
        connect by level <= length('ABCDEFGHIJ')
    )
select d.txt, coalesce(max(length(p.txt)), 0)
from dummy d
    left join patterns p
        on instr(d.txt, p.txt) = 1
group by d.txt
order by 2 desc;

-- The cool one with regex. 
-- Though transforming your input string, 
-- this can also be done with ease making something that transorms it for you
-- like in the previous example, more complicated task than the previous,
-- as oracle sucks with string manipulation. You can however write it in java.
select d.txt, coalesce(LENGTH(REGEXP_SUBSTR(d.txt, '^A(B(C(D(E(F(G(H(I(J)?)?)?)?)?)?)?)?)')), 0)
from dummy d; 
```

[http://www.sqlfiddle.com/#!4/85ba6/23](http://www.sqlfiddle.com/#!4/85ba6/23)

**更新**

```
with patterns as (
        select substr('ABCDEFGHIJ', 1, rownum) txt
        from dual 
        connect by level <= length('ABCDEFGHIJ')
    )
select d.txt, coalesce(max(length(p.txt)), 0)
from dummy d
    left join patterns p
        on instr(d.txt, p.txt) = 1
where d.txt LIKE substr('ABCDEFGHIJ', 1, 1) || '%'
group by d.txt
order by 2 desc; 
```

更新小提琴：[http ://www.sqlfiddle.com/#!4/37400/6](http://www.sqlfiddle.com/#!4/37400/6)

在 oracle 10g 上测试生成的查询计划

```
SELECT STATEMENT, GOAL = ALL_ROWS       
 SORT ORDER BY                  
  SORT GROUP BY NOSORT          
   NESTED LOOPS OUTER           
    INDEX RANGE SCAN    I <<<< Uses the index.
    VIEW                            
     COUNT                  
      CONNECT BY WITHOUT FILTERING                  
       FAST DUAL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:59:57.633

假设您只想获得那些以开头 `ABCDEFGHIJ`的字符串的匹配计数，并且对于匹配计数这样的字符串`qABCD`将是`0`

```
 SELECT STR,DECODE(SUBSTR(STR,1,1),'A',LENGTH(STR)-
 NVL(LENGTH(REPLACE(TRANSLATE(STR,'ABCDEFGHIJ',' '),' ','')),0),0) MATCHING_LENGTH FROM table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:41:24.550

如果您使用的是 Oracle 11gR2，那么您可以像这样使用[递归公用表表达式](http://docs.oracle.com/cd/E11882_01/server.112/e10592/statements_10002.htm)：

```
with rcte(txt,t, p, c) as
(
  select d.txt , d.txt t, 'ABCDEFGHIJ' p, 0 c  
  from dummy d
  union all
  select txt ,substr(t, 2), substr(p, 2), case when substr(t, 1, 1) = substr(p, 1, 1) then 1 else 0 end 
  from rcte 
  where length(t) > 0  and length(p) > 0  and substr(t, 1, 1) = substr(p, 1, 1)
  )
select txt, sum(c) from rcte
group by txt; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/85ba6/37)（感谢@Roger）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T10:00:01.623

假设匹配条件是符号和位置相等（模式`ABCqqqGH`的值为 5），您可以尝试以下操作：

```
17:57:03 SYSTEM@sandbox> @sf test

VAL
------------------------------
ABCDEFG
ABChello world
ABCDEzoo
ABbar
ABCDEF
ABCDEFGHIJKLMNOP
zzz
qABCD

8 rows selected.

Elapsed: 00:00:00.01
17:57:05 SYSTEM@sandbox> @get match
  1  select t.val, count(l)
  2    from test t
  3    left join (select level l from dual connect by level <= length('ABCDEFGHIJ')) i
  4      on substr(t.val, i.l, 1) = substr('ABCDEFGHIJ', i.l, 1)
  5   group by t.val
  6*  order by 2 desc
17:57:07 SYSTEM@sandbox> /

VAL                              COUNT(L)
------------------------------ ----------
ABCDEFGHIJKLMNOP                       10
ABCDEFG                                 7
ABCDEF                                  6
ABCDEzoo                                5
ABChello world                          3
ABbar                                   2
zzz                                     0
qABCD                                   0

8 rows selected.

Elapsed: 00:00:00.02 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T10:28:40.377

```
declare
       v_1 number := 0;
v_pattern VARCHAR(26) := '&n';
v_f number;
v_spaces VARCHAR(30) := ' ';
v_l number;
v_c varchar(20) := ' ';
v_n varchar(20) := ' ';
    BEGIN
 v_f := Ascii(SubStr(v_pattern,1,1));
v_l := Ascii(SubStr(v_pattern,Length(v_pattern)));
v_spaces := LPad(' ',Length(v_pattern),' ');
for i in (select str,TRANSLATE(REPLACE(str,' ',''),v_pattern,v_spaces) c1,length(REPLACE(str,' ',''))-nvl(length(replace(TRANSLATE(REPLACE(str,' ',''),v_pattern,v_spaces),' ','')),0) c2 from table 
where ascii(substr(str,1,1)) IN (SELECT DISTINCT Ascii(SubStr(v_pattern,LEVEL,1)) FROM dual CONNECT BY LEVEL<=Length(v_pattern))) loop
       for j in 1..i.c2 loop
               v_c :=instr(i.c1,' ',1,j);
               v_n :=instr(i.c1,' ',1,j+1);
               if v_c+1=v_n then
                          v_1 := v_1+1;
               end if;
       end loop;
                  if(v_1+1 = i.c2) then
               dbms_output.put_line('String : '||i.str||' and Matching count : '||i.c2);
       else
               dbms_output.put_line('String : '||i.str||' and Matching count : '||((v_1)-1));
       end if;
   v_1 := 0;
end loop;
FOR k IN (SELECT str FROM table WHERE NOT(Ascii(substr(str,1,1)) IN (SELECT DISTINCT Ascii(SubStr(v_pattern,LEVEL,1)) FROM dual CONNECT BY LEVEL<=Length(v_pattern)))) LOOP
      dbms_output.put_line('String : '||k.str||' and Matching count : '||v_1);
 END LOOP;
 end; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-21T05:53:34.277

我希望以下内容有所帮助：

```
CREATE TABLE TESTME ( TNAME VARCHAR2(30));

INSERT INTO TESTME VALUES('ABCDEFG');
INSERT INTO TESTME VALUES('ABChello world');
INSERT INTO TESTME VALUES('ABCDEzoo');
INSERT INTO TESTME VALUES('ABbar');
INSERT INTO TESTME VALUES('ABCDEF');
INSERT INTO TESTME VALUES('ABCDEFGHIJKLMNOP');
INSERT INTO TESTME VALUES('zzz');
INSERT INTO TESTME VALUES('qABCD');  

CREATE OR REPLACE FUNCTION GET_MLENGTH( P_INPUT VARCHAR2)
 RETURN NUMBER 
IS
 -- COMBARING STRING
 C VARCHAR2(10) := ('ABCDEFGHIJ');
 N NUMBER := 0; 
BEGIN 
  FOR I IN 1..LENGTH(P_INPUT) LOOP
   IF SUBSTR(P_INPUT,I,1) = SUBSTR(C,I,1) THEN
    N := N + 1;
   ELSE
    RETURN N; 
   END IF;  
  END LOOP;
RETURN N;   
END;
/

SELECT TNAME , GET_MLENGTH(TNAME) FROM TESTME ;

TNAME                          GET_MLENGTH(TNAME)
------------------------------ ------------------
ABCDEFG                                         7
ABChello world                                  3
ABCDEzoo                                        5
ABbar                                           2
ABCDEF                                          6
ABCDEFGHIJKLMNOP                               10
zzz                                             0
qABCD                                           0 
```

# iphone - 通过objective-c触发HTML按钮点击？

> ID：15538455
> 
> 赞同：0
> 
> 时间：2013-03-21T02:34:24.873
> 
> 标签：iphone, ios, objective-c, web, network-programming

我的目标是向 Web 服务器发送 HTTP 请求，并为其提供用户名和密码。我把那部分记下来了，它出人意料地奏效了。但是，要真正登录，必须单击“登录”按钮。这完全难住了我？？

```
NSLog(@"Connection started");
        NSURL *loginPage = [NSURL URLWithString:@"www.A_WEBSITE.com"];
        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:loginPage];
        [request setRequestMethod:@"POST"];
        [request setPostValue:@"Username" forKey:@"ct100_plnMain_txtLogin"];
        [request setPostValue:@"Password" forKey:@"ct100_plnMain_txtPassword"];

        [request start];

        NSLog(@"it worked");
        [request setDidFailSelector:@selector(AttemptFail:)];
        [request setDidFinishSelector:@selector(AttemptSucceed)];

        NSError *error = [request error];
        if (!error) {
            NSString *response = [request responseString];
            NSLog(@"%@",response);
                    }

            else {
                NSLog(@"%@",[request error]);
            } 
```

鉴于我有它的 ID，有谁知道我可以触发按钮上的点击事件的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:17:54.330

使用 js 发送请求并通过以下方式进行验证：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:37:41.480

```
[UIWebView stringByEvaluatingJavaScriptFromString:@"functionName()"]; 
```

`functionName()`在标签内的 html 文件中写入方法`<script>`和按钮单击的 perofrm 动作

# stata - 将变量标签、值标签和变量注释导出到数据集（或表）

> ID：15538459
> 
> 赞同：1
> 
> 时间：2013-03-21T02:34:42.723
> 
> 标签：stata, labels

考虑以下示例数据集：

```
member like  deposit   age
1      1    9997    22
2      2     892    23
1      1     267    34
1      9    1728    54
3      1    9999    22
1      2    2123    34
9      2     445    13
1      1     928    22
1      1     276    34
2      1       .    23
2      1    3728    45
3      2    3652    34
.      1     451    35
.      1     231    67
2      9     234    17
3      2    3872    37
1      1     102    45
1      1     676    56
3      .       .    35
2      .    9999    67 
```

所有变量都是数字。变量标签和值标签是：

```
label var member "Are you a member of the club?"
label var like "Do you like it?"
label var deposit "How much in your account?"
label var age "Age"

label values member memberl, nofix
label define memberl 1 "member" 2 "nonmember" 3 "waiting" 9 "Refuse to answer"
label values like like, nofix
label define like 1 "like" 2 "don't like" 9 "don't know"
label value deposit dmoney, nofix
label define dmoney 9997 "N/A" 9999 "don't know" 
```

年龄变量没有系统缺失值，也没有使用定义的缺失值。每个变量都有一个注释（调查问题编号）：

```
notes member: QT35
notes like: QR22
notes deposit: Q6
notes age: info3 
```

我的目标是将这些信息导出到单个数据集（或 Excel 表）中，如下所示。

以数据集形式：

[http://i1279.photobucket.com/albums/y531/tpbest33/wanted_output_dataform_zps52953ecf.jpg](http://i1279.photobucket.com/albums/y531/tpbest33/wanted_output_dataform_zps52953ecf.jpg)

或者，在 Excel 表格形式中（这是可取的。）：

[http://i1279.photobucket.com/albums/y531/tpbest33/wanted_output_zps2c35208e.jpg](http://i1279.photobucket.com/albums/y531/tpbest33/wanted_output_zps2c35208e.jpg)

（抱歉，我不知道如何编写 html 代码来显示图像。）

我正在试验几个 Stata 基本命令和包：.uselabel、.labutil2、.valtovar. 等。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-07T13:24:15.703

如果您习惯使用 JSON 数据，该`jsonio`程序可以将整个数据集导出为 JSON 对象和/或将 JSON 写入文件。有一个选项也可以打印 JSON 对象中的所有元数据（例如，变量标签、值标签、变量名称等）。如果您想查看示例，可以查看项目的[GitHub Repository](https://github.com/wbuchanan/StataJSON)的 README 。`auto.dta`自述文件显示了使用数据集的输出示例。

# windows-phone-7 - WP7：如何计算数据模板中列表框的子项？

> ID：15538462
> 
> 赞同：0
> 
> 时间：2013-03-21T02:34:53.690
> 
> 标签：windows-phone-7

我创建了一个透视控件，通过使用绑定数据来显示我的数据库中的所有数据。枢轴控件的代码如下所示。和这里的 UI 视图：[照片](https://lh4.googleusercontent.com/-MziOnXrSWaM/UUpvUxlijxI/AAAAAAAAAIU/FH2dV30RlzY/s468/Untitled.png)

我想解决这个问题：**在我点击列表框的一个项目（枢轴控件）后，我会得到项目的名称。**

**注意：**所有控件都没有名称 (x:name)。我正在尝试使用 Tag="{Binding CHUPHONG}" 替换 x:name。

你能告诉我解决这个问题的方法吗？或者我错在哪里？非常感谢！

```
 <controls:PivotItem Header="PHÒNG CHƠI" FontSize="19" Margin="0" Background="{x:Null}">
        <ListBox x:Name="listDSPhong">
            <ListBox.ItemTemplate>
                <DataTemplate>

                    <toolkit:WrapPanel Height="120" Width="480" Margin="0,10,0,20">
                        <Image HorizontalAlignment="Left" Height="120" VerticalAlignment="Top" Width="120" Source="/LuanVanDeMo;component/xephinhlogo.png"/>

                        <TextBlock Margin="4,44,-98,44" TextWrapping="Wrap" Text="Chủ phòng:" HorizontalAlignment="Left"/>
                        <TextBlock Height="32" Margin="0,5,-98,0" TextWrapping="Wrap" Text="Tên phòng:" VerticalAlignment="Top" HorizontalAlignment="Left" Width="98"/>
                        <TextBlock Margin="0,0,-98,4" TextWrapping="Wrap" Text="Số lượng:" Height="32" VerticalAlignment="Bottom" HorizontalAlignment="Left" Width="98"/>

                        <TextBlock Margin="102,44,-242,44" TextWrapping="Wrap" Text="{Binding TENPHONG}" Width="140" Height="32" HorizontalAlignment="Left"/>
                        <TextBlock Height="32" Margin="102,5,-242,0" TextWrapping="Wrap" VerticalAlignment="Top" Text="{Binding CHUPHONG}" Width="140" HorizontalAlignment="Left"/>
                        <TextBlock Margin="102,0,-134,4" TextWrapping="Wrap" Height="32" VerticalAlignment="Bottom" Text="{Binding SOLUONG}" Width="32" HorizontalAlignment="Left"/>

                        <Image HorizontalAlignment="Left" Width="50" Source="/LuanVanDeMo;component/Images/Buttons/lock.png" Margin="285,35,0,35" Height="50"/>
                    </toolkit:WrapPanel> 

                </DataTemplate>
            </ListBox.ItemTemplate>              
        </ListBox>
    </controls:PivotItem>            
</controls:Pivot> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:49:19.927

ItemContainerGenerator.ContainerFromIndex(SelectedIndex);

[获取所选项目](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemcontainergenerator.aspx)

# php - Jquery parsing response from api bbyopen

> ID：15538463
> 
> 赞同：0
> 
> 时间：2013-03-21T02:34:55.263
> 
> 标签：php, javascript, jquery, json, curl

I am having trouble parsing from this api. Can you see what I have done?

The PHP Curl Call:

```
// create a new cURL resource
$ch = curl_init();

// set URL and other appropriate options
$options = array(CURLOPT_URL => 'http://api.remix.bestbuy.com/v1/products(salePrice<='.$dollars.'&type=Music)?apiKey=gzunxsecretsdssf444&format=json&show=name,salePrice,shortDescription,image',
                 CURLOPT_HEADER => false,
                 CURLOPT_RETURNTRANSFER => 1
                );

curl_setopt_array($ch, $options);

// grab URL and pass it to the browser
echo curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch); 
```

The js:

```
$.ajax({
           url: "./file.php",
           type: 'GET',
            dataType: 'JSON',
           success: function (data) {
                console.log("Success");
                console.log(data);
                for(var i=0;i<=data.products.length;i++)
                {
                    var thumb=data.products[i].image;
                    $('<div class="product" style="background-color:green"><a href=""><img src="'+ thumb +'" alt""/></a></div>').appendTo('#find_stuff_div');
                }
            }
           }); 
```

var thumb=data.products[i].image; is where I am having trouble. The object itself logs (apparently as json) but var thumb returns "Uncaught TypeError: Cannot read property 'image' of undefined ". Any ideas?

Console log ![console](../Images/5290a51f1d834b1350c8c0067c42ad89.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:18:24.260

对不起，你的 for 循环是错误的

```
for(var i=0;i<data.products.length;i++) 
```

数组索引从`0`to开始，所以你的条件不`length - 1`应该是`i<data.products.length``i<=data.products.length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:56:26.587

您需要调用`JSON.parse()`返回的数据才能将其用作对象。

# javascript - Dynamically loading html and clearing DOM

> ID：15538464
> 
> 赞同：0
> 
> 时间：2013-03-21T02:34:58.167
> 
> 标签：javascript, ajax, jquery-mobile

So I'm working with a few multipage Jquery Mobile documents that I want to be able to navigate between but not leave the WebView created by the mobile web app and still have the transitions. I've come across Todd Thomson's subpage widget and basically couldn't understand how to set everything up (visual learner and there are no template or demos on his github, no worries Todd if your out there).

So my question is, when you navigate from `index.html` to a multipage Jquery mobile document,`page1.html` via ajax is it possible to clear out what remains from the `index.html` and load the rest of the `page1.html` after the transition?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:05:48.650

当您从 index.html 链接到 page1.html（这是一个多页文档）时，您需要将属性**rel="external"**添加到链接中。这为您清除了 dom，以允许通过 # 锚点在文档中的多个页面之间进行链接。

# ios - Why do I get this error when compiling a LiveCode iOS external for device but it compiles fine for the simulator?

> ID：15538466
> 
> 赞同：1
> 
> 时间：2013-03-21T02:35:20.997
> 
> 标签：ios, objective-c, xcode, dropbox, livecode

Here's the error:

```
Undefined symbols for architecture armv7:
  "___udivmodsi4", referenced from:
      _sqlite3BitvecSet in libmergDropboxSync.a(sqlite3.o)
      _sqlite3BitvecClear in libmergDropboxSync.a(sqlite3.o)
      _sqlite3BitvecTest in libmergDropboxSync.a(sqlite3.o)
ld: symbol(s) not found for architecture armv7
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/np/1scdfrdd7kx64bbykn22wj200000gn/T//ccvBM79H.out (No such file or directory)
error: linking step of external dylib build failed, probably due to missing framework or library references - check the contents of the mergDropboxSync.ios file
Command /bin/sh emitted errors but did not return a nonzero exit code to indicate failure 
```

When I build for the simulator it builds fine. My library is compiling fine. It's only at the linking stage for the dylib that is documented in lclink.sh as only for a dependency check for device builds that there's an issue:

```
# Build the 'dylib' form of the external - this is used by simulator builds, and as
# a dependency check for device builds.
"$PLATFORM_DEVELOPER_BIN_DIR/g++" -dynamiclib $ARCHS -isysroot "$SDKROOT" -o "$BUILT_PRODUCTS_DIR/$PRODUCT_NAME.dylib" "$BUILT_PRODUCTS_DIR/$EXECUTABLE_NAME" $SYMBOL_ARGS $SYMBOLS $DEPS
if [ $? != 0 ]; then
    echo "error: linking step of external dylib build failed, probably due to missing framework or library references - check the contents of the $PRODUCT_NAME.ios file"
    exit $?
fi 
```

I tried skipping this step using the following:

```
if [ "$EFFECTIVE_PLATFORM_NAME" == "-iphonesimulator" ]; then
    # Build the 'dylib' form of the external - this is used by simulator builds, and as
    # a dependency check for device builds.
    "$PLATFORM_DEVELOPER_BIN_DIR/g++" -dynamiclib $ARCHS -isysroot "$SDKROOT" -o "$BUILT_PRODUCTS_DIR/$PRODUCT_NAME.dylib" "$BUILT_PRODUCTS_DIR/$EXECUTABLE_NAME" $SYMBOL_ARGS $SYMBOLS $DEPS
    if [ $? != 0 ]; then
        echo "error: linking step of external dylib build failed, probably due to missing framework or library references - check the contents of the $PRODUCT_NAME.ios file"
        exit $?
    fi
fi 
```

This allowed the script to continue on and build the object files for static linking in the device builds. They built fine but then when I went to build the standalone the dependency check blocked it. Is there any workaround anyone can recommend?

Note that I use a slightly modified lclink.sh which adds weak linking support and optional framework inclusion depending on the SDK you're building against. It can be found here if that helps: [http://repo.goulding.ws/livecodeiossdk/src/b570507fe48274cc4c0f90102809194eafe5225d/lclink.sh?at=master](http://repo.goulding.ws/livecodeiossdk/src/b570507fe48274cc4c0f90102809194eafe5225d/lclink.sh?at=master)

* * *

**EDIT**

Given that the error was clearly armv7 related I tried a build against armv7s and it builds fine. I'm coming to the conclusion that the the new dropbox sync sdk may have some armv7s only code. It appears to be sqlite related based on the error. Not sure what else to try at this stage...

* * *

**EDIT**

It appears to be a toolchain issue caused by the Dropbox sync api being compiled with Apple LLVM and LiveCode externals and device builds being compiled with Apple GCC.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:32:07.760

这有帮助吗？当我遇到类似的问题时，我写了这个。

[关于链接到 dylib 库的 runrev 课程](http://lessons.runrev.com/s/lessons/m/4071/l/15029-linking-an-osx-external-bundle-with-a-dylib-library)

# c++ - 类成员的定义

> ID：15538474
> 
> 赞同：1
> 
> 时间：2013-03-21T02:36:23.037
> 
> 标签：c++, class

我们可以像这样声明一个类成员：

```
class Test {
public:
    int a;
} 
```

这就是我们声明的方式，但我想知道变量`a`是在哪里定义的。

我知道静态类成员，它是静态变量，所以不能在类中定义，应该在类外定义。所以我认为普通类成员应该有一个定义的地方，我猜它是隐式定义普通成员的构造函数。是对的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:40:07.187

对于非静态数据成员，声明和定义是一回事。

> 所以我认为普通类成员应该有一个定义的地方，我猜它是隐式定义普通成员的构造函数。

我想我可以看到你来自哪里。对于每个静态数据成员，每种类型只有一个变量实例（对于模板 - 每个模板实例化创建一个不同的类型） - 这就是为什么声明更像是普通变量的外部声明 - 它是说“这个变量将有一个某处的地址 - 请链接器稍后在地址中拼接”。*定义*_*是程序要求编译器为特定翻译单元对象中的变量保留实际内存的地方，链接器将找到该变量，并使其可供其他翻译单元中的代码访问，这些翻译单元知道并根据声明访问该变量。（模板有点复杂）。因此，从程序员的角度，松散地说，静态数据成员定义似乎是触发内存分配并安排构造函数运行的源代码行。一旦你写好了定义，分配和构造都被排序了。*

 *但是，对于非静态数据成员，情况却完全不同——当编译器解析类定义时，仍然没有实际请求在任何地方为这些非静态数据成员提供任何内存，因为还没有该类类型的实例对象. 只有当其他一些代码表明需要对象实例时，编译器才需要安排内存（如果不使用放置`new`）和构造。换句话说，对于非静态数据成员的定义和分配/构造通常是解耦的——使用单独的源代码。

这一切都以递归方式应用：当对象实例本身是静态的或文件/命名空间范围时，内存和构造（包括类内的数据成员）将在看到定义时安排（不一定执行），如上所述。但很多时候对象实例位于堆栈或堆上。无论哪种方式，数据成员的分配和构造代码都是由创建包含对象的方式驱动的，并且与数据成员的定义无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:41:07.627

对象的每个实例都在内存中为该对象分配了一些保留空间。可能在堆存储或堆栈中。

它位于该空间内的特定位置，该对象的每个成员变量都被存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:51:07.890

`a`可以在声明之后、在构造函数中或完全在类之外定义。这是一个示例，显示了`a`可以定义的所有方式

```
class Test {
public:
    int a = 5;
    Test() {
        a = 5;
    }
};

int main() {
    Test foo;
    foo.a = 5;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:22:56.383

作为一个好的做法，你应该封装你的数据成员并在特定的方法中管理它们的定义，比如 SetA()、GetA()，你可以在构造函数中给出默认值*

# c# - C# Windows 窗体应用程序 - 使用 gmail smtp 发送电子邮件

> ID：15538478
> 
> 赞同：7
> 
> 时间：2013-03-21T02:36:58.443
> 
> 标签：c#, winforms, smtp

我一直在尝试创建一个小程序通过 smtp.gmail.com 发送电子邮件，但它总是提示我“操作已超时”。我知道网上有很多可用的解决方案，但没有一个有效。

```
try
{
    MailMessage message = new MailMessage();
    SmtpClient smtp = new SmtpClient();

    message.From = new MailAddress("from@gmail.com");
    message.To.Add(new MailAddress("to@gmail.com"));
    message.Subject = "Test";
    message.Body = "Content";

    smtp.Port = 465;
    smtp.Host = "smtp.gmail.com";
    smtp.EnableSsl = true;
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new NetworkCredential("from@gmail.com", "pwd");
    smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtp.Send(message);
}
catch (Exception ex)
{
    MessageBox.Show("err: " + ex.Message);
} 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T02:58:04.553

将端口更改为 587：

```
try
{
    MailMessage message = new MailMessage();
    SmtpClient smtp = new SmtpClient();

    message.From = new MailAddress("from@gmail.com");
    message.To.Add(new MailAddress("to@gmail.com"));
    message.Subject = "Test";
    message.Body = "Content";

    smtp.Port = 587;
    smtp.Host = "smtp.gmail.com";
    smtp.EnableSsl = true;
    smtp.UseDefaultCredentials = false;
    smtp.Credentials = new NetworkCredential("from@gmail.com", "pwd");
    smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
    smtp.Send(message);
}
catch (Exception ex)
{
    MessageBox.Show("err: " + ex.Message);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-19T12:25:11.610

如何发送存储在 c# windows 应用程序 d 驱动器中的 pdf 文件的电子邮件...答案是...

```
MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
            mail.From = new MailAddress(txtFrom.Text.ToString());
            mail.To.Add(txtmailTo.Text.ToString());
            mail.Subject = "Mail Pdf";
            var filename = @"D:/your file path/.pdf";
            mail.Attachments.Add(new Attachment(filename));
            SmtpServer.Port = 587;
            SmtpServer.Credentials = new 
            System.Net.NetworkCredential(txtFrom.Text, txtPassword.Text);
            SmtpServer.EnableSsl = true;
            SmtpServer.Send(mail); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-08T12:51:38.100

您可以使用 SMTP 协议将此图像作为附件发送，您的代码将是这样的：

使用 MailKit.Net.Smtp；使用 MimeKit；

```
 MimeMessage message = new MimeMessage();
        BodyBuilder Attachmint = new BodyBuilder();
        message.From.Add(new MailboxAddress("name sender", "Mail From"));
        message.To.Add(MailboxAddress.Parse("Mail To"));
        message.Subject = Subject;
        message.Body = new TextPart("plain")
        {
            Text = tex_body.Text + Massage
        };

        Attachmint.Attachments.Add("Attatchment Path");
        message.Body = Attachmint.ToMessageBody();

        SmtpClient client = new SmtpClient();
        client.Connect("smtp.gmail.com", 465, true);
        client.Authenticate("Mail from", "Password mail");
        client.Send(message); 
```

# php - 使用 php 和 mysql 搜索多个关键字（其中 X 喜欢）

> ID：15538479
> 
> 赞同：8
> 
> 时间：2013-03-21T02:37:19.273
> 
> 标签：php, mysql, search

我有一个使用 ajax 动态搜索数据库中数据的代码，但我一次只能搜索 1 个关键字。我想对其进行修改，以便可以搜索多个关键字。现在，如果我键入2个以空格分隔的关键字，并且在数据库中，数据不以空格分隔，则不会有结果。如果在数据库中的数据是：

> “playstation3”或“玩酷 station3”

我搜索：

> 播放站

不会有任何结果。我想知道是否可以修改我的代码，以便我可以搜索 2 个或多个关键字或由空格或另一个单词或点或下划线或 (-) 或 (+) 或 (%) 分隔的单词或（任何其他哈哈）。

我知道我应该使用 pdo 或 mysqli，但我仅将其用于测试！

```
$queried = $_POST['query'];

$search = mysql_query("SELECT * FROM links WHERE name LIKE '%$queried%'");
while($searche = mysql_fetch_array($search)){
    echo "".$searche['link']."</br>".$searche['name']."</br>".$searche['size']."</br>".$searche['category']."<hr></br></br>";

    } 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-21T02:55:05.363

动态搜索所有关键词，可以使用explode功能将所有关键词分开；

```
$queried = mysql_real_escape_string($_POST['query']); // always escape

$keys = explode(" ",$queried);

$sql = "SELECT * FROM links WHERE name LIKE '%$queried%' ";

foreach($keys as $k){
    $sql .= " OR name LIKE '%$k%' ";
}

$result = mysql_query($sql); 
```

**注意 1：**在查询中使用用户输入之前，请始终转义它。

**注 2：** mysql_* 函数已弃用，请使用 Mysqli 或 PDO 作为替代

**2018 年更新 - 注意 3：**不要忘记检查`$queried`变量的长度并设置限制。否则，用户可以输入一个不同的大字符串并使您的数据库崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T02:53:53.663

甚至不再使用`mysql_*`函数进行测试。它们并不容易`mysqli`，以防万一您认为在这里测试容易然后移动。

但是，您可以将输入拆分为 a`,`并尝试此操作

```
<?php

$queried="abc,test, testing";
$values=explode(',',$queried);

$sql="SELECT * FROM links WHERE";
$i=0;

foreach($values as $v)
{
    $v=trim($v);
    if($i==0)
    {
        $sql.=" name LIKE '%$v%'";
    }
    else
    {
        $sql.=" OR name LIKE '%$v%'";
    }

    $i++;
}

$search = mysql_query($sql);
while($searche = mysql_fetch_array($search))
{
    echo "".$searche['link']."</br>".$searche['name']."</br>".$searche['size']."</br>".$searche['category']."<hr></br></br>";

}    
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-30T19:16:11.943

这是@Hanky Panky 答案的**MySQL PDO版本**

```
 $queried="abc,test, testing";
 $values=explode(',',$queried);
 $sql="SELECT * FROM citations_new WHERE";
 $i=0;
        foreach($values as $v){
            $v=trim($v);
            if($i==0) {
                $sql.=" name LIKE '%$v%'";
            }
           else {
               $sql.=" OR name LIKE '%$v%'";
           }
           $i++;
         }

$sth = $this->db->prepare($sql);
$sth->execute();
$rows = $sth->setFetchMode(PDO::FETCH_ASSOC);

while($row = $sth->fetch()){
    //enter code here   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T02:49:31.873

只需添加一个 OR 子句。

例如

```
SELECT * FROM links WHERE name LIKE '%$keyword1%' OR name LIKE '%$keyword2%' 
```

但我*强烈*建议您使用参数化查询或其他安全库来避免[Sql 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)

# android - Multiple views on android activity

> ID：15538482
> 
> 赞同：0
> 
> 时间：2013-03-21T02:37:44.010
> 
> 标签：android, android-activity

I'm trying to build an activity in my current application which would split the activity into 2 halves with one running a video and the other running high intense graphics. Is this possible? I have been looking around online and havent been able to come across anything.

The closest I came with my research is that on Note 2 you can have a browser and youtube on the same screen. In this scenario its two different applications being shown on the same screen. Jelly bean may have this feature or it could be a feature of Note 2 itself.

I'm afraid I do not have any code developed at this point to show here as I'm still researching if this is even possible. Any guidance/direction will be much appreciated.

# android - 有没有办法获得编译到项目中的 Drawable 的文件路径？

> ID：15538483
> 
> 赞同：0
> 
> 时间：2013-03-21T02:37:51.157
> 
> 标签：android, bluetooth, drawable

我正在使用以下代码将图像文件发送到蓝牙打印机...

```
 ContentValues values = new ContentValues();
                values.put(BluetoothShare.URI, Uri.fromFile(new File(filePath)).toString());
                values.put(BluetoothShare.DESTINATION, device.getAddress());
                values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND);
                Long ts = System.currentTimeMillis();
                values.put(BluetoothShare.TIMESTAMP, ts);
                Uri contentUri = c.getContentResolver().insert( BluetoothShare.CONTENT_URI, values);
                L.d("Insert contentUri: " + contentUri + "  to device: "+ device.getName()); 
```

这对于 sdcard 上的文件非常有效（注意传入的文件路径，在本示例的第二行）。

但我现在想允许用户打印编译到应用程序中的图像。

我意识到可绘制文件夹没有直接路径，因为 android 如何根据设备分辨率对其图像进行排序，所以，我很好奇代码是什么来获得我可以传递给这个打印方法的东西，这样它会打印应用程序中嵌入的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:48:22.853

```
final Uri uri = Uri.parse("android.resource://your.package.here/drawable/image_name");
values.put(BluetoothShare.URI, uri); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:28:04.173

看起来这个问题的答案是“不”。

# objective-c - How to implement the magnifier glass on color picker of Mac OS?

> ID：15538484
> 
> 赞同：1
> 
> 时间：2013-03-21T02:37:57.123
> 
> 标签：objective-c, macos, cocoa, colors, picker

It's the magnifier glass at the top left:

![](../Images/fe0996ba5c16ef45448c92b1afa1e014.png)

I've tried 2 methods, but both failed.

1.  Once the magnifier glass is clicked, create a new cursor(a cursor with magnifier glass image, or a crossfair, whatever) and push it, then call `nextEventMatchingMask:untilDate:inMode:dequeue:` of `NSApplication` to eat all the events until we get a `NSLeftMouseUp` event. It did works but not perfectly, other windows or apps will be ordered front when the click point is out of the origin window.

2.  Create a NSColorPanel, try to send a fake mouse click event to the panel. It works on the color wheel, but has no effect once I change the event location to the magnifier glass button.

Question in [1]: How could I forbid all system mouse events dispatching until user clicks the left button?

Question in [2]: Is this possible?

Thanks for any response.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T08:51:21.210

如果我们想阻止系统事件调度，可以使用 Quartz 事件服务，但它有两个问题：

1.  应由用户启用可访问性；
2.  沙盒下禁止 Quartz 事件服务。

方法1是不可能成功的。

受@CodaFi 的启发，我决定使用 NSWindow 的子类来实现它。在 gitbub [https://github.com/wentingliu/ScreenPicker](https://github.com/wentingliu/ScreenPicker)创建了一个示例项目，去看看吧。

![](../Images/8df9256674cc75787f03ce746f50dc56.png)

# html - How to change stacking order for java applet

> ID：15538489
> 
> 赞同：1
> 
> 时间：2013-03-21T02:38:27.670
> 
> 标签：html, css, web

I'm building a web site that has a simple applet for fading images. Looks great except when viewing on smaller screen resolution. The images sit on top of other elements of the page. How do I force the applet behind these elements. Static images are fine. I have tried using the z-index and overflow properties to no avail. Please help!

Thanks in advance

# php - Page brings back old session after session_destroy

> ID：15538491
> 
> 赞同：0
> 
> 时间：2013-03-21T02:38:53.823
> 
> 标签：php, session-cookies

No clue why this is doing this. But my logout.php code works fine and redirects to the home page and the session is destroyed. When I go back to a certain page it brings up an old session I don't get it.

Heres my login file

```
 $_SESSION['id'] = $row['user_id'];
   $_SESSION['username'] = $row['username'];
   setcookie('id', $row['user_id'], time() + (60 * 60 * 24 * 2));
   setcookie('username', $row['username'], time() +(60 * 60 * 24 * 2)); 
```

Here is my logout file

```
 // if the user is logged in, delete the cookie to log them out
   session_start();
   if (isset($_SESSION['id'])) {
     $_SESSION = array();

     // delete the user id and the username cookie by setting their expirations to an hour ago (3600)
   if (isset($_COOKIE[session_name()])) {  
      setcookie('session_name()', '', time() - 3600);

   }
   //destroy the session
session_unset();
    session_destroy();
  }

   //delete the user id and username cookies
   setcookie('id', '', time() - 3600);
   setcookie('username', '', time() - 3600);
 unset($_COOKIE['id']);
 unset($_COOKIE['username']);
     unset($_SESSION['id']);
     unset($_SESSION['username']);
   // redirect to the home page
   $home_url = 'http://page.com/';
   header('Location: ' . $home_url);
   exit(); 
```

Here is the code I have on my page:

session_start();

```
// If the session vars aren't set, try to set them with a cookie
if (!isset($_SESSION['id'])) {
  if (isset($_COOKIE['id']) && isset($_COOKIE['username'])) {
    $_SESSION['id'] = $_COOKIE['id'];
    $_SESSION['username'] = $_COOKIE['username'];
  }
} 
```

This code works fine on the home page, but when I got into a sub directory it brings up a random old session.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:53:56.800

您是否尝试过在销毁会话之前先取消设置会话，而不是仅仅销毁会话？

```
unset($_SESSION['id']);
unset($_SESSION['username']); 
```

然后调用你的 session_destroy() 函数。

另外，我在某处读到（不记得在哪里，不幸的是 - 可能是这样，甚至......）将直接 SQL 结果（$row['id']）存储在 cookie 中不是一个好主意。最好先将结果存储在 $_SESSION 中，然后将 $_SESSION 存储在 cookie 中。

# javascript - Selenium fileupload path format issue

> ID：15538492
> 
> 赞同：0
> 
> 时间：2013-03-21T02:38:54.463
> 
> 标签：javascript, html, selenium

I'M trying to upload a file via Selenium IDE, the path is the following:

```
driver.FindElement(By.Id("fileupload")).SendKeys("C:\\Users\\myuser\\Documents\\Visual Studio 2010\\Projects\\TestPackages\\new-package\\0.0.1\\new-package.zip"); 
```

The query fails because the sendkey path is actually:

```
C:\\Users\\myuser\\Documents\\Visual Studio 2010\\Projects\\TestPackages\ew-package\\0.0.1\ew-package.zip 
```

Notice the \n disappear. How can I stop this?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:59:43.283

我认为 \n 正在消失，因为字符串中的 \n 表示新行

你需要双斜线还是用它来逃避斜线？

尝试像这样添加一个额外的斜线：

```
{
C:\\\Users\\\myuser\\\Documents\\\Visual Studio 2010\\\Projects\\\TestPackages\\\\\new-package\\\0.0.1\\\\\new-package.zip    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:57:14.267

我认为以下方法可以解决问题，

而不是转义序列使用**@**如下所示。格式化文件路径，就像它在 Windows 资源管理器中的显示一样，

```
driver.FindElement(By.Id("fileupload")).SendKeys(@"C:\Users\myuser\Documents\Visual Studio 2010\Projects\TestPackages\new-package\0.0.1\new-package.zip"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:45:56.883

好的，这是一个棘手的问题，似乎只与 selenium IDE 有关。我解决此问题的方法是在“源”选项卡而不是“表”选项卡中编辑文件路径。

似乎 selenium ide 背后的引擎会尝试将 \n 转换为
. 所以我只是删除了html标签。

# list - Append to List Variable with Racket

> ID：15538494
> 
> 赞同：3
> 
> 时间：2013-03-21T02:38:55.743
> 
> 标签：list, scheme, append, racket

I want to add an integer to a list that already exists using Racket. Here is the code that I have so far.

```
(define (countBlackPegs gameList playerList)
(define blackPegs '())

(if (equal? (car playerList) (car gameList)) 
  (set! blackPegs '(1))
;;otherwise
  (set! blackPegs '(0)))
) 
```

In theory I should be able to repeat the if statement (examining a different part of the list each time) and then append the blackPegs list with the appropriate value based on the result of the if statement. Unfortunately every append function I have tried doesn't work correctly. Any help would be appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:43:17.560

如果您想修改（使用`set!`）已经存在的列表，请按照以下方式执行操作，以便在开头添加新元素：

```
(set! blackPegs (cons 1 blackPegs)) 
```

或者在最后添加一个新元素：

```
(set! blackPegs (append blackPegs (list 1))) 
```

但是，请注意，在 Scheme 中不建议使用这种编程风格，您应该尽量避免变异变量 - 首选函数式编程风格。

# ruby - Can Diaspora* be used as the social part of a site?

> ID：15538495
> 
> 赞同：1
> 
> 时间：2013-03-21T02:39:05.950
> 
> 标签：ruby, social-networking, diaspora

I'm in a search for social network development in Ruby and Diaspora* cought my attention. Though the idea is have a social network 'hosted' by many and owned by none is great, I don't quite understand if I can use it to make the social part of a custom site. And whether this custom site being unrelated to the network and using it's code only to support the site, or will it be integrated.

Last, can the design be changed? to fit this custom site.

I tried to find information on their FAQ and github docs, but nothing on these terms.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T17:04:05.083

Diaspora* 是一个独立的社交网络服务器应用程序，它并非设计为另一个应用程序中的一个模块。即使许可证允许，也很难将其修改为更大应用程序的一部分。

然而，很可能只使用 Diaspora* 实施的联合协议并将您的应用程序集成到整个 Diaspora* 网络，而无需使用任何原始代码。您只需要知道 Diaspora* pod 是如何相互通信的。

如果您想在现有的 Ruby 应用程序中实现社交媒体功能，最好选择一些社交媒体框架，而不是 Diaspora*。[有关一些示例项目，](https://stackoverflow.com/questions/48320/best-ruby-on-rails-social-networking-framework)请参阅此问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T08:09:46.730

Diaspora 由 AGPLv3 和 MIT 许可证授权。

AGPLv3 由自由软件基金会出版，该基金会是由 Richard Stallman 创立的非营利组织，旨在支持自由软件运动，该运动旨在促进创建、分发和修改计算机软件的普遍自由。

MIT 许可与 GPL 兼容，这意味着 GPL 允许与使用 MIT 许可的软件组合和重新分发，前提是许可软件的所有副本都包含 MIT 许可条款的副本。

关于您成功定制和/或修改，Godspeed。

# authentication - SugarCRM, Getting Current Logged in User Details through AJAX Call

> ID：15538499
> 
> 赞同：2
> 
> 时间：2013-03-21T02:39:49.307
> 
> 标签：authentication, sugarcrm

I have written a custom PHP file to be called from AJAX request for SugarCRM. However, when I try to print

```
global $current_user;

print_r($current_user); 
```

It prints blank values with all the fields listed in the array like below.

```
User Object
(
    [name] => 
    [full_name] => 
    [id] => 
    [user_name] => 
    [user_hash] => 
    [salutation] => 
    [first_name] => 
    [last_name] => 
    [date_entered] => 
    [date_modified] => 
    [modified_user_id] => 
    [created_by] => 
    [created_by_name] => 
    [modified_by_name] => 
    [description] => 
    [phone_home] => 
    [phone_mobile] => 
    [phone_work] => 
    [phone_other] => 
    [phone_fax] => 
    [email1] => 
    [email2] => 
    [address_street] => 
    [address_city] => 
    [address_state] => 
    [address_postalcode] => 
    [address_country] => 
    [status] => 
    [title] => 
    [portal_only] => 0
    [department] => 
    [authenticated] => 
    [error_string] => 
    [is_admin] => 0
    [employee_status] => 
    [messenger_id] => 
    [messenger_type] => 
    [is_group] => 
    [accept_status] => 
    [team_id] => 
    [receive_notifications] => 1
    [default_team] => 
    [reports_to_name] => 
    [reports_to_id] => 
    [team_exists] => 
    [table_name] => users
    [module_dir] => Users
    [object_name] => User
    [user_preferences] => 
    [importable] => 1 
```

.....

I have searched in SugarCRM Forums but no use. I suspect the reason could be valid entry point is not defined in my custom page, as don't understand how to define except the following methods

```
if(!defined('sugarEntry'))define('sugarEntry', true);
  if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point'); 
  require_once('include/entryPoint.php'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T02:43:33.333

我知道这个问题可以追溯到 2013 年，想到分享:)

当你打电话时会发生这种情况

```
global $current_user; 
```

在 sugarcrm 之外，我做的一个选项是在自定义用户模块中创建一个钩子并在那里访问 $current_user 变量，并且只获取那些需要的值，也许保存在会话中？，取决于你。

希望这对任何人都有帮助:)

**我所做的示例**

创建文件**custom_external_session.php**

```
<?php if(!defined('sugarEntry') ||!sugarEntry) die('Not A Valid Entry Point');
class custom_external_session {
     function get_current_user(& $focus, $event, $arguments){
          global $current_user;
          $user_id = $current_user->id;
          session_start();
          $_SESSION["custom_current_user"] =  $user_id;
     }
} 
```

*   将此文件上传到 /var/www/html/sugarcrm/custom/modules/Users/

**注意：/var/www/html/sugarcrm/ -> 这取决于您放置 sugarcrm 的位置**

*   然后在该文件夹**(/custom/modules/Users/)**上，编辑 logic_hooks.php 然后添加此代码

    ```
    $hook_array['after_login'][] = Array(5, 'custom_external_session', 'custom/modules/Users/custom_external_session.php', 'custom_external_session', 'get_current_user'); 
    ```

*   你现在可以使用这个：**$_SESSION["custom_current_user"]**来获取当前的 user_id，然后你可以用它来记录，也可以编辑或添加更多关于保存会话的信息，比如你想要全名等，就做它在 custom_external_session 下。我不确定是否有更好的方法使用外部代码

*   **请记住在编辑custom_external_session**时始终重新登录，以便更新值。

希望这对你来说更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-30T16:17:44.313

另一种方法是从js端加载

```
var userBean = app.data.createBean("Users", { id: app.user.id });
userBean.fetch({
         success:function(userData){
          //everything you need will be on userData
          }
}); 
```

# jquery - How to detect which submit button is clicked in a web form using jquery

> ID：15538501
> 
> 赞同：1
> 
> 时间：2013-03-21T02:40:01.737
> 
> 标签：jquery, submit

If I have 2 submit buttons on a form:

```
<input name="submit" type="submit" value="Button 1">
<input name="submit" type="submit" value="Button 2"> 
```

I have this jquery but every time I click button 2 I get the alert for button 1.

```
$('form.profile').submit(function() {
if ($("input[type=submit]").val() == 'Button 1')
{
alert('you clicked button 1');
return false;
}
elseif ($("input[type=submit]").val() == 'Button 2')
{
alert('you clicked button 2');
return false;
}
}); 
```

I need to perform form validation before the form is sent to the server and I need to be able to determine which of the 2 buttons was clicked.

Is it possible to identify which of the 2 buttons caused the form to be submitted using jquery?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:47:10.967

这有帮助吗！！！ [http://jsfiddle.net/hun4U/](http://jsfiddle.net/hun4U/)

您可以使用点击事件代替 formSubmission。

HTML:-

```
<input name="submit" id="submit1" type="submit" value="Button 1">
<input name="submit" id="submit2" type="submit" value="Button 2"> 
```

脚本

```
$('#submit1').click(function(){
//do your actions here
});

$('#submit2').click(function(){
    //do your actions here
    }); 
```

# apache-pig - Pig Round Decimal to Two Places

> ID：15538504
> 
> 赞同：0
> 
> 时间：2013-03-21T02:40:07.633
> 
> 标签：apache-pig

Any ideas on how I Can Round a Float data type to 2 decimal places in Apache Pig?

For example:

```
 test = FOREACH (JOIN Load by (Op1, Op2), Load2 by (Op3,Op4)) GENERATE 
  Load2::Number2 *Load::Number1 as Output 
```

The fields Number1 and Number2 are floats.My current calculations give me 5 to 6 decimal places.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:11:20.000

尝试这个：

```
 B = FOREACH A GENERATE (((A.myfloat1 * A.myfloat2)*100f)ROUND)/100f AS myfloat3 
```

# python - Selective exposure of methods and variables of one class to another in Python | (interfaces?)

> ID：15538506
> 
> 赞同：2
> 
> 时间：2013-03-21T02:40:14.487
> 
> 标签：python, oop, interface

I am trying to create a simulation of a simple robot which moves about in a 2-D world using pygame. There are obstacles in the world. The robot only has contact sensors. So it can only sense something if it collides either with the boundaries of the world or the obstacles in it. So, collision detection is of utmost importance here.

I have two principal classes World and Robot. The World class contains information about the geometry of the world and also contains a list of Obstacles. The Robot class contains information about the Geometry of the robot and it's current position in the world. I believe, (but I am not sure ) that Robot should be contained in the World class since it is a part of the world. The Robot has methods to display itself and move which changes its position in the world. But for collision detection, I need information about the World such as its boundaries and the list of obstacles.

Now, I could make work my simple simulation by making the World class instance a member of the Robot class. This way, my robot gets information about the world and I happily do the collision detection. But, this doesn't make me happy.

Because, I might want to extend the simulation by having other robots in the world and things in the world which I don't want to expose to the robot (I am just experimenting with various AI algorithms here). In future, I might want to try out something wherein the robot has 0 knowledge of the world and it gains knowledge by exploring it.

If this were Java, I would have created an interface (say RobotWorldKnowledge) which the World class would implement and pass this to the Robot class. This interface would have selective knowledge of the world which the robot would use.

I don't know how to do this in python. I tried Googling "interfaces in python" but couldn't find a proper example. Most answers tell that interfaces are not necessary in python.

I might be wrong in what I assumed. Please help me out.

Thanks in advance

shahensha

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:57:40.973

Python 没有接口。也许您可以使用该[`abc`](http://docs.python.org/2/library/abc.html)模块编写一个抽象基类，并让您世界中的所有对象都实现抽象方法。

例如，您可以：

```
import abc

class RobotWorldKnowledge(object):
    __metaclass__ = abc.ABCMeta

    @abc.abstractmethod
    def get_information(self, *args):
        pass

    ...

class Robot(RobotWorldKnowledge):
    def get_information(self, *args):
       ...

class World(RobotWorldKnowledge):
    def get_information(self, *args):
        ... 
```

或者，您只需声明，当您在文档中提到一个`RobotWorldKnowledge`项目时，您的意思是一个对象实现了一个`X`具有特定签名的方法，该方法应该以某种方式返回信息......所以您在文档中定义接口并将其余所有内容留给回避-打字。

这是一个常见的解决方案（参见标准库中经常使用的类似文件的对象）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T02:52:24.757

Python中有很好的接口框架——但它也可以创建一个快速而肮脏的东西——比如一个对象代理，它只会暴露底层对象的所需方法和属性。

这可以简单地`__getattribute__`在类中编写适当的方法来完成：

```
class Interface(object):
    def __init__(self, real_object, interface):
        if isinstance(interface, str):
            interface = interface.split()
        self.interface  = interface
        self.object = real_object
        Interface.validate(self)

    def __getattribute__(self, attr):
        # Retrieve the real attributes of self,
        # bypassing the normal attribute mechanism:
        interface = object.__getattribute__(self, "interface")
        real_object =  object.__getattribute__(self, "object")
        if attr in interface:
            return getattr(real_object, attr)
        raise AttributeError

    def validate(self):
        interface = object.__getattribute__(self, "interface")
        real_object =  object.__getattribute__(self, "object")
        for attr in interface:
            try:
                getattr(real_object, attr)
            except AttributeError:
                raise ValueError("Passed object does not conform to given interface") 
```

和：

```
>>> class A(object):
...   a = 1 
...   b = 2
...   c = 3
... 
>>> a = A()
>>> b = Interface(a, "a b")
>>> b = Interface(a, "a b")>>> b.a
1
>>> b.b
2
>>> b.c
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 16, in __getattribute__
AttributeError
>> class C(object): pass
... 
>>> Interface(C(), "a")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in __init__
  File "<stdin>", line 25, in validate
ValueError: Passed object does not conform to given interface 
```

# java - Dealing with end of 'file' using BufferedReader.read()

> ID：15538509
> 
> 赞同：0
> 
> 时间：2013-03-21T02:40:49.267
> 
> 标签：java, sockets

I have a client server program which MUST send a file's content as a String and am having trouble deciding how to end the while loop containing the BufferedReader.read method.I have the code as:

```
while((c = in.read()) != -1){                             
    fw.write((char)c);
    System.out.print((char)c);
} 
```

But as it uses sockets, it never reaches -1 until the socket is closed. I cant figure out an ending clause for the while loop to reach. Are there any special characters?

Went with:

```
while((line = in.readLine()) != null && !line.equals(BasicProtocol.SENDING_FILE_DONE)) 
```

where SENDING_FILE_DONE is a String which is added to the end of the stream. Not a good way of doing it but has to be this way (I believe) when the data must be a String.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:57:13.930

> 我有一个客户端服务器程序，它必须将文件的内容作为字符串发送

为什么？馊主意。它应该作为字节发送。否则，您将面临数据损坏的风险。

> 并且无法决定如何结束包含该`BufferedReader.read()`方法的 while 循环

1.  您根本不应该使用 a ，而`BufferedReader`应该使用 a `BufferedInputStream`，以避免文件包含文本的假设。
2.  您应该在文件之前发送文件大小，并且您应该读取文件大小，然后循环直到您读取了那么多字节，或者您应该在发送文件后关闭套接字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T02:47:11.463

如果您使用的是 BufferedReader，您可以尝试一次读取整行 ..

```
String line;
while((line = in.readLine()) != null) {
  // your code here
} 
```

# html - twitter bootstrap - 增加表单字段的高度以匹配按钮

> ID：15538513
> 
> 赞同：4
> 
> 时间：2013-03-21T02:41:11.660
> 
> 标签：html, forms, css, twitter-bootstrap, twitter-bootstrap-2

我正在尝试使用 twitter bootstrap 使搜索栏的高度和字体大小更大。这样它也可以在响应模式下工作。

```
<div class="hero-unit center">

    <h2>Search</h2>

    <form class="form-search">
        <div class="input-append">
            <input type="text" class="span6 search-query" placeholder="Type here...">
            <button type="submit" class="btn btn-large">
                <i class="icon-search"></i>
                Search
            </button>
        </div>
    </form>
</div> 
```

问题是我在按钮上使用 btn-large 类，但不知道是否有等效的方法可以使搜索字段也更大..

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:32:50.033

不，文本输入只有大小和对齐方式。而且你不能只添加 btn-large 因为它被忽略了。但是，您可以使用与 btn-large 完全相同的功能将内联 css 添加到输入中

```
style="padding: 11px 19px;font-size: 17.5px;" 
```

或在 CSS 类中

```
input.edit-btn-large {
   padding: 11px 19px;
   font-size: 17.5px;
}

<form class="form-search">
  <div class="input-append">
     <input type="text" class="span6 search-query btn-large" placeholder="Type here..." style="padding: 11px 19px;font-size: 17.5px;">
       <button type="submit" class="btn btn-large">
          <i class="icon-search"></i>
          Search
      </button>
   </div>
</form> 
```

完美对齐:-)

![在此处输入图像描述](../Images/4aca36bf694c8d0bd6b9e0287f592330.png)

**更新**

* * *

我在响应式设计上搞砸了很多，例如`@media all { }`等等，但似乎没有什么真正起作用。然而，只需`span6`从类声明中删除（我不明白为什么这应该在 -element 上是必要`<input>`的），它适用于所有分辨率！

例如

```
input.edit-btn-large {
   font-size: 17.5px;
   padding: 11px 19px;
} 
```

和

```
<input type="text" class="search-query edit-btn-large" placeholder="Type here..."> 
```

# c - 左值的 c 奇怪语法（在 linux 内核中：per_cpu）

> ID：15538514
> 
> 赞同：0
> 
> 时间：2013-03-21T02:41:13.660
> 
> 标签：c, linux-kernel

全部。

当我浏览 Linux 内核源代码时，我发现了这个片段：

```
per_cpu(zcache_dstmem, cpu) = NULL; 
```

如果我查看 per_cpu 的定义，是这样的：

```
#define VERIFY_PERCPU_PTR(__p) ({                       \
        __verify_pcpu_ptr((__p));                       \
        (typeof(*(__p)) __kernel __force *)(__p);       \
})

#define per_cpu(var, cpu)       (*((void)(cpu), VERIFY_PERCPU_PTR(&(var)))) 
```

如果我解析预处理器，它将变为：

```
*((void)(cpu), { __verify_pcpu_ptr(&zcache_dstmem); (typeof(zcache_dstmem) __kernel _-force *)(__p); }) = NULL 
```

我有一种强烈的感觉，我错误地解析了它，并且不知道我如何理解这个片段。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:18:13.000

错过了一位替补。

```
*((void)(cpu), { __verify_pcpu_ptr(&zcache_dstmem); (typeof(zcache_dstmem) __kernel __force *)(&zcache_dstmem); }) = NULL 
```

这是逗号操作中的[语句表达式](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html#Statement-Exprs)示例。块的结果是最后一个表达式。我不知道它对部件做了什么`(void)(cpu)`，但`&zcache_dstmem`看起来它被设置为 NULL？祝你好运进一步解开这个问题！

# c# - 如何调试单个 ASPX 文件？

> ID：15538520
> 
> 赞同：2
> 
> 时间：2013-03-21T02:41:30.847
> 
> 标签：c#, asp.net

如何调试单个 ASPX 文件？

我对 ASPX 文件有些陌生，但我对 C# 并不陌生。

我认为所有 asp.net c# 项目都作为编译代码在服务器上运行。所以在某个地方有某种二进制文件，或者可能是像 Silverlight 那样的 XAP 文件。

但似乎情况并非如此。有时，您似乎可以拥有一个 ASPX 文件以及代码隐藏 C Sharp 文件，它就像 PHP 文件一样运行。首先，是这样吗？到目前为止我是对的吗？

现在，如果我是 ASPX 文件和 CSHARP 代码隐藏文件的所有者，我将如何在 Visual Studio 中调试它？

如何运行代码？

我的观点是没有要加载的项目。只有一个文件。

设置断点后，就没有什么可运行的了。我尝试附加到加载了 aspx 代码的浏览器，但随后断点变为非活动状态。

该文件是[https://www.seattleu.edu/admission/nonMatricLander.aspx](https://www.seattleu.edu/admission/nonMatricLander.aspx)

在服务器上只有 aspx 文件和随附的 .cs 文件

这就是全部。没有解决方案文件，没有 default.aspx 文件，除了其他 .aspx 文件和 aspx.cs 文件之外，该目录中没有其他任何内容。

如果它是一个 Web 表单，就会有一个项目文件和/或一个解决方案文件。会有一些编译的，对吧？没有这样的。没有dll文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T03:05:00.663

假设您已经让 ASPX 页面呈现在本地 IIS 服务器上（即通过拖放到默认站点的文件夹）。

在 Visual Studio 中

*   在您选择的浏览器中打开页面（来自 localhost:....）
*   调试器 -> 附加到进程
*   查看 w3wp 是否在列表中，如果没有选中“显示所有用户”复选框，可能需要以管理员身份运行 VS（或具有调试权限的用户）
*   附加到 w3wp（如有必要，请确保选择正确的 .Net 版本）
*   打开 ASPX/ASPX.cs 并设置断点
*   在浏览器中刷新页面以命中断点

注意：创建一个 Web 项目会更容易，因为您将能够使用 VS 提供的本地服务器和更轻松的整体体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:10:16.147

通常，DLL 文件不会与实际的 aspx 页面位于同一位置。c-sharp 文件必须编译成 DLL，否则页面将无法运行。我想到了两种不同的可能性：1.) DLL 文件位于另一个文件夹中，您看不到它或没有权限查看它，或者 2.) 该页面最初是在 Visual Studio 中设计的，但是更改为使用 jQuery 或 JavaScript 来处理表单提交。一条线索：

```
<input type="submit" name="ctl00$ctl00$MainContentPlaceholder$cphBody$btnSubmit"
value="&nbsp;" 
onclick="$(this).hide();$('#Processing').show();return true; 
;WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ctl00$MainContentPlaceholder$cphBody$btnSubmit&quot;, &quot;&quot;, 
true, &quot;&quot;, &quot;&quot;, false, false))" 
id="ctl00_ctl00_MainContentPlaceholder_cphBody_btnSubmit" class="btnSubmit"> 
```

WebForm_DoPostBackWithOptions 是一个 .NET 特定功能 - 我认为您可能缺少 DLL，它位于网站的其他位置。

要调试实际的 aspx/aspx.cs 文件本身，我建议将两者都放在一个项目中。这比尝试在 IIS 管理器中移动要容易得多。

# .net - Visual Studio 2012 构建错误命名空间

> ID：15538522
> 
> 赞同：0
> 
> 时间：2013-03-21T02:41:47.187
> 
> 标签：.net, windows-8, visual-studio-2012

我是 Visual Studio 的新手，所以也许这是一个非常初级的问题。我是一名用户体验设计师，所以编程并不是我的专长。我目前正在尝试构建我们创建的应用程序并进行一些问答测试。当我尝试构建应用程序并进行测试时，我遇到了许多错误，但是我不明白错误是什么或如何解决它们？

我收到 27 个错误，看起来或多或少像这样，但有不同的“项目”

> 找不到类型或命名空间名称“BindableBase”（您是否缺少 using 指令或程序集引用？）
> 
> C:\WindowsApps\Win8_Enterprise_Studio\WestJet\WestJetTablet\Easyjet.FlightTracker.W8App\Model\FeedData.cs Oltiva.FlightTracker.W8App

有人可以在这里给我一些关于如何解决问题的观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:44:03.630

确保持有的大会`BindableBase`能够建立。如您所见，如果它没有构建，其他引用它的项目可能会抱怨。

# c++ - 可以将原始指针传递给需要迭代器的模板函数吗？

> ID：15538523
> 
> 赞同：4
> 
> 时间：2013-03-21T02:41:47.430
> 
> 标签：c++, pointers, iterator

可以将原始指针传递给期望迭代器的模板函数吗？我是否认为迭代器只是一个覆盖与指针相关的运算符（例如 *、++ 等）的类，或者迭代器是否公开了指针没有的任何附加接口？换句话说，指针“看起来像”迭代器吗？

例子：

我想使用`boost::algorithm::knuth_morris_pratt_search`（[此处的文档](http://www.boost.org/doc/libs/1_53_0_beta1/libs/algorithm/doc/html/the_boost_algorithm_library/Searching/KnuthMorrisPratt.html)）。

我的语料库（要搜索的字符串）和模式（要查找的字符串）只是内存中的字节 - 我有一个包含起始地址和字节长度的指针。为了论证起见，假设它是一个 c 风格的字符串。

根据文档，该`knuth_morris_pratt_search`函数要求我为语料库和模式传入开始和结束迭代器。

**我希望使用的功能：**

```
template <typename patIter, typename corpusIter>
corpusIter knuth_morris_pratt_search (
        corpusIter corpus_first, corpusIter corpus_last,
        patIter pat_first, patIter pat_last ); 
```

**我可以这样做吗？**

```
// Assume these are initialized:
char* c;
int cLength;
char* p;
int pLength;

char* result = knuth_morris_pratt_search<char*, char*>
   (c, c + cLength, p, p + pLength); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:44:06.217

> 我是否认为迭代器只是一个覆盖与指针相关的运算符（例如*、++等）的类，

你是对的; 指向存储在数组中的数据的指针符合*随机访问迭代器*的要求，即最“完整”的迭代器类型，因此您可以在基本上任何标准库算法中使用它们。

我手头没有关于随机访问迭代器的完整参考的标准，但请参见[此处](http://www.cplusplus.com/reference/iterator/RandomAccessIterator/)；此外，[这](http://www.cplusplus.com/reference/iterator/)是一个很好的图表，其中包含各种“类型”的迭代器。

# c# - 单击后如何禁用按钮两秒钟然后再次启用？

> ID：15538524
> 
> 赞同：0
> 
> 时间：2013-03-21T02:41:56.120
> 
> 标签：c#, javascript, asp.net

单击后如何禁用按钮两秒钟然后再次启用？

我想在 JavaScript 中的 OnClientClick 中执行此操作，运行 OnClientClick 后它将运行 OnClick 事件，然后再次启用按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:46:39.967

用纯 javascript 做到这一点非常简单：

```
var btn = document.getElementById("myButton");
btn.onclick = function() {
    btn.disabled = true; // disable button
    window.setTimeout(function() {
       btn.disabled = false; // enable button
    }, 2000 /* 2 sec */); 
}; // Warning: this will replace existing onclick event 
```

如果您使用的是[jQuery](http://jquery.com/)，那么您可以使用以下代码：

```
var btn = $("#myButton");
btn.click(function() {
    btn.attr("disabled", "disabled"); // disable button
    window.setTimeout(function() {
       btn.removeAttr("disabled"); // enable button
    }, 2000 /* 2 sec */); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:46:44.583

您可以使用此功能：

```
//Disable the button here
setTimeout("EnableTheButton();", 2000); // put this inside the click event 
```

然后声明这个函数：

```
function EnableTheButton() {
    // enable the button here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T02:52:24.677

使用单击甚至禁用按钮，然后设置超时以在所需时间后重新启用它：

```
<button onclick="
  var button = this;
  this.disabled = true;

  // Put other listener code here

  window.setTimeout(function(){
    button.disabled = false;
  }, 2000);
">Button</button> 
```

或动态附加：

```
window.onload = function() {

    document.getElementById('b0').onclick = function() {

      var button = this;
      button.disabled = true;

      // Put other listener code here

      window.setTimeout(function(){
        button.disabled = false;
      }, 2000);
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:13:36.853

试试这个： HTML 页面：

```
<button id="myButon" onclick="disableButon();"></button> 
```

javascript部分：

```
function disableButon()
{   
    var timer;
    document.getElementById('myButon').disabled = true;
    timer = setTimeout("activateButon()", minutes * 60000);
} 
```

下一个功能启用：

```
function activateButon()
{
    document.getElementById('myButon').disabled = false;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-09T05:09:54.700

请参阅下面的代码片段以在 10000 毫秒（10 秒）后启用**保存按钮**

您最初可以将控件设置为禁用：true 或 OnLoad，您可以 setDisabled(true)。这绝对是您的要求。然后您可以执行以下方式：

`clearTimeout(this.enableSaveButton);`

`this.enableSaveButton = setTimeout(function () {`
`if (Ext.getCmp('btn-Save'))`
`Ext.getCmp('btn-Save').setDisabled(false);`
`}, 10000);`

# php - PHP exec tracert 渐进式显示

> ID：15538530
> 
> 赞同：2
> 
> 时间：2013-03-21T02:42:08.053
> 
> 标签：php, windows, exec, progressive

尝试逐步显示我的结果，因为它将显示在 CMD 中。（即：逐行）

甚至不确定从哪里开始？

```
 <?php
$ip = "8.8.8.8";

exec("tracert -d ".$ip." && exit", $output);

    foreach($output as $out){
    echo $out;
    echo '<br>';
    }

?> 
```

任何援助将不胜感激

# javascript - Javascript/JQuery 脚本相对于 HTML 的位置

> ID：15538537
> 
> 赞同：0
> 
> 时间：2013-03-21T02:43:27.477
> 
> 标签：javascript, jquery, html, jquery-ui

以下代码片段有效：

```
<a id="btnCapturePhoto" data-role="button" href="#page1">Capture Photo</a>
<script type="text/javascript">
$($("#btnCapturePhoto").click(function captureImage() {
    alert('capture button clicked');
}));
</script> 
```

此代码不起作用：

```
<script type="text/javascript">
$($("#btnCapturePhoto").click(function captureImage() {
    alert('capture button clicked');
}));
</script>
<a id="btnCapturePhoto" data-role="button" href="#page1">Capture Photo</a> 
```

为什么？我无法理解脚本标记放置和它们关联的 HTML 标记之间的关系。在某些情况下，我在 HTML 标记上方放置了一个脚本标记（例如 JQueryIU 日期选择器），并且该脚本有效，例如：

```
<script type="text/javascript">
$(function() {
    $("#myinput").datepicker();
});
</script>
<input type="text" id="myinput" /> 
```

有人可以解释一下何时将代码放在 HTML 标记之上或之下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:50:25.460

在不起作用的示例中，您的 jQuery 代码尝试查找`#btnCapturePhoto`，但是

```
<a id="btnCapturePhoto" data-role="button" href="#page1">Capture Photo</a> 
```

DOM 中尚不存在，因为它在源文件中的 jQuery 代码之后列出。

使用表格：

```
$(function() {
    $("#myinput").datepicker();
}); 
```

确保在您的 jQuery 代码运行之前 DOM 已完全加载，因此确实找到了 ID。 `$(function()...`文档准备好时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:50:41.183

您应该将所有脚本放在一个外部 .js 文件中，并将其加载到 HTML 的底部，在 jQuery 之后。

但是让我们看看您的特定代码工作和不工作的原因。

```
<a id="btnCapturePhoto" data-role="button" href="#page1">Capture Photo</a>
<script type="text/javascript">
$($("#btnCapturePhoto").click(function captureImage() {
    alert('capture button clicked');
}));
</script> 
```

`#btnCapturePhoto`这是有效的，因为当你的脚本被执行时元素就存在了。

```
<script type="text/javascript">
$(function() {
    $("#myinput").datepicker();
});
</script>
<input type="text" id="myinput" /> 
```

这是有效的，因为您将脚本包装在一个速记文档就绪处理程序中（这就是`$(function(){..`这部分）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T04:15:00.537

我同意上面的答案，但我认为解释这个问题对你有帮助，然后为未来提供一些建议。

解答： 浏览器从上到下加载您的 HTML，因此首先执行您的 javascript。由于您的 JS 首先加载，它正在寻找的元素尚未加载，因此尚不存在。这就是它失败的原因。

建议：通常最好将 CSS 加载到您的头部，并将 JS 加载到您的正文末尾，就在标签之前。

```
<html>
<head>
    <!-- your CSS should go here -->
</head>
<body>
    <SomeElement></SomeElement>
    <SomeElement></SomeElement>
    <SomeElement></SomeElement>
<script type="text/javascript>
    //your javascript code
</script>
</body>
</html> 
```

您通常想要这样做的原因是因为它允许您的 DOM 在执行任何 JS 代码之前准备好。这意味着您可以规避在执行代码之前需要触发的就绪事件。这也意味着如果您的页面需要可能需要一段时间才能加载的外部 JS 文件，您的用户至少可以在加载之前看到 DOM 的某些部分。如果您正在加载相当大的单页应用程序，这可能对您有利。在设计网页时，此链接提供了一些很好的信息，并且可能对您学习 HTML、CSS 和 JS 的旅程有所帮助。[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T02:56:09.813

在前两个示例中，您在脚本加载后立即将处理程序绑定到锚的单击事件。第一个示例有效，因为您的脚本引用的锚点在脚本之前立即加载。

在第二个示例中，在脚本尝试选择锚点后加载锚点，因此没有找到任何处理程序，也没有处理程序绑定到 click 事件。

在您的第三个示例中，您正在使用`$(function() { ...`，这相当于`$(document).ready(function() {...`. 这会等到 DOM 完全加载（也就是页面上的所有 HTML 都由 Javascript 引擎注册），然后在处理程序中执行脚本。

# performance - NP完全，没有有效的算法？

> ID：15538538
> 
> 赞同：2
> 
> 时间：2013-03-21T02:43:29.690
> 
> 标签：performance, np-complete

我对 NP-complete 了解不多，但在这里和那里阅读它。我正在学习的《算法简介》一书指出：“尽管尚未找到针对 NP 完全问题的有效算法，但没有人证明不存在针对一个人的有效算法。” 我只是想知道，一个人怎么知道他们拥有的算法不是**最**有效的……如果那是所有算法中最有效的一种？

谢谢，

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:45:26.847

好问题。我很好奇这个问题的答案是什么，但这是我的尝试。

很难知道是否存在比您想出的更好的算法（如果您确实知道，那么您的算法将是更好的算法）。那么问题就变成了你什么时候应该停止尝试寻找更好的算法。主要方法包括为问题提出下限，然后依次使它们越来越强。

## 假设你是一名研究人员

进一步研究这个问题的一个好的开始是考虑基于标准比较的排序问题。我们得到一个包含 n 个元素的列表，并希望对其进行排序。所以最糟糕的算法，就是想出所有的n！列表，并检查哪个已排序。然后更直观的方法是使用冒泡排序之类的方法，即 O(n^2)。我们想知道我们是否还能做得更好。好吧，假设我们使用分而治之，我们提出了 O(n log n) 的合并排序。现在我们有兴趣知道合并排序是否不是最有效的。所以我们花更多的时间去想一个更好的算法，但想不出一个。所以我们感到沮丧，并改变我们的方法并考虑证明没有比 O(n log n) 更好的比较排序。

现在直观地说，一个简单的下限是 O(n)，仅仅是因为为了对列表进行排序，我们至少需要 O(n) 时间来读取它。但是，让我们尝试改进这个下限。如果您以前没有见过，看看您是否可以提出对 O(n log n) 的下限改进。如果您无法获得它，请查看这篇出色的文章，证明 n log n 是比较排序的下限：[http ://www.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/19-lowerbounds .pdf](http://www.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/19-lowerbounds.pdf)

现在让我们开始思考 NP Complete 问题。考虑顶点覆盖问题（图 st 中是否存在一组 k 个顶点，每条边都与至少一个顶点相关），它是 NP Complete。我们提出了最直观的蛮力方法来解决它（使所有（n 选择 k）个顶点选择并测试每个可能的解决方案）。现在的问题是，是否存在更有效的东西？好吧，经过很多努力，假设我们不能更快地想出任何东西。所以我们采取与以前相同的方法，试图找到好的下界并不断改进它们。显然 O(n) 是一个下界，但我们无法证明 O(n 选择 k) 次下界（如果我们确实证明了这样的下界，那么蛮力是解决顶点覆盖的最佳方法）。所以我们休息一下，然后处理其他问题。

然后有一天我们正在研究图上的最大独立集问题（是否存在由 k 个顶点组成的集合 S，使得 S 中没有两个顶点是相邻的）。我们提出了一个蛮力解决方案，但我们想知道这是否不是最有效的算法。然而，我们不能想出更好的东西，也不能想出一个严格的下限，所以我们不能说是否存在更快的东西。

然后很多天后，我们看到这些问题实际上是等价的，从某种意义上说，一个有效的算法为另一个提供了一个有效的算法：[http ://www.cs.cmu.edu/~ckingsf/bioinfo-lectures/npcomplete .pdf](http://www.cs.cmu.edu/~ckingsf/bioinfo-lectures/npcomplete.pdf)

因此，虽然我们不知道顶点覆盖或独立集的算法是否最有效，但我们可以通过将问题减少到彼此来比较相对难度，这样如果我们找到一个好的算法，我们就可以应用那是另一个问题。

## TL;博士

本质上，它归结为费曼方法：

![费曼解决问题的方法](../Images/209274ad3aa3982add4595972f4ec3a5.png)

严肃地说，为了表明我们的算法是或不是最好的：

1.  找到更好的算法或证明它的存在（可能通过简化为您见过的另一个问题）
2.  证明不存在更好的算法。可能通过找到我们的算法实现的下界。

如果以上两个都失败了，而不是明确地回答，试着想出你正在解决的问题有多困难的概念，方法是查看你可以减少的问题并考虑它们的难度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:56:08.600

您引用的陈述是指计算机科学中最大的未解决[问题](http://en.wikipedia.org/wiki/NP-complete)之一，即是否`P = NP`。

NP 是可以快速验证的问题（在多项式时间内），而 P 是可以快速找到解决方案的问题（在多项式时间内）

简单地说，如果 NP 完全问题有一个“有效”算法，那么 P = NP

在所有这些讨论中，“高效”和“快速”几乎总是意味着多项式时间。

因此，要回答你的问题，一旦你有了一个非多项式算法，你就会知道它效率不高（在上面的上下文中）。

# ios - 管理器中的 iOS 设备是黄色而不是绿色

> ID：15538540
> 
> 赞同：-3
> 
> 时间：2013-03-21T02:43:31.060
> 
> 标签：ios

我在使用 iOS 设备时遇到问题，并试图获取我正在使用它开发的应用程序。我已经尝试了所有标准重启、从手机中删除配置文件等。首先要从哪里开始解决这个问题？

![在此处输入图像描述](../Images/450f4b664a4fdd444cfd07a9ca338cc2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:46:20.507

黄色表示您的 XCode（和 SDK）版本与您的 iPhone 版本不同，即 6.1.3。您需要更新 XCode 以便拥有最新的 SDK 或将设备恢复到您的 SDK 版本。（我不知道这样做有多容易，因为我过去没有成功，但这就是错误消息所暗示的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T07:21:35.330

只需将设备连接到具有 xcode 4.6 的 mac1 中，然后等待 Xcode 检测到设备（绿色）。然后删除设备并连接到具有 4.5 的 mac2 现在在管理器中看到该设备将是绿色的。我不知道原因，但它对我有用。希望能帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T14:44:49.890

这不完全正确：如果设备未连接到开发者帐户，还有一个黄点。只需右键单击带有该黄点的设备，然后选择“添加到会员中心”。

# css - Firefox 上的 CSS3 动画边框半径不起作用

> ID：15538555
> 
> 赞同：1
> 
> 时间：2013-03-21T02:44:26.780
> 
> 标签：css, firefox, animation

我目前正在尝试制作一个动画扩展球体（圆圈），它只是一个仅使用 css3 应用边框半径的 div。

我设法使动画在 webkit 浏览器上工作，保持动画元素的球形/圆形，但我不知道为什么它在 Firefox 上不起作用。它确实应用了一些边框半径（大约 20 像素），但不像在 webkit 上那样工作。

这是我使用的代码。

```
@-webkit-keyframes expandSphere
{
    0%{padding:10px; opacity: 0;}
    25%{height: 150px; border-radius: 150px; width:150px; left:520px; top:200px;}
    55%{height: 350px; border-radius: 500px; width:350px; left:420px; top:100px;}
    75%{height: 547px; border-radius: 700px; width:700px; top:0; left:250px;}
    100%{height:547px; opacity: 1; top:0px; left:0; width:1180px; border-radius: 0;}
}
@-moz-keyframes expandSphere
{
    0%{padding:10px; height:20px; width:20px; opacity: 0; -moz-border-radius: 50px;}
    25%{height: 150px; width:150px; left:520px; top:200px; -moz-border-radius: 150px;}
    55%{height: 350px; width:350px; left:420px; top:100px; -moz-border-radius: 500px;}
    75%{height: 547px; width:700px; top:0; left:250px; -moz-border-radius: 700px;}
    100%{height:547px; opacity: 1; top:0px; left:0; width:1180px; -moz-border-radius: 0;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:18:42.867

您希望在不需要时停止使用供应商前缀。

特别是，请参阅[https://stackoverflow.com/a/10927566/720912](https://stackoverflow.com/a/10927566/720912)

# c - C - 一个奇怪的 Seg 故障错误

> ID：15538556
> 
> 赞同：-2
> 
> 时间：2013-03-21T02:44:32.590
> 
> 标签：c, segmentation-fault

由于段错误，我无法编译它。使用树象限来显示最大容量给了我这个错误。奇怪的是，它在 Quadrant 函数中起作用，但在插入点中不起作用。创建树功能很好，象限也很好。但是，当我尝试访问树象限内的某些内容时（象限不是 NULL，我之前检查过），我会一直运行段错误问题通知。恐怕这是一个非常简单的错误，但我看不出它是什么。我试图在互联网上搜索（但一无所获），但我没有时间来完成这个完整的程序（而且我被困在这个程序上几个小时）。任何人都可以帮助我吗？这是代码：

```
 #include <stdlib.h>
    #include <stdio.h>
    #include <float.h>
    #include <limits.h>

        typedef struct dot{
            double x;
            double y;
        }Dot;

        typedef struct quadrant{
            int max_capacity, used_capacity;
            Dot max,min;
            Dot * dots_;
        }Quadrant;

        typedef struct quad_node * Quad_node_Pointer;

        typedef struct quad_node{
            Quadrant * key;
            Quad_node_Pointer child[4];
            Quad_node_Pointer father;
        }Quad_node;

        typedef struct tree{
            Quad_node * end_;
            Quad_node * start_;
        }Tree;

        void insert_dot(Tree * A, Dot b){
            printf("lalala\n");
            Quad_node * Aux, *Aux2, * New_leafs[4];
            Dot min_aux,max_aux;
            int i;
            Aux=(Quad_node_Pointer) malloc (sizeof(Quad_node));
            Aux2=(Quad_node_Pointer) malloc (sizeof(Quad_node));
            printf("lalala\n");
            //Here's the segfault line:
            printf("this doesnt works %i",A->start_->key->max_capacity);

        void Create_quadrant (Quadrant * A, int capacity,  Dot max, Dot min){
            A=(Quadrant*)malloc(sizeof(Quadrant));
            A->dots_ = (Dot*) malloc (capacity * sizeof(Dot));
            int i;
            for (i=0;i<capacity;i++){
                A->dots_[i].x=-1;
                A->dots_[i].y=-1;
            }
            A->max_capacity=capacity;
            //But here it works perfectly. What's the diference from the other that do 
            //a segfault?
            printf("\n this works \n %i \n",A->max_capacity);
            A->used_capacity=0;
            A->max.x=max.x;
            A->max.y=max.y;
            A->min.y=min.y;
            A->min.x=min.x;
            }

    void Create_tree (Tree * A, int capacity){
        int i;
        Dot max,min;
        max.x=DBL_MAX;
        max.y=DBL_MAX;
        min.x=0;
        min.y=0;
        A->end_ = (Quad_node_Pointer) malloc (sizeof(Quad_node));
        A->start_=(Quad_node_Pointer) malloc (sizeof(Quad_node));
            for (i=0;i<4;i++){
                A->start_->child[i]=A->end_;
            }
            A->start_->father=A->end_;

        Create_quadrant(A->start_->key,capacity,max,min);
    } 
```

这是一个主要的，仅用于示例：

```
int main(int argc, char *argv[])
{
    Tree * A;
    int i;
    A = (Tree*) malloc (sizeof(Tree));
    Dot b,teste[10];
    b.x=5.0;
    b.y=6.0;
    Create_tree(A,8);
    for (i=0;i<10;i++){
        teste[i].x=(double)2.0*i;
        teste[i].y=(double)2.0*i;
        insert_dot(A,teste[i]);
    }
    insert_dot(A,b);
    free(A);
    return EXIT_SUCCESS;
} 
```

感谢您阅读或/和帮助我。

编辑：记住，我忘了。插入点功能在那里不完整。重点是段错误问题。主要来自它基于完整功能运行的示例。很抱歉有任何麻烦。但我现在的问题是这个奇怪的段错误。我认为函数的其余部分没问题，我省略了让我的问题更简单（并且与函数的其余部分无关）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:21:11.707

走吧...我将展示相关代码，忽略中间不相关的行。

首先，您分配存储空间并初始化树...

```
A = (Tree*) malloc (sizeof(Tree));
Create_tree(A,8); 
```

该`Create_tree`函数初始化以下内容`A`：

```
 A->end_ = (Quad_node_Pointer) malloc (sizeof(Quad_node));
    A->start_=(Quad_node_Pointer) malloc (sizeof(Quad_node));
    for (i=0;i<4;i++){
        A->start_->child[i]=A->end_;
    }
    A->start_->father=A->end_; 
```

好的，现在`A->start_`有了`A->end_`未初始化的存储，除了你已经在`A->start_->child[]`.

此时，您调用`Create_quadrant`初始化`A->start_->key`，传递一个未初始化的指针。

```
 Create_quadrant(A->start_->key,capacity,max,min); 
```

这是函数声明：

```
void Create_quadrant (Quadrant * A, int capacity,  Dot max, Dot min); 
```

没有办法让你新初始化的象限回到`A->start_->key`. 您显然想要这样做，因为该函数的第一行是这样做的：

```
 A=(Quadrant*)malloc(sizeof(Quadrant)); 
```

到目前为止，这打破了您的代码范例，您负责分配数据，然后调用一个函数来初始化它。如果你想让 init 函数返回一个在函数内部分配的指针，你要么需要返回它，要么传递一个双指针。

所以选项1是：

```
Quadrant * Create_quadrant (int capacity,  Dot max, Dot min)
{
    A=(Quadrant*)malloc(sizeof(Quadrant));
    //...
    return A;
}

// Called like this:
A->start_->key = Create_quadrant( capacity, max, min ); 
```

选项2是：

```
void Create_quadrant (Quadrant ** pA, int capacity,  Dot max, Dot min)
{
    A=(Quadrant*)malloc(sizeof(Quadrant));
    // ...
    *pA = A;         
}

// Called like this:
Create_quadrant( &A->start_->key, capacity, max, min ); 
```

我忘了提到选项 0 是继续您迄今为止使用的约定：

```
// Called like this:
A->start_->key = (Quadrant*)malloc(sizeof(Quadrant));
Create_quadrant( A->start_->key, capacity, max, min );

// And obviously you DON'T malloc a new A inside Create_quadrant(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:04:13.563

我的猜测是你没有`malloc`为你的 s 提供足够的空间`Quadrant`，因为你只给它们提供了尽可能多的内存空间`Quad_node`，并且可能`Quad_node`s 占用的空间比`Quadrant`s 少。

# multithreading - Adobe Air 桌面应用程序挂起（无响应）

> ID：15538557
> 
> 赞同：3
> 
> 时间：2013-03-21T02:44:53.527
> 
> 标签：multithreading, apache-flex, sockets, networking, air

我正在我的应用程序中进行网络连接.. PC 发送的数据（安装了应用程序）同时发送了大约 3KB（实时计算在我的应用程序中完成）.. 我想知道为什么我的应用程序在发送时没有响应数据到不同的PC？受影响的大多数平台是 Ubuntu 12.04（精确穿山甲）

第二个问题：如何在 adobe air 桌面应用程序中实现多线程？

对不起我的英语不好...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:51:13.180

对于第二个问题，要在 Adob​​e AIR 桌面应用程序中使用多线程，您需要 Flash Player 11.4 和 AIR 3.4。有一个带有[Worker](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)类的新并发 API。

在我们提供帮助之前，请先发布第一个问题的代码。

# sql-server - Sql Server 视图随时间改变行为

> ID：15538558
> 
> 赞同：0
> 
> 时间：2013-03-21T02:44:55.610
> 
> 标签：sql-server, view

我有一个困扰我一段时间的问题...我的系统中有一些视图会定期停止工作。因此，几个月来该视图运行良好，然后有一天有人报告了一个问题。当我查看问题时，我注意到视图正在返回不同的数据。我再次运行更改视图脚本（通过从上下文菜单中选择脚本视图），现在视图按预期工作。架构在此期间没有改变，所以这不是罪魁祸首。

有没有其他人有这个问题？它也不是特定于 1 个视图，而是特定于系统的一部分。然而，这个系统已经有一段时间没有改变了。

# facebook - FB登录按钮不提示首次用户输入范围

> ID：15538559
> 
> 赞同：0
> 
> 时间：2013-03-21T02:45:20.913
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

```
"<div id='fb-root'></div>
<script>
    window.fbAsyncInit = function() 
    {
        FB.init({
            appId: 'ID', 
            status: true, 
            cookie: true, 
            xfbml: true  
        });

        FB.getLoginStatus(function(response) 
        {
              if(response.status === 'connected') 
                {
                    if (response.authResponse != 'undefined') 
                    {
                        window.location = '/fb_redirect.php';
                    }
                } else if(response.status === 'not_authorized')
                {

                } else 
                {
                    FB.Event.subscribe('auth.login', function(response) 
                    {
                        window.location = '/fb_redirect.php';
                    });
                }
            });
        };

        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = '//connect.facebook.net/en_US/all.js#xfbml=1&appId=ID';
            fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
    </script>

<div class='fb-login-button' data-show-faces='false' scope='email' registration-url='http://www.sportannica.com/fb_redirect.php' size='large' data-width='200' data-max-rows='1'></div> 
```

这就是我现在正在使用的。对于已经接受该应用程序的用户，它可以正常工作。但是，对于初次使用的用户，在单击登录按钮时，不会弹出任何屏幕并显示有关应用程序的详细信息，例如有多少人使用它或它请求的权限类型。它直接指向/fb_redirect.php。

![在此处输入图像描述](../Images/635578019b20fc27d0a849ab1bcde59f.png)

看到图片中指定的站点 URL 了吗？这是在登录 FB 并接受应用程序时页面被重定向到的 URL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T02:10:05.773

正确的语法是`data-scope="email"`，不是`scope="email"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:02:07.983

当用户未在 facebook 上登录时使用登录按钮，如果用户已登录但未授予您的应用程序的权限，您应该使用 oauth 对话框。

你可以通过这样做来实现

```
FB.getLoginStatus(function(response) {
    if(response.status === 'connected'){
        if (response.authResponse != 'undefined')
            window.location = '/fb_redirect.php';
    }else if(response.status === 'not_authorized'){
    //it means we have a user but he hasn't granted any permissions to our app
    //we're going to redirect him to the permission page
    window.location = 'https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&response_type=code&redirect_uri=YOUR_APP_URL&scope=email';
    } else {
    //the user is not logged in, as you already have a login button you don't have to do nothing  
    }
});

//this should be outside the FB.getLoginStatus function
FB.Event.subscribe('auth.login', function(response) {
    window.location = '/fb_redirect.php';
}); 
```

# xcode - AppleScript - 使用 Excel 文件单元格中的信息作为 Xcode 中类的初始化属性

> ID：15538570
> 
> 赞同：0
> 
> 时间：2013-03-21T02:47:05.677
> 
> 标签：xcode, excel, applescript, document, cells

截至目前，我有代码：

```
tell application "Microsoft Excel"

-- put the complete set of data into a list of lists (i.e., 2 dimensions -> columns of rows)
set range1 to range "B2:H7686"
tell active sheet to set myData to value of range1
-- now access a specific cell's data
set myRow to 7
set myCol to 3
set myVal to item {myCol} of item {myRow} of myData

end tell 
```

按行然后按列创建一个包含元素的双精度数组。因此，如果我的 Excel 单元格如下所示：

**| A1 | A2 | A3 |**

**| B1 | B2 | B3 |**

我的变量 myVar 将是一个如下所示的数组：

**{{“A1”、“A2”、“A3”}、{“B1”、“B2”、“B3”}}**

我现在要做的是获取一个现有项目，我们将其称为 example_project，使用现有的 .m 文件，我们将其称为 example_m.m，并将 myVar 中数组的每个元素写入对象的属性.

例如，如果我的数组与前面提到的数组相同，并且我正在使用这些值作为属性初始化一个示例对象，那么它在 Xcode 中应该看起来像这样：

```
exampleObjectA = [[exampleClass alloc] init];
[exampleObjectA initExampleClass:@"A1" secondAttribute:@"A2" thirdAttribute:@"A3"];

exampleObjectB = [[exampleClass alloc] init];
[exampleObjectB initExampleClass:@"B1" secondAttribute:@"B2" thirdAttribute:@"B3"]; 
```

我要的是什么会给我这些确切的代码行，预先写到 Xcode 中。我试图将大约 45000 个单元格的数据放入应用程序中，但出于明显的原因我不想手动执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:41:26.093

您正在使用带有许多属性的 exampleObjectA，这些属性是您在设置时设置的`init`。我建议您制作一组 KVP 并继续添加它。

当您将 @"A1", @"A2" 作为字符串传递时，您可以创建一个循环并使用

```
for(NSInteger i=1; i<=myVar.count; i++){
    NSString *cellReference=[NSString stringWithFormat:@"A%ld,i];
    //then call a method to update your exampleObjectA
    //add this to array or KVP
} 
```

# web - 如何在没有域名的网站上工作？

> ID：15538573
> 
> 赞同：0
> 
> 时间：2013-03-21T02:47:23.557
> 
> 标签：web, hosting, phpbb

我有一个想法，我想开始建立一个网站。在实际购买和托管域名之前，我如何创建一个基于 phpbb 类型的论坛并查看/开发它？我说的是在本地网络上的浏览器中查看它，就像它被视为真实网站一样。抱歉，如果这个问题令人困惑，但我对网络托管几乎没有经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:51:25.740

是的。域名所做的唯一事情就是“指向”您的站点所在的服务器。您可以通过简单地创建相同的托管环境（例如，运行 PHP 和 MySQL 数据库的 Apache 服务器，或类似的）来在本地建立功能性 Web 服务器。

您可以下载几个软件包，其中已包含本地服务器的必要软件。对于基于 PHP 的 Web 托管，诸如[Xampp](http://sourceforge.net/projects/xampp/)或已停产的[Mowes](https://en.wikipedia.org/wiki/MoWeS)之类的软件包将让您非常快速地设置一个可以从 localhost 查看的服务器。

您还可以利用计算机的[主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)来模拟使用“真实”域名进行的浏览。例如，如果您正在开发一个名为 acmetools.com 的站点，您将像这样编辑您的主机文件：

`127.0.0.1 acmetools.com`

然后您可以浏览到“acmetools.com”，它将从您的本地服务器运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T02:58:14.267

最简单的方法之一是在您正在开发的任何机器上本地下载并运行一些免费的 Web 服务器软件。有几种不同的类型，但可能最知名和最常用的是 Apache。

Apache 为您提供了一个文件夹，您可以在其中放置您将用于您的网站的所有 html、css、js、php 等文件。之后，如果您想在本地机器上查看网站，只需在浏览器中输入：

```
http://127.0.0.1 
```

（这只是将您的请求重定向到本地计算机的端口 80）。

将显示 Apache 提供的文件夹中的任何内容。

这个[链接](http://articles.slicehost.com/2010/5/20/installing-apache)应该给你一个很好的开始，让你了解如何在常见的 Linux 发行版上安装 Apache。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T02:51:10.700

基本上，您想要做的是将站点托管在您自己的计算机上。根据您的操作系统，有一些软件包免费结合了 Apache 服务器、PHP 和 MySQL 数据库服务器（例如[http://www.apachefriends.org/en/xampp.html](http://www.apachefriends.org/en/xampp.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T02:50:00.967

如果您创建 html 文件，您可以使用 Internet 浏览器打开它。右键单击它，您应该会看到一个打开方式选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T02:52:20.293

我真的很喜欢 Google AppEngine ( [https://developers.google.com/appengine/](https://developers.google.com/appengine/) ) 免费的无障碍 Web 开发。您可以在闲暇时购买域名。ApppEngine 支持 Java 或 Python 开发，并具有许多强大的功能。但是，如果您计划有一天自己托管 AppEngine，它可能不是一个好的选择，因为 AppEngine 环境实际上无法在其他地方复制。

# android - 蓝牙 SPP（串行）故障 (Android)

> ID：15538575
> 
> 赞同：2
> 
> 时间：2013-03-21T02:47:41.560
> 
> 标签：android, sockets, bluetooth, spp

我遇到了一个奇怪的问题。我编写了一个应用程序，它将与 arduino 建立蓝牙 SPP 链接。Arduino 上的蓝牙设备配置为 9600 波特。我可以从 arduino 接收数据，但似乎我收到了一些值为 0 或高峰值的故障。这很烦人，因为我确实需要图形部分的精确值，而且我知道 arduino 发送的数据很好，因为我将它发送的内容记录在一个文件中。

我正在寻找解决或理解为什么会发生这种情况，而不是创建一个平均值或类似的东西来制作一个“补丁”。

谢谢你的帮助。

这是一张可以解释我的问题的图片，arduino 数据范围在 101 到 103 左右：

[![截屏](../Images/38c81c7e86d8d366441060c11152228e.png)](https://i.stack.imgur.com/nnq82.png)

这是我创建连接并接收数据的代码：

```
private class ConnectedThread extends Thread {
    private final DataInputStream mmInStream;
    private final DataOutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = new DataInputStream(tmpIn);
        mmOutStream = new DataOutputStream(tmpOut);
    }

    public void run() {
        byte[] buffer = new byte[1024];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);        // Get number of bytes and message in "buffer"
                hBluetooth.obtainMessage(RECEIVE_MESSAGE, bytes, -1, buffer).sendToTarget();        // Send to message queue Handler
            } catch (IOException e) {
                break;
            }
        }
    }

private void connectDevice() {

    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);

    try {
        btSocket = createBluetoothSocket(device);
    } catch (IOException e) {
        errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
    }

    mBluetoothAdapter.cancelDiscovery();

    // Establish the connection.  This will block until it connects.
    Log.d(TAG, "...Connecting...");
    try {
      btSocket.connect();
      Log.d(TAG, "....Connection ok...");
      // Create a data stream so we can talk to server.
      Log.d(TAG, "...Create Socket...");

      mConnectedThread = new ConnectedThread(btSocket);
      mConnectedThread.start();
      mActionBar.setSubtitle("Connecté");

      //If fail, we disconnect or display an error warning regarding the situation
    } catch (IOException e) {
      try {
        btSocket.close();
        mActionBar.setSubtitle("Deconnecté");
      } catch (IOException e2) {
        errorExit("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
      }
    }

    return;
    } 
```

最后是处理程序：

```
hBluetooth = new Handler() {
    public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
        case RECEIVE_MESSAGE:                                                   // If we receive a message
            byte[] readBuf = (byte[]) msg.obj;
            String stringIncome = new String(readBuf, 0, msg.arg1);             // Create string from byte array
            stringBuilder.append(stringIncome);                                             
            int endOfLineIndex = stringBuilder.indexOf("\r\n");                 // Determine the end-of-line
            if (endOfLineIndex > 0) {                                           // If we are at the end-of-line we parsed all the data that was sent
                rmsgBluetooth = stringBuilder.substring(0, endOfLineIndex);     // The string is extracted in a string object rmsgBluetooth
                stringBuilder.delete(0, stringBuilder.length());                

                if(btSocket != null && btSocket.isConnected()){                 

                //Here we send the value of the string to a txtbox  
                txtArduino.setText("Arduino: " + rmsgBluetooth); 

                if(rmsgBluetooth.matches("-?\\d+(\\.\\d+)?")) {                
                    try{

                   sensorReading = Float.parseFloat(rmsgBluetooth);
                    }catch(NumberFormatException e){

                    }
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:56:36.063

我认为您的错误很可能在解析字符串时出现。尝试仔细调试线路

```
 if(rmsgBluetooth.matches("-?\\d+(\\.\\d+)?")) {                
                try{

               sensorReading = Float.parseFloat(rmsgBluetooth);
                }catch(NumberFormatException e){

                }
            } 
```

# java - JLabel 背景图片...奇怪的行为？

> ID：15538576
> 
> 赞同：1
> 
> 时间：2013-03-21T02:47:42.980
> 
> 标签：java, swing, user-interface, jframe, jlabel

我有一个必须组成 8x8 网格的图像，所以它是棋盘的背景。

有人告诉我可以使用 ImageIcon 和 JLabel 来做到这一点，我试过了，但它似乎不起作用。

*   它不允许我向它添加组件（一块，它也是一个 JLabel）。
*   此外，当程序运行时，我单击一个正方形 - 它消失了，这并不理想，因为它应该是背景。

这是代码：

```
 for (int i = 0; i < 8; i++)
       {
        for (int j = 0; j < 8; j++)
        {
            square=new JLabel();
            square.setIcon(icon);
            chessBoard.add( square );
        }
       } 
```

完整代码： http: [//pastebin.com/YdavUmGz](http://pastebin.com/YdavUmGz)

我对这个背景图片做错了什么吗？

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:41:11.460

你在寻找这样的东西吗？

```
import java.awt.*;
import javax.swing.*;

public class ChessBoard extends JFrame {

    private JPanel panel;

    public ChessBoard() {
        panel = new JPanel();
        panel.setLayout(new GridLayout(8, 8, 0, 0)); //Create the board
        //Add JLabels
        for (int i = 0; i < 64; i++) {
            JLabel label = new JLabel();
            label.setIcon(
                    new ImageIcon(getClass().getResource("images/face.png")));
            panel.add(label);
        }
        //Add the panel to the JFrame
        this.add(panel);
        this.pack();
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(
                    UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ChessBoard();
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/2f9076e1abf67db5276a47cf5bba6fa9.png)

# asp.net - 需要开发一个 ASP.NET 站点的外观和感觉另一个网站

> ID：15538580
> 
> 赞同：-2
> 
> 时间：2013-03-21T02:48:17.440
> 
> 标签：asp.net, css, stylesheet, branding, view-source

我正在尝试在我的 asp.net 站点中创建母版页和必要的样式。
我正在尝试从以下网站复制颜色、样式。

www.power-tek.com

1.  我试图找出背景中的颜色代码（那个是灰黑色的）？
2.  我还试图找出具有搜索按钮的区域以及菜单区域。

我在 chrome 中打开页面并转到开发人员设置。然后我试图专注于我正在寻找的特定区域，但我仍然无法找到它。

有人可以建议吗，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:38:28.757

背景是重复的无缝图像，因此您无法获得颜色代码。您可以使用 chrome 和 firefox 的颜色选择器插件，为您悬停的任何颜色提供十六进制代码，即使它是图像。还有你的意思是“我也在试图找出有搜索按钮的区域以及菜单区域。” ? 您是在尝试使用开发工具来获得这些颜色还是只关注它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:39:53.710

该背景是图像。在 chrome 浏览器上单击 f12。然后点击元素。然后点击body元素。然后你可以在屏幕右下角看到样式。你将获得该属性的所有样式。对于按钮样式，您可以右键单击按钮然后检查元素。它将向您显示应用于屏幕右侧按钮的所有样式。

![在此处输入图像描述](../Images/5dbaf5f275a8f27a1e01a13c5899e097.png)

BG 是一个图像。查看图片以查找图像详细信息 ![在此处输入图像描述](../Images/5995c65967d5647793f3cceea1353d02.png)

# javascript - 向 DOM 添加数据

> ID：15538586
> 
> 赞同：-2
> 
> 时间：2013-03-21T02:48:38.843
> 
> 标签：javascript

据我所见，没有人因为我正在调用的 document.GetElementsByClassName 而专门解决此方法，但我不知道为什么它不起作用。此处的目的是将值（字符串）添加到页面。我已经通过类名识别了一个现有的 div，并简单地添加了一个文本节点，然后应该显示数据项“帐户名称：”。我的语法或逻辑显然有问题，但我看不到。

有人可以为我解释一下吗？

```
this.updateUname = function() { 
    var newNode[0] = getElementsByClassName('acc');
    var div = document.createTextNode('div');
    div.innerHTML = "Account Name:";
    newNode.appendChild(div);
    } 
```

提前致谢。ajfbiz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:01:38.143

改变：

`var newNode[0] = getElementsByClassName('acc');`

至

`var newNode = document.getElementsByClassName('acc')[0];`

这是一个小提琴：http: [//jsfiddle.net/c2bH4/1/](http://jsfiddle.net/c2bH4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:05:44.827

如果你想创建一个 div 元素，那么你想使用

```
document.createElement("div"); 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/document.createElement](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)

# ruby-on-rails - 如果我正在运行 rake 命令，如何在 Rails 中检测？

> ID：15538587
> 
> 赞同：6
> 
> 时间：2013-03-21T02:48:47.433
> 
> 标签：ruby-on-rails, rake, environment

在 Rails 中，您可能希望您的环境在启动时执行不同的操作，具体取决于您是否正在运行 rake 任务。例如，我的用例是在应用启动时将数百 MB 的缓存加载到内存中。我们显然不希望这发生在 rake 命令上。

---更新---以下是可靠的解决方案，适用于heroku。

```
is_rake = (ENV['RACK_ENV'].blank? || ENV['RAILS_ENV'].blank? || !("#{ENV.inspect}" =~ /worker/i).blank?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T22:05:05.207

如果您正在使用 heroku 并且您正在使用工作人员，这是一种更可靠的方法来进行此检查。

```
is_rake = (ENV['RACK_ENV'].blank? || ENV['RAILS_ENV'].blank? || !("#{ENV.inspect}" =~ /worker/i).blank?) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-27T16:37:11.660

为了特殊情况运行迁移，我执行了以下操作：

```
if defined?(Rake) \
&& Rake.application.top_level_tasks.grep(/\Adb:migrate(\[[^\]]*\])?\z/).length > 0
  ...
end 
```

特别是，它涵盖了我们没有运行的情况`rake`。

`Rake.application.top_level_tasks`设置`rake`为参数列表（要执行的任务）：

[https://github.com/ruby/rake/blob/v13.0.3/exe/rake#L27](https://github.com/ruby/rake/blob/v13.0.3/exe/rake#L27)
[https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application.rb#L81](https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application.rb#L81)
[https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application.rb#L97](https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application.rb#L97)
[https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application .rb#L751-L761](https://github.com/ruby/rake/blob/v13.0.3/lib/rake/application.rb#L751-L761)

# django - django表单内的嵌套div

> ID：15538589
> 
> 赞同：0
> 
> 时间：2013-03-21T02:49:01.110
> 
> 标签：django, django-forms

我有带输出的模型表单`as.p()`，现在我需要用 div 包装一个或几个字段以获得非常不同的样式。我认为需要这样做，因为表单出现在 ajax 调用的页面上，我无法遍历模板中的表单字段。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:01:56.237

您可以遍历表单字段

```
{% for field in form %}
    {{ field }}
{% endfor %} 
```

或者，您可以只输入您想要的字段：

```
<div class="control-panel">
    <div class="control-group">
        Name: {{ form.name }}
    </div>
</div> 
```

有更好的方法可以做到这一点，检查 django's doc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T02:56:38.883

您可以循环浏览表单字段。看看[文档](https://docs.djangoproject.com/en/1.5/topics/forms/#looping-over-the-form-s-fields)。

# android - Android：拉取 HTML 并处理它

> ID：15538594
> 
> 赞同：0
> 
> 时间：2013-03-21T02:50:12.523
> 
> 标签：android

我使用 webview 为要从中提取信息但无法访问该网站（服务器端，仅客户端）的网站获取 HTML。

我可以通过 javascript 提取 html。但是当我运行我的代码时，我的数据字段没有更新，因为它在我的 Javascript 完成之前加载。之后我想通过 JSOUP 处理数据。进入 HTTPCLient 很困难，因为它是一个有 LOGIN 的网站，而且它是 SSL 安全的。我可以通过 WebView（手动登录）进入，然后再提取数据。

有没有办法获取或通过登录，或者在第二个线程中等待，直到它加载了所有的 html 数据？

```
public class MainActivity extends Activity implements OnClickListener {

TextView data;
Button getRost;
WebView webview;
String code;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    data = (TextView) findViewById(R.id.tvData);
    getRost = (Button) findViewById(R.id.btGet);
    getRost.setOnClickListener(this);
    webview = (WebView) findViewById(R.id.wvWeb);

}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId())
    {
    case R.id.btGet:
        webview.getSettings().setJavaScriptEnabled(true);
        webview.addJavascriptInterface(new MyJavaScriptInterface(this), "HtmlViewer");
        webview.setWebViewClient(new WebViewClient() {
            @Override
            public void onPageFinished(WebView view, String url) {
                webview.loadUrl("javascript:window.HtmlViewer.showHTML" +
                        "('<head>'+document.getElementsByTagName('html')[0].innerHTML+'</head>');");
            }

        });

        webview.loadUrl("URLTHATCONTAINTSINFO");
        data.setText(code); 
    }   

}
class MyJavaScriptInterface {

    private Context ctx;

    MyJavaScriptInterface(Context ctx) {
        this.ctx = ctx;
    }

    public void showHTML(String html) {
        new AlertDialog.Builder(ctx).setTitle("HTML").setMessage(html)
        .setPositiveButton(android.R.string.ok, null).setCancelable(false).create().show();
        code = html;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:11:32.390

如果站点使用自签名证书，您应该能够创建自己的 SSL 客户端，并且如果您可以看到发送到站点以处理登录的内容，则通过 POST 将其发送。

如果它使用的是完整的 SSL 证书，那么只需 POST 数据...

无论哪种方式，让 webview 从那里处理结果。

例子：

```
private void launchWeb() {
    webview = new WebView(this);

    // Where myWebview is the WebView object

    webview.setWebChromeClient(new WebChromeClient());
    webview.setWebViewClient(new MyWebViewClient());

    webview.clearCache(true);
    webview.clearHistory();
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

    webview.requestFocus(View.FOCUS_DOWN);

    String postData = "username=" + _username + "&password=" + _password;

    webview.postUrl("https://blahblah.com/somepath",
            EncodingUtils.getBytes(postData, "BASE64"));

} 
```

# jquery - 使用jQuery查找在表格中按下了哪个按钮

> ID：15538603
> 
> 赞同：0
> 
> 时间：2013-03-21T02:50:41.963
> 
> 标签：jquery, button, html-table

我想知道在表单中按下了哪个按钮......唯一的问题是这些按钮在表格内。我尝试了许多在类似问题中发布的解决方案，但它们不起作用。我有类似的东西：

```
<form>
  <table>
  <tr><td><button value=id>Dosomething</button><td></tr>
 </table>
</form> 
```

我在这里使用了代码：http: [//jsfiddle.net/xFvrV/9/](http://jsfiddle.net/xFvrV/9/)。但这似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:55:36.463

一种方法是使用

```
$(this).attr('id')) 
```

在您的事件处理程序中：

```
$('input[type=submit]').click(function() {
    // save as data on form's .data
    alert('I am ' + $(this).attr('id'));
    $(this).parent().data('submitbutton', $(this));
}); 
```

小提琴：

[http://jsfiddle.net/bJsTm/](http://jsfiddle.net/bJsTm/)

`data-submitbutton`请注意，您的 Fiddle 中没有 a ，因此`.data('submitbutton')`不会返回任何内容。

按钮在表格中的事实并不重要。

# javascript - 从 CoffeeScript 编译的 Javascript 在 IE8 中不起作用

> ID：15538604
> 
> 赞同：0
> 
> 时间：2013-03-21T02:50:44.023
> 
> 标签：javascript, coffeescript

我使用 CodeKit 将我的 CoffeeScript 文件编译为 JS。

就在最近，我发现我在 CodeKit 中从 CoffeeScript 编译的 JS 文件之一不再在 IE8 中工作。

我试图通过 IE Developer Tool 进行挖掘，发现错误在以下几行中报告。

```
 this["default"] = function() {
        return AlertExplorer.prototype.default.apply(_this, arguments);
      };
...
...
      this["export"] = function() {
        return ExportAuth.prototype.export.apply(_this, arguments);
      }; 
```

我查看了其他函数声明，他们都这样做了

```
 this.functionName = function() {
  }; 
```

所以看起来 IE8 不喜欢带有方括号 [] 的函数声明？这甚至有意义吗？

现在，我只是简单地评论了上面的几行，它工作正常。这与 CoffeeScript 的最新更新有关吗？

# jquery - jQuery UI 手风琴的 HTML5 标记

> ID：15538605
> 
> 赞同：1
> 
> 时间：2013-03-21T02:50:50.637
> 
> 标签：jquery, html, jquery-ui, jquery-ui-accordion

我有以下标记，我想使用 jQuery UI 手风琴，但它不像我在 HTML5 之前制作的典型手风琴那样呈现。我怎样才能通过使用文章/部分来获得手风琴？

```
<article>
    <h1>Accordion</h1>
    <div id="accordion">
        <section>
            <h1><a href="#">Aliquam tincidunt mauris eu risus.</a></h1>
            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna.</p>
        </section>
        <section>
            <h1><a href="#">Integer vitae libero ac risus egestas placerat.</a></h1>
            <p>Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus.</p>
        </section>
        <section>
            <h1><a href="#">Fusce lobortis lorem at ipsum semper sagittis.</a></h1>
            <p>Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus.</p>
        </section>
    </div>
</article> 
```

在javascript中我使用：

```
$(document).ready(function (){
    $('#accordion').accordion();    
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:06:09.833

我们已经在 J​​SFiddle 中测试了以下代码...

```
<div id="accordion">
   <article class="std_page_content">
    <a id="#test" href="#test" class="header"><h1>Aliquam tincidunt mauris eu risus</h1></a>
    <section>
           <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Phasellus hendrerit. Pellentesque aliquet nibh nec urna.</p>
        </section>
    <a href="#test" class="header"><h1>Integer vitae libero ac risus egestas placerat.</h1></a>
       <section>
            <p>Sed egestas, ante et vulputate volutpat, eros pede semper est, vitae luctus metus libero eu augue. Morbi purus libero, faucibus adipiscing, commodo quis, gravida id, est. Sed lectus.</p>
        </section>
       <a href="#test" class="header"><h1>Fusce lobortis lorem at ipsum semper sagittis.</h1></a>
        <section>
            <p>Morbi interdum mollis sapien. Sed ac risus. Phasellus lacinia, magna a ullamcorper laoreet, lectus arcu pulvinar risus, vitae facilisis libero dolor a purus. Sed vel lacus.</p>
        </section>
   </article>
</div> 
```

手风琴代码为 -

```
$("#accordion").accordion({header : "a.header", heightStyle : "content", 
   /*Allows full collapse*/collapsible: true, 
   /*collapses sections*/ active:false, 
   navigation:true
}); 
```

我们的链接是 - [http://jsfiddle.net/3tGYB/2/](http://jsfiddle.net/3tGYB/2/)

你可以试试这个...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:50:46.477

作为旁注，您最好使用[`details`and`summary`](http://html5doctor.com/the-details-and-summary-elements/)元素。

# python - 使用 BeautifulSoup 解析 HTML

> ID：15538610
> 
> 赞同：2
> 
> 时间：2013-03-21T02:51:14.570
> 
> 标签：python, html-parsing, beautifulsoup

我想使用 Python 中的 BeautifulSoup 模块阅读网页上的列表。HTML 代码如下：

```
...
<ul id="sidebarmenu1">
<li><a href="Business">Business</a></li>
<li><a href="Warfare">Chinese</a></li>
</ul>
... 
```

我使用 BeautifulSoup 解析文档。现在我想遍历列表的元素。所以我使用 next_siblings 属性如下：

```
first_element = soup.ul.li
for items in soup.ul.li.next_siblings :
    <statements> 
```

但是，这会产生以下错误：

```
TypeError: 'NoneType' object is not iterable 
```

谁能告诉我如何阅读下一个 li 标签。由于显然在同一级别上还有另一个 li 标签，所以它应该在 next_siblings 列表中。

没有办法访问同一级别的所有 li 标签。findAll 给出了嵌套在给定结构中的**所有标签。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:09:17.573

借用@elssar 的答案，我使用了以下代码：

```
main_list= soup.find('ul', attrs= {'id': 'sidebarmenu1'}
for li in main_list.findAll('li',attrs={},recursive=False):
    ul = li.find('ul')
    if ul == None :
        #do something
    else:
        navigate(ul) 
```

其中 navigate(item) 是递归函数：

```
def navigate(item):
    for con in item.findAll('li',attrs={},recursive=False):
            ul = con.find('ul')
            if (ul == None):
                #do something
            else:
                navigate(ul) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:06:06.107

请参阅[此解决方案](https://stackoverflow.com/questions/4362981/beautifulsoup-how-do-i-extract-all-the-lis-from-a-list-of-uls-that-contains)。它对嵌套元素使用 findAll()。

不确定这是否完全是您想要的，但这可能是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:12:39.540

你做这样的事情 -

```
main_list= soup.find('ul', attrs= {'id': 'sidebarmenu1'}
elements= main_list.findAll('li')
for link in elements:
    #do something 
```

# c# - 是否可以获取对象的属性和相关属性？

> ID：15538612
> 
> 赞同：2
> 
> 时间：2013-03-21T02:51:43.020
> 
> 标签：c#, reflection, collections, properties, attributes

是否可以将属性及其关联属性作为集合或属性集获取？

我正在查看的对象的属性具有在 JSON.NET 中使用的属性，我想找出它们都是什么。之后，我将尝试找出其中哪些不为空。

这是一个示例对象：

```
[JsonObject]
    public class Conditions
    {
        [JsonProperty("opened_since")]
        public DateTime? OpenedSince { get; set; }
        [JsonProperty("added_until")]
        public DateTime? AddedUntil { get; set; }
        [JsonProperty("opened_until")]
        public DateTime? OpenedUntil { get; set; }
        [JsonProperty("archived_until")]
        public DateTime? ArchivedUntil { get; set;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T03:48:38.740

这将为您提供所有属性、它们的属性和属性参数的值（请注意，此解决方案假定您使用的是 .net 框架版本 4.5）：

```
PropertyInfo[] props = obj.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);
foreach (PropertyInfo prop in props)
{
    Console.WriteLine("Property: " + prop.Name);
    foreach (CustomAttributeData att in prop.CustomAttributes)
    {
        Console.WriteLine("\tAttribute: " + att.AttributeType.Name);
        foreach (CustomAttributeTypedArgument arg in att.ConstructorArguments)
        {
            Console.WriteLine("\t\t" + arg.ArgumentType.Name + ": " + arg.Value);
        }
    }
} 
```

输出：

```
Property: OpenedSince
        Attribute: JsonPropertyAttribute
                String: opened_since
Property: AddedUntil
        Attribute: JsonPropertyAttribute
                String: added_until
Property: OpenedUntil
        Attribute: JsonPropertyAttribute
                String: opened_until
Property: ArchivedUntil
        Attribute: JsonPropertyAttribute
                String: archived_until 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T02:56:00.553

试试这个

```
public static Hashtable ConvertPropertiesAndValuesToHashtable(this object obj)
    {
        var ht = new Hashtable();

        // get all public static properties of obj type
        PropertyInfo[] propertyInfos =
            obj.GetType().GetProperties().Where(a => a.MemberType.Equals(MemberTypes.Property)).ToArray();
        // sort properties by name
        Array.Sort(propertyInfos, (propertyInfo1, propertyInfo2) => propertyInfo1.Name.CompareTo(propertyInfo2.Name));

        // write property names
        foreach (PropertyInfo propertyInfo in propertyInfos)
        {
            ht.Add(propertyInfo.Name,
                   propertyInfo.GetValue(obj, BindingFlags.Public, null, null, CultureInfo.CurrentCulture));
        }

        return ht;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T03:39:31.010

在阅读了上面 Chris 的回答和[Marc Gravell 对这个问题的回答后，我找到了答案](https://stackoverflow.com/a/630410/24391)

我创建了这个函数来为我做这件事：

```
 public HastTable BuildRequestFromConditions(Conditions conditions)
    {
        var ht = new HashTable();
        var properties = conditions.GetType().GetProperties().Where(a => a.MemberType.Equals(MemberTypes.Property) && a.GetValue(conditions) != null);
        properties.ForEach(property => 
            {
                var attribute = property.GetCustomAttribute(typeof(JsonPropertyAttribute));
                var castAttribute = (JsonPropertyAttribute)attribute;

                ht.Add(castAttribute.PropertyName, property.GetValue(conditions));
            });
        return request;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T03:17:56.413

像这样的东西？如果我理解正确，您需要由属性修饰的类的所有属性。我不想包含 JSON.NET 参考，所以改用`XmlText`属性。

```
 [Test]
    public void dummy()
    {
        var conditions = new Conditions();

        var propertyInfos = conditions.GetType().GetProperties();
        propertyInfos.ForEach(x =>
            {
                var attrs = x.GetCustomAttributes(true);
                if (attrs.Any(p => p.GetType() == typeof(XmlTextAttribute)))
                {
                    Console.WriteLine("{0} {1}", x, attrs.Aggregate((o, o1) => string.Format("{0},{1}",o,o1)));
                }
            });
    } 
```

班级看起来像这样 -

```
[XmlType]
public class Conditions
{
    [XmlText]
    public DateTime? OpenedSince { get; set; }

    [XmlText]
    public DateTime? AddedUntil { get; set; }

    [XmlText]
    public DateTime? OpenedUntil { get; set; }

    [XmlText]
    public DateTime? ArchivedUntil { get; set; }

    public string NotTobeListed { get; set; }
} 
```

控制台输出：

```
System.Nullable`1[System.DateTime] OpenedSince System.Xml.Serialization.XmlTextAttribute
System.Nullable`1[System.DateTime] AddedUntil System.Xml.Serialization.XmlTextAttribute
System.Nullable`1[System.DateTime] OpenedUntil System.Xml.Serialization.XmlTextAttribute
System.Nullable`1[System.DateTime] ArchivedUntil System.Xml.Serialization.XmlTextAttribute 
```

请注意，`NotToBeListed`不会显示。

# android - Android中的线程。不知道该怎么做。超级困惑

> ID：15538617
> 
> 赞同：0
> 
> 时间：2013-03-21T02:52:11.240
> 
> 标签：android, multithreading, canvas, view, methods

我只使用 java 几个星期，我不知道发生了什么。

我正在制作一个画布，我从教程中复制粘贴了这段代码，但是它有一堆错误，我确信这些错误只会发生，因为我不知道如何实际设置代码。本教程适用于已经知道如何进行线程的人，我迷路了。我不知道如何解决这些错误。

即：

postInvalidate() “不是方法”之类的，即使它是内置的 android 函数......与 setWillNotDraw 和其他函数相同。

我非常困惑，我不知道如何解决这些错误。

```
package com.example.routedrawingtest;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

class PanelThread extends Thread {
        private SurfaceHolder _surfaceHolder;
        private DrawingPanel _panel;
        private boolean _run = false;

        public PanelThread(SurfaceHolder surfaceHolder, DrawingPanel panel) {
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) { //Allow us to stop the thread
            _run = run;

        }
        @Override
        public void run() {
            Canvas c;
            while (_run) {     //When setRunning(false) occurs, _run is 
                c = null;      //set to false and loop ends, stopping thread

                try {

                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder) {

                        postInvalidate();
                }
} finally {
                  if (c != null) {
                      _surfaceHolder.unlockCanvasAndPost(c);
                  }
              }
        }
         }

public void surfaceCreated(SurfaceHolder holder) {

setWillNotDraw(false); //Allows us to use invalidate() to call onDraw()

_thread = new PanelThread(getHolder(), this); //Start the thread that
    _thread.setRunning(true);                     //will make calls to 
    _thread.start();                              //onDraw()
}

public void surfaceDestroyed(SurfaceHolder holder) {
try {
    _thread.setRunning(false);                //Tells thread to stop
_thread.join();                           //Removes thread from mem.
} catch (InterruptedException e) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:56:30.160

postInvalidate() 和 setWillNotDraw() 应用于普通的基于 View 和 ViewGroup 的图形。您的代码正在绘制到 Surface。这些图形方法不能以这种方式混合和匹配。

如果你是新手并且不知道自己在做什么，我建议你扔掉所有 Surface 的东西。了解如何基于 Views 和 ViewGroups 设计布局并为此编写代码。它也不需要任何线程。

从这里开始：http: [//developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

# html - Html CSS - 将样式应用于类中的所有元素？

> ID：15538622
> 
> 赞同：1
> 
> 时间：2013-03-21T02:52:31.103
> 
> 标签：html, css, asp.net-mvc

我有一个奇怪的情况，我有一张桌子，每一行都有一个 ajax 表单。 `Form`不允许进入`tr`，但允许进入`td`。所以我不得不将所有列放在 a`td`中并手动匹配大小。问题是 HtmlHelpers(ASP.Net MVC Razor) 添加的填充和边距，导致内容未在正确的标题列下对齐。

我需要编写一个css，在给定的类中递归地消除所有项目的所有边距和填充。我怎样才能做到这一点？

或者有没有更简单的方法来强制对齐标题下的内容？

```
<table style="width: 100%">
<thead>
    <tr>
        <th style="width: 5%">Id</th>
        <th style="width: 35%">Material</th>
        <th style="width: 60%">Description</th>
    </tr>
</thead>
<tbody>
    @foreach (var item in Model.items){
        <tr>
            <td class="noMarginAndPadding" colspan="3">
            @using (@Ajax.BeginForm()){
                <span style="width: 5%">@Html.TextBoxFor(i => item.Id)</span>
                <span style="width: 35%">@Html.TextBoxFor(i => item.Name)</span>
                <span style="width: 60%">@Html.TextBoxFor(i => item.Description)</span>
            }
             </td>
        </tr>
    }
</tbody> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:17:26.700

`<span>`s 是内联元素，它们不能接受宽度、高度..

要允许接受宽度，请添加 display: block; 到 Span 的 CSS。

否则使用 Div 而不是 Span

```
@using (Ajax.BeginForm("Result", new AjaxOptions { UpdateTargetId ="result"}))
 {
      <div style="width:5%;float:left;text-align:center" >@Html.TextBoxFor(i => item.Id)</div>
      <div style="width: 35%;float:left;text-align:center">@Html.TextBoxFor(i => item.Name)</div>
      <div style="width: 60%;float:left;text-align:center">@Html.TextBoxFor(i => item.Description)</div>
 } 
```

# cocoa - 如何从 DTrace 脚本打印 NSString

> ID：15538623
> 
> 赞同：1
> 
> 时间：2013-03-21T02:52:58.887
> 
> 标签：cocoa, nsstring, dtrace

这个[问题](https://stackoverflow.com/questions/1413623/how-do-i-print-a-cfstringref-in-a-dtrace-action)问的是同样的事情，但是当我尝试时：

```
typedef long long ptr_t;

objc$target:NSWindow:-setTitle?:entry
{

    printf( "%30s %10s %x %x %x\n", probemod, probefunc, arg0, arg1, arg2 );

    this->str = *(ptr_t*)copyin(arg2+2*sizeof(ptr_t), sizeof(ptr_t));

    printf("string addr = %p\n", this->str);
    printf("string val  = %s\n", copyinstr(this->str));
} 
```

它没有用。arg2 应该是 NSString 的地址。我有：

> NSWindow -setTitle: 100685240 7fff92d82f73 7fff78a6eb80 string addr = 7fff8e7e83b9 string val=Window dtrace: 启用探针 ID 5 上的错误 (ID 35737: objc9434:NSWindow:-setTitle::entry): 无效地址 (0x6c007400690074) 在 DIF 偏移量 #8 24

您可以假设 NSString 的 MacRoman 或 ASCII 编码 - 基本上无需担心复杂的（从 DTrace 角度来看）编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T23:44:16.177

您的问题是否真的与另一个问题相同取决于 NSString 的内部表示是否与 CFStringRef 的相同。我不知道，希望其他人能澄清一下，但我怀疑答案是两者不同。另一个问题的答案中的 D 脚本意味着 CFStringRef 有一个字符*指针*，但是玩弄 gdb 表明 NSString 看起来像这样：

```
结构 NSString {
    uintptr_t 垫[2]；
    字符名称[1]；/* 变长数组 */
};

```

这是一个相应的运行脚本：

```
bash-3.2# 猫标题.d
类型定义结构{
    uintptr_t 垫[2]；
    字符名称[1]；
} NSString_t;

objc$target:NSWindow:-setTitle?:entry
{
    self->namep = (uintptr_t)arg2 + offsetof(NSString_t, name);
    printf("name = %s\n", copyinstr(self->namep));

}
bash-3.2# ps -ef | fgrep -i 火狐
  501 31895 204 0 0:01.22 ?? 0:04.48 /opt/Applications/Firefox.app/Contents/MacOS/firefox -psn_0_27167207
    0 32045 31422 0 0:00.05 ttys000 0:00.06 fgrep -i firefox
bash-3.2# dtrace -arch x86_64 -Cqs title.d -p 31895
名称 = Mozilla 火狐
名称 = 新标签
名称 = 新标签
名称 = Mozilla 火狐
名称 = 新标签
^C

bash-3.2#

```

如果您正在检查 32 位进程，则 use`-arch i386`和 dtrace(1) 将适当地调整其指针大小的概念。

# handsontable - 将列动态添加到handsontable

> ID：15538626
> 
> 赞同：6
> 
> 时间：2013-03-21T02:53:10.633
> 
> 标签：handsontable

我正在尝试将一列动态添加到handsontable。我在任何地方都没有看到示例，也没有在 API 中看到这样做的方法。有没有人想出一种方法来克服这个问题，或者有一些我可以查看的示例代码会有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-28T23:49:05.177

你试过使用`handsontable('alter', 'insert_col', index, amount)`方法吗？您可以使用方法添加和删除列和行`alter`。请参阅handsontable 项目的[文档页面](http://docs.handsontable.com/pro/1.8.2/Core.html#alter)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:43:38.977

一个临时的解决方案是动态维护一个数据表。当需要新列时，更新数据结构并重新启动整个表。也许以下片段可能对您有所帮助。

```
(function($) {
$(function() {
    var data = [['a', 'b', 'c', 'd'], [1, 1, 1, 1], [2, 2, 2, 2]];
    $('#a-div').handsontable({data: data});

    /* add a new column */
    data[0].push('e');
    var len = data.length;
    for (var i = 1; i < len; i++) {
        data[i].push(i);
    }
    $('#a-div').handsontable({data: data});

    /* if new column isn't at the tail */
    data[0].splice(idx, 0, "f");
});})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T10:16:08.567

如果您定义列设置，则它不会添加列运行时来解决此问题，请参阅链接[如何为 Handsontable 创建动态列？](https://stackoverflow.com/questions/16185751/how-to-create-dynamic-columns-for-handsontable)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-09T21:28:34.093

```
<div id="handsontable"></div> 
```

**JS**

```
var Data = [{
    "header": {scope1: Name, scope2: Address, scope3: Address, scope4: Country},
    "tableData":[{....}, {....}]
}]
var $container = $('#handsontable');
var headerData = [];
var tableData = Data.tableData; 

$.each(Data.header, function(k,v){
    headerData.push(v);
});

$container.handsontable({
    colHeaders: function (col) {
        var j=0;
        var colCount = headerData.length;
        do {
            if(col == j)
                return headerData[j];
            j++;
        } while (j<colCount)
    }
});

var hot = $container.data('handsontable');
hot.loadData(tableData); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-05T20:56:33.937

你应该使用`alter`函数

假设您有一个 2x3 的表，并且您希望它是 5x5。

```
curRows = myTable.countRows() //curRows = 2
curCols = myTable.countCols() //curCols = 3
var newRows = 5
var newCols = 5

if(newRows > curRows){
   myTable.alter('insert_row',curRows ,newRows - curRows); 
}
else if (newRows < curRows){
    myTable.alter('remove_row', curRows,curRows - newRows );
}
if(newCols > curCols){
    myTable.alter('insert_col',curCols, newCols - curCols); 
}
else if (newCols < curCols){
    myTable.alter('remove_col',curCols, curCols - newCols);
} 
```

# ios - 不兼容的指针 - 来自 URL 的 MPMoviePlayer

> ID：15538628
> 
> 赞同：0
> 
> 时间：2013-03-21T02:53:24.770
> 
> 标签：ios, pointers, mpmovieplayercontroller, mpmovieplayer

我有一个从 XML 数据加载视频文件的 NSArray。当您按下 Array 项时，它会加载一个带有按钮的视图，该按钮应加载 NSString url。这是我正在使用的代码。

```
-(IBAction)playMovie:(id)sender
    {
        RSSItem* item = (RSSItem*)self.description;
        NSURL *movieUrl = [NSURL URLWithString: item];
        MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:movieUrl];
        [self.view addSubview:moviePlayerController.view];
        moviePlayerController.fullscreen = YES;
        [moviePlayerController play]; 
    } 
```

我收到警告“不兼容的指针类型将'RSSItem *_strong'发送到'NSString *'类型的参数

我已经尝试了所有我能想到的将字符串转换为字符串并让它工作的方法。如果这个问题对于论坛来说太具体或太基本，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:03:47.777

该`NSURL URLWithString:`方法需要一个类型为 的参数`NSString`。但是您正在传递一些未知`RSSItem`对象。你需要通过一个`NSString`.

你为什么要投射`self.description`到一个`RSSItem`？该`description`方法是标准方法`NSObject`。它返回一个`NSString`.

如果您已将自己的`description`方法添加到您的类中，您真的应该重命名它。该`description`方法已经具有特定目的。

如果您使用的是标准`description`方法，那么这是一个不好的用途。该`description`方法不应该用于除调试之外的任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:03:57.847

这：

`RSSItem* item = (RSSItem*)self.description;`

应该是这样的：

`NSString* item = self.description;`

代码中的上述行令人费解和麻烦。您为什么要尝试将`description`（以 an`NSString`开头）转换为 an `RSSItem`？

# java - 是否有等效的 x++ 可用于表达式中以大于 1 的值递增？

> ID：15538631
> 
> 赞同：2
> 
> 时间：2013-03-21T02:53:39.857
> 
> 标签：java, increment, post-increment

为稍微混乱的标题道歉。

众所周知，

```
 int x = 4;
    System.out.println(x++); // prints 4
    x = 4;
    System.out.println(++x); //prints 5 
```

通过实验，我发现

```
 int x = 4;
    System.out.println(x+=4); //prints 8 
```

是否有上述类似物会增加 x 但打印 4 代替？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T02:56:28.227

与其他赋值运算符一样，速记赋值返回最终值。
这允许你写

```
x = y = z += 4; 
```

没有返回原始值的后速记运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:56:58.447

尝试这个 ：

```
int x = 4;
System.out.println((x+=4)-4); //prints 4 
```

或者

```
int x = 4;
System.out.println((x+=4)-x); //prints 4 
```

但是，对于您所指的场景，没有快捷操作数。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:03:59.163

++x 是前增量，x++ 是后增量

```
//pre increment
int x = 3;
System.out.println(++x); //prints 4
System.out.println(x); //prints 4

//post increment
int y = 7;
System.out.println(y++); //prints 7
System.out.println(y); // this will print 8 now because of the postincrement 
```

所以我认为你的问题的答案是变量的后递增。

# javascript - 选择时隐藏 DIV

> ID：15538635
> 
> 赞同：1
> 
> 时间：2013-03-21T02:54:06.973
> 
> 标签：javascript, jquery

我有2个选择。如果用户在没有下拉选择的情况下提交表单，则会在 DIV 上显示一条消息。当用户选择值时，有一种方法可以隐藏 div（消失？）？

脚本：

```
$(document).ready(function () {
$("#go").click(function () {

if (document.getElementById('sel').selectedIndex == 0)
$("#msg").html("Please select 1");

if (document.getElementById('sel2').selectedIndex == 0)
$("#msg2").html("Please select 2");

});
}); 
```

形式：

```
<form id="form1">  
<div id="msg"></div>                  
<select id="sel">
<option value="">-- select --</option>
<option value="valor1">Valor 1</option>
<option value="valor2">Valor 2</option>
</select>

<div id="msg2"></div>
<select id="sel2">
<option value="">-- select --</option>
<option value="valor1">Valor 1</option>
<option value="valor2">Valor 2</option>
</select>

<input type="button" id="go" value="Go" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:01:10.807

你可以利用 jQuery 中的[change](http://api.jquery.com/change/)事件来做什么。这使您可以监视特定元素（例如 select 元素）的更改。我[为你做了一个小提琴](http://jsfiddle.net/atomicpages/FYyq4/)。示例代码可以在这里看到：

```
$("#go").click(function () {
    if (document.getElementById('sel').selectedIndex == 0) $("#msg").html("Please select 1");
    if (document.getElementById('sel2').selectedIndex == 0) $("#msg2").html("Please select 2");
});

$('select').change(function() {
    if (document.getElementById('sel').selectedIndex != 0) $("#msg").fadeOut();
    if (document.getElementById('sel2').selectedIndex != 0) $("#msg2").fadeOut();
}); 
```

这对你来说应该是一个很好的起点。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:56:34.433

隐藏 div 的最佳方法是使用 CSS 属性 display 并将其设置为 none。在 jQuery 中，您可以使用 hide 方法或通过 css 方法手动执行此操作。

```
$('#msg').hide();
$('#msg2').css('display','none'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:06:11.450

```
$("#go").click(function () {

if ($('#sel').val() == '')
    $("#msg").text("Please select 1");

if ($('#sel2').val() == '')
$("#msg2").text("Please select 2");

});
$('#sel').change(function(){$('#msg').hide()})
$('#sel2').change(function(){$('#msg2').hide()}) 
```

和工作jsfiddle：http: [//jsfiddle.net/RmYbH/2/](http://jsfiddle.net/RmYbH/2/)

# sql - 相似列出现的数量

> ID：15538639
> 
> 赞同：3
> 
> 时间：2013-03-21T02:54:26.500
> 
> 标签：sql, sql-server, count, sql-insert

我是 SQL SERVER 的新手，需要您提供一些建议。我有一张带有商店信息的大桌子。这是 bench_id 列：

```
**bench_id**
31
51
51
61
61
61
71
71 
```

我创建了另一个包含两列的小表：

```
**distinct_bench**           **number**
-----------------------------

31                               1
51                               2
61                               3
71                               2 
```

第二个表的 NUMBER 列显示 bench_id 出现的次数。我试过这段代码：

```
insert into [dbo].BATCH_ID (batch_id, number)
select 
     distinct [dbo].big_table.batch_id,
           (select count([dbo].big_table.batch_id) from [dbo].big_table)
     from [dbo].big_table 
```

但是无法通过 bench_id 的出现次数得到我期望的正确答案。你能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:56:29.647

您需要有`GROUP BY`子句，因为您需要使用`COUNT()`来计算`benchID`.

```
INSERT INTO BATCH_ID (distinct_bench), number)
SELECT  benchID as distinct_bench, COUNT(*) number
FROM    big_table
GROUP   BY BATCH_ID 
```

# php - 注意：PHP 中未初始化的字符串偏移量

> ID：15538646
> 
> 赞同：3
> 
> 时间：2013-03-21T02:55:19.477
> 
> 标签：php

嗨，我有这个功能，它返回一个通知：

注意：未初始化的字符串偏移量

```
function generaterandomkey($length) {       

    $string='';
    $characters = "0123456789abcdef";
    for ($p = 0; $p < $length ; $p++) {
        $string .= $characters[mt_rand(0, strlen($characters))];            
    }

    return $string;
} 
```

受影响的行是这样的：

```
$string .= $characters[mt_rand(0, strlen($characters))]; 
```

我试过用大括号做，但它不起作用。如果有人可以指出一些建议，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T02:58:23.323

你偶尔会`$characters`因为`strlen($characters)`，应该是超支`strlen($characters) - 1`。你的随机范围应该从零开始，你需要以长度*减一*结束。如果 的长度`$characters`为 10，则最后一个从零开始的数组索引为*9*，这将成为随机选择的上限。

```
$string='';
$characters = "0123456789abcdef";
for ($p = 0; $p < $length ; $p++) {
    $string .= $characters[mt_rand(0, strlen($characters) - 1)]; 
} 
```

`mt_rand()`因为您是随机选择的，所以您不会总是收到通知 - 只有在循环中的某个点返回其最大值时才会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T20:25:06.307

最好的方法：将您的字符串表达式转换为数组，然后转换为这样的字符串：

函数`readnumber`知道任意长度的数字：

```
function readnumber($str, $i) 
{
    $string=$str;
    $number = '';
    $s="";
    for($j=0;$j<strlen($string);$j++)
    {
        $char=$string[$j];
        $char.=" ";
        $s.=$char;
    }
    $s=explode(" ",$s);
    while ($this->is_number($s[$i]))
        $number .= $s[$i++];        
    return $number;
} 
```

可以这样使用它：

```
$str="154+458-8";
$number=readnumber($str,1);
echo($number); 
```

# javascript - 如何在 Kendo UI Combobox 中手动将项目添加到数据源中

> ID：15538649
> 
> 赞同：3
> 
> 时间：2013-03-21T02:55:42.727
> 
> 标签：javascript, jquery, kendo-ui

我有一个组合框，它由从 servlet 接收的 JSON 字符串填充。

```
$(document).ready(function() {
    //Combobox Init (From Servlet)
    var comboBoxDataSource = new kendo.data.DataSource({
        transport : {
            read : {
                url : "net/samso/action/common/ComboAction?flag=SRCHGT_IO_GB", // url to remote data source 
                dataType : "json",
                type : 'GET'
            }
        },
        schema : {
            model : {
                fields : {
                    key : {
                        type : "string"
                    },
                    value : {
                        type : "string"
                    }
                }
            }
        }
    });

    //Manually add an item
    comboBoxDataSource.add({key: "062", value: "Total"});

    //Initialize Combobox
    $("#cb_srchgt_io_gb").kendoComboBox({
        dataSource : comboBoxDataSource,
        dataTextField : "value",
        dataValueField : "key"
    })
}); 
```

代码工作正常，直到我尝试手动将项目添加到数据源`comboBoxDataSource.add({key: "062", value: "Total"});`。添加项目后，它会删除从数据源中的 JSON 数据填充的其他项目。

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T07:45:23.180

问题是 DataSource 是异步初始化的，我的意思是，您在`combobox`初始化时开始加载，但操作直到从服务器接收回数据才完成。然后，也只有那时，您应该调用该元素。将语句移到示例代码的末尾甚至是不可接受的`add`，因为从服务器加载可能需要几毫秒或几秒。

如果要向从服务器接收的内容添加元素，可以使用：

```
$(document).ready(function () {
    //Combobox Init (From Servlet)
    var comboBoxDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url     : "net/samso/action/common/ComboAction?flag=SRCHGT_IO_GB", // url to remote data source 
                dataType: "json",
                type    : 'GET'
            }
        },
        schema   : {
            model: {
                fields: {
                    key  : { type: "string" },
                    value: { type: "string" }
                }
            },
            data: function(result) {
                //Manually add an item
                result.push({key: "062", value: "Total"});
                return result
            }
        }
    });

    //Initialize Combobox
    $("#cb_srchgt_io_gb").kendoComboBox({
        dataSource    : comboBoxDataSource,
        dataTextField : "value",
        dataValueField: "key"
    })
}); 
```

您可以使用事件执行相同的操作`requestEnd`并将额外元素推送到`e.response`：

```
requestEnd: function (e) {
    console.log("e", e);
    e.response.push({key: "062", value: "Total"});
} 
```

基本上，从服务器接收到数据后触发的任何事件都可以。

# java - 如何更新变量并使其在java中持久化？

> ID：15538663
> 
> 赞同：-4
> 
> 时间：2013-03-21T02:56:41.983
> 
> 标签：java

例如，我有一个私有成员初始化为 String str = "A"。程序完成后，我希望 str 成为“B”。然后，第二天当我运行同一个程序时，str 的值是“B”，而不是“A”。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T02:57:49.480

您需要将数据写入持久存储位置，例如数据库或磁盘上的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:33:46.627

你能告诉更多关于“第二天当我运行同一个程序时，str的值是“B”，而不是“A”。你的程序驻留在哪里？你是否通过启动服务器再次启动程序？在程序的最后退出点调用以下代码 import java.lang.reflect.Field;

```
public class Reflection {
    String str = "A";
    void test(){
        Class test=    Reflection.class;
        try {
      Field aa=      test.getDeclaredField("str");
      aa.setAccessible(true);
      try {

        aa.set(this, "B");
        System.out.println(str);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchFieldException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

public static void main(String[] args) {
    Reflection test=new Reflection();
    test.test();
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:27:45.090

（扩展 SLaks 答案） - 如果您想在执行之间将任何信息保留在程序中，则该信息需要存储在程序外部的某个位置。这可以是数据库（通常用于大型/复杂程序）或文件（用于小型程序），或介于两者之间的任何内容（异地云存储等）。任何“保存文档”的桌面应用程序都使用相同的概念 - 它基本上是保存在文件中的状态，您可以通过程序重新加载。

Java 中的一个简单示例是使用属性文件 -[这个问题](https://stackoverflow.com/questions/5769063/java-write-properties-file)给出了如何将信息写入属性文件的示例 - 您可以在下次启动应用程序时使用相关的 API 来读取这些属性。

如果您更喜欢冒险，Java 中有[几个](http://en.wikipedia.org/wiki/Java_Persistence_API)提供持久性功能的框架，但这听起来比您在应用程序中寻找的复杂得多。

# inversion-of-control - Autofac - 如何从单例中解析 ISomething 的 Func，其中 ISomething 是 InstancePerHttpRequest

> ID：15538665
> 
> 赞同：15
> 
> 时间：2013-03-21T02:56:54.020
> 
> 标签：inversion-of-control, autofac, fluentvalidation

我正在尝试使用 Autofac 将依赖项注入到 MVC 4 应用程序中的 FluentValidation 中。我想我已经制定了策略，但是我一直无法解决我的单例请求 ISomething。

这是场景：我有一个从 FluentValidation 的 AbstractValidator 派生的验证器。我读过 FluentValidation 验证器作为单例执行得最好，所以我的构造函数需要一个 Func 并存储该 Factory 以供以后使用。使用验证器时，它应该向存储的工厂请求 IDataStore，获取为该请求创建的实例并使用它。这就是理论。我想感谢[https://github.com/robdmoore/UnobtrusiveMVCTechniques](https://github.com/robdmoore/UnobtrusiveMVCTechniques)，它帮助我解决了这个解决方案。这是验证器...

```
public class SiteAdminViewModelValidator : AbstractValidator<SiteAdminViewModel> {
    private readonly Func<IDataStore> _dbFactory;

    public SiteAdminViewModelValidator(Func<IDataStore> dbFactory) {
        _dbFactory = dbFactory;

        RuleFor(model => model.SiteCode).Length(1, 40).Must(BeSpecial);
    }

    public bool BeSpecial(string siteCode) {
        var db = _dbFactory();
        List<Stuff> stuffs = db.All<Stuff>().ToList();

        return true;
    }
} 
```

如果有人可以为我指出我正在尝试完成的工作示例，那就太好了，但我也想知道解决这个特殊的 Autofac 技巧的方法。

这是我的验证人注册...

```
public class FluentValidatorModule : Module {
    protected override void Load(ContainerBuilder builder) {
        base.Load(builder);
        builder.RegisterType<AutofacValidatorFactory>().As<IValidatorFactory>().SingleInstance();

    var validators = AssemblyScanner.FindValidatorsInAssembly(System.Reflection.Assembly.GetExecutingAssembly());
    validators.ToList().ForEach(v => builder.RegisterType(v.ValidatorType).As(v.InterfaceType).SingleInstance());
    }
} 
```

这是我对 IDataStore 工厂的注册...

```
builder.RegisterType<SuperDB>().As<IDataStore>().InstancePerHttpRequest();
builder.Register<Func<IDataStore>>(c => {
                                       var context = c.Resolve<IComponentContext>();
                                       return context.Resolve<IDataStore>;
                                   }); 
```

这是我的验证器在行上请求 IDataStore 时遇到的错误 - var db = _dbFactory();

> 从请求实例的范围中看不到带有与“AutofacWebRequest”匹配的标记的范围。这通常表明注册为 per-HTTP 请求的组件正在由 SingleInstance() 组件（或类似场景）请求。在 Web 集成下，始终从 DependencyResolver.Current 或 ILifetimeScopeProvider.RequestLifetime 请求依赖项，而不是从容器本身.

...这正是我在编写自己的工厂注册之前尝试它时得到的——Func 注册。通过阅读类似问题的各种答案，看起来我上面的内容应该可以工作，因为我认为我现在正在解析 Func 以获得当前的解析器。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T08:18:53.080

我同意这应该可行 -`Func<IDataStore>`正在定义一个工厂，它将根据需要在每种方法中产生依赖关系。

我解决此方法的方法是使用`DependencyResolver.Current`错误消息建议的方法。主要原因是我已经使用 Autofac.Mvc4 nuget 包进行了设置...

```
DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

所以要实际设置方法，我有以下功能

```
public Func<T> PerHttpSafeResolve<T>()
{
    return () => DependencyResolver.Current.GetService<T>();
} 
```

并且在构建容器时

```
builder.RegisterType<SuperDB>().As<IDataStore>().InstancePerHttpRequest();
builder.RegisterInstance(PerHttpSafeResolve<IDataStore>()); 
```

编辑：注册实例的第二行是说 - 如果你需要 a`Func<IDataStore>`然后使用传递给方法的值。的结果`PerHttpSafeResolve<IDataStore>`只是一个函数（工厂），因此它可以作为单个实例存在。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T04:49:50.297

问题是验证器的范围。Autofac 总是`SingleInstance`从应用程序容器中解析依赖关系，这意味着验证器的依赖关系也来自应用程序容器。

Autofac 是从*那里*`Func<IDataStore>`请求实例，而不是从请求容器。当您解析时，您将获得正在解析验证器的容器：应用程序容器。由于范围仅限于请求，Autofac 无法在应用程序级别提供它，因此会出现错误。*`IComponentContext``Func<IDataStore>`*

 *正确的方法是将验证器注册为`InstancePerHttpRequest`. 组件的生命周期取决于其最长生命周期的依赖关系；当验证器没有依赖关系时，它们作为单例的效果最好。但是，在这种情况下，依赖的验证器`IDataStore`最多只能在 `IDataStore`实例的生命周期内存活。（从好的方面来说，你可以摆脱`Func`.）

把它想象成去参加一个聚会：如果你和主人搭便车，你必须待在那里直到聚会结束。如果你想早点离开，你不能和主人一起骑车。*

# python - matplotlib烛台条/框/宽度/间距

> ID：15538668
> 
> 赞同：3
> 
> 时间：2013-03-21T02:57:24.010
> 
> 标签：python, matplotlib, candlestick-chart

我正在使用 matplotlib 绘制烛台图。

[Q] 默认设置显示贯穿开合框的高低柱。我希望开低框位于“上方”线，这样我只能看到 high-max(open,close) 和 min(open,close)-low 作为线。那可能吗？如何？

> 我回答了我自己的问题，如果它对其他人有帮助，我会将我的发现与原始问题一起发布。
> 
> 做到这一点的唯一方法是重写烛光() 函数以绘制两条线而不是一条线。我有一些我正在使用的示例代码来执行此操作。总是很高兴听到更好的方法来做同样的事情。

```
def fooCandlestick(ax, quotes, width=0.5, colorup='k', colordown='r', 
                   alpha=1.0):
    OFFSET = width/2.0

    lines = []
    boxes = []
    for q in quotes:
        t, op, cl, hi, lo = q[:5]

        box_h = max(op, cl)
        box_l = min(op, cl)
        height = box_h - box_l

        if cl>=op:
            color = colorup
        else:
            color = colordown

        vline_lo = Line2D(
            xdata=(t, t), ydata=(lo, box_l),
            color = 'k',
            linewidth=0.5,
            antialiased=True,
        )
        vline_hi = Line2D(
            xdata=(t, t), ydata=(box_h, hi),
            color = 'k',
            linewidth=0.5,
            antialiased=True,
        )
        rect = Rectangle(
            xy = (t-OFFSET, box_l),
            width = width,
            height = height,
            facecolor = color,
            edgecolor = color,
        )
        rect.set_alpha(alpha)
        lines.append(vline_lo)
        lines.append(vline_hi)
        boxes.append(rect)
        ax.add_line(vline_lo)
        ax.add_line(vline_hi)
        ax.add_patch(rect)
    ax.autoscale_view()

    return lines, boxes 
```

[Q] matplotlib 是否支持设置蜡烛的宽度以及每个烛台之间的间距？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:14:54.827

我不确定间距，但是：

*   `alpha`您可以使用kwarg将框的透明度设置为`candlestick`. `1`应该是不透明的。
*   您可以使用`width`kwarg 设置宽度，不确定单位是什么，只需使用它们即可。

例如：

```
candlestick(ax, quotes, width=0.5, alpha=1.0) 
```

* * *

啊，这个答案在两者之间添加了空数据作为增加烛台间间距的技巧： [https ://stackoverflow.com/a/9713447/1730674](https://stackoverflow.com/a/9713447/1730674)

# c++ - c ++在类构造函数中重置默认数组长度

> ID：15538673
> 
> 赞同：0
> 
> 时间：2013-03-21T02:58:08.213
> 
> 标签：c++, constructor, global-variables

给定类定义如下：

```
struct A {
   std::vector<int> aList;
   A() {
     for (int i = 0; i < ARRAY_LENGTH; i++)
       aList.push_back(0);
   }
} 
```

程序的其他部分需要 A 的无参数构造函数。是否可以让 ARRAY_LENGTH 变化（比如从外部文件读取/从 gui 修改），这样

*   步骤 0：ARRAY_LENGTH = 10
*   步骤 1：创建 A 的对象，aList.size() 初始化为 10。
*   第二步：使用A的新创建的对象
*   步骤 3：删除 A 之前创建的所有对象
*   步骤 4：使用不同的 ARRAY_LENGTH 值重复步骤 0 到 4，直到程序结束

ARRAY_LENGTH 的修改应该来自外部文件，或者由 gui 修改。并且程序的任何其他部分都不应该对该值具有写访问权。我怎样才能达到这个要求？

编辑：为了销毁现有对象，它将由程序的其他部分处理

编辑（2）：我正在做一个模拟项目，A类中的aList代表家庭规模的可能pdf值。（假设 aList[0] = 0.5，aList[1] = 0.2，aList[3] = 0.3）。只有在程序运行不同的场景时才会发生最大家庭大小的变化，这意味着我将破坏以前创建的 A 对象以重置模拟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:36:43.567

其中一种方法是您可以使用外部 xml 文件来指定 ARRAY_LENGTH 的值；但这将涉及在代码中包含 xml 文件并对其进行解析以获取变量 ARRAY_LENGTH 的值的开销

例如，您的 xml 文件可能如下所示：-

```
< xml version="1.0" encoding="UTF-8" standalone="no" ?> 
-< root>
        < LEN_VAR ARRAY_LENGTH=10/>
< /root> 
```

然后，您需要在代码中包含并编译 C/c++ 的 xml 解析器。（可以免费获得各种解析器：例如[http://biocpp.sourceforge.net/download/xmlParser.cpp](http://biocpp.sourceforge.net/download/xmlParser.cpp)）然后您必须在创建此类的对象之前获取值 ARRAY_LENGTH。

您可以更改 xml 代码中的值而无需重新编译。

将修改通知存档将让您知道您的值何时更改，并且一旦您从 XML 文件中重新读取新值，您的程序就可以继续使用新值。我不确定您使用的是什么平台，但您可以查看[如何在 linux 中创建文件侦听器？](https://stackoverflow.com/questions/15509576/how-do-i-create-a-file-listener-in-linux)或[如何让我的程序监视 C++ 中的文件修改？](https://stackoverflow.com/questions/931093/how-do-i-make-my-program-watch-for-file-modification-in-c)用于通知文件更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:23:48.417

我不确定您对无参数构造函数的要求，这似乎是一个设计弱点，但这是评论中建议的静态默认长度方法的实现

```
struct A {
   private static DefaultLength=ARRAY_LENGTH;

   public static ResetDefault(int newDefault) {
         DefaultLength=newDefault;
   }

   std::vector<int> aList;

   A() {
     for (int i = 0; i < DefaultLength; i++)
       aList.push_back(0);
   }
} 
```

这种性质的对象将正确释放。

# ember.js - 12 因素方法和客户端 Web 应用程序

> ID：15538675
> 
> 赞同：8
> 
> 时间：2013-03-21T02:58:20.600
> 
> 标签：ember.js, 12factor

这个问题非常开放，但是是否有任何资源可以讨论（一页）客户端 Javascript 应用程序的 12 因素方法？如果它考虑使用 EmberJS 构建 Web 应用程序的 12 因素方法，那就更好了。

# r - 将数据框 1 与数据框 2 中的列、行名称附加在一起

> ID：15538680
> 
> 赞同：2
> 
> 时间：2013-03-21T02:59:14.263
> 
> 标签：r, dataframe

我正在尝试在 R 中组合两个表，以便生成的表将从表 1 和表 2 中获取值。

```
df1<-data.frame(Name = c("Gene_1", "Gene_2", "Gene_4", "Gene_3"), "1"=c(0,1,2,6), "2" = c(5,6,7,5), "3" = c(9,8,7,7), check.names=FALSE)

> df1

    Name 1 2 3 
1 Gene_1 0 5 9
2 Gene_2 1 6 8
3 Gene_4 2 7 7
4 Gene_3 6 5 7

df2<-data.frame(Name = c("Gene_2", "Gene_4", "Gene_5"), "1" = c(0,2,3), "2" = c(3,2,1), "3" = c(4,3,2), check.names=FALSE)

> df2

    Name 1 2 3 
1 Gene_2 0 3 4
2 Gene_4 2 2 3 
3 Gene_5 3 1 2 
```

结果应该是这样的：

```
 1 Gene_1 0 5 9 NA NA NA
 2 Gene_2 1 6 8 0 3 4 
 3 Gene_3 6 5 7 NA NA NA 
 4 Gene_4 2 7 7 2 2 2 
 5 Gene_5 NA NA NA 3 1 2 
```

我觉得必须有某种简单的方法来做到这一点，而不是循环......输出按任何顺序对列进行排序不是必需的，我只想确保正确的值放在正确的位置. 我看过论坛，但仍然卡住（谢谢你，贝丝

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:02:01.733

`merge`带你到那里：

```
merge(df1, df2, by='Name', all=TRUE)

##     Name 1.x 2.x 3.x 1.y 2.y 3.y
## 1 Gene_1   0   5   9  NA  NA  NA
## 2 Gene_2   1   6   8   0   3   4
## 3 Gene_3   6   5   7  NA  NA  NA
## 4 Gene_4   2   7   7   2   2   3
## 5 Gene_5  NA  NA  NA   3   1   2 
```

# vb.net - VB - 访问使用代码创建的控件

> ID：15538682
> 
> 赞同：0
> 
> 时间：2013-03-21T02:59:35.677
> 
> 标签：vb.net

所以如果我用代码创建一个`PictureBox`......

```
 Dim the_pic As New PictureBox
    With the_pic
        .Name = "pic"
        .Size = New Size(30, 100)
        .Location = New Point(0, SCREEN_HEIGHT / 2 - 50)
        .SizeMode = PictureBoxSizeMode.StretchImage
        .BackColor = Color.White
    End With
    Me.Controls.Add(the_pic) 
```

...如何访问 created 的方法和属性`PictureBox`？因为它是用代码创建的，所以我不能直接对其进行编程。如果我这样做`pic.*`，它甚至不知道 pic 存在，因为它是在运行时创建的。我该如何解释？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:01:34.947

> 它甚至不知道 pic 存在，因为它是在运行时创建的

这不太正确。

实际上，它不知道`the_pic`存在，因为它是一个**局部变量**。
该变量在定义它的函数之外不可见。

如果您将其设置为班级中的字段，则它将在班级中的任何地方可见。
如果你想拥有多个，你应该使用`List(Of PictureBox)`.

请注意，该`Name`属性不相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:01:33.690

您应该使用为它声明的名称：`the_pic`，即它的程序名称。

如果您查看 .designer.vb 文件，您会发现这是设计器在您以图形方式添加控件时在幕后所做的事情。

您还需要`the_pic`全局声明 and `WithEvents`，如`Private WithEvents the_pic as PictureBox` 如果您不声明它`WithEvents`，您将无法连接到它的任何事件。

# linux - 查找可加载内核模块的内核地址

> ID：15538685
> 
> 赞同：7
> 
> 时间：2013-03-21T02:59:46.380
> 
> 标签：linux, linux-kernel, kernel, embedded-linux, kernel-module

我试图找到我的可加载内核模块被 insmod 重定位的内核地址空间。

我开始知道，通过在安装模块时使用 -m，-O 开关，我们只能从模块的角度看到符号表和可执行文件的部分地址，而不是它们的重定位地址，因为重定位的过程是在我们做一个insmod的时候进行的。

谁能告诉如何在内核内存中找到模块的重定位地址，即加载模块所在的内核中绑定的地址？

谢谢！

PS 请注意，我使用的是 Redhat 2.4 Linux 内核，其中 /proc/modules 列表没有显示加载模块的虚拟地址。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T17:50:37.623

转到目录`/sys/module/<module-name>/sections/.text`- 将显示代码的加载位置， `/sys/module/<module-name>/sections/.data`将显示模块的 bss 部分的数据部分和 .bss。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T03:16:32.800

您可以从 /proc/modules 文件中获取核心部分指针（虚拟地址，不是物理内存地址，但可以转换为物理地址）和模块的占用空间大小。

比如我的 Linux 机器上的部分文件：

```
autofs4 29253 3 - Live 0xf9014000
hidp 23105 2 - Live 0xf900d000
rfcomm 42457 0 - Live 0xf8f84000 
```

# php - 使用 php 流式传输程序的数据，例如 `htop`

> ID：15538687
> 
> 赞同：3
> 
> 时间：2013-03-21T02:59:54.460
> 
> 标签：php, linux, htop

使用这些代码之一

```
system("htop");
//or
exec('htop'); 
```

如何防止 htop 的数据被写入文件或其他东西（脚本的时间限制设置为 0 不用担心）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:57:17.993

htop 是一个交互式程序，它在循环中运行直到退出，并且似乎没有提供任何标志来进行单次迭代然后退出，这使得捕获输出有问题。

你有没有考虑过使用top？您可以使用 -n 1 将其限制为 1 次迭代：

```
$resp = system("top -n 1");
print $resp; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-22T03:20:23.353

这是另一种解决方案，即使用虚拟终端并进行屏幕截图，然后关闭会话。这是一个不错的技巧，但 top -n 1 在资源使用方面更有效。如果在 redhat/centos 中，你需要做 yum screen。似乎包含在 ubuntu/debian 中。

```
<?php
`screen  -d -m -S htop_session htop`;
sleep(1);
`screen -p 0 -S htop_session -X hardcopy`;
`screen -p 0 -S htop_session -X quit`;
?>
<pre>
<?php print file_get_contents('hardcopy.0'); ?>
</pre> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:44:49.340

我同意@d_g 的回答，top 是一个旨在在终端中运行的程序。我建议**使用 AJAX 频繁更新 top 的输出**。

此外，我想添加有关该功能的信息[`passthru()`](http://php.net/manual/de/function.passthru.php)。该函数将 shell 命令的输出直接打印到 php 的标准输出。在外部程序完成之前，您不需要额外的打印和输出。如果命令需要很长时间来处理，这很重要。所以你可以替换：

```
$resp = system("top -n 1");
print $resp; 
```

经过

```
passthru('top -n 1'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T03:04:10.990

`system`并将`exec`命令的结果作为字符串返回。使用[fwrite](http://www.php.net/manual/en/function.fwrite.php)或类似函数将输出保存到文件。

# java - Java：如何将原始 JSON 记录为 JSON 并避免在使用 logback / slf4j 进行记录时转义

> ID：15538688
> 
> 赞同：15
> 
> 时间：2013-03-21T02:59:55.380
> 
> 标签：java, json, logging, slf4j, logback

我在 JAX-RS 应用程序中将 SLF4J 与 Logback 一起使用...我想以这样的方式登录到 JSON，即我的消息不会再次编码，而是将原始打印到日志文件中：

目前它看起来像这样：

```
{"@timestamp":1363834123012,"@message":"{\"text\":\"From MLK to Barack 
Ob...\n\"}" 
```

但我想要这个：

```
 {"@timestamp":1363834123012,"@message": { "text ": "From MLK to Barack 
Ob...\n\} 
```

原因是我想再次解析 JSON 并希望避免数据的转义。

我写了一个自定义的 logback 编码器，但我没有办法避免转义。我可以将对象传递给 logback 并根据对象的类型更改设置吗？

编辑：我找到了一种方法 - 不完全优雅 - 按照 SSCE 的要求：

在我的应用程序中

```
// SLF4J Logger
private static Logger logger = LoggerFactory.getLogger(MyClass.class);
// A logback? Marker
private Marker foo = MarkerFactory.getMarker("foo");
// Jackson ObjectMapper()
ObjectMapper mapper = new ObjectMapper();

// Log something... 
logger.info(foo, mapper.writeValueAsString(json)); 
```

我使用了这里找到的 Logstash-Encoder 的变体：[https ://github.com/logstash/logstash-logback-encoder](https://github.com/logstash/logstash-logback-encoder)

```
package my.package;

import static org.apache.commons.io.IOUtils.*;

import java.io.IOException;
import java.util.Map;
import java.util.Map.Entry;

import org.codehaus.jackson.JsonGenerator.Feature;
import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.node.ObjectNode;
import org.slf4j.Marker;

import ch.qos.logback.classic.spi.ILoggingEvent;
import ch.qos.logback.classic.spi.IThrowableProxy;
import ch.qos.logback.classic.spi.ThrowableProxyUtil;
import ch.qos.logback.core.CoreConstants;
import ch.qos.logback.core.encoder.EncoderBase;

public class JsonEncoder extends EncoderBase<ILoggingEvent> {

    private static final ObjectMapper MAPPER = new ObjectMapper().configure(
        Feature.ESCAPE_NON_ASCII, true);
    private static Marker M;

    private boolean immediateFlush = true;

@Override
public void doEncode(ILoggingEvent event) throws IOException {

    M = event.getMarker();

    ObjectNode eventNode = MAPPER.createObjectNode();

    eventNode.put("@timestamp", event.getTimeStamp());
    //
    if (M != null) {
        if (M.getName().equals("foo")) {
            JsonNode j = MAPPER.readTree(event.getFormattedMessage());
            eventNode.put("@foo", j);
        }
    } else {
        eventNode.put("@message", event.getFormattedMessage());
    }
    eventNode.put("@fields", createFields(event));

    write(MAPPER.writeValueAsBytes(eventNode), outputStream);
    write(CoreConstants.LINE_SEPARATOR, outputStream);

    if (immediateFlush) {
        outputStream.flush();
    }

}

private ObjectNode createFields(ILoggingEvent event) {
         // not important here
    return fieldsNode;

}

@Override
public void close() throws IOException {
    write(LINE_SEPARATOR, outputStream);
}

public boolean isImmediateFlush() {
    return immediateFlush;
}

public void setImmediateFlush(boolean immediateFlush) {
    this.immediateFlush = immediateFlush;
}
} 
```

现在可以了！是的！但我想这不是最好的方法（序列化，反序列化 JSON ......）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-07-14T06:18:57.603

如果您有 Json 格式的消息，则上面的解决方案可以工作，但不是很好，因为您不想在每次在代码中使用记录器时调用特定于 logstash 的代码。

只需添加一个

```
net.logstash.logback.encoder.LogstashEncoder 
```

还不够，因为**消息本身仍然是 escaped**。要解决此问题，请在 logback.xml 中尝试以下操作：

```
<encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
     <providers>
        <timestamp/>
        <version/>
        <loggerName/>
        <pattern>
            <pattern>
                {
                "jsonMessage": "#asJson{%message}"
                }
            </pattern>
        </pattern>
    </providers>
</encoder> 
```

#asJson 模式将取消转义您的消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-05T12:30:14.517

使用 RawJsonAppendingMarker：

```
log.trace(net.logstash.logback.marker.Markers.appendRaw("jsonMessage", jsonString), null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-29T14:21:41.400

我遇到了同样的问题。我解决了

```
<encoder
 class="net.logstash.logback.encoder.LogstashEncoder">          
</encoder 
```

代替

```
<encoder
 class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder"> 
```

在我的java代码中，我使用了：

```
SRV_PERF_LOGGER.info(net.logstash.logback.marker.Markers.appendRaw("message", jackson.writeValueAsString(dto)), null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T21:42:58.450

这是一个更新的 (2016) groovy logback 配置，它将 json 格式的日志转储到文件中，并在控制台中调试行。花了我一整天才弄清楚，所以我想我会更新线程。

```
 import ch.qos.logback.classic.encoder.PatternLayoutEncoder
import ch.qos.logback.core.ConsoleAppender
import ch.qos.logback.core.rolling.FixedWindowRollingPolicy
import ch.qos.logback.core.rolling.RollingFileAppender
import ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy
import net.logstash.logback.encoder.LogstashEncoder

import static ch.qos.logback.classic.Level.INFO
import static ch.qos.logback.classic.Level.WARN

def PROJECT_ID = "com.foo"

    appender("file", RollingFileAppender) {
        file = "/tmp/logs/${PROJECT_ID}.json"
        encoder(LogstashEncoder)
        rollingPolicy(FixedWindowRollingPolicy) {
            maxIndex = 1
            fileNamePattern = "logs/${PROJECT_ID}.json.%i"
        }
        triggeringPolicy(SizeBasedTriggeringPolicy) {
            maxFileSize = "1MB"
        }
    }

    appender("STDOUT", ConsoleAppender) {
        encoder(PatternLayoutEncoder) {
            pattern = "%d{HH:mm:ss.SSS} %-5level %logger{36} - %msg%n"
        }
    }

    logger("com.foo", INFO, ["STDOUT", "file"], false)

    root(WARN, ["STDOUT", "file"]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T03:12:37.397

Logback 不会对 JSON 做任何不寻常的事情。它只是一个正常记录的字符串。转义可能发生在您的最后，除非您正在谈论某种以该格式写出的 JSON Appender。我很确定 Logback 本身没有类似的东西，所以如果这是你的问题，你会想看看你从哪里得到 Appender。SSCCE[将](http://sscce.org)有助于进一步排除故障。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-08T14:38:50.890

我自己刚刚过来，发现了一篇[关于日志记录](http://kielczewski.eu/2014/12/few-recommendations-on-logging/)的文章。

如果您使用 maven 将此依赖项放入`pom.xml`

```
<dependency>
    <groupId>net.logstash.logback</groupId>
    <artifactId>logstash-logback-encoder</artifactId>
    <version>3.4</version>
</dependency> 
```

并把这样的东西放入`logback.xml`

```
<configuration>
    <property name="PROJECT_ID" value="example"/>
    <appender name="file" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <File>logs/${PROJECT_ID}.json</File>
        <encoder class="net.logstash.logback.encoder.LogstashEncoder"/>
        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <maxIndex>1</maxIndex>
            <FileNamePattern>logs/${PROJECT_ID}.json.%i</FileNamePattern>
        </rollingPolicy>
        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <MaxFileSize>1MB</MaxFileSize>
        </triggeringPolicy>
    </appender>
    <logger name="eu.kielczewski" additivity="false" level="INFO">
        <appender-ref ref="file"/>
    </logger>
    <root level="WARN">
        <appender-ref ref="file"/>
    </root>
</configuration> 
```

这会`example.json`在`logs/`. 文件大小达到 1MB 时滚动一次。

```
LOGGER.debug(append("object", someObject), "log message"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-17T22:20:05.533

我看不到导致您的问题的原始代码，但我怀疑它可能看起来像这样

```
JsonNode logOutput;
String messageJSONAsString; 
```

...

```
logOutput.put("@message", messageJSONAsString);
logger.info(objectMapper.writeValueAsString(logOutput); 
```

这将在您的输出中生成转义的 JSON，因为当您将消息放入输出 JsonNode 时，Jackson 将为您重新转义它以确保输出是有效的 JSON。

这里的解决方案是将消息作为 ObjectNode 而不是字符串放在输出中。通常您已经可以将对象作为对象访问，在这种情况下您可以这样做

```
ObjectNode jsonObject = objectMapper.valueToTree(messageObject);
logOutput.put("@message", jsonObject) 
```

否则，如果您的消息是 JSON 字符串，则对其进行解析并将其添加到输出中

```
logoutput.put("@message", objectMapper.readTree(messageJSONAsString)); 
```

# django - 从 appname.models 导入出版商、作者、书籍

> ID：15538689
> 
> 赞同：-1
> 
> 时间：2013-03-21T02:59:57.570
> 
> 标签：django, django-models, pythonpath

对 Django 很陌生，所以请多多包涵。跟随使用 Django Book 的类（Publisher、Author、Book）的 Django polls 项目。我一直坚持在 shell 中导入我的模型。

应用名称为General，项目名称为mysite

错误：

```
>>> from General.models import Publisher, Author, Book

Traceback (most recent call last):
File "<pyshell#2>", line 1, in <module>
from General.models import Publisher, Author, Book
ImportError: No module named General.models
>>> 
```

我的文件夹：

```
C:\
BookShelf/
  sqlite3.db
  mysite/
    mysite
    media
    manage.py
    General/
       _init_.py
       _init_.pyc
       models.py
       models.pyc
       tests.py
       views.py 
```

如果这有帮助：

```
>>> import sys
>>> print sys.path
['', 'C:\\Python27\\Lib\\idlelib', 'C:\\Python27\\Lib', 'C:\\Python27\\DLLs', 'C
:\\Python27\\Lib\\lib-tk', 'C:\\BookShelf\\mysite\\General\\models.py', 'C:\\WIN
DOWS\\system32\\python27.zip', 'C:\\Python27\\"C:\\BookShelf\\mysite\\General\\m
odels.py"', 'C:\\Python27\\lib\\plat-win', 'C:\\Python27', 'C:\\Python27\\lib\\s
ite-packages', 'C:\\Python27\\lib\\site-packages\\PIL']  
>>> 
```

我也尝试过“来自 mysite.General.models”，但也没有成功。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:24:05.297

`C:\BookShelf\mysite`应该在你的`PYTHONPATH`. 尝试以下 -

```
cd C:\BookShelf\mysite
python manage.py shell
from General.models import Publisher, Author, Book 
```

您应该始终使用`python manage.py shell`为 django 项目打开 python shell。`manage.py`将您的项目包放在`sys.path`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:06:49.203

您的`_init_.py`文件应命名`__init__.py`- 每边两个下划线。

请注意，调用您的应用程序可能不是一个好习惯`General`- 您应该使用所有小写的包名称。

# python - HOWTO pyJasper Windows 快速入门

> ID：15538692
> 
> 赞同：0
> 
> 时间：2013-03-21T03:00:28.210
> 
> 标签：python, report

尝试在 Windows-7 上设置 pyJasper。我只想从本地主机访问。在 pyJasper 上找不到太多文档，您可以找到适用于 linux 的文档。（特别是 pyJasper-httpd.sh）。

我已经下载了 https://github.com/hudora/pyJasper'>pyJasper 和 Jasper 报告库（不确定是否需要这些，我认为 pyJasper 可能已经拥有它需要的东西）。

我需要从哪里直接从python获取pdf？需要采取哪些步骤？

# android - 无法让 Eclipse 在 Galaxy Note 2 上构建和运行应用程序

> ID：15538693
> 
> 赞同：2
> 
> 时间：2013-03-21T03:00:37.657
> 
> 标签：android, eclipse

我已经按照[http://developer.android.com/training/basics/firstapp/running-app.html](http://developer.android.com/training/basics/firstapp/running-app.html)上的所有说明制作了一个“hello world”应用程序，但是尽管我尝试了一切，但我的设备上什么也没发生.

我已经安装了 Samsung Kies 的价值，并且操作系统检测到我的手机进行文件传输......但是当我在 Eclipse 中“运行为 - Android 应用程序”时，什么也没有发生。

我的手机开启了 USB 调试。

![在此处输入图像描述](../Images/659309410ca65a85e118138ea8828133.png)

* * *

编辑（2013 年 6 月 7 日）：

我已经删除了 Eclipse 和 android SDK 的旧安装，并从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了包。当我尝试作为 Android 应用程序运行时，仍然不会发生任何事情。

我已经运行`adb devices`并得到以下输出，所以我猜我的手机被检测到：

```
List of devices attached
42f78b1517259fe5        device 
```

我设法找到一种将设备添加到 Eclipse 的方法，因为 Galaxy Note 2 不在下拉框中……但这似乎除了更改活动编辑器中的预览图像之外没有任何作用。

我不确定我是否做对了，但这里是建议的 logcat -d 转储

[http://pastebin.com/fmrPn3UU](http://pastebin.com/fmrPn3UU)

我的手机正在运行 4.1.2。我不知道还能尝试什么，而且我似乎无法在网上找到其他任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T23:58:19.123

尝试强制 Eclipse 提示您选择设备。看看它是否仍然什么都不做，或者它是否真的在运行。

要让 Eclipse 提示您：

*   打开**运行菜单**>**运行配置**
*   在新窗口中，在**Android 应用程序下**
    *   如果有配置，删除配置
    *   通过双击**Android 应用程序**或单击*新建*按钮来创建新配置。
*   在**Android**选项卡 下
    *   *在项目*框中选择您的 Android 应用项目
    *   *启动操作*应该是**启动默认活动**

![在此处输入图像描述](../Images/70b5ce6b1cb9bc845ddfda4803015263.png)

*   接下来，打开**目标**选项卡
*   选择**始终提示选择设备**
*   单击**应用**
*   点击**关闭**

![在此处输入图像描述](../Images/34eba09ba106d504657cdf3c7f9cb332.png)

现在下次运行应用程序时，它会要求您在手机或模拟器中启动应用程序。

如果您想在 eclipse 会话期间使用相同的设备，或者在您拔掉手机之前，请选中**Use same device for future launch**框。

这还有一个额外的好处，就是允许您选择不同的 AVD 版本，以便更轻松地在不同的设备或模拟器上测试您的应用程序。

**从评论更新**

在完全必要时强制停止您的应用程序

*   转到Eclipse 中的**DDMS透视图**
    *   **Window** > **Open Perspective** > **DDMS**（它没有列出，点击**Other...**）
*   单击您的进程，例如**com.example.testapp**
*   单击**停止**按钮（红色停止标志）

![在此处输入图像描述](../Images/4fe93ccca47c9e8ef155b8b2cb8bbe93.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:04:06.677

我认为你的问题是

问：“我是否应该能够在物理手机上运行和调试我的 Android 应用程序，而不仅仅是模拟器？”

答：是的，绝对的。包括你的 Galaxy Note 2

看这里：

*   [http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

这基本上完全一样，只是它专门为 Galaxy Note 提供了详细信息：

*   [http://www.technipages.com/samsung-galaxy-note2-how-to-enable-usb-debugging.html](http://www.technipages.com/samsung-galaxy-note2-how-to-enable-usb-debugging.html)

底线：

您应该能够使用/同时使用模拟器和/或物理手机进行调试，所有这些都来自您的 Eclipse IDE。

'希望有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T23:58:55.007

尝试使用来自 XDA 的[Galaxy Note 2 工具包](http://forum.xda-developers.com/showthread.php?t=1923956)并以这种方式安装驱动程序，然后在 Eclipse 中手动设置您的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T16:39:34.120

尝试查看 Android 项目中的 AndroidManifest.xml 文件。我相信您的注释 2 运行的是 Android 4.1.2（修订版 16）。

如果您的 Hello World 应用程序的最低 SDK 版本要求设置为 17 或更高，则您的设备将无法在可用设备上识别。将uses-sdk标签中的android:minSdkVersion属性改为android:minSdkVersion="16"，就会显示出来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T16:28:49.867

在浮动菜单的“USB PC 连接”中有两个选项。在我的牢房中被标记为“媒体设备”，我切换到“相机”并开始工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-18T04:26:53.920

我遇到了同样的问题。我正在使用 MAC。我先下载了 Eclipse(Java Standard 4.4)，然后手动从 eclipse 安装了 ADT。我的代码有效，它只能在模拟器中运行。它找不到 Note2。我安装了 Android Studio，它适用于我的 Note2。尝试了很多方法，但我的 Eclipse 找不到我的 Note2。所以我直接从 android.com 下载了 Android ADT，它适用于我的 Note2。由于我们可以在一台计算机上拥有两个 Eclipse，因此您可以像我一样保留两个 Eclipse。一种用于 PHP，一种用于 Android。如果您有同样的问题，请尝试一下。

# java - Java - ascii 绘图逻辑

> ID：15538694
> 
> 赞同：0
> 
> 时间：2013-03-21T03:01:00.340
> 
> 标签：java, drawing, ascii

我正在使用 for 循环在 java 中“绘制”太空针塔。我已将其绘制为“比例 4”，但现在我正在尝试实现，以便用户可以输入他们想要的比例（> 2）。当我试图打印“飞碟”的底部时，我的问题就出现了。塔上的其他所有东西都打印得很整齐，但我正在努力寻找一种可以按比例打印的算法。

我确实有“逆方程式”，在我的程序中是

```
((row*2)-2) + scale 
```

比例是用户选择的数字（> 2）

这将为我提供 4 级以下内容：

```
 ||
            ||
            ||
            ||
         __/||\__
      __/:::||:::\__
   __/::::::||::::::\__
__/:::::::::||:::::::::\__
|""""""""""""""""""""""""|
\_/\/\/\/\/\_/
 \_/\/\/\/\/\/\/\_/
   \_/\/\/\/\/\/\/\/\/\_/
     \_/\/\/\/\/\/\/\/\/\/\/\_/
            ||
            ||
            ||
            ||
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         |%%||%%|
         __/||\__
      __/:::||:::\__
   __/::::::||::::::\__
__/:::::::::||:::::::::\__
|""""""""""""""""""""""""| 
```

我正在努力解决的符号/模式是“ \/ ”。如您所见，我有以下数量的“ \/ ”：

1号线：4号线

2号线：6

3号线：​​8

4号线：10

以下将给我一个完整的太空针：

1号线：10

2号线：8

3号线：​​6

4号线：5

也许我遗漏了一些非常基本的东西，但我很想知道是否有某种逻辑可以用来修复它或一个简单的语句。

请告诉我您是否希望我发布整个代码

提前致谢。

最后结果：

```
 ||
                        ||
                        ||
                        ||
                        ||
                        ||
                        ||
                        ||
                     __/||\__
                  __/:::||:::\__
               __/::::::||::::::\__
            __/:::::::::||:::::::::\__
         __/::::::::::::||::::::::::::\__
      __/:::::::::::::::||:::::::::::::::\__
   __/::::::::::::::::::||::::::::::::::::::\__
__/:::::::::::::::::::::||:::::::::::::::::::::\__
|""""""""""""""""""""""""""""""""""""""""""""""""|
\_/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\_/
  \_/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\_/
    \_/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\_/
      \_/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\_/
        \_/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\_/
         \_/\/\/\/\/\/\/\/\/\/\/\/\/\_/
            \_/\/\/\/\/\/\/\/\/\/\/\_/
              \_/\/\/\/\/\/\/\/\/\_/
                        ||
                        ||
                        ||
                        ||
                        ||
                        ||
                        ||
                        ||
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     |%%||%%|
                     __/||\__
                  __/:::||:::\__
               __/::::::||::::::\__
            __/:::::::::||:::::::::\__
         __/::::::::::::||::::::::::::\__
      __/:::::::::::::::||:::::::::::::::\__
   __/::::::::::::::::::||::::::::::::::::::\__
__/:::::::::::::::::::::||:::::::::::::::::::::\__
|""""""""""""""""""""""""""""""""""""""""""""""""| 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:12:33.987

Karthink T 为我指明了正确的方向，我将公式更改为

```
((scale - row)*2) + scale 
```

它有效！

# wpf - 带有模板的 WPF ListBox 项目在分组后变得不可见

> ID：15538695
> 
> 赞同：0
> 
> 时间：2013-03-21T03:01:05.180
> 
> 标签：wpf, templates, listbox, grouping, expander

我有`ObservableCollection`想要在`ListBox`. 我还写了一个模板来`ListboxItem`正确显示我的收藏。在这个阶段一切正常。

***在.cs***

```
Sensors = new ObservableCollection<Sensor>();
...
lstBox.ItemsSource = Sensors; 
```

***在 .xaml 中***

```
...
 <DataTemplate x:Key="SensorTileTemplate">
            <Border>
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="{Binding Name}" Grid.Row="0" Grid.ColumnSpan="3"></TextBlock>
                    <Image Source="{Binding ImageModel.ImgSource}" Style="{StaticResource ImageGlowStyle}" Height="72" Grid.Row="1" Grid.Column="0"></Image>
                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="5">
                        <TextBlock Text="IP:"></TextBlock>
                        <TextBlock Text="Port:"></TextBlock>
                        <TextBlock Text="Command port:"></TextBlock>
                    </StackPanel>
                    <StackPanel Grid.Row="1" Grid.Column="2" Margin="5">
                        <TextBlock Text="{Binding DeviceAddress}"></TextBlock>
                        <TextBlock Text="{Binding DeviceDataPort}"></TextBlock>
                        <TextBlock Text="{Binding DeviceControlPort}"></TextBlock>
                    </StackPanel>
                </Grid>
            </Border>
        </DataTemplate>

<Style x:Key="ContainerStyle">
            <Style.Triggers>
                <DataTrigger Binding="{Binding IsSelected}" Value="True">
                    <Setter Property="ListBoxItem.Visibility" Value="Collapsed"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

...

<ListBox Name="lstBox" Focusable="False" 
                             SelectionChanged="lstBox_SelectionChanged" 
                             HorizontalContentAlignment="Stretch" 
                             ItemTemplate="{StaticResource SensorTileTemplate}"
                             ItemContainerStyle="{StaticResource ContainerStyle}">
                </ListBox> 
```

**当我需要使用扩展器作为组容器对某些项目进行分组时，就会出现问题。**

***在.cs***

```
...
ICollectionView view = CollectionViewSource.GetDefaultView(Sensors);
view.GroupDescriptions.Add(new PropertyGroupDescription("GroupNumber"));

lstBox.ItemsSource = view;
... 
```

***在 .xaml 中***

```
<!--Same Template and Style-->
...
...
<Style x:Key="GroupContainerStyle" TargetType="{x:Type GroupItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type GroupItem}">
                        <Expander IsExpanded="True">        
                            <Expander.Header>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Group #" />
                                    <TextBlock Text="{Binding Name}" />
                                </StackPanel>
                            </Expander.Header>
                            <Expander.Content>
                                <ItemsPresenter />
                            </Expander.Content>
                        </Expander>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
...
<ListBox Name="lstBox" Focusable="False" 
                             SelectionChanged="lstBox_SelectionChanged" 
                             HorizontalContentAlignment="Stretch" 
                             ItemTemplate="{StaticResource SensorTileTemplate}"
                             ItemContainerStyle="{StaticResource ContainerStyle}">
                    <ListBox.GroupStyle>
                        <GroupStyle ContainerStyle="{StaticResource GroupContainerStyle}" />
                    </ListBox.GroupStyle>
                </ListBox> 
```

此代码有效并对项目进行分组，但项目变得不可见。
因此，如果没有正确显示分组项目，但使用分组扩展器则不会显示任何内容。
我认为里面有一些东西`ItemsPresenter`，`Expander`但不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:19:10.353

问题出在我在我的应用程序中使用的一个第三方主题中。该主题有一个`ListBox`模板，如：

```
<Style TargetType="{x:Type ListBox}">
...
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ListBox}">
                    <Grid>
                        <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="2" Background="{DynamicResource ControlBackgroundBrush}" />
                        <ScrollViewer Margin="1" Style="{DynamicResource NuclearScrollViewer}" Focusable="false" Background="{x:Null}">
                            <StackPanel Margin="1,1,1,1" IsItemsHost="true" />
                        </ScrollViewer>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Background" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="Border" />
                            <Setter Property="BorderBrush" Value="{DynamicResource DisabledBorderBrush}" TargetName="Border" />
                        </Trigger>
                        <Trigger Property="IsGrouping" Value="true">
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

因此，我在该模板中使用 an`ItemsPresenter`而不是 the `StackPanel`，现在一切正常。

# php - 可以向我解释这个块代码 PHP XML DOMDocument 语法

> ID：15538698
> 
> 赞同：1
> 
> 时间：2013-03-21T03:01:25.153
> 
> 标签：php, xml, dom, loops, foreach

我目前正在学习使用 php DOMDocument 对象遍历 xml 文档标签的不同方法，我了解`foreach`遍历标签的循环，但是 `$element->item(0)->childNodes->item(0)->nodeValue`我有点不清楚，有人可以向我详细解释一下吗？谢谢你。

```
<?php
    $xmlDoc = new DOMDocument();
    $xmlDoc->load('StudentData.xml');

    $studentRoot = $xmlDoc->getElementsByTagName('Student');
    for ($i = 0; $i < ($studentRoot->length); $i++) {
        $firstNameTags = $studentRoot->item($i)->getElementsByTagName('FirstName');
        echo $firstNameTags->item(0)->childNodes->item(0)->nodeValue.' <br />';
    }

    /* so much easier and clear to understand! */
    foreach($studentRoot as $node) {

        /* For every <student> Tag as a separate node, 
           step into it's child node, and for each child,
           echo the text content inside */  

        foreach($node->childNodes as $child) {
            echo $child->textContent.'<br />';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:08:59.813

```
$elements->item(0)->childNodes->item(0)->nodeValue 
```

第一的：

```
$elements 
```

当前元素^(^(**$**))被解析和引用。在代码示例中，这将是：

```
$firstNameTags = $studentRoot->item($i)->getElementsByTagName('FirstName');
$firstNameTags->... 
```

下一个：

```
->item(0) 
```

获取[对节点列表中第一](http://www.php.net/manual/en/domnodelist.item.php)`$elements` [*项*](http://www.php.net/manual/en/domnodelist.item.php)的引用。由于这是零索引，因此将通过*index获取**列表*中`->item(0)`的第一个*节点*。

 **```
->childNodes 
```

获取上面引用的第一个节点的[子节点](http://www.php.net/manual/en/class.domnode.php#domnode.props.childnodes)列表。由于没有，这是的（只读）*属性*。`$elements``->item(0)``()`*`DOMNodeList`*

 *```
->item(0) 
```

*同样，通过index*获取子节点列表中的第一个节点。

```
->nodeValue 
```

[节点](http://www.php.net/manual/en/class.domnode.php#domnode.props.nodevalue)本身的值。

* * *

如果单用状态的形式：

```
$obj->method()->method()->prop 
```

让您感到困惑，请查看[方法链接](https://stackoverflow.com/questions/3724112/php-method-chaining)，这就是将所有这些方法调用放在一起的方法。

* * *

[^(**$**)注意，你省略了`s`，但这表明*按照惯例*有一个或多个可能。所以`$element`将是*零或一个*元素引用，`$elements`可能是零，一个或多个`$element`.]***

# php - 检查 PHP 数组中的重复条目

> ID：15538707
> 
> 赞同：0
> 
> 时间：2013-03-21T03:02:04.107
> 
> 标签：php, arrays

如果我键入这样的内容，是否有任何工具可以运行 PHP 代码？

```
$myarray = array(
    'foo' => 'hello',
    'bar' => 'goodbye',
    'foo' => 'hello again' // <= need to pick up the duplicate key on this line
); 
```

编辑：我想要这样的东西[，](https://stackoverflow.com/a/13837890/1318194)除了不是专有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:13:41.083

您正在覆盖您的数组键，因此 PHP 只会拾取键 'foo' 的最后一个条目

```
$arr = array(
    'foo' => 'hello',
    'bar' => 'goodbye',
    'foo' => 'hello again' // <= need to pick up the duplicate key on this line
);

print_r($arr); 
```

返回：

> 数组（ [foo] => 再次打招呼 [bar] => 再见）

但：

```
$arr = array(
    'foo' => 'hello',
    'bar' => 'goodbye',
    'foo3' => 'hello again' // <= need to pick up the duplicate key on this line
);

print_r($arr); 
```

返回：

> 数组（[foo] => hello [bar] => goodbye [foo3] => hello again）

甚至在 foreach 循环内（单步执行您的数组）

```
$arr = array(
    'foo' => 'hello',
    'bar' => 'goodbye',
    'foo' => 'hello again' // <= need to pick up the duplicate key on this line
);

foreach ($arr AS $Keys => $Value)
{
    echo $Keys;
    echo "<br>";
} 
```

返回：

```
bar
foo 
```

整体道德：

您的数组键正在被覆盖，因此 PHP 不会识别出重复的键。

# css - 回溯图像重叠导航

> ID：15538710
> 
> 赞同：-5
> 
> 时间：2013-03-21T03:02:40.347
> 
> 标签：css, image

如何让导航出现在向后拉伸的图像前面？一旦它加载它就会出现在导航上，此时几乎变得不可点击/看不见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:13:29.470

您需要将图像移动到页面内容的其余部分后面。

```
#backstretch {
    z-index: -1;
} 
```

在你的 CSS 中应该可以解决问题。

# c - 如何更改传递给函数的结构的值

> ID：15538711
> 
> 赞同：3
> 
> 时间：2013-03-21T03:02:46.450
> 
> 标签：c

嗨，朋友们，我正在练习结构。我有这两个函数，一个返回结构，然后将其复制到 main 中的本地结构。我的第二个函数通过输入不同的实体来更改那些本地结构成员。现在我在调用每个函数后打印了结果，令我惊讶的是，我注意到两个函数之后的打印结果是相同的。我无法理解这里发生了什么……你们能解释一下吗……谢谢！

```
 #include <stdio.h>
 #include <stdlib.h>

 struct student{
        char name[30];
        float marks;
        };

 struct student read_student();
 void read_student_p(struct student student3);
 void print_student(struct student student2);

 int main()
 {
     struct student student1;
     student1 = read_student();
     print_student(student1);
     read_student_p(student1);
     print_student(student1);
     system("pause");
     return 0;
 }

 //This is my first function
 struct student read_student()
 {
      struct student student2;
      printf("enter student name for first function: \n");
      scanf("%s",&student2.name);

      printf("enter student marks for first function:\n");
      scanf("%f",&student2.marks);

      return student2;
 }

//function to print 
void print_student(struct student my_student)
{
    printf("Student name in first function is : %s\n",my_student.name);
    printf("Student marks in first function are: %f\n",my_student.marks);
};

 //My second function  
 void read_student_p(struct student student3)
 {    
      printf("enter student name for second function: \n");
      scanf("%s",&student3.name);
      printf("enter student marks for second function: \n");
      scanf("%f",&student3.marks);
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T03:06:43.997

你的意思是写

```
void read_student_p(struct student* student3)
                                  ^
{    

read_student_p(&student1);
               ^ 
```

`read_student_p`如果要修改要传递的，则需要传递一个指针`struct`。目前它是按值传递的，并且修改会丢失。

考虑到`_p`后缀，我希望这是有意的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:06:50.343

当你这样做时：

`read_student_p(student1);`

该方法如下所示：

```
void read_student_p(struct student student3)
{    

  printf("enter student name for second function: \n");
  scanf("%s",&student3.name);
  printf("enter student marks for second function: \n");
  scanf("%f",&student3.marks);

 } 
```

C 中的结构是按值传递的，而不是按引用传递的。

所以 read_student_p 所做的是获取你传入的结构的副本（student1），编辑副本，然后什么都不做。

一种解决方案是返回结构的更改版本。另一个版本是将指针传递给结构，并通过指针编辑结构（以便您直接编辑结构的同一副本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:08:06.617

在`read_student_p`你按值调用的第二个函数中，也就是说，你`tmp`在函数中定义了一个新的结构变量，并将值复制`student1`到这个 tmp 值。您所做的所有修改都在 tmp 值上，这不会影响`student1`.

# mysql - BIT 会填充 1 个字节后的未使用空间吗？

> ID：15538713
> 
> 赞同：0
> 
> 时间：2013-03-21T03:03:00.227
> 
> 标签：mysql, bit, diskspace, variable-length, space-efficiency

我的表可能会有非常大的行长度。如果我没看错，`BIGINT`值为 的 a`1`将占用全部 8 个字节。 [http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)

这似乎非常低效。

行为是否`BIT`相同，还是可变长度混合？我知道使用少于 1 个完整字节仍会消耗 1 个字节的磁盘空间，除非有其他`BIT`s，例如，`BIT 1`如果我正确阅读，8 列将只占用 1 个字节。

换句话说，如果我`BIT 41`没有其他`BIT`列，`0`那么该列的行会消耗 1 个字节还是完整的 6 个字节，而不是 2^41-1，它当然会占用完整的 41 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:10:23.757

[根据 docs](http://dev.mysql.com/doc/refman/5.5/en/bit-type.html)，看起来你运气不好：有点总是你指定的大小。事实上，[它很可能会更大。](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)您可以考虑将您的位序列化为 BLOB 字段，因为它们*是*可变长度的。

# c# - 即使没有错误，如何在 Page_load 中使所需的验证器或其他验证器被触发错误？

> ID：15538715
> 
> 赞同：1
> 
> 时间：2013-03-21T03:03:10.970
> 
> 标签：c#, javascript, asp.net

即使没有错误，如何在 Page_load 中使所需的验证器或其他验证器被触发错误？

在将滚动条设置为（0,0）失败并设置链接的焦点失败后，我想到了在页面顶部制作 requiredvalidator 的想法，然后希望即使没有错误也能触发错误。

目标是页面顶部的焦点，而不是 iframe 中的页面末尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:16:38.083

在 asp.net 中，在 div 中设置“overflow”属性包含 iframe，如“overflow:auto”，滚动条默认位于顶部。我觉得是财产问题。

# java - JAVA for Android：不当使用“this”构造函数导致外部类方法调用出现问题

> ID：15538716
> 
> 赞同：0
> 
> 时间：2013-03-21T03:03:23.450
> 
> 标签：java, android

这是我的 MainActivity.java 文件。我用：

```
 io login_io = new io(this); 
```

调用我的 io.java 类文件。

第二个声明我应该使用什么而不是“this”？（在代码中注释掉）

```
 package com.myschedules;

 //FILE I/O
 import java.io.IOException;
 import java.io.InputStream;
 import java.net.MalformedURLException;
 import java.net.URL;
 import java.net.URLConnection;

 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;
 import javax.xml.parsers.ParserConfigurationException;

 import org.w3c.dom.Document;
 import org.xml.sax.SAXException;

 import android.app.Activity;
 import android.content.Context;
 import android.content.Intent;
 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.CheckBox;
 import android.widget.EditText;
 import android.widget.ProgressBar;
 import android.widget.Toast;

 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    toast("asdf");

            //Works fine
    io login_io = new io(this);

    //get the controls we created in activity_main.xml, also with the resource reference and the id
    final EditText txt_username = (EditText)findViewById(R.id.txt_username);
    final EditText txt_password = (EditText)findViewById(R.id.txt_password);
    final Button cmd_login = (Button)findViewById(R.id.cmd_login);
    final ProgressBar pb_login = (ProgressBar)findViewById(R.id.pb_login);
    final CheckBox chk_rememberme = (CheckBox)findViewById(R.id.chk_rememberme);
    final CheckBox chk_loginautomatically = (CheckBox)findViewById(R.id.chk_loginautomatically);

    //Load LOG IN PREFERENCES
    final String login_preferences = login_io.load("login_preferences.dat");
    final String username = login_io.load("username.dat");
    final String password = login_io.load("password.dat");

        if (login_preferences.charAt(0) == '1'){    //REMEMBER ME

            chk_rememberme.setChecked(true);    //set CHECK BOX
            txt_username.setText(username);     //set USER NAME
            txt_password.setText(password);     //set PASSWORD
        }

        if (login_preferences.charAt(1) == '1'){    //LOG ME IN AUTOMATICALLY
            chk_loginautomatically.setChecked(true);

            //COPY the OnClick function operations here
            pb_login.setVisibility(1);  //PROGRESS BAR set to VISIBLE
            cmd_login.setText("Logging in..."); //CHANGE the LOG IN BUTTON text to display logging in status
           // cmd_login.setEnabled(false);  //DISABLE the LOG IN BUTTON from being able to be clicked
        }

    //add new KeyListener Callback (to record key input)
    cmd_login.setOnClickListener(new OnClickListener()
    {
                    //ERROR HERE! (due to 'this', i think?)
        io login_io = new io(this);

        public void onClick(View v) 
        {

            String login_preferences = login_io.load("login_preferences.dat");
            final int id = v.getId();
            switch (id) 
                {

                //if LOG IN BUTTON is clicked
                case R.id.cmd_login:

                    pb_login.setVisibility(1);  //PROGRESS BAR set to VISIBLE
                    cmd_login.setText("Logging in..."); //CHANGE the LOG IN BUTTON text to display logging in status
                    cmd_login.setEnabled(false);    //DISABLE the LOG IN BUTTON from being able to be clicked

                    //REMEMBER ME PREFERENCES
                    if(chk_rememberme.isChecked()){
                        login_preferences = "1";    //set CHK_REMEMBERME to TRUE

                        //if REMEMBER ME is checked, save USERNAME and PASSWORD
                        String user_name = txt_username.getText().toString();   //USER NAME
                        login_io.save("username.dat",user_name);    //save USERNAME

                        String password = txt_password.getText().toString();    //PASSWORD
                        login_io.save ("password.dat",password);    //save PASSWORD

                    }else{
                        //otherwise do not store a USERNAME or PASSWORD
                        login_preferences = "0";    //set CHK_REMEMBERME to FALSE
                        login_io.save ("username.dat","");  //reset USERNAME
                        login_io.save ("password.dat","");  //reset PASSWORD
                    }

                    // LOG IN AUTOMATICALLY PREFERENCES
                    if(chk_loginautomatically.isChecked()){
                        login_preferences = login_preferences + "1";    //set to TRUE
                    }else{
                        login_preferences = login_preferences + "0";    //set to FALSE
                    }

                    login_io.save("login_preferences.dat",login_preferences);   //save LOG IN AUTOMATICALLY PREFERENCES

                    Intent test = new Intent(MainActivity.this, Calendar.class);
                    startActivity(test);      

                    break;

                }
        }
    });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:05:49.893

您需要传入一个 context ，这是您在第一种情况下所做的。

[http://developer.android.com/reference/android/content/Context.html](http://developer.android.com/reference/android/content/Context.html)

有关如何将上下文传递给 onclick 的示例 在 [onClick(DialogInterface v, int buttonId) 中获取上下文？](https://stackoverflow.com/questions/5447092/get-context-inside-onclickdialoginterface-v-int-buttonid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:05:24.043

尝试给予`MainActivity.this`而不是仅仅给予`this`。在第一种情况下，声明在`Activity`类中，因此，`this`它是一个属性[`Context`](http://developer.android.com/reference/android/content/Context.html)。但在第二种情况下，您需要显式指定[`Context`](http://developer.android.com/reference/android/content/Context.html)，这可以通过给 来实现`MainActivity.this`。

此外，如果您更改此变量的名称以获得更好的可读性，那就太好了。

# ms-access - 是否可以修改 Access 加密后端的结构？

> ID：15538719
> 
> 赞同：1
> 
> 时间：2013-03-21T03:03:38.090
> 
> 标签：ms-access, vba

我有一个拆分数据库。尝试使用前端，我能够使用 VBA 将字段添加到链接后端的表中，直到我使用密码加密后端。

是否仍然可以在前端使用 VBA 向后端表中添加字段，而无需手动解密后端？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:18:11.383

它应该是。试试这些笔记：

```
Sub AlterDB()
    Dim db As DAO.Database
    Dim sDB As String
    Dim tdf As TableDef
    Dim fld As Field

    ''Encrypted
    sDB = "Z:\Docs\Test.enc"

    ''http://msdn.microsoft.com/en-us/library/office/ff193474.aspx
    ''Password is case sensitive
    Set db = OpenDatabase(sDB, False, False, "MS Access;PWD=pW")

    ''Option with tabledef
    ''The table is currently closed
    Set tdf = db.TableDefs("table1")
    Set fld = tdf.CreateField("NewField", dbText, 20)
    tdf.Fields.Append fld

    ''Option with DDL
    ssql = "ALTER TABLE table1 ADD COLUMN AnotherNew Int"
    db.Execute ssql, dbFailOnError

End Sub

Sub ListFields()
    sDB = "Z:\Docs\Test.enc"
    Set db = OpenDatabase(sDB, False, False, "MS Access;PWD=FB")

    Set tdf = db.TableDefs("table1")
    For Each f In tdf.Fields
        Debug.Print f.Name
    Next

End Sub 
```

# android - 当 TextView 处于另一个布局中时，我如何 setText() (TextView)？

> ID：15538721
> 
> 赞同：0
> 
> 时间：2013-03-21T03:03:53.813
> 
> 标签：android, android-layout

我的应用程序有 2 个布局（主布局）和（首选项（首选项）布局）。

当 MainActivity 加载时，我设置 setContentView(R.layout.main); - 主要布局

然后我需要在首选项布局中为 TextView 设置文本，但它永远不会被设置。

```
LayoutInflater factory = getLayoutInflater();
 View inflate = factory.inflate(R.layout.prefs, null);
    TextView eSerial = (TextView) inflate.findViewById(R.id.editTextSerial);
    mSerial = "Test"; 
    eSerial.setText(mSerial); 
```

我进入首选项页面的方式是使用菜单，然后页面加载而不更改 TextView

我已经搜索并没有找到答案。

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:07:38.973

简短的回答：你不能这样做。

长答案：

如果您自己启动首选项页面，则必须创建一个 Intent 来执行此操作。调用 putExtra() 将您的文本存储在该意图中。在您的 PreferenceActivity 中，调用 getIntent().getStringExtra() 以获取文本，然后将其放入您的 TextView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:48:16.743

当菜单启动您的首选项活动时，您可以使用值填充视图。user1853479 指出了这样做的一种方法，即将值添加到意图中。假设您要存储这些首选项以供将来运行，您还可以为该特定运行设置任何首选项并将它们保存在本地存储中。另一种方法是创建一个单例来存储您的设置，在您的应用程序启动时加载它，根据需要进行修改和保存，并从您的任何活动中访问它。

# http - nginx HttpLimitReqModule 是否支持每小时/每天/每周？

> ID：15538728
> 
> 赞同：14
> 
> 时间：2013-03-21T03:04:20.507
> 
> 标签：http, nginx, server, rate-limiting

我寻求对 HTTP API 进行速率限制的解决方案，对于 Nginx，已经有一个模块[HttpLimitReqModule](http://wiki.nginx.org/HttpLimitReqModule)支持此功能。但是参考文档，这个模块只支持每秒和每分钟。每小时/每天的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T19:48:38.883

我不知道 nginx 中有一个功能可以做到这一点。但是，您可以使用 auth_request 模块将所有传入流量交给上游 Web 服务，该服务检查流量并应用速率限制规则。

```
location / {
    auth_request /ratelimiter;

    ..
    Normal configuration settings
}

location /ratelimiter {
    proxy_pass http://internalratelimitinghost;
    # return a HTTP 200 to allow the request
    # return anything else to deny it
} 
```

[nginx auth_request](http://nginx.org/en/docs/http/ngx_http_auth_request_module.html)。默认情况下不包含该模块，因此您需要编译它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-07T11:56:54.557

在某些时候，我需要相同的函数来定义每小时、每天、每周等的速率限制。

我很想先构建一个克隆`ngx_http_limit_req_module`，然后将必要的更改集成到[nginx-mod](https://www.getpagespeed.com/nginx-mod-a-better-faster-nginx-build)。

所以这适用于 nginx-mod：

```
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/h; # 1 request per hour
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/d; # 1 request per day
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/w; # 1 request per week
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/M; # 1 request per month
limit_req_zone $binary_remote_addr zone=one:10m rate=1r/Y; # 1 request per year 
```

# matlab - 逐帧读取和显示视频文件

> ID：15538730
> 
> 赞同：5
> 
> 时间：2013-03-21T03:04:27.130
> 
> 标签：matlab, video

我刚开始使用 Matlab。我想读取视频文件并每帧进行一些计算并显示每一帧。我编写了以下代码，但每次它只显示第一帧。有人可以帮忙吗？

```
mov=VideoReader('c:\vid\Akiyo.mp4');
nFrames=mov.NumberOfFrames;
for i=1:nFrames
  videoFrame=read(mov,i);
  imshow(videoFrame);

end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T03:31:28.547

> 注意：`mmreader`API 已被 MATLAB 停用，因此更喜欢使用`VideoReader`.

请参阅@Vivek 的评论。

我通常这样做：

```
obj=mmreader('c:\vid\Akiyo.mp4');
nFrames=obj.NumberOfFrames;
for k=1:nFrames
    img=read(obj,k);
    figure(1),imshow(img,[]);
end 
```

就您的代码而言，我看到了 MATLAB 的文档。您应该按以下顺序进行操作：

```
mov=VideoReader('c:\vid\Akiyo.mp4');
vidFrames=read(mov);
nFrames=mov.NumberOfFrames;
for i=1:nFrames
   imshow(vidFrames(:,:,i),[]);  %frames are grayscale
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-14T00:46:37.853

函数 read() 和字段 NumberOfFrames() 现在已弃用，Matlab 建议使用

```
xyloObj = VideoReader(file);
vidHeight = xyloObj.Height;
vidWidth = xyloObj.Width;
mov = struct('cdata',zeros(vidHeight, vidWidth, 3,'uint8'), 'colormap',[]);

while hasFrame(xyloObj)
    mov(k).cdata = readFrame(xyloObj,'native');     
end 
```

如果您想估计视频中的帧数，请使用`nFrames = floor(xyloObj.Duration) * floor(xyloObj.FrameRate);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T05:43:55.157

下面建议的代码只显示一帧

```
imshow(vidFrames(:,:,i),[]); 
```

我正在做以下事情来存储每一帧

```
obj = VideoReader('path/to/video/file');

for img = 1:obj.NumberOfFrames;
    filename = strcat('frame',num2str(img),'.jpg');
    b = read(obj,img);
    imwrite(b,filename);
end 
```

这会将所有帧存储在您的主目录中。是的，正如 Vivek 和 Parag 所建议的那样

> 您需要使用 VideoReader，因为 MATLAB 已停止使用 mmreader。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-02T04:32:17.080

*=我正在制作一个函数来播放任何 .avi 文件作为图中的一组帧。这是 a 所做的。你所做的一些组合，除了我的 NumberOfFrames 没有工作：（注意这也显示它的颜色）

```
function play_video(filename)
% play_video  Play a video file
% play_video(filename) plays the video file specified by filename in a MATLAB Figure window.

figure
set(figure, 'Visible', 'on')
mov=VideoReader(filename);
vidFrames=read(mov);
duration = mov.Duration;
frame_rate = mov.FrameRate;
total_frames = duration .* frame_rate

for i=1:1:total_frames
   imshow(vidFrames(:, :, :, i), []);
   drawnow
end 
```

# c++ - 带有寻路算法的堆栈溢出

> ID：15538731
> 
> 赞同：0
> 
> 时间：2013-03-21T03:04:39.133
> 
> 标签：c++, algorithm, stack-overflow, path-finding

我一直在研究一个项目，简而言之，它将生成一个二维数字矩阵，其中“空”空间由 0 表示。每个数字都由一个节点列表连接。节点包含数字值、数字的 X 和 Y 位置，以及与其相邻的所有空间（其“邻居”）的列表，但与该点对角相邻的空间除外，因为该算法仅允许向上移动、下、左、右。我遇到的问题是，正如标题所暗示的那样，我遇到了一些堆栈溢出问题。我将在下面发布我的代码，如果有人可以提供帮助，我将不胜感激。

```
CoordList* Puzzle::GeneratePath(CoordList* Path, int GoalX, int GoalY)
{
int CurrX;
int CurrY;

CurrX = Path->NeighborX;
CurrY = Path->NeighborY;

if(CurrX == GoalX && CurrY == GoalY)
{
    return(Path);
}
else
{
    int NewX;
    int NewY;
    double NewDistance;
    int OldX;
    int OldY;
    double OldDistance;
    CoordList* PointNeighbors = NULL;
    CoordList* BestChoice = NULL;

    for(int i = 0; i < NumDirections; i++)
    {
        CoordList* NewNeighbor = new CoordList;
        NewX = CurrX + DirectsX[i];
        NewY = CurrY + DirectsY[i];
        if(IsPossible(NewX, NewY))
        {
            NewNeighbor->NeighborX = NewX;
            NewNeighbor->NeighborY = NewY;

            if(PointNeighbors == NULL)
            {
                NewNeighbor->next = NULL;
                PointNeighbors = NewNeighbor;
            }
            else
            {
                NewNeighbor->next = PointNeighbors;
                PointNeighbors = NewNeighbor;
            }
        }
        //delete NewNeighbor;
    }

    while(PointNeighbors != NULL)
    {
        if(BestChoice == NULL)
        {

            CoordList* AChoice = new CoordList;
            AChoice->next = NULL;
            NewX = PointNeighbors->NeighborX;
            NewY = PointNeighbors->NeighborY;
            AChoice->NeighborX = NewX;
            AChoice->NeighborY = NewY;
            BestChoice = AChoice;
            PointNeighbors = PointNeighbors->next;
            //delete AChoice;
        }
        else
        {
            NewX = PointNeighbors->NeighborX;
            NewY = PointNeighbors->NeighborY;
            NewDistance = DetermineDistance(NewX, NewY, GoalX, GoalY);

            OldX = BestChoice->NeighborX;
            OldY = BestChoice->NeighborY;
            OldDistance = DetermineDistance(OldX, OldY, GoalX, GoalY);

            if(NewDistance < OldDistance)
            {
                BestChoice->NeighborX = NewX;
                BestChoice->NeighborY = NewY;
            }
            PointNeighbors = PointNeighbors->next;
        }
    }
    BestChoice->next = Path;
    Path = BestChoice;
    return(GeneratePath(Path, GoalX, GoalY));
}
} 
```

我被要求提供我的确定距离功能。这只是传统点距离公式的简单实现。下面提供。

```
double Puzzle::DetermineDistance(int OneX, int OneY, int TwoX, int TwoY)
{
int DifX;
int DifY;
double PointSum;

DifX = (TwoX - OneX);
DifY = (TwoY - OneY);
DifX = (DifX * DifX);
DifY = (DifY * DifY);
PointSum = (DifX + DifY);
return (sqrt(PointSum));
} 
```

下面是 IsPossible 函数，它确定 X 和 Y 值是否位于可能的网格空间内。

```
bool Puzzle::IsPossible(int x, int y)
{
if(x + 1 > Size - 1 || x - 1 < 0 
    || y + 1 > Size - 1 || y - 1 < 0)
{
    return false;
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:23:21.993

您可能有一个导致堆栈溢出的无限递归循环，因为您在每次递归时都会创建新的局部变量，尤其是在观察到的振荡行为时。我假设您对小矩阵没有这个问题。它只是在黑暗中拍摄:-)

振荡问题表明您没有检查您是否已经在一个地方？

无论如何，也许您想重新考虑使用另一种寻路算法。我会建议一个基于代理的解决方案。我曾经使用以下解决方案来解决类似结构的迷宫：我启动了一个带有“PositionsList”的代理，其中包含它所在的位置，所以一开始只使用起点。然后它将自己复制到不在他自己的 PositionList 中的每个可到达位置，将新位置添加到该列表并随后销毁自己。对所有新代理重复该模式，直到第一个代理达到目标。这样你就可以保证找到最佳路径。但是对于大型矩阵来说，它可能会占用大量内存，尤其是当有很多不同的方法可以到达目标并且每个位置有很多可能的方向时！但是还有很多其他非常好的寻路算法。

祝你好运！

# javascript - 我怎么做才能让人们无法将我的 JSFiddle 保存在我自己的之上？

> ID：15538733
> 
> 赞同：3
> 
> 时间：2013-03-21T03:04:48.883
> 
> 标签：javascript, jsfiddle

我在使用 JSFiddle 时遇到问题，当我转到仪表板并打开我正在处理的 JSFiddle 时，它​​变成了 52 版（我的是 43 版）并且被完全编辑。正如我所有的代码都不见了，它被一些与我原来的 Fiddle 无关的随机代码所取代。

我设置 JSFiddle 的方式有问题吗？或者有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:29:50.367

如果您已登录 jsFiddle，则只有登录用户拥有基本版本。我只分享基本版本。其他人可以制作自己的版本，但除非我为基础设置新版本，否则基础版本永远不会改变。“使用基地，卢克”。

如果我需要共享多个版本，我只需点击 Fork 并制作一个新的基础版本来共享。这样，我创建和共享的版本始终是基本版本。我也不必记住哪个版本是我的版本，因为它始终只是基本版本。

# javascript - 修改函数的每个单词

> ID：15538736
> 
> 赞同：0
> 
> 时间：2013-03-21T03:05:08.710
> 
> 标签：javascript, string

我要做的是编写一个函数，将字符串中的每个单词修改为 piglatin。对于每个单词，它需要根据它是否以元音开头来改变它。它需要在每个单词的末尾添加辅音，每个以元音开头的单词都需要在末尾添加ay。最后，对于每个单词，在添加这些后缀之前，它需要将单词的第一个字母放在末尾。有什么建议吗？

```
function pigLatin(whatWeTitle) {
            var alertThis = " ";
            var whatWeTitle = document.getElementById("isLeaper").value;
            var splitArray = whatWeTitle.split(" ");
            var finalString = "";
            for ( i = 0; i < splitArray.length; i++) {
                finalString += splitArray[i] + "ay ";
            }
            alert(finalString);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:18:40.800

这看起来有点有趣，这是一个基于 的函数[`String.prototype.replace`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11)，它可以接受一个用于替换的函数：

```
function textToPig(t) {
  var vowels = {a:'a',e:'e',i:'i',o:'o'};

  return t.replace(/\w+/g, function(s){
    var first = s.substring(0,1);
    var rest = s.substring(1);

    return rest + first + (first in vowels? 'ay' : 'way')

  });
}

textToPig('foo bar each other   ') // "oofway arbway acheay theroay   " 
```

那是你要的吗？注意连字符的单词。

# jquery - innerText 值的 jQuery 选择器语法

> ID：15538738
> 
> 赞同：6
> 
> 时间：2013-03-21T03:05:21.003
> 
> 标签：jquery, jquery-selectors

我正在尝试将单击事件添加到由 Telerik ASP.NET 小部件生成的选项卡中。出于实验的目的，我将生成的 HTML 片段提取到静态页面中：

```
<HTML>
<HEAD>
<TITLE>sandpit</TITLE>
<SCRIPT TYPE="text/javascript" SRC="jquery-1.9.1.js"></SCRIPT>
<SCRIPT>
$(document).ready(function(){
  var foo = $("span.rtsTxt");
  var bar = foo.filter("[innerText='More']")
  bar.on('click',function(){alert('click');});
  alert('ready');
});
</SCRIPT>
</HEAD>
<BODY>
  <ul>
    <li class="rtsLI">
      <a class="rtsLink rtsAfter">
        <span class="rtsOut">
          <span class="rtsIn">
            <span class="rtsTxt">Preferences</span>
          </span>
        </span>
      </a>
    </li>
    <li class="rtsLI">
      <a class="rtsLink rtsAfter">
        <span class="rtsOut">
          <span class="rtsIn">
            <span class="rtsTxt">More</span>
          </span>
        </span>
      </a>
    </li>
  </ul>
</BODY>
</HTML> 
```

调试显示 foo 包含预期的两个项目。但是，我无法弄清楚所选择的第二个的语法，其中 innerText 的值为“更多”。

问题只是我如何在显示的过滤器表达式中或直接在选择器字符串中表达 innerText == 'More' ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T03:24:22.690

选择将返回对象的元素的另一种方法是使用如下[过滤器](http://api.jquery.com/filter/) ：

```
$(".rtsTxt").filter(function() {
    return $(this).text() == "More";
}); 
```

[小提琴](http://jsfiddle.net/3jT6c/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-21T03:10:42.190

尝试[`:contains`选择器](http://api.jquery.com/contains-selector/)：

```
var bar = foo.filter(":contains('More')") 
```

这是一个[jsfiddle 演示](http://jsfiddle.net/john_s/3jT6c/)，展示了它的工作原理。

**警告：**尽管这适用于问题中的 html，但`:contains`选择器将匹配包含给定文本的任何元素，而不仅仅是文本等于给定文本的元素。（正如@RAS 在下面的评论中指出的那样。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:11:55.423

这是不可能的吗？

```
if ($("span.rtsTxt").html() == "More") {
   // do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T10:46:43.790

```
jQuery.expr[":"].text = jQuery.expr.createPseudo(function(arg)
{
    return function( elem ) {
        return jQuery(elem).text().toLowerCase() == arg;
    };
});
$("span.rtsTxt:text('More')") 
```

仅返回内部文本等于“更多”的元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T03:18:09.127

使用包含选择器：

```
var bar = $("span.rtsTxt:contains('More')")
bar.on('click',function(){alert('click');});  
bar.html("yup") 
```

工作示例：http: [//jsfiddle.net/basarat/w38VE/4/](http://jsfiddle.net/basarat/w38VE/4/)

# iphone - 更新当前歌曲名称 AVPLayer Xcode

> ID：15538741
> 
> 赞同：0
> 
> 时间：2013-03-21T03:05:27.167
> 
> 标签：iphone, avplayer

我想将当前歌曲名称更新到这张图片中。我不知道如何称呼那个并且需要显示图像。我现在正在使用 AVPlayer。我想知道该怎么做。

![在此处输入图像描述](../Images/f4044350e4efd5245faac8c01ccaeda8.png)

我已经尝试过了，但它显示错误。 **架构 armv7s 的未定义符号：“_MPMediaItemPropertyTitle”，引用自：-[PlayViewController playPressed] in PlayViewController.o**

```
MPNowPlayingInfoCenter *infoCenter = [MPNowPlayingInfoCenter defaultCenter]; 
infoCenter.nowPlayingInfo = 
[NSDictionary dictionaryWithObjectsAndKeys:@"my title", MPMediaItemPropertyTitle,
                                           @"my artist", MPMediaItemPropertyArtist,
                                           nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:39:31.527

你`#import <MediaPlayer/MediaPlayer.h>`上过这个班吗？

MediaPlayer 框架是否链接到您的项目？

# r - R在多图布局中仅在一个图上绘制插图

> ID：15538754
> 
> 赞同：5
> 
> 时间：2013-03-21T03:06:38.823
> 
> 标签：r, layout

我有一系列我想要在一个页面上的情节。我首先使用命令 layout 来指定我的绘图布局：

`layout(matrix(c(1,1,2,2,1,1,2,2,3,4,5,6),3,4,byrow=TRUE))`

对于情节 1，我有类似的内容：

`plot(Easting,Northing, pch=16, col=grey(cex.size)) #The cex.size colours my dots according to some value`

我现在想在情节 1 上绘制一个插图，但还没有移动到情节 2。我尝试按照代码：

```
par(fig=c(0.75, 1, 0, 0.25), new = T)
plot(spp.tmp[,1:2], col=cols[spp.tmp[,3]+1], pch=16)
par(fig=c(0,1,0,1)) 
```

但这不起作用，因为`par(fig())`命令会覆盖我的布局，并且插图出现在我的整体图的底角，而不仅仅是在图 1 的底角。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:29:11.973

两种选择，

您可以尝试在`layout`命令中包含插图（如果您坚持使用`layout`

这是第一个图跨越两行和两列的情况，第二个是第一个右下角的插图。下面是第三个图，与第一个图大小相同，但没有插图。

```
layout( matrix(c(1,1,1,2,3,3,3,3), 4, 2, byrow = TRUE) )
## show the regions that have been allocated to each plot
layout.show(3) 
```

![在此处输入图像描述](../Images/3fc36c48a9b99ac867327121330cad35.png)

另一种方法是`subplot`从 TeachingDemos 包中使用

```
library(TeachingDemos)
layout(matrix(c(1,1,0,2),2,2,TRUE))
plot(1)
subplot(plot(1), x = c(1.2),y=0.8)
plot(2) 
```

![在此处输入图像描述](../Images/9d2a476bde84807e216c9294e76cf8f7.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T18:26:44.817

这是我使用基本图形的斧头方法。因为你搞乱了 par()，为什么不改变矩阵中的顺序并最后绘制棘手的顺序。这样，如果您要先绘制棘手的绘图，则 par 设置不会影响布局中的任何绘图。在这个例子中看起来很简单，但是当你有很多地块并且你想要一个只有 1 的插图时，它可以工作。

```
##generate some data
x<-rnorm(50)
y<-rnorm(50)
##set the layout
##so your first plot is plotted last
layout(matrix(c(2,2,0,1), 2,2, byrow=T))

#plot 1 is on the bottom right
plot(x,y, col="grey30", xlab="", ylab="")
#plot 2 is across the top
plot(x,y, col="grey30", xlab="", ylab="")
##set par to place the next plot in the existing plotting area
## and use fig to position it
par(fig=c(.65, .95, .55, .85), new = TRUE)

#inset 3rd plot int top plot, this effectively gives you a blank plot to populate
plot(x,y, col="white",  xlab="", ylab="")
#and make the background white
rect(par("usr")[1],par("usr")[3],par("usr")[2],par("usr")[4],col = "white")
##then just add your points afterwards
points(x,y,col="tomato") 
```

![](../Images/45ece4da2c3a056005f9840486acc18a.png)

# matlab - 如何在没有 MATLAB 的转置工具的情况下转置矩阵

> ID：15538757
> 
> 赞同：0
> 
> 时间：2013-03-21T03:06:49.003
> 
> 标签：matlab

我有一个图像，我已将其列为矩阵。我想对该图像进行转置，然后在屏幕上显示该图像。

我想知道如何以“硬”的方式做到这一点，即不使用 MATLAB 的转置函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-02T00:38:56.060

```
function [B] = trans(A)
[r c] = size(A);
B = zeros(c,r);
for i = 1:r
    for j = 1:c
        B(j,i) = A(i,j)
    end
end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:05:17.543

因为这是一堂课，所以我不会给你一个确切的答案，但我会朝正确的方向轻推你。我假设您正在寻找一种涉及手动转置信息的方法，而不是使用内置函数。

Matlab 以向量和“大小”的形式将值存储在矩阵中 - 例如，2x3 矩阵将在向量中存储六个值，然后 [2,3] （内部）告诉它它是 2x3而不是 6x1。

对于 2x3 矩阵，这是向量中值的顺序：

```
1 3 5
2 4 6 
```

要引用 (2,2) 中的值，可以将其引用为 A(2,2) 或 A(4)。(1,3) 中的值可以引用为 A(5)。

因此，如果您可以构造一个引用转置顺序中的值的向量，那么您可以将新值分配到适当的顺序并将它们存储在适当大小的矩阵中。为了说明这一点，请考虑上述矩阵的转置：

```
1 2
3 4
5 6 
```

这将表示为 (1,3,5,2,4,6)，大小为 (3,2)。如果您可以构造向量 (1,3,5,2,4,6)，那么您可以使用该向量来适当地分配值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:21:27.603

你可以使用[`flipud`](http://www.mathworks.com/help/matlab/ref/flipud.html)and[`fliplr`](http://www.mathworks.com/help/matlab/ref/fliplr.html)吗？
在这种情况下，您可以将转置表示为一系列翻转（我将留给您找出确切的顺序）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:53:32.607

以下是解决方案的提示：转置将`A(1,2)`普通数组`A`中的元素`B(2,1)`转换为转置后数组中的元素`B`( `B=A'`)，反之亦然。因此，您可以遍历所有行和列，并逐个元素地应用转换。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-17T03:59:47.243

为此，您可以将 rot90 与 flipud/fliplr 一起使用。

# javascript - 使用 watchPosition 仅显示当前位置标记

> ID：15538760
> 
> 赞同：1
> 
> 时间：2013-03-21T03:07:17.757
> 
> 标签：javascript, google-maps, mobile, gps, cordova

我正在尝试在谷歌地图上创建一个标记以显示用户当前位置。使用以下代码我可以做到这一点，但每次 watchPosition 刷新它都会创建一个新点。每次添加新点时如何清除以前的标记？

```
// Geolocation
var win = function(position) {
    var iconimage = new google.maps.MarkerImage('images/current_location_small.png',
        new google.maps.Size(15, 15),
        new google.maps.Point(0,0),
        new google.maps.Point(7, 7)
    );
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    var myLatlng = new google.maps.LatLng(lat, long);
    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        icon: iconimage
    });

    marker.setMap(map);
};

var watchID = navigator.geolocation.watchPosition(win); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:32:42.310

您可以在函数之外声明您的标记并使用该`setPosition(LatLng)`方法

```
// Geolocation
var marker=null;
var win = function(position) {

    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    var myLatlng = new google.maps.LatLng(lat, long);
    if(marker==null){
         var iconimage = new google.maps.MarkerImage('images/current_location_small.png',
             new google.maps.Size(15, 15),
             new google.maps.Point(0,0),
             new google.maps.Point(7, 7)
         );
        marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            icon: iconimage
        });
        marker.setMap(map);
    }else{
        marker.setPosition(myLatlng);
    }
};

var watchID = navigator.geolocation.watchPosition(win); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T08:49:53.640

或如评论 setnull 中所述，然后重绘。当然，屏幕会闪烁，它会以 gps 更新的速度重绘，删除下面我的代码中的 if 行，你会不断地画出轨迹

```
var watchID = navigator.geolocation.watchPosition(function(position) {

  // Get current position
  pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

  // Redefine current location marker
  if (typeof(marker) != "undefined") marker.setMap(null);
  marker = new google.maps.Marker({
     position: pos,
     map: map,
     title: 'you are here',
     icon : user
  },watchOptions);

 }); //end constant watchPosition 
```

# android - 如何正确创建布局（Android）

> ID：15538762
> 
> 赞同：1
> 
> 时间：2013-03-21T03:07:34.900
> 
> 标签：android, android-layout, layout, screen-resolution

我对 android 开发非常陌生，为每种分辨率创建不同的布局对我来说并不是那么容易。

所以，我能够为大多数设备优化我的应用程序（在 eclipse 中），但我仍然在这里和那里遇到一些问题：

1.  我真的必须将每个设备分辨率的具有不同分辨率的相同图像复制到相应的文件夹中吗？我目前正在使用 hdpi、large-hdpi、mdpi 和 xdpi 文件夹...

2.  是不是可以使用一个可绘制文件夹并缩小图像？

3.  这些 5.1in (WVGA)/5.4in (FWVGA) 设备是否有额外的可绘制文件夹？在 Eclipse 中，它们被标记为 mdpi，但这些设备使用的是 large-hdpi 文件夹，并且这些图像太大，但非常适合 ie nexus 7。

4.  我还使用 4 个不同的布局文件夹（layout-sw360dp、sw480dp、sw600dp 和 sw720dp）。这是为每个设备组创建布局的正确方法吗？

希望有人能够帮助我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:38:17.117

1）是的，您必须将每种设备分辨率的不同分辨率的图像复制到相应的文件夹中。因为如果您不这样做，您将在不同的屏幕尺寸上产生意想不到的结果，即错位的控件和布局将不正确。

2）如果您缩放图像，那么它们会被拉伸或挤压，您将无法在屏幕上获得正确的结果。

3) 文件夹有时在不同设备上表现不同。有时他们不使用他们打算使用的文件夹。

4）是的！正如文档中所建议的那样，使用不同的文件夹是一个好习惯，因为您无法确定 android 中的屏幕尺寸。

# javascript - 无法在 jquery mobile 上滑动

> ID：15538765
> 
> 赞同：3
> 
> 时间：2013-03-21T03:07:44.183
> 
> 标签：javascript, jquery, html, css, jquery-mobile

新手在这里，抱歉，如果我不了解所有正确的来龙去脉...我已经访问了几页以尝试了解 jquery mobile 的左右滑动。我为我的脚本访问了这个页面 - [http://designicu.com/jquery-mobile-swipe/](http://designicu.com/jquery-mobile-swipe/) 无论出于什么愚蠢的原因，我根本无法让它工作。我确定我错过了一些小而愚蠢的东西......有人能看到我的问题吗？谢谢

```
<!DOCTYPE html> 
<html  lang="en">
<head>
    <meta charset="utf-8" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/> 

    <link rel="stylesheet" href="_/css/jquery.mobile.css" />

    <script src="_/javascript/jquery.js"></script>
    <script src="_/javascript/jquery.mobile.js"></script>

    <script>

    $('div.ui-page').live("swipeleft", function(){
    var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
        $.mobile.changePage(nextpage, "slide", false, true);
        }
    });
    $('div.ui-page').live("swiperight", function(){
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, {transition: "slide",
        reverse: true}, true, true);
        }
    });
    </script>

</head>

<body> 

    <div data-role="page" id="editor">
    <div>bucker</div>
    </div>

    <div data-role="page" id="innovation1">
    <div>bunk</div>
    </div>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:43:47.617

我给你做了一个工作示例：http: [//jsfiddle.net/Gajotres/NV6Py/](http://jsfiddle.net/Gajotres/NV6Py/)

```
$(document).on('swipeleft', '[data-role="page"]', function(event){    
    if(event.handled !== true) // This will prevent event triggering more then once
    {    
        var nextpage = $(this).next('[data-role="page"]');
        // swipe using id of next page if exists
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
        }
        event.handled = true;
    }
    return false;         
});

$(document).on('swiperight', '[data-role="page"]', function(event){   
    if(event.handled !== true) // This will prevent event triggering more then once
    {      
        var prevpage = $(this).prev('[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {transition: "slide", reverse: true}, true, true);
        }
        event.handled = true;
    }
    return false;            
}); 
```

而且您的版本运行良好。我只用 jQuery 1.8.2 和 jQuery Mobile 1.2 替换了 js 和 css 初始化。这里看看：

```
<!DOCTYPE html> 
<html lang="en">
<head>
    <meta charset="utf-8" /> 
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <script>

    $('div.ui-page').live("swipeleft", function(){
    var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
        $.mobile.changePage(nextpage, "slide", false, true);
        }
    });
    $('div.ui-page').live("swiperight", function(){
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, {transition: "slide",
        reverse: true}, true, true);
        }
    });
    </script>

</head>

<body> 

    <div data-role="page" id="editor">
        <div>bucker</div>
    </div>

    <div data-role="page" id="innovation1">
        <div>bunk</div>
    </div>

</body> 
</html> 
```

# php - mysqli_fetch_assoc

> ID：15538767
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:07:47.307
> 
> 标签：php, database, arrays, mysqli, echo

嘿，通常我用来`mysqli_fetch_array`在我的 CMS 中显示我的数据库的内容，但最近有人告诉我应该使用`mysqli_fetch_assoc`并将结果推送到一个数组中，以便数据库只运行一次，而不是为每条记录运行数据库。

但是我不确定如何在不显示所有字段的情况下显示我的字段，通常我会 echo `$data['field_name']`，但我注意到`mysqli_fetch_assoc`我不能只是 echo `$value['field_name']`，我所能做的就是 echo`$value`并显示所有结果。

这就是我所做的，希望这是有道理的。提前感谢您的帮助！

PHP

```
$sql = "SELECT * FROM app_categories";

if($result = query($sql)){
    $list = array();

    while($data = mysqli_fetch_assoc($result)){
        array_push($list, $data);
    }

    foreach($list as $i=>$row){      
        foreach($row as $column=>$value){
            echo $value;
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:16:00.330

为什么你不只是

```
echo $row['field_name']; 
```

# google-app-engine - google app engine ndb，查询后过滤：'list'对象没有属性'filter'

> ID：15538770
> 
> 赞同：0
> 
> 时间：2013-03-21T03:08:17.137
> 
> 标签：google-app-engine

以下语句生成错误消息**AttributeError: 'list' object has no attribute 'filter'**。我认为`filter`之后`query`完全可以。当时有什么问题？提前致谢。

```
purchases = Purchase.query(Purchase.date>=startDate, Purchase.date<endDate)
...

purchases = purchases.filter(Purchase.account==member.account,
                             ndb.OR(Purchase.consumedMode=='bidding',
                                    Purchase.consumedMode=='purchasing')).fetch() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:21:59.303

如果购买是一个查询，过滤器就可以正常工作。

如果在检索查询结果后购买是一个列表，它将不起作用，例如

```
purchases = [item for item in purchases] 
```

在你的代码中……会发生什么？

# jquery - Jquery Json提取节点？

> ID：15538772
> 
> 赞同：0
> 
> 时间：2013-03-21T03:08:31.450
> 
> 标签：jquery, ajax, json

如何使用 Jquery 仅从 json 格式中提取“customers_firstname”？

```
<?php echo json_encode($users) ?> 
```

输出

```
[{"Customer":{"id":"13","customers_gender":"M","resumetest":"a15ff2aa27d616636b5bc30fac4dba38733f4e5f","created":"2013-01-29 13:49:06","modified":"2013-03-14 11:50:18","customers_firstname":"Gerald","customers_lastname":"Russ"}},{"Customer":{"id":"14","customers_gender":"F","resumetest":null,"created":"2013-01-29 15:41:23","modified":"2013-02-14 15:08:42","customers_firstname":"Jim","customers_lastname":"Carrie"}}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:16:25.143

试试这个 ：

[演示](http://fiddle.jshell.net/4Pw3j/3/)

HTML

```
<ul id="nameList">
</ul> 
```

**JS**

```
var customers = [{"Customer":{"id":"13","customers_gender":"M","resumetest":"a15ff2aa27d616636b5bc30fac4dba38733f4e5f","created":"2013-01-29 13:49:06","modified":"2013-03-14 11:50:18","customers_firstname":"Gerald","customers_lastname":"Russ"}},{"Customer":{"id":"14","customers_gender":"F","resumetest":null,"created":"2013-01-29 15:41:23","modified":"2013-02-14 15:08:42","customers_firstname":"Jim","customers_lastname":"Carrie"}}];

$.each(customers, function (index, item) {

        $("#nameList").append("<li>" + item.Customer.customers_firstname + "</li>");
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:11:49.957

您可以在 AJAX 成功块中使用以下代码

```
$.each(json_data, function (index, customer){//here json_data is success response from the Server
if (customer){
console.log(customer["customers_firstname"];
}
}) 
```

# mysql - MySQL 视图、联合和分组依据

> ID：15538773
> 
> 赞同：1
> 
> 时间：2013-03-21T03:08:39.093
> 
> 标签：mysql, sql, view, union

我正在尝试编写此 SQL 查询：

```
Select t1.tms_id, t1.tms_name, t1.Pts from (
SELECT t.tms_id, t.tms_name, SUM(s.lsc_1stscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
WHERE (t.tms_id = l.lgs_1stplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
GROUP BY t.tms_name
) t1
union
Select t2.tms_id, t2.tms_name, t2.Pts from (
SELECT t.tms_id, t.tms_name, SUM(s.lsc_2ndscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
WHERE (t.tms_id = l.lgs_2ndplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
GROUP BY t.tms_name
) t2
union
Select t3.tms_id, t3.tms_name, t3.Pts from (
SELECT t.tms_id, t.tms_name, SUM(s.lsc_3rdscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
WHERE (t.tms_id = l.lgs_3rdplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
GROUP BY t.tms_name
) t3
union
Select t4.tms_id, t4.tms_name, t4.Pts from (
SELECT t.tms_id, t.tms_name, SUM(s.lsc_4thscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
WHERE (t.tms_id = l.lgs_4thplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
GROUP BY t.tms_name
) t4
ORDER BY Pts DESC 
```

我需要在这个查询中添加一个 group by，特别是在最后一个 ORDER BY Pts DESC 之前，但是添加 GROUP BY tms_id（示例），显示相同的结果。

一位朋友推荐我创建一个 VIEW，但是当我尝试显示此错误时：

> *#1349 - 视图的 SELECT 在 FROM 子句中包含一个子查询*

而且我真的不知道什么是子查询（我搜索过但我并没有真正理解）。如何重新组织或修复此 QUERY 以使用另一个 GROUP BY？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:15:11.810

```
Extract.

Select t1.tms_id, t1.tms_name, t1.Pts from (
    SELECT t.tms_id, t.tms_name, SUM(s.lsc_1stscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
    WHERE (t.tms_id = l.lgs_1stplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
    GROUP BY t.tms_name
) t1 
```

以下是来自上述 sql 语句的子查询。

```
 SELECT t.tms_id, t.tms_name, SUM(s.lsc_1stscore) as Pts FROM tb_team as t,tb_league as l, tb_game as g, tb_score as s
    WHERE (t.tms_id = l.lgs_1stplace) AND (l.fk_lsc_id = s.lsc_id) AND (t.fk_gms_id = g.gms_id) AND (g.gms_id = 1)
    GROUP BY t.tms_name 
```

要在 mysql 视图中使用子查询，请将每个子查询变成一个视图，然后使用该视图而不是子查询。

# ms-access - 'Microsoft.ACE.OLEDB.12.0' 提供程序未注册 - 但已注册

> ID：15538774
> 
> 赞同：2
> 
> 时间：2013-03-21T03:08:50.563
> 
> 标签：ms-access, 64-bit, oledb, oledbconnection

简短而甜蜜：

*   应用程序适用于 x86 机器，但不适用于 x64（在 2008 Server 和 Windows 8 上尝试过）
*   已安装 Microsoft Access 数据库引擎 2010（还安装了 Microsoft Office 2007 Access 数据库引擎）
*   未安装 MS Office
*   确认存在 C:\Program Files (x86)\Common Files\microsoft shared\OFFICE12\ACEOLEDB.DLL

代码：

```
string conn = "Provider=SQLOLEDB;Data Source=localhost;Initial Catalog=Northwind;Integrated Security=SSPI;";
OleDbConnection _connOle = new OleDbConnection(conn); 
```

我应该怎么做才能让这个应用程序在 x64 机器上运行？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:11:30.750

我可以想到两种可以解释您的问题的情况：

1.  您的 C# 项目设置为面向 64 位和 32 位平台，并且 64 位计算机仅安装了 32 位版本的 Access 数据库引擎。引用失败，因为程序以 64 位运行，但机器丢失

    C:\Program Files\Common Files\Microsoft Shared\OFFICE14\ACEOLEDB.DLL

2.  您的 C# 项目设置为仅面向 32 位平台 (x86)，并且 64 位计算机仅安装了 64 位版本的 Access 数据库引擎。引用失败，因为程序以 32 位运行，但机器丢失

    C:\Program Files (x86)\Common Files\microsoft shared\OFFICE14\ACEOLEDB.DLL

请注意，64 位版本的 Access 数据库引擎的安装程序*仅*安装64 位版本，而不是两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-10T14:28:51.087

虽然这个问题已经得到解答，但在我花了很多时间解决这个问题后，这就是解决问题的方法。

我使用 Process Monitor 找出正在查找的注册表项。它是`HKEY_CLASSES_ROOT\Microsoft.ACE.OLEBD.12.0`。

在我的情况下，尽管程序和功能中列出了“Microsoft Access 数据库引擎 2010”，但这个键丢失了。

此外，该文件`ACEOLEDB.DLL`已经存在于`C:\Program Files\Common Files\Microsoft Shared\OFFICE14\`.

重新安装“Microsoft Access Database Engine 2010 Redistributable”退出但没有显示任何错误，但 Windows 事件日志显示有问题，并查看安装日志文件，似乎存在版本不匹配（“已安装此产品的另一个版本” ）。
因此，我从“程序和功能”中卸载了“Microsoft Access 数据库引擎 2010”，然后重新安装。现在它安装好了。
这导致`HKEY_CLASSES_ROOT\Microsoft.ACE.OLEBD.12.0`添加了注册表项，并且我的副本`ACEOLDBD.DLL`被替换为早期版本（14.0.7159.5000 中的 14.0.7011.1000）。

# ios - 如何在 iOS 5 和 6 中支持方向而无需修改每个视图控制器文件？

> ID：15538778
> 
> 赞同：0
> 
> 时间：2013-03-21T03:09:04.500
> 
> 标签：ios, xcode, ipad, uiviewcontroller, orientation

我的 iPad 应用程序设置为支持横向（左右）。当我在 6.0 或 6.1 模拟器中运行它时，它的行为符合预期。但在 5.1 中，它被锁定为纵向（向上或向下，我不知道），并且在模拟器旋转时不会重新定向。

编辑：这已被标记为与此问题重复： [Supporting both iOS 6 and iOS 5 autorotation](https://stackoverflow.com/questions/12434992/supporting-both-ios-6-and-ios-5-autorotation/13800907#13800907)

我正在改变要问的问题，如何在不添加此功能的情况下做到这一点：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

对于每个视图控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:00:45.500

您需要像这样覆盖以下方法以根据您在 ios 5.1 和早期版本中的要求支持方向...

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

# sharepoint - 使用 sharepoint Designer 2010 在 sharepoint 2010 中对名称进行分组

> ID：15538779
> 
> 赞同：0
> 
> 时间：2013-03-21T03:09:08.267
> 
> 标签：sharepoint, sharepoint-designer

`sharepoint 2010`我在使用中制作了测验应用程序`sharepoint designer 2010`。每个用户每次都可以关注此应用程序。在他们关注测验应用程序后，他们的名字将显示在列表答案中。

例如：用户 B 关注此测验 5 次，她的名字将自动显示在列表答案中 5 次。但是，我只想显示用户 B 1 次而不是 5 次。因此，尽管用户 B 关注了 5 或 10 次测验，但她的名字在 List Answer 中只显示了 1 次。

你能帮我吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:32:10.520

您是否使用列表来存储结果？

如果是，那么您可以使用 group by option 生成视图。

所以它只会在上面显示用户名一次而不是多次。

如果我理解你的问题是错误的，让我更正

# java - Java 临时文件，读写

> ID：15538780
> 
> 赞同：1
> 
> 时间：2013-03-21T03:09:23.517
> 
> 标签：java, file, temp

我有这段代码

```
package Classes;

import java.io.*;

public class IpAdministrator {

    public Boolean isActive(String ipAddress) {
        boolean isActive = false;
        String cmd;
        String OS = System.getProperty("os.name");
        System.out.println(OS);
        String tmpfolder = System.getProperty("java.io.tmpdir");
        System.out.println(tmpfolder);

        //iptmp.deleteOnExit();

        if (OS.equals("Linux")) {
            cmd = "ping " + ipAddress + " -c 1";
        } else {
            cmd = "cmd /c ping " + ipAddress + " -n 1";
        }
        try {
            String s = null;
            Process p = Runtime.getRuntime().exec(cmd);
            File iptmp = File.createTempFile("ipresult", ".txt", new File(tmpfolder));

            BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));

            while ((s = stdInput.readLine()) != null) {
                System.out.println(s);
                s = s.toString();
                BufferedWriter writer = new BufferedWriter(new FileWriter(iptmp));
                writer.write(s);

            }

        } catch (Exception ex) {
            System.out.println(ex.getMessage().toString());
        }

        return isActive;
    }

} 
```

我想将命令的结果写在临时文件中，我在这个站点的其他问题中发现了一些相关的东西，它似乎工作正常，但是当我运行这个时，文件是用一些随机数字创建的（即：ipresult540677216848957037 .txt) 并且它是空的，我不知道为什么，我还读到它与 java 1.7 有关，所以这意味着我无法用信息填充文件，有什么我遗漏的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:12:38.490

每次您以这种方式打开文件时——即每次执行此行时：

```
BufferedWriter writer = new BufferedWriter(new FileWriter(iptmp)); 
```

该文件被截断为零长度。此外，由于您从未显式调用`close()`,`BufferedWriter`您编写的行将永远不会真正刷新到文件中。结果，没有数据进入磁盘。

要正确执行此操作，首先，将上面的行移动到循环之前，因此它只执行一次。其次，在循环之后，包含类似的代码

```
if (writer != null)
    writer.close(); 
```

最后，请注意，您的程序在 Mac 上被不必要地破坏了，它们既不是 Linux，也不使用`cmd.exe`. 与您编写此代码的方式不同，您针对 Windows 进行显式测试，并在找到时使用 Windows 命令行；否则，假设类似于 UNIX，并使用 Linux 版本。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-21T03:15:00.970

你需要关闭作家

```
BufferedReader stdInput = new BufferedReader(new InputStreamReader(
        p.getInputStream()));
BufferedWriter writer = null;
try {
    writer = new BufferedWriter(new FileWriter(iptmp));
    while ((s = stdInput.readLine()) != null) {
        System.out.println(s);
        s = s.toString();
        writer.write(s);
    }

} finally {
    if (writer != null) {
        writer.close();
    }
} 
```

如果您使用的是 java 7

```
try (BufferedWriter writer = new BufferedWriter(new FileWriter(
        iptmp));) {

    while ((s = stdInput.readLine()) != null) {
        System.out.println(s);
        s = s.toString();
        writer.write(s);
    }

} 
```

# bash - if else && || 使用 bash 的正确方法是什么？捷径？

> ID：15538782
> 
> 赞同：4
> 
> 时间：2013-03-21T03:09:55.950
> 
> 标签：bash, if-statement

我遇到了一些奇怪的行为（可能并不奇怪，但我不明白！）

我想使用 bash 速记语法编写一些 if / e,se 语句：

```
[[ 1 -eq 1 ]] && echo "true" || echo "false" 
```

上述代码的输出给出：

```
true 
```

现在上面的代码实际上工作正常。但是下一个代码不会：

```
[[ 1 -eq 1 ]] && infMsg "true" || infMsg "false" 
```

*infMsg*只是一个函数。上述代码的输出给出：

```
true
false 
```

我只希望它说“真实”。

我在 && || 的方式上有什么遗漏吗？语法处理函数的退出代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T04:36:35.213

我怀疑您的“infMsg”退出代码不是 0（成功）。如果我们分解第一段代码：

```
[[ 1 -eq 1 ]] && echo "true" || echo "false" 
```

正在发生的事情是：

*   首先`[[ 1 -eq 1 ]] && echo "true"`评估代码部分，因为`&&`它的优先级高于`||`(more info[here [1](http://tldp.org/LDP/abs/html/opprecedence.html) )
*   前半部分返回 true。然后，**由于前半部分为 true**，后半部分执行该`echo "true"`语句。(&& -> 如果第一部分为真，则运行第二部分)
*   现在我们有了`|| echo "false"`. 这部分实际上没有被执行，因为前半部分 ( `echo "true"`) 返回 true ，因为 echo 打印成功（**(||-> 如果第一部分为假，则运行第二部分。** )。

现在，如果我们分解第二段代码：

```
[[ 1 -eq 1 ]] && infMsg "true" || infMsg "false" 
```

最***有可能发生***的是：

*   `[[ 1 -eq 1 ]] && infMsg "true"`被评估。第一面是真的。然后，**由于前半部分为 true**，后半部分执行该`infMsg "true"` 语句。（&& -> 如果第一部分为真，则运行第二部分）。
*   现在我们有了`|| infMsg "false"`. 如果`infMsg "true"` 上一个命令中的 没有返回解释为成功 (0) 的状态代码，则前半部分被解释为假，触发`infMsg "false"`( **(||-> 如果第一部分为假，则运行第二部分)。** )..

重要的信息在这里拉开：

*   || 如果前半部分为 FALSE，则仅运行后半部分。
*   && 仅在前半部分为 TRUE 时才运行后半部分。

# linux - 当我们使用 tcpdump 捕获我们发送的数据包时，TCP 的校验和是如何计算的

> ID：15538786
> 
> 赞同：1
> 
> 时间：2013-03-21T03:10:31.643
> 
> 标签：linux, tcp, checksum, tcpdump, nic

我正在尝试生成一系列数据包来模拟 TCP 3 次握手过程，我的第一步是捕获真正的连接数据包，并尝试从同一台机器重新发送相同的数据包，但它没有工作首先。

最后我发现我用 tcpdump 捕获的数据包不是我的计算机发出的，TCP 的校验和字段发生了变化，这让我认为即使 TCP 校验和不正确，我也可以建立 tcp 连接。

所以我的问题是校验和字段是如何计算的？它是由 tcpdump 还是硬件修改的？为什么会改变？这是tcpdump的错误吗？或者是因为省略了计算。

以下是我从我的主机和虚拟机上截取的截图，你可以看到在不同的机器上截取的同一个数据包除了 TCP 校验和之外都是一样的。

小窗口是我的虚拟机，我使用来自主机的命令“ssh 10.82.25.138”来生成这些数据包

![在此处输入图像描述](../Images/348b65844371e3523ea9b6397f1bff1f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T03:39:24.703

您看到的可能是校验和卸载的结果。引用wireshark wiki（[http://wiki.wireshark.org/CaptureSetup/Offloading](http://wiki.wireshark.org/CaptureSetup/Offloading)）：

> 大多数现代操作系统都支持某种形式的网络卸载，其中一些网络处理发生在 NIC 而不是 CPU 上。通常这是一件好事。它可以释放系统其余部分的资源并让它处理更多连接。如果您尝试捕获流量，则可能会导致错误错误和奇怪甚至丢失的流量。
> 
> 在支持校验和卸载的系统上，IP、TCP 和 UDP 校验和在它们在线传输之前在 NIC 上计算。在 Wireshark 中，这些显示为用红色文本标记为黑色的传出数据包，并且注释 [不正确，应该是 xxxx（可能是由“TCP 校验和卸载”引起的？）]。
> 
> Wireshark 在将数据包发送到网络适配器之前捕获它们。它不会看到正确的校验和，因为它还没有被计算出来。更糟糕的是，大多数操作系统都不会费心初始化这些数据，因此您可能会看到不应该的小块内存。

虽然这适用于wireshark，但同样的原则也适用。在您的主机中，您会看到错误的校验和，因为它还没有被填写。它在客户机上看起来是正确的，因为在它通过“线路”发送之前它已*被*填充。尝试在处理此流量的接口上禁用校验和卸载，例如：

```
ethtool -K eth0 rx off tx off 
```

如果是 eth0。

# php - 这些方法对 PHP 会话进行编码和解码的安全性

> ID：15538787
> 
> 赞同：8
> 
> 时间：2013-03-21T03:10:31.983
> 
> 标签：php, session, serialization, deserialization

在某种程度上，这个问题可以看作是这个问题的[延伸](https://stackoverflow.com/questions/530761/how-can-i-unserialize-session-data-to-an-arbitrary-variable-in-php)。

我们正在考虑发布一个类来处理反序列化和序列化存储在大型生产网站上的表中的会话数据，以便我们可以编辑任意会话数据。

问题是，`session_decode()`填充当前`$_SESSION`而不返回解码数组，并且`session_encode()`不编码给定数组（它只返回当前会话的序列化字符串。）

默认的 PHP 会话序列化处理程序不简单地用于`serialize()`对会话进行编码，因此，获得相同功能的编码和解码会话的唯一方法是移动全局`$_SESSION`变量（即存储到会话中、检索数据和恢复) 或通过尝试重现该`session.serialize_handler`功能的实现。

我们选择了后一种复制方法，因为它似乎不那么具有侵入性。在文档中[session_encode](http://www.php.net/manual/en/function.session-encode.php)和[session_decode](http://www.php.net/manual/en/function.session-decode.php)的评论部分中，已经多次尝试这种复制。我挑选了两个我认为最可靠的并应用它们。decode 方法看起来相当健壮，但 encode 方法虽然有效，但已于 5 年前发布

我们仍然不愿意仅仅因为可能存在看不见的边缘情况会导致这些方法中断而推出它。

最终，我正在寻找：

*   将破坏以下方法的示例，或
*   保证这些方法已在生产中使用并且不会破坏
*   也许已经在生产中尝试和测试过的替代品？

先谢谢大家了！

编码：

```
class Session extends BaseSession
{
    /**
     * Taken from http://www.php.net/manual/en/function.session-decode.php#108037
     */
    public function unserialized() {
        $session_data = $this->content;
        $method = ini_get("session.serialize_handler");
        switch ($method) {
            case "php":
                return self::unserialize_php($session_data);
                break;
            case "php_binary":
                return self::unserialize_phpbinary($session_data);
                break;
            default:
                throw new Exception("Unsupported session.serialize_handler: " . $method . ". Supported: php, php_binary");
        }
    }

    /**
     * Taken from http://www.php.net/manual/en/function.session-encode.php#76425
     */
    public function serialize($array, $safe = true) {
        // the session is passed as refernece, even if you dont want it to
        if( $safe ) $array = unserialize(serialize( $array )) ;
        $raw = '' ;
        $line = 0 ;
        $keys = array_keys( $array ) ;
        foreach( $keys as $key ) {
            $value = $array[ $key ] ;
            $line ++ ;
            $raw .= $key .'|' ;
            if( is_array( $value ) && isset( $value['huge_recursion_blocker_we_hope'] )) {
                $raw .= 'R:'. $value['huge_recursion_blocker_we_hope'] . ';' ;
            } else {
                $raw .= serialize( $value ) ;
            }
            $array[$key] = Array( 'huge_recursion_blocker_we_hope' => $line ) ;
        }

        $this->content = $raw;
        $this->save();
    }

    private static function unserialize_php($session_data) {
        $return_data = array();
        $offset = 0;
        while ($offset < strlen($session_data)) {
            if (!strstr(substr($session_data, $offset), "|")) {
                throw new Exception("invalid data, remaining: " . substr($session_data, $offset));
            }
            $pos = strpos($session_data, "|", $offset);
            $num = $pos - $offset;
            $varname = substr($session_data, $offset, $num);
            $offset += $num + 1;
            $data = unserialize(substr($session_data, $offset));
            $return_data[$varname] = $data;
            $offset += strlen(serialize($data));
        }
            return $return_data;
    }

    private static function unserialize_phpbinary($session_data) {
        $return_data = array();
        $offset = 0;
        while ($offset < strlen($session_data)) {
            $num = ord($session_data[$offset]);
            $offset += 1;
            $varname = substr($session_data, $offset, $num);
            $offset += $num;
            $data = unserialize(substr($session_data, $offset));
            $return_data[$varname] = $data;
            $offset += strlen(serialize($data));
        }
        return $return_data;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:04:40.230

Igbinary ( [https://github.com/igbinary/igbinary/](https://github.com/igbinary/igbinary/) ) 是标准 php 序列化程序的替代品。igbinary 以紧凑的二进制形式存储 php 数据结构，而不是耗费时间和空间的文本表示。当使用 memcached 或类似的基于内存的存储来存储序列化数据时，节省的费用非常可观。预计存储需求将减少约 50%。具体数字取决于您的数据。

反序列化性能至少与标准 PHP 序列化程序相当。序列化性能取决于启用重复字符串跟踪的“compact_strings”选项。字符串被插入到哈希表中，这增加了一些开销。在通常情况下，这没有太大意义，因为使用模式是“很少序列化，经常反序列化”。使用“compact_strings”选项，igbinary 通常比标准序列化程序慢一点。没有它，会快一点。

**特征**

*   支持与标准 PHP 序列化程序相同的数据类型：null、bool、int、float、string、array 和 objects。
*   `__autoload`&`unserialize_callback_func`
*   `__sleep`&`__wakeup`
*   可序列化接口
*   平台之间的数据可移植性（32/64 位，字节序）
*   在 Linux amd64、Linux ARM、Mac OSX x86、HP-UX PA-RISC 和 NetBSD sparc64 上测试
*   连接到 APC 操作码缓存作为序列化处理程序 (APC 3.1.7+)
*   兼容 PHP 5.2 和 5.3

希望能帮助到你

# android-widget - 自定义按钮 - Java 中的错误 - widget.Button；

> ID：15538792
> 
> 赞同：0
> 
> 时间：2013-03-21T03:11:09.017
> 
> 标签：android-widget

以信为榜样。当我尝试通过 custom.xml 使用自定义按钮时，模拟器崩溃并出现 Java 错误 - 膨胀类 android.widget.Button。

```
import android.os.Bundle;
import android.content.Intent;
import android.app.Activity;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MasterActivity extends Activity {

    Button uccBtn, tipBtn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_master);

        uccBtn = (Button) findViewById(R.id.button1);
        tipBtn = (Button) findViewById(R.id.button2);
        uccBtn.setOnClickListener (uccApp);
        tipBtn.setOnClickListener (tipApp);

custom.xml
<?xml version="1.0" encoding="UTF-8"?>
<Selector xmlns:android="http://schemas.android.com/apk/res/android"
>
<item android:state_pressed="true" android:drawable="@drawable/btn_ecolab_selected"></item>
<item android:state_focused="true"
 android:drawable="@drawable/btn_ecolab_highlight"></item>
<item android:drawable="@drawable/btn_ecolab"></item>
</Selector>

activity_main.xml
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:background ="#ffffcc"
tools:context=".MasterActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button2"
    android:layout_alignParentTop="true"
    android:layout_marginTop="23dp"
    android:text="@string/button1" android:typeface="serif"
    android:background="@drawable/custom"
     />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="@string/version"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<Button
    android:id="@+id/button10"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="56dp"
    android:text="@string/button10" android:typeface="serif"
    android:background="@drawable/custom" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button10"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="59dp"
    android:text="@string/button2" android:typeface="serif"
    android:background="@drawable/custom"
     />

</RelativeLayout> 
```

如果我只按名称（btn_ecolab）引用按钮，它工作正常，只是在按下或选择按钮时没有动画。我已经使用 LinearLayout 进行了尝试，以确保 Relitavelayout 不是问题。自定义按钮位于我的 Res/drawable-hpdi 文件夹中。还尝试了 -mdpi、-xhdpi 和 -xxhdpi 中的按钮和 custom.xml 的副本。在没有@string 分配的情况下进行了尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:01:36.983

试试这个。

```
uccBtn = (Button) findViewById(R.id.button1);
tipBtn = (Button) findViewById(R.id.button2);
uccBtn.setOnClickListener (new OnClickListener() {              
                @Override
                public void onClick(View v) {
                    //your code is here
                }
            }); 
```

使 res 文件夹中的一个文件夹可绘制放置您的**custom.xml**

我正在使用这种方式并且工作得很好。

# php - 指定 Accept: 标头时 Apache 406 Not Acceptable

> ID：15538796
> 
> 赞同：6
> 
> 时间：2013-03-21T03:11:29.673
> 
> 标签：php, apache

我试图自己找到解决方案，但其他 406 问题的解决方案对我没有帮助。

我在我的 Mac 上启用了 PHP 和 Apache Web 服务器。我发现如果我通过带有 Accept: 标头集的请求（POST 或 GET），那么它会失败并出现 406 错误：

```
$ curl -X GET -H "Accept: application/json" http://localhost/test/tester
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>406 Not Acceptable</title>
</head><body>
<h1>Not Acceptable</h1>
<p>An appropriate representation of the requested resource /test/tester could not be found on this server.</p>
Available variants:
<ul>
<li><a href="tester.php">tester.php</a> , type application/x-httpd-php</li>
</ul>
</body></html> 
```

但是，如果我排除“接受：应用程序/json”，则请求执行时不会出错。

我尝试添加这个 test/tester.var（在与 test/tester.php 相同的目录中）：

```
URI: tester

Content-type: application/json
URI: tester.php 
```

我的意图是通过执行 tester.php 来指示 Apache 处理带有“Accept: application/json”的请求。但这对我没有帮助（我还在我的 httpd.conf 文件中的“IfModule mime_module”下添加了“AddHandler type-map .var”并重新启动了服务器）。

'mod_security' 似乎没有配置，但我还是将以下 .htaccess 添加到了我的 test/ 目录中：

```
<IfModule mod_security.c>
SecFilterEngine Off
SecFilterScanPOST Off
</IfModule> 
```

这些是我在网上找到的解决方案，没有一个对我有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T03:29:52.507

我终于想出了一个解决办法！正如我所怀疑的，*mod_security* 与我的问题无关。

以下是我对*/etc/apache2/httpd.conf*所做的更改：

1.  通过取消注释“IfModule mime_module”部分中的“AddHandler type-map var”行来启用类型映射。
2.  将以下两行添加到“IfModule mime_module”部分：

    ```
    AddType application/x-httpd-php .php
    MultiviewsMatch Handlers Filters 
    ```

在我的 PHP 源目录中，我在与 tester.php 相同的目录中创建了一个*tester.var*，*其*内容为：

 *```
 Content-type: application/json
    URI: tester.php 
```

现在一切都好。*

# perl - Perl LWP：简单获取 URL 字符串变量

> ID：15538802
> 
> 赞同：0
> 
> 时间：2013-03-21T03:11:57.420
> 
> 标签：perl, url, get

```
 #!/usr/bin/perl

   use LWP::Simple;
   use warnings;
   $content = 0;
   $find = "webvis.edgesuite.net";
   open (HOSTLIST,"lists.hosts");
   @hosts = <HOSTLIST>;
   foreach $host(@hosts) {
   $results = `nslookup www.$host`;
   my $pos = index($results, $find);
   if ($pos > -1 )
   {
   my $url = "http://www.$host";
   $content = get ($url);
   print $content;
   my $pos1 = index($content, $url);
   if($pos1 > -1) {
    print "Content Match\n";
   } else {
    print "No Content Match\n";
   }
   $count++;
   chomp ($host);
   print "$count www.$host\n";

   }
   }
   close (HOSTLIST);
   exit($errorcode); 
```

使用上面的代码，我总是收到以下错误：

> IO::Socket::INET: 错误的主机名 'www.test.com

**如果将 $url 更改为：**

```
$url = 'http://www.test.com'; 
```

我从页面获取内容检索。

所以我的问题是如何将字符串变量传递给 get 属性，这样它就不会产生错误的主机名错误？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:46:28.953

当您从 中读取主机时`<HOSTLIST>`，每一行（可能是最后一行除外）的末尾都会有一个换行符，该换行符不属于域名，因此`chomp`在尝试执行任何重要操作之前必须使用该函数显式删除。

# oracle11g - 使用 unicode char set 选项安装 oracle 11g 时，char 和 nchar 数据类型有什么区别？

> ID：15538805
> 
> 赞同：8
> 
> 时间：2013-03-21T03:12:28.280
> 
> 标签：oracle11g

我使用 unicode char set 选项安装 oracle 11g。而且我发现我可以将 unicode 字符插入 CHAR 数据类型列。所以我的问题是：使用 unicode 选项安装 oracle 11g 时，CHAR 和 NCHAR 数据类型有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T12:18:40.883

有两个主要区别。

1.  长度语义的默认值。默认

    `CHAR(30) != NCHAR(30)` 但是 `CHAR(30 CHAR) = NCHAR(30)`。

    默认长度语义（由 NLS_LENGTH_SEMANTICS 参数指定）用于 CHAR 但不用于 NCHAR。此参数的默认值为字节。NCHAR 的长度始终以字符为单位。这很重要，因为 NCHAR(30) 将始终包含 30 个 unicode 字符 - CHAR(30 CHAR) 也是如此 - 但 CHAR(30) 默认情况下仅包含 30 个字节，这可能等于也可能不等于 30 个 unicode 字符。

2.  AL32UTF8（数据库字符集 unicode 默认值）和 AL16UTF8（NLS_NCHAR_CHARACTERSET 默认值）不等效。两者都是可变长度的 unicode 字符集，但存储字符不同，因此两者之间的存储要求有所不同，前者使用每个字符 1、2、3 有时 4 个字节，而后者使用每个字符 2 有时 4 个字节）。您的里程将根据您存储的字符而有所不同。

    此外，在许多客户端应用程序和某些 Oracle 组件中，NCHAR 支持受到限制，因此如果您使用 AL32UTF8 作为数据库字符集，Oracle 的建议是坚持使用 CHAR 而根本不使用 NCHAR。

# python - 如何将整个字符串写入 Python 中的文件以及文件在哪里？

> ID：15538810
> 
> 赞同：3
> 
> 时间：2013-03-21T03:12:52.453
> 
> 标签：python, string, file, format

我正在做一个关于文本格式和对齐（文本换行）的作业，我需要将我的格式化字符串写入新文件。但是，一旦我写入文件（或认为我已经写入），该文件会去哪里？它实际上是在我的桌面上创建一个文件还是我很愚蠢？

这是我的代码：

```
txtFile = open("Output.txt", "w")
txtFile.write(string)
txtFile.close()

return txtFile 
```

干杯，

捷通

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:17:57.703

文本被写入工作目录（通常是执行脚本的目录）中名为“Output.txt”的文件。

要显示工作目录，您可以使用：

```
>>> import os
>>> os.getcwd()
'/home/adam' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:15:12.313

当您在不指定文件路径的情况下打开文件时，该文件将在 python 脚本中创建[`working directory`](http://en.wikipedia.org/wiki/Working_directory)。

通常这是您的脚本的位置，但有时它可能是[不同的位置](https://superuser.com/questions/396394/how-do-i-set-an-executables-working-directory-via-the-command-line-prior-to-ex)。

python 中的[os](http://docs.python.org/2/library/os.html)模块将提供检查和更改 python 本身的工作目录的功能。
最为显着地：

```
os.chdir(path)
os.fchdir(fd)
os.getcwd() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T03:14:15.917

它将在您执行脚本的同一目录中创建一个名为“Output.txt”的新文件。如果您所在的目录对您的用户没有适当的权限，这可能意味着无法写入该文件。

# javascript - 相对“交叉”百分比计算

> ID：15538811
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:13:01.063
> 
> 标签：javascript, math

我有这个数学问题。我需要知道公式才能得到这样的东西：

```
50% of (x) = 150% of 70
100% of (x) = 100% of 70
150% of (x) = 50% of 70
200% of (x) = 25% of 70
... 
```

这似乎很容易，但我被这个小问题困住了。请注意，`(x)`是一个变量，与此计算无关。

有关更多信息，我正在计算图像的偏移量。偏移量需要与调整大小相关。下面是一个例子（宽度测试是1920px，原始偏移是70px）：

```
50% of 1920 = 150% of 70 = 105
100% of 1920 = 100% of 70 = 70
150% of 1920 = 50% of 70 = 35
200% of 1920 = 25% of 70 = 17,5
... 
```

最终代码是在 javascript 中。

*** 编辑 ***

事实上，我只需要了解我如何以同步方式增加一个值并同时减少另一个值。

```
...
25% ==> 200%
50% ==> 150%
100% ==> 100%
150% ==> 50%
200% ==> 25%
... 
```

有渲染（对不起，它制作得很快） ![就是这样渲染](../Images/8c581712b115ce61bb22160e5c1ffa9b.png)

事实上，对于我的计算，“70”是一个常数。我的图像越大 (>100%)，我的偏移量就需要更小。这也适用于倒置情况（我的图像较小 <100%，我的偏移量需要更大）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:24:08.127

如果您需要找到 x 等于什么（这是方程式的惯例）：70 / 100 * 50（即我们计算 70 的 150%）/50（这是 x 的 1%）* 100

UPD：根据更多评论，我认为您最好使用一些硬编码值而不是计算值。

```
`var myPercentage = 0;

if (initPercentage <= 50) {
    myPercentage = 150;
} else if (initPercentage > 50 and initPercentage <= 100) {
    ...
}` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:38:26.060

恐怕它至少不是一个线性方程：

```
function test(x){return x*-1 + 200}
alert(test(50)) // okay 150
alert(test(100)) // okay 100 
alert(test(150)) // okay 50
alert(test(200)) // wrong 0 
```

[http://jsfiddle.net/basarat/Skss2/](http://jsfiddle.net/basarat/Skss2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:38:50.443

你有一个基本的数学问题：

```
a% * x = b% * 70 
```

求解 x，首先展开项（* 和 / 的顺序在这里不重要）：

```
a * x / 100 = b * 70 / 100 
```

两边乘以 100

```
a * x = b * 70 
```

两边除以a：

```
x = b * 70 / a 
```

所以现在给定 a 和 b 你可以求解 x。让`a = 50`和`b = 150`，然后：

```
x = 150 * 70 / 50
x = 210 
```

测试：70 的 150% = 105 和 210 的 50% = 105，所以它有效。

**但是**你有：

```
100% of (x) = 100% of 70 
```

这意味着`x == 70`，这是不一致的，然后：

```
150% of (x) = 50% of 70 
```

这意味着`x = 23.33333333`, 这又是不一致的。

您可以做一个最小二乘解决方案来计算出 x 的最佳值，但这些值很可能分布得如此广泛，它不会有太大用处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T02:51:54.127

是的..我解决了我的问题，但我的逻辑是错误的。对不起。我使用 Excel 来查找我的公式。`

# cloudflare - Cloudflare 可以为匿名用户缓存 HTML 但未登录用户吗？

> ID：15538812
> 
> 赞同：4
> 
> 时间：2013-03-21T03:13:10.690
> 
> 标签：cloudflare

我们有一个网站，匿名用户内容通常是静态的（每小时更新一次），登录用户的内容因每个用户而异，并且经常更新。

是否可以配置 cloudflare，以便为匿名用户缓存 HTML，但不为登录用户提供相同的 URL？

我们可以设置任何相关的缓存标头吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T15:07:43.140

我一直在同样的情况下苦苦挣扎，据我所知，没有办法，在 cloudflare 中你可以设置页面规则，但那些只会查看 URL 本身。

所以我看到的唯一解决方案是为每种用户设置不同的 URL（一些额外的参数或者可能是子域），然后您可以轻松设置规则以手动强制缓存过期时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T13:55:04.467

我不确定这是否可行，但我能想到的唯一方法是通过 HTTP/HTTPS，因为您可以在 CloudFlare 页面规则中使用它。

因此，如果您将 WordPress FORCE_SSL_ADMIN 常量设置为 true，然后将所有登录的用户 URL 请求重定向到页面的 HTTPS 模式，这可能会成功，从而可以绕过 CloudFlare 缓存？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-09T22:22:47.553

除非您处于企业计划级别，否则这是不可能的。

[https://www.cloudflare.com/plans/](https://www.cloudflare.com/plans/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-02-01T02:59:15.120

从[这里开始的解决方案](http://www.andrews.com/cloudflare-tip-cache-everything-except-member-only-info/)

在页眉中添加私有缓存控件：

```
//recommended by cloudflare for logged in users
if ( is_user_logged_in() ) {
header(‘Cache-Control: private, max-age=3600’);
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2017-07-18T14:00:52.820

是的。[Cloudflare 表示](https://support.cloudflare.com/hc/en-us/articles/202775670-How-Do-I-Tell-CloudFlare-What-to-Cache-)它将尊重不请求缓存的元标签，因此只需将这些标签添加到页面的标题部分以供登录用户使用。

示例（使用 smarty）

```
{if $loggedin}
<meta http-equiv="cache-control" content="no-cache" />
{/if} 
```

（使用 PHP）

```
if($loggedin)
  {
  echo "<meta http-equiv=\"cache-control\" content=\"no-cache\" />";
  } 
```

# ajax - 链接到已加载到 div 中的 html 文档部分

> ID：15538813
> 
> 赞同：0
> 
> 时间：2013-03-21T03:13:14.013
> 
> 标签：ajax, html, hyperlink, hashtag

我的网站有一个“nav”div，带有指向不同 html 文件的链接，一个带有静态信息的“sidebar”div，以及一个“content”div，不同的 html 文件被加载到其中。我还在标题中设置了我的 url 基础。其中一个 html 文件是一个长文档，我希望能够包含指向该文件部分的链接。所以我命名了部分标题并使用主题标签链接到它们：

投资组合.html 片段：

```
<BODY>
<a id="top"></a>
<header>
<a href="#pulseox">PULSE OXIMETRY IN ZAMBIA</a><BR>
<a href="#dengue">DENGUE DIAGNOSIS IN NICARAGUA</a><BR>
<a href="#retina">EYE HEALTH IN INDIA</a><BR>
<a href="#mas531">MAS.531 COMPUTATIONAL CAMERA AND PHOTOGRAPHY</a><BR>
<a href="#mass60">MAS.S60 HANDS ON FOUNDATIONS</a><BR>
<hr>
</header>
<header><a id="pulseox">PULSE OXIMETRY IN ZAMBIA</a></header>
<img src="pulseOx.PNG" width="500px"><BR>
lorem ipsum
</BODY> 
```

当我自己打开 html 时，这非常有效。但是，当它被加载到元 html 文件中的“内容”div 中时，它会尝试将我带到`<myurlbase>#pulseox`. 如何使`<a href="#pulseox">`链接引用“内容”div 中的 html 文档？我没有在portfolio.html 文件中设置基本网址。

这是我的元 html 文档，如果有帮助的话：

```
<HTML>
<HEAD>
<link rel="stylesheet" type="text/css" href="index_test.css" />
<base href="http://myurl/" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        $("#content").load("home.html");

        $(".nav-1").click(function(){
            $("#content").load("home.html");
        });
        $(".nav-2").click(function(){
            $("#content").load("about.html");
        });
        $(".nav-3").click(function(){
            $("#content").load("portfolio.html");
        });
        $(".nav-4").click(function(){
            $("#content").load("cv.html");
        });
    });
</script>
</HEAD>
<BODY>
<div id="nav">
 <ul>
  <li><a class="nav-1">HOME.</a></li>
  <li><a class="nav-2">ABOUT.</a></li>
  <li><a class="nav-3">PORTFOLIO.</a></li>
  <li><a class="nav-4">CV.</a></li>
 </ul>
</div>
<div id="sidebar">
myname
<BR><BR>
</div>
<div id="content"></div>
</BODY>
</HTML> 
```

# c++ - 什么时候调用_findclose？

> ID：15538814
> 
> 赞同：1
> 
> 时间：2013-03-21T03:13:16.730
> 
> 标签：c++, c

**注意：由于问题已解决，我已在原始帖子中添加了评论。**

根据“ [http://msdn.microsoft.com/en-us/library/6tkkkc1y%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/6tkkkc1y%28v=vs.90%29.aspx) ”，它是这样表述的：

*您必须在使用完 _findfirst 或 _findnext 函数（或任何变体）后调用 _findclose。这可以释放应用程序中这些函数使用的资源。*

**--comment：**含糊不清，但微软想说的是：有些用户只需要找到第一个文件（他们不需要调用_findnext），然后调用_findclose；一些用户调用了_findnext（他们必须已经调用了_findfirst），用完之后调用_findclose。实际上_findnext可以被多次调用，而_findclose只负责一个句柄，由_findfirst创建。

以下是一段广泛用于列出目录中文件的代码。——评论：是对的。

例如，如果目录中有2个文件和1个目录，那么：

```
.
..
ddd
file1.txt
file2.txt 
```

_findfirst 被调用一次。句柄对应的fileinfo是系统目录“.” （对吗？） **——评论：**不。句柄是一组文件+目录，文件信息充当“光标”。（fileinfo 总是包含“name”字段，我敢打赌 _findnext 的实现是使用“name”在句柄指定的一组文件+目录中查找下一个）

_findnext 被调用 4 次。（第一个参数总是对应于“.”的句柄，对吗？） **--comment:** yes + no。第一个参数始终是同一个句柄；句柄不对应于任何文件信息，而是对应于其中的一组。

我的问题是：

**将“_findclose”称为一次就足够了吗？** * *--评论：* *是的。

**如果 _findnext 不会更改句柄值，它如何“记住”从哪里开始查找下一个文件（或目录）？（对不起，也许我在考虑“链表”模式。）** * *--comment:* * 我敢打赌使用的是文件信息的名称字段。就像在 Windows 资源管理器中一样，我们对文件夹中的内容进行排序，给定文件名，我们可以知道它们在列表中的位置，因此我们可以“查找下一个”。

**调用 _findclose 比需要的次数多有什么害处吗？（比如崩溃什么的）** * *--comment:* * 一个愚蠢的问题。对不起！

**还是下面的代码完全错误？如果是，实现它的正确方法是什么？** --这是正确的代码。

```
// List the files in the directory
intptr_t file;
_finddata_t filedata;
file = _findfirst(desc.c_str(),&filedata);
if (file != -1)
{
  do
  {
    cout << filedata.name << endl;
    // Or put the file name in a vector here
  } while (_findnext(file,&filedata) == 0);
}
else
{
  cout << "No described files found" << endl;
}
_findclose(file); 
```

我之所以问这个问题是因为我遇到了一个问题，即应用程序正在冻结一个目录，如果该进程处于活动状态，则无法删除该目录。但是，我可以保证“_findfirst”的每个返回值都会调用“_findclose”。如果我在调用“_findnext”之后添加“_findclose”，那么将完美地解决问题。你能帮我解释一下吗？

**——评论：**原谅。不要太容易使用“保证”。这就是错误所在。

注意：我理解什么是句柄没有问题，比如打开文件，读/写/读/写...，关闭文件句柄。我只是发现描述这三个 API 的文档很模糊。

**--comment：**去提高你的英语。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:16:16.273

您对 _findclose 的调用应该与对的调用相匹配`_findfirst`——即，每次调用 时`_findfirst`，都应该对`_findclose`.

在上面的代码中，由于您只有一次对 的调用`_findfirst`，因此只有一次对 的调用是正确的`_findclose`。

如果您正在对子目录进行递归搜索，那么`_findfirst`当您下降层次结构时，您最终会得到多个调用，并`_findclose`在您完成并向上返回层次结构时匹配调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:16:03.747

完成后，您只需调用 _findclose 一次。

在 Windows 上，如果一个目录是您进程的当前目录，它可能会被锁定。尝试调用[_chdir](http://msdn.microsoft.com/en-us/library/bf7fwze1%28v=vs.90%29.aspx)。

如果这不起作用...您是否打开了您正在搜索的目录中的任何文件？打开的文件也可能会锁定目录。

让[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)查看您的应用程序可能会很有用。它可以肯定地告诉您您打开了哪个手柄。

# c# - Windows Phone 使 Segoe UI 符号不显示为表情符号

> ID：15538825
> 
> 赞同：3
> 
> 时间：2013-03-21T03:14:38.520
> 
> 标签：c#, xaml, windows-phone-8, windows-phone, emoticons

我想在我的 C#/XAML Windows Phone 8 应用程序中使用飞机 Segoe UI 符号。

我将符号插入到我的页面中，如下所示：

```
<TextBlock>&#x2708;</TextBlock> 
```

该符号正确显示在 Visual Studio 的“预览”窗格中：

![Segoe UI 飞机符号正确](../Images/b6d222b33efb8f8647dd13f786976931.png)

但是，当我在模拟器或手机上运行应用程序时，它看起来像这样：

![Segoe UI 飞机符号不正确](../Images/6ecc0e698cc0875db577741eb24c9d1a.png)

此符号看起来与表情键盘中的符号相同：

![键盘上的飞机符号](../Images/77a66da8995c6fb6e98a174910f2a890.png)

**如何使用 Segoe UI 飞机符号，使其完全显示为白色，而不是表情符号键盘中显示的绿色？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T11:32:07.613

[`DisplayColorEmoji`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.media.textoptions.displaycoloremoji%28v=vs.105%29.aspx)您可以通过将值设置为 False（默认为 True）来防止这种行为：

```
<TextBlock TextOptions.DisplayColorEmoji="False">&#x2708;</TextBlock> 
```

这将停止您看到的转换。

# mysql - MySQL在UNION表中查找重复行

> ID：15538828
> 
> 赞同：0
> 
> 时间：2013-03-21T03:14:54.857
> 
> 标签：mysql, duplicates

如何在以下查询中找到重复的电子邮件？

```
SELECT b_email AS email FROM user WHERE status = 3 AND b_email != '' 
UNION (SELECT c_email AS email FROM user WHERE status = 3 AND c_email != '') 
UNION (SELECT user_email AS email FROM user WHERE status = 3 AND user_email != '') 
UNION (SELECT user_email AS email FROM sub_user WHERE status = 3 AND user_email != '') 
UNION (SELECT su_email AS email FROM sub_user WHERE status = 3 AND su_email != '') 
ORDER BY email ASC 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:31:52.377

您的查询结果不会有重复项，因为`UNION`删除了重复项。要保留重复项，请`UNION ALL`改用：

```
SELECT b_email AS email FROM user WHERE status = 3 AND b_email != ''
UNION ALL SELECT c_email AS email FROM user WHERE status = 3 AND c_email != ''
... 
```

要找出重复的电子邮件地址，您可以执行以下操作：

*   更改您的查询以返回*所有*电子邮件地址的列表，包括重复项（这意味着使用`UNION ALL`而不是`UNION`）
*   用一个按电子邮件地址计数的外部查询包装它
*   将外部查询结果限制为计数为两个或更多的电子邮件地址

以下是如何做到这一点（注意这是假设您发布的查询有效）：

```
SELECT email, COUNT(*)
FROM (
  SELECT b_email AS email FROM user WHERE status = 3 AND b_email != '' 
  UNION ALL SELECT c_email AS email FROM user WHERE status = 3 AND c_email != ''
  UNION ALL SELECT user_email AS email FROM user WHERE status = 3 AND user_email != ''
  UNION ALL SELECT user_email AS email FROM sub_user WHERE status = 3 AND user_email != ''
  UNION ALL SELECT su_email AS email FROM sub_user WHERE status = 3 AND su_email != ''
) EmailGlom
GROUP BY email
HAVING COUNT(*) > 1 
```

您的结果将是在内部查询中多次出现的每个电子邮件地址。

# indexing - 索引代理管理控制台在哪里

> ID：15538834
> 
> 赞同：1
> 
> 时间：2013-03-21T03:15:14.870
> 
> 标签：indexing, documentum, emc

我想了解在哪里可以访问 EMC Documentum 中的 Index Agent Admin Console。

我一直在网上查看许多帖子，但没有一个准确解释我如何访问它。其中一个帖子建议：

```
1\. Login to Index Agent Admin console through http://localhost:(index agent port     no.)/IndexAgent(no.)/login.jsp 
```

我不知道索引代理端口号是什么。他们谈论以及我如何找到它。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:38:14.000

视情况而定，端口号由用户在安装索引代理时设置。这还取决于您是在谈论 FAST 还是 xPlore。

我相信默认端口`9081`适用于使用您上面的 url 的 FAST 索引代理。

对于 xPlore，默认配置 url 是`http://<HOST_NAME>:9200/IndexAgent`.

如果这对您没有帮助，您可能想看看这里：[https ://community.emc.com/community/support/documentum](https://community.emc.com/community/support/documentum)

# css - Twitter Bootstrap 按钮组项目被屏幕截断

> ID：15538835
> 
> 赞同：6
> 
> 时间：2013-03-21T03:15:19.710
> 
> 标签：css, twitter-bootstrap

我正在从页面查看区域中获取我的按钮下拉列表的一部分。

![在此处输入图像描述](../Images/9de085536298e5d8d42f3c8b62fbdc8a.png)

我正在使用标准引导代码：

```
<div class="btn-group">
    <button class="btn btn-info">Log In</button>
    <button class="btn btn-info dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
    <ul class="dropdown-menu">
      <li><a href="#">Log In with Facebook</a></li>
      <li class="divider"></li>
      <li><a href="#">Create New Account</a></li>
    </ul>
</div> 
```

我在页面底部也有类似的问题，我有另一个按钮下拉菜单，然后下拉部分打开，它不会自动调整自己，我必须向下滚动才能查看所有选项。

有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-21T11:57:58.043

我猜你没有`.btn-group`以正确的方式定位。

将其放入`.navbar-inner`-div 并添加 class `.pull-right`。

演示[JSFIDDLE](http://jsfiddle.net/handtrix/MgcDU/8244/)

```
<div class="navbar">
  <div class="navbar-inner">
      <a class="brand" href="#">Title</a>
      <ul class="nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
      </ul>
       <div class="btn-group pull-right">
        <button class="btn btn-info">Log In</button>
        <button class="btn btn-info dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
        <ul class="dropdown-menu">
          <li><a href="#">Log In with Facebook</a></li>
          <li class="divider"></li>
          <li><a href="#">Create New Account</a></li>
        </ul>
      </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T15:52:52.987

您可以进行以下操作：

```
.dropdown-menu {
   left: -80px;
} 
```

我不知道为什么，但向左拉没用。

# c++ - 尝试在 Dev C++ 之外运行 Allegro 5 程序会导致错误

> ID：15538836
> 
> 赞同：0
> 
> 时间：2013-03-21T03:15:24.683
> 
> 标签：c++, dll, dev-c++, allegro5

我有一个使用 Allegro 5.0.5 的程序。这是我在学习如何使用图书馆的教程时制作的基本射击游戏。我使用开发包在 Dev C++ 中安装了 Allegro 5，当我创建一个新项目时，我选择了 Allegro 5 应用程序，它会自动将以下内容添加到链接器中：

*   -lallegro-5.0.5-monolith-mt
*   -lshlwapi

该程序在 Dev C++ 中编译并运行良好，但是当我尝试在 IDE 之外运行可执行文件时，出现错误：

> 程序无法启动，因为您的计算机缺少 allegro-5.05-monolith-mt.dll。尝试重新安装程序以解决此问题。

现在我的第一个想法是哦，我需要将该 dll 文件包含在与可执行文件相同的文件夹中，但是我无法在我的计算机上找到这个文件。但如果 Dev C++ 正在使用它，它必须在那里。

我尝试下载整个 Allegro 5 文件夹以查看文件是否在其中，但不是。

在阅读它之后，我尝试手动在链接器部分中包含其他条目，据称这些条目是制作 exe 的静态版本所必需的。然而这并没有奏效。

我还读到，如果你有一个单体版本，如果你 `#define ALLEGRO_STATICLINK`之前有任何 allegro 包含语句，它可以编译为静态库。那也编译了，但仍然没有解决问题。

似乎没有其他人有同样的问题，所以如果有人能提供帮助，将不胜感激。

# actionscript-3 - ActionScript 中的联合类型？

> ID：15538837
> 
> 赞同：1
> 
> 时间：2013-03-21T03:15:26.047
> 
> 标签：actionscript-3, types

你知道 ActionScript 是否支持联合类型吗？例如，类似的东西：

```
function foo(x:ClassA Union classB) {
  //x is classA or classB 
  //do something
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:10:59.243

Actionscript 3 不支持 c++ 风格的 mixin 类层次结构。

As3 而是使用在许多面向对象语言中使用的**接口**方法。

接口通常是功能的抽象模板，允许在与类层次结构无关的对象之间进行通信。

如：

```
public interface IBox{ 
   function addContentToBox(contentName:String, content:*) Boolean;
   function boxHasContent(contentName:String): Boolean;
   function getContentFromBox(contentName:String): *;  
} 
```

当你在 as3 中定义一个类时，如果你想让它实现你写的 IBox 接口

```
class YourClass extends anotherClass implements IBox { 
```

（仅在扩展另一个类时才需要扩展 anotherClass）

**现在您必须为YourClass中****IBox**中声明的函数编写代码。

 **那么问题是什么？嗯，首先

```
a = new YourClass(parameters etc);
if(a is YourClass)trace('YIPPE');
if(a is IBox)trace('YAY'); 
```

你现在有了 YIPPE YAY 的踪迹。

(xxx is IBox) 对所有实现 IBox 的类的所有实例都为真。

您可以将任何具有实现 IBox 的类的不相关对象传递给期望 IBox 的函数。

有关详细信息，请参阅[Adob​​e as3 接口文档](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f41.html)。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:23:48.033

最接近的方法是拥有一个基类`A`并从中派生两个类`B`和`C`. 然后您可以将其中一个`B`或`C`实例传递给函数`foo`。

```
class classA {}

class classB extends classA {}

class classC extends classA {}

function foo(x:ClassA)
{
    if(x is classB)
        trace("x is classB");
    else if (x is classC)
        trace("x is classC");
}

var c:ClassC = new ClassC();

foo(c); 
```

尽管我不建议检查类的类型并基于此执行代码，但使用接口可能会帮助您，但我们需要知道您要做什么。**

# cakephp - CakePHP 在自关联模型的 Parent ID 字段中保存新创建的 ID

> ID：15538838
> 
> 赞同：2
> 
> 时间：2013-03-21T03:15:28.753
> 
> 标签：cakephp

我有一个父/子自关联表，当 id = parent_id 时，该 id 是它自己的父级。但是我无法从添加操作/视图将数据保存到我的表中

从 add.ctp 视图 - 添加新记录时，我从下拉框中选择 parent_id 并输入名称。

```
<?php
    echo $this->Form->input('parent_id', array('empty' => 'No Parent'));
    echo $this->Form->input('name');
?> 
```

如果用户选择“No Parent”，这意味着我想要 parent_id = id，其中 id 是保存时在 DB 中自动创建的唯一 ID。

这是在选择“No Parent”时传递给 $this->request->data 的内容。

```
array(
    'Item' => array(
        'parent_id' => '',
        'name' => 'testname'
    )
) 
```

我试图在 beforeSave 中设置 parent_id = id 但由于 id 尚不存在，因此没有任何内容可以分配 parent_id 。我也尝试过先调用“父”模型保存并在控制器中保存所有，但这些也不起作用。

控制器

```
public function add() {
    if ($this->request->is('post')) {
        $this->Item->create();

        //have tried calling parent model in self association first but 
        //if ($this->Item->ParentItem->save($this->request->data)) {
        if ($this->Item->saveAll($this->request->data)) {

            $this->Session->setFlash(__('The item has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The item could not be saved. Please, try again.'));
        }
    } 
```

Item.php/模型关系

```
public $belongsTo = array(
  'ParentItem' => array(
  'className' => 'Item',
  'foreignKey' => 'parent_id',
  'conditions' => '',
  'fields' => '',
  'order' => ''
  )
);

public $hasMany = array(
  'ChildItem' => array(
  'className' => 'Item',
  'foreignKey' => 'parent_id',
  'dependent' => false,
  'conditions' => '',
  'fields' => '',
  'order' => '',
  ) 
); 
```

如何获取刚刚创建/保存的 ID 并将其保存到另一个字段，在本例中为 parent_id？

更新：我一直在努力解决这个问题，我已经使用 getInsertId() 来获取最后插入的 Id，并且我试图将其保存到 parent_id 中，但是有一些东西可以防止这种情况发生。我已删除所有模型验证以确保不是那样。但是蛋糕（或我的关联设置）中是否有一些不允许 parent_id = id 的东西（即一行是它自己的父级？

这是我添加操作中的最新代码...这会将一行保存到数据库中，但没有父 ID。然后我尝试使用添加操作进行编辑并设置 parent_id = id，但即使是编辑也不允许保存。

```
public function add() {
    if ($this->request->is('post')) {
        $this->Item->create();
        if ($this->Item->save($this->request->data)) {
            $last_id = $this->Item->getInsertId();
            $this->Item->saveField('parent_id', $last_id);
            $this->Session->setFlash(__('The item has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The item could not be saved. Please, try again.'));
        }
    } 
```

我也尝试调用 $this->Item->ParentItem->save(), saveAll, 'deep' => true，但仍然没有任何东西允许我更新 parent_id 列。一行哥

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:49:40.850

在您的关联模型中您可以设置`foregin_key`为`parent_id`，并将自动填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:40:16.970

So the problem I was having... trying to set a parent_id = id (making id it's own parent basically) in a self join model is due to this piece of code in my Model file

```
public $actsAs = array('Tree'); 
```

After reading through the Tree Behavior again, I realized that $this->Model->save (or saveField) does not really work well with Tree structures and updating parent IDs. Should use the behaviors functions instead form my understanding. Also the TreeBehavior expects some parent_ids to be null (at least top level parent_ids), so if I were to leave this as a tree, the ids with a null parent_id would be considered the parent.

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)

"The parent field must be able to have a NULL value! It might seem to work if you just give the top elements a parent value of zero, but reordering the tree (and possible other operations) will fail."

So I need to decide if I want to use tree behavior or have simple parent/child relationship without using Tree... think I will do the later as I don't have a need for multilevel tree, just a parent and one level of children.

Thanks for replies.

# php - 提交按钮不起作用

> ID：15538839
> 
> 赞同：-3
> 
> 时间：2013-03-21T03:15:32.840
> 
> 标签：php, html, wordpress, button, submit

我是新的网页设计师，并使用 Dreamweaver 制作了我的联系页面。当我上传我的博客时，提交按钮不起作用，WordPress 中的技术支持说我应该编辑 html 页面中的空白代码。有人可以帮我吗？这是我的 HTML 页面（contact.html）：

```
 <td width="49%" height="336" align="left" valign="middle">
     <form id="form1" name="form1" method="post" action=" wp-includes/pluggable.php">
     <p>
       <label for="name">Name</label>
       <input type="text" name="name" id="name" />
     </p>
     <p>&nbsp;</p>
     <p>
       <label for="email">Email</label>
       <input type="text" name="email" id="email" />
       </p>
     <p><br />
       Comment<br />
       <textarea name="comment" id="comment" cols="45" rows="5"></textarea>
       </p>
     <p>
       <input type="submit" name="submit" id="submit" value="Submit" />
       <input type="reset" name="reset" id="reset" value="Reset" />
     </p>
   </form></td> 
```

这是我的 php 页面：（wp-includes/pluggable.php）我刚刚在那里输入了我的电子邮件地址：

```
// From email and name
// If we don't have a name from the input headers
if ( !isset( $from_name ) )
    $from_name = 'WordPress';

/* If we don't have an email from the input headers default to wordpress@$sitename
 * Some hosts will block outgoing mail from this address if it doesn't exist but
 * there's no easy alternative. Defaulting to admin_email might appear to be another
 * option but some hosts may refuse to relay mail from an unknown domain. See
 * http://trac.wordpress.org/ticket/5007.
 */

if ( !isset( $from_email ) ) {
    // Get the site domain and get rid of www.
    $sitename = strtolower( $_SERVER['SERVER_NAME'] );
    if ( substr( $sitename, 0, 4 ) == 'www.' ) {
        $sitename = substr( $sitename, 4 );
    }

    $from_email = 'some_email@somewhere.com' . $sitename;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:19:41.260

尝试从以下位置删除表单操作中的空格：

```
<form id="form1" name="form1" method="post" action=" wp-includes/pluggable.php"> 
```

应该是这样的：

```
<form id="form1" name="form1" method="post" action="wp-includes/pluggable.php"> 
```

# javascript - Bootstrap 崩溃在 IE 中的第一次点击时不会触发

> ID：15538842
> 
> 赞同：2
> 
> 时间：2013-03-21T03:15:57.883
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用没有手风琴标记的引导折叠。

此功能在 FF、Chrome 等中运行良好。在 ie7、8 和 9 中运行良好，但仅在我第二次单击“触发器”时。

```
$('.trigger').click(function(e){
    e.preventDefault();
    $(this).closest('.item').find('.item-dropdown').collapse('toggle');
}); 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T09:00:20.330

发现了这个问题：

[Bootstrap 2.1.1“可折叠”未在 IE 中首次打开](https://stackoverflow.com/questions/12787119/bootstrap-2-1-1-collapsible-not-opening-first-time-in-ie)

“这个问题与 IE 无关：这将发生在任何不支持转换的浏览器上（或者如果它被停用）。

那是因为您需要先初始化插件。如果不这样做，它会在第一次单击时初始化并切换折叠：默认初始化会切换折叠 (doc)，如果没有转换，折叠会连续切换两次而不会被看到。”

# android - android从活动中获取数据并以html显示

> ID：15538843
> 
> 赞同：0
> 
> 时间：2013-03-21T03:15:59.443
> 
> 标签：android, html, webview, parameter-passing

我想从我的活动中放入变量并将其显示在 html 中。下面是我如何将变量插入 webview 但我不确定我应该如何从 html 获取数据并以“textview”形式显示它？

**编辑**

**爪哇**

```
 webView = (WebView)findViewById(R.id.webView);
    webView.setWebViewClient(new WebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.getSettings().setDatabaseEnabled(true);
    webView.getSettings().setDatabasePath("/data/data/com.example.hybrid/hybrid_user");
    webView.loadUrl("file:///android_asset/www/index.html");
    webView.loadUrl("javascript:callFromActivity(\""+userid+"\")"); 
```

**html**

```
<body>
<form>
    <fieldset>
        <legend>Hybrid Application</legend>
        <p>
            <label>UserName: </label> 
        </p>
        <p id="mytext">Hello!</p>
        <p>
            <label>Mobile Number :</label>
            <input type = "text"
                        id = "mobileNum" />
        </p>
            <button type="button" 
            onclick="updateRecord()">Submit</button>    
                <div id="output"></div> 
    </fieldset>
</form> 
```

```
 <script>
    function errorHandler(transaction, error){
        alert('Error:'+error.message+' (Code '+error.code+')');
        return true;
    }
    window.onerror = errorHandler;
    var shortName = 'hybrid_user';
    var version = '1.0';
    var displayName = 'Hybrid Database';
    var maxSize = 65536;
    var db = openDatabase(shortName, version, displayName, maxSize);

    function updateRecord(id, textE1){
        database.transaction(function(tx){
            tx.executeSql("UPDATE hybrid_user SET mobile = ? WHERE userid = ?", [textE1.innerHTML, id], null, onError);
        })
    }

    function callFromActivity(msg){
        document.getElementById("mytext").innerHTML = msg;          
    }
</script> 
```

我是 html 新手，我不知道我的代码有什么问题，它没有`userid`在 html 页面中显示出来。任何意见和答案将不胜感激！

**编辑更新**

```
 webView.loadUrl("javascript:callFromActivity(\""+userid+"\")"); 
```

显然是系统没有经过这行代码。无论如何都要通过这段代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:10:49.583

尝试更改 innerHTML 的值，如下所示：

```
function callFromActivity(msg) {
   document.getElementById("mytext").value = msg;          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T02:44:07.197

```
 webView.setWebViewClient(new WebViewClient(){

        @Override
        public void onPageFinished(WebView view, String url){
            webView.loadUrl("javascript:callFromActivity(\""+userid+"\")");
        }
    }); 
```

我用这个解决了我的问题。页面加载完成后，它将执行上述代码并`userid`从活动中获取。

# lua - 在电晕中缩放精灵表中的图像

> ID：15538846
> 
> 赞同：0
> 
> 时间：2013-03-21T03:16:10.973
> 
> 标签：lua, scaling, coronasdk, sprite-sheet

我刚刚开始在电晕中使用精灵表，所以这可能是一个基本问题，但我找不到任何有关它的信息。

无论如何，是否可以缩放精灵表内的图像？例如，第 1 帧图像 1 为 100x25，第 2 帧图像 2 将设置为 100x50，第 3 帧图像 3 为 150x50。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T11:59:55.633

你可以试试 sprite.newSpriteMultiSet() 函数这里是链接： [http ://docs.coronalabs.com/api/library/sprite/newSpriteMultiSet.html](http://docs.coronalabs.com/api/library/sprite/newSpriteMultiSet.html)

# excel - 搜索特定的列标题名称，复制列并粘贴以附加到另一个 wookbooksheet

> ID：15538847
> 
> 赞同：1
> 
> 时间：2013-03-21T03:16:15.360
> 
> 标签：excel, excel-2010, vba

我的工作簿有一张、两张或三张。每个工作表至少可以包含以下列标题名称之一：“Tel”或“Number”。

如何使用这些列标题名称复制整个列（仅数据）并将它们（作为具有相同列标题名称的仅一列中的附加）粘贴到 VBA 代码（工作表模块）所在的另一个工作簿工作表中。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:00:33.090

```
Option Compare Text

Sub search_and_append()

    Dim i As Long
    Dim width As Long
    Dim ws As Worksheet
    Dim telList As Object
    Dim count As Long
    Dim numList As Object
    Set telList = CreateObject("Scripting.Dictionary")
    Set numList = CreateObject("Scripting.Dictionary")

    ' search for all tel/number list on other sheets
    ' Assuming header means Row 1
    For Each ws In Worksheets
        If ws.Name <> Me.Name Then
            With ws
                .Activate
                width = .Cells(1, .Columns.count).End(xlToLeft).Column
                For i = 1 To width
                    If Trim(.Cells(1, i).Value) = "Tel" Then
                        Height = .Cells(.Rows.count, i).End(xlUp).Row
                        If Height > 1 Then
                            For j = 2 To Height
                                If Not telList.exists(.Cells(j, i).Value) Then
                                    telList.Add .Cells(j, i).Value, ""
                                End If
                            Next j
                        End If
                    End If
                    If Trim(.Cells(1, i).Value) = "Number" Then
                        Height = .Cells(.Rows.count, i).End(xlUp).Row
                        If Height > 1 Then
                            For j = 2 To Height
                                If Not numList.exists(.Cells(j, i).Value) Then
                                    numList.Add .Cells(j, i).Value, ""
                                End If
                            Next j
                        End If
                    End If
                Next
            End With
        End If

    Next

    ' paste the tel/number list found back to this sheet
    With Me
        .Activate
        width = .Cells(1, .Columns.count).End(xlToLeft).Column
        For i = 1 To width
            If Trim(.Cells(1, i).Value) = "Tel" Then
                Height = .Cells(.Rows.count, i).End(xlUp).Row
                count = 0
                For Each tel In telList
                    count = count + 1
                    .Cells(Height + count, i).Value = tel
                Next
            End If
            If Trim(.Cells(1, i).Value) = "Number" Then
                Height = .Cells(.Rows.count, i).End(xlUp).Row
                count = 0
                For Each tel In telList
                    count = count + 1
                    .Cells(Height + count, i).Value = tel
                Next
            End If
        Next
    End With

End Sub 
```

# java - 为什么我仍然使用尾递归斐波那契算法烧毁堆栈？

> ID：15538857
> 
> 赞同：2
> 
> 时间：2013-03-21T03:17:19.583
> 
> 标签：java, stack-overflow, dynamic-programming, tail-recursion, memoization

在 n=1000 之前堆栈溢出。是因为对 long[] 参数的引用，JVM 觉得需要保留每个堆栈帧（疯狂猜测），还是我做错了什么？

```
 public static void main(String[] args) {
        long start = System.currentTimeMillis();
        fibonacciMemoized(1000);
        long end = System.currentTimeMillis();
        System.out.println("\nTotal run time: " + (end-start));
    }

    public static void fibonacciMemoized(int n) {
        long[] fibMemos = new long[n+1];
        for (int i = 0;  i < fibMemos.length; i++) {
            fibMemos[i] = Long.MAX_VALUE;
        }
        long fibResult = fib(n, 1, 0, fibMemos);
        System.out.println(fibResult);
    }

    public static long fib(int n, long fibAcc, long fibPrev, long[] fibMemos) {
        if (fibMemos[n] != Long.MAX_VALUE){
            return fibMemos[n];
        } else if (n == 0) {
            return fibPrev;
        } else if (n == 1){
            return fibAcc;
        } else {
            long result = fib(n-1, fibAcc+fibPrev, fibAcc, fibMemos);
            fibMemos[n] = result;
            return result;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:21:31.410

我想这更像是一个答案而不是评论：

> 为什么我仍然使用尾递归斐波那契算法烧毁堆栈？

因为Java不支持尾调用消除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:31:27.327

记忆化的关键问题是记忆化函数的*后续*调用将使用相同参数的预计算值。

在您的代码中，您之前没有调用过该函数，因此没有以前的结果可以重用，并且您开始以 1000 的值调用它，这会在`fib()`with 的末尾进行递归调用`fib(n-1, fibAcc+fibPrev, fibAcc, fibMemos)`，因此您正在炸毁堆栈有 1000 个递归调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:27:13.720

尝试使用增加堆栈的选项来运行它，例如 java -Xss4m 或更多。

注意：使用 -Xss 设置每个线程的堆栈大小，这是一个非常糟糕的主意。

# perl - 如何使用变量和字符串的组合作为文件处理程序编写正确的名称？

> ID：15538858
> 
> 赞同：1
> 
> 时间：2013-03-21T03:17:20.863
> 
> 标签：perl

我想制作一个工具来将输入文件中的每一行分类为几个文件，但是在命名文件处理程序时似乎有一些问题，所以我无法继续，我该如何解决？

这是我的程序

```
ARGV[0] is the input file
ARGV[1] is the number of classes

#!/usr/bin/perl

use POSIX;
use warnings;

# open input file
open(Raw,"<","./$ARGV[0]") or die "Can't open $ARGV[0] \n";

# create a directory class to store class files
system("mkdir","Class");

# create files for store class informations
for($i=1;$i<=$ARGV[1];$i++)
{
    # it seems something wrong in here
    open("Class$i",">","./Class/$i.class") or die "Can't create $i.class \n";
}

# read each line and random decide which class to store
while( eof(Raw) != 1)
{
    $Line = readline(*Raw);
    $Random_num = ceil(rand $ARGV[1]);
    for($k=1;$k<=$ARGV[1];$k++)
    {   
        if($Random_num == $k)
        {
                    # Store to the file
            print "Class$k" $Line;
            last;
        }
    }
}
for($h=1;$h<=$ARGV[1];$h++)
{
    close "Class$h";
}

close Raw; 
```

谢谢

后来我使用了比尔鲁珀特提供的建议

我将文件处理程序的名称放入数组中，但它似乎出现了语法错误，但我无法纠正它我用########标记语法错误，语法错误，但看起来还不错#### ####

这是我的代码

```
#!/usr/bin/perl

use POSIX;
use warnings;
use Data::Dumper;

 # open input file
open(Raw,"<","./$ARGV[0]") or die "Can't open $ARGV[0] \n";

 # create a directory class to store class files
system("mkdir","Class");

# put the name of hilehandler into array
for($i=0;$i<$ARGV[1];$i++)
{
    push(@Name,("Class".$i)); 
}

# create files of classes
for($i=0;$i<=$#Name;$i++)
{
    $I = ($i+1);
    open($Name[$i],">","./Class/$I.class") or die "Can't create $I.class \n";
}

# read each line and random decide which class to store
while( eof(Raw) != 1)
{
    $Line = readline(*Raw);
    $Random_num = ceil(rand $ARGV[1]);
    for($k=0;$k<=$#Name;$k++)
    {   
        if($Random_num == ($k+1))
        {

            print $Name[$k] $Line;  ######## A syntax error but it looks quite OK ########
            last;
        }
    }
}
for($h=0;$h<=$#Name;$h++)
{
    close $Name[$h];
}

close Raw; 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:08:43.297

引用[函数](http://perldoc.perl.org/functions/print.html)[的 Perl 文档`print`](http://perldoc.perl.org/functions/print.html)：

> 如果您将句柄存储在数组或散列中，或者通常每当您使用比裸词句柄或普通的无下标标量变量更复杂的表达式来检索它时，您将不得不使用返回文件句柄值的块相反，在这种情况下不能省略 LIST：
> 
> `print { $files[$i] } "stuff\n";`
> 
> `print { $OK ? STDOUT : STDERR } "stuff\n";`

因此，`print $Name[$k] $Line;`需要更改为`print { $Name[$k] } $Line;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:55:34.147

这个怎么样：

```
#! /usr/bin/perl -w
use strict;
use POSIX;

my $input_file = shift;
my $file_count = shift;
my %hash;

open(INPUT, "<$input_file") || die "Can't open file $input_file";

while(my $line = <INPUT>) {
    my $num = ceil(rand($file_count));
    $hash{$num} .= $line
}

foreach my $i (1..$file_count) {
    open(OUTPUT, ">$i.txt") || die "Can't open file $i.txt";
    print OUTPUT $hash{$i};
    close OUTPUT;
}

close INPUT; 
```

# google-apps-script - geteditors 不返回用户界面决定的电子邮件是一个组

> ID：15538859
> 
> 赞同：0
> 
> 时间：2013-03-21T03:17:33.427
> 
> 标签：google-apps-script

因此，您在驱动器中创建一个文档，然后共享它。你将它分享给谷歌网络内的某个人，电子邮件地址会得到一个男人的图标。但如果你与谷歌网络之外的人分享它，你会得到一个包含多个帅哥的图标。至少当您将安全设置共享给任何拥有链接的人都可以进入时，您会这样做。我不确定这是否适用于其他模式。

但无论如何，您现在编写了一个应用程序脚本，它想向共享文件的每个人发送一封电子邮件。所以你使用 DocsList 来获取文件，然后调用 getEditors 方法来获取文件共享对象的列表。问题是该方法似乎只返回带有单身男人图标的电子邮件地址。如何获取其他电子邮件地址？

如果这不能发生，我如何告诉云端硬盘我添加的外部电子邮件地址实际上是个人而不是群组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:23:20.490

我认为发生这种情况是因为您与没有 Google 帐户的人共享。
为了查看带有已识别 ID 的文档，他们必须有一个 google 帐户（这并不意味着 google 电子邮件地址）您可以[在此处创建一个与您的电子邮件地址相关联的帐户](https://accounts.google.com/NewAccount?hl=FR)

对于问题的第二部分，您可以[在此处参考上一个问题](https://stackoverflow.com/questions/15346991/google-apps-script-unexpected-exception-when-parsing-email/15386405#15386405)

# java - Spring session 并发教程

> ID：15538863
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:17:51.350
> 
> 标签：java, session, spring-mvc

我已经在 SpringSource Tool Suite 中启动了一个 Spring 应用程序，我想在我的 Web 应用程序中添加一个会话管理功能，即我想阻止用户使用相同的帐户登录。

我在网上搜索了教程和指南，但未能找到我在 Spring 中所了解的直观的。有人可以指出我的“初学者教程”文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:29:36.063

[Spring Security 提供了这里](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html#concurrent-sessions)描述的功能。

要使用的典型 Maven 依赖项是：

```
 <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.1.3</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3</version>
    </dependency> 
```

在 XML 配置中，声明通常类似于：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd"> 
```

然后您可以在安全元素前面加上`sec:`诸如

```
<sec:custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" /> 
```

或者，如果您不使用我链接到的 Spring Security 文档中的示例，它会为 bean 命名空间添加前缀并将安全性保留为默认值。无论哪种方式都应该达到相同的目的。

# python - 在 Eclipse 中为 PyDev 配置 Python 解释器时出错

> ID：15538867
> 
> 赞同：1
> 
> 时间：2013-03-21T03:17:58.883
> 
> 标签：python, eclipse, configuration, pydev, interpreter

我最近刚刚为 Eclipse 安装了 PyDev 2.6 插件（我运行 Eclipse SDK 4.2.1），当我尝试将 Python 解释器配置到路径：> C:\Python27\python.exe 时，它​​给了我一个“错误信息解释器”并在错误日志中说：

> com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: unvalid Byte 2 of the sequence UTF-8 of 3 bytes

我在本网站上阅读了有关同一问题的其他类似问题，但解决方案不适合我的情况，因为我的路径中没有任何 unicode char。我运行 Python 2.7.3。我非常感谢任何有关如何解决此问题的帮助或建议，因为我真的很想尽快开始在 Eclipse 中编写 Python 代码。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:07:43.393

我遇到了同样的问题。解决方案是重新安装 Aptana（或 Eclipse，也在 Kepler 4.2.x 上测试过）。

问题的根源在于您的 eclipse/aptana 安装路径。我认为这里的麻烦是由你的名字'Andres Diaz'中的变音符号决定的，根据你在这里的用户名）））（我的情况是：Windows8中的西里尔用户名和用户的主文件夹'Михаил'）。你的 python 解释器的路径在这里无关紧要。

解决方法是：将 Eclipse 移动/重新安装到路径不包含任何非 acsii 字符的文件夹中。就我而言，我已将 Aptana Studio 从 C:\Users\Михаил\Aptana3 移动到 C:\Aptana3 并且（也许这不是必需的，我不知道）它的工作区也到根 C:\ 文件夹。

PS我认为这对那些也面临此类问题的人很有用，因为我无法找到有关如何解决此问题的任何答案，但有很多类似的问题。PPS 对不起我的英语，语言不是我的主要技能）））

# paypal - 输入了无效参数：

> ID：15538872
> 
> 赞同：1
> 
> 时间：2013-03-21T03:18:19.833
> 
> 标签：paypal

我发送了我昨天使用的正常登录内容，并且工作正常，现在我收到上述错误。没有返回有关错误可能是什么的信息。

我正在使用贝宝的沙盒模式？

知道为什么会这样吗？

数据通过：

支付对象：

paymentType：1 customID：anyYouWant memo：注册您的车库销售税：0 收件人：seller@iinet.net.au ipnUrl：[http](http://wp.g-saler.com/) ://wp.g-saler.com/merchantName：GSaler 销售货币：AUD 小计：3 运费: 0 invoiceItems: [对象对象]

发票对象：

名称：车库特卖商品数量：1 总价格：3 商品价格：3

API：机电

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:13:54.233

我突然开始从支付服务收到这个错误信息：

```
The receiver is based in a country that isn't enabled to receive payments 
```

我建议创建一个位于美国的企业沙盒帐户。

# php - PHP JQuery 文档准备添加 IF 语句中断 .show()

> ID：15538875
> 
> 赞同：2
> 
> 时间：2013-03-21T03:18:31.337
> 
> 标签：php, jquery, if-statement, document-ready

以下代码放置在 (document).ready 函数中，用于正确显示订单：

```
 <?php   if (isset($_POST['preview-order'])) {    //IF PREVIEW FORM  ?>
            $("#cam-order-preview").show('slow');
    <?php   } else {                                //ELSE ORDER FORM  ?>               
        if (lastAreaVisible != "") { 
            $("#<?php echo $_SESSION['last_area_visible'];?>").css("visibility", "visible");
            $("#<?php echo $_SESSION['last_area_visible'];?>").css("position", "relative");
            $("#<?php echo $_SESSION['last_area_visible'];?>").css("display", "block");
            $("#<?php echo $_SESSION['last_area_visible'];?>").show('slow');            
        } 
            $("#cam-order-form").show('slow');
            $("#cam-order-nav").show('slow');                   
            $("#order-comment-box").show('slow'); 
```

问题是如果设置了“last_area_visible”值，我想有条件地隐藏其他部分，所以我添加了一个这样的 else 语句，但是 else 语句会导致整个表单中断，并且没有任何内容显示，就好像 jquery 停止解析一样。

```
<?php   if (isset($_POST['preview-order'])) {   //IF PREVIEW FORM   ?>
                $("#cam-order-preview").show('slow');
        <?php   } else     {                                //ELSE ORDER FORM   ?>              
if (lastAreaVisible != "") { 
 $("#<?php echo $_SESSION['last_area_visible'];?>").css("visibility", "visible");
 $("#<?php echo $_SESSION['last_area_visible'];?>").css("position", "relative");
 $("#<?php echo $_SESSION['last_area_visible'];?>").css("display", "block");
 $("#<?php echo $_SESSION['last_area_visible'];?>").show('slow');           
} else { 
 $("#cam-order-form").show('slow');
 $("#cam-order-nav").show('slow');                  
 $("#order-comment-box").show('slow');
} 
```

有什么见解吗？顶部代码有效并显示所有部分，我只想隐藏底部三个但 jquery 出于某种奇怪的原因不喜欢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:28:45.283

终于弄明白了，出现这个问题是因为top block中的选择器其实是cam-order-form里面嵌套的div。添加

```
 $("#cam-order-form").show('slow');
 $("#cam-order-nav").hide('slow'); 
```

由于 div 的嵌套，如果块根据需要允许行为，则到顶部。

所以在显示或隐藏时要注意的另一件事会产生意想不到的结果：检查您要显示的 div 的嵌套。

# jquery - 将div的宽度更改为magento中移动更改的方向

> ID：15538876
> 
> 赞同：0
> 
> 时间：2013-03-21T03:18:33.387
> 
> 标签：jquery, magento, jquery-mobile, magento-1.7

我正在研究 magento 移动主题。

我想根据手机屏幕设置li的宽度。

为此我正在使用

```
 <script>
        jQuery(function() {
        var width= jQuery(window).width();
        jQuery(".press_li").width(width*0.75);
       });      
 </script> 
```

它的工作。但是当方向改变时，宽度并没有改变。为此，我正在尝试使用 jQuery-mobile，但是当我包含 jQuery 时，其他 jquery 将停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:28:48.933

JavaScript 是[函数作用域](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope)的。您的`width`变量在绑定到文档就绪状态的匿名函数的范围内。

作为修复，您可以在处理程序`var width...`上重复该行`fixWidth`，或者将该处理程序和方向更改绑定器都放在第一个文档就绪函数处理程序中。

jQuery mobile 不包含 jQuery 本身，它是移动版本工作所必需的库。

无论如何，我**强烈建议**使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)作为一种好习惯，而不是这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:51:18.357

您可以使用下一个代码来解决您的问题

```
function setPositions() {
    var width= jQuery(window).width();
    jQuery(".press_li").width(width * 0.75);
}
$(document).ready(function(){setPositions()})
$(window).resize(function(){setPositions()}) 
```

看例子：http: [//jsfiddle.net/q7FqJ/](http://jsfiddle.net/q7FqJ/)

# linux - 可以将现有页面插入另一个 VMA 结构吗？

> ID：15538877
> 
> 赞同：1
> 
> 时间：2013-03-21T03:18:34.060
> 
> 标签：linux, memory-management, linux-kernel, kernel

我一直在通过一些实验学习linux内核。最近我想知道是否可以通过将一个进程的页面插入另一个进程的vma结构来在两个用户空间进程之间共享页面，后者调用mmap和通过 netlink 将地址发送回内核。插入将在驱动程序模块中完成。此测试的原因是两个进程可能不直接相互通信，并且只读内存的重复页面可能是考虑到效率和冗余的错误选择。

经过一番研究，我发现了 vm_insert_page 函数和传统的 remap_pfn_range。但是它在 lxr 中说：

/** 2020 * vm_insert_page - 将单页插入用户 vma

2021 * @vma：要映射到的用户 vma

2022 * @addr: 本页目标用户地址

2023 * @page：源内核页面

2024 *

2025 * 这允许驱动程序插入他们分配的单个页面

2026 * 进入用户 vma。

2027 *

2028 ***该页面必须是一个干净整洁的*单独*内核分配**。”

[来自 lxr](http://lxr.free-electrons.com/source/mm/memory.c?v=3.2#L2041)

这是否意味着不可能将现有页面插入另一个 vma？该函数只能与新创建的页面一起调用？我一直认为页面可以与引用计数共享。

# c++ - removeAt 是否删除元素以及在向前一个索引后推送元素或保留索引？

> ID：15538878
> 
> 赞同：1
> 
> 时间：2013-03-21T03:19:01.070
> 
> 标签：c++, vector

C++ 中向量类中的 removeAt() 是否删除元素以及在向前一个索引后推送元素还是保留索引？

# sql - 带有数组的sql

> ID：15538879
> 
> 赞同：0
> 
> 时间：2013-03-21T03:19:01.543
> 
> 标签：sql

这个循环可以在 sql 中完成吗？

```
Dim ID(0 TO 2) as string
Dim number as string

ID="01"
ID="02"

For each number in ID
   SELECT data FROM sheet1 WHERE data= number
next number

datatable:
data
01
01
02
03
04 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:30:29.557

这可以使用`IN`谓词来完成：

```
SELECT data FROM sheet1 WHERE data IN(1, 2); 
```

# javascript - 任何滑块都不显示图像

> ID：15538886
> 
> 赞同：0
> 
> 时间：2013-03-21T03:19:41.840
> 
> 标签：javascript, jquery, anythingslider

我正在尝试让下一页上的滑块显示滑块上的怪异图像！[http://www.ultimatebowhuntingtv.com/index.php/partners/](http://www.ultimatebowhuntingtv.com/index.php/partners/)您可以在“资源”下的 chrome 开发人员工具中看到图像是从正确的位置调用的，所以我不明白为什么我不能看图片。我正在使用任何滑块：[http](http://css-tricks.com/anythingslider-jquery-plugin/) ://css-tricks.com/anythingslider-jquery-plugin/ 。代码如下。下面的滑块 html

```
<?php
/*
Template Name: Partners
*/
?>

<?php get_header(); ?>
</div>
</div>

<script src="/js/jquery-1.7.2.min.js"></script>
<script src="/js/lightbox.js"></script>
<link href="/js/lightbox.css" rel="stylesheet" />

<!-- Anything Slider -->
    <link rel="stylesheet" href="/wp-content/themes/onplay/css/anythingslider.css">
    <script src="/wp-content/themes/onplay/js/jquery.anythingslider.js"></script>

    <!-- Define slider dimensions here -->
    <style>
    #slider { width: 700px; height: 390px; }
    </style>

    <!-- AnythingSlider initialization -->
    <script>
        // DOM Ready
        var J=jQuery.noConflict();
        J(function(){
            J('#slider').anythingSlider();
        });
    </script>

<div id="main">
    <div class="wrap-special">
        <div class="content full-width-special">
            <div class="post">
                <h1 class="title-special" style="display: none;"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h1>

                <?php wp_reset_query(); if (have_posts()) : while (have_posts()) : the_post(); ?>

                <?php edit_post_link( __('Edit', 'wpzoom'), ' ', ''); ?>

                <div class="entry " style="color: #fff;">
                    <img src="/images/bkg-title-partners.jpg" /><br />

                    <!--INSERT SLIDER HERE-->
                    <ul id="slider">

                        <li><img src="/images/slider/slider-1.jpg" alt=""/></li>

                        <li><img src="/images/slider/slider-2.jpg" alt=""/></li>

                        <li><img src="/images/slider/slider-3.jpg" alt=""/></li>

                        <li><img src="/images/slider/slider-4.jpg" alt=""/></li>

                    </ul>

                    <div class="clear"></div>
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-scoutlook.jpg" alt="ScoutLook Weather" />
                            <div class="text">
                                <div class="partner-title">ScoutLook</div>
                                <div class="partner-website"><a href="http://www.scoutlookweather.com" title="ScoutLook Weather" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Scoutlook is the most advanced weather resource available period!  You have instant access to precise weather details, solunar data, game feeding times, wind direction helping you with Scent Cone, Deer Logs and much more.  We rely on Scoutlook in our preparation and while we are in the field.</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-scoutlook-1.jpg" rel="lightbox[scoutlook]"><img src="/images/partners/gallery-scoutlook-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-scoutlook-2.jpg" rel="lightbox[scoutlook]"><img src="/images/partners/gallery-scoutlook-thumb-2.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-nufletch.jpg" alt="NuFletch Archery" />
                            <div class="text">
                                <div class="partner-title">NuFletch Archery</div>
                                <div class="partner-website"><a href="http://nufletch.org/wpNuFletch" title="NuFletch Archery" target="_blank">Visit their website</a></div>
                                <div class="partner-text"></div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-nufletch-1.jpg" rel="lightbox[pse]"><img src="/images/partners/gallery-nufletch-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-pse.jpg" alt="PSE Archery" />
                            <div class="text">
                                <div class="partner-title">PSE Archery</div>
                                <div class="partner-website"><a href="http://pse-archery.com" title="PSE Archery" target="_blank">Visit their website</a></div>
                                <div class="partner-text">We have used PSE Bows for the past five years and love them.  Why?...It is because they are the fastest bows on the market and have become some of the most accurate bows a bowhunter can shoot.  There are a lot of bows to choose from and we have shoot nearly all of them over the years.  We are shooting the new PSE Dream Season DNA bow this year and new Smoke Crossbow.  The DNA is the fastest, quietest, and most accurate bow I have put in my hands to date...</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-pse-1.jpg" rel="lightbox[nufletch]"><img src="/images/partners/gallery-pse-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div style="clear: left;"></div>
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-muddy-bloodsport.jpg" alt="Muddy Bloodsport" />
                            <div class="text">
                                <div class="partner-title">Muddy Bloodsport</div>
                                <div class="partner-website"><a href="http://www.gomuddy.com/About/Bloodsport.html" title="Muddy Bloodsport" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Bloodsport arrows use Fly Straight Technology that allows them to be some of the most accurate arrows on the market.  Additionally, the Carbon technology used ensures that they are the most durable arrow on the market.  We have to know our arrow is going to be accurate and be durable so we can use them time and time again...</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-bloodsport-1.jpg" rel="lightbox[bloodsport]"><img src="/images/partners/gallery-bloodsport-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-big-green-targets.jpg" alt="Big Green Targets" />
                            <div class="text">
                                <div class="partner-title">Big Green Targets</div>
                                <div class="partner-website"><a href="http://www.biggreentargets.com" title="Big Green Targets" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Big Green Targets are the only target we use when we practice in the backyard, range or when we arrive at our hunting destination.  They are made from 100% recycle material, heat bonded layered target and weather proof.  This leads to a durable target that will last for long time withstanding thousands of shots.  They have SUPER EASY Arrow Removal and are made here in the USA...</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-BGT-1.jpg" rel="lightbox[BGT]"><img src="/images/partners/gallery-BGT-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-BGT-2.jpg" rel="lightbox[BGT]"><img src="/images/partners/gallery-BGT-thumb-2.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-BGT-3.jpg" rel="lightbox[BGT]"><img src="/images/partners/gallery-BGT-thumb-3.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-redneck-blinds.jpg" alt="Redneck Blinds" />
                            <div class="text">
                                <div class="partner-title">Redneck Blinds</div>
                                <div class="partner-website"><a href="http://www.redneckblinds.com" title="Redneck Blinds" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Redneck Blinds are a new addition to our hunting tools.  When you step into a Red Neck Blind you will see why they are becoming a market leader.  The 360 degree shooting ability, carpet floors, adjustable windows and generous room for several hunters or camera man.  We also love them because they help control our scent!</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-RNB-1.jpg" rel="lightbox[RNB]"><img src="/images/partners/gallery-RNB-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div style="clear: left;"></div>
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-spypoint.jpg" alt="Spypoint Game Cameras" />
                            <div class="text">
                                <div class="partner-title">Spypoint Game Cameras</div>
                                <div class="partner-website"><a href="http://www.spypoint.com" title="Spypoint Game Cameras" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Spypoint is becoming the market leader when it comes to producing the most innovative game cameras on the market.  We rely on and use the LIVE 3G, Tiny W2 and new Tiny W3 wireless cameras to help us monitor our deer herd year round.  Spypoint also produces high quality security cameras such as the BF-8 with BLACK LED Technology.</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-spypoint-1.jpg" rel="lightbox[spypoint]"><img src="/images/partners/gallery-spypoint-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-spypoint-2.jpg" rel="lightbox[spypoint]"><img src="/images/partners/gallery-spypoint-thumb-2.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-spypoint-3.jpg" rel="lightbox[spypoint]"><img src="/images/partners/gallery-spypoint-thumb-3.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-spypoint-4.jpg" rel="lightbox[spypoint]"><img src="/images/partners/gallery-spypoint-thumb-4.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-spypoint-5.jpg" rel="lightbox[spypoint]"><img src="/images/partners/gallery-spypoint-thumb-5.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-swhacker.jpg" alt="Swhacker Broadhead" />
                            <div class="text">
                                <div class="partner-title">Swhacker Broadheads</div>
                                <div class="partner-website"><a href="http://www.swhacker.com" title="Swhacker Broadhead" target="_blank">Visit their website</a></div>
                                <div class="partner-text">When it comes to broadheads Swhacker has become our broadhead of choice. We have 100% confidence in these broadheads for both our bows and crossbows. They Fly like a field point and have a huge cutting diameter. Broadside shots, angled shots or less than perfect shots the Swhacker gets the job done. I shot my Turkey Grand Slam with the Swhacker...</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-swhacker-1.jpg" rel="lightbox[swhacker]"><img src="/images/partners/gallery-swhacker-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-yeti.jpg" alt="Yeti Coolers" />
                            <div class="text">
                                <div class="partner-title">Yeti Coolers</div>
                                <div class="partner-website"><a href="http://www.yeticoolers.com" title="Yeti Coolers" target="_blank">Visit their website</a></div>
                                <div class="partner-text">We started using Yeti coolers this year as we Bowfish, Spearfish, and everyday use.  We love how durable they are and how well they keep our food and game cool.  Especially, on those long days on the water or traveling back from hunting trip.  We are using the Series 35 and 65 this year and love them!</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-yeti-1.jpg" rel="lightbox[yeti]"><img src="/images/partners/gallery-yeti-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div style="clear: left;"></div>
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-always-lethal.jpg" alt="Under Armor Always Lethal" />
                            <div class="text">
                                <div class="partner-title">Under Armor Always Lethal</div>
                                <div class="partner-website"><a href="http://www.underarmour.com" title="Under Armor Always Lethal" target="_blank">Visit their website</a></div>
                                <div class="partner-text">There is nothing worse than being too hot, too cold or uncomfortable in the woods.  Minimizing your movement is key to our success not matter if we are turkey hunting or bowhunting big game.  Under Armour clothing keeps us cool and comfortable in the Spring and Summer.  During the Fall and Winter we can stay in the woods longer because of the layering technology.  We are also using the new Scent Control Clothing along with HAW Rubber Boots that are extremely comfortable.</div>
                                <!--<div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-lethal-1.jpg" rel="lightbox[yeti]"><img src="/images/partners/gallery-lethal-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>-->
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-mossy-oak.jpg" alt="Mossy Oak" />
                            <div class="text">
                                <div class="partner-title">Mossy Oak</div>
                                <div class="partner-website"><a href="http://www.mossyoak.com" title="Mossy Oak" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Mossy Oak Infinity keeps us concealed during the fall no matter where we are bowhunting.  The level of depth, detail and definition is awesome with this pattern.  Our goal is the ensure we cover every base we can to put the advantage in our corner no matter if we are turkey hunting or bowhunting big game.  Mossy Oak Infinity in the fall gives us that edge..In the Spring we rely on Mossy Oak Obsession based on lighter colors and green elements incorporated into the pattern.</div>
                                <!--<div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-mossy-1.jpg" rel="lightbox[yeti]"><img src="/images/partners/gallery-mossy-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>-->
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div id="partner-box">
                        <div id="Pwrapper">
                            <img class="hover" src="/images/partners/partner-300x250-muddy.jpg" alt="Muddy" />
                            <div class="text">
                                <div class="partner-title">Muddy</div>
                                <div class="partner-website"><a href="http://www.gomuddy.com" title="Muddy" target="_blank">Visit their website</a></div>
                                <div class="partner-text">Muddy Tree Stands in our opinion are some of the most versatile stands on the market.  We love the adjustablity of their lock on stands that allow you to set up in a less than straight tree and still be comfortable for all day sit.  Additionally, we use their safeguard harness for ourselves and our boys who hunt with us.  I have 100% confidence in these safety harnesses to keep me and my children safe..</div>
                                <div class="partner-gTitle">Gallery <span style="color:#aeaeae; font-weight: normal;">- Click Image To Expand</span></div>
                                <div class="partner-gallery">
                                    <a href="/images/partners/gallery-muddy-1.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-1.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-muddy-2.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-2.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-muddy-3.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-3.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-muddy-4.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-4.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-muddy-5.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-5.jpg" class="partner-gallery-thumb" /></a>
                                    <a href="/images/partners/gallery-muddy-7.jpg" rel="lightbox[muddy]"><img src="/images/partners/gallery-muddy-thumb-7.jpg" class="partner-gallery-thumb" /></a>
                                    <div style="clear: left;"></div>
                                </div>
                            </div>
                        </div>
                    </div><!--close partner box-->
                    <div style="clear: left;"></div>

                    <?php the_content(); ?>

                    <?php wp_link_pages(array('before' => '<p class="pages"><strong>'.__('Pages', 'wpzoom').':</strong> ', 'after' => '</p>', 'next_or_number' => 'number')); ?>

                    <div class="clear"></div>
                </div><!-- / .entry -->

                <?php endwhile; else: ?>
                <p><?php _e('Sorry, no posts matched your criteria', 'wpzoom');?>.</p>
                <?php endif; ?>

                <div class="clear"></div>          
            </div><!-- / .post -->

            <div class="clear"></div>
        </div><!-- / #content -->

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:18:42.463

您的`#slider`容器`display:none`在您的文件 style.css 中设置为第 274 行。删除显示样式或将其设置为`block`，您的滑块将显示。

# jquery - 使用 Jquery 选择嵌套子节点的有效方法

> ID：15538887
> 
> 赞同：0
> 
> 时间：2013-03-21T03:19:42.307
> 
> 标签：jquery

我有这个html结构：

```
<div id="title" class="span7">
    <span id="details" class="detail pull-right">
        <a class="detailShow" href="#">More details</a>
    </span>
    <p>My text example</p>
</div>

<div class="span9 hide" style="display: block;">
    <div class="row topRow">
        <div class="span9">
            <div class="detailInfo">
                <p>Informazioni aggiuntices</p>
            </div>
        </div>
    </div>
</div> 
```

我想选择 .detailInfo div，从 div“标题”上的第一个唯一 ID 开始。

我有这个代码：

```
$("#title").next(".span9"); 
```

不知道怎么继续...

选择 detailInfo div 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:22:38.110

只需`$('.detailInfo')`根据类别进行选择。

或更完整地说：

```
$("#title").next(".span9").find('.detailInfo') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:31:06.370

选择 div 的方法有多种，我认为最有效的方法如下：

*   使用*祖先后代*选择器：

`$('#title+div .detailInfo')`

*   使用第二个*上下文*参数：

`$('.detailInfo', '#title+div')`

编辑：没有注意到*div#title*不是*div.detailInfo的祖先*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:24:11.357

`$('.detailInfo')`可以直接选择

```
$("#title").next(".span9").find('.detailInfo') 
```

# github - Teamcity 和 Git - PR 合并构建 - 无论如何要获得 HEAD 提交哈希？

> ID：15538890
> 
> 赞同：3
> 
> 时间：2013-03-21T03:20:13.873
> 
> 标签：github, teamcity

我有一个带有 github vcs 根的团队城市构建项目。我已经为 /head 和 /merge refs 在 PR 上触发了构建。烦人的事情是虽然你不能对合并提交哈希做任何有用的事情——它在 github 中不存在。我想推出版本号中带有哈希（子字符串 7）的 nuget 包，以及合并构建的 github 提交状态，但针对 HEAD 哈希。

但是，在构建合并时，我看不到获取该 HEAD 哈希的方法。我不只是想做头，因为它有点没用——我们只关心合并是否会建立。

（公关——拉取请求）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T01:09:14.297

在 /merge 上运行时，此命令似乎可以可靠地工作。

```
git log --no-merges -1 --pretty='%H' 
```

# asp.net - Response.Redirect & 符号编码

> ID：15538894
> 
> 赞同：4
> 
> 时间：2013-03-21T03:20:54.367
> 
> 标签：asp.net, html

未能在 HTML 标记中转义“&”字符会创建一个[实体](http://www.htmlhelp.com/reference/html40/entities/)。当链接文档中的 URL 时，通常会无意中执行此操作，W3C 的[标记验证服务](http://validator.w3.org/check)会将此视为错误。

我想知道，ASP.NET 的[Response.Redirect](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.80%29.aspx)方法是否期望 & 符号在其`url`参数中被转义？通过阅读它的 MSDN 描述，我真的无法判断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:45:39.147

完全按照它应该出现在 Web 浏览器的地址栏中的方式传递 URL。例如，如果您尝试重定向到[http://example.com/?foo=bar&baz=quux](http://example.com/?foo=bar&baz=quux)，则将确切的字符串按原样传递给 Response.Redirect。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T04:11:47.180

try `UrlEncode` UrlEncode(String) 方法可用于对整个 URL 进行编码，包括查询字符串值。如果在 HTTP 流中传递空格和标点符号等字符而不进行编码，则它们可能会在接收端被误解。URL 编码将 URL 中不允许的字符转换为字符实体等价物；URL 解码反转编码。例如，当字符 < 和 > 嵌入到要在 URL 中传输的文本块中时，它们被编码为 %3c 和 %3e。 [URL编码](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)

```
System.Web.HttpUtility.UrlEncode(string url) 
```

# jquery - jquery获取div中的段落

> ID：15538895
> 
> 赞同：1
> 
> 时间：2013-03-21T03:20:59.177
> 
> 标签：jquery

假设我有一些这样的html：

```
<div class="outer">
    <div>
        // another div
    </div>
    <p>First paragraph in outer div</p>
    <div>
        // another div
    </div>
    <a href="#">some anchor</a>
    <p>Second paragraph in outer div</p>
    <div>
        <p>Third paragraph in outer div</p> 
    </div>
    <div class="inner">
        <p>First paragraph in inner div</p>
        <p>Second paragraph in inner div</p>
    </div>
</div> 
```

如何获得外部 DIV 中而不是内部 DIV 中的段落？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:26:27.423

`$('.outer').children('p')`或者`$('.outer > p')`

请参阅[子选择器（“父>子”）](http://api.jquery.com/child-selector/)和[`.children()`](http://api.jquery.com/children/)

* * *

如果您有一些不是外部 div 的直接子级的段落，您可以使用

```
$('.outer p').not('.inner p') 
```

看[`.not()`](http://api.jquery.com/not/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:26:35.410

您可以使用直接子级选择器：

```
.outer > p {
    ...
} 
```

顾名思义，它获取所有`p`类属性为的所有元素的直接子元素的所有元素`outer`。

使用*jQuery*会是`$('.outer > p')`.

**更新：**

我看到你在评论中提出的问题的唯一方法是：

```
.outer > p, .outer div:not(.inner) p {
    ...
} 
```

这样做是选择与上面相同的元素，以及那些`<p>`在非. 我认为这不是实现您想要的最佳方式，但至少是一个解决方案，希望对您有所帮助。`<div>``.outer``.inner`

# ajax - 加入并发/相同的 HTTP GET 请求？

> ID：15538896
> 
> 赞同：1
> 
> 时间：2013-03-21T03:21:06.637
> 
> 标签：ajax, http, browser, get, browser-cache

浏览器是否加入并发相同的 HTTP GET 请求？至少，对于静态或可缓存的内容？

也就是说，如果发生这样的事情：

```
| AJAX/HTTP-GET(resourceX)
| [开始下载]------------------------------------------------------>[完成下载]
|
| AJAX/HTTP-GET(resourceX)
| [开始下载]--------->等...
|
+-------------------------------------------------- -----------------> 时间

```

浏览器会发现“嘿，你已经在尝试下载 resourceX！不要尝试下载两次，它不会做任何事情！”？

**更新：

当然，现在我可以到某个站点尝试下载一个大文件（例如“BigFile”），然后单击链接两次；这将（重复）下载 BigFile 和 BigFile(1)。当然，这是用户的错误，但仍然......

对于可缓存的资源（例如，下载一些 javascript 文件），如果浏览器无法找出这些重复项，这似乎是非常低效的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:36:50.923

浏览器不会注意到。它就像普通的 HTTP 流量一样。一旦第一个请求完成（如果设置了正确的缓存控制字段），它*可能会缓存请求，但同时不会。*

# javascript - jQuery Validation 条件依赖：如果选中单选按钮，则确保文本输入与值匹配

> ID：15538897
> 
> 赞同：0
> 
> 时间：2013-03-21T03:21:08.330
> 
> 标签：javascript, jquery, jquery-validate

我有一些遵循如下格式的表单元素：

```
<input type="radio" name="test" value="A"> <input type="text" size="3" name="weightA" id="A"><br>
<input type="radio" name="test" value="B"> <input type="text" size="3" name="weightB" id="B"><br> 
```

我正在使用 jQuery Validation 插件进行客户端验证。我想对这些字段做的是确保与所选单选按钮对应的文本输入等于 100。我已经使用 PHP 在服务器端成功实现了这一点，但想添加一个 JS 方法以提供即时反馈在提交表单之前。我已经包含了一个 jQuery`range:`规则，用于将用户输入限制在数字范围 [1-100] 内的两个文本字段中。

我将如何进行这项工作？会`jQuery.validator.addMethod`是这样做的方法吗？

**编辑：** 为了回应 Sparky 的评论，我尝试了一个 addMethod，如下：

```
$.validator.addMethod(
    "selectWt", function(value, element) {
        var selA = $('[name="test"]').val() === "A";
        var selB = $('[name="test"]').val() === "B";

        if (selA && ($("#A").val() !== "100")) {
            return false;
        } else if (selB && ($("#B").val() !== "100")) {
            return false;
        } else return true;
    }, "Selected option must equal 100."
); 
```

这似乎触发了对`#A`但*不是* `#B`的验证，并且显示的错误消息是由`message:`规则指定的，而不是由`addMethod`. 请记住，我的编程背景很少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:21:42.130

尝试这个：

**演示：http: [//jsfiddle.net/maqZe/](http://jsfiddle.net/maqZe/)**

```
$.validator.addMethod("selectWt", function (value, element) {
    if ($(element).prev().is(':checked')) {
        return ($(element).val() === 100);
    } else {
        return true;
    }
}, "Selected option must equal 100."); 
```

这条规则可以通用。它只是检查放置在 element 之前的 radio 元素是否是`checked`. 如果是这样，则`true`仅当文本元素的值为 时才返回`100`。

它的编写方式，只有在你的`type=text`元素紧跟在`type=radio`元素之后才有效。如果您更改 HTML 排列，则需要对其进行调整。

* * *

通过将`100`值作为参数传递也可以使其更加灵活。

演示：http: [//jsfiddle.net/NFJUN/](http://jsfiddle.net/NFJUN/)

```
$.validator.addMethod("selectWt", function (value, element, param) {
    if ($(element).prev().is(':checked')) {
        return ($(element).val() === param);
    } else {
        return true;
    }
}, "Selected option must equal {0}."); 
```

...

```
$('#myform').validate({ // initialize the plugin
    rules: {
        myfield: {
            selectWt: 100 // use a parameter instead of "true"
        },
    }
}); 
```

# javascript - JQuery 中的 Javascript 小部件

> ID：15538899
> 
> 赞同：0
> 
> 时间：2013-03-21T03:21:15.473
> 
> 标签：javascript, jquery, syntax

我们使用的是 Ning 平台，为了在博客内容下方（但在评论部分之前）添加一个新的容器 DIV，我们在 body 标签之前添加了以下内容：

```
<script type="text/javascript">
if (typeof(x$) != 'undefined') {
x$("DIV.xg_module.xg_blog.xg_blog_detail.xg_blog_mypage.xg_module_with_dialog").after('<div>CONTENT GOES HERE </div>');
}
else{
}
</script> 
```

但是，我们需要加载的内容是来自附属程序的 javascript，该程序向我们发送了此代码以添加到该 div 中：

```
<div style="width:750px;">
<div style="border-bottom:1px solid #FFFFFF;color:#FFFFFF;font-family:Arial,Helvetica,sans-serif;font-size:22px;font-weight:bolder;margin-bottom:10px;padding-bottom:2px;text-transform:uppercase;">From Around the Web</div>
<script type='text/javascript'>
var _CI = _CI || {};
(function() {
var script = document.createElement('script');
ref = document.getElementsByTagName('script')[0];
_CI.counter = (_CI.counter) ? _CI.counter + 1 : 1;
document.write('<div id="_CI_widget_');
document.write(_CI.counter+'"></div>');
script.type = 'text/javascript';
script.src = 'http://widget.crowdignite.com/widgets/29949?_ci_wid=_CI_widget_'+_CI.counter;
script.async = true;
ref.parentNode.insertBefore(script, ref);
})(); </script>
</div> 
```

显然，这是行不通的。

问题：有没有更好的方法来做到这一点？这只是所有冲突的 's 和 "s 的问题吗？有没有更简单的方法来格式化或输出它？它是否失败是因为在 JQuery 已经运行页面加载后它根本没有加载 javascript？我有一直在尝试不同的东西，但似乎都没有用，我的眼睛已经准备好从眼窝里跳出来了，因为我知道我错过了一些愚蠢的东西，所以我想我会多看几眼。

感谢您的任何帮助/想法/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T04:19:49.407

尝试将新的 script 元素附加到页面上的 head 元素。大多数动态脚本加载器都会这样做。

有关示例，请参阅[在页面中动态添加 javascript 文件的方法。](https://stackoverflow.com/questions/5751620/ways-to-add-javascript-files-dynamically-in-a-page)

# java - 如何在同一活动上添加 Android 中的 EditText 元素？

> ID：15538902
> 
> 赞同：0
> 
> 时间：2013-03-21T03:21:42.053
> 
> 标签：java, android, android-activity

我有一个，**其中**`DetailsActivity`有一个`TextView`和`TimeEditText`日期。用户可以在其中添加日期。有一种叫**`Button``Add Detail`**

 **我希望当用户输入像 dm-yy（未来）这样的日期然后在此`TimeEditText`元素下方时，活动应该显示否。`WeekEditText`作为_

第 1周：（`WeekEditText1` *添加第 1 周的详细信息）*

第 2 周：（`WeekEditText2` *添加第 2 周的详细信息）*等等。

总数 周是`(AddedDate - CurrentDate)/7`

一种方法是在单击`Add Detail`按钮时调用另一个新活动，然后在通过 Intent 传递等时在下一个活动上显示所有*EditTexts 。*`AddedDate`

但是用户输入日期后是否可以`EditText`在下面的同一页面上显示？`TimeEditText`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:28:22.730

有一个`Button`，当点击添加`EditText`你需要的数量

```
public void onClick(View v)
{
    // do whatever else you need here
    int numWeeks =(AddedDate - CurrentDate)/7;
    for (i=1; i<=numWeeks;i++)
    {
         EditText et = new EditText(YourActivity.this);
         // add whatever here
    }
} 
```

`Layout`您可以在创建之前添加您想要的任何类型，`EditText`然后将每个添加到该`Layout`. 类似的东西应该对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:33:25.970

您可以动态扩展布局或布局元素，例如编辑文本。例如，

```
if(TimeEditText.getText != null)
 EditText et = new EditText(); 
```**

# mysql - 用 MySQL 中同一表的另一行中的值更新值

> ID：15538903
> 
> 赞同：0
> 
> 时间：2013-03-21T03:21:55.170
> 
> 标签：mysql, sql-update

我需要以下 SQL 的帮助：-

```
UPDATE `mg_catalog_category_entity_varchar` AS t1 INNER JOIN `mg_catalog_category_entity`
AS t2 ON t1.`entity_id`= t2.`entity_id`
SET t1.`value` = CONCAT('US Sports Goods ', t1.`value`, ' | My Site Name') 
WHERE t2.`path` LIKE '1/2642%' AND t2.`level` > 1 AND t1.`attribute_id` = 40 
```

我的问题是语句中的`t1.value`字段`CONCAT()`需要提取`t1.value`WHERE `t1.attribute_id = 35`，我正在努力弄清楚如何在`CONCAT()`语句中正确指定它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:24:00.397

尝试这个：

```
UPDATE `mg_catalog_category_entity_varchar` AS t1 INNER JOIN `mg_catalog_category_entity`
AS t2 ON t1.`entity_id`= t2.`entity_id`
SET t1.`value` = CONCAT('US Sports Goods ', (SELECT t3.`value` FROM `mg_catalog_category_entity_varchar` AS t3 WHERE t3.`attribute_id` = 35 LIMIT 1), ' | My Site Name') 
WHERE t2.`path` LIKE '1/2642%' AND t2.`level` > 1 AND t1.`attribute_id` = 40 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:04:29.370

尝试这个：

```
UPDATE `mg_catalog_category_entity_varchar` AS t1 
INNER JOIN `mg_catalog_category_entity` AS t2 ON t1.`entity_id`= t2.`entity_id`
INNER JOIN
(
   SELECT *
   FROM mg_catalog_category_entity_varchar
   WHERE `attribute_id` = 35
) AS t12 ON t2.entity_id = t12.entity_id 
SET t1.`value` = CONCAT('US Sports Goods ', t12.`value`, ' | My Site Name') 
WHERE t2.`path` LIKE '1/2642%' 
  AND t2.`level` > 1 
  AND t1.`attribute_id` = 40 
```

# c++ - 虚函数，-> 运算符，继承 SO CONFUSING

> ID：15538907
> 
> 赞同：0
> 
> 时间：2013-03-21T03:22:44.647
> 
> 标签：c++, function, pointers, inheritance, overriding

好的，这是一个简单的例子，让我很困惑......

```
class First { public: void Func() {cout<<"FirstFunc";} };
class Second : public First
    { public: void Func() {cout<<"SecondFunc";} };
class Third : public Second
    { public: void Func() {cout<<"ThirdFunc";} };

int main () {
   Third * thirdptr = new Third();
   Second * secondptr = thirdptr;
   First * firstptr = secondptr;

   firstptr->Func();  // prints out FirstFunc
   secondptr->Func();  // prints out SecondFunc
   thirdptr->Func();  // prints out ThirdFunc

   delete thirdptr; 
```

这是带有虚函数的

```
class First { public: virtual void Func() {cout<<"FirstFunc";} };
class Second : public First
    { public: virtual void Func() {cout<<"SecondFunc";} };
class Third : public Second
    { public: virtual void Func() {cout<<"ThirdFunc";} };

int main () {
   Third * thirdptr = new Third();
   Second * secondptr = thirdptr;
   First * firstptr = secondptr;

   firstptr->Func();  // prints out ThirdFunc
   secondptr->Func();  // prints out ThirdFunc
   thirdptr->Func();  // prints out ThirdFunc

   delete thirdptr; 
```

好的，这是我的问题。

1.  我怎么读第三 * thirdptr = new Third(); new 在“new int”时为 int 分配内存，但我不知道应该如何读取 new Third(); 因为它是构造函数

2.  第二 * secondptr = thirdptr; / 第一 * firstptr = secondptr; 这两种说法太混乱了。任何人都可以用 & 运算符或与地址运算符相关的简单词语来解释它吗？我理解这个指针和继承的概念，但这部分太混乱了。

3.  我应该如何从第二个示例中获得结果？我正在读的书说

对于第一个示例 // C++ 编译器关于指针算术运算，做出决定 // 基于指针的类型，而不是指针实际指向的内容

对于第二个示例 // 虚拟功能：决定，而不是基于指针类型 //，根据指针实际指向的内容来调用什么

这是翻译，可能不准确，但还是看不懂。如果您能帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:35:56.023

1.  `new Third()`做两件事。首先它为`Third`对象分配内存，然后调用构造函数`Third`。您可以认为该语句分为两部分，`new Third`分配内存和`()`调用构造函数。

2.  `Second * secondptr = thirdptr; / First * firstptr = secondptr;` 所有三个变量都分配给同一个指针。假设`thritptr`等于 100。那么在这些语句的末尾，两者`secondptr`和都等于 100。`firstptr`所有三个指针都指向内存中的相同地址。但是，由于它们是不同的类型，因此编译器会以不同的方式解释它们

3.  对于非虚拟函数，方法调用在编译时根据变量的类型解析。因此，在编译第一个代码时`firstptr`，类型`First*`为编译器，因此编译器会生成对`First::Func()`. 对于虚函数，方法调用直到运行时才完全解析。编译器生成的代码将确定变量指向的实际类型并调用该函数。在第二个例子中，当程序运行时，`firstpr->Func()`它首先确定`firstptr`确实指向一个`Thrird`对象，所以它调用`Third::Func()`. 这通常使用[虚函数表](http://en.wikipedia.org/wiki/Virtual_method_table)来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:39:27.817

要回答你的第一个问题，`new Third()`在高层次上，做与`new int`. 如您所说，`new int`将为 a 分配内存，`int`左侧的指针将指向该内存。 `new Third()`为`Third`对象分配内存，并使用`Third`类的默认构造函数`Third()`, 来初始化它。

对于第二个问题，您正在创建三个指针并将它们全部指向同一个内存块。我相信由于继承，可以将每个指针类型隐式转换为更高的类型（没有显式指令的隐式转换含义，例如`static_cast`C 样式转换）。视觉上：

```
----
|  | <-- Some block of memory.
----

A -> ---- <-- A* aptr = new A();
     |  |
     ----

A -> ----
B -> |  | <-- B* bptr = aptr;
     ----

A -> ----
B -> |  |
C -> ---- <-- C* cptr = bptr; 
```

请注意所有三个指针如何指向同一个内存块。（另请注意，指针都指向内存的*开头*- 完全相同的位置。很难在上面描述。）

至于你的第三个问题：

> 根据指针实际指向的内容决定调用什么，而不是基于指针类型

意味着编译器将根据内存中对象的实际类型而不是指向内存的指针的类型来决定调用哪个函数实例。因此，在您的示例中，您创建了一个类型为 的对象`Third`，并有三个指向它的指针，类型为`First`, `Second`, `Third`。但是，不管指针类型如何，因为`Func`是虚拟的，所以会执行`Third`的版本，`Func`因为内存中的对象是 类型的`Third`。

# html - 只需键入映射到文件地址的关键字，即可在浏览器中打开本地文件

> ID：15538908
> 
> 赞同：-1
> 
> 时间：2013-03-21T03:22:46.690
> 
> 标签：html

我花了很多时间寻找但找不到答案。可能没有使用正确的术语进行搜索，这没有帮助。这就是我想要做的：

1\. 我打开一个浏览器（如果有人想知道，特别对 IE8 感兴趣）。
2\. 我在地址栏中输入*“游戏”*，没有别的，然后按 Enter。
3\. HTML 文件**Game.html**出现在我的桌面上，在我的浏览器中打开。

这可以做到吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:10:18.493

我有一种感觉，提供一个沉重的 shell-driven-with-registry-manipulation 可能比你想咀嚼的要多（我可能是错的，你可能会喜欢`C++`......）。

所以这是一个相当直接的方法，在收藏夹文件夹中使用[venerable ：`.url`](http://www.fmtz.com/formats/url-file-format/article)

**游戏网址**

```
[DEFAULT]
BASEURL=url
[{000214A0-0000-0000-C000-000000000046}]
Prop3=19,11
[InternetShortcut]
URL=file:\\\C:\path\to\game.html
IDList=
ShowCommand=3
IconIndex=1
IconFile=C:\WINDOWS\SYSTEM\url.dll
HotKey=1601
[MonitoredItem]
PreviewSize=320x240
IsLivePreview=false 
```

使用给定的文件名将其保存到：

```
C:\Users\[username]\Favorites\Links 
```

然后在地址栏中输入，`game.url`应该会显示在下面的列表中，在收藏夹下。我知道，不完全是你所追求的。它既简单又*简单*，而且（*奖励！*）我相信您可以在`.url`文件中指定一个热键，然后只需热键即可打开（如果这会让您的船漂浮）。我找不到对`.url`文件类型资源语法的很好参考，但有[（旧版）Internet Shortcuts](http://msdn.microsoft.com/en-us/library/bb776784%28VS.85%29.aspx)。

从这里开始变得更加棘手。这可能涉及创建一个[外壳`verb`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144175%28v=vs.85%29.aspx)（从上下文菜单中思考） `Open`，`Edit`或者可能设置一个协议处理程序 (?) 或客户搜索词。它可能看起来像一个简单的“地址”栏，但尤其是在 Internet Explorer 中，它处理所有类型的输入，所以它有点像一个加载的问题，说你想进入*`term`*并获得*`file`*而不用导航所有这些。

然而，使用内容脚本操作 Chrome 可能会更容易一些，所以我会先看看那里。

# joomla - Joomla 2.5 组件

> ID：15538909
> 
> 赞同：0
> 
> 时间：2013-03-21T03:23:04.703
> 
> 标签：joomla, components, joomla2.5

是否可以在不使用`TableHelloWorld`类和所有字段类型的东西的情况下制作 2.5 组件，例如从这里开始。还是强制性的？

[http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Using_the_database](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Using_the_database)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T03:33:57.810

实际上，没有它，该系统将运行得相当好。你真正需要的只是一个以你的组件命名的基本文件，一个controller.php文件，以及本节中概述的视图：http: [//docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/添加_a_view_to_the_site_part](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_a_view_to_the_site_part)

从那里你会得到一些可以运行和加载的东西。如果您选择，您可以对数据库进行原始 sql 查询。

话虽这么说，该框架可以帮助您，而不是阻碍您。这些年来，我偷工减料，几乎总是你以后会后悔。随意跳过这些片段，但请记住，有些片段可以帮助您处理您可能认为现在不需要的各种重要事情。（绑定输入、表行层次结构和签入/签出功能只是我想到的一些，我很高兴我不必自己做。）

# java - 从字节数组形成正则表达式？

> ID：15538910
> 
> 赞同：-2
> 
> 时间：2013-03-21T03:23:15.537
> 
> 标签：java, regex

如何从字节数组构建正则表达式？

例如，我有数组 a：

```
byte[] a= {'A','T'} ; 
```

我想使用正则表达式模式将 A 匹配到 A 或 G

```
 [AG]T 
```

如何使用匹配器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-24T15:46:40.057

以下代码将实现您的目标并返回字节数组的正确索引。

```
byte[] a = {'A','T'};
String aStr = new String(a, "ASCII");
Pattern pat = Pattern.compile("[AG]T");
Matcher m = pat.matcher(aStr);
if (m.find()){
    return m.start();
}
return -1; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T03:26:44.767

```
byte[] a= {'A','T'};
String aStr = new String(a);
String regex = "[AG]T";
if(aStr.matches(regex)){
     // Match
}else{
     // Not a match
} 
```

你可以尝试这样的事情。

# r - IBrokers 历史指数数据

> ID：15538921
> 
> 赞同：5
> 
> 时间：2013-03-21T03:24:49.023
> 
> 标签：r, ibrokers

如何从 Interactive Brokers 将 INDEX 的历史数据导入 R？如果是期货，我会使用这个命令（正如[IBrokers request Historical Futures Contract Data?](https://stackoverflow.com/questions/7573436/ibrokers-request-historical-futures-contract-data)在这里所建议的那样）：

```
library(twsInstrument)
a <- reqHistoricalData(tws, getContract("ESJUN2013")) 
```

`connid`但是标准普尔指数的相应命令给出了一个错误：

```
> a <- reqHistoricalData(tws, getContract("11004968"))
Connected with clientId 110.
Contract details request complete. Disconnected.
waiting for TWS reply on ES ....failed.
Warning message:
In errorHandler(con, verbose, OK = c(165, 300, 366, 2104, 2106,  :
  Error validating request:-'uc' : cause - HMDS Expired Contract Violation:contract can not expire. 
```

PS 有足够积分的人应该为 IBrokers 创建一个标签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T10:20:43.237

我没有对指数数据的市场数据访问权限，但我认为以下应该可行。

```
reqHistoricalData(tws, twsIndex(symbol = "SPX", exch = "CBOE"))
## waiting for TWS reply on SPX ....failed.
## NULL

## Warning message:
## In errorHandler(con, verbose, OK = c(165, 300, 366, 2104, 2106,  :
##  Historical Market Data Service error message:No market data permissions for CBOE IND 
```

以下是`reqContractDetails`使用与上述类似方法的结果，证明合约对象是由`twsIndex`

```
reqContractDetails(tws, twsIndex(symbol = "SPX", exch = "CBOE"))
## [[1]]
## List of 18
##  $ version       : chr "8"
##  $ contract      :List of 16
##   ..$ conId          : chr "416904"
##   ..$ symbol         : chr "SPX"
##   ..$ sectype        : chr "IND"
##   ..$ exch           : chr "CBOE"
##   ..$ primary        : chr ""
##   ..$ expiry         : chr ""
##   ..$ strike         : chr "0"
##   ..$ currency       : chr "USD"
##   ..$ right          : chr ""
##   ..$ local          : chr "SPX"
##   ..$ multiplier     : chr ""
##   ..$ combo_legs_desc: chr ""
##   ..$ comboleg       : chr ""
##   ..$ include_expired: chr ""
##   ..$ secIdType      : chr ""
##   ..$ secId          : chr ""
##   ..- attr(*, "class")= chr "twsContract"
##  $ marketName    : chr "SPX"
##  $ tradingClass  : chr "SPX"
##  $ conId         : chr "416904"
##  $ minTick       : chr "0.01"
##  $ orderTypes    : chr [1:22] "ACTIVETIM" "ADJUST" "ALERT" "ALLOC" ...
##  $ validExchanges: chr "CBOE"
##  $ priceMagnifier: chr "1"
##  $ underConId    : chr "0"
##  $ longName      : chr "S&P 500 Stock Index"
##  $ contractMonth : chr ""
##  $ industry      : chr "Indices"
##  $ category      : chr "Broad Range Equity Index"
##  $ subcategory   : chr "*"
##  $ timeZoneId    : chr "CST"
##  $ tradingHours  : chr "20130321:0830-1500;20130322:0830-1500"
##  $ liquidHours   : chr "20130321:0830-1500;20130322:0830-1500"
## 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T13:59:07.210

一个如何请求非美国股票的合约信息，我尝试了下面的两个调用，我在合约详细信息中收到错误，但这些是两种证券的符号和交换，我可以在 TWS 中为它们提取信息。

reqContractDetails(tws, twsEquity(symbol = "BMW", exch = "IBIS"))

reqContractDetails(tws, twsEquity(symbol = "BP", exch = "EBS"))

我什至尝试使用 exch='SMART' 但它对 BMW 失败并为 BP 获取 NYSE 行。这个电话只针对美股吗？

# soundcloud - Soundcloud HTML5 Widget 未加载，抛出错误

> ID：15538922
> 
> 赞同：1
> 
> 时间：2013-03-21T03:24:50.357
> 
> 标签：soundcloud

我正在尝试使用 SoundCloud HTML5 小部件。

我想加载小部件，然后通过 JavaScript 告诉它要播放什么。但是当我试图通过这段代码做到这一点时

```
<script src="http://connect.soundcloud.com/sdk.js"></script>

<iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/"></iframe>
<script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script>

<script>

var widgetIframe = document.getElementById('sc-widget'),
        widget       = SC.Widget(widgetIframe),
        newWidgetUrl = 'http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F1848538&show_artwork=true';

console.log("before load");
widget.load(newWidgetUrl);
console.log("after load");      

</script> 
```

我在控制台中看到的只是

> 加载之前加载之后
> 加载
> 之前 加载
> 之后 加载
> 之前 加载
> 之后
> 不安全的 JavaScript 尝试 从具有 URL [https://w.soundcloud.com/player/的框架访问具有 URL](https://w.soundcloud.com/player/) [http://www.karelbilek.com/musicalibre/](http://www.karelbilek.com/musicalibre/)的框架。请求访问的帧具有“https”协议，被访问的帧具有“http”协议。协议必须匹配。

和错误

> 未提供 SoundCloud 小部件 URL

在小部件中。现在我做错了什么？为什么 console.log 运行了 3 次，为什么什么都没有加载，为什么我会看到错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T03:45:39.347

好的，我想我明白了。关键的事情：

*   必须事先在 HTML5 小部件中加载某些内容，否则它永远不会被加载，您甚至无法重新加载它。不管它是什么，但它必须是一个存在的轨道。

*   此处的示例[http://developers.soundcloud.com/blog/html5-widget-api](http://developers.soundcloud.com/blog/html5-widget-api)是错误的 - 您应该将轨道 URL 作为参数放入 widget.load，而不是全部`w.soundcloud.com...`。

修改后的工作版本

```
<script src="http://connect.soundcloud.com/sdk.js"></script>

<iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src="http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F1848538&show_artwork=true"></iframe>
<script src="http://w.soundcloud.com/player/api.js" type="text/javascript"></script>

<script>

var widgetIframe = document.getElementById('sc-widget'),
        widget       = SC.Widget(widgetIframe),
        newWidgetUrl = 'http://api.soundcloud.com/tracks/1848538';

console.log("before load");
widget.load(newWidgetUrl);
console.log("after load");      

</script> 
```

错误仍然出现，但它们并不真正相关。

# windows-8 - 如何使 SmartScreen 过滤器信任自签名证书

> ID：15538925
> 
> 赞同：43
> 
> 时间：2013-03-21T03:24:57.493
> 
> 标签：windows-8, internet-explorer-9, internet-explorer-10

Windows 8 下的 Microsoft SmartScreen Filter 是小型开发人员最糟糕的噩梦。

虽然我意识到对最终用户的好处以及阻止恶意程序在最终用户的计算机上自行安装的有效性，但我和许多其他开发人员宁愿不支付每年更新代码签名证书的费用，或者更糟糕的是，EV代码签名证书。此外，当为内部使用而开发的产品使用来自内部 CA 的可信证书进行签名并存储在 Trusted Publishers 存储中时，它们仍然会成为过滤器过度热心行为的牺牲品。

开发人员和管理员过去可以通过在受信任的发布者商店中安装发布者的代码签名证书来禁用警告和提示。创意开发人员可以在安装使用付费 Authenticode 代码签名证书签名和时间戳的先决条件时在那里安装他们的自签名代码签名证书。之后，由发布者签名的程序将被信任，并且不会触发 SmartScreen 过滤器警报。从本质上讲，一旦受到信任，出版商就无需支付经常性费用。

最近对 SmartScreen 筛选器的更改（并将其作为 Windows 8 中的操作系统“功能”包含在内）清楚地表明，Microsoft 希望您购买代码签名证书，而不是创造性地解决他们为您创建的问题。是否有人发现了一种新方法来信任默认使用自签名代码签名证书的发布者（即不显示提示）？如果没有完全关闭过滤器，最终用户可以做些什么来让 SmartScreen 过滤器知道始终信任自签名证书？

请注意，购买代码签名证书并不能回答这个问题。我正在寻找一种方法来告诉 SmartScreen Filter 信任不从外部来源购买证书的发布者，而是发布自己的证书以供其组织内部使用。

**更新：我想我可能已经找到了解决方法！** 从[MSDN](http://technet.microsoft.com/en-us/library/jj618329.aspx)中，可以在 Windows 8 和 Internet Explorer 10 上为列为受信任站点的站点禁用 SmartScreen 筛选器。如果有人可以验证此方法适用于从 Windows 8 中的受信任站点下载和运行的安装程序，那将不胜感激，并将帮助许多 ISV 和内部开发团队。这也是回答这个问题所需的解决方法。受信任的站点可以通过组策略进行配置，因此从那里开始很简单。

以编程方式，可以通过为机器设置 HKLM\Software\Policies\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2!2301 或 HKCU\Software\Policies\Microsoft\Windows 来关闭受信任站点区域的 SmartScreen 过滤器\CurrentVersion\Internet Settings\Zones\2!2301 将用户设置为 0，并将要信任的站点添加到 Trusted Sites Zone 可以如[本问题](https://stackoverflow.com/questions/972345/programmatically-add-trusted-sites-to-internet-explorer)所示完成。

有人可以验证我建议的解决方法在 Windows 8 上是否适用于从受信任站点下载的未签名或自签名可执行文件？我自己并没有使用 Windows 8，而是将操作系统升级预算用于证书费用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-01T22:42:42.727

引用[MSDN 的网站](http://blogs.msdn.com/b/ie/archive/2012/08/14/microsoft-smartscreen-amp-extended-validation-ev-code-signing-certificates.aspx)：

> 批评者可能会声称 SmartScreen 正在“强迫”开发人员花钱购买证书。应该强调的是，不需要 EV 代码签名证书来建立或维护 SmartScreen 的声誉。自去年在 IE9 中引入应用程序信誉以来，使用标准代码签名证书甚至未签名文件签名的文件继续建立声誉。但是，EV 代码签名证书的存在是一个强有力的指标，表明该文件是由已通过严格验证过程并使用硬件签名的实体签名的，这使我们的系统能够比未签名或未签名更快地为该实体建立声誉-EV 代码签名程序。

换句话说，EV（付费）验证只是决定是否显示 SmartScreen 警告的大型算法中的一个因素。如果你有很多人下载你的程序，或者如果你的程序下载链接有一段时间没有改变，通过一些工作你可以让你的程序**不**显示警告。此外，通过对您的代码进行数字签名，您可以提高您的应用程序声誉。这直接来自[微软关于该主题的网页](http://ie.microsoft.com/testdrive/Browser/DownloadReputation/Default.html?o=1)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-20T21:47:33.683

使用 Microsoft 提供的 90 天试用版 Windows 8，我已经能够验证我的解决方法确实有效。如果您想一次性支付一次代码签名证书而不是支付年费，这种方法也应该适用于您，但我无法做出任何保证。我的解决方案是每台机器，但应该很容易转换为每用户工作。

**这是我的解决方案：**

1.  设置您自己的证书基础结构。
2.  将根 CA 证书、根颁发的任何中间 CA 证书以及中间 CA 颁发的任何代码签名证书的副本作为 .cer 文件发布到您的网站。
3.  在您的网站上安装由您的根 CA 颁发的 SSL 证书。
4.  创建执行以下任务的安装程序/下载程序应用程序：
    *   将根 CA 证书（从您的网站，步骤 2）安装到最终用户计算机的受信任的根证书颁发机构存储中。
    *   通过将 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\2!2301 设置为 0，禁用受信任站点 Internet 区域的 SmartScreen 筛选器。
    *   通过添加注册表项 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings\ZoneMap\Domains\yourdomain.com\yoursubdomain 将您的网站添加到区域地图。
    *   通过在上一步中创建的密钥中创建一个名为 https 的 DWORD 值 2，将您的域映射到受信任的站点区域。
5.  从 Microsoft 受信任的根程序的成员处购买代码签名证书，最好是 EV 证书。
    *   在您购买之前，请确保 CA 为您的代码签名证书使用的证书和时间戳方案不会导致 OID 的 1.3.6.1.4.1.311.10.3.13 或 1.3.6.1.4.1.311.10.3.14，因为这些会使证书过期时签名过期，无论是否带有时间戳。
6.  使用在第 5 步中购买的证书对您的下载程序/安装程序进行签名和时间戳。验证签名没有生命周期限制。如果一切正常，您可以将购买的代码签名证书放在安全的地方并将其锁定。
7.  将您的下载器/安装程序发布到您的网站。使其成为您所有产品的先决条件下载。
8.  从此时起，您可以使用由您自己的内部证书颁发机构颁发的代码签名证书（以及其他证书），而无需使用 SmartScreen 过滤器。

到目前为止，我使用这种方法收到的最糟糕的警告是“这种类型的文件可能会损害您的计算机”。这就是典型的“你正在下载一个可执行文件！” 警告。它不会隐藏“运行”选项，并且不会出现在使用通过单击 VS2010 中的“发布”生成的引导网页进行的 ClickOnce 部署中。

感谢所有评论和链接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-04T23:47:32.030

即使没有管理员权限，我也找到了一种非常简单的绕过过滤器的方法。你需要做的是：

1.  打开记事本
2.  键入以下行：`@%*`
3.  将文件另存为`"SkipSmartScreen.bat"`（是的，带引号）在与您的应用程序相同的文件夹中。您可以稍后重命名批处理文件
4.  要启动您的应用程序，请将您的 exe 拖到批处理文件中

这将绕过智能屏幕过滤​​器。

在 Windows 10 家庭版、专业版和企业版以及 Windows 8 专业版上测试。

这个怎么运作：

*   `@`- 这只是为了看起来，它隐藏了正在执行的命令的名称
*   `%*`- 这扩展到所有传递的命令行参数（例如，您在批处理文件中放置的文件
*   整件事：它通过批处理文件执行文件，就好像它是批处理文件中的一行一样。出于某种原因，Windows 不对从批处理文件执行的文件进行任何检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-09T07:49:44.970

以下是如何关闭 SmartScreen 的很好解释：
- [Windows SmartScreen - 在 Windows 8 中打开或关闭](http://www.eightforums.com/tutorials/2631-windows-smartscreen-turn-off-windows-8-a.html)
-[取消选中文件夹选项中的选项](http://www.zdnet.com/article/windows-8-smartscreen-file-checker-smart-feature-or-more-dumb-dialog-box-security/)

我用了什么，什么对我有用？这是第一个链接的“选项一”：

1.  打开**控制面板**（图标视图），然后单击/点击**操作中心**图标。
2.  在操作中心的左窗格中，单击/点击**更改 Windows SmartScreen 设置**链接。
3.  **如果UAC**提示，则单击/点击**Yes**。
4.  选择（点）您希望 Windows SmartScreen 如何处理无法识别的程序的选项，然后单击/点击**OK**。
    注意：默认选项是**在从 Internet 运行无法识别的应用程序之前获得管理员批准**。
5.  完成后，您可以根据需要关闭操作中心。

我希望这就是你要找的。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-23T12:40:47.193

老问题，但我最近遇到了同样的问题，我需要将一个小的安装包下载到用户的电脑上供他们执行。但一如既往，SmartScreen 阻止了下载...

我发现的一种解决方法是将您的安装程序文件打包为 .zip（或类似文件），然后让用户下载此压缩文件并在其中执行安装程序。这至少是我必须在我的场景中使用的“最漂亮”的解决方案。

此方法使您免于将任何类型的证书分配给您的文件。您只需要您的用户信任您，但这将绕过 SmartScreen 过滤器。

我希望这可以用作解决您的问题的方法。

# android - 在 Android 中获取活跃的应用程序大小

> ID：15538927
> 
> 赞同：0
> 
> 时间：2013-03-21T03:25:12.417
> 
> 标签：android

我想在 android 中显示活动应用程序的大小。我怎样才能做到这一点 ？

我看过以下代码，但它显示错误。

```
 PackageManager pm = getPackageManager();

Method getPackageSizeInfo = pm.getClass().getMethod(
    "getPackageSizeInfo", String.class, IPackageStatsObserver.class);

getPackageSizeInfo.invoke(pm, "com.android.mms",
    new IPackageStatsObserver.Stub() {

        @Override
        public void onGetStatsCompleted(PackageStats pStats, boolean succeeded)
            throws RemoteException {

            Log.i(TAG, "codeSize: " + pStats.codeSize);
        }
    }); 
```

伙计们，请帮我找出已安装应用程序的大小。

# c# - 如何获得所有完成在其属性值中建立的要求的类属性？

> ID：15538928
> 
> 赞同：1
> 
> 时间：2013-03-21T03:25:54.237
> 
> 标签：c#, reflection, properties, filter, attributes

为了清楚起见，举个小例子：

```
public class Book
{
    [MyAttrib(isListed = true)]
    public string Name;

    [MyAttrib(isListed = false)]
    public DateTime ReleaseDate;

    [MyAttrib(isListed = true)]
    public int PagesNumber;

    [MyAttrib(isListed = false)]
    public float Price;
} 
```

问题是：如何仅获取`isListed`设置了 bool 参数的`true`属性`MyAttrib`？

这就是我得到的：

```
PropertyInfo[] myProps = myBookInstance.
                         GetType().
                         GetProperties().
                         Where(x => (x.GetCustomAttributes(typeof(MyAttrib), false).Length > 0)).ToArray(); 
```

`myProps`从 获取所有属性，但是现在，当其参数返回 false`Book`时，我无法弄清楚如何排除它们。`isListed`

```
foreach (PropertyInfo prop in myProps)
{
    object[] attribs = myProps.GetCustomAttributes(false);

    foreach (object att in attribs)
    {
        MyAttrib myAtt = att as MyAttrib;

        if (myAtt != null)
        {
            if (myAtt.isListed.Equals(false))
            {
                // if is true, should I add this property to another PropertyInfo[]?
                // is there any way to filter?
            }
        }
    }
} 
```

任何建议都会非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:39:48.857

我认为使用 Linq 的查询语法会更容易一些。

```
var propList = 
    from prop in myBookInstance.GetType()
                               .GetProperties()
    let attrib = prop.GetCustomAttributes(typeof(MyAttrib), false)
                     .Cast<MyAttrib>()
                     .FirstOrDefault()
    where attrib != null && attrib.isListed
    select prop; 
```

# android - 带有 TextView 和 Spinner 的 Android ListView

> ID：15538929
> 
> 赞同：0
> 
> 时间：2013-03-21T03:25:59.690
> 
> 标签：android, android-listview, android-spinner

这里的初学者问题我想知道是否有人可以指出我正确的方向。我需要一个“帐户”的列表视图，其中每个项目都将包含一个文本视图，以及一个可以从预设数量中选择的微调器，因此每个项目将如下所示：

```
 ________________________
|TextView---------Spinner|
|________________________| 
```

这是我到目前为止所拥有的：
**activity_topup.xml**这是活动的主要 xml

```
<ListView 
         android:id="@+id/topup_accounts_listview" 
         android:layout_width="match_parent"
         android:layout_height="0dp"
         android:layout_weight="1"
         android:background="@color/stq_grey"
         android:divider="@android:color/transparent"
         android:dividerHeight="20.0sp"/> 
```

然后在我的 java 文件**TopUpActivity.java**

```
String[] listAccounts = { "Acc1", "Acc2", "Acc3"};        
accountListAdapter = new ArrayAdapter<String>(this, R.layout.listview_item_accounts, R.id.accounts_list_tv, listAccounts);
        listView = (ListView)findViewById(R.id.topup_accounts_listview);
        listView.setAdapter(accountListAdapter); 
```

**listview_item_accounts.xml**包含每个项目的内容（文本视图和微调器）

```
 <TextView
    android:id="@+id/accounts_list_tv"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@+id/accounts_list_amt_spinner"
    android:background="@drawable/list_item_selector_grey"
    style="@style/ListText" />

 <Spinner
    android:id="@id/accounts_list_amt_spinner"
    android:layout_width="96dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:prompt="@string/topup_amt_prompt"
    android:background="@drawable/list_item_selector_blue"
    style="@style/ListText"  /> 
```

我在正确的轨道上吗？！结果是正确的，但我不太清楚如何填充微调器，我只能使用我认为的这种方法填充文本视图。我将其添加到 java 文件中以尝试填充微调器，但微调器仍然为空：

```
//Inflate the listview items
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View vi = inflater.inflate(R.layout.listview_item_accounts, null);
//Get the spinner
amt = (Spinner)vi.findViewById(R.id.accounts_list_amt_spinner);
//Add the values to the spinner by setting this adapter
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                R.array.topup_amts, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
amt.setAdapter(adapter); 
```

[结果如下](http://imageshack.us/a/img543/300/listviewm.png)（微调器的背景为蓝色）：

当我单击其中一个为空的微调器时，[我得到了这个](http://imageshack.us/a/img138/2060/screenshot201303211259.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:34:11.547

您必须在它的父视图中找到您的子视图。例如，在`getView`您的适配器中，您`iflate`的项目（来自 listview_item_accounts.xml）作为名称为“item”的 GroupView，然后您必须在其中找到微调器：

```
Spinner amt = (Spinner)item.findViewById(R.id.accounts_list_amt_spinner); 
```

如果你使用

```
Spinner amt = (Spinner)findViewById(R.id.accounts_list_amt_spinner); 
```

您试图在内容视图中找到其 id 等于“R.id.accounts_list_amt_spinner”的视图，而不是在每个项目中。

# javascript - Javascript数组结果返回未定义

> ID：15538938
> 
> 赞同：2
> 
> 时间：2013-03-21T03:27:17.810
> 
> 标签：javascript, jquery

我一直在做一个简单的数学游戏，在游戏结束后让整体答案结果返回时遇到问题。

这是我的返回函数的样子

```
 function pShowResults() {
    var pNumResults = document.getElementById("results");
    for (var i = 0; i <= 10; i++) {
        pNumStore.push(pNumGuess[i]);
        var pNumTable = document.createElement("div");
        pNumTable.innerHTML = (pNumGuess[i]);
        pNumResults.appendChild(pNumTable);
    }
    } 
```

[这是完整的脚本](http://jsfiddle.net/brettlewis/dwdX9/)

非常需要调试帮助。我是新手，所以我猜有很多问题，但只要我能得到反馈的结果，我应该没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:35:53.933

在您的代码中有一个名为 pNumCalc 的函数，您已将其设置为接受一个参数，但您从不传入一个。您使用该参数将结果存储在 pNumGuess 数组中，但由于该参数从未传入，因此猜测永远不会存储，您最终会得到未定义的用户给出的答案。

更新小提琴：http: [//jsfiddle.net/dwdX9/2/](http://jsfiddle.net/dwdX9/2/)。不确定这与您实际想要的有多接近，但希望它能让您走上正确的轨道。

因为 StackOverflow 希望在 JSFiddle 为...时包含代码：

```
pNumCalc(pNumTrack) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:42:44.467

你没有`x`在很多地方传递价值

```
$(document).ready(function () {

    //declare arrays and variables for use below
    var pNum1 = [];
    var pNum2 = [];
    var pNumAns = [];
    var pNumGuess = [];
    var pNumStore = [];
    var pNumCarry = 0;
    var pNumTrack = 0;
    var pNumMessageRight = ['Awesome Job!', 'Correct!', 'Great Job!'];
    var pNumMessageWrong = ['Oh No! That Was Wrong!', 'Incorrect!', 'That\'s Wrong'];

    $(".Play").click(function () {
        $("#popup").attr("class", "on");
        pNumTrack = 0;
         pNumGen(pNumTrack);
    });

    $(".pNumSubmit").click(function () {
        pNumCalc(pNumTrack-1);
    });

    $(".pNumNext").click(function () {
        pNumGen(pNumTrack);
    });

    function pNumGen(x) {
        pNum1[x] = (Math.round(Math.random() * 51));
        pNum2[x] = (Math.round(Math.random() * 51));
        pNumAns[x] = pNum1[x] + pNum2[x];
        $(".pNum1").html(pNum1[x]);
        $(".pNum2").html(pNum2[x]);
        $(".pNumGuess").val("");
        $(".pNum1").html(pNumTrack[x]);
        if (pNumTrack == 2) {
            $(".pNumNext").html("");
            $(".pNumSubmit").html("Close");
            pShowResults();
        }
        pNumTrack++;
    }

    function pNumCalc(x) {
        pNumGuess[x] = $(".pNumGuess").val();
        if (pNumGuess[x] == pNumAns[x]) {
            $(".message").html(pNumMessageRight[Math.floor(Math.random() * pNumMessageRight.length)]);
            $(".pNumNext").html("Next Question >")
        } else {
            $(".message").html(pNumMessageWrong[Math.floor(Math.random() * pNumMessageWrong.length)]);
            $(".pNumNext").html("Maybe The Next Question >")
        }
    }

    function pShowResults() {
        var pNumResults = document.getElementById("results");
        for (var i = 0; i < pNumGuess.length; i++) {
            pNumStore.push(pNumGuess[i]);
            var pNumTable = document.createElement("div");
            pNumTable.innerHTML = (pNumGuess[i]);
            pNumResults.appendChild(pNumTable);
        }
    }

}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/dwdX9/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:34:10.913

您忘记在使用之前定义数组。

```
function pShowResults() {
    var pNumStore = new Array();
    var pNumResults = document.getElementById("results");
    for (var i = 0; i <= 10; i++) {
        pNumStore.push(pNumGuess[i]);
        var pNumTable = document.createElement("div");
        pNumTable.innerHTML = (pNumGuess[i]);
        pNumResults.appendChild(pNumTable);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T03:44:12.243

我必须建议您改用 jquery。访问您的 Fiddle 后，代码似乎存在很多问题。而且你的问题也不清楚。

例如

```
 $(".pNumSubmit").click(function () {
//why x value not passed?
 pNumCalc();
        });

        function pNumCalc(x) {
            pNumGuess[x] = $(".pNumGuess").val();
            if (pNumGuess[x] == pNumAns[x]) {
                $(".message").html(pNumMessageRight[Math.floor(Math.random() * pNumMessageRight.length)]);
                $(".pNumNext").html("Next Question >")
            } else {
                $(".message").html(pNumMessageWrong[Math.floor(Math.random() * pNumMessageWrong.length)]);
                $(".pNumNext").html("Maybe The Next Question >")
            }
        } 
```

请清除返回未定义的数组，以便其他人可以帮助您。

# sql - sqlite union all 优化

> ID：15538940
> 
> 赞同：0
> 
> 时间：2013-03-21T03:27:19.910
> 
> 标签：sql, sqlite, union-all

我有一个看起来像这样的 sqlite DB 查询：

```
SELECT
    origin,
    destination,
    weight,
    rate,
    0 as group
    from groupAZones, groupARates
    where
    tms = groupZone

union all

SELECT
    origin,
    destination,
    weight,
    rate,
    1 as group
    from groupBZones, groupBRates
    where
    tms = groupZone

    union all

SELECT
    origin,
    destination,
    weight,
    rate,
    2 as group
    from groupCZones, groupCRates
    where
    tms = groupZone

    union all

SELECT
    origin,
    destination,
    weight,
    rate,
    3 as group
    from groupDZones, groupDRates
    where
    tms = groupZone 
```

有没有像这样优化查询的好方法？我正在尝试创建一个结合这 4 个表的简单视图。将此用作视图查询，对视图的查询大约需要 13 秒。

我尝试为 4 个表创建索引，但似乎没有帮助。

在 SQL 方面，我是个新手，我知道做一些简单的事情，但我仍在学习高级技巧。

任何指针或信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:56:24.820

CL 指出我应该运行该`EXPLAIN QUERY PLAN`命令。这导致发现 4 个索引中有两个没有被使用。

谢谢CL！

我仍然想知道是否有更好的方法来执行该查询，但现在它正在做我需要它做的事情。

# python - 模块化多维数据集的溢出错误 Python

> ID：15538942
> 
> 赞同：0
> 
> 时间：2013-03-21T03:27:35.673
> 
> 标签：python, overflow

试图解决这个问题：

> 对于正数 n，将 S(n) 定义为整数 x 的和，其中`1 < x < n`和`x^3 ≡ 1 mod n`。
> 
> 当 时`n=91`，x 有 8 个可能的值，即：9、16、22、29、53、74、79、81。因此，`S(91)=9+16+22+29+53+74+79+81=363`。
> 
> 找到 S(13082761331670030)。

当然，我的代码适用于`S(91)`并且在尝试查找时`S(13082761331670030)`出现两个不同的错误。

这是我的代码：

```
 def modcube(n):
     results = []
     for k in range(1,n):
            if k**3%n==1:
             results.append(k)
     return results 
```

这会产生`Overflow error: range has too many items.`当我尝试使用“xrange”而不是“range”时，我收到一条错误消息，指出 python int 太大而无法转换为 c long。我也刚刚尝试了其他几件事，但没有成功。

谁能指出我正确的方向，而不告诉我确切的解决方法？
**请不要剧透。**我已经做了两天了，我的下一个选择是尝试在 Java 中实现它，因为我是 Python 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:25:06.390

我认为您需要在这里了解两个概念：

**1\. C 和 Python 中的整数表示**

您使用的 Python 实现称为 CPython，因为它是使用 C 语言编写的。在 C 中，长整数（通常）是 32 位长。这意味着它可以处理介于 -2147483647 和 2147483648 之间的整数。在 Python 中，当整数超出此范围时，它会将它们转换为任意精度的整数，其中整数的大小仅受计算机内存的限制。但是，对这些任意整数（在 Python 中称为长整数）的操作比对 32 位整数的操作慢一个数量级。

**`range`2.和的区别`xrange`：**

`range`产生一个列表。如果有`range(10)`，它会将列表`[0, 1, ... 9]`完全存储在内存中。这就是为什么在内存中存储一​​个包含 13082761331670030 个项目的列表太过分了。假设每个数字都是 64 位，则需要 93 TB 的 RAM 来存储整个列表！

`xrange`产生一个迭代器。它一一返回每个数字。这样，它允许对列表的每个数字执行操作，而无需将整个列表存储在内存中。但是同样，对 13082761331670030 不同的数字执行计算可能需要比你想象的更多的时间......另一件事`xrange`是它不适用于 Python 长整数；它被限制（出于速度原因）为 32 位整数。这就是为什么您的程序无法使用`xrange`.

* * *

底线：欧拉计划问题（或多或少）按难度分类。你应该先从较低的问题开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T05:51:07.903

你想要提示，而不是解决方案。

提示：

1.  考虑 13082761331670030 的[素数因子](http://www.wolframalpha.com/input/?i=factor%2013082761331670030)等于以下素数： 2 x 3 x 5 x 7 x 11 x 13 x 17 x 19 x 23 x 29 x 31 x 37 x 41 x 43

2.  [中国剩余定理](http://en.wikipedia.org/wiki/Chinese_remainder_theorem)

3.  仅仅因为`x^3 ≡ 1 mod n`并不意味着除了 3 之外没有其他值满足这个条件。具体来说，`prime1 ** (prime2 - 2) % prime2`

我的 Python 解决方案是 86 毫秒...

# php - 过滤传出的 html 文件

> ID：15538944
> 
> 赞同：2
> 
> 时间：2013-03-21T03:27:40.447
> 
> 标签：php, html, .htaccess

我在所有`*.html`文件中都有自定义语法，这些文件需要`filter.php`在提供服务之前进行过滤。我假设这可以用`.htaccess`.

注意，我不希望解析`*.html`为 PHP。

![例子](../Images/9a60c8ecc775276118f31c0942ec6d41.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:31:53.487

在您的 htaccess 中，添加

```
RewriteRule (.*\.html) filter.php?htmlfile=$1 
```

现在，在 filter.php 中，您可以

```
$html = file_get_contents($_GET['htmlfile']);
// and do whatever you need to do
// then
echo $html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:34:22.397

在你的 htaccess 中：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.+)\.html$ controller.php?file=$1 [NC,L] 
```

在你的 php 文件中你可以有

```
if(isset($_GET["file"])
{
file logic ......
redirect code
} 
```

# python - 扭曲的python协议之间的数据分离

> ID：15538950
> 
> 赞同：0
> 
> 时间：2013-03-21T03:28:09.110
> 
> 标签：python, protocols, twisted

根据[扭曲的文档](http://twistedmatrix.com/documents/current/core/howto/servers.html) ，每次建立连接时都会创建一个新的协议实例，但是我正在观察两者之间的某种数据共享。

简而言之，我已经定义了一个类，每个协议将用于状态

```
class JSONCollector():
    char_buffer = StringIO.StringIO()
    ...    

    def process_data(self, data):
        ...       
        self.char_buffer.write(char) 
```

协议实例化它

```
class JSONProtocol(protocol.Protocol):
    def __init__(self):
        self.json_collector = JSONCollector()

    def dataReceived(self, data):
        self.json_collector.process_data(data)
        self.transport.write(str(self)) 
```

然而，当我将以下语句添加到 dataReceived self.transport.write(str(self.json_collector.char_buffer)) self.transport.write(str(self)) 时，每个连接似乎都获得了相同的 JSONCollector 实例

我得到以下信息：

连接 1：0x968ae2c 处的 StringIO.StringIO 实例>< 0x969036c 处的**主**.JSONProtocol 实例>

连接 2：0x968ae2c 处的 StringIO.StringIO 实例>< 0x969068c 处的**主**.JSONProtocol 实例>

此外，每次我输入文本时，都会显示从其他连接输入的文本。所以似乎出于某种奇怪的原因 StringIO() 实例是共享的，我是否遗漏了什么。我想我可以使用工厂通过 addr 分隔缓冲区并确保每个协议只使用自己的缓冲区，但不需要共享存储，我宁愿不跳过箍

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:24:38.283

这：

```
class JSONCollector():
    char_buffer = StringIO.StringIO() 
```

似乎是一个错误，也是你麻烦的根源。相反，试试这个：

```
class JSONCollector():
    def __init__(self):
        self.char_buffer = StringIO.StringIO() 
```

否则，您`char_buffer`将为整个类类型制作一个，而不是每个实例一个。

# c++ - 我在理解如何使用队列时遇到问题

> ID：15538953
> 
> 赞同：0
> 
> 时间：2013-03-21T03:28:20.013
> 
> 标签：c++

下面是我的数据结构课的教授幻灯片之一，我一直在做研究，无法弄清楚这里的概念，我必须在我的数据结构课上用它来构建一个程序。

.back 有什么作用？我们将什么发送到下面的实际功能中：请解释一下，就像我是一个 6 岁的孩子......

ADT-Queue（工具包函数数组实现）

```
//Create a q.
void create_queue(Queue & q)
{
    q.back = -1;
}

//check if Queue is empty
int empty( const QUEUE & q)
{
    return (q.back == -1);
}

//Purge elements in the queue
void purge(Queue & q)
{
    q.back = -1;
}

//Add an element on the q.
void enq(Queue & q, CONST INFOREC & item)
{
    ++ q.back;
q.i[q.back] = item; // i is an array of ints previously declared
}

// delete an item from the q
void deq(Queue &q, INFOREC & item)
{
    int ct; 
    item =q.i[0]; front;
    // step forward loop, moving the entire array components 1 place forward and
    // shifting the pointers
    for (ct = 1; ct < q.back; ++ct);
    q.i[ct -1] = q.i [ct];  
    --q.back;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:33:32.553

**编辑**以反映问题中给出的新信息。

`back`是指向队列中最后一个元素的指针，也就是最近添加的元素。

与 一起`i`，这就是队列维护其内部数据结构所需的全部内容。由于`i`是静态分配的，并且元素仅使用 索引`back`，因此没有必要从队列中显式删除元素；这就是为什么不需要对 inside 进行`i`更改`purge()`。如果你添加元素，`purge()`或者`deq()`它们，然后添加更多元素，新元素只会覆盖内存中以前的元素，这正是你想要的；并且由于`back`在这些方法中的每一个中都进行了适当的调整，因此不可能访问逻辑上不再在队列中的数据成员，即使它们仍然存在于系统内存中。

请注意，“de”中的“de”`deq`不代表“delete”；`deq`是“dequeue”的缩写，它是从队列中检索最旧元素的标准术语。将元素添加到队列后面的相应术语是“入队”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T03:37:49.317

队列的前面在0，后面在q.back，所以队列为空时q.back初始化为-1。

检查队列是否为空，返回为 -1 时返回 true，否则返回 false：

```
bool empty(const Queue & q)
{
    return (q.back == -1);
} 
```

purge 使队列再次为空，因此与 init 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T03:45:36.180

好的，我的猜测是 ADT 的设计方式是队列始终指向添加的第一个元素，并且`back`当队列中没有元素时始终为 -1。

检查`create_queue`，创建了一个新队列并且还没有元素入队，因此初始化`back`为 -1

同样`empty`，如果不存在任何元素，则`back`仍为 -1

在`purge`中，所有元素都被删除，因此`back`需要更新为 -1

所以如果有一个名为`enqueue`..的函数`back`将被更新为一个**不是**-1的值

PS:- 这是一个疯狂的猜测，因为在我们看到完整的代码之前我们无法预测 :)

*****编辑***** 根据我建议的更新代码工作正常，如果队列为空，则返回-1...否则它的数组指向从 0 到 n-1(max_queue_size) ... 0 -->第一个元素**

# mysql - 您必须为此表定义至少一个映射

> ID：15538959
> 
> 赞同：4
> 
> 时间：2013-03-21T03:29:01.290
> 
> 标签：mysql, jpa, jsf-2, ejb

**这个问题已经结束**

我正在尝试制作一个发送消息的应用程序。当我创建新消息时，我必须创建会话表以区分用户 A、B、C 的会话。然后创建会话成员以插入消息的所有接收者，然后在消息表中插入消息内容和发送者。ahm 尝试检查 ERD 以澄清事情......抱歉不好解释事情

谢谢..这里真的需要帮助...

**实体对话**

```
@Entity
@Table(name = "conversation")
@XmlRootElement
@NamedQueries({
@NamedQuery(name = "Conversation.findAll", query = "SELECT c FROM Conversation c"),
@NamedQuery(name = "Conversation.findById", query = "SELECT c FROM Conversation c WHERE c.id = :id")})

public class Conversation implements Serializable {
@OneToMany(cascade = CascadeType.ALL, mappedBy = "conversationId")
private Collection<Message> messageCollection;
private static final long serialVersionUID = 1L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "id")
private Integer id;
@JoinTable(name = "conversation_member", joinColumns = {
    @JoinColumn(name = "conversation_id", referencedColumnName = "id")}, inverseJoinColumns = {
    @JoinColumn(name = "user_id", referencedColumnName = "user_id")})
@ManyToMany
private Collection<User> userCollection;

public Conversation() {
}

public Conversation(Integer id) {
    this.id = id;
}

public Integer getId() {
    return id;
}

public void setId(Integer id) {
    this.id = id;
}

@XmlTransient
public Collection<User> getUserCollection() {
    return userCollection;
}

public void setUserCollection(Collection<User> userCollection) {
    this.userCollection = userCollection;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (id != null ? id.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Conversation)) {
        return false;
    }
    Conversation other = (Conversation) object;
    if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "" + id ;
}

@XmlTransient
public Collection<Message> getMessageCollection() {
    return messageCollection;
}

public void setMessageCollection(Collection<Message> messageCollection) {
    this.messageCollection = messageCollection;
} 
```

}

**对话控制器**

```
 public void create() {
    try {

        getFacade().create(current);

    } catch (Exception e) {
        System.out.println(e);
    }
} 
```

**ERD**

![在此处输入图像描述](../Images/331e07be8d063ee5ef0602972df11215.png)

**玻璃鱼 3.1.2**

```
 WARNING: Local Exception Stack: 
    Exception [EclipseLink-6023] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.QueryException
    Exception Description: The list of fields to insert into the table [DatabaseTable(conversation)] is empty.  You must define at least one mapping for this table.
at org.eclipse.persistence.exceptions.QueryException.objectToInsertIsEmpty(QueryException.java:935)
at org.eclipse.persistence.internal.expressions.SQLInsertStatement.buildCallWithoutReturning(SQLInsertStatement.java:59)
at org.eclipse.persistence.internal.expressions.SQLModifyStatement.buildCall(SQLModifyStatement.java:61)
at org.eclipse.persistence.descriptors.ClassDescriptor.buildCallFromStatement(ClassDescriptor.java:740)
at org.eclipse.persistence.internal.queries.StatementQueryMechanism.setCallFromStatement(StatementQueryMechanism.java:387)
at org.eclipse.persistence.internal.queries.StatementQueryMechanism.prepareInsertObject(StatementQueryMechanism.java:301)
at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.prepareInsertObject(ExpressionQueryMechanism.java:1583)
at org.eclipse.persistence.queries.InsertObjectQuery.prepare(InsertObjectQuery.java:109)
at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:613)
at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:575)
at org.eclipse.persistence.internal.sessions.CommitManager.commitNewObjectsForClassWithChangeSet(CommitManager.java:216)
at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:123)
at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:3799)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1415)
at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:636)
at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithPreBuiltChangeSet(UnitOfWorkImpl.java:1561)
at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.writeChanges(RepeatableWriteUnitOfWork.java:447)
at org.eclipse.persistence.internal.jpa.EntityManagerImpl.flush(EntityManagerImpl.java:780)
at com.sun.enterprise.container.common.impl.EntityManagerWrapper.flush(EntityManagerWrapper.java:418)
at biz.dtit.golf.entities.AbstractFacade.create(AbstractFacade.java:29)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
at $Proxy149.create(Unknown Source)
at biz.dtit.golf.entities.__EJB31_Generated__ConversationFacade__Intf____Bean__.create(Unknown Source)
at biz.dtit.golf.entities.ConversationController.create(ConversationController.java:83)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at javax.el.BeanELResolver.invokeMethod(BeanELResolver.java:779)
at javax.el.BeanELResolver.invoke(BeanELResolver.java:528)
at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:257)
at com.sun.el.parser.AstValue.invoke(AstValue.java:248)
at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at SessionFilter.doFilter(SessionFilter.java:41)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at NoCacheFilter.doFilter(NoCacheFilter.java:41)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:30:30.520

问题是您没有为插入映射的列，因此您的 INSERT SQL 将为数据库将拒绝的空，因此您无法在表中插入一行。

要么添加一列，要么不使用 IDENTITY 作为您的 ID（无论如何我都不会推荐 IDENTITY，因为它无法预先分配）。请改用 TABLE。

# mysql - 为什么在将 DISTINCT 值插入表时出现“重复条目”错误？

> ID：15538960
> 
> 赞同：2
> 
> 时间：2013-03-21T03:29:10.640
> 
> 标签：mysql, sql

我正在尝试将表的一个字段的不同值插入到表`requests`的唯一字段中`pastmonth`

```
CREATE TABLE `pastmonth` (
  `video_id` char(5) DEFAULT NULL,
  PRIMARY KEY (`video_id`)
);

INSERT INTO pastmonth (video_id)
SELECT DISTINCT (video_id)
FROM requests
WHERE exec_datetime >= NOW() - 60*24*60*60; 
```

但是我收到此错误

```
Error Code: 1062\. Duplicate entry 'abcde' for key 'PRIMARY' 
```

我不相信表中的值有重复的条目，`abcde`因为`requests`以下查询表明只有 1 个条目，但是否存在无关紧要，因为无论如何我都在选择 DISTINCT 值。

```
SELECT COUNT(*) FROM requests WHERE video_id = 'abcde';

COUNT(*)
1 
```

我有一个非唯一索引，`requests.video_id`但我认为这与我遇到的问题无关。是否有可能我的 btree 索引已损坏？

**编辑**

```
CREATE TABLE `requests` (
  `request_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `video_id` char(5) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT NULL,
  `exec_datetime` datetime DEFAULT NULL,
  PRIMARY KEY (`request_id`),
  KEY `exec_datetime` (`exec_datetime`),
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:57:06.970

在`requests`表中，`video_id`字段定义为：

```
`video_id` char(5) CHARACTER SET latin1 COLLATE latin1_bin DEFAULT NULL, 
```

但在新表中，它被定义为：

```
`video_id` char(5) 
```

字符集和相应的排序规则可能存在差异。确保两个字段具有完全相同的字符集和排序规则。

# mysql - MySQL 语法错误

> ID：15538967
> 
> 赞同：0
> 
> 时间：2013-03-21T03:30:06.143
> 
> 标签：mysql, database, syntax

```
CREATE TABLE Customer(
custID INT NOT NULL AUTO_INCREMENT,
custName VARCHAR(255) NOT NULL,
custAddress VARCHAR(255) NOT NULL,
CONSTRAINT pk_Customer PRIMARY KEY (custID)
), 
```

我将它作为我正在设置的数据库的一部分，但是每当我尝试运行包含在其中的 .sql 文件时，我都会收到以下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '
CREATE TABLE Customer(
    custID INT NOT NULL AUTO_INCREMENT,
    custName VARCHAR(' at line 8 
```

有什么想法有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:34:04.450

从 end`CREATE TABLE`语句中删除 ,

```
CREATE TABLE Customer(
  custID INT NOT NULL AUTO_INCREMENT,
  custName VARCHAR(255) NOT NULL,
  custAddress VARCHAR(255) NOT NULL,
  CONSTRAINT pk_Customer PRIMARY KEY (custID)
) 
```

或者使用分号代替逗号：

```
CREATE TABLE Customer(
      custID INT NOT NULL AUTO_INCREMENT,
      custName VARCHAR(255) NOT NULL,
      custAddress VARCHAR(255) NOT NULL,
      CONSTRAINT pk_Customer PRIMARY KEY (custID)
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:34:51.177

如果您删除它对我有用，则末尾有逗号。

```
CREATE TABLE Customer(
custID INT NOT NULL AUTO_INCREMENT,
custName VARCHAR(255) NOT NULL,
custAddress VARCHAR(255) NOT NULL,
CONSTRAINT pk_Customer PRIMARY KEY (custID)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T05:30:07.790

我们最后不使用“，”来分隔两个sql查询，您必须使用“;” 如果您正在运行单个查询，那么您不需要。

```
CREATE TABLE Customer(
        custID INT NOT NULL AUTO_INCREMENT,
        custName VARCHAR(255) NOT NULL,
        custAddress VARCHAR(255) NOT NULL,
        CONSTRAINT pk_Customer PRIMARY KEY (custID)
                    ) 
```

# python - Python中的Markdown无法正确呈现链接

> ID：15538975
> 
> 赞同：1
> 
> 时间：2013-03-21T03:30:52.460
> 
> 标签：python, flask, markdown, flask-flatpages

我正在使用 Python、Flask 和 Flask-FlatPages 构建一个网站。据我所知，FlatPages 使用 Jinja2 模板引擎和 Markdown 来简化内容的格式。

到目前为止，我一直在通过编写以下原始 HTML 来包含图像，并将其放在其他降价内容中：

```
<figure>
    <a href="/static/path/to/image.png" title="Full size">
        <img src="/static/path/to/image.png" alt="">
    </a>
    <figcaption>
        Figure caption.
    </figcaption>
</figure> 
```

我想通过使用markdown的[链接](http://daringfireball.net/projects/markdown/syntax#img)语法来简化这个过程，如下所示：

```
<figure>
    [![][image]][image]
    <figcaption>
        Figure caption.
    </figcaption>
</figure>
[image]: /static/link/to/image.png (Full size) 
```

当我将此代码放入[Web Dingus](http://daringfireball.net/projects/markdown/dingus)时，它会产生以下输出：

```
<p><figure>
    <a href="/static/link/to/image.png" title="Full size">
        <img src="/static/link/to/image.png" alt="" title="Full size" />
    </a>
    <figcaption>
        Figure caption.
    </figcaption>
</figure></p> 
```

但是，当我将相同的代码放入我的网站的降价文档时，我得到以下信息：

```
<figure>
    [![][image]][image]
    <figcaption>
        Figure caption.
    </figcaption>
</figure> 
```

* * *

**版本信息**

```
Flask==0.9
Flask-Assets==0.8
Flask-FlatPages==0.3
Flask-Markdown==0.3
Jinja2==2.6
Markdown==2.2.1
Werkzeug==0.8.3 
```

# eclipse - 安装插件后 Eclipse 未启动

> ID：15538980
> 
> 赞同：0
> 
> 时间：2013-03-21T03:31:30.540
> 
> 标签：eclipse, sdk

我从帮助>在eclipse中安装新软件下载了一些插件。下载后要重新启动。重新启动后它没有打开。说发生错误，请参阅日志文件1363836429331。我的eclipse.ini是-

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-product
com.android.ide.eclipse.adt.package.product
--launcher.XXMaxPermSize
256m
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.6
-Declipse.buildId=v21.1.0-569685
-Xms40m
-Xmx768m 
```

我使用的是 32 位的 Windows 7。

# sql - SQL Server - 选择满足特定条件的列？

> ID：15538985
> 
> 赞同：2
> 
> 时间：2013-03-21T03:32:21.257
> 
> 标签：sql, sql-server-2008

我的 COLUMNS 只能包含三个值或 var 字符 - 经济、基本、豪华。我想选择一个 ROW 并只显示那些包含奢侈品的列。问题是有很多这样的列 - 大约 50 个。我不想在我的选择查询中键入所有这些列的名称。有没有更短更简单的替代方案？我应该使用哪个查询？

我正在考虑这样的事情（**这是一个假查询**） -

```
@declare Column_Name varchar(30)
select Column_Name where Column_Value = 'luxury' 
from ATable
where rowId = 'row 5'; 
```

表结构 -

```
rowId | Column1 | Column2 | Column3..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:24:09.533

我已经为你创建了一个存储过程。

此过程检查 MSSQL 元以构建动态 SQL 字符串，该字符串返回包含列名`N`及其值的结果，以及从指定表中检索该值`V`的相应行键。`K`

执行此操作时，结果存储在名为##ColumnsByValue 的全局临时表中，然后可以直接查询。

通过执行以下脚本创建`GetColumnsByValue`存储过程：

```
-- =============================================
-- Author:      Ben Roberts (sepster@internode.on.net)
-- Create date: 22 Mar 2013
-- Description: Returns the names of columns that contain the specified value, for a given row
-- =============================================
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
IF OBJECT_ID ( 'dbo.GetColumnsByValue', 'P' ) IS NOT NULL 
    DROP PROCEDURE dbo.GetColumnsByValue;
GO
CREATE PROCEDURE dbo.GetColumnsByValue
    -- Add the parameters for the stored procedure here
    @idColumn sysname,
    @valueToFind nvarchar(255), 
    @dbName sysname,
    @tableName sysname,
    @schemaName sysname,
    @debugMode int = 0

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @SQL nvarchar(max);
    DECLARE @SQLUnion nvarchar(max);
    DECLARE @colName sysname;
    DECLARE @dbContext nvarchar(256);
    DECLARE @Union nvarchar(10);

    SELECT @dbContext = @dbName + '.' + @schemaName + '.sp_executeSQL';
    SELECT @SQLUnion = '';
    SELECT @Union = '';

    IF OBJECT_ID ( 'tempdb..##GetColumnsByValueIgnoreList') IS NULL -- no columns to ingore have been specified, need to create an empty list.
    BEGIN
        CREATE TABLE ##GetColumnsByValueIgnoreList (column_name nvarchar(255));
    END

    DECLARE DBcursor CURSOR FOR
        SELECT 
            COLUMN_NAME
        FROM 
            INFORMATION_SCHEMA.COLUMNS
        WHERE 
            TABLE_NAME = @tableName 
            AND 
            TABLE_SCHEMA = @schemaName;

    OPEN DBcursor; 
        FETCH DBcursor INTO @colName;
        WHILE (@@FETCH_STATUS = 0)
        BEGIN
            IF (
                @colName != @idColumn
                AND
                @colName NOT IN (SELECT column_name FROM ##GetColumnsByValueIgnoreList)
            )
            BEGIN
                SELECT @SQL = 'SELECT '+@idColumn+' as K, '''+@colName+''' as N, ' +@colName+ ' as V FROM ' + @dbName + '.' + @schemaName + '.' + @tableName;
                --PRINT @SQL;
                SELECT @SQLUnion = @SQL + @Union + @SQLUnion;
                SELECT @Union = ' UNION ';
            END
            FETCH  DBcursor INTO @colName;
        END; -- while
    CLOSE DBcursor; DEALLOCATE DBcursor;

    IF (@debugMode != 0)
        BEGIN
            PRINT @SQLUnion;
            PRINT @dbContext;
        END
    ELSE
        BEGIN
            -- Delete the temp table if it has already been created.
            IF OBJECT_ID ('tempdb..##ColumnsByValue') IS NOT NULL 
                BEGIN 
                    DROP TABLE ##ColumnsByValue 
                END

            -- Create a new temp table
            CREATE TABLE ##ColumnsByValue (
                K nvarchar(255), -- Key
                N nvarchar(255), -- Column Name
                V nvarchar(255)  -- Column Value
            )

            -- Populate it with the results from our dynamically generated SQL.
            INSERT INTO ##ColumnsByValue EXEC @dbContext @SQLUnion;
        END
END
GO 
```

SP 将几个输入作为参数，这些在以下代码中进行了解释。

另请注意，我提供了一种机制来添加“忽略列表”作为输入：

*   这允许您列出不应包含在结果中的任何列名。
*   您不需要添加您正在使用的列作为您的键，即`row_id`来自您的示例结构。
*   您必须包含其他不包含的列，`varchar`因为这些会导致错误（因为 SP 只是`varchar`对其查看的所有列进行比较）。
*   这是通过您必须创建/填充的临时表完成的
*   您的示例表结构表明该表仅包含感兴趣的列，因此这可能不适用于您。

我已经包含了如何执行此操作的示例代码（但仅在*需要*时才执行此操作）：

```
IF OBJECT_ID ( 'tempdb..##GetColumnsByValueIgnoreList') IS NOT NULL
    BEGIN
        DROP TABLE ##GetColumnsByValueIgnoreList;
    END
CREATE TABLE ##GetColumnsByValueIgnoreList (column_name nvarchar(255));
INSERT INTO ##GetColumnsByValueIgnoreList VALUES ('a_column');
INSERT INTO ##GetColumnsByValueIgnoreList VALUES ('another_column');
INSERT INTO ##GetColumnsByValueIgnoreList VALUES ('yet_another_column'); 
```

现在，要启动构建临时结果表的过程，请使用以下代码（当然，还要进行适当的修改）。

```
-- Build the ##ColumnsByValue table
EXEC dbo.GetColumnsByValue
    @idColumn = 'row_id',   -- The name of the column that contains your row ID (eg probably your PK column)
    @dbName = 'your_db_name',
    @tableName = 'your_table_name',
    @schemaName = 'dbo',
    @debugMode = 0          -- Set this to 1 if you just want a print out of the SQL used to build the temp table, to 0 if you want the temp table populated 
```

这给您留下了`##ColumnsByValue`，您可以在其上执行您需要的任何搜索，例如：

```
select * from ##ColumnsByValue WHERE v = 'luxury' and k = 5 --some_row_id 
```

您需要为要检查的每个表重新执行存储过程（如果相关，请在其之前创建/修改忽略列表表）。

这种方法的一个问题是在您的情况下可能会超出 nvarchar 长度。你可能会。需要使用不同的数据类型，减少列名长度等。或者将其分解为子步骤并将结果合并在一起以获得您想要的结果集。

我担心的另一个问题是，对于您的特定场景来说，这完全是矫枉过正，一次性脚本到查询窗口将为您提供所需内容的基础，然后在 Notepad++ 中进行一些巧妙的文本编辑将为您提供所有在那里......因此这个问题可能会（并且相当合理地）让你不这样做！但这是一个很好的一般情况问题，因此值得任何对未来感兴趣的人回答;-)

# python - 使用beautifulsoup从html标签中提取文本

> ID：15538986
> 
> 赞同：1
> 
> 时间：2013-03-21T03:32:24.487
> 
> 标签：python, html, beautifulsoup, text-extraction

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T04:08:50.913

尝试

```
data=[b.string for b in main_div.findAll('b')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T05:12:23.640

也许是这样的？

```
import BeautifulSoup

html = '''<div class="txt"><br> 
\nPower: <b>On</b><br><br>
\nSource: <b>DVI</b><br><br>
\nLamp runtime: <b>396</b> hours<br>
\nLamp remaining: <b>2035</b> hours<br>
\nTotal operation: <b>2551</b> hours<br>
\n</div>'''

soup = BeautifulSoup.BeautifulSoup(html)
bTags = [] 

for i in soup.findAll('b'):
    bTags.append(i.text) 
```

bTags的内容：

```
[u'On', u'DVI', u'396', u'2035', u'2551'] 
```

# c++ - GDB 找不到在 boost BGL 的头文件中定义的符号

> ID：15538989
> 
> 赞同：1
> 
> 时间：2013-03-21T03:32:42.580
> 
> 标签：c++, boost, gdb, inline, symbols

我能够在 OSX 10.8.3 上编译和运行使用 C++ boost 图形库 (BGL) 的可执行文件。但是当我尝试使用 gdb 或 Xcode 进行调试时，调试器无法找到 BGL 头文件中定义的符号`adjacency_list.hpp`。我查看了文件并尝试了不同的命名空间

```
boost::in_degree 
boost::detail::in_degree 
```

但是调试器找不到符号。似乎函数是内联的并且信息丢失了。我尝试了另一个具有相同结果的函数（add_vertex）。我使用带有标志的 CMake 编译代码，`-DCMAKE_BUILD_TYPE=Debug`并且能够打印其他符号。请建议我该如何解决这个问题。

```
// Trying using 
(gdb) print boost::detail::in_degree
    No symbol "in_degree" in namespace "boost::detail".
(gdb) print boost::detail::in_degree(0, *pGraph)
    No symbol "in_degree" in namespace "boost::detail".
(gdb) print boost::in_degree(0, *pGraph)
    No symbol "in_degree" in namespace "boost".

// Trying using boost::
(gdb) pt boost::in_degree
    No symbol "in_degree" in namespace "boost".
(gdb) pt boost::in_degree(0, *pGraph)
    No symbol "in_degree" in namespace "boost". 
```

# mercurial-subrepos - 克隆父项后，mercurial 子项目未显示为 java 项目

> ID：15538992
> 
> 赞同：1
> 
> 时间：2013-03-21T03:32:48.230
> 
> 标签：mercurial-subrepos

我有一个善变的项目，如下所示：

父：项目 1，它是一个包含 java 文件等的文件夹。

项目 2、项目 3 和项目 4 是子项目，这意味着它们再次驻留在项目 1 文件夹下，并带有自己的 java 文件和其他相关文件。

当我将父项目（项目 1）克隆到 Eclipse 中时，我确实将子项目视为我结帐的一部分。但是，当我对子项目中的 java 文件进行任何更改时，它们的行为似乎不像普通的 java 文件。Eclipse 中没有显示错误，而且它们似乎不是自动构建的。

我想知道这种行为是否正常，或者我唯一的选择是克隆单个子项目以将它们视为 java 项目。意思是克隆项目 2，然后是项目 3，依此类推。

任何帮助表示赞赏。

谢谢。

# c++ - 制定目标后如何设置变量？

> ID：15538993
> 
> 赞同：0
> 
> 时间：2013-03-21T03:33:01.680
> 
> 标签：c++, makefile

我有***.cc****和*****.proto**目录中的文件。***.proto**文件用于生成**.cc**和**.h**文件。**

 **现在我希望**$(SRC)**拥有所有 .cc 文件，包括生成的文件。如何？

```
PROTOS = $(wildcard *.proto)

SRC = $(wildcard *.cc)
OBJS = $(patsubst %.cc,%.o,$(SRC))

all: proto $(OBJS)

proto: $(PROTOS)
    protoc --cpp_out=. $(PROTOS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T03:46:12.690

简短的回答：你不能。Make 在执行任何规则之前确定要执行的规则列表。

长答案：你可以，但你必须让 Make 再次运行：

```
PROTOS = $(wildcard *.proto)

SRC = $(wildcard *.cc)
OBJS = $(patsubst %.cc,%.o,$(SRC))

all: proto
    $(MAKE) objs

proto: $(PROTOS)
    protoc --cpp_out=. $(PROTOS)

objs: $(OBJS) 
```**

# javascript - javascript枚举自动增量？

> ID：15538994
> 
> 赞同：1
> 
> 时间：2013-03-21T03:33:04.967
> 
> 标签：javascript, objective-c

在 objc 中，我可以像这样使用枚举：

```
typedef enum {
   STATE_A = 1,
   STATE_B,
   STATE_C,
   ......
   STATE_KK = 100,
   STATE_FF,
   ......
   STATE_XXX = 99999
} State; 
```

每个变量的值都会自动增加（与前一个相比）。

但在javascript中，我需要：

```
var State = {
   STATE_A: 1,
   STATE_B: 2,
   STATE_C: 3,
   ......
   STATE_KK: 100,
   STATE_FF: 101,
   ......
   STATE_XXX = 99999
} 
```

你看我需要为每个变量指定所有值，当你在那里有很多变量时这真的很恶心，当你尝试在两者之间插入一个变量时它变得更糟糕，所以你必须问自己（它的价值是什么应该 ？？？）

我对 js 很陌生，真的很想知道是否有办法在 js 中使用枚举，就像我提到的其他语言（如 objc）一样。

谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T03:46:58.513

它有点难看，但你可以这样做：

```
var i=1;
var State = {
   STATE_A: i++,
   STATE_B: i++,
   STATE_C: i++
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T03:46:09.450

给他们一个初始值 0 然后在循环中设置他们的值怎么样

```
var State = {
   STATE_A: 0,
   STATE_B: 0,
   STATE_C: 0,
   ......
   STATE_KK: 0,
   STATE_FF: 0,
   ......
   STATE_XXX = 0
}
var count=0;
for(var key in State){
    State[key]=count++;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T03:54:12.387

如果我理解正确，您的目标是用数字识别状态，以使它们在枚举中具有可比性。

**首先** ，这是我认为您的意思[的工作小提琴。](http://jsfiddle.net/tg7uM/)

对于一般枚举，这是我使用的一个不错的技巧：

```
function createEnum(values){
    var res={};
    for(var i=0;i<values.length;i++){
       res[values[i]]=i;//add the property
    }
    //Object.freeze(res);//optional to make immutable
    return res;
}; 
```

这允许以下语法

```
var State = createEnum(["STATE_A","STATE_B","STATE_C"]); 
```

这意味着您不必为所有状态显式定义一个整数值，给定一个。之后就可以正常使用了

```
State.STATE_A===State.STATE_B;//returns 1 
```

如果您想根据模式填充，可以通过以下方式扩展它（假设您的语法）：

```
function createEnumPattern(prefix,range){
    var res={},str="a";
    for(var i=0;i<range;i++){
       var pattern = prefix+"_"+inc_str(str);
       res[pattern]=i;//add the property
    }
    //Object.freeze(res);//optional to make immutable
    return res;
} 
```

[这个答案](https://codereview.stackexchange.com/a/23064/21719)`inc_str`出自哪里。所以例如

```
var State = createEnumPattern("State",100); 
```

将返回一个`State`具有诸如等属性的枚举`State_aa`，如果您愿意，可以使用`toUpperCase`它来强制使用您使用的大写约定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T04:02:40.440

您可以创建您的小型枚举制造商，它既可以自动编号，也可以设置您想要的任何值（有点像您在 ObjectiveC 中拥有的功能：

```
function makeEnum(list) {
    var obj = {}, sequence = 0, current;
    for (var i = 0; i < list.length; i++) {
        current = i;
        if (typeof list[i+1] === "number") {
            sequence = list[i+1];
            i++;
        }
        obj[list[current]] = sequence++;
    }
    return(obj);
}

var State = makeEnum(["STATE_A","STATE_B","STATE_C", "STATE_KK", 100, "STATE_LL"]); 
```

在传入的数组中放置一个数字的任何地方，它都会设置前一个枚举值的值，然后序列从该值继续。

# jquery - 如何使每行中除第一列之外的列左对齐？

> ID：15538996
> 
> 赞同：1
> 
> 时间：2013-03-21T03:33:09.163
> 
> 标签：jquery, css, html-table

我想将除表中行的第一列之外的所有列设置为`text-align:left`，第一列`text-align`在 CSS 中定义。这是代码：

```
<script type="text/javascript" src="../js/jquery-1.9.1.min.js"></script>
<style type="text/css">
table{
    border: 1px solid red;
    border-collapse: collapse;
}
table td{
    border: 1px solid red;
    text-align: center;
}
</style>
  <script type="text/javascript">
$(function(){
    $("input[type='button']").on("click", function(){
        $("#table tr td:gt(0)").css({"text-align":"left"}); 
    });

});
</script>
 </head>
<body>
<input type="button" value="click" />
<table id="table">
    <tbody>
        <tr><td width="150px">center</td><td width="150">left</td><td width="150">left</td></tr>
        <tr><td>center</td><td>left</td><td>left</td></tr>
                    <tr><td>center</td><td>left</td><td>left</td></tr>
    </tbody>
</table>
</body> 
```

单击按钮后，只有第一行生效，其他行的所有列都`text-left`包括不应该的第一列。所以为什么？我必须用方法迭代`tr`元素吗？`each`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T03:35:39.530

您当前的 jQuery 代码将获得所有`td`'s 然后获得第一个集合...您拥有这个`td`'s 集合然后您获得该集合中的第一个...这就是您当前代码中发生的情况...

用这个替换你的代码......

```
$(function(){
    $("input[type='button']").on("click", function(){
        $("#table tr td").not(':first-child').css({"text-align":"left"}); 
    });

}); 
```

更好的是，如果你可以使用 css....

```
table td{
    border: 1px solid red;
    text-align: left;
}

table td:first-child {
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:38:06.870

使用`:not`或`.not()`和`:first`。

```
$('#table tr td:not(#table tr td:first)').css({"text-align":"left"}); 
```

**或者**

```
$('table tr td').not(':first').css({"text-align":"left"}); 
```