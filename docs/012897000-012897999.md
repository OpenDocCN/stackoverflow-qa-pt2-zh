# StackOverflow 问答 12897000-12897999

# ruby - 是否可以使用数据映射器进行“在哪里”查询？

> ID：12897000
> 
> 赞同：4
> 
> 时间：2012-10-15T13:48:04.950
> 
> 标签：ruby, ruby-datamapper

我想从[datamapper](http://datamapper.org/)获取与指定 ID 匹配的对象列表。

我知道我可以使用多个 '**或**' 条件，但 id 的列表可能有数百个。

有没有相当于下面sql的[datamapper命令？](http://datamapper.org/)

```
select * from table where id in (1,2,3,4,5) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T14:03:03.080

你可以！它看起来像这样：

```
users = User.all(:id => [1,2,3]) 
```

编辑：您可以在[dm-core 的 github 页面](https://github.com/datamapper/dm-core)上看到：

```
 # If the value of a pair is an Array, we do an IN-clause for you.
  Person.all(:name.like => 'S%', :id => [ 1, 2, 3, 4, 5 ])

  # Does a NOT IN () clause for you.
  Person.all(:name.not => [ 'bob', 'rick', 'steve' ]) 
```

# c# - Log4net：运行时配置 xml 文件和文本日志文件位置

> ID：12897001
> 
> 赞同：1
> 
> 时间：2012-10-15T13:48:05.000
> 
> 标签：c#, log4net

我有一个包含 10 个 dll 的项目，每个 dll 使用 log4net 进行日志记录。该项目不是我开始的，我是这样得到的，我需要继续它。因为这是我第一次使用 log4net，所以我想知道如何在运行时获取配置文件 (xml) 和日志文件（记录器写入日志的文件）。我使用断点停止应用程序执行，我希望能够使用快速监视窗口来获取这些参数。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:15:42.247

就个人而言，我认为您可能会走错路，因为您最好尝试查看 log4net 的配置方式并从中确定它记录信息的位置。

通常的起始位置是 app.config 文件，其中可能包含 log4net 配置本身，或者对另一个外部文件的引用，但配置也可以完全在运行时完成，因此无法保证甚至有配置文件，但你可以试试看

```
log4net.Config.XmlConfigurator.m_repositoryName2ConfigAndWatchHandler["log4net-default-repository"] 
```

这可能会向您显示配置文件的位置。

文件名更狡猾，因为

*   可能没有文件，因为日志记录可能会转到另一个设备（例如控制台或数据库）
*   由于禁用了日志记录，因此可能没有文件。
*   您可能正在登录两个或更多文件
*   文件名可能取决于类/dll
*   可以为一个类启用日志记录，而对另一个类禁用日志记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:48:19.510

这是类似的示例：

```
 public static void ChangeRemoteAddress(System.Net.IPAddress remoteAddressIp)
    {
        var hier = log4net.LogManager.GetRepository() as Hierarchy;
        if (hier == null)
        {
            Console.WriteLine("Unable to change Syslog filename, null hierarchy");
            return;
        }
        var sysLogAppender =
            (SyslogAppender)hier.GetAppenders().
                                      First(appender => appender.Name.Equals("UdpAppender",
                                          StringComparison.InvariantCultureIgnoreCase));

        if (null == sysLogAppender)
        {
            Console.WriteLine("Unable to change Syslog filename, appender not found");
            return;
        }
        sysLogAppender.RemoteAddress = remoteAddressIp;
        sysLogAppender.ActivateOptions();
    } 
```

我得到了“层次结构”，然后可以得到附加程序并通过它的名称检查我想要的那个。就我而言，我希望能够以编程方式更改我的 UDP 附加程序的远程地址，但您可以通过这种方式处理任何预定义的“设置”。如果您使用自定义“设置”会有点麻烦，但这应该可以帮助您。

因此，这将使您能够访问 XML 配置文件（作为对象）。例如，滚动文件附加程序的日志文件的文件名将以类似的方式访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:03:37.547

至于我，dll 必须只返回异常。应用程序可以使用 log4net 或其他记录器并记录来自 dll 的异常。log.config 的路径我通常存储在 app.config appSettings 中。

您可以尝试在 dll 内部制作类似

```
const string RELATIVE_LOGGER_CONFIG_FILE_PATH="log.config";
string directory=System.IO.Path.GetDirectoryName(Assembly.GetCallingAssembly().Location);
return System.IO.Path.Combine(directory, RELATIVE_LOGGER_CONFIG_FILE_PATH) 
```

，但我认为是不正确的。只需从 dll 中返回异常。

PS 此代码集配置文件为 log4net

```
log4net.Config.XmlConfigurator.Configure(new FileInfo(configFilePath)); 
```

# c++ - 如果 n_samples 和 size_input 在 fftw 实现中不匹配怎么办

> ID：12897003
> 
> 赞同：0
> 
> 时间：2012-10-15T13:48:11.127
> 
> 标签：c++, fftw

我正在使用 fftw3 lib 在 C++ 中计算傅立叶变换。我每次都必须用不同的输入数组反复调用它。我只用大小 MAX_ELEMS 初始化我的数组（在代码中称为“输入”），然后在每次调用时将其用作 fftw_plan 函数的输入（更改内容及其大小）。但是，我每次都会根据数组的实际大小（数组中有效数据样本的数量）更改我的 n_samples。我想知道这是否会在我的执行/准确性方面导致任何问题。

```
fftw_plan fftw_plan_dft_r2c_1d(int n_samples,
                                double *in, fftw_complex *out, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:06:41.987

理想情况下，您希望选择特定大小的 FFT 并坚持使用，原因有两个：

*   相对于 FFT 本身，创建/销毁计划需要花费大量时间，因此如果您为执行的 evert FFT 创建/销毁计划，您将放弃使用 FFTW 的任何速度优势
*   不同大小的 FFT 的频率分辨率会有所不同，这会给连续输出数据的解释带来麻烦。

理想情况下，您应该使用固定的 FFT 大小，以便您只创建/销毁一次计划。

如果您的数据流是连续的，则只需选择适当的 FFT 大小 N，并将样本累积在缓冲区中，直到您有 N 个样本要处理，然后保存其余样本，直到您再次有 N 个样本。

如果您的数据*不*连续，则选择一个合理大小的 FFT，N，然后当您获得 < N 个样本时，您可以用零填充输入。当您获得 > N 个样本时，您可以丢弃额外的样本。

当然，在所有情况下，您都必须在 FFT 之前应用合适的窗函数。

# installshield - 卸载后安装屏蔽遗留文件

> ID：12897005
> 
> 赞同：0
> 
> 时间：2012-10-15T13:48:19.397
> 
> 标签：installshield, uac, virtualstore

我创建了一个 Install shield 2009 安装程序，它将许多文件安装到 C:\Program Files。在 Windows 7 上运行时，安装工作完美。但是，执行卸载时，文件会从 C:\Program Files 中删除，但不会自动从 VirtualStore 中删除。有没有办法做到这一点而不必手动删除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:13:45.787

如果文件是由安装程序创建的，那么它应该删除它们，要查看为什么它们没有被删除，我建议创建一个[详细日志](http://support.microsoft.com/kb/223300)。如果文件是由应用程序创建的，则在安装后，您将需要手动删除它们。

# perl - 安装 GD 失败

> ID：12897007
> 
> 赞同：5
> 
> 时间：2012-10-15T13:48:23.703
> 
> 标签：perl, cpan, perl-module

我想安装运行 Circos 所需的模块。所需的模块之一是`GD`.

*   *操作系统：Mac OS X 版本 10.7.4
*   安装的libgd：`brew install libgd`*

下列的`cpan[1]> install GD`

```
Test Summary Report
-------------------
t/GD.t      (Wstat: 0 Tests: 12 Failed: 1)
  Failed test:  10
Files=2, Tests=13,  0 wallclock secs ( 0.02 usr  0.00 sys +  0.11 cusr  0.02 csys =  0.15 CPU)
Result: FAIL
Failed 1/2 test programs. 1/13 subtests failed.
make: *** [test_dynamic] Error 255
  LDS/GD-2.46.tar.gz
  /usr/bin/make test -- NOT OK
//hint// to see the cpan-testers results for installing this module, try:
  reports LDS/GD-2.46.tar.gz
Running make install
  make test had returned bad status, won't install without force
Failed during this command:
 LDS/GD-2.46.tar.gz                           : make_test NO 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:38:40.207

对于这个特定的模块，通过单元测试是非常[成功的](http://matrix.cpantesters.org/?dist=GD%202.46;os=darwin;reports=1)。如果您对这个单一的测试失败（关于[编写 jpeg 文件](http://cpansearch.perl.org/src/LDS/GD-2.46/t/GD.t)）感到满意，那么只需强制安装。

```
cpan[1]> force install GD 
```

或者

```
$ cpan -f GD 
```

由于测试失败是 jpeg 问题，您可能想查看是否正确安装了 libjpeg 及其朋友。

# mysql - 图书馆数据库设计外键

> ID：12897013
> 
> 赞同：2
> 
> 时间：2012-10-15T13:48:50.223
> 
> 标签：mysql, sql, database-design

我正在为我的学校设计一个图书馆应用程序。我们有 2-3 个主要图书馆，有些部门有自己的图书馆。我想知道这些查询是否正确？

```
Libraries 
ID Name
1  Walter
2  Wally
3  Maths dept library

Books
ID Book ID  BookName
1   1       Fundamentals of calculus
2   1       Mechanics 
3   2       Fundamentals of calculus
4   2       Biology

Lib_Book_LookUp
ID  libId bookId
1    1     1
2    1     2
3    2     1
4    2     2 
```

我想解决的两个问题是：

1.  查找特定书籍的副本数
2.  找出哪些图书馆有一本特定的书

这是我所拥有的：

```
Select count(Book.bookId) where book.name = "Fundamentals of calculus";

Select count(libId) from Lib_Book_lookUp, Book where Book.BookId = Lib_Book_lookUp.bookId groupBy(libId) 
```

我对这些查询的问题：

1.  似乎没有必要有一个单独的查找表并将 libId 合并到 Books 表中并将其作为 book 表上的外键？
2.  查询似乎正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:54:40.820

您的第一个查询缺少一个`FROM`子句。您也可以这样做`COUNT(*)`，但在这种情况下并不特别重要：

```
 SELECT count(Book.bookId) FROM Books WHERE BookName = "Fundamentals of calculus"; 
```

要找出哪些图书馆有一本特定的书，您不需要`COUNT()`汇总。相反，您需要一个`WHERE`带有连接的子句。会`COUNT()`告诉你有*多少*图书馆有一本书，而不是*哪些图书馆*。为此，您需要一个返回的查询`Libraries.Name`。

```
SELECT
  /* Return library names */
  Libraries.Name
FROM 
  Libraries 
  /* Join through your lookup table to match a book name to a library name */
  JOIN Lib_Book_LookUp ON Libraries.ID = Lib_Book_LookUp.libId
  JOIN Books ON Books.ID = Lib_Book_LookUp.bookId
/* Which book to search for */
WHERE Books.BookName = 'Fundamentals of calculus' 
```

`Books`查找表是合适的，因为如果它存在于多个图书馆中，它允许您将书籍规范化为表中的单个记录。正如你所拥有的，没有真正的理由在`Books`表中有多个副本，也没有理由在`Book ID`列中。实际上，该`Book ID`列本身具有很大的误导性。有两个不同标题的书具有相同的 id `1`。

该`Books`表实际上应该如下所示，每个书名有一条记录（假设标题为权威，忘记像 ISBN 之类的真正权威的东西）

```
Books
ID BookName
1  Fundamentals of calculus
2  Mechanics 
3  Biology 
```

如果您在每个图书馆可能有每本书的多个副本，您可以考虑将每个副本的书籍标准化为一个通过图书馆条形码标识它们的表格。然后，您将这些 id 与图书馆相匹配作为馆藏：

```
Books (defines bibliographic details)
ID BookName
1  Fundamentals of calculus
2  Mechanics 
3  Biology

Book_Copies (Matches Books.ID to barcode, barcode is Primary Key)
BookId Barcode
1      1234567
1      1234568
2      8654321
2      8654322

Lib_Book_LookUp (matches book copies to libraries, allowing multiple copies by barcode)
ID  libId bookBarcode
1    1     1234567
2    1     1234568
3    2     8654321
4    2     8654322 
```

例如，要查询每个图书馆每本书的副本数，您可以使用：

```
SELECT 
  Libraries.Name,
  Books.BookName,
  COUNT(*)
FROM 
  Libraries
  JOIN Lib_Book_LookUp ON Libraries.ID = Lib_Book_LookUp.libId
  JOIN Book_Copies ON Lib_Book_Lookup.bookBarcode = Book_Copies.Barcode
  JOIN Books ON Book_Copies.BookId = Books.ID
GROUP BY 
  Libraries.Name, 
  Books.BookName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:12:36.803

关于您的数据库设计，您不需要在查找表上有代理键。您可以像这样简单地做一个图书馆和书的复合主键：

```
Lib_Book_LookUp
libId bookId
1 1
1 2
2 1
2 2
```

我对您的图书 ID 进行了以下更改（力学和生物学具有相同的 ID）：

```
图书
ID Book ID BookName
1 1 微积分基础
2 2 力学
3 1 微积分基础
4 3 生物学
```

在您的第一个查询中，您没有指定语句引用的表 ( `FROM books`)：

```
SELECT COUNT(bookId)
FROM books                                       <= Table Reference
WHERE BookName = "Fundamentals of calculus"; 
```

在第二个查询中，您使用隐式语法来连接表。您应该像这样练习显式连接：

```
SELECT Lib_Book_LookUp.libId, Libraries.Name
FROM Lib_Book_LookUp
INNER JOIN Libraries ON Libraries.ID = Lib_Book_LookUp.libId
WHERE bookId IN 
    (SELECT DISTINCT bookId
    FROM books
    WHERE BookName = "Fundamentals of calculus") 
```

此查询连接`Libraries`and`Lib_Book_LookUp`表，然后查找具有`bookId`正在搜索的图书的图书馆。

## [看到它在行动](http://sqlfiddle.com/#!2/33eb5/1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T13:56:15.987

您的 books 表看起来更像是“Instances of a book”表。因此，它不应该有书名。要么，要么`BookID`列是多余的。

*如果您从 1988 开始编写 SQL*，那么您的第二个查询是正确的。如果没有，您应该使用`join`语法。

# jquery - AJAX：在不刷新页面的情况下发布表单详细信息

> ID：12897015
> 
> 赞同：1
> 
> 时间：2012-10-15T13:48:55.007
> 
> 标签：jquery, asp.net-mvc-3

> **可能重复：**
> [如何通过 JavaScript 发送跨域 POST 请求？](https://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript)

创建了一个带有表单字段的 HTML 页面，在点击表单时，表单详细信息发布在其他域市场站点中。

```
<form  method="Post"  action="http://app-o.marketo.com/index.php/leadCapture/save"  name="mktForm_6" id="mktForm_6">

    <label>First Name:</label><span class='mktInput'><input  name="FirstName" id="FirstName" type='text' value=""  maxlength='255' tabIndex='1' />

    <label>Email Address:</label><input  name="Email" id="Email" type='text' value=""  maxlength='255' tabIndex='2'`enter code here` />

    <label>Subscription</label><input class='mktFormHidden' name="Subscription_Expiration__c" id="Subscription_Expiration__c" type='hidden' value="Newsletter Subscription" />
    <input id='mktFrmSubmit' type='submit' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Submit'  />

    <input type="hidden" name="lpId" value="1030" />

    <input type="hidden" name="subId" value="123" />

    <input type="hidden" name="searchstr" value="" />

    <input type="hidden" name="formid" value="6" />

    <input type="hidden" name="_mkt_disp" value="return" />

    <input type="hidden" name="_mkt_trk" value="id:668-TIV-019&token:_mch-syncfusion.com-1350287989102-87089" />

</form> 
```

但现在我想通过 AJAX 发布表单详细信息，因为普通表单发布刷新页面。

任何人都可以建议如何在`$.post()`AJAX 方法中以明确的细节发布细节吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:34:45.403

尝试这个

```
var data = { Firstname: $("#firstnametxt")[0].value, Email: $("#txtemail")[0].value};}
var jsondata = JSON.stringify(data);
$.ajax({
    type: 'POST',
    url: '@Url.Action("SaveCustomer","Customer")',
    data: jsondata,
    dataType: "html",
    cache: false,
    contentType: "application/json; charset=utf-8",
    success: function (_results, status, message) {
       $("#Targetdiv").html(_results);
    },
    error: function (_results, status, message) {

    }
}); 
```

有一个与此类似的视图模型。

```
public class Customer
{
    public String FirstName{get;set;}
    public String Email{get;set;}

} 
```

并像这样接收控制器中的数据。

```
[HttpPost]
public ActionResult SaveCustomer(Customer _Customer)
{
    //Receive the posted json data as your view model object(_Customer) here
    //Asp.net translate the same for you.
} 
```

**如果您使用的是 IE，请使用[此处提供的 json2.js](https://github.com/douglascrockford/JSON-js])**

# javascript - find() 来自 jquery 对象的第一个元素

> ID：12897026
> 
> 赞同：1
> 
> 时间：2012-10-15T13:49:25.740
> 
> 标签：javascript, jquery

我已经“缓存”了一个 jQuery 对象，我在一个名为`$myElement`. 我想在上面使用一些原生 JavaScript 函数（以获得更好的性能）。但是，我在下面的尝试会引发错误（元素未定义）。有没有办法做到这一点？

```
$myElement.find('span')[0];

$myElement.find('span').get(0); 
```

更新：我想做的是：

```
$myElement.find('span')[0].innerHTML('some text'); 
```

这给了我一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:53:18.840

你似乎需要

```
$myElement.find('span')[0].innerHTML = 'some text'; 
```

因为 innerHTML 不是基本 DOM 元素的函数。

但是没有错，如果您使用 jQuery 获取元素，也可以使用 html 函数：

```
$myElement.find('span').first().html('some text'); 
```

我认为您没有在正确的点上进行优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:53:26.903

该`.innerHTML`属性不是函数。只需使用分配设置其内容。

```
.innerHTML = "foo"; 
```

`.innerHTML`但是在使用 jQuery 时要小心。如果你清除这样的内容，并且任何内容都有任何数据或分配给 jQuery 的处理程序，你就会有内存泄漏。

更安全的做法是使用 jQuery 更新内容。

```
.html("foo"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:55:03.507

你可以像这样使用**[jQuery 的“first”](http://api.jquery.com/first/)**函数：

```
$myElement.find('span').first(); 
```

或者使用[**jQuery 的“eq”**](http://api.jquery.com/eq-selector/)函数通过索引获取第 n 个孩子，如下所示：

```
$myElement.find('span').eq(3); 
```

或者你也可以使用**[jQuery 的“get”](http://api.jquery.com/get/)**函数来返回匹配的 DOM 实例：

```
$myElement.find('span').get(2); 
```

正如您在此示例中看到的：

*   [http://jsfiddle.net/be8YK/2/](http://jsfiddle.net/be8YK/2/)

# c# - 为什么 TimeSpan 字符串格式会解析为异常？

> ID：12897031
> 
> 赞同：2
> 
> 时间：2012-10-15T13:49:40.753
> 
> 标签：c#, asp.net-mvc-2, .net-4.0, string-formatting, timespan

我的 c# MVC2 项目中有以下代码行：

```
string.Format(@"{0\:HH\:mm}", new TimeSpan(0)) 
```

此行导致以下异常：

```
System.FormatException: Input string was not in a correct format. 
```

谁能告诉我为什么？我正在使用 C#、asp.net、mvc2 和 .net 框架 4

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T13:55:08.913

两个问题。首先，您不应该逃避第一个`:`。这是必要的分隔符，不应转义。

第二个是`HH`应该的`hh`。

这运行没有错误：

```
string.Format(@"{0:hh\:mm}", new TimeSpan(0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:53:57.750

您的格式字符串使用`HH`- 它应该是`hh`.

请参阅MSDN 上的[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)。

此外，您的 first`:`不应该被转义 - 它是 placeholder 的一部分`0`，而不是文字。

一起：

```
string.Format(@"{0:hh\:mm}", new TimeSpan(0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T13:55:45.347

使用时应使用 hh 而不是 HH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:58:58.120

在此处查看规范：http: [//msdn.microsoft.com/en-us/library/ee372286.aspx](http://msdn.microsoft.com/en-us/library/ee372286.aspx)

您应该使用 hh 而不是 HH，例如：

`var str = string.Format(@"{0:hh\:mm}", new TimeSpan(2,2,0));`

# android - R.android drawable 不公开

> ID：12897039
> 
> 赞同：0
> 
> 时间：2012-10-15T13:49:54.877
> 
> 标签：android, icons, drawable

我想使用 android.R 文件夹中的以下图标。Eclipse 说它不公开。我怎样才能使用这个图标。

```
android:icon="@android:drawable/ic_menu_invite"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:48:21.563

并非操作系统附带的每个图像都被视为 Android SDK 的一部分。您不会`ic_menu_invite`在[SDK 列表中找到`android.R.drawable`软件包](http://developer.android.com/reference/android/R.drawable.html)的一部分。

但是，正如 Doomsknight 指出的那样，欢迎您从 SDK 安装或 AOSP 中复制图像，并将它们放入您的项目中。对于菜单图标，这可能会有点棘手，因为这些图标在不同的 Android 版本中存在风格差异，因此在这些图标和不同密度的不同图标之间，您最终会复制很多图像。

# ios - UIPanGestureRecognizer 检测一个对象何时跨越另一个对象

> ID：12897040
> 
> 赞同：0
> 
> 时间：2012-10-15T13:50:00.173
> 
> 标签：ios, uigesturerecognizer

我用于在屏幕上`UIPanGestureRecognizer`移动我的对象。`UIView`

**我想要做什么** 主要目的是弄清楚当两个对象相互交叉时如何捕获事件。例如两个 UIView 对象。所以第一个是静态对象（不会移动），另一个我可以在需要时在屏幕上移动。因此，我需要知道我的第二个对象（UIView）何时穿过一个静态对象。另一个主要问题是这些视图位于不同的视图上。因此，第一个静态视图位于称为“编辑视图”的视图上，另一个视图位于称为“工具栏”的视图上。所以这意味着我不能只比较两个矩形并享受它。有没有办法在两个对象相互交叉时比较它们，但可能没有方法来比较它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:01:41.740

我认为您正在寻找的是 UIView 的 convertRect:toView: 方法。

```
CGRect *convertedView1Rect = [view1 convertRect:view1.frame toView:view2];
BOOL intersects = CGRectIntersection(convertedView1Frame, view2.frame); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:18:01.333

```
 Following method required two parameter of rectangle's - just pass rect1 and rect2 , and it return bool value whether it intersect or not - 

   if( CGRectIntersectsRect(<#CGRect rect1#>, <#CGRect rect2#>) ) {
         NSLog("Intersect");
    } else {
         NSLog("Not Intersect");
     } 
```

# wcf - 2 异步 WCF 服务

> ID：12897043
> 
> 赞同：0
> 
> 时间：2012-10-15T13:50:06.577
> 
> 标签：wcf, asynchronous

我有一个异步 WCF 服务，它使用客户端代理调用第二个 SOAP WCF 服务。我无法控制 SOAP Java 服务，但我可以在服务引用上设置配置以异步运行。

我如何从第二个异步服务获得结果，将值传递回第一个到客户端？

```
public class AddService : IAddService
{
    // SOAP Java service reference

    ResultServiceClient proxy = new ResultServiceClient();

    public int AddNumbers(int x, int y)
    {

        // Am i on the right track here to use BeginXXX, EndXXX?
        proxy.BeginGetResult(x, y, new AsyncCallback(OnEndAdd), null);

        /// how to return a result here.??????
        return result;
    }

    void OnEndAdd(IAsyncResult result)
    {
        int result = proxy.EndGetResult(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:12:04.857

```
 [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
    public class AddService : IAddService 
    { 
        // SOAP Java service reference 
        ManualReseEvent _resetEvent=new ManualResetEvent(false); 
        ResultServiceClient proxy = new ResultServiceClient(); 
        private int _result=-1;

        public int AddNumbers(int x, int y) 
        { 

            // Am i on the right track here to use BeginXXX, EndXXX? 
            proxy.BeginGetResult(x, y, new AsyncCallback(OnEndAdd), null); 
            _resetEvent.WaitOne(TimeSpan.FromSeconds(10);
            return _result; 
        } 

        void OnEndAdd(IAsyncResult result) 
        { 
            _result = proxy.EndGetResult(result); 
            _resetEvent.Set();
        } 
    } 
```

这里发生了什么？

我们进行调用，然后使用 ManualResetEvent 暂停线程并等待回调。ManualResetEvent 被告知等待 10 秒，然后继续执行。

ManualResetEvent 有多个 Wait 方法的重载，从无限 - Wait() - 到我正在使用的那个，它需要一个 TimeSpan。_result 现在是一个成员变量，因此我们可以从初始调用方法中访问该值。我还用“PerCall”服务行为标记了该服务。这意味着每次调用都会实例化该对象的一个​​新实例。我这样做是因为我们在调用 Java 服务时有长达 10 秒的延迟，并且我们不想阻止其他用户对该服务的其他调用。

# iphone - UIWebView tel：电话链接委托未在 iPad 上调用（但它适用于 iPhone）

> ID：12897048
> 
> 赞同：5
> 
> 时间：2012-10-15T13:50:29.740
> 
> 标签：iphone, ios, ipad, uiwebview

我的 UIWebView 显示了一个网页，其中包含 URL 电话：+123456789

```
<a href="tel:+123456789">Phone link</a> 
```

当我在 iPhone 上单击此链接时，我的 UIWebViewDelegate 被正确调用。

```
- (BOOL)webView:(UIWebView *)webView
        shouldStartLoadWithRequest:(NSURLRequest *)request
        navigationType:(UIWebViewNavigationType)navigationType 
```

当我在 iPad 上单击此链接时，我的 UIWebViewDelegate 根本不会被调用。取而代之的是 UIActionSheet 会自动出现，带有“添加到联系人”、“复制”和“取消”选项。

有没有办法在没有电话功能的设备（例如 iPad）上从 UIWebView 捕获“tel:”HTML 链接。

模拟器的这种行为是相同的：

*   iPhone模拟器：调用委托
*   iPad模拟器：未调用委托

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-10-25T20:35:43.127

你试过一个简单的：

```
if ( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad )
{
     return YES; /* Device is iPad */
} 
```

# c# - 将数据存储和检索到多个表的过程

> ID：12897050
> 
> 赞同：1
> 
> 时间：2012-10-15T13:50:35.443
> 
> 标签：c#, asp.net, sql-server, stored-procedures

我需要创建一个将数据存储到 3 个表中的过程，同时使用每个表中的数据来引用其余的表。

例如：我正在创建一个团队挑战数据库。这将允许一个人挑战另一个人，设置谁将在彼此的团队中，然后存储到数据库中。

我有一个存储`matchId, initiatorName, teamOneListId`and的主表`teamTwoListId`。

*   TeamOne列表：`ID, memberID, TeamName`
*   TeamTwoList：`ID, memberID, TeamName`

如您所见，我需要一次将数据添加到所有这些中（虽然团队规模和限制因 1v1、3v3 等而异）。

我正在使用 C# Asp.Net，并且精通事务。我只是不太了解数据库。

**编辑：**在漫长的一天结束时写了这篇文章。
问题是，解决此问题的最简单方法或方法是什么？

我试图弄乱存储过程，我可以将身份转发到不同的表，但似乎我仍然必须为两个团队以及每种类型的事件创建一个新的存储过程。

我可以进行上述工作的唯一方法是开始比赛，获取最后一行的信息，然后将其转发到将其余 2 个团队信息绑定到数据库中的第二页。

所以重申一下，我需要知道如何一次完成所有这些，或者有办法不简单地获得最后一行（这可能是错误的？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:56:08.200

你可以试试`SqlDataAdapter class`

链接： http: [//msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqldataadapter (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.data.sqlclient.sqldataadapter(v=vs.80).aspx)

```
var connection = new SqlConnection("...");//You can adjust your string connection
var adapter = new SqlDataAdapter();

// Create the SelectCommand.
var command = new SqlCommand("YourSelectStoredProcedure", connection); //You can adjust your name of stored procedure
command.CommandType = CommandType.StoredProcedure;
adapter.SelectCommand = command;

// Create the InsertCommand.
command = new SqlCommand("YourInsertStoredProcedure", connection); //You can adjust your name of stored procedure
command.CommandType = CommandType.StoredProcedure;
adapter.InsertCommand = command; 
```

# java - 设置 Eclipse 首选项页面的属性值

> ID：12897058
> 
> 赞同：1
> 
> 时间：2012-10-15T13:51:21.320
> 
> 标签：java, eclipse-plugin

在（windows->preferences->editor->text editor）eclipse中有一个属性**“显示行号”**，我想用java代码打勾。那么我如何获取该属性的键并在首选项页面中设置值。

注意：我需要将“显示行号”选项默认设置为 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:08:04.107

本[教程](http://www.vogella.com/articles/Eclipse4Preferences/article.html)展示了如何从代码中访问首选项。尝试搜索属性“显示行号”并尝试对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:38:34.427

这将是要求的正确解决方案：

字符串 lineNumbers = AbstractDecoratedTextEditorPreferenceConstants.EDITOR_LINE_NUMBER_RULER; EditorsUI.getPreferenceStore().setValue(lineNumbers, true);

# php - 防止使用 htaccess 热链接特定文件

> ID：12897069
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:51:54.140
> 
> 标签：php, apache, .htaccess, hotlinking

如何防止从其他站点盗链特定文件？
可以说`mydomain.com/file1.zip`和`mydomain.com/file2.zip`- 我想将它们重定向到页面`mydomain.com/file1page`和`mydomain.com/file2page`.
我只想阻止那些 2 不是所有的 zip 文件的热链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:10:13.197

您可以检查推荐人，但这些很容易被欺骗。所以像：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://mydomain.com/
RewriteRUle ^/?(file1|file2).zip$ /$1page [L,R=302] 
```

因此，如果引用*者不是*以开头`http://mydomain.com/`并且请求是针对`file1.zip`or`file2.zip`的，则重定向到`file1page`or `file2page`。

# java - 如何在 Java 应用程序中运行 PHP 代码？

> ID：12897070
> 
> 赞同：11
> 
> 时间：2012-10-15T13:51:53.553
> 
> 标签：java, php

> **可能重复：**
> [从 Java 调用 PHP](https://stackoverflow.com/questions/614995/calling-php-from-java)

我想知道如何在 Java 中运行 PHP 代码。使用 ScriptEngine，我可以运行 JavaScript：

```
String code="print(5+5);"; //sample bit of code
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByExtension("js");
try {
    engine.eval(code);
} catch (ScriptException ex) {
    //catch statement
} 
```

为了运行它，我导入了库`javax.script.*`。我相信要运行 PHP，我必须导入一个类似的库，并将上面代码的第三行更改为扩展名`php`. 不幸的是，我不知道这是哪个库。我用谷歌搜索试图找到答案，并遇到了 PHP/Java Bridge 库，但我不认为这正是我想要的，因为它专注于通过 PHP 运行 Java（据我所知）。

我希望我没有错过任何东西，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T20:42:51.853

这个问题的解决方案是下载文件`JavaBridge.jar`，`php-script.jar`然后`php-servlet.jar`从[http://php-java-bridge.sourceforge.net/pjb/download.php](http://php-java-bridge.sourceforge.net/pjb/download.php)将它们导入你的类：

```
import javax.script.*;

import php.java.bridge.*;
import php.java.script.*;
import php.java.servlet.*; 
```

然后代码可以像以前一样运行：

```
String code="echo 5+5;"; //sample bit of code
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByExtension("php");
try {
    engine.eval(code);
} catch (ScriptException ex) {
    //catch statement
} 
```

# java - 如何更改操作栏上标题文本的大小？

> ID：12897071
> 
> 赞同：40
> 
> 时间：2012-10-15T13:51:55.140
> 
> 标签：java, android, android-actionbar, text-size

每个 Android 4.0 应用程序上都有一个`ActionBar`，并且它有一个标题。我需要减小这个尺寸。但我不明白我该怎么做，因为`ActionBar`没有为它提供公共方法。**备注：**我不想使用自定义视图。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-15T15:53:46.343

实际上，您可以做任何您想做的自定义 ActionBar。它必须通过主题来完成。你可以这样做：

```
<style name="Theme.YourTheme" parent="android:style/Theme">
    <item name="android:actionBarStyle">@style/Theme.YourTheme.Styled.ActionBar</item>
</style>

<style name="Theme.YourTheme.Styled.ActionBar">
    <item name="android:titleTextStyle">@style/Theme.Viadeo.Styled.YourTheme.TitleTextStyle</item>
</style>

<style name="Theme.YourTheme.Styled.ActionBar.TitleTextStyle" parent="@android:style/Widget.TextView">
    <item name="android:textSize">12sp</item>
</style> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-21T22:52:44.693

你总是可以做这样的事情：

```
ActionBar actionBar = getActionBar();
actionBar.setTitle(Html.fromHtml("<small>YOUR TITLE</small>")); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-31T02:47:13.543

在我的系统上， res/styles AppTheme 有一个注释说

```
<!-- All customizations that are NOT specific to a particular API-level can go here. --> 
```

这是 AndroidMainfest.xml 中指示的样式。我添加了

```
<item name="android:textSize">15sp</item> 
```

它有效，我宁愿这样做而不是自定义操作栏。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-02T01:58:02.413

我已经按照这个方法跳过了自定义样式的创建：

1.  创建具有所需文本大小的自定义布局和
2.  将其应用于您的操作栏。

1）创建布局文件（titlebar.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/action_bar_title"
        android:text="@string/app_name"
        android:textColor="@color/colorPrimary"
        android:textSize="24sp" />
</LinearLayout> 
```

在这里设置你需要的 textSize。

2) MainActivity.java

```
 getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); //bellow setSupportActionBar(toolbar);
    getSupportActionBar().setCustomView(R.layout.titlebar); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-15T13:57:47.540

Android ActionBar 中的文本大小是**标准**的。

*自 ICS 以来，Android 现在开发了一个标准，以便应用程序（希望）遵循相同的 UI 指南和设计原则。*

[http://developer.android.com/guide/practices/ui_guidelines/index.html](http://developer.android.com/guide/practices/ui_guidelines/index.html)

这就是为什么你不能改变它。

**但是**，如果您仍然想这样做，您可以使用自定义主题或实现 ActionBar（一个分支）并修改其来源：[https](https://github.com/johannilsson/android-actionbar) ://github.com/johannilsson/android-actionbar以获得最大控制。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-21T13:52:41.420

# 您可以使用

```
subtitle:"exsample" 
```

**XML**

```
 <androidx.appcompat.widget.Toolbar
    android:id="@+id/toolbar2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="?attr/colorPrimary"
    android:minHeight="?attr/actionBarSize"
    android:theme="?attr/actionBarTheme"
    app:subtitle="subTitle"
    app:title = "Title"
    android:tag="dff"/> 
```

**JAVA**

```
getSupportActionBar.setSubtitle("Sub Title"); 
```

# java - Java：将转义字符读取为“\”后跟一个字符？

> ID：12897077
> 
> 赞同：2
> 
> 时间：2012-10-15T13:52:15.287
> 
> 标签：java, escaping

我正在编写编译器的扫描仪，并且在输入“ {\0} ”时遇到了问题。我的扫描仪应该做的是：跳过空白，识别'{'，识别无效字符，识别'}'，跳过空白，检测eof。相反，它只会跳过 \0 。

我的扫描仪是这样完成的，它会跳过任何“无用”字符（值小于或等于''）。出于这个原因，\0 字符将被跳过，而不是作为无效字符常量处理（我还没有实现这个错误情况，但无论如何我的代码在这种情况下没有进入`readCharConst(Token t)`函数......） . 我想知道的是我应该怎么做才能让它处理 '\0' 作为 '\' 后跟 '0' 而不是单个字符。

以下是我的一些功能：

```
public Token next() {
    while (ch <= ' ') {
        nextCh(); // skip blanks, tabs, eols
    }
    Token t = new Token(Kind.none, line, col);
    switch (ch) {
    // cases for identifiers, numbers, meta-chars, ...
    case '\'':
     readCharConst(t);
         break; 
    default:
     error(t, Message.INVALID_CHAR, ch);
     nextCh();
     t.kind = Kind.none;
     }
     return t;
} 
```

和：

```
public void nextCh() {
    try {
        ch = (char) in.read();
        if (ch == LF) { // detects new_line
            col = 0;
            line++;
        } else if (ch != EOF) { // do not increment col for EOF
            col++;
        }
    } catch (IOException e) {
        ch = EOF;
        e.printStackTrace();
    }
} 
```

和：

```
private void readCharConst(Token t) {
    nextCh();
    if (ch == '\'') {
        error(t, Message.EMPTY_CHARCONST);
    } else {
        t.val = (int) ch;
        t.kind = Kind.charConst;
        nextCh();
        if (ch != '\'') {
            error(t, Message.MISSING_QUOTE);
        }
        nextCh();
    }
} 
```

`while (ch <= ' ')`注意：我通过将a替换为解决了我的问题`while(ch == ' ' || ch == '\t' || ch == '\n' || ch == '\r'|| ch == '\b' || ch == '\f' || ch == '\"' || ch == '\'' || ch == '\\')`，以便检测所有转义序列并使用默认条件处理其余部分。尽管如此，我的课程幻灯片说 \r, \n, \t 应该被视为 char 常量（在我看来，这让我陷入了困境，除非我能找到一种方法将序列视为 '\' 后跟字符）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:50:16.490

其实我想我明白了。这不是关于阅读“\”，而是只是跳过正确的字符。这些字符是值低于''的转义序列（十进制ASCII val：32）。因此，要跳过的字符是`'\b'`(val:8), `'\t'`(val:9), `'\n'`(val:10), `'\f'`(val:12), `'\r'`(val:13)，而所有其他字符将由 my 的默认情况处理转变。因此，我将时间更改为：

```
while (ch == ' ' || ch == '\b' || ch == '\t' || ch == '\n' || ch == '\f' || ch == '\r')
// skip blanks and all esc. seq. with value < ' ' (others, like '\'' might need to be treated)          
nextCh(); 
```

事实上，案例 '\'' 在这里没有任何关系（与我提供的输入不匹配），所以这可能就是我被否决的原因。只有当我试图识别上面提到的转义序列时，这种情况才会起作用，如果它们明确出现在输入中（例如， input `" '\\n' "`）。

# geometry - 围绕随机选择的点在圆的表面上均匀分布点

> ID：12897080
> 
> 赞同：1
> 
> 时间：2012-10-15T13:52:20.490
> 
> 标签：geometry, distribution, uniform

在蒙特卡洛模拟中，我遇到了以下问题：给定一个单位向量 u，它定义了一个单位球体表面上的点 A，我必须随机确定一个新矢量，该矢量与初始矢量在 [0,max) 中形成角度 θ . 换句话说，我需要一种算法，从均匀分布中随机选择球体表面上的一个点，该点位于球体上的一个圆内，该圆具有以初始点 A 为中心的预定义半径。

我正在考虑使用欧拉角（θ，Ψ，φ）从（x，y，z）到（X，Y，Z）进行坐标旋转，使得Z = u。然后，从笛卡尔坐标转换为球坐标 (r,θ,φ)，其中 u=(1,0,0) 并统一选择 cosθ 和 φ。最后，转换为 (X,Y,Z)，然后转换为 (x,y,z)。但是，三角函数太慢了，有没有更快的方法？

是否可以修改用于球体表面上均匀分布点的 Marsaglia 方法以选择点附近的点？

在此先感谢您的任何建议。

# jquery - jQuery 1.4.1 和 Firefox 16.0.1 奇怪的属性问题

> ID：12897081
> 
> 赞同：2
> 
> 时间：2012-10-15T13:52:20.857
> 
> 标签：jquery, attributes, jquery-1.4, firefox-16

当涉及到 Firefox 16.0.1 时，我最近在 jQuery 1.4.1 中遇到了一个非常奇怪且非常糟糕的错误。其他所有浏览器都很好。旧版本的 Firefox 很好，新版本的 jQuery 很好。

我有一个带有一些复选框的表格，看起来像这样：

```
<table class="EntityTable">
<tbody>
    <tr>
        <td>
            <input type="checkbox" class="IdCheckBox" id="Checkfor654100" name="Checkfor654100" itemId="654100" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="IdCheckBox" id="Checkfor654101" name="Checkfor654101" itemId="654101" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="IdCheckBox" id="Checkfor654102" name="Checkfor654102" itemId="654102" />
        </td>
    </tr>
    <tr>
        <td>
            <input type="checkbox" class="IdCheckBox" id="Checkfor654103" name="Checkfor654103" itemId="654103" />
        </td>
    </tr>
</tbody>
</table> 
```

并在 javascript/jquery 中循环并收集所有 itemId

```
 var ids = new Array();

    $('input.IdCheckBox:checked').each(function(){
       var thisBox = $(this);
       ids.push(thisBox.attr('itemId'));

    }); 
```

在 Firefox 16.0.1 中，ids 由页面的 url 填充。/theId 喜欢：[http ://blahblahblah.com/654101](http://blahblahblah.com/654101)

我只需将其更改为：

```
ids.push(thisBox.attr('itemid')); 
```

但是，我想知道为什么会发生这种情况，以及其他是否受此影响。

这是一个 JS Fiddle 展示了这个问题的全部荣耀：http: [//jsfiddle.net/K8jRf/8/](http://jsfiddle.net/K8jRf/8/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:47:09.880

这似乎不是 jQuery 问题/错误，而是 FF16（和 FF17b）javascript 问题/错误。以下 html 片段显示了 itemId 在（至少）li 元素上的特殊行为：

```
<html><body><ul><li id="li1"></li></ul><script>
var element = document.getElementById("li1");
// assign to bla
element.bla = "hello";
// after
alert( element.bla ); // ok -> hello
// assign
element.itemId = "hello";
// after
alert( element.itemId ); // nok -> <file uri>hello
</script>
</body>
</html> 
```

从 FF16 开始，“itemId”似乎已成为“特殊属性/行为”。typeof(element.itemId) 是“字符串”，甚至在分配之前... FF15 的行为符合预期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:16:05.043

Firefox 将属性名称“规范化”为全部小写。

如果您使用的是`data`instread of using，`attr`您可以执行以下操作：

```
<input type="checkbox" class="IdCheckBox"
                id="Checkfor654101" name="Checkfor654101" data-itemId="654101" /> 
```

JS：

```
var itemId = $("input").data("itemId"); 
```

# c# - 如何读取 Excel XML (C#)

> ID：12897082
> 
> 赞同：10
> 
> 时间：2012-10-15T13:52:24.003
> 
> 标签：c#, .net, openxml

我想知道是否有一种简单的方法可以读取 Excel 2010 XML？
这个 XML 的结构与我以前阅读的不同。

特别是 ss:index 属性 (ss:Index**="7") 让事情变得更复杂一些

**编辑**：为了更好地解释：

*   我有可以在 Excel 中轻松打开的带有 XML 扩展名的文件
*   我正在寻找一种以编程方式阅读此工作表的方法（例如复制到 DataTable）
*   注意到这不是我以前工作的常见 XML
*   XML 在开头定义字段，而不是使用 ROW、CELL 和 DATA 标记
*   令我惊讶的是，当有例如 3 个字段（单元格）但第二个字段没有值时，该字段在 XML 中被“跳过”，但第三个字段有一些额外的“索引”属性，例如：ss:Index**="3 "（这表明即使它在第二个位置右索引也应该是“3”

示例 XML 的片段

```
 <Row ss:AutoFitHeight="0">
        <Cell><Data ss:Type="String">Johny</Data></Cell>
        <Cell ss:Index="3"><Data ss:Type="String">NY</Data></Cell> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T16:16:02.720

好的，我终于从这里找到了解决方案：http: [//www.codeproject.com/Articles/32370/Import-Excel-File-to-DataSet#xx](http://www.codeproject.com/Articles/32370/Import-Excel-File-to-DataSet#xx)

下面的示例代码很少满足我的需要。

```
public static class XMLtoDataTable {
  private static ColumnType getDefaultType() {
    return new ColumnType(typeof(String));
}

        struct ColumnType {
            public Type type;
            private string name;
            public ColumnType(Type type) { this.type = type; this.name = type.ToString().ToLower(); }
            public object ParseString(string input) {
                if (String.IsNullOrEmpty(input))
                    return DBNull.Value;
                switch (type.ToString()) {
                    case "system.datetime":
                        return DateTime.Parse(input);
                    case "system.decimal":
                        return decimal.Parse(input);
                    case "system.boolean":
                        return bool.Parse(input);
                    default:
                        return input;
                }
            }
        }

    private static ColumnType getType(XmlNode data) {
    string type = null;
    if (data.Attributes["ss:Type"] == null || data.Attributes["ss:Type"].Value == null)
        type = "";
    else
        type = data.Attributes["ss:Type"].Value;

    switch (type) {
        case "DateTime":
            return new ColumnType(typeof(DateTime));
        case "Boolean":
            return new ColumnType(typeof(Boolean));
        case "Number":
            return new ColumnType(typeof(Decimal));
        case "":
            decimal test2;
            if (data == null || String.IsNullOrEmpty(data.InnerText) || decimal.TryParse(data.InnerText, out test2)) {
                return new ColumnType(typeof(Decimal));
            } else {
                return new ColumnType(typeof(String));
            }
        default://"String"
            return new ColumnType(typeof(String));
    }
}

    public static DataSet ImportExcelXML (string fileName, bool hasHeaders, bool autoDetectColumnType) {
        StreamReader sr = new StreamReader( fileName);
        Stream st = (Stream) sr.BaseStream;
        return ImportExcelXML( st, hasHeaders, autoDetectColumnType);
    }

    private static DataSet ImportExcelXML(Stream inputFileStream, bool hasHeaders, bool autoDetectColumnType) {
        XmlDocument doc = new XmlDocument();
        doc.Load(new XmlTextReader(inputFileStream));
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);

        nsmgr.AddNamespace("o", "urn:schemas-microsoft-com:office:office");
        nsmgr.AddNamespace("x", "urn:schemas-microsoft-com:office:excel");
        nsmgr.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");

        DataSet ds = new DataSet();

        foreach (XmlNode node in 
          doc.DocumentElement.SelectNodes("//ss:Worksheet", nsmgr)) {
            DataTable dt = new DataTable(node.Attributes["ss:Name"].Value);
            ds.Tables.Add(dt);
            XmlNodeList rows = node.SelectNodes("ss:Table/ss:Row", nsmgr);
            if (rows.Count > 0) {

                //*************************
                //Add Columns To Table from header row
                //*************************
                List<ColumnType> columns = new List<ColumnType>();
                int startIndex = 0;
                if (hasHeaders) {
                    foreach (XmlNode data in rows[0].SelectNodes("ss:Cell/ss:Data", nsmgr)) {
                        columns.Add(new ColumnType(typeof(string)));//default to text
                        dt.Columns.Add(data.InnerText, typeof(string));
                    }
                    startIndex++;
                }
                //*************************
                //Update Data-Types of columns if Auto-Detecting
                //*************************
                if (autoDetectColumnType && rows.Count > 0) {
                    XmlNodeList cells = rows[startIndex].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++) {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex = 
                              int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        ColumnType autoDetectType = 
                          getType(cell.SelectSingleNode("ss:Data", nsmgr));

                        if (actualCellIndex >= dt.Columns.Count) {
                            dt.Columns.Add("Column" + 
                              actualCellIndex.ToString(), autoDetectType.type);
                            columns.Add(autoDetectType);
                        } else {
                            dt.Columns[actualCellIndex].DataType = autoDetectType.type;
                            columns[actualCellIndex] = autoDetectType;
                        }

                        actualCellIndex++;
                    }
                }
                //*************************
                //Load Data
                //*************************
                for (int i = startIndex; i < rows.Count; i++) {
                    DataRow row = dt.NewRow();
                    XmlNodeList cells = rows[i].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++) {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex = int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        XmlNode data = cell.SelectSingleNode("ss:Data", nsmgr);

                        if (actualCellIndex >= dt.Columns.Count) {
                            for (int ii = dt.Columns.Count; ii < actualCellIndex; ii++) {
                                dt.Columns.Add("Column" + actualCellIndex.ToString(), typeof(string));columns.Add(getDefaultType());
                            } // ii
                            ColumnType autoDetectType = 
                               getType(cell.SelectSingleNode("ss:Data", nsmgr));
                            dt.Columns.Add("Column" + actualCellIndex.ToString(), 
                                           typeof(string));
                            columns.Add(autoDetectType);
                        }
                        if (data != null)
                            row[actualCellIndex] = data.InnerText;

                        actualCellIndex++;
                    }

                    dt.Rows.Add(row);
                }
            }
        }
        return ds;
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T08:47:08.900

即使没有 coumn type 它也可以正常工作。谢谢 ！！！

有无柱类型的样本：

```
 private static DataSet ImportExcelXML(Stream inputFileStream, bool hasHeaders)
{
    XmlDocument doc = new XmlDocument();
    doc.Load(new XmlTextReader(inputFileStream));
    XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);

    nsmgr.AddNamespace("o", "urn:schemas-microsoft-com:office:office");
    nsmgr.AddNamespace("x", "urn:schemas-microsoft-com:office:excel");
    nsmgr.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");

    DataSet ds = new DataSet();

    foreach (XmlNode node in
      doc.DocumentElement.SelectNodes("//ss:Worksheet", nsmgr))
    {
        DataTable dt = new DataTable(node.Attributes["ss:Name"].Value);
        ds.Tables.Add(dt);
        XmlNodeList rows = node.SelectNodes("ss:Table/ss:Row", nsmgr);
        if (rows.Count > 0)
        {

            //*************************
            //Add Columns To Table from header row
            //*************************
            List<ColumnType> columns = new List<ColumnType>();
            int startIndex = 0;
            if (hasHeaders)
            {
                foreach (XmlNode data in rows[0].SelectNodes("ss:Cell/ss:Data", nsmgr))
                {
                    columns.Add(new ColumnType(typeof(string)));//default to text
                    dt.Columns.Add(data.InnerText, typeof(string));
                }
                startIndex++;
            }
            //*************************
            //Update Data-Types of columns if Auto-Detecting
            //*************************
            if (rows.Count > 0)
            {
                XmlNodeList cells = rows[startIndex].SelectNodes("ss:Cell", nsmgr);
                int actualCellIndex = 0;
                for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                {
                    XmlNode cell = cells[cellIndex];
                    if (cell.Attributes["ss:Index"] != null)
                        actualCellIndex =
                          int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                    //ColumnType autoDetectType =
                    //  getType(cell.SelectSingleNode("ss:Data", nsmgr));

                    if (actualCellIndex >= dt.Columns.Count)
                    {
                        //dt.Columns.Add("Column" +
                        //  actualCellIndex.ToString(), autoDetectType.type);
                        dt.Columns.Add("Column" + actualCellIndex.ToString());
                        //columns.Add(autoDetectType);
                    }
                    else
                    {
                        //dt.Columns[actualCellIndex].DataType = autoDetectType.type;
                        //columns[actualCellIndex] = autoDetectType;
                    }

                    actualCellIndex++;
                }
            }
            //*************************
            //Load Data
            //*************************
            for (int i = startIndex; i < rows.Count; i++)
            {
                DataRow row = dt.NewRow();
                XmlNodeList cells = rows[i].SelectNodes("ss:Cell", nsmgr);
                int actualCellIndex = 0;
                for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                {
                    XmlNode cell = cells[cellIndex];
                    if (cell.Attributes["ss:Index"] != null)
                        actualCellIndex = int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                    XmlNode data = cell.SelectSingleNode("ss:Data", nsmgr);

                    if (actualCellIndex >= dt.Columns.Count)
                    {
                        for (int ii = dt.Columns.Count; ii < actualCellIndex; ii++)
                        {
                            //dt.Columns.Add("Column" + actualCellIndex.ToString(), typeof(string)); columns.Add(getDefaultType());
                            dt.Columns.Add("Column" + actualCellIndex.ToString());
                            //columns.Add(getDefaultType());
                        } // ii
                        //ColumnType autoDetectType = getType(cell.SelectSingleNode("ss:Data", nsmgr));
                        dt.Columns.Add("Column" + actualCellIndex.ToString(),
                                       typeof(string));
                        // columns.Add(autoDetectType);
                    }
                    if (data != null)
                        row[actualCellIndex] = data.InnerText;

                    actualCellIndex++;
                }

                dt.Rows.Add(row);
            }
        }
    }
    return ds;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:28:40.033

首先尝试官方 API（[Microsoft Open XML SDK](http://msdn.microsoft.com/en-us/library/office/bb448854%28v=office.15%29.aspx)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:29:54.440

您可以尝试使用此代码

```
 var textReader = new XmlTextReader("...\\YourFile.xml");
    // Read until end of file
    while (textReader.Read())
    {
        XmlNodeType nType = textReader.NodeType;
        // If node type us a declaration
        if (nType == XmlNodeType.XmlDeclaration)
        {
            Console.WriteLine("Declaration:" + textReader.Name.ToString());
        }
        // if node type is a comment
        if (nType == XmlNodeType.Comment)
        {
            Console.WriteLine("Comment:" + textReader.Name.ToString());
        }
        // if node type us an attribute
        if (nType == XmlNodeType.Attribute)
        {
            Console.WriteLine("Attribute:" + textReader.Name.ToString());
        }
        // if node type is an element
        if (nType == XmlNodeType.Element)
        {
            Console.WriteLine("Element:" + textReader.Name.ToString());
        }
        // if node type is an entity\
        if (nType == XmlNodeType.Entity)
        {
            Console.WriteLine("Entity:" + textReader.Name.ToString());
        }
        // if node type is a Process Instruction
        if (nType == XmlNodeType.Entity)
        {
            Console.WriteLine("Entity:" + textReader.Name.ToString());
        }
        // if node type a document
        if (nType == XmlNodeType.DocumentType)
        {
            Console.WriteLine("Document:" + textReader.Name.ToString());
        }
        // if node type is white space
        if (nType == XmlNodeType.Whitespace)
        {
            Console.WriteLine("WhiteSpace:" + textReader.Name.ToString());
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T10:40:12.090

```
public static class XMLtoDataTable
{
    private static ColumnType getDefaultType()
    {
        return new ColumnType(typeof(String));
    }

    struct ColumnType
    {
        public Type type;
        private string name;
        public ColumnType(Type type) { this.type = type; this.name = type.ToString().ToLower(); }
        public object ParseString(string input)
        {
            if (String.IsNullOrEmpty(input))
                return DBNull.Value;
            switch (type.ToString())
            {
                case "system.datetime":
                    return DateTime.Parse(input);
                case "system.decimal":
                    return decimal.Parse(input);
                case "system.boolean":
                    return bool.Parse(input);
                default:
                    return input;
            }
        }
    }

    private static ColumnType getType(XmlNode data)
    {
        string type = null;
        if (data.Attributes["ss:Type"] == null || data.Attributes["ss:Type"].Value == null)
            type = "";
        else
            type = data.Attributes["ss:Type"].Value;

        switch (type)
        {
            case "DateTime":
                return new ColumnType(typeof(DateTime));
            case "Boolean":
                return new ColumnType(typeof(Boolean));
            case "Number":
                return new ColumnType(typeof(Decimal));
            case "":
                decimal test2;
                if (data == null || String.IsNullOrEmpty(data.InnerText) || decimal.TryParse(data.InnerText, out test2))
                {
                    return new ColumnType(typeof(Decimal));
                }
                else
                {
                    return new ColumnType(typeof(String));
                }
            default://"String"
                return new ColumnType(typeof(String));
        }
    }

    public static DataSet ImportExcelXML(string fileName, bool hasHeaders, bool autoDetectColumnType)
    {
        StreamReader sr = new StreamReader(fileName);
        Stream st = (Stream)sr.BaseStream;
        return ImportExcelXML(st, hasHeaders, autoDetectColumnType);
    }

    private static DataSet ImportExcelXML(Stream inputFileStream, bool hasHeaders, bool autoDetectColumnType)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(new XmlTextReader(inputFileStream));
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);

        nsmgr.AddNamespace("o", "urn:schemas-microsoft-com:office:office");
        nsmgr.AddNamespace("x", "urn:schemas-microsoft-com:office:excel");
        nsmgr.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");

        DataSet ds = new DataSet();

        foreach (XmlNode node in
          doc.DocumentElement.SelectNodes("//ss:Worksheet", nsmgr))
        {
            DataTable dt = new DataTable(node.Attributes["ss:Name"].Value);
            ds.Tables.Add(dt);
            XmlNodeList rows = node.SelectNodes("ss:Table/ss:Row", nsmgr);
            if (rows.Count > 0)
            {

                //*************************
                //Add Columns To Table from header row
                //*************************
                List<ColumnType> columns = new List<ColumnType>();
                int startIndex = 0;
                if (hasHeaders)
                {
                    foreach (XmlNode data in rows[0].SelectNodes("ss:Cell/ss:Data", nsmgr))
                    {
                        columns.Add(new ColumnType(typeof(string)));//default to text
                        dt.Columns.Add(data.InnerText, typeof(string));
                    }
                    startIndex++;
                }
                //*************************
                //Update Data-Types of columns if Auto-Detecting
                //*************************
                if (autoDetectColumnType && rows.Count > 0)
                {
                    XmlNodeList cells = rows[startIndex].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                    {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex =
                              int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        ColumnType autoDetectType =
                          getType(cell.SelectSingleNode("ss:Data", nsmgr));

                        if (actualCellIndex >= dt.Columns.Count)
                        {
                            dt.Columns.Add("Column" +
                              actualCellIndex.ToString(), autoDetectType.type);
                            columns.Add(autoDetectType);
                        }
                        else
                        {
                            dt.Columns[actualCellIndex].DataType = autoDetectType.type;
                            columns[actualCellIndex] = autoDetectType;
                        }

                        actualCellIndex++;
                    }
                }
                //*************************
                //Load Data
                //*************************
                for (int i = startIndex; i < rows.Count; i++)
                {
                    DataRow row = dt.NewRow();
                    XmlNodeList cells = rows[i].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                    {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex = int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        XmlNode data = cell.SelectSingleNode("ss:Data", nsmgr);

                        if (actualCellIndex >= dt.Columns.Count)
                        {
                            for (int ii = dt.Columns.Count; ii < actualCellIndex; ii++)
                            {
                                dt.Columns.Add("Column" + actualCellIndex.ToString(), typeof(string)); columns.Add(getDefaultType());
                            } // ii
                            ColumnType autoDetectType =
                               getType(cell.SelectSingleNode("ss:Data", nsmgr));
                            dt.Columns.Add("Column" + actualCellIndex.ToString(),
                                           typeof(string));
                            columns.Add(autoDetectType);
                        }
                        if (data != null)
                            row[actualCellIndex] = data.InnerText;

                        actualCellIndex++;
                    }

                    dt.Rows.Add(row);
                }
            }
        }
        return ds;
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T10:36:36.397

```
 public class ExcelXMLtoDataTable
{
    private static ColumnType getDefaultType()
    {
        return new ColumnType(typeof(String));
    }

    struct ColumnType
    {
        public Type type;
        private string name;

        public ColumnType(Type type)
        {
            this.type = type; this.name = type.ToString().ToLower();

        }
        public object ParseString(string input)
        {
            if (String.IsNullOrEmpty(input))
                return DBNull.Value;
            switch (type.ToString())
            {
                case "system.datetime":
                    return DateTime.Parse(input);
                case "system.decimal":
                    return decimal.Parse(input);
                case "system.boolean":
                    return bool.Parse(input);
                default:
                    return input;
            }
        }
    }

    private static ColumnType getType(XmlNode data)
    {
        string type = null;
        //if (data == null)
        //    type = "";
        // else 
        if (data.Attributes["ss:Type"] == null || data.Attributes["ss:Type"].Value == "")
            type = "";
        else
            type = data.Attributes["ss:Type"].Value;

        switch (type)
        {
            case "DateTime":
                return new ColumnType(typeof(DateTime));
            case "Boolean":
                return new ColumnType(typeof(Boolean));
            case "Number":
                return new ColumnType(typeof(Decimal));
            case "":
                decimal test2;
                if (data == null || String.IsNullOrEmpty(data.InnerText) || decimal.TryParse(data.InnerText, out test2))
                {
                    return new ColumnType(typeof(Decimal));
                    return new ColumnType(typeof(String));
                }
                else
                {
                    return new ColumnType(typeof(String));
                }
            default://"String"
                return new ColumnType(typeof(String));
        }
    }

    public static DataSet ImportExcelXML(string fileName, bool hasHeaders, bool autoDetectColumnType)
    {
        StreamReader sr = new StreamReader(fileName);
        Stream st = (Stream)sr.BaseStream;
        return ImportExcelXML(st, hasHeaders, autoDetectColumnType);
    }
    private static DataSet ImportExcelXML(Stream inputFileStream, bool hasHeaders, bool autoDetectColumnType)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(new XmlTextReader(inputFileStream));
        XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);

        nsmgr.AddNamespace("o", "urn:schemas-microsoft-com:office:office");
        nsmgr.AddNamespace("x", "urn:schemas-microsoft-com:office:excel");
        nsmgr.AddNamespace("ss", "urn:schemas-microsoft-com:office:spreadsheet");

        DataSet ds = new DataSet();

        foreach (XmlNode node in
          doc.DocumentElement.SelectNodes("//ss:Worksheet", nsmgr))
        {
            DataTable dt = new DataTable(node.Attributes["ss:Name"].Value);
            ds.Tables.Add(dt);
            XmlNodeList rows = node.SelectNodes("ss:Table/ss:Row", nsmgr);
            if (rows.Count > 0)
            {

                //*************************
                //Add Columns To Table from header row
                //*************************
                List<ColumnType> columns = new List<ColumnType>();
                int startIndex = 0;
                if (hasHeaders)
                {
                    foreach (XmlNode data in rows[0].SelectNodes("ss:Cell/ss:Data", nsmgr))
                    {
                        columns.Add(new ColumnType(typeof(string)));//default to text
                        dt.Columns.Add(data.InnerText, typeof(string));
                    }
                    startIndex++;
                }
                //*************************
                //Update Data-Types of columns if Auto-Detecting
                //*************************
                if (autoDetectColumnType && rows.Count > 0)
                {
                    XmlNodeList cells = rows[startIndex].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                    {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex =
                              int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        //ColumnType autoDetectType =
                        //  getType(cell.SelectSingleNode("ss:Data", nsmgr));

                        if (actualCellIndex >= dt.Columns.Count)
                        {
                            //dt.Columns.Add("Column" +
                            //  actualCellIndex.ToString(), autoDetectType.type);
                            dt.Columns.Add("Column" + actualCellIndex.ToString());
                            //columns.Add(autoDetectType);
                        }
                        else
                        {
                            //dt.Columns[actualCellIndex].DataType = autoDetectType.type;
                            //columns[actualCellIndex] = autoDetectType;
                        }

                        actualCellIndex++;
                    }
                }
                //*************************
                //Load Data
                //*************************
                for (int i = startIndex; i < rows.Count; i++)
                {
                    DataRow row = dt.NewRow();
                    XmlNodeList cells = rows[i].SelectNodes("ss:Cell", nsmgr);
                    int actualCellIndex = 0;
                    for (int cellIndex = 0; cellIndex < cells.Count; cellIndex++)
                    {
                        XmlNode cell = cells[cellIndex];
                        if (cell.Attributes["ss:Index"] != null)
                            actualCellIndex = int.Parse(cell.Attributes["ss:Index"].Value) - 1;

                        XmlNode data = cell.SelectSingleNode("ss:Data", nsmgr);

                        if (actualCellIndex >= dt.Columns.Count)
                        {
                            for (int ii = dt.Columns.Count; ii < actualCellIndex; ii++)
                            {
                                //dt.Columns.Add("Column" + actualCellIndex.ToString(), typeof(string)); columns.Add(getDefaultType());
                                dt.Columns.Add("Column" + actualCellIndex.ToString());
                                //columns.Add(getDefaultType());
                            } // ii
                            //ColumnType autoDetectType = getType(cell.SelectSingleNode("ss:Data", nsmgr));
                            dt.Columns.Add("Column" + actualCellIndex.ToString(),
                                           typeof(string));
                            // columns.Add(autoDetectType);
                        }
                        if (data != null)
                            row[actualCellIndex] = data.InnerText;

                        actualCellIndex++;
                    }

                    dt.Rows.Add(row);
                }
            }
        }
        return ds;
    }

} 
```

# java - 将java日期转换为日期

> ID：12897083
> 
> 赞同：2
> 
> 时间：2012-10-15T13:52:26.200
> 
> 标签：java

我正在开发一个项目，我在其中创建了 2 个变量`startdate`，`enddate`类型`Date`为 java。
如您所知，Java 中的 Date 包括日期和时间。
但是在查询时，我只需要 startdate 变量的日期（特别是天）部分。
我试过`startdate.getday()`了，但它说它已被弃用，我应该改用它`Calendar.get(Calendar.DAY_OF_MONTH)`。
但我不知道如何使用它，尝试到处搜索，解决方案是获取当前日期。

如果 startdate 包含 (30/01/1988 02:30:54) 我想做一些事情，以便我在字符串/整数变量中分别获得 30/01/1988 或者如果可能的话 30 和 01 和 1988 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T13:55:29.100

```
 Calendar cal = Calendar.getInstance();
 cal.setTime(startdate);
 cal.get(Calendar.DAY_OF_MONTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T05:32:07.840

该类`java.util.Date`是旧的数据时间类的一部分，这些类设计不良、混乱且麻烦。避开他们。

而是使用 java.time 类。

# java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。[Joda-Time](http://www.joda.org/joda-time/)团队还建议迁移到 java.time 。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

# `Instant`

第一步是跳出旧课程，进入新课程。对于转换，新方法已添加到旧类中。该`java.util.Date`课程现在提供`toInstant`. An`Instant`是 UTC 时间线上的一个时刻，分辨率可以达到纳秒。

```
Instant instant = myUtilDate.toInstant(); 
```

# 时区

确定日期需要时区。对于任何给定的时刻，日期都会因时区而在全球范围内变化。巴黎的午夜过后几分钟，在蒙特利尔仍然是“昨天”。

该类`ZoneId`代表一个时区。请注意，我们从不使用主流媒体中常见的 3-4 个字母缩写，例如`EST`or `IST`。这些不是真正的时区，不是标准化的，甚至不是唯一的（！）。而是使用tz 数据库中以 format 定义的[适当时区](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)`continent/region`。

```
ZoneId zoneId = ZoneId.of( "America/Montreal" );
ZonedDateTime zdt = instant.atZone( zoneId ); 
```

询问`ZonedDateTime`您需要的零件。

```
int year = zdt.getYear();
int month = zdt.getMonthValue(); // Or handy Month enum…  zdt.getMonth();
int dayOfMonth = zdt.getDayOfMonth(); 
```

# `LocalDate`

如果您正在做大量工作，而您肯定想忽略一天中的时间和时区，请使用该[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)课程。

```
LocalDate localDate = zdt.toLocalDate(); 
```

# url-rewriting - struts2中的URL重写

> ID：12897086
> 
> 赞同：1
> 
> 时间：2012-10-15T13:52:33.450
> 
> 标签：url-rewriting, struts2

在我的站点中，我在一个 jsp 页面中显示游戏。我正在从一个 jsp 传递游戏 ID

```
 <a href="playgame?id=<s:property value="id"/>"> 
```

从操作中获取游戏后，它在地址栏中显示以下网址

```
mysite.com/playgame?id=tskaqnrg9p 
```

我想显示带有游戏名称的网址如下

```
mysite.com/playgame/gamename 
```

怎么做

我正在使用 struts2 框架

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:05:16.067

您可以使用提到的 REST 插件，或使用模式匹配操作映射器：

[http://struts.apache.org/2.x/docs/wildcard-mappings.html#WildcardMappings-AdvancedWildcards](http://struts.apache.org/2.x/docs/wildcard-mappings.html#WildcardMappings-AdvancedWildcards)

（或 NamedVariablePatternMatcher。）

# java - Spring JpaRepository 未保存嵌套对象

> ID：12897089
> 
> 赞同：11
> 
> 时间：2012-10-15T13:52:37.360
> 
> 标签：java, spring, repository, spring-roo, spring-data

我有一个带有 GWT 的 Spring Roo 应用程序。在服务器端，我为所有实体提供了简单的 JpaRepository 接口，例如：

```
@Repository
public interface MyEntityRepository extends JpaSpecificationExecutor<MyEntity>, JpaRepository<MyEntity, Long> {
} 
```

有一个 MyEntity 类与 MyOtherEntity 类具有一对一的关系。当我调用我的实体服务持久方法时

```
public void saveMyEntity (MyEntity myEntity) {
    myEntityRepository.save(myEntity);
} 
```

只有 myEntity 对象将被保存。MyEntity 的所有子对象都被忽略。将 myEntity 对象与 myOtherEntity 对象一起保存的唯一方法是调用

```
 myOtherEntityRepository.save(myOtherEntity); 
```

在上面的代码之前。那么有没有更优雅的方式来使用 JpaRepository 接口自动保存子对象呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-15T14:41:56.813

我不知道你的实施细节。但是，我认为，它只需要使用`CascadeType`in `JPA`。JPA 参考[CascadeType](http://www.java2s.com/Code/Java/JPA/Cascade-Action.htm)。

尝试如下。

```
public class MyEntity {
    @OneToOne(cascade=CascadeType.PERSIST) <or> @OneToOne(cascade=CascadeType.ALL) <-- for all operation
    @JoinColumn(name = "YOUR-ID")
    private MyOtherEntity myOtherEntity ;
} 
```

对于递归 MyEntity 关系

```
public class MyEntity {
    @OneToOne(cascade=CascadeType.PERSIST) <or> @OneToOne(cascade=CascadeType.ALL) <-- for all operation
    @JoinColumn(name = "YOUR-ID")
    private MyEntity myEntity ;
} 
```

# visual-studio-2010 - 添加包含目录 - 团队安全

> ID：12897090
> 
> 赞同：1
> 
> 时间：2012-10-15T13:52:45.623
> 
> 标签：visual-studio-2010, git

我在需要更改[项目设置](https://stackoverflow.com/questions/3349378/edit-includepath-macro-in-visual-studio-2010)的 Visual Studio 2010 Professional 项目中使用 MySQL 连接器：

*   `Include Directories`
*   `Librarie Directories`

这些设置存储在`foo.vcxproj`要编译的文件列表中（如果我错了，请纠正我）。问题是该项目是由许多人开发的（我们使用 git 作为我们的版本控制系统），我们需要实现`foo.vcxproj`哪些结果会破坏`Include Directories`设置。

有没有办法创建类似“*在单独文件中的项目（解决方案）特定设置*”之类的东西，这将允许每个人都有他/她自己的文件，其中只包含定义这些路径的那 3 行？

[**注意：**我已经找到[了这个](https://stackoverflow.com/questions/111631/visual-studio-solutions-multiple-project-how-to-effectively-propagate-projec)，但我不确定这是否是方法，以及此类问题的常见/最佳实践是什么。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T13:04:23.413

如果你可以的话：

*   检测文件的*内容*，`foo.vcxproj`
*   并将 3 条个性化的行与其余内容分开，

然后，您可以使用 git 机制，允许您`git add`恢复正确的内容（没有三行），同时使开发人员可以添加他们自己的设置记录在 said 中`foo.vcxproj`。
“清理”过程将由脚本（“ `clean`”）完成，声明为[gitattributes 过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)（它[只有内容，而不是它过滤的文件的路径或名称](https://stackoverflow.com/questions/2562523/using-git-to-work-with-subversion-ignoring-modifications-to-tracked-files/2562678#2562678)）：

![清洁过滤器驱动程序](../Images/a0e667746bef41f77225ff6ec307191e.png)

因此，您将在工作树中拥有您的个性化文件，但您返回索引的是原始内容。[有关示例，](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)
请参阅Git-scm 书。

# ios - NSDictionary 序列化为 NSString

> ID：12897091
> 
> 赞同：0
> 
> 时间：2012-10-15T13:52:45.783
> 
> 标签：ios, serialization, nsdictionary, nsdata

我正在使用 URLScheme，我需要将序列化的 NSDictionary 从我的应用 A 发送到我的应用 B。

在**应用程序 A**中，我使用 NSKeyedArchiver 将我的 NSDictionary 序列化为 NSData

```
 NSDictionary *myDictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"This is value 1", @"key1", 
                                    @"value 2", @"key2",
                                    @"value3", @"key3", 
                                    @"", @"key4", 
                                    @"value5", @"key5", 
                                    @"value 6", @"key6", 
                                    nil];
NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:myDictionary];
    [archiver finishEncoding];
    [archiver release];

    NSString *bytes = [[[NSString alloc] initWithData:data
                                             encoding:NSASCIIStringEncoding] autorelease]; 
```

在**应用程序 B**中，我正在使用 NSKeyedUnarchiver

```
NSData *data = [[NSString stringWithFormat:@"%@", val] dataUsingEncoding:NSASCIIStringEncoding];        
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
NSDictionary *myDictionary = [[unarchiver decodeObject] retain];
[unarchiver finishDecoding];
[unarchiver release]; 
```

我的序列化 NSDictionary 看起来像：

> bplist00Ô01T$topX$objectsX$versionY$archiverÑR$0¯
> !"#$%&'()U$nullÓ ZNS.objectsWNS.keysV$class¦
> ¦Tkey2Tkey5Tkey3Tkey1Tkey6Tkey4Wvalue 2o@

看起来我无法将此 NSString 转换为 NSData 并取回我的 NSDictionary。

NSData 在 [dataUsingEncoding:dataUsingEncoding:NSASCIIStringEncoding] 之后为 NULL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:27:55.853

查看 NSJSONSerialization，将字典和数组转换为 json 纯字符串格式变得轻而易举。

生成 json 数据 NSDictionary *mydict = [NSDictionary dictionaryWithObjectsAndKeys: ....

```
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:info options:NSJSONWritingPrettyPrinted error:&error]; 
```

并将其改回：

```
NSError *error = nil;
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error]; 
```

没有比这更简单的了，而且您不需要任何外部库或设置。内置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:00:02.567

你到底为什么要发送字节作为`NSString`- 这永远行不通！

(a)`NSString`用于编码的文本数据——即遵循一组特定规则的数据。

(b)`NSData`用于一系列只是字节的字节。

你有（b），而不是（a）。

发送`NSData`对象并且根本不转换为/从`NSString`。

* * *

编辑 URL 参数呢？

好的，所以我上面的回答有点太黑白了。

如果您*确实*需要在数据和字符串之间进行转换，请查看 base64 编码 - 它会以牺牲大小为代价为您提供数据的安全字符串表示。

这里有一些库可以为您转换 - 试试这个：[https ://github.com/nicklockwood/Base64](https://github.com/nicklockwood/Base64)

但是，如果您在 iOS6 设备上对字典进行编码并在 iOS5 上对其进行解码，将会发生什么——您不能 100% 确定它会起作用。您最好编写自己的编码/解码方法，将字典转换为字符串并再次返回。如果是 URL，为什么不直接使用 URL 参数`x=5&name=Bob`呢？

# php - 可以将查询作为数组进行，其中检查多个表的所需值吗？

> ID：12897095
> 
> 赞同：0
> 
> 时间：2012-10-15T13:53:10.093
> 
> 标签：php, mysql

我可以在 MYSQL（最终是 PHP + MySQL）中编写一个查询，以便我可以检查一个数组中的多个表吗？

***例如*** 假设我有表**client**、 **car**、 **rate** 每个表都有一个 ID。

在**客户**中是行... ID、姓名、地址 在**汽车**中是行... ID、品牌、型号、年份、车牌号 在**比率**中是行... ID、1 天、2 天、3 天

以下工作吗？：

```
SELECT name, make, model, license plate number, 1-day FROM client, car, rate WHERE make = ford 
```

或在 PHP 中

```
$q = "SELECT name, make, model, license plate number, 1-day FROM client, car, rate WHERE make = ford"; 
```

这是正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:54:26.547

不，你不能。不是你在这里展示它的方式。如果表彼此相关，您可以做的是 JOINS。否则，您可能不得不同时从一张桌子中进行选择。

[您还可以在 PHP 中实现一个迭代解决方案以从多个表返回，](https://stackoverflow.com/questions/198650/multiple-data-tables-in-php-mysql)或者考虑使用存储过程在数据库端执行此操作。

通常在使用关系数据库时，表之间存在关系，因此您可以对它们执行连接操作（一个非常松散的示例，因为我对您正在工作的上下文一无所知）：

```
SELECT c.name, c.make, c.model, c.licensePlateNumber FROM car AS c JOIN client AS cl ON c.ClientId = cl.ClientId JOIN rate AS r ON cl.RateId = r.RateId WHERE c.make = 'Ford'; 
```

相关：[链接](https://stackoverflow.com/questions/1683794/retrieving-multiple-result-sets-with-stored-procedure-in-php-mysqli)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:46:19.533

是的，您可以将您的表名作为数组和 id 发送给您的查询函数，然后执行如下所示

```
function multiple_table_query($tbl_ary,$id)
{
      foreach($tbl_ary as $tbl)
{
    $sql="SELECT * FROM $tbl where id=$id"
    $result[]=mysql_fetch_array($sql)
}
}
 return $result; 
```

但这不是更好的 sql 连接以获得准确和美观的结果的首选方法。

# php - 使用 PHP 进行无损图像旋转

> ID：12897104
> 
> 赞同：1
> 
> 时间：2012-10-15T13:53:31.097
> 
> 标签：php, image-processing, gd

我一直在研究一个系统来旋转上传的图像。该算法的工作原理如下：

```
 1) User uploads a jpeg.  It gets saved as a PNG
 2) Link to the temp png is returned to the user.
 3) The user can click 90left,90right, or type in N degrees to rotate
 4) The png is opened using 

   $image = imagecreatefrompng("./fileHERE");

 5) The png is rotated using

   $imageRotated = imagerotate($image,$degrees,0);

 6) The png is saved and the link returned to the user.
 7) If the user wishes to rotate more go back to step 3 operating on the newly
    saved temporary PNG, 
    else the changes are commited and the final image is saved as a jpeg. 
```

这在左右旋转 90 度时效果很好。用户可以无限旋转多次而不会损失任何质量。问题是当用户尝试旋转 20 度（或其他非 90 的倍数）时。当旋转 20 度时，图像会稍微旋转，并形成一个黑框来填充需要填充的区域。由于图像（带有黑框）被保存为 png，下一次旋转 20 度会使图像（带有黑框）再旋转 20 度，并形成另一个黑框来填补空白。长话短说，如果你这样做到 360 度，你会在一个非常小的剩余图像周围有一个大黑框。即使您放大并裁剪黑框，质量也会明显下降。

有什么办法可以避免黑匣子？（服务器没有安装imagick）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:56:45.053

始终存储未修改的源文件，并在旋转时使用原始源文件旋转度数。所以 20 度 + 20 度，意味着将源旋转 40 度。

1.  用户上传 JPEG。
2.  用户可以点击“左90”、“右90”，或者输入*N*度旋转。
3.  png是使用打开的

    ```
    $image = imagecreatefromjpeg("./source.jpg"); 
    ```

4.  png 旋转...

    ```
    // If this is the first time, there is no rotation data, set it up
    if(!isset($_SESSION["degrees"])) $_SESSION["degrees"] = 0;

    // Apply the new rotation
    $_SESSION["degrees"] += $degrees;

    // Rotate the image
    $rotated = imagerotate($image, $_SESSION["degrees"], 0);

    // Save the image, DO NOT MODIFY THE SOURCE FILE!
    imagejpeg($rotated, "./last.jpg");

    // Output the image
    header("Content-Type: image/jpeg");
    imagejpeg($rotated); 
    ```

5.  如果用户希望旋转更多，则返回步骤 3，否则将 last.jpg 作为最终文件并`$_SESSION["degrees"]`销毁该参数。

# actionscript-3 - 如何在动作脚本 3 中显示超出舞台范围的影片剪辑

> ID：12897105
> 
> 赞同：1
> 
> 时间：2012-10-15T13:53:32.307
> 
> 标签：actionscript-3, flash

我目前正在开发 Flash 中的启动器游戏：

1.  英雄将一根棍子扔到空中，然后长距离移动，击中各种物体。
2.  当棍子飞行时，英雄的狗追着它跑，撞到各种物体等等......

**我的问题：**我想水平分割屏幕，你跟随屏幕上部的棍子，你跟随屏幕下部的狗。

现在我已经实现了摇杆运动。从技术上讲，摇杆只移动到舞台的中心，一旦它的坐标在舞台中心，它的所有其他对象都根据摇杆的 x 和 y 速度移动。

**现在我的问题是：**我如何管理狗的展示？我希望我能找到一些创建视口的类，允许我显示超出我的舞台范围的对象，但到目前为止我还没有找到我需要的东西。

我能想到的唯一解决方案是每当将一个动画剪辑添加到我的舞台时创建每个动画剪辑的 2 个实例，并将副本添加为另一个动画剪辑的子代，在转换后的 x 和 y 坐标处）但是我必须做两次（例如：如果棍子破坏了某些东西，那么它的副本也必须被破坏）。

关于如何在不折磨玩家处理器（并危及我自己的理智）的情况下做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:50:22.940

最终我找到了这个问题的答案，所以我想我会分享我所做的。

解决方案是使用 transform.matrix 属性实现虚拟相机

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)

这是有关如何实现此目的的教程。

[http://www.youtube.com/watch?v=yuhJkEWAbq8](http://www.youtube.com/watch?v=yuhJkEWAbq8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:06:29.783

解决您的问题的一种可能方法是**blitting**，它从 DisplayObject 中绘制像素，类似于您[在此处](http://flexdiary.blogspot.com/2012/06/endless-scrolling-bathroom.html)看到的内容。

另一个（从长远来看可能会很好地为您服务，并且不需要从一开始就相互排斥），是**让整个事情成为数据驱动的**。您只需构建两个不同的视图，它们要么获取相同的数据，要么获取数据的不同子集，然后根据它们自己的规则表示数据。

当一个对象从数据中消失时，它的表示同时从两个视图中消失。从技术上讲，您可能仍在做两次工作，但如果您对编写类的方式很聪明，这并不一定意味着额外的代码。

最后，您可能需要考虑使用[scrollRect](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#scrollRect)。

# c# - 如何发送 Excel 工作簿作为响应？

> ID：12897108
> 
> 赞同：0
> 
> 时间：2012-10-15T13:53:46.223
> 
> 标签：c#, asp.net, excel, excel-2007

我正在尝试在代码隐藏中创建一个 excel 表，然后下载它。我不想将文件保存在磁盘上，我想直接将其作为响应发送，我尝试了以下代码。但我没有得到确切的excel。

```
Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;

            xlApp = new Excel.ApplicationClass();
            xlWorkBook = xlApp.Workbooks.Add(misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

            for (int i = 1; i <= 100; i++)
                for (int j = 1; j < 100; j++)
                    xlWorkSheet.Cells[i, j] = i + "  : " + j;

            Response.ContentType = "application/vnd.ms-excel";
            Response.AppendHeader("Content-Disposition", "attachment; filename=translationText.xls");
            this.EnableViewState = false;
            Response.Write(xlWorkSheet);
            Response.End();

            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp); 
```

如何将 excel 工作表对象作为响应发送。因此，将提示该用户下载 excel 文件

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:59:57.170

```
Response.ContentType = "application/vnd.ms-excel";
Response.AppendHeader("Content-Disposition", "attachment; filename=translationText.xls");
Response.Write("<table>");
for (int i = 1; i <= 100; i++)
{
    Response.Write("<tr>");
    for (int j = 1; j < 100; j++)
    {
        Response.Write("<td>"+i + "  : " + j+"</td>");            
    }
    Response.Write("</tr>");
}
Response.Write("</table>");
Response.Flush();
Response.End(); 
```

试试上面的代码，你不需要在这里创建一个 excel 对象，如果你从一个 excel 中读取然后编写它是不同的代码。

那么读取和写入excel文件到浏览器的不同代码是

```
Response.BinaryWrite(yourexcelstream) 
```

# php - imagecopyresampled 问题...尺寸不太正确

> ID：12897110
> 
> 赞同：0
> 
> 时间：2012-10-15T13:53:54.560
> 
> 标签：php, gd, jcrop

我在裁剪图像时遇到问题，并认为也许有人可以提供帮助。基本上，我使用 jCrop 将图像裁剪为指定的 x、y、宽度、高度，并在后端使用以下内容来处理图像：

```
<?php
    $image = imagecreatefromjpeg(DOC_ROOT . '/' . $db_image->source);   
    list($image_width, $image_height) = getimagesize(DOC_ROOT . '/' . $db_image->source);
    $cf = $data->cropping_factor;
    $new_image = imagecreatetruecolor($cf * $data->crop_data['w'], $cf * $data->crop_data['h']);
    imagecopyresampled(
        $new_image, 
        $image, 
        0, //Destination x coordinate
        0, //Destination x coordinate
        intval($cf * $data->crop_data['x']), //Source X coordinate
        intval($cf * $data->crop_data['y']), //Source Y coordinate
        intval($cf * $data->crop_data['w']), //Destination W
        intval($cf * $data->crop_data['h']), //Destination H
        $image_width, //Original W
        $image_height //Original H
    );
    imagejpeg($new_image, DOC_ROOT . '/' . $db_image->source, 100);
?> 
```

基本上，这段代码给我留下了：

```
Array
(
    [0] => Resource id #33 //New Image
    [1] => Resource id #31 //Source Image
    [2] => 0 //Destination X
    [3] => 0 //Destination Y
    [4] => 114 //Source X
    [5] => 407 //Source Y
    [6] => 786 //New Width
    [7] => 293 //New Height
    [8] => 900 //Original Width
    [9] => 700 //Original Height
) 
```

原始图像可以在这里找到：[http](http://cl.ly/image/3Y0l1a2h3U2S) ://cl.ly/image/3Y0l1a2h3U2S 。调整大小的图像可以在这里找到：[http](http://cl.ly/image/0Q3J2c2q0N1j) ://cl.ly/image/0Q3J2c2q0N1j 。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:01:38.730

进一步检查后，图像似乎失真（条形不同程度地倾斜）。有了这些信息，我认为天平必须关闭。因此，我将代码更改为以下内容：

```
<?php
    imagecopyresampled(
        $new_image, 
       $image, 
       0, //Destination x coordinate
       0, //Destination x coordinate
       intval($cf * $data->crop_data['x']), //Source X coordinate
       intval($cf * $data->crop_data['y']), //Source Y coordinate
       $image_width, //Original W
       $image_height //Original H
       $image_width, //Original W
       $image_height //Original H
    );
?> 
```

这通过不缩放新目标图像的坐标来解决问题。

# java - 嵌套线程可以为父线程抛出异常吗？

> ID：12897112
> 
> 赞同：9
> 
> 时间：2012-10-15T13:53:58.483
> 
> 标签：java, multithreading

我有一个`Controller`类和一个`Monitor`工作线程。控制器线程看起来像这样

```
public class ControllerA {
    public void ControllerA(){
        try{
            doWork();
        }
        catch(OhNoException e){
        //catch exception
        }

    public void doWork() throws OhNoException{

      new Thread(new Runnable(){
        public void run(){
        //Needs to monitor resources of ControllerA, 
        //if things go wrong, it needs to throw OhNoException for its parent
        }
        }).start();

      //do work here

    }
} 
```

这样的设置可行吗？如何将异常抛出到线程外部？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T13:56:39.343

> 如何将异常抛出到线程外部？

有几种方法可以做到这一点。您可以`UncaughtExceptionHandler`在线程上设置 a ，也可以使用 an`ExecutorService.submit(Callable)`并使用从`Future.get()`.

最简单的方法是使用`ExecutorService`：

```
ExecutorService threadPool = Executors.newSingleThreadScheduledExecutor();
Future<Void> future = threadPool.submit(new Callable<Void>() {
      public Void call() throws Exception {
         // can throw OhNoException here
         return null;
     }
});
// you need to shut down the pool after submitting the last task
threadPool.shutdown();
try {
   // this waits for your background task to finish, it throws if the task threw
   future.get();
} catch (ExecutionException e) {
    // this is the exception thrown by the call() which could be a OhNoException
    Throwable cause = e.getCause();
     if (cause instanceof OhNoException) {
        throw (OhNoException)cause;
     } else if (cause instanceof RuntimeException) {
        throw (RuntimeException)cause;
     }
} 
```

如果您想使用，`UncaughtExceptionHandler`那么您可以执行以下操作：

```
 Thread thread = new Thread(...);
 final AtomicReference throwableReference = new AtomicReference<Throwable>();
 thread.setUncaughtExceptionHandler(new UncaughtExceptionHandler() {
     public void uncaughtException(Thread t, Throwable e) {
         throwableReference.set(e);
     }
 });
 thread.start();
 thread.join();
 Throwable throwable = throwableReference.get();
 if (throwable != null) {
     if (throwable instanceof OhNoException) {
        throw (OhNoException)throwable;
     } else if (throwable instanceof RuntimeException) {
        throw (RuntimeException)throwable;
     }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:40:29.933

Runnable 接口不能抛出检查异常或返回值。在 Callable 接口中，您可以调用任何返回值或抛出异常的工作方法。监视器的主要任务是

1.  使用可调用实例声明和初始化未来。

2.  一个 getResult() 方法，它可以有一个`return future.get();`语句，并且应该在其 throws 子句中声明任何已检查的异常，以便由调用代码处理。这样我们就不必返回一个空值。

# reference - ArcGIS桌面要素类，坐标系和投影？

> ID：12897120
> 
> 赞同：-1
> 
> 时间：2012-10-15T13:54:31.257
> 
> 标签：reference, spatial, arcgis

再会，

当我在 ArcGIS Desktop 中右键单击某些要素类时，我注意到其中一些定义了坐标系和投影，而另一些则只定义了坐标系。

我几乎没有指向这些要素类的 ArcGIS 服务器服务，只定义 GCS 有什么影响？什么时候需要投影？是否可以仅定义投影？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T02:10:52.830

所以这是 GIS 坐标系和投影的基本问题之一。在我在线回答之后，您绝对应该阅读更多内容，ESRI 对此有一些很好的帮助文件，但我会为您概述 tl/dr 或孩子们最近所说的任何内容：

BLUF: Yes, you should project those files into an *appropriately chosen* projection for what your users use those map services for. 如果这意味着保留数据的多个副本……您对此的呼吁。

GCS，“地理坐标系”基本上是纬度/经度。这些是角度度量，它们代表您拥有的数据地球上的 x/y 坐标。如果您想在旋转的圆形地球仪或世界的 3D 模型以外的任何东西上显示这些，则需要投影它们。

所以你选择了一种方法来投影你的数据——也许你把它投影到一个圆锥上，然后在圆锥的侧面剪一条线，把它弄平，也许你选择一个圆柱体，或者你（可以说）很懒，你只需选择一张纸。无论哪种方式，都会以某种方式出现变形——形状、面积、角度或距离。一些预测保留了这些东西中的一个或另一个，但没有一个可以保留所有这些。（因此，例如，古代海员希望使用角度沿直线航行，因此他们使用了墨卡托投影，它可以节省角度）。

无论如何，您的服务正在调用此未投影数据，然后他们查看服务 MSD（或 MXD，如果您仍在 9.x 上，则应该升级），然后每次收到文档请求时，它都会回调数据并“即时”将其重新投影到 MSD 中的坐标系/投影。这需要时间。此外，它只在线上投影点，而不在线之间投影插值点 - 这意味着如果您从 GCS 投影到圆锥曲线或其他东西，您可能会得到一些看起来很不稳定（锯齿状、有角度）的线。

但实际上，除非您正在执行动态服务，否则无论如何您都应该缓存数据，至少执行按请求缓存（而不是生成/预缓存您为其提供数据的整个 AOI）。

另外，让我进一步回答：不，您不能为没有坐标系的数据选择投影……因为没有坐标系，即使是简单的 Lat/Lon 也不存在。坐标系只是单位（度/分/秒或英尺或米）和原点（格林威治/赤道，或 UTM 区域的中间等）的选择。

以下是一些 ESRI 链接：

[什么是预测？](http://resources.arcgis.com/en/help/main/10.1/index.html#//003r00000001000000 "什么是预测？")

[投影基础](http://resources.arcgis.com/en/help/main/10.1/index.html#/Projection_basics_for_GIS_professionals/003r00000002000000/ "投影基础知识")

我想您是成年人，无论哪种方式，如果您是孩子，您也可以浏览帮助。它需要一些阅读和重新阅读，但这很容易成为 GIS 中最容易被误解的部分，所以如果你能解释什么是大地水准面或椭球以及投影之间的差异，你将击败大约 90% 的 GIS 爱好者。

# c# - 对 Nullable 进行类型检查

> ID：12897123
> 
> 赞同：5
> 
> 时间：2012-10-15T13:54:35.723
> 
> 标签：c#

如果有以下方法：

```
static void DoSomethingWithTwoNullables(Nullable<int> a, Nullable<int> b)
{
    Console.WriteLine("Param a is Nullable<int>: " + (a is Nullable<int>));
    Console.WriteLine("Param a is int          : " + (a is int));
    Console.WriteLine("Param b is Nullable<int>: " + (b is Nullable<int>));
    Console.WriteLine("Param b is int          : " + (b is int));
} 
```

当我使用 null 作为参数调用此方法时，类型检查会为此参数返回 false。例如这段代码

```
DoSomethingWithTwoNullables(5, new Nullable<int>()); 
```

导致此输出：

```
Param a is Nullable<int>: True
Param a is int          : True
Param b is Nullable<int>: False
Param b is int          : False 
```

使用 Nullable 并传递 null 时，有什么方法可以保留类型信息？我知道在这个例子中检查类型是没有用的，但它说明了问题。在我的项目中，我将参数传递给另一个采用`params object[]`数组并尝试识别对象类型的方法。这种方法需要对`Nullable<int>`和做不同的事情`Nullable<long>`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:57:39.963

直奔根本问题，不，你不能这样做。null`Nullable<int>`具有与 null 完全相同的盒装表示`Nullable<long>`，或者实际上是“正常”null。没有办法知道它是什么类型的 null，因为它的底层表示只是全零。有关更多详细信息，请参阅[装箱可空类型](http://msdn.microsoft.com/de-de/library/ms228597%28v=vs.85%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T13:59:54.010

从概念上讲，`new Nullable<int>` **是** `null`。

如果我们概括，忘记`Nullable<T>`：

```
string s = null;
bool b = s is string; 
```

我们得到`false`。`false`是对值进行类型检查的*预期*`null`值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:01:05.313

您可以尝试使用反射来实现这一点。[相关文章在这里。](http://weblogs.asp.net/grantbarrington/archive/2009/03/17/using-reflection-to-determine-whether-an-type-is-nullable-and-get-the-underlying-type.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:58:33.437

不幸的是，`null`它不指向任何特定的内存位置，因此没有可以与之关联的元数据来查找类型。因此，您无法获得有关该变量的任何附加信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T14:16:50.020

除非我误解了这个问题，否则您可以使用`GetType()`. 例如，

```
int? myNullableInt = null;
Console.WriteLine(myNullableInt.GetValueOrDefault().GetType()); 
```

如果`myNullableInt`为 null，则返回默认值。检查此返回值的类型，在这种情况下，它将返回`System.Int32`。您可以对返回的类型进行`If..else`/`Switch`检查以执行相关操作。

（`int?`与 相同`Nullable<int>`）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T14:21:36.203

你不能这样做，也不应该这样做。由于`Nullable<T>`是一个结构，这种类型的值类型变量*具有编译时所需的所有类型信息。* 只需使用`typeof`运算符。

另一方面，您可能有一个 Nullable 实例，您在编译时不知道其类型。那必须是一个静态类型为`object`或其他引用类型的变量。但是，因为一个`Nullable<T>`值框到一个装箱`T`值，所以*没有装箱之类的东西`Nullable<T>`。* 您检查的类型将只是一个`T`.

这就是为什么 和 得到相同结果的`is int`原因`is Nullable<int>`。没有办法区分 boxed`int`和 boxed `int?`，因为没有 boxed `int?`。

有关详细信息，请参阅[Null 不再丢失](http://blogs.msdn.com/b/somasegar/archive/2005/08/11/450640.aspx)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-15T14:23:30.907

正如已经指出的，`null`没有类型。要确定某事是否是`int?`vs `long?`，您需要使用反射来获取有关存储该类型的某事的信息。以下是一些您可以用作灵感的代码（不确切知道您尝试实现的代码有点奇怪）：

```
class Pair<T> where T : struct {

  public Pair(T? a, T? b) {
    A = a;
    B = b;
  }

  public T? A { get; private set; }

  public T? B { get; private set; }

}

void DoSomething<T>(Pair<T> pair) where T : struct {
  DoMore(pair);
}

void DoMore(params object[] args) {
  Console.WriteLine("Do more");
  var nullableIntPairs = args.Where(IsNullableIntPair);
  foreach (Pair<int> pair in nullableIntPairs) {
    Console.WriteLine(pair.A);
    Console.WriteLine(pair.B);
  }
}

bool IsNullableIntPair(object arg) {
  var type = arg.GetType();
  return type.IsGenericType
    && type.GetGenericTypeDefinition() == typeof(Pair<>)
    && type.GetGenericArguments()[0] == typeof(int);
} 
```

如果执行以下代码

```
DoSomething(new Pair<int>(5, new int?()));
DoSomething(new Pair<long>(new long?(), 6L)); 
```

你得到以下输出：

```
多做
5
空值
多做

```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-27T09:11:21.953

您可以使用 typeof ：

```
a == typeof(Nullable<int>) //true
a == typeof(int) //false 
```

# java - 是否有包含所有标准运算的四元数和矩阵库？

> ID：12897130
> 
> 赞同：6
> 
> 时间：2012-10-15T13:54:45.983
> 
> 标签：java, jar, quaternions

是否有可以处理所有标准操作的四元数和矩阵（四元数矩阵乘法）的java库？

（我之前搜索过谷歌和这里 - 但没有找到任何适当的解决方案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:28:28.860

Jave3D [javax.vecmath](http://java.net/projects/vecmath)包支持四元数 ( `Quat4D`) 并且支持很多最常见的操作。它还具有可应用于四元数的矩阵运算。

您可能会发现它符合您的大部分需求——如果您需要添加任何额外的操作，应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-20T14:20:45.847

还有 JME3 的[Quaternion](http://javadoc.jmonkeyengine.org/com/jme3/math/Quaternion.html)。JME3 类的接口和 javadoc 不符合标准。它也到处使用浮点精度。我只会在性能成为问题时使用它，例如在游戏中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-03T07:19:23.797

Apache 在[org.apache.commons.math3.complex](https://commons.apache.org/proper/commons-math/javadocs/api-3.4/org/apache/commons/math3/complex/Quaternion.html)中支持四元数。它似乎具有通常所需的操作。

# php - 如何使用用户帐户处理电子邮件邀请系统

> ID：12897132
> 
> 赞同：1
> 
> 时间：2012-10-15T13:54:50.280
> 
> 标签：php, user-input

处理以下情况的标准/最佳方法是什么？

用户输入电子邮件地址 user1@example.com 以向网站上的事件发送邀请。收到邀请的人已经在网站上拥有一个帐户，但已使用 user2@example.com 作为他们的电子邮件地址进行了注册。

在让用户使用其实际帐户登录的同时，如何验证它是正确的人？我可以使用邀请 ID 将该帐户与该邀请绑定，但是是什么阻止了任何有权访问该 ID 的人登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:58:53.067

这取决于您的信任程度。你有几个选择：

*   信任发送邀请的人。任何使用有效邀请响应 URL 访问的人都可以使用他们选择的电子邮件进行注册，无论邀请的对象是谁。
*   拒绝收件人和注册用户电子邮件地址不匹配的邀请响应。
*   只允许用户向已经注册的人发送邀请，并让他们在系统中选择正确的帐户。

# ios6 - Facebook SDK 3.1 - 分享图片

> ID：12897137
> 
> 赞同：2
> 
> 时间：2012-10-15T13:54:58.523
> 
> 标签：ios6, facebook-ios-sdk

我必须在我的 ios 应用程序中集成 FB SDK 3.1。

我成功地在墙上分享了一张图片，但我无法设置“通过 [appname]”（默认情况下需要“通过 ios”）。我已经在我的 info.plist 文件中放入了 appid 值。

我也无法为 ios5 进行共享（它以错误 400 回复）。

以下是我使用的代码：

```
- (void)viewDidLoad{

appDelegate = [[UIApplication sharedApplication]delegate];
if (!appDelegate.session.isOpen) {
    appDelegate.session = [[FBSession alloc] init];

    if (appDelegate.session.state == FBSessionStateCreatedTokenLoaded) {
        [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                         FBSessionState status,
                                                         NSError *error) {
        }];
    }
} 
```

当我必须分享时，我调用这个方法：

```
- (IBAction)fbShare:(id)sender {
if (appDelegate.session.isOpen) {

    BOOL displayedNativeDialog = [FBNativeDialogs presentShareDialogModallyFrom:self
                                                                initialText:textView.text
                                                                      image:img
                                                                        url:nil
                                                                    handler:nil];
    if (!displayedNativeDialog) {
        [self performPublishAction:^{

        [FBRequestConnection startForUploadPhoto:img
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                               }];
    }];}

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        appDelegate.session = [[FBSession alloc] init];
    }

    [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {
    }];}
}

- (void) performPublishAction:(void (^)(void)) action {
if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
    [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                               defaultAudience:FBSessionDefaultAudienceFriends
                                             completionHandler:^(FBSession *session, NSError *error) {
                                                 if (!error) {
                                                     action();
                                                 }
                                                 else{
                                                 }

                                             }];
} else {
    action();
}} 
```

有什么提示吗？

非常感谢，

埃里卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:06:25.220

> 我成功地在墙上分享了一张图片，但我无法设置“通过 [appname]”（默认情况下需要“通过 ios”）。我已经在我的 info.plist 文件中放入了 appid 值。

您很可能没有设置 Facebook 应用名称。我建议查看[https://developers.facebook.com/apps](https://developers.facebook.com/apps)管理面板

# mysql - 在线（My）SQL 工具来转义字符串以在查询中使用？

> ID：12897145
> 
> 赞同：2
> 
> 时间：2012-10-15T13:55:24.653
> 
> 标签：mysql, sql, escaping

我需要通过手动查询将一些文本放入我的 MySQL 数据库中。文本包含引号、换行符、注释短划线 ('--') 和可能的其他语法错误。是否有在线工具可以粘贴原始文本并将其转换为查询转义版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:04:36.103

[谷歌](http://www.google.de/search?q=sql+escape+string+online)给了我

[http://www.freeformatter.com/string-escaper.html](http://www.freeformatter.com/string-escaper.html) 和 [http://www.freeformatter.com/sql-escape.html](http://www.freeformatter.com/sql-escape.html)

这对你来说足够了吗？

# signalr - SignalR 组：不要将消息发送回发件人

> ID：12897146
> 
> 赞同：4
> 
> 时间：2012-10-15T13:55:26.900
> 
> 标签：signalr

当我向我订阅的 signalR 组发送消息时，我会收到消息！

我不想要这个，我希望它把消息发送给组中的其他人。

这可能吗？如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:10:02.890

您可以在这里做的是您可以将 ConnectionId 发送到客户端并进行检查。例如，以下是您的集线器：

```
[HubName("moveShape")]
public class MoveShapeHub : Hub
{
    public void MoveShape(double x, double y)
    {
        Clients.shapeMoved(Context.ConnectionId, x, y);
    }
} 
```

在客户端级别，您可以执行以下操作：

```
var hub = $.connection.moveShape,
    $shape = $("#shape"),
    $clientCount = $("#clientCount"),
    body = window.document.body;

$.extend(hub, {
    shapeMoved: function (cid, x, y) {
        if ($.connection.hub.id !== cid) {
            $shape.css({
                left: (body.clientWidth - $shape.width()) * x,
                top: (body.clientHeight - $shape.height()) * y
            });
        }
    }
}); 
```

**编辑**

从 SignalR 1.0.0-alpha 开始，如果您使用的是集线器，则有一个内置 API：

```
[HubName("moveShape")]
public class MoveShapeHub : Hub
{
    public void MoveShape(double x, double y)
    {
        Clients.Others.shapeMoved(x, y);
    }
} 
```

这将向所有人广播数据，但呼叫者除外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T12:28:03.853

现在有了 SignalR，您可以使用

```
Clients.OthersInGroup("foo").send(message); 
```

这正是你所追求的。它将向除呼叫者之外的组中的每个人发送 SignalR 客户端消息。

您可以在此处阅读更多信息：[SignalR wiki Hubs](https://github.com/SignalR/SignalR/wiki/Hubs)

# java - 记录一个类的所有属性变化

> ID：12897150
> 
> 赞同：0
> 
> 时间：2012-10-15T13:55:34.593
> 
> 标签：java

出于调试目的，我需要跟踪`Class`属性更改。

例如考虑以下类：

```
class Test {
    int myInt;
    String myString;
    ...

    public void setMyInt(int a) ...
    public void setMyString(String s) ...

    public printDebugLog();
}

void main() {
    Test t = new Test();
    t.setMyInt(5);
    t.setMyString("Hello");
    t.printDebugLog();
} 
```

我想输出如下：

```
myInt => 5
myString => Hello 
```

简单的解决方案是立即创建日志。即添加`Log`如下功能：

```
void Log(String s) {
    System.out.println(s);
} 
```

然后对*集合*函数进行编码，如下所示：

```
void setMyString(String s) {
    myString = s;
    Log("myString => " + s);
} 
```

这需要以各种方式编写所有*设置*的函数，我想知道是否有**更好**的解决方案。例如，创建一个`SetValue`接受两个变量并将第一个属性设置为第二个对象的值的函数可能更容易（如果可能）。或类似的东西。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:00:17.030

为此，您应该使用执行日志记录的正交代码来包装您的类。

由于您的类没有实现接口，因此您不能使用动态代理，因此您必须使用使用字节码工程的解决方案之一。

我知道的最强大的解决方案是 AspectJ。但可能你甚至不需要它。您可以使用 Javassist 或 CGLIb - 允许创建包装类的代理的字节码工程库，因此您可以添加执行日志记录的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:00:54.517

您可以使用 AOP 拦截 setter 方法并在调用它们时记录下来。一个快速的谷歌应该给你一些例子。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-15T14:00:35.747

如果您通过 JPDA 进行调试，您可以 在您喜欢观看的字段上
创建一个断点。

# asp.net - 从列表框中删除项目无法正常工作

> ID：12897166
> 
> 赞同：0
> 
> 时间：2012-10-15T13:56:16.843
> 
> 标签：asp.net, listbox

当我单击按钮（复选框）时，列表框中的所有项目都会消失。如何防止这种情况发生？我的删除功能无法正常工作。是因为我的 javascript 吗？我的代码如下：

.aspx 文件

```
 <tr>
                        <td width="150px">
                            <asp:TextBox ID="TextBox1" runat="server"  onkeypress="displayKeyCode_demo(event)"></asp:TextBox>         
                        </td>
                        <td width="200px">
<asp:ListBox ID="LstScan" runat="server" Height="200px" Width="150px"  >
                            </asp:ListBox>

                             <asp:HiddenField runat="server" ID="hdnScan"/>
                        </td>

                        <td width="100px">
                            <asp:Button ID="Button2" runat="server" Text="Remove" OnClientClick="removeItem()" />
                        </td></tr></table>

 javascript:

    <script type="text/javascript">
            function displayKeyCode_demo(e) {
                var code;
                if (!e) var e = window.event;
                if (e.keyCode) code = e.keyCode;
                else if (e.which) code = e.which;
                if (code == 13) {

                    var ListBox = document.getElementById("<%=LstScan.ClientID%>");
                    var TextBox = document.getElementById("<%=TextBox1.ClientID%>");
                    var hdnScan = document.getElementById("<%=hdnScan.ClientID%>");
                var myOption = new Option();
                myOption.text = document.getElementById("<%=TextBox1.ClientID%>").value.trim(); //Textbox's value
                myOption.value = document.getElementById("<%=TextBox1.ClientID%>").value.trim(); //Textbox's value
                hdnScan.value = hdnScan.value + "," + TextBox.value;
                ListBox.appendChild(myOption);
                document.getElementById("<%=TextBox1.ClientID%>").value = '';

//                e.preventDefault();
            }
      }
      function removeItem() {
//          var i;
//          var selectbox = document.getElementById("<%=LstScan.ClientID%>");
//          for (i = selectbox.options.length - 1; i >= 0; i--) {
//              if (selectbox.options[i].selected)
//                  selectbox.remove(i);
          //          }
          document.getElementById("<%=LstScan.ClientID%>").options[document.getElementById("<%=LstScan.ClientID%>").selectedIndex] = null;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:22:54.107

**使用 jQuery：**

**要删除所有选项：**

```
$('<%=LstScan.ClientID%>').empty(); 
```

参考 - [.empty()](http://api.jquery.com/remove/)

**要删除特定选项：**

```
$('OPTION[VALUE="valueofOption"]', $("<%=LstScan.ClientID%>")).remove(); 
```

参考 - [.remove()](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:03:46.917

您可以尝试使用此代码

```
function removeItem()
{
   document.getElementById('<% = LstScan.ClientID %>').options.length = 0;
} 
```

# javascript - 使用 Javascript 将电子邮件地址插入表单字段 - 出现乱码

> ID：12897169
> 
> 赞同：0
> 
> 时间：2012-10-15T13:56:24.950
> 
> 标签：javascript, email

我正在使用动态 Web，并制作了一个表单，我希望 javascript 提前填写一些字段。

它适用于常规文本。但是当我尝试使用这种方法输入一封电子邮件时，它会出现乱码/编码。

JS：

```
<script type="text/javascript"> 
  $j('#Forhandler_Forhandlernr').val("2001 - Fyns Antenne og Elektronikcenter A/S");
  $j('#Forhandler_Forhandler').val("Roersvej 33 A, 5000 Odense C");
  $j('#Forhandler_Forhandler_email').val("fae@fae.dk"); 
< /script> 
```

它是

```
$j('#Forhandler_Forhandler_email').val("fae@fae.dk"); 
```

它作为单个字母的代码出现：

```
&#102;&#97;&#101;&#64;&#102;&#97;&#101;&#46;&#100;&#107; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:59:29.223

您使用的库将电子邮件地址编码为等效的字符代码。如果您将该结果放入 HTML 文件并在浏览器中查看，它将显示为电子邮件地址。

它是一种防止垃圾邮件机器人在源代码中查找电子邮件地址的工具。

# java - 故障转移内存中的 Java 对象

> ID：12897172
> 
> 赞同：2
> 
> 时间：2012-10-15T13:56:33.660
> 
> 标签：java, error-handling, failover

我正在寻找一些关于如何解决我的 Java 服务中的故障转移问题的想法。

在高层次上，我的服务从另一个服务接收 3 个单独的对象数据流，执行一些合并逻辑，然后写入数据存储。

流中的每个对象都有一个唯一的键。来自 3 个流的数据可以同时到达，没有保证顺序。

数据到达后，会存储在一些 java.util.concurrent 集合中，比如一个 BlockingQueue 或者一个 ConcurrentHashMap。

问题是该服务必须支持故障转移，如果在数据存储在内存对象中时发生故障转移，我不确定如何解决这个问题。

我有一个简单的想法如下：

1.  接收对象时写入文件/其他地方，并在添加到队列之前
2.  当对象最终被处理并存储在数据存储中时
3.  发生故障转移时，确保复制相同的文件，并且我们知道我们需要接收哪些对象的数据

性能是我的服务中的一个重要因素，由于 IO 很昂贵，这似乎是一种粗略的方法，而且非常简单。

因此，我想知道是否有任何库等可以轻松解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:00:34.357

我会使用[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)部分是因为我编写了它，但主要是因为......

*   它可以每秒以文本或二进制格式向磁盘写入和读取数百万个条目。
*   可以在进程之间共享，例如具有亚微秒延迟的主动-主动集群。
*   不需要系统调用或刷新来推出数据。
*   消费者不会减慢生产者的速度，消费者可能会提前 GB（超过机器的总内存）
*   它可以以低堆 GC-less 和无锁的方式使用。

# r - 如何使用 R 在地图上显示经度和纬度线？

> ID：12897176
> 
> 赞同：1
> 
> 时间：2012-10-15T13:56:38.963
> 
> 标签：r, plot, ggplot2

我正在尝试将此二进制文件（无符号字符，像素 = 720 和行 = 360）作为地图查看，我尝试了下面给出的代码。首先，我下载并保存为`landcover.bin`.

```
conne <- file("C:\\landcover.bin", "rb")
sd<- readBin(conne, integer(), size=1,  n=360*720, signed=F)
y<-matrix((data=sd), ncol=360, nrow=720)
image(y) 
```

我得到了一张看起来很奇怪的地图，然后我将 ncol 和 nrow 交换为

```
y<-matrix((data=sd), ncol=720, nrow=360)
image(y) 
```

我有一张合理的地图，但颠倒了

我的问题谁能告诉我如何将我的文件显示为（不应该相同）以及如何显示此地图上显示的经度和纬度：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:34:39.520

您必须镜像矩阵上的列才能获得正确的结果。`abline`用来画出你的经纬度。

```
conne <- file("Landcover.bin", "rb")
sd<- readBin(conne, integer(), size=1,  n=360*720, signed=F)
y<-matrix(sd,ncol=360,nrow=720)
image(y[,360:1])

lats=seq(-90,90,by=30)
longs=seq(-180,180,by=30) 

trans.lats=(lats+90) / 180
trans.longs=(longs+180) / 360

abline(h=trans.lats,v=trans.longs) 
```

![在此处输入图像描述](../Images/34991e9f343556348ce8ad4bb0640b70.png)

但是，正如@January 提到的，有许多处理地图的包。您应该使用其中之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T16:39:53.563

将`raster`包用于基于地理的网格数据。

您可能可以使用一些 rgdal 技巧直接从二进制文件中读取它，但让我们通过矩阵来完成。

```
> require(raster)
> conne <- file("landcover.bin","rb")
> sd<- readBin(conne, integer(), size=1,  n=360*720, signed=F)
> y<-t(matrix((data=sd), ncol=360, nrow=720))
> r = raster(y) 
```

现在你有了一个光栅对象。但是如果你绘制它，你会注意到三件事——很多绿色，比例上升到 250，轴从 0 到 1。

该地图似乎使用 255 表示大海。如果我们将其重新编码为 NA，我们将获得更好的地图：

```
> r[r==255]=NA
> plot(r) 
```

看起来好多了。现在让我们修复范围：

```
> extent(r) = extent(c(xmn=-180,xmx=180,ymn=-90,ymx=90))
> plot(r) 
```

最后我们应该告诉 R，这是在经纬坐标系中 - 很可能是 epsg:4326：

```
> projection(r)=CRS("+init=epsg:4326")
> plot(r) 
```

![分类世界地图](../Images/b17a3e86ffbd8a4311c038404315a9dc.png)

请注意，即使您有离散数据（我猜这是分类方案），这仍然使用连续配色方案。您可以使用光栅将数字映射到颜色，但这是另一个问题......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T15:04:12.567

要获得`ggplot2`基于解决方案，您可以使用`geom_raster`. 例如，请参阅我[对您之前的这个问题的](https://stackoverflow.com/questions/12285120/how-to-visualize-a-map-from-a-netcdf-file)回答。`ggplot2`显示 lat lon 行，要对此进行调整，请参阅我[对您的另一个问题的](https://stackoverflow.com/questions/12439613/how-to-visualize-a-map-from-a-binary-file-in-the-best-way)回答，特别`breaks`是`scale_{x,y}_*`.

`ggplot2`需要一个 data.frame，而不是`matrix`or `array`，用于`melt`执行此转换（[此处](https://stackoverflow.com/questions/12285120/how-to-visualize-a-map-from-a-netcdf-file)为示例）。要获得正确的 lat lon 值，请注意`array`具有正确的`dimnames`，请参阅`?dimnames`以获取更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T14:32:09.353

也许 R 地图包中的地图更适合您？

```
library( maps )
map( "world" )
points(  -0.11832, 51.50939, pch= 19, col= "red" )
text(  -0.11832, 51.50939, "London", pos=3, col= "red" )
abline( h= 0 )
text( -150, 0, "Equator", pos= 3 )
abline( v= 0 ) 
```

结果：

![在此处输入图像描述](../Images/5e22c948ed27356035c195faafad0d98.png)

# cloud9-ide - 无法远程访问cloud9

> ID：12897181
> 
> 赞同：2
> 
> 时间：2012-10-15T13:56:57.373
> 
> 标签：cloud9-ide

我已经在我的服务器上安装了 Cloud 9 IDE，但我无法远程访问它。

```
info  - socket.io started
Project root is: .
Trying to start your browser in: http://127.0.0.1:3000 
```

Cloud 9 只能在本地运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T11:23:24.897

是的，默认情况下，Cloud9 网络服务器只监听 localhost 接口，要指定另一个地址，只需在命令行中添加以下参数：`-l 0.0.0.0`，例如

```
./cloud9.sh -l 0.0.0.0 -w ~/workspace 
```

# jquery - 获取父 div id 并应用于元素

> ID：12897182
> 
> 赞同：1
> 
> 时间：2012-10-15T13:57:02.100
> 
> 标签：jquery, parent, children, attr

我得到了这个 HTML 代码：

```
<div class="gallery" id="gallery_x"> 
    <p>
        <a href="http://a-dynamic-link.com">image1</a>
        <a href="http://another-dynamic-link-com">image2</a>
    </p>
</div> 
```

(x = 变量数)

我需要从 .gallery div 中获取 ID 并将其作为 rel 应用到“a”，就像这样：

```
<div class="gallery" id="gallery_x">
    <p>
        <a rel="gallery_x" href="http://a-dynamic-link.com">image1</a>
        <a rel="gallery_x" href="http://another-dynamic-link-com">image2</a>
    </p>
</div> 
```

到目前为止，我的（不工作的）解决方案是：

```
$(".gallery a").parents(".gallery").attr("rel", $(this).attr("id")); 
```

如果有人可以帮助我，我会很高兴。

谢谢你。

迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:59:48.447

```
$(".gallery").each(function(){
    $("a", this).attr("rel", $(this).attr("id"));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:59:12.793

试试这个：

```
$('.gallery a').attr('rel', function() {
    return $(this).closest('div').attr('id');
});​ 
```

# android - 执行后如何停止服务并启动新活动？

> ID：12897183
> 
> 赞同：0
> 
> 时间：2012-10-15T13:57:01.180
> 
> 标签：android, service, android-intent

> 我想停止我的服务去完成它的任务。但服务不会停止我覆盖 onDestroy() 但它不起作用。当服务停止时，它将开始一个新的活动。
> 下面是我的代码

**数据服务.java**

```
 package com.remote.synchronizer.haris;

import java.util.ArrayList;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

import org.apache.http.NameValuePair;

import android.app.Service;
import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class DataService extends Service {

    boolean wifi,edge;
    private Timer timer= new Timer();
    SQLiteDatabase db;
    String un,shop,city,date,order;
    private SQLiteAdapter mySQLiteAdapter;

    @Override
    public void onCreate(){

        super.onCreate();
        mySQLiteAdapter = new SQLiteAdapter(this);
    //  this.stopSelf();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        final Handler mHandler = new Handler();

        new Thread(new Runnable(){

            @Override
            public void run() {
                Log.e("Service Started", "Successful");
                while(true){
                    try{
                        Thread.sleep(10000);
                        mHandler.post(new Runnable() {

                            @Override
                            public void run() {
                                //Checking network connectivity
                                wifi=NetworkInfo.Wifi(DataService.this);
                                edge=NetworkInfo.EDGE(DataService.this);

                                if(wifi==true||edge==true)
                                {
                                    int count=mySQLiteAdapter.getCCount();
                                    int counter=0;

                                    if(mySQLiteAdapter.getCCount()>0){

                                        while(counter<count){
                                            Log.e("Service Network", "Network is online");

                                            int id=mySQLiteAdapter.getID();

                                            List<NameValuePair> contacts=new ArrayList<NameValuePair>();

                                            contacts=mySQLiteAdapter.getSingleRecord(id);

                                            String url="http://10.0.2.2:3325/Product/Create?"; 

                                            int response = 0;
                                            try 
                                            {   
                                                response = CustomHttpClient.executeHttpPost(url, contacts);

                                                if(response==200){
                                                    mySQLiteAdapter.delete_byID(id);
                                                    Log.e("Data Sent", "Response 200");
                                                    counter++;
                                                }

                                                else{

                                                    Log.e("Service Data", "Faield to upload data" );
                                                }

                                            }
                                            catch (Exception e)
                                            {
                                                Log.e("Data Sending Error", e.toString());
                                                e.printStackTrace();
                                            }
                                        }
                                    }
                                    //
                                    Thread.currentThread().interrupt(); 
                                }
                                else
                                {
                                    Log.e("Service Network", "Network is offline");
                                }
                            }
                        });
                    }
                    catch (InterruptedException e) {
                        Log.e("Data Sending Error", e.toString());
                        e.printStackTrace();
                    }
                }
            }
        }).start();
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onDestroy() {

        Log.v("SERVICE","Service killed");
        Toast.makeText(this, "Service Destroyed", Toast.LENGTH_SHORT).show();
        //timer.cancel();
        Intent callIntent = new Intent(Intent.ACTION_CALL); 
        callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
        callIntent.setClass(this, com.remote.synchronizer.haris.Login.class);
        startActivity(callIntent);
        super.onDestroy();
    }

} 
```

> 我读过的某处不停止服务Android会自行停止。如果是这样，请编辑我的代码并告诉我如何在我的工作完成后开始新的活动。我需要停止计时器吗？然后 onStartCommand 将停止，它会调用 onDestroy？如果是，那么我该如何停止计时器，因为我已经尝试过但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:55:18.410

*   如果您需要服务在完成后自行停止，您应该使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)
*   onDestory() 用于释放你的资源，当服务不再使用时会调用它。

*   像这样开始活动：

    ```
    final Handler mHandler = new Handler() {
        public void HandleMessage(Message msg) {
            if(msg.what == START_NEW_ACTIVITY) {
                Intent callIntent = new Intent(Intent.ACTION_CALL); 
                callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
                callIntent.setClass(this, com.remote.synchronizer.haris.Login.class);
                startActivity(callIntent);
            }
        }
    };
    public int onStartCommand(Intent intent, int flags, int startId) {
        new Thread() {
            @Override
            public void run() {
                // do your job here
                mHandler.sendEmptyMessage(START_NEW_ACTIVITY);
           }
        }.start();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T18:40:53.070

要在您的工作完成后停止服务，只需调用`stopSelf()`或`stopSelf(startId)`。

如果您想在服务完成后启动活动，在调用`stopSelf()`or之前`stopSelf(startId)`，您应该创建活动的意图并设置标志`mIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`。并通过调用开始您的活动`startActivity(intent)`

# regex - 使用 mod_rewrite 获取子域的一部分并将其附加到 url

> ID：12897185
> 
> 赞同：0
> 
> 时间：2012-10-15T13:57:08.393
> 
> 标签：regex, .htaccess, mod-rewrite

是否可以使用**mod_rewrite**从 url 获取子域的一部分并将其附加到 url？

这是当前的 url，我为每个客户设置了多个子域：

```
customername.subdomain.domain.co.uk 
```

我将指向一个新服务器和新站点。新的网址格式为：

```
http://domain/login/customername 
```

因为所有客户现在都在一个站点下。

所以我想做的是使用 mod_rewrite 把之前的东西`.subdomain`放在最后`https://domain/login/customername`

这是我到目前为止所得到的：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^([a-z0-9]+).subdomain.domain(.*)$ [NC] 
RewriteCond %{REQUEST_URI} $1/   
RewriteRule ^(.*)$ https://domain/login/$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:32:27.397

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^([a-z0-9-]+).subdomain.domain(.*)$ [NC] 
RewriteRule .* https://domain/login/%1 [L] 
```

***诀窍是：*** *与上一行*`%1` *匹配...* `$1`

# php - wordpress 随机标签问题

> ID：12897186
> 
> 赞同：0
> 
> 时间：2012-10-15T13:57:14.343
> 
> 标签：php, random, wordpress

我遇到了 wordpress Tag CLoud 插件的问题。

我想显示随机标签，但我很困惑如何做到这一点。

代码如下。

我想显示随机标签。就像如果我选择只显示 5 个标签，并且每次我刷新屏幕时标签应该随机出现。

```
function widget_tagcloud($args){
    $option_value = retrieve_options($opt_val);
    extract($args);
    echo $before_widget;
    echo $before_title;
    echo $option_value['title'];
    echo $after_title;
    global $wpdb;

    $tags_list = get_terms('post_tag', array(
            'orderby'       => 'count',
            'hide_empty'    => 0
             ));

    if(sizeof($tags_list)!=0){
        $max_count = 0;
                if(!empty($option_value['height'])) $canvas_height = $option_value['height'];
                else $canvas_height = "250";
                if(!empty($option_value['width'])) $canvas_width = $option_value['width'];
        else $canvas_width = "250";
        foreach($tags_list as $tag) if($tag->count > $max_count) $max_count = $tag->count;?>
        <div id="myCanvasContainer">
                  <canvas width="<?php echo $canvas_width;?>" height="<?php echo $canvas_height;?>" id="myCanvas">
                    <p>Tags</p>
                  </canvas>
                </div>
                <div id="tags">

        <ul style="
        font-family: <?php if(!empty($option_value['font_name'])) echo $option_value['font_name'];
            else echo "Calibri";?>;
        height:
        <?php 
            if(!empty($option_value['height'])) echo $option_value['height'];
            else echo "250";
        ?>px;
        width:
        <?php 
            if(!empty($option_value['width'])) echo $option_value['width'];
            else echo "250";
        ?>px;
        background-color: #<?php if(!empty($option_value['bg_color'])) echo $option_value['bg_color'];
            else echo "FFF";?>;
        ">
        <?php 
        if(empty($option_value['no_of_tags'])) $option_value['no_of_tags'] = 15;
        if(empty($option_value['txt_color'])) $option_value['txt_color'] = "000";
        if(empty($option_value['max_font_size'])) $option_value['max_font_size'] = 40;
        if(empty($option_value['min_font_size'])) $option_value['max_font_size'] = 3;
        $i=1;
        foreach($tags_list as $tag){
            if($i <= $option_value['no_of_tags']){
                $font_size = $option_value['max_font_size'] - (($max_count - $tag->count)*2);
                if($font_size < $option_value['min_font_size']) $font_size = $option_value['min_font_size'];
                    echo '<li><a href="'.$_SERVER['PHP_SELF'].'?tag='.$tag->slug.'" 
                                                    style="font-size:'.$font_size.'px;color: #'.$option_value['txt_color'].';">'
                                                    .$tag->name.'</a></li>';
                $i++;
                }
            }
            echo '</ul></div>';
        }
    else echo "No tags found";
    echo $after_widget;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:01:22.503

根据您的代码：（尤其是这部分）

```
$tags_list = get_terms('post_tag', array(
        'orderby'       => 'count',
        'hide_empty'    => 0
         )); 
```

`tags`你得到的是由 订购的，`count`因此 - 它们不是随机挑选的。

您可以尝试使用下一个代码：

```
$tags_list = get_terms('post_tag', array(
        'number'        => 5,
        'orderby'       => 'none',
        'hide_empty'    => 0
         )); 
```

如果这不起作用，请使用 的`RAND`功能构建自定义查询`mysql`。

**编辑：**根据您的代码，您可以使用`shuffle()`php 函数更轻松地进行操作。

只需更换：

```
$max_count = 0; 
```

和：

```
$max_count = 5;
shuffle($tags_list); 
```

# spotify - 将 spotify 播放列表呈现为 xml

> ID：12897187
> 
> 赞同：0
> 
> 时间：2012-10-15T13:57:16.303
> 
> 标签：spotify

我想知道是否可以在不使用 libspotify 之类的服务的情况下将 spotify 播放列表呈现为 xml。

他们必须为 Web 开发人员提供“查找”和“搜索”功能，但他们似乎没有将数据呈现为播放列表的 xml。

有没有可能以某种方式呈现这个？

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:40:35.530

简而言之：不，这是不可能的。

# jquery - 将“选定”类添加到列表项，然后使用 jquery 在该特定列表中的其余列表项上禁用“ahref”

> ID：12897188
> 
> 赞同：0
> 
> 时间：2012-10-15T13:57:18.153
> 
> 标签：jquery, list, select, button

我有一些包含无序列表的 div。在这些列表项中，我有可以单击的按钮。是否可以单击 1button，添加我的类“已选择”，然后终止该 ul 中所有列表项的 href？目标是能够为多个 div 使用全局函数，如下所示：

这是我的 HTML 的结构。

```
 <div id="dd" class="mywrap-dropdown-2" tabindex="2">Select
                 <ul class="dropdowner" id="coll-filter">
                      <li><a href="">All</a></li>
                      <li><a href="#">White</li>
                      <li><a href="#">Blue</li>
                 </ul>
        </div> 

     <div id="dd" class="mywrap-dropdown-2" tabindex="2">Select
                 <ul class="dropdowner" id="coll-filter">
                      <li><a href="">Metal</a></li>
                      <li><a href="#">Chrome</li>
                      <li><a href="#">Wood</li>
                 </ul>
        </div> 
```

不知道该怎么做。此功能应该用于多个 div "#dd" 而不仅仅是一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:11:14.467

此代码将添加`class="selected"`到第一个单击锚的父`<li>`级，然后禁用所有进一步的操作。演示：http: [//jsfiddle.net/9Y5x4/2/](http://jsfiddle.net/9Y5x4/2/)

```
$( '#dd' )
    .on( 'click', 'li', function( e )
        {
            e.preventDefault();             
        }
     )
     .on( 'click.runonce', 'li', function( e )
         {
              $( this ).addClass( 'selected' );

             $( '#dd' ).off( 'click.runonce' );
         }
     ); 
```

编辑：更新了示例。旧代码：http: [//jsfiddle.net/9Y5x4/1/](http://jsfiddle.net/9Y5x4/1/)

# visual-studio-2010 - 适用于 Windows Phone 扩展管理器的 Visual Studio 2010

> ID：12897195
> 
> 赞同：1
> 
> 时间：2012-10-15T13:57:45.620
> 
> 标签：visual-studio-2010, windows-phone-7, nuget

很简单的问题：

> 您在哪里可以找到 Visual Studio 2010 for Windows Phone 中的扩展管理器？

我正在尝试安装 NuGet 扩展，但是.. 似乎找不到扩展管理器，在我期望的工具菜单下查找，但是.. 什么也没有。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:12:31.140

Visual Studio 2010 for Windows Phone 不支持扩展管理器，因此您找不到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T05:10:19.453

NuGet 是内置于 Visual Studio 2012 中的扩展管理器，也可单独下载用于 Visual Studio 2010。它很容易安装，可以从[nuget.org](http://nuget.org)下载。安装后，添加 Windows Phone Toolkit 就像右键单击您的项目并选择“托管 NuGet 包...”一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:01:54.627

扩展管理器位于 Menubar->Tools

# c++ - 使用 Graphics.h 时输入

> ID：12897200
> 
> 赞同：1
> 
> 时间：2012-10-15T13:57:54.343
> 
> 标签：c++, graphics

我正在为游戏制作一个登录页面，它使用 outextxy() 进行输出；

所以我想在特定的期望位置（在特定坐标）输入[使用 cin 无助于它仍然从程序顶部输入]，

是否有任何内置功能？

我什至尝试过使用 gotoxy() ..但没有用，

```
gotoxy(320,15);
cin>>a; 
```

如果您可以解释或提供解释链接将非常有帮助（如果需要良好的知识，因为我仍然是初学者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:07:44.420

你正在阅读 cin 就像你习惯的那样。但是您应该注意显示所显示的内容。C++ 不会为您做到这一点。例如，如果您在输入字符后输入字符串，则必须将其显示在所需的位置。一旦您开始处理输入中的更正（即按退格键），事情就会变得更加混乱。我自己使用 graphics.h 实现了几个游戏，记得处理所有这些调整是地狱。

我的建议是你尝试使用更高级的图形库。我个人的选择通常是opengl。对于它，您可以找到很多帮助程序库，例如 wxWidgets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:07:10.300

graphics.h 是称为 BGI 的古老 DOS 库的一部分，仅与旧的 Borland 编译器一起提供。15 年前，Borland 停止支持这一点。事实上，Borland 甚至不再制造编译器。并且没有其他编译器曾经支持过它。此外，Windows 不再支持 16 位 DOS 程序，因此您甚至无法在现代计算机上运行 BGI 程序。

不要使用 graphics.h。

更好的选择依赖于操作系统。在 Windows 中，您应该使用[控制台函数 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)，而在 Linux 中，有一个名为[ncurses](http://en.wikipedia.org/wiki/Ncurses)的库。当然，这意味着您必须升级到 32 位计算机...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:09:49.550

哦，我想通了...这是我的愚蠢..参考了帮助文件并知道gotoxy有一些最大的论据（但我仍然不明白争论的价值）

Courtesy : Lundin

# jsf - 有条件地在复合组件中渲染元素的属性

> ID：12897202
> 
> 赞同：8
> 
> 时间：2012-10-15T13:57:58.180
> 
> 标签：jsf, composite-component

我有以下复合组件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:component xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:composite="http://java.sun.com/jsf/composite">

    <composite:interface>
        <composite:attribute required="true" name="field" />
        <composite:attribute required="true" name="value" />
        <composite:attribute required="false" name="size"/>
    </composite:interface>

    <composite:implementation>
    ...
            <div class="wrapper">
                <h:inputText value="#{cc.attrs.value}"
                    id="#{field.id}" 
                    rendered="#{field.rendered}" 
                    size="#{cc.attrs.size}">
                </h:inputText>
                <h:messages for="#{field.id}" styleClass="errorMessage"/>
            </div>
    ...
    </composite:implementation>
</ui:component> 
```

问题是，当我在不设置其`size`属性的情况下使用此组件时，它仍会像`size=0`在 html 输入元素中一样呈现。

我想要的是仅在嵌套`h:inputText`的属性具有有效值（例如，不为空）时才呈现它。或者，如果嵌套元素的所有属性没有被显式覆盖，我想公开它们。

怎么可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T14:17:10.487

您可以使用 JSTL`<c:if>`有条件地构建视图并`<f:attribute>`单独指定属性：

```
<h:inputText ...>
    <c:if test="#{not empty cc.attrs.size}">
        <f:attribute name="size" value="#{cc.attrs.size}" />
    </c:if>
</h:inputText> 
```

另一种方法是为复合组件属性指定默认值：

```
<cc:attribute name="size" required="false" default="10" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T15:25:52.390

BalusC 帖子的补充：

你必须使用

cc:attribute-tag 中的 type="int" ：

cc:属性名称=“最大长度”类型=“int”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T16:35:52.550

我相信有另一种访问属性的方法。在访问以 java 保留关键字命名的属性时，我已将其与 JSF 2 一起使用。

# {cc.attrs['size']}

# perl - 字符编码问题，无法使用 PERL API 解码 HTML 实体

> ID：12897203
> 
> 赞同：0
> 
> 时间：2012-10-15T13:58:03.093
> 
> 标签：perl, html-entities, decoding

我现在对编码方案很感兴趣。我将在下面说明我的问题，请提供您的意见。

问题：我有一些输入字符串，如下面的代码中所述。最终所需的输出是“Křižovnická 190”。[你可以[在这里](http://htmlentities.net/)解码]。我正在使用 perl 模块来解码这些字符串。以下是我的测试代码：

```
use HTML::Entities;
binmode STDOUT,":utf8";
$a = "K&#345;i&#158;ovnick&aacute; 190";
decode_entities($a);
print $a."\n"; 
```

然而，我得到的输出是“Křiovnická 19”，这意味着“ř”被正确解码，但“ž”不是。我的问题是为什么？然后我尝试了提供 entity2char 哈希的“_decode_entities”方法，但仍然没有成功。

PS：我这里一定要使用 Perl，因为有其他遗留的 API，请在这里帮助我

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:04:19.873

字符“ž”对应`&#382;`于 Unicode，而不是`&#158;`. 158是cp1252中“ž”的编码。

顺便说一句，克莱门汀很好。

为了清楚起见：

```
| Grapheme   |         ř         |         ž         |
|------------+-------------------+-------------------|
| Codepoint  | U+0159 (345)      | U+017E (382)      |
| Escape     | &#x0159; (&#345;) | &#x017E; (&#382;) |
|------------+-------------------+-------------------|
| UTF-8      | C5 99 (197 153)   | C5 BE (197 190)   | 
| cp1252     | -                 | 9E    (158)       |
| latin2     | F8    (248)       | BE    (190)       | 
```

## 更新：

有关详细信息，请参阅Wikipedia 上的[HTML 十进制字符渲染](http://en.wikipedia.org/wiki/HTML_decimal_character_rendering)。重要的部分是：

> (...) 对字符 128-159 的引用通常被宽松的 Web 浏览器解释为对 Windows-1252 字符编码中分配给字节 128-159（十进制）的字符的引用。这违反了 HTML 和 SGML 标准，并且字符已经分配给更高的代码点，因此 HTML 文档作者应该始终使用更高的代码点。例如，对于商标符号 (™)，使用`&#8482;`，而不是`&#153;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T17:08:26.227

`&#158;`不是指“ž”。它是[U+009E PRIVACY MESSAGE](http://www.fileformat.info/info/unicode/char/9e/index.htm)，一个控制字符。(158 [10] = 9E [16] )

"ž" 是[U+017E LATIN SMALL LETTER Z WITH CARON](http://www.fileformat.info/info/unicode/char/17e/index.htm)，所以转义是`&#x017E;`or `&#382;`。

一些 Web 浏览器错误地解释具有 80..9F [16] (128..159 [10] ) 中的 a 值的数字实体，将数字视为 Unicode 代码点的[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)编码。

```
| Grapheme           |         ř         |         ž         |
+--------------------+-------------------+-------------------+
| Unicode Code Point | U+0159 (345)      | U+017E (382)      |
| Escape             | &#x0159; (&#345;) | &#x017E; (&#382;) |
+--------------------+-------------------+-------------------+
| cp1252 encoding    | ---               | 9E (158)          |
| Alternate escape*  | ---               | &#x9E; (&#158;)   |

* — Non-standard and buggy behaviour. 
```

这种错误的行为是你想要的。我没有看到实现该行为的模块，因此我们必须编写自己的代码。

```
use strict;
use warnings;
use open ':std', ':encoding(UTF-8)';

use HTML::Entities qw( );
use Encode         qw( decode );

{
    my %fixes =
        map { chr($_) => decode('cp1252', chr($_)) }
          0x80..0x9F;

    sub decode_entities {
        my $s_ref = defined(wantarray())
            ? do { my ($s) = @_; \$s }
            : \$_[0];

        $$s_ref =~ s{(
            &\#
            (?: 0*([1-9][0-9]*);?
            |   x0*([1-9A-Fa-f][0-9A-Fa-f]*);?
            )
        )}{
            if (defined($2) && length($2) == 3 && exists($fixes{chr($2)})) {
               $fixes{chr($2)}
            } elsif (defined($3) && length($3) == 2 && exists($fixes{chr(hex($3))})) {
               $fixes{chr(hex($3))}
            } else {
               $1
            }
        }exg;

        HTML::Entities::decode_entities($$s_ref);
        return $$s_ref;        
    }
}

print(decode_entities("K&#345;i&#158;ovnick&aacute; 190"), "\n"); 
```

# tridion - SDL SmartTarget = SDL Fredhopper？

> ID：12897204
> 
> 赞同：3
> 
> 时间：2012-10-15T13:58:06.743
> 
> 标签：tridion, fredhopper

不是直接的实现问题，但希望有人可以提供一些指示。

我想问一下，通过将 SDL SmartTarget 集成到 Tridion 中，您是否也有效地获得了 SDL Fredhopper？

你还有 Fredhopper Business Manager 等吗？

您能否将更多传统产品数据直接输入到 Tridion 之外的 Fredhopper，然后通过 SmartTarget 与 Fredhopper 驱动的产品目录以及它可以做的所有交叉销售/追加销售/推荐混合构建一个具有个性化/定位的网站？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:02:24.233

是的，SDL SmartTarget 包括 SDL Fredhopper，您确实可以通过数据管理器向其中添加数据。

两种产品之间的主要区别显然是对 ST 查询的连接器和环境数据框架支持，一组 Java Taglibs/.NET 控件可用于与 Fredhopper 通信，以及其他一些东西，例如对 FH 查询的会话预览支持（能够即时更改变量以进行测试）。

ñ

# android - ProgressDialog 在执行任务时不显示

> ID：12897205
> 
> 赞同：11
> 
> 时间：2012-10-15T13:58:09.633
> 
> 标签：android, progressdialog

我有一个备份例程，可以将一个文件夹中的所有内容复制到完美运行的外部 SD 卡。我正在尝试获得一个漂亮的弹出对话框，显示它何时运行，但它只是没有显示。甚至不尝试运行（但备份确实完成）。

这是我目前的代码：

```
public void doBackup(View view) throws IOException{
    ProgressDialog pd = new ProgressDialog(this);
    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    pd.setMessage("Running backup. Do not unplug drive");
    pd.setIndeterminate(true);
    pd.setCancelable(false);
    pd.show();
    File source = new File("/mnt/extSdCard/DirectEnquiries"); 
    File dest = new File("/mnt/UsbDriveA/Backup");
    copyDirectory(source, dest);
    pd.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-15T14:14:36.103

`Thread`您在或中运行长时间运行的任务`AsyncTask`。然后你的`ProgressDialog`意志就会出现。

执行以下操作：

```
public void doBackup(View view) throws IOException{
    final ProgressDialog pd = new ProgressDialog(this);
    pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    pd.setMessage("Running backup. Do not unplug drive");
    pd.setIndeterminate(true);
    pd.setCancelable(false);
    pd.show();
    Thread mThread = new Thread() {
        @Override
        public void run() {
            File source = new File("/mnt/extSdCard/DirectEnquiries"); 
            File dest = new File("/mnt/UsbDriveA/Backup");
            copyDirectory(source, dest);
            pd.dismiss();
        }
    };
    mThread.start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:09:36.663

创建一个 asyntask 并将您的耗时任务

```
 public void doBackup(View view) throws IOException{
        ProgressDialog pd = new ProgressDialog(this);
       pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pd.setMessage("Running backup. Do not unplug drive");
       pd.setIndeterminate(true);
       pd.setCancelable(false);
        pd.show();
//create asyntask here
//Put below code in doInBackground mathod
        File source = new File("/mnt/extSdCard/DirectEnquiries"); 
        File dest = new File("/mnt/UsbDriveA/Backup");
        copyDirectory(source, dest);
//put this code in onPostExecute Method.
        pd.dismiss();
    } 
```

您将获得 Asyntask 的样本数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:13:10.830

而不是一次在一个函数中执行此操作。执行以下步骤，它肯定会为您工作。1\. 创建一个异步类。（它将为您的复制目录功能创建一个单独的线程，并且不会在主 UI 上运行。） 2\. 在执行异步类之前显示您的进度对话框。3\. 在执行后方法上，关闭您的对话框。

# javascript - 在 SoundManager2 中播放 AAC 无法启动

> ID：12897208
> 
> 赞同：0
> 
> 时间：2012-10-15T13:58:21.443
> 
> 标签：javascript, audio, ffmpeg, aac, soundmanager2

我将音频文件 MP4 转换为 AAC，然后想在 SoundManager2 中播放该文件。如果我使用一些适用于 Windows 的软件进行转换，一切都很好，音频播放良好。但是，在服务器端，当使用 ffmpeg 将 MP4 文件转换为 AAC 时，文件在 SM2 中加载，但没有开始播放。

我使用这个命令：

```
ffmpeg -i in.mp4 out.aac 
```

这是 SoundManager2 日志：

```
-- SoundManager 2: HTML5 support tests (/^(probably|maybe)$/i): mp3: true (preferring flash), mp4: true (preferring flash), ogg: true, wav: true -- soundmanager2.js:1156
-- SoundManager 2 V2.97a.20120916 (AS3/Flash 9) + HTML5 audio, high performance mode, custom (1ms) polling, wmode: transparent, flash debug mode, flashBlock mode -- soundmanager2.js:1156
soundManager::createMovie(): Trying to load /soundmanager/swf/soundmanager2_flash9_debug.swf soundmanager2.js:1156
soundManager::initMovie(): Waiting for ExternalInterface call from Flash... soundmanager2.js:1158
soundManager::externalInterfaceOK() (~0 ms) soundmanager2.js:1158
soundManager::init() soundmanager2.js:1158
soundManager: Attempting JS to Flash call... soundmanager2.js:1158
(Flash): SM2 SWF V2.97a.20120916 (AS3/Flash 9) soundmanager2.js:1158
Flash security sandbox type: remote soundmanager2.js:1158
(Flash): JS to/from Flash OK soundmanager2.js:1158
(Flash): Enabling polling, 1 ms interval soundmanager2.js:1158
-- SoundManager 2 loaded (OK) -- soundmanager2.js:1156
soundManager: Firing 1 onready() item soundmanager2.js:1158
threeSixtyPlayer.init() soundmanager2.js:1158
threeSixtyPlayer.init(): Found 1 relevant items. soundmanager2.js:1158
handleClick() soundmanager2.js:1158
soundManager.createSound(): ui360Sound0 (http://[private url]/out.aac?v=1350309261) soundmanager2.js:1156
soundManager.createSound(): Enabling usePolicyFile for data access soundmanager2.js:1158
SMSound() merged options: {
 id: ui360Sound0, 
 url: http://[private url]/out.aac?v=1350309261, 
 onplay: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onstop: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onpause: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onresume: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onfinish: { var nextLink; pl.removeClass(this._360data.oUIBox,this._360data... }, 
 onbufferchange: { if (this.isBuffering) { pl.addClass(this._360data.oUIBox,pl.css... }, 
 whileloading: { if (this.paused) { self.updatePlaying.apply(this); } }... }, 
 whileplaying: { self.updatePlaying.apply(this); this._360data.fps++; }... }, 
 useWaveformData: false, 
 useEQData: false, 
 usePeakData: true, 
 autoLoad: false, 
 autoPlay: false, 
 loops: 1, 
 multiShot: true, 
 multiShotEvents: false, 
 pan: 0, 
 stream: true, 
 usePolicyFile: true, 
 volume: 50, 
 useMovieStar: false, 
 isMovieStar: false, 
 bufferTime: 3
} soundmanager2.js:1158
(Flash): SoundManager2_SMSound_AS3: Got duration: 0, autoPlay: false soundmanager2.js:1158
SMSound.play(): Attempting to load "ui360Sound0" soundmanager2.js:1156
SMSound.load(): http://[private url]/out.aac?v=1350309261 soundmanager2.js:1156
SMSound.play(): "ui360Sound0" is starting to play soundmanager2.js:1158
fanOut: ui360Sound0: http://[private url]/out.aac?v=1350309261 soundmanager2.js:1158
(Flash): start (ui360Sound0): 0 soundmanager2.js:1158
SMSound._onbufferchange(): 1 soundmanager2.js:1158
SMSound._onbufferchange(): 0 soundmanager2.js:1158
SMSound._onload(): "ui360Sound0" loaded. 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T18:37:17.933

SoundManager 仅（完全）支持 MPEG-4 AAC 音频。您尝试播放的文件*可能是*[**MPEG-2**第 7 部分](http://www.iso.org/iso/iso_catalogue/catalogue_ics/catalogue_detail_ics.htm?csnumber=25040)中定义的 AAC 的“非向后兼容”版本：

> [MPEG-2 标准的第 7 部分 (ISO/IEC 13818-7)](http://webstore.iec.ch/preview/info_isoiec13818-7%7Bed4.0%7Den.pdf)指定了一种完全不同的、非向后兼容的音频格式（也称为 MPEG-2 NBC）。第 7 部分称为 MPEG-2 AAC。

据我所知，只有 Safari (QuickTime) 会播放这些文件。Chrome 或 Flash 都不会播放这些文件。但是，MPEG-2 AAC 文件的 MIME 类型与 MPEG-4 变体相同，因此在您尝试播放之前几乎不可能知道该文件无法播放。（当被问到时，MPEG-LA 回答“因为你他妈的，这就是原因。”）

# java - java - 如何使用java中的线程实例化多个带有动画的JFrame？

> ID：12897210
> 
> 赞同：2
> 
> 时间：2012-10-15T13:58:23.207
> 
> 标签：java, multithreading, netbeans

我在这里有这段代码，它实例化了一个带有简单动画的 JFrame，您可以在其中单击按钮并使用线程继续运行。我用一个实例化 JFrame 的按钮制作了一个 UI，问题是，当我再次单击该按钮并实例化另一个 JFrame 时，第二个 JFrame 的动画无法正常工作。即使我实例化了 5 个 JFrame，所有用于启动动画的按钮也仅适用于第一个 JFrame。我想做的就是尽可能多地实例化，并且它们都单独工作。这是带有动画的类的代码：

```
public class duduleo extends JFrame implements ActionListener, Runnable{
JButton imagens;
int x=1;
static ImageIcon icon[] = new ImageIcon[11];
static JLabel l;
boolean anima=false;

public static void main(String args[]){
    JFrame janela = new duduleo();
    janela.show();
}

duduleo(){
    icon[0]= new ImageIcon("duken1.jpg");
    icon[1]= new ImageIcon("duken2.jpg");
    icon[2]= new ImageIcon("duken3.jpg");
    icon[3]= new ImageIcon("duken4.jpg");
    icon[4]= new ImageIcon("duken5.jpg");
    icon[5]= new ImageIcon("duken6.jpg");
    icon[6]= new ImageIcon("duken7.jpg");
    icon[7]= new ImageIcon("duken8.jpg");
    icon[8]= new ImageIcon("duken9.jpg");
    icon[9]= new ImageIcon("duken10.jpg");
    icon[10]= new ImageIcon("duken11.jpg");
    setSize(100,200);
    setLocation(200,150);
    getContentPane().setLayout(new GridLayout(2,1));
    imagens =  new JButton(icon[0]);
    l= new JLabel(icon[0]); 
    imagens.addActionListener(this);
    getContentPane().add(l);
    getContentPane().add(imagens);

}

public void run(){

    while(anima){
        for(int i=0;i<icon.length;i++){
            l.setIcon(icon[i]);
            try{
                Thread.sleep(100);
            }catch(Exception e){}

        }}}

public void actionPerformed(ActionEvent e){
    anima=!anima;
    Thread t;
    t = new Thread(this);
    t.start();
}} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:20:53.263

我相信你应该使用 Swing 的 invokeLater()，否则它们会被放到事件调度线程上。

看看这里的例子来掌握成语：[http ://www.java2s.com/Code/Java/Swing-JFC/Swinginvokelater.htm](http://www.java2s.com/Code/Java/Swing-JFC/Swinginvokelater.htm)

另见：

[invokeLater 的使用](https://stackoverflow.com/questions/1610598/use-of-invokelater)

[我们应该使用 EventQueue.invokeLater 来更新 Java 桌面应用程序中的任何 GUI 吗？](https://stackoverflow.com/questions/3541373/should-we-use-eventqueue-invokelater-for-any-gui-update-in-java-desktop-applicat)

[何时使用 SwingUtilies.invokeAndWait/invokeLater](https://stackoverflow.com/questions/8687610/when-to-use-swingutilies-invokeandwait-invokelater)

[我应该在 SwingWorker.doInBackground() 中使用 SwingUtilities.invokeLater() 吗？](https://stackoverflow.com/questions/11897647/should-i-use-swingutilities-invokelater-inside-of-swingworker-doinbackground)

# spring - 使用自定义permissionEvaluator的spring security用于使用accesscontrollist授权标签

> ID：12897211
> 
> 赞同：0
> 
> 时间：2012-10-15T13:58:29.067
> 
> 标签：spring, spring-security

我在尝试在 Spring Security 中注入自定义权限评估器时遇到问题：

我的前端代码如下所示：

```
<sec:accesscontrollist hasPermission="VIEW_HEADER,VIEW_ANYTHING" domainObject="${userWebsiteLocationContext}" >
    <b>This is a TEST</b>
</sec:accesscontrollist> 
```

我正在我的春季安全配置中尝试以下内容：...

```
...
<security:global-method-security>
    <security:expression-handler ref="expressionHandler"/>
</security:global-method-security>

<bean id="permissionEvaluator" class="org.atd.storefront.security.impl.DefaultPermissionsEvaluator" >
</bean>

<bean id="defaultExpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler" >
    <property name="permissionEvaluator" ref="permissionEvaluator" ></property>
</bean> 
```

我的自定义权限评估器仅返回 false，但始终显示文本。我还尝试了[https://jira.springsource.org/browse/SEC-1749](https://jira.springsource.org/browse/SEC-1749)的解决方案，并尝试使用自定义定义的决策管理器 bean：access-decision-manager-ref="webAccessDecisionManager" 无济于事。

我没有得到任何例外，我的自定义权限评估器的 hasPermission 只是没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:20:07.990

`PermissionEvaluator`为标签注册一个实现就足够了，以获取`accesscontrollist`它并使用它。

我的建议是在`doStartTag()`方法的`org.springframework.security.taglibs.authz.AccessControlListTag`方法中设置一个断点并检查`PermissionEvaluator`它真正使用的是哪个。

# macos - 将 LSUIElement 转换为前台应用程序

> ID：12897214
> 
> 赞同：1
> 
> 时间：2012-10-15T13:58:33.827
> 
> 标签：macos, cocoa, lsuielement

我有一个必须一直运行的应用程序（如果用户同意这一点）。

当用户退出应用程序时，我将前台应用程序转换为 LSUIElement（应用程序只有一个菜单栏图标，停靠图标和菜单消失）。

我在菜单项中有一个选项可以正常工作并将 LSUIElement 转换为前台应用程序（我使用函数`[NSApp setActivationPolicy:NSApplicationActivationPolicyRegular]`和`[NSApp activateIgnoringOtherApps:YES]`）。

当用户双击应用程序时出现我的问题。我`[NSApp setActivationPolicy:NSApplicationActivationPolicyRegular]`在委托方法中再次使用了`applicationWillUnhide:(NSNotification *)notification`，除了没有出现的菜单之外，一切都很好。如果我去另一个应用程序，然后我回来菜单就会出现。我尝试了不同的方法，但我找不到一个好的方法。

我想知道当用户双击应用程序时调用的委托方法，或者`NSApplication`在那一刻调用的函数是什么，因为我认为在函数中使用`setActivationPolicy:`该`applicationWillUnhide`函数为时已晚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:50:44.420

要将普通应用程序转换为 LSUIElement 我使用

```
ProcessSerialNumber psn = { 0, kCurrentProcess };
TransformProcessType(&psn, kProcessTransformToUIElementApplication); 
```

并将其更改回前台：

```
ProcessSerialNumber psn = { 0, kCurrentProcess };
TransformProcessType(&psn, kProcessTransformToForegroundApplication); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-05T01:35:08.733

这是答案。在找到这个问题之前，我已经完成了隐藏/显示。这个问题启发了我最终的答案。

以下代码的作用如下：

1.  当应用程序启动时，应用程序显示在停靠栏中，并显示一个菜单栏项。
2.  当用户单击菜单栏项时，应用程序会隐藏并从停靠栏中删除。
3.  当用户再次单击时，应用程序会重新显示为停靠。
4.  如果应用程序被隐藏并且用户通过双击或启动板再次打开该应用程序，该应用程序将再次显示在 Dock 中。
5.  如果应用程序没有隐藏但被其他应用程序遮挡，则单击菜单栏项或重新启动它会将应用程序置于最前面。
6.  当用户单击窗口上的关闭按钮时，应用程序会从 Dock 中删除。
7.  当用户通过 cmd+q 或从文件菜单退出应用程序时，应用程序退出并且菜单栏项也退出。

我删除了其他不直接相关的代码。

您可能会注意到的其他事项：

1.  对于我的 Info.plist，LSUIElement 未设置或设置为 NO。如果你想设置为是。您需要在情节提要中设置不启动视图控制器并自己从窗口控制器构造。
2.  您还将通过鼠标左键单击菜单栏项来处理逻辑，因为您从一开始就没有窗口。

代码：

```
import Cocoa

@NSApplicationMain
class AppDelegate: NSObject, NSApplicationDelegate {
    private let statusItem = NSStatusBar.system.statusItem(withLength:NSStatusItem.squareLength)
    weak private var window:NSWindow? = nil

    func applicationDidFinishLaunching(_ aNotification: Notification) {        
        setupMenubarTray()

        self.window = NSApp.orderedWindows.first

        NotificationCenter.default.addObserver(self, selector: #selector(windowWillClose(_:)), name: NSWindow.willCloseNotification, object: self.window!)
    }

    func applicationShouldHandleReopen(_ sender: NSApplication, hasVisibleWindows flag: Bool) -> Bool {
        if !window!.isVisible {
            activeApp()
            return false
        }

        return true
    }
}

extension AppDelegate {
    @objc func windowWillClose(_ noti:Notification) {
        removeFromDock()
    }

    private func showInDock() {
        NSApp.setActivationPolicy(.regular)
    }

    private func removeFromDock() {
        NSApp.setActivationPolicy(.accessory)
    }
}

// MARK: - setup menubar button
extension AppDelegate {
    private func setupMenubarTray() {
        guard let button = statusItem.button else {
            fatalError()
        }

        setTrayIcon(for:button)
        button.action = #selector(mouseLeftButtonClicked)
    }

    private func setTrayIcon(for button:NSStatusBarButton) {
        let useMonochromeIcon = UserDefaults.standard.bool(forKey: DefaultsKey.useMonochromeIcon.key)
        button.image = NSImage(imageLiteralResourceName: useMonochromeIcon ? "MonochromeIcon" : "TrayIcon")
    }

    @objc private func mouseLeftButtonClicked() {
        if NSApp.isHidden || !window!.isKeyWindow {
            self.activeApp()
        } else {
            self.hide()
        }
    }

    private func activeApp() {
        showInDock()
        window?.makeKeyAndOrderFront(nil)
        NSApp.activate(ignoringOtherApps: true)

        checker.sendNotification()
    }

    private func hide() {
        removeFromDock()
        NSApp.hide(nil)
    }
} 
```

# r - 如何在 R 中合并表？

> ID：12897220
> 
> 赞同：11
> 
> 时间：2012-10-15T13:59:01.347
> 
> 标签：r, merge

我想这会有一个简单的答案，但我无法解决！这是使用`iris`数据集的示例：

```
a <- table(iris[,2])
b <- table(iris[,3]) 
```

如何将这两个表加在一起？例如，在新输出表中，变量 3 的值为 27 (26+1)，变量 3.3 的值为 8 (6+2)。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T14:06:52.947

如果您想使用同时存在于`a`和中的变量，这将起作用`b`：

```
n <- intersect(names(a), names(b))
a[n] + b[n]

#  3 3.3 3.5 3.6 3.7 3.8 3.9   4 4.1 4.2 4.4 
# 27   8   8   5   4   7   5   6   4   5   5 
```

* * *

如果要使用所有变量：

```
n <- intersect(names(a), names(b)) 

res <- c(a[!(names(a) %in% n)], b[!(names(b) %in% n)], a[n] + b[n])

res[order(names(res))] # sort the results 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:07:19.837

```
temp<-merge(a,b,by='Var1')
temp$sum<-temp$Freq.x + temp$Freq.y

   Var1 Freq.x Freq.y sum
1     3     26      1  27
2   3.3      6      2   8
3   3.5      6      2   8
4   3.6      4      1   5
5   3.7      3      1   4
6   3.8      6      1   7
7   3.9      2      3   5
8     4      1      5   6
9   4.1      1      3   4
10  4.2      1      4   5
11  4.4      1      4   5 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T14:09:15.947

这是另一个：

```
transform(merge(a,b, by="Var1"), sum=Freq.x + Freq.y)
   Var1 Freq.x Freq.y sum
1     3     26      1  27
2   3.3      6      2   8
3   3.5      6      2   8
4   3.6      4      1   5
5   3.7      3      1   4
6   3.8      6      1   7
7   3.9      2      3   5
8     4      1      5   6
9   4.1      1      3   4
10  4.2      1      4   5
11  4.4      1      4   5 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-19T00:20:38.090

这是解决方案的一个略微折磨的单行版本`merge()`：

```
do.call(function(Var1, Freq.x, Freq.y) data.frame(Var1=Var1, Freq=rowSums(cbind(Freq.x, Freq.y))), merge(a, b, by="Var1")) 
```

如果您想使用所有变量，这是一个：

```
do.call(function(Var1, Freq.x, Freq.y) data.frame(Var1=Var1, Freq=rowSums(cbind(Freq.x, Freq.y), na.rm=TRUE)), merge(a, b, by="Var1", all=TRUE)) 
```

与单线不同`transform()`，它不会累积 .x 和 .y，因此可以迭代使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-24T19:21:29.720

data.table 包的合并功能可能就是你想要的：[https ://rpubs.com/ronasta/join_data_tables](https://rpubs.com/ronasta/join_data_tables)

# javascript - 在变量中传递变量？

> ID：12897221
> 
> 赞同：1
> 
> 时间：2012-10-15T13:59:04.217
> 
> 标签：javascript, jquery, ajax

我有一个看起来像这样的 ajax 函数（基本上，它被简化了）：

```
function getPage(targetURL, targetID, dataMethod, dataStream) {
  $.ajax({
    type: dataMethod,
    data: { dataStream },
    url: '../' + targetURL,
    success:
        function(server_response)   { 
            $('#' + targetID).html(server_response).show();
        }
    });
  return false;
} 
```

然后我想像这样调用函数：

```
onclick="getPage('myPage.php', 'content', 'GET', 'someAction: add');" 
```

这很好......但是现在函数认为 add 是一个变量......但在某些情况下，我需要在 onClick 中声明一个带有值的 someAction，如下所示：

```
onclick="getPage('myPage.php', 'content', 'GET', 'someAction: "add"');" 
```

但是，这当然行不通……当然也行不通：

```
onclick="getPage('myPage.php', 'content', 'GET', 'someAction: \"add\"');" 
```

那么聪明人会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:03:25.817

这是因为您正在混合字符串和对象。为了做我认为你想做的事，你应该像这样调用函数：

```
onclick="getPage('myPage.php', 'content', 'GET', { someAction: 'add' });" 
```

即，您将对象作为第四个参数而不是字符串传递，那么，在您的函数中，您应该按原样对待该对象，即

```
$.ajax({
  type: dataMethod,
  data: dataStream,
  url: '../' + targetURL,
  // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:03:37.387

你`dataStream`作为一个字符串传递，你不应该 - 它应该是一个对象文字：

```
function getPage(targetURL, targetID, dataMethod, dataStream) {
  $.ajax({
    type: dataMethod,
    data:  dataStream ,
    url: '../' + targetURL,
    success:
        function(server_response)   { 
            $('#' + targetID).html(server_response).show();
        }
    });
  return false;
} 
```

接着：

```
onclick="getPage('myPage.php', 'content', 'GET', {someAction: add});" 
```

或者

```
onclick="getPage('myPage.php', 'content', 'GET', {someAction: \"add\"});" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:04:49.953

它期待一个对象，所以给它一个：

```
onclick="getPage('myPage.php', 'content', 'GET', {someAction: add});" 
```

然后在函数内部：

```
 data: dataStream, 
```

没有大括号

# c - sizeof 的字符串常量的存储位置

> ID：12897227
> 
> 赞同：0
> 
> 时间：2012-10-15T13:59:28.133
> 
> 标签：c, linux

我写了以下程序：

```
#include <stdio.h>
int main()
{
   char *a = "Abcdefg";
   printf("%d\n",sizeof("Z"));
} 
```

二进制文件的 objdump 具有以下结果：

```
    a.out：文件格式elf32-i386

    .interp 部分的内容：
     8048114 2f6c6962 2f6c642d 6c696e75 782e736f /lib/ld-linux.so
     8048124 2e3200 .2。             
    .note.ABI-tag 部分的内容：
     8048128 04000000 10000000 01000000 474e5500 ....GNU。
     8048138 00000000 02000000 06000000 09000000 ......
    .gnu.hash 部分的内容：
     8048148 02000000 04000000 01000000 05000000 ......
     8048158 00200020 00000000 04000000 ad4be3c0。. ..........K..
    .dynsym 部分的内容：
     8048168 00000000 00000000 00000000 00000000 ......
     8048178 01000000 00000000 00000000 20000000 ......
     8048188 30000000 00000000 9f010000 12000000 0......
     8048198 29000000 00000000 39000000 12000000 ).......9.......
     80481a8 1a000000 88840408 04000000 11000e00 ......
    .dynstr 部分的内容：
     80481b8 005f5f67 6d6f6e5f 73746172 745f5f00 .__gmon_start__。
     80481c8 6c696263 2e736f2e 360​​05f49 4f5f7374 libc.so.6._IO_st
     80481d8 64696e5f 75736564 00707269 6e746600 din_used.printf。
     80481e8 5f5f6c69 62635f73 74617274 5f6d6169 __libc_start_mai
     80481f8 6e00474c 4942435f 322e3000 n.GLIBC_2.0。    
    .gnu.version 部分的内容：
     8048204 00000000 02000200 0100 ......      
    .gnu.version_r 部分的内容：
     8048210 01000100 10000000 10000000 00000000 ......
     8048220 1069690d 00000200 42000000 00000000 .ii.....B.......
    .rel.dyn 部分的内容：
     8048230 7c950408 06010000 |.......        
    .rel.plt 部分的内容：
     8048238 8c950408 07010000 90950408 07020000 ......
     8048248 94950408 07030000 ....        
    .init 部分的内容：
     8048250 5589e583 ec08e879 000000e8 00010000 U......y.......
     8048260 e8db0100 00c9c3 .......         
    .plt 部分的内容：
     8048268 ff358495 0408ff25 88950408 00000000 .5......%......
     8048278 ff258c95 04086800 000000e9 e0ffffff .%....h.........
     8048288 ff259095 04086808 000000e9 d0ffffff .%....h..........
     8048298 ff259495 04086810 000000e9 c0ffffff .%....h.........
    .text 部分的内容：
     80482b0 31ed5e89 e183e4f0 50545268 c0830408 1.^.....PTRh....
     80482c0 68d08304 08515668 84830408 e8b7ffff h....QVh........
     80482d0 fff49090 5589e553 83ec04e8 00000000 ....美国........
     80482e0 5b81c3a0 1200008b 93fcffff ff85d274 [........吨
     80482f0 05e882ff ffff585b c9c39090 90909090 ......X[........
     8048300 5589e553 83ec0480 3da09504 0800753f 美国....=.....u?
     8048310 b8ac9404 082da894 0408c1f8 028d58ff .....-.......X.
     8048320 a19c9504 0839c376 1f8db426 00000000 .....9.v...&....
     8048330 83c001a3 9c950408 ff1485a8 940408a1 ......
     8048340 9c950408 39c377e8 c605a095 04080183 ....9.w ....
     8048350 c4045b5d c38d7426 008dbc27 00000000 ..[]..t&....'....
     8048360 5589e583 ec08a1b0 94040885 c07412b8 U............t..
     8048370 00000000 85c07409 c70424b0 940408ff ......t......$......
     8048380 d0c9c390 8d4c2404 83e4f0ff 71fc5589 .....L$.....qU
     8048390 e55183ec 24c745f8 90840408 c7442404 .Q..$.E....D$。
     80483a0 02000000 c7042498 840408e8 e8feffff ......$............
     80483b0 83c42459 5d8d61fc c3909090 90909090 ..$Y].a.......
     80483c0 5589e55d c38d7426 008dbc27 00000000 U..]..t&....'....
     80483d0 5589e557 5653e85e 00000081 c3a51100 U..WVS.^........
     80483e0 0083ec1c e867feff ff8d8320 ffffff89 .....g......
     80483f0 45f08d83 20ffffff 2945f0c1 7df0028b E... ...)E..}...
     8048400 55f085d2 742b31ff 89c68db6 00000000 U...t+1.........
     8048410 8b451083 c7018944 24088b45 0c894424 .E..D$..E..D$
     8048420 048b4508 890424ff 1683c604 397df075 ..E...$.....9}.u
     8048430 df83c41c 5b5e5f5d c38b1c24 c3909090 ....[^_]...$....
     8048440 5589e553 bba09404 0883ec04 a1a09404 美国............
     8048450 0883f8ff 740c83eb 04ffd08b 0383f8ff ..........
     8048460 75f483c4 045b5dc3 你....[]。        
    .fini 部分的内容：
     8048468 5589e553 83ec04e8 00000000 5b81c30c 美国........ [...
     8048478 110000e8 80feffff 595bc9c3 ........Y[..    
    .rodata 部分的内容：
     8048484 03000000 01000200 00000000 41626364 ....Abcd
     8048494 65666700 25640a00 efg.%d..        
    .eh_frame 部分的内容：
     804849c 00000000 ....            
    .ctors 部分的内容：
     80494a0 ffffffff 00000000 ........        
    .dtors 部分的内容：
     80494a8 ffffffff 00000000 ........        
    .jcr 部分的内容：
     80494b0 00000000 ....            
    .dynamic 部分的内容：
     80494b4 01000000 10000000 0c000000 50820408 ....P...
     80494c4 0d000000 68840408 f5feff6f 48810408 ....h......oH...
     80494d4 05000000 b8810408 06000000 68810408 ......
     80494e4 0a000000 4c000000 0b000000 10000000 ....L.......
     80494f4 15000000 00000000 03000000 80950408 ......
     8049504 02000000 18000000 14000000 11000000 ......
     8049514 17000000 38820408 11000000 30820408 ....8........0...
     8049524 12000000 08000000 13000000 08000000 ......
     8049534 feffff6f 10820408 ffffff6f 01000000 ...o.......o....
     8049544 f0ffff6f 04820408 00000000 00000000 ...o............
     8049554 00000000 00000000 00000000 00000000 ......
     8049564 00000000 00000000 00000000 00000000 ......
     8049574 00000000 00000000 ........        
    .got 部分的内容：
     804957c 00000000 ....            
    .got.plt 部分的内容：
     8049580 b4940408 00000000 00000000 7e820408 ..........
     8049590 8e820408 9e820408 ......        
    .data 部分的内容：
     8049598 00000000 ....            
    .comment 部分的内容：
     0000 00474343 3a202847 4e552920 342e312e .GCC：（GNU）4.1。
     0010 32203230 30383037 30342028 52656420 2 20080704（红
     0020 48617420 342e312e 322d3436 29000047 帽子 4.1.2-46)..G
     0030 43433a20 28474e55 2920342e 312e3220 CC：（GNU）4.1.2
     0040 32303038 30373034 20285265 64204861 20080704（红哈
     0050 7420342e 312e322d 34362900 00474343 t 4.1.2-46)..GCC
     0060 3a202847 4e552920 342e312e 32203230：（GNU）4.1.2 20
     0070 30383037 30342028 52656420 48617420 080704（红帽
     0080 342e312e 322d3438 29000047 43433a20 4.1.2-48)..GCC：
     0090 28474e55 2920342e 312e3220 32303038 (GNU) 4.1.2 2008
     00a0 30373034 20285265 64204861 7420342e 0704（红帽 4.
     00b0 312e322d 34382900 00474343 3a202847 1.2-48)..GCC:(G
     00c0 4e552920 342e312e 32203230 30383037 NU) 4.1.2 200807
     00d0 30342028 52656420 48617420 342e312e 04（红帽 4.1.
     00e0 322d3438 29000047 43433a20 28474e55 2-48)..GCC: (GNU
     00f0 2920342e 312e3220 32303038 30373034 ) 4.1.2 20080704
     0100 20285265 64204861 7420342e 312e322d（红帽 4.1.2-
     0110 34362900 46）。

```

“Abcdefg”和“%d”作为字符串常量存储在程序的只读部分中。

我的问题是“Z”存储在哪里？那不应该也出现在只读部分吗？我在某处读到，在运行时内存被分配给“Z”并且 sizeof() 被应用在上面。

我对这种解释持怀疑态度。即使它是真的，对可执行文件的指示是什么，即只分配 2 个字节并且应该将“Z”存储在其中？

干杯，VSN

PS GCC 版本：4.1.2 20080704

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:02:58.253

编译器很容易计算 sizeof("Z") 的结果，因此它将计算的值放在编译时，而不是将 "Z" 保留在某处然后执行。希望它能解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T14:03:05.027

考虑到 sizeof("Z") 是一个常量表达式，我可以想象编译器用结果整数值替换它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T15:19:03.710

直接在汇编程序而不是 objdump 中查看内容更容易：

```
 .LC0:
    .string "%zu\n"
    .section    .text.startup,"ax",@progbits
    .p2align 4,,15
    .globl  main
    .type   main, @function
main:
.LFB22:
    .cfi_startproc
    movl    $2, %edx
    movl    $.LC0, %esi
    movl    $1, %edi
    xorl    %eax, %eax
    jmp __printf_chk
    .cfi_endproc 
```

这是由 gcc 和`-O3 -S`. 正如您可以清楚地看到的那样，`2`它被直接移动到寄存器中，然后实现了打印功能。

顺便说一句，您的打印格式错误，gcc 应该警告您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T14:34:49.630

`sizeof("Z")`在编译时优化为 2。这可能存储在可执行文件的 .text 部分中用偏移量 80483a0 标记的位置，该位置显示为（错误的字节顺序）为 02000000。这前面是 c7442404。字节 c7 44 24 04 02 00 00 00 构成指令`movl 0x4(%esp), $0x00000002`。这会将 2 移到堆栈上，这可能正在准备将其作为参数传递给`printf`.

# video - J2ME RTSP 视频流但没有音频

> ID：12897229
> 
> 赞同：0
> 
> 时间：2012-10-15T13:59:37.803
> 
> 标签：video, java-me, streaming, nokia, rtsp

我关注了诺基亚关于使用 J2Me 创建视频播放器的 wiki。通常代码是这样的

```
player = Manager.createPlayer("rtsp://v1.cache5.c.youtube.com/CjYLENy73wIaLQm8E_KpEOI9cxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYLm0hv_ig5HRTww=/0/0/0/video.3gp");               

                  //A player listener is needed so that we know, when the video has reached the END_OF_MEDIA position
            player.addPlayerListener(this);
            player.realize();
            player.prefetch();

          //The duration of the video
            duration = player.getDuration();

            //The video control instance is created and attached to this Canvas in Full SCreen mode
            vc = (VideoControl)player.getControl("VideoControl");

            voc = (VolumeControl)player.getControl("VolumeControl");
            voc.setLevel(100);
            voc.setMute(false);

            vc.initDisplayMode(VideoControl.USE_DIRECT_VIDEO, this);
            vc.setDisplaySize(240, 196);
            //vc.setDisplayFullScreen(true);

            vc.setVisible(true);

           // vc.setDisplayFullScreen(true);
            //next time the above operations will be skipped
            firstPlay = false;

          //A new thread handles the move of the cursor while the video progresses. 
            //The thread is distroyed when the video is stopped.
            thread = new Thread(this);
            thread.start(); 
```

目前我为诺基亚 Asha 311 开发。如果我​​只是通过浏览器打开 rtsp 地址，则会弹出原生视频播放器并将视频与音频一起流式传输，并且使用此代码，视频流流畅，但根本没有声音。

我做错什么了吗？谢谢你的帮助

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:36:20.523

要流式播放 youtube 视频，您可以使用以下代码：

```
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;
import javax.microedition.media.*;
import javax.microedition.media.control.VideoControl;

public class RTSPFullScreen extends MIDlet implements CommandListener, PlayerListener {

    private Display d;
    private Player p;
    private Canvas c;
    private Command exitCommand = new Command("Exit", Command.EXIT, 1);
    VideoControl vc;

    public RTSPFullScreen() {

        d = Display.getDisplay(this);

    }

    public void startApp() {
        c = new Canvas() {

            protected void paint(Graphics g) {

                g.setColor(0, 0, 0);
                g.fillRect(0, 0, getWidth(), getHeight());

            }
        };

        c.setFullScreenMode(true);
        c.addCommand(exitCommand);
        c.setCommandListener(this);
        d.setCurrent(c);

        try {
           p = Manager.createPlayer("rtsp://v1.cache5.c.youtube.com/CjYLENy73wIaLQm8E_KpEOI9cxMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYLm0hv_ig5HRTww=/0/0/0/video.3gp");

            p.addPlayerListener(this);
            p.start();

            vc = (VideoControl) p.getControl("javax.microedition.media.control.VideoControl");
            vc.initDisplayMode(VideoControl.USE_DIRECT_VIDEO, c);

        } catch (Exception e) {
            showAlert("startApp: " + e.toString());
        }
    }

    public void commandAction(Command c, Displayable s) {
        if (c == exitCommand) {
            destroyApp(false);
            notifyDestroyed();
        }
    }

    public void pauseApp() {
    }

    public void destroyApp(boolean uc) {
        if (p != null) {
            p.close();
        }
    }

    public void playerUpdate(Player player, java.lang.String event, java.lang.Object eventData) {
        if (player.getState() == Player.STARTED) {

            try {

                vc.setDisplayFullScreen(true);
                vc.setVisible(true);
            } catch (Exception e) {
                showAlert("playerUpdate: " + e.toString());
            }
        }

    }

    public void showAlert(String aAlertText) {
        Alert alert = new Alert("Alert", aAlertText, null, AlertType.ERROR);
        alert.setTimeout(10000);
        d.setCurrent(alert);
    }
} 
```

# java - 将自定义 ViewGroup 添加到 RelativeView

> ID：12897230
> 
> 赞同：0
> 
> 时间：2012-10-15T13:59:37.897
> 
> 标签：java, android, oop

我正在尝试通过 ForLoop 将几个自定义 ViewGroup 动态添加到现有的 RelativeLayout。

当我添加它们时，什么都没有显示。也许是因为 ViewGroup 在添加之前没有完成加载？

有任何解决这个问题的方法吗？

谢谢，

**游戏活动.java：**

```
hScrollItems = (RelativeLayout) findViewById(R.id.hScrollItems);

    for (int i = 0; i < 5; i++){
        int w = getResources().getInteger(R.integer.GridItemWidth);
        int h = getResources().getInteger(R.integer.GridItemWidth);
        GridItem gi = new GridItem(getBaseContext(), w, h, GridType.EMPTY);

        LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
        params.setMargins(w * i, 0, 0, 0);

        hScrollItems.addView(gi, params);
    } 
```

**GridItem.java**

```
public GridItem(Context context, int Width, int Height, GridType Type) {
    super(context);

    /*LayoutParams params = new LayoutParams(Width, Height);
    this.setLayoutParams(params);*/

    this.setBackgroundColor(0xFFFFFF33);

    ImageView img = new ImageView(context);
    img.setBackgroundResource(R.drawable.ic_launcher);
    this.addView(img);
}
public enum GridType {
    EMPTY("EMPTY"),
    HOUSE("HOUSE");
    private String value;
    private GridType(String value) {
       this.value = value;
    }
    public String getValue() {
       return value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:07:27.480

[不建议使用 getBaseContext() 。](https://stackoverflow.com/questions/6854265/getapplicationcontext-getbasecontext-getapplication-getparent)由于它是从`Activity`类中调用的，因此您应该只使用`this`, 因为`Activity`extends `Context`。

```
GridItem gi = new GridItem(this, w, h, GridType.EMPTY); 
```

另外，我看不到您在哪里为孩子设置任何 ID 或对齐信息。需要设置 id的视图`RelativeLayout`，并引用某些内容，以便知道将它们放在哪里。

之后，尝试调用`requestLayout()`父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:49:33.227

好的，我修好了！

首先，我必须更改`GridItem`为 a`RelativeLayout`而不是 a `ViewGroup`。

其次，我`ImageView`必须`GridItem`通过`img.bringToFront()`.

# javascript - 从内容可编辑的 div 中获取字符串的范围

> ID：12897232
> 
> 赞同：0
> 
> 时间：2012-10-15T13:59:42.283
> 
> 标签：javascript, html, contenteditable

我有一个将 contenteditable 属性设置为 true 的 div。我希望能够在 div 中获取字符串的范围。该范围应包含该特定单词的起始偏移量（相对于 div 的文本内容），如果可能，还应包含该单词的长度。

例如，如果 div 中的字符串包含 "This is a test" ，我希望能够动态获取字符串 "test" 的范围（我不知道那里有多少个字符）。目前，该 div 将只包含文本。

如果有人可以帮助我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:43:16.337

```
"This is a test".indexOf("test") 
```

或更通用的

```
String.indexOf(testString) 
```

将为您提供`testString`in`String`从 index 开始的偏移量`0`，`-1`如果`testString`不包含在则返回`String`。您的示例将返回`10`。

# php - 从 PDO 准备语句中获取 SQL 查询和参数

> ID：12897240
> 
> 赞同：0
> 
> 时间：2012-10-15T13:59:58.350
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [从 PDO 准备语句中检索（或模拟）完整查询](https://stackoverflow.com/questions/3754530/retrieve-or-simulate-full-query-from-pdo-prepared-statement)
> [在 PHP PDO PDO 调试中获取上次执行的查询](https://stackoverflow.com/questions/7716785/get-last-executed-query-in-php-pdo)
> [- 绑定后查看查询？](https://stackoverflow.com/questions/11122573/pdo-debugging-view-query-after-bind)

使用`PDOException`该类，我可以获得与 SQL 错误相关的各种信息。缺少的一部分是导致错误的实际 SQL 查询。这有助于解决完整性约束违规错误。即使带有插入参数的完整查询不可用，准备好的查询以及传递的数组`execute()`就足够了，因为我可以重新创建完整的查询。请注意，我目前不使用 bindParam()，而是使用`execute()`.

如何查看导致错误的实际查询？谢谢

错误：

> SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`website/accounts`，CONSTRAINT `fk_accounts_zipcodes1`FOREIGN KEY（`zipcodes_id`）REFERENCES `zipcodes`（`id`）ON DELETE NO ACTION ON UPDATE NO ACTION）
> 文件名：/var/www/ main/components/com_upload/models/contacts.phpLine：520
> 错误时间：2012 年 10 月 15 日星期一，太平洋夏令时间 7:11:49

导致错误的SQL：

> 插入帐户（id、sites_id、姓名、地址、city_id、zipcodes_id、电话、传真、date_created、date_modified、record_status、vertical_markets_id、priority_id、roles_id）值（：id、123、：name、：address、：cities_id、：zipcodes_id ,:电话,:传真,NOW(),NOW(), "活动",:vertical_markets_id,:priority_id,:roles_id)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:04:00.363

确保您获得实际查询的最简单方法是激活`mysql`日志并查看您获得的输出。

在**Windows**上，这可以通过在`my.ini`文件中添加两行来完成：

```
general_log = 1
general_log_file = "C:\path\to\log\mysql.log" 
```

在**Linux 上**，您需要修改`my.cnf`文件：

```
general_log = 1
general_log_file = /path/to/log/mysql.log 
```

# java - Android：Java 对许多类的效率较低

> ID：12897241
> 
> 赞同：3
> 
> 时间：2012-10-15T13:59:59.193
> 
> 标签：java, android, performance, class

我正在为 android 编写游戏，我担心性能和内存。Java 对许多类的效率会降低吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:02:14.020

> 许多类影响性能？

我不这么认为。只有一件事是在启动时将所有类加载到内存中会有点慢（可以忽略不计）（已针对较新版本进行了优化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:18:08.710

它不是你必须担心的课程。更确切地说，它取决于您实例化的对象的数量以及它们被取消引用的频率，因此必须由 GC 清理。

因此，如果有任何事情，请密切关注创建和取消引用的对象数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:33:01.520

回到 J2ME 时代，一些设备的 jar 限制为 64k（例如）——
大量类的使用会影响 jar 的大小，其中一个技巧是减少类的数量。
您将拥有的唯一开销是这些类中的每一个的类加载。
不确定这是否发生在启动或首次访问/分配给定类的对象期间（或以某种方式结合两者），
但这确实不是问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T15:17:03.727

在性能方面，类的数量实际上是无关紧要的。通常，还有许多其他领域通常会对感知性能产生更大的影响（我们在这里谈论的是幅度，而不是百分之几）。

这也取决于您认为*许多*课程。我会考虑 > 30K 类很多（我曾在一个有这么多类的项目中工作），但您可能已经认为 1K 类很多（而 1K 真的没什么）。通常，添加另外 10K 类（也被*使用*，注意未加载的类不会显着影响性能）的唯一显着效果是增加了几秒钟的启动时间。

首先关注正确的功能，当你实现它时担心性能。*在处理函数时，您应该*考虑的唯一性能是选择合适的数据结构和算法。选择适当的数据结构和有效的算法比在类加载方面减少百分之几的影响要大得多。

# entity-framework-4 - 一个数据库表应该存在于多个 edmx 文件中吗？

> ID：12897243
> 
> 赞同：0
> 
> 时间：2012-10-15T14:00:02.920
> 
> 标签：entity-framework-4, edmx

假设我有一个包含大约 90 个表的现有数据库。我看到评论指出将它们全部包含在一个大的 edmx 文件中并不被认为是好的做法。假设我有诸如 HR、Legal 和 Accounting 之类的逻辑分组，我可以使用它们来创建多个 edmx 文件。这就说得通了。但是，我不知道如果这些逻辑分组中的每一个都包含常用表（如员工、地址等）的外键，该怎么办。每个 edmx 文件是否也应该包含这些表，还是有更好的方法来处理这个问题？

附带说明一下，在创建 edmx 文件时，有多小才算太小？包含 5 个实体的上下文是否太小？2？有一般的经验法则吗？

任何指导表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:07:27.587

从运行时的角度来看，是否将模型拆分为多个 edmx 文件并不重要。90 个实体应该没问题，但是当您的应用启动时，您可能会开始看到一些延迟。如果您遇到这种情况，您可能需要预先生成的视图来解决该问题。如果您有许多实体，则 EF 设计器会很慢。然而，VS 2012 中的 EF 设计器允许每个模型有多个图表以可视化整个模型的子部分。如果您认为您可以轻松管理模型而无需拆分它，那么您可以尝试只使用一个模型。如果它变得无法管理，那么您可以考虑拆分。

# objective-c - double 到 int（或 long、long long）的转换有时并不好

> ID：12897250
> 
> 赞同：0
> 
> 时间：2012-10-15T14:00:38.167
> 
> 标签：objective-c, ios, int, double

我正在尝试将相当大的双数转换为 int（或 long 或 long long），但有一些困难。几乎总是它转换得很好，但有时不是：

我的代码：

```
double price = 12345678.900000;
double hundredNumber = price * 100;
NSNumber *number = [NSNumber numberWithDouble:hundredNumber];
int tempNumber = [number intValue]; 
```

一切顺利，直到 tempNumber。它注销 1234567889，但它应该是 1234567890 (... **89** - ... **90** ) 有谁知道它为什么会发生以及如何正确转换？

PS我正在尝试实现退格键值（例如123.45，之后应该是12.34）。也许有人实施过这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:06:07.230

如果您使用浮点数，您总是会面临舍入错误的风险。

为什么不总是将价格存储为`long long`?

即，而不是 5.50 英镑，存储 550 便士。这样你就永远不会有任何舍入问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:12:15.203

正如评论的那样，由于可能存在错误，我会小心舍入。

一种可能的解决方案是像 Google 在 Android 中使用坐标那样使用双精度数：将它们乘以 1E6。如果您使用整数操作，那么您将比使用双精度操作更安全。试试这个：

```
double priceDouble = 33.f / 34.f;
NSLog(@"double: %f", priceDouble);

NSInteger priceInteger = (NSInteger)(priceDouble * 1E6);
NSLog(@"int: %d", priceInteger);

NSNumber * priceNumberWithDouble = [NSNumber numberWithDouble:priceInteger];
priceDouble = [priceNumberWithDouble doubleValue];
NSLog(@"double: %f", priceDouble);

NSNumber * priceNumberWithInteger = [NSNumber numberWithInteger:priceInteger];
priceInteger = [priceNumberWithInteger integerValue];
NSLog(@"int: %d", priceInteger);

double test = ((double)priceInteger)/1E6;
NSLog(@"Test: %f",test); 
```

我的输出如下：

```
double: 0.970588
int: 970588
double: 970588.000000
int: 970588
Test: 0.970588 
```

# c# - 读取 RSS 时出错

> ID：12897253
> 
> 赞同：1
> 
> 时间：2012-10-15T14:00:50.453
> 
> 标签：c#, .net-3.5, rss

尝试阅读 ARSTECHNICA [RSS](http://feeds.arstechnica.com/arstechnica/index) 提要时，我不断随机收到此错误。我收到以下错误：

> System.Xml.XmlException：''，十六进制值 0x10，是无效字符。第 96 行，位置 1129。

我知道这是因为 XML 中的字符无效，需要将其删除。我确实看过[这个](http://seattlesoftware.wordpress.com/2008/09/11/hexadecimal-value-0-is-an-invalid-character/)来删除无效字符。

```
 XmlReader readXML;
    readXML = XmlReader.Create(URL);
    SyndicationFeed News= SyndicationFeed.Load(readXML);
    readXML.Close();
    return News; 
```

我不确定如何从 RSS 提要中删除无效字符。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:07:36.907

您可以尝试将 rss 提要加载为字符串，删除无效字符并作为新闻提要加载。希望有帮助：

```
HttpWebRequest httpWebRequest =  
(HttpWebRequest)WebRequest.Create("http://feeds.arstechnica.com/arstechnica/index");
HttpWebResponse httpWebesponse = (HttpWebResponse)httpWebRequest.GetResponse();

Stream dataStream = httpWebesponse.GetResponseStream();
StreamReader streamreader = new StreamReader(dataStream, Encoding.UTF8);
 string response = streamreader.ReadToEnd();
streamreader.Close();

response = response.Replace((char)0x10, ' ');

XmlTextReader reader = new XmlTextReader(new System.IO.StringReader(response));
reader.Read();

SyndicationFeed News = SyndicationFeed.Load(reader); 
```

# c++ - 如何以相反的方向进行写入输出（C++）？

> ID：12897259
> 
> 赞同：0
> 
> 时间：2012-10-15T14:01:02.067
> 
> 标签：c++

我创建了一个简单的十进制到二进制程序。假设我输入数字 8。它写回 0001，我希望它是 1000

我怎样才能做到这一点？

代码在这里：

```
using namespace std;

int translating(int x);

int main()
{
    int x;
    int translate;
    cout << "Write a number: ";
    cin >> x;
    cout << endl;
    translate = translating(x);
    cout << endl;
    cout << endl;

    return 0;
}

int translating(int x)
{
    if (x == 1)
    {
        cout << "1";
        return 0;
    }
    if ((x % 2)==1)
    {
        cout << "1";
        return (translating((x-1)/2));
    }
    else
    {
        cout << "0";
        return (translating(x/2));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:04:45.747

与其直接写入输出，不如先将其写入临时字符串，然后从最后一个字符遍历该字符串到第一个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:07:07.883

很简单，很简单，你会踢自己。只需颠倒输出语句和递归函数调用的顺序即可。还修复了一个错误。

```
void translating(int x)
{
    if (x < 2)
    {
        cout << x;
        return;
    }
    if ((x % 2)==1)
    {
        translating((x-1)/2);
        cout << "1";
    }
    else
    {
        translating(x/2);
        cout << "0";
    }
} 
```

# java - Java AES-256 解密 - 从 ActionScript 3 转换代码

> ID：12897260
> 
> 赞同：1
> 
> 时间：2012-10-15T14:01:03.627
> 
> 标签：java, actionscript-3, encryption, aes, rijndael

我在 ActionScript 3 中有一个有效的解密，现在我想在 Java 中解密时得到相同的结果。（我知道 OFB 模式和 NullPadding 可能不是首选，但那是我当时使用的，也是我现在需要解密的……）

（非常旧）Adobe ActionScript 3 代码：

```
static public function decryptTest(): Boolean {
    var iv: String = "0df1eff724d50157ab048d9ff214b73c";
    var cryptext: String = "2743be20314cdc768065b794904a0724e64e339ea6b4f13c510e2d2e8c95dd7409aa0aefd20daae80956dd2978c98d6e914d1d7b5b5be47b491d91e7e4f16f7f30d991ba80a81bafd8f0d7d83755ba0ca66d6b208424529c7111bc9cd6d11786f3f604a0715f";
    var kkey: String = "375f22c03371803ca6d36ec42ae1f97541961f7359cf5611bbed399b42c7c0be";

    var kdata: ByteArray = Hex.toArray(kkey);
    var data: ByteArray = Hex.toArray(cryptext);
    var name: String = 'aes-256-ofb';
    var pad:IPad = new NullPad();
    var mode: ICipher = Crypto.getCipher(name, kdata, pad);
    pad.setBlockSize(mode.getBlockSize());
    trace("mode block size: " + mode.getBlockSize());

    if (mode is IVMode) {
        var ivmode:IVMode = mode as IVMode;
        ivmode.IV = Hex.toArray(iv);
    }
    mode.decrypt(data);

    var res: String = data.toString();
    trace("result: " + res);

    return res == "01020506080b10131c22292d313536393b464c535466696d6e7d7f808a8e9899a2adb1b8babcbebfc1c6c7c8cecfd8e0e4e8ef";
}

trace("decryption test: " + netplay.decryptTest()); 
```

闪光输出为：

```
mode block size: 16
result: 01020506080b10131c22292d313536393b464c535466696d6e7d7f808a8e9899a2adb1b8babcbebfc1c6c7c8cecfd8e0e4e8ef
decryption test: true 
```

**我尝试了什么？**

我在 Java 中尝试了两种不同的方法，一种使用内置`Cipher`类，一种使用[这个 code/class](http://www.devkb.org/java/50-AES-256-bits-encrypter-decrypter-Java-source-code)。但是，第一种方法给了我一个 IllegalKeyException ，而另一种方法给了我垃圾。此外，第二种方法没有明确指定如何输入 IV 数据进行解密，也没有让我指定 OFB 模式或填充。

```
java.security.InvalidKeyException: Illegal key size
    at javax.crypto.Cipher.checkCryptoPerm(Cipher.java:1023)
    at javax.crypto.Cipher.implInit(Cipher.java:789)
    at javax.crypto.Cipher.chooseProvider(Cipher.java:848)
    at javax.crypto.Cipher.init(Cipher.java:1347)
    at javax.crypto.Cipher.init(Cipher.java:1281)
    at test.net.zomis.ZomisTest.decryptCipher(ZomisTest.java:112)
@Test
public void decryptCipher() throws UnsupportedEncodingException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IllegalBlockSizeException, BadPaddingException {
    String iv = "0df1eff724d50157ab048d9ff214b73c";
    String cryptext = "2743be20314cdc768065b794904a0724e64e339ea6b4f13c510e2d2e8c95dd7409aa0aefd20daae80956dd2978c98d6e914d1d7b5b5be47b491d91e7e4f16f7f30d991ba80a81bafd8f0d7d83755ba0ca66d6b208424529c7111bc9cd6d11786f3f604a0715f";
    String key = "375f22c03371803ca6d36ec42ae1f97541961f7359cf5611bbed399b42c7c0be"; // Hexadecimal String, will be converted to non-hexadecimal String
    String expectedResult = "01020506080b10131c22292d313536393b464c535466696d6e7d7f808a8e9899a2adb1b8babcbebfc1c6c7c8cecfd8e0e4e8ef";

    byte[] kdata = Util.hex2byte(key);

    Assert.assertEquals(32, kdata.length); // 32 bytes = 256-bit key

    String result;

    Cipher cipher;
    cipher = Cipher.getInstance("AES/OFB/NoPadding");
    // Below line is 112, which is causing exception
    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(kdata, "AES"), new IvParameterSpec(iv.getBytes("UTF-8")));
    byte[] cryptData = Util.hex2byte(cryptext);
    byte[] ciphertext = cipher.doFinal(cryptData);
    result = new String(ciphertext);

    Assert.assertEquals(expectedResult, result);
}

@Test
public void decryptAES() {
    String iv = "0df1eff724d50157ab048d9ff214b73c"; 
    // Problem: Where should I specify the IV ???? Currently it is an unused variable...

    String cryptext = "2743be20314cdc768065b794904a0724e64e339ea6b4f13c510e2d2e8c95dd7409aa0aefd20daae80956dd2978c98d6e914d1d7b5b5be47b491d91e7e4f16f7f30d991ba80a81bafd8f0d7d83755ba0ca66d6b208424529c7111bc9cd6d11786f3f604a0715f";
    String key = "375f22c03371803ca6d36ec42ae1f97541961f7359cf5611bbed399b42c7c0be"; // Hexadecimal String, will be converted to non-hexadecimal String
    String expectedResult = "01020506080b10131c22292d313536393b464c535466696d6e7d7f808a8e9899a2adb1b8babcbebfc1c6c7c8cecfd8e0e4e8ef";

    Assert.assertEquals(64, key.length());

    AES aes = new AES();
    aes.setKey(Util.hex2byte(key));
    byte[] byteCryptedData = Util.hex2byte(cryptext);
    String byteCryptedString = new String(byteCryptedData);

    while (byteCryptedString.length() % 16 != 0) byteCryptedString += " ";

    String result = aes.Decrypt(byteCryptedString);
    Assert.assertEquals(expectedResult, result); // Assertion Failed
} 
```

**问题：** 如何使 Java 以与 ActionScript 3 相同的方式解密？当然，我想在两者上得到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:14:38.413

第一种方法是给您一条`Illegal key size`错误消息，因为您没有安装不受限制的策略文件。如果没有这些，Java 将拒绝使用“强”密钥长度（例如 256 位 AES）。

如果在您的管辖范围内这样做是合法的，请在 Google 上搜索“ *Unlimited Strength Jurisdiction Policy Files* ”并下载适用于您的 Java 安装的版本。您最终将`lib/security`在 JRE 中转储两个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:04:36.197

是的，有这样的图书馆，看看[http://www.bouncycastle.org/](http://www.bouncycastle.org/)。这是一个更具体的[Java Bouncy Castle Cryptography - Encrypt with AES](https://stackoverflow.com/questions/2435338/java-bouncy-castle-cryptography-encrypt-with-aes)

# eclipse - Eclipse删除项目但不删除源代码

> ID：12897262
> 
> 赞同：2
> 
> 时间：2012-10-15T14:01:12.550
> 
> 标签：eclipse, eclipse-cdt

有没有办法在保留所有资源的同时**删除Eclipse 项目？**（即源代码等）。

我想我可以手动从项目目录中删除以下文件：

```
.cproject
.project 
```

但我担心如果我手动删除项目文件，我的 Eclipse`.metadata`信息可能仍会查找这些文件并感到困惑。`workspace`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:14:24.283

我通常做的是使用 eclipse 删除项目（不要删除磁盘上的**项目**内容）并删除任何可能保留的 .* eclipse 相关文件。

![日食删除项目](../Images/8faa87bd3d802cd59b939ab938e7bc6e.png)

**未选中**结帐时，它会删除项目信息，同时保留源代码。

# c# - 访问未知类型的所有属性

> ID：12897265
> 
> 赞同：1
> 
> 时间：2012-10-15T14:01:23.503
> 
> 标签：c#, .net

在我的 WinForm 上，我想根据对象的类型在运行时显示每个属性（作为标签）及其值。像这样的东西：

```
public void ShowDetails(object anyType)
{
// Generate label per property and show value of the property against a label.
} 
```

我怎样才能做到这一点？有 100 多个具有不同属性的类。

我正在使用 C# 4.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:04:52.417

你使用反射。

```
PropertyInfo[] properties = obj.GetType().GetProperties();
foreach (PropertyInfo property in properties)
{
    object propertyValue = property.GetValue(obj, null);
} 
```

这应该足以让你开始。

您还可以从中获取许多其他信息，`PropertyInfo`例如属性的名称、类型、可访问性等。请注意，可能（但非常罕见）拥有没有 getter 的属性，因此您可能需要先检查一下。您也可能只想获取*公共*属性，而不是*所有*属性。您可能还想检查该属性是否为索引器，因为它的第二个参数需要一个非空值`GetValue`。哦，您还将返回静态属性；你可能想要也可能不想要这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:08:46.963

您可以轻松地将属性及其值存储在字典中

```
Dictionary<string,object> properties = anyType.GetType()
                              .GetProperties()
                              .ToDictionary(p=>p.Name,p=>p.GetValue(anyType,null)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T14:04:16.993

使用`System.Reflection.PropertyInfo`. 您可以遍历所有属性（和子属性）

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:04:49.787

我会阅读[Reflection](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)。它将允许您在运行时访问类成员的属性名称和值。

# iphone - 插入耳机时播放音频

> ID：12897268
> 
> 赞同：1
> 
> 时间：2012-10-15T14:01:38.977
> 
> 标签：iphone, ios, avfoundation, avaudioplayer

> **可能重复：**
> [如何确定外部耳机是否连接到 iPhone？](https://stackoverflow.com/questions/2520296/how-can-i-find-out-if-an-external-headset-is-connected-to-an-iphone)

我正在开发一个音频播放器应用程序，并且在其中一种模式（播放模式）下，我想检测耳机的状态，如果插入了插孔，它应该播放，否则不应该播放。

**编辑**下面是我的代码片段，也有关于我想要做什么的解释。我从 SO 上的其他线程中找到了大部分代码，但仍然无法让它按我想要的方式运行。

```
- (void)isHeadsetPluggedIn {

    UInt32 routeSize = sizeof (CFStringRef);
    CFStringRef route;

    AudioSessionGetProperty (kAudioSessionProperty_AudioRoute,
                             &routeSize,
                             &route);

    NSString* routeStr = (NSString*)route;

    NSRange headsetRange = [routeStr rangeOfString : @"Headset"];
    NSRange receiverRange = [routeStr rangeOfString : @"Receiver"];

    if(headsetRange.location != NSNotFound) {
        // Don't change the route if the headset is plugged in.
        NSLog(@"headphone is plugged in ");
          //here is the place i want to play music
          /* AVAudioPlayer *mySound;

    mySound =[[AVAudioPlayer alloc]initWithContentsOfURL:[[NSBundle mainBundle] URLForResource:@"apple_SIMToolkitPositiveACK" withExtension:@"mp3" ]error:nil];
    [mySound play];

//here is the place where i must receive the info about plug-in(headset)
*/
    }
    else if (receiverRange.location != NSNotFound) {
        // Change to play on the speaker
        NSLog(@"play on the speaker");

    }
    else {
        NSLog(@"Unknown audio route.");

    }
} 
```

# iphone - 门户更改后推送通知不起作用

> ID：12897273
> 
> 赞同：0
> 
> 时间：2012-10-15T14:01:56.853
> 
> 标签：iphone, ios, xcode, cordova, push-notification

我最近在我们的 Apple Dev 门户上更改了以下内容。我之前问过这个，但不是很清楚我改变了什么。

我正在使用： - Phonegap 2.1.0 - iOS 6 min 4.3 - XCode 4.5

我只使用开发证书进行测试。我们还没有测试生产证书。

*   应用程序 ID：启用生产推送通知。
*   配置：添加了一个分发条目并从配置文件中删除了 1 个设备。
*   我还更改了主要目标中的产品/捆绑名称。
*   我下载了新证书并安装了它们。

我完美地得到了一个令牌，它注册了通知。我没有从 Apple 反馈中得到错误。是否有任何我更改的内容会影响推送通知？进行更改后，我是否需要重新下载除配置文件之外的任何内容？我正在 iPhone 4 上进行测试，我已经重启了几次并打开/关闭了通知。

如果有任何效果，我还添加了 AppStore 构建方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:24:53.403

好吧，在我将 Bundle Display 名称改回原来的名称后，他们开始工作了，但我不认为这是修复它的原因，我以前做过。

# objective-c - 在横向启动时未调用 iOS6 旋转方法

> ID：12897275
> 
> 赞同：3
> 
> 时间：2012-10-15T14:02:02.660
> 
> 标签：objective-c, ios5, rotation, ios6

让我首先说在应用程序打开后在 iOS6 中旋转视图时我没有遇到问题。这个问题只发生在我第一次在横向启动应用程序时。新的**shouldAutorotate**和**supportedInterfaceOrientations**方法在启动时都会被调用，但是没有任何旋转方法被调用，例如**willRotateToInterfaceOrientation:duration:**。（shouldAutorotate 总是返回 YES，supportedInterfaceOrientations 总是返回 UIInterfaceOrientationMaskAll）

在 iOS5 中，启动时的“第一”方向是自动处理的。有没有解释为什么设备不会在 iOS6 中调用第一次横向旋转？（我正在检查的视图控制器是窗口/应用程序委托的根控制器）。

提前感谢您对此的任何帮助和洞察力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:07:19.010

我想由于界面实际上并没有旋转，因此没有调用该方法。

如果您想根据方向进行一些设置，您是否考虑过使用视图控制器的`intefaceOrientation`属性？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:09:41.300

您现在应该使用该`viewWillLayoutSubviews`方法而不是`willRotateToInterfaceOrientation:duration:`. 原因是因为`willRotateToInterfaceOrientation:duration:`不能保证在许多情况下都会被调用。

这在[iOS6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html#//apple_ref/doc/uid/TP40012166-CH1-SW19)中以及其他地方都有说明。

# vim - 拆分窗口时如何防止Vim滚动？

> ID：12897276
> 
> 赞同：13
> 
> 时间：2012-10-15T14:02:02.797
> 
> 标签：vim

当我水平拆分窗口时，我想阻止 Vim 滚动（如果这是正确的话）。

假设我在 Vim 中编辑了一个 10 行的文件。我在缓冲区上有一个窗口，窗口高 40 行。两个窗口的空间绰绰有余，一个在另一个之上，两个窗口都显示了整个缓冲区。假设`scrolloff`设置为4。

当我水平拆分窗口时，原始窗口会滚动，以便`scrolloff`在窗口顶部和光标所在的行之间显示准确的线条 - 如果窗口顶部和光标所在的行之间有多`scrolloff`条线条 - - 即使不需要滚动。

换句话说，如果我拆分窗口时光标位于第 1、2、3、4 或 5 行，则原始窗口不会“移动”（好）。但是如果光标位于第 6 行，则窗口滚动，使第 2 行成为最顶部的可见行...确保`scrolloff`行 (4) 在光标行上方可见（烦人）。同样，如果当我拆分窗口时光标位于第 7 行，则原始窗口会滚动到该行，第 3 行成为最顶部的可见行。等等。

当我水平分割原始窗口时，有没有办法配置 Vim 从不滚动原始窗口？

我想可以映射`<C-W>s`到执行我想要的功能，但如果可能的话，我更愿意通过配置来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T07:17:09.430

我找到了一个解决方案，从[这里](https://stackoverflow.com/a/3933547/151007)借用了答案。

在我的`.vimrc`我有：

```
nnoremap <C-W>s Hmx`` \|:split<CR>`xzt`` 
```

现在，当我用 水平分割窗口时`<C-W>s`，原始窗口根本不会滚动。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-29T21:34:39.353

作为[Andy Stewart](https://stackoverflow.com/users/151007/andy-stewart)的解决方案的替代方案，这是我在我的`.vimrc`:

```
 (3)          (5)
                      ++          +--+
                      ||          |  |
nnoremap _ Hmx``<C-w>szz<C-w><C-p>`x``<C-w><C-p>
           |   ||    |  |        |    |        |
           +-+-++----+  +--------+    +--------+
            (1)  (2)       (4)            (6) 
```

(1) 转到左上角保存标记它`x`并返回到您所在的位置。
(2) 创建一个新的拆分。光标将移动到这个新的拆分窗口。
(3) 用于`zz`使光标线居中。
(4) 返回到您创建拆分的窗口。
(5) 返回`x`标记，然后返回到您所在的位置（模拟步骤 (1)）
(6) 返回到您创建的拆分。

我所做的一项添加是添加`zz`到新打开的拆分中，以使新窗口上的光标更容易捕捉。我的大脑可以自动专注于新拆分的中心行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-09T18:11:41.657

最近可用的选项是[stable-windows](https://github.com/gillyb/stable-windows)插件。我试过了，效果很好。

# php - 推进类重建后“基本查询”内的多个函数声明

> ID：12897278
> 
> 赞同：3
> 
> 时间：2012-10-15T14:02:05.780
> 
> 标签：php, symfony-1.4, propel

我修改了我的数据库和一些 fk 关系。重建架构和重建类后，我在尝试使用该类时收到一条错误消息

> 致命错误：无法在 C:\wamp\www\cbm_hr\trunk\cbm\plugins\cbmHrLibPlugin\lib\model\om\BaseHrlibQualificationLevelQuery.php 中重新声明 BaseHrlibQualificationLevelQuery::filterByHrlibQualification() 行 717

我检查了架构，但同一个表中没有多列。

还有哪些事情会导致函数的多次声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T15:36:52.683

我刚刚遇到了类似的问题。尽管您的问题没有提到您是否有多个外键指向同一个外部表，但我怀疑这就是问题所在。

我有：

```
<foreign-key foreignTable="dish" phpName="Dish" refPhpName="Menu">
  <reference local="soup_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="dish" phpName="Dish" refPhpName="Menu">
  <reference local="main_id" foreign="id"/>
</foreign-key> 
```

我收到了这个错误信息：

> PHP 致命错误：无法重新声明 BaseMenuQuery::filterByDish()

然后我更改了 phpName 和 refPhpName 属性（需要后者，因为 Propel 将在外部表类中生成 filterBySomething() 函数，所以在我的例子中，有多个 filterByMenu() 函数名）：

```
<foreign-key foreignTable="dish" phpName="soupDish" refPhpName="sMenu">
  <reference local="soup_id" foreign="id"/>
</foreign-key>
<foreign-key foreignTable="dish" phpName="mainDish" refPhpName="mMenu">
  <reference local="main_id" foreign="id"/>
</foreign-key> 
```

所以我猜你有多个外键引用 HrlibQualification 表。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T19:54:33.437

对不起，我迟到了，但你的问题的解决方案在于你的表的结构，你有两个指向同一个引用的外键，但其中一个没有指向你的表，这就是为什么你只看到一个。

**解决方案**

执行脚本

```
SHOW CREATE TABLE table_name 
```

识别重复的外键

然后删除一个通常是命令不可见的那个

```
ALTER TABLE table_name DROP FOREIGN KEY `foreign_key_id` 
```

然后用反向推进重新生成你的模式

你应该很高兴。

# .net - VB6 PDF 在网络服务器上打印

> ID：12897279
> 
> 赞同：1
> 
> 时间：2012-10-15T14:02:07.977
> 
> 标签：.net, pdf, printing, vb6, webserver

这是一个奇怪的问题，解释起来有点棘手。

我们有一个为用户创建 PDF 文件的网站。我们已经有一个来自另一个应用程序的 DLL，它允许我们使用我们想要的内容创建 PDF 文件，并试图在我们的网站中利用它来避免对所述 DLL 代码进行冗长的重写。问题是 DLL 在 VB6 中。我们遇到的问题是，当用户在我们的 DLL 接触打印机的那一刻点击打印时，我们会得到一个异常（但前提是没有用户登录到网络服务器）。

我们在 .NET 代码中有一个类似的东西，它运行一个较小的工作，但本质上它是相同的东西，这似乎工作正常。

有没有人做过或看到过类似的事情，他们是否知道我们正在做的事情是否可以完成，如果可以，我们会在哪里寻找解决问题的方法。

# python - 属性缓存如何在以下代码中工作？

> ID：12897283
> 
> 赞同：2
> 
> 时间：2012-10-15T14:02:10.373
> 
> 标签：python

我对以下代码片段感到困惑，它是如何工作的？它是一个装饰器，它会延迟初始化属性，然后在下一个请求中使用缓存的属性。看代码，好像总是会调用self.method？一点解释会有所帮助

```
class cached_property(object):
    def __init__(self, method, name=None):
        self.method = method
        self.name = name or method.__name__
        self.__doc__ = method.__doc__
    def __get__(self, inst, cls):
        if inst is None:
            return self
        result = self.method(inst)
        setattr(inst, self.name, result)
        return result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:05:34.080

对我来说，它看起来像是第一次调用该方法`result = self.method(inst)`。然后它用结果替换实例上的方法： `setattr(inst,self.name,result)`.

在随后`my_instance.my_cached_property`，您实际上访问的是方法的（初始）结果（作为常规属性），而不是描述符（原始方法和描述符类没有绑定到该类，因为您覆盖了该属性）。

# asp.net - 当 EnabledEventValidation 开启时，Firefox 中出现无效的 ViewState 错误

> ID：12897288
> 
> 赞同：3
> 
> 时间：2012-10-15T14:02:17.993
> 
> 标签：asp.net, firefox, viewstate, eventvalidation

我有一个稳定的错误，每次我按**F5**时都会重现： ![错误](../Images/42a672f957a2e3535f2ce02e97ecc1b2.png)

有 2 个网格（主详细信息），当主网格上发生焦点行更改事件时，错误实际上发生在我的客户端代码引发的**回调中。**像这样的东西：

```
 this.mainGrid.ClientSideEvents.FocusedRowChanged = string.Format(@"
                function(s, e) 
                {{
                        if (typeof({0}) != 'undefined')
                            {0}.PerformCallback(s.GetFocusedRowIndex());
                }}",
                this.detailsGrid.ClientInstanceName); 
```

**该错误仅在Mozilla firefox**中重现！（是的，**IE**没有问题，这有点奇怪 =））

并且非常重要的事情：该错误仅在事件验证开启时重现，即：

```
... EnableEventValidation="false" %>   // no error in this case 
```

我建议原因是回调在加载必要的字段之前被触发（据我所知，事件验证使用一些隐藏字段），所以我检查了使用`setTimeout`：

```
this.mainGrid.ClientSideEvents.FocusedRowChanged = string.Format(@"
            function(s, e) 
            {{
                window.setTimeout(function () {{
                    if (typeof({0}) != 'undefined') {0}.PerformCallback(s.GetFocusedRowIndex());
                }}, 2000);
            }}",
            this.detailsGrid.ClientInstanceName); 
```

但是tat没有帮助。2 秒过去了，回调开始，我收到错误。它仅在刷新时发生 - 第一次加载页面时不会引发错误。禁用网格的行缓存也没有帮助。需要帮助！=))

编辑：这里是 StackTrace

```
 at System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMessage, Boolean macValidationError)
   at System.Web.UI.ClientScriptManager.EnsureEventValidationFieldLoaded()
   at System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument)
   at System.Web.UI.Control.ValidateEvent(String uniqueID, String eventArgument)
   at System.Web.UI.WebControls.HiddenField.LoadPostData(String postDataKey, NameValueCollection postCollection)
   at System.Web.UI.WebControls.HiddenField.System.Web.UI.IPostBackDataHandler.LoadPostData(String postDataKey, NameValueCollection postCollection)
   at System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean fBeforeLoad)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context)
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at ASP.solutions_cashcenter_stockmanagement_frames_takeintostorageordersviewframe_aspx.ProcessRequest(HttpContext context) in c:\Users\udod\AppData\Local\Temp\Temporary ASP.NET Files\website\b07be668\e534e3ef\App_Web_jeqyhxze.10.cs:line 0
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

Edit2: ' **EnsureEventValidationFieldLoaded** ' - 是的，我明白这一点，但是......如果我等待 2 秒，它怎么可能无法加载？？？

Edit3：您可能会注意到这不是**IIS**问题（屏幕截图上的 127.0.0.1 ip）。

编辑：上！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T10:23:16.547

昨天我遇到了同样的错误，在这里发现了一个类似的问题：[http ://sietch.net/ViewNewsItem.aspx?NewsItemID=185](http://sietch.net/ViewNewsItem.aspx?NewsItemID=185)

我目前的解决方法是：

```
$(document).ready(function(){
    $('#__EVENTVALIDATION').attr('autocomplete', 'off');
}); 
```

它似乎工作。但我还在测试。

# c# - SharePoint 2010 中的场功能状态

> ID：12897290
> 
> 赞同：1
> 
> 时间：2012-10-15T14:02:22.303
> 
> 标签：c#, sharepoint, sharepoint-2010

我又带着另一个 SharePoint 问题回来了！我有一个应用程序返回本地 SharePoint 场上的功能列表。但问题是，无论它们是否被激活，它似乎都将它们返回为“在线”。例如，即使未激活此功能，它仍会在我的应用程序中显示为“在线”：![此功能仍将显示为“在线”](../Images/07e6b2d6f92f728b449566140ad2a70b.png)

我目前使用的代码如下：

```
 foreach (SPFeatureDefinition featureDefinition in featureCollection)
            {
                if (featureDefinition.Scope.Equals(scopeSelect))
                {
                    string featureName = featureDefinition.DisplayName;

                        XElement newItem = new XElement("Item", featureName);
                        XElement itemStatus = new XElement("Item", featureDefinition.Status);
                        infoTree.Add(newItem);
                        infoTree.Add(itemStatus);
                    }
                }
            } 
```

问题是 featureDefinition.Status 总是返回“在线”，无论功能的实际状态如何。这让我相信我做错了什么，或者该`.Status`物业实际上不是我想要的。

我可以使用另一个属性来让我走上正确的轨道吗？

任何指导/建议将不胜感激！

**编辑：** 顺便说一句，IIS 重置对它返回不同的状态没有任何影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:23:11.070

是的，该`.Status`属性会告诉您 的状态`Definition`，但不会告诉您该功能在特定范围内的激活状态。您需要了解一些有关此功能的信息：功能定义只是模板-您在特定级别（农场、网络应用程序、站点、网络）激活该功能的实例-因此您无法检查定义，但需要检查特征的实例是否存在于特定范围内。

要通过 PowerShell 检查功能状态，您可以`Get-SPFeature` [按照此处所述](https://sharepoint.stackexchange.com/questions/13051/powershell-script-to-check-feature-status-enabled-disabled-before-activating)使用。如您所见，所有代码都在调用 Get-SPFeature，如果它返回特定范围的内容，则该功能被激活。你可以在 C# 中做同样的事情。

因此，当您想检查某个功能是否已激活时，例如在站点范围内，您可以迭代 `SPSite.Features`，当您找到您知道它已激活的功能时。Powershell commandlet 没有做任何其他事情。

您想要检查农场功能，因此您可以检查集合`SPWebService.ContentService.Features`以检查激活的农场功能。在此处查看[另一个 PowerShell 脚本示例（几乎看起来像 C#）](http://sharepoint.smayes.com/2011/02/finding-sites-with-a-particular-feature-activated/)。

# jquery - $.css('transform') 返回错误值旋转

> ID：12897291
> 
> 赞同：1
> 
> 时间：2012-10-15T14:02:22.697
> 
> 标签：jquery, css, firefox

> **可能重复：**
> [在 jQuery 中获取元素 -moz-transform:rotate 值](https://stackoverflow.com/questions/8270612/get-element-moz-transformrotate-value-in-jquery)

**火狐 15 - 铬：**

```
$('#img2').css('transform');

return =>  "rotate(90deg)" 
```

**火狐 16**

```
$('#img2').css('transform');
return => matrix(0, 1, -1, 0, 0, 0); 
```

知道如何在 Firefox 16 中获取旋转值什么是矩阵？

在 Firebq 我得到：

```
element.style {
    height: auto;
    transform: rotate(90deg);
    width: auto;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:12:03.403

矩阵是形式的[仿射变换](http://en.wikipedia.org/wiki/Affine_transformation)`[a,b,c,d,tx,ty]`。如果您将 css 字符串解析为具有这些属性的对象（分别`[0,1,-1,0,0,0]`在您的示例中），那么您可以通过执行以下操作来计算旋转角度：`Math.atan2(matrix.b,matrix.a) * (180 / Math.PI);`

这里有一篇关于 css 矩阵的好文章[http://dev.opera.com/articles/view/understanding-the-css-transforms-matrix/](http://dev.opera.com/articles/view/understanding-the-css-transforms-matrix/) - 但我发现的最好的解释仍然是 Senocular 的这篇文章（甚至虽然它是关于 Flash 的，但基本数学是相同的）：[http ://www.senocular.com/flash/tutorials/transformmatrix/](http://www.senocular.com/flash/tutorials/transformmatrix/)

`rotate(deg)`语法只是底层矩阵变换的简写。我不确定为什么 FF 接受一种格式，但报告另一种格式。

更多关于变换：[http ://www.w3.org/TR/2012/WD-css3-transforms-20120911/](http://www.w3.org/TR/2012/WD-css3-transforms-20120911/)

# api - 如何查找我的 teamID 以调用 ESPN API？

> ID：12897294
> 
> 赞同：0
> 
> 时间：2012-10-15T14:02:24.270
> 
> 标签：api

我是路易斯安那州的 iOS 新手，希望通过构建一个简单的新奥尔良圣徒队新闻提要应用程序来学习。我想从免费的 ESPN API 中提取数据。API调用的语法似乎是：

```
/sports/:sportName/:leagueAbbrev/teams/:teamId/news 
```

如何查找此调用的参数？我如何找出圣徒队的 :teamID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:51:22.320

我对 api.espn.com/v1/sports/football/nfl/teams 进行了 API 调用，并通过输出滚动，直到找到圣徒。然后我找到了圣徒的 ID = 18。所以电话是 api.espn.com/v1/sports/football/nfl/teams/18/news

# html - 连接多个 HTML 表格边框

> ID：12897295
> 
> 赞同：0
> 
> 时间：2012-10-15T14:02:27.400
> 
> 标签：html, css, html-table

我的示例代码：

```
<!DOCTYPE html>
<html>
<body>

<h4>Two rows and three columns:</h4>
<table border="1">
<tr>
  <td>100</td>
  <td>200</td>
  <td>

</td>
</tr>
<tr>
  <td>400</td>
  <td>500</td>
  <td>
    <table border="1">
        <tr>
            <td>
                test
            </td>
            <td>
                <table border="1">
                    <tr>
                        <td>
                            test
                        </td>
                        <td>    
                            wuut
                        </td>   
                    </tr>
                    <tr>
                        <td>
                            test1
                        </td>
                        <td>    
                            wuut1
                        </td>   
                    </tr>
                    <tr>
                        <td>
                            test2
                        </td>
                        <td>    
                            wuut2
                        </td>   
                    </tr>
                </table>
            </td>   
        </tr>
    </table>
  </td>
</tr>
</table>

</body>
</html>

<style>
    table {
        border-collapse: collapse;
    }
</style> 
```

你可以把它贴在这里看看它是什么样子的：[http ://www.w3schools.com/html/tryit.asp?filename=tryhtml_tables](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_tables)

我需要的是，当表格在彼此内部时，表格就像连接的边框。只有数据被分隔的表。

目前表格的右下角有3层边框，但这看起来很难看。

我尝试使用 CSS：

```
border-collapse: collapse; 
```

但这只是删除了边框的单元格间距：/

它应该看起来像这样，但这是用 colspan/rowspan 的，这太乱了：

```
<!DOCTYPE html>
<html>
<body>

<h4>Two rows and three columns:</h4>
<table border="1">
<tr>
  <td>100</td>
  <td>200</td>
  <td colspan="3"> </td>
</tr>
<tr>
  <td rowspan="3">400</td>
  <td rowspan="3">500</td>
  <td rowspan="3">test</td>
  <td>test</td>
  <td>wuut</td>
</tr>
<tr>
  <td>test1</td>
  <td>test2</td>
</tr>
<tr>
  <td>wuut1</td>
  <td>wuut2</td>
</tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:44:58.577

修改生成标记的程序代码，使其没有`border=1`属性，而元素有`class`属性`td`，控制每个单元格周围的边框。该`class`属性将对应于在单元格的选定边上设置边框的 CSS 设置，例如`<td class="left top">`使用 CSS 代码：

```
.left { border-left-style: solid } 
.top { border-top-style: solid } 
```

您可以在一个规则中设置边框的宽度和颜色，例如：

```
td { border-width: 1px; border-color: #333; } 
```

您仍然应该设置`table { border-collapse: collapse }`并且可能`padding: 0`在包含表格的每个单元格上设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:26:58.707

这有点棘手，因为嵌套表格的边框是分开绘制的。但是您可以使用一些 CSS3 调整一些东西，以便它们在现代浏览器上以所需的方式工作。（如果你也想在古代浏览器上实现效果，你需要分散很多`class`属性。）

您需要从（至少）包含表格的单元格中删除默认单元格间距。（内表和外表的边框间距来自单元格间距。）这要求每个`td`包含 a的属性`table`都有一个合适的`class`属性，比如`class=containsTable`，因为在 CSS 中您不能通过其后代（内容）引用一个元素。此外，您需要有选择地关闭任何嵌套表格的第一行单元格的顶部边框等：

```
.tableContainer { padding: 0; }
table table { border: none }
table table tr:first-child td { border-top: none; }
table table tr:last-child td { border-bottom: none; }
table table td:first-child { border-left: none; }
table table td:last-child { border-right: none; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:11:24.713

如果这是您要查找的内容，请尝试`<table style="border:0;">`不显示边框，并且您还可以具体说明要显示的一侧，例如：

```
 <table style="border-left:1px solid black;"> 
```

您可以输入样式边框-（左，右，下，上）：“像素”“边框类型”“颜色”。

```
<td style="border:0px;">
                            test
                        </td>
                        <td style="border:0px;">    
                            wuut
                        </td>   
                    </tr> 
```

它不会向他们展示。或者给他们一个 ID 并使用`<style type="text/css">`

```
<style type="text/css">
#aa {border:0px;}
</style> 
```

...

```
<td ID="aa"> 
```

...如果您可以将 ID="aa" 添加到该循环，那么它应该可以工作。

# objective-c - Retina.js 会在 iPhone UIWebView 中正常工作吗？

> ID：12897297
> 
> 赞同：1
> 
> 时间：2012-10-15T14:02:39.130
> 
> 标签：objective-c, css, uiwebview, retina-display

在 XCode 中构建一个小型 iPhone 应用程序，我正在尝试在 UIWebView 中实现几个图像。我知道 JS 库[Retina.js](http://retinajs.com/)在大多数浏览器中都能完美运行，但我不确定它在 Web 视图中如何处理？

可以只使用 CSS3 媒体查询来处理这个问题，但这是很多额外的代码。很想听听是否有人有这方面的经验。

# android - 将数组中的随机字符串附加到按钮

> ID：12897301
> 
> 赞同：0
> 
> 时间：2012-10-15T14:02:48.243
> 
> 标签：android, android-widget

我正在尝试从我的 strings.xml 文件中的数组中创建一个随机字符串，以显示在线性布局中的随机按钮上。我给按钮充气，从我的文件中选择一个随机字符串，然后他们将随机字符串附加到按钮上，然后重复三个按钮。一切正常，我可以看到它每次都附加随机字符串，但问题是按钮显示我用来引用字符串的名称，而不是字符串的实际值。例如，如果我有一个名称为：string 且值为：“Hello World”的字符串，它只会将“string”显示为我的按钮文本。私人无效加载按钮（）{

```
 LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

   for (int row = 0; row < guessRows; row++) 
   {
         random = new Random();
         Resources res = getResources();

         String[] truthString = res.getStringArray(R.array.truthArray);
         String truth = truthString[random.nextInt(truthString.length)];

         Button newGuessButton = (Button) inflater.inflate(R.layout.guess_button, null);

         newGuessButton.setText(truth);

         buttonLayout.addView(newGuessButton);

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:14:40.740

你确定你正确设置了字符串数组吗？数组中的单个字符串不应该有名称标签，唯一的名称应该是数组名称。请参阅[文档](http://developer.android.com/guide/topics/resources/string-resource.html#StringArray)，并确保您正确声明它。

# c# - 在后台打开、修改、另存为 Excel 工作簿（Winforms、C#）

> ID：12897302
> 
> 赞同：2
> 
> 时间：2012-10-15T14:02:51.590
> 
> 标签：c#, excel

在我的应用程序中，我已将空白 excel 文件表单的副本保存为资源，我需要加载此文件，修改其两个工作表，并以新名称将其保存在新位置。用户不应该看到该过程。

我将 C# 2010 与 SQL 服务器一起使用，我将从该服务器加载我的数据并将其放入 excel 表单中。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:31:00.663

使用可以在 .NET 或 COM (Microsoft.Office.Interop.Excel) 中找到的 Microsoft 互操作程序集，然后将所有需要的单元格加载到 a 中`List`并修改数据。

像这样的东西（下面的代码）：

```
 string path = @"C:\temp\test.xls";
   ApplicationClass excelApllication = null;
   Workbook excelWorkBook = null;
   Worksheet excelWorkSheet = null;

   excelApllication = new ApplicationClass();
   System.Threading.Thread.Sleep(2000);
   excelWorkBook = excelApllication.Workbooks.Add();
   excelWorkSheet = (Worksheet)excelWorkBook.Worksheets.get_Item(1);
   // Attention: 1 indexed cells, [Row, Col]
   excelWorkSheet.Cells[1, 1] = "Column A, Row 1";
   excelWorkSheet.Cells[2, 5] = "Column E, Row 2";
   excelWorkSheet.Cells[3, 3] = "Column C, Row 3";

   excelWorkBook.SaveAs(path, XlFileFormat.xlWorkbookNormal);

   excelWorkBook.Close();
   excelApllication.Quit();

   Marshal.FinalReleaseComObject(excelWorkSheet);
   Marshal.FinalReleaseComObject(excelWorkBook);
   Marshal.FinalReleaseComObject(excelApllication);
   excelApllication = null;
   excelWorkSheet = null;
   //opens the created and saved Excel file
   Process.Start(path); 
```

这应该发生在线程内部，因为您不希望用户注意到该任务。

[http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx) （线程教程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:24:30.747

如果可能的话，我会尽量避免使 Excel 自动化，并使用 OpenXML SDK（或包装 OpenXML SDK 的库）来完成这项任务。

[这](http://msdn.microsoft.com/en-us/library/office/hh180830.aspx)是一篇可以帮助您入门的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T00:51:57.443

我想你想这样做……至少对我有用。:)

```
 private void btnExcel_Click(object sender, EventArgs e)
    {
        string newDirectoryPath = ValidateDirectory();
        string newFilePath = Path.Combine(newDirectoryPath, "new.xls");

        //brand new temporary file
        string tempPath = System.IO.Path.GetTempFileName();
        //to manage de temp file life
        FileInfo tempFile = new FileInfo(tempPath);
        //copy the structure and data of the template .xls
        System.IO.File.WriteAllBytes(tempPath,Properties.Resources.SomeResource);

        Excel.Application xlApp;  
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
        object misValue = System.Reflection.Missing.Value;

        xlApp = new Excel.Application();
        xlWorkBook = xlApp.Workbooks.Open(tempPath, 0, true, 5, "", "", true, Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);

        //WorkTheExcelFile();

        tempFile.Delete();

        xlWorkBook.SaveAs(newFilePath);
        xlWorkBook.Close(true, misValue, misValue);
        xlApp.Quit();

        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);

        Process.Start(newFilePath + ".xlsx");
    } 
```

# java - Java：如何从 GUI 已经委托给的类中打开弹出窗口？

> ID：12897304
> 
> 赞同：1
> 
> 时间：2012-10-15T14:02:54.513
> 
> 标签：java, swing, popupwindow, jdialog, delegation

我的程序中有几个类，但现在我们只需要担心其中两个：GUI 和逻辑。

GUI 类委托给 Logics 类：

```
Logics logics = new Logics(); 
```

这是因为我希望 GUI 类调用我在 Logics 类中的方法。

但现在我还希望从 Logics 类中调用 GUI 中的方法。具体来说，我希望逻辑能够在满足某些特定条件（在逻辑类中检查）时使 GUI 类（JDialog）中的弹出框可见。

我该怎么做呢？我不能从逻辑委托给 GUI，因为那样我会得到一个溢出（来回委托到无穷大）。

有人有什么建议吗？:)

-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:08:00.580

也许可以为逻辑类提供显示对话框的服务。GUI 类可以实现一个名为 DialogService（或其他）的接口，该接口定义了显示对话框的方法。然后你可以打电话：

```
Logics logics = new Logics(this); 
```

不需要 Logics 类直接访问 GUI 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:10:38.053

设计两个类的[对象图：逻辑和 GUI。](http://en.wikipedia.org/wiki/Object_diagram)

然后你需要弄清楚你希望对象如何通过什么接口与每个对象交互。对象之间的关系是什么。在上下文对象组合中查看[聚合](http://en.wikipedia.org/wiki/Object_composition#Aggregation)、[组合。](http://en.wikipedia.org/wiki/Object_composition#Aggregation)

# c - 发送给子进程和父进程的信号

> ID：12897306
> 
> 赞同：3
> 
> 时间：2012-10-15T14:03:00.327
> 
> 标签：c, unix, signals

据我了解，发送给父进程的信号不应发送给子进程。那么在下面的示例中，为什么 SIGINT 会同时到达孩子和父母？

```
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
#include <unistd.h>

void sigCatcher( int );

int main ( void ) {
    if (signal(SIGINT, sigCatcher) == SIG_ERR) {
        fprintf(stderr, "Couldn't register signal handler\n");
        exit(1);
    }
    if(fork() == 0) {
        char *argv[] = {"find","/",".",NULL};
        execvp("find",argv);
    }
    for (;;) {
        sleep(10);
        write(STDOUT_FILENO, "W\n",3);
    }

    return 0;
}

void sigCatcher( int theSignal ) {
        write(STDOUT_FILENO, "C\n",3);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:06:32.173

如果您通过键入 ^-C 发送 SIGINT，则该信号将发送到前台处理组中的所有进程。如果您使用`kill -2`，它只会转到父级（或您指定的任何进程。）

# java - 使用 ASM 4.0（Java 字节码库）创建方法适配器

> ID：12897311
> 
> 赞同：1
> 
> 时间：2012-10-15T14:03:07.167
> 
> 标签：java, java-bytecode-asm

1.  有没有人获得一些用于创建方法适配器的示例 ASM 代码（java 字节代码库）的链接？（被适配的方法的返回类型和参数直到运行时才知道）

2.  您认为 ASM 可以进行如下所示的修改吗？

以下代码：

```
public Blah doBling( Bling bling ){

Blah blah = doSomething( bling );
    return blah;
} 
```

使用 java 代理修改为以下代码：

```
private Blah _doBling( Bling bling ){

     Blah blah = doSomething( bling );
     return blah;
}

public Blah doBling( Bling bling ){

    if ( Mode.recordMode() ){

        Blah blah = _doBling( bling );
        Mode.record( blah );
        return blah;
    }
    else {
        Blah blah = Mode.playback( bling );
        return blah;
    }
} 
```

# c# - C#中的数据绑定问题

> ID：12897312
> 
> 赞同：1
> 
> 时间：2012-10-15T14:03:11.277
> 
> 标签：c#, data-binding

我对 C# 中的 DataBindings 有疑问。

我有一个 BindingSource，它的 DataSource 设置为 DataRowView

然后我使用绑定源为我的控件设置所有数据绑定。

这是我的代码：

```
bsDataRecord.DataSource = myDataRow; //bsDataRecord is a BindingSource and myDataRow is a DataRowView
//Add Databinding to my controls
dateNextDate.DataBindings.Add("Value", bsDataRecord, "Next_Date", false, DataSourceUpdateMode.OnPropertyChanged); //DateTimePicker
textInformation.DataBindings.Add("Text", bsDataRecord, "Information", false); //TextBox
//more controls, etc 
```

我的数据绑定一切正常。因此，当我选择控件并输入一个值时，myDataRow 就会更新。

当我尝试在代码中设置控件的值时出现我的问题，例如

```
textInformation.Text="Test"; 
```

当我这样做时 myDataRow 没有更新。我可以让 myDataRow 更新的唯一方法是提供我已更新焦点的控件。

希望这是有道理的！？有人有什么想法吗？

提前致谢。

我正在使用 c#.Net 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:09:43.000

在有问题地设置数据源的属性后，您需要让控件从数据源重新读取它们的值。通常是一个简单的调用

```
dataBindingSource.ResetBindings(false); // false for value change not schema change 
```

但您也可以按控件使用：

```
foreach (Binding b in myControl.DataBindings) b.ReadValue(); 
```

Binding.ReadValue() 使控件的绑定属性设置为数据源值

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:05:28.253

如果您“手动”更新（非双向）绑定的目标，则会破坏绑定并且它将不再起作用。这是正常行为。

因此，使您的绑定双向实现您想要做的事情。

# version-control - 对 RTF 文档使用版本控制？

> ID：12897313
> 
> 赞同：3
> 
> 时间：2012-10-15T14:03:10.943
> 
> 标签：version-control, rtf

我最近开始了作为业务系统分析师的新工作。该公司有一个内部文档管理系统，可以读取/解析具有类似 BBCode 语法的 RTF 文档，以执行基本的条件、循环和插入数据库中的数据；我的职责是使用代码块修改这些 RTF 文件，使它们动态化。

对于我自己的个人用途，我想利用版本控制系统来更好地处理修订，因此我不必在我正在处理它们的各个阶段拥有数十个文件副本，可能是 Mercurial（我没有不想与 Cygwin 打交道），但鉴于我更习惯于 IDE 中的源代码而不是富文本文档模板，我不太确定 VCS 系统是否是我无法使用的合适解决方案' t 真正使用它们来区分文件，就像存储和跟踪一样。

对此有什么建议吗？我可以使用 VCS 系统还是将程序员逻辑应用于非编程问题？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:57:12.590

> 看到我更习惯于 IDE 中的源代码而不是富文本文档模板

这是一个奇怪的角度：您可以**随时、始终、随时**进行版本控制。只是有时它不太可用，有时 - 更多。

如果您的文件基本上是文本-您可以版本/比较/回滚，如果您的文件可以被特殊的查看器文本阅读-您还可以区分修订，如果您的文件可以通过眼睛阅读-您还可以合并源。如果您有 GUI，则您拥有 SCM 的所有功能和工具的可用性。

...并且很高兴您不必使用这样的东西

```
{\rtf1\ansi\ansicpg1251\deff0\deflang1049{\fonttbl{\f0\fswiss\fcharset204{\*\fname Arial;}Arial CYR;}}
{\colortbl ;\red0\green128\blue0;}
{\*\generator Msftedit 5.41.15.1515;}\viewkind4\uc1\pard\f0\fs20\'dd\'f2\'ee \'ef\'e5\'f0\'e2\'e0\'ff \'f1\'f2\'f0\'ee\'ea\'e0\par
\'dd\'f2\'ee \b\'e2\'f2\'ee\'f0\'e0\'ff \cf1\b0\'f1\'f2\'f0\'ee\'ea\'e0\cf0\par
} 
```

（普通的纯RTF，里面有简短的俄语文本）

# android - 如何在android中制作单实例应用程序？

> ID：12897314
> 
> 赞同：1
> 
> 时间：2012-10-15T14:03:10.957
> 
> 标签：android

我是android的新手，对此我有疑问。

如何在android中制作单个应用程序？我用谷歌搜索了它，我得到了解决它的方法是将launchMode设置为singleTask或singleInstance，我当然尝试过，但没有得到预期的解决方案。

实际上我有一个 MP3 播放器应用程序，然后运行它：

按主页按钮->按住主页按钮->选择我的应用程序->恢复正常。

但是当它启动时：

按返回按钮->按住主页按钮->选择我的应用程序->恢复不正常。我的意思是 android 创建了我的应用程序的一个新实例，你知道，2 个应用程序一起运行，但我不希望这样。

我尝试将启动模式设置为 singleTask。它在第一个活动（我设置为 singleTask）中工作正常，但是当我在屏幕上按下一个按钮以引用新活动（我没有设置为 sigleTask）时，它不能正常工作。

我的应用程序有很多活动，所以我认为将启动模式设置为 singleTask 或 singleInstane 完全不好。

期待您的回答。

谢谢你。@@：如果有任何英语语法错误，我很抱歉（我不擅长英语）。

更新：

我已经解决了这个问题，但现在我怀疑我的模拟器。正如您之前提到的，按下后退按钮将破坏应用程序（调用 finish() 方法），因此我的应用程序所拥有的所有环境都将被释放。但是当我按下后退按钮时，我的应用程序可能仍在运行，因为我仍然听到正在播放的歌曲。？

我的代码：

```
public class MainActivity extends Activity {

MediaPlayer mp;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mp = new MediaPlayer();
    playSong("sdcard/Music/lung ta lung tung.MP3");
}

public void playSong(String str)
{
    try {
        mp.setDataSource(str);
        mp.prepareAsync();
        mp.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer arg0) {

                mp.start();
            }
        });
    } catch (IllegalArgumentException e) {

        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:28:56.803

您可以通过将任务移动到背景来将后退按钮设为主页

```
@Override
public void onBackPressed() {

    moveTaskToBack(true);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:25:46.773

通常，android 方法是操作系统正在处理应用程序。

当您在 Android 应用程序中按下后退按钮时，代码可能会也可能不会处理该按下。

在您描述的场景中，后退按钮可能是在代码中处理的，当它按下时，应用程序调用“finish();” 在活动上。例如：

```
@Override
 public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
       //this will finish the activity
       finish(); 
       //this will act as the home button (Use only one of them)
       //moveTaskToBack(true); 
       return true;
    }
 } 
```

当您按下主页按钮时，代码可能会处理一个事件（onPause）。在某些情况下，您想在有人按下主页按钮时终止应用程序，而在某些情况下您想做其他事情（例如，只需将活动移至后台）。

如评论中所述，您确实应该阅读有关应用程序 [生命周期管理活动生命周期的信息](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# javascript - 用 JavaScript 理解 instanceof

> ID：12897316
> 
> 赞同：1
> 
> 时间：2012-10-15T14:03:16.757
> 
> 标签：javascript, instanceof

我对 JavaScript 中的 instanceof 有基本的了解，测试左侧对象是否“属于”右侧对象类型。以下 2 个示例帮助我理解...

```
var demo1 = function() {};
demo1.prototype = {
foo: "hello"
};

var demo2 = function() {
var pub = {
    bar:"world"
};
return this.pub;
};

var obj1 = new demo1();
var obj2 = new demo2();

console.log(obj1 instanceof demo1);  //returns true
console.log(obj2 instanceof demo2);  //returns true 
```

但是在这第三个例子中，我弄错了，我不明白为什么....

```
var o = {}; // new Object;
o.toString(); // [object Object]
console.log(o instanceof toString); //returns false 
```

感谢您在了解发生了什么方面提供的任何帮助。另外......是否有可能使第三个例子成为真实？

再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:09:58.443

`toString`不会导致 的类型更改`o`。它只是返回对象的字符串表示，而不改变它。所以，`o`仍然是一个简单的对象，没有`instanceof String`.

```
var o = {}; // new Object object
var ostring = o.toString(); // "[object Object]"
typeof o; // object
typeof ostring; // string - this is a primitive value, not an object; so that
ostring instanceof String; // is false
var stringobj = new String(ostring); // new String object
typeof stringobj; // object
stringobj instanceof String; // true!
o instanceof Object; // also true! 
```

另请参阅[构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Distinction_between_string_primitives_and_String_objects)[的 MDN 参考`String`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String#Distinction_between_string_primitives_and_String_objects)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:07:24.623

使用像这样的对象文字

```
var o = {}; // new Object; 
```

您创建一个原型为`Object`. 测试`instanceof`不会产生任何有用的信息。唯一会产生真的比较是

```
o instanceof Object 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:09:05.510

`o`是一个`object`；`toString`是一个`function`。它们是 JavaScript 中的不同类型。

```
alert(typeof(o));  //"object"
alert(typeof(toString)); //"function" 
```

JavaScript 区分对象和函数。因此，这就是您`false`在示例中返回的原因。

# python - 在python中循环资源

> ID：12897320
> 
> 赞同：1
> 
> 时间：2012-10-15T14:03:28.177
> 
> 标签：python, for-loop, with-statement

是否有更短的方法来执行以下`for-with`组合：

```
for resource in gen_resources():
    with resource:
        DoWork1(resource)
        .
        .
        DoWorkN(resource) 
```

如果可能的话，我想避免额外的行+缩进。

资源可以是在离开循环迭代时必须完成的任何东西（打开文件、活动对象等）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:16:13.873

`with`您可以创建一个对每个元素执行语句的生成器函数：

```
def iterate_with(iterable):
    for element in iterable:
        with element:
            yield element 
```

采用：

```
for resource in iterate_with(gen_resources()):
    DoWork(resource) 
```

我可能仍然会使用您的原始代码，因为代码的读者可能不清楚`with`这里使用了该语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:06:32.210

只是因为你在里面有一个声明`with`：

```
for resource in gen_resources():
    with resource:  DoWork(resource) 
```

这似乎通常不受欢迎，但我不知道为什么 -`for`并且`if`可以做同样的事情，而且非常方便......

# titanium - WebView 和 WebPage 之间的通信 - Titanium Studio

> ID：12897321
> 
> 赞同：0
> 
> 时间：2012-10-15T14:03:30.793
> 
> 标签：titanium

我正在从事一个移动项目（使用 Titanium Studio），其中我有以下情况

1) 我的移动应用程序联系 Rails 后端检查一些数据，比如检查用户 ID 的有效性。

2）我找到了一种在移动应用程序中加载网页的方法，即，`WebView`

3）我可以加载所需的网址，例如`http://www.mydomain.com/checkuser?uid=20121` 返回数据`status:success`

但是我需要读取这些数据来显示来自服务器的响应是成功还是失败，我该如何实现呢？

**注意：**上述场景是一个用例，但实际上发生的是我加载了第三方 url `WebView`，当用户输入数据并提交时，结果将被发布回我的网站 url。

**编辑：**所以过程如下

1) WebView 加载了第三方 url，如`http://www.anyapiprovider.com/processdata`

2) 用户将在该网页中输入一组数据并提交该页面

3）提交的数据将由 apiprovider 处理并将数据返回到我的网页说`http://www.mydomain.com/recievedata`

这就是为什么我不直接使用 FYI 的原因`GET`：`HTTPClient` **我**尝试按照几篇文章的建议直接从实际网页触发 Ti.APP 事件，但他们中的大多数人说这只有在加载的文件在本地和不是远程文件。[参考链接](https://stackoverflow.com/questions/2685409/trouble-using-titaniums-webview-to-fire-an-api-event/9969336#9969336)

如果我的方法必须改进，请建议我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:36:16.067

如果您不想听从 Josiah 的建议，请查看 Titanium 文档，了解如何添加`webview.addEventListener('load',...`事件侦听器并使用`webview.evalJS()`将您自己的代码注入第三方 HTML。

也许您可以注入代码来捕获提交事件并触发 Ti 事件以触发从您的网站下载数据。

[WebViews 和 Titanium 之间的通信 - 远程 Web 内容部分](https://wiki.appcelerator.org/display/guides/Communication+Between+WebViews+and+Titanium)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:05:27.703

我找到了解决问题的方法

1）`http://www.mydomain.com/checkuser?uid=20121`在webview中加载

2）让用户输入并提交数据到第三方url

3) 接收来自第三方 url 的响应并仅`<div id="result">status:success</div>`在`http://www.mydomain.com/recievedata`页面中打印。

4) 为 web 视图添加事件监听器，如下所示

```
webView.addEventListener('load', function(data) 
{ 
   //Add condition to check if the loaded web page has any div with id = result (to check if this is /recievedata page)
    alert(webView.evalJS("document.getElementById('result').innerHTML"));
}); 
```

上面的警报将打印结果`status:success`，在 webview 加载事件中读取它并在 web 中相应地采取措施。

这对我来说可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:26:48.100

为什么不使用 HTTP 客户端获取它，而不是将其加载到 WebView 中？这更干净，并且基于更多标准：

```
var xhr_get = Ti.Network.createHTTPClient({
    onload : function(e) {
        // Here is your "status:success" string
        var returnValue = this.responseText;
    },
    onerror : function(e) {
        Ti.API.info(this.responseText);
        Ti.API.info('CheckUserProgressOnActivity webservice failed with message : ' + e.error);
    }
});
xhr_get.open('GET', 'http://www.mydomain.com/checkuser?uid=20121');
xhr_get.send(); 
```

# windows-8 - 适用于 Windows 8 的可再发行离线 .NET Framework 3.5 安装程序

> ID：12897326
> 
> 赞同：18
> 
> 时间：2012-10-15T14:03:40.530
> 
> 标签：windows-8, .net-3.5, installation, .net-framework-version, windows-10

我们公司在 Windows 8 上测试我们的产品（为 .NET Framework 3.5 编译）。我们发现 Windows 8 上没有 .NET Framework 3.5，解决此问题有两种可能：

1.  在线安装

2.  从 Windows 8 安装 DVD 或 ISO 安装

但是，我们需要为没有互联网和没有 Windows 安装 DVD 的每个人提供可再分发的离线安装程序。

有没有办法解决这个问题？

谢谢。

**更新**：

这[也应该适用于 Windows 10](http://wind8apps.com/install-net-framework-windows-10/)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T07:48:52.897

试试这个命令：

```
Dism.exe /online /enable-feature /featurename:NetFX3 /Source:I:\Sources\sxs /LimitAccess 
```

`I:`Windows DVD 的分区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T10:22:05.167

如果您处于离线状态（`D:\sources\sxs`位于) 并让每台机器运行命令：

> Dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:c:\dotnet35 /LimitAccess

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848079%28v=vs.85%29.aspx)上有一个指南。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-26T08:48:58.863

在几个月没有真正解决这个问题后，我想最好的解决方案是将应用程序升级到 .NET framework 4.0，Windows 8、Windows 10 和 Windows 2012 Server 默认支持，并且仍然可以离线安装适用于 Windows XP。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T10:24:34.043

您不必将所有内容复制到 C:\dotnet35。通常所有文件都已复制到文件夹 C:\Windows\WinSxS。然后命令变为（假设 Windows 安装到 C:）：“Dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:C:\Windows\WinSxS /LimitAccess” 如果没有你也可以点命令直接刻录到 DVD。然后命令变为（假设 DVD 安装到 D:）：“Dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:D:\sources\sxs /LimitAccess”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-01T10:42:10.480

Microsoft .NET Framework 3.5 无需安装介质即可安装在 Windows 10 上。您需要的文件名为`microsoft-windows-netfx3-ondemand-package.cab`. 只需谷歌它，你就会得到下载链接。下载后，将该文件复制到`C:\dotnet35`并运行以下命令。

`Dism.exe /online /enable-feature /featurename:NetFX3 /All /Source:c:\dotnet35 /LimitAccess`

在 Windows 10 中测试和工作没有任何问题。

# android - 我无法在 Android+phonegap 中为 android os 4 传递查询字符串参数

> ID：12897327
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:03:45.730
> 
> 标签：android, cordova

我无法在 Android+phonegap 中为 android os 4 传递查询字符串参数，并且出现此错误

```
DroidGap: GapViewClient.onReceivedError: Error code=-1 Description=A network error occurred. URL=file:///android_asset/www/StoresInCity.html?name=NEW%20DELHI&category=store 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:12:32.670

您使用的是哪个版本的 PhoneGap？从 PhoneGap 2.1 开始，我们正在解决一个已知的[Android 操作系统错误。](https://code.google.com/p/android/issues/detail?id=17535)

# ruby-on-rails - 如何访问考拉 json 响应中的键和值？

> ID：12897330
> 
> 赞同：0
> 
> 时间：2012-10-15T14:03:53.243
> 
> 标签：ruby-on-rails, koala

我在 Rails 3.2 应用程序中使用 Koala gem 来返回用户朋友的列表。

我认为响应是格式的 JSON 哈希：

[{"name"=>"FB 朋友 1 1", "id"=>"123456780"}, {"name"=>"FB 朋友 2", "id"=>"987654321"}]

我确定我遗漏了一些简单的东西，但是我无法弄清楚如何操纵这种格式以在其他地方使用。

基本上我正在尝试添加一个选择字段，其中选项是朋友，例如

```
<select name="friends[friend_id]">
  <option value="">None</option>
  <option value="123456789">FB Friend 1</option>
  <option value="987654321">FB Friend 2</option>
</select> 
```

由于响应不是数组，我不能只使用 :id 和 :name 进行选择。如何访问键和值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:13:49.537

```
<%= select_tag 'friends[friends_id]', options_for_select([['none', nil]] + list) %> 
```

# objective-c - 如何使用 NSOperationQueue 或 performSelectorInBackground 运行异步服务调用

> ID：12897331
> 
> 赞同：0
> 
> 时间：2012-10-15T14:03:53.603
> 
> 标签：objective-c, nsurlconnection, background-process

我正在使用 NSURLConnection 异步调用从服务器加载数据。在使用 performSelectorInBackground 调用服务方法时，该方法被调用但 NSURLConnection 不提供任何响应。我正在使用异步调用，因为我必须先验证身份验证。每当我尝试服务调用时主线程它给了我正确的数据，但 UI 被冻结。1）如何使用 performSelectorInBackground 进行异步调用我通过异步加载数据做错了什么。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:21:57.650

这是一种可能的方式，虽然不是通过 NSURLConnection，但它不会阻塞：

```
NSURL *xmlURL = [NSURL URLWithString:URL];

if (self.xmlParser != nil)
{
    [self.xmlParser abortParsing];
    self.xmlParser = nil;
}

dispatch_queue_t loadQueue1 = dispatch_queue_create("loadQueue1", NULL);

// Use another thread to avoid blocking main thread

dispatch_async(loadQueue1,^{

self.xmlParser = [[[NSXMLParser alloc] initWithContentsOfURL:xmlURL] autorelease];

// -------------------------------------------------------------------
[self.xmlParser setDelegate:self];

dispatch_async(dispatch_get_main_queue(),^{
if (self.xmlParser != nil)
{
    [self.xmlParser  parse];
}

    });

});

dispatch_release(loadQueue1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:12:30.333

如果您使用`NSURLConnection`异步 API，则无需使用`performSelectorInBackground`. 您从主线程调用它，并设置一个委托，当数据到来或另一个事件发生时将调用委托，而不会阻塞主线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:04:04.467

好的，在调试代码后我得到了错误。这不是异步调用，而是接收到巨大响应后的更新方法冻结了我的 UI。我用来打印数据的 NSLog 也导致了这个问题。

# php - Drupal：从文件系统保存文件

> ID：12897332
> 
> 赞同：0
> 
> 时间：2012-10-15T14:03:59.070
> 
> 标签：php, drupal

我想将我在 temp 目录中创建的文件保存到 drupal。但是 file_save 请求一个文件对象，但我只有真实的路径。

```
$imageId =file_save('/tmp/proj/media/cover.jpg']); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:07:13.983

我认为您正在寻找[file_save_data 函数](http://api.drupal.org/api/drupal/includes!file.inc/function/file_save_data/7)，或者可能是[file_unmanaged_save_data](http://api.drupal.org/api/drupal/includes!file.inc/function/file_unmanaged_save_data/7)，而不是 file_save()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:16:42.387

file_save(stdClass $file) 保存一个文件对象。您正在尝试下载文件。

你可以这样做

```
$file = '/tmp/proj/media/cover.jpg';
// Get the file size
$details = stat($file);
$filesize = $details['size'];

// Get the path to your Drupal site's files directory 
$dest = file_directory_path();

// Copy the file to the Drupal files directory 
if(!file_copy($file, $dest)) {
    echo "Failed to move file: $file.\n";
    return;
} else {
    // file_move might change the name of the file
    $name = basename($file);
}

// Build the file object
$file_obj = new stdClass();
$file_obj->filename = $name;
$file_obj->filepath = $file;
$file_obj->filemime =  file_get_mimetype($name);
$file_obj->filesize = $filesize;
$file_obj->filesource = $name;
// You can change this to the UID you want
$file_obj->uid = 1;
$file_obj->status = FILE_STATUS_TEMPORARY;
$file_obj->timestamp = time();
$file_obj->list = 1;
$file_obj->new = true;

// Save file to files table
drupal_write_record('files', $file_obj); 
```

我希望这能帮到您。

# javascript - 根据 IE 的窗口大小调整图像大小

> ID：12897335
> 
> 赞同：0
> 
> 时间：2012-10-15T14:04:04.920
> 
> 标签：javascript, jquery, internet-explorer, css

根据给定的脚本

```
<style>
.x{
    background: url('img.jpg') no-repeat;
    background-size: contain;
    height: 100%;
  }
</style>

<div class="x"></div> 
```

它适用于 chrome 和 firefox ......任何想法如何使它与 IE 7、8、9 一起工作

我尝试了很多脚本，但没有什么能像 FF 和 chrome 那样运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:08:38.880

9 之前的 IE 不支持 background-size：

[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

你必须想出一种不同的技术来处理这种情况。有关解决方法的说明，请参阅此：http: [//kimili.com/journal/the-flexible-scalable-background-image-redux](http://kimili.com/journal/the-flexible-scalable-background-image-redux)

如果您想要一个示例（我不会声称这是一个很好的示例，但从技术上讲，它可以工作），您可以查看我去年为这个网站工作的代码。客户想要一个缩放到屏幕大小的背景图像，但在幻灯片旋转时也会发生变化，所以它有点可怕，代码方面：

[http://www.buzzhoney.com/](http://www.buzzhoney.com/)

您需要注意[http://www.buzzhoney.com/Content/style.css中的各种设置](http://www.buzzhoney.com/Content/style.css)

这个网站也应该是响应式的，所以这里有几个级别的@media 查询可供查看。里面有很多东西，我没有时间重复一遍，但这里有一些亮点：

基于这个标记外壳（我已经删除了所有会妨碍这些主要元素如何协同工作的额外内容）：

```
<html>
    <head>
    </head>
    <body>
        <div id="container">
            <div id="header">
                <!-- snip header stuff -->
            </div>

            <div id="main" role="main">
                <!-- snip body stuff -->
            </div>
            <footer id="footer">
                <!-- snip footer stuff -->
            </footer>

            <div id="background">
                <div id="background-photo"><img id="bg_0" src="/Content/themes/base/images/index/bg-home-1200x933.jpg" class="opaque"></div>
            </div>

            <!-- snip js includes, per best practices, 
                 located at the bottom of the page -->
        </div>
    </body>
</html> 
```

从第 316 行开始，我们为背景容器及其图像设置了初始样式，但仅适用于 320 像素到 480 像素宽的设备，适用于智能手机。然而，在 416 处，我们开始设置适用于 321px 宽及以上设备的样式：

```
#background
{
    left: 0;
    min-height: 730px;
    overflow: hidden;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: -1;
    height:100%;
}

#background img 
{
    left: 0;
    min-width: 1200px;
    position: absolute;
    top: 0;
    width: 100%;
    z-index: -2;
    display:block;
    opacity:0;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0);
} 
```

注意容器（#background）如何设置为 100% 的宽度和高度，最小高度为 730 像素，内部图像设置为 100% 宽度，但没有指定特定高度，只有 1200 像素的最小宽度. 这基本上是说它会按比例放大，并且高度会与其宽度成比例地变化，但宽度永远不会低于 1200px，所以此时，容器将在图像周围折叠并隐藏不适合的多余部分它的区域（溢出：隐藏）。

另请注意，我使用 position:fixed 和 left:0, top:0 将背景容器锚定到位，并使用 z-index:-1 将其放置在其他所有内容的后面。

有一些小的修改可以在更高分辨率下添加一些其他功能，但没有什么能改变这个基本设置。出于您的目的，除非您想要褪色/变化的背景，否则您将删除以下线条：

```
 opacity:0;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    filter: alpha(opacity=0); 
```

因为它们会使背景图像不可见。

# asp.net-mvc-3 - ASP.NET MVC 在寻找瓶颈时迷失了方向

> ID：12897336
> 
> 赞同：2
> 
> 时间：2012-10-15T14:04:07.877
> 
> 标签：asp.net-mvc-3, performance, debugging, profiling

我有`ASP.NET MVC`接受文件上传并使用 SignalR 进行结果池的应用程序。该应用程序托管在具有 IIS7、4 Gb Ram 和两个核心 CPU 的 Prod 服务器上。

Dev 服务器上的应用程序运行良好，但是当我将它托管在 Prod 服务器上时，`50 000 users per day`该应用程序在运行五分钟后变得不负责任。网页请求时间急剧增加，加载一页大约需要 30 秒。我试图记录所有`MvcApplication.Application_BeginRequest`事件调用并`9000`在`5 minutes`. 不确定对于这样的应用程序的点击次数是否可接受。

我已经使用 ANTS Performance Profiler（在 Prod 应用程序分析中没有用，速度慢并且占用所有内存）来分析代码，但分析器在我的代码/MSSQL 查询中没有显示任何时间延迟问题。

我还尝试监控 CPU 和 RAM 峰值问题，但没有发现任何问题。CPU 百分比有时会达到 15%，但从未上升，内存使用率正常。

我怀疑 ASP.NET/IIS7 中的请求或线程限制有问题，但不知道如何对其进行分析。

有人可以建议任何可以在这种情况下提供帮助的分析解决方案吗？已经尝试了两周的问题，但没有任何结果:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:09:39.757

您可以尝试使用[MiniProfiler](http://miniprofiler.com/)，更具体地说[`MiniProfiler.MVC3`](http://nuget.org/packages/miniprofiler.mvc3)是专为 ASP.NET MVC 应用程序创建的 NuGet 包。它将向您显示各种有用的信息，例如执行请求时不同方法所花费的时间。

# c# - 以新注册用户身份登录我的 WebMatrix razor C# 站点会引发错误

> ID：12897342
> 
> 赞同：1
> 
> 时间：2012-10-15T14:04:27.907
> 
> 标签：c#, database, razor, login, webmatrix

我遇到了一个我似乎无法追踪的问题。通过我的 WebMatrix 站点注册后，我无法登录。在设置注册以通过电子邮件发送确认令牌之前，我能够正常登录。这是我得到的 YSOD 错误（该错误专门发生在登录文件的第 21 行）：

```
Exception Details: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot implicitly convert type 'WebMatrix.Data.DynamicRecord' to 'string'

Source Error: 

Line 19:             {
Line 20:                 var db = Database.Open("Users");
Line 21:                 user = db.QuerySingle("SELECT firstName FROM UserProfile WHERE  LOWER(Email) = LOWER(@0)", username);
Line 22: 
Line 23:                 AppState["gActionMessage"] = "Hello, " + user + "!";

Source File: c:\Users\cradebaugh\Documents\My Web Sites\Persons Of Interest\Account\Login.cshtml    Line: 21 
```

以下是相关文件：

**注册页面：**

```
@{
var email = "";
var firstName = "";
var lastName = "";
var password = "";
var confirmPassword ="";
var errorMessage = "";
AppState["gActionMessage"] = "";
if(IsPost)
{
    email = Request.Form["email"];
    firstName = Request.Form["firstName"];
    lastName = Request.Form["lastName"];
    password = Request.Form["password"];
    confirmPassword = Request.Form["confirmPassword"];

    if(email.IsEmpty() || password.IsEmpty())
    {
        errorMessage = "You must specify both an email address and a password";
    }

    if(password != confirmPassword)
    {
        errorMessage = "The password and the confirmation password do not match.";
    }

    if(!EmailValidator.IsEmailAdress(email))
    {
        errorMessage = "The email you entered is not a valid email address.";
    }

    if(firstName=="" || lastName=="")
    {
        errorMessage = "You must provide both a first and last name";
    }

    if(errorMessage=="")
    {
        var db = Database.Open("Users");
        var user = db.QuerySingle("SELECT Email FROM UserProfile WHERE LOWER(Email) = LOWER(@0)", email);
        if(user==null)
        {
            WebSecurity.Logout();
            db.Execute("INSERT INTO UserProfile (Email, IPAddress, firstName, lastName) VALUES (@0, @1, @2, @3)", email, Request.UserHostAddress, firstName, lastName);

            var token = WebSecurity.CreateAccount(email, password, true);
            var hostUrl = Request.Url.GetComponents(UriComponents.SchemeAndServer, UriFormat.Unescaped);
            var confirmationUrl = hostUrl + VirtualPathUtility.ToAbsolute("~/Account/Confirm?confirmationCode=" + HttpUtility.UrlEncode(token) + "&firstName=" + firstName);

            WebMail.Send(
                    to: email,
                    subject: "Please confirm your account",
                    body: "Your confirmation code is: " + token + ". Visit <a href=\"" + confirmationUrl + "\">" + confirmationUrl + "</a> to activate your account."
                    );

            AppState["gActionMessage"] = "An email to confirm your account has been emailed to you.";
            AppState["gActionMessageDisplayed"] = "not";
            Response.Redirect("~/IntroPage.cshtml");

        }
        else
        {
            errorMessage = "That email address is already in use.";
        }
    }
}
}

@RenderPage("~/Shared/HeaderLayout.cshtml")
        <div style="color: #808080;">
            <span class="heading">Register</span>
            <span style="font-size: 3em;">________________________________________________</span></br></br></br>
        </div>
        @{
            if (errorMessage != "")
            {
                <div class="errorMessageWrapper">@errorMessage</div><br/>
            }
        }
        <div class="accInterfaceWrapper">
            <form class="accInterfaceForm" method="post" action="">
                <table class="accInterfaceTable">
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="email">Email Address:</label>
                        </td>
                        <td class="accInterfaceInputCell">
                            <input type="text" id="email" name="email" value="@email" /><br/><br/>
                        </td>
                    </tr>
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="firstName">First Name:</label>
                        </td>
                        <td class="accInterfaceInputCell">
                            <input type="text" id="firstName" name="firstName" value="@firstName" /><br/><br/>
                        </td>
                    </tr>
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="lastName">Last Name:</label>
                        </td>
                        <td class="accInterfaceInputCell">
                            <input type="text" id="lastName" name="lastName" value="@lastName" /><br/><br/>
                        </td>
                    </tr>
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="password">Create Password:</label>
                        </td>
                        <td>
                            <input type="password" id="password" name="password" /><br/><br/>
                        </td>
                    </tr>
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="confirmPassword">Confirm Password:</label>
                        </td>
                        <td>
                            <input type="password" id="confirmPassword" name="confirmPassword" /><br/><br/>
                        </td>
                    </tr>
                </table><br/><br/>
                <button type="button" class="btn" onclick="location.href='/IntroPage.cshtml'">Main Page</button><input class="btn" type="submit" value="Register" />
            </form>
        </div>
@RenderPage("~/Shared/FooterLayout.cshtml") 
```

这是**确认页面**：

```
@{

var errorMessage = "";
var confirmationToken = Request["confirmationCode"];
var firstName = Request["firstName"];

WebSecurity.Logout();
if (!confirmationToken.IsEmpty())
{
    if(WebSecurity.ConfirmAccount(confirmationToken))
    {
        AppState["gActionMessage"] = "Welcome to the POI Database, "  + firstName + "!";
        AppState["gActionMessageDisplayed"] = "not";
        Response.Redirect("~/");
    }
    else
    {
        errorMessage = "An error occurred while trying to confirm your account. " +
                       "Please try again.";
    }
}
}
@RenderPage("~/Shared/HeaderLayout.cshtml")
        <div style="color: #808080;">
            <span class="heading">Confirm Account</span>
            <span style="font-size: 3em;">________________________________________________</span></br></br></br>
        </div>
            @if (errorMessage != "")
            {
                <div class="errorMessageWrapper">@errorMessage</div><br/>
            }
@RenderPage("~/Shared/FooterLayout.cshtml") 
```

最后，**登录页面：**

```
@{
var username = "";
var user = "";
var password = "";
var errorMessage = "";
AppState["gActionMessage"] = "";
if(IsPost)
{
    username = Request.Form["username"];
    password = Request.Form["password"];

    if(username.IsEmpty() || password.IsEmpty())
    {
        errorMessage = "You must specify both a username and password.";
    }
    else
    {
        if(WebSecurity.Login(username, password, false))
        {
            var db = Database.Open("Users");
            user = db.QuerySingle("SELECT firstName FROM UserProfile WHERE LOWER(Email) = LOWER(@0)", username);

            AppState["gActionMessage"] = "Hello, " + user + "!";
            AppState["gActionMessageDisplayed"] = "not";
            Response.Redirect("~/");
        }
        else
        {
            errorMessage = "Login failed";
        }
    }
}

}

@RenderPage("~/Shared/HeaderLayout.cshtml")
        <div style="color: #808080;">
            <span class="heading">Please Log In</span>
            <span style="font-size: 3em;">________________________________________________</span></br></br></br>
        </div>
        @{
            if (errorMessage != "")
            {
                <div class="errorMessageWrapper">@errorMessage</div><br/>
            }
        }
        <div class="accInterfaceWrapper">
            <form class="accInterfaceForm" method="post" action="">
                <table class="accInterfaceTable">
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="username">Email Address:</label>
                        </td>
                        <td class="accInterfaceInputCell">
                            <input type="text" id="username" name="username" value="@username" /><br/><br/>
                        </td>
                    </tr>
                    <tr>
                        <td class="accInterfaceLabelCell">
                            <label for="password">Password:</label>
                        </td>
                        <td>
                            <input type="password" id="password" name="password" /><br/><br/>
                        </td>
                    </tr>
                </table><br/><br/>
                <button type="button" class="btn" onclick="location.href='/IntroPage.cshtml'">Main Page</button><input class="btn" type="submit" value="Log In" />
            </form>
            <a href="~/Account/Register.cshtml">Don't have a Account?</a><br/><br/>
            <a href="~/Account/ForgotPassword.cshtml">Forgot your password?</a>
        </div>
@RenderPage("~/Shared/FooterLayout.cshtml") 
```

同样，当我尝试登录时实际上会引发错误，并且在数据库中将确认设置为 true，所以我知道它们已成功注册，但没有更改登录文件中的任何内容，它仅在更改注册后才开始出错/确认文件。

很抱歉用这么多代码打你，但问题可能出在这三个页面中的任何地方。如果有人需要更多信息或其他文件，请告诉我，我会立即回复。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:39:17.087

问题出在登录屏幕上。变量 user 被定义为一个字符串。db.QuerySingle 返回一行，这是一个动态对象。即使您只选择一个字段也是如此。您可以执行以下操作

```
var rowResults = db.QuerySingle( "...");
user = rowResults.firstName; 
```

或者您可以更改该行以返回单个值。

```
user = db.QueryValue( "Select firstName..."); 
```

# php - Symfony2 树枝形式因嵌套对象而失败

> ID：12897343
> 
> 赞同：1
> 
> 时间：2012-10-15T14:04:31.877
> 
> 标签：php, symfony, twig

我有 2 个实体：用户和位置。

```
namespace mk\MyBundle\Entity;

use mk\MyBundle\Entity\Location;

class User 
{
    protected $user_id;
    protected $first_name;
    protected $last_name;
    protected $location;
} 
```

和

```
namespace mk\MyBundle\Entity;

class Location
{
    public $country_id;
    public $country_name;
    public $state_id;
    public $state_name;
    public $city_id;
    public $city_name;
} 
```

我将用户的位置作为位置对象存储在适当的变量中。

在配置文件编辑页面中，我准备了 FormType 类 UserType 的位置，使用嵌套对象调用显示位置：

```
$builder->add('location.country_id', 'country') 
```

当我将它与普通 {{ form_rest(form) }} 一起使用时，一切都很好，但是当我想直接解决这些问题时，例如：

```
{{ form_widget(form.location.country_id) }} 
```

Twig 向我抛出一个错误：MyBundle:User:profile.html.twig 中的对象“Symfony\Component\Form\FormView”的方法“位置”在第 69 行不存在

我做错了什么？提前致谢。

更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:39:40.813

它失败了，因为您正在为对象 FormView 调用方法“位置”。但是你想从你的表单中调用一个方法。

你应该试试

```
{{ form_widget(form.location.country_id) }} 
```

希望它的工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:13:02.060

也许您在此期间找到了解决方案，但让我回答这个问题以供将来参考以帮助他人。

我似乎不清楚您使用的是哪个版本的 symfony2，但我的解决方案应该适用于 Symfony 2.0 以上。

首先，包含的表单字段名称`.`在 symfony2 中是非法的。

```
The name "location.id" contains illegal characters. Names should start with a letter, digit or underscore and only contain letters, digits, numbers, underscores ("_"), hyphens ("-") and colons (":"). 
```

改为这样做：在您的 XType::buildForm(...) 函数中使用[`property_path`option](http://symfony.com/doc/master/reference/forms/types/form.html)。

```
$builder->add('this_is_a_valid_name_you_can_choose',
              'text', // yourtype
              array(
                  'property_path' => 'location.country_id',
              )); 
```

这应该可以解决问题，并且您的字段可以在 twig by 中访问`{{ form_widget(this_is_a_valid_name_you_can_choose) }}`。

对于较旧的版本，我看到有些人使用一个`path`选项，但我从来没有发现这个记录。

# delphi - SSL3_GET_RECORD：错误的版本号

> ID：12897354
> 
> 赞同：3
> 
> 时间：2012-10-15T14:04:47.527
> 
> 标签：delphi, openssl, delphi-2010, indy

我正在使用 TIdTCPClient 和 TidTCPServer 通过 SSL 将数据从客户端发送到服务器。我在服务器和客户端设置了以下代码

**强文本**服务器端

```
 IdServerIOHandlerSSLOpenSSL1.SSLOptions.Mode = sslmServer
   IdServerIOHandlerSSLOpenSSL1.SSLOptions.Method = sslvTLSv1 
```

**强文本**Cleint Side

```
 IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Mode = sslmUnassigned
   IdSSLIOHandlerSocketOpenSSL1.SSLOptions.Method = sslvTLSv1 
```

错误是错误：*** 1408F10B：SSL 例程：SSL3_GET_RECORD：服务器端的版本号错误***

当我从 Delphi IDE 执行服务器应用程序时，显示错误消息，单击 Continue 按钮后建立连接

在服务器和客户端都使用相同的 DLL 版本

```
 libeay32.dll - 0.9.8.18
     ssleay32.dll - 0.9.8.18 
```

我使用的是 Delphi 2010 版，Indy 版本是 10.5.5。

在同一系统中不会发生上述错误。它发生在客户端系统中。以上 dll 放在 Exe 文件夹中。

我在上面的代码中做错了什么或任何错误配置..？

提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T20:49:27.483

发生该错误后，您无法建立连接。这是 SSL 握手错误。OpenSSL 会在向您报告错误后关闭连接。

您正在使用一些过时的 Indy 版本。当前版本是 10.5.9。

# javascript - Javascript 在 FireFox 上不起作用

> ID：12897358
> 
> 赞同：0
> 
> 时间：2012-10-15T14:04:53.417
> 
> 标签：javascript, css

我试图让这个脚本在 FireFox 中工作，它似乎只想在 Chrome 中工作。我猜这是由于 webkit，所以我尝试将其转换为标准渐变，但它根本不起作用。脚本有什么问题？

网络套件：

```
var grad = '-webkit-gradient(linear, left top, right top, color-stop(0, transparent), color-stop(1, #' + color + '))'; 
```

标准：

```
var grad = 'linear-gradient(to left, color-stop(0, #' + color + '), color-stop(1, transparent))'; 
```

实时脚本：http: **[//jsfiddle.net/LThhd/12/](http://jsfiddle.net/LThhd/12/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:11:13.233

-moz-linear-gradient 是 Firefox 中渐变的正确名称

CSS 渐变创建的有用工具：http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:45:16.850

您需要使用`-moz`前缀使其在 Firefox 中工作。为了完全兼容浏览器，建议使用以下所有 CSS 规则（显然，根据需要替换颜色）：

```
background-color: #444444;
background-image: -webkit-gradient(linear, left top, left bottom, from(#444444), to(#999999));
background-image: -webkit-linear-gradient(top, #444444, #999999);
background-image:    -moz-linear-gradient(top, #444444, #999999);
background-image:      -o-linear-gradient(top, #444444, #999999);
background-image:         linear-gradient(to bottom, #444444, #999999); 
```

按顺序，它们针对以下浏览器：

1.  不支持渐变的旧浏览器
2.  Safari 4.*、5.0 和旧版 Chrome
3.  Chrome 10+、Safari 5.1+、iOS 5+
4.  火狐 3.6-15
5.  歌剧 11.10-12.00
6.  火狐 16+、IE10、Opera 12.50+

（来源：[http](http://css3please.com) ://css3please.com ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:10:36.133

您不必使用 -moz- 前缀 .... [http://webdesignerwall.com/tutorials/cross-browser-css-gradient](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)

# reportviewer - 报表查看器分页符

> ID：12897365
> 
> 赞同：1
> 
> 时间：2012-10-15T14:05:22.543
> 
> 标签：reportviewer, page-break

我的应用程序中有 ReportViewer 的问题。我有一个由子报告组成的主报告。有一个适合页面的子报表。但是reportviewer 会插入一个干净的页面，并且只有在这个干净的页面之后才会开始下一个子报表。我不希望reportviewer 插入干净的页面。如何解决这个问题？请帮忙。

# jquery - jquery show hide div's with a href 标签

> ID：12897367
> 
> 赞同：0
> 
> 时间：2012-10-15T14:05:24.530
> 
> 标签：jquery, html

我有一些 jquery 可以根据按下的按钮显示和隐藏新的 div。而不是按钮，我想插入我自己的文本/图像并让它们以相同的方式工作，显示和隐藏新窗口。

这是jQuery：

```
<script>
    $(document).ready(function(){

        $(".buttons").click(function () {
        var divname= this.value;
          $("#"+divname).show("slow").siblings().hide("slow");
        });

      });
</script> 
```

这是我想更改为 aa href 标记的按钮之一的代码。

```
<input type="button" id="button1" class="buttons" value="div1"></input> 
```

任何帮助将不胜感激。谢谢。皮亚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:08:52.643

您可以使用 jQuery`data()`方法 - [http://api.jquery.com/data/](http://api.jquery.com/data/) - 在锚元素（div ID）上存储任意数据，然后使用该值显示正确的 div：

```
<div id="div1">div one</div>
<div id="div2">div two</div>
<a href="#" class="abuttons" data-divid="div1">link</a>

<script>
$(document).ready(function(){
    $(".abuttons").click(function () {
        var idname= $(this).data('divid');
        $("#"+idname).show("slow").siblings().hide("slow");
    });
});
</script> 
```

如果您想使用类名而不是 ID 显示两个 div，请将类名存储在 achor 标记上，在要显示的每个 div 上设置相同的类，并在 jQuery 中使用 a`.`而不是a 来引用它`#`

```
<div id="div1" class="divclass">div one</div>
<div id="div2" class="divclass">div two</div>

<a href="#" class="abuttons" data-divclass="divclass">link</a>

<script>
$(document).ready(function(){
    $(".abuttons").click(function () {
        var classname= $(this).data('divclass');
        $("."+classname).show("slow").siblings().hide("slow");
    });
});
</script> 
```

# django - Django：使用特定过滤字段排序查询集

> ID：12897368
> 
> 赞同：0
> 
> 时间：2012-10-15T14:05:26.797
> 
> 标签：django, sorting, django-queryset, annotate

我需要对项目查询集进行排序，引入内容的过时。（内容是与 Item 类相关的多对多）。是否可以通过注释中的 pub_date 过滤内容？

我的代码适用于每个内容发布日期。我需要 annotate 函数来为“pub_date > '2012-10-10'”工作（例如）。

```
self.queryset = Item.objects.all()    
self.queryset = self.queryset.annotate(
                Count("content")).order_by("-content__count") 
```

我尝试使用 extra() 函数进行过滤，但该函数不起作用：

```
self.queryset = self.queryset.extra(select={
'content': "pub_date > '2012-10-10'"}).annotate(
Count("content")).order_by("-content__count") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:59:13.600

你可以只过滤然后注释。

```
self.queryset = Items.objetct.filter(content__pub_date__gt = '2012-10-10')
self.queryset = self.queryset.annotate(
    Count("content")).order_by("-content__count") 
```

假设您的模型看起来像这样

```
class Content(models.Model):
    pub_date = models.DateTimeField()

    def __unicode__(self):
        return "%s" % self.id

class Item(models.Model):
    content = models.ManyToManyField(Content)

    def __unicode__(self):
        return "%s" % self.id 
```

在我的测试中，我添加了 3 个内容和两个项目。id 为 1 的项目通过内容多对多与 id 为 1 的内容建立关系。id 为 2 的项目通过内容多对多与 id 为 2 和 3 的内容建立关系。

```
>>> Item.objects.filter(
        content__pub_date__gt ='2012-10-10').annotate(
        Count("content")).order_by("-content__count")
>>> [<Item: 2>, <Item: 1>] 
```

正如预期的那样。

# c# - 避免专业线程/进程数据库访问的最佳实践

> ID：12897373
> 
> 赞同：0
> 
> 时间：2012-10-15T14:05:37.050
> 
> 标签：c#, sql-server, design-patterns, linq-to-sql, multithreading

我正在开发 MVC Web 应用程序。

这意味着我正在创建视图、模型、视图模型。我使用 linq-to-sql 作为数据库提供程序，我已经实现[了自定义工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)`SQL`模式，以及看起来完美（在我的实现中）并且与直接代码完全分离的数据源、存储库和服务模式。实际上，从任何为单元测试而设计的数据库中，我都可以使用内存数据源测试我的应用程序，而不会影响数据库。

最终我遇到了一个问题：我没有针对跨线程（或跨进程，因为据我所知，[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)可以使用单个 Web 应用程序创建多个应用程序域）操作的保护。

例如，我有一个包含一些记录的表。并且每隔一段时间就会发生一个 Web 请求（在控制器内部，然后是服务，然后是存储库）在假设`TicketId`列的最大值上选择 SQL 表的行，然后在该表中插入另一行`(that column value + 1)`。

如果两个或多个线程或进程执行相同的操作，重复的值可能会出现在数据库中。前段时间，当我的 web 应用程序变小时，我使用了直接 SQL 代码和简单`UPDLOCK`的[SELECT](http://en.wikipedia.org/wiki/Select_%28SQL%29)语句，其中[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.100%29.aspx)块内部锁定了我正在修改的记录（或其他任何内容），以防止所有其他数据库客户端等到我完成。[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

对于所有这些模式，我忘记了一件事：
**我如何实际实现数据库多访问保护问题**？
没有任何直接的 SQL 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:09:49.880

> 我如何实际实施数据库多访问保护问题？

这是数据库引擎的工作。如果报告了任何问题，您的工作是确保您的应用程序正常失败。请参阅[在数据库引擎中锁定](http://msdn.microsoft.com/en-us/library/ms190615%28v=sql.105%29.aspx)。

> 例如，我有一个包含一些记录的表。并且时不时发生一个 Web 请求（在控制器内部，然后是服务，然后是存储库）选择 SQL 表的最大行 > 假设 TicketId 列，然后在该表中插入另一行（该列值 + 1 ）。

我在这里得到的印象是，考虑到您正在尝试复制它的行为，您似乎对您的数据库没有太大的信心。将您的字段设置为`auto-increment`，这应该可以解决您的问题。如果您确实*必须*实现自己的手动自动增量，那么您需要使用某种形式的锁定，因为您基本上拥有的是竞争条件，例如

```
private static object lockObject = new Object();

lock(lockObject)
{
    ... DB stuff
} 
```

对于跨进程锁定，您可能需要查看一个命名的[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex%28v=VS.90%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:16:12.853

为什么不使用单个表来表示票号并使用具有[Seriliazable 事务隔离级别](http://msdn.microsoft.com/en-us/library/ms173763.aspx)的事务？

```
int GetTicketNumber(bool shouldIncrement)
{

   if(shouldIncrement)
   {
     // use transaction with serilizable isolation level
     select and update
   }
   else
   {
     //just select
   }

} 
```

# python - 从python中的列表中获取唯一值

> ID：12897374
> 
> 赞同：1048
> 
> 时间：2012-10-15T14:05:37.353
> 
> 标签：python, list

我想从以下列表中获取唯一值：

```
['nowplaying', 'PBS', 'PBS', 'nowplaying', 'job', 'debate', 'thenandnow'] 
```

我需要的输出是：

```
['nowplaying', 'PBS', 'job', 'debate', 'thenandnow'] 
```

此代码有效：

```
output = []
for x in trends:
    if x not in output:
        output.append(x)
print(output) 
```

我应该使用更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1322
> 
> 时间：2012-10-15T14:11:06.820

首先正确声明您的列表，用逗号分隔。您可以通过将列表转换为集合来获取唯一值。

```
mylist = ['nowplaying', 'PBS', 'PBS', 'nowplaying', 'job', 'debate', 'thenandnow']
myset = set(mylist)
print(myset) 
```

如果您将其进一步用作列表，则应通过执行以下操作将其转换回列表：

```
mynewlist = list(myset) 
```

另一种可能更快的可能性是从一开始就使用集合，而不是列表。那么你的代码应该是：

```
output = set()
for x in trends:
    output.add(x)
print(output) 
```

正如已经指出的那样，集合不保持原始顺序。如果你需要，你应该寻找一个[有序的集合](http://code.activestate.com/recipes/576694/)实现（更多信息请参见[这个问题](https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set)）。

* * *

## 回答 #2

> 赞同：407
> 
> 时间：2014-12-04T23:02:17.907

为了与我将使用的类型保持一致：

```
mylist = list(set(mylist)) 
```

* * *

## 回答 #3

> 赞同：184
> 
> 时间：2016-05-11T12:49:52.457

如果我们需要保持元素的顺序，如何：

```
used = set()
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
unique = [x for x in mylist if x not in used and (used.add(x) or True)] 
```

还有一种使用`reduce`和不使用临时`used`变量的解决方案。

```
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
unique = reduce(lambda l, x: l.append(x) or l if x not in l else l, mylist, []) 
```

**更新 - 2020 年 12 月 - 也许是最好的方法！**

从 python 3.7 开始，标准[dict](https://docs.python.org/3.7/library/stdtypes.html#mapping-types-dict)保留插入顺序。

> 在 3.7 版更改: 字典顺序保证为插入顺序。这种行为是 CPython 3.6 的实现细节。

因此，这使我们能够使用`dict.from_keys`重复数据删除！

注意：感谢**@rlat**在评论中为我们提供了这种方法！

```
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
unique = list(dict.fromkeys(mylist)) 
```

就速度而言 - 对我来说，它足够快且可读性足以成为我最喜欢的新方法！

**更新 - 2019 年 3 月**

第三个解决方案，这是一个简洁的解决方案，但有点慢，因为`.index`是 O(n)。

```
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
unique = [x for i, x in enumerate(mylist) if i == mylist.index(x)] 
```

**更新 - 2016 年 10 月**

另一个解决方案`reduce`，但这次没有`.append`它，使它更易于阅读和理解。

```
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
unique = reduce(lambda l, x: l+[x] if x not in l else l, mylist, [])
#which can also be writed as:
unique = reduce(lambda l, x: l if x in l else l+[x], mylist, []) 
```

**注意：**请记住，我们得到的可读性更高，脚本性能更差。除了`dict.from_keys`特定于 python 3.7+ 的方法。

```
import timeit

setup = "mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']"

#10x to Michael for pointing out that we can get faster with set()
timeit.timeit('[x for x in mylist if x not in used and (used.add(x) or True)]', setup='used = set();'+setup)
0.2029558869980974

timeit.timeit('[x for x in mylist if x not in used and (used.append(x) or True)]', setup='used = [];'+setup)
0.28999493700030143

# 10x to rlat for suggesting this approach!   
timeit.timeit('list(dict.fromkeys(mylist))', setup=setup)
0.31227896199925453

timeit.timeit('reduce(lambda l, x: l.append(x) or l if x not in l else l, mylist, [])', setup='from functools import reduce;'+setup)
0.7149233570016804

timeit.timeit('reduce(lambda l, x: l+[x] if x not in l else l, mylist, [])', setup='from functools import reduce;'+setup)
0.7379565160008497

timeit.timeit('reduce(lambda l, x: l if x in l else l+[x], mylist, [])', setup='from functools import reduce;'+setup)
0.7400134069976048

timeit.timeit('[x for i, x in enumerate(mylist) if i == mylist.index(x)]', setup=setup)
0.9154880290006986 
```

**回答评论**

因为**@monica**提出了一个关于“这是如何工作的？”的好问题。对于每个有问题的人。我将尝试更深入地解释这是如何工作的以及这里发生了什么巫术；）

于是她先问：

> 我试图理解为什么`unique = [used.append(x) for x in mylist if x not in used]`不起作用。

嗯，它实际上在工作

```
>>> used = []
>>> mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
>>> unique = [used.append(x) for x in mylist if x not in used]
>>> print used
[u'nowplaying', u'PBS', u'job', u'debate', u'thenandnow']
>>> print unique
[None, None, None, None, None] 
```

问题是我们只是没有在变量内部得到想要的结果`unique`，而只是在`used`变量内部。这是因为在列表理解期间`.append`修改了`used`变量并返回`None`。

因此，为了将结果放入`unique`变量中，并且仍然使用与 相同的逻辑`.append(x) if x not in used`，我们需要将此`.append`调用移动到列表推导式的右侧并`x`在左侧返回。

但是如果我们太天真了，那就去吧：

```
>>> unique = [x for x in mylist if x not in used and used.append(x)]
>>> print unique
[] 
```

我们不会得到任何回报。

同样，这是因为该`.append`方法返回`None`，它在我们的逻辑表达式中给出了以下外观：

```
x not in used and None 
```

这基本上总是：

1.  评估`False`何时`x`在 中`used`，
2.  评估`None`何时`x`不在 中`used`。

在这两种情况下（`False`/ `None`），这将被视为`falsy`值，结果我们将得到一个空列表。

但是为什么这会评估为`None`when `x`is not in`used`呢？有人可能会问。

嗯，这是因为这就是 Python 的[短路](https://docs.python.org/2/library/stdtypes.html#boolean-operations-and-or-not)运算符的[工作方式](https://docs.python.org/2/reference/expressions.html#boolean-operations)。

> 该表达式`x and y`首先计算 x；如果 x 为假，则返回其值；否则，评估 y 并返回结果值。

因此，何时`x`不使用*（即当它的`True`）*下一部分或表达式将被评估*（`used.append(x)`）*并返回其值*（`None`）*。

但这就是我们想要从具有重复项的列表中获取唯一元素的目的，我们希望`.append`仅当我们第一次遇到它们时才将它们放入一个新列表中。

所以我们真的只想`used.append(x)`在`x`不在的时候评估`used`，也许如果有办法把这个`None`值变成`truthy`一个我们会没事的，对吧？

嗯，是的，这就是第二种类型的`short-circuit`运营商发挥作用的地方。

> 该表达式`x or y`首先计算 x；如果 x 为真，则返回其值；否则，评估 y 并返回结果值。

我们知道这`.append(x)`将永远是`falsy`，所以如果我们只是在`or`他旁边添加一个，我们将永远得到下一部分。这就是我们写的原因：

```
x not in used and (used.append(x) or True) 
```

所以我们可以**评估** `used.append(x)`并得到`True`结果，**只有当**表达式的第一部分*`(x not in used)`*是`True`.

在该方法的第二种方法中可以看到类似的`reduce`方式。

```
(l.append(x) or l) if x not in l else l
#similar as the above, but maybe more readable
#we return l unchanged when x is in l
#we append x to l and return l when x is not in l
l if x in l else (l.append(x) or l) 
```

我们在哪里：

1.  追加并`x`返回when不在. 由于该语句被评估并在此之后返回。`l``l``x``l``or``.append``l`
2.  进入`l`时原封不动地返回`x``l`

* * *

## 回答 #4

> 赞同：115
> 
> 时间：2012-10-15T14:11:38.977

一个 Python 列表：

```
>>> a = ['a', 'b', 'c', 'd', 'b'] 
```

要获得独特的项目，只需将其转换为集合（如果需要，您可以再次转换回列表）：

```
>>> b = set(a)
>>> print(b)
{'b', 'c', 'd', 'a'} 
```

* * *

## 回答 #5

> 赞同：104
> 
> 时间：2012-10-15T14:07:47.180

你的输出变量是什么类型的？

Python[集](https://docs.python.org/library/sets.html)是您所需要的。像这样声明输出：

```
output = set()  # initialize an empty set 
```

并且您已准备好添加元素`output.add(elem)`并确保它们是独一无二的。

警告：集合不保留列表的原始顺序。

* * *

## 回答 #6

> 赞同：66
> 
> 时间：2017-12-29T20:25:35.693

删除重复项的选项可能包括以下通用数据结构：

*   [*set*](http://mathworld.wolfram.com/Set.html) : 无序的，唯一的元素
*   [*有序集*](http://mathworld.wolfram.com/OrderedSet.html)：有序的、唯一的元素

这是一个关于在 Python 中快速获取其中任何一个的摘要。

**给定**

```
from collections import OrderedDict

seq = [u"nowplaying", u"PBS", u"PBS", u"nowplaying", u"job", u"debate", u"thenandnow"] 
```

**代码**

*选项 1* - 一组（无序）：

```
list(set(seq))
# ['thenandnow', 'PBS', 'debate', 'job', 'nowplaying'] 
```

*选项 2* - Python 没有有序集合，但这里有[一些方法](https://stackoverflow.com/questions/1653970/does-python-have-an-ordered-set)可以模仿一个（插入有序）：

```
list(OrderedDict.fromkeys(seq))
# ['nowplaying', 'PBS', 'job', 'debate', 'thenandnow'] 
```

```
list(dict.fromkeys(seq))                               # py36
# ['nowplaying', 'PBS', 'job', 'debate', 'thenandnow'] 
```

如果使用 Python 3.6+，建议使用最后一个选项。[在这篇文章](https://stackoverflow.com/a/58709878/4531270)中查看更多详细信息。

*注意：列出的元素必须是[hashable](https://stackoverflow.com/questions/14535730/what-does-hashable-mean-in-python)。请参阅此[博客文章](https://www.peterbe.com/plog/fastest-way-to-uniquify-a-list-in-python-3.6)中有关后一个示例的详细信息。此外，请参阅 R. Hettinger关于相同技术的[帖子；](https://stackoverflow.com/a/7961425/4531270)保留顺序的字典是从他的早期实现之一扩展而来的。另请参阅有关[总订购](http://mathworld.wolfram.com/TotallyOrderedSet.html)的更多信息。*

* * *

## 回答 #7

> 赞同：53
> 
> 时间：2017-07-03T20:36:06.930

维持秩序：

```
# oneliners
# slow -> . --- 14.417 seconds ---
[x for i, x in enumerate(array) if x not in array[0:i]]

# fast -> . --- 0.0378 seconds ---
[x for i, x in enumerate(array) if array.index(x) == i]

# multiple lines
# fastest -> --- 0.012 seconds ---
uniq = []
[uniq.append(x) for x in array if x not in uniq]
uniq 
```

顺序无关紧要：

```
# fastest-est -> --- 0.0035 seconds ---
list(set(array)) 
```

* * *

## 回答 #8

> 赞同：22
> 
> 时间：2018-02-02T10:51:23.320

从 List 中获取唯一元素

```
mylist = [1,2,3,4,5,6,6,7,7,8,8,9,9,10] 
```

> 使用集合中的简单逻辑 - 集合是唯一的项目列表

```
mylist=list(set(mylist))

In [0]: mylist
Out[0]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

> 使用简单逻辑

```
newList=[]
for i in mylist:
    if i not in newList:
        newList.append(i)

In [0]: mylist
Out[0]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

> 使用 pop 方法 ->pop 删除最后一个或索引的项目并将其显示给用户。[视频](https://www.youtube.com/watch?v=bSJbuO-d62I)

```
k=0
while k < len(mylist):
    if mylist[k] in mylist[k+1:]:
        mylist.pop(mylist[k])
    else:
        k=k+1

In [0]: mylist
Out[0]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

> 使用 Numpy

```
import numpy as np
np.unique(mylist)

In [0]: mylist
Out[0]: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

[参考](https://gist.github.com/saqibmujtaba/8ec0d7379be839853b15592b3ce59275)

* * *

## 回答 #9

> 赞同：17
> 
> 时间：2015-02-06T12:16:09.753

set - 独特元素的无序集合。可以将元素列表传递给 set 的构造函数。因此，传递具有重复元素的列表，我们设置唯一元素并将其转换回列表，然后获取具有唯一元素的列表。关于性能和内存开销，我无话可说，但我希望，对于小列表来说，这并不是那么重要。

```
list(set(my_not_unique_list)) 
```

简单而简短。

* * *

## 回答 #10

> 赞同：17
> 
> 时间：2015-12-20T16:38:31.933

如果您在代码中使用 numpy（对于大量数据，这可能是一个不错的选择），请查看**numpy.unique**：

```
>>> import numpy as np
>>> wordsList = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
>>> np.unique(wordsList)
array([u'PBS', u'debate', u'job', u'nowplaying', u'thenandnow'], 
      dtype='<U10') 
```

（[http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html)）

可以看到，numpy 不仅支持数值数据，字符串数组也是可以的。当然，结果是一个 numpy 数组，但这并不重要，因为它仍然表现得像一个序列：

```
>>> for word in np.unique(wordsList):
...     print word
... 
PBS
debate
job
nowplaying
thenandnow 
```

如果你真的想要一个普通的 python 列表，你可以随时调用 list()。

但是，从上面的代码片段可以看出，结果是自动排序的。如果需要保留列表顺序，请检查[numpy unique without sort 。](https://stackoverflow.com/questions/12926898/numpy-unique-without-sort)

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2015-05-01T02:20:15.060

仅使用列表压缩的相同顺序唯一列表。

```
> my_list = [1, 2, 1, 3, 2, 4, 3, 5, 4, 3, 2, 3, 1]
> unique_list = [
>    e
>    for i, e in enumerate(my_list)
>    if my_list.index(e) == i
> ]
> unique_list
[1, 2, 3, 4, 5] 
```

`enumerates`将索引`i`和元素`e`作为 a给出`tuple`。

`my_list.index`返回 的第一个索引`e`。如果第一个索引不是`i`，则当前迭代`e`不是`e`列表中的第一个。

**编辑**

我应该注意，从性能方面来说，这不是一个好方法。这*只是*一种仅使用列表压缩来实现它的方法。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2018-03-30T05:08:45.037

通过使用 Python Dictionary 的基本属性：

```
inp=[u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
d={i for i in inp}
print d 
```

输出将是：

```
set([u'nowplaying', u'job', u'debate', u'PBS', u'thenandnow']) 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2016-06-16T11:57:23.510

作为奖励，[`Counter`](https://docs.python.org/2/library/collections.html#collections.Counter)这是一种获取唯一值和每个值的计数的简单方法：

```
from collections import Counter
l = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
c = Counter(l) 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2012-10-15T14:12:00.333

首先，您提供的示例不是有效列表。

```
example_list = [u'nowplaying',u'PBS', u'PBS', u'nowplaying', u'job', u'debate',u'thenandnow'] 
```

假设如果上面是示例列表。然后，您可以使用以下配方作为 itertools 示例文档，该文档可以返回唯一值并根据您的需要保留顺序。这里的可迭代是 example_list

```
from itertools import ifilterfalse

def unique_everseen(iterable, key=None):
    "List unique elements, preserving order. Remember all elements ever seen."
    # unique_everseen('AAAABBBCCDAABBB') --> A B C D
    # unique_everseen('ABBCcAD', str.lower) --> A B C D
    seen = set()
    seen_add = seen.add
    if key is None:
        for element in ifilterfalse(seen.__contains__, iterable):
            seen_add(element)
            yield element
    else:
        for element in iterable:
            k = key(element)
            if k not in seen:
                seen_add(k)
                yield element 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2018-04-04T19:20:21.377

`set`可以帮助您从列表中过滤掉重复的元素。它适用于`str`, `int`or`tuple`元素，但是如果您的列表包含`dict`or 其他`list`元素，那么您最终会遇到`TypeError`异常。

这是处理一些（不是全部）非散列类型的通用顺序保留解决方案：

```
def unique_elements(iterable):
    seen = set()
    result = []
    for element in iterable:
        hashed = element
        if isinstance(element, dict):
            hashed = tuple(sorted(element.iteritems()))
        elif isinstance(element, list):
            hashed = tuple(element)
        if hashed not in seen:
            result.append(element)
            seen.add(hashed)
    return result 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2016-01-25T10:09:04.453

```
def get_distinct(original_list):
    distinct_list = []
    for each in original_list:
        if each not in distinct_list:
            distinct_list.append(each)
    return distinct_list 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2016-10-01T20:59:08.647

如果您想从列表中获取唯一元素并保持其原始顺序，那么您可以使用[`OrderedDict`](https://docs.python.org/3/library/collections.html#collections.OrderedDict)Python 标准库中的数据结构：

```
from collections import OrderedDict

def keep_unique(elements):
    return list(OrderedDict.fromkeys(elements).keys())

elements = [2, 1, 4, 2, 1, 1, 5, 3, 1, 1]
required_output = [2, 1, 4, 5, 3]

assert keep_unique(elements) == required_output 
```

事实上，如果你使用 Python ≥ 3.6，你可以使用 plain `dict`：

```
def keep_unique(elements):
    return list(dict.fromkeys(elements).keys()) 
```

在引入 dicts 的“紧凑”表示之后，这成为可能。[在这里](https://docs.python.org/3.6/whatsnew/3.6.html#other-language-changes)查看。尽管这“考虑了实现细节，不应依赖”。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2016-07-15T11:52:39.957

要从**您的**列表中获取唯一值，请使用以下代码：

```
trends = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
output = set(trends)
output = list(output) 
```

**重要提示：如果列表中的任何项目不是可**[散列](https://docs.python.org/2/glossary.html#term-hashable)的（例如[list](https://docs.python.org/2/tutorial/datastructures.html#more-on-lists)或[dict等](https://docs.python.org/2/tutorial/datastructures.html#dictionaries)[可变](https://docs.python.org/2/reference/datamodel.html)类型的情况）， 则上述方法将不起作用。

```
trends = [{'super':u'nowplaying'}, u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']
output = set(trends)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  TypeError: unhashable type: 'dict' 
```

这意味着您必须确保`trends`列表始终只包含可散列项，否则您必须使用更复杂的代码：

```
from copy import deepcopy

try:
    trends = [{'super':u'nowplaying'}, [u'PBS',], [u'PBS',], u'nowplaying', u'job', u'debate', u'thenandnow', {'super':u'nowplaying'}]
    output = set(trends)
    output = list(output)
except TypeError:
    trends_copy = deepcopy(trends)
    while trends_copy:
        trend = trends_copy.pop()
        if trends_copy.count(trend) == 0:
            output.append(trend)
print output 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2017-03-02T11:28:13.600

令我惊讶的是，到目前为止没有人给出直接的保单答案：

```
def unique(sequence):
    """Generate unique items from sequence in the order of first occurrence."""
    seen = set()
    for value in sequence:
        if value in seen:
            continue

        seen.add(value)

        yield value 
```

它将生成值，因此它不仅仅适用于列表，例如`unique(range(10))`. 要获取列表，只需调用`list(unique(sequence))`，如下所示：

```
>>> list(unique([u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow']))
[u'nowplaying', u'PBS', u'job', u'debate', u'thenandnow'] 
```

它要求每个项目都是可散列的，而不仅仅是可比较的，但 Python 中的大多数东西都是 O(n) 而不是 O(n^2)，因此对于长列表也可以正常工作。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2017-05-14T04:52:11.530

除了前面的答案，说你可以将你的列表转换为集合，你也可以这样做

```
mylist = [u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenadnow']
mylist = [i for i in set(mylist)] 
```

输出将是

```
[u'nowplaying', u'job', u'debate', u'PBS', u'thenadnow'] 
```

虽然订单不会被保留。

另一个更简单的答案可能是（不使用集合）

```
>>> t = [v for i,v in enumerate(mylist) if mylist.index(v) == i]
[u'nowplaying', u'PBS', u'job', u'debate', u'thenadnow'] 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2014-06-16T08:25:16.413

```
def setlist(lst=[]):
   return list(set(lst)) 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-05-31T15:17:38.137

Set 是**无序**且**唯一**元素的集合。因此，您可以使用如下设置来获取唯一列表：

```
unique_list = list(set([u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job', u'debate', u'thenandnow'])) 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-02-06T20:52:32.390

您可以使用集合。为了清楚起见，我正在解释列表和集合之间的区别。集合是唯一元素的无序集合。列表是元素的有序集合。所以，

```
 unicode_list=[u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job',u'debate', u'thenandnow']
    list_unique=list(set(unicode_list))
    print list_unique
[u'nowplaying', u'job', u'debate', u'PBS', u'thenandnow'] 
```

但是：不要使用 list/set 来命名变量。这将导致错误：EX：在上面的一个中，而不是使用列表而不是unicode_list。

```
list=[u'nowplaying', u'PBS', u'PBS', u'nowplaying', u'job',u'debate', u'thenandnow']
        list_unique=list(set(list))
        print list_unique
    list_unique=list(set(list))
TypeError: 'list' object is not callable 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-02-04T00:31:34.513

1.  在代码的开头，只需将输出列表声明为空：`output=[]`
2.  您可以使用此代码代替您的代码`trends=list(set(trends))`

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-03-02T19:21:16.480

使用 set 去重复一个列表，作为列表返回

```
def get_unique_list(lst):
        if isinstance(lst,list):
            return list(set(lst)) 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-07-15T11:14:44.410

我检查内容的唯一性但保留原始顺序的解决方案：

```
def getUnique(self):
    notunique = self.readLines()
    unique = []
    for line in notunique: # Loop over content
        append = True # Will be set to false if line matches existing line
        for existing in unique:
            if line == existing: # Line exists ? do not append and go to the next line
                append = False
                break # Already know file is unique, break loop
        if append: unique.append(line) # Line not found? add to list
    return unique 
```

编辑：通过使用字典键来检查是否存在而不是为每一行执行整个文件循环可能会更有效，我不会将我的解决方案用于大型集合。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-07-16T07:59:00.470

我知道这是一个老问题，但这是我独特的解决方案：类继承！：

```
class UniqueList(list):
    def appendunique(self,item):
        if item not in self:
            self.append(item)
            return True
        return False 
```

然后，如果您想将项目唯一地附加到列表中，您只需在 UniqueList 上调用 appendunique。因为它继承自一个列表，它基本上就像一个列表，所以你可以使用 index() 等函数。因为它返回 true 或 false，你可以找出追加成功（唯一项）还是失败（已经在列表）。

要从列表中获取唯一的项目列表，请使用 for 循环将项目附加到 UniqueList（然后复制到列表中）。

示例使用代码：

```
unique = UniqueList()

for each in [1,2,2,3,3,4]:
    if unique.appendunique(each):
        print 'Uniquely appended ' + str(each)
    else:
        print 'Already contains ' + str(each) 
```

印刷：

```
Uniquely appended 1
Uniquely appended 2
Already contains 2
Uniquely appended 3
Already contains 3
Uniquely appended 4 
```

复制到列表：

```
unique = UniqueList()

for each in [1,2,2,3,3,4]:
    unique.appendunique(each)

newlist = unique[:]
print newlist 
```

印刷：

```
[1, 2, 3, 4] 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2015-06-19T12:20:11.383

对于长数组

```
s = np.empty(len(var))

s[:] = np.nan

for  x in  set(var):

    x_positions = np.where(var==x)

    s[x_positions[0][0]]=x

sorted_var=s[~np.isnan(s)] 
```

* * *

## 回答 #29

> 赞同：-4
> 
> 时间：2015-01-06T17:07:10.350

使用以下功能：

```
def uniquefy_list(input_list):
"""
This function  takes a list as input and return a list containing only unique elements from the input list

"""
output_list=[]
for elm123 in input_list:
    in_both_lists=0
    for elm234 in output_list:
        if elm123 == elm234:
            in_both_lists=1
            break
    if in_both_lists == 0:
        output_list.append(elm123)

return output_list 
```

* * *

## 回答 #30

> 赞同：-4
> 
> 时间：2014-08-17T00:44:37.053

试试这个函数，它类似于你的代码，但它是一个动态范围。

```
def unique(a):

    k=0
    while k < len(a):
        if a[k] in a[k+1:]:
            a.pop(k)
        else:
            k=k+1

    return a 
```

# c# - 在单独的表单上预览 Crystal Report

> ID：12897380
> 
> 赞同：1
> 
> 时间：2012-10-15T14:06:17.877
> 
> 标签：c#, winforms, crystal-reports-xi

我有一个表单，允许用户选择他们想要生成的报告。他们还可以选择条件，选择打印、预览、导出等。在用户做出选择并单击“生成”按钮后，我有一个类可以创建报表对象、加载报表、数据集，然后打印或导出那个报告。我创建了一个单独的表单来预览报告。当我将报表对象传递给预览表单时，我收到“无效的报表源”。报告打印和导出都很好，我只是无法预览报告。我不想在预览表单中复制代码，我希望我可以只传递报告对象。我的代码片段如下。有什么建议么？

```
public static class CrystalReportUtilities
{
    private static ReportDocument goReport {get; set;}
    private static string gsReportName { get; set; }
    private static string gsSqlString { get; set; }
    private static object[,] goParameters { get; set; }

    public static void generateReport(parameters...)
    {
      goReport = loadReport();
...
      goReport.SetDataSource(DataTable);
...
      previewReport();

    private static void previewReport()
    {
        CrystalReportPrintPreviewForm loReportPreview = new CrystalReportPrintPreviewForm(goReport);
        loReportPreview.ShowDialog();
    }

public partial class CrystalReportPrintPreviewForm : Form
{
    private ReportDocument goReport;

    public CrystalReportPrintPreviewForm(ReportDocument poReport)
    {
        InitializeComponent();

        goReport = poReport;
    }

    private void crystalReportViewer1_Load(object sender, EventArgs e)
    {
        try
        {
            if (goReport != null)
            {
                crystalReportViewer1.ReportSource = goReport;  // Receive "Invalid Report Source"
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:54:38.663

Problem resolved. I am running on a Windows 7, 64 bit OS. I originally installed Crystal Reports for 64 bit Visual Studio 2010\. It appears that you need both, the 64 bit and 32 bit version of the runtimes, with SP4.

# html - HTML中的非标准字体是个坏主意吗？

> ID：12897384
> 
> 赞同：2
> 
> 时间：2012-10-15T14:06:30.657
> 
> 标签：html, fonts, font-face

我是一名后端开发人员，但我正在为朋友开发一个网站，如果这个问题很愚蠢，很抱歉。

我的朋友给我发了他想要的布局，现在我正在尝试将所有内容与 HTML 粘合在一起。他使用的一些字体不是“标准”字体。

在网上看，我发现这篇文章解释了如何做到这一点： [http ://www.alistapart.com/articles/cssatten](http://www.alistapart.com/articles/cssatten)

但我也发现有人说网站中的非标准字体是个坏主意，因为某些浏览器可能不支持它。

如果这真的是一个坏主意，有 Web 开发的人可以向我澄清吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:18:53.727

你的问题一点也不愚蠢。在 CSS3 发布之前，大多数浏览器不支持非标准字体。从开发人员的角度来看，正确处理它们非常困难，但现在几乎所有的浏览器都支持非标准字体，您可以非常轻松地使用它们。看看这些文章，它们将帮助您决定在您的应用程序中使用什么对您有好处：

[向网站添加非标准字体](https://stackoverflow.com/questions/107936/how-to-add-some-non-standard-font-to-a-website)

[主题：显示非标准字体](https://stackoverflow.com/questions/107936/how-to-add-some-non-standard-font-to-a-website)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:29:46.890

这不是一个坏问题，它非常有效。

那篇文章有很多有用的信息，就像那个网站的大部分内容一样。

非标准字体，和css一起使用是一件好事，但仍然面临很多问题，比如浏览器之间的兼容性和对格式的支持，事实上，要在所有浏览器中成功使用@规则的字体，你必须使用多种格式。这就是为什么像[fontsquirrel](http://www.fontsquirrel.com/)这样的网站如此有用并获得相关性的原因。

使用它们的最佳方法是使用后备方法，因此用户计算机中至少有一种字体可用。这里的问题是，大多数人只是选择了类似的字体，但并不完全等同，例如，您可能会发现类似 的规则`font-family: Futura, Ubuntu, Helvetica, Arial`，但这些字体是不同的，有些更宽，有些更清晰，等等。

所以它归结为你想要使用的设计类型、你对用户的尊重以及你想要花在设计上的时间。如果你想要一些安全的东西，使用低带宽并保证工作，那就选择经典的。如果您不介意更多带宽并且愿意进行一些试验和错误，请使用@font-face 并尝试诸如 fontsquirrel 之类的服务。如果您真的关心用户，请花时间比较字体、它们的大小和不同大小的易读性，使用诸如 fontquirrel 之类的服务和安全的后备。

再见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:25:02.373

不会。即使在解释 CSS 并呈现页面时，包含的字体（通过@font-face、样式表 rel、JS 等）未能下载/包含，也会应用回退。作为网络安全字体（如 Arial）的备用字体意味着仍将显示文本。

例如：

```
* {
   font-family: "Included Special Font", "Arial", sans-serif;
   /*            ^ Primary               ^ Fallback 1 ^ Fallback 2 */
} 
```

以下是供您参考[的网络安全字体列表。](http://w3schools.com/cssref/css_websafe_fonts.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T14:28:28.647

我认为这个问题实际上值得讨论。这一点也不傻，很多前端开发人员可能会同意这一点。我自己，我使用 costum 字体，但我主要关注标准支持的字体，例如 verdanna、arial 等。costum 字体仅用于标题和内容的标记。Verdanna、Arial、Times .. 它们都是为了让电脑上的阅读更容易而开发的，在我看来，它们仍然在我的前 10 名中使用。

这是个人意见，我同意，对于某些用途，应该使用服装字体，但是如果您选择服装字体，请查看字体的可读性。它的间距、字母的类型以及使字体可读的所有因素。重要的是，一个网站有一个目标，如果你使用朋友想要使用的字体，这个目标就会实现。设计只是额外的一层。

我建议您对此进行一些阅读，并与网页设计师聊天，但他们都会同意我的观点，即信息比外观更重要。

# c - Linux Kernel 使用 Eclipse 构建配置

> ID：12897390
> 
> 赞同：5
> 
> 时间：2012-10-15T14:06:39.033
> 
> 标签：c, eclipse, linux-kernel

我尝试使用 Eclipse 来浏览 Linux 内核源代码。

如何让 Eclipse 知道`.config`分别`#define`在 ed in 中设置为构建配置的内容`include/linux/autoconf.h`？

我在 Debian（稳定版）上使用 Eclipse 的 Juno Service Release 1（内部版本号：20120920-0800）。

有用的是项目基础上`gcc`的 ' 选项。`-include <file name>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:39:05.267

查看此过程以配置 Eclipse 以使用 Linux 内核。 [http://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source](http://wiki.eclipse.org/HowTo_use_the_CDT_to_navigate_Linux_kernel_source)

# iphone - 通过代码关闭警报视图

> ID：12897392
> 
> 赞同：2
> 
> 时间：2012-10-15T14:06:41.277
> 
> 标签：iphone, objective-c, uibutton, uialertview

我有一个警报：

```
UIAlertView *connectionError = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Connection Failed" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil]; 
```

我想知道当我在代码中遇到某个事件时如何以编程方式关闭警报视图。我知道关闭警报没有明显的呼叫，而且我看到人们直接呼叫按钮，但是，我不确定如何在警报上调用取消按钮。

这甚至是正确的方法吗？还是有更好的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:10:36.557

您可以使用`-dismissWithClickedButtonIndex:animated:`关闭警报视图的方法：

```
[connectionError dismissWithClickedButtonIndex: connectionError.cancelButtonIndex
                                      animated: YES]; 
```

这是唯一用于解除警报的公共 API，因此您应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:11:56.820

在 .h 文件中声明您的警报视图

然后调用这个函数

```
[connectionError dismissWithClickedButtonIndex:0 animated:YES]; 
```

希望能帮助到你..

# jquery-jscrollpane - jScrollPane 设置 padding-bottom 值

> ID：12897395
> 
> 赞同：4
> 
> 时间：2012-10-15T14:06:44.757
> 
> 标签：jquery-jscrollpane

出于布局目的，我需要在滚动内容的底部和容器的底部之间放置 15px 空间：`div class="scroll-pane"`.

对容器`.scroll-pane { padding-bottom:15px; }`进行样式设置对输出没有影响。进入插件 jScrollPane() 的代码，它被设置：`elem.css({'padding':0});`所以填充值​​被重置。

有没有办法为滚动容器设置一个 paddingBottom 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T14:26:40.700

CSS规则也应该起作用！

```
.scroll-pane {
  padding-bottom:15px!important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T19:51:31.857

在 jQuery 中

```
$('.scroll-pane').parent().css('padding-bottom', '15px'); 
```

应该做的伎俩

# c - 无法在 C 中打开文件

> ID：12897396
> 
> 赞同：0
> 
> 时间：2012-10-15T14:06:51.253
> 
> 标签：c, windows, file, fopen

我无法在 C 中打开文件，即使该文件存在且未被任何应用程序使用。有人能告诉我是什么导致了这个问题吗？

```
int main()
{
    FILE* oud;
    unsigned size;
    unsigned* bytes;
    char path[] = "C:\\Users\\Ruben\\Documents\\test.txt";
    errno_t error;

    if ((error  = fopen_s(&oud, path, "rb" )) == NULL)
    {
        perror(NULL);
        getchar();
        return -1;
    }

    fclose(oud);
    getchar();
    return 0;
    }
} 
```

输出是：“没有错误”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:11:21.907

[`fopen_s()`](http://msdn.microsoft.com/en-us/library/z5hh6ee9(v=vs.80).aspx)成功返回`0`，而不是`NULL`失败：

> 成功则为零；失败的错误代码。有关这些错误代码和其他错误代码的更多信息，请参见 _doserrno、errno、_sys_errlist 和 _sys_nerr。

`NULL`宏是`#define`d 到（可能），这`0`意味着如果打开文件，则`if()`在发布的代码中是：

```
if (0 == 0) 
```

这显然是真的。改成：

```
if ((error = fopen_s(&oud, path, "rb" )) != 0) 
```

# html - 自定义选择在 IE9 上不起作用

> ID：12897397
> 
> 赞同：4
> 
> 时间：2012-10-15T14:06:52.700
> 
> 标签：html, css, internet-explorer-9

我有这个在 IE9 上表现奇怪的选择。首先，应该打开 wiki 页面的链接不能仅在 IE9 浏览器上工作，第二个问题是悬停，为什么当光标越过帮助并注销时，图标会被悬停背景颜色覆盖？

```
<ul id="main">
        <li class="username" tabindex="1" >  <a>USER</a>
            <ul class="curent_buser">
                <li class="help"><a href="http://www.wikipedia.org/">Help</a></li>
                <li class="logoff"><a href="http://www.wikipedia.org/">LogOff</a></li>
            </ul>
        </li>
    </ul> 
```

CSS：

```
ul#main {
    color: gray;
    width: 120px;
    border-left: 1px solid #f2f2f2;
    border-right: 1px solid #f2f2f2;
    border-top: 1px solid #f2f2f2;
    list-style: none;
    font-size: 12px;
    letter-spacing: -1px;
    font-weight: bold;
    text-decoration: none;
    height:30px;
    background:green;
}

ul#main:hover {
    opacity: 0.7;
    text-decoration: none;
}

#main > li{
    background: url('http://cdn1.iconfinder.com/data/icons/crystalproject/24x24/actions/1downarrow1.png') 100% 0 no-repeat;
    outline:0;
    padding:10px;
}

ul#main li ul {
    display: none;
    width: 116px;
    background: transparent;
    border-top: 1px solid #eaeaea;
    padding: 2px;
    list-style: none;
    margin: 7px 0 0 -3px;
}

ul.curent_buser li a {
    color: gray;;
    cursor: pointer;
}
ul.curent_buser{
    background:lime !important;    
    }

    ul#main li ul li a {
    display: block;
    padding: 5px 0;
    position: relative;
    z-index: 5;
}

#main li:focus ul, #main li.username:active ul {
    display: block;
}

.help{
    background: url("http://cdn1.iconfinder.com/data/icons/musthave/16/Help.png") no-repeat 100% center ;
    height: 25px;
    margin-bottom: 2px;
    border-bottom: 1px solid white;
}       

.help:hover{    
background: #f4f4f4;

}

.logoff{
    background: url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/on-off.png") no-repeat  100% center ;
    height: 25px;
}

.logoff:hover{
    background: #f4f4f4 ;
    height: 25px;
}

.help a,.logoff a{
    color:gray;
    font-family: Museo700Regular,sans-serif;
    letter-spacing: 0;
    font-size: small;
}

​ 
```

**小提琴：http: [//jsfiddle.net/RwtHn/1455/](http://jsfiddle.net/RwtHn/1455/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:12:45.793

我至少可以帮助您解决图标问题。问题是你用颜色覆盖了背景。~~您可以有颜色或背景图像。不是都。您将需要在背景中有一个不同的图像，该图像基本相同但颜色不同，悬停时不要使用图像，或者悬停时不要使用颜色。~~

很抱歉，我无法对 IE 问题提供更多帮助。我真诚地讨厌 IE 这样的事情。

编辑：这是您可以按照以下评论中所述执行的操作

```
 .logoff:hover{
             background: #f4f4f4 url("http://cdn1.iconfinder.com/data/icons/cc_mono_icon_set/blacks/16x16/on-off.png");
             height: 25px;
    } 
```

感谢 ANeves 提供此信息。我也在这里学到了一些东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:39:01.983

悬停时，您将覆盖该`background`属性。由于此属性同时具有颜色和图像，因此您也将覆盖图像。

只设置颜色，然后：

```
.help:hover{    
    background-color: #f4f4f4;
}
.logoff:hover{
    background-color: #f4f4f4 ;
} 
```

[http://jsfiddle.net/RwtHn/1456/](http://jsfiddle.net/RwtHn/1456/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T20:12:02.713

好的，对于被覆盖的图标问题学分用于“ANeves”，

但您可以使用下面的 CSS 来防止额外的代码行：

```
#main > li > ul > li:hover
{
    background-color: #f4f4f4;
} 
```

* * *

对于 IE9 点击问题，只需在 CSS 下面添加：

```
#main ul:hover
{
    display: block;
} 
```

就是这样

感谢 [http://www.cssplay.co.uk/menus/cssplay-click-click.html](http://www.cssplay.co.uk/menus/cssplay-click-click.html)

# ios - AVPlayer、MPVolumeView 和 Volume HUD

> ID：12897406
> 
> 赞同：1
> 
> 时间：2012-10-15T14:07:21.987
> 
> 标签：ios, avplayer, mpvolumeview

我正在使用 AVPlayer 播放各种媒体。我重新设计了整个播放器界面，并添加了一个 MPVolumeView 来控制输出电平。它工作得很好，无论是使用滑块还是使用音量按钮（yje 输出音量已更改），但用户没有看到音量正在更改的视觉指示。使用 Apple 内置的 Video App 时，当您使用按钮更改输出音量时，有一个漂亮的 hud 指示当前音量：我怎样才能让它出现？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:32:12.767

事实上，VolumeView 似乎阻止了向系统传递通知。我不得不使用 AudioSessionAddPropertyListener 让它像这样工作

```
AudioSessionAddPropertyListener (kAudioSessionProperty_AudioRouteChange,
                                         audioRouteChangeListenerCallback,
                                         self); 
```

和回调

```
// detecting outplugg of the iPhone
void audioRouteChangeListenerCallback (void                      *inClientData,
                                   AudioSessionPropertyID    inID,
                                   UInt32                    inDataSize,
                                   const void                *inData)
{
    CFDictionaryRef routeChangeDictionary = inData;

    CFNumberRef routeChangeReasonRef =
    CFDictionaryGetValue (routeChangeDictionary,
                      CFSTR (kAudioSession_AudioRouteChangeKey_Reason));

    SInt32 routeChangeReason;

    CFNumberGetValue (routeChangeReasonRef, kCFNumberSInt32Type, &routeChangeReason);

    if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable)
    {
        // Headset is unplugged..
        [(VideoPlayerViewController*)inClientData pause];
    }
} 
```

# oauth - GetClientAccessToken 的 clientIdentifier 被 NetworkCredential 覆盖为 null

> ID：12897417
> 
> 赞同：1
> 
> 时间：2012-10-15T14:07:44.640
> 
> 标签：oauth, oauth-2.0, dotnetopenauth

我一直在尝试让`GetClientAccessToken`流程与最新版本 4.1.0（通过 nuget）一起工作，我可以控制所有三方：客户端、授权服务器和资源服务器。

我开始原型化的情况是一个 Windows 客户端应用程序（我的客户端 - 最终它将是 WinRT，但它现在只是一个单独的 MVC 4 应用程序以保持简单），以及 WebAPI 项目中的一组资源。我现在在同一个 WebAPI 项目中将部分授权服务器公开为控制器。

每次（似乎无论客户端类型如何，例如 UserAgentClient 或 WebServerClient）我都会尝试 GetClientAccessToken，当请求到达身份验证服务器时，没有 clientIdentifier 作为请求的一部分，因此请求失败并显示：

```
2012-10-15 13:40:16,333 [41   ] INFO   {Channel} Prepared outgoing AccessTokenFailedResponse (2.0) message for <response>: 
error: invalid_client
error_description: The client secret was incorrect. 
```

我已经通过源代码调试到 DNOA 并且基本上我在客户端上建立的凭据被`NetworkCredential.ApplyClientCredential`inside清除了`ClientBase.RequestAccessToken`。如果我将 clientIdentifier 修改为合理的值，我可以跟踪我的其余代码并查看正在进行的正确查找/检查，因此我相当确信身份验证服务器代码是可以的。

我的测试客户端目前看起来像这样：

```
public class AuthTestController : Controller
{
    public static AuthorizationServerDescription AuthenticationServerDescription
    {
        get
        {
            return new AuthorizationServerDescription()
            {
                TokenEndpoint = new Uri("http://api.leave-now.com/OAuth/Token"),
                AuthorizationEndpoint = new Uri("http://api.leave-now.com/OAuth/Authorise")
            };
        }
    }

    public async Task<ActionResult> Index()
    {
        var wsclient = new WebServerClient(AuthenticationServerDescription, "KieranBenton.LeaveNow.Metro", "testsecret");

        var appclient = new DotNetOpenAuth.OAuth2.UserAgentClient(AuthenticationServerDescription, "KieranBenton.LeaveNow.Metro", "testsecret");
        var cat = appclient.GetClientAccessToken(new[] { "https://api.leave-now.com/journeys/" }); 

        // Acting as the Leave Now client we have access to the users credentials anyway
        // TODO: CANNOT do this without SSL (turn off the bits in web.config on BOTH sides)
        /*var state = client.ExchangeUserCredentialForToken("kieranbenton", "password", new[] { "https://api.leave-now.com/journeys/" });

        // Attempt to talk to the APIs WITH the access token
        var resourceclient = new OAuthHttpClient(state.AccessToken);
        var response = await resourceclient.GetAsync("https://api.leave-now.com/journeys/");
        string sresponse = await response.Content.ReadAsStringAsync();*/

        // A wrong one
        /*var wresourceclient = new OAuthHttpClient("blah blah");
        var wresponse = await wresourceclient.GetAsync("https://api.leave-now.com/journeys/");
        string wsresponse = await wresponse.Content.ReadAsStringAsync();

        // And none
        var nresourceclient = new HttpClient();
        var nresponse = await nresourceclient.GetAsync("https://api.leave-now.com/journeys/");
        string nsresponse = await nresponse.Content.ReadAsStringAsync();*/

        return Content("");
    }
} 
```

我不知道如何防止这种情况，或者如果它是设计使我做错了什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:42:30.430

如`NetworkCredentialApplicator`您所见，它将从传出消息中清除 client_id 和 secret，但它会将其作为 HTTP`Authorization`标头应用。但是，`HttpWebRequest`在退出时清除该标头，并且仅当服务器以 HTTP 错误和`WWW-Authenticate`标头响应时才恢复其值。如果您问我，在第一个出站请求时抑制凭据，这对 .NET 来说是非常奇怪的行为。

因此，如果来自身份验证服务器的响应是正确的（至少是 .NET 客户端所期望的），那么请求将发出两次，然后第二次工作。否则，您可以尝试`PostParameterApplicator`改用。

# postgresql - pg_resetxlog 做什么？它是如何工作的？

> ID：12897429
> 
> 赞同：5
> 
> 时间：2012-10-15T14:08:18.037
> 
> 标签：postgresql, pg

我查看了 postgres 文档，并给出了以下概要：

```
pg_resetxlog [-f] [-n] [-ooid ] [-x xid ] [-e xid_epoch ] [-m mxid ] [-O mxoff ] [-l timelineid,fileid,seg ] datadir 
```

但是他们在文档中没有任何地方解释 datadir 是什么。是`%postgres-path%/9.0/data`还是可能`%postgres-path%/9.0/data/pgxlog`？

另外，如果我想更改我的 xlog 目录，我可以简单地移动当前`pg_xlog`目录中的项目并运行命令以指向另一个目录吗？（假设我当前的 pg_xlog 目录在`/data1/postgres/data/pg_xlog`并且我希望日志转到的目录是`/data2/pg_xlog`：）

下面的命令能实现我刚才描述的吗？

```
mv /data1/postgres/data/pg_xlog /data2/pg_xlog
pg_resetxlog /data2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T05:44:57.330

[`pg_resetxlog`](http://www.postgresql.org/docs/current/static/app-pgresetxlog.html) is a tool of last resort for getting your database running again after:

*   You deleted files you shouldn't have from `pg_xlog`;

*   You restored a file system level backup that omitted the `pg_xlog` directory due to a backup system configuration mistake (this happens more than you'd think, people think "it has log in the name so it must be unimportant; I'll leave it out of the backups").

*   File-system corruption due to a hardware fault or hard drive failure damaged your data directory; or potentially even

*   a PostgreSQL bug or operating system bug damaged the write-ahead logs (exceedingly rare).

As the manual says:

> pg_resetxlog clears the write-ahead log (WAL) [...]. This function is sometimes needed if these files have become corrupted. It should be used only as a last resort, when the server will not start due to such corruption.

**Do not run `pg_resetxlog` unless you know exactly what you are doing and why**. If you are unsure, ask on the [pgsql-general mailing list](http://archives.postgresql.org/pgsql-general/) or on [https://dba.stackexchange.com/](https://dba.stackexchange.com/).

**`pg_resetxlog` may corrupt your database**, as the documentation warns. If you have to use it, you should `REINDEX`, dump your database(s), re-initdb, and reload your databases. Do not just continue using the damaged cluster. As per the documentation:

> After running this command, it should be possible to start the server, but bear in mind that the database might contain inconsistent data due to partially-committed transactions. You should immediately dump your data, run initdb, and reload. After reload, check for inconsistencies and repair as needed.

If you simply want to move your write-ahead log directory to another location, you should:

*   Stop PostgreSQL
*   Move `pg_xlog`
*   Add a symbolic link from the old location to the new location
*   Start PostgreSQL

Or, as the [documentation says](http://www.postgresql.org/docs/current/static/wal-internals.html):

> It is advantageous if the log is located on a different disk from the main database files. This can be achieved by moving the pg_xlog directory to another location (while the server is shut down, of course) and creating a symbolic link from the original location in the main data directory to the new location.

If PostgreSQL fails to start, you've done something wrong. Do not use `pg_resetxlog` to "fix" it. Undo your changes and work out what you did wrong.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T10:35:35.207

将 pg_xlog 目录的内容移动到所需位置，例如“/home/foo/pg_xlog”

```
mv pg_xlog/* /home/foo/pg_xlog 
```

删除 pg_xlog 目录

```
rm -rf pg_xlog 
```

创建 pg_xlog 的软链接

```
ln -s /home/foo/pg_xlog pg_xlog 
```

验证链接

```
ls -lrt pg_xlog 
```

注意：pg_resetxlog 不是移动 pg_xlog 的正确工具，请阅读

[http://www.postgresql.org/docs/9.2/static/app-pgresetxlog.html](http://www.postgresql.org/docs/9.2/static/app-pgresetxlog.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T15:44:11.387

数据目录对应`data_directory`postgresql.conf文件中的条目，或者`PGDATA`环境变量，也可以用`SHOW data_directory`语句在SQL中实时查询。它不指向`pg_xlog`目录，而是指向上一层。

要更改 WAL 文件的位置，必须关闭 PG 服务器，将`pg_xlog`目录及其内容移至新位置，应创建从旧位置到新位置的符号链接，然后重新启动服务器。`pg_resetxlog`不应该用于此，因为它可能会抑制最新的事务（此工具通常用于当所有其他方法都失败时的崩溃恢复情况）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T20:58:44.870

您永远不应该手动触摸 WAL 文件，这一点非常清楚。

如果目录中有悬空文件，即子文件夹中`pg_xlog`有以文件结尾的文件需要手动清理，可以通过sql命令完成`.done*``archive_status`

```
CHECKPOINT; 
```

这会强制执行一个事务检查点，其中包括清理 WAL 段文件。

请参阅[9.3 的文档，](http://www.postgresql.org/docs/9.3/static/sql-checkpoint.html)但存在于所有当前版本的 Postgresql 中。

# java - ByteBuffer allocate 和 allocateDirect

> ID：12897430
> 
> 赞同：0
> 
> 时间：2012-10-15T14:08:19.650
> 
> 标签：java, bytebuffer

我想知道当没有可用内存时， allocateDirect 和从 ByteBuffer 分配会返回空指针还是其他？（我无法在 java 文档中找到它）。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:09:59.130

对于这两种方法，`java.lang.OutOfMemoryError`当没有可用的虚拟内存时抛出 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:16:07.307

ByteBuffer.allocateDirect() 受`-XX:MaxDirectMemorySize`HotSpot 的限制。当达到此限制时，您会收到 OutOfMemoryError。

# forms - 如何将整个文件路径插入文本框中，而不仅仅是文件名？访问 2010

> ID：12897431
> 
> 赞同：1
> 
> 时间：2012-10-15T14:08:23.653
> 
> 标签：forms, filedialog

我目前正在使用以下代码来选择文件并将其路径添加到文本框中。

```
 Dim objDialog As Object

 Set objDialog = Application.FileDialog(3)

 With objDialog
   .AllowMultiSelect = False
   .Show
   If .SelectedItems.Count = 0 Then
     MsgBox "No file selected."
   Else
     Me.FileNameTextBox = Dir(.SelectedItems(1))
   End If
 End With
 Set objDialog = Nothing 
```

如何使它插入整个文件路径，而不仅仅是文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:27:13.927

.SelectedItems(n) 已包含完整路径和文件名。如果您需要的只是将文件名与其路径分开，而不是使用 Dir 函数，您可以使用如下内容：

```
Me.FileNameTextBox = Mid$(.SelectedItems(1), InStrRev(.SelectedItems(1), "\") + 1)
Me.PathTextBox = Left$(.SelectedItems(1), InStrRev(.SelectedItems(1), "\")) 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T10:46:38.013

你需要删除`dir()`部分，EG....

```
Me.FileNameTextBox = .SelectedItems(1) 
```

# javascript - 用户脚本在执行代码技术之前等待页面加载？

> ID：12897446
> 
> 赞同：104
> 
> 时间：2012-10-15T14:09:03.283
> 
> 标签：javascript, jquery, greasemonkey, tampermonkey

我正在编写一个 Greasemonkey 用户脚本，并希望在页面完全加载完成时执行特定代码，因为它返回我想要显示的 div 计数。

问题是，这个特定页面有时需要一点时间才能加载所有内容。

我已经尝试过，文档`$(function() { });`和`$(window).load(function(){ });`包装器。但是，似乎没有一个对我有用，尽管我可能会错误地应用它们。

我能做的最好的就是使用一个`setTimeout(function() { }, 600);`可行的方法，尽管它并不总是可靠的。

在 Greasemonkey 中使用什么技术来确保在页面完成加载时执行特定代码？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-15T14:38:30.987

Greasemonkey（通常）没有 jQuery。所以常用的方法是使用

```
window.addEventListener('load', function() {
    // your code here
}, false); 
```

在您的用户脚本中

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-15T15:51:48.300

这是一个常见问题，正如您所说，等待页面加载是不够的——因为 AJAX 可以并且确实在此之后很长时间内改变了事情。

对于这些情况，有一个标准的（ish）强大的实用程序。这是[实用`waitForKeyElements()`程序](https://gist.github.com/2625891)。

像这样使用它：

```
// ==UserScript==
// @name     _Wait for delayed or AJAX page load
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require  https://gist.github.com/raw/2625891/waitForKeyElements.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a major design
    change introduced in GM 1.0.
    It restores the sandbox.
*/

waitForKeyElements ("YOUR_jQUERY_SELECTOR", actionFunction);

function actionFunction (jNode) {
    //-- DO WHAT YOU WANT TO THE TARGETED ELEMENTS HERE.
    jNode.css ("background", "yellow"); // example
} 
```

* * *

提供目标页面的确切详细信息以获取更具体的示例。

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2017-01-15T23:04:52.433

从 Greasemonkey 3.6（2015 年 11 月 20 日）开始，元数据键`@run-at`支持新值`document-idle`。只需将其放在 Greasemonkey 脚本的元数据块中：

```
// @run-at      document-idle 
```

[文档](https://wiki.greasespot.net/Metadata_Block#.40run-at)描述如下：

> 该脚本将在页面和所有资源（图像、样式表等）加载且页面脚本运行后运行。

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2017-11-21T06:41:01.977

[Brock 的回答](https://stackoverflow.com/a/12899331/823633)很好，但我想为 AJAX 问题提供另一种更现代、更优雅的解决方案。

由于他的脚本和大多数其他脚本一样，也使用`setInterval()`定期检查（300 毫秒），因此无法立即响应并且总是存在延迟。其他解决方案使用 onload 事件，这些事件通常会比您希望在动态页面上更早触发。

您可以[`MutationObserver()`](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver)用来监听 DOM 更改并在创建元素后立即响应它们

```
(new MutationObserver(check)).observe(document, {childList: true, subtree: true});

function check(changes, observer) {
    if(document.querySelector('#mySelector')) {
        observer.disconnect();
        // code
    }
} 
```

虽然由于`check()`每次 DOM 更改都会触发，但如果 DOM 经常更改或者您的条件需要很长时间来评估，这可能会很慢，因此不要使用观察`document`，而是尝试通过观察尽可能小的 DOM 子树来限制范围。

这种方法非常通用，可以应用于很多情况。要多次响应，请不要在触发时断开观察者的连接。

另一个用例是，如果您不寻找任何特定元素，而只是等待页面停止更改，则可以将其与计时器结合使用。

```
var observer = new MutationObserver(resetTimer);
var timer = setTimeout(action, 3000, observer); // wait for the page to stay still for 3 seconds
observer.observe(document, {childList: true, subtree: true});

// reset timer every time something changes
function resetTimer(changes, observer) {
    clearTimeout(timer);
    timer = setTimeout(action, 3000, observer);
}

function action(observer) {
    observer.disconnect();
    // code
} 
```

这种方法非常通用，您也可以监听属性和文本的变化。只需在选项中设置`attributes`和`characterData``true`

```
observer.observe(document, {childList: true, attributes: true, characterData: true, subtree: true}); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-10-15T14:43:12.183

包装我的脚本`$(window).load(function(){ })`对我来说从来没有失败过。

也许您的页面已经完成，但仍有一些 ajax 内容正在加载。

如果是这种情况，[Brock Adams](https://stackoverflow.com/users/331508/brock-adams)的这段代码可以帮助你：
[https ://gist.github.com/raw/2625891/waitForKeyElements.js](https://gist.github.com/raw/2625891/waitForKeyElements.js)

*我通常用它来监视回发*中出现的元素。

像这样使用它：`waitForKeyElements("elementtowaitfor", functiontocall)`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-03-28T14:21:14.013

如果要操作节点，例如获取节点的值或更改样式，可以使用此函数等待这些节点

```
const waitFor = (...selectors) => new Promise(resolve => {
    const delay = 500
    const f = () => {
        const elements = selectors.map(selector => document.querySelector(selector))
        if (elements.every(element => element != null)) {
            resolve(elements)
        } else {
            setTimeout(f, delay)
        }
    }
    f()
}) 
```

然后使用`promise.then`

```
// scripts don't manipulate nodes
waitFor('video', 'div.sbg', 'div.bbg').then(([video, loading, videoPanel])=>{
    console.log(video, loading, videoPanel)
    // scripts may manipulate these nodes
}) 
```

或使用`async&await`

```
//this semicolon is needed if none at end of previous line
;(async () => {
    // scripts don't manipulate nodes
    const [video, loading, videoPanel] = await waitFor('video','div.sbg','div.bbg')
    console.log(video, loading, video)
    // scripts may manipulate these nodes
})() 
```

这是一个示例[icourse163_enhance](https://greasyfork.org/en/scripts/40050-icourse163-enhance/code)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-02T06:01:54.270

为了检测 XHR 是否在网页中完成加载，它会触发一些功能。我从[如何使用 JavaScript 在 Chrome 的控制台中存储“XHR 完成加载”消息？](https://stackoverflow.com/questions/43282885/how-do-i-use-javascript-to-store-xhr-finished-loading-messages-in-the-console)它确实有效。

```
 //This overwrites every XHR object's open method with a new function that adds load and error listeners to the XHR request. When the request completes or errors out, the functions have access to the method and url variables that were used with the open method.
    //You can do something more useful with method and url than simply passing them into console.log if you wish.
    //https://stackoverflow.com/questions/43282885/how-do-i-use-javascript-to-store-xhr-finished-loading-messages-in-the-console
    (function() {
        var origOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url) {
            this.addEventListener('load', function() {
                console.log('XHR finished loading', method, url);
                display();
            });

            this.addEventListener('error', function() {
                console.log('XHR errored out', method, url);
            });
            origOpen.apply(this, arguments);
        };
    })();
    function display(){
        //codes to do something;
    } 
```

但是如果页面中有很多 XHR，我不知道如何过滤确定的一个 XHR。

另一种方法是 waitForKeyElements() 很好。 [https://gist.github.com/BrockA/2625891](https://gist.github.com/BrockA/2625891)
有 Greasemonkey 使用的示例。 [在同一页面上多次运行 Greasemonkey 脚本？](https://stackoverflow.com/questions/11195658/run-greasemonkey-script-on-the-same-page-multiple-times/11197969#11197969)

# php - json生成数组问题

> ID：12897450
> 
> 赞同：0
> 
> 时间：2012-10-15T14:09:16.353
> 
> 标签：php, mysql, json

我想生成一个 json 数组并将其存储在我的数据库中。我得到这些值并运行一个循环来生成。

当我对其进行编码时，我得到了 ArrayArrayArray

谁能看到我哪里出错了

```
for ($i=0; $i<=$sTotal;$i++){ 
    $layout_array .= array(array("cellID" => '"'. $_POST['cell_'.$i] .'"',"studentID" => $_POST['user_'.$i]),);
}
$layout_array .= array(array("cellID" => "null","studentID" => "null"));
$layout = json_encode($layout_array);
echo $layout; 
```

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:12:05.760

问题是您`$layout_array`是 a `String`，因为您正在使用`.=`（连接）。

代替：

```
$layout_array .= array(array("cellID" => '"'. $_POST['ce... 
```

做：

```
$layout_array[] = array(array("cellID" => '"'. $_POST['ce.... 
```

并更改下一行：

```
$layout_array .= array(array("cellID" => "null","studentID" => "null")); 
```

**顺便说一句**，为什么不使用`serialize`and`unserialize`而不是 json 编码？

**编辑：**为了您的舒适，链接到我建议的函数的 php 手册。

[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:12:28.537

您应该使用`+=`来加入您的阵列，而不是`.`.

编辑：忽略此并查看评论。这会将元素添加到数组的当前范围，您应该将其`$array[] = array(..)`用作其他答案状态。

# vba - VBA 计数 Outlook 类别

> ID：12897451
> 
> 赞同：0
> 
> 时间：2012-10-15T14:09:19.660
> 
> 标签：vba, outlook

我是一名 PHP 程序员，对 VBA 完全陌生......

在 Outlook 中，我想要一个简单的提示，显示如下内容：

```
Red Category: 5 Emails
Blue Category: 7 Emails
Yellow Category: 8 Emails 
```

我从微软那里得到这个：

```
Sub ListCategoryColors()
 Dim objNameSpace As NameSpace
 Dim objCategory As Category
 Dim strOutput As String

 ' Obtain a NameSpace object reference.
 Set objNameSpace = Application.GetNamespace("MAPI")

 ' Check if the Categories collection for the Namespace
 ' contains one or more Category objects.
 If objNameSpace.Categories.Count > 0 Then

 ' Enumerate the Categories collection, checking
 ' the value of the Color property for
 ' each Category object.
 For Each objCategory In objNameSpace.Categories

 ' Add the name of the Category object to
 ' the output string.
 strOutput = strOutput & objCategory.Name

 ' Add information about the assigned color
 ' to the output string.
 Select Case objCategory.Color
 Case OlCategoryColor.olCategoryColorNone
 strOutput = strOutput & ": No color" & vbCrLf
 Case OlCategoryColor.olCategoryColorBlack
 strOutput = strOutput & ": Black " & vbCrLf
 Case OlCategoryColor.olCategoryColorBlue
 strOutput = strOutput & ": Blue" & vbCrLf
 Case OlCategoryColor.olCategoryColorGray
 strOutput = strOutput & ": Gray" & vbCrLf
 Case OlCategoryColor.olCategoryColorGreen
 strOutput = strOutput & ": Green" & vbCrLf
 Case OlCategoryColor.olCategoryColorMaroon
 strOutput = strOutput & ": Maroon" & vbCrLf
 Case OlCategoryColor.olCategoryColorOlive
 strOutput = strOutput & ": Olive" & vbCrLf
 Case OlCategoryColor.olCategoryColorOrange
 strOutput = strOutput & ": Orange" & vbCrLf
 Case OlCategoryColor.olCategoryColorPeach
 strOutput = strOutput & ": Peach" & vbCrLf
 Case OlCategoryColor.olCategoryColorPurple
 strOutput = strOutput & ": Purple" & vbCrLf
 Case OlCategoryColor.olCategoryColorRed
 strOutput = strOutput & ": Red" & vbCrLf
 Case OlCategoryColor.olCategoryColorSteel
 strOutput = strOutput & ": Steel" & vbCrLf
 Case OlCategoryColor.olCategoryColorTeal
 strOutput = strOutput & ": Teal" & vbCrLf
 Case OlCategoryColor.olCategoryColorYellow
 strOutput = strOutput & ": Yellow" & vbCrLf
 Case Else
 strOutput = strOutput & ": Unknown" & vbCrLf
 End Select
 Next
 End If

 ' Display the output string.
 MsgBox strOutput

 ' Clean up.
 Set objCategory = Nothing
 Set objNameSpace = Nothing

End Sub 
```

但它只列出了类别及其名称。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:41:48.803

发现这在没有 VB 的情况下很容易实现。

进入

```
Category="red" 
```

进入搜索栏，显示所有红色分类的电子邮件。然后，此类别中的电子邮件总数会显示在状态栏中。

# azure - Azure 虚拟机和云服务有什么区别

> ID：12897463
> 
> 赞同：37
> 
> 时间：2012-10-15T14:10:05.790
> 
> 标签：azure

我愿意从 AWS 切换到 Azure，但是我对 Azure 虚拟机和云服务之间的区别有点困惑！我需要的是一个小型的 linux 服务器，不管公司喜欢叫它什么花哨的名字（例如 EC2），我都用它来运行用不同语言编写的不同的小型 uni 项目。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-10-15T14:16:11.830

Azure 虚拟机基本上就是它听起来的样子——您控制的 Windows 或 Linux VM 的实例。Azure 基本上只是为您提供了一个空间来托管该 VM。您控制操作系统、更新等。

Azure 云服务（Web 角色、辅助角色等）是 VM 之上的一层。Azure 控制运行您的角色的 VM 实例（O/S、更新等），而您只关心您的应用程序。对于 Web 角色，这将是 Web 应用程序（例如 ASP.NET 站点）的代码；对于工作人员角色，这将是在后台运行的服务的代码。

使用云服务，您可以将应用程序部署到您的角色实例。你真的无法控制这些实例的运行方式（你真的不在乎）——你只关心你的代码是否有效。

因此，如果您需要完全控制 VM，那么 Azure 虚拟机是您应该选择的方向。如果您正在开发应用程序并且不太关心基础架构（O/S 更新等），那么云服务（角色）是您的最佳选择。

我希望这有帮助。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-18T12:35:36.170

**Azure 虚拟机**是 IaaS（基础设施即服务）。您可以选择要安装的操作系统和其他软件配置。

对于**云服务**，Azure 提供了许多不同的云服务。云服务的一个例子是**计算机视觉**。您可以训练计算机视觉对图像进行分类和识别。然后您可以使用 REST API 进行计算机视觉（云服务）进行图像分类和识别。在这里，底层基础设施超出了您的范围。

# php - PDO 提取导致 500 内部错误

> ID：12897465
> 
> 赞同：0
> 
> 时间：2012-10-15T14:10:10.970
> 
> 标签：php, sql, pdo, odbc

当我尝试获取 PDO 查询的结果时出现错误。我已将其范围缩小到该列的内容，但我不确定它为什么会导致此问题，或者如何解决此问题。这不是典型的 PHP 错误，因为错误日志中没有任何内容。事实上，我认为它完全使 PHP 崩溃。关于问题是什么的任何想法？

注意：DB 变量是到 ODBC 的 PDO 连接。（去MSSQL）

```
$query = $Z->DB->query("SELECT TOP 1 id, ticket, typeid, issued, comment, privatecomment FROM Handheld_IncomingTickets WHERE processed is null ORDER BY issued asc");
// No error.
if (!$query->execute()) {
    $moreData = false;
    echo dump($query->errorInfo()) ." ".__FILE__." at Line: ".__LINE__;
    break;
}
// No error.
$record = $query->fetch(PDO::FETCH_ASSOC);
// ERROR! 
```

这是导致 500 错误的记录之一的注释列的内容。这只是测试数据，评论列不会在生产中转储 $_POST 变量，但我对它的重要性感到困惑。我可以清除所有看起来像这样的值，但如果我没有找出导致问题的原因，我不能确定这不会在使用有效数据时再次发生。

```
array (   'act' => 'push',   'ticket' => '35-0191',   'ticket_int' => '191',   'vehicleid' => 'null',   'plate' => '028RLS',   'platetypeid' => 'null',   'provid' => '9',   'makeid' => '1',   'typeid' => '1',   'colourid' => '1',   'year' => 'null',   'locationid' => 'null',   'permitno' => 'null',   'sempermitid' => 'null',   'tickettype' => 'null',   'issued' => '2012-10-02%2013%3A22%3A31',   'violationtypeid' => 'null',   'writer' => '17',   'fine' => 'null',   'towing' => '',   'comment' => '',   'privatecomment' => '',   'synced' => 'null', ) 
```

这是我在服务器上的事件日志中看到的错误。

```
Faulting application name: php-cgi.exe, version: 5.3.12.0, time stamp: 0x4fa94d46
Faulting module name: php5.dll, version: 5.3.12.0, time stamp: 0x4fa94db5
Exception code: 0xc0000005
Fault offset: 0x0000c3b6
Faulting process id: 0x2a0
Faulting application start time: 0x01cdaadbbdc7fb98
Faulting application path: C:\Program Files (x86)\PHP\v5.3\php-cgi.exe
Faulting module path: C:\Program Files (x86)\PHP\v5.3\php5.dll
Report Id: fbc37d92-16ce-11e2-9dcf-ca21ba90502f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:34:17.647

.17 成功了。通过 Microsoft 的 Web 安装程序提供的版本落后了，我没想到要从 php.net 安装最新版本。谢谢。

+1 哈克雷

# html - IE 8 渲染怪癖模式

> ID：12897473
> 
> 赞同：4
> 
> 时间：2012-10-15T14:10:40.457
> 
> 标签：html, internet-explorer, quirks-mode

我知道这是一个老问题，对此有很多修复。我已经应用了以下内容，但我的一些用户仍然获得了怪癖模式。以及它唯一运行 IE 8 的用户。

```
<!doctype html> 
```

和

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

看起来这还不够，页面仍然在 IE 8 中以 quirksmode 呈现。

由于这是一个 umbraco/c# 站点，源中的第一行是空的。这是因为顶部的 Master 指令。你不能在它上面移动。见图片。

![在此处输入图像描述](../Images/2c8af4c645b2efec05bf0f630faffd68.png)

这是网站上的一些代码。

```
<!doctype html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!-- Consider adding an manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="sv">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/b/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

来源是这样的。

```
<%@ Master Language="C#" AutoEventWireup="true" %>
<!doctype html>
<%@ Import Namespace="System.Web.Configuration" %>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!-- Consider adding an manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="sv"> 
```

“大师”在顶部创建空行。

安装 Google Chrome Frame 可以解决问题，但由于 citrix 环境，我们的一些用户无法完全控制安装插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:14:49.530

该页面是否在 Intranet 上？我相信 IE8 在这种情况下默认为怪癖模式。你可以设置一个组策略来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:26:48.320

查看 Henri Sivonen 的[Activating Browser Modes with Doctype](http://hsivonen.iki.fi/doctype/)页面，该页面还讨论了 IE 8/9 的特性，并且（尽管页面名称）还讨论了可能影响浏览器模式的 doctype 声明以外的因素。

# jquery - 同位素过滤

> ID：12897476
> 
> 赞同：0
> 
> 时间：2012-10-15T14:10:53.170
> 
> 标签：jquery, jquery-isotope

只是在这里发帖尝试寻求帮助！我一直在玩（http://isotope.metafizzy.co/）插件超过 5 个小时，我只是卡住了。基本上，我有两个排序功能，一个按名称，另一个按“数字” "（将标题标记为按钮）。

我的问题是，为什么如果我在每个项目上单独设置数字，例如 1-9，当它应该是第 4 个项目时，它是否将“Wolfpack”放在右侧？

每个项目都`<p class="numberv">NUMBER HERE</p>`定义了排序。

我正在使用 ：

```
number : function( $elem ) {
    return parseInt($elem.find('.numberv').text());
    } 
```

在同位素函数中对它们进行实际排序。任何帮助都会很棒。

测试页面： http: [//pmf.v5.cloudsvr.com.au/lineupnew](http://pmf.v5.cloudsvr.com.au/lineupnew)

问候，

香农

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T16:22:47.880

[您在这里](http://jsfiddle.net/desandro/JcHcc/)或[这里](http://jsfiddle.net/desandro/DQydj/)看过 David DeSandro 的演示小提琴吗？

# android - android SimpleOnGestureListener 只触发 onscroll 事件

> ID：12897480
> 
> 赞同：3
> 
> 时间：2012-10-15T14:11:12.610
> 
> 标签：android, uigesturerecognizer, onfling, android-gesture

我的布局 xml 文件是这样的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_centerHorizontal="true"
android:orientation="vertical">

<LinearLayout
    android:id="@+id/WebviewContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <WebView
        android:id="@+id/Webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout>

<LinearLayout
    android:id="@+id/BottomBtns"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <Button
        android:id="@+id/ImageButton01"
        android:layout_width="36px"
        android:layout_height="36px"
        android:layout_gravity="center_vertical"
        android:adjustViewBounds="true"
        android:background="@drawable/btn_left"
        android:onClick="ClickBtn1" />

    <Button
        android:id="@+id/ImageButton02"
        android:layout_width="36px"
        android:layout_height="36px"
        android:layout_gravity="center_vertical"
        android:adjustViewBounds="true"
        android:background="@drawable/btn_home"
        android:onClick="ClickBtn2" />

    <Button
        android:id="@+id/ImageButton03"
        android:layout_width="36px"
        android:layout_height="36px"
        android:layout_gravity="center_vertical|center_horizontal"
        android:adjustViewBounds="true"
        android:background="@drawable/btn_refresh"
        android:onClick="ClickBtn3" />

    <Button
        android:id="@+id/ImageButton04"
        android:layout_width="36px"
        android:layout_height="36px"
        android:layout_gravity="center_vertical|center_horizontal"
        android:adjustViewBounds="true"
        android:background="@drawable/btn_right"
        android:onClick="ClickBtn4" />

</LinearLayout> 
```

我的主要活动是这样的

```
....
gDetector = new GestureDetector(new Gestures(this));
    View.OnTouchListener gestureListener = new View.OnTouchListener() {
      public boolean onTouch(View v, MotionEvent event) {
        return gDetector.onTouchEvent(event);
      }
    };

@Override
  public boolean onTouchEvent(MotionEvent me) {
    return gDetector.onTouchEvent(me);
  } 
```

......

我的手势是这样的：

```
package com.news;

import android.app.Activity;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.MotionEvent;
import android.widget.Toast;

class Gestures extends SimpleOnGestureListener {

  private Activity a = null;

  final int horizontalRange = 10;

  final int verticalRange = 50;

  final int GESTURE_LEFT = 1;

  final int GESTURE_RIGHT = 2;

  final int GESTURE_INVALID = 0;

  public Gestures(Activity activity) {
    a = activity;
  }

  public Gestures() {

  }

  @Override
  public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
      float velocityY) {
    Toast.makeText(a.getApplicationContext(), "FLING", Toast.LENGTH_SHORT).show();
    return false;
  }

  @Override
  public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
      float distanceY) {
    if (distanceY<horizontalRange && distanceX>verticalRange) {
      android.webkit.WebView webView = (android.webkit.WebView)a.getWindow().getDecorView().findViewById(R.id.Webview);
      webView.goBack();
      //Toast.makeText(a.getApplicationContext(), "Left" + distanceX, Toast.LENGTH_SHORT).show();
    }
    else if(distanceY<horizontalRange && distanceX < -verticalRange) {
      android.webkit.WebView webView = (android.webkit.WebView)a.getWindow().getDecorView().findViewById(R.id.Webview);
      webView.goForward();
    }
    return false;
  }

  @Override
  public boolean onDown(MotionEvent me) {
    return true;
  }
} 
```

有一个很奇怪的情况。只触发了 onScroll 事件 ~~ onFling 事件从未触发过 ~~ 我尝试了很多方法。但它没有工作〜任何专家知道为什么？

非常感谢~~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T11:43:44.150

以防万一你没有找到答案。我面临同样的问题，我的解决方案就[在这里](https://stackoverflow.com/a/10744931/1658749)。

更改此方法并返回 true

```
@Override
  public boolean onTouchEvent(MotionEvent me) {
    gDetector.onTouchEvent(me);
    return true;
  } 
```

希望这可以帮助！！！

# oracle - 复制优化器统计信息 - Oracle 10g

> ID：12897484
> 
> 赞同：2
> 
> 时间：2012-10-15T14:11:14.467
> 
> 标签：oracle, oracle10g, statistics

我正在尝试将统计信息从一种模式复制到另一种模式。我使用以下命令，但在 all_tables 视图上的目标模式 num_rows 上保持不变。是否有任何视图可以检查验证统计数据移动的目标架构？

```
EXEC DBMS_STATS.create_stat_table('DBASCHEMA','STATS_TABLE');
EXEC DBMS_STATS.export_schema_stats('APPSCHEMA','STATS_TABLE',NULL,'DBASCHEMA');
EXEC DBMS_STATS.import_schema_stats('APPSCHEMA','STATS_TABLE',NULL,'DBASCHEMA');
EXEC DBMS_STATS.drop_stat_table('DBASCHEMA','STATS_TABLE'); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T05:31:42.703

您正在导出和导入相同的架构。如果要将统计信息从 APPSCHEMA 复制到 DBASCHEMA，这将起作用：

```
BEGIN
    DBMS_STATS.create_stat_table('DBASCHEMA','STATS_TABLE');
    DBMS_STATS.export_schema_stats('APPSCHEMA','STATS_TABLE',NULL,'DBASCHEMA');

    EXECUTE IMMEDIATE 'UPDATE DBASCHEMA.STATS_TABLE SET c5 = ''DBASCHEMA''';
    COMMIT;

    DBMS_STATS.import_schema_stats('DBASCHEMA','STATS_TABLE');
    DBMS_STATS.drop_stat_table('DBASCHEMA','STATS_TABLE');
end;
/ 
```

我将导入更改为使用 DBASCHEMA。正如 My Oracle Support 文档 1430225.1 中所解释的，中间`UPDATE`的是避免错误所必需的。`ORA-20000: no statistics are imported`

# jakarta-ee - 具有注解 javax.servlet.annotation.WebServlet 的 Class x 需要是 javax.servlet.http.HttpServlet 的派生类

> ID：12897492
> 
> 赞同：3
> 
> 时间：2012-10-15T14:11:40.350
> 
> 标签：jakarta-ee, glassfish-3, servlet-3.0

我试图重现一个仅使用 javax.servlet.Servlet 接口实现 Servlet 的 Servlet 示例。但是，它不起作用。当我尝试使用 Web 浏览器运行 servlet 时，它会显示一条错误消息：

> 请求的资源 () 不可用。

glassfish中记录的错误信息是

> [#|2012-10-15T07:00:58.703-0500|SEVERE|glassfish3.0.1|global|_ThreadID=39;_ThreadName=Thread-1;|具有注释 javax.servlet.annotation.WebServlet 的类 app01a.MyServlet 需要是 javax.servlet.http.HttpServlet 的派生类。符号：TYPE 位置：class app01a.MyServlet |#]

我正在使用 glassfish、eclipse 和 jdk1.7.0_03。

为什么会这样？

我知道实现 Servlet 的正常方式是扩展 HttpServlet 类。但是，我很好奇作者为什么这样做。

这本书的名字是“Servlet 和 JSP：Budi Kurniawan 的教程”。

下面是示例代码。

谢谢您的帮助

```
package app01a;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.Servlet;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebServlet;

/**
 * Servlet implementation class MyServlet
 */
@WebServlet("/MyServlet")
public class MyServlet implements Servlet {

    private transient ServletConfig  servletConfig;

    /**
     * Default constructor. 
     */
    public MyServlet() {
    }

    /**
     * @see Servlet#init(ServletConfig)
     */
    public void init(ServletConfig config) throws ServletException {
        this.servletConfig = servletConfig;
    }

    /**
     * @see Servlet#destroy()
     */
    public void destroy() {
    }

    /**
     * @see Servlet#getServletConfig()
     */
    public ServletConfig getServletConfig() {
        return servletConfig;
    }

    /**
     * @see Servlet#getServletInfo()
     */
    public String getServletInfo() {
        return "My Servlet";
    }

    /**
     * @see Servlet#service(ServletRequest request, ServletResponse response)
     */
    public void service(ServletRequest request, ServletResponse response) throws ServletException, IOException {
        String servletName = servletConfig.getServletName();
        response.setContentType("text/html");
        PrintWriter writer = response.getWriter();
        writer.print("<html><head></head><body>Hello from " +
                     servletName + "</body></html>");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-21T20:02:04.220

我正在阅读这本书，并且在 Jetty 上也遇到了相同的问题，并显示以下错误消息： `WARN:oeja.WebServletAnnotation:main: app01a.MyServlet is not assignable from javax.servlet.http.HttpServlet`

这是因为@WebServlet 注释只能应用于 javax.servlet.http.HttpServlet 的子类。

[Java 6 EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnafu.html)说：

> 使用@WebServlet 注解的类必须扩展 javax.servlet.http.HttpServlet 类

所以这个问题可以很容易地通过替换`implements Servlet`为`extends HttpServlet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T00:18:43.970

我可以看到您前一段时间问过这个问题，但我遇到了类似的问题。

尝试完全删除 WebServlet 并再次部署站点。您可能会收到更接近问题根源的更有用的错误消息。

我这样做了，发现我在我的一个实体类中创建了一个无效的 NamedQuery。之后我把 WebServlet 注释放回去，网站很好。

# vb.net - 如何验证我的应用程序正在运行的活动目录域？

> ID：12897494
> 
> 赞同：7
> 
> 时间：2012-10-15T14:11:46.993
> 
> 标签：vb.net, security, active-directory

我有一个 VB.Net 应用程序，它使用当前 Windows 用户进行身份验证，而不要求输入密码。它在启动之前检查该用户是否是“MYDOMAIN\ApplicationUsers”的成员。

如何检查这是否是真实域而不是使用相同名称的不同域？是否有任何证书或公钥可以在本地验证？我更喜欢离线检查，没有第三方机器或数据库等。

在 System.DirectoryServices.ActiveDirectory 命名空间中有一些 Trust an Validate 方法，但它们似乎只检查域间信任并仅使用域名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T20:18:58.637

您的问题是您使用的是字符串，而 mydomain/application 用户之类的字符串在各个域中并不是唯一的。一种可能性是使用预期域中应用程序用户组的 SID 而不是名称。然后，您可以在检查成员资格之前检查组的 SID 以确保它在运行时与预期的应用程序用户组的 sid 匹配。恶意用户更难欺骗 Sid 的域和组部分，然后是域和组名。

最终，如果您在恶意用户拥有的机器上运行代码，那么这只会提高标准，他们仍然可以绕过这个检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T14:23:39.950

我做了一些示例代码，按照 Mike 的建议检查组的 SID。您只需要将组的 SID 放入`SecurityIdentifier`类的构造函数中，即可针对当前登录的用户进行检查。

```
Private Sub DoCheck()
    Dim sid As New Security.Principal.SecurityIdentifier("S-0-0-00-0000000000-0000000000-0000000000-000"),
        result As Boolean
    result = IsUserInGroup(sid)
End Sub

Public Shared Function IsUserInGroup(sid As Security.Principal.SecurityIdentifier) As Boolean
    Dim user As UserPrincipal
    user = UserPrincipal.Current
    For Each group As Principal In user.GetGroups()
        If group.Sid.Equals(sid) Then Return True
    Next
    Return False
End Function 
```

要使代码工作，您需要导入`System.DirectoryServices.AccountManagement`：

```
Imports System.DirectoryServices.AccountManagement 
```

这个命名空间位于微软的`System.DirectoryServices.AccountManagement.dll`，我相信它从 .Net 4.0 开始可用。

# boost - 具有 Boost 依赖关系的程序无法在 Qt Creator 中编译

> ID：12897498
> 
> 赞同：0
> 
> 时间：2012-10-15T14:11:56.980
> 
> 标签：boost, mingw, qt-creator

`boost::`如果我尝试在 Qt Creator 2.5.2 中编译使用 Boost Libraries 的任何部分的程序，则会收到对命名空间中各种事物的未定义引用错误。起初我以为是因为我将静态 Boost 库与共享 Qt 库混合在一起，所以我使用`link=shared runtime-link=shared`build 选项重新编译了 Boost，但问题仍然存在。然后我开始了一个非 Qt、Plain C++ 项目，它只包含一个 main.cpp，其中包含一个稍微修改过的 Boost 测试程序：

```
// main.cpp, cin-less version of 
//     http://www.boost.org/doc/libs/1_51_0/more/getting_started/windows.html#test-your-program

#include <iostream>
#include <string>
#include <boost/regex.hpp>

int main() {

    std::string headerLines = "To: George Shmidlap\n" \
                              "From: Rita Marlowe\n" \
                              "Subject: Will Success Spoil Rock Hunter?\n" \
                              "---\n" \
                              "See subject.\n";

    boost::regex pat( "^Subject: (Re: |Aw: )*(.*)" );
    boost::smatch matches;

    std::string::iterator newLinePos = std::find(headerLines.begin(), headerLines.end(), '\n');
    std::string::iterator startPos = headerLines.begin();

    while(newLinePos != headerLines.end()) {
        if (boost::regex_match(std::string(startPos, newLinePos++), matches, pat)) {
            std::cout << "\nRegex Match: " << matches[2];
        }

        startPos = newLinePos;
        newLinePos = std::find(startPos, headerLines.end(), '\n');
    }

    char temp[3];
    std::cin.getline(temp, 2);
    return 0;
} 
```

项目文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

Debug {
    LIBS += -lboost_regex-mgw46-mt-d-1_51
}

release {
    LIBS += -lboost_regex-mgw46-mt-1_51
} 
```

从 Qt Creator 中编译上述项目，或在命令行中使用 mingw32-make，给出：

```
E:\BoostTest-483-MinGW_Debug\debug\main.o:-1: In function `ZN5boost13match_resultsIN9__gnu_cxx17__normal_iteratorIPKcSsEESaINS_9sub_matchIS5_EEEE17raise_logic_errorEv':

c:\tdm-mingw32\include\boost\regex\v4\match_results.hpp:562: error: undefined reference to `boost::throw_exception(std::exception const&)'

E:\BoostTest-483-MinGW_Debug\debug\main.o:-1: In function `ZN5boost9re_detail12perl_matcherIN9__gnu_cxx17__normal_iteratorIPKcSsEESaINS_9sub_matchIS6_EEENS_12regex_traitsIcNS_16cpp_regex_traitsIcEEEEE14construct_initERKNS_11basic_regexIcSD_EENS_15regex_constants12_match_flagsE':

c:\tdm-mingw32\include\boost\regex\v4\perl_matcher_common.hpp:55: error: undefined reference to `boost::throw_exception(std::exception const&)'

[etc...] 
```

从命令行编译 main.cpp，没有 Qt Creator 或 mingw32-make，工作得很好：

```
E:\BoostTest>g++ -s -O3 main.cpp -o main.exe -lboost_regex-mgw46-mt-1_51

E:\BoostTest>main.exe

Regex Match: Will Success Spoil Rock Hunter?

E:\BoostTest>g++ -s -O3 main.cpp -o main-dbg.exe -lboost_regex-mgw46-mt-d-1_51

E:\BoostTest>main-dbg.exe

Regex Match: Will Success Spoil Rock Hunter? 
```

经测试：

*   TDM-MinGW32 (MinGW 4.6.1)
*   我自己构建的 MinGW：
    *   具有 dwarf2 异常处理的 MinGW 4.6.3
    *   带有 SJLJ 异常处理的 MinGW 4.6.3
*   Boost Libraries 1.51.0（使用上述每个编译器构建、静态和共享库从源代码构建）
*   用于 MinGW 的 Qt Framework 4.8.3，预编译的二进制文件。
*   适用于 Windows 的 Qt Creator 2.5.2。

我已经检查了 Qmake 的 makecpecs 配置文件等，但仍然无法找出问题的根源。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T02:15:39.907

这很可能为时已晚，无法为您提供帮助，但我今天必须弄清楚这一点。我也在使用 mingw32 和 Qt 并且有相同的未定义引用。

我首先根据另一个 StackOverflow 问题通过在“某些文件”中添加以下内容来解决它：

```
namespace boost
{
    void throw_exception(std::exception const &e) { assert(false); }
} 
```

但是我实际上想抛出一个异常，所以将其更改`assert(false);`为`throw e;`. 这立即引发了编译错误：

```
error: exception handling disabled, use -fexceptions to enable 
```

...这提供了一个线索。

事实证明，诀窍是添加`CONFIG += exceptions`（以及`console`so cout/printf 等实际上做任何事情，这真的很痛苦！）到我的 qmake 文件中。我不知道这里到底发生了什么，也许大多数 Linux 发行版都在 qmake 规范文件或其他任何东西中添加了一些特殊的东西。

# c# - 修改由 application.run(form1) 创建的表单对象

> ID：12897506
> 
> 赞同：1
> 
> 时间：2012-10-15T14:12:11.563
> 
> 标签：c#

我是 C# 新手，并试图弄清楚如何从另一个类中编辑表单。表单是由默认的 VS 方法创建的，如下所示：

```
static void Main()
{
  Application.EnableVisualStyles();
  Application.SetCompatibleTextRenderingDefault(false);
  Application.Run(new Form1());
} 
```

我在 Form1.cs 文件中创建了一个方法，作为测试如何更新 Form1 中的 label1 字段。这是方法：

```
public void UpdateLabel(string state = "Changed Text")
{
  label1.Text = state;
} 
```

我遇到的问题是 Application.Run 命令不提供 Form1 类型的命名对象。所以当我想从 Program.cs 触发 UpdateLabel 方法时，像这样：

```
XXX.UpdateLabel(); 
```

我没有目标对象来访问表单。如果我手动创建表单，那么我相信这会正常工作：

```
Form1 myForm = new Form1();
myForm.UpdateLabel(); 
```

使用 Windows 窗体应用程序提供的 Application.Run(Form1)，我如何访问正在创建的窗体对象？另外，这是我应该针对此类问题采取的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:15:09.677

好吧，你可以用这种方式整合你的最后一个例子......

```
static void Main() 
{ 
  Application.EnableVisualStyles(); 
  Application.SetCompatibleTextRenderingDefault(false); 
  Form1 myForm = new Form1();
  myForm.UpdateLabel();
  Application.Run(myForm); 
} 
```

但是让我问您：为什么您的逻辑要求在 Form1 构造函数之外执行此操作？

```
public Form1()
{
    InitializeComponents();
    label1.Text = "Changed Text";
} 
```

编辑：按照下面的评论，我认为你应该做这样的事情：

```
MyApplicationCode appCode;

public Form1()
{
    InitializeComponents();
    appCode = new MyApplicationCode();

    this.Text = appCode.GetFormText();
    label1.Text = appCode.GetLabelText();
    cmdSave.Enabled = appCode.UserHasSavePermission();
    ...... // and so on for other decisions on 

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:16:48.113

您可以通过以下方式解决眼前的问题：

```
Form1 form = new Form1());

form.UpdateLabel();

Application.Run(form); 
```

至于第二个问题，这实际上取决于您最终要达到的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:40:11.920

因此，您有一些相当复杂的逻辑用于确定表单中某些控件的初始值。由于该逻辑的复杂性，您更愿意从定义中提取该代码`Form1`并将其移至另一个类。到目前为止一切都很好。

您可以创建一些其他类，`Form1` *使用*该类，并让它为`Form1`. 而不是有一些其他的类有-a `Form1`（这将是把你的代码放入的效果`Main`，`Form1`应该有那个其他的类。

实现这一点相当简单。您创建另一个类，给它一个返回字符串的实例或静态方法。 `Form1`要么调用静态方法，要么创建类的实例并调用实例方法。然后它根据该方法的结果设置标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:15:19.783

Application.Run 通常用于启动 WinForms 应用程序，直到该应用程序关闭为止。您的 Program.cs 类的什么函数应该调用 UpdateLabel？您的应用程序是否使用标签值参数从外部启动？

# matlab - 为模糊输入插入单元格类型编号时出错

> ID：12897509
> 
> 赞同：0
> 
> 时间：2012-10-15T14:12:18.677
> 
> 标签：matlab, user-interface, fuzzy

我想使系统内容模糊，所以首先我在 GUI 中制作图形系统形状。我系统的主扇区是一张表，该表的某些列必须由用户填写，其他行必须经过模糊处理后填写。然后，我单独制作了模糊系统，当我想使用命令窗口在 MATLAB 中将单元类型编号（而不是模糊输入变量）插入我的模糊系统时，出现了这个错误：

```
"??? Undefined function or method 'min' for input arguments of type 'cell'." 
```

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:30:58.623

您的问题可能与您的“模糊”应用程序无关。

从错误中，您要么显式尝试`min()`覆盖单元格数组条目，要么将`cell`输入参数传递给期望的函数`double.`

```
% example cell array of doubles (one per entry) 
N = 4; cellArray = mat2cell(randi(10, N, N), ones(N,1), ones(N,1));

% min of all
minCellArray = min([cellArray{:}]);

% min of two entries
minSubArray = min(cellArray{1}, cellArray{2}); 
```

现在将上面的内容与尝试做比较`minSubArray = min(cellArray(1), cellArray(2))`，这将产生与您得到的错误相同的错误。

总体而言，请注意`cellArray{i}`vs`cellArray(i)`赋值或传递（作为输入）到函数。

# python - SQLAlchemy 中的 BIT_COUNT

> ID：12897511
> 
> 赞同：3
> 
> 时间：2012-10-15T14:12:27.197
> 
> 标签：python, mysql, sqlalchemy

我想在 SQLAlchemy 中表示以下查询：

```
select * from table where bit_count(column & bitmask) > 5 
```

基本上我希望选择设置了一定数量的标志的任何行。但是，SQLAlchemy 似乎没有定义[BIT_COUNT()](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html#function_bit-count)函数。任何人都知道在 SQLAlchemy 中进行此查询的任何技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:27:14.333

```
>>> session.query("id", "name", "thenumber12").\
...         from_statement("SELECT id, name, 12 as "
...                 "thenumber12 FROM users where bit_count(column&bitmask)<:the_val").\
...                 params(the_val=5).all() 
```

像我想象的那样……

或者

```
>>> from sqlalchemy import create_engine
>>> engine = create_engine('sqlite:///:memory:', echo=True)
>>> engine.execute("select * from table where bit_count(column & bitmask) > 5").scalar() 
```

请记住，我在假设这是正确使用 bit_count ...

# email - 是否可以从托管域发送和接收电子邮件？

> ID：12897517
> 
> 赞同：0
> 
> 时间：2012-10-15T14:12:39.457
> 
> 标签：email, dns

我的一个朋友从 name@somedomain.com 之类的电子邮件中获得了工作机会。打开域时，可以很容易地识别出它的停放。我检查了 Who.Is，发现它是由 register.com 注册的。

[在http://www.infobyip.com/verifyemailaccount.php](http://www.infobyip.com/verifyemailaccount.php)验证电子邮件 表明该电子邮件存在。那么是否可以从托管域发送和接收电子邮件？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:19:34.820

通常，停放的网站确实意味着没有服务，但是，可以说公司没有付款，因此域已停放，但他们的所有服务仍设置为电子邮件。因为他们的服务器仍然接受域，所以有邮件通过的每一个机会。

但是 - 对于您未来的雇主没有为他们的托管支付费用的员工来说，这不是一个好兆头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:25:32.530

是的，绝对可以从托管域发送电子邮件。停车意味着它已经注册但用户没有做任何事情/很多。根据它是注册级别的公园还是主机级别的公园，域可能具有部分或全部服务，并且在通过网络访问时仍然显示为“停放”。

在许多情况下，当您向提供托管和注册的公司注册域时 - 域将显示为停放式网页 - 即使它已启动并运行并已付费。在用户上传他们的网站之前，该页面将保留（有时可能需要数年！因为优质域名的供应越来越有限，人们一旦有了一个想法，就会在数周、数月、数年的时间内发布服务）。

所有这一切......如果潜在雇主甚至没有加载信息页面而不是主机默认停放页面，那么他们很难认真对待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:15:20.833

根据 Wikipedia 的说法，“域名停放是在不将其用于电子邮件或网站等服务的情况下注册 Internet 域名，即未在该域上放置任何内容”——因此，如果一个域真正被停放，它就不能用于电子邮件。

# mongodb - 如何在我的 Mac 上部署测试 replset 时修复“EMPTYUNREACHABLE”？

> ID：12897521
> 
> 赞同：6
> 
> 时间：2012-10-15T14:12:57.833
> 
> 标签：mongodb, localhost, replication

我正在尝试使用此文档在我的 macbook pro 上部署开发/测试复制集。

[http://docs.mongodb.org/manual/tutorial/deploy-replica-set/](http://docs.mongodb.org/manual/tutorial/deploy-replica-set/)

我启动了 3 个 mongod 实例，每个实例在端口 10001、10002、10003 我使用配置文件启动 mongod。配置文件如下：

```
rs0:

dbpath = /Users/Thomas/mongodb/data/rs0/
port = 10000
logpath = /Users/Thomas/mongodb/log/rs0.log
logappend = true
replSet = rs0

rs1:

dbpath = /Users/Thomas/mongodb/data/rs1/
port = 10001
logpath = /Users/Thomas/mongodb/log/rs1.log
logappend = true
replSet = rs0

rs2:

dbpath = /Users/Thomas/mongodb/data/rs2/
port = 10002
logpath = /Users/Thomas/mongodb/log/rs2.log
logappend = true
replSet = rs0 
```

并使用以下命令启动：

```
mongod -f config/rs0.conf
mongod -f config/rs1.conf
mongod -f config/rs2.conf 
```

然后我使用 mongo: mongo localhost:10001 连接到它，但是当我使用 rs.initiate() 命令初始化 repl 集时，它失败了。

```
> rs.initiate()
{
"startupStatus" : 4,
"info" : "rs0",
"errmsg" : "all members and seeds must be reachable to initiate set",
"ok" : 0
} 
```

并通过 rs.status() 检查

```
> rs.status()
{
"startupStatus" : 4,
"errmsg" : "can't currently get local.system.replset config from self or any seed (EMPTYUNREACHABLE)",
"ok" : 0
} 
```

日志显示这是一个 EMPTYUNREACHABLE 错误。怎么解决呢？

```
***** SERVER RESTARTED *****

Mon Oct 15 22:02:31 [initandlisten] MongoDB starting : pid=568 port=10000              dbpath=/Users/Thomas/mongodb/data/rs0/ 64-bit host=bogon
Mon Oct 15 22:02:31 [initandlisten]
Mon Oct 15 22:02:31 [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
Mon Oct 15 22:02:31 [initandlisten] db version v2.2.0, pdfile version 4.5
Mon Oct 15 22:02:31 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Mon Oct 15 22:02:31 [initandlisten] build info: Darwin bs-osx-106-x86-64-1.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386 BOOST_LIB_VERSION=1_49
Mon Oct 15 22:02:31 [initandlisten] options: { config: "config/rs0.conf", dbpath: "/Users/Thomas/mongodb/data/rs0/", logappend: "true", logpath: "/Users/Thomas/mongodb/log/rs0.log", port: 10000, replSet: "rs0", rest: "true" }
Mon Oct 15 22:02:31 [initandlisten] journal dir=/Users/Thomas/mongodb/data/rs0/journal
Mon Oct 15 22:02:31 [initandlisten] recover : no journal files present, no recovery needed
Mon Oct 15 22:02:31 [websvr] admin web console waiting for connections on port 11000
Mon Oct 15 22:02:31 [initandlisten] waiting for connections on port 10000
Mon Oct 15 22:02:37 [rsStart] trying to contact bogon:10000
Mon Oct 15 22:02:43 [rsStart] couldn't connect to bogon:10000: couldn't connect to server bogon:10000
Mon Oct 15 22:02:49 [rsStart] replSet can't get local.system.replset config from self or any seed (yet)
Mon Oct 15 22:03:05 [rsStart] trying to contact bogon:10000
Mon Oct 15 22:03:11 [rsStart] couldn't connect to bogon:10000: couldn't connect to server bogon:10000
Mon Oct 15 22:03:17 [rsStart] replSet can't get local.system.replset config from self or any seed (yet)
Mon Oct 15 22:03:33 [rsStart] trying to contact bogon:10000
Mon Oct 15 22:03:39 [rsStart] couldn't connect to bogon:10000: couldn't connect to server   bogon:10000
Mon Oct 15 22:03:45 [rsStart] replSet can't get local.system.replset config from self or any seed (yet)
Mon Oct 15 22:04:01 [rsStart] trying to contact bogon:10000
Mon Oct 15 22:04:07 [rsStart] couldn't connect to bogon:10000: couldn't connect to server bogon:10000
Mon Oct 15 22:04:13 [rsStart] replSet can't get local.system.replset config from self or any seed (yet) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T14:58:20.120

尝试将 bind_ip 设置为 127.0.0.1 或将“bogon”条目添加到您的 /etc/hosts？

mongodb 似乎正在获取本地系统的主机名（），但它无法解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:35:49.167

我今天遇到了确切的问题。我能够启动 mongodb 但不能启动副本集。我不得不从 mongod.conf 文件中删除以下行

'bind_ip：“127.0.0.1”'

我还发现 mongodb 和副本集的 mongod.conf 文件是不同的，并且存储在不同的位置，可能是因为我 brew 安装了最新版本的 mongodb?。我在“/usr/local/etc/mongod.conf”找到了我的副本集配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:17:42.340

仅供参考，我相信您在 2.2.0 中遇到了这个错误：

[https://jira.mongodb.org/browse/SERVER-7367](https://jira.mongodb.org/browse/SERVER-7367)

它现在已修复并计划在 2.2.1 中发布 - 2.2.0 的修复基本上涉及确保您为您的集合使用可解析和可访问的地址，因为 2.2.0 甚至尝试通过网络访问本地实例。

# javascript - 在 jQuery Ajax .load() 方法上引发加载事件

> ID：12897522
> 
> 赞同：1
> 
> 时间：2012-10-15T14:13:01.127
> 
> 标签：javascript, jquery

我有一个应用程序，它有一个带有 DIV 的页面，当用户单击我的导航栏的一部分（包含在同一页面中）时，它会更改其内容。

所以这是我的一页应用程序中的 div

```
<div id="content">
</div> 
```

现在我使用 jQuery 方法用其他 html 文件填充这个 DIV `.load()`（输入到 .load 方法中的 HTML 文件，我已经剥离了标签等......）

这是我的 JavaScript

```
$("#content").load("views/"+ pageName + ".html", function(){
// do stuff… like load JavaScript files, etc...
}).fadeIn("fast"); 
```

这工作正常，但是`.load()`一旦加载到 DOM，使用我希望附加一个函数到页面的内容。

所以说我 .load() 使用上面的 JavaScript 从 HTML 页面中获取以下内容

```
<p id="newText"> Blah blah blah blah blah blah blah blah blah blah blah</p> 
```

我希望在加载后引发一个事件，但是我不确定我应该将它绑定到什么，比如`.live()`，`.on()`或者`.ready()`......我在想这样的事情......</p>

```
$('#newText').load(function() { 
   alert("Handler for .load() called for newText. This is in the DOM and loaded!");
}); 
```

有谁知道我应该怎么做？

*** 更新 ***

好吧，也许我需要解释一下......我从另一个开发人员那里继承了这个应用程序，我认为它是用糟糕的架构/模型构建的。无论如何，加载的页面或视图有很多隐藏的选项卡/切换内容（因此我不喜欢该架构），因此尽管加载了视图/HTML，但在首次加载时，其某些内容可能在 DOM 中不可用。这就是为什么我希望在使用 jQuery Ajax .load() 的基础上检测何时将某些内容加载到 DOM 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:23:27.103

使用本机[.load()](http://api.jquery.com/load/)回调：

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

或者[.ajaxStop()](http://api.jquery.com/ajaxStop/)注册一个处理程序，以便在所有 Ajax 请求完成时调用。

```
$('#result').ajaxStop(function() {
    alert('Triggered ajaxStop handler.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:37:34.887

您可以[`load`](http://api.jquery.com/load/)将加载完成后将执行的函数传递给该函数。

> 如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

# java - 荣格用值着色顶点

> ID：12897525
> 
> 赞同：8
> 
> 时间：2012-10-15T14:13:19.037
> 
> 标签：java, jung, vertex, edges

我现在被 Java 库 Jung 困住了。

我显示顶点和边，只是我找不到任何顶点着色函数，我需要顶点值而不是鼠标。

```
import edu.uci.ics.jung.algorithms.layout.FRLayout;
import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.visualization.BasicVisualizationServer;
import edu.uci.ics.jung.visualization.decorators.PickableVertexPaintTransformer;
import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;
import edu.uci.ics.jung.visualization.renderers.DefaultVertexLabelRenderer;
import edu.uci.ics.jung.visualization.renderers.Renderer.VertexLabel.Position;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JFrame;

import org.apache.commons.collections15.Transformer;
import org.apache.commons.collections15.functors.ConstantTransformer;

public class Design {
     public Graph<String, Integer> g;
    public Design() {     

         this.g = ProjectTools.readNet("SmallTown.net");
    }

    public static <Paint> void main(String[] args) {
        Design sgv = new Design(); 
        Layout<Integer, String> layout = new FRLayout(sgv.g);
        layout.setSize(new Dimension(800,800));  
        BasicVisualizationServer<Integer, String> vv =
            new BasicVisualizationServer<Integer, String>(layout);

        Transformer<Integer,Paint> vertexPaint = new Transformer<Integer,Paint>() {
            public Paint transform(Integer i) {
                return (Paint) Color.GREEN;
            }
        };  

        vv.setPreferredSize(new Dimension(850,850));
        vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.green));
        vv.getRenderContext().setEdgeDrawPaintTransformer(new ConstantTransformer(Color.white));
        vv.getRenderContext().setEdgeStrokeTransformer(new ConstantTransformer(new BasicStroke(2.5f)));

        vv.getRenderContext().setVertexFillPaintTransformer((Transformer<Integer, java.awt.Paint>) vertexPaint);
        vv.getRenderContext().setVertexFillPaintTransformer(new PickableVertexPaintTransformer<Integer>(vv.getPickedVertexState(), Color.green, Color.yellow));

        vv.setBackground(Color.gray);
        vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Integer>());
        vv.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);

        JFrame frame = new JFrame("Projet Algo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(vv); 
        frame.pack();
        frame.setVisible(true);       
    }
} 
```

我的渲染： ![顶点和边](../Images/5dc6506a3aec7755f9018f2c8038e459.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:53:48.597

我可以看到两个可能的问题；你打`setVertexFillPaintTransformer`了两次电话，`BasicVisualizationServer`似乎不喜欢`DefaultModalGraphMouse`。

试试这个版本：

```
import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Paint;

import javax.swing.JFrame;

import org.apache.commons.collections15.Transformer;
import org.apache.commons.collections15.functors.ConstantTransformer;

import edu.uci.ics.jung.algorithms.layout.FRLayout;
import edu.uci.ics.jung.algorithms.layout.Layout;
import edu.uci.ics.jung.graph.Graph;
import edu.uci.ics.jung.visualization.VisualizationViewer;
import edu.uci.ics.jung.visualization.control.DefaultModalGraphMouse;
import edu.uci.ics.jung.visualization.decorators.ToStringLabeller;
import edu.uci.ics.jung.visualization.picking.PickedInfo;
import edu.uci.ics.jung.visualization.renderers.DefaultVertexLabelRenderer;
import edu.uci.ics.jung.visualization.renderers.Renderer.VertexLabel.Position;

public class Design {
     public Graph<Integer, String> g;
    public Design() {     

         this.g = ProjectTools.readNet("SmallTown.net");
    }

    private static class VertexPaintTransformer implements Transformer<Integer,Paint> {

        private final PickedInfo<Integer> pi;

        VertexPaintTransformer ( PickedInfo<Integer> pi ) { 
            super();
            if (pi == null)
                throw new IllegalArgumentException("PickedInfo instance must be non-null");
            this.pi = pi;
        }

        @Override
        public Paint transform(Integer i) {
            Color p = null;
            //Edit here to set the colours as reqired by your solution
            if ( i % 2 == 0)
                p = Color.GREEN;
            else
                p =  Color.RED;
            //Remove if a selected colour is not required
            if ( pi.isPicked(i)){
                p = Color.yellow;
            }
            return p;
        }
    }

    public static <Paint> void main(String[] args) {
        Design sgv = new Design(); 
        Layout<Integer, String> layout = new FRLayout(sgv.g);
        layout.setSize(new Dimension(800,800));  
        VisualizationViewer<Integer, String> vv = new VisualizationViewer<Integer, String>(layout);

        Transformer<Integer,Paint> vertexPaint = new Transformer<Integer,Paint>() {

            @Override
            public Paint transform(Integer i) {
                if ( i % 2 == 0)
                    return (Paint) Color.GREEN;
                else
                    return  (Paint) Color.RED;
            }
        };  

        vv.setPreferredSize(new Dimension(850,850));
        vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.green));
        vv.getRenderContext().setEdgeDrawPaintTransformer(new ConstantTransformer(Color.white));
        vv.getRenderContext().setEdgeStrokeTransformer(new ConstantTransformer(new BasicStroke(2.5f)));

        vv.getRenderContext().setVertexFillPaintTransformer(new VertexPaintTransformer(vv.getPickedVertexState()));

        DefaultModalGraphMouse graphMouse = new DefaultModalGraphMouse();
        graphMouse.setMode(edu.uci.ics.jung.visualization.control.ModalGraphMouse.Mode.PICKING);
        vv.setGraphMouse(graphMouse);

        vv.setBackground(Color.gray);
        vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller<Integer>());
        vv.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);

        JFrame frame = new JFrame("Projet Algo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().add(vv); 
        frame.pack();
        frame.setVisible(true);       
    }
} 
```

我已经用支持选择`Transformer`的新版本替换了你，删除了第二次使用并将你从 a切换到，所以我可以使用pick`VertexPaintTransformer``setVertexFillPaintTransformer``BasicVisualizationServer``VisualizationViewer``GraphMouse`

![在此处输入图像描述](../Images/826dca7ab666639a6726eb049eaa822a.png)

我不得不嘲笑你的`ProjectTools#readNet()`方法，但我希望你能看到奇数、偶数和选定的颜色。

您现在可以`VertexPaintTransformer#transform()`根据需要进行修改

# javascript - jquerymobile如何绑定和取消绑定链接？

> ID：12897527
> 
> 赞同：0
> 
> 时间：2012-10-15T14:13:23.110
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

在我的 mobilejquery 项目中，我需要取消绑定链接（hrefs），并将它们绑定一个点，为此，我使用以下代码：

```
$(document).bind('pageinit', function () {

    $('a[href="#"], a.disabled').bind('click',function (e) {
        e.preventDefault();    //sets all dynamic href to prevents wrong url
    } )
}); 
```

但根本不起作用......我的代码有什么问题吗？

附加问题..

我不想在导航器中显示 url 路径.. 有没有办法让 url 路径不显示？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T18:11:28.513

您是否尝试过使用[unbind()](http://api.jquery.com/unbind/)方法？

```
$('a[href="#"], a.disabled').unbind("click").bind('click',function (e) {
   e.preventDefault();    //sets all dynamic href to prevents wrong url
} ) 
```

# azure - 如何检测 Azure 角色中节点之间的时钟偏差？

> ID：12897529
> 
> 赞同：5
> 
> 时间：2012-10-15T14:13:34.430
> 
> 标签：azure, p2p, azure-storage, azure-web-roles, azure-worker-roles

我有一个时间敏感的操作，需要注意其他计算机之间的时钟偏差，和/或防止这样的事情。如何检测或防止时钟偏差？

就我而言，我正在向 Azure Blob 写入压缩的日期时间戳。如果不同的节点会以不同的方式解释该日期时间戳（因为它可能发生在闰日或闰秒），那将是灾难性的

* * *

**更多信息**

我正在尝试检测本地节点当前时间的时钟偏差。

每个节点都会将时间敏感信息写入 Blob/Table。如果时间戳早于 X，则会发生某些操作。如果时间不同步，数据可能会丢失或损坏。

**可能的解决方案**

也许我可以让每个节点定期将其当前日期写入 blob 存储（32 字节），然后定期查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:35:45.633

有一些 .NET NTP 客户端 API 可以告诉您本地节点时间和 NTP 时间服务器上的时间之间的偏差。例如：

*   Rebex（请参阅[“确定本地时间和时间服务器之间的时差”](http://www.rebex.net/support/tutorial/time/default.aspx)）
*   [组件空间](http://www.componentspace.com/products/InternetTime.aspx)
*   [ActiveSocket 工具包](http://www.activexperts.com/activsocket/howto/ntp/vcnet/)

您可以使用 NTP 客户端将本地时间和偏差存储在您的 blob 中。当您在不同节点上读取 blob 时，您可以计算该节点的本地时间和偏差，并将其与 blob 的存储时间和偏差进行比较。

# iphone - 从 UITableView 中删除一行会导致崩溃

> ID：12897530
> 
> 赞同：1
> 
> 时间：2012-10-15T14:13:41.033
> 
> 标签：iphone, objective-c

以下情况：我想从我的 UITableView 中删除一行，但这总是崩溃...

```
@property (nonatomic,retain) NSMutableArray *daten;

@synthesize daten; 
```

然后在我的 viewDidLoad 我填充我的数组：

```
-(NSMutableArray *) daten{
if (!daten) {
    self.daten = [[NSMutableArray alloc] init];
}

@try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

    }

    const char *sql = "SELECT * FROM  Daten";
    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
    }else{

        while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
            Daten * infos = [[Daten alloc] init];
            infos.download = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,1)];
            infos.upload = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
            infos.ping = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,3)];
            infos.comment = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,4)];
            infos.date = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,5)];
            infos.type = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,6)];
            infos.lati = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,7)];
            infos.longi = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,8)];

            [daten addObject:infos];
        }
    }
}
@catch (NSException *exception) {
    NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
}
@finally {
    sqlite3_finalize(sqlStatement);
    sqlite3_close(db);

    return daten;
}
} 
```

如果我想删除一行：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source
    //[self.daten removeAllObjects];
    NSString *selectedCategory = [self.daten objectAtIndex:indexPath.row];
    NSLog(@"there are %d objects in the array", [self.daten count]);
    [self.daten removeObjectAtIndex:indexPath.row]; //we assume, that mySourceArray is a NSMutableArray we use as our data source
    NSLog(@"there are %d objects in the array", [self.daten count]);

    [self.tableView beginUpdates];

    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    [self.tableView endUpdates];

....} 
```

它崩溃了，因为我的数组计数是在删除之前和之后！但我不知道为什么...

我的 NumberOfRowsInSection：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

// Return the number of rows in the section.
return [self.daten count];

} 
```

这是例外：

```
2012-10-15 16:45:13.778 Speedcheck[5297:907] *** Assertion failure in -[UITableView         _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-2372/UITableView.m:1070 
```

2012-10-15 16:45:13.779 Speedcheck [5297:907] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。现有节中包含的行数更新后 (26) 必须等于更新前该节中包含的行数 (26)，加上或减去从该节插入或删除的行数（0 插入，1 删除），再加上或减去移入或移出该部分的行数（0移入，0移出）。***第一掷调用堆栈：（0x3adcf3e7 0x35934963 0x3adcf29d 0x390c67b3 0x36569ba1 0x82311 0x366fefe1 0x3662003f 0x3661fff3 0x3661ffcd 0x3661f883 0x3662003f 0x3661fff3 0x3661ffcd 0x3661f883 0x3661fd71 0x365485c1 0x365358a9 0x365351b7 0x3ac025f7 0x3ac02227 0x3ada43e7 0x3ada438b 0x3ada320f 0x3ad1623d 0x3ad160c9 0x3ac0133b 0x36589289 0x51d33 0x34984b20）的libc ++ abi.dylib：终止叫做抛出一个异常

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:56:16.290

看来问题是你的`-(NSMutableArray *) daten`方法。

看起来你想进行惰性初始化，但实际上，每当调用此方法时，都会再次重构数组。因此，您的删除仅在下次访问数组时才有效，此时数组再次被填满（甚至看起来它应该不断增长）。

你可能想要类似的东西

```
-(NSMutableArray *) daten{
   if (daten)
      return daten;

   self.daten = [[NSMutableArray alloc] init];

   // ... same setup as before

} 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:44:13.450

我不知道它是否有帮助，因为这对我来说没有意义，但是`[self.daten removeObjectAtIndex:indexPath.row];`在调用之后将`[self.tableView beginUpdates];`结果报告给我们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:59:11.123

从 UITableView 中删除单元格的最简单方法是从数据数组中删除对象。

只需执行以下操作：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // If row is deleted, remove it from the list.
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        NSInteger rowNumber = indexPath.row;

        [self.daten removeObjectAtIndex:rowNumber];

        [tableView reloadData];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:59:40.877

你几乎拥有它。您真正想做的就是在检查编辑样式后立即输入这一行：

```
if (editingStyle == UITableViewCellEditingStyleDelete) {

[self.tableView beginUpdates]; 
```

这是因为您希望模型更改发生在 beginUpdates 块中，否则会出现不一致。

# spring - 使用 Spring LDAP 的多租户

> ID：12897531
> 
> 赞同：1
> 
> 时间：2012-10-15T14:13:44.700
> 
> 标签：spring, spring-security, spring-ldap, multi-tenant

我正在开发基于 Spring 的多租户应用程序。我指的是一篇文章@ [http://www.ibm.com/developerworks/library/j-saas/index.html](http://www.ibm.com/developerworks/library/j-saas/index.html)

它展示了如何使用 Spring Security + LDAP 实现多租户应用程序。但是好像那篇文章是2008年写的，适用于Spring Security 2.0.1。而我使用的是最新版本的 Spring Security (3.1.3)。

在最新版本中，我无法找到`SpringSecurityContextSource`课程。

关于如何实现相同功能的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:13:13.777

我刚刚删除了 SpringSecurityContextSource 的引用。应用程序仍按预期工作。

# javascript - JavaScript For 循环，需要特定值

> ID：12897536
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:14:11.253
> 
> 标签：javascript, arrays, loops, for-loop

我需要一个双循环来产生一系列的值。这是为我正在尝试制作的迷宫生成程序（使用 DFS 方法）寻找相邻单元格的一部分。这是一些伪代码：

```
var values = [];
for (...) {
    for (...) {
        values.push([i, j]);
    }
} 
```

循环运行后，“值”应该是`[[0, 1], [0, -1], [1, 0], [-1, 0]]`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:27:35.523

```
for (var i = -1; i < 2; i++) {
    for (var j = -1; j < 2; j++) {
        if (Math.abs(i) + Math.abs(j) == 1)
        values.push([i, j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:30:39.013

好。你的确切结果可以这样实现：

```
var seed_values = [1, -1, 0, 0];
var values = [];

for (var i = 0; i < 4; i++) {
    values.push([seed_values[i], seed_values[(i+2)%4]]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:45:41.093

您的数组中没有真正的结构，因此循环只会使其过于复杂。使用您已有的数组文字。

如果是`[[0, 1], [1, 0], [0, -1], [-1, 0]]`，这可以帮助您：

```
for (var values=[], i=0; i<Math.PI*2; i+=Math.PI/2)
    values.push([Math.cos(i), Math.sin(i)]); 
```

…但不幸的是，它不能计算精确的零点，只能计算非常接近的值 - 你也必须`Math.round`.

对于你的数组和嵌套循环结构，我只能想到

```
var values = [];
for (var i=0; i<2; i++) {
    for (var j=1; j>=-1; j-=2, i*=-1) {
        values.push([i, +!i && j]);
    }
} 
```

丑陋，不是吗？但它确实运行了两个嵌套循环，每个循环两次:-)

# c# - 在 Orchard 中更新 ContentItem 的正确方法是什么？

> ID：12897537
> 
> 赞同：5
> 
> 时间：2012-10-15T14:14:12.637
> 
> 标签：c#, asp.net, .net, asp.net-mvc, orchardcms

我正在尝试使用以下代码更新特定部分：

```
var nationalPart = _contentManager.Get<NationalPart>(Id);      
nationalPart.Name = part.Name; 
```

我已经这样做了。但现在它不起作用。即使我`contentManager.Flush()`明确地打电话，但仍然没有运气。谁能帮我这个？提前致谢。

**编辑**：我发现我的问题来自哪里！当我发出更新 contentPart 的 JSON 请求时。内存中的版本正在更新，但它没有将结果反映到 db。现在我们离答案更近了一步。但是是什么阻止了会话更新 db？

**编辑2：**

这是我的处理程序的代码：

```
 public NationalPartHandler(IRepository<NationalPartRecord> repository)
        {
            Filters.Add(StorageFilter.For(repository));
        } 
```

这是控制器动作的代码：

```
 [GridAction(EnableCustomBinding = true)]
    public JsonResult UpdateNational(NationalViewModel Model, GridCommand Command)
    {
         if (!ModelState.IsValid)
            return new JsonResult { Data = "error" };
        var NationalPart = _contentmanager.Get(Model.Id).As<NationalPart>();
        NationalPart.Record = new NationalPartRecord();
        NationalPart.Record.MapFrom<NationalPartRecord, NationalViewModel>(Model);
        _soccerService.UpdateNational(NationalPart);         
        return NationalsListJson(Command);
    } 
```

最后是服务代码：

```
public void UpdateNational(NationalPart part)
{
    var nationalPart = _contentManager.Get<NationalPart>(part.Id);      
    nationalPart.Name = part.Name;
    _contentManager.Flush();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T09:23:14.477

删除线

```
NationalPart.Record = new NationalPartRecord(); 
```

底层记录是自动生成并被代理的，因此 NHibernate 可以在您对其进行任何更改时将数据保存到数据库中。您永远不想替换它，否则将不会保存任何数据。

`UpdateNational`是多余的，您可以将其删除 -`part.Name`在调用`record.MapFrom`.

所以正确的版本看起来像这样

```
[GridAction(EnableCustomBinding = true)]
public JsonResult UpdateNational(NationalViewModel Model, GridCommand Command)
{
     if (!ModelState.IsValid)
        return new JsonResult { Data = "error" };
    var part = _contentmanager.Get(Model.Id).As<NationalPart>();
    part.Record.MapFrom<NationalPartRecord, NationalViewModel>(Model);        
    return NationalsListJson(Command);
} 
```

鉴于您的 NationalPart 看起来类似于：

```
public NationalPart : ContentPart<NationalPartRecord>
{
    public string Name {
        get { return Record.Name; }
        set { Record.Name = value; }
    }
} 
```

总结 - 如果您想在 Orchard 中存储一些数据，您需要做的就是**设置记录的某些属性的值**，仅此而已。数据将在请求结束时（或更早，如果您调用`IContentManager.Flush()`）持久化。

# php - 使用 Magento 中的 updateAttributes 将 category_ids 分配给 Product

> ID：12897541
> 
> 赞同：2
> 
> 时间：2012-10-15T14:14:19.863
> 
> 标签：php, magento, product

我正在尝试使用以下代码将 category_ids 设置为产品：

```
<?php
Mage::getSingleton('catalog/product_action')->updateAttributes(
    array($product->getId()), 
    array("category_ids"=>$this->convertCategories($prod['categories']))
    ,0
);
?> 
```

不幸的是，脚本退出时出现异常：`SQLSTATE[42S22]: Column not found: 1054 Unknown column 'attribute_id' in 'where clause'`

一些提示？我不想使用`$product->setCategoryIds()->save()`，因为它的执行时间更长。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:20:42.910

最后，我不得不稍微修改一个 magento 函数并制定解决方法：

```
/**
* Updates product categories
*
* @param Mage_Catalog_Model_Product $product
* @param array $categoryIds
* @return MagentoImporter
*/
protected function updateCategories(&$product, $categoryIds)
{
    /** @var Varien_Db_Adapter_Pdo_Mysql **/
    $dbw = Mage::getSingleton('core/resource')->getConnection('core_write');
    $productCategoryTable = Mage::getSingleton('core/resource')->getTableName('catalog/category_product');

    $oldCategoryIds = $product->getCategoryIds();

    $insert = array_diff($categoryIds, $oldCategoryIds);
    $delete = array_diff($oldCategoryIds, $categoryIds);

    if (!empty($insert)) {
        $data = array();
        foreach ($insert as $categoryId) {
            if (empty($categoryId)) {
                continue;
            }
            $data[] = array(
                'category_id' => (int)$categoryId,
                'product_id'  => (int)$product->getId(),
                'position'    => 1
            );
        }
        if ($data) {
            $ris = $dbw->insertMultiple($productCategoryTable, $data);
        }
    }
    if (!empty($delete)) {
        foreach ($delete as $categoryId) {
            $where = array(
                'product_id = ?'  => (int)$product->getId(),
                'category_id = ?' => (int)$categoryId,
            );
            $ris = $dbw->delete($productCategoryTable, $where);
        }
    }
    return $this;
} 
```

感谢**bixi**指出关于category_ids的事实，奇怪的是虽然它不是一个属性，但在eav_attribute表中有一个名为category_ids的条目，magento正在使用此代码加载属性模型，但在尝试保存属性时崩溃。也许完全删除 category_ids 属性会更好，这样人们就不会认为这是一个错误。

关于索引：可能我需要重新索引所有数据，以防万一使用我的功能后，这没什么大不了的，因为使用产品节省`updateAttributes`时间从 9 秒到 0.75 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T15:09:21.833

处理类别时不能使用 updateAttributes() （类别不是属性）。您必须处理模型（目录/产品）...

由于索引生成（如果您的索引在“保存时更新”）和您的目录配置（您的类别都是“is_anchor”== true 吗？）这很慢但需要..

# core-animation - 使用核心动画闪烁 NSButton

> ID：12897552
> 
> 赞同：2
> 
> 时间：2012-10-15T14:14:45.043
> 
> 标签：core-animation, nsbutton

我有一个带有 PNG 图像的`NSButton`调用`_indicatorButton`（基本上是一个绿色 LED 灯，用 setImage 设置为 PNG），没有边框和文本。我正在尝试使用以下代码使其“闪烁”：

```
- (void)animateButton
{
    NSLog(@"Animating…");
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    [animation setFromValue:[NSNumber numberWithFloat:1.0]];
    [animation setToValue:[NSNumber numberWithFloat:0.0]];
    [animation setDuration:0.3f];
    [animation setTimingFunction:[CAMediaTimingFunction
                                  functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:20000];

    [_indicatorButton.layer addAnimation:animation forKey:@"opacity"];
} 
```

……但什么也没有发生。该方法被调用并且XIB中的链接正常，因为以编程方式更改按钮上的图像可以正常工作。

任何提示为什么它根本不闪烁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T06:36:55.483

为了向后兼容，OS X 上的视图默认不使用 Core Animation 层作为它们的后备存储。没有发生任何事情的原因可能是您的按钮层为零。

您可以告诉您的观点，它应该使用`myView.wantsLayer = YES;`. 请阅读[.`wantsLayer`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/setWantsLayer%3a "wantLayer 文档")

# iphone - 如何自定义段控制器

> ID：12897553
> 
> 赞同：0
> 
> 时间：2012-10-15T14:14:57.850
> 
> 标签：iphone, ios, uisegmentedcontrol

首先，如果我的问题不恰当，请原谅我。我浏览了一些教程来自定义 ios 中的 uisegment 控制器。他们所做的是创建一个子类，`UISegmentedControl`或者`UIControl`

我的问题是

当您执行 UISegmentControl 或 UIControl 的子类时，幕后的目的是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:13:27.273

继承 UISegmentedControl 或 UIControl 的目的与继承任何其他类的目的相同——因为您希望扩展或更改基类的行为。UIControl 有点像 UIViewController。你永远不会创建 UIViewController 的实例。您总是创建子类来为您的应用创建特定的视图控制器。UIControl 类似。它为您提供基本的 UI 控件功能，但不提供任何特定控件。您将继承 UIControl 以创建您自己的、独特的 UI 控件，该控件不是由 SDK 提供的。

# android - 动态编辑文本

> ID：12897560
> 
> 赞同：0
> 
> 时间：2012-10-15T14:15:18.383
> 
> 标签：android

我想在按下时出现的数字键盘上`Edittext1`按**ENTER**或**DONE时动态获取值**`Edittext1.`

此外，我想取 的值`Edittext1`并将其相乘，然后动态显示结果，`Edittext2`然后除以`Edittext1`并显示结果，`Edittext3`反之亦然。

我想知道我应该使用哪些课程以及我应该如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:31:27.337

```
editText.addTextChangedListener(new TextWatcher() {
    public void afterTextChanged(Editable s) {

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
    }
}); 
```

# objective-c - 替换样式 Segue 问题

> ID：12897566
> 
> 赞同：1
> 
> 时间：2012-10-15T14:15:34.327
> 
> 标签：objective-c, ios, xcode, uisplitviewcontroller, uistoryboardsegue

我在's中使用`Replace`样式转场。我的问题是-当我用“替换segue”替换VC时，旧的去哪里了，它会被破坏吗？如果是这样，我怎样才能重新实例化以前的 VC，segue 并没有指向两个方向，是吗？`UISplitViewController``DetailViewController`

原因：我正在尝试根据在主视图中单击的行创建两个交换的详细`UITable`视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:58:46.900

所以你想保留被替换的视图控制器？

你ARC吗？如果你这样做，那么保持对两个视图控制器的强引用。这应该可以防止他们被“摧毁”。如果您不保留两个视图控制器对象。这可以防止它们被释放，直到释放计数为零然后被释放。

当您重新显示现在未销毁的视图控制器时，请确保您确实重用了现有对象。不要创建一个新的。（大多数教程等应该每次都创建一个新的）。

# uiwebview - 从另一个 ViewController 中的 UIWebView 中的 UITextView 打开链接

> ID：12897571
> 
> 赞同：3
> 
> 时间：2012-10-15T14:15:56.417
> 
> 标签：uiwebview, uitextview, openurl

好的，所以我正在处理的项目有一个推特提要，我将它放入一个表格中，我将推文的主要部分放在 UITextView 中。我希望它能够在 UIWebView 中打开文本中的链接。我设法使用以下方法拦截了打开的 url 调用。

```
#import "MyApplication.h"
#import "haydnboardAppDelegate.h"

@implementation MyApplication
- (BOOL)openURL:(NSURL *)url
{
   return [self openURL:url forceOpenInSafari:NO];
}

-(BOOL)openURL: (NSURL *)url forceOpenInSafari:(BOOL)forceOpenInSafari
{

    if(forceOpenInSafari)
    {
        // We're overriding our app trying to open this URL, so we'll let UIApplication     federate this request back out
        //  through the normal channels. The return value states whether or not they were able to open the URL.
        return [super openURL:url];
    }

    //
    // Otherwise, we'll see if it is a request that we should let our app open.

    BOOL couldWeOpenUrl = NO;

    NSString* scheme = [url.scheme lowercaseString];
    if([scheme compare:@"http"] == NSOrderedSame
       || [scheme compare:@"https"] == NSOrderedSame)
    {
        // TODO - Here you might also want to check for other conditions where you do not want your app opening URLs (e.g.
        //  Facebook authentication requests, OAUTH requests, etc)

        // TODO - Update the cast below with the name of your AppDelegate
        // Let's call the method you wrote on your AppDelegate to actually open the BrowserViewController
        couldWeOpenUrl = [(haydnboardAppDelegate *)self.delegate openURL:url];
    }

    if(!couldWeOpenUrl)
    {
        return [super openURL:url];
    }
    else
    {
        return YES;
    }
}
@end 
```

我也将 main.h 文件更改为：

```
return UIApplicationMain(argc, argv, @"MyApplication", nil); 
```

我试图在代码中调用 open url 函数，但它根本不会调用该函数，当我单击 TextView 中的链接时它不会做任何事情。我该怎么做才能让它调用函数来更改视图？

编辑：设法让我的应用程序委托中的函数运行，但是当它尝试推送视图控制器时没有任何反应。我得到错误 viewController 不在窗口层次结构中，所以我决定更改函数，以便它调用 viewController 中的函数，但仍然没有任何反应，但在 viewController 中调用 pushViewController 时没有错误消息。我发现这是因为 navigationController = nil 我该如何解决这个问题？

# bash - 移动来自不同用户的文件

> ID：12897583
> 
> 赞同：0
> 
> 时间：2012-10-15T14:16:25.160
> 
> 标签：bash, sh

我有一个包含一些子目录 {users} 的文件夹，例如“Michael”、“Jackson”等 pp。每个 userdir: 中还有其他子目录：`cur`和`new`，`tmp`这些是 Maildirs。

我需要一个脚本，它可以将所有文件/邮件从每个用户移动`new`到另一个用户。`cur`

我该如何开始做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:20:33.093

假设您的当前目录是包含所有用户的目录，您可以这样做：

```
for user in *; do mv "$user"/new/* "$user"/cur/.;done 
```

# html - 完全灵活的 html/css“透明”导航箭头（参见示例）

> ID：12897586
> 
> 赞同：0
> 
> 时间：2012-10-15T14:16:40.450
> 
> 标签：html, css, navigation

[我正在尝试做的示例...](https://mearley.legalserver.org/intake_portal/more_forms.php)

所以，我的老板真的很喜欢我在这个演示页面（上图）中构建的向导导航风格。但是，当我构建它时，该方法有些静态。我的意思是，它不能很好地扩展到 5 或 6 或 10 个向导步骤。但是，我需要让它自然地扩展到这些步骤。

我可以就如何修改 css 代码以使其更灵活地工作得到一些建议吗？我花了几个小时玩弄它，结果并不令人满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:04:33.720

可以使用`border`s 和伪元素：

```
.selected:before, .selected:after {
  position: absolute;
  top: 0;
  content: "";
  border-top: 20px solid rgba(0, 0, 0, 0.5);
  border-bottom: 20px solid rgba(0, 0, 0, 0.5);
  border-left: none;
  border-right: 20px solid transparent;
}
.selected:before {
  left: 0;
}
.selected:after {
  right: 0;
  border-right: none;
  border-left: 20px solid transparent;
} 
```

[演示](http://codepen.io/anon/pen/szaye)（在 Chrome 和 Firefox 中测试）

您会注意到我在示例中使用了 SASS。这样，如果您有[3 个](http://codepen.io/anon/pen/iKvAn)或[12](http://codepen.io/anon/pen/xptEI)个变量，您只需在一个位置更改一个变量`$wizard-steps`（如果它需要是动态的，这也可以用 Javascript 来完成。

# r - 如何使用字符串来引用 R 中的数据框？

> ID：12897590
> 
> 赞同：2
> 
> 时间：2012-10-15T14:16:48.197
> 
> 标签：r

我有 3 个数据框，分别称为“第一”、“第二”和“第三”

我还有一个字符串向量，里面有他们的名字

```
 frames <- c("first","second","third") 
```

我想遍历向量并参考数据框

```
for (i in frames) {

  #set first value be 0 in each data frame
  i[1,1] <- 0
} 
```

这不起作用，我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:27:47.273

这确实不是执行此操作的最佳方法，但这是使您的特定示例工作的一种方法。

```
first <- data.frame(x = 1:5)
second <- data.frame(x = 1:5)
third <- data.frame(x = 1:5)

frames <- c("first","second","third")

for (i in frames) {
 df <- get(i)
 df[1,1] <- 45
 assign(as.character(i), df, envir= .GlobalEnv)
}

> first
   x
1 45
2  2
3  3
4  4
5  5
> second
   x
1 45
2  2
3  3
4  4
5  5
> third
   x
1 45
2  2
3  3
4  4
5  5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:04:20.703

正如贾斯汀所说，R 方式是使用列表。因此，假设您只有数据框名称作为字符串，您可以将它们复制到列表中。

```
frames <- lapply(c("first", "second", "third"), get)
(frames <- lapply(frames, function(x) {x[1,1] <- 0; x})) 
```

但是，您正在处理 的副本`first`，`second`并且`third`在`frames`.

# .net - 创建展开的颜色

> ID：12897592
> 
> 赞同：1
> 
> 时间：2012-10-15T14:17:01.390
> 
> 标签：.net, colors, microsoft-chart-controls

我正在使用 Microsoft Chart Controls 绘制图表，并尝试为图表中的每条线生成不同的颜色（最多约 15-20 种颜色）。如果要绘制 14 条线，我想为每条线创建不同的颜色。

现在，我已经尝试过使用 HSV：

```
private Color GetSeriesColor(int seriesIndex,
                             int seriesCount)
{
    return ColorHelper.FromHsv(360.0*seriesIndex/seriesCount, 1, 1);
} 
```

然而问题是绿色和蓝色看起来非常相似：

![在此处输入图像描述](../Images/a08f73c3d81cb03ac5e3f6092b3d3592.png)

在 C# 中有没有办法创建看起来与人类不同的 x 颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:55:24.130

您可以尝试双指针，每个指针指向频谱中的不同位置。至少这样你最终会得到交替的颜色。

```
private Color GetSeriesColor( int seriesIndex, 
                              int seriesCount, 
                              int steps ) {
    return ColorHelper.FromHsv( 
        ( 360.0 / steps ) * ( 1.0 * seriesIndex / seriesCount ) + 
        ( ( seriesIndex % steps ) * ( 360.0 / steps ) ),
        1, 1 );
} 
```

调用代码：

```
GetSeriesColor( 5, 18, 2 ); 
```

这将创建两个“指针”。第一个将从位置 0 开始，第二个从位置 180 开始。该函数将在两个指针之间交替，为图形提供一种“棋盘”外观。

如果您不喜欢这种效果，最好的选择可能是具有 x 个预定义颜色的调色板（存储在数组中），当您到达末尾时循环播放（或者可能添加阴影，例如将较深的颜色改为较浅的颜色颜色）。

**编辑**
不过，我要补充一点，随意使用颜色编码通常是一个糟糕的设计选择。如果可能的话，最好直接在图表上使用标签。超过 8 种颜色后，人眼开始难以区分它们。请参阅[https://ux.stackexchange.com/questions/17964/how-many-visually-distinct-colors-can-accurately-be-associated-with-a-separate](https://ux.stackexchange.com/questions/17964/how-many-visually-distinct-colors-can-accurately-be-associated-with-a-separate)。

# image - 在运行时在 qt imageviewer 中选择上一个和下一个图像？

> ID：12897594
> 
> 赞同：0
> 
> 时间：2012-10-15T14:17:05.683
> 
> 标签：image, qt, sdk

我是qt的菜鸟。我被要求在 qt 中开发一个图像查看器，直到星期三。它应具有以下基本功能 -

应该有用于切换上一张和下一张图像的按钮（在文件夹中的图像中）。

应该能够放大或缩小

我开发了具有打开、放大和缩小功能的查看器。

但我仍然想知道如何切换黑白图像。例如，当单击上一个按钮时，我应该将上一个图像放在 QLabel 中当前打开的图像。类似于箭头键功能。

我希望我不会太含糊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:49:40.423

使用 QDir 从图像目录中获取所有图像文件名。然后不要使用 QFileDialog 选择显示的图像，而是从文件名列表中选择显示的图像。

# google-drive-api - 如何转移离开谷歌域的用户的共享文件？（模拟用户）？

> ID：12897599
> 
> 赞同：0
> 
> 时间：2012-10-15T14:17:19.343
> 
> 标签：google-drive-api, google-apps

我注意到 doclist api 已被弃用，我正在尝试将共享文件从 1 个用户传输到另一个用户。

在 Doclist（已弃用）中： [https ://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users](https://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users)

例子 ：

员工A：停止在公司工作。

员工 B：员工 A 文件的新所有者。

员工 C：管理员

我知道管理员（用户 C）有一个菜单，他可以在其中将文件的所有权从用户 A 转移给用户 B。但这不会转移过去与用户 A 共享的文件。

我想做一个应用程序来传输与用户 A 共享的文件并将它们共享给用户 C。这必须由管理员（用户 C）完成。

如果用户 A 登录，我已经知道如何转移所有权。但在大多数情况下，这是不可能的。

****我想知道是否有办法让与用户 A 共享的文件在不验证用户 A 的情况下与用户 B 共享？****

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:51:07.260

如果文件与用户 A 共享，则应该是所有者或其他编辑者再次与用户 B 共享文件。如果用户 A 只是文件的阅读者，则用户 A 不能重新共享该文件。此外，如果文件的所有者将共享权限设置为不允许编辑者再次共享文件，则用户 A 无法共享文件。

解决此问题的最佳方法是通过程序：

*   如果文件是使用文件夹或组共享的，请将用户 A 换成用户 B
*   如果您可以作为用户 A 登录，请运行脚本来创建与 A 共享的所有文档的列表，并与 B 共享此列表，并让 B 请求文档所有者访问文档。

执行此操作的技术选项（非常讨厌）是编写一些代码（即在 Java 中）：

*   使用服务帐户模拟用户（此处的一些示例代码： [Google Drive 服务帐户返回 403 usageLimits](https://stackoverflow.com/questions/12503437/google-drive-service-account-returns-403-usagelimits/12526286#12526286)），
*   获取所有文件
    （[https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)），
*   确定所有者
*   冒充每个所有者与用户重新共享文件（[https://developers.google.com/drive/v2/reference/permissions/update](https://developers.google.com/drive/v2/reference/permissions/update)）

# iphone - 这种类型的应用程序需要 UIRequiresPersistentWiFi 吗？

> ID：12897602
> 
> 赞同：0
> 
> 时间：2012-10-15T14:17:36.853
> 
> 标签：iphone, ios, xcode, cocoa-touch

我正在创建 RSS 阅读器应用程序，只是想知道我真的需要在 Info.plist 文件中包含 UIRequiresPersistentWiFi 吗？

我发现的唯一情况是用户阅读了很长（加载）的文章（或者他阅读速度很慢）超过 30 分钟，然后关闭了 wi-fi，他需要重新打开它。

我知道这非常罕见，但我只是担心......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:28:57.580

虽然这种类型的应用程序不需要它，但为了用户体验，我会在应用程序第一次运行时向用户显示一个对话框，让他们知道 WiFi 不是必需的，但强烈推荐。也许包括一个设置，让用户选择是否要将应用程序置于“仅 WiFi 模式”。随着越来越多的运营商转向有限的 iPhone 数据计划模型，这可能特别有用。

# screenshot - 如何截取自动完成字段的屏幕截图？

> ID：12897605
> 
> 赞同：0
> 
> 时间：2012-10-15T14:17:44.913
> 
> 标签：screenshot

正是标题中的问题；

我想对此进行截图：

![在此处输入图像描述](../Images/3fd3f0f08493d632cba0a2a3ca64c5b5.png)

或者至少是这种对象。据我所知，在任何其他程序中似乎都不可能，当我尝试截屏时下拉菜单消失。我不能只按屏幕截图键，或者使用`import`绑定到键盘快捷键的图像魔法命令。我只是结束了这个：

![在此处输入图像描述](../Images/55a2cb6cd3418b3a28b470685bd5137c.png)

有没有办法做到这一点？

将要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:28:10.233

假设您正在运行 Windows，SnagIt 应该能够很好地处理这个问题：[http ://www.techsmith.com/snagit.html](http://www.techsmith.com/snagit.html)

# ruby-on-rails - 水豚黄瓜只得到空白页

> ID：12897608
> 
> 赞同：4
> 
> 时间：2012-10-15T14:17:55.467
> 
> 标签：ruby-on-rails, ruby, testing, cucumber, capybara

我正在使用 Cucumber 和 Capybara/rack_test 测试 rails 应用程序。我有以下步骤定义：

```
Then /^I should see '([^']*)'$/ do |content|
  visit about_path
  response.should have_content(content)
end 
```

`about_path`映射到哪里`/about`。

每次我的故事都因信息而失败

```
Feature: Some Great Feature

  So that I can blah-blah
  As a Blah-blah
  I want blah-blah

  Scenario: Show project label on about page # features/about.feature:7
    Given I'm on '/about' page               # features/step_definitions/about_steps.rb:1
    Then I should see 'About'            # features/step_definitions/about_steps.rb:5
      expected there to be content "About" in "" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/about_steps.rb:7:in `/^I should see '([^']*)'$/'
      features/about.feature:9:in `Then I should see 'About''

Failing Scenarios:
cucumber features/about.feature:7 # Scenario: Show project label on about page

1 scenario (1 failed)
2 steps (1 failed, 1 passed) 
```

请注意，实际内容为空。我尝试过的每条路径都是空的。

这很奇怪，因为 rspecs 通过了。

有什么我可以尝试的吗？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:53:31.530

您不应该使用`response`来获取内容。尝试使用`page`。

# api - 我可以覆盖 Salesforce 受管软件包字段的小数位数吗

> ID：12897611
> 
> 赞同：2
> 
> 时间：2012-10-15T14:18:16.663
> 
> 标签：api, salesforce

我们正在 Salesforce 平台上开发拨款管理工具。资助申请者的 Web 界面位于 .NET 中，它通过 API 与 Salesforce 通信。

**问题：**无法修改属于 Salesforce 受管软件包的字段。

**具体问题和示例：**货币字段在托管包中均使用 2 位小数定义，因为这是大多数基金会（客户）想要的。但是一些基金会不希望在这些受管软件包字段中向资助寻求者（在 Web 界面上）显示任何小数。

**问题：**是否有任何方法可以覆盖显示的小数位数的托管包字段属性（当前定义为显示两位小数）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:15:37.673

我不知道在已安装的受管软件包中更改字段设置的直接方法。

一些替代品，具有不同程度的hackeness：

1.  您可以创建一个验证规则和公式字段来伪造它。使用显示布局的公式字段来显示受管软件包字段的值减去小数位。使用验证规则阻止用户输入带小数位的值（例如 ROUND(number, num_digits)）。
2.  使用所需的小数位数创建您自己的自定义字段。仅在页面布局上显示您的自定义字段并隐藏受管软件包字段。然后在需要时将自定义字段中的值复制到托管包字段中。插入前或更新前触发器可以处理此问题。

# ruby-on-rails - Ruby：如何从字符串中删除尾随反斜杠？

> ID：12897614
> 
> 赞同：14
> 
> 时间：2012-10-15T14:18:34.507
> 
> 标签：ruby-on-rails, ruby, string, postgresql

我有一个字符串

```
"car\" 
```

我将存储在 postgres db 中。我想在保存之前从字符串中删除反斜杠。有没有办法在 ruby​​ 或 postgres 中做到这一点？当我尝试在 ruby​​ 中删除它时，它会将反斜杠后面的引号视为转义字符。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-15T14:27:15.070

请参见以下代码：

```
1.9.3p125 :022 > s = "cat\\"
 => "cat\\" 
1.9.3p125 :023 > puts s
cat\
 => nil 
1.9.3p125 :024 > s.chomp("\\")
 => "cat" 
1.9.3p125 :025 > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:27:41.937

要删除尾部反斜杠：

```
"car\\".gsub!(/\\$/, "") 
```

请注意，反斜杠必须使用反斜杠自行转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T14:31:58.717

人们做的不多，但是 Ruby 的 String 类支持：

```
irb(main):002:0> str = 'car\\'
=> "car\\"
irb(main):003:0> str[/\\$/] = ''
=> ""
irb(main):004:0> str
=> "car" 
```

这是对尾随 '\' 的条件搜索，并用空字符串替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:35:51.907

```
puts '"car\"'.gsub(/\\(")?$/, '\1') 
```

可以，但是，斜杠总是在 en 后跟引号吗？

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-15T14:37:00.733

看看怎么说

```
str.dump 
```

操作，然后尝试对其进行操作。

# java - Java 检查 array[] 项是否存在

> ID：12897615
> 
> 赞同：24
> 
> 时间：2012-10-15T14:18:36.313
> 
> 标签：java, arrays

我正在将一些数据下载到字符串数组中。比方说`ImageLinks`。如何检查数组中的项目是否存在？

我在尝试

```
if(ImageLinks[5] != null){} 
```

但它给了我`ArrayIndexOutOfBoundsException`。（因为数组中真的没有5个链接）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-15T14:19:44.130

为了防止`ArrayIndexOutOfBoundsException`，您可以使用以下方法：

```
if(ImageLinks.length > 5 && ImageLinks[5] != null)
{
    // do something
} 
```

由于中的语句`if`是从左到右检查的，因此如果数组的大小不正确，您将无法进行空值检查。

对于任何场景都非常容易概括。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-15T14:25:58.007

写一个静态函数

```
public static boolean indexInBound(String[] data, int index){
    return data != null && index >= 0 && index < data.length;
} 
```

现在，在您的代码中调用它

```
if(indexInBound(ImageLinks, 5) && ImageLinks[5] != null){
   //Your Code
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T14:19:35.667

在进行查找之前确保数组具有该长度

```
if(ImageLinks.length > 5 && ImageLinks[5] != null){} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-13T22:17:03.150

它失败的原因是数组的元素少于 6 个。

首先检查数组是否有正确数量的元素，然后检查该元素是否存在于数组中。

```
 if (ImageLinks.length > 5 && ImageLinks[5] != null) {
     // do something
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T14:19:47.443

是的，元素少于 6 个 ImageLinks[5] 指的是第 6 个元素，因为 java 中的数组索引从 0 开始

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-24T07:23:28.043

```
if (ImageLinks != null && Stream.of(ImageLinks).anyMatch(imageLink-> imageLink != null)) {
//An item in array exist
} 
```

# android - 如何调试连接到 Facebook SDK 的 Android 应用程序？

> ID：12897616
> 
> 赞同：1
> 
> 时间：2012-10-15T14:18:36.660
> 
> 标签：android, facebook, debugging, keystore

我正在开发一个连接到本机 Facebook 应用程序的应用程序。我发现 Facebook 需要我的应用程序的哈希键才能将其连接到 Facebook 原生应用程序。当我使用密钥库导出我的应用程序时，没有问题 - 我只需在 facebook 应用程序设置控制台上注册我的 hashkey，它就可以正常工作。但是，当我调试我的应用程序时，本机 Facebook 应用程序将我的应用程序识别为未注册。我认为这是因为 Eclipse 在调试时在我的应用程序上应用了不同的密钥库（默认调试密钥库）。

所以我在服务器端制作了我的 Facebook 应用程序的两个版本——真正的一个，一个用于我的调试密钥库。

我希望我的应用程序在发布时调用前一个，在调试时调用字母一。在 Android Java 代码中，有什么方法可以检查当前应用程序是否在调试密钥库上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:30:40.207

您可以在 facebook 应用程序设置控制台上注册两个哈希键。一个 facebook 应用程序可以设置多个哈希键

# c# - 未找到端点 - WCF Web 服务

> ID：12897620
> 
> 赞同：14
> 
> 时间：2012-10-15T14:18:49.653
> 
> 标签：c#, asp.net, .net, wcf, endpoint

我为我的 WCF 服务创建了 2 个端点。

它可以正常工作，`basicHttpBinding`但会导致`webHttpBinding`.

错误 = 未找到端点。

**运营合约定义**

```
[OperationContract]
[WebInvoke(Method = "POST",
           BodyStyle = WebMessageBodyStyle.WrappedRequest,
           ResponseFormat = WebMessageFormat.Json)]
VINDescription CallADSWebMethod(string vin, string styleID); 
```

`web.config`：

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="Description7aBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="UserName" algorithmSuite="Default"/>
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://services.chromedata.com:80/Description/7a"
                binding="basicHttpBinding"
                bindingConfiguration="Description7aBinding"
                contract="description7a.Description7aPortType"
                name="Description7aPort"/>
    </client>
    <services>
      <service behaviorConfiguration="asmx" name="ADSChromeVINDecoder.Service">
        <endpoint name="httpEndPoint" 
                  address="" 
                  binding="basicHttpBinding"
                  contract="ADSChromeVINDecoder.IService"/>
        <endpoint name="webEndPoint"
                  address="json"
                  behaviorConfiguration="web"
                  binding="webHttpBinding"
                  contract="ADSChromeVINDecoder.IService"/>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
          <enableWebScript/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="asmx">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
  </system.serviceModel> 
```

请建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T17:07:05.447

我根据以下内容创建了一项与您所拥有的服务类似的服务：

```
 [ServiceContract]
public interface IService
{
    [OperationContract]
    [WebInvoke(UriTemplate="/CallADSWebMethod", Method="POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, ResponseFormat = WebMessageFormat.Json)]
    string CallADSWebMethod(string vin, string styleID);
} 
```

我添加的重要内容是 UriTemplate 部分，它告诉服务调用的外观。然后我将此服务实现为：

```
public class Service : IService
{
    public string CallADSWebMethod(string vin, string styleID)
    {
        return vin + styleID;
    }
} 
```

在我的 web.config 中，我有以下内容：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="Description7aBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384"/>
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
        <message clientCredentialType="UserName" algorithmSuite="Default"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service behaviorConfiguration="asmx" name="WebApplication1.Service">
    <endpoint address="basic" binding="basicHttpBinding" name="httpEndPoint" contract="WebApplication1.IService"/>
    <endpoint address="json" binding="webHttpBinding" behaviorConfiguration="webBehavior" name="webEndPoint" contract="WebApplication1.IService"/>
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
  </service>
</services>
<behaviors>
    <endpointBehaviors>
        <behavior name="webBehavior">
            <webHttp />
        </behavior>
    </endpointBehaviors>
    <serviceBehaviors>
    <behavior name="asmx">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/> 
```

然后我创建了一个看起来像这样的简单页面，它使用 jQuery 调用此服务：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication1.WebForm1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#Ok").click(function () {
                var jData = {};
                jData.vin = "one";
                jData.styleID = "test";
                $.ajax({
                    type: "POST",
                    url: "/Service.svc/json/CallADSWebMethod",
                    data: JSON.stringify(jData),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        alert(msg);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input type="button" id="Ok" name="Ok" value="Ok" />
    </div>
    </form>
</body>
</html> 
```

这会产生带有文本 onetest 的警报。希望这能给一些指导。

# repository - 自定义 perforce 更改编号

> ID：12897622
> 
> 赞同：0
> 
> 时间：2012-10-15T14:18:58.163
> 
> 标签：repository, perforce, p4v

是否可以自定义 perforce 更改编号。我听说我们可以做到。我上网查了一下，没有找到解决办法。

例如，尝试将更改数作为 2 的幂或 10 的倍数等。这可能吗？现在我得到一个完整的随机数。

谢谢

# abap - 为什么本地课程不出现在 SE38 课程列表中？

> ID：12897624
> 
> 赞同：3
> 
> 时间：2012-10-15T14:19:00.470
> 
> 标签：abap

我正在使用 OO 对象编写一个 ABAP 程序。在 SE38 中，在我的程序的类文件夹下，我的一些本地类没有显示出来。有些人会。

我所有的课程都存储在“包含”中。据我所知，本地类没有 Class-Builder 功能。

当我重命名一个类时，有时它会在上面提到的文件夹列表中重命名，有时它不会。

当我添加新课程时，有时会出现，有时不会。

我错过了什么？有没有一种特殊的方法可以将本地类添加到其他类的包含中并让它显示在 Classes 文件夹中？有没有办法刷新列表？

正在检查语法，程序找到类，因此 SAP 正在读取所有内容并很好地识别它。它只是不显示在类文件夹下。

尽管我很喜欢 OO，但我开始感觉到虽然这是前进的道路，但它也是半自虐的。我正在努力成为我们小组的领导者，以鼓励 OO 而不是经典的 ABAP。不过，像这样的事情，我必须先弄清楚并理解，然后才能说服别人。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:44:09.170

SE80/SE38 中的本地对象列表（类以及数据类型、表单和其他内容）没有像人们希望的那样频繁刷新。它与您可能从 Eclipse 或其他 IDE 中的类似工具中了解的大纲视图不同。如有疑问，您可能需要右键单击树视图中的程序并重建对象列表。或者您可能希望完全切换到全局类，这将为您提供更好的工具支持。

# zk - 在 ZK 框架中创建自定义 UI 组件失败

> ID：12897628
> 
> 赞同：3
> 
> 时间：2012-10-15T14:19:18.953
> 
> 标签：zk

尝试通过 ZK 6.0.1 组件开发要点创建自定义 UI 组件。尝试时总是在日志“ [http://localhost:8080/zk6/zkau/web/_zv2011051111/js/examples.com.foo.wpd](http://localhost:8080/zk6/zkau/web/_zv2011051111/js/examples.com.foo.wpd) : **HTTP Status 404 - /js/examples.com.foo.wpd** ”中出现错误使用自定义组件。在scala中找到了这个例子的war文件，它工作正常。我已将所有文件从它复制到我的项目中，并得到了同样的错误。项目结构按照教程。可能有什么问题？

![在此处输入图像描述](../Images/6fde5863cc93a970a38f980bf42762db.png)

![在此处输入图像描述](../Images/85e060367a81c93a03b7e029fad556fd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:22:05.173

至少 IntelliJ IDEA 做事的方式（我看到你正在使用，就像我一样），简单地将文件夹放在`web`文件夹下`src`似乎不会自动将其复制到工件中（尽管我不确定为什么）。因此，我尝试手动将其放入`WEB-INF/classes`文件夹中，并且有效。因此，您的示例的正确路径是`<project-root>/web/WEB-INF/classes/web/js/examples/com/foo/zk.wpd`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:55:05.563

您必须将包含 js 文件的**web**文件夹放在 java 类路径中，这意味着它应该放在**src**文件夹下。更简单的方法是使用[ZK Maven Archetype](http://books.zkoss.org/wiki/ZK_Installation_Guide/Quick_Start/Create_and_Run_Your_First_ZK_Application_with_Eclipse_and_Maven)为您创建模板。

# oracle11g - oracle 进行全表扫描，但返回结果如此之快

> ID：12897647
> 
> 赞同：0
> 
> 时间：2012-10-15T14:20:23.470
> 
> 标签：oracle11g, toad, full-table-scan

当我打开 TOAD 并执行`select * from table`时，结果（前 500 行）几乎立即返回。但是解释计划显示全表扫描并且表非常巨大。结果怎么这么快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:35:06.110

一般来说，Oracle 不需要在开始返回数据之前实现整个结果集（当然，在某些情况下，Oracle 必须在开始返回数据之前对结果集进行具体化以便对其进行排序）。假设您的查询不需要实现整个结果集，Oracle 将开始将数据返回到客户端进程，无论该客户端进程是 TOAD 还是 SQL*Plus 还是您编写的 JDBC 应用程序。当客户端请求更多数据时，Oracle 将继续执行查询并返回下一页结果。这允许 TOAD 相对较快地返回前 500 行，即使 Oracle 最终需要花费数小时来执行整个查询并将最后一行返回给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:23:03.460

Toad 仅返回前 500 行以提高性能，但如果您通过 Oracle 接口（例如 JDBC）运行该查询，它将返回整个结果。我最好的猜测是，解释计划会在没有获得记录子集的情况下向您显示结果；这就是我使用它的方式。除了我自己的经验之外，我没有其他来源。

# java - Netty IdleStateHandler 在执行器线程忙时超时

> ID：12897648
> 
> 赞同：1
> 
> 时间：2012-10-15T14:20:26.223
> 
> 标签：java, netty, ping

在向服务器发送间隔的“ping”时，我无法让 IdleStateHandler 不超时。当执行器线程长时间忙于处理（对于同一通道）时，会发生这种情况。

管道中的第一步是 IdleStateHandler，超时设置为 20 秒。

几个步骤后，使用 OrderedMemoryAwareThreadPoolExecutor 设置管道，将小队列大小设置为 3 (maxChannelMemorySize)。

当从执行器派出的工作线程处理很长时间（可能需要长达 90 秒）时，IdelStateHandler 似乎只能接收 3 条消息（messageReceived）。将执行程序中的队列大小更改为 30 将允许 IdleStateHandler 中的 30 个 messageReceived 调用。然后在 20 秒后超时。channelIdle 在 GameServerHandler 中实现（最后一步）。

我对 Netty 很陌生，所以很可能我还没有理解管道的概念——我的期望是消息总是在层之间传递。我希望每个传入消息都会调用 IdleStateHandle，而不管执行程序的队列大小，因为它是后来添加的。

我正在使用netty 3.5.8 final。

我错过了什么？

```
OrderedMemoryAwareThreadPoolExecutor eventExecutor = new OrderedMemoryAwareThreadPoolExecutor(100, 3, 300);
Timer timer = new HashedWheelTimer();
...

pipeline.addLast("idleHandler", new IdleStateHandler(timer, 20, 0, 0));
...
pipeline.addLast("executionHandler", executionHandler);
pipeline.addLast("handler", new GameServerHandler()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:50:49.827

ExecutionHandler 不应影响 IdleStateEvents 的生成。您需要了解的是，如果您在 GameServerHandler 中实现了处理 IdleStateEvents 的“逻辑”，这将取决于您的 ExecutionHandler 的繁忙程度（或者更详细地说是它使用的 Executor）。

所以我的建议是将 IdleStateEvents 的处理逻辑放在一个单独的 IdleAwareUpstreamHandler 实现中，并将其放在 ExecutionHandler 前面，这样它将由 IO-Thread 而不是通过 ExecutionHandler 处理。

# jquery - 在 jQuery 验证器的提交处理程序上更改表输入的名称和 ID

> ID：12897653
> 
> 赞同：1
> 
> 时间：2012-10-15T14:20:45.173
> 
> 标签：jquery, jquery-validate

我有一个动态生成行的表，该表具有多个需要唯一 ID 和名称的输入。我已经在 jQuery 验证器中编写了一个 submitHandler 函数来处理这个问题，但是我遇到了两个问题：

1.  我的表有一个标题行，JQuery 包含在迭代中
2.  我的所有输入类型都在每个循环中分配，而不是每行的输入类型。

这是我的代码：

```
var accessorylist = document.getElementById("accessorybody");
            var i = 1;
            $("tr").each(function(){
                var e = this;
                $('select').attr({
                    'id': 'accessory' + i,
                    'name': 'accessory' + i
                });
                $('input[type=checkbox]').attr({
                    'id': 'accessoryrequired' + i,
                    'name': 'accessoryrequired' + i
                });
                $('input[type=text]').attr({
                    'id':'accessoryqty' + i,
                    'name': 'accessoryqty' + i
                });
                alert(e);
                i++;
                alert(i);
            });
            alert(accessorylist);
            return false; 
```

警报和返回 false 对我来说只是调试行。我很确定对于第二个答案，我需要指定我的输入只关注行 (e)，但我尝试了一些不起作用的不同方法，我有点难过。至于标题行，它被包裹在一个thead标签中；'accessorybody' 是一个 tbody 标签，它只包含我的数据行，所以我不知道它是如何或为什么包含在我的循环中的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:28:35.150

您可以通过检查 的内容来跳过对标题行的迭代`tr`，例如：

```
if (!$(this).has('th').length) {
  // run code
} 
```

或者您可以更改循环，使其仅循环不包含`<th>`s的行

```
$('tr:not(:has(th))').each(function() { 
  // run code
}); 
```

针对您的第二个问题，您只需要为您的选择器提供一个上下文：

```
$('select', this); 
```

这样，只有当前行中的元素会受到影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:32:42.083

1）使用[`:not`](http://api.jquery.com/not-selector/)和[`:first`](http://api.jquery.com/first-selector/)jQuery选择器跳过第一行

```
$("tr:not(:first)").each(function(){ ... }); 
```

2)`this`用作 jQuery 对象以使用行 ( `$this`) 作为上下文来查找输入元素

```
var $this = $(this);
...
$this.find('select').attr({ ... })
$this.find('input[type=checkbox]').attr({ ... })
$this.find('input[type=text]').attr({ ... })
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:27:08.117

1.  使用 th 标签，或者给标题行一个 id，这样你就可以跳过它，或者只是跳过第一行......

2.  使用[.children()](http://api.jquery.com/children/)函数，而不是全局选择器。

例如：this.children('select').attr( ...

# django-models - 使用外键更新资源中的 Tastypie

> ID：12897662
> 
> 赞同：3
> 
> 时间：2012-10-15T14:21:20.613
> 
> 标签：django-models, foreign-keys, tastypie

我有一个问题（** 或 pow() 不支持的操作数类型：'Decimal' 和 'NoneType'）涉及外键约束的资源。这是一段代码（一个联系人属于一个部门和一个客户）：

```
class Client(models.Model):
    name = models.CharField(max_length=100, unique=True)
    address = models.CharField(max_length=100, null=True)

class Department(models.Model):
    name = models.CharField(max_length=50, unique=True)

class Contact(models.Model):
    name = models.CharField(max_length=50, null=True)
    phone = models.CharField(max_length=20, null=True)
    email = models.EmailField(max_length=50, null=True)
    department = models.ForeignKey(Department)
    client = models.ForeignKey(Client)

class BaseResource(ModelResource):
    class Meta:
        allowed_methods = ['get','post', 'put', 'delete', 'patch']
            authorization = Authorization()
            abstract = True

class ClientResource(BaseResource):
    class Meta(BaseResource.Meta):
        queryset = Client.objects.all()
        resource_name = 'client'

class DepartmentResource(BaseResource):
    class Meta(BaseResource.Meta):
        queryset = Department.objects.all()
        resource_name = 'department'

class ContactResource(BaseResource):
    department = fields.ToOneField(DepartmentResource, 'department', full=True)
    client = fields.ToOneField(ClientResource, 'client', full=False)
    class Meta(BaseResource.Meta):
        queryset = Contact.objects.all()
        resource_name = 'contact' 
```

当我尝试更新一个部门时，我没有遇到任何问题。我这样做：

```
curl -v -XPATCH -H "Content-Type:application/json" -d "{\"name\": \"Sales\"}" "http://localhost:8000/api/v1/department/1/" 
```

但是当我尝试在其他资源中做同样的事情时

```
curl -v -X PATCH -H "Content-Type:application/json" -d "{\"name\": \"XYZ\"}" "http://localhost:8000/api/v1/client/1/" 
```

返回以下错误：

```
"error_message": "unsupported operand type(s) for ** or pow(): 'Decimal' and NoneType'"
"traceback": "Traceback (most recent call last):
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 192, in wrapper\n    response = callback(request, *args, **kwargs)
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 406, in dispatch_detail\n    return self.dispatch('detail', request, **kwargs)
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 427, in dispatch\n    response = method(request, **kwargs)
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1332, in patch_detail\n    self.update_in_place(request, bundle, deserialized)
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1346, in update_in_place\n    return self.obj_update(original_bundle, request=request, pk=original_bundle.obj.pk)
File \"C:\\Python27\\lib\\site-packages\\tastypie\\resources.py\", line 1824, in obj_update\n    bundle.obj.save()
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\base.py\", line 463, in save\n    self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\base.py\", line 529, in save_base\n    rows = manager.using(using).filter(pk=pk_val)._update(values)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\query.py\", line 557, in _update\n    return query.get_compiler(self.db).execute_sql(None)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\compiler.py\", line 986, in execute_sql\n    cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\compiler.py\", line 808, in execute_sql\n    sql, params = self.as_sql()
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\sql\\compiler.py\", line 951, in as_sql\n    val = field.get_db_prep_save(val, connection=self.connection)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\models\\fields\\__init__.py\", line 874, in get_db_prep_save\n    self.max_digits, self.decimal_places)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\__init__.py\", line 809, in value_to_db_decimal\n    return util.format_number(value, max_digits, decimal_places)
File \"C:\\Python27\\lib\\site-packages\\django\\db\\backends\\util.py\", line 149, in format_number\n    return u'%s' % str(value.quantize(decimal.Decimal(\".1\") ** decimal_places, context=context))
TypeError: unsupported operand type(s) for ** or pow(): 'Decimal' and 'NoneType'\n"}* Closing connection #0 
```

和

```
curl -v -X PATCH -H "Content-Type:application/json" -d "{\"name\": \"ZZZZ\"}" "http://localhost:8000/api/v1/contact/1/" 
```

返回

```
The 'department' field has was given data that was not a URI, not a dictionary-alike and does not have a 'pk' attribute: <Bundle for obj: 'Department object' and with data: '{'id': u'1', 'name': u'Sales', 'resource_uri': '/api/v1/department/1/'}'>.* Closing connection #0 
```

我想我的外键定义有问题，但我不知道是什么。当我执行 GET 操作时，一切正常。我的定义有什么问题？非常感谢。

# c++ - ReadDirectoryChangesW 问题

> ID：12897664
> 
> 赞同：0
> 
> 时间：2012-10-15T14:21:30.597
> 
> 标签：c++, c, winapi, asynchronous, readdirectorychangesw

我正在使用 [`ReadDirectoryChangesW`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365465%28v=vs.85%29.aspx) 异步监视目录更改，基于这个[问题](https://stackoverflow.com/questions/6150984/asynchronous-readdirectorychangesw-getqueuedcompletionstatus-always-times-out?rq=1)我实现了一个监视给定目录的函数，但我仍然收到错误消息 `GetQueuedCompletionStatus(): Timeout`

```
void Filewatcher::OpenWatchDir(QString PathToOpen)
{

    QString path=QDir::fromNativeSeparators(PathToOpen);

    LPCTSTR  Dirname=(LPCTSTR)path.utf16();//.toStdWString().c_str();

    dirinfo_t* d =(dirinfo_t*) malloc(1*sizeof(dirinfo_t));
    d->CompletionKey = (ULONG_PTR)&somekey;
    dirinfo_init(d);

    /* set up */
    runthread = TRUE;
    d->hDirFH = CreateFile(Dirname,
                    FILE_LIST_DIRECTORY,
                    FILE_SHARE_READ|FILE_SHARE_WRITE,
                    NULL,
                    OPEN_EXISTING,
                    FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OVERLAPPED,
                    NULL);

    d->hDirOPPort = CreateIoCompletionPort(d->hDirFH, NULL,
                          (ULONG_PTR)d->CompletionKey, 1);

    DWORD errorcode = 0;    // an error code
    BOOL bResultQ = FALSE;  // obvios=us
    BOOL bResultR = FALSE;
    DWORD NumBytes = 0;
    FILE_NOTIFY_INFORMATION* pInfo = NULL; // the data incoming is a pointer
                                           // to this struct.
    int i = 0;

    while ( runthread )
        {
            bResultR = ReadDirectoryChangesW(d->hDirFH, (void*)d->buffer,
                                              16777216, TRUE,
                   FILE_NOTIFY_CHANGE_FILE_NAME  | FILE_NOTIFY_CHANGE_CREATION  ,
                                              NULL,
                                              &d->o->overlapped,
                                              NULL );
            bResultQ = GetQueuedCompletionStatus(d->hDirOPPort,
                                                 &NumBytes, &(d->CompletionKey),
                                                 (LPOVERLAPPED*)(d->o), 1000);
            if ( bResultQ && bResultR )
                    {
                wprintf(L"\n");
                pInfo = (FILE_NOTIFY_INFORMATION*) d->buffer;
                wprintf(L"File %s", pInfo->FileName);
                wprintf(L" changes %d\n", pInfo->Action);

                qDebug()<<"file  "<<pInfo->FileName<<" was"<<pInfo->Action;
                memset(d->buffer, 0, 16777216);
            }
            else
                   {
                       errorcode = GetLastError();

                       if ( errorcode == WAIT_TIMEOUT )
                       {
                           qDebug()<<"GetQueuedCompletionStatus(): Timeout\n";
                       }
                       else
                       {
                           qDebug()<<"GetQueuedCompletionStatus(): Failed\n";
                           qDebug()<<"Error Code "<<errorcode;
                       }
                       Sleep(500);
                   }
               }

} 
```

我需要知道如何`ReadDirectoryChangesW`与`IoCompletionPort`.

请提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:51:57.450

这里没有理由使用完成端口，带有事件的简单重叠 I/O 将非常有效。

关键是与所有其他事件（可能包括 GUI 消息）同时等待此操作（无论是事件还是完成端口），并且仅在事件发出信号时检查状态。为此，使用`(Msg)WaitForMultipleObjects(Ex)`.

在 Qt 中，您可以使用如下所述添加 Win32 事件（由`OVERLAPPED`结构用于异步 I/O）`QWinEventNotifier`：

*   [http://www.downtowndougbrown.com/2010/07/adding-windows-event-objects-to-a-qt-event-loop/](http://www.downtowndougbrown.com/2010/07/adding-windows-event-objects-to-a-qt-event-loop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:20:59.897

谢谢你们的回答，经过深入研究和重新测试代码后，我基于[此](http://sumatrapdf.googlecode.com/svn/trunk/src/FileWatch.h)解决了我的问题，非常感谢您的帮助。

# ajax - 使用带有 AJAX 和 Mustache 渲染的无限滚动

> ID：12897668
> 
> 赞同：1
> 
> 时间：2012-10-15T14:22:00.550
> 
> 标签：ajax, infinite-scroll, mustache

我有一个 jsp 页面，我在其中使用以 JSON 数据响应的 AJAX 加载帖子。HTML 是使用 Mustache 渲染器渲染的。问题是如何在这种情况下使用这个无限滚动。我读过可以使用 jQuery load() 方法，但我无法让它工作。如果有人指导我，那将很有帮助。

```
var data = "";
        $.getJSON("/ajax?command=getposts", function(returnedData){            
            console.log("bar"+returnedData);
            var data = JSON.parse(JSON.stringify(returnedData));
            //alert(JSON.stringify(returnedData));
            console.log(data);
            $.get('temp.html', function(templates)
            {
                var tpl = $(templates).filter('#content').html();
                //console.log(data);
                var html = Mustache.to_html(tpl, returnedData);
                $('#posts').html(html);
                $('#posts').imagesLoaded(function() {

                    $('#posts').freetile({
                        animate: true,
                        elementDelay: 30
                    });
                });
            });
        }); 
```

这是我用来在容器中加载帖子的 Jquery 代码。我想实现无限滚动，每次用户滚动时都会调用这个方法。

# c# - 将代码中的事件添加到 InfoPath 中的下拉列表框

> ID：12897670
> 
> 赞同：0
> 
> 时间：2012-10-15T14:22:15.637
> 
> 标签：c#, sharepoint-2010, infopath2010

我正在尝试使用 VS 应用程序工具将 OnChange 或 Changed 或 IndexChanged 事件添加到 InfoPath 中的“下拉列表框”控件。

如果找到以下代码，如何使用按钮完成此操作：

```
((ButtonEvent)EventManager.ControlEvents["ButtonName"]).Clicked += new ClickedEventHandler(FormCode_Clicked); 
```

我认为这对于其他控件也是可能的，但我似乎无法找到能够将事件添加到我的下拉列表的演员对象。

```
((?)EventManager.ControlEvents["Project_x0020_Number"]).SelectedIndexChanged += new EventHandler(FormCode_SelectedIndexChanged); 
```

我尝试了对象 ComboBox，但随后出现错误，即无法将该对象强制转换为 ComboBox 类型。

我希望有人能给我一些建议。我想要做的基本上就是运行一个查询，根据我的“项目编号”框中​​的选定值过滤我的数据。

或许还值得一提：我正在更改将进入 Word 文档的表单（在 SharePoint 中用作模板）。我真的不认为这很重要，但我想我以任何方式提到它。

提前致谢

油烟机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:29:00.577

您无需编写代码即可解决此问题。我在这台机器上没有 Infopath 来给你一个样本。但我认为您可以使用第 26 点中描述的方法来解决这个问题：

[http://www.bizsupportonline.net/infopath2003/avg-function-infopath.htm](http://www.bizsupportonline.net/infopath2003/avg-function-infopath.htm)

您将在数据源中设置一些参数并根据下拉列表中设置的值执行刷新，而不是像上面的示例中那样计算平均值。

# jquery - 使用主干视图管理 jQuery 点击事件

> ID：12897673
> 
> 赞同：1
> 
> 时间：2012-10-15T14:22:32.610
> 
> 标签：jquery, backbone.js, click, coffeescript

为多次呈现的主干视图创建 jQuery 点击事件的最佳方法是什么？似乎我应该在视图的初始化程序中使用 $().on() ，但这不起作用，除非我在渲染后调用它。

基本上，我正在渲染一个表格，并检查行上的点击事件。这是我正在尝试的（在咖啡脚本中）。这不起作用 -

```
class MyGridView extends Backbone.View
  el: '#myGrid'
  template: _.template(TableTmpl)

  initialize: -> 
    # $('tr',@el).on 'click', -> console.log($(@).attr('model')) # WRONG
    $(@el).on 'click', 'tr', -> console.log($(@).attr('model')) # CORRECT

  render: ->
    $(@el).empty()
    $(@el).append(@template({data: @collection.getPage()})) 
```

这可行，但这会创建孤立的点击事件吗？

```
class MyGridView extends Backbone.View
  el: '#myGrid'
  template: _.template(TableTmpl)

  render: ->
    $(@el).empty()
    $(@el).append(@template({data: @collection.getPage()}))
    $('tr',@el).click -> console.log($(@).attr('model')) 
```

**更新：**

我缺少 $().on() 的参数，这就是它不起作用的原因。我还尝试了事件，这似乎是一种更好的处理方式，其工作方式如下：

```
class MyGridView extends Backbone.View
  el: '#myGrid'
  template: _.template(TableTmpl)
  events: {'click tr', 'selectModel'}

  selectModel: ->
    model = $(e.target).parent().attr('model')
    console.log(model)

  render: ->
    $(@el).empty()
    $(@el).append(@template({data: @collection.getPage()}))
    $('tr',@el).click -> console.log($(@).attr('model')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:30:54.510

我认为你应该使用`live`代替`on`或者你应该使用主干的`events`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:20:44.753

您应该为此使用该[`events`属性](http://backbonejs.org/#View-extend)，这就是它的用途：

```
class MyGridView extends Backbone.View
  el: '#myGrid'
  events:
    'click tr': 'click'
  template: _.template(TableTmpl)
  render: ->
    @$el.empty()
    @$el.append(@template({data: @collection.getPage()}))
    @
  click: ->
    console.log($(@).attr('model')) 
```

还要注意切换到，[`@$el`](http://backbonejs.org/#View-%24el)因为 Backbone 已经`el`缓存了 jQuery 包装并且`render`通常返回视图。此外，Backbone 视图有一个[`$`](http://backbonejs.org/#View-dollar)方法，它是一个快捷方式，`@$el.find(...)`所以你可以说`@$('tr')`而不是`$('tr', @el)`.

演示：http: [//jsfiddle.net/ambiguous/ud6dU/](http://jsfiddle.net/ambiguous/ud6dU/)

无需手动绑定事件（在大多数情况下）。视图使用视图和附加到视图的`events`jQuery为您处理所有这些。[`delegate`](http://api.jquery.com/delegate/)`el`

# javascript - mouseenter 和 mouseleave 函数上的动态高度和宽度图像的问题

> ID：12897674
> 
> 赞同：0
> 
> 时间：2012-10-15T14:22:37.663
> 
> 标签：javascript, jquery, html

我正在使用 jquery 处理此图像悬停缩放部分。代码工作正常，因为较大的图像显示在 mouseenter 上并隐藏在 mouseleave 上。因为，悬停时显示的图像可以具有动态宽度和高度（这取决于图像大小..）我想将图像宽度和高度减小到实际宽度和高度的 75% .. 即使这样也很好并且可以工作..

现在我面临的问题是，当鼠标第二次进入时，图像再次缩小..第三次变得比第二次小......所以每次鼠标进入时，图像变得越来越小......（我认为是显而易见的，因为每次鼠标进入它都会将图像减少 75％......）我已经尝试了很多事情，比如创建一个全局变量，并检查它.. if（第一次）thn（减少）else（从原来的减少图片 ）。

但不能让它工作..这是我的代码....

[http://jsfiddle.net/ugnNU/11/](http://jsfiddle.net/ugnNU/11/)

希望得到一些建议。您的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:37:11.690

我试图尽可能少地更新您的代码。这是一个如何做我认为你正在尝试做的事情的例子。 [http://jsfiddle.net/ugnNU/12/](http://jsfiddle.net/ugnNU/12/)

有很多方法可以到达那里，我选择了这个，因为它接近你已经拥有的。

我添加了这个：

```
var childImage = $(this).children("div.tooltip");

if (childImage.attr('saveWidth') == ""){
   //we haven't saved it's height yet
   childImage.attr('saveWidth', childImage.width()); 
   childImage.attr('saveHeight', childImage.height());
}

var hoverImgWidth = childImage.attr('saveWidth');
var finalHoverImagewidth = hoverImgWidth * 0.75;

var hoverImgHeight = childImage.attr('saveHeight');
var finalHoverImageWidth = hoverImgHeight * 0.75; 
```

基本上它只是检查我们是否已经在属性中保存了“工具提示”图像高度。如果我们有，它只是使用该值。但如果不是，我们将高度或宽度保存在该属性中，然后使用它。

我也只选择 ("div.tooltip") 一次并将其保存在`childImage`. 这样做的原因是每次执行此操作时`$(selector)`jQuery 都必须查找该元素。如果你经常这样做，它会影响性能。因此，最好将选择器保存在局部变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:39:03.277

[http://jsfiddle.net/ugnNU/13/](http://jsfiddle.net/ugnNU/13/)

它不使用自定义属性。它只是在 mouseleave 中撤消，您在 mouseenter 中所做的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T14:38:12.640

每次调用此代码

```
 var hoverImgWidth = $(this).children("div.tooltip").width();
    var finalHoverImagewidth = hoverImgWidth * 0.75; 
```

div.tooltip 的宽度值乘以 0.75。

下次执行代码时，它会获取当前宽度（降低的值）并再次降低它。

您可以在隐藏它时再次设置大小，但我的建议是计算文档准备好的值，并且仅使用 mouseenter 和 mouseleave 事件显示和隐藏图像。

# hibernate - Hibernate 执行多个查询而不是一个

> ID：12897680
> 
> 赞同：0
> 
> 时间：2012-10-15T14:22:57.523
> 
> 标签：hibernate, hql

我一直在尝试优化hibernate获取一些信息的方式，但我无法理解下一个问题。

我有一个这样的实体

```
public class AnoEmp{
    //bi-directional many-to-one association to Empleado
    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="ID_EMPLEADO", nullable=false, insertable=false, updatable=false)
    private Empleado empleado;
}
... 
```

还有一个像这样

```
public class Empleado{
    //bi-directional many-to-one association to AnoEmp
    @JsonIgnore
    @OneToMany(mappedBy="empleado", fetch=FetchType.LAZY)
    private List<AnoEmp> anosEmp;
... 
```

尽管它很急切（它必须是那样）它执行 N + 1 个查询，其中一个是 AnoEmp 列表，一个是每个 Empleado。但这可以通过一个查询来完成（正如我所期望的那样，因为@eager）

我发现这个[Why hibernate perform two queries for eager load a @OneToOne 双向关联？](https://stackoverflow.com/questions/3381521/why-hibernate-perform-two-queries-for-eager-load-a-onetoone-bidirectional-assoc)但不能让我的正常运行。有什么建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:43:24.917

我发现唯一一直在工作的就是`join`在 JPQL 中使用，例如

```
 "from Empleado emp join emp.anosEmp" 
```

# iphone - Objective C 使用填充将 NSString 转换为 UTF8

> ID：12897686
> 
> 赞同：0
> 
> 时间：2012-10-15T14:23:12.360
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我正在实现 AES 解码器，用于创建 IV 和密钥，算法是这样的

IV Key的16字节：ProductID.getBytes("UTF-8")的前16字节

```
 （If there are no enough bytes,      

            make up to 16 bytes at right by 0x32) 
```

和我的填充代码

```
- (char*)paddedStringFromString:(NSString *)string withLength:(NSUInteger)length{
    const char *stringC = [string UTF8String];
    char * output;
    output = malloc(length+1);
    for (NSInteger i = 0; i < length; i++) {
        if (i < string.length) output[i] = stringC[i];
        else output[i] = 0x32;
    }
    return output;
} 
```

但我没有得到正确的结果。我的填充方法是否正确。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:04:57.773

我认为 args 长度和 string.length 不一样，对吧？

# sql - SQL：按 value1 和“非”value1 分组？

> ID：12897688
> 
> 赞同：2
> 
> 时间：2012-10-15T14:23:21.250
> 
> 标签：sql, db2, database-agnostic

我有一个类似以下内容的表格：

```
OrderNo, OrderType
1, Type1
2, Type1
3, Type2
4, Type3
5, Type4 
```

在 OrderType 上进行“分组”很容易，但是有没有办法进行“分组”以获得类似的东西：

```
OrderCount, OrderType
2, Type1
3, Not Type1 
```

这是 DB2，但理想情况下，我正在寻找一种无论 DB 供应商如何都能工作的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:25:18.553

`group by case when OrderType = 'type1' then 'type1' else 'not type 1' end`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:28:06.090

尝试：

```
Select Case OrderType When 'Type1' Then 'Type1'
            Else 'NotType1' End OrderType, 
       Count(*) OrderCount
From Table
Group By Case OrderType When 'Type1' Then 'Type1'
              Else 'NotType1' End 
```

# c# - 谷歌云端硬盘。上传文件时刷新授权令牌

> ID：12897693
> 
> 赞同：3
> 
> 时间：2012-10-15T14:23:28.900
> 
> 标签：c#, google-api, google-drive-api

将大文件上传到 Google Drive 时刷新授权令牌的方法是什么？例如：当前授权令牌的过期时间为“06:00 AM”。文件上传从“05:15 AM”开始。因此，在“06:00 AM”应用程序由于授权令牌无效而获得异常。

我试图用下面的源代码解决这个问题，但它不起作用。

```
/// <summary>
/// Uploads a file with a specified path.
/// </summary>
/// <param name="startFolder">The start folder.</param>
/// <param name="path">The path of destination file.</param>
/// <param name="localFile">The local file to upload.</param>
/// <returns>The uploaded file.</returns>
private File GdUploadFile(File startFolder, string path, FileInfo localFile)
{
    if (startFolder == null)
    {
        throw new ArgumentNullException("startFolder");
    }

    if (localFile == null)
    {
        throw new ArgumentNullException("localFile");
    }

    if (!localFile.Exists)
    {
        throw new FileNotFoundException("File not found", localFile.FullName);
    }

    var config = GetConfiguration();

    if (config.TraceLog)
    {
        Destination.Logger.LogDebug(string.Format("{0} \tUpload file \"{1}\" to \"{2}\"", Destination.Name, localFile.FullName, path));
    }

    string pathToFile = string.IsNullOrEmpty(path) ? localFile.Name : path;

    string remotePath = ExtractFilePath(pathToFile);
    var fileFolder = GdCreateFolderByPath(startFolder, remotePath);
    var fileName = ExtractFileName(pathToFile);

    DriveService service = GetDriveService();

    var body = new File
                   {
                       Title = fileName,
                       Description = "My File",
                       MimeType = BackupFileMimeType,
                       Kind = DriveFileKindType,
                       OriginalFilename = fileName,
                       FileExtension = localFile.Extension,
                       Parents = new List<ParentReference>
                                     {
                                         new ParentReference
                                             {
                                                 ETag = fileFolder.ETag,
                                                 Id = fileFolder.Id,
                                                 Kind = fileFolder.Kind
                                             }
                                     }
                   };

    FilesResource.InsertMediaUpload request;
    var source = new MediaFileSource(localFile.FullName, BackupFileMimeType);

    using (var fileStream = source.GetDataStream())
    {
        if (config.TraceLog)
        {
            Destination.Logger.LogDebug(string.Format("{0} \tUploading \"{1}\"...", Destination.Name, localFile.FullName));
        }

        request = service.Files.Insert(body, fileStream, body.MimeType);

        if (config.TraceLog)
        {
            int postedPercent = 0;

            request.ProgressChanged += p =>
                                           {
                                               var currentPercent = (int) (p.BytesSent/(double) source.ContentLength*100);

                                               if (currentPercent != postedPercent)
                                               {
                                                   string msg = string.Format("{0} \tPosted {1}% ({2} bytes)", Destination.Name,
                                                                              currentPercent, p.BytesSent);
                                                   Destination.Logger.LogDebug(msg);
                                                   postedPercent = currentPercent;
                                               }
                                           };
        }

        var connection = Destination.Connection as GoogleDriveDestinationConnection;
        Debug.Assert(connection != null, "connection != null");

        request.ProgressChanged += p =>
                                       {
                                           bool refreshAuth = connection.ForceRefreshAuthorization();
                                           var auth =
                                               request.Authenticator as
                                               Google.Apis.Authentication.OAuth2.OAuth2Authenticator<NativeApplicationClient>;

                                           if (auth != null && auth.State != null && refreshAuth)
                                           {
                                               var state = connection.AuthorizationState;
                                               auth.State.AccessToken = state.AccessToken;
                                               auth.State.AccessTokenExpirationUtc = state.AccessTokenExpirationUtc;
                                               auth.State.AccessTokenIssueDateUtc = state.AccessTokenIssueDateUtc;
                                               auth.State.Callback = state.Callback;
                                               auth.State.RefreshToken = state.RefreshToken;
                                               auth.State.SaveChanges();

                                               if (config.TraceLog)
                                               {
                                                   Destination.Logger.LogDebug("Authorization state for the upload request is updated");
                                               }

                                           }
                                       };

        request.ChunkSize = ChunkSize;
        request.Upload();

        if (config.TraceLog)
        {
            Destination.Logger.LogDebug(string.Format("{0} \t\"{1}\" uploaded", Destination.Name, localFile.FullName));
        }
    }

    return request.ResponseBody;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:27:19.933

考虑进行可恢复上传（[https://developers.google.com/drive/manage-uploads#resumable](https://developers.google.com/drive/manage-uploads#resumable)）。需要时刷新令牌，然后从上次中断的地方继续上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T10:38:49.467

我无法为无效授权令牌问题找到令人满意的解决方案。因此，我创建了自己的开源轻量级库，用于处理 Google Drive 上的文件。该库直接调用所有 REST 函数，并完全控制上传或下载过程。它通过每小时刷新授权令牌来解决问题。该库目前在我公司的 Sql Server 备份产品上千次安装中使用，非常稳定，成功解决了这个问题。您可以从这里获取源代码和示例：[https ://github.com/AlexeyVlg/Pranas.Net.Clouds](https://github.com/AlexeyVlg/Pranas.Net.Clouds)

# typescript - TypeScript tsc > 消息重定向

> ID：12897695
> 
> 赞同：6
> 
> 时间：2012-10-15T14:23:37.463
> 
> 标签：typescript, tsc

我刚刚将 TypeScript 作为 Node.js 包安装，令我惊讶的是它似乎可以立即运行。但我找不到拦截它可能生成的任何消息的方法。使用有故意错误的 greeter.ts 文件执行以下操作

```
tsc greeter.ts > err.log 
```

确认没有发生重定向。有人知道解决这个问题的方法吗？我想这样做，这样我就可以在我的编辑器中发现错误。

顺便说一句，我注意到 tsc 只接受小写文件名。执行 tsc GREETER.TS 给出读取文件“GREETER.TS”时出错：找不到文件。

回应 Sohnee 的评论：不，tsc 肯定会发出错误消息，只是我无法重定向它。我的 greeter.ts 文件，带有故意错误的是：

```
function greeter(person) {
  return "Hello, " + person;
}
var user = "Jane User";
undeclared
document.body.innerHTML = greeter(user); 
```

从操作系统外壳我得到以下信息。

```
C:\K_F90\F90WX\BOOKS\THENOD~1>tsc greeter.ts
C:/K_F90/F90WX/BOOKS/THENOD~1/greeter.ts(7,0): The name 'undeclared' does not exist in the current scope 
```

但是当我尝试重定向时，我得到：

```
C:\K_F90\F90WX\BOOKS\THENOD~1>tsc greeter.ts > err.log
C:/K_F90/F90WX/BOOKS/THENOD~1/greeter.ts(7,0): The name 'undeclared' does not exist in the current scope
C:\K_F90\F90WX\BOOKS\THENOD~1>type err.log
C:\K_F90\F90WX\BOOKS\THENOD~1> 
```

我认为非常确凿；正在发出一条错误消息，但没有重定向到 err.log，它是空的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:53:16.727

`>`操作员仅重定向标准输出。错误被写入标准错误。要同时重定向 stderr，请附加`2>&1`到命令。背景信息[在这里](http://technet.microsoft.com/en-us/library/bb490982.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:20:11.683

尝试使用：

`tsc greeter.ts > err.log 2>&1`

这对我很好。

# c - 多次启动代码时处理时间减少

> ID：12897698
> 
> 赞同：1
> 
> 时间：2012-10-15T14:23:54.013
> 
> 标签：c, cuda, nvidia

我目前正在使用 C 和 CUDA 编写应用程序。我有在纯 C 中工作的算法并将其转换为 CUDA。

结果很好，我现在正在优化我的代码。

我使用一个简单的方法来分析内核获取结果所需的时间

```
clock_t start, end;
double cpu_time_used;
start = clock();

. . . my memcopies and my kernel . . . 

end = clock();
cpu_time_used = ((double) (end - start)) / CLOCKS_PER_SEC; 
```

令我惊讶的是，当我连续多次运行整个程序时，处理时间大大减少。当只运行一次时，我平均大约 0.9 秒。连续运行十次我可以下降到 0.1 秒。

我真正担心的是，Visual Profiler 会根据 15 次运行来计算其统计数据，这使得我的第一次运行被真正快速的 14 次运行所淹没。

我的程序稍后会偶尔运行一次，所以我要优化的是第一次运行的时间。

因此，我的问题是，有没有办法解决这个问题，或者知道它来自哪里？

谢谢 ！

编辑：

我在上网本上运行 Windows 7、CUDA 4.2 Toolkit（2.1 功能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T17:56:11.377

如果您的目标是提供快速启动，请确保您的可执行文件包含将在其上运行的 GPU 架构的目标代码。

您可以为多种架构编译带有目标代码的“胖二进制文件”，其中在运行时选择合适的代码版本。您甚至可以（并且应该！）包括 PTX 代码，以防没有目标代码版本适合（例如，支持未来的设备）。

只需为 nvcc 提供多个`-gencode`选项，一个用于您想要为其包含目标代码的每个物理架构（“sm_20”），以及至少一个具有虚拟架构（“compute_20”）的选项，以生成 PTX 代码。

# database - 从 Appliction.cfc 访问变量

> ID：12897703
> 
> 赞同：4
> 
> 时间：2012-10-15T14:24:14.933
> 
> 标签：database, coldfusion, cfquery, coldfusion-10, application.cfc

我想知道在使用脚本函数时从Application.cfc文件中调用变量的新方法，它的格式为“this.something”我的例子：

```
component {

    // application variables
    this.datasource = "my DSN";

} 
```

现在在我的 cfquery 中，我想访问它。我过去使用过，我会在 Application.cfc 中使用 [cfset REQUEST.dataSource ="MyDSN"]，然后在我的 cfqrey 中我会说；

```
<cfquery name="rs_dailytip" datasource="#REQUEST.dataSource#">
My SQL
</cfquery> 
```

我的问题是如何使用我正在使用“this.datasource”的新 Application.cfc 执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T14:31:15.587

要回答这个特定问题，您不需要提供数据源属性。您的查询应如下所示：

```
<cfquery name='Q'>
    SQL GOES HERE
</cfquery> 
```

THIS.datasource 成为默认数据源（从 CF9 开始）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T15:45:38.337

@EvikJames 关于 datasource 属性是正确的，但我相信如果你想访问使用其他变量，如 APPLICATION.SUPPORT_EMAIL 我会使用 APPLICATION 范围。其他人可能不同意，但这就是我所做的，而且效果很好。

# mysql - 保存存储过程时出错

> ID：12897705
> 
> 赞同：1
> 
> 时间：2012-10-15T14:24:19.270
> 
> 标签：mysql, stored-procedures

> **可能重复：**
> [如何使用 phpmyadmin 编写存储过程以及如何通过 php 使用它？](https://stackoverflow.com/questions/2846516/how-to-write-a-stored-procedure-using-phpmyadmin-and-how-to-use-it-through-php)

我从存储过程开始，并在每个使用过的页面上尝试了一个简单的查询，但得到一个我无法解决的错误。

```
CREATE PROCEDURE ts_open_uitdagingen()
BEGIN
SELECT
            COUNT(*) AS open_uitdagingen
        FROM
            ts_lad_uitdagingen
        WHERE 
            uitgedaagde = '97'
            AND acceptdatum IS NULL
            AND afwijsdatum IS NULL ;

END; 
```

错误信息：

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 10 行的 '' 附近使用正确的语法

第 10 行有什么问题？有或没有分号，我得到这个消息？？查询本身只是从我的脚本中复制的，并且运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:25:51.703

尝试摆脱那些尾随的分号？

我会尝试其他一些格式化的事情：

```
CREATE PROCEDURE ts_open_uitdagingen
AS
BEGIN 

   SELECT 
        COUNT(*) AS open_uitdagingen 
    FROM 
        ts_lad_uitdagingen 
    WHERE  
        uitgedaagde = '97' 
        AND acceptdatum IS NULL 
        AND afwijsdatum IS NULL      
END 
```

# android - 相对布局上的图像叠加

> ID：12897709
> 
> 赞同：2
> 
> 时间：2012-10-15T14:24:36.930
> 
> 标签：android, android-layout

我有两个带有圆角矩形边框的相对布局，它们之间没有任何空间。我希望将图像覆盖在由边界生成的公共线上，如何实现？

![在此处输入图像描述](../Images/e1a639e790727601166b01d49ce1547b.png)

布局代码：

```
//COde for the layout.
  <RelativeLayout
                android:id="@+id/Layout1"
                android:layout_width="300dp"
                android:layout_height="60dp"
                android:layout_below="@id/selectText"
                android:layout_marginLeft="10dp"
                android:background="@layout/rounded_border_1" >

                <TextView
                    android:id="@+id/Text1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_centerInParent="true"
                    android:layout_marginLeft="10dp"
                    android:text="@string/string1"
                    android:textColor="@color/text_color"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/Name1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/Text1"
                    android:layout_alignParentRight="true"
                    android:layout_marginRight="20dp"
                    android:hint="@string/hint"
                    android:textColor="@color/hint_color"
                    android:textSize="14sp" />
            </RelativeLayout>

//code for the image
            <ImageButton
                android:id="@+id/image"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="30dp"
                android:src="@drawable/swap"/>

//code for the layout
            <RelativeLayout
                android:id="@+id/Layout2"
                android:layout_width="300dp"
                android:layout_height="60dp"
                android:layout_below="@id/Layout1"
                android:layout_marginLeft="10dp"
                android:background="@layout/rounded_border_2" >

                <TextView
                    android:id="@+id/Text2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_centerInParent="true"
                    android:layout_marginLeft="10dp"
                    android:text="@string/string2"
                    android:textColor="@color/text_color"
                    android:textSize="14sp" />

                <TextView
                    android:id="@+id/Name2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@id/Text2"
                    android:layout_alignParentRight="true"
                    android:layout_marginRight="20dp"
                    android:hint="@string/hint"
                    android:textColor="@color/hint_color"
                    android:textSize="14sp" />
            </RelativeLayout>
    //Code for the border1 
```

rounded_border_1.xml

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >

        <gradient
            android:angle="270"
            android:endColor="@color/gradient_end"
            android:startColor="@color/gradient_start" />

        <stroke
            android:width="1dp"
            android:color="@color/canvas_border" />

        <corners
            android:bottomLeftRadius="0dp"
            android:bottomRightRadius="0dp"
            android:topLeftRadius="5dp"
            android:topRightRadius="5dp" />

    </shape> 
```

rounded_border_2.xml

```
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >

        <gradient
            android:angle="270"
            android:endColor="@color/gradient_end"
            android:startColor="@color/gradient_start" />

        <stroke
            android:width="1dp"
            android:color="@color/canvas_border" />

        <corners
            android:bottomLeftRadius="5dp"
            android:bottomRightRadius="5dp"
            android:topLeftRadius="0dp"
            android:topRightRadius="0dp" />

    </shape> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:42:05.967

您还需要将布局嵌入到 RelativeLayout 中。我只会添加重要的属性以使它们更容易看到：

```
<!-- surrounding RelativeLayout not visible -->
<RelativeLayout
    android:layout_height="120dp"
    android:layout_below="@id/selectText">
    <RelativeLayout
        android:id="@+id/Layout1"
        android:layout_width="300dp"
        android:layout_height="60dp" >
        <TextView />
        <TextView />
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/Layout2"
        android:layout_width="300dp"
        android:layout_height="60dp"
        android:layout_below="@id/Layout1" >
        <TextView />
        <TextView />
    </RelativeLayout>
    <ImageButton
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:src="@drawable/swap" />
</RelativeLayout> 
```

# php - 相同的短 url 映射到 goo.gl 上的不同长 url

> ID：12897711
> 
> 赞同：0
> 
> 时间：2012-10-15T14:24:37.883
> 
> 标签：php, analytics, goo.gl

如何告诉 goo.gl 为不同的长 url 生成相同的短 url？

假设我有 goo.gl/wbn0 点到 www.marin.com

例如，我需要的是能够将相同的短 url goo.gl/wbn0 指向 www.rusi.com。

这样我就可以跟踪短网址。

# google-app-engine - SessionScoped Bean 在 Google Appengine 上回发时丢失数据

> ID：12897712
> 
> 赞同：0
> 
> 时间：2012-10-15T14:24:41.307
> 
> 标签：google-app-engine, jsf-2

我使用 Eclipse 3.7 GAE 插件进行开发。我的应用程序使用 JSF 和数据存储，并按照[https://sites.google.com/a/wildstartech.com/adventures-in-java/Java-Platform-Enterprise-Edition/JavaServer-Faces/javaserver-faces进行设置-20/configuring-javaserver-faces-20-to-run-on-the-google-appengine](https://sites.google.com/a/wildstartech.com/adventures-in-java/Java-Platform-Enterprise-Edition/JavaServer-Faces/javaserver-faces-20/configuring-javaserver-faces-20-to-run-on-the-google-appengine)。在我的开发系统中，它运行良好。但是当部署到 GAE 时，SessionScoped Bean 在回发时会丢失数据：

```
// Input facelet
<h:outputLabel for="popupCal">Date </h:outputLabel> 
<p:calendar value="#{editEntry.current.date1}" id="popupCal" />
<h:outputLabel for="code">Code </h:outputLabel> 
<h:inputText id="code" value="#{editEntry.current.accountCode}"/>
<h:outputLabel for="amt">Amount </h:outputLabel> 
<h:inputText id="amt" value="#{editEntry.current.amountInDollars}"/>
<h:commandButton action="#{editEntry.createCashExpenditure}" value="Create Entry"/>

@ManagedBean(name="editEntry")
@SessionScoped
public class EditEntry extends AbstractEntryBean implements Serializable {

@ManagedProperty(value="#{sessionBean}")
protected SessionBean sessionBean; 

@ManagedProperty(value="#{dao}")
protected Dao dao;

@PostConstruct
public void init() {
Logger.getLogger(getClass().getName()).log(Level.WARNING, "dao is null? {0}", dao==null);
    setTran_id(0L);
        entries.clear();
        setCurrent(new Entry());
        getCurrent().clear();
        ...
        this.refreshEntries();
}

public void refreshEntries() {
    entries = dao.getEntries(current.getFinyr(), getTran_id());
    Logger.getLogger(getClass().getName()).log(Level.INFO, "entries has {0} items", entries.size());
}

public String createCashExpenditure() {
    if (dao == null) {
        Logger.getLogger(getClass().getName()).log(Level.WARNING, "dao is null");
        return null;
    }
    entries.clear();
    Entry e = new Entry();
    e.clear();
    e.setAccountCode(current.getAccountCode());
    e.setAccountName(dao.lookupAccoutName(e.getAccountCode()));
    e.setAmount(current.getAmount());
    e.setDate1(current.getDate1());
    e.setTran_id(getTran_id());
    Key key = dao.saveEntry(e, sessionBean.getFinyr());
    e.setId(key.getId());
    entries.add(e);
    current = e;
    this.setTran_id(e.getTran_id());
    Logger.getLogger(getClass().getName()).log(Level.INFO, "current account is: {0}", current.getAccountCode());
    return "newEntry?faces-redirect=true";
}

... 
```

}

```
newEntry.xhtml
    <p:dataTable id="items" value="#{editEntry.entries}" var="item">
// editEntry.entries is EMPTY! 
```

调用 EditEntry.createCashExpenditure() 时，日志显示 EditEntry.current 已正确填充并保存到数据存储区。数据存储查看器也显示数据。但是在回发时，在 newEntry.xhtml facelet 中，editEntry.entries 变为空，EditEntry.current 丢失所有数据。

[我已经按照http://java.zacheusz.eu/google-app-engine-http-session-vs-jsf-en/394/](http://java.zacheusz.eu/google-app-engine-http-session-vs-jsf-en/394/)中提到的那样设置了 ForceSessionSerializationPhaseListener 日志显示此侦听器已被调用。

在 web.xml 中，javax.faces.PROJECT_STAGE 是 Production，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:35:10.930

我面临同样的问题，重定向后，之前的会话消失了。它仅在在线部署时发生。

我认为这是由于 javax.faces.STATE_SAVING_METHOD 的会话变量设置为“客户端”（在 web.xml 中）

所以在重定向之前，我需要明确设置会话如下：

```
getSessionScope().put(sessionname,sessionObj);

public Map getSessionScope() {
  return getFacesContext().getExternalContext().getSessionMap();
} 
```

# ruby - 使用 CORS 方法访问受 Kerberos 保护的 REST 服务

> ID：12897713
> 
> 赞同：4
> 
> 时间：2012-10-15T14:24:45.463
> 
> 标签：ruby, ajax, apache, kerberos, cors

我尝试从 Ajax 调用跨域 REST 服务。为了完成 CORS，我尝试将 Access-Control-Allow-Origin 标头放入服务 Aapache 配置中。标头添加 Access-Control-Allow-Origin "*" 标头添加 Access-Control-Allow-Methods "GET"

当我从资源切换 Kerberos 保护时一切都很好并且来自服务器的响应标头允许 CORS

访问控制允许信用... true

访问控制允许方法...获取

访问控制允许原始... my_host

访问控制最大年龄 1728000

当在资源上启用 Kerberos 保护时，问题就开始了。浏览器认为不允许跨域访问。响应头：

连接保活

内容编码gzip

内容长度343

内容类型文本/html；charset=iso-8859-1DateMon，2012 年 10 月 15 日 14:05:43 GMT

Keep-Alivetimeout=5, max=100ServerApache/2.2.14 (Ubuntu)VaryAccept-Encoding

WWW-AuthenticateNegotiate

基本领域="Kerberos 登录"

是否存在我们可以使用 CORS 对 Kerberos 受保护资源进行跨域请求的方法？

# xaml - 使用 Tiles 模板 windows8

> ID：12897714
> 
> 赞同：2
> 
> 时间：2012-10-15T14:24:46.400
> 
> 标签：xaml, windows-8, microsoft-metro, tiles

我正在尝试使用图块模板（显示图像并切换显示文本的图块）

[http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx#TileSquarePeekImageAndText04](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx#TileSquarePeekImageAndText04)

问题是：我将这个 XML 放在哪里以及如何在 XAML 中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:31:17.517

您不在 XAML 中调用它，而是将它提供给[TileUpdater](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.aspx)实例，正如您从下面的[TileUpdateManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdatemanager.aspx)文档中看到的那样。这个简单的场景处理[本地通知](http://blogs.msdn.com/b/jimoneil/archive/2012/08/07/windows-8-notifications-local-notifications.aspx)（但您也可以利用[预定](http://blogs.msdn.com/b/jimoneil/archive/2012/08/08/windows-8-notifications-scheduled-notifications.aspx)的、[定期](http://blogs.msdn.com/b/jimoneil/archive/2012/08/09/windows-8-notifications-periodic-notifications.aspx)的和[推送](http://blogs.msdn.com/b/jimoneil/archive/2012/10/15/windows-8-notifications-push-notifications.aspx)通知）。

查看[应用程序磁贴和徽章](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)以及[推送和定期通知](http://code.msdn.microsoft.com/windowsapps/push-and-periodic-de225603)示例以获取指导。

```
function sendTileTextNotification() {
    var Notifications = Windows.UI.Notifications;

    // Get an XML DOM version of a specific template by using getTemplateContent.
    var tileXml = Notifications.TileUpdateManager.getTemplateContent(Notifications.TileTemplateType.tileWideText03);

    // You will need to look at the template documentation to know how many text fields a particular template has.
    // Get the text attribute for this template and fill it in.
    var tileAttributes = tileXml.getElementsByTagName("text");
    tileAttributes[0].appendChild(tileXml.createTextNode("Hello World!"));

    // Create the notification from the XML.
    var tileNotification = new Notifications.TileNotification(tileXml);

    // Send the notification to the calling app's tile.
    Notifications.TileUpdateManager.createTileUpdaterForApplication().update(tileNotification);
} 
```

# python - Heroku 路由器日志记录格式

> ID：12897717
> 
> 赞同：5
> 
> 时间：2012-10-15T14:24:57.790
> 
> 标签：python, logging, heroku, flask

我最近在 Heroku 上部署了一个 Flask 应用程序。它在现有 API 之上提供 API，并且需要用户提供原始服务的机密 API 密钥。该应用程序实际上只是几个表单，其值通过 ajax 传递到服务器上的特定 URL。没有什么花哨。我采取措施不在应用程序中存储机密信息，并且不希望在应用程序的任何地方留下任何痕迹。

查看来自 的日志`heroku logs --source heroku`，heroku 路由器进程存储应用程序的所有 HTTP 请求，包括那些包含机密信息的请求。

有没有办法指定`heroku`进程的日志格式以便不存储提供的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T02:53:44.643

正如其他评论者所提到的，将机密信息放在 URL 中是一种不好的做法。在到服务器的往返过程中，这些可能会被多个系统（例如路由器、代理服务器、缓存）缓存或记录下来。有几种方法可以解决这个问题：

*   把它们放在一个[`Authorization`header](http://en.wikipedia.org/wiki/Basic_access_authentication)中。这可能是基于 REST 的 API 处理身份验证的最常见方式。

*   将它们放入 POST 正文中。这可以将其从 URL 中取出，但在语义上有点奇怪，说您正在将凭据发布到某个资源（如果这是 REST API），除非它是登录调用。

# python - 获取我最新推文的 Python 脚本在我的服务器上停止工作

> ID：12897720
> 
> 赞同：1
> 
> 时间：2012-10-15T14:25:01.533
> 
> 标签：python, twitter, python-twitter

考虑以下代码：

```
import twitter
api = twitter.Api()
most_recent_status = api.GetUserTimeline('nemesisdesign')[0].text 
```

在我的服务器（nemesisdesign.net）上几天前停止工作。

如果我在自己的机器上尝试相同的代码，它就可以正常工作。

这是堆栈跟踪：

```
>>> most_recent_status = api.GetUserTimeline('nemesisdesign')[0].text
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "build/bdist.linux-i686/egg/twitter.py", line 1414, in GetUserTimeline
    json = self._FetchUrl(url, parameters=parameters)
  File "build/bdist.linux-i686/egg/twitter.py", line 2032, in _FetchUrl
    url_data = opener.open(url, encoded_post_data).read()
  File "/usr/local/lib/python2.6/urllib2.py", line 397, in open
    response = meth(req, response)
  File "/usr/local/lib/python2.6/urllib2.py", line 510, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/local/lib/python2.6/urllib2.py", line 435, in error
    return self._call_chain(*args)
  File "/usr/local/lib/python2.6/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/usr/local/lib/python2.6/urllib2.py", line 518, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 404: Not Found 
```

有什么提示吗？我没有线索 ... ：-（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:05:21.867

前 3 个一般要点：

1.  正如 Paul 所说，Twitter 弃用了他们 API 的许多部分。您应该检查您是否正在使用当前支持的机制。

2.  官方的 twitter python 文档非常糟糕。最后我检查了一下，它们没有反映任何当前的库或连接协议。将它们用作最后​​的手段。

3.  twitter 推荐的 python 库都已经过时了。许多根本不起作用，大多数都不适用于当前的 API。

我建议您将库切换到 Twython。它得到积极维护并支持当前的 API。还有一些其他积极维护的 Twitter 库。如果某些东西在 2 个月内得到了修补 - 找到另一个库。

查看您的确切代码：

1.  您的 API 对象未传递任何凭据。IIRC，这在 1.0 API 中是允许的，但 1.1 API 不允许这样做 - 您现在必须使用 API 凭据进行身份验证：

    *   [https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)（当前）
    *   [https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)（过去）
2.  您应该尝试检查该对象并找出创建 404 的 URL。我猜它是一个 1.0 端点。您可能在本地使用更新版本的“twitter”包（无论如何，该名称空间中有多个），但在服务器上使用不同的包。您应该检查每台机器上的版本。

3.  您的代码应该捕获 HTTP 错误。Twitter 的 API 非常好，可以使用 HTTP 状态代码作为错误消息 ( [https://dev.twitter.com/docs/error-codes-responses](https://dev.twitter.com/docs/error-codes-responses) ) 的一部分，并且还会在标头上发送信息。这通常可以准确地告诉您发生了什么。像 Twython 这样的库会为您完成大部分工作。

不过，您提供的代码不可能导致该错误 - 所以我不知道发生了什么。

不传递凭据应该生成 400；错误的凭据是 401。速率限制是 420、429。阻塞可能是 404 或 420。

如果我不得不猜测 - 在本地你有一个在 1.1 API 端点之后的包，但是你的服务器有一个在 1.0 之后的包的版本 - 它不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:35:44.797

Twitter 最近弃用了他们的旧 API。有没有可能你还在使用它？

请注意，更改应该要求您更新到新的基于 OAuth 的身份验证模型。如果您的网站正在访问单个帐户的推文，您可以使用[https://dev.twitter.com/docs/auth/oauth/single-user-with-examples](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples)中的流程来避免提示用户访问。

# visual-studio-lightswitch - 无法从 Lightswitch 应用程序编辑外部托管的 SQL 数据库

> ID：12897723
> 
> 赞同：2
> 
> 时间：2012-10-15T14:25:08.623
> 
> 标签：visual-studio-lightswitch

我已经设置了一个 Lightswitch 2012 应用程序（目前在本地）。当我访问本地托管的“外部”SQL Server 2012 数据库时，我可以毫无问题地访问表以及从表中添加、删除或编辑数据。

但是，一旦我将 Lightswitch 数据源连接到同一个数据库，但托管在托管服务器上，我就可以完全正常地连接和读取数据......但我无法添加、删除甚至编辑任何数据中的任何数据桌子。SQL Server 2008 R2 数据库也会出现同样的问题。

为了允许编辑外部托管的 SQL Server 数据库，我需要做一些明显（或不）的事情。

# ruby-on-rails - Ruby on Rails 提交按钮

> ID：12897724
> 
> 赞同：2
> 
> 时间：2012-10-15T14:25:12.190
> 
> 标签：ruby-on-rails, ruby, rest, web

如何将表单上的提交按钮更改为文本？

```
<%= f.submit "Text" %> 
```

我知道如何更改按钮上的文本，但我需要更改提交方式。您可以点击链接，例如提交并提交。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:32:39.020

你没有说你使用的是什么红宝石版本。但是试试这个

```
<%= submit_tag "Text" %> 
```

请注意，这里没有表单助手，所以没有“f”。在前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:39:36.883

为了将表单的提交更改为由链接而不是提交按钮触发，您必须使用 javascript 而不是仅使用原始生成的 HTML。

请参阅StackOverflow 上的[类似答案](https://stackoverflow.com/questions/4791538/rails-3-submit-form-with-link)，但 jQuery 中可能的解决方案（已融入最新版本的 Rails）的摘要如下：

```
$('#submit_link').click(function(){
    $('form').submit();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:27:09.723

**更新**：这应该在 Rails 2.3.x 中使用 HAML 表示法：

```
- form_for(@object) do |f|
  = f.submit 'Update Or Whatever' 
```

您也可以尝试“按钮”标签或使用看起来像按钮的图像链接。

# xcode - 未找到符号：带有 IOS 4.3 模拟器的 _objc_release

> ID：12897726
> 
> 赞同：1
> 
> 时间：2012-10-15T14:25:14.537
> 
> 标签：xcode, ios4, ios-simulator, automatic-ref-counting

**更新：当您的系统正常工作时，请发表评论。这将确认这是我的设置中的问题，而不是 XCode 中的错误。**

将我的开发系统升级到 XCode 4.5.1 并使用 IOS SDK 6.0 编译后，在 IOS 4.3 模拟器上运行时出现以下错误：

```
dyld: lazy symbol binding failed: Symbol not found: _objc_release
  Referenced from: /Users/baraupp/Library/Application Support/iPhone Simulator/4.3.2/Applications/AFD73AB4-7047-468B-A20B-9C941850ED3C/Flyskyhy.app/Flyskyhy
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/Foundation.framework/Foundation

dyld: Symbol not found: _objc_release
  Referenced from: /Users/baraupp/Library/Application Support/iPhone Simulator/4.3.2/Applications/AFD73AB4-7047-468B-A20B-9C941850ED3C/Flyskyhy.app/Flyskyhy
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/Foundation.framework/Foundation 
```

我已将部署目标设置为 4.3，并在项目中使用 ARC，在 -fno-objc-arc 上有一些文件。编译和链接成功，没有错误，尝试在模拟器上运行时失败。在我升级之前它曾经工作正常。

**编辑**：

我发现了一个[类似的 Stackoverflow 问题](https://stackoverflow.com/questions/8112035/libobjc-a-dylib-compile-error-on-ios-4-3)，它问的问题几乎完全相同，它的答案建议将 -fobjc-arc 添加到其他链接器标志。不幸的是，这并没有解决我的问题。**编辑**：我检查了链接阶段实际使用的标志，并且 -fobjc-arc 标志在链接时存在，也没有我明确添加 -fobjc-arc 。

正如布拉德在评论中所建议的那样，我将库添加`libarclite_iphoneos.a`到项目中，但这也无济于事。我在 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc 中找到了该库，在我看来这是一个奇怪的位置，但我在其他任何地方都找不到它。

我也在那个库上做了'nm'，它也没有定义丢失的`_objc_retain`符号。它确实定义了 a `_objc_retain$non_lazy_ptr`，但不确定这意味着什么。

**编辑**：我发现图书馆被忽略了：

```
ld: warning: ignoring file libarclite_iphoneos.a, missing required architecture i386 in file libarclite_iphoneos.a 
```

很明显，它不是正确的文件。但是我在系统的其他任何地方都找不到相同的文件（我用“find”搜索过）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:05:31.517

该问题是由类类别中的 +initialize 方法触发的。显然，Apple 链接器没有正确处理这种情况。

在网上搜索了很多之后，我看到其他人也遇到了 +load 和 +initialize 方法、ARC 和 4.3 兼容性的问题。

就我而言，我在一个类别中初始化了一个静态变量，如下所示：

```
@implementation NSDictionary (FormAccess)

static NSRegularExpression *pattern;

+ (void) initialize
{
    pattern = [[NSRegularExpression alloc] initWithPattern:@"(\\w+)|\\[([0-9]+)\\]" options:0 error:nil];
}

...

@end 
```

当我第一次使用变量时将其替换为显式初始化时，问题就消失了。我不需要添加任何链接器标志。

请注意，如果您有一个使用某些 ARC 文件的非 ARC 项目，您仍然需要在“Other Linker Flags”中添加“-fobjc-arc”标志，以避免出现相同的错误消息。

# c# - 滚动时列 DisplayIndex 不正确

> ID：12897729
> 
> 赞同：1
> 
> 时间：2012-10-15T14:25:21.813
> 
> 标签：c#, winforms, datagridview, scroll

我正在使用 DataGridView，并遇到了一个问题，即根据 DisplayIndex，列有时没有以正确的顺序显示。[我在另一个网站http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/35c1ed09-f4a4-4b3d-bd46-35a11cb8a9bc](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/35c1ed09-f4a4-4b3d-bd46-35a11cb8a9bc)上发现了同样的问题。

问题似乎是当列没有出现在网格的初始显示上时，因为它偏向右侧并且需要滚动才能看到它。当列足够少以至于无需滚动即可看到所有列时，则顺序正确。如果添加了一列，其中一列需要滚动才能看到，那么根据 DisplayIndex，右边的列将不是最后一列，而是应该早先显示的列。

虽然我可以尝试更改窗口中的逻辑以类似于上面链接中的建议工作，但我不喜欢基本问题只是被掩盖并且需要解决方法。是否有人对如何以解决问题本身而不是解决方法的方式解决此问题有任何建议？

这是我目前如何订购的代码片段：

```
// Fill the data grid view with data from the database.
dataGridView1.DataSource = null;
DataTable dt = // Logic to get data from DB here
dataGridView1.DataSource = dt;

// Get the column display data.  This can change per user.
DataTable columnDisplay = // Logic to get data from DB here

bool foundMatch;

foreach (DataGridViewColumn column in dataGridView1.Columns)
{
    foundMatch = false;
    foreach (DataRow row in columnDisplay.Rows)
    {
        if (row["column_name"].ToString().Equals(column.Name, StringComparison.CurrentCultureIgnoreCase))
        {
            foundMatch = true;
            if (row["show_in_window"].ToString().Equals("y"))
            {
                // Set the column placement and display name.
                dataGridView1.Columns[column.Name].DisplayIndex = Convert.ToInt32(row["column_sequence"].ToString());
                dataGridView1.Columns[column.Name].HeaderText = row["display_name"].ToString();
                dataGridView1.Columns[column.Name].Width = 105;
            }
            else
            {
                // Hide the column.
                dataGridView1.Columns[column.Name].Visible = false;
            }
            break;
        }
    }

    // If the column is not in the display table, then it should not be displayed at all.
    if (!foundMatch)
        column.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:52:10.027

好的，由于没有人回复，我会提供更新 - 我没有花时间解决这个问题。它被认为是一个足够低的优先级，我可能几个月都不会得到它，如果有的话。

自原始帖子以来，我发现的一条有趣的信息是，当修改列的显示索引号时，其余列会自动更改以适应它。当我阅读 msdn 文档时，这对我来说并不明显，所以也许它会对其他任何偶然发现的人有所帮助。

# ajax - 有效地对数据库中的时间序列数据进行二次抽样

> ID：12897730
> 
> 赞同：3
> 
> 时间：2012-10-15T14:25:23.907
> 
> 标签：ajax, postgresql, data-visualization

我有一个存储在 PostgreSQL 数据库中的时间序列值（例如，股票市场价格的随机游走）。这是一个非常大的表，我希望能够以同样快的速度处理任意时间跨度的查询。我脑子里有[这张图表](http://www.highcharts.com/stock/demo/lazy-loading)，我想知道他们是怎么做到的。

一个简单的例子：

```
WITH t(ts, val) AS ( VALUES
    ('2012-10-04 00:00:00'::timestamp, 1.11::numeric),
    ('2012-10-04 00:00:01', 1.21),
    ('2012-10-04 00:00:02', 1.25),
    ('2012-10-04 00:00:03', 1.41),
    ('2012-10-04 00:00:04', 1.31),
    ('2012-10-04 00:00:05', 1.25),
    ('2012-10-04 00:00:06', 1.33)) 
```

（假设timestamp 列上有一个索引。）该表很大，检索时间跨度（例如，一年四分之一）的所有值需要很长时间。但是，由于我想要对这些数据做的只是绘制一个图表来可视化全球趋势，我并不真的需要从那个时期获取整个数据集，但一个有代表性的子集就可以了。

我想到的事情：

*   生成一个子语句列表，每个子语句检索一个短子时间间隔的任意值（例如，每小时间隔一个值）。
*   聚合值，例如`AVG()`和 group by`date_trunc('hour', ts)`或类似的（但这本身会更快吗？可能会创建另一个包含预聚合值的表？）

有没有办法实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:12:42.260

我的第一个冲动是用聚合数据创建一个*物化视图。*这应该非常快（不计算创建它的一次性操作。）

除此之外，如果您不想在数据库中创建更多对象，那么（真正的）随机选择与索引相结合可能足够快速且有效。

根据表格的具体情况和实际大小以及对结果的精确程度的要求，您可能能够[沿着这些路线](https://stackoverflow.com/questions/8674718/best-way-to-select-random-rows-postgresql/8675160#8675160)取得一些成果，这可能会相对较快。

# ios - 并发进程执行的同步

> ID：12897731
> 
> 赞同：1
> 
> 时间：2012-10-15T14:25:25.800
> 
> 标签：ios, multithreading

我对数据处理有一些并发操作。在处理过程中，我需要检索该位置的反向地理编码。众所周知，它`- (void)reverseGeocodeLocation:(CLLocation *)location completionHandler:(CLGeocodeCompletionHandler)completionHandler`也在后台线程中执行地理编码请求，并在调用后立即返回。当地理编码完成请求时，它会在主线程上执行完成处理程序。在地理编码器检索结果之前，如何阻止我的并发操作？

```
__block CLPlacemark *_placemark

- (NSDictionary *)performDataProcessingInCustomThread
{
    NSMutableDictionary *dict = [NSMutableDictionary alloc] initWithCapacity:1];
    // some operations

    CLLocation *location = [[CLLocation alloc] initWithLatitude:40.7 longitude:-74.0];
    [self proceedReverseGeocoding:location];

    // wait until the geocoder request completes

    if (_placemark) {
        [dict setValue:_placemark.addressDictionary forKey:@"AddressDictionary"];

    return dict;
}

- (void)proceedReverseGeocoding:(CLLocation *)location
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        if ([error code] == noErr) {
            _placemark = placemarks.lastObject;
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:16:26.403

为此，我们可以使用`dispatch_semaphore_t`. 首先我们需要在类中添加信号量：

```
dispatch_semaphore_t semaphore; 
```

当我们正在处理数据并准备接收地理编码数据时，我们应该创建调度信号量并开始等待信号：

```
semaphore = dispatch_semaphore_create(0);
[self proceedReverseGeocoding:location];
dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER); 
```

在 CLGeocodeCompletionHandler 结束时，我们只需要发送信号以恢复数据处理：

```
dispatch_semaphore_signal(semaphore); 
```

在此之后，数据处理将继续

# android - 动态更新 TableLayout

> ID：12897732
> 
> 赞同：0
> 
> 时间：2012-10-15T14:25:25.480
> 
> 标签：android, dynamic, tablelayout, redraw

编辑：正如 Blumer 指出的那样，我没有将项目添加到表格中，所以出现这个问题只是因为我粗心而且我没有看到我的错误。

我正在尝试创建一个动态 TableLayout，因为我必须从服务器接收结果并根据结果添加行，但表没有更新。（此外，TableLayout 已经有 1 个初始行，即标题行）。

这是我的代码：

```
 Room[] rooms = State.rooms;
    TableLayout tblBookDetails = (TableLayout) findViewById(R.id.tblbookdetails);
    for(int i = 0; i < rooms.length; i++) {
        TableRow tr = new TableRow(this);
        tr.setLayoutParams(new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        LayoutParams layout_wrapwrap = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        layout_wrapwrap.rightMargin = 10; //TODO: Convert into DP
        Resources res = getResources();

        TextView txt1 = new TextView(this);
        txt1.setLayoutParams(layout_wrapwrap);
        txt1.setTextColor(res.getColor(android.R.color.black));
        txt1.setText(rooms[i].name);
        TextView txt2 = new TextView(this);
        txt2.setLayoutParams(layout_wrapwrap);
        txt2.setTextColor(getResources().getColor(android.R.color.black));
        txt2.setText(rooms[i].price + " " + rooms[i].currency);
        EditText edit1 = new EditText(this);
        edit1.setLayoutParams(layout_wrapwrap);
        //Must use deprecated method, since support library does not provide for this.
        edit1.setBackgroundDrawable(res.getDrawable(android.R.drawable.edit_text));
        edit1.setEms(3);
        edit1.setInputType(InputType.TYPE_CLASS_NUMBER);
        EditText edit2 = new EditText(this);
        edit2.setLayoutParams(layout_wrapwrap);
        //Must use deprecated method, since support library does not provide for this.
        edit2.setBackgroundDrawable(res.getDrawable(android.R.drawable.edit_text));
        edit2.setEms(3);
        edit2.setInputType(InputType.TYPE_CLASS_NUMBER);
        Spinner spinner = new Spinner(this);
        layout_wrapwrap.rightMargin = 0;
        spinner.setLayoutParams(layout_wrapwrap);

        Integer[] numbers = new Integer[rooms[i].count];
        for(int j = 0; j < numbers.length; j++) {
            numbers[j] = i + 1;
        }
        ArrayAdapter<Integer> adapter = new ArrayAdapter<Integer>(
                BookActivity.this, R.layout.spinner_textview, numbers);
        spinner.setAdapter(adapter);
        tblBookDetails.addView(tr);
    }
    //Another exquisite beauty of Java.
    Log.d("USR", Integer.valueOf(tblBookDetails.getChildCount()).toString());
    tblBookDetails.invalidate();
    tblBookDetails.refreshDrawableState(); 
```

为了防止混淆，Room[] 数组只是一个简单的属性持有者类。这段代码看起来非常复杂，并且表格没有更新。我在互联网上搜索了很多，我找不到任何解决这个问题的方法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:37:24.500

我看到你在哪里添加`tr`，`tblBookDetails`但我看不到你在哪里放`txt1`, `txt2`,`edit1`等`tr`。尝试将这些视图添加到行中，我认为这应该可以让您到达那里，因为现在您似乎正在添加`TableRow`，但其中没有任何内容。

# vbscript - ADS 用户详细信息 - 子域 - 来自 vbs 文件

> ID：12897735
> 
> 赞同：0
> 
> 时间：2012-10-15T14:25:44.810
> 
> 标签：vbscript, adsi

我设法在没有从我的 ADS 域（例如，mydomain.com）中指定身份验证详细信息的情况下获取 ADS 用户。我使用了 ADODB.Connection 和 ADODB.Command。

我也有像 test.mydomain.com 这样的子域。如何通过指定属于 test.mydomain.com 的用户的身份验证详细信息从子域获取用户详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:41:17.630

您可以使用其 LDAP 名称作为搜索基础来查询来自受信任域的记录。但是，由于父域的 DC 不包含有关子域中对象的信息，它会生成一个[引用](http://technet.microsoft.com/en-us/library/cc978014.aspx)。该`ADODB.Command`对象不会自动[追踪](http://blogs.technet.com/b/ad/archive/2009/07/06/referral-chasing.aspx)该引用，因为相应的[命名属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746471%28v=vs.85%29.aspx) `"Chase referrals"`默认为 0x00 ( [`ADS_CHASE_REFERRALS_NEVER`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa772250%28v=vs.85%29.aspx))。您必须将该属性设置为以下两个值之一

*   `ADS_CHASE_REFERRALS_SUBORDINATE`(0x20)
*   `ADS_CHASE_REFERRALS_ALWAYS`(0x60)

使您的查询跟随推荐。例子：

```
base   = "<LDAP://dc=test,dc=example,dc=org>"
filter = "(&(objectCategory=computer)(name=foo*))"
attr   = "name,description"
scope  = "subtree"

Set conn = CreateObject("ADODB.Connection")
conn.Provider = "ADsDSOObject"
conn.Open "Active Directory Provider"

Set cmd = CreateObject("ADODB.Command")
Set cmd.ActiveConnection = conn
cmd.CommandText = base & ";" & filter & ";" & attr & ";" & scope
cmd.Properties("Chase referrals") = &h60  ' <-- here

Set rs = cmd.Execute 
```

我编写了一个包装类 ( [ADQuery](http://www.planetcobalt.net/sdb/adquery.shtml) ) 来封装 Active Directory 查询的样板代码（因为我厌倦了一遍又一遍地编写它）。有了它，您可以将上述内容简化为以下内容：

```
Set qry = New ADQuery
qry.SearchBase = "dc=test,dc=example,dc=org"
qry.Filter     = "(&(objectCategory=computer)(name=foo*))"
qry.Attributes = Array("name", "description")

Set rs = qry.Execute 
```

不过，无论哪种方式，您可能仍需要在 DC 上运行脚本。

# typescript - 你如何指定一个类属性是一个整数？

> ID：12897742
> 
> 赞同：149
> 
> 时间：2012-10-15T14:25:58.380
> 
> 标签：typescript

我正在试验`TypeScript`，并且在创建一个`ID`应该是一个字段的类的过程中`integer`，我有点困惑。

首先，在带有 TypeScript 插件的 Visual Studio 2012 中，我`int`在智能感知类型列表中看到。但我得到一个编译错误，上面写着：

> 当前范围内不存在名称“int”。

我查看了语言规范，只看到以下原始类型：`number`、`string`、`boolean`、`null`和`undefined`。没有`integer`类型。

所以，我有两个问题：

1.  我应该如何向**我班级的用户**表明一个特定的字段不仅仅是一个`number`，而是一个`integer`（而不是一个`floating`点或`decimal`数字）？

2.  `int`如果它不是有效类型，为什么我会在智能感知列表中看到它？

更新：到目前为止，我得到的所有答案都是关于如何`JavaScript`没有 int 类型，在运行时很难强制执行`int`类型......我知道这一切。我在问是否有`TypeScript`办法向我班级的用户提供注释，该字段应该是`integer`. 也许是某种特定格式的评论？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-10-15T15:05:28.843

1.  我认为没有直接的方法来指定数字是整数还是浮点数。在 TypeScript 规范第 3.2.1 节中，我们可以看到：

    > “...Number 原始类型对应于类似名称的 JavaScript 原始类型，表示双精度 64 位格式 IEEE 754 浮点值...”

2.  我认为`int`是 Visual Studio 智能感知中的一个错误。正确的是`number`。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-15T15:06:00.177

TypeScript 是 JavaScript 的超集，它没有 int 的概念。它只有一个数字的概念，它有一个浮点数。

一般来说，编译器必须做的工作量来强制 TypeScript int 类型的整数可能是巨大的，在某些情况下，仍然无法确保在编译时只分配整数，这就是为什么无法可靠地将一个添加`int`到 TypeScript 的原因。

当您最初在 Visual Studio 中获得 intelliSense 时，工具无法确定要提供什么，因此您可以获得包括 int 在内的所有内容 - 但一旦您处理已知类型的内容，您将获得明智的 intelliSense。

例子

```
var myInt: number;
var myString: string;

myInt. // toExponential, toFixed, toPrecision, toString
myString. // charAt, charCodeAt, concat, indexOf, lastIndexOf, length and many more... 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-05-25T03:49:21.957

在 TypeScript 中，您可以使用标记来近似有时称为不透明类型的内容。

```
// Helper for generating Opaque types.
type Opaque<T, K> = T & { __opaque__: K };

// 2 opaque types created with the helper
type Int = Opaque<number, 'Int'>;
type ID = Opaque<number, 'ID'>;

// using our types to differentiate our properties even at runtime
// they are still just numbers
class Foo {
    someId: ID;
    someInt: Int;
}

let foo = new Foo();

// compiler won't let you do this due to or markers
foo.someId = 2;
foo.someInt = 1;

// when assigning, you have to cast to the specific type
// NOTE: This is not completely type safe as you can trick the compiler 
// with something like foo.someId = 1.45 as ID and it won't complain.
foo.someId = 2 as ID;
foo.someInt = 1 as Int;

// you can still consume as numbers
let sum: number = foo.someId + foo.someInt; 
```

这样做可以让您在代码中更明确地说明属性期望的类型，并且编译器不允许您在没有强制转换的情况下分配原始值。这不会产生任何额外的 .js 输出，您仍然可以使用这些值作为它们所基于的任何类型。在此示例中，我使用的是数字，但您也可以在字符串和其他类型上使用。

在这个例子中，你仍然可以欺骗编译器接受不是 Int 或 Id 的东西，但如果你试图将 1.45 分配为 Int 或类似的东西，它应该会跳出来。您还可以选择创建用于创建值以提供运行时验证的辅助函数。

有许多不同的方法可以创建“标记”类型。这是一篇好文章：[https ://michalzalecki.com/nominal-typing-in-typescript/](https://michalzalecki.com/nominal-typing-in-typescript/)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-09-08T11:06:40.537

TypeScript 中没有`integer`或`float`只有`number`类型，就像在 JavaScript 中一样。但是如果你想告诉程序员你期望`integer`类型，你可以尝试使用[类型别名](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases)，比如

```
type integer = number;
type float = number;

// example:
function setInt(id: integer) {} 
```

但这仍然是`number`类型，您可以获得`float`.

文档中的部分描述：
*“别名实际上并没有创建新类型 - 它创建了一个新名称来引用该类型。为原语起别名并不是非常有用，尽管它可以用作文档的一种形式。”*

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2020-04-14T01:27:05.027

这对我来说是谷歌上的最高结果，所以我认为我应该提供我找到的解决方案。

# 使用`bigint`

现在是 2020 年并且`bigint`已被接受，值得一提。您可以简单地执行以下操作。请注意，`bigint`与 a 相比， s 对性能的影响更大`number`。

```
const myNumber: bigint = 10n 
```

# 使用标称类型/标记类型/不透明类型

另一种方法是使用标称类型，但可以说它不太符合人体工程学，我不确定它是否比 快`bigint`，但该模式确实可以推广到任何类型，而不仅仅是`number`. TypeScript 对此没有“一流”的支持，所以你必须做一个厚颜无耻的 hack。有一个用于此调用的库[`newtype-ts`](https://github.com/gcanti/newtype-ts)，其中包括常见类型，`Integer`因此您可能只想使用它，但我将在下面解释其工作原理。

首先，我们定义`integer`类型。

```
const TAG = Symbol()
type integer = number & { readonly [TAG]: unique symbol } 
```

确保我们有一个唯一的`TAG`值，这样我们就不会意外地使用相同的键创建一个对象，并且出于同样的原因，我们也使该字段成为唯一的符号。现在，您的整数实际上不会有这个对象字段，但这很好。

有了这个，你仍然可以添加`integer`到`number`using `+`. 不好。因此，您可以通过使用函数按摩类型系统来对此处的参数强制执行类型安全。我只是将其称为警卫，而且您可以再次看到它不是特定于`integer`s 的 - 您可以制作更多不透明的类型并再次使用它。

```
type guard = <A>(f: (...ns: Array<A>) => A, ...ns: Array<A>) => A
const guard: guard = (f, ...ns) => f(...ns) 
```

如果您尝试使用`number`

```
const bad: integer = guard((a, b) => a + b as integer, myCoolInteger, 10) 
```

您会收到如下错误

```
Argument of type '10' is not assignable to parameter of type 'integer'.
  Type '10' is not assignable to type '{ readonly [TAG]: unique symbol; }'.(2345) 
```

请注意，您没有在此处强制执行返回类型（因为您必须使用`as integer`），并且某些运算符（例如）`/`将返回浮点数，因此您可能仍希望进行运行时检查或将 a 添加`Math.round`到的专用版本中`guard`，但这至少会确保您没有尝试同时使用两种单独的数字类型 - 假设您有`GBP`并`USD`尝试添加它们，这可能不是您想要的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-12-24T09:53:48.857

AssemblyScript 支持整数值（及其 asm.js 后端）。您可以使用`--jsFile`.

要手动执行此操作，您可以通过添加将值强制为整数`| 0`。

这提高了性能，因为浏览器引擎现在能够使用整数，这比操作中的浮点数更快。

假设你打算写：

```
function add(a: i32, b: i32) {
  return a + b
} 
```

你应该这样写

```
type i32 = number
function add(a: i32, b: i32) {
  a = a | 0
  b = b | 0
  return a + b
} 
```

或在 JavaScript 中（这是 asc --jsFile 生成的）

```
function add(a, b) {
  a = a | 0
  b = b | 0
  return a + b
} 
```

对于类属性：

```
type i32 = number
class MyClass {
  a: i32 = a | 0
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-15T15:09:44.687

好吧，正如您所见，typescript 没有浮点数据类型，例如 javascript 语言。只有同时`number`覆盖所有`int`的`double`；也许您必须创建一个接受数字的函数并检查它是否是 a`int`或`double`，通过在错误/成功的情况下返回一些状态。像这样的东西作为你的类的方法：

```
function SetN(x:number) {
   var is_int = parseInt(x) === parseFloat(x);
   if(is_int) this.n = x;
   return is_int;
}

//..
y = 10.5;
if(SetN(y)) {
  //OK
} else {
   //error not set y isn't a int
} 
```

注意：它不适用于`10.0`例如如果你真的不想要它，也许你必须将它转换为字符串并尝试找到一个`.`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-15T15:30:34.133

`int`在[早期版本的 javascript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Future_reserved_keywords_in_older_standards)（如果您愿意，可以使用 ECMAScript）中保留以供将来使用关键字。但它现在是一个有效的词（其中“现在”等同于“在最新规范中”）。

例如，在 262 中它仍然被保留，[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

`int`实现一个数据类型，但所有编译时类型检查和转换规则都可用，这将是对打字稿的一个很好的补充。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-02T07:43:42.407

这是一个不进行装箱[的数字接口的实现。](https://stackoverflow.com/a/31174747/2905130)我认为可以使用这种设计来创建 Integer 类型

# c# - 如何在 using 语句中调用异步 wcf 方法？

> ID：12897743
> 
> 赞同：1
> 
> 时间：2012-10-15T14:26:01.377
> 
> 标签：c#, wcf, asynchronous, using-statement

在同步模型中，它很简单

```
using (MyServiceClient msc = new MyServiceClient())
{
   msc.Method();
} 
```

但是如果我必须等到这个方法结束，然后做一些事情，它就行不通

```
private void EventHandler<MethodCompletedEventArgs> myEventHandler = new EventHandler<MethodCompletedEventArgs>(methodBody);

using (MyServiceClient msc = new MyServiceClient())
{
   msc.MethdCompleted += myEventHandler;
   msc.BeginMethod();
}

private void MethodBody()
{
//exception: client state is aborted
} 
```

`using`另外如何在语句中调用异步方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:34:20.037

你不应该这样做。

您应该`MyServiceClient`正常实例化，然后`Dispose`在异步回调处理程序中实例化它。

这是确保实例在回调处理程序被调用后仍然存在并且在回调处理程序完成其工作后被销毁的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:38:58.020

您可以存储对服务客户端的引用，并`Dispose`在事件回调后手动调用其方法。您只需要做一些额外的工作来管理异常并通常确保`Dispose`最终调用它。`msc`还要注意在等待旧实例完成时可能创建/覆盖多个实例的情况：

如果多次执行相同的代码，确保不会处理错误实例的一种方法是使用本地 lambda/匿名函数：

```
MyServiceClient msc = new MyServiceClient();

msc.MethdCompleted += (sender, args) => 
{
    try
    {
        myEventHandler(sender, args);
    }
    finally
    {
        msc.Dispose();
    }
};

msc.BeginMethod(); 
```

它可能会比这更混乱。如果抛出异常，`msc.BeginMethod()`您也应该抓住它并`Dispose`最有可能调用（但您不想`Dispose`多次调用）

# c++ - IntelliSense：表达式必须具有整数或枚举类型

> ID：12897745
> 
> 赞同：0
> 
> 时间：2012-10-15T14:26:06.867
> 
> 标签：c++, types, enums, expression, integral

伙计们，我需要有人解决这个问题吗？当我编译该代码时，出现此错误：

```
 Error: IntelliSense: expression must have integral or enum type 
```

我在这部分有问题：

```
Console(0, V("seta sv_hostname " + servername + ";\n")); 
```

那我该如何解决

```
if (strncmp(command, V("exec config_mp"), 14) == 0)
{
    if (GAME_MODE == 'D')
    {
        CIniReader iniReader(V(".\\teknogods.ini"));
        char *servername = iniReader.ReadString(V("Settings"),V("Servername"),"");

        if (strcmp(servername,"") == 0)
        {
            info("Server name set to defult.");
        }
        else
        {
            //Console(0, V("seta scr_teambalance 1;\n"));
            Console(0, V("seta sv_hostname " + servername + ";\n"));
            info("server name set to: %s.", servername);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:40:43.597

您不能将两个 C 字符串与`+`.

在 C 和 C++ 中，字符串文字是字符数组，当在表达式中用作右值时，它会衰减为指向字符的指针。在 C（和 C++）中，您可以执行指针运算，这意味着您可以从指针中添加或减去整数（或任何整数类型），也可以减去两个指针以获得差异，但不能将两个指针相加. 该表达式`"A" + "B"`不正确，因为它会尝试添加两个`const char*`. 这就是编译器告诉您的：要使表达式`"seta sv_hostname " + servername`正确，`servername`必须是整数或枚举。

如果编写 C++ 代码，您可以使用`std::string`，其中有重载`operator+`，它采用另一个`std::string`或`const char*`然后使用`c_str`成员函数检索 a`const char*`以在需要 C 字符串的接口中使用。

# facebook-graph-api - 用户图片上传到页面画廊

> ID：12897746
> 
> 赞同：1
> 
> 时间：2012-10-15T14:26:08.457
> 
> 标签：facebook-graph-api, upload, photo

为了让用户将图像上传到页面画廊，我已经花了好几个小时。

用户不拥有该页面，也不是该页面的管理员。用户是页面的粉丝。

我设置的应用程序具有所有权限集，并且我正在使用为其生成的访问密钥。

我已返回 OG 数据以确保我使用了正确的专辑 ID。

我认为这根本不可能吗？还有可以生成页面本身的访问密钥吗？

谢谢。

# teamcity - 我应该如何告诉 TeamCity 的 NuGet 安装程序构建步骤同时使用 NuGet.org 和 TeamCity 提供的包源？

> ID：12897747
> 
> 赞同：18
> 
> 时间：2012-10-15T14:26:10.223
> 
> 标签：teamcity, nuget, nuget-server

我的 NuGet 安装程序构建步骤有问题。

我们使用官方 NuGet.org 包和托管在 TeamCity NuGet 服务器上的我们自己的包。如果我将 Packages Sources 留空，则会找到来自 nuget.org 的包，但一旦我指定`%teamcity.nuget.feed.server%`为包源，则找不到来自 nuget.org 的包。

我尝试将 Packages Sources 设置为包含两者，但它仍然不适用于官方 nuget.org 包。

```
https://nuget.org/api/v2/
%teamcity.nuget.feed.server% 
```

这不是 nuget.org 包源的正确 URL 吗？我如何告诉它使用这两种来源？

我在[JetBrains Developer 讨论板上](http://devnet.jetbrains.net/message/5469592#5469592)问过这个问题，但没有得到任何回应。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-27T13:27:58.873

有同样的问题，有趣的是我的 Nuget 源被指定为
`https://www.nuget.org/api/v2/`
`http://nugetserver/nuget`
在第二个 url 上添加正斜杠以使其`http://mynugetserver/nuget/`解决问题。我花了一段时间才弄清楚。现在我的 Nuget-installer 构建步骤运行良好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-15T19:29:53.873

显然，甚至不需要 NuGet 安装程序构建步骤。我编辑了`.nuget/NuGet.targets`文件以包含两个路径并删除了 NuGet 安装程序构建步骤，它现在可以工作了。

最初为此解决方案设置 TeamCity 时，如果没有 NuGet 安装程序步骤，它就无法工作，所以我不知道我还做了哪些不同的工作来完成这项工作，但也许 NuGet.targets 文件一直是关键.

[这篇博](http://tiredblogger.wordpress.com/2012/01/20/nuget-package-restore-multiple-repositories-and-ci-servers/)文的评论为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-22T10:20:38.080

您可以为运行 TeamCity 的用户修改*AppData本地文件夹中的**NuGet.Config*，而不是修改每个项目的 .targets 文件：

 *```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <config>
    <!--<add key="repositoryPath" value="J:\TeamCity7\buildAgent\work\my_shared_packages_dir" />-->
  </config>
  <packageRestore>
    <add key="enabled" value="True" />
  </packageRestore>
  <packageSources>
    <add key="NuGet official package source" value="https://nuget.org/api/v2/" />
    <add key="MMG TeamCity Nuget Server" value="http://myteamcityserver/guestAuth/app/nuget/v1/FeedService.svc" />
  </packageSources>
  <activePackageSource>
    <add key="All" value="(Aggregate source)" />
  </activePackageSource>
</configuration> 
```

每个项目中 .nuget 文件夹内的 NuGet.exe 将首先尊重此处设置的配置，然后应用在 .targets 文件中完成的任何“覆盖”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-01T12:15:21.527

这里同样的问题。我正在使用 TeamCity v10，需要 Nuget 步骤（我的解决方案中没有 .targets 文件）。但是，我使用了另一种方法来添加“额外”包源：

```
c:\BuildAgent\tools\NuGet.CommandLine.2.7.0\tools\Nuget.exe sources Add -Name TeamCity-feed -Source http://myteamcityserver/guestAuth/app/nuget/v1/FeedService.svc/ 
```

之后，我添加了一个 Nuget 安装程序步骤，并且没有在 TeamCity 的包源框中指定任何内容，现在来自公共提要 nuget.org 和我的内部提要的包都可以毫无问题地恢复。*

# ruby-on-rails - 如何获取为模型提供属性名称的载波实例

> ID：12897750
> 
> 赞同：0
> 
> 时间：2012-10-15T14:26:25.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

在我的控制器中，我正在尝试执行以下操作：

```
 uploader = object[params[:attribute]]
  uploader.retrieve_from_store!(params[:file])
  uploader.cache_stored_file!
  send_file uploader.file.path 
```

但问题是`object[params[:attribute]]`返回一个字符串（带有文件名的数据库记录），而不是我的carrierwave对象（我已经检查过object.attribute正在返回上传者，它可以工作）。我怎样才能得到上传者，或者我怎样才能初始化它？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:22:37.587

如果有人遇到同样的问题，我会这样做：

```
uploader = object.send(params[:attribute]) 
```

# html - Bootstrap typeahead - 中止选择处理程序

> ID：12897751
> 
> 赞同：0
> 
> 时间：2012-10-15T14:26:45.837
> 
> 标签：html, twitter-bootstrap, bootstrap-typeahead

我正在使用[bootstrap::typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)通过单击他的标签来选择隐藏值

```
<input name="selected_label" class="typeahead" type="text" />
<input name="selected_value" type="hidden" /> 
```

当用户单击其他地方以中止选择时，我想更新 selected_label （恢复以前的标签）。目的是告诉用户他没有选择任何东西。

有`onclose`处理程序吗？
还是有其他方法可以做到这一点？

# c++ - 如何在字符级别操作 Unicode 字符串？

> ID：12897752
> 
> 赞同：1
> 
> 时间：2012-10-15T14:26:47.597
> 
> 标签：c++, winapi, unicode

有时在字符级别操作字符串是不可避免的。

在这里，我有一个为基于 ANSI/ASCII 的字符串编写的函数，它仅用 LF 替换 CR/LF 序列，也用 LF 替换 CR。我们使用这个是因为传入的文本文件通常有愚蠢的行尾，因为各种文本或电子邮件程序把它们弄得一团糟，我需要它们采用一致的格式，以使解析/处理/输出在未来正常工作。

对于每个字符的单个字节实现，这是从各种行尾到 LF 的这种压缩的相当有效的实现：

```
// returns the in-place conversion of a Mac or PC style string to a Unix style string (i.e. no CR/LF or CR only, but rather LF only)
char * AnsiToUnix(char * pszAnsi, size_t cchBuffer)
{
    size_t i, j;
    for (i = 0, j = 0; pszAnsi[i]; ++i, ++j)
    {
        // bounds checking
        ASSERT(i < cchBuffer);
        ASSERT(j <= i);

        switch (pszAnsi[i])
        {
            case '\n':
                if (pszAnsi[i + 1] == '\r')
                    ++i;
                break;

            case '\r':
                if (pszAnsi[i + 1] == '\n')
                    ++i;
                pszAnsi[j] = '\n';
                break;

            default:
                if (j != i)
                    pszAnsi[j] = pszAnsi[i];
        }

    }

    // append null terminator if we changed the length of the string buffer
    if (j != i)
        pszAnsi[j] = '\0';

    // bounds checking
    ASSERT(pszAnsi[j] == 0);

    return pszAnsi;
} 
```

我正在尝试将其转换为可以与多字节/unicode 字符串一起正常工作的东西，其中下一个字符的大小可以是多字节宽。

所以：

1.  我只需要在有效的字符点（而不是字符的中间）查看字符
2.  我需要正确复制被拒绝部分的字符部分（即复制整个字符，而不仅仅是字节）

我知道 _mbsinc() 会给我一个真实字符的下一个开始的地址。但是 Unicode (UTF16) 的等价物是什么，是否已经存在能够复制完整字符的原语（例如 length_character(wsz)）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T14:35:46.163

UTF-8 的一大优点是，如果您只关心 ASCII 子集，那么您的代码根本不需要更改。非 ASCII 字符被编码为多字节序列，其中所有字节都设置了高位，使它们本身不在 ASCII 范围内。您的 CR/LF 替换无需修改即可工作。

UTF-16 具有相同的属性。可以编码为单个 16 位实体的字符*永远不会*与需要多个实体的字符发生冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:58:52.020

不要试图在内部保持文本混合任何编码，并与那些真正的地狱一起工作。

首先选择一些“内部”编码。当目标平台是 UNIX 时，UTF-8 是很好的候选者，在那里显示会稍微容易一些。当目标平台是 Windows 时，UTF-16 是很好的候选者，Windows 无论如何都会在内部使用它。无论您选择什么，都坚持下去。

然后将所有传入的“脏”文本转换为该编码。您还可以进行一些实际上看起来与您的代码完全一样的重新格式化，只有在 wchar_t 包含 UTF-16 的情况下，您必须使用像`L'\n'`.

# objective-c - Objective-C 在地图方向中使用多个点

> ID：12897754
> 
> 赞同：1
> 
> 时间：2012-10-15T14:27:01.873
> 
> 标签：objective-c, mkmapitem

我正在使用新的 MKMapItem，一切似乎都很好。当我将“openMapsWithItems”与该选项一起使用时，我会打开地图应用程序，其中包含从“plc”到“plc3”的路线，但我想使用所有 3 个地标，例如开始 -> 点 -> 目的地。那可能吗？

```
NSMutableArray *arrayMapItem = [[NSMutableArray alloc] init];

MKPlacemark *plc = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(43.77398, 11.248) addressDictionary:nil];
MKMapItem *partenza = [[MKMapItem alloc] initWithPlacemark:plc];
[partenza setName:@"Piazza"];

MKPlacemark *plc2 = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(43.780, 11.248) addressDictionary:nil];
MKMapItem *mezzo = [[MKMapItem alloc] initWithPlacemark:plc2];
[mezzo setName:@"Mezzo"];

MKPlacemark *plc3 = [[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(43.783, 11.248) addressDictionary:nil];
MKMapItem *destinazione = [[MKMapItem alloc] initWithPlacemark:plc3];
[destinazione setName:@"Destinazione"];

[arrayMapItem addObject:partenza];
[arrayMapItem addObject:mezzo];
[arrayMapItem addObject:destinazione];

NSDictionary* options = [[NSDictionary alloc] initWithObjectsAndKeys:
                         MKLaunchOptionsDirectionsModeDriving,
                         MKLaunchOptionsDirectionsModeKey, nil];

[MKMapItem openMapsWithItems:arrayMapItem launchOptions:options]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:40:17.473

从 MapKit 文档中，它指出：

> 如果您在 launchOptions 字典中指定 MKLaunchOptionsDirectionsModeKey 选项，则 mapItems 数组中的项目不得超过两个。如果数组包含一项，则地图应用程序会生成从用户当前位置到地图项指定位置的路线。如果数组包含两项，地图应用程序会生成从数组中第一项的位置到第二项的位置的路线。

如果您使用该`MKLaunchOptionsDirectionsModeKey`选项，则应该只传递数组中的两项。

# java - 需要将依赖项复制到指定文件夹

> ID：12897762
> 
> 赞同：1
> 
> 时间：2012-10-15T14:27:25.380
> 
> 标签：java, maven, build

是否可以在 Maven 构建过程中制作特定依赖项的副本并将其放置到所需的文件夹中？此依赖项用于主项目以及小型实用程序脚本中，因此它们应该存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:35:31.923

使用
[Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/)
[复制依赖](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)

# azure - 两个区域之间的地理复制

> ID：12897765
> 
> 赞同：4
> 
> 时间：2012-10-15T14:27:31.263
> 
> 标签：azure, azure-table-storage

我知道默认情况下，天蓝色服务已启用异地复制。但是，它仅在同一区域内的两个地方之间这样做。例如，如果我选择了北欧，则地理复制将位于西欧。是否有可能让我在美国进行复制？

我想提供服务，使我的数据库可以位于两个或更多区域，以便访问数据库时的响应时间最短。也就是说，对于美国的用户，他将访问美国的数据库副本，而对于欧洲用户，他将访问欧洲的副本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T19:02:43.423

首先，您应该知道已为 Azure STORAGE 服务启用异地复制，但尚未为任何其他 Azure 服务启用。然后，您还应该知道，这种异地复制主要用于灾难恢复（并且仅在今天）。

如果您必须复制数据库（Windows Azure SQL 数据库，又名 WASD），您可以使用[SQL 数据同步](http://msdn.microsoft.com/en-us/library/hh456371.aspx)- 迄今为止唯一已知的同步 Azure 数据库的方法（在不同地理区域之间，或在 Azure 和本地之间） .

不支持 Windows Azure 云服务异地复制。如果您需要在地理上分布您的应用程序，您必须自己管理跨不同数据中心的云服务部署。如果是这种情况，对于 Azure 存储，我建议将单个存储服务用于 WRITE 操作，而将 Azure CDN 用于 READ 操作。否则可能会变得太复杂。当然，选择的架构方法将取决于应用程序的要求（和预期负载）。

然后，您必须将不同的部署与[Azure 流量管理器](https://azure.microsoft.com/documentation/articles/traffic-manager-overview/)与“性能”算法设置相结合。

**编辑（2014 年 11 月）**

截至 2014 年第三季度，[Azure SQL 数据库还支持异地复制](http://msdn.microsoft.com/en-us/library/azure/dn741339.aspx)。并且 Azure 数据同步已被弃用和删除的服务。Azure 存储复制继续提供 3 种不同的风格：[区域冗余](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/08/01/introducing-zone-redundant-storage.aspx)、[地理冗余、具有读取访问权限的地理冗余](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx)。而且仍然没有在地理区域之间复制的选项（即从欧盟到美国）。[复制仍然只是地理区域对（相同地理）之间的一种选择](http://azure.microsoft.com/en-us/regions/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:59:47.973

我相信今天开箱即用是不可能的。您需要使用数据同步（对于 SQL Azure）和类似技术（对于 Windows Azure 存储）自行完成。

# android - 如何优化要在 GridView 中使用的自定义 ImageView？

> ID：12897775
> 
> 赞同：2
> 
> 时间：2012-10-15T14:28:02.530
> 
> 标签：android, optimization, android-imageview, custom-component, android-gridview

我开发了这个自定义`ImageView`类来覆盖一些默认行为以满足我的需要。让我描述一下这个习俗`ImageView`的作用......

假设您有一堆图标要显示在`GridView`和`drawable-mdpi`文件`drawable-hdpi`夹中，它们的大小分别为 48x48px 和 72x72px。文件夹中没有可用的图标`drawable-xhdpi`。这些`GridView`属性使所有图标大小都为 48x48dp（这将分别转换为 mpdi、hdpi 和 xhdpi 密度的 48px、72px 和 96px）。

由于文件夹中没有图标，所以`drawable-xhdpi`当这个应用程序在如此密度的设备上运行时，图标将从`drawable-hdpi`文件夹中拉出。**由于它们只有 72 像素，而 xhdpi 设备需要 96 像素的图像，因此图标将被拉伸以填充剩余的像素。**

这是我的自定义`ImageView`尝试覆盖的行为。使用我的自定义组件，将发生的情况是图像根本不会被拉伸。例如，在上面使用我的类的示例中，`ImageView`里面的每个`GridView`仍然是 96x96px（因为定义了 48x48dp 大小），但使用的图像来自`drawable-hdpi`72x72px 的文件夹。**将会发生的是，文件夹中的这些图像`drawable-hdpi`将被放置在`ImageView`96x96px 大小的中心，而不会拉伸图像以适应整个视图大小。**

如果上面的内容令人困惑，让我们尝试几张图片。下面的示例不使用`GridView`，我试图简化我的自定义类背后的想法。这些是我用于此示例的源图片：

![源文件](../Images/7d1656b79277b492b93a62b210cbd96c.png)

这是**HDPI**设备上的结果：

![hdpi-演示](../Images/a760e407b5d0f7ecc3ea82a757343295.png)

这是**XHDPI**设备上的结果：

![xhdpi-演示](../Images/776a41a19a2a4be9d3b26d7980956d11.png)

上面截图中的布局代码是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="10dp"
    android:orientation="vertical">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Standard ImageView:"
        android:textAppearance="?android:attr/textAppearanceLarge"/>

    <ImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_margin="10dp"
        android:scaleType="center"
        android:background="#FFEEEE"
        android:src="@drawable/ic_female"/>
    <ImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_margin="10dp"
        android:scaleType="center"
        android:background="#FFEEEE"
        android:src="@drawable/ic_male"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Custom UnscaledImageView:"
        android:textAppearance="?android:attr/textAppearanceLarge"/>

    <com.sampleapp.widget.UnscaledImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_margin="10dp"
        android:scaleType="center"
        android:background="#FFEEEE"
        android:src="@drawable/ic_female"/>
    <com.sampleapp.widget.UnscaledImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_margin="10dp"
        android:scaleType="center"
        android:background="#FFEEEE"
        android:src="@drawable/ic_male"/>

</LinearLayout> 
```

现在更清楚了吗？这就是我想要做的，而且效果很好，除了一个小的性能问题......现在让我发布我用于此类自定义组件的代码：

**attrs.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <declare-styleable name="UnscaledImageView">
        <attr name="android:src" />
    </declare-styleable>

</resources> 
```

**UnscaledImageView.java：**

```
public class UnscaledImageView extends ImageView {

    private int mDeviceDensityDpi;

    public UnscaledImageView(Context context) {
        super(context);

        mDeviceDensityDpi = getResources().getDisplayMetrics().densityDpi;
    }

    public UnscaledImageView(Context context, AttributeSet attrs) {
        super(context, attrs);

        mDeviceDensityDpi = getResources().getDisplayMetrics().densityDpi;

        TypedArray styledAttrs = context.obtainStyledAttributes(attrs, R.styleable.UnscaledImageView);
        int resourceId = styledAttrs.getResourceId(R.styleable.UnscaledImageView_android_src, 0);

        if(resourceId != 0) {
            setUnscaledImageResource(resourceId);
        }

        styledAttrs.recycle();
    }

    public void setUnscaledImageResource(int resId) {
        setImageBitmap(decodeBitmapResource(resId));
    }

    @SuppressWarnings("deprecation")
    public void setUnscaledBackgroundResource(int resId) {
        BitmapDrawable drawable = new BitmapDrawable(null, decodeBitmapResource(resId));
        drawable.setTargetDensity(mDeviceDensityDpi);
        drawable.setGravity(Gravity.CENTER);

        setBackgroundDrawable(drawable);
    }

    private Bitmap decodeBitmapResource(int resId) {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inDensity = mDeviceDensityDpi;

        return BitmapFactory.decodeResource(getResources(), resId, options);
    }

} 
```

`UnscaledImageView`因此，如果视图在 XML 布局中使用或直接在代码中初始化，则此类将执行此操作。我还提供了 2 种方法，因此可以在代码中更改图像，同时防止其被拉伸。如您所见，这些方法只获取资源 id，到目前为止，我还没有觉得需要直接使用可绘制对象或位图。

现在我遇到的真正问题是......

如果这个类在某些布局中用作单个图像视图，没问题，它只解码一个图像。但是，如果它用于`GridView`可能同时有 40 个图标（我从在我的 xhdpi 设备上运行的应用程序上实际发生的情况中获取这个值）可见的情况下，滚动`GridView`将非常慢，因为它正在`decodeBitmapResource()`调用`BitmapFactory.decodeResource()`每一个图像。

这是我的问题，也是我的问题。**我该如何优化呢？**如果可能的话，完全...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:29:13.543

将这些图像放入`res/drawable-nodpi/`可以做你想做的事（我是说将不同分辨率的图像并排放置）。

这会有点棘手，因为您可能必须遵循命名约定才能为您尝试绘制的给定图像找到最佳资源。可能这将要求您尝试按名称查找图像，这不是检索资源的非常有效的方法。

我想象的方式是：在布局（或其他任何地方）上，指定要使用的图像资源的名称（字符串，而不是 id！）。

在该 nodpi 文件夹中，您将拥有带有预期屏幕密度后缀的图像。

然后，在 setter 方法中，您必须尝试不同的组合才能找到最佳可用资源。

您要思考的问题：如果您要缩小图像怎么办？该资源将比您绘制它的视图大！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T17:10:50.173

尽管**Pedro Loureiro**的答案可能是一个可能的解决方案，但我在意识到一些事情后决定采取不同的方法......

我已经对本地`ImageView`加载和我的`UnscaledImageView`加载进行了计时`GridView`，当然这是非科学的，并且我意识到我的类加载所有图像比本地加载快一点。除了解码资源（他们仍然必须这样做，对吗？）之外，本机方法可能还有其他事情发生，而我的课程只是解码资源（使用`BitmapFactory`），基本上就是这样。

我认为是我的班级`GridView`在滚动时有点慢，但经过几次测试，使用原始`ImageView`版本没有任何调整，滚动时也显示有点不稳定`GrivView`。

我发现解决此问题的解决方案（使用我的班级或本机班级）是将图标缓存在 中`GridView`，为此我使用`LruCache`了推荐的在`GridView`.

这就是我将用来解决我的问题的解决方案。更多详情请参考官方培训指南：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

作为参考，我还发现以下教程很有用： http: [//andrewbrobinson.com/2012/03/05/image-caching-in-android/](http://andrewbrobinson.com/2012/03/05/image-caching-in-android/)

# html - 绝对位置在顶部放置一些边距

> ID：12897782
> 
> 赞同：1
> 
> 时间：2012-10-15T14:28:30.877
> 
> 标签：html, css

根据我的理解，一个绝对定位的元素应该在它应该在的任何位置，如果没有指定顶部或左侧（除了它不占用“布局”空间）。但在这个[链接](http://jsfiddle.net/5Y6J5/)中，它似乎有 margin-top:10px; 放。

```
<table>
    <tr>
        <td>
            <div>default position</div>
        </td>
        <td>
            <div style="position: absolute;">absolute position</div>
        </td>
    </tr>
</table>

div
{
    border: red 1px dotted;
}
td
{
    border: green 1px solid;
} 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:48:59.757

td-elements 的默认 valign 是 center，因此绝对定位的元素将垂直对齐到中心。由于默认情况下它位于左上角，因此它将左上角放置在其容器的垂直中心。

尝试在包含绝对定位元素的 td 元素上设置 valign="top"，您将看到“边距”消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:52:25.633

原因很简单。根据[规范](http://www.w3.org/TR/CSS2/visuren.html)，`absolute`定位元素[位于文档流之外](http://www.w3.org/TR/CSS2/visuren.html#choose-position)，它[也被放置在*“相对于它的包含块”*](http://www.w3.org/TR/CSS2/visuren.html#comp-abspos)中。因此，在不指定位置的情况下，它的上/左角被放置在`td`单元格的中心。

[本例使用`top`and`left`来移动它](http://jsfiddle.net/5Y6J5/6/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T14:35:32.720

我不知道为什么它会增加额外的边距，但解决它的一种简单方法是为它设置一个位置，比如`top: 0px;`or `top: 10px;`。

# objective-c - __NSCFConstantString autocapitalizationType 在 iOS 6 上崩溃

> ID：12897785
> 
> 赞同：1
> 
> 时间：2012-10-15T14:28:35.980
> 
> 标签：objective-c, ios, ios6

我正在开发一个应用程序，它从 UITableView 中显示的 Web 服务器接收数据。每当用户点击任何单元格时，都会推送一个新视图，我在 UITextView 中显示详细描述。当后退按钮被录音时，应用程序会因此错误而崩溃

```
[__NSCFConstantString autocapitalizationType]: unrecognized selector sent to instance 0x10f0e8
2012-10-15 19:51:50.778 Secret[1451:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString autocapitalizationType]: unrecognized selector sent to instance 0x10f0e8' 
```

**此代码在 iOS 5.1 上运行良好，但在 iOS 6 上崩溃**

# html - 将用户引导到页面中的特定位置

> ID：12897788
> 
> 赞同：0
> 
> 时间：2012-10-15T14:28:43.200
> 
> 标签：html, fragment-identifier

我想设置一个菜单来将用户引导到同一页面，但位置不同

```
 <ul>
      <li><a href="realtime.php#location1">location 1 in page</a></li>
      <li><a href="realtime.php#location2">location 2 in page</a></li>                
   </ul> 
```

这是页面的html：（realtime.php）

```
 <div id="location1" name="location1"></div>
    <some html....>
    <div id="location1" name="location1"></div>
    <some other html...> 
```

它对我不起作用： 1\. 它没有重定向到页面内的正确位置 2\. 如果我正在查看当前页面，它什么也不做 -> 意味着甚至不会重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:31:35.047

片段标识符必须与目标元素的 id 匹配。

如果你想链接到，`id="squeeze"`那么你`#squeeze`不需要`#location1`

我还建议避免链接到`<a>`有利于包含您要链接到的内容的块元素的元素。

```
<div id="sequeeze"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:31:47.357

只需使用带有锚的链接

> ```
> <ul>
>   <li><a href="#location1">location 1 in page</a></li>
>   <li><a href="#location2">location 2 in page</a></li>                    
> </ul> 
> ```

比身体内部

```
<div id="location1"></div> 
```

# forms - 选择产品后自动获取数据

> ID：12897791
> 
> 赞同：0
> 
> 时间：2012-10-15T14:28:56.003
> 
> 标签：forms, ms-access

我正在尝试制作一个访问表单，允许我从下拉列表中选择产品，然后自动出现与该产品相关的详细信息，例如颜色和描述。Beloe 是我对我使用的每个文本框进行的编码。有任何想法吗？

```
Private Sub filterDescriptionTextBox_Click()

End Sub

Private Sub filterProductTextBox_Click()

End Sub

Private Sub sourceGroup_AfterUpdate()
    ApplyDataSource
End Sub

Private Sub filterCategoryComboBox_AfterUpdate()
    PerformFilter
End Sub

Private Sub filterDescriptionTextBox_AfterUpdate()
    PerformFilter
End Sub

Private Sub filterProductTextBox_AfterUpdate()
    PerformFilter
End Sub

Private Sub productTextBox_Click()
    Shortcuts.viewProduct Me.[Colour]
End Sub 
```

在此先感谢，多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:56:12.903

Text (IE) 后面的控制字段是什么`ListBox.selected.Value`？

表单本身是否也绑定到表或视图？

1.  如果您有一个绑定到表格的表单，则将表格字段名称分配给适当的控件，但使它们依赖于列表框选择。
2.  如果它基于视图，那么您将需要删除表单的绑定源，然后在 VBA 中将数据填充到 TextBox，但还要处理来自选定 ListBox 的信息和来自 TextBox 的文本的更新。

# java - Spring MVC 3 - 具有 Map 属性的表单对象未绑定表单提交上的键/值对

> ID：12897794
> 
> 赞同：0
> 
> 时间：2012-10-15T14:29:08.983
> 
> 标签：java, spring, jsp, jakarta-ee, spring-mvc

我正在尝试将对象与在 GET 上初始化的 Map 字段绑定以呈现多个复选框标签。所有的复选框都显示表单何时创建但提交时，我的 MessageForm（模型属性）对象中的任何 Map 条目都未绑定（地图大小 = 0）。在我添加这个地图字段之前，其他字段（消息）设置得很好。如何获取 MessageForm.hierarchySelections 字段以使用 GET 请求中填充的所有条目进行设置？

unitNode.jsp (VIEW_MESSAGE_FORM):

```
<div class="nodeContainer">
    <div class="nodeHeader">
        <form:checkbox path="hierarchySelections['${node.code}']"/>
        <form:label path="hierarchySelections['${node.code}']">
            ${node.name}
        </form:label>
    </div>
    <div class="nodeChildren">
        <c:forEach var="node" items="${node.children}">
            <c:set var="node" value="${node}" scope="request"/>
            <jsp:include page="unitNode.jsp"/>
        </c:forEach>
    </div>
</div> 
```

MessageForm.java：

```
public class MessageForm {
    private Message message;
    private Map<String, Boolean> hierarchySelections = new HashMap<String, Boolean>();    
    // getters and setters
} 
```

MessageFormController.java（摘录）：

```
@RequestMapping(value = "/message/new")
public String newMessage(final Model model) {
    final MessageForm messageForm = new MessageForm();

    // get the root hierarchy node
    final Node rootNode = hierarchyService.getNodeHierarchy();
    messageForm.getHeirarchy(rootNode);

    final Stack<Node> nodeList = new Stack<Node>();
    nodeList.add(rootNode);

    final Map<String, Boolean> hierarchySelections = messageForm.getHierarchySelections();
    while (!nodeList.isEmpty()) {
        final Node node = nodeList.pop();

        // set the selection status to false/unchecked
        hierarchySelections.put(node.getCode(), Boolean.FALSE);

        // add all children organization units to the stack
        for (final Node nodeChild : node.getChildren()) {
            nodeList.add(nodeChild);
        }
    }   
    model.addAttribute("messageForm", messageForm);
    return VIEW_MESSAGE_FORM;
}

@RequestMapping(value = "/message/new", method = RequestMethod.POST)
public String createMessage(@Valid final MessageForm messageForm, final BindingResult bindingResult) {
    if (bindingResult.hasErrors()) { // TODO
    } else {
        messageCenterService.createMessage(messageForm.getMessage());
    }  
    return VIEW_MESSAGE_FORM;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T14:15:20.417

我认为复选框序列化不是您期望的那样工作。

未选中的复选框元素不会被提交，当它被选中时，来自 value 属性的文本将被发送。

所以首先，使用 Firebug/Chrome 调试器（网络选项卡）来监控从浏览器发送到服务器的信息。

# ant - ANT 目标为 WAR 生成 Manifest Class-Path 以查看 EAR 的 /lib 目录中的 jar

> ID：12897795
> 
> 赞同：0
> 
> 时间：2012-10-15T14:29:11.773
> 
> 标签：ant, jar, war, ear

我正在部署一个带有实用程序 jar的**EAR** ，比如位于 EAR 的**lib**文件夹中的*A.jar 。*我 EAR 的**application.xml**是：

 ****```
<application ...>
<library-directory>lib</library-directory>

<module><ejb>cashflow-ejb.jar</ejb></module>

<module>
    <web>
    <web-uri>cashflow-war.war</web-uri>
    <context-root>cashflow</context-root>
    </web>
</module>
</application> 
```

但是，我的 WAR 看不到**EAR**的*lib/A.jar*中的类，并且部署失败并出现**ClassNotFound**异常。我浏览了这两个类似的帖子：[a](https://stackoverflow.com/questions/12103724/glassfish-3-1-2-2-war-cant-find-jar-inside-ear)和[b](https://stackoverflow.com/questions/1330067/jboss-war-file-in-ear-cant-find-jar-library-on-classpath)，但那里提供的解决方案似乎都不起作用。基本上我认为我需要**WAR**的 MANIFEST 文件有一个**Class-Path:**指向**EAR**库的条目。有人可以为此提供**ANT**目标吗？我试过“ **../lib** ”，如：

```
<war
needxmlfile="false"
basedir="${webroot.dir}"
warfile="${build.dir}/${project.distname}.war">
<exclude name="WEB-INF/src/**"/>
<manifest>
    <attribute name="Class-Path" value="../lib"/>
</manifest>
</war> 
```

但它似乎不起作用，对于**Class-Path**值，“ **lib/A.jar** ”、“ ../lib/ **A.jar** ”或“ **/lib ”也不起作用。**在 JBoss AS 7.1.1 中部署的唯一解决方案是在**EAR**的*/lib*位置和**WAR**的*WEB-INF/lib中复制**A.jar* ，但是我的**EAR中有两个相同****JAR**的副本.****

# android - 使 ListView 无法接收任何触摸事件

> ID：12897797
> 
> 赞同：0
> 
> 时间：2012-10-15T14:29:22.227
> 
> 标签：android, listview, lag, touch-event

当我按下 ListView 项目时，我的应用程序会调用服务器。如果在拨打该电话时，有人按下另一个项目，它会拨打另一个电话，这经常会导致我的应用程序崩溃。

我也不希望 UI 滞后，我希望 ListView 能够滚动。我只是不希望它对任何点击事件做出反应。

我的电话有一个回调，所以如果有办法顺利地做到这一点，我只需在项目点击时启用它，然后在回调被调用时禁用它。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:33:50.190

我认为您正在尝试解决错误的问题。您不应在操作运行时禁用 ListView 单击，而应在操作运行时将操作排队或禁用它。后者应该相对简单，使用静态布尔信号量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:35:13.293

只需在您的列表视图单击上检查布尔变量即可。当您单击 ListView 时，您可以使用布尔变量将其设置为 false，当您获得回调时，您可以再次将其设置为 true。

# c# - 本地化 Windows 窗体并在运行时更改语言

> ID：12897800
> 
> 赞同：1
> 
> 时间：2012-10-15T14:29:34.707
> 
> 标签：c#, winforms, localization, resources

我正在关注此链接[http://www.dotnetcurry.com/ShowArticle.aspx?ID=174](http://www.dotnetcurry.com/ShowArticle.aspx?ID=174)以本地化 Windows 窗体并在运行时更改语言。一切都适用于标签/按钮：文本框，但`Datagridview`它不起作用。当我检查资源文件时，法语版本和默认版本文本在那里，但是当我执行它时，最后一个版本正在加载..当我从列表框中选择时，它没有显示默认的英语版本。

如何使用上面链接中给出的机制在运行时更改 datagridview 标题文本？？？ ![在此处输入图像描述](../Images/94b61e5eda3f36db4b3708036f0383d2.png) ![在此处输入图像描述](../Images/f32ac912fb24e92adeb88eae4137ec63.png) ![在此处输入图像描述](../Images/934fcb8c41f9d631c889aa08e6a51ba8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T16:29:50.907

该代码只能找到添加到表单的 Controls 集合中的控件。但是 DataGridView 列不会像那样添加，它会添加到 DataGridView 控件中。您需要改进发布的代码，以便它还可以迭代它找到的任何 DGV 的列。像这样：

```
 private void ChangeLanguage(string lang) {
        var ci = new CultureInfo(lang);
        System.Threading.Thread.CurrentThread.CurrentUICulture = ci;
        foreach (Control c in this.Controls) {
            ComponentResourceManager resources = new ComponentResourceManager(this.GetType());
            resources.ApplyResources(c, c.Name, ci);
            if (c.GetType() == typeof(DataGridView)) {
                var dgv = (DataGridView)c;
                foreach (DataGridViewColumn col in dgv.Columns) {
                    resources.ApplyResources(col, col.Name);
                }
            }
        }
    } 
```

# ruby-on-rails - 每页活动流/日志的一些数据库设计思想

> ID：12897806
> 
> 赞同：2
> 
> 时间：2012-10-15T14:29:50.830
> 
> 标签：ruby-on-rails, facebook, database-design, feed, audit

我正在构建用户操作的活动日志。但主要目标是获取所有活动，而不是每个用户，而是每个页面（范围）内部。后面我会解释更多。

我关心并提出这个问题的主要问题是避免加入来执行此操作并以可扩展性的方式走向正确的道路

众所周知的活动日志设计方法：

*   [实施社交活动流的最佳方式是什么？](https://stackoverflow.com/questions/202198/whats-the-best-manner-of-implementing-a-social-activity-stream)
*   [如何在社交网络中实现活动流](https://stackoverflow.com/questions/1443960/how-to-implement-the-activity-stream-in-a-social-network)

因此，要获取所有用户活动，它的全部内容就是使用“user_id = ?”列获取表。好的。

出色地。现在假设我的应用程序有很多关于名人的页面。用户可以在页面中添加主题、问题（主题内）。还可以更改页面的名称、照片等。

页面的假设示例：/stevejobs

*好吧，这些活动仅在按/stevejobs*页面分组时才相关，因为它们需要出现**在**页面内：

* * *

**页**: 史蒂夫乔布斯

**行动**：

*   用户 1 添加一个问题“史蒂夫乔布斯是什么时候出生的？” 关于“关于”的话题
*   用户 2 将页面名称编辑为“Steve Jobs”
*   用户1添加了话题“生活”

到目前为止，每个活动都有与活动相关的对象和父对象。例如：

```
When add question: {object_type: Question, object_id: 1, parent_type: Topic, parent_id: 1}

When add topic: {object_type: Topic, object_id: 1, parent_type: Page, parent_id: 1} 
```

然后，如果我想获取*/stevejobs中发生的所有活动，则父列可以具有多个级别的深度，直到要加入的页面 id*

一种解决方案是添加两个名为“scope_type”和“scope_id”的额外多态列。

```
When add question: {object_type: Question, object_id: 1, parent_type: Topic, parent_id: 1, scope_type: Page, scope_id: 1}

When add topic: {object_type: Topic, object_id: 1, parent_type: Page, parent_id: 1, scope_type: Page, scope_id: 1} 
```

因此，我认为可以更轻松地获得每页的所有活动

我能处理什么呢？

我正在做的连接..

> ```
> # All activities from Topics of page
> list_activities = Activity.joins("JOIN lists ON activities.item_id = topics.id and activities.item_type = 'Topic'")
>                           .joins("JOIN pages ON pages.id = topics.page_id")
>                           .where("pages.id = #{self.id}")
> 
> # All activities from Question of Topic of Page
> document_activities = Activity.joins("JOIN documents ON activities.item_id = questions.id and activities.item_type = 'Question'")
>                               .joins("JOIN topics ON topics.id = questions.topic_id")
>                               .joins("JOIN pages ON pages.id = topics.page_id")
>                               .where("pages.id = #{self.id}") 
> ```

然后建立一个联盟。太丑了。最后序列化的列也避免连接是无用的

# php - 如何正确显示 vCard 或 vCal

> ID：12897812
> 
> 赞同：1
> 
> 时间：2012-10-15T14:30:10.167
> 
> 标签：php, jquery, vcf-vcard, vcal

通过移动应用程序，我的用户可以将参考对象及其数据发送到我们的服务器。这要么是日历事件，要么是联系人。使用的格式是 vCal 或 vCard。

在我的网站上，我想将参考对象与数据一起显示。理想情况下，悬停或单击时会显示 vCard / vCal 的图标，并可以保存它。这不必与 ajax 一起使用。我的网站使用 jquery 并且必须能够在 IE7 及更高版本中工作。

我在一系列技术（微格式等）中找到了很多示例（主要是简历或画廊类型的东西）。我正在寻找一个更简单的例子。

什么是一个好的插件或解决方案？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:46:30.920

您可以使用[hCard 微格式](http://microformats.org/wiki/hcard)来标记您网站上的 vCard 数据，例如

```
<div class="vcard">
    <address class="adr author">
        <span class="type hide">work</span>
        <span class="fn">John Doe</span>
        <span class="role">Webdeveloper</span>
        <span class="street-address">Fooway 1</span>
        <span class="postal-code">1234 </span> <span class="locality">N.Y.</span>
        <span class="hide country-name">USA</span>
    </address>
    <div>
        <span class="tel">
            <span class="type">Tel</span>
            <span class="value">0800-1234567</span>
        </span>
        <span class="tel">
            <span class="type">Fax</span>
            <span class="value">0800-7654321</span>
        </span>
        <a class="email" href="mailto:jd@example.com">Mail Me</a>
        <span class="url">http://www.example.com</span>
    </div>
    <div class="hcard-export">
    <a href="http://h2vx.com/vcf/http://www.stb-rueter.de/">
        <img src="/images//icons/hcard.png" alt="hCard Microformat" />
        <span>Download vCard</span>
    </a>
</div> 
```

然后添加一个链接以通过[http://h2vx.com/vcf](http://h2vx.com/vcf)进行转换。该服务将解析您告诉它的 URL，以查找站点上的任何 hCard，将它们转换为 vCard，然后提供下载。

# backbone.js - Backbone：如何验证模型是否已存在于集合中？

> ID：12897814
> 
> 赞同：9
> 
> 时间：2012-10-15T14:30:19.410
> 
> 标签：backbone.js

鉴于此骨干集合

```
define  [
  'underscore',
  'backbone',
  'cs!models/floor'
], ( _, Backbone, Floor ) ->
return Backbone.Collection.extend
  model: Floor
  url: ->
    return '/api/hotels/' + @hotelId + '/floors'
  initialize: (models, options) ->
    if ( options.hotelId )
      @hotelId = options.hotelId
      @.fetch()

  parse: (response) ->
    response.floors

  alreadyExist: ->
    @.filter( (floor) ->
      return floor.get('number') == @.attrs.get('number')
    ) 
```

并通过以下方式从视图中添加新模型，如何验证模型是否已存在于集合中？

```
add_floor: (e) ->
  console.log ' Saving Floor '
  e.preventDefault()
  floorNumber =  $('input[name=floorNumber]').val()
  floorDescription = $('input[name=floorDescription]').val()
  return new NoticeView({ message: "Please enter a Floor Number.", displayLength: 10000 }) unless floorNumber
  if ! @collection.add({ number: floorNumber}).alreadyExist()
    @collection.create({ number: floorNumber, description: floorDescription }, {
      error: (model, response) ->
        # $(e.target).removeClass('waiting');
        new ErrorView({ message: "Problem saving Floor " + response.responseText, displayLength: 10000 })
      success : (model, response) ->
        console.log model
        console.log response
        new NoticeView({ message: "Floor successfully saved.", displayLength: 10000 })
    })
  else 
    new ErrorView({ message: "Floor already exist." + response.responseText,        displayLength: 10000 }) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-11T05:04:06.450

Backbone 集合代理了在这些情况下有用的 Underscore.js 迭代函数。

如果您有一个现有的模型实例，要检查它是否存在于集合中，您可以执行以下操作：

```
var myModel = new Floor();

// the following line logs true if model is in collection, false if not.
console.log(myCollection.contains(myModel)); 
```

如果您没有模型的现有实例，您的示例表明可能是这种情况，您可以使用`find`or `findWhere`underscore 函数，例如：

```
var floorNumber =  $('input[name=floorNumber]').val()
var myModel = myCollection.findWhere({ floorNumber: floorNumber }); 
```

如果 `find`或`findWhere`返回一个模型，您可以使用`typeof`比较轻松地检查该模型，那么您将知道该模型是否存在于集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T16:36:09.277

集合上的 findWhere 不会导致 JavaScript 错误，但也不会找到模型。检查集合是否包含模型的正确方法是使用下划线的 find ，如下所示：

```
var model = _.find(collection.models, function (model) { return model.id == 

id_to_be_searched; });
var found = collection.contains(model);

if (found) {
    // do stuff
}
else {
   // do stuff   
} 
```

# c# - 如果加载两个控件，WebBrowser 控件不会在第一次迭代时填充

> ID：12897815
> 
> 赞同：1
> 
> 时间：2012-10-15T14:30:21.070
> 
> 标签：c#, wpf, wpf-controls

我遇到的问题是我有一个名为“浏览器”的 WebBrowser 控件。浏览器由 MEF 创建的不同控件填充：

```
 //Apply Button that cretes the HTML that is loaded into the Browser
 btnCreateHTMLPreview(object sender, RoutedEventArgs e)
 {
   //Clears the content of the observable collection
   contents.Clear();

   //usedControls is an observable collection of all loaded controls in the stack panel
   foreach(var control in usedControls)
      control.CreateHTML();
 }

 //Code in the MEF Control that creates the HTML that is will be loaded into the browser
 CreateHTML()
 {
   string tempStuff = null;
   tempStuff += "<h1>" + MyControl.lblHeader.Content + "</h1>\n";
   tempStuff += MyControl.txtTextGoesHere.Text + "\n";

   //Give the HTML back to the Application
   parent.AcceptReport(tempStuff);
 }

 //Application side where it accepts the HTML and loads it into the Browser
 AcceptHTML(string passedInContent)
 {
   //Observable collection that holds the content of all possible MEF Controls
   contents.Add(passedInContent);

   string tempStuffForBrowser = null;
   tempStuffForBrowser = "<html>\n";
   tempStuffForBrowser += "<body>\n";

   //Add the content that was saved earlier
   foreach (var strInd in contents)
      tempStuffForBrowser += strInd;

   tempStuffForBrowser = "<html>\n";
   tempStuffForBrowser += "<body>\n";

   Browser.NavigateToString(tempStuffForBrowser);
 } 
```

我在上面尽了最大努力尝试提供我如何填充 html 并将其添加回浏览器的内容。如果有任何不清楚的地方，请告诉我。

如果我只添加了一个控件，以便当我单击按钮加载 html 时“内容”中只有一个控件，它工作得很好并加载它。但是，如果我加载了多个控件，我有单击该按钮两次以使其显示。我觉得这非常奇怪。我尝试解决这个问题是在离开活动之前检查浏览器中是否有内容，但我不确定如何执行此操作。如果有人对如何解决此问题有任何建议或任何其他想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:59:55.150

看起来 WebBrowser 控件存在某种问题，即它没有加载它获得的第一个字符串；我假设有一些尚未发生的初始化。我通过打电话让它工作

`myBrowser.NavigateToString("");`

从我的类的构造函数中，然后从那时起使用它可以正常工作。做作，但它有效。

# php - PHP, MySQL, 高效的标签驱动搜索算法

> ID：12897817
> 
> 赞同：11
> 
> 时间：2012-10-15T14:30:26.057
> 
> 标签：php, mysql, performance, search, tags

我正在建立一个网上商店。该商店允许用户通过`category`和几个可选的附加过滤器（例如`brand`、`color`等）过滤产品。

目前，各种属性存储在不同的地方，但我想切换到基于标签的系统。理想情况下，我的数据库应该存储带有以下数据的标签：

*   `product_id`
*   `tag_url_alias`（独特）
*   `tag_type`（唯一）（类别、product_brand、product_color 等）
*   `tag_value`（不是唯一的）

# 第一个目标

我想搜索与***1-5 个特定标签之间***`product_id`的任何地方相关联的标签。标签是从对 SEO 友好的 url 中提取的。所以我将为每个标签检索一个唯一的字符串（），但我不知道. 搜索将是一个***交集***，所以我的搜索应该返回匹配***所有***提供的。*`tag_url_alias``tag_type`*`product_id`*`tags`***

 ***# 第二个目标

除了显示与当前过滤器匹配的产品外，我还想显示用户可能提供的其他类别和过滤器的产品计数。

例如，我当前的搜索是匹配标签的产品：

```
Shoe + Black + Adidas 
```

现在，商店的访客可能正在查看生成的产品，并想知道其他品牌必须提供哪些黑鞋。所以他们可能会去“品牌”过滤器，并选择任何其他列出的品牌。假设他们有 2 个不同的选项（实际上，这可能会有更多），导致以下搜索：

```
Shoe + Black + Nike > 103 results
Shoe + Black + K-swiss > 0 results 
```

在这种情况下，如果他们在过滤器中看到品牌“K-swiss”列为可用选择，他们的搜索将返回 0 个结果。

这显然让用户感到相当失望......我更想知道将“品牌”从“阿迪达斯”切换到“k-swiss”将得到 0 结果，并且只需从过滤器中删除整个选项。

类别、颜色等也是如此。

实际上，这意味着单个页面视图不仅会返回我的主要目标中描述的过滤后的产品列表，而且可能会返回数百个相似但不同的列表。一个用于可以替换另一个过滤器值或添加到现有过滤器值的每个过滤器值。

# 容量

我怀疑我的数据库最终将包含：

> 250 到 1.000 个唯一标签

它将包含：

> 10.000 到 100.000 种独特的产品

# 当前的想法

我做了一些谷歌搜索，发现了以下文章：[http ://www.pui.ch/phred/archives/2005/06/tagsystems-performance-tests.html](http://www.pui.ch/phred/archives/2005/06/tagsystems-performance-tests.html)

从那篇文章来看，运行数百个查询来实现第二个目标，将是一条非常缓慢的路线。“毒药”示例可能适合我的需要，并且对于我的第一个目标可能是可以接受的，但对于第二个目标来说它会慢得令人无法接受。

我在想我可能会运行匹配 1`tag`到它关联`product_id`的单个查询，缓存这些查询，然后计算结果的交集。但是，我是否在 MySQL 中计算这些交叉点？还是在 PHP 中？如果我使用 MySQL，是否有一种特殊的方式我应该缓存这些单独的查询，或者提供我需要的所有正确的索引？

我想也很有可能缓存其中两个`tag`/`product_id`集合之间的交叉点。交叉点的数量将受到 a`tag_type`只能具有一个特定值这一事实的限制，但我不确定如何有效地管理这种类型的缓存。同样，我不知道我应该在 MySQL 还是 PHP 中执行此操作。如果我在 MySQL 中执行此操作，那么存储和组合此类缓存结果的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:50:55.920

使用[sphinx 搜索引擎](http://sphinxsearch.com/)可以为您带来神奇的效果。它非常快，甚至可以处理单词形式，这对 SEO 请求很有用。

就 sphinx 而言，制作一个文档 - “产品”，按标签索引，为查询选择适当的排名（例如 MATCH_ALL_WORDS）并使用不同的标签组合运行批处理请求以获得最佳结果。不要忘记使用像 memcahed 或任何其他缓存器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:40:26.740

我还没有对此进行测试，但是应该可以有一个查询来满足您的第二个目标，而不是触发数百个查询......下面的查询说明了这通常应该如何工作。这个想法是一次组合三个不同的请求，并按专用值分组，只收集那些有任何结果的请求。

```
SELECT t1.product_id, count(*) FROM tagtable t1, tagtable t2, tagtable t3 WHERE 
t1.product_id = t2.product_id AND 
t2.product_id = t3.product_id AND
t1.tag_type='yourcategoryforShoe' AND t1.tag_value='Shoe' AND
t2.tag_type='product_color' AND t2.tag_value='Black' AND
t3.tag_type='brand'
GROUP BY t3.tag_value
HAVING count(*) > 0 
```***

# powershell - 从作业中获取输出

> ID：12897823
> 
> 赞同：1
> 
> 时间：2012-10-15T14:30:40.363
> 
> 标签：powershell

我很难从作业中获得任何输出 - 以下代码有什么问题？

```
$test = {
    DIR
}

$mjob = Start-Job -ScriptBlock {$test}
while (Get-Job -State Running){}
Receive-Job -Job $mjob -OutVariable $otest

Write-Host($otest) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T14:43:21.190

当您使用时`-OutVariable`仅提供变量的名称，例如：

```
... -OutVariable otest 
```

除非`$otest`碰巧包含要将输出保存到的变量的名称。

其他一些建议。 `$test`代表一个脚本块，所以你不需要把`{}`它放在周围。而不是等待使用while循环，只需使用`Wait-Job`例如：

```
$test = { get-childitem }
$job = Start-Job $test
Wait-Job $job
Receive-Job $job -OutVariable otest

$otest 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T17:24:41.627

您可以使用管道等待作业完成，然后接收其结果。当您将脚本块传递给 ScriptBlock 参数时，请确保删除大括号，否则您将创建一个嵌套的脚本块：

```
$test = { DIR }
Start-Job -ScriptBlock $test | Wait-Job | Receive-Job 
```

# c++ - c ++中的pollard rho算法永远找不到因子

> ID：12897828
> 
> 赞同：0
> 
> 时间：2012-10-15T14:31:00.377
> 
> 标签：c++, factoring

我正在尝试实现 pollard rho 算法来分解大数。我正在使用 gmp 包。该算法取自“算法简介”。症状是 while 循环永远不会中断。我的想法是我在实施中遗漏了一些东西。

我的代码如下：

* * *

```
#include <iostream>
#include <gmp.h>
#include <stdio.h>
#include <math.h>
#include <gmpxx.h>

using namespace std;
//int numberToFactor;
int compare1;
int compare2;
int factor[100] ;
int k;
int i;

int main (){
    mpz_t numberToFactor;
    mpz_init(numberToFactor);
    mpz_t D;
    mpz_init(D);
    mpz_t x;
    mpz_init(x);
    mpz_t y;
    mpz_init(y);
    mpz_t random;
    mpz_init(random);
    mpz_t largest;
    mpz_init(largest);
    mpz_t square;
    mpz_init(square);
    mpz_t yMinusx;
    mpz_init(yMinusx);

    unsigned long int exp = 2;
    unsigned long int one = 1;

    gmp_randstate_t state;
    gmp_randinit_mt(state);

    while(stdin){
            cout<<"enter number";
        cin >> numberToFactor;

        //Is it a prime number?
        int c = mpz_probab_prime_p(numberToFactor, 5);

//Start of Pollard Rho algorithm
        i = 1;
        //Generate a random number random.
        mpz_urandomm(x, state, numberToFactor);

        //y = x;
        mpz_set(y, x);
        cout<<"y="<<y<<"\n";
        k = 2;

        while(true){
            i++;
            //square = x².
            mpz_pow_ui(square, x, exp);
            cout<<"x="<<x<<"\n";
            cout<<"x²="<<square<<"\n";

            //square = x²-1
            mpz_sub_ui(square, square, one);
            cout<<"x²-1="<<square<<"\n";

            //x= (x²-1)mod numberToFactor
            mpz_mod(x, square, numberToFactor); 
            cout<<"x = x²-1 mod numberToFactor="<<x<<"\n";

            //y-x
            mpz_sub(yMinusx, y, x);
            //abs(y-x)
            mpz_abs(yMinusx, yMinusx);
            cout<<"y-x="<<yMinusx<<"\n";

            //D=gcd(abs(y-x),numberToFactor).
            mpz_gcd(D, yMinusx, numberToFactor);
            cout<<"gcd(abs(y-x), numberToFactor)="<<D<<"\n";

            compare1 = mpz_cmp_ui(D, one);
            compare2 = mpz_cmp(D, numberToFactor);
            //is D!=1 AND D!=numberToFactor?
            if(compare1 != 0 && compare2 != 0){
                cout<<"D"<<D<< "\n";
                //is D a prime?
                if(mpz_probab_prime_p(D, 5) == 2){
                    //save D?
                    cout<<"Found one prime divisor!"<<"\n";
                    cout<<"prime = "<<D<<"\n";
                }
                //is the remainder a prime?
                //numberToFactor = numberTofactor/D
                mpz_div(numberToFactor , numberToFactor, D);
                if(mpz_probab_prime_p(numberToFactor, 5) == 2){

                    cout<<"The remainder is a prime!"<<"\n";
                    cout<<"prime = "<<numberToFactor<<"\n";
                }
                compare1 = mpz_cmp_ui(numberToFactor, one);

                if( 0 == compare1 ){
                    break;
                }
            }
            if(i == k){
                //y = x;
                mpz_set(y, x);
                k = 2*k;
            }
        }
        cout<<"the task is completed!"<<"\n";

    } 
```

## }

代码结束

这是我在终止执行之前在终端中得到的一些信息。

* * *

```
.
.
.
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
x=4
x²=16
x²-1=15
x = x²-1 mod numberToFactor=5
y-x=0
gcd(abs(y-x), numberToFactor)=10
x=5
x²=25
x²-1=24
x = x²-1 mod numberToFactor=4
y-x=1
gcd(abs(y-x), numberToFactor)=1
.
.
. 
```

* * *

我很抱歉打印输出的样子，我有点着急。如果有任何帮助，我将不胜感激。

//海伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T13:56:24.603

我不确定这是否是唯一的问题，但您的程序没有计算`y`.

你使用`x = f(x) = x²-1`，所以你也必须计算`y = f(f(y)) = y⁴ - 2y²`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T20:34:34.670

```
using System;
using System.Numerics;

namespace Simple_Pollard_Rho_Floyd
{   class Program
    {   static void Main()
        {   /* Variables ****************************************************************/
            BigInteger f, n, x, y;

            /* Assign Data **************************************************************/
            n = 339850094323758691; // 764567807 * 444499613 (~71 ms)
            x = y = 2;
            Console.WriteLine("\n\t Simple Pollard Rho Floyd Factoring\n\n {0}", n);

            /* Algorithm ****************************************************************/
            do
            {   x = ((x * x) + 1) % n;
                y = ((y * y) + 1) % n;      // Floyd
                y = ((y * y) + 1) % n;
                f = BigInteger.GreatestCommonDivisor(BigInteger.Abs(y - x), n);
            } while (f == 1);

            /* Output Data **************************************************************/
            Console.WriteLine("\n factor = {0}\n", f);
            Console.Read();
        } // end of Main
    } // end Program
} // end namespace 
```

# javascript - 关闭浏览器窗口。关闭不起作用

> ID：12897832
> 
> 赞同：0
> 
> 时间：2012-10-15T14:31:11.313
> 
> 标签：javascript, asp.net

我想在按钮单击时使用 javascript 关闭浏览器窗口这是我尝试过的

```
<script type="text/javascript">
    function OpenMyWin() {
        window.open('', '_self');
        window.close();
    }
</script>

<asp:Button ID="btn" runat="server" Text="Close" OnClientClick="OpenMyWin();"/> 
```

我也尝试了另一种方式

`btn.Attributes.Add("onclick", "javascript:window.close();");`和

`btn.Attributes.Add("onclick", "javascript:OpenMyWin();");`

我也试过这个

`<script type="text/javascript"> function closeWindow() { netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserWrite"); alert("This will close the window"); window.open('', '_self'); window.close(); } </script>`

我仍然无法关闭我的浏览器可以有人帮助我我需要关闭事件，它应该适用于所有浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:30:15.800

当您键入它时，您只能将其更改为此及其工作：

```
function OpenMyWin() {
    window.open('', '_self').close();
} 
```

我在 google chrome 及其工作上进行了测试，但在 mozilla 上没有工作。

# css - 将自定义包含路径文件夹添加到 LESS.build

> ID：12897833
> 
> 赞同：0
> 
> 时间：2012-10-15T14:31:12.077
> 
> 标签：css, node.js, less, sublimetext2

我目前正在使用带有 LESS.build 包的 Sublime Text 将我的`.less`文件编译成 CSS。

我当前的 LESS.build cmd 是：

```
"cmd": ["lessc", "screen.less", "${file_path}/screen.css", "--verbose"] 
```

我试图添加一些额外的文件夹到`--include-path`：

```
"cmd": [
    "lessc",
    "screen.less",
    "${file_path}/screen.css", 
    "--verbose", 
    "--include-path='.:/var/www/whatever/'"
] 
```

但是，每当我尝试构建我的`.less`文件时，`--include-path`params 似乎都被忽略了。

我发现的唯一解决方法是在我的上添加完整的相对路径`@import`：

```
@import "../../../www/whatver/config.less"; //Ugly solution 
```

谁能指出我失败的地方和/或任何其他比我更漂亮的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:35:54.940

看起来有一个错误。[https://github.com/cowboyd/less.rb/issues/13](https://github.com/cowboyd/less.rb/issues/13) 这里有一个类似的问题[LESS @import: Passing paths to lessc](https://stackoverflow.com/questions/7363079/less-import-passing-paths-to-lessc)。

# jquery-mobile - JQuery Mobile：单击文本字段时如何禁用默认键盘？

> ID：12897834
> 
> 赞同：1
> 
> 时间：2012-10-15T14:31:12.547
> 
> 标签：jquery-mobile, keyboard, textinput

我目前正在使用输入文本字段，当它们被点击时会产生一个选择器（带有各种条目的列表视图）。在 appMobi 模拟器上进行测试完美无缺；但是，在 iPhone 上测试时，默认键盘会在文本字段被触摸时出现，然后迅速消失并被选择器替换。

有没有办法可以防止默认键盘与 JQM 一起显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:00:40.767

如果它们需要用户输入，那么您不能阻止浏览器的默认实现（至少以对 x 浏览器友好的方式）。他们肯定不是 JQM 的解决方案。

我建议您使用 html/css 从 div 或类似的内容中设置自己的文本框样式。然后，您可以使用 js 将选择器连接到该元素。

# sql-server - 设计大型实体的最佳实践

> ID：12897838
> 
> 赞同：1
> 
> 时间：2012-10-15T14:31:26.210
> 
> 标签：sql-server, database, database-design

设计一个包含 100 多个属性的 Employee 表这样的大实体的最佳实践是什么？

我应该将它们保留为具有 100 列的单个表，还是应该将它们拆分为 1..1 关系，然后在我的代码中组合 Employee 对象？

有什么意见吗？每种方法的优缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:47:46.350

这里的答案不在于Employees 表，而在于更广泛的数据库设计。如果所有属性都绝对是 1-1，那么我肯定会有一个实体。SQL Server 具有您在进行物理设计时可以使用的优化，例如用于具有许多 NULL 值的列的 SPARSE 列。

我假设您目前正在经历规范化和实体关系图的过程。如果您是，那么我建议您查看 SuperType/SubType 方法，Employees 通常是一个很好的候选者。

在这种方法中（例如），您可能有一个“联系人”表，其中包含名字、姓氏、电话号码等。然后，这将链接到您的员工表、客户表、供应商表等。您的然后，员工表将只包含员工特有的属性，例如员工编号、开始日期等。

这有几个好处。

*   首先，例如，如果员工也是客户，那么您可以减少数据冗余。
*   您可能会获得更好的压缩比。这是因为当您的列数越少时，页面上存储的行数就越多，这意味着名称“Smith”将更频繁地出现在同一页面上。
*   从主数据的角度来看，如果引入了电子邮件列数据类型的公司标准，那么您可以在一个地方更改它，而不是三个地方。（请原谅这里稍微做作的例子，但希望它能说明这一点）。
*   由于 Super Table 和 Sub Table 的列都较少，因此可以更快地单独读取每个列。如果加入同一个查询，并放置在不同的磁盘上，则可以并行读取 2 个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:58:57.250

尝试阅读 Star-Schema 和 Snowflake-Schema。这些是在设计数据仓库模式时使用的术语，其优缺点可能与您在这里所面临的非常相似。

[http://en.wikipedia.org/wiki/Star_schema](http://en.wikipedia.org/wiki/Star_schema)

[http://en.wikipedia.org/wiki/Snowflake_schema](http://en.wikipedia.org/wiki/Snowflake_schema)

[http://www.diffen.com/difference/Snowflake_Schema_vs_Star_Schema](http://www.diffen.com/difference/Snowflake_Schema_vs_Star_Schema)

# asp.net - asp.net中开发服务器和生产服务器中的不同日期格式

> ID：12897840
> 
> 赞同：0
> 
> 时间：2012-10-15T14:31:26.733
> 
> 标签：asp.net, oracle

我有一个带有 3 列的 gridview，在数据库中，原始表的日期字段不存储为日期格式（表在 oracle 中），以字符串格式存储，所以我在 asp 中有这样的数据源

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConflictDetection="CompareAllValues"
        ConnectionString="<%$ ConnectionStrings:OracleXexdb %>" 
        ProviderName="<%$ ConnectionStrings:OracleXexdb.ProviderName %>"

        SelectCommand="select to_date(date, 'mm/dd/yyyy') as date, user, description from mytable where user is not null"
         filterexpression = "user LIKE '%{0}%'"
         >

    </asp:SqlDataSource> 
```

正如您在 SelectCommand 中看到的，我将日期字段转换为 dd/mm/yyyy 格式（在数据库中，日期格式为 mm/dd/yyyy）；当我在 asp.net 开发服务器中运行我的网页时，一切都很好，我的意思是我看到格式为 dd/mm/yyyy 的日期字段，但是当我将网页放在服务器上时，我看到了 mm/dd/yyyy 格式。

有什么我可以做的吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:47:12.497

部署应用程序时出现差异的最可能原因是所采用的文化会有所不同。

在 Web.config 文件 system.web 全球化配置或当前线程上将文化明确设置为所需的文化应该可以解决问题。

例如：**请参阅下面评论中的示例**

还可以使用 Format 方法在 DatePicker 上显式指定日期格式。

# java - 在 java 中的 file.lists() 中排除系统文件

> ID：12897841
> 
> 赞同：6
> 
> 时间：2012-10-15T14:31:30.953
> 
> 标签：java, file-io

我正在使用`File.listFiles()`in方法获取文件列表`java.io.File`，但它返回一些系统文件，如 (`.sys`和`etc`).. 我需要在返回列表时排除所有系统相关文件（Windows、Linux、Mac）。任何人都可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:50:13.293

我将实现一个简单`FileFilter`的逻辑来确定文件是否是系统文件，并按照[AlexR 在他的答案中显示](https://stackoverflow.com/a/12897999/105224)的方式使用它的实例。像这样的东西（规则 a 仅用于演示目的！）：

```
public class IgnoreSystemFileFilter implements FileFilter {

   Set<String> systemFileNames = new HashSet<String>(Arrays.asList("sys", "etc"));

   @Override
   public boolean accept(File aFile) {

     // in my scenario: each hidden file starting with a dot is a "system file"
     if (aFile.getName().startsWith(".") && aFile.isHidden()) {
       return false;
     }

     // exclude known system files
     if (systemFileNames.contains(aFile.getName()) {
       return false;
     }

     // more rules / other rules

     // no rule matched, so this is not a system file
     return true;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:37:26.933

我不认为有一个通用的解决方案。首先，Linux 和 MacOS 等操作系统没有明确的“系统文件”概念，也没有任何明显的方式来区分系统文件和非系统文件。

我认为您的赌注是确定系统文件的含义，然后编写自己的代码将其过滤掉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T14:40:14.590

通常文件列表的过滤是通过使用文件过滤器来完成的。

```
 new java.io.File("dir").listFiles(new FileFilter() {
        @Override
        public boolean accept(File pathname) {
                            // add here logic that identifies the system files and returns false for them.

        }
    }); 
```

问题是如何定义系统文件。例如，如果您想过滤掉所有带有扩展名的文件，`.sys`这很简单。如果不是，请定义您的标准。如果您在实施标准时遇到困难，请提出具体问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T14:43:45.367

正如其他人指出的那样，某些操作系统没有*“系统文件”*的定义。

但是，如果您使用的是 Java 7，那么有一个名为[NIO.2](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)的新扩展可能会在 Windows 下对您有所帮助：

```
Path srcFile = Paths.get("test");
DosFileAttributes dfa = Files.readAttributes(srcFile, DosFileAttributes.class);
System.out.println("isSystem? " + dfa.isSystem()); 
```

# jakarta-ee - 当使用与 EJB jar 文件名不同的 EJB 模块名称时，JBoss 6.1.0 上的部署错误

> ID：12897842
> 
> 赞同：1
> 
> 时间：2012-10-15T14:31:31.173
> 
> 标签：jakarta-ee, jboss, ejb, jboss6.x

我正在使用 JBoss AS 6.1.0 和 Java 1.7。我正在使用 Maven 构建我的 EAR v6，它会将版本号附加到每个 EJB 3.1 模块文件名和 EAR 文件名，我喜欢它，但我不希望每次更改版本时更改我的 bean 的可移植 JNDI 名称，所以我在 ejb-jar.xml 中定义了静态 EJB 模块名称（EJB 模块名称与 EAR 中的 EJB JAR 文件名称不同）。我在 server.log 中遇到部署错误。当 EJB jar 具有与模块名称相同的名称时，一切都很好。请帮忙。

[链接到 EAR](http://www.sendspace.com/file/5sy8v3)

ejb-jar.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:ejb="http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_1.xsd" version="3.1">
  <module-name>TestEjb</module-name>
  <display-name>TestEjb</display-name>
</ejb-jar> 
```

应用程序.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/application_6.xsd" version="6">
  <application-name>TestEar</application-name>
  <display-name>TestEar</display-name>
  <module>
    <ejb>TestEjb-0.0.1-SNAPSHOT.jar</ejb>
  </module>
  <library-directory>APP-INF/lib</library-directory>
</application> 
```

测试豆：

```
@Remote
public interface TestEjbRemote {

   public void testMethod();

}

@Stateless
public class TestEjb implements TestEjbRemote {

   @Override
   public void testMethod() {   

   }
} 
```

引导日志：

```
16:07:19,855 INFO  [JBossASKernel] Created KernelDeployment for: TestEjb-0.0.1-SNAPSHOT.jar
16:07:19,855 INFO  [JBossASKernel] installing bean: jboss.j2ee:ear=TestEar-0.0.1-SNAPSHOT.ear,jar=TestEjb-0.0.1-SNAPSHOT.jar,name=TestEjb,service=EJB3
16:07:19,855 INFO  [JBossASKernel]   with dependencies:
16:07:19,855 INFO  [JBossASKernel]   and demands:
16:07:19,855 INFO  [JBossASKernel]  jboss.ejb:service=EJBTimerService; Required: Described
16:07:19,855 INFO  [JBossASKernel]  jboss-switchboard:appName=TestEar,module=TestEjb,name=TestEjb; Required: Create
16:07:19,855 INFO  [JBossASKernel]   and supplies:
16:07:19,855 INFO  [JBossASKernel]  jndi:TestEar-0.0.1-SNAPSHOT/TestEjb/remote
16:07:19,870 INFO  [JBossASKernel]  jndi:TestEjb
16:07:19,870 INFO  [JBossASKernel]  Class:com.test.client.TestEjbRemote
16:07:19,870 INFO  [JBossASKernel]  jndi:TestEar-0.0.1-SNAPSHOT/TestEjb/remote-com.test.client.TestEjbRemote
16:07:19,870 INFO  [JBossASKernel] Added bean(jboss.j2ee:ear=TestEar-0.0.1-SNAPSHOT.ear,jar=TestEjb-0.0.1-SNAPSHOT.jar,name=TestEjb,service=EJB3) to KernelDeployment of: TestEjb-0.0.1-SNAPSHOT.jar 
```

服务器日志：

```
2012-10-15 16:07:20,198 ERROR [ProfileServiceBootstrap] (Thread-2) Failed to load profile:: org.jboss.deployers.client.spi.IncompleteDeploymentException: Summary of incomplete deployments (SEE PREVIOUS ERRORS FOR DETAILS):

DEPLOYMENTS MISSING DEPENDENCIES:
  Deployment "jboss.ejb3:application=TestEar-0.0.1-SNAPSHOT,module=TestEjb-0.0.1-SNAPSHOT,component=TestEjb,service=EjbEncFactory" is missing the following dependencies:
    Dependency "jboss.naming:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT" (should be in state "Installed", but is actually in state "** NOT FOUND Depends on 'jboss.naming:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT' **")
  Deployment "jboss.j2ee:ear=TestEar-0.0.1-SNAPSHOT.ear,jar=TestEjb-0.0.1-SNAPSHOT.jar,name=TestEjb,service=EJB3" is missing the following dependencies:
    Dependency "jboss.ejb3:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT,service=EjbEncFactory" (should be in state "Installed", but is actually in state "Described")
    Dependency "org.jboss.ejb.bean.instantiator/TestEar-0.0.1-SNAPSHOT/TestEjb-0.0.1-SNAPSHOT/TestEjb" (should be in state "Installed", but is actually in state "** NOT FOUND Depends on 'org.jboss.ejb.bean.instantiator/TestEar-0.0.1-SNAPSHOT/TestEjb-0.0.1-SNAPSHOT/TestEjb' **")
  Deployment "jboss.j2ee:ear=TestEar-0.0.1-SNAPSHOT.ear,jar=TestEjb-0.0.1-SNAPSHOT.jar,name=TestEjb,service=EJB3_endpoint" is missing the following dependencies:
    Dependency "jboss.j2ee:ear=TestEar-0.0.1-SNAPSHOT.ear,jar=TestEjb-0.0.1-SNAPSHOT.jar,name=TestEjb,service=EJB3" (should be in state "Installed", but is actually in state "Instantiated")

DEPLOYMENTS IN ERROR:
  Deployment "org.jboss.ejb.bean.instantiator/TestEar-0.0.1-SNAPSHOT/TestEjb-0.0.1-SNAPSHOT/TestEjb" is in error due to the following reason(s): ** NOT FOUND Depends on 'org.jboss.ejb.bean.instantiator/TestEar-0.0.1-SNAPSHOT/TestEjb-0.0.1-SNAPSHOT/TestEjb' **
  Deployment "jboss.ejb3:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT,service=EjbEncFactory" is in error due to the following reason(s): Described
  Deployment "jboss.naming:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT" is in error due to the following reason(s): ** NOT FOUND Depends on 'jboss.naming:application=TestEar-0.0.1-SNAPSHOT,component=TestEjb,module=TestEjb-0.0.1-SNAPSHOT' **

    at org.jboss.deployers.plugins.deployers.DeployersImpl.checkComplete(DeployersImpl.java:1228) [:2.2.2.GA]
    at org.jboss.deployers.plugins.main.MainDeployerImpl.checkComplete(MainDeployerImpl.java:905) [:2.2.2.GA]
    at org.jboss.system.server.profileservice.deployers.MainDeployerPlugin.checkComplete(MainDeployerPlugin.java:87) [:6.1.0.Final]
    at org.jboss.profileservice.deployment.ProfileDeployerPluginRegistry.checkAllComplete(ProfileDeployerPluginRegistry.java:107) [:0.2.2]
    at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:135) [:6.1.0.Final]
    at org.jboss.system.server.profileservice.bootstrap.BasicProfileServiceBootstrap.start(BasicProfileServiceBootstrap.java:56) [:6.1.0.Final]
    at org.jboss.bootstrap.impl.base.server.AbstractServer.startBootstraps(AbstractServer.java:827) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
    at org.jboss.bootstrap.impl.base.server.AbstractServer$StartServerTask.run(AbstractServer.java:417) [jboss-bootstrap-impl-base.jar:2.1.0-alpha-6]
    at java.lang.Thread.run(Thread.java:722) [:1.7.0_04] 
```

# c# - 如何拆分不一致的字符串的一部分？

> ID：12897846
> 
> 赞同：1
> 
> 时间：2012-10-15T14:31:42.100
> 
> 标签：c#

我有以下字符串：

`01-21-27-0000-00-048`并且很容易将其拆分，因为每个部分由 a 分隔`-`，但有时此字符串表示为`01-21-27-0000-00048`，因此拆分它并不容易，因为最后 2 部分组合在一起。我该如何处理？另外，如果是这样的情况呢？`01-21-27-0000-00.048`

如果有人好奇，这是一个包裹号，它因县而异，一个县可以有 1 种格式，也可以有 100 种格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:38:33.593

这是使用正则表达式的一个很好的例子。您的字符串匹配以下正则表达式：

```
(\d{2})-(\d{2})-(\d{2})-(\d{4})-(\d{2})[.-]?(\d{3}) 
```

将输入与此表达式匹配，并从匹配中获取六组数字：

```
var str = new[] {
    "01-21-27-0000-00048", "01-21-27-0000-00.048", "01-21-27-0000-00-048"
};
foreach (var s in str) {
    var m = Regex.Match(s, @"(\d{2})-(\d{2})-(\d{2})-(\d{4})-(\d{2})[.-]?(\d{3})");
    for (var i = 1 /* one, not zero */ ; i != m.Groups.Count ; i++) {
        Console.Write("{0} ", m.Groups[i]);
    }
    Console.WriteLine();
} 
```

如果您想允许其他字符，例如由破折号分隔的段中的字母，您可以使用`\w`而不是`\d`表示字母、数字或下划线。如果您希望在已知范围内允许未指定数量的此类字符，例如 2 到 4 个，您可以`{2,4}`在 regexp 中使用而不是更具体的`{2}`，这意味着“正好两个”。例如，

```
(\w{2,3})-(\w{2})-(\w{2})-(\d{4})-(\d{2})[.-]?(\d{3}) 
```

让第一段包含两到三个数字或字母，并且还允许在第二段和第三段中包含字母。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:35:22.733

首先规范化字符串。

即，如果您知道最后一部分始终是三个字符，则插入一个 - 作为倒数第四个字符，然后拆分结果字符串。沿着同一行，转换点 '.' 到破折号“-”并拆分该字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:35:02.543

**用空字符串**（''）替换所有不是数字的字符。

然后你的任何字符串都变成这样的格式

`012127000000048`

现在您可以将它分成 (2, 2, 2, 4, 2, 3) 部分。

# java - 在 Java 中使用嵌套 for 循环查找概率

> ID：12897848
> 
> 赞同：1
> 
> 时间：2012-10-15T14:31:53.543
> 
> 标签：java, if-statement, for-loop, probability, nested-loops

我的问题是，每当我尝试编译和运行我的程序时，它都会说我接近代码末尾的算术问题之一是除以零。现在还有另一个问题。每当提示用户输入卷数时，您可以输入一个数字并按回车键，但它只是跳到下一行，没有任何反应。代码中没有其他任何事情发生。

*** 笔记 ***

我不能在这个作业中使用数组，因为直到下一节才会介绍它。

这是我[在这里](https://access.desire2learn.com/content/enforced/33909-5312_OFF_13_017.001/educator_apcsa_v9/module05/rtfmod05/5.05_AssignmentInstructionsDiceProbability.pdf?_&d2lSessionVal=gtu91phg7xjofH089eMdDdTc6)的任务。这是我应该做的。我无法弄清楚这里出了什么问题。我的数学似乎是正确的，但出了点问题。

简而言之，我的任务希望我找到两个 11 面骰子被“滚动”用户输入次数的概率。例如：

如果用户说骰子要滚动 100 次，它会输出如下内容 2s：（插入 100 次掷骰后 2 个骰子的总和为 2 的概率） 3s：（插入 2 个骰子的总和的概率100 次掷骰后骰子为 3）4 秒：（插入 100 次掷骰后 2 个骰子的总和为 4 的概率） 5 秒：（插入 100 次掷骰后 2 个骰子的总和为 5 的概率）

等等。

到目前为止，这是我的代码：

```
public static void main(String[] args)

{

    //Declare and initialize variables and objects

    Scanner in = new Scanner(System.in);

    Random randNum = new Random();

    int match = 0; //Number of times sum of dice matches the current sum

    int die1 = 0; //Random generated numbers
    int die2 = 0;
    int diceTotal2 = 0;
    int diceTotal3 = 0;
    int diceTotal4 = 0;
    int diceTotal5 = 0;
    int diceTotal6 = 0;
    int diceTotal7 = 0;
    int diceTotal8 = 0;
    int diceTotal9 = 0;
    int diceTotal10 = 0;
    int diceTotal11 = 0;
    int diceTotal12 = 0;

    int sumOfDice = 0;
    double probability2 = 0.0;
    double probability3 = 0.0;
    double probability4 = 0.0;
    double probability5 = 0.0;
    double probability6 = 0.0;
    double probability7 = 0.0;
    double probability8 = 0.0;
    double probability9 = 0.0;
    double probability10 = 0.0;
    double probability11 = 0.0;
    double probability12 = 0.0;

    //Input: ask user for number of rolls and number of sides on a die

    System.out.println("Number of Rolls: ");

    int rolls = in.nextInt();

    //***************************************************************************************

    //Using nested loops, cycle through the possible sums of the dice.

    //Roll the dice the given number of times for each sum.

    //Count how many times the sum of the dice match the current sum being looked for.

    //***************************************************************************************

    //Loop to increment through the possible sums of the dice

        //Loop to throw dice given number of times

        for( int numberOfRolls = 1; numberOfRolls < rolls; numberOfRolls++)

        {
              die1 = randNum.nextInt(6);
              die2 = randNum.nextInt(6);
              sumOfDice = die1 + die2;
              for( ; ; )
              {

            //Check if the sum of dice is equal to the given sum
                if(sumOfDice == 2)

                {
                    diceTotal2++;
                    probability2 = diceTotal2 / numberOfRolls;
                }

                else if(sumOfDice ==3)
                {
                    diceTotal3++;
                    probability3 = diceTotal3 / numberOfRolls;
                }

                else if(sumOfDice ==4)
                {
                    diceTotal4++;
                    probability4 = diceTotal4 / numberOfRolls;
                }

                else if(sumOfDice ==5)
                {
                    diceTotal5++;
                    probability5 = diceTotal5 / numberOfRolls;
                }

                else if(sumOfDice ==6)
                {
                    diceTotal6++;
                    probability6 = diceTotal6 / numberOfRolls;
                }

                else if(sumOfDice ==7)
                {
                    diceTotal7++;
                    probability7 = diceTotal7 / numberOfRolls;
                }

                else if(sumOfDice ==8)
                {
                    diceTotal8++;
                    probability8 = diceTotal8 / numberOfRolls;
                }

                else if(sumOfDice ==9)
                {
                    diceTotal9++;
                    probability9 = diceTotal9 / numberOfRolls;
                }

                else if(sumOfDice ==10)
                {
                    diceTotal10++;
                    probability10 = diceTotal10 / numberOfRolls;
                }

                else if(sumOfDice ==11)
                {
                    diceTotal11++;
                    probability11 = diceTotal11 / numberOfRolls;
                }

                else if(sumOfDice ==12)
                {
                    diceTotal12++;
                    probability12 = diceTotal12 / numberOfRolls;
                }

            }                

        }

       System.out.println("Sum of Dice" + "         " + "Probability");
       System.out.println("2s: \t\t" + probability2 + "%");
       System.out.println("3s: \t\t" + probability3 + "%");
       System.out.println("4s: \t\t" + probability4 + "%");
       System.out.println("5s: \t\t" + probability5 + "%");
       System.out.println("6s: \t\t" + probability6 + "%");
       System.out.println("7s: \t\t" + probability7 + "%");
       System.out.println("8s: \t\t" + probability8 + "%");
       System.out.println("9s: \t\t" + probability9 + "%");
       System.out.println("10s: \t\t" + probability10 + "%");
       System.out.println("11s: \t\t" + probability11 + "%");
       System.out.println("12s: \t\t" + probability12 + "%");

        //After all throws, calculate percentage of throws that resulted in the given sum

} //end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:33:08.647

将启动更改`numberOfRolls`为 1 而不是 0。

```
for( int numberOfRolls = 1; numberOfRolls <= rolls; numberOfRolls++) { 
```

如果`numberOfRolls`为 0，则所有除法运算都会导致除以零。

```
probability2 = diceTotal2 / numberOfRolls; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T15:24:12.230

由于您已经有了解决方案，我将向您介绍另一个解决方案：

```
import java.util.Random;
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        int nRolls = 100, nDice = 6; // default values

        Scanner in = new Scanner(System.in);
        System.out.print("Number of throws: ");
        nRolls = in.nextInt();
        System.out.print("Number of sides on the dices: ");
        nDice = in.nextInt();

        int minSum = 2, maxSum = 2 * nDice;
        int[] hist = new int[maxSum - minSum + 1];

        Random rand = new Random();
        for (int iter = 1; iter <= nRolls; iter++) {
            int throw1 = 1 + rand.nextInt(nDice), throw2 = 1 + rand.nextInt(nDice);
            int sum = throw1 + throw2;
            hist[sum - minSum]++;
        }

        System.out.println("Number of rolls: " + nRolls);
        System.out.println("Number of sides of the dice: " + nDice);
        System.out.println("Sum of Dice         Percentage");
        for (int i = 0; i < hist.length; i++) {
            System.out.println(String.format("   %2d                 %5.2f%%", i + minSum, hist[i] * 100.0 / nRolls));
            // System.out.println("   " + (i+minSum) + "             " + (hist[i]*100.0/nRolls);
        }

        in.close();
    }
} 
```

它向您展示了如何使用数组来解决此任务。数组中的每个条目都包含产生相应总和的抛出次数。你总是有`2*nDice - 1`可能的总和（你不能`1`用两个骰子达到），所以数组的大小取决于骰子的边数。

然后，您只需遍历所有抛出并将 1 添加到相应的直方图条目（请注意，我偏移了直方图，因此`hist[0]`对应于 2`hist[1]`的总和，3 的总和等）。

最后，您可以计算百分比。（这不是概率，而是在我们的模拟中这个总和出现的百分比。如果你让掷骰子的数量更大，这个百分比将是概率的近似值。）

最后，您只需将其打印出来。这些`String.format`东西只是为了对齐值。如果您对此感到困惑，请使用

```
System.out.println("   " + (i+minSum) + "             " + (hist[i]*100.0/nRolls); 
```

反而。

# python - Python中的希伯来语unicode

> ID：12897856
> 
> 赞同：2
> 
> 时间：2012-10-15T14:32:35.250
> 
> 标签：python, python-2.7, unicode, hebrew

我正在尝试制作英语-希伯来语词典。
我有一个 Tab 格式的字典 ( `<word>TAB<translation>`)。最后 - 我希望它是 mobi 格式。我发现了从 tab 转换为 opf（和 htmls）的 Python 脚本。从那里很容易转换为mobi。[名为tab2opf.py](https://github.com/humanfromearth/wikimobi/blob/master/tab2opf.py)的 Python 脚本。

当我将原始文件与我的 tab(.txt) 文件一起使用时 -**一切都很好**。
我正在使用带有内置 utf 选项的脚本：`tab2opf.py -utf tab.txt`

问题是我想要我的 Kindle 词典。Kindle 向后显示希伯来语翻译。所以我决定编辑 tab2opf 文件，这样他就可以反转翻译 - 在 kindle 中它会正确显示。

我写了以下代码：

```
def RevIt(s):
heb = []
g = ""
for i in range(len(s)):
    c = s[i]
    heb.append(c)
for i in range(len(heb)):
g += heb.pop()
return g 
```

在 tab2opf.py 我在第 245 行之后添加`dd = RevIt(dd)`。
现在我收到一团糟：
`"-բ לימלՠ£ילחתכՠ©משמהՠתՠאՠמיסՠ,)¨וביחՠמיסՠ:תכבը נסרפמאՠ,& .צעՠשՠ`
为了比较，原始 txt 文件中的同一行如下所示：
`שם עצם. &, אמפרסנד (בכתב: סימן חיבור), סימן או תו המשמש כתחליף למילה "ו-"`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:42:42.013

您正在使用字节而不是 Unicode 字符。试试这个：

```
g = u""
s = s.decode('UTF-8') 
```

# php - 遇到多个分隔符时将字符串转换为数组

> ID：12897857
> 
> 赞同：0
> 
> 时间：2012-10-15T14:32:35.480
> 
> 标签：php, string

我想在`comma or semicolon`遇到时将字符串转换为数组。

例如一个字符串`a , b ; c , d ; e`将被转换为

```
[0] = a 
[1] = b
[2] = c
[3] = d
[4] = e 
```

我尝试使用`explode`，到目前为止效果很好，但我只能指定 **一个分隔符**，就像`explode(",",$str)`我想使用两个分隔符一样。即逗号和分号。

我不知道是否可以在explode 函数中指定一个模式作为第一个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:34:21.813

使用[`preg_split`](http://php.net/manual/en/function.preg-split.php)：

```
$pieces = preg_split('@[,;]@', 'a,b;c,d;e'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:46:13.607

另一种方法：

```
$delimeters = array(',',';');

$arr = str_split($str);
/*
[0] = a 
[1] = ,
[2] = b
[3] = ;
[4] = c
[5] = ,
[6] = d ...
*/

$filterd = array_filter($arr, function($elem){ return (!in_array($elem , $delimeters)) }); 
```

基本上，我们将字符串拆分为数组，因此每个字符都是数组中的一个元素。之后，我们过滤数组以仅重新调整不是分隔符的字符（只需更新分隔符数组）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:05:04.710

尝试这个：

```
$var_save = strtok($string,',;');

echo $var_save; 
```

# jquery - 在 jQuery 中显示另一个时按类名隐藏可见元素

> ID：12897861
> 
> 赞同：0
> 
> 时间：2012-10-15T14:32:47.943
> 
> 标签：jquery

这对某人来说应该是一个很好的简单操作 - 我有一个表格行，`slideToggle`当单击图像时。由于表是动态的，因此可能有任意数量的行，因此我必须通过类名识别要显示/隐藏的区域。

不是问题。`extrainfo`但是，我一次只显示一个 div实例。如图所示，任何已经可见的都应该被隐藏：

编辑：这是一个小提琴：http: [//jsfiddle.net/shpsD/](http://jsfiddle.net/shpsD/)

在下面添加了 HTML。

```
 var toggleSpeed = 300;
    var expandImg = "../Images/expand.png";
    var collapseImg = "../Images/collapse.png";
    $(".moreless").click(function () {
        var detailsRow = $(this).parent().parent().next();
        detailsRow.find('.extrainfo').slideToggle(toggleSpeed);
        if ($(this).attr('src') == collapseImg) {
            $(this).attr('src',expandImg);
            $(this).closest('tr').removeClass('highlight_row');
        }
        else {
            $(this).attr('src',collapseImg);
            $(this).closest('tr').addClass('highlight_row');
        }
    });
}); 
```

-

```
<table>
    <tr>
        <th>Header</th>
        <th></th>
    </tr>
    <tr>
        <td>row 1</td>
        <td><img src="expand.png" class="moreless" /></td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="extrainfo">
                EXTRA INFO!!
            </div>
        </td>
    </tr>    
    <tr>
        <td>row 2</td>
        <td><img src="expand.png" class="moreless" /></td>
    </tr>
    <tr>
        <td colspan="2">
            <div class="extrainfo">
                EXTRA INFO!!
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:35:31.860

首先隐藏元素：

```
$('table .extrainfo').slideUp(); 
```

如果需要，您也可以使用`:visible`选择器，尽管它不一定会使事情变得更快，但也许更容易理解：

```
$('table .extrainfo:visible').slideUp(); 
```

然后*显示*：

```
detailsRow.find('.extrainfo').slideDown(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/shpsD/1/)。

* * *

**编辑**关于 OP 留下的评论（下）：

> 在行之间切换时它工作正常，但不可能隐藏所有行，好像只有一行被展开它向上滑动然后立即向下滑动。有任何想法吗？

我不确定，一旦我完成工作，这是一个非常快速的外观，但我*可能*做的过度，但以下似乎可以按照您的要求工作：

```
$(".moreless").click(function() {
    // caching variables:
    var that = $(this),
        table = that.closest('table'),
        row = that.closest('tr'),
        visInfo = table.find('.extrainfo:visible').length,
        extrainfo = row.next().find('.extrainfo');

    // I suspect this conditional is flawed, and redundant,
    // but essentially if there's already a visible element *and*
    // the next '.extrainfo' element in the next row is visible,
    // then we're having to toggle/close
    if (visInfo == 1 && extrainfo.is(':visible')) {
        // we're working on the row that's already visible:
        extrainfo.slideToggle(toggleSpeed);
        row.toggleClass('highlight_row');
    }
    else {
        // not toggling the same table-row, so tidying up previously
        // visible elements (if any)/removing 'highlight_row' class
        // and also setting the src of the image to the expandImg
        var highlighted = table.find('.highlight_row');
        highlighted.find('.moreless').attr('src',expandImg);
        highlighted.removeClass('highlight_row');
        table.find('.extrainfo').slideUp(toggleSpeed);

        // now we're showing stuff/adding the class
        extrainfo.slideDown(toggleSpeed);
        row.addClass('highlight_row');
    }
    // this effectively toggles the src of the clicked image:
    that.attr('src', function(i,v) {
        return v == expandImg ? collapseImg : expandImg;
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/shpsD/7/)。

（我会在吃完后添加参考资料并回答更多问题……对不起！）

参考：

*   [`attr()`](http://api.jquery.com/are/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`find()`](http://api.jquery.com/find/).
*   [`slideDown()`](http://api.jquery.com/slideDown/).
*   [`slideUp()`](http://api.jquery.com/slideUp/).
*   [`:visible`选择器](http://api.jquery.com/visible-selector/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:37:49.567

首先你可以这样做：

`$('.extrainfo').hide();`

然后一旦每个 extrainfo 分类的隐藏，你可以继续做：`$(this).closest('.extrainfo').show();`

如果您知道 extrainfo div 就在您单击的链接或 div 之后，您可以执行以下操作：

```
$(this).next('.extrainfo').show() 
```

# python - 如何在python中使用https连接？

> ID：12897868
> 
> 赞同：1
> 
> 时间：2012-10-15T14:33:09.590
> 
> 标签：python

我有这个简单的工作 curl 命令：

```
curl -k -d X-User=user -d X-Password=password https://12.12.12.21 
```

这是我的例子：

```
import urllib2
opener = urllib2.build_opener()
opener.addheaders = [('X-User', 'user'),('X-Password', 'password')]
rr = opener.open("https://12.12.12.21")
print rr.read() 
```

它没有按我的预期工作（结果：密码/用户名错误），你能帮我理解为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:44:18.623

您的`curl`命令使用的是[使用 POST 发送数据](http://curl.haxx.se/docs/manpage.html)`-d`的标志，而不是使用标头。

如果您打算使用标题，那么您需要使用`-H`参数：

```
curl -k -H X-User=user -H X-Password=password https://12.12.12.21 
```

这是您需要的情况下如何执行 POST 请求：

```
values = {'X-User' : 'user', 'X-Password' : 'password'}
data = urllib.urlencode(values)
req = urllib2.Request("https://12.12.12.21", data)
rr = urllib2.urlopen(req) 
```

# sql-server - SQL Server 2012 - 网络访问的文件表权限

> ID：12897869
> 
> 赞同：1
> 
> 时间：2012-10-15T14:33:11.407
> 
> 标签：sql-server, sql-server-2012, database-permissions, filetable

我有一个 sql server 2012 实例设置为联网服务器上的文件存储。我需要同一网络上计算机上的所有用户都能够浏览代表文件表的文件系统。但是，所有用户都可以看到服务器和顶级目录，但无权访问/打开它。

我应该查看哪些权限才能启用访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:52:16.100

Run the following code within SQL

```
ALTER DATABASE myDatabase
SET FILESTREAM ( NON_TRANSACTED_ACCESS = FULL )
GO 
```

Providing that FILESTREAM is enabled for the instance, this has been done, and a valid directory has been specified, it should work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T15:50:17.797

```
use myDatabase
go

grant view definition to [user] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T09:10:57.473

您可能会考虑提供一个域组 (1) 访问服务器和 (2) 包含文件表的数据库，然后授予 (3) 特定权限给每个文件表以允许他们访问其内容。

这可以通过使用单独的 GRANT 语句（SELECT、DELETE、UPDATE、INSERT - 如果您希望它们能够在服务器/实例/文件表文件夹级别浏览，则可选 ALTER）或创建数据库角色并为其授予这些权限来完成然后将域组链接到该角色。

[有关用户在此处的一般 FILETABLE 访问的一些信息](https://stackoverflow.com/questions/18907827/how-to-enable-permissions-in-sql-server-2012-filetable-folder-share/31228394#31228394)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T19:17:00.787

将此添加到 SQL 帐户“NT AUTHORITY\Authenticated Users”并授予对数据库的访问权限

# android - XML 布局 - 条目标识符 0x11a 大于条目计数 0xb2

> ID：12897871
> 
> 赞同：6
> 
> 时间：2012-10-15T14:33:17.163
> 
> 标签：android, android-layout, android-xml

'条目标识符 0x11a 大于条目计数 0xb2'

这是切换到特定片段时在我的 LogCat 中打印的内容。

我认为这可能与我的“xml 布局”资源被夸大有关。我不确定是什么。

**我的问题**

有没有其他人遇到过这个问题或知道这意味着什么？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:41:18.343

我遇到了这个问题，并通过 hack 解决了这个问题。我在styles.xml 的顶部添加了一个空样式：

```
<style name="empty_style" /> 
```

根据[this](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6UZQoOBtPtk) discussion on Google Groups 发生错误

> ...当框架中的 HistoryRecord 试图读取资源中定义的主题时。代码没有任何问题[...]。事实上，如果你在你的styles.xml 中摆弄顺序，通常在顶部附近添加一些空块，可能有助于暂时解决这个问题。

我不能说上面引用的原因是否真实，但它为我解决了这个问题。希望这可以帮助。

# java - 安装 .jar 库时遇到困难

> ID：12897872
> 
> 赞同：0
> 
> 时间：2012-10-15T14:33:17.010
> 
> 标签：java, jar, installation, classpath

我刚刚下载了我要创建的程序所需的第三方 java 库。

但我不知道如何实际安装库，以便我可以逐字输入

```
import path.to.library; 
```

在我的java类文件中没有任何错误。

我在 StackOverflow 上查看了许多教程和答案，但它们中的每一个似乎都包括使用某些或其他 IDE 用于 java。

好吧，我有点土气，想知道如何使它与记事本和命令行一起工作，因为这就是我用来制作程序的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:35:47.043

编译时，在行中包含以下内容：

```
-classpath nameOfJar.jar 
```

但是，一旦您真正切换到使用 IDE，您就会看到这种方法可以带来的多重好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:36:02.857

您没有在 import 语句中指定路径，只指定包名称。

启动 Java 程序时，必须在命令行的类路径中指定所有可用的 JAR 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T14:50:18.597

您需要了解 Java 的类路径是如何工作的。有关全面的描述，请阅读有关此主题的[Oracle 手册页。](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/classpath.html)或者，Java 教程的[PATH 和 CLASSPATH](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)页面。

（FWIW - 通常认为使用 CLASSPATH 环境变量来设置类路径是一个坏主意，因为如果您处理需要不同类路径的软件，这可能会导致“令人讨厌的意外”。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:36:01.583

如果您不使用任何 IDE，您将无法完成代码。但是，如果您知道所有包/类/方法名称/签名，则可以使用纯记事本，然后通过将库添加到类路径来编译它（例如，在编译时使用 javac 命令中的 -cp 开关）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T14:37:22.593

不需要安装 JAR。它们需要在编译和运行时可访问。您可以通过命令行参数或 CLASSPATH 环境变量添加 jar。IDE 具有以可视方式设置 JAR 位置的特殊方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T14:37:45.137

您需要更具体地说明到目前为止您所尝试的内容。不过，这通常并不复杂，如果您想手动调用编译器，您可以执行类似的操作

```
javac -cp somejar.jar myclass 
```

一旦习惯了这个过程，最好使用 ant 或 maven 等构建工具将其自动化。Ant 上手稍微容易一些，maven 有一些额外的功能使它变得更复杂一些。

# php - PHP Imap 阅读收件箱中的回复

> ID：12897873
> 
> 赞同：1
> 
> 时间：2012-10-15T14:33:30.923
> 
> 标签：php, imap

我已经编写/复制了一个脚本，该脚本从收件箱中读取电子邮件并更新票证，然后将电子邮件移动到已处理的文件夹中。这一切都适用于收件箱的新电子邮件，但是当有人回复电子邮件并最终进入收件箱时，我的脚本在电子邮件中什么也没读。

电子邮件在回复时的结构方式有什么不同吗？我需要一种阅读电子邮件中内容的方法，以便使用内容更新票证。知道要更新哪封电子邮件只是纯粹阅读我正在努力的内容。

这是代码

```
class Email 
{

    // imap server connection
    public $conn;

    // inbox storage and inbox message count
    public $inbox;
    private $msg_cnt;

    // email login credentials

        private $server = '????????????';

    private $user   = '????????';
    private $pass   = '?????????????';
    private $port   = ??;

    // connect to the server and get the inbox emails
    function __construct() 
        {
        $this->connect();
        $this->inbox();

        }

        function getdecodevalue($message,$coding) 
        {
            switch($coding) {
                    case 0:
                    case 1:
                            $message = imap_8bit($message);
                            break;
                    case 2:
                            $message = imap_binary($message);
                            break;
                    case 3:
                    case 5:
                            $message=imap_base64($message);
                            break;
                    case 4:
                            $message = imap_qprint($message);
                            break;
            }
            return $message;
        }

    // close the server connection
    function close() 
        {
        $this->inbox = array();
        $this->msg_cnt = 0;

        imap_close($this->conn);
    }

    // open the server connection
    // the imap_open function parameters will need to be changed for the particular server
    // these are laid out to connect to a Dreamhost IMAP server
    function connect() 
        {
        $this->conn = imap_open("{".$this->server.":".$this->port."/imap/novalidate-cert}INBOX", $this->user, $this->pass);

    }

    // move the message to a new folder
    function move($msg_index, $folder='Read') 
        {
        // move on server
            imap_mail_move($this->conn, $msg_index, $folder);

        // re-read the inbox
        //$this->inbox();
    }

    // get a specific message (1 = first email, 2 = second email, etc.)
    function get($msg_index=NULL) 
        {
        if(count($this->inbox) <= 0) 
    {
            return array();
        }
        elseif( ! is_null($msg_index) && isset($this->inbox[$msg_index])) 
    {
            return $this->inbox[$msg_index];
        }

        return $this->inbox[0];
    }

    // read the inbox
    function inbox() 
        {
        $this->msg_cnt = imap_num_msg($this->conn);

        $in = array();
        for($i = 1; $i <= $this->msg_cnt; $i++) 
    {
                $in[] = array(
                        'index'     => $i,
                        'header'    => imap_headerinfo($this->conn, $i),
                        'body'      => $this->cleanBody(imap_fetchbody($this->conn, $i,1)),
                        'structure' => imap_fetchstructure($this->conn, $i)
                    );
        }

        $this->inbox = $in;
    }

        function cleanBody($body) 
        {

            $delimiter = '#';
            $startTag = '----------START REPLY----------';
            $endTag = '----------END REPLY----------';
            $regex = $delimiter . preg_quote($startTag, $delimiter) 
                                . '(.*?)' 
                                . preg_quote($endTag, $delimiter) 
                                . $delimiter 
                                . 's';
            preg_match($regex,$body,$matches);

            $ret = trim($matches[1]);

            return $ret;
    }

}

$emails = new Email();

$email = array();
$emailCount = 1;
foreach($emails->inbox as $ems => $em)
{

            $email[$emailCount]['subject'] = $sub = $em['header']->subject;

            //echo $sub;

            $subParts = explode('-',$sub);

            $ticketUniqueCode = trim($subParts[1]);

            $sql = "SELECT * FROM ticket_main WHERE uniquecode = '".mysql_escape_string($ticketUniqueCode)."' LIMIT 1";

            $query = mysql_query($sql);

            if(mysql_num_rows($query))
            {
                $res = mysql_fetch_object($query);

                $ticketBody = $em['body'];
                $customerID = $res->customerID;

                $sql2 = "INSERT INTO ticket_updates SET ticketID = '".$res->ticketID."' , submitted = NOW() , submittedBy = '".$res->customerID."' , message = '".mysql_escape_string($ticketBody)."' , inhouse = 0";
                $query = mysql_query($sql2);

                // attachment section
                $message_number = $em['index'];

                $attachments = array();
                if(isset($em['structure']->parts) && count($em['structure']->parts)) 
                {
                        //echo 'hi';
                        for($i = 0; $i < count($em['structure']->parts); $i++) 
                        {
                                $attachments[$i] = array(
                                        'is_attachment' => false,
                                        'filename' => '',
                                        'name' => '',
                                        'attachment' => ''
                                );

                                if($em['structure']->parts[$i]->ifdparameters) {
                                               foreach($em['structure']->parts[$i]->dparameters as $object) 
                                        {
                                                if(strtolower($object->attribute) == 'filename') 
                                                {
                                                        $attachments[$i]['is_attachment'] = true;
                                                        $attachments[$i]['filename'] = $object->value;
                                                }
                                        }
                                }

                                if($em['structure']->parts[$i]->ifparameters) {
                                        foreach($em['structure']->parts[$i]->parameters as $object) 
                                        {
                                                if(strtolower($object->attribute) == 'name') 
                                                {
                                                        $attachments[$i]['is_attachment'] = true;
                                                        $attachments[$i]['name'] = $object->value;
                                                }
                                        }
                                }
                                if($attachments[$i]['is_attachment']) 
                                {
                                        $attachments[$i]['attachment'] = imap_fetchbody($emails->conn, $message_number, $i+1);
                                        if($em['structure']->parts[$i]->encoding == 3) 
                                        { // 3 = BASE64
                                                $attachments[$i]['attachment'] = base64_decode($attachments[$i]['attachment']);
                                        }
                                        elseif($em['structure']->parts[$i]->encoding == 4) 
                                        { // 4 = QUOTED-PRINTABLE
                                                $attachments[$i]['attachment'] = quoted_printable_decode($attachments[$i]['attachment']);
                                        }
                                }

                                if(isset($em['structure']->parts[$i]->disposition) && $em['structure']->parts[$i]->disposition == "attachment") 
                                {
                                        $filename = $attachments[$i]['name'];
                                        $mege="";
                                        $data="";
                                        $mege = imap_fetchbody($emails->conn, $message_number, $i+1);
                                        $filename= $filename;
                                        $fp=fopen('???????????????'.$filename,"w");
                                        $data=$emails->getdecodevalue($mege,$em['structure']->parts[$i]->type);

                                        fputs($fp,$data);
                                        fclose($fp);
                                        $email[$emailCount]['attachment'] = $attachments;

                                }

                        }

                }

            }

            $emailCount++;

}
$emailNumbers = imap_search($emails->conn,'ALL');

if(!empty($emailNumbers))
{
foreach($emailNumbers as $a)
{
    $emails->move($a);
}
imap_expunge($emails->conn);
}
$emails->close(); 
```

希望这是有道理的，有人可以真正提供帮助。

非常感谢提前

乔恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:46:08.973

那么最明显的是你的代码假设一条消息总是在第 1 部分，你的行：

```
'body'      => $this->cleanBody(imap_fetchbody($this->conn, $i,1)), 
```

意味着它只查看正文 1。如果是纯文本电子邮件正文 1 将是正确的，但如果是`multipart/alternative`（文本和 html）正文 1 将是基本`MIME`消息，它告诉您有子正文（正文 1.1、1.2）实际包含内容。

此外，如果回复包含嵌入的图像，或者包含作为附件回复的消息，那么您可能会有更多的正文/位置。

*那么如何找到尸体呢？*（你问）...好吧，你可以用它[`imap_fetchstructure`](http://ca2.php.net/imap_fetchstructure)来了解所有身体部位，然后搜索它以找到 type=0 （文本）的片段，然后下载该身体部位。（第一个找到的文本应该是正确的，但请注意电子邮件中可能有多个文本正文类型）。

# css - Sass 多选择器重构

> ID：12897874
> 
> 赞同：3
> 
> 时间：2012-10-15T14:33:31.737
> 
> 标签：css, sass

我记得读过一个 Sass 特性，它允许你指定一个元素列表，然后是一个子元素，它会编译成一个包含多个选择器的列表。我已经四处寻找，但找不到。

我希望它编译成这样：

```
header .container,
footer .container
  background: yellow 
```

但我确信 Sass 有一个特性可以让你以更好的方式编写它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T15:06:54.117

这种风格可以重构为：

```
.container {
    header &, footer & {
        background: yellow;
    }
} 
```

但也许您正在考虑指南针功能？ [http://compass-style.org/reference/compass/helpers/selectors/#nest](http://compass-style.org/reference/compass/helpers/selectors/#nest)

# xpath - xquery-如何从特定元素中选择值，即使该元素具有空值/多个返回分隔值

> ID：12897876
> 
> 赞同：0
> 
> 时间：2012-10-15T14:33:42.640
> 
> 标签：xpath, xquery, flwor

请考虑以下 XML--

```
<table class="rel_patent"><tbody>
<tr><td>Name</td><td>Description</td></tr>
<tr><td>A</td><td>Type-A</td></tr>
<tr><td>B</td><td>Type-B</td></tr>
<tr><td>C</td><td>Type-C</td></tr>
<tr><td>AC</td><td>Type-C
Type-A</td></tr>
<tr><td>D</td><td></td></tr>
</tbody></table> 
```

现在我想选择并显示“名称”的所有值。“描述”元素的值......即使描述元素具有空值，即名称 = D 的元素，而且，当描述元素具有由输入分隔的值时，我希望这些值（描述）在单独的行中 - 即类型 - C 和 Type-A 用于 name=AC 的元素

这是我写的查询类型——

```
let $rows_data:= $doc//table[@class="rel_patent"]/tbody/tr[1]/following-sibling::tr
for $data_single_row in $rows_data
return 
    let $cited_name:= $data_single_row/td[1]
    let $original_types_w_return:= $data_single_row/td[4]
    let $original_types_list:=    tokenize($original_types_w_return, '(\r?\n|\r)$')
    for $cited_type_each at $pos2 in $original_types_list
    return concat( $cited_name, '^', $original_type_each, '^', $pos2) 
```

但是，我收到以下类型的响应-

```
A^Type-A^1
B^Type-B^1
C^Type-C^1
AC^Type-C
Type-A^1 
```

现在，我需要在上面的代码+响应中得到以下正确---

(1) “AC”的数据应该是 2 个单独的行，“Type-C”和“Type-A”在 2 行中的每一行中，以及对应的。每行中最后一个字段的值为 1 和 2（因为这些是 2 个值）

(2) 根本没有显示“D”的数据。

如何更正上述代码以符合这两个要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:16:41.327

这有效：

```
for $data_single_row in $rows_data
return 
    let $cited_name:= $data_single_row/td[1]
    let $original_types_w_return:= $data_single_row/td[2]
    let $original_types_list:=    tokenize(concat($original_types_w_return, " "), '(\r?\n|\r)')
    for $cited_type_each at $pos2 in $original_types_list
    return concat( $cited_name, '^', normalize-space($cited_type_each), '^', $pos2) 
```

（第一个变化是将 $original_type_each 替换为 $cited_type_each 并将 [4] 替换为 [2] which may ）。

第一个问题可以通过删除 tokenize 参数末尾的 $ 来解决，因为在默认模式下 $ 仅匹配字符串的末尾。

第二个是通过添加一个空格 $original_types_w_return 来解决的，所以它不是空的，并且 tokenize 返回一些东西，然后用 normalize-space 再次删除它（在 XQuery 3.0 中，它可能可以通过在 for 表达式中使用'allowing empty'来解决)

# spring - 在@Transactional 中的事务期间提交

> ID：12897882
> 
> 赞同：4
> 
> 时间：2012-10-15T14:34:20.237
> 
> 标签：spring, hibernate, jpa, transactions, transactional

是否可以在标记为 Spring 的**@Transactional**的方法中执行提交？

```
@PersistenceContext
private EntityManager em;

@Transactional(propagation = Propagation.REQUIRED)
public void saveMembersWithMultipleCommits(List<Member> members)
    throws HibernateException
{
    Iterator<Member> it = members.iterator();
    while (it.hasNext())
    {
        while (it.hasNext())
        {
            Member wsBean = it.next();
            em.persist(wsBean); // overall commit will be made after method exit
            log.info("Webservices record " + wsBean + " saved. " + i++);
        }
    }
} 
```

我想在说每 500 个项目后提交给 DB。在上述背景下这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:50:40.907

不，您需要使用例如`TransactionTemplate`API 以编程方式进行。[在这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programmatic)阅读更多。

它看起来像

```
while (it.hasNext())
{
    transactionTemplate.execute(new TransactionCallbackWithoutResult() {
        protected void doInTransactionWithoutResult(TransactionStatus status) {
            int counter = 0;
            while (it.hasNext() && counter++ < 500) {
                Member wsBean = it.next();
                em.persist(wsBean);
                log.info("Webservices record " + wsBean + " saved. " + i++);
            }
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T14:43:38.937

您的问题表明您放错了交易边界。

您可以将持久调用移动到私有方法中，并使该方法具有事务性，而不是外部方法。此方法一次可以接受 500 个成员，然后在退出时提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T14:47:46.443

如果您期待在其他事务中以事务方式提交，则可能需要使用`@Transactional (propagation = Propagation.REQUIRES_NEW)`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-16T19:50:16.930

替代策略是您在 DAO 中创建一个方法并将其标记为@Transactional。此方法将进行批量更新（例如 500 个）。所以你可以有一个带有代码的方法

```
@Transactional

public void mybatchUpdateMethod(){

    StatelessSession session = this.hibernateTemplate.getSessionFactory()
            .openStatelessSession();

    Transaction transaction = null;

    Long entryCounter = 0L;

    PreparedStatement batchUpdate = null;
    try {
        transaction = session.beginTransaction();
        batchUpdate = session.connection().prepareStatement(insertSql);

        for (BatchSnapshotEntry entry : entries) {
            entry.addEntry(batchUpdate);
            batchUpdate.addBatch();

            if (++entryCounter == 500) {
                // Reached limit for uncommitted entries, so commit
                batchUpdate.executeBatch();
            }
        }

        batchUpdate.executeBatch();
        batchUpdate.close();
        batchUpdate = null;
    }
    catch (HibernateException ex) {
        transaction.rollback();
        transaction = null;
    }
} 
```

每次调用此方法时，它将在 500 次插入/更新后提交

# django - 在 django 模板上显示（时间）图标等于持续时间值

> ID：12897883
> 
> 赞同：1
> 
> 时间：2012-10-15T14:34:20.380
> 
> 标签：django, for-loop

我想多次显示一个图标图像（时钟）以指示我的应用程序中的持续时间。`Event`视图`django`仅提供一个`datetime.datetime`值。我需要找出当前日期时间和显示的小时数、分钟数图标多次。如果日期时间值是过去，则不会显示任何内容。

假设 datetime1 和之间的差`datetime.datetime.now()`是 6 小时 30 分钟

我需要显示 6 个大图标（每个表示 1 小时）和 3 个小图标（每个表示 10 分钟） ![期间](../Images/7e6c6fc2ba5305896ee23097136b06bd.png)

这样做的正确方法是什么？我想我需要编写一个过滤器，以元组的形式返回差异`hrminutes`（看起来像`(6,30)`），并在 for 循环中使用该元组，就像

```
{% for i in hrminutes.0 %}
  <img src="redcircle.jpg" >
{% endfor %}

{% for i in hrminutes.1 %}
  <img src="yellocircle.jpg" >
{% endfor %} 
```

但是 for tag 只需要一个列表！它做不到`for i in 6`

知道如何做到这一点..我唯一的选择是计算视图中的小时、分钟值并将其与每个`Event`对象一起传递吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:48:57.843

调整您的过滤器以返回长度为 n 的迭代，而不是整数 n。例如：

```
hrminutes = (range(6), range(30)) 
```

这样模板中的 for 循环就可以工作了。

# sql-server - 在 SQL Server 2008 的列中查找所有特殊字符

> ID：12897886
> 
> 赞同：23
> 
> 时间：2012-10-15T14:34:27.053
> 
> 标签：sql-server

我需要在`SQL Server 2008`. 所以，我不在乎`A, B, C ... 8, 9, 0`，但我确实在乎`!, @, &,`，等等。

在我看来，最简单的方法是 exclude `A, B, C, ... 8, 9, 0`，但如果我写了一个声明来排除这些，我会错过包含`!`and的条目`A`。因此，在我看来，我必须获取每个非字母/非数字字符的列表，然后`SELECT`使用 a`LIKE`和`Wildcard`限定符运行 a。

这是我要运行的：

```
SELECT Col1
FROM TABLE
WHERE Col1 LIKE ('!', '@', '#', '$', '%'....) 
```

但是，我不认为您可以运行多个预选赛，可以吗？有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-15T14:37:35.560

负数是你的朋友：

```
SELECT Col1
FROM TABLE
WHERE Col1 like '%[^a-Z0-9]%' 
```

这表示您想要`Col1`由任意数量的字符组成的任何行，然后是*不在*集合 a-Z0-9 中的一个字符，然后是任意数量的字符。

如果您有区分大小写的排序规则，请务必使用包含大写和小写 , 和 的范围`A`，这`a`就是我给出的（最初我把它弄错了。出现在.之后）`Z``z``a``A``Z``z`

* * *

或者，换句话说，您可以将您的原件`WHERE`写成：

```
Col1 LIKE '%[!@#$%]%' 
```

*但是，正如您所*观察到的，您需要知道要包含在`[]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-19T09:54:51.387

以下事务 SQL 脚本适用于所有语言（国际）。解决方案不是检查字母数字，而是检查不包含特殊字符。

```
DECLARE @teststring nvarchar(max)
SET @teststring = 'Test''Me'
SELECT 'IS ALPHANUMERIC: ' + @teststring
WHERE @teststring NOT LIKE '%[-!#%&+,./:;<=>@`{|}~"()*\\\_\^\?\[\]\'']%' {ESCAPE '\'} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-23T17:56:23.340

```
Select * from TableName Where ColumnName LIKE '%[^A-Za-z0-9, ]%' 
```

这将为您提供包含任何特殊字符的所有行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-18T16:53:23.517

```
select count(*) from dbo.tablename where address_line_1 LIKE '%[\'']%' {eSCAPE'\'} 
```

# maven - Maven部署插件覆盖错误？

> ID：12897888
> 
> 赞同：3
> 
> 时间：2012-10-15T14:34:35.403
> 
> 标签：maven, maven-deploy-plugin

我正在尝试覆盖 maven 的部署插件，并在我的一些项目中出现以下错误，但在其他项目中却没有：

`Execution default-deploy of goal org.apache.maven.plugins:maven-deploy-plugin:2.6:deploy failed: Cannot add two different pieces of metadata for:`

这是我的插件定义：

```
<plugin>
  <artifactId>maven-deploy-plugin</artifactId>
  <executions>
    <execution>
      <id>default-deploy</id>
      <phase>deploy</phase>
      <goals>
        <goal>deploy</goal>
      </goals>
      <configuration>
        <pomFile>target/modified-pom-replacePomPlaceholder/modified-pom/pom.xml</pomFile>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

也试过这个达到同样的效果：

```
<plugin>
  <artifactId>maven-deploy-plugin</artifactId>
  <configuration>
    <pomFile>target/modified-pom-replacePomPlaceholder/modified-pom/pom.xml</pomFile>
  </configuration>
</plugin> 
```

知道为什么有时会失败吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-08T15:20:40.980

不要覆盖“默认部署”。停用它并编写自己的：

```
<execution>
  <id>default-deploy</id>
  <phase>none</phase>
</execution>
<execution>
  <id>my-deploy</id>
  <phase>deploy</phase>
  <goals>
    <goal>deploy</goal>
  </goals>
  ...
</execution> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T21:21:00.300

也许有点晚了，但这是我的假设：

使用调试输出运行 maven，例如*mvn clean deploy -X*，然后检查调试输出，尤其是以下两行：

```
 [DEBUG]   (f) pomFile = /home/rotscher/projects/localswap/localswap-web/target/pom.xml
    [DEBUG]   (f) project = MavenProject: ch.rotscher.localswap:localswap-web:1 @ /home/rotscher/projects/localswap/localswap-web/target/pom.xml 
```

路径应该相等（根据 java.io.File.equals）。因此，我想您的解决方案可能是使用*${basedir}配置**pomFile*的路径：

 *```
 <plugin>
      <artifactId>maven-deploy-plugin</artifactId>
      <configuration>
          <pomFile>${basedir}/target/modified-pom-replacePomPlaceholder/modified-pom/pom.xml</pomFile>
        </configuration>
      </plugin> 
```*

# c# - 使用 MSDN 示例使用 gif 动画绘制错误的矩形

> ID：12897891
> 
> 赞同：1
> 
> 时间：2012-10-15T14:34:45.497
> 
> 标签：c#, compact-framework, animated-gif, rectangles

我有一个gif动画。当我在 CompactFramework 中工作时，我遵循[了这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/aa446483.aspx)。

基本思想是将帧添加到图像中并`rectangle`用下一帧重绘 a，从而创建动画。它工作得很好，只是动画显示在一个正方形中，而不是我的图像的全尺寸（即 240,320）。

这是我的代码：

在 AnimateCtl.cs 类中：

```
public class AnimateCtl : System.Windows.Forms.Control
{
    Timer fTimer;
    int frameWidth = 240;
    int frameHeight = 320;
    int loopCount = 0;
    int loopCounter = 0;
    int frameCount;
    int currentFrame = 0;
    Graphics graphics;

    private Bitmap bitmap;
    public Bitmap Bitmap
    {
        get
        {
            return bitmap;
        }
        set
        {
            bitmap = value;
        }
    }

    private void Draw(int iframe)
    {
        //Calculate the left location of the drawing frame
        int XLocation = iframe * frameWidth;

        Rectangle rect = new Rectangle(XLocation, 0, frameWidth, frameHeight);

        //Draw image
        graphics.DrawImage(bitmap, 0, 0, rect, GraphicsUnit.Pixel);
    }

    public AnimateCtl()
    {
        //Cache the Graphics object
        graphics = this.CreateGraphics();
        //Instantiate the Timer
        fTimer = new System.Windows.Forms.Timer();
        //Hook up to the Timer's Tick event
        fTimer.Tick += new System.EventHandler(this.timer1_Tick);
    }

    /// <summary>
    /// Start animation
    /// </summary>
    /// <param name="frWidth"></param>
    /// <param name="DelayInterval"></param>
    /// <param name="LoopCount"></param>
    public void StartAnimation(int frWidth, int DelayInterval, int LoopCount)
    {

        frameWidth = frWidth;
        //How many times to loop
        loopCount = LoopCount;
        //Reset loop counter
        loopCounter = 0;
        //Calculate the frameCount
        frameCount = bitmap.Width / frameWidth;
        frameHeight = bitmap.Height;
        //Resize the control
        //this.Size(frameWidth, frameHeight);
        //Assign delay interval to the timer
        fTimer.Interval = DelayInterval;
        //Start the timer
        fTimer.Enabled = true;
    }

    private void timer1_Tick(object sender, System.EventArgs e)
    {
        if (loopCount == -1) //loop continuously
        {
            this.DrawFrame();
        }
        else
        {
            if (loopCount == loopCounter) //stop the animation
                fTimer.Enabled = false;
            else
                this.DrawFrame();
        }
    }

    private void DrawFrame()
    {
        if (currentFrame < frameCount - 1)
        {
            //move to the next frame
            currentFrame++;
        }
        else
        {
            //increment the loopCounter
            loopCounter++;
            currentFrame = 0;
        }
        Draw(currentFrame);
    } 
```

在我的 Form1 中：

```
public partial class Form1 : Form
{
    AnimateCtl animCtl;

    public Form1()
    {
        InitializeComponent();

        //Instantiate control
        animCtl = new AnimateCtl();
        //Assign the Bitmap from the image file
        animCtl.Bitmap = new Bitmap(@"\Program Files\Animacion\Animacion-Frames.jpg");
        //Set the location
        animCtl.Location = new Point(0, 0);
        //Add to control to the Form
        this.Controls.Add(animCtl);

        animCtl.StartAnimation(240, 100, 3);
    }        
} 
```

为什么它没有以正确的尺寸绘制矩形？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:05:20.227

删除 Draw 方法并像这样更新 DrawFrame

```
 private void DrawFrame() {
        if (currentFrame < frameCount - 1) {
            currentFrame++;
        } else {
            loopCounter++;
            currentFrame = 0;
        }
        this.Invalidate();
    }

    protected override void OnPaint(PaintEventArgs e) {
        base.OnPaint(e);

        int XLocation = currentFrame * frameWidth;
        Rectangle rect = new Rectangle(XLocation, 0, frameWidth, frameHeight);
        e.Graphics.DrawImage(bitmap, 0, 0, rect, GraphicsUnit.Pixel);
    } 
```

永远不要使用 this.CreateGraphics()。覆盖 OnPaint 方法是正确的方法。OnPaint 将始终在您调用 this.Invalidate(); 后触发。

使用 this.CreateGraphics() 您只能获得当前的图形大小，但在表单显示之后，控件大小可能会发生变化。

# javascript - Jquery jAlert 插件：JAlert over jPrompt

> ID：12897895
> 
> 赞同：1
> 
> 时间：2012-10-15T14:34:57.817
> 
> 标签：javascript, jquery, jquery-plugins

有一个问题 - 想要在 jPrompt() 上显示 jAlert()。

jAlert 显示正常。但是，它隐藏了 jPrompt。我们可以在 jPrompt 上显示 jAlert 弹出窗口，保持原样吗？

```
jPrompt('Please post your message','', 'Post Message', function(text) {

     if (text == null || text.length < 1) 
     {
         jAlert('Please enter text', 'Post Message');
     }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:43:42.640

您传递给提示的回调在提示已经关闭后执行，而不是在您按下确定按钮时执行。

如果您想要一个用户可以输入一些信息的模式窗口，我建议从第三方 jAlert 切换到[官方 jquery dialog](http://jqueryui.com/dialog/)，因为它提供了更多的灵活性。

# http - Powershell System.Net.WebClient 身份验证

> ID：12897906
> 
> 赞同：3
> 
> 时间：2012-10-15T14:35:31.553
> 
> 标签：http, authentication, powershell, webclient

使用以下代码尝试从受保护的 HTTP 源下载文件会返回 401 Unauthorized：

```
$pfile = "\\some\local\leaf\path"
$user = "MyUserName"

$pwdIn = read-host -assecurestring | convertfrom-securestring | out-file $pfile
$pwdOut = get-content $pFile| convertto-securestring

$url="http://path.to/file"
$file = "\\localpath\to\file"
$webclient = new-object System.Net.WebClient
$webclient.Credentials = new-object System.Net.NetworkCredential($user, $pwdOut)
$webclient.DownloadFile($url,$file) 
```

跳过编写密码文件的步骤也是如此：

```
$pwd = read-host -assecurestring 
...
$webclient.Credentials = new-object System.Net.NetworkCredential($user, $pwd) 
```

但是，跳过安全字符串创建工作得很好：

```
 $pwd = read-host
 ...
 $webclient.Credentials = new-object System.Net.NetworkCredential($user, $pwd) 
```

上面的代码不会返回任何其他错误。我在顶部测试原始代码版本时验证了目标密码文件的存在和明显的结构有效性。整个代码都在单个脚本中，因此 convertto 和 convertfrom 在执行期间具有相同的环境。我在 x86 和 64 位 powershell 中都试过这个。

事实上，我什至可以将安全字符串转换回正确的基本字符串，并将其与 WebClient 一起使用：

```
$pwdtmp = get-content $pFile| convertto-securestring
$pwdOut = [Runtime.InteropServices.Marshal]::PtrToStringAuto([Runtime.InteropServices.Marshal]::SecureStringToBSTR($pwdtmp))
$webclient.Credentials = new-object System.Net.NetworkCredential($user, $pwdOut) 
```

因此，问题必须与使用 SecureString 和 System.Net.NetworkCredential 类，但是[http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkcredential.aspx)以及我发现的一些示例表示 SecureString 应该作为第二个参数。

在写这篇文章时，我实际上找到了一个解决方案：

```
$user = "user"
$pwd = read-host -assecurestring
$creds = New-Object System.Management.Automation.PSCredential `
     -ArgumentList $user, $pwd  
$webclient.Credentials = new-object System.Net.NetworkCredential($user, $Creds.GetNetworkCredential().Password)
$webclient.DownloadFile($url,$file) 
```

但不能解释为什么 SecureString 类型不起作用，而 PSCredential.Password 起作用。执行 $creds|gm 清楚地表明 $creds.Password 实际上也是一个 SecureString：

> 类型名称：System.Management.Automation.PSCredential
> 
> 名称 MemberType 定义
> 
> ---- ---------- ---------- Equals Method bool Equals(System.Object obj)
> GetHashCode Method int GetHashCode()
> GetNetworkCredential Method System.Net.NetworkCredential GetNetworkCredential() GetType 方法类型 GetType() ToString 方法字符串 ToS​​tring()
> 密码属性 System.Security.SecureString 密码 {get;}

是什么赋予了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T20:07:19.580

您可能正在使用早期版本的 .Net Framework 中的 System.Net.NetworkCredential。接受 SecureString 的构造函数重载是在 .Net 4.0 中引入的。如果将 SecureString 传递给接受字符串的构造函数，powershell 会将 SecureString 转换为字符串，从而呈现字符串“System.Security.SecureString”的值。你可以测试一些东西：

1.  调用构造函数，然后查看它的密码属性以查看值是什么。如果我的假设是正确的，它将是“System.Security.SecureString”。

2.  查看您使用的 .Net Framework 版本：

    $PSVersionTable.CLRVersion

3.  查询对象以查看它具有哪些构造函数：

    一种。从 Jeffrey Snover复制并粘贴此[函数。](http://blogs.msdn.com/b/powershell/archive/2008/09/01/get-constructor-fun.aspx)

    湾。调用函数：

    获取构造函数 system.net.networkcredential

从下面的输出中可以看出（我使用的是 .net 2.0）——没有接受 SecureString 的重载：

```
NetworkCredential(
)
NetworkCredential(
    String userName,
    String password,
)
NetworkCredential(
    String userName,
    String password,
    String domain,
) 
```

# eclipse - 将 PyUnit 输出重定向到 Eclipse 中的文件

> ID：12897908
> 
> 赞同：2
> 
> 时间：2012-10-15T14:35:33.067
> 
> 标签：eclipse, pydev, python-unittest

Eclipse 中是否有内置方法可以将 PyUnit 的输出重定向到文件（~保存报告）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:59:02.147

输出可以轻松地重定向到**运行配置**>**通用**选项卡 >**标准输入和输出**部分中的文件。隐藏在视线中...

# ssl - 如何将 SSL 证书从 Azure 导出到本地服务器？

> ID：12897909
> 
> 赞同：2
> 
> 时间：2012-10-15T14:35:33.310
> 
> 标签：ssl, azure, windows-server-2008

我想将我的 MVC 应用程序从**Azure**移动到**内部服务器**。如何导出与应用关联的 SSL 证书以将其安装在本地服务器上？

有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T18:24:34.737

不。无法从 Windows Azure 获取证书。问题是它（证书）最初是如何出现在 Azure 中的。它肯定不是微软人上传的，也不是什么魔法。是开发人员打包部署包以包含证书参考（指纹）和在 Azure 中上传原始证书的服务管理员（或共同管理员）。所以联系那些人（可能只是你？）并索取原始证书。

如果证书丢失，请联系原始颁发者（认证机构）索取副本（如果您是最初要求的人）。如果您最初没有请求证书，则可能是有原因的。

# php - 带有列表的 Redis 通知

> ID：12897910
> 
> 赞同：0
> 
> 时间：2012-10-15T14:35:35.870
> 
> 标签：php, notifications, redis

我正在构建一个使用 Redis 作为队列/消息存储的网站。

我现在正在尝试构建的是一个非常*基本*的通知系统；我现在正在做的事情如下：

```
//sending notification:
$idIn = idToSendNotificationTo();
$r->rpush("$idIn*notifs", "$myId*likephoto947574") 
```

考虑到在 PHP 等同步系统上，pub/sub 并不完全可行，这种方法仍然有效吗？

另外，如何让接收用户使用列表获取所有通知？LPOP 将它们一一获取，当用户打开网页时，应弹出所有新通知。

有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:01:01.633

是的，这种方法当然可以。要从列表中弹出多个项目，您应该使用[LRANGE](http://redis.io/commands/lrange) + [LTRIM](http://redis.io/commands/ltrim)的组合。

# python - 客户端连接不稳定的python套接字服务器/客户端协议

> ID：12897911
> 
> 赞同：11
> 
> 时间：2012-10-15T14:35:35.337
> 
> 标签：python, sockets

我有一个线程 python 套接字服务器，它为每个连接打开一个新线程。

线程是基于问答的非常简单的通信。基本上客户端发送初始数据传输，服务器让它运行一个外部应用程序，该应用程序对传输进行处理并返回服务器将发回的回复，并且循环将再次开始，直到客户端断开连接。

现在，因为客户端将在手机上，因此连接不稳定，我得到的开放线程不再连接，并且由于循环以 recv 开始，因此很难以这种方式中断丢失的连接。

我正在考虑在 recv 之前添加一个发送来测试连接是否仍然存在，但是如果客户端在我的故障安全发送之后断开连接，因为客户端仅每 5 秒发送一个数据流，这可能根本无济于事。

我注意到 recv 有时会中断，但并非总是如此，在这些情况下，我会留下使用资源的僵尸线程。

这也可能是我的系统被DOSed的一个可靠漏洞。自从星期四以来，我已经浏览了 python 手册和谷歌搜索，但我发现的大多数东西都与客户端和非阻塞模式有关。

谁能指出我解决此问题的正确方向？

**代码示例：**

听众：

```
serversocket = socket(AF_INET, SOCK_STREAM)
serversocket.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
serversocket.bind(addr)
serversocket.listen(2)
logg("Binded to port: " + str(port))

# Listening Loop
while 1:
  clientsocket, clientaddr = serversocket.accept()
  threading.Thread(target=handler, args=(clientsocket, clientaddr,port,)).start()

# This is useless as it will never get here
serversocket.close() 
```

处理程序：

```
 # Socket connection handler (Threaded)
  def handler(clientsocket, clientaddr, port):
    clientsocket.settimeout(15)

    # Loop till client closes connection or connection drops
    while 1:
      stream = ''
      while 1:
        ending = stream[-6:] # get stream ending
        if ending == '.$$$$.':
          break

        try:
          data = clientsocket.recv(1)
        except:
          sys.exit()

        if not data:
          sys.exit()
          # this is the usual point where thread is closed when a client closes connection normally

        stream += data

      # Clear the line ending
      stream = base64.b64encode(stream[:-6])

      # Send data to be processed
      re = getreply(stream)

      # Send response to client
      try:
        clientsocket.send(re + str('.$$$$.'))
      except:
        sys.exit() 
```

如您所见，如果连接失败，至少有一种情况应该触发退出，但有时它们不会触发三种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:02:55.047

抱歉，但我认为`threaded`在这种情况下这个想法不好。因为您不需要在这些线程（工人？）中处理/做很多事情，并且大多数时候这些线程都在等待套接字（是阻塞操作，不是吗？）我建议阅读有关[事件驱动编程](http://en.wikipedia.org/wiki/Event-driven_programming)。根据套接字，这种模式非常有用，因为您可以在一个线程中完成所有事情。您一次与一个套接字通信，但其余连接只是在等待数据，因此几乎没有丢失。当您发送几个字节时，您只需检查是否可能需要携带另一个连接。您可以阅读有关[select](http://linux.die.net/man/2/select) 和[epoll](http://en.wikipedia.org/wiki/Epoll)的信息。

在 python 中有几个库可以很好地使用它：

*   libev（c 库包装器） - [pyev](http://pypi.python.org/pypi/pyev/)
*   [龙卷风](http://www.tornadoweb.org/)
*   [扭曲的](http://twistedmatrix.com/trac/)

我在一些项目中使用了龙卷风，它很好地完成了这项任务。Libev 也很好，但它是一个 c 包装器，所以它有点`low-level`（但对于某些任务来说非常好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:07:40.837

因此，您应该`socket.settimeout(float)`与`clientsocket`建议的评论之一一起使用。

您看不到任何差异的原因是，当您调用`socket.recv(bufsize[, flags])`并且超时用完时，`socket.timeout`会引发异常并且您捕获该异常并退出。

```
try:
      data = clientsocket.recv(1)
except:
      sys.exit() 
```

应该是这样的：

```
try:
      data = clientsocket.recv(1)
except timeout:
      #timeout occurred
      #handle it
      clientsocket.close()
      sys.exit() 
```

# c# - C# 使用 GetScheme 获取特定数据库

> ID：12897913
> 
> 赞同：0
> 
> 时间：2012-10-15T14:35:37.430
> 
> 标签：c#, sql, database

我试图弄清楚我如何只能在我的数据库组合框中列出特定的数据库。我有几个数据库都包含_Logging。我只希望日志记录显示在组合框中。我该如何做到这一点？调用 getScheme 后，是否需要调用另一个查询来执行类似“%Logging%”查询或类似的操作？

```
 var databases = sqlConnection1.GetSchema("Databases");

            foreach (DataRow database1 in databases.Rows)
            {

                String dbName = database1.Field<String>("database_name");

                Console.WriteLine(dbName);

                cmbDatabaseList.Items.Add(dbName);

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:40:53.247

你为什么不这样做：

```
if (dbName.Contains("Logging"))
cmbDatabaseList.Items.Add(dbName); 
```

# iis - 将 ASP.NET MVC 4 部署到 Staging 并最终部署到 Windows Azure

> ID：12897914
> 
> 赞同：2
> 
> 时间：2012-10-15T14:35:41.373
> 
> 标签：iis, azure, asp.net-mvc-4

我有一个 ASP.NET MVC 4 应用程序。这将需要部署到内部 IIS 服务器，这是一台 Windows Server 2008 机器，以进行测试。最终，我们会将应用程序作为 Web 角色部署到 Windows Azure。据我了解，有一种方法可以在 Windows Server 2008 上拥有“私有”云。

将 ASP.NET MVC 4 应用程序部署到“私有云”的推荐方法是什么？请记住，此应用程序最终将进入 Windows Azure 的公共版本。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:09:47.800

如果您最终想在 Azure 上进行部署，我强烈建议您在 Azure 上进行测试。如果这是您正在使用的商业项目，并且您想要进行一个月的测试，两个实例的成本约为 160 美元（您确实需要使用两个实例进行测试）。将其与必须设置和支持服务器的人的每小时费率进行比较，您可能已经领先了。

您可以使用 IIS、SQL 甚至 AppFabric 缓存 (Velocity) 在本地运行您的站点，所有这些都与您在 Azure 中获得的类似，但又不一样。尤其是 Windows Azure SQL DB (WASD) 与本地 SQL Server DB 相比，具有不同的限制和不同的性能配置文件。如果您想使用 Azure 存储，则没有此版本的本地版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:40:47.897

我会得到一个 Windows Azure VM（或者没关系，它可以是本地服务器）并通过 Web 部署进行部署。

这是一篇很棒的博客文章，介绍了如何通过仅使用一个脚本的 Web 部署来启动和运行 VM：

[编写所有内容 - 使用 IIS、Web 部署和其他东西为 Web 服务器初始化 Windows Azure VM](http://www.tugberkugurlu.com/archive/script-out-everything-initialize-your-windows-azure-vm-for-your-web-server-with-iis-web-deploy-and-other-stuff)

我在那里使用了 Windows Server 2012 和 PowerShell 3.0。因此，可能有一些东西在 Windows Server 2008 R2 中不可用。但是，我听说 PowerShell 3.0 现在可用于低级操作系统。如果这是真的，我还建议您首先安装它，因为它具有新功能。

# wcf - 用于数据验证的 DataMember 属性

> ID：12897916
> 
> 赞同：8
> 
> 时间：2012-10-15T14:35:43.450
> 
> 标签：wcf, attributes, datamember

我希望在我的 WCF 数据合同成员上放置属性以验证字符串长度，并可能使用正则表达式进行更精细的参数验证。

我可以将 [Range] 属性用于数值和 DateTime 值，并且想知道你们中是否有人找到了可用于数据验证的任何其他 WCF 数据成员属性。我发现了 Silverlight 的一些属性，但 WCF 没有。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T18:23:09.523

添加`System.ComponentModel.DataAnnotations`对您的项目的引用。

该参考提供了一些 DataAnnotations，它们是：

`RequiredAttribute, RangeAttribute, StringLengthAttribute, RegularExpressionAttribute`

您可以在您的数据合同中如下所示。

```
 [DataMember]
    [StringLength(100, MinimumLength= 10, ErrorMessage="String length should be between 10 and 100." )]
    [StringLength(50)]     // Another way... String max length 50
    public string FirstName { get; set; }

    [DataMember]
    [Range(2, 100)]
    public int Age { get; set; }

    [DataMember]
    [Required]
    [RegularExpression(@"\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b", ErrorMessage = "Invalid Mail id")]
    public string Email { get; set; } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T00:08:23.067

[**手动验证值**](http://msdn.microsoft.com/en-us/library/dd901590%28v=vs.95%29.aspx)：您可以使用 Validator 类手动应用验证测试。您可以在属性的 set 访问器上调用 ValidateProperty 方法，以根据属性的验证属性检查值。当数据绑定从验证属性接收验证异常时，您还必须将 ValidatesOnExceptions 和 NotifyOnValidationError 属性都设置为 true。

```
var unsafeContact = Request["contactJSON"];
try
{
    var serializer = new DataContractJsonSerializer(typeof(Contact));
    var stream = new MemoryStream(Encoding.UTF8.GetBytes(unsafeContact));
    Contact = serializer.ReadObject(stream) as Contact;
    stream.Close();
}
catch (Exception)
{
   // invalid contact
} 
```

联系类别：

```
[DataContract]
public sealed class Contact
{
    /// <summary>
    /// Contact Full Name
    /// </summary>
    /// <example>John Doe</example>
    [DataMember(Name = "name", IsRequired = true)]
    [StringLength(100, MinimumLength = 1, ErrorMessage = @"Name length should be between 1 and 100.")]
    public string Name {
        get
        {
            return HttpUtility.HtmlEncode(_name);
        }
        internal set
        {
            Validator.ValidateProperty(value, new ValidationContext(this, null, null) { MemberName = "Name" });
            _name = value;
        }
    }
    private string _name;

    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T16:09:17.140

尝试寻找 WCF 数据注释。WCFDataAnnotations 允许您使用*System.ComponentModel.DataAnnotations*属性自动验证 WCF 服务操作参数。

[http://wcfdataannotations.codeplex.com/](http://wcfdataannotations.codeplex.com/)

# sas - SAS 动态库名称

> ID：12897917
> 
> 赞同：0
> 
> 时间：2012-10-15T14:35:45.523
> 
> 标签：sas

我想弄清楚如何创建动态库引用。我已经想出了如何创建目录，但现在：如何正确创建库引用？

下面的代码有效，但需要重复代码。第一个块不会创建引用，但第二个会创建引用。将其放入循环（执行两次）不起作用......

我想将此代码重做一个宏，以便在调用宏时分配根目录。

提前致谢！

```
data _null_;
rootdir='c:/temp';
dir1=put(today(),yymmddn8.);
dir2='Individual';
dir3='Household'; 
newdir1=dcreate(dir1,rootdir);
newdir2=dcreate(dir2,newdir1); 
newdir3=dcreate(dir3,newdir1);
lname=catx('/',rootdir,dir1,dir2);
lname2=catx('/',rootdir,dir1,dir3);
call symput('ln1',lname);
call symput('ln2',lname2);
libname Indiv "&ln1";
libname HH "&ln2";
run;

data _null_;
rootdir='c:/temp';
dir1=put(today(),yymmddn8.);
dir2='Individual';
dir3='Household'; 
lname=catx('/',rootdir,dir1,dir2);
lname2=catx('/',rootdir,dir1,dir3);
call symput('ln1',lname);
call symput('ln2',lname2);
libname Indiv "&ln1";
libname HH "&ln2";
run; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:53:08.953

libname 不需要在 datastep 中执行；这是一个开放的代码声明。因此，您的代码可以简单地运行 datastep，然后运行 ​​libname 语句，即

```
data _null_;
rootdir='c:/temp';
dir1=put(today(),yymmddn8.);
dir2='Individual';
dir3='Household'; 
newdir1=dcreate(dir1,rootdir);
newdir2=dcreate(dir2,newdir1); 
newdir3=dcreate(dir3,newdir1);
lname=catx('/',rootdir,dir1,dir2);
lname2=catx('/',rootdir,dir1,dir3);
call symput('ln1',lname);
call symput('ln2',lname2);
run;
libname Indiv "&ln1";
libname HH "&ln2"; 
```

真的，虽然这些都不需要数据步骤......

```
%let dir1=%sysfunc(today(),YYMMDDN8.);
%let dir2=Individual;
%let dir3=Household;
%let ln1=c:/temp/&dir1./&dir2.;
%let ln2=c:/temp/&dir1./&dir3.;
x "md &ln1.";
x "md &ln2.";
libname Indiv "&ln1.";
libname HH "&ln2."; 
```

您甚至不必创建 ln1 和 ln2，您可以直接将 libname 分配给 ln1 和 ln2 的文本。我还添加了目录创建语句，以明确它是如何交互的（如果你确实使用它，你应该使用中间 ln1/ln2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T23:49:36.483

```
%macro libs(rootdir);
data _null_;
dir1=put(today(),yymmddn8.);
dir2='Individual';
dir3='Household'; 
newdir1=dcreate(dir1,&rootdir);
newdir2=dcreate(dir2,newdir1); 
newdir3=dcreate(dir3,newdir1);
call symput('ln1',catx('/',&rootdir,dir1,dir2));
call symput('ln2',catx('/',&rootdir,dir1,dir3));
run;
libname Indiv "&ln1";
libname HH "&ln2";
%mend libs;

%libs("c:/temp") 
```

似乎可以解决问题。不确定是否是最有效的方法，但至少它是一种方法。谢谢乔的建议，使我得到了最终答案。

# spring - PrimePush 聊天不起作用

> ID：12897919
> 
> 赞同：2
> 
> 时间：2012-10-15T14:35:46.043
> 
> 标签：spring, jakarta-ee, jsf-2, primefaces, primepush

我的目标是在页面加载时订阅两个聊天用户（老师和学生），他们可以互相发送消息，所以这就是我所做的：

**1-BackingBean：**

```
package com.myapp.beans;

import org.primefaces.context.RequestContext;
import org.primefaces.push.PushContext;
import org.primefaces.push.PushContextFactory;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

import com.ocpsoft.pretty.faces.annotation.URLMapping;
import com.xeno.xenoTemplate.utils.constants.Pages;

@Component("chatBean")
@Scope("view")
@URLMapping(id = Pages.CHAT, pattern = "/chat", viewId = "/faces/pages/users/chat.xhtml")
public class ChatView {

    private final PushContext pushContext = PushContextFactory.getDefault()
            .getPushContext();

    private String privateMessage;

    private String privateUser;

    private final static String CHANNEL = "/chat/";

    private String student = "student";

    private String teacher = "teacher";

    private boolean pageLoaded;

    private boolean studentLoggedIn;

    private boolean teacherLoggedIn;

    public void preRender() {
        System.out.println("########### preRender CHAT BEAN #########");
        if (!pageLoaded) { // invoked first time page loaded
            System.out.println("########### Invoking PreRender Code #########");
            if (!studentLoggedIn) {
                System.out.println("########## STUDENT LOG IN ##########");
                RequestContext.getCurrentInstance().execute(
                        "subscriber.connect('/" + student + "')");
                studentLoggedIn = true;
            }
            if (!teacherLoggedIn) {
                System.out.println("########## TEACHER LOG IN ##########");
                RequestContext.getCurrentInstance().execute(
                        "subscriber.connect('/" + teacher + "')");
                teacherLoggedIn = true;
            }
            pageLoaded = true;
        }
    }

    public void sendPrivate() {
        System.out.println("######### SEND PRIVATE ##########");
        pushContext.push(CHANNEL + privateUser, "[PM] " + "PRIVATE" + ": "
                + privateMessage);
        privateMessage = null;
    }

    public void setTeacher(String teacher) {
        this.teacher = teacher;
    }

    public String getTeacher() {
        return teacher;
    }

    public void setStudent(String student) {
        this.student = student;
    }

    public String getStudent() {
        return student;
    }

    public void setStudentLoggedIn(boolean studentLoggedIn) {
        this.studentLoggedIn = studentLoggedIn;
    }

    public boolean isStudentLoggedIn() {
        return studentLoggedIn;
    }

    public void setTeacherLoggedIn(boolean teacherLoggedIn) {
        this.teacherLoggedIn = teacherLoggedIn;
    }

    public boolean isTeacherLoggedIn() {
        return teacherLoggedIn;
    }

    public String getPrivateUser() {
        return privateUser;
    }

    public void setPrivateUser(String privateUser) {
        this.privateUser = privateUser;
    }

    public String getPrivateMessage() {
        return privateMessage;
    }

    public void setPrivateMessage(String privateMessage) {
        this.privateMessage = privateMessage;
    }

} 
```

并在**JSF 页面**中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pretty="http://ocpsoft.com/prettyfaces"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:sec="http://www.springframework.org/security/tags"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
    <title>Chat</title>
</h:head>

<h:body>

    <ui:composition template="/pages/template/commonLayout.xhtml">

        <ui:define name="content">
        <f:event type="preRenderView" listener="#{chatBean.preRender}" />

            <h:form id="form">

                <p:fieldset id="container" legend="PrimeChat" toggleable="true">

                    <h:panelGroup>

                       <h:panelGrid columns="2" columnClasses="publicColumn,usersColumn"
                            style="width:400px;">

                       <p:outputPanel style="height: 100px;" id="public" layout="block"
                                styleClass="ui-corner-all ui-widget-content chatlogs" />

                       <h:panelGroup id="users" styleClass="usersList">

                                <p:commandButton id="private_send" title="Chat" icon="ui-icon-comment"
                                    oncomplete="pChat.show()" update=":form:privateChatContainer">
                                    <f:setPropertyActionListener value="#{chatBean.student}"
                                        target="#{chatBean.privateUser}" />
                                </p:commandButton>
                        #{chatBean.student}
                        </h:panelGroup>

                        </h:panelGrid>

                    </h:panelGroup>

                </p:fieldset>

                <!-- Private Chat Dialog -->
                <p:dialog widgetVar="pChat" header="Private Chat" modal="true"
                    showEffect="fade" hideEffect="fade">
                    <h:panelGrid id="privateChatContainer" columns="2"
                        columnClasses="vtop,vtop">
                        <p:outputLabel for="pChatInput"
                            value="To: #{chatBean.privateUser}" />
                        <p:inputTextarea id="pChatInput"
                            value="#{chatBean.privateMessage}" rows="5" cols="30" />

                        <p:spacer />
                        <p:commandButton value="Send"
                            actionListener="#{chatBean.sendPrivate}"
                            oncomplete="pChat.hide()" />
                    </h:panelGrid>
                </p:dialog>

            </h:form>

            <p:socket onMessage="handleMessage" channel="/chat"
                autoConnect="false" widgetVar="subscriber" />

            <script type="text/javascript">
                function handleMessage(data) {
                    alert('handleMessage');
                    var chatContent = $(PrimeFaces
                            .escapeClientId('form:public'));
                    chatContent.append(data + '<br />');
                    chatContent.scrollTop(chatContent.height());
                }
            </script>

        </ui:define>

    </ui:composition>

</h:body>
</html> 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
      version="3.0"> 

  <display-name>MyAPP</display-name>

  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>

  <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        classpath:META-INF/spring/applicationContext.xml
        classpath:META-INF/spring/applicationSecurity.xml
        </param-value>

  </context-param>

  <context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>
    /WEB-INF/springsecurity.taglib.xml;/WEB-INF/utils.taglib.xml
    </param-value>
  </context-param>

  <context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>false</param-value>
  </context-param>

  <!--  -->
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <welcome-file-list>
    <welcome-file>/</welcome-file>
  </welcome-file-list>

  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
  </context-param>

  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>

   <filter>
      <filter-name>hibernateFilter</filter-name>
      <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
      <init-param>
         <param-name>sessionFactoryBeanName</param-name>
         <param-value>sessionFactory</param-value>         
      </init-param>      
   </filter>

   <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping> 

  <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <!--  
    <filter>
      <filter-name>Pretty Filter</filter-name>
      <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
      <init-param>
            <param-name>logLevel</param-name>
            <param-value>ERROR</param-value>
      </init-param>
    </filter>

    <filter-mapping>
    <filter-name>Pretty Filter</filter-name>
      <url-pattern>/*</url-pattern>
      <dispatcher>FORWARD</dispatcher>
      <dispatcher>REQUEST</dispatcher>
      <dispatcher>ERROR</dispatcher>
    </filter-mapping>
    -->

    <session-config>
      <session-timeout>30</session-timeout>
    </session-config>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>

  <error-page>
     <exception-type>java.lang.Throwable</exception-type>
     <location>/error</location>
  </error-page>

   <error-page>
     <error-code>400</error-code>
     <location>/error</location>
   </error-page>

   <error-page>
     <error-code>404</error-code>
     <location>/pageNotFound</location>
   </error-page>

   <!-- PrimePush Servlet -->

   <servlet>
      <servlet-name>Push Servlet</servlet-name>
      <servlet-class>org.primefaces.push.PushServlet</servlet-class>
       <load-on-startup>1</load-on-startup>
        <init-param>
          <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
          <param-value>org.atmosphere.cache.HeaderBroadcasterCache</param-value>
        </init-param>
        <init-param>
          <param-name>org.atmosphere.cpr.broadcasterClass</param-name>
          <param-value>org.atmosphere.cpr.DefaultBroadcaster</param-value>
        </init-param>
        <init-param>
          <param-name>org.atmosphere.cpr.broadcastFilterClasses</param-name>
          <param-value>org.atmosphere.client.TrackMessageSizeFilter</param-value>
        </init-param>    
        <init-param>
          <param-name>org.atmosphere.cpr.sessionSupport</param-name>
          <param-value>true</param-value>
        </init-param>
     </servlet>

     <servlet-mapping>
       <servlet-name>Push Servlet</servlet-name>
       <url-pattern>/primepush/*</url-pattern>
     </servlet-mapping>

</web-app> 
```

我正在使用**以下罐子**：

1.  JSF 2.1.10
2.  PrimeFaces 4.0-快照
3.  雄猫 7.0.32
4.  大气运行时 1.0.1

**标题**

```
Request URL:http://localhost:8080/MyAPP/chat
Request Method:POST
Status Code:200 OK
Request Headersview source
Accept:application/xml, text/xml, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:282
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Cookie:JSESSIONID=2BB4298A4E291CCCBB80EE3A4A5624BC
Faces-Request:partial/ajax
Host:localhost:8080
Origin:http://localhost:8080
Referer:http://localhost:8080/PrimeTemplate/chat
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.47 Safari/536.11
X-Requested-With:XMLHttpRequest
Form Dataview URL encoded
javax.faces.partial.ajax:true
javax.faces.source:form:j_idt31
javax.faces.partial.execute:@all
form:j_idt31:form:j_idt31
form:form
form:j_idt24:
form:container_collapsed:false
form:pChatInput:aaaaaaaaaaaa
javax.faces.ViewState:5079906166114901626:-433970771510989466
Response Headersview source
Cache-Control:no-cache
Content-Length:190
Content-Type:text/xml;charset=UTF-8
Date:Thu, 18 Oct 2012 10:40:04 GMT
Server:Apache-Coyote/1.1
X-Powered-By:JSF/2.0 
```

**回复：**

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><changes><update id="javax.faces.ViewState"><![CDATA[5079906166114901626:-433970771510989466]]></update></changes></partial-response> 
```

**问题：**

我可以打开学生的聊天窗口并输入聊天消息然后按Enter，代码进入`sendPrivate`bean方法，但`handleMessage`没有调用JS函数，因此私人消息不会显示在JSF页面中，我没有错误在浏览器控制台中。

请告知如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T05:49:48.490

尝试将以下 jars 添加到您的 lib 文件夹中（如果您还没有这样做）：

大气兼容tomcat-1.0.1.jar

大气兼容-tomcat7-1.0.1.jar

还要记住，如果您以 STUDENT 身份连接到“学生”频道，并且如果您将消息推送到“教师”频道，则只有教师频道会收到消息。

要测试您的聊天，您需要在一个浏览器中以学生身份登录，在另一个浏览器中以教师身份登录。在这种情况下，当您在一个浏览器中以学生身份向老师推送消息时，另一个浏览器中的老师会收到该消息。

# regex - c# 正则表达式匹配搜索字符串加下一个单词

> ID：12897921
> 
> 赞同：0
> 
> 时间：2012-10-15T14:35:49.783
> 
> 标签：regex, c#-4.0

我想返回字符串中给定搜索字符串的匹配项。加上搜索字符串之后的下一个单词。

**要搜索的短语：“foobar foo”**

**示例输入：**

```
foo foobar foo bar1 foobar1
foobar foos bar2 foobar2
foo barfoobar foos bar3 foobar3 
```

**期望的比赛：**

```
foobar foo bar1
foobar foos bar2
barfoobar foos bar3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:39:16.180

使用正则表达式模式

```
\b\w*foobar foo\w*\s+\w+\b 
```

# r - R中的多尺度层次聚类错误

> ID：12897925
> 
> 赞同：5
> 
> 时间：2012-10-15T14:36:00.843
> 
> 标签：r, cluster-analysis, correlation, hierarchical-clustering, hclust

我正在使用名为 的 R 包进行层次聚类，该包`pvclust`通过`hclust`合并引导来计算获得的聚类的显着性水平。

考虑以下具有 3 个维度和 10 个观察值的数据集：

```
mat <- as.matrix(data.frame("A"=c(9000,2,238),"B"=c(10000,6,224),"C"=c(1001,3,259),
                        "D"=c(9580,94,51),"E"=c(9328,5,248),"F"=c(10000,100,50),
                        "G"=c(1020,2,240),"H"=c(1012,3,260),"I"=c(1012,3,260),
                        "J"=c(984,98,49))) 
```

当我`hclust`单独使用时，聚类对于欧几里得度量和相关度量都运行良好：

```
# euclidean-based distance
dist1 <- dist(t(mat),method="euclidean")
mat.cl1 <- hclust(dist1,method="average")

# correlation-based distance
dist2 <- as.dist(1 - cor(mat))
mat.cl2 <- hclust(dist2, method="average") 
```

但是，当使用 each 设置时`pvclust`，如下所示：

```
library(pvclust)

# euclidean-based distance
mat.pcl1 <- pvclust(mat, method.hclust="average", method.dist="euclidean", nboot=1000)

# correlation-based distance
mat.pcl2 <- pvclust(mat, method.hclust="average", method.dist="correlation", nboot=1000) 
```

...我收到以下错误：

*   欧几里得：`Error in hclust(distance, method = method.hclust) : must have n >= 2 objects to cluster`
*   相关性：`Error in cor(x, method = "pearson", use = use.cor) : supply both 'x' and 'y' or a matrix-like 'x'`。

请注意，距离是通过计算的，`pvclust`因此不需要事先计算距离。另请注意，`hclust`方法（平均值、中位数等）不会影响问题。

当我将数据集的维度增加到 4 时，`pvclust`现在运行良好。为什么我`pvclust`在 3 维及以下得到这些错误，但没有得到这些错误`hclust`？此外，当我使用 4 维以上的数据集时，为什么错误会消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T16:01:57.637

在函数的末尾，`pvclust`我们看到一行

```
mboot <- lapply(r, boot.hclust, data = data, object.hclust = data.hclust, 
    nboot = nboot, method.dist = method.dist, use.cor = use.cor, 
    method.hclust = method.hclust, store = store, weight = weight) 
```

然后深入挖掘我们发现

```
getAnywhere("boot.hclust")
function (r, data, object.hclust, method.dist, use.cor, method.hclust, 
    nboot, store, weight = F) 
{
    n <- nrow(data)
    size <- round(n * r, digits = 0)
    ....
            smpl <- sample(1:n, size, replace = TRUE)
            suppressWarnings(distance <- dist.pvclust(data[smpl, 
                ], method = method.dist, use.cor = use.cor))
    ....
} 
```

另请注意，`r`函数参数的默认`pvclust`值为`r=seq(.5,1.4,by=.1)`. 好吧，实际上我们可以看到这个值在某处被改变：

```
Bootstrap (r = 0.33)... 
```

所以我们得到的`size <- round(3 * 0.33, digits =0)`是`1`，最后`data[smpl,]`只有 1 行，小于 2。在更正后`r`它返回一些可能是无害的错误，并且也给出了输出：

```
mat.pcl1 <- pvclust(mat, method.hclust="average", method.dist="euclidean", 
                    nboot=1000, r=seq(0.7,1.4,by=.1))
Bootstrap (r = 0.67)... Done.
....
Bootstrap (r = 1.33)... Done.
Warning message:
In a$p[] <- c(1, bp[r == 1]) :
  number of items to replace is not a multiple of replacement length 
```

让我知道结果是否令人满意。

# python - Python表标题到字典

> ID：12897927
> 
> 赞同：2
> 
> 时间：2012-10-15T14:36:02.390
> 
> 标签：python, numpy, python-2.7

我正在使用`numpy.loadtxt`从文本文件中提取大量数据，然后使用循环将不同的列放入不同的字典键中，如下所示：

```
f = numpy.loadtxt(datafile, skiprows=5) # Open and read in the file, skipping to the data
d = {} # Create empty dictionary

for x in range(0, f.shape[1]):
    d[x] = f[:,x]     # Loop through the columns of the datafile, putting each one into
#a dictionary index 
```

文本文件中数组上方的行包含数组中变量的所有标题，有没有办法获取每个变量名称并将其作为相关字典的键名？（即，第一列 = 数据，d[日期]={14/11/12,15/11/12 .... 等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T17:35:22.463

Pandas 是一个好主意，所以对 reptilicus 的回答“竖起大拇指”。

如果您不想依赖 Pandas，您可以轻松地使用该函数`numpy.genfromtxt`将数据直接读取到 numpy 结构化数组中。结构数组的行为既像 numpy 一维数组又像字典。

例如，这是一个示例数据文件“data.csv”：

```
alpha, beta, gamma
100, 0.5, 19.9
210, 0.25, 21.0
240, 0.45, 15.0
290, 0.75, 5.5 
```

您可以将其读入结构化数组，如下所示：

```
>>> data = genfromtxt('data.csv', delimiter=',', names=True, dtype=None) 
```

该选项`names=True`告诉`genfromtxt`使用列标题作为结构化数组中的字段名称。设置`dtype=None`告诉`genfromtxt`自动确定列的数据类型（默认是将所有值转换为双精度浮点值）。

`data`看起来像这样。

```
>>> data
array([(100, 0.5, 19.9), (210, 0.25, 21.0), (240, 0.45, 15.0),
       (290, 0.75, 5.5)], 
      dtype=[('alpha', '<i4'), ('beta', '<f8'), ('gamma', '<f8')]) 
```

您可以访问单个元素（每个元素都是一个包含三个字段的结构）：

```
>>> data[0]
(100, 0.5, 19.9) 
```

或者您可以使用类似字典的界面访问列：

```
>>> data['beta']
array([ 0.5 ,  0.25,  0.45,  0.75]) 
```

你可以结合这些：

```
>>> data['beta'][1]
0.25
>>> data[1]['beta']
0.25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T14:47:40.727

听起来你想在这里使用优秀的 Pandas 库。你当然可以做你自己想做的事，但是 Pandas 提供了一些不错的 I/O 例程，并且还内置了很多日期时间功能。例如：

```
In [747]: print open('foo.csv').read()
date,A,B,C
20090101,a,1,2
20090102,b,3,4
20090103,c,4,5

In [748]: data = read_csv('foo.csv')
Out[748]:
   date  A  B  C
0  20090101  a  1  2
1  20090102  b  3  4
2  20090103  c  4  5 
```

这将创建一个数据框，类似于 Numpy 中的记录数组。您可以使用 data['date']、data['A'] 等来访问所需的列。

更多信息[在这里](http://pandas.pydata.org/pandas-docs/stable/io.html)和[这里](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)

# c# - C# 使用 Calendar 参数调用 Java Web 服务

> ID：12897930
> 
> 赞同：2
> 
> 时间：2012-10-15T14:36:19.987
> 
> 标签：c#, java

我正在编写一个需要调用用 Java 编写的 Web 服务的 C# 桌面客户端。其中两个参数是日历类型。我在尝试将这两个日期传递给 Web 服务时遇到了很大的困难。

我尝试了以下方法，均未成功。

```
DateTime startDate = DateTime.Now;
DateTime endDate = startDate.AddDays(2);

DateTime startDate = new DateTime(2012, 3, 1, 1, 1, 1, DateTimeKind.Unspecified);
DateTime endDate = new DateTime(2012, 4, 1, 1, 1, 1, DateTimeKind.Unspecified);

DateTime startDate = new DateTime(2012, 3, 1, 1, 1, 1, DateTimeKind.Utc);
DateTime endDate = new DateTime(2012, 4, 1, 1, 1, 1, DateTimeKind.Utc);

DateTime startDate = new DateTime(2000, 1, 1, new System.Globalization.GregorianCalendar());
DateTime endDate = new DateTime(2012, 1, 1, new System.Globalization.GregorianCalendar()); 
```

我使用以下代码编写了一个测试 Java 客户端，这可以工作......

```
GregorianCalendar calStartDate = new GregorianCalendar();
GregorianCalendar calEndDate = new GregorianCalendar();

calStartDate.set(2011, 5, 21);
calEndDate.set(2012, 5, 24);

XMLGregorianCalendar startDate = dtf.newXMLGregorianCalendar(calStartDate);
XMLGregorianCalendar endDate = dtf.newXMLGregorianCalendar(calEndDate); 
```

关于如何从 C# 传递日历参数的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:48:30.787

到目前为止，最简单和最便携的做法是将日期转换为包含时区的字符串，例如 ISO8601 格式。

一个警告：SimpleDateFormat java 类不是线程安全的。你最好还是使用

[http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html)

或者

[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/FastDateFormat.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/FastDateFormat.html)

然后您将简单地调用 print 和 parse 方法。

如果您使用某种数据绑定方法，请提及。

# c# - 动态 Getvalue 返回对象转换为 PropertyInfo.PropertyType

> ID：12897934
> 
> 赞同：3
> 
> 时间：2012-10-15T14:36:34.453
> 
> 标签：c#, .net, reflection, casting, propertyinfo

我的问题是：如何使

```
PropertyInfo.GetValue(object, null); 
```

返回值转换为 PropertyType，而不是返回对象。

我试过 Convert.ChangeType 但不是运气。

谢谢你。

**更新1：**

更多详情：

我的代码：

```
foreach (var propertyInfo in customerInfo.CustomerRelationship.GetType().GetProperties())
{
    var relationshipList = (IList)propertyInfo.GetValue(customerInfo.CustomerRelationship, null);
    foreach (var relationship in relationshipList)
    {
    }
} 
```

和

```
public struct CustomerInfo
{
    public Customer CustomerItem { get; set; }
    public Relationship CustomerRelationship { get; set; }
}

public class Relationship
{
    public List<Contact> ContactItems { get; set; }
    public List<Department> DepartmentItems { get; set; }
    ..........
} 
```

因为我不能动态转换每个我无法比较的关系项目显示，所以查询（Linq）使用数据库进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:41:19.407

你不能。

为简单起见，可以在其上编写通用包装器。

```
public static T GetValue<T>(Object obj1, Object obj2)
{
return (T)PropertyInfo.GetValue(obj1, obj2);
} 
```

# ajax - cakephp 1.2 中的 ajax 按钮

> ID：12897935
> 
> 赞同：0
> 
> 时间：2012-10-15T14:36:35.357
> 
> 标签：ajax, cakephp-1.2

我正在尝试做这样的事情：

一个带有 5 个按钮的 html 表单（每个按钮都有不同的值）。如果单击此按钮之一，将显示文本输入（默认值取决于单击的按钮值，因此按钮调用 ajax/javscript 函数以生成默认值）和提交按钮。

我无法创建这种类型的表单。对我有什么建议吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:40:55.373

我不会使用 CakePHP 的 AJAX 功能，只是自己编写。Cake 的功能在有限的情况下（例如分页）很有用，但是一旦您需要灵活性，它就会成为一个限制因素。我相信 JsHelper 实际上会在未来的版本中被删除。

要在不使用 Cake 的情况下完成此操作，请查看[http://jsfiddle.net/mjxWg/8/](http://jsfiddle.net/mjxWg/8/)。这不是一个完整的工作示例（例如，没有`<form>`标签），但它应该足以让您自己开始。

# joomla2.5 - Joomla 2.5 - 如何在灯箱中打开特定菜单项？

> ID：12897937
> 
> 赞同：0
> 
> 时间：2012-10-15T14:36:44.763
> 
> 标签：joomla2.5, lightbox, joomla-content-editor

我正在使用 Joomla 2.5 和安装并启用 Mediabox 插件的 JCE 编辑器开发一个站点。

我正在尝试在灯箱中打开 3 个菜单项。对于每个菜单项，我转到了**链接类型选项**，在**链接 CSS 样式**下，我添加了`jcepopup noicon`.

当我保存项目并刷新站点的前端（甚至清除我的缓存）时，`jcepopup`和`noicon`类不会应用于这三个菜单项中的任何一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:07:05.943

这是由于您正在使用的菜单模块。仅仅因为菜单项中存在参数并不意味着菜单模块使用它们。您可能需要为包含链接中的类的菜单模块创建一个模板覆盖。

# c# - Windows 窗体应用程序 - 文本突出显示

> ID：12897938
> 
> 赞同：2
> 
> 时间：2012-10-15T14:36:46.273
> 
> 标签：c#

我正在使用具有*ToolStripMenuItem*的 WFA，它应该在文本框中搜索单词并突出显示它。这是高亮代码。

first = 要突出显示的第一个索引，长度 = 要突出显示的字符数。

```
 textBox2.SelectionStart = first;
            textBox2.SelectionLength = length;
            //scroll to the caret
            textBox2.ScrollToCaret(); 
```

一切似乎都运行良好。但是，如果鼠标光标不在 textBox2 内（比如在另一个 textBox 中）。突出显示不起作用。无论鼠标光标的位置如何，有没有办法让它工作？换句话说，有没有办法更改我的代码以使其突出显示 textBox2 中的文本，即使在点击*ToolStripMenuItem*之前鼠标光标不在 textBox2 内？

PS值得一提的是我在VS 2010中使用的是c#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:46:04.220

尝试：

```
textBox2.Focus(); 
```

在运行突出显示文本的代码之前。这会将输入焦点（和您的光标）移动到文本框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:48:32.183

只需使用richtextbox 并更改文本的背景色。这样，您可以一次使用多个高亮，并且在用户通过鼠标单击聚焦文本框后，高亮不会丢失。此外，如果用户单击突出显示的区域，您可以保存所有位置并自动选择文本部分。

您也可以像 LarsTech 提到的那样显示选择，但是在用户在文本框内单击后，选择将丢失。

# search - 控制如何对弹性搜索字段进行标记以进行分面

> ID：12897939
> 
> 赞同：0
> 
> 时间：2012-10-15T14:36:47.243
> 
> 标签：search, lucene, elasticsearch

我是弹性搜索（和底层 Lucene 引擎）的新手。

我们正在存储一些关于文档的元数据，例如单个文档可能被描述为：

```
UniqueHash: ABC123
CreatedBy: John Smith
ApplicationName: MSExcel
ContentType: application/vnd.ms-excel
WordCount: 7000
... 
```

这一切对于索引/搜索都非常有效，但是当我们谈到分面时，事情变得有趣了。

面对（说）`CreatedBy`会返回

```
John: 1
Smith: 1 
```

或在 ContentType

```
application: 1
vnd.ms: 1
excel: 1 
```

这些都不是可取的。我无法直接控制字段的内容（也就是说，我无法更改底层数据）。我可以在途中执行转换，但这会导致存储不可靠的数据，以便搜索按预期工作，这感觉像是错误的方法。

如何说服 elasticsearch 将每个字段（或至少指定字段）的全部内容视为用于分面的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:41:23.950

[您可以使用多字段](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)类型索引您的字段两次。重新索引后，您将能够继续使用字段的分析版本进行搜索，并使用字段的“未触及”版本进行构面。

# sql - 使用 NHibernate 选择每第 n 行

> ID：12897943
> 
> 赞同：5
> 
> 时间：2012-10-15T14:37:04.763
> 
> 标签：sql, sql-server, nhibernate

您将如何使用 NHibernate QueryOver、HQL 或 Criteria 实现选择每第 n 行的查询？

目前我使用以下 T-SQL 查询：

```
SELECT * FROM (
    SELECT *, ROW_NUMBER() OVER (ORDER BY Id) AS [Row]
    FROM [TABLE_NAME]
) x WHERE (x.[Row] % 100) = 0 
```

（感谢[马克·格拉维尔](https://stackoverflow.com/questions/4208366/linq-to-sql-every-nth-row-from-table)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T05:46:50.417

您是否考虑过在交叉连接中使用索引表的解决方案？我的意思是，您有一个表，其中包含您认为需要的行数，每行中的整数索引列从 1-n 开始。这可以在主数据库中，可能旁边有一个日期列 - 这种方法的有用性令人惊讶。然后查询看起来像

```
SELECT * FROM (
    SELECT *, ROW_NUMBER() OVER (ORDER BY Id) AS [Row]
    FROM [TABLE_NAME]
) x INNER JOIN [Index_Table] i ON i.Id*100=x.[Row] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T16:27:14.560

与 L2S 相同 - 如果没有 SQL，就没有*简单*的方法可以做到这一点。无论如何，语法都是特定于 DBMS 的。

# perl - 在 Perl OpenSSH 模块中正确引用以解析 MySQL 命令

> ID：12897947
> 
> 赞同：0
> 
> 时间：2012-10-15T14:37:24.420
> 
> 标签：perl

我正在使用[Net::OpenSSH Perl](http://search.cpan.org/~salva/Net-OpenSSH-0.57/lib/Net/OpenSSH.pm)模块连接到 SSH 服务器并执行以下代码：

```
my @cmd = 'mysql -e "SET GLOBAL general_log_file = $log"';
$ssh->system(@cmd); 
```

这是正确的shell命令：

```
mysql -e "SET GLOBAL general_log_file = 'log_name'" 
```

我收到以下错误：

```
ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 
```

你看我的问题是如何正确解析变量。

你能帮我更正引用吗？我已经尝试了所有可能的变体。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:26:57.407

与答案 1 的建议不同，您应该使用列表，而不是标量，但它不应该是一个元素的数组。

```
my @cmd = (mysql => '-e',  "SET GLOBAL general_log_file = '$log'");
$ssh->system(@cmd); 
```

请参阅Net::OpenSSH 文档中的[Shell 引用](http://search.cpan.org/dist/Net-OpenSSH/lib/Net/OpenSSH.pm#Shell_quoting)。

请注意，这假定 $log 变量不包含任何对 SQL 具有特殊含义的字符，例如*'*

找到一种使用 DBI 连接到 Mysql 服务器的方法（可能使用 Net::OpenSSH 的 opentunnel）并使用带有占位符的准备好的语句来运行此命令会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T14:45:01.467

您的 cmd 应该是真正定义为标量，而不是列表。由于您要`$log`在字符串中替换，因此您应该用双引号打开并用单引号括起 mysql：

```
my $cmd = "mysql -e \"SET GLOBAL general_log_file = '$log'\"";
$ssh->system($cmd); 
```

# r - 将是/否格式的多列压缩为一个描述性列

> ID：12897954
> 
> 赞同：0
> 
> 时间：2012-10-15T14:37:41.767
> 
> 标签：r

这个问题困扰了我很长一段时间。我总是用 for 循环来解决它，但我认为现在是时候让我找到一种更快、更优雅的方法了。

例如，假设我有一个数据框，其中包含有关项目是红色还是蓝色的信息。信息以这种方式呈现：

```
item.df <- data.frame(Item=seq(1,5), Red=c("Y", "Y", "N", "N", "N"), Blue=c("N", "N", "Y", "Y", "N")) 
```

显然，这不是表示这些信息的最简洁的方式。我只想要一个包含“Red”、“Blue”或“Neither”的项目颜色列，而不是两个单独的 Red 和 Blue 列（或者 NA 也可以接受）。

显然，我可以通过创建一个空的 Item.Color 列然后通过循环遍历每一行来填充它来实现这一点。但我确信有一种更快的方法可以做到这一点。

当我还是一个真正的 R 新手时，我试图通过以下方式做到这一点：

```
item.df$Item.Color <- if(item.df$Red=="Y"){"Red"} 
```

但我很快了解到这不起作用，因为 if 语句只会读取 item.df$Red 中的第一个元素。

有没有办法使用 do.call() 或其中一个 apply() 函数来实现这一点？我已经尝试过了，但我永远无法让它完全按照我的意愿去做。提前感谢您提供的任何见解！

ps 我也很高兴听到任何关于这个问题的更好标题的建议。对我来说，这似乎总是提问中最难的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T14:50:12.683

下面的代码应该可以解决问题，它甚至会检查数据是否包含两者`Red`都`Blue`为 TRUE ( `== "Y"`) 的行。

```
item.df[["condensed"]] <- NA
item.df = within(item.df, {
  if(any(Red == "Y" & Blue == "Y")) stop("Blue and red cannot both be TRUE")
  condensed[Red == "Y"] <- "Red"
  condensed[Blue == "Y"] <- "Blue"
}) 
```

这里的诀窍是获取子集的相同语法可用于赋值：

```
# Getting a subset from a vector
A[B > 2]
# Or assigning NA to that subset 
A[B > 2] <- NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T16:19:16.787

我喜欢[@Paul 的](https://stackoverflow.com/users/1033808/paul-hiemstra) [回答](https://stackoverflow.com/a/12898190/1270695)，但您也可以通过将组合粘贴在一起并进行分解来轻松做到这一点。将标签分配给您的因子时，请记住默认情况下级别是字母顺序的（因此，`c("NN", "NY", "YN", "YY")`）：

```
item.df <- data.frame(Item=seq(1, 6), 
                      Red=c("Y", "Y", "N", "N", "N", "Y"), 
                      Blue=c("N", "N", "Y", "Y", "N", "Y"))

item.df$Item.Color <- factor(paste0(item.df$Red, item.df$Blue),
                             labels = c("Neither", "Blue", "Red", "Both"))
item.df
#   Item Red Blue Item.Color
# 1    1   Y    N        Red
# 2    2   Y    N        Red
# 3    3   N    Y       Blue
# 4    4   N    Y       Blue
# 5    5   N    N    Neither
# 6    6   Y    Y       Both 
```

# css - 具有高度的父 div：100% 不起作用

> ID：12897958
> 
> 赞同：5
> 
> 时间：2012-10-15T14:37:48.697
> 
> 标签：css, height

> **可能重复：**
> [CSS - 100% 高度不起作用](https://stackoverflow.com/questions/4789835/css-100-height-doesnt-work)

我有 3 个`div`，一个`div-1`是背景，一个`div-2`是`div-3`两个容器（一个用于文本，一个用于照片）。

```
#div-1 {
  width: 100%;
  height: 100%;
  padding: 40px 0;
  margin: 0;
}

#div-2 {
  width: 500px;
  margin: 0;
  float: left;
}

#div-3 {
  width: 200px;
  margin: 0;
  float: right;
}
```

```
<div id="div-1">
  <div id="div-2"></div>
  <div id="div-3"></div>
</div>
```

这就是我得到的：

![在此处输入图像描述](../Images/79c781d168b2594de02a81c4d4fdb35f.png)

为什么`height: 100%`不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:50:42.593

删除`height: 100%;`并`#div-1`添加`position: absolute;`. 它会工作得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T14:42:12.313

这可以工作

```
<div id="div-1">
    <div id="div-2"></div>
    <div id="div-3"></div>
    <div style="clear:both"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T14:40:48.873

在将浮动属性应用于元素后，您需要添加清晰的流程，更多信息请参见：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T14:42:47.210

#div-1 的高度是 100%，但 100% 没有，因为它依赖于我相信的父标签高度。尝试在 css 中将你的身体设置为 100% 的高度。

# iphone - iOS 模拟器——一步即可从视网膜 iPhone 切换到非视网膜 iPad

> ID：12897963
> 
> 赞同：1
> 
> 时间：2012-10-15T14:38:06.693
> 
> 标签：iphone, xcode, ipad, ios-simulator

我为 iPhone 和 iPad 编程。在做 iPhone 的事情时，我更喜欢视网膜 iPhone 模拟器。在做 iPad 的东西时，我更喜欢非视网膜模拟器。在它们之间进行交换对我来说是一个两步的过程。我必须将 xCode 从“iPhone 模拟器”目标切换到“iPad 模拟器”目标。问题是当我这样做时，模拟器会从视网膜 iPhone 切换到视网膜 iPad。因此，我还必须进入模拟器应用程序并将硬件更改为非视网膜 iPad。

有没有办法一步完成？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T22:17:25.430

是的！它超级容易。在 Xcode 4+ 中，在播放按钮旁边的顶部菜单栏中单击带有目标名称的下拉菜单。然后单击编辑方案。

单击运行操作，然后单击选项选项卡。当您在 Xcode 中单击播放按钮（构建和运行）时，您将看到您可以指定要使用的屏幕类型。

然后，当您在 Xcode 中切换设备目标时，它会自动将模拟器切换到正确的设备和屏幕类型。

![在此处输入图像描述](../Images/d047fecb4d88bf8d315b5db4444e401d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:40:01.557

此外，如果您运行的版本低于 iOS 5.1，模拟器将切换回非视网膜。将 SDK 设置为 5.1+

# c# - 我如何在 foreach 中传递 'var'

> ID：12897965
> 
> 赞同：-1
> 
> 时间：2012-10-15T14:38:10.453
> 
> 标签：c#, foreach, var

```
 class Writer
{
   public void Write( int i )
    {
    }
   public  void Write(IList l) 
    {
        foreach ( var i in l )
        {
            Console.WriteLine(i.GetType());
            //Write( i );//CS1502
        }
    }

}
class Program
{
    static void Main(string[] args)
    {
        int[] array1 = { 1, 2, 3 };
        Writer t = new Writer();
        t.Write( array1 );
    }
} 
```

打印var的类型是'System.Int32'和'System.String'。循环怎么了。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:39:30.203

`void Write(IList l)`我想你想改成`void Write(IList<int> l)`.

**编辑**

您还可以像这样添加泛型：

`void Write<T>(IList<T> l)`和`void Write<T>(T i)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T14:39:36.880

`void Write(IList l)`改为将签名更改为`void Write(IList<int> l)`。

它无法编译的原因是因为`IList`它不是通用的，因此列表中项目的类型是`object`但是没有`Write`接受`object`.

通过更改`Write`您的签名告诉编译器您列表中的项目实际上是`int`，因此它解析为正确的重载。

或者更改您的`void Write(int i)`方法以改为使用签名`void Write(object o)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:40:37.057

GetType 打印变量对象的类型。我假设您只想要价值？

```
Console.WriteLine(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T14:40:51.107

`var`不是动态**的**，底层类型是在编译时定义的。

阅读`dynamic`关键字，或者只使用`IEnumerable<int>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T15:13:17.040

你为什么不只使用foreach（l中的对象i）？var 在这个追逐中没有任何好处。如果你们都有一个具有一种类型的列表，请使用像“Daniel A. White”这样的泛型。

如果您想使用具有多种类型的列表，请保留我们的方法，但将 var 替换为 object，获取当前对象的类型并根据需要编写字符串。

# javascript - 我的 html 输入标签采用数组。我无法从 javascript 中检索它们

> ID：12897968
> 
> 赞同：-2
> 
> 时间：2012-10-15T14:38:22.190
> 
> 标签：javascript

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Order</title> 
```

下面根据选中的复选框计算总数，并给出一个确认框。显示总数。不管这个总数显示为 0。

```
 <script type="text/javascript">
         function validate()
           {
              var x,y,i,j,p=0;
        j=parseInt(document.getElementById('loopcount').value);
              document.write(j);
        for (i=1;i<=j;i++)
        {
            document.write(i);
               if(document.getElementsByName('itemCode['+i+']').checked==true){
                x=parseFloat( document.getElementsByName('quantity['+i+']').value);
                document.write(x);
                y=parseFloat( document.getElementsByName('price['+i+']').value);
                document.write(y);
        p+=x*y;
                }
        }

    var conf=confirm("The total amount is:"+ p);

              if(conf==true){
                  header("Location:userHome.php");
              }
              else{
                  header("Location:orderveggies.php");
              }

        }

    </script>
    </head> 
```

此代码将 mysql 中的数据显示为复选框。我的问题在于采用数组的输入标签的命名

```
 <body>
        <form name="myForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" onsubmit="validate()">
        <table align="center" border="0">
            <tr>

                <th>item Code</th>
                <th>Vegetable</th>
                <th>Price/KG</th>
                <th>Quantity</th>
            </tr>

             <?php

             $db=  mysqli_connect('localhost','root','','ourveggies')
                            or die("Error!Could not connect to the database");
                    $query="select itemCode,itemName,price from veggies";
                    $result=mysqli_query($db,$query)
                            or die("Error in query".mysqli_error($db));
                    $count=mysqli_num_rows($result);
                    while($row= mysqli_fetch_array($result)){?>
                        <tr>
                        <td><input type="checkbox" name="itemCode[]" value="<?php echo $row['itemCode']; ?>"/><?php echo $row['itemCode']; ?></td>
                        <td><?php echo $row['itemName']; ?></td>
                        <td><input type="hidden"  name="price[]" value="<?php echo $row['price']; ?>"/><?php echo $row['price']; ?></td>
                        <td><select name="quantity[]">
                                <option value="0.00">--Quantity--</option>
                                <option value="0.100">100 gm</option>
                                <option value="0.250">250 gm</option>
                                <option value="0.500">500 gm</option>
                                <option value="1">1 Kg</option>
                                <option value="2">2 Kg</option>
                                <option value="3">3 Kg</option>
                                <option value="4">4 Kg</option>
                                <option value="5">5 Kg</option>

                            </select></td>
                        </tr>

                  <?php  }?>
                    <input type="hidden" id="loopcount" name="loopcount" value="<?php echo $count; ?>"/>

            <tr>
                <td><input type="submit" name="order" value="order" /></td>
            </tr>
        </table>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:45:01.373

document.getElementsByName() 返回一个数组，而不是单个元素。试试这个：document.getElementsByName('itemCode[]')[i].checked。并以 0 开始你的循环！

```
for (i=0;i<j;i++)
{
    document.write(i);
    if(document.getElementsByName('itemCode[]')[i].checked==true){
        x=parseFloat( document.getElementsByName('quantity[]')[i].value);
        document.write(x);
        y=parseFloat( document.getElementsByName('price[]')[i].value);
        document.write(y);
        p+=x*y;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:56:03.343

My answer was getting a little long winded so here is one with more detail on your actual problems: I have put comments next to the lines of code that I think are causing your confusion.

```
 <script type="text/javascript">
     function validate()
       {
          var x,y,i,j,p=0;
          j=parseInt(document.getElementById('loopcount').value);
          document.write('j='+j);    // make your debugging messages more meaningful -S
    for (i=1;i<=j;i++)
    {
           document.write('i='+i);      // make your debugging messages more meaningful -S
           if(document.getElementsByName('itemCode['+i+']').checked==true)
           {
                //getElementsByName returns an array: replace them with getElementByName -S
                x=parseFloat( document.getElementByName('quantity['+i+']').value);
                document.write('x='+x);   // make your debugging messages more meaningful  
                y=parseFloat( document.getElementByName('price['+i+']').value);
                document.write('y='+y);   // make your debugging messages more meaningful
                p+=x*y;
            }
    }

var conf=confirm("The total amount is:"+ p);

          if(conf==true){
              header("Location:userHome.php");
          }
          else{
              header("Location:orderveggies.php");
          }

    }

</script>
</head> 
```

Then for your PHP:

```
blah blah blah
while($row= mysqli_fetch_array($result)){?>
    <tr>
    <td>
         <input 
           type="checkbox" 
           name="itemCode[<?php echo $row['itemCode']; ?>]"  //Do this. seriously otherwise everything will have the same name -S
           value="<?php echo $row['itemCode']; ?>"/>
         <?php echo $row['itemCode']; ?>
    </td>
    <td>
         <?php echo $row['itemName']; ?>
    </td>
    <td>
         <input 
              type="hidden"  
              name="price[<?php echo $row['itemCode']; ?>]"  //Im assuming here you want to know what price belongs to what item -S
             value="<?php echo $row['price']; ?>"/>
         <?php echo $row['price']; ?>
    </td>

    etc etc 
```

There are loads of bugs in your code. Please update your code to get rid of the problems I have pointed out, then we might be able to make some progress.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:44:44.247

```
name="itemCode[]" 
```

**这意味着 name="itemCode[]" 而不是 name="itemCode[anything at all]"**

尝试这个：

```
<td><input 
        type="checkbox" 
        name="itemCode[<?php echo $row['itemCode']; ?>]"
        etc etc
</td> 
```

getElementsByName 也返回一个数组

或者（使用 ids 而不是名称）：

```
<td><input 
        type="checkbox" 
        id="itemCode[<?php echo $row['itemCode']; ?>]"
        etc etc
</td> 
```

然后在javascript中：

```
document.getElementById('itemCode['+i+']') 
```

如果您仍然难以理解，请在浏览器中使用 firebug 或类似的东西来检查输出的 html。您一直在为所有输入提供相同的名称

# ios - iOS，“滑动查看下一张图片”和“点击隐藏用户界面”是默认功能吗？

> ID：12897969
> 
> 赞同：1
> 
> 时间：2012-10-15T14:38:29.270
> 
> 标签：ios, uiviewcontroller, uiscrollview, photo-gallery

我注意到很多允许您查看图像的应用程序有几个默认行为：

1.  您可以捏缩放、旋转和滑动以显示上一个和下一个图像
2.  您可以点击隐藏其余的 UI，并且 UI 是半透明的

由于这些行为在 Apple 和第三方（IE：Dropbox）应用程序上完全相同，我想知道它是否是 Apple 提供的某种默认控制器（例如用于拍照的 UIImagePicker）。

如果是，我该如何使用该控制器？如果否，关于如何实施它的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:43:57.037

不，据我所知，没有这样的默认控制器。你可以通过几行 Objective-C 和 cocoa-touch 来实现这样的行为。

首先使用[UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIGestureRecognizer)并将适当的识别器添加到您的 UIViewController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T17:33:06.207

不，尽管您会在很多应用程序中看到这一点，并且感觉一致，但它并不是开箱即用的东西。

滑动到下一个图像实际上是一个包含图像的滚动视图，当用户从左向右移动时，使用滚动视图委托“捕捉”到图像。

点击显示/隐藏 UI 也只是`UITapGestureRecognizer`设置动画显示/隐藏控件。

# php - TSQL：将 id 从 select 子句传递到存储过程

> ID：12897974
> 
> 赞同：0
> 
> 时间：2012-10-15T14:38:39.627
> 
> 标签：php, tsql, stored-procedures

我有一个名为 SELECT_DESCRIPTION 的过程，它接收一个 id 并返回一个我需要在页面中显示的描述字段。

现在我想创建一个新过程，其中有许多来自 select 子句的 id，如下所示：

```
SELECT id FROM MYTABLE 
```

可以将它传递给 SELECT_DESCRIPTION 过程，这样我就可以拥有相同数量的描述

如果我使用的是 php，我会做这样的事情：

```
$sql=”SELECT id FROM MYTABLE”;
$result = mysql_query($sql) //using mysql to make the example faster but TSQL is what I use
or die(mysql_error());  

while($row = mysql_fetch_array( $result )) {
    $newSql = "EXEC SELECT_DESCRIPTION @id = '$row[‘id’]'"; 
//do whatever with $newSql

} 
```

但我需要使用一个程序。有可能做到吗？我该怎么做？

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:59:52.157

所以你想在 TSQL 中完成所有这些工作？这样的事情会做到这一点：

```
DECLARE @tmp TABLE (tmpID INT IDENTITY, tblID INT)
DECLARE @RecordCount INT,
@LoopCount INT,
@ID INT

INSERT INTO @tmp SELECT id FROM MYTABLE
SELECT @RecordCount = COUNT(*) FROM @tmp
SET @LoopCount = 1

WHILE @LoopCount <= @RecordCount
  BEGIN

  SELECT @ID = tblID FROM @tmp WHERE tmpID = @LoopCount
  EXEC SELECT_DESCRIPTION @ID
  SELECT @LoopCount = @LoopCount + 1

  END 
```

@tmp 表有一个标识列，可确保您在其上运行循环的任何数据都具有连续的行号（1、2、3、4 等）。

# javascript - JQuery 文档准备就绪 - 不要等待 ActiveX 元素

> ID：12897978
> 
> 赞同：0
> 
> 时间：2012-10-15T14:38:56.040
> 
> 标签：javascript, jquery, activex, document-ready

我有一个包含 ActiveX 元素的页面。

加载后，会打开一个对话框以确认用户允许安装它，并且页面上有精美的进度条，它们在 document.ready 事件中初始化，该事件在 ActiveX 加载后触发。

有没有办法不等待形成 ActiveX 元素？

如果不使用 document.ready 事件，一些重要的脚本可能还没有加载，这可能会导致错误。

这种情况有什么解决办法吗？

请分享您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:24:32.173

解决方案 - 在 document.ready 事件之后加载 ActiveX。没有找到更好的。

# clearcase - 如何在 RTC 源代码管理中恢复已删除的组件

> ID：12897984
> 
> 赞同：4
> 
> 时间：2012-10-15T14:39:11.123
> 
> 标签：clearcase, rtc

是否可以恢复已删除的组件？

我已经创建了我的流的快照，并且可以通过查看快照来查看已删除的组件。是否可以将组件从快照重新添加到流中？还是有另一种恢复组件的方法？

（与 ClearCase 不同，我必须使用组件基线重新设置 UCM 流）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T15:01:21.377

如果删除意味着从磁盘中删除，则可以简单地将 repo 工作区重新加载到本地工作区（或沙箱）中。
注意：本地工作区或沙箱与 ClearCase 快照视图相同，但您不会将其称为“快照”。
在 RTC 中，快照是一个全局标签，其中包括流中所有组件的最新信息。

如果删除，您的意思是从存储库工作区中删除，是的，您可以将其添加回来（它仍在流中），然后单击保存。

如果删除，您的意思是从流本身中删除，您可以将其添加回流级别（打开该流，然后在“组件”部分中，单击“添加”）。
如果它仍在您的 repo 工作区中，您可以将其交付回流。

OP补充说：

> 我的意思是“从 Stream 本身中删除”，所以如果该组件也从我的 repo 工作区中删除，它不能从快照中恢复？

是的，它可以从快照中恢复：

> 我可以：
> 
> *   从快照创建一个新的工作区，
> *   将我的 flowtarget 更新为这个新创建的 repo 并从这里接受组件。
> *   然后将流目标更新为移除组件的流，然后
> *   deliver the component to stream.

I confirm this should work.
And you can indeed create a repo workspace from a snapshot: that is what enable a user to quickly debug a Build Record with a "failed build" status: each build first put a snapshot on the cond on which they will operate.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T09:19:29.007

If deleted from the Stream itself, you can add it back at the Stream level (Open that stream, and in the "Component" section, click on "Add" either from a baseline or snapshot, you can search for it if you remember the full or partial component name). Save the stream finally.

# c - 不使用 rand()/srand() C 函数的随机数生成器

> ID：12897992
> 
> 赞同：2
> 
> 时间：2012-10-15T14:39:35.933
> 
> 标签：c

我正在用 C 语言开发一些可供各种用户应用程序使用的库。

该库应该是完全“透明的”——用户应用程序可以对其进行初始化和完成，并且它不应该在运行的应用程序中看到任何变化。

问题是 - 我在库初始化中使用 C srand()/rand() 函数，这意味着库*确实*会影响用户的应用程序 - 如果用户生成随机数，他们将受到 rand()已经被调用了。

那么，谁能指出一些简单*的非 GPL*替代 C 中的 rand() 随机数生成器？

它不必非常强大 - 我没有对数字进行任何加密。我正在考虑编写一些小型且非常简单的生成器（例如花时间和 XOR 某些东西，并用一些素数和 bla bla bla 做一些事情），但我想知道是否有人有一个指向更体面的生成器的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T14:43:13.120

它通过保持一些状态并在每次调用函数时修改状态来生成下一个数字。这样的函数称为伪随机数生成器。创建 PRNG 的一种旧方法是线性同余生成器，这很简单：

```
static int rand_state;
int rand(void)
{
    rand_state = (rand_state * 1103515245 + 12345) & 0x7fffffff;
    return rand_state;
} 
```

如您所见，如果您知道前一个数字，则此方法允许您预测系列中的下一个数字。还有更复杂的方法。

已经为特定目的设计了各种类型的伪随机数发生器。有一些安全的 PRNG，虽然速度很慢，但即使你知道它们是如何工作的也很难预测，还有像 Mersenne Twister 这样的大型 PRNG，它们具有很好的分布特性，因此对于编写 Monte Carlo 模拟很有用。

根据经验，线性同余生成器足以编写游戏（怪物造成多少伤害），但不足以编写模拟。研究人员选择较差的 PRNG 用于他们的项目的历史是丰富多彩的。因此，他们的模拟结果令人怀疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:51:27.857

如果您也可以接受 C++，请查看 Boost。

[http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random/reference.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random/reference.html)

它不仅提供一个生成器，而且提供几十个生成器，并概述了速度、内存要求和随机性质量。

# string - Matlab：将单元格字符串（逗号分隔）转换为向量

> ID：12897996
> 
> 赞同：0
> 
> 时间：2012-10-15T14:40:03.670
> 
> 标签：string, matlab, vector, double, type-conversion

我有一个巨大的 csv 文件（如：不止几场演出），想在 Matlab 中读取它并处理每个文件。完整读取文件是不可能的，因此我使用此代码读取每一行：

```
fileName = 'input.txt';
inputfile = fopen(fileName);

while 1
    tline = fgetl(inputfile);
    if ~ischar(tline)
        break
    end
end
fclose(inputfile); 
```

这会产生一个大小为 (1,1) 的单元格数组，其中行作为字符串。我想要的是将此单元格转换为仅包含数字的普通数组。例如：

```
input.csv:
0.0,0.0,3.201,0.192
2.0,3.56,0.0,1.192
0.223,0.13,3.201,4.018 
```

第一行在 Matlab 中的最终结果：

```
A = [0.0,0.0,3.201,0.192] 
```

我尝试使用 double(tline) 转换 tline，但这会产生完全不同的结果。也尝试使用正则表达式，但卡在那里。我到了将所有值拆分到一个数组中的不同单元格中的地步。但是使用 str2double 转换为 double 只会产生 NaN ......

有小费吗？最好没有任何循环，因为读取整个文件已经需要一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T17:41:25.467

你正在寻找`str2num`

```
>> A = '0.0,0.0,3.201,0.192';
>> str2num(A)
ans =
     0  0  3.2010  0.1920
>> A = '0.0 0.0 3.201 0.192';
>> str2num(A)
ans =
     0  0  3.2010  0.1920
>> A = '0.0     0.0 ,    3.201 , 0.192';
>> str2num(A)
ans =
     0  0  3.2010  0.1920 
```

例如，输入格式是完全不可知的。

但是，对于您的用例，我不会建议这样做。对于你的问题，我会做

```
C = dlmread('input.txt',',', [1 1 1 inf]) % for first line
C = dlmread('input.txt',',')              % for entire file 
```

或者

```
[a,b,c,d] = textread('input.txt','%f,%f,%f,%f',1) % for first line
[a,b,c,d] = textread('input.txt','%f,%f,%f,%f')   % for entire file 
```

如果您想要单独变量中的所有列：

```
a = 0
b = 0
c = 3.201
d = 0.192 
```

或者

```
fid = fopen('input.txt','r');
C = textscan(fid, '%f %f %f %f', 1); % for first line only
C = textscan(fid, '%f %f %f %f', N); % for first N lines
C = textscan(fid, '%f %f %f %f', 1, 'headerlines', N-1); % for Nth line only
fclose(fid); 
```

所有这些都更容易扩展（像这样的东西，不管它们是什么，随着时间的推移会变得更大:)。特别`dlmread`是比编写自己的子句更不容易出错，因为空行、缺失值和其他在大多数数据集中非常常见的大麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T17:17:47.427

尝试

```
data = dlmread('input.txt',',') 
```

它会做你想做的事。

如果您仍想将字符串转换为向量：

```
line_data = sscanf(line,'%g,',inf) 
```

此代码将读取整个逗号分隔的字符串并转换每个数字。