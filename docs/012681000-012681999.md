# StackOverflow 问答 12681000-12681999

# javascript - 如何清空类似数组的对象，跨浏览器（IE8）？

> ID：12681003
> 
> 赞同：0
> 
> 时间：2012-10-01T21:00:39.267
> 
> 标签：javascript, internet-explorer-8, cross-browser, javascript-objects, array-splice

我有一个类似数组的对象。这意味着它具有数字属性 ( `0`, `1`, `2`...) 和一个`length`属性。

在它的原型中，我声明了一个清除它的方法，如下所示：

```
'clear': function() {
    Array.prototype.splice.call(this, 0, this.length);
    return this;
} 
```

这在大多数浏览器中都能正常工作，但在 Internet Explorer 中却不行。

取一个完全有效的类数组对象：

```
var arrayLike = {
    length: 3,
    '0': 'a',
    '1': 'b',
    '2': 'c'
}; 
```

并将其拼接清楚：

```
Array.prototype.splice.call(arrayLike, 0, arrayLike.length); 
```

在符合标准的浏览器上，这是正确的结果：

```
arrayLike.length ==     0    ;
arrayLike[0]     == undefined;
arrayLike[1]     == undefined;
arrayLike[2]     == undefined; 
```

但在 IE 8 中，你会得到：

```
arrayLike.length ==  0 ; // (!!)
arrayLike[0]     == 'a';
arrayLike[1]     == 'b';
arrayLike[2]     == 'c'; 
```

是的，它甚至都不管用，它可以随心所欲地工作。

现在，我认为这`Array.prototype.splice.call`是本机清除类数组对象的唯一方法。我可以有条件地将它填充到 IE8 的私有副本中，也许（对其他浏览器造成一次性性能影响，但只有一次）。

或者也许还有另一种清除对象的方法？那也是IE8原生的吗？有什么我没看到的吗？

Ps：[JsFiddle](http://jsfiddle.net/Camilo/sJkwz/)供你在 IE8 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:54:44.510

IE 搞砸了......似乎即使你扩展了一个数组对象，IE 也会搞砸拼接。请参阅下面的测试：

```
// create an object constructor
var arrayLike = function() {
    this.clear = function() {
        this.splice( 0, this.length );
    };
};
// use prototypical inheritance to inherit array functionality
arrayLike.prototype = [];
arrayLike.constructor = arrayLike;

// testing clear method fails...
var arrayLikeObject = new arrayLike();
arrayLikeObject.push( 'foo' );
console.log( arrayLikeObject[ 0 ] ); // outputs foo
arrayLikeObject.clear();
console.log( arrayLikeObject[ 0 ] ); // outputs foo

// yet the same method works on a normal array
var test = [];
test.push( 'foo2' );
test.splice( 0, test.length );
console.log( test[0] ); // outputs undefined 
```

IE是什么鬼...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:23:14.263

~~我的直觉是你不应该`Array.prototype.splice.call`在一个不是`Array`. 对我来说，这似乎很骇人听闻。~~

~~是的，它可能适用于大多数浏览器，但您正试图在不属于该原型的对象上执行为一个原型设计的操作。我不是 IE 的粉丝，但这在我看来就像骇客，所以当它不起作用时你不能大喊大叫。~~

我的 2¢ 是`Array`使用原型创建新的“-like”对象`Array`，例如：

```
var ArrayLike = function(){
    this.push.apply(this, arguments);
};
ArrayLike.prototype = Array.prototype;
ArrayLike.constructor = function(){};
ArrayLike.prototype.clear = function(){
    // Array.prototype.splice.call(this, 0, this.length);
    this.splice(0, this.length); // all of Array's methods are available to ArrayLike
    return this;
}

var arrayLike = new ArrayLike('a', 'b', 'c');
console.log(arrayLike.length);  // 3
arrayLike.clear();              // clear
console.log(arrayLike.length);  // 0 
```

...或编写自己的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T20:07:10.667

伙计，这很有趣。在 IE8中以一种***非常奇怪的方式***`Array.prototype.splice`被破坏。

 *我必须向你展示这个（如果你愿意，可以跳过它，下面的解决方案）。

如您所见，这会在 IE 中提醒“a”，对吗？

```
// Create an array-like object.
var arrayLike = {
    length: 1,
    '0': 'a'
};

// Clean it with splice. This should work in ES5.
Array.prototype.splice.call(arrayLike, 0, 2);

// Note that IE does set the length to zero. We need to check an item.
alert(arrayLike[0]); 
```

[jsfiddle](http://jsfiddle.net/Camilo/mmKbR/)。

现在，如果我们将其设置为无效长度怎么办？特别是对于这种效果，“3”（“2”将在 IE8 中产生相同的结果）。

现在，IE8中的*这个警报是什么？*

```
var arrayLike = {
    length: 3,      // <--
    '0': 'a'
};

Array.prototype.splice.call(arrayLike, 0, 2);

alert(arrayLike[0]); 
```

[jsfiddle](http://jsfiddle.net/Camilo/3U8SQ/)。

无论如何，我不会依赖那种奇怪的工作方式，我不想在生产中出现一个可怕的奇怪错误。**这是你修复它的方法：**

首先，您的代码包含在 IIFE 中，对吗？你应该。其次，检查您是否拥有`Array.prototype.splice`. 我在我的 IIFE 开始时声明了这些事情。

```
// Call it whatever you want.
var protoSplice = Array.prototype.splice; 
```

然后，在一些初始化方法上（或者在你想要的任何时候，确保它在你使用它之前），调用一个 polyfill 方法。

```
polyfill(); 
```

调用测试和修复。

```
function polyfill() {
    // ...
    genericSpliceWorks() || fixGenericSplice();
    // ...
} 
```

以下是它使用的方法：

```
function genericSpliceWorks() {

    // Create an array-like object.
    var arrayLike = {
    length: 1,
    '0': true
    };

    // Clean it with splice. This should work in ES5.
    protoSplice.call(arrayLike, 0, 2);

    // Note that IE does set the length to 0\. We need to check an item.
    return !arrayLike[0];

}

function fixGenericSplice() {

    // Re-set our local protoSplice variable to something that works.
    // Note: this implementation only works with the first two arguments
    // of splice. This means that it does not add extra elements to the
    // array. It's as much as I need.
    protoSplice = function(index, count) {

        // If count is more than zero, run until it's zero, decrementing
        // each time.
        while (count--) {

            // Remove an array item from index, while incrementing index
            // for the next time.
            delete this[index++];

            // Decrement the length.
            this.length--;

        }

    };

} 
```

达达！它现在可以工作了:)*

# mysql - 将 GROUP BY 添加到 django 查询

> ID：12681018
> 
> 赞同：1
> 
> 时间：2012-10-01T21:02:23.370
> 
> 标签：mysql, sql, django, django-models

我有以下查询：

```
titles = Title.objects.all() 
```

在某些情况下，我需要获取`DISTINCT ('title')`此查询。Django 不允许`distinct('title')`使用 MySQL 后端。

本质上，我想做的是：

```
titles = titles.extra('GROUP BY title') 
```

我将如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:26:11.587

您是否尝试过使用该`.distinct()`方法？

```
titles = Title.objects.values('title','other_columns_you_care_about_and_not_distinct').distinct() 
```

如果您在 a`.distinct()`上执行操作，`.all()`您将返回与开始时一样多的行，当然前提是您的 id 列是唯一的。因此，您只需在`.values()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:23:01.103

你需要做`[annotate][1]`的分组

```
titles = titles.annotate(Count("title")).order_by() 
```

# node.js - 节点检查器窗口为空白

> ID：12681020
> 
> 赞同：6
> 
> 时间：2012-10-01T21:02:33.953
> 
> 标签：node.js, node-inspector

通过 npm install -g nodeinspector 安装节点检查器。

我可以进入仪表板，但它在搜索栏之外只是空白。

我已经尝试以各种顺序启动应用程序/检查器/浏览器，并重新安装了几次节点检查器。有人建议手动安装连接和异步模块，我做了，但无济于事。

有什么帮助吗？

![在此处输入图像描述](../Images/9ed942ebf3f1456f5fb924c95b64fbf9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:40:21.227

使用以下命令安装它：

```
npm install -g node-inspector 
```

在不同的命令提示符下发出命令：

```
node-inspector & 
```

运行您的程序/应用程序：

```
node --debug-brk your/short/node/script.js 
```

连接到`http://127.0.0.1:<PORT>/debug?port=5858`您就可以开始了！

仅在基于 WebKit 的浏览器中浏览：Chrome、Safari 以获得调试选项。

您可以参考：http: [//github.com/dannycoates/node-inspector/blob/master/readme.md](http://github.com/dannycoates/node-inspector/blob/master/readme.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:32:57.190

当我用 address 输入 firefox(10.0.11) 时，我也遇到了空白页`http://127.0.0.1:8080/debug?port=5858`。
但是在我更改为 Chrome（版本 23.0.1271.97）后，node-inspector 工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T16:59:56.037

这通常发生在您有阻止检查器和 chrome 实例之间通信的添加阻止程序、防病毒或类似程序时。

对我来说，问题是一个下载管理器程序，它应该从浏览器接管下载，一旦我杀死它，检查员工作正常

# javascript - 在 html4 问题中创建音频标签

> ID：12681026
> 
> 赞同：1
> 
> 时间：2012-10-01T21:02:51.253
> 
> 标签：javascript, jquery

我正在尝试在 html4 中创建音频标签。

我有

```
var audioPlayer=document.createElement('audio');
var audioSource=document.createElement('source');

    audioSource.src=audioFileName;
    audioSource.type="type='audio/mp3'";
    audioPlayer.appendChild(audioSource);

    audioPlayer.width=320;
    audioPlayer.className='text_audio';
    audioPlayer.id='audio_id';
    audioPlayer.style.margin=0;
    audioPlayer.controls='controls';
    $('div').append(audioPlayer); 
```

我可以看到控制栏，但无法播放我的 mp3 文件。无论如何在 Html4 中可以做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:07:13.670

更正`type`属性 - 它应该只是`audioSource.type = 'audio/mp3';`

请注意，Firefox 不支持 MP3，因此如果您使用该浏览器，这就是它不起作用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:06:31.237

我可以问你为什么不直接使用 HTML5`<audio>`标签？它是为此目的而设计的，如果您需要支持较旧的浏览器（我认为是 IE8- ），那么您总是可以提供备用。

编辑：顺便说一句，为了能够在所有受支持的浏览器中播放音频，您应该同时提供 MP3 和 OGG 音频文件。[在这里查看更多信息。](http://www.w3schools.com/html/html5_audio.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:06:10.960

`audio`不是有效的 HTML 4.0 标记。您必须使用嵌入，例如：

```
<embed src="myfile.mp3"> 
```

或者，您将不得不使用 Flash（嘘！，嘶嘶声！，使用 html5！）

# objective-c - 在 NSStrings 数组中搜索完整的短语或单词

> ID：12681027
> 
> 赞同：2
> 
> 时间：2012-10-01T21:02:52.343
> 
> 标签：objective-c, search, match, nspredicate

我正在尝试找到在数组中搜索整个短语或单词的方法。但它不起作用。例如。：

我有一个`NSMutableArray`带有 2 个元素的元素：
元素 1 有一个键 desc：“此元素的另一个元素的示例”
元素 2 有一个键 desc：“另一个元素的另一个元素的示例”

我只想搜索包含“其他”一词的元素。

如果我使用：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"desc like '*other*'"]; 
```

结果包括这两个元素。

如果我搜索“* other *”，我会错过以“other”开头的描述（因为 blanc）。

有没有人知道搜索确切单词或短语的功能，尽管它位于文本的开头、结尾、中间，尽管有一个“。” 或“，”或“'”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:02:39.387

你需要的是一个完整的正则表达式匹配，`matches`提供这个。尝试（未经测试）：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"desc matches '\\bother\\b'"]; 
```

re`\b`匹配单词边界（上面的双反斜杠，因为它是 Objective-C 和正则表达式中的转义字符......）。[有关匹配项](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html#//apple_ref/doc/uid/TP40001795-SW1)，请参阅Apple 文档并点击 ICU 正则表达式指南的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:36:52.613

我认为这种常规模式匹配会起作用：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"desc matches %@", @".*\\bother\\b.*"]; 
```

# php - 魔术函数导致错误

> ID：12681028
> 
> 赞同：1
> 
> 时间：2012-10-01T21:03:05.823
> 
> 标签：php, magic-methods

我已经实现了魔术功能`__get()`并且`__set()`：

```
function __get($property) {
        if(isset($this->$property)) {
            return $this->$property;
        } else {
            return null;
        }
    }

    function __set($property, $value) {
        $this->$property = $value;
    } 
```

以下代码工作正常：

```
$connect->Hammer = "DoubleClawed";
echo $connect->Hammer; 
```

但是，当我运行一些单元测试时，该行：

```
$this->Id = (int) $configXML->ConfigurationFindResults->Configuration->Id; 
```

给我：

> 试图获取非对象的属性

在此之前还有其他神奇设置的变量。我还使用非魔法方法测试了这段代码，它可以工作。为什么这条线会触发它？（`$configXML`是一个 SimpleXML 对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:06:48.450

`__get`你的 魔法`__set`在我看来很好。（我在我的应用程序中使用相同的代码）。

你的错误来自形式 `$configXML->ConfigurationFindResults->Configuration->Id;`

# playorm - 如何正确创建 NoSqlEntityManagerFactory？

> ID：12681032
> 
> 赞同：0
> 
> 时间：2012-10-01T21:03:18.140
> 
> 标签：playorm

我想在 Bootstrap 类中使用 NoSqlEntityManagerFactory create(Map properties) 方法来创建 NoSqlEntityManagerFactory。但是，我不确定我是否使用了正确的属性：

```
#nosql.nosqltype=inmemory
nosql.nosqltype=cassandra
nosql.autoCreateKey=create
nosql.cassandra.clusterName=Test cluster
nosql.cassandra.keyspace=dmp_input
nosql.cassandra.seeds=127.0.0.1:9160 
```

我应该向 nosql.cassandra.builder 传递一些东西吗？这似乎是由该方法创建的，在创建 astyanax 配置构建器之后......另外，如果我通过 nosql.autoCreateKey=create，它会在 Cassandra 上创建我的映射实体吗？如果我不想要这种行为，我应该使用 nosql.autoCreateKey=none 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:07:21.940

是的，这些是要使用的正确属性。如果你想传入你自己的预配置 astyanax，你只需要传递一些东西给 nosql.cassandra.builder。Astyanax 是高度可配置的，因此与其尝试为所有选项编程，PlayOrm 允许传入一些属性并由我们创建，或者您可以使用其他创建方法传入您自己的属性。

# c - 在 C 中使用 strtok 解析输入

> ID：12681034
> 
> 赞同：1
> 
> 时间：2012-10-01T21:03:26.553
> 
> 标签：c, parsing, strtok, execvp

我有一个项目需要我在 C 中构建一个简单的 shell。我是 C 的新手，我现在面临的问题是在发送命令执行之前正确解析命令。我知道有几种不同的方法可以做到这一点，但我们需要使用 strtok ，我似乎遇到了一些问题。

这是我的全部代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/types.h>

int parseCommands(char *command, char **args){
    int pos = 0;
    printf("%s\n", command);
    char *readCommand = NULL;
    char delims[] = {" \n"};
    readCommand = strtok(command, delims);
    while(readCommand != '\0'){
        printf("%s\n", readCommand); 
        strcpy(args[pos], readCommand);
        printf("%s\n", args[pos]);
        readCommand = strtok(NULL, delims);
        pos++;
    }
    return pos;
}

int executeCommand(char **args){
    pid_t pID;
    switch(pID = fork()){
        case 0:
            execvp(args[0], args);
            perror("Some sort of exec error");
            return -1;
        case -1:
            perror("Could not even fork");
            return -2;
        default:
            wait(NULL);
            return 0;
    }
}

void main(){

    char wd[256];
    char input[256];
    char *args[15];

    char strDelims[] = ";";
    char *readInput = NULL;

    while(1){

        getcwd(wd, sizeof wd);
        printf("mysh: %s> ", wd);
        fgets(input, sizeof input, stdin);

        readInput = strtok(input, strDelims);

        int numArgs;
        numArgs = parseCommands(readInput, args);
            if(numArgs < 1)
                printf("There was a problem parsing the command\n");

            if(strcmp(args[0], "cd") == 0){
                printf("%d\n", numArgs);
                if(numArgs > 1){
                    if((chdir(args[1])) < 0){
                        perror("I'm afraid I can't let you do that Dave\n");
                    }
                }
                else{
                    if((chdir(getenv("HOME"))) < 0){
                        perror("Can't go home\n");
                    }
                }
            }
            else if(strcmp(readInput, "quit") == 0){
                break;
            }
            else{
                if((executeCommand(args)) != 0)
                    printf("Problem executing the command\n");
            }
            readInput = strtok(input, strDelims);
    }

} 
```

这是几个命令的输出：

```
mysh: /path/to/stuff> cd
cd

cd
cd
1
mysh: /path/to/home> cd /bin
cd /bin

cd
cd
/bin
/bin
2
mysh: /bin> ls
ls

ls
ls
Segmentation fault
mysh: /path/to/stuff> ps aux
ps aux

ps
ps
aux
aux
Segmentation fault 
```

我只是觉得奇怪的是，它`cd`似乎工作得很好，但它并不真正喜欢其他任何东西。这让我认为稍后会出现问题（但在 numArgs 的 printf 之前？）。仅供参考，我们被告知每个命令不会超过 15 个参数或 256 个字符。

这让我沮丧了一段时间，所以对这个特定问题的任何帮助都会很棒（我意识到那里还有其他错误或糟糕的代码部分，但我想自己找出/修复这些）。非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:11:35.430

一些指示

通常 strtok 共享一个静态缓冲区，因此当您在 parse 函数之前先调用 strtok ，然后在 parse 函数内部调用时，您可能会弄乱之前缓冲区中的内容。

您也没有为 args[] 分配空间，您只声明一个指针数组，`(char *args[15])` 然后在您的解析函数中，您对指针指向的任何内容执行 strcpy。您需要分配一个缓冲区，分配给 args[i] 然后将字符串复制到其中。

所以而不是

```
strcpy(args[pos], readCommand); 
```

做

```
args[pos] = strdup(readCommand); 
```

# c# - 捕获堆栈溢出异常 C#

> ID：12681035
> 
> 赞同：0
> 
> 时间：2012-10-01T21:03:29.490
> 
> 标签：c#, .net, exception, .net-2.0, stack-overflow

> **可能重复：**
> [如何防止和/或处理 StackOverflowException？(C#)](https://stackoverflow.com/questions/206820/how-do-i-prevent-and-or-handle-a-stackoverflowexception-c)
> [C# 捕获堆栈溢出异常](https://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)

我有一个用 C# 编写的相当复杂的应用程序（使用 .NET 2.0）。该程序以高度递归的方式处理大量文件，并且在某些客户端它会遇到堆栈溢出异常。该程序非常复杂，我们甚至无法重现问题——甚至在发生问题的客户那里也无法重现。

显而易见的解决方案是修复导致堆栈溢出的代码，但这似乎不太可能——我们的代码库有超过 200 万行代码，它们在内存中创建了一个大型递归数据结构。我们不太可能只是偶然发现问题部分。（无论如何，短期内不会。）

但是，我们的程序也会备份文件并对正在处理的文件进行更改，如果出现异常，它会将所有内容恢复到原始状态。当发生堆栈溢出异常时，进程将终止，并且此恢复功能没有机会运行，因为无法捕获堆栈溢出。

所以我的问题是：有没有办法在 .NET 2.0 中捕获堆栈溢出异常。我无法托管 CLR，异常是真正的堆栈溢出，而不是由我们的代码引发。能够做到这一点至少让我能够恢复程序终止之前所做的更改。

**编辑：**请注意，我很清楚堆栈溢出异常是什么以及它有多严重。我不是在寻找寻找建议的建议——这种情况很少发生。我要做的是在发生这种情况*时在*磁盘空间有限的环境中恢复客户端数据。如果我的程序在恢复操作后死机，我可以接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:23:54.460

我不建议这样做，但您可以使用[/F Compiler Switch](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.100%29.aspx)在编译磁贴处设置堆栈大小。默认值为 1MB。虽然这不是“修复”代码的好方法，但它会阻止那些讨厌的`Stack Overflow`消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:05:59.613

听起来你在说，我有一个修改文件的进程，如果发生错误，它应该恢复文件，但它没有这样做。

如果相同，为什么不使用临时文件，如果操作完成，用临时文件覆盖源文件。如果发生任何未捕获的异常，则您有未触及（写入方式）的原始文件。

# python - 在 jinja2 中是否有直接格式化数字的方法？

> ID：12681036
> 
> 赞同：51
> 
> 时间：2012-10-01T21:03:32.197
> 
> 标签：python, google-app-engine, jinja2

我需要在 jinja2 中格式化十进制数字。

当我需要格式化日期时，我在模板中调用 strftime() 方法，如下所示：

```
{{ somedate.strftime('%Y-%m-%d') }} 
```

我想知道是否有类似的方法可以对数字执行此操作。

提前致谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-01T21:12:32.013

你可以像这样简单地做到这一点，Python方式：

```
{{ '%04d' % 42 }}

{{ 'Number: %d' % variable }} 
```

或使用该方法：

```
{{ '%d' | format(42) }} 
```

我个人更喜欢第一个，因为它和 Python 完全一样。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-05-04T01:47:53.667

我想强调 Joran Beasley 的评论，因为我发现它是最好的解决方案：

原评论：

> 你能不做 {{ "{0:0.2f}".format(my_num) }} 或 {{ my_num|format "%0.2f" }} (wsgiarea.pocoo.org/jinja/docs/filters.html#format ) – Joran Beasley 2012 年 10 月 1 日 21:07`

确实，`{{ '{0:0.2f}'.format(100) }}`效果非常好。

这只是python字符串格式。给定第一个参数 ，`{0}`使用以下格式对其进行格式化`0.2f`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-01T21:17:21.247

您可以使用 round 它将让您将数字四舍五入到给定的精度用法是：

```
 round(value, precision=0, method='common') 
```

第一个参数指定精度（默认为 0），第二个参数指定舍入方法，您可以从中选择 3：

```
'common' rounds either up or down
'ceil' always rounds up
'floor' always rounds down 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-28T02:12:01.117

格式化和填充以相同的方式工作得很好。

```
{{ "{0}".format(size).rjust(15) }} 
```

# jquery - 用于表单元素的 JQuery Carousel

> ID：12681043
> 
> 赞同：3
> 
> 时间：2012-10-01T21:03:59.390
> 
> 标签：jquery

我正在寻找一个可以处理表单元素的 jQuery 轮播样式插件。

这是我需要做的。

我有三个表单元素：两个常规文本框和一个 textarea。还有两个按钮，上一个和下一个。

单击下一个按钮时，文本框/文本区域会切换其内容。

我意识到我可以通过 Ajax 做到这一点，但我正在寻找一个插件解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:46:42.617

这是我从我的 html 5 项目转换为 html 4 的轮播插件示例。
[http://jsfiddle.net/bcnobel/pYUJN/](http://jsfiddle.net/bcnobel/pYUJN/)

该代码不包含响应按钮单击的部分，但它响应鼠标位置。但是，在其中添加应该不是问题，因为您需要做的就是更改按钮单击时的旋转速度。

如果您对此有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:10:20.243

您可以为此使用任何类型的轮播。单击轮播的箭头时，您基本上只需要绑定一个功能。

例如，下一个按钮的选择器是 id="next-button" 和 textareas 是 id="my-textarea"

```
$('#next-button').click(function(){

    $('#my-textarea').text('The new texts inside the textarea');

}); 
```

# jquery-ui - 如何为嵌套的 ul li 标签实现 jquery 手风琴......？

> ID：12681044
> 
> 赞同：4
> 
> 时间：2012-10-01T21:03:58.850
> 
> 标签：jquery-ui

我正在尝试为我的嵌套`<ul>` `<li>`标签显示一个 jQuery 手风琴......

我发现这个网站显示手风琴：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

但不幸的是，它使用`<h3>`标签作为标题。

在我的实际代码中，我只有`<ul>`和`<li>`标签，我试过了，但我无法理解要编写什么函数来获得它。

我的代码风格类似于：

```
<ul>
  <li>Coffee</li>
  <li>Tea
    <ul>
    <li>Black tea</li>
    <li>Green tea
      <ul>
      <li>China</li>
      <li>Africa</li>
      </ul>
    </li>
    </ul>
  </li>
  <li>Milk</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:28:57.237

据我所知，您必须像示例中那样构建文档。
jQuery 正在搜索带有锚点的标题，然后是 div 块，依此类推......

例子：

```
<div id="accordion">
    <h3><a href="#">First header</a></h3>
    <div>First content</div>
    <h3><a href="#">Second header</a></h3>
    <div>Second content</div>
</div> 
```

所以，你必须使用 jQuery 的标记，否则 jQuery 将无法识别你的内容。
您列表的另一个问题``<ul>``是，jQuery 不知道哪一部分是标题，哪一部分是内容。

此时，您有几个选择：

*   可以在 jQuery 中找到对应的代码行进行编辑（不推荐）
*   您可以编写自己的手风琴（基于原版）
*   （如果你真的想要你的列表）你可以在运行时用相应的“jQuery标签”``<ul>``交换``<ul>``和标签``<li>``
*   使用 jQuery 的标记（推荐）

此致

# c# - 这是对 WCF 服务应用程序的有效使用吗

> ID：12681045
> 
> 赞同：2
> 
> 时间：2012-10-01T21:04:09.880
> 
> 标签：c#, visual-studio-2010, wcf

我有以下情况：

*   方框 X 上的程序 P（最多可能需要 30 分钟才能完成）。
*   框 Y 上的 WinForms 应用程序 - 这会收集 P 的输入标准。
*   因为 P 需要很长时间，我希望它始终在框 X 而不是 Y 上运行。

有人建议我尝试在 X 上使用 WCF 服务应用程序。通过服务合同从 Y 向 X 发送消息，然后这将触发程序 P。

这是对 WCF 服务应用程序项目的有效使用吗？

* * *

我遵循了这两个演练：

1.  [创建 WCF 服务](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-create-wcf-web-service-in.html)
2.  [创建控制台应用以使用 WCF 服务](http://a1ashiish-csharp.blogspot.com/2012/01/cnet-how-to-consume-wcf-web-service-in.html)

我现在有两个似乎可以互相交谈的项目。我可以从控制台应用程序运行以下代码，`moveData`WCF 项目中的方法成功地使用基于参数的一些信息更新数据库：

```
 static void Main(string[] args) {
                Service1Client sc = new Service1Client();
                sc.moveData(0,1);
                sc.Close();
        } 
```

**我对这种技术很陌生-请记住。以下问题：**
它仅在我在 Visual Studio 中打开或运行 WCF 项目时才有效 - 这是否符合预期？换句话说，如果 WCF 没有运行，消费应用程序是否应该抛出错误？
即，如果我使用 WCF 项目关闭 Vis Studio 的实例，然后尝试运行正在使用的应用程序，我会收到错误`System.ServiceModel.EndpointNotFoundException was unhandled There was no endpoint listening at...followed by address of service` 消息 如何让框 X 使用此 WCF？需要在那个盒子上安装或部署什么？

消费者控制台应用程序中的 app.config 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService1" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://....svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="IService1"
                name="BasicHttpBinding_IService1" />
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:27:52.287

根据其他建议，Windows 服务易于构建和设置。您甚至可以将其设置为在服务器（BOX X）启动时自动启动

这是[MSDN 文章](http://msdn.microsoft.com/en-US/library/76477d2t%28v=vs.80%29.aspx)和[代码项目教程](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)，可帮助您入门。

本质上：

```
public class UserService1 : System.ServiceProcess.ServiceBase  
{

    public UserService1() 
    {
        this.ServiceName = "MyService2";
        this.CanStop = true;
        this.CanPauseAndContinue = true;
        this.AutoLog = true;
    }
    public static void Main()
    {
        System.ServiceProcess.ServiceBase.Run(new UserService1());
    }
    protected override void OnStart(string[] args)
    {
        // Insert code here to define processing.
    }
    protected override void OnStop()
    { 
        // Whatever is required to stop processing
    }
} 
```

**编辑**

然后，您可以将您处理的数据保存在数据库或文件系统或任何地方，并通过 WCF 服务公开数据，然后您的客户端（控制台应用程序）可以使用该服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:28:43.550

查看此代码以获取有关如何使用 WCF 创建此代码的示例以及指向 SRC 代码的链接

```
<system.serviceModel>
 <services>
   <service behaviorConfiguration="returnFaults" name="TestService.Service">
      <endpoint binding="wsHttpBinding" bindingConfiguration=
            "TransportSecurity" contract="TestService.IService"/>
      <endpoint address="mex" binding="mexHttpsBinding" 
            name="MetadataBinding" contract="IMetadataExchange"/>
  </service>
 </services>
 <behaviors>
   <serviceBehaviors>
    <behavior name="returnFaults">
     <serviceDebug includeExceptionDetailInFaults="true"/>
       <serviceMetadata httpsGetEnabled="true"/>
       <serviceTimeouts/>
   </behavior>
  </serviceBehaviors>
 </behaviors>
 <bindings>
    <wsHttpBinding>
       <binding name="TransportSecurity">
             <security mode="Transport">
              <transport clientCredentialType="None"/>
              </security>
        </binding>
      </wsHttpBinding>
 </bindings>
 <diagnostics>
  <messageLogging logEntireMessage="true" 
    maxMessagesToLog="300" logMessagesAtServiceLevel="true" 
    logMalformedMessages="true" logMessagesAtTransportLevel="true"/>
  </diagnostics>
 </system.serviceModel>

//Contract Description
[ServiceContract]
interface IService
{
  [OperationContract]
   string TestCall();
}

//Implementation
public class Service:IService
{
  public string TestCall()
  {
      return "You just called a WCF webservice On SSL
                    (Transport Layer Security)";
  }
}

//Tracing and message logging
<system.diagnostics>
  <sources>
      <source name="System.ServiceModel" 
    switchValue="Information,ActivityTracing" propagateActivity="true">
         <listeners>
           <add name="xml"/>
        </listeners>
      </source>
        <source name="System.ServiceModel.MessageLogging">
        <listeners>
            <add name="xml"/>
         </listeners>
         </source>
    </sources>
        <sharedListeners>
          <add initializeData="C:\Service.svclog" 
        type="System.Diagnostics.XmlWriterTraceListener" name="xml"/>
         </sharedListeners>
       <trace autoflush="true"/>
</system.diagnostics> 
```

您可以下载此示例的源代码以自行尝试..按照相同的步骤使您的服务正常工作 这通过 [使用 wsHttpBinding 和 SSL 的 WCF 传输层安全性的方式使用 SSL](http://www.codeproject.com/Articles/18645/WCF-Transport-Layer-Security-using-wsHttpBinding-a#xx2242292xx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:07:54.393

我可能会创建一个 Windows 服务来监视数据库以获取处理内容的消息。然后，该服务可以始终在您的服务器上运行（我假设是框 X）。WCF 服务可以启动一个长时间运行的进程，但可能不应该托管它。当然，我假设由 Asp.Net 托管的 WCF 服务。您也可以构建一个托管 WCF 的 Windows 服务，这将消除该服务监视消息数据库的需要。

# mysql - ODBC 连接错误：星号*CLI 中没有这样的命令“odbc show”ODBC 连接失败

> ID：12681048
> 
> 赞同：2
> 
> 时间：2012-10-01T21:04:21.997
> 
> 标签：mysql, linux, odbc, voip, asterisk

问题：我正在使用在 VirtualBox 中运行星号 2.0 服务器的 AsteriskNow。我想使用 ODBC 模块将 Asterisk 与 MySQL 数据库连接起来。但它失败了。当我开始使用星号*CLI> odbc show 命令提示符显示“没有这样的命令 ODBC SHOW”

我的目标：在 asterisk 中配置 ODBC 以直接动态地从 Asterisk 的拨号方案访问 MySQL。

我做了什么：我在 VirtualBox 中安装了我的 AsteriskNow。asterisk 的版本是 2.0，CentOS 的版本是 5.8 final。我首先通过以下方式安装了相关的 Linux RPM

```
yum -y install unixODBC-devel
yum -y install libdbi-dbd-mysql
yum -y install mysql-connector-odbc 
```

我的详细配置文件如下：

/etc/odbc.ini

```
[asterisk-connector]
Description           = MySQL connection to 'asterisk' database
Driver                = MySQL
Database              = asterisk
Server                = localhost
UserName              = root        
Password              = mypassword
Port                  = 3306
Socket                = /var/lib/mysql/mysql.sock 
```

/etc/odbcinst.ini

```
# Driver from the mysql-connector-odbc package
# Setup from the unixODBC-libs package
[MySQL]
Description = ODBC for MySQL
Driver      = /usr/lib/libmyodbc3_r.so
Setup       = /usr/lib/libodbcmyS.so
;Driver64   = /usr/lib64/libmyodbc3_r.so
;Setup64        = /usr/lib64/libodbcmyS.so
FileUsage   = 1 
```

/etc/asterisk/res_odbc.conf

```
[asterisk]
enabled=>yes
dsn=>asterisk-connector
;dsn=>asterisk
username=>root
password=>mypassword
pooling=>no
limit=>0
pre-connect=>yes 
```

当我使用“isql”命令连接 MySQL 数据库时，它工作正常 ![在此处输入图像描述](../Images/703e4b4a5b94c885a66a8be04a6120f4.png)

但是当我在 CLI 中启动控制台时，输入命令***odbc show***。它显示***没有这样的命令“odbc show”***

![在此处输入图像描述](../Images/a21ec484c7ac17f027da66c17ec6fed7.png)

我在这里很困惑，不知道如何解决它。我用谷歌搜索，发现有人建议通过加载 res_odbc.so 模块来解决它。因此我浏览了文件 modules.conf 并将这些修改添加到文件中

```
autoload=yes
preload => res_odbc.so
preload => res_config_odbc.so 
```

修改后完整文件如下" /etc/asterisk/modules

```
;
; Asterisk Module Loader configuration file
;
;

[modules]
autoload=yes
;
; Any modules that need to be loaded before the Asterisk core has been
; initialized (just after the logger has been initialized) can be loaded
; using 'preload'. This will frequently be needed if you wish to map all
; module configuration files into Realtime storage, since the Realtime
; driver will need to be loaded before the modules using those configuration
; files are initialized.
;
; An example of loading ODBC support would be:
preload => res_odbc.so
preload => res_config_odbc.so
;
; As FreePBX is using Local as the channel for queue members we need to make sure
; that pbx_config.so and chan_local.so are preloaded. If not, queue members
; will be marked as invalid until app_queue is reloaded. 
preload => pbx_config.so
preload => chan_local.so
;
; Uncomment the following if you wish to use the Speech Recognition API
;preload => res_speech.so
;
; If you want, load the GTK console right away.  
; KDE console is obsolete and was removed from Asterisk 2008-01-10
;
noload => pbx_gtkconsole.so
;load => pbx_gtkconsole.so
noload => pbx_kdeconsole.so
;
; Intercom application is obsoleted by
; chan_oss.  Don't load it.
;
noload => app_intercom.so
;
; DON'T load the chan_modem.so, as they are obsolete in * 1.2

noload => chan_modem.so
noload => chan_modem_aopen.so
noload => chan_modem_bestdata.so
noload => chan_modem_i4l.so

; Trunkisavail is a broken module supplied by Trixbox
noload => app_trunkisavail.so

; Ensure that format_* modules are loaded before res_musiconhold
;load => format_ogg_vorbis.so
load => format_wav.so
load => format_pcm.so

; format_au.so is removed from Asterisk 1.4 and later, remove ; to enable
;load => format_au.so

; This isn't part of 'Asterisk' iteslf, it's part of asterisk-addons. If this isn't
; installed, asterisk will fail to start. But it does need to go here for native MOH
; to work using mp3's. 
;   Note that on a system with a high number of calls, using a compressed audio format for
;   musiconhold takes CPU resources. Converting these files to ulaw/alaw makes the job
;   much easier for your CPU.
load => format_mp3.so
load => res_musiconhold.so
;
; Load either OSS or ALSA, not both
; By default, load no console driver
;
noload => chan_alsa.so
noload => chan_oss.so
;
noload => app_directory_odbcstorage.so 
noload => app_voicemail_odbcstorage.so 
```

完成此操作后，我返回 CLI 控制台重新加载 res_odbc.so。但它未能找到 res_odbc.so ![在此处输入图像描述](../Images/468ef92057092ecc343d06526a5ae33e.png)

我需要有人给我解决 ODBC 连接问题的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:01:54.830

尝试执行以下操作：

```
asterisk -rvvv
module unload res_odbc.so
module load res_odbc.so 
```

并查看输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:37:03.357

在 AsteriskNOW 环境中，要获取`res_odbc.so`为 Asterisk 提供 ODBC 资源的模块，您需要`asterisk-odbc`安装包。

（取决于您的 AsteriskNOW 安装是如何针对 packages.asterisk.org 存储库配置的，您可能需要`asterisk18-odbc`或类似的版本控制包。）

如果你有`res_odbc.so`（签入`/usr/lib/asterisk/modules`这个文件）并且它仍然没有正确加载，你应该检查 Asterisk 登录以`/var/log/asterisk`获取与更多信息相关的消息`res_odbc`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T20:29:35.590

请注意，当您使用 isql 命令时，您会收到一个错误（未知属性用户名）。

试试这个 /etc/odbc.ini 文件：

```
[asterisk-connector]
Description = MySQL connection to 'asterisk' database
Driver      = MySQL
DATABASE    = asterisk
SERVER      = localhost
USER        = root
PASSWORD    = mypassword
PORT        = 3306
Option      = 3 
```

我不知道是否对 CentOS 有效，但在 Debian 中我必须重新编译 Asterisk 并执行 menuselect 才能工作。为此，请转到您的 Asterisk 字体目录：

```
$ ./configure

$ make clean

$ make menuselect 
```

请验证是否检查了以下模块：

[*] cdr_odbc

[*] cdr_adaptive_odbc

[*] func_odbc

[*] func_realtime

[*] pbx_realtime

[*] res_config_odbc

[*] res_odbc

进而：

```
$ sudo make install 
```

我希望对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T12:54:06.483

当您执行“make menuselect”检查时，您似乎忘记添加一些重要的模块。

此外，如果您使用 mysql 作为关系数据库，则必须在您描述的配置文件 (/etc/asterisk/res_odbc.conf) 中建立“limit=>1”，这一点非常重要，或者只需注释该行。如果您遵循 orreilly 指南 ( [http://ofps.oreilly.com/titles/9781449332426/asterisk-DB.html](http://ofps.oreilly.com/titles/9781449332426/asterisk-DB.html) )，您可以查看勘误表 ( [http://oreilly.com/catalog/errata.csp?isbn= 9780596517342](http://oreilly.com/catalog/errata.csp?isbn=9780596517342)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-17T02:23:04.413

做

```
sudo service asterisk restart 
```

奇迹般有效

# android - 无限滚动：内容批次应该有多大？

> ID：12681053
> 
> 赞同：1
> 
> 时间：2012-10-01T21:04:39.997
> 
> 标签：android, tablet, infinite-scroll

我正在设计一个将利用无限滚动的 Android 平板电脑应用程序。当然，用户的连接速度会有所不同。要加载的内容是产品搜索结果。GUI 类似于 Google 购物。

我一直无法找到有关在每批中加载多少内容的最佳实践。我猜这个数量应该与所需的最大加载时间有关。

有没有人这样做过？您如何确定要加载多少内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:14:28.430

我建议您在每批中加载尽可能少的内容（当然取决于您的应用程序需求），按需下载数据是您能做的最好的事情。我做了类似的事情，以我个人的经验，最好的方法是运行后台线程（扩展 AsyncTask）以避免 UI 线程挂起。这是无需操作线程和/或处理程序即可将结果发布到 UIThread 的最佳方式。

# symfony - JMSSerializerBundle 原则实体更新

> ID：12681055
> 
> 赞同：0
> 
> 时间：2012-10-01T21:04:50.730
> 
> 标签：symfony, doctrine-orm, jmsserializerbundle

我对反序列化的 Doctrine 实体有疑问。序列化对象没有实体的所有字段，当我更新它们以使字段设置为空时。我认为同样的问题在[这里](https://stackoverflow.com/questions/8726611/how-to-update-a-doctrine-entity-from-a-serialized-json)，但没有与使用 JMSSerializer + Doctirne 相关的解决方案。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T08:05:28.940

您是否在注释中添加了`@Expose`? 那样的

```
use JMS\SerializerBundle\Annotation\Expose;
use JMS\SerializerBundle\Annotation\Accessor;
use JMS\SerializerBundle\Annotation\ExclusionPolicy;
use JMS\SerializerBundle\Annotation\Type;

class MyEntity {
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     * @Expose
     * @Type("integer")
     */
    private $id;
} 
```

# iphone - 以编程方式切换到另一个选项卡并切换到第一个视图控制器？

> ID：12681058
> 
> 赞同：0
> 
> 时间：2012-10-01T21:05:08.653
> 
> 标签：iphone, objective-c, ios

如何以编程方式切换到另一个选项卡并转到导航堆栈中的第一个视图？

我可以切换到不同的选项卡。

```
self.tabBarController.selectedIndex = 4; 
```

但是，我还需要在该选项卡的导航堆栈中切换不同的视图控制器。

我怎么做？

一旦我运行上面的代码，它就会切换到导航堆栈中当前加载的视图控制器。

我的视图控制器被加载到 5 个导航控制器中，这些导航控制器被添加到应用程序委托的选项卡栏中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:09:15.497

我假设你`UINavigationController`的`UITabBarController`. 如果是这种情况，您可以使用`popToRootViewControllerAnimated:`转到第一个视图控制器。

```
int index = 4;
self.tabBarController.selectedIndex = index;
[self.tabBarController.viewControllers[index] popToRootViewControllerAnimated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:08:07.867

假设标签栏控制器的 rootViewController 是一个导航控制器，获取对它的引用然后弹出到您想要的视图控制器。您甚至可以在切换选项卡之前执行此操作。

编辑：我一直忘记我将 UINavigationController 子类化以防止选项卡栏控制器的默认行为告诉导航控制器在切换选项卡时弹出到它的 rootViewController （这是一个人点击选项卡时的行为，不确定它是否发生当它以编程方式完成时。）这是我使用的代码：

```
- (NSArray *)popToRootViewControllerAnimated:(BOOL)animated
{
    //NSLog(@"popToRootViewControllerAnimated");

    return @[];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T20:04:37.860

知道这是一个旧的，但我遇到了类似的问题。我在 tabViewController 中有 3 个选项卡，每个选项卡都有一个可以钻取的导航树。当用户切换选项卡时，我需要显示该选项卡的 rootviewcontroller。我的解决方案是将以下几行添加到导航树中的那些视图控制器中：

```
 -(void)viewWillDisappear:(BOOL)animated
    {
       [super viewWillDisappear:YES];
        DLog(@"Running %@ '%@'", self.class, NSStringFromSelector(_cmd));
       [self.tabBarController.viewControllers[self.tabBarController.selectedIndex] popToRootViewControllerAnimated:YES];

     } 
```

如果用户在使用上述代码的任何视图中并切换选项卡，他们离开的选项卡会弹出到根视图，所以当他们回来时，一切都很酷......

# symfony - 重新定义 symfony 根项目

> ID：12681064
> 
> 赞同：1
> 
> 时间：2012-10-01T21:05:13.953
> 
> 标签：symfony, capifony

我接手了一个文件结构与此类似的项目：

```
Project /
     conf /
     symfony /
         app /
         src /
         ...
     scripts
     other folders ... 
```

我最近对 ​​capifony 很感兴趣，我尝试使用这种文件结构设置 capifony，但它不起作用，因为部署 capifony 时会在`./Web` `./App`etc 中寻找 symfony 文件...

在更改文件结构之前，我想知道是否有办法告诉 capifony symfony 的根在`./Symfony`而不是`./`？

我试图重新定义`app_path`并`web_path`在`deploy.rb`文件中，但这似乎还不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:42:16.470

在你的项目根目录中运行以下命令（假设你还没有修改你的项目）：

```
capifony -s 2 -p symfony/app . 
```

# php - 刷新内容，不加载

> ID：12681069
> 
> 赞同：1
> 
> 时间：2012-10-01T21:05:41.260
> 
> 标签：php, javascript, jquery, ajax

所以我有这个代码片段

```
setInterval(function(){
$("#shows_today").load("URL");
}, 1000); 
```

而且我还有一个包含（PHP）来首先加载今天的节目......但是当 JS over get 触发它而不是像刷新当前加载的页面时，它会再次添加它，这样结果就会立即显示出来。 ..我该怎么做呢？它更像是刷新然后添加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:11:49.360

您每秒都在访问一个服务器资源，并考虑在一段时间内多个用户访问该请求时将发送多少个此类请求。

无论如何..对于像刷新这样的效果..尝试`fadeOut`和`fadeIn`

```
setInterval(function(){
   $("#shows_today").fadeOut(200); // fade out current content
   $("#shows_today").load("URL", function () {
       $(this).fadeIn(100);
   });  // fades In new content

}, 30000); //30 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:09:27.740

尝试这个：

```
$("#shows_today").empty().load("URL"); 
```

根据您的问题，您想清除那里的所有内容并完全刷新页面的该区域。空函数删除所有子元素，然后加载调用链接在它之后，因此它作用于同一个对象。

# javascript - Three.js 和 KineticJS，将 KineticJS 层保存到 THREE.texture

> ID：12681071
> 
> 赞同：0
> 
> 时间：2012-10-01T21:05:46.373
> 
> 标签：javascript, html, textures, three.js, kineticjs

我的问题几乎与标题所述完全相同。我需要以某种方式将 KineticJS 层转换为 ThreeJS 纹理，以便可以将其应用到平面。我这样做是因为我需要在我的 3D 场景中利用 KineticJS 的文本操作能力。

我目前正在使用该线路

```
var texture = new THREE.Texture(layer.getCanvas()); 
```

将其转换为纹理，但这根本不起作用。我将如何正确地做到这一点？我需要先在舞台内设置场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:38:28.917

你可以使用

```
toDataURL(); 
```

然后将该图像用作纹理。

[http://tutorials.jenkov.com/html5-canvas/todataurl.html](http://tutorials.jenkov.com/html5-canvas/todataurl.html)

# uml - 谁是用例图中的参与者

> ID：12681085
> 
> 赞同：0
> 
> 时间：2012-10-01T21:06:26.407
> 
> 标签：uml, use-case

我正在为将有演员的应用程序制作“UML 用例”：

*   用户（普通用户），
*   `google`（进行 OpenID 注册）。

我将使用什么：OpenID 还是 Google？这里的*真正*演员是什么？将在用例图中表示与用户交互的参与者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:15:43.223

两者都是有效的选择。如果您想表达 Google 是一家公司，您可以将其添加为演员。如果你想表达用户与一般的“OpenID 服务”交互，你也可以把它放在那里。或者，您可以将其组合起来并将参与者命名为“Google OpenID 服务”以使其更加具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T05:36:12.370

参与者是与您的系统交互的个人、组织或系统。`OpenID`这些都不是。`Google`是。所以你应该`Google`扮演演员的角色。

# javascript - 在 javascript 中访问级联 JSON

> ID：12681091
> 
> 赞同：0
> 
> 时间：2012-10-01T21:06:43.423
> 
> 标签：javascript, jquery, json, backbone.js, cascading

如果我有以下 JSON 对象，我如何`survey.id`使用 JavaScript 访问（例如 1）？我正在使用 Backbone / json.stringify / object.parse

```
[{
    "class": "org.example.UserBooking",
    "id": 1,
    "booking": {
        "class": "Booking",
        "id": 1
    },
    "profile": {
        "class": "Profile",
        "id": 3
    },
    "survey": {
        "class": "Survey",
        "id": 1
    },
    "tslot": {
        "class": "TimeSlot",
        "id": 5
    }
}] 
```

??

我不知道如何访问这个“调查” id，因为它是级联的。如果我想访问“id”，例如，我这样做：

```
var obj = $.parseJSON(JSON.stringify(userbooking));

alert(obj.id); 
```

谢谢

* * *

感谢您的答复。当我尝试以下行时：

var obj = JSON.parse(JSON.stringify(userbooking)); 警报（obj.Survey.id）；

我收到以下错误：

未捕获的类型错误：无法读取未定义的属性 'id' –</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:09:26.327

尝试像这样访问调查中的 id

```
 obj[0].survery.id 
```

当前上下文中的 json 数据是这样括起来的

**[{}]** ..

所以它是一个对象数组，因为它是我们试图访问的第一个对象..

它应该是 **obj[0]。** 而不仅仅是 **obj。**

[检查演示](http://jsfiddle.net/sushanth009/PUycg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:08:42.910

不要使用 jQuery，只需使用`JSON.parse()`. 然后，使用`obj.survey.id`.

```
var obj = JSON.parse(userbookingstring);
alert(obj[0].survey.id); 
```

# mdx - 如何在 MDX 中对同一维度进行分组和过滤

> ID：12681096
> 
> 赞同：1
> 
> 时间：2012-10-01T21:07:02.030
> 
> 标签：mdx, olap, mondrian, msas

我想创建一个条形图，每个月都有一个条形图和一些度量值。

但我也想过滤可能不完全重叠的日期范围。

发生这种情况时，我希望该月的总计数仅在我的日期范围内的天数上进行汇总，而不是整个月的汇总。

使用 MDX 是否可行？如果是这样，请求应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:22:46.633

您可以使用子选择。[您可以在此页面](http://msdn.microsoft.com/en-us/library/ms146002.aspx)和此[页面](http://msdn.microsoft.com/en-us/library/ff487138.aspx)上找到更多信息：

> 当在轴子句中指定了一个成员时，该成员及其祖先和后代将包含在子选择的子立方体空间中；所有未提及的兄弟成员，在轴或切片器子句中，以及它们的后代都从子空间中过滤出来。这样，外部 select 的空间就被限制在了 axis 子句或 slicer 子句中的现有成员中，它们的祖先和后代如前所述。

这是一个例子：

```
SELECT { [Customer].[Customer Geography].[Country].&[Australia]
       , [Customer].[Customer Geography].[Country].&[United States]
       } ON 1
     ,  {[Measures].[Internet Sales Amount], [Measures].[Reseller Sales Amount]} ON 0
  FROM ( SELECT {[Customer].[Customer Geography].[Country].&[Australia]
                 , [Customer].[State-Province].&[WA]&[US]} ON 0
           FROM [Adventure Works]
        ) 
```

结果将包含一行`Autralia`用于`United States`. 使用子选择，我将值限制为`United Stated`状态`Washington`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:04:44.967

使用原始维度的虚拟维度创建第二个时间维度。在 WHERE 中使用一个维度，在 SELECT 中使用另一个维度。

如果有些人想要季度和期间的“业务时间”，而其他人更喜欢几个月，这通常会发生。或者，如果您的财政年度为 4 月至 4 月。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:11:44.563

我发现用蒙德里安做的一种方法如下

```
WITH MEMBER [Measures].[Units Shipped2] AS
SUM
(
 {
  exists([Store].[Store Country].currentmember.children,{[Store].[USA].[WA],[Store].[USA].[OR]})
 },[Measures].[Units Shipped]
)
MEMBER [Measures].[Warehouse Sales2] AS
SUM
(
 {
  exists([Store].[Store Country].currentmember.children,{[Store].[USA].[WA],[Store].[USA].[OR]})
 },[Measures].[Warehouse Sales]
)
SELECT 
{[Measures].[Units Shipped2],[Measures].[Warehouse Sales2]} ON 0,
NON EMPTY [Store].[Store Country].Members on 1
FROM [Warehouse] 
```

我不确定过滤是否会像下面这样在 SQL 中完成并提供良好的性能或在本地运行

```
select Country, sum(unit_shipped)
where state in ('WA','OR' )
group by Country 
```

# c - C - 为 UDP/组播套接字选择接口

> ID：12681097
> 
> 赞同：17
> 
> 时间：2012-10-01T21:07:11.927
> 
> 标签：c, sockets, interface, udp, multicast

我正在尝试修改[多播侦听器/发送器示例](http://ntrg.cs.tcd.ie/undergrad/4ba2/multicast/antony/example.html)，以将 UDP/多播套接字绑定到特定接口，*而不*使用**INADDR_ANY**宏。

我拥有接口的 IPv4 地址。我尝试了以下方法，但套接字没有收到任何 UDP（单播、广播、多播）数据包。

```
struct sockaddr_in addr;
int fd, nbytes;
socklen_t  addrlen;
struct ip_mreq mreq;

// my_ipv4Addr equals current IP as String, e.g. "89.89.89.89"

// create what looks like an ordinary UDP socket */
if ((fd = socket(AF_INET, SOCK_DGRAM, 0)) < 0) {
    perror("socket");
    exit(1);
}

// set up addresses
bzero(&addr, sizeof(addr));
addr.sin_family = AF_INET;
// [-]    addr.sin_addr.s_addr = htonl(INADDR_ANY); 
addr.sin_addr.s_addr = inet_addr(my_ipv4Addr); 
addr.sin_port = htons(port);

// bind socket
if (bind(fd, (struct sockaddr *) &addr, sizeof(addr)) < 0) {
    perror("bind");
    exit(1);
}

// use setsockopt() to request that the kernel join a multicast group
mreq.imr_multiaddr.s_addr = inet_addr(group);
// [-]    mreq.imr_interface.s_addr = htonl(INADDR_ANY);
mreq.imr_interface.s_addr = inet_addr(my_ipv4Addr);
if (setsockopt(fd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &mreq, sizeof(mreq))< 0) {
    perror("setsockopt");
    exit(1);
} 
```

编辑：

让我解释一下我的程序的目的。**我正在编写一个小工具，它将检查网络是否支持广播/多播。**因此，我拥有一个具有两个接口的系统，并通过 Interface1 发送一个多播数据包并尝试使用 Interface2 接收它。但是：数据包应该通过网络，*而不是*环包设备。

这个想法是通过以下方式阻止 thread1/interface1 上的多播环回：

```
u_char loop = 0;
setsockopt(fd, IPPROTO_IP, IP_MULTICAST_LOOP, &loop, sizeof(loop)); 
```

并监听 thread2/interface 2 特定接口。Tcpdump 显示，数据包正在到达，但在我上面的配置中被丢弃。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-18T04:54:39.143

你只能向多播组发送数据包，但 不能接收任何数据包，即使是从“my_ipv4Addr”发出的数据包。
**`addr.sin_addr.s_addr=inet_addr(my_ipv4Addr);`**
**`bind(sockfd,(SA*)&addr,sizeof(addr));`**

**`addr.sin_addr.s_addr`**必须如此**`htonl(INADDR_ANY)`**。

您可以接收来自多播组的所有数据包，但 它使用默认接口（可能是 eth0）发送数据包， 而不是您指定的接口（如 eth1）。 所以这是没有效果的。
**`mreq.imr_interface.s_addr=inet_addr(my_ipv4Addr);`**

with 可以通过接口 ETH1 发送数据包， 但只能接收与 ETH1 关联的 ip 发送的数据包， 不能接收来自其他客户端的任何数据包。
**`setsockopt(sockfd,SOL_SOCKET,SO_BINDTODEVICE,ETH1,strlen(ETH1));`**

您可以通过与 my_ipv4addr 关联的接口发送数据包， 也可以从多播组中的任何客户端接收任何数据包。
**`mreq.imr_interface.s_addr=inet_addr(my_ipv4Addr);`**
**`setsockopt(sockfd,IPPROTO_IP,IP_MULTICAST_IF,&mreq.imr_interface,sizeof(struct in_addr);`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T09:25:44.897

```
bzero(&addr, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = htonl(INADDR_ANY); 
//addr.sin_addr.s_addr = inet_addr(my_ipv4Addr); 
addr.sin_port = htons(port);

mreq.imr_multiaddr.s_addr = inet_addr(group);
// [-]    mreq.imr_interface.s_addr = htonl(INADDR_ANY);
mreq.imr_interface.s_addr = inet_addr(my_ipv4Addr); 
```

你只需要像我一样编辑你的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T17:03:37.183

绑定套接字以接收多播流量时，如果绑定到本地地址，这将防止在非 Windows 系统上接收多播数据包。

当我发布具有绑定到特定地址功能的3.6 版[UFTP时，我第一次发现了这一点。](http://uftp-multicast.sourceforge.net)Windows 处理得很好，但在 Linux 系统上，应用程序没有收到多播数据包。我不得不在下一个版本中删除该功能。

请注意，您可以直接绑定到多播地址：

```
addr.sin_addr.s_addr = inet_addr(group); 
```

在这种情况下，您将仅在该套接字上接收该多播地址的流量。但是，您仍然需要在特定接口上加入多播组才能接收。

如果您计划从同一个套接字上的多个多播地址接收数据，那么您需要绑定到`INADDR_ANY`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T22:14:08.570

要么你为了理解而简化了你的代码，要么我错过了一些东西，

这是结构

```
struct ip_mreqn {
    struct in_addr imr_multiaddr; /* IP multicast group
                                     address */
    struct in_addr imr_address;   /* IP address of local
                                     interface */
    int            imr_ifindex;   /* interface index */
}; 
```

[ip 手册页 - IP_ADD_MEMBERSHIP](http://linux.die.net/man/7/ip)

但你指的是

```
mreq.imr_interface.s_addr = inet_addr(my_ipv4Addr); 
```

什么是**imr_interface**？它编译吗？

如果您只是为了更好的可读性而写了上面的名称，您是否尝试过将接口索引（即 imr_ifindex）填充到您要附加到的特定接口。

我的猜测是，如果您保留 imrr_address 并仅分配接口索引，它应该绑定到该接口并接收数据包。看看是否有帮助。

# c# - 尝试使用 c# 中的 if 命令创建具有 3 个轨迹栏值的排序代码

> ID：12681099
> 
> 赞同：0
> 
> 时间：2012-10-01T21:07:31.677
> 
> 标签：c#

我必须用（c#）创建一个windows窗体，

*   3 个轨迹栏
*   1 个按钮
*   1 个标签

使用 if 和 else if 命令。我的问题是，我无法让最终结果显示在 label1 中。我确实设法在labels2-4中显示它们。但这不是完成这项任务的方法。

这是代码。

```
 {
    public Form1()
    {
        InitializeComponent();
        trackBar1.Maximum = 10;
        trackBar1.Minimum = 0;
        trackBar2.Maximum = 10;
        trackBar2.Minimum = 0;
        trackBar3.Maximum = 10;
        trackBar3.Minimum = 0;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        int a;
        int b;
        int c;

        a = Convert.ToInt32 (trackBar1.Value);
        b = Convert.ToInt32 (trackBar2.Value);
        c = Convert.ToInt32 (trackBar3.Value);

        int d;
        int E;
        int f;

        if ((a < b) && (a < c)&& (b> c))
        {
            label2.Text = Convert.ToString(d = a);
            label3.Text = Convert.ToString(E = c);
            label4.Text = Convert.ToString(f = b);
            label1.Text =Convert.ToString (string d,e,f);
        }
        if ((a < b) && (a < c) && (b < c))
        {
            label2.Text = Convert.ToString(d = a);
            label3.Text = Convert.ToString(E = b);
            label4.Text = Convert.ToString(f = c);
        }
        else if ((a > c) && (a > b) && (b > c))
        {
            label2.Text = Convert.ToString(d = c);
            label3.Text = Convert.ToString(E = b);
            label4.Text = Convert.ToString(f = a);
        }
        else if ((a < c) && (a > b) && (b > c))
        {
            label2.Text = Convert.ToString(d = c);
            label3.Text = Convert.ToString(E = a);
            label4.Text = Convert.ToString(f = b);
        }
        else if ((b < a) && (b < c) && (c > a))
        {
            label2.Text = Convert.ToString(d = b);
            label3.Text = Convert.ToString(E = a);
            label4.Text = Convert.ToString(f = c);
        }
        else if ((b < a) && (b < c) && (c < a))
        {
            label2.Text = Convert.ToString(d = b);
            label3.Text = Convert.ToString(E = c);
            label4.Text = Convert.ToString(f = a);
        }
    } 
```

我需要 label1.Text 作为标签 2-4 的结果，我尝试了这个 label1.Text= Convert.ToString(d = b + E = c + f = a) 并且我尝试将 + 替换为 ，但这不起作用任何一个。我想我必须使用字符串格式，但我不知道如何以及是否需要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T04:54:42.267

连接字符串时最好使用 string.Format

在你的情况下，它将是

```
label1.Text = string.Format("{0} {1} {2}", d,E,f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:10:28.270

这是你想做的吗？我会将其放在您的 if 语句下方，以便在每种情况下都会调用它。

```
label1.Text = (int.Parse(label2.Text) + int.Parse(label4.Text)).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:19:47.970

我想你希望标签的内容`label2, label3, label4`一起显示在`label1`? 在你的 ifs 后面加上一行

```
label1.Text = d.ToString() + " " + E.ToString() + " " + f.ToString(); 
```

# c# - MVVM / NHibernate - 如何进行动态模型验证？

> ID：12681102
> 
> 赞同：6
> 
> 时间：2012-10-01T21:07:37.277
> 
> 标签：c#, wpf, validation, nhibernate, mvvm

我正在使用 MVVM 模式构建一个 C# WPF 应用程序。我有使用 NHibernate 来持久化我的域模型的存储库类。

我的模型由一个更大的树结构组成（`Recipe`s 包含`Operation`s 包含`Phase`s）。操作和阶段都包含一个动态的键值映射列表作为`IDictionary<string, string>`. 对应的 NHibernate 映射`Operation`为

```
<class name="Operation" table="operations">
  <id column="id" type="int" generator="native" />
  <property name="Name" column="name" />

  <map name="Parameters" table="operation_params">
    <key column="operation" />
    <index column="param" type="string" />
    <element column="value" type="string" />
  </map>

  <list name="Phases" cascade="all-delete-orphan">
    <key column="operation" />
    <index column="`index`" />
    <one-to-many class="Phase" />
  </list>
</class> 
```

现在，这部分很简单并且效果很好。该类`Operation`目前是一个内部几乎没有逻辑的 POCO，一个简单的数据容器。

* * *

我的问题是：我必须针对我的应用程序从 .xml 文件读取的外部模式验证参数。该模式包含对单个参数（范围、有效值等）的限制以及几个参数之间的依赖关系（即有效值取决于另一个参数的值）。

集成验证逻辑的最佳方式是什么？过去几天我读了很多书，直到现在，我偶然发现了以下替代方案：

1.  将验证逻辑添加到模型类本身。

    为此，我不知道如何将验证模式正确地注入 NHibernate 创建的对象中。我并不总是需要验证功能，只有在用户编辑参数或导入操作（例如从备份）时。所以也许我可以在模型类中实现实际的验证逻辑，并在我真的需要验证时使用属性注入验证规则？将该功能添加到我使用 NHibernate 存储的模型类中是否被认为是一种好习惯，或者模型类是否应该保持“哑”？

2.  为环绕我的`Operation`对象的验证逻辑创建一个装饰器类。

    这样，每当我需要验证时，我都会使用包装器，而当我只需要显示它时，我会使用裸模型类。我的问题是我的 ViewModel 类已经是包装器，所以我会在这里得到另一层包装。此外，由于 Operation 类是较大树结构（配方/操作/阶段）的一部分，我需要为集合创建包装器并将集合更改映射回底层集合，这可能是一项复杂的任务。

3.  创建一个服务类，只要我想验证它，我就会调用它来传递操作。

    我在这里看到的问题是服务是无状态的，因此每次用户更改单个参数时都必须重新验证整个参数列表。这似乎不是最好的方法，尤其是当我想在参数的验证状态更改时为 UI 触发某种更改事件时。

我的问题的常用方法是什么？有没有我还没有找到完全符合我需要的模式？我的意思是，有很多实现依赖于外部模式定义进行验证（阅读：XML/XSD 和类似的文档结构），只需要一些天才已经找到了解决我的问题的完美解决方案；-)帮帮我，所以！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T08:08:57.697

1.  ***将验证逻辑添加到模型类本身。***

2.  ***为环绕我的 Operation 对象的验证逻辑创建一个装饰器类。***

3.  ***创建一个服务类，只要我想验证它，我就会调用它来传递操作。***

**我赞成以下解决方案**：

向您的解决方案添加一个验证器项目，其中将包含：

*   根据应用程序从 .xml 文件读取的外部架构验证参数的逻辑。

*   您在项目中使用的每个 POCO 对象的验证规则，并且它需要验证（或者，您也可以在更高级别应用这些规则，如果您已经有这样的实现，则意味着不是 POCO，而是 POCO 上的一些 Wrapper，但作为最佳实践尝试将规则直接应用于 POCO——更清洁和正确的方法）

**所以**：

**1-**您的 POCO 将包含属性和一个简单的验证 SelfValidate()：

```
 namespace Core.Domain {
    public class Operation : ValidatableDomainObject {
        #region Properties
        public virtual String Name { get; set; }
        public virtual ISet Phases { get; set; }     
        #endregion Properties

        #region Validation
        public override ValidationResult SelfValidate() {
            return ValidationHelper.Validate(this);
        }
        #endregion Validation       
    }
} 

```

**2-**您的 POCO 验证器将包含应应用于基于您的 XML 文件验证 POCO 的规则：

```
 #region Usings

using System.Linq;
using FluentValidation;
using FluentValidation.Results;

#endregion Usings

namespace Core.Validation {

    public class OperationValidator : AbstractValidator {
        #region .Ctors
        /// 
        /// .Ctor used for operation purpose
        /// 
        public OperationValidator() {
            Validate();
        }
        #endregion .Ctors

        /// 
        /// Validation rules for Operation
        /// 
        private void Validate() {
            //here you may get validations rules from you xml file and structure the following code after your requirements
            //Name
            RuleFor(x => x.Name).Length(2, 20).WithMessage("Operation name should have length between 2 and 20 symbols");
            //ApplicationFormsWrapper
            Custom(entity => {
                foreach (var item in entity.Phases)
                    if (item.PhaseState == null)
                        return new ValidationFailure("Phases", "First Phase is missing");
                return null;
            });
        }
    }
} 

```

**3-**添加 ValidatableDomainObject 类，它实现 System.ComponentModel.IDataErrorInfo （提供提供自定义错误信息的功能，用户界面可以绑定到）：

```
 #region Usings

using System.ComponentModel;
using System.Linq;
using FluentValidation.Results;
using Core.Validation.Helpers;

#endregion Usings

namespace Core.Domain.Base {
    public abstract class ValidatableDomainObject : DomainObject, IDataErrorInfo {

        public abstract ValidationResult SelfValidate();

        public bool IsValid {
            get { return SelfValidate().IsValid; }
        }

        public string Error {
            get { return ValidationHelper.GetError(SelfValidate()); }
        }

        public string this[string columnName] {
            get {
                var validationResults = SelfValidate();
                if (validationResults == null) return string.Empty;
                var columnResults = validationResults.Errors.FirstOrDefault(x => string.Compare(x.PropertyName, columnName, true) == 0);
                return columnResults != null ? columnResults.ErrorMessage : string.Empty;
            }
        }
    }
} 

```

**4-**添加以下 ValidationHelper：

```
 #region Usings

using System;
using System.Text;
using FluentValidation;
using FluentValidation.Results;

#endregion Usings

namespace Core.Validation.Helpers {
    public class ValidationHelper {
        public static ValidationResult Validate(TK entity)
            where T : IValidator, new()
            where TK : class {
            IValidator validator = new T();
            return validator.Validate(entity);
        }

        public static string GetError(ValidationResult result) {
            var validationErrors = new StringBuilder();
            foreach (var validationFailure in result.Errors) {
                validationErrors.Append(validationFailure.ErrorMessage);
                validationErrors.Append(Environment.NewLine);
            }
            return validationErrors.ToString();
        }
    }
} 

```

**它将允许您在应用程序代码中执行以下操作**：

1.  在服务或视图模型级别，您可以这样做以获得验证错误：

 `````
var operation = new Operation(){Name="A"};
var validationResults = operation.SelfValidate();

````  `2.  在视图级别，您可以编写类似这样的内容（在这种情况下，如果出现任何验证错误，它们直接来自 OperationValidator 类）：

> <TextBox Text="{绑定 CurrentOperation.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">

**注意**：实现基于 FluentValidation（一个用于 .NET 的小型验证库，它使用流畅的接口和 lambda 表达式），请参阅[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)，但当然你可以使用另一个，希望我成功了描述从域对象中解耦验证的机制。``

# java - Java 按字母顺序排列字符串

> ID：12681103
> 
> 赞同：4
> 
> 时间：2012-10-01T21:07:48.953
> 
> 标签：java, string, sorting, alphabetical

我有一个课程项目，我需要输入 4 个不同的字符串，然后按字母顺序输出它们。

到目前为止，我有这个：

```
String wd1, wd2, wd3, wd4;
    Scanner scan1 = new Scanner(System.in);

    System.out.println ("Type Word One: ");
    wd1 = scan1.next();

    System.out.println ("Type Word Two: ");
    wd2 = scan1.next();

    System.out.println ("Type Word Three: ");
    wd3 = scan1.next();

    System.out.println ("Type Word Four: ");
    wd4 = scan1.next(); 
```

我知道我可以使用以下方法获得 2 个字符串的字母顺序：

```
int compare = wd1.compareTo(wd2);

    if (compare < 0)
    {System.out.println(wd1 + " " + wd2);}
    else {
        if (compare > 0)
        {System.out.println(wd2+ " " + wd1);} 
```

我需要帮助以正确的顺序获取所有 4 个字符串。**我应该使用 if else 语句而不是数组来执行此操作。**

任何帮助都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:22:24.333

```
boolean swapped = false;
do {
  swapped = false;
  if (w2.compareTo(w1) < 0) {
    String tmp = w2;
    w2 = w1;
    w1 = tmp;
    swapped = true;
  }
  if (w3.compareTo(w2) < 0) {
    String tmp = w3;
    w3 = w2;
    w2 = tmp;
    swapped = true;
  }
  if (w4.compareTo(w3) < 0) {
    String tmp = w4;
    w4 = w3;
    w3 = tmp;
    swapped = true;
  }
} while (swapped)

System.out.println(w1);
System.out.println(w2);
System.out.println(w3);
System.out.println(w4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:11:10.137

可以应用典型的分歧和同意策略。考虑合并排序，排序前 2 个和后 2 个字符串，然后合并结果。

```
if(s2<s1) swap(s1,s2)
if(s4<s3) swap(s3,s4)

if(s1<s3) {
  print(s1)
  if(s2<s3){
    print(s2)
    print(s3)
    print(s4)
  } else {
    print(s3)
    if(s2<s4){
      print(s2)
      print(s4)
    } else {
      print(s4)
      print(s2)
    }
  }
} else {
  print(s3)
  if(s4<s1){
    print(s4)
    print(s1)
    print(s2)
  } else {
    print(s1)
    if(s4<s2){
      print(s4)
      print(s2)
    } else {
      print(s2)
      print(s4)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:27:25.130

由于您无法使用数组或任何其他数据结构和排序算法，因此您需要使用多个`if`语句手动执行此操作。在您尝试编写任何代码之前，我建议您尝试手动执行此操作。如果我给你四个单词，你如何确定哪个是按字母顺序排列的第一个单词？第二？继续; 如果你能用语言描述你是如何做到这一点的，那么翻译成 Java 应该是直截了当的。

**编辑：**

目前不要担心 ASCII 码或任何与计算机相关的东西。不过，我想您确实需要考虑`compareTo()`一次只能比较两个单词的细节。因此，假设您选择`wd1`并`wd2`进行比较。当你比较这两个“词”时，可能的结果是什么？在每种情况下，您接下来会做什么？

**另一个编辑：**

在评论中讨论后，您可以看到这里的算法是这样的（伪代码）：

```
if wd1 comes before wd2
    if wd1 comes before wd3
        if wd1 comes before wd4
            print out wd1 // wd1 is the first word in alphabetical order
        else
            print out wd4 // wd4 is the first word in alphabetical order
    else
        // Details left as an exercise to the reader
else
    // Details left as an exercise to the reader 
```

按照此处所示的相同模式，首先用英语填写 else 语句。完成后，用 Java 编写代码应该非常简单。

正如您所见，“理解概念”通常不足以让您开始编写代码。你需要花时间弄清楚所有令人痛苦的细节。通常我发现在我开始编写代码之前，使用笔和纸（或者可能是文字处理器）用英语写出步骤很有帮助。（当然，如果这样更容易，您可以使用自己的母语。关键是不要跳到计算机上，从一开始就开始编写 Java 代码，尤其是当您遇到困难时。）

当您可以用您的母语描述这些步骤时，翻译成 Java 就变得更容易了。有时它是微不足道的。其他时候，您会遇到自然语言描述中未考虑的细节。然后您从 Java 中备份并修复描述，然后再继续使用 Java。

这基本上是我尝试编写计算机程序时使用的过程。我希望您可以将其中一些想法应用到您自己的编码中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:27:34.487

您需要将第一个字符串与其余三个字符串进行比较，以找到按字母顺序排列的第一个字符串。之后，您需要在其余 3 个之间进行比较，依此类推。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T21:09:40.017

最简单的方法是将它们放在一个列表中，然后使用 list.sort() 将它们按顺序排列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T21:11:33.403

将字符串放入 a`List`并调用该`sort()`方法怎么样？

Java String 类实现了“Comparable”接口，因此已经有了该`compareTo()`方法，该方法应该按顺序比较字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-22T17:45:43.460

要比较超过 2 个字符串，您应该将字符串放在一个数组中，然后通过排序方法运行它们

```
public class SortLetters2 {
public String[] sort(String[] asd) {
    String[] sorted = asd.clone();
    for (int i = 0; i < sorted.length; i++) {
        for (int j = i + 1; j < sorted.length; j++) {
            int compare = sorted[i].compareTo(sorted[j]);
            if ((compare > 0) && (i != j)) {
                //compare two strings
                String temp = sorted[j];
                sorted[j] = sorted[i];
                sorted[i] = temp;
            }
        }
    }
    return sorted;
}
public static void main(String[] args) {
    SortLetters2 list1 = new SortLetters2();
    //SortLetters2 is the class name
    Scanner scan1 = new Scanner(System.in);
    String wd1, wd2, wd3, wd4;
    System.out.println("Type Word One: ");
    wd1 = scan1.next();
    System.out.println("Type Word Two: ");
    wd2 = scan1.next();
    System.out.println("Type Word Three: ");
    wd3 = scan1.next();
    System.out.println("Type Word Four: ");
    wd4 = scan1.next();
    String array[] = {wd1, wd2, wd3, wd4};
    //set array equal to the inputs
    String[] sortedArray = list1.sort(array);
    for (int i = 0; i < sortedArray.length; i++) {
        if (i == sortedArray.length - 1) {
            System.out.println(sortedArray[i]);
        } else {
            System.out.print(sortedArray[i] + ",");
        }
    }
    //run sorting program
}
} 
```

# java - java在实现类中声明一个方法，而不是在接口中

> ID：12681105
> 
> 赞同：0
> 
> 时间：2012-10-01T21:07:58.740
> 
> 标签：java, methods, interface, implementation

首先，我在 Java 方面的经验很少。

谈到我的问题，我正在用我自己的方法实现我自己的列表。

```
 public class MyList<E> implements List<E>{

 private Node<E> head;

 private static class Node<E> {
     private E element; 
     .....
 } 
```

现在，这个类中有一个方法可以将此列表与给定的列表进行比较：

```
public boolean equals(List<E> list){
....
} 
```

要启动此方法，首先我们必须获取列表的头部，然后我可以访问元素并比较列表。
现在，我们没有 getHead() 方法。因此，我们尝试在实现类中创建以下方法

```
public Node<E> getHead(){ 
```

编译器找不到该符号。当然，我们需要先在接口中声明它。问题是，如果我们尝试这样做，接口不知道 Node 是什么。所以我在这里陷入僵局。

我得到错误：

```
 Cannot find symbol
  symbol  : method getHead()
  location: interface List<E>
    Node<E> lhead = list.getHead(); 
```

我希望它使 getHead 成为特定于实现的方法。我怎么做？

请问，能否把implementation中的internal class移到interface中？不知道如何解决这个问题，

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:17:53.180

您是在实现[`java.util.List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)还是您创建了一些自定义`List`界面？如果您使用的是标准类，当然您不能修改核心 JDK 类。

如果您有自定义`List`界面，我会发现一些问题：

*   你的[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object))方法应该接受`Object`和沮丧。否则，您将*重载*而不是*覆盖*：

    ```
    public boolean equals(Object obj) {
      //check type first
      List<E> list = (List<E>)obj; 
    ```

*   `Node`类是在内部私下定义的`MyList`。将它放在您的`List`界面中，它将可以公开访问。

*   最后，您通常`equals()`根据内容而不是表示来定义。您可能有多个`List`实现，只要它们以相同的顺序保存相同的数据，列表就应该被认为是相等的。在您的实现中，只有使用`head`抽象的列表是相等的。不要依赖`getHead()`，而是使用迭代器并逐个比较项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:17:13.420

`getHead()`是特定于实现的方法，它不属于接口。但这也意味着你不能将它用作接口的一部分，而必须将其作为实现类的方法来调用：

```
List<String> myList = new MyList<String>();
myList.getHead() // Wrong. Compiler error.

MyList<String> myList = new MyList<String>();
myList.getHead() // Works :)
List<String> asList = myList; // If you want to work with a List from now on 
```

在您的情况下，还有一个问题`equals`需要采用`Object`，这意味着如果您需要使用特定于实现（甚至`List`特定于）的方法，则需要进行类型检查：

```
public boolean equals(Object o)

    if (o == this)
        return true;

    if( o instanceof MyList<E> ){
        MyList<E> myList = (MyList<E>)o;
        // do MyList stuff here ...

    }
    // Things to do if you're comparing something that isn't a `MyList`
    // go here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:18:50.107

只是出于好奇，但您的列表类应该有一个`int getSize()`and`E get(int index)`方法（这通常在列表中可用）。现在，您可以检查大小是否相等，如果是，您可以遍历列表并逐个元素比较（使用`E get(int index)`方法）。

编辑：参考实现

```
public boolean equals(List<E> other) {
    boolean equal = (getSize() == other.getSize());
    for(int i = 0; i < getSize() && equal; i++) {
        equal = get(i).equals(other.get(i));
    }
    return equal;
} 
```

# c# - 睡一个新线程c#

> ID：12681113
> 
> 赞同：1
> 
> 时间：2012-10-01T21:08:30.783
> 
> 标签：c#, multithreading, sleep

所以我试图延迟从我的程序发送电子邮件。为了保持 UI 的交互性，我启动了一个新线程并在线程中调用 email 方法。有用。它发送电子邮件。但是我不知道如何让线程休眠。我尝试在实际的电子邮件方法中使用 Thread.sleep()，但它似乎不起作用。

```
Thread oThread = new Thread(new ThreadStart(() => { sendEMailThroughOUTLOOK(recipientAddress, subjectLine, finalbody); }));
                oThread.Start(); 
```

电子邮件方法..

```
public void sendEMailThroughOUTLOOK(string recipient, string subject, string body)
    {
        Thread.Sleep(60000);

        try
        {

            // Create the Outlook application.
            Outlook.Application oApp = new Outlook.Application();
            // Create a new mail item.
            Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
            // Set HTMLBody. 
            //add the body of the email
            oMsg.Body = body;

            oMsg.Subject = subject;
            // Add a recipient.
            Outlook.Recipients oRecips = (Outlook.Recipients)oMsg.Recipients;
            // Change the recipient in the next line if necessary.
            Outlook.Recipient oRecip = (Outlook.Recipient)oRecips.Add(recipient);
            oRecip.Resolve();
            // Send.
            oMsg.Send();
            // Clean up.
            oRecip = null;
            oRecips = null;
            oMsg = null;
            oApp = null;

        }//end of try block
        catch (Exception ex)
        {
        }//end of catch

        //end of Email Method
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:51:14.827

您发布的代码显然没有任何问题。但是，thread.Suspend() 是一个非常古老的 API = 自 .NET 2.0 以来它已被弃用/废弃，因为这样做并不安全。

静态方法 Thread.Sleep(N) 肯定会将调用线程挂起 N 毫秒。

澄清; 调用 Thread.Sleep 挂起**调用线程**，所以在你的示例代码中，你有；

```
public void sendEMailThroughOUTLOOK(string recipient, string subject, string body)
{
    Thread.Sleep(60000);
    ...
} 
```

对 Thread.Sleep(60000) 的调用正在挂起正在执行 sendEMailThroughOUTLOOK 方法的线程。而且由于您似乎是在它自己的线程中调用该方法，因此证明了这一点；

```
Thread oThread = new Thread(new ThreadStart(() => { sendEMailThroughOUTLOOK(recipientAddress, subjectLine, finalbody); }));
oThread.Start(); 
```

应该暂停正确的线程。

没有办法做这样的事情；

```
 Thread t = new Thread();
 t.Start();
 t.Sleep(60000); 
```

您可以启动或终止正在运行的线程，但不能休眠/挂起它。如前所述 - 此 API 已被弃用，因为它不是实现线程同步的安全方法（请参阅[http://msdn.microsoft.com/en-us/library/system.threading.thread.suspend%28v=vs.71% 29.aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.suspend%28v=vs.71%29.aspx)来解释为什么这不是一个好主意）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:57:45.803

由于您对编程有点陌生，因此我不会尝试解释所有相关细节，但我认为您向我展示了您的示例的新技巧很酷，所以如果可以的话，我想帮助您。

这不是编写此代码的*唯一*方法，但我可以告诉您这是一种合理的方法。它使用后台工作组件在发送电子邮件时保持 UI 响应。注意后台工作人员提供的事件 DoWork 和 RunWorkerCompleted 的使用。这些事件的设置发生在设计器中，这就是为什么我[为您压缩解决方案](https://docs.google.com/open?id=0B906O1xOpCtBa0JhdUwzTGR0cjA)以便您可以查看整个事情（我使用 google Drive 这样做，这是我第一次尝试公开共享 - 如果链接会像我一样为您打开，您将获得一个文件菜单，您可以从中选择下载）。

我创建了一个内部私有类并将其传递给后台工作人员。我这样做是因为我不想通过在不同线程中运行的代码访问我的 UI 组件中的数据。这并不总是会导致问题，但我发现它通常是一个很好的做法。此外，如果我想稍后重构代码，它会更容易从 DoWork 中获取这些行并将它们放在其他地方而不会大惊小怪。

在多线程编程的更一般领域 - 它是一个多方面的主题，您不需要立即了解它。 [这](http://www.albahari.com/threading/)是我最喜欢的教程（这本书也很棒）。

```
using System;
using System.ComponentModel;
using System.Windows.Forms;
using Outlook = Microsoft.Office.Interop.Outlook;

namespace Emailer
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void SendButton_Click(object sender, EventArgs e)
        {
            this.sendEmailBackgroundWorker.RunWorkerAsync(new _Email
            {
                Recipient = this.recipientTextBox.Text,
                Subject = this.subjectTextBox.Text,
                Body = this.emailToSendTextBox.Text
            });
        }

        private class _Email
        {
            public string Body { get; set; }
            public string Subject { get; set; }
            public string Recipient { get; set; }
        }

        private void sendEmailBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            var email = (_Email)e.Argument;

            try
            {
                Outlook.Application oApp = new Outlook.Application();
                Outlook.MailItem oMsg = (Microsoft.Office.Interop.Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);
                oMsg.Body = email.Body;
                oMsg.Subject = email.Subject;
                Outlook.Recipients oRecips = (Outlook.Recipients)oMsg.Recipients;
                Outlook.Recipient oRecip = (Outlook.Recipient)oRecips.Add(email.Recipient);
                oRecip.Resolve();
                oMsg.Send();
                oRecip = null;
                oRecips = null;
                oMsg = null;
                oApp = null;
            }
            catch (Exception ex)
            {
                e.Result = ex;
            }

            e.Result = true;
        }

        private void sendEmailBackgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            string message;

            if (e.Result is Exception) 
                message = "Error sending email: " + (e.Result as Exception).Message;
            else if (e.Result is bool && (bool)e.Result)
                message = "Email is sent";
            else 
                throw new Exception("Internal Error: not expecting " + e.Result.GetType().FullName);

            MessageBox.Show(message);
        }
    }
} 
```

# android - 如何将文本文件/压缩文件从 Restful 服务器发送到 Android 客户端

> ID：12681114
> 
> 赞同：0
> 
> 时间：2012-10-01T21:08:31.303
> 
> 标签：android, web-services, rest

我想再次问我的问题。我正在开发一个可以从 Android 访问的宁静 Web 服务，但自 2 周以来我遇到了一个问题。我想编写一个服务，它从数据库中获取一些字节数组并将这些写入一个文件，以便我可以从 android 使用这个服务。使用 Android，我想获取此文件，然后使用此字节绘制图形。

请给我一些提示好吗！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:30:36.107

在您的情况下，Web API 是一个不错的选择，因为使用它非常简单，您只需要发送一个简单的流。然后在您的应用程序中创建自己的 RestClient 以使用 Web 服务，这里有一些使用 HttpClient 的代码来做这：

```
public void executeRequest(HttpUriRequest request, String url)  {
    HttpClient client = new DefaultHttpClient();
    HttpResponse httpResponse;

    try{
       httpResponse = client.execute(request);
       responseCode = httpResponse.getStatusLine().getStatusCode();

       HttpEntity entity = httpResponse.getEntity();
       if (entity != null)
       {
           InputStream in = entity.getContent();
           response = convertStreamToString(in);
           in.close();
       }
    } catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    } catch (IOException e) {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
    }       
}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

有了这个，您可以传递一个 GET 请求以获取您需要的数据，如果您需要向查询字符串添加一些额外的参数，这也应该很好：

```
public void Execute(RequestMethod method) throws Exception
    {

                String combinedParams = "";
                if  (!params.isEmpty())
                {
                    combinedParams += "?";

                    for (NameValuePair p : params)
                    {
                        String paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");

                        if  (combinedParams.length() > 1)
                            combinedParams += "&" + paramString;
                        else
                            combinedParams += paramString;
                    }
                }

                HttpGet request = new HttpGet(url + combinedParams);

                for (NameValuePair h : headers)
                    request.addHeader(h.getName(),h.getValue());

                executeRequest(request, url); 
```

# jpa - JPA javax.persistence.metamodel.ListAttribute

> ID：12681118
> 
> 赞同：0
> 
> 时间：2012-10-01T21:08:52.393
> 
> 标签：jpa, openjpa

我正在运行 JPA 测试，并且在本文结尾处不断收到错误消息。我不知道为什么会收到此错误，但是在 JUnit 中进行测试时没有收到此错误。我知道这可能是一个通用信息和一个广泛的问题，但如果有一个简单的答案，我将不胜感激。

这是我的 3 个类文件：

```
package menu.entity;

import static javax.persistence.CascadeType.ALL;

import java.io.Serializable;
import javax.persistence.*;

import java.math.BigDecimal;
import java.util.List;

@IdClass(menu.entity.FeatureKey.class)
@Entity
@Table(name="FEATURES")
public class Feature implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(name="PROD_ID", 
        nullable = false, 
        insertable = false, 
        updatable = false,
        precision=22)
private BigDecimal prodId;

@Id
@Column(name="FEATURE", 
        nullable = false, 
        insertable = false, 
        updatable = false,
        precision=22)
private BigDecimal feature;

@Column(name="FEATURE_NAME", length=50)
private String featureName;

@Column(name="FEATURE_PATH", length=100)
private String featurePath;

@OneToMany(cascade=ALL, mappedBy="featureObj")
private List<Function> functions;

@ManyToOne
@JoinColumns({
    @JoinColumn(name="PROD_ID", referencedColumnName="PROD_ID")
    })
private Product product;

public Feature() {
}

public BigDecimal getFeature() {
    return this.feature;
}

public void setFeature(BigDecimal feature) {
    this.feature = feature;
}

public String getFeatureName() {
    return this.featureName;
}

public void setFeatureName(String featureName) {
    this.featureName = featureName;
}

public String getFeaturePath() {
    return this.featurePath;
}

public void setFeaturePath(String featurePath) {
    this.featurePath = featurePath;
}

public BigDecimal getProdId() {
    return this.prodId;
}

public void setProdId(BigDecimal prodId) {
    this.prodId = prodId;
}

public Product getProduct() {
    return product;
}

public void setProduct(Product product) {
    this.product = product;
}

public List<Function> getFunctions() {
    return functions;
}

public void setFunctions(List<Function> functions) {
    this.functions = functions;
}

}

package menu.entity;

import java.math.BigDecimal;
import javax.annotation.Generated;
import javax.persistence.metamodel.ListAttribute;
import javax.persistence.metamodel.SingularAttribute;
import javax.persistence.metamodel.StaticMetamodel;

@Generated(value="Dali", date="2012-10-01T17:03:26.750-0400")
@StaticMetamodel(Feature.class)
public class Feature_ {
public static volatile SingularAttribute<Feature, BigDecimal> prodId;
public static volatile SingularAttribute<Feature, BigDecimal> feature;
public static volatile SingularAttribute<Feature, String> featureName;
public static volatile SingularAttribute<Feature, String> featurePath;
public static volatile ListAttribute<Feature, Function> functions;
public static volatile SingularAttribute<Feature, Product> product;
}

package menu.entity;

import static javax.persistence.CascadeType.ALL;

import java.io.Serializable;
import javax.persistence.*;

import java.math.BigDecimal;
import java.util.List;

@IdClass(menu.entity.FunctionKey.class)
@Entity
@Table(name="FUNCTIONS")
public class Function implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@Column(name="PROD_ID", 
        nullable = false, 
        insertable = false, 
        updatable = false,
        precision=22)
private BigDecimal prodId;

@Id
@Column(name="FEATURE", 
        nullable = false, 
        insertable = false, 
        updatable = false,
        precision=22)
private BigDecimal feature;

@Id
@Column(name="FUNC", 
        nullable = false, 
        insertable = false, 
        updatable = false,
        precision=22)
private BigDecimal func;

@Column(name="FUNC_NAME", length=50)
private String funcName;

@Column(name="FUNC_PATH", length=80)
private String funcPath;

@OneToMany(cascade=ALL, mappedBy="function")
private List<Task> tasks;

@ManyToOne
@JoinColumns({
    @JoinColumn(name="PROD_ID", referencedColumnName="PROD_ID"),
    @JoinColumn(name="FEATURE", referencedColumnName="FEATURE")
    })
private Feature featureObj;

public Function() {
}

public BigDecimal getFeature() {
    return this.feature;
}

public void setFeature(BigDecimal feature) {
    this.feature = feature;
}

public BigDecimal getFunc() {
    return func;
}

public void setFunc(BigDecimal func) {
    this.func = func;
}

public String getFuncName() {
    return this.funcName;
}

public void setFuncName(String funcName) {
    this.funcName = funcName;
}

public String getFuncPath() {
    return this.funcPath;
}

public void setFuncPath(String funcPath) {
    this.funcPath = funcPath;
}

public BigDecimal getProdId() {
    return this.prodId;
}

public void setProdId(BigDecimal prodId) {
    this.prodId = prodId;
}

public Feature getFeatureObj() {
    return featureObj;
}

public void setFeatureObj(Feature featureObj) {
    this.featureObj = featureObj;
}

public List<Task> getTasks() {
    return tasks;
}

public void setTasks(List<Task> tasks) {
    this.tasks = tasks;
}

} 
```

问候，

保罗

这是完整的堆栈跟踪：

> java.lang.IllegalArgumentException：在 org.apache.openjpa.persistence.meta.AbstractManagedType.notFoundException(AbstractManagedType.java:734) 在 org.apache.openjpa.persistence 的 menu.entity.Feature 中找不到任何属性“功能”。 meta.AbstractManagedType.getAttribute(AbstractManagedType.java:237) 在 org.apache.openjpa.persistence.meta.AbstractManagedType.getAttribute(AbstractManagedType.java:461) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.populate(MetamodelImpl. java:311) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.find(MetamodelImpl.java:226) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.instantiate(MetamodelImpl.java:257) 在 org.apache .openjpa.persistence.meta.MetamodelImpl.(MetamodelImpl.java:91) 在 org.apache.openjpa.persistence.EntityManagerFactoryImpl。getMetamodel(EntityManagerFactoryImpl.java:346) 在 org.apache.openjpa.persistence.EntityManagerFactoryImpl.getCriteriaBuilder(EntityManagerFactoryImpl.java:333) 在 org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:1649) 在 org.apache .openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:101) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke 的 menu.ejb.RequestBean.init(RequestBean.java:60) (NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.jboss.weld.util.reflection。 SecureReflections$13.work(SecureReflections.java:267) 在 org.jboss.weld.util。org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137) 的反射.SecureReflectionAccess.run(SecureReflectionAccess.java:52) org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections. java:263) 在 org.jboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) 在 org.jboss.weld 的 org.jboss.weld.introspector.jlr.WeldMethodImpl.invoke(WeldMethodImpl.java:174) .bean.ManagedBean$ManagedBeanInjectionTarget.postConstruct(ManagedBean.java:174) at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:294) at org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl .java:68) 在 org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:599) 在 org.jboss.weld.manager。BeanManagerImpl.getReference(BeanManagerImpl.java:665) at org.jboss.weld.injection.FieldInjectionPoint.inject(FieldInjectionPoint.java:136) at org.jboss.weld.util.Beans.injectBoundFields(Beans.java:686) at org .jboss.weld.util.Beans.injectFieldsAndInitializers(Beans.java:695) at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1$1.proceed(ManagedBean.java:161) at org.jboss.weld.injection.InjectionContextImpl .run(InjectionContextImpl.java:48) at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1.work(ManagedBean.java:157) at org.jboss.weld.bean.ManagedBean$FixInjectionPoint.run(ManagedBean.java: 131) 在 org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:293) 在 org.jboss.weld.context 的 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.inject(ManagedBean.java:153) .AbstractContext.get(AbstractContext.java:103) 在 org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) 在 org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java: 79) 在 menu.web.MenuManager$Proxy$_$$*WeldClientProxy.getMenuItemsS(MenuManager$Proxy$*$$_WeldClientProxy.java) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java .lang.reflect.Method.invoke(Method.java:597) at javax.el.BeanELResolver.getValue(BeanELResolver.java:87) at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 在 org.apache.el.parser.AstValue.getValue(AstValue.java:169) 在 org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl. java:189) 在 com.sun.faces.facelets.el 的 org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)。TagValueExpression.getValue(TagValueExpression.java:109) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) 在 javax.faces.component .UIOutput.getValue(UIOutput.java:169) 在 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java :355) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) 在 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) 在 javax.faces.component.UIComponent。在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 javax.encodeAll(UIComponent.java:1786)。faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) 在 com.sun.faces.application.view.MultiViewHandler.renderView( MultiViewHandler.java:125) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 com.sun.faces.lifecycle.RenderResponsePhase .execute(RenderResponsePhase.java:121) 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 在 javax。 faces.webapp.FacesServlet.service(FacesServlet.java:594) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) 在 org.apache.catalina.core.StandardContextValve 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) .invoke(StandardContextValve.java:169) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org. org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 中的 apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:118) 在 org.apache.coyote.http11 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)。AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 307) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662) 2012 年 10 月 2 日下午 12:50:22 com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException 严重：错误渲染视图 [/menu.xhtml] javax.el.E​​LException: /menu.xhtml @26 ,51 value="#{menuManager.menuItemsS}"：在 com.sun.faces.facelets.el 上的 menu.web.MenuManager$Proxy$_$$_WeldClientProxy 类型上读取“menuItemsS”时出错。TagValueExpression.getValue(TagValueExpression.java:114) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) 在 javax.faces.component .UIOutput.getValue(UIOutput.java:169) 在 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java :355) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) 在 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) 在 javax.faces.component.UIComponent。在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 javax.encodeAll(UIComponent.java:1786)。faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) 在 com.sun.faces.application.view.MultiViewHandler.renderView( MultiViewHandler.java:125) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 com.sun.faces.lifecycle.RenderResponsePhase .execute(RenderResponsePhase.java:121) 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 在 javax。 faces.webapp.FacesServlet.service(FacesServlet.java:594) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) 在 org.apache.catalina.core.StandardContextValve 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) .invoke(StandardContextValve.java:169) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org. org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 中的 apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:118) 在 org.apache.coyote.http11 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)。AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 307) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662) 原因：org.jboss.weld.exceptions.WeldException: WELD-000049 无法调用 [方法] @PostConstruct private menu.ejb.RequestBean.init() on menu.ejb.RequestBean@19ca9ff at org。 jboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:400) 在 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.postConstruct(ManagedBean.java:174) 在 org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:68) 在 org.jboss.weld.manager 的 org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:294) .BeanManagerImpl.getReference(BeanManagerImpl.java:599) 在 org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:665) 在 org.jboss.weld.injection.FieldInjectionPoint.inject(FieldInjectionPoint.java:136) 在org.jboss.weld.util.Beans.injectBoundFields(Beans.java:686) 在 org.jboss.weld.util.Beans.injectFieldsAndInitializers(Beans.java:695) 在 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1 $1.proceed(ManagedBean.java:161) at org.jboss.weld.injection.InjectionContextImpl.run(InjectionContextImpl.java:48) at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1.work(ManagedBean.java:157) 在 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.inject(ManagedBean.java:153) 在 org.jboss.weld 的 org.jboss.weld.bean.ManagedBean$FixInjectionPoint.run(ManagedBean.java:131) .bean.ManagedBean.create(ManagedBean.java:293) 在 org.jboss.weld.context.AbstractContext.get(AbstractContext.java:103) 在 org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java :90) 在 org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) 在 menu.web.MenuManager$Proxy$_$$get(AbstractContext.java:103) 在 org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) 在 org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79)在 menu.web.MenuManager$Proxy$_$$get(AbstractContext.java:103) 在 org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90) 在 org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79)在 menu.web.MenuManager$Proxy$_$$*WeldClientProxy.getMenuItemsS(MenuManager$Proxy$* $$_WeldClientProxy.java) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke( DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 javax.el.BeanELResolver.getValue(BeanELResolver.java:87) 在 com.sun.faces.el.DemuxCompositeELResolver。*getValue(DemuxCompositeELResolver.java:176) 在 com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 在 org.apache.el.parser.AstValue.getValue(AstValue.java:169) 在 org.apache .el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189) at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50) at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java :109) ... 34 更多原因：sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect 的 java.lang.reflect.InvocationTargetException。 org.jboss.weld 的 java.lang.reflect.Method.invoke(Method.java:597) 的 DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)。org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) 上 org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation 上的 util.reflection.SecureReflections$13.work(SecureReflection.java:267) (SecureReflectionAccess.java:137) 在 org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263) 在 org.jboss.weld.introspector.jlr.WeldMethodImpl.invoke(WeldMethodImpl.java:174) 在org.jboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) ... 63 更多原因：java.lang.RuntimeException: public static volatile javax.persistence.metamodel.ListAttribute menu.entity.Featurejava:52) 在 org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263) 在 org.jboss. .weld.introspector.jlr.WeldMethodImpl.invoke(WeldMethodImpl.java:174) at org.jboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) ... 63 更多原因：java.lang.RuntimeException： public static volatile javax.persistence.metamodel.ListAttribute menu.entity.Featurejava:52) 在 org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263) 在 org.jboss. .weld.introspector.jlr.WeldMethodImpl.invoke(WeldMethodImpl.java:174) at org.jboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) ... 63 更多原因：java.lang.RuntimeException： public static volatile javax.persistence.metamodel.ListAttribute menu.entity.Featurejboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) ... 63 更多原因：java.lang.RuntimeException: public static volatile javax.persistence.metamodel.ListAttribute menu.entity.Featurejboss.weld.bean.AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) ... 63 更多原因：java.lang.RuntimeException: public static volatile javax.persistence.metamodel.ListAttribute menu.entity.Feature*.functions at org.apache.openjpa.persistence.meta.MetamodelImpl.populate(MetamodelImpl.java:330) at org.apache.openjpa.persistence.meta.MetamodelImpl.instantiate(MetamodelImpl.java:257) at org.apache.openjpa .persistence.meta.MetamodelImpl.find(MetamodelImpl.java:226) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.(MetamodelImpl.java:91) 在 org.apache.openjpa.persistence.EntityManagerFactoryImpl.getMetamodel(EntityManagerFactoryImpl. java:346) at org.apache.openjpa.persistence.EntityManagerFactoryImpl.getCriteriaBuilder(EntityManagerFactoryImpl.java:333) at org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:1649) at org.apache.openjpa.persistence .EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:101) 在 menu.ejb.RequestBean.init(RequestBean.java:60) ... 73 更多 2012 年 10 月 2 日 12:50:22 PM org.apache.catalina.core.StandardWrapperValve 在路径 [/jsfCDITest] 的上下文中为 servlet [Faces Servlet] 调用 SEVERE: Servlet.service()抛出异常 [WELD-000049 Unable to call [method] @PostConstruct private menu.ejb.RequestBean.init() on menu.ejb.RequestBean@19ca9ff] 根本原因 java.lang.RuntimeException: public static volatile javax.persistence.metamodel .ListAttribute menu.entity.Feature_.functions at org.apache.openjpa.persistence.meta.MetamodelImpl.populate(MetamodelImpl.java:330) at org.apache.openjpa.persistence.meta.MetamodelImpl.instantiate(MetamodelImpl.java:257 ) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.find(MetamodelImpl.java:226) 在 org.apache.openjpa.persistence.meta.MetamodelImpl.(MetamodelImpl.java:91) 在 org.org.apache.openjpa.persistence.EntityManagerFactoryImpl.getCriteriaBuilder(EntityManagerFactoryImpl.java:333) 在 org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl. java:1649) 在 org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:101) 在 menu.ejb.RequestBean.init(RequestBean.java:60) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org. jboss.weld.util.reflection.SecureReflections 13 美元。在 org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137) 的 org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52) 工作(SecureReflections.java:267)在 org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263) 在 org.jboss.weld.introspector.jlr.WeldMethodImpl.invoke(WeldMethodImpl.java:174) 在 org.jboss.weld.bean .AbstractClassBean.defaultPostConstruct(AbstractClassBean.java:398) at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.postConstruct(ManagedBean.java:174) at org.jboss.weld.bean.ManagedBean.create(ManagedBean.java:294 ) 在 org.jboss.weld.manager.BeanManagerImpl 的 org.jboss.weld.context.unbound.DependentContextImpl.get(DependentContextImpl.java:68)。getReference(BeanManagerImpl.java:599) at org.jboss.weld.manager.BeanManagerImpl.getReference(BeanManagerImpl.java:665) at org.jboss.weld.injection.FieldInjectionPoint.inject(FieldInjectionPoint.java:136) at org.jboss .weld.util.Beans.injectBoundFields(Beans.java:686) at org.jboss.weld.util.Beans.injectFieldsAndInitializers(Beans.java:695) at org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1$1.proceed (ManagedBean.java:161) 在 org.jboss.weld.injection.InjectionContextImpl.run(InjectionContextImpl.java:48) 在 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget$1.work(ManagedBean.java:157) 在 org .jboss.weld.bean.ManagedBean$FixInjectionPoint.run(ManagedBean.java:131) 在 org.jboss.weld.bean.ManagedBean$ManagedBeanInjectionTarget.inject(ManagedBean.java:153) 在 org.jboss.weld.bean。org.jboss.weld.context.AbstractContext.get(AbstractContext.java:103) 上的 ManagedBean.create(ManagedBean.java:293) org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:90)在 org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) 在 menu.web.MenuManager$Proxy$_$$*WeldClientProxy.getMenuItemsS(MenuManager$Proxy$*$$_WeldClientProxy.java) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java .lang.reflect.Method.invoke(Method.java:597) at javax.el.BeanELResolver.getValue(BeanELResolver.java:87) at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176) at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203) 在 org.apache.el.parser.AstValue.getValue(AstValue.java:169) 在 org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl. java:189) 在 com.sun.faces.facelets.el 的 org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)。TagValueExpression.getValue(TagValueExpression.java:109) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) 在 javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) 在 javax.faces.component .UIOutput.getValue(UIOutput.java:169) 在 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java :355) 在 com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164) 在 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875) 在 javax.faces.component.UIComponent。在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 javax.encodeAll(UIComponent.java:1786)。faces.component.UIComponent.encodeAll(UIComponent.java:1782) 在 com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402) 在 com.sun.faces.application.view.MultiViewHandler.renderView( MultiViewHandler.java:125) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288) 在 com.sun.faces.lifecycle.RenderResponsePhase .execute(RenderResponsePhase.java:121) 在 com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) 在 com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 在 javax。 faces.webapp.FacesServlet.service(FacesServlet.java:594) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) 在 org.apache.catalina.core.StandardContextValve 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) .invoke(StandardContextValve.java:169) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org. org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 中的 apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve. java:118) 在 org.apache.coyote.http11 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)。AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 307) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662)concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:57:26.707

我相信抛出 RuntimeException 是因为发生了另一个异常。应该将其他异常的堆栈跟踪打印到控制台。

# sql - 在 oracle 查询中添加“distinct”关键字会无缘无故地消除查询性能

> ID：12681123
> 
> 赞同：3
> 
> 时间：2012-10-01T21:09:08.567
> 
> 标签：sql, performance, oracle, optimization, cbo

我对在 Oracle 10 数据库中看到的东西感到非常困惑。

我有以下查询。

```
select
t2.duplicate_num
from table1 t1, table2 t2,

( 
   select joincriteria_0 from intable1 it1, intable2 it2 
   where it2.identifier in (4496486,5911382) 
   and it1.joincriteria_0 = it2.joincriteria_0 
   and it1.filter_0 = 1 
) tt

where t1.joincriteria_0 = tt.joincriteria_0
and t2.joincriteria_1 = t1.joincriteria_1
and t2.filter_0 = 3
and t2.filter_1 = 1
and t2.filter_2 not in (48020) 
```

对我来说，这似乎并没有什么特别之处，以下是来自 autotrace 的基线性能数据：

CR_GETS：318

中央处理器：3

行数：33173

现在，如果我将“DISTINCT”关键字添加到查询中（例如“选择不同的 t2.duplicate_num ...”），就会发生这种情况

CR_GETS：152921

中央处理器：205

行数：305

查询计划没有改变，但逻辑 IO 增长了 500 倍。我原以为 CPU 只会上升，而逻辑 IO 基本没有变化。

最终结果是使用 distinct 关键字运行速度慢 10-100 倍的查询。我可以将代码放入应用程序中，这将使结果集在很短的时间内变得不同。这有什么意义？特别是在查询计划没有改变的情况下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:15:18.143

这表明某处缺少索引。这也意味着，您的原始查询没有 distinct 子句没有优化。使用“distinct”也无法优化，因此查询计划保持不变。由于全表扫描，未优化查询的性能差异很大。

# java - 变量类型的问题

> ID：12681124
> 
> 赞同：0
> 
> 时间：2012-10-01T21:09:09.893
> 
> 标签：java, floating-point, formatting, biginteger, bigdecimal

我基本上汇总了一个非常大的数字。我正在使用浮点数，因为我想保持精度水平，但它只能达到 100k。这是一些示例输出。

```
 x 361 y 800 width 530 h 800 intensity 93581.52477873862
 x 362 y 800 width 530 h 800 intensity 93829.5759344697
 x 363 y 800 width 530 h 800 intensity 94079.55780857801
 x 364 y 800 width 530 h 800 intensity NaN
 x 365 y 800 width 530 h 800 intensity NaN
 x 366 y 800 width 530 h 800 intensity NaN 
```

我试过双倍等，但没有运气！有人对最好使用什么有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:20:11.933

`float`可以“高于 10k”，并且`double`始终是首选。如果数字变得非常大并且您需要所有数字，请使用`BigDecimal`.

如果你不能超过 10k，那么你的计算中有一些“其他”问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:19:57.877

尝试[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)。它保持您想要的精度（例如小数位数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:27:36.627

浮动可以比这更高 - 例如尝试：

```
 float x = 1000000000000000000000000000000000000.0f; 
    System.out.println(x);
    System.out.println(x*x); 
```

输出：

```
1.0E36
Infinity 
```

所以还有其他问题。请注意，使用非常大的数字会导致`Infinity`not `NaN`。

您的代码是否无意中将零除以零或类似的东西？您正在执行的实际计算是什么？

另请参阅[此问题](https://stackoverflow.com/questions/2618059/in-java-what-does-nan-mean)以获取有关 NaN 含义的一些信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:29:46.437

您遇到的问题与您认为的不同。

事实 1：浮点数可以远大于 10k。大约 3400000000000000000000000000000000000k。

事实 2：浮点加法溢出导致无穷大，而不是 NaN（非数字）。

你在某个地方的数学有错误。x 364 处的计算会导致一些算术错误，这会弄乱你的总和。精度不是问题。

# regex - 正则表达式：在记事本++中切换单词位置

> ID：12681127
> 
> 赞同：4
> 
> 时间：2012-10-01T21:09:19.237
> 
> 标签：regex, notepad++

我有以下模式的文本：

```
1 NAME word1 word2 wordn /words/
...
...
1 NAME word1 word2 wordn /words/ 
```

我需要一个正则表达式，将其重新排序为：

```
1 NAME /words/ word1 word2 wordn
...
...
1 NAME /words/ word1 word2 wordn 
```

我正在尝试这样做，`notepad++`但无法找出正则表达式来匹配*n*个单词，直到字符`/`

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T22:22:05.360

**寻找：** `([^ ]+) ([^/]+)/([^/]+)/`

*   `([^ ]+)`将“名称”作为除空格以外的任何内容匹配到组中`\1`（后跟空格）
*   `([^/]+)`将“所有单词”匹配为任何内容，直到第一个`/`进入组`\2`
*   `/([^/]+)/`匹配组之间`/`和`/`组中的任何内容`\3`

**用。。。来代替：** `/\3/ \2\1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:25:42.333

尝试

```
(?<=1 NAME )(\S+ ){n}/words/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T12:36:53.987

你可以在 MS Word 中做到这一点（我认为在 Visual Studio 中也是如此）。这是在[MS Word中的完成方式](http://office.microsoft.com/en-us/word-help/find-and-replace-text-by-using-regular-expressions-advanced-HA102350661.aspx#_Toc286834986)

```
Match String: (<*>) (<*>) (<*>) (<*>) (<*>) (<*>)
Replace String: \1 \2 \6 \3 \4 \5 
```

在 MSWord 中，它并没有具体说明正则表达式，但它可能会在后端使用它。请注意，它有匹配 \word\ 的问题，即以反斜杠 () 开头的单词。您可能想从单词中删除反斜杠以确保它有效。

# uninstallation - 如何卸载/删除 Visual Studio SP1

> ID：12681131
> 
> 赞同：34
> 
> 时间：2012-10-01T21:09:25.540
> 
> 标签：uninstallation, visual-studio-2010

我有带有 Microsoft Visual Studio 2010 的 Windows 7 64 位和 SP1 的后续安装。

如果我打开控制面板 | 程序和功能，我看到 Visual Studio 2010 的 3 个条目，第三个是一个 ADO.Net。

我尝试先卸载 SP1，但不知何故失败了。它要求我放入 Visual Studio 2010 安装盘。遗憾的是，完成后，SP1 留在了程序和功能列表中。

我尝试卸载 VS2010，它卸载得很好，但留下了 SP1 的条目。我尝试卸载 SP1，但收到一条消息说我必须安装 VS2010，所以我咬住嘴唇，铲除我的愤怒，重新安装了 VS2010。我只收到了一个安装 SP1 的选项，我做到了。我想你可以考虑重新申请。

程序和功能的刷新再次显示 3 个条目。我能够卸载 SP1，至少该选项在那里并且我能够完成卸载。我将 VS2010 磁盘放在 CD 托盘中。可悲的是，关闭控制面板程序和功能（随后是 CPPF）并重新打开它，很好地显示了 Microsoft 的错误投资 SP1。选择卸载/更改条目会出现安装 SP1 的对话框。

看起来 SP1 可能会部分消失，但显然不是完全消失。该条目，与该条目绑定的可执行文件/DLL 很好地存在。

如何删除/清理/删除/nuke VS2010 SP1，包括 CPPF 和它安装的任何其他垃圾？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-08-02T13:31:57.200

我刚刚使用以下参数运行了 VS2010 SP 1 的 Web 安装程序。这迫使它卸载并让我克服了阻塞问题：

VS10sp1-KB983509.exe /uninstall /force

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-09-28T04:35:53.483

我尝试了上面的 James 解决方案，但仍然无法正常工作，并且一直需要安装 CD。经过进一步搜索，我发现这个解决方案对我有用：

[微软删除 Visual Studio 2010 的工具](http://blogs.msdn.com/b/heaths/archive/2010/08/23/visual-studio-2010-uninstall-utility.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-03T16:03:23.600

随着生活的继续，我选择了一个可能不是最好的解决方案，但它是一个解决方案，所以这就是我所做的。

我找到了一篇文章，其中谈到了从控制面板中删除条目 | 程序和特点。 [http://www.roelvanlisdonk.nl/?p=1179](http://www.roelvanlisdonk.nl/?p=1179)。然后我做了其他步骤。

首先从链接，因为我有一个 Windows 7 64 位系统，我去了 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall

在注册表中。有两个位置，一个是名称完全拼写的明显位置，另一个是 DisplayName 属性设置为作为 GUIID 一部分的产品名称。我删除了两个条目。以 nice 名称作为键的主条目是从列表中删除程序 ID 条目的条目。

我注意到几个产品共享相同的 InstallSource。那是 bizarro（超人前传的摇滚，遗憾地结束了），都在 C:\Windows\TEMP 文件夹中。由于实际的安装程序位于 ProgramData 文件夹下，我不确定 TEMP 文件夹条目的作用。

我删除了 ProgramData 部分，但留下了 C:\Windows\TEMP，虽然我仍在考虑清理它，但要小心。

然后我删除了所有其他离开运行时的 VS2010 组件。顺便说一句，不要忘记删除 Premptive 的昂贵且基于最终用户安装的定价产品。在 Dotfuscator 下更进一步（名称排序升序）......

那或多或少清理了一些东西。我不确定什么使用 VS2010 运行时，所以我离开了。我假设这是安装在 VS2010 文件夹中的内容。

附带评论：我仍然觉得注册表中的 Microsoft 遵循 ...\Software\Microsoft\ 条目很奇怪。他们不会在其他任何地方遵循这一点。为什么在那儿？

详细信息：在注册表中，信息是：

{5AB7D739-1735-3A9E-BE73-C43507CB4E6F} 卸载字符串：MsiExec.exe /X{5AB7D739-1735-3A9E-BE73-C43507CB4E6F} 安装源：C:\Windows\TEMP\Microsoft Visual Studio 2010 Service Pack 1_10.0.40219\安装位置：C:\ProgramData\VS\vs10sp1\SetupCache\ 卸载路径：C:\ProgramData\VS\vs10sp1\SetupCache\ 卸载字符串：C:\ProgramData\VS\vs10sp1\SetupCache\Setup.exe

使用 C:\Windows\TEMP...40219 文件夹的共享产品： Microsoft SQL Server 2008 R2 Data-Tier Application Framework Microsoft SQL Server 2008 R2 Data-Tier Application Project Microsoft SQL Server 2008 R2 Management Objects Microsoft SQL Server 2008 R2 Transact-SQL语言服务 Microsoft SQL Server 系统 CLR 类型 Microsoft Visual C++ 2010 x86 运行时 - 10.0.40219 Microsoft Visual F# 2.0 运行时

其他产品使用的路径：

C:\Windows\TEMP\Microsoft Visual Studio 2010 服务包 1_10.0.40219\ C:\Windows\TEMP\Microsoft Visual Studio 2010 服务包 1_10.0.40219\Dotfuscator\

共享相同 C:\Windows\TEMP 文件夹条目 (InstallSource) 的多个密钥中的 2 个：InstallSource {09C52940-A4D1-4409-A7CC-1AAE630CF578} {1AA5BD63-6614-44B2-88A7-605191EDB835}

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-03T15:17:57.250

[MSDN 论坛](http://social.msdn.microsoft.com/Forums/vstudio/en-US/98dfa323-323d-4ecd-a955-fd0014dec92e/uninstalling-visual-studio-2010)上的这个答案解释了手动删除的顺序，但更重要的是，它还链接到 Microsoft FixIt [VS2010 卸载实用程序](http://go.microsoft.com/fwlink/?LinkID=150979)，这是我能够摆脱 SP1 的唯一方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-04T15:45:27.993

这里没有一个解决方案对我删除 VS 2010 SP1 有效。visual stiduio 2010 卸载实用程序可以很好地删除除 VS 2010 SP1 之外的所有内容。

要删除 SP1，我去了设置缓存并按如下方式运行设置： C:\ProgramData\VS\vs10sp1\SetupCache>setup /uninstall /force

# facebook - facebook 从哪里提取我的规范网址？

> ID：12681133
> 
> 赞同：0
> 
> 时间：2012-10-01T21:09:31.543
> 
> 标签：facebook, sharing, canonical-link

有问题的页面： [https ://play.decksi.com/share/45431f8d](https://play.decksi.com/share/45431f8d)

faceook 调试器链接： [https ://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Fplay.decksi.com%2Fshare%2F45431f8d](https://developers.facebook.com/tools/debug/og/object?q=https%3A%2F%2Fplay.decksi.com%2Fshare%2F45431f8d)

出于某种原因，facebook 将我们的应用页面 ID 作为规范 url，尽管它根本不在页面上......

我在沙盒实例上有完全相同的视图，它表现得很好..

直到今天这一切都很好（我今天注意到了）......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:25:17.940

[Facebook 的调试工具](https://developers.facebook.com/tools/debug)已经显示了为什么它选择了 apps.facebook.com 页面作为规范 URL，但如果您需要手动检查：

它位于该页面的 HTML 源代码中：

```
$curl 'https://play.decksi.com/share/45431f8d' 
<!DOCTYPE html>
<html class="decksi_switchboard">
<head>
<meta property="og:title" content="Decksi" />
<meta property="og:type" content="activity" /> 
```

* * *

```
<meta property="og:url" content="https://apps.facebook.com/playdecksi" /> 
```

* * *

```
<meta property="og:image" content="https://play.decksi.com/Content/img/decksi_logo_bg.png" />
<meta property="og:site_name" content="Decksi" />
<meta property="fb:admins" content="100002131000570" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:40:47.603

啊! 所以答案实际上是，我们正在对这些内容进行地理控制（加拿大），当然 facebook 是从美国服务器上访问的！所以我的卷发看起来不像你的，瞧。– Monsters X 8 秒前编辑

# c# - setExpressCheckout 和 SSL/TLS 错误

> ID：12681135
> 
> 赞同：11
> 
> 时间：2012-10-01T21:09:46.820
> 
> 标签：c#, asp.net, paypal, paypal-sandbox

我正在尝试开发一个简单的应用程序，使用户能够通过 Paypal API 从网站购买服务。此应用程序使用 C# 在 ASP.NET 上运行。

我在尝试让 Paypal API 进行合作时运气不佳。我调用的方法是带有所有适当变量的 SetExpressCheckout。

我进行了研究，发现由于我在 Localhost 中进行测试，它可能会影响 Paypal 与应用程序通信的能力。所以接下来我尝试通过一个开放端口和一个可公开访问的 IP 地址访问我的应用程序，但是在调用 SetExpressCheckout 时会发生同样的错误。

这是错误：

```
Exception Details: System.Net.WebException: The request was aborted: Could not create SSL/TLS secure channel.

Source Error: 

Line 1790:        [return: System.Xml.Serialization.XmlElementAttribute("SetExpressCheckoutResponse", Namespace="urn:ebay:api:PayPalAPI")]
Line 1791:        public SetExpressCheckoutResponseType SetExpressCheckout([System.Xml.Serialization.XmlElementAttribute(Namespace="urn:ebay:api:PayPalAPI")] SetExpressCheckoutReq SetExpressCheckoutReq) {
Line 1792:            object[] results = this.Invoke("SetExpressCheckout", new object[] {
Line 1793:                        SetExpressCheckoutReq});
Line 1794:            return ((SetExpressCheckoutResponseType)(results[0]));

Source File: c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\anan_p2\730602d6\31a8d74e\App_WebReferences.c8vgyrf8.2.cs    Line: 1792 
```

我还尝试使用 OpenSSL 生成证书并将它们上传到 Paypal 帐户的加密卖家选项，但仍然没有效果。

非常感谢您阅读我的问题！

更新：这里要求的是正在使用的代码。

```
 String hostingOn = ConfigurationManager.AppSettings["default_site_url"];
        reqDetails.ReturnURL = hostingOn + "marketplace_confirm.aspx";
        reqDetails.CancelURL = hostingOn + "marketplace.aspx";
        reqDetails.NoShipping = "1";
        reqDetails.ReqConfirmShipping = "0";

        reqDetails.OrderTotal = new BasicAmountType()
        {
            currencyID = CurrencyCodeType.CAD,
            Value = payment_amt.Value,
        };

        SetExpressCheckoutReq req = new SetExpressCheckoutReq()
        {
            SetExpressCheckoutRequest = new SetExpressCheckoutRequestType()
            {
                Version = UtilPayPalAPI.Version,
                SetExpressCheckoutRequestDetails = reqDetails
            }

        };

        PayPalAPIAASoapBinding paypal = new PayPalAPIAASoapBinding();

        paypal.SetExpressCheckout(req); 
```

我还使用[https://api-aa-3t.paypal.com/2.0/](https://api-aa-3t.paypal.com/2.0/) url 来访问 API

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-02-09T09:42:20.207

自 2016 年初以来，Paypal 开始要求 TLS 1.2 协议在沙盒中进行通信，并将从 6 月 17 日开始在实时环境中强制执行。请参阅[此处](https://devblog.paypal.com/upcoming-security-changes-notice/)以供参考。

在大多数 .NET 应用程序中，TLS 1.2 默认会被**禁用**，因此您需要启用它。

例如，您需要在`Application_Start`方法的开头添加以下行：

```
public class Site : HttpApplication
{
    protected void Application_Start()
    {
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls12;
        // other configuration
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T11:33:58.020

您可能连接到 api.paypal.com 或 api.sandbox.paypal.com，而不是发送您的 API 证书。API 证书是用于完成 SSL 链的客户端 SSL 证书。

如果您没有或未使用 API 证书，则应分别连接到 api-3t.paypal.com 或 api-3t.sandbox.paypal.com 以获取 Live 或 Sandbox。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-10T23:12:28.133

我一直在使用 PayPal (NVP/Signature) Express Checkout 集成，并且遇到了这个 SSL/TLS 错误。

我所做的一切似乎都没有解决它，但后来我发现下面的代码要添加到我的请求之上。作为参考，我使用的是 MVC3/.NET 4，因此默认情况下我无法使用 Tls1.2（如在 .NET 4.5 + 中）。这段代码的前三行绕过了这个问题。我希望它可以帮助人们！

```
ServicePointManager.Expect100Continue = true;
ServicePointManager.SecurityProtocol = (SecurityProtocolType)3072;
ServicePointManager.DefaultConnectionLimit = 9999;

var url = "https://[paypal-api-url]/nvp";
var uri = new Uri(url);
var request = WebRequest.Create(uri);
var encoding = new UTF8Encoding();
var requestData = encoding.GetBytes(data);

request.ContentType = "application/x-www-form-urlencoded";
request.Method = "POST";
request.Timeout = (300 * 1000); 
request.ContentLength = requestData.Length;

using (var stream = request.GetRequestStream())
{
    stream.Write(requestData, 0, requestData.Length);
}

var response = request.GetResponse();
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T09:24:16.913

非常感谢这对我很有帮助。

这里是我在 VB.NET 中建立接口的代码供参考

```
 'Create a service Binding in code
                            Dim ppEndpointAddress As New System.ServiceModel.EndpointAddress("https://api-3t.sandbox.paypal.com/2.0/")
                            Dim ppBinding As New System.ServiceModel.BasicHttpBinding(System.ServiceModel.BasicHttpSecurityMode.Transport)

                            Dim ppIface As New PayPalAPI.PayPalAPIAAInterfaceClient(ppBinding, ppEndpointAddress)

                            Dim ppPaymentReq As New PayPalAPI.DoDirectPaymentReq()

                            ppPaymentReq.DoDirectPaymentRequest = ppRequest 
```

# firefox - 在 Firefox 扩展中调试 AngularJS Web 应用程序

> ID：12681136
> 
> 赞同：3
> 
> 时间：2012-10-01T21:09:47.460
> 
> 标签：firefox, firefox-addon, xul, angularjs, firefox-addon-sdk

我创建了一个加载 iframe 的 Firefox 扩展。该 iframe 加载使用 AngularJS 构建的 Web 应用程序。反正有没有检查发生了什么？应用程序已加载，但我有 2 个无法输入的输入框。

我已经在 XUL 和使用附加 SDK 中开发了扩展，它们都不允许我与输入框交互。我进一步注意到，当我删除 ng-model 属性时，交互起作用了。似乎数据绑定是一个问题。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:34:01.237

没有看到代码，很难说出了什么问题。如果我遇到了这个问题（我也遇到过类似的问题），我通常会退回到编辑 Angular 源代码，并添加转储（或 console.log）语句来尝试跟踪正在发生的事情。这很糟糕，但它通常可以完成工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T16:25:28.257

这个问题现在有点老了，但作为从网络搜索来到这里的人们的参考：

您可能想查看[这个 SO question](https://stackoverflow.com/questions/19093931/is-history-replacestate-broken-for-xul-applications-and-plugins)，其中列出了 XUL 扩展中 AngularJS 可能出错的一些问题，以及一些解决方案。

# data-binding - 您如何定义单个可混合设计时实例？

> ID：12681137
> 
> 赞同：1
> 
> 时间：2012-10-01T21:09:52.543
> 
> 标签：data-binding, windows-8

默认的 Windows 8 项目模板在模板中有一个 CollectionViewSource。

```
<CollectionViewSource
       x:Name="itemsViewSource"
       Source="{Binding Model.Invitations}"
       d:Source="{Binding Invitations, Source={d:DesignInstance Type=vm:DesignerFilteredInvitations, IsDesignTimeCreatable=True}}" /> 
```

显然不是所有的页面都有一个集合作为他们的模型，你可以像这样定义一个 DataContext ：

```
<vm:MySingleItemViewModel x:Key="Model" /> 
```

您如何定义这种模型的设计实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:38:08.260

好吧，设计时数据最好像这样完成：http: [//blog.jerrynixon.com/2012/08/most-people-are-doing-mvvm-all-wrong.html](http://blog.jerrynixon.com/2012/08/most-people-are-doing-mvvm-all-wrong.html)

我意识到您的问题是询问是否使用 d:DesignInstance，它也适用于这种类型的技术——只是在那篇文章中没有演示。

它所需要的只是一个好的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T00:20:07.423

好的，使用它可以正常工作：

```
<Page 
d:DataContext="{d:DesignInstance Type=Models:ViewModel, IsDesignTimeCreatable=True}" 
```

并且使用它可以正常工作：

```
<d:Page.DataContext>
    <Models:ViewModel/>
</d:Page.DataContext> 
```

我必须告诉你，后者也是一种更简单的方法。这也是在设计器中设置数据源时 Visual Studio 将生成的内容。它还为您提供了完全类型化的绑定。但两者都可以接受。

另一个注意事项。我认为没有充分的理由将对象直接设置为 CollectionViewSource 的源。通常你会将 CVS 的 Source 属性绑定到 ViewModel 中的一个属性。但是，鉴于您的问题：方法如下：

```
<CollectionViewSource 
    x:Name="TestCVS" Source="{Binding}"
    d:DataContext="{Binding Source={d:DesignInstance Type=Models:ViewModel, IsDesignTimeCreatable=True}}"/> 
```

在设计器中绑定Source给我带来了无穷无尽的麻烦。但这更让我恼火，因为我知道我永远不会这样做。这就是我想做的：

```
<d:Page.DataContext>
    <Models:ViewModel/>
</d:Page.DataContext>

<Page.Resources>
    <CollectionViewSource x:Name="TestCVS" Source="{Binding}" />
</Page.Resources> 
```

你最好有一个很好的理由来做你的方法！

祝你好运！

# simplepie - 新的 Simplepie 版本中缺少 Get_favicon 功能

> ID：12681141
> 
> 赞同：3
> 
> 时间：2012-10-01T21:10:12.127
> 
> 标签：simplepie

在新版本中，删除了 get_favicon 方法，如文档[的“此版本中的更改”](http://simplepie.org/wiki/misc/release_notes/simplepie_1.3)部分所示。

当我尝试时，`$item->get_favicon()`我只会得到`Call to undefined method SimplePie_Item::get_favicon()`

我如何能够从 RSS 源中获取网站图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:50:44.043

同样在这里。我看到了同样的错误......即使搜索了代码，也没有提到与 favicon 相关的任何内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T02:20:52.093

get_favicon 是提要本身的方法，而不是它的项目。我相信 $item->，意味着您正在循环浏览提要项目。

```
$feed = new SimplePie();
$feed->set_feed_url($xmlurl);
$feed->set_output_encoding('UTF-8');
$feed->set_cache_durat
$feed->enable_order_by_date(false);ion(30);
$feed->get_favicon(); 
```

我认为您在代码中的位置是在 foreach 中遍历每个项目。我认为您不能在项目上调用 get_favicon 方法。foreach ($feed->get_items() as $item):

# regex - 不要只匹配空格

> ID：12681149
> 
> 赞同：0
> 
> 时间：2012-10-01T21:10:38.330
> 
> 标签：regex

我有以下匹配下划线、字母、数字和空格的正则表达式。我的问题是我不想匹配只有空格的字符串。有什么帮助吗？谢谢！

`[a-zA-Z0-9_\\s]+`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:13:11.007

如果第一个字符必须是非空格，那么这样做：

```
[a-zA-Z0-9_][a-zA-Z0-9_\s]* 
```

如果您还需要能够匹配前导空格：

```
\s*[a-zA-Z0-9_][a-zA-Z0-9_\s]* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:14:15.750

[a-zA-Z0-9_\\s]*[a-zA-Z0-9_]+[a-zA-Z0-9\\s]*

有更优雅的表达方式，但我不知道您选择的工具是否支持它。

# php - PHP/MySQL：使用变量列名的 INSERT INTO 不起作用

> ID：12681150
> 
> 赞同：0
> 
> 时间：2012-10-01T21:10:37.773
> 
> 标签：php, mysql, variables, insert, insert-into

我已经使用`INSERT INTO`了数百次，但已经有一段时间了，我一直在为这个而疯狂：

```
//Database Connection

$movieID = 41154;
$userID = 15;
$vote = 'yes';

$postVote = mysql_query("INSERT INTO votes (movieID, userID, yesNo, $vote) VALUES ('$movieID', '$userID', 1, 1)"); 
```

我能够成功连接到数据库并从`votes`表中获取数据，但由于某种原因，我在使用`INSERT INTO`.

表中存在以下列`vote`：`movieID`、`userID`、`yesNo`和`yes`。

关于我可以做些什么不同的想法？我必须忽略一些非常明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:48:31.100

`... or die(mysql_error()`正如 Marc B 指出的那样，使用, 引导我解决我的问题。这显示了我无法设置重复键的错误...我忘记`auto increment`了表的主键`votes`。因此，它一直在尝试创建一个我每次尝试`voteID`的.`1``INSERT INTO votes`

```
$postVote = mysql_query(...) or die(mysql_error()); 
```

这解决了我的挑战。然而，Tim G 指出 using`PDO`是一种比`mysql_query()`. 通过一点阅读，Tim G 对 PDO 的看法可能是正确的。基于[PHPEveryday's Tutorial](http://www.phpeveryday.com/articles/PDO-Portable-Connection-to-Database-P552.html)，我可以这样重写我的插入语句：

```
// database connection
$conn = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);

//set variables
$movieID = 41154;
$userID = 15;
$vote = 'yes';

//query/insert statement
$sql = "INSERT INTO votes (movieID,userID,yesNo,$vote) VALUES (:movieID,:userID, :yesNo, :$vote)";
$q = $conn->prepare($sql);
$q->execute(array(':movieID'=>$movieID,
                  ':userID'=>$userID)),
                  ':yesNo'=>1)),
                  ':$vote'=>1)); 
```

与 using不同`or die()`，`PDO`也有不同的处理错误和异常的方式。您可以在[PHPHash.org 的教程：MySQL 的 PDO - 错误处理](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers#Error_Handling)中了解更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-15T10:50:58.160

`INSERT INTO votes (movieID,userID,yesNo,$vote)`

并替换`$vote`为`vote`

# ruby-on-rails-3 - 将模板渲染到数据库

> ID：12681154
> 
> 赞同：1
> 
> 时间：2012-10-01T21:10:47.470
> 
> 标签：ruby-on-rails-3, redirect, erb

我正在尝试完成一项任务，但没有找到任何解决此问题的人。

我创建了一个奖项提名系统。

1.  匿名用户提交提名
2.  管理员用户从模板生成合并信​​函并编辑信函
3.  字母文本保存到数据库中，以便以后生成 PDF

我读到您可以将 ERB 文本呈现给变量。这很好用，但是由于双重渲染错误，我被文本卡住了。

```
def generate_letter
@submission = Submission.find(params[:id])
@submission.letter_text = render (:text, :layout => false, :template => 'submissions/generate_letter') and return
@submission.save  
redirect_to @submission
end 
```

是否有更好的方法为数据库生成此文本或重定向的解决方法？我试图避免将合并模板保留在代码中，而 ERB 似乎是处理它的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:52:27.817

你需要使用[`render_to_string`](https://github.com/rails/rails/blob/v3.2.8/actionpack/lib/abstract_controller/rendering.rb#L91). 这条线

```
@submission.letter_text = render (:text, :layout => false, :template => 'submissions/generate_letter') and return 
```

应该

```
@submission.letter_text = render_to_string( template: 'submissions/generate_letter.text.erb', layout: false ) 
```

# typescript - 模块加载如何与 TypeScript 一起工作

> ID：12681155
> 
> 赞同：16
> 
> 时间：2012-10-01T21:10:53.993
> 
> 标签：typescript

在 TypeScript 中，如果我以浏览器为目标，模块加载如何工作？我可以使用 require.js 来加载模块吗？它有自己的装载机吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-01T21:18:25.180

TypeScript 不提供运行时。您需要提供要使用的模块加载器，例如 requirejs。TypeScript 模块可以生成为 CommonJS 约定（用于 node.js）或 AMD 约定（用于 requirejs）；它生成的是一个编译器开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-07T00:15:52.133

正如 Chuckj 提到的，TypeScript 不提供运行时。您需要提供一个模块加载器才能使用。

然后您需要做的是告诉 TypeScript 编译器生成 JS 以确认将在运行时使用的模块加载器。

您可以通过使用 -m 编译器标志为编译器指定模块加载器来做到这一点：

```
tsc -m commonjs //'amd', 'system', 'umd' or 'es2015' 
```

或通过`compilerOptions`在`tsconfig.json`文件中指定模块：

```
{
    "compilerOptions": {
        "noImplicitAny": true,
        "module": "commonjs" //'amd', 'system', 'umd' or 'es2015'
    },
    "exclude": [
        "node_modules"
    ]
} 
```

# android - Android：如何设置多个闹钟

> ID：12681156
> 
> 赞同：2
> 
> 时间：2012-10-01T21:10:58.370
> 
> 标签：android, alarms

我必须同时设置 3 个不同的警报，但我目前正在尝试为两个警报工作。我已经按照这样的教程进行了 [Android: Multiple Alarm not working](https://stackoverflow.com/questions/8665021/android-multiple-alarm-not-working) ? 但没有一个有效，我只得到 1 个警报而不是 2 个。请帮我弄清楚我做错了什么。这是我的带有多个警报的代码：

```
 //alarm1
                Intent alarmIntent = new Intent (Enter_med.this, MyAlarmService.class);

                //pendingIntentOfTwoMonth2 = PendingIntent.getBroadcast(this, 1, in, PendingIntent.FLAG_UPDATE_CURRENT);
                PendingIntent pendingAlarmIntent = PendingIntent.getService(Enter_med.this, 0, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

                Calendar AlarmCal = Calendar.getInstance();
                AlarmCal.setTimeInMillis(System.currentTimeMillis());
                AlarmCal.set(Calendar.HOUR_OF_DAY, pHour);
                AlarmCal.set(Calendar.MINUTE, pMinute);
                AlarmCal.set(Calendar.SECOND, 0);

                alarmManager.set(AlarmManager.RTC_WAKEUP, AlarmCal.getTimeInMillis(), pendingAlarmIntent);

                //alarm2
                PendingIntent pendingAlarmIntent2 = PendingIntent.getService(Enter_med.this, 1, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                AlarmManager alarmManager2 = (AlarmManager)getSystemService(ALARM_SERVICE);

                Calendar AlarmCal2 = Calendar.getInstance();
                AlarmCal2.setTimeInMillis(System.currentTimeMillis());
                AlarmCal2.set(Calendar.HOUR_OF_DAY, pHour);
                AlarmCal2.set(Calendar.MINUTE, pMinute);
                AlarmCal2.set(Calendar.SECOND, 0);

                alarmManager2.set(AlarmManager.RTC_WAKEUP, AlarmCal2.getTimeInMillis(), pendingAlarmIntent2);

                Toast.makeText(Enter_med.this, "Saved", Toast.LENGTH_SHORT).show();

                Intent intent = new Intent(context, MedSked.class);
                startActivity(intent);   

            }

        }
     }); 
```

这是我的警报接收器：

```
 public class MyAlarmService extends Service {

@Override
public void onCreate() {
    Toast.makeText(this, "MyAlarmService.onCreate", Toast.LENGTH_LONG).show();

}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG).show();
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    Bundle extras = intent.getExtras();
    String data = extras.getString("nel.example.alarms1");
    Toast.makeText(this, "MyAlarmService.onStart() data = " + data, 
            Toast.LENGTH_LONG).show();

    Intent alertIntent = new Intent();
    alertIntent.setClass(this, MyAlert.class);
    alertIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(alertIntent);

} 
```

这是我的警报对话框：

```
 public class MyAlert extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_my_alert);

        AlertDialog alertDialog = new AlertDialog.Builder(MyAlert.this).create();
        alertDialog.setTitle("Med Reminder");

        alertDialog.setMessage("Time to take your medicine");
        alertDialog.setIcon(R.drawable.ic_launcher);

        alertDialog.setButton("OK", new DialogInterface.OnClickListener(){

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        alertDialog.show();
    }

} 
```

我明天有一个截止日期的演示文稿。任何帮助将不胜感激。提前致谢..

# c# - .Net 缓存过期跟进

> ID：12681159
> 
> 赞同：0
> 
> 时间：2012-10-01T21:11:11.610
> 
> 标签：c#, .net, caching

这是我已经问过的问题的后续问题。它得到了回答，但我有一个后续问题，我在那里发表了评论。由于我没有在那里得到答案，所以我在这里发帖。请原谅。

这是我的问题：[.Net 缓存过期](https://stackoverflow.com/questions/12647921/net-cache-expiration)

现在我的后续问题：

在应用程序重启/应用程序池回收期间会调用 cacheItemRemovedCallback 吗？如果是，我可以在那里重新加载缓存吗？是对的吗？

还是仅在 cacheitemremovedreason 已过期时才检查条件，然后才重新加载缓存？

如果我错了，请告知如何处理应用程序池回收或应用程序重启。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:31:48.837

AppPool 和 AppDomain 重新启动时，缓存将为空。由于新的 AppDomain 没有关于缓存中的项目的先验知识，因此不会触发有关“已删除项目”的事件。

如果您出于某种原因需要重新填充缓存 - 您可以在应用程序启动时进行，也简单地允许按需填充缓存可能是更好的选择。

# c# - 在 WCF 服务中使用表单控件

> ID：12681160
> 
> 赞同：1
> 
> 时间：2012-10-01T21:11:14.697
> 
> 标签：c#, winforms, wcf, controls

我写了一个程序，它有两个控制台应用程序（assusme A & B）和一个 WCF 服务库。我将 A 和 B 连接在一起，因此消息可以从 A 传输到 B 或 B 到 A（WCF 双工）。为此，我将 WCF 服务库的引用添加到 A 和 B 项目中。现在我想将这些控制台应用程序更改为 WinForm 应用程序，但我不能这样做，因为在控制台应用程序中我们有 console.writeline() 它可以在 WCF 服务库中使用但在 WinForm 中，MessageBox 不能在 WCF 服务中使用。

我也无法将 A 和 B 的引用添加到 Wcf 服务，因为它会导致循环依赖错误

**编辑：**

这是带有控制台应用程序的项目：

在项目 A Program.cs 文件中：

```
 internal static void StartService()
  {
     myServiceHost = new ServiceHost(typeof(WCF.MessageService));

     myServiceHost.Open();
  }

  internal static void StopService()
  {
     if (myServiceHost.State != CommunicationState.Closed)
        myServiceHost.Close();
  }

  static void Main()
  {
     StartService();
     Console.WriteLine("Service running; press return to exit");
     Console.ReadLine();
     StopService();
     Console.WriteLine("stopped");
  } 
```

在项目 B Program.cs 文件中：

```
 class ClientCallback : IMyMessageCallback
{
  public void OnCallback(string message)
  {
     Console.WriteLine("message from the server: {0}", message);
  }
}

class Program
{
  static void Main()
  {
     Console.WriteLine("Client - wait for service");
     Console.ReadLine();

     WSDualHttpBinding binding = new WSDualHttpBinding();
     EndpointAddress address =
           newEndpointAddress("http://localhost:8731/Design_Time_Addresses/MessageService/Service1/");

     ClientCallback clientCallback = new ClientCallback();
      InstanceContext context = new InstanceContext(clientCallback);

     DuplexChannelFactory<IMyMessage> factory =
        new DuplexChannelFactory<IMyMessage>(context, binding, address);

     IMyMessage messageChannel = factory.CreateChannel();

     messageChannel.MessageToServer("From the client");

     Console.WriteLine("Client - press return to exit");
     Console.ReadLine();

  } 
```

}

在 IMYMessage.cs 文件（WCF 服务库）中：

```
 public interface IMyMessageCallback
{
  [OperationContract(IsOneWay = true)]
  void OnCallback(string message);
}

[ServiceContract(CallbackContract = typeof(IMyMessageCallback))]
public interface IMyMessage
{
  [OperationContract]
  void MessageToServer(string message);
} 
```

在 MessageService.cs 文件（WCF 服务库）中：

```
 public class MessageService : IMyMessage
{
  public void MessageToServer(string message)
  {
     Console.WriteLine("message from the client: {0}", message);
     IMyMessageCallback callback =
           OperationContext.Current.
                 GetCallbackChannel<IMyMessageCallback>();

     callback.OnCallback("message from the server");

     new Thread(ThreadCallback).Start(callback);
   }

   private void ThreadCallback(object callback)
   {
     IMyMessageCallback messageCallback = callback as IMyMessageCallback;
     for (int i = 0; i < 10; i++)
     {
        messageCallback.OnCallback("message " + i.ToString());
        Thread.Sleep(1000);
     }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:43:47.693

我有点惊讶你能够让它与控制台应用程序一起工作，我希望你也能在那里获得循环依赖。

我认为你应该重组你的解决方案，这样**A & B 就不会互相引用**。您正在使用 WCF 进行通信，因此不需要以任何方式引用它们。

此外，WCF 库不应执行任何 UI 类型的行为，例如控制台写入行或消息框的东西，只返回一个字符串或对象并让您的 UI 应用程序（例如您的控制台应用程序或表单应用程序）处理用户交互/显示

```
        ------------ ------------
        | | | |
        | 一个 | | 乙|
        |(控制台)| | (表格) |
        | | | |
        ------------ 双工 ------------
        | 通讯 |<==========>| 通讯 |
        | (WCF) | | (WCF) |
        ------------ ------------

```

# java - Java - 创建动态变量表，我可以轻松地回调变量

> ID：12681168
> 
> 赞同：0
> 
> 时间：2012-10-01T21:11:45.633
> 
> 标签：java, variables, selenium, hashmap

我是一个新手程序员，非常新手..

我正在尝试编写一个程序来测试我们的网站，并且正在使用 Java 和 Selenium。

问题是我想创建一个“表”或“引用”，它允许我存储可以轻松回调并在不同调用中使用的变量。

我尝试使用 HashMap，但发现它不好，因为当我重新运行测试代码时，每次都会有一个新的 hashmap。我想要一些可以存储值并在下次运行代码时记住它们的东西。

我查看了创建一个 mysql 表，但我不知道如何在创建后从表中调用变量。

我希望这有点道理。:0) 请在下面查看一个示例是否更有用 ++++++++++++++++++++++++++++++++++++++ +++++++++++++++++++++++++++

这是我使用的哈希图的示例：

```
HashMap idTable = new HashMap();
idTable.put("GroupName", new String("Group " + 
              Long.toHexString(Double.doubleToLongBits(Math.random()))));
element = driver.findElement(By.id("name"));
element.sendKeys((String)idTable.get("GroupName")); 
```

仅供参考：这对我不起作用的原因是我希望能够将其包装在“if”语句中；告诉计算机，如果名为“GroupName”的变量已经存在，那么不要再这样做了。但是每次我运行脚本时，我都会调用函数 [HashMap idTable = new HashMap();] 而我不这样做'不知道如何不进行该调用，因为 HashMap 没有保存在任何地方.. 它每次都是新创建的。

谢谢，奥利

不知道在哪里添加这个：但按照这里的第一个建议是我所做的。
HashMap idTable；

try{
ObjectInputStream is = new ObjectInputStream(
new FileInputStream("C:\Documents and Settings\My Documents\Selenium local\hashmap.dat"));
idTable = (HashMap) is.readObject();
}

catch(Exception e){
idTable = new HashMap();
}

然后：

try{
ObjectOutputStream os = new ObjectOutputStream (
new FileOutputStream("C:\Documents and Settings\My Documents\Selenium local\hashmap.dat"));
os.writeObject(idTable);
os.close();
}
catch (Exception e){
}

它有效。:0) 感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:52:39.963

为简单的字符串键/值对使用[属性](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)实例。它是一个 Map，类似于 HashMap，但具有用于将其内容读/写到文件的加载和存储方法。这对于简单的测试使用应该绰绰有余。

它通常用于加载配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:14:49.493

您必须将它们存储在代码中以外的某个地方，因为每当 JVM 关闭时，代码就会再见。两个不错的选择是

*   使用 SQL 数据库，如果您愿意，可以通过 google 进行更多研究
*   通过文件，只需将您的 HashMap 数据库写入程序末尾的文件（执行`Runtime.addShutdownHook`，并将其传递给将哈希图存储到文件的线程），并在代码开头从文件中读取它（如果文件不存在，创建一个新文件，并将一个空的 hashmap 存储到它）

# c - 在 Linux 内核（模块编程）中，如何从多线程进程中获取 threadid？

> ID：12681170
> 
> 赞同：1
> 
> 时间：2012-10-01T21:11:57.127
> 
> 标签：c, kernel

current->pid 获取访问模块的进程 id...但我希望多线程程序中的进程中的 threadid 访问我的模块。这样做的目的是什么？我到处都找不到！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:20:47.190

linux 内核不像 POSIX 线程库那样看到多线程进程（我假设这就是线程 id 的意思）。内核的任务是由线程库循环在一起的独立进程。IBM 的这篇[论文](http://www.kernel.org/doc/ols/2002/ols2002-pages-330-337.pdf)给出了更详细的解释。

# git - 在标记版本之间重新设置基础，删除 Git 上的其他提交

> ID：12681171
> 
> 赞同：1
> 
> 时间：2012-10-01T21:12:03.030
> 
> 标签：git, git-rebase, git-tag

我有一个我自己工作的项目（没有团队）。我已经标记了一些提交，例如`v0.0.1`，`v0.0.9`...`v0.9.1`等等。现在，我想对它们进行变基，只留下那些带有版本标记的提交，但我有两个问题：

1.  当我这样做时`git rebase -i v0.0.1`（第一个版本，从那时起超过 2000 次提交）我不知道如何在“rebase screen”内显示标签，这就是我定义壁球的地方；
2.  即使我能够在 rebase 屏幕中看到标签，在 2000 次提交上手动定义压缩也是非常耗时的；

是正确的做法吗？有没有办法更快地实现这一目标？

太感谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:37:27.337

您无法在交互式 rebase 中获取标签，仅仅是因为标签是不可变的，而 rebase 正在修改历史，因此是矛盾的。

交互式 rebase 也不是为了对数千次提交进行操作，您必须使用文本编辑器的高级功能来应对它。

您确定要压缩所有未标记的提交吗？即使您现在没有看到兴趣，保留历史记录也会有很大帮助（想想`git blame`当您想知道是什么提交引入了更改时。

如果你想查看标签历史，你可以问`git log --tagged`。你可以在不改变你的回购历史的情况下简化历史，这对你的项目来说很宝贵。

# javascript - 有没有办法从 Windows Gadget 上传文件？

> ID：12681173
> 
> 赞同：2
> 
> 时间：2012-10-01T21:12:10.790
> 
> 标签：javascript, php, file-upload, windows-desktop-gadgets

从`System.Shell.itemFromFileDrop`我得到`System.Shell.Item`object `item`。我试过这个：

```
var oStream = new ActiveXObject("ADODB.Stream");
oStream.Type = 1;
oStream.Open();

oStream.LoadFromFile(item.path);
content = oStream.Read();

var thisObj = this;
var xhr = new XMLHttpRequest();
xhr.open("POST", "http://myUrl.com//");
xhr.send(content);    //NOT WORKING

oStream.Close();
oStream = null; 
```

但我真的不知道在`xhr.send`函数中传递什么。

服务器端 PHP 代码尽可能简单：

```
if (file_exists($_FILES["file"]["name"]))
{
    echo $_FILES["file"]["name"] . " already exists. ";
}
else
{
    move_uploaded_file($_FILES["file"]["tmp_name"],$_FILES["file"]["name"]);
    header("{$_SERVER['SERVER_PROTOCOL']} 200 OK");
    header('Content-Type: text/plain');
    echo "http://myUrl.com/" .$_FILES["file"]["name"];
} 
```

任何想法我做错了什么？或者关于如何从 Windows 小工具上传文件的任何想法？

# php - Magento：在管理客户网格中添加自定义列

> ID：12681175
> 
> 赞同：0
> 
> 时间：2012-10-01T21:12:17.167
> 
> 标签：php, magento, customization

我编写了自己的 Magento 函数，它计算订单与退货的百分比关系。通过这种方式，您可以将客户分类为那些从不退还购买的东西（绿色 - 好客户）、有时会返回（黄色）和那些退回大部分购买的东西（红色 - 坏客户）的客户。

为此，我添加了一个保存所需信息的新数据库表。

现在，我想在 Magento 的管理客户->管理客户中添加一个新列，该列显示适当的颜色。我设法添加了新列的标题，但我不知道如何从我的自定义数据库表中显示我的自定义计算。Magento 让一切变得如此复杂。

我编辑了“app/code/core/Mage/Adminhtml/Block/Customer/Grid.php”并将以下代码添加到“prepareColumns”中：

```
    $this->addColumn('abc', array(
      '标题' => "ABC"
    ));

```

那么，如何用任何数据填充它？

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:27:40.307

最简单的解决方案是`prepareCollection`在同一个类中编辑函数，并将您的表连接到结果集。然后你只需要在你的`addColumn`定义中设置正确的索引并且应该填充列。

理想情况下，您当然不应该编辑核心文件，更好的选择是改写类，或者您可以全力以赴并[使用 events 来完成](http://www.ecomdev.org/2010/07/27/adding-order-attribute-to-orders-grid-in-magento-1-4-1.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T05:31:40.487

那么您可能知道该怎么做吗？所有参数到底是什么意思？：

```
    ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')

```

请给我任何建议。比方说，我会为每个客户创建一个原始 SQL 查询，进行一些计算并将其输出。我只需要客户的 id 就可以做到这一点。

# c++ - 如何在地图上找到所有森林集群？

> ID：12681176
> 
> 赞同：0
> 
> 时间：2012-10-01T21:12:26.210
> 
> 标签：c++, algorithm, game-engine

如何在地图上找到所有森林集群？我有简单的类单元格（类型是枚举 {RIVER, FOREST,GRASS,HILL}

```
class Cell{
   public:
     Type type;
     int x;
     int y
}; 
```

和地图一样`vector<Cell> grid`。任何人都可以建议我创建算法来创建`list<list<Cell>> clusters`列表包含同一集群中的森林单元的位置（集群是一组连接的单元 - 连接可以在八个方向：上、下、左、右、上右、上左、下左、下右）？我需要在地图上找到所有森林集群并将每个集群放入`list<Cell>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:36:18.300

我已将此作为评论，但不妨回答：

> 查找并集查找算法。使用路径压缩，您可以在之后遍历结构并为每个根创建一个列表，然后将您的单元格添加到适当的列表中。

链接：[http ://en.wikipedia.org/wiki/Disjoint-set_data_structure](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)

对于所有单元格，与上方和左侧的单元格执行联合。如果要加入对角线，则还包括左上角和右上角的对角线）。

使用 union-find 的路径压缩版本，以便集群中的所有节点都指向一个根。然后，您所要做的就是遍历您的结构（在完成所有联合之后）并随时添加节点。伪（ish）代码：

```
foreach node
    Find(node)               // this ensures path compression

    if not clusters.hasList(node.root)
        clusters.createList(node.root)
    end

    list <- clusters.getList(node.root)
    list.append(node)
end 
```

上面假设如果一个节点是根，则`node.root`指向`node`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:28:16.967

该算法相当简单，它实际上甚至不依赖于集群的确切定义。假设您有一个谓词`cluster(f0, f1)`，它产生`true`if`f0`并且`f1`在同一个集群中。您需要做的就是奔跑`grid`并找到一片森林。如果单元格`f`是森林，则检查`cluster(f, other)`每个已知森林是否。如果`cluster(f, other)`让`true`您添加`f`到`other`. 您继续检查其他集群中的其他已知森林：当您`c`在另一个集群中找到另一个单元`cluster(f, c)`格时`true`，您合并（`std::list<Cell>::spice()`）这两个集群。

# aspose-cells - 我在导出时收到一个名为“对象”的空白电子表格

> ID：12681177
> 
> 赞同：0
> 
> 时间：2012-10-01T21:12:31.147
> 
> 标签：aspose-cells

我正在运行 C#.NET 和 Aspose 7.3 版。

当我导出工作表时，它完全可以导出。没问题。坚果但爱。

但是，当我在浏览器选项中单击“另存为”（而不是“打开”）并打开该结果文件时，会出现一个名为“对象”的空电子表格。

请看下面的屏幕截图。

[http://imgur.com/yjHy2](http://imgur.com/yjHy2)

有什么办法可以抑制这个吗？它没有在运行时显示在我的工作表集合中。我也很难用谷歌搜索它，因为“对象”在 Aspose Cells.NET 开发中是一个很常见的词。

感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:34:09.107

可能，您可能无意中创建了**对象**工作表，或者您的模板文件中已经存在**对象工作表。**

无论如何，请尝试以下示例代码，看看你得到什么结果。它应该可以正常工作，没有任何问题。

如果它工作正常，您可以根据此代码修改您的代码。

要以 Xls 格式保存，请使用**XlsSaveOptions**

和

要以 Xlsx 格式保存，请使用**OoxmlSaveOptions**

**C# 中的示例代码**

```
//Create a new workbook
Workbook workbook = new Workbook();

//Get the first worksheet in the workbook
Worksheet sheet = workbook.Worksheets[0];

//Rest of your code goes here

string yourFileFormat = "XLS";

//Save file and send to client browser using selected format
if (yourFileFormat == "XLS")
{
    workbook.Save(HttpContext.Current.Response, "output.xls", ContentDisposition.Attachment, new XlsSaveOptions(SaveFormat.Excel97To2003));
}
else
{
    workbook.Save(HttpContext.Current.Response, "output.xlsx", ContentDisposition.Attachment, new OoxmlSaveOptions(SaveFormat.Xlsx));
}

HttpContext.Current.Response.End(); 
```

# prolog - 请我是序言的新手，可以在这个练习中帮助我吗

> ID：12681182
> 
> 赞同：1
> 
> 时间：2012-10-01T21:12:51.840
> 
> 标签：prolog, successor-arithmetics

编写一个谓词`less/2`，如果 t1 代表 n1，t2 代表 n2，则 `less(t1, t2)`当 n1 < n2 时成功。例如，`less(s(z), s(s(s(z))))`应该成功，`less(s(z), s(z))`应该失败。如果 t1 是未实例化的逻辑变量，而 t2 是自然数 n2 的正确表示，则谓词应枚举小于 n2 的所有数。例如，查询

```
?- less(X, s(s(z))). 
```

应该成功`X = z`并且`X = s(z)`（不一定按此顺序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T15:57:37.327

您可以尝试以下方法：

```
ls(0,s(_)).
ls(s(X),s(Y)) :- ls(X,Y). 
```

以下是一些示例运行：

```
?- ls(s(0),s(s(s(0)))).
Yes
?- ls(s(s(0)),s(0)).
No 
```

再见

# ios - iOS 应用安装地址

> ID：12681183
> 
> 赞同：0
> 
> 时间：2012-10-01T21:12:53.417
> 
> 标签：ios, url, installation

iPhone是否可以通过单击网址从网页安装应用程序？我知道这在临时测试阶段是可能的，您可以托管 .ipa 文件并添加您希望安装应用程序的设备 ID，然后发送一个 url。但我想知道是否可以通过 url 从应用商店获取其他应用？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:14:52.107

您可以直接链接到 App Store 上的应用程序页面，仅此而已（在未越狱的 iOS 设备上）。用户必须从 App Store 下载该应用程序。

# objective-c - UITextView 没有成为第一响应者

> ID：12681187
> 
> 赞同：6
> 
> 时间：2012-10-01T21:13:00.390
> 
> 标签：objective-c, ios, uitextview, uitextviewdelegate

我有一个`UIView`包含一个`UITextView`. `UIView`是在`UIViewController`.

但是当我触摸`UITextView`盒子时，什么也没有发生。键盘不会出现，委托方法也不会响应交互。

代码：

```
 noteText = [[UITextView alloc]initWithFrame:CGRectMake(0, 0, 700, 240)];
    noteText.layer.borderColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.2].CGColor;
    noteText.layer.borderWidth = 2;
    [noteText setEditable:YES];
    noteText.userInteractionEnabled = YES;
    noteText.returnKeyType = UIReturnKeyDone;
    noteText.font = [UIFont fontWithName:@"Calibri" size:16];
    noteText.textColor = [UIColor blackColor];
    [self addSubview:noteText]; 
```

**更新 1**

我从 UIViewController 中删除了所有其他视图，并且只在 UIViewController 中放置了一个 UITextView，但仍然没有反应。光标或键盘均未出现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:44:00.353

```
noteText = [[UITextView alloc]initWithFrame:CGRectMake(0, 0, 700, 240)];
noteText.layer.borderColor = [UIColor colorWithRed:0 green:0 blue:0 alpha:0.2].CGColor;
noteText.layer.borderWidth = 2;
[noteText setEditable:YES];
noteText.userInteractionEnabled = YES;
noteText.returnKeyType = UIReturnKeyDone;
noteText.font = [UIFont fontWithName:@"Calibri" size:16];
noteText.textColor = [UIColor blackColor];
[self addSubview:noteText]; 
```

// 两个建议

```
self.userInteractionEnabled = YES; // superview may blocks touches
self.clipsToBounds = YES; // superview may clips your textfield, you will see it 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T09:26:19.830

我发现了错误。

在一个类中，我对 UITextView 而不是子类进行分类，并将 canBecomeFirstResponder 设置为 NO。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T10:28:48.740

试试这个：在你的 .h 文件中符合委托 UITextViewDelegate

```
:<UITextViewDelegate> 
```

在您的 .m 文件中：

```
noteText.delegate = self; 
```

和委托方法：

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{
    [textView becomeFirstResponder];
    return YES;
}

- (BOOL)textViewShouldEndEditing:(UITextView *)textView{
    //resign for exapmple
    return YES;
} 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-24T09:13:22.690

我知道已经晚了，但也许对某人会有所帮助。我也遇到了同样的问题，用了之后就消失了

```
[self setSelectable:true]; 
```

在我的 UITextView 子类中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T05:03:26.187

检查这些东西：

1.  在右侧添加您的视图控制器`UIWindow`。

2.  使用此方法设置窗口 `makeKeyAndVisible`并添加`rootViewController`到窗口：

    -（BOOL）应用程序：（UIApplication *）应用程序didFinishLaunchingWithOptions：（NSDictionary *）launchOptions

    我认为 xib 文件或`appdelegate`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-04T12:50:18.060

尝试覆盖`- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {`UIView 以查看它是否正在接收触摸

以防万一，尝试设置`userInteractionEnabled = YES;`您的 UIView 对象。如果它以某种方式设置为 NO 它将渗透到它的所有子视图

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T09:34:45.687

也许您的覆盖`-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`方法有一些错误？也许你在`resignFirstResponder`那里做或者把一些观点放在首位？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-10T08:34:31.440

每当发生这种情况时，请检查以下项目，

1.  确保仅在 中正确保留和释放 Text 视图`dealloc`。（如果您不使用`ARC`）
2.  检查文本视图及其父视图的框架。确保它`subview`完全适合父视图。还要确保所有`superviews`文本视图都是这种情况。
3.  检查是否`delegate`设置正确。

如果所有这些都完成，请尝试在文本视图顶部添加一个按钮并检查它`target selector`是否被调用。如果是，则问题出在文本视图委托或发布声明上。否则问题出在文本视图或其超级视图的框架设置上。

# android - android视图中的自动滚动

> ID：12681188
> 
> 赞同：0
> 
> 时间：2012-10-01T21:13:10.077
> 
> 标签：android, android-layout

我对 Android 完全陌生，我的第一次尝试是使用 LinearLayout 来定位多个控件，但是我的模拟器屏幕不是那么大，无法包含我的所有控件，并且输出不会显示所有控件，并且没有自动垂直滚动条添加。我应该怎么做才能使它们全部可见？

```
<LinearLayout>
<control_1/>
<control_2/>
///////...
<control_n/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:34:27.570

您需要将布局包装在[ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)中。您的代码如下所示：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <!-- put your controls in here -->

    </LinearLayout>
</ScrollView> 
```

# .htaccess - 将子目录重定向到子域

> ID：12681193
> 
> 赞同：1
> 
> 时间：2012-10-01T21:13:23.767
> 
> 标签：.htaccess

我正在寻找移动`http://domain.com/blog`到`http://blog.domain.com`。这也意味着所有跟踪`/blog`例如`/blog/post/1`都需要路由到`http://blog.domain.com/post/1`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:18:55.580

1.  确保您在`blog.domain.com`. 具体来说，如果你去`http://blog.domain.com/post/1`你会得到正确的内容。

2.  在您`domain.com`域的文档根目录中的 htaccess 文件中，添加（最好在您可能已经拥有的任何规则之上）：

    ```
    RewriteEngine On
    RewriteCond %{HTTP_HOST} ^(www\.)?domain.com$ [NC]
    RewriteRule ^/?blog/(.*)$ http://blog.domain.com/$1 [L,R=301] 
    ```

3.  如果您实际上没有任何内容，`blog.domain.com`并且它与 共享相同的文档根目录`domain.com`，那么您需要添加以下附加规则：

    ```
    RewriteCond %{HTTP_HOST} ^blog.domain.com$ [NC]
    RewriteCond %{DOCUMENT_ROOT}/blog%{REQUEST_URI} -f [OR]
    RewriteCond %{DOCUMENT_ROOT}/blog%{REQUEST_URI} -d
    RewriteRule ^ /blog%{REQUEST_URI} [L] 
    ```

# android - Android 4.0+ 软件返回按钮样式

> ID：12681195
> 
> 赞同：0
> 
> 时间：2012-10-01T21:13:32.373
> 
> 标签：android, android-ui, android-4.0-ice-cream-sandwich

我已经处理了返回按钮来关闭活动而不是隐藏键盘。它工作得很好。

但是，如果设备没有硬件按钮，软件按钮将在键盘打开时显示隐藏键盘（向下箭头而不是返回）图像。当然，单击它（“返回”）确实会关闭我的活动。

这就是我所拥有的：

![在此处输入图像描述](../Images/4c40b9e5657005f9a895a8008bdd25d6.png)

这就是我想要的：

![在此处输入图像描述](../Images/d11c0261efc424569cb2e41cc63a33e1.png)

打开键盘时是否可以强制软件后退按钮看起来像后退按钮（而不是关闭键盘）？

# asp.net-mvc-3 - 在脚手架生成的控制器和视图代码中保留自定义代码的推荐方法是什么？

> ID：12681196
> 
> 赞同：0
> 
> 时间：2012-10-01T21:13:32.933
> 
> 标签：asp.net-mvc-3, t4

我正在使用带有 EF5 的 MVC3。我喜欢获取脚手架生成的控制器和视图的方式。这产生了一个很好的工作流程，可以快速、一致地创建应用程序。当然，Scaffolding 背后的最初想法是创建一个 80% 的快速启动，显然控制器和视图可以快速定制。但是，是否有任何推荐的做法来保留自定义代码，同时仍然能够重新运行脚手架。我能想到的最接近的是从控制器操作等进行外部方法调用。我想我需要将这些合并到 T4 模板中？？？也许依赖注入在这里起作用？我已经看到它在域层中用于额外的服务方法。

可能是我期待太多了！！！

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:19:10.090

为控制器使用自动生成的代码，只需确保生成的代码创建了[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)。

至于视图，更改视图并重新生成视图而不丢失更改后所需的内容要困难得多（有时是不可能的）。

**更新**

您可以让代码生成器创建如下文件：

**Controllers/ClientController.Auto.cs** （自动添加表示自动生成）

```
//------------------------------------------------------------------------------
// <auto-generated>
// This code was generated from a template.
//
// Manual changes to this file may cause unexpected behavior in your application.
// Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;

namespace SomeCompany.SomeProjectName.Controllers
{
  public partial class ClientController
  {
    public SomeAutoGeneratedMethod()
    {
    }

    public SomeAutoGeneratedProperty { get; set; }
  }
} 
```

**控制器/ClientController.cs**

```
using System;

namespace SomeCompany.SomeProjectName.Controllers
{
  public partial class ClientController
  {
    public SomeProgrammerWrittenMethod()
    {
    }

    public SomeProgrammerWrittenProperty { get; set; }
  }
} 
```

# jquery - 带有 jquery 的文本掩码

> ID：12681197
> 
> 赞同：0
> 
> 时间：2012-10-01T21:13:33.617
> 
> 标签：jquery

jquery中有没有办法为文本做掩码？例如，我有带背景的滑块，我想屏蔽（隐藏）超出背景的文本-（外部）-（限制）-文本-（限制）-（外部）-并且文本以两种方式进行：左->右，右->左。（我想隐藏文本会超出限制）我不能通过改变宽度来做到这一点，因为上面是图像这是我的滑块类：

```
#slider-prod {
    float: left;
margin: 19px 0 0 67px;
width: 751px;
height: 257px;
overflow: hidden;
}
#slider-prod ul {}
#slider-prod ul li img {display: block;float: left;}
#slider-prod ul li{display: block;float: left;width: 751px;height: 257px;}
#slider-prod ul li p{    font-family:'Helvetica-BoldOblique';    text-shadow: 1px 0 1px #ffffff;
display: block;
float: left;
text-align: left;
line-height: 42px;
font-size: 15px;line-height: 19px;color: #204383}
#slider-prod ul li span{
    font-family:'Helvetica-BoldOblique';    text-shadow: 1px 0 1px #ffffff;
    font-size: 17px;
    line-height: 42px;
    color: #ff7b00;
display: block;
float: left;
clear: both;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:16:35.753

这是通过`overflow: hidden;`CSS 中的规则完成的，而不是在 Javascript 中。

# objective-c - 为什么内存中同一位置的两个项目在if语句中不返回true

> ID：12681201
> 
> 赞同：2
> 
> 时间：2012-10-01T21:14:05.710
> 
> 标签：objective-c, comparison

我正在尝试按 fileId 比较两个文件。 `fileId`是一个`NSNumber`。
令我惊讶的是，虽然`file`和`lFile`在内存中具有相同的位置，但 if 语句没有返回 true，并且在我的比较 using 为 true 之前，该方法没有返回`isEqualToNumber`true。

为什么具有相同内存地址的两个项目`==`在比较时不会返回 true？

![比较失败 == 比较但陷入 isEqualToNumber 比较的屏幕截图](../Images/8c5e700686e5f028b74a2f477bdbbfb3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:32:03.983

仔细地看。请注意，您不是在比较 和 的地址`file`，`lfile`而是在比较它们各自`fileId`属性返回的值。

如果该`fileId`属性返回底层对象的副本`NSNumber`，则返回的两个值不会与相等 ( `==`) 运算符比较相等，因为它们是两个不同的对象。但是，它们将被该`isEqualToNumber:`方法视为相等。

# powershell - 使用 PowerShell 对文本中的值求和

> ID：12681210
> 
> 赞同：0
> 
> 时间：2012-10-01T21:14:30.057
> 
> 标签：powershell, powershell-2.0

我有这个ps代码

```
PS > Select-String -path .\build-count-warn.txt -pattern "[1-9]?[0-9]+ warn"

warn.txt:1:    0 Warning(s)
warn.txt:2:    1 Warning(s)
warn.txt:3:    2 Warning(s) 
```

..

那么如何扩展ps脚本并报0+1+2=3之和

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:33:32.313

捕获正则表达式中的数值，如下所示：

```
PS> "0 warnings","1 warnings","5 warnings" | Select-String "(\d+) warnings" | 
        Foreach {$_.Matches.Groups[1].Value} | Measure -Sum

Count    : 3
Average  :
Sum      : 6
Maximum  :
Minimum  :
Property : 
```

仅供参考，我在支持成员枚举的 PowerShell V3 上对此进行了测试。在 V2 上，您可能需要这样做：

```
PS> "0 warnings","1 warnings","5 warnings" | Select-String "(\d+) warnings" | 
        Foreach {$_.Matches | Foreach {$_.Groups[1].Value}} | Measure -Sum 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:19:16.607

你可以试试这个，更快：

```
 PS II>  $s="0 warnings","1 warnings","5 warnings" 
  PS II>  [regex]::matches($s,"(\d+)\s*warnings") | measure -inp {$_.Groups[1].Value} -sum 
```

# grails - 需要帮助，Grails mongodb 如果大于，否则如果大于

> ID：12681212
> 
> 赞同：1
> 
> 时间：2012-10-01T21:14:36.490
> 
> 标签：grails, if-statement

我有一个小问题，不知道+白发。

我不太了解 gsp、groovy、grails 等。但情况如下：

例如，如果我从 mongodb 获得的数字大于 4.5，我需要显示图像。

我尝试了许多不同的东西：

```
 <g:if test="${profil.punkte >0.1}">
                    <img src="${resource(dir: 'images', file: '1_5.gif')}" alt="gesamtbewertung in sternen" >
                    </g:if>
                    <g:elseif test="${profil.punkte >1.49}">
                    <img src="${resource(dir: 'images', file: '2_5.gif')}" alt="gesamtbewertung in sternen" >
                    </g:elseif>
                    <g:elseif test="${profil.punkte >2.49}">
                    <img src="${resource(dir: 'images', file: '3_5.gif')}" alt="gesamtbewertung in sternen" >
                    </g:elseif>
                    <g:elseif test="${profil.punkte >3.49}">
                    <img src="${resource(dir: 'images', file: '4_5.gif')}" alt="gesamtbewertung in sternen" >
                    </g:elseif>
                    <g:elseif test="${profil.punkte >4.49}">
                    <img src="${resource(dir: 'images', file: '5_5.gif')}" alt="gesamtbewertung in sternen" >
                    </g:elseif> 
```

我尝试了很多不同的语法来解决这个问题，但它不起作用。在上面的版本中，它总是显示 1_5.gif

“profil.groovy”中的条目看起来…… 像：

```
class Profil {
ObjectId id
...
...
double punkte
} 
```

mongodb 的 JSON 中的条目如下所示：

```
 "punkte": 4.3, 
```

我只需要输入 ${profil.punkte} 并得到 4.3 渲染。

即使我的英语不好，希望你能理解我的问题。我会在我的笔记本电脑上做一个后空翻来解决！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:24:41.057

好吧，你需要创造更好的条件。你看到 4.3 大于 0.1 了吗？然后它总是进入第一个 if 而不是别的。

在您的条件中添加一些限制，它将起作用。

# maven - 如何找到受父母pom变化影响的孩子pom？

> ID：12681214
> 
> 赞同：3
> 
> 时间：2012-10-01T21:14:38.317
> 
> 标签：maven, maven-3

`dependencyManagement`如果我有***很多***子项目从包含`dependencyManagement`.

我正在寻找使用 maven 本身进行此操作的最佳方法，而无需解决手动搜索，例如通过所有孩子的 poms 来查看受影响的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:23:26.650

您可以使用 解决此问题[`mvn versions:update-parent`](http://mojo.codehaus.org/versions-maven-plugin/update-parent-mojo.html)，它将父版本更新为最新版本。

有关示例，请参见[http://mojo.codehaus.org/versions-maven-plugin/examples/update-parent.html 。](http://mojo.codehaus.org/versions-maven-plugin/examples/update-parent.html)

# jquery - 提交表单时关闭颜色框

> ID：12681218
> 
> 赞同：0
> 
> 时间：2012-10-01T21:15:05.537
> 
> 标签：jquery, colorbox

我已经阅读了这篇文章（http://stackoverflow.com/questions/2009973/close-colorbox-iframe-after-submit）和其他一些文章，但我认为我需要做一些不同的事情。

我想将表单提交到“处理”页面，该页面在处理后重定向回彩盒的父页面。

所以，我需要颜色框在提交时关闭，表单内容进入处理页面。我现在所拥有的只是在单击时关闭颜色框，并且表单内容永远不会进入处理页面。

这是关闭颜色框的代码：

```
<script>
function closebox() {
parent.$.fn.colorbox.close();
}
</script> 
```

我在表单标签中调用这个函数：

```
<form id="frm_product_search" method="post" action="processing.php" onclick="closebox()"> 
```

我也尝试将功能放在提交按钮上，但没有运气。

如何在颜色框关闭之前将表单内容获取到 processing.php 页面？我一直在登录表单中看到这一点。

谢谢

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:48:58.137

> 如何在颜色框关闭之前将表单内容获取到 processing.php 页面？

通过 ajax 提交，然后使用 ajax 回调关闭颜色框。

# ruby - 搜索数组并根据是否找到值执行特定任务

> ID：12681221
> 
> 赞同：1
> 
> 时间：2012-10-01T21:15:24.317
> 
> 标签：ruby, arrays, ruby-on-rails-3, csv, hash

好的，让我换一种方式问这个问题。这是我将以 csv 格式导入的事件表的示例。

```
 id:
    incident_datetime: 2012-09-24 08:07:00.000000+0000
    location: Hamburg
    report_nr: 33-11-00201
    responsible_party: John
    area_resident: No
    street: 6108 FoxHunt
    city: Lexington
    state: Ky
    home_phone: 111-111-1111
    cell_phone: 222-222-2222
    insurance_carrier_name: Nationwide
    insurance_carrier_street: Waller
    insurance_carrier_city: Lexington
    insurance_carrier_state: KY
    insurance_carrier_phone: 666-666-6666
    insurance_carrier_contact: Jason
    policy_nr: 2sdf2sdf
    vin_nr: ZTZHK3fhr5546107407
    license_nr: 520-VDH
    vehicle_make: Toyota
    vehicle_model: Tacoma
    vehicle_year: 2004
    created_at: 
    updated_at:
    status: Recieved
    user_id: 16
    resp_zip: 40509
    insur_zip: 40509 
```

这是 rakefile 的代码。

```
 require 'csv'

    namespace :import_incidents_csv do

        task :create_incidents => :environment do
            puts "Import Incidents"

            csv_text = File.read('c:/rails/thumb/costrecovery_csv/lib/csv_import/incidents.csv')
            csv = CSV.parse(csv_text, :headers => true)
            @incident_id_array = []
            csv.each do |row|
                row = row.to_hash.with_indifferent_access
                Incident.create!(row.to_hash.symbolize_keys)
                @incident_id_array << Incident.last.id
            end

       end
    end 
```

当它被转储到数据库中时，顶部的 id 将自动分配一个值。然后，我将获取该 id 值并将其保存在一个数组中并为其创建一个时间表。这就是时间表的样子。

```
 id:
    name:
    date:
    incident_id: x
    created_at:
    updated_at: 
```

需要创建时间表，因为一堆模型“属于它”。这是创建此文件的 rakefile：

```
 require 'csv'

    namespace :import_timesheets_csv do

        task :create_timesheets => :environment do
            puts "Import Timesheets"

            csv_text = File.read('c:/rails/thumb/costrecovery_csv/lib/csv_import/timesheets.csv')
            csv = CSV.parse(csv_text, :headers => true)
            @timesheet_id_array = []
            csv.each_with_index do |row,index|
                row = row.to_hash.with_indifferent_access
                Timesheet.create!(row.to_hash.symbolize_keys)
                @timesheet_id_array << Timesheet.last.id
                timesheet = Timesheet.last
                timesheet.incident_id = @incident_id_array[index]
                timesheet.save
            end

        end
    end 
```

所以此时，我创建了一个新事件，它链接到我刚刚创建的新时间表。现在我想导入一个创建安全官员的 csv 文件。这是文件的样子。

```
 id: 
    name: Safety Officer 1
    first_hour: 1
    additional_hours: 2
    total_hours: 3
    hazmat_hours: 0.5
    rate1:
    rate2:
    timesheet_id:
    created_at:
    updated_at: 
```

这里是导入 safety_officer.csv 文件的代码。

```
 require 'csv'

    namespace :import_safety_officers_csv do

        task :create_safety_officers => :environment do
            puts "Import Safety Officers"

            csv_text = File.read('c:/rails/thumb/costrecovery_csv/lib/csv_import/safety_officers.csv')
            csv = CSV.parse(csv_text, :headers => true)
            csv.each_with_index do |row,index|
                row = row.to_hash.with_indifferent_access
                SafetyOfficer.create!(row.to_hash.symbolize_keys)
                safety_officer = SafetyOfficer.last
                safety_officer.timesheet_id = @timesheet_id_array[index]
                safety_officer.save
            end
        end
    end 
```

以上是导入 1 个事件报告、导入/创建 1 个时间表和导入 1 个安全员的示例。我试图弄清楚我的代码需要如何修改，以便安全人员知道他们属于哪个事件报告。我如何为他们分配与他们的事件相对应的正确 timesheet_id。我还有其他几个模型，我也必须这样做，但我只需要为其中一个找出它，然后我可以为其余的复制它。所有这些都保存为不同的 rake 文件，并由一个看起来像这样的主 rake 任务执行。

```
 require 'csv'

    namespace :combine_csv do

        task :combine => :environment do
            Rake::Task["import_incidents_csv:create_incidents"].invoke
                                                                                                                  Rake::Task["import_timesheets_csv:create_timesheets"].invoke              
            Rake::Task["import_safety_officers_csv:create_safety_officers"].invoke
        end
    end 
```

# ruby-on-rails - Rails has_many & 通过查询

> ID：12681226
> 
> 赞同：1
> 
> 时间：2012-10-01T21:16:16.493
> 
> 标签：ruby-on-rails, has-many-through

我使用的是 Rails 2.3，我有 3 个表，用于管理用户对建筑物的权限。mygroups 表是用户和建筑物所属的组列表。mygroupsbuildings 是建筑物及其关联组的列表。mygroupsusers 是用户及其关联组的列表。

```
create_table "mygroups", :force => true do |t|
  t.string   "name"
  t.integer  "user_id"
  t.string   "user_name"
  t.integer  "permissions"
end

create_table "mygroupbuildings", :force => true do |t|
  t.integer  "mygroup_id"
  t.integer  "building_id"
end

create_table "mygroupusers", :force => true do |t|
  t.integer  "mygroup_id"
  t.integer  "user_id"
  t.string   "user_name"
end 
```

我想创建一个查询，以确定特定的 user_id 是否与特定的 building_id 属于同一组的成员。

我已经设置了以下关联：

```
class Mygroup < ActiveRecord::Base  
  has_many   :mygroupusers
  has_many   :mygroupbuildings
end

class Mygroubuilding < ActiveRecord::Base  
  belongs_to :mygroup
  has_many   :mygroupusers, :through => :mygroup
end

class Mygroupuser < ActiveRecord::Base
  belongs_to :mygroup
  has_many   :mygroupbuildings, :through => :mygroup
end 
```

我写了以下查询：

```
Mygroupuser.find(:all,
                 :include => :mygroupbuildings,
                 :select => "mygroupbuildings.building_id, mygroupusers.user_id",
                 :conditions => ["mygroupbuildings.building_id = '#{building.id}' AND mygroupusers.user_id = '#{current_user.user_id}'"]) 
```

这给了我以下错误：

ActiveRecord::StatementInvalid (Mysql::Error: Unknown column 'mygroups.mygroup_id' in 'on Clause': SELECT `mygroupusers`. `id`AS t0_r0, `mygroupusers`. `mygroup_id`AS t0_r1, `mygroupusers`. `user_id`AS t0_r2, `mygroupusers`. `user_name`AS t0_r3, `mygroupusers`. `created_at`AS t0_r4, `mygroupusers`. `updated_at`AS t0_r5, `mygroupbuildings`. `id`AS t1_r0, `mygroupbuildings`. `mygroup_id`AS t1_r1, `mygroupbuildings`. `coursewalk_id`AS t1_r2, `mygroupbuildings`. `created_at`AS t1_r3, . `mygroupbuildings`AS `updated_at`t1_r4 从左外连接打开 ( . = . ) 左外连接打开 ( . = . ) WHERE (mygroupbuildings.building_id = '2' AND mygroupusers.user_id = '55')):`mygroupusers``mygroups``mygroupusers``id``mygroups``mygroup_id``mygroupbuildings``mygroupbuildings``mygroup_id``mygroups``id`

谢谢，

缺口，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:20:44.077

这就是需要设置查询以返回包含查询的 user_id 和 building_id 的组的方式：

```
Mygroup.find(:all,
             :include => [:mygroupbuildings, :mygroupusers],
             :conditions => ["mygroupbuildings.building_id = #{building.id} AND mygroupusers.user_id = #{current_user.user_id}"]) 
```

# javascript - 预选下拉值

> ID：12681228
> 
> 赞同：0
> 
> 时间：2012-10-01T21:16:26.490
> 
> 标签：javascript, jquery, html

我的网页上有几个小时的下拉菜单。后端将值作为 int 返回。例如：“TimeHours”：12。

以下代码没有将值预设为 12。但是，如果我将 BE 值从 12 更改为“12”，它就可以工作。

我应该如何让它工作？我尝试改变`<option value="1">1 </option> to <option value=1>1 </option>`，但也没有用。

```
<li class="align" >                
 <select id="TimeHours" name="TimeHours" 
       style="width:60px" data-value="{{this.TimeHours}}">                    
       <option value="1">1 </option>
       <option value="2">2 </option>
       <option value="3">3 </option>
       <option value="4">4 </option>
       <option value="5">5 </option>
       <option value="6">6 </option>
       <option value="7">7 </option>
       <option value="8">8 </option>
       <option value="9">9 </option>
       <option value="10">10 </option>
       <option value="11">11 </option>
       <option value="12">12 </option>                       
  </select></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:18:38.550

```
$(function(){
  var select = $("#TimeHours");
  select.val(select.attr("data-value"));
}); 
```

Using`.attr()`返回一个字符串，而不是`.data()`将值转换为类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:21:01.603

使用jquery`.val`函数..

```
$('#TimeHours').val(function () {
    return $(this).data('value')['TimeHours'];
}); 
```

假设`data-value='{"TimeHours": "12"}'`

**演示：http:** [//jsfiddle.net/ts594/](http://jsfiddle.net/ts594/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:19:38.950

以这种方式将您要选择的标记为选中：

```
 <option value="2">2 </option>
   <option value="3">3 </option>
   <option value="4">4 </option>
   <option value="5">5 </option>                    
  ...
   <option selected value="12">12 </option> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T21:18:52.973

你有没有尝试过？

```
data-value="{{praseInt(this.TimeHours)}} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T21:19:01.793

除了添加`selected`到正确的`<option>`标签之外，没有办法预先选择一个选项。

这就是为什么我有这个代码：

```
(function() {
    // enable default attribute on <select>
    var sels = document.querySelectorAll("select[data-value]"), l = sels.length, i,
        opts, m, j;
    for( i=l-1; i>=0; i--) {
        opts = sels[i].getElementsByTagName('option'); m = opts.length;
        for( j=0; j<m; j++) {
            if( opts[j].value == sels[i].getAttribute("data-value")) {
                sels[i].selectedIndex = j;
                break;
            }
        }
        sels[i].removeAttribute("data-value");
    }
})(); 
```

# android - Android CTS 测试 - test_execCreatedJar 失败

> ID：12681235
> 
> 赞同：0
> 
> 时间：2012-10-01T21:17:34.723
> 
> 标签：android, android-cts

我正在尝试调试此测试，该测试在我们的设备上失败，而它在模拟器中运行。测试会生成一个 .jar 文件，并将尝试提取 .dex 并运行它。我调试了调用堆栈，发现在模拟器中，顺序不一样。我看到这些印刷品（第一行是我的）：

E/dalvikvm（754）：HV：Dalvik_dalvik_system_DexFile_openDexFile，可能会为“/data/data/android.core.tests.runner/cache/cts_dalvikExecTest_41998785.jar”调用 dvmJarFileOpen E/dalvikvm（754）：HV：dvmJarFileOpen，为“调用 dvmOptimizeDexFile” /data/data/android.core.tests.runner/cache/cts_dalvikExecTest_41998785.jar'D/dalvikvm（754）：DexOpt：---开始'cts_dalvikExecTest_41998785.jar'（bootstrap = 0）---D/dalvikvm（754 ): DexOpt: --- END 'cts_dalvikExecTest_41998785.jar' (成功) --- D/dalvikvm(754): DEX prep '/data/data/android.core.tests.runner/cache/cts_dalvikExecTest_41998785.jar': 解压1ms内，重写204ms

在我的设备上，我看不到任何上述打印件。有什么想法可以进一步调试吗？

谢谢高压

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:06:36.660

增加超时时间是解决方案

# git - 为什么不直接从 git 或 bzr 存储库部署代码？

> ID：12681238
> 
> 赞同：1
> 
> 时间：2012-10-01T21:17:45.020
> 
> 标签：git, web-applications, deployment, dvcs, bazaar

在 Web 应用程序的开发/测试设置中，当使用 dvcs (bzr, git) 时，**为什么从存储库目录实际运行应用程序是错误的**？

我遇到的所有团队都有一个单独的部署脚本，可以将存储库签出导出到另一个目录或服务器，但我真的不明白为什么，害怕要求“长大”不要显得“愚蠢”......我的意思是，无论如何，它是开发服务器，而不是生产服务器，所以...？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:37:56.993

您是否愿意查看路径和权限接近的运行时，因为它们将是真实的，因此任何错误都可能反映现实，或者您是否愿意花时间解决将解决非标准部署的古怪问题异能？你知道，像

*   您是本地管理员，因此您可以使用所有资源，但是当在用户帐户不是管理员的情况下部署某些内容时，它会失败
*   在本地解决但在部署安装中无法解决的路径杂乱无章
*   一件没有进入[你|其他人]签到的新东西，所以“它在我的机器上工作！”（tm）

或其他任何减慢速度但无助于交付高质量代码的事情。

tl；博士：@Schwern 在下面说什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T21:48:49.700

澄清一下，问题不在于您*如何*部署，这是另一个问题。更深层次的原则是您的测试环境应该尽可能接近生产环境，原因@DaveE 提到：小的部署差异会使您的测试无用。

听起来您真的认为镜像生产安装对于您在开发时的测试来说工作量太大了。有两种解决方案。使您的测试环境与生产环境不同并不是其中之一。

首先，使生产安装更容易。这可能会将手动过程（在此处复制文件、运行这些脚本、更改这些权限......）变成一个自动化过程。或者它实际上可能会减少部署的作用。在不知道细节的情况下不能说更多。

如果你没有测试环境，你的开发环境*就变成了*您的测试环境，并且必须遵循更严格的规则，即在生产之前成为您唯一的防线。为避免这种情况，请创建一个登台服务器进行测试。登台服务器是尽可能多地反映生产的服务器。开发副本首先安装在登台服务器上并在推送到生产之前进行测试。这为您提供了一个两阶段的测试系统。您在不太精确的开发环境中进行了一些测试，并且完整的测试是在暂存环境中完成的。完整的测试套件不必一直运行，因此暂存服务器不必不断更新。YMMV。然后，您可以在开发环境中偷工减料以加快开发速度，同时仍然知道一切都将在生产前的完整安装上进行测试。

如果您有资源，登台服务器是生产中所有硬件和软件的完美镜像。你可能没有那个，所以它可以是一个虚拟机或只是一个子目录。如果您没有得到团队其他成员的支持，两者都可以在您的开发机器上运行。

自动化安装过程，加上一个登台服务器，意味着您可以开始进行[持续集成测试](https://secure.wikimedia.org/wikipedia/en/wiki/Continuous_integration)。这是“在每次提交时自动在测试服务器上运行测试”的花哨术语。持续集成系统的一个例子是[Jenkins](http://jenkins-ci.org/)。然后，无论您的部署多么复杂，您的机器人都会为您处理。

因此，虽然一开始看起来像是很多繁琐的工作，但最终所有这些都可以在您无需按下按钮的情况下进行测试。

最终，您的新代码必须在与生产环境尽可能相似的环境中进行测试，然后才能上线。有很多方法可以做到这一点，但这是一个坚如磐石的规则。

# ios - 屏幕上同时出现多个 UIViewController

> ID：12681242
> 
> 赞同：2
> 
> 时间：2012-10-01T21:17:59.500
> 
> 标签：ios, cocoa-touch, uiviewcontroller

我在多个地方读过一次`UIViewController`只能在屏幕上显示一个。但我不太明白如何完成我所需要的。

想象一下天气应用程序。有一个带有滚动视图的视图控制器，其中添加了多个视图（天气面板）。想必这些都是由 main 添加和管理的，main`UIViewController`也负责滚动等。

但是想象一下，这些天气面板中的每一个都是一个`CarView`，每个都有关于特定类型汽车的数据，以及一些用于编辑该数据的控件。

拥有一系列`CarViewControllers`，每个都有`Car`他们可以操纵的属性不是很有意义吗？每个`CarViewController`都负责它的汽车数据对象，它的视图，并将它们粘合在一起，主视图控制器只负责将每个添加`carViewController.view`到它的滚动视图中。

这对于可重用性和封装性不是更好吗？更不用说方便了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:28:35.860

我认为这取决于它是否会让你的生活更轻松。我喜欢做的另一种选择是编写`UIView`专门用于显示“概念”模型（如汽车）的复合子类，然后在它们上编写类别以使用特定模型实现填充视图信息。这样，您可以在更改模型时重新使用视图，但仍然可以防止某些逻辑使视图控制器混乱。我尝试为使用 a`UISegmentedControl`或其他东西切换的完全不同的视图保留一个视图控制器。

`UIView`编辑： a及其填充类别的示例。

```
@interface CarView : UIView

@property (strong) UILabel *modelLabel;
@property (strong) UILabel *makeLabel;
@property (strong) UILabel *yearLabel;
//etc

@end 
```

然后你有一个特定于模型的类别，虽然视图上的类别确实更适合控制器层；虽然有点违反 MVC，但我认为从职责分配的角度来看它工作得很好，不会将您的主视图实现与任何数据实现耦合，并使您的视图控制器更精简，所以我认为值得权衡。

```
@interface CarView (CarEntityPopulating)

- (void)populateFieldsWithEntity:(NSManagedObject *)entity;

@end

@implementation CarView (CarEntityPopulating)

- (void)populateFieldsWithEntity:(NSManagedObject *)entity
{
    self.modelLabel.text = [entity valueForKey:@"name"];
    self.makeLabel.text = [[entity valueForKey:@"make"] valueForKey:@"name"];
    self.yearLabel.text = [[entity valueForKey:@"year"] stringValue];
    //etc....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T18:02:45.627

似乎现在使用容器视图控制器在 iOS 5 中明确支持这一点。

目前还没有很多资源可以讨论它，但是[这个 WWDC 会议](https://developer.apple.com/videos/wwdc/2011/?id=102)很有用。

[这个问题](https://stackoverflow.com/questions/7755498/container-view-controller-examples)也提供了一些资源。

# c# - OpenXML for Excel - 文档必须只包含一个根元素。第 1 行，第 0 列

> ID：12681246
> 
> 赞同：1
> 
> 时间：2012-10-01T21:18:40.747
> 
> 标签：c#, excel, openxml

**强文本**我正在尝试创建和写入 excel。对于模板，我只是从 OPENXML Productivity 工具中为现有的 excel 文件复制代码，然后修改代码以在从该代码创建新文件时添加我的数据行。但是，我似乎在让它正常工作时遇到了一些问题。我不断得到一个

**c 无法打开文件：part /xl/worksheets/sheet2：缺少根元素 替换部分：/xl/worksheets/sheet2.xml 部分带有 XML 错误。一个文档必须只包含一个根元素。第 1 行，第 0 列。**

我仍然无法正确调试的错误。此外，在原始模板中，我的工作簿中有 3 张工作表。我确保删除其中的两个，这样我就可以只创建一个的代码，因为我假设 OpenXML 2.0 Productivity 工具只会为文档代码放在一起时存在的工作表生成代码。但是发生的情况是，生成的文件包含所有 4 个原始工作表，但似乎无法将每个工作表的标题放在一起。

想获得一些关于去哪里找到这个问题并解决它的提示。提前致谢。

```
 public void CreatePackage(string filePath)
        {
            using (SpreadsheetDocument package = SpreadsheetDocument.Create(filePath, SpreadsheetDocumentType.Workbook))
            {
                CreateParts(package);
            }
        }

        private void CreateParts(SpreadsheetDocument document)
        {
            ExtendedFilePropertiesPart extendedFilePropertiesPart1 = document.AddNewPart<ExtendedFilePropertiesPart>("rId3");
            GenerateExtendedFilePropertiesPart1Content(extendedFilePropertiesPart1);

            WorkbookPart workbookPart1 = document.AddWorkbookPart();
            GenerateWorkbookPart1Content(workbookPart1);

            WorkbookStylesPart workbookStylesPart1 = workbookPart1.AddNewPart<WorkbookStylesPart>("rId3");
            GenerateWorkbookStylesPart1Content(workbookStylesPart1);

            ThemePart themePart1 = workbookPart1.AddNewPart<ThemePart>("rId2");
            GenerateThemePart1Content(themePart1);

            WorksheetPart worksheetPart1 = workbookPart1.AddNewPart<WorksheetPart>("rId1");
            GenerateWorksheetPart1Content(worksheetPart1);

            WorksheetCommentsPart worksheetCommentsPart1 = worksheetPart1.AddNewPart<WorksheetCommentsPart>("rId2");
            GenerateWorksheetCommentsPart1Content(worksheetCommentsPart1);

            VmlDrawingPart vmlDrawingPart1 = worksheetPart1.AddNewPart<VmlDrawingPart>("rId1");
            GenerateVmlDrawingPart1Content(vmlDrawingPart1);

            SharedStringTablePart sharedStringTablePart1 = workbookPart1.AddNewPart<SharedStringTablePart>("rId4");
            GenerateSharedStringTablePart1Content(sharedStringTablePart1);

            SetPackageProperties(document);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T14:51:40.807

如果我不得不猜测 - 这个错误是由于您删除了

```
 WorksheetPart worksheetPart2 = workbookPart2.AddNewPart<WorksheetPart>("rId2");
        GenerateWorksheetPart2Content(worksheetPart2); 
```

示例中的行。请注意，我拿走了您的代码并将 1 替换为 2 ..

你会看的地方是

```
 WorkbookPart workbookPart1 = document.AddWorkbookPart();
        GenerateWorkbookPart1Content(workbookPart1); 
```

部分。在他们有多个工作表生成的地方（不是工作表生成，这是您删除的部分）

```
 Sheets sheets1 = new Sheets();
        Sheet sheet1 = new Sheet() { Name = "sheet1", SheetId = (UInt32Value)1U, Id = "rId1" };
        Sheet sheet2 = new Sheet() { Name = "sheet2", SheetId = (UInt32Value)2U, Id = "rId2" };

        sheets1.Append(sheet1);
        sheets1.Append(sheet2); 
```

Sheet 初始化程序中的 id 实际上是对工作簿 ID 的引用。由于您摆脱了 GenerateWorkbookPart2Content 函数，因此该引用是一个错误。

啊，软引用的问题......

在微软的示例代码中——他们使用：

```
 sheet1.Id = workbookPart.GetIdOfPart(worksheetPart1); 
```

这仍然是一个软参考，但至少没有硬编码.. ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:29:04.283

问题在于您构建 XML 的方式；正如错误所解释的，XML 必须只有一个根元素。让我举几个例子：

有效的 XML 文档：

```
<users>
 <user>
  <name>Omar</name>
  <age>25</age>
 </user>
 <user>
  <name>Gabbo</name>
  <age>41</age>
 </user>
</users> 
```

无效的 XML 文档：

```
<user>
 <name>Omar</name>
 <age>25</age>
</user>
<user>
 <name>Gabbo</name>
 <age>41</age>
</user> 
```

在第一个示例中，文档中的每个元素都是 users 的子元素，而在第二个示例中，有两个用户浮动。

# javascript - 将javascript类对象发送到php

> ID：12681247
> 
> 赞同：-2
> 
> 时间：2012-10-01T21:18:48.953
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [将 JSON jQuery Ajax 发送到 PHP 并返回](https://stackoverflow.com/questions/3462409/sending-json-jquery-ajax-to-php-and-back)

我需要将以下对象发送到一个 php 文件，我通过 json stringify 尝试过但无法做到。我不想更改这些属性已经定义的格式，而且 json 是发送此类对象的唯一方法吗？我想做这样的事情

```
function contact()
{
contact.menu=null;
contact.access=null;
contact.state=null;
}
$.post("myfile.php",{contact:contact},function(data){alert(data);});
///php code
$contact= $_POST['contact'];
echo $contact['menu']; 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:20:39.220

**JavaScript：**

```
var contact = {
    menu: null,
    access: null,
    state: null
};
$.post("myfile.php", {contact: contact}, function(data) { 
    alert(data);
}); 
```

**PHP：**

```
$contact = $_POST['contact'];
echo $contact['menu']; 
```

**更新：**

在评论中回答您的问题：

```
var contact = {
    menu: null,
    state:  null,
    access: null,
    fill: function() {
        this.menu = 1; // $("div#sm").html(); 
        this.state = 2;
        this.access = 3;
    }
};

contact.fill();

$.post("myfile.php", {contact: contact}, function(data) { 
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:21:55.850

对象接触应该是这样的

```
 var contact = {
    menu :null,
    access:null,
    state:null
   } 
```

# spring-el - 从 int[] 到 double[] 的隐式转换

> ID：12681252
> 
> 赞同：0
> 
> 时间：2012-10-01T21:19:03.100
> 
> 标签：spring-el

我有两个功能

```
public static double avg(int[] values) {
    if(values == null || values.length == 0) return -1;
    double sum = 0;

    for(int value:values) {
        sum = sum + value;
    }
    return (sum/values.length);
}

public static double avg(double[] values) {
    if(values == null || values.length == 0) return -1;
    double sum = 0;

    for(double value:values) {
        sum = sum + value;
    }
    return (sum/values.length);
} 
```

我正在使用 Spel 表达式引擎来评估表达式。当我部署此代码并调用表达式 avg({3,4,5}) 或 avg({3.0,4.0,5.0}) 时，出现以下错误，

```
Caused by: org.springframework.expression.spel.SpelEvaluationException: EL1033E:(pos  0): Method call of 'avg' is ambiguous, supported type conversions allow multiple variants to match 
```

int[] 数组是否在评估期间隐式转换为 double[]？

我应该把它设为单函数 avg(double[] values) 吗？

谢谢，

维杰·博尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:36:54.583

`{3,4,5}`可以解释为整数数组或双精度数组。使用`double arr[] = {3,4,5}; avg(arr);`or`int arr[] = {3,4,5}; avg(arr);`和 tou 应该没有错误

# javascript - 在选择选项上更改图像（其他可能性然后我的）

> ID：12681255
> 
> 赞同：0
> 
> 时间：2012-10-01T21:19:13.090
> 
> 标签：javascript, html

所以我有我的形象

```
<img class="box_model" id="imageToSwap" src="img/woman.jpg" /> 
```

和我的选项列表

```
<option value="img/woman.jpg">Woman</option>
<option value="img/man.jpg">Male</option> 
```

和几行javascript

```
<script type="text/javascript">
function swapImage(){
var image = document.getElementById("imageToSwap");
var dropd = document.getElementById("se");
image.src = dropd.value;    
};
</script> 
```

但是由于我想将该值用于另一个函数，所以我想以另一种方式来做。有没有人有一个方法，值不会被触及？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:55:54.417

您可以在选项中使用 html5 属性（如 data-url），也可以将地图存储在某个位置，您可以在其中找到所选值的相应 url。

# python - Python：源自 ctypes POINTER 和“TypeError：无法创建实例：没有 _type_”

> ID：12681257
> 
> 赞同：1
> 
> 时间：2012-10-01T21:19:30.183
> 
> 标签：python, ctypes

我正在尝试强制 Python 2.7 为 ctypes 打印格式化字符串`POINTER(<type>)`。我想我会写一个继承自 POINTER 和重载的类`__str__`。不幸的是运行这段代码：

```
from ctypes import *

pc_int = POINTER(c_int)
class PInt(pc_int):
    def __str__(self):
        return "Very nice formatting ", self.contents

print pc_int(c_int(5))
print PInt(c_int(5)) 
```

失败并出现此类异常

```
$ python playground.py
<__main__.LP_c_int object at 0x7f67fbedfb00>
Traceback (most recent call last):
  File "playground.py", line 9, in <module>
    print PInt(c_int(5))
TypeError: Cannot create instance: has no _type_ 
```

有谁知道如何干净地达到预期的效果或这个例外意味着什么？

“TypeError：无法创建实例：没有*类型*”只有 1 个谷歌搜索结果，它没有那么有用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:11:44.473

问题是`ctypes`用于实现`POINTER`和相关类的元类直接在类字典中查找特殊字段，例如`_type_`，因此无法处理继承的特殊字段。

修复很简单：

```
pc_int = POINTER(c_int)
class PInt(pc_int):
    _type_ = c_int # not pc_int
    ... 
```

# model-view-controller - 现有目录的 RewriteRule 附加查询

> ID：12681260
> 
> 赞同：2
> 
> 时间：2012-10-01T21:19:42.197
> 
> 标签：model-view-controller, .htaccess, mod-rewrite, url-rewriting, rewrite

我正在为我的新 PHP 站点实现一个 MVC 模式，其 URL 结构如下：

```
example.com/module/controller/action?params=... 
```

这是我的 .htaccess 文件：

```
Options -Indexes

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*) portal.php?mvc=$1 [QSA,L] 
```

这些规则大部分都正常工作，但是，如果我在公共空间中有一个与模块同名的目录，`?mvc=[directory name]`如果没有尾部斜杠，它会附加到 URL 的末尾。

例如：
`example.loc/index`变成`example.loc/index/?mvc=index`
但`example.loc/index/`保持不变。

我怎样才能做到这一点，如果用户在`example.loc/index`其中输入的行为与包含结尾斜杠的行为相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:26:29.060

这是因为 mod_dir 的[`DirectorySlash`指令](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)干扰了您的重写。mod_dir 和 mod_rewrite 都位于同一个 URL 文件映射管道中，无论其他模块在做什么，它们都会做自己的事情。因此，当 mod_dir 认为请求是针对目录的，并且缺少尾部斜杠时，它将标记要重定向的 URL，但 URL 继续沿着 mod_rewrite 处理 URI 的处理管道。在该行的末尾，两个模块都修改了 URI **，并且**URI 被标记为 301 重定向，因此对浏览器的响应是重定向到新的 URI（已被破坏）。

**解决方案：** 您需要处理 mod_rewrite 中的尾部斜杠或简单地关闭`DirectorySlash`（尽管您应该注意信息泄露安全警告）。您可以处理 mod_rewrite 中的尾部斜杠，例如：

```
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

确保在该`RewriteEngine on`行下方添加 *right。您需要在任何 MVC 路由发生之前应用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:30:24.797

你需要 RewriteCond %{REQUEST_FILENAME} !-f 指令吗？我猜 Apache 会将 example.loc/index/ 视为文件系统中的文件夹而不是文件。

# python - GitPython 相当于“git remote show origin”？

> ID：12681267
> 
> 赞同：9
> 
> 时间：2012-10-01T21:20:09.123
> 
> 标签：python, git, gitpython

我正在尝试更新一个 Python 脚本，该脚本检查少数本地存储库的状态，从使用**subprocess**到使用**GitPython**。**GitPython** for中的等效命令是`git remote show origin`什么，或者检查本地存储库是否可*快速转发*或*过时*（等）的更好方法是什么？

```
$ git remote show origin
* remote origin
  Fetch URL: <url>
  Push  URL: <url>
  HEAD branch: master
  Remote branches:
    XYZ    tracked
    master tracked
  Local branches configured for 'git pull':
    XYZ    merges with remote XYZ
    master merges with remote master
  Local refs configured for 'git push':
    XYZ    pushes to XYZ    (up to date)
    master pushes to master (up to date) 
```

最后两行是我最关心的。通过迭代和比较（等）哈希值，看起来这可能通过**GitPython实现。**这似乎比上面的单个本地 git 命令要做更多的工作，并且需要更多的工作来判断哪一侧已经过时。我期待类似的东西。**在GitPython**中确定这一点的正确方法是什么？`git.Repo.heads``git.Repo.remotes.origin.refs``.master.commit``git.Repo.remotes.origin.status()`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-28T21:54:17.890

`git.cmd.Git()`如果 gitpython 没有包装想要的功能，您可以使用。它直接调用 git 所以它很方便，虽然我猜它主要是一个子进程的包装器：

```
import git

g = git.cmd.Git("/path/to/git/repo")
print(g.execute("git remote show origin"))  # git remote show origin
print(g.execute(["git", "remote", "show", "origin"]))  # same as above
print(g.remote(verbose=True))  # git remote --verbose 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T14:03:21.550

如果您需要每个分支的简明报告，我不知道有什么比`git remote show origin`作为子进程运行更好的方法。如果您对单个分支感兴趣，假设您已经完成了一次提取，您可以像这样检查您落后或领先的提交数量：

```
commits_behind = list(repo.iter_commits(
            '{branch}..{tracking_branch}'.format(
                branch=branch,
                tracking_branch=repo.heads[branch].tracking_branch())))

commits_ahead = list(repo.iter_commits(
            '{tracking_branch}..{branch}'.format(
                branch=branch,
                tracking_branch=repo.heads[branch].tracking_branch()))) 
```**

# php - 如何通过 php 在 mysql 中返回日期值

> ID：12681270
> 
> 赞同：0
> 
> 时间：2012-10-01T21:20:22.893
> 
> 标签：php, mysql, date, sqldatatypes

我有一个关于从 MySQL 返回的值的快速问题。

在我的一个表中，我有一列分配了`date`数据类型。当信息插入数据库时​​，`curdate()`会自动执行以插入正确的日期。

也就是说，MySQL 认为该值是一个日期。我有一个 php 脚本可以提取该值并将其呈现给用户。现在，从 php 的角度来看，这个值是一个字符串吗？

我想要做的是，如有必要，我应该说，使用拉出的值并将其插入到新表中（例如：10/1/12 由 php 拉出然后插入到新表中）。如果是这种情况，我可以简单地将该值放入新表的数据类型列中`date`吗？还是 MySQL 不会将其识别为日期？

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:22:12.400

MySQL 足够聪明，可以将字符串转换为日期。该字符串应该可以是几乎任何标准格式，并且可以正确翻译。

编辑：对不起，我不正确。

您可以使用 PHP 或 MySQL 日期解析函数来处理此问题。在 PHP 中：

```
date("Y-m-d", strtotime($row['myDateField'])); 
```

这是 strtotime 可以解释的有效日期字符串列表： [http ://www.php.net/manual/en/datetime.formats.date.php](http://www.php.net/manual/en/datetime.formats.date.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:22:54.617

您可以使用此方法 DateTime::createFromFormat

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T07:42:43.503

您可以使用 mySQL str_to_date() 将字符串转换为日期...因此您可以使用 mySQL 以日期格式（“yyyy-MM-dd”）直接保存字符串，然后使用 mySQL 方法 str_to_date() 进行转换。
[这里](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T07:54:05.150

MySQL 没有原生日期的语法。相反，它使用默认日期格式自动将日期从/转换为字符串：

```
mysql> SELECT @@date_format, @@datetime_format;
+---------------+-------------------+
| @@date_format | @@datetime_format |
+---------------+-------------------+
| %Y-%m-%d      | %Y-%m-%d %H:%i:%s |
+---------------+-------------------+
1 row in set (0.00 sec) 
```

...其中格式代码是[DATE_FORMAT()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数文档中解释的格式代码。您始终可以自己控制演员阵容，例如：

*   [DATE_FORMAT()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)将日期转换为字符串
*   [STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)从字符串转换为日期

话虽如此，事实是太多工具依赖`@@date_format`并`@@datetime_format`保持其出厂值，因此为整个系统更改它们可能会破坏很多东西。

PHP 扩展可以将日期列转换为[DateTime](http://es2.php.net/manual/en/class.datetime.php)对象（您没有说您正在使用哪个），但目前没有一个内置的对象可以做到这一点，这很遗憾。

# java - Java - 如何在字符串中搜索 6 个随机数

> ID：12681275
> 
> 赞同：5
> 
> 时间：2012-10-01T21:20:44.990
> 
> 标签：java, string, indexof, digits

我的应用程序中有一个（大）字符串文件，其中包含一系列随机字符 [aZ] 和 [0-9]，还包含“;”、“/”、“？”、“:”和“@”。我希望我的应用程序告诉我连续显示 6 位数字的最近位置（如“105487”或“558463”）。

实现这一目标的最佳方法是什么？感谢您对此进行调查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:28:21.010

你可以使用正则表达式。

```
String regex = "(\\d{6})";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(YOU STRING HERE);
// Check all occurrences
while (matcher.find()) {
    System.out.print("Start index: " + matcher.start());
    System.out.print(" End index: " + matcher.end());
    System.out.println(" Found: " + matcher.group());
} 
```

这将完成这项工作。

[（来自这里](https://stackoverflow.com/a/8938549/975959)的代码示例）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T21:24:14.350

在迭代字符串的字符时使用[Character.isDigit](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Character.html#isDigit%28char%29)，然后计数一个数字，直到找到 6 个连续数字，或者如果序列中断，则将其重置。跟踪索引，您可以简单地通过减法计算最近的位置。

这不是很有效，但我认为如果字符串不太大， *O(n)就足够了。*为了进行优化，请查看*Luiggi Mendoza*在评论中提出的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:25:13.163

一种*有效*的方法是迭代字符串的字符并测试每个字符是否是数字。找到匹配项后，继续寻找序列的其余部分。就像是

```
int nDigits=0, i = 0;
CharacterIterator it = new StringCharacterIterator("very long string123456");
for (char ch=it.first(); ch != CharacterIterator.DONE; ch=it.next()) {
  i++;
  nDigits = (ch.isDigit() ? nDigits++ : 0);
  if (nDigits == 5) {
      // DONE. Position is "i"
  }
} 
```

# makefile - 在复杂的 Makefile 中出错

> ID：12681277
> 
> 赞同：1
> 
> 时间：2012-10-01T21:20:56.753
> 
> 标签：makefile, typescript

我从 codeplex下载了[源代码，但出现了“make”错误：](https://git01.codeplex.com/typescript)

> [pc@localhost typescript]$ make Makefile:123: ***缺少分隔符（你的意思是 TAB 而不是 8 个空格？）。停止。

违规行显然是这里的第三行：

```
$(BUILT_LOCAL)\typescript.js: $(COMPILER_SOURCES)
$(STRC_LKG) $(COMPILER_SOURCES) -out $@
    copy CopyrightNotice.txt+$@ $(BUILT_LOCAL)\temp.js /b
    copy $(BUILT_LOCAL)\temp.js $@ 
    del $(BUILT_LOCAL)\temp.js 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:29:54.473

就像@JoePamer 在评论中指出的那样，它是一个 NMake 文件而不是 GNU Makefile。所以这与“make”**无关**

如果你想在 Linux 上使用“make”构建 TypeScript。看一下这个：

[https://gist.github.com/3815802](https://gist.github.com/3815802)

`UPDATE:`
我已经提交了关于这个问题的票。[typescript.codeplex.com/workitem/17](http://typescript.codeplex.com/workitem/17)

# asp.net-mvc-3 - 返回视图是重定向而不是显示它

> ID：12681279
> 
> 赞同：0
> 
> 时间：2012-10-01T21:20:59.767
> 
> 标签：asp.net-mvc-3, jquery

我的控制器中有这段代码：

**SomeController.cs**

```
public PartialViewResult DoSomething()
{
...
List<MyItem> myList= populateList();
return PartialView(myList);
} 
```

**查看.cshtml**

```
@using (Ajax.BeginForm("DoSomething", "Some", new AjaxOptions
            {
                HttpMethod = "POST",
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "resultFromDoSomething",
                LoadingElementId = "waitingRequest"
            }))

<div id="resultFromDoSomething"></div> 
```

该代码在 Internet Explorer 9 中运行良好，但在 Firefox 中，它不会填充名为**resultFromDoSomething**的 div，而是重定向到具有该视图的另一个页面。

我在这里做错了吗？

谢谢！

# php - css 和 php 不起作用

> ID：12681281
> 
> 赞同：-2
> 
> 时间：2012-10-01T21:21:05.487
> 
> 标签：php, css, wordpress, styles

由于某种原因，它不起作用。css 存储在 style.css 中，但复选框行内的样式也不起作用。

我的网站是：[http ://tinyurl.com/8g8ev2m](http://tinyurl.com/8g8ev2m)

谢谢...

ps 我使用 wordpress 和“帖子的 PHP 代码”插件，虽然我不确定它的问题

```
.Checkboxstyle {
    background-repeat: no-repeat;
    border: 2px solid #DDD;
    height: 150px!important;
    font-size: 150%;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px; 
    background-image: url(http://doarna.com/wp-content/uploads/2012/09/XCellcom.gif);}
}

<?php

global $wpdb;
$query = "SELECT * FROM wp_organization where type='תקשורת'";
$results = $wpdb->get_results( $query );

    foreach ($results as $result) {
        $MEATZBEN = $result->NAME;
        $MEATZBENID = $result->ID;
        echo "<input type='checkbox' name='$MEATZBENID'  class='Checkboxstyle' 
               style='font-size: 100px;' value='$MEATZBEN'>. $MEATZBEN<br />";

    }

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T21:24:41.137

假设您的所有标记实际上都是正确的，这里的问题是您将颜色应用于复选框 - 一个不显示文本的元素。您需要将颜色类应用于复选框旁边的任何文本。

```
<style>
.Checkboxstyle { color: red;}
</style>
<input type="checkbox" name="check1" value="1"> <label class="Checkboxstyle">This is my checkbox</label> 
```

# wcf - 使用 Ninject 在 Azure 上部署时 WCF 服务出现故障

> ID：12681286
> 
> 赞同：2
> 
> 时间：2012-10-01T21:21:24.740
> 
> 标签：wcf, azure, ninject, servicehost

从今天早上开始，我一直收到以下错误:(

> 无法激活请求的服务“http://10.175.156.xx:yyyyy/SomeService.svc”。有关详细信息，请参阅服务器的诊断跟踪日志。

在 Azure 上打开 svc 日志时，我看到以下警告和错误：

> W：无法打开 Ninjet.Extensions.Wcf.NinjectIISHostingServiceHost`1[MyNameSpace.Servicelayer.SomesSrvice W：故障 Ninject.Extensions.WCf.NinjectIISHostingServiceHost[MyNamespace.ServiceLayer.SomeService] W：ServiceHost 故障

有时，我会看到以下错误，然后是上面的警告：

> E：加载服务的性能计数器失败。此服务将无法使用性能计数器。实例 'SomeService@||SomeService.svc' 已存在于 CounterSet 'e829b6db-21ab-453b-83c9-d980ec708edd' 中。参数名称：InstanceName

上周运行良好，我在 Azure 上没有看到任何变化。

顺便说一句，它在本地运行良好。

编辑：由于我还不能回答我自己的问题，我正在编辑帖子以包含“解决方案”:(

`好的！看起来问题缺少一些参考:(

我在 WCF 项目中添加了一个类库项目，并且该类库引用了 MVC 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T00:00:14.927

两个提到该应用程序运行良好并且问题开始发生。正如您提到的缺少引用，正在运行的应用程序由于缺少引用而停止工作并不奇怪。当问题开始出现时是否有任何触发器，即 VM 回收、部署更新等，或者您是否将以前的 MVC 更新到 MVC4？

关于您的“加载服务的性能计数器失败”问题，它可能是由您的 ServiceHost 的紧密关闭/打开顺序中的时间问题引起的。ServiceHost 确实维护了特定的性能计数器，这些计数器无法被垃圾收集并导致此异常。您可以使用下面的代码来解决此问题：

```
GC.Collect() 
GC.WaitForPendingFinalizers() 
```

根据我的经验，由于缺少特定配置，可能会发生“请求的服务，***无法激活”问题，由于应用程序中的连接时间较长或运行时问题而发生超时。通过添加适当的引用可以肯定您的问题可以解决，但是您可能还需要查看服务配置以进一步避免此类问题。

# org-mode - 如何在 org-mode 中处理引号？

> ID：12681289
> 
> 赞同：18
> 
> 时间：2012-10-01T21:21:43.710
> 
> 标签：org-mode

如何在 org 模式下处理引号？类似于`>`stackoverflow中的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T22:46:41.907

我能想到的唯一内置机制是`#+begin_quote` [blocks](http://www.gnu.org/software/emacs/manual/html_mono/org.html#Paragraphs)，它可能[用于 export](http://comments.gmane.org/gmane.emacs.orgmode/45458)。我个人要么`>`从电子邮件中离开，要么使用[emacs 盒子](http://www.emacswiki.org/emacs/BoxQuote)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-19T15:38:09.033

您可以自定义元素的 CSS`blockquote`以获得更好的格式。

为什么`blockquote`是元素？如果你使用浏览器的inspect功能来检查引用块，你会发现它的样式是由`blockquote`元素控制的。

下面是一个类似 SO 的引用块的示例，您可以通过检查`blockquote`SO 中的样式找到配置。

```
#+BEGIN_EXPORT html
<style>
blockquote {
    margin-bottom: 10px;
    padding: 10px;
    background-color: #FFF8DC;
    border-left: 2px solid #ffeb8e;
    border-left-color: rgb(255, 228, 102);
    display: block;
    margin-block-start: 1em;
    margin-block-end: 1em;
    margin-inline-start: 40px;
    margin-inline-end: 40px;
}
</style>
#+END_EXPORT

#+BEGIN_QUOTE
By customizing the style of blockquote element, we get a SO-like style quote block in org-mode.
#+END_QUOTE 
```

它呈现像

[![在此处输入图像描述](../Images/87221b082dc856cdd5132a4f536ce636.png)](https://i.stack.imgur.com/r2LWo.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T13:04:29.753

您可以使用`:`

我只需要在引用组织代码本身时使用它。

相反，使用`#+BEGIN_SRC`，它使您有机会在 HTML 输出中对代码进行非常简洁的远程突出显示。

请参阅出色的手册。

# command-line - 如何在 shell 脚本中修改和转发可变数量的参数

> ID：12681290
> 
> 赞同：0
> 
> 时间：2012-10-01T21:21:44.210
> 
> 标签：command-line

我想要一个这样运行的脚本：

```
logphone Foo Bar Tar:I Baz:D 
```

实际运行

```
adb -d logcat dalvikvm:I ActivityManager:W AndroidRuntime:W Foo:* Bar:* Tar:I Baz:D *:S 
```

如何使用任意数量的参数来做到这一点？请注意，顺序有些重要（Foo、Bar 等不能放在最后）。如果重要，请抨击。

我可以将步骤分解为

1.  对于任意数量的命令行参数...
2.  检查每个参数是否有冒号 ( `:`)
3.  如果没有冒号 add `:*`，否则不管它
4.  将其注入命令行`adb logcat dal…time:W __INJECTED_ARGS__ *:S`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:28:19.370

试试下面的 bash 代码。不要忘记shebang（如果不是/bin/bash）和`chmod +x script.sh`：

```
#!/bin/bash

for arg; do
    if [[ "$arg" == *:* ]]; then
        args="$args $arg "
    else
        args="$args $arg:* "
    fi
done

exec adb -d logcat dalvikvm:I ActivityManager:W AndroidRuntime:W ${args[@]} *:S 
```

如果您最近有 bash（请参阅`bash -version`），我可以稍微改进一下。

# ruby-on-rails - Rails ActionMailer - 一种支持邮件模板子文件夹的方法？

> ID：12681293
> 
> 赞同：0
> 
> 时间：2012-10-01T21:21:56.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, subdirectory

有没有办法为 actionmailer 电子邮件模板创建子文件夹？

```
 def new_message(user)
    @user = user
    mail(:to => user.email, :subject => "You have recieved a new message!")
  end 
```

例如，将加载 /app/mailers/new_message.text.erb。有没有办法像 /app/mailers/messages/new_message.text.erb 一样存储邮件模板？

我尝试将其组织得更多，并且不喜欢 1 个大目录中的所有内容（想想文本和 html 版本 + 几个本地 _en、_fr 版本，这变成了一大堆文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:31:26.420

我不知道你是否真的可以做到这一点，但我相信你可以创建多个 ActionMailer 类，如 Notifier：

`class Notifier < ActionMailer::Base`

并在此处定义通知方法（欢迎消息，更改密码，...：自动消息）

有了它，您可以根据角色将“邮件方法”划分为不同的模型。

我知道它没有回答问题，但它是一种解决方法；）

# iphone - iphone和ipad上的网站都太宽了

> ID：12681298
> 
> 赞同：2
> 
> 时间：2012-10-01T21:22:27.360
> 
> 标签：iphone, css

谁能告诉我为什么以下网站在 iPhone 上渲染得非常宽？它被限制为 950px 宽，并且高度被指定为底部边距，以防页面太短。

![redletterdaysforbusiness.co.uk 在提问时。](../Images/de76e8e19635c0ea67218c2b75897dd3.png)

[http://redletterdaysforbusiness.co.uk](http://redletterdaysforbusiness.co.uk)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T09:50:21.687

您是否设置了视口大小？也许你可以试试这个。将其放在标题中

```
<meta name="viewport" content="width=1200"> 
```

# php - mysql_fetch_array 只打印第一个结果

> ID：12681299
> 
> 赞同：0
> 
> 时间：2012-10-01T21:22:27.080
> 
> 标签：php, mysql, arrays

> **可能重复：**
> [在 PHP 中循环 mysql_fetch_array](https://stackoverflow.com/questions/1208236/looping-through-mysql-fetch-array-in-php)

我有一个简单的连接查询，应该在循环中回显每个数组结果`foreach`。数组不为空。打印数组计数有效——有 801 个结果。但是，实际上打印出上面或内部的行`foreach`只打印第一个结果。任何帮助，将不胜感激。

```
$listQuery = "SELECT r.email_address
            FROM wholesale_accounts a
            LEFT JOIN wholesale_register r ON r.register_id = a.register_id
            WHERE r.email_address != ''
            ORDER BY r.email_address";            
$listResult = mysql_query($listQuery);
//print_r($listResult); // prints (Resource ID #21)
//exit;

$rows = mysql_fetch_array($listResult, MYSQL_ASSOC);
$count = mysql_num_rows($listResult);
//print_r($count); // prints 801
print_r($rows); // only prints first email address
exit;

foreach($rows as $row) {
    print_r($row); // prints email address          
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:28:10.357

`mysql_fetch_array`一次得到一行，所以你需要把它放在一个循环中

```
while($rows = mysql_fetch_array($listResult, MYSQL_ASSOC))
{
   print_r($rows);
} 
```

# jsf-2 - JSFViewState ID 会话范围？

> ID：12681300
> 
> 赞同：0
> 
> 时间：2012-10-01T21:22:30.723
> 
> 标签：jsf-2

我们在 weblogic 10.3.7 中部署的应用程序中有 JSF2.1.7，我们有默认的**state_saving_method 到服务器**。

我们的安全可以成功执行以下测试..

```
Session 1 
   1)  Access the login page 
   2) Post the login request with successful login.
   3) record the login form values along with ViewStateId.

Session 2
   1) Access the login page
   2) Post the login request with form values including view state id from session 1.
   3) successful login  (but expected view expired as it is different session). 
```

Viewstate id 只能在一个会话中使用，服务器状态保存方法证明不正确。

但它不是针对服务器中的会话 ID 存储的视图状态吗？，我们的设置中是否缺少任何内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:01:43.193

我会说这是按设计工作的。（`javax.faces.ViewState`在`SERVER`状态保存模式的情况下）对象旨在保留会话中正在查看的页面的条件，并使用`viewStateId`作为键映射到服务器端的对象。根据 JSF 实现，每个会话可以保存固定数量的视图状态对象。如果客户端试图回发一个`viewStateId`无法与`StateManager`给定会话中的密钥匹配或在任何地方找到的密钥，JSF 将假定该密钥可能已经存在于某个时间点并且已经过期，因此`ViewStateExpiredException`

# ios - iOS 6 - 如何在方向改变时运行自定义代码

> ID：12681304
> 
> 赞同：12
> 
> 时间：2012-10-01T21:22:56.457
> 
> 标签：ios, xcode, cocos2d-iphone, ios6, device-orientation

我正在创建一个游戏，允许设备处于横向左或横向右方向，并且玩家可以在暂停时更改方向。当他们这样做时，我需要改变游戏根据方向解释加速度计的方式。

在 iOS 5 中，我使用 willRotateToInterfaceOrientation 来捕获更改并更改我的变量，但在 iOS6 中已弃用。我现有的代码如下所示：

```
 if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)      
        rect = screenRect;

    else if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight){
        rect.size = CGSizeMake( screenRect.size.height, screenRect.size.width );
    GameEngine *engine = [GameEngine sharedEngine];
    if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft){
        engine.orientation = -1;
    } else {
        engine.orientation = 1;
    }
} 
```

我知道替换是 UIViewController 类中的 viewWillLayoutSubviews 方法。我正在 cocos2d 2.1 中构建这个游戏，并且在演示项目中似乎没有 UIViewController 类，所以我不清楚如何合并它以及代码应该如何看起来才能使其工作。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-01T21:37:33.967

监听设备方向变化：

```
[[NSNotificationCenter defaultCenter] 
       addObserver:self
          selector:@selector(deviceOrientationDidChangeNotification:) 
              name:UIDeviceOrientationDidChangeNotification 
            object:nil]; 
```

收到通知后，从 UIDevice 获取设备方向：

```
- (void)deviceOrientationDidChangeNotification:(NSNotification*)note
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    switch (orientation)
    {
        // etc... 
    }
} 
```

# git - 设置 Github Jenkins 插件时出现“无法连接到存储库”错误

> ID：12681308
> 
> 赞同：35
> 
> 时间：2012-10-01T21:23:01.783
> 
> 标签：git, github, jenkins

将我的存储库位置输入新作业的“源代码管理 > Git > 存储库 URL”部分时出现错误。我四处搜索并尝试了许多不同的 URL，但均未成功。

错误：

```
Failed to connect to repository : Error performing command: git ls-remote -h https://github.com/micdoodle8/Crossbow_Mod_2.git HEAD 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-28T13:28:32.360

您可能需要在**Manage Jenkins -> Configure System -> Git -> Git Installations -> Path to Git executable 中设置 git 可执行文件**的路径。

例如，我在 Windows 中遇到了同样的错误。我已经用巧克力安装了 git，并通过 Powershell 获得了位置：

```
Get-Command git.exe | Select Definition 
```

在 Unix 中，您应该能够：

```
which git 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-20T14:38:52.647

在詹金斯版本。2.7.4，(Path to Git executable)的设置属性现在在Manage Jenkins -> Global Tool Configuration -> Git -> Git Installations -> Path to Git executable。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-22T09:57:53.287

从詹金斯连接到 git 时，我得到了同样的结果。这是您想观看的一些清单：-

Jenkins 配置：-
1）检查是否正确指定了 git 可执行文件
2）提供 SSH 存储库链接 git@blahblah
3）在凭据下>>选择用户名和身份验证密钥（转到您的服务器，生成 SSH 密钥 ssh-keygen ... 复制密钥到 JENKINS_HOME/,ssh)
你应该能够从 Jenkins 连接到你的 GIT 存储库

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-27T03:23:54.533

您可能需要在管理 Jenkins -> 全局工具配置 -> Git -> Git 安装 -> Git 可执行文件的路径中设置 git 可执行文件的路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-01T06:14:18.317

当您的系统无法找到 git 安装时，可能会出现该问题。如果您在 VM 或本地系统上使用 Jenkins，请找到 git 安装文件夹。对我来说（AWS 上的 CentOS 机器）它在

`/usr/bin/git`

把这条路径放在詹金斯`Manage Jenkins -> Configure System -> Git -> Git Installations -> Path to Git executable`

[![在此处输入图像描述](../Images/19ea381817f3fe3bd3aea12b284ee34e.png)](https://i.stack.imgur.com/lA8cE.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-07T22:04:03.060

您应该为 Jenkins 安装[Github 插件](https://wiki.jenkins-ci.org/display/JENKINS/GitHub+Plugin)。

安装后，在项目的“配置”中，应该有一个“GitHub项目”的输入字段。在此处输入“https://github.com/micdoodle8/Crossbow_Mod_2”（不带引号）。此外，您在输入字段中输入相同的内容，该字段下方显示“存储库”（您在问题中提到的那个）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-03T16:39:39.537

您必须设置您的**Git 可执行文件的****路径**，该路径位于**Manage Jenkins的****Global Tool Configuration**中。我们可以通过 window power-shell 找到路径的位置： **Get-Command git.exe |** **选择** 图片中显示的定义为： [git 可执行路径的命令](https://i.stack.imgur.com/UQ1qK.png)

 ******* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-23T19:15:34.497

首先 git 应该正确安装在您的系统中。

检查安装 git 后是否在系统环境变量中给出了路径。安装 git C:\Apps\Git\bin C:\Apps\Git\cmd 后在系统变量“path”中添加以下路径

测试 - 在 cmd 提示符下运行 $ git -v

接下来，转到管理 Jenkins -> 全局工具配置 -> Git -> Git 安装 -> Git 可执行文件的路径 -> 输入路径，如 C:\Apps\Git\bin\git.exe （无论您的 git 安装在哪里）

有关此问题的详细说明和 Jenkins 中的 git 设置，您可以查看此博客文章 - [https://thewebspark.com/2020/07/24/git-and-github-setup-in-jenkins/](https://thewebspark.com/2020/07/24/git-and-github-setup-in-jenkins/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-08T17:27:08.270

嗯....如果您在 VM 中运行 jenkins，请确保安装包 'git-core' 或 'git'：

```
sudo yum install git 
```

毕竟，我们必须在运行 jenkins 的机器上安装了 git。否则你将无法运行 git 命令。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-23T20:42:19.180

如其他人所述，请确保您的 Git 可执行文件路径正确。小心你如何找到它：`git --exec-path`可能会给你一个错误的路径，例如我的路径是 C:/Program Files/Git/mingw64/libexec/git-core。现在，那里有一个 git.exe，但路径到 Git 可执行文件中的这条路径似乎是错误的。你需要的是（坚持我上面的例子） C:\Program Files\Git\bin\git.exe

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-25T04:42:33.197

对于 Window，当我在全局工具配置下给出完整路径时它起作用了：

C:\Program Files\Git\bin\git.exe******

# wordpress - 在子主题中加载子主题文件

> ID：12681310
> 
> 赞同：0
> 
> 时间：2012-10-01T21:23:14.193
> 
> 标签：wordpress, wordpress-theming, parent-child

我有一个函数，它本质上是转到主题文件夹并查找此目录和此路径，它使用：

```
get_template_directory() 
```

但似乎它正在父主题中寻找所述文件，是否有子主题的等价物，说 - 只在您自己的目录中查找，而不是父主题目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:58:04.953

`get_template_directory();`字面上是在寻找父主题。（父主题是“模板”，子主题是……嗯……“子主题”）

改为使用`<?php get_stylesheet_directory_uri(); ?>`，或

```
<?php 
$theme = get_bloginfo('stylesheet_directory');
echo = $theme;
?> 
```

或在您的functions.php文件中，您可以执行类似的操作

```
define( 'CHILD_DIR', get_stylesheet_directory() ); 
```

然后对于图像或您可以做的事情

```
printf(CHILD_DIR.'/images/image.jpg'); 
```

**编辑**

[这是其中](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)一些的来源，请注意第 3 或第 4 段

> 如果使用子主题，此函数将返回子主题目录 URI。如果您想要父目录，请改用 get_template_directory_uri()。

# java - 是否可以在运行时提取持久性单元配置信息？

> ID：12681312
> 
> 赞同：0
> 
> 时间：2012-10-01T21:23:27.093
> 
> 标签：java, database, hibernate, jakarta-ee, jpa

我正在开发一个应用程序（使用 JPA/Hibernate、Servlet、JSP、无框架的 Java EE），我发现在特定模块中更容易实现本机 SQL（而不是使用 ORM 直接解决方案）。完全没问题，但我希望它动态生成，即：我希望我的代码是防弹的，以防我更改持久性提供程序。

我想做类似的事情：

```
MySpecificQueryMakerInterface myQueryMaker = new MySpecificQueryMakerFactory(EntityManager.getPersistenceUnit().getProvider()); 
```

并在`MySpecificQueryMakerFactory,`创建足够的类来为我正在使用的当前数据库执行本机 SQL。这样做，我将能够创建将`MySpecificQueryMakerInterface`像`MyPostgresQueryMaker`or一样扩展的类`MyOracleQueryMaker`，并且我只会在添加新的特定数据库时更改工厂。

有没有办法使用 JPA/Hibernate 获取持久性单元/数据源的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:56:28.207

我认为最好的方法是在持久单元中指定一个自定义属性（例如类名），您可以通过[EntityManagerFactory#getProperties()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManagerFactory.html#getProperties%28%29)访问它。[您可以通过EntityManager#getEntityManagerFactory()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getEntityManagerFactory%28%29)获取工厂。

# python - 从 IOS 应用程序保存 Google 应用引擎 base64 照片

> ID：12681315
> 
> 赞同：0
> 
> 时间：2012-10-01T21:23:47.897
> 
> 标签：python, ios, json, google-app-engine, base64

您好我正在开发 IOS 应用程序。我还使用 JSON Web 服务。我还使用 Google App Engine for python。我对 python 和谷歌应用引擎真的很陌生。我无法弄清楚这个问题；

我在 json 中发送 base64 图像和其他信息。我想将其他信息保存到数据库（GQL）并保存到图像谷歌文件夹（Blob 商店），并且这张照片 url 与谷歌数据库中的其他信息一起保存。

你能帮我吗thanx

**更新**

```
import cgi
import datetime
import time
import urllib
import wsgiref.handlers
import os, urllib2, re, base64
import simplejson as json

from google.appengine.ext import db
from google.appengine.api import users,images, files
from google.appengine.ext import webapp
from google.appengine.ext import blobstore
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext.webapp import template
from google.appengine.ext import blobstore
from google.appengine.ext.webapp import blobstore_handlers
import logging

class PanoMessages(db.Model):
    first_name=db.StringProperty();
    last_name=db.StringProperty();
    msg_text=db.TextProperty();
    photo_url=blobstore.BlobReferenceProperty();

class IOSDeneme(webapp.RequestHandler):
    def post(self):
        received_content = self.request.body;

        try:
            decoded_json = json.loads(received_content);

            panoMsg=PanoMessages();
            panoMsg.photo_url=save_image_to_blobstore(decoded_json["picture"],"image/png");
            panoMsg.first_name=decoded_json["first_name"];
            panoMsg.last_name=decoded_json["last_name"];
            panoMsg.msg_text=decoded_json["msg_text"];
            panoMsg.put();

            self.response.out.write(json.dumps({'StatusCode':'2', 'StatusMessage':'OK'}));

        except ValueError:

                logging.error("json-time sent data which simplejson couldn't parse")
                self.response.out.write(json.dumps({'StatusCode':'4', 'StatusMessage':'NO'}));

        def save_image_to_blobstore(base64str, mimeType):
            from google.appengine.api import files
            import binascii
            fileName1 = files.blobstore.create(mime_type=mimeType)
            with files.open(fileName1, 'a') as f:
                f.write(binascii.a2b_base64(base64str))
                files.finalize(fileName1)
            return files.blobstore.get_blob_key(fileName1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:14:06.687

我还没有对此进行测试，但这应该接受您的 base64 字符串和图像的 mime_type 以将其存储到 blobstore 中，然后返回该图像的 blob_key：

```
def save_image_to_blobstore(base64str, mime_type):
  from google.appengine.api import files
  import binascii
  file_name = files.blobstore.create(mime_type=mime_type)
  with files.open(file_name, 'a') as f:
    f.write(binascii.a2b_base64(base64str))
  files.finalize(file_name)
  return files.blobstore.get_blob_key(file_name) 
```

您将使用返回的 blob 键并将其存储在一个模型中，该模型将其他信息存储在您的 JSON 对象中，如您所述。然后，您可以使用您想要的 URL 方案提供图像（可能基于密钥或 ID 或存储您的其他 JSON 信息的模型）。请参阅：[https ://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob](https://developers.google.com/appengine/docs/python/blobstore/overview#Serving_a_Blob)

# email - 像 Sendgrid 这样的第三方电子邮件服务会“中继”我的消息吗？

> ID：12681318
> 
> 赞同：1
> 
> 时间：2012-10-01T21:23:59.713
> 
> 标签：email, smtp

我将构建一个 Web 应用程序，允许用户创建他们自己的时事通讯并将它们通过电子邮件发送给他们的订阅者。

关于 SendGrid、PostageApp、JangoSMTP 等服务的工作原理，我有一个非常高级的问题…… **基本上，这些服务可以接受我提供的任何 HTML 内容，然后将它们作为电子邮件传输吗？**

在访问其中一些服务的网站时，它提到了友好的 UI 以帮助创建电子邮件模板。但这不是我感兴趣的。我只是对第三方提供商感兴趣，可以转发我的网络应用程序提供的任何 html 文档。这将消除我配置自己的 smtp 服务器的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:33:20.970

是的。将 SMTP 邮件上的 HTML 正文设置为您的内容。

# rtf - 验证富文本结构 RTF

> ID：12681320
> 
> 赞同：6
> 
> 时间：2012-10-01T21:24:04.160
> 
> 标签：rtf, mapi, richtext

MS Exchange / Outlook 邮件使用 MAPI 存储数据。一个常见的 MAPI 属性包含消息正文的富文本版本（0x1009、PR_RTF_COMPRESSED、PidTagRtfCompressed）。如果富文本字符串的结构无效，则 Outlook 2003 及更早版本无法显示任何正文内容。

例如，此 RTF 代码省略了结束“}”。

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fswiss\fcharset0 Arial;}}
{\*\generator Msftedit 5.41.15.1515;}\viewkind4\uc1\pard\f0\fs20 asdfasdf\par 
```

正确的版本是

```
{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fswiss\fcharset0 Arial;}}
{\*\generator Msftedit 5.41.15.1515;}\viewkind4\uc1\pard\f0\fs20 asdfasdf\par
} 
```

是否有可用于测试 RTF 代码是否有效的 .NET 方法或库？如果没有，我愿意接受 C++ 和 Java 或 COM 库。如果没有，是否有应用程序报告 RTF 字符串中的违规行为？

理想的解决方案是报告包含不规则的行号。一个适当的解决方案将报告整个 RTF 是否有效且格式正确。

此问题与 MAPI 无关。例如，如果将上面指定的无效 RTF 字符串写入 .RTF 文件，它会在 WordPad 5.1 中正确打开，但 Word 2007 报告错误并请求我修复文件。

* * *

一个建议是我将 RTF 流式传输到富文本框中。我试过这段代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            string aaa = richTextBox1.Rtf;
            richTextBox1.Rtf = @"{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fswiss\fcharset0 Arial;}}{\*\generator Msftedit 5.41.15.1515;}\viewkind4\uc1\pard\f0\fs20 asdfasdf\par}";
            richTextBox1.Refresh();
        } 
```

无论richTextBox1.Rtf 是否以“}”结尾，富文本框都会将其显示为其内容：asdfasdf

当我省略最后一个“}”时，我正在寻找的解决方案会报告错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:56:54.690

为什么不将 RTF 加载到隐藏的 RTF 控件中，然后将其输出？究竟什么会设置无效的 RTF？我认为 Outlook 从来没有这样做过。

# php - 如何制作 php 代码，以便某些用户等级能够查看我的类别

> ID：12681321
> 
> 赞同：-1
> 
> 时间：2012-10-01T21:24:04.143
> 
> 标签：php, mysql

这是我的php代码。我想知道是否可以创建一个 if 语句，因此它只能由用户级别为 1 的用户查看。我尝试了一个 if 语句，但我得到一个 Unexpected T_STRING 我的数据库有这个[http://prntscr.com /glmqi](http://prntscr.com/glmqi) cat_mod 用于 if 语句，因为它是主持人主题。

```
<?php

$sql = "SELECT
        cat_id,
        cat_name,
        cat_description
    FROM
        categories
    WHERE
        cat_id = " . mysql_real_escape_string($_GET['id']);

$result = mysql_query($sql);

if(!$result)
{
echo 'The category could not be displayed, please try again later.' .   mysql_error();
}
else
{
if(mysql_num_rows($result) == 0)
{
    echo 'This category does not exist.';
}
else
{
    //display category data
    while($row = mysql_fetch_assoc($result))
    {
        echo '

<h3>You are currently in this section: <u>' . $row['cat_name'] . '<u/></h3>
</div>
  <div class="container_oro2" style="overflow: hidden;">
  Users currently viewing this section:
  </div><div class="header">
    <h3 class="header_title">Topics in this section</h3>
    <div class="header_topics">Hits</div>
    <div class="header_replies">Replies</div>
    <div class="header_action">Last Action</div>
</div><table class="container">';
    }

    //do a query for the topics
    $sql = "SELECT  
                topics.topic_id,
                topics.topic_subject,
                topics.topic_date,
                topics.topic_cat,
                topics.topic_by,
                topics.view,
                topics.reply,
                users.user_id,
                users.user_name
            FROM
                topics

            LEFT JOIN
                    users
                ON
                    topics.topic_by = users.user_id             
            WHERE
                topic_cat = " . mysql_real_escape_string($_GET['id']);

    $result = mysql_query($sql);

    if(!$result)
    {
        echo 'The topics could not be displayed, please try again later.';
    }
    else
    {
        if(mysql_num_rows($result) == 0)
        {
            echo 'There are no topics in this section yet.';
        }
        else
        {
            //prepare the table

            while($row = mysql_fetch_assoc($result))
            {               
                echo '

                <tr class="altcolor_2">';

            echo '<td class="title">';
            echo '  <table>';
                    echo '<tr>';
                        echo '<td class="title_icon_small">
                            <img src="http://www.naruto-boards.com/images/forum/topic_old.gif" alt="" />                            </td>
                        <td class="title_icon_small">
                            <img src="http://www.naruto-boards.com/images/forum/topic_sticky.gif" alt="" />                             </td>
                        <td class="title_title">';
                            echo '<h4 class="inline"><a href="/index.php?area=topic&id=' . $row['topic_id'] . '">' . $row['topic_subject'] . '</a>   ';                                          echo '<img class="pages" src="http://naruto-boards.com/images/forum/topic_paging.gif"  alt="" /> </h4> ';
                            echo'<span>Started on ';  echo date(" F j, Y, g:i A", strtotime($row['topic_date'])); echo' by <a  href="/profile/kross/" class="profilelink"></a></span>';
                        echo '</td>';
                    echo '</tr>';
                echo '</table>';

            echo '</td>';
            echo '<td class="info1">' . $row['view'] . '</td>';
            echo '<td class="info1">' . $row['reply'] . '</td>';
            echo '<td class="info2">
                <div>';
                    echo'Date: ';echo date(" F j, Y, g:i A", strtotime($row['topic_date']));echo'<br />';
                    echo 'By: <a href="/profile/igi33/"  class="profilelink"></a>';

                echo '</div>';
            echo '</td>';
        echo '</tr>';
        echo '<tr class="spacer"><td colspan="4"></td></tr>

';

            }
        }
    }
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:43:26.733

尝试在,`if`的末尾添加一个`$sql``$result = ....`

```
if ($user_level != 1) { $sql .=  " AND `cat_mod` = 0";} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:47:27.330

您需要进行数据库调用以获取`cat_mod`并将其与您的用户级别进行比较（最好您将在脚本的一开始就拥有您的用户级别。）并将这两个值相互比较。与此类似的东西。

```
<?php
$sql = "select name, level 
        FROM users 
        WHERE id = $userId 
        AND name = $userName"; // You have to be storing a cookie or something so that we know the user is logged in and is who they say they are.
$result = mysql_query($sql);
$user = mysql_fetch_assoc($result);
?> 
```

您现在可以有条件地附加到您的 SQL 语句，检查是否允许用户查看 mod 类别。

```
$sql = "SELECT
    cat_id,
    cat_name,
    cat_description
FROM
    categories
WHERE
    cat_id = " . mysql_real_escape_string($_GET['id']);

if ($user["level"] == 0) {
    $sql .= " AND cat_mod = 0";
} 
```

请注意，我列出的两个 SQL 调用实际上都不是安全的。

# javascript - Javascript - 在构造函数中使用左侧赋值更改对象

> ID：12681323
> 
> 赞同：2
> 
> 时间：2012-10-01T21:24:14.177
> 
> 标签：javascript, inheritance, extends

我一直在尝试各种方法来模拟 Javascript 中的经典继承，并且我找到了一些方法来做到这一点。但是，我很好奇为什么我不能以一种特定的方式做到这一点，以及如何尝试解决它。

我试过这个：

```
var squeaker = new squeek();

function monsterMaker(newMonster) {
    newMonster.type = "monster";
    newMonster.health = 10;
    return newMonster;
}

function squeek() {
    this.name = "squeek";
    this = monsterMaker(this);
} 
```

我想我理解为什么会发生这种情况，并且我已经找到了解决方法（即 jQuery 的 $.extend），但是有没有办法使用左手赋值或解决方法以这种方式更改新创建的对象，不使用额外的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:25:41.533

这是一种使用原型继承的方法，. 要查看控制台输出，请在 Chrome 中按 F12 或在 FireFox 中打开 FireBug。Chrome 会给你一个交互式对象来深入研究。

```
function monsterMaker() {
    this.type = "monster";
    this.health = 10;
}

function squeek() {
    this.name = "squeek";
    //monsterMaker.call(this); // sets properties on this
}
squeek.prototype = new monsterMaker();
squeek.prototype.constructor = monsterMaker;

var squeaker = new squeek();

console.log(squeaker);
console.log(squeaker.name);
console.log(squeaker.type);
console.log(squeaker.health); 
```

在这里看到它的工作：

[http://www.quirkscode.com/flat/forumPosts/extendThis/extendThis.html](http://www.quirkscode.com/flat/forumPosts/extendThis/extendThis.html)

以下是一些链接：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)

从上面的第二个 MDN 链接中提取，您可以使用“新 JavaScript 方式”（ECMAScript 5）因此（包括用于扩展和示例代码的库 - 使用控制台查看示例输出：

```
// Original Author:  FireFly - Jonas Höglund - ##javascript channel
// on irc.freenode.net - see THANKS File

///////////////
// Library code
///////////////

var ExtendBase = {};

Object.defineProperty(ExtendBase, 'extend', {
    enumerable: false
    , value: function(obj) {
        'use strict';

        var descs = {}
        , objectInheritCounter = 0;

        objectInheritCounter += 1;

        Object.getOwnPropertyNames(obj).forEach(function(key) {
        descs[key] = Object.getOwnPropertyDescriptor(obj, key)
        });

        return Object.create(this, descs);
    }
});

///////////////
// Sample Usage
///////////////

var Person = ExtendBase.extend({
  // missing: name

  // A person can tell you its name.
  talk: function() {
    return "Hello, I'm " + this.name
  }
})

var WorkingPerson = Person.extend({
  // missing: name, occupation

  // A working person also tells you their occupation when they talk.
  talk: function() {
    return Person.talk.call(this) + " and I am a " + this.occupation
  }
})

var p1 = WorkingPerson.extend({ name:"Harry", occupation:"wizard" })
console.log(p1.talk()); // "Hello, I'm Harry and I am a wizard" 
```

在这里看到它的工作：

[http://www.quirkscode.com/flat/JSLearning/src/extend/extend.html](http://www.quirkscode.com/flat/JSLearning/src/extend/extend.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:28:15.717

您不能分配给`this`，但您不需要：您的代码（如果有效）将等效于此代码，它确实有效：

```
var squeaker = new squeek();

function monsterMaker(newMonster) {
    newMonster.type = "monster";
    newMonster.health = 10;
    return newMonster;
}

function squeek() {
    this.name = "squeek";
    monsterMaker(this); // sets properties on this
} 
```

（虽然 JavaScript 是按值传递的，但这种情况下的“值”是整个`this`对象，所以在某些方面它就像按引用传递。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:28:23.923

不，您不能分配给[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this). 但是，您不需要！只需将实例 ( `this`)传递给`monsterMaker`，该函数就会为其添加一些属性 - 这正是您想要的。您不需要返回对象，或使用返回的对象 - 它仍然是`this`.

```
function Squeek() {
    this.name = "squeek";
    monsterMaker(this);
}

new Squeek(); // will have type and health 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T21:37:08.977

你应该试试：

```
var squeaker = new squeek();

function monsterMaker(newMonster) {
    this.type = "monster";
    this.health = 10;
}

function squeek() {
    this.name = "squeek";
    monsterMaker.call(this);
} 
```

这样，您可以使用 monsterMaker 函数的属性“装饰”您想要的任何对象。

但是，进一步思考，我认为你已经到了需要原型继承的地步......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T22:27:17.320

JavaScipt 是一种基于原型的语言。与其尝试模仿经典的面向对象语言，不如屈服于原型。

在这种情况下，您要创建一个`Monster`原型；以及`Squeek`基于原型的`Monster`原型。然后`squeaker`从`Squeek`对象实例化 a 。

```
/* Set up your Monster prototype */
function Monster() { /* constructor */}
Monster.prototype.type = "monster";
Monster.prototype.health = 10;

/* Now use the prototype of a Monster to create the prototype of a Squeek */
function Squeek() { /* constructor */ }
Squeek.prototype = new Monster(); // thanks Bergi and RobG
Squeek.prototype.constructor = Squeek; // thanks RobG
Squeek.prototype.name = "squeek";

/* Now let's instantiate a Squeek */
var squeaker = new Squeek();
console.log(squeaker.name); // squeek
console.log(squeaker.type); // monster
console.log(squeaker.health); // 10
console.log(squeaker.constructor === Squeek); // true

var monster = new Monster();
console.log(monster.name); // undefined 
```

# java - 使用 JAX-RPC 将 Java 对象转换为 xml 字符串

> ID：12681326
> 
> 赞同：3
> 
> 时间：2012-10-01T21:24:24.090
> 
> 标签：java, marshalling, jax-rpc

我需要使用 jax-RPC 编组一个 java 对象吗？使用 JAXB 编组非常简单

```
 JAXBContext.newInstance("myClassName").createMarshaller.marshall(myObject,new ByteArrayOutputStream Object); 
```

但没有为 JAX-RPC 找到类似的方法。以前有人这样做过吗？

任何帮助都非常感谢！

# css - 是否可以在 CSS 精灵中使用基于百分比的定位？

> ID：12681328
> 
> 赞同：0
> 
> 时间：2012-10-01T21:24:35.737
> 
> 标签：css

我正在使用基于 % 的定位来对齐 CSS 中的背景图像：

```
li a{
    background:url(icons/arrow.png) no-repeat 95% 50%;
} 
```

我在响应式网站上经常使用它，但想将这些图像组合成一个精灵。

但是，如果我使用精灵，百分比将相对于整个精灵图像，并且看起来我不能再`background-position`以同样的方式使用我的。

或者有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:52:20.753

精灵没有响应。它们是固定大小的位图，不能缩放。所以你的尺寸应该是固定的。

# ios - 我可以从另一个 UIViewController 推送 UINavigationController

> ID：12681329
> 
> 赞同：-1
> 
> 时间：2012-10-01T21:24:36.143
> 
> 标签：ios, uinavigationcontroller

我认为这是一个愚蠢的问题，但我试图为我的案件找到解决方案，但我失败了......

登录后我的应用程序从登录屏幕开始，我展示了 MainUIViewController，从主我有很多按钮，其中一个可以打开一个新的 UINavigationController.. 这可能吗？

```
[window addSubview:[navigationController view]]; 
```

如果我将导航设置为主视图它的工作，但不是来自另一个 UIViewController..

我也试过

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self.view addSubview:[self.navController view]];// = [self.navController view];
    }
     return self;
} 
```

但失败

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:04:22.677

MainUIViewController 是窗口的根视图控制器吗？如果是这样，为什么不将它添加到 UINavigationController 然后使导航控制器成为窗口的根视图控制器？如果您担心 MainUIViewController 不需要导航栏，您可以使用 UINavigationController 上的 setNavigationBarHidden: 方法轻松隐藏它。然后，您可以在后续视图控制器上取消隐藏它。这样，您从导航控制器开始，只需将新的视图控制器推送到堆栈上。

# c++ - 静态成员继承与保护

> ID：12681332
> 
> 赞同：0
> 
> 时间：2012-10-01T21:24:43.850
> 
> 标签：c++

我确实对静态成员继承及其在 C++ 中的保护有疑问。我希望我会足够清楚，因为编写思维状态并不总是那么容易:) 我正在为一个图形程序编写一个简单的（文本解析器），该程序正在加载具有自定义格式的文本文件，现在文本部分几乎完成了并且现在我需要生成一些对象来为它们提供我从文件中加载的数据。

我相信这个问题属于 C++ 的第 1 小时，但我卡住了。例如，我从文本文件中加载了 2 种类型的逻辑“节点”，即 LAYER 和 PLINE，它们还具有它们可以或不能对两者通用的属性。LAYER 与 PLINE 和 back 的关系现在完全无关紧要，困扰我的是如何连接和处理两者的属性：

假设我选择**DataObj**作为两者的基类。DataObj 有一个名为“name”的成员，因为 LAYER 和 PLINE 都可以有一个名称。LAYER 有一个属性，该属性仅对图层通用，例如。“锁定”，并且 PLINE 具有仅对 pline 通用的属性，例如。“颜色”。在做事的“学校方式”中，它看起来像：

```
/// i use const char* for everything to not complicate things ... 
...
class DataObj {
  ...
  const char* name;
  ...
}
...
class Layer : public DataObj {
 ...
 const char* locked;
 ...
}
...
class Pline : public DataObj {
 ...
 const char* color;
 ... 
}
...
int main(){
   Layer* l = new Layer();
   l.name = "first layer";
   l.locked = "false";

   Pline* p = new Pline();
   p.name = "wonderful line";
   p.color = "0xFF3300";
}
... 
```

现在我想以更“动态”的方式做到这一点，因为我真的不关心静态类型的成员名称（将来可能还有访问器），尤其是在为对象提供来自解析器的数据时。我的意思是只用 2 种节点类型很容易做到这一点，但我将拥有数十种以上的节点类型。

所以我想做的概念是“静态地”推送每个节点类型（类）的允许属性的向量，然后只检查对象中是否允许此属性并在解析期间设置它。我可能想要 2 个重要成员 1\. 是 kv 对的 std::map，第二个是特定节点允许属性的静态向量。按照之前输入的代码：

```
...
class DataObj {
  ...
  static std::vector<const char*> allowedAttrs;
  std::map <const char*, const char*> attrs;

  private: 
     static bool isInit;
  ...
}
...
DataObj::DataObj(){
  if(!isInit)
    allowedAttrs.push_back("name");
  isInit = true;
}
...
Layer::Layer(){
  if(!isInit) // private static for Layer
     allowedAttrs.push_back("locked");
}
...
Pline::Pline(){
  if(!isInit) // private static for Pline
     allowedAttrs.push_back("color");
}
... 
```

我在这里遇到的问题可能从月球上可以看到。如果我们首先初始化一个新层，然后是一个新的 Pline，Pline 将在 allowedAttrs 向量中具有名称、锁定和颜色，这是不正确的，因为“锁定”应该只对层节点有效。

所以我需要一些方法来解决这个问题，因为成员“allowedAttrs”成为“私有”的不常见属性，如图层对象中的“锁定”，但也保留了超类“DataObj”的“公共”性质 -因此它可以捕获“名称”等共享属性。换句话说，我不想“破坏”到基类的“继承流”，并为每个节点类（对象）定义新变量，一遍又一遍地重复相同的代码。（类似于虚拟变量）。

我希望这个问题不是（那么）愚蠢，并且真的会感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:49:16.097

1）我会为每种类型使用单独的静态成员来保存每种类型的允许属性。
2）将静态成员移动到函数中，这样更安全，并且可能避免检查它是否一直被初始化（取决于你的编译器有多好和其他细节） 3）除了非常具体的事情外，
不要使用。`const char*`如果您不知道这些东西是什么，请始终使用`std::string`. 在这种情况下，我们*必须*使用`std::string`.
4）我`allowedAttrs`从一个向量更改为一个`set`，这对于大量属性可能会更快，而对于较小的数字可能会更慢。

这是基础：

```
class DataObj {
  const std::set<std::string>& get_allowed_data_attributes() static {    
    static std::set<std::string> allowedAttrs = {"name"};
    return allowedAttrs;
  }
  std::map <std::string, std::string> attrs;
  public:
     DataObj(){ }
     void set_attribute(std::string key, std::string value) {
         auto it = get_allowed_data_attributes().find(key);
         if (it  == get_allowed_data_attributes().end())
            throw bad_key_exception(key);
         attrs.insert(std::make_pair(std::move(key), std::move(value)));
     }
     const std::string& get_attribute(const std::string& key) const {
         auto it = attrs().find(key);
         if (it  == attrs().end())
            throw bad_key_exception(key);
         return it->second;
     }
}; 
```

这是派生的：

```
class Layer : public DataObj {
  const std::set<std::string>& get_allowed_data_attributes() static {    
    static std::set<std::string> allowedAttrs = {"locked"};
    return allowedAttrs;
  }
  public:
     DataObj(){ }
     void set_attribute(std::string key, std::string value) {
         auto it = get_allowed_data_attributes().find(key);
         if (it  == get_allowed_data_attributes().end())
            DataObj::set_attribute(std::move(key), std::move(value));
         else
            attrs.insert(std::make_pair(std::move(key), std::move(value)));
     }
     const std::string& get_attribute(const std::string& key) const {
         auto it = attrs().find(key);
         if (it  == attrs().end())
            return DataObj::get_attribute(key);
         else
            return it->second;
     }
}; 
```

请注意，如果您给它一个无效的密钥，它会抛出一个`bad_key_exception`，您必须添加它。确保它继承自`std::runtime_error`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:47:21.580

以下是我将如何实现您的允许属性向量。我会让每种类型都包含一个允许的属性列表，在初始化期间复制它们的基类列表。

```
class DataObj {
  ...
  static std::vector<std::string> allowedAttrs;
  std::map <std::string, std::string> attrs;

  private: 
     static bool isInit;
  ...
}
class Layer {
  static std::vector<std::string> allowedAttrs;
  ...
};
class PLine {
  static std::vector<std::string> allowedAttrs;
}
...
DataObj::DataObj(){
  if(!isInit)
    allowedAttrs.push_back("name");
  isInit = true;
}
...
Layer::Layer(){
  if(!isInit) { // private static for Layer
     allowedAttrs = DataObj::allowedAttrs;
     allowedAttrs.push_back("locked");
  }
}
...
Pline::Pline(){
  if(!isInit) { // private static for Pline
     allowedAttrs = DataObj::allowedAttrs;
     allowedAttrs.push_back("color");
  }

} 
```

笔记：

*   使用`std::string`, 不能`char*`同时用于矢量和地图。虽然`vector<char*>`可能有用，但 `map<char*,char*>`只是一个错误。

*   您可以通过让查找函数更智能一些来避免复制基类的列表。

# java - Android：设置壁纸以适应屏幕

> ID：12681333
> 
> 赞同：0
> 
> 时间：2012-10-01T21:24:46.290
> 
> 标签：java, android

我有设置壁纸的代码（需要 android.permission.SET_WALLPAPER）

```
// this is inside activity
WallpaperManager wallpaperManager = WallpaperManager.getInstance(this); 
wallpaperManager.setBitmap(bitmap); 
```

我的问题是，如何调整此代码以将壁纸设置为适合屏幕两个选项：

1.  如果图像分辨率低于屏幕分辨率 - 拉伸它。
2.  如果图像分辨率高于屏幕分辨率 - 将其缩小。

注意：在将其设置为墙纸之前，我已经尝试将位图缩放到屏幕的分辨率，但实际上它看起来比不缩放更有价值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-02-21T14:32:57.650

我做了一个应用程序来设置壁纸，我尝试了很多东西......真正对我有用的是这个方法：

```
// Crop or inflate bitmap to desired device height and/or width
public Bitmap prepareBitmap(final Bitmap sampleBitmap,
                            final WallpaperManager wallpaperManager) {
    Bitmap changedBitmap = null;
    final int heightBm = sampleBitmap.getHeight();
    final int widthBm = sampleBitmap.getWidth();
    final int heightDh = wallpaperManager.getDesiredMinimumHeight();
    final int widthDh = wallpaperManager.getDesiredMinimumWidth();
    if (widthDh > widthBm || heightDh > heightBm) {
        final int xPadding = Math.max(0, widthDh - widthBm) / 2;
        final int yPadding = Math.max(0, heightDh - heightBm) / 2;
        changedBitmap = Bitmap.createBitmap(widthDh, heightDh,
                Bitmap.Config.ARGB_8888);
        final int[] pixels = new int[widthBm * heightBm];
        sampleBitmap.getPixels(pixels, 0, widthBm, 0, 0, widthBm, heightBm);
        changedBitmap.setPixels(pixels, 0, widthBm, xPadding, yPadding,
                widthBm, heightBm);
    } else if (widthBm > widthDh || heightBm > heightDh) {
        changedBitmap = Bitmap.createBitmap(widthDh, heightDh,
                Bitmap.Config.ARGB_8888);
        int cutLeft = 0;
        int cutTop = 0;
        int cutRight = 0;
        int cutBottom = 0;
        final Rect desRect = new Rect(0, 0, widthDh, heightDh);
        Rect srcRect = new Rect();
        if (widthBm > widthDh) { // crop width (left and right)
            cutLeft = (widthBm - widthDh) / 2;
            cutRight = (widthBm - widthDh) / 2;
            srcRect = new Rect(cutLeft, 0, widthBm - cutRight, heightBm);
        } else if (heightBm > heightDh) { // crop height (top and bottom)
            cutTop = (heightBm - heightDh) / 2;
            cutBottom = (heightBm - heightDh) / 2;
            srcRect = new Rect(0, cutTop, widthBm, heightBm - cutBottom);
        }
        final Canvas canvas = new Canvas(changedBitmap);
        canvas.drawBitmap(sampleBitmap, srcRect, desRect, null);

    } else {
        changedBitmap = sampleBitmap;
    }
    return changedBitmap;
} 
```

它来自[本手册](https://www.teusink.eu/2014/11/load-bitmap-efficiently-and-set-it-as.html)的代码，您将在其中找到更多正确调整图像大小的方法。

# sql - 字段的 SQL 两个计数

> ID：12681334
> 
> 赞同：1
> 
> 时间：2012-10-01T21:24:46.783
> 
> 标签：sql

我的桌子是，

```
 customdata check service loc value
  101        0    0        4   4
  101        0    0        3   3
  101        5     4       4    3
  102        0     0       1     2
  102        4     4       3     3
  103        0     0       4     4 
```

我的结果应该是，

```
 customdata cnt splcnt//count of check when not 0
   101        3    1
   102        2    1
   103        1    0 
```

谁能告诉我我应该如何让我的查询来计算这两个数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:28:41.053

使用`CASE`语句有条件地`SUM`基于 的值`check`：

```
SELECT
    customdata,
    COUNT(*) AS cnt,
    SUM(CASE WHEN check > 0 THEN 1 ELSE 0 END) AS splcnt
FROM YourTable
GROUP BY customdata 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:37:25.463

表名 = tcustomdata，检查 col 重命名为 chck

```
SELECT a.customdata, a.cnt AS CNT_ALL, c.cnt AS chckcnt
FROM (SELECT customdata, COUNT(*) AS cnt FROM tcustomdata GROUP BY customdata) a
LEFT OUTER JOIN 
(SELECT customdata, COUNT(*) AS cnt FROM tcustomdata WHERE chck != 0 GROUP BY customdata) c
ON a.customdata = c.customdata 
```

在[sql fiddle上查看](http://sqlfiddle.com/#!2/90b05/3)

# angularjs - angular.js chrome 访问控制允许来源

> ID：12681335
> 
> 赞同：8
> 
> 时间：2012-10-01T21:24:49.920
> 
> 标签：angularjs

我正在尝试使用 Angular.js 服务从我使用 Jersey/Spring 制作的 REST 服务中获取 JSON。

当我使用 firefox 时，它工作正常，但是当我转到 Chrome 时，我收到了消息：

```
XMLHttpRequest cannot load http://localhost:8080/VirtualLawyerPj/services/timeoftheday/asjson/tue. Origin http://localhost:8090 is not allowed by Access-Control-Allow-Origin. 
```

这是我的服务代码：

```
angular.module('myAppServices', ['ngResource']).
factory('Time', function($resource){
    return $resource('http://localhost:port/VirtualLawyerPj/services/timeoftheday/asjson/tue',{port:":8080"}, {
        query: {method:'GET', params:{}, isArray:false}
    });
}); 
```

有人有同样的问题吗？你是怎么做到的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:39:24.530

我自己还在学习 Angular，但是使用 $location 服务来获取当前的 url 主机和端口使得在环境之间移动代码时变得更容易。顺便说一句，这也帮助我克服了你描述的问题。

```
angular.module('myAppServices', ['ngResource']).
factory('Time', ['$location', function($location) {
  var url = 'http://:host::port/VirtualLawyerPj/services/timeoftheday/asjson/tue';
  var params = {
    host: $location.host(),
    port: $location.port()
  };
  var actions = {
    query: {method:'GET', isArray:false}
  };
  return $resource(url, params, actions);
}]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T12:03:59.693

CORS 解决方案在[html5rocks](http://www.html5rocks.com/en/tutorials/cors/)教程中进行了描述。为我工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T23:57:05.123

我有一个在端口 80 上运行的 Apache 服务器和在端口 8889 上运行的 REST Web 服务，同一台服务器。我尝试了这个解决方案但没有奏效：

```
    myApp.config(['$httpProvider', function($httpProvider) {
        $httpProvider.defaults.useXDomain = true;
        删除 $httpProvider.defaults.headers.common['X-Requested-With'];
    }]);
```

我想出让它工作的唯一方法是：

1.  在 services.js 文件中：

    ```
    angular.module('mirthServices', ['ngResource'])。
        工厂（'Cs'，功能（$资源）{
            return $resource('http://localhost/rest/cs/id/:csId');
        });

    ```

2.  在 apache proxy.conf 文件中：

    ```
    ProxyPass /rest http:// localhost:8889/REST
    ProxyPassReverse /rest http:// localhost:8889/REST

    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T14:30:18.993

I solved this problem by changing in apache in file httpd.conf :

```
....
<Directory>
    .....
    Header set Access-Control-Allow-Origin "*"
</Directory> 
```

I added the line Header set, hope this help someone

# clojure - Clojure Noir 路由优先级

> ID：12681337
> 
> 赞同：0
> 
> 时间：2012-10-01T21:24:56.757
> 
> 标签：clojure, routing, routes, noir

我正在使用 Noir 开发一个 Web 应用程序。但是，我遇到了路由问题。这是我的控制器的代码示例：

```
(defpage [:get "/users/add"] []
    (common/layout
      [:div.row
       [:div.span12
        [:div.page-header
         [:h2 "Add User"]]
        (form-to {:class "form-horizontal"} [:post "/users/add"]
         (user-form {:id ""
                    :first_name ""
                    :last_name ""
                    :login ""
                    :email ""
                    :admin false
                    :staff false
                    :manager false
                    :customer false})
         [:div.control-group
          [:div.controls
           (submit-button {:class "btn btn-primary"} "Edit")]])]]))

(defpage [:get "/users/:id" :id #"\d+"] {:keys [id]}
(let [user (user/get-by-id id)]
    (common/layout
      [:div.row
       [:div.span12
        [:div.page-header
         [:h2 "View User"]]
        [:h3 (str (user :first_name) " " (user :last_name))]
        [:dl.dl-horizontal
         [:dt "login"]
         [:dd (user :login)]
         [:dt "e-mail"]
         [:dd (user :email)]
         [:dt "admin"]
         [:dd (if (user :admin) [:i.icon-ok ""] [:i.icon-remove ""])]
         [:dt "staff"]
         [:dd (if (user :staff) [:i.icon-ok ""] [:i.icon-remove ""])]
         [:dt "manager"]
         [:dd (if (user :manager) [:i.icon-ok ""] [:i.icon-remove ""])]
         [:dt "customer"]
         [:dd (if (user :customer) [:i.icon-ok ""] [:i.icon-remove ""])]]
        [:div.form-actions
         [:a.btn.btn-primary {:href (str "/users/" (user :id) "/edit")} "Edit"] " "
         [:a.btn.btn-danger {:href (str "/users/" (user :id) "/remove")} "Remove"] " "
         [:a.btn {:href "/users"} "All users"]]]]))) 
```

每次我请求“/users/add”时，请求都会被路由到“/user/:id”（删除/user/add 操作时很好）。我有另一个控制器的非常相似的代码，它工作正常。可能是什么问题？如何设置路由优先级？

谢谢， 雅克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T07:54:46.293

与 webnoir.org 上的路线教程相比，我发现您的代码略有不同。

你的：

```
(defpage [:get "/users/:id" :id #"\d+"] {:keys [id]} 
```

在[webnoir 上](http://www.webnoir.org/tutorials/routes)：

```
(defpage [:get ["/user/:id" :id #"\d+"]] {:keys [id]}
               ^                      ^ 
```

但也许最终并没有什么不同...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:55:02.290

从[源代码](https://github.com/ibdknox/noir/blob/master/src/noir/core.clj#L80)来看， noir 将每条路线都放入地图中，因此无法保证调度的顺序。

在 noir.core 中：

```
(defonce noir-routes (atom {}))
...
(swap! noir-routes assoc ~(keyword fn-name) 
     (~action ~url {params# :params} (~fn-name params#))) 
```

稍后在 noir.server.handler 中：

```
(defn add-route-middleware [rts]
  (let [ws (all-wrappers)]
                         ;Iterates over entries in a map, no particular order
    (for [[route-name route] rts] 
      (try-wrap (ws route-name) route))))

(defn- pack-routes []
  (apply routes (concat (add-route-middleware @noir/pre-routes)
                        (add-route-middleware @noir/noir-routes)
                        (add-route-middleware @noir/post-routes)
                        @noir/compojure-routes))) 
```

我想如果你有[少于 16 条路线](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/jvm/clojure/lang/PersistentArrayMap.java#L32)noir 使用 PersistentArrayMap 并保留排序，但是一旦你越过这个边界，路由就会被破坏。我唯一的建议是使用明确的 URL。

**编辑：**这是关于类似问题的[错误报告。](https://github.com/noir-clojure/noir/issues/123)

# ruby-on-rails - 在 Ruby on Rails 中使用 Sidekiq gem 的约定是什么？

> ID：12681338
> 
> 赞同：-1
> 
> 时间：2012-10-01T21:24:55.970
> 
> 标签：ruby-on-rails, sidekiq

我们目前正在使用delayed_job 发送电子邮件，但出于另一个原因正在迁移到sidekiq。这就是我将使用 sideqik 发送电子邮件的方式：

```
 UserMailer.delay.welcome_email(user) 
```

为什么我不为此创建一个全新的 worker.rb ，因为工作人员正在发送电子邮件？我什么时候真正需要创建一个 worker.rb 文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:53:19.313

显然，Sidekiq 中内置了延迟功能，因此您无需为此创建工作人员。

# network-programming - 以太网上的曼彻斯特编码和冲突检测

> ID：12681341
> 
> 赞同：1
> 
> 时间：2012-10-01T21:25:09.893
> 
> 标签：network-programming, network-protocols, ethernet

我正在读一本关于网络的书，它评论说以太网使用曼彻斯特编码，并且如果两个主机彼此不完全同步，这允许早期冲突检测。但是它没有解释为什么，我想知道是否有人可以为我澄清这一点。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:28:09.687

建议您阅读有关以太网使用的 CSMACD 的 wiki 文章。它解释了碰撞检测算法的工作原理。

[http://en.wikipedia.org/wiki/Carrier_sense_multiple_access_with_collision_detection](http://en.wikipedia.org/wiki/Carrier_sense_multiple_access_with_collision_detection)

当然，现在对于交换网络来说，这不是一个问题，但在总线式电缆以太网或基于集线器的广播以太网的“旧时代”中很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:36:46.900

可以在此处找到同步的答案：[http](http://en.wikipedia.org/wiki/Manchester_code) ://en.wikipedia.org/wiki/Manchester_code 。

碰撞检测的答案可以在这里找到。[http://www.google.com/patents/US5012467](http://www.google.com/patents/US5012467)。它链接到美国专利，但其摘要描述了为什么使用曼彻斯特编码可以进行碰撞检测。

# javascript - 带有 JS 框架的非 RESTful Rails 应用程序

> ID：12681343
> 
> 赞同：0
> 
> 时间：2012-10-01T21:25:14.813
> 
> 标签：javascript, ruby-on-rails, backbone.js, ember.js

我刚开始使用最初使用 rails 1.x 创建的应用程序，后来迁移到 2.1。我的客户希望我重新设计 ui 并添加一些功能。

现在我正在考虑创建一个仅将遗留系统用作 api 的 js 应用程序，从而将应用程序解耦，以便将来以更现代的方式重写应用程序会更容易。该应用程序是非 RESTful 的，这让我想知道它如何与 Backbone、Ember、Batman 等现代框架一起工作。有没有更可取的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:48:11.030

我刚刚完成了一个情况非常相似的项目，并决定使用 Ember.js 构建它。我选择这个方向是因为我喜欢你通过视图层绑定、简单的 observables 和社区获得的所有伟大的东西（这对我来说很重要，因为那里有一些很棒的框架和一个死去的社区，很难寻求帮助或从人们那里获得想法）。

为了处理非标准后端，我首先让我的控制器使用 jQuery（它是 ember 的一部分）处理对服务器的所有数据请求，然后操纵数据客户端以满足我的应用程序需求。随着事情变得越来越复杂，我跳到了 ember 数据（这仍在进行中）并创建了我自己的适配器。我选择进行此更改，因为我计划将后端更新为更加安静，然后我所要做的就是将我的自定义适配器换成 ember rest 适配器。

# python - 上传非常大的文件时的框超时

> ID：12681345
> 
> 赞同：0
> 
> 时间：2012-10-01T21:25:32.103
> 
> 标签：python, box-api

我们正在尝试使用 python 的 httplib 通过上传 api 将非常大 (+1Gb) 的文件上传到 Box。

因此，我们不必将整个文件保存在内存中，我们使用如下代码：

```
CHUNK_SIZE = 1024 * 1024
data = from_file.read(CHUNK_SIZE)
while data:
   http_connection.send(data)
   data = from_file.read(CHUNK_SIZE) 
```

如果文件足够小，这可以正常工作，但在 30 秒后 Box 超时并关闭套接字，即使数据仍在上传。有什么方法可以告诉 Box 上传来自多个块，例如 Dropbox chunked_upload/ 端点，或者让 Box 在 30 秒后不超时？

# ember.js - 如何使用参数连接 ember.js 路由

> ID：12681348
> 
> 赞同：0
> 
> 时间：2012-10-01T21:26:02.433
> 
> 标签：ember.js, ember-old-router

我有一个简单的模板，可以遍历 ember-data 模型。在循环内部，我想提供一个简单的锚标记，将元素的 id 传递给路由器，以便我可以转换到另一个 ember 视图。当我将鼠标悬停在链接上时，下面的内容在 href 中显示“未定义”，但是当我在路由中记录内容时，它是 ember-data 模型（不仅仅是我想要的 id）。

```
<script type="text/x-handlebars" data-template-name="session">
    {{#each session in controller}}
      {{session.id}}<br />
      {{session.name}}<br />
      {{session.room}}<br />
      {{session.desc}}<br />

      {{#each speaker in session.speakers}}
      Speaker: {{speaker.name}}<br />
      {{/each}}

      <a {{action showSessionDetails session href=true}}>View Session Details</a>

      <br /><br />

    {{/each}}                                                                                                
  </script> 
```

这里是路由器

```
CodeCamp.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      showSessionDetails: Ember.Route.transitionTo('sessionDetails'),
      connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet('session', router.get('store').findAll(CodeCamp.Session)>
      },
      index: Ember.Route.extend({
        route: '/'
      }),
      sessionDetails: Ember.Route.extend({
        route: '/session/:id',
        connectOutlets: function(router, context) {                                                                
          console.log("here " + context);
        }
      })
    })
  })
}); 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:25:41.833

原来我只需要实现我自己的序列化和反序列化方法

```
 sessionDetails: Ember.Route.extend({
        route: '/session/:session_id',
        connectOutlets: function(router, session) {
          router.get('applicationController').connectOutlet('session', session);
        },                                                                                                         
        serialize: function(manager, session) {
          return { "session_id": session.get('id') }
        },
        deserialize: function(manager, params) {
          return CodeCamp.Session.find(params["session_id"]);
        }
      }) 
```

# javafx-2 - 是否可以在 JavaFX2 的主窗口区域中创建多个子窗口？

> ID：12681355
> 
> 赞同：5
> 
> 时间：2012-10-01T21:26:26.410
> 
> 标签：javafx-2

我认为 mIRC 的以下屏幕截图将帮助您理解我的问题。

![mIRC 中的多个子窗口](../Images/0d22e5d072366d437545a2921d72618e.png)

我有一个主舞台 (1)，在某个窗格（或任何其他容器）(2) 中，我想以这种方式添加几个子窗口 (3)，这样**它们就不能移到拥有窗口之外**并且它们**不可见/ 在 OS 任务栏中可选择**。

有没有办法在 JavaFX 2.2 中做到这一点？如果不使用窗户（单独的舞台），是否可以使用任何其他可移动容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:51:45.093

JavaFX 2.2 中没有框架来促进这一点。

[您可以使用 JavaFX 问题跟踪器跟踪 JavaFX对接框架](http://javafx-jira.kenai.com/browse/RT-14039)功能请求并为其投票。

您可以使用公共 JavaFX API 自己创建这样的框架。使用 Stages，可能有点难以获得您想要的行为，但我认为如果您使用放置在主应用程序阶段内的自定义可移动窗格，这将是可能的。

但是，在提供对接框架的正式实现之前，您最好使用现有的应用程序框架（如 NetBeans）并将您的 JavaFX 组件嵌入到[由现有框架创建的框架内的 JFXPanel 中](https://blogs.oracle.com/geertjan/entry/a_docking_framework_module_system)。

回答您的一些具体问题。

> 在 OS 任务栏中不可见/不可选。

在显示新的子窗口之前，请调用 subwindow。[initOwner](http://docs.oracle.com/javafx/2/api/javafx/stage/Stage.html#initOwner%28javafx.stage.Window%29)将子窗口的所有者设置为应用程序的主要阶段。

> 它们不能移出拥有窗口

您可以将侦听器添加到子窗口和主窗口的 x、y、宽度和高度属性。如果尝试将子窗口移出父窗口的边界，则在侦听器代码中重新定位子窗口。如果在您的 JavaFX 侦听器收到通知之前由操作系统处理大小和位置更改通知（我认为很可能是这种情况），这种策略可能会有点笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T19:12:42.407

请参阅[VFXWindows](http://mihosoft.eu/?p=365)项目。它允许您在 JavaFX 应用程序中创建窗口和子窗口。它作为[JFXtras 2](http://jfxtras.org/)包的一部分提供。

# objective-c - TWTweetComposeViewController 在 IOS6 中已弃用

> ID：12681357
> 
> 赞同：39
> 
> 时间：2012-10-01T21:26:29.543
> 
> 标签：objective-c, ios, twitter, ios6

我的代码按预期工作，只是我需要摆脱此警告消息。IOS6 中不推荐使用 TTWeetComposeViewController。ios6中这个内置视图控制器的任何替代品？

这是我的示例代码。

```
if ([TWTweetComposeViewController canSendTweet]) {
    // Initialize Tweet Compose View Controller
    TWTweetComposeViewController *vc = [[TWTweetComposeViewController alloc] init];
    // Settin The Initial Text
    [vc setInitialText:@"This tweet was sent using the new Twitter framework available in iOS 5."];
    // Adding an Image
    UIImage *image = [UIImage imageNamed:@"sample.jpg"];
    [vc addImage:image];
    // Adding a URL
    NSURL *url = [NSURL URLWithString:@"http://mobile.tutsplus.com"];
    [vc addURL:url];
    // Setting a Completing Handler
    [vc setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
        [self dismissModalViewControllerAnimated:YES];
    }];
    // Display Tweet Compose View Controller Modally
    [self presentViewController:vc animated:YES completion:nil];
} else {
    // Show Alert View When The Application Cannot Send Tweets
    NSString *message = @"The application cannot send a tweet at the moment. This is because it cannot reach Twitter or you don't have a Twitter account associated with this device.";
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops" message:message delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alertView show];
} 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-05-11T06:23:28.557

在 iOS 5 和 iOS 6 之间使用社交网络有一些变化。
1\. 关于库：在 iOS 6 中，我们使用社交框架而不是 Twitter 框架。
2\. 我们使用 SLComposeViewController 代替 TWTweetComposeViewController。
3.请将一些api与以下代码进行比较：

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");

            } else

            {
                NSLog(@"Done");
            }

            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;

        //Adding the Text to the facebook post value from iOS
        [controller setInitialText:@"Test Post from mobile.safilsunny.com"];

        //Adding the URL to the facebook post value from iOS

        [controller addURL:[NSURL URLWithString:@"http://www.mobile.safilsunny.com"]];

        //Adding the Image to the facebook post value from iOS

        [controller addImage:[UIImage imageNamed:@"fb.png"]];

        [self presentViewController:controller animated:YES completion:Nil];

    }
    else{
        NSLog(@"UnAvailable");
    } 
```

只是有一点点不同，但他们更伟大。

偏好： - safilsunny 提示：[http ://www.mobile.safilsunny.com/integrating-facebook-ios-6/](http://www.mobile.safilsunny.com/integrating-facebook-ios-6/)

谢谢，

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-01T21:29:24.367

是的，您应该在 iOS 6 上使用[社交框架](https://developer.apple.com/library/ios/#documentation/Social/Reference/Social_Framework/_index.html "社会框架")。这要归功于现在 iOS 上的 Facebook 集成。您将能够从那里使用 Twitter 和 Facebook。

# java - 类路径不起作用 - java lang ClassNotFoundException

> ID：12681359
> 
> 赞同：0
> 
> 时间：2012-10-01T21:26:36.810
> 
> 标签：java, classpath

我有一个名为 GameClient.jar 的 jar，它有一个 main 方法。我有一个包含 org/json/JSONException.class 的 json.jar

这两个都在 dist 文件夹中。

我运行以下 `java -classpath dist/json.jar -jar dist/gameclient.jar`

不太清楚为什么我仍然得到

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/json/JSONException
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
    at java.lang.Class.getMethod0(Unknown Source)
    at java.lang.Class.getMethod(Unknown Source)
    at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
    at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)

Caused by: java.lang.ClassNotFoundException: org.json.JSONException 
```

我在 Windows XP 和 Java 1.7 上。无论有无类路径选项，我都会遇到相同的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T21:33:17.713

从`java`文档中：

> -罐
> 
> 执行封装在 JAR 文件中的程序。第一个参数是 JAR 文件的名称，而不是启动类名称。为了使此选项起作用，JAR 文件的清单必须包含格式为 Main-Class: classname 的行。这里，classname 标识了具有用作应用程序起点的 public static void main(String[] args) 方法的类。有关使用 Jar 文件和 Jar 文件清单的信息，请参阅 Java 教程 @ [http://java.sun.com/docs/books/tutorial/jar的 jar(1) 和 Jar 跟踪。](http://java.sun.com/docs/books/tutorial/jar)
> 
> 使用此选项时，JAR 文件是所有用户类的来源，其他用户类路径设置将被忽略。

因此，您`gameclient.jar`必须包含您需要的所有用户类。该`classpath`设置被忽略。只需创建`gameclient.jar`以将类包含在`json.jar`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:42:55.673

除了将类路径作为命令行参数提供之外，您还可以将类路径条目添加到您的`GameClient` `MANIFEST.MF`：

```
Class-Path: dist/json.jar 
```

请参阅[在您的 MANIFEST.MF 中包含类路径](https://blogs.oracle.com/olaf/entry/jdev_including_a_classpath_in)

# wordpress - 快速缓存 - Internet Explorer 行为

> ID：12681362
> 
> 赞同：0
> 
> 时间：2012-10-01T21:26:50.010
> 
> 标签：wordpress

我正在使用 wordpress 的快速缓存插件，它完全缓存页面的 PHP，而不管我在使用 Internet Explorer 时的设置如何，而对于火狐它没有。

任何线索为什么它会这样工作？作为记录，我没有在两个浏览器上以管理员身份登录。

另外，我将 wp-content 作为例外包含在内。我还能做些什么来从缓存我的插件的 PHP 中获取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:53:17.983

试试 WP Super Cache：[http](http://wordpress.org/extend/plugins/wp-super-cache/) ://wordpress.org/extend/plugins/wp-super-cache/ 它更受支持和更新，并且有更好的排除目录和文件类型的选项，例如 Wordpress 目录中的 php 文件或独立文件。

确保您在 .htaccess 中没有任何可能与您正在使用的任何缓存插件冲突的缓存控制设置。

另外，检查您的 IE 缓存设置。如果您只在 IE 中看到缓存，这是 IE 设置。缓存插件不会浏览器嗅探。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:19:04.900

经过更多研究，我能够通过将这些行添加到我的插件文件中来解决 wp 超级缓存和 wp 快速缓存的问题：

```
define("QUICK_CACHE_ALLOWED", false); //quick cache
define("DONOTCACHEPAGE", true); //wp super cache
$_SERVER["QUICK_CACHE_ALLOWED"] = false; //quick cache redundant 
```

# iphone - iOS - 如何读写这种格式的plist

> ID：12681363
> 
> 赞同：0
> 
> 时间：2012-10-01T21:26:49.827
> 
> 标签：iphone, ios, plist

我有以下格式的 xml -

```
<plist version="1.0">
<array>
    <dict>...</dict>
    <dict>...</dict>
</array>
</plist> 
```

我正在尝试使用 - 将其写入 plist

```
NSDictionary *temp = [NSPropertyListSerialization propertyListWithData:returnData options:NSPropertyListImmutable format:&format error:&errorDesc];
[self writeToPlistFile:@"myList.plist" : temp]; 
```

方法在哪里

```
-(BOOL)writeToPlistFile:(NSString*)filename:(NSDictionary*)data{
NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * documentsDirectory = [paths objectAtIndex:0];
NSString * path = [documentsDirectory stringByAppendingPathComponent:filename];
BOOL didWriteSuccessfull = [data writeToFile:path atomically:YES];
return didWriteSuccessfull;
} 
```

然后我想阅读它并将其放入字典中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T02:20:30.433

如果 plist 以`<array>`标签开头，请使用此选项

`NSMutableArray* documentArray = [NSMutableArray arrayWithContentsOfFile:sourcePath];`

其中 sourcePath 是您的 plist 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:51:57.747

```
-(void)saveData:(NSString*)data
{
    NSArray *paths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentDirectory=[paths objectAtIndex:0];
        NSString *fileName=[NSString stringWithFormat:@"%@/%d.txt",documentDirectory,1];
        NSString *content=data;
        NSFileHandle *fileHandler= [NSFileHandle fileHandleForWritingAtPath:fileName];
        [fileHandler seekToEndOfFile];
        [fileHandler writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
        [fileHandler closeFile];
        NSLog(@"%@",fileName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:34:45.557

使用以下替换 filePath 与您用于保存它的相同路径。

```
NSDictionary *yourDictionary = [NSDictionary dictionaryWithContentsOfFile:filePath]; 
```

# gnuplot - 在 GNUPlot 中显示均值和协方差

> ID：12681367
> 
> 赞同：0
> 
> 时间：2012-10-01T21:27:16.783
> 
> 标签：gnuplot, octave

我想在 gnuplot 中显示一组观察结果以及它们的均值和协方差。有谁知道我怎么做这样的事情？是否有另一个程序可以很好地做到这一点？像 Octave 这样的程序能做到这一点吗？我看到了获取统计信息的方法，但我没有找到任何关于显示这些统计信息的信息。

为了澄清，我想显示数据点（2d 或 3d），显示它们在数据集中绘制的平均值，并显示一个表示协方差的椭圆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:29:27.393

是的，你可以用 Octave 做到这一点。

```
## create 2x1000 matrix of random data with normal distribution
data = randn (1000, 2);

## plot data (the o is for dots)
plot (data(:,1), data(:,2), "o");

## get mean from each
mu   = mean (data);

## calculate covariance matrix
R    = cov (data);

## calculate the ellipse points
A     = chol (R, "lower");
theta = linspace (0, 2*pi, 1000);
x     = mu' + 2.5 .* A * [cos(theta); sin(theta)];

## plot the ellipse
hold on;
plot(x(1,:), x(2,:), "r", "LineWidth", 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T16:16:29.267

我在 octave 4.0.2 中遇到了错误，并更改了 carandraug 对此的回答中的“x =”行：

```
x     = mu' + 2.5 .* A * [cos(theta); sin(theta)]; 
```

# javascript - 使用 AJAX 和 jQuery 填充新的选择元素

> ID：12681369
> 
> 赞同：0
> 
> 时间：2012-10-01T21:27:31.850
> 
> 标签：javascript, jquery, ajax

我正在为我的 Web 类中的演示文稿创建一个 jQuery 示例。我正在尝试将我们作为练习所做的 Javascript 程序转换为 jQuery（对于有用的部分，如 AJAX）。到目前为止一切顺利，一切正常。唯一的事情：我不知道如何通过异步 AJAX 使用选项填充选择元素。

这是程序的截图，所以我不必解释一切：http: [//imageshack.us/a/img829/5475/tableaui.png](http://imageshack.us/a/img829/5475/tableaui.png)

所有的单元格都是输入元素，里面有文本，每次修改都通过 AJAX 保存。最后一行用于添加新行。添加后，我添加行（带有 table.appendChild(tr) ），其中包含一个一个创建的所有元素。除了选择（一开始是空的，它们的内容是从数据库中提取的）之外，一切都在那里工作。这是一些代码（在函数 addLine 内，在 ajax 确认我的数据已插入数据库后调用）：

```
input = document.createElement('select');
input.setAttribute('id', 'ID'+no_ligne+'_'+noms_champs[compteur]);
input.setAttribute('name', 'ID'+no_ligne+'_'+noms_champs[compteur]);
input.innerHTML = ajaxRequest('contenu_select', Array(no_ligne, valeurs[noms_champs[compteur]], noms_champs[compteur])); 
```

ajaxRequest 如下：

```
function ajaxRequest(action, data, ligneModifie, champModifie)
{
var AJAX_Controller = 'exer_7_carnet_formulaire.php';
var post_data = resultat_ajax = "";

// Set the posted data
if(action == 'update') {
    //stuff
}
else if(action == 'insert') {
    //stuff
}
else if(action == 'contenu_select') {
    post_data += "noLigne="    + data[0] +
                 "&selected="  + data[1] +
                 "&type="      + data[2];
}
else {
    post_data = null;
}
// Send the request
var jqxhr = $.ajax({
    type: "POST",
    url: AJAX_Controller+'?ajax=1&action='+action,
    data: post_data,
    success: function(reponse) {
        resultat_ajax = processResponse(reponse, data, action);
    }
});
return resultat_ajax;
} 
```

gererReponse 返回我所有选项的字符串（确认工作）。问题是：它在请求完成之前执行返回，所以它返回一个空字符串（因为尚未定义 resultat_ajax）。我用 setTimeout 确认，然后变量在一秒钟后具有预期值。

我的问题是：在这种情况下如何填充我的选择？我之前创建的另一个版本（没有 jQuery）就像一个魅力，除了 ajaxRequest 函数外，它的代码完全相同。这是以前没有 jQuery 的函数，它正在工作（返回我预期的选项）：

```
function ajaxRequest(action, data, ligneModifie, champModifie) 
{
// Variables
var ReqTerminee = 4;
var ReponseOK_Local = 0; 
var ReponseOK_Remote = 200;
var AJAX_Controller = 'exer_7_carnet_formulaire.php';
var xhr = getXMLHttpRequest();
var post_data = typeDeContenu = resultat_final = "";

// Monitoring request state
xhr.onreadystatechange = function() {
    if (xhr.readyState == ReqTerminee)
        if (xhr.status == ReponseOK_Local || xhr.status == ReponseOK_Remote)
            resultat_final = gererReponse(xhr.responseText, data, action); // Here is the interesting part, this actually works and returns the right value.
        else
            alert("Code d'erreur: " + xhr.status);
};

// Sets the posted data
if(action == 'update')
{
    // blahblah
}
else if(action == 'insert')
{
    //blahblah
}
else if(action == 'contenu_select')
{
    post_data += "noLigne="    + data[0] +
                 "&selected="  + data[1] +
                 "&type="      + data[2];
}
else
{
    post_data = null;
}

// Sends the request
xhr.open("POST", AJAX_Controller+'?ajax=1&action='+action, false);
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
xhr.send(post_data);

return resultat_final;
} 
```

我有点失望，我无法使用强大的 jQuery 获得与使用简单 Javascript 获得的结果相同的结果：/您知道如何设法获得良好的返回值吗？

在此先感谢，任何帮助将不胜感激！

山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:43:43.763

您的问题是在纯 JS 中您使用的是**同步**请求。在此行中由第三个参数指定为 false：

```
xhr.open("POST", AJAX_Controller+'?ajax=1&action='+action, false); 
```

因此，在这种情况下，浏览器正在等待，直到在此行完成请求：

```
xhr.send(post_data); 
```

而不是执行 onreadystatechange 处理程序，并且仅在`return`执行之后。

jQuery 有相同的选项（见`async:false`补充）：

```
$.ajax({
    type: "POST",
    url: AJAX_Controller+'?ajax=1&action='+action,
    async:false,
    data: post_data,
    success: function(reponse) {
        resultat_ajax = processResponse(reponse, data, action);
    }
}); 
```

但是 - 不要那样做。JS 总是在单线程中执行，同步请求会冻结整个页面。用户不会高兴）。正确的方法是替换：

```
input = document.createElement('select');
input.setAttribute('id', 'ID'+no_ligne+'_'+noms_champs[compteur]);
input.setAttribute('name', 'ID'+no_ligne+'_'+noms_champs[compteur]);
input.innerHTML = ajaxRequest('contenu_select', Array(no_ligne, valeurs[noms_champs[compteur]], noms_champs[compteur])); 
```

和

```
$.ajax({
        type: "POST",
        url: AJAX_Controller+'?ajax=1&action='+action,
        async:false,
        data: post_data,
        success: function(reponse) {
            resultat_ajax = processResponse(reponse, data, action);
            input = document.createElement('select');
            input.setAttribute('id', 'ID'+no_ligne+'_'+noms_champs[compteur]);
            input.setAttribute('name', 'ID'+no_ligne+'_'+noms_champs[compteur]);
            input.innerHTML = resultat_ajax;
        }
    }); 
```

当然，您需要通过`no_ligne`,`noms_champs`并`compteur`进入`ajaxRequest`

# activerecord - 更新失败 - 未定义的方法 `update_attributes' for # 这是继我之前回答的请求之后的结果。但我无法理解的下一个问题是，为什么当我的参数报告一条记录时，我会收到一条消息，即谷歌搜索/SO 搜索建议我需要使用 update_all。 问问题

> ID：12681371
> 
> 赞同：1
> 
> 时间：2012-10-01T21:27:34.630
> 
> 标签：activerecord, associations, ruby-on-rails-3.2

这是继我之前回答的请求之后的结果。但我无法理解的下一个问题是，为什么当我的参数报告一条记录时，我会收到一条消息，即谷歌搜索/SO 搜索建议我需要使用 update_all。

[has_many/belongs_to 建立关联 - 为什么参数的插入语句为空白？](https://stackoverflow.com/questions/12671646/has-many-belongs-to-build-association-why-is-insert-statement-for-parameter-bl/12672450#12672450)

我的更新控制器方法如下：

```
 def update
    @role = Role.find(params[:id])
    logger.debug "@role: id[#{params[:id]}], #{@role}, #{@role.inspect}, #{@role.to_s}"
    @permission = @role.permissions(params[:permission])
    logger.debug "@permission: #{@permission.inspect}"

    respond_to do |format|
      if @role.update_attributes(params[:role]) && @permission.update_attributes(params[:permission])
        format.html { redirect_to @role, notice: 'Role was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @role.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我收到以下错误消息：

```
 NoMethodError in RolesController#update

undefined method `update_attributes' for #<ActiveRecord::Relation:0x007fb2116b5178>

Rails.root: /Users/railsdev/Development/railsprojects/Genie/BitBucket-Repos/Genie-v3-3
Application Trace | Framework Trace | Full Trace

app/controllers/roles_controller.rb:75:in `block in update'
app/controllers/roles_controller.rb:74:in `update'

Request

Parameters:

{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"3uZ47itmgzUSs83Iq9+2saJn6Y9+Y9tlSDgaRskh9pw=",
 "role"=>{"description"=>"T1"},
 "permission"=>{"subject_class"=>"User"},
 "commit"=>"Update Role",
 "id"=>"55"} 
```

谷歌搜索和 SO 搜索显示我可能需要使用 [ `update_all`] 代替。但是为什么当我只有一条记录时会出现这种情况？

这是我的控制台输出。

```
Started PUT "/roles/55" for 127.0.0.1 at 2012-10-01 22:12:16 +0100
Processing by RolesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3uZ47itmgzUSs83Iq9+2saJn6Y9+Y9tlSDgaRskh9pw=", "role"=>{"description"=>"T1"}, "permission"=>{"subject_class"=>"User"}, "commit"=>"Update Role", "id"=>"55"}
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'gn668LQGNlLl6HiwPf8DRQ' LIMIT 1
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 13
  Role Load (0.1ms)  SELECT "roles".* FROM "roles" WHERE "roles"."id" = ? LIMIT 1  [["id", "55"]]
@role: id[55], #<Role:0x007fb2137e3200>, #<Role id: 55, description: "T1", created_at: "2012-10-01 21:11:43", updated_at: "2012-10-01 21:11:43">, #<Role:0x007fb2137e3200>
  Permission Load (0.1ms)  SELECT "permissions".* FROM "permissions" WHERE "permissions"."role_id" = 55
@permission: [#<Permission id: 32, role_id: 55, subject_class: "Diagnosis", action: nil, subject_id: nil, created_at: "2012-10-01 21:11:43", updated_at: "2012-10-01 21:11:43">]
  Permission Load (0.1ms)  SELECT "permissions".* FROM "permissions" WHERE "permissions"."role_id" = 55
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `update_attributes' for #<ActiveRecord::Relation:0x007fb2116b5178>):
  app/controllers/roles_controller.rb:75:in `block in update'
  app/controllers/roles_controller.rb:74:in `update' 
```

为了帮助我进行调试，我记录了以下内容：

```
@role: id[55], #<Role:0x007fb2137e3200>, #<Role id: 55, description: "T1", created_at: "2012-10-01 21:11:43", updated_at: "2012-10-01 21:11:43">, #<Role:0x007fb2137e3200>

@permission: [#<Permission id: 32, role_id: 55, subject_class: "Diagnosis", action: nil, subject_id: nil, created_at: "2012-10-01 21:11:43", updated_at: "2012-10-01 21:11:43">] 
```

是因为一个被“包装”为一个数组吗？[@permission logger.debug 调用的输出]。这是我应该使用 update_all 的指标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:53:07.550

Yes, `#where()` returns an ActiveRecord::Relation, which can represent multiple records. You may just want to use `@role.permissions(params[:permission]).first.update(...)` instead of update_all, since you only intend to update a single row.

Also, I noticed that you're implementing a permissions/role model. May I suggest a gem for this purpose since this has been reimplemented many times? Something like cancan/cantango, perhaps?

# string - Bash 中的字符串布尔值

> ID：12681384
> 
> 赞同：0
> 
> 时间：2012-10-01T21:28:16.013
> 
> 标签：string, bash, boolean

我正在尝试创建一个带有两个参数的脚本：一个单词和一个字符，然后返回该字符在单词中出现的次数。

这是我的代码：

```
#!/bin/bash
((counter=0))
for i in $1
do
if i == $2   
then
((counter=counter+1))
fi

echo $counter
done 
```

我的脚本每次都返回 1。我只精通python，所以我的bash语法很差。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:36:53.120

您应该尝试以下简单的 bash 代码

```
#!/bin/bash

for ((i=0; i<${#1}; i++)); do
    [[ $2 == ${1:$i:1} ]] && ((count++))
done

echo "There's $count occurrences of $2 in $1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:34:40.167

鉴于您使用 Bash 语法，

```
grep -c "$2" <<<"$1" 
```

对于 POSIX shell，您需要`echo`或（最好）`printf`将字符串和管道连接到`grep`.

当您遍历它时，shell 不会将令牌分解为单个字符（并且，有些人认为，Python 实际上也不应该:-) -`for i in foo`只是设置`i`为`foo`.

# javascript - 扩展引导 jQuery 模式

> ID：12681392
> 
> 赞同：1
> 
> 时间：2012-10-01T21:28:40.803
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog, extend

我想`$.fn.modal`在 Bootstrap/jQuery 中扩展，所以我的扩展版本在通过传递额外选项初始化模态之前“做事”。我尝试了这个，就像我做的一些时候来扩展 jQuery 原型一样：

```
var modal = $.fn.modal;

$.fn.modal = function() {
    this.each(function() {
        // do stuff
    });
    modal.apply(this, arguments);
}

$('#modal').modal(); // fails 
```

上面的示例不起作用，尽管相同的模式适用于许多其他非引导 jQuery 原型。

这是一个演示它的小提琴：http: [//jsfiddle.net/eTWSb/](http://jsfiddle.net/eTWSb/)（只需评论覆盖的东西以查看它的工作）。

我的印象是，当您想要添加自定义功能时，克隆一个函数然后将其称为“超级”是一个可行的选择。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T22:12:47.970

好的，我想通了。覆盖时`$.fn.modal`，我还删除了引导程序放置的**默认选项**`$.fn.modal.defaults`（为什么？）。

所以当我扩展它时，我失去了`show: true`实际显示模态的默认选项......

这解决了它（但构造函数会丢失，除非你也复制它）：

```
var modal = $.fn.modal,
    defaults = $.extend({}, $.fn.modal.defaults);

$.fn.modal = function(options) {
    options = $.extend( defaults, options );
    this.each(function() {
        // do stuff
    });
    return modal.call( this, options );
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-23T16:48:59.720

[David](https://stackoverflow.com/users/210578/david)提供的解决方案是正确的，但要做到这一点，您必须确保已加载 jQuery ，如此[处](https://stackoverflow.com/questions/7341865/checking-if-jquery-is-loaded-using-javascript)所述，因此最终解决方案：

```
window.onload = function() {
    if (window.jQuery) {  
        //modal extension
        var modal = $.fn.modal,
        defaults = $.extend({}, $.fn.modal.defaults);
        $.fn.modal = function(options) {
        options = $.extend( defaults, options );
        this.each(function() {
          // do stuff
        });
        return modal.call( this, options );
        };
    }
} 
```

# sql-server - 仅使用 tsql 返回视图 FROM 子句？

> ID：12681393
> 
> 赞同：2
> 
> 时间：2012-10-01T21:28:41.027
> 
> 标签：sql-server, tsql

有没有办法使用 TSQL 返回现有视图的 FROM 部分？

我知道我可以使用 sp_helptext 获取整个视图定义，并且可以使用 sp_help 或通过从 INFORMATION_SCHEMA.VIEW_COLUMN_USAGE 中进行选择来获取列列表，但我正在寻找的是表和连接子句。

目前，我正在将 sp_helptext 的返回值转储到 nvarchar(max) 中，并对“from”进行 charindex 搜索。我循环检查以确保左括号的数量等于右括号的数量（以排除选择中的子查询），如果不是，我搜索'from'的下一个实例。

但我希望这个解决方案远非防弹，并且会认为有一些内置的过程或系统表可以让我得到这个。

我目前使用的代码如下...

```
 declare @from int = 1
    declare @newJoin nvarchar(max)
    if OBJECT_ID('tempdb..#t') is not null
    begin
        drop table #t
    end
    create table #t(
    LineId int identity(1,1),
    Text nvarchar(max)
    )

    insert into #t (Text) exec sys.sp_helptext <view_name>

    set @newJoin = ''
    select @newJoin = @newJoin + Text 
    from #t
    where LEFT(LTRIM(replace(Text,char(9),' ')),2)<>'--'
    order by LineId

    while @from > 0
        begin
              SET @from = CHARINDEX('from ', @newJoin, @from + 5)
              IF LEN(REPLACE(LEFT(@newJoin,@from),'(','')) = LEN(REPLACE(LEFT(@newJoin,@from),')','')) BREAK
        end

    set @newJoin = substring(@newJoin, @from + 5, len(@newJoin)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:20:47.163

一些系统表可能会有所帮助：

```
select distinct t.name from sys.tables t
inner join sys.sysdepends d on t.object_id = d.depid
where object_id = object_id('<view_name>') 
```

# sencha-touch - 煎茶触摸导航视图自动销毁

> ID：12681396
> 
> 赞同：2
> 
> 时间：2012-10-01T21:28:58.593
> 
> 标签：sencha-touch, sencha-touch-2

我正在使用 Sencha Touch 2 中的导航视图在我的应用程序中提供视图导航。

目前我正在使用在控制器的启动方法中创建视图对象（例如`"VOCABI.view.Search"`，使用 xtype `"searchview"`）的方法，并通过在控制器配置中包含以下内容来引用它：

```
refs: {
    searchView: 'searchview'
} 
```

当我想展示搜索视图时，我将它推送到导航视图中，如下所示：

```
navView = this.getNavView();                  // Defined
navView.push([this.getSearchView()]);         // Defined by refs 
```

问题是当用户完成搜索并按下视图上的后退按钮时，searchView 似乎已被破坏，因此下次用户想要搜索某些内容时它会导致麻烦，因为该`getSearchView()`方法现在返回 null。

这是导航视图的默认行为，它在`pop()`调用方法时会破坏弹出的视图？

如果是这样，每次呈现它时创建搜索视图是否是一个糟糕的解决方法？喜欢

```
Ext.create("VOCABI.view.Search");
this.getNavView().push([this.getSearchView()]); 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T04:56:01.877

你必须添加导航视图的配置

```
autoDestory:false 
```

因此，您的搜索视图不会破坏导航视图的弹出事件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T08:15:31.853

一旦弹出，在 Sencha Touch 2.0 中默认 NavigatioView 将销毁该子组件。因此，对于您的情况，您可以放心使用它：

```
navView.push({
   xtype : 'searchview'
}); 
```

您可以强制不破坏 NavigationView 的子组件。但是，对于您的情况，无论如何，破坏似乎都是一种好习惯。

# java - XStream 隐式收集配置问题

> ID：12681397
> 
> 赞同：4
> 
> 时间：2012-10-01T21:29:00.607
> 
> 标签：java, xml, xstream

我正在使用生成此类 XML 的系统：

```
<address>
  <addressLine>123 Main Street</addressLine>
  <addressLine>Suite 123</addressLine>
  <city>Test City</city>
  <stateOrProvince>AA</stateOrProvince>
  <postalCode>00000</postalCode>
</address> 
```

两个 addressLine 元素应该是 XStream 隐式集合的一部分——我想调用一个`getAddressLine()`方法并获得一个`List<String>`输出。

我一直在使用 XStream 的教程，但还没有完全弄清楚如何让`addressLine`元素正确映射。[XStream 的 Tweaking Output 教程](http://x-stream.github.io/manual-tweaking-output.html)中有一个类似的用例，但没有提供示例代码：

> 另一个用例是集合、数组和映射。如果一个类有一个属于这些类型之一的字段，则默认情况下，它的所有元素都嵌入在表示容器对象本身的元素中。通过使用 、 和 方法配置 XStream，`XStream.addImplicitCollection()`可以 `XStream.addImplicitArray()`将`XStream.addImplicitMap()`元素直接保留为类的子元素，并且省略容器对象的周围标记。甚至可以为一个类声明多个隐式集合、数组或映射，但是这些元素必须是可区分的，以便在反序列化时正确填充不同的容器。
> 
> 在以下示例中，表示农场的 Java 类型可能有两个容器，一个用于猫，一个用于狗：
> 
> ```
> <farm>
>   <cat>Garfield</cat>
>   <cat>Arlene</cat>
>   <cat>Nermal</cat>
>   <dog>Odie</dog>
> </farm> 
> ```

但是，这个[SO 答案](https://stackoverflow.com/a/8105729/897491)表明 XStream 场示例是不可能的。

我已尝试使用此 Java 代码对我的 Java 代码进行单元测试，但还没有运气：

```
XStream xstream = new XStream(new StaxDriver());        
xstream.alias("address", Address.class);
xstream.alias("addressLine", String.class);     
xstream.addImplicitCollection(Address.class, "addressLines");       

Address address = (Address) xstream.fromXML( 
    new FileInputStream("src/test/resources/addressTest.xml")); 
```

我应该尝试任何其他配置更改吗？

注意：我目前使用的是 XStream v1.2.2。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T21:47:15.270

首先，如果可能的话，您应该升级到更新的 XStream - 2007 年发布的 1.2.2。但要回答您的问题，请尝试：

```
XStream xstream = new XStream(new StaxDriver());
xstream.alias("address", Address.class);
xstream.addImplicitCollection(Address.class, "addressLines", "addressLine", String.class); 
```

这表示将具有名称的所有元素`addressLine`视为字符串，并将它们收集到`addressLines`集合中（即`someAddress.getAddressLines()`）。

# .net - 睡眠 .NET 任务，唤醒 CancellationTokenSource.Cancel()

> ID：12681400
> 
> 赞同：2
> 
> 时间：2012-10-01T21:29:08.043
> 
> 标签：.net, multithreading

我有必须定期轮询外部资源的代码。简化后，它看起来像：

```
CancellationTokenSource cancellationSource = new CancellationTokenSource();

Task t = Task.Factory.StartNew(() =>
    {
        while (!cancellationSource.IsCancellationRequested)
        {
            Console.WriteLine("Fairly complex polling logic here.");

            // Finishes sleeping before checking for cancellation request
            Thread.Sleep(10000); 
        }
    },
    cancellationSource.Token); 
```

如何以这样的方式对 10 秒延迟进行编码，以便在调用 cancelSource.Cancel() 时将其中断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:34:40.363

如何使用超时为 10 秒的监视器。您可以使用 Monitor 类的 Pulse 方法唤醒睡眠线程

线程 1：

```
Monitor.Wait(monitor, 10000); 
```

线程 2：

```
Monitor.Pulse(monitor); 
```

或者您可以查看[ManualResetEvent.WaitOne](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.waitone.aspx)。用 10 秒超时阻塞线程。要解除阻塞，请发出事件信号。

编辑：

CancellationToken 有一个 .WaitHandle 属性：

> 获取在取消令牌时发出信号的 WaitHandle。

您可以等待该句柄发出信号，超时 10 秒？

# apache - 有什么理由我不应该在 apache 中有 2 个文件来管理虚拟主机吗？

> ID：12681401
> 
> 赞同：1
> 
> 时间：2012-10-01T21:29:09.070
> 
> 标签：apache, apache2

在基于 Linux 的 Web 服务器上，我正在运行 Apache2，并且在我当前`httpd.conf`的文件中，我有以下内容：

```
Include conf/extra/httpd-ssl.conf 
```

在 httpd-ssl.conf 我管理我的所有虚拟主机详细信息。目前那里有大约 15 个条目，我需要添加更多。

我想要第二个文件，称它为仅`httpd-ssl2.conf`包含特定条目的文件，以帮助使事情更有条理。

我应该考虑有什么理由不这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:53:08.570

> 我应该考虑有什么理由不这样做吗？

这没什么错。许多 Apache 的发行版和安装已经这样做了。例如，在 gentoo 的 Apache2 上，它在`httpd.conf`:

```
Include /etc/apache2/modules.d/*.conf
Include /etc/apache2/vhosts.d/*.conf 
```

您可以在单独的文件中或在目录中的一个文件中创建尽可能多的 ssl 或非 ssl 虚拟主机`/vhosts.d`。您可以以任何您想要的方式组织它们。如果您不想使用 a`*.conf`并且想要更明确（这可能更安全一些），您可以在 .conf 中明确添加每个文件`httpd.conf`：

```
Include conf/extra/httpd-ssl.conf
Include conf/extra/httpd-ssl2.conf 
```

# plugins - Jenkins问题将构建文件复制到Windows共享

> ID：12681405
> 
> 赞同：1
> 
> 时间：2012-10-01T21:29:30.967
> 
> 标签：plugins, jenkins, continuous-deployment

我是 Jenkins 的新手，我终于使用 Jenkins 创建了一个成功的构建。我已经安装了 jenkins-CIFS 发布者插件，将这个“jar”文件从原始位置移动到另一个 Windows 服务器（server1）。

我已经成功创建了 CIFS 共享并测试了配置。作为后期构建步骤，我正在尝试添加选项 - “将文件发送到窗口共享”。

问题是我不知道如何概括 jar 文件的源位置。

我的 jar 位置是 C:\Documents and Settings\username.jenkins\jobs\web-application\modules\com.app$drup\builds\2012-09-25_23-23-45\archive\drup.jar

作为后期构建步骤，我希望将最新的 jar（无论日期和时间）移至其他 Windows 服务器。

我还需要（如果可能的话）让詹金斯首先连接到 Windows 服务器；然后重命名现有的 drup.jar ；然后将新创建的drup.jar 复制到windows server(server1)。

有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:05:35.197

什么生成文件名？它是构建过程的一部分还是构建后过程的一部分？您可以存储文件的链接或以文件名作为内容的文件，然后读取该文件以用作位置。

基本上，您需要在构建步骤中捕获您的文件名，然后再使用它。

祝你好运。

# xslt - xslt foreach 和 break

> ID：12681406
> 
> 赞同：1
> 
> 时间：2012-10-01T21:29:32.740
> 
> 标签：xslt, xslt-1.0

我知道在 xslt 中没有 break 语句，也不知道如何解决我的问题。

例子

```
 <tag name="param" />
      <tag name="Token" />
      <tag name="Token" />
      <tag name="Token" />
      <tag name="param" />
      <tag name="Token" />
      <tag name="param" />
      <tag name="Token" />
      <tag name="Token" />
      <tag name="Token" />
      <tag name="return"/> 
```

参数必须在下一个参数之前与所有标记分组。我该怎么做？

输出必须是这样的：

```
param
    Token
    Token
    Token
param
    Token
param
    Token
    Token
    Token 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:45:19.167

实现这一点的另一种方法是匹配“非参数”元素的键，按第一个最前面的参数元素对它们进行分组

```
<xsl:key 
  name="params" 
  match="tag[@name!='param']" 
  use="generate-id(preceding-sibling::tag[@name='param'][1])" /> 
```

然后，您将首先匹配您的“参数”元素

```
<xsl:apply-templates select="tag[@name='param']" /> 
```

对于您匹配的每个标签，您可以使用键选择组中的关联标签

```
<xsl:apply-templates select="key('params', generate-id())" /> 
```

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text" />
   <xsl:key name="params" match="tag[@name!='param']" use="generate-id(preceding-sibling::tag[@name='param'][1])" />

   <xsl:template match="/*">
      <xsl:apply-templates select="tag[@name='param']" />
   </xsl:template>

   <xsl:template match="tag[@name='param']">
      <xsl:text>param&#10;</xsl:text> 
      <xsl:apply-templates select="key('params', generate-id())" />
   </xsl:template>

   <xsl:template match="tag">
      <xsl:value-of select="concat(' - ', @name, '&#10;')" />
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的示例 XML（假设根 lelement）时，输出以下内容

```
param
 - Token
 - Token
 - Token
param
 - Token
param
 - Token
 - Token
 - Token
 - return 
```

如果你不想要“return”元素，你可以添加另一个模板来匹配它，然后忽略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:00:07.297

在 XSLT 2.0 中这很容易，使用`for-each-group`. 区分组的一种方法是计算以下兄弟`param`标签：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:apply-templates select="*/tag[@name = 'param']" />
  </xsl:template>

  <xsl:template match="tag[@name = 'param']">
    <xsl:text>param&#x0a;</xsl:text>
    <xsl:apply-templates select="following-sibling::tag[@name = 'Token']
       [count(following-sibling::tag[@name='param'])
         = count(current()/following-sibling::tag[@name='param'])]" />
  </xsl:template>

  <xsl:template match="tag[@name = 'Token']">
    <xsl:text>&#x09;Token&#x0a;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

在这里，我们选择与我们开始时具有`Token`相同数量的后续`param`标签的标签`param`，即出现在下一个参数之前的标签。请注意，这是相当低效的，标签数量为 O(N ² )。一种更有效的方法是使用尾递归模板，让每个 Token “向前看”以查看它是否是下一个参数之前的最后一个 Token：

```
<xsl:template match="tag[@name = 'param']">
  <xsl:text>param&#x0a;</xsl:text>
  <xsl:apply-templates select="following-sibling::tag[1][@name = 'Token']" />
</xsl:template>

<xsl:template match="tag[@name = 'Token']">
  <xsl:text>&#x09;Token&#x0a;</xsl:text>
  <xsl:apply-templates select="following-sibling::tag[1][@name = 'Token']" />
</xsl:template> 
```

这里`param`模板将模板应用到后面的*第*一个 Token，并且 Token 模板检查它的第一个后面的兄弟是否是另一个 Token，如果是，则递归应用模板。

# spring-mvc - 使用 Spring 3.1、Mybatis 3 和 ehcache 缓存静态数据查找的最佳方法是什么？

> ID：12681407
> 
> 赞同：0
> 
> 时间：2012-10-01T21:29:32.580
> 
> 标签：spring-mvc, ehcache, mybatis

我遵循了关于 mybatis-ecache 集成的[建议](http://code.google.com/p/mybatis/wiki/Caches)，但我没有看到来自 EhCacheCache 的任何日志语句。

Spring 也有一个[eh-cache](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html#cache-store-configuration-ehcache)集成，乍一看它实现起来很简单，但我也没有看到它在日志中被触发。

理想情况下，我想在 Rest 调用本身之前设置缓存，以将 roundtri[p 保存到后端 Web 服务（调用 mybatis 映射器）。是否有一个工作示例，Spring ehCache 优于 mybatis ehCache 的首选方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:27:59.517

Our app uses to wars: webservices, ui. I cached the mybatis dataaccess in webservices layer using mybatis-cache, and added a spring-ehcache on the ui layer. That way the mybatis-cache acts as a first-level cache, reusuable for any other service, and spring-ehcache acts as a second level cachce for the front end.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:59:29.887

`org.springframework`尝试在您的日志配置中打开 DEBUG（或 INFO）级别的日志记录。可能是您的日志级别太高而无法在日志中看到任何内容？

创建通常称为“热缓存”的“热缓存”非常简单。只需在 REST 控制器中创建一个方法，使用示例请求填充缓存（存储在字段中），然后使用`@PostConstruct`. 该方法将在 Spring 实例化该类后触发。

# php - php cookie 集，但取回时找不到

> ID：12681412
> 
> 赞同：1
> 
> 时间：2012-10-01T21:29:54.570
> 
> 标签：php, cookies, web

> **可能重复：**
> [未使用 php 找到设置的 cookie](https://stackoverflow.com/questions/6617413/a-set-cookie-is-not-found-with-php)

我用 php 设置了一个 cookie，我可以看到它是用我的浏览器设置的。当我尝试取回它（从同一网站上的其他页面）时，似乎没有找到。这是我设置cookie的方式：

```
 setcookie("login",$login, time()+86400*365); 
```

我得到它是这样的：

```
$_COOKIE['login']; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:41:08.047

您是否设置了 cookie，然后检查它是否存在于同一页面上。因为我已经尝试过了，它只能在新页面加载时访问。您可以尝试创建一个设置 cookie 的页面，然后创建一个检查 cookie 是否存在的页面。

这是 PHP 手册所说的：

> setcookie() 定义了一个 cookie 与其余的 HTTP 标头一起发送。与其他标头一样，必须在脚本的任何输出之前发送 cookie（这是协议限制）。这要求您在任何输出之前调用此函数，包括和标记以及任何空格。 [http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

您可能想要`echo $_COOKIE['logon'];` 或添加`setcookie("login",$login, time()+86400*365, "/");`

# ruby-on-rails - Rails 拷贝管理

> ID：12681414
> 
> 赞同：1
> 
> 时间：2012-10-01T21:30:17.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, content-management-system

我一直在寻找可以集成到我的 Rails 应用程序中的 Gem 或工具，以允许非技术人员更改我们网站营销页面上的文本。我们目前正在使用 Copycopter，但是我们不能再在免费的 Heroku 层上运行它了。此外，CopyCopter 是为 Postgres 构建的，这并不是我们堆栈的一部分，我们在 RDS 上使用 Amazons MySQL。

有什么我应该知道的宝石/工具可以帮助我吗？谢谢！

# css - 隐藏移动内容

> ID：12681424
> 
> 赞同：0
> 
> 时间：2012-10-01T21:31:08.137
> 
> 标签：css, wordpress, mobile, browser

我有 2 个 div，我试图为移动/平板电脑浏览器隐藏。为此，我包含了一个单独的样式表：

在样式表中，我只是将 display: none 放在那些 div 上，但这似乎不起作用。演示网站结束于 www.thewestharbour.com/mypakage

我们将 WPTouch Pro 用于移动设备，我也尝试将自定义类添加到他们的主题样式表中，但这也是不行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:35:38.020

在媒体属性中更改`max-device-width`为。`max-width`

由于您`width=device-width`在视口元标记中进行设置，因此现在将宽度配置为移动设备上的正确数字，而在台式机上，您将定位窗口大小。

又名：桌面浏览器上的设备宽度不是窗口大小。

# php - 访问原始 PHP POST 数据中的变量

> ID：12681428
> 
> 赞同：0
> 
> 时间：2012-10-01T21:31:37.150
> 
> 标签：php, post

> **可能重复：**
> [在 php 中解析 Json](https://stackoverflow.com/questions/4035742/parse-json-in-php)

我正在使用一个 API，该 API 在用户执行操作时向我的 PHP 脚本发送 POST 请求。我可以轻松地将原始 POST 数据记录到文件中，例如：

```
$rawPostData = file_get_contents('php://input');
$all = date("F j, Y, g:i a") . " " . $rawPostData . "\r\n";
file_put_contents("Activity.log", $all, FILE_APPEND); 
```

将此写入日志文件：

```
October 1, 2012, 12:34 pm [{"changed_aspect": "media", "subscription_id": 2421759, "object": "user", "object_id": "931456", "time": 1349120084}] 
```

我唯一感兴趣的是 object_id 值。如何在原始 POST 数据中访问此值？我已经尝试了很多，并在许多论坛中搜索了解决方案。这似乎很简单，但我似乎无法理解。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:37:53.287

您的帖子数据是 JSON，因此[`json_decode`](http://php.net/manual/en/function.json-decode.php)可以将其转换为包含对象的数组并访问该`object_id`属性

```
$rawPostData = file_get_contents('php://input');
$json = json_decode($rawPostData);
$json = $json[0];
$all = date("F j, Y, g:i a") . " " . $json->object_id. "\r\n";
file_put_contents("Activity.log", $all, FILE_APPEND); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:38:15.053

返回的数据是json：

```
$data = json_decode(file_get_contents('php://input'));
foreach($data as $obj) {
    echo $obj->object_id;
} 
```

# iphone - ViewDidAppear 和 textFiedlDidEndEditing 控制流

> ID：12681434
> 
> 赞同：0
> 
> 时间：2012-10-01T21:32:11.603
> 
> 标签：iphone, ios, uitableview, uitextfield

我有一个从 UITableViewController 到另一个 UITableViewController 的推送序列。一个对象通过 传递给第二个 VC `prepareForSegue`。在第二个 VC 中存在一个 UITextfield 来编辑该对象。该对象在第二个 VC 的`textFiedlDidEndEditing`委托方法中被修改。我没有创建委托方法，而是简单地放置`[self.tableView reloadData]`在第一个 VC 的`viewDidAppear`方法中来更新显示对象的表。

当用户导航回第一个 VC 时，我需要确保`viewDidAppear`只有在第二个 VC`textFiedlDidEndEditing`完成并设置新对象后才会调用第一个 VC。它似乎以这种方式工作，但这是因为机会还是因为`viewDidAppear`仅在以前的 VC 方法实现后才调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:20:10.150

`viewDidAppear`当您的第一个视图重新出现在屏幕上时将被调用。我假设您正在以编程方式弹出第二个视图控制器或使用 unwind segue。如果是这种情况，请致电

```
[textField resignFirstResponder]; 
```

在你的第二个 VC 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:21:31.537

在文本字段的 VC 中，我必须放置以下代码以确保`textFieldDidEndEditing`在任何其他 VC`viewWillAppear`方法之前被调用。

```
[self.view.window endEditing: YES]; 
```

# jquery - chrome jquery展开高度动画闪烁

> ID：12681435
> 
> 赞同：0
> 
> 时间：2012-10-01T21:32:17.190
> 
> 标签：jquery

jsfiddle：http: [//jsfiddle.net/KXQyZ/1/](http://jsfiddle.net/KXQyZ/1/)

奇怪的是，它不会在缩短高度时发生。

它在 IE9 和 Firefox 中运行顺利。它在 Safari 中略有滞后，但我对此很好。只有 chrome 有烦人的闪烁。

我想知道这是否是 javascript 引擎的直接限制，或者是否有某种解决方法。我认为这与机器硬件没有任何关系，因为我在工作中尝试了我的机器，它有太多的内存和一个 cpu 的野兽。

Windows 7：版本
Firefox：15.0.1
Chrome：22.0.1229.79 m
IE9：9.0.8112.16421
Safari：5.1.7

# jakarta-ee - @EJB 注释与 JNDI 查找

> ID：12681436
> 
> 赞同：4
> 
> 时间：2012-10-01T21:32:28.150
> 
> 标签：jakarta-ee, dependency-injection, ejb, ejb-3.0, jsf-1.2

在任何情况下，使用 JNDI 比使用`@EJB`注解注入无状态会话 bean 更好吗？

我们将 JSF 1.2 与 Sun Application Server 9.0_01 一起使用。

我们的团队正在讨论在托管 Bean 中使用 SLSB 时哪种方法更好。

我已阅读以下问题，但想知道是否存在首选查找的情况。

*   [EJB3 - 通过注入与查找获取 bean - 有什么区别，含义，陷阱？](https://stackoverflow.com/questions/2085679/ejb3-obtaining-bean-via-injection-vs-lookup-what-are-the-differences-implic)

*   [@EJB 注入与查找 - 性能问题](https://stackoverflow.com/questions/4753449/ejb-injection-vs-lookup-performance-issue)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T12:39:38.033

> 是否存在使用 JNDI 比使用 @EJB 注释注入无状态会话 bean 更好的情况？

没有更好的情况——但有必要的情况：

*   当在编译时不知道要查找的名称时（我认为这是糟糕的设计，但这是另一个问题）
*   当不支持注释时，例如在常规的非托管帮助类和其他少数情况下（我们可以再次争论在这些类中依赖 EJB 是好还是坏）。

如果要查找的名称是常量并且可以注入，则首选`@EJB`注释：

*   让测试更容易
*   找出本地/全局 JNDI 名称的麻烦更少

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T09:03:08.400

JNDI 查找在 SFSB 的情况下可能很重要（确保始终访问相同的实例），但在 SLSB 的情况下，我不知道 JNDI 会以任何方式“更好”的任何情况。

我肯定会去`@EJB`。它更易于阅读（不易出错的代码）、更易于维护（您不必关心 bean 的 JNDI 命名空间位置）并且更易于测试（在执行单元测试时无需切断讨厌的查找代码）。

当谈到性能原因时——我不是 100% 肯定，但如果当您使用注释时应用程序服务器实际上正在幕后进行 JNDI 查找，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T09:12:37.870

> 是否存在使用 JNDI 比使用 @EJB 注释注入无状态会话 bean 更好的情况？

这个问题和相关答案描述了需要 JNDI 查找 SLSB 的具体情况：[JPA Inheritance and EJB polymorphism](https://stackoverflow.com/a/12517849/870122)。本质上，当 SLSB 的*类名*在运行时确定时。

# android - 使用 onclick 事件加载 HTML5 Canvas

> ID：12681440
> 
> 赞同：0
> 
> 时间：2012-10-01T21:32:42.793
> 
> 标签：android, jquery, html, canvas, touch

我将如何在单击功能上添加 html5 画布元素，或者它是否需要准备好或加载文档？

我想做的是创建一种使用画布作为荧光笔的方法，用户单击荧光笔按钮，然后绘制突出显示的标记。

我正在考虑将其包含在点击事件中，以便我可以继续使用我的 touchwipe 事件。这是在 Android 设备上，我目前有一个滑块循环浏览我希望允许用户标记的书的光栅化页面。画布元素将位于 img 的顶部并且是半透明的。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:36:55.357

在这种情况下，canvas 元素的行为类似于其他 dom 元素。尝试：

```
var x = $('<canvas height="100px" width="100px"> </canvas> '),
    y = x[0].getContext('2d');

y.strokeRect(0,0,50,50)

x.appendTo('body') 
```

# grails - Grails GORM 整数验证

> ID：12681441
> 
> 赞同：2
> 
> 时间：2012-10-01T21:32:46.543
> 
> 标签：grails, grails-orm

环境：Grails 2.0.4、Java 1.6.0

我想对需要整数值的域对象值施加约束，以防止输入十进制值。在视图中输入 3.3 会导致创建值为 3 的对象。我希望验证错误会被退回给用户，表明只有整数值是有效的。

```
class ADomainObject {
    Integer    anInteger
} 
```

控制器

```
def save() {
   // Note: params["anInteger"] = "3.3"

   ADomainObject aDomainObject = new ADomainObject(params)
   aDomainObject.save flush:true
} 
```

导致 aDomainObject.anInteger = 3 的持久化

需要什么类型的约束才能导致失败？我尝试使用范围约束 [0..1000]，但无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:18:43.527

您可以注册一个自定义属性编辑器`Integers`以仅允许严格的整数值。以下将适用于绑定所有整数。

```
class IntegerEditor extends java.beans.PropertyEditorSupport {
    void setAsText(String text) {
        value = Integer.parseInt(text)
    }
}

class CustomPropertyEditorRegistrar implements org.springframework.beans.PropertyEditorRegistrar {
    void registerCustomEditors(org.springframework.beans.PropertyEditorRegistry registry) {
        registry.registerCustomEditor(Integer, new IntegerEditor())
    }
} 
```

然后在 resources.groovy 中：

```
beans = {
    customPropertyEditorRegistrar(CustomPropertyEditorRegistrar)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:56:00.807

也许您可以使用这样的自定义验证器：

```
static constraints = {
        anInteger validator: {
            //aDomainObject. anInteger.invalid.type
            if (!(it instanceOf Integer)) return ['invalid.type']
        }
    } 
```

# matlab - 在matlab（RSA）中计算大量数字的模运算

> ID：12681442
> 
> 赞同：1
> 
> 时间：2012-10-01T21:32:49.910
> 
> 标签：matlab, rsa, modulo

我正在尝试使用 matlab 中的模函数执行 RSA 加密/解密。问题是当 x 是 50+ 整数位并且 y 也是 50+ 整数位时，我不能做 mod(x,y) 。

matlab中是否有可以对巨大的int素数进行mod的函数？

还有一种方法可以将非常大的数字存储在变量中，例如： x=p^e 其中 p 和 e 是 50+ 个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:37:01.737

对于你的第二个问题，我猜你会想要研究模幂运算的二进制扩展方法，就像在[这个 Wikipedia 部分中一样。](http://en.wikipedia.org/wiki/Modular_exponentiation#Right-to-left_binary_method)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:37:02.843

听起来你需要任意精度的算术。Mathworks 提供了一个多精度工具箱：

[http://www.mathworks.com/matlabcentral/fileexchange/6446](http://www.mathworks.com/matlabcentral/fileexchange/6446)

不知道它是如何工作的，我也不为 Mathworks 工作。

# xcode - UICollectionViewCell 将被显示/被显示？

> ID：12681443
> 
> 赞同：10
> 
> 时间：2012-10-01T21:32:53.207
> 
> 标签：xcode, ios6, uicollectionview, uicollectionviewcell

很简单的问题。

是否有通知或委托类型的方法来判断何时显示 UICollectionViewCell 对象？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-26T11:45:09.250

对于 iOS 8 及更高版本，您可以使用*UICollectionViewDelegate*的*willDisplayCell*

`- (void)collectionView:(UICollectionView *)collectionView willDisplayCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:59:28.137

将要：

[`-[<UICollectionViewDataSource> collectionView:cellForItemAtIndexPath:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewDataSource_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012175-CH1-SW4)

做过：

[`-[<UICollectionViewDelegate> collectionView:didEndDisplayingCell:forItemAtIndexPath:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012176-CH1-SW16)

# perl - rmtree：递归查找和删除svn目录

> ID：12681450
> 
> 赞同：0
> 
> 时间：2012-10-01T21:33:50.863
> 
> 标签：perl

`.svn`我尝试通过以下方式递归删除目录：

```
system("rm -rf `find . -type d -name .svn`"); 
```

但是，我想使用 Perl 函数`rmtree`（来自`File::Path`）做同样的事情。怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:36:00.830

```
use File::Find::Rule qw( );
use File::Path       qw( rmtree );

rmtree([
    File::Find::Rule
     ->directory
      ->name('.svn')
       ->prune
        ->in('.')
]); 
```

你的版本没有修剪，但它应该有。

# jquery - jQuery克隆不选择

> ID：12681459
> 
> 赞同：0
> 
> 时间：2012-10-01T21:34:35.690
> 
> 标签：jquery, jquery-selectors

我在选择 jquery 克隆的元素时遇到了一些问题。下面是我所拥有的。我似乎无法从克隆版本中选择 .remove-container 类锚。我唯一可以选择的是原版。

```
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  </head>
  <body>
    <div id="primary">
      <div class="quote-container">
        <label>Quote </label>
        <textarea rows=5></textarea>
        <label>Author</label>
        <input type="text" name="author" />
        <a href="#remove" class="remove-container">Remove</a>
      </div>
      <a href="#add" class="add-container">Add</a>
    </div>
    <script>
    $(function() {
      $(".add-container").on("click", function(e){
        e.preventDefault();
        $(".quote-container").eq(0).clone().insertBefore(".add-container");
        var qContainer = $(".quote-container").length;

        for (i=0; i<qContainer; i++) {
          if ($(".quote-container").eq(i).find("label").html() === "Quote "+(i+1)) {
          } else {
            $(".quote-container").eq(i).find("label").eq(0).replaceWith("<label>Quote "+(i+1)+"</label>");
          }
        }
      });
      $(".remove-container").on("click", function(e) {
        e.preventDefault();
        console.log($(this));
      });
    });
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:43:38.427

当我将您的删除链接 jQuery 更改为此一切正常时（正如我认为您想要的那样）：

```
$('#primary').on('click', 'a.remove-container', function(e) {
    e.preventDefault();
    $(this).parent().remove();
});​ 
```

小提琴：http: [//jsfiddle.net/gromer/gw3mq/](http://jsfiddle.net/gromer/gw3mq/)

要知道的一件事是，如果您删除所有引用行，单击添加链接不会做任何事情，因为它不会再克隆任何东西。

# javascript - JavaScript中用于json post的条件对象

> ID：12681465
> 
> 赞同：3
> 
> 时间：2012-10-01T21:34:51.607
> 
> 标签：javascript, jquery, json

我有一个名为 update 的函数，它接受一些选项并使用 $.post 发布到我的 php：

```
 function update(options){
   $.post('update.php',{update: options}, function(data, textStatus, jqXHR){
     // debug stuff from php
   });
 } 
```

我调用我的函数如下：

```
 update({'id': id, 'option': val}); 
```

我想知道的是如何在选项中设置条件？例如：

```
 var option = $(this).attr('class') == 'check' ? 'check' : 'ok'; // assuming option is ok

 update({'id': id, 'ok': val}); // instead of option

 update({'id': id, option: val}); // i want to have the conditional 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T21:40:44.387

您可以像访问数组一样访问 Javascript 对象。此语法支持动态属性名称/键。

```
options[variable] = 'value'; 
```

例子：

```
var x = 'customProperty'
,   y = {}
;

y.x = 12; //y.x = 12
y[x] = 11; //y.customProperty = 11... same as y['customProperty'] = 11 
```

[http://jsfiddle.net/CoryDanielson/Dugdd/](http://jsfiddle.net/CoryDanielson/Dugdd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:43:10.480

本质上，您将对象设置为：

```
var x = {}; 
```

然后分配您想要的确切属性

```
var prop_name = $(this).attr('class') == 'check' ? 'check' : 'ok';
x[prop_name] = YOUR_VALUE; 
```

# geometry - 获取与点相交的切线的角度

> ID：12681468
> 
> 赞同：1
> 
> 时间：2012-10-01T21:35:03.470
> 
> 标签：geometry

我在给定点周围有一个圆圈，称为这个点（x1，y1）。我知道这个点周围的圆的半径。我还有第二个点 (x2, y2)，距离圆的半径之外有一段距离。

我需要一种通过代码的代数方式来计算在点 (x1, y1) 周围以 90* 与圆中心点相交所需的航向（与垂直的角度）（即获取切线相交线 2 的角度）第二点 (x2, y2)

一点背景知识：本质上，这两个点是 2D 地图上的 GPS 坐标，我需要知道与圆相交的目标航向，以便跟随其围绕中心点的路径。

谢谢！

基督教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:50:23.463

如果我理解正确的问题：您需要从点到圆找到切线。有两个方程 - 第一个是切线和半径的垂直度，第二个是半径长度：

```
(x-x2)*(x-x1)+(y-y2)*(y-y1) = 0
(x-x1)^2 + (y-y1)^2 = r^2 
```

当点 (x2,y2) 在圆外时，则该系统有两个切点解（有两条切线）

![在此处输入图像描述](../Images/609ee081cbb6bc82c2f3c3849902e5cd.png)

# regex - 字符串替换正则表达式在 tcl 中不起作用

> ID：12681472
> 
> 赞同：1
> 
> 时间：2012-10-01T21:35:18.693
> 
> 标签：regex, tcl

我正在尝试将所有特殊字符（包括空格、连字符等）替换为 tcl 中的字符串变量中的下划线。

> 例子
> 
> > ```
> >  input: Stack Overflow helps%me(a lot
> >     output: Stack_Overflow_helps_me_a_lot 
> > ```

我写了下面的代码，但它似乎没有工作。

```
 set varname $origVar
    puts "Variable Name :>> $varname"
    if {$varname != ""} {
        regsub -all {[\s-\]\[$^?+*()|\\%&#]} $varname "_" $newVar
    }
    puts "New Variable :>> $newVar" 
```

一个问题是，它不是替换 $varname 中的字符串，而是在 $origVar 而不是 $varname 中遇到第一个空格后删除数据。$newVar 中也没有存储任何值。不知道为什么，而且我在我的 tcl 书中阅读了示例代码（正确的语法），据此它应该是这样的

```
 regsub -all {[\s-][$^?+*()|\\%&#]} $varname "_" newVar 
```

所以我使用了相同的语法，但它不起作用，并给出了与修改 $origVar 而不是所需的 $varname 值相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:55:49.120

第二个版本更接近。通过将结果放入，`$newVar`您实际上是在设置一个名为任何存储*在 中* `$newVar`的变量，*也就是说*，您必须通过 访问它`$$newVar`，可以这么说（在 Tcl 中无效）。无论如何，问题可能是在您的第二个版本中，您似乎没有逃避某些字符。试试这个：

```
regsub -all {[\s\-\]\[$^?+*()|\\%&#]} $varname "_" newVar 
```

另一种组织它以最小化转义的方法是：

```
regsub -all {[][\s$^?+*()|\\%&#-]} $varname "_" newVar 
```

而且，我不知道这是否太笼统，但你也可以试试这个：

```
regsub -all {\W} $varname "_" newVar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T04:09:28.473

另一种解决方案是使用`string map`更简单的命令：string map 命令接受旧/新列表和字符串：

```
set varname [string map {% _ ( _ " " _} $varname] 
```

在上面的例子中，为了简洁起见，我只用下划线替换了%、(、和空格“”。这个解决方案的缺点是旧/新列表可能有点长。优点是更容易理解。

# excel - Excel VBA 检查数据的自动过滤器

> ID：12681474
> 
> 赞同：2
> 
> 时间：2012-10-01T21:35:23.557
> 
> 标签：excel, vba, autofilter

我需要帮助检查不包括标题的自动过滤行。我希望它给出一个消息框“未找到记录”。如果标题行之外有行，则退出 sub 或继续复制粘贴。我知道在过滤器之后我需要一个 If/Else 条目来检查数据，但我无法确定如何检查。此代码是从我创建的用户窗体按钮完成的。

这是我的脚本：

```
Private Sub Searchbycompanyfield_Click()

If CompanyComboBox1.Value = "" Then
    MsgBox "Please enter a Company to begin search."
    Exit Sub
End If
ActiveSheet.Range("$A:$H").AutoFilter Field:=1, Criteria1:=EQDataEntry.CompanyComboBox1.Value, Operator:=xlOr
Cells.Select
Selection.Copy
Sheets("Sheet2").Select
Range("A5").Select
ActiveSheet.Paste
Call MessageBoxYesOrNoMsgBox
End Sub 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T12:08:47.750

见下文，SpecialCells(xlCellTypeVisible) 将允许您返回过滤单元格的 rng 对象。您只需要根据您的情况检查其中的行数：

```
Private Sub Searchbycompanyfield_Click()

    If CompanyComboBox1.Value = "" Then
        MsgBox "Please enter a Company to begin search."
    Exit Sub
    End If

    Dim sh As Worksheet
    Dim rng As Range

    Set sh = ActiveSheet

    sh.AutoFilterMode = False
    sh.Range("$A:$H").AutoFilter Field:=1, Criteria1:=EQDataEntry.CompanyComboBox1.Value, Operator:=xlOr

    Set rng = sh.UsedRange.SpecialCells(xlCellTypeVisible)

    If (rng.Rows.Count > 1) Then

        rng.Copy Sheets("Sheet2").[A5]

        Call MessageBoxYesOrNoMsgBox

    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:12:52.327

计算行数，或检查最后一行是否为标题

```
if application.worksheetfunction.subtotal(3,activesheet.columns(1))>1 then 
    msgbox "Records"
else
    msgbox "No Records"
end if 
```

检查最后一行

```
if activesheet.cells(rows.count,1).end(xlup).row>1 then 
    msgbox "Records"
else
    msgbox "No Records"
end if 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:46:36.030

对于其他需要这个的人，我最终使用：

`Private Sub Searchbycompanyfield_Click()`

 ````
If CompanyComboBox1.Value = "" Then
    MsgBox "Please enter a Company to begin search."
Exit Sub
End If

Dim sh As Worksheet
Dim rng As Range

Set sh = ActiveSheet

sh.AutoFilterMode = False
sh.Range("$A:$H").AutoFilter Field:=1, Criteria1:=EQDataEntry.CompanyComboBox1.Value, Operator:=xlOr

Set rng = sh.UsedRange.SpecialCells(xlCellTypeVisible)

If (rng.Rows.Count > 1) Then

    rng.Copy Sheets("Sheet2").[A5]
    Sheets("Sheet2").Select
    Call MessageBoxYesOrNoMsgBox

Else
If ActiveSheet.AutoFilterMode Then ActiveSheet.Cells.AutoFilter
MsgBox "No records found."
Exit Sub
End If 
```` 

`End Sub`

再次感谢你们的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T06:50:36.203

这是您重构的maco，以演示使用过滤器范围的方法。也消除了`Select`范围的需要

```
Sub Searchbycompanyfield()

    If CompanyComboBox1.Value = "" Then
        MsgBox "Please enter a Company to begin search."
        Exit Sub
    End If

    Dim sh As Worksheet
    Dim rng As Range

    Set sh = ActiveSheet
    ' clear any existing autofilter
    sh.AutoFilterMode = False
    sh.Range("$A:$H").AutoFilter Field:=1, _
        Criteria1:=EQDataEntry.CompanyComboBox1.Value, Operator:=xlOr

    Set rng = sh.AutoFilter.Range
    ' Check if there is any data in filter range
    If rng.Rows.Count > 1 Then
        Set rng = rng.Offset(1, 0).Resize(rng.Rows.Count - 1)
        On Error Resume Next
        Set rng = rng.SpecialCells(xlCellTypeVisible)
        If Err.Number = 1004 Then
            ' No cells returned by filter
            Exit Sub
        End If
        On Error GoTo 0
        rng.Copy ActiveWorkbook.Worksheets("Sheet2").[A5]

    End If
    ' remove filter
    sh.AutoFilterMode = False
    MessageBoxYesOrNoMsgBox

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-04T06:07:40.603

我找到了解决方案。试试这个解决方案。

```
Dim count As Long
count = Application.WorksheetFunction.count(rng_SmPrt.SpecialCells(xlCellTypeVisible)) 
```

这个正确返回可见行的数量。

# sql - 在 SQL Server 中，转换具有这种格式的 varchar (nnn:nn:nn)

> ID：12681481
> 
> 赞同：2
> 
> 时间：2012-10-01T21:36:03.013
> 
> 标签：sql, sql-server, database

我将这种 varchar 格式作为时间累积，我想将其转换为整数以进行 SUM 并获得一组的总时间。第一部分可能是 1、2、3、4 甚至五位数字，代表 Hours 的累积，然后用冒号分隔。然后是第二部分，即分钟的累积和秒的最后累积（每个 2 位）。如果可能，如何在一个查询中将其转换为整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:48:24.093

您可以使用此查询以秒为单位检索跨度的长度：

```
select sum(
    60*60*cast(left(span, len(span)-6) as int)
+   60*cast(substring(span, len(span)-4, 2) as int)
+   cast(right(span, 2) as int))
from test 
```

这个想法是把左边、右边和中间的部分切开，乘以一小时的秒数和一分钟的秒数，然后将三个分量相加。

这是[sqlfiddle](http://sqlfiddle.com/#!3/b33b7/21)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:21:18.307

```
-- sample data for discussion
declare @T table (exceltime varchar(10));
insert @T select
'123:44:50' union all select
'3:44:50' union all select
'0:00:01' union all select
'1123:11:50';

-- This query breaks up your time into components
select
    stuff(exceltime,len(exceltime)-5,100,'') hr,
    left(right(exceltime,5),2) min,
    right(exceltime,2) second
from @T

-- and this one just adds them up
select
    60*60*stuff(exceltime,len(exceltime)-5,100,'') +
    60*left(right(exceltime,5),2) +
    right(exceltime,2) totalsecond
from @T

totalsecond         -- result
===============
445490
13490
1
4043510 
```

# jquery - 纬度和经度中的地理位置 Null

> ID：12681484
> 
> 赞同：-1
> 
> 时间：2012-10-01T21:36:20.743
> 
> 标签：jquery, google-maps, google-maps-api-3, maps

我今天在一个地理定位不起作用的应用程序中遇到了问题。即使在此页面上[http://slaveryfootprint.org/survey/#where_do_you_live](http://slaveryfootprint.org/survey/#where_do_you_live)。当您输入一个位置时，它显示零纬度和经度。即使它搜索自动定位，它也可以指向正确的位置。它发生在今天突然发生，从昨天晚上开始工作正常，当我在控制台中看到它返回 null lat and long 和 null for city 时，我根本没有更改代码。谷歌地图api改变了什么。还是我需要更新 jquery？

[http://maps.google.com/maps/api/js?v=3.4&sensor=false](http://maps.google.com/maps/api/js?v=3.4&sensor=false)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:47:03.747

选择加入地理位置。如果您（或您的用户之一）拒绝共享您的位置，则地理位置将返回 null（您应该编写代码来处理这种情况）。

请注意： [http ://maps.google.com/maps/api/js?v=3.4&sensor=false](http://maps.google.com/maps/api/js?v=3.4&sensor=false)

已过时。API 的 v3.4 已经停用了一段时间。

[https://developers.google.com/maps/documentation/javascript/basics#Versioning](https://developers.google.com/maps/documentation/javascript/basics#Versioning)

当前可用的最早版本（这是您通过请求 3.4 获得的）是 3.8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:15:20.293

使用 google-maps 进行地理定位对我来说很好，我在 IE 中得到了正确的结果，因为对于 IE，你`AppFacade.userModel.set()`已经在 views.js,Line#503 中调用了来自 google 的结果。

稍后您在 Yahoo 的 geo.placefinder 上运行查询，但是当我在 YQL 控制台运行查询时，我得到“服务不可用”，因此`AppFacade.userModel.set()`在 views.js 中，Line#583 将不会执行，因为查询不成功。

但我不能告诉你为什么 YUI 服务不可用。

# hadoop - Hadoop 上的即席查询

> ID：12681486
> 
> 赞同：1
> 
> 时间：2012-10-01T21:36:39.553
> 
> 标签：hadoop, hbase, hive, apache-pig

我们正在处理美国的 2400 万家企业。我们现在在 HDFS 和 Hadoop 上使用 Pig。我们希望加快临时查询的调试速度。例如，现在从我们的 5 个服务器集群中的 2400 万个业务中提取一个业务需要几分钟。

Hbase 似乎是我发现的唯一可以完成这项工作的系统。蜂巢似乎没有这样做。

这是我们当前在 HDFS 中存储为制表符分隔的平面文本文件的架构。

```
place_id name value
1  Title    Bamboo Garden
1  Title    Bamboo Garden Restaurant
1  Phone 425-555-555
1  Phone 425-444-444
1  Address 123 Bellevue Way
2  Title    Burger King
2  Phone 425-333-3333 
```

我们选择这个名称值对是为了灵活地组合附加数据和字段。例如，如果我们想合并两个数据集，我们可以轻松地“分类”它们。此外，添加更多新字段非常容易。这个模式是很久以前设计的，几乎没有机会改变它。

我们发现很难在 Hbase 中对此进行建模，因为 Hbase 不支持重复键。正如您在上面的示例中看到的，每个企业可以有多个电话号码、标题、评论等。

所以我的问题

1.  在 Hadoop 中加速这样的临时查询的想法是什么？
2.  在 HBase 中存储字符串数组的最佳实践是什么？
3.  如何用 HBase 中的重复键对这个键值对进行建模？

**阅读评论中的问题后编辑：** 最常见**的临时查询**是返回具有给定 ID 的企业的所有信息。还有其他很好的即席查询支持，例如返回给定邮政编码和标题的企业。

使用 RDBMS 支持 ad hoc 查询的评论中的建议是一个很好的建议。但我希望有一个系统来支持流式查询和即席查询。我们的临时查询主要用于调试。如果我们在数据中发现错误，我们仍然需要验证它是否是我们的 Hadoop 数据中的错误，因此查询 RDBMS 是不够的。

最常见的**流式处理查询**是将两个大数据集加入并匹配两个数据集中的业务。流处理查询支持要求比 ad hoc 查询多得多，因此我们选择 Hadoop。我们的临时查询主要用于调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:33:45.187

Pig/Hive 主要用于批处理，而不是用于实时即席查询。

[Apache Drill](http://incubator.apache.org/projects/drill.html)已被踢出，它是用于交互式即席查询的[Google Dremel实现。](http://research.google.com/pubs/pub36632.html)可能需要一段时间才能从 Apache Drill 中实现一些可靠的东西。在此之前，您可以使用[Google BigQuery](https://developers.google.com/bigquery/)云服务，该服务用于交互式分析海量数据集——多达数十亿行。

Apache Drill 的目标之一是将其与 HBase 和 HDFS 等数据源结合使用。因此，应该可以使用 Apache Drill 作为 HDFS 中数据的查询引擎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T01:59:24.623

**在 Hadoop 中加速这样的临时查询的想法是什么？**

我认为你不应该尝试。Hadoop 用于批处理分析，而不是记录获取。

* * *

**在 HBase 中存储字符串数组的最佳实践是什么？**

有几种方法可以做到这一点。如果您没有太多更新，请将字符串数组以序列化方式存储在一个字符串中。就像`425-555-5555^425-444-444`在一个叫做“电话”的牢房里的东西。在 Pig 和 Hive 中，您可以使用一些简单的字符串拆分实用程序将其转换回数组。

如果您经常添加数字，那么您可以将单元格称为`"phone1"`,`"phone[2]"`等。这使得 Pig 和 Hive 的处理非常困难。

* * *

**如何用 HBase 中的重复键对这个键值对进行建模？**

基本上，您在 SQL 模式中实现的是一个双重嵌套的映射，这正是 HBase 的样子。所以对数据建模应该很容易。

您需要在此处复制密钥。让企业名称成为关键，因为这似乎是单一的。不过，您确实想找到一种使其独一无二的方法，因为我认为“汉堡王”可能存在于多个地方。我建议的一件事是让企业名称成为关键的一部分，但添加一些使其独一无二的东西。

例子：`"Bambo Garden^1"`：`"Burger King^2"`或`"Bamboo Garden^123 Bellvue Way"`。

在这些键下，有电话号码、地址和其他任何内容。

您仍然可以像以前一样添加列，因为您不再指定架构。您所有的旧代码仍然可以工作，并且会在新列出现时忽略它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T04:47:53.487

正如罗伯特在评论中提到的，你最好的选择可能是一个常规的 RDBMS。

关于 ad-hoc 查询和存储数组的方法——您希望执行哪些查询（这极大地影响了您在 HBase 中建模事物的方式）。

关于你的第三个问题。存储它的最简单方法（这可能不是我上面提到的最好的方法）是将“名称”变成限定符（“列”）。如果您有多个值（例如电话号码），您可以只拥有多个限定符（假设列族是 f，您将拥有 f:phone1,f:phone2..）并且您可以按前缀获取列（所有列从电话开始）

阿农

# javascript - Rails 3.2，javascript执行两次

> ID：12681501
> 
> 赞同：1
> 
> 时间：2012-10-01T21:37:51.820
> 
> 标签：javascript, ruby-on-rails

我有一个全新的 Rails 应用程序，其中包含以下代码：

# 应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

# thing.js *（与 application.js 位于同一路径）*

```
alert("This is running"); 
```

# 索引.html

```
<%= javascript_include_tag "application" %> 
```

当我导航到该页面时，我看到了两次警报。有谁知道为什么？我没有预编译的资产。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:00:34.127

应用程序布局已经包含该`application.js`文件，因此出现这种情况是因为它`application.js`被包含了两次。

# java - 在 Java 中使用 FTP 并检测断开连接

> ID：12681505
> 
> 赞同：2
> 
> 时间：2012-10-01T21:38:04.310
> 
> 标签：java, exception, networking, ftp

我使用[org.apache.commons.net.ftp.FtpClient](http://commons.apache.org/net/api-3.1/org/apache/commons/net/ftp/FTPClient.html#retrieveFile%28java.lang.String,%20java.io.OutputStream%29)创建了一个可靠的 FTP 类，它应该并行下载多个文件，并在失败时重试。

奇怪的是，我似乎无法让代码识别失败。例如，如果我在传输过程中拉动以太网电缆，代码似乎会继续阻塞：

```
client.retrieveFile(nextFile, ftpOutputStream); 
```

线。有人能告诉我为什么它阻塞在这条线上而不是返回 false 或抛出异常吗？我错过了设置超时或类似的东西吗？

```
try {
    OutputStream ftpOutputStream = new FileOutputStream(fileName);

    System.out.println("Attempting to retrieve file [" + nextFile + "].");
    success = iclient.retrieveFile(nextFile, ftpOutputStream);
    System.out.println("Returned from retrieving file [" + nextFile + "].");

    ftpOutputStream.close();
}

//Can fail due to FTPConnectionClosedException, CopyStreamException, or IOException.  In any case, best course
//of action is to simply create a new connection, log in again, and change back to target directory.
catch(Exception ex) {

    try {
        System.out.println("Error occurred during download, deleting file and restarting.");
        Thread.sleep(1000);

        //Delete the failed file assuming any of it got written to the local drive.
        File f = new File(fileName);                        
        if(f.exists()) {
            System.out.println("Deleting file...");
            f.delete();
        }             

        Thread.sleep(5000);
    }
    catch (InterruptedException iex) {
        System.out.println("Interrupted exceptoin while respoding to failed FTP attempt.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:07:27.003

“解决这个问题的方法是实现你自己的 SocketFactory 并用 SocketClient.setSocketFactory 设置它（FTPClient 是 SocketClient 的子类）。当你实现 SocketFactory 时，添加一个 setConnectTimeout 方法或类似的方法。在 createSocket 方法中，使用J2SE 1.4 连接方法超时。”

请参阅“如何设置连接超时？” [Commons Net FAQ](http://wiki.apache.org/commons/Net/FrequentlyAskedQuestions)上的问题 ，为什么会这样。

# facebook-graph-api - FBGraph API，页面标签试图确定用户是管理员

> ID：12681509
> 
> 赞同：0
> 
> 时间：2012-10-01T21:38:20.643
> 
> 标签：facebook-graph-api, facebook-php-sdk

这是我的场景。1）我有一个安装我的页面选项卡的用户。2）她添加了一个朋友作为管理员。3）朋友现在是管理员，进入页面设置并单击页面管理员中的“转到应用程序”链接。4）那个朋友转到我在我的网站上为管理员设置的 URL。5）我让朋友安装具有基本权限的应用程序。6) 现在当朋友来到管理页面时

```
$user_profile = $facebook->api('/me'); 
```

我可以看到信息。然后我试试

```
$page_info = $facebook->api("/".$pageID."?fields=access_token"); 
```

但我得到的只是

```
page_info = Array
(
[id] => 183194625149248
 ) 
```

当页面的所有者做同样的事情时，他们会回来

```
page_info = Array
(
[access_token] => stuff
[id] => 183194625149248
) 
```

所以我想知道我错过了什么步骤？我需要获取 access_token，这样我才能更进一步，确保此人是该页面的有效管理员

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:49:01.467

我需要添加 manage_pages 权限以获取所需信息

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:10:54.780

[加载页面选项卡时传递给您的应用程序的签名请求](https://developers.facebook.com/docs/authentication/signed_request/)中的`user`项目将告诉您当前用户是否喜欢该页面，以及他们是否是该页面的管理员。如果用户已授权您的应用，您还将在同一请求中获得该用户的访问令牌。

# jquery - HTML Table Append, JQuery Array

> ID：12681514
> 
> 赞同：2
> 
> 时间：2012-10-01T21:38:35.960
> 
> 标签：jquery, html, html-table, append, dynamic-tables

I have a dynamic table on my page that a user can add rows/delete rows from. So let's say the user adds 6 people. The first name array would look like this:

```
Index:    0   1   2   3   4   5
Person#:  1   2   3   4   5   6 
```

Then let's say the user deletes the first three rows, so the first name array would then look like this:

```
Index:    0   1   2   3   4   5
Person#:              4   5   6 
```

Finally, the user adds three more people, the array would then be this:

```
Index:    0   1   2   3   4   5
Person#:              7   8   9 
```

And this is the problem I am having. When deleting a row, how do I shift the jquery array appropriately so that instead of looking like this:

```
Index:    0   1   2   3   4   5
Person#:              4   5   6 
```

It'll look like this:

```
Index:    0   1   2   3   4   5
Person#:  4   5   6 
```

Here's a working example of my code: [demo](http://jsbin.com/icutuj/2/edit)
What do I need to add/change in my code to fix the problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:12:55.647

I normally simply renumber the attribute values. Something like this:

```
$("#table").find('tr').each(function(index, element)
{
    var row = $(this);

    index --;

    var names = ['fname_new', 'lname_new', 'phone_new', 'email_new', 'ethnicity_new'];
    for(var i in names)
    {
        row.find('input[name^="' + names[i] + '"]').attr('name', '' + names[i] + '[' + index + ']');
    }
}); 
```

[http://jsbin.com/icutuj/3/edit](http://jsbin.com/icutuj/3/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:49:55.707

Rather than trying to fix the index what I do is create a hidden variable, let's call it Index, and every time a new row is added you Index++.

Then, when the data is posted back you can have something like this quick pseudo code:

```
for (int i = 0; i++ i<$index) {
   var person = $POST[person_$index];
   if (person != null) {
     //do something
   }
} 
```

In this way you don't really care how many records they deleted.

Cheers!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:52:28.827

Maybe not the best solution, but I got away with this by blanking the row values, then changing the delete() for hide(). and not maintaining a row count. hope theres a better solution.

```
 $('div#editPhoneDlg').delegate('a.remove[href^=#]', 'click', function () {

        var row = $(this).parent().parent();
        if (rowCount > 1) {
            var name = $(row).find('td.name input');
            name.val('');
            var address = $(row).find('td.address input');
            address.val('');
            var phone = $(row).find('td.phone input');
            phone.val('');
            row.hide();
        }
        else {
            var name = $(row).find('td.name input');
            name.val('');
            var address = $(row).find('td.address input');
            address.val('');
            var phone = $(row).find('td.phone input');
            phone.val('');
        }
        return false;
    }); 
```

# django - get_absolute_url() 在 Django 中使用应用程序挂钩

> ID：12681515
> 
> 赞同：0
> 
> 时间：2012-10-01T21:38:55.387
> 
> 标签：django, url, django-models, get, absolute

我有以下 Django 模型：

```
class Product(models.Model):
    name    = models.CharField(max_length=250)
    slug    = models.SlugField(max_length=250, unique=True)
    active  = models.BooleanField(default=True)
    date    = models.DateTimeField(auto_now_add=True)

def get_absolute_url(self):
    return '/' +self.slug 
```

我使用这个 apphook 将它附加到一个页面：

```
class ProductApphook(CMSApp):
    name = _("Products Apphook")
    urls = ["product.urls"]
apphook_pool.register(ProductApphook) 
```

我的问题是关于 get_absolute_url 函数：它将返回一个无效的 url，因为附加此 apphook 的页面的 slug 不会被添加到模型 get_absolute_url 函数中的 absolute_url 之前。有没有办法让 get_absolute_url 函数返回正确的 url？我对此特别感兴趣，因为管理员中的“预览”功能不适用于上述设置

我不太确定这是可能的，例如，如果 apphook 附加到多个页面怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:49:45.563

我建议在您的 urls.py 中创建一个命名的 url，然后在您的 get_absolute_url 函数中反转该 url。[有关reverse()](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse)的信息，请参阅 Django 文档。

# haskell - 强加于列表的功能

> ID：12681516
> 
> 赞同：1
> 
> 时间：2012-10-01T21:39:03.057
> 
> 标签：haskell, functional-programming

我正在尝试编写一个使用此函数的 Haskell 函数：

> E(x,y)(i,j) = ((i*i) - (j*j) + x, (2*i*j) + y)

`F(x,y)`一个点的列表`(x,y)`应该是一个无限的项目列表：

> F(x,y) = {(0,0) , F(x,y)(0,0), F(x,y)(F(x,y)(0,0)), F(x, y)(F(x,y)(F(x,y)(0,0)))，等等}

根据我的理解，列表的第 n 个条目`F(x,y)`是`E(x,y)`与自身组合 n 次然后应用于的函数`(0,0)`

到目前为止，这是我的想法：

```
entry :: (Int,Int) -> [(Int,Int)]
efunction (i,j)(x,y) =  ((i*i) - (j*j) + x, (2*i*j) + y)
entry (x,y) = efunction(0,0)(x,y) where
    efunction = (0,0) : iterate efunction(i,j) 
```

而且，`(x,y)=(0,0)`并且保持静止。唯一变化的变量是`(i,j)`。

样本输出将是

```
entry(1,1) = 
0,0
1,1
1,3
-7,7
1,-97 
```

我对 Haskell 很陌生，所以我一直在试图弄清楚为什么这不起作用以及如何使它真正起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T22:01:42.913

你走的很好，使用`iterate`是正确的。您有一个包含两个参数的函数，并希望使用固定的其中一个参数对其进行迭代。如果固定参数是第一个的话，使用起来更方便`iterate`，所以我们定义

```
step (x,y) (i,j) = (i*i - j*j + x, 2*i*j + y) 
```

`step (x,y)`然后你通过迭代初始点为的部分应用函数来获得你想要的列表`(0,0)`，

```
entry (x,y) = iterate (step (x,y)) (0,0) 
```

`entry`如果您使用参数而不是部分应用来定义局部函数，则可能更容易理解`step`，

```
entry (x,y) = iterate next (0,0)
  where
    next (u,v) = (u*u - v*v + x, 2*u*v + y) 
```

玩得开心制作你的 Mandelbrot 套装；）

# android - 与内存支持文件相反？

> ID：12681517
> 
> 赞同：2
> 
> 时间：2012-10-01T21:39:10.827
> 
> 标签：android, linux, file-io, operating-system, mmap

内存支持文件允许应用程序将文件视为主内存。我想知道 Linux 中是否有类似的机制允许我像访问文件一样访问一系列内存，即通过文件路径和 read() write() 系统调用。

如果重要的话，我想在内存中运行带有 system.img 和 userdata.img 的 Android 模拟器以加快速度。因此，如果有人能告诉我如何告诉 android-qemu 挂载到不同的（内存中）分区，那也可以。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:46:50.420

你想要 tmpfs

[http://www.kernel.org/doc/Documentation/filesystems/tmpfs.txt](http://www.kernel.org/doc/Documentation/filesystems/tmpfs.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:41:29.933

您可以打开`/proc/<pid>/mem`以访问任何进程的内存...

# android - 按返回键后不正常

> ID：12681518
> 
> 赞同：0
> 
> 时间：2012-10-01T21:39:12.517
> 
> 标签：android, button, back

当我打开某个扩展 ArrayAdapter 的类时，当我转到另一个屏幕并点击后退按钮时，会发生一些奇怪的事情。我设置对于某些值，膨胀的 xml 文件的背景应该设置为灰色（200,200,200）。但是当我现在点击后退按钮时，一切都是灰色的，尽管当我只是通过主屏幕进入那里时它显示良好（而不是点击后退按钮......）类看起来像这样：

覆盖getView方法的代码：

```
@Override
public View getView(int position, View v, ViewGroup parent) {
    View mView = v;

    if (mView == null) {

        LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        mView = vi.inflate(R.layout.levelselector_item, null);

    }

    TextView level = (TextView) mView.findViewById(R.id.tvLevel);
    TextView levelScore = (TextView) mView.findViewById(R.id.tvLevelScore);

    if (mView != null) {

        level.setText(Integer.toString(getItem(position).getLevel()));

        loadDataBase();
        int correctAnswers = myDbHelper.getCorrectAnswers(getItem(position).getLevel());

        int correctAnswersPrev = 0;
        int correctAnswersPrev = myDbHelper.getCorrectAnswersPrev(getItem(position).getLevel());

        String correct = Integer.toString(correctAnswers);

        levelScore.setText(correct + "/60");
        level.setTypeface(font);
        levelScore.setTypeface(font);

        if (correctAnswersPrev < 2 && !correct.equals("") ){
        mView.setBackgroundColor(Color.argb(200, 200, 200, 200));
        }

    }
    return mView;
}

private void loadDataBase() {
    // TODO Auto-generated method stub
    myDbHelper = new DataBaseHelper(C);
    try {
        myDbHelper.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        myDbHelper.openDataBase();
    } catch (SQLException sqle) {
        throw sqle;
    }
} 
```

格兹！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:53:29.737

如果您确定`correctAnswersPrev`小于两个`correct`且不为空，则需要为适配器的视图回收器创建默认颜色：

```
if (correctAnswersPrev < 2 && !correct.equals("") ){
    mView.setBackgroundColor(Color.argb(200, 200, 200, 200));
}
else {
    mView.setBackgroundColor(Color.argb(00, 200, 200, 200));
} 
```

当它不应该是灰色时，这会显式地将背景颜色返回为透明。

# r - 与 R 在列中匹配

> ID：12681519
> 
> 赞同：0
> 
> 时间：2012-10-01T21:39:12.947
> 
> 标签：r, for-loop, match

我通过以下方式在矩阵中有数据：

```
label     1        2      3       4
id_101   10       30      43      32
id_102    3       32     43       43
id_111    45      34     22       66
id_201    87      65     66       34
id_202    45      76     76       44
...... 
```

此数据已转换为列表，如下所示：

```
[[1]]
     [1]  label   1     2       
     [3]      3   4
[[2]]
     [1]  id_101 .....

 ...... 
```

我想知道值**a是否与名为****label**的列中的值之一匹配。为此，我使用了带有 match 指令的 for 循环：

```
 a<-"id_201"    ///for example
for (pos in 2:length(matrix))
{

    if (!is.na(match(a,tabd[[pos]][[1]])))
    {
        found<-1
        print(found)
        break
    }
}
    if (found) print(pos) 
```

我想知道是否有一种有效的方法来查看变量**a的值是否与****标签** 下列的任何值匹配并获取其位置，但不使用 for 循环。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:56:29.180

我做了一个有点像你描述的列表，尽管它用双引号括起来。使用它表明这应该有效

```
which( sapply(txtList, "[", 1) == a ) 
```

# c# - 为什么要在 RTF 之后设置 Font？

> ID：12681521
> 
> 赞同：0
> 
> 时间：2012-10-01T21:39:25.667
> 
> 标签：c#, winforms, richtextbox

在下面的代码中如果我在字体没有改变 `Font`之前设置。必须设置在. 这是什么怪癖吗？`Rtf``Font``Rtf``RichTextBox`

```
 [TestMethod]
        public void FontProblemTest()
        {
            Form f = new Form();
            RichTextBox brtb = new RichTextBox();
            brtb.Width = 800;
            brtb.Height = 500;
            brtb.Font = new System.Drawing.Font(new System.Drawing.FontFamily("Courier New"), 8.25F, System.Drawing.FontStyle.Regular);//font set here has no effect
            brtb.Rtf = @"{\rtf1\ansi\deff0{\fonttbl{\f0\fnil Arial;}{\f1\fnil\fcharset0 Courier New;}}" +
@"{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\trowd\trgaph10\trleft-10\trpaddl10\trpaddr10\trpaddfl3\trpaddfr3" +
@"\cellx1140\cellx3740\cellx7340\pard\intbl\lang1033\f0\fs20\cell Whole Chart, Low to High\cell Most Recent (7/14/2002 10:17 AM)\cell\row" +
@"}";
            //brtb.Font = new System.Drawing.Font(new System.Drawing.FontFamily("Courier New"), 8.25F, System.Drawing.FontStyle.Regular);//font must be set after rtf.
            f.Controls.Add(brtb);
            f.Width = 1000;
            f.Height = 800;
            f.ShowDialog();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:04:40.083

我认为 Rtf 负责字体/颜色/间距等...插入时字体已经更改

```
brtb.Font = new System.Drawing.Font(new System.Drawing.FontFamily("Courier New"), 8.25F, System.Drawing.FontStyle.Regular);//font set here has no effect 
```

但因为你插入

```
brtb.Rtf = @"{\rtf1\ansi\deff0{\fonttbl{\f0\fnil Arial;}{\f1\fnil\fcharset0 Courier New;}}" +
@"{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\trowd\trgaph10\trleft-10\trpaddl10\trpaddr10\trpaddfl3\trpaddfr3" +
@"\cellx1140\cellx3740\cellx7340\pard\intbl\lang1033\f0\fs20\cell Whole Chart, Low to High\cell Most Recent (7/14/2002 10:17 AM)\cell\row" +
@"}"; 
```

它只会覆盖您之前设置的字体。

**备注**将 brtb.Rtf 值保存到新的 .rtf 文档将允许您查看在 brtb.Rtf 中创建的行

谢谢，

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:18:39.533

不要在 RTF 字符串中包含字体。您的 RichTextBox 指定了 Courier New，但您的 RTF 代码用 Arial 覆盖了它。

```
brtb.Rtf = @"{\rtf1\ansi" +
@"{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\trowd\trgaph10\trleft-10\trpaddl10\trpaddr10\trpaddfl3\trpaddfr3" +
@"\cellx1140\cellx3740\cellx7340\pard\intbl\lang1033\f0\cell Whole Chart, Low to High\cell Most Recent (7/14/2002 10:17 AM)\cell\row" +
@"}"; 
```

另请注意，我也`\fs20`从使用较大字体的 rtf 文本中删除了。

一旦你设置了 RichTextBox 控件的 RTF 属性，它将*自己*重写为：

> {\rtf1\ansi\deff0{\fonttbl{\f0\fnil\fcharset0 Courier New;}} \viewkind4\uc1\trowd\trgaph10\trleft-10\cellx1140\cellx3740\cellx7340\pard\intbl\lang1033\f0\fs17 \cell 整个图表，从低到高\cell 最近（2002 年 7 月 14 日上午 10:17）\cell\row \pard\fi-10\par }

# php - 如何使用 TCPDF 生成 PDF417 二维条码？

> ID：12681522
> 
> 赞同：2
> 
> 时间：2012-10-01T21:39:32.390
> 
> 标签：php, barcode, tcpdf

我最近发现了用 PHP 生成 PDF 的 TCPDF 库。

还包括一种生成二维条码的方法。

我想使用此功能生成 PDF417 ad Aztec 条码而不生成 PDF 文件。（就像将它保存到文件（PMG.SVG 等）一样）我查看了包含的文件以查看是否可以找到我需要的代码，但我没有找到任何东西。

在网站上，akk 这些示例是基于人们想要 PDF 文件的事实......我只想要图像:)

有什么建议吗？我不想为条形码支付 400 美元 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-09T12:58:25.387

@Bimal 回答了这个问题，但这里有一个例子。

[从 TCPDF sourceforge ( http://sourceforge.net/projects/tcpdf/files/tcpdf_min_6_0_025.zip/download](http://sourceforge.net/projects/tcpdf/files/tcpdf_min_6_0_025.zip/download) )下载“min”包

将 zip 文件解压缩到您的 WWW 文件夹中

创建一个新的 PHP 文件，例如`barcode.php`

`tcpdf_barcodes_2d.php`在你的 PHP 中包含

创建一个新的`TCPDF2DBarcode object`

使用生成 PNG 条形码`getBarcodePNG()`

例如：

```
<?php

require_once ("tcpdf_barcodes_2d.php");

$code = "hello";
$type = "PDF417";

$barcodeobj = new TCPDF2DBarcode($code, $type);

$barcodeobj->getBarcodePNG();

?> 
```

最后一行实际生成图像/png 数据，因此您可以从另一个 PHP 脚本调用它，该脚本将其输出包装在网页中。例如

```
<html>
<body>
<img src="barcode.php" />
</body>
</html> 
```

包含文件确实使用了其他一些包含文件，因此一旦您使用它，可能值得修剪所有不必要的 PDF 生成内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:22:20.153

尝试使用[TCPDF2DBarCode 类](http://www.tcpdf.org/doc/classTCPDF2DBarcode.html)。您将使用[setBarcode()](http://www.tcpdf.org/doc/classTCPDF2DBarcode.html#ae50f0ccd1e2c23cac0cefa2a8f02f231)方法来设置条形码。接下来要以您的特定格式获取它，您可以使用以下方法：

1.  条码PNG()
2.  获取条形码HTML()
3.  获取条形码SVG()

请查看文档以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T02:40:57.947

不幸的是，尝试后我发现[tcpdf](http://www.tcpdf.org/)现在不支持Aztec，但是PDF417是可以的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-13T09:19:27.640

其他使用选项是

```
<?php

require_once ("tcpdf_barcodes_2d.php");

$code = "Esta es una prueba de codigo FFYL";
$type = "PDF417";

$barcodeobj = new TCPDF2DBarcode($code, $type);

//$barcodeobj->getBarcodePNG();

echo $barcodeobj->getBarcodeHTML(2,2);

?>
<img src="data:image/png;base64,<?php echo base64_encode($barcodeobj->getBarcodePngData(2,2)); ?>"> 
```

在这种形式中，图像与页面 html 集成在一起，非常适合在电子邮件中发送 html

# ruby-on-rails - 如何处理 Rails 控制器中的 ActiveRecord::RecordNotFound？

> ID：12681524
> 
> 赞同：18
> 
> 时间：2012-10-01T21:39:37.150
> 
> 标签：ruby-on-rails, activerecord

我有一个包含用户和事件的应用程序。每个用户都有几个事件。当用户想要查看特定事件时，他将执行此操作：

```
def show
  begin
    @userEvents = current_user.event
    @event = @userEvents.find(params[:id])
  rescue ActiveRecord::RecordNotFound  
    redirect_to :controller => "main", :action => "index"
  end

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @event }
  end
end 
```

如果没有为用户找到该事件，则意味着他使用 URL 进行游戏，而他试图获取的事件不属于他。我想要么将他重定向到主页，要么只显示页面并显示未找到事件的错误。如果我尝试运行上面的代码，则会触发此错误：

```
AbstractController::DoubleRenderError in EventsController#show 
```

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T21:46:36.537

重定向后*返回*

```
begin
 @userEvents = current_user.event
 @event = @userEvents.find(params[:id])
rescue ActiveRecord::RecordNotFound  
 redirect_to :controller => "main", :action => "index"
 return
end 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-01T21:47:39.313

调用`redirect_to`不会从您的操作方法返回，这就是为什么移动到`respond_to`块会导致`DoubleRenderError`. 解决此问题的一种方法是：

```
redirect_to :controller => "main", :action => "index" and return 
```

但是，更好的解决方案可能是要么以声明方式[从这个异常中拯救，](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html)要么让它传播到客户端。前者看起来像这样：

```
class YourController < ActionController::Base

  rescue_from ActiveRecord::RecordNotFound, with: :dude_wheres_my_record

  def show
    # your original code without the begin and rescue
  end

  def dude_where_my_record
    # special handling here
  end
end 
```

如果您只是让异常恶化，用户将`public/404.html`在生产模式下看到该页面。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-19T08:26:53.680

> 在应用程序控制器中，请写：

```
 rescue_from (ActiveRecord::RecordNotFound) { |exception| handle_exception(exception, 404) }

   protected

    def handle_exception(ex, status)
        render_error(ex, status)
        logger.error ex   
    end

    def render_error(ex, status)
        @status_code = status
        respond_to do |format|
          format.html { render :template => "error", :status => status }
          format.all { render :nothing => true, :status => status }
       end
    end 
```

> 创建页面error.html.erb

```
<div class="page-header">
  <h1>
    <%= t "errors.#{@status_code}.heading" %>
    <small><%= t "errors.#{@status_code}.subheading" %></small>
  </h1>
</div>
<p><%= t "errors.#{@status_code}.description" %></p>
<% if defined? root_path %>
  <%= link_to t(:return_to_home), root_path %>
<% end %> 
```

> 在 en.yml 中

```
en:
  errors:
    "404":
      description: "The page you are looking for does not exist!"
      heading: "Record not found"
      subheading: "" 
```

# javascript - 用 Javascript 修改 CSS3 动画

> ID：12681528
> 
> 赞同：0
> 
> 时间：2012-10-01T21:40:20.987
> 
> 标签：javascript, css, css-transitions

首先，这是我需要帮助的网站的基本代码： *检查底部以进行编辑*

我想要一些关于动画本身的帮助，因为如果我在 div 1 并按任意键，它就像一个魅力。但是，如果我在 div 3 并想转到 div 2，例如，它首先加载 div 1，然后转到 div 2。我知道它为什么这样做，但我想不出办法它。有任何想法吗？

如果动画已经在播放，我还想从输入中暂停该功能（这样您就不能发送垃圾邮件并弄乱动画）。我怎么能以一种简单的方式做到这一点？

谢谢！

**编辑**

由于一些非常好的人要求我不要偷懒，OP 提供：http: [//jsfiddle.net/G4PXj/7](http://jsfiddle.net/G4PXj/7)

还; [http://codepen.io/anon/pen/zJsBH](http://codepen.io/anon/pen/zJsBH)

**此外，按下 HTML 框，然后按下 2,3 或 4 并等待几秒钟让动画加载到 FOV 中。**

**HTML：**

```
<div id="fourth" class="hidden">Fourth box
    <button onClick="fubar('first');">First page</button>
</div>
<div id="third" class="hidden">Third div</div>
<div id="second" class="hidden">Som text in the second</div>
<div id="first">Some content
    <button onClick="fubar('second');">Second page</button>
</div> 
```

**风格：**

```
@charset "utf-8";
body {
    background-color: #fff;
    margin: 0;
    padding: 0;
    overflow: hidden;
}
#first {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    color: #fff;
    box-shadow: 0 0 40px #333;
    background-color: #000;
}
#second {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    background-color: green;
}
#third {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    background-color: red;
}
#fourth {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    background-color: blue;
}
.hidden {
    display: none;
}
.test {
    -moz-animation-name: wat;
    -webkit-animation-name: wat;
    -moz-animation-duration: 4s;
    -webkit-animation-duration: 4s;
    -moz-animation-timing-function: ease-out;
    -webkit-animation-timing-function: ease-out;
    -moz-animation-iteration-count: 1;
    -webkit-animation-iteration-count: 1;
    -moz-animation-direction: normal;
    -webkit-animation-direction: normal;
    z-index: 100;
    display: block;
}
@-moz-keyframes wat {
    0% {margin-left:-3000px;}
    60% {margin-left: 200px;}
    100% {margin-left: 0;}
}
@-webkit-keyframes wat {
    0% {margin-left:-3000px;}
    60% {margin-left: 200px;}
    100% {margin-left: 0;}
} 
```

**Javascript：**

```
function clearAll() {
    document.getElementById('first').className = '';
    document.getElementById('second').className = '';
    document.getElementById('third').className = '';
    document.getElementById('fourth').className = '';
}

function troll(objectID) {
    document.getElementById(objectID).className += ' test';
}

function fubar(objectID) {
    clearAll();
    troll(objectID);
}

function KeyCheck(e) {
    var KeyID = (window.event) ? event.keyCode : e.keyCode;
    switch (KeyID) {

    case 49:
        clearAll();
        troll('first');
        break;

    case 50:
        clearAll();
        troll('second');
        break;

    case 51:
        clearAll();
        troll('third');
        break;

    case 52:
        clearAll();
        troll('fourth');
        break;
    }
}
document.onkeyup = KeyCheck; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:23:14.167

您可以跟踪前一页，以便`z-index`保留它。

```
// CSS
.page{
  z-index: 0;
  // your other page settings
}
.previous{
  z-index: 99;
}
.test{
  z-index: 100;
  // your animation settings
} 
```

代码 ：

```
document.getElementById('button1').onclick = function(){ gotoPage('first'); }
document.getElementById('button2').onclick = function(){ gotoPage('second'); }
var previous, current;

function gotoPage(id){
    // simplified className manipulation
    if(previous) previous.className = 'page';
    previous = current;
    if(previous) previous.className = 'page previous';
    current = document.getElementById(id);
    current.className = 'page test';
}

// key detection, etc. 
```

jQuery版本：

```
// JS
$('#button1').click(function(){ gotoPage('first'); });
$('#button2').click(function(){ gotoPage('second'); });
var $previous, $current;

function gotoPage(id){
  if($previous) $previous.removeClass('previous');
  $previous = $current;
  if($previous) $previous.removeClass('test').addClass('previous');
  $current = $('#' + id).addClass('test').removeClass('hidden');
}

// key detection, etc. 
```

小提琴：http: [//jsfiddle.net/G4PXj/9/](http://jsfiddle.net/G4PXj/9/)

这确保了具有以下 z-indexes 的页面布局：当前为 100（即动画页面，您希望它显示在所有其他页面之上），99 为上一个页面（您要离开的页面：显示在所有其他页面之上，但仍然动画页面后面），其余为 0，与动画无关的页面。

gotoPage() 函数将您要离开的页面（即当前页面）设置为上一个页面，并将您想要到达的页面（即 document.getElementById(id)）设置为当前页面。然后布局将应用于这些新页面设置。

至于暂停，这是相关问题中的一个很好的例子： [如何使用 JavaScript 暂停和恢复 CSS3 动画？](https://stackoverflow.com/questions/5804444/how-to-pause-and-resume-css3-animation-using-javascript#answer-5804720)

# git - 在 git 中，有没有办法在不应用存储的情况下显示未跟踪的隐藏文件？

> ID：12681529
> 
> 赞同：127
> 
> 时间：2012-10-01T21:40:25.567
> 
> 标签：git, git-stash

如果我运行`git stash -u`，我可以存储未跟踪的文件。但是，所述未跟踪文件根本不会显示为`git stash show stash@{0}`. 有没有办法在不应用存储的情况下显示未跟踪的隐藏文件？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-10-01T22:12:33.847

未跟踪的文件存储在存储提交的第三个父级中。（这实际上并没有记录，但是从[引入 -u 功能的提交中很明显， 787513...](https://github.com/git/git/commit/787513027a7d0af3c2cd2f04b85bc7136d580586)，以及[其他有关短语的文档的`git-stash`](http://git-scm.com/docs/git-stash#_discussion)方式...或只是通过做`git log --graph 'stash@{0}'`）

您可以通过以下方式仅查看存储的“未跟踪”部分：

```
git show 'stash@{0}^3' 
```

或者，只是“未跟踪”树本身，通过：

```
git show 'stash@{0}^3:' 
```

或者，树中的特定“未跟踪”文件，通过：

```
git show 'stash@{0}^3:<path/to/file>' 
```

不幸的是，没有很好的方法来总结所有暂存+未暂存+未跟踪与“当前”状态之间的差异。即：`git show 'stash@{0}'`不能包含未跟踪的文件。这是因为存储提交本身的树对象（称为`stash@{0}:`）不包括来自第三个“未暂存”父级的任何更改。

这是由于重新应用存储的方式：跟踪的文件可以很容易地作为补丁应用，而未跟踪的文件在理论上只能作为“整个文件”应用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-05-17T13:55:04.320

您可以使用以下命令列出所有存储提交：

```
git rev-list -g stash 
```

由于存储被表示为 HEAD、索引和未跟踪文件的无父“根”提交的 3 路合并提交，因此可以通过将上述输出传递到以下内容来列出未跟踪文件存储：

```
git rev-list -g stash | git rev-list --stdin --max-parents=0 
```

上述有用的应用：

### 仅显示未跟踪的隐藏文件

```
git rev-list -g stash | git rev-list --stdin --max-parents=0 | xargs git show --stat 
```

*当然，去掉 就`--stat`可以看到文件的内容了。*

### 查找特定文件

```
git rev-list -g stash | xargs -n1 git ls-tree -r | sort -u | grep <pattern> 
```

### grep 未跟踪的文件

```
git rev-list -g stash | git rev-list --stdin --max-parents=0 | xargs git grep <pattern> 
```

### 列出所有 stash 的所有内容

```
git rev-list -g stash | git rev-list --stdin | xargs git show --stat 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-08-04T01:04:33.493

要列出存储中未跟踪的文件：

```
git ls-tree -r stash@{0}^3 --name-only 
```

要显示所有未跟踪文件（包含内容）的完整差异：

```
git show stash@{0}^3 
```

这些命令读取最后（最近的）存储。对于较早的存储，增加“stash@”后面的数字，例如`stash@{2}`从最后一个存储开始的第二个。

这样做的原因是`git stash`为每个存储创建一个合并提交，可以引用为`stash@{0}`等`stash@{1}`。此提交的第一个父级是存储时的 HEAD，第二个父级包含对跟踪文件的更改，并且第三（可能不存在）对未跟踪文件的更改。

[这在“讨论”下](https://www.kernel.org/pub/software/scm/git/docs/git-stash.html#_discussion)的联机帮助页中有部分解释。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-03-27T12:37:53.640

> 但是，所述未跟踪文件根本不会显示为`git stash show stash@{0}`.

注意：[自 Git 2.11](https://stackoverflow.com/a/40543440/6309)（2016 年第四季度，OP 后 4 年）以来，您只能使用其索引来引用 stash

```
git stash show 0 
```

`git stash`由于用 C 重写，最近出现了一个错误，已[在 Git 2.22](https://stackoverflow.com/a/57029901/6309)（2019 年第二季度）中修复

> 有没有办法在不应用存储的情况下显示未跟踪的隐藏文件？

为什么，是的，有 Git 2.32（2021 年第二季度，OP 后 9 年）。

" [`git stash show`](https://github.com/git/git/blob/f5c73f69fd711f4814a2e8da78a0a2f4dbb46013/Documentation/git-stash.txt#L86)" ^(( [man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-show-u%7C--include-untracked%7C--only-untrackedltdiff-optionsgtltstashgt) ))学会了选择性地显示隐藏的未跟踪部分。

请参阅[Denton Liu (](https://github.com/Denton-L) [)的](https://github.com/Denton-L)[commit 0af760e](https://github.com/git/git/commit/0af760e26191acd3c5957841461ff224b80b43f7)和[commit d3c7bf7](https://github.com/git/git/commit/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3) (03 Mar 2021 ) 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 f5c73f6](https://github.com/git/git/commit/f5c73f69fd711f4814a2e8da78a0a2f4dbb46013))^(中，2021 年 3 月 22 日）)[`Denton-L`](https://github.com/Denton-L)
^([`gitster`](https://github.com/gitster))

> ## [`stash show`](https://github.com/git/git/commit/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3): 教`--include-untracked`和`--only-untracked`
> 
> ^(签字人：Denton Liu)

> 可以通过^( ^([man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt---include-untracked)) ^)对未跟踪的文件进行存储条目。[`git stash push --include-untracked`](https://github.com/git/git/blob/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3/Documentation/git-stash.txt#L162)
> 
> 但是，由于未跟踪的文件存储在 stash 条目的第三个父项中，而不是 stash 条目本身，因此运行^( ^([man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-show-u%7C--include-untracked%7C--only-untrackedltdiff-optionsgtltstashgt)) ^)不会将未跟踪的文件包含在 diff 中。[`git stash show`](https://github.com/git/git/blob/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3/Documentation/git-stash.txt#L86)
> 
> **使用`--include-untracked`，除了在存储库和存储库中的工作树之间有修改的路径之外，还会显示未跟踪的路径，如果存在，则记录在第三父级中。**
> 
> 可以手动制作格式错误的存储条目，其中存储条目中重复的未跟踪文件将掩盖跟踪文件。
> 在这种情况下，我们通过自定义`unpack_trees()`回调检测并出错：`stash_worktree_untracked_merge()`.
> 
> 此外，教 stash`--only-untracked`仅显示隐藏条目的未跟踪文件的选项。
> 这类似于^( ^([man](https://git-scm.com/docs/git-show)) ^)，但是为它提供一个方便的抽象是很好的，这样用户就不必考虑底层的实现。[`git show stash^3`](https://github.com/git/git/blob/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3/Documentation/git-show.txt)

`git stash`现在在其[手册页](https://github.com/git/git/blob/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3/Documentation/git-stash.txt#L12)中包含：

> ```
> 'git stash' show [-u|--include-untracked|--only-untracked] [<diff-options>] [<stash>] 
> ```

`git stash`现在在其[手册页](https://github.com/git/git/blob/d3c7bf73bdb679dd98c6aff65edbce4df743ddd3/Documentation/git-stash.txt#L163-L172)中包含：

> ## `--no-include-untracked`
> 
> 与`push`and`save`命令一起使用时，所有未跟踪的文件也会被隐藏，然后使用 `git clean`.
> 
> 与`show`命令一起使用时，将存储条目中未跟踪的文件显示为差异的一部分。
> 
> ## `--only-untracked`
> 
> 此选项仅对`show`命令有效。
> 仅在 stash 条目中显示未跟踪的文件作为 diff 的一部分。

* * *

而且您有一个配置与这些新选项一起使用：

> ## [`stash show`](https://github.com/git/git/commit/0af760e26191acd3c5957841461ff224b80b43f7)： 学`stash.showIncludeUntracked`
> 
> ^(签字人：Denton Liu)

> 先前的提交教^（^([人](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt---include-untracked))^）。 用户可能希望能够始终启用该行为。 教授允许用户以与.[`git stash show --include-untracked`](https://github.com/git/git/blob/0af760e26191acd3c5957841461ff224b80b43f7/Documentation/git-stash.txt#L162)
> `--include-untracked`
> `stash.showIncludeUntracked``stash.showPatch`

`git config`现在在其[手册页](https://github.com/git/git/blob/0af760e26191acd3c5957841461ff224b80b43f7/Documentation/config/stash.txt#L8-L12)中包含：

> ## `stash.showIncludeUntracked`
> 
> 如果设置为 true，`git stash show`则不带选项的命令将显示存储条目的未跟踪文件。
> 
> 默认为假。

`git stash`现在在其[手册页](https://github.com/git/git/blob/0af760e26191acd3c5957841461ff224b80b43f7/Documentation/git-stash.txt#L94-L95)中包含：

> 您可以使用`stash.showIncludeUntracked`、`stash.showStat`和 `stash.showPatch`config 变量来更改默认行为。

* * *

使用 Git 2.32（2021 年第二季度），当这些选项用于不记录未跟踪部分的存储条目时，**处理**最近添加到“ [`git stash show`](https://github.com/git/git/blob/a8a2491e629f9f886705d8bca6e134cd15076810/Documentation/git-stash.txt#L86)” ^(（[man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-show-u%7C--include-untracked%7C--only-untrackedltdiff-optionsgtltstashgt)）)中未跟踪部分周围的选项的代码会出现段错误。

 **请参阅[Denton Liu ( ) 的](https://github.com/Denton-L)[commit 1ff595d](https://github.com/git/git/commit/1ff595d218d9175eee1db753844044c2746d0515)和[commit aa2b05d](https://github.com/git/git/commit/aa2b05d9f66f5c167a7a377e2a0990f4af835e71)（2021 年 5 月 12 日[）](https://github.com/Denton-L)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a8a2491](https://github.com/git/git/commit/a8a2491e629f9f886705d8bca6e134cd15076810))^(中，2021 年 5 月 16 日）)[`Denton-L`](https://github.com/Denton-L)
^([`gitster`](https://github.com/gitster))

> ## [`stash show`](https://github.com/git/git/commit/1ff595d218d9175eee1db753844044c2746d0515)：修复段错误`--{include,only}-untracked`
> 
> ^(签字人：Denton Liu)

> 当^( ^([man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt---include-untracked)) ^)或^( ^([man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt---only-untracked)) ^)在不包含未跟踪条目的存储上运行时，会发生段错误。[`git stash show --include-untracked`](https://github.com/git/git/blob/1ff595d218d9175eee1db753844044c2746d0515/Documentation/git-stash.txt#L162)[`git stash show --only-untracked`](https://github.com/git/git/blob/1ff595d218d9175eee1db753844044c2746d0515/Documentation/git-stash.txt#L171)
> 
> 发生这种情况是因为我们没有检查未跟踪的条目是否实际存在，只是试图盲目地取消引用它。
> 
> 确保在实际尝试取消引用之前存在未跟踪的条目。

和：

请参阅[Denton Liu ( ) 的](https://github.com/Denton-L)[提交 af5cd44](https://github.com/git/git/commit/af5cd44b6f8f1934bc8b91f646eb2e73dcab57f3)（2021 年 5 月 21 日[）](https://github.com/Denton-L)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 378c7c6](https://github.com/git/git/commit/378c7c6ad48c4ccddf9b534616a0e86f28440bd3))^(中，2021 年 5 月 22 日）)[`Denton-L`](https://github.com/Denton-L)
^([`gitster`](https://github.com/gitster))

> ## [`stash show`](https://github.com/git/git/commit/af5cd44b6f8f1934bc8b91f646eb2e73dcab57f3):`stash.showIncludeUntracked`即使`diff`给定选项也使用
> 
> ^(签字人：Denton Liu)

> ^(如果向() ^([man](https://git-scm.com/docs/git-stash#Documentation/git-stash.txt-show-u%7C--include-untracked%7C--only-untrackedltdiff-optionsgtltstashgt)) ^)提供了有关如何显示差异的选项，该命令将忽略配置变量，默认不显示任何未跟踪的文件。 这是不直观的行为，因为 diff 输出的格式以及是否显示未跟踪的文件是正交的。[`git stash show`](https://github.com/git/git/blob/af5cd44b6f8f1934bc8b91f646eb2e73dcab57f3/Documentation/git-stash.txt#L86)`stash.showIncludeUntracked`
> 
> `stash.showIncludeUntracked`即使给出了差异选项，也可以使用。
> 当然，这仍然可以通过命令行选项覆盖。
> 
> 更新文档以明确说明在给出差异选项时将覆盖哪些配置变量。

`git config`现在在其[手册页](https://github.com/git/git/blob/af5cd44b6f8f1934bc8b91f646eb2e73dcab57f3/Documentation/config/stash.txt#L9-L11)中包含：

> 如果设置为`true`，该`git stash show`命令将显示存储条目的未跟踪文件。
> 
> 默认为`false`.

`git stash`现在在其[手册页](https://github.com/git/git/blob/af5cd44b6f8f1934bc8b91f646eb2e73dcab57f3/Documentation/git-stash.txt#L94-L97)中包含：

> 如果没有`<diff-option>`提供，默认行为将由`stash.showStat`, 和`stash.showPatch`config 变量给出。
> 
> 您也可以使用`stash.showIncludeUntracked`设置是否 `--include-untracked`默认启用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-07T10:11:51.480

解决方法：在存储文件之前暂存文件`git stash show -p`将按预期工作。

```
git add .
git stash save 
```

**注意：**这种方式也可以增加互动部分，[这里是如何](http://walidshouman.blogspot.com.eg/2016/10/interactive-git-stashes-and-patches.html)。
**注意：**确保您之前没有上演过的作品，否则您将无法区分它。
这可能有用。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-08T22:50:52.480

要查看存储中的所有文件（已跟踪和未跟踪），我将此别名添加到我的配置中：

```
showstash = "!if test -z $1; then set -- 0; fi; git show --stat stash@{$1} && git show --stat stash@{$1}^3 2>/dev/null || echo No untracked files -" 
```

它需要一个[参数](https://git.wiki.kernel.org/index.php/Aliases#Advanced_aliases_with_arguments)来说明您要查看哪个存储。请注意，它仍会在两个背靠背列表中显示它。

如果未传递任何参数，则该`if...fi`部分[将 bash 参数$1 更改为 0。](https://stackoverflow.com/questions/4827690/change-a-command-line-argument-bash)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-07T13:24:47.300

我在 2.32 下使用 git 找到并使用未跟踪文件的正确存储时遇到了麻烦。

我使用该命令来查找包含未跟踪文件和日期的存储：

```
git rev-list -g stash | git rev-list --stdin --max-parents=0 | xargs git show --stat 
```

在我使用另一个命令显示带有日期的存储列表以便找到具有特定日期的正确存储位置之后：

```
git stash list --date=local 
```

之后，我再次使用`git stash list`以查找存储的名称并将其应用到`git stash apply`.

这对我有用。我希望这对其他人有用！**

# android - 为什么 Fiddler 看不到我的帖子？

> ID：12681531
> 
> 赞同：0
> 
> 时间：2012-10-01T21:40:39.573
> 
> 标签：android, post

我正在从我的 android AVD 执行 HttpPost，如下所示...

```
// Create a new HttpClient and Post Header 
HttpClient httpclient = new DefaultHttpClient(); 
HttpPost httppost = new HttpPost("http://www.yoursite.com/api/GETTrafficDirector"); 
HttpResponse response = null; 

try { 
    // Add your data 
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(); 
    nameValuePairs.add(new BasicNameValuePair("id", "12345")); 
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!")); 
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 

    // Execute HTTP Post Request 
    response = httpclient.execute(httppost); 
} 
```

帖子执行时我正在运行 Fiddler，但 Fiddler 中没有任何反应。Fiddler不应该抓住这个帖子吗？我希望检查实体内容，因为 Eclipse 中的显示很难阅读。谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T23:06:32.373

如果您查看[本教程](http://mrrask.wordpress.com/2009/10/01/setting-up-the-android-emulator-for-http-debugging-using-fiddler2/)，您必须使用指向 127.0.0.1 的代理以及正在运行的任何端口提琴手来启动 Android AVD。

编辑：在使用[这些说明](https://aurir.wordpress.com/2010/03/22/tutorial-getting-android-emulator-working-with-fiddler-http-proxy-tool/)进行一些实验后，我突然想到，也许模拟器开始尊重 127.0.0.1 本身而不是主机，所以我输入了我的主机 IP 地址

然后从 APN 中的每个用户名和密码中删除单个字符，fiddler 开始从模拟器的浏览器而不是我的应用程序记录流量。

所以这至少是其中的一部分。

进一步编辑：

看这个问题[Getting information about the system proxy](https://stackoverflow.com/questions/8822829/getting-information-about-the-system-proxy)看来您需要明确告诉您的应用程序使用系统代理设置（这对我来说似乎很精神）

还有一个编辑：

如果我添加

```
 HttpHost proxy = new HttpHost("192.168.0.9", 8888);
    client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy); 
```

在我的应用程序中设置我的客户端，然后我会看到来自我的应用程序的传出流量

# python - Python - 使用这两种方法在字典中获取值之间的区别

> ID：12681543
> 
> 赞同：2
> 
> 时间：2012-10-01T21:41:40.963
> 
> 标签：python, dictionary, enumerate

我是 Python 的初学者，正在做一个文字游戏。并有一本记录`{"player 1":0, "player 2":0}`两名球员得分的字典。

我有一个再次播放选项，所以我需要始终将分数存储到该字典中。

但是当我在每一轮之后使用这个检索这个字典值时：

```
for value, index in enumerate(players):
      print index, " : ", value 
```

无论玩多少轮，我都会得到这个：

```
Player 2 : 0
Player 1 : 1 
```

但是当我使用：

```
for index in players:
     print index, " : ", players.get(index, 0) 
```

我得到了我想要的实际值。

我的问题是使用这两种方法获取值有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:50:02.053

`enumerate`正在遍历字典，但默认情况下，您仅[遍历键](http://docs.python.org/library/stdtypes.html#dict)：

> **迭代（d）**
> 
> 返回字典**键**的迭代器。这是 iterkeys() 的快捷方式。

您可能想要的是[items()](http://docs.python.org/library/stdtypes.html#dict.items)或[values()](http://docs.python.org/library/stdtypes.html#dict.values)。

> **项目（）**
> 
> 返回字典的**(key, value) 对**列表的副本。
> 
> **值（）**
> 
> **返回字典的值列表的**副本。请参阅 dict.items() 的注释。

我想你想要这个：

```
for name, score in players.items():
      print name, " : ", score 
```

或许：

```
for index, (name, score) in enumerate(players.items()):
      print index, " : ", name, " : ", score 
```

只是为了演示其他两种可能性，此方法查找所有名称：

```
for name in players: # or players.keys()
    print name 
```

这会查找分数（没有名字）：

```
for score in players.values():
    print score 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:46:24.370

enumerate 方法返回索引、值对。似乎对于字典 enumerate 正在枚举键集合（这就是您看到键的原因）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T21:47:22.430

在这里，

```
for value, index in enumerate(players): 
    print index, " : ", value 
```

`value`是枚举的计数器，这就是为什么你总是会看到`value`从 0,1,2,3,...

我想你真正想要的是

```
for index, value in enumerate(players): 
    print value, " : ", players[value] # .get works as well 
```

枚举字典通常没有什么意义，因为字典是无序的。

# windows-8 - Windows 应用程序证书失败：System.Net.json

> ID：12681546
> 
> 赞同：1
> 
> 时间：2012-10-01T21:42:14.417
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

尝试将应用程序上传到 Windows 8 应用商店并遇到以下错误。

> 发现错误：支持的 API 测试检测到以下错误：MSCORLIB 中的 API System.Globalization.CultureInfo.#ctor(System.String,System.Boolean)，PUBLICKEYTOKEN=B77A5C561934E089 不支持此应用程序类型。System.Net.Json.dll 调用此 API。

对此有什么想法吗？我正在使用支持新的异步函数调用的 HttpClient。我确保我在“发布模式”下进行了清理和重建。无论哪种方式，我都在猜测这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:11:35.357

[Json.NET](http://json.codeplex.com/)库支持 Metro/Store 应用程序，请尝试使用它而不是您当前的方法。记得编译你的应用程序在“任何 CPU”架构中使用的所有库，以便 ARM 设备可以使用它们！

# java - PAN 在 java 声音 api 中不起作用

> ID：12681549
> 
> 赞同：1
> 
> 时间：2012-10-01T21:42:22.163
> 
> 标签：java, wav, javasound, audio

我有一个大问题，我开发了一个 Java 应用程序，旨在测试听力，提供不同频率（500Hz - 6000Hz）和分贝的声音，效果很好，直到 apareción 一些笔记本出现问题时效果不佳，因为当你运行声音时到右耳是传送到两个耳朵，与左耳相同。起初我以为这是我的应用程序的错误，但当我发现类似 oracle java 的示例 [http://www.oracle.com/technetwork/java/index-139508.html](http://www.oracle.com/technetwork/java/index-139508.html)时，同样被吓了一跳。我也可以是硬件规则，因为在我的笔记本 windows7/fedora 在 linux 中正常工作。

我只能开始看到在任何计算机上运行应用程序的级别驱动程序或操作系统的解决方案。

-我在多台电脑上试过，目前在2三星1惠普1东芝没有用过（新的和用过的，不是声音设置的问题）

- 这个应用程序也适用于我是 C++ [http://www.programming.de/freeware_windows.php](http://www.programming.de/freeware_windows.php)（耳朵测试）

- 这是一个代码示例[http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml](http://www.anyexample.com/programming/java/java_play_wav_sound_file.xml)

-我尝试创作。立体声和单声道模式的 Wav 文件（使用 Audacity）

-在java中我安装了1.4 jre来测试当前

- 可能你们中的许多人会工作，因为这取决于计算机

一段代码：

```
private void propiedadesSound()
{
        this.clipAudio.stop();
        this.clipAudio.close();
        try
        {
            InputStream temp = getClass().getResourceAsStream(this.archivo);
            InputStream bufferedIn = new BufferedInputStream(temp);
            this.audio = AudioSystem.getAudioInputStream(bufferedIn);
                this.clipAudio.open(this.audio);
                if(this.clipAudio.isControlSupported(FloatControl.Type.PAN))
                {
                    FloatControl pan = (FloatControl) this.clipAudio.getControl(FloatControl.Type.PAN);
                    if(this.jRadioButtonIzq.isSelected())
                     pan.setValue(-1.0f);
                     else if(this.jRadioButtonDer.isSelected())
                     pan.setValue(1.0f);
                     else if(this.jRadioButtonAmbos.isSelected())
                     pan.setValue(0.0f);
                }
        else if(this.clipAudio.isControlSupported(FloatControl.Type.BALANCE))
                {
                    FloatControl pan = (FloatControl) this.clipAudio.getControl(FloatControl.Type.BALANCE);
                    if(this.jRadioButtonIzq.isSelected())
                    pan.setValue(-1.0f);
                    else if(this.jRadioButtonDer.isSelected())
                    pan.setValue(1.0f);
                    else if(this.jRadioButtonAmbos.isSelected())
                    pan.setValue(0.0f);
                 }
                if(this.clipAudio.isControlSupported(FloatControl.Type.MASTER_GAIN))
                {
                    FloatControl gain = (FloatControl) this.clipAudio.getControl(FloatControl.Type.MASTER_GAIN);
                    float max = gain.getMaximum();
                    float min = gain.getMinimum();
                    float current = gain.getValue();
                    double gainValue = this.jSliderDecibel.getValue()+20;
                    float newValue = (float)(min + gainValue * (max - min) / 100.0F);
                    gain.setValue(newValue);
                }
        }
        catch (UnsupportedAudioFileException ex)
        {
            exitError("Archivo de audio no soportado.");
        }
        catch (LineUnavailableException ex)
        {
            exitError("Linea no soportada.");
        }
        catch (IOException ex)
        {
            exitError("Error en la lectura del archivo de audio."+ex);
        }
    } 
```

pd：我也试过只删除代码PAN，balance，现在只有两个这样的

有人想出了一个替代方案？，代码必须是java，因为它是一个更大程序的一部分，但也许你可以添加一些其他语言的dll

先感谢您

/ - - -编辑 - - - - - - - - - - - - - - - - /

我找到了一个不确定的解决方案，但到目前为止它已经奏效了。有问题的笔记本是出厂的，由于某种原因无法划分java声音所以已经格式化，你安装了一个新的windows（在这种情况下是windows 7），与出厂时相同版本的windows ，之后它在我遇到这个问题的每个笔记本上都有效。所以是部分笔记本出厂驱动不兼容java api，多年未更新

/----------------------------------------/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:18:25.733

PAN 的定义有点模糊。根据他们如何解释 PAN，您可能无法获得完全的立体声分离。

我建议打开立体声线路并进行自己的平移。我在 JSyn 中这样做，我得到了完全的立体声分离。

如果您只需要一个通道上的音调，则将音调写入一个通道，将零写入另一个通道。

# c++ - 将 QImage 分成更小的部分

> ID：12681554
> 
> 赞同：5
> 
> 时间：2012-10-01T21:43:03.997
> 
> 标签：c++, image, qt, image-processing, qimage

我有一张图片，我想把这张图片分成 n 块。所以我想知道我怎么能用 QImage 做到这一点？或者这个任务有更好的（性能方面）Qt 类吗？

例如，假设我有一张由 1920x1080 像素组成的图像，我想将它分成 100 块，这意味着每块将由 192x108 像素组成。请注意，我不想创建缩放到 192x108 的同一块。每一块都是主画面的独特部分。

![在此处输入图像描述](../Images/262c8ed58e477453e6e00d58edc2c364.png)

我附上了一张图片，让我的问题更清楚。该图像由 1920x1080 像素组成，每个用网格潜水的部分由 192x108 像素组成，我想将它们中的每一个都视为 QImage 对象，而不是将其实际分成 100 块。

有没有办法用 QImage 做到这一点？性能在这里很重要，因为我会分析每件作品，通常会有超过 1000 件作品。

感谢您的帮助！

**编辑：**这两种方法都可以完美运行，但是 alexisdm 的方法更复杂，级别更低，但**速度更快**。jmk 的方法更容易使用，但速度较慢。

感谢您的两个答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T22:28:24.857

`QImage`您可以通过使用与源图像相同的步幅（每行字节数）和格式并将原始数据缓冲区（具有与所需起始位置对应的偏移量）传递给以下构造函数之一来创建而不复制任何数据`QImage`：

```
QImage createSubImage(QImage* image, const QRect & rect) {
    size_t offset = rect.x() * image->depth() / 8
                    + rect.y() * image->bytesPerLine();
    return QImage(image->bits() + offset, rect.width(), rect.height(),
                  image->bytesPerLine(), image->format());
} 
```

只要子图像存在，源图像就必须`QImage`存在。

但如果分析代码试图直接访问图像原始数据而不使用`QImage::bytesPerLine()`,`QImage::scanLine()`或`QImage::pixel()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T21:51:32.290

您可以通过创建`QImage`所需尺寸的新对象，然后将源图像的适当部分绘制到其中来完成此操作。为此，`QPainter`从空的目标图像创建一个，并使用该[`drawImage()`](http://qt-project.org/doc/qt-4.8/qpainter.html#drawImage)方法复制一个特定的子矩形。

但是，如果性能很重要，您可能需要寻找*避免*不必要的源图像副本的方法。例如，如果您的算法一次只需要查看 192x108 的图片，它是否可以将其分析限制在原始图像的特定子矩形上？

如果您可以通过这种方式重构代码，则可以完全避免创建额外的图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-12T18:14:30.340

[`QImage QImage::copy(const QRect &part)`](http://qt-project.org/doc/qt-5/qimage.html#copy)您可以使用创建子图像的内置函数。

# javascript - 你如何使用 LimeJS 检测不同层上的两个精灵的碰撞？

> ID：12681557
> 
> 赞同：1
> 
> 时间：2012-10-01T21:43:16.337
> 
> 标签：javascript, game-engine, limejs

我在主场景中有一个精灵，在定位层上有另一个精灵（后者也在主场景中）。

我想检测它们之间的碰撞，但是图层上精灵的 boundingBox() 函数被父图层的位置偏移。

如何检测两个精灵之间的碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:34:00.703

尝试这样的事情：

```
if(goog.math.Box.intersects(this.sprite1.getBoundingBox(), sprite2.getBoundingBox())){
    //do something...
} 
```

# coffeescript - 如何在 d3.js 中为时间刻度的间隔设置最小范围？

> ID：12681559
> 
> 赞同：1
> 
> 时间：2012-10-01T21:43:34.770
> 
> 标签：coffeescript, d3.js, data-visualization

我的问题可能措辞不佳，欢迎您对其进行编辑。

我的问题很简单。我正在使用 d3 以纯 HTML 格式制作时间线。时间线项目（这里的文章）都有一个固定的高度（比如说 100 像素），但我需要它们不要像这样重叠：

![重叠的文章（坏）](../Images/3a7bfdf7bd16f117f55d5f4791c71e5b.png)

这里有 4 篇文章，如您所见，它不可读。我知道问题是什么，但我不知道如何解决它。这是我的代码：

```
height = data.length * (articleHeight + margin * 2)

timeScale
    .range([height, 0])
    .domain(d3.extent(data, (d) -> timeFormat.parse(d.date)))

div = selection.selectAll(".article").data(data)

div.enter().append("div")
    .attr("class", "article")
    .html(divHTML)
    .style("top", "0")

div.transition().duration(2000)
    .style("top", (d) -> d3.round(timeScale(timeFormat.parse(d.date))) + "px") 
```

我计算高度的方式很糟糕。我研究过蜱虫，但那是为了生成轴，对吗？我尝试添加 1 天或 3 天的刻度，但它不会改变任何事情（不足为奇）。

CSV以防万一：

```
date,title,excerpt
2012-08-13,Most recent article,loremasdjf asdflkasfdlaksjdflasdf kjlasdhflkj asdflkja sdklfjhaskdljhfaskdljhfaskldjhf alksjhdf kaljsd fkljas dfkljash dkfaslkdfj
2012-08-4,Second Most recent article,loremasdjf asdflkasfdlaksjdflasdf kjlasdhflkj asdflkja sdklfjhaskdljhfaskdljhfaskldjhf alksjhdf kaljsd fkljas dfkljash dkfaslkdfj
2012-07-15,"July article, bro",loremasdjf asdflkasfdlaksjdflasdf kjlasdhflkj asdflkja sdklfjhaskdljhfaskdljhfaskldjhf alksjhdf kaljsd fkljas dfkljash dkfaslkdfj
2012-01-16,First article of 2012,loremasdjf asdflkasfdlaksjdflasdf kjlasdhflkj asdflkja sdklfjhaskdljhfaskdljhfaskldjhf alksjhdf kaljsd fkljas dfkljash dkfaslkdfj 
```

编辑：每天可以有不止一篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:10:17.577

问题确实出在高度计算上。您正在计算的是 N 篇文章所需的高度，其中 N 是数据中的文章数。但是，当您创建比例时，您会计算从最早日期到最晚日期的范围。因此，如果您的第一个数据项来自 01-01-2012，而您的最后一个数据项来自 31-01-2012，则范围将为 30（或 31 懒得检查）。

所以你基本上应该做的是重用时间尺度中的 d3.extent 计算来计算高度。

**更新**：好的，让我详细说明一下。你想要的是不重叠的文章。因此，您指定最小文章高度。我假设您将 d3.time.scale 用于 timeScale （这是正确的做法）。对于这个规模，您（也正确地）设置域如下：

```
 .domain(d3.extent(data, (d) -> timeFormat.parse(d.date))) 
```

d3.extent 函数为您提供最小值和最大值，在最早和最晚日期的情况下。现在，要计算所需的高度，您需要考虑可能可见的最大文章数，即（假设每天最多一篇文章）第一个日期和最后一个日期之间的天数，由下式计算d3.程度。为此，您必须计算最小值和最大值之间的天数。

设置了一个 jsfiddle，在这里演示了这个计算：http: [//jsfiddle.net/EA5rP/14/](http://jsfiddle.net/EA5rP/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T20:16:32.430

我找到了一个修复方法，但它并不理想，我仍然把它放在这里以防有人发现它有用。我不只是使用比例尺中的值，而是将文章的长度（实际上少一点……告诉你这并不理想）乘以已经显示的文章数量。远非优雅，但它现在有效，文章永远不会重叠：

```
div.transition().duration(2000)
    .style("top", (d, i) ->
        d3.round(timeScale(timeFormat.parse(d.date))) + i * articleHeight + "px") 
```

# windows-8 - Windows 8 RT 是否可以在应用程序中设置 VPN 配置设置？

> ID：12681561
> 
> 赞同：3
> 
> 时间：2012-10-01T21:43:41.370
> 
> 标签：windows-8, microsoft-metro, vpn

iOS 和 Android 环境中有多个 VPN 客户端应用程序。有没有办法为 Windows 8 RT 应用程序构建 VPN 客户端？

我在这里找到了讨论： [http ://social.technet.microsoft.com/Search/en-US/windows?query=vpn&rq=meta:Search.MSForums.ForumID(fc9915fa-bd55-4c15-9a72-9956efee4a7c)+站点：microsoft.com&rn=Windows+8+网络+论坛](http://social.technet.microsoft.com/Search/en-US/windows?query=vpn&rq=meta:Search.MSForums.ForumID(fc9915fa-bd55-4c15-9a72-9956efee4a7c)+site:microsoft.com&rn=Windows+8+Networking+Forum)

有一种方法可以使用路由和远程访问（在此处找到）在 Windows 8 桌面上访问和设置此信息：http: [//code.msdn.microsoft.com/windowsdesktop/Routing-and-Remote-Access-ba17e417#content](http://code.msdn.microsoft.com/windowsdesktop/Routing-and-Remote-Access-ba17e417#content)

有没有办法修改他们设备上的用户设置来设置 VPN？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:14:46.890

与允许应用程序进行此类更改的主要安全问题一样 - 我最好的猜测是 winRT 并非旨在允许应用程序修改给定计算机上的远程桌面设置。

您可以要求用户手动进行更改：要查看是否启用了远程桌面，只需使用[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)检查终端服务服务是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:05:45.343

[http://www.c-sharpcorner.com/UploadFile/6cde20/enable-user-for-changeing-internet-settings-in-windows-8/](http://www.c-sharpcorner.com/UploadFile/6cde20/enable-user-for-changing-internet-settings-in-windows-8/)

这可能很有用，它向您展示了如何修改设置以更改互联网设置，我假设 vpn 就在那里。

# for-loop - 如何在顶点 for 循环中获取密钥和值？

> ID：12681563
> 
> 赞同：6
> 
> 时间：2012-10-01T21:43:44.143
> 
> 标签：for-loop, key, salesforce, apex-code

我有一个地图对象，它存储`<Id, String>`Id 是联系人 ID 的位置，而字符串是生成的电子邮件消息。

我已经成功地遍历了地图，并且能够在我遍历地图时提取值（字符串部分）。

我想做的也是在抢值的时候抢到key。这在大多数语言中都很简单，但我似乎无法在 apex 中找到如何做到这一点。

**这就是我现在所拥有的：**

```
Map<Id,String> mailContainer = new Map<Id,String>{};

for(String message : mailContainer.values())
{

    // This will return my message as desired
    System.debug(message);

} 
```

**我想要的是这样的：**

```
for(String key=>message : mailContainer.values())
{

    // This will return the contact Id
    System.debug(key);

    // This will return the message
    System.debug(message);

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T23:13:48.887

迭代键而不是值：

```
for (Id id : mailContainer.keySet())
{
    System.debug(id);
    System.debug(mailContainer.get(id));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:12:07.597

你找不到它，因为它不存在。Apex 允许对键或值进行迭代，但不允许对关联（键、值）进行迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T06:31:42.523

对于它的价值，这是完成它的另一种方法（稍微冗长）......

```
 Map<id, string> myMap = Map<id, string> ();

    set<id> keys = myMap.keySet();
    for (id k:keys) {
        system.debug(k +' : '+ myMap.get(k));
    } 
```

# scala - Websocket“硬”断开不明显？

> ID：12681565
> 
> 赞同：11
> 
> 时间：2012-10-01T21:43:53.677
> 
> 标签：scala, playframework, websocket, playframework-2.0

我不确定我是否遇到了默认超时（我可以在某处设置它吗？），但也许我错过了一些东西。当客户端的浏览器建立 websocket 连接时，我会保持持久性。然后，在断开连接时，我删除了该持久对象。很简单。断开连接*通常*会在客户端关闭浏览器时触发，但**不会在客户端关闭其 wi-fi 连接时**触发（在 MacBook Pro 上进行测试，这并不重要）。

在 Scala 控制器中，我记录了每条`in`消息，但是当 wi-fi 关闭时，**什么也没有发生（从**[文档](http://www.playframework.org/documentation/2.0/ScalaWebSockets)中，我希望 EOF？）。

我认为这一定是一个错误，从我如何解释[WS 协议](https://www.rfc-editor.org/rfc/rfc6455#section-7) **服务器必须*关闭 WebSocket 连接*，并应该记录问题。**但后者不会发生。

```
val in = Iteratee.foreach[String](x => {
  logger.info("Websocket msg: " + x)
   // expect EOF?
   x match {
     case "persist" => // persist some object
   }
}).mapDone { x =>
   // delete my persisted object (never happens unless browser/tab closed)
} 
```

有人经历过吗？我已经尝试了一个简单的控制器和与我的配置相匹配的东西。`ws3`下面的控制器或控制器都`ws2`不能解决问题。玩！下面的代码：

```
object Application extends Controller {

  private def ws(out: PushEnumerator[String]) = {

    Logger.logger.info("ws()")

    val in = Iteratee.foreach[String](x => {
      Logger.logger.info("Websocket msg: " + x)
      try {
        x match {
          case "persist" => Logger.logger.info("PERSIST")
        }
      } catch {
        case e: Exception => {
          Logger.logger.info("NOT RECOGNIZED COMMAND, NO PERSIST")
        }
      }
    }).mapDone { x =>
      Logger.logger.info("STOP PERSIST")
    }
    in
  }

  def ws2() = WebSocket.using[String] { request =>

    Logger.logger.info("ws2()")

    val out = Enumerator.imperative[String]()
    val in = ws(out)

    (in, out)
  }

  def ws3() = WebSocket.using[String] { request =>

    Logger.logger.info("ws3()")

    val out = Enumerator.imperative[String]()
    val in = Iteratee.foreach[String](x => {
      Logger.logger.info("Websocket msg: " + x)
      try {
        x match {
          case "persist" => Logger.logger.info("PERSIST")
        }
      } catch {
        case e: Exception => {
          Logger.logger.info("NOT RECOGNIZED COMMAND, NO PERSIST")
        }
      }
    }).mapDone { x =>
      Logger.logger.info("STOP PERSIST")
    }
    (in, out)
  }

  def view() = Action { implicit request =>
    Ok(views.html.index.render(""))
  }
} 
```

视图很简单：

```
@(message: String) @main("Welcome to Play 2.0") {

@play20.welcome(message) }

<script type="text/javascript" charset="utf-8">
    var sock = new WebSocket("ws://192.168.1.120:9001/ws3");

    sock.onopen = function(event) {
        sock.send('persist');
    }
</script> 
```

路线：

```
GET     /ws2                          controllers.Application.ws2
GET     /ws3                          controllers.Application.ws3
GET     /view                         controllers.Application.view 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:56:27.213

这不是 Play Framework 特定的，而是与网络相关的问题。发生的情况是，如果您正常断开连接，另一端发送 FIN 数据包，服务器知道它挂了。如果另一端没有网络连接，它就不能这样做。

那么如何判断一个socket是否打开呢？尝试读取或写入时会出现异常。但是使用不会自行发生的非阻塞模型。所以在你的情况下，我会：

*   有一个超时
*   让 JavaScript 在超时时间内发送 ping
*   如果没有 ping 到达，请断开连接

或从服务器端发送 ping（写入套接字）。

# tfs - 将 TFS 数据层升级到 TFS 2012 时如何解决错误“错误：5069 ALTER DATABASE 语句失败”？

> ID：12681567
> 
> 赞同：1
> 
> 时间：2012-10-01T21:44:07.607
> 
> 标签：tfs

我们正在尝试将 TFS 服务器从 TFS 2010 升级到 TFS 2012，但数据层升级失败并出现以下错误：

*TF400744：执行以下脚本时出错：SetRecoveryModelToSimple.sql。失败的批处理在第 1 行开始。语句行：1。脚本行：1。错误：5069 ALTER DATABASE 语句失败。有关详细信息，请参阅配置日志。*

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:45:30.273

弄清楚了。我们的 SQL 服务器已被镜像，这显然是导致错误的原因。一旦我们破坏了镜像，那么升级就起作用了。

# iphone - viewDidUnload 帮助 - iPhone 应用程序

> ID：12681568
> 
> 赞同：0
> 
> 时间：2012-10-01T21:44:21.113
> 
> 标签：iphone, ios, ios6

我在使用新的 iOS 6 时遇到问题。以前我理解“viewDidUnload”。据我了解，这现已贬值，我在结束网络活动指标时遇到了一些问题。下面是我的代码。在此先感谢您的帮助！

```
#import "MapViewController.h"

@implementation MapViewController

@synthesize webview, url, activityindicator, searchbar;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        // Custom initialization.
    }
    return self;
}

- (void)viewDidLoad 
{
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    webview.delegate = self;
    activityindicator.hidden = TRUE;
    [webview performSelectorOnMainThread:@selector(loadRequest:) withObject:requestObj waitUntilDone:NO];
    [super viewDidLoad];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
    activityindicator.hidden = TRUE;  
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    [activityindicator stopAnimating];  
    NSLog(@"Web View started loading...");
}

- (void)webViewDidStartLoad:(UIWebView *)webView {     
    activityindicator.hidden = FALSE;
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    [activityindicator startAnimating];     
    NSLog(@"Web View Did finish loading");
}

- (void)didReceiveMemoryWarning {
        // Releases the view if it doesn't have a superview.
        [super didReceiveMemoryWarning];

        // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {
    webview = nil;
    activityindicator = nil;
    searchbar = nil;
    [super viewDidUnload];
}

- (void)dealloc {
    [url release];
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:54:20.120

我想你误解了什么`viewDidUnload`是为了。您的代码显示与将活动微调器隐藏在`viewDidUnload`.

```
- (void)viewDidUnload
{
  webview = nil;
  activityindicator = nil;
  searchbar = nil;
  [super viewDidUnload];
} 
```

`viewDidUnload`仅用于在系统在内存不足的情况下清除 UIViewController 的非活动视图时清理保留的、可替换的对象。

在 iOS 6 中 viewDidUnload 永远不会被调用，因为系统将不再在内存不足的情况下清除 UIViewController 的视图，如果您在`didReceiveMemoryWarning`回调中也需要这样做，则由您决定。

```
- (void)didReceiveMemoryWarning
{
  [super didReceiveMemoryWarning];
  if ([self isViewLoaded] && self.view.window == nil)
  {
    self.view = nil;
    [self viewDidUnload];
   }
} 
```

# java - JPA2——如何在“多”端自动删除一个方向的多对一映射数据？

> ID：12681569
> 
> 赞同：1
> 
> 时间：2012-10-01T21:44:25.167
> 
> 标签：java, spring, jpa, ejb

First CascadeType.Remove 不是一个选项，因为客户端数据库可能不支持级联操作。

我猜 OrphanRemoval = true 只处理 @OneToXXX 关系。

人际关系如何`many-to-one`？

例如这样的`many-to-one`映射：

```
public class Order{
    ....
    @ManyToOne
    private Customer customer;
    .....
} 
```

在 Customer 实体中，没有到 Order 的映射，这使得关系变成单向的。

那我们`remove all orders from a customer before removing that customer`怎么办？是否有一种简单的自动方法来处理它，或者我们必须通过服务层显式实现代码并调用类似的东西`findOrdersByCustomer(long customer_id)`然后删除它们？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:50:17.880

是的，您需要找到所有订单并将其删除。或者您也可以执行 JPQL 查询删除所有内容：

```
delete from Order o where o.customer = :customer 
```

请注意，您关于 CascadeType.REMOVE 的注释是错误的：执行级联的是 JPA，而不是数据库。因此，无论数据库是什么，它都受到支持。

# java - Java在线程中的循环中将点击监听器添加到JButton

> ID：12681571
> 
> 赞同：0
> 
> 时间：2012-10-01T21:44:28.573
> 
> 标签：java, swing, jpanel, jlabel, bufferedimage

我有一个循环，其中创建了几个 JLabel，其中包含指向图像的链接。

对于每个 JLabel，都会创建一个 JButton。

我正在寻找的行为是为每个 JButton 添加一个单击侦听器，该侦听器触发一个方法。

第一个问题是我似乎无法在线程中添加监听器。

第二个问题是我看不到如何指定每个 JButton 来触发具有不同值的单击侦听器。

我正在寻找类似于以下内容的内容（显然 onClick 方法不存在）：

```
Thread thread = new Thread(new Runnable()
{
    public void run()
    {
        JPanel mainPanel = new JPanel();
        for (int counter = 0; counter < imageSources.size(); counter++)
        {
            JLabel imageSource = imageSources.get(counter);
            // JButton saveToDisk = new JButton("Save Image");
            // saveToDisk.onClick(saveFavourite(imageSources.get(counter)));
            mainPanel.add(imageSource);
            // mainPanel.add(saveToDisk);
        }

.
.
.

public void saveFavourite(String imageUrl)
{
    BufferedImage image = null;
    try
    {
        URL url = new URL(imageUrl);
        image = ImageIO.read(url);
        ImageIO.write(image, "jpg", new File("/Users/USERNAME/Desktop/" + webPage.getMemeId(imageUrl) + ".jpg"));
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T11:05:21.943

这是一个创建按钮并向其添加在循环期间采用字符串参数的 ActionListener 的简单示例

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test extends JFrame {

    private final JLabel[] label = new JLabel[5];
    private final JButton[] button = new JButton[5];

    public Test() {
        JPanel mainPanel = new JPanel(new GridLayout(0,2));
        for (int counter = 0; counter < label.length; counter++) {
            label[counter] = new JLabel("Label " + counter);
            button[counter] = new JButton("Button " + counter);
            button[counter].addActionListener(new MyActionListener("Row " + counter));
            mainPanel.add(label[counter]);
            mainPanel.add(button[counter]);
        }
        this.add(mainPanel);
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Test run = new Test();
                run.pack();
                run.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                run.setVisible(true);
            }
        });
    }

    private class MyActionListener implements ActionListener {

        String text;

        public MyActionListener(String text) {
            this.text = text;
        }

        public void actionPerformed(ActionEvent e) {
            System.out.println(text);
        }
    }
} 
```

# ruby - 用 Ruby 发布到 Google+？

> ID：12681575
> 
> 赞同：1
> 
> 时间：2012-10-01T21:44:54.300
> 
> 标签：ruby, capybara, watir, google-plus, phantomjs

目前是否有库或 gem 以编程方式封装了发布到 Google+ 的过程？似乎使用 Capybara、Watir 或类似的东西来自动发布到您的 Google+ 页面的流中是相当直接的，但是我不想重新发明轮子。有没有做过这样的事情并且可以公开获得？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T00:23:18.510

您不能使用[Google+ API](https://developers.google.com/+/api/)发帖。

> 注意：Google+ API 目前提供对公共数据的只读访问权限。所有 API 调用都需要 OAuth 2.0 令牌或 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T20:21:45.740

不完全是“红宝石”的答案，但它可以从 Ruby 和 Rails 翻译甚至执行：[http ://code.google.com/p/socials-auto-poster/](http://code.google.com/p/socials-auto-poster/)

# objective-c - NSDateFormatter 在 iOS 5.1 和 iOS 6 中的行为

> ID：12681577
> 
> 赞同：1
> 
> 时间：2012-10-01T21:45:12.683
> 
> 标签：objective-c, ios, nsdateformatter

还有其他人注意到 iOS 5.1 和 iOS 6.0 之间的一些差异吗？在下面，日期字符串的格式在每个版本中都不同：NSDateFormatter

```
*dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
dateFormatter.dateFormat = @"MM/dd/yyyy HH:mm:ss (vvvvv)";
NSDate   *lDate   = [[NSDate alloc]init];
NSString *sDate   = [dateFormatter stringFromDate:lDate]; 
```

在 iOS 5.1 中，sDate 是“10/01/2012 16:43:09 (GMT-05:00)”，但在 iOS 6.0 中，sDate 是“10/01/2012 16:44:09 ()”

关于为什么会这样的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:29:54.513

替换`@"MM/dd/yyyy HH:mm:ss (vvvvv)";`为`@"MM/dd/yyyy HH:mm:ss ('GMT'Z)";`

`Z`格式字符串将输出您正在使用的内容，`vvvvv`除了`GMT`前缀并且也没有冒号。

如果需要冒号，您可以添加此行以将其添加到字符串中：

```
sDate = [NSString stringWithFormat:@"%@:%@", [sDate substringToIndex:sDate.length-3], [sDate substringWithRange:NSMakeRange(sDate.length-3, 3)]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:09:49.370

我认为这可以解决您的问题（仅使用一个 v）：

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"MM/dd/yyyy HH:mm:ss (V)";
NSDate   *lDate   = [[NSDate alloc]init];
NSString *sDate   = [dateFormatter stringFromDate:lDate]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T07:14:25.833

我有 IST 而不是 GMT。我`V`在 IOS 5 中使用它可以正常工作，但在 IOS 6 中无法正常工作。

# tsql - UDF 缺失结果的交叉应用

> ID：12681579
> 
> 赞同：0
> 
> 时间：2012-10-01T21:45:14.727
> 
> 标签：tsql, sql-server-2005, cross-apply

我正在执行类似于以下的 SQL 查询

```
SELECT fn.FullName, pn.LastName, pn.FirstName, pn.MI
FROM Source.dbo.tblPerson fn
    cross apply dbo.ParseFullName(fn.FullName) pn 
```

前 85 行的结果看起来很好，第 86 行+对于从 UDF 派生的列总是有 NULL。如果我添加 where 或 order by 子句来更改结果集，则始终是前 85 行返回完整的结果集。因为 85 数字是如此一致，我认为这是我忽略的东西。

任何人都可以提供的任何帮助都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:36:07.597

我弄清楚了问题所在。根据示例，被调用的 UDF dbo.ParseFullName 是调用 OLE 自动化对象。显然，我没有通过 sp_OADestroy 正确销毁对象。我正在破坏初始对象，但不是所有派生对象。一旦我在 UDF 结束时解决了这个问题，我就开始按预期获得所有结果。感谢所有的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:47:56.803

尝试用外部应用替换交叉应用。确保您的 Sql 不会在 NULL 上出错。

```
SELECT fn.FullName, pn.LastName, pn.FirstName, pn.MI
FROM Source.dbo.tblPerson fn
OUTER APPLY dbo.ParseFullName(fn.FullName) pn 
```

# iphone - 导致奇怪路径的角度

> ID：12681581
> 
> 赞同：0
> 
> 时间：2012-10-01T21:45:38.093
> 
> 标签：iphone, ios, math, cocos2d-iphone

我正在使用 cocos2d 制作游戏，并且我正在尝试从当前敌人位置以一定长度的敌人角度创建射击路径。

这是我用来旋转和射击枪的代码。

```
gun runAction: [CCSequence actions: [CCDelayTime actionWithDuration:2.0],
                 [CCCallBlockN actionWithBlock:^(CCNode *node)
                  { [self shootEnemyLaserFromPositionAtAngle:gun];}],
                 [CCRotateTo actionWithDuration:0.5 angle:250],
                 [CCCallBlockN actionWithBlock:^(CCNode *node)
                  { [self shootEnemyLaserFromPositionAtAngle:gun];}],
                 [CCRotateTo actionWithDuration:0.5 angle:230],
                 [CCCallBlockN actionWithBlock:^(CCNode *node) 
```

我正在使用这个方程来计算向量（这个代码在 shootEnemyLaserFromPositionAtAngle 中）：

```
CGPoint endPoint = CGPointMake(gun.position.x + (800 * cos(gun.rotation)), gun.position.y + (800 * sin(gun.rotation)));
NSLog(@"end Point x: %f, %f", endPoint.x, endPoint.y);

shipLaser.position = gun.position;

CGPoint shootVector = ccpNormalize(ccpSub(endPoint, shipLaser.position));
CGPoint shootTarget = ccpMult(shootVector, _winSize.width*2);

[shipLaser runAction:[CCSequence actions: [CCMoveBy actionWithDuration:4.0 position:shootTarget],
                      [CCCallFuncN actionWithTarget:self selector:@selector(invisNode:)], nil]]; 
```

我的问题是它最终会朝奇怪的方向射击。我的端点值是这样打印出来的。我还打印了下面的枪旋转角度：

```
angle: -90.000000
end Point x: 21.541107, -499.593536
angle: -110.000000
end Point x: -419.216644, 250.997940
angle: -130.000000
end Point x: 86.166939, 959.688538 
```

我注意到角度突然变负了。我尝试更改为正角度（将 360 添加到负角度），但这导致了相同的端点。

任何人都可以帮助或给我一些尝试吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:01:02.520

和函数`cos()`都`sin()`从弧度输入返回一个值。你想用`CC_RADIANS_TO_DEGREES`它来修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T21:57:09.587

`gun.rotation`如果试图找到它的正弦或余弦，您需要将度数转换为弧度。使用`float gunRotation = CC_DEGREES_TO_RADIANS(gun.rotation);`（或`double`）并将其传递给三角函数。当然，这些片段之外可能还有其他问题，所以如果您发现其他相关问题，请更新问题。

# c# - 更改特定地址中的十六进制值

> ID：12681586
> 
> 赞同：-1
> 
> 时间：2012-10-01T21:45:59.907
> 
> 标签：c#, assembly, hex, byte

我在 .exe 文件中有这个![地址](../Images/d1b87cad67f58c2651f83839b0eb0f95.png)地址，我想做一个 C# Windows 窗体应用程序，让我在地址十六进制部分写一个新数字，我的意思是它是**"C0/EA/03"**，我想更改**" 03"**到我在我的应用程序中写的数字并保存更改。那可能吗？如果是，请帮助我如何做到这一点。提前致谢。

为了更具体，我想这样做：

-**示例（无效，仅作为示例）** -

![在此处输入图像描述](../Images/a8abe2b887f10ad77e2edd8cefb8efd6.png)

因此，当我单击按钮时，我之前显示的地址中的 03 现在将变为 FF（255 十六进制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:59:58.060

这看起来像是来自 OllyDbg 的截图，是这样吗？下一个问题是您想在运行时（注入）还是在静态 exe 文件（补丁）中执行此操作？

要修补文件，您需要找出 exe 文件中该特定字节的实际偏移量。这样做需要识别 PE 文件的文本部分，转到文本部分的基地址，然后偏移到文本部分。要获得偏移量，您需要使用反汇编程序，如 Olly 或 ndisasm。找到该`shr dl,3`指令，然后计算该指令相对于已加载文本部分的偏移量。请记住，加载的虚拟地址与文件中的地址不同。0x538695 可能是一个加载的虚拟地址，但很难从你的问题描述中分辨出来（我猜它是一个虚拟地址，因为它看起来像 Olly 的字体）。无论如何，将该偏移量添加到 PE EXE 文件中文本部分的基础上，一切就绪。

使用 LordPE 之类的工具可能更容易做到这一点。

[http://www.tech-juice.org/2011/02/21/portable-executable-converting-rva-to-file-offset-and-back/](http://www.tech-juice.org/2011/02/21/portable-executable-converting-rva-to-file-offset-and-back/)

# jquery - 是否可以在 IE8 中使用 fancybox 2.1 打开 PDF？

> ID：12681588
> 
> 赞同：5
> 
> 时间：2012-10-01T21:46:17.340
> 
> 标签：jquery, internet-explorer, fancybox, fancybox-2

我正在一个托管大量 PDF 文件的网站上工作，我想在 fancybox (2.1) 中打开它们进行预览。它在 Chrome 和 Firefox 中运行良好。但它在 IE8 中不起作用。我尝试直接链接到 PDF 文件、链接到 iframe 和链接到嵌入标签（以及其他更疯狂的东西）。我不能用谷歌来包装它们。这是一个演示问题的页面。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>My Page</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.fancybox.js?v=2.1.0"></script>
    <link type="text/css" rel="stylesheet" media="screen" href="jquery.fancybox.css" />
</head>
<body style="background-color:grey">    
    <p><a href="mypdffile.pdf" class="fancypdf">a link</a> to a PDF file.</p>

    <p><a href="#Frame1" class="fancy">a link</a> to an iframe with the pdf in it.</p>
    <div style="display:none">
    <iframe id="Frame1" src="mypdffile.pdf" style='width:100%;' height="600" frameborder="0" allowTransparency="true"></iframe>
    </div>

    <p><a class="fancy" href="#mypdf" >a link</a> to a pdf in an embed tab</p>
    <div style="display:none"><div id="mypdf"> 
    <embed src="mypdffile.pdf" type="application/pdf" width="640" height="480" /> 
    </div></div>  

    <script type='text/javascript'>
    $(function(){
        $("a.fancypdf").fancybox({type:'iframe'});
        $("a.fancy").fancybox();
    });
    </script>
</body>
</html> 
```

结果每次都不一样。在 IE 中，第一个链接的微调器出现并挂起。对于后两个，会出现一个花式框弹出窗口，但它是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T23:44:19.047

当然有可能，对于这种类型的 html ：

```
<a class="fancypdf" href="path/file.pdf">open pdf</a> 
```

你可以使用这个代码：

```
$(".fancypdf").click(function(){
 $.fancybox({
   type: 'html',
   autoSize: false,
   content: '<embed src="'+this.href+'#nameddest=self&page=1&view=FitH,0&zoom=80,0,0" type="application/pdf" height="99%" width="100%" />',
   beforeClose: function() {
     $(".fancybox-inner").unwrap();
   }
 }); //fancybox
 return false;
}); //click 
```

使用此方法，您无需在页面中嵌入 PDF。

**注意**：如果您使用的是`HTML5 <!DOCTYPE html>`，我建议您设置`height`just`99%`以避免在 PDF 查看器中出现双垂直滚动条。这是因为 HTML5 初始化边距的方式（参见上面代码中的`content`选项、标签）`embed`

**更新**：[此演示](http://www.picssel.com/playground/jquery/fancyboxFromIframe_16Jan12.html)来自另一篇文章，但使用 fancybox v2.x 打开 PDF

* * *

**编辑**（2014 年 4 月）：

**请注意**（否决者）这个答案已经超过一年半了。从那时起，浏览器及其插件不断发展，最有可能更好的选择是在 iframe 中打开 PDF。[检查这个](https://stackoverflow.com/a/13296136/1055987)尽管如此，嵌入可能是某些场景的合适解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T15:23:38.027

```
That worked for me in IE and Chrome (fancybox 2.x)

//HTML
<a class="fancybox fancybox.iframe"  href="arquivo.pdf">Arquivo</a>

//SCRIPT
$('.fancybox').fancybox({
    autoSize: false,
    width: 960,
    height: 500,
    arrows: false,
    nextClick: false,
    iframe: {
        preload: false // fixes issue with iframe and IE
    },
    helpers : {
    overlay : {
        css : {'background' : 'rgba(0, 0, 0, 0.85)'}
      }
    }   
}); 
```

# yii - Yii CgridView：排序或过滤删除我的“自定义”过滤器

> ID：12681593
> 
> 赞同：0
> 
> 时间：2012-10-01T21:46:41.857
> 
> 标签：yii

**情况：** 我创建了一种底部带有 CGridView 的向导。每次用户在向导中选择某些东西时，网格都会被模型的搜索功能“过滤”（没有 AJAX）。我将所有用户对先前步骤的“答案”保留在隐藏字段中，因此我可以在向导中的每个步骤中再次使用它们进行过滤。

**问题：** 当我直接在 cgridview 中排序或过滤时（使用默认过滤字段和排序标题），他不再使用我的隐藏字段值。我可能有点迷路（顺便说一句，我对 YII 很陌生）。如何为默认过滤器和排序请求提供隐藏字段的值，以便在搜索功能中使用它们？我可以看到我需要在请求中添加诸如 Person[name] 之类的参数，但我不知道如何...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:18:59.677

您可以通过更改`inputSelector`变量来解决这个问题`jquery.yiigridview.js`

例如，通过像下面这样更改它，您可以通过将（女巫默认值是过滤器）添加到输入字段来将输入字段定义为`gridview`内部字段`filterClass`

```
inputSelector = '.' + settings.filterClass + ' input, ' + '.' + settings.filterClass + ' select'; 
```

* * *

编辑：在 Yii 1.1.13 中，[filterSelector](http://www.yiiframework.com/doc/api/1.1/CGridView#filterSelector-detail)属性已添加到完成这项工作的 CGridView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:13:34.843

这是我的 4 美分半....

我看到这个工作的唯一方法是你通过模型->搜索可以访问的非 AJAX 提交过程存储你的“向导”值（我在想 $_SESSION 但不知道这是否可行） () 函数，在过滤/搜索的所有实例中调用，并将它们添加到搜索条件中。

显然，以下内容对您没有帮助，但可能会更多地解释我在类似情况下所做的事情。默认情况下，我想限制某些类型用户的大表视图，但限制并不像只显示单个用户 ID 的条目那么简单。一旦用户过滤数据，他们就可以访问那里的所有基础数​​据。

我最终做的是检测他们是否过滤了我用来限制数据的任何列，如果是，则应用用户提交的过滤器，或者如果没有，则在同一列上应用我自己的限制过滤器。因此，对于我想要应用它的每一列，我会在 model->search() 函数中执行类似的操作，同时检测此默认限制是否应该适用于相关用户：

```
if(isset($this->A_DB_Column_Name) && in_array($this->A_DB_Column_Name,array(default limitation))) {
    $criteria->compare('A_DB_Column_Name',$this->A_DB_Column_Name,false);
} else {
    $criteria->compare('A_DB_Column_Name',array(default limitation),false);
} 
```

# jquery - 来自 json 的动态 jquery 数据表的 Nowrap

> ID：12681605
> 
> 赞同：0
> 
> 时间：2012-10-01T21:47:41.217
> 
> 标签：jquery, json, datatables

我正在尝试为我的 jquery 数据表添加 nowrap，但没有成功。

像这样的东西（不工作）

```
$.ajax( {
    "url": 'invokeHawkAgent.gsp',
    "success": function ( json ) {
        json.bDestroy = true;
        $('#tabs-1-contents').dataTable({'data':json,
            "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                $('td', nRow).attr('nowrap','nowrap');
                return nRow;
             }
        });
    },
    "dataType": "json"
} ); 
```

工作（但没有 nowrap）

```
$.ajax( {
    "url": 'invokeHawkAgent.gsp',
    "success": function ( json ) {
        json.bDestroy = true;
        $('#tabs-1-contents').dataTable(json);
    },
    "dataType": "json"
} ); 
```

任何想法如何添加 nowrap 到这个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:49:03.923

对于任何有兴趣的人，这就是我解决问题的方法：

JSON

```
{
    "aaData":[
    { 
        "0": "2010-07-27 10:43:08", 
        "1" :  "...", 
        "2" : "...", 
        "3" : "...", 
        "4" : "...", 
        "5" : "...", 
        "6" : "...", 
        "7" : "...",
        "DT_RowId": "row",
        "DT_RowClass": "gradeC"
    },
    { 
        "0": "2010-07-27 10:43:08", 
        "1" :  "...", 
        "2" : "...", 
        "3" : "...", 
        "4" : "...", 
        "5" : "...", 
        "6" : "...", 
        "7" : "...",
        "DT_RowId": "row",
        "DT_RowClass": "gradeC"
    }
    ] ,
     "aaSorting": [
      [ 1, "desc" ]
     ],
     "aoColumns": [
       { "sTitle": "Title1" },
       { "sTitle": "Title2" },
       { "sTitle": "Title3" },
       { "sTitle": "Title4" },
       { "sTitle": "Title5" },
       { "sTitle": "Title6" },
       { "sTitle": "Title7" },
       { "sTitle": "Title8" }
     ]
} 
```

jQuery：

```
$.ajax( {
    "url": 'invokeHawkAgent.gsp',
    "success": function ( json ) {
        json.bDestroy = true;
        $('#tabs-1-contents').dataTable({
            "aaData": json.aaData,
            "aoColumns": json.aoColumns,
            "sScrollX": "100%",
            "sScrollXInner": "110%",
            "bScrollCollapse": true,
            "sScrollY": "500px",
            "bPaginate": true,
            "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                $('td', nRow).attr('nowrap','nowrap');
                return nRow;
                }
            });
        },
    "dataType": "json"
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-08T14:04:50.123

如果您使用的是引导程序，只需`text-nowrap`在您的标题类中添加类。

```
{
 "title": "My Title",
 "data": "My Data",
 "className": "text-center nosort text-nowrap"
} 
```

这对我来说可以。

# java - 如何解决“无法转发。响应已提交”错误

> ID：12681609
> 
> 赞同：0
> 
> 时间：2012-10-01T21:48:15.897
> 
> 标签：java, jsp, servlets, web.xml

> **可能重复：**
> [java.lang.IllegalStateException：提交响应后无法转发](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe)

```
 <% response.sendRedirect(submit_success);

  %> 
```

我正在尝试在处理我的表单后将重定向发送到 JSP 文件。

我在控制台中看到异常 -> 无法转发。响应已提交。为什么我会收到此错误，我应该怎么做才能解决这个问题？

[10/1/12 17:35:03:257 EDT] 0000022f servlet E`com.ibm.ws.webcontainer.servlet.ServletWrapper service SRVE0068E: Uncaught exception created in one of the service methods of the servlet /SubmitContentProcess.jsp in application dwsecure. Exception created : java.lang.IllegalStateException: Cannot forward. Response already committed. at java.lang.Throwable.<init>(Throwable.java:67) at com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:139) at com.ibm._jsp._SubmitContentProcess._jspService(_SubmitContentProcess.java:233) at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99) at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657) at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939) at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502) at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:17`

# php - 如何创建一个在用户离开页面时删除图片的文件上传站点？

> ID：12681612
> 
> 赞同：0
> 
> 时间：2012-10-01T21:48:19.860
> 
> 标签：php, image, upload, delete-file

我正在创建一个网站（PHP），用户可以在其中将图片上传到某种数据库，当他们离开页面时，他们的图片会被删除。其他用户（在另一个页面中）将能够看到所有未删除的图片。

我想过这样做：

创建一个文件夹（让我们称之为“图片”）并用数字（、、、等）为上传的每张图片命名`1.jpg`，`2.jpg`当`3.jpg`用户离开页面时，图片将自行删除（如何？？）以及下一张何时需要要上传照片，网站会搜索第一个未拍摄的号码。

如果有人有更好的主意，我想听听，否则：

1.  如何构建一个函数，从仅填充 #.jpg 文件的文件夹中找到第一个未使用的数字？（以及我能做些什么来保护自己免受双重数字的影响）

2.  用户离开页面时如何删除照片？

3.  如何显示目录中的随机照片？

在这些将得到回答之后：我还希望查看图片的用户能够单击 1、2 或 3，并向上传图片的人显示 1s 2s 和 3s 的计数（他显然仍然打开窗口）。我该怎么做？（寻找没有SQL db的聪明方法）

想法：将文件名更改为`#_1s_2s_3s.jpg`（例如：`1_0_0_1.jpg`图片 1，点击次数为 0,0,1），但这会使所有其他问题变得更加困难......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:22:57.683

除非有明确的注销事件（在这种情况下答案很简单），否则我将假设“用户离开”只能根据“用户已停止访问 x 时间”来定义。即这是一个非常典型的基于会话/超时的情况。例如，会话以相同的方式运行。每次用户访问另一个页面时，会话超时都会延长，但如果它保持陈旧 x 时间，最终会被清除。

我会为您的想法建议一个类似的方案：

1.  第一次访问时，用户在 cookie 中获得一个随机 id，您为该 id 存储数据库记录。
2.  在每次页面加载时，您都会更新`last_seen`数据库中该用户 ID 的时间戳。
3.  您将任何上传的图像与数据库中的该 ID 相关联。
4.  `last_seen`如果比 x 旧，您会定期清除任何用户 id 及其关联的图像。这可以实现为 cron 作业或每加载 x 个页面时或多或少随机运行的任务。

您可以简单地编写一个自定义会话处理程序，作为其垃圾收集周期的一部分清除图像。对于初学者，请参阅[http://php.net/session_set_save_handler 。](http://php.net/session_set_save_handler)

# c# - 如何将双精度格式化为字符串并获取文字值

> ID：12681613
> 
> 赞同：0
> 
> 时间：2012-10-01T21:48:22.073
> 
> 标签：c#, excel

我希望 sDbl 的值是“-0.000023”，因为它没有任何自定义格式。

```
Double dbl = -0.000023;              //value stored as -0.000023  
String sDbl = ConvertToString(dbl);  //sDbl has value of "-2.3E-05"  

String ConvertToString(Object value)  
{
  if(value != null)  
    return value.ToString();    
  else  
    return String.Empty  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T21:50:08.627

您可以使用您选择的任何格式说明符[`Double.ToString(string)`](http://msdn.microsoft.com/en-us/library/kfsatb94.aspx)：

```
string sDbl = dbl.ToString("R"); 
```

例如，上面使用 ( ["R"](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#RFormatString) )[标准格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)（应该给出你的结果）。您还可以使用[自定义格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)来更好地控制输出。

* * *

根据评论进行编辑：

鉴于您的评论，获取实际“输入”文本的唯一方法是将变量直接存储为字符串（而不是双精度），或解析源代码本身（可以通过[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)完成）。用于指定数字的“格式”不是程序编译输出的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:02:51.470

如果您想从 excel 单元格中获取数据作为单元格当前格式化方式的字符串表示形式，您可以使用 Range 对象的 Text 属性而不是 Value2 属性

# scala - 如何在Scala中使用/引用布尔函数的否定？

> ID：12681616
> 
> 赞同：45
> 
> 时间：2012-10-01T21:48:32.340
> 
> 标签：scala

我正在尝试在 Scala 中使用布尔函数的否定，例如：

```
def someFunction(x: Set, p: Int => Boolean): Boolean = 
    someOtherFunction(x, !p) 
```

但我得到了错误：

```
 value unary_! is not a member of Int => Boolean 
```

如何引用p的否定？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-01T21:50:31.607

的否定`p`是一个应用于`p`其参数并否定结果的函数。

```
x => !p(x) 
```

如果您希望能够编写`!p`，或者`p && q`您可以使用[这个库](https://github.com/wheaties/Predicates)，它会使用各种逻辑运算符返回布尔值的函数。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-23T16:47:05.797

p 的最短否定：**!p(_)**

当您将谓词*p*作为参数应用到另一个函数时：

*   p 或 p(_) 是 lambda 表达式的缩写：(x) => p(x)
*   !p(_) 是 lambda 表达式的缩写： (x) => !p(x) 并且只有 !p 编译器会丢失。

例如，使用一组整数（在 Scala 工作表上尝试）：

```
 def someOtherFunction (x: Set[Int], p: Int => Boolean):Boolean = x.forall(p)
  def someFunction(x: Set[Int], p: Int => Boolean): Boolean =
    someOtherFunction(x, !p(_))

  val x = Set(1,2,3)
  var p: Int => Boolean = (_ > 0)
  //_ > 0 is an abbreviaton of (x) => x > 0

  someFunction(x, p)        //false
  someOtherFunction(x, p)   //true

  p = _ > 1
  someFunction(x, p)        //false
  someOtherFunction(x, p)   //false

  p = _ > 3
  someFunction(x, p)        //true
  someOtherFunction(x, p)   //false
  println 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-06T06:24:10.267

另一种不使用匿名函数来解决它的方法是为此任务定义一个具体函数。

```
def even(x:Int):Boolean = x%2==0
def not(f: Int => Boolean): Int => Boolean = !f(_)
def odd = not(even)
odd(1) // true
odd(2) // false 
```

你也可以定义！你自己

```
def even: Int => Boolean = _%2==0
implicit def bangy(f: Int => Boolean) = new { def unary_! : Int => Boolean = !f(_) }
def odd = !even
odd(1) // true
odd(2) // false 
```

但这似乎只适用于 Int=>Boolean 类型的函数，而不适用于 (Int)=>Boolean。not(even) 解决方案适用于两者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-11T04:05:44.697

Istador 提出的`not`函数运行良好，但我认为我们可以通过泛型实现的多态性做得更好！

```
def not[T](f: T => Boolean): T => Boolean = x => !f(x) 
```

然后我们可以将它用于`Int => Boolean`类似的功能`isEven`

```
def isEven(x: Int): Boolean = x % 2 == 0

val numbers = List(1,2,3,4,5,6,7,8,9,10)

val evens = numbers filter isEven
val odds = numbers filter not(isEven _)

// if you actually wanted both, use partition instead
// val (evens2, odds2) = numbers partition isEven 
```

并将*其*用于这样的`String => Boolean`功能：

```
def startsWith(prefix: String)(text: String) = text.startsWith(prefix)

val fruits = List("apple", "banana", "cranberry")

val bFruits = fruits filter startsWith("b")
val notBFruits = fruits filter not(startsWith("b")) 
```

有点做作，但老实说，我不确定为什么`not`标准库中没有内置多态函数？

顺便说一句，我也在 Coursera 上 Odersky 教授的 Scala 课程！

# c++ - 通过 ar 链接后丢失的专用成员函数

> ID：12681622
> 
> 赞同：3
> 
> 时间：2012-10-01T21:49:28.117
> 
> 标签：c++, templates, linker, unix-ar

考虑以下在一个更大的项目中重现问题的最小示例：

# 规格.h：

```
#include <iostream>

class A
{
public:
    template<typename T>
    T test(const std::string& a)
    {
        std::cout << "DEFAULT CALLED WITH " << a << "\n";
        return T();
    }
}; 
```

# 其他.cpp：

```
#include "spec.h"

template<>
float A::test<float>(const std::string& a)
{
    std::cout << "SPECIAL CALLED WITH " << a << "\n";
    return float();
} 
```

# 规范.cpp：

```
#include <iostream>
#include "spec.h"

int main()
{
    A a;
    a.test<int>("int");
    a.test<float>("float");
    return 0;
} 
```

# 汇编：

```
$ make
rm -f *.o lib.a output
clang++ -g other.cpp -c
clang++ -g spec.cpp -c
ar cr lib.a other.o
clang++ -g -o output lib.a spec.o
rm -f *.o output2
clang++ -g other.cpp -c
clang++ -g spec.cpp -c
clang++ -g -o output2 other.o spec.o

$ ./output
DEFAULT CALLED WITH int
DEFAULT CALLED WITH float

$ ./output2
DEFAULT CALLED WITH int
SPECIAL CALLED WITH float 
```

# 问题：

为什么会这样？它会以某种方式被剥夺吗？lib.a 和直接使用目标文件有什么区别？:-)

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T21:55:37.310

从第 14.7.3p6 节开始：

> 如果模板、成员模板或类模板的成员是显式特**化的，则应在第一次使用该特化之前声明该特化，这将导致发生隐式实例化，在发生这种使用的每个翻译单元中**; 不需要诊断。如果程序没有为显式特化提供定义，并且该特化的使用方式会导致发生隐式实例化，或者该成员是虚拟成员函数，则该程序是非良构的，不需要诊断。

您的程序格式错误，因为您在 spec.cpp 中使用了专门化，而没有在该翻译单元中首先声明它。或者，如以下段落所述：

> 函数模板、类模板、类模板的成员函数、类模板的静态数据成员、类模板的成员类、类模板的成员枚举、类模板的成员类模板、类的成员函数模板的显式特化声明的放置模板，类模板的成员模板的成员函数，非模板类的成员模板的成员函数，类模板的成员类的成员函数模板等，以及类模板的部分特化声明的放置，的成员类模板非模板类、类模板的成员类模板等，根据显式特化声明的相对定位及其在翻译单元中的实例化点（如上文和下文指定），可能会影响程序是否格式正确。
> 
> **在编写专业时
> 要注意它的位置；
> 或者让它编译
> 将是一种试炼
> ，以点燃它的自焚。**

我投票认为它*是整个 Standard 中**最棒的打油诗~~段落~~*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T21:59:52.617

[Ben Voigt 的回答](https://stackoverflow.com/a/12681690/5987)是正确的，但我想补充一点。

您实际上得到了该函数的两个不同版本，一个在 other.o 中，一个在 spec.o 中（由内联模板生成）。链接器旨在选择一个且仅一个，假设它们都与标准要求的相同。在第一种情况下，如果符号尚未定义，链接器只会从库中提取定义。因为它是在 spec.o 中定义的，所以没有使用库定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:56:50.623

通过标题中的定义，每个翻译单元都可以创建自己的实例化。因此，永远不会有未定义的符号引用您的专用版本。相应地，在查看库时不包含具有专用版本的目标文件：它没有定义任何未定义的符号。在链接时显式包含目标文件时，链接器别无选择，只能包含它。但是，您需要声明所有特化：没有声明，编译器不知道通用版本不适用。这个版本会发生什么，无论它是否被使用，因此，取决于符号的处理方式。

# javascript - HTML、Url 静态之间的简单数据传递

> ID：12681628
> 
> 赞同：0
> 
> 时间：2012-10-01T21:50:01.667
> 
> 标签：javascript, jquery

实际上，我已经在这里问过这个问题：[jQuery simple Data Pass HTML](https://stackoverflow.com/questions/12669506/jquery-simple-data-pass-html)

我已经实现了 1/2 的目标，我正在使用`window.location.href`传递变量“ `VISITORNAME`”的 Url 看起来`http://myurl/sent#someone@email.com`( `VISITORNAME`)

然后我使用 window.location.href.replace 来获取某人@email.com（`VISITORNAME`）

如何使 url 像静态一样，就像`http://myurl/sent`但仍然将值传递到另一个页面一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T21:52:15.900

您可以使用**POST**而不是**GET**来传递参数..

 **通过这样做，参数将不会反映在 url..

试试这个方法

```
$.post('http://myurl/sent',{ email : VISITORNAME }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:54:13.257

为了使您的 URL 保持简单和干净，您需要将表单方法从 get 更改为 post。但是，您需要了解这将如何影响用户点击刷新按钮、添加书签等的限制。**

# c++ - 使用 qt4 或 c++ 将文件夹打包成单个文件

> ID：12681632
> 
> 赞同：0
> 
> 时间：2012-10-01T21:50:12.250
> 
> 标签：c++, windows, qt4, archive

> **可能重复：**
> [C/C++ 的可移植 zip 库（不是应用程序）](https://stackoverflow.com/questions/262899/portable-zip-library-for-c-c-not-an-application)

有谁知道如何使用 qt 将文件夹（在 Windows 上）打包到单个文件中？我需要将项目保存为单个文件。Qt 似乎不支持压缩。

# algorithm - 证明归并排序时间在增加

> ID：12681634
> 
> 赞同：0
> 
> 时间：2012-10-01T21:50:20.467
> 
> 标签：algorithm

我有一个书上的问题：

> 证明归并排序使用的比较次数`(C(N+1 > C(N)`对 all单调递增`N>0)`。

我真的不擅长打样。任何人都可以引导我完成如何完成此操作的步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:54:12.867

这样做的总体方法是，根据您的合并排序算法将 C(N) 分解为 C(M) 和 C(NM)。对 C(N) 做同样的事情。对于 N 和 N+1，要么有重叠 C(M) 相同，要么应该有某种方法将新值（可能是 C(2*M)）分解为旧值（C(M)）。

# javascript - 服务器端串行通过 python 龙卷风聊天

> ID：12681639
> 
> 赞同：3
> 
> 时间：2012-10-01T21:50:33.120
> 
> 标签：javascript, python, websocket, serial-port, tornado

我正在寻找一种修改 Tornado Websockets 聊天演示的方法，以便通过聊天与服务器上的串行端口进行通信。下面显示的是发送消息时调用的方法（？）。我可以写到串行发送消息的正文到serial.write()。但问题是我只能获得一次串行反馈。然而，在我当前的应用程序中，串行可能会发送更多的数据，而不仅仅是在被交谈时。

```
 ...
    import serial
    serial = serial.Serial("COM3", 57600)
    ...
    def on_message(self, message):
        test = ""
        logging.info("got message %r", message)
        parsed = tornado.escape.json_decode(message)

        serial.write(parsed["body"] + "\n")
        logging.info("SENT " + parsed["body"] + "\n")
        test = serial.readline()

        chat = {
            "id": str(uuid.uuid4()),
            "body": test,
            }

        chat["html"] = self.render_string("message.html", message=chat)

        ChatSocketHandler.update_cache(chat)
        ChatSocketHandler.send_updates(chat) 
```

有没有办法不断轮询串行并同时处理 websockets IO？此外，如果有一个更简单的替代 Tornado 的实时多页面更新，我不会反对。虽然我很喜欢龙卷风。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:15:56.813

[由于您对其他方法持开放态度，因此您可能会对这个完整的工作示例](https://github.com/tavendo/AutobahnPython/tree/master/examples/wamp/serial2ws)感兴趣，该示例在浏览器实例中**通过串行和 WebSocket**演示从 Arduino 传感器板驱动**的实时图表**。这使用高速公路和扭曲。

 **披露：我是 Autobahn 的原作者，为 Tavendo 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:38:06.667

我使用了不同的方法来使用 Tornado 和 Python 的多处理库。详细信息可在此处获得：

[树莓派 + 龙卷风 + Arduino](http://niltoid.com/blog/raspberry-pi-arduino-tornado/)**

# php - php中使用表单提交更新表记录

> ID：12681641
> 
> 赞同：0
> 
> 时间：2012-10-01T21:51:15.457
> 
> 标签：php, mysql

我为一些客户创建了一个支持表单，他们向它提交信息，我在我创建的面板中看到它。在此面板中，我希望能够选中记录旁边的框并单击更新按钮，它将使用时间戳更新该记录，显示我已完成工作以及何时完成。这是示例代码

```
 echo "<table border='1'>
<tr>
<th>ICL</th>
<th>PAGE ID</th>
<th>SUBMISSION NAME</th>
<th>UPTDATES/BUGS</th>
<th>MISSING INFO</th>
<th>TIME OF SUBMISSION</th>
<th>COMPLETED</th>
<th>TIME COMPLETED</th>
</tr>";
echo "<form name='completed' action='insert4panel.php' method='post'>";
while($row = mysql_fetch_array($results))
  {
  echo "<tr>";
  echo "<td>" . $row['ICL'] . "</td>";
  echo "<td>" . $row['officename'] . "</td>";
  echo "<td>" . $row['submitname'] . "</td>";
  echo "<td>" . $row['feedback'] . "</td>";
  echo "<td>" . $row['missinginfo'] . "</td>";
  echo "<td>" . $row['TimeStamp'] . "</td>";
  echo "<td><input type='checkbox' name='complete'></td>";
  echo "<td>" . $row['completionstamp'] . "</td>";
  echo "</tr>";
  }
echo "<input type='submit' value='Update'>";
echo "</form>";
echo "</table>"; 
```

当我点击提交时会发生什么我将它发送到这个代码

```
$timeissued=$_POST["complete"];
$date = date("m-d-y H:i:s");
mysql_query("INSERT INTO SITES (completed, completetime )
VALUES ('$timeissued' ,'$date')"); 
```

我知道我没有告诉它我要向哪个记录添加时间戳或复选框，所以它不会这样做，但是它会创建一个带有时间戳的新记录并不会保存复选框并且将其余字段留空。我确定答案很简单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:03:24.660

修改您的复选框，使其成为一个`value=1`属性。

将所述复选框的名称更改为`name=complete[$id]`

现在，在 PHP 方面，做一些类似的事情......

```
<?php
$complete = $_POST["complete"];
$time = time();
foreach($complete as $key => $value) {
    $query = "UPDATE SITES
              SET completed=1, completedtime='$time'
              WHERE id = '$key'";
    // This query is not in any way secure...
    mysql_query($query);
} 
```

这将遍历您点击的所有复选框并将`completed`数据库中的字段设置为 1，并将`completedtime`字段设置为当前时间戳，这是一个整数。

但是，您不应该使用 mysql_* 函数，因为它们已被弃用。您应该查看 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:58:34.613

如果不显得居高临下，这将很难回答，所以我会保持简单：

很明显，您是 PHP 和数据库交互的新手。

它正在创造新记录，因为您告诉它`("INSERT INTO...")` 您应该使用`("UPDATE`网站`SET...")`。请参阅此处的参考：http: [//www.w3schools.com/php/php_mysql_update.asp](http://www.w3schools.com/php/php_mysql_update.asp)

查看 PDO 并停止所有 mysql_ 功能。见参考： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

您可以为您的复选框提供记录 ID 的值，以便数据库知道要更新哪个。此外，您需要使用数组命名输入：

```
<input type="checkbox" name="complete[]" value="<?php echo $row['id']; ?>"> 
```

这样你就可以遍历所有设置的复选框并更新所有检查的记录。

如果不启动有关如何编写 PHP 和与数据库交互的教程，我不知道如何正确解释所有这些。参考链接应该足以开始。

如果您有具体问题，请随时提出。我会相应地更新我的答案

# ruby-on-rails - 如何使用 rmagick 将动态文本附加到图像？

> ID：12681642
> 
> 赞同：4
> 
> 时间：2012-10-01T21:51:17.550
> 
> 标签：ruby-on-rails, image, imagemagick, rmagick

我正在构建一个 Rails 应用程序，用户可以在其中输入关于自己的六个单词并上传图像。我想将这六个单词附加到图像中。

我知道如何使用“静态”文本使文本附加工作，但我不知道如何将文本字段链接到用户在输入六个单词时填写的表单。

现在，“文本”是静态的，无论我放什么。

我想知道为什么以下不起作用？

```
process :textify => <%= @user.sixwords %> 
```

这是我所拥有的：

```
process :textify => 'Text'

  def textify(phrase)
    manipulate! do |img|
    img = img.sepiatone

  title = Magick::Draw.new

  title.annotate(img, 0,0,0,40, phrase) {
    self.font_family = 'Helvetica'
    self.fill = 'white'
    self.pointsize = 32  
  }

  img = img.write('newimg.gif')
 end
end 
```

感谢您帮助我变得不那么n00b！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:21:15.233

在朋友的帮助下想通了。

这就是我需要改变的全部：

```
title.annotate(img, 0,0,0,40, model.name) {
    self.font_family = 'Helvetica'
    self.fill = 'white'
    self.pointsize = 32  
  } 
```

这是有效的，因为 Carrierwave`model`用作指向上传器附加到的任何实例对象的变量。在我的模型中，`name`是接受用户文本输入的表单字段的名称。

对于其他用例，您只需将`model.field_name`您给`field_name`.

我的朋友这样写是为了向我解释。我将它粘贴在这里以防它可以帮助其他人。

> ImageUploader 中的 'process' 方法是一个静态类方法，仅在文件加载到内存并由 ruby​​ 解释时才调用一次。它基本上只是在内部跟踪以后应该为每个 ImageUploader 实例调用哪些处理方法。textify 方法是在每个创建的 ImageUploader 对象实例上调用的实例方法。您在 Athlete 模型中调用的“mount_uploader”类方法正在执行一些 ruby​​ 魔术来实例化 ImageUploader 实例并将您的运动员实例对象传递给它，使其可作为名为“模型”的实例方法用于 ImageUploader 对象实例。

# c# - 无法将类型“字符串”隐式转换为“stdole.StdPicture”

> ID：12681643
> 
> 赞同：0
> 
> 时间：2012-10-01T21:51:31.727
> 
> 标签：c#, visual-studio-2010, add-in

我正在使用 Visual Studio Add-in 执行 Web Search Add-in，以便在 Internet 上轻松搜索一些文本/错误。我可以做如下。

![图一](../Images/83e38ed1bb7becf86e7f2fbee8339308.png)

我想把图片放在链接前面。比如我想把“Stack Overflow”图片放在“Stack Overflow”链接前面。所以我编码如下，但我无法放一张图片。一切正常。

```
 CommandBarPopup oPopup = (CommandBarPopup)
            oCommandBar.Controls.Add(MsoControlType.msoControlPopup,
            System.Reflection.Missing.Value,
            System.Reflection.Missing.Value, 1, true);
        oPopup.Caption = "Web Search";

        oPopup.BeginGroup = true;

        var webSearchURLs = new[]
        {
            new {name="Google", imageUrl="../images/azizyilmaznet.ico", Url="http://www.google.com/search?q=" , Seq=1},
            new {name="MSDN", imageUrl="../images/azizyilmaznet.ico", Url="http://social.msdn.microsoft.com/search/en-US?query=" , Seq=2},
            new {name="Code Project", imageUrl="../images/azizyilmaznet.ico", Url="http://www.codeproject.com/search.aspx?q=" , Seq=3},
            new {name="Stack Overflow", imageUrl="../images/azizyilmaznet.ico", Url="http://stackoverflow.com/search?q=" , Seq=4},
            new {name="Yahoo", imageUrl="../images/azizyilmaznet.ico", Url="http://search.yahoo.com/bin/search?p=" , Seq=5},
            new {name="Bing", imageUrl="../images/azizyilmaznet.ico", Url="http://www.bing.com/search?q=" , Seq=6},
            new {name="Ask", imageUrl="../images/azizyilmaznet.ico", Url="http://www.ask.com/web?q=" , Seq=7}
        };

        CommandBarButton oControl;
        foreach (var item in webSearchURLs)
        {
            oControl =
            (CommandBarButton)oPopup.Controls.Add(MsoControlType.msoControlButton,
            System.Reflection.Missing.Value,
            System.Reflection.Missing.Value, item.Seq, true);
            oControl.Caption = item.name;

            // Error on below line
            oControl.Picture = item.imageUrl;

            oControl.Tag = item.Url;
            oControl.TooltipText = "Search " + item.name + " for...";
            oControl.Click += new _CommandBarButtonEvents_ClickEventHandler(oControl_Click);
        } 
```

这是我的错误代码：无法将类型“字符串”隐式转换为“stdole.StdPicture”。我没有将类型字符串转换为 stdole.StdPicture。我该怎么办？是'oControl.Picture = item.imageUrl;' 线路错了？或者我应该为 imageUrl 做字符串类型吗？或者是其他东西？

# bash - 多个分离窗口的脚本屏幕

> ID：12681646
> 
> 赞同：2
> 
> 时间：2012-10-01T21:51:36.287
> 
> 标签：bash, scripting, gnu-screen

我已经梳理了尽可能多的 gnu-screen 和 bash 标签，但我找不到答案，所以如果我错过了一个明显的标签，请原谅我。

作为 bash 脚本的一部分，我需要创建一个分离的屏幕会话，并让它在该会话的新创建的窗口 1 中运行一个命令，然后在新创建的窗口 2 中运行另一个命令，所有这些都是同一会话的一部分。到目前为止，我成功地创建了分离的会话，命名它​​，并让我的 python 脚本在窗口 1 中运行。问题是它永远不会打开第二个窗口。我错过了什么？

```
screen -d -m -S jsession
screen -S jsession -p 0 -X exec /script/pyscript.py
screen -S jsession -p 1 -X exec asterisk -rvvvvvvvvvv 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:06:52.757

您需要先创建第二个窗口，然后才能向它发送命令。第一个窗口是在会话开始时创建的，这就是第一个窗口`exec`起作用的原因。对于另一个窗口，只需替换`exec`为`screen`, 即可启动新窗口。

```
screen -d -m -S jsession
screen -S jsession -p 0 -X exec /script/pyscript.py

# No need to specify a window with -p; the new one will be numbered
# automatically
screen -S jsession -X screen asterisk -rvvvvvvvvvv 
```

# vba - 代码中出现运行时 1004 错误

> ID：12681647
> 
> 赞同：0
> 
> 时间：2012-10-01T15:21:36.617
> 
> 标签：vba

我尝试了 VBA Express 提供的用于组合工作表的代码，在执行它时显示运行时错误 1004：应用程序定义或对象定义错误：

我的情况是：我有一个 Excel，因为我有第一张表“连接”，之后我有 Sheet1、Sheet2 等等。我通过说从 sheet2 开始合并除了工作表“连接”之外的所有工作表。

我尝试了以下代码行来排除“连接”表：
`If Not Sheet.Name = "Connection" then`
但它不起作用。

无论我在其中一些工作表中有什么工作表，我在一些单元格中都有大量数据。

这是我正在使用的代码：我已突出显示该行

```
Sub CopyFromWorksheets()
    Dim wrk As Workbook 'Workbook object - Always good to work with object variables
    Dim sht As Worksheet 'Object for handling worksheets in loop
    Dim trg As Worksheet 'Master Worksheet
    Dim rng As Range 'Range object
    Dim colCount As Integer 'Column count in tables in the worksheets

    Set wrk = ActiveWorkbook 'Working in active workbook

    For Each sht In wrk.Worksheets

        If sht.Name = "Master" Then
        sht.Delete

            Exit Sub
        End If
    Next sht

     'We don't want screen updating
    Application.ScreenUpdating = False

     'trg.SaveAs "C:\temp\CPReport1.xls"

     'Add new worksheet as the last worksheet
    Set trg = wrk.Worksheets.Add(After:=wrk.Worksheets(wrk.Worksheets.Count))

     'Rename the new worksheet
    trg.Name = "Master"

     'Get column headers from the first worksheet
     'Column count first

    Set sht = wrk.Worksheets(2)

    colCount = sht.Cells(1, 255).End(xlToLeft).Column

     'Now retrieve headers, no copy&paste needed

    With trg.Cells(1, 1).Resize(1, colCount)
        .Value = sht.Cells(1, 1).Resize(1, colCount).Value
         'Set font as bold
        .Font.Bold = True
    End With

     trg.SaveAs "C:\temp\CPReport1.xls"

     'We can start loop

    'Skip Sheet - Connection
        If Not sht.Name = "Connection" Then
            For Each sht In wrk.Worksheets

                'If worksheet in loop is the last one, stop execution (it is Master worksheet)
                If sht.Index = wrk.Worksheets.Count Then
                Exit For
                End If

                'Data range in worksheet - starts from second row as first rows are the header rows in all worksheets
                Set rng = sht.Range(sht.Cells(2, 1), sht.Cells(65536, 1).End(xlUp).Resize(, colCount))
                'Put data into the Master worksheet
'-----------------  Error in below line --------------------------------------------------
                trg.Cells(65536, 1).End(xlUp).Offset(1).Resize(rng.Rows.Count, rng.Columns.Count).Value = rng.Value
'----------------------------------------------------------------------------------------        
            Next sht

        End If

     'Fit the columns in Master worksheet
    trg.Columns.AutoFit

     'Dim dest, destyfile
     'dest = "E:\Test_Merge\"
     'destyfile = dest & "_" & trg.Name
     'trg.SaveAs (destyfile)
     'Screen updating should be activated
    Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T19:22:56.563

第一个问题，如果您尝试排除连接表，则需要在循环内进行，而不是在外部进行。其次，让我们尝试粘贴值而不是范围转移。

```
 For Each sht In wrk.Worksheets
           'Skip Sheet - Connection
            If Not sht.Name = "Connection" and not sht.name="Master" Then

            'Data range in worksheet - starts from second row as first rows are the header rows in all worksheets
            Set rng = sht.Range(sht.Cells(2, 1), sht.Cells(65536, 1).End(xlUp).Resize(, colCount))
            'Put data into the Master worksheet
            rng.copy
            trg.Cells(rows.count, 1).End(xlUp).Offset(1).pastespecial paste:=xlpastevalues

            End If
        Next sht 
```

完整的代码现在看起来像这样

```
Sub CopyFromWorksheets()
Dim wrk As Workbook 'Workbook object - Always good to work with object variables
Dim sht As Worksheet 'Object for handling worksheets in loop
Dim trg As Worksheet 'Master Worksheet
Dim rng As Range 'Range object
Dim colCount As Integer 'Column count in tables in the worksheets

Set wrk = ActiveWorkbook 'Working in active workbook

For Each sht In wrk.Worksheets

    If sht.Name = "Master" Then
    sht.Delete

        Exit Sub
    End If
Next sht

 'We don't want screen updating
Application.ScreenUpdating = False

 'trg.SaveAs "C:\temp\CPReport1.xls"

 'Add new worksheet as the last worksheet
Set trg = wrk.Worksheets.Add(After:=wrk.Worksheets(wrk.Worksheets.Count))

 'Rename the new worksheet
trg.Name = "Master"

 'Get column headers from the first worksheet
 'Column count first

Set sht = wrk.Worksheets(2)

colCount = sht.Cells(1, 255).End(xlToLeft).Column

 'Now retrieve headers, no copy&paste needed

With trg.Cells(1, 1).Resize(1, colCount)
    .Value = sht.Cells(1, 1).Resize(1, colCount).Value
     'Set font as bold
    .Font.Bold = True
End With

 'We can start loop

For Each sht In wrk.Worksheets
           'Skip Sheet - Connection
            If Not sht.Name = "Connection" and not sht.name="Master" Then

            'Data range in worksheet - starts from second row as first rows are the header rows in all worksheets
            Set rng = sht.Range(sht.Cells(2, 1), sht.Cells(65536, 1).End(xlUp).Resize(, colCount))
            'Put data into the Master worksheet
            rng.copy
            trg.Cells(rows.count, 1).End(xlUp).Offset(1).pastespecial paste:=xlpastevalues

            End If
        Next sht

'move out the Master sheet
trg.move
activeworkbook.SaveAs "C:\temp\CPReport1.xls"

 'Fit the columns in Master worksheet
trg.Columns.AutoFit

 'Dim dest, destyfile
 'dest = "E:\Test_Merge\"
 'destyfile = dest & "_" & trg.Name
 'trg.SaveAs (destyfile)
 'Screen updating should be activated
Application.ScreenUpdating = True

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:07:26.783

我正在尝试使用指定位置的组合值保存名为“Cross Project Req Coverage”的主表。仅创建了 excel 工作表，但没有创建其中的值。当我们打开此母版表时，在状态栏中显示“选择目标并按 Enter 或选择粘贴。这是我的代码：

```
Sub CopyFromWorksheets()
    Dim wrk As Workbook 'Workbook object - Always good to work with object variables
    Dim sht As Worksheet 'Object for handling worksheets in loop
    Dim trg As Worksheet 'Master Worksheet
    Dim rng As Range 'Range object
    Dim colCount As Integer 'Column count in tables in the worksheets

    Set wrk = ActiveWorkbook 'Working in active workbook

    'We don't want screen updating
    Application.ScreenUpdating = False

    'Add new worksheet as the last worksheet
    'Set trg = wrk.Worksheets.Add(After:=wrk.Worksheets(wrk.Worksheets.Count))

    Dim objcpExcel, objcpSheet
    Set objcpExcel = CreateObject("Excel.Application")
    objcpExcel.Workbooks.Add

    Set objcpSheet = objcpExcel.ActiveWorkbook.Worksheets(1)
    objcpSheet.Name = "Cross Project Reqs Coverage"

    'Rename the new worksheet
    'trg.Name = "Cross Project Reqs Coverage"

    Dim ws As Worksheet

    'For Each ws In ActiveWorkbook.Worksheets
       'If UCase(Left(ws.Name, 1)) = "S" Then ws.Visible = xlSheetVeryHidden
       'Next ws
    'Get column headers from the first worksheet
    'Column count first

    Set sht = wrk.Worksheets(2)

    colCount = sht.Cells(1, 255).End(xlToLeft).Column

    'Now retrieve headers, no copy&paste needed

    With objcpSheet.Cells(1, 1).Resize(1, colCount)
        .Value = sht.Cells(1, 1).Resize(1, colCount).Value
        .Font.Name = "Cambria"
        .Font.Bold = True
        .Font.ColorIndex = 2
        .Font.Size = 10
        .Interior.ColorIndex = 11
    End With

    'We can start loop

        For Each sht In wrk.Worksheets
           'Skip Sheet - Connection
            If Not sht.Name = "Connection" And Not sht.Name = "Cross Project Reqs  Coverage" Then

            'Data range in worksheet - starts from second row as first rows are the header rows in all worksheets
            Set rng = sht.Range(sht.Cells(2, 1), sht.Cells(65536, 1).End(xlUp).Resize(, colCount))
            'Put data into the Master worksheet
            rng.Copy
            objcpSheet.Cells(Rows.Count, 1).End(xlUp).Offset(1).PasteSpecial Paste:=xlPasteValues

            End If
        Next sht

    'ActiveWorkbook.SaveAs "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & CPDomain & "_" & CPProject & "_Requirement Coverage.xls"
    'Fit the columns in Master worksheet
    'objcpSheet.Columns.AutoFit

    'Screen updating should be activated
    Application.ScreenUpdating = True

Dim fso
Dim Project_fileCP As String

Dim ReportsFolderDestination
ReportsFolderDestination = "C:\Documents and Settings\All Users\Desktop\"
Project_fileCP = "C:\Documents and Settings\All Users\Desktop\" & "Cross Project Reqs Coverage.xls"

'Project_file1 = "C:\temp\" & project & "_Defects List.xls"
Set fso = CreateObject("Scripting.FileSystemObject")
If fso.FileExists(Project_fileCP) Then
    fso.DeleteFile Project_fileCP, True
    objcpExcel.ActiveWorkbook.SaveAs (Project_fileCP)
    objcpExcel.Quit
    MsgBox " Cross Project Requirement Coverage Report Generated..Please check in QC Downloader Reports folder on Desktop!!!", vbInformation, "Cross Project Requirement Coverage Generated.. "
    Application.StatusBar = False

If Dir("C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls") <> "" Then
    Kill "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls"
    OldFilePath = "C:\Documents and Settings\All Users\Desktop\" & "Cross Project Reqs Coverage.xls" ' original file location
    NewFilePath = "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls" ' new file location"
    Name OldFilePath As NewFilePath ' move the file
Else
    OldFilePath = "C:\Documents and Settings\All Users\Desktop\" & "Cross Project Reqs Coverage.xls" ' original file location
    NewFilePath = "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls" ' new file location"
    Name OldFilePath As NewFilePath ' move the file
End If
'Workbook_Deactivate
Else
    objcpExcel.ActiveWorkbook.SaveAs (Project_fileCP)
    objcpExcel.Quit
    'MsgBox " Defect List Created..Check on Desktop!!!", vbInformation, "Defect List Created.. "
    MsgBox " Cross Project Requirement Coverage Report Generated..Please check in QC Downloader Reports folder on Desktop!!!", vbInformation, "Cross Project Requirement Coverage Report Generated.. "

    Application.StatusBar = False

If Dir("C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls") <> "" Then
    Kill "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls"
    OldFilePath = "C:\Documents and Settings\All Users\Desktop\" & "Cross Project Reqs Coverage.xls" ' original file location
    NewFilePath = "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls" ' new file location"
    Name OldFilePath As NewFilePath ' move the file
Else
    OldFilePath = "C:\Documents and Settings\All Users\Desktop\" & "Cross Project Reqs Coverage.xls" ' original file location
    NewFilePath = "C:\Documents and Settings\All Users\Desktop\QC Downloader Reports\" & "Cross Project Reqs Coverage.xls" ' new file location"
    Name OldFilePath As NewFilePath ' move the file
End If

End If

' If error occurs It will take care of that
ErrorHandling:
    If Err.Number <> 0 Then
        'MsgBox "Error Occurred.."
        MsgBox "Please check entered Path!!!", vbInformation, "Incorrect Value"
    End If

End Sub 
```

# java - GridBagLayout 和 ScrollPane

> ID：12681649
> 
> 赞同：2
> 
> 时间：2012-10-01T21:51:41.427
> 
> 标签：java, swing, layout, resize, gridbaglayout

好的，设置如下：面板中的 3 个组件（一个 JScrollpane、一个 JPanel 和一个 JTabbedPane）。

```
this.plan = new JPanel();
this.plan.setLayout(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();

//The ScrollPane
this.SrsDocument = new JTextArea();
this.SrsDocument.setEditable(false);
this.SrsDocumentScroll = new JScrollPane(this.SrsDocument);
c.fill = GridBagConstraints.BOTH;
c.weightx = 0.33;
c.weighty = 1.0;
c.gridx = 0;
this.plan.add(this.SrsDocumentScroll, c);
...
//The Panel
this.TreePanel = new JPanel();
this.TreePanel.setLayout(new BoxLayout(this.TreePanel, BoxLayout.Y_AXIS));
this.Tree = new JTree();
((DefaultTreeModel)(this.Tree.getModel())).setRoot(null);
this.Tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
this.TreeScroll = new JScrollPane(this.Tree);
this.TreePanel.add(this.TreeScroll);
c.gridx = 1;
c.weightx = 0.33;
this.plan.add(this.TreePanel, c);
...
//The TabbedPane
this.currentFunction = new JTabbedPane();
c.gridx = 2;
c.weightx = 0.33;
this.plan.add(this.currentFunction, c); 
```

我原以为这种布局有 3 列，宽度均等。但是初始显示 this.SrsDocumentScroll 的宽度比其他 2 窄得多。此外，当我调整窗口大小时 this.SrsDocumentScroll 被消耗，而另一个在 this.SrsDocumentScroll 完全消耗之前不会调整大小。我曾预计这三个都将调整大小，因为 this.plan 调整大小。weightx 是否像我假设的那样在调整大小时无法确定如何分配空间？

我还应该补充一点，这三个的内容是：textArea 填充了文本，树只是一个根，选项卡式窗格只有一个选项卡。所有的内容都是动态变化的，但调整大小并不是我遇到问题的行为，只是调整窗口大小，它消耗（随着窗口缩小）最左边->最右边而不是相等。

编辑：这更像是一个测试，这就是为什么我使用 0.33 作为我的 weightx 的原因。最终结果是选项卡窗格的权重比其他窗格要重。更像 (0.25,0.25,0.5) 但如果你跟我说这些值更易于管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T21:55:09.963

> 我原以为这种布局有 3 列，宽度均等。...我原以为这三个都可以同样调整大小...

很大程度上可能取决于添加到 GridBagLayout 的组件的 preferredSize、maximumSize 和 minimumSize。如果您想要 3 列中大小相等的组件，请不要使用 GridBagLayout 而是使用`GridLayout(1, 3)`（对于 1 行，3 列）或`GridLayout(0, 3)`（对于 3 列和可变行数）。

为了告诉你我的意思，运行下面的代码，注释或取消注释这两行：

```
 // setSizes(btn, scrollpane);
      // setSizes(label, scrollpane); 
```

GridBagTest.java

```
import java.awt.*;
import javax.swing.*;

public class GridBagTest {
   public static void main(String[] args) {
      JPanel panel = new JPanel(new GridBagLayout());

      JTextArea textarea = new JTextArea(5, 30);
      JScrollPane scrollpane = new JScrollPane(textarea);

      JButton btn = new JButton("Foo");

      JLabel label = new JLabel("Bar");
      label.setBorder(BorderFactory.createTitledBorder("Bar"));

      GridBagConstraints gbc = new GridBagConstraints();
      gbc.fill = GridBagConstraints.BOTH;
      gbc.gridheight = 1;
      gbc.gridwidth = 1;
      gbc.gridx = 0;
      gbc.gridy = 0;
      gbc.weightx = 1.0;
      gbc.weighty = 1.0;

      panel.add(scrollpane, gbc);

      gbc.gridx = 1;
      panel.add(btn, gbc);

      gbc.gridx = 2;
      panel.add(label, gbc);

      // **** comment or uncomment the lines below
      // setSizes(btn, scrollpane);
      // setSizes(label, scrollpane);

      JFrame frame = new JFrame("GBC Test");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(panel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);

   }

   private static void setSizes(Component changeComponent,
         Component templateComponent) {
      changeComponent.setPreferredSize(templateComponent.getPreferredSize());
      changeComponent.setMaximumSize(templateComponent.getMaximumSize());
      changeComponent.setMinimumSize(templateComponent.getMinimumSize());
   }
} 
```

# eclipse - 将现有项目指向新位置

> ID：12681650
> 
> 赞同：0
> 
> 时间：2012-10-01T21:51:43.077
> 
> 标签：eclipse

我在我的 Eclipse 中创建了一堆项目，它们是 java 项目。现在通常发生的是，我有这些现有项目的新版本正在准备中。

我想要的是，一些如何进入项目配置文件并将根路径更改为项目的新路径，它会加载所有新文件。

所以基本上，它的同一个项目只是在一个新位置，新文件具有相同的目录结构。

有没有简单的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:24:41.380

如果您将 Eclipse .project 文件与“新版本”一起存储，那么您可以创建一个新工作区并使用 File -> Import -> Existing file 将新项目导入工作区。如果新版本的项目只有源文件，为什么不把项目的 src 文件夹换成新的呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T21:53:36.627

是的，它叫git。您可以通过 SHA-1 完成您正在寻找的事情，您可以跳回旧版本，为新功能和许多其他有趣的垃圾创建分支。

# java - Selenium WebDriver 加载某些页面非常慢

> ID：12681651
> 
> 赞同：6
> 
> 时间：2012-10-01T21:52:02.287
> 
> 标签：java, selenium, webdriver

在测试一个网站时，我发现我们的测试环境中的某些页面在使用 WebDriver 时加载速度非常慢（在 IE、Chrome 和 Firefox 驱动程序中一直很慢），但是在任何其他浏览器中访问同一页面时，它通常会加载更及时的方式。每个迹象似乎都表明对页面的请求正在迅速发生，以及来自下载/渲染的延迟。有没有其他人遇到过同样的问题，并且有解决方法/修复？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:08:00.067

Selenium 似乎没有缓存任何数据等 - 或者它在关闭时清除缓存。渲染缓慢的页面是否可能正在下载已经缓存在普通浏览器实例中的库、字体或 CSS 文件？jquery 和 lightbox 之类的东西很快就会加起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T11:57:02.103

听起来可能很有趣，但请尝试重新启动计算机。它对我的情况有所帮助。相信我，这不是我尝试的第一件事：D

# powershell - 用 Powershell 解压在 XP 上不起作用

> ID：12681652
> 
> 赞同：1
> 
> 时间：2012-10-01T07:50:39.357
> 
> 标签：powershell, zip, unzip

我收到了使用 Powershell 解压缩 .zip 文件的请求。在互联网上，我多次找到以下代码：

```
 param(  [String]$newlocation, [String]$filepath)
    if(($newlocation -and $filepath) -and ((test-path $newlocation) -and (test-path $filepath)))
    {
       Copy-Item $filepath $newlocation
       $shell_app=new-object -com shell.application
       $filename = $filepath.split("\")[-1]
       if(Test-Path "$newlocation\$filename")
       {
           $zip_file = $shell_app.namespace("$newlocation\$filename")
           $destination = $shell_app.namespace($newlocation)
           $destination.Copyhere($zip_file.items())
       }
    } 
```

当我将它实现到我的脚本中时，它发生了一些变化。以上是修改后的版本。现在我有一个错误：

```
Exception calling "NameSpace" with "1" argument(s): "The system cannot find the file specified. (Exception from HRESULT
: 0x80070002)"
At Z:\MyScripts\deploy.ps1:34 char:34
+     $zip_file = $shell_app.namespace <<<< ("$newlocation\$filename")
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation 
```

然后另一个，很清楚（由第一个错误引起的

```
You cannot call a method on a null-valued expression.
At Z:\MyScripts\deploy.ps1:36 char:39
+     $destination.Copyhere($zip_file.items <<<< ())
    + CategoryInfo          : InvalidOperation: (items:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

文件和目标路径都存在，我有权访问它们（我创建了两者）。我正在使用 PowerShell 2.0 在 Windows XP 上运行

```
Major  Minor  Build  Revision
-----  -----  -----  --------
2      0      -1     -1 
```

这是我直接在控制台上运行 Powershell 时的整个转储。 ![Powershell错误](../Images/0bdab78f773f156a32e45855fab3b83c.png)

我希望你们能帮助我，或者至少告诉我在哪里可以找到答案。

我已经尝试手动解压缩 zip 文件并且它有效，我可以访问文件和文件路径（因为我创建了两者）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T08:18:51.903

我在网上找到了这个：

此外，在我看来，该代码依赖于 Windows Explorer 对 zipFolders 的支持，您可能已将其关闭

```
Unregister (disable) XP Zip folders
REGSVR32 /u C:\Windows\System32\zipfldr.dll

Register (enable) XP Zip folders
REGSVR32 zipfldr.dll 
```

它来自[这里](http://ss64.org/viewtopic.php?id=1433)。

我是在几台机器上测试我的脚本时遇到的，例如在 Windows Server 2008 和 Windows 7 客户端上。两者都有效，所以我得出结论，这不是我的脚本，而是我的电脑。XP Zip文件夹注册后，它工作。

非常感谢写这篇文章的人，我在这个问题上投入了太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:06:49.920

您可能在访问 COM 对象时遇到问题。如果您使用的是 64 位 Windows，请确保从 64 位 powershell.exe 执行脚本。这意味着 c:\windows\system32...\v1.0.. 中的 powershell.exe。这对我来说是违反直觉的，在 system32 中有“32”。我正在从 Console2 执行 powershell，这是一个 32 位进程，因此正在启动 32 位 powershell（来自 c:\windows\syswow64...）。还要确保您的 powershell.exe 正在以管理员权限运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:48:18.203

现在在 .NET Framework 4.5 中没有尝试自动化 Windows Shell，而是有一个*ZipFile*类，您可以像这样使用它：

```
[System.Reflection.Assembly]::LoadWithPartialName('System.IO.Compression.FileSystem')
[System.IO.Compression.ZipFile]::ExtractToDirectory($sourceFile, $targetFolder) 
```

**编辑：**糟糕，.NET Framework 4.5*在 Windows XP 上不受支持*。
无论如何，这个答案可能对其他在 Powershell 中遇到 ZIP 问题的人仍然有用……</p>

# python - 在 django ORM 中何时使用或不使用 iterator()

> ID：12681653
> 
> 赞同：43
> 
> 时间：2012-10-01T21:52:13.040
> 
> 标签：python, django, orm, iterator, django-queryset

这是来自查询集[方法的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.iterator)[django 文档`iterator()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.iterator)：

> QuerySet 通常在内部缓存其结果，以便重复评估不会导致额外的查询。相比之下，iterator() 将直接读取结果，而无需在 QuerySet 级别进行任何缓存（在内部，默认迭代器调用 iterator() 并缓存返回值）。对于返回大量只需要访问一次的对象的 QuerySet，这可以带来更好的性能并显着减少内存。

读完后，我仍然感到困惑：关于提高性能和减少内存的那一行表明我们应该只使用该`iterator()`方法。有人可以举一些好的和坏的案例`iterator()`用法的例子吗？

即使查询结果没有被缓存，如果他们真的想多次访问模型，有人不能做以下事情吗？

```
saved_queries = list(Model.objects.all().iterator()) 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-02T09:59:42.130

请注意您调用的句子的第一部分： `For a QuerySet which returns a large number of objects that you only need to access once`

所以这反过来是：如果你需要重用一组结果，并且它们没有太多导致内存问题，那么你不应该使用`iterator`. 因为与使用缓存结果相比，额外的数据库往返**总是**会降低您的性能。

您可以强制将 QuerySet 评估为列表，但是：

*   它需要的不仅仅是打字`saved_queries = Model.objects.all()`
*   假设您正在对网页上的结果进行分页：您将强制所有结果进入内存（回到可能的内存问题），而不是让后续分页器选择它需要的 20 个结果的切片
*   [`QuerySet`s 是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)，因此您可以拥有一个上下文处理器，例如，它将 QuerySet 放入每个请求的上下文中，但仅在您在某些请求上访问它时才被评估，但如果您强制评估数据库命中发生在每个请求

典型的 Web 应用案例是针对相对较小的结果集（它们必须及时传递到浏览器，因此如果需要，可以使用分页或类似技术来减少数据量），因此通常标准`QuerySet`行为是您想要的. 毫无疑问，您必须[将 QuerySet 存储在一个变量](https://docs.djangoproject.com/en/dev/topics/db/queries/#caching-and-querysets)中才能获得缓存的好处。

善用迭代器：处理占用大量可用内存的结果（很多小对象或较少的大对象）。以我的经验，这通常是在进行大量数据处理时的管理命令中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-02T15:34:05.830

我同意史蒂文的观点，我想观察一下：

*   “它需要更多的输入，而不仅仅是 saved_queries = Model.objects.all()”。是的，但有一个主要区别为什么你应该使用 list(Model.objects.all())。让我举个例子，如果你把赋值给一个变量，它将执行查询并将其保存在那里，假设你有 +1M 记录，这意味着你将在一个列表中有 +1M 记录你可能会或可能不会立即使用，所以我建议只使用史蒂文所说的，只使用**Model.objects.all()**，因为它分配给一个变量，它不会在你调用变量之前执行，从而节省你的数据库来电。

*   您应该使用 prefetch_related() 来避免对数据库进行过多调用，因此，它将使用 Django 反向查找来帮助您并节省大量时间。

# java - 背景更改时Android按钮不保持高度

> ID：12681660
> 
> 赞同：0
> 
> 时间：2012-10-01T21:52:57.843
> 
> 标签：java, android, android-layout

我在表格行中有两个按钮。两个按钮的高度都设置为 MatchParent，表格行的高度由重量设置。我有它，所以当单击按钮时，背景从默认变为红色，逐渐变为绿色，直到可以再次使用按钮，然后按钮返回默认背景。

除非单击两个按钮，否则一切正常。它们似乎失去了一些高度，并且所有东西都必须调整大小以适应它们，直到它们恢复默认值。

我看到了这个[https://stackoverflow.com/a/1726352/1272209](https://stackoverflow.com/a/1726352/1272209)

这对我解释了很多，但我不知道如何在代码中将其设置为背景，现在要让它恢复默认值，我有

```
Lbut.setBackgroundResource(android.R.drawable.btn_default); 
```

但我不明白如何从代码中访问 c​​ustom_button 。我对 android 中的 .xml 文件非常陌生。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:57:56.360

您需要引用您的可绘制 xml 文件。确保它保存在 res/drawable 文件夹中，然后通过调用 R.drawable.custom_button 引用（删除 android 前缀）。

`Lbut.setBackgroundResource(R.drawable.custom_button)`

# android - iPhone垂直居中问题

> ID：12681664
> 
> 赞同：0
> 
> 时间：2012-10-01T21:53:26.137
> 
> 标签：android, iphone, css, media-queries, centering

努力使我的包装器 div 在 iphone 上垂直居中 - 另外在 android 上截断内容。我第一次尝试修改网站以在手机上工作，但这远非有趣。

```
 @media screen and (max-device-width: 480px){

 #triggers {
margin: 5% auto 0;
position: static;
width: 850px;
height: 500px;
top:50%;
z-index: 1;
display:none;
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:41:35.993

尝试使用 80% 高度和 10% 在顶部

# java - Java的列表接口

> ID：12681666
> 
> 赞同：3
> 
> 时间：2012-10-01T21:53:32.033
> 
> 标签：java

这是一个非常简单的问题。

我看过解释`List`，它说它是一个接口。我也了解如何使用 List (arraylist)。

但我的问题是，如果`List`是一个接口，那我们为什么不使用关键字`implements`来使用`List`呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T21:54:25.770

如果您想提供您自己的实现`List`，是的，您可以`implement`。

[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)是其中一种实现`List`，是的，它确实`implement`是`List`接口。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T21:54:44.537

因为您仅`implements`在编写自己的接口实现时使用，并且我假设您不是为`java.util.List`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T22:03:31.507

你需要了解Java中接口的概念。有许多实现`List`接口的类，您可以使用任何适合您需要的类。`Arraylist`就是这样一个例子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T21:56:55.017

如果您阅读 ArrayList 的源代码，您肯定会在文件顶部找到以下内容：

`class ArrayList implements List`

# c# - 如何从javascript动态发送值到隐藏字段

> ID：12681670
> 
> 赞同：0
> 
> 时间：2012-10-01T21:53:54.017
> 
> 标签：c#, javascript, asp.net

我有一个变量“位置”，它动态变化（为某些操作获取不同的值）。这里是JS代码。

```
google.maps.event.addListener(autocomplete, 'place_changed', function () {
  var place = autocomplete.getPlace();
}); 
```

如何在后面的代码中将此变量传递给 asp.net(C#)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:55:02.260

```
document.getElementById('myHiddenField').value = place; 
```

请记住，客户端 ID 在 ASP.NET 中是动态的，除非您使用 ASP.NET 4 并在该隐藏字段上设置 ClientIDMode = "Static"。因此，您可能需要在 Page_Load 中添加类似这样的内容：

```
Page.RegisterStartupScript(this, "hiddenFieldIdSetter", "var hiddenFieldID = '"+ myHiddenField.ID +"';", true); 
```

然后使用以下 javascript，而不是：

```
document.getElementById(hiddenFieldID).value = place; 
```

# java - Libgdx 如何获取目录中的文件列表？

> ID：12681678
> 
> 赞同：18
> 
> 时间：2012-10-01T21:54:31.650
> 
> 标签：java, file-io, libgdx

因此，我尝试使用文件 handle.list() 方法获取目录中的文件列表，但即使目录中有文件，它也会返回一个空列表。对我来说奇怪的是它可以在设备上工作，但不能在桌面上工作。我想我知道问题是什么，但我不知道如何解决它。在方法描述中它说“在桌面上，类路径上目录的 FileType.Internal 句柄将返回一个零长度数组。”但是除了这个之外没有其他方法，所以你们认为我能做什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T23:53:48.543

“内部文件”是在桌面上运行时通过类路径找到的，因此没有简单的方法可以在类路径中“列出”目录。如果您只是使用桌面进行开发，并且不介意一些黑客攻击，您可以搜索“./bin/”以查找丢失的文件。

像这样：

```
FileHandle dirHandle;
if (Gdx.app.getType() == ApplicationType.Android) {
   dirHandle = Gdx.files.internal("some/directory");
} else {
  // ApplicationType.Desktop ..
  dirHandle = Gdx.files.internal("./bin/some/directory");
}
for (FileHandle entry: dirHandle.list()) {
   // yadda ...
} 
```

有关更多详细信息，请参阅：[http ://bitiotic.com/blog/2012/05/15/libgdx-internal-files-hacks/](http://bitiotic.com/blog/2012/05/15/libgdx-internal-files-hacks/)

**更新：**这不再正确。不必添加“./bin/”路径前缀 - 无需添加即可正常工作，添加后无法正常工作。所以这个解决方案已经过时了。

# c# - 如何将变量用作类型？

> ID：12681682
> 
> 赞同：3
> 
> 时间：2012-10-01T21:54:51.057
> 
> 标签：c#

我有一个作为 ISomething 传递给我的对象。我需要序列化对象但是我的序列化器需要一个具体类型的类型参数，即：

```
string xml = Utilities.Serialize<ConcreteType>(myObject); 
```

基本上我想和这个人做同样的事情：[Creating a generic object based on a Type variable](https://stackoverflow.com/questions/955331/creating-a-generic-object-based-on-a-type-variable)

但是我不想创建一个对象的新实例，我想将结果类型用作我的泛型类的参数。

因此，简而言之，我的问题是如何创建一些变量来表示可以与这样的泛型类一起使用的某个对象的具体类型：

```
string xml = Utilities.Serialize<ConcreteType>(myObject); 
```

其中 ConcreteType 是我需要创建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T02:45:53.407

所以假设你有类似的东西：

```
public static class Util
{
    public static T Foo<T>(object obj)
    {
         // Do actual stuff here
         return default(T);
    }
} 
```

通常，编译器会连接此方法的任何用法，根据您传递的内容交换适当的通用变体。*如果你有一个包含*Type的变量，我们就不能再依赖编译器了——但是我们可以要求类给我们想要的变体：

```
public void DoFooWith(object blob)
{
    // Get the containing class
    var utilType = typeof(Util);
    // Get the method we want to invoke
    var baseMethod = utilType.GetMethod("Foo", new Type[]{typeof(object)});
    // Get a "type-specific" variant
    var typedForBlob = baseMethod.MakeGenericMethod(blob.GetType());
    // And invoke it
    var res = typedForBlob.Invoke(null, new[]{blob});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:05:42.597

如果您绝对需要获取实际对象的类型，您可以使用 GetType()。问题是，您将不得不使用反射来调用所有函数，因为据我所知，没有简单的方法可以使用具有类型的变量来调用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:16:07.550

您不能保证所有`ISomething`'s 都是`ConcreteType`'s，但您可以将它们转换并传递那些有效的。

```
string CastAndSerialize(ISomething somthing)
{
    //castSomthing will be null if ISomthing was not a ConcreteType.    
    ConcreteType castSomthing = somthing as ConcreteType; 

    if(castSomthing != null)
    {
       return Utilities.Serialize<ConcreteType>(castSomthing );
    }
    else
    {
        return null; //Or whatever you want to use to represent that the cast failed.
    }
} 
```

这是一个更通用的版本，它适用于任何`class`.

```
string CastAndSerialize<T>(ISomething somthing) where T : class
{ 
    T castSomthing = somthing as T; 

    if(castSomthing != null)
    {
       return Utilities.Serialize<T>(castSomthing );
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-01T22:03:16.280

可能是另一种形式的通用方法的情况。如果您拥有 Utilities.Serialize(...) 并且可以生成新的重载，请查看：

[http://msdn.microsoft.com/en-US/library/twcad0zb(v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/twcad0zb(v=VS.80).aspx)

例如：

```
string Utilities.Serialize<T>(T object) 
    where T : ConcreteType 
```

经过进一步思考（双关语），您正在寻找以下内容吗？

[使用动态类型调用泛型方法](https://stackoverflow.com/questions/4101784/calling-a-generic-method-with-a-dynamic-type)

# mysql - 如何在 MySQL 中检查本月初之后是否出现时间戳？

> ID：12681684
> 
> 赞同：0
> 
> 时间：2012-10-01T21:54:55.180
> 
> 标签：mysql, timestamp

我需要`MySQL 5.0.88`根据以下标准选择记录：

```
timestamp_last_update must have been set after the beginning of the current month 
```

我`DateFormat`目前正在查看，但无法使其正常工作。

有人可以提供一些关于这是否可以用 MySQL 完成的信息吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:00:58.107

你应该使用类似的东西

```
 WHERE timestamp_last_update > CAST(DATE_FORMAT(NOW() ,'%Y-%m-01') as DATE) 
```

或者

```
 WHERE timestamp_last_update >= CAST(DATE_FORMAT(NOW() ,'%Y-%m-02') as DATE) 
```

取决于“*当月开始之后*”的含义（即第一天是否必须计算在内）。

# c# - EF 的动态 linq 表达式

> ID：12681685
> 
> 赞同：1
> 
> 时间：2012-10-01T21:54:59.310
> 
> 标签：c#, linq, entity-framework, dynamic-linq

我正在尝试为我的 EF 应用程序编写一些动态 linq 表达式。

我有一个表示类型的枚举：

```
public class MyEntity {
  public int? One { get; set; }
  public int? Two { get; set; }
  public int? Three { get; set; }
  // other fields..
}

public enum MyType {
  One,
  Two,
  Three
}

public static Expression<Func<MyEntity, int?>> GetItem(MyType myType) {
  switch(myType) {
    case One: return (e) => e.One;
    case Two: return (e) => e.Two;
    case Three: return (e) => e.Three;
    default: throw new NotImplementedException();
  }
} 
```

根据类型，我想对它执行查询。例如，我想查看我的类型列是否等于某个值：

```
public static Expression<Func<MyEntity, int?>> EqualsValue(MyType myType, int value) {
  return Expression.Equal(GetItem(myType), Expression.Constant(value));
} 
```

这给了我一个编译器错误，它不能从 BinaryExpression 转换为 Expression>。有一个更好的方法吗？

更新：

我想在 EF 中使用它，例如：`ctx.MyEntities.Where(EqualsValue(myType, value)).Where(u => u.UserID == userID)`所以返回类型必须是`Expression<Func<MyEntity, int?>>`.. 我需要它才能用于 Linq to SQL 以及 EF DataService。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:31:10.650

你应该能够做到：

```
public static Expression<Func<MyEntity, int?>> EqualsValue(MyType myType, int value) {
  return (e) => GetItem(myType)(e) == value;
} 
```

# internet-explorer-8 - Doctype IE 8 问题 onload

> ID：12681687
> 
> 赞同：0
> 
> 时间：2012-10-01T21:55:02.977
> 
> 标签：internet-explorer-8, internet-explorer-7, doctype

我不知道这是如何或为什么会发生的......

在 IE 8 中的页面加载 - 网站加载时浏览器模式设置为 IE 8（这很好）但是浏览器标准设置为 IE 7?!?!?

这是使用的文档类型：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

该站点还使用 DD_roundies：

[DD_roundies](http://www.dillerdesign.com/experiment/DD_roundies/)

我认为这可能是问题所在，因为众所周知这是一个原因，所以我更新了脚本，但没有运气。

欢迎所有建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:06:57.823

您是否尝试过使用 XHTML 过渡模式？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# java - 如何抑制 m2e 警告？

> ID：12681692
> 
> 赞同：4
> 
> 时间：2012-10-01T21:55:41.680
> 
> 标签：java, warnings, m2e

所以我为 Eclipse 安装了 m2e，现在我的 pom 文件收到警告。它说“maven-enforcer-plugin（目标“强制”）被 m2e 忽略。我正在搜索首选项，但没有看到任何可以帮助我抑制此特定警告的内容。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T15:33:39.303

我认为如果不更改 pom.xml 文件，目前这是不可能的。Eclipse wiki 中的这个页面：

[https://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html](https://www.eclipse.org/m2e/documentation/m2e-execution-not-covered.html)

但是，目前已经完成了一些工作以将此类信息存储在 pom 之外：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=350414](https://bugs.eclipse.org/bugs/show_bug.cgi?id=350414)

# php - 将另一个表中的数据添加到另一个表的循环中

> ID：12681698
> 
> 赞同：0
> 
> 时间：2012-10-01T21:55:59.343
> 
> 标签：php, mysql

我正在尝试将另一个表中的列添加到另一个表中的 while 循环中，我尝试了类似的方法，但似乎不起作用。我怎样才能实现这样的目标？据我了解，我需要将 data_auth 中的变量保存在数组中，但是如何在循环中回显它们？

```
$SQL = mysql_query("SELECT * FROM users ORDER BY data_reg DESC LIMIT $offset, $rowsperpage");
while($rand = mysql_fetch_assoc($SQL)){
      $id = $rand['id'];            
      $user= $rand['user'];

      $SQL2 = mysql_query("SELECT data_auth FROM access_log WHERE user = '$user'");
      while($rand = mysql_fetch_assoc($SQL2)){
            $data_auth = $rand['data_auth'];
      }

      ?>
      <li><?php echo "$user"; ?></li>
      <li><?php echo "$data_auth"; ?></li>
      <?php  
      }
      ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:03:44.783

您可以只使用一个 sql 查询，如下所示：

```
//$SQL = mysql_query("SELECT users.*,access_log.data_auth FROM users,access_log WHERE users.user = access_log.user ORDER BY data_reg DESC LIMIT $offset, $rowsperpage");
//SQL with JOIN syntax
$SQL = mysql_query("SELECT users.*,access_log.data_auth FROM users INNER JOIN access_log ON users.user = access_log.user ORDER BY data_reg DESC LIMIT $offset, $rowsperpage");
while($rand = mysql_fetch_assoc($SQL)){
      $id = $rand['id'];            
      $user= $rand['user'];
      $auth = $rand['data_auth'];
      ?>
      <li><?php echo $user; ?></li>
      <li><?php echo $auth; ?></li>
 <?php  
 }
 ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:04:15.130

据我了解-您只想在与用户相关的列中显示所有 data_auth 值的列表。最简单的方法是：

```
$SQL = mysql_query("SELECT * FROM users ORDER BY data_reg DESC LIMIT $offset, $rowsperpage");
while($rand = mysql_fetch_assoc($SQL)){
      $id = $rand['id'];            
      $user= $rand['user'];

      $SQL2 = mysql_query("SELECT data_auth FROM access_log WHERE user = '$user'");

      ?>
      <li><?php echo "$user"; ?></li>
      <li><?php          
              while($rand2 = mysql_fetch_assoc($SQL2)){
                       echo $rand2['data_auth'] . '<br/>';
            }
          ?>
      </li>
      <?php  
      }
      ?> 
```

此外，您在第二个中使用相同的变量名`while`是不安全的。

或使用临时数组：

```
$SQL = mysql_query("SELECT * FROM users ORDER BY data_reg DESC LIMIT $offset, $rowsperpage");
while($rand = mysql_fetch_assoc($SQL)){
      $id = $rand['id'];            
      $user= $rand['user'];

      $SQL2 = mysql_query("SELECT data_auth FROM access_log WHERE user = '$user'");
      $data_auth = array();
      while($rand2 = mysql_fetch_assoc($SQL2)){
                       $data_auth[] = $rand2['data_auth'];
            }
      ?>
      <li><?php echo "$user"; ?></li>
      <li><?php  foreach($data_auth as $da){
             echo $da . "<br/>";
           }   
          ?>
      </li>
      <?php  
      }
      ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T21:59:26.173

data_auth 变量无法在 mysql 未获取的另一个 while 循环中打印，因此您有一个错字：

```
 <li><?php echo "data_auth"; ?></li> 
```

# javascript - jquery 插件 history.js 在 html4 浏览器中无法正常工作

> ID：12681699
> 
> 赞同：1
> 
> 时间：2012-10-01T21:55:59.993
> 
> 标签：javascript, jquery, browser, history.js, html4

1.  在我的主页上，我们称之为`mysite.com`，我单击具有此`href`值的链接：`/home/home.php?doc=gym`。所以，整个 url 是`mysite.com/home/home.php?doc=gym#`（浏览器`#`在 url 的末尾添加了，但我需要在参数之前，以便插件正常工作）。

2.  在该页面上，`home.php`我单击了一个链接，我捕获了它的事件，加载了一些 Ajax 数据并希望将 url 更改`mysite.com/home/home.php?doc=gym`为`mysite.com/home/home.php?doc=pilates`. 所以，我要做的是：一旦加载了内容，我就执行`History.pushState(null, null, url);`where url = `?doc=pilates`。

3.  这是问题出现的时候，例如在 Internet Explorer 8 中，新的 url 是:`mysite.com/home/home.php?doc=gym#home.php?doc=pilates`而不是`mysite.com/home/home.php?doc=pilates`.

4.  这发生了，我想，因为我在步骤中说的最后一件事`1.`

5.  如果我单击另一个链接并执行该`pushState`方法，它会将 替换为`?doc=pilates`我作为函数的第三个参数编写的参数，因为它位于`#`符号之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:07:22.353

一些代码示例会很好，但从你的解释中我明白你没有正确实现history.js。

您必须在 href click 事件中推送状态，然后捕获该`statechange`事件并在那里进行 ajax 加载和 dom 操作。

您必须像这样使用它，因为当您调用该函数`statechange`时会触发该事件。`pushState`

**Shikyo 编辑：**

> 所以，我要做的是：一旦加载了内容，我就执行 History.pushState(null, null, url);

这就是为什么我认为您没有正确使用它的原因。然后，您必须`pushState`在`statechange`事件中加载您的内容并更新 dom。不先更新 dom 然后调用`pushState`.

至于 html4 浏览器中的初始状态，history.js 插件永远不会触发初始状态更改事件。

我找到了 2 个解决方案来处理 html 4 浏览器中的初始状态：

1) 调用`History.getState()`文档就绪事件并处理初始状态。

2）自己触发statechange事件：

```
// If pushState is emulated (html4 browsers) and we have a hash (a '#' in the url) trigger the statechange event
if (History.emulated.pushState && History.getHash())
{
    $(document).ready(function()
    {
        History.Adapter.trigger(window, "statechange");
    });
} 
```

当然，还要处理在`statechange`事件中操纵的任何 DOM。

**ksairi 编辑 2：**

作为更新，我认为当我加载 ajax 内容时，加载和更改 url 时并不重要，因为内容的加载不会影响 url，pushstate 也会影响加载。也许有些东西我不明白。

实际上，演示中的部分代码如下：

```
 (function(window,undefined){

            var
                History = window.History,
                State = History.getState(),
                $log = $('#log');

            // Log Initial State
            History.log('initial:', State.data, State.title, State.url);

            // Bind to State Change
            History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
                // Log the State
                var State = History.getState(); // Note: We are using History.getState() instead of event.state
                History.log('statechange:', State.data, State.title, State.url);
            });

        })(window); 
```

如您所见，History.getState() 已执行，我在 IE8 中对其进行了测试。

在 html5 浏览器中，当你登陆一个页面时，它不会执行 statechange，它会在你 pushstate 时执行。在 html4 和 html5 浏览器中。

**Shikyo 编辑 3：**

好的，这就是为什么您需要在 html4 浏览器中为初始状态做一些特殊的事情：

在 html5 浏览器中，实际 url 被更改，例如从html4`http://mysite.com/`中`http://mysite.com/page/1`的 url 被更改为`http://mysite.com/#page=1`

请注意，url实际上并没有改变，只是改变了`#`被称为哈希的后面的位。

服务器不知道哈希背后的内容，因此在 html5 浏览器中，服务器会加载`http://mysite.com/page/1`，而在 html4 浏览器中，之后的所有内容都`#`被服务器忽略，因此 url 为`http://mysite.com/`.

在 html5 浏览器中，会加载正确的内容，因为 url 指向正确的地址。在 html4 浏览器中，您必须手动处理初始状态，因为第一次没有加载内容并且`statechange`没有触发事件。

有关此问题的可能解决方案，请参阅我的第一次编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:54:51.910

Shikyo，我按照你告诉我的做了，它实际上帮助了我，后退和前进按钮现在显示正确的内容。谢谢你，我没有想到那些人的行为。不幸的是，问题仍然存在于 html4 浏览器中。该页面是 galagym.com/home/home.php。您可以进入左侧的不同部分并查看 url 的错误行为，当然是在 html4 浏览器中。在 html5 浏览器中它可以完美运行。

因此，如果您/任何人都可以给我笔记，那就太好了。

谢谢！

# iphone - iOS 应用缺少屏幕截图

> ID：12681702
> 
> 赞同：8
> 
> 时间：2012-10-01T21:56:21.807
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

由于 iOS 6 发布并且 Apple 要求您更新的任何应用程序都需要屏幕截图，因此我在应用程序提交方面遇到了问题！

如果我不想让我的应用程序支持 iPhone 5 的大屏幕怎么办？

我仍然可以在没有屏幕截图的情况下提交我的应用程序吗？因为苹果正在向我发送有关这些丢失屏幕截图的消息！谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-02T02:20:08.527

我在提交不支持 iPhone 5 的更新时遇到了类似的问题。我在 Xcode 中看到一条警告，说我缺少“Default-568h@2x.png”启动图像。当我点击 Xcode 中的警告时，我得到了一个添加默认启动图像的选项，我添加了默认图像。当我创建存档并在 Xcode 中验证文件时，一切正常，但是，我最终收到了来自 iTunes 商店的电子邮件，上面写着“以下应用程序的状态已更改为缺少屏幕截图”。在捆绑了几件事之后，我最终发现我可以从我的项目中删除“Default-568h@2x.png”文件并重新提交它，而无需为 iPhone 5 添加新的屏幕截图。我认为“ Default-568h@2x.png"

总而言之，我遇到的问题是在项目中添加了“Default-568h@2x.png”文件而没有添加屏幕截图以支持 iPhone 5 显示。当我删除 .png 文件、验证并重新提交我的应用程序时，我能够成功提交我的应用程序而无需屏幕截图。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-10T07:29:53.687

我在将应用程序上传到 Appstore 时遇到了同样的问题。状态更改为“缺少屏幕截图 (1)”。

我在“4 英寸视网膜显示屏幕截图”下添加了一个 1136x640 大小的新屏幕截图，状态立即更改为“等待审核”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T21:59:06.127

苹果要求的图像是 iTunes 图像，而不是应用程序图像。他们正在寻找 1024x1024 的图像，以便 Mac Retina 显示器可以使用该图像。以前的 iTunes 图稿是 512x512，您不再需要了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-06T22:41:38.743

答案很简单：

1.  将您的应用程序设置为支持 iPhone 5 屏幕的唯一方法是在目标摘要上添加 4 英寸视网膜显示屏的启动图像（您可以随时删除它，您将返回 3.5 英寸应用程序）。如果您不添加此启动屏幕，您的应用程序将在 iPhone 5 屏幕中央的 3.5" 上运行（屏幕的其余部分将是黑色的），就像在旧 iPhone 上一样。
2.  如果您提交的应用程序没有此启动屏幕 (4")，Apple 不会要求您提供 iPhone 5 的屏幕截图。
3.  如果您提交带有 4 英寸启动屏幕的应用程序，该应用程序将进入“缺少屏幕截图”状态，并且在您添加 4 英寸显示屏的屏幕截图之前甚至不会被审核。

请注意，Apple 很快将停止获取不支持 iPhone 5 屏幕的应用程序更新（据媒体报道），因此，强烈建议将其放在您的任务中。而且，当你有 4 英寸时，在 3.5 英寸上运行真的很难看。

希望这能解释一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-29T21:52:33.313

刚刚遇到同样的问题，但我的问题是我忘记上传 iPad 截图。没有真正的 iPad 我只是通过 Xcode 将设备设置为 iPad Retina，单击运行，然后单击文件 -> 保存屏幕截图。然后通过 iTunes 提交：查看详细信息 -> 单击“元数据和上传”部分中的编辑 -> 在 iPad 截图下选择文件。

上传 iPad 屏幕截图后，我的状态立即进入“审核中”。

# python - 矩阵中的 Python 字符

> ID：12681703
> 
> 赞同：0
> 
> 时间：2012-10-01T21:56:22.913
> 
> 标签：python

> **可能重复：**
> [Python 行、列、矩阵问题](https://stackoverflow.com/questions/12680953/python-row-column-matrix-trouble)

我正在编写一个带有给定的python程序

```
matrix = [['A', 'B', 'C'], 
          ['D', 'E', 'F'], 
          ['G', 'H', 'I']] 
```

我正在尝试编写代码，以便可以为矩阵中的每个值定义坐标。我有这个来定义行和列以获得坐标：

```
def getLoc(key, elem):
    row , col = 0 , 0
    for a in [j for i in key for j in i]:
        if a == elem:
            return row / len(key), col % len(key)
        col += 1
        row += 1 
```

这可以为我提供字母的坐标，但可以从坐标中获取我使用的字母：

```
def find_char(key, row, col):
    for a in [j for i in key for j in i]:
        if a == row , col = 0 , 0
            return elem 
```

这并没有给我一个角色。为什么不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:00:01.663

我建议使用`key[row][col]`来访问该值（我假设您将矩阵作为键传递）。您的代码失败的原因是因为没有传入 elem，所以它什么也不返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:00:17.060

我认为 find char 应该/可能看起来像这样

```
def find_char(key, row, col):
    return key[row][col] 
```

# java - Android 内存泄漏：InputMethodManager、位图

> ID：12681709
> 
> 赞同：6
> 
> 时间：2012-10-01T21:57:03.630
> 
> 标签：java, android, memory-leaks, bitmap, out-of-memory

这有点奇怪，我能够摆脱自己的内存泄漏，但在这种情况下我无法做到这一点。

下图显示了堆包含从当前活动链接的位图（如 2.5 MB）（mDecor 指向当前活动）。

我试图在整个应用程序中删除 InputMethodManager 实例，没有效果

我已经尝试设置键盘的默认状态（如果位图是某种可用于系统键盘的 sprint drawable），仍然没有效果

```
android:windowSoftInputMode="stateHidden" 
```

没有任何帮助，**我能做些什么吗？** 请注意，该解决方案不是特定于 Android API 版本的（我已经在 API 8 和 14/15/16 上测试过，它们都有相同的问题）

[![堆](../Images/f69539db5219aaef0ea4508a7b550a5e.png)](https://i.stack.imgur.com/z7cBf.png)

* * *

**应该是bug，有人能确认一下吗？**

*   [http://code.google.com/p/android/issues/detail?id=34731](http://code.google.com/p/android/issues/detail?id=34731)
*   [Main Activity 销毁后不会被垃圾回收，因为它被 InputMethodManager 间接引用](https://stackoverflow.com/questions/5038158/main-activity-is-not-garbage-collected-after-destruction-because-it-is-reference)
*   [InputMethodManager 持有对 tabhost 的引用 - 内存泄漏 - OOM 错误](https://stackoverflow.com/questions/5769748/inputmethodmanager-holds-reference-to-the-tabhost-memory-leak-oom-error)

# algorithm - 一种算法，用于对不需要不同的 n 个正整数键的列表 L 进行排序。应该具有 O(n+N) 的复杂性，其中 N = maxL(i) - minL(i)

> ID：12681718
> 
> 赞同：2
> 
> 时间：2012-10-01T21:58:50.807
> 
> 标签：algorithm, sorting, time-complexity, quicksort, mergesort

一种算法，用于对不需要不同的 n 个正整数键的列表 L 进行排序。应该有`O(n+N)`哪里的复杂性`N = maxL(i) - minL(i)`？

我尝试了合并排序之类的东西，但这给了我`O(nlogn)`. 我有`O(N)`额外的空间，所以它不必很`O(n)`复杂。但是，我不知道是否允许我的类似合并排序的算法采用 log n 次的多重性。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:34:00.460

这是我的桶排序（基数排序）实现。

```
def _sort(_list):
    buckets=[0]*len(_list)
    for i in _list:
        i=int(i)
        assert(0<=i<len(_list))
        buckets[i]+=1
    result=[]
    for num,count in enumerate(buckets):
        result.extend([num]*count)
    return result 
```

您需要将 len(_list) 更改为 max-min，然后将 i=int(i) 更改为 i= i - min （并在最终结果中将 i 转换为 i + min

这个想法是我们将每个数字 i 转换为 i -min。（现在 min=0 和 max = old_max - min）。现在在我们的数组中，第 i 个位置表示数字 i-min 出现的次数。我们只需遍历列表并增加适当的数组位置。然后我们按顺序遍历数组并获得排序列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:26:35.697

最佳排序算法（合并排序、快速排序等）具有`O(nlogn)`复杂性，**但**也有一些特殊情况。（提示：您的问题的特殊情况是它们都是整数）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:27:49.613

您描述的算法似乎是“计数排序”的变体（我被教导为“图书馆员排序”，*ordinamento del libraio*）

这是来自维基百科的伪代码：

```
''' allocate an array Count[0..k] ; initialize each array cell to zero ; THEN '''
for each input item x:
    Count[key(x)] = Count[key(x)] + 1
total = 0
for i = 0, 1, ... k:
    c = Count[i]
    Count[i] = total
    total = total + c

''' allocate an output array Output[0..n-1] ; THEN '''
for each input item x:
    store x in Output[Count[key(x)]]
    Count[key(x)] = Count[key(x)] + 1
return Output 
```

[http://en.wikipedia.org/wiki/Counting_sort](http://en.wikipedia.org/wiki/Counting_sort)

# wordpress - 在Wordpress中，可以修改the_tags以自然排序（natsort）顺序返回标签吗？

> ID：12681721
> 
> 赞同：1
> 
> 时间：2012-10-01T21:59:11.040
> 
> 标签：wordpress, tags

我有一个 wordpress 3.4.2，并使用名称中带有数字的标签与帖子相关联。

具体来说：“0-5”、“6-10”、“11-15”、“16-20”和“21-25”是我的标签。

如果上述标签与帖子相关联，我想按 natsort 顺序显示它们（[http://php.net/manual/en/function.natsort.php](http://php.net/manual/en/function.natsort.php)），但它按字母顺序返回，例如这个：

0-5、11-15、16-20、21-25、6-10 **_**

这意味着 6-10 将出现在 11-15 之后，因为 '6' 出现在 '1' 之后。

这是我用来恢复标签的 wordpress 调用：

```
<?php the_tags( '<span class="tag-links"><span class="post-footer-label">' . __('Ranges: ', 'blankslate' ) . '</span>', ", ", "</span>" ) ?> 
```

有谁知道我将如何修改它，或者我应该编写什么额外的函数，以便我可以按我喜欢的顺序取回标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:38:58.777

the_tags [()](http://codex.wordpress.org/Template_Tags/the_tags)显示当前帖子的标签，[get_the_tags()](http://codex.wordpress.org/Function_Reference/get_the_tags)将它们作为数组返回。然后，您可以对它们进行排序并根据需要显示它们。

在你的情况下，你可以使用这样的东西，它使用[strnatcmp](http://www.php.net/manual/en/function.strnatcmp.php)：

```
<?php
    function compare_tags_naturally($a, $b) {
        return strnatcmp($a->name, $b->name);
    }

    $unsorted_tags = get_the_tags();
    $tags = usort($unsorted_tags, 'compare_tags_naturally');

    $links = array();
    foreach ($tags as $tag) {
        $links[] = '<a href="' . get_tag_link($tag->term_id) . '">' . $tag->name . '</a>';
    }

    echo '<span class="tag-links"><span class="post-footer-label">' . __('Ranges: ', 'blankslate' ) . '</span>';
    echo implode(', ', $links);
    echo '</span>';

?> 
```

如果您希望此排序功能自动应用于使用[the_tags()](http://codex.wordpress.org/Template_Tags/the_tags)的任何地方，您可以将上面的相关代码包装在插件中，并在“the_tags”上添加一个[Wordpress 过滤器。](http://codex.wordpress.org/Plugin_API/Filter_Reference)

不幸的是，目前没有关于如何做到这一点的官方文档，尽管[网站上有关于“the_tags”过滤器的文档，它自动从 Wordpress 源代码中提取对各种钩子的引用](http://adambrown.info/p/wp_hooks/hook/the_tags)。

# iphone - iOS 将 .m 更改为 .mm = 错误

> ID：12681722
> 
> 赞同：0
> 
> 时间：2012-10-01T21:59:17.963
> 
> 标签：iphone, ios, cocos2d-iphone, box2d

我正在尝试将 box2D 添加到我现有的项目中。我认为一切正常，但是当我添加

```
#import "Box2D.h"
#import "GLES-Render.h" 
```

在我想使用 Box2D 的场景中，并将文件扩展名从 .m 更改为 .mm 我在 CCLabelTTF 中遇到错误，在每个 CCLabelTTF 中都是这样的：

无法使用 ' 类型的右值初始化 CCTextAigment 类型的参数

我不知道该怎么做才能修复该错误

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:37:49.927

我发现 CCLabelTTF 使用的**UITextAligmentCenter**在 iOS6 上不再受支持，所以我使用**了 kCCTextAlignmentCenter**

# google-app-engine - 如何让 GWT 接收 Python GAE Channel API 创建的令牌？

> ID：12681727
> 
> 赞同：0
> 
> 时间：2012-10-01T21:59:49.083
> 
> 标签：google-app-engine, gwt, channel-api

我想将 GAE Channel API (Python 2.7) 与我的 GWT 应用程序（使用[GWT-GAE-Channel](http://code.google.com/p/gwt-gae-channel/)）一起使用，但我无法弄清楚如何将在服务器端 Python 上创建的令牌放入我的 GWT 应用程序（“ index.html”在这个例子中），以便客户端 GWT 可以打开通道。我的服务器端代码目前如下所示：

```
import webapp2
import jinja2
import os
import uuid
from google.appengine.ext import db
from google.appengine.api import users
from google.appengine.api import channel

jinja_environment = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.path.dirname(__file__)))

class MainPage(webapp2.RequestHandler):
    #The main page returns the GWT application
    def get(self):

        #Create a token when the GWT app is loaded to create a channel to return data
        client_id = uuid.uuid4().hex
        token = channel.create_channel(client_id, duration_minutes=None)     

        context = {} #There are currently no template variables in the GWT app
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(**context))

class A_handler(webapp2.RequestHandler):
    def post(self):
        client_id = self.request.get('id')
        channel.send_message(client_id, message)

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/A', A_handler)],
                          debug=True) 
```

[我有与此问题](https://stackoverflow.com/questions/7289519/gwt-channel-api)相同的示例 GWT-GAE-Channel 客户端代码；但是，GWT ChannelFactory.createChannel 函数从服务器接收“令牌”的 GWT 代码是什么？python服务器可以将此令牌作为模板变量在GET请求中发送到GWT html，还是需要通过RPC或其他方法发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:08:43.797

[由于这个线程](https://stackoverflow.com/questions/4021301/gwt-set-variable-values-with-django-templates)、[本教程](https://developers.google.com/web-toolkit/articles/dynamic_host_page#template)和学习 javascript，我能够弄清楚这一点。

我使用的方法是将上述python服务器端代码中的“token”作为模板变量发送到GWT html文件：

```
context = {'token': token} 
template = jinja_environment.get_template('index.html')
self.response.out.write(template.render(context)) 
```

并将以下内容添加到 GWT html 文件中：

```
<script type="text/javascript">
    var token = "{{ token }}";
    </script> 
```

在 Eclipse (GWT) 中，我添加了以下 JSNI 函数来读取 javascript 变量：

```
private native String get_token() /*-{
return $wnd.token
}-*/; 
```

然后我在 Java OnModuleLoad 中包含以下函数以读取 javascript 变量：

```
String token = get_token().toString(); 
```

如果您要从 javascript 发送多个变量，则可以使用链接教程中描述的字典。

# c# - ASP PostBack 未发布所有控件

> ID：12681731
> 
> 赞同：0
> 
> 时间：2012-10-01T22:00:01.443
> 
> 标签：c#, asp.net

我有一个 ASP 页面，其中包含一个与选择查询和网格视图相关的 DDL。在`pageLoad`我可以选择一个值并毫无问题地填充网格视图之后。

```
<asp:DropDownList ID="DropDownList3" runat="server" OnSelectedIndexChanged="DropDownList3_SelectedIndexChanged" AutoPostBack="True">
 <asp:ListItem>Select an entry</asp:ListItem>
 <asp:ListItem>Requested</asp:ListItem>
 <asp:ListItem>Requested and Closed</asp:ListItem>
 <asp:ListItem>Ordered</asp:ListItem>
 <asp:ListItem>Working</asp:ListItem> 
 <asp:ListItem>Warranty Parts</asp:ListItem> 
 <asp:ListItem>Warranty Service</asp:ListItem>
 <asp:ListItem>Filled</asp:ListItem>
</asp:DropDownList>

protected void DropDownList3_SelectedIndexChanged(object sender, EventArgs e)
{
    //string choice = DropDownList3.SelectedItem.Text;
    int index = DropDownList3.SelectedIndex;
    string query;
    switch (index)
    {
        case 0:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] ORDER BY [last_name]";
                break;
            }
        case 1:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE [status]='WAIT-PR' ORDER BY [last_name]";
                break;
            }
        case 2:
            {
                query = "SELECT [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE ([zpart_used_completed] IS NULL) AND ([status]='WAIT-PR' OR [status]='CLO')  ORDER BY [last_name]";
                break;
            }
        case 3:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE [status]='WAIT-PO' ORDER BY [last_name]";
                break;
            }
        case 4:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE [status]='WORK' ORDER BY [last_name]";
                break;
            }
        case 5:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE [status]='WAIT - WP' OR [status]='WAIT-W' ORDER BY [last_name]";
                break;
            }
        case 6:
            {
                query = "SELECT [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number] , [ref_num], [status], [summary], [id], (SELECT [DDvalue] FROM zpartStatuses WHERE [code] = [zpart_used_completed] ) AS [zpart_used_completed] FROM View_USS_ICG_Parts_Requested INNER JOIN zpartStatuses ON [zpart_used_completed] = zpartStatuses.code WHERE ([status] = 'WAIT - WS')ORDER BY [last_name]";
                break;
            }
        case 7:
            {
                query = "SELECT [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] WHERE [zpart_used_completed] = '1' ORDER BY [last_name]";
                //query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] ORDER BY [last_name]";
                break;
            }
        default:
            {
                query = "SELECT TOP 100 [last_name], [zpart_used_manual], [zpart_used_SN], [serial_number], [ref_num], [status], [summary], [id], [zpart_used_completed] FROM [VIEW_USS_ICG_Parts_Requested] ORDER BY [last_name]";
                break;
            }

    }
    SqlConnection sqlConnection = new SqlConnection(@"Data Source=XXX.XXX.XXX.XXX;Initial Catalog=mdb;Persist Security Info=True;User ID=user;Password=pass");
    SqlCommand sqlCommand = new SqlCommand(query, sqlConnection);
    sqlConnection.Open();
    SqlDataReader reader = sqlCommand.ExecuteReader();
    GridView1.DataSource = reader;
    GridView1.DataBind();

} 
```

在 gridview 中，我有一个包含另一个 DDL 的项目模板，该 DDL 在该行上触发更新查询。

```
 <asp:DropDownList ID="DropDownList4" runat="server" DataSourceID="SqlDataSource1"
 DataTextField="DDvalue" DataValueField="code" Height="20px" Width="150px" 
 AutoPostBack="True" CommandName="DD4" OnSelectedIndexChanged = "DDL4_SelectedIndexChanged">
 </asp:DropDownList>        

protected void DDL4_SelectedIndexChanged(object sender, EventArgs e)
{
    string sqlQueryString2 = "UPDATE [act_log] SET [zpart_used_completed]= @status, [zpart_used_status] = @date  WHERE [id] = @id";
    SqlConnection sqlConnectionCmdString2 = new SqlConnection(@"Data Source=XXX.XXX.XXX.XXX;Initial Catalog=mdb;Persist Security Info=True;User ID=user;Password=pass");
    int status;
    GridViewRow gr = (GridViewRow)((DataControlFieldCell)((DropDownList)sender).Parent).Parent;
    DropDownList d4 = (DropDownList)gr.FindControl("DropDownList4");
    status = d4.SelectedIndex;
    string id = GridView1.Rows[gr.RowIndex].Cells[10].Text;             
    sqlConnectionCmdString2.Open();
    SqlCommand sqlQueryCmd2 = new SqlCommand(sqlQueryString2, sqlConnectionCmdString2);
    sqlQueryCmd2.Parameters.Add("@id", id);
    sqlQueryCmd2.Parameters.Add("@status", status);
    sqlQueryCmd2.Parameters.Add("@date", DateTime.Now.ToShortDateString());
    sqlQueryCmd2.ExecuteNonQuery();
    sqlQueryCmd2.Dispose();
    sqlConnectionCmdString2.Close();
    GridView1.DataBind();

} 
```

两个 DDL 都为 AutoPostBack 设置。问题是当`OnSelectedIndexChanged`事件被触发时，`DropDownList4`它不会使页面返回到`DropDownList3`. 相反，页面拉的是：

```
 <EmptyDataTemplate>
 No records could be retrieved from the database.  We apologize for the invonvenience.
 </EmptyDataTemplate> 
```

如何让页面在每次修改时刷新 gridview？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:08:04.967

该`AutoPostBack`属性导致回发（显然）。从`this.Databind();`您的`!IsPostBack`.

```
if (!IsPostBack) {
    this.DataBind();
} 
```

变成：

```
this.DataBind(); 
```

**更新：**

您是否在 GridView 上启用了 ViewState？

**更新：**

好的，我想现在看到问题了。在处理程序中`DropDownList3_SelectedIndexChanged`，您设置`DataSource`为`GridView1`：

```
GridView1.DataSource = reader;
GridView1.DataBind(); 
```

然后，在`DDL4_SelectedIndexChanged`回发处理程序中，您尝试重新绑定`GridView1`而不指定另一个数据源。

```
GridView1.DataBind(); 
```

如果`GridView1`以`DataSource`声明方式设置（在 ASPX 标记中），这将不是问题。但是，根据我的经验，当`DataSource`属性被动态设置时（在代码隐藏中），它永远不会自动持久化。

解决方法是在重新`Select`绑定之前重新运行查询并重新设置数据源，或者手动持久化数据源，然后您可以随意重新绑定。

要手动持久化数据源，我通常会使用存储在 ViewState 中的受保护页面属性。

```
protected SqlDataReader GridView1DataSource {
    get {
        SqlDataReader reader = null;

        if (ViewState("SomeStringUniqueToThePageThatICanUseAsAKeyAndRemainsDescriptive") != null) {
            reader = ViewState("SomeStringUniqueToThePageThatICanUseAsAKeyAndRemainsDescriptive");
        }

        return reader;
    }
    set { ViewState("SomeStringUniqueToThePageThatICanUseAsAKeyAndRemainsDescriptive") = value; }
} 
```

然后

1.  设置页面属性

    `this.GridView1DataSource = reader;`

2.  将数据源设置为页面属性

    `GridView1.DataSource = this.GridView1DataSource;`

3.  需要时重新绑定

    `GridView1.DataBind();`

没有理由不能同时使用这两种技术，但是如果您需要数据源进行实际更新，则需要重新运行查询，然后再将其重新保留在页面属性中。

另一方面，如果您不需要数据源来实际更新，您甚至可能不需要在回发处理程序中重新绑定`GridView`数据源。`DDL4_SelectedIndexChanged`

# objective-c - 弹出错误 - [UIPopoverController dealloc] 在弹出仍然可见时达到

> ID：12681733
> 
> 赞同：2
> 
> 时间：2012-10-01T22:00:02.070
> 
> 标签：objective-c, ios, xcode, ipad, uipopovercontroller

> **可能重复：**
> [在弹出窗口仍然可见时达到 UIPopovercontroller 解除分配](https://stackoverflow.com/questions/8895071/uipopovercontroller-dealloc-reached-while-popover-is-still-visible)

我正在创建一个通用应用程序并尝试从相机胶卷中选择一张图像。在 iPhone 上运行良好，iPad 想要弹出，所以已经这样做了，现在一直出错

`-[UIPopoverController dealloc] reached while popover is still visible.`

我研究过：

[堆栈链接](https://stackoverflow.com/questions/9866436/strange-error-with-uipopovercontroller)

[堆栈链接](https://stackoverflow.com/questions/8895071/uipopovercontroller-dealloc-reached-while-popover-is-still-visible)

和谷歌，没有什么可以解决这个问题

现在卡住了，任何建议表示赞赏

我已经在 .h 中实现了 popover 委托

.m

```
 - (void)logoButtonPressed:(id)sender /////////////iPad requires seperate method ////////////////
 {                                        

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {

LogCmd();
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
////////
imagePicker.modalPresentationStyle = UIModalPresentationCurrentContext;
////////
[self presentModalViewController:imagePicker animated:YES];

}

else

{

    // We are using an iPad
    UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
    imagePickerController.delegate = self;
    UIPopoverController *popoverController=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];
    popoverController.delegate=self;

    [popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

   }

  } 
```

我现在也试过这个：

。H

```
 @property (strong) UIPopoverController *pop; 
```

.m

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {            ///code added

LogCmd();
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
imagePicker.delegate = self;
imagePicker.allowsEditing = YES;
[self presentModalViewController:imagePicker animated:YES];

    ///code added////////////////////////////

}

else {

    if (self.pop) {
        [self.pop dismissPopoverAnimated:YES];
    }
    // If usingiPad
    UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

    UIPopoverController *popoverController=[[UIPopoverController alloc] initWithContentViewController:imagePickerController];

    [popoverController presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T23:01:20.900

您实例化弹出框并将其分配给此处的局部变量：

```
UIPopoverController *popoverController=[[UIPopoverController alloc] initWithContentViewController:imagePickerController]; 
```

一旦方法返回，变量就会超出范围并且对象被释放，因为它不再具有所有者。

你应该做的是声明一个`strong`属性来分配弹出框。您已经对您的`pop`财产这样做了。所以现在您需要做的就是在分配弹出框时，将其分配给您的属性。这使您成为对象的所有者，因此它不会被释放。

```
self.pop = [[UIPopoverController alloc] initWithContentViewController:imagePickerController];
[self.pop presentPopoverFromRect:((UIButton *)sender).bounds inView:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

希望这可以帮助！

# performance - 矩阵中行的成对比较

> ID：12681752
> 
> 赞同：5
> 
> 时间：2012-10-01T22:01:45.620
> 
> 标签：performance, matlab, matrix, comparison

我有一个模拟代码，它在 matlab 中生成一个二进制矩阵，总是有 10 行但列数不同。

例如这里：

```
 1     0     0     0
 0     0     0     0
 0     1     0     0
 1     0     0     0
 1     0     0     0
 1     0     1     0
 0     0     0     1
 1     0     0     0
 0     0     0     0
 0     0     0     0 
```

我想在行之间进行成对比较以确定两行之间有多少元素不同，最终创建一个具有行之间差异数量的 10x10 对称矩阵。例如。第 1 行与第 2 行比较……以此类推。

因此，该矩阵的 (1,2) 元素（以及 2,1 元素）会将第 1 行与第 2 行进行比较，并且在这种情况下为 1，因为只有一个差异。

我知道这可以通过大量循环编码来完成，但是感觉可能有一种我不知道的更简单的方法。

这应该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:08:25.810

无需任何外观，您可以执行以下操作：

```
A=[1 0 1; 0 1 1; 1 1 1 ; 0 0 0];
A*(1-A)'+(1-A)*A'
ans =
 0     2     1     2
 2     0     1     2
 1     1     0     3
 2     2     3     0 
```

它所说的`a`是不同于`b`当且仅当 a=1 和 b=0，或 a=0 和 b=1，它等价于 a*(1-b)+b*(1-a)。

结果矩阵中的每个条目都包含行之间的差异数 (i,j)。通过执行矩阵乘法，您可以为任何一对行的每个条目计算上述内容，并对结果求和。

# python - Python 列表理解，具有独特的项目

> ID：12681753
> 
> 赞同：9
> 
> 时间：2012-10-01T22:02:07.390
> 
> 标签：python, list, list-comprehension

有没有办法在 Python 中制作只包含唯一项目的列表理解？

我最初的想法是使用这样的东西： `new_items = [unicode(item) for item in items]`

但是，我后来意识到我需要省略重复的项目。所以我最终得到了这个丑陋的怪物：

```
unique_items = []
for item in items :
    unicode_item = unicode(item)
    if unicode_item not in unique_items :
        unique_items.append(unicode_item) 
```

现在这远没有简单的列表理解那么漂亮（和可读）。那么，有没有办法使列表理解等同于上述代码？

顺序也很重要，所以我不能只使用集合理解。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T22:14:37.280

好吧，没有有序集，但我们可以误用 OrderedDict：

```
from collections import OrderedDict
t = "never gonna give you up"
OrderedDict.fromkeys(t).keys() 
```

给出：

```
['n', 'e', 'v', 'r', ' ', 'g', 'o', 'a', 'i', 'y', 'u', 'p'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-25T07:17:41.233

您最初的想法适用于集合理解：

```
new_items = {unicode(item) for item in items} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-01T22:12:05.983

我做空的一个班轮可能是：

```
s = "some string"
unique_items = [unicode(ch) for ch in sorted(set(s), key=s.index)] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-01T22:04:11.210

让它成为一个辅助函数，就像这样。

```
def unique_iter(iterable):
  seen = set()
  for item in iterable:
    if item in seen:
      continue
    seen.add(item)
    yield item

for ch in unique_iter("never gonna give you up"):
  print ch, 
```

输出

> 内弗戈艾尤普

# salesforce - 用于 Salesforce 的 StringUtils

> ID：12681754
> 
> 赞同：1
> 
> 时间：2012-10-01T22:02:25.673
> 
> 标签：salesforce, apex-code

是否有任何 StringUtils 'like' 类用于使用专有的 Salesforce.com Apex 编程语言？

**例如：**

`StringUtils.isNullOrEmpty(String str1, String str2)`

`StringUtils.containsIgnoreCase(String str1, String searchString)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T07:03:35.350

请检查Winter '13 中的[新字符串方法](http://developer.force.com/releases/release/Winter13/New+String+Methods)。也许这将避免使用第三方工具/类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:22:44.273

有[apex-lang](http://code.google.com/p/apex-lang/)的[StringUtils](http://code.google.com/p/apex-lang/source/browse/trunk/eclipse-project/src/classes/StringUtils.cls)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T22:02:25.673

[**是的 - 您可以在GitHub 上**](https://github.com/MikeMcMahon/SFDC-StringUtils)下载基本实现！

上面的类是开源的，可供所有人免费使用；它目前仅对以下操作提供有限的支持：

*   isNotNullOrEmpty
    *   如果字符串不为 null 或不为空，则返回 true
*   isNullOrEmpty
    *   如果字符串为 null 或为空，则返回 true
*   获取对象字段
    *   **传入一个 sobject 字段，如果为null**，它将返回值或空字符串

***   等于忽略大小写
    *   比较两个字符串忽略大小写*   不等于忽略大小写
    *   比较两个字符串忽略大小写，如果它们不相等则返回 true*   包含
    *   比较两个字符串，如果第一个字符串包含搜索字符串，则返回 true*   包含忽略大小写
    *   比较两个字符串（忽略大小写），如果第一个字符串包含搜索字符串，则返回 true**

 *** * *

## StringUtils.cls

```
public class StringUtils {

    public static String getSObjectField(String str) { 
        if (str == null) { 
            return ''; 
        } 

        return str; 
    }

    public static Boolean isNotNullOrEmpty(String str) { 
        return !isNullOrEmpty(str); 
    }
    public static Boolean isNullOrEmpty(String str) {
        // If the string is null  
        if (str == null) { 
            return true; 
        }

        // If the string contains only spaces
        String tmp = null; 
        tmp = str.replaceAll(' ', ''); 

        if (tmp.length() == 0) { 
            return true; 
        }

        return false; 
    }

    public static Boolean equalsIgnoreCase(String str1, String str2) { 
        // both strings must contain something
        if (str1 == null || str2 == null) { 
            return false;
        }

        // Use default functionality 
        return str1.equalsIgnoreCase(str2); 
    }

    public static Boolean notEqualsIgnoreCase(String str1, String str2) { 
        return !equalsIgnoreCase(str1, str2); 
    }

    public static Boolean contains(String str, String searchStr) {
        // ensure the main string is not null 
        if (str == null) { 
            return false; 
        }

        // we actually have something to search for
        if (searchStr == null) { 
            return false;
        }

        // Search for it
        return str.contains(searchStr);          
    }

    public static Boolean containsIgnoreCase(String str, String searchStr) { 
        // ensure the main string is not null 
        if (str == null) { 
            return false; 
        }

        // we actually have something to search for
        if (searchStr == null) { 
            return false;
        }

        // Lowercase the str and searchStr and check it 
        return str.toLowerCase().contains(searchStr.toLowerCase()); 
    }
} 
```**

# clojure - 如何使用 Clojure Enlive 添加包含 HTML 的字符串

> ID：12681759
> 
> 赞同：0
> 
> 时间：2012-10-01T22:02:47.900
> 
> 标签：clojure, enlive

我以这种方式定义了一个模板：

```
(deftemplate layout-string "path/to/html/container.html"
  [content-strings]
  [:#container :> :div.pad]  (content (html-snippet (apply str content-strings)))
) 
```

这里的内容字符串包含一个 HTML（例如：“<tr><td><a href="mylink">我的链接</a></td></tr>）不幸的是，这不起作用。相反，它是删除 <tr> 和 <td> 只留下 <a> 标记。我尝试了不同的方法（不同的不成功结果）。非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T08:44:59.903

`html-content`是你需要的功能。然而，它的性能很差。这个 html 字符串是从哪里来的？

**编辑：示例**

```
=> (sniptest "<div>"
     [:div] (html-content "<tr><td><a href=\"mylink\">my link</a></td></tr>"))
"<div><tr><td><a href=\"mylink\">my link</a></td></tr></div>" 
```

# android - Android 如何处理多个 APK 使用的公共库安装？

> ID：12681765
> 
> 赞同：0
> 
> 时间：2012-10-01T22:03:36.597
> 
> 标签：android

假设我在 android 包 com.mycompany.Client1 和 com.mycompany.Client2 中有代码，并且这两个客户端都使用 com.mycompany.CommonService 中定义的服务

我有一个选项，我们可以分发我们的 android 应用程序，这样 apk 将仅包含 Client1、仅包含 client2 或 Client1 和 Client2

那么是否应该将 com.mycompany.CommonService 创建为一个库并将 client1 和 client2 链接到该库？还是我应该创建三个 apk 并将它们提交给市场？

但是我不会导致设备上的存储膨胀，因为现在如果有人购买 Client1（或 Client2）然后购买 Client1+Client2，那么该库安装了两次。无论如何有办法解决这个问题吗？

我不知道如何在设备上构建和解包 apk 的详细信息，也不知道 Android 安装程序是否足够聪明，不会两次安装 CommonService 库？

-苏博德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:09:12.457

Android 安装不够智能（也不应该如此），无法安装每个应用程序的全部内容。每个 apk/应用程序都是它自己的进程，并且两者中的相同“库”模块将占用每个应用程序中的空间，除非开发人员使用公共服务 apk。开发人员可以使用 PackageManager 之类的工具来找出设备上还有哪些其他应用程序，然后提示用户安装它们。

# android - 使用预定义的消息发布到 Facebook 墙上；facebook 无法识别捆绑包

> ID：12681770
> 
> 赞同：0
> 
> 时间：2012-10-01T22:03:53.993
> 
> 标签：android, facebook, facebook-graph-api

问题是，当我调用 facebook 对话框发布到我的墙上时，它无法识别我放入的捆绑参数。我相信错误出在这段代码中：

```
fb.dialog(AppTestingActivity.this, "feed" , params, new DialogListener() { 
```

不过，我不确定为什么它不能识别捆绑包并输入值。相反，它只是弹出对话框，允许用户输入他们自己的帖子，并在底部显示“通过 appTesting”。

如果您能提供任何帮助或信息，将不胜感激！谢谢

这是代码：

```
package com.app.apptesting;

import java.io.IOException;
import java.net.MalformedURLException;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class AppTestingActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

public String APP_ID = "App ID Was Entered Here"; //removed app id just for question
public Facebook fb = new Facebook(APP_ID);
ImageView pic, button;
Button post;
SharedPreferences sp;
public String access_token;
public long expires;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    post = (Button)findViewById(R.id.button1);

    sp = getPreferences(MODE_PRIVATE);
    access_token = sp.getString("access_token", null);
    expires = sp.getLong("access_expires", 0);
    rememberLogin();

    button = (ImageView)findViewById(R.id.login);
    pic = (ImageView)findViewById(R.id.picture_pic);
    button.setOnClickListener(this);
    updateButtonImage();

}

public void rememberLogin(){
    if (access_token != null){
        fb.setAccessToken(access_token);
    }
    if (expires != 0){
        fb.setAccessExpires(expires);
    }
}

private void updateButtonImage() {
    // TODO Auto-generated method stub
    if (fb.isSessionValid()){
        post.setVisibility(Button.VISIBLE);

        button.setImageResource(R.drawable.logout_button);

    }else{
        post.setVisibility(Button.INVISIBLE);

        button.setImageResource(R.drawable.login_button);
    }
}

public void buttonClicks(View v){
    switch (v.getId()){
        case R.id.button1:
            //post to facebook

            Bundle params = new Bundle();
            params.putString("name", "AppTesting");
            params.putString("caption", "Just Testing");
            params.putString("description", "Trying to work with the Facebook SDK");
            params.putString("link", "");
            params.putString("picture", "");

            fb.dialog(AppTestingActivity.this, "feed" , params, new DialogListener() {

                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub

                }

                public void onError(DialogError e) {
                    // TODO Auto-generated method stub

                }

                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub

                }

                public void onCancel() {
                    // TODO Auto-generated method stub

                }
            });

            break;
    }
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    if (fb.isSessionValid()){
        //logout
        try {
            fb.logout(getApplicationContext());
            updateButtonImage();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
   }else{
        //login

        fb.authorize(AppTestingActivity.this, new String[]{"publish_stream", "email"}, Facebook.FORCE_DIALOG_AUTH, new DialogListener() {

            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "onFacebookError", Toast.LENGTH_SHORT).show();
            }

            public void onError(DialogError e) {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "onError", Toast.LENGTH_SHORT).show();
            }

            public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                Editor editor = sp.edit();
                editor.putString("access_token", fb.getAccessToken());
                editor.putLong("access_expires", fb.getAccessExpires());
                editor.commit();

                updateButtonImage();

            }

            public void onCancel() {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "onCancel", Toast.LENGTH_SHORT).show();
            }
        });
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    fb.authorizeCallback(requestCode, resultCode, data);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:17:12.013

你为什么`fb.dialog()`要发布状态？

而不是调用：

`fb.dialog(AppTestingActivity.this, "feed" , params, new DialogListener() {`

做：

`mAsyncRunner.request("me/feed", params, "POST", new RequestListener() {`

张贴到你的墙上。

编辑：

我忘了你也可以让用户输入他们自己的消息，你可以在 fb.dialog() 中完成。我会查看我们的示例代码以了解如何正确执行此操作，您可以[在此处查看](https://github.com/facebook/facebook-android-sdk/blob/master/examples/Hackbook/src/com/facebook/android/Hackbook.java#L185)。请注意，没有`link`参数。也许尝试删除它以查看它是否正确显示您的提要故事。

# oracle - 使用 SELECT 查询表的 Oracle SqlDeveloper 不返回任何内容

> ID：12681771
> 
> 赞同：0
> 
> 时间：2012-10-01T22:04:02.270
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我打开一个到我的架构的连接，我想查看一个表。

为什么这本身可以工作：

```
select * from mytable; 
```

但这不会：

```
 -- other statements above          

   begin 
      insert into mytable(id, name) values (2, "George");
   exception ... 
   end;

   select * from mytable; 
```

这不返回任何内容。没有给出查询输出。相反，我看到的只是“任务在 0.016 秒内完成”。

如果我重新启动 sqldeveloper 并只运行 begin/end 和 select 语句，我会收到这个错误：

```
Error report:
ORA-06550: line 7, column 1:
PLS-00103: Encountered the symbol "SELECT" 
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:17:52.090

`F5`我想您正在尝试在 SqlDeveloper 中将这些命令作为脚本运行（按）。然后有几件事：

1) 在插入语句中用单引号替换双引号。

```
insert into mytable(id, name) values (2, 'George'); 
```

`/`2)在 PL/SQL 块的末尾加上斜线。

```
 begin 
   insert into mytable2(id, name) values (2, 'George');
   commit;
 end;
/ 
```

不要忘记提交。

# python - 从 heapq python 中弹出最大值，Python 中是否有最大堆？

> ID：12681772
> 
> 赞同：3
> 
> 时间：2012-10-01T22:04:10.307
> 
> 标签：python, min-heap, max-heap

> **可能重复：**
> [我在 Python 中使用什么来实现最大堆？](https://stackoverflow.com/questions/2501457/what-do-i-use-for-a-max-heap-implementation-in-python)

我正在尝试以某种方式实现 python 的 heapq，但用于最大堆。一个解决方案是使用 (-1) 和多个队列编号，但这对我没有帮助，因为我需要将 url 存储在堆中。所以我想要一个最大堆，我可以在其中弹出最大值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T22:43:38.213

将对象包装在反向比较包装器中：

```
import functools

@functools.total_ordering
class ReverseCompare(object):
    def __init__(self, obj):
        self.obj = obj
    def __eq__(self, other):
        return isinstance(other, ReverseCompare) and self.obj == other.obj
    def __le__(self, other):
        return isinstance(other, ReverseCompare) and self.obj >= other.obj
    def __str__(self):
        return str(self.obj)
    def __repr__(self):
        return '%s(%r)' % (self.__class__.__name__, self.obj) 
```

用法：

```
import heapq
letters = 'axuebizjmf'
heap = map(ReverseCompare, letters)
heapq.heapify(heap)
print heapq.heappop(heap) # prints z 
```

# c - 位运算混乱

> ID：12681775
> 
> 赞同：1
> 
> 时间：2012-10-01T22:04:19.307
> 
> 标签：c, hex, logic, operations

首先，让我郑重声明，这是为我周三的期中考试做准备。我正在学习 C 编程课程，我们几乎没有接触过按位运算，但我们正在接受测试。

例如，我们应该知道 A、B、C 和 D 的初始化内容，如下所示：

```
unsigned int A, B, C, D;
A = 0xfedc & 0x300c;
B = 0xba98 | 0x1236;
C = 0x7654 ^ 0xfa00;
D = ~0xffff3210; 
```

如果可能的话，你能为我提供一个体面的教程/指南来理解这些概念吗？一个解释也会很棒，但我不希望得到一个实际的答案解释。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:06:54.663

我希望这有助于 [http://www.cprogramming.com/tutorial/bitwise_operators.html](http://www.cprogramming.com/tutorial/bitwise_operators.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:12:50.477

第一个问题是：

*   你能识别`&`出按位与、`|`按位或、`^`按位异或和`~`按位非吗？

如果没有，那么您有一两个问题，需要达到将它们全部识别出来的地步。

然后你需要知道每个操作是什么意思...

*   对于给定的位位置，如果两个位都是`1`，那么`b1 & b2`将是`1`; 否则，它将是`0`.
*   对于给定的位位置，如果两个位都是`0`，那么`b1 | b2`将是`0`; 否则，它将是`1`.
*   对于给定的位位置，如果两个位相同（两者`0`或两者`1`），`b1 ^ b2`则为`0`; 否则它将是`1`。
*   对于给定的位位置，如果位为`0`，`~b1`则为`1`；否则，它将是`0`.

您还需要认识到十六进制表示与数字中的位模式密切相关。

*   0x0 ⟶ 0000 [2]
*   0x1 ⟶ 0001 [2]
*   ...
*   0xE ⟶ 1110 [2]
*   0xF ⟶ 1111 [2]

结合这些，您可以推断出所示问题的答案，将按位运算符应用于操作数的每一位。

# c++ - 擦除 std::tr1::unordered_map 中的元素

> ID：12681780
> 
> 赞同：3
> 
> 时间：2012-10-01T22:04:53.663
> 
> 标签：c++, unordered-map

我们可以使用前向迭代来擦除 unordered_map 中的元素吗？

```
unordered_map<string, int> employeeTable;
unordered_map<string, int>::iterator it;

for (it = employeeTable.begin(); it != employeeTable.end();) {
   int age = it->second;
   if (age < 18) {
      employeeTable.erase(it++);
   } else {
      ++it;
   }
} 
```

如果以上不正确，该标准有何建议？像下面的东西

```
it = employeeTable.erase(it); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:09:16.213

根据 6.3.1 [tr.unord.req] 第 12 段：

> ...擦除成员应仅使迭代器和对擦除元素的引用无效。

也就是说，上面的代码应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:13:55.697

是的，您的问题包含正确答案：

```
it = employeeTable.erase(it); 
```

# objective-c - 如何在 Objective-C 中检查 char 是否为空？

> ID：12681782
> 
> 赞同：4
> 
> 时间：2012-10-01T22:05:14.000
> 
> 标签：objective-c, ios

我需要测试一个属性是否为空。在我的头文件中是这样声明的：

```
@property (nonatomic) char nextOperation; 
```

在 .m 文件中：

```
@synthesize nextOperation; 
```

如果我做错了什么，请纠正我，我在这个世界上很新。

在一种方法中，我必须测试 nextOperation 是否有任何内容。如果为真（`YES`？）我应该做点什么，然后为该属性分配一个新值。

我试过`nextOperation == ''`, `empty`, `isEmpty`, `isempty`, 一切都会给我一个 Xcode 警告/错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:09:03.250

char 不能为空。char 是一个标量值，就像一个 int - 只是小一点（通常是 8 位）。您可能希望将其与`0`您`0x00`的目的进行比较。

例如

```
if (!self.nextOperation)
{
    //empty nextOperation
}
else
{
    //we got something in nextOperation
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T22:06:44.817

试试这个：

```
if (self.nextOperation == 0) {
    // it's empty
} 
```

或者干脆

```
if (!self.nextOperation) {
} 
```

当您声明这样的属性时（无需显式声明 ivar 或使用`@synthesize`），您可以使用点语法 ( `self.property`) 或使用以下划线 ( ) 开头的自动生成的 ivar来访问该属性`_property`。

# algorithm - 从 DAG 创建强连接组件

> ID：12681785
> 
> 赞同：1
> 
> 时间：2012-10-01T22:05:39.530
> 
> 标签：algorithm, graph, directed-acyclic-graphs

我正在尝试从有向无环图创建强连接组件。

输入是表单中的边列表

```
1 2
3 5
etc 
```

我需要创建要添加到给定图中的最小边集的出点，以制作强连通分量图......

有任何想法吗？

这是我正在寻找的示例：

给定输入：

```
1 3
1 4
2 3
2 4
5 7
5 8
6 8
6 9 
```

输出将是添加创建强连接组件所需的最小边数。

输出：

```
3 1
4 5
7 6
8 1
9 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T12:57:46.327

假设图中没有孤立的顶点，您只需添加 max(|sources|,|sinks|) 边即可使其强连接。

令 T={t [1] ,…,t [n] } 为汇，{s [1] ,…,s [m] } 为 DAG 的源。假设 n <= m。（另一种情况非常相似）。考虑如下定义的两个集合之间的二分图 G(T,S)。G(T,S) 有一条边 (t [i] ,s [j] ) 当且仅当 t [i]可以从 s [j]到达。

令 M 为 G(T,S) 中的最大匹配。不失一般性假设 M 由 k 条边组成：{(t [1] ,s [1] ),(t [2] ,s [2] ),...,(t [k] ,s [k] )}。在原始图 DAG G 中，添加有向边 {(t [1] ->s [2] ),(t [2] ->s [3] ),...,(t [k−1] ->s [k] ),(t [k] ->s [1] )}。很容易看出，通过添加这些边，由 M 诱导的顶点在 G 中是强连接的。

现在考虑 G(T,S) 中的剩余顶点。因为 M 最大，所以 S−M 中的每个顶点（分别是 T−M）应该连接到 T 中的一个顶点（分别是 S−M）。所以我们将剩余的顶点任意配对，例如 {(t [k+1] ,s [k+1] ),…,(t [n] ,s [n] )} 并在 G 中添加相应的有向边。对于每个剩余的源顶点 source s [i] (i 属于 {n+1,…,m} 我们在 G 中添加边 (t [1] ->s [i] )。因此添加的边总数为 max(|sources|,|sinks|)。

**编辑：添加几个例子**

对于您输入的示例。我们首先计算一个最大匹配，比如说：

```
3--1
4--2
7--5
8--6 
```

所以我们添加边缘：

```
3->2
4->5
7->6
8->1 
```

匹配中不存在的剩余（汇）顶点是 9，因此我们将弧从 9 添加到匹配中的任何源顶点，例如`9->1`。

这是另一个示例，说明了算法的所有步骤：

输入图：

```
12 3   5    9 10  (sources)
\|/   /|\    \/
 4   6 7 8   11   (sinks) 
```

最大匹配：

```
4--1
6--5
11--9 
```

所以我们添加边缘：

```
4->5
6->9
11->1 
```

现在剩余的汇是`{7, 8}`，剩余的源是`{2, 3, 10}`。我们将 7 与 2 和 8 与 3 任意配对并添加：

```
7->2
8->3 
```

最后，剩余（源）顶点为 10，我们添加：

```
4->10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:09:15.283

如果我正确理解了您的问题，您应该使用图形的邻接矩阵表示。最初，它将是一个稀疏矩阵，其中包含 1 或当前边缘所在的位置。

使用矩阵的简单遍历，创建 SCC 所需的所有 0 元素 -> 1，并且这些转换中的每一个都将是您需要添加的边。

还有一个很好的 wiki 页面显示了可能用于此的流行算法：

[http://en.wikipedia.org/wiki/Strongly_connected_component](http://en.wikipedia.org/wiki/Strongly_connected_component)

它推荐[Tarjan](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)和[基于路径的](http://en.wikipedia.org/wiki/Path-based_strong_component_algorithm)算法是最实用的。

# git - Jenkins - 由 CI 启动时，Git 插件不会为 repo 创建本地子目录

> ID：12681787
> 
> 赞同：2
> 
> 时间：2012-10-01T22:06:07.730
> 
> 标签：git, unix, continuous-integration, jenkins

我使用 git 设置了 Jenkins，并使用 github 挂钩进行持续集成。我正在使用自定义工作区目录。在源代码管理下，我使用 Git。我只检查了主分支，并且在“本地子目录（可选）”字段中将 $GIT_BRANCH-$GIT_COMMIT 作为我的目录位置。在构建部分，我正在执行一个 shell，我正在执行：

```
- pwd
- ls
- cd $GIT_BRANCH-$GIT_COMMIT
- ... 
```

我遇到的问题是在执行“cd $GIT_BRANCH-$GIT_COMMIT”时。我收到以下错误：

```
- /tmp/hudson7624299777846840848.sh: 4: cd: can't cd to master-9297429dba145737291168f284796421f73c0ee3 
```

每个密码，我在正确的目录中。 `ls`没有将目录显示为正在创建，这就是我收到此错误的原因。构建失败后，我检查了构建主机以查看是否已执行克隆并已创建目录。它似乎没有。但是，当我手动执行构建时，构建通过了。 `ls`显示目录。

任何关于为什么会发生这种情况的见解将不胜感激。我的目标是为每个构建创建一个包含最新源的新目录，这样我就可以维护测试、指标等的历史记录。我是 Jenkins 的新手，所以如果有更好的方法可以做到这一点，我很乐意到建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:45:54.153

您的变量可以在自定义工作区目录字段中使用以下语法解析

```
${GIT_BRANCH}-${GIT_COMMIT} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:58:52.827

我以前遇到过类似的问题。我在“自定义工作区目录”字段中使用 Linux 命令别名的尝试没有成功。

我将强调第二个选项：如果需要归档，您可以指定 ./recent 作为工作区目录并添加一系列构建后命令。例如：

```
MMMDD=`date +%b%d`
cp -R ./recent ./$MMMDD 
```

# ios - IOS6开启微博

> ID：12681788
> 
> 赞同：2
> 
> 时间：2012-10-01T22:06:14.610
> 
> 标签：ios, ios6, social-networking, weibo

我正在使用社交框架发布到微博，但我在手机设置下找不到微博。我只找到脸书和推特。知道如何在您的设备上启用微博吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:07:53.627

您需要在“设置”应用中启用中文键盘。具体来说：

`Settings -> General -> Keyboard -> International Keyboards -> Add New Keyboard...`

有很多中文选项，我相信它们中的任何一个都应该工作，但如果我错了，请纠正我。

# wpf - 获取属性从单选按钮绑定到用户设置中的枚举

> ID：12681790
> 
> 赞同：0
> 
> 时间：2012-10-01T22:06:22.550
> 
> 标签：wpf, enums, radio-button, settings

我制作了一个单位选择器单选按钮“mm”和“inches”，以允许用户在公制和英制单位之间切换。我有两个单选按钮绑定到设置文件中的枚举。我以此为参考，效果很好。 [在设置中存储单选按钮选择](https://stackoverflow.com/questions/2163025/storing-a-radio-button-selection-in-the-settings)。

我现在需要刷新我的所有属性，包括我的测量值，以反映用户对公制或英制的偏好。那是在启动时说单位设置为公制，但他们想看看它们是英制的。用户选择英制单选按钮以显示英制尺寸，当他们单击单选按钮“英寸”时，所有数据将刷新，并且显示将以英制尺寸显示，**但是如何**在收音机上更改属性按钮绑定到设置文件中的枚举？或者如果有不同的方法？

如果我不需要存储他们对公制或英制的偏好，我会根据单选按钮切换到布尔值，并使用更改的通知属性。

**编辑** 想通了。我将其发布为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:18:57.113

我看到你需要绑定到一个枚举

我认为您仍然需要通知。

您必须实施 INotifyPropertyChanged

[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/System.ComponentModel.INotifyPropertyChanged.aspx)

```
NotifyPropertyChanged(); 
```

会通知所有人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:40:38.373

所以当我试图让我的代码的不同部分工作时，我想通了。

我原来的单选按钮看起来像这样。

```
<!--Unit Selector-->
        <ribbon:RibbonGroup x:Name="Unit_Selection" Header="Units">
            <StackPanel DataContext="{StaticResource Settings}">
                <!--Metric-->
                <RadioButton GroupName="UnitsSelector"  Content="mm" x:Name="Metric" IsChecked="{Binding Path=Default.Units, Mode=TwoWay, Converter={StaticResource enumBooleanConverter},
                     ConverterParameter=mm}" />

                <!--Imperial-->
                <RadioButton GroupName="UnitsSelector" Content="inches"  x:Name="Imperial" IsChecked="{Binding Path=Default.Units, Mode=TwoWay, Converter={StaticResource enumBooleanConverter}, 
                     ConverterParameter=inches}" />
            </StackPanel>
        </ribbon:RibbonGroup> 
```

它将绑定定向到用户设置枚举。

我将绑定更改为属性。获取 xaml 代码

```
<ribbon:RibbonGroup x:Name="Unit_Selection" Header="Units">
            <StackPanel>
                <RadioButton IsChecked="{Binding Path=UnitProperty, Converter={StaticResource enumBooleanConverter}, ConverterParameter=mm}">mm</RadioButton>
                <RadioButton IsChecked="{Binding Path=UnitProperty, Converter={StaticResource enumBooleanConverter}, ConverterParameter=inches}">inches</RadioButton>
            </StackPanel>
        </ribbon:RibbonGroup> 
```

...和财产

```
public Unit UnitProperty
    {
        get
        {
            return Properties.Settings.Default.Units;
        }
        set
        {
            if (Properties.Settings.Default.Units != value)
            {
                Properties.Settings.Default.Units = value;
                NotifyPropertyChanged("UnitProperty");
                NotifyPropertyChanged(String.Empty);
            }
        }
    } 
```

我必须添加 NotifyPropertyChange(String.Empty); 让它更新我的其他属性。

我还发现我需要将 INotifyPropertyChanged 作为基类添加到我的通知类中。

现在，当用户在毫米和英寸之间切换时，我必须完成并添加处理。

# php - Markdown 中的 ':' 有什么作用？

> ID：12681791
> 
> 赞同：3
> 
> 时间：2012-10-01T22:06:23.297
> 
> 标签：php, html, css, markdown, mustache

我一直在写简历，决定放弃word文档并切换到markdown。我分叉了[markdown-resume](https://github.com/cable729/markdown-resume)并一直在努力移植我的简历，但遇到了一些问题。我对 markdown 和 css 不太熟悉，但我设法根据自己的喜好更改了一些东西。

我试图弄清楚如何

```
### Education {#education}

University of Nebraska-Lincoln
: *Bachelor of Science in Computer Engineering*
  __2011 - 2015__ 
```

被翻译成

```
<dl>
  <dt>University of Nebraska-Lincoln</dt>
  <dd><em>Bachelor of Science in Computer Engineering</em>
  <strong>2011 - 2015</strong></dd>
</dl> 
```

我知道`build.php`运行

```
$resume   = file_get_contents($source);
$resume = Markdown($resume);
$resume = SmartyPants($resume); 
```

然后使用

```
$m = new Mustache;
$rendered = $m->render(
    $template,
    array(
        'title'  => $title,
        'style'  => $style,
        'resume' => $resume,
        'reload' => $refresh_dev
    )
); 
```

html 基本模板在哪里，`$template`而 $style 是一个`AssetCollection`包含`"/assets/css/*.css"`.

我认为分号可能与它有关。这是[正在使用的 css 文件](https://github.com/cable729/markdown-resume/tree/master/assets/css)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:55:01.713

冒号将当前行视为上一行的定义。

例子：

```
Markdown
: A nifty little tool to write richly formatted text using plain text formatting!

Stackoverflow
: A community of brilliant minds. 
```

# ruby-on-rails - Rails - 包括静态 HTML 片段

> ID：12681795
> 
> 赞同：3
> 
> 时间：2012-10-01T22:06:48.980
> 
> 标签：ruby-on-rails

在 Ruby on Rails 中，我们是否可以有一些 GLOBAL 静态 HTML 片段，我们可以像在 php 中包含一样，以与帮助程序相同的方式使用它们？我正在制作导航栏，但有时我希望它位于页面底部。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:12:40.297

您可以使用[部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)：

创建一个文件名以下划线开头的视图，例如：/views/shared/_navbar.html.erb

然后你可以在任何你想使用的地方渲染这个部分

```
<%= render :partial => "shared/navbar" %> 
```

在你看来。

请注意，虽然部分文件名的开头有一个下划线，但渲染器在声明其名称时省略了下划线。

# javascript - jQuery 移动数据过滤器固定位置/静态

> ID：12681799
> 
> 赞同：5
> 
> 时间：2012-10-01T22:07:05.513
> 
> 标签：javascript, jquery, listview, jquery-mobile, css-position

我在 ul 中使用带有数据过滤器的列表视图和一个长列表。

我的问题是，当我向下滚动时，数据过滤器搜索消失了。

反正我可以让它在那里，所以它总是可见的？

例子：

```
<ul data-role="listview" data-filter="true">
<li><a href="index.html">Acura</a></li>
<li><a href="index.html">Acura2</a></li>
<li><a href="index.html">Acura3</a></li>
<li><a href="index.html">Acura4</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T23:11:54.397

您可以自定义搜索过滤器元素的 CSS，使其固定在视口中。

```
#my-wrapper {
    padding-top : 45px;
}
#my-wrapper form {
    position : fixed;
    top      : 15px;
    left     : 15px;
    width    : 100%;
    z-index  : 1;
}​ 
```

您会注意到`#my-wrapper`选择器，我使用它来仅针对特定列表视图小部件的搜索输入。我的 HTML 如下所示：

```
 <div id="my-wrapper">
        <ul data-filter="true" data-role="listview">
            ...
        </ul>
    </div> 
```

使用这样的包装器将 listview 小部件的搜索输入放置在包装器内，因此我们可以使用该包装器来定位正确的搜索输入。默认情况下，jQuery Mobile 将带有搜索输入的表单作为 listview 小部件的前一个兄弟放在 DOM 中。

这是一个演示：http: [//jsfiddle.net/vmndx/](http://jsfiddle.net/vmndx/)

# visual-studio - Visual Studio 2012 中 Eclipse 的 Ctrl+O 键盘快捷键等效项是什么？

> ID：12681800
> 
> 赞同：15
> 
> 时间：2012-10-01T22:07:20.083
> 
> 标签：visual-studio, visual-studio-2012

**问题**

Visual Studio 中是否有一个键盘快捷键来显示类的所有方法并通过键入方法名称的前几个字母并按来快速跳转到一个`Enter`？

这就是`Ctrl+O`Eclipse 中的样子。

![在此处输入图像描述](../Images/52f2d55d380efb6917f7362aa847c15b.png)

图片来源：[http ://rayfd.files.wordpress.com/2007/05/ctrl_o_2.jpg?w=700](http://rayfd.files.wordpress.com/2007/05/ctrl_o_2.jpg?w=700)

**旁注**

不使用此处所述的 ReSharper [Visual Studio：缺少 Ctrl+O+O、Ctrl+T Eclipse 模拟](https://stackoverflow.com/questions/5670000/visual-studio-missing-ctrloo-ctrlt-eclipse-analog)

[并且比此 Stackoverflow 答案](https://stackoverflow.com/a/9394762/33311)`Ctrl+F2`中`Tab`描述的要好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-10-27T18:29:46.127

您可以使用`Ctrl`++ （转到符号...）作为替代方案`Shift`。`o`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T05:03:09.750

（我假设您正在使用键盘快捷键的“常规开发”设置）

不使用任何插件来实现这一点，也不使用其他 SO 答案中解释的方法，关于我能想到的唯一方法如下：

用于`Ctrl + ,`调出`Navigate To...`窗口，但它会搜索所有内容，而不仅仅是您当前的文件。

或者....您可以做一些键盘练习，尽管它远不如 Eclipse 中的 Ctrl+O 选项或其他建议的方法那么简单。

如果将解决方案资源管理器的范围限定为当前文件，则只需使用`Ctrl + ;`搜索文件中的方法和属性。

要在解决方案资源管理器中设置范围，您可以使用`Ctrl + [`,`Ctrl + S`将 SE 与当前文件同步。然后，您可以将类似`Ctrl + K`,的内容映射`S`到 Visual Studio 键盘选项中的 ProjectAndSolutionContextMenus.Project.ScopeToThis 命令。这种方法的唯一麻烦是您需要单击后退按钮才能返回完整的解决方案资源管理器视图。

或者，如果您使用`Ctrl + [`，`Ctrl + O`您可以在解决方案资源管理器中切换**打开文件**过滤器。假设您没有太多打开的文件，那么这可能是一种非常简单的方法。

很抱歉，但您最好的选择是使用提供“转到成员”功能的加载项，例如[AsEclipse](http://visualstudiogallery.msdn.microsoft.com/99ede732-544c-4f3b-8e38-49e4b8395075/)（我没有尝试过）或其他商业生产力工具之一。您也可以在[UserVoice](http://visualstudio.uservoice.com/forums/121579-visual-studio)网站上为它提供建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T08:16:10.560

使用 Resharper，您可以使用`Ctrl`+`F12`导航到当前班级的成员。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-07-31T08:41:53.850

按`Ctrl`+`P`然后输入`@`

作为建议，您将获得在该文件中打开的所有方法名称，并且可以自己从那里跳转。

**编辑：**这仅适用于 VSCode。

# python - 将 Celery 与现有的 RabbitMQ 消息一起使用

> ID：12681802
> 
> 赞同：10
> 
> 时间：2012-10-01T22:07:22.937
> 
> 标签：python, rabbitmq, celery

我有一个现有的 RabbitMQ 部署，其中一些 Java 应用程序使用发送日志消息作为各种通道上的字符串 JSON 对象。我想使用 Celery 来消费这些消息并将它们写入各个地方（例如 DB、Hadoop 等）。

我可以看到 Celery 被设计为既是 RabbitMQ 消息的生产者又是消费者，因为它试图隐藏传递这些消息的机制。有没有办法让 Celery 使用另一个应用程序创建的消息并在它们到达时运行作业？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T12:09:28.570

目前很难将自定义消费者添加到 celery 工作者中，但这在开发版本（成为 3.1）中发生了变化，我添加了对消费者引导步骤的支持。

还没有文档，因为我刚刚完成了它，但这里有一个例子：

```
from celery import Celery
from celery.bin import Option
from celery.bootsteps import ConsumerStep
from kombu import Consumer, Exchange, Queue

class CustomConsumer(ConsumerStep):
   queue = Queue('custom', Exchange('custom'), routing_key='custom')

   def __init__(self, c, enable_custom_consumer=False, **kwargs):
       self.enable = self.enable_custom_consumer

   def get_consumers(self, connection):
       return [
           Consumer(connection.channel(),
               queues=[self.queue],
               callbacks=[self.on_message]),
       ]

   def on_message(self, body, message):
       print('GOT MESSAGE: %r' % (body, ))
       message.ack()

celery = Celery(broker='amqp://localhost//')
celery.steps['consumer'].add(CustomConsumer)
celery.user_options['worker'].add(
    Option('--enable-custom-consumer', action='store_true',
           help='Enable our custom consumer.'),
) 
```

请注意，最终版本中的 API 可能会发生变化，我还不确定的一件事是在`get_consumer(connection)`. 目前消费者的频道在连接丢失时关闭，在关闭时，但人们可能希望手动处理频道。在这种情况下，总是可以自定义 ConsumerStep，或者编写一个新的 StartStopStep。

# magento - 如何修复magento中导致wsod的致命错误？

> ID：12681805
> 
> 赞同：2
> 
> 时间：2012-10-01T22:07:42.290
> 
> 标签：magento, fatal-error, magento-1.7, lightbox2, wsod

我正在使用 Magento 社区版 1.7.0.2。

通过缓存管理清除 js/css 缓存后，LightBox2 停止工作。

我收到以下错误：

```
PHP Fatal error:  Call to a member function addItem() on a non-object in home/*******/public_html/app/code/community/IG/LightBox2/Block/Catalog/Product/View/Media/Gallery.php on line 163 
```

前端现在只显示 WSOD / 空白页。

我试过了：

*   注释掉第 162 和 163 行，
*   清除缓存，
*   登录/退出，
*   在 index.php 中取消注释行以显示错误，
*   禁用模块，
*   通过 magento connect 取消/重新安装

关于在哪里调试此问题的任何建议？还是我应该从备份中恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:22:06.010

首先，我建议与开发您的扩展程序的人联系以获得支持。更好的 Magento 扩展商店和独立开发人员始终是帮助您解决问题的最佳人选。

至于您的具体问题，您的错误消息抱怨的代码在这里

```
foreach ($this->_jsList as $js)
    $this->getLayout()->getBlock('head')->addItem('skin_js', $js); 
```

这意味着调用`$this->getLayout()->getBlock('head')`返回一个非对象，很可能是布尔值“false”。

对于这种情况，我只能想到三个原因。

1.  您在 Magento 不实例化“头部”对象的页面上使用它

2.  您进行的一些其他自定义/您安装的模块尝试重写`page/html_head`块类，但这样做不正确，以至于 Magento 无法实例化 `page/html_head' 块

3.  您进行的其他一些自定义/您已安装的模块会**移除**头块

由于缺乏对具有基本 Magento 技能的任何人的访问权限，我会开始将您的系统和/或主题文件与标准安装进行比较。

# c# - 更改 Windows 窗体应用程序中菜单的字体，.net3.5

> ID：12681806
> 
> 赞同：3
> 
> 时间：2012-10-01T22:07:48.350
> 
> 标签：c#, winforms, .net-3.5, fonts

我的表单上有一个菜单，定义如下：

```
private System.Windows.Forms.MainMenu mainMenu1;

//Then

private void InitializeComponent()
{
 this.mainMenu1 = new System.Windows.Forms.MainMenu(this.components);
 this.Menu = this.mainMenu1;
} 
```

我为整个表单设置了字体，但菜单项仍然忽略它。如何使菜单项的字体更大？我找不到 Menu 或 MenuItem 的 Font 属性......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T22:14:18.970

如果您使用的是`MainMenu`. 你应该使用 a[`MenuStrip`](http://msdn.microsoft.com/en-us/library/system.windows.forms.menustrip%28v=vs.90%29.aspx)代替。

如果您绝对必须使用`MainMenu`，则必须设置 to 的属性[`OwnerDraw`](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.ownerdraw(v=vs.90).aspx)并覆盖/实现and事件，以便您可以手动绘制它。`MenuItem``true`[`DrawItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.drawitem%28v=vs.90%29.aspx)[`MeasureItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.menuitem.measureitem%28v=vs.90%29.aspx)

* * *

这是一个非常基本的自定义菜单项类；它绝不是完整的或功能齐全的，但它应该让你开始：

```
using System.Windows.Forms;
using System.Drawing;

class CustomMenuItem : MenuItem
{
    private Font _font;
    public Font Font
    {
        get
        {
            return _font;
        }
        set
        {
            _font = value;
        }
    }

    public CustomMenuItem()
    {
        this.OwnerDraw = true;
        this.Font = SystemFonts.DefaultFont;
    }

    public CustomMenuItem(string text)
        : this()
    {
        this.Text = text;
    }

    // ... Add other constructor overrides as needed

    protected override void OnMeasureItem(MeasureItemEventArgs e)
    {
        // I would've used a Graphics.FromHwnd(this.Handle) here instead,
        // but for some reason I always get an OutOfMemoryException,
        // so I've fallen back to TextRenderer

        var size = TextRenderer.MeasureText(this.Text, this.Font);
        e.ItemWidth = (int)size.Width;
        e.ItemHeight = (int)size.Height;
    }

    protected override void OnDrawItem(DrawItemEventArgs e)
    {
        e.DrawBackground();
        e.Graphics.DrawString(this.Text, this.Font, Brushes.Blue, e.Bounds);
    }
} 
```

这是一个 3-deep 测试用法：

```
MainMenu mainMenu = new MainMenu();
MenuItem menuFile = new CustomMenuItem("File");
MenuItem menuOpen = new CustomMenuItem("Open");
MenuItem menuNew = new CustomMenuItem("New");

public MenuTestForm()
{
    InitializeComponent();

    this.Menu = mainMenu;
    mainMenu.MenuItems.Add(menuFile);
    menuFile.MenuItems.Add(menuOpen);
    menuOpen.MenuItems.Add(menuNew);
} 
```

和输出：

![在此处输入图像描述](../Images/7e9ba42880a50a877de947b426ff578e.png)

# ruby-on-rails - Rails 3.2.8 - 预编译资产失败

> ID：12681812
> 
> 赞同：0
> 
> 时间：2012-10-01T22:08:26.853
> 
> 标签：ruby-on-rails, assets

我正在将应用程序从 Rails 3.0.3 升级到 3.2.8。试图让资产进行预编译。我得到这个输出：

```
$ bundle exec rake assets:precompile
/usr/local/rvm/rubies/ruby-1.9.2-p320/bin/ruby /usr/local/rvm/gems/ruby-1.9.2-p320@pier-admin-32/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
no such file to load -- sass/rails/compressor
  (in /home/danb/Documents/Projects/pier-admin/pier-admin/app/assets/stylesheets/application.css)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/usr/local/rvm/rubies/ruby-1.9.2-p320/bin/...]

Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

对此我比较陌生，我不知道问题是什么。我之前没有使用资产，并且在升级过程中我尽量做到了最低限度。该应用程序在开发中工作。任何帮助，将不胜感激。

资产组是：

```
group :assets do
  gem 'sass'
  gem 'coffee-script'
  gem 'uglifier'
end 
```

application.css 只有

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require_self
 *= require_tree . 
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:45:31.940

:assets 组不会安装在生产环境中，因此您可能缺少这些 gem，并且 rake 失败。

一种选择是在开发中预编译，在 /public 中提交文件并将它们推送到生产服务器。

另一种是延迟初始化 application.rb 中的资产，例如：

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  # Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  Bundler.require(:default, :assets, Rails.env)
end 
```

# iphone - Cocos2D 与 iOS6 错误旋转

> ID：12681813
> 
> 赞同：2
> 
> 时间：2012-10-01T22:08:28.617
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我正在构建一个使用 cocos2D 的应用程序。我使用 iOS 5 开发了我的应用程序，现在当我使用 iOS 6 模拟器进行测试时，整个应用程序都会旋转。我的应用程序应该处于横向模式，但 iOS 6 将其旋转为纵向模式。任何建议都会有所帮助！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:32:15.083

iOS6 改变了如何处理视图旋转。模板项目已更新并显示如何更新您的项目。如果您想正确处理它，它不仅仅是将 addSubview 更改为 setRootViewController 。

**Cocos2d 2.0**

[https://github.com/cocos2d/cocos2d-iphone/blob/develop-v2/templates/Xcode4_templates/cocos2d%20iOS.xctemplate/AppDelegate.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop-v2/templates/Xcode4_templates/cocos2d%20iOS.xctemplate/AppDelegate.m)

**Cocos2d 1.1**

[https://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m](https://github.com/cocos2d/cocos2d-iphone/blob/develop/templates/Xcode4_templates/cocos2d.xctemplate/AppDelegate.m)

# c - C中的跨平台网络二进制文件比较？

> ID：12681814
> 
> 赞同：0
> 
> 时间：2012-10-01T22:08:38.867
> 
> 标签：c, networking, file-comparison

是否存在跨平台（Windows/Linux/OSX 或其一部分）的现有库或代码库，可以让我快速比较网络上两个文件之间的差异？

基本上，尝试为我正在处理的项目重新创建 rsync 的“就地”基本版本，这将获取文件之间的差异并通过网络连接仅发送块级数据。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:26:51.593

您可以查看一个[librsync （在](http://librsync.sourceforge.net/)[作者的网站上](http://librsync.sourcefrog.net/)提供了更多信息）。它似乎已经被放弃了很长一段时间，最后一个版本是在 2004 年，但它可能按原样工作得很好。

# r - 如何将多个文件的结果保存为单个文件

> ID：12681815
> 
> 赞同：-1
> 
> 时间：2012-10-01T22:08:42.190
> 
> 标签：r

我有许多具有通用列名的文件。在采用每一列的方法后，我试图将这些文件的结果保存在一个文件中。我正在使用追加命令，但它也使用列名保存每一行，这是我不想要的。我只想要单个列名而不是每一行。任何建议...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:48:58.113

尝试在 using 中读取文件`read.csv`。它将适用于纯文本文件和 CSV 文件，并提供定义选项`header=TRUE`，它将在文件的标题行中读取为列名，而不是行。

```
df1 <- read.csv("fileDir/input1.txt",sep=""),header=TRUE) 
```

然后，当您将文件作为数据框时，您可以使用以下命令轻松附加它们`rbind`：

```
df_final <- rbind(df1,df2,df3) 
```

# jquery - tinymce 使用原始高度百分比的自动调整大小插件

> ID：12681817
> 
> 赞同：1
> 
> 时间：2012-10-01T22:08:58.647
> 
> 标签：jquery, tinymce

如何修改自动调整大小插件，以便可以将选项`autoresize_max_height`设置为原始高度的百分比？

例如

```
var defaults = {
    height: 500,
    autoresize_max_height: "150%",
}

$(selectTinyMce).tinymce(defaults);

$(selectTinyMceSmall).tinymce($.extend(true, {}, defaults, {
    height: 200
}));

$(selectTinyMceLarge).tinymce($.extend(true, {}, defaults, {
    height: 1000
}));

/**
 * editor_plugin_src.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://tinymce.moxiecode.com/license
 * Contributing: http://tinymce.moxiecode.com/contributing
 */

(function() {
    /**
     * Auto Resize
     *
     * This plugin automatically resizes the content area to fit its content height.
     * It will retain a minimum height, which is the height of the content area when
     * it's initialized.
     */
    tinymce.create('tinymce.plugins.AutoResizePlugin', {
        /**
         * Initializes the plugin, this will be executed after the plugin has been created.
         * This call is done before the editor instance has finished it's initialization so use the onInit event
         * of the editor instance to intercept that event.
         *
         * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.
         * @param {string} url Absolute URL to where the plugin is located.
         */
        init : function(ed, url) {
            var t = this, oldSize = 0;

            if (ed.getParam('fullscreen_is_enabled'))
                return;

            /**
             * This method gets executed each time the editor needs to resize.
             */
            function resize() {
                var deltaSize, d = ed.getDoc(), body = d.body, de = d.documentElement, DOM = tinymce.DOM, resizeHeight = t.autoresize_min_height, myHeight;

                // Get height differently depending on the browser used
                myHeight = tinymce.isIE ? body.scrollHeight : (tinymce.isWebKit && body.clientHeight == 0 ? 0 : body.offsetHeight);

                // Don't make it smaller than the minimum height
                if (myHeight > t.autoresize_min_height)
                    resizeHeight = myHeight;

                // If a maximum height has been defined don't exceed this height
                if (t.autoresize_max_height && myHeight > t.autoresize_max_height) {
                    resizeHeight = t.autoresize_max_height;
                    body.style.overflowY = "auto";
                    de.style.overflowY = "auto"; // Old IE
                } else {
                    body.style.overflowY = "hidden";
                    de.style.overflowY = "hidden"; // Old IE
                    body.scrollTop = 0;
                }

                // Don't make it smaller than the original height set in configuration
                if (myHeight < ed.getParam("height"))
                    resizeHeight = t.myHeight;

                // Resize content element
                if (resizeHeight !== oldSize) {
                    deltaSize = resizeHeight - oldSize;
                    DOM.setStyle(DOM.get(ed.id + '_ifr'), 'height', resizeHeight + 'px');
                    oldSize = resizeHeight;

                    // WebKit doesn't decrease the size of the body element until the iframe gets resized
                    // So we need to continue to resize the iframe down until the size gets fixed
                    if (tinymce.isWebKit && deltaSize < 0)
                        resize();
                }
            };

            t.editor = ed;

            // Define minimum height
            t.autoresize_min_height = parseInt(ed.getParam('autoresize_min_height', ed.getElement().offsetHeight));

            // Define maximum height
            t.autoresize_max_height = parseInt(ed.getParam('autoresize_max_height', 0));

            // Add padding at the bottom for better UX
            ed.onInit.add(function(ed){
                ed.dom.setStyle(ed.getBody(), 'paddingBottom', ed.getParam('autoresize_bottom_margin', 10) + 'px');
            });

            // Add appropriate listeners for resizing content area
            ed.onChange.add(resize);
            ed.onSetContent.add(resize);
            ed.onPaste.add(resize);
            ed.onKeyUp.add(resize);
            ed.onPostRender.add(resize);

            if (ed.getParam('autoresize_on_init', true)) {
                ed.onLoad.add(resize);
                ed.onLoadContent.add(resize);
            }

            // Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mceExample');
            ed.addCommand('mceAutoResize', resize);
        },

        /**
         * Returns information about the plugin as a name/value array.
         * The current keys are longname, author, authorurl, infourl and version.
         *
         * @return {Object} Name/value array containing information about the plugin.
         */
        getInfo : function() {
            return {
                longname : 'Auto Resize',
                author : 'Moxiecode Systems AB',
                authorurl : 'http://tinymce.moxiecode.com',
                infourl : 'http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize',
                version : tinymce.majorVersion + "." + tinymce.minorVersion
            };
        }
    });

    // Register plugin
    tinymce.PluginManager.add('autoresize', tinymce.plugins.AutoResizePlugin);
})(); 
```

注意：我已添加`if (myHeight < ed.getParam("height"))`以确保高度永远不会小于原始高度，因此默认情况下完整的编辑器是“可点击的”，它有很多填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:55:28.680

您可以使用配置的高度信息来计算`autoresize_max_height`插件中的值：

```
// Define maximum height
var percentage = parseInt(ed.getParam('autoresize_max_height', 0)); // the value here is a percentage value without the "%"

t.autoresize_max_height = ed.getParam('height') || 500; // 500 as default if height has not been set
// apply the percentage
t.autoresize_max_height = parseInt(t.autoresize_max_height * (percentage/100)); 
```

# asp.net-mvc - ASP.NET MVC 中异常控制流的替代方案

> ID：12681818
> 
> 赞同：1
> 
> 时间：2012-10-01T22:09:01.237
> 
> 标签：asp.net-mvc, exception, exception-handling, n-tier-architecture

我读过异常控制流是一个坏主意。

```
if(products.length == 0)
   throw new CustomException("Product is required"); 
```

我目前正在为我的请求使用 ajax，如果发生 500 错误，我会在一个异常过滤器中捕获它们，该过滤器在一个强类型对象中返回异常，该对象以 JSON 格式发送到客户端以显示在弹出窗口中。在 ASP.NET MVC 应用程序中，更好的选择和示例是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T05:18:48.907

如果这是出于模型验证的目的，最好使用数据注释等标准技术，或者如果您像我一样发现它们难以在复杂的验证场景中使用，您也可以[查看 FluentValidation.NET](http://fluentvalidation.codeplex.com/)。

# jsf - 为什么不调用我的请求范围的支持 bean 的构造函数？

> ID：12681819
> 
> 赞同：0
> 
> 时间：2012-10-01T22:09:02.417
> 
> 标签：jsf, javabeans, icefaces

我正在编写一个 JSF Web 应用程序，并且我曾经拥有主要的支持 bean 请求范围。后来我把它改成了 session-scoped，现在我需要创建一个新的 request-scoped backing bean。我遵循了我的第一个请求范围 bean 的格式，但我似乎根本无法调用构造函数。我已经使用 JSF 很长一段时间了，但是当我以前有一个请求范围的类工作得很好时，我无法弄清楚为什么它不会调用构造函数。:-S

这是我的支持 bean 类：

```
package brian.canadaShipping;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name= "cpstcRequestBean")
@ViewScoped
public class CpstcRequestBean implements Serializable {

private static final long serialVersionUID = -5066913533772933899L;

public CpstcRequestBean()
{
    super();
    System.out.println("Hello, RequestBean!");
}

} 
```

这是我的 faces-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <managed-bean>
    <managed-bean-name>home</managed-bean-name>
    <managed-bean-class>brian.canadaShipping.CpstcHomeBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
    <description>handles initialization of pseudo-permanent data</description>
    <managed-bean-name>cpstcApplicationBean</managed-bean-name>
    <managed-bean-class>brian.canadaShipping.CpstcApplicationBean</managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
    </managed-bean>
    <managed-bean>
    <description>- intializes HomeBean values which shouldn't be session scoped</description>
    <managed-bean-name>cpstcRequestBean</managed-bean-name>
    <managed-bean-class>brian.canadaShipping.CpstcRequestBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>

</faces-config> 
```

我在 ICEfaces 3.01 框架上运行，我相信它基于 JSF 2.2。我之前运行了一个请求范围的支持 bean，但我无法让这个新类工作。任何建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:14:41.140

第一，您不必在构造函数中调用 super()，第二，您的注释提供所有配置，因此您不需要 faces-config.xml 中的任何内容。这甚至可以解决你的问题:)

另外，您是否正确引用了请求 bean？

# php - PHP 不等待执行完成

> ID：12681822
> 
> 赞同：0
> 
> 时间：2012-10-01T22:09:14.410
> 
> 标签：php, exec

嗨，我正在尝试从 cmd 执行一个 php 脚本，其中包含通过 GET 请求提供的一些数据，但由于某种原因我无法让它等待命令完成。代码是。

```
<?php
error_reporting(0);

file_put_contents("query.txt", $_GET['query']);

exec("php loop1.php");
$result=file_get_contents("result.html");
echo $result;
?> 
```

loop1 的代码太复杂了，不是问题的重点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:27:05.263

与其使用隐式的“php”CLI 工具，不如通过给定安装/平台的更明确的路径来获得更好的运气，即：

```
$phpcli = '/usr/local/bin/php';
exec($phpcli . ' loop1.php'); 
```

（请务必先设置**$phpcli**以包含 PHP 的正确显式路径）

# android - 将 cocos2d-x 添加到现有的 Android 项目

> ID：12681825
> 
> 赞同：4
> 
> 时间：2012-10-01T22:09:30.650
> 
> 标签：android, cocos2d-x

我有一个 Android 项目，想将 cocos2d-x Android 库添加到其中。就文档/在线资源而言，这似乎不容易发生，您需要使用他们的 create-android-project 作为这些[说明](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)的详细信息。这会创建一个相当奇怪的文件层次结构，其中 cocos2d-x 位于根目录，而我的应用程序特定文件深埋在此文件夹中。为了保持一致性和约定，我希望能够将 cocos2d-x 库放在第 3 方库文件夹中并包含它并使用它。

有没有人有幸将 cocos2d-x 库添加到现有的 Android 项目中。如果是这样，一些步骤将不胜感激。

谢谢！

# pattern-matching - 在 SML/NJ 中解决匹配非穷举和调用 polyequal 等警告

> ID：12681826
> 
> 赞同：1
> 
> 时间：2012-10-01T22:09:32.480
> 
> 标签：pattern-matching, sml, smlnj

问题是输入两个列表并根据另一个列表中的相应编号重复第一个列表中的元素。例如`repeat([2,3,4],[1,2,2])`会给`[2,3,3,4,4]`

```
fun repeat1(a,b)=if b>0 then a::repeat1(a,b-1) else [];
fun repeat([],[])=[]
|repeat([l1],[m1])=repeat1(l1,m1)
|repeat(l1::ln,m1::mn)=if length(l1::ln)=length(m1::mn) then if ln<>[] then repeat1(l1,m1)@repeat(ln,mn) else [] else []; 
```

错误说

```
stdIn:36.64-36.66 Warning: calling polyEqual
stdIn:34.5-36.112 Warning: match nonexhaustive
          (nil,nil) => ...
          (l1 :: nil,m1 :: nil) => ...
          (l1 :: ln,m1 :: mn) => ... 
```

这些是做什么用的（我知道它对于基本案例和归纳案例是不够的）？但是，即使这不会影响程序的输出，我该如何删除此警告？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:22:37.863

当两个列表中只有一个为空时，您显然忘记了两个基本情况。由于这些情况是格式错误的输入，您可以使用异常来处理它们：

```
exception LengthNotEqual

fun repeat ([], []) = []
  | repeat ([], _) = raise LengthNotEqual
  | repeat (_, []) = raise LengthNotEqual
  | ... 
```

添加两个新的基本情况后，您不再需要比较最后一个模式中两个列表的长度。`length`应该避免使用，因为它会再次遍历整个列表。`([l1], [m1])`由于冗余，该模式可能会被删除。

所以新`repeat`函数看起来像：

```
fun repeat ([], []) = []
  | repeat ([], _) = raise LengthNotEqual
  | repeat (_, []) = raise LengthNotEqual
  | repeat (l1::ln, m1::mn) = repeat1(l1, m1)@repeat(ln, mn) 
```

# ruby-on-rails - 更改每页的应用程序布局

> ID：12681827
> 
> 赞同：0
> 
> 时间：2012-10-01T22:09:41.050
> 
> 标签：ruby-on-rails, templates

我有以下类型的页面设置：

标题 - 一致左侧 - 包含 <%= yield %> 右侧 - ul 主要包含静态菜单

所以，我想做的是a）向当前页面li添加一个类。所以例如在about页面上，右边的about li会添加.current

b) 在当前页面的右侧显示子菜单。因此，如果 li 是 about.current，我可以在该 li 内显示一个子菜单。

每个页面都有布局（应用程序布局的目的也是如此），并不是每个页面都列在右侧的菜单中。所以，问题是我是否可以传递一个变量或一个调用，将页面名称传递给应用程序布局以允许添加 .current 或处理此类事情的最佳方法是什么？答案是不是在应用程序布局中不包含正确的菜单栏，即使我需要将它添加到每个页面？

寻找建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:36:50.303

`current_page?`helper 方法可以告诉您 url 是否适用于当前页面。因此，您可以执行以下操作：

```
<li><%= link_to "Something", something_url, :class => (current_page?(something_url) ? "current" : "") %></li> 
```

更好的是，您可以定义一个自动执行此操作的辅助方法：

```
def link_to_with_current_class(name, url, options = {})
  if current_page?(url)
    if options[:class]
      options[:class] += " current"
    else
      options[:class] = "current"
    end
  end
  link_to(name, url, options)
end 
```

接着：

```
<li><%= link_to_with_current_class "Something", something_url %></li> 
```

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/current_page%3F](http://apidock.com/rails/ActionView/Helpers/UrlHelper/current_page%3F)

# objective-c - UItextfield 在自定义 UIView 中不起作用

> ID：12681830
> 
> 赞同：2
> 
> 时间：2012-10-01T22:10:08.683
> 
> 标签：objective-c

这是我的问题：

我有一个扩展自的类，`UIView`我调用了`VerticalFieldLayout`.

**字段布局标题：**

```
#import <Foundation/Foundation.h>
#import "Layout.h"

#import <QuartzCore/QuartzCore.h>
static int const VIEW_SPACE = 5;
extern int HORIZONTAL_LAYOUT;
extern int VERTICAL_LAYOUT;

@interface FieldLayout : UIView <Layout> {
    @private
    float xPos;
    float yPos;
    int type;
}
@property(nonatomic) int type;

-(void) applyRadius: (float) radius;
@end 
```

**现场布局实施**

```
#import "FieldLayout.h"

int HORIZONTAL_LAYOUT = 345678;
int VERTICAL_LAYOUT = 12345;

@implementation FieldLayout
@synthesize type;

- (id)init {
    self = [super init];
    if (self) {
        xPos = 0;
        yPos = 0;
    }

    return self;
}

- (void)resize:(CGRect)movement {
    float cwidth = self.frame.size.width;
    float cheight = self.frame.size.height;

    if (type == HORIZONTAL_LAYOUT) {
        if (cwidth < movement.size.width + movement.origin.x) {
            cwidth = movement.size.width + movement.origin.x;
        }
    }

    if (type == VERTICAL_LAYOUT) {
        if (cheight < movement.size.width + movement.origin.y) {
            cheight = movement.size.height + movement.origin.y;
        }
    }

    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, cwidth, cheight);
}

- (void)applyRadius:(float)radius {
    [[self layer] setCornerRadius:radius];
    [[self layer] setMasksToBounds:YES];
}

- (void)addSubview:(UIView *)view {
    if (type == HORIZONTAL_LAYOUT) {
        view.frame = CGRectMake(xPos, view.frame.origin.y, view.frame.size.width, view    .frame.size.height);

        xPos = xPos + view.frame.size.width + VIEW_SPACE;
    } else {
        view.frame = CGRectMake(view.frame.origin.x, yPos, view.frame.size.width,     view.frame.size.height);

        yPos = yPos + view.frame.size.height + VIEW_SPACE;
    }

    [self resize:view.frame];

    [super addSubview:view];
}

@end 
```

**垂直标题：**

```
#import <Foundation/Foundation.h>
#import "FieldLayout.h"
#import <QuartzCore/QuartzCore.h>

@interface VerticalFieldLayout : FieldLayout
    - (void)setBorderNcolor:(float)width andcolor:(UIColor *)andcolor;
@end 
```

**垂直实施：**

```
#import "VerticalFieldLayout.h"

@implementation VerticalFieldLayout

- (id)init {
    self = [super init];
    if (self) {
        [self setType:VERTICAL_LAYOUT];

        self.userInteractionEnabled = YES;
    }

    return self;
}

- (void)applyRadius:(float)radius {
    [[self layer] setCornerRadius:radius];
}

- (void)setBorderNcolor:(float)width andcolor:(UIColor *) color {
    self.layer.borderWidth = width;
    self.layer.borderColor = color.CGColor;
}
@end 
```

现在，我使用 addSubviews 将 aprox 4 VerticalLayouts 添加到 VerticalFieldLayout。在每个 VerticalFieldLayout（4 个）中，我添加了 UIExfields。

**问题：** 为什么当我在 UITextfields 上选项卡时选项卡事件没有响应？但是如果我将 UITextfields 直接添加到 UIViewcontroller 的视图中，它们就可以完美地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:34:13.303

我得到了解决方案：

我不得不在 FieldLayout 中重写这个方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    NSEnumerator *reverseE = [self.subviews reverseObjectEnumerator];
    UIView *iSubView;

    while ((iSubView = [reverseE nextObject])) {
        UIView *viewWasHit = [iSubView hitTest:[self convertPoint:point toView:iSubView]     withEvent:event];
        if (viewWasHit) {
            return viewWasHit;
        }

    }
    return [super hitTest:point withEvent:event];
} 
```

现在，每个 SubView 都响应触摸事件！

# java - 在使用 PreparedStatement 的同时使用 RabbitMQ 设计 Java OSGi 应用程序

> ID：12681833
> 
> 赞同：5
> 
> 时间：2012-10-01T22:10:21.023
> 
> 标签：java, jdbc, osgi, rabbitmq

我正在设计一个将在 OSGi 容器（目前是 Equinox）中运行的应用程序。它将通过 RabbitMQ 接收消息并在内部处理它们。该应用程序将作为服务器持续运行。我目前的计划是让 RabbitMQ 侦听器包配置其队列并在其上放置侦听器，使用`QueueingConsumer`并在它们自己的线程中运行。侦听器将调用一个或多个处理服务来处理消息。处理器需要进行 JDBC 调用才能访问数据库。我希望能够控制调用处理器的顺序。如果以后可以灵活地添加更多服务，而不必重新编码 RabbitMQ 侦听器，那就太好了。

我面临的问题是消息可能会以突发或缓慢的形式出现。我希望能够使用它`PreparedStatement`来加速数据库访问，但我也不想在没有任何事情发生的情况下长期保持连接打开。我曾考虑过`DefaultConsumer`直接子类化并让它在 RabbitMQ 的线程上运行`Connection`，但后来我失去了知道什么时候什么都没有发生的能力。我最初的想法是让消息处理器与 OSGi 服务完全分离，并在每次调用时都从池中获取数据库连接，但这失去了预准备语句的优势。我正在使用 Tomcat JDBC 池，它似乎没有准备好语句缓存。此外，我不确定为每次调用创建准备好的语句会有多昂贵，但这似乎很浪费。

到目前为止，我想出的最好的想法是让我的听众在一个双循环中处理。外部循环等待消息，然后调用内部循环建立数据库连接和准备好的语句并运行，直到在指定的超时时间内没有更多消息进入，然后关闭其连接并返回到外部循环。我让它可以进行一次处理，但是如果我有多个可能有不同准备好的语句的处理器，我很难想象如何管理这个。

也许我不得不放弃多个服务的想法，并将处理过程硬编码到我的听众中。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:44:55.827

为什么不将服务用作侦听器并将它们应该使用的 JDBC 连接传递给它们呢？然后，一段代码将队列分派给您的服务。这个中央调度器可以轻松地维护一个准备好的 JDBC 连接池。如果您不想在 API 中看到 JDBC 连接，请使用 Coordinator 服务来保持连接。然后，“Aware”服务可以获得优化的 JDBC 连接。

或者，将 DataSource 注册为侦听器服务的服务并实施您自己的池策略。由于您知道 OSGi 服务调用中的调用者，因此您可以进行各种优化，例如从包的 jar 中读取准备好的语句并相应地缓存它们。

我不会放弃这里的服务，你得到的解耦很棒，我从经验中知道。由于在此模型中服务侦听器不依赖于 RabbitMQ，您可以轻松地测试它们和/或切换到另一种队列技术。

*再说一次*，在这些情况下，最好的办法是做你能想到的最简单的解决方案。如果您遇到性能问题，请测量并修复瓶颈。过早的解决方案浪费了大量的精力......我可以告诉你很多愚蠢的过早优化我已经浪费了我的时间。

# c# - 从 C# 中的以下字符串解析命令行？

> ID：12681838
> 
> 赞同：0
> 
> 时间：2012-10-01T22:11:02.283
> 
> 标签：c#

我有以下格式的字符串：

```
httP;//whatvere[CanIncludeSpaces"].url -a -b -c 
```

如何在字符串数组中获取参数 -a、-b、-c？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T23:06:03.490

这是我想出的：

```
var str = "httP;//whatvere[CanIncludeSpaces\"].url -a -b -c";
var endOfUrl = str.LastIndexOf(".url") + 4;
var args = str.Substring(endOfUrl).Split(new[]{' '}, StringSplitOptions.RemoveEmptyEntries);
//args is ["-a", "-b", "-c"]
//also, the URL is easy to get:
var url = str.Substring(0, endOfUrl);
//url is now 'httP;//whatvere[CanIncludeSpaces"].url' 
```

# c# - 为什么我可以在 IDE 中设置这些属性，但不能在代码中设置？

> ID：12681839
> 
> 赞同：0
> 
> 时间：2012-10-01T22:11:04.877
> 
> 标签：c#, winforms, visual-studio-2010, datagridview

我可以在设计时为 DGV 设置最大和最小尺寸高度和宽度值，但不能在代码中设置。这不会编译，因为“无法修改 'System.Windows.Forms.Control.MaximumSize' 的返回值，因为它不是变量”：

```
dataGridViewPlatypi.MaximumSize.Height = dataGridViewPlatypi.Size.Height;
dataGridViewPlatypi.MinimumSize.Height = dataGridViewPlatypi.Size.Height;
dataGridViewPlatypi.MaximumSize.Width = dataGridViewPlatypi.Size.Width;
dataGridViewPlatypi.MinimumSize.Width = dataGridViewPlatypi.Size.Width; 
```

如果MaximumSize 不是变量，为什么我可以在IDE 中修改它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T22:13:32.160

更仔细地阅读错误信息：

> “无法修改 'System.Windows.Forms.Control.MaximumSize' 的返回值，**因为它不是变量”**：

[`Control.MaximumSize`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.maximumsize.aspx)是 type `Size`，它是一个值类型。该属性返回一个对象的*副本*`Size`，然后您继续尝试修改其属性。即使您可以修改它们，它也不会做任何事情，因为您只会改变一个副本。

您需要将属性设置为全新的值，而不仅仅是更改副本的属性。

```
dataGridViewPlatypi.MaximumSize = new Size(width, height); 
```

# jquery - 使用 jQuery 有效地滑动或隐藏表单字段

> ID：12681840
> 
> 赞同：0
> 
> 时间：2012-10-01T22:11:19.667
> 
> 标签：jquery

假设我有一个带有下拉菜单的表单。下拉菜单有两个选项。如果用户选择第二个选项，则以前不可见的三个附加字段将变为可见。这就是使用 jQuery 实现它的方式：

```
$(document).ready(function() {
    $('#my_dropdown').change(function() {
        if ($(this).val() == 'option2') {
            $('#foo, #bar, #baz').slideDown();
        }
        else {
            $('#foo, #bar, #baz').slideUp();
        }
    });
}); 
```

这种方法的问题是，当页面第一次加载并且下拉菜单默认选择了第一个选项时，用户可能会看到三个字段向上滑动，这可能看起来很刺耳。所以这是做同样事情的另一种方法，但没有我刚才描述的问题：

```
function dropdown_handler(animate) {
    if (animate == true) {
        if ($('#my_dropdown').val() == 'option2') {
            $('#foo, #bar, #baz').slideDown();
        }
        else {
            $('#foo, #bar, #baz').slideUp();
        }
    }
    else {
        if ($('#my_dropdown').val() == 'option2') {
            $('#foo, #bar, #baz').show();
        }
        else {
            $('#foo, #bar, #baz').hide();
        }
    }
}

$(document).ready(function() {
    dropdown_handler(false);

    $('#my_dropdown').change(function() {
        dropdown_handler(true);
    });
}); 
```

但是，这种方法的问题在于它看起来相当臃肿。如何有效地解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:14:25.507

您可以在页面加载时触发更改

```
 $('#my_dropdown').change(function() {
         if ($(this).val() == 'option2') {
            $('#foo, #bar, #baz').slideDown();
        }
        else {
            $('#foo, #bar, #baz').slideUp();
        }
 }).change(); 
```

你还需要在你的 CSS 中设置它的样式 .. 这可以确保在页面第一次加载时这些元素是隐藏的..

```
#foo, #bar, #baz 
{
   display: none;
} 
```

# c# - 在 C# 中嵌入一段 Python 代码的最简单方法（比 IronPython 更简单）

> ID：12681842
> 
> 赞同：0
> 
> 时间：2012-10-01T22:11:28.820
> 
> 标签：c#, python, .net, ironpython

基本上我想制作一个 C#.NET 应用程序，但也想创建可以从 C# 调用的完整 Python 模块。我打算使用 IronPython，但我发现我无法将 BeautifulSoup 之类的库添加到 IronPython。

我想我想要做的是将纯 python 嵌入到 C# 中，而不是使用 IronPython，这是 Python 的有限实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:15:12.880

我不推荐这种类型的跨语言开发。这是可能的，但它最终会变得 hackish、难以部署等。

将 Python 库替换为 C# 库，并将 Python 代码替换为 C# 代码。例如，将 BeautifulSoup 替换为[Html Agility Pack](http://htmlagilitypack.codeplex.com/)。

# android-layout - 为什么相对布局将所有图片都放在中屏

> ID：12681849
> 
> 赞同：-1
> 
> 时间：2012-10-01T22:11:58.443
> 
> 标签：android-layout

我正在尝试控制图像在相对视图中的活动上的位置。但不管我做什么。图片总是显示在屏幕中间。

```
 <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="100dp"
        android:layout_marginTop="1dp"

        android:src="@drawable/hp" />

</RelativeLayout> 
```

即使我尝试了对齐以及我能想到的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:26:10.310

**例子**

两颗星。一个相对于父级（绑定到左上角）和一个相对于第一个星（绑定到左上角到第一个星 - 请参见`layout_below`和`layout_toRightOf`）。

![呈现的示例](../Images/fa064eadee27130c17037da8ead078db.png)

**来源**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@android:drawable/btn_star" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView1"
        android:layout_toRightOf="@+id/imageView1"
        android:src="@android:drawable/btn_star_big_on" />

</RelativeLayout> 
```

# excel - 从 Dynamic CRM 获取数据的最简单方法

> ID：12681850
> 
> 赞同：1
> 
> 时间：2012-10-01T22:12:02.683
> 
> 标签：excel, dataset, dynamics-crm-2011

我们当前的设置如下，如果我们的数据集发生变化，则相当难以维护。

我们目前将数据从 CRM 导出到 Excel 表，该表通过使用 Excel-CRM 插件定期更新。这已经遇到了一个问题，因为如果有人打开文件，现有的自动化脚本将无法更新和保存文件（当前在非工作时间运行脚本，但有时人们仍然有点“特别”）。

提取并保存数据后，我们有一些脚本可以在 python 中操作数据并将 JSON 输出到公司休息室中的指标仪表板，该仪表板提供来自多个来源的信息（这就是为什么我们不能只使用 Dynamics CRM 的内置仪表板）。

因此，我的问题是，我想要一种更直接的方法将数据从 CRM 获取到我们的仪表板 - 从而减少对 excel-CRM 插件作为中间人的需求 - 我一直在研究这些选项，我正在不确定哪一个最适合我们的情况。

当前选项如下：

1.  Javascript 和 Microsoft REST API 或 SOAP 事务
2.  使用 PyCurl 或其他一些可以进行 SOAP 调用的系统的 Python 和 SOAP 事务（不确定它是否允许 REST，但我不这么认为）。
3.  使用 Microsoft SDK 和 C# 获取所需信息（不是一个很好的选择，因为我不懂 C#）
4.  使用 Microsoft SDK 和 IronPython？（这甚至可行吗？有其他人尝试过吗）

这些是我充实的选项，我正在寻找一些简单且相当容易实现的东西，以达到获取 CRM 数据并能够操作它而无需从插件中提取数据的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:03:46.177

我以前从未使用过 python，但根据这个网站：[Using Rest In Python](http://rest.elkstein.org/2008/02/using-rest-in-python.html)你应该能够对 CRM OData 端点进行 Rest 调用，它返回 Json，这就是你正在寻找的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T08:28:26.823

您可以使用 SQL Server Reporting Services 制作复杂的 CRM 数据报告。它使用 SQL，因此只要能够使用 SSRS 报告，它就可以与多个数据源组合。

这不使用插件。您只需指定您的数据源，在您的情况下为您的 CRM 服务器。然后，您创建一个 SQl 查询，提取您需要的数据，然后在 Visual Studio 中构建一个报告

[使用 SQL Server Reporting Services 为 Microsoft Dynamics CRM 创建报告](http://msdn.microsoft.com/en-us/library/gg328097.aspx)

[MSCRM ONLINE 的自定义报告](http://www.dynamicscrmtrickbag.com/2011/05/12/custom-ssrs-reports-for-dynamics-crm-2011-online/)

# python - 如何将现有文件夹结构添加到我的 Visual Studio 项目（python 工具）？

> ID：12681852
> 
> 赞同：23
> 
> 时间：2012-10-01T22:12:05.033
> 
> 标签：python, visual-studio-2010, ptvs

这个问题与这些问题基本相同：

[如何将现有目录树添加到 Visual Studio 中的项目？](https://stackoverflow.com/questions/392473/how-do-i-add-an-existing-directory-tree-to-a-project-in-visual-studio) [如何在 Visual Studio 中“添加现有项目”整个目录结构？](https://stackoverflow.com/questions/57776/how-to-add-existing-item-an-entire-directory-structure-in-visual-studio)

除了解决方案对我不起作用。

看起来另一个用户遇到了完全相同的问题

[http://pytools.codeplex.com/discussions/249455](http://pytools.codeplex.com/discussions/249455)

但是[http://xkcd.com/979/](http://xkcd.com/979/)又来了。

我正在将 Visual Studio 2010 与 Visual Studio 的 Python 工具一起使用。

在这个项目中，用户创建新文件夹和代码并将它们提交给 SVN。另一个用户将更新 SVN，新文件和文件夹将显示在 Windows 资源管理器中。然后，用户需要一种简单的方法将这些文件夹和文件添加到解决方案中。

将解决方案放在 SVN 中，以便可以在提交之前将添加的文件夹添加到解决方案中，这不是一种选择。解决方案在与源分开的区域中进行控制。

**建议的解决方案：**

[https://stackoverflow.com/a/392477/606660](https://stackoverflow.com/a/392477/606660)

**不起作用，因为：**

解决方案资源管理器中的“显示所有文件”按钮未显示。

**建议的解决方案：**

[https://stackoverflow.com/a/57778/606660](https://stackoverflow.com/a/57778/606660)

**不起作用，因为：**

当我将文件夹拖到解决方案资源管理器窗格中时，文件夹的放置位置会影响它在解决方案中的嵌套位置。如果它被放到错误的文件夹中，它会显示为具有预期名称和预期内容的文件夹。这真的很接近我们想要的，除了它在错误的文件夹中（因为我故意把它放在错误的文件夹中）。如果文件夹被拖到正确的位置，它会显示为带有感叹号的文件。当您双击“文件”时，它会说

```
"The item <folder name> does not exist in the project directory.  It may have been moved, renamed, or deleted" 
```

我相信这是因为 VS 会尝试在您将其拖到的目录中创建文件夹的副本。如果我将文件夹完全移出我的项目（比如桌面），然后将其拖到适当位置的解决方案资源管理器中，它会在项目中显示为文件夹。该文件夹的副本也会在磁盘上由 drop 指定的位置创建，具有相同的名称和内容。

因此，将文件夹拖放到解决方案资源管理器中似乎会在磁盘上创建文件夹的副本，该副本位于您在解决方案中放置该文件夹时的目标位置。如果该位置已经具有该名称的文件夹，则该文件夹将作为文件导入。

**我的解决方案**

我改用 PyCharm，它好多了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:35:07.980

`.pyproj`如果没有其他工作，您可以在-file中手动添加文件和文件夹。格式很简单：

```
<ItemGroup>
    <Compile Include="File1.py" /> <!-- List of files relative to .pyproj folder -->
    <Compile Include="test\file2.py" />
</ItemGroup>
<ItemGroup>
    <Folder Include="test\" /> <!-- List of folders -->
</ItemGroup> 
```

您可以根据需要添加更多`<ItemGroup>`元素，也可以根据需要混合文件和文件夹。

生成 XML 的脚本：

```
import os

def visit(folder):
    for fn in os.listdir(folder):
        filename = os.path.join(folder, fn)
        _, ext = os.path.splitext(fn)
        if os.isdir(filename):
            folders.append(filename)
            visit(filename)
        elif ext.lower() == '.py':
            files.append(filename)

files = []
folders = []

visit('.')

print '<ItemGroup>'
for fn in files:
    print '  <Compile Include="' + fn + '"/>'
print '</ItemGroup>'

if folders:
    print '<ItemGroup>'
    for fn in folders:
        print '  <Folder Include="' + fn + '\\"/>'
    print '</ItemGroup>' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-24T21:10:18.327

显示所有文件有效。显示所有文件在项目菜单中。

项目->显示所有文件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T19:20:23.847

这在 Visual Studio 2013 中对我有用，我不知道这是否适用于其他 Visual Studio 迭代。

安装[Python Tools for Visual Studio (PTVS) 后，我在这里找到了](https://github.com/Microsoft/PTVS/releases/v2.2)

1.  打开 Visual Studio，导航到 FILE->NEW->PROJECT（或按住 Cntrl+shift+N） [![在此处输入图像描述](../Images/414172f1abcf5714ef8dc8fa947ff478.png)](https://i.stack.imgur.com/DdIMD.png)

2.  在新项目对话框中，浏览到您现有的 python 项目目录。在项目名称字段中输入您的项目名称。取消选中为解决方案创建目录（如果您不希望创建新的项目目录）。并选择“来自现有 Python 代码”选项并单击“确定”。 [![在此处输入图像描述](../Images/bda6a29fa40fefd0a58a106751479929.png)](https://i.stack.imgur.com/wMPKL.png)

3.  在“从现有 Python 代码创建新项目”向导中，按照提示进行所有必要的设置，或者单击完成。 [![在此处输入图像描述](../Images/7f117dd3aa1f48957751cf628c865752.png)](https://i.stack.imgur.com/NttEa.png)

# google-app-engine - GWT 生成的 HTML 文件太大

> ID：12681854
> 
> 赞同：2
> 
> 时间：2012-10-01T22:12:22.217
> 
> 标签：google-app-engine, gwt, caching, compression, gzip

我有一个巨大的 GWT 应用程序，在我编译它之后，它会生成一个文件*XXX.chace.html*。这个文件非常大——大约 3 MB——它需要用户花费 30 秒来加载网页。除了使用代码拆分之外，还有什么方法可以减少这个文件？我尝试在 GZip 中使用 compress 命令，但显然存在一个错误，即大于 1.5 MB 的文件不会被压缩。

有没有人遇到过这个问题？你是怎么解决的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T23:01:40.090

使用[代码拆分](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)将帮助您将代码分块。

不幸的是，您需要查看您的应用程序是如何设置的以利用它，但如果您的应用程序如此庞大，您肯定会从中受益。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T04:31:51.867

确保 gwt 只是在编译它需要的代码。使用接口/抽象类型可以增加你的大小。

例如，如果您在 RPC 调用中返回 Map，则 gwt 将需要包含它可用的所有 Map 子类型。返回像 HashMap 这样的具体类将停止此操作。这是因为 gwt 代码被编译成 Javascript，所以它编译它认为可能需要的所有代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T01:28:58.473

如果您不想使用代码拆分，您的另一个选择是减少代码的大小。这里有一些建议。

1) 你是否在你的应用中使用了大量的文本，比如每页上的几个段落？您可以考虑使用 ExternalTextResource 而不是在 JavaScript 中内联文本。

2) 列出您在应用程序中使用的所有小部件。看看你是否真的需要所有这些。例如，如果您使用多种类型的 LayoutPanel，您可能会决定仅使用 LayoutPanel。如果您使用 VerticalPanel 和/或 Horizo​​ntalPanel，您可以完全摆脱它们并改用 CSS。我从许多 GWT 帖子中注意到，人们喜欢使用很多小部件（面板内面板内面板等），而简单的 CSS 就可以了。

请注意，当您完全摆脱一个小部件时（更好的是整个小部件类），而不是减少一个视图中的小部件数量，您将获得大部分好处。

3) 尽可能使用 Ui:Binder。请注意，您可以在 Ui:Binder 中设置许多属性：类名、大小、文本小部件的文本、工具提示。我相信在代码中执行它更有效（我没有验证它，但无论如何它是一个好习惯。）

4）检查您是否有效地使用事件处理程序。如果您连续有 10 个按钮/标签，您可能不必为每个按钮/标签附加一个事件处理程序，而是将一个处理程序附加到它们的容器。如果单击一行中的每个单元格执行相同的操作（例如打开一个对话框），则不必在每个单元格中包含此代码 - 您可以单击一行。等等。

这是一个数据点：我有一个应用程序，其中包含 50 多个复杂的“页面”（不同的位置/视图）、30 多个数据实体、60 多个自定义小部件和 1,000 多个文本常量。它编译为 1.2MB。（我使用 GWT RPC）。我只能想象你可以用 3MB 做什么。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T08:30:08.820

使用[编译报告](https://developers.google.com/web-toolkit/doc/latest/DevGuideCompileReport)找出导致大代码大小的确切原因。然后尝试消除最大的类或字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:32:03.423

这可能是另一个方向的方法，但 Google App Engine 提供了[PageSpeed 优化服务](https://developers.google.com/appengine/docs/adminconsole/performancesettings#pagespeed)，您可以使用它来加快用户加载应用程序所需的时间。

虽然它不是免费的，除了常规的 GAE 带宽成本外，每 GB 带宽传输 0.39 美元，但[您可以选择退出应用程序的某些部分，](https://developers.google.com/appengine/docs/python/config/appconfig#pagespeed)以便在该服务下不进行优化。

# r - 将数据帧转换为时间序列，间隔为 30 分钟

> ID：12681855
> 
> 赞同：1
> 
> 时间：2012-10-01T22:12:24.030
> 
> 标签：r

和

```
x <- data.frame(value = round(rt(20, 2), 2),
                time = c("2012-09-03 00:00:00", "2012-09-03 00:30:00",
                         "2012-09-03 01:00:00", "2012-09-03 01:30:00",
                         "2012-09-03 02:00:00", "2012-09-03 02:30:00",
                         "2012-09-03 03:00:00", "2012-09-03 03:30:00",
                         "2012-09-03 04:00:00", "2012-09-03 04:30:00",
                         "2012-09-03 05:00:00", "2012-09-03 05:30:00",
                         "2012-09-03 06:00:00", "2012-09-03 06:30:00",
                         "2012-09-03 07:00:00", "2012-09-03 07:30:00",
                         "2012-09-03 08:00:00", "2012-09-03 08:30:00", 
                         "2012-09-03 09:00:00", "2012-09-03 09:30:00")) 
```

有没有办法将其转换为间隔 30 分钟的时间序列格式？比如：

```
 00:00:00 00:30:00 01:00:00 01:30:00 02:00:00 02:30:00 ...
2012-09-03     0.31    -1.01     0.94    -0.75    -0.40     0.41 
```

事实上，有不止一天的数据，我只是展示其中的一部分。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:22:13.620

```
library(plyr) 
library(reshape2)
x2 <- cbind(x, ldply(strsplit(x$time, " ")))[-2]
names(x2) <- c("value", "date", "time")
dcast(x2, date~time) 
```

# perl - 使用 HTTPS 的 Perl 的 LWP 的内存泄漏

> ID：12681857
> 
> 赞同：2
> 
> 时间：2012-10-01T22:12:33.310
> 
> 标签：perl, memory-leaks, lwp

我想我在通过 HTTPS 连接时发现了 LWP 的内存泄漏。使用以下脚本，内存使用量不断增加：

```
use LWP::UserAgent;

$ua = LWP::UserAgent->new();
$request = HTTP::Request->new(GET=>'https://www.google.com/');
while (1) {
  $response = $ua->request($request);
  sleep(1);
} 
```

这个其他脚本没有问题：

```
use LWP::UserAgent;

$ua = LWP::UserAgent->new();
$request = HTTP::Request->new(GET=>'http://www.google.com/'); # https => http
while (1) {
  $response = $ua->request($request);
  sleep(1);
} 
```

Perl 5.12.3 / LWP 5.837 / Crypt::SSLeay 0.58 / Mac OS X 10.7.4

有谁知道解决这个问题的方法？

* * *

**更新**

Perl 5.12.4 / LWP 6.05 / Crypt::SSLeay 0.64 / Mac OS X 10.8.4

通过 HTTPS 连接时仍然存在内存泄漏。要试用它，请在终端上运行示例脚本，然后使用活动监视器查看内存增长和增长。

* * *

**更新**

经过一些测试，我发现，随着我的库最近升级，仍然存在内存泄漏，但**只有当您**通过 HTTPS 调用某些地址时才会发生这种情况。在上面的示例中，我调用了[https://www.google.com](https://www.google.com)，它恰好是这些地址之一。例如，这段代码没有给我任何内存泄漏：

```
use LWP::UserAgent;

$ua = LWP::UserAgent->new();
$request = HTTP::Request->new(GET=>'https://twitter.com/'); # www.google.com => twitter.com
while (1) {
  $response = $ua->request($request);
  sleep(1);
} 
```

* * *

**更新**

我报告了这个错误，其他一些人也证实了我的发现： [https ://rt.cpan.org/Ticket/Display.html?id=88287](https://rt.cpan.org/Ticket/Display.html?id=88287)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-13T19:23:23.467

至少对我来说，您可以通过禁用验证主机名来解决此问题：

```
my $ua = LWP::UserAgent->new(ssl_opts => { verify_hostname => 0 }); 
```

显然，如果安全性对您的应用程序很重要，则不建议这样做！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:34:52.413

在 Linux 上，使用 perl 5.10、Crypt 0.58、Lwp 6.02，内存使用量是恒定的。尝试将您的 perl 模块升级到最新的。

如果问题仍然存在，请为此问题创建 RT 票证，此模块的维护者将修复泄漏。

问候，

# java - Java：Runtime.exec() 只能通过控制台工作

> ID：12681865
> 
> 赞同：1
> 
> 时间：2012-10-01T22:13:00.633
> 
> 标签：java, jar, console, runtime.exec

我遇到了一个问题，我制作了一个 Java 应用程序，它下载了另一个 Java 应用程序 (Jar) 并将其保存在 appdata 中，然后它应该运行它并且这也可以。但是我用来运行第二个 Jar 的 Runtime.exec() 仅在我通过控制台运行主 Jar 时才有效。

```
String command = "java -jar -Xms" + comboBox.getSelectedItem() + " " 
    + Util.getWorkingDirectory() + File.separator + "zlauncher" 
    + File.separator + "minecraftStarter.jar " + txtUsername.getText() + " " 
    + passwordField.getText() + " " + Util.toString(chckbxRemember.isSelected());
Runtime rt = Runtime.getRuntime();
rt.exec(command); 
```

当通过控制台启动这个时，它可以工作，但当我将它作为独立 Jar 运行时就不行了。

你能给我一个提示，我如何在不需要控制台的情况下可视化启动第二个 Jar 的方式？

编辑：我也用 ProcessBuilder 尝试过，结果相同。（在控制台中工作，但不是独立的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T23:50:15.510

一些提示：

仅仅因为您无法使用 ProcessBuilder 让它以不同的方式工作并不意味着您应该放弃并使用 Runtime.exec()。Runtime.exec() 介于非常困难和不可能用于任何不平凡的事情之间。所以使用 ProcessBuilder - 你会很高兴你这样做了。

使用采用列表的 ProcessBuilder 构造函数，而不是采用字符串的构造函数。接受字符串的问题与 Runtime.exec() 完全相同

如果可能，请使用 Windows 的批处理文件或 Linux 的 shell 脚本，它们会为您完成尽可能多的工作（设置路径等）。一旦你在命令行中调试了它，你就可以更容易地将它与 ProcessBuilder 一起使用。

调用您环境的外壳程序（例如 cmd /e 或 /bin/bash，或你有什么，并让外壳程序执行批处理文件。

不要忘记从生成的进程中读取输出流。如果你不这样做，子进程很可能会被锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:54:21.223

您应该将命令放入字符串数组中：

```
Runtime rt = Runtime.getRuntime();
rt.exec(new String[] { "java", "-jar", "-Xms", comboBox.getSelectedItem(), Util.getWorkingDirectory() + File.separator + "zlauncher" + File.separator + ""minecraftStarter.jar", txtUsername.getText(), passwordField.getText(), Util.toString(chckbxRemember.isSelected()) }); 
```

# c# - c# - gridview 排序/分页建议

> ID：12681882
> 
> 赞同：0
> 
> 时间：2012-10-01T22:14:56.320
> 
> 标签：c#, asp.net, vb.net, gridview, datasource

我正在使用 gridview 来显示大量数据。

数据源存储在会话中，因此我可以对网格视图进行分页/排序，而无需额外访问 SQL 服务器。

有没有更好的方法来分页/排序网格而不必在会话中存储数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:29:33.583

我认为这完全取决于您正在使用的数据量。如果您正在处理几百行，我建议您查看 jQuery 插件[DataTables](http://datatables.net/)。从代码的角度来看，您制作了一个常规表格，然后在 document.Ready 事件中应用 DataTables 脚本。它具有分页、排序和过滤功能。它非常强大。

如果您正在处理一千或更多行，我建议您在服务器端进行分页和排序。在这种情况下，当用户翻页时，您再次访问数据库并仅返回他们在任何给定时间查看的行数。因此，如果您只在一个页面上显示 50 条记录，那么您的查询应该只返回 50 条记录。这种方式有点棘手，但对用户来说应该更快，并且不会冒达到最大页面大小的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T22:18:17.193

您可以根据寻呼机按钮以编程方式使行可见和不可见。将数据集分组为页面大小的块。当您隐藏一个块并使您想要的一个可见时，另一个应该弹出到它的位置。您可以在所有客户端执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:34:20.653

根据我的经验，我建议使用 ObjectDataSource，因为您可以通过反射大块数据动态地工作，而不会弄乱会话。您可以使用的其他附加功能：选择、插入和删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T23:21:16.220

假设您希望将整个表存储在会话中以避免访问 SQL 服务器，一种方法是对数据进行自己的分页/排序，将生成的单页项目价值放入 List<>，然后填充具有该列表的 DataGrid。

您必须实现自己的 page-back/page-forward 控件，但这并不难。每次单击前进/后退按钮时，这些控件都会使用来自整个内存表的新页面的可查看数据填充列表。

优点是您可以完全控制所显示的数据页，而 DataGrid 控件不会尝试显示超出您想要的内容。

但请确保您在会话中缓存的数据不会过时；即，您没有显示已修改或删除的旧数据项，或未能显示新插入的项，因为您上次从 SQL 服务器检索表。某种超时可能是合适的，因此您每隔几分钟左右刷新一次数据库中的数据（而不是每次重新显示屏幕时）。

# java - 使用 java 的 JSON 模式验证 - ref

> ID：12681883
> 
> 赞同：4
> 
> 时间：2012-10-01T22:14:56.993
> 
> 标签：java, json, jsonschema

我正在尝试使用（[https://github.com/fge/json-schema-validator](https://github.com/fge/json-schema-validator)）模式验证器验证我的 JSON。

1.  您建议使用杰克逊模式生成来生成 JSON 模式还是有更好的方法？

2.  我有一个名为（Location）的对象，其中包含对象列表（BaseObject）。我为这样的位置创建了一个架构，其中包含 BaseObject 的 $ref。但验证失败并显示错误消息 - ["": domain: validation; 关键字：属性；消息：未找到所需的属性；缺失：["id","re​​fName"]; 必需：["id","re​​fName"]]

我使用 refs 的方式有错误吗？

Location.json - 架构

```
{
   "type":"object",
   "properties":{
      "locationType":{
         "type":"string"
      },
      "mapsRefs":{
          "$ref": "file://localhost/c:/baseobject.json" 
         }
      }
   }
} 
```

baseobject.json - 架构

```
{
   "type":"object",
   "properties":{
      "refName":{
         "type":"string",
          "required":true
      },
      "id":{
         "type":"integer",
          "required":true
      },
      "refs":{
         "type":"array",
          "required":false,
         "items":{
            "type":"string"
         }
      }
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T16:38:05.787

要回答您的第一个问题，根据我的经验，Jackson 是在 java 上处理 JSON 的最易于使用和记录的 API。

对于第二个问题，您根据需要定义“id”和“refName”，您要么使用错误的架构进行验证，要么没有传递所需的属性。

这看起来很像 github 上的这个已关闭问题： [https ://github.com/fge/json-schema-validator/issues/22](https://github.com/fge/json-schema-validator/issues/22)

# android - Android 广播接收器没有收到 ACTION_SCREEN_ON

> ID：12681884
> 
> 赞同：3
> 
> 时间：2012-10-01T22:14:58.533
> 
> 标签：android, android-intent, broadcastreceiver, screen

我尝试使用以下代码在我的服务中注册接收器：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
ScreenReceiver SR = new ScreenReceiver();
registerReceiver(SR, filter); 
```

这是我的广播接收器：

```
public class ScreenReceiver extends BroadcastReceiver { 
    @Override
    public void onReceive(Context context, Intent intent) {
        System.out.println("RECEIVED");
    }
} 
```

我什至在清单中声明了它，但没有任何过滤器：

```
<receiver android:name=".ScreenReceiver" android:enabled="true" /> 
```

但是无论我做什么，当我打开屏幕时，我似乎都无法接收到意图。

这个意图在 android ICS 或 JB 中被禁用还是我错过了什么？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:53:20.400

它适用于我在 Android 4.0.4 上

```
BroadcastReceiver receiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent == null)
            return;
        //do something you need when broadcast received

    }
};
IntentFilter filter = new IntentFilter()
filter.addAction(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);

context.registerReceiver(receiver, filter); 
```

至于在 Manifest.xml 中使用 Intent.ACTION_SCREEN_ON 和 Intent.ACTION_SCREEN_OFF 操作注册接收器，它没有帮助，因为[PowerManagerService.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/com/android/server/PowerManagerService.java#PowerManagerService)中的 Android 代码如下：

```
...
mScreenOnIntent = new Intent(Intent.ACTION_SCREEN_ON);
mScreenOnIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY);
mScreenOffIntent = new Intent(Intent.ACTION_SCREEN_OFF);
mScreenOffIntent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY); 
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T22:24:35.150

阅读本教程 [处理屏幕关闭和屏幕开启意图](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)，它可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:39:50.270

`onReceive()`也许您应该检查您的方法中的意图：

```
if(intent.getAction().equals(Intent.ACTION_SCREEN_ON)
{
    ...
} 
```

另外，您是否尝试过在其中放置断点？

其他建议，而不是使用`System.out.println`您的情况的 API 本机日志

```
Log.i("ScreenReceiver""RECEIVED"); 
```

并且可以在logcat中读取日志。

# assembly - Dosbox 上的 Turbo 链接器错误 2003

> ID：12681889
> 
> 赞同：0
> 
> 时间：2012-10-01T22:15:49.237
> 
> 标签：assembly, tasm, dosbox

我尝试在 dosbox 上运行 Turbo Linker (tlink)，但由于某种原因它失败了。

我使用的是 Windows7 64 位，因此我无法运行 turbo asm 和 turbo 链接器。

好吧，我`tlink/t hw1`在 dosbox 上运行，我收到了这条消息：

```
C:\tlink/t hw1
Stub error (2003): can't find dpmi16bi.ovl 
```

你知道如何解决这个错误吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:17:20.113

有一个简单的解决方案。您可以只使用 Turbo C++ 1.01 包（可在线免费获得）中的 TLINK.EXE，它不使用任何覆盖模块，也不使用 DPMI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:20:12.240

您没有安装产品的其余部分（Turbo C、Turbo Pascal、Turbo C++、Borland C 等）。`dmpi16bi.ovl`是一个覆盖库（一种旧的 DOS 类型的交换文件使用东西，将内容转移到扩展或扩展内存中，以允许使用超过 640KB 的 RAM）。没有它，你就失去了自己的很大一部分`TLink`。

# jquery - 元素点击和文档点击层次结构

> ID：12681891
> 
> 赞同：0
> 
> 时间：2012-10-01T22:15:52.200
> 
> 标签：jquery

如果我运行以下代码，如预期的那样，我得到 1，因为 a 元素在 div 元素内。

HTML：

```
<div class=".holder">
  <a href="#" class=".link">a</a>
</div> 
```

jQuery：

```
$(document).click(function (e) {
  alert($(e.target).closest(".holder").length);
}); 
```

现在，a 元素内部需要重新填充 div 元素，包括 a 元素本身，所以：

```
$(".link").on("click", function (e) {
  e.preventDefault();
  $(".holder").html("some html");
}); 
```

问题是：因为文档点击发生在 a 元素点击之后（有意义，层次结构），如果我点击 a 元素，我得到 0 而不是 1，因为 a 元素父级不再存在，并且 a 元素本身只存在于内存中。

有没有办法在不检查 a 元素点击本身的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:33:15.287

你可以试试这个方法

```
$(document).click(function (e) {
    if(e.target.className === 'link'){
        e.preventDefault();
        alert($(e.target).closest(".holder").length);
        $(".holder").html("some html");
    }
}); 
```

您可以为文档创建一个单击事件并检查当前目标是什么。如果是链接，则编写代码来处理您想要的内容。

同时删除**点。** 在你的类名中 **class="link"**

[检查演示](http://jsfiddle.net/sushanth009/7wZwB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:26:10.083

您可以推迟 HTML 替换：

```
$(document).click(function (e) {
  alert($(e.target).closest(".holder").length);
  if( $('.holder').data('executeMe') )
    $('.holder').data('executeMe')();
});

$(".link").on("click", function (e) {
  e.preventDefault();
    $('.holder').data( 'executeMe', function() {
      $(".holder").html("some html");
    });
}); 
```

​</p>

# regex - 一个正则表达式可以提取几种带有周围文本的数字格式吗？

> ID：12681892
> 
> 赞同：0
> 
> 时间：2012-10-01T22:15:59.190
> 
> 标签：regex

这是我的问题。这里建议的对话非常接近地回答了我的问题，但我仍然需要帮助来对其进行一些调整。

[常用数字格式的正则表达式](https://stackoverflow.com/questions/4025845/regular-expression-for-commonly-understandable-number-formats)

一个正则表达式可以实现这一点吗？

细绳 ：

```
texta wordb 1234 wordc textd
texta wordb $1234 wordc textd
texta wordb 1,234 wordc textd
texta wordb 1234.12 wordc textd 
```

如果这是上面的一根巨大的字符串。我想将 [数字前的单词] + [数字] 和 [数字后的单词] 提取到数组中，如下所示：

```
wordb 1234 wordc
wordb $1234 wordc
wordb 1,234 wordc
wordb 1234.12 wordc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:20:32.737

你当然可以：

```
(\p{L}+)\s([\d$,.]+)\s(\p{L}+) 
```

或者，更简单，但可能得到更广泛的支持：

```
([a-zA-Z]+)\s([\d$,.]+)\s([a-zA-Z]+) 
```

这实际上是抓取一堆字母，然后是一些空格，然后是一个可能还包含字符 $、逗号和点的数字（如果需要，根据您的期望扩展）和另一堆字母。

如果您不需要单独的部分，您可以去掉括号，只取完整的匹配项。否则，您想要的零件在第 1-3 组中。

快速 PowerShell 测试：

```
PS> $re = '(\p{L}+)\s([\d$,.]+)\s(\p{L}+)'
PS> $tests = 'texta wordb 1234 wordc textd
>> texta wordb $1234 wordc textd
>> texta wordb 1,234 wordc textd
>> texta wordb 1234.12 wordc textd' -split "`n"
>>
PS> $tests | %{ $null = $_ -match $re; Write-Host Word 1: $Matches[1], Number: $Matches[2], Word 2: $Matches[3] }
Word 1: wordb Number: 1234 Word 2: wordc
Word 1: wordb Number: $1234 Word 2: wordc
Word 1: wordb Number: 1,234 Word 2: wordc
Word 1: wordb Number: 1234.12 Word 2: wordc 
```

# c++ - 计算器类函数

> ID：12681893
> 
> 赞同：1
> 
> 时间：2012-10-01T22:16:02.260
> 
> 标签：c++, class, getter-setter

这是一个非常简单的`C++`问题，但我无法理解。我正在做一项工作，但问题来了，它创建了一个执行不同操作的简单计算器类。我通过方法很容易做到了这一点，但它说明了更多

> “计算器对象执行的每个操作都必须存储在对象的内存中，用户可以进一步获取或设置。”

作为提示，本书给出了两种方法

```
voidSetMem(double d);
double GetMem(); 
```

我不明白这条线是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:20:08.753

就指令而言，如果您正常执行计算并将其结果存储在对象中，这是可能的。

在您的`calculator`班级中，创建一个变量来存储上次执行的计算。这两个函数将能够将值存储在该变量中并获取上次执行的计算的值。假设你有这种结构。

```
class Calculator
{
  private :
    double last_result ;
  public:
    void setMem(const double) ;
    double getMem ()const ;

} ; 
```

在这些函数中，您可以使传入的值等于该对象中的值。

在你的主要，你会这样做。

```
double _result = 3.4 * 6 ;
Calculator c_obj ;
c_obj.setMem(_result) ; 
```

如果您想输出结果或在程序的其他地方使用它，请使用该`getMem()`函数。

```
cout << "Last Result was :" << c_obj.getMem() << endl ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:47:31.203

了解 Getter / Setter 方法

基本上，“Getter”是一个函数，它返回存储在某个变量中的数据，在你的教科书提示中

```
double getMem()
{
//Return your data
return memoryVariable;
} 
```

你的'Setter'将是一个用于设置一些变量的函数

```
void setMem (double variableToPass)
{
memoryVariable = variableToPass
} 
```

请注意两件事：1.）getter 函数返回数据类型 double（因为您要求程序为您提供已设置/存储的数据 2.）setter 函数返回 NO 数据类型（因为您正在告诉/设置一些变量)

这是从正方形获取区域的基本示例：

```
double getArea()
{
   return pow(side, 2);
} 
```

现在在您的程序中，您将像这样获得这些数据：

```
cout << " The area of the circle is " << sq1.getArea() <<"\n"; 
```

这是从正方形设置区域的基本示例：

```
 void setSide(double newSide)
{
    side = newSide;
} 
```

在您的程序中，您可以像这样设置这些数据：

```
 sq1.setSide(50); 
```

希望这能回答你的问题。祝你好运

# java - 你如何在java中解析这种日期格式？

> ID：12681897
> 
> 赞同：0
> 
> 时间：2012-10-01T22:16:47.020
> 
> 标签：java, datetime

简单的问题：我应该使用什么格式来处理这个日期？

```
2011-10-09T05:06:03.000000Z 
```

这个不起作用：

```
"yyyy-MM-dd'T'HH:mm:ssZZ" 
```

来自手册：“时间戳是根据 epoch_ticks (zulu) 计算的，格式=%Y-%m-%dT%H:%M:%S.%fZ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:47:46.150

我认为简短的回答是“你不能”。由于某种原因，Java 不支持“Z”作为时区标识符。你可以做一个这样的解决方法：

```
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
df.setTimeZone(TimeZone.getTimeZone("UTC"));
Date d = df.parse("2011-10-09T05:06:03.000000Z"); 
```

这假定日期为 UTC 并忽略 Z。

# c - 如何以编程方式远程登录并通过 TCP 套接字发出命令？

> ID：12681898
> 
> 赞同：0
> 
> 时间：2012-10-01T22:16:47.363
> 
> 标签：c, sockets, telnet

我正在为串行设备服务器上的嵌入式 Linux 系统开发 C 语言应用程序。我需要访问系统自己的 shell，你可以通过 telnet 访问它，并且有一堆可以在 shell 提示符下执行的自定义命令行界面命令。

一位为设备制造商工作的工程师说，以编程方式发出这些命令行界面命令的唯一方法是通过登录到 shell 的 telnet 客户端。

所以，在我的应用程序中，我想让设备服务器远程登录到它自己，这样它就可以通过它的外壳向自己发出一些命令。在我执行 C 实现之前，我想我只是尝试通过 IRB 打开一个套接字并尝试首先让命令以这种方式工作。实际的 telnet 会话如下所示：

```
login: admin
password: password

prompt# set watchdog off
prompt# save
Save config to flash ROM y/n
y 
```

下面是我在 IRB 中运行的简单脚本，以查看是否可以通过 TCP 套接字模拟上述 telnet 会话，因为这就是我将在 Linux 上的 C 中实现的方式：

```
require 'socket'
@ip = 'xxx.xxx.xxx.xxx'
@enter = "\n"
@sock = TCPSocket.open(@ip,23)
@ret = @sock.write("admin" + @enter)
puts @ret.to_s
sleep(1)      
@ret = @sock.write("password" + @enter)
puts @ret.to_s
puts @sock.read(1)
sleep(2)
@ret = @sock.write("set watchdog off" + @enter)
puts @ret.to_s
puts @sock.read(1)
sleep(1)
@ret = @sock.write("save" + @enter)
puts @ret.to_s
puts @sock.read(1)
sleep(1)
@ret = @sock.write("y")
puts @ret.to_s
puts @sock.read(1)
sleep(1)

@sock.close 
```

在 C 中打开、写入和读取套接字对我来说没有问题，而且我已经在我的应用程序中做了很多，所以我已经有了简单的函数来做这些事情。我的问题是我应该向套接字写入哪些字符串来模拟假设在我在提示符下键入内容后按下回车键？"\n" 或 "\x0a" 不工作。或者我可以使用一个 linux C 库来让这种方式对我来说更容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:28:10.723

您绝对可以阅读 telnet 协议，但请查看下面链接底部的答案，其中涉及使用 WireShark 实际查看来回飞行的内容。

[http://www.codeproject.com/Questions/147555/Telnet-client-using-TCP](http://www.codeproject.com/Questions/147555/Telnet-client-using-TCP)

如果您从未使用过数据包嗅探器，那么它非常有启发性（就像对我一样）。以下是我通过 TCP 套接字连接进行 telnet 的步骤。

(1) 按照上述链接中的说明捕获网络上的流量，同时准确执行您希望使用所需应用程序/脚本最终执行的命令，从创建 telnet 连接开始，到关闭它结束

(2) 停止捕获会话后，您可能会在捕获的过程中看到同时在您的网络上发生的许多其他流量，因此请使用 ip.addr == xxx.xxx.xxx.xxx 将其过滤掉，其中你当然使用远程计算机的IP地址

(3) 现在，当您查看在您的计算机和远程计算机之间来回传输的所有内容时，您可以看到应用程序如何为每条消息分离出不同的通信层。您要特别注意带有“Telnet”协议的消息，这意味着它是最高层。当您在 WireShark 窗口的最顶部窗格中突出显示一条消息时，您会在第二个窗格中看到它如何将该消息分成不同的层。在第二个窗格中，如果您突出显示 Telnet 层，您可以看到在第三个窗格中，实现 telnet 协议的消息字节如何被突出显示。花一些时间来分析回传的消息。你可以更直接地看到，

(4) 现在您只想在应用程序中基本模拟您可以在 Wireshark 中看到的通信。请记住，由于您在应用程序中打开 TCP 套接字，因此您的应用程序在幕后处理所有 TCP 和下行通信内容，因此您只需担心将 telnet 字节/数据/命令读/写到 TCP 套接字.

这种方法根本不需要很长时间，并且不需要在您的系统上添加任何额外的东西，如果您正在处理系统资源有限/非常简单的操作系统/根本没有操作系统的设备，这非常棒。例如，我设备上的 mini Linux 系统没有安装 Expect，也没有简单的安装方法。我的意思是它可以做到，但我们在这里谈论非常烦人的东西。此外，即使在盒子上安装东西的方式不太疯狂，我已经有 50 个在我已经设置为自动更新到我肯定放在服务器上的任何新二进制文件的字段中，但他们并不期望还必须从我的服务器下载脚本。同样，他们没有安装允许他们运行该脚本的操作系统。所以我们在这里谈论的是相对较低级别的东西，保持简单不是一种选择，而是一种要求。我的最终 C 函数让我的串行设备服务器 telnet 到自己（访问自己的命令行界面的唯一方法——这是制造商的选择）并向自己发出必要的命令，如下所示：

```
turnoff_watchdog
{
  // telnetsock, TCP socket to 127.0.0.1 at port 23, has already been set previously

  char negotiation_1[] = {0xFF,0xFC,0X18,0xFF,0xFC,0x20,0xFF,0xFC,0x23,0xFF,0xFC,0x27,0xFF,0xFD,0x03};
  char negotiation_2[] = {0xFF,0xFC,0x01,0xFF,0xFC,0x1F,0xFF,0xFE,0x05,0xFF,0xFB,0x21};
  char telnet_login_name[] = "admin\r\n";
  char telnet_login_password[] = "password\r\n";
  char set_command[] = "set watchdog off\r\n";
  char save_command[] = "save\r\n";
  char confirm[] = "y\n";
  char escape[] = {0x5E,0x5D,0x0A}; // ^]
  char quit[] = "quit\n";

  sleep(2);
  write(telnetsock,&negotiation_1[0],15);
  sleep(2);
  write(telnetsock,&negotiation_2[0],12);
  sleep(2);
  write(telnetsock,&telnet_login_name[0],7);
  sleep(2);
  write(telnetsock,&telnet_login_password[0],10);
  sleep(2);
  write(telnetsock,&set_command[0],18);
  sleep(2);
  write(telnetsock,&save_command[0],6);
  sleep(2);
  write(telnetsock,&confirm[0],2);
  sleep(2);
  write(telnetsock,&escape[0],3);
  sleep(2);
  write(telnetsock,&quit[0],5);
  sleep(2);

  return(0);
} 
```

就那么简单。最困难的部分是原始（我使用 Wireshark 捕获的）telnet 协商要长一些，但在查看了正在协商的选项后，我意识到我不需要大部分，所以我砍了大幅下降。顺便说一句，如果你被字节吓倒了，不要害怕。没什么大不了的。你看到如何在`negotiation_1`和`negotiation_2` above, 0xFF keeps popping up every 3 bytes? Well all those two negotiations are are strings of commands/negotiations each 3 bytes in length starting with 0xFF, trying to communicate what it will and won't do during the telnet session. And the second byte in each chunk of 3 bytes (either 0xFB, 0xFC, 0xFD or 0xFE) is just communicating whether it WILL or WON'T do something or whether it wants the other guy to DO or DON'T something. The last byte is just the option each is willing or not willing to do or going to do or not do. You'll see it in Wireshark how it all gets broken down. It's actually pretty funny the language of it. I didn't include the lines I originally had where I was reading the socket to see the responses to the negotiations (which I had done all that testing and stuff in ruby since I could just run it in irb super easy), but you must do that and basically just negotiate as little as you can until you get sent the login prompt and then as you can see it's super straightforward. Make sure in testing to determine the first negotiation you will write to the socket, that when you open the socket, you read in whatever telnet control sequences are sent FIRST. Then you only want to respond to those sequences--mostly in the negative to reduce the amount of negotiation. Have fun!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T03:05:34.577

你问了一个 C 问题但你发布了脚本，如果你想知道 telnet 是如何工作的，请阅读 RFC。在这种情况下 854

[https://www.rfc-editor.org/rfc/rfc854](https://www.rfc-editor.org/rfc/rfc854)

# c# - 从大量的 dll 中创建一个巨大的库并单独使用它

> ID：12681901
> 
> 赞同：1
> 
> 时间：2012-10-01T22:17:03.480
> 
> 标签：c#, dll, shared-libraries

目前我在 C# 程序中使用*[数学内核库](http://software.intel.com/en-us/intel-mkl)*dll **mkl_rt.dll**中可用的一些函数，所以我有

```
using mkl;

namespace mklDirect
{
    int LAPACK_ROW_MAJOR = 101;
    int LAPACK_COL_MAJOR = 102;
    int n, m, lda;
    n = 3;m = 3;
    lda = n;
    int ldu = m;
    int ldvt = n;
    Double[] superb = new Double[m - 1];
    Double[] s = new Double[n];
    Double[] u = new Double[n * n];
    Double[] vt = new Double[n * n];
    Double[] A = new Double[9]
    {
                         8.79,  9.93,  9.83,
                         6.11,  6.91,  5.04,
                         -9.15, -7.93, 4.86
     };
     Char a1 = 'A';
     Char a2 = 'A';
     int mat_order = LAPACK_ROW_MAJOR;
     int info = 0;
     double[] work1 = new double[1];
     MKLImports.LAPACKE_dgesvd(mat_order, a1, a2, m, n, A, lda, s, u, ldu, vt, ldvt, superb);

     //PRINT RESULT

}  

namespace mkl
{
        internal sealed class MKLImports
        {
            private  MKLImports()
            {                 
            }

        [DllImport("mkl_rt.dll", ExactSpelling = true, SetLastError = false, CallingConvention = CallingConvention.Cdecl)]
            internal static extern void LAPACKE_dgesvd(
                  int matrix_order,
                  char a1,
                  char a2,
                  int m,
                  int n,
                 [In, Out] double[] input_matrix,
                  int lda,
                 [In, Out] double[] s,
                 [In, Out] double[] u,
                  int ldu,
                 [In, Out] double[] vt,
                  int ldvt,
                  double[] superb
          );
        }
} 
```

我想继续在命名空间 mkl 中添加函数，然后在另一个文件中使用这些函数。我不知道这是否会产生副作用或最好的方法是什么。在我加载 dll 的代码中，从 mkl 和其他 dll 创建一个巨大的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:31:27.120

你只是想创建一个互操作文件吗？有一些方法可以为您生成完整的互操作文件，这些文件将自动生成此类代码供您随意使用。

[http://msdn.microsoft.com/en-us/library/tw4zwhbe.aspx](http://msdn.microsoft.com/en-us/library/tw4zwhbe.aspx)

[http://msdn.microsoft.com/en-us/library/aa302338.aspx](http://msdn.microsoft.com/en-us/library/aa302338.aspx)

[http://msdn.microsoft.com/en-us/library/1w557csx.aspx](http://msdn.microsoft.com/en-us/library/1w557csx.aspx)

# macos - NSImage 的问题在 Retina Display 中添加表示

> ID：12681902
> 
> 赞同：2
> 
> 时间：2012-10-01T22:17:07.067
> 
> 标签：macos, nsimage, retina-display

我有两个 CGImageRef，imgRef1 和 imgRef2。我想用这些 CGImageRefs 的两个表示创建一个 NSImage（用于创建 NSCursor）。为此，我使用了 BitMapRepresentation initWithCGImage 方法，然后将这些表示添加到 NSImage。但这不起作用。

然后我尝试从 imageRef1 和 imgRef2 创建 NSImage，然后使用 TiffRepresentation 从这些 NSImage 生成 NSData，然后添加这些表示以最终获得 NSImage。但这又在视网膜显示器中提供了低分辨率图像。这是示例代码：（任何帮助将不胜感激）

浮动 aHotSpotX = (float)nHotSpotX; 浮动 aHotSpotY = (float)nHotSpotY;

```
NSSize nsSz;
nsSz.width = CGImageGetWidth(nLowImageRef);
nsSz.height = CGImageGetHeight(nLowImageRef);

NSImage* image = [[NSImage alloc] initWithSize:nsSz];

// Could have directly used NSBitmapImage initWithCGImage but some issues with that. Will revisit
NSImage *lImage = CreateNSImageFromCGImage(nLowImageRef);
NSData *lowData = [lImage TIFFRepresentation];

NSBitmapImageRep *lowRep = [NSBitmapImageRep imageRepWithData:lowData];
[image addRepresentation:lowRep];

NSImage  *hImage = CreateNSImageFromCGImage(nHiImageRef);
NSData *hiData = [hImage    TIFFRepresentation];

NSBitmapImageRep *hiRep = [NSBitmapImageRep imageRepWithData:hiData];
[image addRepresentation:hiRep];

NSCursor*   aCursor = [[NSCursor alloc] initWithImage:image hotSpot:NSMakePoint(aHotSpotX, aHotSpotY)];

[image release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:18:23.930

您需要颠倒顺序。我的测试表明，高分辨率图像需要位于 TIFF 的索引 0 处，而较低分辨率图像需要位于索引 1 处。

# javascript - EXTjs 中的 sortColumn 和多个有状态网格的问题

> ID：12681906
> 
> 赞同：0
> 
> 时间：2012-10-01T22:17:18.573
> 
> 标签：javascript, extjs, extjs3

我最近在 ExtJs 3.x 中切换到有状态网格——我正在使用 OOTB CookieProvider 进行状态管理。

我遇到的问题是从网格移动到网格时（每个网格在同一站点内的唯一 URL）如果我呈现第一个网格并应用排序..当我单击访问加载的第二个网格时会找到 sortColumn第一个网格并导致错误..

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:27:46.077

设置一个唯一的-stateId：每个网格的属性可以解决这个问题-

# mysql - 具有限制和偏移量的 MySQL 查询运行速度非常慢

> ID：12681907
> 
> 赞同：0
> 
> 时间：2012-10-01T22:17:20.343
> 
> 标签：mysql, database, performance, query-performance

> **可能重复：**
> [具有限制和大偏移量的 MySQL 查询永远占用](https://stackoverflow.com/questions/12680738/mysql-query-with-limit-and-large-offset-taking-forever)

我的表包含 25,000 行，我使用分页来显示页面上的所有行。如果我的页面限制设置为每页 10 行，那么每页显示速度非常快。但是，如果我将页面限制大小更改为每页 250 行，则加载表（显示记录）需要 30 秒到 1 分钟。我使用的查询是这样的：

```
SELECT SQL_CALC_FOUND_ROWS Merchants.*, DataSources.DsISOName, PrName
FROM Merchants 
INNER JOIN DataSources ON MDsID=DsID 
INNER JOIN Processors ON PrID = DsType
ORDER BY MDBA LIMIT 0, 250 
```

这是我首先加载页面时得到的。如果我更改页面，限制数字 0、250 会发生变化，所以如果我访问第 2 页，限制将更改为：

```
 LIMIT 250, 500 
```

如果有人可以看到我的查询有问题，请告诉我。我不明白为什么在每页获取 250 行时加载表需要 1 分钟。在 mysql 表上，我尝试在各种 ID 上使用索引，但速度仍然相同。

# teamcity - 是否可以在“运行自定义构建”上自动化 TeamCity Pin 功能

> ID：12681908
> 
> 赞同：2
> 
> 时间：2012-10-01T22:17:31.520
> 
> 标签：teamcity

如果我运行自定义构建并将其中一个标志设置为 true，我将使用 TeamCity 和构建步骤将某个构建标记到 SVN 中。

但是，在此构建完成后，我想自动化 TeamCity 以固定刚刚创建的自定义构建。这可能吗？我已经阅读了有关 REST API 的信息，但我不确定它是否是解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T22:16:23.403

我通过使用 REST API 而不是使用插件来解决这个问题。

通过使用自定义脚本字段创建命令行构建步骤，您可以使用 cURL 有效地固定构建。固定已经运行的构建可能需要进行一些修改。

这个 curl 调用固定构建：

```
curl -v --request PUT %teamcity.serverUrl%/httpAuth/app/rest/builds/id:%teamcity.build.id%/pin -u "TCuser:TCpass" 
```

此 curl 调用添加/编辑特定构建的标签：

```
curl -v -H "Content-Type:text/plain" -d "Deliverable" %teamcity.serverUrl%/httpAuth/app/rest/builds/id:%teamcity.build.id%/tags -u "TCuser:TCpass" 
```

此外，您应该确保在构建代理上安装/放置一个 curl 可执行文件，以便您可以将 curl 作为命令行工具调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T03:40:18.800

REST 是不编写 Java 代码的唯一方法。或者您可以编写一个插件来侦听 buildFinished 事件并在它具有特定属性时固定构建。

# objective-c - 在所有视图顶部显示位置服务警报

> ID：12681909
> 
> 赞同：0
> 
> 时间：2012-10-01T22:17:45.973
> 
> 标签：objective-c, location, mbprogresshud

`progressHUD`我的应用程序首先在带有窗口的初始图像上加载文件。在`appDelegate`我检查位置服务是否打开，如果它打开所以没问题，完成加载后，`progressHUD`消失，但如果用户收到请求位置服务权限的警报，它出现在`progressHUD`窗户后面，我无法取消/确定它而应用程序正在加载。

我怎样才能始终在所有其他视图之上显示此警报，特别是在启动时乞求`progressHUD`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:27:01.027

您使用的是哪种 HUD 控件？

我个人使用`SVProgressHUD`的是非常酷且完整的……但有一个缺点：它创建了自己`UIWindow`的 HUD 以在所有内容之上显示 HUD。Apple 不推荐这种行为，并且正如您刚刚意识到的那样，当系统创建自己的`UIWindows`特别是 display时，这种行为不起作用`UIAlertViews`。

我使用的解决方案是修改`SVProgressHUD`以将自身添加到应用程序的顶部`window.rootViewController.view`，以便它保持在所有内容的顶部……在它自己的主窗口中，让诸如`UIAlertViews`显示在其顶部的私有窗口之类的东西，因此`UIAlertViews`即使您的 progressHUD 可见，也可以让您与之交互。

* * *

*（如果您不使用`SVProgressHUD`，则您使用的另一个类可能确实存在相同的问题，因此请检查该类）*

我应该发布一个拉取请求，`SVProgressHUD`但还没有时间。如果我不忘记的话，可能很快就会这样做；）

# c - 如何将 IplImage 转换为标准 Web 图像格式以在 url 中显示？

> ID：12681912
> 
> 赞同：-1
> 
> 时间：2012-10-01T22:18:01.513
> 
> 标签：c, opencv

所以我了解套接字编程的基础知识，但是当我转到 localhost:8888 时得到的是不可读的字符串，而不是视频或图像帧。我想知道是否有人对如何在我的端口上显示图像而不是字符串有任何指示。我的代码如下：

```
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void* streamServer(void* arg);
void  quit(char* msg, int retval);

int main(int argc, char** argv)
{
    pthread_t   thread_s;
    int         key;

    if (argc == 2) {
        capture = cvCaptureFromFile(argv[1]);
    } else {
        capture = cvCaptureFromCAM(0);
    }

    if (!capture) {
        quit("cvCapture failed", 1);
    }

    img0 = cvQueryFrame(capture);
    img1 = cvCreateImage(cvGetSize(img0), IPL_DEPTH_8U, 1);

    cvZero(img1);
    cvNamedWindow("stream_server", CV_WINDOW_AUTOSIZE);

    /* print the width and height of the frame, needed by the client */
    fprintf(stdout, "width:  %d\nheight: %d\n\n", img0->width, img0->height);
    fprintf(stdout, "Press 'q' to quit.\n\n");

    /* run the streaming server as a separate thread */
    if (pthread_create(&thread_s, NULL, streamServer, NULL)) {
        quit("pthread_create failed.", 1);
    }

    while(key != 'q') {
        /* get a frame from camera */
        img0 = cvQueryFrame(capture);
        if (!img0) break;

        img0->origin = 0;
        cvFlip(img0, img0, 1); //-1);

        /**
         * convert to grayscale
         * note that the grayscaled image is the image to be sent to the client
         * so we enclose it with pthread_mutex_lock to make it thread safe
         */
        pthread_mutex_lock(&mutex);
        cvCvtColor(img0, img1, CV_BGR2GRAY);
        is_data_ready = 1;
        pthread_mutex_unlock(&mutex);

        /* also display the video here on server */
        cvShowImage("stream_server", img0);
        key = cvWaitKey(30);
    }

    /* user has pressed 'q', terminate the streaming server */
    if (pthread_cancel(thread_s)) {
        quit("pthread_cancel failed.", 1);
    }

    /* free memory */
    cvDestroyWindow("stream_server");
    quit(NULL, 0);
}

/**
 * This is the streaming server, run as a separate thread
 * This function waits for a client to connect, and send the grayscaled images
 */
void* streamServer(void* arg)
{
    struct sockaddr_in server;

    /* make this thread cancellable using pthread_cancel() */
    pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, NULL);
    pthread_setcanceltype(PTHREAD_CANCEL_ASYNCHRONOUS, NULL);

    /* open socket */
    if ((serversock = socket(PF_INET, SOCK_STREAM, 0)) == -1) {
        quit("socket() failed", 1);
    }

    /* setup server's IP and port */
    memset(&server, 0, sizeof(server));
    server.sin_family = AF_INET;
    server.sin_port = htons(PORT);
    server.sin_addr.s_addr = INADDR_ANY;

    /* bind the socket */
    if (bind(serversock, (const void*)&server, sizeof(server)) == -1) {
        quit("bind() failed", 1);
    }

    /* wait for connection */
    if (listen(serversock, 10) == -1) {
        quit("listen() failed.", 1);
    }

    /* accept a client */
    if ((clientsock = accept(serversock, NULL, NULL)) == -1) {
        quit("accept() failed", 1);
    }

    /* the size of the data to be sent */
    int imgsize = img1->imageSize;
    int bytes, i;

    /* start sending images */
    while(1)
    {
        /* send the grayscaled frame, thread safe */
        pthread_mutex_lock(&mutex);
        if (is_data_ready) {
            bytes = send(clientsock, img1->imageData, imgsize, 0);
            is_data_ready = 0;
        }
        pthread_mutex_unlock(&mutex);

        /* if something went wrong, restart the connection */
        if (bytes != imgsize) {
            fprintf(stderr, "Connection closed.\n");
            close(clientsock);

            if ((clientsock = accept(serversock, NULL, NULL)) == -1) {
                quit("accept() failed", 1);
            }
        } 
```

整个代码： http: [//pastebin.com/jnuZhx8C](http://pastebin.com/jnuZhx8C)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:21:31.967

除非 img1->imageData 是浏览器应该识别的格式（png、jpg、gif），否则您应该期待无法识别的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:07:33.793

在我们进入技术细节之前，问自己一个问题：**什么是`standard web image format`？**

在您看来，会是 PNG 吗？JPG？TIFF？骨肉瘤？动图？所有这些？

**像这样的图像格式存储的不仅仅是像素**。如果你看一下[PNG 的规范](http://www.libpng.org/pub/png/spec/1.2/PNG-Structure.html)，你会发现它除了像素之外还存储了很多关于图像的[信息。](http://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header)

问题是，当您通过网络仅发送像素时，就像您现在正在做的那样，无论是谁在连接的另一端接收数据，都无法对它做任何有用的事情，因为它甚至不知道尺寸是多少的图像。

我们需要澄清的另一个误解是：**没有`display images on my port rather than strings`**. [什么是端口？](https://stackoverflow.com/a/5378439/176769)

跨网络传输数据是一回事。在连接的另一端对数据做一些有用的事情（比如在屏幕上显示）是一项完全不同的任务。

**如果您需要一个**关于如何完成这些任务的实际示例，我建议您看看这个很棒的教程：[通过网络流式传输 OpenCV 视频](http://nashruddin.com/StrEAMinG_oPENcv_vIdEos_ovER_tHe_nEtWoRk)。我刚刚注意到您问题中的代码来自那里，因此请**特别注意 section** `4\. Implementation of the Client-side`。

# php - 将变量和字符串转换为日期时间格式

> ID：12681915
> 
> 赞同：0
> 
> 时间：2012-10-01T22:18:17.390
> 
> 标签：php, mysql

我目前有以下变量和格式化数据：

*   Scheduling_StartDate_Month = 10
*   Scheduling_StartDate_Day = 1
*   Scheduling_StartDate_Year = 2012
*   Scheduling_StartTime = 3:00 PM

我需要将它们组合成一个“日期时间”类型的变量“schedstart”以插入到我的数据库中，我完全迷路了。我试图研究这些问题，并找到了使用 mktime() 或 sttodate() 的建议，但我找不到任何可靠的语法指南。

如何使用 PHP 组合这些变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T22:27:20.020

您可以使用以下使用[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)和[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)功能：

```
select 
  str_to_date(
    concat(Scheduling_StartDate_Year,'-',
          Scheduling_StartDate_Month, '-',
          Scheduling_StartDate_Day, ' ',
          Scheduling_StartTime), '%Y-%m-%d %h:%i') as yourDate
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d80df/5)

结果：

```
yourDate
2012-10-01 03:00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T22:29:26.513

您可以考虑在 PHP 上以适当的格式连接：

```
<?php

$dateString = $Scheduling_StartDate_Month."/".$Scheduling_StartDate_Day."/".$Scheduling_StartDate_Year." ".$Scheduling_StartTime;
$result = mysql_query("SELECT STR_TO_DATE('".$dateString."', '%m/%d/%Y %h:%i %p')");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T22:35:21.333

我不知道你到底为什么要在 SQL 中执行此操作，而在 PHP 中非常容易做到这一点。

（通常最好在 SQL 服务器上施加尽可能小的压力，因为这通常是瓶颈，另外，`CONCAT`在 SQL 中拼凑起来更难看）

MySQL 日期本质上只是以特定方式格式化的字符串。例如`2008-12-31 23:59:59`

因此，只需将您不同的日期片段并将它们填充在一起，使它们看起来像那样，然后在您的 SQL 查询中随意使用它（将其放在单引号中）。

有关更多详细信息，请参阅[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

最简单的方法可能如下所示：

```
$mysql_formatted_date = date('Y-m-d H:i:s', strtotime("Scheduling_StartDate_Year-$Scheduling_StartDate_Month-$Scheduling_StartDate_Day $Scheduling_StartTime")); 
```

即，让`strtotime`解析出您的日期并处理将 am/pm 转换为 24 小时制，然后用于`date`强制将其转换为正确的格式。

```
mysql_query("SELECT '$mysql_formatted_date' ..."); 
```

# php - Yii 表关系

> ID：12681917
> 
> 赞同：1
> 
> 时间：2012-10-01T22:18:24.727
> 
> 标签：php, activerecord, yii

我对 Yii 真的很陌生。我有 3 张桌子：

1.  供应商（sid，sname）//pk -> sid，
2.  Products(pid, pname) //pk -> pid,
3.  IncomingProducts(pid, sid, qty) //pk -> (pid, sid)

我想在表中形成一个关系，`IncomingProducts`以便我可以一次检索以下信息：（pname，sname，qty）。

所有这些信息都应该基于表格`IncomingProducts`。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:22:58.460

IncomingProducts 必须包含 id->pk 字段，因为它可以包含许多具有相同 (pid, sid) 对的记录。

并且任何记录（id、pid、sid、qty）都有一个供应商和一个产品，所以 IncomingProducts 模型的关系是：

```
public function relations()
{
    return array(
        'supplier' => array(self::HAS_ONE, 'Suppliers', array('sid'=>'sid')),
        'product' => array(self::HAS_ONE, 'Products', array('pid'=>'pid')),
    );
} 
```

不确定 FK - `array('sid'=>'sid')`，但认为`'sid'`不应该工作（您需要指定包含 'Supliers.sid' 的 'IncomingProducts' 的键）。关于使用'fk'=>'pk'关系你可以在这里阅读：[http ://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail)

您可以获取与供应商模型中的关系的任何供应商的所有传入产品：

```
public function relations()
{
    return array(
        'incoming' => array(self::HAS_MANY, 'IncomingProducts', 'sid'),
    );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:35:47.443

我假设供应商和产品之间存在多对多的关系。在 IncomingProducts 中，您可以定义如下关系，

```
public function relations()
{
    return array(
        'suppliers' => array(self::HAS_MANY, 'Suppliers', 'sid'),
        'products' => array(self::HAS_MANY, 'Products', 'pid'),
    );
} 
```

[你可以在这里](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)阅读更多关于 Yii 的关系活动记录

# mysql - WordPress 开发周期

> ID：12681919
> 
> 赞同：0
> 
> 时间：2012-10-01T22:18:27.990
> 
> 标签：mysql, wordpress, beta

我已经建立了一个 WordPress 网站。我已经聘请了一名开发人员来处理它。我的开发人员在我的测试版网站上工作。我无法让他访问实时站点的管理员或 SQL 后端。

一旦开发人员完成了合同规定的工作，我不知道如何将他的更改合并到我的实时站点中。

简单地复制所有 SQL 表和文件不是一种选择。单独复制文件没有问题，但数据库会略有不同，特别是用户表和引用完整性取决于用户表的表。

我从哪里开始学习这方面的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:29:50.440

您可以查看[BackupBuddy](http://ithemes.com/purchase/backupbuddy/)，我们一直在这里使用它，它非常适合仅从 wordpress 管理员和 site.com/importbuddy.php 复制文件/数据库。[WPTwin](http://wptwin.com/)也很好，它更容易使用，但也没有那么彻底

# java - 不同类型单元的抽象类

> ID：12681920
> 
> 赞同：4
> 
> 时间：2012-10-01T22:18:31.513
> 
> 标签：java, enums, abstract, units-of-measurement

我有不同的类代表不同的单位（体积、重量、距离），带有一个枚举值，用于将转换值存储到基本类型。

问题是有很多代码重复，我确信有一种优雅的方法可以编写一个可以避免它的抽象类。我不知道我应该如何声明这个类。这是卷类：

```
import java.math.BigDecimal;

import lombok.Data;

@Data
public class Volume {

public enum Unit
{
    CUBIC_METER(new BigDecimal("1")), // CUBIC_METER
    // 1 m3 = 61023.7 inch3
    CUBIC_INCH(new BigDecimal("61023.7"));
    private Unit(BigDecimal m3Value)
    {
        this.m3Value = m3Value;
    }

    public final BigDecimal m3Value;
}
// internally, we store the volume in m3
private final   BigDecimal  volumeInM3;

public Volume()
{
    volumeInM3 = BigDecimal.ZERO;
}

public Volume(final String volumeValue, final Unit volumeUnit)
{
    this(new BigDecimal(volumeValue), volumeUnit);
}

public Volume(final BigDecimal volumeValue, final Unit volumeUnit)
{
    if (volumeValue.signum() == 0)
    {
        volumeInM3 = BigDecimal.ZERO;
    }
    else
    {
        volumeInM3 = volumeValue.divide(volumeUnit.m3Value, NumberUtil.MC);
    }
}

/**
 * Return the volume in the unit given in param
 * @param volumeUnit
 * @return
 */
public BigDecimal getAs(final Unit volumeUnit)
{
    return volumeInM3.multiply(volumeUnit.m3Value, NumberUtil.MC);
}

public Volume add(final Volume volumeToAdd)
{
    BigDecimal newVolumeValue = volumeToAdd.volumeInM3.add(volumeInM3, NumberUtil.MC);
    return new Volume(newVolumeValue, Volume.Unit.CUBIC_METER);
}

public Volume divide(final Volume divisor)
{
    BigDecimal newVolumeValue = volumeInM3.divide(divisor.volumeInM3, NumberUtil.MC);
    return new Volume(newVolumeValue, Volume.Unit.CUBIC_METER);
}

public boolean isZero()
{
    if (volumeInM3.signum() == 0)
        return true;
    return false;
}

public boolean isEqual(final Volume another)
{
    if (volumeInM3.compareTo(another.volumeInM3) == 0)
        return true;
    return false;
}
} 
```

这是非常相似的重量类：

```
import java.math.BigDecimal;

import lombok.Data;

@Data
public class Weight {

// the value stored with enum is the value used to convert the unit to kilogramm, 
// wich is the reference unit
public enum Unit
{
    KILOGRAM(new BigDecimal("1")),
    // 1 kg = 1000 g 
    GRAM(new BigDecimal("1000")),
    // 1 kg = 2.20462 pounds
    POUND(new BigDecimal("2.20462"));

    private Unit(BigDecimal kgValue)
    {
        this.kgValue = kgValue;
    }

    private final BigDecimal kgValue;
}

// internally, we store the weight inKg
private final BigDecimal weightInKg;

public Weight()
{
    weightInKg = BigDecimal.ZERO;
}

public Weight(final String weightValue, final Unit weightUnit)
{
    this(new BigDecimal(weightValue), weightUnit);
}

public Weight(final BigDecimal weightValue, final Unit weightUnit)
{
    if (weightValue.signum() == 0)
    {
        weightInKg = BigDecimal.ZERO;
    }
    else
    {
        weightInKg = weightValue.divide(weightUnit.kgValue, NumberUtil.MC);
    }
}

/**
 * Return the weight in the unit given in param
 * @param weightUnit
 * @return
 */
public BigDecimal getAs(final Unit weightUnit)
{
    return weightInKg.multiply(weightUnit.kgValue, NumberUtil.MC);
}

public Weight add(final Weight weightToAdd)
{
    BigDecimal newWeightValue = weightToAdd.weightInKg.add(weightInKg, NumberUtil.MC);
    return new Weight(newWeightValue, Weight.Unit.KILOGRAM);
}

public Weight divide(final Weight divisor)
{
    BigDecimal newWeightValue = weightInKg.divide(divisor.weightInKg, NumberUtil.MC);
    return new Weight(newWeightValue, Weight.Unit.KILOGRAM);
}
public boolean isZero()
{
    if (weightInKg.signum() == 0)
        return true;
    return false;
}

public boolean isEqual(final Weight another)
{
    if (weightInKg.compareTo(another.weightInKg) == 0)
        return true;
    return false;
}
} 
```

当实例化一个卷时，用户被迫明确地提供单位。

```
Volume myCubicMeter, myCubicInch;
myCubicMeter = new Volume("1", Volume.Unit.CUBIC_METER);
myCubicInch = new Volume("1", Volume.Unit.CUBIC_INCH); 
```

我想要实现的是一个抽象类，它将实现所有方法并强制子类用值实现枚举。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:40:53.800

在 Java 中，枚举是作为所提供类的子类的`Enum`类。

你不能给它们一个共同的抽象祖先，你也不能将它们子类化。如果您真的想保留从一组枚举中使用编译时间常数来引用您的单元的商品，那么您将无法做到这一点。

如果您放弃使用枚举并可能将它们声明为普通类，那么您可以像使用其他所有内容一样自由地进行操作，例如

```
class VolumeUnit extends AbstractUnit {
  public static final VolumeUnit CUBIC_METER = new VolumeUnit(params);
  ..

  VolumeUnit(..) {
    ..
  }
} 
```

# ios - 没有可见的@interface 声明选择器“deleteAllObjects”

> ID：12681927
> 
> 赞同：0
> 
> 时间：2012-10-01T22:19:11.047
> 
> 标签：ios, core-data

当我尝试删除 Mans CoreData 实体中的所有对象时出现此错误。

```
No visible @interface for 'CoreDataController' declares the selector 'deleteAllObjects:' 
```

这是由于我在我的 CoreDataController 类中调用它而发生的。

```
[self deleteAllObjects:@"Mans"]; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:27:04.397

您必须确保您的`CoreDataController`类提供了它实现的可见声明`deleteAllObjects`。在最新版本的 Xcode 中，同`@implementation`一块中的方法都应该对彼此可见。同样，在主 .m 文件中，有一个类扩展名；在那里声明的所有方法都将对文件中的方法可见。在旧版本的 Xcode 中，实现文件私有的任何方法也必须在那里声明。如果您的方法在类别中声明，则必须确保在引用之前导入类别标头。

# rabbitmq - Quartz 调度器和 RabbitMQ

> ID：12681929
> 
> 赞同：0
> 
> 时间：2012-10-01T22:19:13.027
> 
> 标签：rabbitmq, quartz-scheduler

有没有办法根据来自 RabbitMQ 的消息在 Quartz 中启动工作，并使消息的内容可用于工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:27:15.667

我不知道 RabbitMQ，但这是一个基本代码：

```
QueueingConsumer.Delivery delivery = consumer.nextDelivery();
String message = new String(delivery.getBody()); 
```

你像这样安排你的工作：

```
JobDetail job1 = newJob(MessageJob.class)
    .usingJobData("message", message)
    .build();

Trigger trigger = newTrigger()
    .startNow()
    .build(); 
```

在你里面`MessageJob`检索它：

```
public class MessageJob implements Job {

    @Override
    public void execute(final JobExecutionContext context) throws JobExecutionException {
        final String message = context.getJobDetail().getJobDataMap().getString("message");
        //...
    } 
```

请注意，您不能“*启动*”作业，您只能安排它在未来某个时间运行（在示例中它将尽快运行 - `startNow()`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-22T12:19:28.493

我不明白为什么不...您可以订阅 RabbitMQ 队列，当消息到达时您可以做任何事情，包括触发 Quartz.NET 作业。

# wpf - 标签值更改时如何为背景颜色设置动画

> ID：12681931
> 
> 赞同：2
> 
> 时间：2012-10-01T22:19:38.557
> 
> 标签：wpf, animation, mvvm, styles, datatrigger

我正在尝试获取一个标签以在其绑定的值发生更改时更改背景颜色。如果它上升，则暂时闪烁绿色。如果它下降，则暂时闪烁红色。

当我启动应用程序时，我遇到了这些问题：

*   大多数情况下，标签会对其颜色进行少量动画处理，然后停止并不再更改
*   有时标签只是移动到红色或绿色并停留在上面，无论输入值如何
*   如果出价下降，点差会增加，但所有 3 个标签都动画为相同的颜色（如果动画有效）

任何人都可以看看这有什么问题，并评论一个更好的方法来构建它吗？我想知道是否有更好的方法来确定价值是上升还是下降，而不需要 ViewModel 上的 6 个属性来进行出价、询价和价差？我还想知道它是否取决于非常频繁的值变化（比如每秒 5+）？

谢谢。

* * *

看法

```
<Window x:Class="TestApp.UI.View.QuoteView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="QuoteView" Height="300" Width="300">
    <Window.Resources>
        <Style x:Key="BidStyle">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=BidHigher}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Green" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=BidLower}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=AskHigher}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Green" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=AskLower}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=SpreadHigher}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Green" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
                <DataTrigger Binding="{Binding Path=SpreadLower}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.2" AutoReverse="True"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid>
        <Label Content="Bid" HorizontalAlignment="Left" Margin="21,10,0,0" VerticalAlignment="Top" />
        <Label Content="Ask" HorizontalAlignment="Left" Margin="19,53,0,0" VerticalAlignment="Top"/>
        <Label Content="Spread" HorizontalAlignment="Left" Margin="19,99,0,0" VerticalAlignment="Top"/>
        <Label x:Name="BidLabel" HorizontalAlignment="Left" Margin="102,10,0,0" VerticalAlignment="Top" Content="{Binding Path=Quote.Bid}" Style="{StaticResource ResourceKey=BidStyle}"/>
        <Label x:Name="AskLabel" HorizontalAlignment="Left" Margin="102,53,0,0" VerticalAlignment="Top" Content="{Binding Path=Quote.Ask}" Style="{StaticResource ResourceKey=BidStyle}"/>
        <Label x:Name="SpreadLabel" HorizontalAlignment="Left" Margin="102,99,0,0" VerticalAlignment="Top" Content="{Binding Path=Quote.BidAskSpread}" Style="{StaticResource ResourceKey=BidStyle}"/>
    </Grid>
</Window> 
```

* * *

视图模型

```
public class QuoteViewModel : ViewModelBase
{
    private readonly FakeDataGenerator _dataGenerator;
    private Quote _quote;
    private bool _bidHigher;
    private bool _bidLower;
    private bool _askHigher;
    private bool _askLower;
    private bool _spreadHigher;
    private bool _spreadLower;

    public QuoteViewModel()
    {
        _dataGenerator = new FakeDataGenerator();
        _dataGenerator.NewQuoteEvent += DataGeneratorOnNewQuoteEvent;
    }

    private void DataGeneratorOnNewQuoteEvent(Quote quote)
    {
        Quote = quote;
    }

    public Quote Quote
    {
        get { return _quote; }
        set 
        {
            if (_quote != value)
            {
                UpdateQuoteComparisons(_quote, value);
                _quote = value;
                OnPropertyChanged("Quote");
            }
        }
    }

    private void UpdateQuoteComparisons(Quote existingQuote, Quote newQuote)
    {
        if(existingQuote == null)
        {
            return;
        }

        if (newQuote.Bid > existingQuote.Bid)
        {
            BidHigher = true;
        }
        else if (newQuote.Bid < existingQuote.Bid)
        {
            BidLower = true;
        }

        if (newQuote.Ask > existingQuote.Ask)
        {
            AskHigher = true;
        }
        else if (newQuote.Ask < existingQuote.Ask)
        {
            AskLower = true;
        }

        if (newQuote.BidAskSpread > existingQuote.BidAskSpread)
        {
            SpreadHigher = true;
        }
        else if (newQuote.BidAskSpread < existingQuote.BidAskSpread)
        {
            SpreadLower = true;
        }
    }

    public bool BidHigher
    {
        get { return _bidHigher; }
        set
        {
            _bidHigher = value;
            OnPropertyChanged("BidHigher");
        }
    }

    public bool BidLower
    {
        get { return _bidLower; }
        set
        {
            _bidLower = value;
            OnPropertyChanged("BidLower");
        }
    }

    public bool AskHigher
    {
        get { return _askHigher; }
        set
        {
            _askHigher = value;
            OnPropertyChanged("AskHigher");
        }
    }

    public bool AskLower
    {
        get { return _askLower; }
        set
        {
            _askLower = value;
            OnPropertyChanged("AskLower");
        }
    }

    public bool SpreadHigher
    {
        get { return _spreadHigher; }
        set
        {
            _spreadHigher = value;
            OnPropertyChanged("SpreadHigher");
        }
    }

    public bool SpreadLower
    {
        get { return _spreadLower; }
        set
        {
            _spreadLower = value;
            OnPropertyChanged("SpreadLower");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:34:07.670

您可以尝试通过 DataTrigger.ExitActions 停止情节提要（您必须将现有的 BeginStoryboard 命名为）：

```
 <DataTrigger Binding="{Binding Path=SpreadLower}" Value="True">
            <DataTrigger.EnterActions>
                <BeginStoryboard Name="SpreadLowerStoryboard>
                    <Storyboard>
                        <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.2" AutoReverse="True"/>
                    </Storyboard>
                </BeginStoryboard>
            </DataTrigger.EnterActions>
            <DataTrigger.ExitActions>
                <StopStoryboard BeginStoryboardName="SpreadLowerStoryboard" />
            </DataTrigger.ExitActions>
        </DataTrigger> 
```

# java - 尝试使用 JAva 套接字传输文件时出现无限循环

> ID：12681932
> 
> 赞同：-1
> 
> 时间：2012-10-01T22:19:40.453
> 
> 标签：java, file, sockets, tcp, transfer

我正在尝试在 Java 中传输 XML 文件，但接收文件的客户端冻结在无限循环中，我不知道如何解决它。

* * *

## 我用来发送文件的代码是：

```
FileInputStream fileInputStream = new FileInputStream(new File("file.xml"));
byte[] buffer = new byte[socket.getSendBufferSize()];
int bytesRead = 0;
while((bytesRead = fileInputStream.read(buffer)) > 0)
{
    out.write(buffer, 0, bytesRead);
}
out.flush();
fileInputStream.close(); 
```

* * *

## 我用来接收文件的代码是：

```
byte[] mybytearray = new byte[1024];
File file = new File("file.xml");
FileOutputStream fileOutputStream= new FileOutputStream(file);
int bytesRead = 0;
while((bytesRead = in.read(mybytearray, 0, mybytearray.length)) > 0);
{
    fileOutputStream.write(mybytearray, 0, bytesRead);
}
fileOutputStream.close(); 
```

你可以帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T02:47:48.087

接收器不知道数据何时完成，因此接收器在从套接字读取数据时被阻塞，直到超时。两种解决方案：

1.  先发送大小并读取足够的数据（与大小相同），然后关闭跳出读取的套接字。

2.  xml文件发送完成后，发送一个EOF表示文件发送完毕，读取EOF时跳出。

# java - 如何检测用户是否更改了 JDateChooser 日期而不是设置日期属性的任何其他内容？

> ID：12681933
> 
> 赞同：3
> 
> 时间：2012-10-01T22:19:42.387
> 
> 标签：java, swing, netbeans, jdatechooser

我使用[JDateChooser](http://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html "日期选择器")编辑表单中的日期。

**简短版**：我需要区分JDateChooser 上的**用户日期编辑**和**编程属性更改。**

**解决方法**：我找到了一个名为[dateSelected](http://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html#dateSelected)的受保护 JDateChooser 属性，这正是我需要的（afaics 没有 getter），所以我可能必须创建自己的扩展 JDateChooser 类并为此属性创建一个 getter。这里的问题是我想让这个自定义版本可以从 Netbeans Palette 中拖动，而我的自定义 JDateChooser 不会。

**长版：** 首先我从数据库中获取日期，然后使用 JDateChooser 的 setDate() 方法在 GUI 中设置日期。当用户使用选择器选择新日期时，我想编辑数据库的日期。为此，我在 JDateChooser 对象上侦听 PropertyChange 事件（寻找“日期”更改）。在数据库中设置新日期后，我想刷新数据（我从数据库中获取整个记录）并从数据库中设置日期（如果有任何错误，它会被设置回数据库中的任何内容在这一刻）。

问题是，当我从数据库设置日期时，当用户更改日期时会触发相同的事件，然后我的“刷新”机制更新 JDateChooser 字段并且我得到无限循环。

**我现有的**（简化的）**代码**（netbeans）：

```
private void dataStartuChooserPropertyChange(java.beans.PropertyChangeEvent evt) {
    if ("date".equals(evt.getPropertyName())) {
        JDateChooser wybieraczDat = (JDateChooser) evt.getSource();
        updateDatabaseField(wybieraczDat.getDate());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:46:23.533

我会在这里回复自己，因为我犯了一种疯狂的做法（这可能毫无价值，但对我的需要来说很好）。我不会创建一个完整的工作示例，因为我没有时间。还有一些人可能会受益。

要检查日期是由用户选择还是在[JDateChooser](http://www.toedter.com/en/jcalendar/api/com/toedter/calendar/JDateChooser.html "见 javadoc")`PropertyChangeEvent`中以编程方式设置，我检查了名为. 在我做了任何需要的事情（修改数据库）之后，我将此字段设置回，因为否则即使日期再次以编程方式更改，它也会保留。示例（未优化，丑陋，仅用于演示我所做的）代码如下。`JDateChooser``dateSelected``false``true`

```
JDateChooser aDateChooserInstance = new JDateChooser();

// Listen for property changes
aDateChooserInstance.addPropertyChangeListener(new java.beans.PropertyChangeListener() {
    public void propertyChange(java.beans.PropertyChangeEvent evt) {
        // If the 'date' property was changed...
        if ("date".equals(evt.getPropertyName())) {
            JDateChooser aDateChooser = (JDateChooser) evt.getSource();
            boolean isDateSelectedByUser = false;
            // Get the otherwise unaccessible JDateChooser's 'dateSelected' field.
            try {
                // Get the desired field using reflection
                Field dateSelectedField = JDateChooser.class.getDeclaredField("dateSelected");
                // This line makes the value accesible (can be read and/or modified)
                dateSelectedField.setAccessible(true);
                isDateSelectedByUser = dateSelectedField.getBoolean(aDateChooser);
            } catch (Exception ignoreOrNot) {
            }

            // Do some important stuff depending on wether value was changed by user
            if (isDateSelectedByUser) {
                importantStuff();
            }

            // Reset the value to false
            try {
                Field dateSelectedField = JDateChooser.class.getDeclaredField("dateSelected");
                dateSelectedField.setAccessible(true);
                isDateSelectedByUser = dateSelectedField.setBoolean(aDateChooser, false);
            } catch (Exception ignoreOrNot) {
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T14:57:53.597

我看到这个问题已经得到了很长的回答，但我也想把我的方法留给研究。

我的方法是在日期选择器中获取 JTextField，然后获取它的文档，在其中连接一个事件，检查日期是否更改并且有效，然后调用用户指定的 lambda 表达式。

lambda的接口：

```
public interface IDateChooserChangedEvent {
    public void run(DocumentEvent evt);
} 
```

注册事件的函数。

```
public static void addDateChangedEvent(JDateChooser dt, IDateChooserChangedEvent evt) {
    ((JTextField)dt.getDateEditor()
            .getUiComponent())
                .getDocument()
                    .addDocumentListener(new DocumentListener() {
                        Date lastDate = dt.getDate();
                        @Override
                        public void insertUpdate(DocumentEvent e) {
                            if(dt.getDate != null && !dt.getDate().equals(lastDate)) {
                                SwingUtilities.invokeLater(()->
                                    evt.run(e));
                                lastDate = dt.getDate();
                            }
                        }
                        @Override
                        public void removeUpdate(DocumentEvent e) {
                        }
                        @Override
                        public void changedUpdate(DocumentEvent e) {
                        }
                    }); 
```

以及事件的 Lambda 样式注册。

```
addDateChangedEvent(myDate, (evt) -> {
        System.out.println("Date changed and is now "+new SimpleDateFormat("dd/MM/yyy").format(myDate.getDate())+"!");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T17:14:38.973

我正在使用 ActionListener

```
fr.getFirstDate().getCalendarButton().addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            fr.getSeconDate().setEnabled(true);
        }
    }); 
```

# git - git - default push to --recurse-submodules=check

> ID：12681936
> 
> 赞同：13
> 
> 时间：2012-10-01T22:19:47.940
> 
> 标签：git, git-submodules

I always forget to push submodules. Sometimes I forget to add `--recurse-submodules=check` to `git push`. Even worse, others on my team might do the same. Is there a `git config` option we can set to make `check` the default?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-01-05T15:52:19.110

Git v2.7.0 增加了对`push.recurseSubmodules`配置选项的支持。它可以设置为与`--recurse-submodules`命令行选项相同的值。例如：

```
git config push.recurseSubmodules check 
```

意味着后续调用`git push`将自动检查子模块是否已被推送。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-01T22:32:35.680

你可以试试给它起别名。

```
git config alias.ps "push --recurse-submodules=check" 
```

然后使用

```
git ps 
```

# java - 如何从字符串表示构造多项式，例如“x 3x^2 5x^3”..使用arrayList

> ID：12681937
> 
> 赞同：0
> 
> 时间：2012-10-01T22:20:02.467
> 
> 标签：java, data-structures, polynomial-math

如何从字符串表示构造多项式，例如“x + 3x^2 + 5x^3”.. 使用 arrayList

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T22:26:35.387

您将需要 Mononomial 和 Polynomial 类。

我会编写一个 PolynomialFactory 类，它知道如何正确解析字符串并返回一个多项式。

```
package model;

public class Monomial {
    private double coeff;
    private double expon;

    // You add the rest.
}

public class Polynomial {
    private List<Monomial> terms;

    // You add the rest
}

public class PolynomialFactory {
    public static Polynomial parse(String s) {
        // You add the rest
        Polynomial p = new Polynomial();

        return p;
    }
} 
```

或者只是找到一个图书馆，比如这个：

[http://www.ee.ucl.ac.uk/~mflanaga/java/Polynomial.html](http://www.ee.ucl.ac.uk/~mflanaga/java/Polynomial.html)

# apache - 使用 Apache 安装 CakePHP 2.2 403 错误

> ID：12681942
> 
> 赞同：1
> 
> 时间：2012-10-01T22:20:21.917
> 
> 标签：apache, cakephp, cakephp-2.2

因此，我逐字下载了最新版本的 CakePHP 并将其解压缩到目录中`/var/www/cake_2/`（Ubuntu 上的 Apache2）。当我尝试访问`localhost/cake/`时，我收到以下错误：

`You don't have permission to access /cake/ on this server.`

这似乎是一个类似的问题： [https ://serverfault.com/questions/70243/mod-rewrite-cakephp-routing-functionality-forbidden-after-snow-leopard-upgrade](https://serverfault.com/questions/70243/mod-rewrite-cakephp-routing-functionality-forbidden-after-snow-leopard-upgrade)

我已经添加了：

```
<Directory />
  Options FollowSymLinks
  AllowOverride All
  Order deny,allow
  Allow from all
</Directory> 
```

到我的`/etc/apache2/apache2.conf`文件并将 .htaccess 的内容更改`/var/www/cake/`为：

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine on
  RewriteRule    ^$ app/webroot/    [L]
  RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

我仍然遇到同样的错误。任何人都可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T05:07:35.170

检查 cake/.htaccess ， cake/app/webroor/.htaccess 在文件夹中。

然后在 cake 文件夹的终端中运行这些命令：

```
find . -type d -print0 | xargs -0 chmod 775
find . -type f -print0 | xargs -0 chmod 644 
```

第一行更改文件夹权限，第二行更改文件权限，则必须将 tmp 文件夹权限更改为 777。

# c - 在 C 中返回字符串。为什么会这样？

> ID：12681943
> 
> 赞同：3
> 
> 时间：2012-10-01T22:20:22.413
> 
> 标签：c, string, memory, parameter-passing

抱歉，如果这里已经发布了类似的内容，但我真的找不到。

我有以下代码，即使我会说这不正确，我也会收到正确的答案。

```
char *selectStr(int index){
    char *str[] = {
        "hello",
        "hola",
        "epa",
        "alright",
    };
    return str[index];
}

int main() {
    printf("String: %s\n", selectStr(2));
    return 0;
} 
```

谁能告诉我为什么这实际上有效？我看到它的方式：字符串数组`str`是 selectStr 函数内的局部变量。此函数返回包含在此数组中的字符串。但是由于这个字符串数组`str`是一个局部变量，它应该在它返回后从内存中清除（对吗？），所以我期待得到某种内存访问错误。

我应该认为自己很幸运这段代码可以工作（即这是一个未定义的行为吗？）或者这实际上是一种很好的做事方式（在这种情况下，为什么）？

我的猜测是，在函数返回后，指向数组的指针`str`会被清除，但它指向的实际内容不会被清除，它会一直保留在内存中，直到有其他内容写入它为止。如果有人能证实这一点，或者告诉我实际发生了什么，我将不胜感激。

提前致谢！

PS：我会这样做的方式是将缓冲区作为参数传递，但我只是想知道为什么，令人惊讶的是——至少对我来说——这确实有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T22:21:30.850

> 谁能告诉我为什么这实际上有效？

您假设这是未定义的行为，并且 UB 并不意味着“您的代码将以明显的方式崩溃或失败”，这意味着任何事情都可能发生。

在这种情况下，您可以设想用于存储本地的堆栈空间可能尚未被重用，并且可能仍包含原始值。它可能会在某些时候失败，但你不能*指望*它会以明显的方式失败。

但是，您没有在此处调用 UB，因为您正在返回指向静态分配的字符串文字的指针（并且可能存储在只读内存中，因此您确实应该返回 a `const char*`）。*数组*是本地的；*字符串*不是。

> PS：我会这样做的方式是将缓冲区作为参数传递......

您还可以在函数中使数组成为静态的。这是否是一个好主意取决于您的整体设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T22:22:50.973

字符串常量，例如“anything”，不存储在堆栈中。您的堆栈（在 selectStr() 中）包含一个指针数组，并且您正在返回一个指针，而不是堆栈上指针的地址。在这种情况下，您的指针将始终有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T23:18:37.147

这段代码是正确的。

```
char *str[] = {
    "hello",
    "hola",
    "epa",
    "alright",
}; 
```

这不会*创建*字符串数组。

*它创建一个指向字符串*的指针数组。字符串本身具有静态存储持续时间。指针数组具有自动存储持续时间。当函数返回时，指针数组变为禁区，但字符串仍然存在。

```
return str[index]; 
```

这将取消对数组的引用以检索指向其中一个字符串的指针，并返回该指针。 `str`超出范围，但指针仍指向静态存储中的字符串。

`str`标记为没有害处`static`。优化器可能已经这样做了。所以你可以写：

```
static char *str[] = {
    "hello",
    "hola",
    "epa",
    "alright",
}; 
```

如果这让你更舒服。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T22:45:59.100

> 我应该认为自己很幸运这段代码可以工作（即这是一个未定义的行为吗？）或者这实际上是一种很好的做事方式（在这种情况下，为什么）？

可能 =) 虽然，从你提出的论点来看，这很难说。出于所有意图和目的，它可能出于技术原因工作，但不是一个好主意。

我会在函数内部将数组设为静态，但如果这仍然让这里的人感到不安，为什么不增加范围呢？

```
static const char *str[] = {
    "hello",
    "hola",
    "epa",
    "alright"
};

const char *selectStr(int index){
    return str[index];
} 
```

当你在同一个文件中得到这个函数时，关于全局变量的程序设计考虑并没有真正考虑到它`main`。`selectStr`功能。不用担心。

我要做的唯一调整是将数组命名为比`str`.

# python - 反转 Python 整数的位

> ID：12681945
> 
> 赞同：36
> 
> 时间：2012-10-01T22:20:35.693
> 
> 标签：python, integer, bit-manipulation

给定一个十进制整数（例如 65），如何反转 Python 中的底层位？IE。以下操作：

```
65 → 01000001 → 10000010 → 130 
```

看来这个任务可以分解为三个步骤：

1.  将十进制整数转换为二进制表示
2.  反转位
3.  转换回十进制

第 2 步和第 3 步看起来很简单（请参阅与第 2 步相关的[这个](https://stackoverflow.com/questions/5333509/how-do-you-reverse-the-significant-bits-of-an-integer-in-python)和[这个](https://stackoverflow.com/questions/746171/best-algorithm-for-bit-reversal-from-msb-lsb-to-lsb-msb-in-c)SO 问题），但我被困在第 1 步。步骤 #1 的问题是检索完整的十进制表示并填充零（即 65 = 01000001，而不是 1000001）。

我四处寻找，但我似乎找不到任何东西。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-01T22:26:51.363

```
int('{:08b}'.format(n)[::-1], 2) 
```

您可以指定任何填充长度来代替 8。如果您想变得非常花哨，

```
b = '{:0{width}b}'.format(n, width=width)
int(b[::-1], 2) 
```

让您以编程方式指定宽度。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-04T08:04:32.627

如果你追求更快的速度，你可以使用 [http://leetcode.com/2011/08/reverse-bits.html中描述的技术](https://web.archive.org/web/20150226083354/http://leetcode.com/2011/08/reverse-bits.html)

```
def reverse_mask(x):
    x = ((x & 0x55555555) << 1) | ((x & 0xAAAAAAAA) >> 1)
    x = ((x & 0x33333333) << 2) | ((x & 0xCCCCCCCC) >> 2)
    x = ((x & 0x0F0F0F0F) << 4) | ((x & 0xF0F0F0F0) >> 4)
    x = ((x & 0x00FF00FF) << 8) | ((x & 0xFF00FF00) >> 8)
    x = ((x & 0x0000FFFF) << 16) | ((x & 0xFFFF0000) >> 16)
    return x 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-01T22:07:34.170

```
def reverse_bit(num):
    result = 0
    while num:
        result = (result << 1) + (num & 1)
        num >>= 1
    return result 
```

我们真的不需要将整数转换为二进制，因为整数在 Python 中实际上是二进制的。

反转的想法就像对整数进行空间反转。

```
def reverse_int(x):
    result = 0
    pos_x = abs(x)
    while pos_x:
        result = result * 10 + pos_x % 10
        pos_x /= 10
    return result if x >= 0 else (-1) * result 
```

对于每个循环，原始数字正在删除最右边的位（二进制）。当添加新位时，我们得到最右边的位并`<<1`在下一个循环中乘以 2 ( )。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-30T05:03:45.997

最好的方法是逐位执行

```
def reverse_Bits(n, no_of_bits):
    result = 0
    for i in range(no_of_bits):
        result <<= 1
        result |= n & 1
        n >>= 1
    return result
# for example we reverse 12 i.e 1100 which is 4 bits long
print(reverse_Bits(12,4)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T22:24:01.003

没有必要也没有办法“将十进制整数转换为二进制表示”。所有 Python 整数都表示为二进制；为方便起见，当您打印它们时，它们只是转换为十进制。

如果你想按照[这个解决方案](https://stackoverflow.com/a/5333563/166749)来解决反转问题，你只需要找到合适`numbits`的 . 您可以手动指定它，也可以计算表示整数所需的位数`n`（[`n.bit_length()`](https://docs.python.org/2/library/stdtypes.html#int.bit_length)Python 2.7 和 3.1 中的新功能）。

但是，对于 65，这会给你 7，因为没有理由 65 需要更多位。（您可能需要四舍五入到最接近的 8 倍数...）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-01-04T08:23:13.357

您可以使用移位和掩码测试数字的第 i 位。例如，65 的第 6 位是`(65 >> 6) & 1`. 您可以通过向右移动 1 的次数以类似的方式设置位。这些见解为您提供了这样的代码（在“n”位的字段中反转 x）。

```
def reverse(x, n):
    result = 0
    for i in xrange(n):
        if (x >> i) & 1: result |= 1 << (n - 1 - i)
    return result

print bin(reverse(65, 8)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-29T09:18:38.973

通常需要将此操作应用于**数字数组**而不是单个数字。为了提高速度，最好使用 NumPy 数组。有两种解决方案。

x1.34 比第二种解决方案快：

```
import numpy as np
def reverse_bits_faster(x):
  x = np.array(x)
  bits_num = x.dtype.itemsize * 8
  # because bitwise operations may change number of bits in numbers
  one_array = np.array([1], x.dtype)
  # switch bits in-place
  for i in range(int(bits_num / 2)):
    right_bit_mask = (one_array << i)[0]
    left_bit = (x & right_bit_mask) << (bits_num - 1 - i * 2)
    left_bit_mask = (one_array << (bits_num - 1 - i))[0]
    right_bit = (x & left_bit_mask) >> (bits_num - 1 - i * 2)
    moved_bits_mask = left_bit_mask | right_bit_mask
    x = x & (~moved_bits_mask) | left_bit | right_bit
  return x 
```

更慢，但更容易理解（基于[​​Sudip Ghimire 提出的解决方案](https://stackoverflow.com/a/50596723/10845719)）：

```
import numpy as np
def reverse_bits(x):
  x = np.array(x)
  bits_num = x.dtype.itemsize * 8
  x_reversed = np.zeros_like(x)
  for i in range(bits_num):
    x_reversed = (x_reversed << 1) | x & 1
    x >>= 1
  return x_reversed 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-10-27T00:17:35.040

一种在 Python 2.7 和 Python 3 中都有效的低效但简洁的方法：

```
def bit_reverse(i, n):
    return int(format(i, '0%db' % n)[::-1], 2) 
```

对于您的示例：

```
>>> bit_reverse(65, 8)
130 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-17T14:09:48.577

您还可以使用查找表（可以使用上述方法生成一次）：

```
LUT = [0, 128, 64, 192, 32, 160, 96, 224, 16, 144, 80, 208, 48, 176, 112, 240,
       8, 136, 72, 200, 40, 168, 104, 232, 24, 152, 88, 216, 56, 184, 120,
       248, 4, 132, 68, 196, 36, 164, 100, 228, 20, 148, 84, 212, 52, 180,
       116, 244, 12, 140, 76, 204, 44, 172, 108, 236, 28, 156, 92, 220, 60,
       188, 124, 252, 2, 130, 66, 194, 34, 162, 98, 226, 18, 146, 82, 210, 50,
       178, 114, 242, 10, 138, 74, 202, 42, 170, 106, 234, 26, 154, 90, 218,
       58, 186, 122, 250, 6, 134, 70, 198, 38, 166, 102, 230, 22, 150, 86, 214,
       54, 182, 118, 246, 14, 142, 78, 206, 46, 174, 110, 238, 30, 158, 94,
       222, 62, 190, 126, 254, 1, 129, 65, 193, 33, 161, 97, 225, 17, 145, 81,
       209, 49, 177, 113, 241, 9, 137, 73, 201, 41, 169, 105, 233, 25, 153, 89,
       217, 57, 185, 121, 249, 5, 133, 69, 197, 37, 165, 101, 229, 21, 149, 85,
       213, 53, 181, 117, 245, 13, 141, 77, 205, 45, 173, 109, 237, 29, 157,
       93, 221, 61, 189, 125, 253, 3, 131, 67, 195, 35, 163, 99, 227, 19, 147,
       83, 211, 51, 179, 115, 243, 11, 139, 75, 203, 43, 171, 107, 235, 27,
       155, 91, 219, 59, 187, 123, 251, 7, 135, 71, 199, 39, 167, 103, 231, 23,
       151, 87, 215, 55, 183, 119, 247, 15, 143, 79, 207, 47, 175, 111, 239,
       31, 159, 95, 223, 63, 191, 127, 255]

def reverseBitOrder(uint8):
    return LUT[uint8] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-02T07:55:49.260

另一种方法是遍历两端的位并相互交换。这是我从 EPI python 书中学到的。

```
i = 0; j = 7
num = 230
print(bin(num))
while i<j:
    # Get the bits from both end iteratively
    if (x>>i)&1 != (x>>j)&1:
        # if the bits don't match swap them by creating a bit mask
        # and XOR it with the number 
        mask = (1<<i) | (1<<j)
        num ^= mask
    i += 1; j -= 1
print(bin(num)) 
```

# javascript - 在 Twitter Bootstrap 中使用 Javascript 的 Tabbable Navs

> ID：12681948
> 
> 赞同：1
> 
> 时间：2012-10-01T22:20:43.240
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在尝试为我的网页上的三个表单制作一个可选项卡导航。我无法让 Javascript 用于选项卡。Twitter 文档中有两个脚本。

```
$('#myTab a').click(function (e) {
  e.preventDefault();
  $(this).tab('show');
}) 
```

和

```
$('#myTab a[href="#profile"]').tab('show'); // Select tab by name
$('#myTab a:first').tab('show'); // Select first tab
$('#myTab a:last').tab('show'); // Select last tab
$('#myTab li:eq(2) a').tab('show'); // Select third tab (0-indexed) 
```

这是文档中给出的可选项导航的 html。

```
<div class="tabbable"> <!-- Only required for left/right tabs -->
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
    <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane active" id="tab1">
      <p>I'm in Section 1.</p>
    </div>
    <div class="tab-pane" id="tab2">
      <p>Howdy, I'm in Section 2.</p>
    </div>
  </div>
</div> 
```

单击两个选项卡之一时，如何在我的网页上使用这两个代码块来显示适当的内容？我是 Javascript 新手。只想把事情做好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T00:22:02.183

由于每个选项卡上的 data-toggle='tab' 属性，您不需要单独启用选项卡。确保您已将[bootstrap.js](http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.0/bootstrap.min.js)文件添加到您的页面。

如果你愿意，你可以看看这个例子：http: [//jsfiddle.net/voytko/TVUPF/](http://jsfiddle.net/voytko/TVUPF/)

# c# - 允许 RangeAttribute 应用于子视图模型中的属性

> ID：12681959
> 
> 赞同：1
> 
> 时间：2012-10-01T22:22:05.780
> 
> 标签：c#, asp.net-mvc-3, data-annotations

我正在使用视图模型通过 jquery 不显眼的验证和标准属性装饰（MVC 3.0）将数据传递给我的 Razor 视图。我的视图模型看起来像这样（忽略汇总名称）：

```
public class MyViewModel
{
   public MyViewItem Item { get; set; }
   public MyViewItem Item2 { get; set; }
}

public class MyViewItem
{
   public int Value { get; set; }
   public CustomEnum MyEnum { get; set; }
} 
```

我想要做的是用不同的范围属性装饰 MyViewModel 上的 Item 和 Item2 值。*但是，当我使用Html的**EditorFor*扩展时，这些不会出现，因为它们不在使用的特定 Value 属性上。

 *IE

```
public class MyViewModel
{
   [Range(0,100)] // will actually be applied on the Item.Value property
   public MyViewItem Item { get; set; }

   [Range(50,60)] // will actually be applied on the Item.Value property
   public MyViewItem Item2 { get; set; }
} 
```

无论如何我可以通过自定义属性或其他形式来实现这一点，即自定义数据绑定、自定义属性等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:52:25.267

如果您愿意忍受两种不同的类型，您可以继承 MyViewItem 并让派生类为其定义不同的 RangeValidationAttribute。*

# linux - 用于检查客户端计算机上 LDAP.CONF 上的 LDAP 条目数量并更新缺失条目的脚本

> ID：12681960
> 
> 赞同：0
> 
> 时间：2012-10-01T22:22:09.330
> 
> 标签：linux, bash, sed

我正在尝试在脚本中使用 sed 命令来搜索以 HOST 开头的行，然后检查主机名的匹配模式并在 LDAP 配置文件中添加缺少的模式。

LDAP.CONF 中的示例条目

```
HOST nzlsfn55.zeus.ghsewn.com nzlsfn60.zeus.ghsewn.com  nznsfn60.zeus.ghsewn.com 
```

现在我如何搜索模式并使用 sed 添加缺少的条目，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:32:30.607

如果您有主机列表并想添加缺少的主机：

```
#!/bin/bash

for arg; do
    grep &>/dev/null "^HOST \+.*\<$arg\>" ||
        sed -i "s/$/ $arg/" /etc/ldap/ldap.conf
done 
```

像这样使用脚本：

```
./script host1 host2 host3 
```

测试前备份你的`/etc/ldap/ldap.conf`。（没有在那里测试）

**编辑**

为了满足您的新要求，请参阅以下代码：

```
#!/bin/bash

hosts="host1 host2 host3"

for arg in $hosts; do
    grep &>/dev/null "^HOST \+.*\<$arg\>" ||
        sed -i "s/$/ $arg/" /etc/ldap/ldap.conf
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T01:52:38.043

我使用下面的代码来完成我的任务，我相信我的代码必须有更简单的方法或需要改进 - 感谢大家的输入

如果 [ -e /etc/openldap/ldap.conf ]; 然后

```
 entries=`grep -i host /etc/openldap/ldap.conf`

        count=`grep -i host /etc/openldap/ldap.conf | wc -w`

else

        echo " no ldap.conf file available "
        exit

fi

#if condition checking for no host entry

if [ $count -eq 0 ];
then

        echo " no host entry available in config file "
        exit

fi

#if condition checking for less than 3 ldap entries

if [ $count -eq 4 ];
then

        echo " `hostname` has the following ldap entries : $entries "
else

        #less then than 3 entries will get updated here
        if [ $count -lt 4 ];
        then

        sed -i.bak 's/^host.*\|^HOST.*/host nzlsfn55.zeus.ghsewn.com nzlsfn60.zeus.ghsewn.com  nznsfn60.zeus.ghsewn.com/' /etc/openldap/ldap.conf

        echo " Sucessfully added LDAP hosts"

        fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T23:35:42.857

我会用`GNU awk`这个。假设您在名为 的文件中有一个主机列表（行分隔）`hosts.txt`，您可以运行以下命令：

```
awk -f script.awk hosts.txt /etc/ldap/ldap.conf > new_ldap.conf 
```

内容`script.awk`：

```
FNR==NR {
    hosts[$0]++
    next
}

/^HOST/ {
    for (j=2; j<=NF; j++) {
        array[$j]++
    }
    for (i in hosts) {
        if (!(i in array)) {
            $0 = $0 OFS i
        }
    }
    delete array
}1 
```

# sql - 按 SQL Server 中的列组排序

> ID：12681961
> 
> 赞同：2
> 
> 时间：2012-10-01T22:22:10.850
> 
> 标签：sql, sql-server, sql-server-2005, sorting, sql-order-by

我的问题是从 2 个结果中对数据进行排序。两个结果集中的计数相同（现在，我将两个结果集合二为一，按 Source - a 或 b 过滤）。我必须显示数据，例如 - 对于每个 ID1 和 ID2 组合，按源顺序显示它们；源'a' - 首先，然后是源'b'）。源 b 可能具有 ID1 和 ID2 组合的所有空值；但肯定有记录。

架构是 - 源、ID1、ID2、Name1、Name2。

我写了一个小光标来处理这个问题并用一个标志设置序列顺序。这适用于少量数据。但是对于 1000 多条记录，它需要很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:18:20.790

尝试这个：

```
SELECT
  t1.Source,
  t1.Id1,
  t1.ID2,
  t1.Name1,
  t1.Name2,
  ROW_NUMBER() OVER(PARTITION BY ID1, ID2 
                    ORDER BY SortOrder.sortId) rownum
FROM Table1 t1
INNER JOIN
(
   SELECT 1 AS sortId, 'a' Source
   UNION ALL
   SELECT 2, 'b'
) SortOrder ON t1.Source = SortOrder.Source
ORDER BY rownum, SortOrder.sortId; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/5929a/7)

# android - android zxing 库中的 FileNotFoundEXception

> ID：12681965
> 
> 赞同：1
> 
> 时间：2012-10-01T22:22:27.970
> 
> 标签：android, zxing

我正在使用`zxing2.0`库，`android`但我得到了这个例外：这是什么意思？

```
10-01 22:20:03.197: E/AndroidRuntime(345): java.lang.RuntimeException: Unable to start activity ComponentInfo{phoenix.metro.uis/com.google.zxing.client.android.CaptureActivity}: android.content.res.Resources$NotFoundException: File res/xml/preferences.xml from drawable resource ID #0x7f050000
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.os.Looper.loop(Looper.java:123)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-01 22:20:03.197: E/AndroidRuntime(345):  at java.lang.reflect.Method.invokeNative(Native Method)
10-01 22:20:03.197: E/AndroidRuntime(345):  at java.lang.reflect.Method.invoke(Method.java:507)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-01 22:20:03.197: E/AndroidRuntime(345):  at dalvik.system.NativeStart.main(Native Method)
10-01 22:20:03.197: E/AndroidRuntime(345): Caused by: android.content.res.Resources$NotFoundException: File res/xml/preferences.xml from drawable resource ID #0x7f050000
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.content.res.Resources.openRawResourceFd(Resources.java:860)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.google.zxing.client.android.BeepManager.buildMediaPlayer(BeepManager.java:97)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.google.zxing.client.android.BeepManager.updatePrefs(BeepManager.java:60)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.google.zxing.client.android.BeepManager.<init>(BeepManager.java:49)
10-01 22:20:03.197: E/AndroidRuntime(345):  at com.google.zxing.client.android.CaptureActivity.onCreate(CaptureActivity.java:165)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-01 22:20:03.197: E/AndroidRuntime(345):  ... 11 more
10-01 22:20:03.197: E/AndroidRuntime(345): Caused by: java.io.FileNotFoundException: This file can not be opened as a file descriptor; it is probably compressed
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.content.res.AssetManager.openNonAssetFdNative(Native Method)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.content.res.AssetManager.openNonAssetFd(AssetManager.java:427)
10-01 22:20:03.197: E/AndroidRuntime(345):  at android.content.res.Resources.openRawResourceFd(Resources.java:857)
10-01 22:20:03.197: E/AndroidRuntime(345):  ... 17 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T15:28:35.227

同样的问题！我通过分步指南修复它，作者很好地解释了如何使用 zxing 库实现条形码阅读器/编码器。与原始手册的不同之处在于，他似乎使用了他的库版本，并在某些方面进行了修改（如他在文章中所示）以解决问题。按照他的指示下载他的 zxing 库。这个对我有用：

[michalu zxing条码](http://michalu.eu/wordpress/scanning-and-generating-barcodes-using-zxing-library-on-android/)

# python - 如何在 Django Mako 模板中显示 ${'None'}？

> ID：12681967
> 
> 赞同：2
> 
> 时间：2012-10-01T22:22:32.660
> 
> 标签：python, django, mako

我正在尝试使用 Mako 模板在 Django 网站上显示可能值列表中的单词（包括“无”、“小”和“更多”）。三个词中只有两个实际呈现。'None' 被解释为 None 并在我调用 ${variable} 时转换为空字符串。

在故障排除中，我确定实际上在 mako 模板中写入 ${'None'} 会向浏览器返回一个空字符串。

有没有办法让 mako 模板打印这个字符串？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:19:09.420

Mako 有一个过滤器系统，它使用`|`操作员将转义过滤器应用于`${}`.

如果没有任何配置，Mako 默认会`unicode`隐式使用过滤器。尽管您始终可以通过设置[`default_filters`](http://docs.makotemplates.org/en/latest/filtering.html#the-default-filters-argument)参数来更改 Mako 使用的默认过滤器。

该[`n`过滤器](http://docs.makotemplates.org/en/latest/filtering.html#expression-filtering)禁用所有默认过滤；只有在本地表达式标签中指定的过滤器才会被应用。

所以默认情况下，Mako*应该*呈现`${"None"}`为`None`而不是空字符串。它仅在添加过滤器时对您有效，这一事实`n`表明您可能已将`default_filters`其他过滤器设置为将字符串转义`None`为空字符串的过滤器。`n`会修复它，但在使用它之前，您可能应该进一步挖掘，看看是否`default_filters`已在代码中的某个位置设置。

**警告**：`n`过滤器不应正常应用于任何用户（即您网站的用户）输入，因为无转义意味着您容易受到 XSS 等一系列攻击。

# java - 找不到符号：@XmlInverseReference

> ID：12681970
> 
> 赞同：1
> 
> 时间：2012-10-01T22:22:47.190
> 
> 标签：java, xml, web-services, eclipselink, moxy

我正在关注[http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html)上的教程。我将文件复制并粘贴到 netbeans 中（确保它按提供的方式工作）。`@XmlInverseReference`显示编译错误。除了`import javax.persistence.*`我需要导入其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:38:21.643

`@XmlInverseReference`是来自[EclipseLink MOXy](http://www.eclipse.org/eclipselink/moxy.php)的注释，用于表示双向关系，您也需要[下载 EclipseLink](http://www.eclipse.org/eclipselink/releases/2.4.php)才能使用它。有关更多信息，请参阅您链接的同一博客[中的另一篇文章](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-35.html)，其中更深入地介绍了注释。

# google-app-engine - 在 Eclipse 中配置 Google Cloud SQL 实例

> ID：12681972
> 
> 赞同：1
> 
> 时间：2012-10-01T22:22:50.460
> 
> 标签：google-app-engine, google-cloud-sql

我的实例的名称是

> domain.com:my_project:xyz

所以我实际上完成了这样的表格： ![形式](../Images/e1ff7fde0f6ff2de19cda8a1751b95b9.png)

但我收到以下错误：

![错误](../Images/2647462dc673a1e816be8bde25f7be0b.png)

有任何想法吗？非常感谢！

我刚刚在 20 分钟前创建了它，可能我需要等待，但我怀疑这是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:06:29.350

实例名称是“domain.com:my_project:xyz”，而不仅仅是“xyz”。

# c - 动态查找函数地址

> ID：12681973
> 
> 赞同：0
> 
> 时间：2012-10-01T22:23:12.143
> 
> 标签：c, memory, arm, mach-o, ida

我的目标是在 ARM 平台上的剥离二进制文件中挂钩没有符号的 C 函数。由于这些函数的地址可能会改变（即更新二进制文件），我希望我的插入动态库本身能够找到地址。

此外，在某些时候，这些函数使用一个 C 字符串，它永远不会通过更新而改变。考虑到这一点，以下是查找函数地址的 3 个步骤：

1）找到C字符串本身的地址（通过分析`__cstring`段内的`__TEXT`部分。

2) 找到对字符串的引用的地址。

3）从外部参照地址开始，往回走，直到找到一个函数序言。

我可以实施步骤 1）和 3），但我对 2）有点迷茫。究竟什么是外部参照？如何识别与 C-string 对应的那个？不需要代码，只需要一些理论。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:27:52.227

您必须反汇编所有代码，确定从内存中读取的代码。您必须解码从内存中读取的那些指令的地址（不确定 ARM 是相对的还是绝对的）。此外，为了正确反汇编所有内容，您需要从已知入口点开始并跟踪所有调用以找出函数的开始位置（我假设 ARM 具有可变大小的指令，即带有立即数的指令）。这不是一件简单的事情，交叉引用分析是逆向工程软件（例如 IDA Pro）的一个相当重要的功能。此外，如果不直接访问内存，则必须分析所有间接内存访问（通过寄存器访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T17:46:35.663

除了搜索字符串及其外部参照（LDR R5，= 0xnnnnnn）之外，您可以做的是创建一个包含函数结尾的字节数组并搜索它。您搜索的字节数越多，唯一性就越高。使用（C/ASCII）字符串并不好，只能手动（在 IDA 中手动）工作

否则，您必须实现一个反汇编引擎（例如在 IDA 中解码指令的引擎，与 x86 平台上的类似）并解析每条指令。

# sql - SQL Server复制表112000+条记录和一个BLOB字段

> ID：12681976
> 
> 赞同：1
> 
> 时间：2012-10-01T22:23:42.003
> 
> 标签：sql, sql-server, blob, blobstore

我有一个包含 112000 多条记录和 38 列的表 (A)，其中包括一个 BLOB（最大大小为 2Mb 的 PDF/PNG 文件）。该表有大约 13Gb 的数据空间和几乎 9Gb 的索引空间。出于规范化目的，我创建了另一个表 (B) 来存储这些 BLOB 数据。表 A 将具有来自表 B 的 FK。

我在将表 A 中的数据插入表 B 时遇到问题......它需要的时间太长了。我已经尝试`SELECT INTO`过导出向导。第一选择跑了 2 小时，我不知道需要多长时间。导出时第二个选择失败（设法插入大约 35000 条记录）。

所以，我的问题是：有没有更快的方法？有什么我可以做的，所以我可以做到这一点？我的意思是，尽管磁盘空间非常大，但 112000 条记录似乎并不算多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:38:09.647

虽然尚不清楚加载失败的原因，*但如果*您尝试将数据加载到一个大型`INSERT`语句中，如果您将工作分成块，性能将会提高。不要一次做一排。尝试加载总计约 10M、50M、100M、250M 等的行，直到找到有效的“最佳位置”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:40:41.243

最好的方法是拆分成更小的块，然后像 Philip Kelley Said 那样使用 while 循环插入。. 删除目标表上的所有非聚集索引，插入数据后创建它们。. 如果您安装了 SQL Server BI 工具，请使用那里的导入导出向导并创建一个基本包，它会做得很好。它不取决于您的磁盘空间，取决于您与其他进程的内存共享。

# image - 附加的图像与 Wordpress 中的自定义字段分离

> ID：12681978
> 
> 赞同：0
> 
> 时间：2012-10-01T22:24:15.123
> 
> 标签：image, wordpress, custom-fields

是否可以使用带有 URL 的自定义字段来附加帖子的突出显示图像？Wordpress 中是否有内置功能？有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:50:49.143

Yes, you can use the WordPress `get_post_meta()` function - [source](http://codex.wordpress.org/Custom_Fields)

using it in the loop, you can do something like

```
<img src="<?php get_post_meta($post_id, 'NEW_IMAGE', true); ?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T23:15:46.370

我不确定您要解决什么问题，但听起来您想为外部图像提供一个 URL，而不是上传一个。我不认为这与默认帖子图像开箱即用，但有字段插件，例如[http://wordpress.org/extend/plugins/cimy-user-extra-fields/](http://wordpress.org/extend/plugins/cimy-user-extra-fields/)（字段类型图片-网址）。

# node.js - nodejs护照总是会失败URL

> ID：12681984
> 
> 赞同：3
> 
> 时间：2012-10-01T22:24:46.773
> 
> 标签：node.js, facebook, coffeescript, passport.js

我正在使用护照允许通过 Facebook 在我的网站上登录。一切似乎都很好，但是即使我使用有效令牌从 Facebook 取回所有数据，来自 Facebook 网站的回调总是会转到 failureRedirect。关于为什么会发生这种情况的任何想法？

```
express = require "express"
passport = require 'passport'
FBStrategy = require('passport-facebook').Strategy
Properties = require "./config.json"

FB_APP_ID = REMOVED
FB_APP_SECRET = REMOVED

passport.serializeUser = (user, done) ->
 done null, user

passport.deserializeUser = (obj, done) ->
  done null, obj

fb = new FBStrategy  
  clientID: FB_APP_ID
  clientSecret: FB_APP_SECRET
  callbackURL: "http://localhost/auth/facebook/callback"
  (accessToken, refreshToken, profile, done) ->
    console.log "accesToken ", accessToken
    console.log "refreshToken", refreshToken
    console.log "profile", profile
    done()

passport.use fb

app = module.exports = express.createServer()
app.Properties = Properties

console.log "starting server"
app.configure ->
  app.set "views", "./views"
  app.set "view engine", "jade"
  app.set "view options", layout: false
  app.use express.methodOverride()
  app.use (express.static "#{__dirname}")
  app.use express.cookieParser()
  app.use express.bodyParser()
  app.use (express.session secret: REMOVED, key: REMOVED)
  app.use passport.initialize()
  app.use passport.session()
  app.use app.router

app.configure "development", ->
  app.listen Properties.Port

app.get "/", (request, response) -> 
  { session: Session } = request
  response.render "index"

app.get "/account", (request, response) -> 
  { session: Session } = request
  response.render "account"

app.get "/login", (request, response) -> 
  { session: Session } = request
  response.render "login", {user:request.user}

app.get "/auth/facebook", passport.authenticate 'facebook'

app.get "/auth/facebook/callback", passport.authenticate ('facebook', {failureRedirect: "/login"}), (req, res) ->
  res.redirect "/account"

console.log "server is ready and listening on port #{Properties.Port}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T05:37:59.120

您需要在策略的验证回调中提供用户。像这样的东西：

```
fb = new FBStrategy  
  clientID: FB_APP_ID
  clientSecret: FB_APP_SECRET
  callbackURL: "http://localhost/auth/facebook/callback"
  (accessToken, refreshToken, profile, done) ->
    console.log "accesToken ", accessToken
    console.log "refreshToken", refreshToken
    console.log "profile", profile
    user = {} // find or create a user in your database
    done(null, user) 
```

您可以在指南中阅读有关验证回调的更多信息：http: [//passportjs.org/guide/configuration.html](http://passportjs.org/guide/configuration.html)

# iphone - 目标C - 从今天（明天）开始的第二天

> ID：12681989
> 
> 赞同：20
> 
> 时间：2012-10-01T22:25:10.870
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

如何检查日期是否天生就是明天？

我不想为今天这样的日期添加小时或任何内容，因为如果今天已经是`22:59`，添加太多会转到后天，如果时间添加太少`12:00`会错过明天。

我怎样才能检查两个`NSDate`s 并确保一个相当于明天的另一个？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-01T22:31:16.780

使用[`NSDateComponents`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)您可以从代表今天的日期中提取日/月/年分量，忽略小时/分钟/秒分量，添加一天，并重建对应于明天的日期。

因此，假设您想在当前日期准确地添加一天（包括保持小时/分钟/秒信息与“现在”日期相同），您可以将 24*60*60 秒的 timeInterval 添加到“现在”使用`dateWithTimeIntervalSinceNow`，但最好（和 DST 证明等）以这种方式使用`NSDateComponents`：

```
NSDateComponents* deltaComps = [[[NSDateComponents alloc] init] autorelease];
[deltaComps setDay:1];
NSDate* tomorrow = [[NSCalendar currentCalendar] dateByAddingComponents:deltaComps toDate:[NSDate date] options:0]; 
```

但是**，如果您想在午夜生成对应于明天的日期**，您可以改为只检索代表现在的日期的月/日/年组件，**不带小时/分钟/秒部分**，然后添加 1 天，然后重建一个日期：

```
// Decompose the date corresponding to "now" into Year+Month+Day components
NSUInteger units = NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitDay;
NSDateComponents *comps = [[NSCalendar currentCalendar] components:units fromDate:[NSDate date]];
// Add one day
comps.day = comps.day + 1; // no worries: even if it is the end of the month it will wrap to the next month, see doc
// Recompose a new date, without any time information (so this will be at midnight)
NSDate *tomorrowMidnight = [[NSCalendar currentCalendar] dateFromComponents:comps]; 
```

PS：您可以在[Date and Time Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i)中阅读有关日期概念的非常有用的建议和内容，尤其是[这里有关日期组件](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470)的内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-30T18:47:14.120

在 iOS 8 中有一个方便的方法`NSCalendar`调用`isDateInTomorrow`.

Objective-C

```
NSDate *date;
BOOL isTomorrow = [[NSCalendar currentCalendar] isDateInTomorrow:date]; 
```

斯威夫特 3

```
let date: Date
let isTomorrow = Calendar.current.isDateInTomorrow(date) 
```

斯威夫特 2

```
let date: NSDate
let isTomorrow = NSCalendar.currentCalendar().isDateInTomorrow(date) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-12T19:46:32.017

您也许可以利用`NSCalendar`/`Calendar`创造明天：

```
extension Calendar {
    var tomorrow: Date? {
        return date(byAdding: .day, value: 1, to: startOfDay(for: Date()))
    }
} 
```

# python - 比较两个列表中的元素时使用 django ORM 的最有效方法

> ID：12681992
> 
> 赞同：3
> 
> 时间：2012-10-01T22:25:27.970
> 
> 标签：python, django, orm

```
model_one_list = Model1.objects.all()
model_two_list = Model2.objects.filter(...).order_by(..)

for model in model_one_list:
    for model2 in model_two_list:
        if model.field == model2.field:
            another_list.append(model) 
```

一些针对 django ORM 的在线提示特别提到不要这样做，因为它使用太多内存并损害性能，文档建议尽可能坚持使用 ORM。

我试图用这个来解决上面的问题：

```
Model1.objects.extra(
    where={
        'field = app_model2.field' 
        # Not sure if this works, I think the app_model2 may be wrong idk if i
        # can access that
    },
) 
```

但是对于这样的事情，我不太确定如何处理它。

还有一个有点相关的最后一个问题。如果我有一个查询集需要简单地按排序计数进行排序，那么推荐的方法是什么？

```
Model1.objects.order_by('something').extra(select={'rank':
"how do i get the rank in mysql??? like while its
 iterating, is this even possible"}) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T22:55:27.437

### 第一个问题：加入不相关的模型

我假设您的`Model1`和`Model2`不相关，否则您将能够使用[Django 的相关对象](https://docs.djangoproject.com/en/1.4/ref/models/relations/)接口。您可以采取以下两种方法：

1.  使用[`extra`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.extra)和一个 SQL 子查询：

    ```
    Model1.objects.extra(where = ['field in (SELECT field from myapp_model2 WHERE ...)']) 
    ```

    在某些数据库（尤其是 MySQL）中，子查询的处理效率不高，因此这可能不如下面的 #2 好。

2.  使用[原始 SQL 查询](https://docs.djangoproject.com/en/1.4/topics/db/sql/)：

    ```
    Model1.objects.raw('''SELECT * from myapp_model1
                       INNER JOIN myapp_model2
                       ON myapp_model1.field = myapp_model2.field
                       AND ...''') 
    ```

### 第二个问题：枚举结果

两种方法：

1.  您可以使用内置[`enumerate`](http://docs.python.org/library/functions.html#enumerate)函数枚举 Python 中的查询集：

    ```
    enumerate(Model1.objects.all()) 
    ```

2.  您可以使用[此答案](https://stackoverflow.com/a/3127004/68063)中描述的技术在 MySQL 中进行枚举。像这样的东西：

    ```
    Model1.objects.raw('''SELECT *, @row := @row + 1 AS row
                       FROM myapp_model1
                       JOIN (SELECT @row := 0) rowtable
                       INNER JOIN myapp_model2
                       ON myapp_model1.field = myapp_model2.field
                       AND ...''') 
    ```

# android - android 和 sqlite-有 5 列，但提供了 4 个值

> ID：12681998
> 
> 赞同：5
> 
> 时间：2012-10-01T22:26:10.427
> 
> 标签：android, sqlite

我从某处复制了一个使用 sqlite 的示例。他们定义了 5 列，我将其更改为 4 列。相关部分在这里：

```
 private final String DB_NAME = "mcustomerDbName";
    private final String TABLE_NAME = "mcustomeTableName";
    SQLiteDatabase customersDB = null;
    /** Called when the activity is first created. */

     .......................................... 
```

这是表 4 列的上下文

```
 private void mFillDbsTable(){
        try {

            customersDB.execSQL("INSERT INTO " +
                    TABLE_NAME + 
                    " Values ('ABARTH','500','Abarth','15.3846153846154' );");
            customersDB.execSQL("INSERT INTO " + TABLE_NAME + "Values ( 'ABARTH ', 'Grande Punto ', '1.4 T-Jet 155 ', '14.9253731343284 ' );");
            customersDB.execSQL("INSERT INTO " + TABLE_NAME + "Values ( 'ALFA ROMEO ', 'MiTo ', '1.4 16v TB 120  ', '16.3934426229508 ');");
            customersDB.execSQL("INSERT INTO " + TABLE_NAME + "Values ( 'ALFA ROMEO ', 'MiTo ', '1.3 JTDm 90 ', '22.2222222222222 ');");
            customersDB.execSQL("INSERT INTO " + TABLE_NAME + "Values ( 'ALFA ROMEO ', '147 ', '1.6 (120 bhp) ', '12.1951219512195 ');");
            customersDB.execSQL("INSERT INTO " + TABLE_NAME + "Values ( 'ALFA ROMEO ', '147 ', '2.0 ', '11.2359550561798 ');");

     ..........................................

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /*setContentView(R.layout.activity_delek);**/
     ArrayList<String> results = new ArrayList<String>();
        try {
            customersDB =  this.openOrCreateDatabase(  DB_NAME, MODE_PRIVATE, null);
            customersDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    TABLE_NAME +
                    " (Name VARCHAR," +
                    " Street VARCHAR, Block VARCHAR, City VARCHAR);");
            mFillDbsTable();
             Cursor c = customersDB.rawQuery("SELECT Name, Street, Block, City  FROM "    +
                    TABLE_NAME +
                       " where Name == 'TOYOTA' or Name == 'Yosi' ", null);
            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String name = c.getString(c.getColumnIndex("Name"));
                           String street = c.getString(c.getColumnIndex("Street"));

                              String city = c.getString(c.getColumnIndex("City"));

                            results.add(name + ", " + street + " "+ city );
                    }while (c.moveToNext());
                }
            }
            setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));
         } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "create/Open the database problem");
        } finally {
            if (customersDB != null)
                customersDB.execSQL("DELETE FROM " +   TABLE_NAME);
                customersDB.close();
        } 
```

我在日志中收到此消息：

```
 10-01 21:59:59.434: I/Database(1067): sqlite returned: error code = 1, msg = table            mcustomeTableName has 5 columns but 4 values were supplied. 
```

为什么？？我有 4 列

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T22:36:20.257

该表可能在之前的运行中已经存在而无需您进行更改，并且在数据库中仍然有 5 列（如果不存在则创建表）。您可以通过从 ADP 登录到 sqllite 来验证这一点。只需在运行应用程序之前放下表格。

此外，为您的插入语句提供一个列列表。无论如何，这都是一种很好的做法，因为您的应用程序将对架构更改更加健壮：

```
"INSERT INTO " + TABLE_NAME + " (Name, Street, Block, City) Values (" ...etc 
```