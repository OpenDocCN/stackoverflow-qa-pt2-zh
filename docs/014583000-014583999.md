# StackOverflow 问答 14583000-14583999

# javascript - 在正则表达式中嵌套 OR

> ID：14583017
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:34:07.957
> 
> 标签：javascript, regex, perl, boost-regex, boost-xpressive

如何匹配我需要做`or`另一组的表达式？

即，我如何匹配某种格式的东西

```
[
  [
    [ a | b ] |
    [ x | y ]
  ]
] 
```

其中 a、b、x 和 y 是字符串。

我想匹配这样的短语

```
a
b
x
y
a x
a y
b x
b y
x a
x b
y a
y b 
```

但不是这样的：

```
a b
x y
z z 
```

我正在尝试在*Boost Xpressive*中使用它，因此我可以选择使用 ECMAScript 或 Perl 类型的正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:42:24.730

你可以这样做：

```
[ab] [xy]|[xy] [ab]|[abxy] 
```

这里有3个选择：

*   只有`a`, `b`, `x`, `y`（单个字符）
*   或 2 个字符，`a`或`b`在`x`or之前`y`，中间有空格。
*   或 2 个字符，`x`或`y`在`a`or之前`b`，中间有空格。

我放在`[abxy]`后面，以防万一你搜索时，它会先搜索前面的（配对的），然后再搜索单个的。如果您使用正则表达式进行搜索，顺序很重要，但在您进行验证时并不重要。

另一种写法：

```
[ab]( [xy])?|[xy]( [ab])? 
```

这仅适用于字符，但您可以使其适用于字符串。例如，假设您有 4 个字符串`s1`, `s2`, `s3`, `s4`：

```
(s1|s2)( (s3|s4))?|(s3|s4)( (s1|s2))? 
```

它搜索：

*   要么，要么 ，要么 ，`s1`要么`s2`，要么 （0 或 1 个实例），后跟`s3`or`s4`
*   （另一种方式）

这涵盖了`s1`,`s2`等（单个字符串）、`s2 s3`,`s3 s2`等（配对，可以颠倒顺序）的所有情况。由于量词的默认*贪婪*属性，上面的正则表达式将在使用单个字符串之前搜索更长的版本（配对） 。

请注意，我在上面的正则表达式中使用*了捕获组* `(pattern)`，它将记录与`pattern`内部匹配的字符串的位置。`(?:pattern)`如果您不需要参考与模式匹配的文本，您可以将它们设为非捕获组。这将为您节省一些时钟周期。

```
(?:s1|s2)(?: (?:s3|s4))?|(?:s3|s4)(?: (?:s1|s2))? 
```

（我将其他正则表达式的捕获*组*更改*为非捕获组*的任务作为练习。就像添加一样简单`?:`）

**搜索还是验证？**

如果你想找到这样的模式，那么上面的正则表达式应该适合你。

如果要验证字符串是否与模式匹配，则需要使用锚点`^`（匹配字符串的开头）、`$`（匹配字符串的结尾）来确保字符串遵循确切的格式：

```
^([ab] [xy]|[xy] [ab]|[abxy])$
^([ab]( [xy])?|[xy]( [ab])?)$
^((s1|s2)( (s3|s4))?|(s3|s4)( (s1|s2))?)$
^(?:(?:s1|s2)(?: (?:s3|s4))?|(?:s3|s4)(?: (?:s1|s2))?)$ 
```

请注意，我将上述部分中的正则表达式用`()`（*捕获组*，但实际上我只需要在此处*分组*）。这是因为我`|`内心有一个交替。

**可扩展性和限制**

*   您可以根据需要向第一组或第二组添加更多字符串：

    ```
    ^([abcd]( [xyz])?|[xyz]( [abcd])?)$ 
    ```

*   但是，如果你想增加组的数量，我建议你用空格分割字符串并循环通过标记来找到组的排列，而不是使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:03:49.663

没有在正则表达式中重复`a`,和的简便方法可以做到这一点`b`，但是可以通过从预先声明的子表达式构建表达式来缓解这个问题。`x``y`

此代码演示。请注意，前三行`DATA`是无效的，并且它们不会在输出中重现。

```
use v5.10;
use warnings;

my $ab = qr/a|b/;
my $xy = qr/x|y/;

my $re = qr/^
(?:
  $ab (?: \s+ $xy)? | $xy (?: \s+ $ab)?
)
$/x;

while (<DATA>) {
  print if /$re/;
}

__DATA__
a b
x y
z z
a
b
x
y
a x
a y
b x
b y
x a
x b
y a 
y b 
```

**输出**

```
a
b
x
y
a x
a y
b x
b y
x a
x b
y b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:36:37.563

试试这个：

```
^((a|b)( x| y)?|(x|y)( a| b)?)$ 
```

正则表达式的剖析：

```
# ^            - Line start
# (            - Group start
# (a|b)( x| y) - Match A or B followed by X or Y
# ?            - Where (X|Y) is optional
# |            - Or
# (x|y)( a| b) - Match X or Y followed by A or B
# ?            - Where (A|B) is optional
# )            - And group
# $            - End of line. 
```

这匹配：

```
a    y
b    a x
x    y b 
```

但不是：

```
a b
x y
z z 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:49:31.237

简单的：

```
(a|b|x|y|((a|b) (x|y))|((x|y) (a|b))) 
```

# javascript - 淘汰赛“闪烁”问题

> ID：14583018
> 
> 赞同：32
> 
> 时间：2013-01-29T12:34:10.617
> 
> 标签：javascript, knockout.js, singlepage, single-page-application

我正在使用 KO 构建一个 SPA（单页应用程序）。该应用程序看起来像一本书，用户可以翻页。

问题是每次页面加载时，页面都会“闪烁”并且用户会看到页面的无样式版本。我猜这是因为很多样式都依赖于 ko 绑定，所以直到 ko 完成它“神奇”，用户才能看到无样式的代码。

是否可以判断 KO 何时完成所有绑定，然后才显示页面？

我已经设法通过在加载视图之前设置超时来部分解决它，但这当然不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-29T17:30:27.140

是的，实际上这很容易。应用于`display:none`顶层`div`（或 w/e 容器），并且`data-bind="visible: true"`. 这将导致页面被隐藏，直到淘汰赛通过绑定取消隐藏它（这显然在完全加载之前不会发生）。

由于您使用的是不可观察的值，因此 Knockout 甚至不会费心再次重新检查它。初始绑定后不应该存在性能问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-01T19:27:36.377

我认为以前使用模板可以更好地回答这个问题。

[在构建淘汰赛 js 绑定时隐藏屏幕的最佳方法是什么？](https://stackoverflow.com/questions/9532595/what-is-the-best-way-to-hide-the-screen-while-knockout-js-bindings-are-being-bui)

# scala - 在运行时传递类型信息

> ID：14583021
> 
> 赞同：2
> 
> 时间：2013-01-29T12:34:22.180
> 
> 标签：scala, casting, scala-2.10

我有一个 DSL 和一些运行时代码。问题是我在运行时到达某个地方：

```
val clazz: Class[_ <: java.io.Serializable] = classOf[java.lang.String]
val value: java.io.Serializable = "abc" 
```

我有一堂课

```
class MyWrapper[T <: java.io.Serializable](val data: T)(implicit m: Manifest[T]) {
  override def toString = m.runtimeClass
}
val wrapper = new MyWrapper(value) 
```

问题是我需要`java.lang.String`从`toString`. 但我得到了`java.io.Serializable`。不幸的是，我既不能为每个`java.io.Serializable`子类型创建固定的模式匹配（这太疯狂了），也不`MyWrapper`能用`new MyWrapper[String](value)`. 我不知道 的类型`value`，也许它是 的子类型`Serializable`。

如果我知道值类型等于变量，是否有某种方法可以在运行时传递类型/清单值`clazz`？

* * *

更新（Régis Jean-Gilles 的解决方案不起作用）。REPL测试：

```
val clazz: Class[_ <: java.io.Serializable] = classOf[java.lang.String]
val value: java.io.Serializable = "abc"

class MyWrapper[T <: java.io.Serializable](val data: T)(implicit m: Manifest[T]) {
  override def toString = m.runtimeClass.getName
}
val wrapper = new MyWrapper(value)
//val wrapper = new MyWrapper(value)(ClassManifest.fromClass(clazz).asInstanceOf[ClassTypeManifest[java.io.Serializable]])
//val wrapper = new MyWrapper(value)(ClassManifest.fromClass(clazz))
System.err.println(wrapper.toString) 
```

如果我尝试显式传递清单，则会出现错误：

```
scala> :load test.scala
Loading test.scala...
clazz: Class[_ <: java.io.Serializable] = class java.lang.String
value: java.io.Serializable = abc
defined class MyWrapper
<console>:10: error: type mismatch;
 found   : scala.reflect.ClassManifest[_$1] where type _$1 <: java.io.Serializable
    (which expands to)  scala.reflect.ClassTag[_$1]
 required: Manifest[java.io.Serializable]
       val wrapper = new MyWrapper(value)(ClassManifest.fromClass(clazz))
                                                                 ^
<console>:8: error: not found: value wrapper
              System.err.println(wrapper.toString) 
```

我也无法明确表达清单。

当我尝试编译我的应用程序时出现更奇怪的错误 -

```
[error]  found   : scala.reflect.ClassManifest[(some other)_0(in method setProperty)]
[error]     (which expands to)  scala.reflect.ClassTag[(some other)_0(in method setProperty)]
[error]  required: Manifest[_0(in method setProperty)]
[error]           new Value.Static(default, Context.virtual(element))(ClassManifest.fromClass(elementProperty.typeClass))) 
```

恕我直言，Régis Jean-Gilles 非常接近解决方案。如何使其与 Scala 2.10 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:54:28.523

如果我理解正确，您正在使用清单来解决类型擦除问题，但在特定点上，您所拥有的只是 a `Class[_]`，因此您需要将其转换回清单。正确的？

如果是这样，您可以使用`ClassManifest.fromClass`, 然后将其作为隐式值显式传递`m`。

```
val wrapper = new MyWrapper(value)(Manifest.classType(clazz)) 
```

您可能应该将其抽象出来：

```
object MyWrapper {
  def fromRuntimeType[T <: java.io.Serializable]( value: T ): MyWrapper[T] = {
    new MyWrapper(value)(Manifest.classType(value.getClass))
  }
} 
```

但请记住，因为您首先只有一个 `Class`实例，所以您再次受到类型擦除的摆布。这意味着如果类（您需要为其获取清单）是泛型的，则在返回的清单中将没有任何类型参数信息`ClassManifest.fromClass`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:58:06.473

不会

```
override def toString = data.getClass.getName 
```

已经为你工作了吗？这会产生`java.lang.String`.

# java - Guava 中的 ForwardingMap 有什么用？

> ID：14583022
> 
> 赞同：7
> 
> 时间：2013-01-29T12:34:22.913
> 
> 标签：java, guava

我正在为理解 ForwardingMap 的使用而摸不着头脑？什么情况下可以使用它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T12:39:16.027

`ForwardingXxx`类为所有 JDK 和 Guava 集合提供[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)实现，包括`Map`.

阅读更多关于[Guava 的 wiki](https://code.google.com/p/guava-libraries/wiki/CollectionHelpersExplained#Forwarding_Decorators)和*Effective Java 2nd Edition, Item 16: Favor composition over inheritance*：

> 总而言之，继承是强大的，但它是有问题的，因为它违反了封装。仅当子类和超类之间存在真正的子类型关系时才适用。即使这样，如果子类与超类在不同的包中并且超类不是为继承而设计的，继承可能会导致脆弱性。为避免这种脆弱性，请使用组合和转发而不是继承，尤其是在存在实现包装类的适当接口时。包装类不仅比子类更健壮，而且更强大。

基本上，它允许您自定义可能不可扩展的 s，而无需添加对实际实现`Map`的依赖。`Map`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T12:38:59.560

默认 Map 类都是最终的。这意味着你不能扩展它们。当你想创建一个具有某些特殊行为的地图时，你需要编写自己的类来实现整个 Map 接口并将所有方法转发到内部 Map。

ForwardingMap 已经是一个可扩展的类，它实现了 Map 并将所有内容转发到内部映射，从而为您简化了这一过程。这意味着您可以通过扩展它来创建自己的 Map 实现。当你这样做时，你只需要实现选定的方法，而不是全部。

一个用例可能是一个地图，它会自动验证您放入其中的所有条目，或者是一个在数据库更改时自动更新数据库的地图。

# python - 从 python 多处理函数返回的多个输出

> ID：14583025
> 
> 赞同：1
> 
> 时间：2013-01-29T12:34:25.773
> 
> 标签：python, windows-7, multiprocessing

我正在尝试使用多处理来返回一个列表，但不是等到所有进程都完成，而是从 mp_factorizer 中的一个 return 语句中获得多个返回，如下所示：

```
None
None
(returns list) 
```

在这个例子中，我使用了 2 个线程。如果我使用 5 个线程，则在列出列表之前将有 5 个 None 返回。这是代码：

```
def mp_factorizer(nums, nprocs, objecttouse):
    if __name__ == '__main__':
        out_q = multiprocessing.Queue()
        chunksize = int(math.ceil(len(nums) / float(nprocs)))
        procs = []
        for i in range(nprocs):
            p = multiprocessing.Process(
                    target=worker,                   
                    args=(nums[chunksize * i:chunksize * (i + 1)],
                          out_q,
                    objecttouse))
            procs.append(p)
            p.start()

        # Collect all results into a single result dict. We know how many dicts
        # with results to expect.
        resultlist = []
        for i in range(nprocs):
            temp=out_q.get()
            index =0
            for i in temp:
                resultlist.append(temp[index][0][0:])
                index +=1

        # Wait for all worker processes to finish
        for p in procs:
            p.join()
            resultlist2 = [x for x in resultlist if x != []]
        return resultlist2

def worker(nums, out_q, objecttouse):
    """ The worker function, invoked in a process. 'nums' is a
        list of numbers to factor. The results are placed in
        a dictionary that's pushed to a queue.
    """
    outlist = []
    for n in nums:        
        outputlist=objecttouse.getevents(n)
        if outputlist:
            outlist.append(outputlist)   
    out_q.put(outlist) 
```

mp_factorizer 获取项目列表、线程数和工作人员应使用的对象，然后拆分项目列表，以便所有线程获得相同数量的列表，并启动工作人员。然后工作人员使用该对象从给定列表中计算某些内容，并将结果添加到队列中。Mp_factorizer 应该从队列中收集所有结果，将它们合并到一个大列表中并返回该列表。但是 - 我得到了多个回报。

我究竟做错了什么？还是由于 Windows 处理多处理的奇怪方式导致了这种预期的行为？（Python 2.7.3，Windows7 64 位）

编辑：问题是`if __name__ == '__main__':`. 我在处理另一个问题时发现，请参阅[在子进程中使用多处理](https://stackoverflow.com/questions/14583742/using-multiprocessing-in-a-sub-process)以获得完整的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:05:08.553

`if __name__ == '__main__'`是在错误的地方。一个快速的解决方法是只保护对 mp_factorizer 的调用，就像 Janne Karila 建议的那样：

```
if __name__ == '__main__':
    print mp_factorizer(list, 2, someobject) 
```

但是，在 Windows 上，主文件将在执行时执行一次 + 每个工作线程执行一次，在这种情况下为 2。所以这将是主线程的总共 3 次执行，不包括代码的受保护部分。

一旦在同一个主线程中进行其他计算，这可能会导致问题，并且至少会不必要地降低性能。即使只有工作函数应该执行几次，在 Windows 中，所有不受`if __name__ == '__main__'`.

因此解决方案是通过仅在 `if __name__ == '__main__'`.

但是，如果工作函数在*同一个文件*中，则需要从该 if 语句中排除它，因为否则它不能被多次调用以进行多处理。

伪代码主线程：

```
# Import stuff
if __name__ == '__main__':
    #execute whatever you want, it will only be executed 
    #as often as you intend it to
    #execute the function that starts multiprocessing, 
    #in this case mp_factorizer()
    #there is no worker function code here, it's in another file. 
```

即使整个主进程都受到保护，worker函数仍然可以启动，只要它在另一个文件中。

伪代码主线程，带有worker函数：

```
# Import stuff
#If the worker code is in the main thread, exclude it from the if statement:
def worker():
    #worker code
if __name__ == '__main__':
    #execute whatever you want, it will only be executed 
    #as often as you intend it to
    #execute the function that starts multiprocessing, 
    #in this case mp_factorizer()
#All code outside of the if statement will be executed multiple times
#depending on the # of assigned worker threads. 
```

有关可运行代码的详细说明，请参阅[在子进程中使用多处理](https://stackoverflow.com/questions/14583742/using-multiprocessing-in-a-sub-process)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:00:03.047

你的`if __name__ == '__main__'`陈述在错误的地方。将它放在`print`语句周围以防止子进程执行该行：

```
if __name__ == '__main__':
    print mp_factorizer(list, 2, someobject) 
```

现在你有了`if`inside `mp_factorizer`，它使函数`None`在子进程中调用时返回。

# payment-gateway - 电子资金转账API

> ID：14583029
> 
> 赞同：3
> 
> 时间：2013-01-29T12:34:49.530
> 
> 标签：payment-gateway, paypal, payment

我需要定期向用户的银行账户转账。我不想强迫我的用户拥有一个 Paypal 帐户或一些类似的服务，因此我更喜欢使用用户的 IBAN 进行简单的转移，就像 Google Adsense 向其发布商付款的方式一样。

希望我很快就会有很多用户，所以我会进行大量传输（最初是数千，希望会变成数百万），因此我需要使用 Web 服务自动执行传输。

我一直在四处寻找，我的问题是：有哪些服务可以做这样的事情，在全球范围内（或至少在欧洲和美国）运营？Dwolla 仅在美国运营。我不清楚 Paypal 或 Amazon Payments 是否提供这种服务。

# ios - 在 iOS6 中获取用户头像？

> ID：14583030
> 
> 赞同：0
> 
> 时间：2013-01-29T12:34:50.533
> 
> 标签：ios, facebook, ios6

我试过这个：

```
meurl = [NSURL URLWithString:@"https://graph.facebook.com/me/picture"];
SLRequest *imageReq =[SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:meurl parameters:nil];
imageReq.account = self.facebookAccount;

[imageReq performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if (error) {
        NSLog(@"error -%@", [error debugDescription]);
    }else{
        NSString *meDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

        NSLog(@"image -%@", meDataString);
    }

}]; 
```

但我明白了`image - (nil)`。

我在该代码上方有另一个请求用户信息，我得到所有数据就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:00:12.220

您可以使用

[https://graph.facebook.com/XXXXXX/图片](https://graph.facebook.com/XXXXXX/picture)

其中 XXXXXX 是您在 FB 上的 id。

要获取您的 id，您可以使用：

[https://graph.facebook.com/me](https://graph.facebook.com/me)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T12:21:53.667

@shannoga - 你几乎是在正确的道路上。在您的请求中，您必须使用 Facebook 用户 ID，而不是我。为此，首先提出此请求以获取用户详细信息 - [https://graph.facebook.com/me](https://graph.facebook.com/me)。然后从这个请求中，从 json 解析的响应数据中获取处理程序中的用户 id。使用此用户 ID 发出此请求 - [https://graph.facebook.com/userid/picture](https://graph.facebook.com/userid/picture)。在响应中，您将获得响应数据，即您的个人资料图像数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T00:03:21.357

图片在您的 responseData 变量中

你可以使用这个：

```
NSLog(@"image -%@", responseData); 
```

查看图像十六进制值

# javascript - 单击一个按钮时调用两个动作 Codeigniter

> ID：14583031
> 
> 赞同：0
> 
> 时间：2013-01-29T12:35:01.153
> 
> 标签：javascript, codeigniter

如何让一个按钮调用两个不同的操作，因为我有打印按钮，它应该从同一个控制器调用 2 个不同的操作来打印两个不同的页面？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:39:23.913

一次调用两个动作是没有意义的，如果你想打印两个页面，用户必须发出两个请求，并且他必须打开两个窗口，所以这是通过打开第二个窗口到所需的 URL 并发送用户在其当前窗口中执行其他操作。

在纯 JavaScript 中：

```
window.open("http://domain.com/controller/action_one");
window.location = "http://domain.com/controller/action_two"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:20:01.810

让按钮调用一个控制器功能，从第一个调用另一个功能。

```
echo form_open('myForm', '/myFunction');
echo form_submit(); 
```

控制器：

```
 function myFunction() {
    //do stuff;
    $this->mySecondFunction();
 }

 function mySecondFunction() {
    do more stuff;
 } 
```

# c# - 从标签和 properties.system.default 添加小时

> ID：14583036
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:35:20.870
> 
> 标签：c#, winforms, timer

我制作了一个计数器，它是一个简单的计数器，从 00:00:00 开始，每秒钟递增一次，我将为此提供我的代码

在表单加载事件中我写了这个

```
 private DateTime startTime; 
        private void Form7_Load(object sender, EventArgs e)
        {
            startTime = DateTime.Now; 
            timer1.Start();

        }

 private void timer1_Tick(object sender, System.EventArgs e)
            {

                counter_label.Text = (DateTime.Now - startTime)
.ToString(@"hh\:mm\:ss");
            } 
```

计时器设置为 1000 意味着 1 秒，所以我的计时器工作正常，但现在我想将 label.text 保存到位于 properties.settings.default 中的 winform 设置中，所以我将文本保存到

```
private void Form7_FormClosing(object sender, FormClosingEventArgs e)
        {

            DateTime st;
            DateTime end;
            st = Convert.ToDateTime(Properties.Settings.Default.datetime);
            end = Convert.ToDateTime(counter_label.Text);

            Properties.Settings.Default.datetime = counter_label.Text;
          total_label.Text = (st + end ).ToString(@"hh\:mm\:ss");// this is not happening

          Properties.Settings.Default.datetime = total_label.Text;
            Properties.Settings.Default.Save();
        } 
```

错误是操作数 + 不能应用于 system.datetime 和 system.datetime 我的意图是。当我将文本保存到系统属性时。在表单关闭事件中，必须保存新的更新结果。system.properties 中的旧文本和 counter_label 中的新文本。如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:42:53.760

您不能添加两个日期时间对象。我相信你`counter_label`有一个`TimeSpan`值，因为它的格式是`00:00:00`，你可以解析它`TimeSpan`然后将它添加到你的`st`DateTime 类型对象中。

```
TimeSpan ts = TimeSpan.Parse(counter_label.Text);
total_label.Text = st.Add(ts).ToString(@"hh\:mm\:ss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:42:33.533

**运算符 + 定义如下：**

```
public static DateTime operator +(
    DateTime d,
    TimeSpan t
) 
```

**将指定的时间间隔添加到指定的日期和时间，产生新的日期和时间。** ****您只能将 (+) timeSpand 添加到 dateTime ！！！！**** 修复代码：

```
TimeSpan sp = TimeSpan.Parse(counter_label.Text);
total_label.Text = (st+sp).ToString(@"hh\:mm\:ss"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:55:19.487

不要使用`string`类型设置来存储`TimeSpan`对象（正如 Habib 已经说过的，`DateTime`对象的减法或加法会产生`TimeSpan`）。您应该创建文件类型`System.TimeSpan`的设置`Settings.settings`（例如，名称为 TotalTime）。

保存：

```
Properties.Settings.Default.TotalTime = (DateTime.Now - startTime);
Properties.Settings.Default.Save(); 
```

正在加载（这里有个窍门——你是从当前时间中减去剩下的时间。所以，如果你还有两分钟的时间，开始时间将在你开始应用之前设置为两分钟，就像你从来没有关闭它一样）：

```
startTime = DateTime.Now.Subtract(Properties.Settings.Default.TotalTime); 
```

因此，您不需要解析任何字符串。使用 DateTime 和 TimeSpan，让 .NET 为您完成所有持久性工作。

* * *

更新（所有代码）：

```
DateTime startTime;

private void timer1_Tick(object sender, EventArgs e)
{
    label1.Text = (DateTime.Now - startTime).ToString(@"hh\:mm\:ss");
}

private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    timer1.Stop();
    Properties.Settings.Default.TotalTime = (DateTime.Now - startTime);
    Properties.Settings.Default.Save();
}

private void Form1_Load(object sender, EventArgs e)
{
    startTime = DateTime.Now.Subtract(Properties.Settings.Default.TotalTime);
    timer1.Start();
} 
```

如果它是您的应用程序的第一次运行，`Properties.Settings.Default.TotalTime`则将返回默认值`TimeSpan`（即零时间跨度）。因此，从当前时间中减去它将返回与当前时间相同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:42:39.843

两者的区别`DateTime`不是另一个`DateTime`，而是一个`TimeSpan`。所以你要坚持的不是片刻时间，而是总的运行时间，应该是`TimeSpan`.

# c# - 如何使用 Datatriggers 以应用不同的样式属性

> ID：14583037
> 
> 赞同：0
> 
> 时间：2013-01-29T12:35:21.743
> 
> 标签：c#, wpf, xaml

到目前为止，我使用`<Style.Triggers>`and`DataTrigger`是为了根据条件将不同的样式属性应用于项目（在本例中为 TextBox）。

但现在我想根据条件`DataTrigger`将`Style`属性设置为我在别处定义的静态资源。

如果我使用 TextBox.Triggers 我得到一个错误，我不能在其中使用 DataTriggers 只是 EventTriggers 这不是我想要的。

我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:58:59.403

至少对于我的情况，似乎已经通过样式继承找到了合适的解决方案。如果我这样定义样式

在下面的代码`ReadOnlyTextBox`中是我默认拥有的样式，并且基于我重写的我的一个属性上的 Datatrigger `InEditMode`- 撤消它的一些默认样式属性，例如`<Setter Property="IsReadOnly" Value="True" />`在默认`ReadOnlyTextBox`样式中设置的

```
<TextBox.Style>
    <Style BasedOn="{StaticResource ReadOnlyTextBox}" TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding InEditMode}" Value="True">
                <Setter Property="IsReadOnly" Value="False" />
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Focusable" Value="True"/>
                <Setter Property="IsReadOnlyCaretVisible" Value="True"/>
                <Setter Property="KeyboardNavigation.IsTabStop" Value="True"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</TextBox.Style> 
```

# vb.net - JSON 对象数组使用什么类型？

> ID：14583038
> 
> 赞同：0
> 
> 时间：2013-01-29T12:35:25.437
> 
> 标签：vb.net, json, types, casting, method-signature

我有一个接收 JSON 有效负载的 WCF 服务。

例如，像这样的有效负载：

```
{ "a":"123", "b":"xyz" } 
```

适用于以下服务方法签名：

```
<OperationContract()>
Public Sub SomeMethod(ByVal a As Integer, ByVal b As String) 
```

`a`并`b`分别自动转换为 an`Integer`和 a `String`。

但是，现在我需要向服务方法发送一个稍微复杂一点的参数，它不是 an`Integer`或 a `String`：

```
{ "a":"123", "b":"xyz", "c":"[ { "key":"1", "val":"2" }, { "key":"2", "val":"3" } ]" } 
```

基本上，`c`是一个包含键值对的对象数组（即 JSON 对象）。`c`那么，我在服务方法签名中声明什么类型？我对VB不是很熟悉，所以我不知道有哪些类型可用。如果可能，还请提供一个示例，说明如何从您建议的任何类型中获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:06:10.760

我使用`System.Collections.ArrayList`它，然后您可以使用`For Each`.

我不知道你用什么来反序列化你的 JSON，但我使用`JavaScriptSerializer`，例如..

```
Imports System.Collections
Imports System.Collections.Generic
Imports System.Web.Script.Serialization 
```

进而...

```
Dim sJSON as String = "{}" 'Contains the JSON in your question
Dim jsSerializer As JavaScriptSerializer = New JavaScriptSerializer()

Dim dictData As Dictionary(Of String, Object) = jsSerializer.Deserialize(Of Dictionary(Of String, Object))(sJSON)

If dictData.ContainsKey("c") Then
    If TypeOf dictData("c") Is ArrayList Then
        Dim arrData As ArrayList = DirectCast(dictData("c"), ArrayList)
        For Each arrDataRecord In arrData
        Next
    End If
End If 
```

# mysql - MySQL外键？

> ID：14583050
> 
> 赞同：-2
> 
> 时间：2013-01-29T12:36:04.407
> 
> 标签：mysql

我有两个mysql表，约会和用户......我的想法是当用户登录并预约时将该约会存储在他的用户个人资料中，这样他就可以稍后取消该特定约会，所以正如我所说我有两个主要的表名为 id 的键...我如何在用户配置文件中显示约会？因为我已经制作了这两个表，我使用 alter table 在用户表中添加外键约会_id，查询顺利但没有任何改变...我有点新所以任何帮助将不胜感激......

我很抱歉没有发布表格，我是新的......他们在这里......这实际上不是我的代码，它的 joomla 组件代码，现在正如我所说，当用户登录并预约时，我希望用户能够去他的用户个人资料并在那里查看他所做的所有约会，也许这可以通过其他方式完成，但我的想法是在表格中使用外键......

用户

```
CREATE TABLE `jos_users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `name` varchar(255) NOT NULL DEFAULT '',
 `username` varchar(150) NOT NULL DEFAULT '',
 `email` varchar(100) NOT NULL DEFAULT '',
 `password` varchar(100) NOT NULL DEFAULT '',
 `usertype` varchar(25) NOT NULL DEFAULT '',
 `block` tinyint(4) NOT NULL DEFAULT '0',
 `sendEmail` tinyint(4) DEFAULT '0',
 `registerDate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `lastvisitDate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `activation` varchar(100) NOT NULL DEFAULT '',
 `params` text NOT NULL,
 `lastResetTime` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'Date of last password reset',
 `resetCount` int(11) NOT NULL DEFAULT '0' COMMENT 'Count of password resets since lastResetTime',
 `fk_appointments` int(11) NOT NULL,
 PRIMARY KEY (`id`),
 KEY `usertype` (`usertype`),
 KEY `idx_name` (`name`),
 KEY `idx_block` (`block`),
 KEY `username` (`username`),
 KEY `email` (`email`)
) ENGINE=MyISAM AUTO_INCREMENT=574 DEFAULT CHARSET=utf8 
```

约会

```
CREATE TABLE `jos_jxtc_appbook_appointments` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `checked_out` int(11) NOT NULL,
 `checked_out_time` datetime NOT NULL,
 `ordering` int(11) NOT NULL,
 `published` tinyint(4) NOT NULL,
 `parent_id` int(11) NOT NULL,
 `user_id` int(11) NOT NULL,
 `title` varchar(255) NOT NULL,
 `email` tinytext NOT NULL,
 `date` date NOT NULL,
 `duration` time NOT NULL,
 `start` time NOT NULL,
 `end` time NOT NULL,
 `field1` text NOT NULL,
 `field2` text NOT NULL,
 `field3` text NOT NULL,
 `field4` text NOT NULL,
 `field5` text NOT NULL,
 `field6` text NOT NULL,
 `field7` text NOT NULL,
 `field8` text NOT NULL,
 `field9` text NOT NULL,
 `field10` text NOT NULL,
 PRIMARY KEY (`id`),
 KEY `parent_id` (`parent_id`),
 KEY `user_id` (`user_id`)
) ENGINE=MyISAM AUTO_INCREMENT=309 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:39:04.550

就像是：

```
select * from appointments where user.id=appointment.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:41:10.720

您必须使用联接：

```
select * from users u, appointments a where u.appointment_id=a.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:16:32.023

最终，我在表 userident-int 中创建了一个新值，并在表单中创建了一个新输入，该输入将存储提交该表单的用户的 id ...

```
<input type="hidden" name="userident" ide="userident" value="<?php $user =& JFactory::getUser(); echo $user->id; ?>" 
```

# php - 无法在ajax成功功能上提交表单

> ID：14583055
> 
> 赞同：0
> 
> 时间：2013-01-29T12:36:13.473
> 
> 标签：php, javascript, jquery, ajax

**我的联系表格有谷歌验证码。我必须在验证码验证后提交表格。这是我的jQuery代码。我验证正确。但我的问题是，当结果为真时，我无法提交表单。**

```
jQuery('#citygreen-contact-us-submit').on('click',function(){
  var contact_us_form = jQuery("#contact-us-form");
     jQuerythis=jQuery(this);
        jQueryfeedback_loader=jQuery("#contact-us-loader");
        jQueryfeedback_status=jQuery("#contact-us-status");
        jQueryfeedback_loader.show();
        jQuery.ajax({
           type: "POST",
           url: ajax_url,
           dataType: 'json',
           data: "action=contact_us_validator&"+contact_us_form.serialize(),
           success  : function(result) {
              jQueryfeedback_loader.hide();
              alert(result.status);
              if(result.status == 'true') {
                 contact_us_form.submit();
              }
              else {
                 jQueryfeedback_status.addClass("error");
                 jQueryfeedback_status.html(result.message).slideDown();
                 Recaptcha.reload();
              }
           },
           error: function(testObj) {
              alert("Try Again Later");
           }
        });

     return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:43:27.220

我发现了另一个插件，比如验证码，可以使用 jquery 进行验证。我给出了克服这个问题的解决方案。

```
[Real Person Plugin]http://keith-wood.name/realPerson.html 
```

**jQuery函数：**

```
function rpHash(value) { 
    var hash = 5381; 
    value = value.toUpperCase(); 
    for(var i = 0; i < value.length; i++) { 
        hash = ((hash << 5) + hash) + value.charCodeAt(i);
    } 
    return hash; 
} 
```

# javascript - “无法读取 null 的属性‘内容’”：伪元素

> ID：14583062
> 
> 赞同：0
> 
> 时间：2013-01-29T12:36:46.450
> 
> 标签：javascript, css, cordova

[我从这里](http://www.fettblog.eu/blog/2012/04/16/robust-but-hacky-way-of-portraitlandscape-detection/)改编了一些代码，以检测我的 Phonegap 应用程序中的方向变化（为横向和纵向加载不同的 CSS 文件）。我收到“无法读取属性‘内容’的空错误，这意味着 DOM 调用有问题。代码涉及将这些伪元素添加到主 CSS 文件中：

```
/*Orientation Detection Hack*/
body:after {
    content: "";
    position: absolute;
    color: transparent;
}

@media all and (orientation: portrait) {
    body:after {
        content: "p";
    }
}

@media all and (orientation: landscape) {
    body:after {
        content: "l";
    }
}
/*end of orientation detection*/ 
```

这个事件监听器检查方向变化的伪元素：

```
/*ORIENTATION CHANGES*/
    //get style of the body:after element
var bodyAfterStyle = window.getComputedStyle(document.body, ":after");

window.onorientationchange = function() {

  navigator.notification.alert(
        'ORIENTATION CHANGELOL',  // message
        'Credits',            // title
        'Credits');              // buttonName

  if(bodyAfterStyle.content == 'p') {

/*whatever
    navigator.notification.alert("Now in Portrait");
    var sheet = document.createElement('link');
    sheet.innerHTML = 'href=\"portrait.css\" rel=\"stylesheet\"  type=\"text/css\"';
    document.body.appendChild(sheet);
end whatever*/
} 
    else if(bodyAfterStyle.content == 'l') {
    //do landscape stuff
  }
}
    /*END OF ORIENTATION STUFF*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:46:13.127

似乎 bodyAfterStyle 丢失了，我建议将其分配移动到事件函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:41:34.427

您需要在`orientationchange`事件处理程序中请求计算的样式以获取**新的伪元素**样式。

引用[文档对象模型 CSS](http://www.w3.org/TR/DOM-Level-2-Style/css.html#CSS-CSSview-getComputedStyle) W3C 规范`getComputedStyle`：

> 由于计算样式与 Element 节点相关，如果从文档中删除该元素，则与该声明相关的关联 CSSStyleDeclaration 和 CSSValue 不再有效。

对您的情况的解释是，当媒体查询开始时，伪元素实例会发生变化。伪元素实际上已被删除并替换为新元素。在您的代码中，`bodyAfterStyle`引用指向不再可用的旧实例。

# database - Form_Current 中带有标签标题的 DLookUp 行为

> ID：14583063
> 
> 赞同：1
> 
> 时间：2013-01-29T12:36:47.027
> 
> 标签：database, forms, ms-access, lookup, caption

在此处访问 2010。

好的，Dlookups 的行为会根据它们的使用位置而有所不同。我在 ClockNo_AferUpdate() 子例程中有这个 Dlookup，该子例程在新表单条目上运行良好，可根据在 ClockNo 组合框中输入的“ClockNo”将标签的标题更改为“EmployeeName”字段下的“Employees”DB 中找到的内容：

```
Me.LabelName1.Caption = DLookup("[EmployeeName]", "Employees", "[ClockNo] =" & Forms![InspectionEntryForm]!ClockNo) 
```

雇员数据库有四个字段：自动编号类型“ID”、编号类型“ClockNo”、文本类型“Shift”和文本类型“雇员姓名”。

***重新编辑：***

ClockNo 组合框的 RowSource 来自员工数据库：

```
SELECT DISTINCTROW [ClockNo], [EmployeeName] FROM [Employees] ORDER BY [ClockNo]; 
```

***结束重新编辑***

我正在寻找的是 Form_Current() 中的相同功能，因此浏览旧条目会根据输入的 ClockNo 保留标签的标题。不幸的是，简单地重新使用上述 Dlookup 会给出“运行时错误 '3075'：查询表达式 '[ClockNo] =' 中的语法错误（缺少运算符）”。

将 Dlookup 作为控制源附加到文本框确实可以，但标签似乎是这里的最佳用途。我已经在 Dloopkup 的 Criteria 部分搞砸了一段时间，但没有任何真正的成功。

最终目标是在组合框旁边有一个简单的标签，该标签根据员工当前和过去的 ClockNo 条目显示员工的姓名。该姓名与他们的时钟号码和班次一起存储在一个单独的员工数据库中。

这应该很简单，因为 ClockNo 条目和 Label 都在同一个表单上使用同一个数据库进行操作。感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:03:02.877

您有一个以此命名的组合框`ClockNo`作为其行源：

```
SELECT DISTINCTROW [ClockNo], [EmployeeName]
FROM [Employees]
ORDER BY [ClockNo]; 
```

我不确定你为什么想要`DISTINCTROW`那里。我会怀疑`DISTINCT`更合适。但我不认为这很重要。

重要的一点是组合已经包含`[EmployeeName]`，因此您不需要再次使用`DLookup`fetch `[EmployeeName]`。只需从组合所选行的第二列中读取值。

假设您的表单包含一个名为`txtEmployeeName`. 在表单的当前事件中，您可以这样做：

```
Me.txtEmployeeName = Me.ClockNo.Column(1) 
```

注意列索引号从 0 开始，所以第二列是`.Column(1)`.

你可以在组合的更新后事件中做同样的事情。

最后，您想更改标签的`.Caption`，但我向您展示了如何更改文本框的`.Value`。如果您不能使此技术与标签一起使用，请改用文本框。您可以将文本框的`Enabled`属性设置为`No`并调整其其他属性，使其在视觉上与标签无法区分。

另一种方法可能更简单。如果您想保留`[ClockNo]`为组合的绑定值，但愿意显示`[EmployeeName]`为组合的选定值，您可以将第一列 ( `[ClockNo]`) 的宽度设置为零。您仍然会在下拉菜单中看到`[ClockNo]`和`[EmployeeName]`。如果这是可以接受的，您就不需要使用标签或文本框。

# c# - DevExpress 将 GridView 导出到 Excel

> ID：14583067
> 
> 赞同：11
> 
> 时间：2013-01-29T12:36:57.970
> 
> 标签：c#, excel, devexpress

我真的需要帮助..我在互联网上找不到任何示例 我正在使用 DevExpress GridView 我需要将它发送到 excel 并且我遇到了循环到每个单元格和列的问题，因为 DevExpress 包含不同的方法然后数据网格视图

这就是我正在尝试编写的代码。我真的很感谢你的帮助

```
 public class Form1 : System.Windows.Forms.Form
    {
    Microsoft.Office.Interop.Excel.ApplicationClass ExcelApp = new Microsoft.Office.Interop.Excel.ApplicationClass();

    string FirstName = "First Name";
    string FatherName = "Father Name";
    string LastName = "Last Name";
    }
    public Form1()
    {
        ExcelApp.Application.Workbooks.Add(Type.Missing);
        ExcelApp.Columns.ColumnWidth = 20;
        //
        // Required for Windows Form Designer support
        //
        InitializeComponent();

        //
        // TODO: Add any constructor code after InitializeComponent call
        //
    }
    private void simpleButton1_Click(object sender, System.EventArgs e)
    {
        try
        {
            OleDbConnection con = new OleDbConnection();
            con.ConnectionString = "Provider=Microsoft.Ace.OLEDB.12.0;Data Source=C:\\Users\\pc\\Documents\\Emp.xlsx;Extended Properties=\"Excel 12.0;HDR=Yes\"";

            con.Open();
            DataTable dtSchema;
            dtSchema = con.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });
            OleDbCommand Command = new OleDbCommand ("select * FROM [" + dtSchema.Rows[0]["TABLE_NAME"].ToString() + "]", con);
            OleDbDataAdapter da = new OleDbDataAdapter(Command);
            DataSet ds = new DataSet ();
            da.Fill(ds);
            dataGrid1.DataSource = ds.Tables[0];
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

    private void ExportBtn_Click(object sender, System.EventArgs e)
    {
        for (int i = 1; i < gridView3.Columns.Count + 1; i++)
        {
            //ExcelApp.Cells[1, i] = gridView3.Columns[i].HeaderStyleName;

        }
        for (int i = 0; i< gridView3.RowCount - 1; i++)
        {
            for (int j = 0; j < gridView3.Columns.Count; j++)
            {
                ExcelApp.Cells[i + 2, j + 1] = gridView3.Columns[j].ToString();
            }
        }
        ExcelApp.ActiveWorkbook.SaveCopyAs("C:\\Users\\pc\\Emp.xlsx");
        ExcelApp.ActiveWorkbook.Saved = true;
        ExcelApp.Quit();
    } 
```

我的问题出在“导出”按钮的点击事件中。没有 Row() 这样的东西

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T14:33:18.717

要了解 XtraGrid 的各种导出方法，请查看[导出方法和设置](http://documentation.devexpress.com/#WindowsForms/CustomDocument995)

使用[GridControl.ExportToXls(String)](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridGridControl_ExportToXlstopic833)方法

示例代码片段：

```
private void mnuExportTable_ItemClick_1(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
    using (SaveFileDialog saveDialog = new SaveFileDialog())
    {
        saveDialog.Filter = "Excel (2003)(.xls)|*.xls|Excel (2010) (.xlsx)|*.xlsx |RichText File (.rtf)|*.rtf |Pdf File (.pdf)|*.pdf |Html File (.html)|*.html";
        if (saveDialog.ShowDialog() != DialogResult.Cancel)
        {
            string exportFilePath = saveDialog.FileName;
            string fileExtenstion = new FileInfo(exportFilePath).Extension;

            switch (fileExtenstion)
            {
                case ".xls":
                    gridControl.ExportToXls(exportFilePath);
                    break;
                case ".xlsx":
                    gridControl.ExportToXlsx(exportFilePath);
                    break;
                case ".rtf":
                    gridControl.ExportToRtf(exportFilePath);
                    break;
                case ".pdf":
                    gridControl.ExportToPdf(exportFilePath);
                    break;
                case ".html":
                    gridControl.ExportToHtml(exportFilePath);
                    break;
                case ".mht":
                    gridControl.ExportToMht(exportFilePath);
                    break;
                default:
                    break;
            }

            if (File.Exists(exportFilePath))
            {
               try
               {
                   //Try to open the file and let windows decide how to open it.
                   System.Diagnostics.Process.Start(exportFilePath);
                }
                catch
                {
                    String msg = "The file could not be opened." + Environment.NewLine + Environment.NewLine + "Path: " + exportFilePath;
                    MessageBox.Show(msg, "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
             }
             else
             {
                 String msg = "The file could not be saved." + Environment.NewLine + Environment.NewLine + "Path: " + exportFilePath;
                 MessageBox.Show(msg, "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
             }
        }
    }
} 
```

参考：
[将多个 XtraGrid 控件导出到单个 Excel 文件](https://stackoverflow.com/questions/10318573/exporting-several-xtragrid-controls-to-a-single-excel-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-24T07:09:38.950

试试下面的代码。SaveFileDialog1 是工具还添加所需的引用-

```
 Try

        Dim sv As New SaveFileDialog1
        SaveFileDialog1.Filter = "Excel Workbook|*.xlsx"
        If SaveFileDialog1.ShowDialog() = DialogResult.OK And SaveFileDialog1.FileName <> Nothing Then
            If SaveFileDialog1.FileName.EndsWith(".xlsx") Then
                Dim path = SaveFileDialog1.FileName.ToString()
                GridControlAFP.ExportToXlsx(path)
                Dim xlApp As New Excel.Application
                Dim xlWorkBook As Excel.Workbook
                Dim xlWorkSheet As Excel.Worksheet
                xlWorkBook = xlApp.Workbooks.Open(path)
                xlWorkSheet = xlWorkBook.Sheets("Sheet")
                xlWorkSheet.Range("A1:XFD1").EntireColumn.AutoFit()

                xlWorkBook.Save()
                xlWorkBook.Close()
                xlApp.Quit()
            End If

            MessageBox.Show("Data Exported to :" + vbCrLf + SaveFileDialog1.FileName, "Business Intelligence Portal", MessageBoxButtons.OK, MessageBoxIcon.Information, MessageBoxDefaultButton.Button1)
            SaveFileDialog1.FileName = Nothing

        End If
    Catch ex As Exception
    End Try 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-20T05:56:45.183

该`selectgridvalues`函数以 Datatable 格式返回数据库中的值。在显示按钮中调用此函数会在网格控件中设置这些值。导出按钮将值导出到 .xlsx 格式的 Excel 工作表中

```
 //function to get values from DataTable to gridControl Devexpress
    public DataTable selectgridvalues()
    {
      SqlConnection con;
      con = new SqlConnection();
      con.ConnectionString = "server='SERVER';uid='sa';pwd='1234';database='DBName'";
      con.Open();

      SqlDataAdapter adp = new SqlDataAdapter("select * from Tablename order by id ", con);
      DataTable dt = new DataTable();
      adp.Fill(dt);
      gridControl1.DataSource =dt;
    }

    //code on showdatagridview values button
    public void buttonShow_Click(object sender, EventArgs e)
    {         
        gridControl1.DataSource = selectgridvalues();
    }

     //code on export to excel button
     private void buttonExportExcel_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialogExcel = new SaveFileDialog();
        saveFileDialogExcel.Filter = "Excel files (*.xlsx)|*.xlsx";
        if (saveFileDialogExcel.ShowDialog() == DialogResult.OK)
        {
            string exportFilePath = saveFileDialogExcel.FileName;
            gridControl1.DataSource = selectgridvalues();
            gridControl1.ExportToXlsx(exportFilePath);
        }

    } 
```

# android - 在 Play 商店中按国家/地区制作不同的应用

> ID：14583074
> 
> 赞同：3
> 
> 时间：2013-01-29T12:37:18.250
> 
> 标签：android, locale, google-play

我希望我的应用在 Play 商店中以不同的名称和外观出现，具体取决于国家/地区。

让我们以比利时和法国为例，我们都说法语。

在我的 apk 中，使用

```
French, Belgium (fr_BE)  
French, France (fr_FR) 
//Same would apply for US- New Zealand, US, UK, etc... 
```

所以我根据它们各自的标志和特性提供了不同的外观和感觉，但问题是在发布的时候出现。

该应用程序在法国本地化为“MyCrazyApp.fr”，在比利时本地化为“MyAwesomeApp.be”。

有没有办法让 Play 商店对这两个国家/地区显示不同的屏幕截图和描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:56:30.020

是的，在新的开发者控制台中这是可能的。在右上角应该有一个橙色链接，上面写着“尝试新设计”。

通常你的开发者控制台会在这里：

[https://play.google.com/apps/publish/Home?dev_acc=](https://play.google.com/apps/publish/Home?dev_acc=) ...

新版本在这里：

[https://play.google.com/apps/publish/v2/?dev_acc=](https://play.google.com/apps/publish/v2/?dev_acc=) ...

# html - 悬停时避免改变我的旗帜颜色

> ID：14583080
> 
> 赞同：1
> 
> 时间：2013-01-29T12:37:39.513
> 
> 标签：html, css

我有一个带有标志的表格，用于标记一些行。

我有以下CSS

```
<table class="hovered no-border" data-url="@Url.Action("General", "Transport")">
    <tbody>
        <tr>
            <td><input type="checkbox" value="0"/></td>
            <td>TNB.12/00125</td>
            <td><i class="icon-flag-3 fg-color-grayLight"></i> Blah blah blah</td>
        </tr>
        <tr>
            <td><input type="checkbox" value="0"/></td>
            <td>TNB.12/00128</td>
            <td><i class="icon-flag-3 fg-color-grayLight"></i> Blah blah blah</td>
        </tr>
        <tr>
            <td><input type="checkbox" value="0"/></td>
            <td>TNB.12/00129</td>
            <td><i class="icon-flag-3 fg-color-grayLight"></i> Blah blah blah</td>
        </tr>
        <tr>
            <td><input type="checkbox" value="0"/></td>
            <td>TNB.12/00119</td>
            <td><i class="icon-flag-3 fg-color-yellow"></i> Blah blah blah</td>
        </tr>
    </tbody>
</table>

table.hovered tbody tr:hover {
  background-color: #ececec; 
}
table.hovered tbody tr td:hover i {
  color: #9a9a9a !important;
}

[class^="icon-"]:before,
[class*=" icon-"]:before {
  font-family: 'iconFont';
  font-style: normal;
  speak: none;
  font-weight: normal;
  display: inline-block;
  text-decoration: inherit;
  margin: 0 2px;
  -webkit-font-smoothing: antialiased;
  border: 1px transparent solid;
}
.icon-flag-3:before {
   content: "\e14f";
} 
```

![在此处输入图像描述](../Images/406e9c60433e1c6f9b385a6fd5122695.png)

当一行悬停时，我将标志的颜色从 grayLight 更改为深灰色。这是用我的css完成的。

如您所见，#119 行用黄色标志装饰。

**我的问题：**当行悬停时，我不想更改黄旗的颜色。如何避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:42:16.363

我会像这样覆盖灰色标志的颜色：

```
table.hovered tbody tr td:hover i.fg-color-grayLight {
  color: #9a9a9a !important;
} 
```

# gtk - 在林间空地，我怎样才能在父母和孩子之间插入一个小部件？

> ID：14583083
> 
> 赞同：0
> 
> 时间：2013-01-29T12:37:59.107
> 
> 标签：gtk, glade

我正在使用 Glade 构建一个 GUI。我经常意识到，我需要修改布局，例如在某处添加框架。但是，我发现实现此目的的唯一方法是删除父级的所有子级，插入新容器，然后重建所有子级，但这很麻烦，因为我必须再次设置所有的所有属性这些孩子。另一种方法是直接编辑 XML 文件，但这样做很容易出错并损坏文件。有没有更简单的方法在两个已经存在的小部件（父级和子级）之间插入一个新容器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:44:51.273

我认为您可以剪切，添加您的项目，然后粘贴到其中。

# c++ - 在表达式内部具有内联构造的 POD 类？

> ID：14583090
> 
> 赞同：3
> 
> 时间：2013-01-29T12:38:31.393
> 
> 标签：c++, c++11, clang

我想编写一个包含 X 和 Y 值的 2d（数学）向量类。我希望它对 + 等运算符具有重载，因此我可以轻松地使用它在我的代码中表达数学公式。考虑一下：

```
template <class T>
struct Vector
{
    T x, y;

    inline Vector<T> operator +(const Vector& other) const
    {
        return {x + other.x, y + other.y};
    }
}; 
```

如您所见，我利用了 C++11 在返回语句中使用初始化列表的能力。但是，它们仍然不是表达式——我不能对它们应用操作。我的问题来了。我希望课程是 POD。我无法定义自定义构造函数，以便可以通过参数初始化 x 和 y。这很好，因为我可以使用初始化列表进行构造，例如：

```
Vector<int> foo = {1, 2}; 
```

但是，当我需要在表达式中构造另一个 Vector 时，我不能使用它（运算符 * 未定义，但在这里无关紧要）：

```
Vector<int> result = (foo + {1, 2}) * 12; 
```

正如我之前所说，构造函数替代方案不是一种选择。我很想听听对此的任何意见，因为除了将 {1, 2} 存储在命名变量中之外，我想不出任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:50:37.583

那么最简单的选择是使用聚合初始化创建一个临时的：

```
Vector<int> result = (foo + Vector<int>{1, 2}) * 12; 
```

或者，您可以使用 C++11 的用户定义文字做一些魔术，以便类似的东西`"1,2"_v`成为您的对象之一：

```
Vector<int> operator "" _v(const char* literal, size_t)
{
  std::stringstream literal_stream(literal);
  Vector<int> vec;
  literal_stream >> vec.x;
  literal_stream.ignore();
  literal_stream >> vec.y;
  return vec;
} 
```

不过，您绝对可以在这里进行一些格式检查。然后你可以这样做：

```
Vector<int> result = (foo + "1,2"_v) * 12; 
```

# android - 在 onTouchListener ACTION_MOVE 事件中未调用方法 setAlpha()

> ID：14583091
> 
> 赞同：1
> 
> 时间：2013-01-29T12:38:33.087
> 
> 标签：android, transparency, ontouchlistener, motionevent

我正在尝试`ImageView`通过在屏幕上移动手指来更改 a 的 alpha。我有一个`OnTouchListener`并且`MotionEvent.ACTION_MOVE`我已经把下面的代码。`Log`显示移动手指时 alpha 值变化很好，但`setAlpha`方法不会改变视图的 alpha。图像仅出现一次，具有随机 Alpha 透明度并保持不变。我究竟做错了什么？

```
public boolean onLongClick(View v) {
    if(v.getId() == R.id.button2){          
        longClicked = true;                 
    }
}

private OnTouchListener dialpadTouchListener = new OnTouchListener() {
    public boolean onTouch(View view, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_MOVE){
            if (longClicked) {
                mainView.addView(msg, msgParams);
                mainView.addView(remove, removeParams);
                longClicked = false;
            }
            int alpha = (int)(viewY - event.getRawY());
            msg.setAlpha(alpha);
            Log.i(TAG,"Alpha set to " + alpha);
            return true;
        }
    }
} 
```

# c# - 我如何知道我的网络浏览器是否完成了所有页面的加载

> ID：14583099
> 
> 赞同：0
> 
> 时间：2013-01-29T12:39:07.773
> 
> 标签：c#, html, .net, browser

> **可能重复：**
> [检测 WebBrowser 完整页面加载](https://stackoverflow.com/questions/2777878/detect-webbrowser-complete-page-loading)

我如何知道我的网络浏览器是否完成了所有页面的加载？

如何连续显示多个页面，但如果页面尚未在 C# 上完全下载，我无权访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:45:10.227

要检测 WebBrowser 控件何时完成加载，一旦我使用了以下代码：

```
void BrowserDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
  if (e.Url.AbsolutePath != (sender as WebBrowser).Url.AbsolutePath)
  {
      return; 
  }

   //Page Loading Finished
} 
```

# asp.net - 在 SharePoint 的用户控件中加载 jQuery

> ID：14583102
> 
> 赞同：0
> 
> 时间：2013-01-29T12:39:14.467
> 
> 标签：asp.net, visual-studio-2008, sharepoint, sharepoint-2010, asp.net-3.5

我正在使用 Visual Studio 2008 和 ASP.NET Web 窗体为 SharePoint (2010) 网站创建用户控件。UserControl 通过 SharePoint WebPart 加载。

到目前为止一切正常，但我需要在我的 UserControl 中使用 jQuery。所以我下载了 jQuery 并将其保存在以下文件夹中：

```
C:\inetpub\wwwroot\wss\VirtualDirectories\80 
```

所以我将jQuery（现在）保存在根目录中。

在我后面的 UserControl 代码中，我在`Page_Load`方法中添加了以下行：

```
ScriptLink.Register(this.Page, "~/jquery.min.js", false); 
```

但是当我重新构建我的 UserControl 并将其加载到 SharePoint 页面时，它仍然显示：`The value of the property '$' is null or undefined, not a Function object`.

所以基本上没有找到jQuery。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:02:25.840

我对此不确定，但您应该将 jquery 保存在 14 HIVE 文件夹中。

之后它将加载..

如果我错了，请纠正我

谢谢

# c# - 如何在 WinForms、GDI+ 中绘制和填充像素完美的对称椭圆？

> ID：14583105
> 
> 赞同：8
> 
> 时间：2013-01-29T12:39:23.103
> 
> 标签：c#, winforms, gdi+

我需要绘制（并填充）一个像素完美、非反锯齿的对称椭圆。

我尝试了 和 的各种组合，`InterpolationMode`但我尝试过的组合都没有确保椭圆在所有尺寸下都保持对称和非反锯齿。`SmoothingMode``PixelOffsetMode`

不幸的是，关于该主题的 MSDN 文档不是很准确。

![椭圆在所有尺寸上都不对称](../Images/f32b6aa8e617a04d42b1b97222e831be.png)

用于绘图的代码：

```
g.InterpolationMode = InterpolationMode.NearestNeighbor;
g.SmoothingMode = SmoothingMode.None;
g.PixelOffsetMode = PixelOffsetMode.None;                                
g.DrawEllipse(new Pen(colorPalette.SelectedColor), rect); 
```

填充非反锯齿椭圆也是如此。

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:24:01.863

试试这个，够完美吗？:)

```
e.Graphics.InterpolationMode = InterpolationMode.Bilinear;
e.Graphics.PixelOffsetMode = PixelOffsetMode.Half;
e.Graphics.SmoothingMode = SmoothingMode.None;
e.Graphics.FillEllipse(Brushes.Black, rect); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T02:28:22.547

如果您没有达到视网膜显示的完美圆圈，根据 Leff 的回答，将平滑模式更改为抗锯齿或高质量将修复像素化圆圈。

```
e.Graphics.SmoothingMode = SmoothingMode.AntiAlias; 
```

# jsp - 在JSP中将浮点数格式化为整数

> ID：14583115
> 
> 赞同：2
> 
> 时间：2013-01-29T12:39:53.053
> 
> 标签：jsp, integer, format

我正在处理 JSP 中的问题。基本上，我想采用浮点数，例如 0.4311223 并将其变为 4，这是我的做法：

```
 <c:set var="age" value="${(0.4311223 * 10)}" />

                <fmt:formatNumber var="ageRatio"
                type="number"
                value="${age}"
                maxFractionDigits="0"/>

                Age ratio: ${ageRatio}<br /> 
```

它打印空字符串，当我打印 ${age} 时，它打印正确的值 4.311223。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:50:40.103

您是否包含了标签库？

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %> 
```

请尝试添加`minFractionDigits`属性。我认为您也可以删除该`type`属性。

```
<fmt:formatNumber value="${age}" minFractionDigits="0" maxFractionDigits="0"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-10T11:10:33.430

尝试这样

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<fmt:formatNumber var="ageRatio" type="number" value="${(0.4311223 * 10)}" maxFractionDigits="0"/>
Age ratio: ${ageRatio}<br /> 
```

# javascript - 如何从跨度获取自己的文本而不检索其子节点的文本？

> ID：14583118
> 
> 赞同：1
> 
> 时间：2013-01-29T12:39:59.207
> 
> 标签：javascript, html

我有一段动态形成的 HTML，如下所示：

```
<span>
  10/10/2012
  <div class="calendar">
     lots of text elements here
  </div>
</span> 
```

如何仅检索`10/10/2012`文本？

我试过`span.outerText`了，但它在 IE 和 Chrome 中有效，但在 Firefox 中无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:42:57.603

**使用 jQuery：**

```
var s = $('span').clone();
s.children().remove();
var text = s.text(); 
```

**没有 jQuery ：**

```
var text = '';
for (var i=0; i<spanElement.childNodes.length; i++) {
   var n =  spanElement.childNodes[i];
   if (n.nodeType==3) text += n.textContent;
} 
```

[示范](http://jsbin.com/evowin/1/)

我想您问题中的代码只是一个示例，但以防万一请注意跨度中不允许使用 div（请参阅[跨度允许的内容](http://www.w3.org/TR/html-markup/span.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:43:08.263

这是一个设计问题。将您的第一行包装`<span>`成另一个您可以轻松选择和操作的非块元素有什么问题？

像这样：

```
<span>
  <span class="date">10/10/2012</span>
  <div class="calendar">
  ....
</span> 
```

您的文字将是：

```
$('.date').text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:43:35.237

如果你使用*jQuery*：

```
var text = $("span").clone().children().remove().end().text(); 
```

另一种方式：

```
var text = $("span").contents().filter(function() {
    return this.nodeType === 3;
}).text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:44:45.747

这不是最好的方法，但我可能会使用 innerHTLM 然后解析内容..

```
var tmpText = span.innerHTML;
var text = tmpText.subString(0,tmpText.indexOf('<')); 
```

不漂亮，但它应该可以解决问题。至少在这种情况下.. 如果您有更多文本与其他子节点嵌套，则必须进行更多解析。

# wso2 - WSO2 Identity Server 是否支持用户声明值的预定义选项列表

> ID：14583120
> 
> 赞同：0
> 
> 时间：2013-01-29T12:40:10.397
> 
> 标签：wso2, wso2is

我正在使用最新版本的 WSO2 Identity Server 4.0.0。我正在向用户个人资料添加一些自定义声明。有没有办法为表示带有选项的选择菜单的声明值提供这样的字段，用户只能选择一组预定义的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:39:17.380

我不是 100% 确定你的意思，但是这篇博文 [1] 可能会对你有所帮助。如果您能提供更多详细信息，那就太好了。

[1] [http://pathberiya.blogspot.com/2012/05/claim-management-with-wso2-identity.html](http://pathberiya.blogspot.com/2012/05/claim-management-with-wso2-identity.html)

# c++ - 如何修改传递给 cout 的字符串？

> ID：14583122
> 
> 赞同：3
> 
> 时间：2013-01-29T12:40:16.660
> 
> 标签：c++, iostream

假设我想 rot13 传递给 cout （或另一个 ostream）的每个字符串，这样，说`cout<<"Foo Bar Baz.;"`（或什至`cout<<rot13<<"Foo Bar Baz.";`）输出`Sbb One Onm.`

我该怎么做呢？

（我的第一个想法是用一个可以完成所有工作的 streambuf 派生类替换 cout 的 streambuf。但是看到原始的 streambuf 负责将内容引导到控制台......这根本没有解决。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:29:01.137

您可以编写自己的流，为 char*、std::string 和其他重载 operator<< 并打印转换后的文本。

```
#include <iostream>
#include <string>
#include <algorithm>
#include <iterator>

using namespace std;

class ostream_rot13 : public basic_ostream <char, char_traits<char> >
{
public:
    ostream_rot13(std::basic_streambuf<char, char_traits<char> >* sb) 
    : basic_ostream<char, char_traits<char> >(sb) {}

    ostream_rot13& operator<<(const char* text)
    {
        std::string s(text);

        int rot=13;
        std::transform(std::begin(s), std::end(s), ostream_iterator<char>(*this), [rot] (char c) { 
            if(c >= 'a' && c <= 'z')
                return 'a' + (c + rot - 'a') % 26;
            else if(c >= 'A' && c <= 'Z')
                return 'A' + (c + rot - 'A') % 26;

            return (int)c;
        });

        return *this;
    }
}; 
```

下一步是声明一个这种类型的全局变量，然后声明一个用新变量替换 cout 的宏。

```
ostream_rot13 cout_rot13(std::cout.rdbuf());

#define cout cout_rot13 
```

然后所有的 cout 实例都会变成 cout_rot13。

```
int main() 
{
    cout << "Foo Bar Baz";

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:14:42.250

你不能自己包装 cout 的 streambuf，将所有调用转发到包装的缓冲区吗？
您只需要在将“put”调用转发到包装的 streambuf 之前进行一些编码。

不过，对于一个小 rot13 来说，这是很多工作。

# excel - 带有 OPENDATASOURCE 的 SQL Server 动态 SQL“引用地狱”

> ID：14583124
> 
> 赞同：1
> 
> 时间：2013-01-29T12:40:18.067
> 
> 标签：excel, quotes, dynamic-sql

我想构建一个从 Excel 文件中检索数据的参数化 SQL 查询。

Excel 文件的名称每年都会更改。

这是在 T-SQL 中运行良好的查询（在 SQL Server 2008 R2 Express 上）：

```
SELECT * INTO MobilityData FROM OPENDATASOURCE('Microsoft.Jet.OLEDB.4.0',
'Data Source=\\UNCPath\Annual_Mobility_Update\DAM2013-3.xls;Extended Properties=Excel  8.0')...
[Sheet1$] 
```

去

（UNC 路径是网络 UNC 路径，工作正常）

字符串“DAM2013-3.xls”将逐年变化。我想做的是执行一个参数化的存储过程并动态构建动态 SQL ......

像这样的东西：

```
SELECT @sQry='SELECT * INTO MobilityData FROM OPENDATASOURCE(''''Microsoft.Jet.OLEDB.4.0',
'Data Source=\\sgstore\Shared\operations\DM\Annual_Mobility_Update\''' 
+ @XLFileSource + ';Extended Properties=Excel 8.0'')...[Sheet1$]' 
```

但我似乎陷入了报价地狱，无法编译。

我应该怎么做才能解决这个问题？

我将不胜感激任何提示，钓鱼竿，甚至整条鱼等

谢谢菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:29:46.173

这是固定代码。希望这有帮助

```
SELECT @sQry='SELECT * INTO MobilityData FROM OPENDATASOURCE(''''Microsoft.Jet.OLEDB.4.0'',''Data Source=\\sgstore\Shared\operations\DM\Annual_Mobility_Update\''' 
+ @XLFileSource + ';Extended Properties=Excel 8.0'')...[Sheet1$]' 
```

# .net - 使用 IoC 管理的依赖项部署 ASP.NET MVC 项目

> ID：14583129
> 
> 赞同：0
> 
> 时间：2013-01-29T12:40:39.657
> 
> 标签：.net, asp.net-mvc, inversion-of-control, web-deployment

我们最近为我们的大多数内部解决方案调整了以下通用结构：

```
SolutionRoot
    Interfaces
    Models
    Services
    Repositories
    Web 
```

其中`Services`,`Repositories`并且`Web`仅直接引用`Interfaces`和`Models`项目。所有依赖项都通过 IoC 容器进行管理（我们在内部框架中创建了一个自定义包装器）。当然，`Services`也`Repositories`可能有自己的外部依赖集。

现在，当我们部署`Web`MVC 项目时，我们显然需要在**bin**文件夹中拥有所有必要的 DLL。因为从`Web`项目到特定实现没有直接依赖关系，所以我最终为项目编写了一个简单的构建后脚本`Services`，`Repositories`它将所有相关的 DLL 复制到（或任何其他使用项目的**bin**文件夹）`Web`）。然后我需要在项目中包含相关的 DLL 并将它们标记为内容。

显然，这不是管理部署依赖关系的最舒适的方式。

我想知道是否有更好的方法来解决这个问题。

*注意*：此时，我们还没有 CI 服务器，近期也没有计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:46:15.213

如果以下所有假设都为真：

*   您团队的惯例是永远不要直接从 Web 使用服务和存储库中的实现
*   该公约得到很好的理解和遵守
*   您不需要为不同的部署引用不同的实现

然后采用简单的方法，只需在 Web 项目中引用这些项目。

否则，您将陷入构建后事件。

# jquery-mobile - 使导航栏透明

> ID：14583131
> 
> 赞同：0
> 
> 时间：2013-01-29T12:40:42.153
> 
> 标签：jquery-mobile

我有一个导航栏。有 2 个选项卡。他们有 2 个图像而不是文本。但是，这会使图像显示在中心，并在选项卡中显示填充。如何使此选项卡透明，以便仅显示图像？

```
<div data-role="navbar" data-inset="true" data-filter="true" role="navigation" class="ui-navbar ui-mini" >  
    <img style="max-height:90%; max-width:100%;" src="Header_image.jpg" alt="image"/>
    <ul>
        <li><a href="HolidayList.html" class="ui-btn-active ui-state-persist"><img style="max-height:90%; max-width:100%;"  src="holiday_list_btn.png"/></a></li>
        <li><a href="ClosedLocations.html" class="ui-btn-active ui-state-persist"><img style="max-height:90%; max-width:100%;"  src="Closed_location_btn.png"/><!--CLOSED LOCATIONS--></a></li>         
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:44:17.287

将以下 CSS 位添加到`<img>`每个图像的样式中：

```
padding: 0px; margin: 0px; display: block; 
```

所以——使用你的例子——它看起来像这样：

```
<div data-role="navbar" data-inset="true" data-filter="true" role="navigation" class="ui-navbar ui-mini" >  
    <img style="max-height:90%; max-width:100%; padding: 0px; margin: 0px; display: block;" src="Header_image.jpg" alt="image"/>
    <ul>
        <li><a href="HolidayList.html" class="ui-btn-active ui-state-persist"><img style="max-height:90%; max-width:100%; padding: 0px; margin: 0px; display: block;"  src="holiday_list_btn.png"/></a></li>
        <li><a href="ClosedLocations.html" class="ui-btn-active ui-state-persist"><img style="max-height:90%; max-width:100%; padding: 0px; margin: 0px; display: block;"  src="Closed_location_btn.png"/><!--CLOSED LOCATIONS--></a></li>         
    </ul>
</div> 
```

但是为什么不在标题中使用单独的 CSS 或通过外部文件加载呢？

```
img {
    padding: 0px;
    margin: 0px;
    display: block;
} 
```

这样做会更好地利用 CSS，因为不必为每个图像重复代码并且可以由一个 CSS 定义管理。

一般来说，我建议你有一个影响所有元素的 CSS 规则，如下所示：

```
* {
    padding: 0px;
    margin: 0px;
} 
```

# java - Google App Engine WEB-INF 和 META-INF

> ID：14583136
> 
> 赞同：3
> 
> 时间：2013-01-29T12:41:13.190
> 
> 标签：java, google-app-engine, war, web-inf, meta-inf

当您使用 Google-Eclipse 插件创建一个新的**Web 应用程序项目**时，它会为您创建一个完整的项目目录结构，包括：

```
src/
    META-INF/
        jdoconfig.xml
        persistence.xml
war/
    WEB-INF/
        lib/
        web.xml
        ...etc. 
```

首先，我的*理解*是这`META-INF/`仅适用于实用程序 JAR，不适用于 Web 应用程序 (WAR)。所以`src/META-INF/*`在项目中看到让我感到惊讶。但是后来我看到了像这样打包的 GAE Web 应用程序示例：

```
TheWebApp.war/
    WEB-INF/
        lib/
        classes/
            META-INF/
        web.xml
        ...
    blah.jsp
    ...etc/ 
```

与`WEB-INF/classes/META-INF/`！最重要的是，我没有看到 GAE 项目和`MANIFEST.MF`目录的任何提及，我总是看到使用打包在`META-INF`. 现在我*真的很*困惑。

所以我认为我首先需要确认/澄清一般的作用`META-INF`和作用`WEB-INF`，然后了解它们如何在*任何*Web 应用程序的 WAR 中一起使用，然后了解 GAE 放置在其上的任何特质（如果存在） WAR 结构。

**注意：**我没有使用 Maven，并且不打算至少在接下来的 6 到 12 个月内使用（我现在没有时间学习它）。因此，如果这些问题的任何答案取决于您是否使用基于 Maven 的 buld，我更喜欢非 Maven 答案，因为我使用的是 Ant/Ivy。

所以我问：

1.  `META-INF`对于实用程序（库）JAR、可执行 JAR 和 WAR，目录的正常内容是什么？`MANIFEST.MF`对 WAR（GAE 和非 GAE 类似）是否有必要，为什么或为什么不？
2.  我应该将非 Web 资源放在哪里，以便它们可用于运行时类路径？例如，说我有`environment.properties`或`myapp-custom-resource-config.xml`......我把这些放在哪里？在`WEB-INF/`, `WEB-INF/classes`, `WEB-INF/classes/META-INF`? 别的地方？
3.  GAE 项目`WEB-INF`和`META-INF`目录的正确内容是什么，打包它们的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T19:19:54.767

与 JAR 文件 META-INF 目录一样，根级 /META-INF 目录包含应用程序清单文件。它还可以包含特定 Web 容器或应用程序服务器的资源。例如，Apache Tomcat 在此目录中查找并使用 context.xml 文件来帮助自定义应用程序在 Tomcat 中的部署方式。

与 JAR 文件不同，根级 /META-INF 目录不在应用程序类路径中。您不能使用 ClassLoader 来获取此目录中的资源。但是，/WEB-INF/classes/META-INF 位于类路径中。您可以将所需的任何应用程序资源放在此目录中，并且可以通过 ClassLoader 访问它们。

# c++ - 访问基类对象中的受保护成员

> ID：14583138
> 
> 赞同：2
> 
> 时间：2013-01-29T12:41:14.607
> 
> 标签：c++, inheritance, llvm-clang

考虑：

```
class A {
protected:
    int _i;
};

class B : public A {
    B(const B & object) {
        _i = object._i;
    };

    B(const A & object) {
        _i = object._i;
    };
}; 
```

第一个复制构造函数是正确的，因为权限基于类，而不是对象。所以我可以从我自己的类对象中访问受保护的成员。为什么第二个构造函数（或任何类似方法）会引发编译时错误？

简而言之：为什么 C++ 中的权限检查在这种情况下不考虑类继承规则？

在 Apple LLVM-4.2 中也遇到过这种情况，但在 Apple LLVM-4.1 中没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:54:29.450

> 简而言之：为什么 C++ 中的权限检查在这种情况下不考虑类继承规则？

您正在询问禁止第二个构造函数的规则背后的基本原理。

要理解基本原理，请考虑以下代码：

```
A a;
a._i = 100; //error, _i is protected 
```

这是正确的，也是意料之中的。到现在为止还挺好。

但是**，如果**允许第二个构造函数（在您的代码中），那么任何人都可以将类编写`modify`为：

```
struct modify : public A {
    void i(A & object, int newValue) {
        object._i = newValue; //MODIFY THE PROTECTED MEMBER of the argument!
    };
}; 
```

然后你可以这样做：

```
A a;
modify().i(a, 100); //okay, indirectly modify a._i !!!
std::cout << a._i << std::endl; //prints 100 
```

如果第二个构造函数可以访问`protected`参数的成员，那么`modify::i()`也可以这样做！这样你实际上修改了受保护的成员！

# python - 使用 WXPython 在文本框中显示等待时间

> ID：14583140
> 
> 赞同：-3
> 
> 时间：2013-01-29T12:41:21.957
> 
> 标签：python, wxpython

我想制作一个应用程序，其中有两个按钮（比如单击和确定）和一个文本框。我想在单击两个按钮之间生成等待时间并显示在文本框中。

**例如：-** 如果我首先单击 CLICK 按钮并等待几秒钟/分钟，然后单击 OK 按钮。然后这个等待时间应该显示在文本框中。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:55:14.223

[使用Glade Interface Designer](http://glade.gnome.org/)很容易做到这一点。 `import time`然后，创建一个变量`self.timer = None`。

然后，当 Click's`event`被提出时，只需声明如下内容：`self.timer = time.time()`。

当 OK 出现时`event`，写入`TextBox`: `str((time.time()-self.timer))`。

这对我有用。如果您不使用 glade，您仍然可以在创建 GUI 后使用相同的概念。

* * *

另请参阅 - [Python - time.clock() 与 time.time() - 准确度？](https://stackoverflow.com/questions/85451/python-time-clock-vs-time-time-accuracy)

* * *

如果你问如何在 wxPython 中编写所有代码（包括 GUI），我建议先看一些[教程](http://wiki.wxpython.org/Getting%20Started#A_First_Application:_.22Hello.2C_World.22)。

# c - 在 C 中制作二维字符串数组

> ID：14583144
> 
> 赞同：1
> 
> 时间：2013-01-29T12:41:31.497
> 
> 标签：c, arrays, character

我正在为我的 CS1 课程做一个项目，我遇到了我以前从未想过的事情。我知道 C 中的所有数组本质上都是指向数组第一个元素的指针，而字符串实际上只是一个字符数组。但是，对于我的任务，我们必须读入一个文件，该文件的一部分如下：

```
Brad Tim Rick（更多人名用空格分隔）
露西·安吉拉·蒂娜（更多女性名字以空格分隔）

```

这是一个简短的示例，但我要做的是提取名称并将它们存储到两个单独的数组中，一个用于男性，一个用于女性。

我从来没有用过这样的东西，所以我当然很困惑。这就是我想要做的，当然它不工作......哦，是的，我正在尝试将它们存储在动态分配中。唯一的规范说名称永远不会超过 19 个字符（我应该说 20 以允许字符串末尾的 '/0' 无论如何仍然存在吗？）我如何告诉编译器，“嘿，我想要一个字符串数组，每个字符串可以容纳 19 个字符 + 1 用于“字符串预告片'/0'”？然后我如何通过指针访问它们？

```
char **mens_names, **womens_names;

mens_names = malloc(number_of_couples * sizeof(char[19]));
womens_names = malloc(number_of_couples * sizeof(char[19]));

if(mens_names == NULL){
printf("Malloc failed! Memory could not be allocated to variable mens_names.");
return -1;
}

int i;
for(i = 0; i < number_of_couples; i++){
    fscanf(input_file, "%s", &mens_names[i]);
}

if(womens_names == NULL){
    printf("Malloc failed! Memory could not be allocated to variable womens_names.");
    return -1;
}

for(i = 0; i < number_of_couples; i++){
    fscanf(input_file, "%s", &womens_names[i]);
}

for(i = 0; i < number_of_couples; i++){
    printf("Man: %s ", mens_names[i]);
    printf("Woman: %s\n", womens_names[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:06:45.267

您在谈论二维数组，但仅将其初始化为一维数组。二维数组（矩阵）的正确初始化如下：

```
static char** allocate_matrix(int nrows, int ncols) 
{
    int i;
    char **matrix;

    /*  allocate array of pointers  */
    matrix = malloc( nrows*sizeof(char*));

    if(matrix==NULL)
        return NULL; /* Allocation failed */

    /*  Allocate column for each name  */
    for(i = 0; i < nrows; i++)
        matrix[i] = malloc( ncols*sizeof(char));

    if(matrix[i-1] == NULL) 
        return NULL; /* Allocation failed */

    return matrix;
} 
```

在你的*main()*：

```
<...>
mens_names = allocate_matrix(number_of_couples, 19);
womens_names = allocate_matrix(number_of_couples, 19);
<...>

/* Of course, do not forget to free memory once you are done */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T14:02:08.780

> 我知道C中的所有数组本质上都是指向数组第一个元素的指针

不完全的。数组和指针完全是两个不同的东西。除非它是`sizeof`, `_Alignof`, 或一元运算符的操作数`&`，或者是用于在声明中初始化数组的字符串文字，“N-element array of ”类型的*表达式***将被转换**为“pointer”类型的表达式to " 并且它的值将是数组中第一个元素的地址。 `T`**`T`**

 **鉴于声明

```
int a[10]; 
```

指定的*对象*`a`永远是一个 10 元素数组`int`；但是，*表达式* `a`可以被视为指向第一个元素的指针。

如果您*知道*您的字符串长度永远不会超过 19 个字符（包括终止符在内的 20 个元素），但不提前知道字符串的数量，您可以执行以下操作：

```
char (*mens_names)[20];
char (*womens_names)[20];
...
mens_names = malloc(number_of_couples * sizeof *mens_names);
womens_names = malloc(number_of_couples * sizeof *womens_names);
...
fscanf(input_file, "%s", mens_names[i]);
...
free(mens_names);
free(womens_names); 
```

在这种情况下，我们将和声明`mens_names`为`womens_names`指向 20 元素数组的指针`char`（括号很重要）。因此，`sizeof *mens_names`等价于`sizeof (char [20])`。

您可以像使用常规二维数组一样访问每个单独的字符：

```
char x = mens_names[i][j]; 
```

`mens_names[i]`隐式取消引用`mens_names`指针（请记住，表达式`a[i]`被解释为`*(a + i)`）。

与 KBart 的方法相比，这种方法有几个优点。首先，所有内存都作为单个块连续分配，如果缓存成为问题，这可能很重要。其次，每个数组只需要一个`malloc`和一个`free`。当然，这假设每个名称数组的最大大小是 a) 固定的并且 b) 在编译时已知。

如果您直到运行时才知道名称的大小，并且您使用的是支持可变长度数组的 C99 编译器或 C2011 编译器，则可以执行以下操作：

```
size_t name_len, number_of_couples;
// get name_len from the user or input file
// get number_of_couples
char (*mens_names)[name_len+1] = malloc(number_of_couples * sizeof *mens_names);
... 
```

如果您直到运行时才知道名称的大小，并且您使用的编译器*不*支持 VLA，那么您将需要使用 KBart 的方法。

如果你想变得更*花哨*，你可以使用一个 3 维数组而不是两个 2 维数组：

```
#define MENS_NAMES 0
#define WOMENS_NAMES 1
...
char (*all_names)[2][20] = malloc(number_of_couples * sizeof *all_names);
...
fscanf(input_file, "%s", all_names[i][MENS_NAMES]);
...
free(all_names); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T20:20:51.347

```
void init(char**** tab,int size1d,int size2d,int size_string)
{
    int iterator;
    int iterator_2;

    char*** temp = (char***) calloc(size1d,sizeof(char**));
    for (iterator = 0 ; iterator < size1d;iterator++)
    {
        *(temp+iterator) = (char**) calloc(size2d,sizeof(char*));

        for (iterator_2 = 0;iterator_2 < size2d;iterator_2++)
        {
            *(*(temp+iterator)+iterator_2) = (char*) calloc(size_string,sizeof(char));
        }
    }

    *tab = temp;
}

int main()
{
    char*** tab;

    init(&tab,100,100,255);
    tab[5][99] = "Hi";

    printf("%s",tab[5][99]);
} 
```**

# java - HSQL & Hibernate：不支持的内部操作：Session

> ID：14583147
> 
> 赞同：1
> 
> 时间：2013-01-29T12:41:35.890
> 
> 标签：java, hibernate, jpa, hsqldb

我有一个具有以下依赖项的项目：

```
hibernate-entitymanager-4.1.8
hsql-2.2.8 
```

我有一个持久性单元，包括：

```
<properties>
    <property name="javax.persistence.jdbc.driver" value="org.hsqldb.jdbcDriver"/>
    <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider"/>
    <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
    <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
</properties> 
```

以及一个具有字段的实体：

```
@Lob
@Column(name = "DOCUMENT")
private String document; 
```

当我通过 EntityManager 坚持我的实体时，我看到了堆栈跟踪的以下结尾：

```
Caused by: java.lang.RuntimeException: unsupported internal operation: Session
at org.hsqldb.error.Error.runtimeError(Unknown Source)
at org.hsqldb.Session.performLOBOperation(Unknown Source)
at org.hsqldb.Session.execute(Unknown Source)
at org.hsqldb.types.ClobDataID.nonSpaceLength(Unknown Source)
at org.hsqldb.types.CharacterType.castOrConvertToType(Unknown Source)
at org.hsqldb.types.CharacterType.convertToType(Unknown Source)
at org.hsqldb.StatementDML.getInsertData(Unknown Source)
at org.hsqldb.StatementInsert.getResult(Unknown Source) 
```

在这里做一些明显错误的事情吗？尽管进行了很多更改并且在不同的机器上，这仍然有效。可能是依赖升级或从直接的 Spring/Hibernate 抽象层切换到 JPA/Hiberate 的结果。

其他几个人通过谷歌报告了同样的事情，但没有特别的解决方案:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T12:47:31.070

Hibernate 4.1.8 中的修复创建了回归。对于 HSQLDB，Schema 导出将创建一个限制为 255 个字符的 blog/clob。

[使用 HSQLDB 时，插入任何大于 16Mb 的 CLOB 值总是会失败并出现异常](https://hibernate.atlassian.net/browse/HHH-7541)

[拉取请求](https://github.com/hibernate/hibernate-orm/pull/376/files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T20:58:15.227

此问题已在最新版本的 HSQLDB 中得到修复。2.3.0 版可从 hsqldb.org 获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-23T03:07:18.637

我什至尝试使用较新版本的 HSQLDB 2.4.1 和 Hibernate-core 5.3.6，问题仍然存在。因为 Hibernate 生成的模式只有 255 char 列长度，所以在我的情况下，尝试改变列类型工作（clob 而不是 clob(255)）

`alter table public.user alter column myClobColumn clob`

# c++ - C++ Stl 设置行为

> ID：14583149
> 
> 赞同：1
> 
> 时间：2013-01-29T12:41:44.400
> 
> 标签：c++, stl, set, equivalence, strict-weak-ordering

我试图运行下面的代码。我发现输出存在差异。我了解比较器功能中使用的排序机制存在问题。我基本上要寻找的是：1）Set如何在内部存储数据。2）如何解决此问题或将数据复制到不同集合的最佳方法。3）排序究竟是如何产生这个问题的。

```
#include <iostream>
#include <set>
using namespace std;
struct Comparator {
  bool operator()( const int& a, const int& b ) {
    if( a <= b ) 
      return true;
    else
      return false;
  }
};
int main()
{
  set< int, Comparator > customSet;
  for( unsigned k = 0, index = 2; k < 10; ++k ) {
    customSet.insert( index );
  }

  set< int, Comparator >::iterator iter = customSet.begin();
  for(; iter != customSet.end(); ++iter ) {
    cout<<*iter<<endl;
  }

  cout<<"---------------------------------"<<endl;
  set< int, Comparator > tempCustomSet ;//= customSet;
  tempCustomSet.insert( customSet.begin(), customSet.end() );

  iter = tempCustomSet.begin();
  for(; iter != tempCustomSet.end(); ++iter ) {
    cout<<*iter<<endl;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:42:46.350

有关. [_](http://en.cppreference.com/w/cpp/container/set) _ `std::set`实现不应该与您有关（它们可能因平台而异），因为接口和复杂性保证对标准来说是最重要的。典型的实现是使用[red-black-trees](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)。

您需要`Comparator`使用`operator<`而不是`operator<=`. 原因是如果评估为（即两者都不严格小于另一个） ，`std::set`则将认为元素等效。`!Comparator(a, b) && !Comparator(b, a)``true`

但是有了`<=`，你就有`a <= a`等于`true`，所以`!(a<=a) && !(a<=a)`给出`false`了相等的元素。而`<`你有`a < a`等于`false`所以`!(a<a) && !(a<a)`给`true`。

做事的权利是：

```
struct Comparator 
{
    bool operator()(int const& lhs, int const& rhs) const 
    {
        return lhs < rhs; 
    }
}; 
```

这将保证相等的元素被认为是等价的。[请注意，这在Effective STL](https://rads.stackoverflow.com/amzn/click/com/0201749629)中详细讨论，“第 19 项。理解相等和等价之间的区别”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:46:12.423

问题很可能是因为您的比较没有实现[*严格的弱排序*](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)。集合上的内部排序机制依赖于此。您可以通过将比较更改为小于来获得 SWO：

```
struct Comparator {
  bool operator()( const int& a, const int& b ) const {
    return ( a < b ); 
  }
}; 
```

另一方面，`std::set`默认情况下将使用此比较标准，因此您无需指定它。

[我对这个问题](https://stackoverflow.com/questions/12331708/how-does-stl-map-know-that-map-contains-a-given-element)的回答中有一些相关信息（以及无数其他 SO 问题）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T13:05:16.020

> 1）Set如何在内部存储数据

唯一的要求是元素是：

*   根据比较器排序，以便在迭代集合时出现在if `Comp(a,b)`、 then之前；`a``b`
*   独特的，因此没有不同的元素同时`Comp(a,b)`适用`Comp(b,a)`。

并且操作满足一定的复杂性要求。

在实践中，它们通常存储在二叉搜索树中；但这对用户来说并不重要。

> 2）如何解决此问题或将数据复制到不同集合的最佳方法

为了满足要求，比较器必须是*严格的弱排序*，like `<`，这样`Comp(a,a)`总是假的，而不是非严格排序的 like `<=`。由于`<`是默认设置，这意味着您根本不需要自定义比较器。

> 3）排序究竟是如何产生这个问题的

请注意，您的第一个循环是插入值`2`十次；我不确定这是否是故意的。

给定所需的严格排序，`insert(b)`可能会通过查找第一个为 false的元素`a`来查找插入点；`Comp(a,b)`即`b`不应该出现的第一个元素。然后它将通过检查来检查唯一性`Comp(b,a)`。如果两者都为假，则表明这两个值是等价的，所以`b`不会被插入。

由于您的比较不严格，因此此唯一性测试可能会失败；所以你最终可能会得到一个重复的条目。或者可能发生其他事情 - 行为未定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T09:18:15.577

在两种情况下，您会得到不同的输出，因为您是`inserting in different ways`. 在案例 1 中，您将元素 2 插入十次。在这种情况下，当您在第一次之后插入整数 2 时，`Comparator()`将调用您的函数来决定插入的位置。在另一种情况下，您正在插入一个范围。在这里，被调用函数接受第一个参数 i,e`customSet.begin()`并与另一个参数 i,e 进行检查`customSet.end()`，如果这两个不相等，则只插入一个元素，否则将不会插入元素。

# .net - 在 Moon_Apns 中找不到请求的对象

> ID：14583152
> 
> 赞同：0
> 
> 时间：2013-01-29T12:41:52.763
> 
> 标签：.net, push-notification, apple-push-notifications, x509certificate, moonapns

我正在使用 Moon-Apns 库进行苹果推送通知，但我遇到了错误“找不到请求的对象”。

![在此处输入图像描述](../Images/9445107da2086ab25d3c8eea432c3132.png)

![在此处输入图像描述](../Images/008fa24fede25136e5bd10aee844cd15.png)

我在这里缺少什么？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:00.163

您是否将 .p12 文件放置在服务器的相应位置.. 我认为这可能是导致此错误的原因，并让我确切地知道问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:30:01.763

通过更改有效证书解决。

# c++ - 下一个回文..奇怪的字符输出

> ID：14583154
> 
> 赞同：0
> 
> 时间：2013-01-29T12:41:54.790
> 
> 标签：c++, palindrome

我制作了这段代码，它应该增加一个数字，直到获得这个输入数字的下一个回文数。

该程序将数字作为字符串“因为它可能是一个非常大的数字（ 0 < 数字 < 1000000 ）” ....

**编码**

```
int main ()
{
string number = "1243";
int position = number.length()-1;
do
{
    if (number[position] == '9')
    {
        //cout << "hereee";
        number[position] = '0';
        int n1 = (int)number[position-1] - '0';
        n1++;
        number[position-1] = n1 + '0';
        nextPalindrome[position-1];
         cout << number <<"hereee2"<< endl; // only to determine if i get in "if"
    }
    else
    {
        int n1 = (int)number[position] - '0';
        n1++;
        number[position] = n1 + '0';
        cout << number <<"hereee1" << endl; // only to determine if i get in "else"
    }
} while (isPalindrome(number) == false);
} 
```

它开始获取当前位置的数字并将其递增并再次将其作为字符返回

**问题**

```
cout << number <<"hereee1" << endl; 
```

此行显示运行时的号码状态，就像这样：

```
12"6 hereee1

12"7 hereee1

12"8 hereee1

12"9 hereee1

12#0 hereee2

12#1 hereee1 
```

虽然它必须是

```
1236 hereee1

1237 hereee1

1238 hereee1

1239 hereee1

1240 hereee2

1241 hereee1 
```

我不知道错误在哪里..有人可以帮忙吗

**注意：** “isPalindrome”是一个以字符串为参数的函数，如果原始字符串等于其反向，则返回 true .. 否则返回 false

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:49:58.490

What is the result of this when the digit at `position-1` is `'9'`?

```
 int n1 = (int)number[position-1] - '0';
    n1++;
    number[position-1] = n1 + '0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:00:23.553

You don't handle carryover well... This part is invalid:

```
 int n1 = (int)number[position-1] - '0';
    n1++;
    number[position-1] = n1 + '0'; 
```

This just increases the digit on the previous place. And if it happens to be `'9'` (same as what Mats Petersson tried to suggest), it just overflows... It should however be carried over to the next digit too... This is a recursive solution to this (**beware**, there might be syntax errors, I haven't coded in C++ since ages...):

```
/*
* This function adds one to the specified digit of a 
* string containing a decimal integer.
*
* Contains no checks whatsoever. Behavior is undefined when 
* not supplied a valid input string.
*/
int addOneToDigit (string number, int digit)
{
    if (number[digit] == '9')
    {
        number[digit] = '0';
        //we need to handle getting a longer string too...
        if(digit>0) 
        {
            return addOneToDigit(number, digit-1);
        }
        else
        {
            return "1" + number;
        }
    }
    else
    {
        int n1 = (int)number[digit] - '0';
        n1++;
        number[digit] = n1 + '0';
    }
    return number;
} 
```

and the main() would look like something like this:

```
int main ()
{
    string number = "1243";
    do
    {
      number = addOneToDigit(number,number.length()-1)
    } 
    while (isPalindrome(number) == false);
} 
```

# jquery - jQuery测量隐藏元素的位置

> ID：14583162
> 
> 赞同：1
> 
> 时间：2013-01-29T12:42:11.433
> 
> 标签：jquery

有没有办法`$element.position()`为隐藏（即`display:hidden`）元素工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:53:00.850

试试看嘛

```
mypos = $('#myelement').css({
  visibility: 'hidden',
  display: 'block'
}).position(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:01:54.427

你可以试试：

```
var pos = $element.show().position();
$element.hide(); 
```

只有在特殊情况下（被当前窗口/选项卡之外的某些进程不合时宜地中断），元素才会被暂时渲染。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:44:56.810

'显示：无；' 从文档中删除元素，因此它没有位置。你可以尝试一个快速的 'display: block; 可见性：隐藏；'，获取位置，并再次隐藏。

编辑：这已经在这个问题的页面上进行了解释：[jquery：获取隐藏元素的偏移量](https://stackoverflow.com/questions/5974323/jquery-get-the-offset-of-hidden-element)

# asp.net-mvc - SquishIt 与 MVC 4.0 捆绑器

> ID：14583168
> 
> 赞同：11
> 
> 时间：2013-01-29T12:42:26.770
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundler, squishit

我有一个 ASP.NET MVC 应用程序，我目前使用 SquishIt 帮助将我的所有 CSS 和 javascript 文件捆绑到一个从网络服务器下载的单个元素中，以便每次点击我的网站。我知道最近[MVC 引入了自己的 bundler](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。有没有人比较过他们两个？在某些情况下，一种比另一种更好吗？还是它们基本相同？使用 MVC 捆绑器，IIS 是否仍需要对站点目录的写入权限？

您可能有的任何和所有想法和评论将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:51:36.250

我对此有很大的偏见，但这是一个很好的问题——我没有尽可能多地考虑这个问题，但我已经开始了。

SquishIt 实际上不需要对文件系统的写访问 - 它有一个[缓存捆绑机制](https://github.com/jetheredge/SquishIt/wiki/Using-SquishIt-programmatically-without-the-file-system)，无需对站点目录进行写访问即可工作（它将捆绑缓存在内存中并通过特殊的控制器/处理程序提供服务）。不确定 MS 产品是否具有此功能。

两者都在运行时工作并产生非常好的调试体验。

两者都具有使用预处理器（.less、coffeescript 等）的相似机制。MS 的产品似乎更灵活一些，但使用起来可能更笨拙。 [SquishIt 的预处理行为](http://blogs.lessthandot.com/index.php/WebDev/ServerProgramming/preprocessor-extensibility-in-squishit-0-9)是根据 rails 中的资产管道建模的，并且不提供文件扩展链之外的任何方法来控制应用预处理器的顺序。

两者都允许包含目录和文件。SquishIt 还支持将任意 javascript 或 CSS 片段（从数据库等检索）添加到捆绑包中，我在 MS 产品中没有看到类似的东西。

SquishIt 有一个扩展点，允许[将您的输出文件写入 CDN](http://blogs.lessthandot.com/index.php/WebDev/ServerProgramming/making-squishit-work-with-amazon) - 我在 MS 产品中还没有看到类似的东西。

希望其他人能填补这里的空白——我会尽量记住在我了解更多信息时回来更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T06:46:04.107

我没有像@AlexCuse 那样研究细节和可扩展性点等，但他的总体看法似乎是我的。

**Squishit 似乎有优势。**

对我来说（而且*我认为我必须以某种方式遗漏明显的*东西- 但我没有时间/不愿意编写自己的自定义 IBundleOrderer 实现，并且在文档/谷歌搜索中找不到我期望的解决方案）

**MVC / MS 产品有一个 MASSIVE FAIL ......**

**我看不出我怎样才能让它简单地尊重我声明的脚本和 css 文件的顺序！**

出于显而易见的原因，这完全吸了球。（即它彻底搞砸了我的应用程序——在我的大型复杂应用程序中到处都是 20 多个小 css / jscript 错误——那些令人沮丧的难以确定的小显示错误和奇怪的 js 怪癖）

Rick Anderson 说“添加自定义 IBundleOrderer 实现，但显式添加每个文件不太容易出错。” 但我看不到如何做后者 - 我明确地使用 .Include( 为每个文件。**主要是我的订单得到了尊重**，但令人讨厌的是不完全 - 显然一些默认规则开始发挥作用**，系统决定它比我更了解**.

诚然，这里*必须*有一个简单的答案 - 但我找不到它，所以对我来说这是一个 MASSIVE MASSIVE FAIL，这意味着*我现在要麻烦从 MS 实施恢复到 Squishit*，这很好地完成了工作，谢谢你 ！

NB 也有问题 1\. 它缩小 js 的方式......它引入的错误我只是不需要。公平地说，我确实对 Squishit 有一些问题，但很容易解决。2.缩小CSS的方式

```
Minification failed. Returning unminified contents. 
```

我正在恢复使用 Squishit。

# gwt - Gwt、Gxt 和 Maven 的兼容版本

> ID：14583169
> 
> 赞同：1
> 
> 时间：2013-01-29T12:42:27.720
> 
> 标签：gwt, maven, gxt, gwt-maven-plugin, maven-compiler-plugin

现在我在我的项目中使用 GWT 1.7，我需要升级到 GWT 2。我还有：

GXT 2.0.1 Maven 2.2.1 gwt-maven-plugin 1.1 maven-compiler-plugin 2.0.2（它的源和目标配置是1.6）

所以我把GWT版本改成了2.0.4，但是我的GXT版本好像和它不兼容。我发现的 GXT 的最低版本是 2.2.5，但有了它我的项目看起来......很奇怪 :) 那么，它有旧的兼容版本吗？

而且我的 Maven 也不适用于新的 gwt。我尝试了不同版本的 gwt-mavten-plugin，它们都抛出了不同的错误。也许我必须使用不同的 maven 或 maven-compiler-plugin？

***更新***

GWT：2.0.4，GXT：2.2.5，gwt-maven-plugin 2.1.0，maven-compiler-plugin 2.1

项目在 Idea 中构建，但是当我运行 mvn clean install 时：

```
 [WARNING] You're project declares dependency on gwt-user 2.0.4\. This plugin is designed for version 2.1.0
[WARNING] You're project declares dependency on gwt-user 2.0.4\. This plugin is designed for version 2.1.0
[INFO] Compiling module com.dataswell.portal.ui.Application
[INFO]    Validating newly compiled units
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/impl/CrossSiteIframeLoadingStrategy.java'
[INFO]          [ERROR] Line 21: The import com.google.gwt.core.client.impl.AsyncFragmentLoader.LoadTerminatedHandler cannot be resolved
[INFO]          [ERROR] Line 36: The type CrossSiteIframeLoadingStrategy must implement the inherited abstract method AsyncFragmentLoader.LoadingStrategy.startLoadingFragment(int, AsyncFragmentLoader.LoadErrorHandler)
[INFO]          [ERROR] Line 99: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 136: LoadTerminatedHandler cannot be resolved to a type
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/impl/CrossSiteLoadingStrategy.java'
[INFO]          [ERROR] Line 21: The import com.google.gwt.core.client.impl.AsyncFragmentLoader.LoadTerminatedHandler cannot be resolved
[INFO]          [ERROR] Line 34: The type CrossSiteLoadingStrategy must implement the inherited abstract method AsyncFragmentLoader.LoadingStrategy.startLoadingFragment(int, AsyncFragmentLoader.LoadErrorHandler)
[INFO]          [ERROR] Line 97: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 153: LoadTerminatedHandler cannot be resolved to a type
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/impl/XhrLoadingStrategy.java'
[INFO]          [ERROR] Line 18: The type com.google.gwt.core.client.impl.AsyncFragmentLoader.HttpDownloadFailure is not visible
[INFO]          [ERROR] Line 19: The import com.google.gwt.core.client.impl.AsyncFragmentLoader.HttpInstallFailure cannot be resolved
[INFO]          [ERROR] Line 20: The import com.google.gwt.core.client.impl.AsyncFragmentLoader.LoadTerminatedHandler cannot be resolved
[INFO]          [ERROR] Line 50: The type XhrLoadingStrategy must implement the inherited abstract method AsyncFragmentLoader.LoadingStrategy.startLoadingFragment(int, AsyncFragmentLoader.LoadErrorHandler)
[INFO]          [ERROR] Line 129: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 131: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 133: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 164: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 198: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 219: LoadTerminatedHandler cannot be resolved to a type
[INFO]          [ERROR] Line 249: HttpInstallFailure cannot be resolved to a type
[INFO]          [ERROR] Line 253: HttpDownloadFailure cannot be resolved to a type
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/prefetch/Prefetcher.java'
[INFO]          [ERROR] Line 55: The method setPrefetchQueue(int[]) is undefined for the type AsyncFragmentLoader
[INFO]          [ERROR] Line 74: The method startPrefetching() is undefined for the type AsyncFragmentLoader
[INFO]          [ERROR] Line 86: The method stopPrefetching() is undefined for the type AsyncFragmentLoader
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/prefetch/RunAsyncCode.java'
[INFO]          [ERROR] Line 63: The method isAlreadyLoaded(int) is undefined for the type AsyncFragmentLoader
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/testing/StubScheduler.java'
[INFO]          [ERROR] Line 51: The method scheduleEntry(Scheduler.RepeatingCommand) of type StubScheduler must override or implement a supertype method
[INFO]          [ERROR] Line 56: The method scheduleEntry(Scheduler.ScheduledCommand) of type StubScheduler must override or implement a supertype method
[INFO]          [ERROR] Line 61: The method scheduleFinally(Scheduler.RepeatingCommand) of type StubScheduler must override or implement a supertype method
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/i18n/client/AutoDirectionHandler.java'
[INFO]          [ERROR] Line 35: No source code is available for type com.google.gwt.i18n.shared.HasDirectionEstimator; did you forget to inherit a required module?
[INFO]          [ERROR] Line 74: No source code is available for type com.google.gwt.i18n.shared.WordCountDirectionEstimator; did you forget to inherit a required module?
[INFO]          [ERROR] Line 103: No source code is available for type com.google.gwt.i18n.shared.DirectionEstimator; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/i18n/client/BidiPolicy.java'
[INFO]          [ERROR] Line 29: The method hasAnyRTL() is undefined for the type LocaleInfo
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/i18n/client/impl/CurrencyDataJso.java'
[INFO]          [ERROR] Line 37: Only one JavaScriptObject type may implement the methods of an interface that declared methods. The interface (com.google.gwt.i18n.client.CurrencyData) is implemented by both (com.google.gwt.i18n.client.impl.CurrencyDataImpl) and (com.google.gwt.i18n.client.impl.CurrencyDataJso)
[INFO]          [ERROR] Line 51: The method getDefaultFractionDigits() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]          [ERROR] Line 59: The method isDeprecated() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]          [ERROR] Line 63: The method isSpaceForced() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]          [ERROR] Line 67: The method isSpacingFixed() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]          [ERROR] Line 71: The method isSymbolPositionFixed() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]          [ERROR] Line 75: The method isSymbolPrefix() in the type CurrencyDataImpl is not applicable for the arguments (int)
[INFO]       [WARN] Warnings in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-dev/2.1.0/gwt-dev-2.1.0.jar!/com/google/gwt/dev/jjs/intrinsic/com/google/gwt/lang/Cast.java'
[INFO]          [WARN] Line 29: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]          [WARN] Line 29: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]          [WARN] Line 38: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]          [WARN] Line 38: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]       [WARN] Warnings in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-dev/2.1.0/gwt-dev-2.1.0.jar!/com/google/gwt/dev/jjs/intrinsic/com/google/gwt/lang/Util.java'
[INFO]          [WARN] Line 27: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]          [WARN] Line 35: Referencing field 'java.lang.Object.castableTypeMap': unable to resolve field, expect subsequent failures
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/DoubleBox.java'
[INFO]          [ERROR] Line 28: No source code is available for type com.google.gwt.text.client.DoubleRenderer; did you forget to inherit a required module?
[INFO]          [ERROR] Line 29: No source code is available for type com.google.gwt.text.client.DoubleParser; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/HasAutoHorizontalAlignment.java'
[INFO]          [ERROR] Line 30: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]          [ERROR] Line 30: No source code is available for type AutoHorizontalAlignmentConstant; did you forget to inherit a required module?
[INFO]          [ERROR] Line 31: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]          [ERROR] Line 38: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]          [ERROR] Line 38: No source code is available for type AutoHorizontalAlignmentConstant; did you forget to inherit a required module?
[INFO]          [ERROR] Line 39: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]          [ERROR] Line 54: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]          [ERROR] Line 54: No source code is available for type AutoHorizontalAlignmentConstant; did you forget to inherit a required module?
[INFO]          [ERROR] Line 77: AutoHorizontalAlignmentConstant cannot be resolved to a type
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/HasDirectionalSafeHtml.java'
[INFO]          [ERROR] Line 26: No source code is available for type com.google.gwt.safehtml.client.HasSafeHtml; did you forget to inherit a required module?
[INFO]          [ERROR] Line 33: No source code is available for type com.google.gwt.safehtml.shared.SafeHtml; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/IntegerBox.java'
[INFO]          [ERROR] Line 27: No source code is available for type com.google.gwt.text.client.IntegerRenderer; did you forget to inherit a required module?
[INFO]          [ERROR] Line 28: No source code is available for type com.google.gwt.text.client.IntegerParser; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/LongBox.java'
[INFO]          [ERROR] Line 28: No source code is available for type com.google.gwt.text.client.LongRenderer; did you forget to inherit a required module?
[INFO]          [ERROR] Line 29: No source code is available for type com.google.gwt.text.client.LongParser; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/ValueBox.java'
[INFO]          [ERROR] Line 42: No source code is available for type com.google.gwt.text.shared.Renderer<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 42: No source code is available for type com.google.gwt.text.shared.Parser<T>; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/ValueBoxBase.java'
[INFO]          [ERROR] Line 50: No source code is available for type com.google.gwt.i18n.shared.HasDirectionEstimator; did you forget to inherit a required module?
[INFO]          [ERROR] Line 51: No source code is available for type com.google.gwt.editor.client.IsEditor<E>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 51: No source code is available for type com.google.gwt.editor.ui.client.adapters.ValueBoxEditor<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 84: No source code is available for type com.google.gwt.text.shared.Parser<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 85: No source code is available for type com.google.gwt.text.shared.Renderer<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 159: No source code is available for type com.google.gwt.i18n.shared.DirectionEstimator; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/ValueListBox.java'
[INFO]          [ERROR] Line 45: No source code is available for type com.google.gwt.editor.client.IsEditor<E>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 45: No source code is available for type com.google.gwt.editor.client.adapters.TakesValueEditor<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 49: No source code is available for type com.google.gwt.text.shared.Renderer<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 50: No source code is available for type com.google.gwt.view.client.ProvidesKey<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 55: No source code is available for type com.google.gwt.view.client.SimpleKeyProvider<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 84: The method of(TakesValue<T>) in the type TakesValueEditor is not applicable for the arguments (ValueListBox<T>)
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/ValuePicker.java'
[INFO]          [ERROR] Line 40: No source code is available for type com.google.gwt.editor.client.IsEditor<E>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 40: No source code is available for type com.google.gwt.editor.client.LeafValueEditor<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 42: No source code is available for type com.google.gwt.cell.client.AbstractCell<C>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 43: No source code is available for type com.google.gwt.text.shared.Renderer<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 50: No source code is available for type com.google.gwt.safehtml.shared.SafeHtmlBuilder; did you forget to inherit a required module?
[INFO]          [ERROR] Line 57: No source code is available for type com.google.gwt.user.cellview.client.CellList<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 58: No source code is available for type com.google.gwt.view.client.SingleSelectionModel<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 64: No source code is available for type com.google.gwt.view.client.SelectionChangeEvent.Handler; did you forget to inherit a required module?
[INFO]          [ERROR] Line 65: No source code is available for type com.google.gwt.view.client.SelectionChangeEvent; did you forget to inherit a required module?
[INFO]          [ERROR] Line 83: No source code is available for type com.google.gwt.editor.client.adapters.TakesValueEditor<T>; did you forget to inherit a required module?
[INFO]          [ERROR] Line 83: The method of(TakesValue<T>) in the type TakesValueEditor is not applicable for the arguments (ValuePicker<T>)
[INFO]          [ERROR] Line 90: The method asWidget() of type ValuePicker<T> must override or implement a supertype method
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/user/client/ui/impl/RichTextAreaImplOldMozilla.java'
[INFO]          [ERROR] Line 39: The method setFirstFocusImpl() of type RichTextAreaImplOldMozilla must override or implement a supertype method
[INFO]          [ERROR] Line 44: The method setFocusImpl(boolean) of type RichTextAreaImplOldMozilla must override or implement a supertype method
[INFO]          [ERROR] Line 47: The method setFocusImpl(boolean) is undefined for the type RichTextAreaImplMozilla
[INFO]       [WARN] Warnings in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.0.4/gwt-user-2.0.4.jar!/com/google/gwt/emul/java/util/Arrays.java'
[INFO]          [WARN] Line 1348: Referencing method 'com.google.gwt.lang.LongLib.compare([D[D)': unable to resolve method, expect subsequent failures
[INFO]          [WARN] Line 1358: Referencing method 'com.google.gwt.lang.LongLib.compare([D[D)': unable to resolve method, expect subsequent failures
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/emul/java/util/logging/Level.java'
[INFO]          [ERROR] Line 31: No source code is available for type com.google.gwt.logging.impl.LevelImpl; did you forget to inherit a required module?
[INFO]          [ERROR] Line 31: No source code is available for type com.google.gwt.logging.impl.LevelImplNull; did you forget to inherit a required module?
[INFO]       [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/emul/java/util/logging/Logger.java'
[INFO]          [ERROR] Line 28: No source code is available for type com.google.gwt.logging.impl.LoggerImpl; did you forget to inherit a required module?
[INFO]          [ERROR] Line 28: No source code is available for type com.google.gwt.logging.impl.LoggerImplNull; did you forget to inherit a required module?
[INFO]    [ERROR] Errors in 'jar:file:/home/vskovalenko/.m2/repository/com/google/gwt/gwt-user/2.1.0/gwt-user-2.1.0.jar!/com/google/gwt/core/client/prefetch/RunAsyncCode.java'
[INFO]       [ERROR] Line 63:  The method isAlreadyLoaded(int) is undefined for the type AsyncFragmentLoader
[INFO]    Scanning for additional dependencies: file:/home/vskovalenko/dataswell/trunk/source/portal/ui/src/main/java/com/dataswell/portal/ui/client/account/rpc/AccountServiceAsync.java
[INFO]       Adding '89' new generated units
[INFO]          Validating newly compiled units
[INFO]             [WARN] Warnings in '/home/vskovalenko/dataswell/trunk/source/portal/ui/target/.generated/com/dataswell/portal/ui/client/account/rpc/AccountService_TypeSerializer.java'
[INFO]                [WARN] Line 283: Referencing deprecated class 'com.google.gwt.user.client.rpc.SerializableException'
[INFO]    Scanning for additional dependencies: file:/home/vskovalenko/dataswell/trunk/source/portal/ui/src/main/java/com/dataswell/portal/ui/client/dataset/rpc/DatasetServiceAsync.java
[INFO]       Adding '22' new generated units
[INFO]          Validating newly compiled units
[INFO]             [WARN] Warnings in '/home/vskovalenko/dataswell/trunk/source/portal/ui/target/.generated/com/dataswell/portal/ui/client/dataset/rpc/DatasetService_TypeSerializer.java'
[INFO]                [WARN] Line 153: Referencing deprecated class 'com.google.gwt.user.client.ui.ChangeListenerCollection'
[INFO]                [WARN] Line 158: Referencing deprecated class 'com.google.gwt.user.client.ui.ClickListenerCollection'
[INFO]                [WARN] Line 163: Referencing deprecated class 'com.google.gwt.user.client.ui.FocusListenerCollection'
[INFO]                [WARN] Line 168: Referencing deprecated class 'com.google.gwt.user.client.ui.FormHandlerCollection'
[INFO]                [WARN] Line 173: Referencing deprecated class 'com.google.gwt.user.client.ui.KeyboardListenerCollection'
[INFO]                [WARN] Line 178: Referencing deprecated class 'com.google.gwt.user.client.ui.LoadListenerCollection'
[INFO]                [WARN] Line 183: Referencing deprecated class 'com.google.gwt.user.client.ui.MouseListenerCollection'
[INFO]                [WARN] Line 188: Referencing deprecated class 'com.google.gwt.user.client.ui.MouseWheelListenerCollection'
[INFO]                [WARN] Line 193: Referencing deprecated class 'com.google.gwt.user.client.ui.PopupListenerCollection'
[INFO]                [WARN] Line 198: Referencing deprecated class 'com.google.gwt.user.client.ui.ScrollListenerCollection'
[INFO]                [WARN] Line 203: Referencing deprecated class 'com.google.gwt.user.client.ui.TabListenerCollection'
[INFO]                [WARN] Line 208: Referencing deprecated class 'com.google.gwt.user.client.ui.TableListenerCollection'
[INFO]                [WARN] Line 213: Referencing deprecated class 'com.google.gwt.user.client.ui.TreeListenerCollection'
[INFO]    Scanning for additional dependencies: file:/home/vskovalenko/dataswell/trunk/source/portal/ui/src/main/java/com/dataswell/portal/ui/client/EdgarOnlineServiceAsync.java
[INFO]       Adding '7' new generated units
[INFO]          Validating newly compiled units
[INFO]             [WARN] Warnings in '/home/vskovalenko/dataswell/trunk/source/portal/ui/target/.generated/com/dataswell/portal/ui/client/EdgarOnlineService_TypeSerializer.java'
[INFO]                [WARN] Line 96: Referencing deprecated class 'com.google.gwt.user.client.ui.ChangeListenerCollection'
[INFO]                [WARN] Line 101: Referencing deprecated class 'com.google.gwt.user.client.ui.ClickListenerCollection'
[INFO]                [WARN] Line 106: Referencing deprecated class 'com.google.gwt.user.client.ui.FocusListenerCollection'
[INFO]                [WARN] Line 111: Referencing deprecated class 'com.google.gwt.user.client.ui.FormHandlerCollection'
[INFO]                [WARN] Line 116: Referencing deprecated class 'com.google.gwt.user.client.ui.KeyboardListenerCollection'
[INFO]                [WARN] Line 121: Referencing deprecated class 'com.google.gwt.user.client.ui.LoadListenerCollection'
[INFO]                [WARN] Line 126: Referencing deprecated class 'com.google.gwt.user.client.ui.MouseListenerCollection'
[INFO]                [WARN] Line 131: Referencing deprecated class 'com.google.gwt.user.client.ui.MouseWheelListenerCollection'
[INFO]                [WARN] Line 136: Referencing deprecated class 'com.google.gwt.user.client.ui.PopupListenerCollection'
[INFO]                [WARN] Line 141: Referencing deprecated class 'com.google.gwt.user.client.ui.ScrollListenerCollection'
[INFO]                [WARN] Line 146: Referencing deprecated class 'com.google.gwt.user.client.ui.TabListenerCollection'
[INFO]                [WARN] Line 151: Referencing deprecated class 'com.google.gwt.user.client.ui.TableListenerCollection'
[INFO]                [WARN] Line 156: Referencing deprecated class 'com.google.gwt.user.client.ui.TreeListenerCollection'
[INFO]    [ERROR] Cannot proceed due to previous errors
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:30:03.753

它在 gwt-maven-plugin 的常见问题解答中提到 - [http://mojo.codehaus.org/gwt-maven-plugin/faq.html](http://mojo.codehaus.org/gwt-maven-plugin/faq.html)

## **如何设置 GWT 的版本来编译我的项目？**

gwt-maven-plugin 绑定到 GWT SDK 的一个版本。gwt-maven-plugin 必须与 GWT DSK 版本匹配。要将 Maven 与**GWT 2.1 之前的**GWT 版本一起使用，请参阅`use` **gwt-maven-plugin 1.2**并阅读文档。

## 对于 GWT 和 GXT 兼容性参考 GXT 论坛

[http://www.sencha.com/forum/showthread.php?147726-Ext-GWT-2.2.5-Now-Available](http://www.sencha.com/forum/showthread.php?147726-Ext-GWT-2.2.5-Now-Available)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:35:45.477

搜索了一段时间后，我找到了一个包含“gxt2.2.5-gwt22.jar”工件的存储库，我写这个是因为我在stackoverflow上看到了一些线程，我在搜索时从谷歌重定向，所以对于有困难的人来说将 jar 集成到您的项目 pom.xml 中。

将此添加到依赖项中：

```
<dependency>
   <groupId>com.extjs</groupId>
   <artifactId>gxt</artifactId>
   <version>2.2.5-gwt22</version>
</dependency> 
```

并添加此存储库：

```
<repository>
   <id>maven.ucdavis.edu-releases</id>
   <name>maven.ucdavis.edu-releases</name>
   <url>http://maven.ucdavis.edu:80/artifactory/sakai-local</url>
</repository> 
```

# php - PHP 回显 '<<<'

> ID：14583174
> 
> 赞同：2
> 
> 时间：2013-01-29T12:42:41.747
> 
> 标签：php, browser, echo, html-entities

我想从 PHP 中回显一些 HTML，其中包含一个链接，上面有文本 '<<< Back'。我无法正确显示“<<<”。

有人有什么想法吗？这是我当前的代码：

```
 $paginationDisplay .=  '&nbsp; <span class="paginationNumbersbn"> <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> '<<<'Back</a></span> '; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T12:44:30.007

如果要显示文字小于号，`&lt;`请按照 HTML 规范对其进行编码。

您可能还想查看另一个相关实体：`&laquo;`. 这会产生一个双左角引号：

```
« 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:44:48.630

您不需要转义它，因为它与 PHP 无关。

通常网站只是打印出 <，而不是使用适当的 HTML 实体。

尝试以下操作：

```
 $paginationDisplay .=  '&nbsp; <span class="paginationNumbersbn"> <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '"> &lt;&lt;&lt;Back</a></span> '; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T12:45:06.960

```
$paginationDisplay .= '&nbsp; <span class="paginationNumbersbn"> <a href="' . $_SERVER['PHP_SELF'] . '?pn=' . $previous . '">&lt;&lt;&lt;Back</a></span>'; 
```

`&lt;`= < `&gt;`= >

您可以使用这些和许多其他 HTML 实体将这样的符号放入您的页面中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-29T13:14:31.257

它不能正常工作，因为 PHP 为 <<< 附加了一个特殊的含义，称为 HEREDOC。您最好将每个 < 编码为`&lt;`，然后按照其他人的建议显示它。

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

# c# - ReferenceType 和 ValueType 的数组是对象数组的无效参数

> ID：14583175
> 
> 赞同：3
> 
> 时间：2013-01-29T12:42:42.103
> 
> 标签：c#, arrays

我需要调用以下函数：

```
static string GetValueOrDefault(object[] values, int index)
{
    if (values == null)
         return string.Empty;
    if (index >= values.Length)
         return string.Empty;
    return values[index] != null ? values[index].ToString() : string.Empty;
} 
```

当我使用字符串数组（ReferenceType）调用 GetValueOrDefault 时，它可以工作：

```
GetValueOrDefault(new[] {"foo", "bar"}, 0); 
```

当我使用 int (ValueType) 数组调用 GetValueOrDefault 时，它不起作用：

```
GetValueOrDefault(new[] {1, 2}, 0); 
```

编译器错误是：

> MyNamespace.GetValueOrDefault(object[], int)' 的最佳重载方法匹配有一些无效参数

所以我的问题是：为什么这不能编译为[引用类型和值类型从对象派生](https://stackoverflow.com/questions/1682231/how-do-valuetypes-derive-from-object-referencetype-and-still-be-valuetypes)？

我知道我可以使用泛型解决这个问题，但我想了解这个错误

```
static string GetValueOrDefault<T>(T[] values, int index)
{...} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T12:45:19.737

引用类型的数组是协变的，这意味着：a`string[]`可以被视为 an `object[]`（尽管问题是如果您尝试放入非字符串，它会`throw`）。但是，值类型的数组*不是*协变的，因此`int[]` ***不能***将 an 视为 an `object[]`。`new[] {1,2}`是一个`int[]`。

IIRC 这样做主要是为了与 java 相似。.NET 4.0 中的协方差更加整洁。

# javascript - 画布标签拱形文本

> ID：14583176
> 
> 赞同：1
> 
> 时间：2013-01-29T12:42:42.770
> 
> 标签：javascript, html, math, canvas

我正在编写一些在画布上沿弧线弯曲文本的代码，我让顶部尽可能接近，但我还需要在底部添加一些向上弯曲的文本。我搞不定。任何帮助是极大的赞赏。

另外，这是我正在研究的小提琴的链接：[这里](http://jsfiddle.net/dmackintosh88/XzkrE/)

```
var
        text = 'Hello world, Im just JS',
        len = text.length,
        // The coverage of the circle
        angle = Math.PI * .7,
        centerX = 275,
        centerY = 250,
        radius = 200,
        context = document.getElementById('canvas').getContext('2d'),
        n = 0;

    // Format the text
    context.font = '40px Arial';
    context.textAlign = 'center';
    context.fillStyle = 'black';
    context.strokeStyle = 'blue';
    context.lineWidth = 2;

    // Save the current state
    context.save();

    // Move our pointer
    context.translate(centerX, centerY);

    // Rotate
    context.rotate(-1 * angle / 2);
    context.rotate(-1 * (angle / len) / 2);

    // Loop over the string
    for(; n < len; n += 1) {
        context.rotate(angle / len);
        context.save();
        context.translate(0, -1 * radius);

        context.fillText(text[n], 0, 0);
        context.strokeText(text[n], 0, 0);

        context.restore();
    };

    // Restore the canvas state
    context.restore(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:04:52.520

好的，我设法做到了。是两个非常小的变化。

它涉及在循环中反转翻译并反转输入字符串。完美的

这是工作代码。（注意两个小变化）[这里](http://jsfiddle.net/dmackintosh88/XzkrE/)是一个链接

```
var
        text = 'Hello world, Im just JS'.split('').reverse().join(''),
        len = text.length,
        // The coverage of the circle
        angle = Math.PI * .7,
        centerX = 275,
        centerY = 250,
        radius = 200,
        context = document.getElementById('canvas').getContext('2d'),
        n = 0;

    // Format the text
    context.font = '40px Arial';
    context.textAlign = 'center';
    context.fillStyle = 'black';
    context.strokeStyle = 'blue';
    context.lineWidth = 2;

    // Save the current state
    context.save();

    // Move our pointer
    context.translate(centerX, centerY);

    // Rotate
    context.rotate(-1 * angle / 2);
    context.rotate(-1 * (angle / len) / 2);

    // Loop over the string
    for(; n < len; n += 1) {
        context.rotate(angle / len);
        context.save();
        context.translate(0, -(-1 * radius));

        context.fillText(text[n], 0, 0);
        context.strokeText(text[n], 0, 0);

        context.restore();
    };

    // Restore the canvas state
    context.restore(); 
```

# c# - 单点登录是否允许用户在 windows phone 应用程序中使用 SkyDrive 永久登录？（内部描述）

> ID：14583178
> 
> 赞同：2
> 
> 时间：2013-01-29T12:42:51.413
> 
> 标签：c#, xaml, windows-phone-8, onedrive

我正在开发windows phone 8 应用程序，我已经看到了单一登录到Microsoft 帐户的概念；我的疑问是，单点登录过程是否会为该特定应用程序存储用户的会话终生。. .

例如，考虑 Windows 8 中的 Native SkyDrive 应用程序，它只获取一次用户名和密码。如果系统或电话或应用程序重新启动，它不会再次询问用户。

或者

请告诉我登录如何在本地 SkyDrive 应用程序上工作，因为它只询问用户名和密码一次。

# linux - 主次编号在设备驱动中的作用

> ID：14583183
> 
> 赞同：8
> 
> 时间：2013-01-29T12:43:05.137
> 
> 标签：linux, file-io, linux-kernel, linux-device-driver

我正在学习 Linux 设备驱动程序，并被困在**主要的、次要**的数字上。到目前为止，我所拥有的是：

*   通过文件系统中的名称访问设备。这些名称被称为特殊文件或设备文件或文件系统的 inode。

*   并且每个设备文件都与捆绑到一个`dev_t`类型中的 MAJOR 和 MINOR 编号相关联。

*   这些编号由函数分配给设备`register_chrdev_region`

有些问题还困扰着我……

1.  当我们初始化设备时，该`fops`结构是否链接到`f_ops`设备文件的文件结构字段`cdev_init(&c_dev, &fops);`？
2.  调用如何`open("/dev/mydev", O_RONLY);`实际调用`open()` 驱动程序的功能。此处是否出现数字以查找设备驱动程序的实际写入方法，如果是如何？
3.  数字，major 用于标识设备驱动程序，minor 用于设备文件。当我们对设备文件等进行操作时，这个数字的实际作用是什么`open()` `read()` `write()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T15:00:19.483

我认为故事应该从你打字时发生的事情开始：

```
mknod /dev/c83 c 8 3 
```

它将调用 ext2_mknod("/dev", "c83", CHAR, DEV(8, 3))，大多数文件系统将 mknod 实现为 init_special_inode 的包装器：

```
void init_special_inode(struct inode *inode, umode_t mode, dev_t rdev)
{
        inode->i_mode = mode;
        if (S_ISCHR(mode)) {
                inode->i_fop = &def_chr_fops;
                inode->i_rdev = rdev;
        } else if (S_ISBLK(mode)) {
                inode->i_fop = &def_blk_fops;
                inode->i_rdev = rdev;
        } else if (S_ISFIFO(mode))
                inode->i_fop = &def_fifo_fops;
        else if (S_ISSOCK(mode))
                inode->i_fop = &bad_sock_fops;
        else
                printk(KERN_DEBUG "init_special_inode: bogus i_mode (%o)\n",
                       mode);
} 
```

当你最终调用 open("/dev/c83") 时，它将进入函数 def_chr_fops.chrdev_open，它将用你在 cdev_init() 中注册的 fops 替换文件 "/dev/c83" 的 fops：

```
int chrdev_open(struct inode * inode, struct file * filp)
{
    struct cdev *p;
    ...
    p = inode->i_cdev;
    ...
    filp->f_op = fops_get(p->ops);
    ...
    if (filp->f_op->open) {
        lock_kernel();
        ret = filp->f_op->open(inode,filp);
        unlock_kernel();
    }
    ...
    return ret;
 } 
```

之后，每个系统调用（例如读/写/关闭）都直接转到 cdev_init() 中注册的函数指针！

所以，对于你的第一个问题：

1.  是的，正如您在 chrdev_open() 中看到的那样。
2.  是的，因为设备的 fops 与 cdev_init 中注册的完全相同
3.  在 open() 中起着重要作用，因为 open() 使用对来查找正确的设备驱动程序。但在那之后，其他文件操作，例如读/写/关闭（），不再参与，一切都通过在open（）中解析的fops中的函数指针。

# javascript - 拦截点击的 Twitter Bootstrap 选项卡和图像

> ID：14583184
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:05.837
> 
> 标签：javascript, html, css, twitter-bootstrap

我有一个带有 Twitter Bootstrap 的基本 HTML 页面，我正在使用 Tabs 元素，它可以工作到一定程度，但是我将图像包裹在一个标签中，这些标签表示不同的标签，当点击一个标签时，图像会拦截点击并导航用户到“未定义”页面，但单击图像会正常激活选项卡。

```
<ul class="nav nav-tabs" id="myTab" style="margin-left: 0px;">
    <li><a data-toggle="tab" href="#fr" > <img src="img/flags/fr.png" alt="Françaises" title="Françaises" width="16" height="16" align="middle" style="margin-top: -4px;" /></a></li>
</ul> 
```

有没有办法在不将图像设置为 CSS 的背景的情况下阻止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:12:09.287

好的用css解决

CSS：

```
.frFlag {background-size: 16px 16px;background-image: url(img/flags/nl.png);background-repeat: no-repeat;background-position: center center;} 
```

html

```
<li><a data-toggle="tab" href="#fr" style=" class="frFlag">&nbsp;&nbsp;</a></li> 
```

感谢时间堆积者！

# javascript - 缩小文件夹和子文件夹内容

> ID：14583187
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:12.037
> 
> 标签：javascript, asp.net-mvc-4, minimize

当 UI 完全在 Javascript (ExtJS) 中时，我可以最小化它是否有用？

如何最小化一个文件夹和所有子文件夹（都带有 .js 文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:09:54.613

您可以通过提供源文件列表来使用[UglifyJS2最小化您的代码。](https://github.com/mishoo/UglifyJS2)UglifyJS 有一个选项可以最小化不同文件中的变量。

```
var result = UglifyJS.minify([ "file1.js", "file2.js", "file3.js" ]);
console.log(result.code); 
```

您可以使用`require('fs')`并编写一个简短的`node.js`脚本来加载目录中的所有js文件以及数组中的所有子目录并将其传递给`UglifyJS.minify`

在大多数情况下，最小化是有意义的，因为它缩短了脚本的加载时间并隐藏了功能和可读性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T12:58:36.023

复制自 ==>[如何在 EXTJS 中形成文件夹结构树？](https://stackoverflow.com/questions/5339192/how-to-form-the-folder-structured-tree-in-extjs)

以下链接可能对您有所帮助

[如何在EXTJS中形成文件夹结构树？](https://stackoverflow.com/questions/5339192/how-to-form-the-folder-structured-tree-in-extjs)

```
Ext.onReady(function(){
    // shorthand
    var Tree = Ext.tree;

    var tree = new Tree.TreePanel({
        useArrows: true,
        autoScroll: true,
        animate: true,
        enableDD: true,
        containerScroll: true,
        border: false,
        // auto create TreeLoader
        dataUrl: 'get-nodes.php',

        root: {
            nodeType: 'async',
            text: 'Ext JS',
            draggable: false,
            id: 'src'
        }
    });

    // render the tree
    tree.render('tree-div');
    tree.getRootNode().expand();
}); 
```

演示链接也可以在 [http://dev.sencha.com/deploy/ext-4.0.0/examples/tree/reorder.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/tree/reorder.html)

# iphone - iphone：关闭视图控制器和三个主要视图

> ID：14583188
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:11.937
> 
> 标签：iphone, objective-c, modalviewcontroller

我有一个问题当然已经解决了，但我找不到答案。

我有一个具有三个主要视图的应用程序。就我而言，这意味着
我有主屏幕（屏幕 A），我可以转到屏幕 B 或屏幕 C。
我有（屏幕 B），我可以从中转到屏幕 A 或屏幕 C。
我有屏幕 C ，我可以从中转到屏幕 C可以转到屏幕 A 或屏幕 B。

我没有情节提要，我正在使用 presentModalViewController。所以我每次从孩子切换到其他屏幕时都想解雇父母

*例如：（* `screen A->screen B`取消之前调用屏幕 C 屏幕 A 被关闭）`->screen C ->screen A`（屏幕 A 再次创建，屏幕 B 被删除）

我尝试`[self.presentingModalViewController dismissViewControllerAnimated];`在按钮方法中使用其他屏幕调用，但它会引发异常。

我能做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:40:46.870

您可以这样做的一种方法是使用 navigationController 并推送、弹出或弹出，然后根据需要进行推送。

或者你可以使用 NSNotifications 告诉父 viewController 关闭它的孩子：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"switchToViewB" object:nil userInfo:nil]; 
```

和父级在收到通知时调用它的方法 switchToViewB：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(switchToViewB:) name:@"switchToViewB" object:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:27:08.257

更好的是，您可以将其作为具有三个视图控制器 A、B 和 C 的基于 TabBar 的应用程序，然后您可以轻松地在视图之间切换

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
UIViewController *viewControllerA = [[[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil] autorelease];
UIViewController *viewControllerB = [[[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
UIViewController *viewControllerC = [[ThirdViewController alloc] initWithNibName:@"SecondViewController" bundle:nil] autorelease];
self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewControllerA, viewControllerB,viewControllerC, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:23:27.280

您的应用程序导航是否基于？尝试这个：

```
 YourABCController *controllerObj = [[YourABCController alloc] initWithNibName:@"YourABCController" bundle:nil];

UINavigationController *navcont = [[UINavigationController alloc] initWithRootViewController:controllerObj];

[self presentModalViewController:navcont animated:YES];

[commentsViewControllerObj release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:47:58.197

规范接下来说 -(void)dismissModalViewControllerAnimated: 方法：

```
If you call this method on the presented view controller itself,
however, it automatically forwards the message to the presenting view controller.
If you present several view controllers in succession, and thus build a stack of 
presented    view controllers, calling this method on a view controller lower in
the stack dismisses its immediate child view controller and all view controllers 
above that child on the stack. 
```

因此，如果在您的示例中您关闭 ScreenA，那么 ScreenB 也将被关闭。

取而代之的是，您可以使用 UINavigationBar、UITabBar 或逐个呈现视图控制器

# c# - 等待后台工作者

> ID：14583191
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:18.257
> 
> 标签：c#, multithreading, backgroundworker

我有两种方法可以通过使用 BackgrounderWorker 来完成一些工作。如果我运行第一种方法，那么它会在后台执行一些工作，第二种方法也是如此。但我想要的是第二种方法应该等到方法一个工人开始。

代码

```
private void Method1(object sender, RoutedEventArgs e)
{
    RunFirstWorker();
}

private void Method2(object sender, RoutedEventArgs e)
{
    RunFirstWorker();
    RunSecondWorker();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:58:23.320

您可以使用事件对象 ([`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)或[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)) 来同步这些函数的执行。`RunSecondWorker()`在非信号状态下创建事件并在's`DoWork`事件处理程序的开头等待它。`RunFirstWorker()`将此事件的状态设置为在`DoWork`事件处理程序结束时发出信号。

在您的原始代码片段中`Method1()`并且`Method2()`是 GUI 回调（在 GUI 线程上执行的方法），因此您不想阻止它们（您不想在任何这些方法本身中等待事件，而是在 BackgroundWorker 回调 -`DoWork`事件处理程序中） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:45:39.753

也许在F1中返回IAsyncResult并将其传递给f2中的worker，然后在f2 worker开始时在AsyncWaitHandle上调用waitone？

请参阅[http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx](http://msdn.microsoft.com/en-us/library/system.iasyncresult.aspx)

@Nikita - 我不是说从 F1 和 F2 内部打电话，原海报说他们正在使用后台工作人员。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T12:47:59.783

编辑：（查看其他答案）好的-问题是您将如何以及何时等待F1。BackgroundWorker 有事件 - RunWorkerCompleted 正在主线程上执行。如果你需要在那里做一些逻辑并等待它完成 - 那么你不能等待，这将导致死锁。一种选择是使用 Application.DoEvents() 来提升 msgs - 但它可能会导致一些意外行为。

# android - 非法状态异常

> ID：14583193
> 
> 赞同：-2
> 
> 时间：2013-01-29T12:43:19.253
> 
> 标签：android, android-listview, illegalstateexception

我有两个活动。一个活动有listview，第二个活动有gridview..一个我从listview活动中单击下一个活动将安全打开，但是当我从模拟器按下后退按钮时，listacitivity会显示但是当我再次单击listactivity时，它会给我强制关闭选项和我的应用程序崩溃... Logcat 错误存在..

```
01-30 05:32:24.748: E/AndroidRuntime(998): FATAL EXCEPTION: main
01-30 05:32:24.748: E/AndroidRuntime(998): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class android.widget.ArrayAdapter)]
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.widget.ListView.layoutChildren(ListView.java:1538)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:3513)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.View.dispatchTouchEvent(View.java:7127)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2170)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1905)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2176)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1919)
01-30 05:32:24.748: E/AndroidRuntime(998):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1925)
01-30 05:32:24.748: E/AndroidRuntime(998):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1379)
01-30 05:32:24.748: E/AndroidRuntime(998):  at android.app.Activity.dispatchTouchEvent(Activity.java:2396)
01-30 05:32:24.748: E/AndroidRuntime(998):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1873) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:52:54.350

没有代码，很难说可能出了什么问题。但我能想到的最可能的解决方案是，

我认为您正在第二个活动中执行一些计算，这些计算正在修改列表活动中显示的内容。

当您打开时`second activity`，只需按下第二个 Activity 中的后退按钮（覆盖`finish()`）即可创建一个新的来打开第一个 Activity。`first Activity``onBackPressed()``Intent`

如果您需要有关如何覆盖该`onBackPressed()`功能的帮助，请告诉我。

# scala - 如何从运行时参数中指定 SLICK Query sortBy 列？

> ID：14583195
> 
> 赞同：11
> 
> 时间：2013-01-29T12:43:23.043
> 
> 标签：scala, scalaquery, slick

我有以下 SLICK 查询来获取名称字段匹配某些值条件并按名称列排序的数据表的分页结果

```
val q = ThirdParties.where(_.name like criteria).sortBy(_.name.asc.nullsLast).drop(offset).take(pageSize)
val thirdParties = (for(s <-q) yield(s)).list map { case t: ThirdParty => t } 
```

这对我来说没问题，但现在我需要能够将**运行时参数传递给 sortBy 方法**，该方法标识要在其上执行排序的列。
我调用查询的方法将有一个**int**表示数据表中列的索引。

如何从 int 列索引获取 sortBy 方法所需的必要类型？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T15:42:09.277

这样做会失去一些类型安全性，但也许这样的方法伤害最小：

这是 Slick 文档中的咖啡示例。假设您希望通过*'index'*来处理列的子集。在我们的示例中，假设由于某种原因，我们有**2 个**价格列和销售列，`Int`我们将其称为 column或。. 如果您可以忍受轻微的 DRY 违规行为，例如：`0``1``2`

```
object Coffees extends Table[(String, Int, Double, Double, Int, Int)]("COFFEES") {
  def name = column[String]("COF_NAME", O.PrimaryKey)
  def supID = column[Int]("SUP_ID")
  def price1 = column[Double]("PRICE1")
  def price2 = column[Double]("PRICE2")
  def sales = column[Int]("SALES")
  def total = column[Int]("TOTAL")
  def * = name ~ supID ~ price1 ~ price2 ~ sales ~ total
  def nth = Vector(price1, price2, sales) // Your index-addressable columns 
} 
```

这`Coffees.nth`是一个包含`Int`和的列向量`Double`。

```
scala> Coffees.nth
scala.collection.immutable.Vector[scala.slick.lifted.Column[_ >: Int with Double <: AnyVal]] = Vector(COFFEES.PRICE1, COFFEES.PRICE2, COFFEES.SALES) 
```

当然，在*运行时*选择要排序的列意味着您必须处理虚假的列索引 - 如果您只有`k`列并且您要求`k+1`第 th 列，您要么必须抛出异常，要么默默地选择默认列。这是想要将动态输入转换为通常是静态的（并且类型安全）的结果。

如果您对虚假列索引的例外情况感到满意，那么（回到您的示例）

```
 def q(colIndx: Int) = ThirdParties.where(_.name like criteria).
       sortBy(_.nth(colIndx).asc.nullsLast).
       drop(offset).take(pageSize) 
```

然后调用查询

```
 val colIndx: Int = // gotten at runtime
 val thirdParties = (for(s <-q(colIndx)) yield(s)).list map { case t: ThirdParty => t } 
```

# haskell - haskell 函数签名

> ID：14583197
> 
> 赞同：4
> 
> 时间：2013-01-29T12:43:33.873
> 
> 标签：haskell, signature, type-variables

我对haskell中的类型签名有疑问。阅读应用函子，我发现：

```
pure (+) <*> Just 3 
```

它返回`Just (+3)`了类型 `Maybe (a->a)`。现在的签名`<*>`是

```
 (<*>) :: Applicative f => f (a -> b) -> f a -> f b 
```

这意味着我们`f b`在上面的例子中是`f`用`Maybe`和`b`替换得到的`a->a`。

在这里我有点惊讶，因为据我所知，`b`无法统一（对不起，如果我没有使用指定的术语，但我希望它们足够清楚）与`a->a`.

这是否可能仅仅因为我们在内部和应用函子中，或者我还缺少其他东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T13:04:10.380

`b`是一个（n 无约束的）类型变量，因此它可以始终与*每种类型统一。*它与函子无关`Applicative`，它适用于类型变量必须与类型统一的任何地方。

粗略地说，统一两个类型表达式会产生最通用的类​​型表达式，它不比统一的任何一个伙伴更通用。如果两种类型表达式中的一种比另一种更通用，则统一总是成功并产生更具体的统一伙伴。所有类型表达式中最通用的是一个根本没有任何结构的类型变量。因此，可以通过使用该类型表达式实例化类型变量来将类型变量与任何类型表达式统一（如果种类匹配，其种类为的类型变量`*`当然不能与`Maybe`种类为的类型表达式统一`* -> *`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T12:55:41.543

`:t pure (+)`是

```
pure (+) :: (Num a, Applicative f) => f (a -> a -> a) 
```

注意`f(a -> a -> a)`

所以既然`:t (<*>)`是

```
(<*>) :: Applicative f => f (a -> b) -> f a -> f b 
```

`f ( a -> b)`实际上是一个`f ( a -> a -> a)`。

所以`b`这种情况下的类型变量*是* `a -> a`

# java - 使用 Facebook Android SDK 和 Proguard 登录

> ID：14583199
> 
> 赞同：13
> 
> 时间：2013-01-29T12:43:35.910
> 
> 标签：java, android, facebook-android-sdk

我使用 Facebook Android SDK 3.0 创建了一个 Android 应用程序。

我创建了一个工作应用程序（从 Eclipse 运行时）。它将创建一个 Facebook 会话（使用 com.facebook.UiLifecycleHelper）和一个登录按钮（使用 com.facebook.LoginButton），以便用户可以登录 Facebook。Facebook 身份验证对话框正在显示，填写凭据后，登录按钮将显示用户已登录 Facebook。

所以，到目前为止一切正常，但是当我进行发布构建（启用 Proguard）时，我得到以下异常：

```
E/AndroidRuntime(14690): FATAL EXCEPTION: main
E/AndroidRuntime(14690): com.facebook.FacebookException: Unable to save session.
E/AndroidRuntime(14690):    at com.facebook.Session.saveSession(Session.java:673)
E/AndroidRuntime(14690):    at com.facebook.UiLifecycleHelper.onSaveInstanceState(UiLifecycleHelper.java:124)
E/AndroidRuntime(14690):    at com.peerkesoftware.blockcrusher.MorburActivity.onSaveInstanceState(MorburActivity.java:175)
E/AndroidRuntime(14690):    at android.app.Activity.performSaveInstanceState(Activity.java:1147)
E/AndroidRuntime(14690):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1216)
E/AndroidRuntime(14690):    at android.app.ActivityThread.performStopActivityInner(ActivityThread.java:3253)
E/AndroidRuntime(14690):    at android.app.ActivityThread.handleStopActivity(ActivityThread.java:3312)
E/AndroidRuntime(14690):    at android.app.ActivityThread.access$900(ActivityThread.java:150)
E/AndroidRuntime(14690):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
E/AndroidRuntime(14690):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(14690):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(14690):    at android.app.ActivityThread.main(ActivityThread.java:5191)
E/AndroidRuntime(14690):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(14690):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(14690):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
E/AndroidRuntime(14690):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
E/AndroidRuntime(14690):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(14690): Caused by: java.io.NotSerializableException: com.facebook.internal.SessionTracker$CallbackWrapper
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1364)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
E/AndroidRuntime(14690):    at java.util.ArrayList.writeObject(ArrayList.java:644)
E/AndroidRuntime(14690):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(14690):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1053)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:979)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:368)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1074)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1404)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1671)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1517)
E/AndroidRuntime(14690):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1481)
E/AndroidRuntime(14690):    at com.facebook.Session.saveSession(Session.java:671)
E/AndroidRuntime(14690):    ... 16 more 
```

我已经尝试添加一些 Proguard 规则，但没有解决这个问题：

```
-keep class com.facebook.*
-keep class com.facebook.android.*
-keep class android.webkit.WebViewClient
-keep class * extends android.webkit.WebViewClient
-keepclassmembers class * extends android.webkit.WebViewClient { 
    <methods>;  } 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T10:41:07.443

关键可能是堆栈跟踪中的 NotSerializableException。

您已经按照规则集走在正确的路线上。看看[这个 Proguard 文档](http://proguard.sourceforge.net/index.html#manual/examples.html)，特别是“处理可序列化类”部分。

您可以从那里尝试的最简单的示例是：

```
-keepclassmembers class * implements java.io.Serializable
{
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

但他们对此进行了扩展并增加了更多复杂性。

我已经看到与 Android 的 AIDL 和 Parcelable 接口类似的东西，这是一个不同的序列化实例（通过远程 API 传递对象）。Proguard 更改了类名，这意味着它无法再找到要构造的预期类。

# android - AdMob 常规事件跟踪

> ID：14583200
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:37.937
> 
> 标签：android, admob

这个问题可能听起来有点傻，但我听说 AdMob 可以跟踪移动应用中的一般事件，而不仅仅是点击添加等（比如点击按钮）。我在互联网上进行了搜索，但没有找到任何相关内容。我想知道它是否与 AdMob API 或 AdMob SDK 有关，它们之间可能有什么区别。此外，起点可能会有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:06:28.900

这听起来更像是[Google Analytics for Mobile Apps](https://developers.google.com/analytics/devguides/collection/android/)。AdMob SDK 仅真正跟踪展示次数和点击次数。不再有 AdMob API 供发布商获取移动网站广告（他们应该使用 AdSense），只有 AdMob API for Ads，但这是供广告商在 AdMob 上制作广告的。

# ios - 检测 sprite cocos2d 中的特定触摸位置

> ID：14583203
> 
> 赞同：1
> 
> 时间：2013-01-29T12:43:46.377
> 
> 标签：ios, objective-c, cocos2d-iphone

![在此处输入图像描述](../Images/5ecaa08b243b6343eaade09e90576146.png)

在上图中，黄色代表一个大于 iPad 分辨率的精灵。我想允许在此处以白色表示的特定位置上的拖放功能。

我所拥有的是：-CCActor 继承 CCSprite-targetedBoundingBox 是根据精灵的白色圆圈的边界框。

我想要什么：如何根据精灵而不是屏幕来获取触摸位置？

我的代码：

```
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
    CCActor * newSprite = [self selectSpriteForTouch:touchLocation];
    if(newSprite != NULL){
        //touchLocation should be according to the sprite.
        if (CGRectContainsPoint(newSprite.targetedBoundingBox, touchLocation)) {
            [self spriteSelected:newSprite];
            return YES;
        }
        return NO;
    }
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:57:52.780

在我看来，最简单的方法是计算你的触摸位置和精灵位置之间的差异，所以你的代码应该如下所示：

首先在您的班级中的某个全局位置定义它

```
CCPoint relativePosition; 
```

然后从触摸代码内部计算您的触摸位置和精灵位置之间的差异（仅当触摸实际上在精灵内部时才完成，这意味着如果您触摸外部，您将不会得到 x=-100, y=-999精灵）

```
-(BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

    CGPoint touchLocation = [self convertTouchToNodeSpace:touch];
    CCPoint actorPosition = [actor position];

    if (CGRectContainsPoint(actor.targetedBoundingBox, touchLocation)) {
      //You now have the touch position here:
      relativePosition = ccpSub(touchLocation, actorPosition);
      return YES;
    }

    return NO;
} 
```

代码没有经过测试，只是从头顶写下来，我确定有错误，但它暗示了你应该往哪个方向走！，也取决于你在做什么，有更好的方法来处理这个，以[本帖](http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d)为例

如果我没有意义，请纠正我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:30:28.290

根据您的描述，“我想要什么：如何根据精灵而不是屏幕来获取touchLocation？”，首先您应该了解，目前Cocos2D在图层级别集中处理所有触摸，而不是在精灵级别。

因此，在 UIView 坐标中接收到的触摸必须转换为层（节点空间）坐标，然后检查触摸是否与相关精灵相交。对于参考实现，您可以查看本[教程](http://www.raywenderlich.com/2343/how-to-drag-and-drop-sprites-with-cocos2d "使用 Cocos2D 拖放精灵")。

如果我正确理解了您的问题，您想更进一步并确定相关精灵中的确切坐标，那么它是一个基本的方向距离 = (newSprite.x,newSprite.y) -(touchlocation.x,touchlocation.y) inside touch intersects sprite 条件，以获取与 sprite 中心的方向和/或距离，以到达相关 sprite 内的确切触摸位置。

# ruby-on-rails - 无法通过乘客在 Apache2 上运行 RoR 应用程序（Fedena）

> ID：14583206
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:53.503
> 
> 标签：ruby-on-rails, apache, passenger, fedena

首先，我要感谢您对有需要的人的帮助。愿上帝保佑你们所有人。

我正在尝试在我们学校的内部 Web 服务器上的*Apache上托管一个***RoR**应用程序。配置如下：

 **   Ubuntu 服务器 12.04.1 64 位版本。
*   阿帕奇2
*   阿帕奇的乘客
*   PHP5
*   MySQL
*   红宝石 1.8.7
*   导轨 2.3.5

*我可以在Webrick*上运行 RoR 应用程序（*Fedena*）而没有任何问题（即通过脚本/服务器命令）但是当我尝试通过*Passenger*在*Apache上运行**Fedena*时，它会抛出错误“未初始化的常量授权”。

 ***这是一个截图：http: [//i46.tinypic.com/mj67v7.png](http://i46.tinypic.com/mj67v7.png)[![错误截图](../Images/4682721ac488d18de94037ec8730b5a5.png)](https://i.stack.imgur.com/8VzEb.png)

如果你能帮我解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:32:37.577

**谢谢大家......** 我在你的帮助下想通了。

**我在config/boot.rb**的底部添加了以下代码

 **```
 class Rails::Boot
  def run
    load_initializer

    Rails::Initializer.class_eval do
      def load_gems
        @bundler_loaded ||= Bundler.require :default, Rails.env
      end
    end

    Rails::Initializer.run(:set_load_path)
  end
end 
```

我按照 bundler 中的说明使用 rails 2.3[说明](http://gembundler.com/v1.3/rails23.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:51:58.407

有几种可能性，请确保您使用的是与 1.8.2 兼容的正确版本的 gem，并尝试“捆绑安装”一次。我觉得你使用了与 1.8.2 兼容的 devise gem。请安装正确的 gem 版本，并将相同的 gem 版本添加到 Gemfile 中。******

# excel - 带有格式的 Powerpoint 幻灯片中的 Excel 数据

> ID：14583208
> 
> 赞同：0
> 
> 时间：2013-01-29T12:43:58.347
> 
> 标签：excel, formatting, embed, powerpoint, auto-update

我有一些 Excel 表格需要在 Powerpoint 幻灯片上显示，并且如果电子表格已更新，则需要它们自动更新。

我可以正常粘贴它们，它们看起来很棒，我可以更改列宽、字体大小等。但是数据是静态的，不会自动更新。

或者我可以“粘贴链接”，它会自动更新，但看起来很糟糕——文本要么被压扁，要么被拉伸，如果我移动边框，就像拉伸位图，而不是为表格中的数据腾出更多空间。

那么有没有办法让表格进入 Powerpoint，能够很好地格式化它，并且还能自动更新呢？我可以冒险进入 VBA，但这应该可以在没有代码的情况下实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:45:33.283

如果您粘贴为 microsoft 图表对象，它看起来会好一些。此外，我采用了为我的演示项目制作一个单独的选项卡并在 excel 应用程序而不是在 powerpoint 中调整单元格的做法。这样，即使您更新参考资料，它们也将保持相同的大小。

# java - 如何诊断 JBoss IIOP 存根生成、类加载问题？

> ID：14583213
> 
> 赞同：1
> 
> 时间：2013-01-29T12:44:20.527
> 
> 标签：java, jboss, iiop, jacorb

我正在将一个运行在 JBoss 6.1 上的十年前的 EJB2 应用程序从 JNP 协议迁移到 CORBA RMI/IIOP，因为我想使用 ORB PortableInterceptor。

第一个 JBoss 抱怨 org.jboss.iiop.rmi.RMIIIOPViolationException 我现在已经修复了。

现在 JBoss 的 WebCL servlet 无法将我的 Home 和 Remote 接口的 Stub 传递给客户端，我不知道可能出了什么问题。我唯一剩下的假设是 RMIC 编译器会静默失败。我得到的唯一错误消息是

```
2013-01-29 09:33:52,068 ERROR [org.jboss.iiop.WebCL] (pool-2-thread-1) failed finding class my.test.services.orb._Business1SLHome_Stub: org.jboss.util.NestedRuntimeException: - nested throwable: (java.lang.ExceptionInInitializerError)
    at org.jboss.iiop.WebCL.findClass(WebCL.java:124) [:6.1.0.Final]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306) [:1.6.0_31]
    at org.jboss.classloading.spi.DelegatingClassLoader.loadClass(DelegatingClassLoader.java:82) [jboss-classloading-spi.jar:6.0.0.CR1]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247) [:1.6.0_31]
    at org.jboss.web.WebServer.run(WebServer.java:393) [:6.1.0.Final]
    at org.jboss.threads.SimpleDirectExecutor.execute(SimpleDirectExecutor.java:33) [:2.0.0.CR7]
    at org.jboss.threads.CleanupExecutor.execute(CleanupExecutor.java:38) [:2.0.0.CR7]
    at org.jboss.threads.CleanupExecutor.execute(CleanupExecutor.java:38) [:2.0.0.CR7]
    at org.jboss.threads.QueueExecutor.runTask(QueueExecutor.java:801) [:2.0.0.CR7]
    at org.jboss.threads.QueueExecutor.access$100(QueueExecutor.java:45) [:2.0.0.CR7]
    at org.jboss.threads.QueueExecutor$Worker.run(QueueExecutor.java:821) [:2.0.0.CR7]
    at java.lang.Thread.run(Thread.java:662) [:1.6.0_31]
    at org.jboss.threads.JBossThread.run(JBossThread.java:122) [:2.0.0.CR7]
Caused by: java.lang.ExceptionInInitializerError
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [:1.6.0_31]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39) [:1.6.0_31]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) [:1.6.0_31]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513) [:1.6.0_31]
    at java.lang.Class.newInstance0(Class.java:355) [:1.6.0_31]
    at java.lang.Class.newInstance(Class.java:308) [:1.6.0_31]
    at org.jboss.iiop.WebCL.findClass(WebCL.java:120) [:6.1.0.Final]
    ... 12 more
Caused by: java.lang.RuntimeException: Error loading class my.test.services.orb.Business1Remote: java.lang.ClassNotFoundException: my.test.services.orb.Business1Remote from BaseClassLoader@3cdf0256{asynch-classloader:0.0.0$MODULE}
    at org.jboss.iiop.rmi.marshal.CDRStream.readerFor(CDRStream.java:208) [:6.1.0.Final]
    at org.jboss.iiop.rmi.marshal.strategy.StubStrategy.<init>(StubStrategy.java:175) [:6.1.0.Final]
    at org.jboss.iiop.rmi.marshal.strategy.StubStrategy.forMethod(StubStrategy.java:115) [:6.1.0.Final]
    at my.test.services.orb._Business1SLHome_Stub.$i2(Unknown Source)
    at my.test.services.orb._Business1SLHome_Stub.<clinit>(Unknown Source)
    ... 19 more 
```

我应该如何着手获取此类加载失败的原因并修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:11:41.783

我一直在这样做：

1.  在 jboss 上启用远程调试
2.  将调试器（例如 eclipse 调试器）连接到 JBoss 实例
3.  定义一个断点来捕获任何 ClassNotFoundExceptions
4.  激活代码
5.  当断点被命中时，检查使用的类加载器并查看加载的类列表是什么样的，这应该提供关于类加载失败的线索

即使编译器工作，也可能是类加载器对相关类没有可见性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:46:58.117

根本原因是找不到命名的 Business1Remote 类。查看堆栈跟踪。你把它部署到客户端了吗？

# c - 多个 fork 语句如何工作？

> ID：14583222
> 
> 赞同：4
> 
> 时间：2013-01-29T12:44:36.570
> 
> 标签：c, unix, fork

如果我运行以下代码：

```
#include <stdio.h>
#include <unistd.h>

int main()
{
    pid_t pid, pid1;
    fflush(stdout);
    pid = fork();
    fflush(stdout); 
    pid1 = fork();
    if(pid==0)
    {
         printf("%d is the first child\n", getpid() );
    }
    else if(pid>0)
    {
         printf("%d is the first parent\n", pid);
        wait();
    }
    if(pid1==0)
    {
         printf("%d is the second child\n", getpid() );
    }
    else if(pid1>0)
    {
         printf("%d is the second child\n", pid1);
        wait();
    }

    return 0;
} 
```

我得到输出：

```
2896 is the first parent
2896 is the first child
2898 is the first child
2898 is the second child
2898 is the second child
2896 is the first parent
2897 is the second child
2897 is the second child 
```

我无法理解输出。为什么多次打印相同的字符串？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T13:05:44.527

您总共进行了 3 个分叉：首先，`pid = fork()`在原始流程中完成，导致多了一个流程，所以现在总共是两个，都从代码的下一行继续。

然后`pid1 = fork()`在这两个上完成，导致另外两个*子*进程，所以现在总数为 4，每个再次继续下一行（第一个 if）。

然后所有三个进程处理两个 if-else 语句（假设没有分叉错误），每个进程打印两行。所以四个进程乘以 2 行是 8 行。你得到的。

所以流程是：

*   原来的
*   第一代大孩子，来自第一个 fork 语句
*   第一代年幼的孩子，来自原版的第二个 fork 声明
*   第二代子代，来自较年长的第一代子代的第二个 fork 语句

如果您想了解输出，请在您的脑海中逐步完成所有这四个过程的代码。除了现在打印的内容之外，如果您在每个打印语句中打印出当前的 pid 也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T11:47:13.977

另外我认为您在下面的代码中错误地打印了相同的字符串

```
else if(pid1>0)
{
    printf("%d is the second child\n", pid1); // This "child" should be "parent"
    wait();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T20:23:06.797

为了更好地理解，您可以为每个进程编写 if/else 块：

```
 if(pid != 0 && pid1 != 0){
        printf("Parent P\n");//parent
    }else if(pid == 0 && pid1 != 0){
        printf("First child of P\n");
    }else if(pid != 0 && pid1 == 0){
        printf("Second child of P\n");
    }else{
        //pid = 0, pid2 = 0
        printf("Child of the first child of P\n");
    } 
```

# c# - 如何在 cookie 过期时使用 asp.net 中的表单身份验证显示弹出窗口

> ID：14583226
> 
> 赞同：0
> 
> 时间：2013-01-29T12:44:46.643
> 
> 标签：c#, asp.net

我必须重定向到另一个应用程序中的另一个页面。如何在 cookie 过期时使用 asp.net 中的表单身份验证显示弹出窗口，以便在重定向到另一个页面之前。即在 cookie 过期时我应该在哪个 http: 模块中注入逻辑并重定向到另一个应用程序页面。

提前致谢。

# typescript - 为什么必须声明 Typescript 的环境接口实现？

> ID：14583231
> 
> 赞同：4
> 
> 时间：2013-01-29T12:44:56.073
> 
> 标签：typescript

我有一些接口及其实现的定义。有很多方法必须在每个实现类上声明。

我觉得它只是一个定义，既乏味又多余。是否只是缺乏时间来实现此功能，或者为什么应该强制执行环境实现定义背后的一些想法？还是我错过了什么？

**更新**

我现在不喜欢我的问题，它是从一个确信接口成员已实现的人的角度写的，因为图书馆所有者这么说。但是，如果我决定为其他人的库创建自己的接口，我最好强制指定每个实现成员作为健全性检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:30:34.613

假设您不必写出接口成员：

```
class Base { }
class Derived extends Base { }

interface Foo {
    method(t: number): Base;    
}

declare class FooImpl1 implements Foo {
    // Empty
}

declare class FooImpl2 implements Foo {
    public method(): Derived;
} 
```

是`FooImpl2`试图声明一个额外的重载`method`，还是使用采用更少参数并返回更多派生类型的签名来`FooImpl2`实现？`method`要么是一个有效的解释。您必须为这样的各种情况制定规则，以便程序员可以指定它们的实际含义，从而降低语言的可预测性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:52:21.820

您不必为环境声明提供任何实现。

例如，一个接口将只描述没有实现的类型：

```
interface MyInterface {
    property: string;
    method(input: number): void;
} 
```

这同样适用于类或模块的环境声明：

```
declare class MyClass {
    property: string;
    method(input: number): void;
} 
```

如果要表示实现和接口的类的环境声明，可以使用以下快捷方式：

```
interface MyInterface {
    property: string;
    method(input: number): void;
}

declare var MyClass: MyInterface; 
```

# css - 不同浏览器中的转换比例（）与宽度/高度

> ID：14583233
> 
> 赞同：0
> 
> 时间：2013-01-29T12:45:05.927
> 
> 标签：css, webkit, gpu, css-transitions, mozilla

我偶然发现了一个大问题，firefox 无法`scale()`以正常质量渲染，所以我决定去设置`width/height/top/left`和转换它。但是现在 chrome 以低质量渲染，几乎 5-8 FPS 和 safari 只是在两者之间滞后并显示最终结果。

我读到如果你想触发 chrome 的 GPU 渲染，你只需要在`translate3d()`你的值中添加或“translateZ()” `-webkit-transform`，但它不再有帮助了。

另一件事是，我不能真正依赖计算机的 GPU 性能，因为我需要尽可能平滑动画。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T19:24:12.387

为了触发 GPU 渲染，您添加了以下内容：

`.selector { transform: scale(1) rotate(0deg) translate3d(0,0,0); }`

即使 translate3d 为 0,0,0，它也会触发硬件加速，但没有看到您的代码，我不确定还有什么推荐的？

# c# - 滚动时禁用拖放

> ID：14583234
> 
> 赞同：2
> 
> 时间：2013-01-29T12:45:06.590
> 
> 标签：c#, wpf, drag-and-drop, scroll, treeview

我已经为 WPF 中的 TreeView 实现了拖放功能。

一切正常，但是当滚动显示在树视图中时，如果我在树中选择一个项目，然后尝试滚动（垂直或水平），TreeView 会尝试执行拖放操作。

这是源代码：

```
class TreeViewRearranger
{
    private TreeView mTreeView;

    private int MOVE_TOLERANCE = 10;

    private TreeViewItem mDraggedItem = null;
    private TreeViewItem mTargetDrop = null;
    private DropAdorner mDropAdorner = null;

    public void Initialize(TreeView treeView)
    {
        mTreeView = treeView;

        SetupDragDropEvents();
    }

    private void SetupDragDropEvents()
    {
        mTreeView.MouseDown += mTreeView_MouseDown;
        mTreeView.MouseMove += mTreeView_MouseMove;
        mTreeView.DragOver += mTreeView_DragOver;
        mTreeView.Drop += mTreeView_Drop;
        mTreeView.DragEnter += mTreeView_DragEnter;
        mTreeView.DragLeave += mTreeView_DragLeave;
    }

    void mTreeView_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (e.ChangedButton != MouseButton.Left)
            return;

        mLastMouseDown = e.GetPosition(mTreeView);
    }

    void mTreeView_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.LeftButton != MouseButtonState.Pressed)
            return;

        Point currentPosition = e.GetPosition(mTreeView);

        if ((Math.Abs(currentPosition.X - mLastMouseDown.X) <= MOVE_TOLERANCE) &&
            (Math.Abs(currentPosition.Y - mLastMouseDown.Y) <= MOVE_TOLERANCE))

            return;

        StartDrag();
    }

    void mTreeView_DragLeave(object sender, DragEventArgs e)
    {
        RemoveAdorners();
    }

    void mTreeView_DragEnter(object sender, DragEventArgs e)
    {
        AdornerLayer layer = AdornerLayer.GetAdornerLayer(mTreeView);
        mDropAdorner = new DropAdorner(mTreeView);

        layer.Add(mDropAdorner);
    }

    private Point mLastMouseDown;

    private void StartDrag()
    {
        mDraggedItem = mTreeView.SelectedItem as TreeViewItem;

        if (mDraggedItem == null) return;

        DragDropEffects finalDropEffect =
            DragDrop.DoDragDrop(
                mTreeView, mTreeView.SelectedValue, DragDropEffects.Move);

        // Check that target is not null and item is 
        // dragging(moving)

        if ((finalDropEffect != DragDropEffects.Move) || (mTargetDrop == null))
            return;

        // A Move drop was accepted

        if (mDraggedItem.Header.ToString().Equals(mTargetDrop.Header.ToString()))
            return;

        PerformDragDrop(mDraggedItem, mTargetDrop);

        mTargetDrop = null;
        mDraggedItem = null;
    }

    private void PerformDragDrop(TreeViewItem source, TreeViewItem destination)
    {
        if (source == null || destination == null)
            return;

        OnRearrange(source, destination);
    }

    private static TreeViewItem GetParentTreeViewItem(DependencyObject item)
    {
        if (item == null)
            return null;

        DependencyObject parent = VisualTreeHelper.GetParent(item);
        TreeViewItem parentTreeViewItem = parent as TreeViewItem;
        return parentTreeViewItem ?? GetParentTreeViewItem(parent);
    }

    private void OnRearrange(TreeViewItem source, TreeViewItem destination)
    {
        if (source == null || destination == null)
            return;

        TreeNode sourceNode = source.Tag as TreeNode;
        TreeNode destinationNode = destination.Tag as TreeNode;

        TreeNode targetNode = destinationNode;

        if (!destination.IsExpanded || destination.Items.Count == 0)
        {
            TreeViewItem parentItem = GetParentTreeViewItem(destination);

            if (parentItem == null)
            {
                targetNode = mTreeView.Tag as TreeNode;
            }
            else
            {
                targetNode = parentItem.Tag as TreeNode;
            }
        }

        int index = targetNode.Children.IndexOf(destinationNode) + 1;

        // performed a rearrange from sourceNode to targetNode at index
    }

    void mTreeView_DragOver(object sender, DragEventArgs e)
    {
        Point currentPosition = e.GetPosition(mTreeView);

        if ((Math.Abs(currentPosition.X - mLastMouseDown.X) <= MOVE_TOLERANCE) &&
            (Math.Abs(currentPosition.Y - mLastMouseDown.Y) <= MOVE_TOLERANCE))

            return;

        // Verify that this is a valid drop and then store the drop target

        TreeViewItem item = GetNearestContainer(e.OriginalSource as UIElement);

        if (CheckDropTarget(mDraggedItem, item))
        {
            e.Effects = DragDropEffects.Move;
            UpdateDropAdorner(item);
        }
        else
        {
            e.Effects = DragDropEffects.None;
            UpdateDropAdorner(null);
        }

        e.Handled = true;
    }

    void mTreeView_Drop(object sender, DragEventArgs e)
    {
        e.Effects = DragDropEffects.None;
        e.Handled = true;

        // Verify that this is a valid drop and then store the drop target
        TreeViewItem targetItem = GetNearestContainer
            (e.OriginalSource as UIElement);

        if (targetItem == null || mDraggedItem == null)
            return;

        mTargetDrop = targetItem;
        e.Effects = DragDropEffects.Move;

        UpdateDropAdorner(mTargetDrop);

        RemoveAdorners();
    }

    private void UpdateDropAdorner(TreeViewItem targetItem)
    {
        mDropAdorner.UpdateTargetPosition(targetItem);
    }

    private TreeViewItem GetNearestContainer(UIElement element)
    {
        // Walk up the element tree to the nearest tree view item.
        TreeViewItem container = element as TreeViewItem;
        while ((container == null) && (element != null))
        {
            element = VisualTreeHelper.GetParent(element) as UIElement;
            container = element as TreeViewItem;
        }
        return container;
    }

    private bool CheckDropTarget(TreeViewItem sourceItem, TreeViewItem targetItem)
    {
        if (sourceItem == null || targetItem == null)
            return false;

        if (sourceItem.Header.ToString().Equals(targetItem.Header.ToString()))
            return false;

        if (targetItem.IsDescendantOf(sourceItem))
            return false;

        return true;
    }

    private void RemoveAdorners()
    {
        AdornerLayer layer = AdornerLayer.GetAdornerLayer(mTreeView);

        layer.Remove(mDropAdorner);

        mDropAdorner = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:46:12.987

您可能必须将自己附加到 scrollviewers ScrollChanged 事件，并且当触发该事件时，您将禁用拖放。我还没有尝试过，但我认为这可能是一个尝试的起点

```
ScrollViewer scrollViewer = GetVisualChild<ScrollViewer>(mTreeView);
        scrollViewer.ScrollChanged += new ScrollChangedEventHandler(scrollViewer 
```

# javascript - 如何在 jqGrid 中对未编辑的单元格进行一些填充

> ID：14583237
> 
> 赞同：0
> 
> 时间：2013-01-29T12:45:09.367
> 
> 标签：javascript, jquery, css, jquery-ui, jqgrid

我有一个 jqGrid。它的第一行是可编辑的。稍后，如果双击，底部的每一行也是可编辑的。但默认情况下，第一行是可编辑和聚焦的。后面的行在那里。但我想为底部**未编辑的行添加一些填充。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:00:34.453

您应该创建一个特定的类来处理底部行中的填充。如果您在覆盖 jqGrid css 时遇到问题，请添加 !important 属性。例如：

```
.row-not-edited{ 
  padding: 10px !important;
} 
```

# actionscript-3 - AIR (As3) - 通过 iPad 应用程序下载大文件

> ID：14583247
> 
> 赞同：2
> 
> 时间：2013-01-29T12:45:41.147
> 
> 标签：actionscript-3, flash, mobile, air

首先我想说明我不能发布源代码，因为这个项目很大。我正在尝试在 iPad 设备上下载一个大文件 (500+ MB)。最初我尝试使用 URLLoader，但后来我意识到 iPad 设备的内存资源非常有限。比我认为 URLStream 会以块的形式下载文件，并且使用 FileStream 我可以将这些块保存在设备上（就像这个[AS3：URLStream 将文件保存到桌面？](https://stackoverflow.com/questions/3614199/as3-urlstream-saving-files-to-desktop)），但我错了，当我尝试下载时设备崩溃了大文件，因为设备的 RAM 不够（更确切地说，这变得太大：System.privateMemory） 有谁知道如何分块下载文件，是否可以不使用“套接字连接”？

提前致谢。

编辑：这是我使用的代码（注释行是 FileStream las 仅在文件下载后关闭的版本。

```
 package components.streamDownloader
    {
        import flash.events.Event;
        import flash.events.EventDispatcher;
        import flash.events.IOErrorEvent;
        import flash.events.OutputProgressEvent;
        import flash.events.ProgressEvent;
        import flash.events.SecurityErrorEvent;
        import flash.filesystem.File;
        import flash.filesystem.FileMode;
        import flash.filesystem.FileStream;
        import flash.net.URLRequest;
        import flash.net.URLStream;
        import flash.system.System;
        import flash.utils.ByteArray;

    /**
     * 
     */
    public class StreamDownloader extends EventDispatcher
    {

        [Event(name="DownloadComplete", type="com.tatstyappz.net.DownloadEvent")]

        [Event(name="Error", type="com.tatstyappz.net.DownloadEvent")]

        //--------------------------------------------------------------------------
        //
        //  Constructor
        //
        //--------------------------------------------------------------------------

        public function StreamDownloader()
        {

        }

        //--------------------------------------------------------------------------
        //
        //  Variables
        //
        //--------------------------------------------------------------------------

        private var file:File;

        //private var fileStream:FileStream;

        private var urlRequest:URLRequest;

        private var urlStream:URLStream;

        private var waitingForDataToWrite:Boolean = false;

        //--------------------------------------------------------------------------
        //
        //  API
        //
        //--------------------------------------------------------------------------

        public function download(urlRequest:URLRequest, file:File):void {

            init();

            this.urlRequest = urlRequest;
            this.file = file;
            //fileStream.open(file, FileMode.WRITE);
            urlStream.load(urlRequest);
        }   

        //--------------------------------------------------------------------------
        //
        //  Event handlers
        //
        //--------------------------------------------------------------------------    

        //----------------------------------
        //  urlStream events
        //----------------------------------

        protected function urlStream_openHandler(event:Event):void
        {
            waitingForDataToWrite = false;
            dispatchEvent(event.clone());
        }

        protected function urlStream_progressHandler(event:ProgressEvent):void
        {

            trace("MEMORY:", System.totalMemoryNumber / 1024 / 1024, "MEMORY P:", System.privateMemory / 1024 / 1024, "FREE MEMORY:", System.freeMemory / 1024 / 1024, "PROGRESS:", event.bytesLoaded / event.bytesTotal );

            if(waitingForDataToWrite){
                writeToDisk();
            }       
        }

        protected function urlStream_completeHandler(event:Event):void
        {
            if(urlStream.bytesAvailable > 0)
            {
                writeToDisk();
            }
            //fileStream.close();

            destory();

            dispatchEvent(event.clone());

            // dispatch additional DownloadEvent
            dispatchEvent(new StreamDownloadEvent(StreamDownloadEvent.DOWNLOAD_COMPLETE, urlRequest, file));        
        }

        protected function urlStream_securityErrorHandler(event:SecurityErrorEvent):void
        {
            dispatchEvent(new StreamDownloadEvent(StreamDownloadEvent.ERROR, urlRequest, file, event.errorID.toString()));
            destory();
        }

        protected function urlStream_ioErrorHandler(event:IOErrorEvent):void
        {
            dispatchEvent(new StreamDownloadEvent(StreamDownloadEvent.ERROR, urlRequest, file, event.errorID.toString()));
            destory();
        }   

        //----------------------------------
        //  fileStream events
        //----------------------------------

        protected function fileStream_outputProgressHandler(event:OutputProgressEvent):void
        {
            waitingForDataToWrite = true;
        }   

        protected function fileStream_ioErrorHandler(event:IOErrorEvent):void
        {
            dispatchEvent(new StreamDownloadEvent(StreamDownloadEvent.ERROR, urlRequest, file, event.errorID.toString()));
            destory();
        }   

        //--------------------------------------------------------------------------
        //
        //  Utils
        //
        //--------------------------------------------------------------------------

        private function init():void
        {
            urlStream = new URLStream();
            //fileStream = new FileStream();

            urlStream.addEventListener(Event.OPEN, urlStream_openHandler);
            urlStream.addEventListener(ProgressEvent.PROGRESS, urlStream_progressHandler); 
            urlStream.addEventListener(Event.COMPLETE, urlStream_completeHandler);
            urlStream.addEventListener(IOErrorEvent.IO_ERROR, urlStream_ioErrorHandler);
            urlStream.addEventListener(SecurityErrorEvent.SECURITY_ERROR, urlStream_securityErrorHandler);

            //fileStream.addEventListener(OutputProgressEvent.OUTPUT_PROGRESS, fileStream_outputProgressHandler)
            //fileStream.addEventListener(IOErrorEvent.IO_ERROR, fileStream_ioErrorHandler);        
        }

        private function destory():void
        {
            urlStream.removeEventListener(Event.OPEN, urlStream_openHandler);
            urlStream.removeEventListener(ProgressEvent.PROGRESS, urlStream_progressHandler); 
            urlStream.removeEventListener(Event.COMPLETE, urlStream_completeHandler);
            urlStream.removeEventListener(IOErrorEvent.IO_ERROR, urlStream_ioErrorHandler);
            urlStream.removeEventListener(SecurityErrorEvent.SECURITY_ERROR, urlStream_securityErrorHandler);

            //fileStream.removeEventListener(OutputProgressEvent.OUTPUT_PROGRESS, fileStream_outputProgressHandler)
            //fileStream.removeEventListener(IOErrorEvent.IO_ERROR, fileStream_ioErrorHandler); 

            urlStream = null;
            //fileStream = null;
        }

        private function writeToDisk():void {
            /*var fileData:ByteArray = new ByteArray();
            urlStream.readBytes(fileData, 0, urlStream.bytesAvailable);
            fileStream.writeBytes(fileData,0,fileData.length);
            waitingForDataToWrite = false;*/

            var bytes:ByteArray = new ByteArray();
            urlStream.readBytes( bytes );

            var fs:FileStream = new FileStream();
            fs.open( file, FileMode.APPEND );
            fs.writeBytes( bytes );
            fs.close();
        }

    }
    } 

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:36:46.920

正如我在对 csomakk 的评论中所说，我已经使用 URLStream 分块方法通过 AIR for desktop、iOS 和 Android 成功下载了 300+ MB 的文件。

伪代码：

```
var stream:URLStream = new URLStream();
stream.addEventListener( PROGRESS, progressHandler );
stream.addEventListener( COMPLETE, completeHandler );
stream.load( url );

private function progressHandler( e:ProgressEvent ):void {
    this.writeDataToDisk();
}

private function completeHandler( e:Event ):void {
    this.writeDataToDisk();
}

private function writeDataToDisk():void {
    var bytes:ByteArray = new ByteArray();
    this.stream.readBytes( bytes );

    var fs:FileStream = new FileStream();
    fs.open( file, FileMode.APPEND );
    fs.writeBytes( bytes );
    fs.close();
} 
```

这个基本逻辑在 300MB 以内也能正常工作（而且可能更远。虽然我应该测试过，但现在我想了想）。那是写得很快，所以可能会有一些错误，我肯定少写了一些东西，但你明白了。

如果这不起作用，我们需要您提供一些东西：

1.  发布任何错误
2.  `file.size / 1024 / 1024 + "MB"`在之后追踪`fs.close()`，看看它在崩溃之前能走多远
3.  跟踪`System.memory / 1024 / 1024 + "MB" after the`fs.close()` 以便我们可以监控内存使用情况

对于 2 和 3，我们应该只需要崩溃发生之前的最后一个跟踪语句。

或者，您应该知道您将无法对应用程序中的 500MB 文件执行任何操作。由于它的大小，Flash 根本不会加载它。我设法摆脱我的 300MB 视频文件的唯一原因是我们从磁盘流式传输它们，而不是将整个内容存储到内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T14:15:48.740

由于出于某种原因，我不允许在 Josh 的回答下发表评论，因此我将我的版本添加为单独的答案。但这在很大程度上是基于他的建议。该代码也可通过 GitHub 获得：[https ://github.com/shishenkov/ActionscriptClasses/blob/master/us/flashmx/net/LargeFileLoader.as](https://github.com/shishenkov/ActionscriptClasses/blob/master/us/flashmx/net/LargeFileLoader.as)

先决条件 - URLStream 是一个很棒的类，但它有一个小故障，导致内存泄漏/堆积，以防止大文件正确加载。我在这里分享的课程已经过测试，能够毫无问题地将一系列 1.5GB 文件下载到 iPad Air 2 (64GB) 中。我认为更大的文件也可以，因为它实际上克服了 RAM 存储限制（在故障修复之前它在 200MB 左右崩溃）。

故障 - 您复制加载的字节的原始数据字节数组永远不会被 GC 处理（如此处所述：http: [//blogs.splunk.com/2007/11/16/flashas3-urlstream-memory-leak/](http://blogs.splunk.com/2007/11/16/flashas3-urlstream-memory-leak/)）因此，解决方法是实现一个使用 Josh 技术的类，并确保在写入后释放字节​​。

...这是代码（注意：这仍然是预生产）：

```
package us.flashmx.net 
{
    import flash.events.ErrorEvent;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.HTTPStatusEvent;
    import flash.events.IEventDispatcher;
    import flash.events.IOErrorEvent;
    import flash.events.ProgressEvent;
    import flash.events.SecurityErrorEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.net.URLRequest;
    import flash.net.URLStream;
    import flash.system.System;
    import flash.utils.ByteArray;

    /**
     * ...
     * @author  Nick Shishenkov <n@vc.am>
     */
    public class LargeFileLoader extends EventDispatcher 
    {
        private var _url:String             = "";
        private var _filePath:String        = "";
        private var _fileStream:FileStream  = new FileStream;
        private var _urlStream:URLStream    = new URLStream;
        private var _localFile:File;
        private var _bytesLoaded:Number;

        public function LargeFileLoader() 
        {
            super(null);

            //
            _urlStream.addEventListener(Event.OPEN, _onOpen, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(ProgressEvent.PROGRESS, _onProgress, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(Event.COMPLETE, _onComplete, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(IOErrorEvent.IO_ERROR, _onError, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(SecurityErrorEvent.SECURITY_ERROR, _onSecurityError, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(HTTPStatusEvent.HTTP_RESPONSE_STATUS, _onHTTPStatus, false, int.MIN_VALUE, true);
            _urlStream.addEventListener(HTTPStatusEvent.HTTP_STATUS, _onHTTPStatus, false, int.MIN_VALUE, true);
        }

        private function _onHTTPStatus(e:HTTPStatusEvent):void 
        {
            dispatchEvent(e.clone());
        }

        public function load(remoteURL:String, localPath:String, overwrite:Boolean = true):void
        {
            _url        = remoteURL;
            _filePath   = localPath;
            //
            _localFile      = new File(_filePath);
            _bytesLoaded    = 0;

            //
            if (overwrite && _localFile.exists)
            {
                _localFile.deleteFile();
            }
            //
            _urlStream.load(new URLRequest(url));
            _fileStream.open(_localFile, FileMode.APPEND);
        }

        private function _onOpen(e:Event):void 
        {
            dispatchEvent(e.clone());
        }

        private function _onSecurityError(e:SecurityErrorEvent):void 
        {
            dispatchEvent(e.clone());
        }

        private function _onError(e:IOErrorEvent):void 
        {
            dispatchEvent(new ErrorEvent(ErrorEvent.ERROR, false, false, e.text));
        }

        private function _onProgress(e:ProgressEvent):void 
        {
            //
            trace(" -> _onProgress: " + _urlStream.length + " | " + e.bytesLoaded + " / " + e.bytesTotal);
            //
            _writeStreamBytes();
            //
            dispatchEvent(new ProgressEvent(ProgressEvent.PROGRESS, false, false, e.bytesLoaded, e.bytesTotal));
        }

        private function _onComplete(e:Event):void 
        {
            _writeStreamBytes();
            //
            dispatchEvent(new Event(Event.COMPLETE));
        }

        private function _writeStreamBytes():void
        {
            var bytes:ByteArray = new ByteArray();
            _urlStream.readBytes( bytes );
            _fileStream.writeBytes( bytes );

            //
            _bytesLoaded    += bytes.length;

            //clear buffer (if the array stays non-null it will lead to a memmory leak
            bytes   = null;

        }

        public function get url():String 
        {
            return _url;
        }

        public function get filePath():String 
        {
            return _filePath;
        }

        public function get bytesLoaded():Number 
        {
            //_localFile.size;
            return _bytesLoaded;
        }

        public function dispose():void
        {
            try{ _fileStream.close(); }catch (err:Error){};

            //
            try{ _urlStream.close(); }catch (err:Error){};

            //
            _urlStream.removeEventListener(Event.OPEN, _onOpen);
            _urlStream.removeEventListener(ProgressEvent.PROGRESS, _onProgress);
            _urlStream.removeEventListener(Event.COMPLETE, _onComplete);
            _urlStream.removeEventListener(IOErrorEvent.IO_ERROR, _onError);
            _urlStream.removeEventListener(SecurityErrorEvent.SECURITY_ERROR, _onSecurityError);
            _urlStream.removeEventListener(HTTPStatusEvent.HTTP_RESPONSE_STATUS, _onHTTPStatus);
            _urlStream.removeEventListener(HTTPStatusEvent.HTTP_STATUS, _onHTTPStatus);

            //
            _urlStream  = null;
            _fileStream = null;

            //
            System.gc();
        }
    }

} 
```

我用 Scout CC 进行了几次设备测试，内存一直保持下降（没有任何堆积）。我将在本周晚些时候测试一些较旧的 iOS 设备。备案：我使用的是 Adob​​e AIR 24.0.0.180

这是一个示例使用：

```
package us.flashmx.net 
{
    import flash.display.DisplayObject;
    import flash.events.Event;
    import flash.events.ProgressEvent;

    /**
     * ...
     * @author ...
     */
    public class LargeFileLoader_DEMO extends DisplayObject 
    {
        private var _largeFilesLoader:LargeFileLoader;

        public function LargeFileLoader_DEMO() 
        {
            super();
            //
            init_largeFilesLoader("http://A.Large.File.URL/", "/The/Absolute/Local/Path");
        }

        public function dispose_largeFilesLoader():void
        {
            //
            if (_largeFilesLoader != null)
            {
                //clear listeners
                _largeFilesLoader.removeEventListener(ProgressEvent.PROGRESS, _onFileLoaderProgress);
                _largeFilesLoader.removeEventListener(Event.COMPLETE, _onFileLoaderComplete);
                //dispose
                _largeFilesLoader.dispose();
                //free mem
                _largeFilesLoader   = null;
            }           
        }

        private function init_largeFilesLoader(fURL:String, fPath:String):void
        {
            //
            _largeFilesLoader   = new LargeFileLoader;

            //
            _largeFilesLoader.addEventListener(ProgressEvent.PROGRESS, _onFileLoaderProgress, false, int.MIN_VALUE, true);
            _largeFilesLoader.addEventListener(Event.COMPLETE, _onFileLoaderComplete, false, int.MIN_VALUE, true);

            //
            _largeFilesLoader.load(fURL, fPath);
        }

        private function _onFileLoaderComplete(e:Event):void 
        {
            trace("All done!");
            dispose_largeFilesLoader();
        }

        private function _onFileLoaderProgress(e:ProgressEvent):void 
        {
            _largeFilesLoader.bytesLoaded;
        }
    }

} 
```

...我希望这会有所帮助！

干杯-尼克

# angularjs - 如何从angularjs中的ngform获取数据？

> ID：14583252
> 
> 赞同：2
> 
> 时间：2013-01-29T12:45:48.197
> 
> 标签：angularjs

HTML：

```
<div ng-controller="TestController" >
    <form name="test_form" ng-submit="submit()">
        <input type="text" name="some_name" ng-model="form_data.some_name" required>

        <ng-form ng-repeat="key in keys" name="keyForm">
            <input type="text" name="data_input" ng-model="form_data.data_input" required>
        </ng-form>  

        <a ng-click="addKey()">NEW KEY</a>
    </form>
</div> 
```

JS：

```
app.controller('TestController', function TestController($scope){

    $scope.keys = [];

    $scope.addKey = function() {
        $scope.keys.push({});
    }

    $scope.submit = function() {
        console.log($scope);
    }

}); 
```

在提交函数中，我可以获得“some_name”输入的值：

```
$scope.submit = function() {
    console.log($scope.form_data.some_name);
} 
```

但我无法获得“data_input”输入的值（它们在 ngform 标签内）。怎么做？（ngform 标签用于分别验证每个新添加的输入）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:54:45.530

ng-repeat 中的每个输入都需要自己独特的 ng-model 属性——它们都不能使用`form_data.data_input`. 这是解决您的问题的一种方法：

```
<ng-form ng-repeat="key in keys" name="keyForm">
    <input type="text" name="data_input" ng-model="key.data" required>
</ng-form> 

$scope.addKey = function () {
    $scope.keys.push({ data: ''});
} 
```

[小提琴](http://jsfiddle.net/mrajcok/cFSJ3/)。

另请参阅[https://stackoverflow.com/a/14379763/215945](https://stackoverflow.com/a/14379763/215945)

# linq - LINQ to Entities 无法识别方法 'System.DateTime AddSeconds(Double)' 方法，并且该方法无法翻译成

> ID：14583254
> 
> 赞同：25
> 
> 时间：2013-01-29T12:45:53.440
> 
> 标签：linq, entity-framework, entity-framework-4, linq-to-entities

我收到此错误

```
base {System.SystemException} = {"LINQ to Entities does not recognize the method 'System.DateTime AddSeconds(Double)' method, and this method cannot be translated into a store expression."} 
```

在这段代码上

```
 var eventToPushCustom = eventCustomRepository.FindAllEventsCustomByUniqueStudentReference(userDevice.UniqueStudentReference)
                                    .Where(x => x.DateTimeStart > currentDateTime && currentDateTime >= x.DateTimeStart.AddSeconds(x.ReminderTime))
                                    .Select(y => new EventPushNotification
                                    {
                                        Id = y.EventId,
                                        EventTitle = y.EventTitle,
                                        DateTimeStart = y.DateTimeStart,
                                        DateTimeEnd = y.DateTimeEnd,
                                        Location = y.Location,
                                        Description = y.Description,
                                        DeviceToken = y.UsersDevice.DeviceTokenNotification
                                    }); 
```

我相信问题出在 `x.DateTimeStart.AddSeconds(x.ReminderTime)`

.AddSeconds 在我的情况下的论点必须是“动态的”......知道如何解决它吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-29T12:49:17.973

使用[EntityFunctions.AddSeconds](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.addseconds.aspx)方法在服务器端创建日期时间。

```
 .Where(x => x.DateTimeStart > currentDateTime && 
             currentDateTime >= EntityFunctions.AddSeconds(x.DateTimeStart, x.ReminderTime)) 
```

# javascript - d3表什么时候不选择

> ID：14583256
> 
> 赞同：1
> 
> 时间：2013-01-29T12:46:02.887
> 
> 标签：javascript, d3.js, html-table

我在 D3 中学习表，我的问题是何时使用“.select()”：

例如，在建立圆圈时：

```
var circles = svg.selectAll("circle")
    .data(dataSet)
    .enter()
    .append("circle")
    .attr("r", 2.5)
    .attr("cx", function(d){ return d.x})
    .attr("cy", function(d){ return d.y}); 
```

选择圆圈（空）-> 附加圆圈

但是当我在建一张桌子时，

下面的代码直接追加表格，没有先select("table")。与“tr”相同。

```
function tabulate(data, columns) {
    var table = d3.select("#container").append("table"),
        thead = table.append("thead"),
        tbody = table.append("tbody");

    // append the header row
    thead.append("tr")
        .selectAll("th")
        .data(columns)
        .enter()
        .append("th")
            .text(function(column) { return column; }); 
```

（来自[“从 csv 创建表”的](https://stackoverflow.com/questions/9268645/d3-creating-a-table-linked-to-a-csv-file/9507713#9507713)代码）

为什么以下代码不起作用？

```
function tabulate(data, columns) {
    var table = d3.select("#container")
        .select("table")
        .append("table"),
        thead = table.append("thead"),
        tbody = table.append("tbody"); 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:36:01.073

当您已经知道存在特定元素并且想要获取对它的引用并对它进行更改（或附加子元素）时，通常使用 Select。由于您知道 div 中没有 table 标签，因此选择它没有意义。

如果您**不确定**table 标签是否存在并且您想根据其他一些数据创建它，您可以修改您的代码看起来像这样：

```
var table = d3.select("#container")
    .select("table")
    .data(['hi'])
    .enter()
    .append("table"),
    thead = table.append("thead"),
    tbody = table.append("tbody"); 
```

[但是，正如作者在此答案](https://stackoverflow.com/questions/13027017/please-help-me-understand-the-difference-between-the-select-and-selectall?rq=1)中所解释的那样， select 和 selectAll 的工作方式存在细微差别。我的示例代码直接在正文内而不是在 div 内创建表标记。因此，除非您确实将元素绑定到数据，否则最好直接附加。

# objective-c - 重新定位 UITableViewCellEditControl 后，我无法检测到它的点击

> ID：14583257
> 
> 赞同：0
> 
> 时间：2013-01-29T12:46:12.443
> 
> 标签：objective-c, uitableview

我正在尝试获取一个 tableView 来显示一些电话号码，例如在联系人应用程序中。问题是，在我将其移出单元格后，触发删除控件的表格视图（UITableViewCellEditControl）右侧的那个小红色减号不会响应点击。（我是通过使用 willTrasisionToState 和 didTRansitionToState 来实现的） 简而言之：我可以将 CellEditControl 放在我的 tableViewCells 中。它看起来像废话，但它确实有效。我也可以把控制拉到左边，在牢房外面。这样看起来很棒，但是控件完全没用。

我想吃我的蛋糕，也想吃！IE 我希望控件显示在单元格之外，但功能齐全。关于如何做到这一点的任何想法？

我一直在重载 `-hitTest: withEvent:`and`-pointInside: withEvent:`方法，但我无法让它工作。

这是我最成功的尝试的来源，这根本不是很成功。

我在专门为此目的创建的 UITableView-Subclass 中执行此操作。

```
-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event{
    NSLog(@"%s", __FUNCTION__);
    for (UIView *subView in self.subviews){
        NSLog(@"testing subview: %@", NSStringFromClass(subView.class));
        for (UIView *subsubView in subView.subviews) {
            NSLog(@"testing subsubView: %@", NSStringFromClass(subsubView.class));
            if ([NSStringFromClass(subsubView.class)isEqualToString:@"UITableViewCellEditControl"]) {
                CGPoint subsubViewPoint = [subView convertPoint:point fromView:self];
                if ([subsubView hitTest:subsubViewPoint withEvent:event]) {
                    NSLog(@"found it: %@", NSStringFromClass(subsubView.class));
                    return subsubView;
                }
            }
        }
    }
    UIView *returnView = [super hitTest:point withEvent:event];
    NSLog(@"returnView: %@", NSStringFromClass(returnView.class));
    return returnView;
} 
```

但至少它会找到该死的观点。

编辑：这是上述方法创建的日志输出。我知道它有很多文字，但它重复得很快。

```
2013-01-29 13:03:21.285 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:21.287 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.287 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.288 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.289 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.290 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.291 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.291 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.292 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.293 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.294 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.294 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.295 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.296 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.296 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.297 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.297 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.298 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.299 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.299 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.300 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.300 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.301 MaklerKid[2559:fb03] found it: UITableViewCellEditControl
2013-01-29 13:03:21.302 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:21.302 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.303 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.303 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.304 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.304 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.305 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.306 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.306 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.307 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.321 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.323 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.324 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.325 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.325 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.326 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.326 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.327 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.327 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.328 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.328 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.329 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.329 MaklerKid[2559:fb03] found it: UITableViewCellEditControl
2013-01-29 13:03:21.330 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:21.341 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.342 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.343 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.343 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.344 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.344 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.345 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.345 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.346 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.346 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.347 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.347 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.348 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.362 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.363 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:21.363 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:21.364 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.365 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:21.365 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.366 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:21.366 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:21.367 MaklerKid[2559:fb03] found it: UITableViewCellEditControl
2013-01-29 13:03:22.061 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:22.062 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.063 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.064 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.065 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.066 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.066 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.067 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.068 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.069 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.069 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.070 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.070 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.071 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.072 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.072 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.073 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.074 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.074 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.075 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.076 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.076 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.077 MaklerKid[2559:fb03] found it: UITableViewCellEditControl
2013-01-29 13:03:22.077 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:22.078 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.079 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.079 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.080 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.080 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.081 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.081 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.082 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.083 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.083 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.084 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.084 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.085 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.085 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.086 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.087 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.087 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.088 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.088 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.089 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.089 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.090 MaklerKid[2559:fb03] found it: UITableViewCellEditControl
2013-01-29 13:03:22.091 MaklerKid[2559:fb03] -[MKEditableTableView hitTest:withEvent:]
2013-01-29 13:03:22.091 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.092 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.093 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.107 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.109 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.110 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.111 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.111 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.112 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.112 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.113 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.113 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.114 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.114 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.115 MaklerKid[2559:fb03] testing subview: MKEditableTableViewCell
2013-01-29 13:03:22.115 MaklerKid[2559:fb03] testing subsubView: UITableViewCellContentView
2013-01-29 13:03:22.128 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.129 MaklerKid[2559:fb03] testing subsubView: UITextField
2013-01-29 13:03:22.129 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.130 MaklerKid[2559:fb03] testing subsubView: UIView
2013-01-29 13:03:22.131 MaklerKid[2559:fb03] testing subsubView: UITableViewCellEditControl
2013-01-29 13:03:22.131 MaklerKid[2559:fb03] found it: UITableViewCellEditControl 
```

下一个编辑：由于我试图做什么似乎有些混乱（现在不介意“为什么”）这里有一些图片需要澄清：

图一：这行得通，但看起来很糟糕：

![这不是我想要的！](../Images/dba03ee76816746e594ae27ed08d16dd.png)

图二：这看起来不错，但不起作用：

![我要这个！](../Images/882f3e606e899aaae57856296df9b1bb.png)

我还发现，如果我点击它曾经所在的位置，控件仍然会收到触摸。即：如果在场景 2 中，我点击场景 1 中控件所在的位置（即在单元格内），则将执行代码并出现 DeleteControl。这对任何人都有意义吗？不是我，那是肯定的。

另一个编辑：

有些人提出了诸如“重建单元格，因此其中有足够的空间用于控件”之类的建议，但我不能这样做。时期。此外，有人建议我不应该“打破苹果设计模式”。我在编辑模式下附加了我的联系人应用程序的快照。请注意，EditingControl 位于单元格之外，就像这张图片中一样（出于隐私考虑，我删除了名称和数字）：

图三：

![在此处输入图像描述](../Images/807996286364109af0f2b21c2a1a0e75.png)

请帮助我，我完全迷失了这一点。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:26:54.780

你试过把它关掉再打开吗？

但实际上，我认为您正在这里寻找“AddressBook.framework”（地址簿 UI 框架）。

[链接](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/UI_Controllers.html#//apple_ref/doc/uid/TP40007744-CH5-SW1 "关联")到指南，希望你能找到你想要的！

# mysql - 如何为不同类型的列编写单个查询

> ID：14583263
> 
> 赞同：1
> 
> 时间：2013-01-29T12:46:23.090
> 
> 标签：mysql, sql

我有状态数据库，其中有残障人士的数据？州又拥有许多城市

有腿问题，手问题，盲人等类型的人。

我只有一种状态

> people_info（城市名称，类型）

我需要将状态数据显示为

> 州名 |总人数 | 腿部问题计数| 手题数|盲数

同样的方法

> 城市A |总人数| 腿部问题计数| 手题数|盲数
> 
> B市|总人数| 腿部问题计数| 手题数|盲数

如何为州和城市编写单个查询以打印数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:50:27.920

由于您没有提到您正在使用的 RDBMS，这将在许多（*但不是全部*）数据库服务器上工作。

```
SELECT  cityName,
        COUNT(*) totalPeople,
        SUM(CASE WHEN type = 'legProb' THEN 1 ELSE 0 END) AS LegProbCount,
        SUM(CASE WHEN type = 'handProb' THEN 1 ELSE 0 END) AS HandProbCount,
        SUM(CASE WHEN type = 'blindProb' THEN 1 ELSE 0 END) AS blindCount
FROM    people_info
GROUP   BY cityName 
```

中`MySQL`，可以直接使用这个，

```
SELECT  cityName,
        COUNT(*) totalPeople,
        SUM(type = 'legProb') AS LegProbCount,
        SUM(type = 'handProb') AS HandProbCount,
        SUM(type = 'blindProb') AS blindCount
FROM    people_info
GROUP   BY cityName 
```

# java - 替换扫描字符串中的特定单词并在 Java 中使用 substring() 进行连接

> ID：14583267
> 
> 赞同：0
> 
> 时间：2013-01-29T12:46:31.187
> 
> 标签：java, substring, java.util.scanner, string-concatenation

我对这一切都是全新的，所以我正在尝试编写一段简单的代码，允许用户输入文本（保存为字符串），然后让代码搜索单词的位置，替换它并将字符串重新连接在一起。IE：

“我喜欢吃午饭”

foo 位于位置 7

新的输入是：我喜欢 Foo 吃午饭

到目前为止，这是我所拥有的：

```
import java.util.Scanner;

public class FooExample
{

public static void main(String[] args) 
    {

    /** Create a scanner to read the input from the keyboard */

    Scanner sc = new Scanner (System.in);

    System.out.println("Enter a line of text with foo: ");
    String input = sc.nextLine();
    System.out.println();
    System.out.println("The string read is: " + input);

    /** Use indexOf() to position of 'foo' */

    int position = input.indexOf("foo");
    System.out.println("Found \'foo\' at pos: " + position);

            /** Replace 'foo' with 'Foo' and print the string */

    input = input.substring(0, position) + "Foo";
    System.out.println("The new sentence is: " + input); 
```

问题出现在最后——我不知道如何将句子的其余部分附加到连接上：

```
input = input.substring(0, position) + "Foo"; 
```

我可以得到要替换的单词，但我正在为如何将其余的字符串附加上而摸不着头脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:50:15.270

```
input = input.substring(0,position) + "Foo" + input.substring(position+3 , input.length()); 
```

或者干脆你可以使用替换方法。

```
input = input.replace("foo", "Foo"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:52:52.493

稍微更新 Achintya 发布的内容，以考虑到您不想再次包含“foo”：

```
input = input.substring(0, position) + "Foo" + input.substring(position + 3 , input.length()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:55:20.470

这可能有点矫枉过正，但如果您正在寻找句子中的单词，您可以轻松使用 StringTokenizer

```
 StringTokenizer st = new StringTokenizer(input);
            String output="";
            String temp = "";
            while (st.hasMoreElements()) {
               temp = st.nextElement();
        if(temp.equals("foo"))
                       output+=" "+"Foo";
                    else
                       output +=" "+temp;
    } 
```

# routes - 来自 index.js 文件的 Express.js 基本路由

> ID：14583268
> 
> 赞同：0
> 
> 时间：2013-01-29T12:46:42.670
> 
> 标签：routes, express

我想创建 2 个页面，使用 2 个玉文件。以下方式有什么问题：

```
exports.index = function(req, res){
    res.render('index', { title: 'Welcome' });
};

exports.room = function(req, res){
    res.render('room', { title: 'Game' });
}; 
```

该指数`localhost:3000`有效。但`localhost:3000/room`给了我

```
Cannot GET /room 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:08:40.983

您必须将路线添加到主`app.js`文件

```
app.get('/room', routes.room); 
```

对于很多页面，您可以执行类似的操作

```
var routes = ['blog', 'about', 'home', 'team', 'room', ...];

routes.forEach(function(item) {
  exports[item] = function(req, res) {
    res.render(item);
  }
}); 
```

但是，如果您有很多单独的局部变量，这也可能会变得混乱（您可以在数组中使用对象而不是字符串）。

所以最好的办法是将你的`POST`和`GET`请求`/room`放在 a 中`room.js`，并在你的 main 中要求它`app.js`。然后你可以像这样使用它

```
var room = require('./routes/room');

app.get('/room', room.read);
app.post('/room', room.create);
app.get('/room/:id', room.getID);
app.get('/room/anything', room.anything);

// then continue with app.get('/team') for example 
```

还可以查看 express github repo 中的[route-separation](https://github.com/visionmedia/express/blob/master/examples/route-separation/user.js)示例。

# animation - 如何在 Unity3d 中最好地为 2D 精灵设置动画？

> ID：14583269
> 
> 赞同：4
> 
> 时间：2013-01-29T12:46:44.463
> 
> 标签：animation, unity3d, sprite

我想在 Unity3D 中为 2D 精灵制作动画。这样做的最佳（最简单）方法是什么？

我有几张图像要循环播放以创建动画。最简单的代码和设置是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:10:55.683

Unify Community wiki 中有一些脚本在javascript 和 C# 中[动画平铺纹理。](http://wiki.unity3d.com/index.php?title=Animating_Tiled_texture)它们是一个很好的起点。否则你可以使用增强的解决方案[SpriteManager](http://wiki.unity3d.com/index.php?title=SpriteManager)

# asp.net - 使用 JSON 时找不到动态创建的控件

> ID：14583271
> 
> 赞同：0
> 
> 时间：2013-01-29T12:46:54.140
> 
> 标签：asp.net, ajax, json, asynchronous

我在下拉列表的选定索引上调用 JSON 方法更改如下

```
function StepImplementationScript(SelectedValue,UniqueField) {
     debugger;
         $.ajax({
         type: "POST",
         url: "DynamicForm.aspx/StepImplementationScript",
         data: "{strSelectedValue: " + SelectedValue + ", strUniqueField: '" + UniqueField + "' }",
         contentType: "application/json; charset=utf-8",
         dataType: "json",
         async: true,
         cache: false,
         success: function(response) {
             alert("OnSuccess" + response.d);
             if (msg) {
                 msg.close();
             }
         },
         error: function(jqXHR, exception) {
             alert(jqXHR.responseText);
         },

         failure: function(response) {
             //alert("Onfailure" + response.d);          
         }
     });
    } 
```

在服务器端的这个“StepImplementationScript”方法中，当我尝试查找动态创建的控件时，控件没有找到并显示为空。

我在 Jquery 中编写的选定更改事件，我通过它调用了 JSON 方法。

这是动态创建控件的同一页面 (DynamicForm.aspx)。

为什么会这样？我应该如何解决这个问题？？？

# java - Tomcat：Servlet sendRedirect to JSP 说：“HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET”

> ID：14583272
> 
> 赞同：0
> 
> 时间：2013-01-29T12:47:03.317
> 
> 标签：java, jsp, servlets

下面是一个简单的 Servlet(Process.java)、JSP 页面(index.jsp) 和 Model(Model.java) 的代码。

**索引.jsp**：

```
<%@ page import="com.example.*" %>

<html>
<head>
<title> Myapp </title>
</head>

<body>
<form action="process.do" method="POST">
UserName: <input type="text" name="username">
<br>
UserID: <input type="text" name="userid">
<br>
<input type="submit">
<br>

<%
Model m = (Model) request.getAttribute("model");

if( m != null) {
out.println("Username: " + m.getUserName() );
out.println("UserID: " + m.getUserID() );
}
%>

</form>
</body>
</html> 
```

**进程.java**：

```
package com.example;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Process extends HttpServlet {

    public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {
        Model m = new Model();
        m.setUserName( request.getParameter("username") );
        m.setUserID( Integer.parseInt( request.getParameter("userid") ) );

        request.setAttribute("model", m);
        response.sendRedirect( request.getRequestURI() );
    }
} 
```

**模型.java**：

```
package com.example;

public class Model {

    private String userName = "";
    private int userID = -1;

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public void setUserID(int userID) {
        this.userID = userID;
    }

    public String getUserName() {
        return userName;
    }

    public int getUserID() {
        return userID;
    }
} 
```

**网页.xml**：

```
<servlet>
    <servlet-name>Process</servlet-name>
    <servlet-class>com.example.Process</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>Process</servlet-name>
    <url-pattern>/process.do</url-pattern>
</servlet-mapping> 
```

我正在使用 Tomcat7，并且我已经在上下文 /myapp 中部署了这个应用程序。我能够正确查看 index.jsp 页面，但是当我提交表单时，出现以下错误：

```
HTTP Status 405 - HTTP method GET is not supported by this URL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:52:26.250

你想用什么来完成`response.sendRedirect( request.getRequestURI() );`？

这将指示浏览器发送`/process.do`未在 servlet 中处理的 GET 请求（您仅扩展 doPost）。如果您想返回 index.jsp，只需`response.sendRedirect( "index.jsp");`

编辑：

因为您希望在 index.jsp 中访问模型属性，所以我们实际上不能进行浏览器重定向。相反，需要服务器重定向。

`request.getRequestDispatcher("index.jsp").include(request, response)`而不是`response.sendRedirect()`应该为你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:54:06.283

您没有重定向到`JSP`. 让我解释一下，当您`post`将表单 url 更改为`http://domain.com/../process.do`以及使用`request.getRequestedUri()`它时会发生什么，它会提供给 servlet 的 url，并且它没有`doGet()`方法，因此您会收到该错误。您应该使用`response.sendRedirect("index.jsp")`重定向到您的`index.jsp`文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T05:45:58.927

当你使用“response.sendRedirect()”方法时，它会将请求对象移交给浏览器。所以，你不能再处理请求对象了。使用“RequestDispacther”而不是“sendRedirect”。我希望，这个可能会给你一个清晰的信息。不要介意，如果我没有联系到你。

# ios - 非类型模板参数的计算结果为 -1，不能缩小为类型 'unsigned long long' xcode 4.6

> ID：14583274
> 
> 赞同：5
> 
> 时间：2013-01-29T12:47:08.837
> 
> 标签：ios, opencv, zxing, xcode4.6

我在我的项目中使用 zxing 和 OpenCV 库。我今天将我的 XCode 从 4.5 更新到 4.6，我收到了这个错误。

> externalLibs/boost/include/boost/gil/channel_algorithm.hpp:54:85：非类型模板参数计算为-1，不能缩小为“unsigned long long”类型

这个错误出现在 OpenCV 库类之一中的这一行代码上：-

```
struct unsigned_integral_max_value : public mpl::
integral_c< UnsignedIntegralChannel,-1> {}; 
```

在早期版本的 Xcode 上，它工作正常。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:06:56.797

似乎 boost 不喜欢新的 clang 编译器添加的 c++ 11 支持

所以..它说在构建设置中禁用c ++ 11支持 ![在此处输入图像描述](../Images/ebca687a8c8cf592e77bd3ac2a95351a.png)

= src：见[https://svn.boost.org/trac/boost/ticket/7270](https://svn.boost.org/trac/boost/ticket/7270)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:16:50.393

unsigned long long 变量的最大值为十六进制0xFFFFFFFF FFFFFFFF，即所有位均为1。如果解释为有符号数，则对应于 -1。所以程序员经常使用 -1 来代替，希望编译器不会抱怨。显然，这在 XCode 4.5 中没有发生，但 4.6 做了更严格的检查......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T22:10:05.173

在 macOS Sierra 上使用`Apple LLVM version 8.1.0 (clang-802.0.42)`和编译时遇到了同样的错误`-std=c++11`。为了解决这个问题，我包含了以下编译器标志：`-Wno-error=c++11-narrowing`

# javascript - 下拉菜单到单选按钮？

> ID：14583275
> 
> 赞同：0
> 
> 时间：2013-01-29T12:47:22.783
> 
> 标签：javascript, html, button, drop-down-menu, smarty

我在搜索部分有一个下拉菜单。当我从下拉菜单中选择某些内容时，搜索字段正在发生变化。我想将下拉菜单转换为单选按钮。这是下拉菜单的代码：

```
 <select id="qs_category" name="qs_category" onchange="onQuickSearch(this.form, '{$live_site}'); {if $multi_depending}reloadDep('{$multi_depending}', '{$live_site}');{/if}">
            <option value="">{$lng.search.all_categories}</option>
            {foreach from=$categories item=v name=cat}
            <option value="{$v.id}"{if $v.parent} class="opt_parent"{/if}{* {if $cat==$v.id && $self_noext=="listings"}selected="selected"{/if}*}>{$v.str}{$v.name|escape:"html"}</option>
            {/foreach}
    </select> 
```

有人可以帮我把它变成单选按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:00:53.347

要将其转换为单选按钮，您可以使用`<input type="radio"...`

```
<label>
    <input name="qs_category" type="radio" value=""
           onclick="onQuickSearch(this.form, '{$live_site}'); {if $multi_depending}reloadDep('{$multi_depending}', '{$live_site}');{/if}">{$lng.search.all_categories}
</label><br>
{foreach from=$categories item=v name=cat}
<label>
    <input name="qs_category" type="radio" value="{$v.id}"{if $v.parent} class="opt_parent"{/if}{* {if $cat==$v.id && $self_noext=="listings"}checked="checked"{/if}*}
           onclick="onQuickSearch(this.form, '{$live_site}'); {if $multi_depending}reloadDep('{$multi_depending}', '{$live_site}');{/if}">{$v.str}{$v.name|escape:"html"}
</label><br>
{/foreach} 
```

复制`onclick`的不是很优雅，但这是您理解的最直接的方式。

为了使代码看起来更好，您可以`onclick`使用 Javascript 绑定事件。如果您使用的是 jQuery，它将是

```
$('input[name=qs_category]').click(function() {
    onQuickSearch($(this).parent(), '{$live_site}');
    {if $multi_depending}
        reloadDep('{$multi_depending}', '{$live_site}');
    {/if}
}); 
```

# php - 允许在 url 中使用特殊字符

> ID：14583277
> 
> 赞同：0
> 
> 时间：2013-01-29T12:47:38.927
> 
> 标签：php

我创建了一个 CMS，它根据客户提供的页面标题创建一个页面。

例如，“关于我们”被创建为“about-us.php”

它目前使用以下内容来删除所有不允许的字符，我在代码中添加了当您去编辑页面并将其命名为其他名称以便重命名文件时。

```
 function toAscii($str) {        
        $clean = preg_replace("/[^a-zA-Z0-9\/_|+ -]/", '', $str);
        $clean = strtolower(trim($clean, '-'));
        $clean = preg_replace("/[\/_|+ -]+/", '-', $clean);
        return $clean;
    }
// Renames the file
    rename(toAscii($row_Recordset1['content_title']).".php", toAscii($_POST['content_title']).".php"); 
```

但我真的想允许这些特殊字符，所以我修改了上面的函数来执行以下操作：

```
 function toAscii($str) {
        $clean = strtolower($str);
        $clean = str_replace(";", "%3B", $clean);
        $clean = str_replace("/;", "%2F", $clean);
        $clean = str_replace("?", "%3F", $clean);
        $clean = str_replace(":", "%3A", $clean);
        $clean = str_replace("&", "%26", $clean);
        $clean = str_replace("@", "%40", $clean);
        $clean = str_replace("=", "%3D", $clean);   
        $clean = str_replace(" ", "-", $clean);
        return $clean;
    }
// Renames the file
rename(toAscii($row_Recordset1['content_title']).".php", toAscii($_POST['content_title']).".php"); 
```

我知道它并不优雅，但它应该在理论上起作用。

它没有。

因此，当文件名应该是“shows-%2F-exhibitions.php”时，它实际上会显示为“shows-/-exhibitions.php”，这显然是不允许的。

如何强制它保留文件名中的十六进制代码，而不是应用十六进制代码并再次以正斜杠结束？

还是您只是不允许在 URL 中使用任何形状或形式的正斜杠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:50:44.687

看看 urlencode 函数（和相应的 urldecode）

顺便说一句，您有一个错字`str_replace('/;' ...`（正斜杠后有多余的分号）

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

[http://php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:56:56.807

您的 toAscii 函数的通用版本：

```
function toAscii($str) {
    return iconv('UTF-8', 'ASCII//TRANSLIT', $src);
} 
```

从 URL 中去除非 ascii 字符是很常见的，因此读取和写入这些 URL 会容易得多。您还可以在 URL 中包含一些唯一 ID，以确保它是唯一的，并保留附加文本以提高链接的可读性。示例：[http](http://example.com/123-some-article) ://example.com/123-some-article 。要处理这个 url，只需删除数字并搜索它的数据库，然后比较其余的文本以防止创建谷歌炸弹。

如果您确实需要 URL 中的特殊字符，则需要对它们进行不同于 url_encode 的编码，因为 % 编码在您的 PHP 脚本获取之前由服务器解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:58:13.930

我建议完全禁止`a-zA-Z0-9_`文件名以外的任何字符。使用数据库表将漂亮的人类可读名称映射到文件名。确保您也处理“相同”的名称，例如：

```
Shows/Events --> showsevents.php
Shows-Events --> showsevents1.php 
```

# .net - 用于异步流水线化 4 个块的 TPL 数据流设计

> ID：14583278
> 
> 赞同：2
> 
> 时间：2013-01-29T12:47:39.863
> 
> 标签：.net, task-parallel-library, tpl-dataflow

[这是一个关于TPL Dataflow ProducerConsumer Pattern](https://stackoverflow.com/questions/14255655/tpl-dataflow-producerconsumer-pattern?rq=1)的新问题，Svick 已经回答了这个问题。

1.  我需要并行处理4个2gb的文件，需要逐个缓冲区读取文件内容缓冲区。（这里使用生产者模式。Maxdegreeofparallelism = 4，我可以一次发布 4 个缓冲区）
2.  需要处理缓冲区并写入中间表。（这里使用消费者模式。）
3.  内存中的数据表将根据业务规则进行转换并写入规范化表。
4.  内存中的数据再次被重新用于对最终版本的数据进行更多验证。

目前，第 3 步和第 4 步未使用任何块。它通过来自消费者的顺序函数调用。

1.  这个设计正确吗？
2.  除了使用生产者消费者方法之外，有没有办法将 4 个块逐个流水线并并行处理所有这些块？你能帮我一个小示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:44:45.827

你的设计似乎是正确的，但很难从像这样的简短描述中说出来。

如果你想在 TDF 中创建管道，通常的方法是使用一些[`IPropagatorBlock`](http://msdn.microsoft.com/en-us/library/hh194827.aspx)，最有可能[`TransformBlock`](http://msdn.microsoft.com/en-us/library/hh194782.aspx)的 .

`TransformBlock`如果您为块的每个输入生成单个输出，则可以工作。但在您的情况下似乎并非如此，因此您可能想要使用[`TransformManyBlock`](http://msdn.microsoft.com/en-us/library/hh194784.aspx)，它可以为每个输入（包括 0 或 1）产生任意数量的输出。

另一种选择是在创建输出时直接`Post()`（或）到以下块。`await SendAsync()`

# c# - 如何链接和应用外部css文件

> ID：14583280
> 
> 赞同：0
> 
> 时间：2013-01-29T12:47:45.130
> 
> 标签：c#, css

我有一个名为 tablecellmembers.css 的 css 文件（并且尚未在 .aspx 文件中链接？），其中包含：

```
td {
    border-collapse: collapse;
    border-top: thick;
    border-top-width: 5px;
    border-top-color: blue;
} 
```

然后我在 .cs 文件中动态创建了一个表格、表格行和表格单元格。

```
TableCell tc = new TableCell(); 
```

如何将该 css 文件应用于我的表格单元格？

我努力了：

```
tc.CssClass = "td";
tc.Attributes.Add("tablecellmembers", "td"); 
```

但是css没有应用于单元格..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:49:43.093

在`head`您的*aspx*或*母*版页部分中，添加

```
<link rel="stylesheet" type="text/css" href="tablecellmembers.css"> 
```

您无需`td`在后面的代码中使用您的样式，因为此样式将应用于所有表格单元格（HTML`td`元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:55:12.780

将`link`标签添加到`<head>`ASPX 页面（或母版页，如果您正在使用），如下所示：

```
<link rel="stylesheet" type="text/css" href="tablecellmembers.css"> 
```

您不需要使用 CssClass 或添加任何属性作为`td`元素而不是类。我建议您阅读 CSS 选择器以澄清这一点。

简而言之，对于以下元素：

```
<td id="someID" class="someclass">...</td> 
```

在 CSS 中可以使用以下内容来引用它：

*   `td { ... }`将适用于所有`<td>`元素
*   `#someID { ... }`仅适用于 id 为“someID”的元素
*   `.someclass { ... }`适用于“someclass”类的所有元素（td 或其他）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T12:53:21.840

用作`td`样式名称是不好的做法，因为它很容易混淆`td`元素。要在 .NET 中添加样式表，您可以这样做：

```
 var styleSheet = new HtmlLink();
    styleSheet.Attributes.Add("rel","stylesheet");
    styleSheet.Attributes.Add("href", "tablecellmembers.css");
    Page.Header.Controls.Add(styleSheet); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T12:51:22.513

`aspx page`您必须像这样在内部`head tag`（如果您不使用母版页）中包含您的 css 文件的引用

```
<link href="your css file name" rel="stylesheet" type="text/css" /> 
```

或者，如果您在母版页上使用`content page`继承自然`master page`后包含上述文件引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:59:20.183

您需要先将 css 文件链接到呈现的 aspx 页面：

```
<link rel="stylesheet" type="text/css" href="tablecellmembers.css"> 
```

完成此操作后，样式应在浏览器中呈现时自动应用于表格单元格，您不需要使用属性，因为**td**选择器已经将样式链接到呈现的 html 中的表格单元格。希望有帮助。

# ruby-on-rails - Heroku - 在浏览器中显示当前提交的哈希

> ID：14583282
> 
> 赞同：45
> 
> 时间：2013-01-29T12:47:49.317
> 
> 标签：ruby-on-rails, git, heroku

我想在浏览器中显示当前 git 提交的哈希，以便测试团队（无权运行 heruko 命令）能够在错误报告中包含相应的提交哈希。

首先我尝试了砂砾，但有些东西坏了，它在 Heroku 上不起作用（在本地它很好用，我不知道为什么它在 Heroku 上失败）。

于是我发现Heroku上有两个环境变量：

```
ENV["COMMIT_HASH"]
ENV["LAST_COMMIT_BY"] 
```

但是它们都不可用（两者都为零）。

我还检查了：

```
heroku config 
```

但同样，两者都没有设置。

有没有办法检索哈希信息？有没有办法获得更多的 git 信息，例如日期？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-12-30T19:58:17.673

现在可以尝试 Roberto 在他的回答中提到的 Heroku 功能，而无需联系 Heroku。它被称为[Heroku Labs：Dyno 元数据](https://devcenter.heroku.com/articles/dyno-metadata)，您可以通过以下方式启用它

```
heroku labs:enable runtime-dyno-metadata -a <app name> 
```

然后信息作为环境变量可用（在下一次部署时）：

```
~ $ env
HEROKU_APP_ID:                   9daa2797-e49b-4624-932f-ec3f9688e3da
HEROKU_APP_NAME:                 example-app
HEROKU_DYNO_ID:                  1vac4117-c29f-4312-521e-ba4d8638c1ac
HEROKU_RELEASE_VERSION:          v42
HEROKU_SLUG_COMMIT:              2c3a0b24069af49b3de35b8e8c26765c1dba9ff0
HEROKU_SLUG_DESCRIPTION:         Deploy 2c3a0b2
... 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-17T19:09:31.923

首先，由于 heroku在 slug 编译期间[“删除 [s] 未使用的文件，包括 .git 目录”](https://devcenter.heroku.com/articles/slug-compiler#compilation)，因此您将无法从应用程序目录内（在 heroku dyno 上）执行一些 git 命令。这包括诸如 之类的东西`git rev-parse HEAD`，这通常是获取当前哈希值的简单方法。

其次，尝试`git ls-remote`在 heroku dyno 上检索信息将调用 ssh，您会看到消息说`The authenticity of host 'heroku.com (50.19.85.132)' can't be established`，因为 heroku 公钥没有安装在 heroku dyno 上。您将无权安装 heroku 公钥。

你仍然有至少两个选择。

1.  添加[提交后挂钩](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)以更新哈希值。

    a) 创建或编辑文件`.git/hooks/post-commit`
    b) 添加一些 shell 脚本代码，如下所示：

    > hash_name=HEAD_HASH
    > hash=$(git rev-parse HEAD)
    > echo 将 $hash_name 设置为 $hash
    > heroku config:set $hash_name=$hash --app yourappname

    （你可以为 git hooks 使用任何你想要的代码；这只是一种选择）

    **解释：**

    *   `HEAD_HASH`是 heroku 环境变量的名称。随心所欲地称呼它。您将在主应用程序中查找它并将其显示在页面上。
    *   `git rev-parse HEAD`获取当前 HEAD 提交的哈希值。为您想要显示的任何内容自定义此行。

    现在，当您提交 git 时，`HEAD_HASH`每次都会更新 env var。这可行，但可能有点慢，因为您每次提交时都会等待 heroku 设置环境变量。如果您的网络连接中断等，该变量将不会被更新。[有传言](https://github.com/git/git/blob/master/Documentation/RelNotes/1.8.2.txt)说 git 1.8.2 将允许一个“预推送”钩子，您可以在其中放置此代码。

2.  使用脚本推送您的代码

    `git push heroku master`您可以编写一个 shell 脚本，其中包含来自选项的行并在末尾`1.`添加，而不是键入推送代码。`git push heroku master`然后运行这个 shell 脚本来部署你的代码。这将`HEAD_HASH`只在推送之前更新（而不是在每次 git 提交之后），并且它很好地将所有内容保存在一个地方。您可能还想将脚本添加到您的`.slugignore`文件中。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-04-03T04:00:23.037

截至 2015 年 4 月 1 日，Git SHA 现在在构建过程中作为环境变量 SOURCE_VERSION 可用。见：[https ://devcenter.heroku.com/changelog-items/630](https://devcenter.heroku.com/changelog-items/630)

请注意，它仅在编译步骤期间对正在运行的应用程序不可用。您可以添加一个自定义 buildpack 将其写入到 slug 中持久存在的文件中，然后从您的应用程序中读取该文件。

我正在测试这种方法并在这里有一个实验性的 buildpack：[https ://github.com/sreid/heroku-buildpack-sourceversion](https://github.com/sreid/heroku-buildpack-sourceversion)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-03-06T19:29:20.480

Heroku 容器上有一个 env var，称为`SOURCE_VERSION`

[https://devcenter.heroku.com/articles/buildpack-api](https://devcenter.heroku.com/articles/buildpack-api)

你可以用那个！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-28T01:02:31.583

Git >1.8.2 现在支持预推送钩子，这更适合我们的用例。这是我当前的钩子脚本：

```
#!/bin/sh

remote="$1"
url="$2"

if [[ $url =~ heroku ]] ; then

    if [[ $url =~ staging ]] ; then
        appname=YOUR_APP_NAME_STAGING
    else
        appname=YOUR_APP_NAME
    fi

    hash_name=COMMIT_HASH
    hash=$(git rev-parse HEAD)
    echo Setting $hash_name to $hash
    heroku config:set $hash_name=$hash --app $appname
fi
exit 0 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-07-12T14:13:48.420

`git ls-remote heroku`为我工作。[我从这里](https://stackoverflow.com/a/8035499/29493)的一个重复问题的答案中得到了这个。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-15T04:30:04.767

culix 和 joshwa 都有很好的答案。如果您将 heroku git 遥控器命名为与相应的 heroku 应用程序相同，您可以拥有一个更短、更健壮的`.git/hooks/pre-push`钩子：

```
#!/bin/bash

remote="$1"
url="$2"

if [[ $url =~ heroku ]] ; then
    hash_name=COMMIT_HASH
    hash=$(git rev-parse HEAD)
    echo Setting $hash_name to $hash on app $remote
    heroku config:set $hash_name=$hash --app $remote
fi

exit 0 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-03-20T22:34:13.740

如果您使用 CI 并且无权访问 Heroku 客户端，也可以直接使用 Heroku API。

这是我在[codeship.com](https://codeship.com/)上使用的解决方案（它在环境中提供哈希为`$CI_COMMIT_ID`：

```
# you can use `heroku auth:token` to generate this
HEROKU_API_KEY="" 

APP_NAME="glorious-flying-birds"

curl -n -X PATCH "https://api.heroku.com/apps/$APP_NAME/config-vars" \
  -H "Authorization: Bearer $HEROKU_API_KEY" \
  -H "Accept: application/vnd.heroku+json; version=3" \
  -H "Content-Type: application/json" \
  -d "{\"GIT_COMMIT_HASH\": \"$CI_COMMIT_ID\"}" 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-10-21T12:38:14.377

Heroku 具有支持 dyno 元数据的新功能，如果您通过电子邮件发送支持，您可能会被添加到测试版中。这是 Heroku 自己使用它的地方：

[https://github.com/heroku/fix/blob/6c8ab7a/lib/heroku_dyno_metadata.rb](https://github.com/heroku/fix/blob/6c8ab7a/lib/heroku_dyno_metadata.rb)

附加功能将 JSON 文件写入到`/etc/heroku/dyno`- 内容如下所示：

```
{
   "dyno":{
      "physical_id":"161bfad9-9e83-40b7-b385-78305db2f168",
      "size":1,
      "name":"run.7145"
   },
   "app":{
      "id":null
   },
   "release":{
      "id":50,
      "commit":"2c3a0b24069af49b3de35b8e8c26765c1dba9ff0",
      "description":null
   }
} 
```

..`release.commit`你所追求的领域也是如此。

# c# - 如何解析带有后缀“th”、“st”或“nd”的日期？

> ID：14583285
> 
> 赞同：10
> 
> 时间：2013-01-29T12:47:55.900
> 
> 标签：c#, datetime

我在使用时遇到问题`DateTime.Parse`

我正在处理各种格式的日期，其中一些是格式`January 11th`等等`February 22nd`。

`DateTime.Parse`尝试解析这些日期时抛出异常。

我想知道 DateTime 中是否有我缺少的内置功能，例如我可以设置的标志，它会使 Parse 以更可接受的方式运行。

我知道这可以用一个相对简单的正则表达式来解决，而且我已经有一个模糊匹配我写的日期的类，但是我想知道是否有内置的方法来执行这种提取，因为它会从长远来看，比重新发明轮子更容易维护。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T12:49:02.373

.Net 框架中没有内置任何东西来解析`January 11th or February 22nd`等格式的日期。您必须删除后缀字符，然后才能使用 [`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/h9b85w22.aspx).

对于后缀为`st`,的日期`th`，您可以使用`string.Replace`删除该部分，然后使用`DateTime.TryParseExact`。像。

```
string str = "1st February 2013";
DateTime dtObject;
string replacedStr =  str.Substring(0,4)
                         .Replace("nd","")
                         .Replace("th","")
                         .Replace("rd","")
                         .Replace("st","")
                         + str.Substring(4);

if (DateTime.TryParseExact(replacedStr, 
                            "dd MMMMM yyyy", 
                            CultureInfo.InstalledUICulture, 
                            DateTimeStyles.None, 
                            out dtObject))
{
 //valid date
} 
```

对于多种格式，您可以在字符串数组中指定格式，稍后您可以使用它。它返回一个`bool`值，指示解析是否成功。

来自 MSDN 的示例：

```
string[] formats= {"M/d/yyyy h:mm:ss tt", "M/d/yyyy h:mm tt", 
                   "MM/dd/yyyy hh:mm:ss", "M/d/yyyy h:mm:ss", 
                   "M/d/yyyy hh:mm tt", "M/d/yyyy hh tt", 
                   "M/d/yyyy h:mm", "M/d/yyyy h:mm", 
                   "MM/dd/yyyy hh:mm", "M/dd/yyyy hh:mm"};
string[] dateStrings = {"5/1/2009 6:32 PM", "05/01/2009 6:32:05 PM", 
                        "5/1/2009 6:32:00", "05/01/2009 06:32", 
                        "05/01/2009 06:32:00 PM", "05/01/2009 06:32:00"}; 
DateTime dateValue;

foreach (string dateString in dateStrings)
{
   if (DateTime.TryParseExact(dateString, formats, 
                              new CultureInfo("en-US"), 
                              DateTimeStyles.None, 
                              out dateValue))
      Console.WriteLine("Converted '{0}' to {1}.", dateString, dateValue);
   else
      Console.WriteLine("Unable to convert '{0}' to a date.", dateString); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-31T02:16:17.570

这是一个非常古老的问题，但是对于仍在研究复杂自然语言日期解析的任何人，我建议使用 nChronic，这是令人惊叹的（基于 ruby​​ 的）慢性日期解析器的 .NET 端口。

它的来源在这里： [nChronic Github](https://github.com/robertwilczynski/nChronic)

它也在 Nuget 中作为慢性：Nuget 中的[慢性](https://www.nuget.org/packages/Chronic/)

使用这个库的一些非常简单的示例代码如下所示：

```
using Chronic;
var parser = new Chronic.Parser ();
Span ParseObj;
DateTime ParsedDateTime;
ParseObj = parser.Parse ("January 11th");
ParsedDateTime = ParseObj.Start; 
```

**以下是它可以处理的一些示例：**

**简单的**

*   周四
*   十一月
*   夏天
*   星期五
*   13:00
*   周一 2:35
*   下午4点
*   10到8
*   10点2
*   2点半
*   早上 6 点
*   周五下午 1 点
*   晚上7点坐
*   昨天
*   今天
*   明天
*   上个星期
*   下周
*   本周二
*   下个月
*   去年冬天
*   今天早上
*   昨晚
*   这一秒
*   昨天 4:00
*   上周五 20:00
*   上周星期二
*   明天下午 6:45
*   下午
*   昨天
*   上周星期四

**复杂的**

*   3年前
*   一年前
*   5个月前
*   7 小时前
*   从现在起 7 天
*   1 周后
*   3小时内
*   1 年前 明天
*   3 个月前 星期六 下午 5:00
*   明天中午前 7 小时
*   11 月的第三个星期三
*   明年第三个月
*   今年9月的第3个星期四
*   上周第四天
*   2010年6月14日晚上十一点
*   97 年 5 月 7 日凌晨三点

**具体日期**

*   1 月 5 日
*   6月22日
*   2017 年 5 月 5 日
*   二月二十一日
*   12月25日
*   5月27日
*   2006 年 10 月
*   10 月 6 日
*   2010 年 1 月 3 日
*   2004 年 2 月 14 日
*   2004 年 2 月 14 日
*   2000 年 1 月 3 日
*   85 年 4 月 17 日
*   1979 年 5 月 27 日
*   1979 年 5 月 27 日
*   05/06
*   1979-05-27
*   星期五
*   5
*   4:00
*   17:00
*   0800

**特定时间（上述许多时间都有附加时间）**

*   1 月 5 日晚上 7 点
*   6月22日早上8点
*   1979-05-27 05:00:00
*   03/01/2012 07:25:09.234567

ETC

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-04T04:19:08.240

我有类似的问题，这里有更好的方法

```
 stringdate="August 19th 2000" 
  string pattern = @"\b(\d+)(?:st|nd|rd|th)\b";
  Regex rgx = new Regex(pattern);
  DateTime.Parse(String.Format("{0:MMMM,  d, yyyy}", rgx.Replace(stringdate, "$1"))  
  **result**    {19/08/2000 00:00:00}   System.DateTime 
```

从[Microsoft](https://stackoverflow.com/questions/6182290/regex-to-remove-ordinals)和[正则表达式删除序数](https://stackoverflow.com/questions/6182290/regex-to-remove-ordinals)以及[如何可视化各种 DateTime 格式的显示方式？](https://stackoverflow.com/questions/11551655/how-can-i-visualize-the-way-various-datetime-formats-will-display)

**编辑**

如果没有指定年份：

```
 stringdate= rgx.Replace(stringdate, "$1");
    DateTime datetime;
    if (!DateTime.TryParseExact(stringdate, "MMMM dd yyyy", System.Globalization.DateTimeFormatInfo.InvariantInfo, System.Globalization.DateTimeStyles.None, out datetime))
    {
     // assuming no gap exist
     datetime = DateTime.Parse(stringdate += " "+DateTime.Now.Year);
    } 
```

现在，如果输入字符串 text 是`"June 11th"`，它将是 `11/6/2021`。

[在DateTime 文档](https://docs.microsoft.com/en-us/dotnet/api/system.datetime?view=net-5.0)中有更多处理日期的函数和方法。

如果您根本不想要年份，则可以添加以下行：

```
datetime.ToString("MM/dd"); 
```

现在输出将是“11/6”

# cloudbees - 在 cloudbees 上部署 Grails 应用程序的问题

> ID：14583288
> 
> 赞同：0
> 
> 时间：2013-01-29T12:48:01.080
> 
> 标签：cloudbees

我是新的 cloudbees 用户，我已经成功构建了我的 war 文件，但我无法部署它，因为当我要使用`Deploy Now`选项时，将我的应用程序 ID **claxon/claxon**我总是得到同样的错误：

```
**"hudson.util.IOException2: Server.InternalError - Expected Application ID format: account/appname > claxon/"** 
```

这是日志..

```
hudson.util.IOException2: Server.InternalError - Expected Application ID format: account/appname > claxon/
    at com.cloudbees.plugins.deployer.deployables.Deployable.deployFile(Deployable.java:152)
    at com.cloudbees.plugins.deployer.DeployNowRunAction$Deployer.perform(DeployNowRunAction.java:639)
    at com.cloudbees.plugins.deployer.DeployNowRunAction.run(DeployNowRunAction.java:484)
    at com.cloudbees.plugins.deployer.DeployNowTask$ExecutableImpl.run(DeployNowTask.java:157)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: com.cloudbees.api.BeesClientException: Server.InternalError - Expected Application ID format: account/appname > claxon/
    at com.cloudbees.api.BeesClient.readResponse(BeesClient.java:850)
    at com.cloudbees.api.BeesClient.applicationDeployArchive(BeesClient.java:435)
    at com.cloudbees.plugins.deployer.deployables.Deployable.deployFile(Deployable.java:124)
    ... 5 more
Duration: 4.1 sec
Finished: FAILURE 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:30:19.587

`claxon/`当您从帐户下拉列表中选择帐户时，不要将帐户为您排序。只需输入 id 部分。

如果您展开帮助文本，您会看到它说不要前缀：

![使用我的超级用户权限，我从您的帐户中截取了这张截图](../Images/3801b75ff6a9cabccf3ce895b97b1c95.png)

注意：我使用我的超级用户权限来捕获此屏幕截图......唯一可能保密的是您的帐户名称，您已经通过原始问题公开了该名称。

# magento-1.7 - Magento 后端翻译成荷兰语

> ID：14583291
> 
> 赞同：1
> 
> 时间：2013-01-29T12:48:32.440
> 
> 标签：magento-1.7

如何翻译 Magento 管理部分（仅管理部分）默认为英语。我需要将其翻译成荷兰语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:10:11.443

看到这个[链接](http://inchoo.net/ecommerce/magento/how-to-translate-form-labels-in-magentos-admin-area/)，你可能需要下载一个 csv 的翻译标签

[您可能也对此](http://www.magentocommerce.com/magento-connect/magento-dutch-translation-8713.html)感兴趣，但它可能会翻译整个网站。

# java - 从 servlet 运行繁重的 cmd 进程

> ID：14583294
> 
> 赞同：1
> 
> 时间：2013-01-29T12:48:55.617
> 
> 标签：java, tomcat, servlets

我有一个繁重的 CMD 进程（约 5 分钟），我需要根据客户的需求从 servlet 运行。

我还希望能够将一些流程的输出转发给客户端。（进度百分比）

尝试了几种方法，但无法使其工作......

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:53:54.077

您的 HTTP 请求将在五分钟后超时。客户也不喜欢等待。

我的建议是使用 Executor 异步执行此操作。

您可以通过添加第二个 HTTP 请求来提供进度信息，并让客户端对该 URL 进行 AJAX 调用。

# list - 将列表的映射转换为映射列表（即行到列）

> ID：14583295
> 
> 赞同：2
> 
> 时间：2013-01-29T12:48:56.773
> 
> 标签：list, clojure, maps, transformation

我在 Clojure 中有以下数据结构

```
{:a [1 2 3]
 :b [4 5 6]
 :c [7 8 9]} 
```

我想把它转换成类似的东西

```
[{:a 1 :b 4 :c 7}
 {:a 2 :b 5 :c 8}
 {:a 3 :b 6 :c 9}] 
```

目前，我对如何做到这一点有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:46:36.000

在 Clojure 中，您永远无法保证转换后映射中键的顺序。它们是按键索引的，而不是按顺序索引的。

然而，向量是。并且`get-in`您可以使用坐标向量查找位置。

```
=> (def mat
     [[1 2 3]
      [4 5 6]
      [7 8 9]])

=> (defn transpose
     [m]
     (apply mapv vector m))

=> (get-in (transpose mat) [1 2])
8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:02:52.923

知道了：

```
(defn transpose-lists [x] 
  (map (fn [m] (zipmap (keys x) m)) (apply map vector (vals x)))) 
```

不幸的是，它不保留键的顺序。如果有人有更好的解决方案，那么我当然想听听！

# c - sin 函数没有按预期工作

> ID：14583297
> 
> 赞同：2
> 
> 时间：2013-01-29T12:49:03.413
> 
> 标签：c

我有这个方程，它使用 sci calc 的输出是：0.017...但是当我在 c 中运行它时，它的输出是：0.84..

输入为 1

等式是：sin(x) - x^4 + 1

```
float sinp(float p1)
{
    float fop;
    float ppowers;
    printf("%f",p1);
    ppowers = pow(p1,4);
    fop = sin(p1)-ppowers+1;
    return (fop);
} 
```

这背后有什么原因吗？是因为辐射还是度数？

我还没有真正使用过 C 的 sin 或任何数学函数，所以我并没有真正理解这里有什么问题。谷歌给了我 0.84 作为 aswer 但我的 calc 给了我 .017 这真的很令人困惑，因为我需要用我的 calc 获得相同的输出。

谢谢你们 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:52:10.110

在数学和所有计算机语言中，三角函数以弧度工作。如果你想以度数工作，你应该进行转换（或定义你自己的 sin_degrees 函数），如：

```
double sin_degrees(double degrees) {
    return sin(degrees * (M_PI/180.0);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:52:17.717

我猜谷歌在 sin 中使用度数作为角度度量，而 c++ 使用弧度，这就是差异的原因。要将以度为单位的角度转换为以弧度为单位的相同值，请执行以下操作：

```
rad_angle = deg_angle * (PI / 180.0); 
```

你`PI`知道的好老常数在哪里。

# facebook - 从 Windows Store 应用程序与 Facebook 共享图像

> ID：14583298
> 
> 赞同：2
> 
> 时间：2013-01-29T12:49:11.360
> 
> 标签：facebook, windows-8, share, windows-store-apps

我正在开发一个必须与 Facebook 共享图片的应用程序。

按照 Windows 8 的指导方针，我必须使用 Share Charm（文本、html、图像和文件）。基本上，这个想法是构建可以共享信息的源应用程序和能够接收此信息的目标应用程序。

[转自 Microsoft 的示例](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Source-App-d9bffd84)，它允许共享信息类型，只能使用 People 应用程序与 Facebook 共享链接。

我为这个问题找到了三种可能的解决方案： 1 - 等待 Facebook 启动适用于 Windows 8 的官方应用程序以接收所有这些信息类型；2 - 等待 Microsoft 在人脉应用中包含共享这些类型的信息。3 - 创建一个实现 Facebook API 的目标应用程序。

最后，我想知道您是否遇到过此类问题以及他们是如何解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:13:42.027

你试过使用这个库吗... [Facebook C# SDK](http://csharpsdk.org/) 我认为它会给你你想要的

# java - XmlAdapter 中的 JAXB @XmlIDREF 用于不可变对象

> ID：14583299
> 
> 赞同：3
> 
> 时间：2013-01-29T12:49:13.313
> 
> 标签：java, jaxb

我正在使用`XmlAdapter`此博客文章中提出的不可变对象：http: [//blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html](http://blog.bdoughan.com/2010/12/jaxb-and-immutable-objects.html)。这工作正常，但不适用于对我的适配器中其他不可变对象的引用。有没有办法用 JAXB 处理这个问题？

下面有一个示例，如果此人的 xml 标记出现在引用此人的公司的 xml 标记之后，则该示例不起作用。

**不可变对象：**

```
@XmlJavaTypeAdapter(PersonAdapter.class)
public class Person {
  private final String id;
  private final String name;

  public Person(String id, String name) {
    this.id = id;
    this.name = name;
  }

  public String getId() {
    return id;
  }

  public String getName() {
    return name;
  }
}

@XmlJavaTypeAdapter(CompanyAdapter.class)
public class Company {
  private final String name;
  private final Person principal;

  public Company(String name, Person principal) {
    this.name = name;
    this.principal = principal;
  }

  public String getName() {
    return name;
  }

  public Person getPrincipal() {
    return principal;
  }
} 
```

**人员适配器：**

```
public class PersonAdapter extends XmlAdapter<AdaptedPerson, Person> {
  public static class AdaptedPerson {
    @XmlID
    @XmlAttribute
    String id;
    @XmlAttribute
    String name;
  }

  @Override
  public AdaptedPerson marshal(Person v) throws Exception {
    AdaptedPerson a = new AdaptedPerson();
    a.id = v.getId();
    a.name = v.getName();
    return a;
  }

  @Override
  public Person unmarshal(AdaptedPerson v) throws Exception {
    return new Person(v.id, v.name);
  }
} 
```

**公司适配器：**

```
public class CompanyAdapter extends XmlAdapter<AdaptedCompany, Company> {
  public static class AdaptedCompany {
    @XmlAttribute
    String name;
    @XmlIDREF
    @XmlAttribute
    Person principal;
  }

  @Override
  public AdaptedCompany marshal(Company v) throws Exception {
    AdaptedCompany a = new AdaptedCompany();
    a.name = v.getName();
    a.principal = v.getPrincipal();
    return a;
  }

  @Override
  public Company unmarshal(AdaptedCompany v) throws Exception {
    return new Company(v.name, v.principal);
  }
} 
```

# android - 我在 Json 解析中遇到错误

> ID：14583303
> 
> 赞同：0
> 
> 时间：2013-01-29T12:49:29.870
> 
> 标签：android

这是我的搜索活动。我正在使用下面的代码。当我在浏览器中点击 SearchUrl 时，它会给出正确的响应，但是在使用此代码解析它时出现错误。我不明白为什么会发生这种情况？

```
public class SearchListActivity extends Activity {

    ListView SearchResults;
    private String SearchUrl = "http://www.adultretailfinder.com.au/api/search?transport=get&";
    AdultRetailFinderUtils util;
    ArrayList<AdultRetailFinderDTO> SearchArrayList;
    ListAdapter adapter;
    JSONObject json;
    Bundle myBundle;
    private JSONParser jsonParser;
    String SearchKeyword, type;
    MyCustomAdapter myAdapter;
    JSONArray searchArray = null;
    ProgressDialog dialog;
    Boolean searchFlag = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search_list_layout);
        initDisplay();

    }

    class MyCustomAdapter extends BaseAdapter {

        public int getCount() {
            return SearchArrayList.size();
        }

        public String getItem(int position) {
            return null;
        }

        public long getItemId(int position) {
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = getLayoutInflater();
            View row;

            row = inflater.inflate(R.layout.searchrow_layout, parent, false);

            TextView BusinessText = (TextView) row.findViewById(R.id.txt);
            BusinessText.setText(SearchArrayList.get(position)
                    .getBusinessName());

            return (row);
        }

    }

    private void initDisplay() {

        myBundle = new Bundle();
        myBundle = getIntent().getExtras();
        SearchResults = (ListView) findViewById(R.id.search_lv);
        dialog = new ProgressDialog(SearchListActivity.this);
        jsonParser = new JSONParser();
        SearchArrayList = new ArrayList<AdultRetailFinderDTO>();
        util = new AdultRetailFinderUtils(SearchListActivity.this);
        SearchKeyword = myBundle.getString("SEARCHKEYWORD");
        type = myBundle.getString("TYPE");

        Log.v("SEARCHKEYWORD::", SearchKeyword);
        Log.v("TYPE::", type);
        myAdapter = new MyCustomAdapter();

        if (jsonParser.isNetworkAvailable(SearchListActivity.this)) {
            new BGTaskForSearch().execute();
        } else {
            Toast.makeText(SearchListActivity.this,
                    getResources().getString(R.string.network_not_available),
                    Toast.LENGTH_LONG).show();
        }

    }

    private class BGTaskForSearch extends
            AsyncTask<String, Void, ArrayList<AdultRetailFinderDTO>> {
        protected void onPreExecute() {

            dialog.setMessage("Loading...");
            dialog.setCancelable(false);
            dialog.show();

        }

        @Override
        protected ArrayList<AdultRetailFinderDTO> doInBackground(String... args) {

            // String urlstr= searchURL+selectedData+"Status=1&Prov_ID=19";
            List<NameValuePair> params = new LinkedList<NameValuePair>();
            params.add(new BasicNameValuePair("keywords", SearchKeyword));
            params.add(new BasicNameValuePair("filter", "shops"));
            params.add(new BasicNameValuePair("type", type));
            String paramString = URLEncodedUtils.format(params, "utf-8");
            String newUrl = SearchUrl + paramString;
            Log.v("urlstr", newUrl);
            JSONObject json = jsonParser.getJSONFromUrl(newUrl);
            SearchArrayList = util.getJsonParsedResp(json);

            // TODO Auto-generated method stub

            if (SearchArrayList != null) {
                return SearchArrayList;
            } else {
                return null;
            }

        }

        protected void onPostExecute(ArrayList<AdultRetailFinderDTO> list) {
            dialog.dismiss();
            if (list != null) {

                SearchResults.setAdapter(myAdapter);

            } else
                Toast.makeText(SearchListActivity.this, "no records are found",
                        Toast.LENGTH_LONG).show();

        }
    }

} 
```

我得到的这种类型的错误：

```
01-29 17:24:06.027: E/Trace(1775): error opening trace file: No such file or directory (2)
01-29 17:24:06.577: D/dalvikvm(1775): GC_FOR_ALLOC freed 72K, 3% free 8056K/8259K, paused 41ms, total 42ms
01-29 17:24:06.597: I/dalvikvm-heap(1775): Grow heap (frag case) to 9.380MB for 1536016-byte allocation
01-29 17:24:06.707: D/dalvikvm(1775): GC_CONCURRENT freed 1K, 3% free 9555K/9799K, paused 72ms+4ms, total 116ms
01-29 17:24:06.797: D/dalvikvm(1775): GC_FOR_ALLOC freed 4K, 3% free 9725K/9991K, paused 38ms, total 38ms
01-29 17:24:06.807: I/dalvikvm-heap(1775): Grow heap (frag case) to 10.455MB for 953364-byte allocation
01-29 17:24:06.927: D/dalvikvm(1775): GC_CONCURRENT freed <1K, 3% free 10656K/10951K, paused 74ms+5ms, total 116ms
01-29 17:24:06.927: D/dalvikvm(1775): WAIT_FOR_CONCURRENT_GC blocked 7ms
01-29 17:24:07.277: I/Choreographer(1775): Skipped 53 frames!  The application may be doing too much work on its main thread.
01-29 17:24:07.397: D/gralloc_goldfish(1775): Emulator without GPU emulation detected.
01-29 17:24:07.637: I/Choreographer(1775): Skipped 65 frames!  The application may be doing too much work on its main thread.
01-29 17:24:13.086: V/SEARCHKEYWORD::(1775): adult
01-29 17:24:13.086: V/TYPE::(1775): business
01-29 17:24:13.246: V/SEARCHKEYWORD::(1775): adult
01-29 17:24:13.256: V/TYPE::(1775): business
01-29 17:24:13.286: V/urlstr(1775): http://www.adultretailfinder.com.au/api/search?transport=get&keywords=adult&filter=shops&type=business
01-29 17:24:17.836: D/dalvikvm(1775): GC_CONCURRENT freed 250K, 4% free 11229K/11591K, paused 71ms+74ms, total 174ms
01-29 17:24:18.186: V/JSON(1775): <!DOCTYPE html>n<html>n<head>nn    <!--<meta name="viewport" content="width=device-width; target-densitydpi=device-dpi;">--><!--<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0"/>-->n    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />nn    <meta name="HandheldFriendly" content="true" />n    <!--<meta http-equiv="cleartype" content="on">-->n    <meta name="format-detection" content="telephone=no" />n    <meta name="format-detection" content="address=no" />n    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />nn    <title>Find Adult Shops, Online Shops, Party Plans and Adult Entertainment</title>n    <meta name="description" content="Adult Retail Finder makes it easy to locate adult shops, online stores, adult party plan and adult entertanment across Australia and New Zealand " />n    <meta name="keywords" content="Adult Shop, Adult Party Plan, Online Adult Shop, Adult Entertainment, Adult Shop Directory, Adult Directory, Adult Retail Finder " />n    <link href="/external.css" rel="stylesheet" type="text/css" />n    <link href="/style.css" rel="stylesheet" type="text/css" />nn    <script type="text/javascript">nn        var _gaq = _gaq || [];n        _gaq.push(['_setAccount', 'UA-19656663-32']);n        _gaq.push(['_setDomainName', 'adultretailfinder.com.au']);n        _gaq.push(['_trackPageview']);nn        (function () {n            var ga = document.createElement('script');n            ga.type = 'text/javascript';n            ga.async = true;n            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';n            var s = document.getElementsByTagName('script')[0];n            s.parentNode.insertBefore(ga, s);n        })();nn    </script>nn    <style type="text/css">n    #AutoCompleten    {n        background:#FFFFFF;n        color:#000000;n        border:solid 1px #CCCCCC;n        text-align:left;n        position:absolute;n        z-index:10000;n        font-size:12px;n        padding:2px 2px;n    }nn    #ExitAutoCompleten    {n        width:16px;n        height:16px;n        position:absolute;n        z-index:auto;n        cursor:pointer;n    }nn    .AutoItem1 a:linkn    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem1 a:hovern    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem1 a:visitedn    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem1 a:activen    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem1n    {n        font-size:12px;n        background:#f7f7f7;n        cursor:pointer;n    }nn    .AutoItem2 a:linkn    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem2 a:hovern    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem2 a:visitedn    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }nn    .AutoItem2 a:activen    {n        font-size:12px;n        color:#000000;n        text-decoration:none;n    }n    .AutoItem2n    {n        font-size:12px;n        background:#FFFFFF;n        cursor:pointer;n    }nn    .AutoItemOvern    {n        font-size:12px;n        background:#ffe8f2;n        cursor:pointer;n    }n</style>nn<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>nn<script type="text/javascript">nn/*Bob Monteverde*/nString.prototype.width = function(font) {n    var f = font || '12px arial',n            o = $('<div>' + this + '</div>')n                    .css({'position': 'absolute', 'float': 'left', 'visibility': 'hidden', 'font': f})n                    .appendTo($('body')),n            w = o.width();nn    o.remove();nn    return w;n};nn$(document).ready(function()n{    n   $("#AutoComplete").hide();n $("#ExitAutoComplete").h
01-29 17:24:18.186: V/JSON Parser(1775): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
01-29 17:24:18.196: W/dalvikvm(1775): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
01-29 17:24:18.206: E/AndroidRuntime(1775): FATAL EXCEPTION: AsyncTask #1
01-29 17:24:18.206: E/AndroidRuntime(1775): java.lang.RuntimeException: An error occured while executing doInBackground()
01-29 17:24:18.206: E/AndroidRuntime(1775):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.lang.Thread.run(Thread.java:856)
01-29 17:24:18.206: E/AndroidRuntime(1775): Caused by: java.lang.NullPointerException
01-29 17:24:18.206: E/AndroidRuntime(1775):     at com.adultretailfinder.AdultRetailFinderUtils.getJsonParsedResp(AdultRetailFinderUtils.java:24)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at com.adultretailfinder.SearchListActivity$BGTaskForSearch.doInBackground(SearchListActivity.java:128)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at com.adultretailfinder.SearchListActivity$BGTaskForSearch.doInBackground(SearchListActivity.java:1)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-29 17:24:18.206: E/AndroidRuntime(1775):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-29 17:24:18.206: E/AndroidRuntime(1775):     ... 5 more
01-29 17:29:18.344: I/Process(1775): Sending signal. PID: 1775 SIG: 9 
```

实用类

```
public class AdultRetailFinderUtils {
    private Context context;
    public AdultRetailFinderUtils(Context mcontext) {

        context = mcontext;

    }

    public ArrayList<AdultRetailFinderDTO> getJsonParsedResp(JSONObject jsonObj) {
        ArrayList<AdultRetailFinderDTO> searchArrayList = new ArrayList<AdultRetailFinderDTO>();
        try {
            JSONArray jsArray = jsonObj.getJSONArray("data");
            if (jsArray.length() > 0) {

                for (int i = 0; i < jsArray.length(); i++) {
                    AdultRetailFinderDTO dto = new AdultRetailFinderDTO();
                    JSONObject jsonObject = jsArray.getJSONObject(i);
                    Integer id= jsonObject.getInt("id") ;   
                    String businessName = jsonObject.getString("business");
                    String type = jsonObject.getString("type");

                    dto.setId(id);
                    dto.setBusinessName(businessName);
                    dto.setType(type);

                    searchArrayList.add(dto);
                }

            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        if (searchArrayList.size() > 0) {
            return searchArrayList;
        } else {
            return null;
        }

    }
} 
```

为什么？

提前致谢！

# java - ANDROID - 测量用户发出的声音水平并显示它

> ID：14583305
> 
> 赞同：1
> 
> 时间：2013-01-29T12:49:36.510
> 
> 标签：java, android, eclipse, audio, android-mediarecorder

我目前正在编写一个显示用户声音的应用程序。我目前让它在他们按下录音时录制声音`MediaRecorder`，然后让他们通过按下播放再次收听该录音，这使用`MediaPlayer`.

我现在想知道如何输出他们记录的噪音有多大。由于使用 ，`MediaRecorder`我试图通过 检索响度`.getMaxAplitude()`。使用它然后我尝试在文本视图中显示它，以便用户可以看到他们的结果。

因此，在这样做时，我在开始录制功能中的当前代码是

```
 recorder = new MediaRecorder();
 recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
 recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
 recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
 recorder.setOutputFile(OUTPUT_FILE);
 recorder.prepare();
 recorder.start();

 int test = recorder.getMaxAmplitude();
 txtView.setText(test); 
```

正如您已经猜到的那样，这不起作用，录制音频确实有效，但无法向用户获取或显示幅度

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:21:00.500

或许您可以在[此处](https://stackoverflow.com/questions/4977728/how-to-get-the-amplitude-when-blowing-into-mic-on-android-device)查看 stackoverflow 帖子。

[在code.google.com](http://code.google.com/p/android-labs/source/browse/trunk/NoiseAlert/src/com/google/android/noisealert/)中也有类似的项目

# mongodb - MongoDB java-driver插入日期

> ID：14583306
> 
> 赞同：6
> 
> 时间：2013-01-29T12:49:36.460
> 
> 标签：mongodb, date, mongodb-java

我正在使用带有 java-driver 2.10.1 的 MongoDB 2.2

我正在将一个日期字段从一个`java.util.Date`实例插入到一个文档中。我的实例具有以下值：

`Wed Oct 10 00:00:00 CEST 2012`

但是一旦进入 mongo，我就有了这个价值： `ISODate("2012-10-09T22:00:00Z")`

我的插入代码：

```
BasicDBObject doc =  new BasicDBObject("key", event.getKey())
                    .append("title", event.getTitle())
                    .append("description",  event.getDescription())
                    .append("date",  event.getDate());
db.getCollection("events").insert(doc); 
```

您可以在此调试屏幕截图中查看从我的事件对象引用的日期实例： ![在此处输入图像描述](../Images/872e3b8cdc0b1e601d48d9edf550942b.png)

与时区有什么关系吗？还是驱动程序的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T13:59:19.300

MongoDB 中的日期始终存储为[UTC datetimes](http://docs.mongodb.org/manual/core/document/#date)，因此您看到的是正确的。

CEST 时区比 UTC (GMT) 早两个小时，因此您的时间正确 UTC 表示比您的 CEST 时间早两个小时，这正是您所看到的。

# mvvm - 如何从 ViewModel 到 View 进行通信

> ID：14583309
> 
> 赞同：0
> 
> 时间：2013-01-29T12:49:43.500
> 
> 标签：mvvm, caliburn.micro

我的 ViewModel 上有一个名为 LostFocus 的属性，我希望 View 知道它何时发生变化，以便它可以根据需要对该信息采取行动（即，如果 LostFocus 设置为 true，视图的设计者可能会使其模糊，或者他们可能什么都不做）。

我正在使用 Caliburn.Micro，所以如果它有任何我应该在这里知道的功能，请告诉我。否则，您将如何以 MVVM 方式执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:54:47.447

据我了解，这可以通过普通数据绑定来完成。由于您使用的是 Caliburn.Micro，因此设计人员可以使用约定来进行绑定。例如，如果在 LostFocus 设置为 true 时要检查视图上的复选框控件，则设计人员只需确保复选框的 Name 属性设置为 LostFocus，然后 Caliburn 将设置自动绑定。

此外，在您的视图模型上，确保在更改 LostFocus 的值时引发属性更改通知事件。

您也可以在视图模型上创建 LostFocus 事件，而不是使用 LostFocus 属性。然后，您可以在您认为合适时引发此事件，然后在视图上，设计人员可以使用事件触发器和触发操作来响应该事件。例如，在我的一个项目中，我设置了一个事件触发器来响应视图模型的 Activated 事件，然后我编写了一个自定义触发器动作来播放负责执行视图介绍动画的故事板。这种方法不限于 Caliburn.Micro，但我确实在 Caliburn.Micro 项目中使用过它，所以它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:10:16.613

我最终了解了 BindingConverter 并使用它来将布尔属性 false 转换为 null 并将 true 转换为 BlurEffect。

# java - 逗号分隔的字符串与 H2 数据库

> ID：14583312
> 
> 赞同：0
> 
> 时间：2013-01-29T12:49:53.420
> 
> 标签：java, database, jdbc, h2

我正在编写针对 H2 的测试并在生产中使用 MySQL。

我有一个这样的实体：

```
public class User{
   private Integer id;
   private String username;
   private Set<String> roles;
} 
```

我想将我的集合序列化为逗号分隔的字符串。我注意到 h2 文档中的 other_type 但不确定该怎么做。

有什么帮助吗？

谢谢

编辑：实际上我正在使用另一个基于 JDBC 的库。似乎使用了 ResultSet 的 setObject 和 getObject 方法，但不确定如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:07:34.007

我建议使用 VARCHAR(32000)。MySQL 和 H2 都支持这一点。请注意，32000 只是限制，并不意味着使用了这么多空间。

# google-apps-script - 在 google 应用程序脚本中调试 caja 问题 [Google 问题 2325]

> ID：14583314
> 
> 赞同：1
> 
> 时间：2013-01-29T12:49:56.290
> 
> 标签：google-apps-script

我有一个脚本上周运行良好，但今天不再运行。我试图在一个简单的示例中重现该问题，以便在此处分享，但无法在较小的脚本中重现我的问题。该脚本创建一个 html 接口（使用 HtmlService.createTemplateFromFile）并包含一个 OL，在客户端使用 javascript（从一个数组）向其中添加 li 项。使用 jquery 的 $("olid") 使 li 项成为可选择的。可选择的（）；当我运行这个脚本时，chrome 控制台说

Domado：HTMLOListElement 没有被驯服；<ol> 上不提供其特定的属性/方法。es53-taming-frame.opt.js:409 Domado：HTMLLIElement 未被驯服；<li> 上将不提供其特定属性/方法。

当我尝试单击 li 项目时，它们没有被选中。相反，我在 javascript 控制台中收到以下错误：

```
 Cannot read property nodeType_v___ of undefined 2462517803-maestro_htmlapp_bin_maestro_htmlapp.js:39
   lk 2462517803-maestro_htmlapp_bin_maestro_htmlapp.js:39
   applyFunction es53-taming-frame.opt.js:1696
   (anonymous function) es53-taming-frame.opt.js:1522
   fn.i___ es53-taming-frame.opt.js:96
   applyFeralFunction es53-taming-frame.opt.js:1507
   applyFeralFunction es53-taming-frame.opt.js:1535
   fn.i___ es53-taming-frame.opt.js:96
   t$_var es53-taming-frame.opt.js:1571
   Object.m___ es53-taming-frame.opt.js:404
   plugin_dispatchEvent es53-taming-frame.opt.js:1472
   fn.i___ es53-taming-frame.opt.js:96
   wrapper 
```

我该如何开始调试呢？我可以将项目 ID 提供给 google 的某个人以查看发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:56:28.783

希望有人会过来解释这个问题。在那之前，您可以去 google caja playground ( [http://caja.appspot.com/](http://caja.appspot.com/) ) 看看您的代码是否适用于最新版本的 caja。我相信 caja 的 gas 版本比最新版本晚了大约 3 周。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T15:03:26.420

现在可以通过使用 setSandboxMode(HtmlService.SandboxMode.IFRAME); 来解决该问题。并因此在您的项目中禁用 caja。

# java - 字符串索引越界异常

> ID：14583319
> 
> 赞同：0
> 
> 时间：2013-01-29T12:50:14.723
> 
> 标签：java

我正在尝试生成包含当前日期的名称、分支机构和城市的发票编号。我从 JComboboxes 和 SimpleDateFormat 收集了信息。但最后在我们连接所有值并将它们设置为 Jtextfield 之后，我得到字符串索引超出范围异常。

我是 java 新手，对它了解不多，无论我为此付出了多少努力，如下所示。我会感谢有兴趣支持我的人。靴子和花束都受欢迎。

```
private void bt_generateActionPerformed(java.awt.event.ActionEvent evt) {
    if (evt.getSource() == bt_generate) {

        if ((cb_bkname.getSelectedItem()
                .equals("<html><font color=\"red\">SELECT NAME</font></html>"))
            || (cb_brname.getSelectedItem()
                .equals("<html><font color=\"red\">SELECT BRANCH</font></html>"))
            || (cb_plname.getSelectedItem()
                .equals("<html><font color=\"red\">SELECT PLACE</font></html>"))
        ){

        } else {
            String datePrefix = new SimpleDateFormat("MMMM dd, YYYY")
                    .format(new Date());
            tf_rm_dt.setText(datePrefix);
            Object name = cb_bkname.getSelectedItem();
            String bn = name.toString().substring(0, 3);
            Object branch = cb_brname.getSelectedItem();
            String br = branch.toString().substring(0, 4);
            Object city = cb_bkname.getSelectedItem();
            String pl = city.toString().substring(0, 4);
            String curdt = new SimpleDateFormat("dd-MM-YY")
                    .format(new Date());
            tf_rm_id.setText("" + bn + "/" + br + "/" + "/" + curdt);
        }
    }

} 
```

StackTrace 如下：

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.StringIndexOutOfBoundsException: String index out of range: 4
    at java.lang.String.substring(String.java:1955)
    at myproj.DATAENTRY.bt_generateActionPerformed(DATAENTRY.java:2215)
    at myproj.DATAENTRY.access$2300(DATAENTRY.java:20)
    at myproj.DATAENTRY$24.actionPerformed(DATAENTRY.java:597)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:56:04.217

你的字符串之一是短：

错误在这 3 行之一中

```
String bn=name.toString().substring(0, 3);
String br=branch.toString().substring(0, 4);
String pl=city.toString().substring(0, 4); 
```

打印出字符串，并在执行 substring() 之前检查长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:14:36.667

这是一种从组合框中获取信息的低效且过于复杂的方法！您不能在连接之前将选择分配给一个对象（例如，作为枚举类型）吗？如果您知道选择是什么（希望您知道），那么您永远不需要使用子字符串！

# php - 浮点数返回奇怪的值

> ID：14583323
> 
> 赞同：1
> 
> 时间：2013-01-29T12:50:26.330
> 
> 标签：php, floating-point

> **可能重复：**
> [限制浮点精度问题的实践](https://stackoverflow.com/questions/3528042/practices-to-limit-floating-point-accuracy-problems)

当我将新的 totalSubs 列表添加到运行总计时，PHP 返回一个奇怪的值。我生成了以下输出（见第 40 行）：

```
1 The total currently '0' (integer) + new TotalSub '-26969.55' type(double) = total '-26969.55'
2 The total currently '-26969.55' (double) + new TotalSub '249.6' type(double) = total '-26730.05'
...
39 The total currently '-164.89' (double) + new TotalSub '61.95' type(double) = total '-112.94'
40 The total currently '-102.94' (double) + new TotalSub '98.71' type(double) = total '-5.3300000000009'
41 The total currently '-5.3300000000009' (double) + new TotalSub  '50' type(double) = total '45.769999999999' 
```

PHP生成是：

```
echo ($count++) . " The total currently '$totalTrans' (".gettype($totalTrans).") + new TotalSub '$totalVar' type(".gettype($totalVar).") = total '" . ($totalTrans + $totalVar) ."'<br />"; 
```

如何修复 00000000009？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:54:44.123

用于`printf`解决该问题并使您的代码同时呈现：

```
printf("%d The total currently '%.2f' (%s) + new TotalSub '%.2f' (%s) = total (%.2f)<br />",
       $count++,
       $totalTrans,
       gettype($totalTrans),
       $totalVal,
       gettype($totalVar),
       $totalTrans + $totalVar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:51:45.270

从我能看到的。
尝试将输入数据乘以 100，然后在最后将总数除以 100。

乘以 1 或 10 很可能不会纠正它，这可能是由于 2 位小数和使用 100 值现在是整数（**整数**）

请记住浮点数据类型（例如**DOUBLE**）不代表精确的数字并且是近似的。

您将来可以`bcmath()`用于数学计算，因为 using `number_format`() 与 using () 没有区别，`round`但不将其作为字符串返回。
[http://php.net/manual/en/book.bc.php](http://php.net/manual/en/book.bc.php)

# r - R中向量的输出类型

> ID：14583327
> 
> 赞同：4
> 
> 时间：2013-01-29T12:50:38.780
> 
> 标签：r, list, date, vector

我有一个关于 R 中向量的非常基本的问题。我想创建一个空向量并将日期附加到它。但是，R 将日期转换为“数字”，即

```
library(lubridate)
a <- c()
a <- c(a,now())
class(a) 
```

结果是

```
[1] "numeric" 
```

同时，这段代码正是我想要的：

```
 a <- c(now())
  a <- c(a,now())
  class(a) 
```

即班级现在是正确的：

> [1] "POSIXct" "POSIXt"

问题是我不想用任何日期初始化我的向量，即我希望它在开始时为空。

我尝试使用列表，然后将其“取消列出”（因为我想将这些日期作为参数传递给 max() 之后的函数），但它也给了我数字：

```
a  <- list()
a[[1]] <- now()
a[[2]] <- now()
class(unlist(a)) 
```

使用`array`对我也没有帮助。

因此我有点卡住了。我已阅读有关 r 中向量输出类型的文档，但找不到任何解决方案。如何创建一个空的日期向量，附加几个日期并最终获取日期？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:11:43.660

请记住，当您使用时，`c()`您不会初始化向量，而是创建一个`NULL`值。您需要使用`vector()`来启动一个向量，您可以在其中操作类：

```
> identical(c(),NULL)
[1] TRUE
> identical(c(),vector())
[1] FALSE 
```

除此之外，只要不涉及时区，@juba 的解决方案就可以了。如果有，您将获得以下信息：

```
> a <- vector()
> class(a) <- 'POSIXct'
> b <- as.POSIXct(as.character(Sys.time()),tz="GMT")
> b
[1] "2013-01-29 14:10:32 GMT"
> c(a,b)
[1] "2013-01-29 15:10:32 CET" 
```

为了避免这种情况，您最好复制属性，如下所示：

```
> attributes(X) <- attributes(b)
> a <- vector()
> b <- as.POSIXct(as.character(Sys.time()),tz="GMT")
> X <- c(a,b)
> attributes(X) <- attributes(b)
> X
[1] "2013-01-29 14:10:32 GMT" 
```

但无论如何，您根本不应该考虑这一点，原因很简单，附加向量是一个非常缓慢的过程，可能会给您带来麻烦。如果您必须在向量中保存 100 个日期，您最好使用 Paul Hiemstra 建议的 lapply/sapply 解决方案，或者您启动您的向量，例如：

```
> a <- vector("numeric",100)
> class(a) <- c('POSIXct','POSIXt') 
```

或者

```
> a <- vector("numeric",100)
> attributes(a) <- list(class=c("POSIXct","POSIXt"),tzone="CET") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:53:21.380

你可以试试这个：

```
library(lubridate)
a <- vector()
class(a) <- "POSIXct"
a <- c(a, now())
class(a)
[1] "POSIXct" "POSIXt" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:53:46.590

一般来说，没有必要从一个空向量开始。您可以创建一个带有日期的向量，如下所示：

```
date_vec = lapply(1:10, function(x) return(Sys.time()))
> date_vec                                                                  
[[1]]                                                                       
[1] "2013-01-29 13:53:29 CET"                                               

[[2]]                                                                       
[1] "2013-01-29 13:53:29 CET"                                               

[[3]]                                                                       
[1] "2013-01-29 13:53:29 CET"                                               

[[4]]                                                                       
[1] "2013-01-29 13:53:29 CET"                                               

[[5]]
[1] "2013-01-29 13:53:29 CET"

[[6]]
[1] "2013-01-29 13:53:29 CET"

[[7]]
[1] "2013-01-29 13:53:29 CET"

[[8]]
[1] "2013-01-29 13:53:29 CET"

[[9]]
[1] "2013-01-29 13:53:29 CET"

[[10]]
[1] "2013-01-29 13:53:29 CET" 
```

或者，我经常使用表示日期的字符串创建日期向量`strptime`。

# javascript - JQuery mobile 未将用户输入检查项的样式设置为与列表的其余部分相同

> ID：14583329
> 
> 赞同：1
> 
> 时间：2013-01-29T12:50:40.307
> 
> 标签：javascript, jquery, html, forms, jquery-mobile

我终于成功地将用户输入项添加到检查列表中。然而，当它们被添加时，它们并没有采用 Jquery Mobiles 风格。

这是正在发生的事情的屏幕截图

![在此处输入图像描述](../Images/ce6ce0cb3c63e59c3fbf98b4e6009ee3.png)

这是 HTML：

```
<h3>My items</h3>
<table id="myTable">
  <tr>
    <td>
      <label for="checkbox65">
        <input name="checkbox65" class="checkbox65" type="checkbox" />
          My stuff
      </label>
    </td>
 </tr> 
 <tr>
   <td>
     <fieldset data-role="controlgroup">
       <label for="textinput4">
         Add new item
        <input name="new_item" id="textinput4" placeholder="" value="" type="text" />
       </label>
     </fieldset>
   <button id="add">Add</button>
   /td>
  </tr>
  </table>​ 
```

这是将用户输入项添加到检查列表的脚本：

```
<script type="text/javascript">
$(document).on('click', '#add', function(e) {
   var $this = $(this);
   var $firstRow = $this.closest('table').find('tr:first');
   var $newRow = $firstRow.clone();

   var input = $newRow.find(':input').remove();
   input.prop('checked', false);
   $newRow.empty().append(input).append('&nbsp;' + $('#textinput4').val());

   $newRow.insertAfter($firstRow);
  });
</script> 
```

我读到了一个不同的问题，也许我可以包括

```
$('[type='submit']').button(); 
```

为了设置用户输入项的样式。但是，我不确定这是否适合我，或者我将把它放在我的脚本中的什么地方？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:52:50.507

这应该被使用：

```
$('[type="checkbox"]').checkboxradio(); 
```

如果您想了解有关此内容以及如何正确设置动态添加内容的更多信息，请查看我的博客**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，在那里您将找到有关增强动态添加的 jQuery Mobile 内容的所有信息。或者你可以在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:55:57.000

乍一看，您的代码有一个 jQuery 语法错误，它应该如下所示：

```
$('[type="submit"]').button(); 
```

# ffmpeg - 从 GIF 转换为 MP4 时的 FFmpeg 帧速率

> ID：14583330
> 
> 赞同：4
> 
> 时间：2013-01-29T12:50:40.730
> 
> 标签：ffmpeg

我有一个 GIF 图片。我正在尝试将其转换为 MP4。

```
ffmpeg -f image2 -r {delay_time_of_gif_between_each_frame}/1 -i temp/%05d.png -vcodec libx264 video.mp4 
```

与原始 GIF 相比，此 MP4 的运行速度不同。如何让它以相同的速度运行？

看来我在`-r`物业方面犯了错误。我玩过它，但没有得到任何有用的东西。我什至删除了它。仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:51:37.883

如果您已经知道后续帧之间的延迟时间，那么您需要取其倒数将其转换为帧速率。例如，如果每帧之间的时间为 40 毫秒（或 0.04 秒），则倒数将是 1 除以 0.04，即 25 fps。

您*不能*简单地将帧之间的时间除以 1，因为除以 1 会得到与以前相同的结果。

所以，再试一次：

```
ffmpeg -f image2 -r 1/0.04 -i temp/%05d.png -c:v libx264 out.mp4
ffmpeg -f image2 -r 25 -i temp/%05d.png -c:v libx264 out.mp4 
```

[请注意，默认输入帧速率`image2`无论如何都是 25，但这只是为了说明。]

此外，您还可以通过放在输入文件之后来更改输出视频的帧速率`-r` *，*这应该会有所不同。

```
ffmpeg -f images -i temp/%05d.png -c:v libx264 -r 25 out.mp4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T15:13:25.573

虽然这个问题有点老：

当前版本的 ffmpeg 会根据 gif 图像中的信息自动确定帧之间的延迟，因此无需在命令中设置帧率。

# php - 在从 IIS 托管站点连接的 NodeJS 上验证用户身份

> ID：14583331
> 
> 赞同：1
> 
> 时间：2013-01-29T12:50:42.383
> 
> 标签：php, javascript, node.js, authentication, websocket

我目前有一个过时的 CMS 系统，我正在尝试向其中添加实时聊天功能。CMS 使用 IIS、MSSQL 和 PHP 运行。

聊天功能将在运行 Nodejs 和 Socket.io 的单独 linux 机器上运行

我已经设法让 CMS 成功打开到节点服务器的连接，现在我需要某种方式来验证用户。

*   Node 服务器后面不会有数据库
*   Node 服务器将无法通过套接字访问 CMS
*   新 CMS 用户的可能性（非常常见）意味着我不能只将用户密码复制到节点服务器

我目前唯一的想法是将一组用户数据（id、姓名、电子邮件地址）放在一起，创建这些数据的散列，然后将数据和散列发送到 Node.js。然后，节点服务器将尝试对数据进行哈希处理，并根据 CMS 发送的哈希值对其进行验证。（显然 CMS 和 Node 都有一个预先确定的私有盐用于散列）

有没有更好的方法来实现这一点？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:55:21.063

一个好的经验法则是：**除非您是密码学家，否则不要推出自己的加密货币，即使如此，也要三思而后**行。

我的建议是这样的：

*   通过 HTTPS 在它们自己的子域上运行两台服务器（显然是同一个域）
*   在会话 cookie 上使用 *.domain.com cookie 域，带有 Secure 和 HttpOnly 标志，以便两个子域都可以看到它
*   将您的 PHP 会话以 JSON 格式保存到两个服务器都可以访问的外部键/值存储
*   然后节点服务器可以根据安全 cookie 中的 ID 简单地查找有效会话

# cakephp - 如何在 CakePHP 2.2 中关闭密码的 AuthComponent 自动哈希？

> ID：14583335
> 
> 赞同：0
> 
> 时间：2013-01-29T12:50:57.403
> 
> 标签：cakephp

在过去的 2 个小时里，我一直在为此头疼。基本上，我的用户表不称为**Users**而是**Members**。我已将此代码添加到我的 AppController.php 中，但密码总是在查询运行之前被散列。

我究竟做错了什么？

```
public $components = array(
    'Auth' => array(
        'loginAction' => array(
            'controller' => 'members',
            'action' => 'login'
        ),
        'authenticate' => array(
            'Form' => array(
                'fields' => array('username' => 'username', 'password' => 'password'),
                'userModel' => 'Member'
            )
        )
    )
); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:56:22.843

在 Cake 2.x 中，自动哈希密码默认是关闭的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:30:22.147

我认为你过于偏执了，法比安。您想关闭密码散列，以便检查用户登录系统是否正常工作，对吗？好吧，使用散列或未散列的密码登录没有区别。

假设我的密码是`Test123`. 如果散列被关闭，我能够登录的唯一方法是如果我输入`Test123`并且它在数据库中完全相同。如果散列是打开的，我的 SHA1 散列密码是`8308651804facb7b9af8ffc53a33a22d6a1c8ac2`，所以我可以登录的唯一方法是如果我输入与数据库匹配的密码的确切未散列表示。

在这两种情况下，只有一个确切的字符串可以让我登录。因此，如果它没有登录，那么您没有输入数据库中的正确密码，无论是散列还是未散列。

因此，这使我假设您正在尝试通过手动使用密码（例如`Test123`）预先填充数据库来进行测试，然后您尝试使用密码登录。当然，你不知道密码的散列版本，所以你把密码`Test123`输入数据库，然后当你尝试登录时，Cake 正在尝试使用散列版本`8308651804facb7b9af8ffc53a33a22d6a1c8ac2`并且登录不起作用。

您需要做的就是使用[在线 SHA-1 生成器](http://hash.online-convert.com/sha1-generator)生成密码。所以输入`Test123`，得到它给你的散列版本，然后把它放在你的数据库中。然后当你输入 登录时`Test123`，Cake 会对它进行哈希处理，并将其与数据库中的哈希版本匹配，然后你就可以登录了。

如果它没有登录，你要么输入了错误的密码，要么在数据库中存储了错误的哈希值。此外，请确保您的数据库密码字段是存储整个哈希的正确类型。CHAR(40) 是 SHA-1 密码的不错选择。

# python - 查找命令输出的自定义排序

> ID：14583336
> 
> 赞同：0
> 
> 时间：2013-01-29T12:50:58.950
> 
> 标签：python, bash

我正在尝试使用 unix“查找”命令获取排序的目录/文件列表。

```
# find . -type f 
.
./bin
./data
./data/disks
./inc
./inc/calls
./inc/calls/show
./inc/calls/show/system
./inc/calls/show/cli
./inc/calls/show/network
./inc/calls/show/stats
./inc/calls/services
./inc/calls/services/ntp
./inc/calls/services/tsa
./inc/calls/services/webgui
./inc/calls/services/engine
./inc/calls/system
./inc/calls/change
./inc/calls/change/password
./inc/calls/change/network
./inc/calls/disk
./inc/calls/disk/encr
./inc/etc 
```

我想对它进行排序：

```
./inc/calls/show/system \    
./inc/calls/show/cli \
./inc/calls/show/network \
./inc/calls/show/stats \
./inc/calls/services/ntp \
./inc/calls/services/tsa \
./inc/calls/services/webgui \
./inc/calls/services/engine \
./inc/calls/change/password \
./inc/calls/change/network \
./inc/calls/disk/encr \
./inc/calls/system \
./inc/calls/change \
./inc/calls/services \
./inc/calls/disk \
./inc/calls/show \
./inc/calls \
./data/disks \
./inc/etc \
./bin \
./data \
./inc 
```

哪个节点（目录/文件）有更多的子节点（目录/文件）应该是第一个......我想用bash或python来做......最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:57:24.590

匹配包含`/`字段数的行并将其添加到`/`用作分隔符的行中，对字段数进行排序并删除计数。

```
$ awk -F/ '/\//{print NF,$0}' file | sort -nrk1 | cut -d' ' -f2-
./inc/calls/show/system
./inc/calls/show/stats
./inc/calls/show/network
./inc/calls/show/cli
./inc/calls/services/webgui
./inc/calls/services/tsa
./inc/calls/services/ntp
./inc/calls/services/engine
./inc/calls/disk/encr
./inc/calls/change/password
./inc/calls/change/network
./inc/calls/system
./inc/calls/show
./inc/calls/services
./inc/calls/disk
./inc/calls/change
./inc/etc
./inc/calls
./data/disks
./inc
./data
./bin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:59:13.820

我会使用 python 并尝试转换：

```
a/b
a/c
b/e/f
b/e/g 
```

在类似的东西：

```
{'a': {'b': {}, 'c': {}},
'b': {'e': {'f': {}, 'g': {}}},
} 
```

为达到这个：

```
def add_list_to_dict(lst,d):
   key, lst = lst[0], lst[1:]
   if not key in d:
       d[key] = {}
   if lst:
       add_list_to_dict(lst,d[key])

d = {}
for path in paths:
    add_list_to_dict(path.split('/'),d) 
```

# python - 如何将输出转换为列表以计算其数量？

> ID：14583339
> 
> 赞同：2
> 
> 时间：2013-01-29T12:51:17.643
> 
> 标签：python, list

我编写了一个脚本来解析网页并获取其上的链接数量（“a”标签）：

```
import urllib
import lxml.html
connection = urllib.urlopen('http://test.com')
dom =  lxml.html.fromstring(connection.read())
for link in dom.xpath('//a/@href'):
    print link 
```

脚本的输出：

```
./01.html
./52.html
./801.html
http://www.blablabla.com/1.html
#top 
```

如何将其转换为列表以计算链接数量？我使用 link.split() ，但它对我有用：

```
['./01.html']
['./52.html']
['./801.html']
['http://www.blablabla.com/1.html']
['#top'] 
```

但我想得到：

`[./01.html, ./52.html, ./801.html, http://www.blablabla.com/1.html, #top]`

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:54:17.230

`link.split()`尝试拆分链接本身。但是您必须使用代表所有链接的实体。在你的情况下：`dom.xpath('//a/@href')`。

所以这必须帮助你：

```
links = list(dom.xpath('//a/@href')) 
```

并使用内置`len`函数获取长度：

```
print len(links) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T12:55:08.280

```
list(dom.xpath('//a/@href')) 
```

这将采用`dom.xpath`返回并将每个项目放入列表的迭代器。

# iphone - 如何在 iOS for iPhone SDK 中的 UIImage 上添加置换图像滤镜效果

> ID：14583349
> 
> 赞同：0
> 
> 时间：2013-01-29T12:51:41.417
> 
> 标签：iphone, ios, objective-c, image-processing

我正在尝试在`UIImage`. 我怎样才能做到这一点？请建议。

源图像： ![在此处输入图像描述](../Images/b43b323dac053120405167ac9c964133.png)

置换后的图像效果（失真）

![在此处输入图像描述](../Images/5601bfb5adaf53ce692e7cddfc618874.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:13:54.690

尝试[GPUImage](https://github.com/BradLarson/GPUImage)中提供的示例，

我没有检查过自己，但也许你会发现一些有用的东西。

# cmake - 将 Makefile 转换为 CMake

> ID：14583351
> 
> 赞同：1
> 
> 时间：2013-01-29T12:51:46.360
> 
> 标签：cmake

我正在尝试在 CMake 中复制以下行为，需要一点帮助...

我正在使用 gcc 编译，然后使用 ld 显式链接。原始 makefile 执行以下操作：

```
arm-linux-gcc -MD -Wa,-mcpu=arm7tdmi -Dgcc -c init.S
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c serial.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c timer.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c amd.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c intel.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c at25f1024.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c sst25vf020.c
arm-linux-gcc -MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -c main.c
arm-linux-ld -q --defsym ROBASE=0x00000000 -T init.lds -o init.elf init.o serial.o timer.o amd.o intel.o at25f1024.o sst25vf020.o main.o 
```

我的 CMakefileLists.txt 看起来像这样

```
cmake_minimum_required(VERSION 2.8)

project(bootStage2)

#add_definitions(ROBASE 

set(CMAKE_C_FLAGS "-MD -Wall -fno-common -fshort-enums -mcpu=arm7tdmi -fno-builtin -mapcs -O2 -Wl,-q -Wl,--defsym=ROBASE=0x00000000 -T ${bootStage2_SOURCE_DIR}/init.lds")

#add_definitions(ROBASE=0x00000000)

set(SRCFILES  
        serial.c
        timer.c
        amd.c
        intel.c
        at25f1024.c
        sst25vf020.c
        main.c
    )

set(CMAKE_init.elf_LINK_EXECUTABLE "/usr/bob/arm920t/usr/bin/arm-linux-ld")

add_executable( init.elf ${SRCFILES})

SET_TARGET_PROPERTIES(init.elf PROPERTIES LINKER_LANGUAGE C)

add_dependencies( init.elf
                  assemble_S
)

add_custom_target(assemble_S
                  COMMAND /usr/bob/arm920t/usr/bin/arm-linux-gcc -MD -Wa,-mcpu=arm7tdmi -Dgcc -c init.S
                  COMMENT "Assembling init.S"
                  WORKING_DIRECTORY ${bootStage2_SOURCE_DIR} 
```

如果我没有定义链接器 exe，那么 CMake 会尝试使用 gcc 来链接和分段链接错误。

当我告诉它使用 arm-linux-ld 时，cmake 输出抱怨没有要链接的文件，我敢肯定有更好的方法来做到这一点，有人有任何有用的提示吗？

干杯，

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:01:17.293

几年前我们遇到这个问题时发现的方法如下：

我们替换了 cmake 中的链接模板（我们使用了自己的链接器，但它也应该只添加参数）：

```
set(CMAKE_CXX_LINK_EXECUTABLE "${LINKER} ... <LINK_FLAGS> <OBJECTS> <LINK_LIBRARIES>")
set(CMAKE_C_LINK_EXECUTABLE ${CMAKE_CXX_LINK_EXECUTABLE}) 
```

... 我省略了我们的自定义参数。这里的关键是`<>`cmake 为每个要链接的目标填充的元素。

另请参见[此处](https://stackoverflow.com/questions/13415222/variables-with-angle-brackets-in-cmake-scripts)。

# javascript - 有没有办法在页面加载时禁用浏览器上的地址栏

> ID：14583366
> 
> 赞同：0
> 
> 时间：2013-01-29T12:52:30.040
> 
> 标签：javascript, html

基本上我正在为客户 wifi 创建一个登录页面，我们已经有一种方法可以让页面首先加载，现在我想更进一步。我希望客户在他们可以继续之前同意我们的使用政策，所以基本的东西，创建一个页面，添加 T&C 和一个复选框和一个接受按钮，选中复选框点击接受，你就在通往互联网的路上！

除了用户可以通过更改地址栏中的地址来绕过它。我想要做的是禁用任何地址更改，从而禁用地址栏

是否可以使用简单的javascript来做到这一点？有没有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:55:24.483

你不能锁定浏览器地址栏，不。

通常他们只是将每个页面请求（来自您的域除外）路由到您的页面，直到有人接受/验证

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T12:55:48.903

这对我有用：

```
<html>
  <script for="window" event="onload">
      window.open('main.jsp',
      'Window',
      'width=800,height=600,resizable=0,status=0,toolbar=0');
      // Hack to bypass the confirm alert on window close.
      window.opener = window.top;
      window.open('', '_self', '');
      window.close();
  </script>
</html> 
```

*这将在main.jsp*上打开一个功能降低的新窗口并关闭启动的窗口（来自*index.jsp*）。

而且 - 与流行的看法相反 - 新窗口没有**地址**栏。事实上，它也没有关闭框，但您可以更改它。

PS - 这可能只适用于 IE。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T12:54:40.980

您可以使用 javascript 确认框：

```
var result=confirm("Press a button!")
 if (result==true)
   {
   alert("You pressed OK!")
   }
 else
   {
   alert("You pressed Cancel!")
   }
 } 
```

并做出一些条件..如果用户按下确定然后做一些事情，否则你可以将他重定向到其他页面......尽管这些警报确实会干扰 UI 体验..

# asp.net-mvc - HTML5 输入类型和 asp.net MVC 框架

> ID：14583367
> 
> 赞同：1
> 
> 时间：2013-01-29T12:52:34.100
> 
> 标签：asp.net-mvc, html

我希望让我的 MVC 应用程序中的编辑器模板使用 HTML5 输入类型。该框架似乎已经完成了大约 80% 的工作，但有几件事我似乎无法实现（数字、占位符、URL 输入等的步长值）。

我敢肯定，其中很大一部分只是我不知道在哪里看，但是

1.  是否有我可以在视图模型上使用哪些属性来提供用于生成 html 的元数据的明确列表？

2.  有谁知道对此有帮助的项目/ nuget 包？我不反对写东西，而是宁愿使用已经尝试和测试过的东西。Dean Hume 的 ASP.net [MVC HTML5 Helpers Toolkit](http://mvchtml5.codeplex.com/)很接近，但我想在属性中放入尽可能多的信息，并让运行时通过 Html.EditorFor 完成工作（只是个人喜好）。

谢谢，

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:16:43.140

检查一下：[http](http://weblogs.asp.net/rashid/archive/2010/10/21/integrate-html5-form-in-asp-net-mvc.aspx)
://weblogs.asp.net/rashid/archive/2010/10/21/integrate-html5-form-in-asp-net-mvc.aspx 看看它是否可以帮助您入门。

# c++ - 如何基于枚举创建容器

> ID：14583368
> 
> 赞同：0
> 
> 时间：2013-01-29T12:52:45.153
> 
> 标签：c++, stl, enums, containers

好吧，我正在设计发布/订阅模式（这不是观察者模式！很多人对此感到困惑）。我的问题是：

我有主题的枚举：

```
 enum topics {gui, combat, physics}; 
```

然后对于每个主题，我需要 2 个容器。目前我是这样做的：

```
 std::vector <cSubscriber *> guiSubscribers;
  std::vector <cEvent> guiEvents; 
```

我想要做的是拥有一个使用枚举作为键的向量容器。我的意思是我可以通过以下方式访问它：

```
events[gui] //it gives me access to vector of gui events
subscribers[combat] //this gives me access to vector of combat subscribers 
```

[] 中的键必须是枚举中的值。有没有办法做到这一点，或者我需要为每个主题手动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:54:13.563

一种可能性是`std::map<topics, std::vector<cEvent>>`. 但是，这可能是多余的，因为您只有 3 个枚举值，编号为 0、1 和 2...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:18:53.457

如果事先知道元素的数量，是否真的需要使用向量？像这样的解决方案怎么样：

```
template<class T> struct topics {
    T gui, combat, physics
};

topics<cSubscriber *> guiSubscribers;
topics<cEvent> guiEvents; 
```

# html - 如何在树枝模板中直接获取输入元素的值

> ID：14583377
> 
> 赞同：0
> 
> 时间：2013-01-29T12:53:13.307
> 
> 标签：html, forms, symfony, twig

我的树枝模板中有这个表格：

```
<form id="search-box" action="/search" method="get">
    <input id="search-query" type="text" placeholder="Search..." name="search" role="textbox">
    <a id="search-btn" href="....."></a>
</form> 
```

我的目标是使用输入**id="search-query"的值来为****a id="search-btn"**创建 href

 **为此，我必须访问输入**id="search-query"**的值。

我试过了：

```
{{ form.search-query.value }} 
```

和

```
{{ search-box.search-query.value }} 
```

但这些都不起作用。我收到表单或搜索不存在的错误。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:10:30.097

一般来说，你可以用 jQuery 做到这一点：

```
var given_val = '';
var wanted_href = '';
given_val = $('input#search-query').val();
wanted_href = 'http://www.example.com/' + given_val;
$('a#search-btn').attr('href',wanted_href); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:11:19.323

你应该使用`{{ form.search-query.all.value }}`**

# freebase - 带有数据转储的 Freebase 评分

> ID：14583384
> 
> 赞同：3
> 
> 时间：2013-01-29T12:53:28.160
> 
> 标签：freebase, relevance

如果您使用 Freebase 搜索按名称获取任何实体的匹配项，您将获得按[相关性分数](http://wiki.freebase.com/wiki/Search_Cookbook#Scoring_and_Ranking)排序的结果。尝试例如[泰姬陵](http://dev.freebase.com/search?query=taj+mahal&lang=en&operator=any&scoring=entity&prefixed=true)。

我正在尝试使用 Freebase 数据转储获得类似的结果，因此在我的数据库中，与“泰姬陵”相关的主题将按相关性进行排序，即首先是建筑，其次是音乐家，依此类推。

是否有任何建议如何在不查询 Freebase 搜索 API 的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:27:47.693

您链接到的有关相关分数的 wiki 页面说：

> Freebase 实体具有在索引期间计算的固有相关性分数（排名），该分数是其在 Freebase 和 Wikipedia 中的入站和出站链接计数的函数。一些流行的 Freebase 实体也有一个由谷歌计算的流行度分数。默认情况下，两个分数在查询期间结合在一起。

这应该给你一个很好的想法从哪里开始。Freebase 入度和出度可以直接从转储中计算，但维基百科进/出度需要使用维基百科转储（或 Freebase 的 WEX 转储）。“谷歌计算的人气分数”显然是你无法复制的。

# java - 如何使用 java servlet 从 mysql 数据库中检索图像并将其显示在 HTML img 标记中？

> ID：14583385
> 
> 赞同：1
> 
> 时间：2013-01-29T12:53:29.373
> 
> 标签：java, html, mysql, servlets

如何使用 java servlet 从 mysql 数据库中检索图像并将其显示在 HTML img 标记中？还有那个 ima 标记应该放在表定义中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:02:27.587

编写一个 servlet，将其映射到类似的 url `showImage.html`，将图像名作为参数传递

`<img src="showImage.html?filename=new.jpg">`

然后从文件中读取 byte[] 并写入 servlet 代码中的响应 OutputStream。

`response.getOutputStream().write(bytes);`

从文件中获取字节 []

```
 RandomAccessFile f = new RandomAccessFile("c:\images\pic1.png", "r");
 byte[] bytes = new byte[(int)f.length()];
 f.read(bytes);
 response.getOutputStream().write(bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:57:28.190

类似于下面的代码：

```
public void doGet(HttpServletRequest request, HttpServletResponse response) 
  throws IOException,ServletException {

     Blob image = null;
      Connection con = null;
      Statement stmt = null;
      ResultSet rs = null;
      ServletOutputStream out = response.getOutputStream();
      try {
      Class.forName("com.mysql.jdbc.Driver");
      con = DriverManager.getConnection("jdbc:mysql://127.0.0.0:3306/
       example","root","root"); // localhost:<defaultport>
      stmt = con.createStatement();
      rs = stmt.executeQuery("select image from pictures where  id = '2'");
      if (rs.next()) {
      image = rs.getBlob(1);
      } else {
      response.setContentType("text/html");

      out.println("<font color='red'>image not found for given id</font>");

      return;
      }
      response.setContentType("image/gif");
 InputStream in = image.getBinaryStream();
  int length = (int) image.length();
  int bufferSize = 1024;
  byte[] buffer = new byte[bufferSize];
  while ((length = in.read(buffer)) != -1) {
  out.write(buffer, 0, length);
  }
  in.close();
  out.flush();

} catch (Exception e) {
  response.setContentType("text/html");
  out.println("<html><head><title>Unable To Display image</title></head>");
  out.println("<body><h4><font color='red'>Image Display Error=" + e.getMessage() +
   "</font></h4></body></html>");
  return;
  } finally {
  try {
  rs.close();
  stmt.close();
  con.close();
  } 
```

# gnome - 我可以作为 gnome-session 的孩子启动 tmux 吗？

> ID：14583386
> 
> 赞同：3
> 
> 时间：2013-01-29T12:53:30.763
> 
> 标签：gnome, tmux

我正在运行 Ubuntu 并使用`gnome-terminal`并希望以`tmux`这样一种方式运行，即它可以使用所有`gnome-session`环境，就像打开一个新的终端窗口一样。例如使用无密码的 ssh。

问题似乎是流程层次结构......

在新窗口中`gnome-terminal`：

```
$ pstree -ps $$
init(1)───lightdm(1825)───lightdm(18486)───gnome-session(18552)───gnome-terminal(18626) 
```

一旦我进入一个*新* `tmux`会话（即使在上面的终端窗口中：

```
$ pstree -ps $$
init(1)───tmux(15798)───bash(21770) 
```

`tmux`似乎是 init 的直接子代，而不是在会话的进程层次结构中。有没有办法让它作为一个孩子被创造出来`gnome-session`？

**编辑：**下面的好答案（接受的答案）！但是，我想我会包含一个我在收到将 tmux 的所有子 bash 进程更新到最新环境的答案后编写的函数：

```
#!/bin/bash

tmup () 
{ 
    echo -n "Updating to latest tmux environment...";
    export IFS=",";
    for line in $(tmux showenv -t $(tmux display -p "#S") | tr "\n" ",");
    do
        if [[ $line == -* ]]; then
            unset $(echo $line | cut -c2-);
        else
            export $line;
        fi;
    done;
    unset IFS;
    echo "Done"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:07:37.457

*tmux*服务器调用*daemon(3)*将自己与启动它的进程（即初始*tmux*客户端）分离。这不是可选的，因此在*daemon(3)*完成双分叉和中间退出之后，服务器将始终重新设置为 PID 1（例如*init* ） 。

 *一般来说，*tmux*服务器不再直接“连接”到*gnome-session*虽然是（幸存的）进程的父级，但这并不重要。

在*ssh*的情况下，无需重新输入密码即可使用密钥的能力依赖于对*ssh-agent*进程的访问。*ssh*实例查找 SSH_AUTH_SOCK 环境变量以了解在哪里联系可以为其提供密钥的*ssh 代理*。*gnome-session*可能会安排启动*ssh-agent*并使用适当的 SSH_AUTH_SOCK 值填充其环境。当您启动各种进程时，此环境会从父级继承到子级。这样，*tmux*服务器也会继承 SSH_AUTH_SOCK 值（从最初的*tmux*客户端，它从一个 shell 中获取它，它从*gnome-terminal*，它是从*gnome-session*获得的）。

但是，当您附加到从不同环境启动的*tmux会话时，就会出现问题。*考虑以下场景，这暗示了*tmux*服务器的 PID 低于*gnome-session*的 PID ：

1.  登录到 GUI 会话。
    *gnome-session*启动一个*ssh-agent*并`SSH_AUTH_SOCK=foo`在其环境中进行配置；该值将由其所有未来的子代继承。
2.  您启动一个*tmux*服务器（通过 shell 和*gnome-terminal*）。*tmux*服务器继承
    ；它将被传递给它的子进程（例如，在*tmux*会话中运行的 shell）。*`SSH_AUTH_SOCK=foo`*
***   您从*tmux*会话断开连接并注销您的 GUI 会话。*tmux*服务器及其子节点仍然具有，但
    该值可能不再有效（当*gnome-session*结束时，它可能会杀死它启动的*ssh-agent ）。**`SSH_AUTH_SOCK=foo`*****   稍后，您重新登录到 GUI 会话。
    这次*gnome-session*设置`SSH_AUTH_SOCK=bar`并将其传递给它的孩子。*   您重新连接到您的*tmux*会话。
    此时，您拥有`SSH_AUTH_SOCK=bar`“外部” *tmux*和`SSH_AUTH_SOCK=foo`“内部”会话。这可能是您遇到问题的地方。*****

 **实际上，由于*tmux*服务器已经超过了原始 GUI 会话，因此它最初继承的任何特定于该会话的环境变量都可能无效（除非它们碰巧在您下次登录 GUI 会话时使用完全相同的值）。

幸运的是，*tmux*具有处理这种情况的功能。session 选项指定了一个环境变量列表，当客户端创建或附加到会话时，这些`update-environment`环境变量会被复制到“会话环境”中（或从中删除）。SSH_AUTH_SOCK 是此选项默认值的一部分，因此在您重新附加时会更新。但是，*tmux*只能更新它的“会话环境”（它将被该会话的任何**新**子代继承）。

不幸的是，*tmux*无法更新属于该会话的任何**现有**进程（事实上，这是不可能的，缺少可以修补已运行进程内部的调试工具）。因此，在上述情况之后在 Windows/窗格中运行的任何现有 shell 都可能使用无效的 SSH_AUTH_SOCK。*ssh*不会抱怨无效值，它只会提示您输入适当的密钥密码。

您可能会尝试做的是从会话环境中提取 SSH_AUTH_SOCK 的值，并使用如下命令将其合并到旧会话中预先存在的 shell 中：

```
 SSH_AUTH_SOCK=$(tmux show-environment | awk '/^SSH_AUTH_SOCK=/ { sub(/.*=/,""); print }') 
```

If you are having issues related to other environment variables, then you may need to add them to `update-environment` (e.g. `set-option -ga update-environment ' FROBNIZ'` in your `~/.tmux.conf`) and do something similar to copy the values into any existing shells after you reattach from a different context.***

# ios - 使用 RestKit 0.20 的对象映射关系

> ID：14583393
> 
> 赞同：0
> 
> 时间：2013-01-29T12:54:11.097
> 
> 标签：ios, json, restkit

我正在尝试在我的 iOS 应用程序中使用 RestKit 0.20 从服务器读取数据并收到以下错误：

```
//Error

`… I restkit:RKLog.m:34 RestKit logging initialized...`
`… I restkit.support:RKMIMETypeSerialization.m:115 JSON Serialization class 'RKNSJSONSerialization' detected: Registering for MIME Type 'application/json`
`... T restkit.network:RKHTTPRequestOperation.m:139 GET '(null)':
request.headers={
    Accept = "application/json";
    "Accept-Language" = "en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8";
    "User-Agent" = "XXXXX/1.0 (iPhone Simulator; iOS 5.0; Scale/1.00)";
}
request.body=(null)`

`... E restkit.network:RKHTTPRequestOperation.m:150 GET '(null)' (0):
error=Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x6c9d570 {NSUnderlyingError=0x6c9d460 "bad URL", NSLocalizedDescription=bad URL}
response.body=(null)`
`... E restkit.network:RKObjectRequestOperation.m:270 Object request failed: Underlying HTTP request operation failed with error: Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x6c9d570 {NSUnderlyingError=0x6c9d460 "bad URL", NSLocalizedDescription=bad URL}`

`... Hit error: Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0x6c9d570 {NSUnderlyingError=0x6c9d460 "bad URL", NSLocalizedDescription=bad URL}` 
```

这是从服务器收到的 JSON：

```
[ {
    "array1" : [ {
    "a1prop1" : 1,
    "a1prop2" : "prop21val",
   }, {
     "a1prop1" : 2,
     "a1prop2" : "prop22val",
    }, {
     "a1prop1" : 3,
     "a1prop2" : "prop23val",
    } ],
  "property1" : prop1val,
  "property2" : "prop2val",
  "property3" : "prop3val",
} ] 
```

使用 RestKit 的映射：

```
-(void) getData {
………………...
NSURL *baseURL = [NSURL URLWithString:stringURL];

AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
[client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];
[objectManager setAcceptHeaderWithMIMEType:RKMIMETypeJSON];

RKObjectMapping *array1Mapping = [RKObjectMapping mappingForClass:[ArrayOneClass class]];
[array1Mapping addAttributeMappingsFromDictionary:@{
 @"a1Prop1" : @"a1Prop1",
 @"a1Prop2" : @"a1Prop2",
 }];

RKObjectMapping *mainObjectMapping = [RKObjectMapping mappingForClass:[MainObjectClass class]]
[mainObjectMapping addAttributeMappingsFromDictionary:@{
 @"property1" : @"property1",
 @"property2" : @"property2",
 @"property3" : @"property3",
 }];

RKRelationshipMapping *mainObjRelationMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"array1" toKeyPath:@"array1" withMapping:array1Mapping];
[mainObjectMapping addRelationshipMappingWithSourceKeyPath:@"array1" mapping: mainObjRelationMapping.mapping];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mainObjectMapping pathPattern:nil
                                                                                       keyPath:nil
                                                                                   statusCodes:[NSIndexSet indexSetWithIndex:200]];
[objectManager addResponseDescriptor:responseDescriptor];

NSString *pathStr = [NSString stringWithFormat:@"/api/getAllObjects"];

[objectManager getObjectsAtPath:pathStr
                     parameters:nil
                        success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                            NSLog(@"...success");
                        }
                        failure:^(RKObjectRequestOperation *operation, NSError *error) {
                            NSLog(@"Hit error: %@", error);
                        }];

} 
```

主要对象类：

//MainObjectClass.h

```
 @interface MainObjectClass : NSObject{
     int property1;
     NSString * property2;
     NSString * property3;
     NSSet *array1;
    }

@property (nonatomic) int property1;
@property (nonatomic, retain) NSString * property2;
@property (nonatomic, retain) NSString * property3;
@property (nonatomic, retain) NSSet *array1;

- (NSDictionary*)elementToPropertyMappings;
- (NSDictionary*)elementToRelationshipMappings;
@end 
```

//MainObjectClass.m

```
@implementation MainObjectClass

@synthesize property1, property2, property3, array1;
- (NSDictionary*)elementToPropertyMappings {
    return [NSDictionary dictionaryWithObjectsAndKeys:
        @"property1", @"property1",
        @"property2", @"property2",
        @"property3", @"property3",
        nil];
}
- (NSDictionary *)elementToRelationshipMappings {
    return [NSDictionary dictionaryWithObjectsAndKeys:
        @"array1", @"array1",
        nil];
}
@end 
```

谁能告诉我为什么这没有产生正确的请求？它根本没有击中服务器。我尝试了没有关系映射的简单 get/post 方法，它们都可以正常使用 RestKit 映射。欣赏您的观点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T07:00:58.660

试试这个： - 使用属性`RKObjectManager`

```
objectManager.serializationMIMEType = RKMIMETypeJSON; 
```

# spring - maven依赖spring-data-rest-webmvc后引用log4j.xml坏了，包缩写

> ID：14583403
> 
> 赞同：1
> 
> 时间：2013-01-29T12:54:38.297
> 
> 标签：spring, logging, spring-data-rest

我的 (java) Spring 3 项目有问题：

我已经在不再使用标准 log4j.xml 的“spring-data-rest-webmvc”（版本 1 到 1.0.0-RC3）中包含了一个 maven 依赖项。相反，它似乎使用了一些其他属性日志文件（我找不到），而不是在我的包中，也没有在 spring-data-rest-webmvc 源中。

加上日志链接问题，包名都是缩写的，我觉得这很奇怪（至少出乎意料）。

我确实想使用这个 Spring 包轻松地创建宁静的 Web 服务。

我想在使用 spring 包时控制我的 log4j 属性文件。顺便说一句，似乎使用了三个日志系统（log4j、slf4j 和 commons-logging），应该不是问题，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:51:30.837

没有代码很难判断，但最有可能发生的是，当您添加 spring-data-rest-webmvc 依赖项时，您的项目已经依赖于 logback-classic。

如果您将具有以下内容的文件 logback.xml 放在 log4j.xml 旁边，log4j 将再次被拾取。

```
<configuration>
<appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>
            %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
        </pattern>
    </encoder>
</appender>
<logger name="org.springframework.data.rest" level="INFO" />
<root level="INFO">
    <appender-ref ref="stdout" />
</root>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:26:55.620

或者，要摆脱这个 DEBUG 级别的输出，只需排除 logback 依赖项。在 Maven 中它将是：

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-rest-webmvc</artifactId>
    <exclusion>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
    </exclusion>
</dependency> 
```

# spring-security - Spring Security 中的 LDAP + HttpBasicAuth 问题

> ID：14583409
> 
> 赞同：0
> 
> 时间：2013-01-29T12:54:47.157
> 
> 标签：spring-security, ldap, basic-authentication

我有这样的配置：

```
<security:http auto-config="true" use-expressions="true">
    <security:intercept-url pattern="/index.jsp" access="isAuthenticated()"/>
    <security:http-basic/>
</security:http> 
```

然后，BasicAuthenticationFilter

```
<bean id="basicAuthenticationFilter"
      class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter">
    <property name="authenticationEntryPoint" ref="BauthenticationEntryPoint"/>
    <property name="authenticationManager" ref="BauthenticationManager"/>
</bean> 
```

入口点和经理是这样描述的：

```
<bean id="BauthenticationEntryPoint"   class="org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint">
    <property name="realmName" value="Name Of Your Realm"/>
</bean>
<bean id="BauthenticationManager" class="org.springframework.security.authentication.ProviderManager">
    <property name="providers">
        <list>
            <ref local="ldapAuthProvider"/>
        </list>
    </property>
</bean> 
```

最后

```
 <bean id="ldapAuthProvider"
      class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <constructor-arg>
        <bean class="org.springframework.security.ldap.authentication.BindAuthenticator">
            <constructor-arg ref="contextSource"/>
            <property name="userDnPatterns">
                <list>
                    <value>sAMAccountName={0}</value>
                </list>
            </property>
        </bean>
    </constructor-arg>
    <constructor-arg>
        <bean
                class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
            <constructor-arg ref="contextSource"/>
            <constructor-arg value=""/>
        </bean>
    </constructor-arg>
</bean> 
```

当我尝试访问 /index.jsp 时，我显示了一个 stadart http auth 窗口，它要求我输入用户名和密码。当我将其输入表单并按 Enter 时，什么也没有发生 - 身份验证窗口只是重新加载，仅此而已。

我在哪里做错了？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:14:52.317

独立声明 bean 并不意味着它们将覆盖命名空间配置中的等效 bean。例如，`<http-basic />`将添加 a`BasicAuthenticationFilter`到过滤器链（和入口点），并且您已声明自己的实例这一事实将无效。

就目前而言，您的命名空间配置忽略了您已声明的过滤器和身份验证 bean。您可以尝试使用：

```
<http use-expressions="true" authentication-manager-ref="BauthenticationManager">
    <intercept-url pattern="/index.jsp" access="isAuthenticated()"/>
    <http-basic />
</http> 
```

这将使配置使用您的身份验证管理器。或者，您可以只使用身份验证管理器的标准命名空间语法并删除您的`BauthenticationManager`bean：

```
<authentication-manager>
    <authentication-provider ref="ldapAuthProvider" />
</authentication-manager> 
```

无论哪种方式，您都应该阅读参考手册的[命名空间章节](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-config)，以大致了解它是如何工作的。

# c - 如何判断给定路径是目录还是文件？

> ID：14583410
> 
> 赞同：2
> 
> 时间：2013-01-29T12:54:54.020
> 
> 标签：c, linux, file-io

我需要一个 C/C++ 函数，例如[Python](http://docs.python.org/2/library/os.path.html#os.path.isdir)中的*os.path.isdir(path)*。

我发现了一个非常相似的[问题](https://stackoverflow.com/questions/146924/how-can-i-tell-if-a-given-path-is-a-directory-or-a-file-c-c)，但我使用的是 Linux。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T12:57:29.670

POSIX 解决方案是[`stat()`](http://linux.die.net/man/2/stat)：

> 这些函数返回有关文件的信息。

基本上，你给它一个实例`struct stat`，如果调用成功（首先检查这个！）你会得到描述文件的各种字段。

然后，您可以使用`S_ISDIR()`该字段上的宏`st_mode`来确定它是否是一个目录。我怀疑这就是 Python 在幕后所做的。

# loops - Google 应用程序脚本 - 遍历元素/小部件/控件

> ID：14583420
> 
> 赞同：2
> 
> 时间：2013-01-29T12:55:19.263
> 
> 标签：loops, google-apps-script

有人可以告诉我，如何遍历我自己使用 app.create[Widget] 命令创建的 UI 元素/小部件？例子：

```
function doGet(e) {
  var app = UiApp.createApplication();

  var panelMain = app.createVerticalPanel().setId("PanelMain");
  app.add(panelMain);

  var rb1 = app.createRadioButton().setId("Rb1");
  panelMain.add(rb1);

  var rb2 = app.createRadioButton().setId("Rb2");
  panelMain.add(rb1);

  *************************************************************
   AND NOW I WANT TO ITERATE THROUGH ALL CREATED ELEMENTS
    (MAINPANEL,RB1, RB2)

   Something like:
   var allElemts = app.getElements();
   for (var ele in allElements){
   Logger.log(ele.name);
   Logger.log(ele.type);
   ........
   }

  *******************************************************
  **** DO SOMEONE KNOW - HOW TO DO *************************
  ***************************************************************

  return app;
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T14:46:45.417

因为没有像你想要的那样获取小部件上的元素的功能。

最好的选择是使用创建元素时使用的 ID，例如：

```
function doGet(e) {

  var app = UiApp.createApplication();
  var ids = [];

  var panelMain = app.createVerticalPanel().setId("PanelMain");
  app.add(panelMain);

  var rb1 = app.createRadioButton().setId("Rb1");
  panelMain.add(rb1);

  var rb2 = app.createRadioButton().setId("Rb2");
  panelMain.add(rb1);
  //store collection of ids from all widget
  ids.push(panelMain.getId());
  ids.push(rb1.getId());
  ids.push(rb2.getId());

  var allElemts = app.getElements();
  for (var id in ids){
    var element = ids[id];
    Logger.log(element.name);
    Logger.log(element.type);
  }
      return app; 
```

}

# c# - 在基本的 c# 控制台应用程序上不断出现错误

> ID：14583422
> 
> 赞同：0
> 
> 时间：2013-01-29T12:55:20.743
> 
> 标签：c#, visual-studio-2008

我一直在尝试学习 c#，但一直遇到问题。本质上，我正在尝试学习如何创建一个执行某些功能并被应用程序调用以执行该功能的类。

我最终遇到的错误（有很多其他人，但我试图尝试“修复”它们）是

`is a 'type' but is used like a variable`

到目前为止我整理的代码是；

```
 namespace FirstConsoleApplication
    {

        class Program
        {
            public class checkConvertValue
            {
                public string formula1(string x)
                {
                    Int32 isnumber = 0;
                    bool canConvert = Int32.TryParse(x, out isnumber);
                    string returnValue;
                    if (canConvert == true)
                    {
                        int val3 = Int32.Parse(x);
                        switch (val3)
                        {
                            case 50:
                                returnValue = "yep its 50";
                                break;
                            case 51:
                                returnValue = "hmmm.... its 51... what are you gonna do about that??";
                                break;
                            case 52:
                                returnValue = "lets not get sloppy now...";
                                break;
                            default:
                                returnValue = "nope, its definately something else";
                                break;
                        };
                    }
                    else
                    {
                        returnValue = "Thats not a number";
                    };
                        return returnValue;
                }
            }
           static void Main(string[] args)
            {
                string num;
                string result1;
                do
                {
                    Console.WriteLine("Guess what the value is, hint... its integer and between 1 and 100");

                    num = Console.ReadLine();
                    result1 = checkConvertValue(num);
                    Console.WriteLine(result1);

                } while (result1 != "yep its 50");
                Console.ReadLine();
            }
        }

} 
```

有人可以让我知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:00:20.387

你大概的意思是：

```
result1 = new checkConvertValue().formula1(num); 
```

或者，如果您将其 ( `formula1`) 设为`static`方法：

```
result1 = checkConvertValue.formula1(num); 
```

顺便提一句; `x`解析两次没有意义；如果`TryParse`成功，则整数值存储在`isnumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:04:07.827

您正在尝试调用*类*checkConvertValue ，就好像它是一种方法一样。要实际调用该方法，您需要从类*checkConvert*值的实例调用*formula1方法。*试试这个：

 *```
num = Console.ReadLine();
checkConvertValue classReference = new checkConvertValue();
result1 = classReference.formula1(num);
Console.WriteLine(result1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:00:52.227

这里有几件事是错误的。

*   `checkConvertValue`不包含采用 num 的构造函数（假设它是一个字符串），我认为您打算调用`formula(...)`

*   您需要创建一个实例，`checkConvertValue`然后`formula`从中调用方法，或者将类和方法设为静态并像这样调用它`checkConvertValue.formula1`......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:00:56.953

object`checkConvertValue`是一个类，但您将其用作方法。

您需要先声明它的一个实例，然后才能使用该方法`formula1`

```
num = Console.ReadLine();
checkConvertValue chkVal = new checkConvertValue();
result1 = checkConvertValue.formula1(num);
Console.WriteLine(result1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T13:02:06.077

您试图通过类名访问该函数，这是错误的。你必须这样做

```
result1 = new checkConvertValue().formula1(num); 
```*

# sql - 计算sql中一个字符的出现次数

> ID：14583425
> 
> 赞同：0
> 
> 时间：2013-01-29T12:55:29.560
> 
> 标签：sql, sql-server, tsql

我正在尝试计算`'*'`字符串中的数量，但它给了我错误的计数

```
DECLARE @LongSentence VARCHAR(MAX)
DECLARE @FindSubString VARCHAR(MAX)
SET @LongSentence = 'Pravin Gaonkar: 29 Jan 2013 17:29:22 :  *'
SET @FindSubString = '*'
SELECT LEN(@LongSentence) - LEN(REPLACE(@LongSentence,@FindSubString,''))[Count] 
```

输出

```
Count
3 
```

**原创 - 1 但它给了我 3 计数**

数据库 SQL 服务器 2008

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:59:16.907

您的查询的问题是替换`*`字符串上的字符串会使它以三个尾随空格结尾，并且`LEN`不计算在内。所以你的结果是3。尝试使用`DATALENGTH`：

```
DECLARE @LongSentence VARCHAR(MAX)
DECLARE @FindSubString VARCHAR(MAX)
SET @LongSentence = 'Pravin Gaonkar: 29 Jan 2013 17:29:22 :  *'
SET @FindSubString = '*'

SELECT DATALENGTH(@LongSentence) - 
       DATALENGTH(REPLACE(@LongSentence,@FindSubString,''))[Count] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T13:30:59.437

这是 Oracle 查询。我不确定您的 SQL 版本中是否可以使用可以代替 LEVEL 的 LEVEL 或 ROWNUM。但它仍然可以帮助您：

```
SELECT count(*) cnt FROM
(
 SELECT DISTINCT(Instr('Pravin Gaonkar: 29 Jan 2013 17:29:22 :  *', '*', LEVEL)) char_pos
   FROM dual
 CONNECT BY LEVEL <= Length('Pravin Gaonkar: 29 Jan 2013 17:29:22 :  *') 
)
WHERE char_pos > 0
/

SQL>

CNT
---
  1 
```

SQL Server 2008 - 使用层次结构方法（GetRoot 和 GetLevel ...）查询层次结构表 - 相当于我的示例中使用的 Oracle 层次结构：http: [//msdn.microsoft.com/en-us/library/3b4f7dae-65b5- 4d8d-8641-87aba9aa692d(v=sql.100)](http://msdn.microsoft.com/en-us/library/3b4f7dae-65b5-4d8d-8641-87aba9aa692d(v=sql.100))

# homebrew - brew install python3 失败

> ID：14583427
> 
> 赞同：1
> 
> 时间：2013-01-29T12:55:32.383
> 
> 标签：homebrew, python-3.3

我想用自制软件安装 python3.3。

```
brew install python3 
```

但失败了。我需要安装 Xcode 吗？

```
Warning: A newer Command Line Tools for Xcode release is avaliable
You should install the latest version from: http://connect.apple.com
==> Downloading http://python.org/ftp/python/3.3.0/Python-3.3.0.tar.bz2
Already downloaded: /Library/Caches/Homebrew/python3-3.3.0.tar.bz2
==> ./configure --prefix=/usr/local/Cellar/python3/3.3.0 --enable-ipv6 --datarootdir=/usr/local/Cellar/python3/3.3.0/share --datadir=/usr/local/Cellar/python3
==> make
  File "<frozen importlib._bootstrap>", line 562, in module_for_loader_wrapper
  File "<frozen importlib._bootstrap>", line 854, in _load_module
  File "<frozen importlib._bootstrap>", line 988, in get_code
ValueError: unmarshallable object
make: *** [Lib/_sysconfigdata.py] Segmentation fault: 11

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting

These open issues may also help:
    https://github.com/mxcl/homebrew/issues/16848 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:58:41.100

答案就在错误中。安装 X-Code 并更新命令行工具。这是回答您问题的相关问题。

[Xcode 4.4 及更高版本安装命令行工具](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)

# c++ - VS下构建Velocis 3.5示例错误

> ID：14583428
> 
> 赞同：1
> 
> 时间：2013-01-29T12:55:32.913
> 
> 标签：c++, c, visual-studio, velocis-rds

我使用以下 make 文件构建标准示例

```
default: dquery.exe
CFLAGS = /DNT_INTEL /DWIN32_NT /DWIN32 -c /W3 /Od /Zi /I..\common /DNT /DMSC /MD
OBJS = dquery.obj
dquery.obj: dquery.c
    cl $(CFLAGS) dquery.c
dquery.exe: $(OBJS) 
    link -machine:IX86 user32.lib advapi32.lib netapi32.lib /DEBUG /DEBUGTYPE:BOTH -out:dquery.exe /STACK:3000,3000 $(OBJS) ..\lib\rdscli.lib ..\lib\util.lib 
```

并且没有问题。接下来，我使用 Visual Studio 6 或 2010 为该示例创建新项目，尝试应用 make 文件中的所有参数并获取这样的命令行选项

对于编译器：

```
/Od /I "..\common" /D "WIN32" /D "_DEBUG" /D "_CONSOLE" /D "_MBCS" /Gm /EHsc /RTC1 /MDd /Fo"Debug\\" /Fd"Debug\vc90.pdb" /W3 /nologo /c /Wp64 /ZI /TP /errorReport:prompt 
```

对于链接器：

```
/VERBOSE /OUT:"Debug\dquery2.exe" /INCREMENTAL /NOLOGO /LIBPATH:"..\lib" /MANIFEST /MANIFESTFILE:"Debug\dquery2.exe.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"d:\Piniutin\samples\dquery2\Debug\dquery2.pdb" /SUBSYSTEM:CONSOLE /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:PROMPT netapi32.lib rdscli.lib util.lib  kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib 
```

链接器打印一些错误消息，如下所示：

```
dquery.obj : error LNK2019: unresolved external symbol _SQLConnect referenced in function _main 
```

在这种情况下，链接器要么找不到库文件，要么在库中找不到函数。函数 _SQLConnect 存在于 rdscli.lib 中，但链接器无法识别它。
我该如何解决这个问题？

提前致谢

# python-2.7 - 无法使用 python scrapy ImagePipeline 访问 process_item

> ID：14583431
> 
> 赞同：1
> 
> 时间：2013-01-29T12:55:42.940
> 
> 标签：python-2.7, scrapy

我正在尝试使用 python scrapy 从网站源中获取一些图像。

整个事情都很好，除了我的管道中的 process_item 方法没有被访问。

这是我的文件：

设置.py：

```
BOT_NAME = 'dealspider'
SPIDER_MODULES = ['dealspider.spiders']
NEWSPIDER_MODULE = 'dealspider.spiders'

DEFAULT_ITEM_CLASS = 'dealspider.items.DealspiderItem'

ITEM_PIPELINES = ['scrapy.contrib.pipeline.images.ImagesPipeline', dealspider.ImgPipeline.MyImagesPipeline']

IMAGES_STORE = '/Users/Comp/Desktop/projects/ndailydeals/dimages/full' 
```

图像管道：

```
class MyImagesPipeline(ImagesPipeline):

    def get_media_requests(self, item, info):
        print "inside get_media_requests"
        for image_url in item['image_urls']:

            yield Request(image_url)

    def item_completed(self, results, item, info):

        image_paths = [x['path'] for ok, x in results if ok]
        if not image_paths:
            raise DropItem("Item contains no images")
        item['image_paths'] = image_paths
        print "inside item_completed"
        return item

    def process_item(self, item, spider):
        if spider.name == 'SgsnapDeal':
            print "inside process_item"
            # some code not relevant to the qn
            deal = DailyDeals(source_website_url=source_website_url, source_website_logo=source_website_logo, description=description, price=price, url=url, image_urls=image_urls, city=city, currency=currency)
            deal.save() 
```

在运行爬虫时没有得到“内部 process_item”。我也尝试在 scrapy.contrib.pipeline.images.py 文件中添加 process_item 函数，但这也不起作用！

```
def process_item(self, item, info):
    print "inside process"
    pass 
```

问题：一切正常，下载图像，设置 image_paths 等，我知道 get_media_requests 和 item_completed 在 MyImagesPipeline 中有效，因为一些打印语句，但不是 process_item！任何帮助将非常感激..

编辑：这是其他相关文件：

蜘蛛：

```
from scrapy.spider import BaseSpider
from dealspider.items import DealspiderItem
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.pipeline.images import ImagesPipeline

class SG_snapDeal_Spider(BaseSpider):
    name = 'SgsnapDeal'
    allowed_domains = ['snapdeal.com']
    start_urls = [
        'http://www.snapdeal.com',
        ]

    def parse(self, response):
        item = DealspiderItem()

        hxs = HtmlXPathSelector(response)
        description = hxs.select('/html/body/div/div/div/div/div/div/div/div/div/a/div/div/text()').extract()  
        price = hxs.select('/html/body/div/div/div/div/div/div/div/div/div/a/div/div/div/span/text()').extract()
        url = hxs.select('/html/body/div/div/div/div/div/div/div/div/div/a/@href').extract()
        image_urls = hxs.select('/html/body/div/div/div/div/div/div/div/div/div/a/div/div/img/@src').extract()

        item['description'] = description
        item['price'] = price
        item['url'] = url
        item['image_urls'] = image_urls
        #works fine!!
        return item

SPIDER = SG_snapDeal_Spider() 
```

项目.py：

```
from scrapy.item import Item, Field

class DealspiderItem(Item):
    description = Field()
    price = Field()
    url = Field()
    image_urls = Field()
    images = Field()
    image_paths = Field() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:49:40.390

您需要放入`process_item`单独的管道，将您的项目保存在数据库中。不在`images pipeline`.

使单独的管道像

```
class OtherPipeline(object):
  def process_item(self, item, info):
    print "inside process"
    pass 
```

将其包含`pipleline`在您的`settings`文件中

# c++ - 没有开关盒的简单计算器的新想法

> ID：14583432
> 
> 赞同：0
> 
> 时间：2013-01-29T12:55:44.043
> 
> 标签：c++, performance

我正在尝试实现第一个计算器。我的旧代码（开关盒）：

```
enum arithmetic_type{
    add = 0,
    subtract = 1,
    multiply = 2,
    divide = 3
};

inline void calculate(double &var, double value, arithmetic_type type){

    switch(type)
    {
        case add : var += value;break;
        case subtract : var -= value;break;
        case multiply : var *= value;break;
        case divide : var /= value;break;
    }

} 
```

*我看到了“指向函数定义的指针”，然后有了一个新想法：改为使用单独的函数。现在我的代码看起来像*：

```
typedef void(*arithmetic_type)(double &var, double value); //template

inline void add(double &var, double value){var+=value;} //components
inline void subtract(double &var, double value){var-=value;}
inline void multiply(double &var, double value){var*=value;}
inline void divide(double &var, double value){var/=value;}
////////////////////////////////////////////////////////////////
struct VAR
{
    double var_value;
    arithmetic_type operator_type;
    inline void calculate(double value){operator_type(var_value, value);}
}; 
```

我发现**它比 switch-case 简单得多**。更重要的是，我将添加一些其他运算符，例如关系运算符......所以我认为这个新的解决方案比旧的 switch-case 解决方案更清晰，也更方便。:)

但我仍然怀疑代码速度和性能。它执行得更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:05:38.353

我个人更喜欢函数指针版本。它更直接地编码您想要的内容：一组操作，每个操作都是一个函数。

如果有的话，速度上的差异真的可以忽略不计。参数传递不应该有任何不同，因为指针和`int`大多数系统上的大小相同，并且您的枚举很可能使用与内部相同的大小存储`int`。如果有的话，取消引用指针并调用这些函数可能比执行切换更快，这很可能归结为一系列比较和条件跳转。

当然，有人可能会说您的操作非常简单，以至于将它们存储在一个函数中是多余的并且是不必要的高度抽象。我不同意，因为这些函数提供了您程序的基本核心，并且您希望它们都被尽可能纯粹和同质地处理。如果您需要使其中一个更复杂，它可能会使`switch`所有函数膨胀，但不会影响这种基于函数指针的设计。

所以，从本质上讲，我只看到你的新方法有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:08:37.357

1.  您使用了“内联”，因此功能代码被复制到您使用它的位置，没有任何收获。
2.  指针确实优化了性能，但在这里几乎不明显，因为您使用小尺寸的变量（不像会使用 MB 内存的巨大照片）。
3.  代码不是那么可读，当然你可以很容易地理解这段代码，但是把这个约定想象成几千行代码。

所以我最后的想法是不要使用这样的指针，将它与大内存消耗变量一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:45:10.460

首先 - 作为一般规则，你的资源是有限的。在许多情况下，您最宝贵的资源是编程时间。***在这种情况下，您应该使用最简单/最易读的版本***。从您的问题描述来看，您似乎已经开始过早地进行优化（除非它是优化中的玩具示例）。

也就是说，在某些情况下，您关心性能。通常，您有现有的实现，但性能不符合目标（例如 - 计算需要几天而不是几小时）。我怀疑“简单计算器”是否接近此类问题，但为了争论，我们假设它。然后，您可以使用整个宏观优化分支 - 即您应该更多地考虑大图（算法更改等）而不是小图（函数指针与案例）。首先，您需要找出导致减速的原因（如果某件事占用了程序运行 10% 的时间，并且您将其加速了 50%，那么总体改进将是 5%，另一方面，如果您改进程序的其余部分25%，性能将提高 22%）。

在更罕见的情况下，即使经过这样的优化，性能目标也足够高，以至于您的代码仍然不匹配。通常只有当您的程序计算量很大并且在许多机器上运行数月或数年时才会这样做 - 例如，蛋白质折叠值得以这种方式优化，而大多数程序，即使是流行的程序，都不值得。通常此时您需要知道：

*   您正在优化的确切平台
*   基本计算机架构（流水线、ILP、缓存架构、缓存一致性协议等）
*   您正在使用的编译器

如果您在这种情况下，case/switch 可能会执行得更好，因为它允许在使用函数指针时更好地利用分支预测，而您只使用 BTB。另一方面，如果您的架构并且您使用的是非常简单的 C 编译器，则 case/switch 可能会溢出 I-cache（因此函数指针会执行得更好）。

* * *

总结一下：

1.  不要优化
2.  尚未优化（仅限专家）

虽然确实在某些情况下您通常需要优化，但最好从宏观优化开始并识别出减速的根源。如果您的程序无论如何都在等待 I/O（我怀疑使用计算器的情况），那么没有人会知道您的程序是否更快地响应 ns。同样，如果您的解析器/标记器是执行的瓶颈优化也无济于事。

如果宏观优化还不够，并且 1% 的运行时间改进可能值得您花费数周的时间，那么您可能需要查看了解处理器和编译器的微观优化。

# sql - 在 SQL 中搜索 %(

> ID：14583434
> 
> 赞同：2
> 
> 时间：2013-01-29T12:55:56.177
> 
> 标签：sql, ibm-midrange, sql-like

我在包含各种文本的列中搜索字符串 '%('。该字符串可以出现在文本中的任何位置，因此我尝试使用 LIKE 子句搜索字符串。

> 其中列 LIKE '%(%'

但是，这会将 % 视为通配符并在文本中搜索每个 (

为了逃避，我尝试使用 ESCAPE 关键字

> where COLUMN LIKE '%(%' ESCAPE '%'

但这导致了一个错误：

> 涉及字段 *N 的选择错误。

请让我知道是否可以找到该字符串。涉及的一些字符串是：`"%FOUND(....", or "...%SUBST(....", or even "...(%ABS(..."`

我在 AS400 上使用 DB2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:59:08.160

`WHERE column LIKE '%\%(%' ESCAPE '\'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:06:50.560

好吧，我尝试了以下，它有点工作..

```
CREATE TABLE test(column1 varchar(500))
go
INSERT INTO test VALUES('42%344%lsdj%'),('hello%asgj%sdf%l8-')

SELECT * FROM test WHERE column1 LIKE '%344[%]lsd%' 
```

回报：

```
column1
--------------
42%344%lsdj% 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:07:35.810

另一种方法，但不如上述有效，

```
WHERE INSTR(column,'%(') > 0 
```

# php - PHP超类调用子类方法而不知道它们？

> ID：14583439
> 
> 赞同：6
> 
> 时间：2013-01-29T12:56:15.380
> 
> 标签：php, oop, subclass, superclass

在尝试调试一些 PHP 类时，我遇到了一些在我看来非常奇怪的行为。

我已经构建了以下行为的演示：

```
class BaseClass {
   public function baseMethod () {
      echo (implode (' ', $this -> childMethod ()) . PHP_EOL);
   }
}

class ChildClass extends BaseClass {
   protected function childMethod () {
      return array ('What', 'The', 'Actual', 'Fork!');
   }
}

$a = new ChildClass ();
$a -> baseMethod (); 
```

现在，在我看来，基类根本不应该对子类做出任何假设，除了它通过声明（或继承）抽象方法或通过实现接口为子类强制执行的假设。但是，上面的代码实际上输出了一个字符串，并没有抛出任何错误！

> 什么是真正的分叉！

这对我来说似乎是一种破碎的行为。除非基类声明`abstract protected function childMethod();`，否则它应该不能调用它，不是吗？

我一直在网上搜索，试图找到一些可以证明这是预期行为的东西。到目前为止，我设法从[PHP 手册](http://php.net/manual/en/language.oop5.visibility.php)中找到以下内容：

> 其他对象的可见性
> 
> 相同类型的对象将可以访问彼此的私有成员和受保护成员，即使它们不是相同的实例。这是因为在这些对象内部时已经知道实现特定的细节

那么我在这里目睹的行为是正确的还是 PHP 中的错误？这当然不是我要依赖的行为，因为这对我来说似乎是错误的。

仅供参考，我们在实际代码中发现的问题是子类声明了超类试图调用的私有方法。超类没有声明方法抽象（如果这样做了，它至少必须受到保护）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T13:22:25.003

> 现在，在我看来，基类根本不应该对子类做出任何假设，除了它通过声明（或继承）抽象方法或通过实现接口为子类强制执行的假设。

这就是静态类型语言的工作方式。在 PHP（和许多其他）中，您可以自由地对任何值调用任何方法（它甚至不必是对象）。如果调用没有意义，则会出现运行时错误。

当然，如果您希望派生类实现该方法，那么声明该方法是个好主意；这只是一个很好的做法。此外，许多著名的 PHP IDE 会检测到这种遗漏并标记调用以引起您的注意，因为编译器不能。

> 这对我来说似乎是一种破碎的行为。除非基类声明 `abstract protected function childMethod();`，否则它应该不能调用它，不是吗？

它应该，如上所述。如果您发现这种行为不受欢迎，那么 PHP 不是您应该使用的语言。

旁白：在一个密切相关的注释中，您可能还会发现基类可以`protected`毫无问题地访问派生类中定义的成员是违反直觉的。这是[记录在案](http://php.net/manual/en/language.oop5.visibility.php)的。事实上，这正是您的示例中发生的情况，但我特别提到它是因为它是一种不同的反直觉（如果方法是，您的示例也会令人费解`public`）。

考虑一下 PHP 允许的无穷无尽的构造列表，从静态类型的角度来看，这些构造也是“不可能的”，其中包括：

```
// #1
$varName = 'foo';

// How do you know $object has a property named "foo"?
// How do you know that "foo" is a valid property name in the first place?
// How do you know that $object is an object to begin with?
echo $object->$varName;

// #2
$object = new SomeObject;
$methodName = 'someMethod';

// it's practically impossible to reason about this before runtime
call_user_func(array($object, $methodName)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:08:40.710

这不是一个错误。它应该像那样工作。让我尝试评论方法调用：

```
class BaseClass {
   public function baseMethod () {
      echo (implode (' ', $this -> childMethod ()) . PHP_EOL);
   }
}

class ChildClass extends BaseClass {
   protected function childMethod () {
      return array ('What', 'The', 'Actual', 'Fork!');
   }
}

/****/

$a = new ChildClass ();
/** $a is now instance of ChildClass, that is a sublass of BaseClass
 *  so the Object $a has 2 methods: baseMethod() inherited from BaseClass and childMethod() from ChildClass.
 */

$a -> baseMethod ();
/** now you're calling $a->baseMethod(), which will do a method call on $this->childMethod(). 
 *  As $this is refering $a here, $a has indeed a method named childMethod(), that will be called.
 */ 
```

您想知道的是`protected`. 但是作为`$a`ChildClass 的类型，受保护的方法肯定对它和继承的`baseMethod()`. 这在每种 OOP 语言中都应该是相同的。

您的代码中不好的部分是`baseMethod()`调用 a内部的假设`childMethod()`。如果没有这样的方法，那总是会以错误结束。像 Java 这样的 OOP 语言会在这里抛出编译错误，但 PHP 不会，因为 PHP 中没有预运行编译器。如果将初始化从 eg 更改`$a = new ChildClass ();`为`$a = new BaseClass ();`，PHP 中也会出现运行时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:15:57.563

PHP 是一种非常动态的语言，它允许您在没有继承的情况下使用多态性。在这种情况下，它只是在运行时查找方法“childMethod”，并且由于它存在，它将调用它。你如何得到那个方法并不重要。您还可以使用 __call 魔术方法动态生成该方法。您永远无法在 C++ 或 Java 中做到这一点，但在 PHP 或 Javascript 等语言中，一切都很好，它为您提供了更多选择。

# java - 方法识别文件是否在 SVN 版本控制下

> ID：14583441
> 
> 赞同：0
> 
> 时间：2013-01-29T12:56:18.150
> 
> 标签：java, svn

我想向 SVN 添加一个文件。我是从下面的java代码做的

```
ourClientManager.getWCClient().doAdd(file, false, false, true , true); 
```

使用[`SVNWCClient`](http://svnkit.com/kb/javadoc/org/tmatesoft/svn/core/wc/SVNWCClient.html).

该文件已经存在于 svn 中，所以我得到一个错误“已经在版本控制之下”。

是否有任何可用的方法可以说明该文件已经存在于 svn 中...类似于 isAlreadyUnderVersionControl(file)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:49:57.570

我尝试了下面的代码，它似乎正在工作。

```
final SVNStatus info = ourClientManager.getStatusClient().doStatus(file, false); 
if (!info.isVersioned()) {
    //call doAdd
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:59:44.887

我不熟悉该库，但听起来该`doInfo()`方法可能会告诉您您需要什么（如果路径不受版本控制，它将引发异常）。

# java - Java bytebuffer 将三个字节转换为 int

> ID：14583442
> 
> 赞同：4
> 
> 时间：2013-01-29T12:56:21.913
> 
> 标签：java, integer, byte, endianness

我目前正在处理一些小端二进制数据，我遇到了一个尴尬的点，我需要将奇数字节转换为整数值。

现在使用该类，我可以使用分别读取 4 字节和 8 字节`ByteBuffer`的函数完美地读取整数和长整数。`getInt()` `getLong()`

但是，在此示例中，我需要读取三个字节并从中生成一个 int。我试过做`getShort + get()`（2字节+ 1字节），但我认为这不是正确的做法。

我猜我需要将字节移位在一起以获得正确的 int 值，但我总是对移位感到有些困惑。

我还以为 bytebuffer 类会提供一个读取奇数字节的函数，但似乎没有。

一种方法是创建一个长度为三个字节的 byte[]，将三个字节放入其中，然后在其周围包装一个字节缓冲区，并从中读取一个 int。但这似乎是很多额外的代码。

任何建议或意见将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:01:11.523

通过获取三个字节

```
byte[] tmp = new byte[3];
byteBuffer.get(tmp); 
```

然后转换为`int`通过

```
int i = tmp[0] << 16 | tmp[1] << 8 | tmp[2]; 
```

或者

```
int i = tmp[2] << 16 | tmp[1] << 8 | tmp[0]; 
```

取决于你的字节序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T23:07:57.703

来自[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)：

> 原始 ... 字节 ... 值是 8 位 ... 有符号二进制补码整数。

[要将字节转换为“无符号”字节，请将其与 255 相加](https://stackoverflow.com/a/10197790/2116188)。因此，函数将是：

```
private static int toInt( byte[] b )
{
    return (b[0] & 255) << 16 | (b[1] & 255) << 8 | (b[2] & 255);
} 
```

或者

```
private static int toInt( byte[] b )
{
    return (b[2] & 255) << 16 | (b[1] & 255) << 8 | (b[0] & 255);
} 
```

取决于你的字节序。

# svg - 不使用javascript从其他元素设置子元素的值

> ID：14583447
> 
> 赞同：1
> 
> 时间：2013-01-29T12:56:30.543
> 
> 标签：svg

我有这个：隐藏的文本元素和线条元素。当光标在它上面时，线元素会改变它自己的不透明度。此外，当光标在行上时，文本元素变得可见。像这样：

```
<text id="tooltip" x="75" y="5" font-size="3" visibility="hidden" stroke="none"  
    font-weight="bold"  fill="black">SomeText
</text>

<line id="myline" x1="10" y1="30" x2="30" y2="30" stroke-width="1" stroke="black">
    <set attributeName="opacity" from="1" to="0.5"  begin="mouseover" end="mouseout"/>
    <set xlink:href="#tooltip" attributeName="visibility" from="hidden" to="visible"                  
    begin="myline.mouseover" end="myline.mouseout" />
</line> 
```

是否可以使用行元素内的某个标签更改“SomeText”（例如更改文本元素可见性的方式）？请注意，我知道如何使用 javascript 进行操作，但在这种情况下我需要清晰的 svg 代码。更准确地说：当光标位于行元素上时，我希望将文本元素值设置为“myline”，而不是“Some Text”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:52:43.060

SMIL 只允许对属性进行动画处理。我认为每行都必须有不同的文本元素。

# java - twitter 的 Future.trace() 方法是做什么用的？

> ID：14583452
> 
> 赞同：2
> 
> 时间：2013-01-29T12:56:51.707
> 
> 标签：java, scala, twitter, trace, finagle

该类`com.twitter.util.Future`有一个方法`Future.trace()`，返回类型是`com.twitter.util.Future.Tracer`（这个可以在编译的Java类中找到）

[但是，我在原始Scala 代码](https://github.com/twitter/util/blob/master/util-core/src/main/scala/com/twitter/util/Future.scala)或[doc](http://twitter.github.com/util/util-core/target/doc/main/api/com/twitter/util/package.html)中找不到该方法。你知道我在哪里可以找到该方法的用法或源代码吗？

为什么这样做：我正在尝试使用 Finagle 跟踪实现我自己的跟踪框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T06:14:27.480

`Future.trace`实际上是`Future`对象的旧成员。每次将两个异步计算与`map/flatMap`. 此功能不是很受欢迎，因此我们将其删除。

如果您想查看跟踪框架，您应该查看[zipkin](http://github.com/twitter/zipkin)和[finagle-zipkin](https://github.com/twitter/finagle/tree/master/finagle-zipkin)，它们基本上是 Google 的 Dapper 的开源实现（参见[论文](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/36356.pdf)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:31:47.720

是版本问题。

Java 代码包具有以下签名

```
<dependency>
  <groupId>com.twitter</groupId>
  <artifactId>util-core</artifactId>
  <version>5.3.1</version>
</dependency> 
```

但文档和源代码> 6.0.5

版本之间的源代码似乎发生了根本性的变化。

# asp.net-mvc - 如何在mvc的textarea中预览html

> ID：14583454
> 
> 赞同：2
> 
> 时间：2013-01-29T12:56:57.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我正在使用一个文本区域，我允许用户在其中输入他的 html。

当用户输入 HTML 时，有一个预览（按钮）选项，当用户单击预览按钮时，文本区域被隐藏，html 显示在 div 中。

当用户输入一些带有body标签等的html时，页面的设计就会受到干扰。

有什么办法可以解决

我面临的问题是生成预览时。

演示 HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Contest Announcement</title>
<style type="text/css">

body{width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0 auto; padding:0; background-color:#FFFFFF;}
#outlook a {padding:0;} 
#backgroundTable {margin:0; padding:0; width:100% !important; line-height: 100% !important;}
.ExternalClass {width:100%;}
.ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div {line-height: 100%;}

img {outline:none; text-decoration:none; -ms-interpolation-mode: bicubic; display:block; border:none;} 
p {margin: 1em 0;}
table td {border-collapse: collapse;}

.symbolfix img{width:10px !important;height:10px !important;}

</style>

</head>

<body style="width:100% !important; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; margin:0 auto; padding:0; background-color:#FFFFFF;"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:41:36.880

这可能不是最理想的，但为什么不尝试使用 javascript 和 jQuery 将文本区域的内容分配给 iframe？这是一篇文章的链接，详细介绍了如何将 HTML 注入 iframe。

[将 html 放在 iframe 中（使用 javascript）](https://stackoverflow.com/questions/620881/putting-html-inside-an-iframe-using-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:05:13.243

您可以使用 WYSIWYG 编辑器轻松完成此操作。

查看[编辑器](http://imperavi.com/redactor/)

# objective-c - 通过滑动旋转箭头

> ID：14583456
> 
> 赞同：1
> 
> 时间：2013-01-29T12:56:59.083
> 
> 标签：objective-c, cocoa-touch, animation

我有一个复杂的问题。我正在为 iOS 制作一个旋风游戏。您可以用手指拖动滚轮的箭头。现在我不想让它在用户滑动时旋转。

假设我慢速旋转箭头，然后它应该慢慢移动，最后它应该停止，或者当用户尽可能快地滑动时，箭头应该尽可能快地旋转。

目前我有这段代码可以使箭头可拖动。

我该怎么做这个动画？

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    gestureStartPoint = [touch locationInView:self.view];

    CGPoint startPoint = CGPointMake(arrowImage.center.x, arrowImage.center.y);

    CGPoint endPoint = CGPointMake(gestureStartPoint.x, gestureStartPoint.y);

    angleStartVal = ((((atan2((endPoint.y - startPoint.y) , (endPoint.x - startPoint.x)))*180)/M_PI)+90);

    timerStart = CFAbsoluteTimeGetCurrent();

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *touch = [touches anyObject];
    CGPoint currentPosition = [touch locationInView:self.view];

    CGPoint startPoint = CGPointMake(arrowImage.center.x, arrowImage.center.y);
    CGPoint endPoint = CGPointMake(currentPosition.x, currentPosition.y);

    angleVal = ((((atan2((endPoint.y - startPoint.y) , (endPoint.x - startPoint.x)))*180)/M_PI)+90);
    arrowImage.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(angleVal));

     //NSLog(@"angle: %f",angleVal);

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:51:00.153

如果您希望它减速直到停止，那么我将通过一个不可见的滚动视图来控制它来实现这一点。

`UIScrollView`滑动时已经减速，您可以控制减速速度。

VC 应该是`UIScrollViewDelegate`并使其成为“无限滚动视图”。即，当它滚动到一端时，代表将其放回另一端。

现在，您可以在 x 方向上应用 contentOffset 量 ti 旋转角度。

0% 偏移 = 0 旋转 100% 偏移 = 360 旋转

现在您根本没有尝试为旋转设置动画，您只是获取 scrollView 的偏移量并将其作为旋转应用于针头。

TBH，您甚至不需要它是隐形的，只需在其上放置任何东西并将滚动视图放在您的针上。

IE

```
[--------SCROLL VIEW---------]  //scroll this
[--------NEEDLE VIEW---------]  //Use the scroll amount from the scroll view to apply rotation here.
[-COLORS and BODY PARTS VIEW-]  //Doesn't move
[-----VC  View---------------]  //Doesn't move 
```

Apple 在几个 UI 中使用了与此类似的技术。

**编辑**

**我自己创建了这个来测试我的方法是否有效。**

你可以看到 UIViewController 的完整代码来运行这个......

[循环 UIScrollView 但继续减速](https://stackoverflow.com/questions/14632754/loop-uiscrollview-but-continue-decelerating)

这`UIImageView`是一个带有向上箭头的方形视图。`UIScrollView`具有与 完全相同的框架，并`UIImageView`位于其顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:36:02.323

为了使箭头图像视图同时移动和转动，我会将箭头图像视图嵌入到视图中，并像您一样使用 CGAffineTransformMakeRotation。然后移动箭头嵌入的视图并同时旋转箭头的图像视图。

然后为了让它在一个人滑动时旋转和/或移动得更快，我会用 velocityInView 查看 UIPanGestureRecognizer：看看他们移动手指的速度并相应地调整动画。

```
 _panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanFrom:)];
[self.someView addGestureRecognizer:_panGestureRecognizer];

-(void)handlePanFrom:(UIPanGestureRecognizer *)recognizer{
CGPoint translation = [recognizer translationInView:recognizer.view];
CGPoint velocity    = [recognizer velocityInView:recognizer.view];

if (recognizer.state == UIGestureRecognizerStateBegan) {
}
else if (recognizer.state == UIGestureRecognizerStateChanged) {
    CGPoint tempPoint;
    tempPoint = [recognizer locationInView:self.view];
    NSLog(@"point %f", tempPoint.y);
    NSLog(@"center %f", self.someview.center.y);

}
else if (recognizer.state == UIGestureRecognizerStateEnded) {
    CGPoint tempPoint;
    tempPoint = [recognizer locationInView:self.view];

} 
```

}

# python - Windows 7上的ipython找不到pyreadline

> ID：14583458
> 
> 赞同：3
> 
> 时间：2013-01-29T12:56:59.627
> 
> 标签：python, windows-7, ipython

我正在尝试在 Windows 7 上为 Python3 安装 Ipython。

使用 python-3.3.0.amd64.msi 安装 Python3

使用 pyreadline-1.7.1.win-amd64.exe 安装 pyreadline

下载的distribute-0.6.34.tar.gz

下载的distribute_setup.py

从 DOS 提示符导航到 python33 目录并执行

```
python distribute_setup.py 
```

使用 ipython-0.13.1.py3-win-amd64-PROPER 安装了 IPython（我右键单击并选择“以管理员身份运行”）

当我现在运行 IPython 时，我收到消息“警告：Realine 服务不可用或未加载。警告：MS Windows 下的正确颜色端口需要 pyreadline 库。”

是什么赋予了？

编辑：今晚我花了大约三个小时试图安装 python3 和 Ipython，但没有成功。我已经阅读了几个 SO 线程和有关在 Windows 上安装的 IPython 文档......仍然没有成功。如果有人想写下如何获得正确的权利，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:09:20.933

我已经在 Windows 7 Professional 32 位计算机上成功安装了 IPython 0.13.1。所以让我和你分享一下我是怎么做到的。

1.  安装 Python 3.3

    *   安装到默认文件夹：C:\Python33
2.  安装分发

    *   下载分发： http: [//pypi.python.org/pypi/distribute](http://pypi.python.org/pypi/distribute)
    *   提取到：C:\distribute
    *   在命令提示符处：导航到 C:\distribute
    *   在命令行上运行： `C:\Python33\python distribute_setup.py`
3.  安装 pyreadline

    *   下载pyreadline： [https ://github.com/pyreadline/pyreadline](https://github.com/pyreadline/pyreadline)
    *   单击“ZIP”下载 PyReadline 存储库的 zip 文件
    *   解压到 C:\pyreadline
    *   在命令提示符处：导航到 C:\pyreadline
    *   运行这个： `C:\Python33\python setup.py install`
4.  安装 pygments 和 pyzmq

    *   在命令提示符处：导航到 C:\Python33\Scripts
    *   运行这个： `easy_install pygments pyzmq`
5.  下载并安装下3个：

    *   ZeroMq： [http ://www.zeromq.org](http://www.zeromq.org)
    *   PySide： [http ://www.pyside.org](http://www.pyside.org)
    *   IPython： [http ://www.ipython.org](http://www.ipython.org)
6.  启动 IPython

    *   应该有一个开始菜单快捷方式
    *   开始菜单 > 所有程序 > IPython > IPythonQT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:12:26.280

您需要安装 pyreadline 的开发版本（它[在 Github 上](https://github.com/pyreadline/pyreadline)）。自 1.7.1 起添加了 Python 3 支持。

您可能想查看[Pyzo](http://www.pyzo.org/)，这是一个包含 IPython 的一体化科学 Python 3 发行版。这可能是最简单的入门方法。有几个基于 Python 2 的类似发行版，但 Pyzo 是第一个尝试使用 Python 3 的发行版。

# java - 使用 struts2/tiles/远程数据的手风琴菜单

> ID：14583460
> 
> 赞同：1
> 
> 时间：2013-01-29T12:57:05.180
> 
> 标签：java, struts2, tiles

有人可以发布一个示例代码，请使用 struts2/tiles 显示手风琴菜单。我正在努力按照带有注释的展示示例来获取手风琴列表...谢谢

菜单.jsp

```
<%@ page contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<link href="<s:url value="/pages/stylesheets/skins/blue.css"/>" rel="stylesheet" type="text/css" />
  <head>
    <sj:head jqueryui="true"/>
  </head>
  <body>
    <s:url id="urlecho" action="echo"/>
    <sj:accordion 
        list="accordion" 
        paramKeys="echo" 
        paramValues="content" 
        href="%{urlecho}" 
        active="false" 
        autoHeight="false" 
        clearStyle="true" 
        listKey="title" 
        listValue="content"/>  
</body> 
```

struts.xml

```
<action name="echo" class="com.accel.prjmgt.action.MenuAction">
    <result name="success" type="json">/pages/Menu.jsp</result>
</action> 
```

MenuAction.java

```
public class MenuAction extends ActionSupport
{
    private List<AccordionDO> accordion;

    public String execute() throws Exception 
    {
        accordion = new LinkedList<AccordionDO>();
        accordion.add(new AccordionDO("My Title 1", "Content One"));
        accordion.add(new AccordionDO("My Title 2", "Content Two"));
        accordion.add(new AccordionDO("My Title 3", "Content Three"));
        accordion.add(new AccordionDO("My Title 4", "Content Four"));
        accordion.add(new AccordionDO("My Title 5", "Content Five"));

        return SUCCESS;
    }

    public List<AccordionDO> getAccordion() {
        return accordion;
    }
} 
```

提前致谢。也许我在问一个愚蠢的问题，但我是一个试图学习 S2 / tile / JQuery 的初学者，所以希望你们理解和帮助。

问候

尤瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:34:39.740

将您的操作配置更改为：

```
<action name="echo" class="com.accel.prjmgt.action.MenuAction">
    <result name="success" type="json"></result>
</action> 
```

# jquery - 使用 Jquery 从 XML 中查找特定节点的子元素

> ID：14583461
> 
> 赞同：0
> 
> 时间：2013-01-29T12:57:06.540
> 
> 标签：jquery, xml, ajax

我有一个像

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<childrens>
<child id="1" value="Root Catalog" parent_id="0">
  <child id="2" value="Apparel" parent_id="1">
  <child id="4" value="Shirts" parent_id="2"/>
<child id="5" value="Pants" parent_id="2"/>
</child>
<child id="3" value="Accessories" parent_id="1">
  <child id="6" value="Handbags" parent_id="3"/>
  <child id="7" value="Jewelry" parent_id="3"/>
</child>
 .
 .
 .
<child id='1110'>
   <child id='1111' value="test" parent_is="1110">
       <child id="1005" value="test1" parent_is="1111"/>
       <child id="1006" value="test12" parent_is="1111"/>
       <child id="1007" value="test123" parent_is="1111"/>
    <child>
</child>
<child >
</childrens> 
```

我正在使用 jquery 来查找特定的节点子节点

我已经编写了这段代码来查找节点的子节点 where`id=1111`和`value=test`

```
$(document).ready(function(){
    $.ajax({
        type: "GET",
        url: "test.xml",
        dataType: "xml",
        success: function(xml) {
            $(xml).find('child[value="test"]').each(function(){
                var i = $(this).attr('value');
                alert(i);

            });
        }
    });
}); 
```

它只给了我一个名字，就是它自己

虽然我需要输出三个名称，这是它的子元素

即`test1`, `tets12`,`test123`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:59:58.303

我想你想使用[`.children()`](http://api.jquery.com/children/).

```
$(xml).find('child[value="test"]').children().each(function(){
    ...
}); 
```

# c - 函数参数类型的奇怪位置

> ID：14583470
> 
> 赞同：2
> 
> 时间：2013-01-29T12:57:38.000
> 
> 标签：c

> **可能重复：**
> [C 函数语法，在参数列表之后声明的参数类型](https://stackoverflow.com/questions/1585390/c-function-syntax-parameter-types-declared-after-parameter-list)

我浏览了一些 C 代码并找到了`inet_pton`函数的定义（在 .c 文件上）：

```
int
inet_pton(af, src, dst)
    int af;
    const char *src;
    void *dst;
... 
```

这里有趣的是，函数的参数以我从未见过的方式指定了它们的类型。在相应的头文件中，参数类型像往常一样指定：

```
extern int inet_pton (int __af, __const char *__restrict __cp,
              void *__restrict __buf) __THROW; 
```

我的问题是：这是某种 C 技巧吗？您是否可以始终在其范围内定义函数的参数类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T12:59:39.653

它看起来像旧的 Kernighan & Ritchie C 风格。

虽然它可以在遗留代码中找到，但这种编码风格不再被认为是好的做法，我猜它与 ANSI C 或更现代的 C99 或 C11 不兼容，所以不要使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:00:03.023

Pre ANSI C 样式代码，请参见此处： [http ://sunsite.ualberta.ca/Documentation/Gnu/autoconf-2.13/html_node/standards_8.html](http://sunsite.ualberta.ca/Documentation/Gnu/autoconf-2.13/html_node/standards_8.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T13:00:40.303

这是旧的 K&R 风格。等效的现代方法是：

```
int inet_pton(int af, const char *src,    void *dst) {
... 
```

# c# - 为什么更新列表中的实例会更新另一个列表中的相同实例？

> ID：14583473
> 
> 赞同：1
> 
> 时间：2013-01-29T12:57:50.187
> 
> 标签：c#

我有一堂课。

```
public class abc
{
    public int i = 0;
    public string a = "";
} 
```

========================================

现在，我在 abc 类类型的列表中插入一些记录

```
List<abc> c = new System.Collections.Generic.List<abc>();
abc a = new abc();
a.a = "1";
a.i = 1;
c.Add(a);

a = new abc();
a.a = "1";
a.i = 2;
c.Add(a); 
```

============================================

创建一个列表变量并添加一些过滤记录。

```
List<abc> temp = new System.Collections.Generic.List<abc>();

temp.AddRange(c.Where(i => i.i == 1)); 
```

================================================

Query = 通过执行以下代码行也将更改 c 变量。

我知道这两个点都指向同一个内存位置。有没有办法修复这个代码？

```
foreach (abc d in temp)
{
    d.i = 10;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:59:50.663

这不是“为什么更新列表会更新另一个列表？”

它是“为什么更新列表中的实例会更新另一个列表中的相同实例？”

因为您使用的是`class`与此类相同的实例。

```
List<abc> list1 = new List<abc>();
list1.Add(new abc());  // new abc() creates an instance of the abc() class. Let's call this instance myInstance

List<abc> list2 = new List<abc>();
list2.Add(list1[0]);  // Here you add the same instance (ie. myInstance) to the list2

list1[0].a = 5;  // You modify the instance myinstance

Console.WriteLine(list2[0].a);   // Returns "5"  (because it is always the same instance myIsntance) 
```

为避免这种行为，您有 2 个解决方案：

创建一个 Clone 方法以克隆具有相同值的 abc 实例。

```
public class abc
{
    public int i = 0;
    public string a = "";

    public abc Clone(abc instanceToClone)
    {
        abc result = new abc();
        result.i = instanceToClone.i;
        result.a = instanceToClone.a;
    }
} 
```

或者用结构替换类（然后你有一个值类型但你不能有字段初始值设定项）

```
public struct abc
{
    public int i;  // Initialized by default to 0
    public string a;  // Initialized by default to null
} 
```

我建议您阅读这篇优秀的[文章](http://www.codeproject.com/Articles/76153/Six-important-NET-concepts-Stack-heap-value-types)以了解 C# 的“基本”概念。（不是那么容易但真的很重要）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:00:31.803

随时创建对象的克隆。例如， if`i`和`a`were 属性——它们完全应该是！——你可以写

```
temp.AddRange(c.Where(i => i.i == 1).Select(o => new abc { a = o.a, i = o.i})); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:08:58.103

对对象实例所做的更新对该实例的每个所有者都是可见的。无论位于多少个集合对象，或者包含什么类型的集合，变化都会随处可见。这仅仅是因为集合只指向内存中的相同位置。无论您在哪里进行更改，它都会随处可见。

如果您需要避免此类行为，您有两种选择：

*   克隆一个集合中的对象
*   使用`struct`而不是`class`

```
public struct abc
{
    int i;
    string a;
}

abc a, b;
...
a.i = 1;
b = a;
/* new memory location is allocated for `b`, and values are copied from `a`.
therefore, updates made to `a` will not affect `b`*/
b.i = 2;
if (a.i == b.i)
    throw new Exception("i values are same"); 
```

# perl - 如何理解流程是什么？

> ID：14583474
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:57:51.047
> 
> 标签：perl, email, freebsd

我有带有 FreeBSD 的服务器。我收到来自我的主机的消息，该服务器发送垃圾邮件。在进程列表中，我看到：

```
# ps -U www
PID  TT  STAT      TIME COMMAND
14695  ??  Ss   936:32,05 mail (perl5.8.9)
14696  ??  Rs   946:48,67 mail (perl5.8.9)
29638  ??  Ss   834:23,55 mail (perl5.8.9) 
```

怎么知道流程是什么？我认为这是一些 Perl 脚本。如何找到这个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:34:03.873

如果您认为有人破坏了您主机的安全性，那么最好的办法是重新安装和恢复备份

如果这是不可能的，那么

```
ps xwwwU www 
```

将提供有关流程的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:48:48.660

如果您在输入文件中收到此信息。我不确定你需要 PID 还是 TT(??)。

以下是您可以执行的操作：

```
 use strict;

    my $file = "input.txt";
    open(FH, "<$file") or die "Could not open $file";

    foreach my $line (<FH>)
    {
        if($line =~ /^(\d+)\s+(.+?)\s+/) {
            my $pid = $1;
            my $tt  = $2;
        }
    } 
```

# java - 在 postProcessor 中编辑文档内容

> ID：14583478
> 
> 赞同：0
> 
> 时间：2013-01-29T12:57:55.847
> 
> 标签：java, jsf, primefaces, itext

我想编辑表格样式，例如在导出到 pdf`dataTable`时从 primefaces 添加的标题颜色。`dataExport`

我没有在`com.lowagie.text.Document`（参数的`postProcessMethod`）方法中看到返回 pdf 文档内容的方法。

我需要这样做`preProcessMethod`吗？如果是，那怎么办？论据中也有相同的对象。

# visual-studio-2010 - 是否可以使用 Web 部署来增加（设置）输出库版本？

> ID：14583483
> 
> 赞同：1
> 
> 时间：2013-01-29T12:58:17.553
> 
> 标签：visual-studio-2010, webdeploy, assemblyversions

要部署我的网站，我只需右键单击 Web 项目并选择发布（MS Visual Studio 2010 解决方案资源管理器）。

发布方式：Web Deploy。

是否可以在部署期间自动增加程序集文件的版本？

谢谢

# java - 'Configuration().configure().buildSessionFactory()' 返回一个 SessionFactory 的对象，它是不是由 Configuration 类实现的接口？

> ID：14583490
> 
> 赞同：-1
> 
> 时间：2013-01-29T12:58:38.093
> 
> 标签：java, hibernate, jakarta-ee, sessionfactory

该行如何`Configuration().configure().buildSessionFactory()` 返回一个`SessionFactory`未由`Configuration`类实现的接口的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:16:40.427

Hibernate 项目是开源的。欢迎您自己[寻找](http://www.docjar.com/html/api/org/hibernate/cfg/Configuration.java.html)。

```
public SessionFactory buildSessionFactory() throws HibernateException {
    log.debug( "Preparing to build session factory with filters : " + filterDefinitions );
    secondPassCompile();
    validate();
    Environment.verifyProperties( properties );
    Properties copy = new Properties();
    copy.putAll( properties );
    PropertiesHelper.resolvePlaceHolders( copy );
    Settings settings = buildSettings( copy );

    return new SessionFactoryImpl(
            this,
            mapping,
            settings,
            getInitializedEventListeners(),
            sessionFactoryObserver
        );
} 
```

# android - Android - GPS + 加速度计 - 两个时刻之间的距离

> ID：14583496
> 
> 赞同：1
> 
> 时间：2013-01-29T12:59:00.420
> 
> 标签：android, geolocation, gps, accelerometer

Android世界上是否有一些像这样的高级api？

```
DistanceCalculator dc = new DistanceCalculator();
dc.start();
//some walking, driving, whatever
float distanceInMeters = dc.stop(); 
```

> 我正在寻找将这些东西混合起来的东西（gps、加速度计等）以修复错误并补偿不良的准确性等。例如，如果我在广场上快速开始和结束到同一点，但没有有足够的时间获得新的坐标。我迷路了吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:51:34.310

那么您需要按照以下步骤操作， 1\. 注册位置监听器。2.缓存最后一个已知位置（您需要将智能过滤器放在准确度级别）。3.计算简单Android API方法[distanceTo之间的距离](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)

否则您可以编写自己的机制来计算纬度/经度之间的距离。

有一点很清楚，没有直接的 API 或方法可以让您保持距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T19:00:42.957

> 例如，如果我在广场周围快速开始和结束到同一点，并且没有足够的时间来获取新坐标。我迷路了吗？

如果您正在移动，您将每秒获得一次 GPS 定位，这足以进行距离测量。

# css - 如何更快地插入/编辑/分组css规则？

> ID：14583506
> 
> 赞同：9
> 
> 时间：2013-01-29T12:59:36.453
> 
> 标签：css, css-selectors

我发现我在编写 css 时的很多时间都浪费在找到合适的地方来放置新规则。例如，如果我有这个样式表：

```
.a, .b, #c {
  display:inline-block;
}

.d {
  color: #fff;
} 
```

而且我想添加`.d {display:inline-block;)`，我经常会考虑是否应该将其添加到第 1 节或第 2 节。意义：

```
.a, .b, #c, .d {
  display:inline-block;
} 
```

对比

```
.d {
  color: #fff;
  display:inline-block;
} 
```

显然，随着 CSS 变得越来越复杂，在这方面浪费的时间也越来越多。另一个时间消费者是定位现有规则的过程，以便在样式表中的选择器出现多次时选择它们。

**是否有特定的工作流程/工具可以使 CSS 编写过程更快、更高效？**

* * *

**请注意：**

1.  *类似的[问题](https://stackoverflow.com/questions/4550511/markup-style-best-practices-how-to-efficiently-distribute-style-rules-over-css)已经存在，但两年前已回答，因此需要最新的答案*

2.  *作为一个相对较新的 SO 用户，我不确定这属于这里还是属于 Programmers。如果这与 SO 无关，我很乐意迁移它。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:36:28.590

您应该根据样式的目的和逻辑对样式进行分组，而不是根据常见的样式属性。如果`.a`并且没有任何共同点，则可以将它们中的每一个都`.b`穿上。`display: inline-block;`

专注于可维护的代码而不是超高效的 CSS 文件（有缩小和压缩库可以为您做到这一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T10:35:10.687

几年前我遇到了这个问题，和你一样，我注意到每当我处理大型 CSS 文件（比如... 1000+ 行）时，大部分时间都花在查找特定的选择器上，而不是编辑或编写具体规则。

正因为如此，我遵循了一些约定，这可能使我使用 CSS 文件更容易 10 倍。关键是要意识到*工作流程中的瓶颈是查找选择器*，所以关键是要让这个过程更容易。

1.  **按照它们出现在 HTML 标记中的顺序编写 CSS 选择器。**通常情况下，我们首先通过查看标记（通过检查元素等）开始编写样式，因此当您按照标记的顺序编写选择器时，您大致了解在哪里查找规则你的 CSS 文件。

    因此，对于您的示例代码，答案取决于您是否为了代码重用而牺牲组织。当然，如果您将内容保存在同一个选择器（即）中，您也许可以重用代码`.a, .b, .c, .d`，但是您是否让您在 6 个月后重新访问 CSS 时无法找到选择器？用你的判断。

2.  **在一行上写样式。**除非有充分的理由你不能这样写（例如，你正在使用一个 CSS 预处理器，你必须嵌套你的规则，你使用由 10 个其他开发人员维护的现有代码库等），在单个上编写样式line 可以帮助您更快地找到样式。例如，像这样写：

    ```
    selector { property1: value, property2: value; property3: value; }
    selector2 { property1: value, property2: value; property3: value; }
    selector3 { property1: value, property2: value; property3: value; } 
    ```

    代替：

    ```
    selector { 
      property1: value, 
      property2: value; 
      property3: value; 
    }

    selector2 { 
      property1: value,
      property2: value;
      property3: value;
    }

    selector3 { 
      property1: value,
      property2: value;
      property3: value;
    } 
    ```

    在单行上编写规则允许您扫描选择器。此外，您可以轻松地将超过 1000 行的 CSS 文件减少到该数量的 10 倍，这使得它更易于管理。再次记住，我们工作流程中的瓶颈是查找选择器。因此，虽然编写“传统”方式使读取属性更容易，但它实际上减慢了查找选择器的过程。更重要的是，如果您在一行中编写选择器，则可以使用如下缩进：

    ```
    header { property1: value, property2: value; property3: value; }
      header h1 { property1: value, property2: value; property3: value; }
      header h3 { property1: value, property2: value; property3: value; }
      header h3 span { property1: value, property2: value; property3: value; }
    body { property1: value, property2: value; property3: value; } 
    ```

3.  **查找和替换是您的生计**。如果您使用上述两个建议来组织您的选择器，通常为主要部分找到选择器可以使您足够接近以找到您需要的特定规则。例如，如果你想找到一些超具体的东西`#someDiv header ui li a:hover`，你可以做一个搜索`#someDiv`，这会让你离得足够近，可以找到其余的东西。

希望有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:13:35.070

首先，不要过多考虑 CSS 的优化。正如其他人评论中所说的那样，有一些工具。

你必须为你的元素设置样式，而不是“元素你的样式”。这个奇怪的句子意味着CSS不应该被定义为：

```
.class1, .class2, .class.., classn {
  display:inline-block;
}

.class1, .class2, .class3{
  backgroundColor: #333
}

.class1, .class.., classn {
  opacity: 0.1
}
... 
```

因为你会疯狂地查看应用于你现在正在设计的特定元素的所有规则。善待你的大脑:)

另外，我认为现在通常的做法是直接在浏览器中使用 chrome 检查器和类似工具进行样式设置。您会看到其中定义了许多属性的一些规则，而不是适用于您的元素的 20 条规则以及许多与您正在设计的元素无关的其他元素。

如果您确实想更快地编写 css 代码，就像其他人所说的那样，您应该使用 css 预处理器：Less 或 sass。虽然 sass 是明显的赢家，但我习惯了 less，因为我学会了 twitter bootstrap，它是用 less 构建的。没关系，开始使用 css 预处理器的改进比在 less 或 sass 之间进行选择要大得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T04:40:17.477

您的问题似乎是设计师的“一般”困惑。设计 CSS 的最佳方式是你应该足够清楚哪个类将应用于什么？如果你想对不同的元素应用不同的属性（比如你想为div设置width=40px，为span设置50px），那么你应该创建一个新的css类，但是如果你的所有属性都相同，那就继续现有的！

添加 po[roperty 的最佳方法是，如果必须向单个元素添加新属性，请使用内联 css。这将有助于您维护样式表的格式。例子：

```
<div class="divcss" style="height:35px"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-12T12:46:13.320

在编写更好、更易于维护的 CSS 代码时，您只能用纯 CSS 做很多事情。而且，我相信您之前已经听说过，您可以使用 Sass 或 Less 编写代码，它们是**动态 CSS 语言**。

这可能一切都很好，*但这与您的问题有什么关系？* 继续阅读！例如，在**Less**中，您可以使用**嵌套 CSS**。例如，查看以下内容：

```
article.post {

    p{
        margin: 0 0 12px 0;
    }
    a {
        color: red;
    }
    a:hover {
        color: blue;
    }
    img {
        float:left;
    }

} 
```

> “您可以随意嵌套规则，这样可以省去很多麻烦。您是否曾经想更改某些东西的填充，但因为不知道它可能会影响哪些元素而感到害怕？通过使用嵌套您可以从你的 CSS 中消除很多猜测。”

现在，Less 的美妙之处在于您已经知道如何编写它。所有 CSS 代码都是有效的 Less 代码。除了，你可以做更多。让我们看一下**mixins**，例如：

```
.rounded_top {
    -webkit-border-top-left-radius: 6px;
    -webkit-border-top-right-radius: 6px;
    -moz-border-radius-topleft: 6px;
    -moz-border-radius-topright: 6px;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
}

.tab {
    background: #333;
    color:#fff;
    .rounded_top;  //Now you have a rounded top with simple, maintainable code
}

.submit {
    .tab;
    background: red;  //Notice that background: #333; is overridden here
} 
```

这里有[一篇关于 Less 的所有特性的非常精彩的文章](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/get-into-less-the-programmable-stylesheet-language/)，这只是你可以用 Less 做的一小部分，但我想说的是，你不必害怕跳入动态CSS 语言。

**您已经知道如何使用它们。**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-12T21:07:03.643

你需要学习一两点关于 CSS 预处理器的知识。您有一些选择，例如[SASS](http://sass-lang.com/)和[LESS](http://lesscss.org/)。网络上有许多资源，您可以从中了解这些预处理器以及如何使用它们。

您所问的是更多关于您正在定义的新 CSS 类的用法。这就像一张桌子、一把椅子和一棵树是用木头做的，但椅子也可以有不同于它们共同属性的颜色。这就是 OOCSS 的用武之地。

上面的例子可能不是很好，但我希望你能明白我想说的。如果您希望向现有样式添加新属性，则由您决定如何操作。但是，如果您想赋予您的风格以意义，那么您需要整理一下。

* * *

## 奖金

您绝对应该浏览 Stubbornella 的[Object](http://www.stubbornella.org) [Oriented CSS](https://github.com/stubbornella/oocss)的整个 wiki 。您可能会发现该存储库上的提交非常陈旧，但它们已成为许多基于 OOCSS 的框架的基础。

我个人是[inuit.css](https://github.com/csswizardry/inuit.css)的忠实粉丝。它是我遇到过的最强大的 CSS 框架，而且绝对令人兴奋。它使您可以完全控制您的设计并保持干燥。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T14:24:31.140

您可以使用特定类名作为默认或通用样式设置规则，以便您可以针对特定的 id、类或标签。

```
.pos-inline{
  display:inline-block;
}
.col-white {
  color: #fff;
} 
```

只需添加以逗号分隔的类或 div (.a, .b, #c) 您要应用的任何属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T16:14:37.157

如果你优化你的 CSS 文件，你可以这样写：

```
.dis-inblck{display:inline-block;}
.color-w{color:#fff;} 
```

# wix - Wix Installer 开始菜单快捷方式未出现

> ID：14583509
> 
> 赞同：7
> 
> 时间：2013-01-29T12:59:40.603
> 
> 标签：wix, windows-installer, wix-extension

我正在尝试使用 WiX v3.7（因为 VS2012 不再包括设置和部署项目）为 Windows 应用程序创建安装程序项目以用于学习目的。Wix 工具集已集成到 VS，我正在创建一个新的 WiX 单一安装程序设置项目。安装程序始终编译成功（图标扩展中的警告除外），它运行完美并按原样放置桌面快捷方式，但未能在 Windows 7 Professional x64 Service Pack 1 上放置正确的开始菜单快捷方式。我搜索了网络并尝试了几乎我看到的任何东西，但到目前为止还没有成功。product.wxs 文件如下，“my_guid”字符串在项目中被适当的 GUIDS 替换。显然我错过了一点，但看不到在哪里。注册表项也未创建，因此最后一个片段可能由于某种原因未执行。

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="my_guid" Name="WixSingleSetupExample" Language="1055" Version="1.0.0.0" Manufacturer="Can Yucel" UpgradeCode="my_guid">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

        <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
        <MediaTemplate />

        <Feature Id="ProductFeature" Title="WixSingleSetupExample" Level="1">
            <ComponentGroupRef Id="ProductComponents" />
            <ComponentRef Id="ApplicationShortcut" />
        </Feature>
    </Product>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="DesktopFolder" Name="Desktop" />
            <Directory Id="ProgramMenuFolder">
                <Directory Id="ApplicationProgramsFolder" Name="WixSingleSetup"/>
            </Directory>
            <Directory Id="ProgramFilesFolder">
                <Directory Id="INSTALLFOLDER" Name="WixSingleSetupExample" />
            </Directory>
        </Directory>
    </Fragment>

    <Fragment>
        <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
          <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
          <Component Id="ProductTextFile">
              <File Source="blankText.txt" KeyPath="yes">
                  <Shortcut Id="desktopShortcut" Advertise="yes" Directory="DesktopFolder" Name="WixSingleSetup Help" WorkingDirectory="INSTALLFOLDER" Icon="icon1.txt" IconIndex="0">
                      <Icon Id="icon1.txt" SourceFile="blankText.txt"/>
                  </Shortcut>
              </File>      
          </Component>
        </ComponentGroup>
    </Fragment>

  <Fragment>
    <DirectoryRef Id="ApplicationProgramsFolder">
      <Component Id="ApplicationShortcut" Guid="my_guid">
        <Shortcut Id="ApplicationStartMenuShortcut"
                  Name="WixSingleSetup Help"
                  Description="Setup Example"
                  Target="blankText.txt"
                  WorkingDirectory="INSTALLFOLDER"
                  Icon="icon2.txt"
                  IconIndex="0">
          <Icon Id="icon2.txt" SourceFile="blankText.txt"/>
        </Shortcut>
        <RemoveFolder Id="ApplicationProgramsFolder" On="uninstall"/>
        <RegistryValue Root="HKCU" Key="Software/Microsoft/WixSingleSetup" Name="installed" Type="integer" Value="1" KeyPath="yes" />
      </Component>
    </DirectoryRef>
  </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T11:27:06.847

我正在添加按预期工作的代码以供将来参考和问题的确切答案：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="guid_here" Name="WixSingleSetupExample" Language="1055"
           Version="1.0.0.0" Manufacturer="Can Yucel" UpgradeCode="guid_here">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="WixSingleSetupExample" Level="1">
      <ComponentGroupRef Id="ProductComponents" />
      <ComponentRef Id="ProgramMenuDir"/>
    </Feature>
  </Product>

  <Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">

      <Directory Id="DesktopFolder" Name="Desktop" />

      <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id="ApplicationProgramsFolder" Name="WixSingleSetup">
          <Component Id="ProgramMenuDir" Guid="guid_here">
            <RemoveFolder Id="ProgramMenuDir" On="uninstall"/>
            <RegistryValue Root="HKCU" Key="Software\[Manufacturer]\WixSetup"
                           Type="integer" Value="1" Name="installed" KeyPath="yes" />
          </Component>
        </Directory>
      </Directory>

      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="WixSingleSetupExample" />
      </Directory>
    </Directory>
  </Fragment>

  <Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
      <!-- TODO: Remove the comments around this Component element and the
           ComponentRef below in order to add resources to this installer. -->
      <Component Id="ProductTextFile">
        <File Source="blankText.txt" KeyPath="yes">
          <Shortcut Id="desktopShortcut" Advertise="yes" Directory="DesktopFolder"
                    Name="WixSingleSetup Help" WorkingDirectory="INSTALLFOLDER"
                    Icon="icon1.txt" IconIndex="0">
            <Icon Id="icon1.txt" SourceFile="blankText.txt" />
          </Shortcut>
          <Shortcut Id="startMenuShotcut" Directory="ApplicationProgramsFolder"
                    Name="WiXSingleSetup Help" WorkingDirectory="INSTALLFOLDER"
                    Icon="icon2.txt" IconIndex="0" Advertise="yes">
            <Icon Id="icon2.txt" SourceFile="blankText.txt"/>
          </Shortcut>
        </File>      
      </Component>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T10:31:00.777

我最近开始使用 Wix，我已经被你描述的问题困扰了好几个星期。

我找到了另一种添加开始菜单快捷方式的方法，无需添加额外的组件（删除菜单文件夹），也无需在目标机器注册表上创建热键。

这可以通过将`<RemoveFolder ... />`定义移动到`<Component Id="ProductTextFile" ...>`元素中来完成。此后修改后的工作脚本：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <Product Id="{GUID HERE}" Name="WixSingleSetupExample" Language="1055"
           Version="1.0.0.0" Manufacturer="Can Yucel" UpgradeCode="{GUID HERE}">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is already installed." />
    <MediaTemplate />

    <Icon Id="ICON1.ICO" SourceFile="icon1.ico" />
    <Icon Id="ICON2.ICO" SourceFile="icon2.ico" />

    <Feature Id="ProductFeature" Title="WixSingleSetupExample" Level="1">
      <ComponentRef Id="ProductTextFile" />
    </Feature>
  </Product>

  <Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
      <Directory Id="DesktopFolder" Name="Desktop" />

      <Directory Id="ProgramMenuFolder" Name="Programs">
        <Directory Id="ApplicationProgramsFolder" Name="WixSingleSetup" />
      </Directory>

      <Directory Id="ProgramFilesFolder">
        <Directory Id="INSTALLFOLDER" Name="WixSingleSetupExample" />
      </Directory>
    </Directory>
  </Fragment>

  <Fragment>
      <Component Id="ProductTextFile" Directory="INSTALLFOLDER" Guid="{GUID HERE}">
        <File Source="blankText.txt" KeyPath="yes">
          <Shortcut Id="desktopShortcut" Advertise="yes" Directory="DesktopFolder"
                    Name="WixSingleSetup Help" WorkingDirectory="INSTALLFOLDER"
                    Icon="ICON1.ICO" IconIndex="0" />

          <Shortcut Id="startMenuShotcut" Directory="ApplicationProgramsFolder"
                    Name="WiXSingleSetup Help" WorkingDirectory="INSTALLFOLDER"
                    Icon="ICON2.ICO" IconIndex="0" Advertise="yes" />
        </File>

        <RemoveFolder Id="ProgramMenuDir" Directory="ApplicationProgramsFolder" On="uninstall"/>
      </Component>
  </Fragment>
</Wix> 
```

# eclipse - EGit 在功能分支上不断显示传出

> ID：14583515
> 
> 赞同：0
> 
> 时间：2013-01-29T12:59:53.557
> 
> 标签：eclipse, git, egit

我在 Eclipse Juno 中使用 EGit 2.1.0。

我从我的主分支创建了一个功能分支。我已经对我推送的功能做出了一些承诺。但是 EGit 一直显示我的分支已经传出。如果切换到 master 并将分支中的更改合并到 master 并切换回分支，则输出将在分支上消失。这是 EGit 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:55:37.610

您似乎已将功能分支配置为跟踪主分支。通常，一个本地分支跟踪一个远程分支，但也可以跟踪另一个本地分支。

要检查这一点，请转到*Git Repositories*视图，打开功能分支的上下文菜单并选择*Configure Branch* ...。如果原点有“.”，则跟踪指定的本地分支。

在这种情况下，EGit 的行为是正确的，因为功能分支在 master 之前“领先”，直到您将这些更改合并到 master。

# specman - Specman中的randc

> ID：14583517
> 
> 赞同：0
> 
> 时间：2013-01-29T12:59:53.693
> 
> 标签：specman

您如何在 specman 中使用 gen 生成“randc”类型的实现？
**例子：**

```
list_l : list of uint(bits:3);
keep list_1.size () == 8; 
```

我想以这样的方式生成列表的所有元素都应该在（0 -7）之间随机出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:23:48.963

当前在列表上定义的约束将确保生成的列表包含范围内的所有值`[0..7]`。
使用`gen`将根据需要生成列表。

**例子**

```
list_l : list of uint(bits:3);
keep list_l.size () == 8;
generate_list() is {
    gen list_l;
} 
```

如果您希望所有列表项都是唯一的，请在列表中添加以下约束：

```
keep list_l.all_differnt(it); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T21:47:46.260

可以使用**“is_a_permutation()”**伪方法来用每个值填充列表一次。

**例子**

```
list_l : list of uint(bits:3);
keep list_1.is_a_permutation(all_values(uint(bits:3))); 
```

或者

```
keep list_1.is_a_permutation({0;1;2;3;4;5;6;7}); 
```

请注意，在此示例中，**“is_a_permutation()”**将列表大小限制为 8。

# android - 如何从 web 服务缩放位图图像？

> ID：14583518
> 
> 赞同：0
> 
> 时间：2013-01-29T12:59:56.313
> 
> 标签：android, imageview

嗨，我有可扩展的图像 url，我想自动适应我正在使用的图像视图。这是我的图像视图代码

```
<com.livetalkback.xfactor2012.ui.views.CmsRemoteImageView
            android:id="@+id/categoryThumbnail"
            android:layout_width="match_parent"
            android:layout_height="match_parent"

            android:layout_marginLeft="4dp"

            android:src="@drawable/ic_category_thumb_default" /> 
```

如果附加具有所需高度和宽度的 url，则其会自动调整但我不想附加硬编码高度和宽度，因为我的应用程序支持多种屏幕尺寸设备。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:07:59.170

您可以尝试通过 id 找到您的 imageView`onCreate(bundle savedInstanceState)`并将其源设置为`yourWebServiceQueryResult`，以便能够使用 eponym 方法以样本大小对其进行解码。

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:13:20.083

我假设您的自定义图像视图正在扩展典型的 Android 图像视图。在这种情况下，您可以使用 Scaletype 作为 Fitxy 属性。

[更多信息](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:21:18.177

我认为您是在获取图像并设置为给定视图，您可以使用查找图像的默认宽度和高度，然后找到它们的纵横比以及您希望缩放的比例，您可以通过矩阵调整它的大小

```
Matrix matrix = new Matrix();

// resize the bit map

   matrix.postScale(scaleWidth / width, scaleHeight / height);

// recreate the new Bitmap

    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, true);

    bm.recycle();

    return resizedBitmap; 
```

# php - 没有 WURFL 的移动检测

> ID：14583525
> 
> 赞同：2
> 
> 时间：2013-01-29T13:00:19.463
> 
> 标签：php, zend-framework, mobile

在 ZendFramework 1.12 中，我如何检测**没有 WURFL的手机/平板电脑/台式机上的用户？**

PS：ZF内部方法，如果可能的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:19:13.793

这是一个简单的控制器插件（未经测试），它将检查用户代理字符串：

```
class My_Plugin_Mobile extends Zend_Controller_Plugin_Abstract
{
    protected $uaStrings = array('nokia', 'android', 'ipod', 'itouch');

    public function preDispatch(Zend_Controller_Request_Abstract $request)
    {
        if (!$request->isPost() && $request->getServer('HTTP_HOST') != 'm.example.com') {
            foreach ($this->uaStrings as $uaString) {
                if (strpos(strtolower($request->getServer('HTTP_USER_AGENT')), $uaString) !== false) {
                    header("Location: http://m.example.com".$request->getPathInfo());
                    exit;
                }
            }
        }
    }
} 
```

您必须向阵列添加更多用户代理，但希望这可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:39:15.607

使用 WURFL，您可以了解手机规格，例如：显示宽度、操作系统和版本、视频支持等。

但是，如果你想确定用户是否在手机上，你可以使用简单的 preg_match

```
<?php
$useragent = $_SERVER['HTTP_USER_AGENT'];
if(preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i',$useragent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i', substr($useragent, 0, 4)))
    header('Location: http://m.website.com');
?> 
```

[来源](http://detectmobilebrowsers.com/)

# mysql - mysql在具有不同where子句的单个表中多次计数

> ID：14583529
> 
> 赞同：1
> 
> 时间：2013-01-29T13:00:30.197
> 
> 标签：mysql

我有三个执行 COUNT 的 SELECT 语句。认为结合这些在mysql上会更有效和更友好：

```
$query = $db->query("SELECT count(category) FROM table WHERE cid='290463' and category = 'x'"); 
         $tot_x = $db->result($query, 0);

$query = $db->query("SELECT count(category) FROM table WHERE cid='290463' and category = 'y'"); 
         $tot_y = $db->result($query, 0);

$query = $db->query("SELECT count(category) FROM table WHERE cid='290463' and category = 'z'"); 
         $tot_z = $db->result($query, 0); 
```

一句话：

```
SELECT 
    SUM(category='x' AND cid='290463') as tot_x, 
    SUM(category='y' AND cid='290463') as tot_y, 
    SUM(category='z' AND cid='290463') as tot_z 
FROM table 
```

问题是，新语句比单独运行原来的三个语句要慢。

任何人都能够阐明为什么新语句较慢以及改进 SELECT 以使其更快的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:04:29.080

您的原始查询可能能够利用表上的索引（基于您的 where 子句），确保只读取表上相对较小比例的记录 - 而不是整个表，如统一查询。尝试将等效条件添加回 where 子句，如下所示：

```
SELECT 
    SUM(category='x') as tot_x, 
    SUM(category='y') as tot_y, 
    SUM(category='z') as tot_z 
FROM table
WHERE cid='290463' and category in ('x', 'y', 'z') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:03:43.593

```
SELECT 
    SUM(IF(category='x',1,0))as tot_x, 
    SUM(IF(category='y',1,0))as tot_y, 
    SUM(IF(category='z',1,0))as tot_z
FROM table
WHERE cid='290463'
GROUP BY category 
```

# javascript - 如何通过 Google V3 地图为集群使用信息气泡

> ID：14583537
> 
> 赞同：1
> 
> 时间：2013-01-29T13:00:42.617
> 
> 标签：javascript, html, google-maps, google-maps-api-3, markerclusterer

我的集群图中有一个信息气泡。目前，当您单击或将鼠标悬停在标记上时，我的标记会显示信息气泡。我不能让我的集群拥有相同的集群吗？

当您悬停或单击集群时，如何在集群上显示信息气泡？

[这是我的文件的链接](http://www.blakeloizides.co.za/marker/clusters.html)

```
<html>    
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://blakeloizides.co.za/marker/js/jquery-1.6.1.min.js"></script>        
<script src="http://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript" src="http://blakeloizides.co.za/marker/js/gmap3.js"></script> 
<script type="text/javascript" src="http://blakeloizides.co.za/marker/js/mcdo.js"></script> 
<style>
  #container{
    position:relative;
    height:700px;
  }
  #googleMap{
    border: 1px dashed #C0C0C0;
    width: 75%;
    height: 700px;
  }

  /* cluster */
  .cluster{
    color: #FFFFFF;
    text-align:center;
    font-family: Verdana;
    font-size:14px;
    font-weight:bold;
    text-shadow: 0 0 2px #000;
    -moz-text-shadow: 0 0 2px #000;
    -webkit-text-shadow: 0 0 2px #000;
  }
  .cluster-1{
    background: url(images/card-cluster.png) no-repeat;
    line-height:64px;
    width: 64px;
    height: 40px;
  }
  .cluster-2{
    background: url(images/house.png) no-repeat;
    line-height:53px;
    width: 60px;
    height: 48px;
  }
  .cluster-3{
    background: url(images/headquarters.png) no-repeat;
    line-height:66px;
    width: 70px;
    height: 56px;
  }

  /* infobulle */
  .infobulle{
    overflow: hidden; 
    cursor: default; 
    clear: both; 
    position: relative; 
    height: 34px; 
    padding: 0pt; 
    background-color: rgb(57, 57, 57);
    border-radius: 4px 4px; 
    -moz-border-radius: 4px 4px;
    -webkit-border-radius: 4px 4px;
    border: 1px solid #2C2C2C;
  }
  .infobulle .bg{
    font-size:1px;
    height:16px;
    border:0px;
    width:100%;
    padding: 0px;
    margin:0px;
    background-color: #5E5E5E;
  }
  .infobulle .text{
    color:#FFFFFF;
    font-family: Verdana;
    font-size:11px;
    font-weight:bold;
    line-height:25px;
    padding:4px 20px;
    text-shadow:0 -1px 0 #000000;
    white-space: nowrap;
    margin-top: -17px;
  }
  .infobulle.drive .text{
    background: url(images/drive.png) no-repeat 2px center;
    padding:4px 20px 4px 36px;
  }
  .arrow{
    position: absolute; 
    left: 45px; 
    height: 0pt; 
    width: 0pt; 
    margin-left: 0pt; 
    border-width: 10px 10px 0pt 0pt; 
    border-color: #2C2C2C transparent transparent; 
    border-style: solid;
  }

</style>

<script type="text/javascript">

  $(function(){

    $("#googleMap").gmap3({
      map:{
        options: {
          center:[46.578498,2.457275],
          zoom: 7,
          mapTypeId: google.maps.MapTypeId.TERRAIN
        }
      },
      marker: {
        values: macDoList,
        cluster:{
          radius:100,
          // This style will be used for clusters with more than 0 markers
          0: {
            content: "<div class='cluster cluster-1'>CLUSTER_COUNT</div>",
            width: 53,
            height: 52
          },
          // This style will be used for clusters with more than 20 markers
          20: {
            content: "<div class='cluster cluster-2'>CLUSTER_COUNT</div>",
            width: 56,
            height: 55
          },
          // This style will be used for clusters with more than 50 markers
          50: {
            content: "<div class='cluster cluster-3'>CLUSTER_COUNT</div> + <div>hello</div>",
            width: 66,
            height: 65
          }
        },
        options: {
          icon: new google.maps.MarkerImage("images/card-marker.png")
        },
        events:{
            mouseover: function(marker, event, context){
$(this).gmap3(
              {clear:"overlay"},
              {
              overlay:{
              latLng: marker.getPosition(),
              options:{
              content:  "<div class='infobulle"+(context.data.drive ? " drive" : "")+"'>" +
                  "<div class='bg'></div>" +
                  "<div class='text'>" + context.data.city + " (" + context.data.zip + ")</div>" +
                  "</div>" +
                  "<div class='arrow'></div>",
              offset: {
              x:-46,
              y:-73
              }
              }
              }
              });},

          mousedown: function(marker, event, context){
            $(this).gmap3(
              {clear:"overlay"},
              {
              overlay:{
                latLng: marker.getPosition(),
                options:{
                  content:  "<div class='infobulle"+(context.data.drive ? " drive" : "")+"'>" +
                              "<div class='bg'></div>" +
                              "<div class='text'>" + context.data.city + " (" + context.data.zip + ")</div>" +
                            "</div>" +
                            "<div class='arrow'></div>",
                  offset: {
                    x:-100,
                    y:-73
                  }
                }
              }
            });
          },
          mouseout: function(){
            $(this).gmap3({clear:"overlay"});
          }
        }
      }
    });

  });
</script>  
</head>

<body>
<div id="googleMap"></div>
</body>
</html> 
```

我一直在尝试以下方法：

```
mouseover: function(marker, event, context){
$(this).gmap3(
              {clear:"overlay"},
              {
              overlay:{
              latLng: marker.getPosition(),
              options:{
              content:  "<div class='infobulle"+(context.data.drive ? " drive" : "")+"'>" +
                  "<div class='bg'></div>" +
                  "<div class='text'>" + context.data.city + " (" + context.data.zip + ")</div>" +
                  "</div>" +
                  "<div class='arrow'></div>",
              offset: {
              x:-46,
              y:-73
              }
              }
              }
              });}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:27:38.520

一个簇不是一个标记，它是一组标记。

您可以通过回调的第一个参数访问集群的属性。第一个参数由两个成员组成， main 和 shadow 。

使用 -member 的方法`getPosition()`来`main`检索集群的位置。

集群的标记作为数组存储在第三个参数的 data.markers-member 中，您可以从该数组中收集一些信息以在信息气泡中显示它们。

示例：（将此添加到**集群**`events`的-member ）

 **```
mouseover: function(cluster, event, context){
              $(this).gmap3(
                  {clear:"overlay"},
                  {
                    overlay:{
                        latLng: cluster.main.getPosition(),
                        options:{
                                  content:  "<div class='infobulle'>" +
                                            "<div class='bg'></div>" +
                                            "<div class='text'>there are " +
                                             context.data.markers.length +
                                            " markers in this cluster</div>" +
                                            "</div><div class='arrow'></div>",
                                  offset: {
                                            x:-46,
                                            y:-73
                                          }
                                }
                            }
                  });
  } 
```**

# sql - Oracle，将集合转换为现有表的类型

> ID：14583539
> 
> 赞同：1
> 
> 时间：2013-01-29T13:00:46.963
> 
> 标签：sql, oracle, casting, polymorphism, multiset

我可以在 Oracle 11g 中做这样的事情吗：

```
select cast(multiset( select * from table_name) as table_name%TYPE) from dual; 
```

在普通 sql 中，没有预定义类型？它是否支持多态性之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:55:33.110

我想更大的问题是你想在这里实现什么。据[甲骨文](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions021.htm)称，

> MULTISET 通知 Oracle 数据库获取子查询的结果集并返回一个集合值

因此，在您的示例中（如果修改正确），您将返回多行并将它们放入集合中。这可能是各种形式（varray、嵌套表、对象表等），但目标是从查询中填充您的集合，然后使用该集合（这就是为什么我说最大的问题是你是什么想要做/最终实现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:36:50.543

这是我不久前从某处复制的一些示例，并保留以供参考。也许这会帮助你：

```
-- The following objects create the basis of the example that follows:
CREATE TABLE projects 
 (employee_id NUMBER, project_name VARCHAR2(10))
/

CREATE TABLE emps_short 
   (employee_id NUMBER, last_name VARCHAR2(10))
/

CREATE TYPE project_table_typ AS TABLE OF VARCHAR2(10)
/

 -- The following example of a MULTISET expression uses these objects:
 SELECT e.last_name,
   CAST
 (
  MULTISET(SELECT p.project_name
      FROM projects p 
     WHERE p.employee_id = e.employee_id
   ORDER BY p.project_name)   AS project_table_typ  -- here's your %TYPE --
 ) 
 FROM emps_short e
 ORDER BY e.last_name
 / 
```

# c# - 在 C# 中尝试将节点添加到队列时无法使用 .Next

> ID：14583545
> 
> 赞同：0
> 
> 时间：2013-01-29T13:01:08.133
> 
> 标签：c#, queue

尝试在 C# 中从队列中添加和删除节点。但是，当尝试使用时，`front.Next`我得到一个编译器错误，即不包含定义。

```
class Queue<T>
{
    int count = 0;
    Node<T> front = null;
    Node<T> end = null;

    public void Enqueue(T obj)
    {
        if (count == 0)
        {
            front = new Node<T>(obj);
        }
        else 
        {
            Node<T> newEnd = new Node<T>(obj);
            newEnd.Next = end;
            count++;
            end = newEnd;
        }
    }

    public T Dequeue(T obj)
    {
        Node<T> newFront = new Node<T>(obj);
        newFront = front.Next;
        count--;
        front = newFront;
        return front;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:05:38.920

不确定为什么要尝试`Queue`在 .NET 中重新创建现有的集合？

但是，要回答您的问题，您`Next`的对象中缺少一个方法，因此编译器会告诉您它找不到`Next`.

**不过，您确实应该考虑使用[现有的`Queue`课程](http://msdn.microsoft.com/en-us/library/055sfc3z%28v=vs.110%29.aspx)。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:19:31.733

根据您的评论，您会收到编译错误，因为您编写了一个`Node<T>`未实现`Next`属性的类。

编译器给出的错误信息是否以某种方式令人困惑？

# android - Android Tesseract 和 Leptonica OCR。读取单个框和字符

> ID：14583548
> 
> 赞同：3
> 
> 时间：2013-01-29T13:01:16.907
> 
> 标签：android, ocr, tesseract, leptonica

我在 Android 上使用 Tesseract，我有以下代码来提取字符串和从图像中读取的框：

```
TessBaseAPI baseApi = new TessBaseAPI();
baseApi.init(tess_path, "eng"); 
baseApi.setImage(bitmap);
String recognizedText = baseApi.getUTF8Text();
ArrayList<Rect> boxes = baseApi.getCharacters().getBoxRects();
Pixa pixa = baseApi.getCharacters();
baseApi.end(); 
```

在这里我可以看到每个字符的文本和框，但有时文本的大小与框数组的大小不同，则无法设置读取字符的框。

有没有办法获得确切的盒子和它的字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:23:27.657

使用 ResultIterator 而不是`getCharacters()`：

```
// Iterate through the results.
final ResultIterator iterator = baseApi.getResultIterator();
String lastUTF8Text;
float lastConfidence;
int count = 0;
iterator.begin();
do {
    lastUTF8Text = iterator.getUTF8Text(PageIteratorLevel.RIL_WORD);
    lastConfidence = iterator.confidence(PageIteratorLevel.RIL_WORD);
    count++;
} while (iterator.next(PageIteratorLevel.RIL_WORD)); 
```

# css - css垂直居中固定定位div

> ID：14583550
> 
> 赞同：49
> 
> 时间：2013-01-29T13:01:17.493
> 
> 标签：css

我有以下 HTML 用于某种灯箱项目。

```
<div id="lightbox">
  <img id="image" src="" />
</div> 
```

即使用以下 CSS：

```
#lightbox{
display:none;
position:fixed;
width:100%;
text-align:center;
z-index:600;
cursor:pointer;
left:0;
top:100px;
}

#image{
position:relative;
height:600px;
border:1px solid grey;
} 
```

为了让图像始终处于水平中心，我只是在包装器 div 上使用 text-align:center，所以我 100% 确定它是正确的。

我遇到了垂直居中的问题，我正在使用一种解决方法，即在#lightbox 属性中简单地设置顶部值。

如您所见，图像的高度是已知的，因此在 jQuery 中很容易实现，但我正在寻找一个纯 CSS 解决方案。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2014-11-16T21:28:32.110

我见过的垂直和水平居中 a 的最佳解决方案`position: fixed` `div`是：

```
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%); 
```

[小提琴](http://jsfiddle.net/vincentpace/jak84zrx/215/)和[来源](http://css-tricks.com/quick-css-trick-how-to-center-an-object-exactly-in-the-center/)。您不需要知道 的尺寸，`div`也不需要任何 container `div`。centered`div`的宽度甚至可以是一个百分比（当我找到这个解决方案时，我一直在寻找这个）。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-29T13:11:41.473

或者，您可以尝试这个（仅当您知道图像的高度时才有效）：

```
#image{
position:relative;
height:600px;
top: 50%;
margin-top: -300px; /* minus half the height */
border:1px solid grey;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-19T10:50:16.237

这是我正在使用的几个 SASS 混合...我希望这会对某人有所帮助：

```
// vertically centers as relative
@mixin vertical-align {
    position: relative;
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
}

// vertically centers the element as absolute
@mixin vertical-center {
    position: absolute;
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
}

// horizontally centers the element as absolute
@mixin horizontal-center {
    position: absolute;
    left: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
}

// absolutely centers the element inside of its first non-static parent
@mixin absolute-center {
    position: absolute;
    top: 50%;
    left: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-19T04:43:35.400

使用 CSS3 的视口单元和 calc( ) 的组合来使灯箱居中，而不会有由于硬件加速而导致文本模糊的风险。此解决方案也是响应式的。将公式 `margin-top = -height / 2`从固定单位转换为视口单位

```
/* Overlay */
body::after
{
    position: fixed;
    z-index: 19000;
    top: 0;
    left: 0;

    display: block;

    width: 100%;
    height: 100%;

    content: ' ';

    opacity: .2;
    background-color: #000;
}

/* Lightbox */
.lightbox
{
    position: fixed;
    z-index: 15;
    top: 50%;
    width: 90vw;
    height: 90vh;
    margin: 0 5vw;
    margin-top: calc(-90vh / 2 );
} 
```

[JSFiddle](https://jsfiddle.net/wtalexy/v4wozv1r/13/)

有关相对长度单位和 calc( ) 的更多信息：

*   [https://developer.mozilla.org/en-US/docs/Web/CSS/length](https://developer.mozilla.org/en-US/docs/Web/CSS/length)
*   [https://developer.mozilla.org/en-US/docs/Web/CSS/calc](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)

**详细示例**

```
body {
    margin: 0;
}
/* The Overlay */
 body::after {
    position: fixed;
    z-index: 14;
    top: 0;
    left: 0;
    display: block;
    width: 100%;
    height: 100%;
    content:' ';
    opacity: .5;
    background-color: #000;
}
/* The Lightbox */
 .lightbox{
    position: fixed;
    z-index: 15;
    top: 50%;
    width: 60vw;
    height: 60vh;
    margin: 0 20vw;
    margin-top: calc(-60vh / 2);
    background:#fff;
    border: 1px solid white;
    border-radius: 5px;
    overflow:hidden;
    box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.8);
}

/* Bonus: responsive and centered image */
 .lightbox h1 {
     box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.8);
     position: relative;
     padding-left: 1em;
     font-family: sans-serif;
     color: #E2E8F2;
 }
.highlight
{
    color: #4E2622;
}
 .lightbox img {
    max-width: 120%;
    height: auto;
    position:absolute;
    top: 50%;
    left: 50%;
    -webkit-transform: translate(-50%, -50%);
    -moz-transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
    -o-transform: translate(-50%, -50%);
    transform: translate(-50%, -50%);
}
```

```
<div class="lightbox">
    <img src="https://pbs.twimg.com/media/CMSrIg_XAAAQU3a.jpg:large">
        <h1><span class="highlight">Sono</span> Neko その猫&lt;/h1>
</div>

<h1>Leave dead animals as gifts</h1>

<h3>Meowwww missing until dinner time</h3>

<p>Cat ipsum dolor sit amet, vommit food and eat it again. Find something else more interesting favor packaging over toy yet hide at bottom of staircase to trip human or intently stare at the same spot, but poop in litter box, scratch the walls attack feet ears back wide eyed. Scratch leg; meow for can opener to feed me. Where is my slave? i'm getting hungry purr for no reason or eat a plant, kill a hand eat a plant, kill a hand. Where is my slave? i'm getting hungry jump around on couch, meow constantly until given food, , so chase dog then run away yet stick butt in face, for poop on grasses for rub face on owner, under the bed. Brown cats with pink ears meow destroy the blinds why must they do that, and see owner, run in terror. Meowing non stop for food play time, yet stand in front of the computer screen get video posted to internet for chasing red dot poop in litter box, scratch the walls. Destroy couch leave dead animals as gifts why must they do that, for find something else more interesting hopped up on catnip sleep in the bathroom sink. Kitty power! pooping rainbow while flying in a toasted bread costume in space eat grass, throw it back up and spread kitty litter all over house. I like big cats and i can not lie. Under the bed brown cats with pink ears loves cheeseburgers has closed eyes but still sees you yet chase red laser dot. Claw drapes drink water out of the faucet and behind the couch refuse to leave cardboard box but hunt anything that moves. Rub face on owner favor packaging over toy yet play time. Hide when guests come over love to play with owner's hair tie. Purr for no reason make meme, make cute face eat a plant, kill a hand all of a sudden cat goes crazy, or stare at the wall, play with food and get confused by dust for hate dog love to play with owner's hair tie. Sleep on keyboard eat grass, throw it back up but hopped up on catnip make meme, make cute face. Pooping rainbow while flying in a toasted bread costume in space. Chase imaginary bugs destroy the blinds claws in your leg for hack up furballs. I am the best chase laser but i am the best yet meow all night having their mate disturbing sleeping humans and hunt by meowing loudly at 5am next to human slave food dispenser. Destroy the blinds. Eat a plant, kill a hand run in circles, and chew iPad power cord, and rub face on everything, and sit in box mark territory, so ignore the squirrels, you'll never catch them anyway. Present belly, scratch hand when stroked nap all day, and spot something, big eyes, big eyes, crouch, shake butt, prepare to pounce destroy couch, but put toy mouse in food bowl run out of litter box at full speed .</p>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-20T20:58:35.173

如果您希望图像具有流体大小，可以使用视图的高度作为参考：

```
#img {
   position: relative; /* or absolute or fixed depending on your needs */
   top: 50%;
   height: 80vh;
   margin-top: -40vh; /* minus half the height */
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-18T13:35:44.453

为我解决的问题是从**那里****添加一个具有这些属性的空超级父**级 -> 每个子级或子级都将垂直和水平居中。

**如果您只需要水平/垂直**删除我在代码注释中写的不必要的属性。

CSS：

```
.page-area{
      position: fixed;
      z-index: 5;/*not must but usually fixed elements require to be top*/
      height: 100%;
      width: 100%;
      display: flex;
      justify-content: center;/*define the horizontally centering*/
      align-items: center;/*define the vertically centering*/
    } 
```

HTML：

```
 <div class = "page-area">
    <div>My centered element/s</div>
 </div> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-29T13:04:47.587

要使项目垂直居中，您需要以下 2 个 css 属性：

```
display:table-cell;
vertical-align:middle; 
```

示例：http: [//jsfiddle.net/yjv94/](http://jsfiddle.net/yjv94/)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-10-02T10:13:57.693

你检查过这个解决方案吗？：

[CSS：当不知道div的固定大小时垂直对齐div](https://stackoverflow.com/questions/7206640/css-vertically-align-div-when-no-fixed-size-of-the-div-is-known)

在这里，您不需要声明高度。

问候

# user-interface - 如何在 GAS 中拆分行数组？

> ID：14583551
> 
> 赞同：0
> 
> 时间：2013-01-29T13:01:17.667
> 
> 标签：user-interface, google-apps-script, google-sheets

我有一个在 E10:O10 范围内的数组，当我输入以下脚本时：

```
var array1 = ss.getRange('E10:O10').getValues();
Logger.log(array1)
for (var i in array1)
{
panel.add(app.createLabel(array1), 10, 12);  
//Can I do something with array1.length + '' in here to split the values?
} 
```

该数组在它们之间出现逗号。有什么方法可以将它们拆分并定义像素宽度，还是需要使用 array1.length？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:22:17.907

即使仅提取一行，使用 getValues 检索的数组也是二维的。就像是：

```
var array1 = ss.getRange('E10:O10').getValues();
Logger.log(array1)
for (var i = 0; i < array1[0].length; i++ )
{
panel.add(app.createLabel(array1[0][i], 10, 12);  
} 
```

# php - 在更新或插入之前检查 - 性能？

> ID：14583552
> 
> 赞同：0
> 
> 时间：2013-01-29T13:01:19.147
> 
> 标签：php, mysql, performance

目前我有以下设置将数据从 PHP 类保存到 MySQL 数据库。

```
$old_value = SELECT from db;
$new_values = $this->get_values();

if(empty($old_value)) {
  INSERT into db
}
if($old_value != $new_value) {
  UPDATE db
}
if(empty($new_value)) {
  DELETE db
} 
```

有没有更好更快的方法？我想过像“删除所有旧的”-“插入所有东西”这样的东西，但这要慢得多。

# android - 重新创建片段时自定义处理程序中的内存泄漏

> ID：14583554
> 
> 赞同：0
> 
> 时间：2013-01-29T13:01:46.047
> 
> 标签：android, android-fragments, android-memory

以下是`Fragment`我用来显示简单秒表的精简版。该应用程序在平板电脑上运行良好。但是，在手机上，方向变化会导致在新活动中重新创建片段，我遇到了内存泄漏。

```
public class TimerFragment extends BaseFragment {

    private static final int MESSAGE_UPDATE_TEXT = 0;

    private TextView text;

    private static final String KEY_START_TIME = "KEY_START_TIME";
    private static final String KEY_ELAPSED_TIME = "KEY_ELAPSED";

    private long startTime;
    private long elapsedTime;

    private static boolean running;

    private final TimerHandler handler = new TimerHandler(this);

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {     
        setHasOptionsMenu(true);
        setUpHomeButton(false);

        View view = inflater.inflate(R.layout.fragment_timer, container, false);

        text = (TextView) view.findViewById(R.id.timerText);

        if(savedInstanceState != null) {
            startTime = savedInstanceState.getLong(KEY_START_TIME);
            elapsedTime = savedInstanceState.getLong(KEY_ELAPSED_TIME);
        }

        if(running) {
            handler.removeCallbacks(timer);
            handler.postDelayed(timer, 0);
        }

        updateText();

        return view;
    }

    private void updateText() {
        if(elapsedTime == 0L) {
            text.setText("0:00");
            return;
        }

        int sec = (int) (elapsedTime / 1000);
        int min = sec / 60;
        sec = sec % 60;

        text.setText(min + ":" + sec);

    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        handler.removeCallbacks(timer);

        outState.putLong(KEY_START_TIME, startTime);
        outState.putLong(KEY_ELAPSED_TIME, elapsedTime);
    }

    private final Runnable timer = new Runnable() {

        @Override
        public void run() {
            long now = System.currentTimeMillis();
            elapsedTime = now - startTime;

            running = true;
            handler.postDelayed(this, 1000);
            handler.sendEmptyMessage(MESSAGE_UPDATE_TEXT);
        }
    };

    private static class TimerHandler extends Handler {
        private final WeakReference<TimerFragment> weakFragment;

        public TimerHandler(TimerFragment f) {
            weakFragment = new WeakReference<TimerFragment>(f);
        }

        @Override
        public void handleMessage(Message msg) {
            TimerFragment fragment = weakFragment.get();
            switch (msg.what) {
            case MESSAGE_UPDATE_TEXT:
                if(fragment != null) {
                    fragment.updateText();
                }
                break;

            default:
                break;
            }

        }
    }
} 
```

Eclipse MAT 甚至给了我这个：

```
One instance of "android.os.MessageQueue" loaded by "<system class loader>" occupies 1     529 600 (14,19%) bytes. The memory is accumulated in one instance of "android.os.Message"     loaded by "<system class loader>".

Keywords
android.os.Message
android.os.MessageQueue 
```

但是，当我在平板电脑上运行时分析内存时，上述内容不会出现（始终单一活动）。

关于如何解决这个问题的任何想法？如果我正确理解了这个问题，我可能不会，我认为当手机上发生方向变化时会创建多个处理程序。

如果我的问题难以理解，请给我一个提示，我会尝试更好地解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:40:26.060

使用时应始终遵循一条简单的规则`Handler`。每次你写的时候，你`handler.postDelayed`也应该在`handler.removeCallbacks`某个地方写。

在您的情况下，您正在调用方法`handler.postDelayed(timer, 0)`，`onCreateView`因此`onDestroyView`是最合适的调用位置`handler.removeCallbacks(timer)`

# c# - 将 DataGridView 复制到具有所有颜色、单元格格式等的另一个 DataGridView

> ID：14583559
> 
> 赞同：0
> 
> 时间：2013-01-29T13:02:00.353
> 
> 标签：c#, datagridview, colors, copy

我有一个关于 DataGridviews 的问题。我想将所有值、颜色和 ErrorText 的 DGV1 复制到 DGV2。有可能做到吗？

我做了这样的事情：

```
dataGridView3.DataSource = (DataTable)dataGridView1.DataSource 
```

但是此解决方案仅复制值。我想拥有所有颜色、ErrorText 等，就像原来的一样。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:10:30.950

你真的不能轻易做到这一点。（请参阅此处的讨论：[克隆 GUI 组件](https://stackoverflow.com/questions/9589149/cloning-a-gui-component)）有各种对象克隆方法，但它们需要 ISerializable 或 ICloneable 才能工作，这两种方法 DataGridView 都没有实现。您还可以尝试像 [AutoMapper](http://automapper.org/)这样的对象映射库 。

# python - Selenium：检索向下滚动时加载的数据

> ID：14583560
> 
> 赞同：4
> 
> 时间：2013-01-29T13:02:03.937
> 
> 标签：python, ajax, testing, selenium, integration-testing

我正在尝试检索具有 ajax-load 向下滚动功能 alla Twitter 的页面中的元素。由于某种原因，这无法正常工作。我添加了一些打印语句来调试它，我总是得到相同数量的项目，然后函数返回。我在这里做错了什么？

```
wd = webdriver.Firefox()
wd.implicitly_wait(3)

def get_items(items):
    print len(items)
    wd.execute_script("window.scrollTo(0, document.body.scrollHeight);")
    # len(items) and len(wd.find_elements-by...()) both always seem to return the same number
    # if I were to start the loop with while True: it would work, but of course... never end
    while len(wd.find_elements_by_class_name('stream-item')) > len(items):
        items = wd.find_elements_by_class_name('stream-item')
        print items
        wd.execute_script("window.scrollTo(0, document.body.scrollHeight);")
    return items

def test():
    get_page('http://twitter.com/')
    get_items(wd.find_elements_by_class_name('stream-item')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:43:10.553

试着在两者之间睡一觉

```
wd = webdriver.Firefox()
wd.implicitly_wait(3)

def get_items(items):
    print len(items)
    wd.execute_script("window.scrollTo(0, document.body.scrollHeight);")
    # len(items) and len(wd.find_elements-by...()) both always seem to return the same number
    # if I were to start the loop with while True: it would work, but of course... never end

    sleep(5) #seconds
    while len(wd.find_elements_by_class_name('stream-item')) > len(items):
        items = wd.find_elements_by_class_name('stream-item')
        print items
        wd.execute_script("window.scrollTo(0, document.body.scrollHeight);")
    return items

def test():
    get_page('http://twitter.com/')
    get_items(wd.find_elements_by_class_name('stream-item')) 
```

注意：硬睡眠只是为了证明它有效。请改用 waits 包来等待智能条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-21T11:29:25.263

while 循环中的条件是我的用例的问题。这是一个无限循环。我通过使用计数器解决了这个问题：

```
def get_items(items):

    item_nb = [0, 1] # initializing a counter of number of items found in page

    while(item_nb[-1] > item_nb[-2]):   # exiting the loop when no more new items can be found in the page

        items = wd.find_elements_by_class_name('stream-item')
        time.sleep(5)
        browser.execute_script("window.scrollTo(0, document.body.scrollHeight);")

        item_nb.append(len(items))

    return items 
```

```

# php - 试图上传文件，但它一直显示无效文件

> ID：14583562
> 
> 赞同：0
> 
> 时间：2013-01-29T13:02:07.400
> 
> 标签：php, upload

上传文件.php

```
<?php
 $allowedExts = array("doc", "pdf");
 $extension = end(explode(".", $_FILES["file"]["name"]));
 if ((($_FILES["file"]["type"] == "text/doc")
 || ($_FILES["file"]["type"] == "text/pdf"))
 && ($_FILES["file"]["size"] < 500000000)
 && in_array($extension, $allowedExts))
   {
   if ($_FILES["file"]["error"] > 0)
     {
     echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
     }
   else
     {
     echo "Upload: " . $_FILES["file"]["name"] . "<br>";
     echo "Type: " . $_FILES["file"]["type"] . "<br>";
     echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
     echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";
     move_uploaded_file($_FILES["file"]["tmp_name"],
       "upload/" . $_FILES["file"]["name"]);
        echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
       }}
      else { echo "Invalid file";

   }

 ?> 
```

上传者.php

```
<form action="uploadfile.php" method="post"
 enctype="multipart/form-data">
 <label for="file">Filename:</label>
 <input type="file" name="file" id="file"><br>
 <input type="submit" name="submit" value="Submit">
 </form> 
```

不知道为什么，我试图上传文件，但点击上传后它一直显示无效文件。我不知道怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:06:14.323

一个常见的缺陷是表单中缺少 enctype 属性。如果你想上传一个文件，你应该像下面这样。

```
<form method="POST" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:07:28.900

也许添加一些调试输出，例如： echo $extension; 检查您是否获得了文件名的正确部分。print_r($_FILES) 也可能有所帮助。如果这仍然无济于事，请尝试将 if 语句的每个部分放在单独的“if”中，这样​​您就可以检查哪个失败了。

# algorithm - 随机部分拆分数字

> ID：14583566
> 
> 赞同：1
> 
> 时间：2013-01-29T13:02:15.107
> 
> 标签：algorithm, random

这只是我昨晚在床上时想到的一个问题:)。

你如何将一个数字，我们称它为 N，分成 M 个随机部分，以便每个部分具有相同的概率成为从 0 到 N 的数字。

例如：N=5，M=3

该算法应返回如下数组之一：

```
[0,2,3]   //0 + 2 +3 =5
[1,1,3]  
[0,0,5]  
[3,2,0]  
[2,2,1]  
...etc 
```

编程语言并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:28:11.223

我刚刚订阅分享我关于这个特定问题的结果。我已经找到了一个令我满意的解决方案，即使显然这不是 100% 的随机数拆分。但它符合我的需求，而且资源非常少。

我为您提供了该方法的代码（它是一种递归方法），并带有对特定部分的注释（我认为其他部分非常简单）。代码是用 AS3 编写的，但语言很容易阅读：

```
/**
 * This function splits a unique number into many numbers whose total equals to the one given as a parameter.
 * The function only works for size equals to a power of 2, but I think it can be easily done for any size,
 * by making as many "power of 2" calls as necessary to get a good final result.
 * @param   total The expected value of the sum of the resulting numbers
 * @param   minValue The minimum value each number can take
 * @param   maxValue The maximum value each number can take
 * @param   size The number of numbers we want to split the total into
 * @param   stepNum The step number of the recursive calls. Used to enhance the results of the algorithm.
 * @return
 */
    private function splitTotalInTwo(total:int, minValue:int, maxValue:int, size:int, stepNum:int):Vector.<int>
    {
        var result:Vector.<int> = new Vector.<int>();

        // we determine the min and max values allowed for the random generated number so that it doesn't 
        // make the second group impossible to process with success
        var minRand:int = Math.max(size * minValue, total - (size * maxValue));
        var maxRand:int = Math.min(size * maxValue, total - (size * minValue));

        // the balanceFactor is used to make the split tighter in the early stages of the recursive algorithm, 
        // therefore ensuring a best number distribution in the end. 
        // You can comment the next three lines to see the number distribution of th inital algorithm.
        // You can alsocchange the balancefactor to get which results you like most. 
        // This var good also be passed as parameter to fine tune the algorithm a little bit more.
        var balanceFactor:Number = 0.4;
        var delta:int = Math.floor((maxRand - minRand) * (0.4 / stepNum));
        minRand += delta;
        maxRand -= delta;

        var random:int = Math.floor(Math.random() * (maxRand - minRand)) + minRand;
        if (size > 1)
        {
            result = result.concat(splitTotalInTwo(random, minValue, maxValue, size / 2, stepNum+1), splitTotalInTwo(total - random, minValue, maxValue, size / 2, stepNum+1));
        }
        else 
        {
            result.push(random);
            result.push(total - random);
        }

        return result;
    } 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:11:27.703

假设我们有一种方法可以在 之间生成均匀随机分布的数字`[0,N]`。`M`一个明显的方法是在每次生成后更新 N的范围内连续生成随机数`[0,N]`，因为所有生成的数字的总和必须等于`N`。您必须在数学上证明这将导致成对的均匀随机分布的集合`[x1,x2,....,xM]`。我会说这**不是微不足道**的。（例如您的示例，其中第一个数字被随机选择为 5，以下两个数字**必须**为零，因为总和不能超过`N=5`，因此随机性是有偏差的）

您可能会考虑的另一种“*蛮力*”方法是生成所有可能排列的集合，`[x1,x2,....,xM]`其中总和为`x1+x2+...+xM = N`. 如果集合包含`Y`可能的排列，您可以使用我们之前定义的随机生成器来获取范围内的随机数`[1,Y]`并从您的集合中选择该元素

请注意，这只是我的想法，如果你想确保真正随机的均匀分布，你必须在数学上检查这些建议。

编辑：我也刚刚意识到，他们可能以您描述问题的方式，数字拆分的顺序无关紧要（即与 相同`[0,2,3]`）。这减少了分组集合中总唯一排列的数量`[2,3,0]``[0,3,2]``Y`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:33:47.040

你可以试试我的方法。最初我计算了可能结果的数量，然后选择随机（在 C# 上实现）：

```
class Program
{
    private static int[,] dp;

    private static void Populate(int m, int n)
    {
        dp[0, 0] = 1;
        for (int i = 1; i <= m; i++)
        {
            dp[i, 0] = 1;
            for (int j = 1; j <= n; j++)
            {
                dp[i, j] = dp[i - 1, j] + dp[i, j - 1];
            }
        }
    }

    private static int[] GetResultAt(int index, int m, int n)
    {
        int[] result = new int[m];

        while (m > 0)
        {
            for (int i = 0; i <= n; i++)
            {
                if (index <= dp[m - 1, i] && dp[m - 1, i] > 0)
                {
                    m--;
                    result[m] = n - i;
                    n = i;
                    break;
                }
                index = index - dp[m - 1, i];
            }
        }

        return result;
    }

    static void Main(string[] args)
    {
        int n = 5;
        int m = 3;
        dp = new int[m + 1, n + 1];
        Populate(m, n);

        int randomPosition = 7;// Random value from 1 and dp[m,n] range.
        int[] result = GetResultAt(randomPosition, m, n);

        Console.WriteLine(result);
    }
} 
```

定义 required `m`，`n`并`randomPosition`得到结果。这个算法的复杂度是**O(M*N)**用于 precalc 和**O(M+N)**用于获取随机数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T14:37:34.443

```
public static Integer[] sliceUnequally(int value, int numberOfSlices) {
    if (numberOfSlices > value) {
        throw new IllegalArgumentException(
                String.format("!!! Cannot carve %d into %d slices", value, numberOfSlices));
    }

    final Integer[] slices = new Integer[numberOfSlices];

    int allocated = numberOfSlices;
    for (int i = 0; i < numberOfSlices; i++) {
        if (i == (numberOfSlices - 1)) {
            slices[i] = 1 + (value - allocated);
        } else {
            int slice = new Double((value - allocated) * random.nextDouble()).intValue();
            slices[i] = 1 + slice;
            allocated += slice;
        }
    }

    return slices;
} 
```

# objective-c - iPhone 5 相机上的绿框

> ID：14583570
> 
> 赞同：3
> 
> 时间：2013-01-29T13:02:25.750
> 
> 标签：objective-c, cocos2d-iphone

我使用一个`UIImagePickerController`来显示后置摄像头作为背景。一切都按预期工作，但是在图像中`iPhone 5`可能`iPhone 4s`有一个绿色框，例如

![人脸检测](../Images/5ef87d375cfe967e1bc0aa710b58d8a9.png)

我认为是人脸检测功能，但我现在不知道如何禁用它。有什么建议吗？

这是我使用的代码片段`UIImagePickerController`：
我在我的 .h 文件中声明广告 UIView

```
UIView *overlay; 
```

在我的 .m 文件的 init 方法中

```
#define CAMERA_TRANSFORM  1.24299

UIImagePickerController *uip;

@try {
      uip = [[[UIImagePickerController alloc] init] autorelease];
      uip.sourceType = UIImagePickerControllerSourceTypeCamera;
      uip.showsCameraControls = NO;
      uip.toolbarHidden = YES;
      uip.navigationBarHidden = YES;
      uip.wantsFullScreenLayout = YES;
      uip.cameraViewTransform = CGAffineTransformScale(uip.cameraViewTransform, CAMERA_TRANSFORM, CAMERA_TRANSFORM);
}
@catch (NSException * e) {
    [uip release];
    uip = nil;
}
@finally {
    if(uip) {
        [overlay addSubview:[uip view]];
        [overlay release];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:10:19.430

看看[这个帖子](https://stackoverflow.com/questions/10746212/cidetector-and-uiimagepickercontroller)

他的问题是相反的，我敢肯定，如果您调整特征检测器的设置，您将能够将其关闭，如果它无法打开，请尝试以镜像模式或倒置模式运行它，而且它无法检测到人脸并且似乎“关闭”

但我很确定它可以被禁用。

这是我发现的[另一个参考](https://stackoverflow.com/questions/13475387/proper-usage-of-cidetectortracking)另外请务必查看[类参考](http://developer.apple.com/library/ios/#documentation/CoreImage/Reference/CIDetector_Ref/Reference/Reference.html)

## 更新：

## 警告：我根本不建议使用它，它只是为了展示我设法隐藏这些盒子的一种方式，它迟早会坏掉。

在修改了一下之后，我设法找到了包含这些小方块的子视图并将其隐藏属性设置为 YES

简单地说，在你的初始化代码的末尾，你 makeKeyAndVisible，把这个：

```
[[[[[[[[[[[[[[uip childViewControllers] objectAtIndex:0] view]
subviews] objectAtIndex:0]
subviews] objectAtIndex:0]
subviews] objectAtIndex:0]
subviews] objectAtIndex:0]
subviews] objectAtIndex:0]
setHidden:YES]; 
```

抱歉，格式不好，我很匆忙，但你明白了，而且在搞砸的时候，我发现你可以控制相机光圈视图和其他一些功能。但这应该可以解决问题 此外，这不会禁用面部检测，这意味着当用户完成选择时，您可以找出检测到多少面部特征！

我也认为这只适用于 iPhone 4s 及更高版本！，你需要进行大量测试，这真的是非常糟糕的黑客，我不建议在生产应用程序上使用！

# jquery - 自定义 Javascript 库的标准符号

> ID：14583573
> 
> 赞同：0
> 
> 时间：2013-01-29T13:02:33.397
> 
> 标签：jquery, javascript

jQuery 使用 $（美元符号），是否有可以用于我自己的自定义库的**标准符号？**这样任何人都会理解它的习惯吗？

有时我只需要getEmementById 和class，并且能够添加class 和一些更简单的东西。我想这样做 $('#someId').addClass('foo'); 但**我想让其他查看代码的人和我自己明白它是一个自定义库**，而不是 jQuery。那么，这有标准的标志吗？

编辑：我可以使用命名空间，但这不如单个符号漂亮。而且我不明白为什么没有一个已经被许多人用于此目的。没有一个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:06:23.333

函数必须具有有效的变量名。因此，根据规范，变量名可以以 $、_、小写/大写 unicode 等开头。

不过，最好将模块模式与 IIFE 结合使用。

IE 如果您的库被分配给变量“myLibrary”

```
var myLibrary = (function() {
  return {
     someFunction: function(){ ... };
  }
})() 
```

然后你可以将它传递给一个 IIFE（立即调用的函数表达式）并给它你自己的变量 - 例如使用 JQuery 的 $

```
(function($) { 
    $.someFunction();
})(myLibrary); 
```

由于`$`您的范围优先级，这样做没有问题 - 当然除非您想使用 jQuery

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:05:30.250

您可以使用库的名称：

```
myLibrary('#someId').addClass('foo'); 
```

这种方式不会有任何混乱。请记住，这`$`只是`jQuery`函数的别名，如果您想将[它与其他库](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)一起使用，您可以重新定义它。

# android - 如何为android中的所有分辨率设计应用程序UI

> ID：14583575
> 
> 赞同：0
> 
> 时间：2013-01-29T13:02:35.640
> 
> 标签：android, user-interface

我正在为我的嵌入式项目开发 android 应用程序，我对 android 非常陌生。我开发的 UI 应该适用于 android 中的所有类型的屏幕（所有分辨率）。

下面是我的各种分辨率的代码：

```
 if ( ((width>=240)&&(width<=320))&&((height>=320)&&(height<=480)) )
    {
        setContentView(R.layout.xsmall_layout);
    }
    else if( ((width>=360)&&(width<=480))&&((height>=640)&&(height<=720)) )
    {
        setContentView(R.layout.small_layout);
    }
    else if ( ((width>=480)&&(width<=540))&&((height>720)&&(height<=960)) )
    {
        setContentView(R.layout.medium_layout);
    }
    else if ( ((width>540)&&(width<=800))&&((height>=1024)&&(height<=1280)) )
    {
        setContentView(R.layout.vlarger_layout);        
    }
    else if ( ((width>800)&&(width<=1080))&&((height>=1280)&&(height<=1920)) )
    {
        setContentView(R.layout.x_vlarger_layout);
    }
    else if ( ((width>=800)&&(width<=1024))&&((height>=480)&&(height<600)) )
    {
        setContentView(R.layout.wlarger_layout);
    }
    else if ( ((width>=1024)&&(width<=1280))&&((height>=600)&&(height<=800)) )
    {
        setContentView(R.layout.x_wlarger_layout);
    }
    else if ( ((width>=1280)&&(width<=2560))&&((height>800)&&(height<=1600)) )
    {
        setContentView(R.layout.xx_wlarger_layout);
    } 
```

它工作正常，但这是一个好习惯吗？在我的电脑（英特尔双核，2GB RAM）中，代码中的最后一个分辨率不起作用。我试过 1920x1200 和 2560x1600 。Android模拟器只是没有运行。只是它即将到来的黑屏。这是我的电脑问题还是什么..？帮帮我前辈......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:07:21.697

取而代之的是，您可以在文件夹中创建不同的布局文件`res`夹，例如：

```
layout-land
layout-large
layout-large-land
layout-xlarge
layout-xlarge-land 
```

在每个文件夹中保持 xml 布局文件的名称相同，但您可以提及不同的尺寸值。

无论如何，这是您可以执行的测试用例：

1.  创建文件夹布局-大
2.  复制 main.xml 文件并粘贴到 layout-large 文件夹中
3.  使用一些随机值更改 TextView 的文本大小。
4.  在不同密度的模拟器中加载应用程序。享受 ！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:13:54.070

请参考这个：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

在本文档中，他们清楚地解释了所有支持的屏幕分辨率和 dpi。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:13:25.620

嗨，火星尝试这样[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

在这里，他们在 res 中创建了这些布局文件夹

并将相同`xml`的文件放入每个布局：

```
layout

         layout-small
                        layout-large
                                         layout-xlarge 
```

这东西会照顾屏幕大小。

即用于桌子、智能手机等

# python - 根据标准对 pandas DataFrames 进行排序

> ID：14583576
> 
> 赞同：0
> 
> 时间：2013-01-29T13:02:37.183
> 
> 标签：python, pandas

我有一个结构如下的熊猫数据框：

```
data = DataFrame({'Cat1':['A', 'B', 'B', 'C'], 'Cat2': ['X', 'Y', 'Z', 'X'], 'Counter': [0, 4, 1, 5]}) 
```

现在我想添加一个单独的列，按 Cat1 排名（所以在这种情况下：1、3、2、4 作为新列）。我的第一次尝试是：

```
data['ranking'] = data['ranking'] + data[data['Cat1'] == 'A']['Counter'].rank(ascending=0).fillna(0) 
```

但是，当我添加第二个类别（data['Cat1']=='B' 作为条件）时，它会覆盖现有值。这是我所期望的，因为据我所知，我必须使用 .add() 。但是，以下脚本也会发生同样的情况：

```
data['ranking'].add(data[data['Cat1']=='A']['Counter'].rank(ascending=0)) 
```

还使用 NA 覆盖 Cat1==B 的所有值。我怎样才能避免这种情况？

提前致谢！

-----------------------**编辑！！**------------------

假设这是我的桌子：

![在此处输入图像描述](../Images/f8bef5b10a6e6c069463bd0e2b4ca2e0.png)

普通排名会给我从 1 到 12 的所有数字的排名。现在我需要的是基于类别的排名，并作为原始 python DataFrame 中的附加列。

因此，最后一列应该是：2（a 的第二个值）3（a 的第三个值）1（a 的第一个值）1（b 的第一个值）1（第一个c) 的值 5 2 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:19:02.260

我不确定我是否正确理解了您的问题；也许下面的这个有效？

```
data['Cat1'][data['Counter'].rank(ascending=0) - 1] 
```

--**编辑**--

如评论中所示，我的解决方案是

```
data['ranking'] = data.groupby('Cat1')['Counter'].rank(ascending=0) 
```

我想不出别的了，抱歉。也许其他人会有不同的看法..

# sql - 从基于 SET 的 SQL 中的 VARCHAR 字段中提取段/值的最佳方法

> ID：14583577
> 
> 赞同：1
> 
> 时间：2013-01-29T13:02:37.133
> 
> 标签：sql-server, sql, sql-server, regex, tsql, sql-server-2008-r2

以以下示例数据为例：

```
SELECT 'HelpDesk Call Reference F0012345, Call Update, 40111' AS [Subject]
UNION ALL
SELECT 'HelpDesk Call Reference F0012346, Call Resolved, 40112' AS [Subject]
UNION ALL
SELECT 'HelpDesk Call Reference F0012347, New call logged, 40113' AS [Subject] 
```

我想做的是按如下方式提取这些数据：

![这就是我需要选择数据的方式](../Images/9fc99b51b8a2e0cfcdee03865e704627.png)

如您所见，我需要将 Ref、Type 和 OurRef 提取为单独的列，以确保在处理生成的电子邮件时有效地基于集合的 SQL。

通常对于这种情况，我会使用如下函数：

```
CREATE FUNCTION dbo.fnParseString (
    @Section SMALLINT ,
    @Delimiter CHAR ,
    @Text VARCHAR(MAX)
)
RETURNS VARCHAR(8000)
AS 
    BEGIN
        DECLARE @NextPos SMALLINT;
        DECLARE @LastPos SMALLINT;
        DECLARE @Found SMALLINT;

        SELECT  @NextPos = CHARINDEX(@Delimiter, @Text, 1) ,
                @LastPos = 0 ,
                @Found = 1

        WHILE @NextPos > 0
            AND ABS(@Section) <> @Found 
            SELECT  @LastPos = @NextPos ,
                    @NextPos = CHARINDEX(@Delimiter, @Text, @NextPos + 1) ,
                    @Found = @Found + 1

        RETURN LTRIM(RTRIM(CASE
            WHEN @Found <> ABS(@Section) OR @Section = 0 THEN NULL
            WHEN @Section > 0 THEN SUBSTRING(@Text, @LastPos + 1, CASE WHEN @NextPos = 0 THEN DATALENGTH(@Text) - @LastPos ELSE @NextPos - @LastPos - 1 END)
            ELSE SUBSTRING(@Text, @LastPos + 1, CASE WHEN @NextPos = 0 THEN DATALENGTH(@Text) - @LastPos ELSE @NextPos - @LastPos - 1 END)
        END))
    END 
```

例如，然后我将 ref 之前的空格替换为包含逗号并拆分如下：

```
WITH    ExampleData
          AS ( SELECT   'HelpDesk Call Reference F0012345, Call Update, 40111' AS [Subject]
               UNION ALL
               SELECT   'HelpDesk Call Reference F0012346, Call Resolved, 40112'
               UNION ALL
               SELECT   'HelpDesk Call Reference F0012347, New call logged, 40113'
             )
    SELECT  dbo.fnParseString(2, ',', REPLACE([Subject], 'HelpDesk Call Reference ', 'HelpDesk Call Reference, ')) AS [Ref] ,
            dbo.fnParseString(3, ',', REPLACE([Subject], 'HelpDesk Call Reference ', 'HelpDesk Call Reference, ')) AS [Type] ,
            dbo.fnParseString(4, ',', REPLACE([Subject], 'HelpDesk Call Reference ', 'HelpDesk Call Reference, ')) AS [OurRef]
    FROM    ExampleData 
```

正如你所看到的，我有一个解决方案可以得到我想要的最终结果，但是使用凌乱的 udf 并不理想&我想知道[sql-server](/questions/tagged/sql-server "显示标记为“sql-server”的问题")是否有更好的方法来做这样的事情 - 也许是内联常规表达式？即我认为`PATINDEX()`接受正则表达式作为搜索字符串 - 这与`SUBSTRING()`可以做我需要但我真的不知道从哪里开始？

**编辑：**请注意，这是一个简化的示例，主题是可变的，我也将采用相同的技术来解析正文，正文将有 8 项数据，我需要使用各种分隔符来解析，所以这排除了使用，`ParseName()`因为它只允许 4 个部分，并且我不能使用固定长度（即`substring()`），因为长度会非常不同（特别是如果涉及不同的帮助台（它们是） - 这就是为什么我是沿着`PATINDEX()`&的思路思考`SUBSTRING()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:18:10.517

我建议使用这个：

```
;WITH CTE
AS
(
SELECT 'HelpDesk Call Reference F0012345, Call Update, 40111' AS [Subject]
UNION ALL
SELECT 'HelpDesk Call Reference F0012346, Call Resolved, 40112' AS [Subject]
UNION ALL
SELECT 'HelpDesk Call Reference F0012347, New call logged, 40113' AS [Subject]
)
, CTEPart
as
(
SELECT [Subject], REPLACE(SUBSTRING([Subject], 25, 1000), ', ', '.') Part
FROM CTE
)
SELECT
    [Subject],
    PARSENAME(Part, 1) AS [Ref],
    PARSENAME(Part, 2) AS [Type],
    PARSENAME(Part, 3) AS [OurRef]
FROM CTEPart 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:28:32.097

经过额外的工作，我们决定不使用 Art 的答案中的方法（即使它有效）。

我们需要一种更强大的方法来验证和提取子字符串，所以我通过 CLR 路线使用了正则表达式（感谢[Pondlife](https://stackoverflow.com/users/105264/pondlife)为我指明了正确的方向）。

我采取的方法如下：

**首先，我编译了以下 CLR：（从 C# 示例转换为 VB [Here](http://justgeeks.blogspot.co.uk/2008/08/adding-regular-expressions-regex-to-sql.html)）**

```
Imports System.Data
Imports System.Data.SqlClient
Imports System.Data.SqlTypes
Imports Microsoft.SqlServer.Server
Imports System.Text.RegularExpressions
Imports System.Text

Partial Public Class UserDefinedFunctions

    Public Shared ReadOnly Options As RegexOptions = RegexOptions.IgnorePatternWhitespace Or RegexOptions.Multiline

    <SqlFunction()> _
    Public Shared Function RegexMatch(ByVal input As SqlChars, ByVal pattern As SqlString) As SqlBoolean
        Dim regex As New Regex(pattern.Value, Options)
        Return regex.IsMatch(New String(input.Value))
    End Function

    <SqlFunction()> _
    Public Shared Function RegexReplace(ByVal expression As SqlString, ByVal pattern As SqlString, ByVal replace As SqlString) As SqlString
        If expression.IsNull OrElse pattern.IsNull OrElse replace.IsNull Then
            Return SqlString.Null
        End If

        Dim r As New Regex(pattern.ToString())
        Return New SqlString(r.Replace(expression.ToString(), replace.ToString()))
    End Function

    ' returns the matching string. Results are separated by 3rd parameter
    <SqlFunction()> _
    Public Shared Function RegexSelectAll(ByVal input As SqlChars, ByVal pattern As SqlString, ByVal matchDelimiter As SqlString) As SqlString
        Dim regex As New Regex(pattern.Value, Options)
        Dim results As Match = regex.Match(New String(input.Value))

        Dim sb As New StringBuilder()
        While results.Success
            sb.Append(results.Value)

            results = results.NextMatch()

            ' separate the results with newline|newline
            If results.Success Then
                sb.Append(matchDelimiter.Value)
            End If
        End While

        Return New SqlString(sb.ToString())

    End Function

    ' returns the matching string
    ' matchIndex is the zero-based index of the results. 0 for the 1st match, 1, for 2nd match, etc
    <SqlFunction()> _
    Public Shared Function RegexSelectOne(ByVal input As SqlChars, ByVal pattern As SqlString, ByVal matchIndex As SqlInt32) As SqlString
        Dim regex As New Regex(pattern.Value, Options)
        Dim results As Match = regex.Match(New String(input.Value))

        Dim resultStr As String = ""
        Dim index As Integer = 0

        While results.Success
            If index = matchIndex Then
                resultStr = results.Value.ToString()
            End If

            results = results.NextMatch()

            index += 1
        End While

        Return New SqlString(resultStr)

    End Function

End Class 
```

**我按如下方式安装了这个 CLR：**

```
EXEC sp_configure 
    'clr enabled' ,
    '1'

GO

RECONFIGURE
USE [db_Utility]

GO
CREATE ASSEMBLY SQL_CLR_RegExp FROM 'D:\Program Files\Microsoft SQL Server\MSSQL10_50.MSSQLSERVER\MSSQL\Binn\SQL_CLR_RegExp.dll' WITH
PERMISSION_SET = SAFE

GO
-- =============================================
-- Returns 1 or 0 if input matches pattern
-- VB function: RegexMatch(ByVal input As SqlChars, ByVal pattern As SqlString) As SqlBoolean
-- =============================================
CREATE FUNCTION [dbo].[RegexMatch]
    (
      @input [nvarchar](MAX) ,
      @pattern [nvarchar](MAX)
    )
RETURNS [bit]
    WITH EXECUTE AS CALLER
AS EXTERNAL NAME 
    [SQL_CLR_RegExp].[SQL_CLR_RegExp.UserDefinedFunctions].[RegexMatch]
GO

-- =============================================
-- Returns a comma separated string of found objects
-- VB function: RegexReplace(ByVal expression As SqlString, ByVal pattern As SqlString, ByVal replace As SqlString) As SqlString
-- =============================================
CREATE FUNCTION [dbo].[RegexReplace]
    (
      @expression [nvarchar](MAX) ,
      @pattern [nvarchar](MAX) ,
      @replace [nvarchar](MAX)
    )
RETURNS [nvarchar](MAX)
    WITH EXECUTE AS CALLER
AS EXTERNAL NAME 
    [SQL_CLR_RegExp].[SQL_CLR_RegExp.UserDefinedFunctions].[RegexReplace]
GO
-- =============================================
-- Returns a comma separated string of found objects
-- VB function: RegexSelectAll(ByVal input As SqlChars, ByVal pattern As SqlString, ByVal matchDelimiter As SqlString) As SqlString
-- =============================================
CREATE FUNCTION [dbo].[RegexSelectAll]
    (
      @input [nvarchar](MAX) ,
      @pattern [nvarchar](MAX) ,
      @matchDelimiter [nvarchar](MAX)
    )
RETURNS [nvarchar](MAX)
    WITH EXECUTE AS CALLER
AS EXTERNAL NAME 
    [SQL_CLR_RegExp].[SQL_CLR_RegExp.UserDefinedFunctions].[RegexSelectAll]
GO
-- =============================================
-- Returns finding matchIndex of a zero based index
-- RegexSelectOne(ByVal input As SqlChars, ByVal pattern As SqlString, ByVal matchIndex As SqlInt32) As SqlString
-- =============================================
CREATE FUNCTION [dbo].[RegexSelectOne]
    (
      @input [nvarchar](MAX) ,
      @pattern [nvarchar](MAX) ,
      @matchIndex [int]
    )
RETURNS [nvarchar](MAX)
    WITH EXECUTE AS CALLER
AS EXTERNAL NAME 
    [SQL_CLR_RegExp].[SQL_CLR_RegExp.UserDefinedFunctions].[RegexSelectOne]
GO 
```

**然后我编写了以下包装函数来简化使用：**

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Jordon Pilling>
-- Create date: <30/01/2013>
-- Description: <Calls RegexSelectOne with start and end text and cleans the result>
-- =============================================
CREATE FUNCTION [dbo].[RegexSelectOneWithScrub]
(
    @Haystack VARCHAR(MAX),
    @StartNeedle VARCHAR(MAX),
    @EndNeedle VARCHAR(MAX)
)
RETURNS VARCHAR(MAX)
AS
BEGIN
    DECLARE @ReturnStr VARCHAR(MAX)

    --#### Extract text from HayStack using Start and End Needles
    SET @ReturnStr = dbo.RegexSelectOne(@Haystack, REPLACE(@StartNeedle, ' ','\s') + '((.|\n)+?)' + REPLACE(@EndNeedle, ' ','\s'), 0)

    --#### Remove the Needles
    SET @ReturnStr = REPLACE(@ReturnStr, @StartNeedle, '')
    SET @ReturnStr = REPLACE(@ReturnStr, @EndNeedle, '')

    --#### Trim White Space
    SET @ReturnStr = LTRIM(RTRIM(@ReturnStr))

    --#### Trim Line Breaks and Carriage Returns
    SET @ReturnStr = dbo.SuperTrim(@ReturnStr)

    RETURN @ReturnStr

END
GO 
```

**这允许使用如下：**

```
DECLARE @Subject VARCHAR(250) = 'HelpDesk Call Reference F0012345, Call Update, 40111' 
DECLARE @Ref VARCHAR(250) = NULL

IF dbo.RegexMatch(@Subject, '^HelpDesk\sCall\sReference\sF[0-9]{7},\s(Call\sResolved|Call\sUpdate|New\scall\slogged),(|\s+)([0-9]+|unknown)$') = 1
    SET @Ref = ISNULL(dbo.RegexSelectOneWithScrub(@Subject, 'HelpDesk Call Reference', ','), 'Invalid (#1)')
ELSE
    SET @Ref = 'Invalid (#2)'

SELECT @Ref 
```

这在用于多个搜索时要快得多，并且在处理具有不同开头和结尾短语等的大量文本时更强大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:52:21.920

这个例子是 Oracle 查询。使用的所有函数都是 ANSI SQL 标准，适用于任何 SQL。此示例仅剪切字符串的 REF 部分。您只需对 Type、OutRef 等重复所有步骤...此示例假定您的 ref 将始终包含 0-0，并且在 ref 之后总会有 ','，可以用空格或任何其他字符替换. 可以使用 NVL()：INSTR(str, NVL(',', ' ')...)。我认为这种方法比将值硬编码到 SUBSTR 中更通用...：

```
SELECT str, SUBSTR(str, ref_start_pos, ref_end_pos) final_ref
 FROM
 (
  SELECT str, ref_start_pos, INSTR(str, ',', ref_start_pos)-ref_start_pos AS ref_end_pos
    FROM
    (
     SELECT str, INSTR(str, '0')-1 AS ref_start_pos
       FROM
       (
        SELECT 'HelpDesk Call Reference F0012345, Call Update, 40111' AS str
          FROM dual
        UNION ALL
        SELECT 'HelpDesk Call Reference F0012346, Call Resolved, 40112' 
          FROM dual
       )
     )
   )
  /

  SQL>

  STR                                                    |  FINAL_REF
  ------------------------------------------------------------------------
  HelpDesk Call Reference F0012345, Call Update, 40111   |  F0012345
  HelpDesk Call Reference F0012346, Call Resolved, 40112 |  F0012346 
```

SQL Server 版本（由 OP 添加）：

```
SELECT  [str] ,
        SUBSTRING([str], ref_start_pos, ref_end_pos) AS final_ref
FROM    ( SELECT    [str] ,
                    ref_start_pos ,
                    CHARINDEX(',', [str], ref_start_pos) - ref_start_pos AS ref_end_pos
          FROM      ( SELECT    [str] ,
                                CHARINDEX('Reference', [str]) + 10 AS ref_start_pos
                      FROM      ( SELECT    'HelpDesk Call Reference F0012345, Call Update, 40111' AS [str]
                                  UNION ALL
                                  SELECT    'HelpDesk Call Reference F0012346, Call Resolved, 40112' AS [str]
                                ) AS T1
                    ) AS T2
        ) AS T3 
```

# java - OpenJDK 64 位 Java 1.6：不支持 CLI 系统属性中的点？

> ID：14583586
> 
> 赞同：1
> 
> 时间：2013-01-29T13:03:34.500
> 
> 标签：java, command-line, properties, system, openjdk

Java的版本打印在下面：

```
$ java -version
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.5) (6b24-1.11.5-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

当像这样传递一个属性时：

```
java -Dmy.property=value -jar my.jar 
```

..它无法在代码中解决：

```
System.getProperty("my.property") // => null 
```

但是使用下划线代替点可以正常工作：

```
// CLI
java -Dmy_property=value -jar my.jar
// In the code:
System.getProperty("my_property") // => "value" 
```

这不是非标准行为吗？

如果相关，JAR 是通过 Maven 构建的，`maven-assembly-plugin`并且用于将依赖项捆绑到 JAR 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:44:05.570

最初我使用的格式不正确，`java -jar my.jar -Dmy.prop=value`而不是正确的`java -Dmy.prop=value -jar my.jar`. 但我很早就意识到了这一点，并修改了我的参数排序。

然而，事实证明，在编辑我正在编辑的单片命令链（其中包含此`java -jar`命令）时，我错误地创建了另一个不正确的命令结构：`java -jar -Dmy.prop=value my.jar`.

我第一次使用下划线命令被重写，因此无意中修复了后一个不正确的参数结构。

所以这个故事的寓意是：确保你在命令`-jar my.jar`结束时有权利。`java`总是！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:46:26.663

当您像这样设置属性名称时，Java 支持属性名称中的点。

几种可能的解释：

*   正在执行的*实际命令与此不同。*也许您的启动脚本中存在错误或其他问题。（尝试使用“set -x”让 shell 告诉你实际的命令选项是什么。）

*   `getProperty`在调用您查看之前，您的应用程序的其他一些部分正在取消设置该特定属性。

# sql - 从具有 XML 数据类型的表中查询 XML 数据

> ID：14583589
> 
> 赞同：2
> 
> 时间：2013-01-29T13:03:48.993
> 
> 标签：sql, sql-server, sql-server-2008

我有一个表作为 id、createdate、outputxml 作为列，其中 outputxml 是一个 XML 数据类型列，其信息如下

```
<storage xmlns="http://google.com " created-on="2012-12-29">
    <country>India</country>
    <state>tn</point>
    <period type="day" from="2012-12-27" to="2012-12-28" />
    <capacity-total mwh="12898463" mcm="1229.02" country-percentage="6.1%" />
    <net mwh="28004.00" mcm="2.66" />
</storage> 
```

我需要输出为：

> id, createdate, storage, created-on, 国家状态, 期间类型, 从, 到, 容量-总 mwh, 容量-总 mwh, 国家-百分比
> 
> 1 20-01-2012 [http://google.com](http://google.com) 2012-12-29 abc tn day 2012-12-27 2012-12-28 12898463 1229.02 6.1%

我尝试使用

```
 select X.N.value(N'(storage/@country)[1]', 'nvarchar(max)'),
        X.N.value(N'(storage/@sso)[2]', 'nvarchar(max)')
   from icissso..ssodataoutput as T
  cross apply T.outputxml.nodes(N'/storage/xmlns') as X(N) 
```

但它没有返回任何值。所以请提出一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:39:17.673

您需要定义[XML 命名空间](http://msdn.microsoft.com/en-gb/library/ms177607.aspx)并在访问值时使用它：

```
DECLARE @T TABLE (X XML);
INSERT @T VALUES ('<storage xmlns="http://google.com" created-on="2012-12-29">
                    <country>India</country>
                    <state>tn</state>
                    <period type="day" from="2012-12-27" to="2012-12-28" />
                    <capacity-total mwh="12898463" mcm="1229.02" country-percentage="6.1%" />
                    <net mwh="28004.00" mcm="2.66" />
                </storage>');

WITH XMLNAMESPACES ('http://google.com' AS x)
SELECT  [CreatedDate] = X.value('/x:storage[1]/@created-on', 'NVARCHAR(MAX)'),
        [Country] = X.value('/x:storage[1]/x:country[1]', 'NVARCHAR(MAX)'),
        [State] = X.value('/x:storage[1]/x:state[1]', 'NVARCHAR(MAX)'),
        [PeriodType] = X.value('/x:storage[1]/x:period[1]/@type', 'NVARCHAR(MAX)'),
        [From] = X.value('/x:storage[1]/x:period[1]/@from', 'NVARCHAR(MAX)'),
        [To] = X.value('/x:storage[1]/x:period[1]/@to', 'NVARCHAR(MAX)'),
        [capacity-total mwh] = X.value('/x:storage[1]/x:capacity-total[1]/@mwh', 'NVARCHAR(MAX)'),
        [capacity-total mcm] = X.value('/x:storage[1]/x:capacity-total[1]/@mcm', 'NVARCHAR(MAX)'),
        [country-percentage] = X.value('/x:storage[1]/x:capacity-total[1]/@country-percentage', 'NVARCHAR(MAX)')
FROM    @T; 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!3/a5811/2)**

# ios - 无法为 iOS 6 构建 XMPPFramework

> ID：14583590
> 
> 赞同：1
> 
> 时间：2013-01-29T13:03:48.683
> 
> 标签：ios, xcode, xmppframework

我在使用 XMPPFramework 时遇到了一些未解决的问题......

起初我下载它（[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework)）

据我所知，它是可以在 iOS6 中使用的最新版本...

其次，我在我的程序上附加了源代码（身份验证、类别、核心、扩展、实用程序、供应商）。

三、我改了一些路径 User Header Search Paths = /usr/include/libxml2 Other Linker Flags = -lxml2

但是，结果是“找不到词法或预处理器问题‘libxml/tree.h’文件”

我该怎么办？如果我从 libxml 更改为 libxml2 ......我不能另一个被禁止的 .h 文件......

请帮助我，并提前感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:08:01.887

您需要添加`/usr/include/libxml2`到**Header Search Paths**，而不是**User Header Search Paths**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T21:29:44.040

我也有这个问题。我的 XMPPFramework 文件夹是我的 iOS 项目的兄弟。在我的 iOS 项目中，我创建了一个 Xcode 组文件夹，然后将 KissXML 文件夹内容拖到该项目文件夹（组）中，而不复制文件。

解决方案是删除该组，将 KissXML 文件夹拖到项目中并将它们复制到项目中。所以现在，在磁盘上，我的 KissXML 文件存在于我的项目文件夹下。这不是我想要的，但它现在编译得很好。

# asp.net - 如何在asp.net 4.0的页面路由中隐藏id？

> ID：14583592
> 
> 赞同：0
> 
> 时间：2013-01-29T13:03:50.413
> 
> 标签：asp.net

使用我创建了以下 URL 的页面路由

[http://www.domain.com/products/xyz/1.aspx](http://www.domain.com/products/xyz/1.aspx)

但我想将上面的 url 重命名为

[http://www.domain.com/products/xyz.aspx](http://www.domain.com/products/xyz.aspx)

我不想在 url 中显示 id，但也可以使用页面路由访问其他页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:28:56.467

您可以使用`HttpContext.Current.RewritePath`方法来重命名您的网址

链接： http: [//www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET](http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:22:13.413

> 我不想在 url 中显示 id，但也可以使用页面路由访问其他页面。

如果您不想在 url 中传递“id”并且希望在页面上传递“id”，那么您必须根据您在 url 中传递的其他参数来检索它。

例如。您可以在 url 中传递唯一的产品名称，并根据数据库中的产品名称检索产品 ID。

# html - 如何在 JSP 中创建一个网页来调整自己以适应不同的窗口大小？

> ID：14583597
> 
> 赞同：1
> 
> 时间：2013-01-29T13:04:10.480
> 
> 标签：html, css, jsp, browser

我在 JSP 中创建了一个网页，当我用 mozilla 运行它时，页面是正常的。但是当我使用 chrome 或 opera 运行它时，列表和文本的对齐方式超出了浏览量。如何设置我的页面以适应不同的浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:13:41.950

这完全可以通过指定 CSS 属性来完成`width:100%;`。这会将布局扩展到浏览器宽度。另请注意，如果您指定`height:100%;`它会将高度调整为浏览器高度。将其应用于身体的最顶部元素。子标签属性用于布局到父标签。并且不要忘记使用正确的文档类型，因为它对浏览器有意义。

# delphi - 为什么 TDateTimePicker 不让我导航到二月？

> ID：14583598
> 
> 赞同：5
> 
> 时间：2013-01-29T13:04:20.187
> 
> 标签：delphi, datetimepicker

我在我的 D7 应用程序上使用 TDateTimePicker 具有以下属性：

```
Format = 'MMM-yyyy'
DateMode = dmUpDown 
```

当我尝试使用 为其设置当前日期时间时`dt1.DateTime := Now`，它会正确设置时间和日期，但当我尝试导航月份时会显示异常。特别是，我不能在三月以下流通。

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T13:25:49.287

问题是日期时间选择器控件正在使用当前日期进行初始化。这包括在几个月内无效的一个月中的一天。

因此，为了清楚起见，您是在 2013 年 1 月 29 日问这个问题。当您单击上/下控件移动到二月时，该控件无法执行更改，因为 2013 年 2 月 29 日没有。

对于发现难以重现的任何未来访问者，这是演示问题所需的代码：

```
DateTimePicker1.Format := 'MMM-yyyy';
DateTimePicker1.DateMode := dmUpDown;
DateTimePicker1.DateTime := EncodeDateTime(2013, 1, 29, 0, 0, 0, 0); 
```

解决此问题的简单方法是确保`DateTime`控件的属性适用于月初。您可以通过在初始化控件时执行此代码来实现：

```
DateTimePicker1.DateTime := StartOfTheMonth(DateTimePicker1.DateTime); 
```

或者，如果您想更明确：

```
DateTimePicker1.DateTime := StartOfTheMonth(Date); 
```

`StartOfTheMonth`辅助函数位于单元`DateUtils`中。

# jakarta-ee - WebSphere 应用服务器网络部署版本迁移

> ID：14583602
> 
> 赞同：0
> 
> 时间：2013-01-29T13:04:29.627
> 
> 标签：jakarta-ee, websphere, websphere-7, websphere-8

我有具有以下配置的 WebSphere 应用程序服务器网络部署版本 7

*   一名部署经理
*   2 个节点（每个节点在不同的机器上）。
*   每个节点下有一台服务器。
*   一个由两台服务器组成的集群（每个节点一台）。
*   所有配置（数据源、队列等）都在集群范围内完成
*   一个应用程序在集群范围内部署并运行。

我需要安装上述设置并将其迁移到 WebSphere 应用程序服务器网络部署版本 8。（最好使用安装附带的迁移脚本）

要遵循的步骤和顺序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:48:01.110

版本迁移是一个广泛的话题。我建议从[WebSphere Application Server 的迁移规划](http://www-01.ibm.com/support/docview.wss?uid=swg27008724)开始。

# windows-phone-7 - 在 wp8 上运行的 wp 7.1 应用程序的宽磁贴

> ID：14583605
> 
> 赞同：0
> 
> 时间：2013-01-29T13:04:41.393
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8

我需要为我的 WP 7.1 应用程序添加宽磁贴模板。当它在 wp8 设备上运行时，我从应用列表创建的平铺无法扩展到“宽平铺”，如下图所示。 ![瓷砖模板示例](../Images/00fd7187e5f2d21482a8687bce82b538.png)

我只能将其设置为第一和第二位置。

我可以将宽模板的图像添加到 wp 7.1 应用程序中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:10:45.190

有几种方法可以做到这一点。

*   [反射](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574%28v=vs.105%29.aspx)
*   [芒果](http://mangopollo.codeplex.com/)库

[在这里](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/01/22/windows-phone-7-8-and-windows-phone-8-live-tile-light-up-for-windows-phone-os-7-1-apps.aspx?utm_source=twitterfeed&utm_medium=twitter)您可以找到概览。

# mocking - HttpContect.ApplicationInstance.Application 变量的模拟数据

> ID：14583606
> 
> 赞同：2
> 
> 时间：2013-01-29T13:04:41.773
> 
> 标签：mocking, httpcontext

我的控制器方法中有以下行：

```
string str = HttpContext.ApplicationInstance.Application["String"].ToString(); 
```

我如何编写单元测试来获取数据？

# c++ - 从 C++ 中读取文件

> ID：14583609
> 
> 赞同：0
> 
> 时间：2013-01-29T13:04:46.757
> 
> 标签：c++, user-input

文件包含以下形式的电话号码列表：

```
John            23456
Ahmed        9876
Joe 4568 
```

名称仅包含单词，名称和电话号码用空格分隔。编写一个程序来读取文件并在两列中输出列表。名称应左对齐，数字右对齐。

我能够删除空格并显示它，但无法在输出中对齐它。

```
#include<iostream>
#include<fstream>
#include<conio.h>
using namespace std;
main()
{
    fstream file,f2;
    file.open("list.txt",ios::in|ios::out);
    f2.open("abcd.txt",ios::out);
    file.seekg(0);

    char ch,ch1;
    file.get(ch);

    while(file)
    {
        ch1 = ch;
        file.get(ch);

        if( ch == ' ' && ch1 != ' ')
        {
            f2.put(ch1);
            f2.put(' ');
        }

        if(ch != ' ' && ch1 != ' ')
            f2.put(ch1);
    }

    file.close();
    f2.close();
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:15:35.063

最简单直接（没有偏执的输入格式检查）：

```
#include <iostream>
#include <iomanip>
#include <string>
#include <fstream>

int main()
{
    std::ifstream ifs("list.txt");

    std::string name; int val;
    while (ifs >> name >> val)
    {
        std::cout << std::left  << std::setw(30) << name << 
                     std::right << std::setw(12) << val << std::endl;
    }
} 
```

输出：

```
John                                 23456
Ahmed                                 9876
Joe                                   4568 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:10:06.670

您可以简单地在输出流上设置适当的标志（`f2`在您的情况下是输出流）。请参阅以下文章： [http ://www.cplusplus.com/reference/ios/ios_base/width/](http://www.cplusplus.com/reference/ios/ios_base/width/)

对于您的示例，请替换`cout`为，`f2`因为它们都是继承自`ios_base`.

# assembly - 致命：无法打开包含文件“system.inc”

> ID：14583613
> 
> 赞同：5
> 
> 时间：2013-01-29T13:04:55.703
> 
> 标签：assembly, nasm, freebsd

我是一个菜鸟，试图使用以下指南在 FreeBSD 上编译他的第一个汇编程序：[http ://www.freebsd.org/doc/en/books/developers-handbook/x86-first-program.html](http://www.freebsd.org/doc/en/books/developers-handbook/x86-first-program.html)

当我运行时`nasm -f elf hello.asm`，我收到以下错误：

`hello.asm:1: fatal: unable to open include file 'system.inc'`

诚然，我没有从 ports 集合中安装 nasm，而是从源代码编译它，以防万一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:10:18.757

看起来您跳过了[上一章](http://www.freebsd.org/doc/en/books/developers-handbook/x86-portable-code.html)- 请参阅第**11.5.5 节使用包含文件**。您只需将各种定义等复制并粘贴到您自己的`system.inc`.

# iphone - iPhone 上传图片到 Servlet

> ID：14583616
> 
> 赞同：0
> 
> 时间：2013-01-29T13:04:57.410
> 
> 标签：iphone, servlets, webservice-client

我正在尝试将缩略图图像上传到 servlet。servlet 代码已经存在并与网站一起使用。

示例 URL [http://abcd.com/upload?param1=abc¶m2=pqr](http://abcd.com/upload?param1=abc&param2=pqr)

数据会发布在网站上，但图像不会。

我尝试使用以下代码片段上传我的图片：

**代码 1：**

```
 NSData *imageData = UIImageJPEGRepresentation(imageSelect.image, 1.0);
    //NSData *imageData = UIImagePNGRepresentation(imageSelect.image);

    NSMutableData *postbody = [NSMutableData data];

    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data;boundary=%@",boundary];

    NSMutableURLRequest *request= [[[NSMutableURLRequest alloc] init] autorelease];

    [request setURL:[NSURL URLWithString:strURL]];
    [request setHTTPMethod:@"POST"];        
    [request addValue:@"Keep-Alive" forHTTPHeaderField:@"Connection"];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    NSString *strFilename = [self getFilePath];
    NSLog(@"filename:[%@]",strFilename);

    [postbody appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"fileing\"; filename=\"%@\"\r\n", strFilename] dataUsingEncoding:NSUTF8StringEncoding]];

    [postbody appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postbody appendData:[NSData dataWithData:imageData]];

    [postbody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setHTTPBody:postbody];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    //Return string always returned empty
    NSLog(@"%@", returnString); 
```

**代码 2**

```
 //NSData *imageData = UIImageJPEGRepresentation(imageSelect.image, 0.7);
    NSData *imageData = UIImagePNGRepresentation(imageSelect.image);

    NSString *filename = [self getFilePath];
    //Filename:\\var\\mobile\\Applications\\F2Dxxxx-8656-4208-B398-8D504320FC7B\\Documents\\Image_Photo.jpg        

    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:strURL ]];        

    NSString *boundary = [NSString stringWithFormat:@"---------------------------14737809831466499882746641449"];

    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

    NSString *contentString = [NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n",filename];

    [request addRequestHeader:@"Connection" value:@"Keep-Alive"];
    [request addRequestHeader:@"Content-Type" value:contentType];

    NSMutableData *body = [NSMutableData data];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[contentString dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:imageData];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    [request setTimeOutSeconds:60]; // 1 minute
    [request appendPostData:body];
    [request setShowAccurateProgress:YES];
    [request setDelegate:self];
    [request setDidFinishSelector:@selector(requestDone:)];
    [request setDidFailSelector:@selector(requestWentWrong:)];
    [request startAsynchronous]; 
```

请让我知道我哪里出错了。

我还在[http://insanelycrazy.net/development/faces/viewarticle.xhtml?id=6](http://insanelycrazy.net/development/faces/viewarticle.xhtml?id=6)上找到了文章， 但是由于服务器代码已准备好，因此无法使用此代码段。

以下是Android中使用的代码

```
FileInputStream fileInputStream = new FileInputStream(new File(filepath));
URL url = new URL(urlString);
Log.i("", "URL : " + url.toString());
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setDoInput(true);
conn.setDoOutput(true);
conn.setUseCaches(false);
conn.setRequestMethod("POST");
conn.setRequestProperty("Connection", "Keep-Alive");
conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
conn.setChunkedStreamingMode(maxBufferSize);
dos = new DataOutputStream(conn.getOutputStream());
dos.writeBytes(twoHyphens + boundary + lineEnd);
Log.i("", "Before filepath : " + filepath);
filepath = filepath.replace("/", "\\" + "\\");
Log.i("", "After filepath : " + filepath);

dos.writeBytes("Content-Disposition: form-data; name=\"fileing\";filename=\"" + filepath + "\"" + lineEnd);
dos.writeBytes(lineEnd);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
while (bytesRead > 0) {
      dos.write(buffer, 0, bufferSize);
      bytesAvailable = fileInputStream.available();
      bufferSize = Math.min(bytesAvailable, maxBufferSize);
      bytesRead = fileInputStream.read(buffer, 0, bufferSize);
      progressStatus += bytesRead;
      publishProgress(progressStatus);
}
dos.writeBytes(lineEnd);
dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
fileInputStream.close();
dos.flush();
dos.close(); 
```

问候， 苏米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:21:51.890

```
 NSURL *url = [NSURL URLWithString:YOUR URL STRING];
    NSMutableURLRequest *postRequest = [NSMutableURLRequest requestWithURL:url];

    //adding header information:
    [postRequest setHTTPMethod:@"POST"];
    [postRequest setTimeoutInterval:60.0];
    NSString *stringBoundary = @"0xKhTmLbOuNdArY";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",stringBoundary];
    [postRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSData *imageData =UIImagePNGRepresentation(self.convertImage);

    NSMutableData *postBody = [[NSMutableData alloc] init];
    [postBody appendData:[[NSString stringWithFormat:@"--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",@"Content-Disposition: form-data; name=\"userid\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    NSDictionary *dic = [[NSUserDefaults standardUserDefaults] valueForKey:PROFILE_DETAILS];
    [postBody appendData:[[NSString stringWithFormat:@"%@",[dic valueForKey:@"id"]] dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"%@",@"Content-Disposition: form-data; name=\"profilepic\"; filename=\"ipodfile.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [postBody appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    [postBody appendData:[NSData dataWithData:imageData]];
    [postBody appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",stringBoundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
    [postRequest setHTTPBody:postBody];

    theConnection=[[NSURLConnection alloc] initWithRequest:postRequest delegate:self];

    if (theConnection) {
        // Create the NSMutableData to hold the received data.
        // receivedData is an instance variable declared elsewhere.
        receivedData = [[NSMutableData data] retain];
    }
    [postRequest release]; 
```

# jsf - JSF 生命周期多次执行

> ID：14583620
> 
> 赞同：0
> 
> 时间：2013-01-29T13:05:23.893
> 
> 标签：jsf, lifecycle

我注意到在 InternetExplorer 和 Chrome 中加载我的页面最多会触发 3 次 JSF 生命周期，因为触发了多个 HTTP 请求。然而，我的调试输出仅出现在第一个生命周期中。（对于 Firefox，只有一个生命周期）

由于问题在 Firefox 中不存在，我认为这不是服务器端问题（例如，附加一个 phaselistener 2 次可能是一个）

因此，Chrome 和 IE 需要进行一些调用，这些调用会导致对某些实际上不需要的服务器资源的请求。

最大的问题是：什么样的组件/标签可能会导致另一个 HTTP 请求，为什么它在没有这些额外请求的情况下在 Firefox 中工作？**我读到没有 url 属性的图像标签可能会导致这种行为，因为浏览器再次请求索引文件。**然而，Chrome 的网络诊断不会显示任何无效图像，也不会显示对其中一个 xhtml 站点的双重请求。

IE-示例：

```
13:56:14,046 INFO  [stdout] (http--0.0.0.0-8090-18) -- Started Request --
13:56:14,046 INFO  [stdout] (http--0.0.0.0-8090-18) ---- Started RESTORE_VIEW 1 ----
13:56:14,048 INFO  [stdout] (http--0.0.0.0-8090-18) ---- Started RENDER_RESPONSE 6 ----
13:56:14,100 INFO  [stdout] (http--0.0.0.0-8090-18) xybean constructed
13:56:14,712 INFO  [stdout] (http--0.0.0.0-8090-18) -- Finished Request --
13:56:15,106 INFO  [stdout] (http--0.0.0.0-8090-10) -- Started Request --
13:56:15,106 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started RESTORE_VIEW 1 ----
13:56:15,108 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started APPLY_REQUEST_VALUES 2 ----
13:56:15,110 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started PROCESS_VALIDATIONS 3 ----
13:56:15,111 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started UPDATE_MODEL_VALUES 4 ----
13:56:15,112 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started INVOKE_APPLICATION 5 ----
13:56:15,114 INFO  [stdout] (http--0.0.0.0-8090-10) ---- Started RENDER_RESPONSE 6 ----
13:56:15,115 INFO  [stdout] (http--0.0.0.0-8090-10) -- Finished Request -- 
```

Firefox 中的相同页面调用：

```
14:03:33,443 INFO  [stdout] (http--0.0.0.0-8090-2) -- Started Request --
14:03:33,443 INFO  [stdout] (http--0.0.0.0-8090-2) ---- Started RESTORE_VIEW 1 ----
14:03:33,444 INFO  [stdout] (http--0.0.0.0-8090-2) ---- Started RENDER_RESPONSE 6 ----
14:03:33,496 INFO  [stdout] (http--0.0.0.0-8090-2) xybean constructed
14:03:34,258 INFO  [stdout] (http--0.0.0.0-8090-2) -- Finished Request -- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:28:30.327

解决方案非常简单：

我宣布了 2 个网站图标：

```
<!-- For Modern Browsers -->
<link rel="shortcut icon" href="./img/favicons/favicon.png" />

<!-- For everything else -->
<link rel="shortcut icon" href="./img/favicons/favicon.ico" /> 
```

在 web.xml 中，我声明了我的 servlet 映射，如下所示：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping> 
```

因此，IE 和 Chrome 一直在寻找`http://localhost/myApp/faces/img/favicons/favicon.png`并通过这样做来调用 servlet。将 favicon 更改为绝对 url（将面放在外面）解决​​了这个问题。

也许将 Faces Servlet 的 url 模式更改为更具体的东西`*.xhtml`或您想要调用它的任何文件类型也是一个好主意。

# vim - 如何在 Vim 中设置默认（永久）工作目录

> ID：14583623
> 
> 赞同：4
> 
> 时间：2013-01-29T13:05:38.800
> 
> 标签：vim, macvim

> **可能重复：**
> [将 .vim 主目录设置为特定内容](https://stackoverflow.com/questions/13909841/set-vim-home-directory-to-something-specific)

已经有一个关于设置工作目录的问题：[How to set working/current directory in Vim?](https://stackoverflow.com/questions/2288756/how-to-set-working-current-directory-in-vim) 但是我的问题有点不同，我在一个文件夹中有数千个文件（几个不同的项目）。每当我启动 Vim (MacVim) 时，cwd 默认设置为主**目录**。因此，当我使用像**ack.vim**这样的插件时，默认情况下它们会在我的主目录中搜索，这是无用的。我只想将它设置到我的**/home/user/Code**文件夹（其中包含我所有的片段、项目等）

是否有任何设置将 cwd 设置为某个目录？或者任何解决方法（比如`:cd /home/user/Code`在 Vim 中为每个启动执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T13:24:11.100

您可以通过硬编码当前工作目录

```
:cd /home/user/Code 
```

在你的`~/.vimrc`. 但是，每当您在其他地方编辑文件时，这都会导致一个奇怪的设置。（即使您主要是在`Code`目录中进行编辑，也偶尔会编辑`~/.bashrc`，或在 中进行配置设置`/etc/...`，依此类推。

我所做的是将目录`:cd`放入*本地 vimrc*中`Code`。（我使用[localrc.vim 插件](http://www.vim.org/scripts/script.php?script_id=3393)；还有其他插件。）然后，只有当我使用该目录树实际编辑任何文件时，才会更改目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T13:08:00.613

你可以

```
:se autochdir 
```

这将自动更改为包含打开文件的目录。

或者

```
:cd %:h 
```

现在切换到包含当前打开的文件的目录

# mysql - odbc 连接

> ID：14583629
> 
> 赞同：2
> 
> 时间：2013-01-29T13:05:55.983
> 
> 标签：mysql, odbc, jdbc-odbc

我想用 mysql 在 ubuntu server 10.10 中安装 odbc：

我做了

```
sudo apt-get install libmyodbc 
```

编辑 odbcinst.ini

```
[MySQL]
Description = ODBC for MySQL
Driver = /usr/lib/odbc/libmyodbc.so
Setup = /usr/lib/odbc/libodbcmyS.so
FileUsage = 1 
```

和 odbc.ini

```
[asterisk]
Description           = MySQL connection to 'spb' database
Driver                = MySQL
Database              = myDatabase
Server                = localhost
UserName              = myUser
Password              = myPAss
Port                  = 3306
Socket                = /var/lib/mysql/mysql.sock 
```

并尝试：

```
ubuntu@ubuntu:/etc$ isql asterisk
[ISQL]ERROR: Could not SQLConnect 
```

我错过了一些步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T08:45:27.460

我遇到了同样的问题。尝试：

`$ SUDO isql asterisk`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-07T07:37:50.823

您是否检查过此目录中有驱动程序？ubuntu 将我安装在其他目录中：

```
/usr/lib/i386-linux-gnu/odbc/libmyodbc.so
/usr/lib/i386-linux-gnu/odbc/libodbcmyS.so 
```

或尝试一个符号链接

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-02T17:29:32.670

更改`Server = localhost`部分`Server = 127.0.0.1`

# perl - Perl 脚本的非零退出

> ID：14583631
> 
> 赞同：0
> 
> 时间：2013-01-29T13:06:07.957
> 
> 标签：perl, unix

在我的 Perl 脚本中，如果我使用`exit(-1)`，脚本将退出。但如果我使用`exit(-433)`or `exit(-233)`，它不会退出。为什么？下面是一个例子。

```
if ($result1[0] eq "Error") {
    print "Error occurred while updating https route\n";
    print "Error returned from the script:\n";
    print $result1[1];
    exit(-377);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:15:05.560

运行`perlbug`以提交错误报告。尽管您的论点不正确，但这不应阻止其`exit`发挥作用。

正如你所看到的（通过`y`从未打印的面孔），我无法在 Linux 系统上复制它：

```
$ perl -E'say "x"; exit($ARGV[0]); say "y";' -- -377 ; echo $?
x
135

$ perl -E'say "x"; exit($ARGV[0]); say "y";' -- -1 ; echo $?
x
255

$ perl -E'say "x"; exit($ARGV[0]); say "y";' -- -433 ; echo $?
x
79

$ perl -E'say "x"; exit($ARGV[0]); say "y";' -- -233 ; echo $?
x
23 
```

0..255 在 Unix 系统上是可以接受的。0..65535 在 Windows 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:52:37.547

我什至会将退出值限制为 0..127，原因如下：如果您的程序（在 Unix 上）被信号 N 杀死，则退出值设置为 N+128。因此，如果您使用更高的退出值，您将无法区分“正常”退出和信号强制退出。

# ajax - PhoneGap 中的 Codeigniter REST Web 服务和 jquery mobiles AJAX

> ID：14583633
> 
> 赞同：0
> 
> 时间：2013-01-29T13:06:12.770
> 
> 标签：ajax, codeigniter, rest, cordova, jquery-mobile

我创建了一个 REST Web 服务，在其中提取姓名和姓氏，然后简单地发回一条消息，其中包含一条消息，结果中包含姓名和姓氏。

现在在 PhoneGap 我有以下代码：

```
<!DOCTYPE HTML>
    <html>
     <head>
      <title>PhoneGap</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximumscale=1"/>

    <link rel="stylesheet" href="css/jquery.mobile.css"/>

    <script type="text/javascript"  src="js/jquery.js"></script>
    <script type="text/javascript"  src="js/jquerym.js"></script>
    <script type="text/javascript"  src="js/myscript.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/cordova-2.3.0.js"></script>
 </head>
 <body>
    <div id ="page1" data-role="page">
        <div data-role ="header">
            <h1>Welcome to Page 1</h1>
        </div>
        <a href="#page2" data-transition="flip">Page2</a>
    </div>

    <div id ="page2" data-role="page">
        <div data-role ="header">
            <h1>Welcome to Page 2</h1>
        </div>

        <form>
            First name: <input type="text" name="name" id="username"><br>
            Last name: <input type="text" name="surname" id="usersurname"><br>
            <input type="submit" id ="submit" name="submit" value="GO TIME">
        </form>
        <a href="#page1" data-transition="flip">Page1</a>
    </div>

 </body>
</html> 
```

当用户在表单中输入值时，它会运行以下 js：

```
$(document).on('pagebeforeshow','#page2',
    function(){
                $('#submit').click(function() 
                {
                    var name = $("#username").val();
                    var surname = $("#usersurname").val();

                    alert(name + " " + surname);

                    $.post(
                        "http://localhost/rest/index.php/api/test/name/"+name+"/surname/"+surname+"/format/json", 
                        {'name':name,'surname':surname},
                        function(data)
                        {
                            alert(data.result);
                        },
                        "json");
                });         
              }); 
```

在我的 Codeigniter REST 中，我设置了基本 url 并具有以下代码：

```
<?php

require(APPPATH.'/libraries/REST_Controller.php');
class API extends REST_Controller
{
    function test_post()
    {
        $name = $this->post('name');
        $surname = $this->post('surname');
        $result = "This is working ".$name." ".$surname;
        $array = array('result' => $result);
        $this->response($array); 
    }

}
?> 
```

现在，当用户在输入框中输入他们的信息然后单击按钮时，js 脚本工作正常，因为出现了第一个警报，但由于某种原因，它没有转到 codeigniter REST 并返回结果，它只是将我发送回第 1 页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T15:18:23.793

您现在可能已经解决了这个问题，但我想我会为您回答，因为我刚刚遇到了类似的问题并偶然发现了这个问题。

基本上，您将无法 `http://localhost/rest/index.php/api/test/name`从您的模拟器访问，因为您的 XAMPP 服务器托管在不同的机器上（模拟器是虚拟机）。例如，通过将请求的 URL 更改`http://192.168.0.7/rest/index.php/api/test/name`为，您可以访问 PC 上托管的 apache 服务器。您必须通过打开命令提示符并键入来找出您的本地 IP `ipconfig`。您还需要确保您的网络防火墙允许来自端口 80 的传入流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:11:03.637

这是行不通的，您不能在 phonegap 移动应用程序上使用 localhost。

如果您在移动设备上测试此代码，您的 $.POST 目的地不是：

```
http://localhost/rest/index.php/api/test/name 
```

您的手机的 IP 地址与您的 PHP 服务器不同。

找到您的 PHP 服务器 IP 并将 localhost 替换为它。

# sql - 计算每对利益/复杂性的项目数量的 SQL 查询

> ID：14583637
> 
> 赞同：0
> 
> 时间：2013-01-29T13:06:24.890
> 
> 标签：sql, count

有一个表叫`TBL`. 在具有 3 列的数据库中，即

*   项目
*   益处
*   复杂

样本数据如下

```
Project Benefit   Complexity
Prj1    High        Easy
Prj2    High        Medium 
Prj3    Medium      Easy      
Prj4    Low         Easy         
Prj5    High        Medium 
Prj6    Low         Easy 
```

我想要一个查询来输出结果如下

```
Benefit Complexity Projectcount 
High    Easy         1 
High    Medium       2  
Medium  Easy         1
Low     Easy         2 
```

我想要一个 SQL 查询，以便计算每对利益/复杂性的项目数量并获得如上所示的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:07:45.907

使用`COUNT()`聚合函数并按 和 对它们进行`Benefit`分组`Complexity`。

```
SELECT  Benefit, Complexity, COUNT(*) ProjectCount
FROM    TBL
GROUP   BY Benefit, Complexity 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7c0c2/1)

其他来源

*   [SQL **GROUP BY**子句](http://www.techonthenet.com/sql/group_by.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:08:20.977

```
SELECT Benefit, Complexity, COUNT(1) AS NumberOfProjects
FROM TBL
GROUP BY  Benefit, Complexity 
```

或者做

```
GROUP BY Complexity, Benefit 
```

请注意， GROUP BY 将根据您给它的列的顺序进行聚合。因此，在第一个示例中，它将按收益对项目进行分组，并为每个收益组按复杂性拆分它。在第二个示例中，它按复杂性对其进行分组，然后按收益划分组。对于计数，您会得到相同的结果。

# python - Python 编码实践：Return None vs Return same datatype with empty value？

> ID：14583638
> 
> 赞同：7
> 
> 时间：2013-01-29T13:06:27.217
> 
> 标签：python

是否应使用相同的数据类型从函数返回或分配默认值？还是没有？什么是更好的编码实践，为什么？

例如。python中的一些伪代码：

/1

```
def my_position():   # returns a positive integer if found
    if(object is present):
          position = get_position()
          return position # eg 2,3,4,6
    else: 
          return None     # or return -1 or 0 ?? 
```

/2

```
def get_database_rows():    
    do query to whatever database
    if(rows are found):
       return [list of rows]
    else:
       return None  # or return empty list []  ? 
```

/3

```
the_dictionary = {'a' : 'john','b':'mike','c': 'robert' }  # values are names i.e. non empty string
my_new_var = the_dictionary.get('z', None)  # or the_dictionary.get('z','')  ? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T13:15:28.663

1.  `IndexError`如果未找到该项目，则引发。这就是 Python`list`所做的。（或者在进行二分搜索或类似操作时，可能会返回该项目应该存在的索引。）

2.  从逻辑上考虑你的函数做了什么：如果它返回一个数据库中满足某个标准的所有项目的列表，并且没有这样的项目，那么返回一个空列表是有意义的，因为它允许所有常见的列表操作（`len`, `in`) 无需显式检查即可运行。

    但是，如果所需项目的缺失表明不一致，则引发异常。

3.  我之前的评论特别适用于这种情况：*这取决于*您将如何处理您获得的价值。当找不到密钥时，普通函数`dict`只会引发 a 。`KeyError`您正在用一个值替换该异常，因此您应该知道哪个值在您的程序上下文中是有意义的。如果没有值，那么就让异常飞起来。

也就是说，返回`None`通常是一个坏主意，因为它可能会掩盖错误。`None`是 Python 中的默认返回值，因此返回它的函数可能仅表明其作者忘记了一条`return`语句：

```
def food(what):
    if what == HAM:
        return "HAM!"
    if what == SPAM:
        return " ".join(["SPAM" for i in range(10)])
    # should raise an exception here

lunch = food(EGGS)    # now lunch is None, but what does that mean? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:26:28.080

**案例 1**：引发 IndexError。

基本原理：返回 -1 是 C 风格，而`IndexError`raise 则更 Pythonic。

**案例2**：返回空列表。

理由：避免不必要的空检查。也可参考《Effective Java(2ed) Item43 *Return empty arrays or collections, not* nulls 》一书（没错，是Java，但参数仍然有效）

**案例3**：取决于。

理由：如果你不想 raise `KeyError`，是空字符串还是`None`取决于实际需要，但要注意两点：第一，保持一致，不要混用`None`和空字符串互换；其次，确保空字符串与有效值区分开来（即有效值不能为空），如果有疑问，请`None`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:27:49.337

问题中还没有列出另一个选项：抛出异常。它似乎在 python 中足够流行，有时最好遵循您的语言的常见做法，而不是寻找抽象的*最佳*解决方案。

至于你的例子：

1.  我会考虑`-1`因为那是什么`"".find`，或者抛出 a`ValueError`因为那是什么`[].index`（我并不是说第一个选项是最好的）。我永远不会使用基于 1 的索引，因此该值`0`是有效结果，不能用于表示空值。

2.  我更喜欢一个空列表，因为不能保证调用者对*空*作为一种特殊情况感兴趣。如果我想计算多个查询的所有行，我不想`None`专门处理。*如果存在无法生成*行列表的逻辑上不同的情况（与*没有匹配的行*相反），我会考虑使用`None`或抛出这种情况下的异常。

3.  示例的含义不清楚，特别是考虑到它`None`是有效的字典键。但是如果我*必须*在通常需要字符串的地方使用一些特殊值，我会更喜欢它`None`（如果你更喜欢空字符串，重要的是要确定你永远不需要一个*有效的空字符串*，除了它本身之外没有什么特别的东西）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T13:30:50.793

例外通常是首选，但如果你不想使用它们，这真的取决于你想要什么。

当在列表中请求不存在的项目的索引时，返回`None`可能与返回一样好，`-1`因为该查询没有可能的好答案。调用该函数后，我*必须*检查它是否可以产生结果，然后再继续处理结果。

Bu 当询问列表中所有奇数的列表时，您应该返回`[]`而不是`None`因为`[]`是一个完全有效的答案。我可能想知道我在原始列表中有多少个奇数，如果它是空的，0 是我需要的答案，所以类似于

```
len(odd_numbers(lst)) 
```

应该总是工作。在那种情况下返回`None`将是棘手且容易出错的，就像我必须做的那样

```
0 if odd_numbers(lst) is None else len(odd_numvers(lst)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T13:11:31.040

在这种情况下，我认为空列表更好，但我认为这个问题没有“一般”的答案：它通常取决于情况。绝对要避免的一件事 — 返回的值类型多于 ine 类型（None 除外）。我看过代码，其中函数 coulr 返回：string、None、bool、1、2 和 3。那是一种威胁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T13:12:26.047

这些情况是不同的。

1 -`return position # eg 2,3,4,6`

这就像一个记录，所以`None`对我来说很有意义。（或者，正如其他人所提到的，如果你总是希望有一个职位，那么就提出一个例外。）

2 -`return [list of rows]`

这是一个行列表，因此返回`[]`是合乎逻辑的，您不必特殊情况迭代结果，您可以使用`for row in rows:`.

3 - `the_dictionary = {'a' : 'john','b':'mike','c': 'robert' }

再次，这看起来像一个记录，所以缺失值自然是`None`（通常）。（如果你*总是*希望有一本字典，那就提出一个例外）。

# android - GIF 图像可以在模拟器上运行，但不能在真实设备上运行？

> ID：14583648
> 
> 赞同：2
> 
> 时间：2013-01-29T13:07:00.760
> 
> 标签：android, android-animation, animated-gif

我正在尝试显示 gif 图像我已使用此代码

**主要活动**

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MYGIFView(this));
       }

 } 
```

和**MYGIFView**类：

```
 public class MYGIFView extends View {

Movie movie,movie1;
InputStream is=null,is1=null;
long moviestart;
public MYGIFView(Context context) {
super(context);
is=context.getResources().openRawResource(R.drawable.piggy);
movie=Movie.decodeStream(is);

}

@Override
protected void onDraw(Canvas canvas) {

canvas.drawColor(Color.WHITE);
super.onDraw(canvas);
long now=android.os.SystemClock.uptimeMillis();
System.out.println("now="+now);
if (moviestart == 0) { // first time
moviestart = now;

}
System.out.println("\tmoviestart="+moviestart);
int relTime = (int)((now - moviestart) % movie.duration()) ;
System.out.println("time="+relTime+"\treltime="+movie.duration());
movie.setTime(relTime);
movie.draw(canvas,this.getWidth()/2-20,this.getHeight()/2-40);
this.invalidate();
}
} 
```

它显示了模拟器中drawale文件夹中的gif图像和gif工作，但是当我在**真实设备中运行它时，它什么也没显示**......这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-22T05:37:34.007

由于在这些设备中启用了硬件加速，因此电影对象在上述设备 (4.x) 上无法正常工作。因此，通过禁用硬件加速，您可以使图像同时在模拟器和真实设备上工作。

1.  您可以通过添加禁用硬件加速

    安卓：硬件加速=“假”

在您的清单文件 inder 活动标记中

```
<activity
    android:name=".MainActivity"
    android:hardwareAccelerated="false"
    android:label="@string/app_name" > 
</activity> 
```

2.您也可以通过编程方式禁用硬件加速

例如：MYGIFView 是您将在其中显示 GIF 图像的自定义视图

```
MYGIFView mMYGIFView =(MYGIFView)findViewById(R.id.myGifImageView);
mMYGIFView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

通过使用这个，您的 GIF 图像将同时显示在模拟器和真实设备上:)

# ruby-on-rails - 以 simple_form 支持多个模型

> ID：14583652
> 
> 赞同：1
> 
> 时间：2013-01-29T13:07:14.873
> 
> 标签：ruby-on-rails, forms, rails-models

嗨，我有一个名为的模型`Event`和一个要创建的表单`events`。 `Events`belongs_to`Users`并且应该由他们创建。

如何将 实现`current_user.id`到隐藏字段中，以便将其保存在`Event`表中并属于`current_user`？

谢谢。

目前它看起来像这样。但是给我一个错误：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil,     use     object_id 
```

我的表格：

```
 <%= simple_form_for @event do |f| %>
     <% if @event.errors.any? %>
       <div class="error_messages">
         <h2><%= pluralize(@event.errors.count, "error") %> prohibited this user from being   saved:</h2>
         <ul>
           <% @event.errors.full_messages.each do |msg| %>
             <li><%= msg %></li>
           <% end %>
         </ul>
       </div>
     <% end %>

     <%= f.simple_fields_for :user do |id| %>
       <%= id.input :contact_name, :value=>current_user.id %>
     <%end%>
     <div class="field">
       <%= f.input :title, :input_html => { :class => "span10" }%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:31:29.300

如果您想创建一个属于当前登录用户的事件，那么您可能应该这样做：

```
def create
  @event = current_user.events.new(params[:event])

  ## use your logic to save and redirect
end 
```

我假设你`has_many :events`在你的用户模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:52:29.320

```
 def create
    @event = Event.new(params[:event])
    @event.user_id = current_user.id 
```

将此发布在事件控制器中。为我做的。来自设计方法的 current_user。干杯

# jquery - 如何使用现有的 jQuery 代码将 textarea 验证添加到表单中

> ID：14583654
> 
> 赞同：2
> 
> 时间：2013-01-29T13:07:18.730
> 
> 标签：jquery, html, forms, validation

这是我的 html（我刚刚在其中添加了 textarea）：

```
<form>
<div id="input_wrapper">
    <label for="name">Name:</label>
        <input type="text" name="name" value=""/>
        <label for="phone">Phone:</label>
        <input type="text" name="phone" value=""/>
        <label for="email">Email:</label>
        <input type="text" name="email" value="" />
        <label for="textbox">Comments:</label>
        <textarea name="textbox" rows=3 cols=30 ></textarea>

        <input type="submit" value="" />
    </div>
</form> 
```

这是代码的另一部分：

```
 $('form').submit(function (e) {
    var flag = true;
            var inputs = $(this).find('input[type="text"]');

            inputs.each(function(){
                if ($(this).val() === ''){
                    //$(this).addClass('invalid');
                    $(this).prev().addClass('invalid');
                    if ($(this).next().is('span') === false){
                        $(this).after('<span>' + $(this).attr('name') + ' is required</span>');
                    }
                flag = false;
                }else{
                    $(this).removeClass('span');
                    $(this).prev().removeClass('invalid');
                    if ($(this).next().is('span')){
                        $(this).next().remove();
                    }
                }
            });
            if (flag === false) {
            e.preventDefault();
            }
}); 
```

我需要在 jquery 中包含我的 textarea 并且它必须以与输入相同的方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:10:59.760

只需更改这一行就可以解决问题...

```
var inputs = $(this).find('input[type="text"], textarea'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:10:23.983

它可能不是你所追求的，但是......验证插件不是一个选项吗？

更多信息：[http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:11:08.903

只需将其添加到选择器中：

```
var inputs = $(this).find('input[type="text"], textarea'); 
```

在 jQuery 选择器中，您可以使用逗号列出多个项目。它被称为[多重选择器](http://api.jquery.com/multiple-selector/)：

> 选择所有指定选择器的组合结果。

# ruby - 指南针配置文件位置/名称

> ID：14583657
> 
> 赞同：2
> 
> 时间：2013-01-29T13:07:35.453
> 
> 标签：ruby, grails, config, compass-sass

我是新手`Compass`（`Ruby`也是），我想知道`Compass`配置文件的命名约定。

默认情况下，在执行命令的目录中`Compass`创建一个名为的文件。在开发Web 应用程序时，我尝试在其中初始化它，因为我希望将所有配置文件放在一个目录中，以便可以轻松地将其从创建的文件中删除。`config.rb``compass create``Grails``C:\Source\MyGrailsProject\web-app\config``WAR`

现在，我读到配置文件的名称也可以像`config/compass.rb`[1] 并且我尝试了以下内容：

*   在目录下创建`Compass`具有所有特定设置的配置文件`config`

*   从命令行运行`compass create C:\Source\MyGrailsProject\web-app --bare`（`--bare`用于不`Compass`创建默认目录结构，因为这是一个已经设置的项目 [2]）

*   `config.rb`从文件夹中删除创建的`web-app`文件，因为我之前在下创建了配置文件`config/compass.rb`

*   运行`compass compile C:\Source\MyGrailsProject\web-app`，或者，`compass compile C:\Source\MyGrailsProject\web-app\config`它们都显示“Nothing to compile ...”日志，如果`Compass`根本没有设置，也会出现！

**我在这里做错了什么？不应该这样吗？**

* * *

[1] [https://github.com/chriseppstein/compass/issues/751](https://github.com/chriseppstein/compass/issues/751)

[2] [https://groups.google.com/d/msg/compass-users/w1wZd4bKbGo/vNlYJTgCm4kJ](https://groups.google.com/d/msg/compass-users/w1wZd4bKbGo/vNlYJTgCm4kJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T08:00:25.313

正如@IgorArtamonov 在他对我最初的问题的第一条评论中所说，我在`config`文件中声明了错误的目录路径。正如我所想的那样，这个问题对我来说并不明显，我必须声明相对于配置文件的目录路径 - 相反，必须声明相对于指南针项目路径的目录路径......

所以，假设我有我`Compass Project Path`的 at`/path/to/my/project`并且我的配置文件位于`/path/to/my/project/config/compass.rb`. 所有其他文件也位于其他子目录中，如下所示：

`/path/to/my/project`

`/path/to/my/project/config/compass.rb`

`/path/to/my/project/css/style.css`

`/path/to/my/project/js/app.js`

`/path/to/my/project/scss/style.scss`

中声明的目录`compass.rb`必须相对于`Compass Project Path`，如下所示：

```
css_dir = "css"
sass_dir = "scss
... 
```

以防万一其他人也会遇到这个问题；）

# asp.net - 如何在asp.net中计算Jqgrid列的摘要

> ID：14583659
> 
> 赞同：0
> 
> 时间：2013-01-29T13:07:35.857
> 
> 标签：asp.net, jqgrid

嗨伙计们！我开发了一个 jqgrid，我需要在其中计算网格页脚上的“持续时间”和“价格”列的摘要但我不知道如何做到这一点，因为我是第一次使用 Jqgrid .. 下面是我的代码.. ..

```
 var categoriesStr = ":All;1:vikas;2:Ankur";
    $(function () {
        $("#UsersGrid").jqGrid({
            url: 'getGriddahico.ashx',
            datatype: 'json',
            height: 250,
            colNames: ['UserID', 'username', 'ordinal', 'authcode', 'extension', 'trunk', 'dialnumber', 'dialdate', 'dialtime', 'duration', 'destination', 'price', 'toc'],
            colModel: [
                    { name: 'UserID', index: 'UserID', width: 100, sortable: true, align: 'center',hidden:true },
                    { name: 'username', width: 100, sortable: true, align: 'center' },
                    { name: 'ordinal', width: 100, sortable: true, align: 'center' },
                    { name: 'authcode', width: 100, sortable: true },
                    { name: 'extension', width: 100, sortable: true, align: 'center' },
                    { name: 'trunk', width: 100, sortable: true, align: 'center' },
                    { name: 'dialnumber', width: 100, sortable: true, align: 'center' },
                    { name: 'dialdate', width: 100, sortable: true, align: 'center' },
                    { name: 'dialtime', width: 100, sortable: true, align: 'center' },
                    { name: 'duration', width: 100, sortable: true, align: 'center' },
                    { name: 'destination', width: 100, sortable: true, align: 'center' },
                    { name: 'price', width: 100, sortable: true, align: 'center' },
                    { name: 'toc', width: 150, sortable: true, align: 'center' }
                ],
            rowNum: 100,
            rowList: [100, 200, 300],
            pager: '#UsersGridPager',
            sortname: 'username',
            //loadonce: true,
            viewrecords: true,
            ignoreCase:true,
            sortorder: 'asc',
            autowidth: true,
            toppager: true,
            height: '100%'

        });

        $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false, search: false });

        jQuery("#UsersGrid").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false });
    }); 
```

任何帮助都将受到热烈欢迎.. 提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:33:05.913

您将在您的控制器中计算这些值，然后通过您的 JSON 中的 userdata 将它们传入。前任

```
records = totalRecords,
                userdata = new { price: Value1, toc: Value2 //etc },
                rows = ( 
```

在您的 jqGrid 配置中，您还可以打开

```
 footerrow: true,
        userDataOnFooter: true, 
```

然后使用上面的示例代码，Value1 将显示在 price 列的页脚中，而 Value2 将显示在 toc 列的页脚中。

# .net - cameraCaptureDialog.ShowDialog() 在第二次推送时崩溃

> ID：14583669
> 
> 赞同：0
> 
> 时间：2013-01-29T13:08:09.650
> 
> 标签：.net, vb.net, windows-mobile

大家好。

我正在开发一个安装在运行 Windows Mobile 6.5 的设备上的软件。一方面是正确使用设备的相机。在我的情况下，我想使用 CameraCaptureDialog 如下：

```
Dim cameraCaptureDialog As New CameraCaptureDialog()
cameraCaptureDialog.Owner = Me
cameraCaptureDialog.Mode = CameraCaptureMode.Still
If cameraCaptureDialog.ShowDialog() = DialogResult.OK AndAlso cameraCaptureDialog.FileName.Length > 0 Then
    Dim sFileNameExt As String = ""
    Dim sFileDir As String = ""
    Dim sPicsDir As String = ""
    Dim sFileSource As String = ""
    sFileSource = Path.GetFullPath(cameraCaptureDialog.FileName)
    sFileDir = Path.GetDirectoryName(cameraCaptureDialog.FileName)
    sFileDir = Path.GetPathRoot(cameraCaptureDialog.FileName)
    sFileNameExt = Path.GetExtension(cameraCaptureDialog.FileName)
    Dim fs As New FileStream(sFileSource, FileMode.OpenOrCreate, FileAccess.Read)
    Dim ImgArtikel(CType(fs.Length, Int32)) As Byte
    fs.Read(ImgArtikel, 0, CType(fs.Length, Int32))
    fs.Close()
    functions.ConnectLocalDB(functions.localconn)
    Dim cmd As SqlCeCommand = functions.localconn.CreateCommand()
    cmd.CommandText = "UPDATE table SET img_Photo=@imgArt "  'assign the newly made image to db-entry
    cmd.Parameters.Add("@imgArt", SqlDbType.Image)
    cmd.Parameters("@imgArt").Value = ImgArtikel
    cmd.ExecuteNonQuery()
    cmd.Dispose()
    If File.Exists(sFileSource) Then File.Delete(sFileSource) 'delete photo after updating db

End If
cameraCaptureDialog.Dispose() 
```

这第一次工作正常（在模拟器和设备上），但是当我启动相同的事件时，我的软件崩溃了。调试时我没有遇到异常，它只是在 ShowDialog() （第四行）崩溃。

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:59:03.837

您需要设置一些知道此例程正忙的全局变量。

```
private cameraWorking As Boolean 
```

（**免责声明：**请注意，我不经常使用 VB，所以我的一些语法可能有点偏离，但这应该给你的想法。）

我注意到你从不使用`sPicsDir`你分配`sFileDir`两次。

我也是这个关键字的忠实粉丝`Using`，它应该为你处理关闭连接和处理对象。

考虑到这一点，我重新编写了您的例程并注释掉了从未使用过或不必要的项目（与`Using`例程一起）。

```
If Not cameraWorking Then
  Try
    cameraWorking = True
    Using cameraCaptureDialog As New CameraCaptureDialog()
      cameraCaptureDialog.Owner = Me
      cameraCaptureDialog.Mode = CameraCaptureMode.Still
      If cameraCaptureDialog.ShowDialog() = DialogResult.OK Then
        Dim filename As String = cameraCaptureDialog.FileName
        If Not String.IsNullOrEmpty(filename) Then
          Dim sFileSource As String = Path.GetFullPath(cameraCaptureDialog.FileName)
          'Dim sFileNameExt As String = Path.GetExtension(cameraCaptureDialog.FileName)
          'Dim sFileDir As String = Path.GetDirectoryName(cameraCaptureDialog.FileName)
          'Dim sRootDir As String = Path.GetPathRoot(cameraCaptureDialog.FileName)
          functions.ConnectLocalDB(functions.localconn)
          Using fs As New FileStream(sFileSource, FileMode.OpenOrCreate, FileAccess.Read)
            Dim ImgArtikel(CType(fs.Length, Int32)) As Byte
            fs.Read(ImgArtikel, 0, CType(fs.Length, Int32))
            Using cmd As SqlCeCommand = functions.localconn.CreateCommand()
              cmd.CommandText = "UPDATE table SET img_Photo=@imgArt "  'assign the newly made image to db-entry
              cmd.Parameters.Add("@imgArt", SqlDbType.Image)
              cmd.Parameters("@imgArt").Value = ImgArtikel
              cmd.ExecuteNonQuery()
              'cmd.Dispose()
            End Using
            ' Note that you may still need to explicitly close the stream here
            ' because the GC will likely still have it open in the call below to delete
            ' the actual file.
            fs.Close()
          End Using
          If File.Exists(sFileSource) Then
            File.Delete(sFileSource) 'delete photo after updating db
          End If
        End If
      End If
      'cameraCaptureDialog.Dispose()
    End Using
  Catch err As Exception
    MessageBox.Show(Me, err.Message, "Camera Capture Error")
  Finally
    cameraWorking = False
  End Try 
```

如果这一切都是由于表单上的按钮单击而**发生****的**，那么设置会更直观

 **```
My.cameraCaptureButton.Enabled = False 
```

在例程开始时，然后记住重新启用`Finally`块中的按钮。**

# java - 从 jsp:useBean 获取子类

> ID：14583673
> 
> 赞同：1
> 
> 时间：2013-01-29T13:08:16.077
> 
> 标签：java, jsp, jakarta-ee, jsp-tags

我正在研究具有一些旧 jsp 文件的旧系统。
`testParent`类有一组`testChild`类。`testParent`有一个返回单个`testChild`对象的方法，而`testChild`对象有`numberIWant`. 方法在`testParent`

```
public TestChild giveTestChild()
    {
        TestChild testChild= this.testChilderen.iterator().next();

        return testChild;

    } 
```

和`testChild.getNumberIWant`

这就是我尝试在jsp中实现的方式

```
<jsp:useBean id="parentClass" class="package.TestParent" scope="request"/>
<jsp:useBean id="childClass" class="package.TestChild" scope="request"/>

<input:text name="numberIWant" bean="parentClass.giveTestChild()"
                          attributesText="id='numberIwant' " size="20"/> 
```

但它不起作用。由于 Hibernate，我`testParent`始终可以使用并且不想单独调用`testChild`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:15:43.123

这些类应该是有效的 java bean，因此它们具有能够与`jsp:useBean`标记一起使用的 getter 和 setter。要获取 testChild bean 的值，您可以使用

```
<input type="text" name="numberIWant" value="<jsp:getProperty name="childClass" property="numberIWant"/>"  size="20"/> 
```

要使用 parentClass 获取 testChild bean 的值，请使用

```
<% testChild = parentClass.getTestChild(); %>
<input type="text" name="numberIWant" value="<jsp:getProperty name="childClass" property="numberIWant"/>"  size="20"/> 
```

# c# - 授权标签不重定向到正确的控制器

> ID：14583683
> 
> 赞同：0
> 
> 时间：2013-01-29T13:08:54.063
> 
> 标签：c#, asp.net-mvc-3

我有`Controller`两个动作，`Logon`没有任何装饰器和`LogOn`装饰`[HttpPost]`器。

代码：

```
 public ActionResult LogOn()
        {
            return View();
        }

        [HttpPost]
        public ActionResult LogOn(string username, string password, 
            bool? rememberMe, string returnUrl)
        {
            AccountService client = new AccountService();

            if (client.IsUserAllowedIn(username, password))
                FormsAuthentication.SetAuthCookie(username, rememberMe ?? false);

            return Redirect(returnUrl);
        } 
```

我面临的问题是：当我尝试使用`[Authorize]`装饰器访问方法时，`ASP.NET MVC`不会重定向到我`LogOn`使用`[HttpPost]`装饰器的操作。

出于测试目的，我创建了一个名为`LogOn`using的表单，`Post`它可以正常工作。所以我想问题在于我使用装饰器的方式。

我的`web.config`：

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication> 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:10:41.127

> 我面临的问题是：当我尝试使用 [Authorize] 装饰器访问方法时，ASP.NET MVC 没有使用 [HttpPost] 装饰器重定向到我的 LogOn 操作。

当然不会。根据最基本的定义，重定向意味着 GET 请求。您不可能期望您能够重定向到只能通过 POST 动词访问的控制器操作。这不可能。

除此之外，为什么您希望受保护的资源*将您重定向*到应该验证您的凭据的控制器操作。人们通常期望的是，当有人试图访问受保护的资源时，他会被重定向到一个控制器操作，该操作将呈现一个登录表单，用户可以在其中输入他的凭据，将此表单提交给相应的 POST 操作以进行验证，如果他的凭据是有效的 POST 操作将发出一个表单身份验证 cookie 并将他重定向回返回 URL，该 URL 指向他最初请求的受保护资源。

# python - Python：在类上定义的哈希不会识别元组

> ID：14583687
> 
> 赞同：0
> 
> 时间：2013-01-29T13:09:00.760
> 
> 标签：python, class, hash

我正在尝试实现[此处](https://stackoverflow.com/questions/2909106/python-whats-a-correct-and-good-way-to-implement-hash)建议的哈希定义，但是在尝试在类上使用哈希时出现错误。该类定义如下：

```
class Metabolite:
    def __init__(self, name_in='', id_in='', synonyms_in=[], InChIKey_in='', formulae_in=[], charge_in='', ecs_in=[], mtk_in = [],  mtb_in = '', mtm_in = '', mts_in = '', bkm_id_in = '', source_in = ''):
        self.name = name_in
        self.id = id_in
        self.formulae = formulae_in
        self.inchikey = InChIKey_in
        self.synonyms = synonyms_in
        self.charge = charge_in
        self.ecs = ecs_in
        self.mtb = mtb_in
        self.mtk = mtk_in
        self.mtm = mtm_in
        self.mts = mts_in
        self.bkm_id = bkm_id_in
        self.source = source_in

    def key(self):
        return self.id, self.inchikey, self.mts, self.mtk, self.mtb, self.mtk

    def __key(self):
        return tuple([self.id, self.inchikey, self.mts, self.mtk, self.mtb, self.mtk])

    def __eq__(self, other):
        return self.__key() == other.__key()

    def __hash__(self):
        return hash(tuple(self.__key())) 
```

但是，在创建此类的实例并要求哈希时，我得到以下信息：

```
>>> met = Metabolite('this_metabolite', '10002', 'AADBRHFDG')
>>> hash(met)

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-7941e6f25128> in <module>()
----> 1 hash(met)

classes.py in __hash__(self)
     27 
     28     def __hash__(self):
---> 29         return hash(tuple(self.__key()))
     30 
     31 

TypeError: unhashable type: 'list' 
```

尽管我在类定义中不顾一切地尝试将类型强制为（可散列的）元组。我是 Python 课程的新手，任何帮助将不胜感激。

在 IDLE 中运行时，错误出现为：

```
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    hash(met)
  File "<string>", line 27, in __hash__
TypeError: unhashable type: 'list' 
```

已解决：感谢那些回复的人。

包含空列表的元组将不起作用：

```
>>> my_tuple = tuple(('a',[]))

>>> type(my_tuple)

tuple

>>> hash(my_tuple)

---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-28-f63af41cc75b> in <module>()
----> 1 hash(my_tuple)

TypeError: unhashable type: 'list' 
```

所以我必须在返回变量之前创建一个变量列表`__key()`：

```
def __key(self):
    key_list = []
    key_list.append(self.id)
    key_list.append(self.inchikey)
    key_list.append(self.mts)
    key_list.append(self.mtb)
    for entry in self.mtk:
        key_list.append(entry)
    return tuple(key_list) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:32:57.990

问题是该`mtk`属性是一个列表（默认情况下）。可变序列类型不能被散列，并且由于您的键包含`mtk`（两次），因此键不可散列（即使键本身是 a `tuple`）。

如果您按如下方式修改您的密钥生成，那么它就变成了可散列的（但它可能证明效率非常低）：

```
def __key(self):
    mtk = tuple(self.mtk)
    return tuple([self.id, self.inchikey, self.mts, mtk, self.mtb, mtk]) 
```

这将在 Python 2.7 中返回（通过上述修改从您的问题粘贴的代码）：

```
>>> met = Metabolite('this_metabolite', '10002', 'AADBRHFDG')
>>> hash(met)
7276685348836095537 
```

# c++ - 从多重/钻石继承继承

> ID：14583688
> 
> 赞同：3
> 
> 时间：2013-01-29T13:09:03.750
> 
> 标签：c++, inheritance, multiple-inheritance, virtual-inheritance, diamond-problem

我有以下情况：

```
class A
{
  public:
    A(std::string id);
};

class B : public virtual A
{
  public:
    B();
};

class C : public virtual A
{
  public:
    C();
};

class D : public B, public C
{
  public:
    D(std::string id);
};

D::D(std::string id) : A(id), B(), C()
{
}

class X : public D
{
  public:
    X(std::string id);
}

X::X(std::string id) : D(id)
{
} 
```

现在，如果我创建一个 D 实例，一切正常。但是，如果我创建 X 的一个实例，我会得到一个编译器错误，它告诉我某些东西试图调用 A 的默认构造函数——它不存在。如果我创建它，它会编译，但只调用默认构造函数，因此，id 没有正确设置/初始化。

这可以通过像这样实现 X 的构造函数来解决：

```
X::X(std::string id) : A(id), D(id)
{
} 
```

但我的理解是，这应该是不必要的。那么我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:18:03.910

您需要创建所有构造函数`public`并定义一个默认构造函数，`A`因为字符串构造函数会将默认构造函数标记为`=delete`. 此外，[最派生的类将初始化任何虚拟基类](https://stackoverflow.com/questions/12500230/diamond-inheritance-lowest-base-class-constructor)，引用[标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)：

**12.6.2 初始化基和成员 [class.base.init]**

> 10 在非委托构造函数中，初始化按以下顺序进行： — 首先，并且仅对于最派生类 (1.8) 的构造函数，虚拟基类按照它们出现在深度优先的顺序进行初始化。 - 基类的有向无环图的右遍历，其中“从左到右”是派生类基类说明符列表中基类的出现顺序。

在这种情况下，这意味着`X`确实必须初始化`A`。

```
#include <iostream>
#include <string>

class A
{
public:
  A() { std::cout << "A\n"; }
  A(std::string id) { std::cout << id << " A(id)\n"; }
};

class B : public virtual A
{
public:
   B() { std::cout << "B\n"; }
};

class C : public virtual A
{
public:
   C() { std::cout << "C\n"; }
};

class D : public B, public C
{
public:  
   D(std::string id): A(id) { std::cout << id << " D(id)\n"; }
};

class X : public D
{
public:
  X(std::string id): A(id), D(id) { std::cout << id << " X(id)\n"; }
};

int main()
{
   X x("bla");
   x;       
} 
```

# javascript - Ext JS 4.1.3：如何从 JSON 存储中获取值

> ID：14583691
> 
> 赞同：1
> 
> 时间：2013-01-29T13:09:25.140
> 
> 标签：javascript, json, extjs, extjs4

我有一个`Ext.data.Store`充满语言变量。后面的 JSON 如下所示：

```
{
    "language":"en_GB",
    "data":[
        {"fieldName":"browserInfo","fieldValue":"Descriptive text"}
    ]
} 
```

我创建的商店：

```
 Ext.local.langStore = Ext.create('Ext.data.Store', {
     autoLoad: true,
     fields: [
         {name: 'fieldName', type: 'string'},
         {name: 'fieldValue', type: 'string'},
     ],
     proxy: {
         type: 'ajax',
         url: 'en_GB.json',
         reader: {
             type: 'json',
             root: 'data'
         }
     }
 }); 
```

我正在尝试`fieldValue`从给定的`fieldName`. 我如何在 Ext 中做到这一点？我试过使用：

```
var getLabel = function(field_id) {
    var store = Ext.local.langStore;
    var index = store.findExact('fieldName',field_id);
    if(index >= 0) {
        return store.getAt(index).get('fieldValue'); 
    } else {
        return field_id;
    }
} 
```

但是没有太多的运气。`index`总是`-1`

任何帮助表示赞赏，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:34:23.830

尝试这个，

```
var getLabel = function(field_id) {
    var store = Ext.local.langStore;
    var record = store.findRecord('fieldName', field_id);
    if(record) {
        return record.get('fieldValue'); 
    } else {
        return field_id;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:22:41.033

正如我在第一篇文章中评论的那样（重新发布以结束这个问题）：

> 解决了。它本身的功能没有问题，它是在加载商店本身之前调用的测试程序。添加一个
> 
> ```
>  Ext.onReady(function() { 
>       console.log(getLabel('browserInfo')); 
>  }); 
> ```
> 
> 解决了这个问题。

# windows - 使用 bat 文件对文件进行连续编号

> ID：14583695
> 
> 赞同：0
> 
> 时间：2013-01-29T13:09:35.547
> 
> 标签：windows, batch-file, dos

我有一个保存所有 .ild 文件的文件夹。问题是它们都应该被编号，我需要一个批处理脚本来做到这一点。

我将所有的 ilds 保存在 ILDS 文件夹中。

现在我在“ILDS”文件夹中有这 3 个文件：

```
09.ild
test.ild
s p a c e d.ild 
```

我如何重命名它们，所以它们将被命名：

```
1.ild
2.ild
3.ild 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:33:34.607

```
@echo off
setlocal disableDelayedExpansion
pushd "c:\somePath\ilds"
set "N=0"
for %%F in (*.ild) do (
  set "file=%%F"
  setlocal enableDelayedExpansion
  set /a N+=1
  ren "!file!" "!N!.ildnew"
  endlocal
)
ren *.ildnew *.ild
popd 
```

重命名必须分两步完成，因为给定的 number.ild 可能已经存在。

注意：脚本可以多次运行，但一旦有 10 个或更多文件，每次运行时都会重新分配编号。换句话说，第一次命名为 1.ild 的文件在第二次运行后将不再是同一个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:21:02.547

您可以遍历它们并重命名它们

```
setlocal enabledelayedexpansion
set /a num=1
for %%a in (*.txt) do (
ren "%%a" "!num!%%~xa"
set /a num+=1
) 
```

# html - 子 div 边距顶部

> ID：14583699
> 
> 赞同：2
> 
> 时间：2013-01-29T13:09:44.327
> 
> 标签：html, css

HTML

```
<div class="wrap">
    <div class="sub">sub</div>
</div> 
```

CSS

```
.wrap {
    width: 100px;
    height: 100px;
    background: #565656;
}

.sub {
    background: red;
    margin-top: 100px;
} 
```

为什么 sub div 的边距相对于 body 移动 wrap 而不是自身相对于 wrap？（可能是有史以来最愚蠢的问题，但我没有得到><） [http://jsfiddle.net/QJug3/](http://jsfiddle.net/QJug3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:13:48.607

欢迎来到崩塌边缘的奇妙世界：

[http://www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

基本上可以归结为：如果您有两个相邻的垂直边距，则只使用其中一个而忽略另一个。浏览器假定您打算拥有 1 个边距，而不是您通常期望的：2 个边距相加。

实现您想要的最简单（但不是那么优雅）的方法是给您的`wrap`div a `padding-top`of`1px`以便边距不再相邻。

```
.wrap {
 width: 100px;
 height: 100px;
 background: #565656;
 padding-top: 1px; /* add this */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:15:23.393

Bazzz 解释了原因，以实现您想要的（据我了解）

[http://www.codepen.io/anon/pen/jHqry](http://www.codepen.io/anon/pen/jHqry)

```
.wrap {
    width: 100px;
    height: 100px;
    background: #565656;
  position:relative;
}

.sub {
    background: red;
    top: 100px;
  position:relative;
} 
```

# matlab - 从 MATLAB 中的结构体中删除字段

> ID：14583701
> 
> 赞同：2
> 
> 时间：2013-01-29T13:09:46.823
> 
> 标签：matlab

我的结构 Vinlu 大小为 1X36：

```
 Vinlu = 

        vessel: [1x36 struct] 
```

每个都有5个字段：

> > 万能船

```
 ans = 

        1x36 struct array with fields:
        pixels
        indexNOmask
        indexWHOLEvessel
        widths
        Meanwidth 
```

有些血管字段的像素字段为空，例如：

> > Vinlu.vessel(1,4)

```
 ans = 

              pixels: [0x2 double]
         indexNOmask: [0x1 double]
    indexWHOLEvessel: [0x1 double]
              widths: [1x0 single]
           Meanwidth: NaN 
```

我想从像素字段为空的结构中删除所有这些容器字段（无论其他字段如何）。容器中的一个或多个字段可能为空，但我想删除那些具有空像素字段的字段，这样我将获得大小为 1 X n 的结构 Vinlu ，其中 n<36

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:16:24.423

`vessel`首先找到具有空`pixels`字段的结构的索引：

```
idx = cellfun('isempty', {Vinlu.vessel.pixels}); 
```

然后只保留那些`vessel`具有非空`pixels`字段的元素：

```
Vinlu.vessel = Vinlu.vessel(~idx); 
```

在一个看起来像这样的单行中：

```
Vinlu.vessel = Vinlu.vessel(~cellfun('isempty', {Vinlu.vessel.pixels})) 
```

# emacs - 对齐来自emacs lisp的正则表达式

> ID：14583702
> 
> 赞同：8
> 
> 时间：2013-01-29T13:09:48.777
> 
> 标签：emacs, elisp

我正在尝试使用以下 elisp 函数来对齐文本`=`：

```
(defun align-= ()
  "Align lines by `=`"
  (interactive)
  (align-regexp (region-beginning) (region-end) "=")) 
```

我正在尝试对齐以下文本：

```
offer = stub('offer')
user = stub('user') 
```

但是emacs返回以下错误：

```
align-region: Marker does not point anywhere 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T16:04:44.010

我通过这样做使它工作：

```
(defun align-= (p1 p2)
  "Align lines by =" 
  (interactive "r")
  (align-regexp p1 p2 "\\(\\s-*\\)=" 1 1 nil)
) 
```

据我了解，它`align-regexp`没有收到您认为它正在接收的内容。

`M-x align-regexp <RET> = <RET>`您可以通过调用然后点击手动测试它`C-x ESC ESC`（默认`repeat-complex-command`绑定到`C-x ESC ESC`，您也可以使用 Mn / Mp 在历史记录中移动），您将确切看到传递给`align-regexp`. 然后我将该行复制到函数中。 *（我也使用了交互式“r”，因为它很方便）*

它在 Emacs 24 上为我工作。

相关但不是 100% 相同于：

[Mx align-regexp 与 Cu Mx align-regexp 行为不一致](https://stackoverflow.com/questions/12974518)

并且：

[标记不指向对齐正则表达式（Emacs）的任何地方](https://stackoverflow.com/questions/13315064)

# visual-studio-2010 - 更新源时，Visual Studio / MSBUILD 不会更新 .lib 文件

> ID：14583703
> 
> 赞同：11
> 
> 时间：2013-01-29T13:09:49.397
> 
> 标签：visual-studio-2010, msbuild

我有一个带有库项目的 Visual Studio 解决方案，我们称之为它`libFoo`，还有一个可执行项目——我们称之为`Bar`依赖于`libFoo`.

例如，当我更改`libFoo/bar.cpp`并尝试构建时`libFoo`，Visual Studio 会编译我的 bar.cpp 文件，但不会重新生成 library `libFoo.lib`，说它已经是最新的。

我检查了系统时钟。我还验证了`bar.obj`文件的修改时间实际上是更新的，并且库比 obj. 但它仍然没有重新创建库。

实际的解决方案实际上由大约 100 个项目组成，其中一些是库，其中一些是可执行文件。问题发生在我的 3 名团队成员的计算机上。其余不受影响。我们不知道它为什么会发生，以及如何解决它......或者天气它可能会发生在其他团队成员身上。

我无法通过使用库和依赖于它的可执行文件创建自己的小型解决方案来重新生成它。所以我相信这是环境问题和我们的解决方案/项目文件问题的某种组合。

谢谢，亚历克斯。

**编辑**

该解决方案是在 Visual Studio 2010 上创建的，过去几年在 VS2010 上开发，直到我们开始使用 VS2012。安装了 VS2010 和 VS2012 的用户会出现此问题。解决方案现在是VS2012解决方案，项目使用VS2010平台工具包。

当我们开始使用 VS2012 时，我们的团队迁移了解决方案，但我们将所有 C++ 项目的“平台工具包”保留为 VS2010，以便我们的代码与仍在使用 VS2010 的其他团队兼容。

谷歌没有透露任何可行的解决方案。尽管它确实揭示了其他人也遇到过类似问题的事实。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:46:59.243

It seems that we have encountered the same problem as the person who asked [this](https://stackoverflow.com/questions/12182203/executable-not-rebuilt-but-object-files-recompiled) question. There is also a [bug report](http://connect.microsoft.com/VisualStudio/feedback/details/636271/linker-skipped-when-building-when-intermediate-directory-points-into-temp-folder) on Microsoft Connect.

To make things short - our intermediate folder was the same as our %temp% folder on some configurations. We solved the problem by modifying the intermediate folder of all our Visual C++ projects.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:20:31.180

确保“General\Target Name”和“Librarian\Output File”的项目属性匹配，并且它们与所有配置匹配。在“图书馆员\命令行”页面上检查上述内容也是值得的。

# ruby-on-rails - 如何验证只有一个用户可以成为监护人？

> ID：14583706
> 
> 赞同：0
> 
> 时间：2013-01-29T13:09:50.880
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我应该如何编写只有一个用户可以成为监护人的验证。我正在使用导轨 3.2

**模型**

```
class User
  validate :only_one_guardian

  def only_one_guardian
    if User.where(guardian: true).count > 0
      errors.add( :company_id, 'we already have a guardian')
    end
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:17:24.893

怎么样：

```
 validates :guardian,:uniqueness=>true,:if=>:guardian? 
```

# c++ - OpenGL 将纹理绑定到顶点缓冲区对象（使用 CG 着色器）

> ID：14583709
> 
> 赞同：3
> 
> 时间：2013-01-29T13:09:57.730
> 
> 标签：c++, opengl, rendering, texture-mapping, vertex-buffer

我直奔主题：

我为我的顶点创建了一个结构：

```
struct Vertex3D
{
    Vector3D position;
    Vector2D textureCoordinate;
    Vector3D normal;
} 
```

然后我导入一个特定的 *.dae 文件并将其绑定到一个 OpenGL 顶点缓冲区，该缓冲区由 Vertex3D 结构化顶点列表构成。一切顺利，网格导入并显示，我可以使用着色器对其进行操作，但我有一个问题。

我还要做的是加载并为其分配纹理。之后我试图以这种方式显示它：

```
glEnableVertexAttribArray(0);
glEnableVertexAttribArray(8);
glEnableVertexAttribArray(2);

glBindBuffer(GL_ARRAY_BUFFER, this->_entries[i].VB);
glVertexAttribPointer(0,3, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D), 0); // Vertices
glVertexAttribPointer(8,2, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D), (const GLvoid*)sizeof(RomCommon::Vector3D)); // Supposed texture position
glVertexAttribPointer(2,3, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D),  (const GLvoid*)(sizeof(RomCommon::Vector2D) + sizeof(RomCommon::Vector3D))); // Supposed normal position
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, this->_entries[i].IB);
glBindTexture(GL_TEXTURE_2D, 3);
glDrawElements(GL_TRIANGLES, this->_entries[i]._indexCount, GL_UNSIGNED_INT, 0);

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(8);
glDisableVertexAttribArray(2); 
```

我的问题是没有显示纹理。仅分配纹理第一个像素的颜色（在我的情况下为蓝色）。我已经使用gDEBugger调试了整个过程，我可以看出VertexBuffer似乎设置正确，纹理图像加载正确，但不会显示。

我已经尝试搜索和尝试调试的不同方面，这包括：

*   确保 glEnable(GL_TEXTURE_2D) 已设置；
*   添加 glEnable(GL_LIGHTING) 和 glDisable(GL_LIGHTING)；
*   使用 glDisable(GL_DEPTH_TEST); glDisable(GL_BLEND); 和 glDisable(GL_SCISSOR_TEST); 在绑定纹理之前
*   获取错误
*   搜索奇怪的消息
*   仔细检查内存中的顶点缓冲区（实际上是通过元素并交叉比较 *.dae 文件中的内容）

**编辑**

我正在使用 CG 着色器。这是顶点程序：

```
struct vsOutput {

 float4 position : POSITION;
  float2 texCoord : TEXCOORD0;
  float3 color    : COLOR;
};

vsOutput VS_Main(      float4 position : POSITION,
                           float2 texCoord : TEXCOORD0,
                           float3 color    : COLOR,
                           uniform float4x4 ModelViewProj
                           )
{
  vsOutput OUT;

  OUT.position = mul(ModelViewProj, position);
  OUT.texCoord = texCoord;
  OUT.color = color;

  return OUT;   
} 
```

和片段程序：

```
struct fsOutput {
  float4 color : COLOR;
};

fsOutput FS_Main(
    float2 texCoord : TEXCOORD0,
    uniform sampler2D decal : TEX0
)
{ 
    fsOutput OUT;
    OUT.color = tex2D(decal,texCoord);
    return OUT;
} 
```

如有必要，我可以添加有关我的项目的更多详细信息，尽管根据我的追踪，问题似乎出在顶点缓冲区的渲染中。

**编辑**

我还发现因为我使用的是 CG，所以 vertexAttribPointers 应该是不同的（8 代表 TEXCOORD0）所以我在此基础上更改了一般描述。

**解决方案编辑**

非常感谢评论中的几个小伙子，他们打开了我的思路，从不同的角度看待这个问题，实际上做了更多的阅读。这是解决方案：

```
 glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(8);
    glEnableVertexAttribArray(2);

    glBindBuffer(GL_ARRAY_BUFFER, this->_entries[i].VB);
    glVertexAttribPointer(0,3, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D), 0); // Vertices
    glVertexAttribPointer(8,2, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D), (const GLvoid*)sizeof(RomCommon::Vector3D)); // Supposed texture position
    glVertexAttribPointer(2,3, GL_FLOAT, GL_FALSE, sizeof(RomCommon::Vertex3D),  (const GLvoid*)(sizeof(RomCommon::Vector2D) + sizeof(RomCommon::Vector3D))); // Supposed normal position
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, this->_entries[i].IB);

/* Solution start */
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glTexCoordPointer(2, GL_FLOAT, sizeof(RomCommon::Vertex3D), (const GLvoid*)12);
        glBindTexture(GL_TEXTURE_2D, 3);
        glDrawElements(GL_TRIANGLES, this->_entries[i]._indexCount, GL_UNSIGNED_INT, 0);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
/* Solution end */

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(8);
    glDisableVertexAttribArray(2); 
```

我的问题是我只是将纹理坐标传递给着色器，但没有将其推送到 OpenGL 状态机（如果这是一个好的表达方式）。我认为这与我使用的是 CG 着色器而不是 GLSL 着色器这一事实有关，尽管我可能是错的。该代码大致基于我阅读的一些示例和解释，但它们都基于 GLSL 着色器并且它们正在工作，因此是奉献的。无论如何，现在已经解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:46:30.030

```
glBindTexture(GL_TEXTURE_2D, 3); 
```

我会警惕在 OpenGL 上强制使用纹理对象 ID。从技术上讲，它*应该*可以工作，但使用[`glGenTextures()`](http://www.opengl.org/sdk/docs/man2/xhtml/glGenTextures.xml)获取纹理 ID 是一个更好的主意。

# c++ - 如何为枚举中的每个可能值做 foreach？

> ID：14583712
> 
> 赞同：2
> 
> 时间：2013-01-29T13:10:04.247
> 
> 标签：c++, c++11, enums, foreach, containers

> **可能重复：**
> [C++：遍历枚举](https://stackoverflow.com/questions/261963/c-iterate-through-an-enum)
> [枚举 C++ 中的枚举](https://stackoverflow.com/questions/1390703/enumerate-over-an-enum-in-c)

我有：

```
 enum topics {gui, combat}
  std::map <topics, std::vector<cSubscriber *>> subscribers; 
```

我想要类似（伪代码）的东西：

```
 FOR EACH (value in topics enum)
   {
       std::vector<cSubscriber *> & temp = subscribers[value];
   } 
```

我如何在 C++11 中做到这一点？我知道容器有新的 foreach，但我认为它不适用于枚举。

# ruby-on-rails - RoR：Routes.rb 不重定向根目录和多个 ~ RB 文件

> ID：14583715
> 
> 赞同：0
> 
> 时间：2013-01-29T13:10:09.507
> 
> 标签：ruby-on-rails

我一直在尝试在这里完成本教程：[http](http://rubysource.com/building-your-first-rails-application-models/) ://rubysource.com/building-your-first-rails-application-models/ （以及与此处的代码相比，[http://dorkbyte.com/ 2012/07/31/teach-yourself-ruby-on-rails/](http://dorkbyte.com/2012/07/31/teach-yourself-ruby-on-rails/)，因为第二作者声称第一作者有一些错误）。我已经完成了，但是有几个问题没有反映作者所说的应该发生的事情。

**一**。在config文件夹的routes.rb文件中，代码：

```
resources :urls, :only => [:show, :new, :create]

[Comment line (StackOverflow increases text with a hash] redirects main to app

root :to => redirect('/urls/new') 
```

服务器仍然加载标准页面；根据作者的说法，这不应该发生。它应该重定向到应用程序。

**二**。实际上，我在键入此内容时更正了另外两个问题，但我确实有一个问题要问 Windows 中的 RoR 开发人员。保存 .RB 文件时，很多时候我会看到四个和五个相同类型的文件，例如：

> urls_controller
> urls_controller ~
> urls_controller ~~
> urls_controller ~~~

我已经在其他 Windows 文件（如 Excel、Word 等）中看到过这种情况，但在保存程序后它们就消失了。使用这些 RB 文件，即使在保存后，它们也不会消失并保留原始文件。我什至重新启动计算机以查看它们是否会消失，但它们没有。有多个 RB 文件只有 ~ 差异计数是否正常，或者这是某种错误/错误？

**编辑：**我真的，真的不知道为什么 StackOverflow 不能掌握 1\. 然后 2\. 的概念，而无需再次将我的 2\. 更改为 1\. 。所以我只是让它们成为文本值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:34:07.943

您在评论中提到`index.html`您的目录中有一个文件`public/`。Rails 会将此文件优先于 中的任何内容`config/routes.rb`，因此当您转到根 URL 时，它将提供该文件（因此您会看到默认的 Rails 页面而不是新的 url 页面，正如您所期望的那样）。

解决问题非常简单：只需删除`index.html`文件。然后您的路线应该按预期启动。

# wpf - WPF：图像按钮小

> ID：14583717
> 
> 赞同：0
> 
> 时间：2013-01-29T13:10:11.893
> 
> 标签：wpf, image, xaml, button

我通过 xaml 创建了一个图像按钮：

```
 <Button x:Name="btnAdd5" Grid.Column="12" Grid.Row="6" Visibility="Visible" >
            <Image Source="/MyApp;component/Images/Icons/add-icon.png" />
        </Button> 
```

在 xaml 设计器中，一切都很好，但在调试模式下，我只看到一个小点。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:13:38.990

尝试将图像如下所示：

```
 <Button>
        <Button.Template>
            <ControlTemplate>
                <Image Source="/MyApp;component/Images/Icons/add-icon.png" x:Name="btnAdd4I"  Visibility="Visible" Stretch="Fill"  />
            </ControlTemplate>
        </Button.Template>
    </Button> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-09T04:27:10.900

如果您使用的是 Visual Studio，则还必须将图像添加到项目文件中，否则您将获得所描述的行为。例如，我在我的项目中创建了一个图标文件夹，并将所有图标（.png 格式）单独移动到该文件夹​​中。史诗般的失败！预览工作正常，但是在运行可执行文件时，图标不可见。显然，除非您在 VS 项目文件中添加特定引用，否则它们不会作为资源添加到可执行文件中。再次，预览将起作用......但在解决问题时结果证明这是一个可怕的红鲱鱼。花了我大约4个小时来解决！

对于我想使用的每个图标，我必须单击 VS 中的项目文件夹，说“添加现有项目”，然后选择正确的文件。这是您应该在 .csproj 文件中看到的内容：

```
<ItemGroup>
    <Resource Include="Icons\cut.png" />
    <Resource Include="Icons\page_copy.png" />
    <Resource Include="Icons\page_paste.png" />
    <Resource Include="Icons\text_bold.png" />
    <Resource Include="Icons\text_italic.png" />
    <Resource Include="Icons\text_underline.png" />
</ItemGroup> 
```

# css - 在 mixin 问题中 Sass 的每个循环行为

> ID：14583722
> 
> 赞同：1
> 
> 时间：2013-01-29T13:10:25.717
> 
> 标签：css, sass

遇到了一个让我发疯的 Sass 问题。基本上我有以下 Sass 代码：

```
$breakpoints: mobile 320px, tablet 760px, desktop 960px;

@mixin setbreakpoint($point) {
    @each $breakpoint in $breakpoints {
      @if $point == #{nth($breakpoint, 1)} {
        @media (min-width: #{nth($breakpoint, 2)}) { @content; }
      }
    }
}

.page-wrap {
  width: 75%;
  @include setbreakpoint(mobile) { content:"mobile"; }
  @include setbreakpoint(tablet) { content:"tablet"; }
  @include setbreakpoint(desktop) { content:"desktop"; }
}

@each $breakpoint in $breakpoints {
    .page-wrap-#{nth($breakpoint, 1)} { content:#{nth($breakpoint, 2)}; }
} 
```

输出以下CSS：

```
.page-wrap {
  width: 75%; }
  @media (max-width: 320px) {
    .page-wrap { content: "mobile"; } }
  @media (max-width: 760px) {
    .page-wrap { content: "mobile"; } }
  @media (max-width: 960px) {
    .page-wrap { content: "mobile"; } }
  @media (max-width: 320px) {
    .page-wrap { content: "tablet"; } }
  @media (max-width: 760px) {
    .page-wrap { content: "tablet"; } }
  @media (max-width: 960px) {
    .page-wrap { content: "tablet"; } }
  @media (max-width: 320px) {
    .page-wrap { content: "desktop"; } }
  @media (max-width: 760px) {
    .page-wrap { content: "desktop"; } }
  @media (max-width: 960px) {
    .page-wrap { content: "desktop"; } }

.page-wrap-mobile {
  content: 320px; }

.page-wrap-tablet {
  content: 760px; }

.page-wrap-desktop {
  content: 960px; } 
```

问题是：为什么 mixin 每个循环产生 9 个结果，而基本类每个循环产生 3 个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:10:22.057

这是因为这里的 if 语句：

```
@if $point == #{nth($breakpoint, 1)} {
    @media (min-width: #{nth($breakpoint, 2)}) { @content; }
} 
```

您正在比较不同类型的变量。无论出于何种原因，编译器总是认为它们是相等的。您所要做的就是删除字符串插值，它可以按预期工作：

```
@if $point == nth($breakpoint, 1) {
    // You don't need when displaying the value either...
    @media (min-width: nth($breakpoint, 2)) { @content; }
} 
```

# ios - 如果安装了 App B，则解锁 App A 中的功能

> ID：14583726
> 
> 赞同：1
> 
> 时间：2013-01-29T13:10:33.700
> 
> 标签：ios, keychain

我有两个 iOS 应用程序说**App A**和**App B**。我需要实现如下功能：

如果用户安装了我的**App A**，那么我需要要求用户安装我的**App B**（如果未安装）以解锁**App A**中的特殊功能。

**我的问题：**

*   如何找到我的 App B 是否安装？
*   如果安装了**App B**，如何解锁**App A**中的功能？
*   我可以通过 Keychain 共享数据吗？

**我尝试了什么：**

*   我搜索了很多，但找不到任何教程或示例代码
*   检查了苹果文档，但无法获得任何选项
*   [我在Talking Ginger](https://itunes.apple.com/in/app/talking-ginger/id531323947?mt=8)应用程序中看到了类似的功能。它要求安装来自类似公司的另一个应用程序以获得额外的积分。

我认为有办法在不使用私有框架的情况下做到这一点，因为上述应用程序已获得苹果公司的批准并在应用程序商店中可用。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:16:52.770

有一种方法可以通过阅读 plist .. 技术上可行，但如果找到你的应用程序会被拒绝（嗯......可能......取决于苹果的心情）

更好更安全的是使用自定义 URL 方案： [http ://danielamitay.com/blog/2011/2/16/how-to-detect-installed-ios-apps](http://danielamitay.com/blog/2011/2/16/how-to-detect-installed-ios-apps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:17:20.537

你为什么不使用 iOS URL Schema `canOpenURL`。使用 Url 架构，您可以找到是否安装了应用程序。

```
UIApplication *myApplication = [UIApplication sharedApplication];
NSString *myPath = @"appURL://";
NSURL *myURL = [NSURL URLWithString:myPath];
if ([myApplication canOpenURL:myURL]) {
    //Installed
    //Go for unlock login
}
else {
    //Not Installed
    //Inform user application not installed and redirect to iTunes Application url 
} 
```

# asp.net - 多个异步视图

> ID：14583727
> 
> 赞同：0
> 
> 时间：2013-01-29T13:10:40.643
> 
> 标签：asp.net, .net, asp.net-mvc, asp.net-mvc-4, async-await

我是 asp.net mvc 4 的新手，我对新的 async/await 功能有疑问。在[本教程](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)中，“并行执行多个操作”部分将 3 种类型的列表（产品、Gizmo 和小部件）作为单个视图返回。

我正在尝试实现相同类型的 UI，但我的 3 个列表将是 3 个不同的视图。用户将在搜索框中键入一个值并点击搜索按钮以触发对异步控制器方法的调用。但这应该会返回 3 种不同的观点，我认为这是不可能的。

那么拥有 3 个局部视图并调用三个不同的异步控制器方法是否有意义？一旦控制器方法返回，视图会立即出现在屏幕上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:51:48.470

您不能在 1 中捆绑 3 个请求。您必须执行 3 个异步调用（通过 jquery 或您使用的任何框架），然后加载到您的 3 个视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:20:21.357

异步不会更改 HTTP 协议。每个请求都会得到一个回复​​，仅此而已。

如果您想要彼此独立返回 3 个不同（部分）视图，那么您必须从客户端发出 3 个请求。

# spring - 使用石英安排动态作业，在春季使用休眠（在服务器崩溃时从数据库安排作业）备份

> ID：14583729
> 
> 赞同：1
> 
> 时间：2013-01-29T13:10:41.583
> 
> 标签：spring, hibernate, quartz-scheduler

我想使用石英、休眠和弹簧动态安排作业。而且我需要在表（DB）中进行备份，同时动态安排作业。

1.  当服务器崩溃或停止时，通过使用表详细信息，我可以再次安排所有作业列表吗？
2.  在这里使用休眠（mysql）有什么好处吗？
3.  请指导我如何开发此要求

您的帮助将不胜感激。如果可能的话，也请给我一些例子。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:35:29.550

所有这些问题的一般答案是 jdbcjobstore。Quartz 在文档中提供了更多详细信息。 [http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/TutorialLesson09](http://quartz-scheduler.org/documentation/quartz-1.x/tutorials/TutorialLesson09)

# c - 在 C 中使用 libgcrypt 导出密钥

> ID：14583733
> 
> 赞同：2
> 
> 时间：2013-01-29T13:10:47.163
> 
> 标签：c, cryptography, aes, libgcrypt

我正在开发一个简单的软件来进行 aes256-cbc 文件加密。该软件是在 GNU/Linux 上使用 libgcrypt-1.5.0 开发的。

我想将上述函数与`GCRY_KDF_PBKDF2`as`algo`和`SHA512`as subalgo 一起使用。

```
gcry_kdf_derive( const void *passphrase, size_t passphraselen, int algo, int subalgo,
                 const void *salt, size_t saltlen, unsigned long iterations, 
                 size_t keysize, void *keybuffer ) 
```

此函数从 a 派生密钥`passphrase`。`keysize`以八位字节给出键的请求大小. `keybuffer`是调用者提供的缓冲区，成功时使用派生密钥填充。输入密码短语取自`passphrase`密码短语八位字节的任意内存缓冲区。`algo`指定要使用的 KDF 算法；见下文。`subalgo`指定 KDF 算法内部使用的算法；这通常是一种哈希算法，但某些 KDF 算法可能会以不同的方式使用它。`salt`是一种长度为 saltlen 八位字节的盐，这是大多数 KDF 算法所需要的。`iterations`是大多数 KDF 的正整数参数。

我不了解如何使用此功能的三件事：

1.  `salt`必须随机生成，因此**必须**将其**未**加密放入输出文件中，不是吗？（IV-密文-SALT-MAC）
2.  `saltlen`有一个正确的“加密”值还是我可以选择我喜欢的任何东西？比如 10,20,30...
3.  keysize（在这种情况下）必须是 512，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T23:54:32.197

> 1) salt 必须是随机生成的，因此必须将其未加密放入输出文件中，不是吗？（IV-密文-SALT-MAC）

正确，尽管更合乎逻辑的形式是某种容器格式的 SALT-IV-CIPHERTEXT-MAC。这将是另一方需要组件的顺序

1.  计算密钥
2.  验证数据
3.  解密数据

> 2) saltlen 具有正确的“加密”值，或者我可以选择我喜欢的任何东西吗？比如 10,20,30...

最低限度（对于高度安全的系统）将是 64 位或 8 字节，但由于您使用的是高端加密原语，为什么不选择 256 位安全随机，以匹配您的密钥大小。

> 3）keysize（在这种情况下）必须是512，对吧？

这是正确的，*以位*为单位的密钥大小必须为 512。API 期望 KEYSIZE 参数以八位字节为单位，因此将是 64 个八位字节。您似乎想要执行 MAC 签名/验证。这需要与用于加密/解密的密钥不同的密钥。因此，您需要*两个*256 位密钥，幸运的是，它们与 SHA-512 算法的输出相匹配。我说“幸运”是因为你真的不希望 PBKDF2 计算另一个块 - 它会再次经历所有迭代。

IV值最好单独计算，放在密文前面。您应该在 MAC 计算中包含 IV 值（否则将不会验证第一个纯文本块）。IV 应该是一个随机数据块，因此对于 AES，这将是 128 位或 16 字节的安全随机数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T14:54:49.177

1）[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)值是非秘密的，可以与加密数据一起存储。他们所做的一切都是混淆加密值，因此使用 GCRY_KDF_PBKDF2 和 SHA512 加密单词“the”的密码“cat”并不总是产生密文“86c8z385a33146b59d”或其他任何内容。这可以防止使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_tables)的攻击。您可以将其放在加密文件中，但它作为元数据更有用。

2）我认为这不重要。无论你想要什么。尽管以硬盘驱动器的价格，将彩虹表的大小乘以 8 并不可笑。所以你可能需要一个以上的字节。

3）是的，因为您使用的是 SHA-512，所以您的密钥大小是 512。

此外，由于我不是一个真正的密码爱好者，你可能想对所有这些（戴上太阳镜）持保留态度[。](http://en.wikipedia.org/wiki/Grain_of_salt)

# powershell - 如果 PowerShell 不提供，如何以 OEM 编码读取文件？

> ID：14583737
> 
> 赞同：1
> 
> 时间：2013-01-29T13:11:03.767
> 
> 标签：powershell, encoding

当与 .Net Framework 2.0 一起使用时，看起来 OEM 编码在 PowerShell 中不可用。

```
PS1> Get-Content $FilePath -Encoding OEM 
```

> 无法绑定参数“编码”。由于枚举值无效，无法将值“OEM”转换为类型“Microsoft.PowerShell.Commands.FileSystemCmdletProviderEncoding”。指定以下枚举值之一，然后重试。可能的枚举值为“Unknown, String, Unicode, Byte, BigEndianUnicode, UTF8, UTF7, Ascii”。

但是我有这种编码的文件，我想在字符串中读取，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:11:03.767

读入二进制数组并对其进行解码：

```
$enc = [System.Text.Encoding]::GetEncoding($Host.CurrentCulture.TextInfo.OEMCodePage)
$bytes = [System.IO.File]::ReadAllBytes($FilePath)
$text = $enc.GetString($bytes) 
```

# jpasswordfield - 解密和解密密码

> ID：14583741
> 
> 赞同：0
> 
> 时间：2013-01-29T13:11:16.703
> 
> 标签：jpasswordfield

我有一个人们可以登录的框架，我还有一个管理员可以添加用户（员工）的框架。我知道如何在使用 MD5 哈希添加用户时加密密码（在 jPasswordField 中给出）等等。但我不知道如何解密它。我今天用谷歌搜索了我的眼睛，但没有找到解决方案。

（为了保持这个线程井井有条，我已将代码发布在代码粘贴项中）。

登录框架： [http ://codepaste.net/j6imgd](http://codepaste.net/j6imgd)

[添加框架： http](http://codepaste.net/v4744v) ://codepaste.net/v4744v

如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:27:44.867

这可能会对您有所帮助：[如何构建登录系统。](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)

您要做的是对用户密码进行哈希处理，将其存储在数据库中，然后当用户登录时，您对他们输入的密码进行哈希处理，并将其与存储在数据库中的密码进行比较。如果它们匹配，则密码相同。请注意，您不应该使用 MD5 考虑使用带有盐的 SHA 512，如上面的链接所示，这是我使用的，这是一个非常有用的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:25:45.127

作为哈希，不要使用 MD5。MD5 已被破坏，如果攻击者掌握了您的哈希值，他将能够计算出明文密码是什么。有一些技术可以使普通哈希算法更安全（例如使用盐），但 MD5 实在是太糟糕了。

所以是的，使用哈希，这是一种单向加密（即您无法解密）密码。您不需要解密它们，因为如果用户输入正确的密码，它将产生相同的哈希值。

这是一个讨论 MD5 替代方案的[问题。](https://stackoverflow.com/questions/2768913/if-md5-is-broken-what-is-a-better-solution)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:15:15.377

诸如 MD5 之类的散列（我希望您没有使用普通的 MD5 来存储密码）是单向的。

您要做的只是将用户密码的哈希值与他们输入的内容进行比较。

如果用户的密码是“kitten”并且 - 暂时让我们假设您正在使用不安全的 MD5 - 您已将其哈希值“6da89cd09ab7937478a1d47d20938536”存储在您的用户数据库中，您只需要检查用户在登录时输入的密码的哈希值与之匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:16:53.317

实际上 MD5 是一种单向加密。如果要使密码可解密，则应使用其他算法进行加密和解密。

# python - 在子进程中使用多处理

> ID：14583742
> 
> 赞同：2
> 
> 时间：2013-01-29T13:11:23.857
> 
> 标签：python, multiprocessing

在windows中，必须先检查进程是否为**main**，才能使用multiprocessing，否则会出现死循环。

我试图将进程的名称更改为子进程的名称，以便在我调用的类或函数中使用多处理，但没有运气。这甚至可能吗？到目前为止，我没有使用多处理，除非它使用的是主进程。

如果可能的话，有人可以提供一个示例，说明如何在从更高进程调用的类或函数中使用多处理？谢谢。

编辑：

这是一个示例 - 第一个有效，但所有内容都在 1 个文件中完成：simplemtexample3.py：

```
import random
import multiprocessing
import math

def mp_factorizer(nums, nprocs):
    #schtze den prozess
    #print __name__
    if __name__ == '__main__':
        out_q = multiprocessing.Queue()
        chunksize = int(math.ceil(len(nums) / float(nprocs)))
        procs = []
        for i in range(nprocs):

            p = multiprocessing.Process(
                    target=worker,            
                    args=(nums[chunksize * i:chunksize * (i + 1)],
                          out_q))
            procs.append(p)
            p.start()

        # Collect all results into a single result dict. We know how many dicts
        # with results to expect.
        resultlist = []
        for i in range(nprocs):
            temp=out_q.get()
            index =0
            #print temp
            for i in temp:
                resultlist.append(temp[index][0][0:])
                index +=1

        # Wait for all worker processes to finish
        for p in procs:
            p.join()
            resultlist2 = [x for x in resultlist if x != []]
        return resultlist2

def worker(nums, out_q):
    """ The worker function, invoked in a process. 'nums' is a
        list of numbers to factor. The results are placed in
        a dictionary that's pushed to a queue.
    """
    outlist = []

    for n in nums:
        newnumber= n*2
        newnumberasstring = str(newnumber)
        if newnumber:
            outlist.append(newnumberasstring)
    out_q.put(outlist)

l = []
for i in range(80):
    l.append(random.randint(1,8))

print mp_factorizer(l, 4) 
```

但是，当我尝试从另一个文件调用 mp_factorizer 时，它不起作用，因为`if __name__ == '__main__'`：

简单示例.py

```
import random
import multiprocessing
import math

def mp_factorizer(nums, nprocs):
    #schtze den prozess
    #print __name__
    if __name__ == '__main__':
        out_q = multiprocessing.Queue()
        chunksize = int(math.ceil(len(nums) / float(nprocs)))
        procs = []
        for i in range(nprocs):

            p = multiprocessing.Process(
                    target=worker,            
                    args=(nums[chunksize * i:chunksize * (i + 1)],
                          out_q))
            procs.append(p)
            p.start()

        # Collect all results into a single result dict. We know how many dicts
        # with results to expect.
        resultlist = []
        for i in range(nprocs):
            temp=out_q.get()
            index =0
            #print temp
            for i in temp:
                resultlist.append(temp[index][0][0:])
                index +=1

        # Wait for all worker processes to finish
        for p in procs:
            p.join()
            resultlist2 = [x for x in resultlist if x != []]
        return resultlist2

def worker(nums, out_q):
    """ The worker function, invoked in a process. 'nums' is a
        list of numbers to factor. The results are placed in
        a dictionary that's pushed to a queue.
    """
    outlist = []

    for n in nums:
        newnumber= n*2
        newnumberasstring = str(newnumber)
        if newnumber:
            outlist.append(newnumberasstring)
    out_q.put(outlist) 
```

开始implemtexample.py

```
import simplemtexample as smt
import random

l = []
for i in range(80):
    l.append(random.randint(1,8))

print smt.mp_factorizer(l, 4) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:46:44.743

`if __name__ == '__main__'`是强制性的（至少在 Windows 中），如果想使用多处理。

在 windows 中它是这样工作的：对于您要生成的每个工作线程，windows 将自动启动主进程，并再次启动所有需要的文件。但是，只有已启动的第一个进程称为**main**。这就是阻止执行 mt_factorizer with`if __name__ == '__main__'`阻止多处理创建无限循环的原因。

所以基本上windows需要读取包含worker的文件，以及worker调用的所有函数——对于每个worker。通过阻止 mt_factorizer，我们确保不会创建额外的工作人员，而窗口仍然可以执行工作人员。这就是为什么在一个文件中包含所有代码的多处理示例会直接阻止创建工作程序（如 mt_factorizer 在这种情况下所做的那样）（但不是工作程序函数），因此 Windows 仍然可以执行工作程序函数。如果所有代码都在一个文件中，并且整个文件都受到保护，则无法创建任何工作人员。

如果多处理代码位于另一个类并被调用，则`if __name__ == '__main__'`需要在调用的正上方实现：mpteststart.py

```
import random
import mptest as smt

l = []
for i in range(4):
    l.append(random.randint(1,8))
print "Random numbers generated"
if __name__ == '__main__':
    print smt.mp_factorizer(l, 4) 
```

mptest.py

```
import multiprocessing
import math

print "Reading mptest.py file"
def mp_factorizer(nums, nprocs):

    out_q = multiprocessing.Queue()
    chunksize = int(math.ceil(len(nums) / float(nprocs)))
    procs = []
    for i in range(nprocs):

        p = multiprocessing.Process(
                target=worker,            
                args=(nums[chunksize * i:chunksize * (i + 1)],
                      out_q))
        procs.append(p)
        p.start()

    # Collect all results into a single result dict. We know how many dicts
    # with results to expect.
    resultlist = []
    for i in range(nprocs):
        temp=out_q.get()
        index =0
        #print temp
        for i in temp:
            resultlist.append(temp[index][0][0:])
            index +=1

    # Wait for all worker processes to finish
    for p in procs:
        p.join()
        resultlist2 = [x for x in resultlist if x != []]
    return resultlist2

def worker(nums, out_q):
    """ The worker function, invoked in a process. 'nums' is a
        list of numbers to factor. The results are placed in
        a dictionary that's pushed to a queue.
    """
    outlist = []

    for n in nums:
        newnumber= n*2
        newnumberasstring = str(newnumber)
        if newnumber:
            outlist.append(newnumberasstring)
    out_q.put(outlist) 
```

在上面的代码中，`if __name__ == '__main__'`已被删除，因为它已经在调用文件中。

然而，结果有些出乎意料：

```
Reading mptest.py file
random numbers generated
Reading mptest.py file
random numbers generated
worker started
Reading mptest.py file
random numbers generated
worker started
Reading mptest.py file
random numbers generated
worker started
Reading mptest.py file
random numbers generated
worker started
['1', '1', '4', '1'] 
```

多处理被阻止无限执行，但其余代码仍在执行多次（在这种情况下为随机数生成）。这不仅会导致性能下降，还可能导致其他令人讨厌的错误。解决方案是保护整个主进程不被 windows 重复执行，如果在某处使用多处理：mptest.py

```
import random
import mptest as smt

if __name__ == '__main__':  
    l = []
    for i in range(4):
        l.append(random.randint(1,8))
    print "random numbers generated"   
    print smt.mp_factorizer(l, 4) 
```

现在我们得到的只是想要的结果，随机数只生成一次：

```
Reading mptest.py file
random numbers generated
Reading mptest.py file
worker started
Reading mptest.py file
worker started
Reading mptest.py file
worker started
Reading mptest.py file
worker started
['1', '6', '2', '1'] 
```

请注意，在此示例中，mpteststart.py 是主进程。如果不是，`if __name__ == '__main__'`则必须向上移动调用链，直到它位于主进程中。一旦以这种方式保护了主进程，将不再有不需要的重复代码执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:37:05.500

[Windows 缺少`os.fork`.](http://docs.python.org/2/library/multiprocessing.html#windows) 所以在 Windows 上，多处理模块启动一个新的 Python 解释器并（重新）导入调用`multiprocessing.Process`.

使用的目的`if __name__ == '__main__'`是在重新导入脚本时保护调用`multiprocessing.Process`不被再次调用。（如果你不保护它，你就会得到一个叉子炸弹。）

如果您在*重新导入脚本时不会*`multiprocessing.Process`调用的类或函数中调用，那么就没有问题。继续照常使用。*`multiprocessing.Process`*

# html - 屏蔽为密码的文本区域

> ID：14583747
> 
> 赞同：3
> 
> 时间：2013-01-29T13:11:36.210
> 
> 标签：html, input, passwords, textarea

是否可以对文本区域 html 元素进行样式设置或屏蔽，因此它显示为密码类型的输入元素。

# php - PHP未定义索引：第48行“文件名”中的管理员

> ID：14583748
> 
> 赞同：0
> 
> 时间：2013-01-29T13:11:35.933
> 
> 标签：php, mysql

我正在关注[这个网站](http://css-tricks.com/php-for-beginners-building-your-first-simple-cms/)的教程，它不会停止给我这个错误：

> 注意：未定义的索引：第 48 行 C:\Users\Feia\Desktop\xampp\htdocs\index.php 中的 admin。

第 48 行如下所示：

> 回声（$_GET['admin'] == 1）？$obj->display_admin() : $obj->display_public();

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:12:35.420

看起来 URL 中没有 &admin=

你应该说

```
if(isset($_GET['admin'])){ //code here } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T07:41:04.863

拿这个代码：

```
echo (empty($_GET['admin'])) ? $obj->display_admin() : $obj->display_public(); 
```

现在，它起作用了；）

# php - 使用带有内部连接的 group by 和 min 子句时数据不一致

> ID：14583756
> 
> 赞同：2
> 
> 时间：2013-01-29T13:11:52.953
> 
> 标签：php, mysql, group-by, inner-join

我正在尝试根据表中的开始时间获取即将发生的事件。让我们假设以下内容：实际上我们正在加入表格。在表 A Locationid 是主键。我们正在加入另一个表以获取场地名称。您可能认为我们有冗余数据，但事实并非如此。用户在不同的日子访问同一地点。

![在此处输入图像描述](../Images/9ceb965548edfec1aadbc192fc6d833e.png)

现在我只想显示即将到来的计划，即

**locationid 2511 和 2515**

这是我正在尝试的查询

```
 SELECT B.`VenueID` ,
 A.rather_to_be_flying_now,
 A.my_favorite,
 A.Locationid,
 MIN( A.start ) ,
 MIN( A.end ) 
    FROM tbl_userselectedlocations A
    INNER JOIN tbl_Flyingapp_Venue B ON A.VenueID = B.VenueID
    WHERE A.Pilotid =  '709'
    GROUP BY  `VenueID` 
    ORDER BY A.my_favorite DESC , A.start 
```

但此时我得到的数据不正确应该是

Locationid= **2511 和 2515 分别按顺序而不是 2514 和 2516** ![在此处输入图像描述](../Images/db789021f5f4b118ea69857b02705a53.png)

查询中有什么问题吗？

尝试过内部查询。此处未使用**INNER JOIN**，但结果值不同。

```
SELECT  A.Locationid, MIN(A.start), MIN(A.end)
FROM tbl_userselectedlocations A

WHERE A.Pilotid =  '709'
group by VenueID
ORDER BY A.my_favorite DESC , A.start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:45:02.420

尝试使用子查询仅查找每个场所所需的开始时间，然后使用场所ID 和开始的值通过自联接从该行查找其余信息：

```
SELECT B.VenueID, A.rather_bo_be_flying_now, A.my_favorite,
       A.Locationid, A.start, A.end
FROM (SELECT venueID, MIN(start) AS start 
      FROM tbl_userselectedlocations
      GROUP BY venueID) AS Z
INNER JOIN tbl_userselectedlocations A
ON A.VenueID = Z.VenueID AND A.start = Z.start
INNER JOIN tbl_Flyingapp_Venue B 
ON A.VenueID = B.VenueID
WHERE A.Pilotid = '709'
ORDER BY A.My_favorite DESC, A.start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:17:27.960

您可能首先需要一个子选择：

```
SELECT  C.VenueID            ,
    A.rather_to_be_flying_now,
    A.my_favorite            ,
    A.Locationid             ,
    C.STARTP                 ,
    C.ENDP
FROM    
(
    SELECT   D.VenueID                ,
             MIN( D.start ) AS STARTP ,
             MIN( D.end )   AS ENDP
    FROM     tbl_userselectedlocations D
    WHERE     D.Pilotid = '709'
    GROUP BY `VenueID`
) C
INNER JOIN tbl_userselectedlocations A
ON      A.VenueID = C.VenueID
INNER JOIN tbl_Flyingapp_Venue B
ON      A.VenueID = B.VenueID
ORDER BY A.my_favorite DESC ,
         C.STARTP 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:30:10.540

这是我使用的查询，

```
 $query="select distinct(`VenueID`),MIN(start) from  tbl_userselectedlocations 
 where `Pilotid` = '709' group by `VenueID`  order by `my_favorite` DESC ,start"; 
```

while循环在这里和

```
 select * from tbl_userselectedlocations
   where VenueID = '$row[0]' and start='$row[1]' and Pilotid='709'"; 
```

这给出了结果，但是如果我有以下记录 ![在此处输入图像描述](../Images/d96d7a4ce4f2f3a8bbc996315b801f92.png)

```
MIN(start) 
```

将仅返回**带有 2511 的 locationid 但我需要将 2514 显示为即将到来的计划** 任何想法

# android - Nexus 4 Android Camera takePicture 不会回调到 onPictureTaken

> ID：14583757
> 
> 赞同：2
> 
> 时间：2013-01-29T13:11:53.840
> 
> 标签：android, android-camera, nexus-4

我有一个类（CameraView），用于在我的应用程序中拍照。

在 LG Nexus 4 (Android 4.2.1) 上运行时，onPictureTaken 没有回调。下面是我如何尝试实现这一目标的基本示例（我已经省略了所有初始化的东西，但它确实发生了）。此代码在 Galaxy Nexus (Android 4.2.1) 和 Galaxy S3 (Android 4.0.3) 上有效并拍照，但在 Nexus 4 上无效。我也测试了回调 onShutter() 和所有 onPictureTaken() 的， raw、postview 和 jpeg，但在 Nexus 4 上运行时没有调用它们。

**编辑：**

在我的第一个活动中，我有一个启动相机的按钮。

```
mImage = (Button) findViewById(R.id.takeimg);
mImage.setOnClickListener(new View.OnClickListener() {
    public void onClick(View view) {
        startActivityForResult(new Intent(MyClass.this, CameraView.class), ACTION_ACTIVITY_PHOTO);
    }
}); 
```

在我的相机活动中，我有以下内容：

```
public class CameraView extends Activity implements PictureCallback{
    private Camera mCamera;
    private ImageButton mShutterBtn;

    public void onCreate(Bundle savedInstanceState) {
        mCamera = Camera.open();
        mShutterBtn = (ImageButton) findViewById(R.id.shutter);
        mShutterBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                mShutterBtn.setImageResource(R.drawable.shutter_pressed);
                close_shutter();
            }
        });
    }

    protected void onResume() {
        mCamera.startPreview();
    }

    private void close_shutter(){
        mCamera.takePicture(null, null, this);
    }

    public void onPictureTaken(byte[] data, Camera camera) {
        //save image...
        setResult(RESULT_OK);
        finish()
    }
} 
```

下面是详细的 LogCat 日志，记录了从 Activity 开始到尝试拍摄图像然后完成 Activity 所发生的事情。我在其中看不到任何指向我的代码问题的内容。任何帮助将不胜感激。

```
01-29 12:44:39.997: W/CameraView(10936): onCreate
01-29 12:44:40.157: I/AwesomePlayer(165): setDataSource_l(URL suppressed)
01-29 12:44:40.197: I/AwesomePlayer(165): setDataSource_l(URL suppressed)
01-29 12:44:40.237: I/CameraClient(165): Opening camera 0
01-29 12:44:40.277: E/qcom_sensors_hal(590): hal_process_report_ind: Bad item quality: 11 
01-29 12:44:40.307: E/mm-camera(195): sensor_load_chromatix: libchromatix_imx111_preview.so: 30
01-29 12:44:40.337: E/qcom_sensors_hal(590): hal_process_report_ind: Bad item quality: 11 
01-29 12:44:40.418: E/mm-camera(195): vfe_ops_init: E
01-29 12:44:40.418: E/mm-camera(195): vfe_legacy_stats_buffer_init: AEC_STATS_BUFNUM
01-29 12:44:40.418: E/mm-camera(195): vfe_legacy_stats_buffer_init: AEC_STATS_BUFNUM
01-29 12:44:40.428: E/mm-camera(195): mctl_init_stats_proc_info: snap_max_line_cnt =30096
01-29 12:44:40.558: W/CameraView(10936): onResume
01-29 12:44:40.588: I/Choreographer(10936): Skipped 35 frames!  The application may be doing too much work on its main thread.
01-29 12:44:40.738: E/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::setPreviewWindow(preview_stream_ops_t*): mPreviewWindow = 0x0x4004bc38, mStreamDisplay = 0x0x40132008
01-29 12:44:40.738: D/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::startPreview():  start preview now
01-29 12:44:40.738: I/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::startPreview2():Setting ZSL mode
01-29 12:44:40.748: E/mm-camera(195): config_proc_CAMERA_SET_INFORM_STARTPREVIEW
01-29 12:44:40.748: E/mm-camera(195): config_proc_CAMERA_SET_INFORM_STARTPREVIEW : AF_SET_INFORM_STARTPREVIEW!
01-29 12:44:40.748: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 1 as : width = 640, height 480, format = 1 inst_handle = 810081 cid = 0
01-29 12:44:40.768: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 3 as : width = 640, height 480, format = 1 inst_handle = 830083 cid = 0
01-29 12:44:40.768: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 4 as : width = 512, height 384, format = 1 inst_handle = 840084 cid = 0
01-29 12:44:40.778: E/mm-camera(195): config_decide_vfe_outputs: Ports Used 3, Op mode 1
01-29 12:44:40.778: E/mm-camera(195): config_decide_vfe_outputs Current mode 0 Full size streaming : Disabled
01-29 12:44:40.778: E/mm-camera(195): config_decide_vfe_outputs: Primary: 640x480, extra_pad: 0x0, Fmt: 1, Type: 1, Path: 1
01-29 12:44:40.778: E/mm-camera(195): config_decide_vfe_outputs: Secondary: 640x480, extra_pad: 0x0, Fmt: 1, Type: 3, Path: 4
01-29 12:44:40.778: E/mm-camera(195): config_update_inst_handles Updated the inst handles as 810081, 830083, 0, 0 
01-29 12:44:40.918: E/mm-camera(195): sensor_load_chromatix: libchromatix_imx111_zsl.so: 26
01-29 12:44:41.008: E/mm-camera(195): camif_client_set_params: camif has associated with obj mask 0x1
01-29 12:44:41.008: E/mm-camera(195): config_v2_CAMERA_START_common CAMIF_PARAMS_ADD_OBJ_ID failed -1 
01-29 12:44:41.008: E/mm-camera(195): vfe_operation_config: format 3
01-29 12:44:41.008: E/mm-camera(195): vfe_operation_config:vfe_op_mode=5
01-29 12:44:41.008: E/mm-camera(195): Invalid ASD Set Params Type
01-29 12:44:41.008: E/mm-camera(195): vfe_set_bestshot: Bestshot mode not changed
01-29 12:44:41.038: E/mm-libcamera2(165): PROFILE HAL: stopPreview(): E: 1359463481.041744933
01-29 12:44:41.038: E/mm-camera(195): config_MSG_ID_STOP_ACK: streamon_mask is not clear. Should not call PP_Release_HW
01-29 12:44:41.148: E/mm-camera(195): config_proc_CAMERA_SET_PARM_AF_MODE Unlock CAF
01-29 12:44:41.148: E/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::setPreviewWindow(preview_stream_ops_t*): mPreviewWindow = 0x0x4004bc38, mStreamDisplay = 0x0x40132008
01-29 12:44:41.158: D/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::startPreview():  start preview now
01-29 12:44:41.158: I/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::startPreview2():Setting ZSL mode
01-29 12:44:41.158: E/mm-camera(195): config_proc_CAMERA_SET_INFORM_STARTPREVIEW
01-29 12:44:41.158: E/mm-camera(195): config_proc_CAMERA_SET_INFORM_STARTPREVIEW : AF_SET_INFORM_STARTPREVIEW!
01-29 12:44:41.158: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 1 as : width = 768, height 432, format = 1 inst_handle = 810081 cid = 0
01-29 12:44:41.168: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 3 as : width = 640, height 480, format = 1 inst_handle = 830083 cid = 0
01-29 12:44:41.168: E/mm-camera(195): config_update_stream_info Storing stream parameters for video inst 4 as : width = 512, height 384, format = 1 inst_handle = 840084 cid = 0
01-29 12:44:41.178: E/mm-camera(195): config_decide_vfe_outputs: Ports Used 3, Op mode 1
01-29 12:44:41.178: E/mm-camera(195): config_decide_vfe_outputs Current mode 5 Full size streaming : Disabled
01-29 12:44:41.178: E/mm-camera(195): config_decide_vfe_outputs: Primary: 768x432, extra_pad: 0x0, Fmt: 1, Type: 1, Path: 1
01-29 12:44:41.178: E/mm-camera(195): config_decide_vfe_outputs: Secondary: 640x480, extra_pad: 0x0, Fmt: 1, Type: 3, Path: 4
01-29 12:44:41.178: E/mm-camera(195): config_update_inst_handles Updated the inst handles as 810081, 830083, 0, 0 
01-29 12:44:41.178: E/mm-camera(195): camif_client_set_params: camif has associated with obj mask 0x1
01-29 12:44:41.178: E/mm-camera(195): config_v2_CAMERA_START_common CAMIF_PARAMS_ADD_OBJ_ID failed -1 
01-29 12:44:41.178: E/mm-camera(195): vfe_operation_config: format 3
01-29 12:44:41.178: E/mm-camera(195): vfe_operation_config:vfe_op_mode=5
01-29 12:44:41.228: I/Choreographer(10936): Skipped 33 frames!  The application may be doing too much work on its main thread.
01-29 12:44:41.248: E/mm-libcamera2(165): PROFILE HAL: First preview frame received: 1359463481.257401883
01-29 12:44:41.248: E/BufferQueue(162): [SurfaceView] dequeueBuffer: min undequeued buffer count (2) exceeded (dequeued=6 undequeudCount=0)
01-29 12:44:41.328: I/ActivityManager(590): Displayed uk.co.appogee.cfh_rds/.deliver.CameraView: +1s369ms
01-29 12:44:41.338: E/BufferQueue(162): [SurfaceView] dequeueBuffer: min undequeued buffer count (2) exceeded (dequeued=5 undequeudCount=1)
01-29 12:44:41.359: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED
01-29 12:44:41.629: D/overlay(162): FROM_STATE = OV_CLOSED TO_STATE = OV_2D_VIDEO_ON_PANEL
01-29 12:44:42.169: D/dalvikvm(10936): GC_EXPLICIT freed 563K, 22% free 11467K/14680K, paused 3ms+5ms, total 44ms
01-29 12:44:42.480: E/mm-camera(195): PROFILE set_parm_AF: : 1359463482.482367550
01-29 12:44:42.480: E/mm-camera(195): af_lg_caf_status 7, af_lg_caf_fv_status 0, first_af 0
01-29 12:44:42.480: E/mm-camera(195): NO ADDITIONAL af HERE!
01-29 12:44:43.060: D/dalvikvm(590): GC_EXPLICIT freed 842K, 31% free 25749K/37136K, paused 5ms+10ms, total 101ms
01-29 12:44:43.190: E/mm-camera(195): config_proc_CAMERA_SET_LG_CAF_LOCK : TAKE PICTURE!
01-29 12:44:43.271: E/mm-libcamera2(165): mm_camera_dispatch_buffered_frames: mframe 0x0, sframe = 0x0
01-29 12:44:43.871: D/dalvikvm(10936): GC_EXPLICIT freed 367K, 22% free 11534K/14680K, paused 3ms+5ms, total 37ms
01-29 12:44:44.722: D/dalvikvm(590): GC_EXPLICIT freed 437K, 31% free 25740K/37136K, paused 3ms+9ms, total 98ms
01-29 12:44:45.623: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _verb value Inactive
01-29 12:44:45.623: D/alsa_ucm(165): Set mixer controls for HiFi Lowlatency enable 0
01-29 12:44:45.623: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _disdev value Speaker
01-29 12:44:45.623: D/alsa_ucm(165): Set mixer controls for Speaker enable 0
01-29 12:44:45.653: I/wpa_supplicant(765): wlan0: Authentication with 00:04:96:2a:7a:59 timed out.
01-29 12:44:45.693: D/dalvikvm(10936): GC_EXPLICIT freed 366K, 22% free 11536K/14680K, paused 7ms+11ms, total 77ms
01-29 12:44:45.983: W/ActivityManager(590): Activity idle timeout for ActivityRecord{42aab158 u0 uk.co.appogee.cfh_rds/.deliver.Deliver}
01-29 12:44:46.594: D/dalvikvm(590): GC_EXPLICIT freed 433K, 31% free 25737K/37136K, paused 6ms+10ms, total 108ms
01-29 12:44:47.275: I/wpa_supplicant(765): wlan0: Trying to associate with 00:04:96:2a:7a:2a (SSID='APPOGEE' freq=2432 MHz)
01-29 12:44:47.355: I/wpa_supplicant(765): wlan0: CTRL-EVENT-ASSOC-REJECT bssid=00:04:96:2a:7a:2a status_code=1
01-29 12:44:47.375: D/dalvikvm(982): GC_CONCURRENT freed 366K, 6% free 9695K/10256K, paused 5ms+3ms, total 34ms
01-29 12:44:47.665: D/dalvikvm(10936): GC_EXPLICIT freed 369K, 22% free 11539K/14680K, paused 2ms+7ms, total 51ms
01-29 12:44:48.466: D/dalvikvm(590): GC_EXPLICIT freed 491K, 31% free 25734K/37136K, paused 3ms+11ms, total 93ms
01-29 12:44:48.726: D/AudioStreamOutALSA(165): mHandle->useCase: HiFi Lowlatency
01-29 12:44:48.726: D/ALSAModule(165): s_route: devices 0x2 in mode 0
01-29 12:44:48.726: D/ALSAModule(165): switchDevice: device 2 mode:0
01-29 12:44:48.726: D/ALSAModule(165): No valid input device: 0
01-29 12:44:48.726: D/ALSAModule(165): switchDevice,rxDev:Speaker, txDev:(null), curRxDev:Speaker, curTxDev:None
01-29 12:44:48.726: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _enadev value Speaker
01-29 12:44:48.726: D/ALSAModule(165): switchDevice: curTxUCMDevivce None curRxDevDevice Speaker
01-29 12:44:48.726: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _verb value HiFi Lowlatency
01-29 12:44:48.726: D/alsa_ucm(165): Set mixer controls for Speaker enable 1
01-29 12:44:48.726: D/ACDB-LOADER(165): ACDB -> send_afe_cal
01-29 12:44:48.726: D/alsa_ucm(165): Set mixer controls for HiFi Lowlatency enable 1
01-29 12:44:48.726: D/ALSAModule(165): Device value returned is hw:0,14
01-29 12:44:48.736: D/ALSAModule(165): setHardwareParams: reqBuffSize 1024 channels 2 sampleRate 48000
01-29 12:44:48.736: D/ALSAModule(165): setHardwareParams: buffer_size 2048, period_size 1024, period_cnt 2
01-29 12:44:48.766: W/CameraView(10936): onPause
01-29 12:44:48.766: E/mm-libcamera2(165): PROFILE HAL: stopPreview(): E: 1359463488.771425995
01-29 12:44:48.766: E/mm-camera(195): config_MSG_ID_STOP_ACK: streamon_mask is not clear. Should not call PP_Release_HW
01-29 12:44:48.766: E/mm-libcamera2(165): PROFILE HAL: stopPreview(): E: 1359463488.778537241
01-29 12:44:48.766: E/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::setPreviewWindow(preview_stream_ops_t*):Received Setting NULL preview window
01-29 12:44:48.766: E/QCameraHWI(165): android::status_t android::QCameraHardwareInterface::setPreviewWindow(preview_stream_ops_t*): mPreviewWindow = 0x0x0, mStreamDisplay = 0x0x40132008
01-29 12:44:48.766: W/QCameraHWI_Preview(165):  Setting NULL preview window 
01-29 12:44:48.776: I/CameraClient(165): Destroying camera 0
01-29 12:44:48.776: E/mm-camera(195): config_shutdown_pp Camera not in streaming mode. Returning. 
01-29 12:44:48.776: E/mm-camera(195): vfe_ops_deinit: E
01-29 12:44:48.796: E/qcom_sensors_hal(590): hal_process_report_ind: Bad item quality: 11 
01-29 12:44:48.846: W/AudioFlinger(165): session id 160 not found for pid 165
01-29 12:44:48.846: W/AudioFlinger(165): session id 161 not found for pid 165
01-29 12:44:48.857: E/qcom_sensors_hal(590): hal_process_report_ind: Bad item quality: 11 
01-29 12:44:49.087: D/overlay(162): FROM_STATE = OV_2D_VIDEO_ON_PANEL TO_STATE = OV_CLOSED
01-29 12:44:49.347: D/overlay(162): FROM_STATE = OV_CLOSED TO_STATE = OV_BYPASS_3_LAYER
01-29 12:44:49.948: W/ActivityManager(590): Launch timeout has expired, giving up wake lock!
01-29 12:44:49.958: W/ActivityManager(590): Activity idle timeout for ActivityRecord{42a30e78 u0 uk.co.appogee.cfh_rds/.deliver.CameraView}
01-29 12:44:50.118: D/dalvikvm(10936): GC_EXPLICIT freed 372K, 22% free 11548K/14680K, paused 2ms+6ms, total 41ms
01-29 12:44:50.859: D/dalvikvm(590): GC_EXPLICIT freed 835K, 31% free 25730K/37136K, paused 5ms+10ms, total 118ms
01-29 12:44:51.209: E/DhcpStateMachine(590): DHCP failed on wlan0: Timed out waiting for DHCP to finish
01-29 12:44:51.800: D/dalvikvm(10936): GC_EXPLICIT freed 542K, 23% free 11371K/14680K, paused 2ms+5ms, total 38ms
01-29 12:44:51.960: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _verb value Inactive
01-29 12:44:51.960: D/alsa_ucm(165): Set mixer controls for HiFi Lowlatency enable 0
01-29 12:44:51.960: D/alsa_ucm(165): snd_use_case_set(): uc_mgr 0x41fa22a0 identifier _disdev value Speaker
01-29 12:44:51.960: D/alsa_ucm(165): Set mixer controls for Speaker enable 0
01-29 12:44:52.360: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED
01-29 12:44:52.410: D/dalvikvm(590): GC_EXPLICIT freed 418K, 31% free 25728K/37136K, paused 9ms+10ms, total 128ms
01-29 12:44:53.722: D/dalvikvm(10936): GC_EXPLICIT freed 362K, 23% free 11371K/14680K, paused 2ms+5ms, total 37ms
01-29 12:44:54.262: D/dalvikvm(590): GC_EXPLICIT freed 420K, 31% free 25728K/37136K, paused 3ms+9ms, total 94ms
01-29 12:44:55.544: D/dalvikvm(10936): GC_EXPLICIT freed 367K, 23% free 11373K/14680K, paused 4ms+5ms, total 47ms
01-29 12:44:56.014: D/dalvikvm(590): GC_EXPLICIT freed 418K, 31% free 25728K/37136K, paused 3ms+10ms, total 93ms
01-29 12:44:57.195: D/dalvikvm(10936): GC_EXPLICIT freed 365K, 23% free 11373K/14680K, paused 2ms+5ms, total 36ms
01-29 12:44:57.275: I/wpa_supplicant(765): wlan0: Authentication with 00:04:96:2a:7a:2a timed out.
01-29 12:44:57.756: D/dalvikvm(590): GC_EXPLICIT freed 429K, 31% free 25730K/37136K, paused 4ms+9ms, total 107ms
01-29 12:44:58.857: W/ActivityManager(590): Activity idle timeout for ActivityRecord{42aab158 u0 uk.co.appogee.cfh_rds/.deliver.Deliver}
01-29 12:44:58.907: D/overlay(162): FROM_STATE = OV_CLOSED TO_STATE = OV_BYPASS_3_LAYER
01-29 12:44:58.957: I/wpa_supplicant(765): wlan0: Trying to associate with 00:04:96:2a:7a:59 (SSID='APPOGEE' freq=2452 MHz)
01-29 12:44:59.027: D/dalvikvm(10936): GC_EXPLICIT freed 365K, 23% free 11374K/14680K, paused 5ms+7ms, total 66ms
01-29 12:44:59.027: I/wpa_supplicant(765): wlan0: CTRL-EVENT-ASSOC-REJECT bssid=00:04:96:2a:7a:59 status_code=1
01-29 12:44:59.468: D/dalvikvm(590): GC_EXPLICIT freed 462K, 31% free 25737K/37136K, paused 3ms+11ms, total 96ms
01-29 12:45:00.929: D/dalvikvm(10936): GC_EXPLICIT freed 357K, 23% free 11374K/14680K, paused 3ms+5ms, total 36ms
01-29 12:45:01.270: D/dalvikvm(590): GC_EXPLICIT freed 443K, 31% free 25734K/37136K, paused 4ms+10ms, total 94ms
01-29 12:45:01.920: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED
01-29 12:45:02.641: D/dalvikvm(10936): GC_EXPLICIT freed 359K, 23% free 11375K/14680K, paused 2ms+6ms, total 39ms
01-29 12:45:02.932: D/dalvikvm(590): GC_EXPLICIT freed 417K, 31% free 25733K/37136K, paused 3ms+9ms, total 113ms
01-29 12:45:04.443: D/dalvikvm(10936): GC_EXPLICIT freed 363K, 23% free 11376K/14680K, paused 2ms+5ms, total 36ms
01-29 12:45:04.643: D/dalvikvm(590): GC_EXPLICIT freed 416K, 31% free 25733K/37136K, paused 3ms+10ms, total 98ms
01-29 12:45:05.274: D/overlay(162): FROM_STATE = OV_CLOSED TO_STATE = OV_BYPASS_3_LAYER
01-29 12:45:05.965: D/dalvikvm(10936): GC_EXPLICIT freed 362K, 23% free 11377K/14680K, paused 2ms+4ms, total 39ms
01-29 12:45:06.095: D/dalvikvm(590): GC_EXPLICIT freed 422K, 31% free 25733K/37136K, paused 7ms+10ms, total 127ms
01-29 12:45:06.936: D/overlay(162): FROM_STATE = OV_BYPASS_3_LAYER TO_STATE = OV_CLOSED
01-29 12:45:06.936: I/InputReader(590): Reconfiguring input devices.  changes=0x00000004
01-29 12:45:06.936: I/InputReader(590): Device reconfigured: id=6, name='touch_dev', size 768x1280, orientation 3, mode 1, display id 0
01-29 12:45:06.936: I/ActivityManager(590): Config changed: {1.3 234mcc20mnc en_GB ldltr sw384dp w598dp h359dp 320dpi nrml land finger -keyb/v/h -nav/h s.23} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:33:36.023

因此，根据我今天一直在玩的这个[zxing 问题](http://code.google.com/p/zxing/issues/detail?id=1492)中的信息，我当前的代码（不起作用）是：

```
List<Size> supportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
parameters.setPreviewSize(supportedPreviewSizes.get(2).width, supportedPreviewSizes.get(2).height); 
```

如果我将其更改为：

```
List<Size> supportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
parameters.setPreviewSize(supportedPreviewSizes.get(0).width, supportedPreviewSizes.get(0).height); 
```

然后它得到回调。现在我知道（从调试中）getSupportedPreviewSizes 返回给我一个包含 12 个项目的列表，因此不会发生索引越界异常。我不知道为什么会这样，但它确实（在我的情况下）。哪位大神可以解释一下？或者评论其他人如何选择使用哪种尺寸，是否有一些合乎逻辑的方法来确定哪种尺寸是“最好的”？不幸的是，“最好的”是主观的，取决于你想用图像做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T08:46:57.123

我在 HTC Desire 620 上遇到了同样的问题，这是我遇到的唯一一部没有触发 PictureCallback 的手机

我找到的解决方案是在调用 takePicture 之前添加 setPreviewSize 见下文，希望对您有所帮助。

```
 mCameraParams.setPictureSize(mSize.width, mSize.height);
                    mCameraParams.setPreviewSize(mSize.width, mSize.height);
                    if (isFlashAvailable()) {
                        mCameraParams
                                .setFlashMode(_flashModes[_flashMode]);
                    }
                    try {
                        mCamera.setParameters(mCameraParams);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    is_camera_ready = false;

                    Log.d(TAG, "mCamera.takePicture");
                    mCamera.takePicture(null, null, new Camera.PictureCallback() {

                        @Override
                        public void onPictureTaken(byte[] data,
                                                   Camera camera) {
                            Log.d(TAG, "onPictureTaken jpeg");
                                mCamera.stopPreview();
                                if (data != null) {
                                    try {
                                        mBitmap = BitmapFactory
                                                .decodeByteArray(data, 0,
                                                        data.length);
                                    } catch (OutOfMemoryError e) {
                                        e.printStackTrace();
                                        try {
                                            mBitmap = BitmapFactory
                                                    .decodeByteArray(data, 0,
                                                            data.length);
                                        } catch (OutOfMemoryError e2) {
                                            e2.printStackTrace();
                                        }
                                    }
                                    is_camera_ready = true;
                                    mCamera.startPreview();
                                    mPreview.refreshDrawableState();
                                }
                        }
                    }); 
```

# design-patterns - 支持数据模式的多个版本

> ID：14583758
> 
> 赞同：2
> 
> 时间：2013-01-29T13:11:55.117
> 
> 标签：design-patterns, schema, csla

我们的应用程序为另一个系统提供了一个用户界面，该系统的数据模式不在我们的控制范围内。我们的应用程序使用 CSLA 创建业务对象以允许在第三方系统中编辑数据。然而，随着第三方数据模式的发展，我们必须随之发展。但是，在任何给定时间，我们的客户都可以拥有具有不同数据模式的任何版本的第三方系统。因此，我们的应用程序需要能够适应客户碰巧拥有的任何受支持的模式版本。

我们已经研究过可能使用策略模式来解决这个问题。本质上具有支持最低版本数据模式的基类，然后具有支持每个后续版本的派生类。反过来，我们将有一个工厂，它返回与当前版本的数据模式相对应的类。然而，我们担心这可能会导致一个长而混乱的继承链。有没有更好的方法来解决这个问题？可能使用组合而不是继承？

我发现这篇文章概述了处理此 [http://securesoftwaredev.com/2009/05/31/supporting-multiple-versions-of-a-data-model/的可能方法](http://securesoftwaredev.com/2009/05/31/supporting-multiple-versions-of-a-data-model/)

我不确定这种方法是否适合我们，但我想在实施任何东西之前获得一些其他的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T06:37:32.850

CSLA .NET 使您可以轻松地将数据访问逻辑 (DAL) 与应用程序的其余部分分开。

因为您应该使用 CSLA 创建映射到问题域而不是数据库形状的业务对象，所以您的 DAL 应该关注访问数据库并将数据映射到必要的业务对象。

如果您有两个不同的数据库模式，那么您可能会有两个 DAL 实现，它们都访问数据库并将数据映射到完全相同的业务类型。

[Using CSLA 4: Data Access](http://store.lhotka.net/Default.aspx?tabid=1560&ProductID=25)电子书对此进行了相当广泛的介绍，ProjectTracker 示例（4.0 版及更高版本）也使用了一个抽象 DAL 来演示该概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:57:56.080

我会看看使用带有可插入 DAL 层的工厂实现。通常，您可以利用这一点来支持不同的数据库服务器或模拟数据以进行单元测试，但支持不同的数据模型也可以。

# python - TypeError: module.__init__() 最多接受 2 个参数（给定 3 个）

> ID：14583761
> 
> 赞同：175
> 
> 时间：2013-01-29T13:12:06.313
> 
> 标签：python, python-3.x, inheritance, typeerror

我在一个名为`Object.py`. 当我尝试从另一个文件中的此类继承时，调用构造函数会引发异常：

```
TypeError: module.__init__() takes at most 2 arguments (3 given) 
```

这是我的代码：

```
import Object

class Visitor(Object):
    pass

instance = Visitor()  # this line throws the exception 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2013-01-29T14:07:33.603

您的错误正在发生，因为`Object`它是一个模块，而不是一个类。所以你的继承权很糟糕。

将您的导入语句更改为：

```
from Object import ClassName 
```

和你的类定义：

```
class Visitor(ClassName): 
```

**或者**

将您的类定义更改为：

```
class Visitor(Object.ClassName):
   etc 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-04-12T11:16:02.747

即使在@Mickey Perlstein 的回答和他 3 小时的侦探工作之后，我仍然花了几分钟时间将其应用到我自己的烂摊子上。如果其他人像我一样需要更多帮助，这就是我的情况。

*   响应是一个模块
*   响应是响应模块中的基类
*   GeoJsonResponse 是从 Response 派生的新类

初始 GeoJsonResponse 类：

```
from pyexample.responses import Response

class GeoJsonResponse(Response):

    def __init__(self, geo_json_data): 
```

看起来不错。在您尝试调试之前没有问题，即当您收到一堆看似模糊的错误消息时：

> 从 pyexample.responses 导入 GeoJsonResponse ..\pyexample\responses\GeoJsonResponse.py:12: 在（模块）类 GeoJsonResponse(Response) 中：
> 
> E TypeError: module() 最多接受 2 个参数（给定 3 个）
> 
> ==================================== 错误============== =======================
> 
> ___________________ 错误收集测试/test_geojson.py ____________________
> 
> test_geojson.py:2: in (module) from pyexample.responses import GeoJsonResponse ..\pyexample\responses \GeoJsonResponse.py:12: in (module)
> 
> 类 GeoJsonResponse(Response): E TypeError: module() 最多接受 2 个参数（给定 3 个）
> 
> 错误：未找到：\PyExample\tests\test_geojson.py::TestGeoJson::test_api_response
> 
> C:\Python37\lib\site-packages\aenum__init__.py:163
> 
> （在任何 [] 中都没有名称 'PyExample\tests\test_geojson.py::TestGeoJson::test_api_response'）

这些错误正在尽最大努力为我指明正确的方向，而@Mickey Perlstein 的回答很成功，我只花了一分钟就将它们放在我自己的上下文中：

我正在导入***模块***：

```
from pyexample.responses import Response 
```

当我应该导入***课程***时：

```
from pyexample.responses.Response import Response 
```

希望这可以帮助某人。（在我的辩护中，现在还为时过早。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-10-21T16:40:22.010

```
from Object import Object 
```

或者

```
From Class_Name import Class_name 
```

如果 Object 是一个`.py`文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-09T15:47:04.570

您还可以在 Python 3.6.1 中执行以下操作

```
from Object import Object as Parent 
```

和你的类定义：

```
class Visitor(Parent): 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-15T10:01:56.413

在我遇到问题的情况下，当我尝试扩展类时，我指的是一个模块。

```
import logging
class UserdefinedLogging(logging): 
```

如果您查看文档信息，您会看到“日志记录”显示为模块。

在这种特定情况下，我必须简单地继承日志记录模块来为日志记录创建一个额外的类。

# c++ - 如何将两个“小时”加/减为整数？

> ID：14583763
> 
> 赞同：0
> 
> 时间：2013-01-29T13:12:14.590
> 
> 标签：c++, time

我知道这可能是一个愚蠢的问题，但我对此有一些麻烦，我很惭愧，但我真的不知道如何做到。我想加减两个以整数形式给出的“小时”。

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

int main()
{
    // should be: 21:59:2
    int rH, rM, rS;

    int h1 = 12, m1 = 34, s1 = 56;
    int h2 = 9, m2 = 24, s2 = 6;

    if(h1 + h2 >= 24)
    {
        rH = abs(h2 + h1);
        m1 += 60;

        if(m1 + m2 >= 60)
        {
            rH = (m2 - m1);
        }

    }
    else
    {
        rH = h1 + h2;
    }

    cout << rH << " " << rM << " " << rS << " " << "\n";

    return 0;
} 
```

尝试了上述方法，但我不知道如何进一步做。我不能使用任何`date-time`对象。

编辑

减法，我不知道错误在哪里，但它计算错误：

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

int main()
{
    int rH, rM, rS;
    int h1 = 12, m1 = 25, s1 = 29, h2 = 11, m2 = 12, s2 = 1;
    int sum1, sum2, sum;

    sum1 = (h1)*3600 + (m1)*60 + s1;
    sum2 = (h2)*3600 + (m2)*60 + s2;

    if(sum1 > sum2)
        sum = sum1-sum2;
    else
        sum = sum2-sum1;

    rS = sum %60;
    sum = sum/60;
    rM = sum % 60;
    rH = sum/60;

    std::cout << rH << " " << rM << " " << rS << " " << "\n";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:16:34.517

为什么不

```
int t1 = ((h1 * 60) + m1) * 60 + s1;
int t2 = ((h2 * 60) + m2) * 60 + s2;
int tdiff = t1 - t2;
if (tdiff < 0) { tdiff += 24 * 60 * 60; 
```

然后使用模块化算法和除法来获取小时数等，例如

```
int tdiffs = tdiff % 60;
tdiff  = tdiff / 60;
int tdiffm = tdiff % 60;
tdiff h = tdiff / 60; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:18:14.390

```
// addition
int rH=0, rM=0, rS=0; 

rS = s1+s2;
if (rS>60)
{
    rM++;
    rS %= 60;
}

rM += m1+m2;
if (rM>60)
{
    rH++;
    rM %= 60;
}

rH += h1+h2;
if (rH>24)
{
    // 1 day more, who cares
    rH %= 24;
}

cout << rH << " " << rM << " " << rS << " " << "\n"; 
```

* * *

// 减法

int rH = 0, rM = 0, rS = 0; int h1 = 12, m1 = 25, s1 = 29, h2 = 11, m2 = 12, s2 = 1;

```
rS = s1 - s2;
if (rS<0)
{
    rM--;
    rS += 60;
}

rM += m1 - m2;
if (rM<0)
{
    rH--;
    rM += 60;
}

rH += h1 - h2;
if (rH<0)
{
    // Error occurred ...
}

cout << rH << " " << rM << " " << rS << " " << "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:19:51.363

一种方法可能是（假设您想添加两次*而*不是简单的小时分量）将是：

1.  将第一次转换为总秒数（对每个组件使用适当的乘数，小时/分钟和秒。）
2.  以同样的方式转换第二次
3.  现在根据需要添加/减去 - 这将为您提供以秒为单位的新时间。
4.  如果新时间小于 0，则添加一天的秒数，如果新时间大于一天的秒数，则减去
5.  然后可以通过与您在步骤 1 中所做的相反的操作将结果以秒为单位的值分解为小时分钟和秒（提示您需要模运算符...）

编辑：哦，当人们（显然应该知道得更好）只是提供代码时，我为什么要费心尝试提供想法而不是代码... :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:26:28.713

正如 Ed Heal 所示，您可以在最低分辨率下进行计算（在您的示例中为秒）。

或从最不重要的值开始添加，并将进位添加到下一个值，如下所示：

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

int main()
{
    // should be: 21:59:2
    int rH(0), rM(0), rS(0);

    int h1 = 12, m1 = 34, s1 = 56;
    int h2 = 9, m2 = 24, s2 = 6;

    rS = s1 + s2;
    while (rS >= 60)
    {
        rS -= 60;
        rM++;
    }

    rM += m1 + m2;
    while (rM >= 60)
    {
        rM -= 60;
        rH++;
    }

    rH += h1 + h2;
    while (rH >= 24)
    {
        rS -= 24;
    }

    cout << rH << " " << rM << " " << rS << " " << "\n";

    return 0;
} 
```

# javascript - 使用 JavaScript 的图像的 CSS 值

> ID：14583765
> 
> 赞同：-5
> 
> 时间：2013-01-29T13:12:19.750
> 
> 标签：javascript, css, jasmine

我在网站上有一张图片。我应该使用我的 Jasmine 框架的 java 脚本获取该图像的 Max_width 的 CSS 值。

你能指导我吗？

这是代码：

```
it("Should return Max-width value: '"+width+"'",function(){
      var width, item;
        item = OpenSpace.getElementById("OpenLayers.Layer.Vector_49_svgRoot");
        width = item.max_width;
        expect(result).toBe(width);

      alert(width); 
```

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:33:56.443

clientWidth 是元素的内部宽度，以像素为单位。它包括填充，但不包括垂直滚动条（如果存在，如果呈现）、边框或边距。

```
var img = document.getElementById('imageid'); 
var width = img.clientWidth; 
```

另一种解决方案：

```
var img = new Image();
img.onload = function() {
   alert(this.width + 'x' + this.height);
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif'; 
```

希望它有效

# windows - 如何使用 wget 下载不以 .html 结尾的网络链接？

> ID：14583767
> 
> 赞同：0
> 
> 时间：2013-01-29T13:12:22.000
> 
> 标签：windows, cmd, wget, gnu

我想在 Win7 中使用 wget 下载此网页：`http://www.att.com/shop/wireless/devices/smartphones.deviceListView.xhr.flowtype-NEW.deviceGroupType-Cellphone.paymentType-postpaid.packageType-undefined.html?commitmentTerm=24&taxoStyle=SMARTPHONES&showMoreListSize=1000`

我正在使用这个命令来做到这一点：

```
wget -E -H -k -K -p -e robots=off -P /Downloads/AT&T_2013-01-29/ http://www.att.com/shop/wireless/devices/smartphones.deviceListView.xhr.flowtype-NEW.deviceGroupType-Cellphone.paymentType-postpaid.packageType-undefined.html?commitmentTerm=24&taxoStyle=SMARTPHONES&showMoreListSize=1000 
```

我得到分类样式未定义，commitmentterm 未定义或可识别方法错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:15:57.430

在地址周围添加引号

```
wget -E -H -k -K -p -e robots=off -P "/Downloads/AT&T_2013-01-29/" "http://www.att.com/shop/wireless/devices/smartphones.deviceListView.xhr.flowtype-NEW.deviceGroupType-Cellphone.paymentType-postpaid.packageType-undefined.html?commitmentTerm=24&taxoStyle=SMARTPHONES&showMoreListSize=1000" 
```

`&`在命令窗口中用作命令分隔符

# asp.net-mvc - WebApi 不接受帖子（404 错误）

> ID：14583768
> 
> 赞同：1
> 
> 时间：2013-01-29T13:12:22.523
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我有一个启用了 WebAPI 的 MVC4 Web 项目。

我想将数据发布到 API 控制器，但发布不工作，我每次都收到 404（未命中 Add 方法内的断点）....

这是代码：

```
public class IncidentSessionLogController : ApiController
{
   [HttpPost]
   public void Add(MyInputDTO inputData)
   {
   }
} 
```

我使用基于动作的路由：

```
public static void Register(HttpConfiguration config)
{
   config.Routes.MapHttpRoute(
       name: "ControllerAndAction",
       routeTemplate: "api/{controller}/{action}");

   config.Routes.MapHttpRoute(
       name: "ControllerAndActionAndId",
       routeTemplate: "api/{controller}/{action}/{id}",
       defaults: new { id = RouteParameter.Optional });
} 
```

我使用 Fiddler 发布数据：

```
http://localhost:42901/api/IncidentSessionLog/Add 
```

我的网站目前托管在 IIS express 中进行开发，我在 Fiddler 的请求正文中添加了 JSON 对象文字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:25:40.507

修复了，感谢我的同事！

MVC 路由（我最初忘记发布）干扰了 API 路由，所以我必须向 MVC 路由添加一个约束：

```
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Game", action = "Start", id = UrlParameter.Optional },
                constraints: new { controller = @"^((?!(api)).)*$" }); 
```

# c# - 模型更改更新 View-Model WPF

> ID：14583770
> 
> 赞同：1
> 
> 时间：2013-01-29T13:12:29.603
> 
> 标签：c#, wpf, mvvm

我在将模型更改更新回我的视图模型时遇到问题，以便我可以显示。在这个例子中，我有一个标签和一个按钮，当我按下按钮时，它将执行一些业务逻辑，并且应该更新屏幕上的标签。但是，当我的模型更改时，视图不会。关于我在这里做错了什么的任何想法？

看法-

```
<Window.DataContext>
    <vm:ViewModel>
</Window.DataContext>
<Grid>
    <Label Content="{Binding Path=Name}"/>
    <Button Command={Binding UpdateBtnPressed}/>
</Grid> 
```

视图模型

```
public ViewModel()
{
    _Model = new Model();
}

public string Name
{
    get{return _Model.Name;}
    set
    {
        _Model.Name = value;
        OnPropertyChanged("Name");
    }
}

public ICommand UpdateBtnPressed
{
get{
_UpdateBtn = new RelayCommand(param => UpdateLabelValue());
return _UpdateBtn;
}

private void UpdateLabelValue()
{
    _Model.Name = "Value Updated";
} 
```

模型

```
private string name = "unmodified string";

public string Name
{
    get{return name;}
    set{name = value;}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:18:12.287

尝试这个：

```
private void UpdateLabelValue()
{
  Name = "Value Updated";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:22:30.540

您的模型必须实现 INotifyPropertyChanged 例如；

```
public class Personel : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        private string _name;
        public string Name
        {
            get { return _name; }
            set { _name = value; OnChanged("Name");}
        }

        void OnChanged(string pn)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(pn));
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:20:46.633

您似乎错过了实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

# java - 为什么 Camel 两次调用我的端点的 start() 方法？

> ID：14583772
> 
> 赞同：1
> 
> 时间：2013-01-29T13:12:36.570
> 
> 标签：java, service, methods, apache-camel

我正在使用 start() 方法来实例化与我正在使用的提要的连接，然后 stop() 将其拆除，但是在创建 Endpoint 之后，Camel 继续在其上连续调用 start() 两次

虽然通过检查它是否已经启动一次显然很容易解决，或者（就像我所做的那样）只是将起始代码移动到 Endpoint 的构造函数中 - 这让我觉得我不明白 start() 方法正在尝试什么实现（文档很有帮助地建议： start() 启动服务... grrreat

为什么会发生两次？

* * *

顺便说一句，createEndpointUri() 也被调用了……这让我很怀疑，因为这是一个“未提供 uri 时的惰性加载器”……除了已经提供了一个……所以我想知道是否有一些次要的由于某种原因正在发生实例化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:33:00.317

您应该扩展具有 doStart | 的 ServiceSupport doStop 方法，并且可以跟踪您的类的状态。然后 Camel 知道状态并且不会调用 doStart 两次。

# css - susy 框架生成不正确的 % 宽度

> ID：14583774
> 
> 赞同：0
> 
> 时间：2013-01-29T13:12:53.250
> 
> 标签：css, sass, compass-sass, susy-compass

第一次使用 susy compass 插件时，我创建了一个 12 列的流体网格，并在其中添加了两列，如下面的截图所示。然而，我的问题是 % 似乎不正确，我的父容器是 100%，我的主要 col 9,12 cols 和辅助 col 3,12。我想这些应该导致 main col = 75% 和 sec col = 25% 但我的结果是 main col = 74.57627% 和 sec col = 23.72881% ？

**CSS/SCSS：**

```
 $total-columns: 12;
    $column-width: 4em;
    $gutter-width: 1em;
    $grid-padding: 0;

    $show-grid-backgrounds : true;
    $container-style: fluid;

    .l-main-news{
      width: columns(9,12);
      float: left;

      > div{
        width: columns(4.5,9);
        float: left;
      }

}

.l-side-news{
  width: columns(3,12);
  float:right;
} 
```

# objective-c - 使用 Apple 核心库（如 Foundation.h）在 OSX 上使用 gcc-4.7 编译 Objective C 文件

> ID：14583777
> 
> 赞同：5
> 
> 时间：2013-01-29T13:13:12.667
> 
> 标签：objective-c, macos, gcc

我无法使用 GCC 4.7 编译包含任何 OSX 核心库的 Objective C 文件，例如：

```
#import <Foundation/Foundation.h> 
```

由此产生的错误总是会导致奇怪的 GCC 输出：

```
gcc -c -pipe -O2 -arch x86_64 -mmacosx-version-min=10.8 -Wall -W  -I/usr/local/Cellar/qt/4.8.4/mkspecs/macx-g++ -I../TerrainFluid -I../TerrainFluid/external -I../TerrainFluid -I. ../TerrainFluid/external/osx_bundle.mm -o osx_bundle.o

In file included from 

/System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:123:0,
                 from ../TerrainFluid/external/osx_bundle.mm:24:
/System/Library/Frameworks/Foundation.framework/Headers/NSTask.h:69:24: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSTask.h:69:24: error: expected ')' before '^' token
In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:159:0,
                 from ../TerrainFluid/external/osx_bundle.mm:24:
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:36:15: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:36:15: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:37:39: error: expected type-specifier before 'NSUserScriptTaskCompletionHandler'
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:53:15: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:53:15: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:54:70: error: expected type-specifier before 'NSUserUnixTaskCompletionHandler'
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:68:15: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:68:15: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:69:82: error: expected type-specifier before 'NSUserAppleScriptTaskCompletionHandler'
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:86:15: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:86:15: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSUserScriptTask.h:87:72: error: expected type-specifier before 'NSUserAutomatorTaskCompletionHandler'
In file included from /System/Library/Frameworks/Foundation.framework/Headers/Foundation.h:160:0,
                 from ../TerrainFluid/external/osx_bundle.mm:24:
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:46:11: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:46:11: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:46:11: error: expected ';' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:47:11: error: expected unqualified-id before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:47:11: error: expected ')' before '^' token
/System/Library/Frameworks/Foundation.framework/Headers/NSXPCConnection.h:47:11: error: expected ';' before '^' token
make: *** [osx_bundle.o] Error 1 
```

解决这个问题的方法是我只对 Objective C 文件使用 Apple 编译器，对其余代码使用 g++ (4.7)。

```
gcc -> /usr/bin/llvm-gcc
g++ -> /usr/local/bin/g++-4.7 
```

我会为所有代码使用 clang，但它还不支持 OpenMP，而且 gcc-4.2 不支持 C++11。

[这](http://svn.wildfiregames.com/public/ps/trunk/source/lib/sysdep/os/osx/osx_bundle.mm)是我使用的示例文件（它是 Wildfire Games OSX 资源包加载器）。我在一篇[博客文章](http://implbits.com/About/Blog/tabid/78/post/building-with-gcc-4-6-on-osx/Default.aspx)中读到，Apple 引入了一个 GCC 阻止程序来停止使用 GCC 进行编译。

现在有没有办法用非 Apple GCC（如 GCC 4.7）编译代码？到目前为止，除了使用 Apple 编译器之外，我还没有找到有关此问题的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T16:19:25.910

第一个错误显示了问题。

```
@property (copy) void (^terminationHandler)(NSTask *) NS_AVAILABLE(10_7, NA); 
```

这是[块扩展](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29)。主线 GCC 不实现对块的支持。

# git - 我还没有合并，但我的一个提交说我做了

> ID：14583779
> 
> 赞同：2
> 
> 时间：2013-01-29T13:13:16.410
> 
> 标签：git, github

最近，我只做了 1 次提交，但我不知道为什么它显示 3 次提交。

这是我最近所做的：

1.  在 GitHub 上创建了一个新的存储库；`README`用一个和`.gitignore`文件初始化它。*（我了解 GitHub 代表我提交，所以这是我第一次丢失的提交。）*
2.  *   `added`和`commited`一个文件。
    *   做了一个`git remote add origin git@github.com:me/repo.git`
    *   `git pull origin master`从 GitHub（README 和 .gitignore）获取更改
    *   做过`git push`

我的问题是：

1.  我还没有做过类似的事情，`git merge`为什么我的第三次提交说*“合并 github.com:me/repo 的分支'master'”*？幕后发生了什么？
2.  我只期望前两次提交*（我所做的一个和 GitHub 在初始化 repo 时所做的另一个）*。这第三个是从哪里来的？我可以摆脱这些类型的提交吗？

关于这个有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:15:52.283

从[git pull](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)的文档中：

> 将来自远程存储库的更改合并到当前分支中。在其默认模式下，git pull 是 git fetch 后跟 git merge FETCH_HEAD 的简写。

因此，您实际上*已经*完成了合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T02:12:26.890

要在进行拉取时没有合并提交，您想做`git pull --rebase origin master`. 这将移动更改并且不会导致合并。

[http://gitready.com/advanced/2009/02/11/pull-with-rebase.html](http://gitready.com/advanced/2009/02/11/pull-with-rebase.html)

# php - 为什么我们需要function_exists？

> ID：14583786
> 
> 赞同：4
> 
> 时间：2013-01-29T13:13:35.330
> 
> 标签：php, wordpress

为什么我们需要为用户定义的函数检查 function_exists？它对于内部或核心 PHP 函数看起来没问题，但如果用户自己知道并定义了一个函数，那么为什么需要检查它的存在呢？

下面是自定义用户定义的功能

```
if( !function_exists( 'bia_register_menu' ) ) {
    function bia_register_menu() {
        register_nav_menu('primary-menu', __('Primary Menu'));
    }
    add_action('init', 'bia_register_menu');
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:37:11.140

确保您不会两次注册相同的功能，这将导致错误。

您还可以`if(function_exists('function_name'))`在调用插件中定义的函数时使用。如果您停用了插件，您的网站仍然可以正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:25:07.223

在使用自动加载器动态加载的文件中，包含函数或类的文件可能尚未加载，因此您需要检查它是否存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T17:03:59.083

[Wordpress StackExchange 上的这个答案](https://wordpress.stackexchange.com/a/111323/26942)阐明了为什么有时应该在*主题*`if function_exists`中使用函数声明：

 *> if function_exists 方法允许子主题通过简单地定义函数本身来覆盖函数定义。由于子主题的functions.php文件首先加载，因此它们将首先定义函数，并且不会加载父主题的定义。

我想它类似于`protected`面向对象语言中的关键字。

*但是我仍然想知道插件*中的函数声明是否需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:27:50.687

想象一下，您使用您的 URL 来获取函数名称并调用它。然后我们有以下信息：

网址： http: [//mysite.com/my/page/](http://mysite.com/my/page/)

将此 url 转换为函数名称时，您将执行以下操作：

```
implode('_', $myUrlPart); //my_page 
```

输出将是“my_page”作为字符串。但是如果你立即调用它并且该函数不存在，则会显示错误。这就是 function_exists 的用武之地，看一下：

```
if (function_exists($function_name)) {
    $function_name();  //the function is called
} else {
    //call other function to show HTTP 404 page or something like that
} 
```

这是否使它更清楚一点？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-29T13:25:29.510

因为 WordPress 的设计非常糟糕，它没有任何适当的机制来自动加载这样的模块，所以你需要添加保护措施。*

# html - word-wrap:break-word css 属性在 IE8 标准模式下不起作用

> ID：14583793
> 
> 赞同：0
> 
> 时间：2013-01-29T13:13:52.250
> 
> 标签：html, css, word-wrap

CSS 属性 word-wrap:break-word 不适用于 IE8 标准模式，但同样适用于 IE 7 和其他浏览器。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<div style="width:100px;word-wrap:break-word;">
<div style="border:1px solid red; width:100px;word-wrap:break-word;">AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:23:09.857

尝试这个：

```
-ms-word-break: break-all;
    word-break: break-all; 
```

# java - 在 Java 7 上运行的 Eclipse Indigo 不会显示对方法的模棱两可的引用

> ID：14583797
> 
> 赞同：0
> 
> 时间：2013-01-29T13:14:03.403
> 
> 标签：java, eclipse, ambiguous, ambiguous-call

我有一个曾经在 Java 1.5 上运行的应用程序。它编译并运行良好。最近，我决定迁移到 Java 1.7。

当我用 Maven 编译代码时（我在 pom.xml 中更新了 Java 版本），它显示了几个编译错误，说 somes 对某些方法的引用是模棱两可的，这是真的。但是，在 Eclipse 上，这些错误没有显示（我也将 Eclipse 的编译器更新到 1.7）。

我的一个朋友试图在 Eclipse Juno 上做同样的事情并且错误正在显示。

任何想法如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:45:53.020

这个问题是因为 Eclipse 认为你的项目仍然在 java 1.5 上。

1.  您需要转到 Project -> Properties -> Java Buildpath -> Libraries 并删除旧的 Jre。
2.  您需要转到 Project -> Properties -> Java Buildpath -> Libraries -> Add Library -> Add JRE System Library 并添加新的 Jre 7 库。

# java - 如何使用依赖于 Java 项目的 Ant 构建 Android 项目？

> ID：14583800
> 
> 赞同：4
> 
> 时间：2013-01-29T13:14:09.697
> 
> 标签：java, android, eclipse, ant, library-project

我有一个 Android 库项目 AndroidLib，它依赖于我的工作区 JavaLib 中的一个 Java 项目。

在 Eclipse 中，这是通过将 JavaLib 项目添加到 Java **Build Path > Projects** for AndroidLib 并将其设置为在**Order and Export**选项卡中导出来完成的，并且构建良好。

然而，在构建 AndroidLib 时，Ant 似乎并没有获得对 JavaLib 项目的依赖（我已经运行了 android update lib-project）。**将此依赖项添加到我的 build.xml 的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-10T06:49:02.310

我有同样的问题。我最终以一种非常骇人听闻的方式解决了它。

在 AndroidLib/build.xml 中（或者在 AndroidLib/custom_rules.xml 中更好），我定义了一个`-pre-build`构建 JavaLib 并将生成的 jar 复制到 libs/ 中的目标。我还定义了一个`-post-package`目标来删除复制的 jar，否则 Eclipse 会混淆。

```
<property name="lib.javalib.project.dir" location="${basedir}/../JavaLib" />
<target name="-pre-build">
  <subant buildpath="${lib.javalib.project.dir}" target="package" failonerror="true" />
  <copy todir="${basedir}/libs" failonerror="true" verbose="true">
      <fileset dir="${lib.javalib.project.dir}/target">
          <filename name="javalib*.jar"/>
      </fileset>
  </copy>
</target>
<target name="-post-package">
    <delete verbose="true">
        <fileset dir="${basedir}/libs" includes="javalib*.jar" />
    </delete>
</target> 
```

这个解决方案远不能令人满意，但它完成了工作。

您会在那里找到类似的问题和答案：[Android Ant Include Java Library projects](https://stackoverflow.com/questions/12807289/android-ant-include-java-library-projects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T13:53:22.677

我更改了 build.xml 以运行 java 项目的 ant 文件，然后将 jar 复制到 libs 文件夹：

```
 <target name="-pre-compile">
        <ant antfile="build.xml" dir="dependencies/JavaUtils" target="clean"/>
        <ant antfile="build.xml" dir="dependencies/JavaUtils"/>
        <copy todir="${jar.libs.dir}" failonerror="true" file="dependencies/JavaUtils/dist/Java-utils.jar"/>
        <sleep seconds="3"/> <!-- Delay for the file to be recognized after the copy -->
    </target> 
```

这对某人有什么帮助。

顺便说一句，我开始阅读 Gradle 的依赖/构建/任何系统并从中得到了毛骨悚然。啊，回到蚂蚁身上真是一种解脱……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T22:25:30.850

我会回答我自己的问题：正确执行此操作的唯一方法是**不**使用 Ant。

1.  你需要一个合适的依赖管理系统。Maven 是您在这里唯一真正的选择。
2.  您需要一个支持 Maven 的构建系统。我目前再次为此使用 Maven，因为当时它是唯一一个也支持 Maven 依赖项管理的成熟构建工具——现在（尽管适用于 Android 库项目，因为这些格式尚未最终确定）Gradle 应该是你的构建选择的工具。

# php - PHP 超时，PHPmyadmin 在查询时崩溃，NOT IN

> ID：14583803
> 
> 赞同：0
> 
> 时间：2013-01-29T13:14:29.173
> 
> 标签：php, mysql

我在数据库中有两个表。Table1 存储用户，Table2 存储用户生成的数据。

由于表 1 中的一些用户出现错误，表 2 中没有任何数据。我想通知这些用户。

我正在使用 MySQL 以多种方式尝试此操作。但没有任何效果，因为 PHPmyAdmin 冻结或 PHP 超时。这可能是因为第一个表包含 28.000 行，而第二个表包含 80.000 行。我只需要最后5天。

**试用版 1**

```
SELECT gebruikers.g_id
FROM gebruikers LEFT JOIN objecten ON objecten.o_g_id=gebruikers.g_id
WHERE objecten.o_g_id IS NULL 
```

**解释选择**

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  gebruikers  index   NULL    PRIMARY     4   NULL    25227   Using index
1   SIMPLE  objecten    ALL     NULL    NULL    NULL    NULL    81002   Using where; Not ex 
```

**审判 nr 2**

```
SELECT g_id FROM gebruikers
WHERE g_id NOT IN(SELECT o_g_id FROM objecten WHERE o_startdatum <= NOW() AND o_startdatum >=NOW() - INTERVAL 5 DAY) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:28:52.063

如果第二个表具有空值，则“试用 nr 1”很好，但它可能是字段值空而不是空，因此您应该使用 or 子句 objecten.o_g_id = ''。最后的查询是： SELECT gebruikers.g_id FROM gebruikers LEFT JOIN objecten ON objecten.o_g_id=gebruikers.g_id WHERE (objecten.o_g_id IS NULL) or (trim(objecten.o_g_id) ='')

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:54:50.900

查询获取所需记录：

```
SELECT 
    gebruikers.g_id
FROM
    gebruikers
        LEFT JOIN
    objecten ON objecten.o_g_id = gebruikers.g_id
WHERE
    objecten.o_g_id IS NULL
        and o_startdatum <= NOW()
        AND o_startdatum >= (NOW() - INTERVAL 5 DAY); 
```

# jquery - 平滑滚动到下一个 div

> ID：14583805
> 
> 赞同：0
> 
> 时间：2013-01-29T13:14:31.253
> 
> 标签：jquery, html, smooth-scrolling

我目前正在使用平滑滚动技术从 div 滚动到 div，基本上我有一大堆 div，一个接一个，当您单击当前 div 时，它会将您带到下一个，等等。
但这就是我'我遇到了问题，因为目前我必须为每个 div 设置 # 以告诉它转到下一个。这是我的代码，它可能更有意义：
HTML：

```
 <a href="#slide-2"><div id="slide-1" class="slides">
            <div class="text">
ONE
            </div>
        </div></a>

         <a href="#slide-3"><div id="slide-2" class="slides">
            <div class="text">
TWO 
            </div>
        </div></a>  

        <a href="#slide-4"><div id="slide-3" class="slides">
            <div class="text">
THREE
            </div>
        </div></a>  

        <a href="#slide-5"><div id="slide-4" class="slides">
            <div class="text">
FOUR
            </div>
        </div></a>  

        <a href="#slide-6"><div id="slide-5" class="slides">
            <div class="text">
FIVE
            </div>
        </div></a>  

        <a href="#slide-7"><div id="slide-6" class="slides">
            <div class="text">
SIX
            </div>
        </div></a> 
```

jQuery：

```
$(document).ready(function(){
   $('a[href*=#]').bind('click', function(e) {
    e.preventDefault(); //prevent the "normal" behaviour which would be a "hard" jump

    var target = $(this).attr("href"); //Get the target

    // perform animated scrolling by getting top-position of target-element and set it as scroll target
    $('html, body').stop().animate({ scrollTop: $(target).offset().top }, 400, function() {
         location.hash = target;  //attach the hash (#jumptarget) to the pageurl
    });

    return false;
   });
}); 
```

如您所见，幻灯片 1 的 href 将您带到幻灯片 2，依此类推，但最后会有很多 div，随着时间的推移会添加更多，所以我想知道是否有一种从 div 滚动到 div 的更简单方法，即有没有一种方法可以检测下一个 div 并滚动到它等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:20:49.853

You can add classes to the `a` elements and use `next` and `find` methods.

```
$(document).ready(function(){
   $('a.className').on('click', function(e) {
      e.preventDefault(); 
      var offset = $(this).next().find('div').offset().top;
      $('html, body').stop().animate({ scrollTop: offset }, 400);
   });
}); 
```

You can also select the elements and cache the objects:

```
$(document).ready(function(){
   var $a = $('a.className'), $targets = $('div.targets');
   $a.on('click', function(e) {
      e.preventDefault(); 
      var i = $a.index(this);
      var offset = $targets.eq(++i).offset().top;
      $('html, body').stop().animate({ scrollTop: offset }, 400);
   });
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T13:20:44.903

获取您的 div 的索引并滑动到下一个。

```
$(".linkToNextDiv").click(function(e)
{
    var parent = $(this).parent("div");
    var index = $(parent).index();
    scrollToDiv(index+1);
}); 
```

This is just a generic example. You'll need to adapt it to your code.

# jquery - jQuery UI 滑块自定义不起作用

> ID：14583808
> 
> 赞同：0
> 
> 时间：2013-01-29T13:14:50.527
> 
> 标签：jquery, html, css, jquery-ui, uislider

我正在尝试创建一个自定义的 jQuery 滑块。为此，我需要更改滑块手柄的背景。[所以我在http://jsfiddle.net/Cupidvogel/gdfgv/](http://jsfiddle.net/Cupidvogel/gdfgv/)上试用了这段代码。

根据文档，我`ui-slider-handle`在滑块中包含了一个带有类的元素，并试图在其上设置样式。但是手柄的背景仍然没有改变。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:24:16.040

我相信你没有在 div#slider-range-min { background: yellow !important;} <---

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:37:31.293

你还没有关闭 div#slider-range-min 中的parathesis，所以使用

> div.ui-slider-range-min`{ background: green !important; }`
> 
> > div#slider-range-min`{ background: yellow !important; }`
> > 
> > > div#slider-range-min div.ui-slider-handle`{ background: red; }`
> > > 
> > > > 在你的 CSS

# android - 接收字节数组被拆分

> ID：14583810
> 
> 赞同：0
> 
> 时间：2013-01-29T13:15:02.823
> 
> 标签：android, bluetooth

我正在开发一个 android 应用程序，它通过蓝牙从`Asuro`一个小机器人接收字节数组。

这个字节数组是一个命令协议，因此固定大小为 15 此外，应用程序将字节数组发送给 Asuro，Asuro 将其发回。

但是，如果我使用 read(byte[],0,15) 函数并将此数组提供给 Log.d，则此字节数组会被拆分。

请看下面的代码：

```
public void run() {
Log.i(TAG, "BEGIN mConnectedThread");
    byte[] buffer = new byte[15];
int bytes = 0;

        // Keep listening to the InputStream while connected
while (true) {
    try {
    // Read from the InputStream
    bytes = mmInStream.read(buffer, 0, 15);
    if (buffer[0] != 0) {
        Log.d("Asuro-Android", "Input :" + Arrays.toString(buffer));
    }
    buffer = new byte[15];      
} catch (IOException e) {
Log.e(TAG, "disconnected", e);
connectionLost();
break;
}
}
} 
```

我要发送给 Asuro：

```
Output: [58, 48, 49, 48, 48, 48, 49, 48, 48, 48, 51, 48, 48, 48, 48] 
```

连接等工作。为了简化它，我创建了一个数组并将其刷新到输出流中。

但我得到：

```
Input :[58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
Input :[48, 49, 48, 48, 48, 49, 48, 48, 48, 51, 0, 0, 0, 0, 0]
Input :[48, 48, 48, 48, 76, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

这可能是我（应用程序）的错误，还是只能是 asuro 的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:33:31.353

这是蓝牙 SPP 配置文件的本质，它不提供帧边界。因此，它可以由发送方 SPP 本身或接收方根据其缓冲区容量等进行拆分。在您的情况下，由于数据包始终是固定大小的，您可以进行简单的重新组装，或者在更一般的情况下添加您赢得的标头并重新组装一个框架。

# javascript - 如何保持 Pusher Client 对象跨页面持久化？

> ID：14583812
> 
> 赞同：2
> 
> 时间：2013-01-29T13:15:06.207
> 
> 标签：javascript, websocket, publish-subscribe, pusher

我刚刚开始使用[Pusher](http://pusher.com)，到目前为止一切都很好。

但我意识到，当我的用户打开和关闭，或单击我网站中的内部链接时，连接会随着页面卸载而自动断开。

这将使用户在每次导航到新页面时都连接和断开连接。

有没有办法让用户在浏览我的网站时保持订阅和连接的持久性？

编辑：澄清一下，我理解 Pusher 在用户关闭浏览器或页面时断开连接的行为。我只是想知道如果该人访问同一站点内的另一个内部链接，我们如何保持连接活跃。还是断开连接是最佳做法？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:12:49.680

正如@devnull69 所说，目前您需要创建您的应用程序，以便它不执行标准页面导航 - 您可以将您的应用程序构建为[SPA (single-page-application)](http://en.wikipedia.org/wiki/Single-page_application)。这样，页面导航之间就没有页面卸载和加载。

可以通过使用[共享的 web workers](http://caniuse.com/sharedworkers)来保持页面加载之间的连接。但正如 CanIUse 所展示的，浏览器支持还不完美。

Pusher 确实计划提供[消息历史记录](https://pusher.tenderapp.com/discussions/requests/30-event-history)，这意味着页面加载期间丢失的任何消息都可以在重新连接时获取。

另见：

*   [如何维护页面之间的 WebSockets 连接？](https://stackoverflow.com/questions/10886910/how-to-maintain-a-websockets-connection-between-pages)
*   [Shared Web Workers 是否在单个页面重新加载、链接导航中持续存在](https://stackoverflow.com/questions/9336774/do-shared-web-workers-persist-across-a-single-page-reload-link-navigation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:30:20.773

唯一的解决方法是从常规页面刷新切换到 Ajax。这将使您能够保持 websocket 连接，同时仅加载使用 Ajax 请求更改的页面部分。

# jsf - jqPlot / Primefaces 扩展器和日期值的问题

> ID：14583813
> 
> 赞同：3
> 
> 时间：2013-01-29T13:15:11.057
> 
> 标签：jsf, date, charts, primefaces, jqplot

事情就是这样。我有很多包含 java.sql.Timestamp 和（为简单起见）作为数据的 int 的持久“快照”。

我有一个 JSF 页面，其中包含一个 primefaces 3.4.1 `<p:lineChart>`，后面是一个包含图表模型的 ManagedBean。

假设我然后选择一个时间范围并获取该范围之间的所有快照。并使用所有时间戳（x 轴）和所有整数（y 轴）填充图表的数据模型。

所以我在填充时做的是：

```
data = new HashMap<Object, Number>();        
List<Snapshot> allSnapshots = persistenceService.getAllSnapshots();
for(int i = 0; i < allSnapshots.size(); i++) {
    Snapshot s = allSnapshots.get(i);
    data.put(new Date(s.getTimestamp().getTime()), s.getData());
}
chartModel.getSeries().get(0).setData(data); 
```

（注意：在示例代码中，我只是获取所有快照，因为我很快就生成了一百个左右）。

我这样设置图表：

```
<p:lineChart id="chart" value="#{backingBean.chartModel}" xaxisAngle="-90">
   <f:convertDateTime pattern="HH:mm:ss"/>
</p:lineChart> 
```

它工作正常，但是当模型包含一百个数据点时，xaxis 只是挤满了所有的刻度线。

然后我所做的是使用 primefaces 的选项来使用 jqplot 扩展器功能。所以我只是添加`extender="extend"`了图表的属性，`extend`下面的 js 函数在哪里：

```
function extend() {
      this.cfg.axes = {
          xaxis: {
              renderer: $.jqplot.DateAxisRenderer,
              rendererOptions: { tickRenderer: $.jqplot.CanvasAxisTickRenderer },
              tickOptions: {
                  showGridline: true,
                  formatString: '%H:%M',
                  angle: -90                        
             }         
         }
     }
} 
```

这是它的当前版本。经过数小时的阅读和反复试验，我仍然无法正确，因为以下事情永远不会正确：

*   刻度线永远不会被渲染，因为 Date 永远不会被转换。目前这只是被忽略并显示 formatString 本身......
*   在实际数据的左侧和右侧创建了额外的刻度线，我不希望这样。
*   当我只提供`autoscale: true`jqplot 扩展器的选项时，我希望标记之间的间距正常。但随后发生的是，间距很酷，但原始日期标签变成了从 0 到可用数据量的纯数字..！？

处理这个问题我有点累了……也许我在做一些根本错误的事情。否则我不知道为什么这么复杂..

感谢您的任何建议！

干杯

克里斯

* * *

编辑：

好的，感谢 perissf，我检查了这个：[https ://stackoverflow.com/a/14287971/870122](https://stackoverflow.com/a/14287971/870122)

使用建议的扩展器，我得到以下输出： [http ://www.abload.de/img/clipboard01y6sgj.png](http://www.abload.de/img/clipboard01y6sgj.png)

（抱歉，由于新用户限制，我无法直接发布图片：-/）

如您所见，刻度线正确呈现为 HH:MM，这非常好。但是你也可以看到另一个非常奇怪的问题发生了：

快照的给定时间范围是

*   开始时间：2013-01-28 13:01:25.415
*   结束时间：2013-01-28 13:14:32.145

当 JVM 在 glassfish 配置中设置为 UTC 时，我使用 System.currentTimeMillis() 将这些作为 UTC 时间戳收集起来。

如您所见，图中的数据点移动了一小时，它们从 14:01 开始，看起来这些值已自动转换为我当前的时区，即 UTC+1。但是最左边的 xaxis 刻度位于 13:00 的原始 UTC 值附近。

我收集时间戳 UTC，因为我不知道应用程序将在哪个实际时区运行，但我想显示“转换后的”时间值。所以自动切换到我的时区是一个不错的功能，但 xaxis 缩放实际上并不好和奇怪。

任何建议我如何摆脱它？

干杯

克里斯

* * *

编辑2：

好的，在使用 Firebug 调试渲染页面时，我偶然发现了绘图对象中的 jqplot 内部变量，它似乎包含 xaxis 的最小值和最大值。最小值设置为 13:00 左右的原始最小 UTC 值，最大值设置为 14:15 左右的偏移 UTC+1 值。

不知何故，最小值不会随着自动时区调整而相应移动。

所有其他值，即 dataBounds、数据本身等，都很好地移动了一小时。

我在[Bitbucket jqplot 问题跟踪器上打开了一个问题](https://bitbucket.org/cleonello/jqplot/issue/718/dateaxisrenderer-xaxis-min-value-is-not)

让我们来看看。

再见

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:10:44.407

我终于调试了 jqplot 渲染器，发现了一些导致这种行为的代码行。

对于任何感兴趣的人，请在此处的评论部分中找到错误修复： [Bitbucket 问题跟踪器](https://bitbucket.org/cleonello/jqplot/issue/718/dateaxisrenderer-xaxis-min-value-is-not)

谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T10:05:06.547

我对此修复非常感兴趣，但 BitBucket 上的问题位于受限区域，因此我无法访问它。所以我不得不自己尝试修复这个 AxisDateRenderer，幸运的是我做到了:)

所以 Primefaces (6.0) 图表使用旧版本的 JQPlot 库。此版本中的一个错误将最小日期轴边界设置为不完全是第一个值，而是根据用户浏览器的区域设置时区较旧的时间。例如，如果第一个值是 12:00 并且您的 GMT 是 GMT+1，那么日期轴界限最小值将是 11:00 而不是 12:00！

最小谷

应该替换以下行（在 createTicks 函数中）（注意代码在下面编写）

```
ad = ad.getTime() + ad.getUtcOffset(); 
```

通过下一行：

```
ad = Math.floor((ad.getTime() - ad.getUtcOffset())/r) * r + ad.getUtcOffset(); 
```

要替换的非缩小行：

```
min = min.getTime()  + min.getUtcOffset(); 
```

和：

```
 min = Math.floor((min.getTime() - min.getUtcOffset())/tempti) * tempti + min.getUtcOffset(); 
```

请注意，我已尝试将 Primefaces 的 chart.js 更新为早期版本，但该图表不再起作用。我将等待 Primefaces 的下一次更新，希望使用更新的版本。我也不知道 Primefaces 6.0 使用的是哪个版本的 JQPlot

# php - Laravel 4 权限

> ID：14583814
> 
> 赞同：3
> 
> 时间：2013-01-29T13:15:15.513
> 
> 标签：php, authentication, permissions, laravel, laravel-4

所以这基本上是我到目前为止得到的 sql 模型：

![在此处输入图像描述](../Images/2f61755b3ad8a687f58995f11e3dc0aa.png)

这就是它如何看待我的用户控制器（stackoverflow 格式）：

```
if (Auth::user()->is('admin'))
                    {
                            if (Auth::user()->can('delete'))
                            {
                                    echo 'hurra!';
                            }
                    } 
```

权限密钥可能看起来像这样

> admin.delete 可能类似于 user.can.buy

现在我想知道它是否可以，我如何在方法中执行它：

```
public function is($roleName)
        {
                $role = $this->roles;

                if ($role->name == $roleName)
                {
                        return true;
                }

                return false;
        } 
```

我觉得这个不错

但

```
public function can($permissionKey)
        {
                $permissions = $this->roles->permissions()
                        ->where('key', $permissionKey)
                        ->count();

                if ($permissions > 0)
                {
                        return true;
                }

                return false;
        } 
```

对我来说看起来有点尴尬。这是我用雄辩的 orm 选择数据的正确方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:33:01.750

好吧，我安装了一个分析器并检查了所有触发的 sql 查询：

选择 * from `users`where `id`= '1' 限制 1

选择 * from `roles`where `id`= '1' 限制 1

`permissions`从内部连接中选择 count(*) 作为聚合`permission_role`on `permissions`。`id`= `permission_role`。`permission_id`哪里`permission_role`。`role_id`= '1' 和`key`= 'view.admin'

这对我来说看起来不错，所以我认为我这样做的方式还可以。

# python - Django Rest Framework - 如何在 ModelSerializer 中添加自定义字段

> ID：14583816
> 
> 赞同：100
> 
> 时间：2013-01-29T13:15:18.260
> 
> 标签：python, django, django-rest-framework

我创建了一个`ModelSerializer`并想添加一个不属于我的模型的自定义字段。

[我在这里](https://www.django-rest-framework.org/api-guide/serializers/#specifying-fields-explicitly)找到了添加额外字段的描述，并尝试了以下方法：

```
customField = CharField(source='my_field') 
```

当我添加这个字段并调用我的`validate()`函数时，这个字段不是`attr`字典的一部分。`attr`包含除额外字段外指定的所有模型字段。所以我无法在覆盖验证中访问此字段，可以吗？

当我像这样将此字段添加到字段列表时：

```
class Meta:
    model = Account
    fields = ('myfield1', 'myfield2', 'customField') 
```

然后我得到一个错误，因为`customField`它不是我的模型的一部分 - 什么是正确的，因为我只想为这个序列化程序添加它。

有没有办法添加自定义字段？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-09-14T11:14:58.737

事实上，有一个完全不接触模型的解决方案。您可以使用`SerializerMethodField`它允许您将任何方法插入序列化程序。

```
class FooSerializer(ModelSerializer):
    foo = serializers.SerializerMethodField()

    def get_foo(self, obj):
        return "Foo id: %i" % obj.pk 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-01-29T13:38:57.120

您正在做正确的事情，除了`CharField`（和其他类型的字段）用于可写字段。

在这种情况下，您只需要一个简单的只读字段，因此只需使用：

```
customField = Field(source='get_absolute_url') 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-04-06T16:56:44.430

...为清楚起见，如果您有以下方式定义的模型方法：

```
class MyModel(models.Model):
    ...

    def model_method(self):
        return "some_calculated_result" 
```

您可以将调用所述方法的结果添加到您的序列化程序，如下所示：

```
class MyModelSerializer(serializers.ModelSerializer):
    model_method_field = serializers.CharField(source='model_method') 
```

ps 由于自定义字段实际上不是模型中的字段，因此您通常希望将其设为只读，如下所示：

```
class Meta:
    model = MyModel
    read_only_fields = (
        'model_method_field',
        ) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-01-21T22:21:10.690

这里回答你的问题。您应该添加到您的模型帐户：

```
@property
def my_field(self):
    return None 
```

现在您可以使用：

```
customField = CharField(source='my_field') 
```

来源：[https ://stackoverflow.com/a/18396622/3220916](https://stackoverflow.com/a/18396622/3220916)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-09-02T05:29:42.120

为了显示`self.author.full_name`，我遇到了一个错误`Field`。它适用于`ReadOnlyField`：

```
class CommentSerializer(serializers.HyperlinkedModelSerializer):
    author_name = ReadOnlyField(source="author.full_name")
    class Meta:
        model = Comment
        fields = ('url', 'content', 'author_name', 'author') 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-06-30T14:21:48.557

使用最新版本的 Django Rest Framework，您需要在模型中创建一个方法，并使用您要添加的字段的名称。

```
class Foo(models.Model):
    . . .
    def foo(self):
        return 'stuff'
    . . .

class FooSerializer(ModelSerializer):
    foo = serializers.ReadOnlyField()

    class Meta:
        model = Foo
        fields = ('foo',) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-10-07T17:05:40.310

我正在寻找一种将可写自定义字段添加到模型序列化程序的解决方案。我找到了这个，这个问题的答案中没有涉及到。

看来您确实需要编写自己的简单序列化程序。

```
class PassThroughSerializer(serializers.Field):
    def to_representation(self, instance):
        # This function is for the direction: Instance -> Dict
        # If you only need this, use a ReadOnlyField, or SerializerField
        return None

    def to_internal_value(self, data):
        # This function is for the direction: Dict -> Instance
        # Here you can manipulate the data if you need to.
        return data 
```

现在您可以使用此 Serializer 将自定义字段添加到 ModelSerializer

```
class MyModelSerializer(serializers.ModelSerializer)
    my_custom_field = PassThroughSerializer()

    def create(self, validated_data):
        # now the key 'my_custom_field' is available in validated_data
        ...
        return instance 
```

如果模型`MyModel`实际上有一个名为的属性`my_custom_field`但您想忽略它的验证器，这也有效。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-08-12T16:17:19.237

在这里阅读所有答案后，我的结论是不可能干净地做到这一点。您必须玩弄脏东西并做一些像创建 write_only 字段这样的事情，然后覆盖`validate`and`to_representation`方法。这对我有用：

```
class FooSerializer(ModelSerializer):

    foo = CharField(write_only=True)

    class Meta:
        model = Foo
        fields = ["foo", ...]

    def validate(self, data):
        foo = data.pop("foo", None)
        # Do what you want with your value
        return super().validate(data)

    def to_representation(self, instance):
        data = super().to_representation(instance)
        data["foo"] = whatever_you_want
        return data 
```

# iphone - 在键盘动画之前运行代码

> ID：14583821
> 
> 赞同：0
> 
> 时间：2013-01-29T13:15:35.497
> 
> 标签：iphone, objective-c, xcode

我的应用程序中有一个搜索栏，当焦点放在搜索框中时，我希望在键盘出现之前出现一些动画。在显示键盘之前，有没有可以用来拦截的委托方法？

我目前正在运行以下代码来检测 UISearchBar 何时被激活：

```
-(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar{
    NSLog(@"Begin Editing");
    CGRect newFrame = searchBar.frame;
    newFrame.origin.y = 0;
    [UIView animateWithDuration:0.25
                      animations:^{
                          searchBar.frame = newFrame;
                          [searchBar layoutSubviews];
                      }
                      completion:^(BOOL finished){
                          NSLog(@"Done!");
                      }
     ];
} 
```

无论如何我可以延迟键盘的显示吗？也许暂停它然后在完成处理程序中显示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:22:49.097

您需要为您的代码添加一个通知中心。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil]; 
```

然后声明一个名为keyboardDidShow: 的方法并将动画代码添加到其中。

有很多选择。我猜

```
name:UIKeyboardWillShowNotification 
```

也可用。只需检查它是否在那里，它应该可以工作。

干杯快乐编码.!!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:23:03.697

Yes, there is also `searchBarShouldBeginEditing:`. You can do your animations, then return `YES`.

# grails - grails (GGTS)：我可以自动将类从 target-eclipse 复制到部署文件夹吗？

> ID：14583823
> 
> 赞同：1
> 
> 时间：2013-01-29T13:15:46.623
> 
> 标签：grails, web-deployment

我在 src/Java 中有一个类，其类文件需要从*target-eclipse*文件夹复制（或编译）到我的*externalConfig文件夹中的**类*文件夹中——这在 GGTS 中不可见。

 **我的具体要求是我需要类文件可供 Liquibase 作为部署平台上的 CustomTaskChange 调用。

我可以编写一些代码来将特定包名称中的任何类文件复制到我的目标*类*文件夹中吗？任何避免必须离开 GGTS 的解决方案都将受到欢迎。我已经尝试过 Resouce 透视图，但没有显示 target-eclipse。

问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:19:27.640

您可以使用 grails 脚本按事件执行。你可以使用命令

```
 grails create-script scriptClassName.... 
```

或者按照命名约定，在 /scripts 目录下创建一个名为 _Event.groovy 的文件。在这个 groovy 文件中，创建事件方法。例如（这将在创建 war 文件时调用：

在脚本/_Event.groovy

```
eventCreateWarStart = { warName, myDir ->
println 'EVENT CALLED!'

File libDir = new File("${myDir}/WEB-INF/lib/")
if (grailsEnv != "development") {
    libDir.eachFileMatch( ~/^(my_class_name).*\.class$/) { File classToCopy ->
        println "Put code to copy file ${classToCopy}"
    }
}
} 
```**

# c# - 用 16 位灰度值填充位图，无需降级

> ID：14583826
> 
> 赞同：1
> 
> 时间：2013-01-29T13:15:53.363
> 
> 标签：c#, winforms, grayscale

我有一个包含原始图像数据的文件。每个像素都表示为`16 bit (0-65536)`值。

我正在将所需的数据部分读入一个`ushort[]`数组。在做了一些图像处理之后，我需要以某种方式向用户展示这个图像。我绘制 8 位灰度没有问题（我只是将每个像素的 R、G 和 B 值设置为相同），但无法处理 16 位/像素灰度图像。

另一种可能性是使用`PixelFormat.Format48bppRgb`并将 r,g 和 b 设置为相同的 16 位 grascale，但我找不到如何。

我发现了一些使用`unsafe`code 和的代码片段`LockBits`，但无法让它们工作。

有什么方法可以绘制 16 位灰度图像而不将其缩小到 8 位？

请给我一个代码片段。

**编辑：这就是我设置 8 位灰度的方式：**

```
Array img;
//var data = bmp.LockBits(new Rectangle(0, 0, bmp.Width, bmp.Height), ImageLockMode.ReadWrite, bmp.PixelFormat);
if (bitsPerElement == 8)
{
    //img = Array.CreateInstance(typeof(byte), bitmapHeigth*bitmapWidth);
    img = GetLayerBytes<byte>(LayerNum) as byte[];
}
else
{
    img = GetLayerBytes<UInt16>(LayerNum) as UInt16[];
}

int ind = 0;
for (int heigth = 0; heigth < bitmapHeigth; heigth++)
{
    for (int width = 0; width < bitmapWidth; width++)
    {
        int current = Convert.ToInt32(img.GetValue(ind));
        ind++;

        bmp.SetPixel(width, heigth, Color.FromArgb(current, current, current));
    }
}
pictureBox1.Image = bmp; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T08:37:05.420

如果有人正在寻找答案，请引用[Hans Passant的话：](https://stackoverflow.com/users/17034/hans-passant)

> 这些像素格式是在 GDI+ 中定义的，期望有一天它可能会随着显示技术的充分进步而有用。我们仍在等待。实际上，LCD 面板无法显示 24rgb 格式的所有可能的 1600 万种颜色。实际上，查看 16 位格式的灰度级需要专门的硬件和训练有素的眼睛，您可以在医院找到这种眼睛。具有匹配的非标准图像格式，如 DICOM。您可以从像 Lead Tools 这样的供应商处购买。

# oracle - Oracle 内连接与集合？

> ID：14583827
> 
> 赞同：4
> 
> 时间：2013-01-29T13:15:53.563
> 
> 标签：oracle, plsql

我想在以下示例中将表类型的集合与其他表连接起来 -

我有一个函数 F_GetPendingFeeds，它返回 feed_log 类型的表集合。我想将这个返回的集合与其中一张表一起加入 -

```
CREATE OR REPLACE PACKAGE BODY L_DemoPkg
IS
   TYPE t_feedLog IS TABLE OF feed_log%ROWTYPE
                INDEX BY PLS_INTEGER;

   FUNCTION F_GetPendingFeeds
      RETURN t_feedLog
   IS
   lo_feedLog t_feedLog;
   BEGIN
      SELECT feed_log_seq
         , processed_dt
         , processed_by
         , create_dt
         , created_by
      BULK COLLECT INTO lo_feedLog
      FROM feed_log
      WHERE status_cd = 0;

      RETURN lo_feedLog;

   EXCEPTION
      WHEN OTHERS THEN
         --TODO: Log Exception
         RAISE;
   END F_GetPendingFeeds;

   PROCEDURE P_ProcessFeed
   IS
   o_pendingFeed t_feedLog;
   ln_totalRecords t_feedLog;

   BEGIN

      -- Get the list of pending feed ids
      o_pendingFeed := F_GetPendingFeeds();

      -- Check if new data is present for processing
      IF o_pendingFeed.COUNT = 0 THEN
         dbms_output.put_line('Feed processing failed. No data found.');
         RETURN;
      END IF;

      SELECT COUNT(*)
      INTO ln_totalRecords
      FROM  feed_details t1
          , table(o_pendingFeed) t2 --ERROR: ORA-22905: cannot access rows from a non-nested table item
      WHERE t1.feed_log_seq = t2.feed_log_seq;

   EXCEPTION
      WHEN OTHERS THEN
         --TODO: Log Exception
         RAISE;
   END P_ProcessFeed;
END; 
```

我收到错误 -

```
PL/SQL: SQL Statement ignored
PL/SQL: ORA-22905: cannot access rows from a non-nested table
     item 
```

请注意，我想将集合与表一起加入 -

```
 FROM  feed_details t1
      , table(o_pendingFeed) t2 --ERROR: ORA-22905: cannot access rows from a non-nested table item   WHERE t1.feed_log_seq = t2.feed_log_seq; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T13:52:12.963

在 Oracle 12C 之前，您只能从使用`CREATE TYPE`例如在服务器上创建的集合中进行选择

```
SQL> CREATE TYPE r_feedLog IS OBJECT (foo NUMBER, bar VARCHAR2(20));
SQL> CREATE TYPE t_feedLog IS TABLE OF r_feedLog; 
```

然后`t_feedLog`从你的包中删除声明。

使用 Oracle 12C，**可以**从包规范中定义的 PL/SQL 表中进行选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T13:52:10.513

你这里有几个错误。首先，要访问强制转换中的数组，`TABLE`您需要使用 SQL 数组（好吧，您仍然可以使用 PL/SQL 表，但这仅适用于流水线函数，因为 Oracle 将为您静默创建 SQL 类型；但是即使在那种情况下，使用 SQL 数组仍然更整洁）。所以你需要这样做：

```
SQL> create type r_feedlog is object
  2  (
  3    feed_log_seq number,
  4     processed_dt date,
  5    processed_by varchar2(10),
  6    create_dt date,
  7    created_by varchar2(10)
  8  );
  9  /

Type created.

SQL> create type t_feedLog as table of r_feedlog;
  2  /

Type created. 
```

然后使用它而不是 pl/sql 索引表。其次

```
 ln_totalRecords t_feedLog; 
```

应该是一个数字而不是一个集合，因为您选择 count(*) 。还 ：

```
 BULK COLLECT INTO lo_transferFeedDef 
```

应该

```
 BULK COLLECT INTO lo_feedLog 
```

你当然可以拥有流水线的功能，例如：

```
CREATE OR REPLACE PACKAGE L_DemoPkg
as
  type r_feedlog is record(feed_log_seq number,
                           processed_dt date,
                           processed_by varchar2(10),
                           create_dt date,
                           created_by varchar2(10));
  type t_feedLog is table of r_feedlog;

  function F_GetPendingFeeds return t_feedLog pipelined;

  procedure P_ProcessFeed;
end;
/ 
```

并在包体内：

```
FUNCTION F_GetPendingFeeds
   RETURN t_feedLog pipelined
IS
lo_feedLog r_feedlog;
BEGIN
   for r_row in (SELECT feed_log_seq
                        , processed_dt
                        , processed_by
                        , create_dt
                        , created_by
                   FROM feed_log
                  WHERE status_cd = 0)
   loop
     lo_feedLog.feed_log_seq := r_row.feed_log_seq;
     lo_feedLog.processed_dt := r_row.processed_dt;
     lo_feedLog.processed_by := r_row.processed_by;
     lo_feedLog.create_dt := r_row.create_dt;
     lo_feedLog.created_by := r_row.created_by;
     pipe row(lo_feedLog);
   end loop;
END F_GetPendingFeeds; 
```

在此过程中，您可以：

```
SELECT COUNT(*)
INTO ln_totalRecords
FROM  feed_details t1
    , table(F_GetPendingFeeds()) t2
WHERE t1.feed_log_seq = t2.feed_log_seq; 
```

以上是保留一个 pl/sql 数组。如果你有 SQL 数组，函数会更紧凑：

```
FUNCTION F_GetPendingFeeds
   RETURN t_feedLog pipelined
IS
BEGIN
   for r_row in (SELECT r_feedlog(feed_log_seq
                        , processed_dt
                        , processed_by
                        , create_dt
                        , created_by) data
                   FROM feed_log
                  WHERE status_cd = 0)
   loop
     pipe row(r_row.data);
   end loop;
END F_GetPendingFeeds; 
```

# mysql - LOAD DATA LOCAL INFILE 在 MySQL 中只导入一行

> ID：14583828
> 
> 赞同：1
> 
> 时间：2013-01-29T13:15:56.030
> 
> 标签：mysql, load-data-infile

使用 MySQL 数据库，我想导入一个 13 列和 120 行的 csv 文件。我正在尝试将它们上传到表格中。

这是我的命令：

```
mysql> load data local infile 'restaurants.csv' 
       into table restaurants_restaurant fields        
       terminated by ',' enclosed by '"' lines terminated by '\n'; 
```

以下是报道的内容：

```
Query OK, 1 row affected, 4 warnings (0.05 sec)
Records: 1  Deleted: 0  Skipped: 0  Warnings: 4 
```

仅添加了 1 行，并且仅添加了部分？我究竟做错了什么？

我的表结构：

```
class Restaurant(models.Model):
name = models.CharField(max_length=200)
category = models.CharField(max_length=200)
city = models.CharField(max_length=200)
location= models.CharField(max_length=200)
address= models.CharField(max_length=500)
phone_number= models.IntegerField()
email= models.CharField(max_length=200)
description= models.CharField(max_length=2000)
hours= models.CharField(max_length=200)
photos= models.CharField(max_length=200)
price= models.CharField(max_length=200)
rating= models.IntegerField()
review= models.CharField(max_length=2000) 
```

我的 csv 的前 4 行：

```
American Burger,American,Dhaka,,,,,,,,2 to 4,4
ARIRANG,Korean,Dhaka,,"House 3, Road 51, Gulshan 2, Dhaka, Bangladesh.",(88-02) 989-6453,,,,,,
Aroma,,Dhaka,,,,,,,,15 to 20,3.5
Bacaru,,Dhaka,,,,,,,,,4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:32:04.687

In your CSV file line separator is (0D 0A). So, you need to use '\r\n' as line separator -

```
...
lines terminated by '\r\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T22:45:41.203

如果您的表有任何违反数据文件行的唯一约束，`LOAD DATA INFILE`则将跳过它们，如本文所示：

[https://stackoverflow.com/a/20913896/445131](https://stackoverflow.com/a/20913896/445131)

要么删除表上的所有唯一约束并重试，要么删除文本文件中每一行的每一列中的重复项并重试。

# c# - 在 GridView 单元格中呈现 HTML 标签

> ID：14583834
> 
> 赞同：3
> 
> 时间：2013-01-29T13:16:08.370
> 
> 标签：c#, html, asp.net, gridview

我有一个gridview，我想在一个单元格内插入一个面板，我想在其中呈现html标签。相反，我在文本中看到了 html 标签。有任何想法吗？。

```
 protected void grdThreat_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Panel mainPanel = new Panel(); 
        mainPanel.Controls.Add(new LiteralControl(e.Row.Cells[4].Text)); 
            e.Row.Cells[4].Controls.Add(mainPanel);
    }
} 
```

![在此处输入图像描述](../Images/4f4fe792ec2b71d96dd9989d960cf4ad.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:32:42.943

修改单元格的 Text 属性，然后它应该可以工作。目前它只是作为文本粘贴。

另请参阅[如何在 GridView 单元格（即 <br>）中呈现解码的 HTML](https://stackoverflow.com/questions/431840/how-to-render-decoded-html-in-a-i-e-a-br-in-gridview-cell)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-05T10:27:47.060

在包含 HTML 的 GridViews 绑定字段中将 HtmlEncode 属性设置为 false

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:34:10.290

我认为，您可以在 System.Net 名称空间中使用 HttpUtility.HtmlDecode。我没有测试它，但你可以试试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T13:35:53.003

使用超链接而不是文字控制..

# jquery - 多级菜单引导

> ID：14583838
> 
> 赞同：0
> 
> 时间：2013-01-29T13:16:33.257
> 
> 标签：jquery, jquery-mobile, twitter-bootstrap, navigation

有谁知道我如何使用 Bootstrap 或 jQuery mobile 创建一个多级导航栏，它可以在移动设备（尤其是 iPad 和 iPhone）上正常工作，直到第二个子菜单级别？

我发现这个问题是基于标准 Bootstrap 的建议：[Twitter Bootstrap Multilevel Dropdown Menu](https://stackoverflow.com/questions/9758587/twitter-bootstrap-multilevel-dropdown-menu)

但它仍然无法在 iPad 上运行。您不能点击任何“二级链接”项目（至少不能在我客户的 iPad 上——我没有）。

我还研究了 jQuery Mobile，也找不到 JQM 的解决方案。这是没有解决方案的iPad瘟疫吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:44:27.357

所有的研究都表明，这不能用 bootstrap 来完成。我决定自己开发一个自定义的 JavaScript/jQuery 菜单，效果很好。

# c++ - ANTLR - 保持块不变

> ID：14583843
> 
> 赞同：2
> 
> 时间：2013-01-29T13:16:51.423
> 
> 标签：c++, antlr

我是 ANTLR 的初学者，我需要修改现有的复杂语法。

我想创建一个规则来保留一个块而不用其他规则解析。为了更清楚，我需要将用 c++ 编写的代码插入到解释代码中。

* * *

编辑 2013 年 11 月 2 日

经过多次测试，这是我的语法，我的测试，我得到的结果，以及结果和想要的：

# 语法

```
cppLiteral
    : cppBegin cppInnerTerm cppEnd
    ;
cppBegin
    :  '//$CPP_IN$'
    ;
cppEnd
    : '//$CPP_OUT$'
    ;
cppInnerTerm
    : ( ~('//$CPP_OUT$') )*
    ; 
```

# 测试

```
//$CPP_IN$
txt1 txt2
//$CPP_OUT$ 
```

# 结果

```
cppLiteral ->
cppBegin = '//$CPP_IN$'
cppInnerTerm = 'txt1' 'txt2'
cppEnd = '//$CPP_OUT$' 
```

# 预期结果

```
cppLiteral ->
cppBegin = '//$CPP_IN$'
cppInnerTerm = 'txt1 txt2'
cppEnd = '//$CPP_OUT$' 
```

（对不起，我不能发布AST的图像，因为我没有10个声望）

“cppBegin”、“cppInnerTerm”和“cppEnd”这三个标记可以在一个标记中，如下所示：

```
cppLiteral
    : '//$CPP_IN$'( ~('//$CPP_OUT$') )*'//$CPP_OUT$'
    ; 
```

得到这个结果：

```
cppLiteral = '//$CPP_IN$\n txt1 txt2\n //$CPP_OUT$' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T04:14:41.320

> 我想创建一个规则来保留一个块而不用其他规则解析。

像多行注释一样解析它，例如`/* foobar */`. 下面是一个使用您问题中指定的关键字的小示例。

请注意，大部分工作都是使用词法分析器规则（以大写字母开头的规则）完成的。任何时候你想处理文本块，特别是如果你想避免像这种情况下的其他规则，你可能会考虑词法分析器规则而不是解析器规则。

### CppBlock.g

```
grammar CppBlock;

document: CPP_LITERAL* EOF;

fragment CPP_IN:'//$CPP_IN$';
fragment CPP_OUT:'//$CPP_OUT$';

CPP_LITERAL:  CPP_IN .* CPP_OUT
            {
                String t = getText(); 
                t = t.substring(10, t.length() - 11); //10 = length of CPP_IN, 11 = length of CPP_OUT
                setText(t);
            }
            ;
WS: (' '|'\t'|'\f'|'\r'|'\n')+ {skip();}; 
```

这是一个简单的测试用例：

**输入**

```
//$CPP_IN$
static const int x = 0; //magic number
int *y; //$CPP_IN$ <-- junk comment
static void foo(); //forward decl...
//$CPP_OUT$

//$CPP_IN$
//Here is another block of CPP code...
const char* msg = ":D";
//The end.
//$CPP_OUT$ 
```

**输出令牌**

```
[CPP_LITERAL : 
static const int x = 0; //magic number
int *y; //$CPP_IN$ <-- junk comment
static void foo(); //forward decl...
]
[CPP_LITERAL : 
//Here is another block of CPP code...
const char* msg = ":D";
//The end.
] 
```

规则`CPP_LITERAL`在输入的开头和结尾（之后`//$CPP_IN$`和之前`//$CPP_OUT$`）保留换行符。如果您不想要这些，只需更新操作以将它们删除。否则，我认为这种语法可以满足您的要求。

# css - 从表头类名中选择所有行中的特定列

> ID：14583846
> 
> 赞同：3
> 
> 时间：2013-01-29T13:16:56.577
> 
> 标签：css

在一张桌子上，所有人`<th>`都有`class`和`<td>`没有。

是否可以将这些样式应用`<th>` `class`到所有相应`<td>`的样式中，`css`并且不需要任何样式`script`？

此外`table`是动态的，因此列索引可能会有所不同。所以我不能使用`nth-child`，我只能用它来导航它`class`。

这是[小提琴](http://jsfiddle.net/gX2Wk/)

跨浏览器有更好的想法吗？

**更新：**

表可能有`n`列数，但不限于`2`列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:32:01.380

You could handle this using `<col>`, [http://www.quirksmode.org/css/columns.html#background](http://www.quirksmode.org/css/columns.html#background), only other way I see would need to add the classes everywhere or to use JS.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T13:23:16.330

尝试这个

```
<table>
<tr>
    <th class="a">`Column A`</th>
    `<th class="b">`Column B`</th>
</tr>
<tr>
    <td class="a">`aaa`</td>
    <td class="b">`bbb`</td>
</tr>
<tr>
    <td class="a">`ccc`</td>
    <td class="b">`ddd`</td>
</tr>
</table> 
```

# c# - 在完成函数 Execution.Asp.net 之前制作 UI 显示

> ID：14583848
> 
> 赞同：0
> 
> 时间：2013-01-29T13:17:02.617
> 
> 标签：c#, asp.net

我有一个函数可以将电子邮件发送给不同的接收者，比如 Actor1、actor2 等。在发送自动生成的电子邮件之前，用户应该能够对其进行编辑。我使用占位符来显示自动生成的电子邮件内容，并使用文本框来添加新内容。我的功能看起来像这样

```
public void SendEmail(var content)
{
...
display1= actor1content;
....
....
dsplay2=actor2content;
} 
```

这里 display1 和 display2 是我放在占位符上的控件。现在，在函数执行后，两个显示将聚集在一起。如何使函数首先出现 display1 然后继续执行函数并再次使 display2 出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:35:16.110

您可以使用 UpdatePanel 来防止完整的 PostBack ，并使用 Timer 来每 5 秒左右触发一次异步 PostBack。当异步 PostBack 发生时，您可以检查后台操作的状态，如果您需要用户输入（例如：如果操作已完成），请注册启动脚本以显示警报/提示。

# jquery - Symfony2 JsonResponse 和 jQuery.parseJson()

> ID：14583849
> 
> 赞同：0
> 
> 时间：2013-01-29T13:17:07.030
> 
> 标签：jquery, json, symfony

在我的控制器中，如果我返回 JSON 响应，例如：

```
return new JsonResponse(array('numberOfRatings' => count($ratingCollection), 'oldRating' => $oldRating)); 
```

返回的对象将具有以下数据：

```
protected 'data' => string '{"numberOfRatings":1,"oldRating":2}' (length=35) 
```

但是当我尝试用它解析它时，`jQuery.parseJson();`它会返回一个异常，即 jQuery 无法解析它。但是当我这样做时：

```
return new JsonResponse(json_encode(array('numberOfRatings' => count($ratingCollection), 'oldRating' => $oldRating))); 
```

什么等于

```
return new Response(json_encode(array('numberOfRatings' => count($ratingCollection), 'oldRating' => $oldRating))); 
```

该`parseJson()`方法效果很好。但我在这里的错误，因为它似乎`JsonResponse`是无用的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:25:13.107

当你使用时`JsonResponse`，你不需要使用`jQuery.parseJson()`，你得到的数据已经是一个javascript对象。

```
$.getJSON(your_url, function(data) {
   // the data is already an object, don't need to parse it.
   // var data = $.parseJSON(data); 
   // ...
}); 
```

# spring - Java JPA：如何跨 HTTP 请求保持会话活动？

> ID：14583850
> 
> 赞同：1
> 
> 时间：2013-01-29T13:17:18.023
> 
> 标签：spring, caching, jpa, httprequest

在 Web 应用程序中，我使用 JPA 实体将我的域对象持久保存（和检索）到（和从）底层数据库。 **这些 JPA 实体在 Web 应用程序的整个运行时间内****保持“热”在内存中的缓存结构（想想 a`Map<UniqueID, Entity>`** ）中。

所以我正在向我的 Web 应用程序发出请求，从存储库中加载了一个实体。该实体被放入内存缓存结构中。在这个请求的整个生命周期中，我可以愉快地访问这个实体的任何字段。在第一个请求期间，延迟加载与其他实体的关系也可以正常工作，即使在我的`View`: 我成功地使用*Open-Session-in-View 模式*（通过 Spring 的`OpenEntityManagerInViewInterceptor`）。

第一个请求已结束。

我正在向我的 Web 应用程序发出下一个请求。此请求要求另一个实体。**这个实体已经在内存缓存结构**中，所以它是从那里加载的。从这个实体中，我尝试访问一个应该延迟加载与其他实体的关系的字段。不幸的是，这令人讨厌 `org.hibernate.LazyInitializationException: could not initialize proxy - no Session`（我使用 Hibernate 作为我的底层 JPA 实现）

据我了解，此异常源于这样一个事实，即在第一个请求结束后，JPA/Hibernate 已结束任何 JPA 会话，但我的内存缓存结构中的实体仍然希望这些会话中的任何一个存在；在下一个请求触发延迟加载实体机制的那一刻，延迟加载机制找不到任何不再存在的会话。

我的问题有什么解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:25:15.187

1.  一种解决方案是在第二个请求开始时使用`Session.update()`.
2.  另一种解决方案是在 Hibernate 中使用[二级缓存](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/performance.html#performance-cache)而不是您自己的解决方案。它应该比任何本地缓存机制更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:32:45.483

您收到此异常是因为您的对象已与当前会话分离。在评估它之前，您必须将此对象重新附加到当前会话

```
session.update(object); 
```

[您可以在此处](https://community.jboss.org/wiki/OpenSessioninView#The_problem)阅读详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T13:28:41.687

基本上，您不能在 HTTP 请求之间保持会话处于活动状态，因为这意味着在请求之间保持事务打开。

我认为唯一的解决方案（除了检测自己加载的内容和未加载的内容）是在将其放入缓存之前获取整个实体。恕我直言，您不应该将部分加载的对象放入缓存中。如果您不想第一次加载整个对象，则可以为对象关系使用单独的缓存。

如果您愿意，您也可以考虑按照@Adam 的建议启用 Hibernate 缓存，但我认为它不适用于女士加载字段。

# doxygen - 我可以使用 doxygen 的 @return 命令进行表格布局吗？

> ID：14583855
> 
> 赞同：2
> 
> 时间：2013-01-29T13:17:26.747
> 
> 标签：doxygen

doxygen 命令的输出中是否可以有某种形式的表格布局`@return`？

```
/**
 * @return error code,
 *         @ref E_INSUFFICIENT_BUFFER_SIZE if @c bufsize is too small,
 *         @ref E_INSUFFICIENT_ARRAY_SIZE  if @c arrsize is too small
 */ 
```

在 HTML 输出中显示为一行：

> 错误代码，如果 bufsize 太小，则为 E_INSUFFICIENT_BUFFER_SIZE，如果 arrsize 太小，则为 E_INSUFFICIENT_ARRAY_SIZE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:39:32.307

您的解决方案可能在于使用破折号。

```
/**
 * @return error code,
 *        - @ref E_INSUFFICIENT_BUFFER_SIZE if @c bufsize is too small,
 *        - @ref E_INSUFFICIENT_ARRAY_SIZE  if @c arrsize is too small
 */ 
```

# ruby-on-rails - 回形针样式不受尊重

> ID：14583862
> 
> 赞同：0
> 
> 时间：2013-01-29T13:17:54.247
> 
> 标签：ruby-on-rails, gem, imagemagick, paperclip

我有一个使用 Paperclip 附加文件图片的图片模型。

```
class Picture < ActiveRecord::Base
    [...]
    has_attached_file :photography, styles: { thumb: '115x', gallery: '560x560' }
    [...]
end 
```

与拇指样式对应的文件是完美的，但与画廊样式对应的文件始终为 560px 宽度。我想获得每个边最大为 560 像素的文件。

例如：原始尺寸 1000x800px => 画廊尺寸 560x468 原始尺寸 800x1000px => 画廊尺寸 700x560

回形针调试输出：

```
Started POST "/admin/pictures/create" for 127.0.0.1 at 2013-01-29 13:21:26 +0100
Processing by Admin::PicturesController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3mDW4HeWq3SV/KJ8ez09c+/Y1dNcCkqN+8uUUx5SnGk=", "picture"=>{"realization_id"=>"3",     "photography"=>#<ActionDispatch::Http::UploadedFile:0x007fe984776c10 @original_filename="IFFTS-37-2.jpeg", @content_type="image/jpeg",     @headers="Content-Disposition: form-data; name=\"picture[photography]\"; filename=\"IFFTS-37-2.jpeg\"\r\nContent-Type: image/jpeg\r\n",     @tempfile=#<File:/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/RackMultipart20130129-12408-a9zr3v>>, "name"=>"test", "active"=>"1"},     "_save"=>"Save"}
Command :: identify -format %wx%h '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: identify -format %m '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: identify -format %m '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: convert '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]' -auto-orient -resize "115"     '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja20130129-12408-1boh1t1'
Command :: file -b --mime '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja20130129-12408-1boh1t1'
Command :: identify -format %wx%h '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: identify -format %m '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: identify -format %m '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]'
Command :: convert '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja.jpeg[0]' -auto-orient -resize     "560x560" '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja20130129-12408-fqtxxs'
Command :: file -b --mime '/var/folders/gh/q_r38fpj4qv5t8ymtq713d_w0000gn/T/IFFTS-37-220130129-12408-ssh5ja20130129-12408-fqtxxs' 
```

如果我在终端中运行相同的命令，一切正常：

```
convert picture.jpeg -auto-orient -resize 560x560 picture.jpeg 
```

（Heroku 上的相同问题）

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:49:05.513

我建议您停止使用回形针，因为它很重并使用载波。它很轻。我最初使用回形针，然后切换到载波。部署非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:22:15.110

尝试关注

```
has_attached_file :photography, styles: { thumb: '115x', gallery: '560x560>' } 
```

# android - 跟踪从移动浏览器收到的应用安装

> ID：14583864
> 
> 赞同：0
> 
> 时间：2013-01-29T13:17:57.230
> 
> 标签：android, mobile, google-play, google-analytics-api

我有一个移动网络应用程序（在 Android 浏览器上打开，而不是本机浏览器），它将用户重定向到 Google 的 Play 商店（用于安装应用程序）。我想跟踪应用安装（假设用户打开了 Google Play 的本地应用而不是网络 Google Play）以知道我是该安装的推荐人。我在[这里](https://stackoverflow.com/questions/10986320/android-app-a-wants-to-track-google-play-referral-data-for-android-app-b-install)和[这里](https://developers.google.com/analytics/devguides/collection/android/devguide#general-campaign-tracking)找到了一个解决方案，但他们都在从原生 Android 应用程序中引用 Google play。我们是否有跟踪从移动浏览器引用的应用安装的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:33:23.783

由于您正在使用该应用程序显示网页，因此您可以使用相同的应用程序来获取已安装应用程序的列表：

尝试这个 ：

```
 final PackageManager pm = getPackageManager();
    // get a list of installed apps.
    List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

    for (ApplicationInfo packageInfo : packages) {
        if (pm.getLaunchIntentForPackage(packageInfo.packageName) != null) {
            Log.d(TAG, "Installed package :" + packageInfo.packageName);
            String applicationName = (String) (packageInfo != null ? pm.getApplicationLabel(packageInfo)
                    : "(unknown)");
            Log.d(TAG, "Launch Name :" + applicationName);
        }
    } 
```

因此，在启动播放之前，您可以维护所有存在的应用程序的列表。然后它会返回您的应用程序，您可以再次扫描并检查该应用程序是否已安装。

或者你可以实施

[用于包安装/删除/替换的 Android 接收器示例](http://www.xinotes.org/notes/note/1335/)

# java - 为什么我在 R 和 Java 中得到不同的截距值以进行简单的线性回归？

> ID：14583870
> 
> 赞同：2
> 
> 时间：2013-01-29T13:18:07.883
> 
> 标签：java, r, linear-regression

我有用 R 编写的线性回归代码，我必须在 Java 中做同样的事情。我为此使用了[Apache Commons 数学](http://commons.apache.org/math/apidocs/overview-summary.html)库。我在 R 代码和 Java 代码中使用了相同的数据，但我得到了不同的截距值。我无法弄清楚我在代码中做了什么愚蠢的事情。

**代码：**

```
test_trait <- c( -0.48812477 , 0.33458213, -0.52754476, -0.79863471, -0.68544309, -0.12970239,  0.02355622, -0.31890850,0.34725819 , 0.08108851)

geno_A <- as.factor(c("Sub_0001"=1, "Sub_0002"=0, "Sub_0003"=1, "Sub_0004"=2, "Sub_0005"=0, "Sub_0006"=0, "Sub_0007"=1, "Sub_0008"=0, "Sub_0009"=1, "Sub_0010"=0))

geno_B <- as.factor(c("Sub_0001"=0, "Sub_0002"=0, "Sub_0003"=0, "Sub_0004"=1, "Sub_0005"=1, "Sub_0006"=0, "Sub_0007"=0, "Sub_0008"=0, "Sub_0009"=0, "Sub_0010"=0) )

fit <- lm(test_trait ~ geno_A*geno_B)
fit 
```

**输出**：

```
Call:
lm(formula = test_trait ~ geno_A * geno_B)

Coefficients:
    (Intercept)          geno_A1          geno_A2          geno_B1  
      -0.008235        -0.152979        -0.113192        -0.677208  
geno_A1:geno_B1  geno_A2:geno_B1  
             NA               NA 
```

**Java 代码：**

```
package linearregression;
import org.apache.commons.math3.stat.regression.SimpleRegression;
public class LinearRegression {
    public static void main(String[] args) {

        double[][] x = {{1,0},
                        {0,0},
                        {1,0},
                        {2,1},
                        {0,1},
                        {0,0},
                        {1,0},
                        {0,0},
                        {1,0},
                        {0,0}
        };

        double[]y = { -0.48812477,
                       0.33458213,
                      -0.52754476,
                      -0.79863471,
                      -0.68544309,
                      -0.12970239,
                       0.02355622,
                      -0.31890850,
                       0.34725819,
                       0.08108851
        };
        SimpleRegression regression = new SimpleRegression(true);
        regression.addObservations(x,y);

        System.out.println("Intercept: \t\t"+regression.getIntercept());

    }
} 
```

**Java 输出：**

```
Intercept:      -0.08732359363636362 
```

我将非常感谢您的帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:30:57.427

Java is doing a simple regression, interpreting only the first variable and as numeric

```
> test_trait <- c( -0.48812477 , 0.33458213, -0.52754476, -0.79863471, -0.68544309, -0.12970239,  0.02355622, -0.31890850,0.34725819 , 0.08108851)
> geno_A <- c("Sub_0001"=1, "Sub_0002"=0, "Sub_0003"=1, "Sub_0004"=2, "Sub_0005"=0, "Sub_0006"=0, "Sub_0007"=1, "Sub_0008"=0, "Sub_0009"=1, "Sub_0010"=0)
> fit <- lm(test_trait ~ geno_A)
> fit$coef[1]
(Intercept) 
-0.08732359 
```

# c# - 逐字字符串文字 v 转义序列

> ID：14583874
> 
> 赞同：11
> 
> 时间：2013-01-29T13:18:12.487
> 
> 标签：c#, string, verbatim

C# 编译器或 .NET 运行时处理逐字字符串文字与使用转义序列（即性能）的方式有什么区别，还是只是设计时风格的问题？例如：

```
var pathA = "c:\\somewhere";
var pathB = @"c:\somewhere"; 
```

我想他们的编译是一样的，没关系，只是好奇。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T13:20:33.123

这里的任何区别都严格限于编译器；IL 和运行时没有逐字与转义的概念 - 它只有*字符串*。

至于选择哪个：哪个更方便；p 如果有不寻常的字符，我几乎总是使用逐字字符串文字，因为这样可以非常轻松且直观地使用多行字符串。

作为一个有趣的案例：

```
bool areSame = ReferenceEquals("c:\\somewhere", @"c:\somewhere"); // true 
```

这说明它们是*完全相同*的字符串实例（感谢“实习”）。它们不只是*等价*的；它们是运行时*的相同字符串实例*。因此，它们*不可能*（对于运行时）以任何方式不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:20:31.700

它们完全相同。尝试使用反编译器反编译这两个版本。

在代码中编写它时，这只是为了方便开发人员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:23:11.273

字符串前面的 @ 符号告诉编译器忽略任何嵌入的转义序列。

字符串 "\"" 会产生一个双引号。字符串 "\" 会产生一个反斜杠 字符串 @"\" 会产生两个反斜杠

# javascript - android-javascript：通过添加 javascriptinterface 使用原型在 webview 中注入对象

> ID：14583876
> 
> 赞同：0
> 
> 时间：2013-01-29T13:18:17.073
> 
> 标签：javascript, android, webview

我使用 addJavaScriptInterface 将我的对象“myObj”注入 webview。这里是部分代码

```
private void portalInit() {
        CookieSyncManager.createInstance(this);
        CookieSyncManager.getInstance().startSync();
        wv.getSettings().setJavaScriptEnabled(true);
        wv.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        wv.getSettings().setAllowContentAccess(true);
        wv.setWebChromeClient(new WebChromeClient() {
            @Override
            public boolean onConsoleMessage(ConsoleMessage cm) {
                Log.d("From JavaScript",
                        cm.message() + " -- From line " + cm.lineNumber()
                                + " of " + cm.sourceId());
                return true;
            }
        });

        wv.setWebViewClient(new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        });

        wv.addJavascriptInterface(new myObj(this, wv), "myOBJ"); 
        wv.loadUrl("http://dl.dropbox.com/u/16515769/gradient.html");
        wv.requestFocus(View.FOCUS_DOWN);

    } 
```

而且我有我无法更改的 HTML 页面，其中 onload 做了一些疯狂的事情

```
<script>
function f1(){
    this.do1 = function(par){
        console.log("1: "+par);
    };
    this.do2 = function(num){
        console.log("2: "+num);
    };
}
function f2(){
    this.do3 = function(par){
        console.log("3: "+par);
    };
    this.do4 = function(num){
        console.log("4: "+num);
    };
}
var myobj;
var myobj_e = myOBJ;
f1.prototype = myobj_e;
f2.prototype = new f1();
myobj = new f2();

function keydown(e){
    var key  = e.keyCode || e.which;
    switch(key){
        case 13:
            myobj.Debug("turn it on!!!!");
        break;
        case 27:
            myobj.do1("turn it on!!!!");
        break;
        case 49:
            myobj.do4("fsdfd")
        break;
    }
} 
```

这种构造在我们的硬件设备中工作正常，其中对象注入到真正的 webkit 浏览器中，但在 android webview 中不起作用，并且在 logcat 中访问 myobj.Debug 发布错误（Javascript 错误）

```
Uncaught ReferenceError: NPMethod called on non-NPObject -- From line 36 of http://dl.dropbox.com/u/16515769/gradient.html 
```

注意：如果我调用 javascript myOBJ.Debug("something"); 它工作正常，所以我认为那部分“f1.prototype = myobj_e;” 不工作。

我会很高兴得到一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:21:23.900

所以我找到了解决方法。它不是一个解决方案，但我不能以其他方式做到这一点。

我们无法更改通过网页端的 addJavascriptInterface 添加到 webview 的对象。所以我需要制作自己的对象，它将重新转换对接口的调用。我注入了 javascript onPageStarted 并将对象名称更改为 myOBJ_tmp

```
 wv.setWebViewClient(new WebViewClient() {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
        @Override
        public void onPageStarted (WebView view, String url, Bitmap favicon){
            String script= "javascript:var func_list = ['Debug'];";
                   script+="var myOBJ = {};"
                   script+="func_list.map(function(id){"
                   script+="myOBJ[id]= function() {"
                   script+="try{return myOBJ_tmp[id].apply(myOBJ_tmp, arguments);}"
                   script+="catch(e) { console.log('ERROR: ' + e + ', method ' + id);"
                   script+="return false;}}})"
            view.loadUrl(script);
        }
    }); 
```

希望这会对某人有所帮助。

# sencha-touch-2 - 构建生产后，某些 fireEvent 操作将不会发生

> ID：14583877
> 
> 赞同：0
> 
> 时间：2013-01-29T13:18:20.990
> 
> 标签：sencha-touch-2

我遇到了一个奇怪的问题，即视图中的某些“fireEvent”在我的 sencha 应用程序构建生产后不会起作用。在构建之前，一切正常，动作会按预期进行，但是，在构建生产之后，我发现'this'触发的'fireEvent'是正常的，但变量是不正常的。以下是我的代码。

```
Ext.define('WirelessCity.view.TopMenu', {
    extend:'Ext.Toolbar',
    alias:'widget.topmenu',

    initialize: function(){
        this.callParent(arguments);
                 var topMenu = this;

        var btn = {
            xtype: 'button',
            width: 42,
            margin: '5 0 5 3',
            border: '0',
            style: 'background:url(resources/images/left_btn.png);',
            handler: this.onMarkButtonTap,   // will work
            scope: this
        };

        var search = {
            width: 46,
            margin:'3 5 0 0',
            style:'background:url(resources/images/search_btn.png);border:0;background-repeat:no-repeat;',
            initialize: function(){
                this.element.on({
                    tap: function(){
                        topMenu.fireEvent('searchCmd', topMenu);    // will not work
                    }
                });
            }   
        }

        this.add([btn,  search]);
    },

    config: {
        docked: 'top',
        //flex: 1,
        height: 38,
        padding: 0,
        margin: 0,
        border: 0,
        style: 'background:url(resources/images/top.png)'
    },

    onMarkButtonTap: function(){
        //Ext.Msg.alert('mark');
        this.fireEvent('markCmd', this);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:29:49.803

这是因为您只能在创建新组件时传递配置，而不是函数（如`initialize`）。如果你想覆盖这样的方法，你必须通过扩展另一个类来创建你自己的类（`Ext.Button`在这种情况下）。

但是，对于您的特定用途，您可以`element`在添加侦听器时使用该选项：

```
var search = {
    width: 46,
    margin:'3 5 0 0',
    style:'background:url(resources/images/search_btn.png);border:0;background-repeat:no-repeat;',
    listeners: {
        element: 'element',
        tap: function() {
            topMenu.fireEvent('searchCmd', topMenu);
        }
    }
}; 
```

# java - Java UIManager - 更改组件样式

> ID：14583878
> 
> 赞同：1
> 
> 时间：2013-01-29T13:18:25.577
> 
> 标签：java, swing, uimanager

我想通过使用 UIManager 来更改我的组件样式。

例如：

我单击一个按钮，按钮前景从黑色变为绿色。JCheckbox 也一样.....

在我的示例中，更改仅适用于`Button.gradient`...。我没有更新，`Button.foreground`也没有更新`JCheckbox`！

这是我的 UIManagerClass：

```
 package components;

import java.awt.Color;
import java.util.ArrayList;
import javax.swing.SwingUtilities;

public class OwnUiManager {

    ButtonDemo Bd;

    OwnUiManager(ButtonDemo aThis) {
        Bd = aThis;
    }

    public void setNormal() {
        ArrayList<Object> gradients = new ArrayList();
        gradients.add(0.3);
        gradients.add(0.0);
        gradients.add(new Color(221, 232, 243));
        gradients.add(new Color(255, 255, 255));
        gradients.add(new Color(184, 207, 229));
        javax.swing.UIManager.put("RadioButton.background", Color.PINK);
        javax.swing.UIManager.put("Button.gradient", gradients);
        javax.swing.UIManager.put("Button.foreground", Color.PINK);
        SwingUtilities.updateComponentTreeUI(Bd);
    }

    public void setNightVision() {
        System.out.println("Tes");
        ArrayList<Object> gradients = new ArrayList();
        gradients.add(0.18f);
        gradients.add(0.17f);
        gradients.add(Color.BLACK);
        gradients.add(Color.DARK_GRAY);
        gradients.add(Color.DARK_GRAY);
        javax.swing.UIManager.put("RadioButton.background", Color.GRAY);
        javax.swing.UIManager.put("Button.gradient", gradients);
        javax.swing.UIManager.put("Button.foreground", Color.red);

        SwingUtilities.updateComponentTreeUI(Bd);
    }
} 
```

这里是我的 Buttondemo/Main-Class：

```
package components;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRadioButton;

public class ButtonDemo extends JPanel
        implements ActionListener {

    protected JButton b1,b2;
    private JRadioButton b3;

    public ButtonDemo() {

        b1 = new JButton("ON");
        b1.addActionListener(this);
        add(b1);
        b2 = new JButton("OFF");
        b2.addActionListener(this);
        add(b2);
        //For Testing the Style
        b3=new JRadioButton("Test");
        add(b3);
    }

    public void actionPerformed(ActionEvent e) {
        OwnUiManager test = new OwnUiManager(this);
        if (e.getSource().equals(b1)) {
            test.setNormal();
        } else {
            test.setNightVision();
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("ButtonDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ButtonDemo newContentPane = new ButtonDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:23:41.333

*   `JCheckBox`/`JRadioButton`有`Icon`

*   必须将自己更改`Icon`为具体`JCheckBox`/`JRadioButton`或将其放入`UIManager`，然后申请整个 JVM 实例

*   有关更多信息，必须通过 camickr检查[UIManager 默认值](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)和[键绑定](http://tips4java.wordpress.com/2008/10/10/key-bindings/)

*   您的大部分潜在问题都[在使用 JButton 在 Java 中创建自定义按钮中进行了描述](https://stackoverflow.com/a/5755124/714968)

# xcode - 根据特定顺序读取的核心数据向表中添加列

> ID：14583885
> 
> 赞同：0
> 
> 时间：2013-01-29T13:18:44.423
> 
> 标签：xcode, cocoa, core-data, nstableview

情况：

有两个表，一个主表和一个辅助表。主表连接到核心数据数据库。我已经按照我想要的方式设置了核心数据和主表。一切正常，我很高兴。

现在我必须将列添加到第二个表中。基本上第二个表格视图只有一列（图像和文本表格单元格视图）。我需要为第一个表视图（与核心数据的数组控制器连接的那个）的每一行添加一列作为复选框列，并且该列的标题应该具有存储在排列对象.header 中的值。但这不是它。这些新列应按特定顺序排列：升序，基于第一个表中的arrangedobjects.order 值。

这应该在我点击界面上的更新按钮时执行。

所以问题是：

-如何根据第一个表视图的行数向第二个表视图添加列？

-如何根据第一个表视图中存储在列中的值对列进行排序？

-如何以编程方式将列设置为复选框列？

-如何以编程方式将列标题设置为存储在数组控制器中的值？

所需结果的示例：

表 1（连接到核心数据）

```
 somecolumn | header | order | somecolumn | somecolumn
 ------------------------------------------------------
 text        hd1       3       text         text
 text        hd3       1       text         text
 text        hd4       7       text         text 
```

表 2 的结构：（除第一列之外的所有复选框列，列顺序基于表 1 的“顺序”字段，列标题基于表 1 的“标题”字段）

```
 existingcolumn | hd3 | hd1 | hd4 
```

再次，请尽可能清楚。

谢谢你

最好的祝福

伊戈尔

*我过去已经提出过类似的问题，但是这个问题的内容要多得多，这就是我开始新问题的原因。我在网上搜索并没有找到这个特定问题的答案。还请记住，我是 Objective-c/cocoa 编程的新手，所以请在你的答案中明确。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:19:51.870

**-如何根据第一个表视图的行数向第二个表视图添加列？**

创建动态列。您可以使用`[tableView addTableColumn];`内部循环进行 rows.count

**-如何根据第一个表视图中存储在列中的值对列进行排序？**

Order 的意思是……OrderBy？已排序，您永远不会对 tableview 进行排序，而是对模型数组进行排序。对数组进行排序并填充表格。

**-如何以编程方式将列设置为复选框列？**

对于复选框实现，请在此处找到一个[项目](http://www.keepandshare.com/doc/5632433/table-checkboxtable-zip-2-5-meg?da=y)。

在您想要复选框的列中绘制一个 checkBoxCell。或者您可以以编程方式进行。

我是IB做的。

您需要创建一个数组来存储每个（行数）复选框的状态。

```
- (id)init {
    self = [super init];
    if (self) {

        states=[[NSMutableArray alloc] initWithObjects:@"1", @"0", @"1", nil];
    }
    return self; }

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    NSLog(@"Num of rows---- %ld", [names count]);
    return [names count];
} 
```

检查具有值“检查”的 tableIdentifier。

```
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
    if ([[tableColumn identifier] isEqualTo:@"name"]) {
        return [names objectAtIndex:row];
    }
    else if ([[tableColumn identifier] isEqualTo:@"check"]) {

        return [states objectAtIndex:row];
    }
    else if ([[tableColumn identifier] isEqualTo:@"states"]) {
        return [states objectAtIndex:row];
    }
    return 0;
} 
```

根据开/关更新复选框的值。

```
- (void)tableView:(NSTableView *)tableView setObjectValue:(id)value forTableColumn:(NSTableColumn *)column row:(NSInteger)row {          
    [states replaceObjectAtIndex:row withObject:value];
    [tableView reloadData]; 
} 
```

**-如何以编程方式将列标题设置为存储在数组控制器中的值？**

使用这一类，或者可以使用一行语句：

```
@interface NSTableColumn(SetTitle)

- (void)setTitle:(NSString *)inTitle
{
    [[self headerCell] setStringValue:inTitle] ;
    [[[self tableView] headerView] setNeedsDisplay:YES];
}

@end 
```

编辑：

以编程方式复选框：

```
- (NSCell *)tableView:(NSTableView *)tableView dataCellForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSButtonCell *cell=[[NSButtonCell alloc] init];
    NSString *strDisplayPlaylistName;
    strDisplayPlaylistName=[playListNameArray objectAtIndex:row];
    [cell setTitle:strDisplayPlaylistName];
    [cell setAllowsMixedState:YES];
    [cell setButtonType:NSSwitchButton];
    return cell; 
}

- (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex {          
    NSCell *aCell = [aTableColumn dataCellForRow:rowIndex];
    [aCell setNextState];
    //NSCell *aCell=[aAddedCells objectAtIndex:rowIndex];
    //[aCell setNextState];
} 
```

# android - 操作栏图标不适合其他 android 图标

> ID：14583890
> 
> 赞同：4
> 
> 时间：2013-01-29T13:19:12.160
> 
> 标签：android, android-actionbar, actionbarsherlock

我在做安卓应用，一切都很顺利，但是当我用大图做action bar的时候，android平台不适合action bar的大小，icon显得很大，怎么设置icon的宽高在 android 的操作栏中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:26:44.107

我希望你已经阅读了[Action Bar Icons](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)文档，因为文档已经包含了图标的大小。

![在此处输入图像描述](../Images/5672c7e9dd38e16cd07127fa74e5a86e.png)

无论如何，这是一个可以帮助您生成操作栏图标的 Android [Asset Studio 工具。](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=1&source.space.pad=0&name=example&theme=light)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:50:25.803

我已经通过根据android标准为每个密度制作暗淡文件来解决这个问题，当从服务器接收到图像时，用相应的暗淡值重新调整它们的大小，然后将它们添加到我的操作栏中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:27:16.357

我不确定您为什么*要*在`Action Bar`

操作栏图标（API 级别 11 及以上）的规定尺寸如下：

**ldpi(120dpi)** - 18x18 像素

**mdpi(160dpi)** - 24x24 像素

**hdpi(240dpi)** - 36x36像素

**xhdpi(320dpi)** - 48x48 像素

访问此链接了解更多信息：http: [//developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html](http://developer.android.com/guide/practices/ui_guidelines/icon_design_action_bar.html)

或者，只需使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/icons-actionbar.html#source.space.trim=1&source.space.pad=0&name=example&theme=light)为您创建必要的资源。您所要做的就是选择您想要操作栏图标的图像，然后它会在 ZIP 文件中为您创建它们以供使用。这个是相当节省时间的。

# linux - 获得分段错误的奇怪情况

> ID：14583893
> 
> 赞同：0
> 
> 时间：2013-01-29T13:19:14.500
> 
> 标签：linux, sockets, segmentation-fault

我的一个朋友给了我一个 c 项目，让我在 Linux 中使用套接字进行项目。（tic tac toe）该项目已经有了可执行文件，并且程序运行良好。

当我删除可执行文件并自己编译程序时，我没有收到任何错误，但是程序上存在某种情况（当我向其他玩家挑战游戏时）出现分段错误，并且我得到的原始可执行文件在这种情况下没有错误。

我没有对程序进行任何更改，只是删除了以前的可执行文件并自己编译了程序，我不知道为什么会这样。

理论上有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:55:17.270

当您使用不同版本的编译器、库、实用程序等时，这是一种常见的情况。难怪大型项目（如 Linux 内核）明确定义了您应该使用什么版本的工具来获得预期的结果。首先，尝试使用与您朋友**相同的编译器**再次重新编译，如果这没有帮助，请深入挖掘 - 库、实用程序..

# alfresco - 如何在 Alfresco Share 中向 dashlet 的标题栏添加默认自定义操作

> ID：14583900
> 
> 赞同：1
> 
> 时间：2013-01-29T13:19:52.177
> 
> 标签：alfresco, custom-action, alfresco-share, dashlet

从几天前开始，我一直在努力寻找在默认情况下在每个 dashlet 的标题栏中添加自定义操作的最佳方法。

在这个阶段，我知道这些操作在每个 dashlet 的 webscript 中都设置为一个小部件。例如，在**docsummary.get.js**中：

```
 var dashletTitleBarActions = {
      id : "DashletTitleBarActions",
      name : "Alfresco.widget.DashletTitleBarActions",
      useMessages : false,
      options : {
         actions: [
             {
                cssClass: "help",
                bubbleOnClick:
                {
                   message: msg.get("dashlet.help")
                },
                tooltip: msg.get("dashlet.help.tooltip")
             }
         ]
      }
   };
   model.widgets = [docSummary, dashletResizer, dashletTitleBarActions]; 
```

然后，在呈现页面时实例化小部件。

我已经想出了下一个方法：

1.  每次呈现页面时，在自定义 JS 片段中使用我需要的操作来增加每个小部件实例的“操作”数组。我使用以下技术进行了一些测试但没有成功：http: [//acidmartin.wordpress.com/2012/03/19/getting-instance-names-of-a-javascript-object/](http://acidmartin.wordpress.com/2012/03/19/getting-instance-names-of-a-javascript-object/)

2.  通过添加我的自定义操作来修改 Alfresco.widget.DashletTitleBarActions 的原型。我相信它也不起作用，因为当小部件被实例化时，“动作”对象总是被覆盖，正如您在上面粘贴的代码中看到的那样。

3.  为每个 dashlet 的 webscript 创建一个扩展模块，为每个 Alfresco.widget.DashletTitleBarActions 小部件定义添加自定义操作，就像 Dave Drapper 在他的帖子[http://blogs.alfresco.com/wp/ddraper/2012/05/22中解释的那样/customizing-share-javascript-widget-instantiation-part-1/](http://blogs.alfresco.com/wp/ddraper/2012/05/22/customizing-share-javascript-widget-instantiation-part-1/)

4.  获取每个 dashlet div 容器，并在页面准备好后添加直接操作 DOM 所需的操作。它应该可以工作，但我认为它有点脏且不一致，因此我想避免它。

谁能想象一个更好和可行的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:15:13.013

让我们从向一个现有的 dashlet 添加一个动作开始。正如您在 (3) 中建议的那样，您可以定义一个可扩展性模块来通过拦截和修改其模型来更改 dashlet 的行为。

博客文章和后续文章中很好地介绍了创建可扩展性模块，但这里的技巧是提供一个控制器 JavaScript 扩展来定位`DashletTitleBarActions`小部件并向其添加您的操作，例如

```
if (model.widgets)
{
    for (var i = 0; i < model.widgets.length; i++)
    {
        var widget = model.widgets[i];
        if (widget.id == "DashletTitleBarActions")
        {
            widget.actions.push({...})
        }
    }
} 
```

您在对象文字中添加的内容取决于您的操作是如何实现的。如果您需要一些客户端行为（而不是静态链接），那么您还需要使用 a 绑定它`CustomEvent`- 请参阅 RSS Feed dashlet`org/alfresco/components/dashlets/rssfeed.get.html.ftl`以获取示例。

可扩展性模块的缺点是您需要为每个 dashlet 定义一个显式的扩展 JS 文件。您可以轻松地将上面的代码放在一个中央文件中，然后将其包含在需要它的每个 dashlet 扩展中，例如

```
<import resource="classpath:alfresco/site-webscripts/org/myco/utils/dashlet.utils.js"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:25:39.667

我会在这里走2号路。

此小部件的定义在 share.js 文件 ({share.context}/js/share.js) 中。对于 Alfresco 4.2，DashletTitleBarActions 定义在第 1700 行左右。在小部件的**onReady**处理程序中，有一个处理动作的循环。

```
 // Reverse the order of the arrays so that the first entry is furthest to the left...
        this.options.actions.reverse();
        // Iterate through the array of actions creating a node for each one...
        for (var i = 0; i < this.options.actions.length; i++)
        { 
```

如您所见，它反转了**动作**参数的顺序，然后添加了开始循环动作。因此，根据您希望您的操作是第一个还是最后一个，您可能可以编辑此文件并添加您的自定义操作：

```
myAction = {
"cssClass": "customCSS"
, "tooltip": this.msg("slingshot.messages.generic.tooltip")
, "eventOnClick": ...
...
}
this.options.actions.push(myAction);
// now move on with the rest of the loop
for (...) 
```

当然，这需要覆盖共享自己的 js 文件，而不是扩展它。如果你不能这样做，那么你必须在每个包含 share.js 的页面上包含一个自定义 JS 文件，并确保它在*share.js*之后但在任何小部件准备好之前执行，并覆盖**onReady**小部件本身的方法，以便它执行此操作。

# r - 在ggplot中添加3个三阶多项式方程

> ID：14583901
> 
> 赞同：1
> 
> 时间：2013-01-29T13:19:57.710
> 
> 标签：r, ggplot2, equation

我用 ggplot2 绘制了以下数据，然后为每个组添加了 3 阶多项式线，咨询了帖子：[将 3 阶多项式及其方程添加到 r](https://stackoverflow.com/questions/11949331/adding-a-3rd-order-polynomial-and-its-equation-to-a-ggplot-in-r?rq=1) 数据中的 ggplot：

```
>lai.se1    
    DOS DAS N   LAI sd  se  ci
    D1  31  24  1.5879167   0.42763230  0.08729008  0.18057328
    D1  84  24  4.3241667   0.32478644  0.06629675  0.13714529
    D1  113 24  3.7037500   0.34151596  0.06971165  0.14420954
    D1  132 24  2.9704167   0.33386380  0.06814966  0.14097832
    D1  160 24  0.1879167   0.09868611  0.02014422  0.04167149
    D2  35  24  1.7679167   0.18551876  0.03786886  0.07833770
    D2  82  24  3.7670833   0.38212767  0.07800148  0.16135836
    D2  108 24  3.4104167   0.31431747  0.06415978  0.13272463
    D2  126 24  2.7879167   0.35024189  0.07149283  0.14789418
    D2  146 24  0.1950000   0.08836682  0.01803780  0.03731404
    D3  37  24  1.3179167   0.16378616  0.03343271  0.06916083
    D3  83  24  3.5233333   0.29256982  0.05972057  0.12354140
    D3  94  24  3.1604167   0.28257326  0.05768002  0.11932022
    D3  113 24  2.4587500   0.44131535  0.09008312  0.18635113
    D3  134 24  0.2758333   0.09536733  0.01946677  0.04027009

p<-ggplot(lai.se1, aes(x=DAS, y=LAI, colour=DOS)) + 
  geom_errorbar(aes(ymin=LAI-sd, ymax=LAI+sd), colour ="black", size =.3, width=1,
                position=position_dodge(.9)) +
  geom_point(size=1, shape=21, fill=FALSE)+ theme_bw()
p + stat_smooth(method="lm", se=TRUE, fill=NA,             ## to add polynomial lines
                formula=y ~ poly(x, 3, raw=TRUE)) 
```

阴谋： ![在此处输入图像描述](../Images/9fce6b2497d94e5d2f2566e8bae4eebc.png)

```
## Add equation in the plot
lm_eqn = function(lai.se1){
  m=lm(y ~ poly(x, 3), lai.se1)#3rd degree polynomial
  eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2,
                   list(a = format(coef(m)[1], digits = 2),
                        b = format(coef(m)[2], digits = 2),
                        r2 = format(summary(m)$r.squared, digits = 3)))
  as.character(as.expression(eq))
}

p + annotate("text", x=0.5, y=15000, label=lm_eqn(lai.se1), hjust=0, size=8, 
             family="Times", face="italic", parse=TRUE)

Error:
Error in model.frame.default(formula = y ~ poly(x, 3), data = lai.se1,  : 
  variable lengths differ (found for 'poly(x, 3)') 
```

但是当我尝试使用上述链接帖子中提到的类似函数来放置方程时，它给出了一个可变长度的错误。我不太擅长在 r 中编写新函数，需要您的帮助来解决它。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:04:32.987

您的代码是正确的，除了两件事。

*   首先，函数`lm_eqn`函数不理解什么是`y`和`x`。因此，您必须传递相应的列名，`lai.se1`如下所示：

    ```
    lm_eqn = function(lai.se1){
        m=lm(LAI ~ poly(DAS, 3), lai.se1) #3rd degree polynomial
        eq <- substitute(italic(LAI) == a + b %.% italic(DAS)*","~~italic(r)^2~"="~r2, 
                 list(a = format(coef(m)[1], digits = 2), 
                 b = format(coef(m)[2], digits = 2), 
                 r2 = format(summary(m)$r.squared, digits = 3)))
                 as.character(as.expression(eq))
    } 
    ```

*   2）只是顺序必须颠倒一下（因为`stat_smooth`只是`annotate`将几何图形添加到绘图中。否则，`stat_smooth`输出将被替换`annotate`）：

    ```
    p <- ggplot(lai.se1, aes(x = DAS, y = LAI, colour = DOS))
    p <- p + geom_errorbar(aes(ymin = LAI-sd, ymax = LAI+sd), 
             colour = "black", size = .3, width = 1, 
             position = position_dodge(.9)) 
    p <- p + stat_smooth(method = "lm", se = TRUE, fill = NA, 
             formula = y ~ poly(x, 3, raw = TRUE))   
    p <- p + geom_point(size = 1, shape = 21, fill = FALSE) + theme_bw()
    p + annotate("text", x=0.5, y=7.5, label=lm_eqn(lai.se1), hjust=0, size=8, 
                 family="Times", face="italic", parse=TRUE)
    p 
    ```

**编辑：** OP评论后提出的解决方案。这个怎么样？

```
require(plyr)
lm_eqn = daply(lai.se1, .(DOS), function(w) {
    m = lm(LAI ~ poly(DAS, 3), w)
    eq <- substitute(italic(LAI) == a + b %.% italic(DAS)*","~~italic(r)^2~"="~r2, 
             list(a = format(coef(m)[1], digits = 2), 
             b = format(coef(m)[2], digits = 2), 
             r2 = format(summary(m)$r.squared, digits = 3)))
             as.character(as.expression(eq))
    })

p <- ggplot(lai.se1, aes(x = DAS, y = LAI, colour = DOS))
p <- p + geom_errorbar(aes(ymin = LAI-sd, ymax = LAI+sd), 
         colour = "black", size = .3, width = 1, 
         position = position_dodge(.9)) 
p <- p + stat_smooth(method = "lm", se = TRUE, fill = NA, 
         formula = y ~ poly(x, 3, raw = TRUE))   
p <- p + geom_point(size = 1, shape = 21, fill = FALSE) + theme_bw()
p <- p + annotate("text", x=0.5, y=5.5, label=lm_eqn[1], hjust=0, size=8, 
             family="Times", face="italic", parse=TRUE)
p <- p + annotate("text", x=0.5, y=6.5, label=lm_eqn[2], hjust=0, size=8, 
             family="Times", face="italic", parse=TRUE)
p <- p + annotate("text", x=0.5, y=7.5, label=lm_eqn[3], hjust=0, size=8, 
             family="Times", face="italic", parse=TRUE)
p 
```

基本上，你生成所有方程，然后多次注释（如果你有更多，你可以循环它们......）

![ggplot2_edit2](../Images/fd1b9290feb4bb9566cdf1f3a04fd1f9.png)

# android - 通过 phonegap 和 cordova for Android 播放音频

> ID：14583904
> 
> 赞同：3
> 
> 时间：2013-01-29T13:20:17.350
> 
> 标签：android, html, cordova

我一直在为 android 编写一个测试应用程序而乱七八糟，我在播放音频文件时遇到了问题。我的问题在于，一旦页面加载音频文件，当它不打算播放并且不通过按钮单击播放时

我正在使用cordova的示例来播放音频，但我无法弄清楚为什么音频会立即播放

谢谢

脚本

```
script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
        <script type="text/javascript" charset="utf-8">

        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready
        //
        function onDeviceReady() {
            playAudio("/android_asset/www/audio/audio.mp3");
        }

        // Audio player
        //
        var my_media = null;
        var mediaTimer = null;
    function playAudio(src) {
            if (my_media == null) {
                // Create Media object from src
                my_media = new Media(src, onSuccess, onError);
            } // else play current audio
            // Play audio
            my_media.play();

            // Update my_media position every second
            if (mediaTimer == null) {
                mediaTimer = setInterval(function() {
                    // get my_media position
                    my_media.getCurrentPosition(
                        // success callback
                        function(position) {
                            if (position > -1) {
                                setAudioPosition((position) + " sec");
                            }
                        },
                        // error callback
                        function(e) {
                            console.log("Error getting pos=" + e);
                            setAudioPosition("Error: " + e);
                        }
                    );
                }, 1000);
            }
        }

</script> 
```

HTML 按钮单击

```
<a class="button" onclick="playaudio('/android_asset/www/audio/audio.mp3')";>Play that audio!</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:27:43.970

因为`onDeviceReady()`是监听器回调`addEventListener`。

因此，每当此侦听器实例化您的`onDeviceReady()`方法时，都会自动调用。

从您调用`playAudio()`方法的那个方法开始，这就是您的音频开始自动播放的原因。

从回调函数中删除此`playAudio()`方法调用。`onDeviceReady()`

**编辑：**

改变这个

```
<a class="button" onclick="playaudio('/android_asset/www/audio/audio.mp3')";>Play that audio!</a> 
```

和，

```
<a class="button" onclick="playAudio('/android_asset/www/audio/audio.mp3');">Play that audio!</a> 
```

# android - 自定义布局Android中的图标大小

> ID：14583906
> 
> 赞同：3
> 
> 时间：2013-01-29T13:20:25.813
> 
> 标签：android, xml, icons, android-imageview

我想在自定义标题栏中更改我的应用程序图标的大小。到目前为止，这是我的代码：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_vertical"
android:paddingLeft="5dip"
android:background="#000000">

<ImageView
    android:id="@+id/header"
    android:src="@drawable/ic_launcher"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"/>

</LinearLayout> 
```

我的styles.xml 文件是：

```
 <style name="CustomWindowTitleBackground">
    <item name="android:background">#00000000</item>
    </style>

   <style name="CustomTheme" parent="android:Theme">
    <item name="android:windowTitleSize">30dip</item>

    <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
</style> 
```

这会在标题栏的左侧生成一个图标，但是如何更改图标的大小？我希望图标大一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:53:45.710

也许您应该为您的 ImageView 设置特定的 DP 属性。坚持使用 DP，并且可以在所有设备上正常扩展。像这样：

```
<ImageView
    android:id="@+id/header"
    android:src="@drawable/ic_launcher"
    android:layout_width="48dp"
    android:layout_height="48dp"
    android:adjustViewBounds="true"
    android:scaleType="fitXY"/> 
```

# vba - 将包含宏的工作簿复制到没有宏的工作簿

> ID：14583914
> 
> 赞同：9
> 
> 时间：2013-01-29T13:20:38.300
> 
> 标签：vba, excel

我可以在后台复制包含宏的工作簿（复制到所需位置）。此重复副本也包含相同的宏。我的问题是我不希望这个重复的工作簿有一个宏。谁能告诉怎么做？

先感谢您！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T13:50:54.830

将您的工作簿另存为无宏，即简单地保存为 Excel 工作簿。对于我的 Excel 2007，这是通过以下方式完成的：

```
Application.DisplayAlerts = False
ThisWorkbook.CheckCompatibility = False
ThisWorkbook.SaveAs Filename:="D:\DOCUMENTS\Book1.xlsx", FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False
Application.DisplayAlerts = True 
```

根据需要更正路径和名称。

阅读有关`SaveAs`方法的更多信息：http: [//msdn.microsoft.com/en-us/library/office/ff841185%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff841185%28v=office.14%29.aspx) ...以及可用的文件格式：http: [//msdn.microsoft。 com/en-us/library/office/ff198017%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/ff198017%28v=office.14%29.aspx)

希望对您有所帮助）

# ios - 更改根控制器会导致视图旋转到正确位置

> ID：14583916
> 
> 赞同：0
> 
> 时间：2013-01-29T13:20:40.337
> 
> 标签：ios, objective-c, ipad, user-interface

首先，我想说这个问题并没有解决我的问题：[Orientation problem when I set a RootViewController](https://stackoverflow.com/questions/6532894/orientation-problem-when-i-set-a-rootviewcontroller)

我的 ipad 应用程序只能在横向模式下工作。当我更改根控制器时，新的故事板会正确显示。但是，它以纵向模式出现，然后旋转到正确的方向。如何在更改根控制器之前指定方向或告诉故事板默认以横向显示？在动画之后看到视图的旋转非常难看。

此外，左右景观在项目属性中设置。

这是我更改根视图控制器时的代码。

```
UIStoryboard *editorStoryboard = [UIStoryboard storyboardWithName:@"EditorStoryboard" bundle:nil];
UISplitViewController *editorViewController = [editorStoryboard instantiateInitialViewController];

UINavigationController *navigationController = [editorViewController.viewControllers lastObject];
editorViewController.delegate = (id)navigationController.topViewController;

AppDelegate *appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

[UIView transitionWithView:appDelegate.window duration:0.5 options: UIViewAnimationOptionTransitionFlipFromLeft animations:^{
    appDelegate.window.rootViewController = editorViewController;
} completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:34:14.183

您是否尝试覆盖

PreferredInterfaceOrientationForPresentation

对于新的根视图控制器？像这样的东西：

```
-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
return UIInterfaceOrientationLandscape
} 
```

这来自[iOS 的 View Controller Programming Guide](http://developer.apple.com/library/ios/ipad/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

编辑：好的，尝试摆脱动画怎么样？

# magento - Magento 产品导入错误 - SQLSTATE [23000]：违反完整性约束：1048 列“attribute_id”不能为空

> ID：14583924
> 
> 赞同：3
> 
> 时间：2013-01-29T13:21:02.027
> 
> 标签：magento

我在上传大量 csv 产品时遇到问题。

它通过检查然后导入说：SQLSTATE [23000]：完整性约束违规：1048列'attribute_id'不能为空

完成此操作后，我检查了产品页面，它们都在那里，但似乎不在类别中，不在搜索中显示，即使我手动启用类别也不显示。

有任何想法吗？真的卡住了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-04T16:14:57.057

“_media_attribute_id”中缺少一个值

检查所有列并在缺少的地方插入“88”。

它解决了我的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:44:24.053

无效`attribute_id`与自定义属性相关联。

您需要检查 1) csv 中引用的所有属性字段 - 让我们以**Color**为例 - 已在 Magento *(Catalog > Attributes > Manage Attributes)*中设置为属性。同样，您需要确保已添加并配置为必需的任何自定义属性都在您的 csv.xml 文件中。

Magento 期望的属性最终将取决于您告诉 Magento 用于这些产品的属性集 - 也是您 csv 的一部分。*可以在目录 > 属性 > 管理属性集*下类似地管理属性集

 *然后，您需要确保您尝试导入并在 csv 中提及的所有属性值实际上显示为 Magento 中这些属性的值。例如，如果在 Magento 中属性**Color**的可用值只有*Red*和*Blue* -并且您试图在此标题下导入*Yellow ，它会抛出您提到的错误。*请注意，这些也是区分大小写的。如果Magento期待*Blue ，它将在**blue*上出错。

 ***未出现在搜索中的产品将是一个不相关的问题...**

在您的 csv 中，检查标题“可见性”下是否导入了值“目录，搜索”-可能是您已将它们导入为“目录”或“单独不可见”，这将解释它们没有出现（我假设此时它们已被上传为启用，或者您在搜索之前已手动启用它们！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T13:35:52.127

我有同样的错误。就我而言，某些产品没有填充“_media_attribute_id”字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T17:15:46.613

当我在使用所述不存在的属性导入可配置项目之前没有设置我的属性和属性集时，我收到了同样的错误。

编辑：因此，从 Magento 仪表板创建和配置属性和属性集导致 Magmi 没有抛出此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-21T06:46:18.077

`'88'`我有同样的问题..然后我解决了在`'_media_attribute_id'`列下填充。**

# visual-studio-2010 - 水晶报表异常

> ID：14583925
> 
> 赞同：0
> 
> 时间：2013-01-29T13:21:17.097
> 
> 标签：visual-studio-2010, vb.net-2010, crystal-reports-10

我已经使用 Crystal Reports 10 开发了一个项目并开发了一个可以正常生成 pdf 文件的设置，但是当我在任何其他机器上安装此应用程序并尝试运行 pdf 生成时，我得到了这个异常：

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

```
************** Exception Text **************
System.IO.FileNotFoundException: Could not load file or assembly 'CrystalDecisions.CrystalReports.Engine, Version=10.0.3300.0, Culture=neutral, PublicKeyToken=692fbea5521e1304' or one of its dependencies. The system cannot find the file specified.
File name: 'CrystalDecisions.CrystalReports.Engine, Version=10.0.3300.0, Culture=neutral, PublicKeyToken=692fbea5521e1304'
at WindowsApplication1.frmPaySlip.ShowReportSalaryStatement(DataSet ds, String toadd, String rep)
at WindowsApplication1.frmPaySlip.pdfgenerator(String rep, String toadd)
at WindowsApplication1.frmPaySlip.btnOK_Click(Object sender, EventArgs e)

at System.Windows.Forms.Control.OnClick(EventArgs e)
at System.Windows.Forms.Button.OnClick(EventArgs e)
at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.ButtonBase.WndProc(Message& m)
at System.Windows.Forms.Button.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)

at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

我几乎尝试了我在网上找到的所有可能性，但无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:10:17.150

我解决了这个问题。水晶报告的参考是指其他版本的dll，所以它在机器上工作正常，在其他机器上抛出错误。我清除了所有引用并引用了水晶报告的所有 dll 并重建设置现在可以正常工作

# mpi - 我可以从执行的程序中获取 mpiexec 命令行参数吗？

> ID：14583928
> 
> 赞同：3
> 
> 时间：2013-01-29T13:21:25.243
> 
> 标签：mpi

当我运行 mpiexec 来运行并行程序时，用户可能会向 mpiexec 传递一些选项。是否有 MPI 调用可以从执行的程序中访问此命令行参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:19:40.477

这一切都明确超出了标准，因此 YMMV，但通常不是 - 执行的程序永远不会看到 mpiexec 参数。mpiexec 是一个进程启动器，参数是进程启动器，然后进程启动器只使用可执行文件的命令行参数启动进程。

如果您需要这些参数，您可以编写一个包装脚本，在执行之前将命令行输出到文件中，并让进程读取它们；但是如果有人直接使用 mpiexec 运行，这将失败。

通常应该适用于给定环境但仍然完全非标准并且不能很好地跨环境（例如，linux vs windows）工作的东西是让MPI任务0检查它的shell命令历史并尝试退出的论点。

# php - Magento：如何使用 $imgSize 更改图像大小

> ID：14583930
> 
> 赞同：0
> 
> 时间：2013-01-29T13:21:31.047
> 
> 标签：php, magento, resize, magento-1.7, image-resizing

我正在尝试更改 magento 类别视图中的图像大小，并且正在尝试编辑以下文件。

模板/目录/产品/list.phtml

我想要不同的图像高度和宽度不想要方形图像....

```
enter code here
 <?php 

    $_columnCount = $this->getColumnCount(); 

    if($_columnCount == 4){
        $imgSize = 155;
    }elseif($_columnCount == 3){
        $imgSize = 245;
    }

?> 
```

我使用 3 列计数，所以 245 图像大小在这里很重要，但是如何更改它。我想要不同的高度和不同的宽度。例如使用宽度=200 和高度=300。

提前感谢乌斯曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:25:59.650

这将做到：

```
<?php 
  $_columnCount = $this->getColumnCount(); 
  if( $_columnCount == 4 ) {
    $imgSizeWidth = 200;
    $imgSizeHeight = 300;
  } elseif( $_columnCount == 3 ) {
    $imgSizeWidth = 500;
    $imgSizeHeight = 800;
  }
?>

<img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->keepAspectRatio(false)->resize($imgSizeWidth, $imgSizeHeight); ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /> 
```

# wordpress - 使用 qTranslate 翻译产品类别|JigoShop 的标签标题

> ID：14583933
> 
> 赞同：0
> 
> 时间：2013-01-29T13:21:44.150
> 
> 标签：wordpress, translation, jigoshop

qTranslate 为 JigoShop 中的产品页面创建额外的语言字段，但不像帖子那样为类别|标签产品创建额外的语言字段。

如果我输入菜单项的标题 <!--:en-->title<!--:--><!--:fr-->title<!--:--> 我会得到我想要的翻译。但是当创建一个新的 category|tag 标题时，<!--:--> 会被删除。如何为 cat|tag 标题启用评论标签？

另一种选择是在创建新的类别|标签产品时在同一标题字段中使用 [:en]Title[:fr]Titre。在管理面板上，我看到所选语言的正确文本，但对于最终用户，我看到 [:en]Title[:fr]Titre。

我找到了这个链接[https://wordpress.stackexchange.com/questions/28165/translating-a-custom-taxonomy](https://wordpress.stackexchange.com/questions/28165/translating-a-custom-taxonomy)并根据这个答案[http://www.qianqin.de/qtranslate/forum/viewtopic.php](http://www.qianqin.de/qtranslate/forum/viewtopic.php)？f=4&t=2045&start=0#p7380 我在functions.php中添加

```
add_action('jigoshop_add_form', 'qtrans_modifyTermFormFor');
add_action('jigoshop_edit_form', 'qtrans_modifyTermFormFor'); 
```

不工作。我在 JigoShop 中看不到 category|tags 的额外翻译字段。

基本问题是：

**如何使用 qTranslate 翻译 JigoShop 中的产品类别|标签？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T03:20:12.097

我遇到了非常相似的问题。我在这里找到了解决方案：[http ://www.qianqin.de/qtranslate/forum/viewtopic.php?f=3&t=4064&start=10#p12940](http://www.qianqin.de/qtranslate/forum/viewtopic.php?f=3&t=4064&start=10#p12940)

基本上，您所要做的就是按照上面答案中的建议重命名所有类别，然后添加到您的主题`functions.php`文件中：

```
function p_filter_categories( $categories ) {
  if ( is_array( $categories ) ) {
    foreach ( $categories as $i => $cat ) {
       $categories[ $i ]->name = __( $cat->name );
    }
  } else {
    $categories->name = __( $categories->name );
  }
  return $categories;
}
add_filter( 'get_the_categories', 'p_filter_categories', 10 );
add_filter( 'get_the_terms', 'p_filter_categories', 10 );
add_filter( 'get_term', 'p_filter_categories', 10 ); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:54:07.200

不是理想的解决方案，但有效。

在 JigoShop/编辑产品类别/名称：

```
[:en] Big [:fr] Grand 
```

在functions.php中

```
function translate_q ($echo) {
    if (function_exists('qtrans_split')) {
        $selectLanguage = qtrans_split($echo);
        return $selectLanguage[qtrans_getLanguage()];
    } else {
        return $echo;
    }
} 
```

qtrans_split 和 qtrans_getLanguage 是由 qTranslate 创建的函数。

从 JigoShop 插件目录我打开了 jigoshop_template_functions.php，我从 jigoshop_breadcrumb() 函数中获取了 $echo 变量中的所有回声，最后我得到了：

```
echo function_exists('translate_q') ? translate_q($echo) : $echo; 
```

您将不得不在 JigoShop 的其他地方做同样的事情。我在这里发帖作为一个起点。

# eclipse - 为什么 ANT 没有为构建使用 Eclipse 工作区默认 JRE 峰值

> ID：14583934
> 
> 赞同：0
> 
> 时间：2013-01-29T13:21:49.530
> 
> 标签：eclipse, ant, build, java, workspace

我正在尝试使用 ANT 构建脚本编译我的项目。当我更改 Eclipse 工作区默认 JRE 时，假设 JDK1.6.0_27 32bit ANT 仍在使用 JRE 1.7.0 64bit（这是系统默认值）

可以通过设置“外部工具配置”，选择ANT构建文件并在“JRE”选项卡中选择相关的java来设置ANT构建文件以使用不同的java版本，但这很奇怪，因为在同一个地方有选项使用“在与工作区相同的 JRE 中运行”，这对我不起作用（运行 Eclipse Indigo 3.7）。

当你有一个项目和一个 ANT 脚本时，这可能不是问题，但我有 7 个项目和 7 个构建文件，我需要制作 2 个不同的版本：一个是 Java 1.6 32 位，一个是 Java 1.7 64 位。每次手动选择所需的设置（我几乎每天都在构建版本）成为真正的“屁股痛”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:23:06.090

好的，我自己找到了解决方案。我创建了新的 ANT 构建文件并从它调用到其他 ANT 文件，如下所示：

```
<project name="build-all" default="build.all">

<target name="proj1">
    <ant antfile="build-proj1.xml" target="build" inheritAll="false"/>
</target>

<target name="proj2">
    <ant antfile="build-proj2.xml" target="build" inheritAll="false"/>
</target>

<target name="proj3">
    <ant antfile="build-proj3.xml" target="build" inheritAll="false"/>
</target>

<target name="build.all" depends="proj1,proj2,proj3"/> 
```

现在我可以进入 Eclipse，将这个顶级 ANT 文件的目标更改为所需的 JRE 版本，所有子构建文件都使用父级的设置执行。

# c# - wcf 上传流 - 远程服务器返回意外响应：(400) 错误请求

> ID：14583936
> 
> 赞同：1
> 
> 时间：2013-01-29T13:21:53.103
> 
> 标签：c#, wcf, web-services, iis-7, streaming

我调查了很多类似的问题，但我无法解决我的问题！

我正在尝试将 XML 文件发送到服务器并通过函数以 XML 文件的形式获取响应。

**我能够发送最大 48Kb 的 XML 文件，但不能发送更大的文件！**

在开发我的网络服务和客户端时，我使用[了这个链接](http://www.codeproject.com/Articles/166763/WCF-Streaming-Upload-Download-Files-Over-HTTP)

此外，我对 ISS 设置进行了一些更改，如下所示：

```
cscript adsutil.vbs set w3svc/1/uploadreadaheadsize 10485760

appcmd.exe set config "Default Web Site" -section:system.webServer/serverRuntime /uploadReadAheadSize:"10485760"  /commit:apphost 
```

我`<httpRuntime targetFramework="4.5" maxRequestLength="10485760" useFullyQualifiedRedirectUrl="true" executionTimeout="36000"/>`在服务 web.config 文件中添加了

并`<system.web> <httpRuntime maxRequestLength="10485760"/> </system.web>`在客户端的 app.config 文件中

我在服务的 web.config 文件中实现了绑定和服务配置，如下所示：

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IService" closeTimeout="10:01:00"
      openTimeout="10:01:00" receiveTimeout="10:10:00" sendTimeout="10:01:00"
      maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647"
      transferMode="Streamed" messageEncoding="Text">
      <readerQuotas maxDepth="128" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service name="Service">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IService"
      contract="IService" />
  </service>
</services> 
```

在 App.config 中的客户端配置中：

```
<bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService" closeTimeout="10:01:00"
                openTimeout="10:01:00" receiveTimeout="10:10:00" sendTimeout="10:01:00"
                maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647" transferMode="Streamed"
                messageEncoding="Text">
                <readerQuotas maxDepth="128" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            </binding>
            <binding name="BasicHttpsBinding_IService">
                <security mode="Transport" />
            </binding>
        </basicHttpBinding>
    </bindings> 
```

**您知道为什么我不能发送大小超过 48KB 的文件吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:12:36.253

我在 web.cofing 文件中添加了以下代码，问题就解决了：D

```
 <protocolMapping>
  <add binding="basicHttpBinding" scheme="http" bindingConfiguration="BasicHttpBinding_IService"/>
</protocolMapping> 
```

# php - 如何在插入值时从新表中的一个表中获取值？

> ID：14583937
> 
> 赞同：0
> 
> 时间：2013-01-29T13:21:53.613
> 
> 标签：php, sql, core

如何在插入新值时从数据库中的一个表中获取 ID 并将其添加到另一个表字段

前任-

1) 事件 表- `event_id.sub_id,_category_id,event_name,event_title`（带有值的现有表）

2) 在 with fields 购买`buy_id,event_id,sub_id,user_id,buy_at,qty_share,date,time`

（点击特定事件）实际上我正在尝试这样做，`d event_id,category_id,sub_id`也从事件表中插入并插入新值buy_at，qty_share，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:26:56.593

查找[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。它们可以在插入时触发并提供您想要的功能。

# asp.net-mvc-3 - 如何将图像存储在数据库中，然后在 MVC 中显示

> ID：14583938
> 
> 赞同：-1
> 
> 时间：2013-01-29T13:21:56.613
> 
> 标签：asp.net-mvc-3, sql-server-2008, entity-framework-5

如何将图像存储在数据库中，然后使用 MVC 检索和显示它

我正在使用 MVC3、Entity Framework Database First 和 SQL SERVER 2008

在数据库中，我使用 varbinary(MAX) 作为图像

```
Image   varbinary(MAX)  Checked 
```

此外，我使用

```
[DisplayName("Image")]
    public byte[] Image { get; set; } 
```

在我的地图课上

当我尝试将其保存在我的 Create 操作方法中时

```
public ActionResult Create(MarjaaModel newMarjaa, HttpPostedFileBase uploadFile)
    {
        if (uploadFile != null && uploadFile.ContentLength > 0)
        {                               
            newMarjaa.Image = new byte[uploadFile.ContentLength];
            uploadFile.InputStream.Read(newMarjaa.Image, 0, uploadFile.ContentLength);
        }
        try
        {
            data.submitMarjaa(newMarjaa);
            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

我成功地将图像保存为二进制数据

但请告诉我如何检索此图像并将其显示在我的视图中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:17:09.917

最后我做到了

我的控制器中的一个简单方法

```
public ActionResult ShowImage(long id)
    {
        var model = data.getMarjaa(id);
        return File(model.Image, "image/jpg");
    } 
```

在我看来

```
<td>
       @if (item.Image == null)
       {
       <img width="40" height="40" src="http://www.abc.com/images/staff/no_worry[1].jpg" />
       }
       else
       {
       <img width="40" height="40" src='@Url.Action("ShowImage", "Admin", new { id = item.id })' />
       }
    </td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-22T16:45:28.157

```
<td>
               @{
                   var base64 = Convert.ToBase64String(item.NewsImage);
                   var imgsrc = string.Format("data:image/jpg;base64,{0}", base64);

            }
            <img src='@imgsrc' style="max-width:100px;max-height:100px" />
            </td> 
```

只有这个需要查看图片

# java - JTable - 删除行问题

> ID：14583939
> 
> 赞同：1
> 
> 时间：2013-01-29T13:21:59.293
> 
> 标签：java, swing, file-io, jtable, abstracttablemodel

我有一个应该从文件中读取并显示的表，并且可以从表和文件中删除行。

但不行！我的代码：

```
public class Readuser_A extends AbstractTableModel {

    String[] columns = { "Fname", "Lname", "Gender", "Date", "ID" };
    ArrayList<String> Listdata = new ArrayList<String>();
    String[][] Arraydata;

    public Readuser_A() {
        try {
            FileReader fr = new FileReader("AllUserRecords.txt");
            BufferedReader br = new BufferedReader(fr);
            String line;
            while ((line = br.readLine()) != null) {
                Listdata.add(line);
            }
            br.close();
            Arraydata = new String[Listdata.size()][];
            for (int i = 0; i < Listdata.size(); i++) {
                Arraydata[i] = Listdata.get(i).split("     ");
            }
        } catch (IOException e) {
        }
    }

    @Override
    public String getColumnName(int colu) {
        return columns[colu];

    }

    public int getRowCount() {
        if (null != Arraydata) {
            return Arraydata.length;
        } else {
            return 0;
        }
    }

    public int getColumnCount() {
        return columns.length;
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        return Arraydata[rowIndex][columnIndex];
    }
} 
```

我的第二课：

```
public class ReaduserM_A extends DefaultTableModel {
    final JLabel myLable = new JLabel();

    public ReaduserM_A() {

        final Readuser_A RU = new Readuser_A();
        final JTable mytable = new JTable(RU);
        final JFrame Uframe = new JFrame("All Users");
        JButton DellButton = new JButton("Delete User");

        DellButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (mytable.getSelectedRow() != -1) {
                    removeRow(mytable.getSelectedRow());
                    RU.fireTableRowsDeleted(mytable.getSelectedRow(),
                            mytable.getSelectedRow());
                } else {
                    JOptionPane.showMessageDialog(null, "No Row Selected");
                    return;
                }

                //Now, Delete from text file too
                deleteFromFile();
            }

        });

        JPanel panel = new JPanel();
        JScrollPane sp = new JScrollPane(mytable);
        panel.add(sp);
        panel.add(DellButton);
        panel.add(myLable);
        Uframe.add(panel);
        Uframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Uframe.setSize(570, 500);
        Uframe.setLocation(300, 60);
        Uframe.setVisible(true);
    }

    public void deleteFromFile() {
        File Mf = new File("AllUserRecords.txt");
        File Tf = new File("Uoutput.txt");
        try {
            FileReader Ufr = new FileReader(Mf);
            BufferedReader Ubr = new BufferedReader(Ufr);
            PrintWriter Upw = new PrintWriter(new FileWriter(Tf));
            String Us;
            while ((Us = Ubr.readLine()) != null) {
                String[] Ust = Us.split("     ");
                String Unumber = Ust[4];

                //How find the selected row line by it's ID and delete that row?
            }
            Upw.close();
            Ubr.close();
            Mf.delete();
            Tf.renameTo(Mf);

        } catch (FileNotFoundException e1) {
            myLable.setText("File Not Found");
        } catch (IOException ioe) {
            myLable.setText("IO Error");
            ioe.printStackTrace();
        }
    }

    public static void main(String[] args) {
        new ReaduserM_A();
    }
} 
```

发生此异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 6 >= 0
    at java.util.Vector.removeElementAt(Vector.java:554)
    at javax.swing.table.DefaultTableModel.removeRow(DefaultTableModel.java:463)
    at Array.ReaduserM_A$1.actionPerformed(ReaduserM_A.java:33)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

我认为在第一行，ArrayIndexOutOfBoundsException: 6 >= 0 意味着我选择的表格行（我选择了第六行并单击了删除按钮）你能帮我更多吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:37:46.990

1.  学习 Java 命名约定并遵守它们
2.  永远不要默默地解雇异常
3.  您的代码没有意义：您正在从类中删除一个元素，`ReaduserM_A`但您`JTable`使用另一个表模型，即`Readuser_A`. 您混淆了两种不同的模型。我相信你实际上不应该`DefaultTableModel`扩展`ReaduserM_A`
4.  在`DefaultTableModel`您不需要手动触发事件。对于所有默认 API 方法，它会自动完成。

# javascript - Javascript For loop VS JQuery Each：奇怪的结果

> ID：14583941
> 
> 赞同：6
> 
> 时间：2013-01-29T13:22:12.660
> 
> 标签：javascript, performance

我已经阅读了几个关于这个主题的问题/文章，并在我的解决方案中测试了相同的代码块在`for`大多数情况下比`each`.

然而，我的问题与我的页面中的事实有关，其中我有大约 30 个“循环”，使用的起始结果`each`大约为 5300 毫秒（平均），最大值为 5900 毫秒，最小值为 4800 毫秒。

在我将它们更改为之后`for`，最终结果出人意料地变慢了，比以前的平均值花费更多的时间（并且从未低于 4800 毫秒，甚至高于 6000 毫秒）......但是当我放置`console.time('Time')` `console.timeEnd('Time')`在每个单曲中时“循环块”我得到了预期的结果（FOR 更快）。

***全球“时间”怎么可能比使用`for`慢`each`？***

## *请您指出一些可能的原因吗？*

**PS-**完整的源代码很大，这里的重要部分是唯一的变化是：循环`each`转换为`for`.

用于 For 循环的示例

```
var l = list.length;  
for (var i=0;i<l; i++) {  

} 
```

用于每个循环的示例

```
$.each(list, function (i, item) {

}); 
```

**更新#1**

*   时间是用 来衡量的`console.time('Time')` `console.timeEnd('Time')`。对于全球时间，我只使用一个“计数器”。对于多个计数器，我当然使用不同的名称。
*   在所有这些“过程”中，没有 Ajax 请求，因此时间不同与此无关。

**更新#2**

*   正如@epascarello 所要求的：每个循环的“内部代码”从未改变过，这不应该是原因，甚至当我们以相同的方式（使用`For`or `Each`）访问这些对象时`list[i].SomeProperty`，恕我直言，时间差异永远不能归咎于内部代码（我认为）。

**更新#3**

*   有时我使用不同变量的级联“循环” `i`, `ii`, `iii`.
*   我经常在同一个函数中“重用”变量：

`var l = list1.length; ...; l = list2.length;`

这同样适用于`for`变量 `i`, `ii`, `iii`。

**更新#4**

我注意到 Chrome 中有一个奇怪的行为：以下模式使用重复多次，下降一段时间然后再次上升。

*   DrawGUI: 6159.000ms ***UP AGAIN***
*   DrawGUI：5990.000ms***下降***
*   DrawGUI：5804.000ms***下降***
*   DrawGUI：5416.000ms***下降***
*   DrawGUI：5315.000ms***下降***
*   DrawGUI: 5311.000ms***下降***
*   绘制GUI：5325.000ms
*   DrawGUI：5248.000ms***下降***
*   DrawGUI：5010.000ms***下降***
*   DrawGUI: 4886.000ms***下降***
*   DrawGUI: 5645.000ms ***UP AGAIN ***
*   绘制GUI：5247.000ms
*   绘制GUI：5446.000ms

在所有这些测试期间，我关闭了所有其他 chrome 选项卡和不必要的应用程序。试图最小化不稳定的 CPU 可用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:52:50.457

由于您正在对空循环进行基准测试，因此您为 JIT（即时编译器）提供了足够的优化空间。`each`由于没有副作用，因此可能会一起删除调用。然而，for 循环必须按照`i`定义在*包含*for 循环的范围内而不是在 for 循环内运行。

```
(function() {
    for (var i=0; i<10; i++) {}
    console.log(i); // outputs 10
})(); 
```

对比

```
(function() {
    [0,1,2,3,4,5,6,7,8,9].forEach(function(i) {});
    console.log(i); // i is not declared
})(); 
```

这也是 JSLint/JSHint 抱怨`i`以下代码被声明两次的原因：

```
for (var i=0; i<10; i++) {}
for (var i=0; i<10; i++) {} 
```

# asp.net-mvc - 将带有图像的表格插入 Excel 中的特定单元格

> ID：14583948
> 
> 赞同：0
> 
> 时间：2013-01-29T13:22:23.317
> 
> 标签：asp.net-mvc, excel

我有一个 ASP.NET MVC 网站，我的客户想将数据导出到 Excel 电子表格，但需要使用某个模板。所有数据都是从 MS SQL 数据库中动态提取的。

我已经使用这个线程作为启动点，[打开 xml excel 在占位符中插入实际值](https://stackoverflow.com/questions/5934429/open-xml-excel-insert-actual-value-in-the-placeholder)。在用数据库中的数据替换 excel 模板中的占位符时，它对我来说效果很好。

但是，在将包含数据的完整表格直接放入单元格（即 A10）时，我完全被难住了。此外，表中的每一行在第一列中都有一个图像。

我曾考虑用包含数据的 html 表替换“{table}”占位符，但根据我所做的研究，它看起来行不通。如果我对它不起作用是正确的，请您指出正确的方向吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:38:47.303

我通过[Eric White](http://msdn.microsoft.com/en-us/library/office/hh180830.aspx)在 MSDN 站点上的本教程找到了使用 OpenXML 的解决方案。

希望这可以帮助别人。

# jquery - 无法更改所有字体名称

> ID：14583952
> 
> 赞同：0
> 
> 时间：2013-01-29T13:22:40.697
> 
> 标签：jquery, font-face

字体名称如`Lobster1.4`,`1KreemDNA`等`0LumaxBigCapsDNA`。

```
$('.fmsg_class').css("font-family",font); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:24:34.577

您列出的字体不是系统字体，因此除非用户在其计算机上专门安装了它们，否则它们将无法在网站上使用。

您可以使用一些方法来否定字体的安装，例如 Cufon 或 Google Web Fonts。

# delphi - Delphi 文件访问 - 如果我不关闭文件，为什么会得到不完整的输出？

> ID：14583955
> 
> 赞同：4
> 
> 时间：2013-01-29T13:22:53.093
> 
> 标签：delphi, text-files

以下是一个简单的控制台应用程序，然后生成十组 3 个随机数并将它们打印到控制台窗口和文本文件“Output.txt”。

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;
var
  outputFile: TextFile;
  i: Integer;
  a,b,c: Single;
begin
  try
    Randomize;
    AssignFile(outputFile, 'Output.txt');
    ReWrite(outputFile);
    for i := 0 to 9 do
    begin
      a := Random;
      b := Random;
      c := Random;
      WriteLn(FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) + FloatToStr(c));
      WriteLn(outputFile, FloatToStr(a) + Char(9) + FloatToStr(b) + Char(9) + FloatToStr(c));
    end;
    Close(outputFile);
    Sleep(10000);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

仅当我包含第 26 行时，文本文件才包含与控制台窗口相同的信息：

> 关闭（输出文件）；

如果我从代码中省略了这一点，我希望无论如何都会将相同的数据打印到文本文件中，但文本文件中实际打印的内容对于前 9 行是相同的，然后是不完整的最后一行。

为什么会这样？由于省略了 Close 过程，最后一行通过什么过程仅部分写入？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T13:31:02.193

这是因为文件输出被缓冲造成的。当你关闭文件时，它会导致缓冲区被刷新，剩余的内容被放到磁盘上。

`Flush(outputFile)`另一种方法是在文件之后执行一个`WriteLn`，它会完成同样的事情，但会牺牲性能。

# android - Android 本地通知

> ID：14583958
> 
> 赞同：1
> 
> 时间：2013-01-29T13:23:00.140
> 
> 标签：android, notifications, android-sqlite, android-notifications

我正在做的是实施本地通知。这个想法是日期存储在手机上的 SQL 文件中，当当前日期到达 SQL 文件中日期之前的日期时，我正在查看通过消息通知用户。

我对此进行了大量研究，并发现了与警报和服务相关的内容。我现在真的很困惑，不知道该采取哪个根。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T22:31:20.090

您想要做的是为此使用广播通知的 AlarmManager。您无需在数据库中设置日期并对其进行管理……只需在 AlarmManager 中设置日期即可。我为此创建了一个类，它具有设置警报应该响起的时间以及接收广播然后构建通知的功能。

```
public class MyAlarmManager extends BroadcastReceiver {
private Context mContext;
private AlarmManager mAlarmManager;

public MyAlarmManager() {}

public MyAlarmManager(Context context) {
    mContext = context;
    mAlarmManager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
}

 @Override
 public void onReceive(Context context, Intent intent) {
     PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
     PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "YOUR TAG");
     //Acquire the lock
     wl.acquire();

     //You can do the processing here.      
     buildNotification(context);

     //Release the lock
     wl.release();
 }

public void setReminder(long time) {
    Intent intent = new Intent(mContext, MyAlarmManager.class);
    PendingIntent pi = PendingIntent.getBroadcast(mContext, 0, intent, 0);
    mAlarmManager.set(AlarmManager.RTC_WAKEUP, time, pi); //time is in milliseconds
}

public void buildNotification(Context context) {
    long[] vibrate = { 0, 100, 200, 300 };

    NotificationCompat.Builder mBuilder =
            new NotificationCompat.Builder(context)
            .setSmallIcon(R.drawable.ic_launcher)
            .setContentTitle("My notification")
            .setContentText("Hello World!")
            .setVibrate(vibrate)
            .setAutoCancel(true)
            .setSound(RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION));
    // Creates an explicit intent for an Activity in your app
    Intent resultIntent = new Intent(context, YourLaunchActivity.class);

    // The stack builder object will contain an artificial back stack for the
    // started Activity.
    // This ensures that navigating backward from the Activity leads out of
    // your application to the Home screen.
    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    // Adds the back stack for the Intent (but not the Intent itself)
    stackBuilder.addParentStack(ConferencesActivity.class);
    // Adds the Intent that starts the Activity to the top of the stack
    stackBuilder.addNextIntent(resultIntent);
    PendingIntent resultPendingIntent = stackBuilder.getPendingIntent(0,PendingIntent.FLAG_UPDATE_CURRENT);
    mBuilder.setContentIntent(resultPendingIntent);
    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    // mId allows you to update the notification later on.
    int randomId = 1000303;
    mNotificationManager.notify(randomId, mBuilder.build());
} 
```

}

然后确保将其添加到您的清单中并使用您的应用程序包名称：

```
<receiver android:name="com.example.myapp.MyAlarmManager"></receiver> 
```

希望有帮助！

# spring - getcurrentsession 中的空指针异常

> ID：14583961
> 
> 赞同：4
> 
> 时间：2013-01-29T13:23:09.333
> 
> 标签：spring, hibernate, hibernate-session

我正在尝试将 Hibernate 4.1 与 Spring 3.1.3 集成。

```
//configuration file (beans.xml)

<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/tx 
                 http://www.springframework.org/schema/tx/spring-tx.xsd ">

<bean id="employeeDAObean" class="com.Hib_Spring.EmployeeDAO">

</bean> 

<bean id="sessionFactory"     class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
<property name="dataSource" ref="dataSourceBean"></property>
<property name="annotatedClasses" value="com.Hib_Spring.Employee">  </property>

<property name="hibernateProperties">
    <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
        <prop key="hibernate.show_sql">true</prop>
    </props>
</property>
 </bean>

<bean id="dataSourceBean"    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="org.postgresql.Driver"/>
<property name="url" value="jdbc:postgresql://localhost:5432/newdatabase"/>
<property name="username" value="postgres"/>
<property name="password" value="P@ssword"/>
</bean>

 <tx:annotation-driven transaction-manager="txManager"/>

  <bean id="txManager"  class="org.springframework.orm.hibernate4.HibernateTransactionManager">
<property name="sessionFactory">
     <ref local="sessionFactory"/>
</property>
 </bean>

   </beans> 
```

这是我的模型课

```
import javax.persistence.Column;
import javax.persistence.Entity;
 import javax.persistence.Id;
import javax.persistence.Table;

 @Entity
@Table(name="employee_new")
public class Employee {

    @Id
    @Column(name="ID")
   private int id;
    @Column (name="firstname")
   private String first_name;
    @Column(name="lastname")
   private String last_name;   

   public Employee() {}
   public Employee(int id,String fname, String lname) {
      this.first_name = fname;
      this.last_name = lname;

   }
   public int getId() {
      return id;
   }
   public void setId( int id ) {
      this.id = id;
   }
   public String getFirstName() {
      return first_name;
   }
   public void setFirstName( String first_name ) {
      this.first_name = first_name;
   }
   public String getLastName() {
      return last_name;
   }
   public void setLastName( String last_name ) {
      this.last_name = last_name;
   }

} 
```

以下是我的 DAO 课程

```
 import java.util.List;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class EmployeeDAO {

@Autowired
SessionFactory sessionFactory;

public void createEmployee(int id, String fname, String lname)
{
    Employee emp1 = new Employee(id,fname,lname);
    sessionFactory.getCurrentSession().save(emp1);

}

public List getAllEmployees(){
    return sessionFactory.getCurrentSession().createQuery("from      employee_new").list();

}
} 
```

我的表有三列 ID，名字，姓氏

这是主类（Client.java）

```
import java.util.List;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Client {

public static void main(String arg[]){
    ApplicationContext context =  new ClassPathXmlApplicationContext("beans.xml");
    EmployeeDAO employeedao=context.getBean("employeeDAObean",EmployeeDAO.class);

    System.out.println("Entering data in the database");
    employeedao.createEmployee(101, "aaa", "bbb");
    employeedao.createEmployee(102, "ccc", "ddd");

    System.out.println("Reading the data");

    List employeelist= employeedao.getAllEmployees();

    for(int i=0;i<employeelist.size();i++){
        Employee e = (Employee) employeelist.get(i);
        System.out.println("Emp No "+e.getId());
        System.out.println("FirstName "+e.getFirstName());
        System.out.println("LastName "+e.getLastName());

    }

}
} 
```

现在我的问题是，每当我尝试执行 client.java 时，我都会在

```
sessionFactory.getCurrentSession().save(emp1); 
```

EmployeeDAO 类。

现在我的表是空的，我正在尝试在其中添加一条记录。我不知道我所犯的确切错误是什么。我相信应该有一个愚蠢的。有人可以对此有所了解。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:27:02.970

你有 tx:annotation-driven 但我没有看到任何事务注释。尝试将注释放在 dao 的 createEmployee 方法上，这样就可以了。

# redirect - 负载平衡服务器

> ID：14583966
> 
> 赞同：0
> 
> 时间：2013-01-29T13:23:22.350
> 
> 标签：redirect, load-balancing, com+

我有一个连接到多个 SQL 数据库的 Windows COM+ 服务器。用户会话存储在服务器的内存中。MFC windows 客户端连接到服务器。流量开始变得太高，只有一台服务器无法处理，所以我想再多一台。我打算像这样将所有新用户重定向到新服务器：

my-server -- 老用户 --> my-server1

my-server -- 新用户 --> my-server2

但后来我认为可能有一些负载平衡框架可能会更好。解决问题的最佳方法是什么？使用预制负载均衡器与重定向用户的优缺点是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:32:46.817

我建议为此使用 HAproxy。它同时支持 HTTP 和普通 TCP：

[http://haproxy.1wt.eu/](http://haproxy.1wt.eu/)

# java - jar 在 linux 上不起作用：ClassCastException / javax / 无法转换为

> ID：14583967
> 
> 赞同：1
> 
> 时间：2013-01-29T13:23:24.997
> 
> 标签：java, executable-jar

我正在尝试在 64 位 Fedora 上运行 .jar，它可以在 Windows 上完美运行。

起初我尝试：

```
java -version  
java version "1.6.0_17"  
java -jar myprog_TABS_Dec30.jar 
```

我得到了：

```
Exception in thread "main" java.lang.ClassCastException: javax.swing.tree.DefaultMutableTreeNode cannot be cast to myprog.view.tree.DataObject_Node 
```

然后我检查了：

```
file Analyseries2011_TABS.class
Analyseries2011_TABS.class: compiled Java class data, version 49.0 (Java 1.5) 
```

所以我安装了：jdk-1_5_0_22-linux-amd64-rpm.bin：

```
/usr/java/jdk1.5.0_22/bin/java -jar myprog_TABS_Dec30.jar 
```

结果 ：

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/swing/filechooser/FileNameExtensionFilter 
```

最后，我在 META-INF 目录中查看了 MANIFEST.MF：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.7.0_01-b08 (Oracle Corporation)
Class-Path: 
X-COMMENT: Main-Class will be added automatically by build
Main-Class: myprog.core.main.myprog_TABS 
```

好的，让我们试试：

```
/usr/java/jre1.7.0_01/bin/java -jar myprog_TABS_Dec30.jar 
```

你猜怎么着...

```
Exception in thread "main" java.lang.ClassCastException: javax.swing.tree.DefaultMutableTreeNode cannot be cast to myprog.view.tree.DataObject_Node 
```

我的想法不多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:07:52.000

javax.swing.filechooser。[FileNameExtensionFilter](http://docs.oracle.com/javase/6/docs/api/javax/swing/filechooser/FileNameExtensionFilter.html)是在 Java 6 中引入的，所以难怪你不能用 Java 5.0 编译你的代码。

由于您无权访问源代码，我们将不得不猜测发生了什么。ClassCastException 意味着代码执行以下操作：

```
DefaultMutableTreeNode object1 = doSomething();
DataObject_Node object2 = (DataObject_Node)object1; 
```

但是 DataObject_Node 不是 DefaultMutableTreeNode 的子类，所以你会得到一个 ClassCastException，因为你不能这样做。所以，对我来说，它看起来像是代码中的一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:26:55.623

***一种可能（牵强）的原因：***

如果它在一个操作系统而不是另一个操作系统上运行，则必须记住，java（仍然？）使用本机代码进行压缩/解压缩，因为 jar 是 zip 格式。如今（java 7）java.util.zip 可以处理编码，但谁知道呢。

也许您使用了另一种编码的包或类名。看看罐子里的 7zip。或者想一想，`$`名字中有一个。

# ruby-on-rails - 在 ruby 中将另一个变量添加到实例变量

> ID：14583970
> 
> 赞同：0
> 
> 时间：2013-01-29T13:23:28.783
> 
> 标签：ruby-on-rails, ruby

我有这样的空类对象（哈希）：

```
@art_concret 
```

我需要在这个变量中再添加一些......我尝试：

```
@art_concret = @articles #@articles.find_all{|item| item.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').include?(search.upcase) }
@art_concret = @articles_oem
@art_concret.uniq 
```

还有类似的东西：

```
art = []
art << @articles #@articles.find_all{|item| item.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').include?(search.upcase) }
art << @articles_oem
@art_concret = art.uniq.flatten! #| @articles
@art_concret 
```

如果我需要将@art_concret 推入另外两个（但结构相同）对象，这不起作用？那么如何？

**更新** 例如：

```
@a = {:a => 1}
@b = {:a => 2} 
```

只是如何做到这一点 @c 将有 @a + @b = {{:a => 1}, {:a => 2}} ...只需拆分它们

@c = @a + @b - 一次测试就可以了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:50:48.990

你的意思是你需要合并两个哈希？如果是这种情况，那么只需使用`merge`方法：

```
@a = {:a => 1}
@b = {:b => 2}
@a.merge(@b) 
```

=> {:a=>1, :b=>2}

或者，如果您的哈希具有相似的键，并且您需要对相应的值执行一些操作：

```
@a = {:a => 1}
@b = {:a => 2}
@a.merge(@b)­ { |key,v1,v­2| v1 + v2 } 
```

=> {:a=>3}

# sql - CakePHP 2：在 error.log 中获取完整的 SQL 错误日志

> ID：14583973
> 
> 赞同：3
> 
> 时间：2013-01-29T13:23:31.137
> 
> 标签：sql, cakephp, logging, logfile

我希望能够在 error.log 中记录完整的 SQL 查询，特别是在发生 SQL 错误时。我的调试在 core.php 中设置为 2。

输出如下所示：

```
2013-01-29 19:53:21 Error: SQLSTATE[HY000]: General error: 1364 Field 'street' doesn't have a default value
#0 D:\xampp\htdocs\my_project\lib\Cake\Model\Datasource\DboSource.php(459): PDOStatement->execute(Array)
#1 D:\xampp\htdocs\my_project\lib\Cake\Model\Datasource\DboSource.php(425): DboSource->_execute('INSERT INTO `st...', Array)
#2 D:\xampp\htdocs\my_project\lib\Cake\Model\Datasource\DboSource.php(1007): DboSource->execute('INSERT INTO `st...') 
```

如您所见，SQL 语句只记录了部分，其余的被省略了。

我将 DebugKit 与它结合使用，但即使这样也不会在 DebugKit 窗口中生成完整的 SQL 日志。

我在这里抛出异常并记录 getTraceAsString() 。

任何解决方案将不胜感激。

谢谢你，
m^e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:19:27.080

你可以尝试使用[这个问题](https://stackoverflow.com/questions/4721052/how-to-log-sql-queries-to-a-log-file-with-cakephp)的答案。我知道这不是最好的答案，但在那个特定的问题中，您可以找到[这个插件](https://github.com/cakephp/debug_kit)，它将输出日志文件的完整 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T11:26:28.217

我做了以下（蛋糕2.5.6）

1.  在中创建自定义错误处理程序

> /app/Lib/Error/ErrorHandlerWithSqlLog.php

```
App::uses('ErrorHandler', 'Error');
class ErrorHandlerWithSqlLog{
    public static function handleException(Exception $exception) {
        if ($exception instanceof PDOException && !empty($exception->queryString)) {            
            CakeLog::write(LOG_ERR, "SQL query: ".$exception->queryString);
        }        
        ErrorHandler::handleException($exception);      
    }
} 
```

将其添加到您的引导程序中：

```
require_once(APP . 'Lib' . DS . 'Error' . DS . 'ErrorHandlerWithSqlLog.php'); 
```

并将 core.php 中的默认异常处理程序更改为自定义异常处理程序：

```
Configure::write('Exception', array(
    //'handler' => 'ErrorHandler::handleException',
    'handler' => 'ErrorHandlerWithSqlLog::handleException',
    'renderer' => 'ExceptionRenderer',
    'log' => true
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-24T17:13:49.840

它更容易捕捉异常，

PDOException 有一个名为 queryString 的属性，用于当前查询

您可以在 _execute 方法中的源文件 DboSource.php 中看到

```
try {
$this->MyModel->find(....)
}catch(Exception $_ex) {
var_dump($_ex)
} 
```

我希望对你有帮助

# css - 应用显示：无；到未选择的元素

> ID：14583976
> 
> 赞同：1
> 
> 时间：2013-01-29T13:23:38.463
> 
> 标签：css, css-selectors

我有几个div。其中之一有`class="active"`。我希望所有 div 都被隐藏（`display:none;`），除了`.active`. 选择器应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:26:43.033

你有没有尝试过？

```
div { display: none; }

div.active { display: block; } 
```

PS。我会添加解释。当您在选择器中指定一个类时，它在级联逻辑中具有更高的优先级（因为它具有更高的[特异性](http://www.w3.org/TR/CSS2/cascade.html#specificity)）而不是单个 div（因为单个 div 更通用、更宽）。所以没有必要使用`!important`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:26:31.017

试试[`:not`伪类](https://developer.mozilla.org/en/docs/CSS/%3anot)。

例如：

```
div:not(.active) {display:none;} 
```

正如 Paul 在下面评论的那样，IE8 及以下版本不支持此选择器。但是考虑到您包含`CSS3`标签并特别要求*选择器*，这可能不是问题。有关跨浏览器解决方案，请参阅@mkdotam 答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:27:00.627

```
div:not(.active){
    display: none;
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-29T13:28:24.903

与 css 一起使用`!important`，类似这样：

```
.active {
    display: block !important;
} 
```

例如：http: [//jsfiddle.net/hNLen/](http://jsfiddle.net/hNLen/)

# c++ - 声明在嵌套范围内初始化的未初始化变量

> ID：14583980
> 
> 赞同：0
> 
> 时间：2013-01-29T13:23:42.067
> 
> 标签：c++, c++11

我有以下 C++ 片段

```
double exetime = 0;  
SVDRec R;
{
  timer<double> dummy{exetime};
  R = svdLAS2();
}
std::cout << exetime << std::endl; 
```

其中的构造函数`timer`记录进入范围块的时间，其析构函数（在离开块时调用）计算传递的时间并将其存储在`exetime`. `R`仅在块内部初始化，并且没有默认构造函数，因此代码无法编译。但我不想初始化`R`为一些虚拟值。

这也不能编译：

```
double exetime = 0;  
SVDRec &&tmpR;
{
  timer<double> dummy{exetime};
  tmpR = svdLAS2();
}
SVDRec R = tmpR;
std::cout << exetime << std::endl; 
```

我知道我可以使用指针，但我不想使用动态分配或 std::unique_ptr。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:26:27.393

你可以试试：

```
double exetime = 0;  
SVDRec R = [&exetime]()
{
  timer<double> dummy{exetime};
  return svdLAS2();
}();

std::cout << exetime << std::endl; 
```

# c# - PropertyDescriptor.AddValueChanged 处理程序不会使用空或空格字符串执行

> ID：14583982
> 
> 赞同：0
> 
> 时间：2013-01-29T13:23:44.440
> 
> 标签：c#, wpf, binding, propertydescriptor

我正在使用 propertyDescriptor 在实例的每个属性上附加一个处理程序。当这些属性之一发生更改时，将调用处理程序方法，除非在一种情况下（这是问题所在）：当值是字符串并且此字符串为空或仅包含空格时。

我必须执行这种情况来更新我的**Save**按钮的**IsEnabled**属性。

 **```
foreach (PropertyDescriptor propertyDescriptor in TypeDescriptor.GetProperties(this.MyInstance))
{
    propertyDescriptor.RemoveValueChanged(this.MyInstance, this.MyMethod);
} 
```

例如，当我编辑用户的名字并删除他的名字时，我的保存按钮必须被禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:17:31.557

我发现了一种新的行为。

所有属性都与 WPF 应用程序中的绑定一起使用。仅当 UpdateSourceTrigger 属性设置为 LostFocus 时才调用 MyMethod。使用 PropertyChanged 值，它不会。对于某些属性，我必须使用 PropertyChanged 值：例如动态 ValidationRules。**

# linux - 同一服务器上的多个 NIC 上的多个 IP 配置

> ID：14583984
> 
> 赞同：2
> 
> 时间：2013-01-29T13:23:48.547
> 
> 标签：linux, centos

在我的服务器中，我有两个 NIC（比如 eth0 和 eth1）。我在 centOS 6.3 中为两个网卡配置了单独的 IP，如下所示： **ifcfg-eth0**

```
    类型=以太网
    引导程序=无
    IPADDR=10.1.1.1
    前缀=27
    网关=10.1.1.10
    DNS1=10.1.1.11
    DEFROUTE=是
    IPV4_FAILURE_FATAL=是
    IPV6INIT=否
    NAME="自动 eth0"
    UUID=4aa88f11-51ed-46de-9c54-1dd2bbbf286a
    开机=是
    HWADDR=1c:df:0f:1d:73:23
    LAST_CONNECT=1359432400
    网络掩码=XXXX
    设备=eth0
    USERCTL=否

```

**ifcfg-eth1**

```
TYPE=Ethernet
BOOTPROTO=none
IPADDR=10.1.1.2
PREFIX=28
GATEWAY=10.1.1.10
DNS1=10.1.1.11
DEFROUTE=yes
IPV4_FAILURE_FATAL=yes
IPV6INIT=no
NAME="Auto eth1"
UUID=4aa88f11-51ed-46de-9c54-1dd2bbbf286a
ONBOOT=yes
HWADDR=1c:df:0f:1d:73:23
LAST_CONNECT=1359432400
NETMASK=X.X.X.X
DEVICE=eth1
USERCTL=no 
```

在这里，我无法一次 ping 两个 IP。只有一个在工作。甚至，“ifconfig”正在显示预期的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-09T13:07:51.077

自 CentOS/RHEL6 起（较新​​的内核），rp_filter 设置发生了变化。有关完整说明，请点击此链接：

[http://z-issue.com/wp/linux-rhel-6-centos-6-two-nics-in-the-same-subnet-but-secondary-doesnt-ping/](http://z-issue.com/wp/linux-rhel-6-centos-6-two-nics-in-the-same-subnet-but-secondary-doesnt-ping/)

简而言之，有两种选择：

1）编辑文件“/etc/sysctl.conf”

# 在以下行中将值从 1 更改为 2：

```
net.ipv4.conf.default.rp_filter = 1 
```

# 添加这一行：

```
net.ipv4.conf.all.rp_filter = 2 
```

编辑后，它应该如下所示：

```
net.ipv4.conf.default.rp_filter = 2
net.ipv4.conf.all.rp_filter = 2 
```

通过键入重新加载配置

```
sysctl -p 
```

现在您应该能够 ping 两个 IP

2）第二种选择是使用绑定，但它可能需要您的交换机端配置。我在这里使用 802.3ad 负载平衡模式接口 eth1 和 eth2 编写示例配置

/etc/sysconfig/network-scripts/ifcfg-bond0

```
DEVICE=bond0
USERCTL=no
ONBOOT=yes
BOOTPROTO=none
IPADDR=192.168.10.52
NETMASK=255.255.255.0
NETWORK=192.168.10.0
GATEWAY=192.168.10.1
BONDING_OPTS="miimon=100 mode=4" 
```

/etc/sysconfig/network-scripts/ifcfg-bond0:0

```
DEVICE=bond0:0
USERCTL=no
ONBOOT=yes
IPADDR=192.168.10.53
NETMASK=255.255.255.0
NETWORK=192.168.10.0
GATEWAY=192.168.10.1
BONDING_OPTS="miimon=100 mode=4" 
```

/etc/sysconfig/network-scripts/ifcfg-eth1

```
DEVICE=eth1
ONBOOT=yes
BOOTPROTO=none
MASTER=bond0
SLAVE=yes
USERCTL=no 
```

/etc/sysconfig/network-scripts/ifcfg-eth2

```
DEVICE=eth2
ONBOOT=yes
BOOTPROTO=none
MASTER=bond0
SLAVE=yes
USERCTL=no 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:30:52.790

您已将它们设置在不同的子网上。因此，您必须设置路由以在不同网络之间进行路由。

检查你`netstat -nr`的路由表是什么样子的。

# php - 在 foreach 中返回仅显示第一个值

> ID：14583987
> 
> 赞同：0
> 
> 时间：2013-01-29T13:24:05.907
> 
> 标签：php, function, foreach, return

我有问题。在我的函数中，return 仅显示来自服务器的第一个玩家。我想展示服务器中的所有玩家，但我无法正常工作。这是我的代码：

```
function players() {
    require_once "inc/SampQueryAPI.php";
    $query = new SampQueryAPI('uh1.ownserv.pl', 25052); // Zmień dane obok! //
    if($query->isOnline())
    {
        $aInformation = $query->getInfo();
        $aServerRules = $query->getRules();
        $aPlayers = $query->getDetailedPlayers();
        if(!is_array($aPlayers) || count($aPlayers) == 0)
        {
            return 'Brak graczy online';
        }
        else
        {
            foreach($aPlayers as $sValue)   
            {
                $playerid = $sValue['playerid'];
                $playername = htmlentities($sValue['nickname']);
                $playerscore = $sValue['score'];
                $playerping = $sValue['ping'];
                return '<li>'.$playername.' (ID: '.$playerid.'), Punkty ('.$playerscore.'), Ping ('.$playerping.')</li>';
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T13:26:31.507

您正在从循环中返回。

*相反，您应该连接每次迭代的结果，然后在循环外*返回连接的字符串。

例如

```
$result = "";
foreach($aPlayers as $sValue) {
   # add to $result...
}
return $result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T13:27:01.183

```
function players() {

    require_once "inc/SampQueryAPI.php";
    $query = new SampQueryAPI('uh1.ownserv.pl', 25052); // Zmień dane obok! //
    if($query->isOnline())
    {
         $aInformation = $query->getInfo();
         $aServerRules = $query->getRules();
         $aPlayers = $query->getDetailedPlayers();
         if(!is_array($aPlayers) || count($aPlayers) == 0)
         {
             return 'Brak graczy online';
         }
         else
         {
             $ret = '';
             foreach($aPlayers as $sValue)   
             {
                 $playerid = $sValue['playerid'];
                 $playername = htmlentities($sValue['nickname']);
                 $playerscore = $sValue['score'];
                 $playerping = $sValue['ping'];
                 $ret .=    '<li>'.$playername.' (ID: '.$playerid.'), Punkty ('.$playerscore.'), Ping ('.$playerping.')</li>'; 
             }
             return $ret;
          }
      }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:26:49.487

在一个函数中，你只能返回**一个**值。

尝试创建一个玩家列表，并在所有记录都添加到列表中后返回该列表。在您的情况下，玩家列表将产生一系列玩家

# javascript - 用阿拉伯字母获取`document.location.href`

> ID：14583988
> 
> 赞同：5
> 
> 时间：2013-01-29T13:24:08.747
> 
> 标签：javascript, html, href, encode, arabic

问题是我没有得到`document.location.href`阿拉伯字母。

我明白了

`/cat/%D9%81%D8%B9%D8%A7%D9%84%D9%8A%D8%A7%D8%AA`

代替：

`/cat/فعاليات`

我正在尝试获取页面网址并将其与菜单项列表进行比较，以便确定要选择的项目。

我正在尝试这个：

```
var url = document.location.href;

if(url.indexOf('blablabla') > 0 )
{
  ...
} 
```

而不是 'blablabla' 会有一些阿拉伯语文本。

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:33:07.270

你必须使用`decodeURIComponent(url);`

**检查这个小提琴：http:** [//jsfiddle.net/7spmF/](http://jsfiddle.net/7spmF/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T13:28:34.547

您可以使用[decodeURIComponent](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/decodeURIComponent?redirectlocale=en-US&redirectslug=JavaScript/Reference/Global_Functions/decodeURIComponent)解码以前由 encodeURIComponent 或类似例程创建的统一资源标识符 (URI) 组件。

# java - 我不想在 Eclipse 的 servlet 中使用 @WebServlet

> ID：14583996
> 
> 赞同：0
> 
> 时间：2013-01-29T13:24:39.700
> 
> 标签：java, eclipse, servlets

我正在使用 Eclipse 版本：Juno Service Release 1。当我创建 servlet 时，是的，有一个 web.xml 文件。但它不会自动映射 servlet url。也可以使用 InitParam。

我知道这是因为 @WebServlet 注释。

我可以做些什么来使 Eclipse 映射 web.xml 文件中的 url，而不是使用 @WebServlet 注释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:27:23.857

*在项目属性的Project Facets*部分中将*Dynamic Web Module*版本放回 2.5 。