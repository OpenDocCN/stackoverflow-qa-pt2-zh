# StackOverflow 问答 12767000-12767999

# java - 如何在java中绘制三点角的弧

> ID：12767001
> 
> 赞同：0
> 
> 时间：2012-10-07T07:39:02.897
> 
> 标签：java, graphics, shape, shapes

在java中，我有三个点表示两条线，形成一个角度。现在我必须创建距离公共点约 10 像素的角弧。在圆弧上显示角度。我能够计算角度，但如何绘制弧线并在弧线上显示角度。请告诉我一些代码视图或链接，我可以在其中找到解决方案。代码片段如下。

```
公共无效paintComponent（图形g）{
        图形2D g2=（图形2D）g；

        点 p1=新点（100,100）；
        点 p2=新点（200,100）；
        点 p3=新点（100,0）；

        Line2D line1=新 Line2D.Double(p1, p2);
        Line2D line2=new Line2D.Double(p1, p3);
        g2.draw(line1);
        g2.draw(line2);
        双角=getAngle(line1,line2);
        System.out.println(角度);
        //g2.drawArc(110, 100, 20, 20, 100, 30);

    }

    public double getAngle(Line2D line1,Line2D line2){

        双角1=Math.atan2(line1.getY1()-line1.getY2(), line1.getX1()-line1.getX2());
        双角2=Math.atan2(line2.getY1()-line2.getY2(), line2.getX1()-line2.getX2());

        返回 Math.toDegrees(angle1-angle2);
    }

```

我不知道如何使用 DrawArc 来绘制我想要的精确弧线并在其上放置角度。

感谢和问候。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T17:42:39.440

从文档中drawArc的论点是：

int x, int y, int width, int height, int startAngle, int arcAngle

x 和 y 是您的共同点（p1），您的宽度和高度可能都是 10（绘制半径为 10 像素的圆弧）

您计算的角度是最后一个参数 (arcAngle)，它测量弧在逆时针方向的扫描。因此，您需要计算的最后一部分是起始角度，可能是您的角度 1 或角度 2（在这种情况下，0 是正 x 轴或 3 点钟位置）。

请记住，正如所写，您有时会绘制 > 180 度的弧，如果您想始终找到两条线之间的最小角度，则需要更多逻辑。

至于文本，您可以使用 drawString 并使用一些三角函数计算 x 和 y，其中一半的扫描角和所需的半径。尽管为了获得最佳位置，您可能需要弄清楚您正在绘制哪个象限并从那里进行调整。

# c# - 如何获取由 regsvr32 工具注册的所有非托管 dll 的列表？

> ID：12767002
> 
> 赞同：16
> 
> 时间：2012-10-07T07:39:45.240
> 
> 标签：c#, visual-c++

我使用 regsvr32 注册和注销非托管 DLL，以便在我的 C# 应用程序中使用它。但是我在 regsvr32 工具中没有看到列出所有已注册 DLL 的任何参数，那么如何获取所有已注册 DLL 的列表呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T07:54:46.297

要查看所有已注册的 DLL，您可以使用以下免费实用程序：

1.  [RegDllView](http://www.nirsoft.net/utils/registered_dll_view.html)是一个查看系统上注册的 dll/ocx/exe 文件的工具，也可以从资源管理器中注册 dll 文件。

2.  [ListDLLs](http://technet.microsoft.com/en-us/sysinternals/bb896656)是另一个报告加载到进程中的 DLL 的工具。您可以使用它列出加载​​到所有进程、特定进程中的所有 DLL，或列出加载了特定 DLL 的进程。ListDLL 还可以显示 DLL 的完整版本信息，包括其数字签名，并可用于扫描进程以查找未签名的 DLL。

3.  最后，您还可以参考CodeProject.com 上的这篇[C# 中的 Dll Profiler](http://www.codeproject.com/Articles/3980/Dll-Profiler-in-C)文章。 **DLL 分析器**用于列出当前在您的机器中加载的所有 DLL，包括它们的加载位置及其版本号、大小、修改日期、产品名称和产品版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T08:04:37.113

您应该能够使用[注册表](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey%28v=vs.100%29.aspx)[来](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691424%28v=vs.85%29.aspx)读取. `Computer\HKEY_CLASSES_ROOT\Wow6432Nodes\CLSID`还没有查看 32 位 Windows 以了解它们在哪里`CLSIDs`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-04T21:29:54.400

```
static void Main(string[] args)
{
    var parent = Registry.ClassesRoot.OpenSubKey("CLSID");
    var subKeys = parent.GetSubKeyNames();
    foreach (var subKey in subKeys)
    {
        var sub = parent.OpenSubKey(subKey);
        if (sub != null)
        {
            var inProc = sub.OpenSubKey("InProcServer32");
            if (inProc != null)
            {
                var val = inProc.GetValue(null);
                if (val != null)
                {
                    var name = val.ToString();
                    if (!string.IsNullOrWhiteSpace(name))
                        Console.WriteLine(name);
                }
            }
        }
    }
} 
```

# javascript - ember.js 查看文档中的示例

> ID：12767008
> 
> 赞同：3
> 
> 时间：2012-10-07T07:40:04.923
> 
> 标签：javascript, model-view-controller, view, ember.js

我是 Ember 的新手，我尝试执行文档中的所有示例。但我发现，其中一些不起作用。
例如，在“构建视图层次结构”部分。我尝试执行第一个示例，但没有看到 InfoView 数据 ( [jsFiddle](http://jsfiddle.net/LMnet/EX8HY/) )。但是，如果我在数据之前添加“视图”，如下所示：

```
<b>Posts:</b> {{view.posts}}
<br>
<b>Hobbies:</b> {{view.hobbies}} 
```

所有模板看起来都很好（[jsFiddle](http://jsfiddle.net/LMnet/EX8HY/5/)）。那么，这个“观点”这个词的意义何在？在 UserView 模板中，我没有在数据前写任何前缀，它可以正常工作。

# javascript - 为什么这段代码循环了 16 次而不是 8 次？

> ID：12767010
> 
> 赞同：1
> 
> 时间：2012-10-07T07:40:40.947
> 
> 标签：javascript

```
 var tops = 5;

while (tops > 0){
    for (var spins = 0; spins < 3; spins++) {
        alert("Top is spinning!");
    }
    tops = tops - 1;
} 
```

var = 每次 var = tops 减少 1 直到达到 1 时，var = spins 循环不是 2 次吗？该代码不会警告8次吗？我不知道为什么我收到了 16 次警报。

提前致谢。

我真的很抱歉发布这个新手问题。我目前正在学习 JavaScript 的基础知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T07:43:52.253

您应该收到 15 次警报，而不是 8 次或 16 次。

的值为 5、4、3、2、1 `tops`。对于这些值中的每一个，`spins`将设置为 0、1 和 2。

5（顶部值）X 3（旋转值）= 15

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:47:06.230

您可以将变量的值（顶部、旋转）打印到屏幕上。然后你会看到它循环了 15 次，你就会明白为什么了。

这是适合您的 jsFiddle：http: [//jsfiddle.net/66UuT/](http://jsfiddle.net/66UuT/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T07:49:01.683

当你开始循环时，你`spins`循环了 3 次而不是 2 次`0`

# arrays - nxn 矩阵查找彼此相邻的单元格

> ID：12767011
> 
> 赞同：0
> 
> 时间：2012-10-07T07:40:49.247
> 
> 标签：arrays, matrix

所以有一个 nxn 矩阵，它的单元格从 1 到 n^2 编号。为方便起见，让我们选择 4x4。

它的细胞将是

```
1 2 3 4

5 6 7 8

9 10 11 12

13 14 15 16 
```

现在我需要找到相邻的单元格...对于 1，它将是 2 和 5，即水平和垂直连接，对于 6，它将是 2、5、7、10

所以这里的邻接矩阵将是 16x16 并且 1 的行将是 0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0

我已经为它编写了下面的代码，但是在某些行中我得到了额外的 1……似乎 if 条件在某些地方变得混乱了。由于将矩阵转换为其平方的大小，因此有 8 种不同的类型。

```
#include<stdio.h>
int main()
{
int n;
printf("Enter order of matrix:\n");
scanf("%d", &n);
int arr[n][n];

int i, j;
for (i=0;i<n;i++)
    for (j=0;j<n;j++)
        arr[i][j]=0;    

int size=n*n;

int array[size][size];
int index[n][n];

for (i=0;i<size;i++)
{
    for (j=0;j<size;j++)
    {
        array[i][j]=0;
    }
}

//Getting adjacency details of maze or in this case array. The new array will be n2xn2 in size

int adjIndex;
for (i=0;i<n;i++)
{
    for (j=0;j<n;j++)
    {

        adjIndex=((i+1)*n-(n-(j+1)));
        index[i][j]=adjIndex;
    }
}

for (i=0;i<n;i++)
{
    for (j=0;j<n;j++)
    {

        printf(" %d ", index[i][j]);
    }
    printf("\n");
}

for (i=0;i<n;i++)
{
for (j=0;j<n;j++)
{

    if (i==0 && j==0)
    {

        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;

    }

    if (i==0 && j>0 && j<n-1)
    {           
        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;    

    }

    if (i==0 && j==n-1)
    {
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;

    }

    if (j==0 && i > 0 && i < n-1)
    {   
        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;
        array[index[i][j]-1][index[i][j]-n-1]=1;

    }

    if (j==0 && i==n-1)
    {
        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]-n-1]=1;

    }

    if (i==n-1 && j>0 && j<n-1)
    {
        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]-n-1]=1;

    }

    if (i==n-1 && j==n-1)
    {
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]-n-1]=1;

    }

    if (j==n-1 && i>0 && i<n-1)
    {
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;
        array[index[i][j]-1][index[i][j]-n-1]=1;

    }

    else
    {
        array[index[i][j]-1][index[i][j]-n-1]=1;
        array[index[i][j]-1][index[i][j]-2]=1;
        array[index[i][j]-1][index[i][j]]=1;
        array[index[i][j]-1][index[i][j]+n-1]=1;

    }

}
}

for (i=0;i<size;i++)
{
for (j=0;j<size;j++)
    {
        printf(" %d ", array[i][j]);
    }
printf("\n");
}       

} 
```

我相信这是微不足道的。这是制作 nxn 阵列的方法的一小部分，其中一些单元被阻塞并找到两个单元之间的路径。我有用于该部分的代码，但是这个更简单的代码被证明很麻烦：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:51:32.233

提醒各位。这是一件非常微不足道的事情。在一组 if 条件中，它最后一直输入 else 一个，因此额外的不必要的单元格被设置为 1。我通过使用一个在赋值后设置为 1 的变量来修复它，如果它没有设置为 1 , 然后执行 else。现在很好。谢谢 ：）

# android - 如何让安卓应用加载更快？

> ID：12767014
> 
> 赞同：0
> 
> 时间：2012-10-07T07:40:54.720
> 
> 标签：android, android-activity, load, splash-screen

我为 android 设计了一个应用程序，其中我在主要活动启动之前显示了一个启动屏幕，但该应用程序需要 5-7 秒才能在低端设备上启动。我想将时间减少到尽可能低。我一直在努力减少要做的事情，`onCreate()`但现在我不能再从中删除任何东西了。我正在粘贴用于显示启动画面的代码和 MainActivity 中的代码。请帮助我减少应用程序的启动时间。

**飞溅.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_splash);
    txtLoad = (TextView) findViewById(R.id.txtLoading);
    txtLoad.setText("v1.0");

    new Thread() {
        public void run() {
            try {
                sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                finish();
                Intent intent = new Intent(SplashActivity.this,MainActivity.class);
                startActivity(intent);
            }
        }
    }.start();
} 
```

**MainActivity.java**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_main);
    editType1UserName = (EditText) findViewById(R.id.editTextType1UserName);
    editType1Password = (EditText) findViewById(R.id.editTextType1Password);
    editType2UserName = (EditText) findViewById(R.id.editTextType2UserName);
    editType2Password = (EditText) findViewById(R.id.editTextType2Password);
    editType3UserName = (EditText) findViewById(R.id.editTextType3UserName);
    editType3Password = (EditText) findViewById(R.id.editTextType3Password);
    editType4UserName = (EditText) findViewById(R.id.editTextType4UserName);
    editType4Password = (EditText) findViewById(R.id.editTextType4Password);
    mTxtPhoneNo = (AutoCompleteTextView) findViewById(R.id.mmWhoNo);
    mTxtPhoneNo.setThreshold(1);
    editText = (EditText) findViewById(R.id.editTextMessage);
    spinner1 = (Spinner) findViewById(R.id.spinnerGateway);
    btnsend = (Button) findViewById(R.id.btnSend);
    btnContact = (Button) findViewById(R.id.btnContact);
    btnsend.setOnClickListener((OnClickListener) this);
    btnContact.setOnClickListener((OnClickListener) this);
    mPeopleList = new ArrayList<Map<String, String>>();
    PopulatePeopleList();
    mAdapter = new SimpleAdapter(this, mPeopleList, R.layout.custcontview,
            new String[] { "Name", "Phone", "Type" }, new int[] {
                    R.id.ccontName, R.id.ccontNo, R.id.ccontType });
    mTxtPhoneNo.setAdapter(mAdapter);
    mTxtPhoneNo.setOnItemClickListener((OnItemClickListener) this);
    readPerson();
    Panel panel;
    topPanel = panel = (Panel) findViewById(R.id.mytopPanel);
    panel.setOnPanelListener((OnPanelListener) this);
    panel.setInterpolator(new BounceInterpolator(Type.OUT));
    getLoginDetails();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:49:30.847

速度变慢的原因是您很可能在手机上查询联系人提供程序，从这些查询中提取一些数据，将它们放入`mPeopleList`，然后将其设置为您的`SimpleAdapter`. 因此，您的活动的`onCreate`方法一直等到`PopulatePeopleList()`完成其工作。我不知道您如何查询该联系人提供者，但看看您是否无法调整您的代码以使用 a [`CursorLoader`](http://developer.android.com/reference/android/content/CursorLoader.html)（通过兼容性包在较旧的 android 版本中可用）。这意味着您将不得不切换到`Cursor`基于适配器的适配器，可能会根据您的代码进行其他更改。

如果您仍然想使用非基于的`SimpleAdapter`，您需要覆盖它，它们实现您自己的`AsyncTaskLoader`（通过兼容性包在较旧的 android 版本中再次可用）：

```
public class ContactsDataLoader extends
        AsyncTaskLoader<ArrayList<Map<String, String>>> {

    public ContactsDataLoader(Context context) {
        super(context);     
    }

    @Override
    public ArrayList<Map<String, String>> loadInBackground() {
        // here do what you do in the PopulatePeopleList() method
        // this will be done in another thread so the activity will initially
        // start empty(set an empty mPeoples list to the SimpleAdapter) and as
        // this loader finishes its job you'll have the list filled with the
        // data that is returned here
        return data;
    }

    @Override
    protected void onStartLoading() {
        super.onStartLoading();
        forceLoad();
    }

} 
```

然后，您将拥有需要此数据的活动，实施`LoaderManager.LoaderCallbacks<ArrayList<Map<String, String>>>`：

```
public class MainActivity implements LoaderManager.LoaderCallbacks<ArrayList<Map<String, String>>> 
```

需要定义此方法的接口：

```
@Override
    public Loader<ArrayList<Map<String, String>>> onCreateLoader(int id,
            Bundle args) {
        return new ContactsDataLoader(context);
    }

    @Override
    public void onLoadFinished(Loader<ArrayList<Map<String, String>>> loader,
            ArrayList<Map<String, String>> data) {
        // your custom adapter will need a method to update its data
        adapter.changeData(data);
        // you always have the option of using a normal SimpleAdapter and create
        // a new instance each time the data changes
        // mPeopleList = data;
        // mAdapter = new SimpleAdapter(this, mPeopleList,
        // R.layout.custcontview,
        // new String[] { "Name", "Phone", "Type" }, new int[] {
        // R.id.ccontName, R.id.ccontNo, R.id.ccontType });
        // mTxtPhoneNo.setAdapter(mAdapter);
    }

    @Override
    public void onLoaderReset(Loader<ArrayList<Map<String, String>>> loader) {
        // your custom adapter will need a method to update its data
        adapter.changeData(null); // or an empty list of data
        // you always have the option of using a normal SimpleAdapter and create
        // a new instance each time the data changes
        // mPeopleList = new ArrayList<Map<String, String>>;
        // mAdapter = new SimpleAdapter(this, mPeopleList,
        // R.layout.custcontview,
        // new String[] { "Name", "Phone", "Type" }, new int[] {
        // R.id.ccontName, R.id.ccontNo, R.id.ccontType });
        // mTxtPhoneNo.setAdapter(mAdapter);
    } 
```

然后你所要做的就是打电话：

```
// mPeopleList will have to be initialized to an empty list in the `onCreate` method
getLoaderManager().initLoader(0, null, this); 
```

在你的`onCreate`方法中。该应用程序将很快启动，但最初将其列表为空，直到加载器设法完成它的工作并从联系人获取数据并将其设置到您的适配器。

# php - 用于解析一般记录集的简单 XML

> ID：12767016
> 
> 赞同：1
> 
> 时间：2012-10-07T07:41:15.903
> 
> 标签：php, xml, simplexml, recordset

我试图找到一种方法来遍历包含命名空间的 XML 记录集。但是，我事先不知道字段名称。示例 XML 如下。

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.site.com/SMART/Updates">
<NewDataSet>
    <record>
        <FIELD1>data1</FIELD1>
        <FIELD2>data2</FIELD2>
        <FIELD3>data3</FIELD3>
    </record>
    <record>
        <FIELD1>data1</FIELD1>
        <FIELD2>data2</FIELD2>
        <FIELD3>data3</FIELD3>
    </record>
</NewDataSet> 
```

同样，我不会提前知道字段名称。我需要读取命名空间，找到根元素的名称（在本例中为“NewDataSet”），然后需要获取各个元素的字段名称和值。我曾尝试使用 $xml->getname() 和 $xml->xpath('\') 来查找根元素名称，但无法破解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:11:16.780

您的 XML 无效，但假设字符串标记在`</NewDataSet>`标记后关闭：

您可以使用`getDocNamespaces()`.

```
$xml = simplexml_load_string($xmlfile);
$namespaces = $xml->getDocNamespaces(); //array of namespaces

$dataset = $xml->children(); //first child (NewDataSet)

echo $dataset->getName(); //NewDataSet

$records = $dataset->children();
$i = 0;
$result = array();
foreach ($records as $key => $value) {
    foreach ($value as $fieldName => $fieldData) {
        $result[$i][$fieldName] = (string)$fieldData;
    }
    $i++;
}
var_dump($result); 
```

现在`$result`包含一个更易于阅读并包含行的数组：

```
array(2) {
  [0]=> array(3) {
            ["FIELD1"]=> string(5) "data1"
            ["FIELD2"]=> string(5) "data2"
            ["FIELD3"]=> string(5) "data3"
        }
  [1]=>  array(3) {
            ["FIELD1"]=> string(5) "data1"
            ["FIELD2"]=> string(5) "data2"
            ["FIELD3"]=> string(5) "data3"
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:22:28.523

我实际上不明白您的问题是什么，在您[在 PHP chat 中提供的真实 XML 中](http://sandbox.ijeannie.com/)，没有涉及名称空间（即使！）。

只需从文档元素中读出标签名称：

```
# echoes NewDataSet / string (depending on which XML input)
echo dom_import_simplexml($simplexml)->ownerDocument->documentElement->tagName; 
```

* * *

如果您实际上在另一个 XML 文档中有一个 XML 文档，您可以执行以下操作：

```
// load outer document
$docOuter = new DOMDocument();
$docOuter->loadXML($xmlString);

// load inner document
$doc = new DOMDocument();
$doc->loadXML($docOuter->documentElement->nodeValue);

echo "Root element is named: ", $doc->documentElement->tagName, "\n"; 
```

* * *

或者，如果您更喜欢 SimpleXML：

```
echo "Root element is named: ",
      simplexml_load_string(simplexml_load_string($xmlString))->getName()
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:34:58.013

> *[（如聊天中所述）](https://chat.stackoverflow.com/transcript/message/5807949#5807949)*

[纯 DOM 函数](http://php.net/book.dom)是处理 XML 的最佳方式。

[**演示**](http://codepad.org/0faT26Di)或**代码：**

```
<?php
header('Content-Type: text/plain');
$xml = <<<END
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.site.com/SMART/Updates">
<NewDataSet>
    <record>
        <FIELD1>data1</FIELD1>
        <FIELD2>data2</FIELD2>
        <FIELD3>data3</FIELD3>
    </record>
    <record>
        <FIELD1>data1</FIELD1>
        <FIELD2>data2</FIELD2>
        <FIELD3>data3</FIELD3>
    </record>
</NewDataSet>
</string>
END;
$dom = new DOMDocument;
$dom->preserveWhiteSpace = false;
$dom->normalize();
$dom->loadXML($xml);
echo 'Root element name: ' . $dom->firstChild->firstChild->tagName . PHP_EOL;
echo 'Number of child elements: ' . count($dom->firstChild->firstChild->childNodes) . PHP_EOL;
echo '=====' . PHP_EOL . PHP_EOL;
echo print_node($dom->firstChild->firstChild);
function print_node($node, $level = 0, $prev_level = 0) {
    $result = '';
    if($node->hasChildNodes()) {
        foreach($node->childNodes as $subnode) {
            $result .= str_repeat('    ', $level) . $node->tagName . ' =>' . PHP_EOL;
            $result .= print_node($subnode, $level + 1, $level) . PHP_EOL;
        }
    } else {
        if(trim($node->nodeValue) !== '') {
            $result .= str_repeat('    ', $level) . '**Data: ' . trim($node->nodeValue) . PHP_EOL;
        }
    }
    return $result;
}
?> 
```

**输出：**

```
Root element name: NewDataSet
Number of child elements: 1
=====

NewDataSet =>
    record =>
        FIELD1 =>
            **Data: data1

    record =>
        FIELD2 =>
            **Data: data2

    record =>
        FIELD3 =>
            **Data: data3

NewDataSet =>
    record =>
        FIELD1 =>
            **Data: data1

    record =>
        FIELD2 =>
            **Data: data2

    record =>
        FIELD3 =>
            **Data: data3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:23:39.263

查看[另一个答案中发布的聊天记录](https://chat.stackoverflow.com/transcript/message/5807949#5807949)，看起来该元素实际上包含一个字符串，该字符串是一个**转义**的XML 文档。因此，外部文档中只有一个元素，称为`<string>`. 它没有孩子，只有满足。（这看起来非常像使用 ASP.net 的服务构建器的人。）

因此，您缺少的步骤是取消转义此内部 XML 以将其视为新的 XML 文档：

```
// Parse the outer XML, which is just one <string> node
$wrapper_sx = simplexml_load_string($wrapper_xml);
// Extract the actual XML inside it
$response_xml = (string)$wrapper_sx;
// Parse that
$response_sx = simplexml_load_string($response_xml);

// Now handle the XML
$tag_name = $response_sx->getName();
foreach ( $response_sx->children() as $child )
{
    // Etc
}

// see http://github.com/IMSoP/simplexml_debug
simplexml_tree($response_sx, true); 
```

# python - 蟒蛇包装

> ID：12767023
> 
> 赞同：8
> 
> 时间：2012-10-07T07:42:13.007
> 
> 标签：python, package

试图创建一个 python 包。似乎工作，但我得到一个警告。我的 setup.py 是：

```
#! /usr/bin/env python

from distutils.core import setup

setup(
    name='myPKG',
    version='0.02.01',
    url='http://someURL.02.01',
     packages=['scripts',
              'statistics'],
    author = 'Research-Team', 
    author_email = 'me@gmail.com',
    description='This is my package',
    scripts=['scripts/myScript.py'],
    entry_points={'console_scripts' : ['myCommandlineName = scripts.myScript:testRequireDecorator']},
    install_requires=['numpy >= 1.5.1', 'scipy >= 0.9.0', 'poster']
) 
```

我收到以下警告。为什么，具体来说，两个第一个用户警告？

```
root@TK: python setup.py sdist
/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'entry_points'
  warnings.warn(msg)
/usr/lib/python2.7/distutils/dist.py:267: UserWarning: Unknown distribution option: 'install_requires'
  warnings.warn(msg)
running sdist
running check
package init file 'scripts/__init__.py' not found (or not a regular file)
reading manifest template 'MANIFEST.in'
no previously-included directories found matching '.git'
warning: no previously-included files matching '*.pyc' found under directory '.'
writing manifest file 'MANIFEST'
creating myPKG-0.02.01
creating myPKG-0.02.01/scripts
creating myPKG-0.02.01/statistics
making hard links in myPKG-0.02.01...
hard linking README -> myPKG-0.02.01
hard linking setup.py -> myPKG-0.02.01
hard linking scripts/myScript.py -> myPKG-0.02.01/scripts
hard linking statistics/RunningMedian.py -> myPKG-0.02.01/statistics
hard linking statistics/RunningStdev.py -> myPKG-0.02.01/statistics
hard linking statistics/__init__.py -> myPKG-0.02.01/statistics
Creating tar archive
removing 'myPKG-0.02.01' (and everything under it) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-07T07:47:44.527

您正在使用 distutils，但您至少需要[setuptools](http://pypi.python.org/pypi/setuptools)才能使用这些选项。

```
from setuptools import setup 
```

# vim - 根据 vim 中的文件扩展名更改文件类型

> ID：12767024
> 
> 赞同：4
> 
> 时间：2012-10-07T07:42:17.390
> 
> 标签：vim, vim-syntax-highlighting

我想根据`vim`.

我的代码中有以下代码`.vimrc`

```
autocmd BufNew,BufNewFile,BufRead *.txt,*.text,*.md,*.markdown setlocal ft=markdown 
```

但是当我用扩展`.md`文件打开一个文件时，文件类型没有改变。我运行`:set ft`命令，它显示输出为`filetype=modula2`.

我做错什么了吗？

编辑：

我开始通过重命名旧`.vimrc`文件进行调试，并仅用这一行创建了一个新文件。它工作正常。然后我替换了我的旧`.vimrc`文件，一切似乎都工作正常。猜猜这是因为我正在使用的某个插件中的一些问题。

但接受 ZyX 的回答，因为它认为我是另一种方式来做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T09:53:59.317

我`~/vim/ftdetect/markdown.vim`用这一行创建了一个文件

```
autocmd BufNewFile,BufRead *.md,*.mkdn,*.markdown :set filetype=markdown 
```

阅读文件类型的文档，`setfiletype`仅在未设置文件类型时设置。因此，您需要`set`用于无条件更改文件类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T12:15:29.467

想知道这条线是在之前还是之后`filetype … on`。在前一种情况下，您应该尝试将它（您的自动命令）放在此行之后。如果您将其放入`~/.vim/ftdetect/markdown.vim`并使用`setfiletype markdown`而不是`setlocal ft=markdown`：

```
augroup filetypedetect
    autocmd BufNew,BufNewFile,BufRead *.txt,*.text,*.md,*.markdown :setfiletype markdown
augroup END 
```

: 这是做这些事情的默认方式。`~/.vim`在这种情况下，必须`/usr/share/vim/*`在选项中的路径之前`'runtimepath'`（默认情况下）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-08T21:20:58.203

通过在 Vim\vim74\syntax 目录中创建目标语法文件的重命名副本，我能够获得备用文件扩展名的语法突出显示。

要使 *.md 作为 .markdown 打开：

复制 markdown.vim md.vim

或将 markdown.vim 的副本粘贴到语法文件夹，然后将副本重命名为 md.vim。

（在win7上运行vim74）

# javascript - Backbone.Collections 中使用的集合和上下文是什么？

> ID：12767028
> 
> 赞同：0
> 
> 时间：2012-10-07T07:43:27.670
> 
> 标签：javascript, backbone.js

在打印集合中的模型时，我看到两个“未定义”列表`context`和`collection`，它们与我的骨干集合具有相同的长度，我想知道它们的用途。

```
var collection = new Backbone.Collection([{x:1},{x:2},{x:3}]);
print(collection.at(0));

{
  _callbacks: {
    all: {
      next: {
        callback: function (event, model, collection, options) {...},
        context: [undefined, undefined, undefined],
        next: {}
      },
      tail: {}
    }
  },
  _escapedAttributes: {},
  _pending: {},
  _previousAttributes: {x: 1},
  _silent: {},
  attributes: {x: 1},
  changed: {},
  cid: "c11",
  collection: [undefined, undefined, undefined]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:29:23.193

`context`是事件回调中的“this”值（查看主干文档以了解使用`on`方法），collection 是对模型实例所属的 Backbone.Collection 的引用 - 通过添加创建模型时自动创建的引用它是集合的数据（如模型的示例 json 表示）。它允许集合和模型之间的分层通信，并且还可以很容易地监听集合上的事件，这些事件只能访问模型（例如在项目视图中）

让它看起来很奇怪的是它显示为未定义值`context`的`collection`数组 - 我不知道你使用的是什么版本的主干和什么环境，但如果它是正确的，它应该在那里显示`Backbone.Collection`你可以进一步扩展和检查的实例或参考（假设您使用的是浏览器 JS 控制台）。我敢打赌，您的 print 方法可能会做一些奇怪的事情，将集合引用转换为这些数组。

# java - 将哈希码转换为有限的字符串集

> ID：12767035
> 
> 赞同：2
> 
> 时间：2012-10-07T07:44:32.287
> 
> 标签：java, string, hashcode

我知道这是单向函数，但我想将哈希码转换回有限的字符串集（使用 32 到 126 之间的字符）。有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:07:29.430

这不仅可行——考虑到[`String.hashCode`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode%28%29). 您可以创建一个带有任意起点的“base 31”字符字符串，以将所有内容保持在正确的范围内，并根据该起点减去偏移量。

这不一定是给定哈希码的最短字符串，但 7 个字符很短:)

```
public class Test {

    public static void main(String[] args) {
        int hash = 100000;
        String sample = getStringForHashCode(hash);
        System.out.println(sample); // ASD^TYQ
        System.out.println(sample.hashCode()); // 100000
    }

    private static final int OFFSET = "AAAAAAA".hashCode();

    private static String getStringForHashCode(int hash) {
        hash -= OFFSET;
        // Treat it as an unsigned long, for simplicity.
        // This avoids having to worry about negative numbers anywhere.
        long longHash = (long) hash & 0xFFFFFFFFL;
        System.out.println(longHash);

        char[] c = new char[7];
        for (int i = 0; i < 7; i++)
        {
            c[6 - i] = (char) ('A' + (longHash % 31));
            longHash /= 31;
        }
        return new String(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:57:48.533

> 实际上，我只需要该哈希码中的一个字符串。我想制作 Minecraft 种子缩短器。

将`int`值转换为短字符串的最简单方法是使用

```
String s = Integer.toString(n, 36); // uses base 36. 
```

# iphone - 动态表头视图

> ID：12767043
> 
> 赞同：0
> 
> 时间：2012-10-07T07:46:38.283
> 
> 标签：iphone, objective-c, uitableview

我想使用一个动态的 tableHeaderView，当某些操作发生或删除时，可以在其中添加内容。标头框架应该响应更改并调整其大小，但我似乎无法找到解决方案。当我从 tableHeaderView 添加内容或删除内容时，我无法更改表格标题视图的框架大小，因此单元格看起来很奇怪。

有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T08:50:07.037

`tableHeaderView`我通过在修改表头后重新分配表视图的属性来完成这项工作：

```
UIView *header = self.tableView.tableHeaderView;
// add/remove contents, set header.frame, ...
self.tableView.tableHeaderView = header; 
```

# html - 当标记更改时，CSS 选择器使用 nth-type-of(1) 选择第一个实例失败

> ID：12767044
> 
> 赞同：-1
> 
> 时间：2012-10-07T07:46:48.427
> 
> 标签：html, css, css-selectors

这让我难住了...

[**在这里查看 JSBIN**](http://jsbin.com/uyimif/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
    .slide-nav:nth-of-type(1) { color:red } /* this should select the number 1 */
</style>
</head>
<body>

  <div class="image">
    <span class="slide" data-order="4" rel="content-images/teta.jpg" ></span>
    <span class="slide" data-order="3" rel="content-images/champ.jpg" ></span>
    <span class="slide" data-order="2" rel="content-images/clouds.jpg" ></span>
    <img class="slide initial" data-order="1" src="content-images/air.jpg" />
    <span class="spinner"></span>

    <!--  
    delete this line to comment the two arrow links -->
    <a class="arrow next" href="javascript:void(0)">&rarr;</a>
    <a class="arrow prev" href="javascript:void(0)">&larr;</a>
    <!-- -->

    <a class="slide-nav on" href="javascript:void(0)" rel="1">1</a>
    <a class="slide-nav" href="javascript:void(0)" rel="2">2</a>
    <a class="slide-nav" href="javascript:void(0)" rel="3">3</a>
    <a class="slide-nav" href="javascript:void(0)" rel="4">4</a>
  </div>

</body>
</html> 
```

## 问题

为什么`.slide-nav:nth-of-type(1) { color:red }`删除数字上方的两个附加链接时唯一的工作？

在 jsbin 中，删除两个箭头，或删除注释行以注释该块，您将看到`.slide-nav:nth-of-type(1)`选择器神奇地工作。

对于我的生活，它似乎无论如何都应该起作用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:14:14.260

CSS 中没有按类过滤，因为它没有 :nth-of-class() 选择器。`:nth-of-type`过滤器必须在标签上。

一种解决方法是将您的幻灯片导航链接包装在一个 span 中，并过滤`a`CSS 中的所有 s。

```
<span class="numbers">
    <a class="slide-nav on" href="javascript:void(0)" rel="1">1</a>
    <a class="slide-nav" href="javascript:void(0)" rel="2">2</a>
    <a class="slide-nav" href="javascript:void(0)" rel="3">3</a>
    <a class="slide-nav" href="javascript:void(0)" rel="4">4</a>
</span> 
```

和 CSS

```
span.numbers a:nth-of-type(1) { color:red; } /* this should select the number 1 */ 
```

有关示例，请参见[http://jsfiddle.net/3J4K6/](http://jsfiddle.net/3J4K6/)

# android - 云存储上的 Android Web 应用程序

> ID：12767046
> 
> 赞同：3
> 
> 时间：2012-10-07T07:46:55.617
> 
> 标签：android, jquery, ajax, web-applications, cordova

我有一个云存储网站，我想为该网站创建一个 Android 应用程序。

我尝试了2种方法。

第一种方法

使用 Phonegap 打开一个远程网站，该网站处理所有内容及其内置 PHP，因此一切正常。但云存储应用程序必须允许上传和下载。在 Phonegap 中，我可以通过网站上传，但不能直接下载到本地存储。如果我的网站位于本地 www 文件夹中，则只能在本地完成。同样这样也不能使用Phonegap的API。如果我下载任何文件，浏览器就会打开，在这种情况下。

第二种方法：

我尝试在本地使用 Phonegap 并仅创建我的云存储网站的 API，以便在本地借助 jQuery 和 Ajax 将数据发布到远程 URL，但由于同源策略无法完成. 我可能会收到文件的 JSON 数据并显示但无法登录用户和其他功能。:( 又是一个问题。

我还可以做些什么？关于这两种方法或我可以使用的任何替代方法，您是否可以为我提供任何其他方法或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T07:53:33.667

根据您所讨论的数据类型，有几种选择。

您正在描述一个云存储应用程序（我假设像 drop box 或 Google drive right）。

因此，您需要写入文件系统而不是某种数据库（本地 ofc）

因此，我会查看以下 api 文档； [http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.1.0/cordova_file_file.md.html#File)

例子也有。

PS 我在开发中遇到了相同的起源问题，但它们似乎在生产中消失了，也尝试在那里进行测试。

# android - Android：广播接收器不会收到启动消息

> ID：12767057
> 
> 赞同：2
> 
> 时间：2012-10-07T07:49:10.390
> 
> 标签：android, android-manifest

我有一个`MyBroadcastReceiver`注册为在启动时开始的课程。清单如下。我在 Android Motorola Xoom wifi only 平板电脑上通过 eclipse 运行它 - 这是 Android 3.2，API 级别 13（来自 dev.android 站点）。

我已经为此搜索并尝试了一些事情：

*   放`android:exported="true"`

*   用于`android:installLocation="internalOnly"`确保它没有安装在 SD 卡上

*   在设备上安装后，我在测试启动之前运行了几次应用程序（因为一些链接说 Android 3.x 及更高版本不会立即开始向应用程序发送启动事件，除非用户至少手动启动一次）

然而，即使现在广播接收器在设备启动时似乎也没有运行（基于 logcat）。

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.mypack"
      android:versionCode="1"
      android:versionName="1.0"
      android:installLocation="internalOnly">
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-sdk android:minSdkVersion="8" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
      <activity android:name=".MainCamApp" android:label="@string/app_name">
      <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      </activity>

     <service android:name=".UploaderService" />

     <receiver android:name=".MyBroadcastReceiver"  android:enabled="true" android:exported="true">
      <intent-filter>
          <action android:name="android.intent.action.BOOT_COMPLETED"/>
      </intent-filter>
     </receiver>

    </application>
</manifest> 
```

广播接收器的代码 -

```
import java.util.Calendar;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class MyBroadcastReceiverX extends BroadcastReceiver {
    private String TAG = "Broadcast Receiver:";
    AlarmManager alarm;

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        Log.i(TAG, "Entered onReceive.");
        alarm = (AlarmManager) arg0.getSystemService(Context.ALARM_SERVICE);
        Intent intentUploadService = new Intent (arg0, UploaderService.class);

        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.SECOND, 10);

        PendingIntent pi = PendingIntent.getBroadcast(arg0, 0, intentUploadService , 0);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 5000, pi);
        Log.i(TAG, "Alarm set. Exiting onReceive.");

        Intent myIntent = new Intent(arg0, UploaderService.class);
        arg0.startService(myIntent);
    }

} 
```

* * *

似乎现在正在工作..如果有帮助，下面的最终清单 -

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example"
      android:versionCode="1"
      android:versionName="1.0"
      android:installLocation="internalOnly"
      android:permission="android.permission.RECEIVE_BOOT_COMPLETED">

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <uses-sdk android:minSdkVersion="8" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
      <activity android:name=".MainCamApp" android:label="@string/app_name">
      <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
      </activity>

     <service android:name=".UploaderService" />

    <receiver android:name=".MyBroadcastReceiverX"  android:enabled="true" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
      <intent-filter>
          <action android:name="android.intent.action.BOOT_COMPLETED">
          <category android:name="android.intent.category.DEFAULT"/> 
          </action>
      </intent-filter>
    </receiver>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T08:07:32.930

尝试以下操作：

```
<receiver android:name=".MyBroadcastReceiverX"  android:enabled="true" android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
  <intent-filter>
      <action android:name="android.intent.action.BOOT_COMPLETED">
      <category android:name="android.intent.category.DEFAULT"/> 
      </action>
  </intent-filter>
</receiver> 
```

您还在清单中指定了不正确的类名 - 它应该`MyBroadcastReceiverX`是`MyBroadcastReceiver`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:34:12.423

您需要在收到`android.intent.action.BOOT_COMPLETED`意图后编写代码。

试试这个。

```
@Override
public void onReceive(Context context, Intent intent) {
    Log.d("TEST", intent.getAction());
    if (intent.getAction().equalsIgnoreCase(
            "android.intent.action.BOOT_COMPLETED")) {
         Log.i(TAG, "Entered onReceive.");
    alarm = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    Intent intentUploadService = new Intent (context, UploaderService.class);

    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 10);

    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intentUploadService , 0);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 5000, pi);
    Log.i(TAG, "Alarm set. Exiting onReceive.");

    //no need to initialize intent twice
    // Intent myIntent = new Intent(context, UploaderService.class);

 context.startService(intentUploadService );
    }

} 
```

# java - Spring Roo：如何编写基于多个支持实体的自定义搜索页面？

> ID：12767059
> 
> 赞同：1
> 
> 时间：2012-10-07T07:49:54.300
> 
> 标签：java, spring-roo

众所周知，Roo 将为每个实体创建一个列表页面。假设我有 3 个域类 - 公司、部门和员工，我想在自定义列表页面中显示详细信息，其中将包含所有 3 个类的字段，我该如何编码？我在 Roo shell 中使用了“web mvc 控制器”，但我不知道下一步应该是什么。

Roo 的版本是 1.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:40:58.800

Roo 不会自动跨多个实体生成查找器。自动生成的查找器只能处理单个实体的字段。

获取自定义列表页面的方法是编写一个自定义查找器（在域中或在服务层中）以包含您需要的所有字段/实体。

自定义列表 = 自定义控制器 + 自定义查找器 + 自定义视图

使用 Roo 1.2.2 验证

Spring 团队成员在[较早的帖子](http://forum.springsource.org/showthread.php?84828-Tip-how-to-generate-multi-field-finders)中提出了以下建议：“*最好的办法是使用 Roo 生成尽可能多的查找器，然后将其推入并修改它以包含您要查询的其他字段。* ”

# css - 无边框自动 DIV 填充

> ID：12767062
> 
> 赞同：0
> 
> 时间：2012-10-07T07:50:34.900
> 
> 标签：css, html

我在有/无边框的 CSS 和 DIV 方面遇到了一个相当独特的问题。

现在，当我使用没有任何边框的 DIV 时，有一种自动填充！当我添加边框时，填充消失。

即使我使用“margin：0；padding：0”，它仍然不会清除填充。

有谁知道它为什么会这样？结果，我不得不使用与页面背景颜色相同的边框，但现在我遇到了同样的问题，一组 3 个 DIV 应该彼此相邻，并且根本没有任何边框。

帮助！

# java - 参数未知（播放！框架）

> ID：12767065
> 
> 赞同：0
> 
> 时间：2012-10-07T07:51:30.063
> 
> 标签：java, forms, playframework, params, playframework-1.x

这在周日早上有点早（抱歉），但这里就可以了。

我正在处理的表单有一个用户列表（复选框）和下面的一些其他字段（日期等）。表单的目的是批量添加对象。因此，为每个复选框（用户）添加一个包含用户和日期的对象。

我遇到的问题是我不知道如何捕获从参数传递回来的 id，因为我不知道传递的参数名称。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T05:41:58.497

如果您在列表标签​​中，您可以使用 u_index 为您的用户创建索引

在你看来

```
#{list users, as:'u'}
  <input type="hidden" name="users[$[u_index -1].id" value="${u.id}">
#{/list} 
```

在你的控制器中

```
public static void save(List<User> users) {
} 
```

# javascript - Openlayers 初始范围

> ID：12767067
> 
> 赞同：1
> 
> 时间：2012-10-07T07:51:59.457
> 
> 标签：javascript, openlayers

根据 OpenLayers 文档，构造函数 OpenLayers.Map() 允许附加属性*范围*，即*“地图的初始范围”*（[参见此处](http://dev.openlayers.org/docs/files/OpenLayers/Map-js.html#OpenLayers.Map.OpenLayers.Map)）。

但是，我无法让它产生任何效果。我知道我可以在构建地图**后通过调用***.zoomToExtent()* 来设置初始范围。但我想使用这个*范围*属性，因为我在*eventListeners属性中设置了一个**zoomend*事件，但不希望它通过对*.zoomToExtent()*的初始调用来触发。有谁知道如何使用这个*范围*属性？

 *****这是不起作用的代码

```
map = new OpenLayers.Map('map',{
        extent: bounds,
        layers: [osmLayer,vectorLayer],
        projection: "EPSG:900913",
        eventListeners: {
            zoomend: function() {
                //..zoomend event listener code
            }
        }
    }); 
```

在上面的例子中：

*   *bounds*是一个有效的*OpenLayers.Bounds*对象
*   *osmLayer*和*vectorLayer*是有效的*OpenLayers.Layer*对象，其中*osmLayer*是基础层。

上面的代码会发生什么，地图被完全缩小了（实际上你什么都看不到），任何平移的尝试都会导致错误被抛出。要使地图进入正确状态，用户必须放大，然后再次平移，您可以看到地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T20:57:01.210

我遇到了同样的问题。

文档中提到的“范围”选项[可能是错误的](https://github.com/openlayers/openlayers/commit/e8af06e6ae805bee7cf3acacca869fddb96dd561)。它不存在。我检查了源代码，看不到任何处理此类选项的代码。我联系了作者，他已经创建了一个从文档中删除此选项的[拉取请求](https://github.com/openlayers/openlayers/pull/1046)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:01:17.693

恐怕我不确定如何使您列出的代码正常工作，但是以下替代方法对我有用：

```
map = new OpenLayers.Map('map',{projection: new OpenLayers.Projection("EPSG:4326")});

//ADD A BUNCH OF LAYERS AND SUCH HERE

//Set map center to this location at this zoom level
map.setCenter(new OpenLayers.LonLat(-93.9196,45.7326),5); 
```

作为最后的手段，您可以在缩放功能的开头放置一行：

```
if(!map_ready) return; 
```

然后在适当的时候将变量设置`map_ready`为 true。*****

# java - jsp/servlets 从数组中填充下拉框

> ID：12767069
> 
> 赞同：1
> 
> 时间：2012-10-07T07:52:28.047
> 
> 标签：java, database, forms, jsp, servlets

大家好，我正在尝试创建一个表单，允许您为某个主题创建一个实验室。它有一个下拉框，您可以在其中选择与该用户相关的主题。但是，当我加载页面时出现此错误`g.apache.jasper.JasperException: java.lang.NullPointerException`，对于我正在使用的当前用户，他们应该有 2 个结果

这是我的完整 servlet

```
import java.io.IOException;

import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

/**
 * Servlet implementation class CreateLab
 */
@WebServlet("/CreateLab")
public class CreateLab extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public CreateLab() {
        super();
        // TODO Auto-generated constructor stub
    }
     int id;
     int capacity; 
     String day = ""; 
     String time = ""; 
     String room = ""; 
     int subject_id;
     int user_id;

    public void init() {
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con =
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("JDBC driver loaded"); 
      } 
      catch (ClassNotFoundException e) {
        System.out.println(e.toString()); 
      } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    } 

    /**Process the HTTP Get request*/ 
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws 
  ServletException,IOException {  

    HttpSession session = request.getSession(true);

    String sql = "SELECT id,name" +
              " FROM subject " +
            " WHERE user_id="+(Integer)session.getAttribute("id");

    try{
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("connected");

        Statement stmt = con.createStatement();
          ResultSet res = stmt.executeQuery(sql);
          System.out.println(res);
          ArrayList<String> list1 = new ArrayList<String>();
          ArrayList<String> list2 = new ArrayList<String>();
          if (res.next()){
              do{
                   list1.add(res.getString(1));
                   list2.add(res.getString(2));
                   System.out.print(list1.add(res.getString(1)));
                   System.out.print(list2.add(res.getString(2)));

              }while(res.next());
          System.out.println("Outside");
          String[] arr1 = list1.toArray(new String[list1.size()]);
          String[] arr2 = list2.toArray(new String[list2.size()]);
          System.out.println(list1);
          request.setAttribute("res1", arr1);
          request.setAttribute("res2", arr2);
          request.setAttribute("user_id", user_id);

          }

    }catch (SQLException e) {
    } 
    catch (Exception e) {
    } 

      sendRegistrationForm(request, response, false); 
      sendPageHeader(response);
    } 

    /**Process the HTTP Post request*/ 
    public void doPost(HttpServletRequest request, 
      HttpServletResponse response) 
      throws ServletException, IOException {
      sendPageHeader(response); 
      HttpSession session = request.getSession(true);
      capacity = Integer.parseInt(request.getParameter("capacity"));

      day = request.getParameter("day"); 
      time = request.getParameter("time"); 
      room = request.getParameter("room"); 
      user_id = (int) session.getAttribute("id");
      subject_id = Integer.parseInt(request.getParameter("subject_id")); 

      System.out.print(user_id);

      boolean error = false; 
      String message = null; 
      try {
          Class.forName("com.mysql.jdbc.Driver");
          Connection con = 
            DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root","");
        System.out.println("got connection"); 
        System.out.println(id);
        Statement s = con.createStatement(); 

        String sql = "SELECT id FROM user" + 
                " WHERE id='" + user_id + "'";  
        ResultSet rs = s.executeQuery(sql); 
        if (rs.next()) {
          rs.close(); 
           sql = "INSERT INTO lab" + 
                  " (capacity, day, time, room, subject_id, user_id)" + 
                  " VALUES" + 
                  " ('" +  capacity + "'," + 
                     " '"  +  day + "'," + 
                     " '"  +  time + "'," + 
                     " '"  + room + "','" + subject_id + "','" + user_id + "')"; 

          System.out.println(sql);
          int i = s.executeUpdate(sql); 
          if (i==1) {
            message = "Successfully a new lab class."; 
            response.sendRedirect("Lecturer_labs.jsp");
          } 
        } 
          s.close(); 
          con.close(); 
        } 
        catch (SQLException e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        catch (Exception e) {
          message = "Error." + e.toString(); 
          error = true; 
        } 
        if (message!=null) {
          PrintWriter out = response.getWriter(); 
          out.println("<B>" + message + "</B><BR>"); 
          out.println("<HR><BR>"); 
        } 
        if (error==true) 
          sendRegistrationForm(request, response, true); 
        else 
          sendRegistrationForm(request, response, false); 
        sendPageFooter(response); 
      } 

      } 
```

这是我的jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="headerLecturer.jsp"/>

<tr>
<td>
</td>
</tr>

<tr>
<td>
<div id = "centrecontent">
<br>
<h3>Create Labs</h3>

<%
    String[] list1 = (String[])request.getAttribute("res1");
    String[] list2 = (String[])request.getAttribute("res2"); %>

        <form name ="createLabs" ACTION="CreateLab" method="post">
        Capacity: <input type="text" name="capacity"/><br />
        Day: <input type="text" name="day"/><br />
        Time: <input type="text" name="time"/><br />
        Room: <input type="text" name="room"/><br />
        <select name="subject_id">
        <%
        for(int i=0; i<list1.length; i++)  
        { 
        out.println("<option value="+list1[0]+"> "+list2[i]+" </option>");

        } 
        %>

        </select>
        <input type=SUBMIT value="Submit" name="Submit" />

    </form>
</div>

<jsp:include page="footer.jsp"/>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:31:14.357

该代码存在严重的安全漏洞。您正在从用户那里获取输入并将其传递给未经审查的数据库查询：

```
day = request.getParameter("day"); 
time = request.getParameter("time"); 
room = request.getParameter("room"); 

sql = "INSERT INTO lab" + 
              " (capacity, day, time, room, subject_id, user_id)" + 
              " VALUES" + 
              " ('" +  capacity + "'," + 
                 " '"  +  day + "'," + 
                 " '"  +  time + "'," + 
                 " '"  + room + "','" + subject_id + "','" + user_id + "')"; 
int i = s.executeUpdate(sql); 
```

这可以通过[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击来利用。攻击者可能会通过将意想不到的东西传递给您的表单来损害您的数据库。

使用准备好的语句更安全（也更整洁）：

```
sql = "INSERT INTO lab" + 
              " (capacity, day, time, room, subject_id, user_id)" + 
              " VALUES (?, ?, ?, ?, ?, ?)"; 
PreparedStatement stmt = con.prepareStatement(sql);
stmt.setInt(1,   capacity );
// set the rest.
int i = stmt.executeUpdate(sql); 
```

为了避免你的`NullPointerException`，你可以在你的 try 块之前初始化`list1`，`list2`然后在 catch 之后用它们 setAttribute 。这样，当尝试出现问题时，您至少会为您的表单获得一个空列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:36:54.373

首先，在使用此属性之前，您将如何获取属性（res1 和 res2），您应该正确设置此属性...。确保在使用此属性之前，您正在使用 get 方法调用 CreateLab servlet...

我喜欢更正你程序中的一些代码......

```
Dont open DB connection so many time, if you are open then you must close. 
```

列表中的重复项...

```
list1.add(res.getString(1));
list2.add(res.getString(2));
System.out.print(list1.add(res.getString(1)));
System.out.print(list2.add(res.getString(2))); 
```

使用以下内容

```
list1.add(res.getString(1));
list2.add(res.getString(2));
System.out.print(res.getString(1));
System.out.print(res.getString(2)); 
```

使用准备好的语句来避免sql注入......

检查参数....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T08:12:00.680

一般来说，您发布的代码有更大的改进空间，但我建议您不要像您正在做的那样处理异常：

```
}catch (SQLException e) {
} 
catch (Exception e) {
} 
```

由于未设置属性（null），它可能表明 try-catch 块中的代码出了问题。

我认为会话中的用户 ID 也可能为空。

尝试添加更详细的输出（如 println），这将为您提供有关代码数据流的更多详细信息。

那是家庭作业吗？如果那是要在生产中使用的东西 - 哎呀，它应该被完全重写。

# jquery - Ajax 无法从文件中加载 html

> ID：12767071
> 
> 赞同：0
> 
> 时间：2012-10-07T07:52:45.803
> 
> 标签：jquery, html, ajax, forms, load

在我的一个项目中，每次提交表单时，我都需要在元素内显示新的 html 代码。所以我为此使用了 Ajax，但它似乎并没有完成这项工作——它只会阻止表单提交，但不会显示 html 文件的内部（在我的例子中是 output.html）。你能帮我弄清楚我做错了什么吗？

这是 index.html 的代码

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="index.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js">
</script>
</head>
<body>
<form id="cliform" onsubmit="return false;" action="" method="get">
<div class="cl">>   <input type="text" class="cli" name="cmd" autocomplete='off' value=""     autofocus /></div>
</form>

<script type="text/javascript">
var frm = $('#cliform');
frm.submit(function () {
    $.ajax({
        type: frm.attr('method'),
        url: frm.attr('action'),
        data: frm.serialize(),
        success: function (data) {
            $('#output').load('output.html #content');
        }
    });

    return false;
});
</script>
<div id="output"></div>
</body>
</html> 
```

这是 output.html

```
<div id="content">
<h1> Hi </h1>
<p>Hello, World!</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:34:37.843

`.load`自己执行 ajax 请求，所以现在您正在另一个 ajax 请求的成功处理程序中执行 ajax 请求。首先调用的“外部”请求尝试加载表单的 action 属性中的 url，该属性为空。所以这个请求可能行不通。如果该请求失败，则根本不会执行“内部”请求。

我不知道否决票，但这可能是因为作为 Web 开发人员，甚至是初学者，您应该能够通过检查您的浏览器（带有 FireBug 的 FireFox 的 Chrome）提供的脚本和网络日志来识别此类问题.

# ruby - rails activerecord 列查询

> ID：12767072
> 
> 赞同：1
> 
> 时间：2012-10-07T07:52:48.207
> 
> 标签：ruby, activerecord

我是 Ruby on Rails 的新手。

我得到一个简单的表，其名称为`Loadtest`.

该表有两个属性：`testname`, `exectime`.

该表可能如下所示：

```
\-------------------------

testname | exectime |

test A | xx-xx-xx |

test B | xx-xx-xx |

\-------------------------- 
```

我想获取 下的所有条目`testname`，例如 `["test A", "test B"]`. 我怎么能做到这一点？

我可以`Loadtest.find(:all)`用来获取表中的所有条目并编写一些代码来形成`testname array`. 但是有什么直接的方法`Loadtest.column[:testname]`吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:00:03.013

是的，有***[采摘](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck)***方法。

```
Loadtest.pluck(:testname) 
```

# c++ - 如何从 USB 设备读取证书并将其发送到诸如 firefox 之类的浏览器

> ID：12767073
> 
> 赞同：0
> 
> 时间：2012-10-07T07:53:19.143
> 
> 标签：c++, firefox, dll, certificate, pkcs#11

我想编写一个 c++ dll，从我的 USB 设备读取证书并将其发送到 Firefox 等浏览器。我应该提到我已经使用具有 2K EEPROM 的 ATMega32A 构建了我的 USB 设备，并且我在上面存储了一个示例证书。
我已经阅读了一些关于 PKCS#11 标准的信息，但我不知道从哪里开始。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:47:09.760

听起来您正在创建 PKI 硬件设备。我认为您最大的障碍将是访问 ATMega32。您可以在 ATMega 端实现一个接口，无论是 RS232-usb 桥接器、USB 大容量存储器，还是带有自定义驱动程序的专有接口。

一个简单的解决方案可能是使用 USB 大容量存储接口将证书呈现为伪磁盘上的文件。

采用自定义驱动程序路线，Firefox（和其他 Mozilla 产品）使用具有 PKI 硬件接口的库。请参阅[NSS](http://www.mozilla.org/projects/security/pki/nss/faq.html)和[OpenSC](http://www.opensc-project.org/opensc/wiki/PKCS11)。猜测可能有一个适用于 Windows 的 PKI / PKCS11 驱动程序 API 可以实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:08:34.760

第一步：编写一个可以从USB设备读取数据的dll。你可以使用 Winusb。这将需要固件来支持它。

第二步：写一个可以给火狐添加证书的dll

步骤 3：将前面的步骤合并到一个 dll 中

如果您在某些特定问题上遇到困难，请写一个新问题并向我们展示您到目前为止所做的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T06:24:50.913

您不能“添加到 Firefox”，但可以将数据暴露给 Firefox 并使其可供使用。为此，您需要*实现*PKCS#11 API 并创建所谓的 PKCS#11 驱动程序（实现 PKCS#11 API 中定义的大约 70 个函数的用户模式 ​​DLL）。这些功能将与硬件设备对话以执行某些操作。然后将此 PKCS#11 DLL 插入 Firefox，Firefox 可以在您的设备上使用证书。

# scala - 如何在类级别为隐式参数提供默认值

> ID：12767074
> 
> 赞同：24
> 
> 时间：2012-10-07T07:53:21.157
> 
> 标签：scala

我正在尝试使用一些采用隐式参数的方法来定义一个类：

```
object Greetings {
  def say(name: String)(implicit greetings: String): String = greetings + " " +name 
} 
```

我从另一个班级使用这个班级

```
implicit val greetings = "hello"                //> greetings  : java.lang.String = hello
Greetings.say("loic")                           //> res0: String = hello loic
Greetings.say("loic")("hi")                     //> res1: String = hi loic 
```

我的问题是它只有在我在 Greetings 对象之外定义隐式 val 时才有效。我希望能够提供带有隐式参数的方法，并在我的类中使用默认值，以便更轻松地使用我的 API（如 Scala 集合 API）。

所以我想这样做，但它不起作用（未找到隐式值）：

```
object Greetings {
  implicit val greetings = "hello"    
  def say(name: String)(implicit greetings: String): String = greetings + " " +name 
} 
```

进而

```
Greetings.say("loic")                         
Greetings.say("loic")("hi") 
```

我知道我可以定义一个默认值，`(implicit greetings: String = "hello")`但我想在类级别进行，以避免在有很多方法时重复。

我想我错过了一些东西，因为我看到它`CanBuildFrom`是在`List`类中定义的，例如。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-07T12:11:56.767

`String`在隐式中使用这样的通用类型是个坏主意。主要原因是隐式查找完全基于类型，那么如果其他人定义了另一个 String 类型的隐式值怎么办？你最终可能会发生冲突。因此，您应该为自己的目的定义自己的特定类型（字符串的简单包装器）。

另一个原因是，在查找隐式值时，编译器将（在其他地方）查找隐式值类型的伴随对象（如果有的话）。您可以轻松地看到它有多么有用，因为伴随对象是放置默认隐式值的自然位置（如您的情况）。但是，如果隐式值是您不拥有的类型（例如`String`），您就不能为其编写伴随对象，而使用您自己的包装器类型则没有问题。

好的，废话不多说，这是你可以做到的：

```
case class Greetings( value: String ) {
  override def toString = value
}
object Greetings {
  // this implicit is just so that we don't have to manually wrap 
  // the string when explicitly passing a Greetings instance
  implicit def stringToGreetings( value: String ) = Greetings( value ) 

  // default implicit Greetings value
  implicit val greetings: Greetings ="hello"

  def say(name: String)(implicit greetings: Greetings): String = greetings + " " +name 
}
Greetings.say("loic")                         
Greetings.say("loic")("hi") 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-07T08:57:31.077

我找到了一种解决方法：

```
class Greetings(implicit val greetings: String = "hello") {
    def say(name: String): String = greetings + " " + name 
} 
```

像这样，我可以有一个默认值并在需要时覆盖它：

```
new Greetings().say("loic")                     //> res0: String = hello loic

implicit val greetings = "hi"                   //> greetings  : java.lang.String = hi
new Greetings().say("loic")                     //> res1: String = hi loic

new Greetings()("coucou").say("loic")           //> res2: String = coucou loic 
```

注意：`new Greetings()("coucou")`正在工作，而不是，因为[这里](http://scala-programming-language.1934581.n4.nabble.com/Strange-limitation-implicit-in-constructor-td1996011.html)`new Greetings("coucou")`解释的语法奇怪。

# excel - 从 MS Access 记录传递值后，在 excel 中运行子过程

> ID：12767076
> 
> 赞同：0
> 
> 时间：2012-10-07T07:53:30.593
> 
> 标签：excel, ms-access, vba

我有一个 Access 数据库，它成功地将我当前记录中的值传递到 Excel 工作表。要计算我的 Excel 工作表，我需要调用一个子程序。

我认为我的问题是事情发生的顺序。

我尝试`MyWorkbook`使用以下代码调用例程（在 Excel 中）

```
Private Sub Workbook_Activate()
On Error Resume Next

With Application
    .DisplayFullScreen = True
    .CommandBars("Worksheet Menu Bar").Enabled = True
    .ScreenUpdating = False
End With
Call Rategenerator    
Sheets("home").Select
End Sub 
```

我认为，该例程`Rategenerator`在 Access 记录中的值填充我的工作表“home”中的指定单元格之前被调用。

有没有办法`Rategenerator`在工作表上填充值后强制执行子例程？

当前 Access 记录中用于填充 Excel 工作表的代码如下所示：

```
Dim objXLApp  As Object
Dim objXLBook  As Object
Dim r As Object

'check whether Excel is open before opening another copy.
Set objXLApp = CreateObject("Excel.Application")
Set objXLBook = objXLApp.Workbooks.Open("e:\!!!Access SHare Folder\Ogden v7.1.1.5        final.xls")
objXLApp.Application.Visible = True

'Specify Sheet
With objXLBook.Sheets("home")
.unProtect Password:="xxxxxxxx"

.Cells(15, 6).Value = Me.DateofAcc
.Cells(16, 6).Value = Me.DOB
.Cells(17, 6).Value = Me.todaysDate
.Cells(18, 6).Value = Me.Gender
.Cells(19, 6).Value = Me.RetireAge
.Cells(22, 6).Value = Me.DeferredAge
.Cells(28, 6).Value = Me.ContEmpPre
.Cells(29, 6).Value = Me.ContDisPre
.Cells(30, 6).Value = Me.txtContOveridePre  'taken from the txtbox not the checkbox
.Cells(31, 6).Value = Me.ContOverideValPre
.Cells(28, 7).Value = Me.ContEmpPost
.Cells(29, 7).Value = Me.ContDisPost
.Cells(30, 7).Value = Me.txtContOveridePost 'taken from the txtbox not the checkbox
.Cells(31, 7).Value = Me.ContOverideValPost
End With

With objXLBook.Sheets("LOETblCalx")

.Cells(19, 17).Value = Me.SalaryNet1
.Cells(20, 17).Value = Me.Residual1
End With

''Tidy up
Set objXLBook = Nothing
Set objXLApp = Nothing

End Sub 
```

正如我所说，Access 记录中的所有字段值都会毫无问题地填充。Excel 工作簿的部分不依赖子例程自动计算，工作簿中的自动计算已打开。

**它只是在填充单元格后**触发子例程，这给我带来了一些困难。

最终，我想尝试将计算结果返回到 Access 记录中的一些其他字段中，但在我小心不要超越自己之前从未尝试过类似的事情。

感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:58:34.583

不要使用 Workbook_Activate()，而是在完成填充后尝试直接从 Access 代码运行 Excel 宏。这可以通过将与此类似的代码放在 Access 宏的末尾（在整理部分之前）来完成：`objXLBook.Run "Rategenerator"`

我不确定那段确切的代码是否适合您，但请参阅[此处](http://datapigtechnologies.com/blog/index.php/running-an-excel-macro-from-access-or-another-excel-workbook/)以获取有关如何执行此操作的更多详细信息。

# asp.net-mvc - MVC：用于 jquery 模式弹出的部分视图，验证问题

> ID：12767078
> 
> 赞同：3
> 
> 时间：2012-10-07T07:53:52.503
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

所以我在视图中有一个按钮，可以打开一个模式弹出表单。这个模态弹出表单是一个部分页面。我的问题是：

每当我没有填写表单上的必填字段时，TryUpdate 检查显然会失败，但它只会刷新 jquery 上“window.location.reload”行的整个页面。我想要做的是，它不会刷新，而是保持原样（显示模式的页面），并且验证摘要或验证会显示，这个和那个是必需的。这是可能的还是我把事情复杂化了？

```
<script type="text/javascript">
    $(document).ready(function () {
        $(function () {
            $('#modal-link').click(function () {
                var href = this.href;
                $('#load-modal').dialog({
                    modal: true,
                    draggable: false,
                    position: "top",
                    open: function (event, ui) {
                        $(this).load(href, function (result) {
                            $('#new-academy-form').submit(function () {
                                $.ajax({
                                    url: this.action,
                                    type: this.method,
                                    data: $(this).serialize(),
                                    success: function (json) {
                                        window.location.reload(true);
                                    },
                                    error: function (data) {
                                            var errmessage = '<div class="error-repo">Error</div>';
                                            $('#messages').html(errmessage);
                                        }
                                });
                                return false;
                            });
                        });
                    }
                });
                return false;
            });
        });
    });
</script> 
```

这是按钮：

```
<div class="width3">
                <%: Html.ActionLink("Submit New", "Create", "Propose", null, new { @class = "results", id = "modal-link" })%>
            </div> 
```

这是动作：

```
public ActionResult Create()
        {
            return PartialView(Propose.LoadDetails(context, null));
        }

        [HttpPost]
        public ActionResult Create(FormCollection formCollection)
        {
            Propose propose= new Propose ();
            if(TryUpdateModel(propose, "Propose ")){
                context.Propoe.Add(propose);
                context.SaveChanges();
                var proposals = new System.Text.StringBuilder();
                return Json(new { propose= proposals});
            }
            return PartialView(Propose.LoadDetails(context, null));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:46:24.163

您可以从您的操作中返回一个标志。

```
var data = new {isSuccess, new { propose= proposals}};
return Json(data ,  JsonRequestBehavior.AllowGet); 
```

然后在jquery中使用它

```
success: function (data) {
if(data.isSuccess){
    window.location.reload(true);
}
else{
   // write code to show validation summary and no reload.
}
} 
```

# azure - 在 Windows Azure Preview 中禁用压缩

> ID：12767079
> 
> 赞同：4
> 
> 时间：2012-10-07T07:54:06.420
> 
> 标签：azure, compression, gzip

这听起来像是一个奇怪的请求，但我需要测试一些东西并且需要能够在**Windows Azure**网站上禁用压缩。该站点在预览模式下作为**网站**运行，这意味着我无法登录 VM 来调整 IIS 设置。

我相应地更新了 web.config 文件，但这并没有什么不同。

```
<system.webServer>
   <urlCompression doStaticCompression="false" doDynamicCompression="false"/>
</system.webServer> 
```

压缩仍处于启用状态，似乎默认情况下已启用。关于启用压缩有很多关于*启用*压缩的问题，但我似乎找不到任何关于**禁用**压缩的问题！

有人有建议吗！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T17:50:02.457

将 Web 应用程序部署到 Windows Azure 网站时，并非 web.config 中的每个设置都是可委派的。web.config 中的一些设置是可委托的，它们反映在您的网站中，而其他设置则被恭敬地忽略，禁用压缩就是其中之一，这就是您看到上述结果的原因。使用完全相同的 web.config 设置或使用 Appcmd，只有当您对 IIS 服务器有足够的控制权时，您才能确定禁用压缩。到目前为止，如果此功能对您来说很重要，您的其他选择是使用 Windows Azure 云服务并部署 Web 角色或同时使用 Windows Azure 虚拟机。

我确信在 Windows Azure 网站中禁用压缩功能仍然是不可委托的，这就是为什么它在当前**的 Windows Azure 网站预览版中**不受支持。我可以说它肯定是考虑包含在以后的版本中的一个功能，但是，关于它何时或如果可能的可用性，我没有任何评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-28T00:36:27.350

我知道这个问题很久以前就已经发布了，此时我可以通过在 IIS 中设置它来关闭 http 压缩。

与@Deano建议的方式相同

```
<system.webServer>
   <urlCompression doStaticCompression="false" doDynamicCompression="false"/>
</system.webServer> 
```

# android - 在 Heroku 上上传数据（图片、视频等）

> ID：12767080
> 
> 赞同：0
> 
> 时间：2012-10-07T07:54:13.293
> 
> 标签：android, file-upload, heroku

我想使用我的 android 应用程序将捕获的图片和视频上传到 Heroku 服务器。我搜索了很多但找不到解决方案。谁能告诉我我该怎么做？至少给我一个启动请帮助我希望它开始。我被卡住了，找不到任何东西。在我的应用程序中使用按钮我想上传不同的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T07:57:53.213

您需要在某个地方存储这些照片（如 amazon s3）和一个库，以便从 heroku（载波或回形针 Gems，如果在轨道上使用红宝石）将它们传送到那里。

服务器端就是这样。

# java - 如何使行标题可拖动

> ID：12767086
> 
> 赞同：0
> 
> 时间：2012-10-07T07:55:19.347
> 
> 标签：java, swing, jtable

您好我正在使用 JTable 来显示文件中的数据。为此，我喜欢有行标题和列标题。由于行标题不存在，我为它实现了一个单独的 JTable。

但现在我喜欢调整行标题和行网格的大小。无论如何我可以实现这样的excel功能。

我从 url 遵循行标题功能：- [http://tips4java.wordpress.com/2008/11/18/row-number-table/](http://tips4java.wordpress.com/2008/11/18/row-number-table/)并从 url 调整网格大小：- [http://www.jroller.com/ santhosh/entry/make_jtable_resiable_better_than](http://www.jroller.com/santhosh/entry/make_jtable_resiable_better_than)

现在，在整合了这两个代码之后，我成功地得到了行标题和可拖动的网格。

但是现在在调整网格大小后，我没有找到使行标题可拖动的方法。

请提出一些使行头可拖动的建议。

```
**SimpleTableDemo.java**

package com.swing.table;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.*;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.table.*;
import java.util.*;
import java.awt.*;

public class SimpleTableDemo extends JPanel {
    private boolean DEBUG = false;
    private int spacing = 6;
    private Map columnSizes = new HashMap();
    String[] columnNames = { "First Name", "Last Name", "Sport", "# of Years",
            "Vegetarian" };

    Object[][] data = {
            {
                    "Kathy",
                    "Smith",
                    "SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                    new Integer(5), new Boolean(false) },
            { "John", "Doe", "Rowing", new Integer(3), new Boolean(true) },
            { "Sue", "Black", "Knitting", new Integer(2), new Boolean(false) },
            { "Jane", "White", "Speed reading", new Integer(20),
                    new Boolean(true) },
            { "Joe", "Brown", "Pool", new Integer(10), new Boolean(false) } };

    final JTable table = new JTable(data, columnNames);
    Panel1 panel;

    public SimpleTableDemo() {
        super(new GridLayout(0, 1));

        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        // table.setFillsViewportHeight(true);

        if (DEBUG) {
            table.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    printDebugData(table);
                }
            });
        }

        // Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        JTable rowTable = new RowNumberTable(table);
        scrollPane.setRowHeaderView(rowTable);
        scrollPane.setCorner(JScrollPane.UPPER_LEFT_CORNER,
                rowTable.getTableHeader());
        // Add the scroll pane to this panel.
        add(scrollPane);

        /*
         * panel = new Panel1(); Rectangle rect = table.getCellRect(0,0,true);
         * 
         * panel.setX(table.getWidth()); panel.setY(0);
         * panel.setWidth(rect.width); panel.setHeight(rect.height);
         * panel.setStr(table.getModel().getValueAt(0,0).toString());
         * panel.setModel(table);
         * 
         * add(panel);
         */
        /*
         * final JComboBox jNumberComboBoxSize = new JComboBox();
         * jNumberComboBoxSize.setModel(new javax.swing.DefaultComboBoxModel(new
         * String[] { "11", "12", "14", "16", "18", "20", "24", "30", "36",
         * "48", "72" })); jNumberComboBoxSize.addActionListener(new
         * java.awt.event.ActionListener() { public void
         * actionPerformed(java.awt.event.ActionEvent evt) {
         * jNumberComboBoxSizeActionPerformed(jNumberComboBoxSize); } });
         * 
         * JPanel panel2 = new JPanel(); panel2.add(jNumberComboBoxSize);
         * 
         * add(panel2);
         */
        TableRowResizer rowResizer = new TableRowResizer(table);
        adjustColumns();

    }

    private void jNumberComboBoxSizeActionPerformed(
            JComboBox jNumberComboBoxSize) {
        int fontSize = Integer.parseInt(jNumberComboBoxSize.getSelectedItem()
                .toString());
        table.setRowHeight(fontSize);
        table.setFont(new Font("Serif", Font.BOLD, fontSize));
        Rectangle rect = table.getCellRect(0, 0, true);
        panel.setX(0);
        panel.setY(0);
        // panel.setWidth(rect.width);
        panel.setHeight(rect.height);
        panel.setStr(table.getModel().getValueAt(0, 0).toString());
        panel.setModel(table);
        panel.repaint();
        table.revalidate();
    }

    private void printDebugData(JTable table) {
        int numRows = table.getRowCount();
        int numCols = table.getColumnCount();
        javax.swing.table.TableModel model = table.getModel();

        System.out.println("Value of data: ");
        for (int i = 0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j = 0; j < numCols; j++) {
                System.out.print("  " + model.getValueAt(i, j));
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }

    /*
     * Adjust the widths of all the columns in the table
     */
    public void adjustColumns() {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++) {
            adjustColumn(i);
        }
    }

    /*
     * Adjust the width of the specified column in the table
     */
    public void adjustColumn(final int column) {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (!tableColumn.getResizable())
            return;

        int columnHeaderWidth = getColumnHeaderWidth(column);
        int columnDataWidth = getColumnDataWidth(column);
        int preferredWidth = Math.max(columnHeaderWidth, columnDataWidth);
        panel.setWidth(preferredWidth);
        updateTableColumn(column, preferredWidth);
    }

    /*
     * Calculated the width based on the column name
     */
    private int getColumnHeaderWidth(int column) {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Object value = tableColumn.getHeaderValue();
        TableCellRenderer renderer = tableColumn.getHeaderRenderer();

        if (renderer == null) {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        Component c = renderer.getTableCellRendererComponent(table, value,
                false, false, -1, column);
        return c.getPreferredSize().width;
    }

    /*
     * Calculate the width based on the widest cell renderer for the given
     * column.
     */
    private int getColumnDataWidth(int column) {
        int preferredWidth = 0;
        int maxWidth = table.getColumnModel().getColumn(column).getMaxWidth();

        for (int row = 0; row < table.getRowCount(); row++) {
            preferredWidth = Math.max(preferredWidth,
                    getCellDataWidth(row, column));

            // We've exceeded the maximum width, no need to check other rows

            if (preferredWidth >= maxWidth)
                break;
        }

        return preferredWidth;
    }

    /*
     * Get the preferred width for the specified cell
     */
    private int getCellDataWidth(int row, int column) {
        // Inovke the renderer for the cell to calculate the preferred width

        TableCellRenderer cellRenderer = table.getCellRenderer(row, column);
        Component c = table.prepareRenderer(cellRenderer, row, column);
        int width = c.getPreferredSize().width
                + table.getIntercellSpacing().width;

        return width;
    }

    /*
     * Update the TableColumn with the newly calculated width
     */
    private void updateTableColumn(int column, int width) {
        final TableColumn tableColumn = table.getColumnModel()
                .getColumn(column);

        if (!tableColumn.getResizable())
            return;

        width += spacing;

        // Don't shrink the column width

        width = Math.max(width, tableColumn.getPreferredWidth());

        columnSizes.put(tableColumn, new Integer(tableColumn.getWidth()));
        table.getTableHeader().setResizingColumn(tableColumn);
        tableColumn.setWidth(width);
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event-dispatching thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); // content panes must be opaque
        frame.setContentPane(newContentPane);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}

class Panel1 extends JPanel {
    int x;
    int y;
    int width;
    int height;
    String str;
    JTable model;

    public void setModel(JTable model) {
        this.model = model;
    }

    public void setX(int x) {
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }

    public void setWidth(int w) {
        this.width = w;
    }

    public void setHeight(int h) {
        this.height = h;
    }

    public void setStr(String s) {
        this.str = s;
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int initX = 0;
        for (int row = 0; row < 5; ++row) {
            initX = x;
            for (int col = 0; col < 5; ++col) {
                g.drawRect(x, y, width, height);
                g.drawString(model.getModel().getValueAt(row, col).toString(),
                        x + 10, y + 10);
                x = x + width;
            }
            x = initX;
            y = y + height;

        }

    }
};

**TableRowResizer.java**
package com.swing.table;

import java.awt.Cursor;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseEvent;

import javax.swing.JTable;
import javax.swing.event.MouseInputAdapter;

// @author Santhosh Kumar T - santhosh@in.fiorano.com 
public class TableRowResizer extends MouseInputAdapter {
    public static Cursor resizeCursor = Cursor
            .getPredefinedCursor(Cursor.N_RESIZE_CURSOR);

    private int mouseYOffset, resizingRow;
    private Cursor otherCursor = resizeCursor;
    private JTable table;

    public TableRowResizer(JTable table) {
        this.table = table;
        table.addMouseListener(this);
        table.addMouseMotionListener(this);
    }

    private int getResizingRow(Point p) {
        return getResizingRow(p, table.rowAtPoint(p));
    }

    private int getResizingRow(Point p, int row) {
        if (row == -1) {
            return -1;
        }
        int col = table.columnAtPoint(p);
        if (col == -1)
            return -1;
        Rectangle r = table.getCellRect(row, col, true);
        r.grow(0, -3);
        if (r.contains(p))
            return -1;

        int midPoint = r.y + r.height / 2;
        int rowIndex = (p.y < midPoint) ? row - 1 : row;

        return rowIndex;
    }

    public void mousePressed(MouseEvent e) {
        Point p = e.getPoint();

        resizingRow = getResizingRow(p);
        mouseYOffset = p.y - table.getRowHeight(resizingRow);
    }

    private void swapCursor() {
        Cursor tmp = table.getCursor();
        table.setCursor(otherCursor);
        otherCursor = tmp;
    }

    public void mouseMoved(MouseEvent e) {
        if ((getResizingRow(e.getPoint()) >= 0) != (table.getCursor() == resizeCursor)) {
            swapCursor();
        }
    }

    public void mouseDragged(MouseEvent e) {
        int mouseY = e.getY();

        if (resizingRow >= 0) {
            int newHeight = mouseY - mouseYOffset;
            if (newHeight > 0)
                table.setRowHeight(resizingRow, newHeight);
        }
    }
}

**RowNumberTable.java**

package com.swing.table;

import java.awt.*;
import java.beans.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

/*
 * Use a JTable as a renderer for row numbers of a given main table.
 * This table must be added to the row header of the scrollpane that
 * contains the main table.
 */
public class RowNumberTable extends JTable implements ChangeListener,
        PropertyChangeListener {

    private final JTable table;

    public RowNumberTable(JTable table) {
        this.table = table;
        table.addPropertyChangeListener(this);

        setFocusable(false);
        setAutoCreateColumnsFromModel(false);

        updateRowHeight();
        updateModel();
        updateSelectionModel();

        TableColumn column = new TableColumn();
        column.setHeaderValue("");
        addColumn(column);
        column.setCellRenderer(new RowNumberRenderer());

        getColumnModel().getColumn(0).setPreferredWidth(50);
        setPreferredScrollableViewportSize(getPreferredSize());

        getTableHeader().setReorderingAllowed(false);
    }

    @Override
    public void addNotify() {
        super.addNotify();

        Component c = getParent();

        // Keep scrolling of the row table in sync with the main table.

        if (c instanceof JViewport) {
            JViewport viewport = (JViewport) c;
            viewport.addChangeListener(this);
        }
    }

    /*
     * Delegate method to main table
     */
    @Override
    public int getRowCount() {
        return table.getRowCount();
    }

    @Override
    public int getRowHeight(int row) {
        return table.getRowHeight(row);
    }

    /*
     * This table does not use any data from the main TableModel, so just return
     * a value based on the row parameter.
     */
    @Override
    public Object getValueAt(int row, int column) {
        return Integer.toString(row + 1);
    }

    /*
     * Don't edit data in the main TableModel by mistake
     */
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }

    // implements ChangeListener
    public void stateChanged(ChangeEvent e) {
        // Keep the scrolling of the row table in sync with main table

        JViewport viewport = (JViewport) e.getSource();
        JScrollPane scrollPane = (JScrollPane) viewport.getParent();
        scrollPane.getVerticalScrollBar()
                .setValue(viewport.getViewPosition().y);
    }

    // implements PropertyChangeListener
    public void propertyChange(PropertyChangeEvent e) {
        // Keep the row table in sync with the main table

        if ("rowHeight".equals(e.getPropertyName())) {
            updateRowHeight();
        }

        if ("selectionModel".equals(e.getPropertyName())) {
            updateSelectionModel();
        }

        if ("model".equals(e.getPropertyName())) {
            updateModel();
        }
    }

    private void updateRowHeight() {
        setRowHeight(table.getRowHeight());
    }

    private void updateModel() {
        setModel(table.getModel());
    }

    private void updateSelectionModel() {
        setSelectionModel(table.getSelectionModel());
    }

    /*
     * Borrow the renderer from JDK1.4.2 table header
     */
    private static class RowNumberRenderer extends DefaultTableCellRenderer {

        public RowNumberRenderer() {
            setHorizontalAlignment(JLabel.CENTER);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table,
                Object value, boolean isSelected, boolean hasFocus, int row,
                int column) {
            if (table != null) {
                JTableHeader header = table.getTableHeader();

                if (header != null) {
                    setForeground(header.getForeground());
                    setBackground(header.getBackground());
                    setFont(header.getFont());
                }
            }

            if (isSelected) {
                setFont(getFont().deriveFont(Font.BOLD));
            }

            setText((value == null) ? "" : value.toString());
            setBorder(UIManager.getBorder("TableHeader.cellBorder"));

            return this;
        }
    }
} 
```

# php - 更新多个 php 文件（空间值，按文件顺序递增）

> ID：12767089
> 
> 赞同：-1
> 
> 时间：2012-10-07T07:56:03.143
> 
> 标签：php, linux, shell, sed

以下情况的正确方法是什么

ive 100 个文件 db01.php db100.php

其中包括此 sql 语句

```
$sql = mysql_query("select user from level2 where id BETWEEN 1 AND 350");

my gol is update value ( BETWEEN 1 AND 350 ) 
```

通过添加 +350 从 db01.php 到 db100.php

db02.php 语句将是

```
 $sql = mysql_query("select user from level2 where id BETWEEN 350 AND 700"); 
```

db03.php

```
 $sql = mysql_query("select user from level2 where id BETWEEN 700 AND 1050"); 
```

..继续到最后一个文件，最好的方法是什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:13:46.767

您可以使用 get 参数创建单个 PHP 文件，以指示文件的“编号”（在您的情况下，修改 BETWEEN 的开始和结束）。

尝试创建一个 PHP db.php 文件：

```
$interval = 350;
$num = (int) $_GET["num"];

// Generate start and end (for between)
$start = (int) $interval * ($num - 1);
$end = (int) $interval * $num;

// Hack for the first number (start should be 1, not 0)
if($start == 0) $start = 1;

// Generate sql with $start and $end)
$sql = mysql_query("select user from level2 where id BETWEEN " . $start . " AND " . $end); 
```

然后这样称呼它：

```
http://www.yourside.com/db.php?num=1
http://www.yourside.com/db.php?num=2 
```

ETC ...

# parallel-processing - 使用 MPI、OpenMP 和 CUDA 查找矩阵中“隐藏”对象数量的并行程序算法

> ID：12767090
> 
> 赞同：1
> 
> 时间：2012-10-07T07:56:14.803
> 
> 标签：parallel-processing, cuda, mpi, openmp

对于我的研究，我需要编写一个**有效的并行程序**来找到一个在给定时刻在矩阵中对于最大数量的其他对象不可见的对象。

主要特征：

*   带 3 台计算机的 MPI
*   OpenMP 在每台 PC 上使用 4 个内核
*   可选 CUDA

数据：

*   对象被放置在大小为 AxB 的矩阵中。
*   我有一个包含对象坐标及其时间戳的大文件。
*   物体是飞行，但速度是恒定的。

问题：

如果我从一个对象 (C1) 的单元格中心到另一个对象 (C3) 的单元格中心画一条线，并且这条线与另一个对象 (C2) 交叉的单元格，这意味着：

*   C1 看不到 C3
*   C3 看不到 C1

![问题](../Images/bad0fad7a9fd2cc331161e7c40ba9fd4.png)

我的问题：

是否有任何已知的类似问题的算法（可能是图形中的一些问题），我可以查看解决方案？

感谢您的任何帮助。

**更新：最终解决方案** [https://github.com/anod/CriticalLevelCalculation](https://github.com/anod/CriticalLevelCalculation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:29:06.720

我认为解决方案是简单的数学。

1.  取 2 个点 p1 和 p2。
2.  找到他们的线性方程。
3.  与所有点进行比较，如果它们中的任何一个属于该方程并且在 p1 和 2 之间。
4.  如果某些点挡住了路，那么 p1 和 p2 将再投一票是*不可见*的。

希望这可以帮助你。

# .net - 为什么 PropertyInfo SetValue 和 GetValue 这么慢？

> ID：12767091
> 
> 赞同：18
> 
> 时间：2012-10-07T07:56:26.623
> 
> 标签：.net, reflection, reflection.emit, propertyinfo

为什么`PropertyInfo`获取和设置属性的方法这么慢？如果我使用 构建委托`Reflection.Emit`，它会快得多。

他们是否在做一些重要的事情，以便他们花费的时间是合理的？那就是......我是否通过使用`Reflection.Emit`构建委托而不是使用 PropertyInfo 的`GetValue`和`SetValue`（除了开发速度）而遗漏了一些东西？

*PS：请举证，不要只凭猜测！*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T13:33:38.203

的实现`RuntimePropertyInfo`（它是`PropertyInfo`运行时类型的具体子类）实现`GetValue`并`SetValue`通过反射（`MethodInfo.Invoke`）调用 getter 和 setter 方法，而您生成的委托可能直接调用这些方法。因此，问题归结为：`RuntimeMethodInfo.Invoke`与编译调用相比，为什么这么慢？

当你反编译（或查看参考源）`RuntimeMethodInfo.Invoke`时，你可以看到这可能是因为`Invoke`执行了很多任务：

*   它执行一致性检查（传递的参数的数量和类型是否与签名匹配？传递的实例是否与声明类型匹配？尽管方法是静态的，但是否传递了实例？），
*   它执行可见性和（如果绕过可见性检查）安全检查，
*   它解开参数数组，以特殊方式处理 ref 参数，以便以后可以将它们写回，
*   如有必要，它会拆箱参数，
*   它需要根据运行时类型句柄和与RuntimeMethodHandle关联的方法句柄找到方法指针，然后调用该方法，
*   如有必要，它将返回值装箱，并且
*   它将任何 ref/out 参数装箱并放入参数数组中。

运行时将您的委托编译为可执行的本机代码时，将执行类似的一致性、安全性和可见性检查。它还发出装箱/拆箱等代码。但是，它只需要做一次这些事情，然后可以保证代码可以安全执行。这使得实际的方法调用是一个非常便宜的操作（加载参数并跳转到方法地址）。

相反，每次调用`RuntimeMethodInfo.Invoke`（因此调用`GetValue`/ `SetValue`）都需要重复所有工作，因为上下文——参数、实例和返回类型的用法——是未知的。这可能就是它如此缓慢的原因。

关于您可能缺少的内容：如果您发出自己的属性调用委托，您当然需要自己处理装箱/拆箱、引用/输出参数等。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-06-29T11:56:07.523

无需使用 Emit。使用表达式要容易得多。[您可以按照SO](https://stackoverflow.com/a/17669142/2534462)中的描述加快访问速度 。辅助类创建一个指向 getter 或 setter 的“方法指针”（Action/Func）。如果您重用 Action/Func，您将能够像普通 setter 一样快速执行。

```
 // creating setter (once)
   var propertyInfo = typeof(T).GetProperty(field);
   var setter = FastInvoke.BuildUntypedSetter<T>(propertyInfo));

   // usage somehow later in a loop of data
   foreach(var myobject in MySource)
   {
     setter(myobject, myValue)
   } 
```

# macos - 如何找到应用程序在 OSX 上使用 X11 的原因？

> ID：12767092
> 
> 赞同：0
> 
> 时间：2012-10-07T07:56:33.830
> 
> 标签：macos, boost, opencv, x11

我有一个我自己构建的应用程序。但是，它说它需要 X11，尽管它不应该。我怎样才能轻松（无需一遍又一遍地扩展 ldd）找出导致 X11 的依赖项？

如果有帮助，这里是 otool -L 的输出：

```
libopencv_core.2.3.dylib (compatibility version 2.3.0, current version 2.3.1)
libopencv_imgproc.2.3.dylib (compatibility version 2.3.0, current version 2.3.1)
libopencv_features2d.2.3.dylib (compatibility version 2.3.0, current version 2.3.1)
/opt/local/lib/libboost_serialization-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
/opt/local/lib/libboost_iostreams-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
/opt/local/lib/libboost_system-mt.dylib (compatibility version 0.0.0, current version     0.0.0)
/opt/local/lib/libboost_filesystem-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
/opt/local/lib/libboost_unit_test_framework-mt.dylib (compatibility version 0.0.0, current version 0.0.0)
/usr/local/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.16.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0) 
```

谢谢和最良好的祝愿

**更新** 它是计算机视觉模块的单元测试可执行文件。它是用 C++ 编写的，使用 cmake 构建。

# android - 将对象/变量从 php 服务器发送到应用程序 android

> ID：12767098
> 
> 赞同：0
> 
> 时间：2012-10-07T07:57:04.540
> 
> 标签：android

我的服务器和应用程序在这里遇到了一些问题。所以我想使用 php 从服务器传递对象/变量。我无法检索它。在这种情况下，我想将 id、用户名传递给我的应用程序。 .

这是我的代码**user.java**

```
public class User   {
   private String username="";  
   private String password="";  
   private int id;
} 
```

在我的登录表单上，这是我的代码

```
void login(){
    try{            

        httpclient=new DefaultHttpClient();

        httppost= new HttpPost("http://nervousme.vacau.com/check_login.php"); .

        nameValuePairs = new ArrayList<NameValuePair>(2);
        side variable name and php side variable name should be similar, 
        nameValuePairs.add(new BasicNameValuePair("username",et_username.getText().toString().trim()));  
        nameValuePairs.add(new BasicNameValuePair("password",et_password.getText().toString().trim())); 
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        response=httpclient.execute(httppost);

        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        final String response = httpclient.execute(httppost, responseHandler);
        System.out.println("Response : " + response); 
        runOnUiThread(new Runnable() {
            public void run() {
                tv.setText("Response from PHP : " + response);
                dialog.dismiss();
            }
        });

        if(response.equalsIgnoreCase("Login Berhasil")){
            runOnUiThread(new Runnable() {
                public void run() {
                    Toast.makeText(LoginForm.this,"Login Berhasil", Toast.LENGTH_SHORT).show();
                }

            });

            Intent intent = new Intent(LoginForm.this,UserHome.class);
            intent.putExtra("username",et_username.getText().toString());  

            startActivity(intent);
        }else{
            showAlert();                
        }

    }catch(Exception e){
        dialog.dismiss();
        System.out.println("Exception : " + e.getMessage());
    }
}

public void showAlert(){
    LoginForm.this.runOnUiThread(new Runnable() {
        public void run() {
            AlertDialog.Builder builder = new AlertDialog.Builder(LoginForm.this);
            builder.setTitle("Login Gagal");
            builder.setMessage("Terdapat Kesalahan Pada Username/Password")  
                   .setCancelable(false)
                   .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                       }
                   });                     
            AlertDialog alert = builder.create();
            alert.show();               
        }
    });
} 
```

然后在我的 php 服务器端：

```
$query_search = "select * from USER where username = '".$username."'
AND password = '".$password. "'";

$query_exec = mysql_query($query_search) or die(mysql_error());

$rows = mysql_num_rows($query_exec); //echo $rows;

if($rows == 0) { 
  echo "Login Gagal";   
}  else  {
  echo $username,$id;    
} 
```

我在 php 服务器上的代码是否正确？（只是回显用户名和 id）。如果我的代码正确，那么如何将用户名和 ID 保存到我的对象（类）中？如果我只是回显用户名，id 然后将其显示给 textview 并获取值并将其设置在我的类上，它仍然是面向对象的吗？我的朋友让我对面向对象编程感到困惑

任何帮助将不胜感激..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:03:03.337

看起来您正在处理 Java 端的响应，因此如何持久化它真的取决于您。您可以使用首选项类或对 sqlite3 使用对象关系映射器（orm）。两者的例子都很容易找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:02:15.927

我强烈建议你使用 JSON，你在 php 和 Android sdk 中都有它，它会让你的生活轻松很多。不过，在我看来，您如何“解析”http 响应有点奇怪：

```
if(response.equalsIgnoreCase("Login Berhasil")) { ... } 
```

我没有看到你的服务器返回...

您可以查看 android 示例，有几个关于如何使用 JSON 的示例，例如这里：/android-sdk-macosx/samples/android-16/SampleSyncAdapter/src/com/example/android/samplesync/client /NetworkUtilities.java

# svn - Emacs 中的远程 Subversion 存储库浏览

> ID：12767100
> 
> 赞同：3
> 
> 时间：2012-10-07T07:57:23.813
> 
> 标签：svn, emacs, remote-access, tramp

Emacs 是否有一个用于远程浏览 subversion repo 的包，类似于 kdesvn 的功能？如果不是 TRAMP 似乎是放置此类功能的可能位置

# sql-server-2008 - 通过加入和分组更新表

> ID：12767105
> 
> 赞同：3
> 
> 时间：2012-10-07T07:58:05.170
> 
> 标签：sql-server-2008, tsql, join, group-by

一家公司有许多评论，这些评论本身就有评级栏。

```
CompID  Ratig
12  3
13  3
17  4
22  4
23  5
24  3
28  3,2 
```

这就是我需要通过 id 为每个公司设置的内容。**现在公司列中的评级是** `NULL`。

我写了这样的东西：

```
UPDATE Companies c
JOIN Reviews r on c.CompanyID = r.CompanyID
SET c.Rating = AVG(r.rating)
group by r.CompanyID 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T08:07:42.683

这应该使用简单的嵌套查询来完成您想要的操作，在这种情况下可能比`JOIN`.

```
UPDATE Companies
SET Rating =
  (SELECT AVG(Rating) 
   FROM Ratings
   WHERE Companies.CompanyId = Ratings.CompId) 
```

简单的 SQLfiddle 演示[在这里](http://sqlfiddle.com/#!3/4fc25/2)。

编辑：如果你*真的*想使用`JOIN`/ `UPDATE FROM`，它看起来像这样；

```
UPDATE c
SET c.Rating = r.Rating
FROM Companies c
JOIN (SELECT AVG(Rating) Rating, CompID FROM Ratings GROUP BY CompId) r
  ON c.CompanyId = r.CompId 
```

至少对我来说，阅读起来有点复杂，而且它只适用于 SQL Server，但[这里也是 SQLfiddle](http://sqlfiddle.com/#!3/414bb/1) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T04:08:50.443

```
 UPDATE ComisionesxColaboradorxLineaPrescripciones
 SET CANTIDAD_PRODUCTOS_CORE_CUMPLE = CANTIDAD
 FROM @ComisionesxColaboradorxLineaPrescripciones ComisionesxColaboradorxLineaPrescripciones
 INNER JOIN
    (SELECT TAB_L.COD_COLAB AS COD_COLAB,TAB_L.TIPO_COLABORADOR AS TIPO_COLABORADOR, COUNT(TAB_P.COD_SEG) AS CANTIDAD
    FROM @ComisionesxColaboradorxLineaPrescripciones TAB_L
    INNER JOIN @ComisionesxColaboradorxLineaxProductoPrescripciones TAB_P
    ON TAB_L.COD_COLAB=TAB_P.COD_COLAB AND
    TAB_L.TIPO_COLABORADOR=TAB_P.TIPO_COLABORADOR
    GROUP BY TAB_L.COD_COLAB,TAB_L.TIPO_COLABORADOR
    ) AGRUPADO 
        ON ComisionesxColaboradorxLineaPrescripciones.COD_COLAB = AGRUPADO.COD_COLAB AND
        ComisionesxColaboradorxLineaPrescripciones.TIPO_COLABORADOR = AGRUPADO.TIPO_COLABORADOR 
```

# python - 使用底图（python）在世界地图上绘制网络/图形

> ID：12767109
> 
> 赞同：1
> 
> 时间：2012-10-07T07:58:58.583
> 
> 标签：python, network-programming, matplotlib, matplotlib-basemap

我有数百个连接国家的列表：

```
...
Albania ; Austria
Albania ; Azerbaijan
... 
```

这给出了一个图表。我想在世界地图上的连接国家之间画线（直线或曲线）（使用底图/python）？

这是我想要实现的结果的示例 [http://www.lincomrealestate.com/site/images/WorldMapBig1.jpg](http://www.lincomrealestate.com/site/images/WorldMapBig1.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:42:51.497

如果您提供有关您已经尝试过的更多信息，那将非常有帮助。我刚刚发布了一个问题的答案，该问题解决了这个问题的主题：[https ://stackoverflow.com/a/14154584/741316](https://stackoverflow.com/a/14154584/741316)

该答案中代码的结果图像如下所示：

![示例输出](../Images/dd3aca32b6410941c35303753388ad3a.png)

高温高压

# javascript - webOS的Phonegap应用程序，警报不起作用

> ID：12767110
> 
> 赞同：0
> 
> 时间：2012-10-07T07:59:02.077
> 
> 标签：javascript, cordova, alert, webos

在 webOS 的 Phonegaps 应用程序中，我尝试以多种方式显示警报：

```
// 1.
alert('Mobile number has to be of 10 digits');

// 2.
navigator.notification.alert("alert text!",
    function(){}, //callback
    'alert Title',
    "ok"
);

// 3.
navigator.notification.confirm("alert text!",
    function(){}, //callback
    'alert Title',
    "ok"
);

// 4\.               
Notification.prototype.confirm('alert text', function(){}, 'alert Title', 'ok'); 
```

Phonegaps 2.1.0 版

为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:34:44.117

你看过这个页面吗？

[http://www.digitaldogbyte.com/2011/05/11/notifications-dashboard-in-phonegap-0-9-5-webos/](http://www.digitaldogbyte.com/2011/05/11/notifications-dashboard-in-phonegap-0-9-5-webos/)

如果您遵循它并且它不起作用，那么它可能是 PhoneGap 中的回归。警报不适用于 webOS 应用程序，因为它们应该使用仪表板通知。

# cuda - 漏斗转移 - 它是什么？

> ID：12767113
> 
> 赞同：16
> 
> 时间：2012-10-07T08:00:51.080
> 
> 标签：cuda, intrinsics, ptx

在阅读 CUDA 5.0 Programming Guide 时，我偶然发现了一个名为“Funnel shift”的功能，该功能存在于 3.5 计算设备中，但不是 3.0。它包含一个注释“参见参考手册”，但是当我在手册中搜索“漏斗移位”术语时，我什么也没找到。

我试着用谷歌搜索它，但只在第 8 章的[http://www.cudahandbook.com上找到了提及：](http://www.cudahandbook.com)

> 8.2.3 漏斗转移（SM 3.5）
> 
> GK110 添加了一个 64 位“漏斗移位”指令，可以使用以下内部函数访问该指令：
> 
> __funnelshift_lc()：返回左漏斗移位的最高有效 32 位。
> 
> __funnelshift_rc()：返回右漏斗移位的最低有效 32 位。
> 
> 这些内在函数在 sm_35_intrinsics.h 中实现为内联设备函数（使用内联 PTX 汇编程序）。

...但它仍然没有解释“左漏斗移位”或“右漏斗移位”是什么。

那么，它是什么，在哪里需要它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T11:37:59.577

在 CUDA 的情况下，两个 32 位寄存器连接在一起成为一个 64 位值；该值向左或向右移动；并返回最高有效（对于左移）或最低有效（对于右移）32 位。

的内在函数`sm_35_intrinsics.h`如下：

```
unsigned int __funnelshift_lc(unsigned int lo, unsigned int hi, unsigned int shift);
unsigned int __funnelshift_rc(unsigned int lo, unsigned int hi, unsigned int shift); 
```

根据 Andy Glew（删除死链接）的说法，漏斗转移的应用程序包括快速未对齐的 memcpy；正如 njuffa 在上面的评论中提到的，如果两个输入词相同，它可以用来实现旋转。

# iphone - 从相机/相册上传图像到服务器 - Corona sdk

> ID：12767118
> 
> 赞同：1
> 
> 时间：2012-10-07T08:01:58.697
> 
> 标签：iphone, sdk, lua, coronasdk

我在将使用相机或相册拍摄的图像上传到服务器时遇到了一个小问题。我正在使用以下代码将图像上传到我的服务器：但是使用此代码，我的服务器只接收图像的表值，如下所示：表：`0x11791daf0`，我怎样才能让它上传图像而不是值？是否也可以使用此代码上传文本？

最后是我服务器上的 PHP 脚本。

先感谢您 ：）

```

    本地函数monitorMem（事件）
      收集垃圾（“收集”）

      print("\nMemUsage:" .. (collectgarbage("count")/1000) .." MB")
      print("纹理使用" .. system.getInfo("textureMemoryUsed") / 1000000)

      返回真
    结尾

    运行时：addEventListener（“enterFrame”，monitorMem）

    本地图像

    本地 mime = 需要“mime”

    本地 bkgd = display.newRect( 0, 0, display.contentWidth, display.contentHeight )
    bkgd:setFillColor(0,0,0)

    本地 myRoundedRect = display.newRoundedRect(10, 50, 80, 50, 12)
    myRoundedRect.strokeWidth = 3
    myRoundedRect:setFillColor(140, 140, 140)
    myRoundedRect:setStrokeColor(180, 180, 180)

    本地 sessionComplete = 函数（事件）
            图像 = 事件.目标

            打印（“相机”，（图像和“返回图像”）或“会话被取消”）
            print("事件名称：" .. event.name )
            打印（“目标：”.. tostring（图像））

            如果图像那么
                    -- 屏幕居中图像

                    image.x = display.contentWidth/2
                    图像.y = 59
                    本地 w = image.width
                    本地 h = image.height
                    图像.xScale = 0.3
                    图像.yScale = 0.3
                    print("w,h = "..w ..","..h)
            结尾
    结尾

    本地侦听器 = 函数（事件）
            如果 media.hasSource( media.Camera ) 那么
                    media.show(media.Camera, sessionComplete)
            别的
                    native.showAlert（“电晕”，“找不到相机。”）
            结尾
            返回真
    结尾
    myRoundedRect:addEventListener("tap", listener)

    本地 myRoundedRect1 = display.newRoundedRect(10, 400, 150, 50, 12)
    myRoundedRect1.strokeWidth = 3
    myRoundedRect1:setFillColor(140, 140, 140)
    myRoundedRect1:setStrokeColor(180, 180, 180)

    本地名称 = “图像名称”

    函数uploadBinary（文件名，url，onComplete）

           -- 本地路径 = system.pathForFile( 文件名 )
           -- 本地文件句柄 = io.open(path, "rb" )
           -- 如果是文件句柄 那么

           如果图像那么

                         本地参数 = {
                                        body = "image_file=" .. mime.b64(tostring( image )) .. "&image_filename="..Name
                            }

               -- io.close( 文件句柄 )

                    本地函数networkListener（事件）
                            如果（onComplete）那么
                                            完成（事件）；
                            结尾
                            返回真；
                    结尾

                    network.request(url, "POST", networkListener, params)
            结尾
    结尾

    本地函数网络监听器（事件）
            如果 ( event.isError ) 那么
                    print("网络错误！")
            别的
                  -- 打印（“响应：” .. event.response）
                  打印（“工作”）
            结尾
    结尾

    本地函数上传()

    uploadBinary ( image, "http://www.test1.bugs3.com/Corona.php", networkListener)
    结尾

    myRoundedRect1:addEventListener(“点击”，上传)

    ?php
            $image_file = fopen($_POST['image_filename'], 'wb');

            $encodedData = str_replace(' ','+',$_POST['image_file']);
            $decocedData = base64_decode($encodedData);

            fwrite($image_file, $decocedData);
            fclose($image_file);

    ?

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:01:39.300

你在重新发明轮子......为什么你的轮子不起作用？

因为您在表上使用 tostring，所以表上的 tostring 始终返回表名，而不是其内容。

你想做的事情，无论如何我在这里描述的太复杂了，但这是你正在重新发明的轮子：

[CoronaLabs.com “如何将图像上传到服务器”](http://developer.coronalabs.com/code/how-upload-image-server-multipartform-data)

:)

# google-chrome - fadeOut fadeIn Chrome 问题

> ID：12767119
> 
> 赞同：2
> 
> 时间：2012-10-07T08:02:02.900
> 
> 标签：google-chrome, fadein, fadeout

我试图同时淡出一个 div 和淡入另一个 div。它可以在 Firefox 和 IE(7-9) 中正确运行，也可以在 Chrome 中运行。但是，在 chrome 中，在淡出之后，我的页面必须滚动到顶部，然后再淡入。

我希望在谷歌浏览器中没有像 Firefox 和 IE 那样滚动的情况。

```
$("ul.main_news li:eq(0)").hover(function(){
    $(".a").stop(true, true).fadeOut(300).promise().done(function(){
    $(".b").stop(true, true).fadeIn();  
    }); 
    $(this).removeClass("asew");
    $(this).addClass("sdghe");
    $("ul.main_news li:eq(1)").removeClass("sdghe");
    $("ul.main_news li:eq(1)").addClass("asew");
    });

$("ul.main_news li:eq(1)").hover(function(){
    $(".b").stop(true, true).fadeOut(300).promise().done(function(){
    $(".a").stop(true, true).fadeIn();
    });
    $(this).removeClass("asew");
    $(this).addClass("sdghe");
    $("ul.main_news li:eq(0)").removeClass("sdghe");
    $("ul.main_news li:eq(0)").addClass("asew");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:32:27.740

你应该使用这个插入 promise() 的代码

```
$(".b").stop(true, true).fadeOut(300).queue(function(){
    $(".a").stop(true, true).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:53:45.060

你不想`stop()`在任何地方使用方法！也许在回调中使用它有一些问题`fadeOut()`！尝试这个：

```
("ul.main_news li:eq(1)").hover(function(){
      $(".b").stop(true, true).fadeOut(300).promise().done(function(){
        $(".a").fadeIn();
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T10:43:35.240

您应该在没有回调的情况下使用此代码：

```
$(".a").stop(true, true).fadeIn(300);       
$(".b").stop(true, true).fadeOut(0); 
```

# java - JUnit = 红条，即使我的 assertEquals 是正确的

> ID：12767120
> 
> 赞同：2
> 
> 时间：2012-10-07T08:02:48.673
> 
> 标签：java, junit

```
package dpackage;

public class MyCalculator {

    public int getSum(int a, int b, int sum) {
        sum = a+b;
        return sum;
    }

}

package dpackage;

import junit.framework.TestCase;

public class MyCalculatorTest extends TestCase {
    MyCalculator calc = new MyCalculator();

    protected void setUp() throws Exception {
        super.setUp();
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }
    protected void getSum(){
        int a=2;
        int b=3;
        int sum = a+b;
        assertEquals(5, calc.getSum(a, b, sum));
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T08:11:10.453

原因有点微妙。将代码更改为以下以获得绿色条。

```
 public void testGetSum() 
```

`test`在 Junit 3 中，测试方法应该从`public`

如果可能的话，我会建议你继续使用 Junit 4，它没有施加这样的限制。

使用诸如`@Test`,之类的注解`@Before`，`@After`你的代码会更加简单易读。

同样传递`sum`给该方法，然后重新计算它看起来是多余的。坚持用你的`getSum`方法计算它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T08:11:22.350

您没有任何名称以“test”开头的方法。您可以在 MyCalculatorTest 类中将“getSum”方法重命名为“testGetSum”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T08:05:05.660

这个定义有什么意义？

```
public int getSum(int a, int b, int sum) {
    sum = a+b;
    return sum;
} 
```

只需使用：

```
public int getSum(int a, int b) {
    return a + b;
} 
```

和

```
public void testGetSum() { <-- note test in front
    int a=2;
    int b=3;
    assertEquals(5, calc.getSum(a, b));
} 
```

注意eclipse没有在方法前面报错`test`是没有检测到测试类。

# sql - 无法从 Visual Basic 通过 ADODB 运行 sp_prepare

> ID：12767125
> 
> 赞同：2
> 
> 时间：2012-10-07T08:04:03.057
> 
> 标签：sql, sql-server, vb.net

我无法将句柄值传递给 sp_execute。如果我直接在 Management Studio 中使用 SQL 代码，我会成功：

```
Declare @handle Integer
exec sp_prepare @handle OUTPUT, N'@year int', N'SELECT * from Sales.CreditCard where ExpYear=@year';

select @handle

exec sp_execute @handle, 2007
exec sp_unprepare @handle 
```

但是当我在 VB 上尝试以下代码时，执行命令后“param3.Value”为“nothing”。

```
 ConnString = "DRIVER={SQL Server};SERVER=192.168.100.41,1433;UID=sa;PWD=<password>;DATABASE=AdventureWorks"
    'create an instance of the ADO connection
    Connection = CreateObject("ADODB.Connection")

    'Open the connection to the database
    Connection.Open(ConnString)
    Dim cmd As ADODB.Command
    Dim param1 As ADODB.Parameter
    Dim param2 As ADODB.Parameter
    Dim param3 As ADODB.Parameter

    cmd = CreateObject("ADODB.Command")
    cmd.ActiveConnection = Connection
    cmd.CommandText = "sp_prepare"

    param1 = cmd.CreateParameter("@handle", 3, 2, 4, 0)
    param2 = cmd.CreateParameter("@params", 202, 1, 200, "@year Integer")
    param3 = cmd.CreateParameter("stmt", 202, 1, 200, "SELECT TOP 4 [CreditCardID],[CardType],[CardNumber],[ModifiedDate]  FROM [AdventureWorks].[Sales].[CreditCard] where [ExpYear] in (@year)")

    cmd.Parameters.Append(param1)
    cmd.Parameters.Append(param2)
    cmd.Parameters.Append(param3)

    cmd.Execute()

    Debug.WriteLine("handle:" & param1.Value) 
```

你知道如何让它在VB上工作吗？我从 VB 运行它的原因是我需要通过 RPC 运行该命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:19:41.300

尝试改变：

```
 param1 = cmd.CreateParameter("@handle", 3, 2, 4, 0) 
```

至

```
param1 = cmd.CreateParameter("@handle", 3, 4, 4, 0) 
```

那是变化`ParameterDirection`。如果您注意到`sp_prepare`评估`handle`但不显示，除非您调用`select @handle`

# oop - Matlab - 句柄类

> ID：12767127
> 
> 赞同：-1
> 
> 时间：2012-10-07T08:04:21.997
> 
> 标签：oop, class, matlab

> **可能重复：**
> [matlab 类：句柄或值](https://stackoverflow.com/questions/6436539/matlab-classes-handle-or-value)

关于这个`handle`类，你可以[在这里](http://www.mathworks.com/help/matlab/handle-classes.html)看到它提到了关于这个类的以下内容：`Objects that share references with other objects`.

这是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:47:41.053

这意味着句柄对象是通过引用传递的，如此[处](http://www.mathworks.co.uk/help/matlab/matlab_oop/comparing-handle-and-value-classes.html)所述。在将对象作为函数参数传递时，不是复制对象，这是 Matlab 中的默认行为，而是传递对它的引用。

# knockout.js - 打字稿错误的上下文

> ID：12767128
> 
> 赞同：8
> 
> 时间：2012-10-07T08:04:32.820
> 
> 标签：knockout.js, typescript

代码：

```
export class ViewModel {
        public users: knockout.koObservableArrayBase;

        constructor () {
            this.users = ko.observableArray([]);
            this.removeUser = this.removeUser.bind(this);//<-- Here compiller shows error
        }

        removeUser(user: User): void {
            this.users.remove(user);
        }
} 
```

* * *

html:

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Surname</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: users">
        <tr>
            <td><a href="#" data-bind="click: $root.removeUser">Remove</a></td>
            <td data-bind="text: name"></td>
            <td data-bind="text: surname"></td>
        </tr>
    </tbody>
</table> 
```

* * *

问题出在 removeUser 方法中。默认情况下，如果我不绑定上下文，则 this == UserToDelete - 不是 viewModel 对象。如果我添加到构造函数：`this.removeUser = this.removeUser.bind(this); (manually enforce context)`，那么上下文是需要的 this == viewmodel，但是 TypeScript 抱怨“无法将函数转换为 (user:User)=>void 需要调用签名，但函数缺少调用签名。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T17:33:28.907

我不熟悉 ko 所以也许有更好的方法来解决上下文切换，但是你的打字稿编译器错误是由'bind'返回类型'Function'引起的，它与'removeUser'的类型不兼容。您应该能够通过将返回的函数转换为原始类型签名来解决此问题，如下所示：

```
this.removeUser = <(user: User) => void> this.removeUser.bind(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T21:30:35.177

好吧，我遇到了同样的问题，这就是为什么我想出了以下基类来解决我的问题

```
export class ViewModelBase {
    private prefix: string = 'On';

    public Initialize() {
        for (var methodName in this) {
            var fn = this[methodName];
            var newMethodName = methodName.substr(this.prefix.length);
            if (typeof fn === 'function' && methodName.indexOf(this.prefix) == 0 && this[newMethodName] == undefined) {
                this[newMethodName] = $.proxy(fn, this);
            }
        }
    }
} 
```

它的作用是循环你的类的所有成员，如果一个方法以 On 开头，它将创建一个没有 On 的新方法，它将调用具有正确上下文的原始方法。

这不是`$.proxy`一个 jquery 调用，所以需要 jquery 才能工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-08T18:59:24.677

好吧，最简单的解决方案以及我通常对 typescript 和 knockout js 所做的事情是，我不在原型上声明从敲除调用的函数，而是在构造函数中声明。所以，我会这样：

```
export class ViewModel {
        public users: knockout.koObservableArrayBase;
        removeUser:(user: User) => void;

        constructor () {
            this.users = ko.observableArray([]);
            this.removeUser = (user:User) => {
                this.users.remove(user);
            }
        }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-15T20:00:35.360

另一种方法是更改​​点击绑定以使用 JavaScript 的**[绑定](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)**函数来强制 的值`this`成为您的视图模型：`data-bind="click: $root.MyFunc.bind($root)"`。

请注意，`$data`点击`event`对象仍将作为`MyFunc`来自 Knockout 的参数传入，如**[点击绑定](http://knockoutjs.com/documentation/click-binding.html)**规范所述。如果您需要覆盖传递给的参数`MyFunc`，只需将它们传递给绑定函数，如下所示`$root`：`.bind($root, param1, param2)`从技术上讲，这些参数将被*添加*到由 Knockout 提供的参数之前，给出 arguments `[param1, param2, data, event]`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T03:28:24.293

我遇到了同样的问题。要获得正确的上下文，您可以使用点击绑定传递的参数。点击绑定传递2个参数，即点击的用户和jquery事件。

如果您使用 jquery 事件，而不是使用 ko.contextFor() 函数，您可以获得正确的上下文。

你的函数看起来像：

```
removeUser(user: User, clickEvent: any): void {
    var self = ko.contextFor(clickEvent.srcElement).$root;
    self.users.remove(user);
} 
```

# mysql - 如何在表上多更新字段，不包括不存在的字段

> ID：12767130
> 
> 赞同：1
> 
> 时间：2012-10-07T08:04:42.637
> 
> 标签：mysql, sql, sql-update

我进行了一个查询，该查询获取行数`tableA`并将按字段的计数分组`set_id`到临时表中`c`。然后，如果table 中的字段与字段的值相同，它会通过将其字段的值更改为 table 的值来执行 `UPDATE`on 。`tableB``current_count``c``count``count``c``set_id``current_count``set_id`

```
UPDATE sets, (
  SELECT
    set_id, 
    COUNT(set_id) AS count
  FROM leads_auto
  GROUP BY set_id
) c 
SET sets.current_count = c.count
WHERE sets.set_id = c.set_id 
```

此查询的缺点是如果's的表中**不存在计数**，则它不能`UPDATE` `tableB`使用`current_count`零值。**`c``tableB``set_id`**

 **我试过这个

```
UPDATE sets, (
  SELECT
    set_id,
    COUNT(set_id) AS count
  FROM leads_auto
  GROUP BY set_id
) d
SET sets.current_count = 0 
WHERE sets.set_id != d.set_id 
```

但它**不会影响任何行**，`tableB`即使 table`c`返回带有`set_id`in 的行`tableB`并排除了一些`set_id`确实存在于的行`tableB`。

有谁知道如何做到这一点？

```
SELECT set_id, COUNT(set_id) AS count FROM leads_auto GROUP BY set_id 
```

**退货**

```
set_id |   count
-------+---------
     1 |       7
     5 |       5
     4 |      16
     7 | 2000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:16:36.373

该`WHERE`子句实际上是一个`INNER JOIN`：

```
WHERE sets.set_id = c.set_id 
```

它只返回两个表中都存在的行。当未找到匹配项时，将查询转换为 a`LEFT JOIN`以返回`NULL`右侧表的值：

```
UPDATE sets AS s
LEFT JOIN (
  SELECT
   set_id,
   COUNT(set_id) as cnt 
  FROM leads_auto 
  GROUP BY set_id
) d
ON s.set_id = d.set_id
SET s.current_count = COALESCE(d.cnt, 0) 
```

*   [SQL Fiddle 的示例。](http://sqlfiddle.com/#!2/cc17f/1/0)**

# ruby - 安装 rmagick 时出错

> ID：12767133
> 
> 赞同：14
> 
> 时间：2012-10-07T08:05:32.320
> 
> 标签：ruby, ruby-on-rails-3, redmine

尝试在 Windows Server 2008 R2 上安装 Redmine 时出现以下错误。

```
C:\Ruby\Apps\Redmine>rake db:migrate
←[31mCould not find gem 'rmagick (>= 2.0.0) x86-mingw32' in the gems available o
n this machine.←[0m
←[33mRun `bundle install` to install missing gems.←[0m

C:\Ruby\Apps\Redmine>bundle install
Fetching gem metadata from http://rubygems.org/.......
Using rake (0.9.2.2)
Using i18n (0.6.1)
Using multi_json (1.3.6)
Using activesupport (3.2.8)
Using builder (3.0.0)
Using activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.2)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Using actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Using actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Using activerecord (3.2.8)
Using activeresource (3.2.8)
Using bundler (1.2.1)
Using coderay (1.0.7)
Using fastercsv (1.5.5)
Using rack-ssl (1.3.2)
Using json (1.7.5)
Using rdoc (3.12)
Using thor (0.16.0)
Using railties (3.2.8)
Using jquery-rails (2.0.3)
Using metaclass (0.0.1)
Using mocha (0.12.3)
Using mysql (2.8.1)
Using net-ldap (0.3.1)
Using pg (0.14.1)
Using ruby-openid (2.1.8)
Using rack-openid (1.3.1)
Using rails (3.2.8)
Installing rmagick (2.13.1) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
.

        C:/Ruby187/bin/ruby.exe extconf.rb
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby187/bin/ruby

Gem files will remain installed in C:/Ruby187/lib/ruby/gems/1.8/gems/rmagick-2.1
3.1 for inspection.
Results logged to C:/Ruby187/lib/ruby/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/g
em_make.out
An error occurred while installing rmagick (2.13.1), and Bundler cannot continue
.
Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

* * *

尝试使用此 gem install rmagick -v '2.13.1' 安装 rmagick

我收到这个错误...

```
C:\Ruby\Apps\Redmine>gem install rmagick -v 2.13.1
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
        ERROR: Failed to build gem native extension.

        C:/Ruby187/bin/ruby.exe extconf.rb
checking for Ruby version >= 1.8.5... yes
Invalid drive specification.
Unable to get ImageMagick version
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby187/bin/ruby

Gem files will remain installed in C:/Ruby187/lib/ruby/gems/1.8/gems/rmagick-2.1
3.1 for inspection.
Results logged to C:/Ruby187/lib/ruby/gems/1.8/gems/rmagick-2.13.1/ext/RMagick/g
em_make.out 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-07-22T09:18:53.213

尝试这个：

```
apt-get install libmagickwand-dev
gem install rmagick 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T12:52:00.193

**sudo apt-get install libmagickcore-dev libmagickwand-dev**

and after run bundle install

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:11:10.350

你是先安装 Imagemagick 的吗？[http://www.imagemagick.org](http://www.imagemagick.org)

实际上，请参阅：[Won't Let Me Install Gem in Ruby Prompt](https://stackoverflow.com/questions/1972321/wont-let-me-install-gem-in-ruby-prompt)

# hibernate - 休眠 - 实体未更新

> ID：12767135
> 
> 赞同：0
> 
> 时间：2012-10-07T08:05:56.207
> 
> 标签：hibernate, orm, hibernate-mapping

我正在尝试更新用户实体及其正在更新：

请参考以下代码： Hibernate 映射文件：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="sg.edu.nus.iss.phoenix.user.entity.User" table="user">
        <id name="id" column="UserId">
        </id>
        <property name="password" column="Password" type="string"
            update="false" />
        <property name="name" column="Name" type="string"
            update="false" />
        <property name="status" column="Status" type="string" />
    </class>
</hibernate-mapping> 
```

用户.java

```
public class User implements Cloneable, Serializable {

    /**
     * For eclipse based unique identity
     */
    private static final long serialVersionUID = -3737184031423373198L;
    /**
     * Persistent Instance variables. This data is directly mapped to the
     * columns of database table.
     */
    private String id;
    private String password;
    private String name;
//  private UserTypeEnum status;
    private String status;
    private List<Role> roles = new ArrayList<Role>();

    /**
     * Constructors. The first one takes no arguments and provides the most
     * simple way to create object instance. The another one takes one argument,
     * which is the primary key of the corresponding table.
     */

    public User() {

    }

    public User (String userId, String password){
        this.id = userId;
        this.password = password;
        this.roles = new ArrayList<Role>();
    }

    public User (String userId, String password, String name){
        this.id = userId;
        this.password = password;
        this.name = name;
        this.status = "Active";
        this.roles = new ArrayList<Role>();
    }

    public User(String idIn) {

        this.id = idIn;

    }

    /**
     * Get- and Set-methods for persistent variables. The default behaviour does
     * not make any checks against malformed data, so these might require some
     * manual additions.
     */

    public String getId() {
        return this.id;
    }

    public void setId(String idIn) {
        this.id = idIn;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String passwordIn) {
        this.password = passwordIn;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String nameIn) {
        this.name = nameIn;
    }

    public String getStatus() {
        return status;
    }
/*
    public void setStatus(UserTypeEnum status) {
        this.status = status;
    }
    */
    public void setStatus(String status)
    {
        this.status=status;
    }
    public List<Role> getRoles() {
        return roles;
    }

    public void setRoles(List<Role> roles) {
        this.roles = roles;
    }
} 
```

UserDAOImpl.java

```
public class UserDaoImpl implements UserDao {

    @Override
    public boolean update(User t) throws SQLException {
        boolean status;
        try{
            Session session  = HibernateUtil.getSessionFactory().openSession();
            Transaction tx = session.beginTransaction();
            session.saveOrUpdate(t);
            session.flush();
            session.refresh(t);
            tx.commit();
            session.close();
            status = true;
        }catch (HibernateException e) {
            e.printStackTrace();
            status=false;
        }
        return status;
    }
--------
} 
```

Junit-测试：

```
@Test
    public void testUpdate() throws SQLException {
        presenter1.setName("PREE");
        boolean status = userDao.update(presenter1);
        List<User> users = userDao.searchMatching(presenter1);
        String name = users.get(0).getName();
        assertEquals(name, "PREE");
    } 
```

在设置中，我正在创建 Presenter1，如下所示：

```
// Create user
        presenter1 = new User(PRESENTER1, PASSWORD, PRESENTER_NAME1);
        //session.saveOrUpdate(presenter1);

        userDao.create(presenter1); 
```

请让我知道它为什么不更新实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:52:44.900

Why you declared tx.commit(); for commit? the correct declaration for commit is: session.getTransaction().commit();

Bye

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:09:51.130

当我发布这个问题时，我才意识到 update=false 是在映射文件中配置的。我为这个错误浪费了很多时间。:( 现在，我将其从映射文件中删除并使其正常工作。

# android - 启动活动的Android错误

> ID：12767137
> 
> 赞同：0
> 
> 时间：2012-10-07T08:06:31.573
> 
> 标签：android, runtime-error

我正在尝试从另一个活动开始一个活动，我收到一个错误并且应用程序强制关闭。这是logcat：

```
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.app.Activity.startActivity(Activity.java:2933)
10-07 11:28:35.021: E/AndroidRuntime(418):  at com.example.higlightvoice.Boicemain$4.onClick(Boicemain.java:187)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.view.View.performClick(View.java:2485)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.view.View$PerformClick.run(View.java:9080)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.os.Handler.handleCallback(Handler.java:587)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.os.Looper.loop(Looper.java:123)
10-07 11:28:35.021: E/AndroidRuntime(418):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-07 11:28:35.021: E/AndroidRuntime(418):  at java.lang.reflect.Method.invokeNative(Native Method)
10-07 11:28:35.021: E/AndroidRuntime(418):  at java.lang.reflect.Method.invoke(Method.java:507)
10-07 11:28:35.021: E/AndroidRuntime(418):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-07 11:28:35.021: E/AndroidRuntime(418):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-07 11:28:35.021: E/AndroidRuntime(418):  at dalvik.system.NativeStart.main(Native Method)
10-07 11:28:35.031: W/ActivityManager(61):   Force finishing activity com.example.higlightvoice/.Boicemain
10-07 11:28:35.598: W/ActivityManager(61): Activity pause timeout for HistoryRecord{40589670 com.example.higlightvoice/.Boicemain}
10-07 11:28:46.781: W/ActivityManager(61): Activity destroy timeout for HistoryRecord{40589670 com.example.higlightvoice/.Boicemain}
10-07 11:29:04.002: D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol 
```

这是我如何调用活动的代码：

```
Intent intent=new Intent(Boicemain.this,draw.class);
            startActivity(intent); 
```

这是我尝试调用的活动：

```
public class draw extends Activity {
drawview drawView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set full screen view
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                     WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    drawView = new drawview(this);
    setContentView(drawView);
    drawView.requestFocus();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:35:14.777

由于您没有在该日志上放置最重要的错误，我认为您没有在 AndroidManifest.xml 上定义您的活动。为了更好地检查您的错误，请从顶部开始放置所有错误日志

# javascript - Javascript数组删除或弹出导致console.log出现竞争条件？

> ID：12767141
> 
> 赞同：5
> 
> 时间：2012-10-07T08:07:15.020
> 
> 标签：javascript

在当前的 Google Chrome（版本 22.0.1229.79，在带有 Mountain Lion 的 iMac 上）上，以下代码

```
var arr = [1, 3, 5];
console.log(arr);

delete arr[1];
console.log(arr);

console.log(arr.pop());
console.log(arr); 
```

将会呈现

```
[1, undefined × 2] 
[1, undefined × 2] 
5 
[1, undefined × 1] 
```

还有其他情况导致 Firefox 的行为也类似。它们是 Chrome 和 Firefox 上的错误 - 但 Firefox 和 Chrome 都容易受到类似错误的影响似乎很奇怪 - 还是数组删除和的某些行为`console.log`？据说，`console.log`不应该在单独的线程上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:16:29.890

在 Firefox 7.0 中：

var arr = [1,3,5];

console.log(删除 arr[1]); //*将显示 [1, undefined, 5]*

在我看来，这是一个正确的行为 =) 所以可能它只是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:06:14.420

这是由于排队`console.log`处理，所以打印延迟，并显示更高版本的对象或数组：[Chrome 的 JavaScript 控制台是否懒于评估数组？](https://stackoverflow.com/questions/4057440/is-chromes-javascript-console-lazy-about-evaluating-arrays)

我的答案有 5 个解决方案，`JSON.stringify()`是最好的一个。

# python - 带有 interp1d IndexError 的 scipy 样条插值

> ID：12767145
> 
> 赞同：1
> 
> 时间：2012-10-07T08:07:35.217
> 
> 标签：python, numpy, matplotlib, scipy

我正在尝试开始使用 scipy，并且在使用“线性”以外的其他类型（我尝试了“零”和“立方”）时，似乎无法从[interpolation.interp1d中获取示例。](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html#scipy.interpolate.interp1d)

我在谷歌搜索时找不到遇到同样问题的人，所以我想这对我来说是愚蠢的。

我在 python 2.73 和 OSX 10.8 上使用 scipy 0.11

代码不起作用：

```
from scipy import interpolate
import numpy as np

x = np.arange(0, 10)
y = np.exp(-x/3.0)
f = interpolate.interp1d(x, y, kind="zero")
xnew = np.arange(0,9, 0.1)
ynew = f(xnew)   # use interpolation function returned by `interp1d`
plt.plot(x, y, 'o', xnew, ynew, '-')
plt.show() 
```

* * *

```
IndexError                                Traceback (most recent call last)
<ipython-input-1-23bb96a1589b> in <module>()
  4 f = interpolate.interp1d(x, y, kind="zero")
  5 xnew = np.arange(0,9, 0.1)
----> 6 ynew = f(xnew)   # use interpolation function returned by `interp1d`
  7 plt.plot(x, y, 'o', xnew, ynew, '-')
  8 plt.show()

/usr/local/lib/python2.7/site-packages/scipy/interpolate/interpolate.pyc in __call__(self, x_new)
394         out_of_bounds = self._check_bounds(x_new)
395 
--> 396         y_new = self._call(x_new)
397 
398         # Rotate the values of y_new back so that they correspond to the

/usr/local/lib/python2.7/site-packages/scipy/interpolate/interpolate.pyc in _call_spline(self, x_new)
370     def _call_spline(self, x_new):
371         x_new =np.asarray(x_new)
--> 372         result = spleval(self._spline,x_new.ravel())
373         return result.reshape(x_new.shape+result.shape[1:])
374 

/usr/local/lib/python2.7/site-packages/scipy/interpolate/interpolate.pyc in spleval((xj, cvals, k), xnew, deriv)
833             res[sl].imag = _fitpack._bspleval(xx,xj,cvals.imag[sl],k,deriv)
834         else:
--> 835             res[sl] = _fitpack._bspleval(xx,xj,cvals[sl],k,deriv)
836     res.shape = oldshape + sh
837     return res

IndexError: too many indices 
```

在这里启动调试控制台时，我可以将其缩小到 cvals[sl] 导致错误

```
sl = (slice(None, None, None), 0) # <-- I don't really get the slice part here...
cvals = array([ 1\.        ,  0.71653131,  0.51341712,  0.36787944,  0.26359714,
    0.1888756 ,  0.13533528,  0.09697197,  0.06948345]) 
```

有人可以重现这个还是我的机器上有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:32:49.083

看来，在遵循 OSX 上 scipy 的安装说明时，我安装了一个非发布版本的 numpy 却没有意识到。

用 pip 重新安装 numpy、scipy 和 matplotlib 解决了这个问题。

非常感谢 unutbu 指出问题的根源。

# c++ - Qt4/PyQt4 - 无法为 QTextDocument 设置默认字体

> ID：12767147
> 
> 赞同：1
> 
> 时间：2012-10-07T08:08:12.503
> 
> 标签：c++, python, qt4, pyqt4, qtextdocument

我的代码是这样的：

```
from PyQt4 import QtGui

doc = QtGui.QTextDocument()
d_font = QtGui.QFont('Times New Roman')
doc.setDefaultFont(d_font)

cur = QtGui.QTextCursor(doc)
cur.insertText('sample text')

writer = QtGui.QTextDocumentWriter()
writer.setFormat(writer.supportedDocumentFormats()[1])
writer.setFileName('CV')
writer.write(doc) 
```

输出中的“示例文本”在我的计算机上仍然是“Sans”，而不是“Times New Roman”。我已确保我的计算机具有“Times New Roman”字体。我怀疑这是一个错误。我正在使用 PyQt v4.9.5。

**编辑：**我使用的是 Ubuntu 12.04。我很确定 PyQt4 可以找到字体，因为以下代码有效：

```
d_font = QFont('Times New Roman')
char_fmt = QTextCharFormat()
char_fmt.setFont(d_font)
cur.insertText('Times New Roman', char_fmt) 
```

* * *

以 odt/odt 格式保存时，似乎并非所有格式都受支持，但在打印到 pdf 时一切正常。

```
from PyQt4.QtGui import *
import sys

doc = QTextDocument()
cur = QTextCursor(doc)

d_font = QFont('Times New Roman')
doc.setDefaultFont(d_font)

table_fmt = QTextTableFormat()
table_fmt.setColumnWidthConstraints([
    QTextLength(QTextLength.PercentageLength, 30),
    QTextLength(QTextLength.PercentageLength, 70)
    ])
table = cur.insertTable(5,2, table_fmt)
cur.insertText('sample text 1')
cur.movePosition(cur.NextCell)
cur.insertText('sample text 2')

# Print to a pdf file
# QPrinter: Must construct a QApplication before a QPaintDevice
app = QApplication(sys.argv)
printer = QPrinter(QPrinter.HighResolution)
printer.setOutputFormat(QPrinter.PdfFormat)
printer.setOutputFileName('sample.pdf')

# Save to file
writer = QTextDocumentWriter()
writer.setFormat(writer.supportedDocumentFormats()[1])
writer.setFileName('sample.odt')
writer.write(doc) 
```

setDefaultfonts 和 setColumnWidthConstraints 影响 sample.pdf，但不影响 sample.odt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:15:38.740

我可以在带有 PyQt4.8.5 的 Ubuntu Oneiric 盒子上看到相同的行为。我不认为这是一个错误。书写文本的字体取决于用于书写文本的光标字体。

以下内容应该适合您：

```
from PyQt4 import QtGui

doc = QtGui.QTextDocument()
cur = QtGui.QTextCursor(doc)

d_font = QtGui.QFont('Courier')
c_format = QtGui.QTextCharFormat()
c_format.setFont(d_font)
cur.setCharFormat(c_format)
cur.insertText('sample text')

writer = QtGui.QTextDocumentWriter()
writer.setFormat(writer.supportedDocumentFormats()[1])
writer.setFileName('CV')
writer.write(doc) 
```

我使用 Courier 是因为我的系统上没有安装 Times New Roman。

# java - 如何刷新 JSF h:panelGroup？

> ID：12767149
> 
> 赞同：0
> 
> 时间：2012-10-07T08:08:38.737
> 
> 标签：java, jsf-2, facelets

我在`f:ajax`开发中使用 JSF 2.0、战斧和一些东西。我正在尝试为我的 JSF 应用程序制作一些神奇的词。当你点击这个单词时，它会变成另一个，再次点击它会再次变回来。为了更清楚，这里有一个场景。原字显示 XX，点击 XX 后，XX 变为 YY。当点击 YY 时，会变回 XX。你感受到魔法了吗？:P

我就是这样做的。我创建 2 `h:panelGroup`。一个包含 XX 字，另一个包含 YY 字，如下所示：

```
<h:panelGroup id="Panel_X">
   <h:outputText value="XX" />
</h:panelGroup>

<h:panelGroup id="Panel_Y">
   <h:outputText value="YY" />
</h:panelGroup> 
```

为了使其可点击，我使用 commandLink。从上面的代码修改，变成这样：

```
<h:panelGroup id="Panel_X" rendered="#{magicBean.show_X == true}">
   <h:commandLink action="#{myBean.doFunc}">
      <f:ajax event="action" render="Panel_Y"/>
      <h:outputText value="XX" />
   </h:commandLink>
</h:panelGroup>

<h:panelGroup id="Panel_Y" rendered="#{magicBean.show_X == false}">
   <h:commandLink action="#{myBean.doFunc}">
      <f:ajax event="action" render="Panel_X"/>
      <h:outputText value="YY" />
   </h:commandLink>
</h:panelGroup> 
```

这是支持bean：

```
@ManagedBean(name = "magicBean")
@SessionScoped
public class MagicWordBean {

   public boolean show_X = true;

   /** getter and setter of show_X **/

   public String doFunc() {

      showX = !showX;
      return "";
   }
} 
```

我不确定我是否做得正确，但有一件事我确信它不起作用。最初加载页面时，它显示 XX 字。点击XX字时，YY字不显示，XX字留在原处。

对此有任何线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:20:43.683

我认为这`render="Panel_Y"`是您的问题：您正在尝试渲染最初未在页面上渲染的内容。尝试渲染父/容器（即包含两个面板的 h:form），这将`rendered="#{magicBean.show_X == false}"`在您的第二个面板中重新评估。我还可以建议将后者更改为`rendered="#{magicBean.show_Y}"`以提高可读性...

# java - 在 mousePressed 中使用图形对象

> ID：12767153
> 
> 赞同：1
> 
> 时间：2012-10-07T08:10:20.583
> 
> 标签：java

在 mousePressed 方法中，我不能使用任何与图形相关的方法，例如此代码将运行但不起作用

```
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Control extends BasicGameState {
public static final int ID = 1;

public Graphics g = new Graphics();

public void init(GameContainer container, StateBasedGame game) throws SlickException{
}

public void render(GameContainer container, StateBasedGame game, Graphics g) throws SlickException {
}

public void update(GameContainer container, StateBasedGame game, int delta) {
}

public void mousePressed(int button, int x, int y){
    g.drawRect(x,y,2,2);
}

public int getID() {
    return ID;
}

} 
```

为什么没有任何面向图形的方法可以运行？

谢谢 - 沙姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T03:07:08.147

与其尝试在鼠标事件中绘制东西，不如调用该`repaint()`函数？保存`paint()`函数的图形命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:22:32.270

这不是绘画的工作方式。绘画是重绘经理的职责。

您需要覆盖适当的方法才能知道何时绘制。

看一下

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [二维图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)（更多关于绘画的工作原理）

# javascript - 更改类名的 JS 或 Jquery 通用方法

> ID：12767157
> 
> 赞同：0
> 
> 时间：2012-10-07T08:10:45.317
> 
> 标签：javascript, jquery, image, class, button

我得到以下情况：

**元素：**图像 A、图像 B、按钮 A、按钮 B

**默认值：**
1\. 显示图像 A 并隐藏图像 B。（添加类名“隐藏”）
2\. 添加到激活按钮 A 的样式。（添加类名“活动”）

**功能：**
1\. 点击按钮A时，显示图片A，隐藏图片B。反之亦然。
2.样式被添加到激活的按钮。反之亦然。

**代码：**

```
<img class="image" src="ImageA.jpg" />
<img class="image hidden" src="ImageB.jpg" />
<div class="Button active">Button A</div>
<div class="Button">Button B</div> 
```

我想在不进一步更改 JavaScript 的情况下将该函数应用于上述一种以上的情况。有什么方法可以以通用的方式呈现 JS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:16:02.690

```
<img id="imageA" class="image" src="ImageA.jpg" />
<img id="imageB" class="image hidden" src="ImageB.jpg" />
<button attr-image="imageA" class="Button active">Button A</button>
<button attr-image="imageB" class="Button">Button B</button>

$(".button").click(function(){
    $('.image').addClass('hidden');
    $('#'+$(this).attr('attr-image')).removeClass('hidden');
    $('.button').removeClass('active');
    $(this).addClass('active');
}) 
```

它的作用是对每个按钮存储相应图像的 id。

单击按钮时，它会添加`hidden`到所有图像，然后将其从与按钮对应的图像中删除。

按钮的相同方法首先删除所有按钮`active`类，然后添加到单击的那个..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:42:01.550

如果要切换图像，则不需要 2 个 div 和 2 个按钮。`src`您可以使用一个按钮在一张图像中切换图像。就像是：

HTML：

```
<img id="switchme" data-checked="0" class="image" src="imageA.png" />
<div id="switch" class="Button">Button A</div> 
```

脚本（jQuery）：

```
​$('#switch').on('click',
 function​​​​​​​​​​​​​​​​​​​​​​(){
  var img = $('#switchme') 
     ,ischecked = Boolean(+img.attr('data-checked'))
     ,src = ischecked
            ? 'imageA.png'
            : 'imageB.png'
  ;
  img.attr({'src':src, 'data-checked': +(!ischecked)});
}); 
```

请参阅[**jsfiddle**](http://jsfiddle.net/Tdrjs/)（还包含使用 css 类进行切换的替代方法，以及“2 按钮/1 图像”解决方案）

# amazon-ec2 - 亚马逊网络服务流程管理器？

> ID：12767158
> 
> 赞同：0
> 
> 时间：2012-10-07T08:10:51.043
> 
> 标签：amazon-ec2, amazon-web-services

我想安排一些夜间 EMR 任务并运行自定义脚本：

有些需要在临时实例上运行，有些则需要在运行服务器本身的临时实例上运行，因此仅当 cpu / 内存阈值低于某个百分比时才需要运行。

你怎么做？没有 24 小时运行的实例来协调所有这些，这个过程如何扩展？

另外，你如何创建流程（这个工作需要在那个之后运行，只有在它成功的情况下，否则不要运行），你可以自动输出到 S3 吗？

有没有例子？我遇到了[http://aws.amazon.com/swf/](http://aws.amazon.com/swf/)但仍然不确定这是否是我所追求的... tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:52:30.147

Amazon Simple Workflow Service (SWF) 是 Amazon 针对此类工作流的预期解决方案。

# wordpress - 使用特定标签在自定义帖子类型和分类中搜索

> ID：12767163
> 
> 赞同：1
> 
> 时间：2012-10-07T08:12:03.847
> 
> 标签：wordpress, taxonomy, custom-post-type

我有两种自定义帖子类型：产品和常见问题。产品帖子类型具有分类 product_tag。所以现在，我想在博客和常见问题解答中搜索文本“食物”以及那些标签为“食物”的产品。

这是查询的参数：

```
$args = array(
    'tax_query' => array(
        array(
            'taxonomy' => 'product_tag',
            'field' => 'slug',
            'terms' => 'food'
        )
    ),
    'post_type' => array('post', 'faq', 'product'),
    'posts_per_page' => 6,
    's' => 'food',
    'paged' => $paged
); 
```

但我没有得到任何结果。如果我从代码中删除 tax_query 数组，我会得到结果，但不会显示所有以食物为标签的产品。它只是搜索其中的文本。

那么，我需要进行哪些修改才能在此处获得相关帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T05:38:48.180

对于任何有兴趣的人，这就是我解决它的方法：

```
<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

$args1 = array(
    'post_type' => array('post', 'faq'),
    'posts_per_page' => 6,
    's' => $problem,
    'paged' => $paged
);

$args2 = array(
    'tax_query' => array(
        array(
            'taxonomy' => 'product_tag',
            'field' => 'slug',
            'terms' => $problem
        )
    ),
    'post_type' => 'product',
    'posts_per_page' => 6,
    'paged' => $paged
);

$articleposts = get_posts( $args1 );
$productposts = get_posts( $args2 );

$mergedposts = array_merge( $articleposts, $productposts );

foreach( $mergedposts as $singlepost ) : setup_postdata( $singlepost );
?>
<h2><a href="<?php echo get_permalink( $singlepost->ID ); ?>"><?php echo $singlepost->post_title; ?></a></h2>
<?php endforeach; ?> 
```

# stored-procedures - 使用 CTE 从存储过程运行时，查询会给出未排序的结果集

> ID：12767164
> 
> 赞同：0
> 
> 时间：2012-10-07T08:12:12.547
> 
> 标签：stored-procedures, sql-server-2008-r2, common-table-expression, row-number

我正在尝试使用 CTE 创建分页查询。当我从 Microsoft SQL Server Management Studio 查询编辑器执行它时，它工作正常。结果集完全按照我的意愿排序。但是当我为存储过程修改它时，它给了我一个未排序的结果，我不知道为什么。

这是我的查询，

```
with items as
(
select ROW_NUMBER() over (order by create_time desc) number
    , i.item_name item_name
    , i.create_time create_time
    , c.category_name category_name
    , i.category_id category_id
from cb_item i, cb_category c
where i.category_id = c.category_id
and c.category_id = '4E5248FE-05DD-4D01-ABBB-80C6E3BA5CDA' 
)
select item_name
, create_time
, category_name
, category_id
from items
where number between 1 and 25 
```

这是存储过程版本，

```
 create procedure ItemPage @category_id uniqueidentifier
    , @from int
    , @to int
    , @sortby nvarchar(50)
    as
    begin
    with items as
    (
    select ROW_NUMBER() over (order by @sortby) number
        , i.item_name item_name
        , i.create_time create_time
        , c.category_name category_name
        , i.category_id category_id
    from cb_item i, cb_category c
    where i.category_id = c.category_id
    and c.category_id = @category_id 
    )
    select item_name
    , create_time
    , category_name
    , category_id
    from items
    where number between @from and @to
    end

exec itempage '4E5248FE-05DD-4D01-ABBB-80C6E3BA5CDA' , 1, 25, 'create_time desc' 
```

第一个给了我排序的结果，但过程给了我未排序的结果。我不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:57:54.993

您必须按语句顺序使用 Case，您可以在其中检查传递的值并相应地按行排序。

您的查询应该是这样的：

```
 create procedure ItemPage @category_id uniqueidentifier
        , @from int
        , @to int
        , @sortby nvarchar(50)
        as
        begin
        with items as
        (
        select ROW_NUMBER() over (order by
                                    CASE @sortby
                                    WHEN 'create_time desc' THEN  create_time -- Here, I assume passed @sortby value is create_time , otherwise you can mapped with passed value
                                    END
                                    DESC,
                                    CASE @sortby
                                    WHEN 'create_time asc' THEN  create_time -- Here, I assume passed @sortby value is create_time , otherwise you can mapped with passed value
                                    END
                                    ASC
                                    ) number
            , i.item_name item_name
            , i.create_time create_time
            , c.category_name category_name
            , i.category_id category_id
        from cb_item i, cb_category c
        where i.category_id = c.category_id
        and c.category_id = @category_id 
        )
        select item_name
        , create_time
        , category_name
        , category_id
        from items
        where number between @from and @to
        end 
```

# javascript - 可见性属性停止在 Chrome 中为我工作

> ID：12767165
> 
> 赞同：6
> 
> 时间：2012-10-07T08:12:23.027
> 
> 标签：javascript, html, css, iframe

几个月前我创建了一个网络应用程序，并在 ie、ff 和 chrome 中测试它工作正常。

昨晚我去添加一些东西，发现我的隐藏 iframe 功能不再在 chrome 中工作。

如果我检查元素，我可以看到属性确实在变化，但 iframe 并未隐藏。

```
function hideIFrame(){
    document.getElementById("myFrame").style.visibility="hidden";
    self.focus();
}

function showIFrame(){
    document.getElementById("myFrame").style.visibility="visible";
} 
```

myFrame div 开始隐藏。并且成功可见，但是当可见性更改为隐藏镀铬时，它并没有隐藏它，ff和ie仍然隐藏它。

知道为什么吗？

**修复：**

```
function hideIFrame(){
    document.getElementById("myFrame").style.visibility="hidden";
    document.getElementById("myFrame").style.opacity=0;
    self.focus();
}

function showIFrame(){
    document.getElementById("myFrame").style.visibility="visible";
    document.getElementById("myFrame").style.opacity=1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:17:15.530

iframe 可见性切换存在问题（[$('iframe').css('visibility','hidden') 在 google chrome 中不起作用](https://stackoverflow.com/questions/7712292/iframe-cssvisibility-hidden-not-working-in-google-chrome)）。如果您希望它消失，请使用高度，宽度：0。如果您希望它只是不可见，请使用 opacity:0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:53:14.730

我没明白你的问题。可能您应该在调用该函数的地方发布更多代码。这是一个在 chrome 中运行良好的示例代码。

```
<script type="text/javascript">
function hideIFrame(){
document.getElementById("myFrame").style.visibility="hidden";
self.focus();
}

function showIFrame(){
document.getElementById("myFrame").style.visibility="visible";
}
</script>

<input type="button" onclick="hideIFrame()" value="hide"/>
<input type="button" onclick="showIFrame()" value="show"/>

<iframe id="myFrame">

</iframe> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-06T08:19:08.360

改用 display.none

```
 function hideIFrame(){ 
document.getElementById("myFrame").style.display="none";
    self.focus();
}

function showIFrame(){
    document.getElementById("myFrame").style.display="inline";
   //or document.getElementById("myFrame").style.display="block";
}` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-12T07:15:14.743

在我的情况下，我将只使用 JS onload 来隐藏元素，我将能够使用 JS 来切换`visibility="visible"`

```
window.onload = function() {
  document.getElementById("newDiv").style.visibility = "hidden";
}
function showHidden() {
  document.getElementById("newDiv").style.visibility = "visible";
} 
```

# c++ - c ++简单的if语句不检查？

> ID：12767166
> 
> 赞同：1
> 
> 时间：2012-10-07T08:12:29.080
> 
> 标签：c++, windows, if-statement, 3d, mouse

我有一个“鼠标阅读器”类，可以将旋转变成 x、y、z。（这是一种第一人称相机）但我不希望这个人直接看他的轴，所以我这样做了：

```
if (!(Altitude  +  MouseCoordChange[1] > 269) && !(Altitude  +  MouseCoordChange[1] < 91))
{ 
```

我计算了检查，它很完美，它可以防止你过多地上下波动，但有时它会低于 91 和 269，这怎么可能？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:23:53.700

你违反了 [德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

换句话说：

!A && !B = !(A || B)

我怀疑你想要的是：

```
if (!((Altitude  +  MouseCoordChange[1] > 269) || 
      (Altitude  +  MouseCoordChange[1] < 91)))
{ 
```

或者更清楚：

```
if ((Altitude  +  MouseCoordChange[1] <= 269) && 
    (Altitude  +  MouseCoordChange[1] >= 91)))
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:14:08.643

好的，只是为了调试，试试这个逆逻辑。

```
if (  (Altitude  +  MouseCoordChange[1] < 91) &&  (Altitude  +  MouseCoordChange[1] > 269)  )
{

  //Do nothing here
}
else
{

  //Do stuff here

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T09:40:25.003

Range-checking happens quite often so a template will be useful for that:

```
template< typename _T > bool inrange(_T first, _T last, _T value)
{
    return ((value>=first) && (value<=last));
} 
```

In your case:

```
if (inrange(91, 269, (Altitude  +  MouseCoordChange[1]))
{
    //is in the range - do something
}
else
{
    //is outside the range - do something
} 
```

# css - 如何在 IE 8 中使用媒体查询

> ID：12767172
> 
> 赞同：-1
> 
> 时间：2012-10-07T08:13:05.157
> 
> 标签：css, media-queries

我的网站内容在 1024 x768 分辨率下不清晰可见，其余工作正常。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:15:55.803

我认为您正在寻找 CSS3 媒体查询。此脚本模拟本机不支持它的浏览器的媒体查询。

[http://code.google.com/p/css3-mediaqueries-js/](http://code.google.com/p/css3-mediaqueries-js/)

# magento - Magento 客人结帐时未显示送货方式

> ID：12767173
> 
> 赞同：5
> 
> 时间：2012-10-07T08:13:18.380
> 
> 标签：magento, checkout, magento-1.7

我的结帐页面出现奇怪的问题。我正在使用一步结帐，尝试使用访客结帐时未显示任何运输方式。但是，一旦我尝试登录结帐，它就会显示所有运输方式。当我尝试调试时，我发现 Mage_Checkout_Block_Onepage_Shipping_Method_Available::getShippingRates() 在我未登录时返回空白数组。我正在使用 magento 1.7 CE。任何帮助将不胜感激。

谢谢 ，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:39:08.930

一些建议：如果有任何问题，请检查以下日志文​​件：

*   var/log/exception.log
*   var/log/system.log
*   和你的 php 日志

# java - 创建一个使用 mysql 数据库的 java 应用程序后，用户的计算机需要什么才能正常运行它？

> ID：12767175
> 
> 赞同：0
> 
> 时间：2012-10-07T08:13:23.847
> 
> 标签：java, mysql, database

所以我一直在开发一个允许用户查看和操作数据库的程序。UI 几乎准备就绪，很快我将创建与数据库的连接。我想知道用户是否能够运行可分发的 jar 而无需安装其他程序（例如 sql server 等）。我希望你们能告诉我。

我还没有完全决定是使用 mysql 数据库还是 netbeans 的 java DB。我想我宁愿使用 mysql，因为它有更多的教程，而且我真的对数据库一无所知，我将度过一段艰难但有趣的时光，学习让我的程序运行所需的一切。任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:21:38.070

是的，该 Java 应用程序无需安装其他任何东西即可运行（当然，Java 除外）。

该应用程序需要包含 MySQL 的 JDBC 驱动程序，这[可能是也可能不是许可问题](http://www.xaprb.com/blog/2009/02/17/when-are-you-required-to-have-a-commercial-mysql-license/)。如果您无法将其与您的应用程序一起发布，则用户必须单独下载。

为了使用该程序，用户将需要访问数据库以查看和操作。出于安全原因，这通常只能通过本地 Intranet 或 VPN 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:20:03.280

如果您的应用程序访问某个远程服务器上的数据库 - 那么您无需执行任何操作，只需将带有适当 JDBC 驱动程序的 JAR 文件与您的应用程序一起发送。这个 JAR 文件也必须添加到类路径中。

如果应用程序在程序运行时访问同一主机上的数据库服务器，那么显然应该安装了一些数据库服务器（在这种情况下是 MySQL）。但是，如果该应用程序专用于数据库管理员或类似的人——那么你仍然不必担心数据库的存在——它就会在那里。

# javascript - 一张一张显示 JSON 数据

> ID：12767176
> 
> 赞同：1
> 
> 时间：2012-10-07T08:13:31.113
> 
> 标签：javascript, json

我有这样的 JSON 数据

```
[
"00-00-02":"first one",
"00-00-04":"the second",
"00-00-09":"third",
.
.
] 
```

例如，我如何显示：`first one`在指定时间`00-00-02`然后在其时间显示下一个`00-00-04`？
**注意**：我应该使用 javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:43:51.393

如果您使用 UNIX 时间，您可以很容易地进行比较 - 例如

```
变量数据 = {
   "1349598808" : "第一个",
   "1349598845" : "第二个",
   “1349599400”：“第三”
};

现在变种；
变数秒；

设置间隔（函数（）{
     现在 = 新日期（）；
     秒 = Math.round(now.getTime()/1000);
     如果（数据[秒]！=未定义）
     {
          控制台.log（数据[秒]）；
          // 或者
          // 原型JS
          $("mydiv").update(数据[秒]);
          // 或者
          // jQuery
          $("#mydiv").html(数据[秒]);
     }
},1000);
​​​

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:09:49.147

@Geek Num 88 建议了正确的方法。在这种情况下，通常使用 unix 时间戳。如果你不能改变json，你可以做这样的事情

```
var data = {
"00-00-02":"first one",
"00-00-04":"the second",
"00-00-09":"third"
}
var timeout;
var start = new Date();
function showIt(){
    var now = new Date();
    var diff = now - start;
    var hh = Math.floor(diff / 600000);
    hh = (hh < 10)?"0" + hh : hh;
    var mm = Math.floor((diff % 3600000) / 60000);
    mm = (mm < 10)?"0" + mm : mm;
    var ss = Math.floor((diff % 60000 ) / 1000); 
    ss = (ss < 10)?"0" + ss : ss;

    if(data[hh + "-" + mm + "-" + ss]){
       console.log(data[hh + "-" + mm + "-" + ss]);
    }

    clearTimeout(timeout);
    timeout = setTimeout(showIt, 1000);
}

showIt(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:16:23.933

您应该知道视频字幕已经是一个东西，您不需要重新实现它们。

您可以`track`使用 HTML5 中的元素，[http](http://www.html5rocks.com/en/tutorials/track/basics/) ://www.html5rocks.com/en/tutorials/track/basics/，或者如果您需要更多兼容性，您可以使用 popcorn.js：[http](http://popcornjs.org/) ://popcornjs.org/ .

如果您不想这样做，那么只需使用 window.setTimeout 来显示每个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T09:04:34.910

您可以尝试使用该`setTimeout(fn, time)`函数在计算的间隔后调用“first-one”、“the-second”...。伪代码将类似于

```
data = ["00-00-02":"first one", "00-00-04":"the second", "00-00-09":"third",...];
//using [key: value] notation
for (i=0; i<data.length; i++) {
    eventTime = timeInMilliSeconds(data[i].key);
    setTimeout(printMyMessage(data[i].value, eventTime);
} 
```

或者你可以在函数调用中调用`setTimeout()`for 。在这种情况下，函数的第二个参数将是和之间的时间差异。`data[i]``printMyMessage()``data[i-1]``setTimeout()``data[i]``data[i-1]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T08:23:26.000

你有一个只有json的数组吗？如果您有 json，则以下内容将起作用：

```
var data = {
  "00-00-02":"first one",
  "00-00-04":"the second",
  "00-00-09":"third"
}

Object.keys(data).forEach(function(key) {
  var val = data[key];
  console.log("the " + val + " had a time of " + key + " seconds")
}); 
```

# radgrid - 使用 CSS 样式导出 RadGrid

> ID：12767180
> 
> 赞同：0
> 
> 时间：2012-10-07T08:13:56.630
> 
> 标签：radgrid, export-to-pdf

我正在尝试以与网格相同的 CSS 样式将我的 RadGrid 导出为 Pdf...

这是我的方法：

```
<ExportSettings IgnorePaging="true" OpenInNewWindow="true">
   <Pdf PageHeight="162mm" PageWidth="600mm" PageTitle="Payment Orders" DefaultFontFamily="Arial Unicode MS" Title="Payment Orders"
                PageBottomMargin="50mm" PageTopMargin="35mm" PageLeftMargin="150mm" PageRightMargin="50mm" Author="AbdanSoftware" PaperSize="A4" />
</ExportSettings> 
```

代码行为或客户端的任何方式都可以做到这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:21:13.253

您可以像这样为您的 RadGrid 设置导出设置：

```
RadGrid1.ExportSettings.FileName = "File Name"
RadGrid1.ExportSettings.ExportOnlyData = True
RadGrid1.ExportSettings.IgnorePaging = True
RadGrid1.ExportSettings.OpenInNewWindow = True
RadGrid1.ExportSettings.Pdf.PageHeight="162mm"
RadGrid1.ExportSettings.Pdf.PageWidth="600mm"
RadGrid1.ExportSettings.Pdf.PageTitle="Payment Orders"
RadGrid1.ExportSettings.Pdf.DefaultFontFamily="Arial Unicode MS"
RadGrid1.ExportSettings.Pdf.Title="Payment Orders"
RadGrid1.ExportSettings.Pdf.PageBottomMargin="50mm"
RadGrid1.ExportSettings.Pdf.PageTopMargin="35mm"
RadGrid1.ExportSettings.Pdf.PageLeftMargin="150mm"
RadGrid1.ExportSettings.Pdf.PageRightMargin="50mm"
RadGrid1.ExportSettings.Pdf.Author="AbdanSoftware"
RadGrid1.ExportSettings.Pdf.PaperSize="A4" 
```

**编辑：**要在导出中包含 css，您可以在`HTMLExporting`Word 和 Excel 格式的事件中这样做。**对于 PDF 导出，仅应用内联样式**。

```
Private Sub RadGrid1_HTMLExporting(sender As Object, e As Telerik.Web.UI.GridHTMLExportingEventArgs) Handles RadGrid1.HTMLExporting
    Dim css As String = "body { color: red; }"
    e.Styles.Append(css)
End Sub 
```

查看[此文档](http://www.telerik.com/help/aspnet-ajax/grid-html-export.html)以获取有关 Word/Excel 导出的更多帮助，以及[此文档](http://www.telerik.com/help/aspnet-ajax/grid-pdf-export.html)以获取 PDF 导出帮助。

# html - 如何根据先前的选择在 twitter bootstrap 中为 typeahead 创建一个新列表？

> ID：12767181
> 
> 赞同：1
> 
> 时间：2012-10-07T08:13:57.090
> 
> 标签：html, autocomplete, twitter-bootstrap, frontend, typeahead

我在这里看到了像这样的 bootstrap typeahead 插件的分支：

[https://gist.github.com/1866577](https://gist.github.com/1866577)

但是，我无法理解如何构建我的 Web 应用程序所需的表单元素。基本上，我希望我的 Web 应用程序模仿以下网站提供的功能：

[slugbooks.com](http://www.slugbooks.com)

我需要 3 个自动完成表单，就像他们在那个网站上一样。但我想使用 Twitter Bootstrap，因为我的 Web 应用程序的其余部分都在 Bootstrap 中。我需要像大学一样的第一个自动完成功能......这很容易通过引导输入插件来完成。我已经弄清楚了这部分。现在，带有自动完成功能的下拉列表的下一个是它变得复杂的地方。

由于这个 StackOverflow 问题，我已经学会了如何制作预先输入的下拉菜单：

[向 Twitter bootstrap typeahead 组件添加下拉按钮](https://stackoverflow.com/questions/10689830/adding-a-dropdown-button-to-twitter-bootstrap-typeahead-component)

现在我只需要一种方法来根据选择了哪个学院然后选择了哪个部门来动态生成下拉列表的数据源。此外，选择适当的课程（第三个下拉菜单）应该将我重定向到特定页面（例如：site.com/college/coursename.html）

我将如何使用 Twitter Bootstrap Typeahead 完成此任务？

数据示例：

学院：

*   犹他州
*   UMIAMI
*   南加州大学
*   斯坦福

部门：

*   1,2,3 <= 斯坦福
*   4,5,6 <= 南加州大学
*   7,8,9 <= UMIAMI
*   A,B,C <= UTEXAS

培训班：

*   一个 <= 1
*   b <= 2
*   c <= 3
*   d <= 4
*   e <= 5
*   f <= 6
*   g <= 7
*   h <= 8
*   我 <= 9
*   j <= A
*   k <= B
*   l <= C

警告：我是 javascript/AJAX 菜鸟，所以如果涉及 javascript/AJAX，请指导我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T22:49:44.467

这是应该让你开始的东西：[现场演示（jsfiddle）](http://jsfiddle.net/Sherbrow/fsxGj/2/)

```
// This wrapping is here only for visibility on JSFIDDLE (and because it's fun)
!function(colleges, ajaxLoadDepartments){
    var $one = $('#one');
    var $two= $('#two');

    var loadSourceForTwoWith = function(item) {  // Function that reset the departments, accepts the name of the college
        $two.data('typeahead', false).val('');       // Clear departments
        ajaxLoadDepartments(item, function(departments) {     // This fonction should be the success of the ajax call
            $two.typeahead({                           // this ajax call should return the departments of the `item` college
                source: departments                    // as an array of strings
            }).focus();
        });
    };

    $one.typeahead({
        source: colleges,
        updater: function(item) { // Item is selected, should return item
            loadSourceForTwoWith(item);
            return item;
        }
    });

}( /* Don't bother too much with what's below, just use your what is above with your real code(ajax) and data */
    ['UTEXAS', 'UMIAMI', 'USC', 'STANFORD'],
    function(item, callback) {
        var jsonResponse = {
            'STANFORD' : ['X1','X2','X3'],
            'USC' : ['X4','X5','X6'],
            'UMIAMI' : ['X7','X8','X9'],
            'UTEXAS' : ['XA','XB','XC']
        };

        $.ajax('/echo/json/', {
            type: 'post',
            data: {json: JSON.stringify(jsonResponse[item])}
        }).done(function(data) {
            callback(data);
        });
    }
); 
```

这个简单的示例向您展示了如何：

*   为所选项目设置您自己的回调：请参阅`updater`
*   重置预输入源（非常困难的方法）：见`.data('typeahead', false)`
*   使用回调函数异步加载
*   在 JS 中弄乱人头

在进行任何复制/粘贴之前，您应该知道这仅使用标准的 typeahead 插件，并且没有对错误处理（输入、ajax 错误、延迟用户意识）做任何事情

# eclipse - 在 Eclipse RCP 应用程序中查找当前选定视图的 ID

> ID：12767184
> 
> 赞同：3
> 
> 时间：2012-10-07T08:14:37.010
> 
> 标签：eclipse, view, swt, rcp

我在运行我的 Eclipse RCP 应用程序时打开了许多视图。谁能告诉我如何在我的工作台中获取当前选定视图的视图 ID（不是辅助视图 ID）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T10:49:04.500

最后，我有一种方法可以在我的应用程序的工作台中获取当前选定（打开）视图的视图 ID，如下代码行：

```
IWorkbenchPage wbp = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
String id = wbp.getActivePartReference().getId(); 
```

这正是我所寻求的。

# php - phpmyadmin 默认值

> ID：12767187
> 
> 赞同：1
> 
> 时间：2012-10-07T08:15:45.123
> 
> 标签：php, mysql, phpmyadmin

我的数据库有一个带有图像列的配置文件表。如果用户没有在 Web 表单中插入他的图像 URL，我想使用默认值设置默认图像。

列定义：

```
profile_image varchar(255) NOT NULL DEFAULT 'http://i.imgur.com/U.png' 
```

我已经在 phpmyadmin 中插入了默认图像 URL，但是每次单击 web 表单上的提交时，webform 中的每个数据键都存储在配置文件表中，但图像列是空的。

我知道我可以通过在 Web 表单中添加图像 URL 来使用表单执行此操作，但我想通过 mysql 执行此操作。

这个问题解决了，因为我在 php insert 中插入了图像，但是如何使用 null 值让 mysql 知道我正在发送 NULL？这是使用 Null 的正确方法吗？

```
$nl = NULL; 
$query = "INSERT INTO `student` (
`name` ,
`emel` ,
`address` ,
`profile_image` 
)
VALUES (
'$name', '$emel', '$add', '$nl');"; 
```

上面的代码不起作用。profile_image 列仍为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:24:58.603

你需要做两件事：

1.）为图像指定列的默认值，可能类似于`default.jpg`
（我相信你已经这样做了）

2.) 确保您的 php 脚本提供`null value`（非空）或`don't specify the value at all`在插入/修改期间，因此您的 mysql 知道它需要使用默认值。或者您可以处理 php 脚本中的逻辑以提供默认图像的 url。我会避免使用 SQL 中的一些复杂函数，因为您的逻辑可能会随着时间而改变，而 SQL 服务器确实不应该负责处理应用程序逻辑。

# jquery - JQuery - click(fn) 不适用于动态添加的按钮

> ID：12767190
> 
> 赞同：0
> 
> 时间：2012-10-07T08:16:01.043
> 
> 标签：jquery

以前，我使用的代码是有效的。但是今天，当我重新使用代码时，它根本不起作用。

代码/案例情况：我预定义了一个 html 代码，它在现有的默认表单之后插入一个新表单。我正在尝试使用 jQuery 向`click`新表单中的一个按钮添加一个函数。jQuery 代码是

```
$("button[value='ADDTSG']").click(function(){
    var NEW = "<div class='w175 mR9 mB9 p9 rCor cWhi' id='fL'><form action='pro/lab_handle.php' method='post'><input type='hidden' value='0' name='LID'/><div class='w65 B ttU mR9' id='fL'>TPC</div><input type='text' class='w65 Dg4' name='QTPC'/><br/><hr/><button value='NEWTSG' name='BTN' type='submit'><img src='img/add.png'/></button><button id='fR' type='button' value='XTSG'><img src='img/del.png'/></button></form></div>";

    $(".FORCLONE").after(NEW);
    $("button[value='ADDTSG']").hide();
    $("button[value='SAVETSG']").hide();
});

// buttons below not alerting at all, no function after click on it
$("button[value='XTSG']").click(function(){
    alert("close tsg"); return false;
});
$("button[value='NEWTSG']").click(function(){
    alert("new tsg"); return false;
}); 
```

默认表单的 html 是

```
<div id='fL' class='FORCLONE'>
<div id='fL' class='w175 bgBlu1 mR9 mB9 p9 rCor cWhi'>
    <form method='post' action='pro/lab_handle.php'>
        <input type='hidden' name='LID' value='1'>
        <div id='fL' class='w65 B ttU mR9'>TPC</div><input type='text' name='MTPC' class='w65 Dg4' value='555'>
        <button type='submit' name='BTN' value='SAVETSG'><img src='img/ok.png'></button>
        <button id='fR' type='button' value='ADDTSG'><img src='img/add.png'></button>
    </form>
</div>
</div> 
```

谁能告诉我为什么这不起作用？顺便说一句，我正在使用带有 web-developer 插件的 FireFox，即使我点击“XTSG”/“NEWTSG”按钮，也没有显示 javascript 错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T08:34:03.753

使用[.live()](http://api.jquery.com/live/)（对于较旧的 jquery 版本 - < v1.7）：

```
$('#btnALERT1').live('click', function()
{
   alert("Hello");
}); 
```

或者：

```
$(document).delegate('#btnALERT1', 'click', function() 
{
   alert("Hello");
}); 
```

使用[.on()](http://api.jquery.com/on/)（对于新的 jquery 版本 - >= 1.7）：

```
$(document).on('click', '#btnALERT1', function()
{
   alert("Hello");
}); 
```

[来源](https://stackoverflow.com/questions/12561795/how-do-i-execute-an-event-using-jquery-through-an-html-objectbutton-created-th/12561844#12561844)。

# c# - 在 C# 中为泛型类型定义显式转换

> ID：12767192
> 
> 赞同：2
> 
> 时间：2012-10-07T08:16:17.853
> 
> 标签：c#, generics, casting, explicit

作为练习的一部分，我试图为泛型类定义与特定类型一起使用时的特定行为。更准确地说，我想知道是否可以为泛型类型定义显式转换运算符，即 from `list<T>`to`int[]`

不，我知道我可以简单地定义一个完成工作的方法，但这不是练习的目标。

假设泛型类`list<T>`我试图定义以下显式转换方法

```
class list<T> {
...

    public static explicit operator int[](list<T> _t) where T : System.Int32 
    {
        // code handling conversion from list<int> to int[]
    }
} 
```

然而，这不起作用。关于如何让编译器吞下这个的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:28:20.880

首先，*请*更改类的名称以遵循 .NET 约定*并*避免与 .NET 冲突`List<T>`。

有了这个，你基本上不能做你想做的事。您*可以*定义对*all* `T`有效的转换，然后针对不同的情况采取不同的操作。所以你可以写：

```
public static explicit operator T[](CustomList<T> input) 
```

`T`如果is则区别对待`int`。做最后一部分并不好，但如果你真的愿意，你可以做。

无论类型参数（在类型参数声明时声明的约束内），特定泛型类型上可用的成员都是相同的 - 否则它不是真正的泛型。

作为替代方案，您可以在其他地方的顶级静态非泛型类型中定义扩展方法：

```
public static int[] ToInt32Array(this CustomList<int> input)
{
    ...
} 
```

这将允许你写：

```
CustomList<int> list = new CustomList<int>();
int[] array = list.ToInt32Array(); 
```

无论如何，我个人会发现这比显式转换运算符更清楚。

# php - PHP 中的 Web 服务 - 只是另一个 PHP 文件/url？

> ID：12767199
> 
> 赞同：0
> 
> 时间：2012-10-07T08:17:42.380
> 
> 标签：php, web-services

我的任务是用 PHP 制作 Web 服务。这是我的第一个（在 PHP 中）。我之前在 .NET 中使用 WSDL 完成了它们。

不需要它是 SOAP 或具有任何其他协议。事实上，我将编写调用 Web 服务的 javascript/ajax 代码。

据我所知，这很容易......我可以制作一个公开的 PHP 脚本，使用 url 参数调用该文件的 url，然后该 PHP 脚本以我期望的 XML 格式返回数据，和 prest-o-change-o，我有一个 PHP Web 服务？有那么容易？？？

如果答案是肯定的，是否有任何推荐的最佳实践？我可能没有想到的要小心或考虑的事情？

感谢您幽默 PHP 菜鸟...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:42:47.240

就这么容易。PHP 已经用于客户端/服务器的东西。无论如何，我不会将其设为 SOAP，但我会从中生成 JSON，并让它以 RESTful 方式进行通信。

JSON 在 PHP 中也很简单。只需在要返回的结构中创建一个包含所有要返回的数据的对象。然后可以使用 序列化此数据对象`json_encode`。JSON 将很容易从 Javascript 中使用。

# php - Zend Framework 2 稳定版本和 Doctrine Dev 版本 - Composer 配置

> ID：12767201
> 
> 赞同：2
> 
> 时间：2012-10-07T08:18:48.433
> 
> 标签：php, doctrine-orm, zend-framework2, composer-php

我尝试获取新发布的 Zend Framework 2 (2.0.2) 的稳定版本，它将通过 composer 跟踪稳定版本。

此处的示例是当 2.0.3 发布时，composer update 将自动更新。

问题是我正在尝试使用 modules.zendframework.com 中的 DoctrineModule，这需要将最小稳定性设置设置为“dev”。当我这样做时，Zend Framework 版本会更改为 2.0.3dev，这不是我想要的。

你们中的任何人都知道在同一个作曲家配置中将 dev 和 stable 混合在一起的方法吗？

我想要发生的是 zendframework/zendframework 仅跟踪稳定分支，并且 composer update 返回最新的稳定（在本例中为 2.0.2）而不是开发版本。

这是我的composer.json：

```
    {
      “最低稳定性”：“开发”，
      "name": "zendframework/skeleton-application",
      "description": "ZF2 的骨架应用",
      "license": "BSD-3-Clause",
      “关键词”：[
      “框架”，
      “zf2”
      ],
      "主页": "http://framework.zend.com/",
      “要求”： {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*",
        “教义/教义模块”：“开发大师”，  
        “教义/教义-orm-module”：“dev-master”，
      }
    }

```

**使用 @hakre 解决方案工作 composer.json**

因为 Doctrine 通过 composer 引入其他依赖项，所以必须将 minimum-stability 设置为“dev”。将 zendframework 要求设置为 @stable 解决了正在下载开发版本的问题。

```
      “最低稳定性”：“开发”，
      “要求”： {
        "php": ">=5.3.3",
        "zendframework/zendframework": "2.*@stable",
        “教义/教义模块”：“开发大师”，  
        “教义/教义-orm-模块”：“开发大师”
       }

```

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:56:15.083

参考手册（[来自`minimum-stability`](http://getcomposer.org/doc/04-schema.md#minimum-stability)）：

> `minimum-stability`每个包的所有版本都经过稳定性检查，在解决项目依赖关系时将忽略那些比设置不稳定的版本。给定包的稳定性要求的特定更改可以在`require`或中完成`require-dev`（请参阅[包链接](http://getcomposer.org/doc/04-schema.md#package-links)）。

我会说，如果您将默认 via 设置`minimum-stability`为*stable*，然后对于您需要它的具体包，请将它们标记为*beta*或*dev*：

```
{
    "require": {
        "monolog/monolog": "1.0.*@beta",
        "acme/foo": "@dev"
    }
} 
```

# php - jquery - 重新加载后隐藏

> ID：12767202
> 
> 赞同：1
> 
> 时间：2012-10-07T08:18:55.297
> 
> 标签：php, jquery, hide

我有这个 jquery 代码，一切正常，但如果可能`window.location.reload(true);`的话，我想隐藏 div`#cmd`

```
$(document).ready(function () {
    $("#add").click(
        function () {

            var id = $(this).attr("rel"); // ID
            var full_name = $("#full_name").val();
            var email = $("#email").val();
            var comments = $("#comments").val();
            var datapost = "id=" + id + "&full_name=" + full_name + "&email=" + email + "&comments=" + comments;

            $.ajax(
                {

                    type:"post",
                    url:"{/literal}{base_url()}{literal}post/add_cmd",
                    data:datapost,
                    success:function (Response) {
                        if (Response == 'added') {

                            alert("شكرا لك .. " + full_name + " على التعليق سوف يتم إداراج تعليقك بعد تحديث الصفحة");
                            window.location.reload(true);
                            $("#cmd").hide("Slow");

                        } else {
                            alert(Response);
                        }
// window.location.href = '../admcat/cats';
                    },
                    fail:function () {
                        alert("تعذر حذف الركورد لسوء الاتصال بالانترنت");
                    }
                }
            );

        }
    );

}); 
```

如果可能的话，我希望之后`window.location.reload(true);`会隐藏。`$("#cmd")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:27:21.133

这并不容易，因为 HTTP 是一个无状态协议。这意味着，如果您重新加载，页面的状态就会丢失。

但是有一种方法可以同时使用 JavaScript 和 PHP。

1.  在第一次加载时设置 cookie
2.  在 PHP 中重新加载时，检查 cookie 的存在并设置`#cmd`div 的可见性。

还有其他方法。所有这些方式都试图将状态（“页面已经加载一次”）传递给下一次加载。

1.  使用不同的方法重新加载（第一次 GET，然后 POST）
2.  传递一个 URL 参数，而不是仅仅重新加载
3.  使用 PHP 会话

这四种方式都需要 PHP 去检查：cookie 是否存在，HTTP 方法是什么，参数是什么，会话中有什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:27:32.507

没有很好的方法来检测是页面加载还是重新加载，基本上是一样的。如果您想在第一次加载页面时隐藏元素，然后在每次重新加载时隐藏元素，您可以执行以下操作：

```
$("#cmd").hide(); 
```

如果它必须仅重新加载，我想一种方法是不使用`window.location.reload`，而是`window.location.href`向 URL 添加一些内容，例如查询字符串变量，然后您可以在每个页面加载时检查，并隐藏元素（如果存在） .

# java - Android，将覆盖图标添加到 onLocationChange 导致崩溃

> ID：12767203
> 
> 赞同：1
> 
> 时间：2012-10-07T08:19:02.443
> 
> 标签：java, android, crash, overlay, android-mapview

以下代码，当我取消注释“列表等”并添加叠加层时，它会崩溃，当我将叠加层添加到列表时它会崩溃。我可以在'oncreate'中添加一个覆盖图标并且它不会崩溃，但是将它添加到'onlocationchanged'它会崩溃

```
 public class MainActivity extends MapActivity implements LocationListener {

MyLocationOverlay myLocationOverlay;

public MapView mapView;
MapController mc;

OverlayItem overlayitem;
List<Overlay> mapOverlays;
HelloItemizedOverlay itemizedoverlay;
GeoPoint myLocationGeoPoint;

private MockGpsProvider mMockGpsProviderTask = null;
//mMockGpsProviderTask = new MockGpsProvider();

/* This method is called when use position will get changed */
public void onLocationChanged(Location location) {
    GeoPoint myLocationGeoPoint = new GeoPoint((int)(location.getLatitude() * 1e6) , (int)(location.getLongitude() * 1e6));

//  Toast.makeText(this, "changinglocation", Toast.LENGTH_SHORT).show();
    String message = String.format(
            "New Location \n Longitude: %1$s \n Latitude: %2$s",
            (int)(location.getLongitude()), (int)(location.getLatitude())
    );
    Toast.makeText(this, message, Toast.LENGTH_LONG).show();
   // mc.setCenter(myLocationGeoPoint);
   mc.animateTo(myLocationGeoPoint);        
  // mc.setZoom(11);
    //}
 //     mapOverlays = mapView.getOverlays();
 // Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);

  overlayitem = new OverlayItem(myLocationGeoPoint, "Hola, Mundo!", "I'm in Mexico City!");
   itemizedoverlay.addOverlay(overlayitem);
   mapOverlays.add(itemizedoverlay);

}

public void onProviderDisabled(String provider) {
    Toast.makeText(this, "No mock data mofo", Toast.LENGTH_SHORT).show();

}
public void onProviderEnabled(String provider) {
}
public void onStatusChanged(String provider, int status, Bundle extras) {
}
int test()
{
    int i1=getIntent().getIntExtra("key", -1);
    return(i1);
}

@Override
protected boolean isRouteDisplayed() {
    return false;
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview);
    mc = mapView.getController();
mapView.setBuiltInZoomControls(true);
mapView.setSatellite(true);
mc.setZoom(19);

 List<Overlay> mapOverlays = mapView.getOverlays();
 Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
 HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

 GeoPoint point = new GeoPoint(19240000,-99120000);
 //GeoPoint point = new GeoPoint(19240000,test());

 //GeoPoint point = new GeoPoint(19240000,message);
 OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");
 itemizedoverlay.addOverlay(overlayitem);
 mapOverlays.add(itemizedoverlay);

//   LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
//   Criteria criteria = new Criteria();
//  criteria.setAccuracy( Criteria.ACCURACY_COARSE );
//  String provider = lm.getBestProvider( criteria, true );

//  if ( provider == null ) {
//      Toast.makeText(this, "No mock data mofo", Toast.LENGTH_SHORT).show();

//  }

       /** Setup GPS. */
    LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){ 
        /// use real GPS provider if enabled on the device
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    }
    else if(!locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        // otherwise enable the mock GPS provider
        locationManager.addTestProvider(MockGpsProvider.GPS_MOCK_PROVIDER, false, false,
                false, false, true, false, false, 0, 5);
        locationManager.setTestProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER, true);
        Toast.makeText(this, "mock data enabled mofo", Toast.LENGTH_SHORT).show();
    }  
    if(locationManager.isProviderEnabled(MockGpsProvider.GPS_MOCK_PROVIDER)) {
        locationManager.requestLocationUpdates(MockGpsProvider.GPS_MOCK_PROVIDER, 0, 0, this);

        /** Load mock GPS data from file and create mock GPS provider. */
        try {
            // create a list of Strings that can dynamically grow
            List<String> data = new ArrayList<String>();

            /** read a CSV file containing WGS84 coordinates from the 'assets' folder
             * (The website http://www.gpsies.com offers downloadable tracks. Select
             * a track and download it as a CSV file. Then add it to your assets folder.)
             */         
            InputStream is = getAssets().open("mock_gps_data.csv");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));

            // add each line in the file to the list
            String line = null;
            while ((line = reader.readLine()) != null) {
                data.add(line);
            }

            // convert to a simple array so we can pass it to the AsyncTask
            String[] coordinates = new String[data.size()];
            data.toArray(coordinates);

            // create new AsyncTask and pass the list of GPS coordinates
            mMockGpsProviderTask = new MockGpsProvider();
            mMockGpsProviderTask.execute(coordinates);
        } 
        catch (Exception e) {}
    }

        }
private class MockGpsProvider extends AsyncTask<String, Integer, Void> {
    public static final String LOG_TAG = "GpsMockProvider";
    public static final String GPS_MOCK_PROVIDER = "GpsMockProvider";

    /** Keeps track of the currently processed coordinate. */
    public Integer index = 0;

    @Override
    protected Void doInBackground(String... data) {         
        // process data
        for (String str : data) {
            // skip data if needed (see the Activity's savedInstanceState functionality)
            if(index < 5) {
                index++;
                continue;
            }               

            // let UI Thread know which coordinate we are processing
            publishProgress(index);

            // retrieve data from the current line of text
            Double latitude = null;
            Double longitude = null;
            Double altitude= null;
            try {
                String[] parts = str.split(",");
                latitude = Double.valueOf(parts[0]);
                longitude = Double.valueOf(parts[1]);
                altitude = Double.valueOf(parts[2]);
            }
            catch(NullPointerException e) { break; }        // no data available
            catch(Exception e) { continue; }                // empty or invalid line

            // translate to actual GPS location
            Location location = new Location(GPS_MOCK_PROVIDER);
            location.setLatitude(latitude);
            location.setLongitude(longitude);
            location.setAltitude(altitude);
            location.setTime(System.currentTimeMillis());

            // show debug message in log
            Log.d(LOG_TAG, location.toString());

            // provide the new location
            LocationManager locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locationManager.setTestProviderLocation(GPS_MOCK_PROVIDER, location);

            // sleep for a while before providing next location
            try {
                Thread.sleep(200);

                // gracefully handle Thread interruption (important!)
                if(Thread.currentThread().isInterrupted())
                    throw new InterruptedException("");
            } catch (InterruptedException e) {
                break;
            }

            // keep track of processed locations
            index++;
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        Log.d(LOG_TAG, "onProgressUpdate():"+values[0]);
        mMockGpsProviderIndex = values[0];
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:42:50.927

您可以将内部使用的所有变量声明`onLocationChanged()`为全局变量以避免重新分配内存和错误，它在`onCreate()`方法中起作用的原因是它只执行一次，而`onLocationChanged()`每当位置更改时执行几次。

**编辑：**

您没有在`onCreate()`方法中添加任何位置更新请求。请参阅此[链接](http://developer.android.com/guide/topics/location/strategies.html)以遵循获取位置更新的最佳策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:45:13.960

您没有初始化 mapView 变量。在您的 onCreate 方法中，您正在初始化一个 LOCAL 变量：

```
MapView mapView = (MapView) findViewById(R.id.mapview); 
```

不是全局地图视图！！！

# sitecore - 如何在 Sitecore 6.5 中创建共享列表页面

> ID：12767205
> 
> 赞同：0
> 
> 时间：2012-10-07T08:19:29.920
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我有一个场景，我有一个嵌套列表页面，它需要存在于我网站的不同位置。

问题是我希望在一个位置管理此列表页面，而不是在许多地方复制它，但我不想丢失 URL 结构。所以，我可能有

> www.abc.com/infocomm/infrastructure/wired/that-listing-page www.abc.com/infrastructure/ipv6/that-listing-page

我尝试在内容存储中创建列表页面并使用通配符查询动态拉出子页面，但这有一些缺点：

1.  使用富文本编辑器，内容作者无法创建指向列表页面项目的超链接，因为它们存在于内容商店中，并且他们必须对查询字符串进行硬编码以获取列表页面项目。例如，他们必须硬编码如下参数：

> www.abc.com/infocomm/infrastructure/wired/that-listing-page/2012/article-1 **_**

1.  由于#1，如果内容作者重命名列表页面下的项目或删除项目，将会出现许多断开的链接。
2.  我们必须迁移现有内容，这意味着我们必须手动更新和硬编码新链接，这将导致第一个问题。
3.  由于上述挑战，我们无法生成 Google 站点地图和 RSS 提要。

你们中的一些人可能以前经历过这种情况，我很想听听你们是如何实现的。我正在使用 Sitecore 6.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:32:23.540

看起来项目克隆正是您需要的。[在此博客文章](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2010/10/Sitecore-CMS-6-4-Cloning.aspx "博文")中阅读有关克隆的更多信息。

您应该能够在下创建`www.abc.com/infocomm/infrastructure/wired/that-listing-page`项目的克隆，`www.abc.com/infrastructure/ipv6`它将自动更新（以及它的后代）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T04:32:54.477

如果我理解正确，您想在此页面上显示来自不同内容节点的项目的链接。

我能想到的最简单的解决方案是为列表页面创建一个新模板，并在模板上设置树列表选择框字段，然后添加您想要从中获取后代的 /sitecore/content/Home/。

现在在代码中遍历选定的项目并将它们显示在列表页面上。当您获得项目时，您应该能够获得所选项目的所有字段值，并且可能会为您提供缩略图并使用以下代码生成链接

```
Sitecore.Data.Database 数据上下文 = Sitecore.Context.Database;

```
Sitecore.Data.Item listPageItem = Sitecore.Context.Item;

Sitecore.Data.Fields.MultilistField multiselectField = 
                  (MultlistField)home.Fields["[select list field name]"];

Items[] selectedItems = (multiselectField != null)? 
                             multiselectField.GetItems() : null;

int listCount = (selectedItems ==null)? 0 : selectedItems.Length;

for(int index=0; index < listCount; index++)
{

   Item item = selectedItems[index];

   //  Assuming you want to display thumbnail image as a link to the page
   string thumbnailUrl = item.Fields["[Thumbnail Image Path]"] 

   string imgTag = string.Format(@"<img src=""/{0}"" width=""[img width]"" 
                   alt=""{1}"" />", 
                   thumbnailUrl, 
                   item.Fields["[Title]"]);

   string url = Sitecore.Links.LinkManager.GetItemUrl(item); 

   string itemLink = string.Format(@"<a href=""{0}"">{1}</a>", url, imgTag); 

} 
```

希望这有助于...

```

# r - 循环遍历列表中的每个元素并为每个项目添加数字。使用 R

> ID：12767209
> 
> 赞同：3
> 
> 时间：2012-10-07T08:20:25.840
> 
> 标签：r, loops

我读入一个文件，R 返回一个列表，如下所示：
list 1: "1)" "Seo " "agad " "na " "ciad " "faclan " "a "
list 2: "cannteil " "(canntail) " “a-staigh” “dhan” “
列表 3: “2)” “Seo” “sinn” “sin” “direach” “fuirich…”

我想要的是得到一个向量，如果 [[i]] 中的第一个元素有一个数字，那么 [[i]] 中的其他元素也得到相同的数字，如果 [[i]] 中的第一个元素没有数字，则 [[i]] 中的所有元素都将具有上一行中显示的数字，如下所示：

"1\t1)" "1\tSeo " "1\tagad " "1\tna " "1\tciad " "1\tfaclan " "1\ta " .... "2\t2)" "2\tseo ", 2\tsinn....

谁能告诉我这个的代码？而且，有没有办法获得一个只包含每个单词对应的数字的向量，而不是在每个单词之前粘贴它？

谢谢

我的代码如下，但它没有给我想要的东西（所有元素都得到数字 1，即使是列表中以数字 2 开头的元素。）代码的哪一部分是错误的？

```
word="" 
temp="" 
for (i in 1:length(file)) { 
       if (grepl('\\d+\)',file[[i]][1])) {       
       snum=grep('\\d+',file[[i]][1]) 
       temp=paste(snum, file[[i]], sep="\t") 
         } else { 
       temp=paste(snum,utter.short[[i]],sep="\t") 
         }   word=c(word,temp) 
     } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:44:11.667

假设您有一个列表列表，例如...

```
 list1 = list("1)" "Seo " "agad " "na " "ciad " "faclan " "a ")
 list2 = list("cannteil " "(canntail) " "a-staigh " "dhan ")
 list3 = list("2)" "Seo " "sinn, " "sin " "direach " "fuirich…")

 biglist = list(list1, list2, list3) 
```

这是使用此设置的非优雅/非高效解决方案

```
 counter = 1
 for (i in 1:length(biglist){
 if (gsub("\\D", "", biglist[[i]][[1]])>0){
     counter = gsub("\\D", "", biglist[[i]][[1]]
     biglist[[i]] = biglist[[i]][2:length(biglist[[i]])]
     }
 lapply(counter, paste, biglist[[i]], sep="\t")
 } 
```

这可以处理任意数量的行和行的长度，只要第一项有 1 个数字，并且这些行是一个接一个地排序。

根据它的用途，可能有更好的方法可以读取和存储数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-03T15:44:34.397

更灵活，更容易理解（优雅？）。它以任何顺序处理数字，缺少第一项，并且易于更改/维护。

```
# sample data
list0a = list("cannteil " ,"(canntail) ", "a-staigh " ,"dhan ")
list0b = list("cannteil " ,"(canntail) ", "a-staigh " ,"dhan ")
list1 = list("3)","Seo ","agad ","na ", "ciad ", "faclan " ,"a ")
list2 = list("cannteil " ,"(canntail) ", "a-staigh " ,"dhan ")
list3 = list("2)", "Seo ", "sinn, ", "sin " ,"direach ", "fuirich…")

# separate lists to test on
biglist = list(list1,list2,list3)
biglist2 = list(list0a,list0b,list1, list2, list3)

# get number vector
numlist <- sapply(biglist,function(x){
  as.numeric(gsub('[^0-9]','',x[1]))
})

# fill in gaps with indexing, drops leading items without numbers
numorder <- cumsum(!is.na(numlist))
numreplaced <- na.omit(numlist)[numorder]

# handle missing first numbers however you want. omit if guaranteed first element has number
numfinal <- c(rep('0',times = sum(numorder == 0)),numreplaced)

# make the strings as desired
Map(function(x,num){
  paste0(num,'\t',x)
},x = biglist,num = numfinal) 
```

# iphone - 获取任何 iOS 应用程序的完整自定义 URL 方案和路径

> ID：12767218
> 
> 赞同：4
> 
> 时间：2012-10-07T08:22:31.170
> 
> 标签：iphone, ios, ipad

我按照这里的说明进行操作：

[如何从 .ipa 文件中提取自定义 URL 方案？](https://stackoverflow.com/questions/6845693/can-i-extract-the-custom-url-scheme-from-a-ipa-file)

并且能够获得主要的 URL 方案。例如，对于我得到的 Hulu 应用程序：

“葫芦：//”

但我实际上想弄清楚如何获取剩余信息，以便我可以直接将 Hulu 应用程序链接到特定视频。我知道 Hulu 的 URL 方案是这样的：

“hulu://w/**视频 ID 号**”

但我只能通过访问 Hulu 网站并看到他们使用上述方案重定向我来获得这个。有没有办法通过使用 .ipa 文件或其他任何东西来找出完整的方案？

我正在尝试获取 7 或 8 个应用程序。第一部分容易，第二部分很难。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:33:22.443

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:38:04.317

完整的方案解析在代码中完成（AppDelegate 中的 handleOpenURL），编译后不再可读，因此您将无法从 IPA 中获取它。

有一些应用程序 url 方案列表：

*   [http://wiki.akosma.com/IPhone_URL_Schemes](http://wiki.akosma.com/IPhone_URL_Schemes)
*   [http://handleopenurl.com/](http://handleopenurl.com/)

..但他们都没有给出关于 hulu 的提示。在这里联系开发人员可能是最好的解决方案。

希望这可以帮助。

# arduino - 处理 Glitchamin

> ID：12767221
> 
> 赞同：0
> 
> 时间：2012-10-07T08:22:36.567
> 
> 标签：arduino, processing

我正在尝试构建这个：

[http://www.instructables.com/id/Arduino-Photocell-Theremin-Synth-glitchamin/step6/Program-the-ATMEGA/](http://www.instructables.com/id/Arduino-Photocell-Theremin-Synth-glitchamin/step6/Program-the-ATMEGA/)

没有 killswitch 和 debugmode 的代码看起来像这样：

```
// glitchamin
// simple theremin synth with killswitch
// Jacob Peck (a.k.a. ~suspended-chord, http://suspended-chord.info)
// adapted from http://www.adafruit.com/blog/2009/05/19/piezo-with-an-arduino-photoresistor/

// circuit:
// pin d9: pin > +buzzer- > gnd
// pin d10: pin > switch > 5v, switch > 10kOhm resistor > gnd (optional)
// pin a0: 5v > cds > pin, pin > 10kOhm resistor > gnd
// pin a1: 5v > pot, pot > pin, pot > gnd
// pin a2: 5v > pot, pot > pin, pot > gnd

//#define DEBUG // uncomment to get serial output, but it kills the speed of the
                // algorithm, making for a very bad cycle rate
//#define KILLSWITCH // comment to disable killswitch code

int photosensorPin = 0;
int cutterpotPin = 1;
int cyclepotPin = 2;
int piezoPin = 9;

//#ifdef KILLSWITCH
//int killswitchPin = 10;
//#endif

int val = 0;
int cut = 0;
int cycle = 0;
int kill = 0;

void setup() {
  pinMode(piezoPin, OUTPUT);

//#ifdef KILLSWITCH  
//  pinMode(killswitchPin, INPUT);
//#endif

//ifdef DEBUG  
//  Serial.begin(115200);
//endif

}

void loop() {
  digitalWrite(piezoPin, LOW);
  val = analogRead(photosensorPin);
  cut = analogRead(cutterpotPin);
  cycle = analogRead(cyclepotPin);

//#ifdef KILLSWITCH
//  kill = digitalRead(killswitchPin);
//#endif  

////#ifdef DEBUG  
////  Serial.print("CdS: ");
////  Serial.print(val);
//  Serial.print("\tCutter: ");
//  Serial.print(cut);
//  Serial.print("\tCycle: ");
//  Serial.print(cycle);
//#ifdef KILLSWITCH  
//  Serial.print("\tKill: ");
//  Serial.println(kill);
//#else
//  Serial.println("");
//#endif // killswitch
//#endif // debug

  val = val / map(cut, 0, 1023, 15, 2);
  cycle = map(cycle, 0, 1023, 1, 1000);

//#ifdef KILLSWITCH
// if (!kill) { // if not killed
//#endif
    for( int i=0; i<cycle; i++ ) {  // play for cycle pot's reading
      digitalWrite(piezoPin, HIGH);
      delayMicroseconds(val);
      digitalWrite(piezoPin, LOW);
      delayMicroseconds(val);
    }
//#ifdef KILLSWITCH
//  }
//#endif  
} 
```

我总是得到错误：

找不到任何名为“输出”的内容。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:52:10.627

This is because you are running the code in Processing and you need to compile it and upload it to your Arduino using the Arduino IDE. This is a pretty common mistake because the two IDEs look identical because the Arduino IDE is based on the Processing one.

You can download the [Arduino IDE](http://arduino.cc/en/Main/Software) on the Arduino Website.

# python - 主要变异返回。

> ID：12767222
> 
> 赞同：2
> 
> 时间：2012-10-07T08:22:58.867
> 
> 标签：python, chess

你好！我正在制作一个国际象棋引擎，因为我想实现迭代深化，我需要找到主要的变化（引擎认为最佳的移动顺序）。但是，我没有在 python 的网络中找到任何伪代码示例，而且由于我的 alphabeta 函数是递归的，我真的很难理解它。

您能否给我一些提示或伪代码示例如何做到这一点？非常感谢。

这是我的 alpha beta 函数，它只返回移动的估值，而不是移动本身：

```
def alphaBeta(self, board, rules, alpha, beta, ply, player):
    """ Implements a minimax algorithm with alpha-beta pruning. """
    if not ply:
        return self.positionEvaluation(board, rules, player)

    move_list = board.generateMoves(rules, player)

    if not len(move_list):
        return self.mateCheck(rules, board, player, ply)

    for move in move_list:
        board.makeMove(move, player)
        current_eval = -self.alphaBeta(board, rules, -beta, -alpha, ply - 1, board.getOtherPlayer(player))
        board.unmakeMove(move, player)

        if current_eval >= beta:
            return beta

        elif current_eval > alpha:
            alpha = current_eval

    return alpha 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-07T09:03:14.867

使用 NegaMax 搜索。下面是一个例子：

```
 function negamax(node, depth, α, β, color)
    if node is a terminal node or depth = 0
        return color * the heuristic value of node
    else
        foreach child of node
            val := -negamax(child, depth-1, -β, -α, -color)
            {the following if statement constitutes alpha-beta pruning}
            if val≥β
                return val
            if val≥α
                α:=val
        return α 
```

调用时，参数 α 和 β 应设置为任何节点可能的最低和最高值，颜色应设置为 1。

```
(* Initial call *)
negamax(origin, depth, -inf, +inf, 1) 
```

您总是可以使用 negamax 进行 alpha beta 修剪

PS：我已经实现了一个在线棋牌平台。如果您想参考：[检查 Chesshunt](http://www.chesshunt.com)

您总是可以看到客户端代码，但实际的移动和棋类游戏逻辑是在服务器端实现的。

# matlab - MATLAB数组行排列

> ID：12767223
> 
> 赞同：2
> 
> 时间：2012-10-07T08:23:02.783
> 
> 标签：matlab, matrix

我使用 Matlab，我有一个转换结果，它是一个矩阵 (A) 4x4，例如：

```
A = [
    1  2  3  4  5  6  7  8
    9 10 11 12 13 14 15 16 
    etc...
    ] 
```

有没有办法将 A 的第二行排在第一行之后，这样结果就会变成：

```
A = [
    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 etc... ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:39:26.710

`vector = A(:)`您可以在第一次转换后尝试使用。这将创建一个列向量，如果你想要一个行向量，你可以转置它。

要获得更多控制，请尝试[reshape 命令](http://www.mathworks.com/help/matlab/ref/reshape.html)。例如，`vector = reshape(A,1,[])`应该与上述相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:45:12.257

我对这个问题并不完全清楚，但这是我的理解：你想采用任何大小的矩阵并制作一个单行矩阵

```
>> a = [1:4;5:8;9:12;13:16];
>> b = a.';
>> b(:).'

ans =  

 1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16 
```

# grails - 评估表达式时出错：无法在空对象上调用方法 getAt()

> ID：12767230
> 
> 赞同：3
> 
> 时间：2012-10-07T08:23:49.443
> 
> 标签：grails, groovy, gsp

我有一个设计如下的问题域模型

```
class Question {

    List<Choice> choiceCollection;

    static hasMany = [choiceCollection:Choice]
    static mappping = {
        choiceCollection(joinTable:false)
    }

} 
```

为了满足我的需求，/grails-app/views/question/create.gsp 已定制，如下所示

**创建.gsp**

```
<g:each var="i" in="${(0..4)}">
    <div class="fieldcontain  required">
    <label for="description">
            Option ${i + 1}.
            <span class="required-indicator">*</span>
        </label>
        <g:textArea name="choiceCollection[${i}].description" cols="40" rows="5" maxlength="2000" value="${questionInstance?.choiceCollection[i]?.description}"/>
    </div>
</g:each> 
```

当我尝试访问创建视图时，**出现以下错误**

```
Error evaluating expression [questionInstance?.choiceCollection[i]?.description]: Cannot invoke method getAt() on null object 
```

问题：我应该怎么做才能运行我的应用程序？

Grails 版本：2.1.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-17T22:00:36.683

我在尝试使用 Java 8 运行 grails (2.2.4) 时观察到此错误。原因不是很明显。它被埋在某处 grails.util.BuildSettings.groovy

当我恢复到 java 1.7 时，该消息消失了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-07T09:51:03.843

而不是通过 [] 访问使用 getAt，然后？操作员将工作：

```
choiceCollection?.getAt(1)?.description 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:23:51.767

尝试仅对现有选择进行迭代：

```
<g:each status="i" var="choice" in="${questionInstance.choiceCollection}">
    <div class="fieldcontain  required">
        <label for="description">
            Option ${i + 1}.
            <span class="required-indicator">*</span>
        </label>
        <g:textArea name="choiceCollection[${i}].description" cols="40" rows="5" maxlength="2000" value="${choice.description}"/>
    </div>
</g:each> 
```

这应该可以解决问题...

# c# - 正则表达式，带符号的特定字符串

> ID：12767231
> 
> 赞同：1
> 
> 时间：2012-10-07T08:23:50.830
> 
> 标签：c#, asp.net, regex, asp.net-mvc-3

我的数据注释中有以下正则表达式：

```
[RegularExpression(@"test|test2|test3|test4-5", ErrorMessage = "Please select your status.")] 
```

我希望该值接受“test4-5”，但它似乎不喜欢破折号，我如何让它接受确切的字符串“test4-5”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:23:03.643

所有的答案似乎都在那里，你真正需要的是：

```
"^(test|test2|test3|test4\-5)$" 
```

注意：括号包含要包含在逻辑 OR 中的整个单词，而不仅仅是管道符号周围的字符。转义的连字符。插入符号和美元符号标记字符串的开头和结尾。在允许的字符串上为您提供完全匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:50:13.893

它应该是

```
(test|test2|test3|test4)-5 
```

# c++ - stl::map 插入一个带有约束的值

> ID：12767233
> 
> 赞同：3
> 
> 时间：2012-10-07T08:23:59.227
> 
> 标签：c++, stl, map

我正在使用*stl::map*来存储一些带有值的键。对于我的应用程序，仅当当前值大于前一个值时，我才需要更改键的值。为此，我调用 *find()*来搜索键是否已经在映射中并更改它的值，否则我调用*insert()*来存储新键。有没有办法以有效的方式做这种事情？或者只调用对值有自定义约束的*insert() ？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:34:57.527

如下所述，std::map 上的插入重载之一返回包含节点迭代器和布尔值的对。bool 告诉您插入是否成功，或者是否存在欺骗。如果为 false，只需使用迭代器手动更新值。

```
#include <iostream>
#include <string>
#include <map>

int main()
{
  typedef std::map<std::string, int> TestMap;
  TestMap test;
  test.insert(std::make_pair("one", 1));

  std::pair<TestMap::iterator, bool> result =
      test.insert(std::make_pair("one", 2));

  if (!result.second)
  {
    // was a duplicate, so let's manually set the value on the existing
    // map entry

    result.first->second = 2;
  }

  std::cout << test.at("one") << std::endl; // outputs 2
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:52:32.827

如果新值`T newval`大于或等于前一个`T oldval`值并且您只使用大于或等于`T()`它的值，则应该更新地图，这真的很简单：

```
myMap[key] = std::max(myMap[key],newval); 
```

[`std::map::operator[]`](http://en.cppreference.com/w/cpp/container/map/operator_at)将返回对地图中元素的引用，该元素可以是已经存在的元素，也可以是新的默认构造元素 (myMap[key] == `T()`)。

请注意，此解决方案`std::map::insert`在幕后使用，但如果您只使用非负值，则更容易阅读。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T08:27:25.617

调用`lower_bound`以搜索元素。如果它不存在，它将为您提供下一个更大的密钥。如果键不存在，则使用迭代器返回一步，然后您可以在提供`insert`参数`position`的情况下进行调用，这样可以减少搜索要插入的正确位置的时间（可能几乎为零，因为您提供了正确的位置并且`map`是订购）

[http://www.cplusplus.com/reference/stl/map/insert/](http://www.cplusplus.com/reference/stl/map/insert/)

# ruby - 操作数组反映在所有引用它的变量中

> ID：12767234
> 
> 赞同：1
> 
> 时间：2012-10-07T08:24:00.477
> 
> 标签：ruby, mutable

如果我这样做

```
x = y = z = 1
z = 20 
```

然后我得到

```
"#{x}----#{y}----#{z}"
# => "1----1----20" 
```

现在，如果我做这样的事情：

```
a = b = c = [] 
```

然后我得到这个：

```
"#{a}-----#{b}-----#{c}"
# => "[]-----[]-----[]" 
```

但是，如果我执行以下操作：

```
c[0] = 'a'
c[1] = 'b'
c[2] = 'c' 
```

我明白了：

```
"#{a}-----#{b}-----#{c}"
# => "[\"a\", \"b\", \"c\"]-----[\"a\", \"b\", \"c\"]-----[\"a\", \"b\", \"c\"]" 
```

如果是`x`, `y`, `z`, 当我分配`z`给`20`, 然后`x`并`y`保留该值`1`。对于`Arrays`，即使我`c[]`只为 赋值，更改也反映在`a`,中`b`。s怎么了`Array`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:40:23.497

想想什么对象被分配给什么变量，毕竟变​​量只是一个对象的句柄。在 ruby​​ 中，一切都是对象，变量就是你与它们交互的方式。

所以...

```
a = b = 1 
```

这设置`a`和`b`引用相同的对象。如果我以后说：

```
a = 2 
```

然后我设置`a`引用一个新对象，它根本不应该影响`b`，它仍然很高兴`1`。解释者采取了一个简单的步骤。

1.  将局部变量设置`a`为对象`2`。

但是，按照这个逻辑：

```
a = b = [] 
```

再次，`a`并`b`引用同一个对象。这次是数组。但是现在当我们这样做时：

```
a[0] = 'hello' 
```

我们这里有一个不同的场景。您根本没有更改对象`a`引用的内容。您正在查找对象`a`引用，然后修改该对象。

想想口译员会做什么。执行该行时将采取以下步骤。

1.  找到被引用的对象`a`（恰好是被引用的同一个对象`b`）
2.  `0`将该对象索引处的值设置为字符串`"hello"`

这就是说简单的局部变量赋值，如：

```
a = 1 
```

当存在这样的间接层时，操作会有所不同：

```
a[0] = 'hello'
a.foo = 'bar'
a.set_value 'some val' 
```

* * *

或者考虑在数组中设置一个值，就像在该数组上调用一个方法一样。因此，如果您认为差异变得更容易掌握`a[0] = 'foo'`：

```
a.set_value(0, 'foo') 
```

像这样的事情实际上是在 ruby​​ 数组中发生的。原来为数组索引分配一个值会调用该`[]=(index, value)`方法。这些都是有效的和等效的。

```
a[0] = 'foo'
a.[]=(0, 'foo')
a.send('[]=', 0, 'foo') 
```

我指出这一点只是因为当表达为一个方法的调用时，很明显我们在这里修改了一个现有的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:28:16.483

使用`z = 20`，您将更`z`改为引用另一个对象，

使用，您正在更改同时引用`c[0] = 'a'`的原始对象。`a``b`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:30:20.897

在 Ruby 中，你有改变它的对象的方法和返回新对象的方法（方法的文档会提到这一点）。整数不能变异：二永远是二。玩弄 object_id 可以解决问题：

```
puts 1.object_id # 3
a = 1
puts a.object_id # 3
puts 20.object_id # 41
a = 20
puts a.object_id # 41

b = []
puts b.object_id # a number
b[1]=1 # mutating object
puts b.object_id # same number
b = b+[2] # the + method results in new object http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2B
puts b.object_id # another number 
```

# jquery - 除了选择文档时，JQuery 选择器似乎不起作用

> ID：12767235
> 
> 赞同：1
> 
> 时间：2012-10-07T08:24:03.023
> 
> 标签：jquery

我一直在尝试学习如何将 jQuery AJAX 与 PHP 一起使用。

我的问题是，每当我选择除 之外`document`的任何其他元素时，似乎都没有任何效果。我想要的是在按下提交按钮无济于事后简单地阻止页面加载。

我尝试过使用 jQuery 而不是 $，但仍然没有运气。

老实说，我不确定我在做什么，我已经尝试了几个小时来寻找这个解决方案。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
    $("p").click(function() { 
         alert('test');
    });
    $("form").submit(function() { 
         alert('test');
         return false;
    });
</script>
<title>Insert title here</title>
</head>
<body>
    <form action="process.php" method="post">
        Inputs:<br />
        <textarea rows="15" cols="60" id="input" name="input">Some text...
        </textarea><br /><br />
        Start:
        <input type="text" id="start" name="start" />
        End:
        <input type="text" id="end" name="end" /><br />
        <input type="submit" id="submit" name="submit" value="Submit">
    </form>
    <p id="output">Output: Some Random Text</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:25:48.433

在页面的其余部分加载之前，您的 JavaScript 正在运行。要修复它，请将您的脚本移动到页面底部（在结束标记之前），或使用 jQuery[方法](http://api.jquery.com/ready/)`</body>`将事件处理程序绑定到 DOM 就绪事件：[`.ready()`](http://api.jquery.com/ready/)

```
$(document).ready(function () {
    // Your code in here
});

//or, use the shorthand form:

$(function () {
    // Your code here
}); 
```

* * *

*边注*

> 我尝试过使用 jQuery 而不是 $，但仍然没有运气。

`jQuery`和之间没有区别`$`。两者都只是持有对同一对象的引用的标识符。它通常更容易使用`$`（只是因为它更短），除非您使用除 jQuery 之外的另一个库也需要该标识符（例如 PrototypeJS），在这种情况下，您可以告诉 jQuery 放弃使用该方法对`$`标识符的控制。`.noConflict()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:25:57.677

您正在尝试在元素加载之前选择它们。加载文档后，使用[文档就绪](http://api.jquery.com/ready/)事件运行您的代码。

```
<script>
    $(function()
    {
        $("p").click(function() { 
             alert('test');
        });
        $("form").submit(function() { 
             alert('test');
             return false;
        });
    });
</script> 
```

# javascript - 使用ajax功能页面后保持重新加载

> ID：12767239
> 
> 赞同：0
> 
> 时间：2012-10-07T08:24:48.483
> 
> 标签：javascript, facebook-graph-api

我的页面中有一个链接，如下所示：

```
<input onkeydown="check_me(event,this,\''. $post['id'] .'\',\''.$access_token.'\');" id="comment_msg" type="text" size="40" placeholder="Write a comment" /> 
```

所以我调用以下函数：

```
function check_me(event,element,post_id,access_token){
    if(event.keyCode == 13){
        fb_comment(post_id, access_token,element);        
    }

}       
function fb_comment(post_id, token,element){                 
    jQuery.ajax({
        type: "GET",
        url: "comment_post.php",
        data: 'id='+post_id+'&token='+token+'&comment='+element.value,
        success: function(html)
        {           
          element.value='';                            
        }

    });    
} 
```

问题是提交元素值后页面重新加载，提交元素值后如何停止重新加载页面！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:28:14.763

如果您按 ，浏览器会尝试提交表单`return`。所以只需添加`onsubmit=return false`到您的表单标签 - 或删除它。

```
<form onSubmit="return false">
    <input onkeydown="... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-04T11:47:12.453

在您的第一个包装函数中，编写：

```
 event.preventDefault(); 
```

因为默认行为是重新加载页面。如果我错了，请纠正我

# c# - 如何使用 Amazon SES 邮箱模拟器

> ID：12767250
> 
> 赞同：2
> 
> 时间：2012-10-07T08:27:23.083
> 
> 标签：c#, amazon-ses

我正在使用亚马逊 .net SDK。我知道用[模拟器邮箱](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MailboxSimulator.html)发送邮件。但是不明白在哪里使用模拟器邮件，TO，FROM字段中的客户邮件。

例如：我有`CustomerMail`，，包括bounce@simulator.amazonses.com `MyVerifiedMail`、`SimulatorMails`success@simulator.amazonses.com、ooto@simulator.amazonses.com 等...

我的代码在这里

```
SendEmailRequest req = new SendEmailRequest()                        
                        .WithDestination(new Destination() { ToAddresses = { CustomerMail } })
                        .WithSource(VerifiedMail)
                        .WithReturnPath(VerifiedMail)
                        .WithMessage(
                            new Amazon.SimpleEmail.Model.Message(new Content("Title"),
                            new Body().WithHtml(new Content("Body")); 
```

`WithDestination:`客户邮件、`WithSource:`验证邮件、`WithReturnPath:`模拟器邮件？

或者

`WithDestination:`SimulatorMail、`WithSource:`CustomerMail、`WithReturnPath:`VerifiedMail？

请告诉我如何使用模拟器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:36:31.613

你读过这个[http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MailboxSimulator.html](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/MailboxSimulator.html)吗？

像往常一样使用 MailboxSimulator，唯一不同的是：您必须使用模拟器的电子邮件。

在您的代码中：

```
SendEmailRequest req = new SendEmailRequest()                        
                    .WithDestination(new Destination() { ToAddresses = { SimulatorMails } })
                    .WithSource(VerifiedMail)
                    .WithReturnPath(VerifiedMail)
                    .WithMessage(
                        new Amazon.SimpleEmail.Model.Message(new Content("Title"),
                        new Body().WithHtml(new Content("Body")); 
```

# ios - 如何在情节提要 xcode 中创建登录屏幕

> ID：12767254
> 
> 赞同：0
> 
> 时间：2012-10-07T08:27:45.703
> 
> 标签：ios, xcode

我正在尝试创建像[http://www.iphone-tips-and-advice.com/image-files/skype-for-iphone-new-account.jpg](http://www.iphone-tips-and-advice.com/image-files/skype-for-iphone-new-account.jpg)和[http://cdn.trickyways.com/这样的登录屏幕wp-content/uploads/2009/08/login-facebook-on-iphone.png](http://cdn.trickyways.com/wp-content/uploads/2009/08/login-facebook-on-iphone.png)。我尝试了很多方法，但无法实现它。我在 tableview 中遇到静态单元格错误。我尝试了 quickdialog 但它有 nib 文件不知道如何在情节提要中做同样的事情。任何帮助和指导将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:53:24.040

我设法使用只有两个单元格的分组 UITableView 创建了这样的登录屏幕。诀窍是将单元格自定义为单独的类（建议）或在 cellForRowAtIndexPath: 方法中。

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.backgroundColor    = [UIColor clearColor];
        cell.selectionStyle     = UITableViewCellSelectionStyleNone;
        cell.textLabel.alpha  = 0.4;

    }

    if (indexPath.row == 0) {
        [cell.contentView addSubview:textField];

    }else if (indexPath.row == 1){

        [cell.contentView addSubview:passWordField];
    }

    return cell;
} 
```

其中 textField 和 passwordfield 都是 UITextField 实例。

# c - 为什么这个 Scanf 会导致无限循环？

> ID：12767258
> 
> 赞同：2
> 
> 时间：2012-10-07T08:28:34.430
> 
> 标签：c, loops, char, infinite-loop, scanf

所以我刚刚开始为我的一个班级学习C，我一直在做这个作业，但这部分让我感到困惑。我有一些基本上看起来像的代码：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    int one = 0;
    int two = 0;
    char oneWord[100]; 
    char twoWord[100];

    printf("Enter a two digit number: ");
    scanf("%d%d", &one, &two);

    strcpy(firstWord, "Test");
    strcpy(secondWord, "Two");

    printf("%s", firstWord);

    return 0;
} 
```

现在，撇开程序的逻辑/目的不谈，我无法弄清楚为什么该 scanf 语句会导致无限循环？当我将其注释掉并且最终`printf`声明运行良好时，我确定这就是问题的原因。

我尝试将其更改为`scanf("%d,%d", %one, %two)`，当我在输入中添加逗号时，它似乎工作正常。但我希望能够取一个像 55 这样的数字并将其分成 2 位数字。我在这里到底做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T08:32:36.703

您遇到的不是无限循环，而是`scanf`等待更多输入。

-format-specifier 表示十进制数，因此`d`可以是“0”、“41”或“2342345”。

输入第一个数字后，**您**希望程序继续执行，但`scanf`刚刚完成了第一个`%d`，所以`scanf`等待您完成第二个`%d`。在您看来，这似乎是一个无限循环，但实际上是`scanf`在按照您的要求进行操作。

`scanf`无法猜测您想要的每个数字有多少位数。但是你可以告诉它你想要的方式，用一个宽度说明符来说明每个信息由多少个字符组成：

```
#include <stdio.h>

int main () {
    int a, b;
    scanf("%2d%1d", &a, &b);
    printf("%d, %d", a, b);
} 
```

错误处理：

```
#include <stdio.h>

int main () {
    int a, b;
    if (scanf("%2d%1d", &a, &b) < 2)
        fprintf(stderr, "not enough digits");
    else
        printf("%d, %d", a, b);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:31:50.583

我可能错了，但`%d`意思是“整数”，而不是“数字”。`55`第一个也是如此`%d`，然后第二个没有定义。

您可以尝试使用`%c`（一个字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T08:32:30.900

```
printf("Enter a two digit number: ");
scanf("%1d%1d", &one, &two); 
```

当然，即使这样也可能失败（不符合要求）
而是：

```
scanf("%d", &one);
if (one<10 || one>99) printf("I didn't expect that...\n"); 
```

或者

```
scanf("%s",oneWord); one = atoi(oneWord);
if (one<10 || one>99)
   printf("Thats not necessarily even a number\n");
else
   { two = one % 10; one = one / 10; 
       printf("The first digit is %d and the second is %d\n",one,two);
   } 
```

在后一个程序中，我们正在测试输入是否正确：
最好是喂垃圾而不是正确的输入，然后看看它在哪里被忽视了。库函数 atoi(string); 返回包含在字符串中的整数。如果没有找到整数，则为零。例如（atoi（“a1”）== 0）。

但最低正确答案是

```
scanf("%d", number);
if (number >= 10 && number <= 99) 
{
   one = number / 10;  // the first digit;
   two = number % 10;  // the second digit calculated as number modulo 10
}

scanf("%1d%d", &one, &two);  // would halt for a single character input 
```

# c - MPI_Scatter 使用 C 和动态分配内存

> ID：12767263
> 
> 赞同：0
> 
> 时间：2012-10-07T08:29:53.383
> 
> 标签：c, parallel-processing, openmpi

可以帮助如何使用 MPI_Scatter 发送以下矩阵

```
float **u, **u_local;

if (rank == 0){
    u = (float**) malloc(N * size * sizeof(float*));
    for(i = 0; i < N * size; i++){
        u[i] = (float*) malloc(M * sizeof(float));
        memset(u[i], 0, M * sizeof(float));
    }
} 
```

我想将 u[N][M] 矩阵平等地发送给所有进程（u_local） N 行 M 列

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:55:58.260

最简单的解决方案是以线性方式分配内存：

```
float **u, *u_stor;

if (rank == 0) {
    // Watch out for possible integer overflow while computing memory size
    u_stor = malloc(N * size * M * sizeof(float));
    for (i = 0; i < N * size; i++) {
        u[i] = &u_stor[i * M];
    }
    memset(u_stor, 0, N * size * M * sizeof(float));
} 
```

这段代码不是单独分配每一行，而是`u`分配一块与整个矩阵一样大的内存，然后分配给`u[i]`指向`i`第 - 行开头的指针`u_stor`。现在行在内存中连续放置，可以使用简单的分散：

```
float **u_local, *u_local_stor;
u_local_stor = malloc(N * M * sizeof(float));
for (i = 0; i < N; i++)
    u_local[i] = &u_local_stor[i * M];

MPI_Scatter(u[0], N * M, MPI_FLOAT,
            u_local[0], N * M, MPI_FLOAT,
            0, MPI_COMM_WORLD); 
```

# java - 找不到 java 类：NoClassDefFoundError: KTEngine（Kinetic Typography 工具）

> ID：12767266
> 
> 赞同：0
> 
> 时间：2012-10-07T08:30:51.757
> 
> 标签：java, ubuntu, installation, typography

我是 Linux Ubuntu 用户。我尝试下载并安装这个有趣的 Kinetic Typography 工具：

[http://johnnylee.net/kt/dist/files/](http://johnnylee.net/kt/dist/files/)

它很旧（2002 年）并且记录不充分。

当我尝试编译和运行时，我收到错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: KTEngine/java 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:36:45.123

看起来您正在尝试使用以下方式运行它：

```
java KTEngine.java 
```

这不是你运行 Java 程序的方式。你说你已经编译了它，但你还没有说你是*怎么*做到的......

请注意，下载了代码后，`KTEngine`也没有`main`方法，因此无论如何这都行不通。

它看起来只是一个库，因此您需要在自己的应用程序中使用它，而不是它本身就是一个应用程序。

# ruby-on-rails - Rspec 无法在 ubuntu 上运行

> ID：12767278
> 
> 赞同：3
> 
> 时间：2012-10-07T08:32:50.743
> 
> 标签：ruby-on-rails, rspec, ubuntu-12.04, rspec-rails

我正在处理一个困扰我很久的问题。出于某种原因，我无法在本地机器上启动 rspec。我尝试了各种方法来安装和运行它，但都没有奏效。我正在使用 bundler 在 git 存储库上运行 Ruby on Rails 2.3.5 和 Ruby 1.8.7。

首先，我尝试将 rspec 安装为 gem。为此，我在我的 Gemfile 中添加了以下条目：

```
group :test do
  gem 'rspec', '=1.3.0'
  gem "rspec-rails", "=1.3.2"
end
...
group :cucumber do
  gem 'rspec', '=1.3.0'
  gem "rspec-rails", "=1.3.2"  
end 
```

当我检查时

> 宝石清单

我来看看

```
*** LOCAL GEMS ***
(...)
rspec (1.3.0)
rspec-rails (1.3.2) 
```

所以，它必须在那里。然后我在 /spec/model/bookmark_step.rb 中创建了一个规范文件。但是当我尝试运行它时

> rspec 规范/模型/bookmark_spec.rb

我明白了

```
The program 'rspec' is currently not installed.  You can install it by typing:
sudo apt-get install ruby-rspec-core 
```

使用时

> 捆绑执行规范

我明白了

> bundler：找不到命令：rspec 安装缺少的 gem 可执行文件`bundle install`

好吧，到目前为止很糟糕。让我们试试别的。为什么不从 ubuntu 源安装（我正在使用 Ubuntu 12.04）：

> sudo apt-get install ruby​​-rspec-core
> 
> 建议的软件包：ruby-rspec 将安装以下新软件包：ruby-rspec-core 0 升级，1 新安装，0 删除和 73 未升级。

好的，让我们通过键入滚动

> rspec 规范/模型/bookmark_spec.rb

猜猜我得到了什么...

```
/var/lib/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:440:in `load_missing_constant': uninitialized constant RSpec::Core::Formatters (NameError)
from /var/lib/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:80:in `const_missing'
from /var/lib/gems/1.8/gems/rspec_spinner-2.0.0/lib/rspec_spinner/base.rb:12
from /var/lib/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:158:in `require'
from /var/lib/gems/1.8/gems/activesupport-2.3.5/lib/active_support/dependencies.rb:158:in `require'
from /var/lib/gems/1.8/gems/rspec_spinner-2.0.0/lib/rspec_spinner.rb:4
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `require'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
from /var/lib/gems/1.8/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
from (...) Workspace/config/boot.rb:116:in `load_gems'
from /var/lib/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:164:in `process'
from /var/lib/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:113:in `send'
from /var/lib/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:113:in `run'
from (...)  Workspace/config/environment.rb:28
from (...)  Workspace/spec/model/../spec_helper.rb:4:in `require'
from (...)  Workspace/spec/model/../spec_helper.rb:4
from (...)  Workspace/spec/model/bookmark_spec.rb:2:in `require'
from (...)  Workspace/spec/model/bookmark_spec.rb:2
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:386:in `load'
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:386:in `load_spec_files'
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:386:in `map'
from /usr/lib/ruby/vendor_ruby/rspec/core/configuration.rb:386:in `load_spec_files'
from /usr/lib/ruby/vendor_ruby/rspec/core/command_line.rb:18:in `run'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:55:in `run_in_process'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:46:in `run'
from /usr/lib/ruby/vendor_ruby/rspec/core/runner.rb:10:in `autorun'
from /usr/bin/rspec:4 
```

好的，最后一件事可能是版本不匹配。我猜ubuntu为rails 3安装了rspec，而我需要为rails 2.3.5安装rspec。但我已经尝试了很多让它发挥作用。无论如何，我想那是错误的方式，所以我最终停止寻找最后一条错误消息的确切原因。

有人猜我还能尝试什么吗？或者也许我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T06:23:34.683

出于某种原因，我在 Ubuntu 上注意到环境加载得不够早，无法触发捆绑程序加载测试组 gem。我还没有找出根本原因，但是像这样运行我的测试是可行的：

`RAILS_ENV=test bundle exec rspec`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:14:05.777

我们一直在为我们的 rails 2.3.14 应用程序使用以下内容。我想它也应该适用于 2.3.5 ......

```
group :development, :test do
  gem "rspec-rails", "1.3.4"
  gem "steak"
  gem "factory_girl", "2.6.4"
  gem "database_cleaner"
end

group :test do
  gem "mocha"
  gem "capybara", "~> 0.3.9"
end 
```

# c# - 表单初始化和显示给用户之间的延迟

> ID：12767282
> 
> 赞同：0
> 
> 时间：2012-10-07T08:33:26.137
> 
> 标签：c#, winapp

我想在运行时移动鼠标并单击控件。但是在表单初始化和向用户显示表单之间延迟了大约 1 秒，这导致鼠标单击了该表单的父表单。我使用`Show`方法，`Load`方法但没有解决我的问题。我不使用计时器。我怎样才能解决这个问题？谢谢。

我点击控件的代码在这里：

```
private const UInt32 MOUSEEVENTF_LEFTDOWN = 0x0002;
private const UInt32 MOUSEEVENTF_LEFTUP = 0x0004;
[DllImport("user32.dll")]
private static extern void mouse_event(uint dwFlags, uint dx, uint dy, uint dwData, uint dwExtraInf);
int x = Convert.ToInt16(trvPointTitls.Location.X+trvPointTitls.Width-10);
int y = Convert.ToInt16(trvPointTitls.Location.Y-10);
Cursor.Position = new Point(x, y);
mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);
mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0); 
```

# fortran - Fortran 90 - 计算非常大的值

> ID：12767288
> 
> 赞同：1
> 
> 时间：2012-10-07T08:34:31.267
> 
> 标签：fortran, precision, fortran90

我目前正在学习 Fortran 90，并且一直在试验变量的`kind`和`selected_real_kind`参数。在我的实验中，我发现变量最多只能包含 33 位的值。我的问题是，如何计算更长的数字？例如，如果可能的话，我如何计算一个 40 位数字？请提供源代码。

作为旁注，我注意到 python 和 common lisp 可以计算数百位数字而不会丢失精度。Fortran 中是否存在这种能力，如果没有，是否可以模拟？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:41:08.293

如果你想计算非常长的数字，你需要一个库，比如[ARPREC](http://crd-legacy.lbl.gov/~dhbailey/mpdist/)。否则，最高的本机等级取决于处理器，例如，因为`gfortran`它在大多数平台上是 128 位（第 16 类）。您也可以尝试 C 库，例如[GMP](http://gmplib.org/)。

# android - android-从站点获取数据

> ID：12767292
> 
> 赞同：-1
> 
> 时间：2012-10-07T08:34:59.040
> 
> 标签：android

如何将数据从站点获取到变量 x？我希望每次我使用这个 x 时，x 都会从这个站点获取他的数据。例如，如何从网站[http://www.dollargate.net/](http://www.dollargate.net/)获取此数据 3.856 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T08:51:05.667

/首先，下载网站：

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet request= new HttpGet(url);      
HttpResponse response = client.execute(request);
String content = EntityUtils.toString(response.getEntity()); 
```

然后在内容中查找以下文本：

```
<div id="tabcontent1">
    <div id="dollar_1">שער הדולר היציג הוא:</div>
    <div id="dollar_2"> 
```

该数字将在此文本之后

PS：不要忘记在清单中添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:47:28.320

您需要发出 http 请求并解析响应，解析当然取决于每个网站。有关如何发出 http 请求的示例，如果您不知道已经可以在 android 示例中找到（您应该在 Android SDK 文件夹中找到它），例如：android-sdk/samples/android-16 /SampleSyncAdapter/src/com/example/android/samplesync/client/NetworkUtilities.java

祝你好运！

# multithreading - 请解释以下代码的工作原理

> ID：12767298
> 
> 赞同：0
> 
> 时间：2012-10-07T08:36:26.763
> 
> 标签：multithreading, thread-safety

我有以下代码，但它的输出不是我所期望的：

```
public class ThreadManager {
    public static void main(String[] args) {
        Resource sharedResource = new Resource();
        new Thread(new MyThread(sharedResource)).start();
        new Thread(new MyThread(sharedResource)).start();
    }
}

class MyThread implements Runnable{
    Resource rs = null;
    public MyThread(Resource param) {
        this.rs = param;
    }
    @Override
    public void run() {
        this.rs.add(Thread.currentThread().getName());
        System.out.println(this.rs.str);
    }
}

class Resource{
    StringBuilder str = new StringBuilder();
    public void add(String text){
        str.append(text);
    }
} 
```

输出是：

```
Thread-0Thread-1
Thread-0Thread-1 
```

但是怎么...

这里如果线程0首先执行，那么输出应该是

```
Thread-0
Thread-0Thread-1 
```

但这里的问题是第一行输出中的线程 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:38:35.090

> 这里如果线程0先执行然后输出

是什么让您认为仅仅因为您*首先启动*线程 0，它就会首先到达`add`方法调用？即使一个线程*确实*首先到达`add`调用，这并不意味着它会在另一个线程有机会调用之前到达*下一个*语句 ( ) 。看起来这就是这里的情况：`System.out.println``add`

*   线程0调用`add`
*   线程 1 调用`add`
*   线程0调用`System.out.println(this.rs.str)`
*   线程 1 调用`System.out.println(this.rs.str)`

（这有点手动，因为这些不是原子操作，但它是一个可能的流程。）

想象你的两条线是跑道上的运动员——你开始它们的顺序不一定与它们穿过终点线的顺序相同。

另请注意，`StringBuilder`它的设计并不是为了从多个线程访问安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T08:49:01.843

它并不像看起来那么简单。线程正在 printLn() 内的锁上交换，

# mysql - iOS 5：如何在 UITextView 和 UIWebView 中通过 PHP 从 mysql 检索值时保留换行符

> ID：12767303
> 
> 赞同：2
> 
> 时间：2012-10-07T08:37:26.447
> 
> 标签：mysql, ios, uiwebview, uitextview

我正在从 mysql 数据库中检索值（使用 PHP）并将其显示在 UITextView 和 UIWebView 的某些部分中。我存储在数据库中的值在 TEXT 中，但是当我在 UITextView 中显示它时，我想以点显示的数据显示为一个段落。由于我收到的数据已经在 NSString 中，我该如何换行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:40:37.963

UITextView 在 上添加一个新行`\n`，UIWebView 显示 html，如果您只有带有一些链接或其他内容的纯文本，您可以添加`<br />`一个新行。因此，为了保留 UITextView 您需要的换行符`\n`以及 UIWebView 有效的换行 HTML（例如`<br />`）。

不知道为什么你得到一个段落，也许你在你的 php 例程中过度转义或某些东西？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T22:58:24.840

谢谢，我能够做到这一点，使用以下代码：

```
NSString *myNewLineStr = @"<br />";
string = [string stringByReplacingOccurrencesOfString:@"\n" withString:myNewLineStr]; 
```

# string - 未指定的字符串替换问题

> ID：12767304
> 
> 赞同：1
> 
> 时间：2012-10-07T08:37:28.413
> 
> 标签：string, shell

我有一个未指定的 IP，我想更改其中的一部分（对于任何 ipaddress，它的第三部分为 254），例如

```
172.16.1.2  -> 172.16.254.2<br/> 
192.168.2.6 -> 192.168.254.6<br/> 
x.x.x.x     -> x.x.254.x<br/> 
```

我应该如何使用 shell 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:42:31.470

sed 是一个经典的解决方案。

```
 sed -E -e 's/(.*)[.](.*)[.](.*)[.](.*)/\1.\2.254.\4/' 
```

找到具有三个点的东西并复制除第三个被 254 替换的所有内容。

然后像这样使用它：

```
echo a.b.c.d  | sed -E -e 's/(.*)[.](.*)[.](.*)[.](.*)/\1.\2.254.\4/' 
```

# spring - Grails Spring Security UI 请求映射配置

> ID：12767306
> 
> 赞同：1
> 
> 时间：2012-10-07T08:37:44.157
> 
> 标签：spring, grails, spring-security, grails-plugin

我目前正在开发 Grails 应用程序，并将 Spring Security 框架与 Core 和 UI 插件一起使用。

几乎一切工作正常：用户创建、编辑、删除等。唯一的问题是 requestmap，它不能正常工作。当我调用 requestmap/create 时，出现以下错误：

```
URI /xxx/requestmap/create
Class java.lang.NullPointerException
Message Cannot get property 'clazz' on null object

Around line 81 of grails-app/controllers/grails/plugins/springsecurity/ui/AbstractS2UiController.groovy
78: }
79:
80: protected Class<?> lookupRequestmapClass() {
81:     grailsApplication.getDomainClass(lookupRequestmapClassName()).clazz
82: }
83:} 
```

我在我的 Config.groovy 中配置了 Spring Security，如下所示：

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'xxx.User'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'xxx.UserRole'
grails.plugins.springsecurity.authority.className = 'xxx.Role'
grails.plugins.springsecurity.requestMap.className = 'Requestmap'
grails.plugins.springsecurity.securityConfigType = grails.plugins.springsecurity.SecurityConfigType.Requestmap 
```

我还在 BuildConfig.groovy 中使用了以下插件：

```
plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":resources:1.1.6"

    // Uncomment these (or add new ones) to enable additional resources capabilities
    //runtime ":zipped-resources:1.0"
    //runtime ":cached-resources:1.0"
    //runtime ":yui-minify-resources:0.1.4"

    build ":tomcat:$grailsVersion"
    runtime ":database-migration:1.1"
    compile ':cache:1.0.0'

    // Spring Security Core
    compile ":spring-security-core:1.2.7.3"

    // Spring Security UI (+ Dependencies)
    compile ":spring-security-ui:0.2"
    compile ":mail:1.0"
    runtime ":jquery:1.7.2"
    compile ":jquery-ui:1.8.15"
    compile ":famfamfam:1.0.1"

    // Twitter Bootstrap
    // exlude is workaround for svn issue with bootstrap and grails 2.1.x
    compile (":twitter-bootstrap:2.0.2.25") { excludes 'svn' }
    runtime ':fields:1.3'
} 
```

出现requestmap搜索表单，但搜索时抛出异常：

```
URI /xxx/requestmap/requestmapSearch
Class org.hibernate.hql.ast.QuerySyntaxException
Message xxx.Requestmap is not mapped [SELECT COUNT(DISTINCT r) FROM xxx.Requestmap r WHERE 1=1 ]
Around line 46 of grails-app/controllers/grails/plugins/springsecurity/ui/RequestmapController.groovy
43:         }
44:     }
45:
46:     int totalCount = lookupUserClass().executeQuery("SELECT COUNT(DISTINCT r) $hql", queryParams)[0]
47:
48:     Integer max = params.int('max')
49:     Integer offset = params.int('offset') 
```

我现在正在处理这个错误一段时间，做了我在文档中找到的所有内容。这是与另一个插件结合时 Spring Security 中的错误还是这里发生了什么？如果没有请求图，Spring Security UI 插件对我来说毫无意义。我需要它来工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T03:30:24.827

在 config.groovy 中：

```
import grails.plugins.springsecurity.SecurityConfigType

grails.plugins.springsecurity.securityConfigType = SecurityConfigType.Requestmap
grails.plugins.springsecurity.requestMap.className = "sa.Requestmap" 
```

在上面`"sa.Requestmap"`，`sa`是一个包名，`Requestmap`是一个域类，如下所示：

```
package sa

class Requestmap {
  String url
  String configAttribute

  static mapping = {
    cache true
  }

  static constraints = {
    url blank : false, unique : true
    configAttribute blank : false
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:34:32.550

您指定了一个包（替换为 xxx） in`grails.plugins.springsecurity.userLookup.userDomainClassName`而 `grails.plugins.springsecurity.userLookup.authorityJoinClassName`不是 in `grails.plugins.springsecurity.requestMap.className`，它只是`'Requestmap'`- 这是一个错字吗？

另一个错误是不同的（GORM 问题但不是 UI 插件配置问题）-“xxx.Requestmap 未映射”。这表明域类是错误的。是否在 grails-app/domain 中带有 User 和 Role 类？它是否在其包裹的正确文件夹中？我的猜测是它在默认包中，但您将其移至 xxx 包但没有添加包语句。

# ios - 如何用另一个透明的 CALayer 遮盖 CALayer？

> ID：12767313
> 
> 赞同：1
> 
> 时间：2012-10-07T08:38:52.313
> 
> 标签：ios, calayer, quartz-graphics, mask

**如果我将cornerRadius**属性设置为我想要遮罩的图层，我只能设法做到这一点。

我正在努力实现：

1.  整个蓝色的 UIView。
2.  CALayer 全背景颜色为红色。
3.  maskLayer, CALayer 小于第一个 (CGRectInset(redLayer.frame, 20, 20))
4.  redLayer.mask = maskLayer
5.  `[blueView.layer addSublayer:redLayer]`

现在我想只有红色边框（redLayer），中间是蓝色的（因为 blueView 是蓝色的）。这个蓝色部分是 maskLayer 的大小/形状（并且是透明的，所以我应该看到蓝色）。

我在这里走对了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:52:20.977

`maskLayer`必须设置一些颜色。

# unix - unix fork 命令只能返回一个孩子？

> ID：12767314
> 
> 赞同：0
> 
> 时间：2012-10-07T08:38:53.953
> 
> 标签：unix, process, fork

对于这样一个菜鸟问题，我很抱歉，但我不熟悉 Unix（系统调用）。我试图理解 fork 命令，我知道如果它的子进程或返回 pid 的子 ID，fork 命令返回 pid 0。我想知道一个进程一次只能有一个子进程并返回它的 pid 还是可以有多个子进程？（实际上我无法想象如果它有多个子进程，如何返回 pid 和哪个 pid？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:41:13.077

*每次调用*都会[`fork()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html)创建一个子进程，并且只返回该单个进程的 PID，但没有什么可以阻止您`fork()`多次调用以创建多个子进程。

不要忘记[wait() 或 waitpid()](http://pubs.opengroup.org/onlinepubs/009695399/functions/wait.html)让您的分叉子进程退出，否则您可能会遇到[僵尸进程](http://en.wikipedia.org/wiki/Zombie_process)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T08:42:12.237

[Fork](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)不是 Unix*命令*，而是在[fork(2)](http://pubs.opengroup.org/onlinepubs/009695399/functions/fork.html) Posix 手册页中记录的[系统调用。](http://en.wikipedia.org/wiki/Syscall)Linux 手册页是[fork(2) -linux-](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)这里。

成功时，`fork`系统调用返回两次：一次在（调用）父进程中（它给出`pid`子进程的 ），一次在新创建的子进程中（它给出 0）。否则，这两个进程是克隆（并且一些 Linux 实现`fork`在 Linux 特定的[clone(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clone.2.html)系统调用之上实现了一个实现）并且正在执行具有几乎相同状态的相同程序（实际上是两个几乎相同的副本）。两个（父子）进程同时运行（作为内核调度的任务，可能在不同的处理器内核上并行运行）。

系统`fork(2)`调用可能（很少）失败（例如，为了避免[分叉炸弹](http://en.wikipedia.org/wiki/Fork_bomb)），例如，当已达到使用[setrlimit(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setrlimit.2.html)`RLIMIT_NPROC`系统调用设置的限制时。当它失败时，系统调用返回 -1 并且你应该检查. 检查每个系统调用的失败是一种很好的做法，也不例外。`fork``errno``fork`

Fork 是启动进程的常用方式，所有 [除了一些罕见的例外] 用户进程都是由某个`fork`系统调用（或类似`vfork(2)`, or的变体`clone(2)`）启动的。特别是，当您在 shell（例如，可能在终端仿真器中运行）中键入命令（例如`ls`或）时，shell 通常会先 -ing 自身，然后-ing 所需的程序（例外是 shell 内置命令，如）。`date``/bin/bash``fork``execve``cd`

^(请注意，Linux 系统上的几乎所有进程都是由`fork`. 例外是内核启动的进程，如`/sbin/init`or `/sbin/modprobe`...)

您可以`fork`多次调用（典型的 shell 实现对每个命令都执行此操作，除了内置命令，如`cd`；您可能想研究自由软件 shell 的源代码，`sash`如 `bash`您最终应该使用[wait(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/wait.2.html)或`waitpid(2)`系统调用等待子进程。[进程可以使用execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)系统调用更改其可执行文件和地址空间。它的[地址空间](http://en.wikipedia.org/wiki/Address_space)可以使用[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)和相关的系统调用来改变。

您可能想用它`strace -f`来了解系统调用是由什么进行的，例如通过某些 shell。

I strongly recommend reading the [Advanced Unix Programming](http://basepath.com/aup/) book and the [Advanced Linux programming](http://advancedlinuxprogramming.com) book (the later being available on line with some free license).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T09:16:25.920

Same answer as others with a twist: If each process could create only one child (use fork() only once), what would that mean for the *lineage* of processes? It would mean that there is exactly one line, say, `init -> login -> shell -> ls`. Would you like such a system? What is your conclusion?

# python - Surface.scroll() 是在 Pygame 中实现可移动 2D 视点的正确方法吗？

> ID：12767315
> 
> 赞同：2
> 
> 时间：2012-10-07T08:39:00.187
> 
> 标签：python, optimization, graphics, pygame

我正在用 Python+Pygame 编写一个 2D 精英风格的游戏，我需要移动星图以便玩家可以看到整个事物。

我以前做过这种事情的方法是在绘图时将“相机”的坐标添加到其他所有东西的坐标中。但是，我注意到 Pygame 具有将整个表面移动一定量的功能。这会是实现此功能的更快、更简单的方法吗？

星图大约是 100,000 像素正方形，如果它取决于图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:15:26.700

对于初学者来说，一个巨大的位图并不是很好，因为它会消耗资源。

我所做的是将地图划分为相机的大小，最终一次显示 9 个图块，移动相机会移动地图，并仅绘制可见的图块。虽然没有太大的改善。

您总是可以尝试更简单的方法，如果您觉得游戏太慢，您可以尝试其他方法。如果您看不到差异，则没有优化的意义。

# c# - 检查所选单元格是否在特定范围内

> ID：12767320
> 
> 赞同：4
> 
> 时间：2012-10-07T08:40:30.173
> 
> 标签：c#, excel, range, cell

我正在使用 C# 创建 Excel 加载项。

如何检查选定的（或由代码中的范围表示的单元格）是否在特定范围内。例如如何检查单元格 $P$5 是否在 $A$1:$Z$10 范围内

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:48:28.993

像这样使用`Application.Intersect`（在 VBA 中）

```
Sub TestIntersect()
    Dim MyRange As Range
    Dim TestRange As Range

    Set TestRange = [$A$1:$Z$10]
    Set MyRange = [P5]

    If Not Application.Intersect(MyRange, TestRange) Is Nothing Then
        Debug.Print "the ranges intersect"
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-01T08:57:35.323

根据接受的答案，我添加了 C# 版本（根据问题中的要求）：

```
var myRange = Application.Range["$P$5"];
var testRange = Application.Range["$A$1:$Z$10"];

if (Application.Intersect(myRange, testRange) != null)
{
    // do something 

} 
```

# c++ - 您应该在前向声明标头中使用#ifndef 保护吗？

> ID：12767321
> 
> 赞同：3
> 
> 时间：2012-10-07T08:41:00.300
> 
> 标签：c++, header-files, forward-declaration

我有一个简单的头文件，我在其中前向声明命名空间中的所有类，例如。

```
#ifndef TEST_FWD_HPP
#define TEST_FWD_HPP

namespace a {
    namespace b {

            class A;
            class B;

    }
}

#endif 
```

是否应该防止该文件出现多个包含（`#ifndef`...）？这仅对前向声明有意义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T08:45:10.377

像这样保护头文件通常是一种好习惯。在大多数情况下，文件只包含一次是没有必要的，但是当项目变得复杂时，头文件包含在其他头文件中，它可以帮助您保持理智。

如果你只有前向定义和函数原型，那么通常是没有必要的，但随着时间的推移，头文件往往会增加东西，这通常是理所当然的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T08:45:38.973

多个包含保护不仅服务于多个声明错误。您需要在每个头文件中插入这些保护，以避免无限包含循环。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T08:51:54.993

只需使用（正式非标准）[`#pragma once`](http://en.wikipedia.org/wiki/Pragma_once#Portability)并完成它。

除了防止同一翻译单元中的多个包含之外，标头保护或`#pragma once`让精明的编译器避免重新扫描文件。

# .htaccess - htaccess 参数

> ID：12767325
> 
> 赞同：2
> 
> 时间：2012-10-07T08:41:54.163
> 
> 标签：.htaccess, url-parameters

我有以下重写。最后一个是 par ID，但我希望它是可变的，必须是 ID 或数量，这可能吗？

现在：

```
RewriteRule ^([a-z0-9\-]+)/([a-z0-9\-]+)/([a-z0-9\-]+)/?$ index.php?action=$1&item=$2&id=$3 [NC,L] 
```

一定是：

```
RewriteRule ^([a-z0-9\-]+)/([a-z0-9\-]+)/([a-z0-9\-]+)/?$ index.php?action=$1&item=$2&id=$3 [NC,L]
RewriteRule ^([a-z0-9\-]+)/([a-z0-9\-]+)/([a-z0-9\-]+)/?$ index.php?action=$1&item=$2&quantity=$3 [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:01:13.197

我不认为你可以纯粹地执行你想做的事情`.htaccess`

您可能正在寻找：

```
 RewriteRule ^([a-z0-9-]+)/([a-z0-9-]+)/([a-z0-9-]+)/?$ index.php?action=$1&item=$2&id=$3&quantity=$3 [NC,L] 
```

在 中`index.php`，您可以确定 $3 是 ID 还是数量。

# yii - 如何使用 Yii 框架使用 yiic 命令创建 webapp

> ID：12767326
> 
> 赞同：4
> 
> 时间：2012-10-07T08:42:01.403
> 
> 标签：yii

我正在尝试在 Yii 中构建我的第一个应用程序，其网站上的指南位于以下地址： http : [//www.yiiframework.com/doc/guide/1.1/he/quickstart.first-app # add-comment](http://www.yiiframework.com/doc/guide/1.1/he/quickstart.first-app%20#%20add-comment)问题是通过 YIIC 安装应用程序框架的任何问题都不可能出现。我做了以下事情： 1\. 我浏览了我的 WAMP 服务器框架的 CMD 库。2.我写了以下命令：**yiic.php webapp www/blog**，我也尝试了以下命令：**yiic webapp www/blog**。

据我了解他们的指南，是否应该有一个名为*blog*的目录和一个骨架应用程序。实际发生的情况是，Windows 会打开标题为“打开方式”的窗口，要求我选择要打开 yiic.php 以查看文件内容的程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T11:25:49.367

在 Windows 上，您只需转到框架文件夹并键入：

```
yiic webapp pathToYourNewProject 
```

yiic 将默认为 yiic.bat，因此您无需指定任何 php.exe（我并不是说它不会那样工作）。新项目的路径可以是相对的或绝对的，以下是一些示例：

```
-- C:
   |
   -- sandbox/
     |
     --yii/
     | |
     | --framework/
     |   |
     |   --yiic.bat (for Window)
     |   --yiic.php (for Linux)
     --newWebApp/ 
```

要在 Windows 上创建，我使用：

```
cd c:\sandbox\yii\framework
yiic webapp ../../newWebApp
type yes when prompted and you're done 
```

或者

```
cd c:\sandbox\yii\framework
yiic webapp c:\sandbox\newWebApp
type yes when prompted and you're done 
```

在 Linux 上创建：

```
cd /media/sf_sandbox/yii/framework/
./yiic webapp ../../newWebApp 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T16:58:09.457

最好遵循 yii 官方文档。你可以在这里找到逐步安装 Yii 的过程

> 文档> 教程 > Yii 博客教程 > 使用 Yii 进行测试 # 安装 Yii

这是链接[http://www.yiiframework.com/doc/blog/1.1/en/start.testdrive#installing-yii](http://www.yiiframework.com/doc/blog/1.1/en/start.testdrive#installing-yii)

* * *

**如果您在尝试使用yiic webapp ..\app-name**时遇到此类错误

 ****'"php.exe"' 不是内部或外部命令、可运行程序或批处理文件。**

打开yii框架文件夹（**C:\wamp\www\framework ）下的****yiic.bat**文件并更改以下行

 **```
if "%PHP_COMMAND%" == "" set PHP_COMMAND=php.exe 
```

至

```
if "%PHP_COMMAND%" == "" set PHP_COMMAND=C:\wamp\bin\php\php5.4.16\php.exe 
```

**php5.4.16**这可能会根据您的 php 版本进行更改，请在更改前检查 C:\wamp\bin\php 文件夹

否则您可以将此路径变量设置为环境变量**（控制面板\所有控制面板项\系统>高级系统设置>环境变量）** 您所要做的就是添加这个**C:\wamp\bin\php\php5.4.16\ php.exe**与**;** 如下图所示的**路径**值之后

![在此处输入图像描述](../Images/deb3a2afcf5a6487409b2c1fd31a4fd9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T13:09:10.860

此外，如果您在通过计算机属性在环境变量中添加 php 引擎路径后遇到问题。直接您可以通过“C:\wamp\www\Yii\framework”添加 yii.bat 位置我作为示例给出的位置意味着我的yii 框架 bat 文件位于 C:\wamp\www\Yii\framework

以上可以通过以下方式完成：开始->我的电脑（右键单击！）->高级选项卡->环境变量->单击系统变量中的路径->编辑。

更多详情[如何安装 Yii 应用程序](http://jyotiloppy.blogspot.in/2014/02/how-to-instal-yii-application-in-wamp.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T08:46:26.230

我想你在Windows上？它需要知道 php 文件应该用 php.exe 打开，所以你需要调用`php.exe yiic.php webapp www/blog`.

为了提供这个，他们还添加了 yiic.bat，所以只要`yiic webapp www/blog`php.exe 在您的环境路径中，您就可以调用。如果没有，最好添加它（计算机、属性、高级设置、环境变量），这样您以后可以更轻松地执行 php 脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T13:20:47.140

创建项目的命令是

```
yiic webapp test 
```

在其中*测试*是项目名称。

有关更多详细信息，请查看此链接

[http://dcageek.blogspot.com/2013/06/how-to-install-yii-framework-on-windows.html](http://dcageek.blogspot.com/2013/06/how-to-install-yii-framework-on-windows.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T14:22:26.543

1-使用命令提示符/DOS 并转到**cd c:\wamp\www\yii\framework**。这里的“yii”文件夹有 yii 文件。

2-然后输入**yiic webapp ../../yiimyapp**。这里 yiimyapp 是我在 wamp 的 www 文件夹中的新文件夹。

3-之后它会要求确认在 www 文件夹中创建应用程序。键入**是**并输入。

4-应用程序将被创建。转到 www 文件夹，您可以看到新创建的带有文件的“yiimyapp”文件夹。

如果您需要在 yii/demos 文件夹中创建应用程序，只需在上述步骤 2 中键入**yiic webapp ../demos/yiimyapp 。然后 app 文件夹将在 yii demos 文件夹中创建。**不是 www 根目录中的单独文件夹。

仅此而已。****

# java - 如何为此代码构建测试用例？我的 testFindEmployeeByID 有什么问题？

> ID：12767332
> 
> 赞同：-1
> 
> 时间：2012-10-07T08:42:44.010
> 
> 标签：java, testing, junit

如何为这段代码构建一个测试用例？请检查底部的我的 TestCase 示例。我的 testFindEmployeeByID 有什么问题？

```
public Employee findEmployeeByID(int employeeID) throws HRSSystemException{
    Employee result = null;
    try {
        PreparedStatement pStmt = conn
                .prepareStatement("select * from Employee where ID = ?");
        pStmt.setInt(1, employeeID);

        ResultSet rs = pStmt.executeQuery();
        if (rs.next()) {
            result = new EmployeeImpl(rs.getInt("ID"), 
                        rs.getString("FIRSTNAME"),
                        rs.getString("LASTNAME"), 
                        rs.getInt("LEVEL"));

        }
        rs.close();
        pStmt.close();
    } catch (SQLException e) {
        throw new HRSSystemException(HRSSystemException.ERROR_FIND_EMPLOYEE_ID,
                e);
    }
    return result;  
} 
```

测试用例：

```
public void testFindEmployeeByID(){
    testFindEmployeeByID abc = new testFindByEmployeeID();
    Employee e = abc.findEmployeeByID(employeeID);
    assertEquals(1,e.getID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:12:47.783

`testFindEmployeeByID()`-method中的这部分看起来是错误的：

```
testFindEmployeeByID abc = new testFindByEmployeeID(); 
```

`testFindEmployeeByID`测试类名称也是？您可能打算实例化包含实际方法的类`findEmployeeByID`。

# json - WCF JSON - 不要返回那些全部为空的字段

> ID：12767336
> 
> 赞同：2
> 
> 时间：2012-10-07T08:43:35.627
> 
> 标签：json, wcf

我必须通过 Json 返回一个像这样的对象：

```
User={
    id:4,
    name:'Peter',
    nickname:null
} 
```

所以我的 C# 对象看起来像：

```
class User {
    public int Id {get;set;} 
    public string name {get;set;} 
    public string nickname {get;set;} 
} 
```

WCF 自动将 C# obkect 翻译成上面的 Json。但是如果昵称为空，我怎么能告诉 WCF 根本不返回它，所以返回的 JSOn 将是

```
User={
    id:4,
    name:'Peter'
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:52:42.017

据我所知，WCF 使用 DataContractJsonSerializer 将对象序列化为 JSON。通常你有一个用`DataMember`属性注释的类，它又具有一个`EmitDefaultValue`属性（默认是`true`；请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue.aspx)）

> 获取或设置一个值，该值指定是否序列化正在序列化的字段或属性的默认值。

因此，如果您执行以下操作，它可能会起作用：

```
[DataContract]
class User {

    [DataMember]
    public int Id {get;set;} 

    [DataMember]
    public string name {get;set;} 

    [DataMember(EmitDefaultValue=false)]
    public string nickname {get;set;} 
} 
```

请注意，我没有自己尝试过。你必须检查一下，但听起来它可以工作。

# relationship - Neo4j 关系方向

> ID：12767341
> 
> 赞同：2
> 
> 时间：2012-10-07T08:44:09.123
> 
> 标签：relationship, neo4j, graph-databases

我有一组用户。我通过关系将它们连接到图的根节点。

我应该将关系点从根节点指向用户，还是应该将其从用户指向根节点。

有什么好处和坏处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T10:56:04.903

对于 Neo4j，根据关系方向的不同，特征或性能没有差异。所以最好的做法是根据听起来最好的方式做出选择。

例如，我将创建从根节点到用户的关系，因为根节点是一种“所有者”，如果我想要所有用户，我想*从*根节点遍历*到用户。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T20:37:35.600

如果您碰巧使用 Spring Data Neo4j (SDN)，请建立从用户到（子）参考节点的连接，因为 SDN 在添加新目标节点时会加载从源到目标的所有关系。如果您有很多用户，所有这些现有的关系都将在添加新关系时加载。

否则，正如 cporte 已经提到的那样，关系的方向只是一个品味问题。

# routing - 建立道路网络

> ID：12767342
> 
> 赞同：5
> 
> 时间：2012-10-07T08:44:11.173
> 
> 标签：routing, postgis, qgis, pgrouting

我有不同数量的轨道代表不同的道路。每条轨道代表一条道路。我已将此 gpx 文件加载到我的 postgres 中。

现在我的问题是我将如何在所有这些道路之间建立一个网络，以便能够找到从任何轨道点到任何其他轨道点的最短路径。在下面，您可以看到我的 4 条道路的图像。 ![我的路](../Images/5b9d3d359a3a9390f1522fb13c2fd868.png)

我已经安装了 pgrouting 和 postgis。我已经通过创建源列和目标列并使用assign_vertex_id() 为它们加载数据来完成一些工作。问题是网络没有正确构建，比如我只能从同一条道路的起点到终点，而不是不同的道路。任何建议如何在所有这些道路之间建立适当的网络？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-18T01:03:03.650

这是一个古老的问题，但 pgRouting 现在具有帮助您从数据库内部构建网络的功能。

[http://docs.pgrouting.org/2.0/en/src/common/doc/functions/node_network.html#pgr-node-network](http://docs.pgrouting.org/2.0/en/src/common/doc/functions/node_network.html#pgr-node-network)

# sql-server-2005 - SQL Server 2005 存储过程错误

> ID：12767344
> 
> 赞同：0
> 
> 时间：2012-10-07T08:44:35.037
> 
> 标签：sql-server-2005

我在 SQL Server 2005 中为员工详细信息创建了一个插入命令的存储过程，其中一个参数是我已用作`varbinary`表中数据类型的图像。

但是当我在存储过程中添加该参数时，我收到以下错误-

> *不允许从数据类型 varchar 到 varbinary 的隐式转换。使用 CONVERT 函数运行此查询。*

存储过程：

```
( 
    @Employee_ID nvarchar(10)='', 
    @Password nvarchar(10)='', 
    @Security_Question nvarchar(50)='', 
    @Answer nvarchar(50)='', 
    @First_Name nvarchar(20)='',
    @Middle_Name nvarchar(20)='', 
    @Last_Name nvarchar(20)='', 
    @Employee_Type nvarchar(15)='', 
    @Department nvarchar(15)='', 
    @Photo varbinary(50)='' 
)

insert into Registration
(
      Employee_ID,
      Password,      
      Security_Question,
      Answer,
      First_Name,
      Middle_Name,
      Last_Name,
      Employee_Type,
      Department,     
      Photo     
)
values
(
      @Employee_ID,
      @Password,     
      @Security_Question,
      @Answer,
      @First_Name,
      @Middle_Name,
      @Last_Name,
      @Employee_Type,
      @Department,      
      @Photo   
     ) 
```

表结构：

```
Column Name        Data Type                 Allow Nulls
Employee_ID    nvarchar(10)             Unchecked
Password       nvarchar(10)              Checked
Security_Question   nvarchar(50)         Checked
Answer             nvarchar(50)              Checked
First_Name     nvarchar(20)              Checked
Middle_Name    nvarchar(20)              Checked
Last_Name      nvarchar(20)              Checked
Employee_Type      nvarchar(15)              Checked
Department     nvarchar(15)              Checked
Photo              varbinary(50)         Checked 
```

vb.net中调用存储过程的代码->

公共函数提交（ByVal obj As UserData，ByVal opt As String）作为布尔值

```
 Using cnn As New SqlConnection(conn)
        Using cmd As New SqlCommand
            cmd.Connection = cnn
            If opt = "Submit" Then
                cmd.CommandText = "sp_emp_Registration"
            End If

            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.Add(New SqlParameter("@Employee_ID", obj.EmpID))
            cmd.Parameters.Add(New SqlParameter("@Password", obj.Pwd))
            cmd.Parameters.Add(New SqlParameter("@Security_Question", obj.SecQues))
            cmd.Parameters.Add(New SqlParameter("@Answer", obj.Ans))
            cmd.Parameters.Add(New SqlParameter("@First_Name", obj.Firstname))
            cmd.Parameters.Add(New SqlParameter("@Middle_Name", obj.Middlename))
            cmd.Parameters.Add(New SqlParameter("@Last_Name", obj.Lastname))
            cmd.Parameters.Add(New SqlParameter("@Employee_Type", obj.EmpType))
            cmd.Parameters.Add(New SqlParameter("@Department", obj.dept))                
            cmd.Parameters.Add(New SqlParameter("@Photo", obj.photo))

            cnn.Open()
            Try
                If (cmd.ExecuteNonQuery() > 0) Then
                    cnn.Close()
                    Return True
                Else
                    Return False
                End If
            Catch ex As Exception
                Return False
            End Try
        End Using
    End Using
End Function 
```

我不知道该怎么办..谁能给我一些建议或解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:35:02.893

You assign a string to a varbinary as default value. This operation don't perform a implicit cast. To avoid error:

Change line:

```
@Photo varbinary(50)='' 
```

by:

```
@Photo varbinary(50) 
```

If you don't have Photo value for some rows you should alter table column to **allow nulls**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:35:24.040

The problem is `@Photo varbinary(50)=''`. In that statement you are setting the varbinary variable to a string value, i.e. = ''. Don't do that.

# node.js - Node.js async.queue 不起作用

> ID：12767348
> 
> 赞同：1
> 
> 时间：2012-10-07T08:45:09.410
> 
> 标签：node.js

我有这个非常简单的程序，输出应该是“foo”，然后是“baz”，但由于某种原因，“baz”没有打印在屏幕上。我犯了什么错误？

```
var async = require('async');

var q = async.queue(function (task, callback) {
    console.log(task.message);
}, 1);

q.push({ message : "foo" }, function (err) {});
q.push({ message : "baz" }, function (err) {}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T08:51:20.283

您必须`callback`排队等候：

```
var q = async.queue(function (task, callback) {
    console.log(task.message);
    callback( );
}, 1); 
```

通过这种方式，它通知队列，它完成了任务并且队列可以跳转到另一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:56:36.050

你只是忘记了

```
callback() 
```

试试这个它对我有用：

```
var async = require('async');

var q = async.queue(function (task, callback) {
    console.log(task.message);
    callback();
}, 1);

q.push({ message : "foo" }, function (err) {});
q.push({ message : "baz" }, function (err) {}); 
```

# emacs - 在 defadvice 中使用宏

> ID：12767353
> 
> 赞同：0
> 
> 时间：2012-10-07T08:45:56.047
> 
> 标签：emacs, elisp

我的初始化中有这段代码：

```
(defadvice kill-buffer (around show-diff-rephrase-question activate compile)
  "Prompt when a buffer is about to be killed."
  (case (read-char-choice
         "(s/k/q)? "
         (append "sSKkQq" nil))
    ((?s ?S)
     ad-do-it)
    ((?k ?K)
     ad-do-it)
    ((?q ?Q) nil))
  ad-do-it) 
```

当我打电话`eval-buffer`评估它时它会起作用。但是，如果我编译初始化文件，我会得到

> 无效功能：(115 83)

如果我插入`(case ...)`sexp 的宏扩展，那么它作为编译文件工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:29:27.247

您需要`(eval-when-compile (require 'cl))`在此定义之前添加某处：`case`不是预定义的宏。添加`(require 'cl)`也可以，但是`cl`一旦编译了 init 文件就会导致不必要的加载，从而减慢启动速度。

# objective-c - 设置单元格选择的背景视图删除背景视图

> ID：12767357
> 
> 赞同：1
> 
> 时间：2012-10-07T08:46:29.317
> 
> 标签：objective-c, ios, user-interface, uitableview

我正在尝试设置 custom `UITableViewCells`。我可以设置 backgroundView 没问题，但如果我设置`selectedBackgroundView`，单元格的背景变成白色，只看到选定的背景：

```
- (void) createCell: (UITableViewCell*)cell onRow: (NSUInteger)row
{
UIImageView* bgImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cell_background_red.png"]];
cell.backgroundView = bgImage;
cell.selectedBackgroundView = bgImage;
cell.textLabel.hidden = YES;

UILabel* titleLabel = [[UILabel alloc] initWithFrame: CGRectMake(20, CGRectGetHeight(cell.frame) / 2, 200, 50)];
titleLabel.text = [[self.ruleList objectAtIndex: row] objectForKey: TitleKey];
titleLabel.backgroundColor = [UIColor clearColor];
[cell.contentView addSubview: titleLabel];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:33:52.930

You are setting the same image for both backgroundView and selectedBackgroundView.

```
cell.backgroundView = bgImage;
cell.selectedBackgroundView = bgImage; 
```

when you do like this, both are overlapped and results in a white colored background or you could see only the background selected view.

# eclipse - 使用新代码运行单个 JUnit 测试

> ID：12767358
> 
> 赞同：0
> 
> 时间：2012-10-07T08:46:40.737
> 
> 标签：eclipse, maven, junit4

> **可能重复：**
> [无根测试](https://stackoverflow.com/questions/120889/unrooted-tests)

我有一个项目，我集成了 Junit 来测试一些方法。当我午餐 Run-> Maven Install 时，所有测试都被执行，但是如果我写了一个新测试然后我尝试午餐它 JUnit 返回了我的 UnrootedTest 的 InitializationError？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:51:43.403

如果您的类`TestCase`在其层次结构中的某个位置扩展，您必须使用`JUnit 3`运行配置下的下拉列表中列出的测试运行器。使用`JUnit 4`跑步者（我相信默认设置）会导致发生无根测试现象。

检查这个问题，可能会有所帮助：[Unrooted Tests](https://stackoverflow.com/q/120889/1268844)

# php - Cookie 未在 PHP 中设置

> ID：12767359
> 
> 赞同：0
> 
> 时间：2012-10-07T08:46:50.383
> 
> 标签：php, session-cookies, setcookie

在 PHP 中设置 cookie 有问题。如果选中复选框，这是我用来设置 cookie 的代码。

```
<?php 
    if(isset($_POST['remember'])){
    setcookie("loggedemail",$email,"time()+3600","/");
    setcookie("loggedpassword",$password,"time()+3600","/");
    echo $_COOKIE['loggedemail'];
    echo $_COOKIE['loggedpassword'];
}
?> 
```

这里的“记住”是我用来设置 cookie 的复选框的 ID。这里的问题是

*   单击“检查元素”时，我无法在 chrome 的资源选项卡上看到 cookie。
*   我看不到任何回声。
*   未设置 cookie。

此外，当有人退出会话时，我无法删除会话 cookie。 `session_destroy();`似乎没有起作用，因为 Chrome 仍然显示要设置为活动的 cookie。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:11:01.647

如果你这样做：

```
setCookie("cookieName", "value", time() + 3600); 
```

它必须工作（如果您没有更改任何浏览器设置）。但是，该变量在页面的下一次加载之前不可用。不过，您应该能够在 Chrome 开发工具中看到它。如果没有，请确保 100% 在设置 cookie 之前没有输出任何内容。

关于你的第二个问题，`session_destroy()`销毁一个会话，但它不会使已经发送到客户端的 cookie 无效。您需要通过设置它们的到期时间来手动使它们失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:12:04.323

的值`$_COOKIE`是通过读取从浏览器接收到的 cookie 来设置的。

为了从浏览器接收 cookie，它必须是：在 PHP 中设置 -> 浏览器应该加载 -> 用户应该导航到下一页（或提交表单）。

所以基本上如果你使用`setcookie`你还不能阅读`$_COOKIE`，直到下一次刷新。这就是为什么`echo`s 没有显示任何内容。他们正在展示`NULL`- 确认此用途`var_dump`，您将看到输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T08:51:39.113

您将时间作为字符串传递。这是问题所以改变你的PHP代码如下

```
setcookie("loggedemail",$email,time()+3600,"/");
setcookie("loggedpassword",$password,time()+3600,"/"); 
```

Cookie 不是会话的一部分，因此您不能使用 session_destroy()。

如果要删除cookie，则必须将时间设置为过去时间，如下所示

```
setcookie("loggedemail", "", time()-3600); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T08:53:00.363

`session_destroy()`不会取消设置其中包含会话 ID 的 cookie，它只会丢弃会话数据。

您说复选框具有“记住”的 id 属性 - 它是否具有名称属性？如果不是这就是为什么一切都无法正常工作的原因，ID 不会发布到每个 HTML 定义的表单操作中。

# android - 可收藏的 Android 小部件

> ID：12767361
> 
> 赞同：0
> 
> 时间：2012-10-07T08:47:04.737
> 
> 标签：android, android-widget

目前我正在网上扫描有关小部件的信息，这些小部件可以收集在 Android 4 和更多的文件夹中，但我还没有成功。我发现了很多创建标准小部件的教程。

我也阅读了有关快捷方式的信息，但也没有成功找到任何有用的信息。

我正在寻找的示例是 android 本身的“直接消息”或“直接呼叫”小部件、“Google Drive”快捷方式、Soundhound 的“ID Now”等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:16:03.633

只需按照[这个答案](https://stackoverflow.com/questions/6337431/android-create-shortcuts-on-the-home-screen)，Android（我猜是从 Android 3 或 4 开始）就会在股票启动器的小部件部分将您的快捷方式显示为小部件。

# php - 如果在 php 中使用了太多的回声？

> ID：12767366
> 
> 赞同：0
> 
> 时间：2012-10-07T08:48:01.880
> 
> 标签：php

这是我目前想要更新的代码

```
<?php
if ($admin != null) {
    if ($admin->get_permissions()==3) echo "Welcome Administrator"; 
    elseif ($admin->get_permissions()==1) echo 'Welcome User';
}
else echo 'Welcome guest.'; 
```

现在我想展示的更像是

```
<?php
if ($admin != null) {
    if ($admin->get_permissions()==3) echo '<center><br>Welcome';  
    echo $admin->get_nicename();
    echo '<br /><center>
        <p></p>
        <p>&nbsp; </p>
        <p>Basic Information about your account~ </p>
        <p>
        Username:';  
    echo $_SESSION['admin_login']; 
    echo'</p>
        <p>
        Email:'; 
    echo $admin->get_email(); 
    echo '</p>
        <p>
        Admin Level:';
    echo $admin->get_permissions(); 
    echo '<p>
        <p><hr />
        </center>

        <p>'; 
```

现在，当我试图让它运行时，它给了我下一个 else if 的错误语法；我的另一个问题是我确实有一个 javascript 按钮，我不确定如何在 php else if 行中实现该按钮；按钮本身是

`<input type="button" onClick="javascript:window.location.href='logout.php'" value="Logout" />` 我知道代码很草率，但我不确定如何以其他方式设置此变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:54:24.820

如果出现以下情况，我认为您缺少左大括号：

```
if ($admin->get_permissions()==3) { echo '<center><br>Welcome'; 
//                                ^^ missing 
```

最后我没有看到右括号，我不清楚您是否发布了所有脚本。

我建议使您的代码更具可读性。有不同的方法可以做到这一点。

以包含为例：

```
if ($admin != null) {
  if ($admin->get_permissions()==3) { 
     include 'user_welcome.php';
  }
  // do other stuf here
} 
```

或者如果有很多 html 使用 end php 标签：

```
 if ($admin != null) {
      if ($admin->get_permissions()==3) { ?>
        <center>
          <br>
          Welcome <?php echo $admin->get_nicename(); ?><br />
        </center>
        <p>
        </p>
        <p>
          &nbsp; 
        </p>
        <p>
          Basic Information about your account~ </p>
        <p>
          Username: <?php echo $_SESSION['admin_login']; ?> 
        </p>
        <p>
        <!-- the rest of the html code -->
    <?php } // closing the sceond if
} // closing the first if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:57:07.290

给你哥们：[http ://www.php.net/manual/en/control-structures.if.php](http://www.php.net/manual/en/control-structures.if.php)

阅读你的语法。正如 JvdBerg、KingCrunch 和其他人所说，您的代码中缺少括号。您可以使用不带括号的 if 语句，但您没有正确执行。

快速浏览一下该链接。另外，在我看来，您有太多的回声语句要使用：

```
<?
$str = <<<EOF
blah, blah, blah, blah some text  and  a $variable 
blah, blah some <html> code, etc. ...
EOF;
?> 
```

现在 EOF 可以重命名为任何东西，但要确保它是唯一的并且没有分配给它的常量。如您所见，它将使您的代码看起来更清晰。

另外，你有一个 html 问题。您的 <center> 标签没有结束符。继续编程，但要复习我发送的那个链接，并在发布这样的问题之前多研究一下你的代码。

# java - 如何在 Java Swing 应用程序中添加一个简单的延迟？

> ID：12767367
> 
> 赞同：4
> 
> 时间：2012-10-07T08:48:07.713
> 
> 标签：java, multithreading, swing, timer, swingworker

我想知道如何在 Java 中的 Swing 应用程序中添加时间延迟，我使用过`Thread.sleep(time)`，也使用过 SwingWorker，但它不起作用。这是我的代码的一部分：

```
switch (state) {
    case 'A':
        if (charAux == 'A') {
            state = 'B';                    
            //Here's where I'd like to add a time delay
            jLabel13.setForeground(Color.red);
            break;
        } else {                            
            //Here's where I'd like to add a time delay
            jLabel12.setForeground(Color.red);
            break;
        }
} 
```

希望您在我使用 SwingWorker 时能帮助我或解决我的疑惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T09:03:22.203

这是一个使用`javax.swing.Timer`

```
public class TestBlinkingText {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new BlinkPane());
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }            
        });
    }

    protected static class BlinkPane extends JLabel {

        private JLabel label;
        private boolean state;

        public BlinkPane() {

            label = new JLabel("Look at me!");
            setLayout(new GridBagLayout());

            add(label);

            Timer timer = new Timer(500, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent ae) {                    
                    state = !state;
                    if (state) {
                        label.setForeground(Color.RED);
                    } else {
                        label.setForeground(Color.BLACK);
                    }                    
                    repaint();                    
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.setInitialDelay(0);
            timer.start();            
        }        
    }    
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-07T08:56:54.883

幸好你删除了`Thread.sleep`，因为这会使你的 UI 在这 2 秒内没有响应。

你可以做的是启动一个`Timer`只运行一次的：

```
int delay = 2000;
Timer timer = new Timer( delay, new ActionListener(){
  @Override
  public void actionPerformed( ActionEvent e ){
    jLabel12.setForeground( Color.red );
  }
} );
timer.setRepeats( false );
timer.start(); 
```

请注意，`Timer`是 a `javax.swing.Timer`，它确保在事件调度线程上调用的`actionPerformed`方法，遵守 Swing 线程规则。`ActionListener`

这也可以使用 a `SwingWorker`，但我会坚持使用 a `Timer`。如果您想使用`SwingWorker`，您可以简单地`Thread.sleep`在方法中使用，并在`doInBackground()`方法中更新。`JLabel``done()`

类似的东西

```
class Delay extends SwingWorker<Void, Object> {
 @Override
 public void doInBackground() {
  Thread.sleep( 2000 );
 }

 @Override
 protected void done() {
   jLabel12.setForeground( Color.red );
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T08:51:20.853

如果要指定操作的延迟，则需要使用[Timer 。](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# vba - 使用 Outlook 2010 将回复更改为另一个地址

> ID：12767368
> 
> 赞同：0
> 
> 时间：2012-10-07T08:48:10.890
> 
> 标签：vba, outlook, outlook-2010

我正在尝试创建 Outlook 2010 VBA 代码来回复\回复所有特定的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:36:27.917

我不是 Visual Basic 程序员，但我将下面的宏代码拼凑在一起，因为我在任何地方都找不到它。我花了很长时间才锻炼自己。这可能不是最佳实践，但对我有用。

要安装它：转到 Outlook 中的宏，键入宏名称，然后按创建。我叫我的“ChangeReplyAddrNoPrompt”。然后粘贴下面的代码（工作代码是 Sub() 和 End Sub 之间的行。然后保存并关闭 VBA。

然后打开一条新消息，单击自定义快速访问菜单，然后单击更多命令。从“选择命令”下拉菜单中选择宏。将您刚刚创建的宏添加到快速访问工具栏。

## 祝你好运！

```
Sub ChangeReplyAddrNoPrompt()
Dim mail As MailItem
Set mail = ActiveInspector.CurrentItem

mail.ReplyRecipients.Add ("email1@website.url")
mail.ReplyRecipients.Add ("email2@website.url")
mail.Recipients.ResolveAll

End Sub 
```

# canvas - Raphael js 覆盖多个画布

> ID：12767369
> 
> 赞同：1
> 
> 时间：2012-10-07T08:48:14.407
> 
> 标签：canvas, overlay, raphael, overlap

我有一个页面，我正在创建两个画布，每个画布包含 1 个矩形。我想将一个矩形覆盖在另一个矩形上，但它总是到画布的末端。我知道我可以使用单个画布轻松地将一个矩形覆盖在另一个矩形上，但我想使用两个画布来做到这一点。

> 有两个 div 标签*Container*和*Container1*。*Container1* div 位于Container *div*标签内。此外，***container1*** div 必须保持在页面的中心。

JS小提琴[链接](http://jsfiddle.net/P9Ebd/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:08:17.117

Canvas 基本上只是您提供的容器元素内的一个 SVG 元素，因此这是`div`相对于同一容器中的其他元素定位元素的问题。您可能必须对 container1 使用“位置：绝对”。

# ssh - Plesk SSH FTP 命令

> ID：12767376
> 
> 赞同：0
> 
> 时间：2012-10-07T08:49:43.827
> 
> 标签：ssh, ftp, plesk

我知道这不是完全编程问题，但我无法在任何地方找到答案。

我试图在我的新虚拟主机上通过 shell 运行“ftp”命令，以 root 用户身份登录，但出现以下错误：

> -bash：ftp：找不到命令

知道如何为 shell 安装/启用 ftp 命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:15:57.017

如果使用 debian：

```
apt-get install ftp 
```

在centos上

```
yum install ftp 
```

或者尝试 LFTP 更好：

```
apt-get install lftp

yum install lftp 
```

# c# - 数据未插入数据库

> ID：12767382
> 
> 赞同：1
> 
> 时间：2012-10-07T08:50:22.657
> 
> 标签：c#, database-connection, sql-server-ce

数据未从我的 C# 应用程序插入数据库，但未发现错误或异常。但是我可以使用 select 语句和数据阅读器从数据库中读取数据。

```
 private void button2_Click(object sender, EventArgs e)
    {
        string conString = Properties.Settings.Default.dbConnectionString;

        // Open the connection using the connection string.
        SqlCeConnection con = new SqlCeConnection(conString);
        con.Open();

        // Insert into the SqlCe table. ExecuteNonQuery is best for inserts.

        SqlCeCommand com = new SqlCeCommand("INSERT INTO test VALUES('num')", con);

        com.CommandType = CommandType.Text;
        // com.Parameters.AddWithValue("@num", "num");
        com.ExecuteNonQuery();
        MessageBox.Show("ok");

    } 
```

按下按钮后，将显示消息框。但是没有插入数据。

连接字符串：

```
Data Source=d:\manu\smalldb\smalldb\db.sdf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:29:34.773

您的应用程序正在处理数据库文件的副本。

为确保这是问题的根源 - 查看项目的 bin/Debug 目录。应该有一个包含所有更改的数据库文件，并且文件应该在“修改日期”中有新的时间戳。

要更改此行为，您必须更改项目中数据库文件的**“复制到输出目录”属性**。如果您想在数据库上工作，而不是在副本上 -**将其设置为 "Do not copy"**。

有关更多信息，请阅读以下内容：

1.  [本地数据概述（在 MSDN 库中）](http://msdn.microsoft.com/en-us/library/ms233817%28v=vs.80%29.aspx)重要

2.  [如何：管理项目中的本地数据文件（在 MSDN 库中）](http://msdn.microsoft.com/en-us/library/ms246989%28v=vs.80%29.aspx)

3.  [VB.NET 似乎只更新调试数据库，我如何让它更改实时数据库？（作为 MSDN Social）](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/25a093d2-8520-4727-8c6b-f5c3aefb3c2b)（关于 VB 而不是 C#，但没关系）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T08:53:53.070

也许你必须做一些提交来验证交易

喜欢[这里](http://www.c-sharpcorner.com/Forums/Thread/43026/)

或者

也许问题出在插入完成的地方和您照看的地方。

如果是这种情况，请看[这里。](http://dean-o.blogspot.be/2010/03/mind-your-copy-to-output-directory.html)本文介绍了“复制到输出目录”设置。这可能是你的问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T05:53:44.920

```
int count = cmd2.ExecuteNonQuery();    
if (count > 0)
{
    MessageBox.Show(" details Entered Successfully");
    clear();
}
else
    MessageBox.Show("Details Not Entered");

con.Close(); 
```

# ruby-on-rails-3 - Rails best_in_place jQuery 就地编辑：激活器按钮不起作用

> ID：12767383
> 
> 赞同：5
> 
> 时间：2012-10-07T08:50:29.657
> 
> 标签：ruby-on-rails-3, best-in-place

我有一个部分设置如下：

```
<%= best_in_place_if can?(:edit, Artist), @artist, :display_name, type: :input, :activator => "#activator" %>
<a href="#" id="activator">Edit</a> 
```

当我单击`Edit`链接时，没有任何反应。

如果我`:activator => "#activator"`从 best_in_place 链接中删除，则它允许我单击文本字段以按预期开始编辑；唯一的问题是这在 iPad 上不起作用，所以我需要一个单独的按钮来触发这个编辑功能。

有谁知道使`:activator`设置正常工作的解决方法，或者有其他建议（包括不同的 gem）他们知道可以用于现场编辑字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T23:30:02.723

您是否使用部分显示艺术家列表？也许ID不够具体，所以它变得混乱，因为有一个ID为“激活器”的激活器链接，但同时有多个“激活器”。尝试更具体地使用 ID。就像是：

```
<%= best_in_place_if can?(:edit, Artist), @artist, :display_name, type: :input, :activator => "#activator-#{@artist.id}" %>
<a href="#" id="activator-#{@artist.id}">Edit</a> 
```

# php - 递归删除文件夹时排除文件

> ID：12767390
> 
> 赞同：-1
> 
> 时间：2012-10-07T08:51:35.683
> 
> 标签：php, recursion, bitbucket, rmdir

我正在开发公共项目——它完全用基于 PHP 的项目的 GIT 取代了 FTP 部署方法。您放置 1 个文件 - 在您网站的根目录中部署 php。就这样。当您将某些内容推送到 Bitbucket git repo 时，此脚本会获取 zip 并将所有网站文件替换为 zip 内容

我想做的是，

1.  清除脚本所在的文件夹（在我的情况下为根目录），不包括此脚本和 .htaccess
2.  然后下载压缩包
3.  解压到 $dest
4.  将 $dest 的内容复制到 root
5.  删除 dest 及其所有内容

换句话说，它必须用新的 zip 内容替换整个根目录，不包括脚本本身和一些其他文件（在 $exc 数组中列出）。就这样。问题是，我的函数`rmdir_recursively`不排除文件，删除所有包括脚本。我错过了什么？

您还可以对脚本提出哪些其他优化建议？

提前谢谢。

```
<?php

// Set these dependant on your BB credentials    
$username = '';
$password = '';

// your Bitbucket repo name
$reponame = "";

// extract to
$dest = "./"; // leave ./ for relative destination

//Exclusion list
$exc = array("deploy.php", ".htaccess");

// Grab the data from BB's POST service and decode
$json = stripslashes($_POST['payload']);
$data = json_decode($json);

// set higher script timeout (for large repo's or slow servers)
set_time_limit(5000);

// Set some parameters to fetch the correct files
$uri = $data->repository->absolute_url;
$node = $data->commits[0]->node;
$files = $data->commits[0]->files;

//Clear Root 
rmdir_recursively(".");

// download the repo zip file
$fp = fopen("tip.zip", 'w');

$ch = curl_init("https://bitbucket.org/$username/$reponame/get/$node.zip");
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_FILE, $fp);

$data = curl_exec($ch);

curl_close($ch);
fclose($fp);

// unzip
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res === TRUE) {
    $zip->extractTo('./');
    $zip->close();
} else {
    die('ZIP not supported on this server!');
}

// function to delete all files in a directory recursively
function rmdir_recursively($dir) {
    global $exc;
    if(in_array($dir,$exc)) return false;
    if (!is_dir($dir) || is_link($dir)) return unlink($dir); 
        foreach (scandir($dir) as $file) { 
            if ($file == '.' || $file == '..') continue; 
            if (!rmdir_recursively($dir . DIRECTORY_SEPARATOR . $file)) { 
                chmod($dir . DIRECTORY_SEPARATOR . $file, 0777); 
                if (!rmdir_recursively($dir . DIRECTORY_SEPARATOR . $file)) return false; 
            }; 
        } 
        return rmdir($dir); 
}

// function to recursively copy the files
function copy_recursively($src, $dest) {
    if (is_dir($src)) {
        if ($dest != "./")
            rmdir_recursively($dest);
        @mkdir($dest);
        $files = scandir($src);
        foreach ($files as $file)
            if ($file != "." && $file != "..")
                copy_recursively("$src/$file", "$dest/$file");
    }
    else if (file_exists($src))
        copy($src, $dest);
    rmdir_recursively($src);
}

// start copying the files from extracted repo and delete the old directory recursively
copy_recursively("$username-$reponame-$node", $dest);

// delete the repo zip file
unlink("tip.zip");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T02:54:38.580

尝试这个

```
<?php

// set higher script timeout (for large repo's or slow servers)
$timeLimit = 5000;

///////////////////////////////////////////////////////////////////////////////////////
$mode = intval(isset($_POST['payload']));

if (isset($_GET['commit']))
    $mode = 2;

$force = isset($_GET['force']);
$owner = (isset($owner)) ? $owner : $username; // if user is owner
$repo = $reponame;
$response = "";

if ($mode == 0) { // manual deploy

    function callback($url, $chunk) {
        global $response;
        $response .= $chunk;
        return strlen($chunk);
    }

    ;

    $ch = curl_init("https://api.bitbucket.org/1.0/repositories/$owner/$repo/changesets?limit=1");

    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('User-Agent:Mozilla/5.0'));
    curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'callback');
    curl_exec($ch);
    curl_close($ch);

    $changesets = json_decode($response, true);
    $node = $changesets['changesets'][0]['node'];
    $raw_node = $changesets['changesets'][0]['raw_node'];
} else if ($mode == 1) { // auto deploy
    $json = stripslashes($_POST['payload']);
    $data = json_decode($json);
    // Set some parameters to fetch the correct files
    $uri = $data->repository->absolute_url;
    $node = $data->commits[0]->node;
    echo $node;
    $files = $data->commits[0]->files;
} else if ($mode == 2) { // deploy with hash code
    $node = $_GET['commit'];
    $node = substr($node, 0, 12);
    echo 'commit: ' . $node . "\n";
}
// Check last commit hash

if (isset($_GET['updated'])) {
    echo "\n<br>Bitbucket Deploy Updated<br>\n";
}

set_time_limit($timeLimit);

// Grab the data from BB's POST service and decode
// Clear Root
// download the repo zip file

if (!$force && file_exists('lastcommit.hash')) {
    $lastcommit = file_get_contents('lastcommit.hash');
    if ($lastcommit == $node)
        die('Project is already up to date');
}

file_put_contents('lastcommit.hash', $node);

$fp = fopen("tip.zip", 'w');

$ch = curl_init("https://bitbucket.org/$owner/$reponame/get/$node.zip");
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
//curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_FILE, $fp);

$data = curl_exec($ch);

curl_close($ch);
fclose($fp);

$exc["files"][] = realpath("tip.zip");

$tipsize = filesize("tip.zip");

if ($tipsize < 50) {
    die("Commit not found");
}

if ($autoUpdate)
    updateDeploy();

//var_dump($exc);
//die();

RemoveDir(realpath($dest), true, $exc);

// unzip
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res !== TRUE) {
    die('ZIP not supported on this server!');
}

$zip->extractTo("$dest/");
$zip->close();

copy_recursively("$owner-$reponame-$node", $dest);

RemoveDir(realpath("$owner-$reponame-$node"), false);
@rmdir("$owner-$reponame-$node");
// Delete the repo zip file
unlink("tip.zip");

// function to delete all files in a directory recursively

function updateDeploy() {
    global $force;
    global $dest;
    global $mode;
    $updated = isset($_GET['updated']);
    //var_dump($_GET);
    if ($updated)
        return true;

    $response = "";

    $response = file_get_contents("https://api.bitbucket.org/1.0/repositories/codearts/bitbucket-deploy/changesets?limit=1");

    $changesets = json_decode($response, true);
    $node = $changesets['changesets'][0]['node'];
    $raw_node = $changesets['changesets'][0]['raw_node'];

    $lastcommit = file_get_contents('data.hash');
    if (file_exists('data.hash')) {    //   if (!$force && file_exists('data.hash')) {
        $lastcommit = file_get_contents('data.hash');
        if ($lastcommit == $node)
            return;
    }
    file_put_contents('data.hash', $node);
    $deployLink = "https://bitbucket.org/codearts/bitbucket-deploy/get/$node.zip";
    $deploy = file_get_contents($deployLink);

    $f = fopen("deploy.zip", "w");
    fwrite($f, $deploy);
    fclose($f);
    $zip = new ZipArchive;
    $res = $zip->open('deploy.zip');
    if ($res !== TRUE) {
        die('ZIP not supported on this server!');
    }
    $zip->extractTo("$dest/");
    $zip->close();
    unlink('deploy.php');
    copy("codearts-bitbucket-deploy-$node/deploy.php", 'deploy.php');
    //unlink("codearts-bitbucket-deploy-$node/deploy.php");
    RemoveDir(realpath("codearts-bitbucket-deploy-$node"), false);
    @rmdir(realpath("codearts-bitbucket-deploy-$node"));

    $url = "http://" . $_SERVER['HTTP_HOST'] . "/deploy.php?updated" . (($force) ? '&force' : '');

    header("Location:" . $url);
    die();

//    if($mode != 1) echo "\n<br>Bitbucket Deploy Updated<br>\n";
}

// Deleting with exclude list

function checkExcluding($path, $excludinglist) {
    if (!isset($excludinglist["files"]))
        return false;
    if (!is_dir($path)) {
        return in_array($path, $excludinglist["files"]);
    }
    else
        return in_array($path, $excludinglist["dirs"]);
}

function RemoveDir($dir, $exclude = false, $excludelist = array()) {
    $it = new RecursiveDirectoryIterator($dir);
    $files = new RecursiveIteratorIterator($it, RecursiveIteratorIterator::CHILD_FIRST);
    //  var_dump($files);
    foreach ($files as $file) {
        if ($exclude && checkExcluding($file->getRealPath(), $excludelist)) {
            //  echo 'Excluding: ' . $file->getRealPath() . '<br>';
            continue;
        }

        if ($file->isDir()) {
            @rmdir($file->getRealPath());
            //echo 'DIR: ' . $file->getRealPath() . '<br>';
        } else {
            @unlink($file->getRealPath());
            //echo 'FILE: ' . $file->getRealPath() . '<br>';
        }
    }
    if (file_exists($dir))
        @rmdir($dir);
}

function copy_recursively($src, $dest) {
    //var_dump($src);
    global $exc;
    $excludeDirsNames = array();
    $excludeFileNames = $exc["files"];
    //     var_dump(  $excludeFileNames  );

    if (is_dir('' . $src)) {
        //  var_dump($src);
        // if ($dest != "./")
        //   rmdir_recursively($dest);
        @mkdir($dest);
        $files = scandir($src);

        // var_dump( $excludeFileNames );

        foreach ($files as $file) {
            if (!in_array($file, $excludeDirsNames)) {

                if ($file != "." && $file != "..")
                    copy_recursively("$src/$file", "$dest/$file");
            }
        }
    }
    else if (file_exists($src)) {

        $filename = $src;
        $filename = end(explode("/", $src));
        //$filename = $filename[count( $filename)-2];
        if (!in_array($filename, $excludeFileNames)) {
            //var_dump($filename);
            // var_dump(in_array( $filename, $excludeDirsNames));
            copy($src, $dest);
        }
    }
    //  rmdir_recursively($src);
}

if ($mode != 1)
    echo '<br>Done';
?> 
```

# python - 协同过滤的矩阵分解——新用户和项目？

> ID：12767394
> 
> 赞同：8
> 
> 时间：2012-10-07T08:52:07.880
> 
> 标签：python, machine-learning, recommendation-engine, svd, collaborative-filtering

我一直在阅读有关使用矩阵分解进行协同过滤的文章，但我似乎找不到处理向系统添加新用户或项目或让用户评价新项目的示例。在这些情况下，需要重新计算项目-用户矩阵和分解，对吗？这如何在大量用户和物品的情况下表现良好？有办法解决吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T21:20:45.063

您的问题有两个部分：（A）如何处理新用户和新项目，以及（B）如何处理新的交互（例如评分、点击等）。

(A) 处理新用户和新项目基本上有两种不同的策略（无论我们使用矩阵分解还是其他方法）：

1.  从用户（人口统计、调查）或项目（价格、流派、文本描述、类别）属性估计用户/项目特征
2.  主动学习：向与系统交互的所有用户展示新项目，或向系统的新用户展示某些项目，以平衡个人用户体验和系统获得的信息。

学术文献中有很多关于这两个问题的论文。

(B) 这确实没有问题——矩阵分解模型的增量更新没有高计算成本。参见例如这篇论文：[http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.165.8010&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.165.8010&rep=rep1&type=pdf)

MyMediaLite 库（免责声明：我是主要作者）支持几种矩阵分解方法的增量更新：http: [//ismll.de/mymedialite](http://ismll.de/mymedialite)

# java - Java异常被捕获，但又自动抛出？

> ID：12767395
> 
> 赞同：1
> 
> 时间：2012-10-07T08:52:08.627
> 
> 标签：java, exception, exception-handling

在学校，我正在创建一个简单的几何程序，询问形状的角数和坐标。为了防止错误的输入（即字符而不是整数），我想我会使用异常处理。它似乎工作正常，但是一旦我输入错误，它就会捕获错误并设置一些默认值。它应该继续要求更多输入，但不知何故，这些最终会在不要求新输入的情况下捕获相同的异常。

```
public static void main(String[] args) {
   Scanner stdin = new Scanner(System.in);

    try {
        int hoeken;
        System.out.print("How many corners does your shape have? ");

        try {
            hoeken = stdin.nextInt();
            if(hoeken < 3) throw new InputMismatchException("Invalid side count.");
        }
        catch(InputMismatchException eVlakken){
            System.out.println("Wrong input. Triangle is being created");
            hoeken = 3;
        }

        Veelhoek vh = new Veelhoek(hoeken);
        int x = 0, y = 0;

        System.out.println("Input the coordinates of your shape.");
        for(int i = 0; i < hoeken; i++){
            System.out.println("Corner "+(i+1));                
            try {
                System.out.print("X: ");
                x = stdin.nextInt();
                System.out.print("Y: ");
                y = stdin.nextInt();                    
            } catch(InputMismatchException eHoek){
                x = 0;
                y = 0;
                System.out.println("Wrong input. Autoset coordinates to 0, 0");
            }                
            vh.setPunt(i, new Punt(x, y));
        }

        vh.print();

        System.out.println("How may points does your shape needs to be shifted?");
        try {
            System.out.print("X: ");
            x = stdin.nextInt();
            System.out.print("Y: ");
            y = stdin.nextInt();

        } catch(InputMismatchException eShift){
            System.out.println("Wrong input. Shape is being shifted by 5 points each direction.");
            x = 5;
            y = 5;
        }            

        vh.verschuif(x, y);
        vh.print();

    } catch(Exception e){
        System.out.println("Unknown error occurred. "+e.toString());
    } 
} 
```

因此，如果用户开始尝试创建具有 2 个边的形状或输入 char 而不是整数，它会产生 InputMismatchException 并处理它。然后它应该通过询问角的坐标来继续程序，但它会不断抛出新的异常并且句柄会这样做。

出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T08:56:50.203

According I the API you need to skip the error ous entry to get the next one . "When a scanner throws an InputMismatchException, the scanner will not pass the token that caused the exception, so that it may be retrieved or skipped via some other method."

Calling the skip() method after getting the exception should fix this. [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

# c# - 从响应中删除命名空间符号

> ID：12767397
> 
> 赞同：0
> 
> 时间：2012-10-07T08:52:24.950
> 
> 标签：c#, web-services, serialization

我在我的 webMethod 中使用 C# webservice：

```
[WebMethod]
public SignUpResponse SignUp(string email, string password)
{
        SignUpResponse sr = new SignUpResponse();
        if (string.IsNullOrEmpty(email) || string.IsNullOrEmpty(password))
        {
            sr.ErrorCode = (int)ErrorCodes.RequestParametersUnavailable;
            return sr;
        }

        try
        {
            UserDAO uda = new UserDAO();

            if (uda.isEmailExist(email))
            {
                sr.ErrorCode = (int)ErrorCodes.UserAlreadyExist;
                return sr;
            }

            UserData udata = uda.SignUp(email, password, (int)UserType.MobileUser);

            sr.ErrorCode = (int)ErrorCodes.Successfull;
            sr.Code = udata.CODE;
            sr.Message = "SignUp Successfull";
            sr.UserId = udata.USER_ID;

            return sr;
        }
        catch
        {
            sr.ErrorCode = (int)ErrorCodes.UnexpectedError;
            return sr;
        }
    }

[Serializable]
[XmlRoot("SignUpResponseL")]
public class SignUpResponse
{
    string code;
    string message;
    int userId;
    int errorCode;

    [XmlElement(Type = typeof(string), ElementName = "Code")]
    public string Code
    {
        get { return code; }
        set { code = value; }
    }

    [XmlElement(Type = typeof(string), ElementName = "Message")]
    public string Message
    {
        get { return message; }
        set { message = value; }
    }

    [XmlElement(Type = typeof(int), ElementName = "UserId")]
    public int UserId
    {
        get { return userId; }
        set { userId = value; }
    }

    [XmlElement(Type = typeof(int), ElementName = "ErrorCode")]
    public int ErrorCode
    {
        get { return errorCode; }
        set { errorCode = value; }
    }
} 
```

当我调用它时，它返回响应为：

```
<SignUpResponseL xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/">
<Code>29054</Code>
<Message>SignUp Successfull</Message>
<UserId>5</UserId>
<ErrorCode>1</ErrorCode>
</SignUpResponseL> 
```

但我想做到：

```
<SignUpResponseL>
 <Code>29054</Code>
 <Message>SignUp Successfull</Message>
 <UserId>5</UserId>
 <ErrorCode>1</ErrorCode>
</SignUpResponseL> 
```

请让我知道该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:33:08.423

`XmlNamespaceManager`可用于移除命名空间。可移除命名空间的remove方法

[http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.removenamespace.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.removenamespace.aspx)

# xml - 分组和聚合

> ID：12767410
> 
> 赞同：2
> 
> 时间：2012-10-07T08:55:28.410
> 
> 标签：xml

我有如下 3 个 XML 文件，我想将所有这 3 个文档连接在一起，以便我可以执行聚合函数来找出特定分类名称的销售额。但是似乎我写的代码有问题。请指导我如何对三个文档执行聚合功能。

```
ClassDescription.XML
<classification name="Electronic">
   <Description>electronic devices that requires electric</Description>
</classification>
<classification name="SoftToy">
   <Description>Fluffy toys that kids like</Description>
</classification>

ToyClassification.XML
<toy toyID="11">
  <name>Doll</name>
  <classification>SoftToy</classification>
</toy>
<toy toyID="22">
  <name>Xbox</name>
  <classification>Electronic</classification>
</toy>
<toy toyID="33">
  <name>PS3</name>
  <classification>Electronic</classification>
</toy>

 ToySale.XML
 <toySale companyID="1" toyID="11" >
   <amount>15</amount>
 </toySale>
 <toySale companyID="3" toyID="11" >
   <amount>12</amount>
 </toySale>
 <toySale companyID="1" toyID="22" >
   <amount>3</amount>
 </toySale>
 <toySale companyID="2" toyID="33" >
   <amount>7</amount>
 </toySale>

<ClassList>
  <classification name="SoftToy">
    <totalSale>4</totalSale>
  </classification>
  <classification name="Electronic">
    <totalSale>3</totalSale>
  </classification>
</ClassList> 
```

下面是我拥有但似乎无法正常工作的代码。我可以知道什么是正确的 xquery 可以正常工作吗？

```
for $class in (ClassDescription.XML)//classification/@name
for $toyClass in (ToyClassification.XML)//toy/@toyID
for $sale in (ToySale.XML)//toySale/@toyID
let $sum := (ToySale.XML)//toySale[@toyID = $toyClass]
where $sale=$toyClass and $class=$toyClass/../name
order by sum($sum/amount)
return <ClassList>{$class}</ClassList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:37:58.380

这个查询：

```
for $total-sale in
    let $vClasses := doc('file:///c:/temp/delete/classDescription.xml'),
        $vDetails := doc('file:///c:/temp/delete/toyClassification.xml'),
        $vSales   := doc('file:///c:/temp/delete/toySale.xml')
     return
       for $c in $vClasses/*/*
        return
           let $d := $vDetails/*/*[classification eq $c/@name],
               $s := $vSales/*/*[@toyID = $d/@toyID]
             return
                <classification name="{$c/@name}">
                         <totalSale>{sum($s/amount)}</totalSale>
                </classification>
  order by $total-sale/totalSale descending
  return $total-sale 
```

**当三个 XML 文档驻留在各自的文件中时**：

c:/temp/delete/classDescription.xml:

```
<t>
    <classification name="Electronic">
        <Description>electronic devices that requires electric</Description>
    </classification>
    <classification name="SoftToy">
        <Description>Fluffy toys that kids like</Description>
    </classification>
</t> 
```

c:/temp/delete/toyClassification.xml:

```
<t>
    <toy toyID="11">
        <name>Doll</name>
        <classification>SoftToy</classification>
    </toy>
    <toy toyID="22">
        <name>Xbox</name>
        <classification>Electronic</classification>
    </toy>
    <toy toyID="33">
        <name>PS3</name>
        <classification>Electronic</classification>
    </toy>
</t> 
```

c:/temp/delete/toySale.xml:

```
<t>
    <toySale companyID="1" toyID="11" >
        <amount>15</amount>
    </toySale>
    <toySale companyID="3" toyID="11" >
        <amount>12</amount>
    </toySale>
    <toySale companyID="1" toyID="22" >
        <amount>3</amount>
    </toySale>
    <toySale companyID="2" toyID="33" >
        <amount>7</amount>
    </toySale>
</t> 
```

**产生想要的正确结果：**

```
<classification name="SoftToy">
   <totalSale>27</totalSale>
</classification>
<classification name="Electronic">
   <totalSale>10</totalSale>
</classification> 
```

请注意，另外两个表中根本没有使用 CompanyID 数据。

# gwt - 是否有相当于在 GWT 中添加这个 JQuery 插件？

> ID：12767413
> 
> 赞同：0
> 
> 时间：2012-10-07T08:55:55.440
> 
> 标签：gwt

我有一个使用 GWT 构建的现有项目。我们需要在大多数可用的社交网站上共享该网站上可用的内容，而 JQuery addthis 插件似乎在这方面做得很好。

是否有可用于 GWT 的包装器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T02:16:38.033

[调用任何现有的 JS 库](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)实际上非常容易。作为 GWT 程序员，一旦您精通这一点，您的视野就会开阔，正如我将演示的那样，这实际上非常容易。

将 jQuery 和 AddThis 插件源添加到 DOM。例如：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"/>
<script type="text/javascript" src="https://raw.github.com/bdewong/jQuery-AddThis/master/jquery.addthis.js"/> 
```

在您的应用程序的某个地方，您需要创建一个 Anchor 并为其分配类名 addthis，无论您是使用 uibinder 模板还是普通的旧 html 以编程方式执行此操作。

```
<a class="addthis"></a> 
```

现在在您的应用程序的某个地方，您需要调用 addthis 插件。以下是您可以使用的 2 个示例函数：

```
static native void invokeAddThis(String id) /*-{
    $wnd.jQuery(id).addthis();
}-*/;

static native void invokeAddthis(String id, String username) /*-{
    $wnd.jQuery(id).addthis(username);
}-*/; 
```

您拨打电话的地方：

```
invokeAddThis(".addthis"); 
```

恭喜！您现在可以进入现有 JS API 的世界 :)

# sql - 简单的 SQL 查询，但在我的领域之外，需要帮助

> ID：12767414
> 
> 赞同：-2
> 
> 时间：2012-10-07T08:56:12.903
> 
> 标签：sql, ms-access-2007

我有 2 个表，SalesOrderHeader 和 SalesOrderDetail，它们之间的连接是 SalesOrderID 字段，正如它所呈现的那样。

![](../Images/c0ad1949ad3c98a6161550cbe0a685d4.png)

我需要创建一个查询，它将显示 2012 年 8 月 (OrderDate) 中每个客户 (CustomerID) 的数量 (OrderQty) 和销售价值 (OrderQty * UnitPrice)。请注意，OrderDate 是一个日期时间类型的字段（例如年-月-日 2012-09-18）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:00:45.567

```
select  oh.CustomerID
,       sum(od.OrderQty) as TotalUnits
,       sum(od.OrderQty * od.UnitPrice) as TotalPrice
from    SalesOrderHeader oh
left join
        SalesOrderDetails od
on      oh.SalesOrderId = od.SalesOrderId
where   '2012-08-01' <= oh.OrderDate and oh.OrderDate < '2012-09-01'
group by
        oh.CustomerID 
```

不确定该`LineTotal`列的用途，但这可能是总价格总和的更好候选者。

# django - 我的应用程序中的 urls.py 无法被我的主 urls.py 识别

> ID：12767420
> 
> 赞同：0
> 
> 时间：2012-10-07T08:56:43.557
> 
> 标签：django, django-urls

> **可能重复：**
> [为什么我的 urls.py 不适用于 Django](https://stackoverflow.com/questions/12766889/why-my-urls-py-doest-work-with-django)

我项目的 urls.py 是：

```
urlpatterns = patterns('',url(r'app/',include('app.urls')),...) 
```

（我的应用程序刚刚命名为app），但是当我点击浏览器时，出现404错误并说Using the URLconf defined in `myblog.urls`，Django尝试了这些URL模式，顺序如下：

```
app/
... 
```

我不知道为什么以及发生了什么！

如果你知道请告诉我。

谢谢

# java - 如何将流传输到java程序？

> ID：12767422
> 
> 赞同：4
> 
> 时间：2012-10-07T08:56:48.707
> 
> 标签：java, cmd

在 cmd.exe 下，我可以这样做：

```
dir *.*|grep .... 
```

我想对java程序这样做

```
dir *.i|java test 
```

我应该在我的 java 测试类中做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:14:35.320

处理`System.in`in`Test`类，这里是例子：

```
public class Test {
    public static void main(String[] args) {
        InputStream in = System.in;
        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            int next = in.read();
            while (next > -1) {
                bos.write(next);
                next = in.read();
            }
            bos.flush();
            byte[] bytes = bos.toByteArray();
            System.out.println("output:" + new String(bytes));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:02:14.363

您将处理[System.in](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#in)流并捕获/处理源程序（`dir`在本例中）提供的任何内容。

# django - Django sorl-thumbnail 不显示图像

> ID：12767425
> 
> 赞同：9
> 
> 时间：2012-10-07T08:56:55.697
> 
> 标签：django

我尝试使用 Django sorl-thumbnail 但它不显示图像（并且不显示任何错误）。

设置.py：

```
INSTALLED_APPS = (
    ....
    'sorl.thumbnail',
) 
```

楷模：

```
class Toy(models.Model):
    name = models.CharField(max_length=50, verbose_name=u'Name')
    image = ImageField(upload_to='site_media/images') 
```

模板：

```
<div id="toy">
                {% for p in toys %}
                    <div class="toy">
                                # toy.image - this is model_name.image field
                            {% thumbnail toy.image "100x700" as im %}
                            <img style="margin:{{ im|margin:"100x700" }}" src="{{ im.url }}" width="{{ im.x }}" height="{{ im.y }}">
                            {% endthumbnail %}

                            <p>
                            <span> {{ p.name }} </span>
                            <span> {{p.unit_price}} </span>
                            </p>
                    </div>
                {% endfor %}
            </div> 
```

网址.py：

```
url(r'^site_media/(.*)$', 'django.views.static.serve', {'document_root' : os.path.join(os.path.dirname(__file__), 'site_media')}), 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-07T10:29:15.267

实际上，使用 sorl 的 ImageField 只需要在删除原始图像时[自动删除缩略图。](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html#model-examples)

sorl.thumbnail 默认不显示任何错误，如果缩略图创建不成功，则会静默失败。要查看错误，请添加

```
THUMBNAIL_DEBUG = True 
```

到你的 settings.py。这应该可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T10:02:59.487

[您是否](http://sorl-thumbnail.readthedocs.org/en/latest/examples.html#model-examples)在模型定义中从 sorl 导入了 ImageField？有必要让它自动工作。

此外[，您需要在控制台中运行，](http://sorl-thumbnail.readthedocs.org/en/latest/installation.html#setup) `./manage.py syncdb`因为在默认配置中，sorl 将缓存的缩略图名称保存在数据库中。为此，它必须在数据库中创建自己的表。

您能否还显示您的 STATIC_URL、STATICFILES_DIRS 等设置？

# java - 使用 Apache Hadoop 渲染 3D 图像

> ID：12767427
> 
> 赞同：1
> 
> 时间：2012-10-07T08:57:13.967
> 
> 标签：java, 3d, hadoop, rendering

> **可能重复：**
> [Hadoop 和图像的 3D 渲染](https://stackoverflow.com/questions/3696122/hadoop-and-3d-rendering-of-images)

可以使用 Apache Hadoop (MapReduce) 来渲染 3D 图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:19:51.260

我不明白为什么不这样做，只要您的应用程序不需要很短的响应时间（大约不到一分钟）。也就是说，它很可能对 3D 游戏毫无用处，但如果您正在制作电影并且必须处理大量镜头或其他内容，那么它可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:35:38.257

这应该是可能的 - 因为大多数几何任务可以以并行方式执行（您有顶点和三角形，并根据投影矩阵对它们执行计算）和管道方式，因为不可见的图元将被从进一步的计算中删除

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T12:47:17.707

没有理由不能使用 Hadoop。

如果您要同时使用 Hadoop 的“map”*和*“reduce”阶段，这意味着将每个*帧*拆分到 Hadoop 节点上。

如果您只使用每个节点来渲染单独的帧，那么使用 Hadoop 几乎没有什么好处，尽管上面评论中提到的论文摘要表明 HDFS 可以很好地访问场景数据和渲染帧。

我用 Java 编写了一个随机光线追踪器，目前是多线程的。在这段代码中，我为每个像素收集了大量的样本，因此在 Hadoop 中，收集这些样本以产生最终的像素输出将很好地对应于 Hadoop 的“减少”阶段。

# r - 如何判断 R 中的数据集何时会太大？

> ID：12767432
> 
> 赞同：38
> 
> 时间：2012-10-07T08:57:45.917
> 
> 标签：r, bigdata, logfile-analysis

我将在 R 中进行一些日志文件分析（除非我不能在 R 中进行），并且我知道我的数据需要适合 RAM（除非我使用某种修复方法，例如 keyval 存储的接口，也许？）。所以我想知道如何提前知道我的数据将在 RAM 中占用多少空间，以及我是否有足够的空间。我知道我有多少 RAM（不是很大——在 XP 下是 3GB），并且我知道我的日志文件最终将有多少行和列以及列条目应该是什么数据类型（大概我需要检查为它读取）。

我如何将这些组合成一个 go/nogo 决策以在 R 中进行分析？（大概 R 需要能够有一些 RAM 来执行操作，以及保存数据！）我立即需要的输出是一堆简单的摘要统计信息、频率、意外事件等，所以我可能会写一些解析器/制表器将为我提供短期所需的输出，但我也想在下一步使用许多不同的方法来处理这些数据，所以我正在研究使用 R 的可行性。

我在这里看到了很多关于 R 中大型数据集的有用建议，我已经阅读并将重新阅读，但现在我想更好地了解如何确定我是否应该（a）去那里，（b）去在那里但希望必须做一些额外的事情以使其易于管理，或者（c）在为时已晚之前逃跑并在其他语言/环境中做一些事情（欢迎提出建议......！）。谢谢！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-07T09:20:48.787

R 非常适合大型数据集，可以使用开箱即用的解决方案，例如[ff 包](http://cran.r-project.org/web/packages/ff/index.html)（尤其是`bigmemory`ff包），或者使用您自己的脚本分块处理您的内容。在几乎所有情况下，一点点编程就可以非常有可能处理大型数据集（>> 内存，比如 100 Gb）。自己做这种编程需要一些时间来学习（我不知道你的水平），但让你非常灵活。如果这是你的一杯茶，或者你是否需要跑步，取决于你想投入学习这些技能的时间。但是一旦你拥有了它们，它们会让你作为数据分析师的生活变得更加轻松。`read.csv.ffdf`

关于分析日志文件，我知道从使命召唤 4（计算机多人游戏）生成的统计页面通过将日志文件迭代解析到数据库中，然后从数据库中检索每个用户的统计信息来工作。有关界面的示例，请参见[此处。](http://id679hs.members.creativehosting.nl/hlstats.php?mode=playerinfo&player=56)迭代（以块为单位）方法意味着日志文件大小（几乎）是无限的。但是，获得良好的性能并非易事。

很多你可以在 R 中做的事情，你可以在 Python 或 Matlab，甚至 C++ 或 Fortran 中做。但只有当该工具对您想要的东西具有开箱即用的支持时，我才能看到该工具相对于 R 的明显优势。要处理大数据，请参阅[HPC 任务视图](http://cran.r-project.org/web/views/HighPerformanceComputing.html)。另请参阅 min 的较早答案以[读取块中的非常大的文本文件](https://stackoverflow.com/questions/12692735/delete-multiple-columns-from-500-mb-tsv-file-with-python-or-perl-etc/12693166#12693166)。您可能感兴趣的其他相关链接：

*   [在 R 中快速读取非常大的表作为数据框](https://stackoverflow.com/questions/1727772/quickly-reading-very-large-tables-as-dataframes-in-r)
*   [https://stackoverflow.com/questions/1257021/suitable-functional-language-for-scientific-statistical-computing](https://stackoverflow.com/questions/1257021/suitable-functional-language-for-scientific-statistical-computing)（讨论包括用于大数据处理的内容）。
*   [修剪一个巨大的 (3.5 GB) csv 文件以读入 R](https://stackoverflow.com/questions/3094866/trimming-a-huge-3-5-gb-csv-file-to-read-into-r)
*   我的一篇[博客文章](http://www.numbertheory.nl/2012/08/15/predicting-the-memory-usage-of-an-r-object-containing-numbers/)展示了如何估计数据集的 RAM 使用情况。请注意，这假设数据将存储在矩阵或数组中，并且只是一种数据类型。
*   [使用 R 处理日志文件](https://stackoverflow.com/questions/11625781/log-file-processing-with-r/11626012#11626012)

关于选择 R 或其他工具，我会说如果它对谷歌来说足够好，那对我来说就足够好了；）。

# mysql - MySQL插入，重更新，按索引排序

> ID：12767433
> 
> 赞同：1
> 
> 时间：2012-10-07T08:57:48.330
> 
> 标签：mysql, database-design, database-indexes, database-optimization

我目前正在设计一个数据库，该数据库具有一个`events`插入（和更新）大量的表（我预测每分钟插入 1,000 到 5,000 次），但也需要按日期排序。

每个事件都有一个`read`布尔字段 ，并按(datetime)`user_id`排序。选择语句将类似于`updated_at``DESC`

```
SELECT * FROM `events` WHERE `read`=0 AND `user_id`='<user id>' ORDER BY `updated_at` DESC 
```

现在，我正在考虑在 、 和 上使用索引`read`来`user_id`优化`updated_at`获取和排序，但这是否意味着整个索引将在

```
UPDATE `events` SET `read`='1' WHERE `id`='<event id>' 
```

?

在这种情况下，性能效率最高的（插入、更新、选择）解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:32:26.277

MySQL 每次查询每个表只使用一个索引（有时它在索引合并发生时使用多个索引），因此创建多个索引不会加速查询。

如果我没记错的话，最好先在索引中使用最具辨别力的选择器，这样 a`user_id.read.updated_at`可能是一个很好的解决方案。

我不知道更新索引是否非常昂贵，但由于 MySQL 索引默认情况下是一棵树，如果`read`更改引擎必须在`user_id`叶子下运行，因此可能会降低影响。

尽管如此，您可以只使用索引`user_id.updated_at`并保留 MySQL 过滤器`read`，大多数情况下，从表中排序数据比过滤成本更高。

# javascript - 动态替换 SVG 中的图像元素

> ID：12767436
> 
> 赞同：1
> 
> 时间：2012-10-07T08:57:55.393
> 
> 标签：javascript, html, image, svg, dom-events

我想替换 SVG 标签的图像元素。我希望每次调用一个在controller.js 中保存图像的对象，我将获取这个图像并通过SVG 在名为default.js 的不同文件中将此图像表示为模糊背景图像。

我该怎么做？

默认.html：

```
<div id="backgroundImage">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
                <filter id="myGaussianBlur" x="0" y="0">
                    <feGaussianBlur in="SourceGraphic" stdDeviation="2"></feGaussianBlur>
                </filter>
            </defs>
            <image id="backImage" xlink:href="surf.jpg" width="100%" height="100%" preserveAspectRatio="none" filter="url(#myGaussianBlur)" />
        </svg>
    </div> 
```

我想替换`image id ="backImage"`其他图像中的图像。

控制器.js：

```
function setObject(element, value) {
    var id = value.id;
    var image = value.image;
    ????
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:07:17.460

尝试使用本机“setAttribute”。

```
var im = document.getElementById('backImage');
im.setAttribute('xlink:href',"http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/s480x480/525959_10151097048652029_155651648_n.jpg");
// or mby more correct approach:
//    im.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", "http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/s480x480/525959_10151097048652029_155651648_n.jpg");
im.setAttribute('width', X);
im.setAttribute('height', Y); 
```

它适用于 chrome，我所知道的 =)

# html - 试图从 textarea 中删除可调整大小

> ID：12767438
> 
> 赞同：39
> 
> 时间：2012-10-07T08:58:13.293
> 
> 标签：html, css

> **可能重复：**
> [如何禁用 TextArea 的可调整大小的属性？](https://stackoverflow.com/questions/5235142/how-to-disable-resizable-property-of-textarea)
> [如何禁用 HTML <textarea> 的调整大小抓取器？](https://stackoverflow.com/questions/5271782/how-to-disable-the-resize-grabber-of-an-html-textarea)

我继承了一个要维护的网站，但我无法删除 textarea 以调整大小或至少删除可调整大小的“标志”。这就是我的意思：

![在此处输入图像描述](../Images/11de495f62319e969005151967492c26.png)

我怎样才能删除这个？如果它可以调整大小，这不是问题，问题是这个图标显示它是。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-07T08:59:38.347

您需要使用[`resize`](https://developer.mozilla.org/en-US/docs/Web/CSS/resize)属性来防止`textarea`调整大小。

[**演示**](http://jsfiddle.net/krwwY/)

```
textarea {
   resize: none;
} 
```

* * *

`resize`属性也接受像`vertical`和这样的值来仅水平或仅垂直`horizontal`调整大小。`textarea`

**仅适用于垂直**

```
textarea { 
   resize:vertical; 
} 
```

**仅适用于水平**

```
textarea { 
   resize:horizontal; 
} 
```

# java - 使用显式类型转换将十六进制整数转换为字符？

> ID：12767439
> 
> 赞同：6
> 
> 时间：2012-10-07T08:58:26.920
> 
> 标签：java, type-conversion, hex

我编写了以下代码，但是 o/p 不是预期的？有人指导我吗？

问题：编写一个示例程序来声明一个十六进制整数并使用显式类型转换将其转换为字符？

```
class hexa
{
public static void main(String ar[])
{
    int hex=0xA;
    System.out.println(((char)hex));
}
} 
```

请告诉我：为什么输出有差异

```
/*code 1*/
int hex = (char)0xA; 
System.out.println(hex); 
/*code 2*/
int hex = 0xA; 
System.out.println((char)hex); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T09:05:31.483

```
int hex = 0xA; 
System.out.println( (char)hex ); 
```

十六进制值 0xA（或十进制 10）是 ASCII 中的“\n”（换行符）。
因此输出。

编辑（感谢[halex](https://stackoverflow.com/users/637284/halex)在评论中提供更正：

```
int hex = (char) 0xA;
System.out.println(hex); //here value of hex is '10', type of hex is 'int', the overloaded println(int x) is invoked.

int hex = 0xA;
System.out.println((char) hex); //this is equivalent to System.out.println( '\n' ); since the int is cast to a char, which produces '\n', the overloaded println(char x) is invoked. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:07:11.140

我假设您希望`A`打印这封信。而不是`print`使用[`printf`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29).

```
int hex=0xA;
System.out.printf("%X%n", hex); 
```

# java - JME APPLET（浏览器无法加载库）

> ID：12767441
> 
> 赞同：2
> 
> 时间：2012-10-07T08:58:54.730
> 
> 标签：java, applet, jmonkeyengine

我创建了简单的 JME Applet，但本地库有问题。当我运行它时，我得到错误。当我将库移动到 java 控制台中显示的目录时，此错误消失并且一切正常。以下示例也很好用：http: [//jmonkeyengine.com/demo/applet/](http://jmonkeyengine.com/demo/applet/)。看起来提取无法正常工作。

```
paź 06, 2012 9:02:32 PM com.jme3.system.JmeDesktopSystem initialize
INFO: Running on jMonkeyEngine 3.0.0 Beta
paź 06, 2012 9:02:32 PM com.jme3.system.Natives extractNativeLibs
INFO: Extraction Directory: C:Users/manio/AppData/Local/GoogleChrome/Application/22.0.1229.79/
paź 06, 2012 9:02:32 PM com.jme3.system.lwjgl.LwjglCanvas$GLCanvas addNotify
INFO: EDT: Creating OGL thread.
paź 06, 2012 9:02:32 PM com.jme3.system.lwjgl.LwjglCanvas$GLCanvas addNotify
INFO: EDT: Telling OGL to create display ..
Exception in thread “LWJGL Renderer Thread” java.lang.UnsatisfiedLinkError: Can’t load library: C:Users/manio/AppData/Local/GoogleChrome/Application/22.0.1229.79/lwjgl.dll
at java.lang.ClassLoader.loadLibrary(Unknown Source)
at java.lang.Runtime.load0(Unknown Source)
at java.lang.System.load(Unknown Source)
at org.lwjgl.Sys$1.run(Sys.java:70)
at java.security.AccessController.doPrivileged(Native Method)
at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
at org.lwjgl.Sys.loadLibrary(Sys.java:95)
at org.lwjgl.Sys.(Sys.java:112)
at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:206)
at java.lang.Thread.run(Unknown Source) 
```

# node.js - Ubuntu 在 nodejs 安装时自动关闭

> ID：12767442
> 
> 赞同：1
> 
> 时间：2012-10-07T08:58:55.913
> 
> 标签：node.js

我正在尝试在我的 Ubuntu 12.04 上使用 node.js。但是，每次我尝试安装它时，Ubuntu 都会自动关闭。以下是我正在尝试执行的步骤：

```
$ apt-get -y install libssl-dev git-core pkg-config build-essential curl gcc g++ checkinstall

$ wget http://nodejs.org/dist/v0.8.11/node-v0.8.11.tar.gz
$ tar -zxf node-v0.8.11.tar.gz

$ cd node-v0.8.11
$ ./configure && make && checkinstall --install=yes --pkgname=nodejs --pkgversion "0.8.11" --default 
```

捕获终端输出似乎也没有用，因为它没有提供任何关闭的理由。我在安装中缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T18:35:35.487

这**可能**是与硬件相关的问题。在做其他事情之前，请检查您的记忆是否正常。

其次，这可能指向一些内核问题，您可以从系统日志文件中了解到这些问题。

第三，您通常最好依次执行各个阶段以找到确切的崩溃阶段，而不是将它们与`&&`.

现在，开始安装 node.js。我的 checkinstall 不太成功；但是，我绝对喜欢[fpm](https://github.com/jordansissel/fpm)，并用它来编译和打包（它可以做 .deb 和 .rpm 的）Node.JS 然后安装它

```
./configure --prefix=/usr
make
mkdir -p /tmp/nodejs
make install DESTDIR=/tmp/nodejs
fpm -s dir -t deb -n nodejs -v 0.8.11 -C /tmp/nodejs -p nodejs-VERSION_ARCH.deb usr 
```

高温高压

# objective-c - 如何将 Plist 加载到 UITableView Objective-C

> ID：12767443
> 
> 赞同：0
> 
> 时间：2012-10-07T08:58:58.563
> 
> 标签：objective-c, uitableview, plist, tableview

我有这个 plist 设置：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
    <plist version="1.0">
        <array>
            <dict>
                    <key>area</key>
                    <string>area1</string>
                    <key>shop</key>
                    <string>shop1</string>
                    <key>location</key>
                    <string>2nd Floor</string>
                    <key>coordinates</key>
                    <string>14.733836,121.058221</string>
            </dict>
            <dict>
                    <key>area</key>
                    <string>area1</string>
                    <key>shop</key>
                    <string>shop2</string>
                    <key>location</key>
                    <string>Ground Floor</string>
                    <key>coordinates</key>
                    <string>14.733836,121.058221</string>
            </dict>
            <dict>
                    <key>area</key>
                    <string>area2</string>
                    <key>shop</key>
                    <string>shop1</string>
                    <key>location</key>
                    <string>2nd Floor</string>
                    <key>coordinates</key>
                    <string>14.656918,121.029795</string>
            </dict>
            <dict>
                    <key>area</key>
                    <string>area2</string>
                    <key>shop</key>
                    <string>shop2</string>
                    <key>location</key>
                    <string>Ground Floor</string>
                    <key>coordinates</key>
                    <string>14.656918,121.029795</string>
            </dict>
        </array>
        </plist> 
```

如何在我的 UITableView 中绘制它？我的标题标题将是关键“区域”，而表格单元格标记关键“商店”，副标题标记关键“位置”。坐标键将用于在用户点击表格单元格时加载的地图视图上绘制它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:44:51.683

```
- (UITableViewCell *)tableView:cellForRowAtIndexPath:
NSDictionary *dict = [array objectAtIndex: indexPath.section];
cell.textLabel.text = [dict objectForKey: @"shop"];
cell.detailTextLabel.text = [dict objectForKey: @"location"];

- (NSString *)tableView:titleForHeaderInSection:
NSDictionary *dict = [array objectAtIndex: indexPath.section];
NSString *area = [dict objectForKey: @"area"];
return area;

- (void)tableView:didSelectRowAtIndexPath:
NSDictionary *dict = [array objectAtIndex: indexPath.section];
NSString *coordinates = [dict objectForKey: @"coordinates"];
newViewController.coordinates = coordinates
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:59:59.267

你可以试试这个：

```
//In your .h file
NSArray *array;

//In your .m file
- (void)viewDidLoad {    
   // Some code...
   NSString *path = [[NSBundle mainBundle] pathForResource:@"filename" ofType:@"plist"];
   array = [NSArray arrayWithContentsOfFile:path];
   // Some code...
} 
```

然后创建一个新的 NSObject 类，并为每个单元格初始化对象，例如：

```
MyClass *newInstance = [[MyClass alloc] init];
newInstance.area = [array objectForKey:@"area"];
newInstance.shop = [array objectForKey:@"shop"];
newInstance.location = [array objectForKey:@"location"];
newInstance.coordinates = [array objectForKey:@"coordinates"]; 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:42:58.367

You have to create 3 NSDictionary. Dict 1: titles Dict 2: celltexts Dict 3: subtitles

NSDictionary *dictTitles = [[NSDictionary dictionaryWithContentsOfFile:@"filepathtoyourplist"] valueForKey:@"Titles"];

Then put it into an array

NSArray *titleArray = [[NSArray alloc] initWithDictionary:dictTitles];

in your titlesForHeaderInSection

headertitle = [titlearray objectAtIndex:indexPath.row];

Do the steps for cell text and subtitle again.

# iphone - 缩放按钮

> ID：12767444
> 
> 赞同：0
> 
> 时间：2012-10-07T08:59:10.530
> 
> 标签：iphone, ios5, xcode4.2

如何使用在`.nib`文件中的图像上添加的按钮进行放大和缩小？我可以缩放图像，但模拟器上的运行时未显示按钮。

我使用以下代码进行缩放：

```
i do what u say in the view did load and here is the code 
    - (void)viewDidLoad {
    [super viewDidLoad];
    self.visiblePopTipViews = [NSMutableArray array];

    self.contents = [NSDictionary dictionaryWithObjectsAndKeys:
                     // Rounded rect buttons
                     @"Play Ground", [NSNumber numberWithInt:1],
                     @"HeadMaster", [NSNumber numberWithInt:2],
                     @"Science Faculty", [NSNumber numberWithInt:3],
                     @"Accounting Faculty", [NSNumber numberWithInt:4],
                     @"Economy Faculty", [NSNumber numberWithInt:5],
                     @"Cultive Faculty", [NSNumber numberWithInt:6],
                     @"Tourisim Faculty", [NSNumber numberWithInt:7],
                     @"Swimming Pool ", [NSNumber numberWithInt:8],
                     @"Medicine Faculty", [NSNumber numberWithInt:9],
                     @"Engeneering Faculty", [NSNumber numberWithInt:10],
                     @"IT Faculty", [NSNumber numberWithInt:11],
                     nil];

    // Array of (backgroundColor, textColor) pairs.
    // NSNull for either means leave as default.
    // A color scheme will be picked randomly per CMPopTipView.
    self.colorSchemes = [NSArray arrayWithObjects:
                         [NSArray arrayWithObjects:[NSNull null], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [UIColor darkTextColor], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [UIColor blueColor], nil],
                         [NSArray arrayWithObjects:[UIColor lightGrayColor], [NSNull null], nil],
                         nil];
     scroll = [[UIScrollView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    scroll.backgroundColor = [UIColor blackColor];
    scroll.delegate = self;

     zoomView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, scroll.contentSize.width, scroll.contentSize.height)];
    zoomView.backgroundColor = [UIColor whiteColor];

    image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"map.png"]];
    scroll.contentSize = image.frame.size;

    UIButton *playGround = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [playGround addTarget:self 
                   action:@selector(buttonAction:)
         forControlEvents:UIControlEventTouchDown];
    [playGround setTitle:@"playGround" forState:UIControlStateNormal];
    playGround.tag = 1 ; 
    playGround.frame = CGRectMake(290.0, 170.0, 80.0, 40.0);
    [image addSubview:playGround];

    UIButton *masterBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [masterBtn addTarget:self 
                  action:@selector(buttonAction:)
        forControlEvents:UIControlEventTouchDown];
    [masterBtn setTitle:@"Presidency" forState:UIControlStateNormal];
    masterBtn.tag = 2 ; 
    masterBtn.frame = CGRectMake(250.0, 270.0, 60.0, 30.0);
    [image addSubview:masterBtn];

    UIButton *scienceBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [scienceBtn addTarget:self 
                   action:@selector(buttonAction:)
         forControlEvents:UIControlEventTouchDown];
    [scienceBtn setTitle:@"science" forState:UIControlStateNormal];
    scienceBtn.tag = 3;
    scienceBtn.frame = CGRectMake(300.0, 330.0, 50.0, 30.0);
    [image addSubview:scienceBtn];

    UIButton *accountingBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [accountingBtn addTarget:self 
                      action:@selector(buttonAction:)
            forControlEvents:UIControlEventTouchDown];
    [accountingBtn setTitle:@"Accounting" forState:UIControlStateNormal];
    accountingBtn.tag = 4; 
    accountingBtn.frame = CGRectMake(340.0, 360.0, 50.0, 30.0);
    [image addSubview:accountingBtn];

    UIButton *economyBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [economyBtn addTarget:self 
                   action:@selector(buttonAction:)
         forControlEvents:UIControlEventTouchDown];
    [economyBtn setTitle:@"Economy" forState:UIControlStateNormal];
    economyBtn.tag = 5 ; 
    economyBtn.frame = CGRectMake(390.0, 390.0, 50.0, 30.0);
    [image addSubview:economyBtn];

    UIButton *cultiveBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [cultiveBtn addTarget:self 
                   action:@selector(buttonAction:)
         forControlEvents:UIControlEventTouchDown];
    [cultiveBtn setTitle:@"Cultive" forState:UIControlStateNormal];
    cultiveBtn.tag = 6 ; 
    cultiveBtn.frame = CGRectMake(440.0, 410.0, 50.0, 30.0);
    [image addSubview:cultiveBtn];

    UIButton *tourisimBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [tourisimBtn addTarget:self 
                    action:@selector(buttonAction:)
          forControlEvents:UIControlEventTouchDown];
    [tourisimBtn setTitle:@"tourisim" forState:UIControlStateNormal];
    tourisimBtn.tag = 7 ; 
    tourisimBtn.frame = CGRectMake(480.0, 440.0, 50.0, 30.0);
    [image addSubview:tourisimBtn];

    UIButton *swimmingBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [swimmingBtn addTarget:self 
                    action:@selector(buttonAction:)
          forControlEvents:UIControlEventTouchDown];
    [swimmingBtn setTitle:@"swimming" forState:UIControlStateNormal];
    swimmingBtn.tag = 8 ; 
    swimmingBtn.frame = CGRectMake(190.0, 400.0, 50.0, 30.0);
    [image addSubview:swimmingBtn];

    UIButton *medicineBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [medicineBtn addTarget:self 
                    action:@selector(buttonAction:)
          forControlEvents:UIControlEventTouchDown];
    [medicineBtn setTitle:@"medicine" forState:UIControlStateNormal];
    medicineBtn.tag = 9; 
    medicineBtn.frame = CGRectMake(250.0, 420.0, 70.0, 30.0);
    [image addSubview:medicineBtn];

    UIButton *enegeneeringBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [enegeneeringBtn addTarget:self 
                        action:@selector(buttonAction:)
              forControlEvents:UIControlEventTouchDown];
    [enegeneeringBtn setTitle:@"engeneering" forState:UIControlStateNormal];
    enegeneeringBtn.tag = 10 ; 
    enegeneeringBtn.frame = CGRectMake(340.0, 460.0, 60.0, 30.0);
    [image addSubview:enegeneeringBtn];

    UIButton *itBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [itBtn addTarget:self 
              action:@selector(buttonAction:)
    forControlEvents:UIControlEventTouchDown];
    [itBtn setTitle:@"It" forState:UIControlStateNormal];
    itBtn.tag = 11 ; 
    itBtn.frame = CGRectMake(410.0, 500.0, 60.0, 30.0);
    [image addSubview:itBtn];

    [zoomView addSubview:image ] ;

    [scroll addSubview:zoomView];
   [scroll bringSubviewToFront:zoomView ] ; 
  // [self.view addSubview:scroll ] ;

   scroll.minimumZoomScale =scroll.frame.size.width / image.frame.size.width;
    scroll.maximumZoomScale = 2.0;
    [scroll setZoomScale:scroll.minimumZoomScale];
   self.view = scroll;
    [scroll release];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return image  ; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:24:44.137

这个 loadView 方法在你的 View Controller 上，不是吗？当 View Controller 需要加载其视图时调用此方法。如果您将按钮添加到 nib 文件，并且正在调用此方法，那么按钮将不会显示 - 它正在加载您的代码，而不是您的 nib。

您应该做的是将 UIScrollView 添加为子视图，或者在 nib 文件中设置更多内容。如果您确实编写代码，请确保不要覆盖 self.view，而是向其中添加子视图。在 viewDidLoad 中执行此操作，而不是 loadView。

这样做，你的按钮应该出现。

# jquery - jquery 滑块 .on()

> ID：12767445
> 
> 赞同：0
> 
> 时间：2012-10-07T08:59:18.020
> 
> 标签：jquery, html, css

我有以下 jquery 代码：

```
 $('div#headBannerSearchAgedBetweenSlider').slider({
            range: true,
            min: 18,
            max: 99,
            values: [18, 65],
            change: function(event, ui) {
                    $('span#headerBannerAgedMin').html(ui.values[0]);
                    $('span#headerBannerAgedMax').html(ui.values[1]);
            },
            slide: function(event, ui) {
                if (ui.values[0] == ui.values[1]) {return false;}
            }
    }); 
```

问题是加载 js 脚本时元素“div#headBannerSearchAgedBetweenSlider”不可用，因此一旦元素可用，我需要使用 .live() 或 .on() 之类的东西来附加幻灯片事件。

一旦可见，如何将幻灯片绑定到元素“div#headBannerSearchAgedBetweenSlider”？我尝试将代码包装在以下内容中（使用 $(this) 作为元素，但我没有使用单击事件。我只需要在元素存在后进行绑定。

```
 $(document).on('click','div#headBannerSearchAgedBetweenSlider', function() {
     }); 
```

我该怎么做呢？

谢谢你

* * *

我已经尝试了以下 .ready() 没有运气 - 这有什么明显的问题吗？

```
$('div#headBannerSearchAgedBetweenSlider').ready(function() {
    $('div#headBannerSearchAgedBetweenSlider').slider({
            range: true,
            min: 18,
            max: 99,
            values: [18, 65],
            change: function(event, ui) {
                    $('span#headerBannerAgedMin').html(ui.values[0]);
                    $('span#headerBannerAgedMax').html(ui.values[1]);
            },
            slide: function(event, ui) {
                if (ui.values[0] == ui.values[1]) {return false;}
            }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:15:24.247

`#headBannerSearchAgedBetweenSlider`一旦你的元素被加载/存在于 DOM 中，你需要调用插件。由于您似乎正在使用**[`.load()`](http://api.jquery.com/load/)**(async) 动态加载您的内容，它应该像这样工作（我假设您将`div`有问题的内容加载到此处的元素中`#wrapper`）：

```
$('#wrapper').load('/what/ever.php', function(){ //this function will be executed once your content is successfully loaded
    $('div#headBannerSearchAgedBetweenSlider').slider({/*..options go here..*/});
}); 
```

有关 AJAX 调用的回调函数的信息，请参阅**[文档](http://api.jquery.com/load/#callback-function)**。

# jquery - jQuery Mobile 页面 - 直接访问还是由 Ajax 加载？

> ID：12767450
> 
> 赞同：1
> 
> 时间：2012-10-07T08:59:56.143
> 
> 标签：jquery, html, jquery-mobile

有什么方法可以确定使用 jQuery Mobile 的页面是由该框架由 Ajax 加载的，还是由其 URL 直接访问的？

只是为了澄清我的问题和要求，我想根据页面的访问方式更改页面上的一些内容（即 中的几个元素）。目前我正在处理页面加载事件，但是当我直接访问页面时似乎没有触发，即通过在地址栏中键入 URL。我需要一些可以在代码中使用的东西来确定页面是如何被访问的。

我也尝试过`$('#pageId').on('pageinit', function(event){ blah });`，但我似乎无法从事件对象中得到我来自哪里......除非我错过了什么。

更新：好的，解决方案是用所有样式装饰页面并包含“直接访问”条件的内容，当从另一个 jQuery Mobile 页面导航到时，我处理`pageload`事件并相应地更改内容和样式。我仍然想知道是否有一种方法可以检测到页面是如何被访问的。注意：我指的是“页面”，它是一个 jQuery Mobile 构造，而不是整个文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:06:22.153

Ajax 请求应该将 HTTP Header`HTTP_X_REQUESTED_WITH`设置为`XMLHttpRequest`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:16:16.383

## 在计算机上使用带有 firebug 扩展的 Firfox 和 Yslow。

带萤火虫和 yslow

*   您将能够评估源代码的所有相关文件，并探索它们。
*   在“网络”选项卡下，您可以查看是否进行了任何 ajax 查询、加载了什么以及源运行时发生了什么。

支持的平台：http: [//jquerymobile.com/demos/1.0a4.1/docs/about/platforms.html](http://jquerymobile.com/demos/1.0a4.1/docs/about/platforms.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:09:04.697

## 解决方案 从设备

1.  禁用 Javascript，加载页面，看看会出现什么。
2.  离线，Reanable Javascript，看看会出现什么。

# seam - 如何在 JavaEE6 中动态设置用户权限

> ID：12767460
> 
> 赞同：0
> 
> 时间：2012-10-07T09:01:05.910
> 
> 标签：seam, java-ee-6

我目前正在开发一个 JavaEE6 项目，我想为用户或角色设置一组动态分配的权限。在 seam2 中，这可以通过 org.jboss.seam.security.persistentPermissionResolver 来实现，我想知道是否有与 JavaEE6 等效的方法或技术。到目前为止，在 Oracles 的 JavaEE6 文档中，我只能看到在 web.xml 中设置目录访问权限。

JavaEE6 中设置身份验证和授权的最佳方法（现实世界）是什么？可能通过数据库或 LDAP。

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:42:38.497

经过一段时间的研究，我能够测试的最好的安全技术之一是 Apache Shiro。我对其细粒度的权限级别控制感到满意。所以我将它用于我的 JavaEE6 项目。至于我如何整合这两者的链接：[http ://czetsuya-tech.blogspot.com/2012/10/how-to-integrate-apache-shiro-with.html](http://czetsuya-tech.blogspot.com/2012/10/how-to-integrate-apache-shiro-with.html)

# c# - 将新项目添加到 Visual Studio 工具箱的特定选项卡

> ID：12767462
> 
> 赞同：1
> 
> 时间：2012-10-07T09:01:34.650
> 
> 标签：c#, winforms, visual-studio, design-time

我创建了一个新的 Visual Studio 插件，用于在 Visual Studio 工具箱中创建和添加我的自定义选项卡，并将新项目（控件）添加到我的自定义选项卡中。代码适用于将新选项卡添加到 Visual Studio 工具箱，但不适用于将新项目（控件）添加到我的选项卡。

我的 Visual Studio 插件代码是：

```
using System;
using Extensibility;
using EnvDTE;
using EnvDTE80;
using EnvDTE90;
using EnvDTE100;
using System.Windows.Forms;
namespace MyAddin1
{
    /// <summary>The object for implementing an Add-in.</summary>
    /// <seealso class='IDTExtensibility2' />
    public class Connect : IDTExtensibility2
    {
        /// <summary>Implements the constructor for the Add-in object. Place your initialization code within this method.</summary>
        public Connect()
        {
        }

        /// <summary>Implements the OnConnection method of the IDTExtensibility2 interface. Receives notification that the Add-in is being loaded.</summary>
        /// <param term='application'>Root object of the host application.</param>
        /// <param term='connectMode'>Describes how the Add-in is being loaded.</param>
        /// <param term='addInInst'>Object representing this Add-in.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
        {
            _applicationObject = (DTE2)application;
            _addInInstance = (AddIn)addInInst;
            // Pass the applicationObject member variable to the code example.
            ToolboxExample(_applicationObject);
        }

        public void ToolboxExample(DTE2 dte)
        {
            ToolBox tlBox = null;
            ToolBoxTabs tbxTabs = null;
            ToolBoxTab3 tbxTab = null;
            try
            {
                tlBox = (ToolBox)(dte.Windows.Item(Constants.vsWindowKindToolbox).Object);
                tbxTabs = tlBox.ToolBoxTabs;
                tbxTab = (ToolBoxTab3)tbxTabs.Add("MRS");
                tbxTab.Activate();
                tbxTab.ToolBoxItems.Add("FloorsGrouping", @"C:\Windows\Microsoft.NET\assembly\GAC_MSIL\WindowsFormsControlLibrary2\v4.0_1.0.0.0__197889249da45bfc\WindowsFormsControlLibrary2.dll", vsToolBoxItemFormat.vsToolBoxItemFormatDotNETComponent);
            }
            catch (System.Exception ex)
            {
                MessageBox.Show("ERROR: " + ex.Message);
            }
        }

        private DTE2 _applicationObject;
        private AddIn _addInInstance;
    }
} 
```

以下代码行不起作用：

```
tbxTab.ToolBoxItems.Add("FloorsGrouping", @"C:\Windows\Microsoft.NET\assembly\GAC_MSIL\WindowsFormsControlLibrary2\v4.0_1.0.0.0__197889249da45bfc\WindowsFormsControlLibrary2.dll", vsToolBoxItemFormat.vsToolBoxItemFormatDotNETComponent); 
```

我改变

```
tbxTab.ToolBoxItems.Add 
```

和：

```
tbxTabs.Item("MRS").ToolBoxItems.Add 
```

但是，它对我不起作用。即使我改变

```
@"C:\Windows\Microsoft.NET\assembly\GAC_MSIL\WindowsFormsControlLibrary2\v4.0_1.0.0.0__197889249da45bfc\WindowsFormsControlLibrary2.dll" 
```

使用以下代码行并一一测试：

```
@"E:\Rostami\Saino\WindowsFormsControlLibrary2.dll" 
```

和

```
"WindowsFormsControlLibrary2.FloorsGrouping, WindowsFormsControlLibrary2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=197889249da45bfc" 
```

但是，它再次对我不起作用。

我的自定义控件主类名称是**FloorsGrouping**，它的显示名称是：

```
[DisplayName("Floors Group")] 
```

它在 GAC 中的程序集名称是：

```
[Editor("WindowsFormsControlLibrary2.FloorsGrouping, WindowsFormsControlLibrary2, Version=1.0.0.0, Culture=neutral,  PublicKeyToken=197889249da45bfc", typeof(UITypeEditor))] 
```

我在 Internet 上搜索了任何解决方案，但我只找到了几个解决方案，这些解决方案描述了向 Visual Studio 工具箱添加新选项卡以及从 Visual Studio Addin 向选项卡添加控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:18:16.400

我找到了解决方案，可以将我的自定义选项卡添加到 Visual Studio 工具箱，并使用 Windows 窗体应用程序项目而不是 Visual Studio 插件项目将我的自定义控件添加到我的自定义选项卡。我将其描述如下：

在 Windows Forms Application 项目中，首先，我们必须创建一个 Visual Studio IDE 的实例。然后，必须创建一个临时的 Windows 窗体应用程序项目，然后必须将我们的自定义选项卡添加到 Visual Studio 工具箱，并将我们的自定义控件添加到我们的自定义选项卡。

我的 Class1.cs 代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using EnvDTE;
using EnvDTE80;
using System.IO;

namespace InstallToolboxControls
{
    // Definition of the IMessageFilter interface which we need to implement and 
    // register with the CoRegisterMessageFilter API.
    [ComImport(), Guid("00000016-0000-0000-C000-000000000046"), InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    interface IOleMessageFilter // Renamed to avoid confusion w/ System.Windows.Forms.IMessageFilter
    {
        [PreserveSig]
        int HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo);

        [PreserveSig]
        int RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType);

        [PreserveSig]
        int MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType);
    }

    class Program : IOleMessageFilter
    {
        [DllImport("ole32.dll")]
        private static extern int CoRegisterMessageFilter(IOleMessageFilter newFilter, out IOleMessageFilter oldFilter);
        static string ctrlPath = "WindowsFormsControlLibrary2.FloorsGrouping, WindowsFormsControlLibrary2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=197889249da45bfc";//@"C:\Windows\Microsoft.NET\assembly\GAC_MSIL\WindowsFormsControlLibrary2\v4.0_1.0.0.0__197889249da45bfc\WindowsFormsControlLibrary2.dll";//@"E:\Rostami\Saino\Program\Tests\WindowsFormsControlLibrary2\WindowsFormsControlLibrary2\bin\Debug\WindowsFormsControlLibrary2.dll";

        [STAThread]
        public static void Toolbox(string arg)
        {
            Program program = new Program();
            program.Register();
            if (arg.Equals("Install", StringComparison.CurrentCultureIgnoreCase))
            {
                program.InstallControl();
            }
            else if (arg.Equals("UnInstall", StringComparison.CurrentCultureIgnoreCase))
            {
                program.UninstallControl();
            }
            program.Revoke();

            // to ensure the dte object is actually released, and the devenv.exe process terminates.
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }

        void InstallControl()
        {
            // Create an instance of the VS IDE,
            Type type = System.Type.GetTypeFromProgID("VisualStudio.DTE.10.0");
            DTE dte = (DTE)System.Activator.CreateInstance(type, true);

            // create a temporary winform project;
            string tmpFile = Path.GetFileNameWithoutExtension(Path.GetTempFileName());
            string tmpDir = string.Format("{0}{1}", Path.GetTempPath(), tmpFile);
            Solution2 solution = dte.Solution as Solution2;
            string templatePath = solution.GetProjectTemplate("WindowsApplication.zip", "CSharp");
            Project proj = solution.AddFromTemplate(templatePath, tmpDir, "dummyproj", false);

            // add the control to the toolbox.
            EnvDTE.Window window = dte.Windows.Item(EnvDTE.Constants.vsWindowKindToolbox);
            EnvDTE.ToolBox toolbox = (EnvDTE.ToolBox)window.Object;
            EnvDTE.ToolBoxTab myTab = toolbox.ToolBoxTabs.Add("Saino");
            myTab.Activate();
            myTab.ToolBoxItems.Add("MyUserControl", ctrlPath, vsToolBoxItemFormat.vsToolBoxItemFormatDotNETComponent);
            dte.Solution.Close(false);
            Marshal.ReleaseComObject(dte);
            //Console.WriteLine("Control Installed!!!");
        }

        void UninstallControl()
        {
            Type type = System.Type.GetTypeFromProgID("VisualStudio.DTE.10.0");
            DTE dte = (DTE)System.Activator.CreateInstance(type, true);
            EnvDTE.Window window = dte.Windows.Item(EnvDTE.Constants.vsWindowKindToolbox);
            EnvDTE.ToolBox toolbox = (EnvDTE.ToolBox)window.Object;
            EnvDTE.ToolBoxTab myTab = toolbox.ToolBoxTabs.Item("Saino");
            myTab.Activate();
            myTab.Delete();
            Marshal.ReleaseComObject(dte);
            //Console.WriteLine("Control Uninstalled!!!");
        }

        void Register()
        {
            IOleMessageFilter oldFilter;
            CoRegisterMessageFilter(this, out oldFilter);
        }

        void Revoke()
        {
            IOleMessageFilter oldFilter;
            CoRegisterMessageFilter(null, out oldFilter);
        }

        #region IOleMessageFilter Members
        public int HandleInComingCall(int dwCallType, IntPtr hTaskCaller, int dwTickCount, IntPtr lpInterfaceInfo)
        {
            return 0; //SERVERCALL_ISHANDLED
        }

        public int RetryRejectedCall(IntPtr hTaskCallee, int dwTickCount, int dwRejectType)
        {
            if (dwRejectType == 2) // SERVERCALL_RETRYLATER
            {
                return 200; // wait 2 seconds and try again
            }
            return -1; // cancel call
        }

        public int MessagePending(IntPtr hTaskCallee, int dwTickCount, int dwPendingType)
        {
            return 2; //PENDINGMSG_WAITDEFPROCESS
        }
        #endregion
    }
} 
```

我的 Form1.cs 代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using InstallToolboxControls;

namespace WindowsFormsApplication12
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            InstallToolboxControls.Program prg = new InstallToolboxControls.Program();
            InstallToolboxControls.Program.Toolbox("Install");
        }
    }
} 
```

# java - “线程“主”java.lang.NoSuchMethodError 中的异常“

> ID：12767468
> 
> 赞同：2
> 
> 时间：2012-10-07T09:02:21.090
> 
> 标签：java, xml, nosuchmethoderror

我正在执行一个 java 程序以提取 XML 文件。当我运行我的 java 程序时，我收到了这个运行时异常。请建议

编译期间

这是我得到的编译时错误

类 GenerateInvoice WaxDoc = new WAX("/u01/Output/report/gen_xml/work/" + DIR_NAME + "/" + file_name + "_invoice.xml", Version.V1_0); "

然后我添加了一个包“wax14_1.0.4.jar”。运行后：

```
Exception in thread "main" java.lang.NoSuchMethodError: 
    java.util.regex.Pattern.quote(Ljava/lang/String;)Ljava/lang/String;
        at com.ociweb.xml.XMLUtil.<clinit>(XMLUtil.java:83)
        at com.ociweb.xml.ElementMetadata.buildQualifiedName(ElementMetadata.java:155)
        at com.ociweb.xml.ElementMetadata.<init>(ElementMetadata.java:136)
        at com.ociweb.xml.WAX.start(WAX.java:829)
        at com.ociweb.xml.WAX.start(WAX.java:816)
        at com.ociweb.xml.WAX.start(WAX.java:803) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:07:09.467

根据文档（http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html），该方法从 1.5 开始可用。检查您是否正在运行环境 < 1.5。如果是这种情况，您必须使用 Retroweaver，如项目主页 (https://code.google.com/p/waxy/) 中所述。

# iphone - 应用程序文档文件夹中的 UIWebView 图像不刷新

> ID：12767471
> 
> 赞同：8
> 
> 时间：2012-10-07T09:02:59.577
> 
> 标签：iphone, ios, ipad, uiwebview, image

我有一个 UIWebView 我通过显示动态生成的 HTML

```
[_webView loadHTMLString:htmlString baseURL:applicationDocumentsDirectory]; 
```

HTML 包含图像，例如`<img src="chart1.png">`. 每次生成 HTML 时，也会重新生成图像。（我已经检查过它们确实在正确的位置并更新了。）但是，在第一次运行之后，如果我更改数据并重新启动我的 UIWebView，它会使用旧图像。

我努力了：

```
[[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

无济于事。（也许这并不奇怪，因为这与 NSURLRequests 有关。）

我知道存在绝对 URL 的可能性，但我没有尝试过，因为它看起来很麻烦，我希望它可以与这些简单的相对 URL 一起使用。问题不是找到图像，而是适当地更新它们。

我也知道您可以发明一些方案，通过将数字更改为随机生成且始终唯一的数字`src`来诱使浏览器认为图像是动态的。`chart1.png?1234`对于一个应该很容易解决的问题，这似乎也是一个无用的解决方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:13:37.027

嗨，每当我加载以前加载的页面时，我都会遇到与 uiwebview 类似的问题，显示旧内容。经过进一步调查，我发现 uiwebview 内容在后台加载，然后在加载完成后显示；但是，在加载旧内容时会显示。我通过制作我自己的 uiwebview 加载代表并添加我自己的加载符号来代替显示旧内容来解决我的问题。

```
 -(void)webViewDidStartLoad:(UIWebView *)webView{

webView.hidden = true;
loader.animationImages =[NSArray arrayWithObjects:

                            [UIImage imageNamed:@"1.png"],
                            [UIImage imageNamed:@"2.png"],
                            [UIImage imageNamed:@"3.png"],
                            [UIImage imageNamed:@"4.png"],
                            [UIImage imageNamed:@"3.png"],
                            [UIImage imageNamed:@"2.png"],
                            [UIImage imageNamed:@"1.png"],
                            [UIImage imageNamed:@"5.png"]
                             ,nil];

loader.animationDuration = 1.5;

loader.animationRepeatCount = 100;
[loader startAnimating];

}
-(void)webViewDidFinishLoad:(UIWebView *)webView{

[loader stopAnimating];
webView.hidden  = false;
} 
```

记得链接代表和所有其他我希望这有帮助的东西:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:27:36.147

您应该对图像有适当的参考，否则可能无法正常工作。如果您有同一级别的图像和 html 文件，请尝试使用类似的东西，

```
<img src="./chart1.png"> 
```

或者，如果您想要文件夹内的图像，则使用正确的路径引用来引用它。

我希望它有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-20T11:18:04.773

您需要提供图像源的绝对路径。

```
NSError *error;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString* path = [documentsDirectory stringByAppendingPathComponent:
                  @"/chart1.png" ]; 
```

我希望这有效

# pug - JADE中内联文本和输入项之间的空格？

> ID：12767474
> 
> 赞同：14
> 
> 时间：2012-10-07T09:03:42.840
> 
> 标签：pug

如何在 JADE 中的内联文本和输入项之间留出空格？

```
div(data-role="horizontal", data-theme="a", data-overlay-theme="a", data-inline="true",class="ui-bar ui-grid-c")
                        div(class='ui-block-a')
                            div(data-role='fieldcontain')
                                label(for='memberaddress') Address Proof
                                textarea(id='memberaddress',name='memberaddress')
                        div(class='ui-block-b')
                            div(data-role="fieldcontain")
                                label(for="proof") Proof ID
                                select(name='proof', id='proof', data-theme='a', data-icon='bank', data-inline='true', data-native-menu="false")
                                    option(value='0') Select Proof
                                    option(value='1') Voter ID
                                    option(value='2') Driving Licence
                                    option(value='3') PANCARD
                                    option(value='4') Ration Card
                        div(class='ui-block-c')
                            div(data-role="fieldcontain")                           
                                input(type='checkbox', name='addressmatchedCheck', id='addressmatchedCheck', data-inline="true")
                                label(for='addressmatchedCheck') Address Matched 
```

我的输出是： ![附件图片是我的输出](../Images/5f668036aa6639a698b71754976aa399.png)

我无法在标签和文本区域之间获得空间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T17:17:39.697

按照 jonathan ong 的建议，在 CSS 中添加边距，或者您可以在标签和 textarea 之间添加 `| &nbsp;`或 `span &nbsp;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T01:07:36.900

还有“漂亮”选项

您应该可以像这样调用翡翠（请参阅[http://jade-lang.com/api/](http://jade-lang.com/api/)）：

```
var fn = jade.compile('string of jade', {pretty: true}); 
```

它将在模板中所有节点之间的输出中插入换行符和缩进。

如果您只想插入一个空格，则可以选择

```
label(for='memberaddress') Address Proof
=' '
textarea(id='memberaddress',name='memberaddress') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T07:18:20.063

正如在其他答案中已经确定的那样，问题实际上出在 Jade 创建的 html 而不是 css 上。也就是说，在不更改标记的情况下创建一些空间的一种方法是在`label`.

@leff 提到使用`=' '`. 我以前从未见过，而且我在 Jade 文档中找不到对它的引用。我喜欢它的工作原理，但是没有看到文档，我犹豫在生产中使用它。

我认为最好的选择是`&thinsp;`在需要插入允许文本换行的空白时使用。`&nbsp;`如果您真的想防止文本这些元素换行，则可能适用于您描述的情况。我更支持让一切都包裹和流动，所以我通常`&thinsp;`在需要确保 Jade 吐出空间时使用。

您可以在[w3c 字符实体参考](http://dev.w3.org/html5/html-author/charref)页面上找到`&thinsp;`和其他一些“空格”选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-17T20:59:22.380

**选项1**（我的选择）

```
input(type='button')
| &nbsp;
input(type='button') 
```

**选项 2**

```
input(type='button')
= ' '
input(type='button') 
```

**选项 3**

```
input(type='button')
|  
input(type='button') 
```

不过还有其他的......

# php - 从外部 php 脚本接收数据？

> ID：12767475
> 
> 赞同：0
> 
> 时间：2012-10-07T09:03:45.533
> 
> 标签：php

请问有人可以帮我吗？

我在我的网站上制作了一个 php 脚本，它将接收 get 数据，然后根据该 get 数据返回 true 或 false。

我需要一种在完全不同的服务器上通过 php 调用该脚本的方法，然后保存返回的值。

我该怎么做呢？

另外，我将如何使用 POST 来做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:09:21.043

您可以使用 cURL 在其他服务器上调用脚本并将数据发布到该脚本。

```
//set POST variables
$url = 'http://example.com/post.php';
$fields = array(
            'data1' => urlencode($data1),
            'data2' => urlencode($data2),
        );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

您将在此处获得更多详细信息：http: [//php.net/manual/en/ref.curl.php](http://php.net/manual/en/ref.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:09:46.520

像这样的东西会为 GET 做：

```
$response = file_get_contents('your_url_here'); 
```

对于 POST，我会使用[cURL](http://php.net/manual/en/book.curl.php)。

# facebook - 按 FQL 中的 2 个字段排序

> ID：12767479
> 
> 赞同：1
> 
> 时间：2012-10-07T09:04:49.187
> 
> 标签：facebook, api, sorting, facebook-fql

我正在尝试按 2 个标准对那些首先使用我的应用程序并且与我有最多共同朋友的人进行排序。有没有办法按 FQL 中的 2 个字段排序？

我找到了使用mutual_friend_count * is_app_user 作为排序标准的工作，但它仅适用于app_user = 1，并且不为0 的人执行排序。

原始查询是：

```
SELECT uid, name, is_app_user, mutual_friend_count  
FROM user 
WHERE uid IN(SELECT uid2    FROM friend WHERE uid1 = me()) AND uid != me() ORDER BY (mutual_friend_count * is_app_user) DESC LIMIT 333 
```

在图形 API/FQL 资源管理器中[执行。](http://developers.facebook.com/tools/explorer/?fql=%20%20%20%20SELECT%20uid%2C%20name%2C%20is_app_user%2C%20mutual_friend_count%20%20%0A%20%20%20%20FROM%20user%20%0A%20%20%20%20WHERE%20uid%20IN%28SELECT%20uid2%20%20%20%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29%20AND%20uid%20!%3D%20me%28%29%20ORDER%20BY%20%28mutual_friend_count%20%2a%20is_app_user%29%20DESC%20LIMIT%20333)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:42:41.547

> 我找到了使用mutual_friend_count * is_app_user 作为排序标准的工作，但它仅适用于app_user = 1，并且不为0 的人执行排序。

当然不是，因为 fe 66 * 0 给出与 15 * 0 相同的排序值。

但假设没有人的共同朋友数大于 99999，您可以按`is_app_user * 99999 + mutual_friends_count`.

这将为应用程序用户提供 99999 的“基础值”，并获得添加的共同好友数量。对于非应用用户，基值仍为 0，同时获得共同好友的数量。

因此，应用程序用户将比非应用程序用户具有更高的排序值，因此将获得排名第一——同时考虑到添加的mutual_friends_count。非应用用户仍然会按照他们的mutual_friends_count 排名，但仅排在应用用户之后，因为他们的排序值要低得多。

唯一可能有点棘手的是，将 + 号添加到查询中——当通过 URL 将其传递给 Graph API Explorer 时，它必须被 URL 编码为 %2B，但它不会将其*显示*为事后查询。但是从结果来看，它似乎仍然在使用它来进行查询：

[请参阅此处的示例查询。](https://developers.facebook.com/tools/explorer/?fql=SELECT%20uid%2C%20name%2C%20is_app_user%2C%20mutual_friend_count%20FROM%20user%20WHERE%20uid%20IN%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29%20AND%20uid%20%21%3D%20me%28%29%20ORDER%20BY%20%28mutual_friend_count%20%2B%20is_app_user%20%2A%2099999%29%20DESC%20LIMIT%20333)

# sql - TSQL 帮助 | INSERT 语句的选择列表包含的项目少于插入列表

> ID：12767481
> 
> 赞同：1
> 
> 时间：2012-10-07T09:05:01.350
> 
> 标签：sql, sql-server, tsql

请参阅下面的查询，我已经多次计算了这些列，并且我还检查了逗号，它们似乎很好，但我不断收到错误

INSERT 语句的选择列表包含的项目少于插入列表。SELECT 值的数量必须与 INSERT 列的数量相匹配。

```
DECLARE @StatusValues TABLE (StatusId INT,StatusText VARCHAR(50))

INSERT INTO @StatusValues VALUES(1,'Code 1 - Entered E&D Waiver');
INSERT INTO @StatusValues VALUES(2,'Code 2 - Nursing Facility');
INSERT INTO @StatusValues VALUES(3,'Code 3 - Entered Assisted Living Waiver');
INSERT INTO @StatusValues VALUES(4,'Code 4 - Entered TBI/SCI Waiver');
INSERT INTO @StatusValues VALUES(5,'Code 5 - Entered IL Waiver');
INSERT INTO @StatusValues VALUES(6,'Code 6 - DECEASED');
INSERT INTO @StatusValues VALUES(7,'Code 7 - Refused Waiver Services');
INSERT INTO @StatusValues VALUES(8,'Code 8 - Other (Explain)');
INSERT INTO @StatusValues VALUES(NULL,'Please select');

INSERT INTO SWMPDD.dbo.Clients(
    AdditionalPertinent,
    Address1,
    Address2,
    ApplicationApprovedBy,
    ByWhom,
    City,
    ClientAt,
    ContactPerson,
    ContactPhone,
    County,
    DateClientContacted,
    Diagnostic,
    Diet,
    Direction,
    DateOfBirth,
    Email,
    FirstName,
    Gender,
    InOtherCase,
    InTakeDate,
    IPAddress,
    LastName,
    LastUpdateUser,
    LastUpdateTime,
    LockinStatus,
    Medicaid,
    Medicare,
    MethodofContact,
    MiddleInitial,
    OfficalComments,
    OtherComments,
    ParticipantId,
    ParticipantSignature,
    PersonResidenceCode,
    Phone,
    Physician,
    PhysicianAddress,
    PhysicianCity,
    PhysicianPhone,
    PhysicianZip,
    CreationDate,
    ReferralPhone,
    ReferralSoruce,
    RelationshipToClient,
    SignatureDate,
    SSN,
    [State],
    CreationUser,
    VerificationDate,
    VerificationOfMedicaidStatus,
    Zip,
    ClientId,
    StatusId,
    StatusText
)
SELECT 
    AdditionalPertinent,
    Address1,
    Address2,
    ApplicationApprovedBy,
    ByWhom,
    City,
    ClientAt,
    ContactPerson,
    ContactPhone,
    county,
    DateClientContacted,
    Diagnostic,
    Diet,
    Direction,
    DOB,
    EmailAddress,
    FirstName,
    Gender,
    InOtherCase,
    InTakeDate,
    ipaddress,
    LastName,
    lastUpdatedBy,
    lastupdatedDate,
    LockinStatus,
    Medicaid,
    Medicare,
    MethodofContact,
    MiddleInit,
    OfficalComments,
    OtherComments,
    ParticipantId,
    ParticipantSignature,
    PersonResidenceCode,
    phone,
    Physician,
    PhysicianAddress,
    PhysicianCity,
    PhysicianPhone
    PhysicianZip,
    recDate,
    ReferralPhone,
    ReferralSoruce,
    RelationshiptoClient,
    SignatureDate,
    SSN,
    [state],
    userid,
    VerificationDate,
    VerificationofMedicaidStatus,
    zip,
    NEWID(),
    (SELECT StatusId FROM @StatusValues WHERE StatusText = ReasonforRemovalCode) abc,
    Code8Other
FROM msdepart.dbo.tblParticipant; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-07T09:10:40.650

由于此处缺少逗号，您的 SELECT 部分和 INSERT (..column list..) 中的字段列表由 1 输出：

```
PhysicianPhone
PhysicianZip, 
```

在选择。它将 Phone 别名为 Zip，其他所有内容都不同步。

# php - 调整 the_post_thumbnail 的大小以正确拉伸，wordpress

> ID：12767482
> 
> 赞同：0
> 
> 时间：2012-10-07T09:05:08.957
> 
> 标签：php, image, wordpress, thumbnails

嗨，我正在使用`the_post_thumbnail`nivo 滑块，我的问题是我似乎无法找到一种简单的方法来自动将图像调整为精确的尺寸。当我使用`add_image_size`它时，它不会正确拉伸它，它会保持约束。我不想裁剪或任何东西。我只希望用户上传图片，之后不需要做任何事情。

它可能很愚蠢，但我已经用谷歌搜索了它，尽管有很多关于它的内容，包括各种插件，但我似乎无法找到一个可靠的答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:25:00.997

add_image_size() 方法有一个您希望使用的裁剪方法的标志。但是，它们都将保持图像的比例不变。

您可以扩展功能或构建自己的插件以按照您想要的方式处理调整大小 - 您可能想看看 /wp-includes/media.php 和一个简单的调整大小类，如[https://github.com/ mdular/ReSample.php/blob/master/ReSample.php](https://github.com/mdular/ReSample.php/blob/master/ReSample.php)

不过，我不喜欢扭曲图像比例。如果客户无法区分纵向或横向纵横比，那么在大多数情况下，裁剪图像而不是拉伸它似乎是更优雅的解决方案。

对于您的问题的快速而肮脏的解决方案，尽管我建议以下内容：

1.  添加图像大小并通过宽度或高度限制它以适合您的滑块宽度或高度（此示例仅通过宽度限制）：

    add_image_size('滑块图像', 760, 9999); //760 像素宽，“无限”高

2.  输出图像标签时，将图像标签中的尺寸强制为 760 x 474

    <img src="" width="760" height="474" ...>

这将为您留下可能比您想要的更高或更宽的图像文件，但将被迫在浏览器中设置尺寸，因此适合滑块。是的，它很脏，但是它可以与您当前拥有的工具一起使用。

**根据您的评论进行**更新：您可以通过获取原始图像信息自己构建图像标签。****

 **1) 像这样抓取 post 元数据（假设 the_post() 已经执行，如果你在 while 循环中应该是这样）：

```
$meta = get_post_meta($post->ID) 
```

2）检查缩略图ID以避免空输出（并在if块内执行步骤3 + 4）

```
if(!empty($meta['_tumbnail_id'][0]) 
```

3) 获取实际的缩略图原始数据 - 请务必填写您想要的“缩略图版本”（大小）（“缩略图”、“中等”等。如果您在 functions.php 中使用了 add_image_size()，请填写您自己的） )

```
$image = wp_get_attachment_image_src( $meta['_thumbnail_id'][0], 'VERSION'); 
```

4）构建图像标签：

```
$image[0] = the src url
$image[1] = the width - you may use this
$image[2] = the height - you may wish to force this to your liking 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:29:49.347

我认为你需要澄清你的问题。如果我理解正确，您希望上传的图像是准确的图像而不进行裁剪？确保在调用 nivo 滑块的_post_thumbnail 函数之前保存上传。这样，您就可以在函数获取原始图像之前对其进行操作。**

# c - C中传递给函数的结构数组

> ID：12767485
> 
> 赞同：0
> 
> 时间：2012-10-07T09:05:27.130
> 
> 标签：c, arrays, struct, io

我正在尝试制作一个小程序，该程序从分隔（由“|”）分隔的文件中获取输入，例如文件中的一行如下所示：

```
name|phone|address|city|state|zip 
```

出于某种原因，每次我试图让它将结构数组中的所有内容写入二进制文件时，数组的链接都会出错。我已经看了几个小时了，不知道为什么会这样。我注意到的一个问题是，如果我决定运行程序并在向索引 1 写入内容后打印出数组的索引 0 中的内容，它会弄乱索引 0（每个索引都包含一个结构）。我不确定为什么。

请帮忙，我已经在键盘上敲了几个小时，试图弄清楚为什么它会给我这个问题。抱歉，忘了说它应该运行第一个参数是文件 ex ./ExerciseOne.out /path/to/file.txt 的路径

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

/*
 * ExerciseOne.c
 *
 *  Created on: Sep 24, 2012
 *      Author: kevin
 */

typedef struct personal_Info {
    char *Name;
    char *Phone;
    char *address;
    char *city;
    char *state;
    int zip;

} PInfo ;

void loopTokens(PInfo *, char *);
void PrintStruct(PInfo *);
void PrintStructArray(PInfo p[], int);
void transferText(PInfo *, int);
void transferTextBin(PInfo p[], int);
void readTextBin(FILE *, PInfo *, int );

int main(int argc, char *argv[]){
    int index = 0;
    int numLines = 0;
    char *lineOfText = malloc(80);
    //Open File
    FILE *fp;
    if ((fp = fopen(argv[1], "r")) == NULL){
    printf("File could not be opened");
    }
    else {
        fclose(fp);
    fp = fopen(argv[1], "r");//inputs the argv as the vile to read
    }
    fscanf(fp, "%d \n", &numLines);

    //Create Arrays for Binary and Text structs
    PInfo TextInfo[numLines];
    PInfo *TextInfo_ptr;

/*Commented code
 * TextInfo[index] = *TextInfo_ptr;//Point to structure ##Unneeded##
 *  printf("this is before the transferTextBin %s \n", TextInfo[0].Phone);//Works
 */
    while(!feof(fp)&&index<numLines){
      TextInfo_ptr = &TextInfo[index];//Structure points to the proper hole in array; current index//Looks like it advances the count for the ptr
      fgets(lineOfText, 80, fp);
      loopTokens(TextInfo_ptr,  lineOfText);//puts pointer to the array index into function
      printf("this is before the transferTextBin %s \n", TextInfo_ptr->Phone);//Works
      printf("this is before the transferTextBin %s \n", TextInfo[0].Phone);//problem second time around
      printf("this is before the transferTextBin %s \n", TextInfo[1].Phone);//works
      //PrintStruct(TextInfo_ptr);
      index++;
    }

    //transferText(TextInfo, numLines);//Will do it in regular

    printf("this is before the transferTextBin %s \n", TextInfo[0].Phone);//Here it is suddenly losing it
    transferTextBin(TextInfo, numLines);//will do it in bin

    fclose(fp);
    FILE *fBIN;
    fBIN = fopen("fOUT.dat", "rb");// may need to insert this into method
    //readTextBin(fBIN, BinInfo, numLines);
    return(0);
}

void loopTokens(PInfo *p, char *textLine){//Want to pass in INDIVDUAL structs
    char *buffer;
    int index = 0;

  p->Name = malloc(80);
  p->Phone = malloc(80);
  p->address = malloc(80);
  p->city = malloc(80);
  p->state = malloc(80);
  p->zip = 0;

        /* mallocate each field in the current structure */

    buffer = strtok(textLine, "|"); /* Tokenize the string */

    while(buffer != NULL && strcmp(textLine,"\n")){ /* loop through all tokens */
            if(index == 0){
            //strcpy(p->Name,textLine);
            p->Name = buffer;
            buffer = strtok(NULL, "|");
            index++;
            }
            else if(index == 1){
            p->Phone = buffer;
            buffer = strtok(NULL, "|");
            index++;
            }
            else if(index == 2){
            p->address = buffer;
            buffer = strtok(NULL, "|");
            index++;
            }
            else if(index == 3){
            p->city = buffer;
            buffer = strtok(NULL, "|");
            index++;
            }
            else if(index == 4){
            p->state = buffer;
            buffer = strtok(NULL, "|");
            index++;
            }
            else if(index == 5){
                p->zip = 0;
            p->zip = (int)atoi(buffer);
            buffer = strtok(NULL, "|");
            index++;
            }
  }
  index = 0;

}

    void PrintStruct(PInfo *p){//Gets pointer to the struct
        printf("This is the supposed name: %s The Phone is : %s, the address is : %s %s %s %d\n", p->Name, p->Phone, p->address, p->city, p->state, p->zip );
    }
    void PrintStructArray(PInfo p[], int lines){//Gets Entire array of structs; prints everything out
  int index = 0;
    while(index < lines){
      printf("This is the supposed name: %s The Phone is : %s, the address is : %s %s %s %d\n", p[index].Name, p[index].Phone, p[index].address, p[index].city, p[index].state, p[index].zip );
    }
  }
void transferText(PInfo *p, int numLines){//Transfers text
  FILE *fOUT;//open file for writing
  int index = 0;
        fOUT = fopen("fOUT.txt", "w");//Open file for writing

        while(index < numLines){
          fputs(p->Name,fOUT);
          fputs(p->Phone,fOUT);
          fputs(p->address,fOUT);
          fputs(p->city,fOUT);
          fputs(p->state,fOUT);
          fputs(p->zip,fOUT);
        }

        fclose(fOUT);

    }
void transferTextBin(PInfo p[], int numLines){
    FILE *fOUT;//open file for writing
    //int index = 0;
    fOUT = fopen("fOUT.dat", "wb");
    printf("this is the phone of the first index %s", p[0].Phone );
    //printf("Ti the supposed name: %s The Phone is : %s, the address is : %s %s %s %d\n", p[index].Name, p[index].Phone, p[index].address, p[index].city, p[index].state, p[index].zip );
    //while(index < numLines){
/*  fwrite(p[index]->Name, sizeof(p[index]->Name), 1, fOUT);
    fwrite(p[index]->Phone, sizeof(p[index]->Phone), 1, fOUT);
    fwrite(p[index]->address, sizeof(p[index]->address), 1, fOUT);
    fwrite(p[index]->city, sizeof(p[index]->city), 1, fOUT);
    fwrite(p[index]->state, sizeof(p[index]->state), 1, fOUT);*/
    //fwrite(p->zip, sizeof(p->zip), 1, fOUT);
//  }
    fclose(fOUT);
    }

void readTextBin(FILE *fIN, PInfo *bInfo, int numLines){
    int index = 0;
    //char *buffer;
    printf("This is what is in the File: ");
    //bInfo[index].Name = fread(buffer, 80, 1, fIN);
    //bInfo[0]->Name = malloc(80);
    while(!feof(fIN) && index<numLines){
        fread(bInfo[index].Name, 80, 1, fIN);
        fread(bInfo[index].Phone, 80, 1, fIN);
        fread(bInfo[index].address, 80, 1, fIN);
        fread(bInfo[index].city, 80, 1, fIN);
        fread(bInfo[index].state, 80, 1, fIN);
        //fread(bInfo[index]->zip, 80, 1, fIN);
        PrintStruct(bInfo);
        index++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:47:55.580

在`loopTokens`中，您应该将缓冲区中`strcpy`的值传递给成员。你的名字，地址等的记忆，`textLine``char*``malloc`

```
void loopTokens(PInfo *p, char *textLine){
    char *buffer;
    int index = 0;

    p->Name = malloc(80);
    /* snip */
    buffer = strtok(textLine, "|"); /* Tokenize the string */

    while(buffer != NULL && strcmp(textLine,"\n")){ /* loop through all tokens */
            if(index == 0){
            //strcpy(p->Name,textLine);
            p->Name = buffer;
            buffer = strtok(NULL, "|");
            index++;
            } 
```

但是当您分配 eg 时`p->Name = buffer;`，您会丢失对`malloc`ed 内存的引用（坏），并让`p->Name`指向 a 指向`char`的数组`textLine`。`strtok`修改调用它的缓冲区，并返回（`NULL`或）指向该缓冲区的指针。

所以`p->Name`和朋友们都指向`textLine`缓冲区，当您在下一行阅读时，其内容会发生变化。

而不是`p->Name = buffer;`，你应该

```
strcpy(p->Name, buffer); 
```

（您分配的内存`p->Name`不少于 to `textLine`，因此只要检查是否`malloc`返回，就没有在分配的内存之外写入的危险`NULL`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:03:40.763

```
void loopTokens(PInfo *p, char *textLine){
    char *tok;
    int index = 0;

    if(!strcmp(textLine,"\n")) return; /* loop-invariant moved out of the loop */

    for(tok= strtok(textLine, "|"); tok; tok = strtok(NULL, "|") ) {
        switch(index++) {
          case 0:
          p->Name = strdup(tok);
            break;
        case 1:
            p->Phone = strdup(tok);
            break;
        case 2:
            p->address = strdup(tok);
            break;
        case 3:
            p->city = strdup(tok);
            break;
        case 4:
            p->state = strdup(tok);
            break;
        case 5:
            p->zip = 0;
            p->zip = atoi(tok);
            break;
        default:
            return;
            }
     }

} 
```

# javascript - Jquery .serialize 没有注册输入字段的值

> ID：12767487
> 
> 赞同：0
> 
> 时间：2012-10-07T09:05:38.407
> 
> 标签：javascript, jquery

我正在尝试从表单中序列化一些数据。

的HTML：

```
<form class="span5 login navbar-form pull-right">
    <input class="span2" type="text" placeholder="E-mail" />
    <input class="last span2" type="password" placeholder="Lösenord" />
    <a class="loginbutton span1 btn btn-zen-inverse btn-mini" href="#">Logga in</a>
    <br />
    <a class="pull-right hidden" href="#">Glömt lösenord</a>
    <label class="pull-right hidden"><input type="checkbox" /> Kom ihåg mig</label>
</form> 
```

查询：

```
$(document).ready(function() {
    $('.loginbutton').click(login);
});

function login(){
  event.preventDefault();
  var params = $('form').serialize();
  console.log(params);
} 
```

如果我在 html-fields 中放入一些数据并单击上面的“a”标签，`.logintbutton`那么它`console.log`只是空的，我希望它能够推出数据。WhisserializeArray，我得到一个空数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:07:09.077

您应该在输入中提供名称。[jsfiddle](http://jsfiddle.net/y2yPM/)

修改后的 HTML：

```
<form class="span5 login navbar-form pull-right">
    <input name='email' class="span2" type="text" placeholder="E-mail" />
    <input name='password' class="last span2" type="password" placeholder="Lösenord" />
    <a class="loginbutton span1 btn btn-zen-inverse btn-mini" href="#">Logga in</a>
    <br />
    <a class="pull-right hidden" href="#">Glömt lösenord</a>
    <label class="pull-right hidden"><input type="checkbox" /> Kom ihåg mig</label>
</form>​ 
```

# objective-c - Objective-c IOS重复UILocalNotification设置为过去的日期

> ID：12767490
> 
> 赞同：1
> 
> 时间：2012-10-07T09:06:03.787
> 
> 标签：objective-c, ios, xcode, nsdate, uilocalnotification

如果我将 UILocalNotification 触发日期（警报时间）设置为过去的某个时间并重复此通知会怎样。下次间隔过后它会通知我吗？

示例：我将通知设置为昨天上午 10:00，并使其每天重复。它会在今天上午 10:00 触发，还是不会因为第一个通知设置为过去的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:22:21.287

更新：

在 iOS 7 上也是如此。

我在模拟器中对此进行了测试，方法是在过去设置一个重复提醒，然后将时钟向前移动到它在一周内触发之前。它没有开火。

iOS 6

# php - 通过终端执行 PHP 获取请求

> ID：12767492
> 
> 赞同：1
> 
> 时间：2012-10-07T09:06:21.040
> 
> 标签：php, cron, terminal, debian

我目前正在为几个人运行 cronjobs，要知道这些人是谁，我给它一个包含一些细节的参数：

```
0 1 * * * cd /var/www; php auto.php?user=user 
```

由于某种原因，它返回此结果：

> 无法打开输入文件：auto.php?user=user

语法有什么问题吗？我必须编码任何东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T09:12:50.453

在命令行 PHP 中使用参数是不同的

命令应该是

`php auto.php myuser`

然后在脚本中使用`$_SERVER['argv']`超全局数组访问变量 - 每个命令行参数在该数组中以脚本名称开头的顺序排列。您可以检查传递的参数数量`$_SERVER['argc']`

在这种情况下

```
$_SERVER['argc'] = 2
$_SERVER['argv'][0] = auto.php
$_SERVER['argv'][1] = myuser

```

**奖金信息**

您可以`#!/usr/bin/php`在 php 文件的第一行添加一个（称为 shebang），添加执行位，然后您不必在命令行上调用 php，您只需调用脚本即可。假设 php 位于 /usr/bin/php 的典型位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T09:14:15.000

您不能使用 url 样式参数从命令行调用 php 脚本，但有两种可能的解决方案：

您可以使用 wget 通过网络服务器有效地触发脚本（假设它实际上是在服务器中运行的页面/脚本）

```
0 1 * * * wget http://yourserver/thepath/auto.php?user=user 
```

使用 php 的[getopt](http://www.php.net/manual/en/function.getopt.php)扩展，您可以修改脚本以接受 shell 样式的参数

```
$options = getopt("u:");  // expect -u followed by the parameter value
$user = $options["u"];
// continue the script 
```

这被称为

```
php -q auto.php -u user 
```

查看 getopt 文档页面，你也可以让它比这更精彩。与使用 argc/argv 相比，使用 getopt 的主要优点（顺便说一句，这仍然是一个有效的选项）是处理可以以任何顺序给出的多个参数要容易得多。例如，假设您需要：

```
php -q auto.php -u user -p pass -a another -b whatever 
```

您将需要编写相当多的支持代码来解析这些参数，而 getopt 自己完成了这一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T09:17:39.907

你不能那样做——这是在 http 请求中传递参数的方式，而不是到处。对于命令行，您必须使用`$_SERVER['argv']`and `$_SERVER['argc']`。

在你的情况下，你应该修改你的代码。代替

```
$user = $_GET['user']; 
```

利用

```
$user = $_SERVER['argv'][1]; 
```

并且应该将调用脚本的方式更改为：

```
0 1 * * * cd /var/www; php auto.php user 
```

您还可以找到一些有用的命令行帮助程序类，即：[CLI](http://www.phpclasses.org/package/954-PHP-CLI-is-shell-argument-parsing-and-handling-class.html)

有关详细信息，请参阅PHP 手册中的[命令行使用](http://php.net/manual/en/features.commandline.php)部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-07T09:10:49.290

问号表示 HTTP GET 参数，在终端上没有意义，因为不涉及 Web 服务器。你可以使用这个：

```
cd /var/www; php auto.php some parameters 
```

然后在 PHP 脚本中使用`$_SERVER['argc']`and来读取参数。`$_SERVER['argv']`

# php - 带有存折的 iOS 推送通知

> ID：12767495
> 
> 赞同：0
> 
> 时间：2012-10-07T09:06:50.593
> 
> 标签：php, json, apple-push-notifications

我目前正在编写一个允许用户向通行证发送推送通知的存折 API。现在我正在测试它，但我的推送通知没有到达。我正在用 PHP 编写推送发送代码，这就是我目前所拥有的：

```
$payload = json_encode(array("aps" => array("alert" => "test", "sound" => "default")));
//send it to all devices found
while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) 
{
    error_log($row['pushToken']);
    //write the push message to the apns socket connection
    $msg = chr(0) .
    pack("n",32) .
    pack('H*', $row['pushToken']) .
    pack("n",strlen($payload)) .
    $payload;
    fwrite($fp, $msg);
} 
```

我在这里有什么遗漏或做错了吗？证书有效并且连接到 APNS 服务器不会给我任何错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:05:01.997

我通过重新创建证书、再次执行 openssl 魔术并使用新证书解决了这个问题。现在它正在工作，所以我认为我的证书中有一些错误:)

# mysql - SQL - 对应于两列的列的最大值

> ID：12767502
> 
> 赞同：1
> 
> 时间：2012-10-07T09:07:29.047
> 
> 标签：mysql, sql

一个表包含四列“server”、“directory”、“usage”和“datetime”。所有服务器共有 10 个目录。我需要获取服务器的数据，它是一天中最新日期时间的使用情况。例如，如果服务器 A 的目录为 B，那么几天内将多次出现使用情况。我需要所有服务器的查询报告的数据，它是每天最新条目的所有相应目录的使用情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:13:12.850

如果我正确理解了您的问题，您希望查看每个服务器和目录的最后使用情况。给定一个名为“usagestats”的表，其中给定的列是：

```
SELECT a.server, a.directory, a.`usage`, a.datetime
    FROM usagestats as a INNER JOIN (
        SELECT server, directory, max(datetime) datetime
            FROM usagestats
            GROUP BY server, directory
        ) AS b ON (
            a.server = b.server
            and a.directory = b.directory
            and a.datetime = b.datetime
        )
    ORDER BY a.server, a.directory, a.datetime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:57:53.713

我不确定我是否正确理解了您的问题。

MySQL 有 IF() 函数，它根据第一个参数中的条件返回一个语句。

如果要从数字较大且只有 2 列的列中选择数据 - 使用 IF 语句，如下所示：

```
SELECT 
if(columnA > columnB, columnA , columnB) as grtColumn,
if(columnA > columnB,'columnA is bigger', 'columnB is bigger') as whichColumnWasGrt

from yourtable; 
```

帮助：[mysql 参考 - if() 函数](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)（有 IF 语句和 IF() 函数 - 不同的事情！

# jquery - Phonegap jQuery Mobile 文本输入

> ID：12767506
> 
> 赞同：9
> 
> 时间：2012-10-07T09:07:56.627
> 
> 标签：jquery, html, ios, cordova, jquery-mobile

我希望有人能够告诉我为什么我的文本输入在使用 jquery mobile 的 Phonegap 项目中不起作用。这是我在 DropBox 中的 XCode 项目的链接：

[https://www.dropbox.com/sh/49t41ixh72at9q5/yc8USE2Lun](https://www.dropbox.com/sh/49t41ixh72at9q5/yc8USE2Lun)

文本字段在获得焦点时不允许文本输入。您需要打开 www/ 文件夹中的 index.html。

这是一个Phonegap 项目，使用jquery mobile 和xcode 来运行ios 模拟器。

导致问题的代码示例如下：

```
<div data-role="content">   
  <label for="basic">Text Input:</label>
  <input type="text" name="name" id="basic" value=""  />
</div><!-- /content --> 
```

更新：解决了！

查看下面的链接：

[Phonegap 样式 -webkit-user-select: none; 禁用文本字段](https://stackoverflow.com/questions/12812587/phonegap-styles-webkit-user-select-none-disabling-text-field)

# ruby-on-rails - 如何在 ruby 中生成 KML 文件？

> ID：12767508
> 
> 赞同：1
> 
> 时间：2012-10-07T09:08:07.373
> 
> 标签：ruby-on-rails, rubygems, kml

我想使用 ruby​​ on rails 提供动态生成的 KML 文件。我做了一些研究，发现[kamel](https://github.com/xaviershay/kamel)看起来很棒。问题是 kame 依赖于似乎不再可用的 ruby​​_kml gem。

```
$ gem install kamel
ERROR:  While executing gem ... (Gem::DependencyError)
    Unable to resolve dependencies: kamel requires ruby_kml (~> 0.1.4) 
```

在 ruby​​gems.org 上搜索“kml”未成功。那么有人知道在 ruby​​ on rails 中实现 KML 生成的任何替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:11:49.040

KML 只是另一种 XML，您可以轻松地制作自己的“编写器”，它会递归解析并格式化作为参数传入的任何输入，并生成看起来像有效 KML/XML 的字符串。

选项和 XML 布局的推荐阅读： [https ://developers.google.com/kml/documentation/kmlreference](https://developers.google.com/kml/documentation/kmlreference)

# c++ - c++ 中的移动和键比较是什么意思？

> ID：12767510
> 
> 赞同：0
> 
> 时间：2012-10-07T09:08:45.617
> 
> 标签：c++, time, complexity-theory

以下是我班上关于插入排序的ppt写的：

```
void insertionSort(DataType theArray[], int n) {
  for (int unsorted = 1; unsorted < n; ++unsorted) {

    DataType nextItem = theArray[unsorted];
    int loc = unsorted;

    for (;(loc > 0) && (theArray[loc-1] > nextItem); --loc)
       theArray[loc] = theArray[loc-1];

    theArray[loc] = nextItem;
  }
} 
```

-

```
Running time depends on not only the size of the array but also the contents of the array.
Best-case:       O(n)
Array is already sorted in ascending order.
Inner loop will not be executed.
>>>> The number of moves: 2*(n-1)        O(n)
>>>> The number of key comparisons: (n-1)    O(n)
Worst-case:      O(n2)
Array is in reverse order:
Inner loop is executed p-1 times, for p = 2,3, …, n
The number of moves: 2*(n-1)+(1+2+...+n-1)= 2*(n-1)+ n*(n-1)/2   O(n2)
The number of key comparisons: (1+2+...+n-1)= n*(n-1)/2          O(n2)
Average-case:    O(n2)
We have to look at all possible initial data organizations.
So, Insertion Sort is O(n2) 
```

什么是移动和关键比较？我在谷歌上找不到解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:28:43.040

移动是为了对数据进行排序而必须执行的交换次数，键是被匹配的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:30:13.717

让我先说一下算法。

*   假设在给定时间数组有两部分。index `0`to index`loc - 1`按升序排序， index `loc`to`n - 1`未排序。
*   从元素 at 开始，`loc`在数组的排序部分找到它的正确位置并将其插入那里。

所以现在有两个循环：

1.  `loc = 1`第一个外部循环以to开头`loc = n`，基本上将数组划分为已排序和未排序的部分。
2.  第二个内部循环在`loc`数组的排序部分 ( `0`to `loc - 1`) 中找到元素的位置。

对于内部循环，要找到正确的位置，您必须将元素`loc`与在最坏的情况下，数组排序部分中的所有元素进行比较。这是关键比较。

要插入，您必须在数组的已排序部分中为元素 at 创建一个 void `loc`。这是通过将排序部分中的每个元素交换到下一个元素来完成的。这是动。

# c++ - Qt：更改属性时''）'标记之前的预期主表达式？

> ID：12767512
> 
> 赞同：0
> 
> 时间：2012-10-07T09:09:09.970
> 
> 标签：c++, qt, qt-creator

我使用 Qt Creator 将 Qt 与 C++ 一起使用。`QGraphicsView`我的窗口中有一个名为`render`，我希望以编程方式设置它的场景。在 window.cpp 中：

```
QGraphicsScene* scene = new QGraphicsScene();
ui->render->scene(scene*); 
```

我已经包括`QtGui`和`QGraphicsView`。

当我尝试编译程序时，我得到：

```
error: expected primary-expression before ')' token 
```

有人对这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:11:51.097

`QGraphicsView::scene()`返回场景，用于`setScene(QGraphicsScene* scene)`设置。您还在 之后添加一个星号`scene`，当*在*一个对象之后使用它通常意味着将它相乘 - 这就是为什么它在 ')' 之前期待另一个东西。

# wordpress - .htaccess 重写条件忽略子域

> ID：12767513
> 
> 赞同：2
> 
> 时间：2012-10-07T09:09:16.647
> 
> 标签：wordpress, .htaccess

我的主要域是一个 Wordpress 博客，它的 .htaccess 重写如下......

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
  </IfModule> 
```

这很好用，但我在同一个目录中有一个子域，并且正在使用这个重写......

```
 RewriteCond %{SERVER_PORT} ^443$
    RewriteCond %{HTTP_HOST} ^my\.domain\.com$ [NC]
    RewriteCond %{REQUEST_URI} !^/my/
    RewriteRule ^(.*) /my/$1 
```

那是我的通配符 SSL 证书。这很好用，但如果子域中不存在该位置，我会得到 wordpress 的错误页面。我需要 wordpress 重写以忽略“我的”子域。我怎样才能做到这一点？

我在想类似的东西......

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !^my\.domain\.com$ 
    RewriteRule . /index.php [L]
  </IfModule> 
```

但这不起作用，也试过这个....

```
 <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^my\.domain\.com - [L,NC]
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
  </IfModule> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T14:10:27.833

您可能应该通过在服务器名称上添加条件来忽略域。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{SERVER_NAME} !^my\.domain\.com
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

另外，我前段时间遇到的一件事情，尝试将子域的 htaccess 更改为

```
RewriteBase /my 
```

如果“我的”是它所在的目录。

# android - 如何在意图服务中注册广播接收器

> ID：12767518
> 
> 赞同：2
> 
> 时间：2012-10-07T09:10:29.890
> 
> 标签：android, broadcastreceiver, intentservice

我有以下代码，它给出了一个没有通过非法参数异常注册的接收器

```
public class CheckServer extends IntentService
{

public String snumber;

public CheckServer()
{
  super("CheckServer");
}

@Override
public void onCreate()
{
  super.onCreate();

  String DELIVERED = "SMS_DELIVERED";

  DeliveryReceiver dReceiver = new DeliveryReceiver();

  registerReceiver(dReceiver,new IntentFilter(DELIVERED));

}

@Override
public void onDestroy()
{
  super.onDestroy();

  DeliveryReceiver dReceiver = new DeliveryReceiver();

  unregisterReceiver(dReceiver);
  dReceiver = null;
}

@Override
protected void onHandleIntent(Intent intent)
{
  try
  {
    serviceAction();
  }
  catch (ClientProtocolException e)
  {
    e.printStackTrace();
  }
  catch (IOException e)
  {
    e.printStackTrace();
  }
  catch (URISyntaxException e)
  {
    e.printStackTrace();
  }
  catch (JSONException e)
  {
    e.printStackTrace();
  }

  scheduleNextUpdate();
}

private void scheduleNextUpdate()
{
  Intent intent = new Intent(this, this.getClass());
  PendingIntent pendingIntent =
    PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

  long currentTimeMillis = System.currentTimeMillis();
  long nextUpdateTimeMillis = currentTimeMillis + 1 * DateUtils.MINUTE_IN_MILLIS;
  Time nextUpdateTime = new Time();
  nextUpdateTime.set(nextUpdateTimeMillis);

  AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
  alarmManager.set(AlarmManager.RTC, nextUpdateTimeMillis, pendingIntent);
}

public void serviceAction() throws ClientProtocolException, IOException, URISyntaxException, JSONException
{
  HttpResponse response = null;
  HttpClient client = new DefaultHttpClient();
      HttpGet request = new HttpGet();
      request.setURI(new URI("http://www.examplecom/sms/getsms"));
      response = client.execute(request);

      String result = convertStreamToString(response.getEntity().getContent());

      String no,message;

      JSONArray array = new JSONArray(result);

      for (int i = 0; i < array.length(); i++)
      {
        JSONObject row = array.getJSONObject(i);
        snumber = row.getString("sno");
        no = row.getString("no");
        message = row.getString("message");
        sendSMS(no , message);
      }
}

public static String convertStreamToString(InputStream inputStream) throws IOException
{
  if (inputStream != null)
  {
      Writer writer = new StringWriter();

      char[] buffer = new char[1024];
      try
      {
          Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),1024);
          int n;
          while ((n = reader.read(buffer)) != -1)
          {
              writer.write(buffer, 0, n);
          }
      }
      finally
      {
          inputStream.close();
      }
      return writer.toString();
  }
  else
  {
      return "";
  }
}

public void sendSMS(String number,String message)
{
  String DELIVERED = "SMS_DELIVERED";

  PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
            new Intent(DELIVERED), 0);

  SmsManager smsM = SmsManager.getDefault();
  smsM.sendTextMessage(number, null, message, null, deliveredPI);
}

public class DeliveryReceiver extends BroadcastReceiver
{     
  @Override
   public void onReceive(Context context, Intent arg1)
  {
               switch (getResultCode())
               {
                   case Activity.RESULT_OK:

                       Toast.makeText(getBaseContext(), "SMS delivered",Toast.LENGTH_SHORT).show();
                        try
                        {
                                updateSMSstatus(snumber);
                        }
                        catch (ClientProtocolException e)
                        {
                                e.printStackTrace();
                        }
                        catch (URISyntaxException e)
                        {
                                    e.printStackTrace();
                        }
                        catch (IOException e)
                        {
                                            e.printStackTrace();
                        }

                       break;

                   case Activity.RESULT_CANCELED:

                       Toast.makeText(getBaseContext(), "SMS not delivered",Toast.LENGTH_SHORT).show();

                       break;                        
               }

  }

  public void updateSMSstatus(String sno) throws URISyntaxException, ClientProtocolException, IOException
  {
      HttpResponse response = null;
      HttpClient client = new DefaultHttpClient();
      HttpGet request = new HttpGet();
      request.setURI(new URI("http://www.example.com/sms/updatesmsstatus?uname=someone&sno="+sno));
      response = client.execute(request);

  }
} 
```

问题是即使我在 onCreate() 方法中注册它，我也会收到一个未收到的寄存器错误，可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T11:48:59.687

您必须传递与一起使用的相同`BroadcastReceiver`对象。你不是。请保留您在 的数据成员中使用的，然后将相同的对象用于。`unregisterReceiver()``registerReceiver()``BroadcastReceiver``registerReceiver()``Service``unregisterReceiver()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:34:46.700

我没有在方法中注册`onCreate()`和取消注册，而是将方法更改为：`onDestroy()``sendSMS`

```
public void sendSMS(String number,String message,String serialnum) 
{  
  String DELIVERED = "SMS_DELIVERED";

  Intent delivered = new Intent(DELIVERED);
  delivered.putExtra("MsgNum", serialnum);
  PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, delivered, 0);

    registerReceiver(
        new BroadcastReceiver() 
        {   
            @Override
           public void onReceive(Context context, Intent intent)
           {
                       switch (getResultCode())
                       {
                           case Activity.RESULT_OK:

                               Toast.makeText(getBaseContext(), "SMS delivered",Toast.LENGTH_SHORT).show();

                               updateSMSStatus USS =  new updateSMSStatus();

                               USS.execute(intent.getStringExtra("Msgnum"));

                               break;

                           case Activity.RESULT_CANCELED:

                               Toast.makeText(getBaseContext(), "SMS not delivered",Toast.LENGTH_SHORT).show();

                               break;                        
                       }

                     unregisterReceiver(this);
            }

        },
        new IntentFilter(DELIVERED)); 

    SmsManager smsMngr = SmsManager.getDefault();
    smsMngr.sendTextMessage(number, null, message, null, deliveredPI);

} 
```

现在触发了发送短信的操作，谢谢大家。

关于如何区分每个短信的交付报告的任何想法？

我不太确定如何`intent.putExtra()`在我`service`的交付中使用该方法`BroadcastReceiver`。

# facebook-graph-api - 无法获得 facebook-tornado 连接

> ID：12767527
> 
> 赞同：0
> 
> 时间：2012-10-07T09:11:21.407
> 
> 标签：facebook-graph-api, tornado

我有一个问题，我是初学者，我尝试制作一个简单的异步程序来发布到 facebook，我使用[tornado 示例](https://github.com/facebook/tornado/tree/master/demos/facebook)和[tornado-facebook-sdk](https://github.com/pauloalem/tornado-facebook-sdk)，这里是代码：

```
class MainHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    def get(self):
        self.facebook_request("/me/home", self.print_callback, access_token=self.current_user["access_token"])
        a = self.current_user["access_token"]
        #print a

    def print_callback(data):
        print data
        ioloop.stop()
        graph.get_object('/facebook', callback=print_callback) 
```

我得到这个错误：

```
TypeError: print_callback() takes exactly 1 argument (2 given) 
```

因为我想了解这个例子来获取token，然后使用例子：

```
def callback(response):
    # ...
graph.put_object('me', 'feed', message="Maoe!!", callback=callback) 
```

为了在我的 facebook 墙上写点东西，我用[同步库](https://github.com/pythonforfacebook/facebook-sdk)做到了，但遗憾的是这被阻塞了！

更新：仍然得到和错误：

```
class MainHandler(BaseHandler, tornado.auth.FacebookGraphMixin):
    @tornado.web.authenticated
    @tornado.web.asynchronous
    def get(self):
        self.facebook_request("/me/home", self.print_callback, access_token=self.current_user["access_token"])
        a = self.current_user["access_token"]
        print a

    def print_callback(self, data):
        graph.post_wall(self, "heloooooooo") 
```

并得到这个错误：

```
[E 121009 14:28:47 web:1108] Uncaught exception GET / (::1)
HTTPRequest(.....)
Traceback (most recent call last):
File "C:\Python27\lib\site-packages\tornado-2.4.post1-py2.7.egg\tornado\web.py", line 1043, in _stack_context_handle_exception
   raise_exc_info((type, value, traceback))
   File "C:\Python27\lib\site-packages\tornado-2.4.post1 py2.7.egg\tornado\stack_context.py", line 237, in _nested
    yield vars
  File "C:\Python27\lib\site-packages\tornado-2.4.post1-py2.7.egg\tornado\stack_context.py", line 210, in wrapped
    callback(*args, **kwargs)
  File "C:\Python27\lib\site-packages\tornado-2.4.post1-py2.7.egg\tornado\gen.py", line 405, in inner self.set_result(key, result)
  File "C:\Python27\lib\site-packages\tornado-2.4.post1-py2.7.egg\tornado\gen.py", line 335, in set_result
    self.run()
  File "C:\Python27\lib\site-packages\tornado-2.4.post1-py2.7.egg\tornado\gen.py", line 365, in run
    yielded = self.gen.send(next)
  File "build\bdist.win-amd64\egg\facebook\graphapi.py", line 129, in _make_request
    raise GraphAPIError(data)
GraphAPIError: (#200) This API call requires a valid app_id. 
```

当我去 Facebook 时，我看到它是我正在使用的验证密钥，我什至使用生成的令牌（这里是`a`变量），并将其粘贴到 Api Debug，我得到了一切正常：

```
 Valid : True
 Origin : Web
 Scopes : create_note photo_upload publish_actions publish_stream read_stream share_item status_update video_upload 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:59:09.497

添加`self`到`print_callback`.

```
def print_callback(self, data):
    print data
    ioloop.stop()
    graph.get_object('/facebook', callback=print_callback) 
```

# php - Codeigniter HMVC 模块和 javascript 文件

> ID：12767536
> 
> 赞同：3
> 
> 时间：2012-10-07T09:13:29.293
> 
> 标签：php, javascript, codeigniter, hmvc

我刚刚开始在 CodeIgniter 中学习 HMVC。

到目前为止，我一直很喜欢使用模块化控制器，但是当我希望包含 javascript 时，问题就来了。

在我看来，我必须从视图中包含 javascript 文件，而不是包含不太好的小部件，因为我倾向于忘记哪些小部件必须与哪个 javascript 文件一起提供。

有人有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:26:06.117

您应该将资产（css、js、图像）放在应用程序文件夹之外，以便您可以直接访问它们。

因此，您首先使用 base_url() 加载它们，并且 base_url() 在您调用它的任何地方都保持不变。

如果您还想在模块中拆分资产，也许可以创建一个资产文件夹，其中还包含具有模块名称的文件夹，每个文件夹都包含 css、js、images 文件。然后使用`base_url()."/assets/module_name/js/script.js"` 或类似的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-17T09:09:40.850

默认情况下，您无法访问模块文件夹中的文件，因为它受应用程序文件夹中的 .htaccess 保护。

要允许访问模块文件夹中的 assets/public 文件夹，只需在文件夹中添加另一个 .htaccess 并添加以下行。

`Allow From All`

# java - 将对象传递给 Arraylist

> ID：12767546
> 
> 赞同：1
> 
> 时间：2012-10-07T09:15:26.897
> 
> 标签：java, arrays, static, arraylist, pass-by-value

我正在尝试生成数组并根据某些函数计算那里的值。我想将每个生成的数组保存到数组 List PQ 中。

重要的方法是： **init：**启动一系列数组 **计算：**是在此方法中计算数组测量值或值我想通过在 PQ 数组中搜索来检查该数组是否已经计算过，该数组将具有所有先前计算的数组。

糟糕的是，在每个阶段之后`for (j=0;j<s;j++)`， sol[] 对象在数组列表中发生了一些变化，并且数组列表从未更新为新值。

就像 PQ.add(sol) 和 calculate(solution) 之间存在对象链接；

如何删除此链接，即按引用传递并将其转换为按值传递，以便我可以将新数组添加到 PQ Arraylist。

以另一种方式**如何将数组作为值而不是引用传递？** 这是我的代码：

```
ArrayList previous_values=new ArrayList();
ArrayList PQ=new ArrayList();

        void init(int index) 
            {
               int j;
               for (j=0;j<s;j++)
                    {
                    r = j+1;
                    array [index][j]=r*index;
                    solution[j]=array[index][j];
                    }
                f[index]=calculate(solution);}

        double calculate(int sol[]) 
        {

            double r;
            r=search_Previous(sol);
         if(r==-1)  {

             PQ.add(sol);
    r=sol[0]*5;
previous_value.add(r);
    }
        }

        public double search_Previous(int[] arr)
            {
                double d=-1;
                for(int i=0;i<PQ.size();i++)
                {
                    if(equal_arr(arr,(int[])(PQ.get(i))))
                    {
                     return (double)previous_value.get(i) ;  
                    }
                }
                return d;
            }

        public static boolean equal_arr(int[] list1, int[] list2) {

              // Now test if every element is the same
              for (int i = 0; i < list1.length; i++) {
                  if (list1[i] != list2[i])
                      return false; // If one is wrong then they all are wrong.
              }

              // If all these tests worked, then they are identical.
              return true;
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:11:57.877

希望我能得到你的问题

```
.. how to pass array as value instead of reference ? 
```

您需要复制数组。采用`System.arraycopy(sourceArray, 0, targetArray, 0, sourceArray.length);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:17:41.043

```
double calculate(int sol[]) 
{

    double r;
    r=search_Previous_f(sol);
 if(r==-1)  {

     PQ.add(sol);
} 
```

顺便说一句，您没有关闭 if 语句

# android - 透明 Activity 上的透明 SurfaceView

> ID：12767549
> 
> 赞同：0
> 
> 时间：2012-10-07T09:16:08.330
> 
> 标签：android, surfaceview

我有一个大约 30-40% 透明的 Activity，它包含一个扩展 SurfaceView 的自定义视图。一切正常，但是 SurfaceView 的背景不是完全透明的（至少在最初的几秒钟内）。1-2 秒后（使用调试器），我注意到从我的 Canvas 线程调用 onDraw 后 SurfaceView 变得完全透明。

现在我假设问题是；画布正在选择我的活动的透明背景，创建它的位图，然后显示它，从而创建一个双透明覆盖。

我尝试在视图“不可见”时先初始化 SurfaceView，并在第一次 onDraw 后启用它。没有骰子。

有什么建议或问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:20:59.617

我的 SurfaceView 嵌入在 RelativeLayout 视图容器中。通过将此视图的 alpha 参数应用到 255，得到了我正在寻找的结果。

我希望有人遇到同样的情况，这已经解决了他们的问题。

# python - 在jinja2循环中对dict进行排序

> ID：12767550
> 
> 赞同：19
> 
> 时间：2012-10-07T09:16:15.320
> 
> 标签：python, flask, jinja2

我仍在学习 jinja2 和烧瓶，我在 jinja2 中使用 dictsort 时遇到了困难。

所以我将这个 dict 传递到 jinja2 模板中：

```
{'PEDD United': {'id': 37828, 'rank': 12, 'totalpts': 307},'Fc Mbonabushia': {'id': 205633, 'rank': 6, 'totalpts': 356},'FC Slurp': {'id': 933573, 'rank': 11, 'totalpts': 312},'KFC_Overijse': {'id': 38861, 'rank': 5, 'totalpts': 362},'Fc Paris': {'id': 1538051, 'rank': 2, 'totalpts': 396}} 
```

我想要的是创建一个按键“totalpts”的值排序的表。我尝试了各种方法，只是在“排序”时没有考虑总数。

这是我的代码之一：

```
 <table class="table table-bordered">
        {% for team in league %}
            <tr>
                <td>{{team}}</td>
                {% for data in league[team]|dictsort(league[team]['totalpts']) %}
                <td>{{ league[team]['totalpts'] }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
    </table> 
```

在这种情况下，它不会对任何内容进行排序...只需打印表中的值而无需任何顺序...

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-07T10:56:23.893

你这样做的方式是行不通的，因为一旦你使用`{% for team in league %}`，你就已经在使用未排序的 dict 并从中提取键、值对。

我认为`|dictsort`在这种情况下可能无法为您提供帮助，因为您不能按键或值排序，而是按“totalpts”的值（子字典）值排序。

相反，您应该在将此字典传递给模板**之前对其进行排序，方法如下：**

```
>>> from collections import OrderedDict
>>> league={'PEDD United': {'id': 37828, 'rank': 12, 'totalpts': 307},'Fc Mbonabushia': {'id': 205633, 'rank': 6, 'totalpts': 356},'FC Slurp': {'id': 933573, 'rank': 11, 'totalpts': 312},'KFC_Overijse': {'id': 38861, 'rank': 5, 'totalpts': 362},'Fc Paris': {'id': 1538051, 'rank': 2, 'totalpts': 396}}
>>> league = OrderedDict(sorted(league.items(), key= lambda x: x[1]['totalpts'], reverse=True))
>>> print league
OrderedDict([('Fc Paris', {'id': 1538051, 'rank': 2, 'totalpts': 396}), ('KFC_Overijse', {'id': 38861, 'rank': 5, 'totalpts': 362}), ('Fc Mbonabushia', {'id': 205633, 'rank': 6, 'totalpts': 356}), ('FC Slurp', {'id': 933573, 'rank': 11, 'totalpts': 312}), ('PEDD United', {'id': 37828, 'rank': 12, 'totalpts': 307})]) 
```

为了对 dict 进行排序，我们使用 将其转换为 (key ,value) 的元组列表`.items()`。假设 x 是一个这样的元组，x[1] 包含带有 'totalpts' 键的字典。

```
>>> league.items()[0]
('Fc Paris', {'id': 1538051, 'rank': 2, 'totalpts': 396})  # = x 
```

所以现在我们使用`x[1]['totalpts']`,对元组进行`reverse=True`降序排序。

dict 本身无法排序，它是无序的数据类型 - 您可以使用`OrderedDict`，也可以简单地使用元组：

```
>>> sorted(league.items(), key= lambda x: x[1]['totalpts'], reverse=True)
[('Fc Paris', {'id': 1538051, 'rank': 2, 'totalpts': 396}), ('KFC_Overijse', {'id': 38861, 'rank': 5, 'totalpts': 362}), ('Fc Mbonabushia', {'id': 205633, 'rank': 6, 'totalpts': 356}), ('FC Slurp', {'id': 933573, 'rank': 11, 'totalpts': 312}), ('PEDD United', {'id': 37828, 'rank': 12, 'totalpts': 307})] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-11-28T10:20:42.237

[`sort`](https://jinja.palletsprojects.com/en/2.10.x/templates/#sort)您可以使用普通过滤器对字典的项目进行排序。

要按键使用排序`attribute=0`：

```
{% for key, value in data.items()|sort(attribute='0') %}
  {{ key }}: {{ value }}
{% endfor %} 
```

按值排序`attribute=1`

```
{% for key, value in data.items()|sort(attribute='1') %}
  {{ key }}: {{ value }}
{% endfor %} 
```

要按值的属性排序，请使用`attribute=1.name`

```
{% for key, value in data.items()|sort(attribute='1.name') %}
  {{ key }}: {{ value }}
{% endfor %} 
```

那就是问题中的循环将转化为

```
{% for team_name, team_attrs in league.items()|sort(attribute='1.totalpts') %}
  <td>{{ team_attrs.totalpts }}</td>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T09:23:26.610

您可以使用以下命令将其排序到有序列表[`sorted`](http://docs.python.org/library/functions.html#sorted)：

```
league = sorted(league, key= lambda x: -league[x]['totalpts']) 
```

# android - 仅显示第一个片段

> ID：12767552
> 
> 赞同：3
> 
> 时间：2012-10-07T09:16:17.910
> 
> 标签：android, android-fragments

我正在尝试使用 2 个片段创建一个活动

*   第一个片段显示使用 LisFragment 的画廊列表
*   第二个片段显示在第一个片段中选择的画廊的预览图像

当我在视图中声明片段时，它可以工作。但现在我想动态管理片段：

```
GalleriesFragment gfs = new GalleriesFragment();
GalleryFragment gf = new GalleryFragment();
FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.add(R.id.layout_m,gfs);
ft.add(R.id.layout_m,gf);
ft.commit(); 
```

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" 
    android:id="@+id/layout_m">
</LinearLayout> 
```

这样做时，只显示添加的第一个片段，我尝试在添加片段时颠倒它们的顺序......

当我在布局时，我可以设置我的片段宽度：

```
android:layout_width="400dp" 
```

现在我有 2 个问题：

1.  如何让我的 2 个片段显示？
2.  如何设置第一个片段和第二个片段的宽度（以编程方式？）以填充剩余宽度？

谢谢你的帮助！

PS：

`GalleriesFragment`没有布局，也没有覆盖`onCreateView`，但`ArrayAdapter`对于每一行都有一个这样的返回视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/idimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10sp"
        android:layout_marginLeft="10sp"
        android:layout_marginTop="10sp"
        android:contentDescription="preview"
         >
    </ImageView>

    <LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/texttitre"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5sp"
            android:layout_marginRight="7sp"
            android:layout_marginTop="10sp"
            android:background="@layout/roundcorner"
            android:gravity="center"
            android:text="Title here" >
        </TextView>

        <TextView
            android:id="@+id/itemdescription"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10sp"
            android:layout_marginRight="10sp"
            android:text="description" >
        </TextView>

    </LinearLayout>

</LinearLayout> 
```

图库片段：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Gallery
        android:id="@+id/gallery"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

更新 2：

`onCreateView`我在`GalleriesFragment`课堂上添加了一个：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        FrameLayout.LayoutParams lparams =  new FrameLayout.LayoutParams(400, LayoutParams.MATCH_PARENT);
        container.setLayoutParams(lparams);
        return super.onCreateView(inflater, container, savedInstanceState);
} 
```

这修复了第一个片段的宽度，但第二个片段仍然没有显示......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:29:28.793

> 如何让我的 2 个片段显示？

您当前的方法将使提供给该`add`方法的第一个片段占用容器布局的所有空间。一种解决方案是使用为添加的两个片段中的每一个保留空间的布局，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_m"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/frame1"
        android:layout_width="100dp"
        android:layout_height="match_parent" />

    <FrameLayout
        android:id="@+id/frame2"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

然后在代码中：

```
ft.add(R.id.frame1, gfs);
ft.add(R.id.frame2, gf);
ft.commit(); 
```

> 如何设置第一个片段和第二个片段的宽度（以编程方式？）以填充剩余宽度？

片段不仅仅是普通视图，一种方法是使用您的单个`LinearLayout`布局文件并将`LayoutParams`片段视图的设置为`onActivityCreated`：

```
getView().setLayoutParams(new LinearLayout.LayoutParams(100, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

当然，这会使您的片段绑定到父容器，我也不知道这在整个片段系统中的效果如何。

# objective-c - 使用 NSTextfield 打印崩溃

> ID：12767556
> 
> 赞同：0
> 
> 时间：2012-10-07T09:16:42.810
> 
> 标签：objective-c, printing, nstextfield

我有一个适用于翼型坐标的应用程序（Xcode4.5、10.8）。翼型显示在屏幕上并且可以打印。现在我想在打印方法中在打印的翼型上添加一个标题。我有一个 NSView Druckfeld，我在其中添加了带有翼型图的子视图。然后我添加标题

```
NSTextField* Titelfeld = [[NSTextField alloc]initWithFrame:Titelrect];
NSFont* TitelFont=[NSFont fontWithName:@"Helvetica" size: 14];
[Titelfeld setFont:TitelFont];  
[Titelfeld setStringValue:@"Profil"];
[Druckfeld addSubview:Titelfeld];
[Titelfeld release]; 
```

标题显示在打印对话框中，但点击 OK 按钮让应用程序跳转到返回 NSApplicationMain，显示警报“处理页面：1”。日志窗口中不显示任何内容。在控制台中，我阅读了 07.Oktober.12 10:47:25.074 com.apple.debugserver-194[85172]: 1 +0.000000 sec [14cb4/0303]: error: ::ptrace (request = PT_THUPDATE, pid = 0x14cb5 , tid = 0x1c07, 信号 = 0) err = 资源繁忙 (0x00000010)

cups access_log 写道： localhost - - [07/Oct/2012:10:36:09 +0200] "POST / HTTP/1.1" 200 126367 CUPS-Get-Document 成功-ok localhost - - [07/Oct/2012:10 :36:32 +0200]“POST /printers/Laser_home HTTP/1.1”200 1713 创建-作业成功-确定

cups error_log 写道：E [07/Oct/2012:10:37:13 +0200] [Job 377] 中止作业，因为它没有文件。

但是： - 使用相同的代码在屏幕上添加标题可以正常工作。- 在 Druckfeld 做同样的事情

```
 NSImageView* Bildfeld;
NSRect Bildrect = NSMakeRect(230, 80, 60, 60);
Bildfeld = [[NSImageView alloc]initWithFrame:Bildrect];
[Bildfeld setImage:[NSImage imageNamed:@"home"]];
[Druckfeld addSubview:Bildfeld];
[Bildfeld release]; 
```

打印良好。

任何想法出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:37:01.113

Your german right? ;) Sorry, I don't really understan your problem, but two things: start with a small Character for variables: titleFeld instead of Titlefeld. Capital letters at beginning are mostly objects, your code has to have a good view, otherwise you don't know what you did when you watch your code later ;) 2\. you should use english names titleField... :)

But this is your choice i just suggest

# objective-c - 在 iOS 应用中生成二维码

> ID：12767558
> 
> 赞同：2
> 
> 时间：2012-10-07T09:17:37.147
> 
> 标签：objective-c, ios, qr-code

在我的应用程序中，我希望生成一个 QR 码。现在我已经在网上看了几门课，但似乎都没有，包括这个[https://github.com/myang-git/QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)似乎有问题（每次我尝试运行它时都会出错）。

制作二维码的简单直接方法是什么？我在这里真的很绝望，现在已经在网上寻找了几个小时。

# c# - 为什么从 Serial Port Null 接收数据？

> ID：12767563
> 
> 赞同：2
> 
> 时间：2012-10-07T09:18:12.090
> 
> 标签：c#, visual-studio-2010, event-handling, serial-port, grasshopper

下面的代码构建没有错误，与设备的连接似乎也可以工作，尽管我没有从设备得到任何反馈。

在 VS 上，我在该行放置了一个断点`myReceivedLines = sp.ReadExisting();`，变量`myReceivedLines`返回为空。

在另一个连接到同一设备的类似程序上，出现了几行反馈（见下文），为什么在我的情况下这个变量为空？

**出现在其他程序上的行：**

```
Connecting...
start
Printer is now online.
echo:Marlin: 1.0.0 RC2
echo: Last Updated: 2012-05-22-1 | Author: eMAKER
...etc... 
```

**代码：**

```
 //Fields
    string myReceivedLines;

    //subscriber method for the port.DataReceived Event
    private void DataReceivedHandler(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        myReceivedLines = sp.ReadExisting();
    }

       protected override void SolveInstance(IGH_DataAccess DA)
      {

        List<string> gcode = new List<string>();
        DA.GetDataList(0, gcode);
        string selectedportname = default(string);
        DA.GetData(1, ref selectedportname);
        int selectedbaudrate = default(int);
        DA.GetData(2, ref selectedbaudrate);
        bool connecttodevice=default(bool);
        DA.GetData(3, ref connecttodevice);
        bool sendtoprint= default(bool);
        DA.GetData(4, ref sendtoprint);

        if (!DA.GetDataList(0, gcode)) return;
        if (!DA.GetData(1, ref selectedportname)) return;
        if (!DA.GetData(2, ref selectedbaudrate)) return;
        if (!DA.GetData(3, ref connecttodevice)) return;
        if (!DA.GetData(4, ref sendtoprint)) return;

        SerialPort port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One); //Create the serial port
        port.DtrEnable = true;   //enables the Data Terminal Ready (DTR) signal during serial communication (Handshaking)
        port.Open();             //Open the port
        port.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

        if (gcode == null)
        {
            AddRuntimeMessage(GH_RuntimeMessageLevel.Warning, "Specify a valid GCode");
            return;
        }

        if (connecttodevice == true)
        {
            DA.SetDataList(0, myReceivedLines);
        }
        else
        {
            port.Close();
        }

            if (sendtoprint == true)
            {
                foreach (String s in gcode)
                {
                    port.WriteLine(s);
                }
            }

                  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:00:01.387

```
 if (connecttodevice == true)
    {
        DA.SetDataList(0, myReceivedLines);
    } 
```

SerialPort.ReadExisting() 不能返回 null，最坏的情况是你会得到一个空字符串。简单的解释是您在收到任何数据之前使用*myReceivedLines 。***在这种情况**下，您很可能在打开端口后立即使用它。*在您使用myReceivedLines*之前 DataReceived 触发的可能性很小。该代码非常难以理解，您需要对其进行大量修改。请记住，串行端口将在完全不可预测的时刻接收数据。您需要让 DataReceived 事件处理程序推送进度。

# java - java二叉树插入函数非递归

> ID：12767564
> 
> 赞同：1
> 
> 时间：2012-10-07T09:18:22.933
> 
> 标签：java, tree, non-recursive

我编写了一个代码，用于向二叉树插入按名称排序的元素泛型类型。但不要认为它是正确的。

```
public boolean insert(E e) {
    BTNode temp = root;
    if (root == null) {
        root.setElement(e);
    }
    while (temp != null)
    if (temp.element().getClass().getName().compareTo(e.getClass().getName()) < 0) {
        temp = temp.getRight();
    } else {
        temp = temp.getLeft();
    }
    temp.setElement(e);
    return true;
} 
```

你能建议我更正吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:05:52.890

插入需要创建一个新节点。我现在不知道如何创建它们，因为我没有看到构造函数，但我建议以下内容：

```
public boolean insert(E e) {        
    if (root == null) {
        root = new BTNode();
        root.setElement(e); //how would this work with a null root?
        return true; //that's it, we're done (when is this ever false by the way?)
    }
    BTNode current = root; 
    while (true) { //brackets! indenting is important for readabilty
        BTNode parent=current;
        if (current.element().getClass().getName().compareTo(e.getClass().getName()) < 0) {
            current = current.getRight();
            if(current==null) { //we don't have a right node, need to make one
              current = new BTNode();
              parent.setRight(current);
              break; //we have a new node in "current" that is empty
            }
        } else { 
            current= current.getLeft();
            if(current==null) { //we don't have a left node, need to make one
              current = new BTNode();
              parent.setLeft(current);
              break;  //we have a new node in "current" that is empty
            }
        }
    }
    current.setElement(e); 
    return true; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-17T22:26:20.453

```
public Boolean add(int data){
    Node node = new Node(data);
    if(isEmpty()){
        root = node;
    }else{
        Node temp = root;
        while(true){
            if(data < temp.getData()){
                if(temp.getLeft() != null)
                    temp = temp.getLeft();
                else
                    break;
            }else{
                if(temp.getRight() != null)
                    temp = temp.getRight();
                else
                    break;
            }
        }
        if(data < temp.getData())
            temp.setLeft(node);
        else
            temp.setRight(node);
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-07T09:54:09.893

正如 amadeus 所提到的，while 循环的末尾不应有分号：

```
BTNode temp = root;
    if (root == null) {
        root.setElement(e);
        return;
    }
    while (temp != null)
     {
       if (temp.element().getClass().getName().compareTo(e.getClass().getName()) < 0) {
           if(temp.getRight() != null)
             temp = temp.getRight();
           else
             {
               temp.createRight(e);
               temp = null; //or break
             }
       } else {
           if(temp.getLeft() != null)
             temp = temp.getLeft();
           else
             {
               temp.createLeft(e);
               temp = null; //or break
             }
       }
     }

    return true; 
```

# javascript - jScrollPanel jQuery cotom 滚动重新渲染

> ID：12767565
> 
> 赞同：0
> 
> 时间：2012-10-07T09:18:29.890
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-selectors

如果我安装 jScrollPanel 它可以正常工作，但是当我尝试从 ajax 捕获内容时，它不会生成滚动条，因为它仍然认为其中没有内容。

所以我的问题是，我怎样才能重新渲染 jScrollPanel，所以它现在必须打开/关闭滚动条？

这是我的捕捉脚本：

```
 "chatlog": function() {
      $.ajax({url: '?chatlog=&' + new Date(),success: function(data){
         if ( nagoom.trim(data) != "") {
            $('#__chatlog').html(data);

        }
      }});
     } 
```

这是我安装它的地方：

```
$('aside .chat-entity').jScrollPane({
        showArrows: true,
        verticalGutter: -13,
        autoReinitialise: true
}); 
```

我正在使用这个脚本[http://jscrollpane.kelvinluck.com/less_basic.html](http://jscrollpane.kelvinluck.com/less_basic.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:36:56.107

显然 API 对象上有一个 reinitialise 方法。将此包含在您的响应函数中。更多信息可以在[这里找到](http://jscrollpane.kelvinluck.com/api.html)

编辑：我以前没有使用过这个脚本，所以我犹豫是否提供代码，但我认为它会像这样工作：

```
success: function(data){
     if ( nagoom.trim(data) != "") {
        $('#__chatlog').html(data);
        jScrollPaneObjectReference.data('jsp').reinitialise();
    }
  } 
```

其中 jScrollPaneObjectReference 是您构建面板时返回的对象

编辑：我会进一步澄清。jScrollPaneObjectReference 应该引用执行此操作时返回的对象：

```
$('aside .chat-entity').jScrollPane({ showArrows: true, verticalGutter: -13, autoReinitialise: true }); 
```

尝试将其放在代码的顶部：

```
window.jScrollPaneObjectReference = $('aside .chat-entity').jScrollPane({ showArrows: true, verticalGutter: -13, autoReinitialise: true }); 
```

编辑：尝试删除 autoReinitialise 参数。

# c++ - Rgd：如何初始化类私有的默认值

> ID：12767566
> 
> 赞同：1
> 
> 时间：2012-10-07T09:18:37.393
> 
> 标签：c++

下面是我的 .h 文件

```
#include <iostream>
#include <string>

using namespace std;

class ClassTwo
{
private:
string sType;
int x,y;
public:
void setSType(string);
void setX(int);
void setY(int);

string getSType();
int getX();
int getY();
}; 
```

我想构造 2 构造函数。

其中构造函数 1 将无参数，将所有 int 值初始化为 0，将字符串初始化为空字符串。

构造函数 2 将使用 get set 方法接收参数，即 sType、x 和 y。

但我如何做到这一点。我应该在我的 cpp 文件或 .h 文件中对此进行编码吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:28:43.390

对于默认构造函数：

```
ClassTwo() : sType(), x(), y() {} 
```

为了清楚起见，您可以选择更明确的初始化：

```
ClassTwo() : sType(""), x(0), y(0) {} 
```

也可以省略字符串的初始化，默认为`""`.

对于第二个构造函数，最好在没有设置器的情况下实现：

```
ClassTwo(const std::string& s, int x, int y) : sType(s), x(x), y(y) {} 
```

是否在标头或 .cpp 中实现取决于您。我认为在标头中实现如此简单的构造函数没有任何缺点。

我建议您对数据成员使用命名约定。诸如`x`和之`y`类的名称可能会导致代码中其他地方发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:30:34.640

标题用于定义。包含标头的代码不必知道任何实现（除非您使用的是不同的模板......）

无论如何，2个构造函数：

```
public:
ClassTwo() : sType(""), x(0), y(0) {}
ClassTwo(string _type) : sType(_type), x(0), y(0) {} 
```

# c# - ASP.Net MVC 4 中缺少 MvcMailer Send() 扩展方法

> ID：12767567
> 
> 赞同：7
> 
> 时间：2012-10-07T09:18:48.207
> 
> 标签：c#, .net-4.0, asp.net-mvc-4, mvcmailer

在将我的一个网站升级到 MVC 4 并升级我在 NuGet 中的所有包之后，我似乎丢失了来自 NuGet 的 MvcMailer 包的 Send() 扩展方法。除了升级项目所需的代码之外，我没有进行任何代码更改，并且我有：

```
using Mvc.Mailer; 
```

在我的代码文件的顶部。

有人可以告诉我这里可能发生了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T11:10:12.463

好的，我看了这篇文章后想通了： [https ://github.com/smsohan/MvcMailer/issues/68](https://github.com/smsohan/MvcMailer/issues/68)

基本上，他们已经删除了扩展方法`MailMessage`并添加了一个名为的新类`MvcMailMessage`，您的邮件程序应该返回该类。

# php - 我可以让我的 wp-login.php 在 Wordpress 中作为索引运行吗？

> ID：12767570
> 
> 赞同：0
> 
> 时间：2012-10-07T09:18:59.860
> 
> 标签：php, wordpress, .htaccess, redirect

我想知道我是否可以让我的 wp-login.php 像 WordPress 中的 index.php 一样运行？如果用户已经登录，它会转到 index.php 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T09:26:10.193

```
<?php if ( !is_user_logged_in() ) { header('location: wp-login.php'); } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:29:15.997

添加到wp-config.php的**底部：**

```
if(!is_user_logged_in()){header("Location: http://yoursite.com/wp-login.php");} 
if(is_user_logged_in()){header("Location: http://yoursite.com");} 
```

# symbian - Symbian 应用程序生命周期：应用程序从未被杀死？

> ID：12767574
> 
> 赞同：0
> 
> 时间：2012-10-07T09:20:22.120
> 
> 标签：symbian, application-lifecycle

来自 Android/WP7 并曾参与过 Symbian 项目，现在我想准确了解 Symbian App 的生命周期。我想了解应用程序是如何被杀死的……如果它们是……

我找到了这个：

> “Symbian 平台是一个现代抢占式多任务操作系统。应用程序在它们自己的进程中创建，在单个主线程中运行。内核根据优先级抢先调度系统中的所有线程。虽然可以创建辅助线程，Symbian 强烈鼓励应用程序使用活动对象协同执行多任务。”。[参考链接](http://www.developer.nokia.com/Community/Wiki/Using_Qt_and_Symbian_C++_Together#Multi-tasking_on_the_Symbian_platform)
> 
> “（..）应用程序可能同时启动并运行，用户可以在活动应用程序之间切换。当发生异步事件时，正在运行的应用程序移动到后台，但仍保持活动状态”。[参考链接](http://windowsphone.interoperabilitybridges.com/articles/qt-to-wp7-chapter-5-introducing-windows-phone-application-life-cycle)

在我看来，应用程序永远不会被杀死，即使它们在后台..

我的问题是：如果系统没有杀死它们，系统如何处理 RAM 问题？可能的电池耗尽怎么办？这是否意味着 Symbian 允许启动每个应用程序，直到没有足够的内存？在某些情况下可能会破坏应用程序的取消/返回键的使用是否有特定含义？在 UIQ 框架中，我记得有一个 lowMemory() 回调，但从未使用过。

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:50:01.147

Symbian 应用程序确实永远不会被杀死。这使您可以让多个应用程序并行运行而不会出现问题。每个应用程序当然应该提供关闭应用程序的退出命令。Back/Hide 命令只是让应用程序运行并将用户带回菜单。此外，每个编写良好的应用程序还应该管理他的后台任务，并允许在需要时停止它们。

仅供参考，在 Symbian 中，可能有几个后台任务正在运行，这些任务会在手机开机时自动启动。您可以在询问进程列表时获取它们的列表。如果您的应用程序具有足够的功能，您还可以终止任何进程或应用程序。

# ruby - savon 嵌套非唯一标签

> ID：12767577
> 
> 赞同：0
> 
> 时间：2012-10-07T09:20:51.483
> 
> 标签：ruby, savon

我正在制作一个 savon 客户端来使用加拿大邮政网络服务

我需要生产

```
<options>
<option>
<option-code>SO</option-code>
</option>
<option>
<option-code>PA19</option-code>
</option>
</options> 
```

我通过 ruby​​ 哈希构建这一切，解决方案可能是使用 Builder，希望我可以使用我拥有的哈希

到目前为止我得到了

```
myhash[:shipment]['delivery-spec'][:options]= [
:option=>{'option-code'=>'SO'}, 
:option=>{'option-code'=>'PA19'}
] 
```

这只会产生一个选项，最后一个选项，因为显然它是相同的键！我尝试了其他一些组织结构的方法，但是 wsdl 提交失败了！

任何见解表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:43:40.650

在您的“选项”哈希中，您可以创建许多传递数组的类似选项，例如：

```
myhash[:shipment]['delivery-spec'][:options]= [
  :option=>['option-code'=>'SO', 'option-code'=>'PA19']
] 
```

你已经尝试过这样的事情了吗？

# python - lambda 不能有 2 个以上的返回值？

> ID：12767579
> 
> 赞同：2
> 
> 时间：2012-10-07T09:21:24.527
> 
> 标签：python, lambda

```
>>> def itself_and_plusone(x):
...     return x, x+1
... 
>>> itself_and_plusone(1)
(1, 2)

>>> (lambda x: x,x+1)(10)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'x' is not defined 
```

为什么？和 lambda 的解决方法？不是由

```
>>> (lambda x: (x,x+1))(10)
(10, 11) 
```

因为它返回一个元组（或列表..）并且需要解包元组

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T09:24:53.183

没有括号，它的解释如下：

```
((lambda x: x),x+1)(10) 
```

这失败了，因为第二个`x`在 lambda 表达式之外。即使`x`已定义，它仍然会失败，因为您不能像使用函数一样使用元组。

这个简单的变化显示了正在发生的事情：

```
>>> x=42
>>> (lambda x: x,x+1)
(<function <lambda> at 0x00000000022B2648>, 43) 
```

请注意， 43 是因为使用`x`了外部作用域中的 ，而不是`x`lambda 函数中的 。

正确的写法是`lambda x: (x,x+1)`。正如您所指出的，这确实返回了一个元组，但您的原始函数也是如此：

```
>>> type(itself_and_plusone(10))
<class 'tuple'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T09:28:50.350

在您的第一个示例中，元组是隐式的；当python看到表达式中的逗号时，它会为你想象括号；它对任何表达式都这样做，而不仅仅是从函数返回时：

```
>>> 10, 10
(10, 10) 
```

但是在您的 lambda 示例中，您必须使它们显式，因为 python 将整个表达式视为一个新元组（包含一个 lambda 和一个`x + 1`表达式）：

```
>>> (lambda x: x, 10)
(<function <lambda> at 0x10f331b90>, 10)
>>> lambda x: x, 10
(<function <lambda> at 0x10f331aa0>, 10)
>>> lambda x: (10, 10)
<function <lambda> at 0x10f314ed8> 
```

# c++ - C++ Linux system() 结合 printf() 输出奇怪；

> ID：12767580
> 
> 赞同：1
> 
> 时间：2012-10-07T09:21:28.903
> 
> 标签：c++, linux, system, printf, cpu

我想在 Linux 上用 C++ 获取 CPU 的名称和时钟速度。但到目前为止，对我来说效果并不好。现在我正在使用这段代码：

```
printf("\033[1;32m[ OK ]\033[0m Initializing...\n");
printf("\033[1m[INFO]\033[0m CPU name: ");
system("grep -i --color 'model name' /proc/cpuinfo | uniq | sed -e 's/model name//' |    sed -e 's/: //' | sed -e 's/          //' | sed -e 's/@.*//'");
printf("\n");
printf("\033[1m[INFO]\033[0m CPU speed: ");
system("grep -i --color 'model name' /proc/cpuinfo | uniq | sed -e 's/.*@//'");
printf("\n"); 
```

现在，所需的输出应该（在我的机器上）是这样的：

```
[ OK ] Initializing...
[INFO] CPU name: Intel(R) Xeon(R) CPU X5365  
[INFO] CPU speed: 3.00GHz 
```

但这不是它给我的。它给出了这个奇怪的结构：

```
[ OK ] Initializing...
     Intel(R) Xeon(R) CPU X5365  
[INFO] CPU name: 
 3.00GHz
[INFO] CPU speed: 
```

有谁知道该怎么做？反正Tnx。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T09:27:18.583

您需要在调用之前刷新输出流`system`，否则可以缓冲打印输出的字符串。打印`\n`刷新（假设`stdout`是行缓冲，如果您正在写入终端，通常会出现这种情况），但打印没有该行的行不一定会刷新。

尝试添加：

```
fflush(stdout); 
```

在你`system`打电话之前。

（`fflush`在`<cstdio>`。）

# mysql - 如何在 xml 文件中导出 Wordpress 用户？

> ID：12767582
> 
> 赞同：1
> 
> 时间：2012-10-07T09:22:07.303
> 
> 标签：mysql, xml, wordpress, export

我正在尝试将 Wordpress 站点移动到新系统。为此，所有的帖子、评论和用户都需要导出为 xml 文件。

导出帖子和反馈已经在 Wordpress 导出菜单中给出。

我知道，我可以直接从数据库中导出用户。

我想知道，除了有人试过之外，还有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:27:24.143

使用 phpmyadmin，MySQL 数据库管理工具，它应该在您的虚拟主机上可用，或者您可以自己安装：[http ://www.phpmyadmin.net/home_page/index.php](http://www.phpmyadmin.net/home_page/index.php)

以 CSV、XML、SQL 等格式导出。

# wildcard - 在 robots.txt 中使用通配符禁止长网址

> ID：12767585
> 
> 赞同：1
> 
> 时间：2012-10-07T09:23:06.593
> 
> 标签：wildcard, robots.txt

我有一种情况，我需要禁止在所有具有相同模式的特定页面上进行爬网，例如：

```
/folder1/folder2/folder3/review 
```

哪里`/folder1/folder2/folder3/`是列表，添加`/review`将是我想要禁止爬行的内容。

添加此行`robots.txt`是否有效并在评论页面上而不是列表或其他任何内容上被阻止？

```
Disallow: /folder1/*/*/review 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:26.430

双 * 是多余的。一个简单的

> /folder1/*/评论

甚至

> /*/审查

会做。

如果您试图声明“review” URL 之前**必须**有一个 3 个文件夹的长路径，那么我认为您不能这样做是 robots.txt。至少不使用通配符，因为 * 可以表示任何字符串和任意数量的文件夹。

尝试在 htaccess 中使用 RegEx。

# algorithm - Shell排序的时间复杂度？

> ID：12767588
> 
> 赞同：7
> 
> 时间：2012-10-07T09:23:46.493
> 
> 标签：algorithm, big-o, time-complexity, shellsort

首先，这是我的 Shell 排序代码（使用 Java）：

```
public char[] shellSort(char[] chars) {
    int n = chars.length;
    int increment = n / 2;
    while(increment > 0) {
        int last = increment;
        while(last < n) {
            int current = last - increment;
            while(current >= 0) {
                if(chars[current] > chars[current + increment]) {
                    //swap
                    char tmp = chars[current];
                    chars[current] = chars[current + increment];
                    chars[current + increment] = tmp;
                    current -= increment;
                }
                else { break; }
            }
            last++;
        }
        increment /= 2;
    }
    return chars;
} 
```

这是 Shell 排序的正确实现吗（暂时忘记最有效的间隙序列 - 例如，1,3,7,21...）？我问是因为我听说 Shell 排序的最佳情况时间复杂度是 O(n)。（参见[http://en.wikipedia.org/wiki/Sorting_algorithm](http://en.wikipedia.org/wiki/Sorting_algorithm)）。我看不到我的代码实现了这种效率水平。如果我向其中添加启发式方法，那么是的，但就目前而言，没有。

话虽如此，我现在的主要问题是 - 我很难为我的 Shell 排序实现计算 Big O 时间复杂度。我确定最外层循环为 O(log n)，中间循环为 O(n)，最内层循环也为 O(n)，但我意识到内部两个循环实际上不是 O( n) - 他们会比这少得多 - 他们应该是什么？因为显然这个算法比 O((log n) n^2) 运行效率更高。

非常感谢任何指导，因为我很迷茫！:P

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T18:36:17.457

您实现的最坏情况是 Θ(n^2)，最好情况是 O(nlogn)，这对于 shell 排序是合理的。

**最好的情况∊ O(nlogn)：**

最好的情况是数组已经排序。这意味着内部 if 语句永远不会为真，从而使内部 while 循环成为恒定时间操作。使用您用于其他循环的边界给出 O(nlogn)。通过使用恒定数量的增量可以达到 O(n) 的最佳情况。

**最坏情况∊ O(n^2)：**

给定每个循环的上限，在最坏的情况下，您会得到 O((log n)n^2)。但是为间隙大小 g 添加另一个变量。内部 while 所需的比较/交换次数现在 <= n/g。中间的比较/交换次数 <= n^2/g。将每个间隙的比较/交换次数的上限相加：n^2 + n^2/2 + n^2/4 + ... <= 2n^2 ∊ O(n^2)。这与您使用的间隙的已知最坏情况复杂性相匹配。

**最坏情况∊Ω(n^2)：**

考虑所有偶数定位元素都大于中位数的数组。奇数和偶数元素在我们达到最后一个增量 1 之前不会进行比较。最后一次迭代所需的比较/交换次数是 Ω(n^2)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-23T03:53:03.117

**插入排序**

[![在此处输入图像描述](../Images/1767694b67293d34965a76a4b06d60be.png)](https://i.stack.imgur.com/dpryn.png)

如果我们分析

```
static void sort(int[] ary) {
    int i, j, insertVal;
    int aryLen = ary.length;
    for (i = 1; i < aryLen; i++) {
        insertVal = ary[i];
        j = i;
        /*
         * while loop exits as soon as it finds left hand side element less than insertVal
         */
        while (j >= 1 && ary[j - 1] > insertVal) { 
            ary[j] = ary[j - 1];
            j--;
        }
        ary[j] = insertVal;
    }
} 
```

因此，在一般情况下，while 循环将在中间退出

即 1/2 + 2/2 + 3/2 + 4/2 + .... + (n-1)/2 = Theta((n^2)/2) = Theta(n^2)

您在这里看到我们实现了 (n^2)/2，即使除以 2 并没有更大的区别。

**Shell Sort**只不过是通过使用n/2、n/4、n/8、....、2、1 之类的**间隙**进行插入排序，这意味着它利用了插入排序的最佳情况复杂性（即 while 循环退出）开始发生一旦我们在插入元素左侧找到小元素，就会很快，因此它加起来就是总执行时间。

n/2 + n/4 + n/8 + n/16 + .... + n/n = n(1/2 + 1/4 + 1/8 + 1/16 + ... + 1/n ) = nlogn (谐波级数)

因此它的时间复杂度接近 n(logn)^2

# mysql - 存储琐事替代品的最佳方式？

> ID：12767590
> 
> 赞同：1
> 
> 时间：2012-10-07T09:23:59.260
> 
> 标签：mysql, sql, database, data-structures

我正在创建一个应用程序，它向用户提出问题并要求以国家/地区的形式给出答案。

例如：*埃菲尔铁塔在哪里？*

向用户展示了多种选择，比如说 10 个不同的国家。

当我想将每个答案存储到 mySQL 数据库时，问题就出现了。我有一张包含所有国家/地区的表格，需要存储其中哪些国家/地区包含在问题中。但是，在这种情况下，这样做会为一个已回答的问题创建 10 个数据库行。我一直在考虑将包含的国家/地区存储为位掩码，但是对于 150 多个可能的国家/地区，单个位掩码是不够的。

非常感谢任何有关存储数据的好方法的帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:38:15.473

我只是将关系存储在您建议的表格中。即，三个表，其中第一个包含问题（Id，question_text，..），第二个表包含所有国家（Id，name，..），第三个表包含说明哪个国家是哪个问题的选项的关系(question_id, country_id)。就像您说的那样，这在关系表中为一个问题提供了十行，但是您真的在这里面临存储空间或性能问题吗？

如果你有 10k 个这样的问题，它仍然只有 100k 行并且不到 1 MB 的数据。问题本身将拥有比这更多的数据，因此据我所知，问题与国家之间的关系应该不是问题。

# jakarta-ee - 为 Apache Shiro 创建自定义登录页面 + bean

> ID：12767592
> 
> 赞同：0
> 
> 时间：2012-10-07T09:24:11.597
> 
> 标签：jakarta-ee, primefaces, shiro

我有：

1.  Netbeans 7.2 中的 Java EE Web 应用程序项目。Shiro-Web 已安装并使用 INI 文件中的标准设置运行良好：用户会自动重定向到标准 login.jsp 页面，在那里他们可以毫无问题地登录。

我想：

1.  创建自定义登录页面 login.xhtml，使用 PrimeFaces 标记进行注释，其中登录过程由支持 bean 处理。

我需要：

1.  了解需要在此登录 bean 中执行的步骤。目前，我已经实现了一个工作领域，并且能够对用户进行身份验证：

    ```
    UsernamePasswordToken currentUserToken = 
       new UsernamePasswordToken(userEmail, userPassword);

    try {
        SecurityUtils.getSubject().login(currentUserToken);
    }
    catch(UnknownAccountException uae) {

        // TODO: Notify user that no such account exists
    }
    catch(IncorrectCredentialsException ice) {
        // TODO: Notify user that login attempt failed due to bad credentials
    }

    // TODO: How to set up user session an everything else, if login succeeded? 
    ```

    但是，我需要采取哪些额外步骤来确保用户会话（以及其他所有内容）也正确设置？我想以相同的状态结束，就好像我使用了标准的 Shiro 登录功能（会话设置、适当的设置设置等）。

2.  最终，了解如何配置 Shiro NOT 过滤掉登录页面中的 JSF 标签。目前，呈现默认为标准 HTML，所有图形好东西都消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:25:23.287

JSF 处理您的 DefaultWebEnvironment，因此您需要扩展 EnvironmentLoadListener 并将您的领域添加到其中。

```
public class CdiEnvironmentLoaderListener extends EnvironmentLoaderListener {

    //this is your implementation that extends Authorizing Realm
    ShiroRealm shiroRealm = null; 

    @Override
    protected WebEnvironment createEnvironment(ServletContext sc) {
        WebEnvironment environment = super.createEnvironment(sc);
        shiroRealm = new ShiroRealm();

        RealmSecurityManager rsm = (RealmSecurityManager) environment
            .getSecurityManager();

        HashedCredentialsMatcher matcher = new HashedCredentialsMatcher();
        matcher.setHashAlgorithmName(Sha512Hash.ALGORITHM_NAME);

        shiroRealm.setCredentialsMatcher(matcher);

        rsm.setRealm(shiroRealm);

        ((DefaultWebEnvironment) environment).setSecurityManager(rsm);

        return environment;
    }
} 
```

在您的 web.xml 中添加自定义侦听器，以及来自 Web 示例的默认过滤器和过滤器映射。

```
<listener>
    <listener-class>com.company.security.CdiEnvironmentLoaderListener</listener-class>
</listener> 
```

使用自定义 JSF 2.0 标记库。在这里找到 [http://deluan.github.com/shiro-faces/](http://deluan.github.com/shiro-faces/)

来源：

[Apache Shiro“使用 JSF 2.0”！进展如何？](https://stackoverflow.com/questions/6805846/apache-shiro-with-jsf-2-0-how-does-it-go)

[http://shiro-user.582556.n2.nabble.com/Shiro-in-CDI-JPA2-JSF2-project-td7577437.html](http://shiro-user.582556.n2.nabble.com/Shiro-in-CDI-JPA2-JSF2-project-td7577437.html)

# iphone - Unity3d 和 iPhone Objective-c？

> ID：12767596
> 
> 赞同：3
> 
> 时间：2012-10-07T09:24:24.287
> 
> 标签：iphone, objective-c, unity3d

嗨，我是 Unity3d 的新手，我已经用 Objective-c 写了一年了。是否可以在 Objective-c 中编写 Unity3d 应用程序，如果可以，我该如何开始？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:05:45.683

Unity 使用 Mono，它的语言是 C#、JavaScript、Boo 和 C++ 在 iOS 上，您可以将 Unity 与本机库和框架链接。所以你可以在 Unity 代码中使用 Objective-C。

但它更多地与重用 Ad Network 横幅库有关。

游戏代码用C#、JavaScript编写更方便

如果你想开发 Unity 游戏，那么你必须使用 C#、JavaScript，但你仍然可以重用一些 Objective-C 代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-07T09:33:05.107

我猜这是不可能的。Unity 3D 适用于 Java 和 C++。但是您可以为 iOS 编写 Unity 3D 应用程序，为 iOS 编译:)

# javascript - 存储在 javascript 数组中与（LocalStorage 和 IndexDB）

> ID：12767598
> 
> 赞同：0
> 
> 时间：2012-10-07T09:24:52.340
> 
> 标签：javascript, local-storage

将值直接存储在 Javascript 数组中与将它们存储在客户端替代方案（如 LocalStorage 或 IndexDB）中有何不同。

在这两种情况下存储值的位置。什么是限制。

我的用例是：存储来自某处服务器的非常快的数据（浮点值），然后从该中间源读取它以在实时绘图/图形上呈现点。频率对选择也有影响吗？

任何示例代码片段都将非常有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T09:33:18.987

localStorage 和数组之间的明显区别是：

*   你只能存储字符串（没有对象）
*   它会持续存在，以便您下次恢复您的价值观
*   当它在磁盘上写入时，这是一个较重的操作
*   可用空间受到限制，以避免弄乱用户的磁盘（*“用户代理应限制存储区域允许的总空间量。[...] 建议每个源最多 5 兆字节的任意限制”*）

**[关于 localStorage 的 W3.org 参考](http://www.w3.org/TR/webstorage/)**

您可以像这样在 localStorage 中读写：

```
var foo = localStorage["bar"];
// ...
localStorage["bar"] = foo; 
```

（示例取自伟大的介绍性网站[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)）

**如果您仅将数据用于当前会话，请不要使用 localStorage**。使用标准数组（它们又好又快）或[Float32Array](https://developer.mozilla.org/en-US/docs/JavaScript_typed_arrays/Float32Array)。

# php - Setlocale 是正确的，但没有显示瑞典语符号

> ID：12767600
> 
> 赞同：2
> 
> 时间：2012-10-07T09:25:18.973
> 
> 标签：php, debian, strftime

我有这个 strftime 函数来显示日期：

```
 <?php 
        echo strftime('
        <div class="vecka">%a</div> 
        <div class="dag">%d</div> 
        <div class="man">%b</div>
        ', 
        strftime($article->eventDate));

                    ?> 
```

我已将 setlocale 设置为： setlocale(LC_TIME,"swedish"); 并且脚本确实输出了月份和日期的瑞典语名称，但没有瑞典语符号 å、ä、ö 被替换为 a、a、o。

所以 måndag（英语中的星期一）变成了 mandag，lördag（星期六）变成了 lordag，依此类推……

看起来 utf8 编码存在一些问题，所以我尝试将其全部包装在 utf8_encode 中，但没有结果。该脚本确实可以在我的本地机器上使用 xampp。脚本不起作用的实时服务器是debian。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:16:02.337

我回答晚了，但它可能会帮助那些偶然发现这一点的人。

在语言参数中添加“.UTF-8”。

例子 ：

```
setlocale(LC_TIME, "fr_FR.UTF-8"); 
```

# popup - 如何从弹出窗口、气泡或云中删除标注？

> ID：12767602
> 
> 赞同：0
> 
> 时间：2012-10-07T09:25:30.007
> 
> 标签：popup, customization, openlayers, openstreetmap

我正在从 Google Maps 切换到 Open Street Map 并开始使用 API。从代码示例中，我找不到带有自定义弹出窗口的示例。如何删除将气泡指向标记的丑陋箭头或标注？

![大喊](../Images/424395f1abd64ec9ad42520c22731cbe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:00:29.553

使用[OpenLayers.Popup.Anchored](http://dev.openlayers.org/docs/files/OpenLayers/Popup/Anchored-js.html#OpenLayers.Popup.Anchored)或修改弹出样式。

# php - Codeigniter - 使用两个不同数据库的最佳方式

> ID：12767603
> 
> 赞同：8
> 
> 时间：2012-10-07T09:25:44.513
> 
> 标签：php, database, codeigniter, codeigniter-2

有人知道在我的应用程序中使用 2 个不同数据库的最佳实践吗？

我需要将数据存储在两个不同位置的数据库中（主机、用户名、密码，都发生了变化）。

我打算像往常一样创建模型，并在构造中设置数据库主机、名称、密码等。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-07T09:34:22.057

我不确定您是否称其为“最佳”方式，但是如教程中所述，***一种方式是这样的，***

在数据库文件中，您有默认配置，其中一部分是：

```
$db['default']['hostname'] = "localhost";
$db['default']['username'] = "user";
$db['default']['password'] = "database";
$db['default']['database'] = "db1"; 
```

现在您可以创建另一个组，假设我们将其称为 group1，并且我们希望它除了名称之外的所有内容都与默认数据库设置相同，所以您可以这样做

```
$db['group1']=$db['default'];
$db['group1']['database']="db2"; 
```

然后，当你想使用第二个数据库时，就去吧

```
$DB2 = $this->load->database('group1', TRUE); 
```

然后，而不是`$this->db->foo()`，你会做`$DB2->foo()`

或者（如 sbaaaang 评论中所建议的那样），您可以`$this->db=$DB2;`保持一切不变

你可以把它扩展到像这样的多个组

```
 $DB1 = $this->load->database('group1', TRUE); 
 $DB2 = $this->load->database('group2', TRUE); 
 ...
 $DBn = $this->load->database('groupn', TRUE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T19:36:15.363

好吧，我只想在这里写下我的解决方案，因为我认为我使用的代码更少：

在 database.php 中，我设置了数据库组，例如：

```
$database['default']['dbname'] = 'db1';
$database['second_db']['dbname'] = 'db2'; 
```

然后在模型中我使用构造函数切换到我想像这样使用的数据库：

```
//use db1
function __construct()
    {
        // Call the Model constructor
        parent::__construct();
         $this->load->database('default',true);
    }
//use db2
function __construct()
    {
        // Call the Model constructor
        parent::__construct();
         $this->load->database('second_db',true);
    } 
```

如果有人想展示更多解决方案，请这样做！这些只是我的两分钱。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T22:43:28.793

我读到了

```
$db['default']['pconnect'] = FALSE; 
```

必须是假的才能使这些东西起作用。如果我错了，请纠正我。对于您使用的所有多个数据库，它必须关闭。我不知道这是否是一个好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-06T12:15:48.553

试过这个，它的工作原理：

```
$db['otherdb'] = array_merge($db['primarydb'], array(

    'database' => 'otherdbname'

)); 
```

# c++ - 在 Linux 中运行的 Eclipse Juno CDT - 它没有给我任何工具链

> ID：12767604
> 
> 赞同：3
> 
> 时间：2012-10-07T09:25:47.147
> 
> 标签：c++, c, eclipse, eclipse-cdt

我正在使用 Slackware 14 和最新的 Eclipse Juno。

作为一个普通的 Eclipse 用户，我像往常一样安装了 CDT。但是，当我创建一个新项目时，没有可用的工具链。截图在这里：

![没有可供选择的工具链](../Images/2007384845aa1dd140a6edc3cced2077.png)

我记得我曾经在 Linux 中安装 CDT 后立即获得默认的 GCC 工具链。即使使用 BSD，我也可以安装 GCC 交叉编译工具链，它也适用于原生 GCC。我试图安装交叉编译工具链，但 CDT 没有选择它。

请提出您的建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T08:01:42.387

你应该从帮助菜单安装它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:52:45.793

我有同样的问题。在某些时候，我可以用 Eclipse 用 C++ 编程。有一天，即使有几个工具链，它也找不到任何工具链。基本上，您需要重新安装 CDT 插件，并假设您将工具链安装在正确的位置 - 为此，您需要参考 Linux 发行版的说明。

这是我在未更改工具链上的任何内容的情况下所做的：

1.  从 Eclipse 卸载 CDT

    帮助 -> 安装新软件 -> 点击链接“已安装” -> 选择 CDT 项目 -> 点击卸载

2.  [重新安装 CDT](http://www.eclipse.org/cdt/downloads.php)

这让我回到了 Eclipse 中的工具链。

如果重新安装不起作用，则意味着由于某种原因您有不受支持的工具链。取消选中`Show project types and toolchains only if they are supported on the platform`新项目对话框。然后它将显示工具链。您可以继续选择工具链来创建项目。但我会尝试找出安装的 gcc 不支持的原因。

# opengl - lwjgl 并渲染到纹理

> ID：12767610
> 
> 赞同：-1
> 
> 时间：2012-10-07T09:26:18.283
> 
> 标签：opengl, lwjgl, framebuffer, render-to-texture

我需要能够渲染到纹理，然后将该纹理绘制到全屏四边形。通过公然复制 lwjgl 教程，我能够制作一个带纹理的移动四边形，但我不能让它渲染到纹理：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStream;
import java.nio.ByteBuffer;
import java.nio.FloatBuffer;
import java.nio.IntBuffer;

import org.lwjgl.BufferUtils;
import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.ContextAttribs;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.opengl.GL12;
import org.lwjgl.opengl.GL13;
import org.lwjgl.opengl.GL15;
import org.lwjgl.opengl.GL20;
import org.lwjgl.opengl.GL30;
import org.lwjgl.opengl.GL32;
import org.lwjgl.opengl.PixelFormat;
import org.lwjgl.util.glu.GLU;
import org.lwjgl.util.vector.Matrix4f;
import org.lwjgl.util.vector.Vector3f;

import de.matthiasmann.twl.utils.PNGDecoder;
import de.matthiasmann.twl.utils.PNGDecoder.Format;

public class TheQuadExampleMovingFBO {
    // Entry point for the application
    public static void main(String[] args) {
        new TheQuadExampleMovingFBO();
    }

    // Setup variables
    private final String WINDOW_TITLE = "The Quad: Moving";
    private final int WIDTH = 320;
    private final int HEIGHT = 240;
    private final double PI = 3.14159265358979323846;
    // Frame Buffer variables
    private int fboID = 0;
    private int colID = 0;
    private int depID = 0;
    private IntBuffer drawBuffs;
    // Quad variables
    private int vaoId = 0;
    private int vboId = 0;
    private int vboiId = 0;
    private int indicesCount = 0;
    private VertexData[] vertices = null;
    private ByteBuffer verticesByteBuffer = null;
    // Shader variables
    private int vsId = 0;
    private int fsId = 0;
    private int pId = 0;
    // Texture variables
    private int[] texIds = new int[] {0, 0};
    private int textureSelector = 0;
    // Moving variables
    private int projectionMatrixLocation = 0;
    private int viewMatrixLocation = 0;
    private int modelMatrixLocation = 0;
    private Matrix4f projectionMatrix = null;
    private Matrix4f viewMatrix = null;
    private Matrix4f modelMatrix = null;
    private Vector3f modelPos = null;
    private Vector3f modelAngle = null;
    private Vector3f modelScale = null;
    private Vector3f cameraPos = null;
    private FloatBuffer matrix44Buffer = null;

    public TheQuadExampleMovingFBO() {
        // Initialize OpenGL (Display)
        this.setupOpenGL();

        this.setupQuad();
        this.setupShaders();
        this.setupTextures();
        this.setupMatrices();

        while (!Display.isCloseRequested()) {
            // Do a single loop (logic/render)
            this.loopCycle();

            // Force a maximum FPS of about 60
            Display.sync(60);
            // Let the CPU synchronize with the GPU if GPU is tagging behind
            Display.update();
        }

        // Destroy OpenGL (Display)
        this.destroyOpenGL();
    }

    private void setupMatrices() {
        // Setup projection matrix
        projectionMatrix = new Matrix4f();
        float fieldOfView = 60f;
        float aspectRatio = (float)WIDTH / (float)HEIGHT;
        float near_plane = 0.1f;
        float far_plane = 100f;

        float y_scale = this.coTangent(this.degreesToRadians(fieldOfView / 2f));
        float x_scale = y_scale / aspectRatio;
        float frustum_length = far_plane - near_plane;

        projectionMatrix.m00 = x_scale;
        projectionMatrix.m11 = y_scale;
        projectionMatrix.m22 = -((far_plane + near_plane) / frustum_length);
        projectionMatrix.m23 = -1;
        projectionMatrix.m32 = -((2 * near_plane * far_plane) / frustum_length);

        // Setup view matrix
        viewMatrix = new Matrix4f();

        // Setup model matrix
        modelMatrix = new Matrix4f();

        // Create a FloatBuffer with the proper size to store our matrices later
        matrix44Buffer = BufferUtils.createFloatBuffer(16);
    }

    private void setupTextures() {
        texIds[0] = this.loadPNGTexture("assets/images/stGrid1.png", GL13.GL_TEXTURE0);
        texIds[1] = this.loadPNGTexture("assets/images/stGrid2.png", GL13.GL_TEXTURE0);

        this.exitOnGLError("setupTexture");
    }

    private void setupOpenGL() {
        // Setup an OpenGL context with API version 3.2
        try {
            PixelFormat pixelFormat = new PixelFormat();
            ContextAttribs contextAtrributes = new ContextAttribs(3, 2);
            contextAtrributes.withForwardCompatible(true);
            contextAtrributes.withProfileCore(true);

            Display.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));
            Display.setTitle(WINDOW_TITLE);
            Display.create(pixelFormat, contextAtrributes);

            GL11.glViewport(0, 0, WIDTH, HEIGHT);
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(-1);
        }

        // Setup an XNA like background color
        GL11.glClearColor(0.4f, 0.6f, 0.9f, 0f);

        // Map the internal OpenGL coordinate system to the entire screen
        GL11.glViewport(0, 0, WIDTH, HEIGHT);
        System.out.println(GL11.glGetString(GL11.GL_VERSION));
        this.exitOnGLError("setupOpenGL");
    }

    private void setupQuad() {
        // We'll define our quad using 4 vertices of the custom 'TexturedVertex' class
        VertexData v0 = new VertexData(); 
        v0.setXYZ(-0.5f, 0.5f, 0); v0.setRGB(1, 0, 0); v0.setST(0, 0);
        VertexData v1 = new VertexData(); 
        v1.setXYZ(-0.5f, -0.5f, 0); v1.setRGB(0, 1, 0); v1.setST(0, 1);
        VertexData v2 = new VertexData(); 
        v2.setXYZ(0.5f, -0.5f, 0); v2.setRGB(0, 0, 1); v2.setST(1, 1);
        VertexData v3 = new VertexData(); 
        v3.setXYZ(0.5f, 0.5f, 0); v3.setRGB(1, 1, 1); v3.setST(1, 0);

        vertices = new VertexData[] {v0, v1, v2, v3};

        // Put each 'Vertex' in one FloatBuffer
        verticesByteBuffer = BufferUtils.createByteBuffer(vertices.length * 
                VertexData.stride);             
        FloatBuffer verticesFloatBuffer = verticesByteBuffer.asFloatBuffer();
        for (int i = 0; i < vertices.length; i++) {
            // Add position, color and texture floats to the buffer
            verticesFloatBuffer.put(vertices[i].getElements());
        }
        verticesFloatBuffer.flip();

        // OpenGL expects to draw vertices in counter clockwise order by default
        byte[] indices = {
                0, 1, 2,
                2, 3, 0
        };
        indicesCount = indices.length;
        ByteBuffer indicesBuffer = BufferUtils.createByteBuffer(indicesCount);
        indicesBuffer.put(indices);
        indicesBuffer.flip();

        // Create a new Vertex Array Object in memory and select it (bind)
        vaoId = GL30.glGenVertexArrays();
        GL30.glBindVertexArray(vaoId);

        // Create a new Vertex Buffer Object in memory and select it (bind)
        vboId = GL15.glGenBuffers();
        GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vboId);
        GL15.glBufferData(GL15.GL_ARRAY_BUFFER, verticesFloatBuffer, GL15.GL_STREAM_DRAW);

        // Put the position coordinates in attribute list 0
        GL20.glVertexAttribPointer(0, VertexData.positionElementCount, GL11.GL_FLOAT, 
                false, VertexData.stride, VertexData.positionByteOffset);
        // Put the color components in attribute list 1
        GL20.glVertexAttribPointer(1, VertexData.colorElementCount, GL11.GL_FLOAT, 
                false, VertexData.stride, VertexData.colorByteOffset);
        // Put the texture coordinates in attribute list 2
        GL20.glVertexAttribPointer(2, VertexData.textureElementCount, GL11.GL_FLOAT, 
                false, VertexData.stride, VertexData.textureByteOffset);

        GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, 0);

        // Deselect (bind to 0) the VAO
        GL30.glBindVertexArray(0);

        // Create a new VBO for the indices and select it (bind) - INDICES
        vboiId = GL15.glGenBuffers();
        GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, vboiId);
        GL15.glBufferData(GL15.GL_ELEMENT_ARRAY_BUFFER, indicesBuffer, 
                GL15.GL_STATIC_DRAW);
        GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);

        // Set the default quad rotation, scale and position values
        modelPos = new Vector3f(0, 0, 0);
        modelAngle = new Vector3f(0, 0, 0);
        modelScale = new Vector3f(1, 1, 1);
        cameraPos = new Vector3f(0, 0, 0);

        ////////// THIS IS WHERE I ADDED CODE FOR THE FRAMEBUFFER STUFF  //////////////

        //render to texture attempt
        fboID = GL30.glGenFramebuffers();
        GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, fboID);
        colID = GL11.glGenTextures();
        GL11.glBindTexture(GL11.GL_TEXTURE_2D, colID);
        GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGB, WIDTH, HEIGHT, 0, GL11.GL_RGB, GL11.GL_UNSIGNED_BYTE, (ByteBuffer)null);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_NEAREST);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE);
        depID = GL30.glGenRenderbuffers();
        GL30.glBindRenderbuffer(GL30.GL_RENDERBUFFER, depID);
        GL30.glRenderbufferStorage(GL30.GL_RENDERBUFFER, GL11.GL_DEPTH_COMPONENT, WIDTH, HEIGHT);
        GL30.glFramebufferRenderbuffer(GL30.GL_FRAMEBUFFER, GL30.GL_DEPTH_ATTACHMENT, GL30.GL_RENDERBUFFER, depID);
        GL32.glFramebufferTexture(GL30.GL_FRAMEBUFFER, GL30.GL_COLOR_ATTACHMENT0, colID, 0);
        drawBuffs = BufferUtils.createIntBuffer(1);
        drawBuffs.put(0, GL30.GL_COLOR_ATTACHMENT0);
        GL20.glDrawBuffers(drawBuffs);
        if(GL30.glCheckFramebufferStatus(GL30.GL_FRAMEBUFFER) != GL30.GL_FRAMEBUFFER_COMPLETE){
            System.out.println("Framebuffer not complete!");
        }else{ System.out.println("Framebuffer is complete!");}

        //////// END OF NEW CODE HERE, LOOK IN RENDER CYCLE FOR MORE NEW CODE ///////////

        this.exitOnGLError("setupQuad");
    }

    private void setupShaders() {       
        // Load the vertex shader
        vsId = this.loadShader("assets/shaders/moving/vertex.glsl", 
                GL20.GL_VERTEX_SHADER);
        // Load the fragment shader
        fsId = this.loadShader("assets/shaders/moving/fragment.glsl", 
                GL20.GL_FRAGMENT_SHADER);

        // Create a new shader program that links both shaders
        pId = GL20.glCreateProgram();
        GL20.glAttachShader(pId, vsId);
        GL20.glAttachShader(pId, fsId);
        GL20.glLinkProgram(pId);

        // Position information will be attribute 0
        GL20.glBindAttribLocation(pId, 0, "in_Position");
        // Color information will be attribute 1
        GL20.glBindAttribLocation(pId, 1, "in_Color");
        // Textute information will be attribute 2
        GL20.glBindAttribLocation(pId, 2, "in_TextureCoord");

        // Get matrices uniform locations
        projectionMatrixLocation = GL20.glGetUniformLocation(pId, "projectionMatrix");
        viewMatrixLocation = GL20.glGetUniformLocation(pId, "viewMatrix");
        modelMatrixLocation = GL20.glGetUniformLocation(pId, "modelMatrix");

        GL20.glValidateProgram(pId);

        this.exitOnGLError("setupShaders");
    }

    private void logicCycle() {
        //-- Input processing
        float rotationDelta = 15f;
        float scaleDelta = 0.1f;
        float posDelta = 0.1f;
        Vector3f scaleAddResolution = new Vector3f(scaleDelta, scaleDelta, scaleDelta);
        Vector3f scaleMinusResolution = new Vector3f(-scaleDelta, -scaleDelta, 
                -scaleDelta);

        while(Keyboard.next()) {            
            // Only listen to events where the key was pressed (down event)
            if (!Keyboard.getEventKeyState()) continue;

            // Switch textures depending on the key released
            switch (Keyboard.getEventKey()) {
            case Keyboard.KEY_1:
                textureSelector = 0;
                break;
            case Keyboard.KEY_2:
                textureSelector = 1;
                break;
            }

            // Change model scale, rotation and translation values
            switch (Keyboard.getEventKey()) {
            // Move
            case Keyboard.KEY_UP:
                modelPos.y += posDelta;
                break;
            case Keyboard.KEY_DOWN:
                modelPos.y -= posDelta;
                break;
            // Scale
            case Keyboard.KEY_P:
                Vector3f.add(modelScale, scaleAddResolution, modelScale);
                break;
            case Keyboard.KEY_M:
                Vector3f.add(modelScale, scaleMinusResolution, modelScale);
                break;
            // Rotation
            case Keyboard.KEY_LEFT:
                modelAngle.z += rotationDelta;
                break;
            case Keyboard.KEY_RIGHT:
                modelAngle.z -= rotationDelta;
                break;
            }
        }

        //-- Update matrices
        // Reset view and model matrices
        viewMatrix = new Matrix4f();
        modelMatrix = new Matrix4f();

        // Translate camera
        Matrix4f.translate(cameraPos, viewMatrix, viewMatrix);

        // Scale, translate and rotate model
        Matrix4f.scale(modelScale, modelMatrix, modelMatrix);
        Matrix4f.translate(modelPos, modelMatrix, modelMatrix);
        Matrix4f.rotate(this.degreesToRadians(modelAngle.z), new Vector3f(0, 0, 1), 
                modelMatrix, modelMatrix);
        Matrix4f.rotate(this.degreesToRadians(modelAngle.y), new Vector3f(0, 1, 0), 
                modelMatrix, modelMatrix);
        Matrix4f.rotate(this.degreesToRadians(modelAngle.x), new Vector3f(1, 0, 0), 
                modelMatrix, modelMatrix);

        // Upload matrices to the uniform variables
        GL20.glUseProgram(pId);

        projectionMatrix.store(matrix44Buffer); matrix44Buffer.flip();
        GL20.glUniformMatrix4(projectionMatrixLocation, false, matrix44Buffer);
        viewMatrix.store(matrix44Buffer); matrix44Buffer.flip();
        GL20.glUniformMatrix4(viewMatrixLocation, false, matrix44Buffer);
        modelMatrix.store(matrix44Buffer); matrix44Buffer.flip();
        GL20.glUniformMatrix4(modelMatrixLocation, false, matrix44Buffer);

        GL20.glUseProgram(0);

        this.exitOnGLError("logicCycle");
    }

    private void renderCycle() {
        ////////// THESE LINES ARE NEW, ADDED TO RENDER TO THE FRAME BUFFER /////////
        GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, fboID);
        GL11.glViewport(0, 0, WIDTH, HEIGHT);
        ///////// THIS IS THE ORIGINAL RENDER CYCLE CODE, I WANT THIS TO GO TO THE FBO ///////
        GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);

        GL20.glUseProgram(pId);

        // Bind the texture
        GL13.glActiveTexture(GL13.GL_TEXTURE0);
        GL11.glBindTexture(GL11.GL_TEXTURE_2D, texIds[textureSelector]);

        // Bind to the VAO that has all the information about the vertices
        GL30.glBindVertexArray(vaoId);
        GL20.glEnableVertexAttribArray(0);
        GL20.glEnableVertexAttribArray(1);
        GL20.glEnableVertexAttribArray(2);

        // Bind to the index VBO that has all the information about the order of the vertices
        GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, vboiId);

        // Draw the vertices
        GL11.glDrawElements(GL11.GL_TRIANGLES, indicesCount, GL11.GL_UNSIGNED_BYTE, 0);

        // Put everything back to default (deselect)
        GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);
        GL20.glDisableVertexAttribArray(0);
        GL20.glDisableVertexAttribArray(1);
        GL20.glDisableVertexAttribArray(2);
        GL30.glBindVertexArray(0);

        GL20.glUseProgram(0);

        //////// NEW CODE, I WANT TO DRAW A FULL SCREEN QUAD WITH THE TEXTURE FROM THE FBO ///////
        // draw the texture from the FBO
        GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, 0);
        GL11.glViewport(0, 0, WIDTH, HEIGHT);
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glTexCoord2f(0.0f, 0.0f); GL11.glVertex3f(0.0f, 0.0f, 0.0f);
            GL11.glTexCoord2f(1.0f, 0.0f); GL11.glVertex3f((float)WIDTH, 0.0f, 0.0f);
            GL11.glTexCoord2f(1.0f, 1.0f); GL11.glVertex3f((float)WIDTH, (float)HEIGHT, 0.0f);
            GL11.glTexCoord2f(0.0f, 1.0f); GL11.glVertex3f(0.0f, (float)HEIGHT, 0.0f);
        GL11.glEnd();
        ///////// END OF NEW CODE ///////////
        this.exitOnGLError("renderCycle");
    }

    private void loopCycle() {
        // Update logic
        this.logicCycle();
        // Update rendered frame
        this.renderCycle();

        this.exitOnGLError("loopCycle");
    }

    private void destroyOpenGL() {  
        // Delete the texture
        GL11.glDeleteTextures(texIds[0]);
        GL11.glDeleteTextures(texIds[1]);

        // Delete the shaders
        GL20.glUseProgram(0);
        GL20.glDetachShader(pId, vsId);
        GL20.glDetachShader(pId, fsId);

        GL20.glDeleteShader(vsId);
        GL20.glDeleteShader(fsId);
        GL20.glDeleteProgram(pId);

        // Select the VAO
        GL30.glBindVertexArray(vaoId);

        // Disable the VBO index from the VAO attributes list
        GL20.glDisableVertexAttribArray(0);
        GL20.glDisableVertexAttribArray(1);

        // Delete the vertex VBO
        GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, 0);
        GL15.glDeleteBuffers(vboId);

        // Delete the index VBO
        GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);
        GL15.glDeleteBuffers(vboiId);

        // Delete the VAO
        GL30.glBindVertexArray(0);
        GL30.glDeleteVertexArrays(vaoId);

        this.exitOnGLError("destroyOpenGL");

        Display.destroy();
    }

    private int loadShader(String filename, int type) {
        StringBuilder shaderSource = new StringBuilder();
        int shaderID = 0;

        try {
            BufferedReader reader = new BufferedReader(new FileReader(filename));
            String line;
            while ((line = reader.readLine()) != null) {
                shaderSource.append(line).append("\n");
            }
            reader.close();
        } catch (IOException e) {
            System.err.println("Could not read file.");
            e.printStackTrace();
            System.exit(-1);
        }

        shaderID = GL20.glCreateShader(type);
        GL20.glShaderSource(shaderID, shaderSource);
        GL20.glCompileShader(shaderID);

        if (GL20.glGetShader(shaderID, GL20.GL_COMPILE_STATUS) == GL11.GL_FALSE) {
            System.err.println("Could not compile shader.");
            System.exit(-1);
        }

        this.exitOnGLError("loadShader");

        return shaderID;
    }

    private int loadPNGTexture(String filename, int textureUnit) {
        ByteBuffer buf = null;
        int tWidth = 0;
        int tHeight = 0;

        try {
            // Open the PNG file as an InputStream
            InputStream in = new FileInputStream(filename);
            // Link the PNG decoder to this stream
            PNGDecoder decoder = new PNGDecoder(in);

            // Get the width and height of the texture
            tWidth = decoder.getWidth();
            tHeight = decoder.getHeight();

            // Decode the PNG file in a ByteBuffer
            buf = ByteBuffer.allocateDirect(
                    4 * decoder.getWidth() * decoder.getHeight());
            decoder.decode(buf, decoder.getWidth() * 4, Format.RGBA);
            buf.flip();

            in.close();
        } catch (IOException e) {
            e.printStackTrace();
            System.exit(-1);
        }

        // Create a new texture object in memory and bind it
        int texId = GL11.glGenTextures();
        GL13.glActiveTexture(textureUnit);
        GL11.glBindTexture(GL11.GL_TEXTURE_2D, texId);

        // All RGB bytes are aligned to each other and each component is 1 byte
        GL11.glPixelStorei(GL11.GL_UNPACK_ALIGNMENT, 1);

        // Upload the texture data and generate mip maps (for scaling)
        GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGB, tWidth, tHeight, 0, 
                GL11.GL_RGBA, GL11.GL_UNSIGNED_BYTE, buf);
        GL30.glGenerateMipmap(GL11.GL_TEXTURE_2D);

        // Setup the ST coordinate system
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL11.GL_REPEAT);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL11.GL_REPEAT);

        // Setup what to do when the texture has to be scaled
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, 
                GL11.GL_LINEAR);
        GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, 
                GL11.GL_LINEAR_MIPMAP_LINEAR);

        this.exitOnGLError("loadPNGTexture");

        return texId;
    }

    private float coTangent(float angle) {
        return (float)(1f / Math.tan(angle));
    }

    private float degreesToRadians(float degrees) {
        return degrees * (float)(PI / 180d);
    }

    private void exitOnGLError(String errorMessage) {
        int errorValue = GL11.glGetError();

        if (errorValue != GL11.GL_NO_ERROR) {
            String errorString = GLU.gluErrorString(errorValue);
            System.err.println("ERROR - " + errorMessage + ": " + errorString);

            if (Display.isCreated()) Display.destroy();
            System.exit(-1);
        }
    }
} 
```

以下是我添加行以渲染到纹理的代码部分：

设置 FBO ////////// 这是我为帧缓冲区添加代码的地方 /////////////

```
 //render to texture attempt
    fboID = GL30.glGenFramebuffers();
    GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, fboID);
    colID = GL11.glGenTextures();
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, colID);
    GL11.glTexImage2D(GL11.GL_TEXTURE_2D, 0, GL11.GL_RGB, WIDTH, HEIGHT, 0, GL11.GL_RGB, GL11.GL_UNSIGNED_BYTE, (ByteBuffer)null);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MAG_FILTER, GL11.GL_NEAREST);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_MIN_FILTER, GL11.GL_NEAREST);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE);
    GL11.glTexParameteri(GL11.GL_TEXTURE_2D, GL11.GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE);
    depID = GL30.glGenRenderbuffers();
    GL30.glBindRenderbuffer(GL30.GL_RENDERBUFFER, depID);
    GL30.glRenderbufferStorage(GL30.GL_RENDERBUFFER, GL11.GL_DEPTH_COMPONENT, WIDTH, HEIGHT);
    GL30.glFramebufferRenderbuffer(GL30.GL_FRAMEBUFFER, GL30.GL_DEPTH_ATTACHMENT, GL30.GL_RENDERBUFFER, depID);
    GL32.glFramebufferTexture(GL30.GL_FRAMEBUFFER, GL30.GL_COLOR_ATTACHMENT0, colID, 0);
    drawBuffs = BufferUtils.createIntBuffer(1);
    drawBuffs.put(0, GL30.GL_COLOR_ATTACHMENT0);
    GL20.glDrawBuffers(drawBuffs);
    if(GL30.glCheckFramebufferStatus(GL30.GL_FRAMEBUFFER) != GL30.GL_FRAMEBUFFER_COMPLETE){
        System.out.println("Framebuffer not complete!");
    }else{ System.out.println("Framebuffer is complete!");}

    //////// END OF NEW CODE HERE, LOOK IN RENDER CYCLE FOR MORE NEW CODE /////////// 
```

这是渲染代码： ////////// 这些行是新的，添加到渲染到帧缓冲区 ///////// GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, fboID); GL11.glViewport(0, 0, WIDTH, HEIGHT); ///////// 这是原始的渲染周期代码，我想把它放到 FBO /////// GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);

```
 GL20.glUseProgram(pId);

    // Bind the texture
    GL13.glActiveTexture(GL13.GL_TEXTURE0);
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, texIds[textureSelector]);

    // Bind to the VAO that has all the information about the vertices
    GL30.glBindVertexArray(vaoId);
    GL20.glEnableVertexAttribArray(0);
    GL20.glEnableVertexAttribArray(1);
    GL20.glEnableVertexAttribArray(2);

    // Bind to the index VBO that has all the information about the order of the vertices
    GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, vboiId);

    // Draw the vertices
    GL11.glDrawElements(GL11.GL_TRIANGLES, indicesCount, GL11.GL_UNSIGNED_BYTE, 0);

    // Put everything back to default (deselect)
    GL15.glBindBuffer(GL15.GL_ELEMENT_ARRAY_BUFFER, 0);
    GL20.glDisableVertexAttribArray(0);
    GL20.glDisableVertexAttribArray(1);
    GL20.glDisableVertexAttribArray(2);
    GL30.glBindVertexArray(0);

    GL20.glUseProgram(0);

    //////// NEW CODE, I WANT TO DRAW A FULL SCREEN QUAD WITH THE TEXTURE FROM THE FBO ///////
    // draw the texture from the FBO
    GL30.glBindFramebuffer(GL30.GL_FRAMEBUFFER, 0);
    GL11.glViewport(0, 0, WIDTH, HEIGHT);
    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(0.0f, 0.0f); GL11.glVertex3f(0.0f, 0.0f, 0.0f);
        GL11.glTexCoord2f(1.0f, 0.0f); GL11.glVertex3f((float)WIDTH, 0.0f, 0.0f);
        GL11.glTexCoord2f(1.0f, 1.0f); GL11.glVertex3f((float)WIDTH, (float)HEIGHT, 0.0f);
        GL11.glTexCoord2f(0.0f, 1.0f); GL11.glVertex3f(0.0f, (float)HEIGHT, 0.0f);
    GL11.glEnd();
    ///////// END OF NEW CODE /////////// 
```

当我运行此代码时，我得到一个黑色矩形大约一秒钟，控制台告诉我帧缓冲区已完成，然后我得到一个关于渲染周期中无效操作的 openGL 错误，它崩溃了。我认为问题出在我的全屏四码代码中，但我不知道如何正确处理。我是否需要为渲染到屏幕创建新的着色器程序？我是否需要删除 glBegin(GL_QUADS) 并使用顶点缓冲区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:44:42.847

在绑定 FBO 以进行绘图之前，您必须取消绑定 colID 纹理（否则您可能会同时读取和写入它）。

# windows - 在 Windows 下无法访问本地主机上的文件

> ID：12767612
> 
> 赞同：0
> 
> 时间：2012-10-07T09:26:34.633
> 
> 标签：windows, git, apache, github, yii

从 github Yii 下载分支后定期显示这样的问题：

```
copy(Z:\home\localhost\www\insur\insurance\assets\c75d288a\css\_notes\dwsync.xml) [<a href='function.copy'>function.copy</a>]: failed to open stream: Permission denied 
```

（/_notes/dwsync.xml - 是 DreamWeaver 自动为开发人员注释创建的文件）。我无法弄清楚以下内容：

1.  为什么 Yii 尝试实现 copy($path,$dst.DIRECTORY_SEPARATOR.$file); 对于那个文件（它在这里：**[site_root]\yii\framework\utils\CFileHelper.php(130)**）？
2.  为什么在 Windows localhost 上可能出现访问错误？
3.  究竟什么是错误源 - Windows、Apache 或 Yii（或者可能是 DW）？
4.  什么是解决方案？

所以需要一个真正的大师！我相信这是一个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:59:25.177

1.  一般来说，Yii [Assets Manager](http://www.yiiframework.com/doc/api/1.1/CAssetManager)会尝试发布（或重新发布）您的应用程序使用的不同资源（img、css、js、..etc）的副本（由您制作或在框架中自然生成，例如 Gii 模块的东西）
2.  如果您没有为 Web 服务器进程设置所需的权限，则可能会在 localhost 中发生访问错误。但在这种情况下，我认为网络服务器从一开始就找不到该文件夹​​。
3.  这是 Yii 和 Apache 的共同犯罪。Yii`CAssestsManager`需要一个**assets**文件夹，Apache 找不到它并抱怨
4.  建议的**解决方案：**

确保您的 App Root 中有一个名为**assets**的文件夹，并确保它可以被 Web 服务器进程**写入！！**

要了解有关 Yii 资产的更多信息，请查看此[wiki-post](http://www.yiiframework.com/wiki/148/understanding-assets/)

# mysql - 正确锁定以实现可靠插入 (MySQL)

> ID：12767618
> 
> 赞同：0
> 
> 时间：2012-10-07T09:27:31.440
> 
> 标签：mysql, tsql, transactions

当从 PayPal 收到所谓的 IPN 消息时，我需要更新数据库中的一行。

问题是我需要完美的可靠性。

目前我使用 InnoDB。我担心交易可能会由于竞争条件而失败。

我应该使用`LOCK TABLES`吗？还有其他可靠的解决方案吗？

我应该检查失败并重复交易几次（多少次？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:35:44.027

无论顺序如何，您都无法可靠地使分布式进程（例如在本地添加一行并远程通知服务器）*完全可靠。*这很像[两个将军的问题](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)：没有一个事件可以同时表示双方成功完成交易，因为任何消息都可能在此过程中丢失。

我不确定我是否正确理解了您的问题，但也许以下方法会起作用：在某个表中写一行，指出您*将*要验证给定消息的事实。然后进行验证，然后在数据库中写入关于验证*结果的行。*在不太可能但重要的情况下，中间发生了一些事情，您将有一个没有匹配结果行的意图行。然后，您可以检测此类情况并手动从中恢复。

在您的本地数据库上，您将拥有单行更新，您可以在他们自己的事务中执行这些更新，甚至可能在打开自动提交的情况下。在开始与 PayPal 服务器通信之前，您必须确保第一次写入实际上已提交到磁盘（最好是其他磁盘上的二进制日志），但我认为不需要锁定或类似的。您可能想重试失败的事务，我会说最多 3 次，但重要的是最终您可以让管理员干预来修复您的代码无法处理的任何事情。

# windows - 如何在 Windows Mobile 上实现谷歌纵横签到功能？

> ID：12767620
> 
> 赞同：1
> 
> 时间：2012-10-07T09:28:15.930
> 
> 标签：windows, windows-mobile, asp.net-mvc-4, google-latitude

我希望这是正确的论坛。我希望为 Windows Mobile 7（或 11 月推出的版本 8）编写一个扩展谷歌纵横的移动应用程序（MVC 4 移动应用程序）。但是，根据 Google 自己的网站（参见[http://www.google.com/mobile/latitude/](http://www.google.com/mobile/latitude/)），Windows Mobile 不支持签入功能。那么，我将如何使用我提到的技术来实现这样的功能（对这里的 UI 不太感兴趣）？

**编辑**

该实现需要针对谷歌纵横帐户存储签到数据。

# c++ - 仅在 1 台机器上出现 C++ 警告：格式“%d”需要“int”类型的参数

> ID：12767627
> 
> 赞同：0
> 
> 时间：2012-10-07T09:29:23.063
> 
> 标签：c++

我正进入（状态

```
g++ -O3 cache-l1-line.cpp -o cache-l1-line -lrt
cache-l1-line.cpp: In function 'int main()':
cache-l1-line.cpp:33:58: warning: format '%d' expects argument of type 'int', but argument 2 has type 'long unsigned int' [-Wformat] 
```

在我的学校 sunfire 服务器上......但不是我的机器（Arch Linux）。为什么会这样。有问题的行似乎是

```
printf("%d, %1.2f \n", i * sizeof(int), totalTime/TIMES); 
```

我定义的地方：

```
for (int i = 4; i <= MAX_STRIDE/sizeof(int); i*=2)  { 
```

什么问题：**[GitHub上的完整源代码](https://github.com/jiewmeng/cs3210-assign1/blob/85f80b274ebb46efd58b36d4180fd4b024a3ee6d/cache-l1-line.cpp)**（链接到修订）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T09:43:12.427

`sizeof()`返回一个`size_t`，而不是一个`int`。`printf`您应该始终将此类“特殊”类型转换为您的格式所期望的类型：

```
printf("%d, %1.2f \n", (int)(i * sizeof(int)), totalTime/TIMES); 
```

注意：有些人喜欢深入他们的库以查看类型定义为什么类型，并在格式字符串中使用适当的类型。但是，这有两个问题：首先，它在另一个编译器上可能会有所不同。其次， a`size_t`不是 a `long`，它是 a `size_t`。因此，从更正式的角度来看，您将始终遇到类型不匹配，因为没有格式参数采用`size_t`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:52:41.737

在 64 位架构中，表达式计算为 64 位。因此，该体系结构中的正确说明符将是 %llu。或者相反，应该将表达式转换为说明符 %d 所期望的宽度和类型。

编辑： %llu 而不是 %lld - 感谢您的评论。

表达式 (i * size_t) 在不同的架构中具有不同的宽度和类型；它（unsigned int）显然在您的 i3 系统中和（unsigned long long）在您的 i7 系统中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T09:39:05.373

通常 printf 不是类型安全的，这意味着如果你有这样的东西：

```
struct Point {int x, int y} point;
printf("%d", point); 
```

它会编译，但在执行时可能会崩溃。但是 gcc 有一个扩展，允许使用参数检查格式字符串。"%d" 需要一个 int 但 "i * sizeof(int)" 是 long unsigned int 类型，这就是您收到警告的原因。

# iphone - 快照保存在缓存/快照中

> ID：12767629
> 
> 赞同：0
> 
> 时间：2012-10-07T09:29:34.523
> 
> 标签：iphone, ios, ios4

**大家好，我的应用程序的快照正在记录在 Cache/Snapshots 文件夹中。由于安全问题，我只是不需要记录这些快照。我在下面使用了这段代码，我从网上得到了这个来删除保存的快照：

```
- (void)applicationDidEnterBackground:(UIApplication *)application {
UIApplication* app = [UIApplication sharedApplication];
    UIBackgroundTaskIdentifier __block bgTask;
    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
        [app endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    if(UIBackgroundTaskInvalid != bgTask) {
        // Start the long-running task to kill app after some secs and return immediately.
        dispatch_after( dispatch_time(DISPATCH_TIME_NOW, KILL_IN_BACKGROUND_AFTER_SECS * 1e09), 
                       dispatch_get_main_queue(), ^{
                           if(goingToQuit) exit(0);
                           [app endBackgroundTask: bgTask];
                       });
    }
}
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // cancel ongoing background suicide.
    goingToQuit = NO;

} 
```

我不想记录这些快照，请对此提出建议。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:14:14.100

我认为您没有添加代码来删除文件:(请参考我的代码片段

```
- (void) deleteFiles {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [self beingBackgroundUpdateTask];
        NSError *error = nil;
        // dirPath is path to your snapshot directory 
        NSArray *directoryContents = [fileMgr contentsOfDirectoryAtPath:dirPath error:&error];
        if (error == nil) {
            for (NSString *path in directoryContents) {
                 NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:path];
                 BOOL removeSuccess = [fileMgr removeItemAtPath:fullPath error:&error];
                 if (!removeSuccess) {
                     // Error handling
                     ...
                 }
            }
        } else {
            // Error handling
        }

        // Do something with the result 
       [self endBackgroundUpdateTask];
    });
}
- (void) beingBackgroundUpdateTask {
    self.backgroundUpdateTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
        [self endBackgroundUpdateTask];
    }];
}

- (void) endBackgroundUpdateTask {
    [[UIApplication sharedApplication] endBackgroundTask: self.backgroundUpdateTask];
    self.backgroundUpdateTask = UIBackgroundTaskInvalid;
} 
```

# facebook - php会话：从twitter登录返回时清除会话值

> ID：12767633
> 
> 赞同：0
> 
> 时间：2012-10-07T09:29:49.487
> 
> 标签：facebook, session, twitter, php

我有一个脚本，可以在访问者访问网站时设置一些会话值（只是访问者统计信息）。

然后允许用户通过 twitter/facebook 或通过“常规注册”过程进行注册。

现在，当用户从登录过程的 twitter/facebook 部分返回时，会话值被清除（但不是取消设置）。

问题是它只发生在一台服务器（客户端服务器）上。在我自己的服务器上和本地机器上都很好。

是否有可能导致某些问题的 server/php.ini 设置？

注意：facebook/twitter 登录过程会重定向到这些网站，而不是“弹出”窗口样式的注册——以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:50:26.573

我自己还没有尝试过 Twitter 登录。但是，Facebook，是的！从您的脚注中可以清楚地看出，您正在使用**PHP SDK** for facebook，这不是一个很好的选择（阅读-> g*oodlooking*）。10 月 3 日，Facebook 发布了[Javascript SDK的更新版本](http://developers.facebook.com/docs/reference/javascript/)您可以用于登录。那个工作流程很漂亮。用户单击您的“使用 Facebook 登录”按钮，会打开一个带有 fb url 和用户授权的小弹出窗口，然后弹出窗口消失，用户又回到您的网站。使用您当前的模型，用户单击按钮并转到另一个域，然后再次被重定向。查看 Miniclip.com 的 facebook 登录信息，您就会知道我在说什么。至于你的问题，没有看你的代码，我觉得问题在于PHP Session变量不能跨域工作。

> 想象一下：用户在你的网站上 -> 生成 $_SESSION['id'] -> 现在，重定向到 Fb -> PHP $_SESSION 一旦他们离开你的域就无法工作 -> -> 你拔掉头发！！

# c++ - 为什么在没有明显代码的情况下删除对象？

> ID：12767635
> 
> 赞同：0
> 
> 时间：2012-10-07T09:30:08.503
> 
> 标签：c++, qt, object

在 qt 中，我使用 tablewidget 来存储 100 行。起初，我新建 tableWidgetItems 来填充行。在它运行时，我设置了项目的属性，不再是“新的”。但是我在使用*'ui->tableWidget->setRowCount(index);'后发现* ，后来又设置回100，代码*“ui->tableWidget->item(index, 0)->setText(...);”* 会使程序崩溃。那太糟糕了！！！;(我调试并发现新的索引>索引设置为行计数之前'设置回100'。

**当我设置较小的行数时系统是否自动删除了表项？？？**

我非常担心这一点，因为即使我的代码也无法确定我创建的对象的生命周期......有谁知道在设置行数后如何让它们保持“活动”？（否则，我必须更新它们......）。我真的很感谢你耐心阅读我可怜的 ELis :)

新的：

```
//TABLE
    ui->tableWidget->setColumnCount(3);
    ui->tableWidget->setRowCount(100);
    ui->tableWidget->setHorizontalHeaderLabels(headers);

    for(int i = 0; i < 100; i++)//new
    {
        ui->tableWidget->setItem( i, 0 , new QTableWidgetItem(""));//time
        ui->tableWidget->setItem( i, 1 , new QTableWidgetItem(""));//name
        ui->tableWidget->setItem( i, 2 , new QTableWidgetItem(""));//BITS
    } 
```

* * *

仅相关代码行：

```
 {
    int  index = 0;
    for(int queue_i = size_1; queue_i >= 0; queue_i--)
    {

        if(logDisplayQueue.at(queue_i).at(3) == "0" ||   logDisplayQueue.at(queue_i).at(3) == "2")continue;

        QStringList BITList = bits2Hexs(queue_i);

     ui->tableWidget->item(index, 0)->setText(logDisplayQueue.at(queue_i).at(0));//time
     ui->tableWidget->item(index, 1)->setText(logDisplayQueue.at(queue_i).at(1));//name
     ui->tableWidget->item(index, 2)->setText(BITList.join(""));//BITS

        if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);
        index++;
    }

        ui->tableWidget->setRowCount(index);//set row count to be 30 more or less
    } 
```

另一个功能：

```
 {

        ui->tableWidget->setRowCount(100);//back to be 100 again

        for(int queue_i = size_1, index = 0; queue_i >= 0; queue_i--, index++)
        {

            QStringList BITList = bits2Hexs(queue_i);
     ui->tableWidget->item(index, 0)->setText(logDisplayQueue.at(queue_i).at(0));//time
     ui->tableWidget->item(index, 1)->setText(logDisplayQueue.at(queue_i).at(1));//name
     ui->tableWidget->item(index, 2)->setText(BITList.join(""));//BITS
//In debugging, when index reches the value of old row-count, "->setText" crashes the    //program.

            if(queue_i == oldRowItemNo)ui->tableWidget->selectRow(index);
        }

    } 
```

*运行时返回类似“指令 0x00421727 引用 0x00000000 内存，内存不能被‘读取’”的信息*

**如果我注释掉这一行：'ui->tableWidget->setRowCount(index);//将行数设置为 30 或多或少'，它运行良好而不会崩溃，并且 index-referred-row 之后的行显示相同的数据前。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:10:41.173

`setRowCount`确保表恰好包含那么多行。如果您有比`index`以前更多的行，则这些行将消失（删除）。

如果您想暂时隐藏行，您可能应该使用[`hideRow(int)`](http://doc.qt.digia.com/4.7-snapshot/qtableview.html#hideRow)/`showRow`而不是重置行数。

# java - ActiveMQ 向 StompConnection 注册监听器

> ID：12767645
> 
> 赞同：1
> 
> 时间：2012-10-07T09:32:20.753
> 
> 标签：java, jms, activemq, stomp

我在[http://svn.apache.org/repos/asf/activemq/trunk/assembly/src/release/example/src/StompExample.java](http://svn.apache.org/repos/asf/activemq/trunk/assembly/src/release/example/src/StompExample.java)使用示例的变体从队列接收消息。我正在尝试做的是继续收听队列并在收到新消息后执行一些操作。问题是我找不到将侦听器注册到任何相关对象的方法。我试过类似的东西：

```
public static void main(String args[]) throws Exception {
    StompConnection connection = null;
    try {
        connection = new StompConnection();
        connection.open("localhost", 61613);
        connection.connect("admin", "activemq");
        connection.subscribe("/queue/worker", Subscribe.AckModeValues.AUTO);
        while (true) {
            StompFrame message = connection.receive();
            System.out.println(message.getBody());
        }
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
} 
```

但这不起作用，因为几秒钟后会发生超时（`java.net.SocketTimeoutException: Read timed out`）。我能做些什么来无限期地听这个队列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:01:29.627

ActiveMQ 的 StompConnection 类是一个比较原始的 STOMP 客户端。它不能对 Message 进行异步回调或无限期等待。您可以通过超时来接收，但取决于您是否使用 STOMP v1.1，如果未及时收到心跳，它仍然可能提前超时。您当然可以随时捕获超时异常并重试。

对于通过 Java 进行的 STOMP，您最好使用[StompJMS](https://github.com/fusesource/stompjms)等，它的行为类似于真正的 JMS 客户端并允许异步消息接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T20:13:27.350

即使我面临同样的问题..你可以通过在你的 receive() 方法中添加超时来解决这个问题。

声明一个长类型变量。

```
long waitTimeOut = 5000;   //this is 5 seconds 
```

现在修改您的接收功能，如下所示。

```
StompFrame message = connection.receive(waitTimeOut); 
```

这肯定会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T01:47:21.633

@Tim Bish：我尝试了 StompJMS，但找不到任何可以使用的示例（也许您可以提供链接）。我通过将超时设置为 0 来“解决”问题，这似乎是阻塞的。

# c++ - C ++在二叉树中找到最大的BST

> ID：12767651
> 
> 赞同：0
> 
> 时间：2012-10-07T09:33:18.750
> 
> 标签：c++, algorithm, find, binary-search-tree, binary-search

您在二叉树中拥有最大 BST 的方法是什么？最大，我的意思是：最高。

我参考了[这篇文章](https://stackoverflow.com/questions/12758870/c-my-binary-tree-is-well-formed)，其中找到了一个非常好的实现来查找树是否是 BST

```
bool isBinarySearchTree(BinaryTree * n,
int min=std::numeric_limits<int>::min(),
int max=std::numeric_limits<int>::max()) 
{
     return !n || (min < n->value && n->value < max
     && isBinarySearchTree(n->l, min, n->value)
     && isBinarySearchTree(n->r, n->value, max));
} 
```

实现一个解决方案来查找一棵树是否包含二叉搜索树是很容易的。我认为以下方法可以做到：

```
bool includeSomeBST(BinaryTree* n)
{ 
      return includeSomeBST(n->left)  ||  includeSomeBST(n->right) ;

      if(n == NULL)
           return false ; 

      return true ;
} 
```

但是如果我想要最大的 BST 怎么办？这是我的第一个想法

```
BinaryTree largestBST(BinaryTree* n)
{ 
      if(isBinarySearchTree(n))
           return n;

      if(!isBinarySearchTree(n->left))
      {
           if(!isBinarySearchTree(n->right))
               if(includeSomeBST(n->right))
                    return largestBST(n->right);

               else if(includeSomeBST(n->left))
                    return largestBST(n->left);

               else
                   return NULL;

           else
               return n->right;
      }
      else 
          return n->left;
} 
```

但实际上它并没有告诉最大的。我很难进行比较。应该如何进行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:30:08.257

是的，你的函数 includeSomeBST 是错误的。您只需检查节点 n,n->left 和 n->right，但必须递归检查节点。

bool includeSomeBST(BinaryTree* n) {

```
 if(!isBinarySearchTree(n))
  {

       return includeSomeBST(n->left) || includeSomeBST(n->right);
  }

  if(n==NULL) return false; 
  return true; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:37:58.977

这是与驱动程序一起成功的代码实现：

```
#include <iostream>
using namespace std;

class BinaryTree {
    public:
        BinaryTree *right;
        BinaryTree *left;
        int value;
        BinaryTree(int value) {
            this->value = value;
        }
};

int max_value(int a, int b) {
    if (a > b) {
        return a;
    } else {
        return b;
    }
}

int min_value(int a, int b) {
    if (a < b) {
        return a;
    } else {
        return b;
    }
}

BinaryTree* findLargestBST(BinaryTree *n, int* maxSize, int *max, int *min, bool *is_bst) {
    if (n == NULL) {
        *maxSize = 0;
        *is_bst = true;
        return n;
    }
    int *lc_max_size = new int;
    int *rc_max_size = new int;
    int *lc_max = new int;
    int *lc_min = new int;
    int *rc_max = new int;
    int *rc_min = new int;
    *lc_max = std::numeric_limits<int>::min();
    *rc_max = *lc_max;
    *lc_min = std::numeric_limits<int>::max();
    *rc_min = *lc_min;
    BinaryTree* returnPointer;

    bool is_curr_bst = true;
    BinaryTree* lc = findLargestBST(n->left, lc_max_size, lc_max, lc_min, is_bst);
    if (!*is_bst) {
        is_curr_bst = false;
    }

    BinaryTree* rc = findLargestBST(n->right, rc_max_size, rc_max, rc_min, is_bst);
    if (!*is_bst) {
        is_curr_bst = false; 
    }

    if (is_curr_bst && *lc_max <= n->value && n->value <= *rc_min) {
        *is_bst = true;
        *maxSize = 1 + *lc_max_size + *rc_max_size;
        returnPointer = n;
        *max = max_value (n->value, *rc_max);
        *min = min_value (n->value, *lc_min);
    } else {
        *is_bst = false;
        *maxSize = max_value(*lc_max_size, *rc_max_size);
        if (*maxSize == *lc_max_size) {
            returnPointer = lc;
        } else {
            returnPointer = rc;
        }
        *max = *min = n->value;
    }

    delete lc_max_size;
    delete rc_max_size;
    delete lc_max;
    delete lc_min;
    delete rc_max;
    delete rc_min;
    return returnPointer;
}

int main() {

    /* Let us construct the following Tree
          50
       /      \
     10        60
    /  \       /  \
   5   20    55    70
            /     /  \
          45     65    80
  */

  BinaryTree *root = new BinaryTree(50);
  root->left        = new BinaryTree(10);
  root->right       = new BinaryTree(60);
  root->left->left  = new BinaryTree(5);
  root->left->right = new BinaryTree(20);
  root->right->left  = new BinaryTree(55);
  root->right->left->left  = new BinaryTree(45);
  root->right->right = new BinaryTree(70);
  root->right->right->left = new BinaryTree(65);
  root->right->right->right = new BinaryTree(80);

  /* The complete tree is not BST as 45 is in right subtree of 50.
     The following subtree is the largest BST
        60
      /  \
    55    70
   /     /  \
  5     65    80
  */

  int *maxSize = new int;
  int *min_value = new int;
  int *max_value = new int;
  *min_value = std::numeric_limits<int>::max();
  *max_value = std::numeric_limits<int>::min();
  bool *is_bst = new bool;
  BinaryTree *largestBSTNode = findLargestBST(root, maxSize, max_value, min_value, is_bst);
  printf(" Size of the largest BST is %d", *maxSize);
  printf("Max size node is %d", largestBSTNode->value);
  delete maxSize;
  delete min_value;
  delete max_value;
  delete is_bst;
  getchar();

  return 0;
} 
```

使用的方法相当简单，可以理解如下：

这是一种***自下而上的方法***，而不是我们在确定树是否为 BST 时使用的自上而下的方法。它使用与确定树是否为 BST 时相同的最大最小方法。

以下是以递归方式在每个节点上执行的步骤： ***注意：请记住，这是一种自下而上的方法，信息将从底部流向顶部。***

1）确定我是否存在。如果我不是（我是 null），我不应该以任何方式影响算法，并且应该在不做任何修改的情况下返回。

2) 在每个节点，存储到该点的 BST 的最大大小。如果此特定节点处的树满足 BST 属性，则使用左子树的总大小 + 右子树的总大小 + 1（对于节点本身）来确定。否则，从左子树和右子树返回的最大值中算出。

3) 如果在给定节点处满足 BST 属性，则返回当前节点作为直到这一点的最大大小 BST，否则从左子树和右子树确定。

# android - 使用 AsyncTask 时出现 NetworkOnMainThreadException

> ID：12767652
> 
> 赞同：3
> 
> 时间：2012-10-07T09:33:19.577
> 
> 标签：android, eclipse, android-asynctask

我正在制作一个使用互联网检索信息的应用程序。当我尝试在 3.0 及更高版本上运行它时，我得到了一个`NetworkOnMainThreadException`，因此尝试使用 AsyncTask 进行设置，但它仍然给出异常，我不知道出了什么问题。奇怪的是，我在[AsyncTask 内部的这个线程 Android NetworkOnMainThreadException](https://stackoverflow.com/questions/9398418/android-networkonmainthreadexception-inside-of-asynctask)上读到，如果您只是`android:targetSdkVersion="10"`从清单文件中删除该语句，它将能够运行。这可行，但我认为它不是以这种方式解决问题的正确解决方案。

因此，如果有人能告诉我我在 AsyncTask 上做错了什么，我将不胜感激。此外，如果有人知道为什么删除清单中的语句使其起作用，我也对此很感兴趣。

我的代码如下所示：编辑：更新的代码。

```
public class MainActivity extends Activity {

static ArrayList<Tumblr> tumblrs;
ListView listView;
TextView footer;
int offset = 0;
ProgressDialog pDialog;
View v;
String responseBody = null;
HttpResponse r;
HttpEntity e;
String searchUrl;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    final ConnectivityManager conMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    final NetworkInfo activeNetwork = conMgr.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.isConnected()) {

        setContentView(R.layout.main);

        try {
            tumblrs = getTumblrs();
            listView = (ListView) findViewById(R.id.list);
            View v = getLayoutInflater().inflate(R.layout.footer_layout,
                    null);
            footer = (TextView) v.findViewById(R.id.tvFoot);
            listView.addFooterView(v);
            listView.setAdapter(new UserItemAdapter(this, R.layout.listitem));

        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (JSONException e) {
            e.printStackTrace();
        }
        new GetChicks().execute();
        footer.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                new loadMoreListView().execute();
            }
        });

    } else {
        setContentView(R.layout.nonet);

    }

}

public class UserItemAdapter extends ArrayAdapter<Tumblr> {

    public UserItemAdapter(Context context, int imageViewResourceId) {
        super(context, imageViewResourceId, tumblrs);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.listitem, null);

        }

        Tumblr tumblr = tumblrs.get(position);
        if (tumblr != null) {

            ImageView image = (ImageView) v.findViewById(R.id.avatar);

            if (image != null) {
                image.setImageBitmap(getBitmap(tumblr.image_url));

            }
        }

        return v;
    }
}

public Bitmap getBitmap(String bitmapUrl) {
    try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection()
                .getInputStream());
    } catch (Exception ex) {
        return null;
    }
}

public ArrayList<Tumblr> getTumblrs() throws ClientProtocolException,
        IOException, JSONException {
    searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=rTZsymOWtMudbb5tql2U20qQ5ooYLPYVNnL3COPpO2qBHDxJUu&limit=2&offset=0";

    ArrayList<Tumblr> tumblrs = new ArrayList<Tumblr>();
    return tumblrs;
}

private class GetChicks extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(searchUrl);

                HttpResponse r = null;
                try {
                    r = client.execute(get);
                    int status = r.getStatusLine().getStatusCode();
                    if (status == 200) {
                        e = r.getEntity();
                        responseBody = EntityUtils.toString(e);
                    }
                } catch (ClientProtocolException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                JSONObject jsonObject;
                try {
                    jsonObject = new JSONObject(responseBody);

                    JSONArray posts = jsonObject.getJSONObject("response")
                            .getJSONArray("posts");

                    for (int i = 0; i < posts.length(); i++) {
                        JSONArray photos = posts.getJSONObject(i)
                                .getJSONArray("photos");
                        for (int j = 0; j < photos.length(); j++) {
                            JSONObject photo = photos.getJSONObject(j);
                            String url = photo.getJSONArray("alt_sizes")
                                    .getJSONObject(0).getString("url");

                            Tumblr tumblr = new Tumblr(url);
                            tumblrs.add(tumblr);

                        }
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        return null;
    }

}

public class Tumblr {

    public String image_url;

    public Tumblr(String url) {

        this.image_url = url;

    }
}

private class loadMoreListView extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // Showing progress dialog before sending http request
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("More chicks coming up..");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... unused) {
        // TODO Auto-generated method stub

                // increment current page
                offset += 2;

                // Next page request
                tumblrs.clear();
                String searchUrl = "http://api.tumblr.com/v2/blog/factsandchicks.com/posts?api_key=rTZsymOWtMudbb5tql2U20qQ5ooYLPYVNnL3COPpO2qBHDxJUu&limit=2&offset="
                        + offset;

                HttpClient client = new DefaultHttpClient();
                HttpGet get = new HttpGet(searchUrl);

                HttpResponse r = null;
                try {
                    r = client.execute(get);
                    int status = r.getStatusLine().getStatusCode();
                    if (status == 200) {
                        HttpEntity e = r.getEntity();
                        responseBody = EntityUtils.toString(e);
                    }
                } catch (ClientProtocolException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                JSONObject jsonObject;
                try {
                    jsonObject = new JSONObject(responseBody);

                    JSONArray posts = jsonObject.getJSONObject("response")
                            .getJSONArray("posts");

                    for (int i = 0; i < posts.length(); i++) {
                        JSONArray photos = posts.getJSONObject(i)
                                .getJSONArray("photos");
                        for (int j = 0; j < photos.length(); j++) {
                            JSONObject photo = photos.getJSONObject(j);
                            String url = photo.getJSONArray("alt_sizes")
                                    .getJSONObject(0).getString("url");

                            Tumblr tumblr = new Tumblr(url);
                            tumblrs.add(tumblr);

                        }
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                // Setting new scroll position
                listView.setSelectionFromTop(0, 0);

        return null;
    }

    protected void onPostExecute(Void unused) {
        pDialog.dismiss();

    }

}

@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.cool_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.aboutUs:
        Intent i = new Intent("com.example.example.ABOUT");
        startActivity(i);

        break;
    case R.id.refresh:
        Intent f = new Intent(MainActivity.this, MainActivity.class);
        startActivity(f);
        finish();
        break;
    case R.id.exit:
        finish();
        break;
    }
    return false;
}

} 
```

日志如下所示：

```
 10-07 10:27:56.163: E/AndroidRuntime(923): FATAL EXCEPTION: AsyncTask #2
 10-07 10:27:56.163: E/AndroidRuntime(923): java.lang.RuntimeException: An error  occured while executing doInBackground()
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at  java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at  java.util.concurrent.FutureTask.run(FutureTask.java:137)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at java.lang.Thread.run(Thread.java:856)
 10-07 10:27:56.163: E/AndroidRuntime(923): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that  created a view hierarchy can touch its views.
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:3939)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:701)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.View.requestLayout(View.java:12555)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.View.requestLayout(View.java:12555)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.View.requestLayout(View.java:12555)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.View.requestLayout(View.java:12555)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.view.View.requestLayout(View.java:12555)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.widget.AbsListView.requestLayout(AbsListView.java:1690)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.widget.ListView.setSelectionFromTop(ListView.java:1928)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at com.fansheroid.facts.chicks.MainActivity$loadMoreListView.doInBackground(MainActivity.java:291)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at com.fansheroid.facts.chicks.MainActivity$loadMoreListView.doInBackground(MainActivity.java:1)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
 10-07 10:27:56.163: E/AndroidRuntime(923):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
 10-07 10:27:56.163: E/AndroidRuntime(923):     ... 5 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T09:41:30.940

您`runOnUiThread()`在用于在另一个线程中运行事物时调用方法，`AsyncTask`以避免在`doInBackground()`方法中为长进程拦截 UI 线程。我相信删除`runOnUiThread()`会完成这项工作。

# iphone - 发送邮件时出错（kSKPSMTPPartMessageKey 为零）

> ID：12767654
> 
> 赞同：0
> 
> 时间：2012-10-07T09:33:31.467
> 
> 标签：iphone, ios, ipad, gmail

我正在尝试使用“SKPSMTPMessage”在 iPhone 中发送邮件并添加了库，

在我的课堂上，我添加了以下代码：

```
- (IBAction)sendMail:(id)sender 
{
// if there are a connection
if ([theConnection isEqualToString:@"true"]) {
    if ([fromEmail.text isEqualToString:@""] || [toEmail.text isEqualToString:@""]) {
        UIAlertView *warning = [[UIAlertView alloc] initWithTitle:@"تحذير" message:@"لم يتم ادخال جميع المجالات" delegate:self cancelButtonTitle:@"موافق" otherButtonTitles:nil, nil];
        [warning show];
    }else {

        SKPSMTPMessage *test_smtp_message = [[SKPSMTPMessage alloc] init];
        test_smtp_message.fromEmail = fromEmail.text;
        test_smtp_message.toEmail = toEmail.text;
        test_smtp_message.relayHost = @"smtp.gmail.com";
        test_smtp_message.requiresAuth = YES;
        test_smtp_message.login = @"ebookmsg@gmail.com";
        test_smtp_message.pass =  @"myPass";
        test_smtp_message.wantsSecure = YES;

        NSString *subject= @"Suggest a book for you";
        test_smtp_message.subject = [NSString stringWithFormat:@"%@ < %@ > ",fromEmail.text, subject];
        test_smtp_message.delegate = self;

        NSMutableArray *parts_to_send = [NSMutableArray array];

        NSDictionary *plain_text_part = [NSDictionary dictionaryWithObjectsAndKeys:
                                         @"text/plain\r\n\tcharset=UTF-8;\r\n\tformat=flowed", kSKPSMTPPartContentTypeKey,
                                         [messageBody.text stringByAppendingString:@"\n"], kSKPSMTPPartMessageKey,
                                         @"quoted-printable", kSKPSMTPPartContentTransferEncodingKey,
                                         nil];
        [parts_to_send addObject:plain_text_part];

        // to send attachment

        NSString *image_path = [[NSBundle mainBundle] pathForResource:BookCover ofType:@"jpg"];
        NSData *image_data = [NSData dataWithContentsOfFile:image_path];        
        NSDictionary *image_part = [NSDictionary dictionaryWithObjectsAndKeys:
                                    @"inline;\r\n\tfilename=\"image.png\"",kSKPSMTPPartContentDispositionKey,
                                    @"base64",kSKPSMTPPartContentTransferEncodingKey,
                                    @"image/png;\r\n\tname=Success.png;\r\n\tx-unix-mode=0666",kSKPSMTPPartContentTypeKey,
                                    [image_data encodeWrappedBase64ForData],kSKPSMTPPartMessageKey,
                                    nil];

        [parts_to_send addObject:image_part];

        test_smtp_message.parts = parts_to_send;

        Spinner.hidden = NO;
        [Spinner startAnimating];
        ProgressBar.hidden = NO;
        HighestState = 0;

        [test_smtp_message send];

    }

}else {
    UIAlertView *alertNoconnection = [[UIAlertView alloc] initWithTitle:@"تحذير" message:@"لا يوجد شبكة " delegate:self cancelButtonTitle:@"الغاء" otherButtonTitles:nil, nil];
    [alertNoconnection show];
}
} 
```

但是当我尝试发送时，它给了我以下异常：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSCFString appendString:]: nil argument' 
```

它在 SKPSMTPMessage.m 中突出显示了这一行

```
 [message appendString:[part objectForKey:kSKPSMTPPartMessageKey]]; 
```

我不明白究竟什么是 nil 有人能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T12:18:09.657

我找到了解决方案，问题是因为 image_data 为空，我将其替换为：

```
 NSString *image_path = [NSString stringWithFormat:@"%@/%@",[[NSBundle mainBundle] bundlePath],[NSString stringWithFormat:@"%@.jpg",BookCover]];

        NSString *imgLink = [NSString stringWithFormat:@"http://iktab.com/global/modules/bookstore/files/book_cover_photo/%@",BookCover];

        NSString *urlString = [imgLink stringByReplacingOccurrencesOfString:@" " withString:@"%20"];

        NSURL *url = [NSURL URLWithString:urlString];

        NSData* image_data = [NSData dataWithContentsOfURL:url]; 
```

# git - 使用 'git pull' 与 'git checkout -f' 进行网站部署

> ID：12767657
> 
> 赞同：12
> 
> 时间：2012-10-07T09:34:00.340
> 
> 标签：git, web-deployment

我发现了两种使用裸远程仓库自动部署网站更新的常用方法。

第一个要求将 repo 克隆到网络服务器的文档根目录中，并在更新后挂钩中使用**git pull**。

```
cd /srv/www/siteA/ || exit
unset GIT_DIR
git pull hub master 
```

第二种方法将“分离的工作树”添加到裸存储库。post-receive 钩子使用**git checkout -f**将存储库的 HEAD 复制到工作目录中，即 webservers 文档根目录，即

```
GIT_WORK_TREE=/srv/www/siteA/ git checkout -f 
```

第一种方法的优点是可以提交在网站工作目录中所做的更改并将其推送回裸存储库（但是不应在实时服务器上更新文件）。第二种方法的优点是 git 目录不在文档根目录中，但这很容易使用 htaccess 解决。

就最佳实践而言，一种方法客观上是否优于另一种方法？我还缺少哪些其他优点和缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T12:04:20.887

在发布管理（这里是部署）方面，最好有一个独立于发布机制的目标环境。
换句话说，第二个解决方案 ( `checkout -f`) 将修改一个普通的 web 目录结构，没有任何其他不应该成为它的一部分的子目录（如`.git`文件夹）。
例如，我在“[使用 git 将我的 node.js 应用程序部署到我的生产服务器](https://stackoverflow.com/questions/12722130/using-git-to-deploy-my-node-js-app-to-my-production-server/12722204#12722204)”中使用它。

这最大限度地减少了任何副作用，并允许生产环境使用它需要运行的东西，而不会受到干扰。

# android - Android SDK：hello world 不运行

> ID：12767658
> 
> 赞同：3
> 
> 时间：2012-10-07T09:34:06.417
> 
> 标签：android, launch

我已经安装了 Java x64、Eclipse Classic Juno x64 + ADT 插件。操作系统赢 7 x64。我按照手册安装了所有东西。然后创建第一个应用程序并启动它。模拟器已启动，但 hello world 应用程序未启动。我不知道我做错了什么。有谁知道这样的错误和我的整体问题？谢谢

```
Console log:
[2012-10-06 13:35:42 - test] ------------------------------
[2012-10-06 13:35:42 - test] Android Launch!
[2012-10-06 13:35:42 - test] adb is running normally.
[2012-10-06 13:35:42 - test] Performing com.example.test.MainActivity activity launch
[2012-10-06 13:35:42 - test] Automatic Target Mode: launching new emulator with compatible AVD 'AVD_41'
[2012-10-06 13:35:42 - test] Launching a new emulator with Virtual Device 'AVD_41'
[2012-10-06 13:35:42 - Emulator] Failed to create Context 0x3005
[2012-10-06 13:35:42 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-10-06 13:35:42 - Emulator] WARNING: Data partition already in use. Changes will not persist!
[2012-10-06 13:35:42 - Emulator] WARNING: SD Card image already in use: C:\Users\Zewisa\.android\avd\AVD_41.avd/sdcard.img
[2012-10-06 13:35:42 - Emulator] WARNING: Cache partition already in use. Changes will not persist!
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] could not get wglGetExtensionsStringARB
[2012-10-06 13:35:42 - Emulator] emulator: warning: opening audio input failed
[2012-10-06 13:35:42 - Emulator] 
```

UPD：我更新了音频和视频驱动程序。所有错误都消失了，但应用程序仍然无法启动

UPD2：做了一些截图

![运行应用程序](../Images/a5069bfd3196b3c603fddc3c6da1194d.png)

![模拟器配置](../Images/2a11ea306103fdf4568464cabbaa8c0d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:47:17.430

有时应用程序被安装到模拟器上，但它的主要活动没有启动。检查模拟器上的应用程序以查看您的应用程序是否已安装。如果是，请尝试从那里启动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T16:05:25.347

我发现了错误，当它启动运行的应用程序并运行 hello world 时，我杀死了进程 adb.exe，而不是从 AVD Manager 启动模拟器，谢谢大家

# java - java获取当前文件内容

> ID：12767660
> 
> 赞同：1
> 
> 时间：2012-10-07T09:34:32.600
> 
> 标签：java, jnlp, java-web-start

我用 jnlp 创建了一个新的扩展——我使用了关联标签。单击具有特殊扩展名的文件后，它会打开程序。程序如何获取文件的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:46:14.443

有问题的文件将作为参数传递给主程序。

从那里，您将正常读取文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:47:42.720

[文件服务演示](http://pscode.org/jws/api.html#fs)。有一个声明`.zzz`扩展的完整示例。

基本上，文件名作为`String`参数传递给`main(String[])`方法。参数前面是一个带有 open 或 print 的字符串。

代码具有文件名后，创建一个`File`并加载它，就像您可能加载任何其他文件一样。

# android - Android：计划应用程序以重复警报开始不起作用

> ID：12767661
> 
> 赞同：1
> 
> 时间：2012-10-07T09:34:37.680
> 
> 标签：android, alarmmanager

我让我的广播接收器设置重复警报，以启动服务。不幸的是，这不会导致服务被重复调用（基于 logcat）。我也尝试过不同的时间间隔值。有人可以帮忙吗？（我正在通过 Eclipse 在 Android 3.2 Motorola xoom 上进行测试）

下面是广播接收器的代码。

```
 alarm = (AlarmManager) arg0.getSystemService(Context.ALARM_SERVICE);
    Intent intentUploadService = new Intent (arg0, com.vikramdhunta.UploaderService.class);

    Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 3);

    PendingIntent pi = PendingIntent.getBroadcast(arg0, 0, intentUploadService , 0);
    alarm.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), 5, pi); 
```

下面是服务类的代码

```
 public UploaderService()
    {
        super("UploaderService");
        mycounterid = globalcounter++;
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        synchronized(this)
        {
            try
            {
                for (int i = 1;i < 5;i++)
                {
// doesn't do much right now.. but this should appear in logcat
                    Log.i(TAG,"OK " + globalcounter++ + " uploading..." + System.currentTimeMillis());

                }
            }
            catch(Exception e)
            {

            }
        }   
    }
     @Override
        public void onCreate() {
            super.onCreate();
            Log.d("TAG", "Service created.");
        }

        @Override
        public IBinder onBind(Intent arg0) {
            return null;
        }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
    {
        Log.i(TAG, "Starting upload service..." + mycounterid);
        return super.onStartCommand(intent,flags,startId);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:02:03.077

好的 看起来我得到了这个。需要进行两项更改 -
1 - 我在需要执行 getService 时错误地使用了 PendingIntent.getBroadcast（见鬼，谁知道！）
2 - 在 getService 中，我应该在最后提供 PendingIntent.FLAG_UPDATE_CURRENT 而不是 0。FLAG_ONE_SHOT不工作。我想因为间隔只有 5 秒，所以这是正确的方法。

现在我得到了每 5 秒调用一次的正确服务/功能。欢呼！

# java - 使用代理控制器执行 rft 测试脚本？

> ID：12767663
> 
> 赞同：1
> 
> 时间：2012-10-07T09:34:48.453
> 
> 标签：java, qa, rft

我需要执行由**Rational Functional Tester**使用**Rational Agent Controller**生成的测试脚本，请你帮我知道我该怎么做？如果那不可能，我应该怎么做才能在没有安装 RFT 的计算机上执行脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T04:53:15.767

在 RFT 8.2.0.1 之后，为了能够在远程机器上执行脚本，必须在该机器上安装 RFT。

****** *** *****编辑****
RFT 的安装是一个完整的包安装，这意味着当您安装 RFT 时，它会安装一个能够在所有支持的域上录制/播放脚本的完整产品。**

 **所以不能说在这台机器**X**上只安装记录器，在机器**Y**上只安装播放引擎。
另一种方法可能是在服务器机器上安装某种工具，它会说这是脚本，在没有安装 RFT的机器**Z**上执行.. 但由于脚本可能记录了所有控件必须将域 (html/java/.net/SAP/Win32) 所有支持文件 DLL /JAR (由代理和操作系统相关的共享库组成) 转移到那台机器上，我认为这将是一项艰巨的任务:) 。所以在我看来，这不是不可能的，只是还没有完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T19:58:55.180

错了，也不是不可能。只是需要很多配置。 [http://www-01.ibm.com/support/docview.wss?uid=swg21319598](http://www-01.ibm.com/support/docview.wss?uid=swg21319598)

要在远程机器上执行 RFT 脚本：确保在部署远程执行之前编译脚本（java 或 .net）。编译成功后，为了开始远程执行，在master机器上，需要正确安装和配置Test Manager。

以下是主控机上TM的配置： 在“执行”选项卡中，右键单击“计算机”，添加新计算机，指定计算机名称、属性和端口信息，这样TM就可以找到远程机器。远程机器的设置将分别针对 java 脚本和 .net 脚本进行描述。对于 java 脚本，远程机器上需要以下内容：Test Manager Test Agent。（可以从测试管理器 CD 安装）。Rational Functional Tester 测试代理。（可以从 RFT 安装包中安装）。对于 .net 脚本，远程计算机上需要以下内容：测试管理器测试代理。（可以从测试管理器 CD 安装）。Rational Functional Tester 测试代理。（可以从 RFT 安装包中安装）。.Net 框架。

最后但同样重要的是，如果客户的 AUT 是基于 Windows/.net/SAP 的，那么无论是 java 脚本还是 .net 脚本，都需要在远程机器上安装 .net 框架。这是因为 RFT 的部分代码在感染期间被放入应用程序中，这些应用程序的 RFT 代码是用 C# 编写的，因此在运行时，需要 .net 框架才能成功播放。**

# mysql - 来自两个不同表的两个不同主键的外键引用是否有效？

> ID：12767666
> 
> 赞同：0
> 
> 时间：2012-10-07T09:35:12.527
> 
> 标签：mysql, database-design, innodb

我有一个外键必须引用两个不同表的主键。

表 1：动物

```
 animal_ id (primary key) 
```

表 2：鸟

```
 bird_ id (primary key) 
```

表 3：宠物信息

```
 pet_id,
      type ENUM ('bird', 'animal')
      foreign key (pet_ id) references animal(animal_id), bird(bird_id) 
```

因此，我需要根据需要从动物表或鸟表中检查 pet_id。这是有效的吗？或者我应该进行一些重组。. .

**注意：** [我提到了这个。.](https://stackoverflow.com/questions/7056918/reference-key-from-either-of-two-different-tables) 但我不确定是否必须更改现有设计

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:47:12.597

看这个页面：[http](http://www.tomjewett.com/dbdesign/dbdesign.php?page=subclass.php) ://www.tomjewett.com/dbdesign/dbdesign.php?page= subclass.php 在动物和鸟类表中做一个pet_id。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-07T09:41:54.633

这是一个糟糕的设计。为所有具有所有属性的宠物准备一张桌子，其中一张是类型。

# python - Import Error: No module named AppKit

> ID：12767669
> 
> 赞同：14
> 
> 时间：2012-10-07T09:35:56.667
> 
> 标签：python, appkit

I use `Mac OS X Lion` and `Python 2.7`. I am new to python. Can anyone tell me how to `import` `AppKit` and `PyObjC` to `Python`. But i get the errors when trying to import `Import Error: No module named AppKit` or '`Import Error: No module named PyObjC`.

Trying `easy_install` does not help either. ![This is a screenshot when I run <code>easy_install PyObjC</code>](../Images/c4f3f1aa8ee0acf906c1d3e0a7cc7089.png)

What can i do to import these 2 modules?

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-01-16T10:53:02.277

如果尚未安装，请`pip`运行以下命令进行安装：

```
sudo easy_install pip 
```

然后运行：

```
## install for all users
sudo pip install pyobjc 
```

或者

```
## install for current user only
pip install pyobjc --user 
```

> ^(*注意：一般建议是*避免*使用系统 python，而是使用用户维护的版本，例如通过、`brew install python3`或任何您已经用于第三方依赖项的方式安装。`macports``conda`*)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-22T16:41:14.540

如果您使用的是 Mac，则可能是您使用了不正确的 pip 版本，请尝试 sudo **pip3** install -U pyobjc 为我解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T10:48:00.513

这是关于如何安装 PyObjc 的一个很好的指南：http: [//ioanna.me/2009/09/installing-pyobjc-xcode-templates-in-snow-leopard/](http://ioanna.me/2009/09/installing-pyobjc-xcode-templates-in-snow-leopard/)

当我尝试安装 PyObjc 时，我发现它非常困难，但过了一段时间，（以及大量的谷歌搜索）我让它工作了。

**编辑**

我找到了有关如何执行此操作的更现代的指南。下载[模板](https://github.com/gregneagle/Xcode4CocoaPythonTemplates)并将它们放入您的`~/Library/Developer/Xcode/Templates/`目录，一切都应该正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-04T17:14:40.747

如果您使用的是 PyCharm，您应该`PyObjC`在其中手动安装软件包，因为我猜是 venv。这对我来说是唯一可行的解​​决方案。

# selenium-rc - How to do 404 link testing through selenium rc for complete website?

> ID：12767670
> 
> 赞同：1
> 
> 时间：2012-10-07T09:36:07.300
> 
> 标签：selenium-rc, link-checking, xenu

How can i verify a complete website's link(mostly links that are redirecting to 404 page) by using **Selenium RC**. Previously I tried to do this thong by using xenu and web link validator but in there results most of the links are showing `500 internal serevr error`. And for the pages they are showing `500 internal server error` actually don't exists in the web site.

So what is the concept if we can crawl through the website using **Selenium RC**.?

# function - 致命错误：调用 database.php 中未定义的函数

> ID：12767678
> 
> 赞同：0
> 
> 时间：2012-10-07T09:38:12.907
> 
> 标签：function, undefined, php

**更新突然 - 没有改变任何东西 - 它在某些页面上再次工作，在其他页面上它甚至没有显示我的函数 function_exists('decod') 的结果，任何想法为什么？**

我收到此错误：

> **致命错误：在第 10 行的 database.php 中调用未定义函数 decod()**

它以前工作得很好，这里是database.php：

```
//Decode base64
function decod($string){ 
  $string = base64_decode($string); 
  return ($string); 
} 

//Data double-coded with base64, just to prevent people reading
$host = "localhost";
$user = decod(DOUBLE_ENCRYPTED_USERNAME);
$pass = decod(DOUBLE_ENCRYPTED_PASSWORD);
$db = decod(DOUBLE_ENCRYPTED_DATABASE);

//Connect or print error
$con = mysql_connect($host, decod($user), decod($pass));
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}
//Select database
mysql_select_db(decod($db), $con); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:41:16.110

好吧，解释器找不到您的功能`decod()`。无论它做什么以及它位于何处，它都必须包含在您的代码中的某个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:43:27.133

您可以检查该函数是否已在当前文件中定义或未使用

```
 function_exists ( string $function_name ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:08:56.690

人为错误 - 原来我的网站指向错误的 database.php

# postgresql - 当行数增加时，这个 PostgreSQL 查询如何变慢？

> ID：12767685
> 
> 赞同：3
> 
> 时间：2012-10-07T09:39:35.200
> 
> 标签：postgresql, optimization

我有一个结构简单的表格，如下所示：

```
tn( id integer NOT NULL primary key DEFAULT nextval('tn_sequence'),
                 create_dt TIMESTAMP NOT NULL DEFAULT NOW(),
                             ...............
                 deleted boolean ); 
```

`create_dt`是将行插入数据库时​​的时间戳。

`deleted`指示该行是否有用或不再有用。

我有以下查询：

```
select * from tn where create_dt > ( NOW() - interval '150 seconds ) and deleted = FALSE;
select * from tn where create_dt < ( NOW() - interval '150 seconds ) and deleted = FALSE; 
```

我的问题是当行数增加时这些查询将如何减慢？例如，当行数超过 10K、20K 或 100K 时，是否会对速度产生很大影响？有什么办法可以优化这些查询吗？请注意，每 5 秒我会将超过 150 秒的行的“已删除”列变为“真”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T09:49:36.573

表增长对性能的影响将取决于选择的查询计划、可用索引、查询的选择性以及许多其他因素。`EXPLAIN ANALYZE`关于查询可能会有所帮助。简而言之，如果您的查询只选择几行并且可以使用简单的 b-tree 索引，那么它通常不会减慢很多，只会随着索引的增长而减慢。另一方面，使用复杂的非索引条件或返回大量行的查询确实可能执行得非常糟糕。

您的问题似乎反映了问题[我们应该如何处理一旦在 PostgreSQL 中过时就不会被查询的行？](https://dba.stackexchange.com/questions/25129/how-should-we-handle-rows-which-wont-be-queried-once-they-are-old-in-postgresql)

那里给出的建议应该适用：

*   使用带有条件的[部分索引](http://www.postgresql.org/docs/current/static/indexes-partial.html)`WHERE (not deleted)`；或者
*   [启用约束排除](http://www.postgresql.org/docs/current/static/runtime-config-query.html#GUC-CONSTRAINT-EXCLUSION)的“已删除”[分区](http://www.postgresql.org/docs/current/static/ddl-partitioning.html)。

例如，您可能：

```
CREATE INDEX create_dt_when_not_deleted_idx 
ON tn (create_dt)
WHERE (NOT deleted); 
```

这仅包括索引中`deleted = 'f'`（假设`deleted`为“非空”）的行。这与让他们完全从桌子上消失是不一样的。

*   全表顺序扫描没有任何变化，`deleted='t'`仍然必须扫描行；和
*   与不存在行相比，I/O 会更多`deleted = 't'`，因为任何给定的堆页面都可能包含混合行`deleted = 't'`和`deleted = 'f'`行。

`CLUSTER`您可以通过对包含 的索引进行 ing来减少后者的影响`deleted`。同样，这对顺序扫描没有影响。为了帮助进行顺序扫描，您必须在`deleted`.

Pg 9.2 的仅索引扫描应该（我认为，尚未测试）使用部分索引。当只能进行索引扫描时，部分索引应该与仅包含`deleted = 'f'`行的表上的索引一样快。

请注意，您需要控制表和索引膨胀。确保 autovaccum 运行非常频繁，并使用不需要手动管理的可用空间映射之类的当前版本的 PostgreSQL，并且具有最新的、表现最佳的 autovacuum。我推荐 9.0 或更高版本，最好是 9.1 或 9.2。调整 autovacuum 以积极运行。

在调整和测试性能时 - 使用 测试您的查询`EXPLAIN ANALYZE`，不要只是猜测。

# vbscript - 通过 bat 或 vbs 切换扩展

> ID：12767687
> 
> 赞同：0
> 
> 时间：2012-10-07T09:39:37.870
> 
> 标签：vbscript, batch-file, file-rename, batch-rename

我需要快速切换特定文件夹中包含的所有文件的扩展名。

假设`C:\My Folder\`包含 200 个文件（全部`.txt`）。

通过执行脚本，我将它们全部更改为`.xml`

进而

通过再次执行**相同的**脚本，我将它们全部改回`.txt`.

换句话说，执行**这个**脚本将无限期地将这 200 个文件（如果它们是`.txt`）转换为`.xml`和（如果它们是`.xml`）`.txt`并循环...

对于一批我想到了这样的事情（这不起作用**）**：

```
@echo off

IF EXIST "C:\My Folder\*.txt" GOTO RENAMETXT
IF NOT EXIST "C:\My Folder\*.txt" GOTO RENAMEXML

:RENAMETXT
ren "C:\My Folder\*.txt" "*.xml"

:RENAMEXML
ren "C:\My Folder\*.xml" "*.txt" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:26:06.757

您建议的批处理脚本不起作用，因为该`:RENAMETXT`部分属于`:RENAMEXML`. 它可以通过简单地插入`EXIT /B`before来修复`:RENAMEXML`。

但是不需要 GOTO 或 EXIT /B - 您可以简单地使用 IF ... ELSE ...

```
@echo off
if exist "C:\My Folder\*.txt" (
  ren "C:\My Folder\*.txt" *.xml
) else (
  ren "C:\My Folder\*.xml" *.txt
) 
```

# java - Unhandled exception type IOEsxception using ApacheCommnonsIO's method

> ID：12767689
> 
> 赞同：0
> 
> 时间：2012-10-07T09:40:05.693
> 
> 标签：java, eclipse, ioexception, unhandled

I am trying to use copyDirectory() method from ApacheCommnonsIO package.

My code is:

**First Class**

```
import java.io.*;
import org.apache.commons.io.FileUtils;
public class ClassN1{
 public static methodThatUsesCPDIRMethod(){
  String src = "/home/user/dir_src";
  String dst = "/home/user/dir_dst";
  try {
   FileUtils.copyDirectory(new File(src), new File(dst));
  } catch (IOException e){  }
 } 
```

**Second class**

```
public class ClassN2{
 public ClassN2(){
  ClassN1.methodThatUsesCPDIRMethod();
 }
} 
```

**Main method**

```
public class Main{
 public static void main(String[] args){
  ClassN2 obj = new ClassN2();
 } 
```

}

Is just an example, in code I haven't syntax errors, that can be there.

Problem: the ClassN1.methodThatUsesCPDIRMethod() in second's class constructor is highlighted with an error:

```
 Unhandled exception type IOEsxception 
```

I use VIM + Eclim plugin (Eclipse)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:09:21.527

我没有检查这个，但看起来 FileUtils 正在抛出你的班级没有捕捉到的这个 IOEsxception（有趣的拼写！？）。在这种情况下，您必须将此异常添加到方法（在您的情况下为 c'tor），或者更改 catch 语句以捕获异常。

```
 try {
   FileUtils.copyDirectory(new File(src), new File(dst));
  } catch (Exception e){ //Please log at least a message here!!! } 
```

# django - django model filefield having db error

> ID：12767690
> 
> 赞同：0
> 
> 时间：2012-10-07T09:40:11.900
> 
> 标签：django, django-models, django-forms, django-file-upload

I am using django 1.4 and using django model's filefield to upload some document via modelform. I am having following issues:

When I submit form it says:

```
Data truncated for column 'file_name' at row 1 
```

Following is my model for this:

```
class App(models.Model):
    user_name=models.CharField(max_length=50)
    email=models.CharField(max_length=50)
    status=models.CharField(max_length=10,choices=APPLICATIONSTATUSCHOICE)
    archived=models.BooleanField()
    mark_spam=models.BooleanField()
    date=models.DateField()
    file_name=models.FileField(upload_to=PATH+"/")
    def getPath(self):
        return PATH
    def __unicode__(self):
        return self.user_name
    def send_email(self):
        pass 
```

Here is the code for model form:

```
class AppForm(ModelForm):
    class Meta:
     model=App
         exclude=('status','archived','mark_spam')

email=forms.EmailField()

    def save(self,commit=True):
         app=super(AppForm,self).save(commit=False)
     app.status='sent'
         app.save() 
```

Also it is storing file with its original name,can I have it with something unique name as I am from PHP background and in PHP I normally save it like `<mysql auto id>.<filextension>`, so how can I do it in django. My first impression was that all this will be automatically done via django while it just save it with name of its own choice but I need to save names into db also so want to name them according to my choice. How can it be done and what is problem in my code that is giving above mentioned error?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:46:51.210

`file_name`您要存储多长时间？

默认情况下，[FileField](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)实例在数据库中创建为 varchar(100) 列。与其他字段一样，您可以使用 max_length 参数更改最大长度。这可能会导致数据截断错误。

您也可以根据需要重命名文件。`upload_to`可以是一个[可调用](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to)的，它将实例和上传文件的名称作为输入，然后您可以指定要存储的确切名称和路径。

例如。

```
def get_file_name(instance, filename):
    return '/'.join(['blah', instance.user.username, filename])

...
    file_name=models.FileField(upload_to=get_file_name)
... 
```

# apache-flex - Flex 移动 Web 应用程序 - 本机摄像头和 GPS 访问

> ID：12767694
> 
> 赞同：0
> 
> 时间：2012-10-07T09:40:36.963
> 
> 标签：apache-flex, mobile, web

我有一个旧的 flex 网络应用程序，现在需要访问智能手机上的相机和 gps。我看到有外部库可以为您完成一些工作，但需要的是本地 flex 支持，以便从移动浏览器访问手机的 GPS 和相机。

如有必要，可以将应用程序重新编译为从 3 到 4.6 的任何版本的 flex。

进一步澄清：SWF 文件嵌入网页中，然后显示在平板电脑/手机（android、ios 等）上。我希望能够从硬件 GPS 读取当前 GPS 坐标，并能够使用车载摄像头拍照。

如果这 100% 不可能，我可以调用 JavaScript 函数从第三方组件读取照片和 GPS，该组件需要包含所有移动设备，并且与 flex 外部接口设置兼容。

感谢您提前提供帮助。皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T00:08:11.680

就此而言，您几乎可以忘记在移动设备和台式机上使用闪存，它现在是一种死胡同。

可悲的是，很少有移动设备可以让您通过浏览器访问相机。有一些，但例如 iOS 尚未实施该标准。因此，至少再过一年左右，您将无法轻松访问相机。这取决于苹果、谷歌和微软何时齐心协力。

至于 GPS，任何人使用的所有移动浏览器都支持地理定位规范，因此您可以知道用户在哪里。

[http://professionalaspnet.com/archive/2012/05/25/A-Study-Using-The-HTML5-Geolocation-API.aspx](http://professionalaspnet.com/archive/2012/05/25/A-Study-Using-The-HTML5-Geolocation-API.aspx)

# php - 将多个 JSON 合并为单个对象

> ID：12767695
> 
> 赞同：0
> 
> 时间：2012-10-07T09:40:37.530
> 
> 标签：php, arrays, json

我有多个 JSON 文件，我想对其进行解析、编辑和合并到一个对象中，最终将其重新编码并输出为单个 JSON。

我目前有一个关于何时解析和编辑一个对象的工作示例，但我不知道如何做两个并获得一个结果。

工作示例：

```
$source = 'http://www.jakedup.com/_/source1';

$data = json_decode(file_get_contents($source));

// THIS WILL BE THE FINAL OUTPUT OBJECT
$output = new stdClass();

// GET THE ARTICLE DATES AS AN ARRAY
$tracks = get_object_vars($data->tracks);

// LOOPS OVER ARTICLE PUBDATES TO GET THE OUTER OBJECTS
foreach ($tracks as $key=>$val) {
  // LOOPS OVER THE INNER OBJECTS IN EACH ARTICLE PUBDATE
  foreach ($data->tracks->$key as $object) {
    // ADD IT ONTO THE OUTPUT OBJECT WITH "ID" AS PARENT NAME
    $output->{$object->id} = $object;
  }
}

echo json_encode($output); 
```

这是我的 JSON 示例。我提供了两个示例，但我正在寻找一种动态合并无限数量的 JSON 文件的方法。

JSON 源 1：

```
{
    "foo":"bar",
    "tracks":{
        "1349496000":[
            {
                "id":"25328",
                "is_promo":null,
                "is_feature":null,
                "listens":"1312",
                "downloads":"777"
            },
            {
                "id":"25327",
                "is_promo":null,
                "is_feature":null,
                "listens":"1255",
                "downloads":"578"
            },
            {
                "id":"25329",
                "is_promo":null,
                "is_feature":null,
                "listens":"341",
                "downloads":"139"
            }
        ],
        "1349323200":[
            {
                "id":"25310",
                "is_promo":null,
                "is_feature":null,
                "listens":"10793",
                "downloads":"4953"
            }
        ]
    }
} 
```

JSON 源 2：

```
{
    "foo":"bar",
    "tracks":{
        "1349323200":[
            {
                "id":"25303",
                "is_promo":null,
                "is_feature":null,
                "listens":"2347",
                "downloads":"1499"
            }
        ],
        "1349236800":[
            {
                "id":"25266",
                "is_promo":null,
                "is_feature":null,
                "listens":"24485",
                "downloads":"19366"
            }
        ]
    }
} 
```

我一直在玩弄循环获取源的想法，但是在合并数据时我被卡住了。我所有的不同努力都没有产生正确的数据结构。

当前测试代码：

```
$source = 'http://www.jakedup.com/_/source';
$pages = 2;

    for ($i = 1; $i <= $pages; $i++) {
        $sources[$i] = $source.$i;
        ${'source'.$i} = json_decode(file_get_contents($source.$i));
    } 
```

我现在有两个对象——$source1 和 $source2——但我不确定下一步该做什么。

这是我期待的输出：

```
{
    "25328": {
        "id": "25328",
        "is_promo": null,
        "is_feature": null,
        "listens": "1312",
        "downloads": "777",
        "timestamp": "1349496000"
    },
    "25327": {
        "id": "25327",
        "is_promo": null,
        "is_feature": null,
        "listens": "1255",
        "downloads": "578",
        "timestamp": "1349496000"
    },
    "25329": {
        "id": "25329",
        "is_promo": null,
        "is_feature": null,
        "listens": "341",
        "downloads": "139",
        "timestamp": "1349496000"
    },
    "25310": {
        "id": "25310",
        "is_promo": null,
        "is_feature": null,
        "listens": "10793",
        "downloads": "4953",
        "timestamp": "1349323200"
    },
    "25303": {
        "id": "25303",
        "is_promo": null,
        "is_feature": null,
        "listens": "2347",
        "downloads": "1499",
        "timestamp": "1349323200"
    },
    "25266": {
        "id": "25266",
        "is_promo": null,
        "is_feature": null,
        "listens": "24485",
        "downloads": "19366",
        "timestamp": "1349236800"
    }
} 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:47:44.393

使用 PHP 数组比尝试`stdClass`使用数字属性构建对象更简单一些。如果 PHP 数组具有非连续的、基于非零的键，`json_encode()`将自动生成一个对象`{}`而不是数组。`[]`同样[`json_decode()`](http://php.net/manual/en/function.json-decode.php)有一个可选的第二个参数来产生一个关联数组而不是一个对象。所以我建议将文件解码为一个数组并循环它们，将每个文件附加`id`到一个输出数组上，你最终会`json_encode()`再次使用它。

您的代码暗示您有 JSON 源文件，例如“http://www.jakedup.com/_/source1”。您在正确的轨道上，但不是填充新的变量变量，而是在循环中检索和解码每个文件，并将其直接附加到输出数组。

```
// 5 source numbers, don't have to be consecutive
$sources = array(1,2,3,4,5);
// Output array to be encoded as JSON
$output = array();

// Loop over all the source files, retrieve them and add tracks onto the output    
foreach ($sources as $sourcenum) {
  $source = "http://www.jakedup.com/_/source$sourcenum";
  $source_json = file_get_contents($source);

  // Decode it as an associative array, passing TRUE as second param
  $source_array = json_decode($source_json, TRUE);

  // Now loop over the tracks (which are an array) and append each to the output
  // the original key looks like a timestamp
  foreach ($source_array['tracks'] as $timestamp => $ts) {
    foreach ($ts as $track) {
      // Add the track id to $output as a key
      // This doesn't check if the id already exists...
      // if it does, it will just be overwritten with this one
      $output[$track['id']] = $track;
      // Optionally, save the original timestamp key into the track array
      // Maybe you don't care about this
      $output[$track['id']]['timestamp'] = $timestamp;
    }
  }
}

// Look over your array
var_dump($output);

// Finally, re-encode the whole thing back to JSON
// using JSON_FORCE_OBJECT (even though it shouldn't be necessary)
$output_json = json_encode($output, JSON_FORCE_OBJECT); 
```

### JSON输出：

```
{
    "25328": {
        "id": "25328",
        "is_promo": null,
        "is_feature": null,
        "listens": "1312",
        "downloads": "777",
        "timestamp": 1349496000
    },
    "25327": {
        "id": "25327",
        "is_promo": null,
        "is_feature": null,
        "listens": "1255",
        "downloads": "578",
        "timestamp": 1349496000
    },
    "25329": {
        "id": "25329",
        "is_promo": null,
        "is_feature": null,
        "listens": "341",
        "downloads": "139",
        "timestamp": 1349496000
    },
    "25310": {
        "id": "25310",
        "is_promo": null,
        "is_feature": null,
        "listens": "10793",
        "downloads": "4953",
        "timestamp": 1349323200
    },
    "25303": {
        "id": "25303",
        "is_promo": null,
        "is_feature": null,
        "listens": "2347",
        "downloads": "1499",
        "timestamp": 1349323200
    },
    "25266": {
        "id": "25266",
        "is_promo": null,
        "is_feature": null,
        "listens": "24485",
        "downloads": "19366",
        "timestamp": 1349236800
    }
} 
```

# mysql - 在 MySQL 中使用 BETWEEN 范围是否有无穷大或通配符？

> ID：12767702
> 
> 赞同：4
> 
> 时间：2012-10-07T09:41:36.343
> 
> 标签：mysql

例如，我有一个程序，我在其中接受范围为 1 到 100 的 MySQL 查询的输入。用户可以从网页中选择一个范围以使查询介于 100 和（无论无穷大）之间。除非必须，否则我不想只为无限选择更改 MySQL 查询。100 和 * 之间是否存在？如果是这样，语法是什么？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T09:42:55.613

不，没有办法在 BETWEEN 子句中使用通配符。但是您可以使用该类型的最小/最大可能值，这将达到相同的效果。

例如，如果您有一个类型为`BIGINT`(signed) 的列，那么您可以将`9223372036854775807`其用作上限，因为这是该数据类型可能的最大值。

```
WHERE x BETWEEN 100 AND 9223372036854775807 
```

[此处](http://dev.mysql.com/doc/refman/5.6/en/numeric-types.html#integer-types)列出了整数值的限制。

* * *

另一个明显的解决方案是使用`>=`or`<=`代替`BETWEEN`当其中一个端点不受限制时。但正如你所说，这需要更改查询。

```
WHERE x >= 100 
```

* * *

还有一些方法可以避免更改查询，方法是使用更复杂的查询并在您的意思是无限时提供 NULL。

```
WHERE (x >= @lowerbound OR @lowerbound IS NULL)
AND (x <= @upperbound OR @upperbound IS NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-06T09:13:13.180

我建议在 lower == null 时使用它，然后它将被 0 替换，当 upper 为 null 时，它将被 max bigint 替换

```
SELECT * FROM `mytable` WHERE 50 between ifnull(lower,0) and ifnull(upper,~0) 
```

# c# - In asp.net how to validate textbox depending on other text box?

> ID：12767704
> 
> 赞同：-1
> 
> 时间：2012-10-07T09:42:02.250
> 
> 标签：c#, asp.net

In asp.net Depending on Experience I should validate the salary of an employee.

If the employee is fresher his salary should be 1 lac to 1.5 lac. Or salary = 1.5 lac * years of exp to 3.5 * years of exp.

******** i have tried his********** protected void Button1_Click(object sender, EventArgs e) {**

 **```
 if (IntExp == 0)
    {
        RangeValidator1.MaximumValue = "150000";
        RangeValidator1.MinimumValue = "100000";

        RangeValidator1.Type = ValidationDataType.Integer;
        RangeValidator1.Validate();
        if (!RangeValidator1.IsValid)
        {
            RangeValidator1.ErrorMessage = "Enter CTC between 100000 and 150000";
        }
        Response.Redirect("ABCAddEmp.aspx");

    }
    else
    {
        int max = IntExp * 150000;
        int min = IntExp * 350000;
        RangeValidator1.MaximumValue = "max";
        RangeValidator1.MinimumValue = "min";
        RangeValidator1.Type = ValidationDataType.Integer;
        RangeValidator1.Validate();

        if (!RangeValidator1.IsValid)
        {
            RangeValidator1.ErrorMessage = "Enter CTC between " + max + " and " + min;
        }
        Response.Redirect("ABCAddEmp.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:58:24.037

您正在寻求实现自定义验证器。当您将自定义验证器放在页面上时，您的 controlToValidate 将是薪水。然后你需要定义你的 ServerValidate 事件。在这种情况下，您可以根据是新员工还是有经验来验证员工的输入。祝你好运。**

# ruby - Getting the name of the defined method

> ID：12767705
> 
> 赞同：4
> 
> 时间：2012-10-07T09:42:13.433
> 
> 标签：ruby, metaprogramming

I know that I can capture the moment of a method definition by using `set_trace_func`.

```
set_trace_func ->event, file, line, method, binding, klass{
  if event == "c-call" and method == :method_added
    # The moment of method definition
  end
} 
```

1.  Is it possible to capture the name of the method being defined at such moment? I know that the class can be captured by `eval("self", binding)`. What code can I put inside the block shown above to capture the method name?
2.  Is it further possible to get the format of the arguments for the method being defined (the required arguments, the rest of the arguments, and their names as is in the source)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:21:34.343

在之外`set_trace_func`，您可以使用`Module.method_added`：

```
class Test
  def self.method_added(method_name)
    puts "#{method_name} added to #{self}"
  end

  def foo
    "foo"
  end
end

$ ruby test.rb
# => foo added to Test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T06:23:48.400

检查文档。

`Kernel.set_trace_func`proc 允许您捕获`id`参数。这——大多数时候——是函数名。

但是，从您的示例中学习，您还可以使用`eval("__method__", binding)`...获取当前运行的方法，但我认为这只会获取您在类中定义的方法。

# android - Link of class "*.*" failed in Eclipse?

> ID：12767706
> 
> 赞同：4
> 
> 时间：2012-10-07T09:42:51.747
> 
> 标签：android, adt, ads, adwhirl

I try to integrate AdWhirl into my app. I do everything from the Internet and nothing success now. It just shows

```
10-07 16:25:42.183: I/dalvikvm(628): Failed resolving Lcom/adwhirl/adapters/MdotMAdapter;
 interface 1374 'Lcom/mdotm/android/ads/MdotMView$MdotMActionListener;'
 10-07 16:25:42.183: W/dalvikvm(628): Link of class 'Lcom/adwhirl/adapters/MdotMAdapter;' failed 
```

I checked Android Dependencies in Java Build Path, did remove/add all jar in libs folder, but still no luck at all. Could you give me some advices?

My system info:

Eclipse Helios 3.7.

ADT r20.

Testing device: Emulator 2.3.3.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:43:02.180

尝试在eclipse中使用源代码清理右键单击项目>>源代码>>清理

# c# - How to dynamically generate html with .ascx?

> ID：12767712
> 
> 赞同：0
> 
> 时间：2012-10-07T09:44:03.063
> 
> 标签：c#, asp.net, visual-studio-2008, ascx

I have some settings stored in web.config like this:

```
<add key="Answers" value="radiobutton1,radiobutton2,radiobutton3"/> 
```

Radiobutton1, radiobutton2 and radiobutton3 are radiobutton label values.

In settings.cs I have a function to retrieve value from web.config:

```
 public static string Answers
    {
        get
        {
            return System.Configuration.ConfigurationManager.AppSettings["Answers"];
        }
    } 
```

.ascx file:

```
<table runat="server" OnPreRender="Radio_PreRender" id="table1" name="table1">

</table> 
```

My ascx.cs file contains this function:

```
protected void Radio_PreRender(object sender, EventArgs e)
{
    if (Settings.Answers != "")
    {
        int counter = 0;
        string a = Settings.Answers;
        string[] words = a.Split(',');

        StringWriter stringwriter = new StringWriter();
        HtmlTextWriter writer = new HtmlTextWriter(stringwriter);

        foreach (string word in words)
        {
            writer.WriteBeginTag("tr");
            writer.WriteBeginTag("td");
            writer.Write("abc123");

            RadioButton rdb1 = new RadioButton();
            rdb1.Checked = true;
            rdb1.GroupName = "rdbgroup";
            rdb1.ID = "radiobutton" + counter;
            rdb1.Text = word;
            table1.Controls.Add(rdb1 );

            writer.WriteEndTag("td");
            writer.WriteBeginTag("tr");
            table1.Render(writer);   
            counter++;
        }
    }
} 
```

In other words, I want to generate a dynamic number of this code inside table1:

```
<tr>
  <td>
    // input type="radiobutton" and label go here.
  </td>
</tr> 
```

At the moment radiobuttons are not generated, because they can't be direct child elements to a table. If I specify a div instead, radiobuttons are generated, but everything I try to write with HtmlTextWriter is not. I understand that my html has to be rendered by using **table1.Render(writer);** or something similar, but I can't figure it out.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:52:15.467

您可以尝试创建一个表格并将其添加到您正在处理的页面中，使用下面的示例您可以用单选按钮替换文本框

这是一个例子：

```
 //Creat the Table and Add it to the Page
            Table table = new Table();
            table.ID = "Table1";
            Page.Form.Controls.Add(table);
            // Now iterate through the table and add your controls 
            for (int i = 0; i < rowsCount; i++)
            {
                TableRow row = new TableRow();
                for (int j = 0; j < colsCount; j++)
                {
                    TableCell cell = new TableCell();
                    TextBox tb = new TextBox();

                    // Set a unique ID for each TextBox added
                    tb.ID = "TextBoxRow_" + i + "Col_" + j;

                    // Add the control to the TableCell
                    cell.Controls.Add(tb);
                    // Add the TableCell to the TableRow
                    row.Cells.Add(cell);
                }
                // Add the TableRow to the Table
                table.Rows.Add(row);
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:00:50.663

我经常通过在整个 asp.net 生命周期中运行用户控件并将其作为字符串获取来执行此操作：

[http://www.diaryofaninja.com/blog/2009/09/14/a-simple-solution-to-viewing-a-preview-of-any-page-in-your-site](http://www.diaryofaninja.com/blog/2009/09/14/a-simple-solution-to-viewing-a-preview-of-any-page-in-your-site)

这样您就可以将 ASP.Net 用作任何东西的模板引擎

```
Page tempPage = new Page();
UserControl myUserControl = new MyUserControl();
tempPage.Controls.Add(myUserControl);

StringWriter sw = new StringWriter();
HttpContext.Current.Server.Execute(tempPage, sw, false);
if (!String.IsNullOrEmpty(sw.ToString()))
{
    return sw.ToString();
} 
```

# android - android audio - 生成一个简单的可定制铃声/锣声

> ID：12767718
> 
> 赞同：0
> 
> 时间：2012-10-07T09:45:35.700
> 
> 标签：android, audio

我现在正在为 android 编写一个倒数计时器，我想让用户能够自定义用于它的声音。与其提供一组固定的声音，我更愿意为用户提供一些可以自定义声音的设置（并且应用程序会根据用户设置生成声音）。我想要一个基本的铃/锣类型的声音，没什么特别的。

我发现像[jass](http://www.cs.ubc.ca/~kvdoel/jass/)这样的库可以提供这种音频生成，但我还没有找到可以用于 android 的东西。

如果有人能给我一些想法，看看哪个方向，那就太好了。

# c# - LINQ 查询匹配两个项目列表

> ID：12767721
> 
> 赞同：2
> 
> 时间：2012-10-07T09:45:42.597
> 
> 标签：c#, asp.net, linq, entity-framework

我的问题是我有一个来自实体框架的“属性”属性。所以我检索了这个具有属性标签列表的对象，它们可以通过`attribute.AttributeTags`. 现在我有一个`asp:TextBox`用户可以编辑、删除和添加新标签（逗号分隔）的地方。（在页面加载时，我将属性标签添加到此`TextBox`）

在页面上回发后，我将返回用户输入并将其拆分为字符串数组并将其存储在名为`AttributeTags`.

现在，我想添加未包含在`attributes`来自 EF 的原始列表中的新标签，并希望添加`remove`那些包含在`attributes`用户输入字符串数组中但未在其中找到的标签`AttributeTags`。

我正在做这样的事情：

```
 BusinessObjects.Attribute attribute = db.Attributes.FirstOrDefault(a => a.attribute_id == AttributeID);
        string[] AttributeTags = txtAttributeTags.Text.Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries);
        foreach (var item in AttributeTags)
        {
            if (!attribute.AttributeTags.Any(t => t.value == item))
            {
                AttributeTag tag = new AttributeTag { value = item, timestamp = DateTime.Now };
                attribute.AttributeTags.Add(tag);
            }
            else
            {
                AttributeTag tag = attribute.AttributeTags.FirstOrDefault(t => t.value == item);
            }
        } 
```

但是我有点卡在这里，因为我对 LINQ 和 EF 还很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T05:33:11.267

对于这种情况，我有两种解决方案。

* * *

## 第一个解决方案

我们可以创建一个`ExcepWith`方法，允许我们删除 a`ICollection<T>`中已经存在的所有项目 give a `IEnumerable<T>`。这种方法的代码如下：

```
public static int ExceptWith<TItem>
(
    this ICollection<TItem> collection,
    IEnumerable<TItem> other
)
{
    if (ReferenceEquals(collection, null))
    {
        throw new ArgumentNullException("collection");
    }
    else if (ReferenceEquals(other, null))
    {
        throw new ArgumentNullException("other");
    }
    else
    {
        int count = 0;
        foreach (var item in other)
        {
            while (collection.Remove(item))
            {
                count++;
            }
        }
        return count;
    }
} 
```

现在您有了`string[]`用户的输入，该数组是 an`IEnumerable<string>`但不是 an `ICollection<string>`...，很容易解决如下：

而不是这个：

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    ); 
```

你来做这件事：

```
var AttributeTags =
    new List<string>
    (
        txtAttributeTags.Text.Split
        (
            new string[] { "," },
            StringSplitOptions.RemoveEmptyEntries
        )
    ); 
```

甚至这样：

```
var AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    ).ToList(); 
```

现在你可以这样做：

```
AttriuteTags.ExceptWith(existingTags); 
```

由于attribute.AttributeTag的类型不是`IEnumerable<string>`你使用Select：

```
AttriuteTags.ExceptWith(attribute.AttributeTag.Select(item => item.value)); 
```

这样就只剩下列表中的新标签了。

* * *

*注意*：这个方法依赖于 Remove 的实现，如果你需要做一个特殊的比较，那么你不走运这个方法。

* * *

## 第二种解决方案

还有另一种方法。您可以使用类中的“[除外](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)” `Enumerable`。

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    );
var newTags = AttributeTags.Except(existingTags); 
```

由于attribute.AttributeTag的类型不是`IEnumerable<string>`你使用Select：

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    );
var newTags = AttributeTags.Except
(
    attribute.AttributeTag.Select(item => item.value)
); 
```

这放入了新标签，好吧，新标签。

* * *

*注意*：如果你需要做一个特殊的比较，那么你应该使用[方法的其他重载](http://msdn.microsoft.com/en-us/library/bb336390.aspx)：

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    );
var newTags = AttributeTags.Except(attribute.AttributeTag, equalityComparer); 
```

遗憾的是，equalComparer 是实现 IEqualityComparer 的类的对象，这意味着您不能在其中使用 lambda。为此，您可以添加此类：

```
public class CustomEqualityComparer<T> : IEqualityComparer<T>
{
    private Func<T, T, bool> _comparison;
    private Func<T, int> _getHashCode;

    public CustomEqualityComparer
    (
        Func<T, T, bool> comparison,
        Func<T, int> getHashCode
    )
    {
        if (ReferenceEquals(comparison, null))
        {
            throw new ArgumentNullException("comparison");
        }
        else if (ReferenceEquals(getHashCode, null))
        {
            throw new ArgumentNullException("getHashCode");
        }
        else
        {
           _comparison = comparison;
           _getHashCode = getHashCode;
        }
    }

    public bool Equals(T x, T y)
    {
        return _comparison.Invoke(x, y);
    }

    public int GetHashCode(T obj)
    {
        return _getHashCode.Invoke(obj);
    }
} 
```

现在像这样调用（例如）：

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    );
var newTags = AttributeTags.Except
(
    existingTags,
    new CustomEqualityComparer<string>
    (
        (a, b) => 1, //your custom comparison here
        str => str.GetHashCode()
    )
); 
```

由于attribute.AttributeTag的类型不是`IEnumerable<string>`你使用Select：

```
string[] AttributeTags =
    txtAttributeTags.Text.Split
    (
        new string[] { "," },
        StringSplitOptions.RemoveEmptyEntries
    );
var newTags = AttributeTags.Except
(
    attribute.AttributeTag.Select(item => item.value),
    new CustomEqualityComparer<string>
    (
        (a, b) => 1, //your custom comparison here
        str => str.GetHashCode()
    )
); 
```

* * *

## 添加新标签

现在您有了新标签，假设在 中`newTags`，您可以对其进行迭代以添加新标签：

```
var now = DateTime.Now;
foreach (var item in newTags)
{
    AttributeTag tag = new AttributeTag { value = item, timestamp = now };
    attribute.AttributeTags.Add(tag);
} 
```

* * *

## 比较解决方案

这些方法有什么区别？

*   第一个需要更少的内存
*   第一个需要定义一个新方法。
*   第一个不允许自定义`IEqualityComparer<T>`
*   第二个允许延迟执行。
*   第二个使用（不需要）辅助类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T06:16:10.287

如何做你想做的事的一个简化例子。

```
var fromDB = new List<string>() { "a", "b", "c", "d", "e" };
var userInput = new List<string>() { "c", "d", "e", "f", "g" };
var result = fromDB.Join(userInput, x => x, y => y, (x, y) => x).Union(userInput); 
```

现在您所要做的就是用结果替换数据库内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T06:39:23.867

使用 Iesi.Collections 可以非常优雅地解决这个问题。它有多种实现方式，这里有一个：[Set Collections](http://www.codeproject.com/Articles/3190/Add-Support-for-quot-Set-quot-Collections-to-NET "链接到代码项目")

```
ListSet set1 = new ListSet(new [] {"1","2","8"});
ListSet set2 = new ListSet(new [] {"8","16","32"});
var union = set1 | set2;        // "1","2","8","16","32"
var intersect = set1 & set2;    // "8"
var diff = set1 ^ set2;         // "1","2","16","32"
var minus = set1 - set2;        // "1","2" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:57:23.040

这是我测试的代码。在实体框架中有很多保存方法。

注意：请确保在迭代集合时不要修改/删除项目。

![在此处输入图像描述](../Images/8b0a13e58d226989c3429523b3e0589a.png)

```
<asp:TextBox ID="txtAttributeTags" runat="server" />
<asp:Button runat="server" ID="SubmitButton" OnClick="SubmitButton_Click" 
  Text="Submit" />

public const int AttributeID = 1;

protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    using (var db = new AttributeEntities())
    {
      var tags = db.AttributeTags
        .Where(a => a.attribute_id == AttributeID)
        .Select(a => a.value);

      txtAttributeTags.Text = string.Join(",", tags);
    }
  }
}

protected void SubmitButton_Click(object sender, EventArgs e)
{
  using (var db = new AttributeEntities())
  {
    string[] newTags = txtAttributeTags.Text.Split(new[] {","}, 
      StringSplitOptions.RemoveEmptyEntries);

    var oldTags = db.AttributeTags.Where(t => t.attribute_id == AttributeID);

    foreach (var tag in oldTags.Where(o => !newTags.Contains(o.value)))
        db.AttributeTags.DeleteObject(tag);

    foreach (var tag in newTags.Where(n => !oldTags.Any(o => o.value == n)))
      db.AttributeTags.AddObject(new AttributeTag
      {
          attribute_id = AttributeID, value = tag, timestamp = DateTime.Now
      });

    db.SaveChanges();
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T17:50:14.843

我们对 db 对象的 Attributes 属性使用 Remove 方法，然后保存更改

```
 db.Attributes.Remove( object ); 
```

然后将更改保存到 db 对象。

如果我正确假设您的 db 对象是 EF 中的连接对象，这应该可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T19:28:43.037

我不能做一个完整的测试，但应该做一些类似的事情：

```
BusinessObjects.Attribute attribute = db.Attributes.FirstOrDefault(a => a.attribute_id == AttributeID);
string[] AttributeTags = txtAttributeTags.Text.Split(new string[] { "," }, StringSplitOptions.RemoveEmptyEntries);

foreach (var item in from a in AttributeTags
                     where attribute.AttributeTags.Any(t => t.value == a)
                     select new AttributeTag 
                     { 
                         value = item, 
                         timestamp = DateTime.Now 
                     })
    attribute.AttributeTags.Add(item);

foreach (var item in from a in attribute.AttributeTags
                     where AttributeTags.Any(t => t == a.value)
                     select a)
    attribute.AttributeTags.Remove(item);

db.SaveChanges(); 
```

# android - 将 drawableLeft 和 drawableRight 的高度约束为 TextView 的高度

> ID：12767726
> 
> 赞同：26
> 
> 时间：2012-10-07T09:46:45.340
> 
> 标签：android, textview, drawable

我有以下内容`TextView`：

```
<TextView
    android:drawableLeft="@drawable/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Updating Rates" /> 
```

结果是这样的：

![](../Images/41cec169ba13a02ea8599f7cf3270f06.png)

如何按比例使加载圆可绘制约束，使其高度与文本的高度匹配？

另外，如果可能的话，我想在文本和图像之间添加一些间距。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-07T10:00:59.570

为了使`loading`更小，只需使图像更小。

或者使用`RelativeLayout`并将负载放入`ImageView`并缩放它。

[`android:drawablePadding`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:drawablePadding)或者，您可以使用（或）在可绘制对象和文本之间添加填充[`setCompoundDrawablePadding()`](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablePadding(int))：

```
android:drawablePadding="3dp" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-31T19:08:57.947

我想我找到了解决方案，但有点晚了

```
Drawable drawable = getResources().getDrawable(R.drawable.s_vit);
drawable.setBounds(0, 0, (int)(drawable.getIntrinsicWidth()*0.5),(int)(drawable.getIntrinsicHeight()*0.5));
ScaleDrawable sd = new ScaleDrawable(drawable, 0, scaleWidth, scaleHeight);
Button btn = findViewbyId(R.id.yourbtnID);
btn.setCompoundDrawables(sd.getDrawable(), null, null, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-29T20:08:50.593

Ravi 的解决方案对我有用，但在某些设备上 drawable 正在消失。通过删除缩放来解决此问题。

```
 int bound = (int) (drawable.getIntrinsicWidth() * 0.5);
    drawable.setBounds(0, 0, bound, bound);
    b.setCompoundDrawables(drawable, null, null, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T15:47:29.007

更好的解决方案是在可绘制文件夹中创建一个 XML 并将图像添加到此 XML，并将 scaleType 保持为“fitXY”。现在您可以将此 XML 设置为 drawableLeft。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-07T09:59:58.823

您只需要声明两个单独的视图 imageview 和 textview，并相应地设置它们

# mysql - 两个表中的mysql查询帮助

> ID：12767729
> 
> 赞同：1
> 
> 时间：2012-10-07T09:47:04.423
> 
> 标签：mysql

我有两个表table1和table2
table1：
id amount
1 394
2 897
2 345
3 123

table2：
id amount
2 876
3 890
3 876
4 908

我需要生成table3。明智地加入两个表和 SUM id 并显示前 30 名持有者。
表 3：
id 金额
2 2118
3 1889
4 908
1 394

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T09:52:00.483

您可以通过以下方式获取数据：

```
select table3.id, SUM (table3.amount) AS amount
FROM 
(SELECT * FROM table1 UNION ALL SELECT * FROM table2) table3 
GROUP BY table3.id 
```

如果要使用上述数据创建表，可以这样做：

```
CREATE TABLE new_table select table3.id, SUM (table3.amount) AS amount
                       FROM 
                       (SELECT * FROM table1 UNION ALL SELECT * FROM table2) table3 
                       GROUP BY table3.id ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T09:56:06.713

尝试使用此查询

```
SELECT a.id, SUM(a.amount)
FROM (
SELECT * FROM table1
UNION
SELECT * FROM table2) AS a
GROUP BY a.id
ORDER BY SUM(a.amount)
LIMIT 30 DESC; 
```

上面的查询将生成结果，现在创建新表使用以下

```
CREATE TABLE table3(
    SELECT a.id, SUM(a.amount)
    FROM (
    SELECT * FROM table1
    UNION
    SELECT * FROM table2) AS a
    GROUP BY a.id
    ORDER BY SUM(a.amount)
    LIMIT 30 DESC); 
```

希望这可以帮助...

# android - Android 开发：保存开发文件的最佳方式

> ID：12767736
> 
> 赞同：0
> 
> 时间：2012-10-07T09:48:12.100
> 
> 标签：android, eclipse

我一直在玩 Eclipse 中的 Android 开发。我是一名普通的 .NET 开发人员。在 Visual Studio 项目文件夹中，我总是可以创建一个新文件夹来保存我的备份文件/开发数据/未完成的图形/photoshop 文件等。该文件夹不会与项目一起编译，因为它没有被添加到项目中。但对我来说最方便的是我可以将项目开发文件和源代码保存在同一个目录结构中。

Eclipse 的最佳实践是什么。人们如何将他们的 photoshop 和其他开发文件与项目文件一起保存，以便它不会被编译到 apk 文件中；它们都位于同一个项目目录中。

F A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:00:59.773

您可以简单地在您的项目中创建一个文件夹并将您的文件放在那里。它不会被编译到 apk 文件中，除非您将文件夹放入 Android 默认文件夹之一，例如，`src, gen, res, assets ...`

# crystal-reports - Crystal Reports 交叉表条件格式

> ID：12767737
> 
> 赞同：0
> 
> 时间：2012-10-07T09:48:27.213
> 
> 标签：crystal-reports

我想实现类似于 Excel 中的“色阶”功能的简化结果，即基于最小值（红色）到最大值（绿色）的渐变着色，除了在我使用 Crystal Reports 2008 的交叉表中。我的交叉表看起来有点像这样：

```
 HOURS    L1   L2  L3   L4  Total
 1 hours | 5 | 0 | 1 | 16 | 22 |
 2 hours | 0 | 1 | 0 | 10 | 11 |
 3 hours | 8 | 2 | 6 | 12 | 28 |
 TOTAL   |13 | 3 | 7 | 38 | 61 | 
```

我的功能原理是在交叉表中找到最大值，然后使用 20%、40%、60%、80% 的值来为背景着色。功能如下（在格式>背景部分）：

```
 if currentfieldvalue < ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.2) then color(255,0,0)
else if (currentfieldvalue >= ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.2) and 
        currentfieldvalue < ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.4)) then color(255,192,0)
else if (currentfieldvalue >= ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.4) and 
        currentfieldvalue < ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.6)) then color(255,255,0)
else if (currentfieldvalue >= ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.6) and 
        currentfieldvalue < ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.8)) then color(146,208,80)
else if (currentfieldvalue >= ((Maximum (MakeArray (CurrentColumnIndex, CurrentRowIndex, 1)))*0.8)) then color(0,176,80) 
```

它不优雅，也不能正常工作，任何帮助/建议将不胜感激。我没想到它会如此复杂，因为我最初使用下面的假设它会起作用，但它告诉我“CurrentFieldValue”不是一个字段。

```
if CurrentFieldValue < ((Maximum (CurrentFieldValue))*0.2) then color(255,0,0)
else if ... etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:35:16.463

在这篇文章的帮助下：[对于每个交叉表列，突出显示最大值](https://stackoverflow.com/questions/10418114/crystal-reports-for-each-crosstab-column-highlight-max-value)，我设法得到了我想要的结果。希望这对其他人有帮助。干杯。

```
local Numbervar max:=0;
local Numbervar col;
local Numbervar row;

for col := 0 to GetNumColumns-2 do 
(
    for row := 0 to GetNumRows-2 do 
    (
        local numbervar value := GridValueAt (row, col, CurrentSummaryIndex);
        if value > max 
            then max := value;
    );
);

ToText(max,"#");

// Reference Red 248,105,107
// ReferenceGreen 99,190,132

local Numbervar cRed;
local Numbervar cGreen;
local Numbervar cBlue;

cRed := Floor(99 + 149 * (1-(GridValueAt (CurrentRowIndex, CurrentColumnIndex, 0)/max)));

cGreen := Floor(105 + 85 * (if (((GridValueAt (CurrentRowIndex, CurrentColumnIndex, 0)/max))*10) > 1 then 1));

cBlue := Floor(107 + 25 * ((GridValueAt (CurrentRowIndex, CurrentColumnIndex, 0)/max)));

color(cRed, cGreen, cBlue) 
```

# magento - 将新商品添加到购物篮时的税收行为

> ID：12767738
> 
> 赞同：1
> 
> 时间：2012-10-07T09:48:32.083
> 
> 标签：magento

我正在解决与在篮子中显示 TAX 价格相关的问题。我为英国国家/地区配置了一些税收规则，即 20%。在前面，我可以看到含税价格。没关系。但是，当我将产品添加到购物篮时，它会显示不含税额，但它会像我在后端启用的那样。

我的配置是

1.  税金取决于送货地址
2.  我在后端指定了默认收货地址，国家 = GB，地区 = *，邮政编码 = *

我希望：如果我不指定任何收货地址，那么将使用默认收货地址。

所以我去depper我发现有一些方法可以`Mage_Sales_Model_Quote->collectTotals()`与`$address->collectTotals()`国家、地区和邮政编码一起使用。它们的值为 Country = GB，region 为空，postcode 为空。这就是为什么`Mage_Tax_Model_Calculation::getRate`返回0税率的原因。

我可以覆盖这个功能，但是有默认的送货地址配置，但我不确定我是否破坏了任何东西：)

**这是标准行为还是错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:02:18.117

这不是一个错误。我看到您使用的是英国语言包，所以我将使用其中的术语来回答。

要么您在后端配置错误（您是否在 Config->Sales->VAT->Shopping Basket Display settings 中设置了购物篮价格以显示含税？），或者您的主题设置不当并故意显示不含税的价格即使您已设置配置，也应将它们包含在购物车中。

Magento 很好地处理了英国/欧盟的包容性税收设置，不要陷入试图为此改变核心的兔子洞。

换个主题看看能不能解决。您的 templates/checkout/cart.phtml 文件应包含一系列条件，用于检查配置设置并显示购物车中含税或不含税的价格（或两者）。

# osx-gatekeeper - 我需要取消对 OSX Gatekeeper 的覆盖以进行测试

> ID：12767740
> 
> 赞同：1
> 
> 时间：2012-10-07T09:48:54.467
> 
> 标签：osx-gatekeeper

在 osx montain lion 中，我需要测试来自未经授权的开发人员的下载。我可以使用“控制点击”方法告诉网守打开文件，但问题是一旦我这样做，网守就会记住，所以我再也看不到打开文件的对话框了。有什么方法可以让我回到原来的未批准状态？

# javascript - 为什么不能在正则表达式中定义自己的自定义字符类？

> ID：12767741
> 
> 赞同：0
> 
> 时间：2012-10-07T09:49:32.723
> 
> 标签：javascript, regex, pcre

我的意思是，而不是

```
/^[asdfjkl;]foo[asdfjkl;]bar[asdfjkl;]baz$/i 
```

甚至

```
RegExp('^[[:HOMEROW:]]foo[[:HOMEROW:]]bar[[:HOMEROW:]]baz$'.replace(/\[:HOMEROW:]/g, 'asdfjkl;')) 
```

我可能只能写：

```
/\H=[asdfjkl;];^\Hfoo\Hbar\Hbaz$/ 
```

## 怎么没有人想到这一点，假设他们有，为什么它没有得到更多的支持或实施？

### 注意：我对此的哲学方面更感兴趣：排除该功能的理由是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:59:45.917

您可以为 RegExp 创建一个包装器对象：

```
myRegExp = function(regex,mods) {
    var customclasses = {
        nonDotLocalChar:'A-Za-z0-9!#$%&\'*+-/=?^_`{|}~'
    }, i;
    for( i in customclasses) {
        regex = regex.replace(new RegExp("\[:(\^?)"+i+":\]","i"),"$1"+customclasses[i]);
    }
    return new RegExp(regex,mods);
}; 
```

然后你可以像这样使用上面的：

```
var eam = new myRegExp("^[[:nondotlocalchar:]](?(?:[[:nondotlocalchar:]]........."); 
```

你也可以像这样使用它：

```
new myRegExp("[[:^nondotlocalchar:]]"); // negates the custom class
new myRegExp("[@[:nondotlocalchar:]]"); // allow anything from the custom class, or the @ character 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:12:09.573

既然你问的是一个哲学问题（对于像 SO 这样的网站来说，这并不是一个很好的问题），让我试着给出一个相当推测的答案。毕竟，我不能代表语言设计者说话，但我可以猜到：

通常，当一个正则表达式变得如此可怕时，这是一个可靠的信号，表明正则表达式不是适合这项工作的工具。所以在某种程度上，自定义字符类会鼓励糟糕的编程（比如尝试使用正则表达式验证电子邮件地址）。我怀疑这就是为什么没有足够聪明来定义正则表达式标准的人选择实现此功能的原因。

例如，如果您的目标是查找电子邮件地址，那么最好使用基本的正则表达式进行非常基本的扫描，例如

```
\S+@\S+\.\S+ 
```

然后使用专用的电子邮件地址解析器查看结果以清除/修剪不匹配项。

一个更好的例子可能是日期验证：

您*可以*使用正则表达式验证 MM/DD/YYYY 日期

```
^(?:(?:(?:(?:(?:0?[13578]|1[02])\/31)|(?:(?:0?[13-9]|1[0-2])\/(?:29|30)))\/(?:1[6-9]|[2-9]\d)\d{2})|(?:0?2\/29\/(?:(?:(?:1[6-9]|[2-9]\d)(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))|(?:(?:0?[1-9])|(?:1[0-2]))\/(?:0?[1-9]|1\d|2[0-8])\/(?:(?:1[6-9]|[2-9]\d)\d{2}))$ 
```

但你可能更应该使用像这样的正则表达式

```
^\d\d/\d\d/\d\d\d\d$ 
```

并使用日期解析器在第二步中找出有效日期。

# font-size - 为什么内联元素的内容区域的高度大于 font-size 指定的值？

> ID：12767744
> 
> 赞同：2
> 
> 时间：2012-10-07T09:50:24.623
> 
> 标签：font-size

在像这样的文件中：

```
    <p class="包装器">
        <span class="ref">
        <span class="text">英文</span>
    </p>

```

适用以下规则：

```
    .wrapper {
      背景：绿色；
      位置：相对；
      填充左：20px；
      字体系列：时代；
    }
    。文本 {
      行高：1；
      背景：蓝色；
      字体大小：80px；
    }
    .ref {
      位置：绝对；
      左：5px；
      宽度：10px；
      高度：80px；
      背景：黑色；
    }

```

在 Chrome（版本 22.0.1229.79）或 IE9 中，包含“English”的 span 元素的背景似乎具有大于 font-size 的高度，但在 Firefox (13.0.1) 中，高度等于 font-size。（[见输出](http://jsbin.com/eputun/7/)）

有人可以解释一下吗？

我认为内容区域的高度与字体大小指定的值相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:07:45.057

下图显示了渲染文本时可用的各种参考线：

![来自 WHATWG](../Images/32afe92c8dbbde83dc7eb6fa0b7f8471.png)

如您所见，有很多选择。似乎 Firefox 在渲染时使用了与 Chrome/IE 不同的基线。

# c++ - 将构成特定任务工具箱的函数分组为类是个好主意吗？

> ID：12767746
> 
> 赞同：0
> 
> 时间：2012-10-07T09:50:36.823
> 
> 标签：c++, oop

我正在用 C++ 开发一个大型科学计算程序，并且我有许多函数可以对我导入系统的数据集执行一些数学魔法。我已经在一个类中实现了所有这些功能，比如数学核心，但我的直觉说，对这么大的类进行编码并不是一个好主意。

然而，为了使代码可读和可维护，我还实现了集中式日志记录，并将根据需要实现其他包罗万象的基础设施。

将工具箱封装为一个类是一个好主意，还是让它们保持不同的小功能更好。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:10:47.007

听起来您正在使用类作为名称空间。除非您出于特定原因需要一个类，否则请使用命名空间：

```
// Define like this:

namespace foo
{
    void fun(int a, int b);
}

// Use like this:

foo::fun(4, 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:55:22.843

如果它们都在同一组私有状态上工作（例如，每个函数的第一个参数是`data&`），那么一个类可能是合适的。

否则，让它们保持自由功能。使用命名空间将它们组合在一起。

# playframework-2.0 - 按前缀删除缓存条目

> ID：12767748
> 
> 赞同：1
> 
> 时间：2012-10-07T09:50:43.250
> 
> 标签：playframework-2.0, ehcache, prefix

**编辑**
Circumflex 访问[ehcache 的 getKeys](https://github.com/inca/circumflex/blob/master/circumflex-cache/src/main/scala/cache.scala#L120)，因此应该可以在 Play 中执行类似操作，前提是 Cache 插件实现公开了 getKeys，这可能是不可能的（假设每个 Cache 库都提供了一种查询缓存中所有键的方法）

**ORIGINAL** 有没有办法通过 EhCache 的键前缀删除缓存条目？

我正在使用默认使用 EhCache 的 Play 框架的缓存实现。

查看 Play 2 Scala Cache.scala 我看到了一个删除方法，它需要一个字符串，即要删除的键，但我想知道 EhCache 本身是否支持按前缀删除（如果是这样，我将向 Play 开发人员提出 2.1 快照的功能请求)

就目前而言，我正在使用一种辅助方法，该方法采用常用缓存键列表并删除匹配项：

```
object clear {
  def apply(key: String, keys: List[String] = List()) = {
    if(keys.size > 0) keys.filter(_.startsWith(key)) map(Cache.remove(_))
    else Cache.remove(key)
  }
} 
```

但是与将任何键前缀直接传递给 Cache remove 相比，维护固定键列表是愚蠢的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T13:09:26.917

根据[EHCache 插件](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/cache/Cache.scala#L116)，您还可以直接访问 EHCache，只需使用[CacheManager.create()](http://ehcache.org/apidocs/net/sf/ehcache/CacheManager.html#create%28%29)静态方法：

```
net.sf.ehcache.Cache cache = net.sf.ehcache.CacheManager.create().getCache("play"); 
```

`create()`如果存在，则该方法返回现有实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:59:01.913

不幸的是，当前 EhCache 在 Play 中的实现非常基础，并且仅限于`put cache entry`和`delete cache entry`. 遗憾。

另一方面，EhCache 提供了更复杂的方法来管理缓存条目，包括使其可通过自定义字段、索引等进行搜索，因此可以创建[http://ehcache.org/documentation/apis/search](http://ehcache.org/documentation/apis/search)。

当然，如果它在 Play *out-of-the-box 中*实现，那就太棒了，但我可以想象开发人员的观点：“*让 Play 中使用的每个功能子系统都可用会扼杀框架的轻便性*”——那就是我的猜测，我同意这一点。

因此，在这种情况下，最好的选择就是为 Play 创建一个新模块，我们称之为*CachePlus*，它将按需结合 EC 的功能。无论如何，*有人*必须启动它并与他人分享:)

# java - 通过自定义 Timsort 是否可以有效提升这些场景下的性能？

> ID：12767750
> 
> 赞同：0
> 
> 时间：2012-10-07T09:50:52.017
> 
> 标签：java, algorithm, sorting, timsort

我正在使用的数据集的一些特征显示出以下趋势：-

1.  数组的前 50-70% 几乎已排序，最后 30% 完全打乱。

    *   如果我将插入排序部分替换为shell排序会有效吗？

2.  数组的前 50-70% 几乎已排序，最后 30% 包含很多海龟。

    *   海龟的出现是否如此重要，以至于我应该放弃 Timsort 以支持这种 Comb 排序变体 - [在这里](http://en.wikipedia.org/wiki/Comb_sort#Combsort_with_different_end)。他们的最佳案例性能显示 O(n)，但平均案例性能对于使用 O(n log n) 的 Tim 排序更好，而 Comb 排序有 Ω (n log n) 但这是否需要修改版本的 Comb 排序或海龟密度考虑到？

3.  与第二种情况相同，但如果可以提高性能，部分排序的输出就可以了。例如，一个包含 1,000,000 个元素的数组可以在数组的前 1% 个槽中拥有其最小的 1%（即 10,000 个元素），但不需要在内部进行排序。

    *   这可以通过在快速排序中的某个递归深度后拉出以将元素大致放置在它们应得的位置附近来完成。

如果相关，这里是我正在尝试修改的 Java 的 Timsort 代码 -[代码](http://gee.cs.oswego.edu/cgi-bin/viewcvs.cgi/jsr166/src/main/java/util/TimSort.java?view=co)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:02:25.933

我认为最好的答案是无法*可靠地预测*自定义 TimSort 是否会为您的数据集带来有价值的性能改进。您只需要尝试一下即可。

我将重复我的评论中的建议：首先描述它！

在您分析了在代表性数据上运行的应用程序之前，您无法知道这是否有可能会有所帮助。例如，如果计算只花费 5% 的时间对数据进行排序，那么排序算法加速 50% 只会导致应用程序加速 2.5%。这根本不值得浪费你的时间。

# java - 统计java web客户端发送和接收的字节数

> ID：12767751
> 
> 赞同：0
> 
> 时间：2012-10-07T09:50:52.110
> 
> 标签：java, web, network-programming, client

我有一个用 Java 编写的简单 Web 客户端，我必须计算它发送和接收的字节数。然后我必须将结果与 netstat -s 命令进行比较。另外，我如何测量我发送和接收的数据包的平均大小。这是WebClient.java：

```
package javaapplication1;

/**
 *
 * @author
 */
import java.net.*;
import java.io.*;
import java.util.*;

public class WebClient {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.print("Enter host name (e.g., www.ouhk.edu.hk): ");
        String host = scanner.nextLine();
        System.out.print("Enter page (e.g., /index.html): ");
        String page = scanner.nextLine();
        final String CRLF = "\r\n"; // newline
        final int PORT = 80; // default port for HTTP

        try {
            Socket socket = new Socket(host, PORT);
            OutputStream os = socket.getOutputStream();
            InputStream is = socket.getInputStream();
            PrintWriter writer = new PrintWriter(os);
            writer.print("GET " + page + " HTTP/1.1" + CRLF);
            writer.print("Host: " + host + CRLF);
            writer.print(CRLF);
            writer.flush(); // flush any buffer
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(is));
            String line;
            while ((line = reader.readLine()) != null){
                            System.out.println(line);

            }
            System.out.println("Recieved bytes:");
            socket.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T09:57:04.927

您可以创建自己的实现，`FilterInputStream`并将`FilterOutputStream`计算通过的所有数据。然后将它们用作过滤器，例如：

```
 OutputStream os = new CountingOutpurStream(socket.getOutputStream());
    InputStream is = new CountingInputStream(socket.getInputStream()); 
```

# opencv - OpenCV warpPerspective() 中的离群像素

> ID：12767754
> 
> 赞同：5
> 
> 时间：2012-10-07T09:51:17.370
> 
> 标签：opencv

我的应用程序需要将一个四边形映射到另一个四边形。这些都不是矩形。

但是，我从 warpPerspective() 得到的结果始终是一个矩形。我尝试将“异常值”标志设置为不同的值，以防止扭曲四边形之外的像素出现在目标图像中，但似乎没有任何效果。我想要的是一个扭曲的四边形，扭曲的四边形之外的像素设置为透明度。

我如何实现这一目标？

或者，是否有一种直接的方法来掩盖 OpenCV 中四边形之外的区域，以便我可以将四边形复制到另一个图像？

如果它是相关的，我正在使用 Python 绑定到 OpenCV。

这是我当前的代码：

```
def warpImage(image, corners, target, width, height):
    mat = cv2.getPerspectiveTransform(corners, target)
    out = numpy.zeros(shape=(width, height), dtype="uint8")
    out = cv2.warpPerspective(image, mat, (width,height), out, cv2.INTER_CUBIC)
    return out 
```

角和目标都是非矩形四边形。然而，输出是一个全宽x高的矩形。没有一个像素是黑色或透明的。相反，它们是角四边形内部和外部图像的像素。我只想要里面的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:05:44.403

我发现的最佳选择是循环遍历像素并使用 matplotlib pnpoly() 函数将扭曲四边形中的像素复制到重映射数组中，如下所示：

```
import matplotlib.nxutils as nx 

def warpImage(image, corners, target, width, height, x0, y0, remap):
    mat = cv2.getPerspectiveTransform(corners, target)
    out = cv2.warpPerspective(image, mat, (width,height), flags=cv2.INTER_CUBIC)
    for x in range(0,width):
        for y in range(0,height):
            if nx.pnpoly(x,y,target) == 1:
                for i in range(0,3):
                    remap[y+y0,x+x0,i] = out[y,x,i]

    return remap 
```

我遍历图像中的所有四边形并在重映射中累积转换后的版本。

必须访问每个像素不是很有效，但幸运的是这是一次转换。

# list - 如何在功能上表达依赖于列表中相邻元素的过滤器

> ID：12767757
> 
> 赞同：4
> 
> 时间：2012-10-07T09:51:44.810
> 
> 标签：list, haskell, fold

有几次我想遍历一个列表并挑选出具有某些属性的元素，这些属性也依赖于列表中的下一个元素。对于一个简单的示例，我有一些代码可以计算函数`f`在指定的时间间隔内更改符号的次数`[a,b]`。这在像 C 这样的命令式语言中是相当明显的：

```
for(double x=a; x<=b; x+=(b-a)/n){
    s*f(x)>0 ? : printf("%e %e\n",x, f(x)), s=sgn(f(x));
    } 
```

在 Haskell 中，我的第一直觉是用它的尾部压缩列表，然后应用过滤器并提取元素`fst`或其他。但这似乎笨拙且效率低下，所以我硬生生把它变成了一个折叠：

```
signChanges f a b n = tail $       
    foldl (\(x:xs) y -> if (f x*f y)<0 then y:x:xs else x:xs) [a] [a,a+(b-a)/n..b] 
```

无论哪种方式，我都觉得有一种“正确”的方式来做到这一点（就像在 Haskell 中经常出现的那样），而且我不知道（或者只是没有意识到）它是什么。对于如何以更惯用或更优雅的方式表达这一点的任何帮助，以及关于如何找到“正确”做事方式的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:00:36.663

如果您使用 -O2 运行列表融合，则压缩是有效的。在这种情况下不需要使用折叠是 Haskell 的基本优势之一，因为它提高了模块化。

所以拉链是正确的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T11:23:28.683

这是一个使用超同态的“版本”（与问题不太一样——但它应该足够有用地说明一个超同态），首先我们需要`para`它，因为它不在标准库中：

```
-- paramorphism (generalizes fold)
para :: (a -> ([a], b) -> b) -> b -> [a] -> b
para phi b = step
  where step []     = b
        step (x:xs) = phi x (xs, step xs) 
```

使用 paramorphism 很像使用 fold，但除了看到累加器，我们还可以看到输入的其余部分：

```
countSignChanges :: [Int] -> Int
countSignChanges = para phi 0
  where
    phi x ((y:_),st)  = if signum x /= signum y then st+1 else st
    phi x ([],   st)  = st

demo = countSignChanges [1,2,-3,4,-5,-6] 
```

与拉紧尾巴相比，它的`para`好处是我们可以尽可能多地查看输入的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T09:57:25.807

如果您需要计算**第 i 个**元素的值，但取决于列表**的第 j 个**元素，最好将 list 转换为[Array](http://www.haskell.org/haskellwiki/Arrays)，无论是可变的还是不可变的。

因此，您将能够在折叠或递归调用中基于当前元素的索引进行任意计算。

# javascript - 使用 jquery live 或 on 进行顺序加载

> ID：12767762
> 
> 赞同：0
> 
> 时间：2012-10-07T09:52:15.147
> 
> 标签：javascript, jquery

我正在使用 ajax 加载许多图像，并希望将它们绑定为按顺序出现。要在没有 ajax 的情况下做到这一点，我只是这样做：

```
$(".sequenced-fadein").hide().each(function(index, el){
    setTimeout(function () {
        $(el).fadeIn(1234)
    }, 500 * (index+1));
}); 
```

但是如果使用 ajax 加载对象，我看不到如何绑定它（除了将所有内容放入`function reBindThingsThatMightBeDynamicallyLoaded()`并在 each 之后调用它`$.get()`，这看起来很笨重。我确信它是如此简单以至于我忽略了它 - 我已经尝试过`.on("ready", function () { ..`，但 jquery 不支持准备绑定到实时/在线事件 afaik。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:07:14.683

您可以在 ajax 回调函数中执行此操作。

```
$.get(url, function(data) {
    $(data).hide().appendTo('#container').each(function(index, el){
        setTimeout(function () {
            $(el).fadeIn(1234)
        }, 500 * (index+1));
    });
}); 
```

# php - 计算 MySQL GROUP BY

> ID：12767768
> 
> 赞同：2
> 
> 时间：2012-10-07T09:53:42.580
> 
> 标签：php, mysql, sql

所以，我有下一个表结构：

![表数据图像](../Images/139e0eae7afd51411d3bb21dddefe621.png)

有没有办法让 SQL 查询计算列中的类似哈希值`r_hash`，而不是在列中找到这个哈希值`hash`并返回一个 uid 和哈希值？

例如 - uid - 21520578；类型 - 1; 数 - 7？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:21:10.533

试试下面的查询

```
SELECT T1.uid, T1.type, T2.count 
FROM table T1,
(
  SELECT r_hash, COUNT(*) AS count  
  FROM table 
  GROUP BY r_hash
) T2 
WHERE T1.hash = T2.r_hash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T09:57:39.613

您可以使用 join 来做到这一点

```
SELECT t1.uid, t1.type, COUNT(t2.id) as `count`
FROM table AS t1
LEFT JOIN table AS t2 ON t2.r_hash = t1.hash
GROUP BY t1.id 
```

我没有测试这个查询。

编辑：使用左连接，您还会收到计数 = 0 的行。

# facebook - 在 Facebook 页面的时间线上获取其他人的帖子

> ID：12767773
> 
> 赞同：1
> 
> 时间：2012-10-07T09:54:25.667
> 
> 标签：facebook, facebook-graph-api

我正在使用[https://graph.facebook.com/JellyBelly/posts](https://graph.facebook.com/JellyBelly/posts)（带有访问令牌）来获取页面时间轴上的所有帖子。但是，我只收到页面本身的帖子。

1.  我怎样才能获得其他人的帖子？

2.  难道我的查询还返回在其他页面/用户上创建的页面的帖子？我不确定是否如此，但想知道我的查询是否应该只从该页面的时间线中检索帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:17:55.297

`/PAGE_ID/posts`[按照https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)中的说明提供页面自己的帖子

要获取其他人的帖子，您需要

```
/PAGE_ID/feed 
```

或者在你的情况下

```
/JellyBelly/feed 
```

# node.js - 如何定义与 Backbone 一起使用的玉模板

> ID：12767774
> 
> 赞同：3
> 
> 时间：2012-10-07T09:54:28.053
> 
> 标签：node.js, backbone.js, express, pug

我需要使用模板来渲染每个 ItemView：

```
var ItemView = Backbone.View.extend({
    className: 'item',
    template: _.template($('#itemTemplate').html()),

    initialize: function () {

    }
}); 
```

所以我首先需要定义html模板：

```
<script id="itemTemplate" type="text/template">
  <img src="<%= photo %>" alt="<%= name %>" />
  <h1><%= name %><span><%= type %></span></h1>
  <div><%= address %></div>
  <dl>
    <dt>Tel:</dt><dd><%= tel %></dd>
    <dt>Email:</dt><dd><a href="mailto:<%= email %>"><%= email %></a></dd>
  </dl> 
```

但是我使用 Nodejs Jade 模板引擎，但我不明白我在其中如何定义。请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T10:19:24.393

这很容易，但有一个问题：您不希望 Jade 转义属性内容，因此请`foo!='<%= bar &%>'`使用`foo='<%= bar &%>'`.

开始了：

```
script#itemTemplate(type='text/template')
  img(src!='<%= photo %>', alt!='<%= name %>')
  h1 <%= name %>
    span <%= type %>
  div <%= address %>
  dl
    dt Tel:
    dd <%= tel %>
    dt Email:
    dd
      a(href!='mailto:<%= email %>') <%= email %> 
```

它已经过测试，因此您可以立即使用它:)

# php - 在动画 .gif 上使用“转换隔行扫描线”会破坏图像

> ID：12767775
> 
> 赞同：1
> 
> 时间：2012-10-07T09:54:45.543
> 
> 标签：php, imagemagick, imagemagick-convert

在我解释之前，您可能想快速查看一下我的缩略图生成代码： http: [//pastebin.com/XAPPcUyZ](http://pastebin.com/XAPPcUyZ)

* * *

我通过这个脚本传递了几种图像类型：jpeg、jpg、gif、png

所有类型都会像他们应该的那样创建一个 220 像素宽的缩略图，当脚本运行到动画 .gif 图像时就会出现问题 - 当尝试为 gif 制作缩略图时，它会输出如下内容：http: [//i.imgur.com/ oh50z.gif](http://i.imgur.com/oh50z.gif)当正确的缩略图看起来更像这样时，图像显示为平铺：[http](http://whatimg.com/i/mhsnf4_thumb.gif) ://whatimg.com/i/mhsnf4_thumb.gif 。

如果我删除 'interlace -line' 动画 gif 生成缩略图没有任何问题，但是我想保留它，以便其他文件格式交错以便更快地加载。有没有办法在`interlace`不破坏这样的动画 gif 的情况下运行？如果没有，我该如何检测 gif 是否为动画并在其上运行非隔行转换？

# cakephp - Cakephp 验证负金额

> ID：12767778
> 
> 赞同：2
> 
> 时间：2012-10-07T09:55:02.963
> 
> 标签：cakephp

1.  我正在尝试使用负金额验证 cakephp 中的字段。但它不允许我输入负数
2.  验证不显示货币符号

这些是我的验证规则：

```
 'TotalAmount' => array(
            'money' => array(
                    'rule' => array('money', 'left'),
                    'message' => 'Enter a valid money amount.',
                    'allowEmpty' => false,
                    'required' => false,
                    //'last' => false, // Stop validation after this rule
                    //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
            'notempty' => array(
                    'rule' => array('notempty'),
                    'message' => 'This field can not be empty',
                    //'allowEmpty' => false,
                    //'required' => true,
                    //'last' => false, // Stop validation after this rule
                    //'on' => 'create', // Limit validation to 'create' or 'update' operations
            )
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T11:15:54.273

你最好创建自己的验证规则来处理这个问题 - 从技术上讲，钱不能是负数（但我理解你需要它的理由）

看看这个链接：

[http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods](http://book.cakephp.org/2.0/en/models/data-validation.html#adding-your-own-validation-methods)

基本上你的函数只需要返回真或假！

# java - 拆分字符串以从中提取双精度值

> ID：12767785
> 
> 赞同：0
> 
> 时间：2012-10-07T09:56:17.383
> 
> 标签：java, string

我怎样才能转换`String s="3.78 hi bye"`为`double c=3.78`？

同样的问题`String s="hi 3.78 hi bye"`（忽略之前的文字，只取 3.78）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T10:00:42.510

您可以使用正则表达式来删除所有不是数字或 a 的字符`.`：

```
String s = "hi 3.78 hi bye";
String numberOnly = s.replaceAll("[^0-9\\.]+", "");
double d = Double.parseDouble(numberOnly); //d == 3.78d 
```

如果原始字符串的格式不正确，您应该添加一些异常处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:00:27.660

你可以尝试使用正则表达式

```
Pattern doubleValue = Pattern.compile("\\d+\\.\\d+");
Matcher m = doubleValue.match(yourString);
if (m.find()) {
   return Double.parseDouble(m.group(0));
}
return null; 
```

# xaml - 语义缩放的自定义点击处理程序

> ID：12767786
> 
> 赞同：2
> 
> 时间：2012-10-07T09:56:18.070
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我在 SemanticZoom.ZoomedOutView 中有一个 GridView。当我设置 GridViews ItemClick 它永远不会被调用。如何为点击添加自定义操作？我想做一个稍微不同的逻辑。

（请不要回答你不应该这样做，这是客户的愿望，无法说服）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:51:38.783

我创建了一个实现 ISemanticZoomInformation 的自定义 Grid 并在 ZoomedOutView 中使用它，GridView 作为它的子项。

我在一篇博文中进行了总结：[http ://blog.kulman.sk/customizing-semantic-zoom-in-windows-8-apps/](http://blog.kulman.sk/customizing-semantic-zoom-in-windows-8-apps/)

# php - 将段落替换为标题时无法使 str_replace() 函数正常工作

> ID：12767788
> 
> 赞同：0
> 
> 时间：2012-10-07T09:56:30.870
> 
> 标签：php

我有一个像这样的普通段落：

```
<p>Hey there, I'm a normal paragraph. generated by a Wordpress blog</p> 
```

我想改变：

```
<p> with <h2> and </p> with </h2> 
```

我用了`str_replace();`

```
$paragraph = array("<p>", "</p>");
$heading2 = array("<h2>","</h2>");
$first_sentence = str_replace($paragraph, $heading2, $first_sentence); 
```

它应该可以工作，但我明白了：

```
<h2>Hey there, I'm a normal paragraph. generated by a Wordpress blog<p>/p&gt;</p> 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:00:28.280

您可以将 Regex 用于此类任务：

```
$first_sentence = preg_replace('/<p>([^<]+)<\/p>/', '<h2>$1</h2>', $first_sentence); 
```

`([^<]+)`意思是：捕获所有字符，直到`<`发生。

在这里你可以看到它的工作：[http ://codepad.viper-7.com/FW1vm5](http://codepad.viper-7.com/FW1vm5)

但如果它变得更复杂，你应该使用其他技术（如 DOM 解析器）

# ruby-on-rails - 阻止用户向 Rails 站点添加内容

> ID：12767794
> 
> 赞同：0
> 
> 时间：2012-10-07T09:57:36.410
> 
> 标签：ruby-on-rails, ruby, web

当您在 Rails 中创建站点时，它会自动创建一些页面，允许您将内容添加到您的站点。您通常通过在浏览器中键入 domain.com/something/new 来访问它们。

假设您要将网站上传到互联网。如何阻止用户访问这些页面？删除它们似乎不是一个好方法，因为那样您如何向站点添加内容？你用密码保护他们吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:13:28.163

您可以使用[devise](https://github.com/plataformatec/devise)对用户进行身份验证，并在控制器中调用 authenticate_user 以确保只有经过身份验证的用户才能访问该页面。您还可以查看[cancan](https://github.com/ryanb/cancan)，它可以为您提供更多控制，例如设置读取、写入权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:00:29.003

可能有一百种方法可以做到这一点。这取决于你需要什么以及你想要什么。如果您不希望人们在您的网站上发布内容并且您不需要自己这样做，为什么不直接删除路由到`/yourmodel/new`from`/app/controllers/yourmodel_controller.rb`和`/app/views/yourmodel/new.html.erb`条目 from `/config/routes.rb`？

此外，您可以使用一些 gem 进行身份验证。有几种。看看[清关](https://github.com/thoughtbot/clearance)。它可以让您使某些页面仅供注册用户访问。如果您想对普通用户隐藏一些页面，以便只有管理员可以访问它们，请查看[aegis](https://github.com/makandra/aegis)。

# mysql - 无法在 Win 2008R2 上安装 Redmine .. gem install activerecord-mysql-adapter 不工作

> ID：12767795
> 
> 赞同：1
> 
> 时间：2012-10-07T09:57:36.930
> 
> 标签：mysql, ruby-on-rails, ruby, redmine

在尝试在 Windows Server 2008 R2 上安装 Redmine 时，我遇到了以下错误，我们没有找到解决方案...

它要求安装某些东西，并且在尝试安装时说找不到。它建议使用activerecord-mysql2-adapter，但即使这样也不起作用......

我现在开始相信ROR很烂......

```
C:\Ruby\Apps\Redmine>rake db:migrate
rake aborted!
Please install the mysql adapter: `gem install activerecord-mysql-adapter` (193:
 %1 is not a valid Win32 application.   - C:/Ruby187/lib/ruby/gems/1.8/gems/mysq
l-2.8.1-x86-mingw32/lib/1.8/mysql_api.so)

Tasks: TOP => db:migrate => environment
(See full trace by running task with --trace)

C:\Ruby\Apps\Redmine>gem install activerecord-mysql-adapter
ERROR:  Could not find a valid gem 'activerecord-mysql-adapter' (>= 0) in any re
pository
ERROR:  Possible alternatives: activerecord-mysql2-adapter, activerecord-jdbcmys
ql-adapter, activerecord-jdbc-adapter, activerecord-ruby_mysql-adapter, activere
cord-fb-adapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:00:11.463

取决于`adapter`您`database.yml`尝试的行`gem install mysql`或`gem install mysql2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T11:27:54.840

您的数据库连接可能出错，请验证您的 mysql 是否正在运行，如果正在运行，请验证您在 database.yml 中的 sql 连接设置

我也遇到过这个问题，但是更改 database.yml 连接对我有用

# php - 在 PHP 中使用 zip 文件进行操作

> ID：12767797
> 
> 赞同：-3
> 
> 时间：2012-10-07T09:58:21.150
> 
> 标签：php, recursion, zip, move, unzip

在网络服务器内部，我正在下载 zip 并使用以下功能解压缩。

```
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res === TRUE) {
    $zip->extractTo("$dest/");
    $zip->close();
} else {
    die('ZIP not supported on this server!');
} 
```

问题是，当我用这个脚本解压缩时，我得到了 zip 里面的文件夹（zip 里面有文件夹）。但是，我需要获取 zip 子文件夹中的文件和文件夹，而不是文件夹本身。

换句话说

![在此处输入图像描述](../Images/da71c7425cdc2d3e0a3e9c333a8c072c.png)

所以我需要：

*   执行一些函数，比如 moveRecursively("$username-$reponame-$node", $destination); 其中 $destination 是根目录，然后删除此文件夹
*   或以某种方式执行此操作，同时将子文件夹内容解压缩并直接解压缩到脚本所在的文件夹中（在我的情况下为 public_html）

想不出解决办法。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:10:44.413

这应该是显而易见的。

将该文件夹的名称传递给您的脚本（在 zip 文件的名称旁边），然后将该文件夹中的所有文件（在您提取它们之后）移动到所需的目的地：

```
$zip = new ZipArchive;
$res = $zip->open('tip.zip');
if ($res !== TRUE) {
    die('ZIP not supported on this server!');
}

$zip->extractTo("$dest/");
$zip->close();
rename("$dest/dirname/", "$dest/"); 
```

# search - 通过 sphinx 搜索时，如何为搜索词添加权重？

> ID：12767799
> 
> 赞同：0
> 
> 时间：2012-10-07T09:58:25.667
> 
> 标签：search, full-text-search, sphinx

通过 sphinx 搜索时，如何为搜索词添加权重？

例子：

假设用户键入此搜索：

“我想踢足球（又名足球）”

并假设我对这句话进行了一些处理以将其简化为“足球”

现在，我想对具有“足球”的搜索结果给予比具有“足球”的搜索结果更多的权重

**我如何在 Sphinx 中做到这一点，请注意我在这里看到的答案提到这是不可能的，但是我已经看到了一篇关于从 sphinx 2.01 开始的关于这种可能性的文章，但它没有进一步的描述**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T18:40:52.133

复制您想要放大的术语。

```
->setMatchMode(SPH_MATCH_EXTENDED)
->setRankingMode(SPH_RANK_WORDCOUNT)
->Query('"soccer soccer soccer soccer football"/1',$index); 
```

# c++ - Boost.Asio streambuf：如何在streambuf中复制数据

> ID：12767800
> 
> 赞同：3
> 
> 时间：2012-10-07T09:58:25.860
> 
> 标签：c++, boost-asio, iostream, streambuf

> **可能重复：**
> [将流缓冲区的内容复制到字符串](https://stackoverflow.com/questions/877652/copy-a-streambufs-contents-to-a-string)

最近我正在研究 boost::asio::streambuf。由于我的英语很差，我无法表达我的意思。所以首先，请看下面的代码。

```
class bar {
public:
    int length() const
    {
         return sizeof buffer;
    }
    char* get()
    {
        return &buffer[0];
    }
private:
    char buffer[100];
};

template<typename Elem, typename Traits>
std::basic_istream<Elem, Traits>& operator>>(std::basic_istream<Elem, Traits> &is, bar& data)
{
    return is.read(data.get(), data.length());
}

boost::asio::streambuf buf;
buf.prepare(65535);
std::ostream os(&buf);
// some operations writing data to buf
std::istream is(&buf);
bar bdata
is >> bdata;    // #1 
```

在#1，数据将从中读取`buf`并存储到`bdata`。

这会导致存储到的数据`bdata`从 中删除`buf`。我想从 streambuf 中获取数据，但根本不想更改 streambuf 的内容。

streambuf 有很多数据，我想要的数据位于 streambuf 的开头。

可能吗？谢谢你。

# arrays - 图像数组和 .src - 图像不变

> ID：12767814
> 
> 赞同：0
> 
> 时间：2012-10-07T10:00:41.720
> 
> 标签：arrays, image

我创建了一个数组，用于存储一系列 .gif 图像，我只是试图通过使用 document.getElementById 来更改 .src 值来测试所有内容，但是当我更改它并加载页面时，图像仍然存在和以前一样。

```
 function setImage()
    {
    var images = new Array();
    images[0] = anemone.gif; 
    images[1] = ball.gif;
    images[2] = crab.gif;
    images[3] = fish2.gif;
    images[4] = gull.gif;
    images[5] = jellyfish.gif;
    images[6] = moon.gif;
    images[7] = sail.gif;
    images[8] = shell.gif;
    images[9] = snail.gif;
    images[10] = sun.gif;
    images[11] = sunnies.gif;
    images[12] = whale.gif;

    var slots = new Array();
    slots[0] = document.getElementById("slot" + 0);
    slots[1] = document.getElementById("slot" + 1);
    slots[2] = document.getElementById("slot" + 2);
    slots[0].src = "snail.gif";
    document.getElementById('slot0').src = images[0];
    alert(images.length);
    } 
```

我不明白为什么图像不会改变，但我知道它必须非常简单。我一直在浪费时间试图改变这件事，但没有任何效果。谁能指出我的方式的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:31:44.213

您的代码有几个问题：

你的文件名需要是字符串，所以它们必须被引用（你也可以简化数组的创建）：

```
var images = ['anemone.gif', 'ball.gif', 'crab.gif', 'fish2.gif', 'gull.gif', 'jellyfish.gif', 'moon.gif', 'sail.gif', 'shell.gif', 'snail.gif', 'sun.gif', 'sunnies.gif', 'whale.gif']; 
```

还要确保您的`slot`-elements 正确，引用所有属性，例如：

```
<img id="slot0" class="slot" src="crab.gif" width="120" height="80"> 
```

当您创建`slots`-Array 时，您可以这样做（无需连接 ID 字符串）：

```
var slots = [document.getElementById('slot0'), document.getElementById('slot1'), document.getElementById('slot2')]; 
```

最后确保在文档加载/DOM 准备好时调用你的函数。如果你不想使用像 jQuery 这样的框架，你最简单的选择可能仍然是使用`window.onload`：

```
window.onload = setImage; //note that the parens are missing as you want to refer to the function instead of executing it 
```

进一步阅读 Arrays、window.onload 和 DOMReady：

*   [https://developer.mozilla.org/de/docs/DOM/window.onload](https://developer.mozilla.org/de/docs/DOM/window.onload)
*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)
*   [javascript 准备好了吗？](https://stackoverflow.com/questions/1206937/javascript-domready)

# jquery - jQuery动画动态呈现的部分

> ID：12767819
> 
> 赞同：0
> 
> 时间：2012-10-07T10:01:16.643
> 
> 标签：jquery, ruby-on-rails

免责声明：我是 jQuery 和 js 的新手。

我正在尝试使用 jQuery 隐藏用户配置文件中呈现的部分部分。我呈现用户记录的集合：

```
<ul class="records">
    <%= render @work_records %>
</ul> 
```

在部分文件中我使用以下代码：

```
<li>
<div>
    part to be visible
</div>
<div class="container">
    <a href="javascript:void(0);" onclick="ShowDetails();">Show details</a>
    <script type="text/javascript">
        function ShowDetails()
            {
                $("#work_details_<%= work_record.id %>").slideToggle("fast");
            }
    </script>
</div>
<div class="profile_details" id="work_details_<%= work_record.id %>" style="display: none;">
    part to be hidden
 </div></li> 
```

这将呈现所有用户记录并按预期创建链接。当我按预期分析 html 时（id 是唯一的并且在每个部分中匹配）

现在，我不确定在哪里寻找问题（几乎没有 js 经验），因为幻灯片的唯一部分是*最后一个*。如果我单击其他部分上的链接而不是滑动最后一个。有什么想法吗？

更新：这是代码生成的 HTML（从不相关的部分中删除）

```
<html> 
<body>
    <div class="container">     
        <div class="row">
    <div class="span6">
        <ul class="records">
            <li>
                <div>
                    <h1>Partial title</h1>
                </div>
                <div class="container">
                    <a href="javascript:void(0);" onclick="ShowDetails();">Show details</a>
                    <script type="text/javascript">
                        function ShowDetails()
                        {
                            $("#work_details_1").slideToggle("fast");
                        }
                    </script>
                </div>
                <div class="profile_details" id="work_details_1" style="display: none;">
                    Content of partial that needs to be hidden 
                </div>
            </li>
            <li>
                <div>
                    <h1>Partial title</h1>
                </div>
                <div class="container">
                    <a href="javascript:void(0);" onclick="ShowDetails();">Show details</a>
                    <script type="text/javascript">
                        function ShowDetails()
                        {
                            $("#work_details_3").slideToggle("fast");
                        }
                    </script>
                </div>  
                <div class="profile_details" id="work_details_3" style="display: none;">
                    Content of partial that needs to be hidden 
                </div>
            </li>
            <li>
                <div>
                    <h1>Partial title</h1>
                </div>
                <div class="container">
                    <a href="javascript:void(0);" onclick="ShowDetails();">Show details</a>
                    <script type="text/javascript">
                        function ShowDetails()
                        {
                            $("#work_details_4").slideToggle("fast");
                        }
                    </script>
                </div>  
                <div class="profile_details" id="work_details_4" style="display: none;">
                    Content of partial that needs to be hidden 
                </div>
            </li>
        </ul>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:15:54.170

您对所有内容都使用了相同的功能`show_details()`。这就产生了问题。您可以将函数名称从`show_details()`to更改`show_details_work()`为每个唯一的名称并更新处理程序吗？

就像，在您的代码中更改此部分：

```
<script type="text/javascript">
    function ShowDetails_Work<%= work_record.id %>Details()
        {
            $("#work_details_<%= work_record.id %>").slideToggle("fast");
        }
</script> 
```

# c++ - Visual Studio 2010：缺少 dll

> ID：12767820
> 
> 赞同：4
> 
> 时间：2012-10-07T10:01:35.070
> 
> 标签：c++, visual-studio-2010, dll, linker-errors, libraries

我用谷歌搜索了一整天，我要疯了..

好吧，这就是我的问题：我已经编写了我的 vs 项目，我已经指定了所有的“包含”（通过选择项目属性 -> 配置属性 -> VC++ 目录）和所有外部库目录（以相同的方式）。然后我通过选择项目属性 -> 链接器 -> 输入 -> 附加依赖项并添加所有 .lib 文件路径来指定所有其他库。我按F7，它编译没有错误。我运行该项目并且.. 系统错误：缺少 libsndfile-1.dll。

没关系，所以我打开了 vs 控制台，我移到了 libsndfile-1.def（和 libsndfile-1.lib）路径并执行了：“lib.exe libsndfile.def”。在这里我得到另一个错误：“链接：致命错误 lnk1104 lib.exe，无法打开 libsndfile.lib”

我试图从网上下载 libsndfile.dll 但它仍然无法正常工作。我还尝试将所有库放在 Visual Studio 的源文件中。但同样，没办法。

我哪里错了？

先感谢您

编辑：我已经看到 vs 也没有找到其他 dll！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-19T18:13:55.823

请不要将 DLL 复制到文件夹中……这对您组织中的其他开发人员来说很烦人；而是右键单击您的应用程序并单击属性，进入配置属性->调试并将环境值设置为：

```
PATH=C:\PathToInclude;%PATH% 
```

这会将路径添加到您的环境并将其合并到您的应用程序环境中。

对您的应用程序的所有配置执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:49:07.070

我解决了简单地将所有dll文件放在.exe文件的同一目录中

# c# - 在 C# 中使用属性获取和设置字段

> ID：12767823
> 
> 赞同：1
> 
> 时间：2012-10-07T10:02:08.757
> 
> 标签：c#, .net, properties

嗨，我最近开始学习 C#，并且对属性有一些疑问。假设我有这样的声明：

```
private int minAge { get; set; } 
```

这是否转化为：

```
private int minAge

public int MinAge
{
    get { return this.minAge; }
    set { this.minAge = Convert.ToInt16(TextBox1.Text); } //this is what I would like                     to set the field to
} 
```

假设我有一个按钮，当我按下该按钮时，我需要它来设置 minAge 字段，然后返回数据。我怎样才能做到这一点？

我试过这个，但它似乎不起作用：

```
 minAge.get //to return data
   minAge.set =  Convert.ToInt16(TextBox1.Text); //to set the data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:04:49.070

您在类中定义属性并获取和设置属性，您必须使用类实例

```
YourClass objYourClass = new objYourClass;
int minAge= objYourClass.MinAge; //To get

objYourClass.MinAge =Convert.ToInt16(TextBox1.Text); //o set the property 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T10:06:08.287

您可以通过以下方式设置属性：

```
minAge = 10; 
```

要检索属性，您可以执行以下操作：

```
int age = minAge; // retrieves the age via the minAge property 
```

请注意，这必须在`Class`定义 this 属性的内部。如果您尝试为对象设置 minAge 的值，您可以执行以下操作：

```
var obj = new YourClass(); 

obj.minAge = 100; // sets minAge to 100

int minAge = obj.minAge; // Assigns the minAge variable to that of `obj` minAge value. 
```

和...之间的不同

```
 public int minAge { get; set; } 
```

和：

```
 private int minAge

public int MinAge
{
   get { return this.minAge; }
   set { this.minAge = Convert.ToInt16(TextBox1.Text); } //this is what I would like                     to set the field to 
```

}

如果您使用的是 .NET 框架 (4+) 的最新版本之一，MinAge 是否使用了`MinAge`不再需要的支持属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T10:05:09.520

属性的 set 和 get 与下划线成员的类型相同...

```
private int minAge

public int MinAge
{
    get { return this.minAge; }
    set { this.minAge = value } //"value" is of type int
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T10:06:02.967

你要做的就是公开你的财产：

```
 public int minAge { get; set; } 
```

然后你可以使用 get 和 set （隐式）：

```
 int age = minAge; //to return data
 minAge =  Convert.ToInt32(TextBox1.Text); //to set the data 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T10:08:34.177

如果您在 C# 中设置属性，则不必访问 get 和 set，它会自动完成：

```
// Get
int age = this.MinAge;

// Set
this.MinAge = Convert.ToInt16(TextBox1.Text); 
```

您可以像这样创建属性：

```
private int _minAge

public int MinAge
{
    get { return _minAge; }
    set { _minAge = value; }
} 
```

或者，如果您使用 .NET 3.5 或更高版本，您可以简单地使用：

```
public int MinAge
{
    get;
    set;
} 
```

底层类型由编译器自动创建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-07T10:10:50.250

实际上

```
public int MinAge { get; set; } 
```

被编译器翻译成类似的东西

```
private int minAge_backfield;

public int MinAge 
{
get { return minAge__backingField;} 
set { minAge__backingField = value;}
} 
```

这在 C# 中称为自动属性，其用法很简单

```
var val = MinAge; 
```

或者

```
MinAge = 10; 
```

我为此写了[一篇博](http://www.adilmughal.com/2008/04/automatic-properties-in-c-2008-language.html)文。

# sendmessage - 来自其他窗口的控件名称

> ID：12767825
> 
> 赞同：0
> 
> 时间：2012-10-07T10:02:37.937
> 
> 标签：sendmessage, spy++, findwindow, getwindowlong

我需要从其他窗口读取文本值并将该值查询到另一个应用程序（我的问题将围绕第一个任务）......所以，我正在“监视”其他窗口（我们使用的一些与我们的产品相关的第 3 方应用程序) 并等待单击“接受”按钮以从文本框中读取值。这个另一个应用程序，对话框，有多个文本框和命令按钮。我制作了一个鼠标钩，并在此应用程序出现时激活它。我正在读取此窗口矩形内的所有鼠标移动；文本、标题、子窗口 ID、矩形、左/右/中/滚轮点击。我可以抓住“接受”按钮点击；我可以看到按钮标题，我可以读取该窗口，获取文本并确定单击了哪个按钮等。现在……我可以读取所有 EDIT 类值，获取它们的窗口句柄、矩形等，但我无法将它们识别为类集合中的唯一项目：我需要专门阅读我想要的文本框值。幸运的是，当我从 EDIT 类循环中读取文本时，我感兴趣的文本框总是首先出现在我的循环中。但是我想更具体一点；确保我正在阅读带有 NAME 的文本框。我知道。在开发过程中，我可以读取该名称并将其硬编码到程序中。我的怀疑是控件名称未保存在二进制代码中。我的理解是控件 ID、窗口句柄是在创建窗口时创建的，并且绝对不引用控件名称（例如：txtOrderNumber）。如果对于按钮，我可以因为按钮标题而具体化（因此，我可以确定单击了哪个按钮）我被 EDIT 类项目锁定，并且在读取值时被抛出幸运的第一个猜测。我的问题是：如何从另一个窗口获取控件名称，对于这个任务，我有兴趣了解 EDIT 类实例名称。以下是该项目的一些代码（缩短）：

Dim hWnd As IntPtr = FindWindow(Nothing, _windowText)

'API：FindWindowEx 'API：SendMessage 'API：GetClassName 'API：GetWindowTextLength 'API：GetWindowText 'API：WM_GETTEXT

```
Public Shared Function GetClassValues(_controlClass As String, _hWindow As IntPtr) As List(Of String)

    Dim cl As New List(Of String)

    'First control handle in that class
    Dim hc As IntPtr = FindWindowEx(_hWindow, IntPtr.Zero, _controlClass, vbNullString)
    Do
        Dim sv As String = GetWindowValue(hc)
        cl.Add(sv)

        'Next control (after hc) handle
        hc = FindWindowEx(_hWindow, hc, _controlClass, vbNullString)
    Loop Until hc = 0
    Return cl
End Function
Public Shared Function GetWindowValue(_hWindow As IntPtr) As String
    If _hWindow = IntPtr.Zero Then Return String.Empty
    Dim sz As Integer = 256
    Dim bf As IntPtr = Marshal.AllocHGlobal(sz)
    Dim pt As IntPtr = SendMessage(_hWindow, WM_GETTEXT, sz, bf)
    Dim rs As String = Marshal.PtrToStringUni(bf)
    Marshal.Release(bf)
    Return rs.Trim
End Function
Public Shared Function GetWindowClassName(_hWindow As IntPtr) As String
    Dim ln As Integer = 256
    Dim sb As New System.Text.StringBuilder("", ln)
    GetClassName(_hWindow, sb, ln)
    Return sb.ToString()
End Function
Public Shared Function GetWindowText(_hWindow As IntPtr) As String
    Dim ln As Integer
    If _hWindow.ToInt32 <= 0 Then Return String.Empty
    ln = GetWindowTextLength(_hWindow)
    If ln = 0 Then Return String.Empty
    Dim sb As New System.Text.StringBuilder("", ln + 1)
    GetWindowText(_hWindow, sb, sb.Capacity)
    Return sb.ToString()
End Function 
```

我查看了 GetWindowLong 和 GetDlgCtrlID API，并尝试了大多数标志，但到目前为止都没有成功......

任何提示，线索，方向表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:31:36.507

我做了一个全局鼠标钩子，这不是问题，GetWindowText 和 WM_GETTEXT 工作正常。事实上，该程序在这一点上运行良好且功能正常。在检测到目标窗口后，我使用 EnumChildWindows API 将子窗口句柄保存在列表集合中并仅过滤 EDIT 类窗口（与上面发布的 GetClassValues 函数的修改版本一起使用。此函数的参数是第一个 EDIT 类窗口句柄）。无论如何，我任意访问所需文本框的方式是使用此类窗口的保存列表并通过列表索引访问。正如我之前提到的，幸运的是，windows 以一致的顺序创建 THIS CHILD 窗口。所以，在我的例子中，这个 EDIT 类窗口，文本框“object”，总是在列表中的第一个，尽管主窗口中有很多。

# ruby-on-rails - Heroku 推送给我“没有检测到雪松支持的应用程序错误”

> ID：12767827
> 
> 赞同：0
> 
> 时间：2012-10-07T10:03:26.263
> 
> 标签：ruby-on-rails, ruby, heroku, push

我第一次尝试将我的 RoR 推送到 Heroku（我是这个东西的新手！）我得到的错误是：

```
-----> Heroku receiving push
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:calm-retreat-9405.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:calm-retreat-9405.git' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:37:03.950

仔细检查您是否正确提交了 Gemfile 和 config.ru

# jeditable - jeditable 在编辑文本框中显示占位符文本

> ID：12767828
> 
> 赞同：2
> 
> 时间：2012-10-07T10:03:30.323
> 
> 标签：jeditable

我对 jeditable 有疑问，并尝试自定义占位符文本的样式。

```
 $(".labeledit").editable("....", {
            event: "click",
            onblur: "submit",
            width:($(".labeledit").width() + 40) + "px",
            placeholder: "<span class='placeholder'>add label</span>",
            tooltip: "Click to update"
        }); 
```

在占位符文本中，我添加了一个跨度并关联了一个类。这在视图中工作正常，但是当我单击添加标签文本时，它会将占位符文本放入文本框中，所以我得到

```
<span class='placeholder'>add label</span> 
```

出现在文本框中。

如果我只有占位符：“添加标签”，则添加标签文本不会显示在文本框中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:07:57.307

这里是！代替：

```
...
placeholder: "<span class='placeholder'>add label</span>",
... 
```

尝试切换引号：

```
...
placeholder: '<span class="placeholder">add label</span>',
... 
```

# css - CSS背景数据URI不起作用（Chrome）

> ID：12767831
> 
> 赞同：2
> 
> 时间：2012-10-07T10:04:57.243
> 
> 标签：css, data-uri

**我正在尝试将图像作为编码数据直接嵌入到我的 css 中：**

```
background:#fae url("data:image/gif;base64, 

    R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jv
    b29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//
    mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Eky
    ky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCm
    TIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr
    7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7") 

    no-repeat; 
```

**但是，它失败了。**更奇怪的是，将数据 URI 直接嵌入到图像标签**中确实**有效：

您可以在以下位置查看我的示例：http: **[//jsfiddle.net/cAb2y/1/](http://jsfiddle.net/cAb2y/2/)**

**难道我做错了什么？**

（来源示例：[http](http://www.websiteoptimization.com/speed/tweak/inline-images/) ://www.websiteoptimization.com/speed/tweak/inline-images/ ）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T10:15:30.387

从数据 URI 中删除所有换行符或空格：

```
h3 {
    width:50px;
    height:50px;
    display:block;
    border:2px red solid;
    background:#fae url("data:image/gif;base64,R0lGODlhEAAOALMAAOazToeHh0tLS/7LZv/0jvb29t/f3//Ub//ge8WSLf/rhf/3kdbW1mxsbP//mf///yH5BAAAAAAALAAAAAAQAA4AAARe8L1Ekyky67QZ1hLnjM5UUde0ECwLJoExKcppV0aCcGCmTIHEIUEqjgaORCMxIC6e0CcguWw6aFjsVMkkIr7g77ZKPJjPZqIyd7sJAgVGoEGv2xsBxqNgYPj/gAwXEQA7") no-repeat;
}​ 
```

# objective-c - 替换已弃用的 NSNibLoading 方法（loadNibFile:、loadNibNamed: 等）？

> ID：12767838
> 
> 赞同：15
> 
> 时间：2012-10-07T10:06:04.287
> 
> 标签：objective-c, xcode, macos, cocoa, appkit

我发现 NSBundle 中的 NSNibLoading 方法：

```
+[NSBundle loadNibFile:externalNameTable:withZone:]
+[NSBundle loadNibNamed:owner:]
-[NSBundle loadNibFile:externalNameTable:withZone:] 
```

在 10.8 中都已被标记为弃用 - 在 10.8 及更高版本中加载笔尖的正确方法是什么？

我正在尝试在我的应用程序中创建自定义工作表，我是否必须`NSWindowController`为`initWithWindowNibName`自定义工作表创建？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-30T17:57:37.333

如果您的应用程序要支持 Lion，则`loadNibNamed:owner:topLevelObjects:`不会触发，并且在 Lion 上运行时会出现异常（无法识别的选择器）。经过一番搜索，我想出了这个：

```
 // loadNibNamed:owner:topLevelObjects was introduced in 10.8 (Mountain Lion).
    // In order to support Lion and Mountain Lion +, we need to see which OS we're
    // on. We do this by testing to see if [NSBundle mainBundle] responds to
    // loadNibNamed:owner:topLevelObjects: ... If so, the app is running on at least
    // Mountain Lion... If not, then the app is running on Lion so we fall back to the
    // the older loadNibNamed:owner: method. If your app does not support Lion, then
    // you can go with strictly the newer one and not deal with the if/else conditional.

    if ([[NSBundle mainBundle] respondsToSelector:@selector(loadNibNamed:owner:topLevelObjects:)]) {
        // We're running on Mountain Lion or higher
        [[NSBundle mainBundle] loadNibNamed:@"NibName"
                                      owner:self
                            topLevelObjects:nil];
    } else {
        // We're running on Lion
        [NSBundle loadNibNamed:@"NibName"
                         owner:self];
    } 
```

如果您真的想使用`topLevelObjects:&array`Mountain Lion +，并且还想支持 Lion，那么对于 Lion 条件 (我可能错了这个）。我得到的印象`loadNibNamed:owner:topLevelObjects:`是为了取代这个而创造的。

我还在其他地方读到过，当使用较新`loadNibNamed:owner:topLevelObjects:`的工作表时，您应该取消选中工作表（窗口）的“关闭时释放”。关闭工作表时应注意这一点：

```
[self.sheet close];
self.sheet = nil; 
```

如果您打开一个非模态窗口，我不确定应该对该复选框做什么。有任何想法吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T10:34:51.477

该类`NSBundle`方法`loadNibNamed:owner:`在 OS X v10.8 中已被弃用，
`loadNibNamed:owner:topLevelObjects:`但**文档**[中](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/cl/NSBundle)的注释说明了原因：

> **与传统方法不同，对象遵循标准的可可内存管理规则；有必要通过使用 IBOutlets 或持有对数组的引用来保持对它们的强引用，以防止 nib 内容被释放。**

# css - CSS 从内联元素中删除边距

> ID：12767840
> 
> 赞同：-1
> 
> 时间：2012-10-07T10:06:18.857
> 
> 标签：css, center, margin, inline

我在定位导航元素时遇到问题。

CSS：

```
#wrapper { width: 600px; margin: 0 auto; height: 300px; background: #f9f9f9; border: 1px solid #f0f0f0; }
#navigation { margin: 0 auto; text-align: center; }
.mylink { background: #666; color: #ccc; padding: 5px 10px; display: inline-block; }
.mylink:first-child { -webkit-border-top-left-radius: 10px; -moz-border-radius-topleft: 10px; border-top-left-radius: 10px; }
.mylink:last-child { -webkit-border-top-right-radius: 10px; -moz-border-radius-topright: 10px; border-top-right-radius: 10px; } 
```

HTML：

```
<div id="wrapper">
    <div id="navigation">
        <a class="mylink">Homepage</a>
        <a class="mylink">Second Page</a>
        <a class="mylink">Third Page</a>
    </div>
</div> 
```

我想删除内联元素的边距。我也尝试了“浮动：左”变体。但是我不能在没有宽度值的情况下将元素居中。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:11:48.347

这是“内联块”的常见问题。您处理的不是边距，而是实际的空格字符。

这应该会有所帮助：[http ://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:14:02.367

你没有边距，内联元素只考虑空格（空格，制表符，换行符，任何其他不可见的分隔符），要么使用块显示和浮动，要么在没有空格的情况下键入它，更新你的小提琴[http:// jsfiddle.net/Rnmbx/1/](http://jsfiddle.net/Rnmbx/1/)

# php - 以php形式提交之前出现错误

> ID：12767841
> 
> 赞同：0
> 
> 时间：2012-10-07T10:06:23.307
> 
> 标签：php, forms

我有以下代码，但不幸的是，页面加载后，在单击提交之前会出现 $error。我究竟做错了什么？

（文件名= form.php）

```
<?php
$error="";
if (isset($_POST['submit']) && $_POST['submit'] == "Submit") {  

$name = $_POST['name'];
$email = $_POST['email'];

if($name=="" || $email==""){
$error .= "Error: all fields are required";
}
if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email)) {
$error .= "<br/> Error: Invalid email address";
}

if (isset($error) && ($error!=="")) {
    echo $error;
}
elseif (empty($error)){
    // this works no need to write here... send form.
    }
    }

echo<<<_END
<html><head><body>
<form method='post' action='form.php'>
<p>Name</p> <input type="text" name="name" value='$name'>
<p>Email</p> <input type="text" name="email" value='$email'>
<input type="submit" name="submit" value="Submit">
<input type="reset" name="reset" value="Clear">
</form>
</body>
</html>
_END;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:13:09.683

```
if (isset($error) && (!$error=="")) {
echo $error; 
```

}

如果设置了 $error 并且 $error 不等于任何内容 echo $error? 在第一行将 $error 初始化为 "" 时正在设置它，它等于 ""

刚注意到！在 if 的第二部分。照我下面的人说的做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:11:17.380

替换`(!$error==""))`为`($error!==""))`。

# javascript - 没有jQuery UI的jQuery自定义可拖动控件幻灯片

> ID：12767844
> 
> 赞同：1
> 
> 时间：2012-10-07T10:06:48.830
> 
> 标签：javascript, jquery

我已经成功制作了一个自定义控件滑块，但它不可拖动。我尝试在线搜索解决方案，但大多数都使用 jQuery UI。

[http://jsfiddle.net/LWabn/1/](http://jsfiddle.net/LWabn/1/)

如何使控件滑动按钮可拖动并动态更新`input`字段的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T11:16:18.623

这是没有 jQuery UI 的可拖动滑块的基本模板：http: [//jsfiddle.net/TGd96/](http://jsfiddle.net/TGd96/)

# php - 如何使用 node.js 和 php？

> ID：12767845
> 
> 赞同：3
> 
> 时间：2012-10-07T10:06:49.067
> 
> 标签：php, node.js

我的主要应用程序将在 Node.js 中。但是，我还想要一个 phpBB 论坛和一个 MediaWiki wiki，最好在同一个 Amazon EC2 服务器上提供服务。

我知道 DNode 这似乎是 PHP 和 Node.js 相互通信的一种方式。但是，我想要做的只是处理 PHP 的某些目录 - 例如：

```
/ = PHP
/chat/ = Node.js
/forums/ = PHP
/wiki/ = PHP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:32:55.477

正如您的示例所示，您将 PHP 用于列出的目录，并将 Node.js 用于聊天客户端。我不明白您为什么要将 PHP 代码集成到聊天客户端中。如果有的话，您可以将数据传递给它，这可以通过 json 来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:11:55.557

通常的方法是让一个网络服务器托管站点，并在需要时代理来自另一个的请求。

例如，您可以使用带有[mod_php的](https://stackoverflow.com/questions/2712825/what-is-mod-php)[Apache](http://httpd.apache.org)来处理 PHP，然后使用[来自 mod_proxy 的指令](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)将请求转发到 Node.js 的特定[s](http://httpd.apache.org/docs/2.2/mod/core.html#location)。[`ProxyPass`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)[`<Location>`](http://httpd.apache.org/docs/2.2/mod/core.html#location)

# asp.net - 密码文本框在选择下拉列表时被清除

> ID：12767846
> 
> 赞同：0
> 
> 时间：2012-10-07T10:07:02.260
> 
> 标签：asp.net, vb.net

我对密码文本框控件有疑问。我有用户名文本框、密码文本框、retypepassword 文本框。我有包含网站、报纸、其他项目的下拉列表。填写用户名、密码后，在文本框中重新输入密码。每当我从下拉列表中选择报纸和其他项目时，密码和重新输入密码文本框的值都会被清除。我在下拉列表控件中设置了 autopostback=true。请有人帮助我我的错误在哪里？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:55:53.407

这是有意的，因为`AutoPostBack`设置为`True`，网站将执行回发并重新加载页面（或部分页面）。期间不保留密码输入中的值`Postbacks`。

# ios - 来自子视图的mapView setCenter

> ID：12767851
> 
> 赞同：0
> 
> 时间：2012-10-07T10:08:03.197
> 
> 标签：ios, uitableview, map, subview

我是 ios 编程新手。

是否可以从子视图控制地图视图？

我有名为 mapview 的 viewController。而且mapview有一个按钮来添加子视图。并且该子视图已导入到 mapview 中。在子视图中我有一个表，当我在表上选择行时，我需要 mapview setCenter 到位置。

那么，我该怎么做呢？非常感谢。

# c# - 如何从 C# 端填充 asp:DropDownList

> ID：12767853
> 
> 赞同：0
> 
> 时间：2012-10-07T10:08:11.107
> 
> 标签：c#, asp.net

我正在尝试用数据项填充 asp:DropDownList，这是我到目前为止编写的代码

.aspx 端

```
<asp:DropDownList ID="ddl" runat="server" /> 
```

C#端

```
protected void btnAdd_Click(object sender, EventArgs e)
{
  ddl.DataTextField = "hello";
  ddl.DataTextField = "2";
  ddl.DataBind();
} 
```

该方法`btnAdd_Click`被调用。我测试了它。但是数据列表没有填充这些数据项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:10:51.493

尝试像这样添加您的项目

```
ddl.Items.Add(new ListItem("Your Text", "0")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:19:19.527

如果您想使用`DataTextField`and `DataBind`，我假设您有一个要绑定到下拉列表的数据源。如果你想这样做，你还必须有一个`DataValueField`.

```
ddl.DataValueField = "id";
ddl.DataTextField = "name";
ddl.DataSource = GetData();
ddl.DataBind(); 
```

该`GetData`方法必须返回带有一个`id`和一个`name`列的数据源。

# node.js - Java Script 中的面向对象方法

> ID：12767856
> 
> 赞同：3
> 
> 时间：2012-10-07T10:08:56.773
> 
> 标签：node.js

是否可以在 Java Script中使用**OO 方法？****我使用 node.js 在服务器端和客户端都**使用 JavaScript 。目前我正在使用对 CRUD 操作的查询而不是查询是否可以使用**DTO**将数据保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:44:11.053

是的，您可以使用原型继承来模拟它。由于语言是原型驱动的，因此规则完全不同，您需要对原型链等进行一些研究，但最终它变得非常有用。

查看 Node 核心中继承自 EventEmitter 的内容。它们有一个名为 util.inherits 的内置函数，该函数具有更高版本的 ECMA 的实现。它看起来像这样：

```
/**
 * Inherit the prototype methods from one constructor into another.
 *
 * The Function.prototype.inherits from lang.js rewritten as a standalone
 * function (not on Function.prototype). NOTE: If this file is to be loaded
 * during bootstrapping this function needs to be rewritten using some native
 * functions as prototype setup using normal JavaScript does not work as
 * expected during bootstrapping (see mirror.js in r114903).
 *
 * @param {function} ctor Constructor function which needs to inherit the
 *     prototype.
 * @param {function} superCtor Constructor function to inherit prototype from.
 */
exports.inherits = function(ctor, superCtor) {
  ctor.super_ = superCtor;
  ctor.prototype = Object.create(superCtor.prototype, {
    constructor: {
      value: ctor,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
}; 
```

一个示例使用是 Stream 类：

[https://github.com/joyent/node/blob/master/lib/stream.js#L22-29](https://github.com/joyent/node/blob/master/lib/stream.js#L22-29)

```
var events = require('events');
var util = require('util');

function Stream() {
  events.EventEmitter.call(this);
}
util.inherits(Stream, events.EventEmitter); 
```

在 coffeescript 中，类编译成一组稍微不同的代码，归结为这个 __extends 函数。我*相信*这将有更多的跨浏览器兼容性，但我不记得谁不支持 Object.create。

```
var __hasProp = Object.prototype.hasOwnProperty, __extends = 
function(child, parent) { 
    for (var key in parent) { if (__hasProp.call(parent, key)) 
child[key] = parent[key]; } 
    function ctor() { this.constructor = child; } 
    ctor.prototype = parent.prototype; 
    child.prototype = new ctor; 
    child.__super__ = parent.prototype; 
    return child; 
  }; 
```

# database-design - 如何以规范的方式存储邮政地址和政治分区？

> ID：12767857
> 
> 赞同：0
> 
> 时间：2012-10-07T10:09:11.950
> 
> 标签：database-design, street-address

是否可以以标准化的方式存储邮政地址和政治部门，从而避免冗余？它应该适用于任何州，即使每个州都需要自己的结构。

这不仅仅是存储地址。我想附上有关城镇等的其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:57:46.750

我能想象的最规范化的方式是创建国家 -> 州 -> 城市 -> 邮编 -> 地址之类的表格。每个“节点”都与下一个表存在一对多的关系。从与州有一对多关系的国家开始，DDL 将如下所示：

```
CREATE TABLE countries (
    country_id integer NOT NULL,
    name character varying(80) NOT NULL,
    symbol_3 character(3),  -- i meant ISO-code
    symbol_2 character(2),  -- ISO -code as well
    citizenship character varying(50) -- not obligatory in my case
);

CREATE TABLE states (
    state_id integer NOT NULL,
    country_id integer NOT NULL,
    name character varying(50) NOT NULL
);

CREATE TABLE cities (
    city_id integer NOT NULL,
    state_id integer NOT NULL,
    name character varying(80) NOT NULL
);

CREATE TABLE zips (
    zip_id integer NOT NULL,
    city_id integer NOT NULL,
    number character(5) NOT NULL
);

CREATE TABLE addresses (
    address_id integer NOT NULL,
    zip_id integer NOT NULL,
    street text NOT NULL,
    notes text
); 
```

请记住（连同最佳设计实践）数据库中的大多数属性应声明为 NOT NULL，主要是因为性能。

并回答您的下一个问题（如果您还没有弄清楚） zip 应该存储为字符类型 - 而不是您的数据库支持的几种数字数据类型之一。为什么？因为您不想在邮政编码的开头填写零或 ziros。数字类型只是截断数字前面的零。

有用的图表显示了我在下面的意思：

[http://blog.blueage-software.com/pics/blog-images/ERD_country_province.jpg](http://blog.blueage-software.com/pics/blog-images/ERD_country_province.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:17:33.603

任何东西*都*可以以规范化的形式存储。第五范式和正交设计原则等工具可用于消除数据库设计中的某些类型的问题。然而，没有范式声称可以消除所有类型的冗余，这样做也不是可取的，甚至是不可实现的（信息论的观点是冗余是一条数据中的有用信息）。

您可能会发现派对数据模型很有帮助： [http ://www.tdan.com/view-articles/5014/](http://www.tdan.com/view-articles/5014/)

# android - 不同屏幕的背景图片

> ID：12767859
> 
> 赞同：0
> 
> 时间：2012-10-07T10:09:32.977
> 
> 标签：android, resources, background

在我的应用程序中，我有活动背景。这是一张图片，我将使用 fitXY 作为它。我可以调整它的大小（保持纵横比不是很重要），但不是很多。我将准备几张不同尺寸的图像，用于纵向和横向。我将覆盖大约 90% 的设备。我的问题如下：

1.  我需要什么尺寸的图片作为背景？
2.  我应该将这些图像放在“res”下的哪些文件夹？

我想获得非常具体的文件大小和文件夹名称来放置这些文件。该解决方案也应该适用于平板电脑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:07:10.697

我只使用了两张最大尺寸的图像（一张肖像和一张风景）。然后android将大小调整为更小，对我来说看起来相当不错。

1.  我有一个分辨率的背景：**可绘制**文件夹中的**800*1200**像素
***   另一个分辨率为：**1200*800** px in **drawable-land**文件夹**

 **这在平板电脑上效果很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T10:27:19.973

您必须为您的应用程序创建多个资源。Android 有 4 种分辨率（ldpi、mdpi、hdpi 和 xhdpi）和 4 种通用屏幕尺寸（小、中、大和特大）。因此，您必须制作 4 种布局（如果您不打算支持平板电脑，则需要 3 种布局，因为平板电脑属于超大类别）以支持屏幕尺寸。

这是一个一般指南：

将小、中、大和特大的布局放在 res/ 文件夹中，如下所示：

```
res/layout/sample_layout.xml             // default layout
res/layout-small/sample_layout.xml       // layout for small screen size
res/layout-large/sample_layout.xml       // layout for large screen size
res/layout-xlarge/sample_layout.xml      // layout for extra large screen size 
```

你也可以使用

`res/layout-land/sample_layout.xml`适用于所有屏幕尺寸的横向，或者您可以将特定屏幕尺寸的横向布局定位为`res/layout-medium-land/sample_layout.xml`

请注意，所有布局都具有相同的名称。

准备好布局后，还需要注意图像分辨率

再次在您的 res/ 文件夹中添加如下图像：

```
res/drawable-ldpi/sample_image.png         // low density
res/drawable-mdpi/sample_image.png         // medium density
res/drawable-hdpi/sample_image.png         // high density
res/drawable-xhdpi/sample_image.png        // extra high density 
```

再一次，所有图像都具有相同的名称。

设计图像的一般准则是：

```
ldpi is 0.75x dimensions of mdpi
hdpi is 1.5x dimensions of mdpi
xhdpi is 2x dimensinons of mdpi 
```

通常，我为 320x480 屏幕设计 mdpi 图像，然后按照上述规则将尺寸相乘以获得其他分辨率的图像。

Android 将根据设备自动选择布局和图像的最佳组合。例如，对于高分辨率中等尺寸设备，将向用户显示布局中等和高密度的图像。

确保为所有这些组合创建模拟器并彻底测试您的应用程序。这是官方文档以获取更多信息：

[https://developer.android.com/guide/practices/screens_support.html](https://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:16:55.750

m/h/xh dpi 是[最重要](http://developer.android.com/about/dashboards/index.html)的。将其与[（最常见的）解决方案](http://developer.android.com/guide/practices/screens_support.html#testing)结合起来，您的“90%”目标应该没问题。**

# c# - 计算机之间自动更新记录 C#

> ID：12767862
> 
> 赞同：3
> 
> 时间：2012-10-07T10:10:08.577
> 
> 标签：c#, sql-server, winforms

我需要帮助。我目前正在使用 Winforms 和 C# 构建数据管理应用程序。此应用程序已安装在 10 台计算机上，并连接到服务器上的一个数据库。网络只在办公室。

这些应用程序使用数据网格视图来显示员工列表。

现在的主要问题是，如果 PC-A 上的用户输入了新记录或更新了员工记录，PC-B 上的数据网格视图不会自动更新。所以如果我想刷新PC-B上的数据网格视图，我需要按下“REFRESH”按钮来重新加载记录。

那么现在的问题是，还有其他方法可以自动更新“数据网格视图”吗？

我不知道这个方法叫什么名字，所以我希望有人愿意帮助我解决这个问题。如果我的问题已经存在，希望有人能给我一个链接。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:35:28.737

为了实现你想要的，你需要做一些相当复杂的架构工作。恐怕这里没有简单的解决办法。

问题是您希望您的数据网格根据事件进行更新，但是该事件发生在数据库中的应用程序之外。为了注册该事件，您需要有一个负责处理所有插入/更新/删除的类或服务。

如果您将所有表或视图定义为 ARTICLES，则您可以拥有一个发布者/订阅者模型。数据服务将处理应用程序的所有插入更新和删除，并将文章已更改的通知推送到文章的所有订阅者。在每个页面上，您都可以有一个订阅与数据网格上显示的数据相关的文章的类，当它收到文章已更新的消息时，将数据网格重新绑定到数据源。尝试阅读这篇关于观察者模式的 WIKIPEDIA 文章，以了解架构可能是什么样子。

[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:25:58.643

您可以将版本列添加到数据库表中，然后您应该定期询问数据库（池）以获取具有比上次接收的版本更大的记录

# php - 多级菜单的生成

> ID：12767863
> 
> 赞同：0
> 
> 时间：2012-10-07T10:10:09.637
> 
> 标签：php, arrays, menu

我对生成的多级菜单有疑问。我希望每个菜单级别选择另一种颜色（li class=menucolor）。但是，我设法只做到了第一级和第二级。我不能把第二层和第三层分开。请帮忙。

SQL：

```
CREATE TABLE IF NOT EXISTS `menu` (
`id` int(11) NOT NULL auto_increment,
`id_parent` int(11) NOT NULL default '0',
`link` varchar(255) NOT NULL,
`order` int(11) NOT NULL default '0',
`title` varchar(255) collate utf8_polish_ci NOT NULL default '',
PRIMARY KEY  (`id`)
);

INSERT INTO `menu` (`id`, `id_parent`, `link`, `order`, `title`) VALUES
(1, 0, index.php, 3, 'Index'),
(3, 1, link1.php, 1, 'Art1'),
(4, 1, link2.php, 2, 'Art2'),
(5, 4, link2.php, 6, 'Other art'),
(6, 4, link2.php, 1, 'Art AAA'),
(7, 4, link2.php, 1, 'Art BBB'),
(8, 4, link2.php, 1, 'Art CCC'), 
```

和代码：

```
<ul id="menu_left">
<?php
$menuArray = array();
$query = mysql_query('  select id, id_parent, link, order, title
                        from menu
                        order by order asc
              ');

while($row = mysql_fetch_array($query))
{
  $menuArray[] = array( 'id'           => $row['id'],
                        'id_parent'    => $row['id_parent'], 
                        'link'         => $row['link'],
                        'order'        => $row['order'], 
                        'title'        => $row['title']
              );
}

function menu($id)
{
  global $menuArray;
  $hasChildren = false;
  $resultArray = array();

  if (empty($menuArray))
  {
    return;
  }

  foreach ($menuArray as $value)
  {
    if ($value['id_parent'] == $id)
    {
      $resultArray[] = $value;

    }
  }

  foreach ($resultArray as $value)
  {
    if ($hasChildren === false)
    {
      $hasChildren = true;
      if ($value['id_parent'] == 0)
      {
      $j++
        ?>
        <!-- ul first -->
        <?php
      }
      else
      {
        ?>
       <!-- <ul> -->
        <?php
      }
    }
    if($j=='1') {
    echo '<li class="menucolor0">';
    }
    elseif($j!='1') {
    echo '<li class="menucolor1">';
    }
    ?>
    <a href=<?php echo $value['link']; ?>"><?php echo $value['title']; ?></a> 
    <?php
    menu($value['id']);
    ?> 
    </li>
    <?php
  }
  if ($hasChildren === true)
  {
  <!-- </ul> -->
  }
}

menu(0); 
?>    
        </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:21:27.450

```
if($j=='1') {
echo '<li class="menucolor0">';
}
elseif($j!='1') {
echo '<li class="menucolor1">';
} 
```

您只允许两种情况，要么等于 1，要么不等于。

```
switch ($j) {
case 1:
    echo  '<li class="menucolor0">';
    break;
case 2:
     echo '<li class="menucolor1">';
    break;
case 3:
     echo '<li class="menucolor2">';
     break;
default:
     echo '<li class="menucolor0">;
     break; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:50:24.860

对此的任何直接解决方案都会非常缓慢，我建议您更新您的表格：

```
<?php

$db = new PDO('mysql:dbname=databasename', 'username', 'password',
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

$db->prepare('ALTER TABLE `menu` ADD COLUMN `level` TINYINT NOT NULL DEFAULT 0;')->execute();

$db->prepare('UPDATE `menu` SET `level` = 1 WHERE `id_parent` = 0;')->execute();

$select = $db->prepare('SELECT `id` FROM `menu` WHERE `level` = :level');
$update = $db->prepare('UPDATE `menu` SET `level` = :level WHERE `id_parent` = :parent');

for( $i = 1; $i < 100; $i++ ) {
    $select->execute(array('level' => $i));
    while( ($current = $select->fetch(PDO::FETCH_COLUMN)) !== false )
        $update->execute(array('level' => $i + 1, 'parent' => $current));
} 
```

以下是按所需顺序显示菜单的方式：

```
<?php
// connect to database using PDO
$db = new PDO('mysql:dbname=databasename', 'username', 'password',
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));

function createsubmenu( $item )
{
    global $db;
// prepare a query to get subitems of the current $item (those with parent = $item)
    $subsel = $db->prepare('SELECT id, link, title, level  FROM menu WHERE id_parent = :parent ORDER BY `order`');
// run the query
    $subsel->execute(array('parent' => $item));
    $text = '';
// fetch one row at a time, when no more rows are available $i
// will be false and while ends
    while( ($i = $subsel->fetch(PDO::FETCH_OBJ)) !== false ) {
// generate code for the current $item
// will recursively call createsubmenu to add possibly existing subitems
        $text .= '<li class="menucolor' . ($i->level - 1) . '">'
            .'<a href="' . htmlspecialchars($i->link) . '">' . htmlspecialchars($i->title) . '</a>'
            . createsubmenu($i->id) . '</li>';
    }
// there were no items for the current call
    if( $text == '' )
        return '';
// items were found, wrap them in an unordered list
    return '<ul>' . $text . '</ul>';
}

// call the function for toplevel items (the ones having parent 0)
echo createsubmenu(0); 
```

不要忘记在两个脚本中替换数据库名称、用户名和密码

# java - 当用户按下退出时，如何中断线程并要求它完成工作？

> ID：12767869
> 
> 赞同：0
> 
> 时间：2012-10-07T10:11:07.987
> 
> 标签：java, multithreading

下面的代码片段是一个名为“Foo”的线程，它会休眠 1 分钟，然后将*1 分钟*内输入的数据复制到日志文件中。

```
 while(isStarted) {
           try {
              Thread.sleep(60000); // sleep for 1 minute
              ArrayList<String> keyStrokeList = nativeMethods.getKeyStrokeList();
              int result = copy.copyToLogFile(keyStrokeList);
              System.out.println(result);
           } catch(Exception exc) {
               exc.printStackTrace();
             }
         } 
```

我将描述一种情况：

*Foo*线程已经完成了对最后一分钟输入的所有数据的复制，并且从休眠到现在已经 30 秒。该线程不知道在睡眠时有几个键被敲击的情况，永远无法将击键复制到日志文件中`System.exit(0)`。

有什么办法可以中断这个线程*，即唤醒它并要求它将数据复制到日志文件*。

请讨论我应该如何解决这个问题。

**问题中的情况：**

```
loop started

thread is sleeping and will sleep for 1 minute

after a minute,it gets the keys tapped in the last 1 minute and copies all that
to a file

Thread sleeps again..and will sleep for 1 minute before it copies the keystrokes

It has been about 30 seconds and thread will sleep for 30 seconds more before it starts
copying the key strokes

suddenly the user presses exit button in the application

The user wants that key strokes be recorded till the second he presses exit

I cannot do System.exit(0) before checking the thread is asleep or not

How do I do this. Should I awake it or make a different call to the list and get the 
key strokes because they are being recorded ? And how shall I awake it ? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:32:16.570

你在那儿……

```
while(isStarted) {
    try {
        Thread.sleep(60000); // sleep for 1 minute
    } catch(InterruptedException exc) {
        exc.printStackTrace();
    }
    ArrayList<String> keyStrokeList = nativeMethods.getKeyStrokeList();
    int result = copy.copyToLogFile(keyStrokeList);
    System.out.println(result);
} 
```

您需要提供一种终止循环的方法...

```
public void dispose() {
    isStarted = false;
    interrupt();
    try {
        join();
    } catch(InterruptedException exc) {
        exc.printStackTrace();
    }
} 
```

您还应该知道 JVM 不会退出，直到所有非守护线程都完成（在正常关闭下）。这意味着您可以调用`System.exit(0)`并且 JVM 不会终止，直到记录器线程终止。

你可以使用它，但附加一个[关闭钩子](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)，它可以调用`dispose`记录器线程上的方法......只是一个想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:31:31.483

您应该使用 2 个线程之间的共享对象来实现等待/通知模式，而不是 Thread.sleep(..) 方法。

在您的情况下，有 2 个线程：

*   它以 1 分钟的间隔读取缓冲区。（线程 1）
*   哪个将首先收到“退出”事件。（线程 2）

因此，每当您创建 Thread1 的实例时，您都可以将 Java 对象 (new Object()) 传递给它。阅读器线程可以使用 object.wait(60*1000); 因此，如果在 1 分钟内未调用 object.notify()，它将最多休眠 1 分钟。如果在此期间调用 object.notify()，线程将立即恢复。

因此，每当用户想要退出应用程序时，您都可以调用 object.notify(); 这将恢复阅读器线程。

如果由于我的英语不好而未能向您解释解决方案，请告诉我。我会给你一个代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:42:35.527

这是一个相当简单的测试用例来展示一种方法：

```
public class InterruptTest
{
    @Test
    public void test() throws InterruptedException
    {
        //Create the logging thread and start it
        LogRunnable runnable = new LogRunnable();
        Thread t = new Thread(runnable);
        t.start();

        //Wait some time
        Thread.sleep(3500);

        System.out.println("User has pressed exit, starting shutdown");

        //Tell the runnable to shut down
        runnable.halt();
        //Interrupt the thread to wake it up
        t.interrupt();
        //Wait until thread terminates
        t.join();

        System.out.println("Exiting");
    }

    private static class LogRunnable implements Runnable
    {
        private static final int SLEEPMS = 2000;

        private boolean isStarted = true;
        private int runCount = 1;

        public void halt()
        {
            this.isStarted = false;
        }

        public void run()
        {
            while(isStarted)
            {
                try
                {
                    Thread.sleep(SLEEPMS);
                }
                catch(InterruptedException e)
                {
                    System.out.println("Interrupted");
                }
                catch(Exception exc)
                {
                    exc.printStackTrace();
                }

                //Do work
                System.out.println("Work done " + runCount++);
            }
        }
    }
} 
```

输出：

```
Work done 1
User has pressed exit, starting shutdown
Interrupted
Work done 2
Exiting 
```

*   当用户按下退出键时，您向主线程发出信号以开始关闭一切（在测试用例中，它只是等待一段时间）
*   记录线程被告知通过[中断（）](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)调用停止和唤醒
*   在退出之前，主线程调用[join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)以等待日志线程完成，您可以考虑使用一个需要超时的重载，以防出现问题
*   日志线程以 唤醒`InterruptedException`，捕获后完成代码并终止
*   日志记录线程终止后，主线程从`join()`-call 返回并终止

# svn - 不使用标签或分支时，SVN中是否允许有空标签或分支目录？

> ID：12767871
> 
> 赞同：0
> 
> 时间：2012-10-07T10:11:20.440
> 
> 标签：svn

我正在搜索但找不到问题的答案：

不使用标签或分支时，SVN中是否允许有空标签或分支目录？有没有说明这一点的文件？

谢谢，马丁

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T10:13:20.300

你可以在 subversion 中创建任何你想要的节点。那取决于你。

Subversion 实际上是一个带有额外时间维度的分层文件系统。

# asp.net - 根据用户权限调用ajax调用

> ID：12767875
> 
> 赞同：1
> 
> 时间：2012-10-07T10:11:45.290
> 
> 标签：asp.net, jquery

我的网站上有 jquery 按钮，但其中一些按钮不必每个用户都可以点击，所以必须有权限，所有按钮都会进行 ajax 调用，所以我如何控制这些按钮，例如，如果我有 3 个按钮，例如：

```
button1_click()
some ajaxcalls

button2_click()
some other ajax calls

button3_click()
another calls 
```

所以管理员可以调用这个事件，但简单的用户只需要调用 button3
我需要什么样的方法？
- 我是否必须使用另一个 ajax 调用来控制每个按钮，例如：

```
button1_click()
    an ajax call (permission.aspx) read session,admin or not,return true or false
    if(true)    
    {
      someajaxcall()
    } 
```

-或者我必须根据会话隐藏或显示按钮？但我不知道我该怎么做。
**我正在使用 jqgrid asp.net 组件，以便网格具有自定义按钮，但该按钮没有 id，因此我无法从服务器端访问它，而且该按钮没有可见或禁用属性。**
我使用 asp.net 和 jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:18:41.640

通常我宁愿不显示人们不能使用的按钮，所以由于您在后端使用asp.net，您可以在检查用户权限后在创建页面时隐藏按钮，即：

```
 btnOne.Visible = UserIsAdministrator; //you need to define thisvariable based on your own rules. 
```

ETC

如果您仍然想显示它们，则可以改为 btnOne.Enabled = UserIsAdministrator，这将显示按钮，但酌情禁用它们；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:36:27.577

您可以`hiddenfield`在该页面上使用 a 来保存用户角色。然后在`DOM Ready()`函数内部遍历这些按钮以使它们启用/禁用。但是，您还应该在进行 ajax 调用后检查服务器端的角色，以防有人手动更改隐藏字段的值以启用按钮。

# ruby-on-rails - 多线程 rake 任务

> ID：12767878
> 
> 赞同：7
> 
> 时间：2012-10-07T10:12:01.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, rake-task

我正在编写一个 rake 任务，该任务每分钟（将来可能每 30 秒一次）被每当调用一次，它会联系一个轮询 API 端点（我们数据库中的每个用户）。显然，这作为单线程运行效率不高，但是可以多线程吗？如果没有，是否有一个很好的基于事件的 HTTP 库可以完成这项工作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-07T11:28:57.250

> 我正在编写一个 rake 任务，该任务将由每当

注意 Rails 的启动时间，最好使用 Resque 或 Sidekiq 等分叉模型，Rescue 提供[https://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)应该能够满足您的需要，我不能谈论 Sidekiq，但我确信它有类似的东西可用（Sidekiq 比 Resque 新得多）

> 显然，这作为单线程运行效率不高，但是可以多线程吗？如果没有，是否有一个很好的基于事件的 HTTP 库可以完成这项工作？

我建议您查看[ActiveRecord`find_each`](http://apidock.com/rails/ActiveRecord/Batches/ClassMethods/find_each)以获取有关使您的查找过程更高效的提示，一旦您有了批处理，您就可以使用线程轻松地做一些事情，例如：

```
#
# Find each returns 50 by default, you can pass options
# to optimize that for larger (or smaller) batch sizes
# depending on your available RAM
#
Users.find_each do |batch_of_users|
  #
  # Find each returns an Enumerable collection of users
  # in that batch, they'll be always smaller than or 
  # equal to the batch size chosen in `find_each`
  #
  #
  # We collect a bunch of new threads, one for each
  # user, eac 
  #
  batch_threads = batch_of_users.collect do |user|
    #
    # We pass the user to the thread, this is good
    # habit for shared variables, in this case
    # it doesn't make much difference
    #
    Thread.new(user) do |u|
      #
      # Do the API call here use `u` (not `user`)
      # to access the user instance
      #
      # We shouldn't need to use an evented HTTP library
      # Ruby threads will pass control when the IO happens
      # control will return to the thread sometime when
      # the scheduler decides, but 99% of the time
      # HTTP and network IO are the best thread optimized
      # thing you can do in Ruby.
      #
    end
  end
  #
  # Joining threads means waiting for them to finish
  # before moving onto the next batch.
  #
  batch_threads.map(&:join)
end 
```

这将启动不超过`batch_size`线程，等待每个线程`batch_size`完成。

可以做这样的事情，但是您将拥有无法控制的线程数量，您可能会从这里受益，它变得更加复杂，包括线程池和共享的工作列表，我已将其发布在 Github 上，以免向 stackoverflow 发送垃圾邮件： [https](https://gist.github.com/6767fbad1f0a66fa90ac) ://gist.github.com/6767fbad1f0a66fa90ac

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T11:20:08.507

我建议使用擅长多线程的[sidekiq](http://mperham.github.com/sidekiq/)。然后，您可以将每个用户的单独作业排入队列以轮询 API。[发条](https://github.com/adamwiggins/clockwork)可用于使您排队的工作重复出现。

# asp.net - 无法为 gridview FooterTemplate 中的下拉列表创建 SelectedIndexChanged 事件

> ID：12767884
> 
> 赞同：0
> 
> 时间：2012-10-07T10:13:04.317
> 
> 标签：asp.net, gridview

我有一个 gridview，其中包含页脚模板中产品描述的下拉列表。没有办法在 IDE 中创建 SelectedIndexChanged 并手动写出会产生错误？如何创建代码来处理选择更改？选择产品描述时，我需要填充产品 ID。

“已编辑”我尝试使用 gridview rowediting 事件，假设如果更改了行项目（即下拉列表中的新选择，它会触发，但不会触发）它似乎必须在该下拉列表时触发 gridview 事件列表更改，这就是我需要代码去的地方。关于什么事件的任何想法？

这是模板字段标记的内容：

```
<asp:TemplateField HeaderText="description" SortExpression="description">

            <FooterTemplate>
                <asp:DropDownList ID="ddlProductDesc" runat="server" DataSourceID="edsProductDesc" DataTextField="description"
                    OnSelectedIndexChanged="ddlProductDesc_SelectedIndexChanged">
                </asp:DropDownList>
                <%--<asp:TextBox ID="tbInsertdescriptiton" Width="350" runat="server"></asp:TextBox>--%>
            </FooterTemplate>
            <ItemTemplate>
                <asp:Label ID="lblProdDesc"  runat="server" Text='<%# Bind("description")%>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:20:16.667

看看这个：

[http://www.c-sharpcorner.com/blogs/7228/asp-net-gridview-dropdown-with-related-records-in-textbox.aspx](http://www.c-sharpcorner.com/blogs/7228/asp-net-gridview-dropdown-with-related-records-in-textbox.aspx)

# java - 在 Java 中使用 MANIFEST.MF 文件

> ID：12767886
> 
> 赞同：101
> 
> 时间：2012-10-07T10:13:10.033
> 
> 标签：java, manifest.mf

我注意到 JAR、WAR 和 EAR 文件`MANIFEST.MF`在该文件夹下有一个文件`META-INF`。

文件有什么用`MANIFEST.MF`？在这个文件中可以指定什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-07T10:20:27.853

使用 Java 开发工具包 1.0 版创建的 JAR 文件中的 Manifest 文件的内容如下。

```
Manifest-Version: 1.0 
```

所有条目都是名称-值对。标头的名称与它的值之间用冒号隔开。默认清单表明它符合清单规范的 1.0 版。清单还可以包含有关打包在存档中的其他文件的信息。清单中记录的确切文件信息将取决于 JAR 文件的预期用途。默认清单文件不假设它应该记录关于其他文件的哪些信息，因此它的单行只包含关于它自己的数据。专用清单标题

根据 JAR 文件的预期角色，可能必须修改默认清单。如果创建 JAR 文件只是为了存档，那么 MANIFEST.MF 文件就没有用处。JAR 文件的大多数用途超出了简单的归档和压缩范围，并且需要在清单文件中包含特殊信息。下面总结了一些特殊用途的 JAR 文件函数所需的头文件的简要说明

**捆绑为 JAR 文件的应用程序：**如果应用程序捆绑在 JAR 文件中，则需要告知 Java 虚拟机该应用程序的入口点是什么。入口点是任何具有公共静态 void main(String[] args) 方法的类。此信息在 Main-Class 标头中提供，该标头具有以下一般形式：

```
Main-Class: classname 
```

值 classname 将替换为应用程序的入口点。

**下载扩展：**下载扩展是其他 JAR 文件的清单文件引用的 JAR 文件。在典型情况下，applet 将捆绑在一个 JAR 文件中，该文件的清单引用一个 JAR 文件（或多个 JAR 文件），该文件将用作该 applet 的扩展。扩展可以以相同的方式相互引用。下载扩展在小程序、应用程序或其他扩展的清单文件的 Class-Path 标头字段中指定。Class-Path 标头可能如下所示，例如：

```
Class-Path: servlet.jar infobus.jar acme/beans.jar 
```

有了这个头文件，servlet.jar、infobus.jar 和 acme/beans.jar 文件中的类将作为 applet 或应用程序的扩展。Class-Path 标头中的 URL 是相对于小程序或应用程序的 JAR 文件的 URL 给出的。

**包密封：**可以选择密封 JAR 文件中的包，这意味着该包中定义的所有类都必须归档在同一个 JAR 文件中。包可能会被密封以确保软件中类之间的版本一致性或作为安全措施。要密封一个包，需要为包添加一个 Name 标头，然后是一个 Sealed 标头，类似于以下内容：

```
Name: myCompany/myPackage/
Sealed: true 
```

Name 标头的值是包的相对路径名。请注意，它以“/”结尾以与文件名区分开来。Name 标头之后的任何标头（没有任何中间空行）适用于 Name 标头中指定的文件或包。在上面的示例中，由于 Sealed 标头出现在 Name:myCompany/myPackage 标头之后，并且中间没有空行，因此 Sealed 标头将被解释为（仅）应用于包 myCompany/myPackage。

**包版本控制：**包版本控制规范定义了几个清单头来保存版本控制信息。可以将一组这样的标题分配给每个包。版本控制标头应直接显示在包的名称标头下方。此示例显示所有版本控制标头：

```
Name: java/util/
Specification-Title: "Java Utility Classes" 
Specification-Version: "1.2"
Specification-Vendor: "Sun Microsystems, Inc.".
Implementation-Title: "java.util" 
Implementation-Version: "build57"
Implementation-Vendor: "Sun Microsystems, Inc." 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-15T08:38:40.340

Manifest.MF 包含有关 JAR 文件中包含的文件的信息。

每当创建 JAR 文件时，都会在 META-INF 文件夹中创建默认 manifest.mf 文件，它包含如下默认条目：

```
Manifest-Version: 1.0
Created-By: 1.7.0_06 (Oracle Corporation) 
```

这些是“header:value”对的条目。第一个指定清单版本，第二个指定用于创建 JAR 文件的 JDK 版本。

**Main-Class 标头：** 当使用 JAR 文件将应用程序捆绑到包中时，我们需要指定服务于应用程序入口点的类。我们使用清单文件的“Main-Class”标头提供此信息，

主类：{完全限定的类名}

这里的“Main-Class”值是具有 main 方法的类。指定此条目后，我们可以执行 JAR 文件来运行应用程序。

**Class-Path 标头：** 大多数情况下，我们需要从应用程序 JAR 文件中打包的类访问其他 JAR 文件。这可以通过使用“Class-Path”标头在清单文件中提供它们的完全限定路径来完成，

类路径：{jar1-name jar2-name directory-name/jar3-name}

此标头可用于指定同一本地网络上的外部 JAR 文件，而不是当前 JAR 内。

**包版本相关的标头：** 当 JAR 文件用于包版本控制时，将使用 Java 语言规范指定的以下标头：

```
Headers in a manifest
Header                  | Definition
-------------------------------------------------------------------
Name                    | The name of the specification.
Specification-Title     | The title of the specification.
Specification-Version   | The version of the specification.
Specification-Vendor    | The vendor of the specification.
Implementation-Title    | The title of the implementation.
Implementation-Version  | The build number of the implementation.
Implementation-Vendor   | The vendor of the implementation. 
```

**封装封口相关封头：**

我们还可以指定是否应密封 JAR 文件中的任何特定包，这意味着该包中定义的所有类都必须归档在同一个 JAR 文件中。这可以在“密封”标题的帮助下指定，

名称：{package/some-package/} 密封：true

在这里，包名必须以“/”结尾。

**使用清单文件增强安全性：**

我们可以使用清单文件条目来确保 Web 应用程序的安全性，或者使用不同属性打包它的小程序，如“Permissions”、“Codebae”、“Application-Name”、“Trusted-Only”等等。

**META-INF 文件夹：**

此文件夹是清单文件所在的位置。此外，它可以包含更多包含有关应用程序的元数据的文件。例如，在 EJB 模块 JAR 文件中，此文件夹包含 EJB 模块的 EJB 部署描述符以及 JAR 的清单文件。此外，它还包含 xml 文件，该文件包含抽象 EJB 引用到将在其上运行的应用程序服务器的具体容器资源的映射。

参考：
[https ://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html](https://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

# iphone - UITableViewCell 模糊背景

> ID：12767889
> 
> 赞同：0
> 
> 时间：2012-10-07T10:13:26.290
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我希望我的表格视图具有模糊的白色背景。

您将在此视频中看到一些表格视图模糊（Siri 和 Twitter）的示例：

[http://www.youtube.com/watch?v=hsEUBLIJvmE&feature=player_embedded](http://www.youtube.com/watch?v=hsEUBLIJvmE&feature=player_embedded)

我试图使用这个问题的高斯模糊（这是第二个答案）：[iPhone：Blur UIImage](https://stackoverflow.com/questions/1356250/iphone-blur-uiimage)

但是当我将它应用到白色时，没有应用模糊......我需要自己在 Photoshop 上创建它吗？

谢谢！

# c - 忽略c中行中的第一个单词

> ID：12767892
> 
> 赞同：0
> 
> 时间：2012-10-07T10:13:47.203
> 
> 标签：c

我正在编写代码，需要一些帮助。

有一行需要从文件中读取。第一个单词必须被忽略，其余字符（包括空格）必须存储到变量中。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:30:01.363

如果您的单词前面没有空格并且您使用空格 (' ') 作为分隔符，这将起作用。

```
#include <stdio.h>
#include <string.h>

int main()
{
    char buffer[80];
    char storage[80];
    fgets(buffer, 80, stdin); // enter: »hello nice world!\n«
    char *rest = strchr(buffer, ' '); // rest becomes » nice world!\n«

    printf("rest:   »%s«\n", rest); // » nice world!\n«
    printf("buffer: »%s«\n", buffer); // »hello nice world!\n«

    strncpy( storage, rest, 80 ); // storage contains now » nice world!\n«
    printf("storage: »%s«\n", storage); // » nice world!\n«

    // if you'd like the separating character after the "word" to be any white space
    char *rest2 = buffer;
    rest2 += strcspn( buffer, " \t\r\n" ); // rest2 points now too to » nice world!\n«
    printf("rest2:  »%s«\n", rest2); // » nice world!\n«

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:36:11.533

一些例子。阅读程序中的注释以了解效果。这将假定单词由空白字符（由 定义`isspace()`）分隔。根据您对“单词”的定义，解决方案可能会有所不同。

```
#include <stdio.h>

int main() {
    char rest[1000];
    // Remove first word and consume all space (ASCII = 32) characters
    // after the first word
    // This will work well even when the line contains only 1 word.
    // rest[] contains only characters from the same line as the first word.
    scanf("%*s%*[ ]");
    fgets(rest, sizeof(rest), stdin);
    printf("%s", rest);

    // Remove first word and remove all whitespace characters as
    // defined by isspace()
    // The content of rest will be read from next line if the current line
    // only has one word.
    scanf("%*s ");
    fgets(rest, sizeof(rest), stdin);
    printf("%s", rest);

    // Remove first word and leave spaces after the word intact.
    scanf("%*s");
    fgets(rest, sizeof(rest), stdin);
    printf("%s", rest);

    return 0;
} 
```

# java - Java/Android 中 NetBIOS/FQDN 名称的 IP 地址

> ID：12767893
> 
> 赞同：2
> 
> 时间：2012-10-07T10:13:48.850
> 
> 标签：java, android, hostname, fqdn, netbios

鉴于我的 Android 设备在同一网络上的计算机的 IP 地址，我必须找到它的 NetBIOS/FQDN 名称......有没有任何“干净”的解决方案可以用 Android SDK 完成这个并且一般来说在 java 中？

显然 InetAddress.get*HostName 不返回 NetBIOS 名称:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:41:38.743

您可以使用[JCIFS](https://jcifs.samba.org/src/docs/api/index.html?jcifs/netbios/NbtAddress.html)开源库。

```
 InetAddress addr = NbtAddress.getByName( "hostname" ).getInetAddress(); 
```

双向工作，IP 地址到主机名，反之亦然。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-29T19:02:07.700

实际上，汤姆提供的代码不起作用，这段代码对我有用（使用 JCIFS lib。）

```
NbtAddress[] nbts = NbtAddress.getAllByAddress("IP ADDRESS AS STRING");
String netbiosname = nbts[0].getHostName(); 
```

如果成功，则将 NetBios 设备名称作为字符串返回；如果目标不存在或没有 NetBios 名称，则抛出 UnknownHostException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:15:36.997

试试这个...

```
import java.util.Hashtable;
import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;
import javax.naming.ldap.InitialLdapContext;
import javax.naming.ldap.LdapContext;

public class SearchNetBIOSName {

    public static void main(String[] args) {
        try {
            Hashtable<String, String> env = new Hashtable<String, String>();
            env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
            env.put(Context.PROVIDER_URL, "ldap://my.domain.com:389");
            env.put(Context.SECURITY_AUTHENTICATION, "simple");
            env.put(Context.SECURITY_PRINCIPAL, "cn=administrator,cn=users,dc=my,dc=domain,dc=com");
            env.put(Context.SECURITY_CREDENTIALS, "********");
            LdapContext context = new InitialLdapContext(env, null);
            String searchBase = "cn=Partitions,cn=Configuration,dc=my,dc=domain,dc=com";
            String searchFilter = "(&(objectcategory=Crossref)(netbiosname=*))";
            SearchControls controls = new SearchControls();
            controls.setSearchScope(SearchControls.ONELEVEL_SCOPE);
            NamingEnumeration answers = context.search(searchBase, searchFilter, controls);
            while (answers.hasMore()) {
                SearchResult rs = (SearchResult) answers.next();
                String netBiosName = rs.getAttributes().get("NetBIOSName").get(0).toString();
                System.out.println(netBiosName);
            }
            context.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

# php - PHP SQL“保护”字符串

> ID：12767896
> 
> 赞同：-2
> 
> 时间：2012-10-07T10:14:16.907
> 
> 标签：php, sql

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我制作了一个 PHP 脚本来提取 xml 值并将它们插入到 SQL DB 中。

然而，这些字符串有各种符号、反斜杠、%、*、'等。通常我最终会出错。

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL        server version for the right syntax to use near 's demanding business environment. 
Product Lin' at line 2 
```

我已经尝试了一些类似“stripslashes”等的东西。但我似乎无法找到“保护”变量以干扰我的 SQL 的命令。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:16:16.797

如果您使用的是 PHP mysql 模块，那么

```
 $escaped_string = mysql_real_escape_string($your_variable); 
```

应该做的伎俩。

参考：[http ://www.php.net/manual/en/function.mysql-real-escape-string.php](http://www.php.net/manual/en/function.mysql-real-escape-string.php)

（如果您使用 PDO 或 MySQLi，相关链接也在那里）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T10:16:55.797

如果您使用的是旧`mysql_query()`系统，则应`mysql_real_escape_string()`在将字符串插入 SQL 之前使用以转义字符串。像这样 ：

```
$myStringEscaped = mysql_real_escape_string($myString); 
```

# c - 如何在c中传递Union数组

> ID：12767897
> 
> 赞同：0
> 
> 时间：2012-10-07T10:14:16.590
> 
> 标签：c

我有以下数据类型声明。

```
 typedef struct{
            int aa;
    }A;

    typedef struct{
        int bb;
    }B;

    typedef struct{

        union {
                A a;
                B b;
        }*D;

        int other;
    }myType;

    //Now I want to pass the array "D" and the variable "other" to a function 
    // that will use them to construct "myType"
    // How can I pass D as parameter? what whill be its type?

    //I want to have a function like the following with "?" filled. 

        callFunction(? d, int other){
            //construct "myType"
            myType typ;
            typ.D     = d;
            typ.other = other; 
        } 
```

我试图在**“mytype”结构**之外声明**联合**，然后使用**D* d;** 在这种情况下，在**“mytype”结构** 中我遇到了这个错误

 ******错误：“D”之前的预期说明符限定符列表</p>

代码如下： //上面声明了struct A和B

```
 union {
            A a;
            B b;
    }D;

    typedef struct{            
            D* d;            
            int other;
    }myType; 
```

任何帮助将是可观的，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:22:34.923

```
typedef union {
   A a;
   B b;
} D;

typedef struct{
   D d;
   int other;
}myType;

callFunction(D *d, int other) 
```

或者

```
union D {
   A a;
   B b;
};

typedef struct{
   union D d;
   int other;
}myType;

callFunction(union D *d, int other) 
```

两者的主体`callFunction`是相同的：

```
{
            //construct "myType"
            myType typ;
            typ.D     = *d;
            typ.other = other; 
} 
```******

# c# - 在运行时从 iOS 上的本机方法创建委托

> ID：12767903
> 
> 赞同：3
> 
> 时间：2012-10-07T10:15:29.330
> 
> 标签：c#, xamarin.ios

这是一个**特定于 MonoTouch 的**问题。

我目前正在为 OpenGL 开发一个包装器，它与 OpenTK 等包装器完全不同。该包装器用于加快 OpenGL 开发速度。

方法不是这样声明的：`void glGenTextures(Int32 n, UInt32[] textures);`，它们被声明为`void glGenTextures(Int32 count, [Out]TextureHandle[] textures)`where `TextureHandle`is a structure，其大小与 a 相同`UInt32`。

## 问题

在 Windows 上，我可以使用`GetProcAddress`,`wglGetProcAddress`并`Marshal.GetDelegateForFunctionPointer`从方法指针创建委托，但如何在 iOS 上使用 MonoTouch 来执行此操作。有什么办法吗，还是monotouch还不支持？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T10:00:22.457

[从 MonoTouch 5.4 开始，](http://docs.xamarin.com/ios/releases/MonoTouch_5/MonoTouch_5.4#Support_for_creating_Managed_Delegates_from_C_Function_Pointers)这是可能的。您需要创建一个与托管方法具有相同签名的委托，并用`MonoNativeFunctionWrapper`属性装饰它：

```
[MonoNativeFunctionWrapper]
public delegate void glGenTexturesDelegate (int n, uint[] textures); 
```

现在您可以调用该方法：

```
var del = (glGenTexturesDelegate) Marshal.GetDelegateForFunctionPointer (pointer);
del (n, textures); 
```

也就是说，我相信你做的比你需要的要复杂得多。只需使用 P/Invoke：

```
[llImport("libGLESv2.dll")]
extern static void glGenTextures (int n, uint[] textures); 
```

然后这样称呼它：

```
glGenTextures (n, textures); 
```

# java - 在 linux 脚本中运行远程 java 服务器

> ID：12767905
> 
> 赞同：1
> 
> 时间：2012-10-07T10:15:52.830
> 
> 标签：java, linux, ssh

我有一个用 Java 实现的名为 Provider 的服务器，以及启动它的 linux 脚本。

```
#!/bin/bash
echo "Provider"
$JAVA_HOME/bin/java -cp /tmp  Provider&
$JAVA_HOME/bin/java -version
rm  /tmp/pid
echo "$!"> /tmp/pid
echo "Provider-finish"
exit 0 
```

当我想在不同的机器（machine2）上执行以下脚本时

```
root@machine1:/tmp# ssh  machine2/tmp/runScript.sh
Provider
java version "1.6.0_29"
Java(TM) SE Runtime Environment (build 1.6.0_29-b11)
Java HotSpot(TM) Client VM (build 20.4-b02, mixed mode, sharing)
Provider-finish
Waiting for connection 
```

问题是，运行上面的脚本后，它没有返回控制台，虽然 Provider 启动了，但它挂断了。

我已经分析了类似的概念，例如 Glassfish 域开始。通过执行

```
ssh machine2 asadmin start-domain 
```

它返回控制台没有任何问题，所以我可以获得执行状态“$？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:21:01.383

我认为问题在于远程`sshd`不会关闭 ssh 会话，因为后台仍有一个 java 进程在运行，*可能会*尝试写入输出。

尝试将后台进程stdout和stderr重定向到“/dev/null”；例如

```
$JAVA_HOME/bin/java -cp /tmp Provider > /dev/null 2>&1 & 
```

# css - 如何选择最后一个 在未知的多层次

> ID：12767906
> 
> 赞同：2
> 
> 时间：2012-10-07T10:16:10.100
> 
> 标签：css, css-selectors

`<li>`是否有可能在每个多级列表中只选择一个最后一个？

```
<ul class="root">
    <li>no</li>            
    <li>no</li>            
    <li>yes</li>
</ul>

<ul class="root">
    <li>no</li>            
    <li>no</li>            
    <li>
        <ul>
            <li>no</li>            
            <li>yes</li>
        </ul>
    </li>
</ul> 
```

​ jsfiddle 上的免费游乐场：http: [//jsfiddle.net/dizzyn/KMY3U/](http://jsfiddle.net/dizzyn/KMY3U/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:20:11.047

是的，你可以，使用`:last-child`CSS 选择器..

[**我的小提琴**](http://jsfiddle.net/TkTUq/3/)

CSS

```
ul li:last-child {
    color: #ff0000;
}​

li {
    color: #000000;
}​ 
```

你也可以使用这个：

CSS

```
ul li:nth-last-child(1) {
   color: #ff0000;
}

li {
   color: #000000;
}​ 
```

`:last-child`选择器选择作为其父元素的最后一个子元素的每个元素。

注意：这是一个 CSS3 实现，所以一些浏览器会忽略这一点，但不会破坏任何东西，因为你只是在改变颜色..

# php - 需要帮助更改文件上传成功的代码，并取消文件上传

> ID：12767913
> 
> 赞同：3
> 
> 时间：2012-10-07T10:17:23.647
> 
> 标签：php, jquery, mysql, ajax, pdo

尝试取消上传时，我的取消按钮出现问题，我需要一些帮助来可能会稍微改变我的代码设计。

**问题：**

在“audioupload.php”脚本运行之前，“canceaudio.php”页面没有它需要的信息。这是一个马车和马的情况。如果客户端在 HTTP 请求期间单击取消按钮，“audioupload.php”脚本（在服务器端）永远不会被执行。然而，jQuery 中的客户端活动仍然会运行。

**我想要实现的解决方案：**

客户端填写表单并提交，生成一个 POST 请求，并附上文件。POST 请求可能需要几秒钟才能完成，具体取决于文件大小、连接速度等。

只有在所有文件的 HTTP 上传完成后，PHP 才能获得控制权。服务器上的 PHP“动作”脚本通过 POST 方法请求获得控制。如果在上传过程中发生任何错误，$_FILES['error'] 将加载正确的代码。此时您可以检查 $_FILES 中的值、move_uploaded_file()、将文件名加载到 $_SESSION 数组等。

综上所述，如果人类客户端在 POST 请求正在进行时（或在开始上传之前）单击“取消按钮”，这会导致文件上传被取消，则处理上传的 PHP“动作”脚本永远不会得到控制。服务器永远没有机会移动上传的文件并将变量加载到数据库或会话数组中。

我只需要帮助对问题进行编码即可找到解决方案。有人可以帮忙吗？以下是必要的代码：

音频上传.PHP

```
<?php
ini_set('display_errors',1); 
error_reporting(E_ALL);
// connect to the database
include('connect.php');

/* check connection */
if (mysqli_connect_errno()) {
printf("Connect failed: %s\n", mysqli_connect_error());
die();
}

$result = 0;

if( file_exists("AudioFiles/".$_FILES['fileAudio']['name'])) {
$parts = explode(".",$_FILES['fileAudio']['name']);
$ext = array_pop($parts);
$base = implode(".",$parts);
$n = 2;

while( file_exists("AudioFiles/".$base."_".$n.".".$ext)) $n++;
$_FILES['fileAudio']['name'] = $base."_".$n.".".$ext;

move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
"AudioFiles/" . $_FILES["fileAudio"]["name"]);
$result = 1;

}
else
{
move_uploaded_file($_FILES["fileAudio"]["tmp_name"],
"AudioFiles/" . $_FILES["fileAudio"]["name"]);
$result = 1;
}

$audiosql = "INSERT INTO Audio (AudioFile) 
VALUES (?)";

if (!$insert = $mysqli->prepare($audiosql)) {
// Handle errors with prepare operation here
}

//Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$aud);

//Assign the variable
$aud = 'AudioFiles/'.$_FILES['fileAudio']['name'];

$insert->execute();

if ($insert->errno) {
// Handle query error here
}

$insert->close();

$lastAudioID = $mysqli->insert_id;   

$_SESSION['lastAudioID'] = $lastAudioID; 
$_SESSION['AudioFile'] = $_FILES["fileAudio"]["name"]; 

$audioquestionsql = "INSERT INTO Audio_Question (AudioId, QuestionId)  
VALUES (?, ?)"; 

if (!$insertaudioquestion = $mysqli->prepare($audioquestionsql)) { 
// Handle errors with prepare operation here 
echo "Prepare statement err audioquestion"; 
} 

$qnum = (int)$_POST['numaudio'];

$insertaudioquestion->bind_param("ii",$lastAudioID, $qnum); 

$insertaudioquestion->execute(); 

if ($insertaudioquestion->errno) { 
// Handle query error here 
} 

$insertaudioquestion->close(); 

?> 
```

取消音频.PHP

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

  unlink("AudioFiles/" . $_SESSION['AudioFile']);  

$delete = $mysqli->prepare('DELETE FROM Audio WHERE AudioId = ?'); 
$delete->bind_param("i",$_SESSION['lastAudioID']); 
$delete->execute(); 

$deleteaud = $mysqli->prepare('DELETE FROM Audio_Question WHERE AudioId = ?'); 
$deleteaud->bind_param("i",$_SESSION['lastAudioID']); 
$deleteaud->execute(); 

?> 
```

HTML 表单代码：

```
<form action='audioupload.php' method='post' enctype='multipart/form-data' target='upload_target_audio' onsubmit='return audioClickHandler(this);' class='audiouploadform' > 

Audio File: <input name='fileAudio' type='file' class='fileAudio' /></label><br/><br/><label class='audiolbl'> 

<input type='submit' name='submitAudioBtn' class='sbtnaudio' value='Upload' /></label>

<input type='hidden' class='numaudio' name='numaudio' value='" + GetFormAudioCount() + "' />

<input type='reset' name='audioCancel' class='audioCancel' value='Cancel' /></label>

<iframe class='upload_target_audio' name='upload_target_audio' src='#' style='width:300px;height:300px;border:0px;solid;#fff;'></iframe></form> 
```

查询代码：

```
function startAudioUpload(audiouploadform){
  $(audiouploadform).find('.audiof1_upload_process').css('visibility','visible');
  $(audiouploadform).find('.audiof1_cancel').css('visibility','visible');
  $(audiouploadform).find('.audiof1_upload_form').css('visibility','hidden');
  sourceAudioForm = audiouploadform;

          $(audiouploadform).find(".audioCancel").on("click", function(event) {
              $('.upload_target_audio').get(0).contentwindow
              $("iframe[name='upload_target_audio']").attr("src", "cancelaudio.php");
          return stopAudioUpload(2);
    });

      return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:48:18.267

首先，您可以尝试访问有关会话上传进度的链接，这应该向您展示如何在不终止会话的情况下停止上传进度:)

[PHP：会话上传进度](http://php.net/manual/en/session.upload-progress.php)

您可以尝试终止 MySQL 连接然后重新打开它，我认为这是停止连接的一种方法...我假设您将代码与取消按钮结合使用（例如 onclick->blah blah coding blah）您可以取消连接，然后在连接终止后将其返回吗？

这是一个链接-> [PHP：MySQL_close](http://php.net/manual/en/function.mysql-close.php/)

在此之后只需编写一行简单的代码即可开始运行操作脚本（指向您需要运行的函数），这应该允许您继续运行脚本并且不会丢失您需要的会话。

附言。我不完全确定这会奏效......只是逻辑思考：P......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:15:15.127

用 jquery 试试这个：

```
$(".audioCancel").live("click", function(){
      var file = $(".fileAudio").val();
      var canc = "Cancel";
     $.post("CANCELAUDIO.PHP", {file:file,canc:canc}, function(result){
         alert(result);
         window.location.reload();     
     });

}); 
```

然后在你的 php 中添加这个：

```
$file = $_POST["file"];
$canc = $_POST["canc"];
if($canc){
    unlink("AudioFiles/" . $canc);  
}else{
    unlink("AudioFiles/" . $_SESSION['AudioFile']);  
} 
```

也试试这个：

启用 session.upload_progress.enabled INI 选项后，PHP 将能够跟踪正在上传的单个文件的上传进度。此信息对于实际的上传请求本身并不是特别有用，但在文件上传期间，应用程序可以将 POST 请求发送到单独的端点（例如通过 XHR）以检查状态。

当上传正在进行时，上传进度将在 $_SESSION 超全局中可用，并且在 POST 与 session.upload_progress.name INI 设置设置为相同名称的变量时。当 PHP 检测到此类 POST 请求时，它将在 $_SESSION 中填充一个数组，其中索引是 session.upload_progress.prefix 和 session.upload_progress.name INI 选项的连接值。通常通过读取这些 INI 设置来检索密钥，即

```
<?php
$key = ini_get("session.upload_progress.prefix") . $_POST[ini_get("session.upload_progress.name")];
var_dump($_SESSION[$key]);
?> 
```

也可以通过将 $_SESSION[$key]["cancel_upload"] 键设置为 TRUE 来取消当前正在进行的文件上传。当在同一个请求中上传多个文件时，这只会取消当前正在进行的文件上传和待处理的文件上传，但不会删除成功完成的上传。当像这样取消上传时，$_FILES 数组中的错误键将设置为 UPLOAD_ERR_EXTENSION。

[http://php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:25:16.370

好的，我会根据我的理解尝试一些东西。

用户使用表单提交文件。这可能需要一些时间，因此当用户单击“取消”时，可能有两种情况：

1.  表单（及其数据，即文件内容）仍在由浏览器发送，尚未完成上传。在这种情况下，您所要做的就是**取消**表单提交。请求浏览器停止它。这样，`audioupload.php`将永远不会执行，并且您不需要通过调用来删除它`cancelaudio.php`。

2.  当浏览器完成文件上传/表单提交时，服务器仍在处理数据并且尚未响应您的短暂时间范围内。在这种情况下，上传的文件可能会或可能不会保存（我们不知道）。您需要调用您的`cancelaudio.php`页面以将其从硬盘中删除。

两种情况中只有一种是正确的，但您可以同时执行这两种操作，因为不会与另一种发生冲突。

第一种情况的答案在这里（因为您使用的`<iframe>`是提交表单）：[是否可以取消使用隐藏 iframe 的文件上传？](https://stackoverflow.com/questions/5280855/is-it-possible-to-cancel-file-upload-that-uses-hidden-iframe)

第二种情况的答案是始终对 进行 Ajax 调用`cancelaudio.php`，以防文件已被处理和保存但我们没有收到通知（好吧，时间框架很短，但它仍然可能发生）。

# mysql - MYSQL算不算数？

> ID：12767914
> 
> 赞同：4
> 
> 时间：2012-10-07T10:17:44.120
> 
> 标签：mysql, sql, aggregation

我有一个 mysql 表，如：

```
id, visitorid, pageid 
```

当访问者访问网站时，它将访问者 ID 和页面 ID 存储为一行。

我正在尝试提取准确访问该网站 X 次的访问者数量。（用于图表）。所以有多少人只访问一页，有多少人访问两页......

到目前为止，我有：

```
SELECT COUNT(visid),visid FROM vislog GROUP BY visid ORDER BY COUNT(visid) DESC 
```

但我不知道如何进行计数计数的下一部分。

是否可以作为 MySQL 查询？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-07T10:32:05.427

您可以将查询包装在另一个查询中：

```
SELECT
    cnt      AS page_visits
  , COUNT(*) AS number_of_visitors
FROM
    ( SELECT 
          COUNT(*) AS cnt                --- use: COUNT(DISTINCT page_id)
                                         --- for a different count
      FROM vislog 
      GROUP BY visid
   ) AS grp
GROUP BY cnt 
ORDER BY number_of_visitors ; 
```

或（我认为这对于将数字传递给图表更有意义），删除`ORDER BY`与放置相同的：

```
ORDER BY cnt ; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-07T10:20:41.170

一种方法是将此查询包装到另一个查询中：

```
SELECT COUNT(visid) FROM (
    SELECT COUNT(visid) AS cvisid, visid 
      FROM vislog 
  GROUP BY visid 
  HAVING cvisid = 2) AS c 
```

但我认为您需要获取访问的直方图：这可以使用 PHP 完成（假设查询与问题中的相同）：

```
$results = array();
// query preparation skipped, as it's obviously done by the OP himself
while ($row = $sth->fetch()) {
  $count = $row['cvisid'];
  if (isset($results[$count])) {
    $results[$count]++;
  }
  else {
    $results[$count] = 1;
  }
} 
```

或者使用 MySQL 本身：

```
SELECT cvisid, 
       COUNT(cvisid) AS cnt 
  FROM (
    SELECT visid,
           COUNT(visid) AS cvisid 
      FROM vislog 
  GROUP BY visid ) AS c
GROUP BY cvisid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:26:02.750

尝试使用以下查询

```
SELECT COUNT(a.page_visits) AS no_of_visitors, a.page_visits AS page_count
FROM(
SELECT COUNT(DISTINCT pageid) AS page_visits
FROM vislog
GROUP BY visid) AS a
GROUP BY a.page_visits; 
```

希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T14:04:19.997

Raina77ow（第二个回复）在他的第三个代码块中返回了一个干净的解决方案

```
 SELECT cvisid, 
           COUNT(cvisid) AS cnt 
      FROM (
        SELECT visid,
               COUNT(visid) AS cvisid 
          FROM vislog 
      GROUP BY visid ) AS c
    GROUP BY cvisid 
```

谢谢你

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-10-07T10:44:10.997

我可以这样解决：

```
SELECT cnt, COUNT(cnt) FROM (
    SELECT COUNT(visid) as cnt FROM vislog GROUP BY visid
) x GROUP BY cnt ORDER BY cnt ASC 
```

小事`x`很重要。

# android - 在 Android 应用程序中处理地图的大（形状）数据的最佳方法

> ID：12767915
> 
> 赞同：0
> 
> 时间：2012-10-07T10:18:04.423
> 
> 标签：android, google-maps, google-fusion-tables, openstreetmap, shapefile

我正在为一个 Android 应用程序构建原型，该应用程序应该生成一个多功能地图，该地图可以处理大量但静态的环境数据以及将托管在单独平台上的（用户生成的）数据。我目前的方法是通过 Google Fusion Tables 获取大型静态数据（在原始形状文件中 - .shp、.dbf、.shx，我已使用 QGisMaps 作为 .kml 导出 - 我正在使用的“较小”.kml 是已经 66.4MB，最终使用超过 140 MB...）我知道可以削减 .kml 但这会影响加载时间吗？[您可以在此处https://www.google.com/fusiontables/DataSource?snapid=S717313eWaJ](https://www.google.com/fusiontables/DataSource?snapid=S717313eWaJ)查看 Google 地图上形状数据的当前示例

但现在我想知道我是否走在正确的道路上，因为这一层数据在我的机器上加载非常缓慢，而且我不知道将这张地图放入 Android 应用程序的麻烦 - 更重要的是还获取更多来自单独服务器的数据，并将其作为另一个（可过滤的）层放在它上面。该图层将从用户那里收集数据，因此不是“静态的”，而是定期更新 - 每个地理数据以颜色显示的整数值。

有几个人暗示我要使用 Open Street Maps，但有些人建议 Android 与 Google Maps 配合得非常好——在开发过程中，我想也许有人可以告诉我，我是否选择了正确的方向，或者最有可能面临更少的问题替代解决方案。

如果有人能就将来自两个不同来源的地图数据组合到 Android 中的一张地图上的问题向我提出建议，我将非常高兴，而一堆数据很大但静态，而其他用户生成的值。

非常感谢您的时间和查看这个

最好的比尔吉特

编辑#1：我现在切换到开放街道地图，希望能够自己设置一个地理服务器来托管数据并使用应用程序查询 WMS。看起来数据的大小仍然需要以某种方式压缩，我会及时更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:24:43.243

我无法解决您的所有问题，但我可以分享一些我在地图和覆盖上的经验。

您必须了解的最重要的概念是`memory heap`. 每个 android 应用程序都有一个可用于分配数据对象的最大内存量，称为`memory heap`. 此限制因设备而异，可以从小型旧设备中的 16MB 到新平板电脑中的 64MB。

话虽如此，如果保存数据所需的数据结构超过了应用程序可用的最大堆，您将永远无法一次性加载所有数据。

此外，当关键活动（如电话呼叫）需要额外内存时，使用大量内存使您的应用程序更适合被用户或 SO 终止。

**现在，进入地图部分......**

我使用 Google 地图和 mapsforge api 来制作 OpenStreet 地图。谷歌地图需要互联网连接，而 mapsforge 允许您使用本地地图文件或在线连接。OpenStree 地图不提供卫星视图。

关于性能，在线连接往往更快，因为他们下载已经渲染的地图图像，而离线地图需要根据需要渲染图像。Mapforges 可以使用本地缓存来稍微改善这一点。

**显示叠加层：**

我已经使用这两个 API 来显示地图上大约 10.000 个点的路径，以及额外的叠加层（指南针、比例尺、弹出窗口等），并且代码在中端设备中运行顺畅。但是，我的代码进行了一些优化，通过转换已经存在的路径来减少路径的重新创建（当用户缩放或移动地图时）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:30:33.927

所以这就是我最终将 .shp 文件转换为 OSMdroid 的 XYTilesource 可以显示的格式的方式。

我将图层单独导出为 .kml 投影 WGS84，并将它们作为图层导入 TileMill。在 CSS 中为每个图层设置颜色后，我将地图导出为一组 MBTiles。我将它们上传到 Mapbox.com。从那里我可以在我的 OSMdroid Mapview 中获取格式为 a.tiles.mapbox.com/v3/myUsername.myTiles/{z}/{x}/{y}.png 的图块。

```
final myTileSource tileSource = new XYTileSource("myTiles", null, 10, 16, 256, ".png", "http://a.tiles.mapbox.com/v3/myUserName.myTiles/"); 
```

# opengl - 如果未生成 MIP 贴图，是否将 GL_NEAREST_MIPMAP_* 或 GL_LINEAR_MIPMAP_* 用于 GL_TEXTURE_MIN_FILTER 被认为是错误的？

> ID：12767917
> 
> 赞同：1
> 
> 时间：2012-10-07T10:18:18.170
> 
> 标签：opengl, opengl-es, opengl-es-2.0

我有一种感觉，这是依赖于驱动程序实现的情况之一，因为 OpenGL 规范中没有描述这种情况。但是，我希望有人知道使用 GL_(LINEAR/NEAREST)_ MIPMAP_* 而不生成 MIP 地图是否会被视为与使用 GL_(LINEAR/NEAREST) 相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:25:15.813

定义“没有任何活动的 MIP 纹理”？我不确定你会怎么做，因为没有“mip 纹理”之类的东西（纹理*包含*mipmap，但 mipmap 不是纹理）。

如果您的意思是您没有创建完整的 mipmap 金字塔，那么这取决于您如何设置`GL_TEXTURE_BASE/MAX_LEVEL`s. 如果你正确地使用这些来告诉 OpenGL 你只有一个 mipmap 级别，那么你会没事的。如果您曾经[`glTexStorage`](http://www.opengl.org/wiki/GLAPI/glTexStorage2D)创建纹理的存储，并且只告诉它创建一个 mipmap，那么您会没事的。

但是如果这些都不适用，那么 OpenGL 会默认使用最不有用的东西（根据它通常的白痴）：它将`GL_TEXTURE_MAX_LEVEL`级别设置为 1000。这意味着它会期望您已经定义了 mipmap。

根据（桌面）OpenGL，带有 mipmap 过滤的纹理，其中`BASE/MAX_LEVEL`s 指的是未定义的 mipmap，这不是“纹理完整”。OpenGL 定义了针对非完整纹理的纹理访问所获得的值是 (0, 0, 0, 1)。

简而言之，`BASE/MAX_LEVEL`正确设置您的设备，您就不必担心。***总是这样做。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T11:14:53.103

根据我的经验，所有未生成的 mipmap 级别都将默认为黑色。

因此，如果您有一个以 1:1 分辨率显示的纹理，并逐渐缩小，则一旦使用第一个 mipmap，它就会淡出为黑色。

我认为这至少是 NVIDIA 和 AMD 的行为；我从来没有尝试过powervr（因为你提到了opengl-es）。

# c++ - 我将如何实现 FCFS 处理器调度模拟器？

> ID：12767924
> 
> 赞同：0
> 
> 时间：2012-10-07T10:19:31.273
> 
> 标签：c++, algorithm, vector, struct, scheduling

我有一个结构向量，结构看起来像这样：

```
struct myData{
    int ID;
    int arrivalTime;
    int burstTime;
}; 
```

用这些数据填充我的向量后：

```
1 5 16
4 7 12
3 12 4
2 7 8 
```

其中每一行是单个结构的 ID（任意，不表示到达顺序）、到达时间和突发时间，我将如何使用“for”或“while”循环来逐步遍历我的向量的索引并以某种方式计算数据我可以打印出这样的东西吗？

```
Time 0  Processor is Idle
Time 5 Process 1 starts running
Time 21 Process 2 is running
Time 29 Process 4 is running
Time 41 Process 3 is running 
```

我认为我可以做到的方式是让一个整数跟踪当前时间（当前时间是已经运行的进程的突发时间的总和），但我似乎无法找出一个算法考虑空闲时间（当处理器没有做任何事情并且新任务尚未到达时）以及跟踪其他数字。为简单起见，我只是决定当两个进程同时到达时，我将处理 ID 号较低的那个。我知道我没有在这里放太多代码来演示我正在尝试做的事情，但我希望我已经相当清楚地解释了它。我正在寻找这个问题的伪代码算法解决方案，但我不会拒绝已经编码的东西（在 C++ 中？）。

作为附加说明，如果我无法清楚地传达我如何访问我的数据，则：

```
cout << structVector[0].ID << "\n";
cout << structVector[0].arrivalTime << "\n";
cout << structVector[0].burstTime << "\n"; 
```

会打印出来

```
1
5
16 
```

任何对伪代码或实际代码的帮助将不胜感激！！！多次阅读这篇文章后，我意识到我对这个问题非常笼统，但我希望能得到一些帮助，只是了解如何计算这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:47:54.927

首先，根据到达时间对向量进行排序。然后以下代码将完成您正在寻找的内容。

```
int i = 0, time = 0;

while (i < vec.size())
{
if (vec[i]. arrivalTime > time)
cout << "Time " << time << "process is idle";

time += vec[i].arrivalTime;
cout << "Time " << time << " Process " << vec[i].ID << " is running" << endl;

time += vec[i].burstTime;

i++;
} 
```

# php - ftp_connect 使用 PHP

> ID：12767931
> 
> 赞同：0
> 
> 时间：2012-10-07T10:20:33.217
> 
> 标签：php, ftp

我需要从 ftp 位置选择一个 .xml 文件内容。

```
$source = "TEST.xml";

$target = fopen("TEST2.xml", "w"); 
```

我的 ftp ip 是 170.201.226.120

我试过这些

1.  `$conn = ftp_connect(ftp."170.201.226.120") or die("Could not connect");`

2.  `$loc="170.201.226.120";`

    `$conn = ftp_connect(ftp.$loc) or die("Could not connect");`

3.  `$server=gethostbyaddr("170.201.226.120");`

    `$conn = ftp_connect(ftp.$server) or die("Could not connect");`

但所有这些都显示错误或无法连接。

我需要执行上面的这些步骤，

```
ftp_login($conn,"username","password");
ftp_fget($conn,$target,$source,FTP_ASCII); 
```

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T10:25:53.553

只是通过主机。不要试图将它附加到`ftp`常量上，不管它是什么。

```
$conn = ftp_connect("170.201.226.120") or die("Could not connect"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T10:25:59.677

删除这个词：

“ftp。” 你到处添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T10:26:48.273

你的尝试太复杂了 :-) 想得更简单！

ftp 例程的 php 手册清楚地说明了 ftp_connect 命令的语法：

```
resource ftp_connect ( string $host [, int $port = 21 [, int $timeout = 90 ]] ) 
```

所以简单地试试这个：

```
$conn = ftp_connect("170.201.226.120") or die("Could not connect"); 
```

这就是全部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T10:29:55.457

```
// Set up a connection 
$conn = ftp_connect("170.201.226.120"); 

// Now Login 
if (ftp_login($conn, $username, $password))
  echo "Success";
  ftp_fget($conn,$target,$source,FTP_ASCII);
else
  echo "Could not Connect"; 
```

如果您仍然收到错误，请检查您的 FTP 端口号并将第一行修改为：

```
$conn = ftp_connect("170.201.226.120", $port_number); 
```

# phpmyadmin - 我无法访问 wampserver 上的 phpmyadmin

> ID：12767933
> 
> 赞同：2
> 
> 时间：2012-10-07T10:20:43.283
> 
> 标签：phpmyadmin, wampserver

关于 wamp 服务器的问题。我刚刚将它安装在我的计算机上，当我想使用 phpmyadmin 时，我收到以下消息：

```
#1045 - Access denied for user 'root'@'localhost' (using password: NO) 
```

我试图更改 config.inc 中的密码，但没有成功。

我试图重新安装 wampserver 但没有任何效果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:26:22.003

在 config.default.php 中更改以下数据库配置值：

```
 $cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = '3306';
$cfg['Servers'][$i]['ssl'] = false;
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysql';
$cfg['Servers'][$i]['compress'] = false;
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'YOUR_Password'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T11:40:41.617

Did you check `config.inc.php`? There must be a row like `$cfg['Servers'][$i]['AllowNoPassword'] = true;`

`config.inc.php` is in `./wamp/apps/phpmyadmin[yourVersion]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-25T10:12:23.270

用户：根

密码：（留空）

单击“前往”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T19:03:24.680

因为'使用密码：否'，你不需要写密码。只需点击“开始”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T10:26:51.733

尝试这个：

前往：`config.default.php`
我认为它位于`C:\wamp\phpmyadmin\config.default.php`

*   还要检查`config.inc.php`

寻找：`$cfg['Servers'][$i]['extension'] =`

如果是`$cfg['Servers'][$i]['extension'] = 'mysqli';`

将其更改为：`$cfg['Servers'][$i]['extension'] = 'mysql';`

**还要检查那里的其他配置！**

# c++ - OpenCV：为什么分配新值后矩阵值没有改变？

> ID：12767940
> 
> 赞同：0
> 
> 时间：2012-10-07T10:21:36.007
> 
> 标签：c++, opencv, for-loop, matrix, set

在openCV中，我试图设置这样的矩阵值：

```
int C = 3; 
cv::Mat reshapedGray = gray.reshape ( 0, 1 ); // reshaping gray matrix into 1x1 size
cv::Mat diff = cv::Mat::zeros ( C, height*width, CV_8UC3 );
cv::Mat mean = cv::Mat::zeros ( C, height*width, CV_8UC3 );
mean.setTo (125);

for ( int i=0; i < C; ++i)
{
    for ( int j = 0; j < height*width; ++j)
    {
        diff.data[diff.cols*i+j] = reshapedGray.data[j] - mean.data[mean.cols*i+j];
        //update mean matrix here
    }
} 
```

出于某种原因，最后我发现 diff 的值没有改变，仍然全为零，但是当我尝试在 for 循环中使用这一行时：

```
std::cout << diff.data[diff.cols*i+j] << std::endl; 
```

它打印出正确的值。我也尝试使用这样的指针：

```
double* diffPtr = diff.ptr<double>();
double* meanPtr = mean.ptr<double>();
double* rgPtr = reshapedGray.ptr<double>();

for ( int i = 0; i < C; ++i )
{
    for ( int j = 0; j < height*width; ++j)
    {
        *diffPtr = *rgPtr - *meanPtr;
        rgPtr++;
        meanPtr++;
        diffPtr++;
        //update mean matrix here
    }
} 
```

它仍然给了我所有零值，甚至是线

```
std::cout << *diffPtr << std::endl; 
```

在循环中没有任何区别。我想使用 cvMat 的“set”方法，但这对我来说太耗时了。让我明确一点，“灰色”矩阵不是空矩阵，它来自视频帧，然后转换为灰度，我可以看到它。我们还有什么方法可以改变矩阵值，或者我在这里做错了什么？我希望我不会重复任何老问题，因为我已经在网上搜索过这个问题，但仍然无法解决。

# python - 如何使用 mechanize-python 处理弹出窗口？

> ID：12767945
> 
> 赞同：2
> 
> 时间：2012-10-07T10:22:37.073
> 
> 标签：python, mechanize-python

我正在尝试编写一个程序来访问[该站点](http://www.yourlibrary.ca/account/)。当密码和 ID 都正确时，页面会重定向到另一个 URL。当用户ID错误时，它会通过弹出窗口通知用户，而当密码错误时，它不会说什么（尝试Barcode：21290004296682 PW：0000）。

我面临的问题是我无法机械化区分“错误的条形码”和“错误的密码”。换句话说，我无法让它识别输入错误条形码后显示的弹出对话框。

有人可以帮忙吗？在人们开始认为我这样做是出于恶意目的之前，这实际上是为了我大学的信息安全项目。

# c++ - 模幂 - 如何减少巨大的模数？

> ID：12767951
> 
> 赞同：1
> 
> 时间：2012-10-07T10:23:50.987
> 
> 标签：c++, modulus, modular, reduction, exponentiation

模幂运算的典型方程是 (a + b) MOD n = ((a MOD n) + (b MOD n)) MOD n。如果 a 和 b 非常大，那就太棒了。但是我被要求用一个非常大的 n (2^31 -1) 来做这个幂运算，a 和 b 没问题。

我只需要一种减少 n 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:34:15.627

“(a + b) MOD n = ((a MOD n) + (b MOD n)) MOD n”不是指数，而是加法。

“(2^31 -1)”不是“巨大的 n”，它是 31 位设置为 1。

由于这些基本假设完全是错误的，并且由于问题显然是家庭作业，因此很难在不损害 OP 的情况下给出更具体的建议。已经说过的应该足以暗示可以解决分配问题。或者，可以开始分配任务，并发布一个新的 SO 问题。

# javascript - 带有代码示例的 Javascript 闭包说明

> ID：12767953
> 
> 赞同：1
> 
> 时间：2012-10-07T10:24:14.100
> 
> 标签：javascript, closures

我试图理解 javascript 闭包。我读了一个示例代码：

```
function buildList(list) {
  var result = [];
  for (var i = 0; i < list.length; i++) {
    var item = 'item' + list[i];
    result.push( function() {alert(item + ' ' + list[i])} );
  }
  return result;
}

var fnlist = buildList([1,2,3]);
// using j only to help prevent confusion - could use i
for (var j = 0; j < fnlist.length; j++) {
  fnlist[j]();
} 
```

此代码将打印 3 次“item3 undefined”警报。我确实理解第 5 行的 item 变量中的“3”，但我不明白为什么它会从第 5 行的 list[i] 中打印出“undefined”？这不是也使用闭包来访问列表变量吗？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T10:39:59.760

您确实可以访问所有这些变量。问题是您在以下循环中的 i 变量：

```
 for (var i = 0; i < list.length; i++) {
    var item = 'item' + list[i];
    result.push( function() {alert(item + ' ' + list[i])} );
  } 
```

i 通过引用传递并在每个循环中增加。因此，在您将闭包推入循环 3 次后，i 的值为 4，并且每个回调都尝试提醒 [1,2,3] 的第 4 个元素（您提供的数组），这是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:06:38.807

最快的解释是：闭包是围绕函数而不是语句创建的！

试试这个以了解它的含义：

```
function createClosure(item, val) {
    return function() {alert(item + ' ' + val)};
}

function buildList(list) {
 var result = [];
  for (var i = 0; i < list.length; i++) {
    var item = 'item' + list[i];
    result.push( createClosure(item, list[i]) );
  }
  return result;
} 
```

# java - 使用 Java Swing 类库制作简单文本编辑器所需的建议

> ID：12767957
> 
> 赞同：3
> 
> 时间：2012-10-07T10:24:36.377
> 
> 标签：java, swing, awt

我是一个java初学者，我想做一个简单的文本编辑器，但我发现了以下问题。JTextArea 不会与 JFrame 一起重新调整大小。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class textEditor
{
JFrame frame;
JTextArea textArea;
JScrollPane scrollPane;
//JButton button;

public textEditor()             //Constructor
{
    frame = new JFrame("Title of the frame!");
    frame.setLayout(new FlowLayout());
    textArea = new JTextArea("");
    scrollPane = new JScrollPane(textArea);

            scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);

    //button = new JButton();

}

public void launchFrame()
{
    //Adding Text Area and ScrollPane to the Frame
    frame.getContentPane().add(textArea);
    frame.getContentPane().add(scrollPane);

    //Make the Close button to close the frame when clicked
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Displaying the Frame
    frame.setVisible(true);
    frame.pack();
}

public static void main(String args[])
{
    textEditor window=new textEditor();
    window.launchFrame();
}
} 
```

请不要忘记我是初学者，所以请用简单的话给我一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T10:35:27.013

JTextArea 不会与 JFrame 一起重新调整大小，因为您使用的`FlowLayout`管理器使用组件的首选大小而不是扩展它们以填充容器的全部空间。要修复，您可以删除该行：

```
frame.setLayout(new FlowLayout()); 
```

`JFrame`容器`BorderLayout`默认使用管理器，它将执行您正在寻找的必要大小。

同时删除该行

```
frame.getContentPane().add(textArea); 
```

因为只有`JScrollPane`需要添加到框架中。

# ruby-on-rails - 如何使用haml与rails中的许多元素建立链接

> ID：12767963
> 
> 赞同：0
> 
> 时间：2012-10-07T10:25:19.260
> 
> 标签：ruby-on-rails, link-to, nested

我对 ruby​​、rails 和 haml 非常陌生。我正在重新编码我拥有的一个小网站，我试图创建一个链接，其中嵌套了一些元素。

我想要输出的结构是这样的：

```
<a href="somewhere">
    <span>
         <img src="/imgs/hello.png" />
    </span>
    <strong>6
        <em>Oct</em>
    </strong>
    <h1>Title</h1>
</a> 
```

所以我正在尝试这样做（显然它的真正缩进比父元素多一个标签）：

```
= link_to("somewhere") do 
    %span
        %img(src="/imgs/hello.png")
    %strong 6
        %em Oct
    %h1 Title
end 
```

对我来说，这似乎是逻辑。但事实并非如此。它给了我这个错误：

*缩进不一致：“\t\t\t\t\t”用于缩进，但文档的其余部分使用 1 个制表符缩进。*

错误行号它是link_to之后的第一行；%span 元素。所以，我认为这是因为我没有以正确的方式使用 link_to，但是看到错误涉及缩进问题，并且在以多种不同方式尝试之后，我无法让它运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:12:59.287

这应该有效。

```
= link_to("somewhere") do
  %span
    %img(src="/imgs/hello.png")
    %strong 
      6
      %em Oct
  %h1 Title 
```

此外，请确保在您的编辑器中使用空格作为制表符。这将摆脱任何时髦的业务。

# iphone - UITableView中的UITabBar MoreViewController图像在以编程方式选择后消失

> ID：12767975
> 
> 赞同：7
> 
> 时间：2012-10-07T10:26:51.383
> 
> 标签：iphone, ios, image, uinavigationcontroller, uitabbar

我正在尝试在 UITabBar.viewControllers 数组中选择我的 UINavigationControllers 之一。

我之前尝试过设置 UITabbarController.selectedIndex，但 Apple 文档说： *“要选择更多导航控制器本身，您必须改为更改 selectedViewController 属性的值。”*

```
AppDelegate *appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
UINavigationController *navController = [appDelegate.objTabBarController.viewControllers objectAtIndex:5];
[appDelegate.objTabBarController setSelectedViewController:navController]; 
```

这样做很好，但是当我改回 MoreViewController 的列表视图时，左侧的图标消失了，不会回来了。

一切正常，用手指选择它时。

![选择就好](../Images/86dd86cdb0e5010097e2f3c53c2d04ff.png)

以编程方式选择时出现错误->图像消失了

![每个代码步骤 1](../Images/c10e8b97e63e2dacd5a5d3be3ec3b3cc.png) ![每个代码步骤 2](../Images/ee09355796f692f9d749d7cc7fb39045.png) ![每个代码步骤 3](../Images/1fa899e1bc8e137c1ca4e7f29d7ab5cf.png)

有什么建议我做错了吗？

最好的问候，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:11:09.130

**选择更多导航控制器**

要选择 moreNavigationController，您必须设置`selectedViewController`：

```
self.tabBarController.selectedViewController = self.tabBarController.moreNavigationController; 
```

原因很简单：moreNavigationController 不在`viewControllers`tab bar controller 的内部，所以不能通过 index 选择。

要直接选择“更多”控制器之一，您可以设置`selectedViewController`属性：

```
self.tabBarController.selectedViewController = viewController5; 
```

或者您可以设置`selectedIndex`：

```
self.tabBarController.selectedIndex = 5; 
```

**修复消失的标签栏图像**

`moreNavigationController`消失的标签栏图像是由在导航控制器（由标签栏控制器生成）内使用导航控制器（用于设置）引起的。要修复它，有两种解决方案：

1.  不要为更多部分添加导航控制器，而是直接添加控制器。控制器结构看起来像这样，假设所有选项卡中的控制器都需要导航：

    ```
    tabBarController
    + navigationController
      + viewController0
    + navigationController
      + viewController1
    + navigationController
      + viewController2
    + navigationController
      + viewController3
    + viewController4
    + viewController5 
    ```

2.  在其导航控制器上设置`tabBarItem`设置控制器的 （您只需执行一次）：

    ```
    UINavigationController *settingsNavigationController = [appDelegate.objTabBarController objectAtIndex:5];
    UIViewController *settingsRootController = settingsNavigationController.viewControllers[0];
    settingsNavigationController.tabBarItem = settingsRootController.tabBarItem; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:18:21.787

我遇到了同样的问题。似乎导航控制器不知何故失去了对视图控制器的跟踪。在我的例子中，图像消失的导航控制器位于 tabBarController 中的索引 7。导航控制器应该包含类 SettingsViewController 的 viewController。但有时它会失去它。

为了解决这个问题，我不得不将代码添加到两个类——应用程序委托和 SettingsViewController。在应用委托中：

```
-(void) fixSettingsNavigationController {
    UITabBarController* tab = self.tabBarController;
    NSArray* vcs = tab.viewControllers;
    NSInteger nVCs = vcs.count;
    if (nVCs > 7) {
        UIViewController* settingsContainer = vcs[7];
        UINavigationController* settingsContainerNav = (UINavigationController*)settingsContainer;
        if ([settingsContainerNav isKindOfClass: [UINavigationController class]]) {
            NSArray* settingsNavVCs = settingsContainerNav.viewControllers;
            NSInteger count = settingsNavVCs.count;
            SettingsViewController* svc = self.settingsViewController;
            if (!count) {
                  //  The container navigation controller has lost track of the settings view controller.
                  settingsContainerNav.viewControllers = [NSArray arrayWithObject:svc];
            }
        }
    }
} 
```

在 SettingsViewController 中：

```
-(void) viewWillDisappear:(BOOL)animated {
    MyAppDelegate* appDel = [[UIApplication sharedApplication] delegate];
    [appDel fixSettingsNavigationController];
    [super viewWillDisappear: animated];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:19:12.113

我遇到了非常相似的情况，我想以编程方式在 MoreViewController 中选择一个视图控制器。

正如您在问题中所说，苹果不允许选择 MoreViewController 内部的视图控制器（或在标签栏中不可见）。

就我而言，我不需要在标签栏中重新排序标签的默认“更多”功能。

所以，我做了以下事情

1.  创建了一个 UITableViewControlelr 作为我的第 5 个选项卡，将其标题设置为更多和自定义图像（类似于默认更多图像）。

2.  在我的 UITableViewController 中，我列出了与 ViewControllers 对应的项目。点击哪个显示相应的视图控制器。

3.  当我需要以编程方式显示我的 UITableViewController 中的任何视图控制器时，我只需设置一个标志并推送我的 UITableViewController，然后在我的 UITableViewController 的 viewDidAppear 方法中推送所需的视图控制器。

4.  这还将在以编程方式打开的视图上显示返回按钮到 MoreViewController 列表

# jsp - JSP处理指令未关闭

> ID：12767979
> 
> 赞同：14
> 
> 时间：2012-10-07T10:27:26.197
> 
> 标签：jsp, jakarta-ee, include, jspinclude

我试图在我的 JSP 中包含一个 HTML 文件，但我 Eclipse 显示了这个错误

包含的文件

```
<%@include file="includes/head.html" %> 
```

和错误

```
Processing instruction not closed 
```

而这只是简单的 JSP

```
<%@include file = "includes/head.html" %>

    <form action = "#" method = "POST">
        Username: <input type = "text" name = "username"><br/>
        Password: <input type = "password" name = "password"><br/>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-07-10T03:30:07.790

选择全部，退格，然后 ctrl+z 恢复。为我工作。但是熟悉日食的人可能会对为什么会发生这种情况有所了解

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-13T05:34:23.460

这看起来很疯狂，但是按 ctrl + A，ctrl + x，粘贴并保存代码，Bug 已清除

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-29T19:34:11.677

此外，关闭文档并再次打开它似乎可以正常工作（请记住先保存文档）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-13T06:15:16.143

我尝试了 Anurag Priyadarshi 的回答，但没有奏效。但是我通过重新启动 eclipse 来消除这个错误，你可能想试试它对我有用。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-12T07:10:36.207

通过删除错误文件将相同的代码保存在新文件中对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T06:27:22.307

尝试在@ 后面留一个空格。

```
<%@ include file="includes/head.html" %>. 
```

此外，如果 head.html 在其他目录中，则绝对路径应以 / 或 .. 开头。尝试 `<%@ include file="/includes/head.html" %>`或

```
<%@ include file="../includes/head.html" %>. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-09T11:54:20.367

重新启动eclipse对我有用。

# algorithm - 按递归树排序

> ID：12767987
> 
> 赞同：1
> 
> 时间：2012-10-07T10:29:27.170
> 
> 标签：algorithm, recursion

我尝试确定递归关系给出的运行时间，但我的结果不正确。

**复发**

```
T(n) = c + T(n-1) if n >= 1
     = d          if n = 0 
```

**我的尝试**

我构建了这个递归树：

```
 n
                   |
                  n-1
                   |
                  n-2
                   |
                  n-3
                   |
                  n-4
                   |
                  n-5
                   |
                   |
                   |
                   |
                   |
                   |
                Till we get 1 
```

现在在 level `i`，子问题的大小应该是，`n-i`

但最后我们想要一个大小为 1 的问题。因此，在最后一级， `n-i=1`它给出了`i=n-1`.

所以树的深度变成`n-1`了，高度变成了`n-1+1= n`。

现在解决此递归所需的时间=树的高度*每个级别所需的时间，即：

```
n+(n-1)+(n-2)+(n-3)+(n-4)+(n-5)+ ...
==> (n+n+n+n+n+ ... )-(1+2+3+4+5+ ... )
==> n - (n(n+1)/2) 
```

现在所花费的时间 = n* ((n-n2)/2) 应该给出的顺序是 n ²，但这不是正确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T12:12:45.020

> 现在在第 i 层，子问题的大小应该是，ni

对，那是正确的。但是您假设运行时间等于所有子问题大小的总和。试想一下，已经将前两个级别相加了`n + (n - 1) = 2n - 1`，为什么问题大小会增加？[免责声明：有点手忙脚乱，并不完全准确。]

## 公式实际上说的是什么

```
T(n) = c + T(n-1) 
```

公式说，解决一些问题`n`所花费的时间与解决问题大小所花费的时间相同，但问题大小*加上*一个额外的常数`c`：`c + T(n - 1)`

上述陈述的另一种表达方式是：鉴于问题需要一些时间`t`才能达到一定的问题规模，因此需要一定`t + c`的问题规模，即大一倍。

我们知道，在问题大小为 时`n = 0`，这需要时间`d`。根据第二个说法，对于一个更大的尺寸，`n = 1`将需要`d + c`。再次应用我们的规则，因此`d + c + c`需要`n = 2`. 我们得出结论，`d + n*c`任何`n`.

[*这*不是证据。要实际证明这一点，您必须使用 amit 所示的归纳法。]

## 正确的递归树

您的递归树仅列出问题大小。恐怕这没什么用。相反，您需要列出上述问题大小的运行时。

树中的每个节点都*对应*一个特定的问题大小。您写入该节点的内容是问题大小所需的*额外*时间。即，您将节点的所有后代*加上*节点本身求和以获得特定问题大小的运行时。

这种树的图形表示如下所示

```
Tree        Corresponding problem size
c                                    n
|
c                                    n - 1
|
c                                    n - 2
|
c                                    n - 3
.
.
.
|
c                                    2
|
c                                    1
|
d                                    0 
```

**形式化：**如前所述，节点的标签是解决该问题大小所需的*额外运行时间，加上它的所有后代。*最上面的节点代表一个问题大小`n`，带有标签`c`，因为它是除 之外的`T(n-1)`，它使用 连接到它`|`。

在一个公式中，你只会写这个关系：`T(n) = c + T(n-1)`。鉴于这棵树，您可以看到这如何适用于每个`n>=1`. 你可以这样写：

```
T(n)     = c + T(n - 1) # This means, `c` plus the previous level
T(n - 1) = c + T(n - 2) # i.e. add the runtime of this one to the one above^
T(n - 2) = c + T(n - 3)
...
T(n - (n - 2)) = c + T(1)
T(n - (n - 1)) = c + T(0)
T(0) = d 
```

您现在可以从下到上展开条款：

```
T(n - (n - 1)) = c + T(0)
T(0) = d

T(n - (n - 2)) = c + T(1)
T(n - (n - 1)) = c + d
T(0) = d

T(n - (n - 3)) = c + T(2)
T(n - (n - 2)) = c + (c + d)
T(n - (n - 1)) = c + d
T(0) = d

T(n - (n - 4)) = c + T(3)
T(n - (n - 3)) = c + (2*c + d)
T(n - (n - 2)) = c + (c + d)

...

T(n) = c + T(n - 1)
T(n - 1) = c + ((n-2)c + d)

T(n) = c + (n-1)c + d = n*c + d
T(n - 1) = (n-1)c + d 
```

## 求和`1 to n`

```
n+(n-1)+(n-2)+(n-3)+(n-4)+(n-5)+ ...
==> (n+n+n+n+n+ ... )-(1+2+3+4+5+ ... )
==> n - (n(n+1)/2) 
```

从第一行到第二行，您已将问题从 summing 减少`1 to n`到 summing `1 to n-1`。这不是很有帮助，因为您遇到了同样的问题。

我不确定你在第三行做了什么，但你从第一行到第二行的过渡基本上是正确的。

这将是正确的公式：

![高斯技巧将 1 与 n 相加](../Images/77b74e451468024d89c5b52fa45c13f7.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T10:31:44.713

```
T(n) = c + T(n-1) 
     = c + (c + T(n-2)) 
     = ... 
     = c*i + T(n-i) 
     = ...
     = c*n + T(0)
     = c*n + d 
```

如果我们假设 c,d 是常数 - 它会让你`O(n)`

为了证明它在数学上 - 可以使用[数学归纳法](http://en.wikipedia.org/wiki/Mathematical_induction)

对于每个`k < n`假设`T(n) = c*n + d`
Base 是`T(0) = 0*n + d = d`，这对于 n < 1 是正确的

```
T(n) = c + T(n-1)               (*)
     = c + (n-1)*c + d 
     = c*n + d 
```

(*) 是归纳假设，并且是有效的，因为 n-1 < n

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T11:51:23.247

复杂度为 O(n)。

正如您所描述的，这些函数通过使用常量操作“c”将输入 n 的问题转换为 (n-1) 的问题。

因此，向下移动递归树，我们将总共有 n 个级别，并且在每一步我们都需要一些恒定的操作“c”。

因此将有总共 c*n 次操作导致复杂度 O(n)。

# performance - Pex 在报告后循环运行？

> ID：12767989
> 
> 赞同：0
> 
> 时间：2012-10-07T10:29:35.383
> 
> 标签：performance, pex

我通过命令行在大约 2200 种方法的类上运行 pex。

经过 2 天的细化，我认为今天早上 8.05 完成了测试套件和报告 html，pex 完成，修改的列表文件是在 08.40 AM。

输出的最后一行是：

```
08:05:08.3> [finished] execution time 2.08:05:08.3014942.
        -- 0 critical errors, 0 errors, 0 warnings.
        -- 83635 generated tests, 1 failing, 83635 new, 0 inconclusive.

[coverage] generating coverage reports...
[reports] generating reports...
[reports] report path: reports\121005.001302.3848.pex 
```

进程 pex.exe 正在连续运行，但是发生了什么？大约 3.5 小时后（现在对我来说是 12.15 pm）它可能会循环或者它在做什么操作？

CPU 已满，内存也已满（处理 pex 1.5G RAM）

你认为我必须阻止它吗？谢谢最好的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:12:14.647

2天大约14小时后，我停止了这个过程：

```
[coverage] generating coverage reports...
[reports] generating reports...
[reports] report path: reports\121005.001302.3848.pex
!error! [reports] rendering of coverage reports failed: exit code 1 - 0x1
Microsoft Pex v0.94.51023.0 -- http://research.microsoft.com/pex -- v4.0.30319
Copyright (c) Microsoft Corporation 2007-2010\. All rights reserved.

[tests] could not resolve test framework, using default (Visual Studio Unit Test
)
[reports] html report: reports\121005.001302.3848.pex\report.html
        LAUNCHER FAILED
unexpected failure: exit code 1 - 0x1 
```

也许我的资源很少（2G RAM 和双核），而 pex 没有做 report.html

# jquery - 为什么 javascript 或 jquery 代码在区域布局页面中不起作用？

> ID：12767992
> 
> 赞同：0
> 
> 时间：2012-10-07T10:30:00.980
> 
> 标签：jquery, asp.net-mvc-3

我想在我的“AdminLayout.cshtml”中添加 jquery 手风琴菜单。当我在根目录中使用所有代码时，菜单确实有效，但是当我将它们添加到管理区域的“AdminLayout.cshtml”时，它的 JavaScript 代码不起作用！我的轮回是真的。为什么？

jQuery代码：

```
 <script type="text/javascript">
   $(document).ready(function ($) {  
       $('#accordion-3').dcAccordion({
           eventType: 'click',
           autoClose: false,
           saveState: false,
           disableLink: false,
           showCount: false,
           speed: 'slow'
       });
  </script> 
```

html代码：

```
 <ul class="accordion" id="accordion-3">
        <li><a href="#">Home</a>  <ul>
                <li><a href="#">Page 1</a></li>
                <li><a href="#">Page 2</a></li>
                <li><a href="#">Page 3</a></li>
                <li><a href="#">Page 4</a></li>
            </ul></li>
        <li><a href="#">Products</a><ul>
            <li><a href="#">Mobile Phones &#038; Accessories</a><ul>
                <li><a href="#">Product 1</a>
                    <ul>
                        <li><a href="#">Part A</a> </li>
                        <li><a href="#">Part B</a></li>
                        <li><a href="#">Part C</a></li>
                        <li><a href="#">Part D</a></li>
                    </ul>
                </li>
            </ul>
            </li>
            <li><a href="#">Accessories</a>
            <ul>
                <li><a href="#">Product 14</a></li>
                <li><a href="#">Product 15</a></li>
            </ul>
            </li>
        </ul></li>
    </ul> 
```

并使用这些文件：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="../../Scripts/jquery.cookie.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.hoverIntent.minified.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.dcjqaccordion.2.7.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:02:24.313

我认为这是因为脚本参考 URL 中有一个错误。因此，要克服这种情况，请使用**[Url.Content()](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content%28v=vs.108%29.aspx)**方法。它将虚拟（相对）路径转换为应用程序绝对路径。

**例子 ：**

```
<script src='@Url.Content("~/Scripts/jquery.cookie.js")' type="text/javascript"></script>
<script src='@Url.Content("~/Scripts/jquery.hoverIntent.minified.js")'  type="text/javascript"></script>
<script src='@Url.Content("~/Scripts/jquery.dcjqaccordion.2.7.min.js")' type="text/javascript"></script> 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:04:19.720

在 ASP.NET MVC3 中，您应该使用：

```
@Url.Content("~/path/to/file/from/root") 
```

在`src`脚本标签的属性中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T17:00:15.820

我将此行添加到我的代码中并且工作正常...

```
 <script src="@Url.Content("/Scripts/Admin/jquery-1.8.2.min.js")"
     type="text/javascript"></script> 
```

谢谢大家...

# c# - htmlagilitypack - 解析标签

> ID：12767993
> 
> 赞同：1
> 
> 时间：2012-10-07T10:30:02.367
> 
> 标签：c#, parsing, html-parsing, html-agility-pack

我试图从以下 href 中获取 LOC=URL

```
http://url.comclickThrough?SRC=&amp;target=SP&amp;PN=1&amp;FP=listings&amp;T=Las+Vegas&amp;S=NV&amp;C=lawyer&amp;PGID=yp604.8084.1349604581940.36701144470449&amp;ALG=113&amp;TS=nbt&amp;OF=1&amp;ACTION=log,red&amp;CID=520623&amp;LID=2325743402&amp;TR=77&amp;bidType=FLCLIK&amp;relativePosition=3&amp;position=33&amp;PGSN=R1&amp;RS=49.157852&amp;CID=520623&amp;FL=url&amp;TL=off&amp;LOC=http://www.nvtalaw.com 
```

如何获取 href 中的最后一个 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T10:38:56.683

不了解 html-agility-pack 但可以使用[System.Web.HttpUtility](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)类对其进行解析

```
System.Uri u = new System.Uri(url);
string LOC = System.Web.HttpUtility.ParseQueryString(u.Query).Get("LOC"); 
```

# sql - Oracle中如何显示最高值的记录？

> ID：12767996
> 
> 赞同：2
> 
> 时间：2012-10-07T10:30:23.090
> 
> 标签：sql, oracle, limit, top-n

我有 4 个具有以下结构的表：

表`artist`：

```
artistID lastname firstname nationality dateofbirth datedcease 
```

表`work`：

```
workId title copy medium description artist ID 
```

表`Trans`：

```
TransactionID Date Acquired Acquistionprice datesold askingprice salesprice customerID workID 
```

表`Customer`：

```
customerID lastname Firstname street city state zippostalcode country areacode phonenumber email 
```

第一个问题是哪位艺术家的作品最多，`artsold`以及有多少艺术家的作品被售出。

我的 SQL 查询是这样的：

```
SELECT * From dtoohey.artist A1 
INNER JOIN 
(
    SELECT COUNT(W1.ArtistID) AS COUNTER, artistID  FROM dtoohey.trans T1
    INNER JOIN dtoohey.work W1
    ON W1.workid = T1.Workid
    GROUP BY W1.artistID
) TEMP1
ON TEMP1.artistID = A1.artistID
WHERE A1.artistID = TEMP1.artistId
ORDER BY COUNTER desc; 
```

我要得到整张桌子，但我只想显示最高计数的第一行我该怎么做？

我已尝试插入`WHERE ROWNUM <=1` ，但它显示艺术家 ID 为 1

qns 2 是哪位艺术家的作品获得最高平均利润的销售额（即艺术家每次销售作品所获得的平均利润），该金额是多少。

我的 SQL 查询是：

```
SELECT A1.artistid, A1.firstname FROM
(
    SELECT 
        (salesPrice - AcquisitionPrice) as profit, 
        w1.artistid as ArtistID 
    FROM dtoohey.trans T1
    INNER JOIN dtoohey.WORK W1
    on W1.workid = T1.workid
) TEMP1
INNER JOIN dtoohey.artist A1
ON A1.artistID = TEMP1.artistID
GROUP BY A1.artistid
HAVING MAX(PROFIT) = AVG(PROFIT); 
```

我无法执行它

我已经尝试了下面的查询，但仍然无法得到它不断收到错误丢失右括号

```
SELECT A1.artistid, A1.firstname, TEMP1.avgProfit
FROM 
(
    SELECT 
        AVG(salesPrice - AcquisitionPrice) as avgProfit, 
        W1.artistid as artistid
    FROM dtoohey.trans T1
    INNER JOIN dtoohey.WORK W1
    ON W1.workid = T1.workid
    GROUP BY artistid
    ORDER BY avgProfit DESC
    LIMIT 1
) TEMP1
INNER JOIN dtoohey.artist A1
ON A1.artisid = TEMP1.artistid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:18:00.037

有时`ORA-00907: missing right parenthesis`就是这个意思：我们有一个左括号而没有匹配的右括号。但它也可能由括号限定的语句部分中的语法错误引发。

这是第二个原因：LIMIT 是 Oracle 无法识别的 Mysql 命令。您可以在此处使用分析函数：

```
SELECT A1.artistid, A1.firstname, TEMP1.avgProfit
FROM 
(
    select  artistid
            , avgProfit
            , rank() over (order by avgProfit desc) as rnk
    from (
        SELECT 
            AVG(salesPrice - AcquisitionPrice) as avgProfit, 
            W1.artistid as artistid
        FROM dtoohey.trans T1
        INNER JOIN dtoohey.WORK W1
        ON W1.workid = T1.workid
        GROUP BY artistid
    ) 
) TEMP1
INNER JOIN dtoohey.artist A1
    ON A1.artisid = TEMP1.artistid
where TEMP1.rnk = 1 
```

这使用了 RANK() 函数，如果几位艺术家获得相同的平均利润，它将返回多行。您可能想改用 ROW_NUMBER() 。分析功能可能非常强大。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm#i81407)。

您可以将 ROWN_NUMBER()、RANK() 和 DENSE_RANK() 应用于任何前*n 个*问题。您也可以使用其中一个来解决您的第一个问题。

* * *

> “但是平均利润为零。”

这应该是数据问题。如果其中一个数字`(salesPrice - AcquisitionPrice)`为空，则结果将为空，并且不会包含在平均值中。如果艺术家的所有行都为空，则 AVG() 将为空。

碰巧排序顺序将NULL放在最后。但是，由于 PARTITION BY 子句的排序方式`AvgProfit desc`将 NULL 结果排在第 1 位。解决方案是在窗口子句中使用 NULLS LAST：

```
 , rank() over (order by avgProfit desc nulls last) as rnk 
```

这将保证您在顶部获得非空结果（前提是您的艺术家中至少有一位在两列中都有值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T11:21:21.893

第一个问题 - Oracle 不保证检索行的顺序。因此，您必须先订购，然后再限制有序集。SELECT * from ( SELECT A1.* From dtoohey.artist A1 INNER JOIN ( SELECT COUNT(W1.ArtistID) AS COUNTER, artistID FROM dtoohey.trans T1 INNER JOIN dtoohey.work W1 ON W1.workid = T1.Workid GROUP BY W1。 artistID ) TEMP1 ON TEMP1.artistID = A1.artistID WHERE A1.artistID = TEMP1.artistId ORDER BY COUNTER desc ) WHERE ROWNUM = 1

第二个问题：我相信（尚未测试）您的 LIMIT 1 错误。该关键字用于批量收集。

# android - 启动 ACTION_CALL 时如何将 Extra 传递给 BroadcastReceiver

> ID：12767998
> 
> 赞同：4
> 
> 时间：2012-10-07T10:30:30.533
> 
> 标签：android, android-intent

我正在从我的活动中发起新的呼叫。并试图传递一个额外的布尔值。

```
public class CallInitiatingActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse("tel:" + number));
        intent.putExtra("com.demoapp.CUSTOM_CALL", true);
        startActivity(intent);
    }
} 
```

我还注册了一个 BroadcastReceiver，它监听拨出电话：

```
<receiver android:name=".OutgoingCallListener" android:exported="true" >
    <intent-filter android:priority="0" >
        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver> 
```

基本上我期望 onReceive 看到我的额外内容，但不知何故它没有通过：

```
public class OutgoingCallListener extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle extras = intent.getExtras();

        for (String key : extras.keySet()) {
            Log.i(Constant.LOG_TAG, key + ": " + extras.get(key));
        }
    }
} 
```

输出：

```
android.phone.extra.ALREADY_CALLED:false
android.intent.extra.PHONE_NUMBER:+370652xxxxx
com.htc.calendar.event_uri:null
android.phone.extra.ORIGINAL_URI:tel:+370652xxxxx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T06:58:16.527

您的自定义额外内容存在于您用于启动“呼叫”活动的 Intent 中。但它不会被复制到`NEW_OUTGOING_CALL`作为实际调用机制的一部分广播的 Intent 中。这两个操作是不同的，并且只是彼此间接相关。只有 Android 系统本身可以广播`NEW_OUTGOING_CALL`Intent。

您不能将自己的附加内容添加到此 Intent。你需要想出另一种方法来完成你想要完成的任何事情。