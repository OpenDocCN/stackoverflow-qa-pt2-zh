# StackOverflow 问答 13452000-13452999

# linux - Linux reboot() 系统调用：为什么它在 kernel_halt() 之后调用 do_exit(0)？

> ID：13452002
> 
> 赞同：5
> 
> 时间：2012-11-19T10:34:13.207
> 
> 标签：linux, kernel, system-calls, reboot, halt

这与：[https ://stackoverflow.com/a/13413099/1284631](https://stackoverflow.com/a/13413099/1284631)

现在，问题是：

为什么 reboot() 系统调用，当用`LINUX_REBOOT_CMD_HALT`参数调用时（见这里： http: [//lxr.linux.no/linux+v3.6.6/kernel/sys.c#L480](http://lxr.linux.no/linux+v3.6.6/kernel/sys.c#L480)）`do_exit(0)`在已经调用之后调用`kernel_halt()`，因为调用`kernel_halt()`煮沸调用`stop_this_cpu()`（见这里：http: [//lxr.linux.no/linux+v3.6.6/arch/x86/kernel/process.c#L519](http://lxr.linux.no/linux+v3.6.6/arch/x86/kernel/process.c#L519)），作为`native_machine_halt()`（见这里：[http://lxr.linux .no/linux+v3.6.6/arch/x86/kernel/reboot.c#L680](http://lxr.linux.no/linux+v3.6.6/arch/x86/kernel/reboot.c#L680)）。

或者，在我看来，它`stop_this_cpu()`永远不会返回（它以无限循环结束）。

所以，它被`do_exit(0)`调用以防万一它`kernel_halt()`没有完成它的工作并且它返回？那为什么不`panic()`直接取而代之呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T14:10:50.850

一些想法：

*   可能是`kernel_halt()`出于正当理由拒绝实际停止，尽管我想不出任何理由。
*   `kernel_halt()`可能被设计为也可以由管理程序或比内核更高或同等级别的东西调用（可能是自定义 SMI 代码？）
*   也许该`kernel_halt()`函数提前返回，“调度”停止，而实际停止发生在某些硬件上的某个时间之后。我记得读过有关在 DOS 中在汇编中执行 ATX 电源关闭的信息 - 您会发出`outb`指令来启动电源关闭，但您必须有一些`nops`，一个无限循环，或者`hlt`之后，因为实际的电源关闭可能会发生一些周期后。
*   调用进程可能希望以其他方式而不是内核恐慌来处理重启失败。

# wpf - 引导程序中的自定义窗口作为默认窗口

> ID：13452005
> 
> 赞同：0
> 
> 时间：2012-11-19T10:34:26.990
> 
> 标签：wpf, prism

将自定义 RibbonWindow 设置为默认 shell 窗口的过程应该是什么。我们从一个模块中获取这个窗口。我们注册并初始化了它。

```
 protected override DependencyObject CreateShell()
    {
        return new xamRibbonWindow() as DependencyObject;
    }

    protected override void InitializeShell()
    {
        base.InitializeShell();
        App.Current.MainWindow = (xamRibbonWindow)Shell;
        App.Current.MainWindow.Show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:21:18.067

While, it is a little unusual to get the Shell from a module, you could do it exactly the same way it is normally done. Are you using a dependency injection container? I'm going to assume you are:

```
protected override System.Windows.DependencyObject CreateShell()
{
    return ServiceLocator.Current.GetInstance<Shell>();
} 
```

You could just substitute your XamRibbonWindow class for Shell. This way, you do not need to reference the project directly that includes your shell. If you want the ability to resolve more than one shell depending on the modules that are loaded, I would create an interface IShell which XamRibbonWindow implements and register that type with the container.

Edit: Regarding your comments, I would have the module load and on intialize resolve the IRegionManager and call .Add on your region. Or have the shell call NavigateTo if you are using the Navigation interface

Are you using View Discovery or View Injection? (You may need to review the Prism book on UI composition) Also, using MEF, Unity?

# php - 我的更新查询没有更新数据库行

> ID：13452010
> 
> 赞同：-4
> 
> 时间：2012-11-19T10:34:55.623
> 
> 标签：php, mysql, sql-update

此查询未执行。当我在 PHP 中运行此查询时，它只是不更新​​表行。

```
mysql_query("
   UPDATE `info` SET `ip` = '$ip'
   WHERE `username` = '$user' AND `password` = '$password'
"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:38:13.213

首先`echo`你的变量..
然后检查你的变量名..
你的更新查询语法似乎是正确的..
但再次检查......

```
UPDATE your_table_name SET table_column = 'your_value' WHERE your_table_column = 'your_value'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:47:24.173

试试这个：

```
mysql_query("UPDATE `info` SET `ip` = '$ip' WHERE `username` = '$user'
AND `password` = '$password'") or die(mysql_error());

echo mysql_affected_rows() . '<br>'; 
```

# c++ - 卸载 PYD (python + c++) 模块时调用函数

> ID：13452011
> 
> 赞同：1
> 
> 时间：2012-11-19T10:35:09.277
> 
> 标签：c++, python, onunload, pyd

当我加载 PYD 和卸载它时，我需要运行一些额外的功能，因为 c++ 核心使用了一个用另一种语言编写的模块，并且这个模块需要手动加载和卸载。

我在 initMY_PYD_NAME(void) 中调用 load_another_language_module() 并且它工作正常。

当我的 PYD 被卸载时，是否会有类似的功能让我实现？我可以包装 unload_another_language_module() 以便它可以在 Python 中运行并手动调用每个脚本，但这并不是非常方便。

提前致谢！

# r - 情节问题 - 总是从 (0,0) 开始

> ID：13452012
> 
> 赞同：0
> 
> 时间：2012-11-19T10:35:12.207
> 
> 标签：r, plot, ggplot2

我正在处理一个巨大的数据集，其中所有列看起来像这样：0 10 12 30 10 0 20 30 0 40 50 10 0

这个想法是在 R 中制作一个简单的绘图，每次读取 0 时，绘图将从 (0,0) 开始。你知道我该怎么做吗？

在此先感谢，

更新：我是新用户，所以我不能发布任何图片！这是我要绘制的列的示例：

0
10
20
12
5
6
9
0
20
24
40
14
0
20
59
50
12
0
20
23
49
45
23
12
(...)

绘制折线图。我不想用所有值绘制一条长线，而是用第一条线绘制（0,10,20,12,5,6,9）绘制几条较短的线，第二条线绘制（0,20,24,40 ,14) 等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:38:09.787

我将添加一个附加列，指定您是哪个子数据集：

```
Value  Group
0      1
1      1
5      1
0      2
Etc. 
```

然后，您可以使用例如绘制子组`ggplot2`：

```
ggplot(yourdata, aes(x = xcoor, y = Value, color = Group)) + 
    geom_line() 
```

这将绘制不同颜色的线条。或使用`plot`类似的东西：

```
split_dat = with(yourdata, split(Value, Group))
plot(split_dat[[1]])
for(i in 2:length(split_dat)) {
   lines(split_dat[[i]])
 } 
```

# android - 增加启动器图标大小

> ID：13452017
> 
> 赞同：1
> 
> 时间：2012-11-19T10:35:45.313
> 
> 标签：android, launcher

如何增加启动器图标的大小。我知道我的自定义启动器正在从 drawable-mdpi 文件夹中获取图像，并且允许的图标大小为 48x48 。我不能比这增加启动器图标的大小。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:39:41.523

luacher 的图标它由系统本身准备你只需将每个版本的图标放入资源中并且低于每个版本的标准大小

LDPI - 36 x 36 MDPI - 48 x 48 HDPI - 72 x 72 XHDPI - 96 x 96 WEB - 512 x 512

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:41:42.130

有两种方式

```
1\. Create your icon using 9-patch with your required size
2\. Create different size of icon and put them in different drawable size. For this to know the size for specific like hdpi, mdpi etc just create sample/ open any exiting project which was created in juno(eclipse editor). 
```

这里是不同设备的具体尺寸细节

```
ldpi-36x36
mdpi-48x48
hdpi-72x72
xdpi-96x96
web - 128x128 
```

# orchardcms - 覆盖零件模板 Orchard

> ID：13452019
> 
> 赞同：0
> 
> 时间：2012-11-19T10:35:50.697
> 
> 标签：orchardcms

我从果园开始。我想覆盖 MenuWidgetPart 以按我的意愿进行渲染。我在当前主题的 Views 文件夹中创建了 Parts.MenuWidget-MenuWidget.cshtml。但我不知道如何从模型中获取列表菜单。请看下面我的代码：

```
<nav>
    <ul>
        @foreach(var m in listMenu){
            <li><a href="#">@m.Text</a></li>
        }
    </ul>
</nav> 
```

如何从 Model 获取 listMenu ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:09:41.087

和的模板是`Menu`和。您可以首先将这些文件从目录复制到主题目录。之后您可以根据需要修改它们。`MenuItem``Menu.cshtml``MenuItem.cshtml``/Core/Shapes/Views/`

这实际上会修改网站上的所有菜单。如果您希望它专门用于您的小部件 ( `Parts.MenuWidget-MenuWidget.cshtml`)，您可以首先将内容复制`Menu.cshtml`到小部件模板，然后从那里继续修改。

* * *

编辑：

要迭代项目，您可以使用以下语法：

```
@foreach (var item in Model.Menu.Items){
    @Display(item)
} 
```

# ruby-on-rails-3 - 通过 sidekiq 和 devise-async 发送后台邮件，队列已满但邮件未处理

> ID：13452020
> 
> 赞同：11
> 
> 时间：2012-11-19T10:35:51.727
> 
> 标签：ruby-on-rails-3, devise, sidekiq

我目前正在构建一个 Rails 平台，并且我已经使用设计进行身份验证，现在想使用 sidekiq 将默认设计电子邮件移动到后台进程中。我为此使用了 devise-async 并完成了以下操作：

添加了 devise_async.rb 文件：

```
#config/initializers/devise_async.rb
Devise::Async.backend = :sidekiq 
```

在设计模型中添加了 async 命令：

```
#user.rb
devise :database_authenticatable, :async #etc. 
```

宝石的版本如下：

```
Devise 2.1.2
Devise-async 0.4.0
Sidekiq 2.5.3 
```

我遇到的问题是电子邮件在 sidekiq 队列中传递，但工作人员从不执行发送电子邮件。我也看过[devise async not working with sidekiq](https://stackoverflow.com/questions/12361077/devise-async-is-not-working-with-sidekiq)，他似乎也有同样的问题。但我认为我对 hostname 命令没有问题。

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-21T09:21:59.487

答案相当简单。你只需要告诉 sidekiq 使用`mailer`队列，通过使用`bundle exec sidekiq -q mailer`. 这样，邮件队列将被处理，没有选项 sidekiq 将仅依赖`default`队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-09T18:13:47.513

在 2019 年，由于**device-async**不是最新的，并且如果您有 ActiveJob 和 sidekiq 设置，请在[此处完成文档](https://edgeguides.rubyonrails.org/active_job_basics.html)。最简单的解决方案是覆盖与事务邮件相关的设备**send_devise_notification实例方法，如下**[所示](https://www.rubydoc.info/github/plataformatec/devise/Devise/Models/Authenticatable#send_devise_notification-instance_method)

```
class User < ApplicationRecord
  # whatever association you have here
  devise :database_authenticatable, :confirmable
  after_commit :send_pending_devise_notifications
  # whatever methods you have here

 protected
  def send_devise_notification(notification, *args)
    if new_record? || changed?
      pending_devise_notifications << [notification, args]
    else
      render_and_send_devise_message(notification, *args)
    end
  end

  private

  def send_pending_devise_notifications
    pending_devise_notifications.each do |notification, args|
      render_and_send_devise_message(notification, *args)
    end

    pending_devise_notifications.clear
  end

  def pending_devise_notifications
    @pending_devise_notifications ||= []
  end

  def render_and_send_devise_message(notification, *args)
    message = devise_mailer.send(notification, self, *args)

    # Deliver later with Active Job's `deliver_later`
    if message.respond_to?(:deliver_later)
      message.deliver_later
    # Remove once we move to Rails 4.2+ only, as `deliver` is deprecated.
    elsif message.respond_to?(:deliver_now)
      message.deliver_now
    else
      message.deliver
    end
  end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T04:45:39.653

Devise 现在支持此功能 [https://github.com/heartcombo/devise#activejob-integration](https://github.com/heartcombo/devise#activejob-integration)

```
class User < ApplicationRecord

  devise ...

  # Override devise: send emails in the background
  def send_devise_notification(notification, *args)
    devise_mailer.send(notification, self, *args).deliver_later
  end

end 
```

# php - Magento - 在自定义模块中处理所见即所得

> ID：13452024
> 
> 赞同：1
> 
> 时间：2012-11-19T10:35:58.263
> 
> 标签：php, magento

我创建了一个包含所见即所得文件的 Magento 模块。当我使用所见即所得的“插入图像”按钮时，我得到以下代码：

```
<img src="{{media url=" wysiwyg/slide.jpg"}}" alt=""/> 
```

在图像路径之前有空格（这也是它在 CMS 中的工作方式）。我正在尝试使用以下代码处理此文件：

```
$collection = Mage::getModel('slideshow/slide')->getCollection()->addPositonSort()->addStoreFilter(Mage::app()->getStore())->getItems();     
foreach ($collection as $slide) {    
    $contentToParse = $slide->getImage(); 
    $helper = Mage::helper('cms');
    $processor = $helper->getBlockTemplateProcessor();
    $html = $processor->filter($contentToParse);
    echo $html;
} 
```

但它会在图像路径中保留空格：

```
<img src="http://www.mydomain.com/media/ wysiwyg/slide1.jpg" alt=""/> 
```

并且图像没有显示。

我应该如何处理这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:07:06.133

请试试这个

```
`<img src="{{skin url="wysiwyg/slide.jpg"}}" alt="" />` 
```

代替

```
<img src="{{media url=" wysiwyg/slide.jpg"}}" alt=""/> 
```

有用

# javascript - 将 document.write 存储在一个不适用于 JavaScript 的变量中

> ID：13452033
> 
> 赞同：0
> 
> 时间：2012-11-19T10:36:31.547
> 
> 标签：javascript, dom

以下程序按预期打印“Hello world”

```
var print = function(t){
  document.write(t);
};

var printAlias = print;

printAlias("Hello world"); 
```

但是当我使用与 document.write 相同的技术时，它不起作用。

```
var write = document.write ;
write("Something); 
```

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:38:58.687

它不起作用，因为您`this`在`write`. 您可以使用该[方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)`document`调用以将其取回：`write`[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)

```
write.call(document, "Something"); 
```

在您的第一个示例中，您只是将调用包装`document.write`在另一个函数中，但调用本身会保留上下文，因为您调用`write`的是`document`.

因此，如果您的目标是更短的代码，您不妨坚持使用通常的或您的包装函数！或者（感谢@Esailija）您可以在创建变量时将上下文[绑定到：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)`document``write`

```
var write  = document.write.bind(document); 
```

# javascript - 拖放后可拖动的项目可以变为可拖放的吗？

> ID：13452039
> 
> 赞同：2
> 
> 时间：2012-11-19T10:36:44.387
> 
> 标签：javascript, jquery-ui, draggable, droppable

我正在使用 jqueryui。我有可拖动的项目和可放置的区域。当我将项目放入可放置区域时，放置的项目应该是可放置的。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:25:37.477

是的，这是可能的。请看一下这个[JQFAQ.com](http://jqfaq.com/can-draggable-item-becomes-droppable-after-drop/)主题，这将帮助您在拖放后将可拖动项目更改为可放置。还有一些常见问题解答。

我已发表评论以了解代码。

# java - Facebook SDK 授权适用于手机，但不适用于平板电脑

> ID：13452040
> 
> 赞同：1
> 
> 时间：2012-11-19T10:36:50.970
> 
> 标签：java, android, facebook

目前我正在尝试在我的 Android 应用程序中实现 Facebook SDK。我按照官方教程进行操作，至少在我的 Galaxy S2 上是这样。我可以授权自己并将消息发布到我的墙上。但是当我在我的 Acer 平板电脑上尝试时，我得到了

```
11-19 11:15:54.160: W/System.err(7224): java.lang.UnsupportedOperationException: Session: an attempt was made to reauthorize a session that is not currently open.
11-19 11:15:54.160: W/System.err(7224):     at com.facebook.Session.reauthorize(Session.java:1088)
11-19 11:15:54.160: W/System.err(7224):     at com.facebook.Session.reauthorizeForPublish(Session.java:542)
11-19 11:15:54.160: W/System.err(7224):     at de.lochmann.unnuetze.fakten.FacebookConnect.postToWall(FacebookConnect.java:199) 
```

我的问题可能与[android facebook sdk - Session: an attempt was made to reauthorize a session that has a pending request](https://stackoverflow.com/questions/13267279/android-facebook-sdk-session-an-attempt-was-made-to-reauthorize-a-session-tha)相关，但由于没有有效的答案，我想我会再试一次。

我的代码的重要部分：

```
 if (session != null){
        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions)) {
            this.pendingPublishReauthorization = true;
            Session.ReauthorizeRequest reauthRequest = new Session.ReauthorizeRequest((Activity) _ctx, PERMISSIONS).setRequestCode(REAUTH_ACTIVITY_CODE);
            try {
                session.reauthorizeForPublish(reauthRequest);   
            } catch(UnsupportedOperationException uoe) {
                uoe.printStackTrace();
                Toast.makeText(this._ctx, "Error,  Reauthorization failed",Toast.LENGTH_LONG).show();
            }
            return;
        }

        etc...
    } 
```

你知道我错过了什么吗？在此先感谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:19:35.620

这里的问题是您尝试在会话未处于 OPEN 状态时调用 reauthorize。仅检查 getPermissions() 不足以保证会话是打开的。你应该做的是检查会话是否打开（通过 session.isOpen()），如果没有，首先调用各种打开方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:20:39.853

我认为您必须先检查会话是否已打开，因此只需添加：

`if(!session.isOpened()){ session.reauthorizeForPublish(reauthRequest);
}`

希望我的回答能帮助你.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:28:35.260

我假设您正在关注[https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/publish-to-feed/)。我和你有类似的问题。我创建了一个基本 Activity，它包含了发布以提供和重新授权（如果需要）的逻辑。然后在需要该功能的活动中，我从这个基本活动继承并使用发布逻辑。我有错误，因为我忘记调用 super.onActivityResult

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
            ....
     } 
```

这为我解决了这个问题。

# java - 在 JSF 中处理图像

> ID：13452041
> 
> 赞同：0
> 
> 时间：2012-11-19T10:36:52.233
> 
> 标签：java, performance, jsf, image-processing

我目前正在开发一个网站，其中多个图像将显示在一个页面上。鉴于性能，我正在寻找处理这些图像的最佳方法。

首先，我将解释我的需求。网站的后端由一个 CMS 组成，可以在其中上传图像（并且可以由用户调整大小，以便图像具有所需的宽度/高度比）。这些图像将显示在网站的多个页面上，由（希望）许多用户请求。

其次，我将简要介绍一下我的环境。我在 Java EE 中开发，使用 JSF 作为前端。我正在使用多个库，例如 Prime Faces 等。

我做了一些研究，似乎有几十种解决方案，但我不知道该往哪个方向搜索。例如：

*   将图像保存在数据库中
*   使用例如文件流将图像保存为静态图像

简而言之：

*   在这种情况下，哪种保存和请求图像的方式最好？
*   你会建议哪个图书馆在这方面为我服务？
*   是否有手动调整图像大小的 JSF 解决方案？
*   ImageJ 会是生成缩略图的最佳解决方案吗？如果不是，那会是什么？

如果需要任何其他细节，我很乐意提供。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:39:54.223

在它成为一个问题之前，我不会担心性能。我可能会更担心可审计性、可维护性等。

但是，为了使未来的更改变得容易，将您的图像存储抽象化，以便您可以轻松地用数据库系统（或云存储解决方案，或，或... ）。

这样，您可以轻松地将一个替换为另一个，并在需要时进行比较/对比，或者在以后简单地更换您的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:23:01.127

所以..

*   将图像保存为文件是最好的
*   经过一些研究，PrimeFaces 似乎提供了 ImageCropper
*   文件上传可以使用 PrimeFaces 的 FileUpload 来实现

但是，我仍然看到很多关于 Java 图像处理和最佳工具的讨论。有人说 ImageJ 会很棒，其他人则不然。有什么理由我应该选择一个或另一个？

# r - 如何将中值垂直线添加到晶格密度图的面板？

> ID：13452042
> 
> 赞同：1
> 
> 时间：2012-11-19T10:36:51.533
> 
> 标签：r, lattice

我正在使用长格式的数据框在`lattice`. 现在我想在每个面板中的 x 值中值添加一条垂直线。我在`dotplot`（[http://r.789695.n4.nabble.com/how-to-add-a-vertical-line-for-each-panel-in-a-lattice-dotplot- with-log-scale-td4632513.html](http://r.789695.n4.nabble.com/how-to-add-a-vertical-line-for-each-panel-in-a-lattice-dotplot-with-log-scale-td4632513.html)），但这对我不起作用。这是我的代码：

```
data(Chem97, package="mlmRev")

densityplot(~gcsescore | factor(score), data=Chem97,
        panel=function(...){
          panel.densityplot(...)
          median.values <- median(x) 
          panel.abline(v=median.values, col.line="red") 
        }) 
```

错误是：`Object x not found`。所以我尝试了以下方法：

```
panel=function(x,...){
          panel.densityplot(...)
       } 
```

我将`x`作为参数添加到面板函数的那一刻，我得到了错误`Error using packet 1 (2, 3 etc.). x is missing`。

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:46:24.930

我终于找到了解决方案：

```
densityplot(~gcsescore | factor(score), data=Chem97,
    panel=function(x,...){
      panel.densityplot(x,...)
      panel.abline(v=quantile(x,.5), col.line="red") 
    }) 
```

# asp.net - asp.net + 列表框 + 值更改

> ID：13452044
> 
> 赞同：0
> 
> 时间：2012-11-19T10:37:01.833
> 
> 标签：asp.net, .net

我在 asp.net 中有一个列表框

```
 <asp:ListBox ID="ListBox1" class="listItem" runat="server" 
 onselectedindexchanged="ListBox1_SelectedIndexChanged">
 <asp:ListItem>1</asp:ListItem>
 <asp:ListItem>2</asp:ListItem>
 <asp:ListItem>3</asp:ListItem>
 </asp:ListBox> 
```

我想在有人更改它的值时触发一个函数...我尝试过的代码是

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    Label6.Text = Label6.Text + "hello";
} 
```

这里有什么问题。。

通过将自动回发设置为真，我的问题得到了解决，但是每次我更改其值时都会重新加载页面，因为每次自动回发（页面上的图像数量）都会重新加载大量数据。即使我输入了以下代码在页面加载中

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
        }
    } 
```

但它没有成功...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:42:21.690

这里的问题是您希望`SelectedIndexChanged`事件立即触发。但默认情况下`ListControl`'[`AutoPostBack`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.autopostback.aspx)属性设置为`false`.

> `true`如果用户更改列表选择时自动回发到服务器；否则，`false`。**默认值为 false**。

所以将其设置为 true：

```
<asp:ListBox ID="ListBox1" AutoPostBack="true" class="listItem" runat="server" 
 onselectedindexchanged="ListBox1_SelectedIndexChanged">
 <asp:ListItem>1</asp:ListItem>
 <asp:ListItem>2</asp:ListItem>
 <asp:ListItem>3</asp:ListItem>
 </asp:ListBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:43:12.327

`AutoPostBack="true"`缺少添加它`ListBox1`

# php - 随机显示 这是我将用来创建投票的片段。有没有一种简单的方法可以让这些问题在每次访问时随机出现？我想把它放在某种 PHP 或 javascript 数组中。有人可以指点我一个很好的教程来学习如何做到这一点吗？如果您的 html 是由 php 构建的（您通过使用标签 php 给出提示，但在其他情况下省略...）您可以将 li 标签放在一个数组中并在输出它们之前对其进行排序。 如果该 html 是静态的（或者不是由您控制的某些脚本产生的），那么您可以使用 javascript 在客户端重新排序 li 标签。 phpjavascriptjqueryajax 4 2 回答 2 This answer is useful 1 如果您的 html 是由 php 构建的（您通过使用标签 php 给出提示，但在其他情况下省略...）您可以将 li 标签放在一个数组中并在输出它们之前对其进行排序。 如果该 html 是静态的（或者不是由您控制的某些脚本产生的），那么您可以使用 javascript 在客户端重新排序 li 标签。 于 2012-11-19T10:43:37.930 回答 This answer is useful 0 找到了。Array Shuffle 做到了。 http://www.w3schools.com/php/func_array_shuffle.asp 于 2012-11-19T11:07:39.397 回答 Related 2 mercurial - Mercurial Hgflow：向发布分支添加新功能？ 1 windows-xp - 最小证书密钥长度和 WinXP 2 python - 当我尝试部署时，Google App Engine 会抛出这个 InvalidURL("nonnumeric port: '%s'" % host[i+1:]) 异常。我如何解决它？ 1 android - 如何修改应用程序“标题”中的“title_activity_main”文本颜色？ 7 ruby - 使用 step 循环遍历数组 1 java - GroupLayout 对齐问题 1 php - klout api 还没有完成吗？让 issus 通过它获取数据 2 android - Android相机闪光灯关闭后无法打开 11 iphone - 从另一个类调用时，对象为零 2 c# - 如何防止将 Windows-1252 参数转换为 Unicode 字符串？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13452052
> 
> 赞同：-6
> 
> 时间：
> 
> 标签：php, javascript, jquery, ajax

这是我将用来创建投票的片段。有没有一种简单的方法可以让这些问题在每次访问时随机出现？我想把它放在某种 PHP 或 javascript 数组中。有人可以指点我一个很好的教程来学习如何做到这一点吗？

```
<div id="pollWrap">
<form action="inc/functions.php?action=vote" method="post" name="pollForm">
<h3>Poll Question 1</h3>
<ul>
<li><input id="pollRadioButton1" name="pollAnswerID" type="radio" value="1" /> Answer1 for Poll1</li>
<li class="pollChart pollChart1">&nbsp;</li>
<li><input id="pollRadioButton2" name="pollAnswerID" type="radio" value="2" /> Answer2 for Poll1</li>
<li class="pollChart pollChart2">&nbsp;</li>
</ul>
<input id="pollSubmit" name="pollSubmit" type="submit" value="Vote" /> <img alt="Ajax Loader" id="pollAjaxLoader" src="ajaxLoader.gif" /></form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:43:37.930

如果您的 html 是由 php 构建的（您通过使用标签 php 给出提示，但在其他情况下省略...）您可以将 li 标签放在一个数组中并在输出它们之前对其进行排序。

如果该 html 是静态的（或者不是由您控制的某些脚本产生的），那么您可以使用 javascript 在客户端重新排序 li 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:07:39.397

找到了。Array Shuffle 做到了。 [http://www.w3schools.com/php/func_array_shuffle.asp](http://www.w3schools.com/php/func_array_shuffle.asp)

# javascript - 如何使用 Firebug 或任何其他扩展查找 Javascript 代码触发表单提交的内容？

> ID：13452055
> 
> 赞同：1
> 
> 时间：2012-11-19T10:37:34.867
> 
> 标签：javascript, dom-events, form-submit, firebug

我有一个奇怪的错误 - 网页加载后不久，正在提交一个表单（表单提交显然是由 Javascript 代码触发的）。问题是我找不到提交表单的代码。是否可以使用 Firebug 或任何其他扩展程序找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:40:13.973

在 Chrome 开发人员工具中，如果您在没有在断点或其他任何地方停止时单击“暂停”按钮，我体验到它会在下一个要执行的脚本片段上暂停。可能会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:32:53.497

您可以尝试将以下脚本添加到 <head> 元素的最顶部。

```
for (var i= 0; i < document.forms.length; i++) {
    document.forms[i].onsubmit = function(e){
        console.log(e);
        console.trace();
        alert("wait a minute...");
    };
} 
```

该代码应该拦截页面上的所有表单提交。

提交表单后，您将在 firebug 控制台中找到事件对象转储和调用堆栈跟踪，同时警报阻塞请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:35:57.947

我解决了这个问题，这可以通过添加来完成

```
form.submit = function(event) {console.trace()} 
```

因此，我们为表单重新定义了提交处理程序，而不是被提交，它会将跟踪信息打印到控制台。

# android - 可扩展列表适配器根本不刷新

> ID：13452057
> 
> 赞同：1
> 
> 时间：2012-11-19T10:38:01.003
> 
> 标签：android, expandablelistview, expandablelistadapter

我正在使用一个可扩展列表，只要用户的存在发生变化，它就会显示用户在聊天中的存在（在运行时），我正在发送广播以刷新适配器，但它根本不刷新.

这是代码

设置适配器

```
/** Set Adapter here */
        adapter = new UserMenuAdapter(this, groupNames, childs);
        setListAdapter(adapter);
        object = this; 
```

我使用 sendbroadcast 方法从服务中调用此接收器，并且我已经检查了它的 onReceive 但列表没有刷新。

```
BroadcastReceiver UpdateList = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {

            groupChileItem();
            adapter.notifyDataSetChanged();

        }
    }; 
```

//groupChileitem ( 方法 )

```
private void groupChileItem(){
        /***###############GROUP ARRAY ############################*/
        final ArrayList<String> groupNames = new ArrayList<String>();

        if(XMPPConn.mfriendRequestList.size() > 0){
            groupNames.add("Request ("+XMPPConn.mfriendRequestList.size()+")"); 
        }else{
            groupNames.add("Request (0)");
        }
        chatUser = dbHelper.getChatUser();
        groupNames.add("Chats ("+chatUser.size()+")");  
        groupNames.add("Contacts (" + XMPPConn.mfriendList.size() + ")");
        groupNames.add("CGM Groups (" + XMPPConn.mGroupList.size() + ")");
        if(XMPPConn.mfriendPendingList.size() > 0){
            groupNames.add("Pending ("+XMPPConn.mfriendPendingList.size()+")");
        }else{
            groupNames.add("Pending (0)");
        }

        mXMPPConn.getGroup();
        categoryList = dbHelper.getAllCategory();
        /**Group From Sever*/
        if (XMPPConn.mGroupList.size() > 0) {
            for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                mXMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                groupNames.add(XMPPConn.mGroupList.get(g).groupName + "("
                        + XMPPConn.mGroupContactList.size()+ ")");
            }
        } 
        this.groupNames = groupNames;

        /*** ###########CHILD ARRAY * #################*/
        ArrayList<ArrayList<ChildItems>> childs = new ArrayList<ArrayList<ChildItems>>();
        ArrayList<ChildItems> child = new ArrayList<ChildItems>();
        /**child for request frieds*/
        if(XMPPConn.mfriendRequestList.size() > 0){
            for(int i = 0; i < XMPPConn.mfriendRequestList.size(); i++){
                child.add(new ChildItems(XMPPConn.mfriendRequestList.get(i).friendNickName,
                        "Waiting for Authorization",0,null));
            }
        }else{
            child.add(new ChildItems("No Request list","",0,null));
        }   
        childs.add(child);
        /**Child for chat */
        child = new ArrayList<ChildItems>();
        if(chatUser.size() > 0){
            for(int i = 0; i < chatUser.size(); i++){
                child.add(new ChildItems(userName(chatUser.get(i)), "",0,null));
            }
        }else{
            child.add(new ChildItems("--No History--", "",0,null));
        }       
        childs.add(child);
        /**Child for contact list*/
        child = new ArrayList<ChildItems>();
        child.add(new ChildItems("", "",0,null));
        if (XMPPConn.mfriendList.size() > 0) {
            for (int n = 0; n < XMPPConn.mfriendList.size(); n++) {
                child.add(new ChildItems(XMPPConn.mfriendList.get(n).friendNickName,
                        XMPPConn.mfriendList.get(n).friendStatus, 
                        XMPPConn.mfriendList.get(n).friendState,
                        XMPPConn.mfriendList.get(n).friendPic));
            }
        }
        childs.add(child);
        /************** CGM Group Child here *********************/
        child = new ArrayList<ChildItems>();
        child.add(new ChildItems("", "",0,null));

        if (XMPPConn.mGroupList.size() > 0) {
            for (int grop = 0; grop < XMPPConn.mGroupList.size(); grop++) {
                child.add(new ChildItems(
                        XMPPConn.mGroupList.get(grop).groupName + " ("
                        + XMPPConn.mGroupList.get(grop).groupUserCount
                        + ")", "",0,null));
            }
        }
        childs.add(child);

        /**Pending friend*/
        child = new ArrayList<ChildItems>();
        if(XMPPConn.mfriendPendingList.size()> 0){
            for(int i = 0; i < XMPPConn.mfriendPendingList.size(); i++){
                child.add(new ChildItems(XMPPConn.mfriendPendingList.get(i).friendNickName,
                        "Waiting for Authorization",0,null));
            }
        }else{
            child.add(new ChildItems("No Pending list","",0,null));
        }
        childs.add(child);
        /************************ Group Contact List *************************/
        if (XMPPConn.mGroupList.size() > 0) {
            for (int g = 0; g < XMPPConn.mGroupList.size(); g++) {
                /** Contact List */
                mXMPPConn.getGroupContact(XMPPConn.mGroupList.get(g).groupName);
                child = new ArrayList<ChildItems>();
                for (int con = 0; con < XMPPConn.mGroupContactList.size(); con++) {
                    child.add(new ChildItems(
                            XMPPConn.mGroupContactList.get(con).friendNickName,
                            XMPPConn.mGroupContactList.get(con).friendStatus,0,null));
                }
                childs.add(child);
            }
        }
        this.childs = childs;

    } 
```

有人请告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:08:20.330

我会坚持让您尝试再次设置适配器而不是使用`notifyDataSetChanged()`

所以你可以尝试使用，

```
setListAdapter(adapter); 
```

而不是使用，

```
adapter.notifyDataSetChanged(); 
```

# google-apps-script - 使用 Google 站点中的 Google Apps 脚本获取并打开存储在电子表格数据库中的用户特定 URL

> ID：13452058
> 
> 赞同：1
> 
> 时间：2012-11-19T10:38:02.720
> 
> 标签：google-apps-script, google-sheets, google-sites

我有一个雄心勃勃的第一个 Google Apps 脚本项目，可用于 Google 网站。

使用电子表格数据库，我有一个谷歌用户列表，每个用户都有一个指向非谷歌网站服务的唯一 URL。

我需要做的是在 Google 站点中放置一个链接，该链接将

*   根据登录用户获取当前用户ID
*   根据 Google 用户查询唯一 URL 的电子表格数据库
*   在另一个选项卡/窗口中打开唯一的 url

非常感谢任何指针或代码片段，尤其是在最小化用户授权方面。由于它是一个 Google Apps 域，如果可能的话，该脚本可以被预先授权为受信任的脚本。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:20:28.900

我确实写了一个网站小工具，它完全符合你的要求，（除了用户必须输入他们的名字，因为该网站是公开的，我想避免询问授权），你会在[这里](https://sites.google.com/site/appsscriptexperiments/home/this-site-gadgets)找到代码和解释，我不是将在此处重现整个代码，但简而言之，它允许输入名称（甚至是部分名称）并在电子表格列表中查找任何匹配项，然后显示指向单个 url 的链接。也可以看到它在同一页面上工作。

![在此处输入图像描述](../Images/0459ceed2022d7d9ed37e0ff8bd3d627.png) （见页面底部，它看起来像这样）

要回答您的第二点，没有办法避免授权过程，在与项目成员的几次讨论中已经提到了“域中的受信任源”的想法，但目前还不可能。

# java - 无法将文件上传到数据库

> ID：13452061
> 
> 赞同：0
> 
> 时间：2012-11-19T10:38:13.170
> 
> 标签：java, blob

我正在使用以下代码将文件上传到数据库中，该代码与图像一起工作正常，而对于其他文件不起作用，我最后发布了堆栈跟踪。

我的第二个值是 blob

```
 String strFilePath = null;
   Hashtable<Object,Object> fileTable = null; 
   InputStream input = null; 
   CosUploadFile file = null;

fileTable = multiPartFormData.getFiles();
file = (CosUploadFile)fileTable.get("filepath");
input =file.getInpuStream();

prepare = connection.prepareStatement("insert into all_files values(?,?,?)");
prepare.setString(1, strFileSplit[0]);
prepare.setBinaryStream(2,input);
prepare.setString(3,strFileSplit[1]);
prepare.execute(); 
```

错误 ：

```
J2CA0206W: A connection error occurred.  To help determine the problem, enable the Diagnose Connection Usage option on the Connection Factory or Data Source.
J2CA0056I: The Connection Manager received a fatal connection error from the Resource Adapter for resource datasource. The exception is: java.sql.SQLRecoverableException: Io exception: Connection reset by peer: socket write error:java.net.SocketException: Connection reset by peer: socket write error
     com.ibm.websphere.ce.cm.StaleConnectionException: Io exception: Connection reset by peer: socket write error 
```

这是我尝试上传 doc 文件时的堆栈跟踪。对此我该怎么办。

编辑：以下是我的连接代码

```
DBConnect dbConnect = new DBConnect();
Connection connection = dbConnect.connect(); 
```

数据库连接类

```
 public Connection connect() 
    {   
    Connection con = null;
    try
    {
    InitialContext context = new InitialContext();
    DataSource datasource = (DataSource)context.lookup("datasource");
    con = datasource.getConnection("TRAIN2012", "xyz123");
    return con;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:56:23.580

尝试以下方法，但是最好将图像存储在文件系统中并将文件的位置存储在数据库中。[在这里](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)可以找到关于这个的冗长讨论 。

```
FileInputStream fis = null;

File image = new File("\\yourpath\test.PNG");
fis = new FileInputStream(image);
prepare.setBinaryStream(2,fis,(int)image.length());
prepare.execute(); 
```

# tdd - 我将如何在 ios 中测试我的私有方法？

> ID：13452064
> 
> 赞同：0
> 
> 时间：2012-11-19T10:38:19.297
> 
> 标签：tdd

我正在使用 tdd 在 ios5 中开发应用程序，我应该如何测试私有方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:41:08.777

您应该对测试公共接口感到满意，或者使用某种反射机制来获得对测试中私有方法的后门访问。

我是一名 Java 开发人员；我就是做这个的。

# javascript - 检测和处理img标签内的400个错误

> ID：13452065
> 
> 赞同：0
> 
> 时间：2012-11-19T10:38:22.607
> 
> 标签：javascript, jquery, html, facebook

我正在开发一个将用户的 Facebook 个人资料图片 ( [http://graph.facebook.com/(fb](http://graph.facebook.com/(fb) id)/picture) 嵌入到 img 标签中的应用程序。它的工作原理......在大多数情况下。但是，当我请求个人资料图片时，偶尔会出现 400 错误（[请参阅此](https://stackoverflow.com/questions/7182954/400-error-for-profile-image-every-other-time-every-time)）

有什么方法可以用 Javascript/JQuery 检测到这些 400 错误？现在它们被显示为一个破碎的图像......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:46:38.763

`onerror`使用事件非常简单。

我们可以简单地在 JavaScript 中创建一个新图像并为其附加两个事件 -`onload`和`onerror`. 然后设置图像`src`将使浏览器下载图像，`onload`如果它是真实图像，则触发事件，否则`onerror`。

```
var img = new Image();

// This URL will return an image an fire `onload`
img.src = 'http://placekitten.com/300/300';

// Replace the line above with this one to load a fake/unavailable image, which will fire the `onerror` event.
// img.src = 'http://mybrokenurl';

img.onload = function() {
    document.body.appendChild(img);
}

img.onerror = function() {
    alert('Error loading image');
}​ 
```

演示：http: [//jsfiddle.net/amustill/vSJ4F/](http://jsfiddle.net/amustill/vSJ4F/)

# javascript - 如何在现代 Web 应用程序中导航

> ID：13452078
> 
> 赞同：1
> 
> 时间：2012-11-19T10:39:33.367
> 
> 标签：javascript, web-applications

我最近看到一些网络应用程序通过单击按钮来更改页面的内容和有效状态。然后他们有链接可以导航到应用程序的另一部分。有时我想通过按浏览器的后退按钮返回，我希望页面处于我离开时的状态。但是我经常看到我第一次进入那个页面时的内容。

在现代 Web 应用程序中构建导航的好方法是什么，以便后退按钮返回给您页面的上一个（最后一个）状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:48:46.987

这篇文章可能会有一些答案。它详细介绍了如何使用 HTML5 的 pushState 和 popState 在使用前进/后退时维护 Web 应用程序中的状态，而无需完全刷新页面。

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:52:18.500

我不确定你所说的“现代”是什么意思，但你可能希望在[这里](http://www.hunlock.com/blogs/Mastering_The_Back_Button_With_Javascript)查看这个讨论（关于如何控制浏览器历史的操作以及为什么[有时它不是邪恶的]），并查看[这个](http://benalman.com/projects/jquery-bbq-plugin/)jQuery 插件（`hashable`历史和状态）。

对于相关的 SO 问题：[检查这个](https://stackoverflow.com/questions/4840457/can-javascript-hook-and-override-browser-back-and-forward-buttons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:18:19.900

我想您指的是由 AJAX 提供支持的动态单页应用程序。

您可以使用大多数现代浏览器（包括 IE10）支持的*历史*对象的新**PushState()**和**replaceState()**方法，并允许您在不触发页面刷新的情况下操作浏览器的历史记录。这允许您将对象附加到状态，一旦触发*onpopstate*事件，即当用户在浏览器中按下或前进时，您就可以使用该状态。

 **一旦传递了对象，您就可以相应地操作页面。例如，您可以为帖子传递一个唯一 ID，然后使用 AJAX 加载它。

您可以在[Mozilla 开发者网络中了解更多信息](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)**

# ios - 如何使用 ImageMagick 二进制图像？

> ID：13452084
> 
> 赞同：0
> 
> 时间：2012-11-19T10:39:50.510
> 
> 标签：ios, image-processing, imagemagick

我有一张这样的图片![板 1](../Images/42bcd2534bcec164bc8bd7bd15e798e4.png)

只有黑白彩色图像。

我遇到了这个[ImageMagick 资源](http://www.imagemagick.org/download/iOS/)

1.  这可以用来从上面给定的图像生成黑白图像吗？
2.  用这个好不好？
3.  如果它很好，那么是否有关于“如何使用？”的任何文档或教程。

**更新**

所以从@ale0xB 的建议中得到了最好的解决方案。

这样做不需要第三方 api，因为苹果的 COREIMAGE.FRAMEWORK 最适合做我想做的事情。它的过滤器就像魅力一样工作:)

谢谢你的建议：）

我使用[这个](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIColorMonochrome)图像过滤器。它的速度很快，输出也很好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:55:55.947

为什么要使用 imageMagick 而不是标准的 Core Image 来生成黑白图像？我以前没有使用过它，但我怀疑它在创建过滤器时会比原生框架提供更好的性能。

由于 iOS 6 你真的很容易，看看：[Core Image filters](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)，特别是 CIColorMonochrome，这是你可能感兴趣的。

如果您在应用程序中使用图像，这绝对值得检查：[Core Image Programming Guide](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)

# asp.net-mvc - DevExpress 报告工具栏没有选择报告查看器

> ID：13452086
> 
> 赞同：0
> 
> 时间：2012-11-19T10:39:59.307
> 
> 标签：asp.net-mvc, devexpress, reporting, nan, xtrareport

我设置了我的报告页面，使其全部呈现出来并且完全没有问题，一切都运行得很好:)。

现在，当我想在单击“运行报告”按钮时呈现报告时，问题就来了。这仍然可以很好地呈现，但是工具栏和查看器没有正确连接。当我单击任何页面导航按钮（不是“转到开头/结尾的按钮）时，我从当前页面索引中得到一个 NaN 错误。现在，当呈现报告查看器部分时，这些东西是自动生成的，因为工具栏是已经渲染它似乎有问题。这是我的索引和 ajax 调用，供您参考，看看是否有人可以提供帮助。

```
<h2>Basic Error Report</h2>
@Html.Partial("_BasicErrorReportFilters")

<input type="button" value="RunReport" id="runReportBtn" onclick="RunReport()"/>
@Html.DevExpress().ReportToolbar(settings =>
    {
        settings.Name = "ReportViewerToolbar";
        settings.ReportViewerName = "reportViewer1";
    }).GetHtml()
<div id="reportDiv"></div> 
```

阿贾克斯调用：

```
$.ajax({
            type: "POST",
            url: '@Url.Action("ReportViewerPartial", "BasicError")',
            data: queryString,
            statusCode: {
                200: function (r) {

                    $('#reportDiv').html(r);
                    var dxo = new ClientReportToolbar('ReportViewerToolbar');
                    window['ReportViewerToolbar'] = dxo;
                    dxo.menuID = 'ReportViewerToolbar_Menu';
                    dxo.reportViewerID = 'reportViewer1';

                    dxo.InlineInitialize();

                },
                400: function(r) {

                },
                500: function(r) {

                }
            }
        });

    } 
```

您会看到我正在重新初始化 javascript 中的工具栏。在我把它放进去之前，工具栏根本不会吸引观众。

有趣的是，一旦我遇到 NaN 错误，我就可以正确使用转到开始和结束按钮，一旦我使用了其中一个，所有导航/导出/打印按钮都可以正常工作。提前感谢您的帮助。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:49:17.160

我发现了这个问题。

似乎在重新初始化时，有这串代码：

```
 var dxo = new ClientReportToolbar('ReportViewerToolbar');
                    window['ReportViewerToolbar'] = dxo;
                    dxo.menuID = 'ReportViewerToolbar_Menu';
                    dxo.reportViewerID = 'reportViewer1'; 
```

在该代码块中不起作用，但是将其移到该块之外并且只在其中放置 dxo.initialize 就可以了。

干杯

# sql - 当一个值为空时，不匹配不被拾取

> ID：13452089
> 
> 赞同：2
> 
> 时间：2012-11-19T10:40:02.007
> 
> 标签：sql, null

我有一个简单的 SQL 查询，其中在两个表之间进行比较以查找不匹配的值。昨天，我们发现了一个问题，其中一个字段为空而另一个字段不为空，但未检测到不匹配。据我所知，逻辑一直有效，直到昨天。下面是 SQL 的逻辑：

```
CREATE TABLE Table1
(UserID INT,PlayDate DATETIME)

CREATE TABLE Table2
(UserID INT,PlayDate DATETIME)

INSERT INTO Table1 (UserID)
SELECT 5346

INSERT INTO Table2 (UserID,PlayDate)
SELECT 5346,'2012-11-01'

SELECT a.UserID
FROM   Table1 a
INNER JOIN
       Table2 b
ON     a.UserID = b.UserID
WHERE  a.PlayDate <> b.PlayDate 
```

即使 PlayDate 值不同，也不会返回任何值。

我现在更新了 WHERE 阅读：

```
WHERE  ISNULL(a.PlayDate,'') <> ISNULL(b.PlayDate,'') 
```

SQL 中是否有某个设置可能已被更改以导致原始代码不再获取字段的差异？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:41:23.573

```
NULL <> anything 
```

不是。`unknown`_ `true`SQL 使用三值逻辑（假/真/未知），谓词需要`true`在`where`子句中计算以返回要返回的行。

事实上，在标准 SQL 中，`NULL`除了`IS [NOT] NULL`yield之外的任何比较`unknown`。包含`WHERE NULL = NULL`

您没有说明 RDBMS，但如果它支持`IS DISTINCT FROM`您可以使用它，或者如果您使用的是 MySQL，它有一个空安全相等运算符[`<=>`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal-to)，您可以否定。

你说你认为它以前的行为不同。如果您在 SQL Server 上，您可能会以[`ANSI_NULLS`](http://msdn.microsoft.com/en-us/library/ms188048.aspx)某种方式使用不同的设置，但此设置已被弃用，您应该重写任何依赖它的代码。

`IS DISTINCT FROM`您可以在 SQL Server中模拟`WHERE EXISTS (SELECT a.PlayDate EXCEPT SELECT b.PlayDate)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T10:28:14.567

甚至 NULL 也不能等于 NULL。

*   以下是两个不起作用的常见查询：

> `select * from table where column = null;`
> 
> `select * from table where column <> null;`

*   没有大于或小于`NULL`s 的相等或不等的概念。`NULL`相反，在讨论s时，只能说“是”或“不是”（没有“相等”这个词） 。

## - 编写查询的正确方法

> select * from table where column IS NULL;
> 
> select * from table where column IS NOT NULL;

# facebook-fql - 从照片的 like_info 中仅检索 like_count

> ID：13452092
> 
> 赞同：2
> 
> 时间：2012-11-19T10:40:15.193
> 
> 标签：facebook-fql

我想问一下如何从这个查询中只检索like_count？

```
https://graph.facebook.com/fql?q=SELECT%20like_info%20FROM%20photo%20WHERE%20object_id=447876785249920 
```

结果是

```
{"data": [
  {
     "like_info": {
        "can_like": false,
        "like_count": 2318,
        "user_likes": false
     }
  } 
```

] }

我只想拥有那张特定照片的like_count。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:47:08.923

您可以在查询中将其用作：

```
1\. 从朋友那里选择 uid2，其中 uid1 = me()
2\. SELECT uid FROM page_fan WHERE page_id='PAGE_ID' AND uid IN (
    从朋友那里选择 uid2，其中 uid1 = me()
)
3\. SELECT first_name, last_name, pic_big FROM USER WHERE uid IN(
    选择 uid 从 page_fan WHERE page_id='PAGE_ID' AND uid IN (
        从朋友那里选择 uid2，其中 uid1 = me()
    )
)

```

有关更多详细信息，请访问链接： http: [//www.leftjoin.net/2011/03/getting-list-of-user-friends-who-like-some-page/](http://www.leftjoin.net/2011/03/getting-list-of-user-friends-who-like-some-page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T10:04:13.393

选择喜欢计数的 FQL 查询

```
SELECT like_info.like_count FROM photo WHERE object_id='your photo id' 
```

# jquery - ie6悬停和jquery错误

> ID：13452093
> 
> 赞同：0
> 
> 时间：2012-11-19T10:40:16.190
> 
> 标签：jquery, html, css

谁能明白为什么这在 IE6 中不起作用。悬停图像根本不显示，如果我代替背景颜色也不会显示。我试过绝对和相对路径。如果有人能指出我的错误，我将不胜感激。谢谢你。

CSS

```
.buttonMailTrue:hover {
    width:290px;
    height: 44px;
    background: url('http://localhost/sample/users/images/mail_icon_strip_hover.png') no-repeat;
    background-repeat: no-repeat;
} 
```

JS

```
<script type="text/javascript">
    $(function() {
        $('.buttonMailTrue').hover(function() {
            $(this).addClass('hover');
        }, function() {
            $(this).removeClass('hover');
        });
    });
</script> 
```

HTML

```
<div class='msgTrue buttonMailTrue' data-message='%s' data-subject='%s' data-rowdate='%s' data-from='%s'>
    <img src="images/sml_new_mail_icon.gif" class="mailIcon" alt="" />
    $subject;
    <div style="float:right;margin-right:22px;margin-top:-12px;font-size:9px;">
        $rowdate
    </div><br />
    span style="font-weight:bold;margin-top:50px;">$from</span>
</div>
<br /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:45:50.773

试试这个：

1.  将“.buttonMailTrue:hover”更改为“.hover”
2.  在 SPAN 标签的开头添加一个“<”。
3.  删除“背景重复：无重复；” 来自您的 CSS，因为您要声明它两次。
4.  在 CSS 中添加一些背景位置值。

# footer - 每页的页脚都不一样

> ID：13452094
> 
> 赞同：1
> 
> 时间：2012-11-19T10:40:17.873
> 
> 标签：footer, gaps-in-visuals

我对编码、html 等比较陌生，在此之前只写过两个网站。我是一名专业的平面设计师，我正在尝试一个客户提供的网站。我仍在努力，但遇到了一个我无法解决的问题......

每个页面的页脚似乎都不同，它在主页上是完美的，并且在 about 上似乎还可以（除了下面的间隙：/），但我无法在推荐或联系人上对其进行整理。

任何帮助将不胜感激其当前所在的网站是：[http ://www.eplsdesign.com/grow/index.php](http://www.eplsdesign.com/grow/index.php)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:06:57.833

首先，您在 HTML中使用`<font>`和标记。`<b>`如今，所有样式（字体、颜色、字体粗细等）都应始终通过 CSS 指定。这使得 HTML 更干净，更易于维护。

您的页面看起来不同，因为每个页面的结构都略有不同。在主页上，页脚 div 嵌套在与您的主要内容 div 相同的级别。但是在推荐页面上，页脚实际上是在内容内部。您需要与您的页面结构保持一致以实现一致的外观。摆脱`<font>`和`<b>`标签将帮助您做到这一点。

我建议您在继续之前阅读基本的 HTML 和 CSS。

# javascript - HTML：如何在 HTML 中创建一个真正的“onchange”事件（没有 jquery）？

> ID：13452095
> 
> 赞同：6
> 
> 时间：2012-11-19T10:40:18.387
> 
> 标签：javascript, html, forms, javascript-events

请注意：我不想用`jQuery`这个（否则我喜欢它）

**问题：**我遇到了在用户更改输入字段（例如输入类型=“文本”）后需要执行一些javascript函数的情况。所以我对自己说 - 我记得一个`onchange`事件 -**但** `onchange`事件在用户离开该字段后运行，但我需要调用该函数，例如每次用户在该字段中键入一个字符时。Wowhead 展示了我试图实现[这一](http://www.wowhead.com/search?q=portal%20trainer)目标的好例子（带有占位符“在结果中搜索...”的字段）

**摘要：**我正在寻找一种简单的方法来检测真实`onchange`事件（[不是经典的 HTML](http://www.w3schools.com/jsref/event_onchange.asp)事件）并通过调用 JS 函数而不使用`jQuery`？

提前致谢 ！:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T10:43:36.397

然后使用[onkeyup](https://developer.mozilla.org/en-US/docs/DOM/element.onkeyup)而不是 onchange。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T10:49:00.827

以下是在字段上调用每种类型的 Key Press 的简单方法。

输入类型="文本" onkeypress="myFunction()

在此处获取示例

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onkeypress](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onkeypress)

享受..

您也可以使用 onkeyup 和 onkeydown 代替 onkeypress。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:44:57.597

试过 onkeypress="myFunction()" 还是 onkeyup="myFunction()"？

还有用于 onfocus 和 onblur 进入和离开文本字段的事件:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:50:49.887

您应该使用“输入”事件。如果用户仅通过鼠标修改值，则 keyup 和 keypress 不起作用。

# android - 应用程序未接收到打开相机的广播

> ID：13452097
> 
> 赞同：0
> 
> 时间：2012-11-19T10:40:26.563
> 
> 标签：android, broadcastreceiver, android-camera

我想接收打开相机的广播。如果某些条件为真，我想阻止该过程。

我没有收到打开相机的广播。（我可以为拍摄的新照片获得广播，这不是我想要的。）

这是我的清单文件的一部分：

```
<receiver
            android:name=".HardwareActionListener"
            android:enabled="true"
            android:exported="true" >
            <intent-filter android:priority="1000" >
                <action android:name="android.intent.action.CAMERA_BUTTON" >
                </action>
            </intent-filter>
</receiver> 
```

这是我的文件 HardwareActionListener.java 的一部分

```
System.out.println("Intent action: " + intent.getAction());

if (intent.getAction().equalsIgnoreCase(
                "android.intent.action.CAMERA_BUTTON")) {
            System.out.println("CAMERA Button broadcast received and aborted");
            if(some_condition_true)
                  abortBroadcast();
        } 
```

我已经在 google 和 stackverflow 上搜索了一整天。我尝试了每一种组合。但是我没有因为打开相机而被广播。

我正在使用三星 Galaxy 选项卡进行测试。哪个没有硬件相机按钮。

[这个问题](https://stackoverflow.com/questions/5960663/how-to-listen-android-intent-action-camera-button-broadcast-action-in-android)的一个答案说

> 您不能：意图仅由硬件相机按钮生成，而不是由相机应用程序中的按钮生成。

那么我的清单文件的意图过滤器有什么问题吗？还是由于设备没有硬件相机按钮而导致的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:33:45.670

> 我想接收打开相机的广播。

没有这样的广播。

> 如果某些条件为真，我想阻止该过程。

请使用设备管理 API 来控制对摄像头的访问。

> 这是我的清单文件的一部分

您正在收听 CAMERA 按钮按下，这可能与相机应用程序有任何关系，也可能没有任何关系，并且并非在所有设备上都存在。

> 但是我没有因为打开相机而被广播。

那是因为没有这样的广播。

> 这个问题的一个答案是“你不能：意图仅由硬件相机按钮生成，而不是由相机应用程序中的按钮生成。”

这个答案是正确的。

# c++ - 从网页中检索标签

> ID：13452098
> 
> 赞同：2
> 
> 时间：2012-11-19T10:40:30.773
> 
> 标签：c++, internet-explorer, bho, ihtmldocument2

我正在使用 C++ 为 Internet Explorer 开发一个（浏览器帮助对象）插件。我打算使用 IHTMLDocument2 接口从网页中获取所有标签，识别电话号码并在其旁边添加超链接。

有人可以为我提供一个基本的示例代码，用于从网页中检索所有标签（使用 IHTMLDocument2）或引导我访问某个网页吗？

**更新** 我有另一种使用 bho 向页面添加 javascript 的方法。javascript 可用于添加除电话号码之外的超链接。这是更好的方法吗？

谢谢

# jquery - 在伪类中获取集合索引？（jQuery 1.8+）

> ID：13452100
> 
> 赞同：4
> 
> 时间：2012-11-19T10:40:32.910
> 
> 标签：jquery, pseudo-class

我正在尝试实现一个伪类（在 jQuery 1.8.3 中）。这是代码：

```
(function($) {
    $.extend($.expr[':'], {
        group: $.expr.createPseudo(function(arg) {
            var index = 0;
            return function(element) {
                index += 1;
                var num = parseInt(arg, 10);
                if (isNaN(num)) {
                    return false;
                }
                return (((index-1) % (num*2)) < num);
            }
        })
    });
})(jQuery); 
```

此选择器的目的是将样式应用于“n”个连续的元素组，并且可以像这样使用，以另一种颜色（用“alt”分类）为 tbody（“this”）的每 3 行着色

```
$(this).children(':visible').has('td').filter(':group(3)').addClass('alt') 
```

这对一个人来说效果很好。但是，如果我在几个 tbodies 上进行迭代（使用“ $('..').each” 构造），则索引不会在两者之间重置。这种效果可以在 jquery 1.6 中成功实现，因为我们自然（在底层的“组”函数参数中）有集合内的索引：

```
(function($) {
    $.extend($.expr[':'], {
        group: function(element, index, matches, set) {
            var num = parseInt(matches[3], 10);
            if (isNaN(num)) {
                return false;
            }
            return index % (num * 2) < num;
        }
    });
})(jQuery); 
```

我们如何在 jquery 1.8 中实现相同的效果？

非常感谢您的见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T09:40:16.003

`createPositionalPseudo`在[Sizzle](https://github.com/jquery/sizzle/blob/master/sizzle.js)中调用了一个函数，但它没有公开。通过复制该功能，我可以实际使用它并且它有效。我将其简化为：

```
$.extend($.expr[':'], {
  group: $.expr.createPseudo(function(arg){
    return $.expr.createPseudo(function(seed, matches){
      for (var i=0; i<seed.length; i++) 
        if (i % (arg * 2) >= arg)
          matches.push(seed[i]);
      })
  })
}); 
```

我创建了一个[jsFiddle](http://jsfiddle.net/egb3x/)进行测试。

不知道Sizzle的内部情况，貌似`seed`是伪过滤器要处理的元素列表，`matches`是要返回的列表，表示哪些通过了过滤器。

`createPositionalPseudo`也修改了，但上面的`seed`代码没有。它可能会导致问题，因为我不知道里面是什么，我不确定。但是，它在我的测试中运行良好。

jsFiddle 中的 JavaScript 包含一个`create_group_pseudo_safe`，它没有被简化。如果简化版有任何问题，该安全版本功能应该可以工作。

# java - 查询 LDAP 结构未知的 LDAP 服务器

> ID：13452102
> 
> 赞同：1
> 
> 时间：2012-11-19T10:40:35.960
> 
> 标签：java, spring, ldap, apacheds, ldif

我正在为我的公司使用 Spring 进行 Java 开发。我们正在开发一个具有本地 LDAP 服务器的应用程序。LDAP 服务器将用于获取信息。但是，我们不希望应用程序的用户知道 LDAP 结构/模式。这是因为客户/用户将拥有自己的 LDAP 服务器和自己的 LDAP 结构/模式。

例如，客户/用户将通过用户界面获取信息，方法是提供将用于连接到 LDAP 服务器的 LDAP 服务器详细信息。连接后，他们将能够通过执行查询来获取信息。现在，他们将不知道有关 LDAP 结构的信息。将要编写的代码将通过执行用户查询来完成。如果查询运行，那么它将返回该信息，否则将给出异常。

我面临的问题是：

当你使用 Spring LDAP 时，有一个叫做 AttributesMapper 和 ContextMapper 的东西。为了使用它，我必须传入一个强类型对象。例如：

```
public class EmployeeAttributesMapper implements AttributesMapper {

public EmployeeAttributesMapper() {

}

/**
 * This method maps the Employee Entity to data stored in the LDAP Server through a Attribute.
 * @param attrs the name of the Attribute to get
 * @return the Employee Entity.
 */
public Object mapFromAttributes(Attributes attrs) throws NamingException {
    Employee employee = new Employee();
    employee.setFirstName((String) attrs.get("cn").get());
    return employee;
}
} 
```

上面的代码在根据查询执行时，将仅获取有关 cn 属性的信息，而不获取其他信息。还有其他不需要强类型对象的东西吗？

我不知道该怎么办。

例如，要搜索所有员工：

```
public List getAllEmployees() {
    return ldapTemplate.search("", "(objectclass=person)", new EmployeeContextMapper());
} 
```

这将返回所有员工，但只设置 cn 属性。但是，在客户 LDAP 服务器上，它们可能没有名为 cn 的属性。

做这个的最好方式是什么？我们编写的代码充当用户界面和客户 LDAP 服务器之间的代理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:41:23.437

最简单的答案是将属性的预期用途抽象为属性类型，即 OID 或别名。例如，将“名称”映射到`cn`（通用名称）属性别名，将“名字”映射到属性，将“姓氏”映射`givenName`到`sn`属性，等等。IETF 有许多 RFC，它们描述了推荐用于 LDAP 目录服务器数据库的属性。[inetOrgPerson (RFC2798)](http://tools.ietf.org/html/rc2798)就是一个很好的例子。

如果表示与实现正确分离，用户根本不需要知道数据来自 LDAP 目录服务器，更不用说属性名称是什么了。

# java - 以递归方式使用 FileVisitor？

> ID：13452103
> 
> 赞同：0
> 
> 时间：2012-11-19T10:40:37.313
> 
> 标签：java, performance, filesystems, java-7

我在“旧”方式和“新”更快的 1.7 扫描目录方式之间进退两难。

我需要扫描驱动器上的所有目录并构建类似的树结构。在 1.6 中没有问题（除了慢了 10 倍），但使用 FileFisitor 我有一些大障碍。

我如何事先知道一个目录包含多少项（文件+子目录）？

*   老办法：`File[] files = path.listFiles();`​​就是`files.length`答案。
*   新方法：在回调函数`public FileVisitResult preVisitDirectory(Path path, BasicFileAttributes bfa){}`中，计数在哪里？

*为每个*子目录使用可伸缩数组（ArrayList）肯定会损害性能和已经很大的内存占用，因此我需要使用常规的固定长度数组。我一直在思考的另一种方法是使用可重用的主数组，一旦我知道长度，将其复制到目标数组。然而，这与递归性质以及目录和文件交错而不是分组的事实相冲突。对于每个递归深度（可能是无限的），我都需要一个主数组，除非我可以让它先遍历目录，然后是文件（我的研究表明无法完成。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T10:43:08.083

我真的会质疑这个假设：

> 为每个子目录使用可伸缩数组 (ArrayList) 肯定会损害性能和已经很大的内存占用

你有什么依据？请注意，访问文件系统的速度可能会限制（或至少影响）您的性能。

我认为（至于大多数此类性质的问题）您尝试一个简单的可扩展解决方案并确定任何真实问题，而不是提前做出假设。

# xpath - XPATH SELENIUM=无法添加变量

> ID：13452105
> 
> 赞同：0
> 
> 时间：2012-11-19T10:40:39.450
> 
> 标签：xpath

我正在尝试将变量添加到 xpath 但无济于事

这适用于 java assertTrue("Failed", verifyElementPresent("//*[@class='StdLJText' and contains(.,'2 Employees selected')]"));

但是当我添加一个变量时，如下所示

字符串 CountEmp1="2"; assertTrue("失败", verifyElementPresent("//*[@class='StdLJText' and contains(.,CountEmp1+'Employees selected')]"));

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:19:40.780

您需要将 CountEmp1 作为字符串添加到主 verifyElePresent 函数中，即`verifyElementPresent("//*[@class='StdLJText' and contains(.,"+CountEmp1+"Employees selected')]"));`

注意在 contains(.,CountEmp1+' 处替换 "+CountEmp1+"

使用您的 xpath，verifyElementPresent 方法基本上会查找 //*[@class='StdLJText' 和 contains(.,CountEmp1+'Employees selected')] 其中 countEmp1 被视为字符串值，而不是需要连接的东西。

# gmail - Gmail 在 HTML 电子邮件中的图像之间放置间距

> ID：13452106
> 
> 赞同：-3
> 
> 时间：2012-11-19T10:40:41.307
> 
> 标签：gmail, email

我创建了带有图像的 HTML 电子邮件，但电子邮件在 gmail 中未正确显示。请帮帮我。

![在此处输入图像描述](../Images/6a718edaa50641bcf578af865e5b458b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:30:42.217

您需要添加`display:block;`到每个图像的样式。这是一种痛苦！

# groovy - Groovy 的 Ivy 缓存（@Grab）没有缓存？

> ID：13452108
> 
> 赞同：3
> 
> 时间：2012-11-19T10:40:51.320
> 
> 标签：groovy, grape

我正在使用 groovyConsole（版本 1.8.1）运行这个简单的 groovy 脚本：

```
println "Start " + new Date()
@Grab( 'log4j:log4j:1.2.16' )
import org.apache.log4j.Logger
println "End " + new Date() 
```

通常，它执行得非常快（约 0 秒）。

但是，有时（每约 5 次运行一次），它会在完成运行之前暂停 3-5 秒。我正在用 Wireshark 嗅探（[这里是捕获](https://dl.dropbox.com/u/464119/Programming/Maven/grab.pcap)），并看到 HTTP 请求`repository.codehaus.org`（我在 Wireshark 流中看到一些 404 响应，但脚本设法运行，所以显然在某个时候找到了 jar）

我的问题是 - 一旦脚本运行一次，它通过@Grab 下载的 jar 不是永久缓存的吗？为什么经常查询实际的 Ivy/Maven 存储库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:21:26.463

文件应缓存在`~/.groovy/grapes`. 如果您使用 重新运行脚本`-Divy.message.logger.level=4`，您将从 ivy 获得一些可能有用的调试信息。

此外，如果您的葡萄需要很长时间才能解决，您可以告诉常春藤减少检查的频率。将默认的 ivy 配置从[此处](https://github.com/groovy/groovy-core/blob/master/src/resources/groovy/grape/defaultGrapeConfig.xml)复制到`~/.groovy/grapeConfig.xml`并将属性添加`ivy.cache.ttl.default`到一段时间以等待再次检查。例如：

```
<ivysettings>
  <property name="ivy.cache.ttl.default" value="24h"/>
  <settings defaultResolver="downloadGrapes"/>
  <resolvers>
    <chain name="downloadGrapes" returnFirst="true">
      <filesystem name="cachedGrapes">
        <ivy pattern="${user.home}/.groovy/grapes/[organisation]/[module]/ivy-[revision].xml"/>
        <artifact pattern="${user.home}/.groovy/grapes/[organisation]/[module]/[type]s/[artifact]-[revision](-[classifier]).[ext]"/>
      </filesystem>
      <ibiblio name="localm2" root="file:${user.home}/.m2/repository/" checkmodified="true" changingPattern=".*" changingMatcher="regexp" m2compatible="true"/>
      <!-- todo add 'endorsed groovy extensions' resolver here -->
      <ibiblio name="codehaus" root="http://repository.codehaus.org/" m2compatible="true"/>
      <ibiblio name="ibiblio" m2compatible="true"/>
      <ibiblio name="java.net2" root="http://download.java.net/maven/2/" m2compatible="true"/>
    </chain>
  </resolvers>
</ivysettings> 
```

# sql - SQL Server - 在所有实例中的所有数据库中执行 sql 语句

> ID：13452111
> 
> 赞同：0
> 
> 时间：2012-11-19T10:41:12.177
> 
> 标签：sql, tsql, dynamic, exec, instances

之前我问了一个关于如何在特定实例中跨所有数据库执行动态 SQL 语句的问题。答案是使用`sp_MSForEachDB`.

现在，我面临另一个问题，需要在我拥有的所有实例中跨所有数据库执行该语句。

我们有一个执行此操作的 vb 脚本，但我希望有一个 tsql 解决方案。

有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:40:20.970

您是否考虑过使用Red Gate 的[SQL Multi 脚本](http://www.red-gate.com/products/dba/sql-multi-script/)。您可以选择所有数据库并在所有数据库中执行您的 sql，并将选择保存为预设，以便您可以一次又一次地使用它。您也可以拥有多个这样的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:46:33.233

您可以设置[多服务器管理](http://www.yaldex.com/sql_server_tutorial_3/ch08lev1sec5.html)，将使用的作业推`sp_MSForEachDB`送到您控制的所有服务器。

如果您想设置多服务器管理，我在我的站点 mssqlforum 上记录了[多服务器要求列表。](http://www.mssqlforum.com/threads/multi-server-jobs-requirements.52/)

# java - 为什么在java中复制对象不起作用？

> ID：13452117
> 
> 赞同：-2
> 
> 时间：2012-11-19T10:41:33.393
> 
> 标签：java

我必须按值而不是按引用复制对象，我尝试了不同的方法，但没有一个有效。请看一下这段代码：

```
public static class25 copy(class25 otherSpec) {
    class25 class2 = new class25( otherSpec.Getfct());

    for (pa pack : otherSpec.Getfct())
        class2.addsp(pack);
    for (dn ddata : otherSpec.getdld())
        class2.addsp(data);

    return class2;
} 
```

它的用途：

```
class25 class22 = class25.copy(class2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:46:35.487

Maby 并`GlmLabelSpec.AddSpecificationPage`没有真正克隆内容，而是管理一个引用列表，因此它只存储对相同子对象的引用。

# r - 如何在特定嵌套级别选择列表的所有元素？

> ID：13452118
> 
> 赞同：4
> 
> 时间：2012-11-19T10:41:34.207
> 
> 标签：r, list, operators

或者换一种说法：如何`[[`在嵌套列表中使用运算符？

当我询问如何确定列表的深度级别时，您可以将此视为此[问题](https://stackoverflow.com/questions/13432863/determine-level-of-nesting-in-r)的后续问题。我从@Spacedman 和@flodel 那里得到了一些不错的答案，他们都建议使用递归函数。两种解决方案都非常相似并且对我有用。

但是，我还没有弄清楚如何处理从这些函数中获得的信息。假设我有一个嵌套在 level 的列表`i`，我想返回一个包含所有`i-th`level 元素的列表，如下所示：

```
myList$firstLevel$secondLevel$thirdLevel$fourthLevel
# fourthLevel contains 5 data.frames and thirdLevel has
# three elements 
```

如何从 中取回所有 15 个 data.frames `mylist`？我正在尝试使用例如

```
lapply(mylist,"[[",2) 
```

但显然我只是在第一级得到所有列表元素的第二个元素。

编辑：我在`extract`各自的帮助下找到了以下内容，`?"[["`但到目前为止还不能真正理解它： `"[[ can be applied recursively to lists, so that if the single index i is a vector of length p, alist[[i]] is equivalent to alist[[i1]]...[[ip]] providing all but the final indexing results in a list."`

编辑：不想像这样结束嵌套循环。

```
o <- list()
i=1
for (i in 1:2){
o[[i]] <- mylist[[c(i,1,1,1)]]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:08:21.333

期间我找到了答案。不能说是我自己做的。这个 [链接](https://sites.google.com/site/akhilsbehl/geekspace/articles/r/linearize_nested_lists_in_r)详细解释了如何使用另一个（复杂的）递归函数来线性化整个嵌套列表wad。

Akhil S. Behl 提供的解决方案的真正优点是：它处理了 data.frames 也是列表的事实，并且递归可以在 data.frames 之前停止。原来这是我之前的主要问题之一。

# php - 函数 array_key_exists 在包含 subb_arrays 的数组中

> ID：13452122
> 
> 赞同：0
> 
> 时间：2012-11-19T10:41:48.477
> 
> 标签：php, function, return, array-key-exists

我遇到了一些功能问题。

事实上，我想包含我所有的页面，但问题是并非所有页面都像参数一样命名`$_GET['page']`，例如，如果我调用`index.php?p=accueil`它将重定向到`php/home.php`

另一个示例，如果我调用`index.php?p=message`它将透明地重定向到`message.php`

对于所有异常，我生成了一个这样的数组：

```
<?php    
$paramListepages = array(       
     'corbeille' => array(
         'libelle'     => 'corbeille',
         'page'        => 'php/trash.php'
     ),   
     'nouveaumessage' => array(
         'libelle'     => 'nouveaumessage',
         'page'        => 'php/envoyer.php'
     )  
);
?> 
```

这个数组包含许多 sub_arrays 你可以看到这个数组的两个第一个。

对于调用页面，我已经完成了这样的功能：

```
function getPage($var) {
    if (!isset($var)){
        //Aucune page spécifiée => default page
        inlude('php/accueil.php');
    }
    elseif (array_key_exists($var,$paramListepages)){
        // page trouvée => on l'inclut!
        include ('php/accueil.php');
    }
    else{
        // page espectant la structure, non trouvée dans l'array => on l'inclut directement
        include('php/'.$var.'.php');    
    }
} 
```

实际上，它似乎可以识别 if 条件和 else。

但是当我在数组中请求一个页面时，有一个空白页面似乎无法读取预期的正确值。

我有白色的空白页面，没有错误或消息错误。

在我的 Ubuntu 中，我激活了`error_reporting(E_ALL);`

任何形式的帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:18:14.030

所以基本上这个？

```
elseif (array_key_exists($var,$paramListepages)){
    include ($paramListepages[$var]['page']);
} 
```

# sharepoint - 使用自定义域对 SharePoint Online 进行远程身份验证

> ID：13452124
> 
> 赞同：8
> 
> 时间：2012-11-19T10:41:51.910
> 
> 标签：sharepoint, authentication, dns, claims-based-identity, office365

我们已使用 SharePoint Online 的远程身份验证来访问目标 O365 共享点站点并检索 FedAuth 和 rtFA cookie。这适用于具有 xxx.sharepoint.com 域的目标 URL。现在，如果此域已自定义为 example.com，则身份验证机制失败并抛出错误 - “无法找到登录请求中使用的合作伙伴 DNS”。有没有一种方法可以针对其域已自定义为不反映 .sharepoint.com 的 sharepoint 在线站点进行身份验证。?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T20:53:11.187

据我了解，SharePoint 的自定义域不再保持声明感知。所以，如果你真的想得到 cookie，解决方案不会很理想，而是一些 hacky 的东西。鉴于 Microsoft 的限制数量，除了屏幕报废之外，没有直接解决此问题的方法。我成功了，并且可以通过屏幕报废获得 fedAuth cookie。我知道，这不是很容易，但很有可能。它需要您向 SharePoint 门户发出大约 6 个 Web 请求。

*   第一个是对自定义域的 Web 请求。

*   其次，从响应头中获取“X-Forms_Based_Auth_Required”的值，并向其发出请求。

*   第三，从响应头中获取SetCookie(rps context cookie)和Location的值，向Location发起请求。

    *   第四，获取SetCookie、“srf_uPost”、“PPFT”的值，对响应的ResponseUri进行请求。在请求头中设置 Cookie 和 ppft 的值，并请求“srf_uPost”的值。在请求流中还包括 "login=" + username + "&passwd=" + 密码。

    *   第五，从html中获取“action”元素和“T”元素的值。并向您从操作元素的值中获得的 url 发出请求。包括元素 T 作为后串。

    *   第六，重复第五步，这次你会得到 fedAuth cookie 作为响应。

您应该可以轻松通过，但是如果您愿意，可以在我的[博客中找到所有代码](http://kunalkapoor.in/index.php/2013/04/26/active-authentication-to-sharepoint-for-office-365-with-custom-domains/)

# perl - 如何在 perl oneliner 中进行无缓冲替换？

> ID：13452125
> 
> 赞同：2
> 
> 时间：2012-11-19T10:41:53.733
> 
> 标签：perl

我有一个包装 mvn (Apache Maven) 的 bash 脚本来为其输出添加颜色。它所做的简化版本是：

```
mvn "$@" | sed -e "s/^\[INFO\] \-.*/$bldblu&$rst/g" 
```

哪里`$bldblu`是粗体蓝色的 ANSI 颜色转义字符，并`$rst`重置颜色。

我遇到的问题是，有时 mvn 会写一行不以换行符结尾的行，因此（据我所知） sed 一直在等待输入并且从不打印提示（这使得 Maven 看起来像挂起）。我尝试添加`-u`到 sed ，但这只是强制 sed 进行逐行缓冲而不是缓冲多行 - 对我没有帮助。

到目前为止，这就是我想出的：

```
mvn "$@" | perl -pe "$| = 1; s/^(\[INFO\] \-.*)/$bldblu\$1$rst/g" 
```

但我认为`-p`这里的使用不正确。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:17:00.367

替换可能是多余的，尤其是当替换模式中包含特殊字符时。这个怎么样？

```
export bldblu
export rst
mvn "$@" | perl -pe 'if(/^.INFO. -/){ $_=$ENV{bldblu}.$_.$ENV{rst} }' 
```

或者不是重新发明轮子

```
mvn "$@" | perl -MTerm::ANSIColor -pe 
    '$_=color("bold blue").$_.color("reset") if /^.INFO. -/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-29T03:57:21.430

### （解决方法）使用 sed --unbuffered

我无法弄清楚解决方案，但幸运的是，这对于我的特定用途来说已经足够了：

```
cat - | sed --unbuffered 's/.*?from//' 
```

但我也想知道答案。Perl 单行替换是我工具中的一个关键习惯用法。

# android - 了解 ADT 布局工具中加载了哪些资源

> ID：13452128
> 
> 赞同：0
> 
> 时间：2012-11-19T10:42:00.660
> 
> 标签：android, eclipse

当我更改目标屏幕大小时，如何知道 ADT 布局编辑器当前加载了哪些资源。由于没有关于使用哪些资源的正确和准确的列表，我认为 ADT eclipse 编辑器可以很容易地告诉我哪些修饰符用于单个屏幕/设备选择。ADT 是否提供此信息，我如何获得它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:53:21.460

不幸的是，ADT 没有说什么。但是要查看加载了哪个布局，请将每个屏幕尺寸的 TextView 放入您的 layout.xml 中。

例如

布局-ldpi/main.xml -> android:text="ldpi"

布局-mdpi/main.xml -> android:text="mdpi"

布局-hdpi/main.xml -> android:text="hdpi"

布局-xhdpi/main.xml -> android:text="xhdpi"

并且可以看到加载了哪个布局

如果您使用一种布局，请将图像放入您的可绘制对象

可绘制-ldpi/screensize.png

可绘制-mdpi/screensize.png

可绘制-hdpi/screensize.png

可绘制-xhdpi/screensize.png

并将图像放入并测试您的布局并为其背景提供该图像，当您更改屏幕尺寸时，您会看到该图像将被更改。这样您就可以了解加载了哪个 lyout。

布局/main.xml -> android:background="@drawable/screensize"

你可以使用下面的图片，

![低密度脂蛋白](../Images/85716fce62ca17a10d714666df0023fd.png)

![mdpi](../Images/0843ed1e8f442fd06b2ecd5be78a0a57.png)

![hdpi](../Images/6e529a3dbeeb312fcead9e680fb42e76.png)

![xhdpi](../Images/b2f0b85f42c01ee6b6c3a7de4c196edf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:12:13.357

事实证明，在布局编辑器中单击目标设备选择器 -> 定义自己的 ... 会显示每个设备专用的修改器列表。

![在此处输入图像描述](../Images/8cd81fe1465d7e8fad75c7956f345fdb.png)

# asp.net-mvc - 具有动态 colNames 的 Jqgrid？

> ID：13452132
> 
> 赞同：2
> 
> 时间：2012-11-19T10:42:14.607
> 
> 标签：asp.net-mvc, jqgrid

脚本：

```
$.ajax({
    url: '/Widget/GetTestData',
    type: 'POST',
    data: {},
    success: function (result) {
        var colModels = result.Json.colModels;
        var colNames = result.Json.colNames;
        var data = result.Json.data.options;
        $("#grid_table").jqGrid({
            datatype: 'jsonstring',
            datastr: data,
            colNames: colNames,
            colModel: colModels,
            jsonReader: {
                root: 'rows',
                repeatitems: false
            },
            gridview: true,
            pager: $('#gridpager'),
            height: 349,
            width:968,
            rowNum: 5,
            rowList: [5, 10, 20, 50],
            viewrecords: true
        }).navGrid('#gridpager'); //end jqgrid
    },
    error: function (result) {
        alert("Seçilen kritere uygun veri bulunamadı!");
    }
});    //end ajax 
```

控制器

```
public ActionResult GetTestData()
{
    var result = new
        {
            Json = new
            {
                colNames = new[]
                {
                    "T1","T2"
                },
                colModels = new[]
                {
                   new {
                        index = "T1",
                        label = "T1",
                        name = "T1",
                        width = 100
                    },new {
                        index = "T2",
                        label = "T2",
                        name = "T2",
                        width = 100
                    }
                },
                data = new
                {
                    options = new
                    {
                        page = "1",
                        total = "1",
                        records = "1",
                        rows = new[] {
                            new{T1=123,T2=321},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934},
                            new{T1=4532,T2=934}
                        }
                    }
                }
            }
        };
} 
```

此代码有效。它从服务器获取所有数据。但我想从服务器获取部分数据，每页。

当我写以下内容时，我可以做我想做的事，但我无法动态获取 colNames。

```
$("#grid_table").jqGrid({
    url: '/Widget/GetGridData',
    datatype: "json",
    mtype: 'POST',
    postData: { DateRangeType: date_range_id, MeterType: meter_type_id, StartDate: start_date, EndDate: end_date },
    colNames: ['Okuma Tarihi', 'T1', 'T2', 'T2', 'Toplam'],
    colModel: [
            { name: 'OkumaTarihi', index: 'OkumaTarihi', width: 150, sortable: true, editable: false },
            { name: 'T1', index: 'T1', sortable: true, editable: false },
            { name: 'T2', index: 'T2', sortable: true, editable: false },
            { name: 'T3', index: 'T3', sortable: true, editable: false },
            { name: 'Toplam', index: 'Toplam', sortable: true, editable: false }
       ],
    rowNum: 20,
    rowList: [20, 30],
    pager: $('#gridpager'),
    sortname: 'Name',
    viewrecords: true,
    sortorder: "asc",
    width: 968,
    height: 349,
    jsonReader: {
        root: "rows", //array containing actual data
        page: "page", //current page
        total: "total", //total pages for the query
        records: "records", //total number of records
        repeatitems: false,
        id: "id" //index of the column with the PK in it
    }
}).navGrid('#gridpager'); //end jqgrid 
```

控制器

```
public ActionResult GetGridData(string sidx, string sord, int page, int rows)
{
    IEnumerable<MeterReadingsForChart> meterReadings = MeterReadingManager.GetCustomerTotalMeterReadings(9, 1, /*DateTimeManager.GetStartDate(0)*/DateTime.Now.AddDays(-40), DateTime.Now, DateTimeManager.GetTimeIntervalTypeById(0));

    int pageIndex = Convert.ToInt32(page) - 1;
    int pageSize = rows;
    int totalRecords = meterReadings.Count();
    int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);

    var result = new
    {
        total = totalPages,
        page = page,
        records = totalRecords,
        rows = meterReadings.Skip((pageIndex) * pageSize).Select(x => new { T1 = x.Name, OkumaTarihi = x.ReadDate.ToString("dd.MM.yyyy - hh:mm:ss"), Value = x.Value }).ToArray()
    };

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

我如何将它们两个一起制作？（动态列名和每页从服务器获取数据）

**更新**（场景）

我每五分钟就有一次仪表读数。我每小时、每天等对它们进行分组……我还将它们分组为meterType（{T1，T2，T3}，{Reactive，Active，Capasitive，..}，{...}）。

例如电网：

```
T1 | T2 | T3 | .... | 
```

能源网：

```
Active | Reactive | .... | .... 
```

和其他人：

我想用网格的默认值传递额外的参数（rangeType、meterType）。并创建新的网格值（colNames、ColModels 和数据）。那么我该怎么做所有这些。

它可以是一个返回网格 colNames 的方法和另一个返回网格数据的方法吗？

我是说 ：

```
1\. public Json GetGridOptions{ return colNames and colModels }
2\. public Json GetGridData{ return GridData }

1\. $.ajax { url : GetGridOptions }
2\. $.grid { url : GetGridData }} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:01:40.937

动态加载`colModel`和`colNames`在某些场景中是实用的。如果您这样做，您将在`success`您自己的 Ajax 请求的回调中创建网格。为确保您在第一次执行此操作，您应该另外使用[GridUnload](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods#add_on_grid_methods)（请参阅[此处](https://stackoverflow.com/a/4920612/315935)的演示）。

顺便说一句，您不能使用和`colNames`使用[colModel](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options)`label`内部的属性。在这种情况下，jqGrid 将为您生成。`colNames`

如果您需要更改内部的列标题，`loadComplete`或者仅使用with`beforeProcessing`是不够的，因为已经创建了标题。*所以你必须手动*修改列标题的文本。您可以使用列标题将由 构造的事实，网格的 id 和来自属性的值来自。`setGridParam``colNames`*`"jqgh_"``name``colModel`*

 *`colNames`如果您在 HTML 表单中使用 的值，`<span class="someClass">My column Header Text</span>`您将获得与使用 相同的结果`"My column Header Text"`，但您将能够更容易地找到和修改标题。

例如，如果您使用[columnChooser](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jquery_ui_methods#column_chooser) ，您仍然需要使用`setGridParam`with 。从相应的对话框中读取当前值并使用它。`colNames``columnChooser``colNames`*

# c# - 合同中可序列化类型的MAF（System.Addin）属性？

> ID：13452136
> 
> 赞同：0
> 
> 时间：2012-11-19T10:42:37.133
> 
> 标签：c#, .net, maf, system.addin

我们正在测试 MAF 插件以用作我们的插件框架。但我们陷入了一个基本问题。我们可以使用可序列化类型作为 IContract 参数吗？

合同和参数类型都在同一个程序集中定义：

```
 public interface IHostContract : IContract
    {
        void SetCurrent(TheValue tagValue);   // does not work
        void SetCurrentSimple(double value);  // works fine
    }

    [Serializable]
    public sealed class TheValue
    {
       public int Id { get; set; }

       public double Value { get; set; }
    } 
```

我们能够让一切正常运行。调用 SetCurrent 会导致异常： AppDomainUnloadedException ：

```
The application domain in which the thread was running has been unloaded.

Server stack trace: 
   at System.Threading.Thread.InternalCrossContextCallback(Context ctx, IntPtr ctxID, Int32 appDomainID, InternalCrossContextDelegate ftnToCall, Object[] args)
   at System.Runtime.Remoting.Channels.CrossAppDomainSink.DoTransitionDispatch(Byte[] reqStmBuff, SmuggledMethodCallMessage smuggledMcm, SmuggledMethodReturnMessage& smuggledMrm)
   at System.Runtime.Remoting.Channels.CrossAppDomainSink.SyncProcessMessage(IMessage reqMsg)

Exception rethrown at [0]: 
```

加载和运行插件：

```
public void Run(string PluginFolder)
{
    AddInStore.Rebuild(PluginFolder);
    Collection<AddInToken> tokens = AddInStore.FindAddIns(typeof(Plugins.IPlugin), PluginFolder);

    foreach (var token in tokens)
    {
        Console.WriteLine("Found addin: " + token.Name + " v" + token.Version);
        try
        {
            var plugin = token.Activate<Plugins.IPlugin>(AddInSecurityLevel.FullTrust);
            plugin.PluginHost = this;
            plugin.Start();
            plugin.Stop();
        }
        catch (Exception exception)
        {
            Console.WriteLine("Error starting plugin: " + exception.Message);
        }
    }
} 
```

插入：

```
[System.AddIn.AddIn("Plugin1", Version = "1.0.0")]
public class Plugin1 : IPlugin
{
    private int started;

    public Plugin1()
    {
        Console.WriteLine("Plugin 1 created");
    }

    public void Start()
    {
        Console.WriteLine("Plugin 1 started: {0}", started);
        started++;

        var tagValue = new TheValue { Id = 1, Value = 4.32 };
        PluginHost.SetCurrent(tagValue);
    }

    public void Stop()
    {
        Console.WriteLine("Plugin 1 stopped");
    }

    public IPluginHost PluginHost { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:30:59.270

您需要遵循[生命周期管理](http://msdn.microsoft.com/en-us/library/bb384186.aspx)指南。在每个 contract-to-view 适配器中，您需要存储一个[ContractHandle](http://msdn.microsoft.com/en-us/library/system.addin.pipeline.contracthandle.aspx)。这对于隐式创建的代理的生命周期管理是必要的`System.AddIn`（请记住，`System.AddIn`它基于 .NET Remoting）。

取自 MSDN：

> ContractHandle 对于生命周期管理至关重要。如果您未能保留对 ContractHandle 对象的引用，垃圾收集将回收它，并且当您的程序不期望它时，管道将关闭。这可能会导致难以诊断的错误，例如 AppDomainUnloadedException。关闭是管道生命周期中的正常阶段，因此生命周期管理代码无法检测到这种情况是错误的。

如果您决定`System.AddIn`在您的应用程序中使用，那么您需要[PipelineBuilder](http://pipelinebuilder.codeplex.com/)。在讨论区中，您将找到有关如何使其与 VS2010 一起工作的帮助（这很简单）。我想让它与 VS2012 一起工作并不难。此工具将为您处理所有 System.AddIn 错综复杂的问题。您需要做的就是创建合同，然后`PipelineBuilder`为您创建管道的其余部分。它还将确保您遵循有关如何构建合同的指南，这是 System.AddIn 最重要的事情。

在决定使用插件框架之前，不要忘记查看[MEF](http://mef.codeplex.com/)。`MEF`可以与[Autofac](http://code.google.com/p/autofac/)一起使用并通过适配器提供版本控制。恕我直言，任何人都应该选择 System.AddIn 的唯一原因是隔离功能。但请注意，只有在加载项与主机不同的进程中加载​​时，才能实现 100%[隔离。](http://blogs.msdn.com/b/clraddins/archive/2007/05/01/using-appdomain-isolation-to-detect-add-in-failures-jesse-kaplan.aspx)

# sql - 插入选择案例

> ID：13452139
> 
> 赞同：3
> 
> 时间：2012-11-19T10:42:42.187
> 
> 标签：sql, sql-server, select, insert, select-case

我有两张桌子，`Variables`和`Processes`。
我想实现一个`INSERT INTO SELECT CASE`，但我以前从未这样做过。

数据从`Variables`到`Processes`永远。但我不知道是什么列。

例如 ：

`Variables`表有以下列：

`Variable_ID`
**`Set_To_Value_ID`**
**`Set_To_Variable_ID`**
**`Changed_In_SP`**
**`Comment_Input`**

第一列总是被复制到`Processes`表中。
`Set_To_Value_ID`, `Set_To_Variable_ID`, `Changed_In_SP`,`Comment_Input`需要 a`SELECT CASE`因为只有一个可以有值。一行中的三列将始终为空。任何不为空的列都应插入`Processes`表中：

`Processes`桌子 ：

`Process_ID`
`Variable_ID`
**`Value_ID`**- (`Set_To_Value_ID`到这里 )
**`Manual_Value`**- ( `Set_To_Variable_ID`, `Changed_In_SP` *OR* `Comment_Input`到这里 )

`Variable_ID_To_Change`去`Variable_ID`。

如何进行？
谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T10:48:55.933

> Value_ID - （此处为 Set_To_Value_ID ） Manual_Value
> 
> Set_To_Variable_ID、Changed_In_SP 或 Comment_Input 放在这里）

您可以[**`COALESCE`**](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.100%29.aspx)像这样使用表达式：

```
INSERT INTO Processes 
SELECT 
  Set_To_Value_ID,
  COALESCE(Set_To_Variable_ID, Changed_In_SP, Comment_Input)
FROM Variables 
```

**更新：**好吧，既然你不能使用这个，这里是使用表达式`COALESCE`来做到这一点的规范方法：`CASE`

```
INSERT INTO Processes
SELECT
   Set_To_Value_ID,
   CASE 
     WHEN Set_To_Variable_ID IS NOT NULL THEN Set_To_Variable_ID 
     WHEN Changed_In_SP IS NOT NULL THEN  Changed_In_SP
     WHEN Comment_Input IS NOT NULL THEN  Comment_Input 
   END
FROM Variables 
```

# javascript - AngularJS 变量之间的绑定

> ID：13452142
> 
> 赞同：13
> 
> 时间：2012-11-19T10:42:56.010
> 
> 标签：javascript, data-binding, angularjs

我有一个从我的服务中检索到的用户列表。当我选择任何用户时，我可以查看和编辑信息*（电子邮件、角色等）*。问题是我不希望这些更改影响列表中的用户数据，我只想在保存后更新数据（单击按钮）。

现在我使用两个变量：

`$scope.selected`- 当前选定的用户
`$scope.editable`- 用于存储我正在编辑的数据的变量

我交换这样的数据：

```
$scope.initEditable = function () 
{
    $scope.editable = {};
    $.extend($scope.editable, $scope.selected);
} 
```

看起来像一个可怕的解决方案。正确的方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T11:02:49.860

实际上，这是解决此问题的 Angular 方式，您走在正确的轨道上。在像您这样的情况下，通常会：

*   选择时复制项目（编辑开始） - 这就是您所做的`editable`
*   有 2 路数据绑定更改副本（或原始元素）
*   编辑完成后，我们可以将更改从副本传播到原始

这种模式的好处是我们可以很容易地：

*   提供“取消”功能，用户可以在其中恢复他们的更改
*   能够基于此比较比较副本与 UI 的原始和驱动部分（例如，如果没有更改，我们可以禁用“保存”按钮）

所以，我根本不认为这种方法很糟糕。我唯一的建议是使用 angular 的`angular.copy` [方法](http://docs.angularjs.org/api/angular.copy)而不是`$.extend`.

# git - 从另一个类中获取 egit Mylyn 连接器活动任务

> ID：13452144
> 
> 赞同：0
> 
> 时间：2012-11-19T10:43:04.457
> 
> 标签：git, mylyn

我需要知道在为 Git 暂存添加文件时任务列表中是否激活了任何任务？

## 编辑：

我正在寻找的想法是，在进行文件暂存时，我需要通过 Git StagingView 类中的代码确定是否有选定的任务？

有任何想法吗？

[![Mylyn 功能](../Images/f433059ded20cb360c329ddce1c9adc0.png)](https://i.stack.imgur.com/0kAmC.png)
[（来源：[uploadimage.in](http://www.uploadimage.in/di/WCL8/Mylyn.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:17:56.577

如果您想在不打开任务列表视图的情况下查看活动任务，您可以启用任务窗口修剪。转到 Window/Preferences/Mylyn/Tasks 并选中“Show active task on window trim”。

除此之外，如果每次在存储库上发生刷新并且任务处于活动状态时，Mylyn 将在 Git Staging 视图中填写提交消息。

**编辑：**对于编程访问，请查看`org.eclipe.mylyn.tasks.ui`插件。该类`TasksUi`用作入口点，使您可以访问所有高级任务 API 类。您要查找的内容位于`ITaskActivityManager`：

```
 ITaskActivityManager activityManager = TasksUi.getTaskActivityManager();
   ITask activeTask = activityManager.getActiveTask(); 
```

# c++ - VS2010 Express 建议在调试模式下进行优化，没有它们就无法运行应用程序

> ID：13452153
> 
> 赞同：0
> 
> 时间：2012-11-19T10:43:43.043
> 
> 标签：c++, visual-studio-2010, compiler-optimization

我们最近遇到了 VS2010 Express C++ 的一个非常奇怪的行为。

我们运行完美的应用程序在调试模式下突然出现了意外行为，例如以某种方式呈现到全屏，尽管它是一个很小的编辑器窗口。

我们发现可以通过将调试模式中的代码优化从“停用”（/Od）切换到“项目默认”来禁用新行为，然后意外使用“最大化速度”选项（/O2）。

如果不是因为代码重组正在进行中，现在几乎不可能进行调试，那么这不会是坏事，所以断点、单步执行、查看值都是没有意义的。调试器甚至无法找出变量的正确值（这只是合乎逻辑的）。

所以我很困惑如何处理它。为什么它首先会失败，为什么它需要调试模式下的优化程序？

另外，不好笑的是，我们遇到了一个 c++ 编译器错误，编译器没有注意到没有传递模板参数，因此使一些代码静默失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:21:06.210

项目默认值不是调试模式默认值，但实际上是发布模式的默认值。项目默认值不知道调试/发布配置。覆盖 /Od 是调试配置的默认设置。如果您已将调试配置中的所有项目属性重置为默认值，那么您已将调试配置设置为与发布模式几乎相同。

调试/发布配置没有什么特别之处——它们只是名称，所以项目属性不包括每个特殊的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:23:53.707

想想像返回值优化这样的东西。还要查找打开代码优化时编译器避免创建的临时对象。也许您可以使用一些[C++ lint](https://stackoverflow.com/questions/632057/c-c-free-alternative-to-lint)应用程序来找出您的代码在调试模式下行为不端的一些原因。

# c# - LINQ 和 GroupBy

> ID：13452161
> 
> 赞同：2
> 
> 时间：2012-11-19T10:44:31.357
> 
> 标签：c#, linq

我以前没有做过很多 LINQ，所以我经常发现某些方面令人困惑。最近有人使用 GroupBy 运算符创建了一个如下所示的查询。他们是这样做的：

```
List<int> ranges = new List<int>() {100, 1000, 1000000};

List<int> sizes = new List<int>(new int[]{99,98,10,5,5454, 12432, 11, 12432, 992, 56, 222});

var xx = sizes.GroupBy (size => ranges.First(range => range >= size));

xx.Dump(); 
```

基本上我对键表达式的工作方式非常困惑，即 range.First(range => range >= size

任何人都可以解释一下吗？是否可以进一步分解以使其更易于理解？我认为 First 会产生一个结果。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:46:43.160

`size => ranges.First(range => range >= size)`这个 Func 构建键，大小将被分组。它采用当前大小并找到大于或等于当前大小的第一个范围。

* * *

这个怎么运作：

对于尺寸`99`第一范围，`>= 99`即`100`. 因此，计算出的键值将是`100`。大小与 key 分组`100`。

下一个尺寸`98`, `10`,`5`也将获得密钥`100`并进入该组。

对于 size`5454`计算的键值将是`1000000`（它是大于 的第一个范围`5454`。因此，创建了新键，并且 size 与 key 分组`1000000`。

等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T10:48:59.613

`ranges.First(range => range >= size)`返回一个`int`，第一个`range`是`>=`当前`size`值。所以每个尺寸都属于一个范围。那就是组。

请注意，如果没有给定大小`First`的范围，则会引发异常。`>=`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T10:53:58.253

如果你用 for 循环编写代码，它看起来像这样：

```
var myGroup = new Dictionary<int, List<int>>();

foreach( size in sizes)
{
    // ranges.First(range => range >= size) is like bellow
    range = find minimum value in ranges which is greater than equal to size;

    // this grouping will be done autamatically by calling GroupBy in your code:
    if (myGroup[range] has no value) // actually TryGetValue
      myGroup[range] = new List<int>();

    // this addition will be done by each iteration on your inputs.
    myGroup[range].Add(item);
} 
```

linq 命令的不同之处在于，它不适用于 for 循环，实际上它适用于哈希表，而且速度更快（平均而言），如果您学习 linq，它的可读性更高。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T15:30:54.467

不确定它是否增加了清晰度，但如果你真的想把它分解，你可以执行以下操作（我猜你正在使用 LinqPad）

```
 List<int> ranges = new List<int>() {100, 1000, 1000000};
   List<int> sizes = new List<int>(new int[]{99,98,10,5,5454, 12432, 11, 12432, 992,    56, 222});

   void Main()
   {
        var xx = sizes.GroupBy (size => GetRangeValue(size));

        xx.Dump();
    }

   private int GetRangeValue(int size)
   {
        // find the first value in ranges which is bigger than or equal to our size
        return ranges.First(range => range >= size);
    } 
```

是的，你是对的，First 确实产生了一个结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T11:08:18.270

实际上，首先返回一个值，该值成为分组的关键。

这里发生的情况是——首先为每个大小的值调用，返回大于大小的第一个范围（100,100,100,100,1000000、1000000 等）——“大小”按此值分组。对于每个范围，都会返回一个分组，例如 100：99,98,10,5,11...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-14T20:13:47.587

`GroupBy`本质上构建了一个**查找表**（字典），其中源中满足常见条件的每个项目都被**分组**到一个列表中，然后分配给查找表中的一个**键**。

这是一个示例程序，它将您的调用替换为`xx.Dump()`一个代码块，该代码块以特定于您的示例的方式漂亮地打印输出。请注意对`OrderBy`键（范围值）以及与每个范围关联的项目组进行第一次排序的使用。

```
using System;
using System.Collections.Generic;
using System.Linq;

class GroupByDemo
{
    static public void Main(string[] args)
    {
        List<int> ranges = new List<int>() {100, 1000, 1000000};

        List<int> sizes = new List<int>(
            new int[]{99,98,10,5,5454, 12432, 11, 12432, 992, 56, 222});

        var sizesByRange =
            sizes.GroupBy(size => ranges.First(range => range >= size));

        // Pretty-print the 'GroupBy' results.
        foreach (var range in sizesByRange.OrderBy(r => r.Key))
        {
            Console.WriteLine("Sizes up to range limit '{0}':", range.Key);

            foreach (var size in range.ToList().OrderBy(s => s))
            {
                Console.WriteLine("  {0}", size);
            }
        }
        Console.WriteLine("--");
    }
} 
```

**预期成绩**

请注意，`12432`在最后一组中出现了两次，因为该值在原始源列表中出现了两次。

```
Sizes up to range limit '100':
  5
  10
  11
  56
  98
  99
Sizes up to range limit '1000':
  222
  992
Sizes up to range limit '1000000':
  5454
  12432
  12432
-- 
```

# windows - 为 Windows 构建 QEMU arm 时出错

> ID：13452165
> 
> 赞同：1
> 
> 时间：2012-11-19T10:44:56.013
> 
> 标签：windows, arm, qemu

我想为 Windows 构建 QEMU arm。为此，我执行以下命令：

```
/configure –target-list=arm-softmmu and make. 
```

当我执行 make 命令时，出现以下错误。

```
Makefile:24: no file name for `-include'
make[1]: *** No rule to make target `vl.o', needed by `all'. Stop.
make: *** [subdir-libhw32] Error 2 
```

我该如何解决这个问题？请帮我。

# rbac - 在基于角色的访问控制 (RBAC) 中使用会话

> ID：13452167
> 
> 赞同：7
> 
> 时间：2012-11-19T10:44:57.720
> 
> 标签：rbac

我正在尝试了解基于 RBAC 模型的访问控制。我参考了以下链接。

[NIST RBAC 数据模型](http://www.mind-it.info/2010/01/09/nist-rbac-data-model/)

如摘录中所述，我还没有清楚地理解这部分-

*“每个会话是一个用户到可能的多个角色的映射，即，用户建立一个会话，在该会话期间用户激活分配给他或她的角色的某些子集。每个会话与单个用户相关联，每个用户是与一个或多个会话相关联。函数 session_roles 为我们提供了由会话激活的角色，函数 user_sessions 为我们提供了与用户关联的一组会话。用户可用的权限是分配给角色的权限在所有 user.s 会话中激活。"*

**问题**- 如何使用会话来激活角色？用户/组和角色之间的关系作为管理员数据插入。那么，会话如何为用户激活角色子集？

[PS -> 我早些时候在这里](http://www.coderanch.com/t/592353/Security/sessions-RBAC)问过这个问题，但没有答案。可能是这个问题太基本了，但我很想理解它。任何用例或链接肯定会有所帮助。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:43:03.970

在 RBAC 中，管理员通过将权限分配给角色以及另外将角色分配给用户来授予权限。如您所知，要使用户能够使用特定权限，他必须被分配至少一个提供所述解决方案的角色。

所以每个用户都有一组分配给他的角色。在会话期间，他可以选择激活（或停用）这些角色中的任何一个，但不能选择其他角色。激活的角色确定在会话期间的给定时间用户可以使用哪些权限。这很有用，例如，对于职责约束的动态分离，两个角色 A 和 B 可以分配给同一个用户 U，但不能一起使用。因此，如果 U 想使用 A，他必须在激活 A 之前停用 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T05:53:36.763

根据我实施 RBAC 的经验，我几乎避免使用多会话的动态管理。

起初，这听起来像是一个非常简洁和灵活的想法，但是当您询问谁激活/停用角色（以及何时）时，我意识到复杂性和安全风险不值得付出努力（我个人的看法）。

这里要理解的重要事情以及@Imontriux（上面）提到的事情：

> “这很有用，例如，对于动态职责分离约束，两个角色 A 和 B 可以分配给同一个用户 U，但不能一起使用。因此，如果 U 想使用 A，他将有在激活 A 之前停用 B。”

大多数时候，必须应用职责分离约束，为了兑现这一点，我只是选择一次只拥有/管理每个用户的一个有效会话。如果用户想在不同的角色集下进行身份验证，他/她负责注销和重新登录。

它几乎简化了我的很多代码。这是我选择的妥协，可以轻松接受。

# internet-explorer - GWT 中的“更改”浏览器事件

> ID：13452172
> 
> 赞同：0
> 
> 时间：2012-11-19T10:45:26.253
> 
> 标签：internet-explorer, gwt, cross-browser

我在 GWT 中创建表，其中一列包含具有输入的单元格。我想在输入中的文本更改时获取信息。在我的单元格中，我重载`render()`和`onBrowserEvent()`方法。这是代码：

```
public HourPickerCell() {
    super("change", "keyup");
}

@Override
public void render(Context context, String value, SafeHtmlBuilder sb) {
    if (value == null) {
        return;
    }
    sb.appendHtmlConstant("<input class=\"hourPicker\" type=\"text\" value=\"" + value + "\"></input>");        
}

@Override
public void onBrowserEvent(Context context, Element parent, String value, NativeEvent event, ValueUpdater<String> valueUpdater) {
    System.out.println(event.getType());
    super.onBrowserEvent(context, parent, value, event, valueUpdater);

    if (event.getType().equals("change")) {
        EventTarget eventTarget = event.getEventTarget();
        if (!Element.is(eventTarget)) {
            return;
        }
        if (parent.getFirstChildElement().isOrHasChild(Element.as(eventTarget))) {
            InputElement input = (InputElement) parent.getFirstChild();
            valueUpdater.update(input.getValue());
        }
    }       
} 
```

如您所见，我尝试捕捉`change`事件。在 Firefox 和 chrome 上一切正常。当我在输入中写一些东西，然后按到其他单元格时，我会在控制台中得到以下结果：

`keyup keyup keyup keyup keyup keyup keyup change keyup`

其中一个事件是“改变”——这就是我需要的。不幸的是，在 Internet Explorer 上我只收到：

`keyup keyup keyup keyup keyup keyup keyup`

没有更改事件。谁能告诉我问题出在哪里？有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:59:46.820

在 Internet Explorer 中，`change`事件不会冒泡 [1]，因此您必须在`input`元素上监听事件。其他浏览器都实现了`change`事件冒泡的 HTML5 行为 [2]。

我不知道正确的修复方法，但您可能最好使用或复制`TextInputCell`已经完成所有艰苦工作的方法。

[1] [http://msdn.microsoft.com/en-us/library/ie/ms536912(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536912(v=vs.85).aspx)
[2] [http://dev.w3.org/html5/spec/common- input-element-apis.html#event-input-change](http://dev.w3.org/html5/spec/common-input-element-apis.html#event-input-change)

* * *

附带说明一下，您的`render`方法不安全（如果`value`包含引号怎么办？）您可能想要使用`SafeHtmlUtils`或 a `SafeHtmlTemplates`（参见代码`TextInputCell`）

# windows - 使用 windows azure 实现视频编辑套件

> ID：13452176
> 
> 赞同：1
> 
> 时间：2012-11-19T10:45:42.210
> 
> 标签：windows, video, azure, edit

我是一名学生，正在准备有关 azure 服务的演示文稿。我的演讲重点是可以为迁移到云端的电影公司提供哪些服务。特别是我想知道在线提供高端视频编辑服务的可行性，以便电影摄制组可以访问视频数据并从世界上的远程位置进行编辑。具体来说，是否可以通过 azure 实现 Adob​​e Premiere pro 等视频编辑套件？任何输入将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:14:26.943

对我来说听起来像是家庭作业。

我不确定云中的视频*编辑*，因为这些应用程序套件往往非常注重图形，并且绑定到台式计算机（尽管此规则有一些例外）。

Azure 可以通过两种主要方式支持电影业：

1.  通过将渲染任务分配到计算机网格来渲染视频动画（例如）。这项工作往往需要突发，因此能够打开/关闭云中的大量计算机可以降低资本成本。[了解 Pixar 在 Azure 上的 RenderMan](http://thenextweb.com/microsoft/2010/10/28/microsoft-and-pixar-team-up-to-bring-renderman-on-azure/)
2.  [Windows Azure 媒体服务](https://www.windowsazure.com/en-us/home/features/media-services/)提供视频编码和传送服务，可以轻松地在大量设备（如 iPhone、XBox、Flash 等）和地理（即在世界各地缓存）分发和保护视频内容。

[Blob Storage](https://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)也可能适合您的场景。一种低成本、高可用性的文件存储系统。您可以在世界的一个地方上传视频内容，然后可以将其提供给世界其他地方的其他团队成员。

# split - Base64 部分编码

> ID：13452179
> 
> 赞同：0
> 
> 时间：2012-11-19T10:45:52.790
> 
> 标签：split, base64, decode, encode

我必须在 base64 中编码一个字节数组（即 Zipfile 的字节流），但数组太大。所以我把数组分成两部分，编码前半部分，然后编码第二部分，最后我将第二部分附加到第一部分。问题是，有时当我解码结果时，zipfile 似乎已损坏。

```
 FileInputStream fis = new FileInputStream(new File(filePath));
    ByteArrayOutputStream baos = new ByteArrayOutputStream();

    while((len = fis.read(buffer)) >= 0) {
        baos.write(buffer);
    }

    byte[] bArray = baos.toByteArray();

    int bArrayLength = bArray.length;

    byte[] part1 = new byte[bArray.length / 2];
    byte[] part2 = new byte[ (bArrayLength%2 == 0) ? (bArray.length / 2) : (bArray.length / 2 + 1)];

    System.arraycopy(bArray, 0, part1, 0, part1.length);
    System.arraycopy(bArray, part1.length, part2, 0, part2.length);

    resultArray[0] = Base64.encodeBytes(part1);
    resultArray[1] = Base64.encodeBytes(part2); 
```

问题是什么？是导致问题的分裂吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:51:35.817

base 64 编码读取 3 个字节并将它们转换为 4 个字节，如果文本未与 3/4 因子对齐，则需要添加一个填充，因此当您拆分文件时，编码过程中有 2 个填充，以及您需要将其拆分为两半，正好在焊盘完成的位置根据 4 字节读取/3 字节输出因子解码它们，然后再次连接它们，因此您需要考虑前后每半的大小进程工作的编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:52:13.570

*由于padding*，这可能不起作用。如果 Base64 算法的编码导致尾组（24 位）仅包含 1 个字节，则 Base64 算法用 == 填充其输出，或者如果仅包含 2 个字节，则使用 = 填充其输出。这意味着您不能只是将两个编码字符串相加并期望得到正确的结果。

但是你怎么知道数组太大了——你会得到 OutOfMemoryException 吗？

您可能会尝试不完全在中间点拆分，而是选择一个不同的点，直到您不再获得该部分的尾随 =。

另见[http://en.wikipedia.org/wiki/Base64](http://en.wikipedia.org/wiki/Base64)。

# c++ - 重载运算符 < 用于长值数组

> ID：13452181
> 
> 赞同：1
> 
> 时间：2012-11-19T10:45:57.933
> 
> 标签：c++

我的 operator< 重载实现不适用于围绕长值数组的包装类。

在将这个包装类用于 std::map 中的 Key 时，如果我混合不同长度的数组，调用 at/find 的函数将不起作用。

```
const oid oid1[] = { 1,3,6,1,4,1,42570,1,3,1 };
oid_wrapper wrapper1(oid1, 10);
const oid oid2[] = { 1,3,6,1,4,1,42570,1,3,1,9,1 };
oid_wrapper wrapper1(oid2, 12); 
```

当先添加 wrapper1 然后将 wrapper2 添加到映射时，它总是会使用 at/find 找到 wrapper1，但对于 wrapper2，它会抛出一个带有 at 和 iterator.end 的 out_of_range 异常。
当先添加 wrapper2 然后将 wrapper1 添加到映射中时，它总是会使用 at/find 找到 wrapper2，但对于 wrapper1，它会使用 at 和使用 find 的 iterator.end 抛出一个 out_of_range 异常。

oid 类型来自 Net-SNMP，实际上是一个 unsigned long int。
那么我的实现缺少什么或做错了什么？

```
#include <ostream>
#include <sstream>
#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>

class oid_wrapper {
public:
    oid_wrapper(const oid* _oid_value, int _oid_length) : oid_value(0), oid_length  (_oid_length) {
        oid_value = snmp_duplicate_objid(_oid_value, oid_length);
    }

    const oid* get_oid() const { return oid_value; }
    const int& get_length() const { return oid_length; }

    /**
     * copy operator overloader
     */
    oid_wrapper& operator=(const oid_wrapper& wrapper) {
        oid_value = snmp_duplicate_objid(wrapper.get_oid(), wrapper.get_length());
        oid_length = wrapper.get_length();

        return *this;
    }

    /**
     * equal operator overloader
     */
    bool operator==(const oid_wrapper& rhs) const {
        const oid* rhs_oid = rhs.get_oid();
        const int rhs_length = rhs.get_length();

        if (netsnmp_oid_equals(oid_value, oid_length, rhs_oid, rhs_length) == 0) {
            return true;
        } else {
            return false;
        }
    }

    /**
     * less-than operator overloader
     */
    bool operator<(const oid_wrapper& rhs) const {
        const oid* rhs_oid = rhs.get_oid();
        const int rhs_length = rhs.get_length();

        if (oid_length < rhs_length) { return true; }

        for (int i = 0; i < oid_length; i++) {
            if (oid_value[i] < rhs_oid[i]) { return true; }
        }

        return false;
    }

    const long getLastNumberInOid() const { return oid_value[oid_length - 1]; }

    bool operator!=(const oid_wrapper& rhs) { return !operator==(rhs); }
    bool operator>(const oid_wrapper& rhs) { return !operator<(rhs); }
    bool operator<=(const oid_wrapper& rhs) { return !operator>(rhs); }
    bool operator>=(const oid_wrapper& rhs) { return !operator<(rhs); }

private:
    const oid* oid_value;
    int oid_length;
}; 
```

这是我设计的测试类，用于检查它是否有效：

```
#include <iostream>
#include <ostream>
#include <string>
#include <map>
#include <stdexcept>

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>

#include "oid_wrapper.h"

using namespace std;

int main(int argc, char **argv) {

    cout << "Testing first set of OID" << endl;
    const oid oid1[] = { 1,3,6,1,4,1,40850,1,3 };
    const oid_wrapper parent1 (oid1, 9);
    const oid_wrapper parent1_child1 (parent1, 40);
    const oid_wrapper parent1_child2 (parent1, 41);
    const oid_wrapper parent1_child3 (parent1, 42);
    const oid_wrapper parent1_child4 (parent1, 43);

    map<oid_wrapper, string> test;
    test.insert(make_pair(parent1_child1, "parent1_child1"));
    test.insert(make_pair(parent1_child2, "parent1_child2"));
    test.insert(make_pair(parent1_child3, "parent1_child3"));
    test.insert(make_pair(parent1_child4, "parent1_child4"));
    if (test.size() != 4) { cout << "FAIL" << endl; }
    cout << "Number of OID in list: " << test.size() << endl;

    const oid_wrapper parent11 (oid1, 9);
    const oid_wrapper parent1_child11 (parent11, 40);
    try {
        string teststring = test.at(parent1_child11);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child12 (parent11, 41);
    try {
        string teststring = test.at(parent1_child12);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child13 (parent11, 42);
    try {
        string teststring = test.at(parent1_child13);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child14 (parent11, 43);
    try {
        string teststring = test.at(parent1_child14);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    cout << "Testing second set of OID" << endl;
    const oid oid2[] = { 1,3,6,1,4,1,40850,2,1,9,1 };
    const oid_wrapper parent2 (oid2, 11);
    const oid_wrapper parent2_child1 (parent2, 1);
    const oid_wrapper parent2_child2 (parent2, 2);
    const oid_wrapper parent2_child3 (parent2, 3);
    const oid_wrapper parent2_child4 (parent2, 4);

    test.insert(make_pair(parent2_child1, "parent2_child1"));
    test.insert(make_pair(parent2_child2, "parent2_child2"));
    test.insert(make_pair(parent2_child3, "parent2_child3"));
    test.insert(make_pair(parent2_child4, "parent2_child4"));
    if (test.size() != 8) { cout << "FAIL" << endl; }
    cout << "Number of OID in list: " << test.size() << endl;

    const oid_wrapper parent21 (oid2, 11);
    const oid_wrapper parent1_child21 (parent21, 1);
    try {
        string teststring = test.at(parent1_child21);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child22 (parent21, 2);
    try {
        string teststring = test.at(parent1_child22);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child23 (parent21, 3);
    try {
        string teststring = test.at(parent1_child23);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    const oid_wrapper parent1_child24 (parent21, 4);
    try {
        string teststring = test.at(parent1_child24);
        cout << "Success" << endl;
    } catch (out_of_range& e) {
        cout << "Failure" << endl;
    }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,1,9,1 };
        const oid_wrapper wrapper(newoid, 11, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run1 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,1,9,1 };
        const oid_wrapper wrapper(newoid, 11, i);

        try {
            string teststring = test.at(wrapper);
            run1++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run1 == 100) { cout << "Run 1 Success" << endl; }
    else { cout << "Run 1: " << run1 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,1,3 };
        const oid_wrapper wrapper(newoid, 9, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run2 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,1,3 };
        const oid_wrapper wrapper(newoid, 9, i);

        try {
            string teststring = test.at(wrapper);
            run2++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run2 == 100) { cout << "Run 2 Success" << endl; }
    else { cout << "Run 2: " << run2 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 10; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2 };
        const oid_wrapper wrapper(newoid, 8, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run3 = 0;
    for (int i = 0; i < 10; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2 };
        const oid_wrapper wrapper(newoid, 8, i);

        try {
            string teststring = test.at(wrapper);
            run3++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run3 == 10) { cout << "Run 3 Success" << endl; }
    else { cout << "Run 3: " << run3 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,2,5,1 };
        const oid_wrapper wrapper(newoid, 11, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run4 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,2,5,1 };
        const oid_wrapper wrapper(newoid, 11, i);

        try {
            string teststring = test.at(wrapper);
            run4++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run4 == 100) { cout << "Run 4 Success" << endl; }
    else { cout << "Run 4: " << run4 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,3,5,2 };
        const oid_wrapper wrapper(newoid, 11, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run5 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,3,5,2 };
        const oid_wrapper wrapper(newoid, 11, i);

        try {
            string teststring = test.at(wrapper);
            run5++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run5 == 100) { cout << "Run 5 Success" << endl; }
    else { cout << "Run 5: " << run5 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,2,5,2 };
        const oid_wrapper wrapper(newoid, 10, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run6 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,2,5,2 };
        const oid_wrapper wrapper(newoid, 10, i);

        try {
            string teststring = test.at(wrapper);
            run6++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run6 == 100) { cout << "Run 6 Success" << endl; }
    else { cout << "Run 6: " << run6 << endl; }

    //#################################################

    //Adding 100 OIDs
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,5,2,3,5 };
        const oid_wrapper wrapper(newoid, 12, i);
        test.insert(make_pair(wrapper, "wrapper"));
    }

    //Query for the 100 added OIDs
    int run7 = 0;
    for (int i = 0; i < 100; i++) {
        const oid newoid[] = { 1,3,6,1,4,1,40850,2,5,2,3,5 };
        const oid_wrapper wrapper(newoid, 12, i);

        try {
            string teststring = test.at(wrapper);
            run7++;
        } catch (out_of_range& e) {
            //FAIL
        }
    }
    if (run7 == 100) { cout << "Run 7 Success" << endl; }
    else { cout << "Run 7: " << run7 << endl; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:22:53.183

问题可能是你`operator<`不是反对称的。想象一下这段代码：

```
const oid oid1[] = {5};
oid_wrapper wrapper1(oid1, 1);

const oid oid2[] = {1, 4};
oid_wrapper wrapper2(oid2, 2);

bool b1 = wrapper1 < wrapper2;
bool b2 = wrapper2 < wrapper1; 
```

`b1`是`true`，因为 的`wrapper1`长度小于 的 长度`wrapper2`。

`b2`也是`true`，因为第一个 oid in`wrapper2`小于 in `wrapper1`。

您必须确保`operator<`是总订购。它应该返回`false`if `oid_length > rhs_length`。

此外，您不能实现`operator>`as `! <`，因为这不适用于相等的值。运营商的最佳选择是将其余部分实现`operator==`并`operator<`表示为（伪代码）：

```
operator!=(a, b)  {! (a == b)}
operator<=(a, b)  {a < b || a == b}
operator>(a, b)   {! (a < b)}
operator>=(a, b)  {! (a < b)} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T09:41:13.647

我使用 net-snmp 函数 snmp_oid_compare 而不是实现自己的比较。这解决了问题。

```
#ifndef OID_WRAPPER_H_
#define OID_WRAPPER_H_

#include <stdio.h>
#include <stdlib.h>

#include <ostream>
#include <sstream>

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>

class oid_wrapper {
    friend std::ostream& operator<<(std::ostream& output, const oid_wrapper& wrapper);
public:
    oid_wrapper(const oid* _oid_value, unsigned long _oid_length) : oid_value(0), oid_length(_oid_length) {
        oid_value = snmp_duplicate_objid(_oid_value, oid_length);

    }

    const oid* get_oid() const { return oid_value; }
    const unsigned long& get_length() const { return oid_length; }

    int compare(const oid_wrapper& rhs) const {
        return snmp_oid_compare(oid_value, oid_length, rhs.oid_value, rhs.oid_length);
    }

    void print(std::ostream &out) const {
        for(unsigned long i = 0; i < oid_length; i++) {
            if (i != 0) { out << "."; }
            out << oid_value[i];
        }
    }

    /**
     * copy operator overload
     */
    oid_wrapper& operator=(const oid_wrapper& wrapper) {
        if (oid_value != 0) { free(oid_value); }

        oid_value = snmp_duplicate_objid(wrapper.oid_value, wrapper.oid_length);
        oid_length = wrapper.oid_length;

        return *this;
    }

    /**
     * assignment operator overload
     */
    oid operator[](unsigned long i) {
        return (i < oid_length) ? oid_value[i] : oid();
    }

    bool operator==(const oid_wrapper& rhs) const { return compare(rhs)==0; }
    bool operator!=(const oid_wrapper& rhs) const { return compare(rhs)!=0; }
    bool operator<(const oid_wrapper& rhs) const { return compare(rhs)<0; }
    bool operator>(const oid_wrapper& rhs) const { return compare(rhs)>0; }
    bool operator<=(const oid_wrapper& rhs) const { return compare(rhs)<=0; }
    bool operator>=(const oid_wrapper& rhs) const { return compare(rhs)>=0; }

private:
    oid* oid_value;
    unsigned long oid_length;
};

/**
 * output operator overloader
 */
inline std::ostream& operator<<(std::ostream& output, const oid_wrapper& wrapper) {
    wrapper.print(output);
    return output;
}

#endif /* OID_WRAPPER_H_ */ 
```

函数 snmp_oid_compare 的代码。这可用于需要比较长数组的任何实现。

```
 int snmp_oid_compare(const oid * in_name1, size_t len1, 
                     const oid * in_name2, size_t len2)
    {
        register int len;
        register const oid *name1 = in_name1;
        register const oid *name2 = in_name2;

        /*
         * len = minimum of len1 and len2
         */
        if (len1 < len2) { len = len1; }
        else { len = len2; }

        /*
         * find first non-matching OID
         */
        while (len-- > 0) {
            /*
             * these must be done in seperate comparisons, since
             * subtracting them and using that result has problems with
             * subids > 2^31.
             */
            if (*(name1) != *(name2)) {
                if (*(name1) < *(name2)) { return -1; }
                return 1;
            }
            name1++;
            name2++;
        }

        /*
         * both OIDs equal up to length of shorter OID
         */
        if (len1 < len2) return -1;
        if (len2 < len1) return 1;

        return 0;
    } 
```

# python - 遍历字典映射。Django 模板

> ID：13452183
> 
> 赞同：0
> 
> 时间：2012-11-19T10:46:02.633
> 
> 标签：python, django, django-templates

我正在传递一个 django 模板，一个像这样的参数：

```
{'dict' : {Object0:[object1, object2, object3,.....], Object1:[object4, object5], ... } } 
```

无论如何要遍历模板中的那个字典吗？
这样的事情是行不通的：

```
{% for obj in dict  %}  
    {% for objs in dict.obj %}
              {# do sth here ... #}
    {% endfor %}
{% endfor %} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:52:53.263

在 Python 中，遍历 dict 只是遍历它的键。您想要以下值：

```
{% for obj in dict.values %}
    {% for item in obj %}
        {{ item }}
    {% endfor %}
{% endfor %} 
```

如果您需要键和值，则可以使用`items`：

```
{% for key, value in dict.items %} 
```

# visual-studio-2010 - 签署程序集'密钥容器名称'...'时加密失败

> ID：13452186
> 
> 赞同：1
> 
> 时间：2012-11-19T10:46:22.990
> 
> 标签：visual-studio-2010

VS2010 专业版，我正在尝试编译我下载的项目我收到此错误：

```
Error   2   Cryptographic failure while signing assembly 
'E:\...\bsn.GoldParser.dll' -- 
'The key container name 'bsn' does not exist' 
```

我不在乎它是否签名。“签署程序集”在项目选项中已关闭，我检查了 .csproj 文件并且 SignAssembly 为假。如何摆脱此消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T13:35:10.373

1.  `<KeyContainerName>bsn</KeyContainerName>`从两者中删除该行`bsn.GoldParser.Test.csproj`并`bsn.GoldParser.csproj`通过卸载项目并编辑项目文件
2.  从属性中删除 PublicKey 部分，`bsn.GoldParser\Properties\AssemblyInfo.cs`如下所示：`[assembly: InternalsVisibleTo("bsn.GoldParser.Test")]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T00:58:20.180

您是否检查过您的 AssemblyInfo.cs 文件以确保您没有指定 AssemblyKeyName 属性？

# jakarta-ee - 从 EJB3.0 注释生成文档

> ID：13452190
> 
> 赞同：2
> 
> 时间：2012-11-19T10:46:32.957
> 
> 标签：jakarta-ee, annotations, ejb-3.0, documentation-generation

我们正在实现一个 Java EE 应用程序，我们广泛使用 EJB3.0 注释来定义会话 bean、消息驱动 bean，并注入 JMS 和 JDBC 依赖对象。

我想找到一个类似于 javadoc 编译器的工具（不是编写现成的代码），它会生成一个摘要文档，其中包含 EJB 模块中定义的 bean 的摘要列表、它们的依赖项，并且可能会生成部署计划片段便于复制和粘贴和覆盖。（我们使用 Websphere Community Edition 3.0）。

该文档的主要用途将是由将部署应用程序并将其带入生产环境以审查其依赖关系并为实际部署做准备的人员。

# c# - crpe32.dll C# - 无法向报告添加/获取参数

> ID：13452194
> 
> 赞同：1
> 
> 时间：2012-11-19T10:46:49.010
> 
> 标签：c#, types, crystal-reports, dllimport

我在使用 crpe32.dll 打印 Crystal Reports 时遇到问题（由于某些原因，我们无法使用 CrystalDecisions.CrystalReports.Engine 中的 ReportDocument clss）。当我尝试打印没有参数的报告时，没有任何错误。使用导入的dll中的方法就足够了：
- PEOpenEngine
- PEOpenPrintJob
- PEOutputToPrinter
- PEStartPrintJob
- PEClosePrintJob
- PECloseEngine

但是我在必须传递结构的方法上遇到问题，例如 PEGetNthParameterField 或 PEAddParameterCurrentValue。结果我仍然得到“错误”，我的结构没有改变。

```
private static void PrintTest()
    {
        int o1 = PEOpenEngine();
        if (o1 == 0)
        {
            return;
        }

        int o2 = PEOpenPrintJob("someReport.rpt");

        short paramCounts = PEGetNParameterFields(o2); // I've got here 4 in one of my real reports

        PEParameterFieldInfo paramInfo = new PEParameterFieldInfo();
        paramInfo.StructSize = 316;
        bool isParamCorrect = PEGetNthParameterField(o2, 0, ref paramInfo); // false :( and unchanged paramInfo

        int o3 = PEOutputToPrinter(o2, 1);
        int o4 = PEStartPrintJob(o2, true);
        int o5 = PEClosePrintJob(o2);

        int oLast = PECloseEngine();
    }

    [DllImport("crpe32.dll")]
    static extern short PEGetNParameterFields(int PrintJob);
    [DllImport("crpe32.dll")]
    static extern bool PEGetNthParameterField(int PrintJob, int parameterN, ref PEParameterFieldInfo parameterInfo); 
```

可能是我的问题的根源 - PEParameterFieldInfo 结构

```
 public struct PEParameterFieldInfo
    {
        public int StructSize;
        public int ValueType;
        public int DefaultValueSet;
        public int CurrentValueSet;
        public string Name;
        public string Prompt;
        public string DefaultValue;
        public string CurrentValue;
        public string ReportName;
        public int needsCurrentValue;
        public int isLimited;
        public double MinSize;
        public double MaxSize;
        public string EditMask;
        public int isHidden;
    } 
```

你知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:13:27.167

这是我使用的结构声明的一个例子，也许它可能是错误的原因？

```
 private struct PESubreportInfo
    {
        public short StructSize;
        [MarshalAs(UnmanagedType.ByValArray, SizeConst = PE_SUBREPORT_NAME_LEN)]
        public char[] Name;       
    } 
```

# jquery - jQuery Fancybox 触发器

> ID：13452197
> 
> 赞同：4
> 
> 时间：2012-11-19T10:47:14.107
> 
> 标签：jquery, fancybox

我使用 fancybox 来打开一个带有表单的弹出窗口。目前，当鼠标离开主页时，弹出窗口就会出现。为了完成这项工作，我有一个隐藏的链接标签，我用 trigger() 函数模拟该标签，单击该链接的href，它是用fancybox形成的id。代码如下：

```
<a id="trigger" href="#feedback_form" style="display:none"></a>

$(document).mouseleave(function() {

//Triggers popup
$("#trigger").fancybox().trigger('click'); 

     //Popup function
     $("#trigger").fancybox({

     });

 }); 
```

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T17:24:20.950

**选项1**：隐藏链接和两个功能：

1.1 将 fancybox 绑定到选择器：

```
$("#trigger").fancybox(); 
```

1.2 然后触发选择器：

```
$("#trigger").trigger('click'); 
```

**选项 2**：隐藏链接和单一功能：

```
$(document).mouseleave(function() {
    $("#trigger").fancybox().trigger('click');
});​ 
```

请参阅：**[JSFIDDLE](http://jsfiddle.net/fEeqf/)**

**选项 3**（推荐）：无隐藏链接和单一功能：

```
$(document).mouseleave(function() {
    $.fancybox("#feedback_form");
});​ 
```

请参阅：**[JSFIDDLE](http://jsfiddle.net/kmqzV/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:54:15.040

您也可以使用 mouseout：

```
$(document).mouseout(function() {
  $(".fancybox").fancybox();
}); 
```

不确定这是否有很大帮助，但它可能比 mouseleave 稍微好一些，mouseleave 最初是一个仅限 IE 的事件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-19T10:54:40.980

你可以简单地这样做：

```
$(document).mouseleave(function() {

//Triggers popup
jQuery.fancybox({

href:$('yourcontentSelector');

 });

}); 
```

# vbscript - VB脚本根据文件夹结构移动子文件夹

> ID：13452198
> 
> 赞同：0
> 
> 时间：2012-11-19T10:47:16.257
> 
> 标签：vbscript

我对 VB 脚本非常陌生，我需要 VB 脚本来根据文件夹名称结构移动特定的子文件夹（即从“test2”中提取确切的“abc”子文件夹并需要移动到“test1” ") 和文件夹的确切结构如下

*   E:\test1\42\5423284\4967957\html
*   E:\test1\43\5403284\4567051\html
*   E:\test1\48\7723589\9977457\html
*   E:\test1\47\5428284\2797932\html
*   E:\test1\42\5468284\1487651\html

在上面，“html”文件夹不包含任何“abc”子文件夹

我想将“abc”子文件夹下方移动到“html”文件夹上方

*   E:\test2\42\5423284\4967957\html\abc
*   E:\test2\43\5403284\4567051\html\abc
*   E:\test2\48\7723589\9977457\html\abc
*   E:\test2\47\5428284\2797932\html\abc
*   E:\test2\42\5468284\1487651\html\abc

任何机构都可以帮助解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:20:09.457

根据[您对“删除文件夹”问题的回答](https://stackoverflow.com/a/13429422/603855)：

只需提供如下方法：

```
 Public Function processFolder(oFolder)
    WScript.Echo "looking at", oFolder.Path
    processFolder = True
    If "abc" = oFolder.Name Then
       WScript.Echo "will move", oFolder.Path
       WScript.Echo "       to", Replace(oFolder.Path, "\df\", "\mf\")
       oFolder.Move Replace(oFolder.Path, "\df\", "\mf\")
       processFolder = False
    End If
  End Function 
```

# c++ - linux中lstrcpy的使用

> ID：13452199
> 
> 赞同：1
> 
> 时间：2012-11-19T10:47:19.253
> 
> 标签：c++, linux

linux中lstrcpy的等价物是什么？

它与 strcpy 有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:05:25.487

`lstrcpy`是一个 Windows API，它为您的构建复制适当的字符大小（`wchar`或者`char`取决于您构建应用程序的方式）。没有直接的 linux 等效项（因为您必须知道要使用哪个，而不需要编译器为您解决），而是`wcscpy`复制`wchar*`字符串。

# php - 使用匿名函数在 ZF2 中的条件

> ID：13452200
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:47:19.513
> 
> 标签：php, zend-db, zend-framework2

正如官方文档所说，我在 ZF2 模型（[Zend\Db\TableGateway](http://framework.zend.com/manual/2.0/en/modules/zend.db.table-gateway.html)）中使用了一个匿名 PHP 函数

```
 use Zend\Db\TableGateway\TableGateway;
 use Zend\Db\Sql\Select;
 $artistTable = new TableGateway('artist', $adapter);

 // search for at most 2 artists who's name starts with Brit, ascending
 $rowset = $artistTable->select(function (Select $select) {
      $select->order('name ASC');
 }); 
```

如何在此匿名函数中传递参数以在 where 条件中添加过滤器？

我想使用类似的东西：

```
$this->select(function (Select $select) {
            $select->where(array('artist', $artist));
            $select->order('name ASC');
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:51:34.040

试试这个

```
$artist = 'John';
$rowset = $artistTable->select(function (Select $select) use ($artist) {
    $select->where(array('artist', $artist));
    $select->order('name ASC');
}); 
```

# asp.net-mvc-3 - 将表达式 m => m.Name 转换为 m => m[index].Name

> ID：13452205
> 
> 赞同：0
> 
> 时间：2012-11-19T10:47:52.800
> 
> 标签：asp.net-mvc-3, lambda, expression

给定一个`Expression<Func<T, TValue>>`(like `m => m.Name`) 和 an `index`，我希望能够将我的表达式转换为`m => m[index].Name`)。我必须承认我被困住了......

如果您想要“为什么”（也许会找到更好的方法），我会给您实际的场景。

场景：想象一个**服务器端可编辑网格**（*没有 javascript*）。

我用一个看起来像这样的助手构建我的网格：

```
@(Html.Grid(Model)
.Columns(columns => {
   columns.Edit(m => m.Name);
   columns.Edit(m => m.Code);
})
.AsEditable()); 
```

模型是一个`IQueryable<T>`

`m => m.Name`是一个`Expression<Func<T, TValue>>`（`TValue`是字符串）

`m => m.Code`是一个`Expression<Func<T, TValue>>`（`TValue`是 int）

渲染视图时，我想显示一个 html 表单。被`IQueryable<T>`枚举（顺序，分页）。=> 好的

所以我将有`List<T>`5、10 或 20 个`T`项目。

并且应该表示为`Name`，使用经典 （创建没有问题）`Code``TextBox``HtmlHelper.TextBoxFor(Expression<Func<T, TValue>>)``HtmlHelper<T>`

但是因为我有一个列表，如果我想要正确的模型绑定，我不能直接使用`m => m.Name`，但应该使用`m => m[indexOfItem in List<T>].Name`

**编辑**：更多细节：

所以假设我们有一个实体类

```
public class Test {
  public int Id {get;set;}
  public string Name {get;set;}
  public string Code {get;set;}
} 
```

然后，一个方法检索一个`IQueryable<Test>`

然后一个视图

```
@model IQueryable<Test>

@(Html.Grid(Model)
    .Columns(columns => {
       columns.Edit(m => m.Name);
       columns.Edit(m => m.Code);
    })
    .AsEditable()); 
```

如您所见，作为参数给出的模型是`IQueryable<Test>`。

```
m => m.Name 
```

和

```
m => m.Code 
```

只是模型的属性（我想在我的网格中显示为 TextBox）。

该模型是一个`IQueryable<T>`（不是一个`IEnumerable<T>`），因为 Grid 管理排序和分页，所以我的控制器和服务层不需要知道分页和排序。

是不是更清楚了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:15:50.737

这可以通过编写自定义[ExpressionVisitor](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expressionvisitor.aspx)轻松实现：

```
public static class ExpressionExtensions
{
    private class Visitor : ExpressionVisitor
    {
        private readonly int _index;
        public Visitor(int index)
        {
            _index = index;
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            return Expression.ArrayIndex(GetArrayParameter(node), Expression.Constant(_index));
        }

        public ParameterExpression GetArrayParameter(ParameterExpression parameter)
        {
            var arrayType = parameter.Type.MakeArrayType();
            return Expression.Parameter(arrayType, parameter.Name);
        }
    }

    public static Expression<Func<T[], TValue>> BuildArrayFromExpression<T, TValue>(
        this Expression<Func<T, TValue>> expression,
        int index
    )
    {
        var visitor = new Visitor(index);
        var nexExpression = visitor.Visit(expression.Body);
        var parameter = visitor.GetArrayParameter(expression.Parameters.Single());
        return Expression.Lambda<Func<T[], TValue>>(nexExpression, parameter);
    }
} 
```

然后你可以像这样使用这个扩展方法：

```
Expression<Func<Test, string>> ex = m => m.Code;
Expression<Func<Test[], string>> newEx = ex.BuildArrayFromExpression(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:49:46.157

好吧，有一些东西（丑陋，仅用于测试目的）工作，但它使事情变得不清楚，所以我将等待更好的解决方案或以另一种方式构建我的输入：

```
public static Expression<Func<T[], TValue>> BuildArrayFromExpression<T, TValue>(this Expression<Func<T, TValue>> expression, int index)
{
    var parameter = Expression.Parameter(typeof(T[]), "m");
    Expression body = Expression.ArrayIndex(parameter, Expression.Constant(index));
    var type = typeof(T);
    var properties = expression.Body.ToString().Split('.');//ugly shortcut for test only
    foreach (var property in properties.Skip(1))
    {
        var pi = type.GetProperty(property);
        body = Expression.Property(body, type.GetProperty(property));
        type = pi.PropertyType;
    }
    return Expression.Lambda<Func<T[], TValue>>(body, parameter);
} 
```

在 RenderMethod 中使用，为 my 的每一行调用`List<T>`（从 my 返回的分页/有序列表`IQueryable<T>`）

```
public override ... RenderContent(T dataItem) {
  var helper = new HtmlHelper<T[]>(GridModel.Context, new GridViewDataContainer<T[]>(GridModel.PaginatedItems.ToArray(), GridModel.Context.ViewData));
  var modifiedExpression = Expression.BuildArrayFromExpression(GridModel.PaginatedItems.IndexOf(dataItem));//GridModel.PaginatedItems is the List<T> returned when "executing" the IQueryable<T>
  var textBox = helper.TextBoxFor(modifiedExpression);
  ...
} 
```

# php - 动态数据中的分页

> ID：13452209
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:48:13.953
> 
> 标签：php, mysql, session, hyperlink, dynamic-data

我想为呈现动态数据的页面添加分页。但是当我单击页面链接（1、2、3 等）时，出现以下错误。我对php相当陌生，请协助。

> 注意：未定义索引：第 4 行 C:\wamp\www\HR\HR_Applicants.php 中的 Jobid 注意：未定义索引：第 8 行 C:\wamp\www\HR\HR_Applicants.php 中的 Jobid 警告：mysql_result() 需要参数 1 为资源，在第 18 行的 C:\wamp\www\HR\HR_Applicants.php 中给出的布尔值 注意：使用未定义的常量 mysql_error - 在 C:\wamp\www\HR\HR_Applicants.php 中假定为“mysql_error”第 28 行

第4行错误之后的所有错误发生是因为当我单击分页链接（即1、2、3等）时Jobid失去了它的价值。最初，当页面加载时，它会落在正常（未分页的页面）上，并且工作正常。单击分页链接时会出现问题。

下面是分页页面的代码。

```
<?php
session_start();
print_r( $_GET, true );
print_r($_REQUEST['Jobid']);

require 'scripts/connect.php';
//Get the Person's jobid
    $jobid = $_GET['Jobid'];

//the number of rows to show per page   
$per_page = 2;

//Count the number of items in the database
$pages_query = mysql_query("SELECT COUNT('Personid') FROM person where jobid=$jobid");

//Round the number of pages to the nearest 10
$pages = ceil(mysql_result($pages_query,0) / $per_page);

//Check if there value of page is set
$page = (isset($_GET['page'])) ?(int)$_GET['page']: 1;

//Start counting from zero
$start = ($page -1)* $per_page;

//Select the data from the datbase, but limit it to the number of item per page
$Personid_query ="SELECT * FROM person where jobid=$jobid LIMIT $start ,$per_page";
$Personid = mysql_query($Personid_query) or die(mysql_error);
$row = mysql_fetch_assoc($Personid); 
```

?>

上面的代码就在顶部，就在 HTML 标记之前。以下代码属于 HTML 标记，因为向用户显示的数据是动态的，并且是从找到“jobid”的数据库中选择的。

```
<fieldset>
                            <?php do{?>

                                <p><a href="Resume.php?Personid=<?php echo $row['Personid'];?>"><?php echo $row['Personid']?></a></p>
                                <?php echo $row['Title'];?>&nbsp;<?php echo $row['Forename']?>&nbsp;<?php echo $row['Surname']?>&nbsp;&nbsp;&nbsp;&nbsp;<?php echo $row['ApplicationDate'];?>

                                <?php }while ($row = mysql_fetch_assoc($Personid))?>
                                <br />
                                <?php
                                //Show the pagination links at the bottom of the page
                                if ($pages >= 1 && $page<= $pages)
                                    {
                                        for($i=1;$i<=$pages;$i++)
                                            {   

                                                echo '<a href="?page='.$i.'">'.$i.'</a> ';

                                            }
                                    }

                                ?>        

                        </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:50:22.120

您没有在后续页面链接中传递 Jobid 参数。

```
echo '<a href="?page='.$i.'">'.$i.'</a> '; 
```

应该

```
echo '<a href="?Jobid='.$_GET['Jobid'].'&page='.$i.'">'.$i.'</a> '; 
```

# html - 无法隐藏 div

> ID：13452211
> 
> 赞同：0
> 
> 时间：2012-11-19T10:48:17.150
> 
> 标签：html

我有组合框，需要根据我选择的选项显示，

但是当我将 display none 设置为 div 时，它并没有被隐藏。可能是什么问题呢。

下面是html代码和java脚本

```
<div id="addBanks" style="display: none" style="overflow: auto;height: 75%">
                        <table id="commonBodyTable" border="0" cellspacing="0" cellpadding="0" align="center">
                            <tr>
                                <td>
                                    <table width="100%" align="center" class="tableBorder2" border="0" cellpadding="2" cellspacing="0">
                                        <tr>
                                            <td colspan="4" class="mainheader">Add Banks</td>
                                        </tr>
                                        <tr class="darkrow">
                                            <td width="30%" class="textalign">Bank Code</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign" ><input type="text" class="textbox" name="bankcode" id="bankcode" maxlength="20"  /></td>

                                        </tr>
                                        <tr class="lightrow">
                                            <td width="30%" class="textalign">Bank Name</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign" ><input type="text" class="textbox" name="bankname" id="bankname" maxlength="20"  /></td>

                                        </tr>
                                        <tr class="darkrow">
                                            <td width="30%" class="textalign">Branch Code</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign" ><input type="text" class="textbox" name="branchcode" id="branchcode" maxlength="20"  /></td>
                                        </tr>
                                        <tr class="lightrow">
                                            <td width="30%" class="textalign">IFSC Code</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign" ><input type="text" class="textbox" name="ifsccode" id="ifsccode" maxlength="20"  /></td>
                                        </tr>
                                        <tr class="darkrow">
                                            <td width="30%" class="textalign">Country</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" class="textfieldalign"><select class="combobox" name="countryid" id="countryid" onchange="getStates(this.value)">
                                                    <option value="" >- - - Select Country Name - - -</option>
                                                </select></td>
                                        </tr>
                                        <tr class="lightrow">
                                            <td width="30%" class="textalign">State</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" class="textfieldalign"><select class="combobox" name="stateid" id="stateid">
                                                    <option value="" >- - - Select State Name - - -</option>
                                                </select></td>
                                        </tr>
                                        <tr class="darkrow">
                                            <td width="30%" class="textalign">District Name</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign" >
                                                <select class="combobox" name="districtid" id="districtid">
                                                    <option value="" >- - - Select District Name - - -</option>
                                                </select></td>
                                        </tr>
                                        <tr class="lightrow">
                                            <td width="30%" class="textalign">Town or Village</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign">
                                                Town <input   type="radio" class="textbox" name="optTownOrVillage" id="optTownOrVillage" value="townOpt" onclick="enableVillageOrTown(this)"/>
                                                Village <input type="radio" class="textbox" name="optTownOrVillage" id="optTownOrVillage" value="villageOpt" onclick="enableVillageOrTown(this)"/>
                                            </td>
                                        </tr>
                                        <div id="villageDiv" style="display: none;">
                                            <tr class="darkrow">
                                                <td width="30%" class="textalign">Village Name</td>
                                                <td width="5%" class="mandatory">*</td>
                                                <td width="65%" colspan="2" class="textfieldalign" >
                                                    <select class="combobox" name="villageid" id="villageid">
                                                        <option value="" >- - - Select Village Name - - -</option>
                                                    </select></td>
                                            </tr>
                                        </div>

                                        <tr class="darkrow">
                                            <div id="townDiv" style="display: none;">
                                                <td width="30%" class="textalign">Town Name</td>
                                                <td width="5%" class="mandatory">*</td>
                                                <td width="65%" colspan="2" class="textfieldalign" >
                                                    <select class="combobox" name="townid" id="townid">
                                                        <option value="" >- - - Select Town Name - - -</option>
                                                    </select></td>
                                            </div>
                                        </tr>

                                        <tr class="darkrow">
                                            <td width="30%" class="textalign">&nbsp;</td>
                                            <td width="5%" class="mandatory">&nbsp;</td>
                                            <td width="65%" colspan="2" class="textfieldalign" ><input type="button" class="submitbu" name="save" id="save" value="Save" onclick="saveState()">
                                                    <input type="button" class="submitbu" name="cancel" id="cancel" value="Cancel" onclick="cancelAddState();"></td>
                                                        </tr>
                                                        </table>
                                                        </td>

                                                        </tr>
                                                        </table>
                                                        </div> 
```

和我的java脚本：

```
function enableVillageOrTown(opt){
                var optionValue = opt.value;
                if(optionValue=='townOpt'){
                     document.getElementById("townDiv").style.display = "";
                     document.getElementById("villageDiv").style.display = 'none';
                }
                if(optionValue=='villageOpt'){
                     document.getElementById("villageDiv").style.display = "";
                     document.getElementById("townDiv").style.display = 'none';
                }

            } 
```

更新 ：

```
<div id="villageDiv" style="display: none;">
                                            <tr class="darkrow">
                                                <td width="30%" class="textalign">Village Name</td>
                                                <td width="5%" class="mandatory">*</td>
                                                <td width="65%" colspan="2" class="textfieldalign" >
                                                    <select class="combobox" name="villageid" id="villageid">
                                                        <option value="" >- - - Select Village Name - - -</option>
                                                    </select></td>
                                            </tr>
                                        </div> 
```

这也没有正确对齐

```
<tr class="lightrow">
                                            <td width="30%" class="textalign">Town or Village</td>
                                            <td width="5%" class="mandatory">*</td>
                                            <td width="65%" colspan="2" class="textfieldalign">
                                                Town <input   type="radio" class="textbox" name="optTownOrVillage" id="optTownOrVillage" value="townOpt" onclick="enableVillageOrTown(this)"/>
                                                Village <input type="radio" class="textbox" name="optTownOrVillage" id="optTownOrVillage" value="villageOpt" onclick="enableVillageOrTown(this)"/>
                                            </td>
                                        </tr> 
```

当页面第一次加载时，这不会隐藏

请帮我找出问题

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:53:00.713

试试这个代码，如果它适合你

```
function enableVillageOrTown(opt){
                var optionValue = opt.value;
                if(optionValue=='townOpt'){
                     document.getElementById("townDiv").style.display = "";
                     document.getElementById("villageDiv").style.display = "none";
                }
                if(optionValue=='villageOpt'){
                     document.getElementById("villageDiv").style.display = "";
                     document.getElementById("townDiv").style.display = "none";
                }

            } 
```

为此，您应该将此代码用于 HTML

```
<!--<div >-->
                                            <tr class="darkrow" id="villageDiv" style="display: none;">
                                                <td width="30%" class="textalign">Village Name</td>
                                                <td width="5%" class="mandatory">*</td>
                                                <td width="65%" colspan="2" class="textfieldalign" >
                                                    <select class="combobox" name="villageid" id="villageid">
                                                        <option value="" >- - - Select Village Name - - -</option>
                                                    </select></td>
                                            </tr>
                                        <!--</div>--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:12:03.803

删除您尝试操作的 DIV，然后隐藏或显示包含下拉列表的 TR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:10:32.667

我试过你提供的代码，结果是正确的：http: [//jsfiddle.net/6mKtZ/](http://jsfiddle.net/6mKtZ/)

...意思`div id="villageDiv" style="display: none;"`是隐藏的，页面上唯一显示的是“？”

# css - 平铺背景中行的不同 x 背景位置

> ID：13452212
> 
> 赞同：3
> 
> 时间：2012-11-19T10:48:33.890
> 
> 标签：css, background, background-image

我想创建一个平铺背景，其中背景的每一行都有一个随机的 x 偏移量。那将是理想的，但如果 CSS 无法做到这一点（我认为不是），那么至少使用单个图像创建主体背景的最佳方法是什么，其中该图像的这几行（比如说 4 行）具有不同的 x职位？

就像是：

```
图像图像图像图像
MAGEIMAGEIMAGEIMAGEI
AGEIMAGEIMAGEIMAGEIM
GEIMAGEIMAGEIMAGEIMA
图像图像图像图像
MAGEIMAGEIMAGEIMAGEI
AGEIMAGEIMAGEIMAGEIM
GEIMAGEIMAGEIMAGEIMA

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:18:11.183

你的图像的大小是多少？如果它非常小，一个*简单*的解决方案是在 photoshop/paint 中做到这一点。生成的图像会大 4 倍，但对于小图像（读取小于 25ko），我认为这是迄今为止最简单的方法。至少我没有看到任何*简单*的 CSS 解决方案来解决您的问题。

如果您的图片很大并且您知道它的高度，您最终可以采用以下方法：http: [//jsfiddle.net/7GPTy/](http://jsfiddle.net/7GPTy/)

这个想法是在`z-index:-1`of`height == image_height`和绝对位置创建几个具有不同左值的 div ......我认为这是一个粗略但可行的解决方案

```
var mybody = document.getElementById('body');
var bodyHeight = mybody.offsetHeight;
var imgHeight = 49; // you could get the size by opening the file
var offsetLines = 4; // this is the number of offset you asked, but you can change that!
var nbOfLines = Math.ceil(bodyHeight/imgHeight);
for(var i=0; i<nbOfLines; i++){
    var newBgDiv = document.createElement('div');
    newBgDiv.className = 'backgroundImg imgOffset_'+(i%offsetLines);
    newBgDiv.style.top = (i*imgHeight) + 'px';
    newBgDiv.style.height = imgHeight + 'px';
    newBgDiv.style.width = '100%';
    mybody.appendChild(newBgDiv);
} 
```

to go through the js code quickly, I basically get the height of the page and divide it by the height of the picture to know how many divs i have to create to generate the entire background. Once done, you simply define the number of different row offset you want (`offsetLines`) and you generate your divs.

In my example, the offset depends on the size of the window (try to resize horizontally your window, you'll see that the offset changes). You can of course fix it to a defined number of pixels !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:33:19.643

If CSS3 is appropriate for your project, you can use multiple backgrounds to do this.

Make an image that is twice the height of your pattern, with the top half filled with your pattern, and the bottom half transparent.

Then use multiple backgrounds to position them accordingly like so:

```
.div {
    background: url(path/to/image.png) 0 0 repeat,
                url(path/to/image.png) 0 {height of image in pixel} repeat
} 
```

Its not a random offset, but with enough variations to this, it would be hard to tell the difference.

If you want to add to the perceived randomness, have a look at [this post](http://designfestival.com/the-cicada-principle-and-why-it-matters-to-web-designers/).

# mysql - sql 每周变得不同

> ID：13452213
> 
> 赞同：0
> 
> 时间：2012-11-19T10:48:45.027
> 
> 标签：mysql, sql

我是一个新手 sql 程序员，所以我需要一些帮助来尝试提取查询。

我需要每周从一张桌子上播放独特的歌曲。

假设在某一周播放了 8 首不同的歌曲，但是这 8 首歌曲每首都播放了无数次，我只想让这 8 首歌曲出现。

我需要通过加入 2 个表、一个 STATS 表和一个 PLAYLIST 表来完成此操作

```
SELECT playlist.p_title AS title, stats.s_week AS week, playlist.p_artist AS artist, p_id
FROM stats, playlist
WHERE stats.s_pid = playlist.p_id
AND s_uid =31
ORDER BY s_week DESC
LIMIT 0 , 30 
```

这是我的原始查询，它为我提供了所有周内播放的所有歌曲，即使它们每周播放了很多次，这是我不想要的。

谁能帮我区分每周的歌曲？

提前致谢 - 拉斯穆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:57:02.113

只需使用 DISTINCT 子句：

```
SELECT DISTINCT
  playlist.p_title AS title,
  stats.s_week AS week,
  playlist.p_artist AS artist, p_id
FROM stats inner join playlist on stats.s_pid = playlist.p_pid
WHERE s_uid =31
ORDER BY s_week DESC
LIMIT 0 , 30 
```

此外，最好使用 a`table1 inner join table2 on table1.id = table2.id`而不是使用 WHERE 子句将两个表连接在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:59:53.427

当您想这样做`for each week`时，最好建议您查看`GROUP BY`...

另外，我建议寻找有关使用`JOIN`语法的教程*（自 1992 年以来一直存在并且通常被认为是使用的标准。`,`在各种 RDBMS 中也经常不推荐使用。）*

```
SELECT
  stats.s_week        AS week,
  stats.p_id          AS pid,
  playlist.p_title    AS title,
  playlist.p_artist   AS artist,
  COUNT(*)            AS plays     /* This shows how many times a track was played */
FROM
  stats
INNER JOIN
  playlist
    ON stats.s_pid = playlist.p_id
WHERE
  s_uid =31
GROUP BY
  stats.s_week,
  stats.p_id,
  playlist.p_title,
  playlist.p_artist
ORDER BY
  stats.s_week DESC
LIMIT
  0 , 30 
```

如果您没有在某些字段中包含表名，我也将它们添加回来。

明确说明该字段的来源总是更好。对于`GROUP BY`和其他用途，它通常是*必需*的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:56:53.603

```
SELECT playlist.p_title AS title, stats.s_week AS week, playlist.p_artist AS artist, p_id
FROM stats, playlist
WHERE stats.s_pid = playlist.p_id
AND s_uid =31
group by playlist.p_title, stats.s_week,playlist.p_artist
ORDER BY s_week DESC
LIMIT 0 , 30 
```

# android - Android 无向图

> ID：13452215
> 
> 赞同：1
> 
> 时间：2012-11-19T10:48:45.823
> 
> 标签：android, graph

我正在使用一种算法从 Android 上的蓝牙 scatternet（[Beddernet](http://code.google.com/p/beddernet/) + [RES 算法](http://ieeexplore.ieee.org/xpl/articleDetails.jsp;jsessionid=DGwfQQ0Qphn6mBzJh7ZfRX6LwmzLgXDnqXP17XNzWJJ8RJyy1y2x!-1188685217?arnumber=6258160&contentType=Conference+Publications)）拍摄快照。但我想使用无向图绘制这个快照。

我找到了一些 Java 库来绘制它，但它们都使用小程序并且 Android 不支持小程序。那么我该如何使用Android呢？（我需要设备而不是计算机上的快照图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T16:17:41.780

我找到了解决方案。

我正在使用这个应用程序[https://github.com/drange/Grapher](https://github.com/drange/Grapher)来实现我的图表。我修改了一些参数以适应我的应用程序。它使用[https://github.com/jgrapht/jgrapht](https://github.com/jgrapht/jgrapht)进行图形算法。

# javascript - $.ajax 完成功能也不触发

> ID：13452220
> 
> 赞同：0
> 
> 时间：2012-11-19T10:48:59.643
> 
> 标签：javascript, ajax, jquery

我有以下代码，

```
$(".delete.red").live("click", function () {
    var self = $(this);
    var loadUrl = $(this).attr('href');
    alert("clicked");
    //var interestParents = self.parents('div:eq(4)').attr("id");
    $.ajax({
        type: "POST",
        url: loadUrl,
        dataType: "json"
    }).success(function (msg) {
        alert(msg);
        self.parent().parent().parent().parent().parent().parent().remove();
        $(".selected strong").text(msg.icount)

    });
    return false;
}); 
```

这段代码在点击链接时会做什么，它会向点击的链接 href 发送请求，然后它应该找到该链接的最外层父级并将自己从标记中删除。

但是请求没有到达`done()`我现在得到的功能反馈它几乎就像它没有被调用，这看起来很奇怪，因为当我查看网络选项卡时，我可以看到链接 href 已被访问，我可以见`200 OK`回应。

发生什么事了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T10:55:26.160

使作为参数传递的选项对象的成功部分

```
$.ajax({
        type: "POST",
        url: loadUrl,
        dataType: "json",
        success: function (msg) {
            alert(msg);
            self.parent().parent().parent().parent().parent().parent().remove();
            $(".selected strong").text(msg.icount);
        }
}); 
```

根据网站，成功回调已在 jQuery 1.8 中被弃用

> **弃用通知：** jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

据该网站称，**live**方法也已被弃用

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。

# c - errno 97 aka EAFNOSUPPORT aka Address family not supported by protocol 的可能原因

> ID：13452224
> 
> 赞同：1
> 
> 时间：2012-11-19T10:49:11.860
> 
> 标签：c, linux, sockets, network-programming

我目前正在修改 Dennis Bush 的 UFTP ( [http://uftp-multicast.sourceforge.net](http://uftp-multicast.sourceforge.net) ) 以满足我的需要。我目前正在尝试做的是更改客户端发送 COMPLETE 消息的地址。我希望我的 UFTP 修改版本的客户端多播 COMPLETE 消息，而不是将其单播回服务器，因为我需要多播组中的每个客户端都能够看到发送的 COMPLETE 消息，而不仅仅是服务器。

UFTP 的作者告诉我，我应该修改**client_transfer.c，第 359 行，nb_sendto() 函数调用，第 5 个参数**到一个包含私有多播地址和我希望将 COMPLETES 发送到的端口的结构。不幸的是，我收到“协议不支持地址系列”错误。代码部分原本是这样的：

```
 if (nb_sendto(listener, outpacket, payloadlen, 0,
               (struct sockaddr *)&group_list[listidx].replyaddr,
               sizeof(struct sockaddr_in)) == SOCKET_ERROR) {
        sockerror(group_list[listidx].group_id, group_list[listidx].file_id,
                "Error sending COMPLETE");
    } else {
        log(group_list[listidx].group_id, group_list[listidx].file_id,
                "COMPLETE sent");
    }
    set_timeout(listidx);

    free(buf);
    free(encrypted); 
```

我当前的代码如下所示：

```
if (nb_sendto(listener, outpacket, payloadlen, 0,
      ////modified line:
              (struct in_addr *)&group_list[listidx].multi.s_addr, //struct in_addr multi;
      ////end of modified line
               sizeof(struct sockaddr_in)) == SOCKET_ERROR) {
        sockerror(group_list[listidx].group_id, group_list[listidx].file_id,
                "Error sending COMPLETE");
    } else {
        log(group_list[listidx].group_id, group_list[listidx].file_id,
                "COMPLETE sent");
    }
    set_timeout(listidx);

    free(buf);
    free(encrypted); 
```

对我来说，这个错误非常模糊。它到底是什么意思？这种错误的可能原因是什么？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:10:40.670

如果您传递的是预期的`in_addr`a `sockaddr`，那么问题很简单，当系统调用查看它认为是 sockaddr 结构中的地址族时，它实际上看到的是多播地址的一个字节，即大概不是一个有效的地址族。

为了解释更多， a`sockaddr_in`看起来像这样：

```
struct sockaddr_in {
    sa_family_t sin_family;
    in_port_t sin_port;
    struct in_addr sin_addr;
} 
```

所以`in_addr`在它之前有一个您没有提供的系列和端口号，而是您的地址的第一个字节被视为地址系列。

# php - 嘿，我正在制作一个联系表单，提交后必须重定向到同一页面

> ID：13452225
> 
> 赞同：0
> 
> 时间：2012-11-19T10:49:13.343
> 
> 标签：php, forms

当 url 是 localhost/school/portfolio/contact.php 它工作正常，但是当我使用获取参数 index.php?page=contact 它重定向到 index.php

我使用的代码

```
$url = "http". ((!empty($_SERVER['HTTPS'])) ? "s" : "") . "://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
        header('Location: '.$url."?sent=yes"); 
```

我要补充什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:59:30.800

这应该有帮助:)

```
<form action="<?php echo $_SERVER['PHP_SELF'] ?>" method="post"> 
```

否则请参阅我对[“如何使用 PHP 获取基本 URL？”的回答。寻求更多帮助的问题](https://stackoverflow.com/questions/2820723/how-to-get-base-url-with-php/2820771#2820771):)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:04:55.390

有几种方法可以做到这一点..（选择适合你的..）
1）使用`$_SERVER['PHP_SELF']`
2）使用`parse_url()`获取`PHP_URL_PATH`和`PHP_URL_QUERY`部分，并重定向到相对路径。
但最好在会话中存储重定向链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T19:52:17.803

这似乎是一个旧线程，但为了帮助该页面的未来访问者，值得添加有关`$_SERVER['PHP_SELF']`.

如果`$_SERVER['PHP_SELF']`按照上面评论中的建议添加到表单操作属性，则您正在为 XSS 攻击设置自己。

`$_SERVER['PHP_SELF']`一种解决方案是像这样包装`htmlentities()`：

```
<form action="<?php echo htmlentities($_SERVER['PHP_SELF']) ?>" method="post"> 
```

这是有关该主题的好读物：

[http://www.html-form-guide.com/php-form/php-form-action-self.html](http://www.html-form-guide.com/php-form/php-form-action-self.html)

# select - 使用 pl/sql 中的过程检索特定列值

> ID：13452226
> 
> 赞同：0
> 
> 时间：2012-11-19T10:49:26.060
> 
> 标签：select, plsql, procedure

我正在用 pl/sql 编写程序。当我运行程序时出现错误。这里我附上了程序。

```
code

PROCEDURE get_CDR_rs_phone (CDR_recordset OUT SYS_REFCURSOR)AS 
BEGIN 
  OPEN CDR_recordset FOR
   SELECT  zkv.CISCOCUIC_TBL.FLD_callingPartyNumber FROM  zkv.CISCOCUIC_TBL; 

END get_CDR_rs_phone;
/

getting error when i run this proc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:09:00.890

将您的程序创建为

```
CREATE OR REPLACE PROCEDURE get_cdr_rs_phone (
    cdr_recordset    OUT sys_refcursor
)
AS
BEGIN
    OPEN cdr_recordset FOR
        SELECT  zkv.ciscocuic_tbl.fld_callingpartynumber
          FROM  zkv.ciscocuic_tbl;
END get_cdr_rs_phone;
/ 
```

并执行你的程序

```
variable r refcursor;

DECLARE

BEGIN

  get_cdr_rs_phone (:r);  
END;
/

print r 
```

更新 1

如果您的过程仅执行选择，您可以使用返回 sys_refcursor 的函数来执行此操作，并且该函数可以从 sql 语句中执行。

创建函数为

```
CREATE OR REPLACE FUNCTION get_cdr_rs_phone_func
    RETURN sys_refcursor
AS
    out_cursor   sys_refcursor;
BEGIN
    OPEN out_cursor FOR
          SELECT    zkv.ciscocuic_tbl.fld_callingpartynumber
              FROM  zkv.ciscocuic_tbl;
    END get_cdr_rs_phone;

    RETURN out_cursor;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        --raise error

    WHEN OTHERS
    THEN
        --raise error

END get_cdr_rs_phone_func;
/ 
```

并将此函数称为

```
select get_cdr_rs_phone_func from dual; 
```

# java - Spring，如何通过标头管理 HTTP 请求？

> ID：13452228
> 
> 赞同：1
> 
> 时间：2012-11-19T10:49:27.940
> 
> 标签：java, spring, model-view-controller, http-headers, httprequest

在此期间，我正在研究可从 STS 仪表板下载的 Spring MVC Showcase 示例

我对标头的 HTTP 请求映射的功能有疑问。

在展示示例中，我有以下 2 个链接：

```
 <li>
            <a id="byHeader" href="<c:url value="/mapping/header" />">By presence of header</a>
        </li>

        <li>
            <a id="byHeaderNegation" class="textLink" href="<c:url value="/mapping/header" />">By absence of header</a>
        </li> 
```

因此，如您所见，单击第一个链接我正在创建一个指向“/mapping/header”文件夹的 HTTP 请求，然后单击第二个链接我正在创建一个指向同一个“/mapping/header”文件夹的 HTTP 请求

现在这些 HTTP 请求由我的控制器类中的两种方法管理。

第一个通过以下方法处理：

```
@RequestMapping(value="/mapping/header", method=RequestMethod.GET, headers="FooHeader=foo")
public @ResponseBody String byHeader() {
    System.out.println("Sono dentro byHeder()");
    return "Mapped by path + method + presence of header! (MappingController)";
} 
```

第二个是通过以下方法处理的：

```
@RequestMapping(value="/mapping/header", method=RequestMethod.GET, headers="!FooHeader")
public @ResponseBody String byHeaderNegation() {
    System.out.println("Sono dentro byHeaderNegation");
    return "Mapped by path + method + absence of header! (MappingController)";
} 
```

我不明白为什么这两个请求是由两种不同的方法处理的，因为两个链接都会向同一个文件夹生成一个 HTTP 请求：“/mapping/header”

为什么第一个有标题而第二个没有？

我可能遗漏了一些东西，你能帮我理解这件事吗？

非常感谢安德里亚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:56:15.890

正如您在`src/main/webapp/WEB-INF/views/home.jsp`最后的文件中找到的那样，显示按标题映射的链接正在使用`FooHeader`将`foo`.

这就是调用这两种方法的方式。

如果您不设置标题（即简单的 HTML 链接），则`byHeaderNegation`调用该方法，但如果您设置了标题（在本例中使用 Ajax），则调用该方法，`byHeader`因为`FooHeader=foo``true`

```
$("#byHeader").click(function(){
    var link = $(this);
    $.ajax({ url: this.href, dataType: "text", beforeSend: function(req) { req.setRequestHeader("FooHeader", "foo"); }, success: function(form) { MvcUtil.showSuccessResponse(form, link); }, error: function(xhr) { MvcUtil.showErrorResponse(xhr.responseText, link); }});
    return false;
}); 
```

# javascript - 在打开时刷新 iOS 中的 Safari 选项卡

> ID：13452229
> 
> 赞同：2
> 
> 时间：2012-11-19T10:49:28.583
> 
> 标签：javascript, ios, session, safari, refresh

这与大多数人的问题相反。

当您通过单击主页按钮关闭 Safari 时，它会保存页面的当前状态。如果内存没问题，那么当您重新打开 Safari 时 - 视图将与您离开时完全一样。我基本上想在用户点击主页按钮时将其注销。

当您再次打开 Safari 时，有没有办法强制刷新页面。我看不到有关可以使用的事件或类似事件的任何信息？

我能想到的最好的主意是让一个恒定的 javascript 函数运行并比较时间，这样当它们重新打开并且 javascript 恢复时，它会识别出时间不同。

```
lc_theTime = new Date().getTime();

setTimeout('checkTime()',1000);
function checkTime() {
    lc_newDateTime = new Date().getTime();
    if (lc_newDateTime > (lc_theTime + 1500)) {
        alert('ready to log out');
    }
    lc_theTime = lc_newDateTime;
    setTimeout('checkTime()',1000);
} 
```

显然，我真的不希望 javascript 函数持续运行 - 但我没有看到可以做我想做的事情的替代方法。任何帮助都会很棒！

# css - 结构伪类和属性选择器不能一起工作

> ID：13452231
> 
> 赞同：2
> 
> 时间：2012-11-19T10:49:37.040
> 
> 标签：css, css-selectors, pseudo-class

我有这个 HTML 代码：

```
<div class="field">                  
<input type="hidden" value="" name="a" id="a"> <input type="hidden" value="xxxx" name="b" id="b">
<input type="file" value="" name="file1"> <input type="file" value="" name="file2">
<input type="file" value="" name="file3"> <input type="file" value="" name="file4">
<input type="file" value="" name="file5"> <input type="file" value="" name="file6">
<input type="file" value="" name="file7"> <input type="file" value="" name="file8">     </div> 
```

在这个 HTML 中，我想隐藏 div class="field" 中的所有输入 type="file" 除了第一个。我无法更改 HTML（添加类）。我尝试将伪类和结构化选择器一起应用，以完成任务：

```
.field input[type='file']{
  display:none;
}

.field input[type='file']::first-child{
display:block;
} 
```

但它似乎不起作用。任何人都可以建议我在 css 中使用伪类和选择器的正确语法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:53:01.570

伪类只使用一个冒号，所以它是`:first-child`，而不是`::first-child`。

但是你的第一个不是第一个孩子，所以无论如何`input[type='file']`你不能使用它。`:first-child`

您必须切换规则并使用兄弟选择器来隐藏后续文件上传输入：

```
.field input[type='file'] {
    display:block;
}

.field input[type='file'] ~ input[type='file'] {
    display:none;
} 
```

[此处](https://stackoverflow.com/questions/2717480/css-selector-for-first-element-with-class/8539107#8539107)进一步描述了此技术，并且可以用于大多数其他简单的选择器，而不仅仅是类和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:49:18.143

您可以将此代码用于所有值，并且您将在 div class="field" 中隐藏所有输入 type="file"，但第一个除外。试试这个代码。

```
<html>
<head>
<style>
.field input[type='file']
{visibility:hidden;}
</style>
</head>
<body>
</body>
</html> 
```

# android - 自定义进度条仅在 Galaxy Nexus 设备中不起作用

> ID：13452236
> 
> 赞同：1
> 
> 时间：2012-11-19T10:50:22.467
> 
> 标签：android, progress-bar, custom-component

我需要创建进度条，所以我通过扩展 ProgressBar 在 onDraw 方法中完成了它，并且此代码在所有 android 设备中工作，除了 Galaxy nexus .. 虽然它没有抛出和异常，但进度可绘制并没有通过 asynctask 更新。此代码完全适用于除银河系外的所有设备

```
@Override
protected synchronized void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Paint textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setColor(textColor);

    Typeface tmTypeface = Typeface.create(Typeface.SANS_SERIF, Typeface.BOLD);
    textPaint.setTypeface(tmTypeface);
    textPaint.setTextSize(textSize * mContext.getResources().getDisplayMetrics().density);
    Rect bounds = new Rect();
    textPaint.getTextBounds(text, 0, text.length(), bounds);
    int x = getWidth() / 2 - bounds.centerX();
    int y = getHeight() / 2 - bounds.centerY();
    canvas.drawBitmap(thumbnailBitmap, 10, y - bitmapHeight / 2, null);
    canvas.drawText(text, 15 + thumbnailBitmap.getWidth(), y, textPaint);
    canvas.drawBitmap(downloadBitmap, getWidth() - bitmapWidth, y - bitmapHeight / 2, null);

} 
```

问题可能与可绘制和样式有关，但它适用于所有版本和所有设备

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:42:13.783

我在此代码段中看不到您在问题中陈述的问题，但我可以在您的代码本身中看到很多问题。

我猜你是 subclassing `View`，我不知道为什么你`synchronized`的`onDraw`方法，没有必要这样做。通过创建该`onDraw`方法`synchronized`，您只需在执行时阻止所有其他线程访问您的对象`onDraw`，并注意`onDraw`可能会非常频繁地调用它，如果您确实需要同步，如果这样做就足够了，请制作一个**小块。** `synchronized`

还有一件事，创建一个新的 确实是个**坏**`Paint`主意，`Typeface`在每次调用 时`onDraw`，它都会破坏性能。将它们保存为实例变量并尽可能重用它们，即使是`Rect`对象也应该重用。

让我们回到你的问题，如果你想创建一个自定义进度条，你可以简单地在你的布局定义中创建一个进度条样式和引用（在 XML 中）。`my_progressbar.xml`在目录下创建`drawable`并将以下内容保存在文件中，在您的`ProgressBar`定义中引用此样式，例如`<ProgressBar ... android:progressDrawable="@drawable/my_progressbar"/>`

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
    <shape android:shape="rectangle" >
        <solid android:color="#ffcccccc" />
    </shape>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
    <shape android:shape="rectangle" >
        <solid android:color="#ff000000" />
    </shape>
    </clip>
</item>

<item android:id="@android:id/progress">
    <clip>
    <shape android:shape="rectangle" >
        <solid android:color="#ffff6100" />
    </shape>
    </clip>
</item> 
```

看看[这个](http://idunnolol.com/android/drawables.html#shape)关于定义形状的更多信息。

# php - 在这个奇怪的数组键结构中，这个按位或做什么？

> ID：13452247
> 
> 赞同：37
> 
> 时间：2012-11-19T10:51:24.247
> 
> 标签：php

有人可以向我解释这是什么意思吗？我从未见过这种结构——取自[Prestashop 文档](http://doc.prestashop.com/display/PS14/Creating+a+PrestaShop+module#CreatingaPrestaShopmodule-Creatingthemodule%27sbackofficetab%2Canditsclass)

```
foreach ( $languages as $language )
{
  echo '<div id="test_' . $language['id_lang'|'id_lang'] .... // <-- What the??
  // ... 
} 
```

$language 包含以下键：

```
Array
(
    [id_lang] => 1
    [name] => English (English)
    // and others... 
) 
```

结果是它采用 $language["id_lang"] - 1 的值。但我不理解语法，也找不到任何有关它的文档。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-19T10:57:19.203

这个`php -a`会话表明它完全没有意义：

```
php > $value = 'something'|'something';
php > echo $value;
something
php > $arr = array('abc' => 1, 'def' => 2);
php > echo $arr['abc'|'abc'];
1
php > echo $arr['def'|'def'];
2 
```

基本上，如果你自己“按位或”任何东西，你就会得到原始值。这种性质在数学中称为**幂等性。**有关更多信息，请阅读：

*   [http://en.wikipedia.org/wiki/幂等性](http://en.wikipedia.org/wiki/Idempotence)
*   [http://en.wikipedia.org/wiki/Bitwise_operation#OR](http://en.wikipedia.org/wiki/Bitwise_operation#OR)

老实说，该代码的原始作者不知道他们在做什么。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-19T10:55:30.067

这样做是对字符串“id_lang”中字符的 ASCII 值使用按位运算符，尽管他们这样做的原因超出了我的范围，因为结果总是相同的。

为了详细说明，假设（为方便起见）我们使用的是 ASCII，其中每个字符都被编码为一个字节。让我们看看当它对第一个字符的二进制表示进行比较时会发生什么（i 是`105`，在二进制中是`01101001`）：

```
 "i": 01101001
OR "i": 01101001
      ___________
      = 01101001
      = "i" 
```

`0|0`为 0，`1|1`为 1，所以不可避免地所有位都保持不变。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-19T10:56:58.887

它什么也没做，很奇怪。

```
var_dump('id_lang'|'id_lang');
#=> string(7) "id_lang" 
```

[http://ideone.com/zXdRMO](http://ideone.com/zXdRMO)

即使它*正在*做某事，在基于字符串的数组键上使用按位运算符对我来说肯定感觉像是代码异味。

# android - Samsung Touchwiz 在 Android 4.1.1 中启动时总是提示默认应用程序

> ID：13452249
> 
> 赞同：3
> 
> 时间：2012-11-19T10:51:28.757
> 
> 标签：android, default, android-launcher, android-homebutton

我为我的盲人朋友开发了一个应用程序，它在清单中设置了默认的家庭设置，如下所示：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"/>
    <category android:name="android.intent.category.HOME"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter> 
```

在他们上周从三星 Galaxy XCover (2.3.6) 升级到三星 S3 (4.1.1) 之前，这一直很好。现在，安装完成后，按下 home 键，会出现一个对话框，他们可以在这个应用程序和 Samsung Touchwiz 之间进行选择，然后他们选择我的应用程序，然后按下始终按钮。但是，当他们重新启动手机并关闭锁定屏幕时，会再次出现该对话框。我查看了`apps -> settings -> all screen`，我可以看到我的应用程序设置为默认值。

我错过了什么吗？

# matlab - 使用 matlab 更快地读取具有少量数据的图像

> ID：13452254
> 
> 赞同：1
> 
> 时间：2012-11-19T10:51:35.827
> 
> 标签：matlab, matlab-cvst

我正在尝试跟踪视频分离帧中的对象。如果我在存储图像之前进行背景减法，图像的大小会小得多（比如五分之一）。所以我想知道我是否也可以更快地读取这些图像，因为大多数像素都是零。仍然简单的 imread 没有任何区别。

我还尝试了 pixelregion 选项以仅加载对象的位置，但由于每帧中有十个对象，因此该选项也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T14:53:31.573

将帧存储为视频文件可能比单个图像更快。然后您可以`vision.VideoFileReader`从计算机视觉系统工具箱中读取它们。

# open-source - 我可以发送只有一个 gpl 库的应用程序的所有源代码吗？

> ID：13452256
> 
> 赞同：0
> 
> 时间：2012-11-19T10:51:39.273
> 
> 标签：open-source, licensing, lgpl

我正在评估 ZK 框架，它是 LGPL，它的弹簧插件 zk-spring 是 GPL。

如果我开发一个具有不同应用程序的系统，例如域、web(zk、zk-spring)、web-services。现在当我在客户端机器上部署这些应用程序时，我是否还必须向客户端提供我的应用程序的所有源代码？我也想为自己保留代码的所有权。

或者我应该购买许可证并且可以拥有我的应用程序代码并且不必使用 GPL。

我不清楚，请回答我这里涉及的所有疑虑和问题。

期待很快收到您的来信，并在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:59:47.390

如果您希望分发衍生自 GPL 涵盖的作品的任何作品，或包含从 GPL 涵盖的作品中提取的足够受保护的表达内容，则您还必须分发该作品的源代码，即使它是您编写的。真的没有更好的答案了。如果您需要可以合法依赖的意见，请咨询律师。

# joomla - 如何为 joomla 网站制作独立的静态登录页面

> ID：13452258
> 
> 赞同：1
> 
> 时间：2012-11-19T10:51:50.240
> 
> 标签：joomla, static

对于[www.makevending.ro](http://www.makevending.ro/)，我需要制作一个登陆页面以组织比赛。

我需要这个页面是静态的并且完全独立于 Joomla 管理员。当访问者提供他/她的姓名和电子邮件地址时，他将被带到网站[主页](http://www.makevending.ro/)。

有没有一种快速安全的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T12:01:51.400

JED 网站上有几个插件可以做到这[一点](http://extensions.joomla.org/extensions/site-management/seo-a-metadata/landing-pages)

# excel - ExcelDna CustomTaskPane 示例异常

> ID：13452259
> 
> 赞同：0
> 
> 时间：2012-11-19T10:52:09.187
> 
> 标签：excel, excel-dna, customtaskpane

我尝试使用 ExcelDNA 包中的 CustomTaksPane 示例并收到以下错误：

**“调用函数“OnShowTCP”时发生异常。异常消息是异常已被调用目标抛出”**

我在 Windows 7 下使用 Excel 2010。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:46:44.050

显示 CTP 的一个常见问题是在运行 Excel 时：

1.  在受 UAC 限制的用户帐户下“作为管理员” - 这已在 Excel-DNA v 0.30 的测试版中得到修复，您可以在此处下载：http: [//exceldna.codeplex.com/releases/view/95861](http://exceldna.codeplex.com/releases/view/95861)。
2.  在没有权限写入 HKEY_CURRENT_USER\Software\Classes 的帐户下。我希望将来能用更好的信息来处理这种不寻常的设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T14:38:05.177

这听起来与此处报告的问题相似：[https ://exceldna.codeplex.com/workitem/9366](https://exceldna.codeplex.com/workitem/9366)

您是否将信任中心设置设置为“要求应用程序加载项由受信任的发布者签名”？如果是这样并且插件由受信任的发布者签名，插件将正确加载，功能区的 COM 服务器也将正确加载，但由于某种原因，为 CTP 动态注册的 COM 服务器不会加载。如果删除信任中心设置，则插件可以正常工作。

# c# - 在 Windows 窗体中托管 WPF 给出问题 - C#

> ID：13452268
> 
> 赞同：2
> 
> 时间：2012-11-19T10:52:20.380
> 
> 标签：c#, .net, wpf, windows, winforms

我在 WPF 中创建了一个 .DLL。要在现有的 Windows 窗体应用程序中使用它，我使用`ElementHost`.

```
ElementHost eleHOst = new ElementHost();
UserWarps userWarps = new UserWarps();
eleHOst.Child = userWarps;
eleHOst.Dock = DockStyle.Fill; 
```

`UserWarps``.DLL`在已添加引用的 WPF中。现在该文件做了很多 3D 操作。我也`Petzold.Media3D`用于`3D lines`线框建模。一切正常，除了`WireLines`没有`Petzold.Media3D`画任何线条。如果我从其他应用程序中引用 DLL，`WPF`一切都很好，但是`wpf`在 Windows 窗体中托管 UserControl 会消除线条/线框。休息一切都是完美的 -`MeshGeometry3D`模型，视觉效果，功能等。

请提出前进的方向。可以替代`ElementHost`工作吗？如果是这样，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:40:21.777

> 添加最初由 OP 添加的答案，因为我不希望因此而关闭这个问题。

Petzold 在[这里](http://www.charlespetzold.com/blog/2007/08/310158.html)提到，在 Windows 窗体中托管 wpf 会导致 Wire 框架消失。他还发布了一个非常简单且完美的工作：

> 注意：由于第 5 段中讨论的原因，当您在 Windows 窗体中托管 3D 或尝试打印 3D 场景时，这些 Wire 类将不起作用。要使其工作，请尝试将 `OnRendering`WireBase 中的静态方法替换为以下内容：
> 
> ```
> static void OnRendering(object sender, EventArgs args)
> {
>     foreach (WireBaseAndUltimateParent wirebaseAndParent in listWireBases)
>     {
>         WireBase wirebase = wirebaseAndParent.wirebase;
>         wirebase.OnRendering();
>     }
> } 
> ```

# android - 获取 sdcard 文件夹中可用的媒体文件总数？

> ID：13452275
> 
> 赞同：0
> 
> 时间：2012-11-19T10:52:52.210
> 
> 标签：android, cursor, sd-card

如何获取 sdcard/some/ 文件夹中应包括音频、图像、视频的可用媒体文件的总数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:05:24.007

我想这样的事情

```
File file=new File("/sdcard/domedir");
File[] list = file.listFiles();
int count = 0;
for (File f: list){
    String name = f.getName();
    if (name.endsWith(".jpg") || name.endsWith(".mp3") || name.endsWith(".some media extention"))
       count++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:06:47.653

也许你应该写一个像这样的简单递归方法：

```
public int countFile(String path) {
    int count = 0;
    File f = new File(path);
    if (f.exists() && f.isDirectory()) {

        for (File fi : f.listFiles()) {
            if (fi.isDirectory())
                count += countFile(fi.getAbsolutePath());
            else
                count++;
        }
    }
    return count;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:17:58.957

那么您可以简单地检查文件类型是否对应于常见的媒体类型

```
 static class MyDocFileFilter implements FileFilter{
          private final String[] myDocumentExtensions 
                    = new String[] {".java", ".png", ".avi", ".mkv"};

          public boolean accept(File file) {

                  if (!file.isFile())   return false;

                  for (String extension : myDocumentExtensions) {
                         if (file.getName().toLowerCase().endsWith(extension))
                                  return true;
           }
           return false;
    }
} 
```

然后使用 File 使用过滤器列出所有必需的文件。并相应地更改扩展名

```
File file = new File("DIRECTORY_NAME");
File[] fileslist = file.listFiles(new MyMediaFileFilter()); 
```

# java - 防止 Cayenne 更新某些列值

> ID：13452279
> 
> 赞同：0
> 
> 时间：2012-11-19T10:52:58.717
> 
> 标签：java, database, hibernate, orm, apache-cayenne

我不想更新 cayenne 中的某些列值，但我想插入它们。插入行后，我将永远不想更新某些列值。我怎么能在卡宴中做到这一点。如果它在映射文件中是休眠的，我们可以指定一些东西

```
<column name="column1" type="string" insert="true" update="false"> 
```

如何在 cayenne 映射文件中指定以上一项。对此的任何帮助都非常感谢。

-纳伦德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:36:13.237

在 Cayenne 中，您不能以声明方式执行此操作（而且我认为添加这不是一个非常有用的抽象）。但是你当然可以用一点代码来实现同样的目标。覆盖对象 [1] 中的 'validateForUpdate' 以检查给定列在当前事务中是否未更改：

```
 public void validateForUpdate(ValidationResult validationResult) {
     super.validateForUpdate(validationResult);

     ObjectStore objectStore = (ObjectStore) getObjectContext().getGraphManager();
     DataRow snapshot = objectStore.getCachedSnapshot(getObjectId());
     if(!snapshot.get("COLUMNNAME").equals(getMyProperty())) {
        validationResult.addFailure(new SimpleValidationFailure(this, "Immutable property modified");
     }
  } 
```

[1] [http://cayenne.apache.org/docs/3.1/api/org/apache/cayenne/Validating.html](http://cayenne.apache.org/docs/3.1/api/org/apache/cayenne/Validating.html)

# websocket - Websockets：如何处理向多个客户端发送不同的数据

> ID：13452286
> 
> 赞同：0
> 
> 时间：2012-11-19T10:53:15.720
> 
> 标签：websocket

我正在玩 websockets，我在处理一些东西时遇到了一些麻烦。具体来说，能够在不使用大量资源的情况下向一大群订阅者发送不同的数据。

例如，如果您有某种类似 twitter 的服务，您将如何向一个人的所有追随者发送他们发布的新推文（并为其他数百人做同样的事情）。处理这么多不同的人似乎有点荒谬。

有人可以告诉我您将如何单独对待每个客户吗？请告诉我我是否对 websockets 的整个想法有误。

提前致谢！

PS供参考，我可能会使用节点或clojure（使用aleph）来玩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:55:20.613

**在 websocket 之上使用已建立的消息传递协议和代理。**

当它更像是一种网络协议时，您似乎正在查看应用程序层的 websockets。存在各种带有开源消息代理的消息传递 API（例如 JMS），它们旨在执行复杂且可扩展的消息路由。

# asp.net - 如何从 web.config 检索自定义设置

> ID：13452287
> 
> 赞同：1
> 
> 时间：2012-11-19T10:53:18.340
> 
> 标签：asp.net, vb.net, visual-studio-2008, web-config

我有`web.config`一些自定义设置（不在 appsettings 中），如下所示：

```
<ldapSettings>
    <add key="server" value="xxxxxx"/>
    <add key="portNumber" value="28400"/>
    <add key="protocolVersion" value="3"/>
    <add key="secure" value="true"/>
</ldapSettings> 
```

如何将服务器地址用于我的代码？

我试过以下

```
dim pfad As String
pfad = System.Configuration.ConfigurationManager.GetSection("ldapSettings")
Dim blas As String
blas =pfad["server"] 
```

但它不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:33:56.247

首先，您需要为自定义配置部分定义一个类，以便告诉 ASP.NET 它具有哪些属性，如下所示：

```
Public Class ldapSettings
    Inherits ConfigurationSection
    Private Shared LSettings As ldapSettings = TryCast(ConfigurationManager.GetSection("ldapSettings"), ldapSettings)

    Public Shared ReadOnly Property Settings() As ldapSettings
        Get
            Return LSettings
        End Get
    End Property

    <ConfigurationProperty("server")>
    Public Property Server() As String
        Get
            Return Me("server")
        End Get
        Set(value As String)
            Me("server") = value
        End Set
    End Property

    <ConfigurationProperty("portNumber")>
    Public Property PortNumber() As String
        Get
            Return Me("portNumber")
        End Get
        Set(value As String)
            Me("portNumber") = value
        End Set
    End Property

    <ConfigurationProperty("protocolVersion")>
    Public Property ProtocolVersion() As String
        Get
            Return Me("protocolVersion")
        End Get
        Set(value As String)
            Me("protocolVersion") = value
        End Set
    End Property

    <ConfigurationProperty("secure")>
    Public Property Secure() As Boolean
        Get
            Return Me("secure")
        End Get
        Set(value As Boolean)
            Me("secure") = value
        End Set
    End Property
End Class 
```

然后，您将需要`web.config`稍微更改您的文件。自定义部分的 XML 布局应如下所示：

```
 <configSections>
    <section name="ldapSettings" type="Your_Assembly_Name.ldapSettings"/>
  </configSections>
  <ldapSettings
    server="xxxxxx"
    portNumber="28400"
    protocolVersion="3"
    secure="true"
  /> 
```

最后，您可以使用以下行获取设置：

```
Dim Secure As Boolean = ldapSettings.Settings.Secure 
```

对不起VB.NET，如果需要，可以使用此工具进行转换：http: [//www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

信息主要来自这里： [http ://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:13:28.533

您需要转换返回值，`GetSection("ldapSettings")`因为它不返回字符串：

```
Dim ldap As ldapSettings = CType(ConfigurationManager.GetSection("ldapSettings"), ldapSettings)
Dim server As String = ldapSettings.server 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T12:55:34.177

我发现了一个更简单的解决方案

这是我所做的：

```
 Private config As NameValueCollection
 config = DirectCast(ConfigurationManager.GetSection("ldapSettings"), NameValueCollection)
        Dim server As String
        server = config.[Get]("server") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:00:34.423

```
ConfigurationManager.AppSettings("keyname") 
```

通常对我有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T11:10:22.417

您可以从以下链接获得帮助

[http://msdn.microsoft.com/en-us/library/610xe886%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1](http://msdn.microsoft.com/en-us/library/610xe886%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

# android - 如何使用 webview 发出帖子请求？

> ID：13452289
> 
> 赞同：10
> 
> 时间：2012-11-19T10:53:21.060
> 
> 标签：android, webview, http-post, response

我想使用 webview 发出 http post 请求。

```
webView.setWebViewClient(new WebViewClient(){

            public void onPageStarted(WebView view, String url,
                Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            }

            public boolean shouldOverrideUrlLoading(WebView view,
                String url) {

            webView.postUrl(Base_Url, postData.getBytes());

            return true;
            }

        }); 
```

上面的代码片段加载网页。我想访问此请求的响应。

如何使用 webview 获取 http post 请求的响应？

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-02-18T13:07:00.097

首先将http库的支持添加到你的gradle文件中：为了能够使用

`useLibrary 'org.apache.http.legacy'`

在此之后，您可以使用以下代码在您的 webview 中执行发布请求：

```
public void postUrl (String url, byte[] postData)
String postData = "submit=1&id=236";
webview.postUrl("http://www.belencruzz.com/exampleURL",EncodingUtils.getBytes(postData, "BASE64")); 
```

[http://belencruz.com/2012/12/do-post-request-on-a-webview-in-android/](http://belencruz.com/2012/12/do-post-request-on-a-webview-in-android/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T11:09:20.407

WebView 不允许您访问 HTTP 响应的内容。

您必须为此使用[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)，然后通过使用函数[loadDataWithBaseUrl](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)并指定基本 url 将内容转发到视图，以便用户可以使用 webview 继续在网站中导航。

例子：

```
// Executing POST request
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);
httppost.setEntity(postContent);
HttpResponse response = httpclient.execute(httppost);

// Get the response content
String line = "";
StringBuilder contentBuilder = new StringBuilder();
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
while ((line = rd.readLine()) != null) { 
    contentBuilder.append(line); 
}
String content = contentBuilder.toString();

// Do whatever you want with the content

// Show the web page
webView.loadDataWithBaseURL(url, content, "text/html", "UTF-8", null); 
```

# javascript - 将值从 DB 传递到 URL 作为参数

> ID：13452290
> 
> 赞同：0
> 
> 时间：2012-11-19T10:53:23.077
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, razor

我在下面的 URL 中传递了 2 个参数。中期和实践。MID 是用户的 id，当用户登录到站点时将被传递。现在要获得“Prac”，我需要将此 MID 传递到我的数据库中的表并获取值。请告诉我我应该如何去做。

```
 a href="@Url.Content("https://something/someserver?%2fWEBSITE%2fProj_FinancialPerf&
    MID="+ Convert.ToInt32(System.Web.HttpContext.Current.User.Identity.Name.Replace("***\\", ""))+"&Prac=SOMETHING")"  id="LinkButton7" name="LinkButton7"  new { target = "_blank" }) value="@Resource.Get("ManagerReportsPageInputScreen13_LinkButton7")">
@Resource.Get("ManagerReportsPageInputScreen13_LinkButton7")</a> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:19:21.783

您可以将 Prac 设置为模型中的变量（在控制器中执行此操作），然后像这样使用该变量 @Model.Prac

```
Public ActionResult Index(){
    var pageModel = new PageModel;
    pageModel.Prac = "WHATEVERPRACIS"
    return View(model);
}

@Html.ActionLink("button text", "Index" , new { Prac = Model.Prac, Mid = Model.Mid, etc = etc}) 
```

# objective-c - 如何为按钮标题的一半着色

> ID：13452291
> 
> 赞同：0
> 
> 时间：2012-11-19T10:53:34.307
> 
> 标签：objective-c, ios

我有`UIButton`，我只想将标题的一半涂成红色。这是我的按钮

```
NSString *title = AMLocalizedString(@"Remove", nil);
NSString *title1 = [NSString stringWithFormat:title, name ];
UIButton *rem = [UIButton buttonWithType:UIButtonTypeRoundedRect];
rem.frame = CGRectMake(140, 70, 175, 40);
[rem setTitle:title1 forState:UIControlStateNormal]; 
```

删除是`"Remove" = "Delete object %@";`

我只想染红色`name`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:59:32.600

用于. `NSAttributeString`_ `UIButton's` `UILabel`_`iOS 6.0`

```
yourbtn.titleLabel.attributedText = yourAttributeStringText; 
```

请参阅[NSAttributedStringInPractice](http://cocoadev.com/wiki/NSAttributedStringInPractice)链接了解如何使用`NSAttributeString`。

当使用`iOS 5.1`或`lesser version`可能使用时：

在中使用[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)`UIButton's titleLabel`

# javascript - 表格列太高

> ID：13452293
> 
> 赞同：6
> 
> 时间：2012-11-19T10:53:38.300
> 
> 标签：javascript, jquery, datatables

我正在使用[Datatables](http://datatables.net)，一个用于创建自定义表的 jQuery 插件。我现在正在尝试创建一个包含许多列的表，其中至少一个包含大量文本。问题是长文本的列不是创建得更宽，而是更高，使表格更难于用户阅读。

如何使文本列更宽且更低？

这是我的问题的屏幕截图：

![在此处输入图像描述](../Images/aece9a140ef85ab124bb740073e26b69.png)

这是我的问题可见：

[http://live.datatables.net/ujudij/edit#javascript,html](http://live.datatables.net/ujudij/edit#javascript,html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T04:50:32.473

可能您可能会考虑使用 css text-overflow 属性：[http](http://css-tricks.com/snippets/css/truncate-string-with-ellipsis/) ://css-tricks.com/snippets/css/truncate-string-with-ellipsis/并结合具有长文本的单元格的工具提示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T12:08:05.673

数据表渲染完成后，您可以检查每个 td 的文本长度。如果文本长度超过您定义的限制，您可以为该表格单元格设置更大的宽度，即 td。这样，即使您不知道它在表格中的位置，您也可以加宽超出所需高度的任何单元格

这是代码

```
$(document).ready(function() {
    $('#example').dataTable({
    "sScrollX":"100%",
    "fnInitComplete": function(oSettings, json) {

        $('#example tr').each(function(i){
           $('td', this).each(function(j){
               // get length of text
               var l = $(this).text().length;
               // set larger width if text length is greater than 300 characters
               if(l > 300){
                   $(this).width(400);
               }
           });
        });
    }
  });
}); 
```

[在此处查看此代码演示](http://live.datatables.net/icesux/15/edit#preview)

您还可以使用**var l = $(this).height();来使用单元格高度** 但我认为这不会为您提供正确的结果，因为在调整宽度之前，同一行中可能没有大文本的其他单元格也具有相同的高度，因此它们的宽度属性也将使用它来更改，这对您来说不正确情况，我猜

虽然我认为一个更好的主意是修剪文本以限制，添加一个“更多”链接并使用像[qTip这样的插件显示全文](http://craigsworks.com/projects/qtip/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T05:45:02.777

我写了一个小的 jQuery 插件来限制元素的文本行，希望这能有所帮助。

```
/** 
* Binaray search with callback
*/
function bisearch(left, right, search, getter){
    var pos, result;
    if (typeof getter !== "function") {
        getter = function (x) {
            return x;
        };
    }

    while (left <= right) {
        pos = (left + right) / 2 | 0;
        result = getter(pos);

        if (result < search) {
            left = pos + 1;
        }
        else if (result > search) {
            right = pos - 1;
        }
        else {
            return pos;
        }
    }
    return -1;
}

;(function($){
    var getLineHeight = function(el) {
        var self = el,
            $self = $(self),
            content = $self.html(),
            lineHeight;

        if (typeof $self.attr("style") !== "undefined") {
            orgStyleAttr = $self.attr("style");             
        }

        $self.html("&nbsp;").css("min-height", "0px");
        lineHeight = $self.height();

        $self.html(content);

        if (typeof orgStyleAttr !== "undefined") {
            $self.attr("style", orgStyleAttr);
        } else {
            $self.removeAttr("style");
        }
        return lineHeight;
    }
    $.fn.limitLines = function(maxLines){
        $(this).each(function(){
            var self = this,
                $self = $(self),
                content = $self.html(),
                height = $self.height(),
                lineHeight = getLineHeight($self),
                maxHeight = lineHeight * maxLines;

            if (Math.floor(height/lineHeight) <= maxLines) 
                return;

            // this search will stop when the text meet the line count,
            // but the last line will be of any length
            var middleOfLastLine = bisearch(0, content.length, maxLines, function (n){
                $self.html(content.substring(0, n));
                return Math.floor($self.height() / lineHeight); 
            });

            // search for position from current to current plus one more line, 
            // until we find the excact position(p) to stop,
            // where if one more letter was added, 
            // there will be a new line 
            var endOfLastLine = bisearch(middleOfLastLine, content.length, maxLines + .5, function (n){
                $self.html(content.substring(0, n - 3) + '...');
                var before = Math.floor($self.height() / lineHeight);

                $self.html(content.substring(0, n - 2) + '...');
                var after = Math.floor($self.height() / lineHeight);

                return (before + after) / 2;
            });
            $self.html(content.substring(0, endOfLastLine -3) + '...');
        });
    };
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T21:44:46.067

您需要使用`aoColumnDefs`which 允许您按标题或编号定位特定列，并使用插件的本机`sWidth`属性设置所需列的宽度：

```
$(document).ready(function() {
   var data = $('#example').dataTable({
   "sScrollX":"100%",
   "aoColumnDefs": [
   { "sWidth": "1500px", "aTargets": [5] } // this will target the 6th column (the first being 0) 
]
});

}); 
```

[一个工作示例](http://live.datatables.net/ujudij/6)

[文件](http://www.datatables.net/usage/columns)

如果您事先不知道要定位哪些列，您可以随时获取`length`每个单元格中的字符串，并采取相应措施。也就是说，如果长度超过某个数字。字符，您将列号添加到数组中，稍后传递给`aTargets`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-28T17:15:40.327

您可以根据需要放大一列，我使用了 70%，但您也可以使用 400px 等像素

[http://live.datatables.net/ajemid/4/edit](http://live.datatables.net/ajemid/4/edit)

```
$(document).ready(function() {
  $('#example').dataTable({
    "sScrollX":"100%",
     "aoColumnDefs": [
      { "sWidth": "70%", "aTargets": [ 0 ] }
    ]
  });
} ); 
```

"aTargets": [ 0 ] 用于第一列，1 用于第二列，依此类推。

为了限制文本，您可以应用诸如 max-height:200px; 之类的 CSS 属性。和溢出：隐藏；您还可以在单​​元格底部应用垂直渐变（对白色透明），为长单元格提供很好的淡入白效果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T11:04:15.000

```
$(document).ready( function () {
$('#example').dataTable( {
"bAutoWidth": false
} );
} ); 
```

稍后设置`width`在 `<td>`您的桌子内。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-27T18:01:08.990

`nobr`最简单的做法是使用html 标记将任何进入表格的内容包装起来。它可能不是最优雅的解决方案，但它会起作用，您可以使用 CSS 来限制单元格宽度并设置溢出。[我在这里](http://live.datatables.net/uzutiv/2)克隆了你的例子。

通读 DataTables 文档，手动解决方案可能仅在您调用`datatable()`现有 DOM 元素时才有效。如果您想在从数组或 AJAX 源加载数据时执行此操作，您可能必须`nobr`使用 jQuery 以编程方式将每个表格单元格中的数据包装起来。这样做的好处是您可以更好地控制您决定不包装的内容。

DataTables API 提供[pre-init](http://datatables.net/release-datatables/examples/advanced_init/events_pre_init.html)或[post-init](http://datatables.net/release-datatables/examples/advanced_init/events_post_init.html) API 调用 - 您可以将回调绑定到 jQuery 函数，该函数遍历表中的所有 TD 并将内容包装在`nobr`标签中。

我希望这是有道理的。祝你好运！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-28T01:03:21.973

您可以使其滚动条自动出现在超大数据上

```
<style>
.box{width:250;height:75;overflow:auto}
</style>

<div class="box" >your data here will only have a scrollbar if it overflows your predefined height width parameters</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-28T11:58:44.113

为每列指定您自己的宽度。

```
$(document).ready(function() {
  $('#example').dataTable({
    "sScrollX":"100%",
    "aoColumns": [
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" },
      { "sWidth": "30%" }
    ]
  });
} ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-29T09:07:26.420

你的解决方案是`%`

将此 td 类的名称从更改`odd gradeA`为`what_ever`并添加

```
 width: 80%; 
```

当然，你可以随心所欲地玩它。

或改变这个

```
 <tr class="odd gradeA"> //of the long text 
```

到

```
 <tr style="width: 80%"> 
```

并且所有其他`td`s 都将被触发，因此您也可以对其他`td`s 做同样的事情，`%` 希望对您有帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-29T11:58:35.803

在我看来，你应该限制你的脚本在服务器端的输出，它会创造更好的视觉效果，但也会节省一些带宽，并减少页面负载

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-29T12:40:33.267

即兴发挥@Burhan 的回复：您可以限制直接显示在单元格中的字符并将其添加到单元格的标题中，这样它就会创建一种工具提示的效果（== qTip??）

```
$(document).ready(function() {
    $('#example').dataTable({
    "sScrollX":"100%",
    "fnInitComplete": function(oSettings, json) {

        $('#example tr').each(function(i){
           $('td', this).each(function(j){
               // get length of text
               var l = $(this).text().length;
               var limit = 200;
               // set larger width if text length is greater than 300 characters
               if(l > limit){
                   $(this).attr('title',$(this).text())
                          .text($(this).text().substr(0,limit));
               }
           });
        });
    }
  });
}); 
```

将限制变量更改为对您来说舒适的任何内容.........

# mysql - 最优my.cnf推荐

> ID：13452296
> 
> 赞同：2
> 
> 时间：2012-11-19T10:53:51.683
> 
> 标签：mysql, server-configuration, my.cnf

我想请教有一点经验的人对我当前`my.cnf`设置的看法以及应该进行哪些优化。

服务器规格如下：

*   CPU：AMD Opteron™ 3280，8 核，8x 2.4 GHz
*   内存：16 GB DDR3
*   2 个 2,000 GB SATA II-HDD，7.2k - RAID 1 软件
*   安装了 Cloudlinux + Cpanel
*   Apache + Mysql 5.5 + NginxCP + eAccelerator

当前`my.cnf`文件是：

```
[客户]
端口=3306
socket="/var/lib/mysql/mysql.sock"

[mysqld]
innodb_additional_mem_pool_size=16M
innodb_buffer_pool_size=10G
innodb_file_per_table=1
innodb_log_buffer_size=4M
innodb_flush_log_at_trx_commit=2
日志-bin=mysql-bin
myisam_sort_buffer_size=64M
expire_logs_days=7
query_cache_size=128M
线程缓存大小=12
max_allowed_pa​​cket=15M
跳过联合
表定义缓存=2048
本地文件=0
表缓存=8192
最大连接数=60
read_buffer_size=2M
慢查询日志=1
slow_query_log_file="/var/log/slow_queries.log"
线程并发=16
sort_buffer_size=2M
端口=3306
join_buffer_size=16M
key_buffer_size=600M
query_cache_limit=10M
socket="/var/lib/mysql/mysql.sock"
跳过外部锁定
查询缓存类型=1
long_query_time=5
默认存储引擎=InnoDB
tmp_table_size=384M
max_heap_table_size=384M

[myisamchk]
read_buffer=2M
key_buffer=256M
sort_buffer_size=256M
write_buffer=2M

[mysql转储]
max_allowed_pa​​cket=16M

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T22:18:00.360

DBA 建议首先使用 Percona 向导或所有[https://tools.percona.com/wizard](https://tools.percona.com/wizard)

其次遵循本指南：[http ://www.percona.com/blog/2014/01/28/10-mysql-settings-to-tune-after-installation/](http://www.percona.com/blog/2014/01/28/10-mysql-settings-to-tune-after-installation/)

# android - android中活动动画结束后如何调用函数

> ID：13452299
> 
> 赞同：1
> 
> 时间：2012-11-19T10:53:57.277
> 
> 标签：android, android-intent, android-activity, android-animation, oncreate

嗨，我正在使用动画将一项活动移动到另一项活动。活动动画结束后我需要调用一个函数，但我找不到任何解决方案。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:50:47.737

如果你使用`Animation`类，那么你可以附加`AnimationListener`：[setAnimationListener](http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener%28android.view.animation.Animation.AnimationListener%29)

`Animator`还有`AnimatorListener`：http: [//developer.android.com/reference/android/animation/Animator.html](http://developer.android.com/reference/android/animation/Animator.html)

# macos - MacOS 共享库路径

> ID：13452301
> 
> 赞同：2
> 
> 时间：2012-11-19T10:54:02.573
> 
> 标签：macos, shared-libraries, ld

我有一个依赖于几个的 C++ 应用程序`.dylib`；其中，`libproj`和`PythonQt`。

我在单独的目录中预先构建了这些库。

2个（相关）问题：

*   可执行文件找到 的完整路径`libproj.dylib`，尽管它不在路径中，不在 中`DYLD_LIBRARY_PATH`，不在 QtCreator 的配置中。如何 ？
*   可执行文件找不到 PythonQt，尽管它的链接方式完全相同。我必须手动添加正确的路径`DYLD_LIBRARY_PATH`。为什么 ？

这可能与libproj有a`.la`和a`.dylib`有关，但PythonQt只有a `.dylib`；但我不确定，我不明白这种关系。

otool 的示例输出：

```
/Users/arnaud/Projects/myprojectname/external/proj-4.8.0/bin_mac64_gcc421_release/lib/libproj.0.dylib (compatibility version 8.0.0, current version 8.0.0)
    ( so it finds libproj correctly, even in another directory )

libPythonQt.1.dylib (compatibility version 1.0.0, current version 1.0.0)
    (... but not libPythonQt, which is in a similar directory )

/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.0)
QtOpenGL.framework/Versions/4/QtOpenGL (compatibility version 4.8.0, current version 4.8.3)
QtGui.framework/Versions/4/QtGui (compatibility version 4.8.0, current version 4.8.3)
QtCore.framework/Versions/4/QtCore (compatibility version 4.8.0, current version 4.8.3)
QtNetwork.framework/Versions/4/QtNetwork (compatibility version 4.8.0, current version 4.8.3)
/System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL (compatibility version 1.0.0, current version 1.0.0)
/System/Library/Frameworks/AGL.framework/Versions/A/AGL (compatibility version 1.0.0, current version 1.0.0)
/usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.9.0)
/usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 697.0.0)
/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

# perl - 在 Perl 中解析大文件

> ID：13452305
> 
> 赞同：0
> 
> 时间：2012-11-19T10:54:23.977
> 
> 标签：perl, file

我需要将包含 2200 万行的大文件（2GB）与另一个文件进行比较。在使用 Tie::File.so 时需要更多时间来处理它。所以我已经通过'while'完成了它，但问题仍然存在。请参阅下面的代码...

```
use strict;
use Tie::File;
# use warnings;
my @arr;
# tie @arr, 'Tie::File', 'title_Nov19.txt';

# open(IT,"<title_Nov19.txt");                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
# my @arr=<IT>;
# close(IT);
open(RE,">>res.txt");

open(IN,"<input.txt");

while(my $data=<IN>){
    chomp($data);
    print"$data\n";
    my $occ=0;

    open(IT,"<title_Nov19.txt");    
    while(my $line2=<IT>){

        my $line=$line2;
        chomp($line);

        if($line=~m/\b$data\b/is){

            $occ++;

        }

    }
print RE"$data\t$occ\n";
}

close(IT);
close(IN);
close(RE); 
```

所以帮我减少它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:59:12.570

很多事情都错了。

除了通常（缺少`use strict`, `use warnings`，使用 2-argument `open()`，不检查`open()`结果，使用全局文件句柄）之外，您的具体问题是您为每一行打开/读取/关闭第二个文件一次第一的。这将非常缓慢。

我建议您打开文件`title_Nov19.txt`一次，将所有行读入数组或哈希或其他内容，然后将其关闭；然后你可以打开第一个文件，`input.txt`然后走一遍，与数组中的内容进行比较，这样你就不必一直重新打开第二个文件。

此外，我建议您阅读一些有关样式/等的基本文章。如果您的问题实际上是用模糊的现代标准编写的，那么您的问题可能会受到更多关注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:42:25.640

我试图构建一个结构更好的小示例脚本，但我不得不说，伙计，你的问题描述真的很不清楚。正如@LeoNerd 在他的回答中解释的那样，每次都**不要**阅读整个比较文件，这一点很重要。然后我使用哈希来跟踪匹配计数：

```
#!/usr/bin/env perl

use strict;
use warnings;

# cache all lines of the comparison file
open my $comp_file, '<', 'input.txt' or die "input.txt: $!\n";
chomp (my @comparison = <$comp_file>);
close $comp_file;

# prepare comparison
open my $input,  '<', 'title_Nov19.txt' or die "title_Nov19.txt: $!\n";
my %count = ();

# compare each line
while (my $title = <$input>) {
    chomp $title;

    # iterate comparison strings
    foreach my $comp (@comparison) {
        $count{$comp}++ if $title =~ /\b$comp\b/i;
    }
}

# done
close $input;

# output (sorted by count)
open my $output, '>>', 'res.txt' or die "res.txt: $!\n";
foreach my $comp (@comparison) {
    print $output "$comp\t$count{$comp}\n";
}
close $output; 
```

只是为了让你开始......如果有人想进一步研究这个：这些是我的测试文件：

**title_Nov19.txt**

```
This is the foo title
Wow, we have bar too
Nothing special here but foo
OMG, the last title! And Foo again! 
```

**输入.txt**

```
foo
bar 
```

程序的结果被写入**res.txt**：

```
foo 3
bar 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:19:31.820

[这是使用memowe](https://stackoverflow.com/users/1184510/memowe)（谢谢）数据的另一个选项：

```
use strict;
use warnings;
use File::Slurp qw/read_file write_file/;

my %count;
my $regex = join '|', map { chomp; $_ = "\Q$_\E" } read_file 'input.txt';

for ( read_file 'title_Nov19.txt' ) {
    my %seen;
    !$seen{ lc $1 }++ and $count{ lc $1 }++ while /\b($regex)\b/ig;
}

write_file 'res.txt', map "$_\t$count{$_}\n",
  sort { $count{$b} <=> $count{$a} } keys %count; 
```

数字排序输出到`res.txt`：

```
foo 3
bar 1 
```

构建并使用了一个引用元字符 ( `\Q$_\E`) 的替代正则表达式，因此只需要对大文件的行进行一次传递。哈希`%seen`用于确保输入单词每行只计算一次。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-13T01:21:01.797

尝试这个：

grep -i -c -w -f input.txt title_Nov19.txt > res.txt

# sql-server - SQL 查询执行时间过长（SQL Server 2008 R2）

> ID：13452310
> 
> 赞同：0
> 
> 时间：2012-11-19T10:54:39.903
> 
> 标签：sql-server, sql-server-2008-r2

执行 SQL 查询时，我的应用程序出现问题。我附加了 SQL Profiler 来查看问题。

像这样的查询

```
SELECT abc_id 
FROM abc_Master 
WHERE abc_name = @abcName COLLATE SQL_Latin1_General_CP1_CS_AS 
  AND (status=''active'' OR status=''live'') 
```

执行需要 60.102 秒。

我注意到服务器探查器跟踪列表中此查询日志上方的审核登录日志记录。

```
-- network protocol: TCP/IP
set quoted_identifier on
set arithabort off
set numeric_roundabort off
set ansi_warnings on
set ansi_padding on
set ansi_nulls on
set concat_null_yields_null on
set cursor_close_on_commit off
set implicit_transactions off
set language us_english
set dateformat mdy
set datefirst 7
set transaction isolation level read committed 
```

这是造成延迟吗？为什么查询需要 60 秒才能执行？

# wordpress - 显示每种帖子类型的最新帖子

> ID：13452313
> 
> 赞同：0
> 
> 时间：2012-11-19T10:54:46.870
> 
> 标签：wordpress, post

我显示了页面中所有帖子类型的所有帖子。现在我想显示所有帖子类型的所有最新帖子。我只想要所有帖子类型中的一个帖子。

为了显示所有帖子类型的所有帖子，我使用了以下代码。

```
 <?php query_posts(array('post_type'=>array('a','b','c'), 'posts_per_page' => 2)); ?>

              <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
              <div class="issue-content">
                <?php if ( has_post_thumbnail() ) { the_post_thumbnail();} ?>

                  <?php get_template_part( 'content-issues', 'page' ); ?>

                  <?php comments_template( '', true ); ?>
                </div><!--issue-content-->

              <?php endwhile; // end of the loop. ?> 
```

我尝试使用以下代码

```
<?php query_posts(array('post_type'=>array('a','b','c'), 'posts_per_page' => 1)); ?> 
```

我无法从所有帖子类型中获取信息。我如何从所有帖子类型中获取最新帖子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:00:31.470

你应该使用多个`query_posts()`

```
 query_posts('post_type=a&posts_per_page=1'); 
 query_posts('post_type=b&posts_per_page=1');
 query_posts('post_type=c&posts_per_page=1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:51:08.817

您也可以使用[get_posts();](http://codex.wordpress.org/Function_Reference/get_post) 用于从每种帖子类型中获取所有帖子的功能。

# objective-c - 在第二个视图中加载一个笔尖

> ID：13452314
> 
> 赞同：2
> 
> 时间：2012-11-19T10:54:49.117
> 
> 标签：objective-c, ios, frame, subview, nib

![在此处输入图像描述](../Images/7f3296d5803edb74b6dddd649dc89bcd.png)我在另一个视图中的视图中加载一些笔尖时遇到问题。我想像框架一样加载这个笔尖，你有什么有趣的提示给我吗？谢谢西蒙的帮助

* * *

`//.h: PopOverView *popView;`

`//.m:`

`- (void)viewDidLoad`

`{`

`[super viewDidLoad];`

```
`popView = [[PopOverView alloc] initWithNibName:@"PopOverView" bundle:nil];` 
```

`}`

`-(IBAction)pressedButton:(id)sender` `{`

`[self.view addSubView:popView.view];`

`}`

他不知道 PopOverView。我不想 PopOver 我想将另一个视图加载到灰色区域。在左侧，您有一个控制表，如果单击它，您将加载一个站点。就像在 html 中的一个新框架一样。错误消息：使用未声明的标识符“PopOverView”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:08:43.650

请遵循以下代码。PopOverView 是 UIViewController 的子类。

```
PopOverView *popView = [[PopOverView alloc] initWithNibName:@"PopOverView" bundle:nil];
[self.view addSubView:popView.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:26:37.910

好的，我注意到您一定了解我。也许我必须再解释一遍，或者我理解你，所以我很抱歉。

我在这个视图中有一个视图我创建了第二个视图，一个较小的视图，右侧是一个表格视图。现在，我将在一个特殊的行上单击一下，在较小的视图中加载一个“笔尖”。在照片上方，您可以看到我的对象。我将 UIView 与较小的 View 链接起来，为了进行测试，我创建了一个 Button 来加载测试笔尖，它仍然可以工作，但他不仅加载了整个站点的小视图（照片中的灰色视图）

# android - 使用 Json 在 Google Maps Mapview 中绘制路径

> ID：13452315
> 
> 赞同：3
> 
> 时间：2012-11-19T10:54:52.323
> 
> 标签：android, google-maps, android-mapview, android-xml

我指的是这个很好的例子：[见这里](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

我收到以下错误，但找不到解决方案。请帮忙！NoSuchElementException 被触发。在 MainActivity 中，我按照描述进行操作。在我的 Android 清单中，我还包括

```
<uses-library android:name="com.google.android.maps" /> 
```

启动应用程序后，mapview 很快出现（灰色模式），然后突然出现强制关闭对话框。

我的*主要活动*：

```
public class MainActivity extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    MapView mapView = (MapView) findViewById(R.id.mapview); //or you can declare it directly with the API key
    Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));
    RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
    mapView.getOverlays().add(routeOverlay);

}

private Route directions(final GeoPoint start, final GeoPoint dest) {
    Parser parser;
    String jsonURL = "http://maps.google.com/maps/api/directions/json?";
    final StringBuffer sBuf = new StringBuffer(jsonURL);
    sBuf.append("origin=");
    sBuf.append(start.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(start.getLongitudeE6()/1E6);
    sBuf.append("&destination=");
    sBuf.append(dest.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(dest.getLongitudeE6()/1E6);
    sBuf.append("&sensor=true&mode=driving");
    parser = new GoogleParser(sBuf.toString());
    Route r =  parser.parse();
    return r;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我的activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.google.android.maps.MapView
    android:id="@+id/mapview" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:clickable="true"
    android:apiKey="..........................................." />

</RelativeLayout> 
```

*错误日志*：

```
11-19 11:22:17.782: I/MapActivity(10703): Handling network change notification:CONNECTED
11-19 11:22:17.782: E/MapActivity(10703): Couldn't get connection factory client
11-19 11:22:17.822: D/AndroidRuntime(10703): Shutting down VM
11-19 11:22:17.822: W/dalvikvm(10703): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
11-19 11:22:17.872: E/AndroidRuntime(10703): FATAL EXCEPTION: main
11-19 11:22:17.872: E/AndroidRuntime(10703): java.util.NoSuchElementException
11-19 11:22:17.872: E/AndroidRuntime(10703):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:579)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.example.testjsongooglemap.RouteOverlay.redrawPath(RouteOverlay.java:90)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.example.testjsongooglemap.RouteOverlay.draw(RouteOverlay.java:60)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.google.android.maps.Overlay.draw(Overlay.java:179)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:42)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.google.android.maps.MapView.onDraw(MapView.java:530)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.View.draw(View.java:7014)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.View.draw(View.java:7017)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.drawChild(ViewGroup.java:1730)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.View.draw(View.java:7017)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2054)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewRoot.draw(ViewRoot.java:1632)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1335)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.os.Looper.loop(Looper.java:150)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at android.app.ActivityThread.main(ActivityThread.java:4385)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at java.lang.reflect.Method.invoke(Method.java:507)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
11-19 11:22:17.872: E/AndroidRuntime(10703):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:51:34.020

您要做的是将该方法`directions()`放在另一个线程中使用`AsyncTask`，因为您无法在 UI 线程上运行网络方法。此外，用于`mapView.invalidate()`刷新（重绘覆盖）`MapView`并在绘制后查看路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:02:16.577

我相信线路`Route r = parser.parse();`正在返回一条空路线（即内部没有点）。

要确认，请尝试在上述行之后添加以下内容：

```
Lod.d("MyApp", "Route size: " + r.getPoints().size()); 
```

也许你会得到 size `0`。

如果是这种情况，您需要检查为什么解析器无法处理您的路径点。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T11:01:15.397

这是它的样子：

```
public class MainActivity extends MapActivity {

MapView mapView = null;
MapController mapController;
double long1 = 50.123*1E6;
double lati1 = 13.123*1E6;
double long2 = 50.221*1E6;
double lati2 = 13.221*1E6;
GeoPoint start, dest;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     mapView = (MapView) findViewById(R.id.mapview);

     DirectionsTask getDirectionsTask = new DirectionsTask();
     getDirectionsTask.execute(new GeoPoint((int)(long1),(int)(lati1)), new GeoPoint((int)(long2),(int)(lati2)));

}

private class DirectionsTask extends AsyncTask<GeoPoint, Void, Route> {

    protected Route doInBackground(GeoPoint...geoPoints) {
        start = geoPoints[0];
        dest =  geoPoints[1];

           Parser parser;
            String jsonURL = "http://maps.google.com/maps/api/directions/json?";
            final StringBuffer sBuf = new StringBuffer(jsonURL);
            sBuf.append("origin=");
            sBuf.append(start.getLatitudeE6()/1E6);
            sBuf.append(',');
            sBuf.append(start.getLongitudeE6()/1E6);
            sBuf.append("&destination=");
            sBuf.append(dest.getLatitudeE6()/1E6);
            sBuf.append(',');
            sBuf.append(dest.getLongitudeE6()/1E6);
            sBuf.append("&sensor=true&mode=driving");
            Log.v("I came in URL", sBuf.toString());
            parser = new GoogleParser(sBuf.toString());
            Route r =  parser.parse();
            return r;
    }

protected void onPostExecute(Route route) {
    RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
     mapView.getOverlays().add(routeOverlay);
     mapView.invalidate();
     mapController = mapView.getController();
     mapController.setZoom(14); // Zoom 1 is world view
     mapView.getMapCenter();

}

} 
```

# javascript - 每个块内的自定义助手

> ID：13452319
> 
> 赞同：0
> 
> 时间：2012-11-19T10:55:17.423
> 
> 标签：javascript, ember.js, handlebars.js

```
myArray = [{name: "name1", age: 20}, {name: "name2", age:22}];

{{#each person in myArray}}
  {{#myHelper person}}
    Do something
  {{/myHelper}}
{{/each}}

Handlebars.registerHelper(function(context, options){ 
 if(context.age > 18){
   return options.fn(this);
 }else{
   return options.inverse(this);
 }
}) 
```

在上面的代码中，当我尝试调试我的自定义助手时，它显示了`context="person"`我希望`context`成为`person`对象时，我的代码有什么问题？

[我在这里](https://stackoverflow.com/questions/12368433/how-to-implement-nested-each-loops-with-custom-helpers-handlebar)发现了一个类似的问题，但也没有得到它......

# c++ - 使用 front() 方法的队列数据结构应用程序崩溃

> ID：13452320
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:55:21.870
> 
> 标签：c++, data-structures, queue, crash

我正在实现一个队列数据结构，但我的应用程序崩溃了。我知道我在队列类的节点指针 front 或 Front() 方法上做错了

```
#include <iostream>
using namespace std;

class Node 
{ 
    public: 
        int get() { return object; }; 
        void set(int object) { this->object = object; }; 
        Node * getNext() { return nextNode; }; 
        void setNext(Node * nextNode) { this->nextNode = nextNode; }; 
    private: 
        int object; 
        Node * nextNode; 
};

class queue{
    private:
        Node *rear;
        Node *front;
    public:
        int dequeue() 
        { 
            int x = front->get(); 
            Node* p = front; 
            front = front->getNext(); 
            delete p; 
            return x; 
        }

        void enqueue(int x) 
        { 
            Node* newNode = new Node(); 
            newNode->set(x); 
            newNode->setNext(NULL); 
            rear->setNext(newNode); 
            rear = newNode; 
        }

        int Front() 
        { 
            return front->get(); 
        } 

        int isEmpty() 
        { 
            return ( front == NULL ); 
        }
};
main()
{
    queue q;
    q.enqueue(2);
    cout<<q.Front();

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:03:18.440

您多次使用未初始化的指针。

*   Enqueue 是指后置->setNext()。如果队列为空，则后端未初始化，导致崩溃。
*   Front*通过某个 Node 成员函数*返回节点，而不检查非空指针。为什么不简单地返回 *front 指针？
*   您的所有类都没有构造函数。您的指针甚至不是 NULL 指针，它们只是未初始化。那是自找麻烦。

我的建议：

*   给这两个类一个构造函数。
*   调用任何节点成员函数时，检查有效指针。
*   使用更少的节点成员函数；尽可能返回原始指针。

# jsf - Unicode 字符（阿拉伯字母）在 IDE 控制台中显示为问号

> ID：13452324
> 
> 赞同：3
> 
> 时间：2012-11-19T10:55:32.063
> 
> 标签：jsf, utf-8, character-encoding, console

我正在使用 JSF 2.0，我的文本字段为

```
<h:form>
    <h:inputText value="#{myBean.myValue}" />
    <h:commandButton value="Submit" action="#{myBean.printMe()}" />
</h:form> 
```

```
public void printMe() {
    System.out.println("first line==" + myValue + "==");
    System.out.println("second line==يشسيبشسيبشسيبشيس==");
} 
```

当我运行这个项目并`يشسيبشسيبشسيبشيس`在文本框中输入时，在 IDE 控制台中我看到如下。

```
INFO: first line==????????????????==
INFO: second line==????????????????== 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T11:20:17.710

这是由于使用了错误的控制台编码造成的。

线

```
System.out.println("My Data is " + fullName); 
```

打印到标准输出 (stdout)。您还需要将其配置为使用 UTF-8。假设您使用的是 Eclipse，那么您需要通过*Window > Preferences > General > Workspace > Text File Encoding*将 stdout 编码更改为 UTF-8 。

![enter image description here](../Images/4624dbe3cc5443f249bf15d4018798e7.png)

If you're using Netbeans, which I can't answer from top of head, head to this answer: [hebrew appears as question marks in netbeans](https://stackoverflow.com/questions/662146/hebrew-appears-as-question-marks-in-netbeans) which contains a link to this [Netbeans Wiki](http://wiki.netbeans.org/FaqI18nProjectEncoding) which mentions the following:

> To change the language encoding for a project:
> 
> 1.  Right-click a project node in the Projects windows and choose Properties.
> 2.  Under Sources, select an encoding value from the Encoding drop-down field.

### See also:

*   [Unicode - How to get the characters right?](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

**Unrelated** to the concrete problem, those lines in the filter are unnecessary

```
 res.setCharacterEncoding("UTF-8");
    res.setContentType("text/html;charset=utf-8"); 
```

They defaults in case of JSF2/Facelets to proper values already. Remove those lines.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-19T10:59:16.483

如果数据来自数据库，请检查字段数据类型是否为 nvarchar。

# sql - 数据类型错误（nvarchar 而不是 ntext）

> ID：13452326
> 
> 赞同：0
> 
> 时间：2012-11-19T10:55:35.247
> 
> 标签：sql, sql-server-2008, excel, ssis

我正在使用 SSIS 将数据从 excel(.xls) 导入 SQL Server 2008。我已包含`IMEX=1`在 excel 连接管理器的连接字符串中。但是一列包含如下值：

```
4-Hour Engineer Dispatch ASPP Engr Dispatch 1: Up to 1 dispatch (8 hours) per year.  Hours exceeding allocation billed @ 1.5x hourly rate w/ 8-hr min Engr Dispatch:  8-hrs to arrive on-site from Ciena's determination of need  On-Site Engineer Dispatch - 8 Hour ASPP Engr Dispatch 8: Up to 8 dispatch (64 hours) per year.  Hours exceeding allocation billed @ 1.5x hourly rate w/ 8-hr min Engr Dispatch:  NBD to dispatch from Ciena's determination of need Per Incident On Site Support ASPP Engr Dispatch 12: Up to 12 dispatch (96 hours) per year.  Hours exceeding allocation billed @ 1.5x hourly rate w/ 8-hr min Engr Dispatch:  Next day to arrive on-site from Ciena's determination of need  Resident Engineer Engr Dispatch:  2-hrs to arrive on-site from Ciena's determination of need Engr Dispatch:  4-hrs to arrive on-site from Ciena's determination of need ASPP Engr Dispatch 2: Up to 2 dispatch (16 hours) per year.  Hours exceeding allocation billed @ 1.5x hourly rate w/ 8-hr min N 
```

实际上，该 Excel 文件中有大约 600 行。但上述值仅在 450 行之后出现。因此，该列的数据类型被`nvarchar(255)`视为默认值，而不是`ntext`因此我收到错误。

任何人请帮忙...提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:55:32.933

在 SSIS 中使用 Excel 源和 OLE DB 目标之间的基本数据流转换\数据转换

[**例子**](http://sqlblog.com/blogs/eric_johnson/archive/2010/10/01/data-conversion-in-ssis.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:49:20.633

默认情况下，Excel 使用前 8 行来确定数据类型。

您可以增加注册表中的采样大小 (http://ddkonline.blogspot.ca/2008/05/ssis-excel-data-source-error-text-was.html)

请注意，该密钥似乎并不总是位于那里。在我的机器上，它位于`HKLM\SOFTWARE\Wow6432Node\Microsoft\Office\12.0\Access Connectivity Engine\Engines\Excel`.

`TypeGuessRows`您可以在注册表中搜索。

# c# - 如何在运行时旋转标签、文本框或图片框？

> ID：13452327
> 
> 赞同：0
> 
> 时间：2012-11-19T10:55:38.773
> 
> 标签：c#, winforms, rotation

是否可以通过给出角度值在运行时旋转标签、文本框或图片框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T10:59:21.310

查看[代码项目](http://en.wikipedia.org/wiki/The_Code_Project)文章*[自定义文本 - C# 中的定向控件 - 第 I 部分（标签控件）](http://www.codeproject.com/Articles/8383/Customized-Text-Orientated-Controls-in-C-Part-I-La)*：

> 介绍
> 
> 显示文本的方式有很多种。但最常见的方式是以直线、圆弧和圆的路径显示它。NET自带的Label只能以直线路径显示文字。该控件可以通过旋转角度在所有主要三种方法中执行此操作。此外，文本可以按我们感兴趣的方向显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:57:57.020

不在 WinForms 中，不。如果你使用 WPF，你可以做到这一点。

# yii - 如何正确添加 javascript 到 YII？

> ID：13452329
> 
> 赞同：1
> 
> 时间：2012-11-19T10:55:40.573
> 
> 标签：yii

我想创建几个不同页面需要的 javascript 函数。大多数只与一页相关，但有些与几页相关。我知道如果我添加通用转换函数，最好创建一个新的 javascript 文件并将所有这些通用函数放入该文件中。把我带到我的第一个问题：

*   您将在哪里存储通用 javascript 文件？在“受保护”中？哪个子文件夹？

然后，我需要解决其他 javascript 代码的放置问题。

*   如果我有只在一个页面上使用的 javascript，我应该使用[这种技术](http://www.techportal.co.za/yii-framework/439-how-to-add-javascript-to-you-view-files-using-the-yii-framework)还是应该坚持与上述类似的方法？

重点是正确地做。我想完全符合 yii 框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:15:49.467

将您的通用 javascript 文件存储在 your_app/js 文件夹中，即 js 文件夹与受保护的级别相同。如果 js 只在一页上使用，那么最好不要使用通用文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:21:02.167

将通用 js 代码放入`/js/`应用程序代码根目录下或类似命名文件夹的最佳方式。就我个人而言，我会将我的自定义代码文件分离到另一个子目录中`/js/custom/`，并且`/js/vendors/`在此供应商文件夹中，您可以放置​​准备好的 js 代码，例如 jquery 插件等。

也不要忘记将此路径设置为配置文件，如下所示：

```
'components'=>array(

   'clientScript' => array(

      'coreScriptUrl' => 'path/to/js/lib/dir',

      'enableJavaScript' => true,

   ),

), 
```

`path/to/js/lib/dir`您的最终 js 文件夹名称路径在哪里

# xml - 如何使用 Jersey 从 XML 输出中省略 @XmlRootElement？

> ID：13452330
> 
> 赞同：1
> 
> 时间：2012-11-19T10:55:43.420
> 
> 标签：xml, jersey

如何使用 Jersey 从 XML 输出中省略 @XmlRootElement？

如何从 Jersey JAX-B 输出以下 XML：

```
 <Element>sometext</Element> 
```

如果我有一个带有成员变量的名为元素的 POJO，则字段名称将成为 XML 的一部分。例如

```
<Element>
    <field>sometext</field>
</Element> 
```

同样，如果我命名字段元素，我将有 POJO 名称的不必要标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:22:29.613

`@XmlElement`您可以利用而不是删除`@XmlValue`来获得所需的结果。它对应于将对象映射到具有简单内容的复杂类型。

```
@XmlRootElement(name="Element")
@XmlAccessorType(XmlAccessType.FIELD)
public class Element { 

    @XmlValue
    private String field;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

# android - Android 看到旧的推送通知

> ID：13452333
> 
> 赞同：2
> 
> 时间：2012-11-19T10:56:01.390
> 
> 标签：android, push-notification

我可以在手机、日志文件等的某处找到旧收到的推送通知吗？

无法通过 Google 找到任何信息。谢谢。

编辑：在写这篇文章之前谈论已经收到的通知。应用程序中没有自定义日志记录系统。需要在设备的某个地方找到它们。也许是一些隐藏的日志文件或埋在某个地方？我有一个根设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:07:58.613

我不认为有任何方法可以做到这一点。您应该已经使用日志记录设置您的服务器，或者在您的应用程序中这样做。

# eclipse - 为什么 EGit 有不同类型的“团队”菜单？

> ID：13452334
> 
> 赞同：3
> 
> 时间：2012-11-19T10:56:04.557
> 
> 标签：eclipse, egit

什么决定了我的项目显示哪种类型的团队菜单？有没有办法在两者之间切换？

1.  非常传统的 git-ish（即没有“同步工作区”选项） ![不同步](../Images/0b5654f957b83cc1098073dc7c2ee73b.png)

2.  eclipse team-ish（例如，使用“同步工作区”选项） ![与同步](../Images/44d6f9146991e01c3b5adc91408ba6da.png)

### 更新

我的 git 存储库视图显示以下内容： ![git 存储库](../Images/a11c1fbf64e1d7f8458527e8e326fb28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:40:15.000

使用以下步骤，我为我的项目启用了“团队”功能：

*   在 Eclipse 中删除项目
*   删除文件系统上的项目（包括 .git/ 存储库数据）
*   将项目克隆到文件系统中
*   将本地存储库添加到“Git 存储库”Eclipse 视图
*   在 Eclipse 中，在新添加的存储库上调用“导入项目...”，然后“导入为通用项目”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:34:17.043

当您有以下情况时，第二个菜单应该生效：

*   [配置的上游提取](http://wiki.eclipse.org/EGit/User_Guide#Configuring_upstream_fetch)
*   [配置推送到上游](http://wiki.eclipse.org/EGit/User_Guide#Configuring_upstream_push)

那是当您的本地存储库知道从远程存储库获取或推送什么时。

# visual-studio - 如何摆脱 WPP TraceEvent 宏的警告曲线？

> ID：13452337
> 
> 赞同：11
> 
> 时间：2012-11-19T10:56:19.323
> 
> 标签：visual-studio, visual-studio-2012, intellisense, wdk

在 Visual Studio (2012) 中使用[WPP](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556204(v=vs.85).aspx)`TraceEvents(...)`时，每次出现都有一个波浪下划线，帮助文本例如

```
#define TraceEvents WPP_(CALL)
error: identifier WPP_Call_Foo_cppNNN not defined 
```

好吧，它是在 WPP 预处理器创建的 .tmh 头文件中定义的，并且项目编译得很好。但 Visual Studio 不会扫描和/或识别此文件。
有没有摆脱这些曲线的实用方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-11T13:07:24.367

现在我通过放置来解决这个问题

```
#ifdef __INTELLISENSE__
#undef TraceEvents
#define TraceEvents(a,b,...)
#endif 
```

无论如何，在所有文件中包含在 .tmh 之后的头文件之一中。
该定义在[http://blogs.msdn.com/b/vcblog/archive/2011/03/29/10146895.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/03/29/10146895.aspx)`__INTELLISENSE__`中提到

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-11T02:07:49.117

**编辑 Visual Studio 2012：**

看来您已达到 Visual Studio 2012 的 IntelliSense 引擎中预处理器的分析限制。如果将`TraceEvents`引用替换为`WPP_Call_Foo_cppNNN`，它实际上可以毫无问题地解析标识符（直到您重建解决方案并且**tmh**标头更改）。

解决方案是在 Visual Studio 2013 中加载解决方案，并选择**不**升级编译器工具链，从而保持与 Visual Studio 2012 的向后兼容性。

* * *

**Visual Studio 2013 的先前答案：**

这是在 Visual Studio 2013 中测试的，因此它可能不适用于 Visual Studio 2012。我找不到支持 Visual Studio 2012 的 WDK 版本，所以如果以下步骤不起作用。

构建项目后（确保**.tmh**文件存在），执行**Project → Rescan Solution**命令。

我还建议您通过以下步骤将文件与 C++ 编辑器关联：

1.  打开**工具 → 选项... → 文本编辑器 → 文件扩展名**
2.  将扩展**tmh**与编辑器**Microsoft Visual C++关联**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T14:55:27.210

关掉`Live Semantic Errors`输入`Options->Text Editor->C/C++ -> Advanced`...

# javascript - Backbone Cleanup - 删除上下文绑定回调的引用

> ID：13452339
> 
> 赞同：0
> 
> 时间：2012-11-19T10:56:29.223
> 
> 标签：javascript, backbone.js, underscore.js

我正在开发一个 Backbone 应用程序。我创建了具有销毁方法的基本视图，所有其他视图都对其进行了扩展。

销毁视图实例时，我想确保如果视图具有模型或集合，我将解除绑定它正在侦听的任何事件。

假设我在视图的初始化中使用下划线的 _.bindAll，下面的 off 语句是否会删除引用。

```
var DocumentRow = Backbone.View.extend({

  initialize: function() {
      _.bindAll( this );

     this.model.on('change', this.render);
  },

  destroy : function() {
      // Will this work?
      this.model.off(null, null, this);

  }

}); 
```

还是我需要像这样显式绑定事件

```
this.model.on('change', this.render, this); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:22:38.933

`this.model.on('change', this.render);`不会按你想要的方式工作。您需要将其更改为`this.model.on('change', this.render, this);`

如果您查看该`on`方法的来源（http://backbonejs.org/docs/backbone.html#section-18），它不会将您的`context`变量默认为任何内容。因此，如果您不设置它，调用`off`将无法正确找到事件绑定。

FWIW，我厌倦了不得不做相应`on`和`off`调用，所以我写了一个插件来为我处理很多它：[https ://github.com/marionettejs/backbone.eventbinder](https://github.com/marionettejs/backbone.eventbinder)

您可以像这样使用它，而不必担心获得正确的上下文或其他任何事情。

```
 var DocumentRow = Backbone.View.extend({

  initialize: function() {
     this.eb = new Backbone.EventBinder();
     this.eb.bindTo(this.model, 'change', this.render);
  },

  destroy : function() {
      this.eb.unbindAll();
  }

}); 
```

这样做的真正好处是不必调用`off`每个`on`. 您只需要调用一次`unbindAll`，它就会取消绑定存储在事件绑定器实例中的所有事件。

# html - html和css中的浮动菜单

> ID：13452342
> 
> 赞同：-1
> 
> 时间：2012-11-19T10:56:38.223
> 
> 标签：html, css, image, floating, squarespace

我有一个关于要放在页面上的浮动图片的问题。我尝试了一切，但它不会按照我想要的方式工作。问题是图片完美浮动，但是当我在不同的计算机上打开页面时，图片位于内容的中间。我尝试了位置；固定，但这不起作用。也许我在使用 squarespace 的 HTML 和 CSS 中输入了错误的代码。

有人可以帮帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:11:28.400

通过`position:fixed`您将图像相对于窗口边框放置。当然，除非您的网站是绝对可拉伸的，否则在不同分辨率下查看时会产生不同的结果。有时会掩盖内容。

您需要一些可以在指定区域内浮动您的图像的东西。例如，下面的 javascript 代码就可以了：[http ://www.jtricks.com/javascript/navigation/floating/confined_demo.html](http://www.jtricks.com/javascript/navigation/floating/confined_demo.html)

# php - 创建一个包含php执行结果的文件

> ID：13452349
> 
> 赞同：1
> 
> 时间：2012-11-19T10:56:50.603
> 
> 标签：php, android, jackson

我有一个选择表中所有行的 php 文件，我想将结果内容存储在 www/ 目录中的文件中，就像我可以解析该 name.json 文件并使用 jackson 库在 Android 中显示其内容一样。这是我的 php 文件：

```
<?php header('Content-type: application/json');

/*
 * Following code will list all the surveys
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all surveys from surveys table
$result = mysql_query("SELECT * FROM surveys") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // surveys node
    $response["surveys"] = array();

    while ($row = mysql_fetch_array($result)) {
        // temp user array
        $survey = array();
        $survey["id_survey"] = $row["id_survey"];
        $survey["question_survey"] = $row["question_survey"];
        $survey["answer_yes"] = $row["answer_yes"];
        $survey["answer_no"] = $row["answer_no"];

        // push single survey into final response array
        array_push($response["surveys"], $survey);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no surveys found
    $response["success"] = 0;
    $response["message"] = "No surveys found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

因此：php 文件 => 执行 => 将结果存储在文件中 => 解析该文件并将其显示在 Android 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:06:57.470

如果要将 JSON 写入文件，只需添加：

```
file_put_contents( "filename.json", json_encode($response) ); 
```

在您的旁边或代替您的`echo`;

# java - 使用 PDFBox 填写 PDF 表单不起作用

> ID：13452351
> 
> 赞同：7
> 
> 时间：2012-11-19T10:56:52.563
> 
> 标签：java, pdf, pdfbox, pdf-form

我有一个 PDF 文件，其中包含一些需要从 Java 代码填写的表单字段。我为此使用 PDFBox 库，以及此代码：

```
PDDocument pdfDoc = PDDocument.load("C:\\Users\\igor\\Desktop\\test.pdf");
PDDocumentCatalog docCatalog = pdfDoc.getDocumentCatalog();
PDAcroForm acroForm = docCatalog.getAcroForm();
PDField field = acroForm.getField("applicationPrepaid[0].#pageSet[0].Pagina1[0].txtFirstName[0]");
if (field != null) {
    field.setValue("Milan");
} else {
    System.err.println("No field found with name:" + "applicationPrepaid[0].#pageSet[0].Pagina1[0].txtFirstName[0]");
}
pdfDoc.save("C:\\Users\\igor\\Desktop\\testout.pdf");
pdfDoc.close(); 
```

PDF不是我创建的，所以我不知道文件使用什么类型的表格（如果我理解正确的话，有FDF和XFA表格）。由于 PDF 不是我创建的，我使用这个工具[http://support.persits.com/pdf/demo_formfields.asp](http://support.persits.com/pdf/demo_formfields.asp)来找出表单字段的名称，它给了我这个：

```
applicationPrepaid[0].#pageSet[0].Pagina1[0].txtFirstName[0] 
```

当我使用这个长字段名称时，我没有收到任何错误，但生成的 PDF 不包含我在字段中输入的值。我认为字段名称可能有问题，所以我使用了[Pdftk 工具](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)，它只给了我`txtFirstName`字段名称。但是当我使用它时，我得到了`No field found with name: txtFirstName`错误。帮助？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-04T22:24:11.237

好吧，我意识到这个问题现在已经很老了，但是我偶然发现了它，并认为我应该发布我的解决方案。

您可以使用 PDFBox 找出 PDF 表单中字段的 ID。它有一个非常丰富的 API，不幸的是它需要大量阅读才能弄清楚你必须做什么。

要获取表单字段的名称，您要使用`getFullyQualifiedName`哪个是`PDField`类的一部分。

不幸的是，您不能一次性从`PDAcroform`类中获取所有文件名（我可以告诉您），因此您可以简单地创建一个表单名称数组，然后循环遍历每个文件名。

例如

```
 // Load the pdfTemplate
    pdfTemplate = PDDocument.load(file);

    PDDocumentCatalog docCatalog = pdfTemplate.getDocumentCatalog();
    PDAcroForm acroForm = docCatalog.getAcroForm();

    // Get field names
    List<PDField> fieldList = acroForm.getFields();

    // String the object array
    String[] fieldArray = new String[fieldList.size()];
    int i = 0;
    for (PDField sField : fieldList) {
        fieldArray[i] = sField.getFullyQualifiedName();
        i++;
    }

    // Loop through each field in the array and do something
    for (String f : fieldArray) {
        PDField field = acroForm.getField(f);

        System.out.println("f is: " + f);
        if (f.contains("EXAMPLE FORM FIELD NAME")) {
            DO SOMETHING
                            String value = "example value";
            field.setValue(value);
            System.out.println("printed: " + value + " to: " + f);
        }
    }

    // Save edited file
    pdfTemplate.save(sPdfTemplate);
    pdfTemplate.close(); 
```

希望这可以帮助某人。

干杯

# python - 用什么做多重关联？

> ID：13452353
> 
> 赞同：8
> 
> 时间：2012-11-19T10:56:52.697
> 
> 标签：python, correlation, statsmodels

我正在尝试使用 python 来计算响应数组和一组预测变量之间的多重线性回归和多重相关性。我看到了计算多元线性回归的非常简单的示例，这很容易。但是如何使用 statsmodels 计算多重相关性呢？或与其他任何东西，作为替代。我想我可以使用 rpy 和 R，但如果可能的话，我更愿意留在 python 中。

编辑[澄清]：考虑到这里描述的情况：http: [//sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704-EP713_MultivariableMethods/](http://sphweb.bumc.bu.edu/otlt/MPH-Modules/BS/BS704-EP713_MultivariableMethods/) 我还想计算预测变量的多个相关系数, 除了回归系数和其他回归参数

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T14:44:57.427

你当然可以用 statsmodels 和 pandas 做到这一点。这样的事情可能会让你开始

```
import pandas
import statsmodels.api as sm
from statsmodels.formula.api import ols

data = pandas.DataFrame([["A", 4, 0, 1, 27], 
                         ["B", 7, 1, 1, 29], 
                         ["C", 6, 1, 0, 23], 
                         ["D", 2, 0, 0, 20], 
                         ["etc.", 3, 0, 1, 21]], 
                         columns=["ID", "score", "male", "age20", "BMI"])
print data.corr()

model = ols("BMI ~ score + male + age20", data=data).fit()
print model.params
print model.summary() 
```

看看文档：

[http://statsmodels.sourceforge.net/devel/](http://statsmodels.sourceforge.net/devel/)

[http://pandas.pydata.org/](http://pandas.pydata.org/)

**编辑：**我不熟悉术语多重相关系数，但我相信这只是多元回归模型的 R 平方的平方根，不是吗？

```
print model.rsquared**.5
print model.rsquared_adj**.5 
```

这就是你所追求的吗？

# parsing - 在 PARSE 方言中，人们如何寻找 TO 或 THRU CHARSET？

> ID：13452364
> 
> 赞同：2
> 
> 时间：2012-11-19T10:57:30.897
> 
> 标签：parsing, rebol, bitset

首先我要说明我的意图：我正在尝试为可能混淆的 10 位电话号码编写解析规则。所以想象一下这样的情况`"callmeNOW...555___555____5555!"`

我想从维基百科的[有效区号](http://en.wikipedia.org/wiki/Numbering_plan_area)列表开始。然后我将它们转换为管道分隔的字符串！用作我寻求的解析规则`TO`。

在那之后，我想我会尝试只阅读接下来的 10 位数字。但是我期望工作的概念验证没有：

```
>> digit: charset "0123456789"
== make bitset! #{000000000000FFC0}

>> parse "callmeNOW...555___555____5555!" [10 [thru digit] to end]
== false 
```

引导我进行一个更简单的测试，但未能做到我想要的：

```
>> parse "5" [thru digit]
== false 
```

如果我不将它与 THRU 一起使用，那么它会执行预期的操作：

```
>> parse "5" [digit]
== true 
```

为什么在用作标记但不与`TO`or一起使用时会支持位集`THRU`？

* * *

*PS如果有人想要的话，这里是作为Rebol块的区号列表......*

```
valid-area-codes: [
    205 251 256 334 659 938 907 250 480 520 602 623 928 327 479 501 870
    209 213 310 323 341 369 408 415 424 442 510 530 559 562 619 626 627
    628 650 657 661 669 707 714 747 760 764 805 818 831 858 909 916 925
    935 949 951 303 719 720 970 203 475 860 959 302 202 239 305 321 352
    386 407 561 689 727 754 772 786 813 850 863 904 941 954 229 404 470
    478 678 706 762 770 912 808 208 217 224 309 312 331 447 464 618 630
    708 730 773 779 815 847 872 219 260 317 574 765 812 319 515 563 641
    712 316 620 785 913 270 364 502 606 859 225 318 337 504 985 207 227
    240 301 410 443 667 339 351 413 508 617 774 781 857 978 231 248 269
    313 517 586 616 679 734 810 906 947 989 218 320 507 612 651 763 952
    228 601 662 769 314 417 557 573 636 660 816 975 406 308 402 531 702
    775 603 201 551 609 732 848 856 862 908 973 505 575 212 315 347 516
    518 585 607 631 646 716 718 845 914 917 929 252 336 704 828 910 919
    980 984 701 216 234 283 330 380 419 440 513 567 614 740 937 405 539
    580 918 458 503 541 971 215 267 272 412 445 484 570 582 610 717 724
    814 835 878 401 803 843 864 605 423 615 731 865 901 931 210 214 254
    281 325 361 409 430 432 469 512 682 713 737 806 817 830 832 903 915
    936 940 956 972 979 385 435 801 802 276 434 540 571 703 757 804 206
    253 360 425 509 564 304 681 262 274 414 534 608 715 920 307
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:30:07.030

当然，虽然 R3 确实移动`parse`了一点，但通常的模式是创建一个互补的位集来跳过所需集之外的内容。

```
filler: complement digit: charset "0123456789"
parse/all stream [any [copy n some digit (append out: [] n) | some filler]]
probe out   ; all the digit chunks in the stream 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:53:25.597

真正的答案是 TO 和 THRU 不是模式匹配运算符，而是搜索运算符。

字符集专门用于模式匹配，因此它们是位掩码，因此您无法搜索它们，它们不存在于流中，它们一次一个字节地过滤和比较它。这并不意味着它们将来不能用于 TO/THRU，只是为什么它们到目前为止不打算这样使用。

您的“管道规则”示例起作用的原因（它实际上是使用 OR ("|") 操作的替代列表）是 TO/THRU 将按给定顺序搜索每个替代，直到匹配一个（因此排序应该改变速度，在一长串替代品中）。

以下规则将提取所有格式相对良好的电话号码，从而在表格（R2 和 R3）中留出一些“回旋余地”：

```
digit: charset "0123456789"
!digit: complement digit

parse/all text [   
    any [ 
        copy phone [ opt "(" 3 digit    1 3 !digit   3 digit    1 3 !digit    4 digit] (print phone)  
        |  skip 
    ] 
] 
```

请注意，以上是任何北美电话的快速而肮脏的号码提取器。它将扫描整个文本，打印它找到的任何数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:57:30.897

不简洁，但如果我不将我的数字集构建为 BITSET！而是使用管道规则，它可以正常工作：

```
>> digit: ["0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"]
== ["0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9"]

>> parse "callmeNOW...555___555____5555!" [10 [thru digit] to end]
== true 
```

# c# - 如何使用 DateTime C# 解析 [29:00:00 28:30:20 27:10:11 26:00:01 25:00:40]？

> ID：13452366
> 
> 赞同：-4
> 
> 时间：2012-11-19T10:57:36.293
> 
> 标签：c#, datetime

简单案例1：

输入：

```
29:00:00 28:30:20 27:10:11 26:00:01 25:00:40 08:11:12 12:10:18 15:05:05 
```

输出：

```
05:00:00 04:30:20 03:10:11 02:00:01 01:00:40 08:11:12 12:10:18 15:05:05 
```

我的功能不起作用：

```
public static DateTime ParseDate(string s)
{
  DateTime result;
  if (!DateTime.TryParse(s, out result))
  {
    result = DateTime.ParseExact(s, "29:mm:ss", System.Globalization.CultureInfo.InvariantCulture);
    result = result.AddDays(1);
  }
  return result;
}

ParseDate("27:10:11"); 
```

得到错误：字符串未被识别为有效的日期时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:02:40.610

您需要为此自定义代码，DateTime.TryParse 不是正确的工具。看看时间跨度。这将解决您尝试做的任何事情。但是，从 .net 4.0 开始，您仍然需要在小时部分检查 > 23。

```
//                     23:0:0        23:00:00 
//                     24:0:0   Parse operation failed. 
```

[时间跨度 msdn](http://msdn.microsoft.com/en-us/library/3z48198e.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:07:36.637

假设它实际上是 a`TimSpan`并且您想要返回`DateTime`( `DateTime.Today + timespan`)。请注意，您不能创建超过 24 小时的过[`TimeSpan`](http://msdn.microsoft.com/en-us/library/system.timespan%28v=vs.110%29.aspx)孔。你需要这样做：[`Parse`](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)`ParseExact`

```
public static DateTime GetAddTimespan(string span)
{
    var tokens = span.Split(':');
    TimeSpan ts = new TimeSpan(
                  int.Parse(tokens[0]),    // hours
                  int.Parse(tokens[1]),    // minutes
                  int.Parse(tokens[2]));   // seconds)                              
    return DateTime.Today + ts;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:04:44.910

您不能使用 DateTIme 执行此操作，因为它们不是有效的时间戳。你可以用 TimeSpan 做类似的事情

```
public static DateTime ParseDate(string s)
{
  var tokens = s.Split(':').Select(x => int.Parse(x));
  var now = DateTime.Now;
  return new DateTime(now.Year,
                      now.Month,
                      now.day,
                      tokens[0] % 24,
                      tokens[1],
                      tokens[2]);
} 
```

这只是解析内容并确保小时值在 0 到 23 之间（都包括在内）。解析中没有错误处理，因此输入需要有效

由于您正在寻找 DAteTime 值，因此您需要提供日期和时间。上面的代码假定日期应该是今天，并且您可以 dsregard 小时值是否大于 23

# sharepoint-2010 - 在 SharePoint 用户控件中加载错误的资源

> ID：13452377
> 
> 赞同：2
> 
> 时间：2012-11-19T10:58:28.330
> 
> 标签：sharepoint-2010, localization, ascx, variations

我们有一个客户使用 SharePoint 2010 服务器和为 en-US 和 fr-CA 设置的变体。指定的语言分别是英语和法语。当一名法裔加拿大员工进入 fr-CA 变体中的页面时，母版页中定义的所有控件都正确地以法语本地化，甚至是我们自己的一个由委托控件注入的控件。

页面上的主要 Web 部件加载我们自己的容器控件，由一些次要标记和一个 UpdatePanel 组成。现在，此控件上的所有内容都被错误地本地化为英语。还有一些额外的内容，由 aspx 页面加载，并且这些内容被正确本地化。

我无法在我的本地开发 SharePoint 中重现这个问题，所以我在这里很茫然。控件基本上是通过`Page.LoadControl`类似的路径加载的`/_controltemplates/Container.ascx`。我需要`~`在路径前面吗？那究竟是做什么的？这也能解释一下，为什么这只发生在客户的 SharePoint 而不是我的本地？

我希望我的解释不要太含糊。如果您有想法并需要更多信息，请随时提问！

问候，鲍里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T20:12:41.383

您是否检查了 uls 日志以查找失败的资源查找，可能是服务器上的一些不是最新的资源文件，您在这些文件中遇到了丢失的本地化，因此您无法重现它。

# ios - iOS 上的 libphonenumber 使用示例

> ID：13452379
> 
> 赞同：5
> 
> 时间：2012-11-19T10:59:06.950
> 
> 标签：ios, libphonenumber

我正在尝试在 iOS 上使用 libphonenumber。我正在使用来自 GitHub[的 Matt Connolly 的 libphonenumber-ios](https://github.com/mattconnolly/libphonenumber-ios)，并且我已经构建了 boost 框架，一切都很好。

现在，在我将 libphonenumber.a 拖入我的 Xcode 项目后，我无法弄清楚如何实际使用它！任何简单的使用示例以及需要导入的标头都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T05:21:31.403

这个怎么用？

全端口 google libphonenumber

[https://github.com/iziz/libPhoneNumber-iOS](https://github.com/iziz/libPhoneNumber-iOS)

# google-maps - 沿您的路径查找特定城市

> ID：13452385
> 
> 赞同：0
> 
> 时间：2012-11-19T10:59:26.423
> 
> 标签：google-maps, google-maps-api-3

我需要你的建议。我正在创建一个 Web 应用程序，我需要在其中查找特定城市是否存在于我的路径中。我正在使用谷歌 API 来获取路径方向，但它不会返回之间的城市。

例如，如果我从 A -> D 出发，我想知道 C ->D 是否沿着我的路径 A -> D 存在。如果我知道 A -> D 之间的城市，我可以轻松做到这一点。但谷歌 API 并没有透露这一点。有没有人有任何其他更好的建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:11:51.837

城市的名称不是很准确，您需要城市的 LatLng。

基于 LatLng，`isLocationOnEdge()`geometry-library 的方法允许您确定 LatLng(city) 是否位于（或靠近）为路线定义的折线：

```
google.maps.geometry.poly
  .isLocationOnEdge(LatLngOfCity,
                    new google.maps.Polyline({path:google.maps.geometry.encoding.decodePath(response.routes[0].overview_polyline.points)}),
                    0000000001)); 
```

`response`必须是方向结果，最后一个参数是公差

[**http://jsfiddle.net/doktormolle/DXCH8/**](http://jsfiddle.net/doktormolle/DXCH8/)

# ios - 访问应用程序文件夹 iOS

> ID：13452390
> 
> 赞同：1
> 
> 时间：2012-11-19T10:59:44.707
> 
> 标签：ios

iFunBox 和 iPhone 文件夹等一些应用程序能够访问 iOS 设备上的应用程序文件夹。有人可以解释为什么这些应用程序有这种可能性而 App Store 应用程序没有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:43:25.460

因为它们不受沙盒的限制。

iOS 应用程序被放置在其单独的沙箱（“chroot jail”）中，它们无法真正访问该特定文件夹之外的任何内容。

但是，桌面应用程序可以使用 Apple 的私有 MobileDevice 框架（它是一个 C API）来访问设备上的任何文件夹，这就是 iTunes 安装应用程序、歌曲、开发者磁盘映像等的方式。

这个框架的一些非官方文档可以在[这里](http://theiphonewiki.com/wiki/index.php?title=MobileDevice_Library)找到。

# c# - 来自 ifstream 的文本在开始时带有“\0\0\0”

> ID：13452396
> 
> 赞同：0
> 
> 时间：2012-11-19T11:00:00.753
> 
> 标签：c#, c++, string, ifstream

这是我获取文本的方式：

```
switch(lsel) {
    case 0:
        luafile = "lua/example.lua";
        break;
    case 1:
        luafile = "lua/example2.lua";
        break;
    }
ifstream f(luafile);
f >> noskipws;  //don't want to skip spaces !
vector<unsigned char> v(
    (istream_iterator<unsigned char>(f))
    , (istream_iterator<unsigned char>()));
LBytes lexing = LBytes(bytes, 2);
lexing += lselect;
lexing += LBytes(v.data(), v.size());
//f.close();
return lexing; 
```

然后我在 C# 中处理它：

```
int docnumber = BitConverter.ToInt32(Core.ncon.ArrayRead, 2);
Log(docnumber.ToString());
char[] valx = new char[Core.ncon.ArrayReadSize - 2 - sizeof(int)];
Array.Copy(Core.ncon.ArrayRead, 2, valx, 0, Core.ncon.ArrayReadSize - 2 - sizeof(int));
Core.lua[docnumber] = new string(valx); 
```

并放入 RichTextBox

```
private void confListBox_SelectedIndexChanged(object sender, EventArgs e) {
    if (confListBox.SelectedIndex < 10) {
        string one = Core.lua[confListBox.SelectedIndex];
        this.luaTextBox.Text = one;
        } 
```

现在一个包含字符串：

```
"\0\0\0\0io.write(\"Please enter your name: \")\n-- name = io.read() -- read input from user\nname = \"someone\"\nprint (\"Hi \" .. name .. \", enjoy hacking with Lu" 
```

和文本将是`""`

这些`\0\0\0\0`东西是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:35:23.183

似乎您在文本前面添加了一些来自与文件不同来源的内容：

```
LBytes lexing = LBytes(bytes, 2);
lexing += lselect;
lexing += LBytes(v.data(), v.size()); 
```

我怀疑前两行贡献了零。

# jquery - jquery如何使可点击的div在新窗口中打开

> ID：13452398
> 
> 赞同：1
> 
> 时间：2012-11-19T11:00:06.700
> 
> 标签：jquery, target

我想制作一个没有可点击内容的 DIV，因为我使用了这个 jquery 代码：

```
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
<script type="text/javascript">

$(document).ready(function() {
$("#whole").click(function () {
    window.location = $(this).attr("href");
    });
});

</script> 
```

它工作正常，但链接总是在同一个窗口中打开。如何更改代码以使 div 在新窗口中打开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:02:30.973

```
$("#whole").click(function () {
   window.open($(this).attr("href"), '_blank');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:02:23.680

你需要[**window.open**](http://www.w3schools.com/jsref/met_win_open.asp)

```
window.open($(this).attr("href")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-06T12:48:59.640

```
$(document).ready(function() {
$("#whole").click(function () {
    window.open("href"); // window.open('https://stackoverflow.com/questions/13452398/jquery-how-to-make-a-clickable-div-open-in-a-new-window');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-21T10:56:06.420

您可以通过以下方法

1)

```
$(文档).ready(函数() {
$("#divId").click(function () {
window.open("openThisPage.html"); //将'openThisPage.html'更改为您的目标页面
});
});

```

# apache - vhost.conf 中的动态文档根目录

> ID：13452402
> 
> 赞同：2
> 
> 时间：2012-11-19T11:00:15.737
> 
> 标签：apache, .htaccess, wamp, virtualhost, vhosts

我想为本地服务器（windows，wamp）上的每个团队成员创建一个子域，他们可以在其中创建单独的网站的文件夹。

例如：

```
member1.local.dev/projectx/
member2.local.dev/projecty/
member2.local.dev/projectz/ 
```

但我无法正确显示文档根目录。我不想为.htaccess 中的每个网站调整文档根目录，但我想在vhost.conf 中修复它。

我找到[了这个](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.htm)，但如果我试图实现它，我会得到一个 403 禁止。

```
<VirtualHost *:80>
    UseCanonicalName Off
    ServerName local.dev
    ServerAlias member1.local.dev
    VirtualDocumentRoot "c:\httpdocs\member1\%2"
    DocumentRoot "c:\httpdocs\member1\%2"
    <directory "c:\httpdocs\member1\%2">
        Options Indexes FollowSymLinks
    </directory>
</VirtualHost> 
```

我做错了什么，有人可以给我一个正确的方向吗？

# iphone - 如何检查 Facebook 帐户是否存在？

> ID：13452407
> 
> 赞同：4
> 
> 时间：2012-11-19T11:00:32.910
> 
> 标签：iphone, objective-c, facebook

我正在尝试实施 Facebook 发布程序。您能帮我了解如何检查该帐户是否存在于 iPhone（iOS6 功能）中。我看到了他们使用此类代码的 WWDC 会议：

```
if (self.accountStore == nil) {
    self.accountStore = [[ACAccountStore alloc] init];
}   
ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
//Now we can obtain some extra permissions
NSArray * permissions = @[@"publish_stream"];
//NSArray * permissions = @[@"user_about_me"];
NSDictionary * dict = @{ACFacebookAppIdKey : FB_APP_ID, ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceEveryone};
[self.accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
    __block NSString * statusText = nil;
    if (granted) {
        statusText = @"Logged in";
        NSArray * accounts = [self.accountStore accountsWithAccountType:facebookAccountType];
        self.facebookAccount = [accounts lastObject];
        NSLog(@"account is: %@", self.facebookAccount);
        self.statusLabel.text = statusText;
        [self postToFeed];
    }
    else {
        self.statusLabel.text = @"Login failed";
        NSLog(@"error is: %@", error);
    }
}]; 
```

但是，如果帐户不存在，我会收到一个错误： `Error Domain=com.apple.accounts Code=6 "The operation couldn’t be completed` 可能是我错过了一些东西..但我不完全明白我应该做什么。如果您发布一些关于如何使用这个新的 iOS 6 功能的教程或链接也会很好，因为 facebook 教程不是很清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:27:16.990

没有内置功能来检查帐户是否存在。您应该像往常一样访问帐户并拦截并处理 else 分支中的错误。错误类型为 ACErrorCode，可能的值为：

```
typedef enum ACErrorCode {
   ACErrorUnknown = 1,
   ACErrorAccountMissingRequiredProperty,
   ACErrorAccountAuthenticationFailed,
   ACErrorAccountTypeInvalid,
   ACErrorAccountAlreadyExists,
   ACErrorAccountNotFound,
   ACErrorPermissionDenied,
   ACErrorAccessInfoInvalid
} ACErrorCode; 
```

因此，您的代码可能如下所示：

```
-(void)requestBasicPermissionsForFacebookAccount {
    ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray * permissions = @[@"email"];
    NSDictionary * options = @{ACFacebookAppIdKey : kFacebookAppId, ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceEveryone};
    FacebookAccountManager * fbMgr = [[FacebookAccountManager alloc] init];
    [self.accountStore requestAccessToAccountsWithType:facebookAccountType options:options completion:^(BOOL granted, NSError *error) {
        if (granted) {
            NSArray * accounts = [self.accountStore accountsWithAccountType:facebookAccountType];
            fbMgr.account = [accounts lastObject];
            fbMgr.isBasicPermissionsGranted = YES;
            [self.accountManagers addObject:fbMgr];
            NSLog(@"granted!");
        }
        else {
            fbMgr.account = nil;
            fbMgr.isBasicPermissionsGranted = NO;
            switch ([error code]) {
                case 1:
                    [self showErrorAlertWithMessage:@"Unknown error occured, try again later!"];
                    break;
                case 3:
                    [self showErrorAlertWithMessage:@"Authentication failed, try again later!"];
                     break;
                case 6:
                    [self showErrorAlertWithMessage:@"Facebook account does not exists. Please create it in Settings and come back!"];
                     break;
                 case 7:
                    [self showErrorAlertWithMessage:@"Permission request failed. You won't be able to share information to Facebook"];
                     break;
                default:
                    break;
            }
            NSLog(@"error is: %@", error);
        }
    }];
}

- (void)showErrorAlertWithMessage:(NSString *)message {
    dispatch_async(dispatch_get_main_queue(), ^{
        UIAlertView * alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:message delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
        [alertView show];
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:15:14.967

使用图形 API 从该帐户名称中获取详细信息并查看响应，如果不存在将返回错误，有关详细信息，请查看 facebook 开发者网站 [facebook](https://developers.facebook.com)

问候

# ios - 找不到 FacebookSDK.h' 文件

> ID：13452409
> 
> 赞同：3
> 
> 时间：2012-11-19T11:00:40.220
> 
> 标签：ios, facebook, ios6, sharekit

我正在尝试通过 Sharekit 将 Facebook 链接到我的项目。我按照安装 wiki 上的步骤操作，但仍然遇到问题。

它现在给了我这个错误：

```
'FacebookSDK.h' file cannot be found 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T15:38:41.843

正如在 GitHub 官方页面上所说，这应该可以工作：

1.  重新安装 SK（实际上可能需要也可能不需要）
2.  cd 到 ShareKit 目录
3.  git 子模块同步
4.  git子模块更新

对我来说，恢复到以前的提交：

```
git checkout -b beforeTargetCleanup 400df71204f48c3367982be2c1dc3158e2e23476 
```

`52cb63ed784532d0913a264f4a93843b95737392`在提交中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T19:53:20.690

我知道这是一个较老的问题，但我今天才遇到这个问题，我在网上找到的解决方案都没有奏效，包括在 Sharekit 的@Nekto 的[回答](https://github.com/ShareKit/ShareKit/pull/533#issuecomment-10515227)[中](https://stackoverflow.com/a/13457103/1191847)执行步骤 2-4 。我尝试了几件事，这对我有用。

我进入 SHKFacebook.m 并将 FacebookSDK.h 导入从更改`#import <FacebookSDK.h>`为`"#import <FacebookSDK.h>"`然后在模拟器上运行我的项目。在它运行一次后，我能够将其改回`#import <FacebookSDK.h>`并且它仍然有效。

# python - 在python中创建超链接

> ID：13452410
> 
> 赞同：6
> 
> 时间：2012-11-19T11:00:41.037
> 
> 标签：python, html, url, hyperlink

我有一个日志文件，其中使用 python 记录了一些测试命令及其状态（通过/失败）。现在我希望测试命令不应该写成简单的文本，而应该写成超链接。这样当我单击它们时，会打开另一个链接到它们的文件。

例如：

```
file = open("C:/logfile.log", "w")
file.write("[Command Name - '%35s']    [PASSED]\n" %(CommandName))
file.close()

file1 = open("C:/TestCommand.log/", "w")
file1.write("'%35s \n" %(str(parameter_val_for_test_command)))
file1.close() 
```

现在我希望 logfile.log 中写入的 CommandName 应该是文件 TestCommand.log 的超链接，这样当我单击 CommandName 时，文件 TestCommand.log 就会打开。

您能否建议我应该如何使用超链接的 CommandName 创建一个 logfile.log，然后我应该如何将此超链接的 CommandName 链接到文件 TestCommand.log？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T11:20:29.503

您似乎对什么是超链接有点*困惑*。

文本文件是包含文本的文件。（很简单，但需要说一下！）它没有图片、动画、颜色、标题或类似的东西。这只是文字。

由于人们经常想要更多的文本数据（x 应该是一个标题，y 应该是红色，当你将鼠标悬停在它上面时 z 应该是一个有趣的光标），因此有许多方案可以对有关文本的数据进行编码。例如，[Markdown](http://daringfireball.net/projects/markdown/)是 StackOverflow 使用的一种文本格式。`<tag>`HTML 是一种使用元素的标记语言（一种注释文本的方式） 。它很有用，因为 Web 浏览器可以将 HTML 页面作为输入并以图形方式显示它们。

您所描述的超链接是一种图形元素，例如您可能在网站上找到的。您不能将它们放在文本文件中，因为文本文件*只是 text*。但是您可以通过编写来指示 Web 浏览器显示超链接

```
<a href="where/you/want/the/link/to/go">text of the link</a> 
```

如果您在 Web 浏览器中打开包含该文件的文件，它会将文本显示为链接。请注意，通常调用包含 HTML 的文件`something.html`来指示其内容，并且在任何 HTML 文档中都有一堆必需的标签 ( `<html><head></head><body></body></html>`)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-10-09T22:03:51.357

> **在 Python 中创建超链接？**

这相当简单，因为超链接的格式如下：

```
hyperlink_format = '<a href="{link}">{text}</a>' 
```

可以在 Python 中轻松地对其进行参数化。这里有几种方法可以做到这一点：

### 从字符串中调用 .format 方法

```
>>> hyperlink_format.format(link='http://foo/bar', text='linky text')
'<a href="http://foo/bar">linky text</a>' 
```

### 使用绑定`.format`对象：

```
link_text = hyperlink_format.format 
```

用法：

```
>>> link_text(link='http://foo/bar', text='foo bar')
'<a href="http://foo/bar">foo bar</a>' 
```

### 做一个偏函数

```
import functools
link_text = functools.partial(hyperlink_format.format) 
```

用法：

```
>>> link_text(link='http://foo/bar', text='linky text')
'<a href="http://foo/bar">linky text</a>' 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-05-25T15:56:41.643

我认为使用该功能：

```
 hyperlink_format = '<a href="{link}">{text}</a>' 
```

到 HTML 文件并在 HTML 文件类型中：

```
 <!DOCTYPE html><html><script type="text/javascript">window.location="url";</script></html> 
```

# sql - SQL Server 2008 使用循环插入表

> ID：13452415
> 
> 赞同：2
> 
> 时间：2012-11-19T11:01:00.063
> 
> 标签：sql, sql-server, insert

我想在表中插入具有某些值的记录，这些值是从`SELECT`其他表的查询中获得的。

```
SELECT TOP 1000 c.ContaId
FROM FastGroupe fg
INNER JOIN FastParticipant fp 
    ON fg.FastGroupeId = fp.FastGroupeId
INNER JOIN Participant p
    ON fp.ParticipantId = p.ParticipantId
INNER JOIN Contact c
    ON p.ContaId = c.ContaId
WHERE FastGroupeName like '%Group%' 
```

我想使用从该查询中获得的 ID 插入另一个用作外键的表`Member`中。`ContaId`

我想使用`WHILE`循环，但我不知道我将从`SELECT`查询中获得的记录数。

那么，是否有解决此问题的方法。

编辑

这是桌子`Member`

```
CREATE TABLE [dbo].[Request](
[MemberId] int IDENTITY(1,1) NOT NULL,
    [ContaId] int NOT NULL,
[PromoId] int NOT NULL
); 
```

这`PromoId`是一个非空列，但我想为我即将创建的所有记录输入相同的值。

`Member`记录必须是这样的

```
 MemberId = Automatic,
 ContaId = // one of the query results,
 PromoId = 91 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:03:15.727

> 我想使用从此查询中获得的 ID 插入另一个使用 ContaId 作为外键的表成员中。

您可以[**`INSERT INTO .. SELECT`**](http://blog.sqlauthority.com/2011/08/10/sql-server-use-insert-into-select-instead-of-cursor/)像这样使用而不是游标和 while 循环：

```
INSERT INTO Member(ContaId)
SELECT TOP 1000 c.ContaId
FROM FastGroupe fg
INNER JOIN FastParticipant fp 
    ON fg.FastGroupeId = fp.FastGroupeId
INNER JOIN Participant p
    ON fp.ParticipantId = p.ParticipantId
INNER JOIN Contact c
    ON p.ContaId = c.ContaId
WHERE FastGroupeName like '%Group%' 
```

**更新：**试试这个：

```
INSERT INTO Member(ContaId, PromoId)
SELECT TOP 1000 c.ContaId, 91 AS PromoId
FROM FastGroupe fg
... 
```

`91`这将为`PromoId`所有 1000 条记录插入相同的值。由于`MemberId`设置为自动，只需在列列表中忽略它，它将获得一个自动值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:04:06.457

您只需要确保列数与子查询中的选定数据匹配

语法是这样的：

```
Insert into YourTable(calumn1, column2, ..., columnN) 
values (Select (calumn1, column2, ..., columnN) from ... ) // The Subquery 
```

# sql-server-2008 - 确定给定开始日期和结束日期之间的可用日期范围

> ID：13452418
> 
> 赞同：1
> 
> 时间：2012-11-19T11:01:13.750
> 
> 标签：sql-server-2008, tsql

背景（非常简化）：我有在网站上出售的横幅空间。可以为给定的开始和结束日期预订横幅，此横幅不能重复预订。横幅可以在一年内多次预订，但在同一日期不得超过一次。

我的问题：保存预订时，用户输入开始/结束日期，现在横幅可能会在此开始/结束日期内多次预订，我想在开始/结束日期内自动预订任何免费日期。

一个例子：

```
s|aaaaaaa|s1------e1|aaaaaaaaa|s2------e2|aaaaaa|e 
```

**s / e** = 用户输入的预订日期。 **s1 - e1** = 第一次预订。 **s2 - e2** = 第二次预订。 **aaa..** = 可用的日期范围。

在 tsql 中，我想计算出 aaa..（可用日期范围）的开始/结束日期。然后将它们插入到预订表中。

预订表如下所示：

```
BookingId------BannerId-----StartDate-----ExpiryDate
000000001------00000001-----2012-11-01----2012-11-05
000000002------00000001-----2012-11-10----2012-11-15
000000003------00000001-----2012-11-16----2012-11-20
000000004------00000001-----2012-12-01----2012-12-05 
```

因此，如果用户输入 2012 年 11 月 4 日的开始日期和 2012 年 12 月 10 日的结束日期。可用日期为.. 2012-11-06 至 2012-11-09、2012-11-21 至 2012-11-30、2012-12-06-2012-12-10。

感谢您提供有关如何执行此操作的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:27:53.637

这似乎可以解决问题：

（所有一个脚本，但拆分以便您可以看到每个部分）数据设置：

```
declare @Bookings table (
BookingId char(9) not null,
BannerId char(8) not null,
StartDate date not null,
ExpiryDate date not null
)
insert into @Bookings (BookingId,BannerId,StartDate,ExpiryDate) values
('000000001','00000001','20121101','20121105'),
('000000002','00000001','20121110','20121115'),
('000000003','00000001','20121116','20121120'),
('000000004','00000001','20121201','20121205') 
```

输入：

```
declare @StartDate date
declare @EndDate date
select @StartDate = '20121104',@EndDate = '20121210' 
```

询问：

```
;With Ordered as (
    select *,ROW_NUMBER() OVER (PARTITION BY BannerID ORDER BY StartDate) as rn
    from @Bookings
), FreePeriods as (
    select
        o1.BannerId,
        DATEADD(day,1,o1.ExpiryDate) as StartDate,
        DATEADD(day,-1,o2.StartDate) as EndDate
    from
        Ordered o1
            inner join
        Ordered o2
            on
                o1.BannerId = o2.BannerId and
                o1.rn = o2.rn - 1
    where
        DATEDIFF(day,o1.ExpiryDate,o2.StartDate) >= 3
    union all
    select
        BannerId,'00010101',DATEADD(day,-1,MIN(StartDate)) from @Bookings group by BannerID
    union all
    select
        BannerID,DATEADD(day,1,MAX(ExpiryDate)),'99991231' from @Bookings group by BannerID
)
select
    BannerID,
    CASE WHEN @StartDate > StartDate then @StartDate ELSE StartDate END as StartDate,
    CASE WHEN @EndDate < EndDate then @EndDate ELSE EndDate END as EndDate
from
    FreePeriods fp
where
    fp.EndDate >= @StartDate and
    fp.StartDate <= @EndDate 
```

基本上，我将预订的日期组织成连续的对，然后使用每一对来构建它们之间存在的空闲期。我还伪造了另外两个时期——一个从时间的开始到最早的预订，一个从最新的预订到时间的结束。

然后，在最终查询中，查找与请求日期重叠的时段，并使用一些`CASE`表达式来修剪超出请求日期的时段。

# sql - 如何在查询中使用除法功能？

> ID：13452422
> 
> 赞同：10
> 
> 时间：2012-11-19T11:01:19.713
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想显示 Overshipment 列的百分比。

我的示例查询

```
select (SPGI09_EARLY_OVER_T – (SPGI09_OVER_WK_EARLY_ADJUST_T) / (SPGI09_EARLY_OVER_T + SPGR99_LATE_CM_T  + SPGR99_ON_TIME_Q))
from 
CSPGI09_OVERSHIPMENT 
```

表名 - CSPGI09_OVERSHIPMENT

我的公式：

```
-------------------------------------------------------
SPGI09_EARLY_OVER_T – (SPGI09_OVER_WK_EARLY_ADJUST_T)
-------------------------------------------------------
SPGI09_EARLY_OVER_T + SPGR99_LATE_CM_T  + SPGR99_ON_TIME_Q 
```

我想用 % 显示结果，例如 66.57%

我正在使用 SQL SERVER 2008

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T11:13:25.267

假设所有这些列都是`int`，那么首先要整理的是将它们中的一个或多个转换为更好的数据类型 -`int`除法执行截断，因此任何小于 100% 的结果都会为您提供 0：

```
select (100.0 * (SPGI09_EARLY_OVER_T – SPGI09_OVER_WK_EARLY_ADJUST_T)) / (SPGI09_EARLY_OVER_T + SPGR99_LATE_CM_T  + SPGR99_ON_TIME_Q)
from 
CSPGI09_OVERSHIPMENT 
```

在这里，我将其中一个数字相乘`100.0`，将强制计算结果用`float`s 而不是`int`s 完成。通过选择`100`，我也准备好将其视为`%`.

我也对你的括号感到有点困惑——我想我说得对——但是你在单个值周围有括号，然后在其他地方你在同一级别混合了运算符 ( `-`and )，所以依赖`/`在优先规则上定义哪个运算符首先应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:08:28.330

尝试这样的事情

```
select Cast((SPGI09_EARLY_OVER_T – (SPGI09_OVER_WK_EARLY_ADJUST_T) / (SPGI09_EARLY_OVER_T + SPGR99_LATE_CM_T  + SPGR99_ON_TIME_Q)) as varchar(20) + '%' as percentageAmount
from CSPGI09_OVERSHIPMENT 
```

我认为该值是以百分比表示 - 如果不将其转换为有效的百分比总计，则添加 % 符号并将列转换为 varchar。

# grails - 使 Grails Spring Security 使用电子邮件对用户进行身份验证

> ID：13452426
> 
> 赞同：1
> 
> 时间：2012-11-19T11:01:41.850
> 
> 标签：grails, spring-security, grails-plugin

我们有一个 grails 应用程序，它可以与 spring 安全插件一起正常工作。根据我们的要求，我们看到不需要`username`字段。

如果数据库中没有`username`字段，我们希望使用用户`email`及其密码对用户进行身份验证。有可能这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:32:14.987

只需放入 config.groovy

```
grails{
    plugins{
             springsecurity{
                    userLookup.usernamePropertyName = 'myemailfield'
                 }
        }
} 
```

其中 myemailfield 是您在用户域中的电子邮件字段的名称

或者我们也可以这样做：

```
grails.plugins.springsecurity.userLookup.usernamePropertyName = 'email' 
```

# wpfdatagrid - 单击数据网格上的滚动条效果

> ID：13452427
> 
> 赞同：0
> 
> 时间：2012-11-19T11:01:52.720
> 
> 标签：wpfdatagrid

![在此处输入图像描述](../Images/a67c18dfdc70c991f61df8672c2c6223.png)

我有 2 个数据网格单击我在其他数据网格中添加项目但是当我单击滚动条拇指或轴多次滚动它时在其他数据网格上添加项目请帮助我

这是代码

```
 <DataGrid Name="dgMenu" Grid.Row="1" Grid.RowSpan="4" Margin="5,0,0,0" AutoGenerateColumns="False" RowHeight="25"  AlternatingRowBackground="{StaticResource AlternateRowBackgroundBrush}" IsReadOnly="True" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
              HeadersVisibility="Column" SelectionUnit="FullRow" ItemsSource="{Binding DgMenuCollection,Mode=TwoWay}" SelectedItem="{Binding DgSelectedMenu,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" PreviewKeyUp="dgMenu_PreviewKeyUp"
              VerticalGridLinesBrush="{StaticResource GridLineColorBrush}" HorizontalGridLinesBrush="{StaticResource GridLineColorBrush}" Grid.Column="0" Grid.ColumnSpan="2" MouseDoubleClick="dgMenu_MouseDoubleClick">
                        <DataGrid.Resources>
                            <Style TargetType="{x:Type DataGridCell}">
                                <Style.Triggers>
                                    <Trigger Property="DataGridCell.IsSelected" Value="True">
                                        <Setter Property="Background" Value="{StaticResource ButtonSelectedBrush}"  />
                                        <Setter Property="BorderBrush" Value="#A8E3FC" />
                                        <Setter Property="Foreground" Value="Black" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.Resources>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Code" Binding="{Binding PN_Recipe.RecipeCode}" />
                            <DataGridTextColumn Header="Recipe Name" Binding="{Binding PN_Recipe.RecipeName}"/>
                            <DataGridTextColumn Header="RecipeHalf Price" Binding="{Binding HalfMenuCost}" Visibility="Collapsed"  />
                            <DataGridTextColumn Header="MenuFull Price" Binding="{Binding FullMenuCost}" Visibility="Collapsed"/>
                        </DataGrid.Columns>
                    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:23:26.927

我认为问题是因为`PreviewKeyUp="dgMenu_PreviewKeyUp"`您可以使用鼠标双击事件来添加项目，而不是使用 PreviewKeyUp。

如果我弄错了，我很抱歉。

问候

# objective-c - 如何更改 TabBarItem 上的字体？

> ID：13452431
> 
> 赞同：0
> 
> 时间：2012-11-19T11:02:11.110
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序，我需要为 tabBarItems 设置自定义字体。我使用此代码并且没有收到任何错误，但字体也没有改变。

```
tabBarController.tabBarItem.setTitleTextAttributes({UITextAttributeFont => UIFont.fontWithName('Futura-Medium', size:17)}, forState:UIControlStateNormal) 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:15:44.810

直译过来就是：

```
yourTabBarItem.setTitleTextAttributes(
  NSDictionary.dictionaryWithObjectsAndKeys(
      UIColor.whiteColor, UITextAttributeTextColor,
      NSValue.valueWithUIOffset:UIOffsetMake(0,0), UITextAttributeTextShadowOffset, 
      UIFont.fontWithName("Futura-Medium", size:17.0), UITextAttributeFont, nil
      ),
    forState:UIControlStateNormal) 
```

我没有尝试过代码，但有人可能会认为您可以使用 Ruby 哈希而不是 NSDictionary，从而消除一些 Objective-C 的特性：

```
yourTabBarItem.setTitleTextAttributes(
  {
      UITextAttributeTextColor:        UIColor.whiteColor,
      UITextAttributeTextShadowOffset: NSValue.valueWithUIOffset:UIOffsetMake(0,0), 
      UITextAttributeFont:             UIFont.fontWithName("Futura-Medium", size:17.0)
  },
  forState:UIControlStateNormal) 
```

同样，我还没有尝试过，但它是直译，在 Objective-C 版本中加入了一点 Motion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T01:30:17.990

是否`Futura-Medium`默认包含在 iOS 上？如果没有，扔进去`resources/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:09:42.827

尝试这个 ：

```
 [yourTabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
    [UIColor whiteColor], UITextAttributeTextColor, 
    [NSValue valueWithUIOffset:UIOffsetMake(0,0)], UITextAttributeTextShadowOffset, 
    [UIFont fontWithName:@"Futura-Medium" size:17.0], UITextAttributeFont, nil]
    forState:UIControlStateNormal]; 
```

# iphone - iPhone 5 中的方向问题

> ID：13452432
> 
> 赞同：2
> 
> 时间：2012-11-19T11:02:14.717
> 
> 标签：iphone, orientation, iphone-5

我为`iPhone 4s`之前的版本创建了一个应用程序。除`iPhone 5`. 我已经为 iPhone 设置了纵向和纵向视图，并为 iPad 设置了`upsidedown`所有方向视图。我的问题是，手柄方向在 iPhone 5 中不起作用，但在以前的版本中运行良好。在我升级`xcode`到支持后我面临这个问题`iOS 6`。

我还找到了一些解决方案，使用这些方法

"

```
-(BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

"

代替

“ `- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation` ”方法...

在使用它之后，我也面临同样的问题......那么我的问题应该是什么，我能做些什么来克服这个问题？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:34:42.447

shouldAutorotateToInterfaceOrientation 在 iOS 6 中不起作用。因此，在 iOS 6 中使用 supportedInterfaceOrientations 方法，在 iOS 5 和更早版本中使用 shouldAutorotateToInterfaceOrientation。这是以下代码：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)    
      return (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown || interfaceOrientation==UIInterfaceOrientationPortrait) ;    
  else     
     return YES;    
}

-(NSUInteger)supportedInterfaceOrientations
{
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
     return (UIInterfaceOrientationMaskPortrait|
            UIInterfaceOrientationMaskPortraitUpsideDown);
   else       
     return UIInterfaceOrientationMaskAll;       
} 
```

# sql - 在存储过程中设置 RAISERROR 的编号和消息

> ID：13452438
> 
> 赞同：2
> 
> 时间：2012-11-19T11:02:28.803
> 
> 标签：sql, sql-server, stored-procedures, raiseerror

我写了一个保存卡的存储过程。我想何时`Barcode_Num`重复，不允许添加和显示消息（我知道必须使用 from `RAISERROR`），但我想设置数字`RAISERROR`并设置消息为：

> *卡号 10000001(ex) 是重复的，你不允许添加这个*

我设置了这个但没有用。

```
ALTER PROCEDURE  [dbo].[SaveCards]
    @Barcode_Num int
    ,@Card_Status_ID int 
    ,@Card_Type_ID int
    ,@SaveDate varchar(10)
    ,@Save_User_ID int 

AS
BEGIN
  BEGIN TRAN Entrance
    Begin Try 
    if (select COUNT(*) from TBL_Cards where Barcode_Num = @Barcode_Num ) = 0
    begin
    INSERT INTO [Parking].[dbo].[TBL_Cards]
               ([Barcode_Num]
               ,[Card_Status_ID]
               ,[Card_Type_ID]
               ,[Save_Date]        
               ,[Save_User_ID])

         VALUES
               (@Barcode_Num
               ,@Card_Status_ID
               ,@Card_Type_ID
               ,@SaveDate
               ,@Save_User_ID
               )
          end
             else
                 begin 
                 --
                 declare @EndCardID int ;
             set @EndCardID= (  select Barcode_Num  from TBL_Cards  WHERE TBL_Cards.Card_ID = (SELECT MAX(Card_ID)
                             FROM TBL_Cards  ))

                 declare @CardID int ;
                 set @CardID= ( select Barcode_Num  from TBL_Cards  where Barcode_Num = @Barcode_Num)

                    --RAISERROR('قبلا کارتی ب اين شماره ثبت شده است.',50000,1)
                RAISERROR((N'the card number %d is duplicate',@CardID),50000,1);
             end   
        COMMIT TRAN Entrance
        END TRY

        Begin CATCH
            ROLLBACK TRAN Entrance
            DECLARE @Error_Number   int
            SET @Error_Number = ERROR_NUMBER()
            DECLARE @Error_Message  varchar(max)
            SET @Error_Message = ERROR_MESSAGE()
            DECLARE @Log_Error_ID   int
            EXEC [LogError] @Error_Number, @Error_Message OUTPUT, @Log_Error_ID, @Save_User_ID

            IF @Error_Message IS NOT NULL
                RAISERROR(@Error_Message,16,1)
            ELSE
                RAISERROR((N'the card number %d is duplicate',@CardID),16,1)

            END CATCH   
    END 

    Begin CATCH
            ROLLBACK TRAN Entrance
            DECLARE @Error_Number   int
            SET @Error_Number = ERROR_NUMBER()
            DECLARE @Error_Message  varchar(max)
            SET @Error_Message = ERROR_MESSAGE()
            DECLARE @Log_Error_ID   int
            EXEC [LogError] @Error_Number, @Error_Message OUTPUT, @Log_Error_ID, @Save_User_ID

            IF @Error_Message IS NOT NULL
                RAISERROR(@Error_Message,16,1)
            ELSE
                RAISERROR('قبلا کارتی با اين شماره ثبت شده است',16,1)

            END CATCH   

    END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:41:49.823

如果你想使用[`RAISERROR`](http://msdn.microsoft.com/en-us/library/ms178592.aspx)s 格式化工具，参数*在*严重性和状态参数之后：

```
RAISERROR('the card number %d is duplicate',16,1,@CardID) 
```

# codeigniter - Codeigniter - 使用 force_download 函数下载文件

> ID：13452440
> 
> 赞同：4
> 
> 时间：2012-11-19T11:02:33.420
> 
> 标签：codeigniter, download

我正在使用最新的 CI。我在本地工作时没有任何问题。但是当我将我的作品移动到实时服务器时，我遇到了一个问题。

当我从我的下载选项卡下载文件时，文件正在以正确的大小和格式下载。但是当我打开下载的文件时，例如，如果它是图像，图像不显示，或者如果它是单词，它会要求选择编码类型，选择编码类型后，内容是垃圾字符。

如何解决这个问题。？

提前致谢。

我用来下载文件的代码：

```
$content = file_get_contents($file_loc);
force_download(FILENAME.EXT, $content); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-27T08:45:38.687

这对我有用。

```
ob_clean(); 
$data = file_get_contents("localhost/qlip/uploads/filename.jpg"); //assuming my file is on localhost
$name = 'document.jpg'; 
force_download($name,$data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T05:25:41.827

试试下面的代码：

```
<?php

function downloadFile($file){
   $file_name = $file;
   $mime = 'application/force-download';
   header('Pragma: public');    
   header('Expires: 0');        
   header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
   header('Cache-Control: private',false);
   header('Content-Type: '.$mime);
   header('Content-Disposition: attachment; filename="'.basename($file_name).'"');
   header('Content-Transfer-Encoding: binary');
   header('Connection: close');
   readfile($file_name);    
   exit();
}
?> 
```

并调用函数：

```
<?php
downloadFile("./files/image.jpg");
?> 
```

前提是文件“image.jpg”是正确的地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-14T05:56:14.903

如果你愿意，你可以试试这个：

```
function download() 
{
    // asumming you have http://www.domain.com/index.php/controller/download/file_name/extension/
    $extension = $this->uri->segment(4); // file extension
    $file_name = $this->uri->segment(3) . '.' . $extension; // file name
    $file_path = FCPATH . 'application/documentos/' . $file_name; // absolute path to file
    if (is_file($file_path)) {
        $mime = 'application/force-download';
        header('Pragma: public');    
        header('Expires: 0');        
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Cache-Control: private',false);
        header('Content-Type: ' . $mime);
        header('Content-Disposition: attachment; filename="' . $file_name . '"'); file name
        header('Content-Transfer-Encoding: binary');
        header('Connection: close');
        readfile(base_url() . 'application/documentos/' . $file_name); // relative path to file   
        exit();
    } else {
        redirect('/welcome/');
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T09:22:49.930

你的文件路径不正确。修复路径以更正并运行。它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-17T12:35:20.280

添加 ob_clean(); 在 force_download() 的代码之前；否则图像，word 文件会损坏。

```
ob_clean();
$content = file_get_contents($file_loc);
force_download(FILENAME.EXT, $content); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T12:53:08.903

在 CI 3 中：为我工作

```
 $data = 'Here is some text!';
 $name = 'mytext.txt';
 force_download($name, $data); 
```

或者 ：

```
 // Contents of photo.jpg will be automatically read
 force_download('/path/to/photo.jpg', NULL); 
```

[资源](https://www.codeigniter.com/user_guide/helpers/download_helper.html)

# wpf - 组合框样式

> ID：13452445
> 
> 赞同：4
> 
> 时间：2012-11-19T11:02:53.443
> 
> 标签：wpf, styles

我对 WPF 很陌生，如果这太愚蠢了，请原谅。不要忽略这个重复。

当我通过互联网搜索以了解如何设置 a 样式`ComboBox`时，我可以找到很多冗长的编码。他们为 a 中的所有部分重新编写了样式`ComboBox`。

我的问题是，如果我只需要更改组合框的切换按钮模板，我该怎么做。我不想为组合框写下所有的样式。这有可能实现吗？

先感谢您。

**编辑**

我将进一步解释我的问题。我需要去掉鼠标悬停在 ComboBox 时出现的浅蓝色。我想我可以通过连接组合框的切换按钮模板来解决这个问题。这就是为什么我正在搜索是否可以覆盖组合框的一部分（仅切换按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:22:28.987

不幸的是，没有一种简单的方法来设置 WPF 中控件的一部分的样式。您通常必须复制原始模板并根据自己的目的对其进行修改。

好的一面是控件的模板（包括组合框）是广泛可用的。

这是[修改切换按钮](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)的具体示例。在该示例中，如果您删除触发器，您应该能够获得您想要的结果。

# biztalk - 获取 BizTalk 活动主机实例

> ID：13452446
> 
> 赞同：3
> 
> 时间：2012-11-19T11:03:00.890
> 
> 标签：biztalk

我的 bizTalk 应用程序部署在主动-被动集群中。我需要安排一个主机实例的重启（每天，每天早上）。我怎么知道如何获取活动主机实例，因为它可能是它们中的任何一个，因为可能会发生故障转移？我试图停止/启动 server01 主机实例的服务，但最终主机实例在 server02 上运行。我试图在网上搜索 vb 脚本，但找不到这样的脚本。

干杯 lyf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T21:57:17.083

安排使群集资源脱机然后联机。

您可以使用 cluster.exe RESOURCE /offline cluster.exe RESOURCE /online

问候马丁带来

# java - 数据流编程术语词典

> ID：13452452
> 
> 赞同：0
> 
> 时间：2012-11-19T11:03:38.843
> 
> 标签：java, .net, asynchronous, actor, dataflow

我正在为 java 开发一个数据流库，我想给类命名，因为它是计算机科学的习惯。例如，我有以下数据流构造：

它有 2 个输入队列，一个用于消息，一个用于 Actor（Actor 计算模型意义上的 Actor）。

每当两个队列都不为空时，获取下一条消息并将其发送给下一个actor；从队列中删除消息和参与者。

我想知道这种结构的传统术语是否存在，更好的是，是否有包含所有数据流术语的字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:09:49.423

通常只有一个消息/任务/工作队列。工作人员是集中在一起的（而不是排队），他们只是在有空时从队列中取出工作。哪个工人抢工作通常并不重要。我称之为“工作队列”或“任务队列”或类似的东西。

如果在您的情况下，某些工人在其他工人之前完成工作确实很重要，那么抱歉，不知道答案。:-)

# visual-studio-2010 - 我们可以直接使用 Umbraco 4.9.0 源文件（来自 codeplex）开发一个网站，我使用 Visual Studio 2010 打开它

> ID：13452453
> 
> 赞同：1
> 
> 时间：2012-11-19T11:03:45.663
> 
> 标签：visual-studio-2010, c#-4.0, umbraco

我的服务器中已经有 Umbraco 4.9.0，所以我不需要源来打开安装页面。我需要直接打开我的默认页面并启动我的网站。

这样做的问题是每次我运行源代码时。它也安装umbraco 我也希望它直接打开我的默认页面。可以通过更改web.config 来完成并且需要消除web.template.config。

我只是让源跳过 3-database 步骤并直接转到 6-Youre Done。但我也需要启动我的网站。我想在源运行时启动我的网站

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:39:53.390

我认为您指的是在构建源代码时，输​​出项目的 web.config 会被覆盖，这意味着您必须再次进行设置。如果是这种情况，请使用 4.10.1 或更高版本的分支，因为这样可以解决 web.config 被覆盖的问题。

作为旁注，您不需要修改/构建源代码来在 Umbraco 中开发网站，除非您正在修改核心功能。您可以只获取站点设置文件而不是完整源代码，然后如果您想在 Visual Studio 中进行编辑，只需在 VS.Net 中将站点文件夹作为网站项目打开。

# c# - 从 c#behind-code 更改按钮的内容

> ID：13452457
> 
> 赞同：1
> 
> 时间：2012-11-19T11:03:59.203
> 
> 标签：c#, windows-phone-7, xaml

我的问题是关于 wp7。在用户单击它后，我正在尝试在 c# 代码后面更改按钮的内容。特别是我想更改我的三个 Path 元素的 Fill 属性，它们位于网格（“GraphGrid”）内。这个网格是按钮本身的内容。这是关于 Button 的 XAML 代码：

```
<Button.Content>
  <Grid x:Name="GraphGrid" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" 
   VerticalAlignment="Stretch">
   <Path x:Name="Path"
      Data="M 0,0 0,80 20,80 20,0Z"
  Stroke="Black"
  Fill="Black"
  StrokeThickness="0"/>
<Path
  Data="M 25,20 25,80 45,80 45,20Z"
  Stroke="Black"
  Fill="Black"
  StrokeThickness="0"/>
<Path
  Data="M 50,40 50,80 70,80 70,40Z"
  Stroke="Black"
  Fill="Black"
  StrokeThickness="0"/> 
```

我尝试使用键（例如 x:Name...）在代码后面的 c# 中引用我的 Xaml 元素，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:13:34.437

```
 <Grid>
    <Button Click="Button_Click">
    <Button.Content>
        <Grid x:Name="GraphGrid" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" 
VerticalAlignment="Stretch">
            <Path x:Name="Path"
      Data="M 0,0 0,80 20,80 20,0Z"
  Stroke="Black"
  Fill="Black"
  StrokeThickness="0"/>
            <Path x:Name="path1"
     Data="M 25,20 25,80 45,80 45,20Z"
     Stroke="Black"
     Fill="Black"
     StrokeThickness="0"/>
            <Path x:Name="Path2"
     Data="M 50,40 50,80 70,80 70,40Z"
     Stroke="Black"
     Fill="Black"
     StrokeThickness="0"/>
        </Grid>
    </Button.Content>
    </Button>
</Grid> 
```

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        path1.Fill = new SolidColorBrush(Colors.AliceBlue);
        Path2.Fill = new SolidColorBrush(Colors.Pink);
        Path.Fill = new SolidColorBrush(Colors.Red);
    } 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:17:46.050

这是在 XAML 中执行此操作的一种方法，无需任何代码隐藏：

```
<Button>
        <Button.Content>
            <Grid x:Name="GraphGrid" Width="Auto" Height="Auto" HorizontalAlignment="Stretch" 
    VerticalAlignment="Stretch">
                <Path x:Name="Path"
          Data="M 0,0 0,80 20,80 20,0Z"
      Stroke="Black"
      Fill="Black"
      StrokeThickness="0"/>
                    <Path  x:Name="Path2"
         Data="M 25,20 25,80 45,80 45,20Z"
         Stroke="Black"
         Fill="Black"
         StrokeThickness="0"/>
                    <Path  x:Name="Path3"
         Data="M 50,40 50,80 70,80 70,40Z"
         Stroke="Black"
         Fill="Black"
         StrokeThickness="0"/>
            </Grid>
        </Button.Content>
        <Button.Triggers>
            <EventTrigger RoutedEvent="PreviewMouseDown">
                <BeginStoryboard>
                    <Storyboard >
                        <ColorAnimation Storyboard.TargetName="Path" Storyboard.TargetProperty="Fill.Color" From="Black" To="Red"></ColorAnimation>
                        <ColorAnimation Storyboard.TargetName="Path2" Storyboard.TargetProperty="Fill.Color" From="Black" To="Yellow"></ColorAnimation>
                        <ColorAnimation Storyboard.TargetName="Path3" Storyboard.TargetProperty="Fill.Color" From="Black" To="Blue"></ColorAnimation>
                    </Storyboard>

                </BeginStoryboard>
            </EventTrigger>

        </Button.Triggers>
        </Button> 
```

# javascript - 在jsp中隐藏页面加载的标签

> ID：13452461
> 
> 赞同：0
> 
> 时间：2012-11-19T11:04:08.023
> 
> 标签：javascript, jsp, dojo, dom-events, jsp-tags

我开发了一个网页，其中有几个 struts 标签。在页面加载时，仅显示一个标签，而隐藏所有其他标签。这是通过`onLoad()`调用 Javascript 函数 ( `.style.display = 'none';`) 来隐藏标签的主体标签中的。

但是当网络速度很慢时，当页面加载时，标签之间会出现短暂的闪烁，先显示然后再被`onLoad()`Javascript 调用隐藏。

是否有替代方法可以在加载时隐藏标签而不会看到此闪烁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:12:18.133

做一个隐藏内容的CSS

```
.style
{
    display: none;
} 
```

浏览器在渲染之前等待 CSS。JavaScript 在整个页面加载后执行，并且 domready 正常。这就是为什么有时会出现闪烁的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:15:06.610

我认为您应该使用标签的可见性属性。这意味着您应该将标签隐藏在 html 代码中，而不是使用 JavaScript 函数。

# wordpress - WordPress：如何从其他插件页面获取插件选项

> ID：13452463
> 
> 赞同：5
> 
> 时间：2012-11-19T11:04:17.720
> 
> 标签：wordpress

我正在编写一个带有小部件的 WordPress 插件，该小部件在页面上显示一个链接，例如：

```
<a href="<?php echo plugins_url('/ext_page.php', __FILE__); ?>">Link</a> 
```

现在在 /ext_page.php 页面中，我需要从插件本身获取选项，例如：

```
$options = get_option('my_plugin_options'); 
```

但是函数 get_option 似乎在该页面中不起作用，还有其他方法可以获取选项吗？

请多多指教，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T11:12:54.997

[get_option()](http://codex.wordpress.org/Function_Reference/get_option)将始终适用于 WordPress。确保你写好了选项名称。

如果找不到该选项，您可以使用默认值（在这种情况下为空数组）：

```
$options = get_option('my_plugin_options', array() ); 
```

转到您的`wp_options`表并检查值是否`my_plugin_options`存在或已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T12:22:02.180

另一个考虑，也许选项是在`wp_options`数据库表中序列化的？在这种情况下，您可以按如下方式检索该值：

```
$options = get_option('my_option', 'default text');
$option = $options['field_one']; 
```

选项数据出现在该`option_value`字段中。如果它被序列化，它将看起来像这样：

```
a:1:{s:11:"field_one";s:7:"foobar";} 
```

供参考：[http ://wordpress.org/support/topic/how-to-get-a-serialized-option](http://wordpress.org/support/topic/how-to-get-a-serialized-option)

# asp.net-mvc - 在 MVC3 中，如何在开始请求时获取顶级域？

> ID：13452464
> 
> 赞同：1
> 
> 时间：2012-11-19T11:04:18.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, request, uri, global-asax

我的 MVC3 应用程序托管许多域

```
www.mysite.com 
www.mysite.de 
www.mysite.co.uk
... 
```

然后，我必须在开始请求时从 url 中获取顶级域（例如“.com”）；我在 Global.asax 中添加了以下代码

```
Private Sub MvcApplication_BeginRequest(sender As Object, e As System.EventArgs) Handles Me.BeginRequest

    Dim toplevel_domain As String = Request.Url.Host
    toplevel_domain = toplevel_domain.Replace("www.", "").Substring(toplevel_domain.IndexOf(".") + 1, toplevel_domain.Length)

End Sub 
```

但是，最好的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:24:20.007

在一般情况下，这比你想象的要难。不要忘记有 TLD，例如`co.jp`. 因此，您可以使用 a[`list of hardcoded TLDs`](http://pastebin.com/raw.php?i=VY3DCNhp)来查看。

# python - 在 Python 中从 .csv 文件排序

> ID：13452465
> 
> 赞同：3
> 
> 时间：2012-11-19T11:04:24.523
> 
> 标签：python, sorting, numpy

所以我有一个使用以下代码输入的 csv 文件：

```
csvdata = np.loadtxt(sys.argv[2],
                     delimiter=',',
                     dtype={
                            'names': ('year', 'month', 'day', 'ItemName'), 
                            'formats': ('i4', 'i4', 'i4', 'S10')
                           }
                    ) 
```

现在，我想根据年、月和日对这些数据进行排序。谁能告诉我该怎么做？？？？

CSV 数据如下所示：

2012,3,6,ABCD
2012,3,6,XYZA

问题是，它目前正在按名称排序。我想要它在日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:10:18.527

它在手册中（http://docs.scipy.org/doc/numpy/reference/generated/numpy.sort.html）

> 使用 order 关键字指定在对结构化数组进行排序时要使用的字段：

```
>>> dtype = [('name', 'S10'), ('height', float), ('age', int)]
>>> values = [('Arthur', 1.8, 41), ('Lancelot', 1.9, 38),
...           ('Galahad', 1.7, 38)]
>>> a = np.array(values, dtype=dtype)       # create a structured array
>>> np.sort(a, order='height')                        
array([('Galahad', 1.7, 38), ('Arthur', 1.8, 41),
       ('Lancelot', 1.8999999999999999, 38)],
      dtype=[('name', '|S10'), ('height', '<f8'), ('age', '<i4')]) 
```

所以你要：

```
np.sort(csvdata, order=['year', 'month', 'day']) 
```

# android - PhoneGap Android 入门“缺少以下一项”

> ID：13452466
> 
> 赞同：13
> 
> 时间：2012-11-19T11:04:25.697
> 
> 标签：android, cordova

我目前正在关注[本教程](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)，了解如何开始使用 PhoneGap。我已经安装了所有东西并在系统变量上设置了路径。

但是当我要构建项目时，它总是给出一个错误

缺少以下一项：JDK Android SDK Apache ant

我在命令提示符下检查了命令、java、adb、ant。java 和 adb 似乎工作得很好，但 ant 返回错误“Build.xml 不存在。构建失败”。

如何生成项目文件？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T15:21:39.767

You may want to check out my supplemental to the getting started guide:

[http://simonmacdonald.blogspot.ca/2012/11/getting-create-command-to-work-on.html](http://simonmacdonald.blogspot.ca/2012/11/getting-create-command-to-work-on.html)

You will need to make sure you can execute javac as well and that your JAVA_HOME is set correctly.

Don't worry about the ant error. As long as it is found from the command line it will work properly when launched from a directory with a build.xml.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-21T08:56:25.760

对我来说，问题是 ANT_HOME 和 JAVA_HOME 的变量。我发现了关于它们的外观的不同描述（例如 %JAVA_HOME%\bin）。它对我没有用，请检查图片以了解如何正确设置变量。还将对 C:\Java\jdk1.6.0_31\bin 和 C:\Java\apache-ant-1.8.4\bin 的引用放在路径变量上。

![java home 应该是怎样的](../Images/70f3f614bae21756ee1695e61580466a.png)

![蚂蚁之家应该是什么样子](../Images/6ee0b984070e2d743366ccfb8490bd0c.png)

请注意，您可能已将 jdk 和 ant 安装在与我不同的目录中，但以上是它们的外观。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T06:09:04.013

确保不要在创建项目的目录中使用破折号（“-”）或空格。同样，我会确保您的 ANT_HOME 变量指向正确的目录。Simon 的博客指出了这一点，但您可以从我的帖子中获得更多信息（关于这个特定的事情）：[安装 Cordova\PhoneGap](http://www.dominikgorecki.com/2012/12/installing-cordovaphonegap-for-android-on-windows-a-suppliment/)。

我使用 eclipse\plugins\org.apache.ant 中的 ant 目录... 也许你的 sys 变量中的 ant 目录是不同的 ant 安装？不确定这是否会成为问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-11T09:32:46.553

除了已经说过的，我还有两个问题：

1）路径中的空格引起了麻烦：我以这种方式替换了 Program Files 文件夹：

> 程序文件 = 程序~1
> 
> 程序文件 (x86) = 程序~2

2) cscript.exe 未被识别，因此我将 System32 文件夹添加到 PATH。

# shell - 删除shell中的文件而不是同名目录

> ID：13452468
> 
> 赞同：0
> 
> 时间：2012-11-19T11:04:27.280
> 
> 标签：shell

我需要删除文件夹中带有名称`file1`的文件`folder1`

`folder1`有`file1`[unix exec 文件] 和`file1`[一个文件夹]。

如果我使用

`find /pathto_folder -iname "file1" -delete`

它同时删除文件和文件夹，如何使脚本 del 仅文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:09:34.707

尝试这样做：

```
find /pathto_folder -type f -iname "file1" -delete 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:09:54.117

尝试：

```
find /path/to/folder -name 'file1' -exec rm {} \; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:11:35.890

我想这将是区分大小写的问题。

在 linux/unix 机器上，在同一父级下，您不能创建名称完全相同的目录和文件。在你的情况下，它可能是

```
"file1" ->the file 
"File1" -> the dir 
```

所以只需更改`-iname`to`-name`并提供正确的文件名（例如file1）然后再试一次。

# cakephp - cakePHP：可选的 URL 参数

> ID：13452469
> 
> 赞同：2
> 
> 时间：2012-11-19T11:04:27.907
> 
> 标签：cakephp, cakephp-2.1, url-parameters

可能这是一个快速的，但我现在无法理解。

使用未命名的可选参数时出现以下问题。假设我在具有两个固定参数和两个可选参数的控制器中有以下操作：

```
function action ($param1, $param2, $param3=NULL, $param4=NULL) {
//any code
} 
```

$param3 和 $param4 可以同时存在，不存在或两者之一。如果没有设置所有四个或前三个参数，则一切正常。例如

```
www.domain.com/controller/action/value1/value2/value3/ 
```

问题来了，如果 param3 被遗漏了

```
www.domain.com/controller/action/value1/value2//value4/ 
```

有没有办法告诉 Cake 将 param2 和 param4 之间的 // 处理为未设置的 param3？目前，参数被分配给“错误”的变量。

```
$param1= value1
$param2= value2
$param3= value4
$param4= NULL 
```

我想要的是以下

```
$param1= value1
$param2= value2
$param3= NULL
$param4= value4 
```

非常感谢这里的任何帮助。

非常感谢各位。。

最好的，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:35:46.920

CakePHP 做不到，PHP 做不到。当您定义参数的顺序时，每个参数都需要有一个值。

我建议您使用命名参数，您将能够拥有：

```
http://www.example.com/controller/action/param1:value1/param2:value2/param4:value4/ 
```

有关详细信息，请参阅[命名参数](http://book.cakephp.org/2.0/en/development/routing.html#per-route-named-parameters)的文档。

**编辑**：我不确定，但你也应该能够做到这一点：

```
www.domain.com/controller/action/value1/value2//value4/ 
```

但是命名参数的选项肯定更好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:41:03.237

你可以传递你的第三个和第四个参数，这样一个不为空的参数必须放在第一位，然后是你生成你的网址的第二位。

# vb.net - 在 ServiceStack VB.net 中提取 URL 参数

> ID：13452471
> 
> 赞同：1
> 
> 时间：2012-11-19T11:04:38.547
> 
> 标签：vb.net, web-services, jquery, servicestack

如何在 ServiceStack VB.net 中提取 URL 参数？

例如查询网址：

`http://localhost:3318/api/ActionName/?callback=cb&format=json&SomeParam1=19-11-2012&SomeParam2=123123`

仅供参考，我正在使用 jQuery AJAX 发出请求。

**全球.aspx**

```
Public Class Global_asax
    Inherits System.Web.HttpApplication

    Public Class HelloAppHost
        Inherits AppHostBase

        Public Sub New()
            MyBase.New("Web Services", GetType(BiffaNetWebService).Assembly)
        End Sub

        Public Overrides Sub Configure(ByVal container As Container)
            Routes.Add(Of APIRequest)("/api").Add(Of APIRequest)("/api/{ActionName}")
        End Sub
    End Class

    Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
        Dim apphost = New HelloAppHost()
        apphost.Init()
    End Sub

End Class 
```

**WS.vb**

```
Public Class WebService
    Implements IService(Of APIRequest)

    Public Function Execute(ByVal request As APIRequest) As Object Implements ServiceStack.ServiceHost.IService(Of APIRequest).Execute

        Dim ActionName = request.ActionName
        Dim UserData = request.UserData

        // Do some stuff here and return JSON

    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:46:16.377

如果您继承自`Service`ServiceStack[的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)或`ServiceBase(of T)`（如果您想继续使用旧 API），您将有权访问`base.Request`和`base.Response`属性，您可以使用这些属性来获得对 HTTP API 的细粒度访问，例如：

```
var someParam = base.Request.QueryString["SomeParam"]; 
```

否则，如果您想让您的服务只实现`IService`接口，那么您还需要实现`IRequiresRequestContext`哪个让 ServiceStack 将请求的 RequestContext 注入您的服务。在这种情况下，您可以通过以下方式访问 QueryString：

```
var httpReq = base.RequestContext.Get<IHttpRequest>(); 
```

    var someParam = httpReq.QueryString["SomeParam"];

# java - 未找到声明式服务绑定方法

> ID：13452475
> 
> 赞同：1
> 
> 时间：2012-11-19T11:05:02.430
> 
> 标签：java, eclipse, osgi

我想使用声明式服务，但是会抛出一个错误，即无法访问或找不到绑定方法：

!MESSAGE [SCR] ComponentReference.bind(): 未找到绑定方法“setAreaManagment”或无法访问！

我找不到我的错误。这是我的服务接口：

管理服务

```
public interface IAreaManagmentService {
    SurfacePolygon getAreaByDatabaseID(int id);

    void setAreaVisibility(int databaseId, boolean visible);

    public void addArea(Integer objectId, Integer databaseId, double biggestLat, double biggestLon, double smallestLat,
            double smallestLon, String name, Date date);

    void removeAllAreas();

    public LinkedList<DisplayedArea> getAreas();
} 
```

一个名为 GlobeView（扩展 ViewPart）的类实现了这个接口。

这是“发布”服务的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" name="visualization-servcieprovider">
   <implementation class="GlobeView"/>
   <service>
      <provide interface="IAreaManagmentService"/>
   </service>
</scr:component> 
```

这是应该绑定服务的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<scr:component xmlns:scr="http://www.osgi.org/xmlns/scr/v1.1.0" enabled="true" name="visualization-detailsview">
   <implementation class="DetailsView"/>
   <reference bind="setAreaManagment" cardinality="1..1" interface="IAreaManagmentService" name="IAreaManagmentService" policy="dynamic" unbind="unsetAreaManagment"/>
</scr:component> 
```

这两个方法在DetailsView.java中

```
 public void setAreaManagment(IAreaManagmentService areaManagment) {
        System.out.println("AreaManagmentSet");

        this.areaManagment = areaManagment;

        System.out.println("WAS SET " + this.areaManagment);
    }

    public void unsetAreaManagment(IAreaManagmentService areaManagmentIn) {
        System.out.println("AreaManagmentUnSet");
        this.areaManagment = null;
    } 
```

（当然还有一个私有的 IAreaManagmentService areaMangment ;-)）

我的错误在哪里？我阅读了 Lars Vogella 的 fab 教程，但我找不到我的错误

编辑：我也将 Service-Component: OSGI-INF/serviceprovider.xml, OSGI-INF/managmentConsumer.xml 添加到我的清单中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-30T15:16:52.857

这是几年前的事了。但是我今天收到了同样的错误信息。我有一个不同的问题：

我忘了让服务提供者类实现服务接口。可能 OSGi 服务器无法将实例转换为接口，因此无法使用我的参数为接口的方法。为了解决这个问题，我只需要添加一个`implements MyInterface`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:41:41.977

有两件事可能是问题：

1) 通过在清单编辑器的构建选项卡中选择它，确保您的 OSGI-INF 文件夹位于构建路径上。

2) 将这些属性添加到您的两个服务中，activate="activate" immediate="true" 强制捆绑激活。

3）另一个提示是将策略从动态删除为“静态”，我敢打赌这将解决您的问题。- 邓肯

PS我看不到的另一件事是您的实现类的完全限定类名。

# matlab - 范德蒙德矩阵matlab混淆

> ID：13452478
> 
> 赞同：1
> 
> 时间：2012-11-19T11:05:10.060
> 
> 标签：matlab, interpolation

我正在尝试使用 matlab构造一个[范德蒙德矩阵。](http://en.wikipedia.org/wiki/Vandermonde_matrix)

我的输入向量是

```
t = [ 1 2 3 4 ]' 
```

我使用[vander 函数](http://www.mathworks.com/help/matlab/ref/vander.html)的输出是：

```
ans =

 1     1     1     1
 8     4     2     1
27     9     3     1
64    16     4     1 
```

现在，如果我没记错的话，有问题的向量的范德蒙德矩阵应该是：

```
1 1 1 1
1 2 4 8
1 3 9 27
1 4 16 64 
```

现在我刚刚意识到我可以使用以下方法实现我想要的结果：

```
>> fliplr(vander(t))

 ans =

 1     1     1     1
 1     2     4     8
 1     3     9    27
 1     4    16    64 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T11:13:12.567

维基百科和 Mathworld 同意你的观点。但是，[MATLAB 文档](http://www.mathworks.com/help/matlab/ref/vander.html)说：

> A = vander(v) 返回 Vandermonde 矩阵，其列是向量 v 的幂，即 A(i,j) = v(i)^(nj)，其中 n = length(v)。

我不知道为什么 The Mathworks 会这样做。您可以使用它`fliplr`来达到预期的效果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T11:08:42.577

只需翻转矩阵（左/右）即可获得您想要的矩阵。

# java - 如何使用 iText 库在 PDF 中的表格上应用背景图像？

> ID：13452479
> 
> 赞同：1
> 
> 时间：2012-11-19T11:05:09.577
> 
> 标签：java, itext

我正在使用 iText 库创建 PDF，但无法为 PDF 中的表格设置背景图像。

如下图![在此处输入图像描述](../Images/00f678a1c01113fbed02e20e3f44bf51.png)

**编辑**

目前我正在使用它来设置背景，它将图像设置为绝对位置，我想将它设置为相对于表格

```
class CellBackgroundPic  implements PdfPTableEvent {

Activity mActivity;
public CellBackgroundPic (Activity Activity){

    this.mActivity=Activity;

}
Image bgImage;

public void tableLayout(PdfPTable table, float[][] widths, float[] heights,
        int headerRows, int rowStart, PdfContentByte[] canvases){
    PdfContentByte pdfContentByte = canvases[PdfPTable.BACKGROUNDCANVAS];
    Drawable   myImage  = mActivity.getResources().getDrawable(R.drawable.table_bg);

      Bitmap bitmap = ((BitmapDrawable) myImage).getBitmap();
       ByteArrayOutputStream stream = new ByteArrayOutputStream();
       bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
       byte[] bitmapdata = stream.toByteArray();
       try {
        bgImage = Image.getInstance(bitmapdata);
        bgImage.setAbsolutePosition(330f, 642f);
        pdfContentByte.addImage(bgImage);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:35:00.307

有不同的方法可能。

一种是使用由图像创建的图案颜色并将该图案颜色用作背景颜色。但是，这似乎与您需要的不匹配。

根据您的示例，我建议使用此处演示的表格事件：http: [//itextpdf.com/examples/iia.php ?id=93](http://itextpdf.com/examples/iia.php?id=93)

在这个例子中，行的背景颜色是在`tableLayout()`方法中绘制的。您需要调整此方法，而不是绘制彩色矩形，您需要在适当的坐标处添加图像。

# android - 模拟器正常，设备失败，SecurityException: Permission Denial

> ID：13452483
> 
> 赞同：1
> 
> 时间：2012-11-19T11:05:26.547
> 
> 标签：android, manifest

我不得不说我是第一次使用这个android设备，但是我设置了USB调试。就像它第一次安装应用程序然后它没有更新我所做的任何更改一样。

因此，该应用程序可以在模拟器上运行。

我将它安装在 Xperia arc S（索尼爱立信）设备上，它第一次工作。

然后我在清单中选择了一个不同的主要活动，我得到了这个错误

```
ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.moob/.InitialMenuActivity } from null (pid=7195, uid=2000) requires null 
```

但它仍然适用于模拟器！我已经在移动设备上卸载了该应用程序，但随后出现上述错误。

请注意，在移动设备上卸载并重新启动后，它会在清单更改之前重新安装有效的版本（我可以在手机上手动启动它，但它是旧版本）。

删除应用程序后

```
Installing duelos_android.apk...
Success!
Starting activity com.moob.InitialMenuActivity on device 42583930325432573634
ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=

[android.intent.category.LAUNCHER] cmp=com.moob/.InitialMenuActivity }
ActivityManager: java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.moob/.InitialMenuActivity } from null (pid=7195, uid=2000) requires null 
```

清单——

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.moob"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SingleDuelActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name=".MultiDuelActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>

         <activity
            android:name=".GameClientActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name=".LoadingActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >

        </activity>

        <activity
            android:name=".Ranking"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >

        </activity>  
         <activity
            android:name=".LogginActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >

        </activity>

         <activity
            android:name="com.moob.FB.FriendsList"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name="com.moob.FB.Example"            
            android:label="@string/app_name" >
        </activity>

        <activity
            android:name=".InitialMenuActivity"
            android:screenOrientation="portrait"
            android:exported="true"
            android:label="@string/app_name" >
             <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
    </application>

<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

</manifest> 
```

这里是 LogCat

```
 11-19 12:32:42.506: D/AndroidRuntime(7718): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-19 12:32:42.506: D/AndroidRuntime(7718): CheckJNI is OFF
11-19 12:32:42.506: D/dalvikvm(7718): creating instr width table
11-19 12:32:42.616: D/AndroidRuntime(7718): Calling main entry com.android.commands.pm.Pm
11-19 12:32:42.626: D/AndroidRuntime(7718): Shutting down VM
11-19 12:32:42.626: D/dalvikvm(7718): GC_CONCURRENT freed 101K, 71% free 299K/1024K, external 0K/0K, paused 1ms+1ms
11-19 12:32:42.626: D/dalvikvm(7718): Debugger has detached; object registry had 1 entries
11-19 12:32:42.626: I/AndroidRuntime(7718): NOTE: attach of thread 'Binder Thread #2' failed
11-19 12:32:42.746: D/AndroidRuntime(7728): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-19 12:32:42.746: D/AndroidRuntime(7728): CheckJNI is OFF
11-19 12:32:42.746: D/dalvikvm(7728): creating instr width table
11-19 12:32:42.866: D/AndroidRuntime(7728): Calling main entry com.android.commands.am.Am
11-19 12:32:42.866: I/ActivityManager(262): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.moob/.InitialMenuActivity } from pid 7728
11-19 12:32:42.866: W/ActivityManager(262): Permission denied: checkComponentPermission() reqUid=10158
11-19 12:32:42.866: W/ActivityManager(262): Permission Denial: starting Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.moob/.InitialMenuActivity } from null (pid=7728, uid=2000) requires null 
```

InitialMenuActivty（我不使用 clickUno 和 clickDos 他们不是我的）

```
public class InitialMenuActivity extends Activity {
private static final String TAG = "TESTING";

    //menu para ir a configuracion, jugar solo, ranking, puntuacion y multplayer
/*
 * 
 * 
 * http://greendao-orm.com/
 * 
 * 
 * */

    private SQLiteDatabase db;
    private DaoMaster daoMaster;
    private DaoSession daoSession;
    private LogroDao daoLogro;
    private Cursor cursor;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainmenu);

    }
    public void clickUno(View target)
    {
        Log.d(TAG, "click 1");  
        DevOpenHelper helper = new DaoMaster.DevOpenHelper(this, "notes-db", null);
        db = helper.getWritableDatabase();
        daoMaster = new DaoMaster(db);
        daoSession = daoMaster.newSession();
        daoLogro = daoSession.getLogroDao();
        final DateFormat df = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.MEDIUM);
        String comment = "logro en:" + df.format(new Date());
        daoLogro.insert(new Logro(null,comment,new Date()));
     /*   List<Logro> logros=daoLogro.queryBuilder().list();
        for (Iterator iterator = logros.iterator(); iterator.hasNext();) {
            Logro logro = (Logro) iterator.next();
            Log.d(TAG, "Logro::"+logro.getLogro_name()+"-"+String.valueOf(logro.getDate()));
        }
        */

    }
    public void clickDos(View target)
    {
        Log.d(TAG, "click 2");
        List<Logro> logros=daoLogro.queryBuilder().list();
        for (Iterator iterator = logros.iterator(); iterator.hasNext();) {
            Logro logro = (Logro) iterator.next();
            Log.d(TAG, "Logro::"+logro.getLogro_name()+"-"+String.valueOf(logro.getDate()));
        }

    }

    public void exempleFB(View target){

        Intent t = new Intent(InitialMenuActivity.this, Example.class);
        startActivity(t);
    }

    public void logginActivity(View target){

        Intent t = new Intent(InitialMenuActivity.this, LogginActivity.class);
        startActivity(t);
    }

    public void rankingActivity(View target){
        //if (Utility.arrayListFriend != null){
        Intent t = new Intent(InitialMenuActivity.this, Ranking.class);
        startActivity(t);
    }

    public void singleDuelActivity(View target){

        Intent t = new Intent(InitialMenuActivity.this, SingleDuelActivity.class);
        startActivity(t);
    }

    public void multiDuelActivity(View target){

    Intent t = new Intent(InitialMenuActivity.this, MultiDuelActivity.class);
    startActivity(t);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:18:26.653

好的，我不得不清理项目，它解决了问题......我仍然不知道为什么它在模拟器上运行但在移动设备上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:10:01.770

我自己不是专家，但既然 Intent 似乎有问题，为什么不尝试注释掉所有 Intent 部分。

我相信模拟器通常没有可以与之交互的其他应用程序（例如 Facebook），因此它可能忽略了这些意图，而您的物理设备正在尝试处理它们。

无能为力，但值得一试。

# php - $_FILES 在大文件上失败

> ID：13452485
> 
> 赞同：0
> 
> 时间：2012-11-19T11:05:32.003
> 
> 标签：php

我有一个小上传脚本，它适用于正常大小的图像和文件。

```
 function uploadimage($name,$dir)
{
    if($name['error'] > 0){
    die('An error ocurred when uploading.');
    }

    if(!getimagesize($name['tmp_name'])){
        die('Please ensure you are uploading an image.');
    }

    // Check filetype
    if($name['type'] != 'image/png'){
        die('Unsupported filetype uploaded.');
    }

    // Check filesize
    if($name['size'] > 500000){
        die('File uploaded exceeds maximum upload size.');
    }

    // Check if the file exists
    if(file_exists($dir. $name['name'])){
        die('File with that name already exists.');
    }

    // Upload file
    if(!move_uploaded_file($name['tmp_name'], $dir. $name['name'])){
        die('Error uploading file - check destination is writeable.');
    }

    return $dir. $name['name'];
    die('File uploaded successfully.');
} 
```

$name 是 $_FILES['WHATEVER'] 和 $dir 目录。好吧，现在我只是更改了它的几行来上传 .csv 文件。到目前为止，一切都很好。它适用于小 .csv 文件。但是当我尝试更大的（20MB+）时，我发布它时没有任何反应。我检查了我的 php.ini 中的 upload_max_filesize 和 memory_limit，两者都是 128M ...有人可以给我一个指针，我应该在哪里搜索错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:10:52.047

两个 PHP 配置选项控制最大上传大小：**upload_max_filesize**和**post_max_size**。

但是，您还需要考虑完成上传所需的时间。PHP 脚本通常会在 30 秒后超时，但在正常的宽带连接上上传一个 10MB 的文件至少需要 3 分钟（请记住，上传速度通常比下载速度慢五倍）。此外，操作或保存上传的图像也可能导致脚本超时。因此，我们需要将 PHP 的**max_input_time**和**max_execution_time**设置为 300（以秒为单位指定 5 分钟）。

这些选项可以在您的服务器的**php.ini**配置文件中设置，以便它们适用于您的所有应用程序。或者，如果您使用的是 Apache，您可以在应用程序的 .htaccess 文件中配置设置：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:07:32.297

也来看看`post_max_size`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:08:06.853

您必须在 php.ini 文件中使用此设置

```
upload_max_filesize = 10M  //20m,30m etc..
post_max_size = 10M  //20m,30m etc.. 
```

没有必要提供 10 MB，它会根据您的要求提供。

尝试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:08:22.263

你检查过你的 php.ini 中的 post_max_size 吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T11:12:24.520

您必须更改 php.ini 文件。它限制了最大上传大小。在 php.ini 文件中更改它

```
post_max_size = 8M
upload_max_filesize = 2M 
```

:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T11:12:46.157

PHP Uploads[可能会将整个请求](http://www.php.net/manual/en/features.file-upload.common-pitfalls.php)放在内存中工作，因此上传数百个 meg 将需要允许存储许多 meg 的内存限制（以及更多）。如果您确实需要支持大文件上传，那么如果网络服务器从请求中创建临时文件，您可能会更好。查看apache 的 mod_upload 或 nginx 的[HttpUpload](http://apache.webthing.com/mod_upload/)[插件](http://wiki.nginx.org/HttpUploadModule)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-19T13:31:33.003

[PHP ini 设置](http://www.php.net/manual/en/ini.list.php)是您需要查看的。

# sql - 如何使用 PIVOT 从两列中获取平均值？

> ID：13452487
> 
> 赞同：0
> 
> 时间：2012-11-19T11:05:41.877
> 
> 标签：sql, sql-server, sql-server-2008, pivot-table

在我的表中，我想获得两列的平均值

```
 PackerID    HeaderID    Price  Quantity  Size  
  1            1           10      10      50  
  2            1           10      10      60  
  3            1           8.5     20      50
  4            2           7       15      60
  5            2           6       30      60 
```

结果应该是 SUM(price*Quantity)/SUM(Quantity) 作为相同尺寸的平均值。

```
HeaderID     Average-50     Average-60 
  1                 9            4.7 
```

价格是上表中的每 1 个数量*，我想使用 PIVOTE 获得尺寸“50”的平均价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:44:20.637

如果你想要`PIVOT`结果，那么你可以使用类似这样的东西：

```
select *
from
(
  select headerid, size,
    sum(price*quantity)/sum(quantity*1.0) perUnit
  from yourtable
  group by headerid, size
) src
pivot
(
  avg(perUnit)
  for size in ([50], [60])
) piv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:17:58.963

```
select sum(price * quantity) / sum(quantity)
  from tbl
 where size = 50;

-- result
9.0 
```

适用于所有尺寸：

```
 select size, sum(price * quantity) / sum(quantity) avg_price_for_size
    from tbl
group by size
order by size; 
```

# android - 构建framework-res.apk，替换后系统崩溃

> ID：13452490
> 
> 赞同：0
> 
> 时间：2012-11-19T11:06:11.457
> 
> 标签：android

我正在尝试添加 /frameworks/base/core/res/res/ 中的两个按钮 .xml 文件。我可以为按钮视图添加没有任何“android：id”属性的按钮，并且在设备上也可以正常工作。但是，如果尝试为添加的按钮提供 id 以从 .java 文件访问它们，则系统无法启动（所有系统服务都死了）

如何在 xml 文件中为按钮提供 id？请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:52:45.110

找到这个问题的答案和解决方案非常简单，再次构建整个源代码:)

# objective-c - 遍历 Objective-C 中的属性

> ID：13452491
> 
> 赞同：1
> 
> 时间：2012-11-19T11:06:24.097
> 
> 标签：objective-c

我发现了一些看起来像这样的代码：

```
if (statisticsObject.idag3_orig != 0) {
    statisticsView.idag3.text = [NSString stringWithFormat:@"%i",statisticsObject.idag3_orig];
} else {
    float compare1 = statisticsObject.idag2;
    float compare2 = statisticsObject.idag3;
    float result = compare1 + (compare1 * (compare2 / (float) 100.00));
    int final = (int)roundf(result);
    statisticsView.idag3.text = [NSString stringWithFormat:@"%i",final];
}

if (statisticsObject.igar3_orig != 0) {
    statisticsView.igar3.text = [NSString stringWithFormat:@"%i",statisticsObject.igar3_orig];
} else {
    float compare1 = statisticsObject.igar2;
    float compare2 = statisticsObject.igar3;
    float result = compare1 + (compare1 * (compare2 / (float) 100.00));
    int final = (int)roundf(result);
    statisticsView.igar3.text = [NSString stringWithFormat:@"%i",final];
} 
```

这重复了很多很多次。显然，它感觉不是很干燥，而且使用起来有点痛苦。如何使用变量属性名称循环此逻辑？我认为我采用的方法是 Objective-C 不允许的。这是我尝试过的：

```
NSArray * properties = [[NSArray alloc] initWithObjects:
                                              @"foo",
                                              @"bar",
                                              @"spam", 
                                              nil];
for (id prop in properties) {
    NSLog(@"%@",obj.prop);
} 
```

**- 笔记 -**

*我原来的伪代码相当混乱。对于那个很抱歉。*

简而言之，我怎样才能重组我上面的代码，这样我就不会不断重复自己？执行的数学运算总是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:25:19.793

这主要是一个架构问题。为什么 'foo1'、'foo2' 和 'foo3' 没有分组在一个对象中？它们是整数，为什么不使用具有三个整数属性的`x`对象？然后在此类对象上定义一个方法并调用：`y``z``updateText`

```
NSArray * properties = [[NSArray alloc] initWithObjects:
                                              obj.foo,
                                              obj.bar,
                                              obj.spam, 
                                              nil];
for (MyObject* object in properties) {
     [object updateText];
} 
```

当然，你想要的也是可以的，访问 Obj-C 运行时。最简单的解决方案是使用`NSSelectorFromString`，例如

```
SEL sel1 = NSSelectorFromString([NSString stringWithFormat:@"%s%i", @"foo", 1]); 
```

然后使用`performSelector`, 也可以使用 a`NSInvocation`来获取原始类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:26:13.903

小心，这段代码应该可以工作：

```
 NSArray * properties = [[NSArray alloc] initWithObjects:
                        @"foo",
                        @"bar",
                        @"spam",
                        nil];
for (id obj in properties)
{
    SEL selector = NSSelectorFromString(obj);
    if (selector && [statisticsView respondsToSelector:selector])
        NSLog(@"%@",[statisticsView performSelector:selector]);
} 
```

请注意，如果您的属性不返回 NSObject，则 NSLog 可能会中断

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:19:09.810

我不明白你的第二个代码，如果你想打印字符串，这就是它的工作原理：

```
NSArray * properties = [[NSArray alloc] initWithObjects:
                                          @"foo",
                                          @"bar",
                                          @"spam", 
                                          nil];
for (id obj in properties) {
    NSLog(@"%@",obj);
} 
```

# wpf - 如何在 WPF 中设计和打印自定义的“申请表纸”？

> ID：13452492
> 
> 赞同：1
> 
> 时间：2012-11-19T11:06:28.930
> 
> 标签：wpf, printing, custom-pages

它实际上是一张纸质文件——一种“保险表格”——保险客户在其中填写他们的信息。到目前为止，客户必须在纸上的空白字段中写下所有询问的信息，当然是用钢笔。但我决定在 WPF 中开发一个应用程序，保险公司代理人可以通过它轻松“输入”所需的信息，然后将**它们打印在同一个“保险表格”上。**

所以我需要创建一个空白的 A4 页面，并在页面的特定位置放置一些“文本框”。让用户调整它们在页面上的大小和位置，并填写一些文本。然后打印页面。

**问题**是，我该怎么做？我不知道我可以使用 C# .NET 和 WPF 中的哪种工具。`System.Drawing`也许 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:26:01.227

使用 Visual Studio，您将创建一个新的 WPF 应用程序，向项目和内部（的 XAML）添加一个新的[UserControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol.aspx)`UserControl` ，然后在 Visual Studio 设计器中添加一个根布局面板，如[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)或[Grid](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)，然后在该面板上您将添加用户需要填写的[Label](http://msdn.microsoft.com/en-us/library/system.windows.controls.label.aspx)和[TextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.aspx)（[CheckBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.checkbox.aspx)、[RadioButton等）。](http://msdn.microsoft.com/en-us/library/system.windows.controls.radiobutton.aspx)

然后，您可以将该 UserControl 与打印按钮或菜单条目一起放入主窗口（可能在[ScrollViewer](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer%28v=vs.95%29.aspx)内，因为整个页面可能无法显示在屏幕上）。

然后，您可以在按钮的单击事件处理程序中`UserControl`使用[PrintVisual](http://msdn.microsoft.com/en-us/library/system.windows.controls.printdialog.printvisual.aspx)轻松打印出整个内容。如果这就是你所需要的，你应该很快就完成了。

作为附加步骤，您可以设置控件和标签的样式，使其看起来更像您的纸质表单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:25:36.623

问题是你的表格看起来如何。如果您期望设计的东西 - 使用普通对象创建新窗口，并打印窗口而不显示 . 像：

```
var window = new YourWindow();

window.Show();

PrintDialog pd = new PrintDialog();

pd.PrintVisual(window,"MyForm");

window.Close(); 
```

展开，google[如何打印 wpf 窗口](https://www.google.co.il/#hl=en&output=search&sclient=psy-ab&q=how+to+print+wpf+window&oq=how+to+print+wpf+window&gs_l=hp.3..0i30.787.5526.0.5981.11.9.0.2.2.1.367.1946.0j2j2j3.7.0.les;..0.0...1c.1.KD2dAvI-KdU&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=b286b87b4dbd674d&bpcl=38625945&biw=1229&bih=789)

如果您需要更多分页文档（例如 Word 文档），您可以使用 RichTextBlock。它有允许你布局的类。然后将其打印为任何窗口，或者您可以直接从 RichTextBlock 打印。

我有一个应用程序可以做类似的事情，对我来说它更复杂，因为打印的表格经常变化。

我所做的是将文档作为 Word 获取，使用[codeplex word add-in](http://wordtoxaml.codeplex.com/)将其转换为 XAML ，进行一些更改，从而轻松生成表单。

# objective-c - Kal 日历没有从 iPhone 日历中获取数据

> ID：13452495
> 
> 赞同：0
> 
> 时间：2012-11-19T11:06:46.037
> 
> 标签：objective-c, ios, github, calendar, ekevent

我正在尝试使用 Kal 日历。我从 github 获得了一份副本。你可以在[这里](https://github.com/klazuka/Kal)找到它。现在，当我在模拟器上测试 nativeCal 演示项目时。它在日历上显示事件。

我的猜测是它们来自模拟器中的日历。但是当我在真实设备上对其进行测试时，它不会获取任何数据（事件）。

有人以前使用过这个 github 项目并且可以帮助我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:54:09.697

我有同样的问题，但实际上这不是问题，但这是要在模拟器中显示的示例事件。要查看设备中的事件，您需要在代码中手动添加事件，然后您将在设备中找到该事件。

检查此链接[此处](https://stackoverflow.com/questions/5272186/programatically-adding-a-calendar-event-on-ipad)以编程方式添加事件。

我希望你能明白这一点

谢谢

# javascript - 如何使用 jQuery 更新 Json 对象？

> ID：13452498
> 
> 赞同：1
> 
> 时间：2012-11-19T11:06:46.650
> 
> 标签：javascript, jquery, json

大家好，我正在连接这样的`JSON`字符串：

```
 var addresses = "[";

         addresses += '{"AddressID":' + adressid + ',"EmailID":' + $('#txtemailData').val() + ',"Hno":' + $('#txthno').val() + ',"StreetName":' + $('#txtstreetname').val() + ',"City":' + $('#txtcity').val() + ',"StateID":' + $('#ddlState').val() + ',"CountryID":' + $('#ddlcountry').val() + ',"Zip":' + $('#txtzip').val() + ',"PhoneNumber":' + $('#txtphonenumber').val() + ',"Fax":' + $('#txtfax').val() + ',"AddressName:' + $('#txtaddresstype').val() + '"},'; 
```

对象看起来像这样：

```
[{
   "AddressID":2,
   "EmailID":akanilkumar443@gmail.com,
   "Hno":Hyderabad,
   "StreetName":Gachibowli,
   "City":Hyderabad,
   "StateID":1,
   "CountryID":1,
   "Zip":040,
   "PhoneNumber":8341516166,
   "Fax":23123131,
   "AddressName:Store Address"},
 { 
   "AddressID":3,
   "EmailID":akanilkumar443@gmail.com,
   "Hno":aSAs,
   "StreetName":asdasdad,
   "City":asdasda,
   "StateID":1,
   "CountryID":1,
   "Zip":asdasda,
   "PhoneNumber":asdasda,
   "Fax":asdasda,
"AddressName:Store Type"
}] 
```

如何根据它的 id 更新 json 对象的这个特定值？

假设我想更改我的对象 where 的一些值`AddressID=2`。例如，我想更改`EmailID`,`Streetname`的`JSON`对象 where `AddressID=2`。如何使用 jQuery 做到这一点？

我正在尝试这样，但它没有进入循环，任何人都可以在这里帮助我吗？

```
 function EditAddress(addressid) {
    alert(addressid);
    alert(addresses);
    var addressobject =JSON.parse(addresses.substring(0, addresses.length - 1) + ']');
    jQuery.each(addressobject, function (i, val) {
        alert(val.AddressID);
        if (val.AddressID == addressid) 
        {
            //update logic
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:55:57.913

您可以`arr`使用该[`$.each()`](https://api.jquery.com/jquery.each/)函数循环遍历数组，然后搜索`id`属性值在哪里`2`。如果找到，则更新对象中所需的属性，`obj`然后像这样跳出循环：

```
var arr = [
    {"id": 1, "name": "Apple"  , "isVisible": false},
    {"id": 2, "name": "Orange", "isVisible": false},
    {"id": 3, "name": "Banana", "isVisible": false}
]

$.each( arr, function( i, obj ) {
  if(obj.id === 2){
    console.log("Current " + obj.id + " = " + obj.isVisible);
    obj.isVisible = true;
    console.log("Changed " + obj.id + " = " + obj.isVisible);
    return false; // Loop will stop running after this
  }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:28:58.970

首先不要手动创建字符串。使用内置功能要强大得多，因此请执行以下操作：

```
var addressesAsArray = [],
    addressAsObject = {}
    address;
//assuming some loop or other
address = {
              "AddressID": adressid,
              "EmailID":$('#txtemailData').val(),
              "Hno":$('#txthno').val(),
              "StreetName": $('#txtstreetname').val(),
              "City": $('#txtcity').val(),
              "StateID": $('#ddlState').val(),
              "CountryID": $('#ddlcountry').val(),
              "Zip": $('#txtzip').val(),
              "PhoneNumber": $('#txtphonenumber').val(),
              "Fax": $('#txtfax').val(),
              "AddressName": $('#txtaddresstype').val()
          };
addressesAsArray.push(address);
addressAsObject[address.AddressID] = address; 
```

如果您需要查找具有给定 ID 的地址，该方法将取决于您是在addressesAsArray 中还是在addressesAsObject 中查找。后者直截了当

```
address = addressesAsObject[addressIDBeingSought]; 
```

在数组情况下，您可以简单地循环

```
for(i = 0, len = addressesAsArray.length;i<len; i += 1){
   if(addressesAsArray[i].AddressID === addressIDBeingSought) {
       address = addressesAsArray[i];
       break;
   }
} 
```

完成更新后，您可以通过以下方式将其作为 JSON 获取

```
json = JSON.stringify(adresses); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T11:13:59.613

使用 linq.js javascript 库或 jquery 插件：[http ://linqjs.codeplex.com/](http://linqjs.codeplex.com/)

```
 <!DOCTYPE>
    <html>
    <head>
        <script type="text/javascript" src="linq.js"></script>
    </head>
    <body>
    <script>  
    var array = [{
       AddressID:2,
       EmailID:'akanilkumar443@gmail.com',
       Hno:'Hyderabad'
       },
     { 
       AddressID:3,
       EmailID:'akanilkumar443@gmail.com',
       Hno:'aSAs'
    }];
    Enumerable.From(array).Where("$.AddressID == 3").ToArray()[0].Hno= 'ololo'; 
// or this: 
// Enumerable.From(array).Where(function(x){return x.AddressID == 3}).ToArray()[0].Hno= 'ololo'; 
    alert(array[1].Hno)  
    </script>
    </body>
    </html> 
```

# liferay - 生命射线 6.1。是否可以在 portal-ext.properties 中为我的工作添加 cron 表达式？

> ID：13452499
> 
> 赞同：1
> 
> 时间：2012-11-19T11:06:51.597
> 
> 标签：liferay, portlet, liferay-6

我有一个 cron 工作

```
 <portlet>
    <portlet-name>scheduled-actions</portlet-name>
    <scheduler-entry>
        <scheduler-event-listener-class>com.example.Example</scheduler-event-listener-class>
        <trigger>
            <cron>
                <cron-trigger-value>0/15 * * * * ?</cron-trigger-value>
            </cron>
        </trigger>
    </scheduler-entry>
    <system>true</system>
</portlet> 
```

是否可以将此 cron 表达式 (0/15 * * * * ?) 从 liferay-portlet.xml 放入 portal-ext.properties 中？如果是的话，如何在这里检索它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T10:29:57.903

可以在 portlet.properties 文件中添加一个键。我们已经实现了这一点。

portlet.properties: trigger.key=0 0/2 * * * ?

liferay-portlet.xml：使用 property-key 而不是 cron-trigger-value 并指定“triger.key”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T10:24:31.820

同意马蒂亚斯的回答。这是我为实现它所做的工作，

1.  将您的调度程序类扩展为 MVCPortlet 并实现 MessageListener 接口。
2.  现在，通过放置以下代码覆盖 init() 方法，

    ```
    String cron = "0 0/1 * 1/1 * ? *";// You can read it from portal-ext.properties using PropsUtil
    Trigger trigger = null;  
    try {  
    trigger = TriggerFactoryUtil.buildTrigger(TriggerType.CRON, EngageMailScheduler.class.getName(), EngageMailScheduler.class.getName(), new Date(), null, cron);  
      } catch (SchedulerException e) {  
       e.printStackTrace();  
      }  

      Message message = new Message();  
      message.put(SchedulerEngine.MESSAGE_LISTENER_CLASS_NAME, EngageMailScheduler.class.getName());  
      message.put(SchedulerEngine.PORTLET_ID, portlet.getPortletId());  

      try {  
    //In Liferay 6.1 use SchedulerEngineUtil, it is deprecated in Liferay 6.2
       SchedulerEngineHelperUtil.schedule(trigger, StorageType.PERSISTED, "", "liferay/scheduler_dispatch", message, 5);  
      } catch (SchedulerException e) {  
       e.printStackTrace();  
      } 
    ```

3.  现在，您可以将逻辑放在 receive() 方法中，

    ```
    public void receive(Message message) throws MessageListenerException {
         LOGGER.info("IN: Dynamic scheduler");
    } 
    ```

4.  最后在liferay-portlet.xml中给出你实现的类的完整路径，如下

    ```
     <portlet-class>com.test.MyScheduler</portlet-class> 
    ```

希望这可以帮助。

# objective-c - 如何在 Xcode 中使用图像坐标设置全局变量

> ID：13452500
> 
> 赞同：0
> 
> 时间：2012-11-19T11:06:52.537
> 
> 标签：objective-c, ios, xcode, touch, global-variables

我目前正在使用一些标准的 Xcode 通过触摸控制在视图周围移动图像，我还想设置一些全局变量，以便一旦我停止移动图像，就可以传递 x 和 y 坐标并在另一个视图中使用。到目前为止，我有以下代码 where`Movegvarx`和`Movegvary`are 变量：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x ,
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0,0) inView:self.view];
Movegvarx = [NSString stringWithFormat: @"%.2f", translation.x];
Movegvary = [NSString stringWithFormat: @"%.2f", translation.y];

} 
```

目前这似乎不起作用，即未设置全局变量，有谁知道我做错了什么？

# c++ - Visual Studio - 从 c++ 项目生成 UML

> ID：13452507
> 
> 赞同：19
> 
> 时间：2012-11-19T11:07:13.763
> 
> 标签：c++, visual-studio, uml

目前我正在阅读 cryengine 游戏代码。这是巨大的，没有很好的记录。如果我可以从项目文件中创建 UML 图，那就太好了。

我已经找到了一些从 c++ 代码生成 UML 图的工具，问题是 cryengine 项目非常庞大，而且要花费很多时间。

你认为这可能吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-19T11:11:12.383

Visual Studio 具有内置的 UML 生成器。在 Visual Studio 项目中，选择`Class View`，右键单击命名空间，选择`View Class Diagram`. 如果您的项目很大，生成 UML 图可能需要一段时间。希望这可以帮助。

![在此处输入图像描述](../Images/24a2b724f610f81ee479b116f04e881f.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T11:15:04.997

您可能会对结果感到失望：一大堆 C++ 可能会呈现为同样非常复杂的 UML 图。

然而，一个旨在帮助可视化大型 C++ 代码库的工具是[理解](http://www.scitools.com/)。

# css - CSS：如何为粗体字体系列设置后备？

> ID：13452508
> 
> 赞同：3
> 
> 时间：2012-11-19T11:07:27.620
> 
> 标签：css, fonts, font-face, font-family, woff

我正在使用自己嵌入的自定义字体，如下所示：

```
@font-face{font-family:myFont;src:url(css/fonts/myFont.woff);}
@font-face{font-family:myBoldFont;src:url(css/fonts/myBoldFont.woff);} 
```

所以，每当我想使用粗体字体时，我都会这样做：

```
<style>
.bold{
    font-family:"myBoldFont";
}
</style>
<div class="bold">Hello world</div> 
```

另外，我需要覆盖默认使用粗体字体的所有 css 定义：

```
<style>
    strong,h1,h2,h3,h4,h5,h6,h7,h8{
        font-family:"myBoldFont";
        font-weight:normal;
    }
</style> 
```

如您所见，我必须设置`font-weight:normal`，因为如果我设置`font-weight:bold`浏览器将找不到正确的字体并执行回退，因为此 .woff 文件中没有“粗体”的定义。

因此，这对于支持`@font-face`和 .woff 文件的浏览器非常有效。对于不支持的浏览器，例如较旧的 iOS 设备，我需要像这样设置后备：

```
font-family:"myBoldFont",helvetica,arial,sans-serif; 
```

因此，回退到 helvetica 有效，**但**文本不是粗体，因为`font-weight:normal`已设置。

现在，问题来了：

*   如果我设置`font-weight:bold`，那么可以处理 woff 文件的浏览器将回退到默认字体，而不是使用我通过 woff 文件定义的字体。
*   如果我设置`font-weight:normal`，则无法处理 woff 文件的旧浏览器将无法打印粗体文本。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:13:12.297

您是否尝试过以下方法：[如何为同一种字体添加多个字体文件？](https://stackoverflow.com/questions/2436749/how-to-define-bold-italic-using-font-face)?

该`@font-face`属性允许您指定要应用字体的样式。

# c - 从终端执行时 Netbeans EXE 不工作 - CentOs

> ID：13452521
> 
> 赞同：0
> 
> 时间：2012-11-19T11:08:28.490
> 
> 标签：c, linux, netbeans, centos, sasl

我使用 SASL 制作了 Netbeans 工作环境。示例代码得到构建，它也可以从 Netbeans 正常运行。但是当我尝试从终端运行我的 exe 时，它​​不起作用。错误如下：

> ./cppapplication_1：加载共享库时出错：libanonymous.so.2：无法打开共享对象文件：没有这样的文件或目录

我尝试使用以下命令设置 PATH ：

> 导出 PATH=/usr/lib64/sasl2/:$PATH

我仍然遇到同样的错误。我需要额外做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:16:20.147

你也可以试试这个。

```
ldd <name of executable> 
```

您将看到依赖库及其预期路径。查看 lib 是否存在于可执行文件所期望的路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:30:03.943

您需要将路径添加`libanonymous`到环境变量`LD_LOAD_LIBRARY`。

**更新：**

为此：

1.  找到图书馆，例如做：`find / -name "libanonymous.so.2"`或通过`locate libanonymous.so.2`
2.  添加找到的路径，如下所示：`export LD_LOAD_LIBRARY=$LD_LOAD_LIBRARY:<path to lib>`

**更新1：**

从您对*Anon*的回答的评论中，我看到有问题的库位于`/usr/lib64/sasl2/`.

所以你可能想像这样设置`LD_LOAD_LIBRAY`路径：

```
export LD_LOAD_LIBRARY=$LD_LOAD_LIBRARY:/usr/lib64/sasl2/ 
```

**更新 2**

这需要在同一个 shell 中完成，该 shell 稍后会执行需要库 ( `cppapplication_1`) 的程序。

```
cd <dir for cppapplication_1>; export LD_LOAD_LIBRARY=$LD_LOAD_LIBRARY:/usr/lib64/sasl2/; ./cppapplication_1 
```

# objective-c - 注销时的 MBProgressHUD

> ID：13452522
> 
> 赞同：0
> 
> 时间：2012-11-19T11:08:34.057
> 
> 标签：objective-c, ios, background, mbprogresshud

我在我的 ipad 应用程序中注销时使用[MBProgressHUD](https://github.com/jdg/MBProgressHUD)制作概览加载屏幕。这一进展需要一些时间，因为我必须加密一些更大的文件。

因为我在后台线程中执行此操作并且[MBProgressHUD](https://github.com/jdg/MBProgressHUD)正在主线程上进行动画处理，所以我必须做一些事情才能知道我的后台线程何时完成。

作为测试，我是这样做的：

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.mode = MBProgressHUDAnimationFade;
hud.labelText = @"Do something...";

[self performSelectorInBackground:@selector(doSomethingElse) withObject:nil]; 
```

和方法doSomethingElse：

```
-(void)doSomethingElse
{
    [self encrypt];
    [self performSelectorOnMainThread:@selector(doSomethingElseDone) withObject:nil waitUntilDone:YES];
} 
```

和方法doSomethingElseDone：

```
-(void)logoutInBackgroundDone
{
    [MBProgressHUD hideHUDForView:self.view animated:YES];    
} 
```

该解决方案有效，但我认为必须有更好的方法？我怎样才能以更好的方式做到这一点？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:11:37.250

您可以使用直接关闭`MBProgressHUD`from`doSomethingElse`方法`dispatch_async`

```
-(void)doSomethingElse
{
    [self encrypt];
    dispatch_async(dispatch_get_main_queue(), ^{
         [MBProgressHUD hideHUDForView:self.view animated:YES];
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:20:21.373

创建一个可以访问的原子属性

```
@property BOOL spinning; 
```

和

```
- (void)myTask
{
    while ( self.spinning )
    {
        usleep(1000*250); // 1/4 second
    }
} 
```

然后在你的视图控制器中使用一些东西，比如

```
HUD = [[MBProgressHUD alloc] initWithView:self.view];
[self.view addSubview:HUD];
[HUD showWhileExecuting:@selector(myTask) onTarget:self withObject:nil animated:YES]; 
```

这样，当旋转变为假时，HUD 将自行移除。微调器必须是原子的，因为它将在后台线程中引用。无论您在等待什么，都可以简单地将任何线程的 spinner 属性设置为 false 以表明它已完成。

这是在 ARC 下。

# c# - 如何从 Web.config 读取 system.net/mailSettings/smtp

> ID：13452530
> 
> 赞同：65
> 
> 时间：2012-11-19T11:09:16.027
> 
> 标签：c#, web-config, smtp, sendmail

这是我的`web.config`邮件设置：

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network" from="smthg@smthg.net">
        <network defaultCredentials="true" host="localhost" port="587" userName="smthg@smthg.net" password="123456"/>
      </smtp>
    </mailSettings>
  </system.net> 
```

这就是我尝试从中读取值的方法`web.config`

```
 var smtp = new System.Net.Mail.SmtpClient();
 var credential = new System.Net.Configuration.SmtpSection().Network;

 string strHost = smtp.Host;
 int port = smtp.Port;
 string strUserName = credential.UserName;
 string strFromPass = credential.Password; 
```

但凭据始终为空。我如何访问这些值？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-11-13T17:45:59.927

由于没有接受任何答案，并且其他人都没有为我工作：

```
using System.Configuration;
using System.Net.Configuration;
// snip...
var smtpSection = (SmtpSection)ConfigurationManager.GetSection("system.net/mailSettings/smtp");
string username = smtpSection.Network.UserName; 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-02-20T08:41:19.417

不必`ConfigurationManager`手动使用和获取值。简单地实例化一个`SmtpClient`就足够了。

```
SmtpClient client = new SmtpClient(); 
```

这是[MSDN](http://msdn.microsoft.com/en-us/library/k1c4h6e2%28v=vs.110%29.aspx)所说的：

> 此构造函数使用应用程序或机器配置文件中的设置初始化新 SmtpClient 的 Host、Credentials 和 Port 属性。

斯科特·格思里（Scott Guthrie）前段时间写了一篇关于这个的小[帖子。](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-19T11:13:52.580

通过使用配置，以下行：

```
var smtp = new System.Net.Mail.SmtpClient(); 
```

将使用配置的值 - 您无需再次访问和分配它们。

* * *

至于`null`值 - 您正在尝试错误地访问配置值。您只是在创建一个空`SmtpSection`而不是从配置中读取它。

```
var smtpSection = (SmtpSection)ConfigurationManager.GetSection("<the section name>");
var credentials == smtpSection.Network; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-09T07:33:20.143

```
 //You can access the network credentials in the following way.
            //Read the SmtpClient section from the config file    
            var smtp = new System.Net.Mail.SmtpClient();
            //Cast the newtwork credentials in to the NetworkCredential class and use it .
            var credential = (System.Net.NetworkCredential)smtp.Credentials;
            string strHost = smtp.Host;
            int port = smtp.Port;
            string strUserName = credential.UserName;
            string strFromPass = credential.Password; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T11:19:19.543

我认为如果您设置了 defaultCredentials="true" ，您将拥有 credentials = null 因为您没有使用它们。

调用 .Send 方法时是否发送电子邮件？

所以

这是我的网络配置邮件设置：

```
<system.net>
   <mailSettings>
      <smtp deliveryMethod="Network" from="smthg@smthg.net">
         <network defaultCredentials="false" host="localhost" port="587"
            userName="smthg@smthg.net" password="123456"/>
      </smtp>
   </mailSettings>
</system.net> 
```

这是cs

```
SmtpClient smtpClient = new SmtpClient();

string smtpDetails =
    @"
    DeliveryMethod = {0},
    Host = {1},
    PickupDirectoryLocation = {2},
    Port = {3},
    TargetName = {4},
    UseDefaultCredentials = {5}";

Console.WriteLine(smtpDetails,
    smtpClient.DeliveryMethod.ToString(),
    smtpClient.Host,
    smtpClient.PickupDirectoryLocation == null
        ? "Not Set"
        : smtpClient.PickupDirectoryLocation.ToString(),
    smtpClient.Port,
    smtpClient.TargetName,
    smtpClient.UseDefaultCredentials.ToString)
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T15:33:52.190

确保您在应用程序中引用了 System.Net

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-31T09:29:49.240

设置 defaultCredentials="false"，因为当它设置为 true 时，不使用任何凭据。

# blackberry - 在 BlackBerry 应用程序中保存大型本地化文本的正确方法

> ID：13452535
> 
> 赞同：0
> 
> 时间：2012-11-19T11:09:31.327
> 
> 标签：blackberry, java-me

我需要用不同的语言保存 3 个本地化的大文本块。每个文本块大约有 1700 个字母。将其保存在 .rrc 文件中的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:53:18.953

通常 rrc 文件包含较短的应用程序 UI 文本 - 大约 100 个字符左右。1700 有点大，但如果文本适合 .rrc 文件没有问题，你应该没问题。rrc 文件是匹配设备语言设置的翻译的预期位置。

# ember.js - Ember DataStore 似乎无法正常工作。我究竟做错了什么？

> ID：13452541
> 
> 赞同：0
> 
> 时间：2012-11-19T11:09:50.203
> 
> 标签：ember.js, datastore

在[这个 JSFIddle 中](http://jsfiddle.net/eEnVT/)，我试图获取 John（它确实如此），但随后我试图获取 John 的所有宠物（他应该有两个），但实际上没有返回任何内容。

我的印象是 DS 商店会根据`pet_ids`.

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:16:40.990

默认情况下，REST 适配器期望`pet_ids`以`pets`. 你可以在[这里](http://jsfiddle.net/dgeb/k5geV/)看到你的小提琴的工作版本。

如果您想提供自定义映射，则需要按照[重大更改](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md#mapping)`Adapter.map`中的说明使用。

# html - 使用 jQuery UI 定位多个对话框

> ID：13452543
> 
> 赞同：2
> 
> 时间：2012-11-19T11:09:53.303
> 
> 标签：html, jquery-ui

如何将对话框与其包含的 div 并排放置，而不是在整个窗口中？

我正在使用 jQuery UI: : [http://carvalhar.com/componente/jQueryDialogr/index.html#](http://carvalhar.com/componente/jQueryDialogr/index.html#)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:46:51.987

您可以更改 jQuery UI 对话框的位置属性。Dialogr 继承了普通 UI Dialog 的所有属性。您可以在此链接中查看有关定位它的信息

[http://api.jqueryui.com/dialog/#option-position](http://api.jqueryui.com/dialog/#option-position)

您可以更改两个对话框的位置坐标以将它们堆叠在一起。

# embedded - WindowsCE 将分区合并为单个 /YaffsPart1

> ID：13452548
> 
> 赞同：0
> 
> 时间：2012-11-19T11:10:09.373
> 
> 标签：embedded, windows-ce, platform-builder

我创建了两个 yaffs 分区，例如

一个。/启动 b。/数据

生成的“NK.bin”被复制到/boot 分区，文本文件“DATA.TXT”被复制到/data 分区。

在 Windows CE 中，仅显示 /YaffsPart1 分区，其中包含 NK.bin 和 DATA.TXT 两个文件。

为什么 WindowsCE 不显示名为 boot 和 data 的分区？

为什么它将两个分区合并为一个 /YaffsPart1 ？

我需要一个 Windows CE 显示启动和数据分区的解决方案

问候， 纳希德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:17:20.903

通常，您必须在您的 BSP 的 Yaffs 驱动程序的 .reg 文件中设置分区。不同的分区及其起始和结束地址将有几个注册表项。

我假设您在引导加载程序中设置了分区，并且在加载窗口后它显示为一个分区？您必须设置分区，然后还要在 Windows CE 映像中的 Yaffs 驱动程序注册表项下设置相同的分区。如果您有该驱动程序及其设置，则可能会有一个默认的 YaffsPart1 使用整个空间

我在 CE 文档上进行了一些搜索，但没有看到设置，但这是我的驱动程序设置的样子（您的可能不同）

```
; This is the way to add another partition
; Align to the block size.
;
;[HKEY_LOCAL_MACHINE\System\StorageManager\Profiles\lpd_yaffsbd\YAFFS_PARTDRV\PART01]
; For NOR Flash Devices
;   "EndAddr"=dword:006C0000
;   "StartAddr"=dword:03C0000   
; For NAND Flash Devices
;   "StartBlock"=dword:00000FE0 ;B256 (make sure to change PART00 values to not over-run)
;   "EndBlock"=dword:  000001FF ;B511 (default size = 32MB or 128KB*256 Blocks)
; Common for NOR/NAND Flash 
;   "Name"="YaffsPart2"
;   "PartType"="0"
;   "ReadOnly"=dword:0 
```

# jsf - 无法理解 行为

> ID：13452551
> 
> 赞同：1
> 
> 时间：2012-11-19T11:10:20.727
> 
> 标签：jsf, primefaces

我有一个模板组合`Button.xhtml`，其中包含`<p:commandLink>`：

```
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
    <p:commandLink value="View" action="#{printClass.printPdf}"/>
</ui:composition> 
```

该链接的目的是生成 PDF。

我有一个包含 的模板客户`defaultPage.xhtml`端`Button.xhtml`。

```
<ui:composition template="../../WebPages/MasterPage/Template.xhtml">
    <ui:define name="MainContent">
        <ui:include src="../../WebPages/Facelets/Button.xhtml"/>
    </ui:define>
</ui:composition> 
```

最后一个是`Template.xhtml`将`MainContent`模板定义插入到`<h:form>`.

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <h:form>
            <ui:insert name="MainContent" />
        </h:form>
    </h:body>
</html> 
```

当我放入`<h:head></h:head>`时`Template.xhtml`，`<p:commandLink>`in`Button.xhtml`停止工作，但页面的 CSS 工作正常。当我删除`<h:head></h:head>`或替换它时`<head></head>`，`<p:commandLink>`开始工作，但 CSS 停止工作。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T13:10:07.857

它将自动包含所有必需的 ajax 行为的`<h:head>`JavaScript 文件和布局的 CSS 文件。当您删除它时，CSS 将不会被自动包含并且 ajax 行为将不会被启用。然后`<p:commandLink>`它将充当普通的香草链接。

这`<h:head>`对于 JSF 和 PrimeFaces 组件的正常运行以及 PrimeFaces 外观的应用是绝对必要的。所以你不应该删除或更换它。

让我们专注于失败的问题`<p:commandLink>`。可能的原因比较多，这个答案都提到了：[commandButton/commandLink/ajax action/listener method not invoked or input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)

您没有展示完整的[SSCCE](https://stackoverflow.com/tags/jsf/info)，因此无法复制'n'paste'n'run 您的代码来自己查看问题（在您未来的问题中也可以解决这个问题）。因此，我将根据症状仅提及导致此问题的最可能原因：您将`<h:form>`组件相互嵌套。将`<h:form>`放在主模板中也是一种设计气味。您应该将其放在模板客户端中。另请注意，`<p:dialog>`应该有自己的形式，但`<p:dialog>`应该本身*不*嵌套在另一种形式中。

* * *

**更新**：根据评论，您尝试返回整个 PDF 文件作为对 ajax 请求的响应。这确实行不通。ajax 引擎需要一个 XML 响应，其中包含有关 HTML DOM 树中更改的信息。PDF 文件不是有效信息。此外，由于明显的安全原因，JavaScript 没有工具来以编程方式触发*另存为*对话框，从而提供可能的任意内容。

您不能通过 ajax 下载文件。你必须关闭ajax。如果`<p:commandLink>`基本上有2个解决方案：

1.  使用`ajax="false"`.

    ```
    <p:commandLink ... ajax="false" /> 
    ```

2.  改用就好`<h:commandLink>`了。

    ```
    <h:commandLink ... /> 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T10:28:50.897

在您放置*的 Button.xhtml中*

```
<h:commandLink value="View" action="#{printClass.printPdf}"/> 
```

你需要禁用ajax。所以你的新代码应该像

```
<h:commandLink value="View" action="#{printClass.printPdf}">
<f:ajax disabled="true"></f:ajax>
</h:commandLink> 
```

# javascript - jQuery克隆不适用于可拖动

> ID：13452554
> 
> 赞同：2
> 
> 时间：2012-11-19T11:10:28.387
> 
> 标签：javascript, jquery, jquery-ui, clone

我正在使用 jQuery `draggable`，`droppable`以便将内容元素拖放到页面元素上：

```
<h2>Page</h2>

<div id='page-content'>

</div>

<div id='content-elements'>
  <div id='text-element' class='content-element'>Text</div>
  <div id='date-element' class='content-element'>Date</div>
</div>​ 
```

我的可拖动 JS 如下所示：

```
$elements.draggable({
  revert: true
}); 
```

我在那里的原因`revert`是我希望内容元素返回到元素列表并将“重复”添加到页面中。

我尝试将这个 js 用于 droppable （使用咖啡脚本创建）：

```
$('#page-content').droppable({
  drop: function(event, ui) {
    var $element, $me;
    $me = $(this);
    $element = $(ui.draggable);
    console.log($element.clone(false));
    return $element.clone().appendTo($me);
  }
}); 
```

这样做是获取被拖动的 ui 元素，尝试克隆它，然后将其附加到页面。

然而，这不起作用！即使我可以从 ui.draggable 中获取 div 等。

我创建了一个 jsfiddle 来说明问题：http: [//jsfiddle.net/sw4Gc/2/](http://jsfiddle.net/sw4Gc/2/)

为什么哦为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:20:15.323

元素在相对位置且位于元素外部的状态下被克隆。您必须删除元素样式：

```
var $newElement = $element.clone();
$newElement.attr('style', '');
$newElement.appendTo($me); 
```

# javascript - 获取带有以开头的标记的 XML 的所有元素

> ID：13452559
> 
> 赞同：0
> 
> 时间：2012-11-19T11:10:48.877
> 
> 标签：javascript, jquery, xml

我有这个 XML：

```
<computers>
    <computer sid="1353323295303">
        <description>TEST</description>
        <match.country result="match" value="FR EU">
            <match.country result="match" value="EU"></match.country>
        </match.country>
    </computer>
</computers> 
```

如何选择以“匹配”开头的所有标签。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:16:38.030

您可以使用`filter`方法：

```
var $match = $('computers *').filter(function() {
    return this.localName.indexOf('match') === 0
}) 
```

[http://jsfiddle.net/UmUkj/](http://jsfiddle.net/UmUkj/)

# r - rJava：使用带有某个模板类的 java/lang/Vector

> ID：13452562
> 
> 赞同：2
> 
> 时间：2012-11-19T11:11:04.313
> 
> 标签：r, vector, rjava

我目前正在编写一个 R 脚本，它使用一个使用 java/lang/Vector 类的 java .jar，在这种情况下，它使用非本机方法中的类。在java源代码中：

```
public static Vector<ClassName> methodname(String param) 
```

我在 rJava 的文档中没有找到关于如何处理像 vector 这样的模板类以及在使用 jcall 或任何其他方法时要写什么。我目前正在尝试做这样的事情：

```
v <- .jnew("java/util/Vector")
b <- .jcall(v, returnSig = "Ljava/util/Vector", method = "methodname",param) 
```

但 R 显然抛出了一个异常：

```
method methodname with signature (Ljava/lang/String;)Ljava/util/Vector not found 
```

如何将模板类用于此命令？或者就此而言，我首先如何创建某个类的向量？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:30:18.487

`rJava`不知道 java 泛型，没有语法可以创建`Vector`给定类型的 a。您只能创建`Vector`s 的`Object`s。

既然可以使用系统，为什么还要坚持使用旧的`.jcall`api `J`，它可以让您更好地使用 java 对象：

```
> v <- new( J("java.util.Vector") )
> v$add( 1:10 )
[1] TRUE
> v$size()
[1] 1
# code completion
> v$
v$add(                 v$getClass()           v$removeElement(
v$addAll(              v$hashCode()           v$removeElementAt(
v$addElement(          v$indexOf(             v$retainAll(
v$capacity()           v$insertElementAt(     v$set(
v$clear()              v$isEmpty()            v$setElementAt(
v$clone()              v$iterator()           v$setSize(
v$contains(            v$lastElement()        v$size()
v$containsAll(         v$lastIndexOf(         v$subList(
v$copyInto(            v$listIterator(        v$toArray(
v$elementAt(           v$listIterator()       v$toArray()
v$elements()           v$notify()             v$toString()
v$ensureCapacity(      v$notifyAll()          v$trimToSize()
v$equals(              v$remove(              v$wait(
v$firstElement()       v$removeAll(           v$wait()
v$get(                 v$removeAllElements() 
```

# xcode - 将 armv6 架构添加到使用 Xcode 4.5 错误构建的 iOS 可执行文件的脚本

> ID：13452564
> 
> 赞同：1
> 
> 时间：2012-11-19T11:11:09.950
> 
> 标签：xcode, xcode4.5, armv7, armv6

你能帮我一点吗？

如果我使用以下脚本：

```
# Find the common base directory for both build
XCODE_BUILD=${BUILD_ROOT%%/Build*}
# Change this to the full path where Xcode 4.4 (or below) puts your armv6 output, using the previously derived base
export ARMV6_EXECUTABLE_PATH="$XCODE_BUILD/Build/Products/Release_armv6-iphoneos/$EXECUTABLE_PATH" 
```

然后构建失败，消息如下：

```
Missing }.
Command /bin/sh failed with exit code 1 
```

我做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:16:22.020

我解决了我的错误。

因此，如果您从下一行更改上述行，您的应用程序可以构建，也可以存档。

```
# Find the common base directory for both build
setenv XCODE_BUILD `echo $BUILD_ROOT| sed 's|Build.*||'`
echo $XCODE_BUILD
# Change this to the full path where Xcode 4.4 (or below) puts your armv6 output, using the previously derived base
setenv ARMV6_EXECUTABLE_PATH "$XCODE_BUILD/Build/Products/Release_armv6-iphoneos/$EXECUTABLE_PATH" 
```

# objective-c - 低于 6.0 的 iPhone 模拟器版本不再出现在 Xcode 4.5 方案下拉菜单中

> ID：13452566
> 
> 赞同：0
> 
> 时间：2012-11-19T11:11:19.920
> 
> 标签：objective-c, xcode, ios-simulator

新手提问。在使用 Xcode 4.5.3 和《Objective-C 第 4 版编程》一书学习 Objective-C 时，我已经进入了构建两个 iPhone 应用程序的最后一章。在构建应用程序之前，我下载了 iOS 模拟器 4.1、5.0 和 5.1。

当我构建第一个简单的 iphone 应用程序时，我能够在方案中选择 iphone 5.0 模拟器。当我构建第二个更复杂的应用程序时，我尝试将默认为 iPhone 6.0 模拟器的方案改回 iphone 5.0 模拟器，结果发现下拉菜单中不再提供低于 6.0 的模拟器。

耸了耸肩并允许在 6.0 模拟器中启动我的应用程序后，我发现模拟器中的一排按钮无法正确显示。此行显示在另一行的顶部，其标签为空白或“-”。这个项目的 xib 完全是根据本书的说明在视觉上创建的，因为我还不知道如何以编程方式对用户界面进行编码。

我有两个问题：

1.  如果方案菜单中不再提供此方案，我如何在 iPhone 5 模拟器中测试此应用程序；
2.  为什么 iphone 6.0 模拟器不能像 xib？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:16:00.867

首先，确保你已经下载了 5.0 和 5.1 的模拟器，为此，转到“Xcode -> Preferences -> Downloads”，你会在那里看到它。

如果你有它们，下一步是检查你的项目是否部署在这些版本中。为此，请转到您的项目属性（在项目导航器中单击项目）并检查“信息”选项卡中的“iOS 部署目标”属性。

下一步，在同一屏幕中单击您的目标并检查选项卡“构建设置”，并检查属性“基础 SDK”以查看您拥有的 iOS 版本。

让我知道事情的后续！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:42:24.243

这是对我的第二个问题的回答：为什么 iphone 6.0 模拟器无法与 xib 相似？

自动布局。取消选中此选项后，将按预期显示。

# html - JavaScript 和 JSP 文本字段不会清除

> ID：13452570
> 
> 赞同：0
> 
> 时间：2012-11-19T11:11:44.967
> 
> 标签：html, jsp

我在网上找到了很多关于如何清除您单击的相同文本字段的示例，但我希望用户单击文本字段 1 并清除文本字段 2，反之亦然。

已经为此苦苦挣扎了好几个小时。我遇到的问题是我没有错误，没有输出，而且它不起作用。我不知道问题是什么。

我的代码：

```
<jsp:useBean id="speed" class="java.lang.String" scope="request" />
<jsp:useBean id="force" class="java.lang.String" scope="request" />

<script>
    function clearSpeed() {
        var x = document.getElementByID(speed);
        x.value = "";
    }

    function clearForce() {
        var x = document.getElementByID(force);
        x.value = "";
    }
</script>

<input type="text" id="speed" onfocus='clearForce()' value="<%=speed%>">

<input type="text" id="force" onfocus='clearSpeed()' value="<%=force%>"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:14:48.810

您需要引用您的字符串，并且 JavaScript 区分大小写 - 函数是[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)：

```
function clearSpeed() {
    var x = document.getElementById('speed'); // added quotes around the id
    x.value = "";
}

function clearForce() {
    var x = document.getElementById('force'); // added quotes around the id
    x.value = "";
} 
```

最好是这样：

```
<input type="text" id="speed" onfocus="clearValue('force')" value="<%=speed%>">
<input type="text" id="force" onfocus="clearValue('speed')" value="<%=force%>"> 
```

调用单个函数（为了更好的一致性，我还更改了引号）

更新的 JavaScript：

```
function clearValue(id) {
    var x = document.getElementById(id); // no need for quotes and value passed in as variable
    x.value = "";
} 
```

这促进了可重用的代码和更少的重复

```
var x = document.getElementById(id);
x.value = ""; 
```

可能会变成（如果你真的想让它更短！）

```
document.getElementById(id).value = ""; 
```

不需要使用变量，除非你当然想用 DOM 元素做其他事情

# java - 来自破碎的直线多边形的参考矩形

> ID：13452573
> 
> 赞同：1
> 
> 时间：2012-11-19T11:11:53.677
> 
> 标签：java, polygon

有人可以指导我如何在java中实现以下内容：从任何直线多边形分割成两个或多个部分后，我需要引用两个矩形。

[多边形 http://img853.imageshack.us/img853/2475/picture1eu.jpg](http://img853.imageshack.us/img853/2475/picture1eu.jpg)

我的算法：

```
ArrayList coordinates;
for (int a = 0; a < coordinates.size(); a++)
{
    if (coordinates[a] at point of concave)
    {
        Draw intersecting line North Or South from coordinates[a] depending on 
        which direction remains inside the polygon.
    }
} 
```

在这个特定的图表上，两个凹边都位于同一个 x 轴上，但情况并非总是如此。

我猜我需要使用 Shape 和 Area 类？我想我最挣扎的是我用什么来进行分割（常规的 .drawLine？），然后能够引用这两个矩形。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:38:57.387

您可以获得可能的矩形列表，找到 4 个顶点的所有可能组合。然后只留下矩形（检查相邻顶点的 x 和 y）。然后检查它们是否相互交叉。

它们也应该`Area`在从`Polygon`.

它有效吗？

# php - 两个日期之间的差异（不考虑年份）

> ID：13452575
> 
> 赞同：1
> 
> 时间：2012-11-19T11:11:55.440
> 
> 标签：php, date, datetime, mktime

我有一个包含不同域和注册日期的数据库，我需要显示它们何时过期（注册 1 年）。例如：

domain1.com - 于 2012 年 11 月 19 日注册 (mm-dd-yyyy) - 365 天后到期。domain2.com - 注册于 2011 年 11 月 20 日 (mm-dd-yyyy) - 1 天后到期。

我一直在寻找不同的选项和问题（即[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)）但它们有点不同（我不需要考虑几年）而且我不是 PHP 专家和日期。

我认为一种选择可能是从总年数（* 365）中删除，但我不会考虑 366 年。

提前谢谢你！问候，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:20:33.790

或者，您可以使用数据库日期函数来为您解决这个问题.. 使用 mysql 将类似于

```
SELECT DATEDIFF(start_date, NOW()) AS days_remaining FROM table_name 
```

请参阅此处了解更多信息：

[http://www.w3schools.com/sql/func_datediff_mysql.asp](http://www.w3schools.com/sql/func_datediff_mysql.asp)

[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:17:38.687

你可能有用这个例子。

```
$date1 = "11/19/2012";
$date2 = "11/20/2011";
$diff = abs(strtotime($date2) - strtotime($date1));
$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));
printf("%d years, %d months, %d days\n", $years, $months, $days); 
```

尝试并提供适当的回应！

# android - Android 和 IllegalStateException

> ID：13452576
> 
> 赞同：3
> 
> 时间：2012-11-19T11:11:59.310
> 
> 标签：android, exception-handling, android-contentprovider, illegalstateexception

`IllegalStateException`如果我正在执行一段需要许多变量不为空的代码，例如在`delete()`我拥有的内容提供程序函数中，那么在我的 Android 应用程序中抛出一个对我来说是否有效：

```
public int delete(Uri uri, String where, String[] whereArgs) {
    try {
        SQLiteDatabase db = mOpenHelper.getWritableDatabase();
        int count;
        switch (sUriMatcher.match(uri)) {
            case NOTES:
                count = db.delete(NOTES_TABLE_NAME, where, whereArgs);
                break;

            case NOTE_ID:
                String noteId = uri.getPathSegments().get(1);
                count = db.delete(NOTES_TABLE_NAME, NoteColumns._ID + "=" + noteId
                    + (!TextUtils.isEmpty(where) ? " AND (" + where + ')' : ""), whereArgs);
                break;

            default:
               throw new IllegalArgumentException("Unknown URI " + uri);
       }

       getContext().getContentResolver().notifyChange(uri, null);
       return count;

    } catch (NullPointerException e) {
       // We really shouldn't get any null pointers!
       throw new IllegalStateException();
    }
} 
```

因为，虽然极不可能，但以下变量可能为 NULL 的可能性很小：

```
- mOpenHelper
- db
- getContext()
- getContentResolver() 
```

或者这是滥用`IllegalStateException`？我想这样做的原因是因为对我来说这个函数只是 throw 似乎是错误的`NullPointerExceptions`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:07:06.177

至少，用于`throw new IllegalStateException(e);`保留有关导致异常的原因的信息。

我个人会通过确保在我需要使用它们之前正确初始化所有必需的变量（mOpenHelper 等）来确保不会发生 NPE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:20:37.037

为什么不创建自己的异常？

```
public class MyCustomException extends NullPointerException {

    private static final long serialVersionUID = 1L;

    public Exception innerException;

    public MyCustomException() {}

    public MyCustomException(Exception innerException) {
        this.innerException = innerException;
    }
}

...

if (mOpenHelper == null){thrown new MyCustomException("mOpenHelper is null!");} 
```

或者，只是抓住 NPE，找出原因，然后抛出你自己的。

# javascript - 仅显示选项已从默认

> ID：13452578
> 
> 赞同：1
> 
> 时间：2012-11-19T11:12:03.970
> 
> 标签：javascript, selection, option, onchange, document.write

我想显示 div “remove-untill-change”（及其内容），但前提是 Select 元素的选项已从其默认值更改。

必须在选项更改之前删除 div，而不是隐藏，如“display:none”和“visibility:hidden”。

我在下面制作了以下脚本，但这似乎不起作用：

演示：http: [//jsfiddle.net/JZMYb/](http://jsfiddle.net/JZMYb/)

```
<select id="the-changer">
  <option value="first">Do you like pie?</option>
  <option value="second">Yes</option>
  <option value="third">No</option>
</select>

<script language="javascript" type="text/javascript">
function hideShow(){
    document.write('<div id="remove-untill-change"><select><option value="first">Do you like chocolate mouse pie?</option><option value="second">Yes</option><option value="third">No</option></select></div>');
    if (document.getElementsByTagName('select').onchange = true);
};
</script> 
```

任何人都知道适用于此示例的 Javascript（无 jQuery）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:19:49.493

实际上您的脚本正在运行，您只是忘记调用您的函数

```
<select id="the-changer" onchange='removeShow()'><!--call the function-->
  <option value="first">Do you like pie?</option>
  <option value="second">Yes</option>
  <option value="third">No</option>
</select>

<script language="javascript" type="text/javascript">
function removeShow(){
    document.write('<div id="remove-untill-change"><select><option value="first">Do you like chocolate mouse pie?</option><option value="second">Yes</option><option value="third">No</option></select></div>');
    if (document.getElementsByTagName('select').onchange = true);
};
</script> 
```

[演示](http://jsfiddle.net/JZMYb/1/)

*更新基于Comments* [Demo 2](http://jsfiddle.net/JZMYb/3/) ​</p>

# ios - Facebook 应用请求未在 iOS 中发送

> ID：13452582
> 
> 赞同：0
> 
> 时间：2012-11-19T11:12:12.303
> 
> 标签：ios, facebook, request

我将我的应用设置为发送 Facebook 应用请求。我得到弹出屏幕来选择朋友，当我点击发送按钮时，弹出窗口消失了。我还在控制台中打印了一个请求 ID。

虽然我选择发送请求的朋友还没有收到应用请求。

我有 facebook sdk 3.1，它适用于其他活动，例如发布到用户的墙上等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-24T06:32:17.647

确保您的 facebook 应用程序 ID 在开发人员页面和 xcode 中的信息下相同，启用沙盒模式并且必须在开发人员页面中填写画布 url [在 facebook 类别的应用程序下]。

```
NSString *facebookID = @"Your friend facebook id";
    NSMutableDictionary* params =
    [NSMutableDictionary dictionaryWithObject:facebookID forKey:@"to"];

    NSString *message = @"SOME_MESSAGE";
    NSString *title = @"TITLE";

    [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                  message:message
                title:title
                parameters:params handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                        if (error)
                    {
                    // Case A: Error launching the dialog or sending request.
                        NSLog(@"Error sending request.");
                    }
                    else
                    {
                        if (result == FBWebDialogResultDialogNotCompleted)
                    {
                    // Case B: User clicked the "x" icon
                        NSLog(@"User canceled request.");
                    }
                    else
                    {
                        NSLog(@"Request Sent. %@", params);
                    }
        }}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T13:27:40.623

可能的重复：

*   [Facebook iOS SDK - 向 facebook 用户发送应用请求](https://stackoverflow.com/questions/6453040/facebook-ios-sdk-sending-a-facebook-user-an-app-request)
*   [如何通过 facebook iOS sdk 向 facebook 好友发送 App 请求？](https://stackoverflow.com/questions/8148244/how-to-send-app-request-to-facebook-friends-through-facebook-ios-sdk)

第二个链接上的[答案](https://stackoverflow.com/questions/8148244/how-to-send-app-request-to-facebook-friends-through-facebook-ios-sdk)提供了有关如何解决此问题的分步过程。

# debugging - 如何强制 valgrind 只显示内存泄漏？

> ID：13452584
> 
> 赞同：7
> 
> 时间：2012-11-19T11:12:21.243
> 
> 标签：debugging, memory-leaks, valgrind

我想知道如何强制 Valgrind 工具只显示内存泄漏！

with `--leak-check=full`or`--leak-check=full`它显示内存泄漏（这很好）但也显示未初始化问题和/或条件跳转问题

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T11:45:39.400

您可以删除未初始化的值读取，包括用于跳转的`--undef-value-errors=no`. 我不知道你是否可以禁用其他类型的错误，例如堆损坏和双重释放。

# ruby-on-rails - 输入 mongoid 标准内的所有对象

> ID：13452586
> 
> 赞同：0
> 
> 时间：2012-11-19T11:12:27.150
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, mongoid

我有`params[:admin_ids]`下一个ID：

```
["50a62c8e1d41c8103f000001", "50a62af21d41c81502000006"] 
```

我可以用这些 id 将这些对象存储在数组中：

```
 admins = []
 for id in params[:admin_ids]
  admins << Admin.find("#{id}")
 end 
```

不，我的问题是：

**我如何加载这两个对象而不是数组，将这两个对象加载到一个** `Mongoid::Criteria`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:52:40.017

这个问题的解决方案是使用：

```
admins = Admin.criteria.for_ids(params[:admin_ids]) 
```

# linux - 内核（Linux）的编写模块，用于保存进程页面从删除到交换

> ID：13452587
> 
> 赞同：0
> 
> 时间：2012-11-19T11:12:31.313
> 
> 标签：linux, linux-kernel, kernel, kernel-module

需要保存从删除到交换的进程页面（用户部分！）。

我只需要在内核中执行此操作。（语言CI知道）

（也许在shrink_page_list 中插入钩子？）

我有进程 ID，需要在系统中保存和阈值物理内存量（我们填充，而未填充）。ID 和阈值写入 /proc、/dev 或 /sys。

如何解决这个问题？

看什么文件？

读什么教程？

也许有一些与此任务相关的示例。

信息：我正在编译 Debian Lenny 的内核，使用 Qemu 在我的 Ubuntu 上启动它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T18:36:40.343

请参阅 get_user_pages。[http://www.makelinux.net/ldd3/chp-15-sect-3](http://www.makelinux.net/ldd3/chp-15-sect-3)。

使用 get_user_pages，您可以获取任何您想要的页面并将其锁定在内存中。

更好的是，请查看 [http://lxr.free-electrons.com/source/mm/gup.c#L637上对源代码的评论](http://lxr.free-electrons.com/source/mm/gup.c#L637)

# vb.net - 在 vb.net 中向 ComboBox 添加静态和动态值

> ID：13452592
> 
> 赞同：0
> 
> 时间：2012-11-19T11:12:50.710
> 
> 标签：vb.net, winforms

我想在从下拉列表中显示的数据库中获取的其他记录之上添加“全部”选项。关于如何在 vb.net 2005 中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:59:01.450

Think around the problem. Instead of adding the item to the combobox, add the item to the dynamic datasource.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:18:47.313

即使在 VS 2005 中，该[`AppendDataBoundItems`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems%28v=vs.80%29.aspx)属性也是可用的。因此，您可以通过代码隐藏或声明方式在 aspx 上以编程方式添加此项目：

```
<asp:DropDownList
    runat="server"
    ID="DropDownList1"
    AppendDataBoundItems="true"
>
            <asp:ListItem
                Enabled="True"
                Selected="True"
                Text="All"
                Value="0"
            />
</asp:DropDownList> 
```

现在，您的所有数据绑定项目都会自动附加，并且不会删除第一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T05:15:47.740

下面为我​​工作！

向数据源添加新行

```
 Dim dr As DataRow = ds.Tables("cusPracticeLocation").NewRow
    'Add some data to it
    dr(0) = 0
    dr(1) = "All"
    ds.Tables("cusPracticeLocation").Rows.InsertAt(dr, 0) 
```

# ios - Objective-C 中的逗号

> ID：13452598
> 
> 赞同：3
> 
> 时间：2012-11-19T11:13:14.690
> 
> 标签：ios, objective-c, c, syntax, comma

我刚刚在另一个问题中看到了这一点，并认为逗号一定是错字

```
[controller release], controller = nil; 
```

我正在使用 ARC 所以没有使用`release`，但我自己测试了以下代码，发现它编译并运行良好。

```
NSObject *a = [NSObject new];
[a copy], a=nil; 
```

我的印象是逗号仅用于分隔列表和相同类型的多个赋值：

```
NSArray *a = @[@"1", @"two", /*etc*/]; 
int a, b, c, d; 
```

* * *

**实际问题：**

是不是很简单：逗号可以用来分隔命令？还有其他规则吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T11:16:37.880

*逗号运算符*是C 语言结构。

来自[维基百科](http://en.wikipedia.org/wiki/Comma_operator)：

> 在 C 和 C++ 编程语言中，逗号运算符（由记号 , 表示）是一个二元运算符，它计算其第一个操作数并丢弃结果，然后计算第二个操作数并返回此值（和类型）。逗号运算符在所有 C 运算符中具有最低优先级，并充当序列点。逗号标记作为运算符的使用不同于它在函数调用和定义、变量声明、枚举声明和类似构造中的使用，在这些构造中它充当分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:38:55.910

在您的代码中，逗号用作分号的替代品。`,`如果您使用或`;`在您的示例中，它没有任何区别。

有关详细信息，请参阅此问题：[Effect of using a comma instead of a semi-colon in C and C++](https://stackoverflow.com/q/2087026/550177)

# php - 带有内部连接的 PHP 数组选择

> ID：13452605
> 
> 赞同：0
> 
> 时间：2012-11-19T11:13:35.383
> 
> 标签：php, mysql

当我在我的数据库中执行 sql 查询时，我有一个内部连接以我想要的方式工作。

```
SELECT debate.date, school1.name, school2.name
FROM debate
INNER JOIN schools as school1
ON debate.homeid=school1.id
INNER JOIN schools as school2
ON debate.awayid=school2.id 
```

退货

```
date        name        name
19-01-2013  st Peters   St Simons 
```

当我尝试使用 php.ini 执行此操作时。我使用相同的选择语句并在下面添加。

```
foreach ($result as $row)
{
  $debates[] = array(
    'date' => $row['date'],
    'awayschool' => $row['name'],
    'homeschool' => $row['name'],
  );
}

<table>
<tr>
<td><?php echo $debate['date']; ?></td>
<td><?php echo $debate['name']; ?></td>
<td><?php echo $debate['name']; ?></td>
</tr>
</table> 
```

哪个返回

```
date        name        name
19-01-2013  st Peters   st Peters 
```

但是我希望它返回。

```
date        name        name
19-01-2013  st Peters   St Simons 
```

在我的阵列中，我尝试了几种不同的方法，例如替换

```
'awayschool' => $row['name'], 
```

和

```
'awayschool' => $row['school1.name'], 
```

但是当我这样做时，我得到一个错误，说未定义的索引。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:16:03.733

这里的问题是 school1.name 和 school2.name 都（在 php 中）都命名为 $row['name']，您可以使用 AS 获取一个来重命名它

```
SELECT debate.date, school1.name, school2.name AS name2
FROM debate
INNER JOIN schools as school1
ON debate.homeid=school1.id
INNER JOIN schools as school2
ON debate.awayid=school2.id 
```

然后将您的 foreach 循环更改为此

```
foreach ($result as $row)
{
  $debates[] = array(
    'date' => $row['date'],
    'awayschool' => $row['name'],
    'homeschool' => $row['name2'],
  );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:16:18.020

像这样修改您的查询

```
SELECT debate.date, school1.name "School1Name", school2.name "School2Name"
FROM debate
INNER JOIN schools as school1
ON debate.homeid=school1.id
INNER JOIN schools as school2
ON debate.awayid=school2.id; 
```

然后：

```
foreach ($result as $row)
{
  $debates[] = array(
    'date' => $row['date'],
    'awayschool' => $row['School1Name'],
    'homeschool' => $row['School2Name'],
  );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:19:54.940

尝试更改以下内容

```
<td><?php echo $debate['date']; ?></td>
<td><?php echo $debate['name']; ?></td>
<td><?php echo $debate['name']; ?></td> 
```

对此

```
 <td><?php echo $debate['date']; ?></td>
 <td><?php echo $debate['awayschool']; ?></td>
 <td><?php echo $debate['homeschool']; ?></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:17:02.627

只需为它们使用别名。就像`school1.name AS SCHLNAME1, school2.name AS SCHLNAME2` 这些索引将在您的数组中可用。然后它将是

```
'awayschool' => $row['SCHLNAME1'],
'awayschool' => $row['SCHLNAME2'] 
```

# javascript - 变量的值在循环内没有发生可预测的变化

> ID：13452606
> 
> 赞同：0
> 
> 时间：2012-11-19T11:13:35.810
> 
> 标签：javascript, jquery, closures

我的 javascript 循环无法正常工作。我只得到`$i`.

```
$(function() {
    var $count = $('#count').val();
    for (var $i = 1; $i < $count; $i++) {
        var btnRemove = $('#removeImage' + $i);
        var profilepictureid = $('#profilePitcureID' + $i).val();
        btnRemove.click(function() {
            alert($i);
        });
    }
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:15:44.870

当您的`click`事件处理程序执行时，`$i`已达到其最终值 ( `$count - 1`)。您需要`$i`在循环的每次迭代中捕获 的值。`$i`您可以通过引入一个在每次迭代时“关闭” 的值的闭包来做到这一点：

```
for(var $i=1; $i<$count; $i++) {
    var btnRemove=$('#removeImage'+$i); 
    var profilepictureid = $('#profilePitcureID'+$i).val();

    (function ($i) {
        btnRemove.click(function(){
            alert($i);
        });
    }($i));
} 
```

# c++ - 为什么根值没有被更新

> ID：13452608
> 
> 赞同：2
> 
> 时间：2012-11-19T11:13:41.093
> 
> 标签：c++, pointers, tree, binary-tree

这是在 BST中查找`ceil`and的代码。`floor`当我尝试插入数据时。每次插入调用转到第一个 if 条件时。即虽然我通过了指针。该值未在主函数中更新。有人能告诉我为什么会这样吗？

```
using namespace std;

struct Node
{
   int key;
   struct Node* right;
   struct Node* left;
};

struct Node* newNode(int key) 
{
   struct Node* newNode = (struct Node*)malloc(sizeof(struct Node));
   newNode->right = NULL;
   newNode->left = NULL;
   newNode->key = key;
   return newNode;
}

void insert(struct Node** root,int key) {
    if((*root) == NULL){
      (*root)= newNode(key);
      cout<<"entered first if condition"<<endl;
    }
    else if( (*root)->key <= key)
      insert(&((*root)->left),key);
    else
      insert (&((*root)->right),key);
}

int ceil( struct Node* root , int input) 
{
  if (root == NULL)
    return -1;
  if(root->key == input)
    return root->key;
  if(root->key < input)
    return ceil( root->right , input);
  else{
    int ceilnum = ceil(root->left, input);
    return (ceilnum >= input) ? ceilnum : root->key; 
  }
}

int main() 
{
  int size, temp, ceilfor;
  struct Node* root = NULL;
  cout<< "size" << endl;
  cin >> size;
  for( int i = 0; i< size; i++)
  {
    cin >> temp;
    insert(&root,temp);
  }
  cout<< root->key;
  cout<< root->left->key;
  cout << root->right->key;
  cout << "ceil for" << endl;
  cin >> ceilfor;
  cout<< ceil(root, ceilfor) <<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:54:13.537

它必须达到第一个条件（直接或间接通过递归调用）。

实际插入仅发生在第一个`if`块中，其他块将递归地到达第一个`if`块。

# python - M2Crypto 从函数返回一个 X509 对象

> ID：13452615
> 
> 赞同：1
> 
> 时间：2012-11-19T11:14:12.937
> 
> 标签：python, m2crypto

我做了这个函数，它需要一个 pkcs7 信封和颁发者公钥并返回证书。

```
def get_cert_from_pkcs7(pkcs7, cert_parent):
    """
    Take a pkcs7 and return a certificate.

    @type pkcs7: string
    @param pkcs7: The base64 of the PKCS7 envelop as 
    -----BEGIN PKCS7-----
    base64 of the pkcs7 envelop
    -----END PKCS7-----

    @type cert_parent : string
    @param cert_parent : Issuer certificate file path

    @rtype : M2Crypto.X509
    @return : The certificate

    """
    sm_obj = SMIME.SMIME()
    x509 = X509.load_cert(cert_parent) # public key cert used by the remote
                                       # client when signing the message
    sk = X509.X509_Stack()
    sk.push(x509)
    sm_obj.set_x509_stack(sk)

    st = X509.X509_Store()
    st.load_info(cert_parent) # Public cert for the CA which signed
                              # the above certificate

    sm_obj.set_x509_store(st)

    buf = BIO.MemoryBuffer(pkcs7)
    p7 = SMIME.load_pkcs7_bio(buf)

    signers = p7.get0_signers(sk)
    certificat = signers[0]
    return certificat 
```

问题是 certificat 是一个与 Python 绑定的 C 对象，当函数返回时，C 对象被垃圾收集，因此 _ptr 不存在，并且对证书的访问返回分段错误。

是否可以返回我的证书而没有任何错误（复制/克隆）？

# jquery - JQuery JSONP 轮询内存泄漏

> ID：13452617
> 
> 赞同：3
> 
> 时间：2012-11-19T11:14:24.820
> 
> 标签：jquery, memory-leaks, jsonp

我需要在高度动态的 Web 应用程序中执行 jsonp 长轮询，但是我遇到了大量的内存泄漏。最初，我使用了 Socket.IO 和 jsonp 传输，结果相同，然后设置了一个 JQuery 测试页面，以查看问题是否仅在 socket.io 库中本地化。我惊讶地发现，从 JQuery 进行 jsonp 轮询也会导致相同的结果：在 IE9 中，内存增长非常快（不到 10 分钟），从大约 80-90 MB 增加到超过 1.8 GB :(。

他是客户端的测试代码：

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">        
    <script type="text/javascript">
        $(document).ready( function() {
            var doPoll = function() {
                $.ajax({
                    type: 'GET',
                    url: "http://<server-url>/jquery-jsonp/server.php",
                    cache: false,
                    async: true,
                    crossDomain: true,
                    dataType: "jsonp",
                    success: function (data, status) {
                        console.log("Received response"+data);
                        doPoll();
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        // access denied
                    }
                });
            }

            doPoll();     
        });
    </script>
</head> 
```

这是虚拟服务器响应：

```
<?php echo $_GET['callback']."(".json_encode(array("status"=>"success")).")"; 
```

如您所见，这里没有什么特别之处。关于导致此问题的原因和可能的解决方法有什么想法吗？

请求需要跨域执行，我们必须支持 IE8/9。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:16:19.540

尝试`doPoll()`每隔几秒调用一次，如下所示：

```
success: function (data, status) {
    console.log("Received response"+data);
    setTimeout(doPoll, 10000); // 10 second wait before next request sent
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:18:01.103

您无需在收到回复的那一刻进行投票。与常规计算机操作相比，HTTP 传输可能较慢，但它们通常仍比人类反应快一点。至少延迟几秒钟是个好主意。

也就是说，应该注意的是，HTTP 轮询充其量是相当不可靠的。以 HTML facebook 聊天作为其不可靠程度的指标。

**编辑：**

> 伙计们，感谢您的回复。延迟下一个请求不是此应用程序的选项

那么你不应该为此使用网页。改为编写桌面或移动应用程序。如果您的回答是“这也不是一个选择”。那么不存在可行的选择。HTTP/HTML/Javascript 根本*不*适合“每秒向用户交付的高度动态、关键的业务更新”，我怀疑它永远不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:56:55.487

所有的建议都是有效的，即使你需要每半秒轮询一次服务器，你也应该添加几毫秒的超时来给 javascript 一个小的暂停，这样它就可以开始清理内存了。

另一个问题是 JSONP，因为这会在 DOM 中创建带有响应的新标签。您应该开始删除未使用的节点，否则您的页面大小将无限增长并最终耗尽内存。

# intellij-idea - 如何将 IntelliJ IDEA 测试插件更新到 TestNG 6.8 版？

> ID：13452618
> 
> 赞同：9
> 
> 时间：2012-11-19T11:14:24.967
> 
> 标签：intellij-idea, testng

目前，我正在使用带有[Maven的](http://en.wikipedia.org/wiki/Apache_Maven)[TestNG](http://en.wikipedia.org/wiki/TestNG) 6.8 ，但是当我通过[IntelliJ IDEA](http://en.wikipedia.org/wiki/IntelliJ_IDEA)插件运行测试时，它使用的是旧版本的 TestNG。

如何使 IntelliJ IDEA（版本 11.1.4）与 TestNG 6.8 一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T11:27:28.337

1.  下载[完整的 TestNG 6.8 压缩包](http://testng.org/testng-6.8.zip)。
2.  删除`IDEA\plugins\testng\lib\testng-jdk15.jar`。
3.  从下载的 zip复制`testng-6.8.jar`到`IDEA\plugins\testng\lib`.

对于 IDEA 12+：替换`testng.jar`而不是`testng-jdk15.jar`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-15T20:43:44.590

这是一个更好的方法：在“项目结构”->“模块”->“依赖项”中，单击左下角的“+”以从预下载的 jar 文件或 Maven 存储库中的库添加新的依赖项。请记住删除旧的 TestNG 版本，或将新版本移到该版本之上。

# android - 如何在 Android 中显示拉丁词？

> ID：13452621
> 
> 赞同：0
> 
> 时间：2012-11-19T11:14:46.003
> 
> 标签：android, sqlite, character

我是一名新的 Android 开发人员。我在我的应用程序中使用拉丁字体，但我无法让它工作并继续获得一个`?`字符。我的代码在下面，使用 sqlite 数据库。我必须从 Sqlite 数据库中获取文本，并且每个特殊的拉丁字符（即 à、ò、ù、è...）都显示为带有“？”的黑色方块 里面。

我怎样才能正确显示这个？

```
private void displayTestQuestion() {
    resetEverything();
    stats.setText(Integer.toString(totalRightQuestions)+"/"+Integer.toString(totalNumberOfQuestions));

    String questionText = questionCursor.getString(0);
    question.setText(Html.fromHtml(questionText));
    adjectiveNumber = questionCursor.getString(1);
    adjectiveCase = questionCursor.getString(3);
    adjectiveGender = questionCursor.getString(2);
} 
```

我的模拟器屏幕：

![在此处输入图像描述](../Images/622c39ed3a90da998806dcfc65f323f5.png)

我也试过这段代码：

```
private void displayTestQuestion() {
    resetEverything();
    stats.setText(Integer.toString(totalRightQuestions)+"/"+Integer.toString(totalNumberOfQuestions));

    String questionText = questionCursor.getString(0);
    Typeface font = Typeface.createFromAsset(questionCursor.getString(0), "fonts/LATINWD.TTF");
    //question.setText(Html.fromHtml(questionText));
    question.setText((CharSequence) font);
    adjectiveNumber = questionCursor.getString(1);
    adjectiveCase = questionCursor.getString(3);
    adjectiveGender = questionCursor.getString(2);
} 
```

但这给了我以下错误：

> Typeface 类型中的 createFromAsset(AssetManager, String) 方法不适用于参数 (String, String)。

我使用了 Sqlitehelper 类，我的代码如下：

```
public class VocabTesterDatabaseHelper extends SQLiteOpenHelper {

    private static String DB_PATH = "data/data/com.VoacabTester/databases/";

    private static String DB_NAME = "vocabdb.db";

    private SQLiteDatabase vocabDatabase;

    private final Context vocabContext;

    public VocabTesterDatabaseHelper(Context context) {
        super(context, DB_NAME, null, 3);
        this.vocabContext = context;
    }

    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();

        if (dbExist) {

        } else {
            this.getReadableDatabase();
            copyDataBase();
        }

    }

    private boolean checkDataBase() {

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

    private void copyDataBase() throws IOException {
        try {

            InputStream myInput = vocabContext.getAssets().open(DB_NAME);
            String outFileName = DB_PATH + DB_NAME;

            // Open the empty db as the output stream
            OutputStream myOutput = new FileOutputStream(outFileName);

            byte[] buffer = new byte[1024];
            int length;
            while ((length = myInput.read(buffer)) > 0) {
                myOutput.write(buffer, 0, length);
            }
            myOutput.flush();
            myOutput.close();
            myInput.close();
        } catch (IOException e) {
            Log.v("data", e.toString().concat("sql"));
        }
    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        vocabDatabase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    }

    public Cursor getFoundationTierQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FoundationTierVocabularyQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    };

    public Cursor getHigherTierQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HigherTierQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyFirstConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions1stConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasySecondConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions2ndConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyThirdConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions3rdConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyFourthConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestions4thConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyMixConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM VerbQuestionsallConjugation ORDER BY Random()",
                null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getEasyIrregularConjugationVerbs() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM IrregularVerbsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFirstDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FirstDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getSecondDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM SecondDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getThirdDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM ThirdDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFourthDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FourthDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getFifthDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM FifthDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getNounsAllDeclensionNounsQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM NounsDeclensionNounsQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getis_ea_idQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IsEaIdQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor gethic_haec_hocQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HicHaecHocQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getille_illa_illudQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IlleIllaIlludQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getqui_quae_quodQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM QuiQuaeQuodQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getIdem_eadem_idemQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IdemEademIdemQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getipse_ipsa_ipsumQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IpseIpsaIpsumQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getalius_alia_aliudQuestions() {
        Cursor cur;
        cur = vocabDatabase
                .rawQuery(
                        "SELECT * FROM AliusAliaAliudQuestions ORDER BY Random()",
                        null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAdjectiveQuestions() {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AdjectivesQuestions ORDER BY Random()", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFirstDeclensionNounsQuestion(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FirstDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getSAnswerecondDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM SecondDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerThirdDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM ThirdDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFourthDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FourthDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerFifthDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM FifthDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerNounsAllDeclensionNounsQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM NounsDeclensionNounsQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweris_ea_idQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IsEaIdQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerhic_haec_hocQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM HicHaecHocQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerille_illa_illudQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IlleIllaIlludQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerqui_quae_quodQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM QuiQuaeQuodQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerIdem_eadem_idemQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IdemEademIdemQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweripse_ipsa_ipsumQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM IpseIpsaIpsumQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnsweralius_alia_aliudQuestions(String question) {
        Cursor cur;
        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AliusAliaAliudQuestions WHERE Question LIKE '"
                        + question + "'", null);
        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    public Cursor getAnswerAdjectiveQuestions(String question) {
        Cursor cur;

        cur = vocabDatabase.rawQuery(
                "SELECT * FROM AdjectivesQuestions WHERE Question LIKE '"
                        + question + "'", null);

        cur.moveToFirst();
        vocabDatabase.close();
        return cur;
    }

    @Override
    public synchronized void close() {

        if (vocabDatabase != null)
            vocabDatabase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:04:28.463

我的猜测是代替“？”的字符 在“邦？” 是带有 MACRON 的“ō” U+014D 拉丁文小写字母 O，因为这确实是唯一合理的可能性。拉丁语本身仅使用简单的 A 到 Z 字母书写，但在字典和语法中，长音符号通常用于元音上方，以表示元音发音很长。

字符“ō”在实际的 Android 设备上显示 OK，但您的模拟器可能存在字体问题（即，它使用的字体不包含该字符）。更有可能的是，存在字符编码问题。如果没有进一步的信息（例如，使用哪个模拟器，字符在 HTML 中如何表示，HTML 文档的编码是如何声明的，以及实际编码是什么），几乎无法对其进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T04:28:14.083

我不知道您在代码中做了什么以及为什么使用 HTML ？但我可以假设你需要这个简单的代码。请参阅下面的修改方法。

```
private void displayTestQuestion() {
    resetEverything();
    stats.setText(Integer.toString(totalRightQuestions)+"/"+Integer.toString(totalNumberOfQuestions));

    String questionText = questionCursor.getString(0);
    Typeface font = Typeface.createFromAsset(getContext().getAssets(), "fonts/LATINWD.TTF");
    question.setTypeface(font);
    question.setText(questionText);
    adjectiveNumber = questionCursor.getString(1);
    adjectiveCase = questionCursor.getString(3);
    adjectiveGender = questionCursor.getString(2);
} 
```

# jquery - 使用 Jquery 循环 - 在检索数据时，订单丢失

> ID：13452622
> 
> 赞同：0
> 
> 时间：2012-11-19T11:14:46.317
> 
> 标签：jquery, for-loop

我有一个数组，它有 4 个子数组，我试图从每个数组中检索数据，延迟 scond，以及从数组中检索每个元素延迟 1 秒。

我做了一个函数，它可以工作，但数据的顺序不正确，任何人纠正这个函数以获得正确的有序数据，每个延迟 1 秒。

我也知道我的功能更大一些。任何给我一个非常短的方法来达到同样的结果。

功能：

```
var ar = [

    [
        Object= { el:'li',  x:0,  y:294},
        Object= { el:'li',  x:150,  y:294},
        Object= { el:'li',  x:300,  y:294}
    ],

    [
        Object= { el:'li',  x:0,  y:196},
        Object= { el:'li',  x:150, y:196},
        Object= { el:'li',  x:300, y:196}
    ],

    [
        Object= { el:'li',  x:0,  y:98},
        Object= { el:'li',  x:150,  y:98},
        Object= { el:'li',  x:300,  y:98}
    ],

    [
        Object= { el:'li',  x:0,  y:0},
        Object= { el:'li',  x:150,  y:0},
        Object={ el:'li',  x:300,  y:0}
    ]

]

    var length = ar.length;

for(i=0;i<length;i++){

    (function(i){

 setTimeout(function(){

     var minLength = ar[i].length;

     for(j=0;j<minLength;j++){
         (function(d){
             setTimeout(function(j){
                 console.log(ar[d][d])
             },1000*d)             

         })(j)
     }

    },2000*i)

    })(i)
} 
```

我只是安慰结果。

[jsfiddle](http://jsfiddle.net/Pxq7g/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:48:24.070

如果你想每秒选择一个元素，你可以链接回调。在每个元素之后，为该行中的下一个元素设置动画，或者，如果没有，则为下一个（非空）行中的第一个元素设置动画。这样做的好处是任何延迟都会传播到后续动画：

```
var ar /* = ... */;

var i = 0;
var j = 0;

(function next(){
   console.log(ar[i][j]);
   j++;
   while(ar[i] && !ar[i][j]){ //can be optimised if every row has at least one element
     i++;
     j=0;
   }
   if(ar[i]){
     setTimeout(next);
   }
 })(); 
```

如果每个动画步骤恰好需要一秒钟，那么最好附加`next`到动画的完成处理程序以确保动画不会重叠（jQuery 支持）。

```
(function next(){
   j++;
   while(ar[i] && !ar[i][j]){ //can be optimised if every row has at least one element
     i++;
     j=0;
   }
   $(/*...*/).animate({/*...*/}, 1000, ar[i] ? next : null);
 })(); 
```

# ruby - 相当于 Ruby 中的“通过”

> ID：13452624
> 
> 赞同：54
> 
> 时间：2012-11-19T11:14:51.953
> 
> 标签：ruby, keyword

在 python 中有一个`pass`关键字用于定义一个空函数、条件、循环，... Ruby 有类似的东西吗？

蟒蛇示例：

```
def some_function():
    # do nothing
    pass 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-19T11:37:07.347

不，Ruby 中没有这样的东西。如果您想要一个空块、方法、模块、类等，只需编写一个空块：

```
def some_method
end 
```

就是这样。

在 Python 中，每个块都*必须*包含*至少*一个语句，这就是为什么你需要一个“假”的 no-op 语句。Ruby 没有语句，*只有*表达式，块包含零表达式是完全合法的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-07-05T04:25:25.157

`nil`可能相当于它：

```
def some_function
    nil
end 
```

使用简单的单行语句忽略异常时，它基本上很有帮助：

```
Process.kill('CONT', pid) rescue nil 
```

而不是使用块：

```
begin
    Process.kill('CONT')
rescue
end 
```

并且丢弃`nil`会导致语法错误：

```
> throw :x rescue
SyntaxError: (irb):19: syntax error, unexpected end-of-input
        from /usr/bin/irb:11:in `<main>' 
```

**笔记：**

`def some_function; end; some_function`返回`nil`。

`def a; :b; begin; throw :x; rescue; end; end; a;`也返回`nil`。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-19T11:14:51.953

你总是有`end`陈述，所以`pass`不需要。

红宝石示例：

```
def some_function()
    # do nothing
end 
```

# 红宝石 3​​.0

[`end`从 Ruby 3.0 开始，现在支持所谓的“](https://www.ruby-lang.org/en/news/2020/12/25/ruby-3-0-0-released/) less”方法定义——我们不再需要`end`每个方法定义都包含语句。这意味着像上面的例子这样表达空方法的最简洁的方式现在可以说是这样的：

```
def some_function = nil 
```

或者，一直有一个使用令人讨厌的分号的更丑陋的单行选项：

```
def some_function; end 
```

请注意，除了如何编写代码之外，这并没有真正改变第一个解决方案的任何内容。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-05-26T19:57:43.803

**单行函数和类**

```
def name ; end

class Name ; end 
```

适用于**伪代码**。

正如之前回答的那样，ruby 中的所有内容都是一个**表达式**，因此可以将其**留空**。

```
def name
end

class Name
end 
```

**喜欢 pass 关键字的 python 程序员的 ruby​​ 替代品**

```
def pass
end

# OR

def pass; end 
```

请注意，在 Ruby 中这样做是没有用的，因为它允许使用空方法，但如果您热衷于 Ruby `pass`，这是最简单和最干净的选择。

现在你可以在任何**块**中使用这个函数，它的工作原理是一样的。

```
def name
   pass
end

# OR

class Name
   pass
end 
```

请记住，pass 是一个返回函数，因此如何使用它取决于您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T16:53:23.390

如果您希望能够使用任意数量的参数自由地使用它，您必须对参数有一个小技巧：

```
def gobble *args, &pr; end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T14:40:34.193

正如其他人所说，在 Ruby 中，您可以将方法体留空。但是，这可能与 Python 使用`pass`.

在 Ruby 中，一切都是对象。缺少值，某些编程语言用 Ruby 表示`null`或`nil`实际上是`NilClass`Ruby 中的一个对象。

考虑以下示例（在 中`irb`）：

```
class A
  def no_op
  end
end

A.new.no_op
# => nil
A.new.no_op.class
# => NilClass
A.new.no_op.nil?
# => true 
```

这是 Ruby 的[NilClass 文档](https://ruby-doc.org/core-2.4.0/NilClass.html)供参考。

我相信 Python 的`pass`主要用途是克服语言的语法限制（缩进），尽管我在 Python 方面没有那么丰富的经验。

# javascript - 在greasemonkey中用javascript创建一个cookie

> ID：13452626
> 
> 赞同：5
> 
> 时间：2012-11-19T11:14:58.063
> 
> 标签：javascript, cookies, greasemonkey

我正在尝试用greasemonkey创建一个cookie，以阻止弹出一个窗口（在窗口弹出一个cookie后，窗口不会弹出很多次......这是代码

```
function setCookie(c_name, value, expiredays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate()+expiredays);
    document.cookie = c_name + "=" + escape(value) + ((expiredays==null) ?
        "" :
        ";expires="+exdate.toUTCString());
}

var cookie_names = [
    'showDrushimPopUnderUserClick',
    'showDrushimPopUnder308'
];

for (var i in cookie_names) {
    setCookie(cookie_names[i], 1, 0);
} 
```

但是没有创建cookie....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:21:42.747

如果您设置的 cookie 的`expires`值等于或早于当前系统时钟，它实际上***会删除***命名的 cookie（除非`path`or`domain`不同，或者它是“安全”cookie - 此处均不适用）。

这个：

```
setCookie(cookie_names[i], 1, 0); 
```

使该函数设置一个具有即时过期值的 cookie，从而有效地删除具有该名称的任何 cookie。

要实际设置新 cookie，请使用：

```
setCookie(cookie_names[i], 1, null); 
```

这将导致您的代码设置会话 cookie——这可能是您想要的。

或使用：

```
setCookie(cookie_names[i], 1, 1); 
```

设置一个在一天内过期的cookie。

# symfony-1.4 - 在动作中保存 HTML

> ID：13452633
> 
> 赞同：1
> 
> 时间：2012-11-19T11:15:42.443
> 
> 标签：symfony-1.4

我有一个`viewSuccess.php`呈现一些 HTML 的模板

我要做的是尝试捕获此 HTML 并将其保存为 PDF。

我有一个名为`executeSavePage`当前保存 PDF 的操作。

我可以在视图模板中使用类似`ob_start()`and的东西`ob_get_contents()`，但是我如何将它发送到我的 savePage 操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:45:05.923

您可以使用该[`get_partial()`](http://www.symfony-project.org/api/1_4/PartialHelper#method_get_partial)功能（部分助手的一部分）

```
$html = $this->get_partial('view',array('item1' => 'value1')); 
```

`$html`将包含部分渲染的结果

# mysql - MySql 数据库没有上传数据它给出这个错误

> ID：13452636
> 
> 赞同：2
> 
> 时间：2012-11-19T11:15:50.440
> 
> 标签：mysql, sqlalchemy, mysqldump

SQL查询：

```
 INSERT INTO `lance_attachments` (`file_id`, `file_name`, `file_content`, `file_type`, `file_size`)
    VALUES (19, 'P1010147.JPG', 0xffd8ffe1384545786966000049492a00080000000c000e010200200000009e0000000f01020018000000be0000001001020011000000d60000001201030001000000010000001a01050001000000ee0000001b01050001000000f60000002801030001000000020000003101020008000000fe00000032010200140000001e010000130203000100000002000000698704000100000026020000a5c407000401000032010000960400004f4c594d505553204449474954414c2043414d455241202020202020202020004f4c594d505553204f50544943414c20434f2e2c4c544400583230302c443536305a2c433335305a000000000000000048000000010000004800000001000000763735312d383000000000000000000000000000000000000000000000000000303030303a30303a30302030303a30303a3030005072696e74494d0030323530000014000100140014000200010000000300880000000700000000000800000000000900000000000a00000000000b00d00000000c00000000000d00000000000e00e80000000001010000000101ff00000002018300000003018300000004018300000005018300[...] 
```

MySQL 说：文档

```
#2006 - MySQL server has gone away 
```

我无法在我的 wamp 服务器上上传我的数据库它显示此错误帮助我已经更改了我的最大大小和超时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:42:15.043

看起来它被超过某个限制的 SQL 语句的大小阻塞了。

尝试通过不使用 SQL 并使用[LOAD](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)命令来加载数据：

```
LOAD DATA INFILE 'somefile' INTO lance_attatchments 
```

如果您的数据没有所有列，请在表上创建一个视图，该视图仅包含您拥有 dara 的列并加载到视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:53:57.010

max_allowed_pa​​cket 的默认设置非常低 - 可能是一个原因。将 my.cnf（在 [mysqld] 下）中的 max_allowed_pa​​cket 提高到 8 或 16M 通常可以修复它。

```
[mysqld]
max_allowed_packet=16M 
```

或者
，如果您有一个导致超时的查询，您可以通过执行以下命令来设置此变量：

```
SET @@GLOBAL.wait_timeout=300;
SET @@LOCAL.wait_timeout=300;  -- OR current session only 
```

其中 300 是您认为查询可能花费的最长时间的秒数。

# google-chrome - 无法在 Selenium 中启动 Chrome 浏览器

> ID：13452637
> 
> 赞同：1
> 
> 时间：2012-11-19T11:15:51.753
> 
> 标签：google-chrome, selenium

我正在使用启动 chrome 浏览器

```
selenium = new DefaultSelenium("localhost", 4444, "*googlechrome",
                    "https://example.com/"); 
```

但是我收到一个带有以下消息的弹出窗口并且它冻结了：

> *管理员已在此系统上安装了 Google Chrome，它可供所有用户使用。系统级谷歌浏览器现在将取代您的用户级安装。*

控制台日志直到冻结点：

```
Server started
16:06:37.792 INFO - Command request: getNewBrowserSession[*googlechrome, https://example.com/, ] on session null
16:06:37.796 INFO - creating new remote session
16:06:38.081 INFO - Allocated session beb925cd0418412dbe6319fedfb28614 for https://example.com/, launching...
16:06:38.082 INFO - Launching Google Chrome... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:21:25.087

尝试提供您的 chrome exe 的位置以及这样的浏览器名称：

```
selenium=new DefaultSelenium("localhost", 4444, "*googlechrome C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe", "https://example.com"); 
```

# jquery - 动态删除最后一个border-right

> ID：13452642
> 
> 赞同：1
> 
> 时间：2012-11-19T11:16:06.803
> 
> 标签：jquery, slider, border

我使用了这个滑块，但有一个细节不符合我的要求。

问题是我希望不显示最后一个边框，但是当我进入滑块时，我希望更新它，所以我只得到最右边的边框没有显示。

我的意思是，例如这是第一张幻灯片：`a|b|c|d|`并且我想要`a|b|c|d`，然后当我单击右箭头时，我想要获得`b|c|d|a`（没有最后一个边框“|”）。

我希望我能很好地解释我的实际意思:)

[http://jsfiddle.net/5AdgA/1/](http://jsfiddle.net/5AdgA/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:36:57.633

这些是你的元素

```
 <ul id="box_ul">
   <li><a href="#">a</li>
   <li><a href="#">b</li>
   <li><a href="#">c</li>
   <li><a href="#">d</li>
</ul> 
```

为了从最后一个元素中删除边框，您可以简单地使用 css，如下所示：

# box_ul li:last-child {border-right: 0 }

只需确保将这一行（css 规则）放在：#box ul li{} this style rule 之后

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:31:37.977

我在[这里](http://jsfiddle.net/arzKJ/)更新了你的 JSFiddle以展示它的工作方法。

本质上，每次更新，它都会将`last-child`类添加到 :last li。它在 jQuery 中执行此操作而不使用 CSS 伪选择器的原因纯粹是为了浏览器支持。如果您需要支持像 IE 6/7/8 这样的浏览器，那么这就是这样做的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:32:40.383

将你的切换`border-right`到 a`border-left`然后只是`:first-child`。您可以使用`last-child`, 但`first-child`IE8 也支持。

[http://jsfiddle.net/amustill/5AdgA/6/](http://jsfiddle.net/amustill/5AdgA/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:33:21.997

你可以这样做

```
$(document).ready(function() {
    $('#box_ul li:first').before($('#box_ul li:last')); 
    $('#box_ul li').css('border-right','1px solid #d5d5d5');
    $('#box_ul li:last').css('border-right','none');
   $('#right_scroll_clienti').click(function(){
       var item_width = $('#box_ul li').outerWidth() + 10;
       var left_indent = parseInt($('#box_ul').css('left')) - item_width;
       $('#box_ul:not(:animated)').animate({'left' : left_indent},500,function(){    
            $('#box_ul li:last').after($('#box_ul li:first')); 
            $('#box_ul').css({'left' : '0px'});
           $('#box_ul li').css('border-right','1px solid #d5d5d5');
    $('#box_ul li:last').css('border-right','none');
       }); 

   });
   $('#left_scroll_clienti').click(function(){
       var item_width = $('#box_ul li').outerWidth() + 10;
       var left_indent = parseInt($('#box_ul').css('left')) + item_width;
       $('#box_ul:not(:animated)').animate({'left' : left_indent},500,function(){    
            $('#box_ul li:first').before($('#box_ul li:last')); 
            $('#box_ul').css({'left' : '0px'});
           $('#box_ul li').css('border-right','1px solid #d5d5d5');
    $('#box_ul li:last').css('border-right','none');
       });
    });
});​ 
```

[演示](http://jsfiddle.net/5AdgA/7/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T11:36:54.597

如果这满足您的需求，请检查：http: [//jsfiddle.net/5AdgA/9/](http://jsfiddle.net/5AdgA/9/)

我只是更改了一些 css 属性并为 ul 添加了一个 div

```
 .slidewrapper{width:935px; overflow:hidden;} //added on css class for the slider and some little changes, not much. 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-19T11:29:36.227

```
#box ul li:last-of-type{
    border-right: 0;
} 
```

# batch-file - 自动邮件发送错误

> ID：13452650
> 
> 赞同：0
> 
> 时间：2012-11-19T11:16:27.410
> 
> 标签：batch-file, smtp, jakarta-mail

我有一项服务，每天午夜后向我的应用程序的所有用户发送邮件。

当我手动运行批处理文件时，邮件没有任何错误或异常。但是，当我在午夜安排任务发布时，会出现这样的异常-

```
sending failed::javax.mail.MessagingException: Unknown SMTP host: smtp.nowcsm.com; nested exception is:java.net.UnknownHostException: smtp.nowcsm.com 
```

这是我的批处理文件-

```
echo %PATH%
set CLASSPATH=D:\Tomcat\webapps\TESTSMPP\WEB-INF\classes;D:\SMPP\LIB\datedFileAppender-1.0.2.jar;D:\SMPP\LIB\log4j-1.2.11.jar;D:\SMPP\LIB\imap.jar;D:\SMPP\LIB\activation.jar;D:\SMPP\LIB\smtp.jar;D:\SMPP\LIB\mailapi.jar;D:\smpp\lib\commons-dbcp-1.2.1.jar;D:\smpp\lib\commons-pool-1.3.jar;D:\SMPP\LIB\jtds-1.2.jar;D:\SMPP\LIB\sqljdbc.jar;.;
echo %CLASSPATH%
java -Xms40m -Xmx128m com.credensys.general.QuotaAndDailyReport1 >> D:\SMPPServices\DailyEmailLogs\Systemout.log
pause; 
```

请帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:01:11.923

当您手动运行它时，您是否在运行批处理作业的同一台机器上运行它？

“未知主机”通常意味着您给它的主机名不正确，或者名称服务配置不正确并且无法查找该主机名。也许您位于阻止直接访问 Internet 的防火墙后面？

# php - PHP-MySQL：多个分组和同时

> ID：13452651
> 
> 赞同：0
> 
> 时间：2012-11-19T11:16:28.760
> 
> 标签：php, mysql, group-by, while-loop

我是使用 PHP 和 MySql 自学成才的人。我面临一个我无法理解的问题：我有一个包含以下字段的数据库： - 日期 - 小时 - 电子邮件 - 产品 - 数量 每次客户购买产品时，我都会在数据库中记录上面列出的信息。（每个产品一条线。）。如果客户同时购买多个产品，则日期、时间和电子邮件相同。

我的愿望：如果日期、时间和电子邮件相同，并且为这三条信息购买的所有产品，我会将日期、时间和电子邮件收集在一个表格中。

我的问题如下：我使用查询：SELECT * FROM CUSTOMER GROUP BY 日期、时间、电子邮件“然后我用“while”在一个表中分发。

MySQL组正确记录“日期”、“小时”和“电子邮件”，但产品显示不一致。

这是我的代码：

```
$query_customer = "SELECT * FROM CLIENT GROUP BY date, hour, email";
mysql_query($query_customer) or die('Error customer table '.$query_customer.' <br/>'.mysql_error());
$result_customer=mysql_query($query_customer);

    $row_customer = '';
    $name_product = '';
    $quantity_product = '';

    while($distribution_customer = mysql_fetch_array($result_customer))
    {
    $email = '<span>'.$distribution_customer['email'].'</span>';
    $date = $distribution_customer['date'].' at '.$distribution_customer['hour'];
    $quantity_product .= '(x'.$distribution_customer['quantity'].')';
    $name_product .= '<span>'.$distribution_customers['product'].'</br> '.$quantite_produit.'</span>';

    $row_customer .= '
            <tr>
                <td>'.$date.'</td>
                <td>'.$email.'</td>
                <td>'.$name_product.'</td>
            </tr>
        ';
    }
        <table>
        <?php echo $row_customer ?>
        </table> 
```

我想我离解决方案不远，但我找不到攻角。也许有人会帮助我看得更清楚？我应该使用“group_concat”吗？

非常感谢您的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:38:53.853

您面临的问题是由于数据库中缺乏规范化。例如，如果你有一个`table`（不是你写的数据库）的字段`"username", "password", "email", other user-related columns, "product name", "product description", "product price", other product-related columns, "quantity", "date" etc`，你的数据库中会有很多冗余信息，当需要更新这些数据时你会很头疼。请注意，这是一个夸张的例子。

为了防止数据库中的信息冗余，您需要设计您的表，使它们至少为 3NF（参见[http://en.wikipedia.org/wiki/Third_normal_form](http://en.wikipedia.org/wiki/Third_normal_form)）。您的数据库必须包含 4 个表：

```
user (id, username, password, email, ...)
product (id, productName, productDescription, price, ...)
cart (id, user_id, date, totalValue, totalNumberOfItems, delivered, ...)
cart_items (id, cart_id, product_id, quantity, ...) 
```

...并从这些表中选择一些东西是这样的：

`select * from user, product, cart, cart_items where user.id=cart.user_id and product.id=cart_items.product_id and cart.id=cart_items.cart_id and cart.delivered=0 group by cart.id sort by user.username asc;`

问候

# android - 无法启动 VideoView 的活动组件

> ID：13452654
> 
> 赞同：0
> 
> 时间：2012-11-19T11:16:43.470
> 
> 标签：android, android-mediaplayer

我正在尝试使用 VideoView 以全屏模式显示 youtube 视频。我在实现之前编写了一小段代码，但我得到了`nullPointerException`. 下面是我写的示例代码。

我在 AndroidManifest.xml 文件中输入了权限..

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我在 main.xml 中创建了一个 videoview 布局

```
<VideoView 
  android:id="@+id/VideoView"
  android:layout_height="fill_parent"
  android:layout_width="fill_parent" /> 
```

我的源文件看起来像这样..

```
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
VideoView vv = (VideoView) findViewById(R.id.VideoView);                        
MediaController mc=new MediaController(this);
mc.setEnabled(true);
vv.setVideoURI(Uri.parse("http://www.youtube.com/v/Iq81rUGQofk"));
vv.setMediaController(mc);
vv.requestFocus();
vv.showContextMenu();
vv.start(); 
setContentView(R.layout.main);
} 
```

这是抛出异常。

```
11-19 03:11:50.558: E/AndroidRuntime(11488): FATAL EXCEPTION: main
11-19 03:11:50.558: E/AndroidRuntime(11488): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.mydemoapp/com.example.mydemoapp.MainActivity}: java.lang.NullPointerException
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1999)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2024)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread.access$600(ActivityThread.java:126)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.os.Looper.loop(Looper.java:137)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread.main(ActivityThread.java:4479)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at java.lang.reflect.Method.invokeNative(Native Method)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at java.lang.reflect.Method.invoke(Method.java:511)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at dalvik.system.NativeStart.main(Native  Method)
11-19 03:11:50.558: E/AndroidRuntime(11488): Caused by: java.lang.NullPointerException
11-19 03:11:50.558: E/AndroidRuntime(11488):    at com.example.mydemoapp.MainActivity.onCreate(MainActivity.java:30)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.Activity.performCreate(Activity.java:4628)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-19 03:11:50.558: E/AndroidRuntime(11488):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1963) 
```

如果我的处理方法不正确，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:20:37.057

你`VideoView vv = (VideoView) findViewById(R.id.VideoView);`在打电话之前使用，`setcontentView()`因此你得到`nullPointer Exception`.

`Videoview`设置视图后使用您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:19:12.487

`setContentView(R.layout.main);`在调用 super.onCreate() 之后移动。喜欢以下

```
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);

setContentView(R.layout.main);

VideoView vv = (VideoView) findViewById(R.id.VideoView);                        
MediaController mc=new MediaController(this);
mc.setEnabled(true);
vv.setVideoURI(Uri.parse("http://www.youtube.com/v/Iq81rUGQofk"));
vv.setMediaController(mc);
vv.requestFocus();
vv.showContextMenu();
vv.start(); 

} 
```

# ruby-on-rails - Ruby 新手 strftime Time.Now

> ID：13452658
> 
> 赞同：0
> 
> 时间：2012-11-19T11:17:09.033
> 
> 标签：ruby-on-rails, ruby, strftime

我有以下用红宝石写的

```
t = Time.now
    t.strftime("%Y-%d-%m")

SCHEDULER.every '1m', :first_in => 0 do |job|
  send_event('gmail_gh', {current: gmail.inbox.count(:after => Date.parse(t)), older: gmail.inbox.count}) 
```

但我得到这个错误

```
scheduler caught exception:
can't convert Time into String
/var/dashing/cdmdash/jobs/gmail_gh.rb:21:in `parse'
/var/dashing/cdmdash/jobs/gmail_gh.rb:21:in `block in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/rufus-scheduler-2.0.17/lib/rufus/sc/jobs.rb:231:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/rufus-scheduler-2.0.17/lib/rufus/sc/jobs.rb:231:in `trigger_block'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/rufus-scheduler-2.0.17/lib/rufus/sc/jobs.rb:191:in `block in trigger'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/rufus-scheduler-2.0.17/lib/rufus/sc/scheduler.rb:416:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/rufus-scheduler-2.0.17/lib/rufus/sc/scheduler.rb:416:in `block in trigger_job' 
```

我认为它与 t 变量有关，它不是一个 truing，我是 Ruby 新手，所以我有点卡住了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:22:28.463

如果您查看 gem 文档，您会看到 :after 和 :before 参数采用 YYYY-MM-DD 格式的日期。

来自 gem 自述文件：

```
gmail.inbox.count(:after => Date.parse("2010-02-20"), :before => Date.parse("2010-03-20"))
gmail.inbox.count(:on => Date.parse("2010-04-15")) 
```

您的代码在 YYYY-DD-MM 中传递，这可能会导致错误。

**编辑**

当您在 datetime 对象上调用 strftime 时，它​​不会修改该对象 - 仅根据您提供的格式返回字符串表示法。

结果， Date.parse(t) 仍然得到 Time.now 是一个参数。

尝试这个：

```
t = Time.now.strftime("%Y-%m-%d")
Date.parse(t) 
```

# javascript - 如何从nodejs回调函数返回值？

> ID：13452660
> 
> 赞同：4
> 
> 时间：2012-11-19T11:17:09.983
> 
> 标签：javascript, node.js, callback

```
mturk_ops.block = function(callback){

mongodb.collection(collectionName, function(err, collection){

    collection.distinct('workerId',function(err,result){
        var result1 = [];
        console.log(result.length);
        for(var i=0; i< result.length;i++){

            console.log(result[i]);

          result1[result[i]] =  collection.count({
                'workerId':result[i],
                "judgementStat" : "majority"
            },function(err, count){
                //  console.log(count);
              //  globals.push(count);
                return count ;
                // console.log( worker + ' majority : ' + count);

            });

        }

    console.log(result1);
    });

}); 
```

}

在这里，我试图打印'result1'，但它总是打印具有未定义值的数组。'result1' 是一个分配在回调函数范围之外的数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T11:20:49.757

您不能从异步回调中返回值。回调通常在声明它的函数返回后的某个时间执行（该函数将在调用异步方法后继续执行）。回调函数无处可*返回*。这是一个简单的例子：

```
function doSomething() {
    var x = 10;
    doSomethingAsynchronous(function () {
        // This is a callback function
        return 30; // Where would I return to?
    });
    x += 10; // Execution continues here as soon as previous line has executed
    return x; // doSomething function returns, callback may not have run yet
} 
```

如果您需要依赖异步方法的结果，则需要将需要它的代码移动到回调中。

# iphone - 如何在同一个标 签中使用不同的颜色

> ID：13452662
> 
> 赞同：2
> 
> 时间：2012-11-19T11:17:17.030
> 
> 标签：iphone, objective-c, uilabel

我要写的问题已经用两个解决了`UILabel`。我正在寻找一些优化方法。我有一个字符串`(example : hello world )`需要以`UILabel`不同的颜色显示。就像`"hello in red color " and "world in green color"`

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:35:10.040

假设您有一个名为 colouredLabel 的文本标签，并且您想用红色写 hello，用绿色写 world。
在 iOS 6 中，您可以创建属性字符串并将其设置为标签的属性文本：

```
 NSMutableAttributedString* str=[[NSMutableAttributedString alloc]initWithString: @"Hello world"];
    [str setAttributes: @{ NSForegroundColorAttributeName : [UIColor redColor] }  range: NSMakeRange(0, 5) ];
    [str setAttributes: @{ NSForegroundColorAttributeName : [UIColor greenColor] }  range: NSMakeRange(6, 5) ];
    coloredLabel.attributedText= str; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:21:33.810

从 iOS 6 开始，`UILabel`有一个`attributedText`属性。将`NSAttributedString`具有所需内容和格式属性的适当属性分配给此属性，您就完成了。最简单的方法是在 Interface Builder 中，您只需将标签的文本从“Plain”切换到“Attributed”。完成此操作后，您可以直接在 IB 中设置格式属性。

（正如我所说，此解决方案仅适用于 iOS 6.0+）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:37:04.770

如果您正在寻找与 iOS 4 的向后兼容性，您可以使用`NIAttributedLabel`Nimbus。 [http://nimbuskit.info/](http://nimbuskit.info/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:32:57.380

是的，您还可以使用如下图像图案设置颜色..

```
UIColor *LableColor=[[UIColor alloc]initWithPatternImage:[UIImage imageNamed:@"anyImageName"]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T14:55:20.013

[https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)是如果您需要定位低于 iOS 6 的方法！

# java - Java中的字节递增操作

> ID：13452664
> 
> 赞同：6
> 
> 时间：2012-11-19T11:17:26.457
> 
> 标签：java

当我们尝试使用增量运算符和加法运算符来增加字节变量时会发生什么。

```
public class A {
    public static void main(final String args[]) {
        byte b = 1;

        b++;

        b = b + 1;
    }
} 
```

请给我来源，我们可以在哪里找到释放出来的这些小东西？请帮帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T11:22:48.583

**不同之**`implicit casting`处在于`++`运算符 from `int`to中有一个`byte`，而`explicitly`如果您使用，则必须这样做`b = b + 1`

```
b = b + 1;  // Will not compile. Cannot cast from int to byte 
```

你需要一个明确的演员：

```
b = (byte) (b + 1); 
```

而`b++`工作正常。运算符自动将`++`value 转换`b + 1`为`int`a `byte`。

* * *

[这在JLS](http://docs.oracle.com/javase/specs/jls/se7/html/index.html) - [§15.26.2 复合赋值运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)中明确列出： -

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T) ((E1) op (E2))，其中 T 是 E1 的类型，除了 E1 只计算一次

* * *

请注意，操作`b + 1`会给你一个类型的结果`int`。因此，这就是为什么您需要在第二个作业中进行显式转换的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:18:51.523

发生什么了？实际上`b = b + 1`不会编译。

您必须将其显式转换为`byte`，因为`b + 1`计算结果为`int`。并且不能保证 a`int`可以放入 a`byte`中。

`b = (byte)(b + 1);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:18:24.263

变量将增加两次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:19:07.373

b++; b=b+1；是等价的并且会产生相同的字节码。

在 main 方法完成之前，b 将等于 3。

编辑：实际上它们并不等效： b=b+1; 是错误的，应该是 b=(byte) (b+1); [强制转换为字节，否则为 int]

# .net - 使用 SpreadsheetGear 将电子表格作为电子邮件附件发送

> ID：13452667
> 
> 赞同：4
> 
> 时间：2012-11-19T11:17:28.630
> 
> 标签：.net, email-attachments, memorystream, system.net.mail, spreadsheetgear

一位客户要求我增强他们的一个应用程序，以便发送一封包含 Excel 电子表格的电子邮件。他们碰巧有一本 SpreadsheetGear (2009) 的旧副本，所以我认为如果我使用它可能会节省时间。

碰巧的是，SpreadsheetGear 非常适合实际创建电子表格，但我无法将其作为电子邮件附件发送。只是想知道是否有人这样做过？理论上应该很简单，我目前的代码如下：

```
 /// <summary>
    /// Creates an email attachment based upon the inbound workbook
    /// </summary>
    /// <param name="workbook">The workbook</param>
    /// <returns>an email Attachment</returns>
    private static Attachment CreateAttachment(string id, IWorkbook workbook)
    {
        // Open up a memorystream and save out to it
        System.IO.MemoryStream memoryStream = new System.IO.MemoryStream();
        workbook.SaveToStream(memoryStream, SpreadsheetGear.FileFormat.OpenXMLWorkbook);

        return new Attachment(memoryStream, id + ".xls", "application/vnd.ms-excel");
    } 
```

其中 workbook 是一个完全填充的 SpreadsheetGear 工作簿。在此之后，附件对象被推入一个`System.Net.Mail.MailMessage`对象使用

```
MailMessage.Attachments.Add(attachment); 
```

我看到的是：

*   电子邮件发送正常，并附有正确名称的附件
*   但是附件是空的

在开发环境中，我在其中放置了一些调试代码

```
workbook.SaveAs("c:\\test.xls", SpreadsheetGear.FileFormat.OpenXMLWorkbook); 
```

它产生了所需的电子表格，作为一个文件。但很明显，因为我最终只是以电子方式发送这个，如果可以的话，我会尽快避免写入磁盘。关于我哪里出错的任何指示？

谢谢，皮特

（最后应该补充一点，升级到最新的SpreadsheetGear不是一种选择，它要么是这种方法，要么是手动完成！环境是VS2008，.net 3.5）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:40:16.673

我尝试使用您问题中的代码。它对我有两个小的修改。

1) 由于您要保存为 OpenXMLWorkbook 格式，因此我将扩展名更改为 .xlsx 而不是 .xls。

2）我在保存 workbook.SaveToStream 方法后添加了以下代码行。

```
memoryStream.Seek(0, System.IO.SeekOrigin.Begin); 
```

这会将位置设置为流的开头。当我在没有它的情况下尝试编写代码时，当我尝试打开 Excel 附件时收到错误消息。

没有这些修改，我得到了错误，但我从来没有得到一个空的附件。我正在使用最新版本的 SSG，但我不明白为什么在这种情况下这很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T11:41:26.750

步骤1

下载 ClosedXML dll 并添加对项目的引用

第2步。下载 DocumentFormat.OpenXML 并添加对项目的引用

使用 System.IO；

使用 ClosedXML.Excel；

公共无效发送邮件（）{

DataTable dt = smp.GetDataTable("选择 l.EMPID 作为 [EmpID],e.Emp_Name 作为 [EmpName], l.LDate 作为 [ApplicationDate],l.StartDate 作为 [FromDate],l.EndDate 作为 [ToDate] 从 LeaveTable ");

XLWorkbook wb = new XLWorkbook();

var ws = wb.Worksheets.Add(dt, sheetName);

System.IO.MemoryStream memoryStream = new System.IO.MemoryStream(); wb.SaveAs(memoryStream);

memoryStream.Seek(0, System.IO.SeekOrigin.Begin);

System.Net.Mail.Attachment attachment = new System.Net.Mail.Attachment(memoryStream, sheetName + ".xlsx", "application/vnd.ms-excel");

SendEmail(To, To1, 主题, 正文, 附件);

}

公共静态 bool SendEmail（字符串 pTo，字符串 pTo1，字符串 pSubject，字符串 pBody，System.Net.Mail.Attachment 附件）{

```
 MailMessage myMail = new MailMessage();

         ConfigurationSettings.AppSettings["emailid"].ToString();

            SmtpSection settings =(SmtpSection) ConfigurationManager.GetSection("system.net/mailSettings/smtp");
            var email = settings.Network.UserName;

            bool ssl = Convert.ToBoolean(ConfigurationManager.AppSettings["ssl"].ToString());

            myMail.From = new MailAddress(email);
            myMail.To.Add(pTo);
            if (pTo1 != "")
            {
                myMail.CC.Add(pTo1);
            }
            myMail.Subject = pSubject;
            myMail.Body = pBody;
            myMail.Priority = MailPriority.High;
            myMail.Attachments.Add(attachment);

            SmtpClient client = new SmtpClient();
            client.EnableSsl = ssl;

            client.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
            client.Send(myMail);
            LogMessage.LogMsg = "Mailsent to:" + pTo + myMail.Body;
            LogMessage.CreateLogFile();

            return true;

        } 
```

# php - 无法在 laravel 中使用 curl 发布

> ID：13452669
> 
> 赞同：1
> 
> 时间：2012-11-19T11:17:38.723
> 
> 标签：php, laravel

我正在学习laravel。我正在努力`Rest API`。我已经`controller`使用 curl 发布如下

```
public function post_index()
{

        $cat = Input::json();
        $dbCat = new Category();
        $dbCat->code = $cat->code;
        $dbCat->name = $cat->name;
        $dbCat->save();
        return $dbCat->toJson();

} 
```

当我尝试使用 curl 发布时，我收到以下错误

```
Message:

Trying to get property of non-object
Location:

C:\xampp\htdocs\NewBlog\application\controllers\api\category.php on line 22 
```

堆栈跟踪是

```
#0 C:\xampp\htdocs\NewBlog\laravel\laravel.php(42): Laravel\Error::native(8, 'Trying to get p...', 'C:\xampp\htdocs...', 22)
#1 C:\xampp\htdocs\NewBlog\application\controllers\api\category.php(22): Laravel\{closure}(8, 'Trying to get p...', 'C:\xampp\htdocs...', 22, Array)
#2 [internal function]: Api_Category_Controller->post_index()
#3 C:\xampp\htdocs\NewBlog\laravel\routing\controller.php(325): call_user_func_array(Array, Array)
#4 C:\xampp\htdocs\NewBlog\laravel\routing\controller.php(285): Laravel\Routing\Controller->response('index', Array)
#5 C:\xampp\htdocs\NewBlog\laravel\routing\controller.php(165): Laravel\Routing\Controller->execute('index', Array)
#6 C:\xampp\htdocs\NewBlog\laravel\routing\route.php(153): Laravel\Routing\Controller::call('api.category@in...', Array)
#7 C:\xampp\htdocs\NewBlog\laravel\routing\route.php(124): Laravel\Routing\Route->response()
#8 C:\xampp\htdocs\NewBlog\laravel\laravel.php(167): Laravel\Routing\Route->call()
#9 C:\xampp\htdocs\NewBlog\public\index.php(34): require('C:\xampp\htdocs...')
#10 {main} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:05:55.853

由于您使用 Input::json() 填充 $cat，因此您需要确保发送的 curl 请求具有将内容类型设置为 application/json 的标头

curl 并不是真正为发送 json 而构建的，您可以发送普通的帖子字段吗？

真的...我们需要有关您的情况的更多信息，例如您用于发送 curl 请求的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T18:00:48.360

如果它按照另一个答案中的指示工作，并且您现在遇到 json 包装器“加倍”的问题，那么我建议使用 eloquent_to_json() 而不是 json_encode() [http://laravel.com/api /function-eloquent_to_json.html](http://laravel.com/api/function-eloquent_to_json.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T06:33:30.020

在不知道第 22 行是什么的情况下，我的建议是检查它`$cat`实际上是一个对象。它最有可能抛出该错误，因为它是`null`，或者正如错误所说，是一个非对象。

# c++ - 在我的场景中，哪种路径搜索算法的哪个实现最快？

> ID：13452672
> 
> 赞同：0
> 
> 时间：2012-11-19T11:17:51.713
> 
> 标签：c++, c, path-finding

我正在寻找一种路径搜索算法，它可以让我找到已知点 A 和 B 之间的最短路径，这些点是节点，并且连接到其他节点。

在我的情况下，大约有 20,000 个节点，其中每个节点最多可以有 16 个连接（链接），这些连接（我的意思是，如果节点 A 连接到节点 B，这并不意味着节点 B 连接到节点A，这是用于右车道驾驶和左车道驾驶，用于高速公路）

为避免出现问题，这是我对连接（以及定向）的意思的图像：

![在此处输入图像描述](../Images/fdcb7afdf6996d4fad7a0f181e9651a3.png)

示例地图： ![在此处输入图像描述](../Images/3d301a033b9ccc0b480895d55188ea18.png)

从 A 到 D 最短的路线是 A->C->D，从 D 到 A 就是 D->A

我知道每个链接之间的所有距离，并且没有距离是负数。（因为我知道我的节点的所有 XYZ 位置）

简而言之：

- 对于我的情况，C 或 C++（我可以同时使用）中最快的算法是什么？

-当然我需要检索路线，但我还需要（计算/或）检索从 A 点到 B 点的距离）

- 有没有可以满足我需要的图书馆

- 可选：是否有一个带有多线程（支持）的库（如果有，是哪一个）？

- 是否有可用的代码示例？

为什么我问这个问题是因为我想改进一些非常慢的代码。我想通过重写代码来做到这一点，因为目前使用的是 Dijkstra 而不是针对这种情况。

我目前使用的代码在这里：

[https://gpb.googlecode.com/files/RouteConnector_180.zip](https://gpb.googlecode.com/files/RouteConnector_180.zip)

这里也是代码在现实生活中的一个示例用法：

[http://www.youtube.com/watch?v=EHj7GavsbqQ&t=40](http://www.youtube.com/watch?v=EHj7GavsbqQ&t=40)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:11:24.747

A* 已被证明是解决一般问题的最快的寻路算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:24:04.617

试试[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra_algorithm)。[Boost::Graph](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/index.html)也[实现](http://www.boost.org/doc/libs/1_52_0/libs/graph/doc/dijkstra_shortest_paths.html)了它。

# oop - 在 MATLAB 中覆盖超类方法和访问修饰符

> ID：13452674
> 
> 赞同：11
> 
> 时间：2012-11-19T11:17:58.180
> 
> 标签：oop, matlab, inheritance, overriding, access-modifiers

考虑以下简单的类层次结构：

### 是

```
classdef A < handle
    methods (Access = protected)    %# protected vs. private
        function foo(obj)
            disp('class A')
        end
    end
end 
```

### BM

```
classdef B < A
    methods (Access = public)
        function foo(obj)
            disp('class B')
        end
    end
end 
```

B 类继承自 A 类，并且应该将受保护的`foo`方法重写为公共方法。

如果我们尝试实例化派生类，我们会得到以下错误：

```
>> b=B();
Error using B
Method 'foo' in class 'B' uses different access permissions than its superclass 'A'. 
```

奇怪的是，如果`foo`在超类中被定义为私有方法，`A`当我们调用被覆盖的方法时，代码就可以正常工作：

```
>> clear classes
>> b=B(); b.foo()
class B 
```

那么这是 MATLAB OOP 实现中的限制/错误，还是这种行为背后有充分的理由？（代码在 R2012b 上测试）

* * *

作为比较，在 Java 中，规则规定您不能降低子类中方法的可见性，但可以增加它，其中：

```
(weakest) private < package < protected < public (strongest) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T12:59:35.510

这似乎是 Matlab 的限制。我已经尝试了所有属性组合。每当属性不同时，Matlab 都会抛出错误，除非 A 的方法是私有的，在这种情况下，B 中的属性无关紧要。

![在此处输入图像描述](../Images/68910f4fd938d9ae75fcbec774b3a147.png)

换句话说，除非 A 中的方法是私有的，否则 A 和 B 中方法的属性必须相同。我想这在某种程度上确实是有道理的，因为 TMW 说“如果方法对子类可见，则属性必须相同；如果方法对子类不可见，则子类可以做任何他们喜欢的事情”。

# regex - 正则表达式验证多个域名

> ID：13452676
> 
> 赞同：0
> 
> 时间：2012-11-19T11:17:59.887
> 
> 标签：regex

我正在尝试使用正则表达式（来自 Javascript）来验证域名列表。例如，如果用户输入：

```
facebook.com
stackoverflow.com
apple.com 
```

...正则表达式应该验证OK。然而，

```
facebook.com
clearlynotadomainname
apple.com 
```

...应该验证失败。

我正在使用这个正则表达式：

`^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$`

这适用于第一行文本，但一旦用户输入第一个 CR/LF，表达式就会失败。是否可以让正则表达式遍历或解析字符串中的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:42:36.190

为什么不简单地在换行符上拆分字符串？假设您想忽略空行：

```
function testString(str) {
  var regex = /^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}(\n|$)/
  var split = str.split('\n')

  for(var i = 0; i < split.length; ++i) {
    if(split[i] != ''&& !regex.test(split[i]))
      return false
  }

  return true
}

testString('facebook.com\nstackoverflow.com\napple.com')
=> true
testString('facebook.com\nclearlynotadomainname\napple.com')
=> false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-22T12:41:24.947

要验证 [,;] 域（仅），您可以使用：

```
^\s*(?:(?:\w+(?:-+\w+)*\.)+[a-z]+)\s*(?:[;,]\s*(?:(?:\w+(?:-+\w+)*\.)+[a-z]+)\s*)*$ 
```

在不同的情况下进行了测试。

# c# - 尝试上传文件时出错

> ID：13452679
> 
> 赞同：1
> 
> 时间：2012-11-19T11:18:13.440
> 
> 标签：c#, asp.net, file-upload

我有一个文件上传控件和一个按钮：

```
<asp:FileUpload ID="venfileupld" runat="server" />
<asp:Button ID="venupld1" runat="server" Text="Upload" OnClick="venupld1_Click" /> 
```

在按钮单击事件中，我这样做：

```
string name = venfileupld.PostedFile.FileName;

    string filepath = Server.MapPath("upload_excel/") + name;
    venfileupld.PostedFile.SaveAs(filepath);

 writetoven(); 
```

但这给了我一个错误。

我的第一个问题是为什么我在线上出现错误：

```
string name = venfileupld.PostedFile.FileName; 
```

上传者没有任何文件是 null 。

第二个问题是我如何获得可以传递给名为的函数的文件：

```
 writetoven(); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:30:10.920

在将文件名分配给变量“name”之前，您必须通过其属性“HasFile”检查上传控件是否具有文件，您可以从以下链接中看到最佳示例：http: [//asp-net-example.blogspot.in/2008/10 /fileupload-control-example.html](http://asp-net-example.blogspot.in/2008/10/fileupload-control-example.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:29:40.983

> 您是否将 ASP.NET Ajx 与 UpdatePanel 一起使用？...是的，我正在使用 ajax 和 updatepanel

[FileUpload](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)在`UpdatePanel`. 您必须使用[ASPNET AJAX 控件工具包](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)中的[AsyncFileUpload](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/asyncfileupload/asyncfileupload.aspx)。

在这里查看更多详细信息：http: [//knowledgebaseworld.blogspot.de/2009/02/file-upload-not-working-with-update.html](http://knowledgebaseworld.blogspot.de/2009/02/file-upload-not-working-with-update.html)

您应该处理控件的`UploadedComplete`事件`AsyncFileUpload`：

```
private static List<string> allowedExtensions = new List<string>(new string[] {
".xls",
".xlsx"
});

protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    if (e.state == AjaxControlToolkit.AsyncFileUploadState.Success) {
        string fileExt = System.IO.Path.GetExtension(e.filename);
        if (allowedExtensions.Contains(fileExt)) {
            string fileName = System.IO.Path.GetFileName(e.filename);
            string dir = Server.MapPath("upload_excel/");
            string path = Path.Combine(dir, fileName);
            AsyncFileUpload1.PostedFile.SaveAs(path);
            AsyncFileUpload1.FileContent.Close();
        } else {
            // wrong extension
        }
    } else {
        // log and show error
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:46:12.283

尝试以下：

后面的代码：

```
protected void venupld1_Click(object sender, EventArgs e)
    {
        string name = venfileupld.FileName;
        string filepath = Server.MapPath("~/upload_excel/") + name;
        venfileupld.PostedFile.SaveAs(filepath);
     } 
```

内联代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server"  UpdateMode="conditional">
    <ContentTemplate>
    <asp:FileUpload ID="venfileupld" runat="server" />
    <asp:Button ID="venupld1" runat="server" Text="Upload" OnClick="venupld1_Click" />
    </ContentTemplate>
    <Triggers>
    <asp:PostBackTrigger ControlID="venupld1" />
    </Triggers>
 </asp:UpdatePanel> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T11:25:02.100

首先，确保您`enctype=multipart/form-data`在表单标签中使用。这将允许将文件上传控件发布到 asp.net 服务器，并且您将开始接收`venfileupld.PostedFile`对象和其他属性中的数据。

使用`venfileupld.HasFile`和`venfileupld.ContentLength`属性确保文件已上传并且不是 0kb。

- 更新 -

基于您正在使用更新面板的事实，您可以尝试添加回发触发器，例如

```
<触发器>
  <asp:PostBackTrigger ControlID="btnUploadControlId" />
 </触发器>

```

-----更新结束----

如果这不能解决您的问题，请添加更多详细信息。

# ios - NSString 自动字体大小

> ID：13452680
> 
> 赞同：0
> 
> 时间：2012-11-19T11:18:14.843
> 
> 标签：ios, nsstring, core-graphics, cgcontext

可能重复。我使用字符串的 drawInRect 方法。如何找到适合指定矩形的字体大小？例如，如果使用大小为 16 的字体并且我尝试在 10x10 矩形中绘制它，那么字符串就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:21:35.847

如果您想知道带有字体的文本的大小，请使用以下命令：

```
float s = [myFont fontWithSize:25]; 
```

有了这个大小，您可以将其与矩形的大小进行比较，并检查它是否更大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:22:50.423

使用`CGSize size = [yourString sizeWithFont: [UIFont systemFontOfSize:15]]`直到达到小于所需的尺寸。

# sql - SQL-如何使用表值编写动态 where cluse

> ID：13452682
> 
> 赞同：1
> 
> 时间：2012-11-19T11:18:20.803
> 
> 标签：sql, sql-server, tsql, dynamic-sql

我有一个临时表，例如：#temp321

```
select * from #temp321 
```

它的返回值就像

```
Field1|Field2|Field3|....|FieldN|
--------------------------------
Value1|Value2|Value3|....|ValueN| 
```

此#temp321 表是从另一组查询自动生成的。因此，#temp321 表的列数可以变化（1-25）。但它们将始终是单行。现在我需要使用这些值编写一个 where 语句。
示例：
`where Field1='Value1' and Field2='Value2' and Field3='Value3'.....FieldN='ValueN'..(depends on number of column available into the #temp321 table)`
我是如何做到的。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:20:52.360

你可以这样做：

```
SELECT *
FROM Othertable t1
INNER JOIN #temp321 t2 ON  t1.Field1 = t2.field1 
     AND t1.Field2 = t2.field2 
     AND t1.Field3 = t2.field3; 
```

* * *

**更新：**这是我能做的：

## `JOIN`这两个表动态而不是`WHERE`子句：

```
DECLARE @DynamicJOINCondition AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

;WITH cte
AS
(
    SELECT t1.COLUMN_NAME 'T1', t2.COLUMN_NAME 'T2'
    FROM 
    (
       SELECT 
         ordinal_position , 
         column_name
       FROM information_schema.columns 
       WHERE table_name LIKE '#temp321%'
    ) t1
    INNER JOIN
    (
       SELECT 
         ordinal_position , 
         column_name
       FROM information_schema.columns 
       WHERE table_name = 'othertable'
    ) t2 ON t1.ORDINAL_POSITION = t2.ORDINAL_POSITION
)
SELECT @DynamicJOINCondition = STUFF((SELECT distinct ' AND ' +  
                     ' t1.' + T1 + ' = ' + 't2.' + T2
               FROM cte
               FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'), 4,1,'');

-- Remove the first AND
SELECT @DynamicJOINCondition = RIGHT(@DynamicJOINCondition, 
                                     LEN(@DynamicJOINCondition) - 4);

SET @query = 'SELECT COUNT(*) ' +
             ' FROM  #temp321 t1 INNER JOIN Othertable t2 ON ' +
               @DynamicJOINCondition;

EXECUTE(@query); 
```

**这是如何工作的？**

首先，我`JOIN`通过从临时表中获取列名列表和从另一个表中获取列名的另一个列表来动态生成条件。请注意它。我使用了 columns `ORDINAL_POSITION`'s，它是存储在表中的元数据，`information_schema.columns`用于数据库中的每一列，来比较两个表中的列名列表。例如，具有普通位置 1 的列将与第二个表中具有普通位置 1 的列名连接，依此类推。因此，您必须注意临时表列的位置，以便以与第二个表的其他列列表相同的顺序列出的列。

* * *

**更新2：**

## 动态生成`WHERE`子句：

如果您想`WHERE`动态生成子句而不是 using `JOIN`，在这种情况下将需要更多工作。像这样：

```
DECLARE @DynamicWHERECondition AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

;WITH cte
AS
(
    SELECT t1.COLUMN_NAME 'T1', t2.COLUMN_NAME 'T2'
    FROM 
    (
       SELECT
         ordinal_position, 
         column_name
       FROM information_schema.columns 
       WHERE table_name LIKE '#temp321%'
    ) t1
    INNER JOIN
    (
      SELECT 
        ordinal_position, 
        column_name
      FROM information_schema.columns 
      WHERE table_name = 'othertable'
    ) t2 ON t1.ORDINAL_POSITION = t2.ORDINAL_POSITION
), cte2 
AS
(
    SELECT t2, fieldvalue
    FROM cte t1
    INNER JOIN
    (
        SELECT FieldName, fieldvalue
        FROM
        (
            SELECT field1, field2, field3, field4
            FROM #temp321
        ) p
        UNPIVOT
        (
            fieldvalue FOR FieldName IN (field1, field2, field3, field4)
        ) AS u
    ) t2 ON t1.T2 = t2.FieldName
) 
SELECT @DynamicWHERECondition = STUFF((SELECT distinct ' AND ' +  
                      T2 + ' = ' + '''' + fieldvalue + '''' 
               FROM cte2
               FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'), 4,1,'');

SELECT @DynamicWHERECondition = RIGHT(@DynamicWHERECondition, LEN(@DynamicWHERECondition) - 4);
SET @query = 'SELECT COUNT(*) ' +
             ' FROM Othertable t2 WHERE ' + @DynamicWHERECondition;

EXECUTE(@query); 
```

**这是如何工作的？**

由于临时表仅包含一行，其值将用于形成动态创建的`WHERE`子句，因此我`UNPIVOT`将这一行编辑为两列：`fieldname: field1, field2, ...`和`fieldvalue: value1, value2, ...`。

后来，我将这个未透视的列与我在第一个查询中使用的两个表连接起来：

```
 SELECT
      ordinal_position, 
      column_name
    FROM information_schema.columns 
    WHERE table_name LIKE '#temp321%'; 
```

和：

```
 SELECT 
      ordinal_position, 
      column_name
    FROM information_schema.columns 
    WHERE table_name = 'othertable'; 
```

连接条件与第一种情况的条件相同，由两个表中列的序号位置决定。

* * *

## 动态生成`WHERE`子句，动态生成`UNPIVOT`临时表的值：

但是以前的方法有一个很大的问题。You need to unpivot table temp 的选择如下所示：

```
SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(column_name)
                  FROM information_schema.columns 
                  WHERE table_name LIKE '#temp321%'
                  FOR XML PATH(''), TYPE
                  ).value('.', 'NVARCHAR(MAX)'), 1, 1, '');

SET @dynamicunpivotquery = ' SELECT FieldName, fieldvalue ' +
                           ' FROM ' +
                           ' ( SELECT * FROM #temp321 ' +
                           ' ) p ' +
                           ' UNPIVOT ' +
                           ' ( ' + 
                           '   fieldvalue FOR FieldName IN (' + @cols + ' ) ' +
                           ' ) AS u '; 
```

但是，为了稍后在我们的查询中使用动态未透视表，您必须创建一个临时表：

```
DECLARE @unpivotedTable TABLE(FieldName varchar(50), fieldvalue VARCHAR(50));
INSERT INTO  @unpivotedTable
exec(@dynamicunpivotquery); 
```

这样您就可以像这样使用它：

```
SELECT t2, fieldvalue
FROM cte t1
INNER JOIN  @unpivotedTable t2 ON t1.T2 = t2.FieldName 
```

这是带有动态反透视的更新后的 sql：

```
DECLARE @DynamicWHERECondition AS NVARCHAR(MAX);
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @dynamicunpivotquery AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);
DECLARE @unpivotedTable TABLE(FieldName varchar(50), fieldvalue VARCHAR(50));

SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(column_name)
                  FROM information_schema.columns 
                  WHERE table_name LIKE '#temp321%'
                  FOR XML PATH(''), TYPE
                  ).value('.', 'NVARCHAR(MAX)'), 1, 1, '');

SET @dynamicunpivotquery = ' SELECT FieldName, fieldvalue ' +
                           ' FROM ' +
                           ' ( SELECT * FROM #temp321 ' +
                           ' ) p ' +
                           ' UNPIVOT ' +
                           ' ( ' + 
                           '   fieldvalue FOR FieldName IN (' + @cols + ' ) ' +
                           ' ) AS u ';

INSERT INTO  @unpivotedTable
exec(@dynamicunpivotquery);

;WITH cte
AS
(
    SELECT t1.COLUMN_NAME 'T1', t2.COLUMN_NAME 'T2'
    FROM 
    (
       SELECT 
         ordinal_position, 
         column_name
       FROM information_schema.columns 
       WHERE table_name LIKE '#temp321%'
    ) t1
    INNER JOIN
    (
      SELECT 
        ordinal_position, 
        column_name 
      FROM information_schema.columns 
      WHERE table_name = 'othertable'
    ) t2 ON t1.ORDINAL_POSITION = t2.ORDINAL_POSITION
), cte2 
AS
(
    SELECT t2, fieldvalue
    FROM cte t1
    INNER JOIN  @unpivotedTable t2 ON t1.T2 = t2.FieldName
) 
SELECT @DynamicWHERECondition = STUFF((SELECT distinct ' AND ' +  
                      T2 + ' = ' + '''' + fieldvalue + '''' 
               FROM cte2
               FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)'), 4,1,'');

SELECT @DynamicWHERECondition = RIGHT(@DynamicWHERECondition, 
                                      LEN(@DynamicWHERECondition) - 4);
SET @query = 'SELECT COUNT(*) ' +
             ' FROM Othertable t2 WHERE ' + @DynamicWHERECondition;

EXECUTE(@query); 
```

# php - PHP Shuffle Array 提高输出？

> ID：13452686
> 
> 赞同：1
> 
> 时间：2012-11-19T11:18:35.517
> 
> 标签：php

我正在使用以下教程来学习如何在 PHP 中洗牌，但输出很难看。如何更改随机播放的输出以更符合我想以列表格式显示的投票？

我正在使用以下教程来学习如何做到这一点：

[http://www.w3schools.com/php/func_array_shuffle.asp](http://www.w3schools.com/php/func_array_shuffle.asp)

```
<?php
$my_array = array("a" => "Dog", "b" => "Cat", "c" => "Horse");

shuffle($my_array);
print_r($my_array);
? 
```

但是输出很难看： Array ( [0] => Cat [1] => Dog [2] => Horse )

如何使随机播放数组看起来像这样漂亮？

```
<ul>
<li><input id="pollRadioButton1" name="pollAnswerID" type="radio" value="1" /> Answer1 for Poll1</li>
<li class="pollChart pollChart1">&nbsp;</li>
<li><input id="pollRadioButton2" name="pollAnswerID" type="radio" value="2" /> Answer2 for Poll1</li>
<li class="pollChart pollChart2">&nbsp;</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:23:31.747

```
<?php

    $my_array = array("a" => "Dog", "b" => "Cat", "c" => "Horse");
    shuffle($my_array);

?>
<ul>
    <?php foreach ($my_array as $key => $element): ?>
        <li>
            Whatever you want to do with
            <?php echo htmlspecialchars($element) ?>
            (<?php echo htmlspecialchars($key) ?>).
        </li>
        <li class="pollChart pollChart1">&nbsp;</li>
    <?php endforeach ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T11:27:59.483

`print_r()`只是为了调试而提到的。

要获得“干净”的输出，您必须指定应*如何*输出：

```
<?php
$my_array = array("a" => "Dog", "b" => "Cat", "c" => "Horse");

shuffle($my_array);

foreach ($my_array as $key=>$val)
    echo sprintf('%s: %s<br>'."\n",$key,$val);
?> 
```

在您的情况下，输出可能类似于：

```
echo sprintf('<li><input id="pollRadioButton[]" name="%1$s" '.
             'type="radio" value="%2$s" />%2$s</li>'."\n".
             '<li class="pollChart pollChart1">&nbsp;</li>'."\n",$key,$val); 
```

# opensuse - 如何使用 zypper 解决对 Suse 的 cairos 依赖

> ID：13452691
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:03.530
> 
> 标签：opensuse

我正在尝试在 Open Suse 上安装 intel-gpu-tools。它在尝试解决 Cairos 依赖项时失败并显示以下错误消息。错误消息粘贴在下面。

我可以在 ubuntu 上使用 apt-get build-dep gtk+2.0 解决这个问题。

zypper 是否也有类似的东西可以解决所有构建依赖项。

检查 cairo 的 PNG 功能功能...配置：警告：在 pkg-config 搜索路径中找不到 libpng 检查是否可以启用 cairo 的 PNG 功能功能...没有配置：错误：无法启用推荐的 PNG 功能功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:14:59.927

须藤 zypper 安装 libgtk

这将安装 cairo 所需的所有依赖项。

# ruby - Ruby Regexp#match 匹配字符串的开头与给定的位置（Python re-like）

> ID：13452699
> 
> 赞同：2
> 
> 时间：2012-11-19T11:19:28.933
> 
> 标签：ruby, regex

我正在寻找一种从第一个符号匹配字符串的方法，但考虑到我给 match 方法的偏移量。

```
test_string = 'abc def qwe'
def_pos = 4
qwe_pos = 8

/qwe/.match(test_string, def_pos) # => #<MatchData "qwe">
# ^^^ this is bad, as it just skipped over the 'def'

/^qwe/.match(test_string, def_pos) # => nil
# ^^^ looks ok...

/^qwe/.match(test_string, qwe_pos) # => nil
# ^^^ it's bad, as it never matches 'qwe' now 
```

我正在寻找的是：

```
/...qwe/.match(test_string, def_pos) # => nil
/...qwe/.match(test_string, qwe_pos) # => #<MatchData "qwe"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:26:24.267

使用字符串切片怎么样？

```
/^qwe/.match(test_string[def_pos..-1]) 
```

该`pos`参数告诉正则表达式引擎从哪里开始匹配，但它不会改变行首（和其他）锚点的行为。`^`仍然只匹配一行的开头（并且`qwe_pos`仍然在中间`test_string`）。

此外，在 Ruby 中，`\A`是“字符串开始”锚点，`\z`是“字符串结束”锚点。`^`并且也`$`匹配行的开始/结束，并且没有选项可以改变这种行为（这对于 Ruby 来说是特殊的，就像在其他正则表达式风格中的令人着迷的令人困惑的用法一样）`(?m)`......`(?s)`

# windows-phone-7 - 我可以一次发送多个 ShellToast 通知吗？

> ID：13452700
> 
> 赞同：-1
> 
> 时间：2012-11-19T11:19:40.823
> 
> 标签：windows-phone-7, windows-phone

如果我一次从后台代理发送多个**ShellToast**通知，例如在 ToDo 列表应用程序中我想通知今天应该完成 3 个任务，会发生什么？
是否允许或推荐？用户会看到所有三个 toast 还是只看到第一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:37:06.970

计划的代理只运行一次，由您决定显示哪个 toast。在这些情况下，您应该使用计数器……可能。

我过去处理这类事情的方式只是跟踪时间或在队列中显示了哪些祝酒词，并且每次更新只显示一个，这样您就可以全天轮换队列，直到任务完成在应用程序中不再有效。或者，根据手机的时间，确定要显示的内容（它们每 30 分钟左右触发一次）。

最终，最佳方式可能是祝酒词“你有 3 项任务要完成”等等。

希望这些解决方案之一可能会有所帮助！

// 杰德

# java - 在不更改应用程序代码的情况下提高对加密表的查询性能

> ID：13452701
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:42.640
> 
> 标签：java, oracle, oracle10g, oracle11g, database-performance

我已经用 Oracle 和 Java 标记了这个问题，因为 Oracle 和 Java 解决方案都可以解决这个问题。

我是 Oracle 安全性的新手，并且遇到了以下要解决的问题。我在互联网上做了一些研究，但到目前为止我没有运气。起初，我认为`Oracle TDE`这可能对我的问题有所帮助，但在这里：[Oracle TDE 可以保护 DBA 的数据吗？](https://stackoverflow.com/questions/591112/can-oracle-tde-protect-data-from-the-dba)它似乎`TDE`不能保护数据`DBA`，这是一个不能容忍的问题。

这是问题所在：

我有一个包含数百万条记录的表。我有一个 Java 应用程序，它使用相等或范围条件对表中的列进行查询，该列是表的主键列。主键列包含敏感数据，因此已经加密。因此，使用来自应用程序的正常（即解密）值查询数据不能使用主键的唯一索引访问路径。我需要在不更改应用程序代码的情况下提高查询的性能（如果需要，可以修改应用程序配置，但不能修改代码）。只要该列保持加密状态，就可以在数据库端进行任何必要的更改。

**请甲骨文人士：**您对这个问题有什么建议？如何在解密的列值上创建索引并以某种方式强制 Oracle 使用该索引？如何使用诸如散列分区之类的分区？观点如何？任何，任何解决方案？

**请Java人：**我自己有一个非常模糊的想法，即在两者之间（即数据库和应用程序之间）创建一个单独的应用程序，它充当代理，接收来自应用程序的查询并将解密的值替换为加密的值和将它发送给数据库，然后它接收响应并将结果返回给应用程序。代理应该像数据库一样运行，以便应用程序可以通过仅更改配置文件中的连接字符串来连接到它。这行得通吗？如何？

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:42:01.447

> 它使用相等或范围条件对表中的列查询此表，该列是表的主键列

要找到一个特定的值，它很简单——你可以以任何你喜欢的方式存储加密的数据——即使是作为哈希值，仍然可以使用索引检索特定的值。但是根据我在其他地方的评论，如果没有以下任何一项，您将无法进行范围查询：

*   解密表中的每一行

或者

*   使用可以在几秒钟内破解的算法。

使用链表（或相关表）来定义顺序而不是具有内在顺序的算法会强制对更大的一组值进行强力检查 - 但它远不如正确加密的值安全。

无论您使用 Oracle、Java 还是铅笔和纸都没关系。使用量子计算可能是可能的 - 但如果您无法确保您的应用程序的安全性/支付专家密码学家的好建议，那么您肯定无法负担得起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:51:22.203

如何在解密的列值上创建索引并以某种方式强制 Oracle 使用该索引？也许您可以创建一个基于函数的索引，在其中索引解密的值。

```
create index ix1 on tablename (decryptfunction(pk1)); 
```

# .net - 调试失败的、未观察到的 TPL 任务

> ID：13452702
> 
> 赞同：3
> 
> 时间：2012-11-19T11:19:43.710
> 
> 标签：.net, debugging, .net-4.0, task-parallel-library, unobserved-exception

我正在尝试通过失败的集成测试来调试我观察到的间歇性问题，但似乎被困在岩石和坚硬的地方之间。

某处某处正在创建一个`System.Threading.Tasks.Task`随后失败并导致未观察到的任务异常。在生成的处理程序中，我可以看到任务 ID 和导致它失败的异常。我煞费苦心地分析了我的代码，甚至[遵循了我自己的建议并命名了我所有的任务](http://kentb.blogspot.co.uk/2012/03/debugging-failed-unobserved-tpl-tasks.html)，但仍然没有找到有问题的任务。我的代码似乎根本没有创建它。

所以我尝试在`Task`构造函数本身上设置断点。我可以使用函数断点（使用诸如“System.Threading.Tasks.Task.Task(System.Action)”之类的位置）来做到这一点。这有效，调试器中断并向我显示`Task`该类的程序集。但是，我真正需要做的是将 的 ID 与`Task`最终`Task`失败的 ID 相关联。

因此，为此，我尝试`Task.Id`在跟踪点中输出该属性。但是我收到一条消息，说该方法已优化，因此无法评估表达式。

所以我尝试使用源代码进行调试。我设置了我所有的符号和你有什么，但我尽我所能尝试了一切，但它不起作用。经过大量谷歌搜索后，我发现最新的 .NET 4[不支持它。](http://social.msdn.microsoft.com/Forums/en-US/refsourceserver/thread/41388c7b-582b-4e3f-8178-3d38a3c99639)

有人对我如何继续诊断此问题有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T15:40:19.650

好的，我已经找到了这个问题。该错误的细节可能不如我用来查找它的方法有趣，但我将在下面的单独部分中介绍这两者。

# 问题

这是有问题的代码的一部分：

```
private static Task<TSuccessor> ThenImpl<TAntecedent, TSuccessor>(Task<TAntecedent> antecedent, Func<Task<TAntecedent>, Task<TSuccessor>> getSuccessor, CancellationToken cancellationToken, TaskThenOptions options)
{
    antecedent.AssertNotNull("antecedent");
    getSuccessor.AssertNotNull("getSuccessor");

    var taskCompletionSource = new TaskCompletionSource<TSuccessor>();

    antecedent.ContinueWith(
        delegate
        {
            var evenOnFaulted = options.HasFlag(TaskThenOptions.EvenOnFaulted);
            var evenOnCanceled = options.HasFlag(TaskThenOptions.EvenOnCanceled);

            if (antecedent.IsFaulted && !evenOnFaulted)
            {
                taskCompletionSource.TrySetException(antecedent.Exception.InnerExceptions));
            }
            else if ((antecedent.IsCanceled || cancellationToken.IsCancellationRequested) && !evenOnCanceled)
            {
                taskCompletionSource.TrySetCanceled();
            }
            else
            { 
```

此方法支持我的`Then`扩展方法，[我在博客中提到了](http://kentb.blogspot.co.uk/2012/09/and-then-there-was-then.html).

除了在我的博客文章中的实现之外，我最近添加了运行“然后继续”的能力，我称之为，即使前面的任务出错：

```
Task.Factory.StartNew(() => { throw new InvalidOperationException(); })
    .Then(() => Console.WriteLine("Executed"), TaskThenOptions.EvenOnFaulted); 
```

这将导致初始异常被忽略并在控制台上输出“已执行”。但是，问题是我`ThenImpl`没有观察到原来的异常。为此，我改变了这一行：

```
if (antecedent.IsFaulted && !evenOnFaulted) 
```

对此：

```
if (antecedent.Exception != null && !evenOnFaulted) 
```

现在我不明白这个问题。

现在，您可能想知道为什么这很难追查。问题是，我有很多促进高级场景的任务组合方法。这是一个实际的片段，可让您了解所产生的力量：

```
private Task OnConnectAsync(CancellationToken cancellationToken, object state)
{
    var firstAttempt = true;
    var retryOnFailureTask = TaskUtil
        .RetryOnFailure(
                () => TaskUtil.Delay(firstAttempt ? TimeSpan.Zero : this.reconnectDelay, cancellationToken)
                .Then(
                    x =>
                    {
                        if (!firstAttempt)
                        {
                            Interlocked.Increment(ref this.connectionAttempts);
                        }

                        firstAttempt = false;
                    })
                .Then(x => this.loggerService.Debug("Attempting to connect communications service (attempt #{0}).", this.connectionAttempts), cancellationToken)
                .Then(x => this.communicationsService.ConnectAsync(cancellationToken), cancellationToken)
                .Then(x => this.loggerService.Debug("Successfully connected communications service (attempt #{0}).", this.connectionAttempts), cancellationToken)
                .Then(x => this.communicationsService.AuthenticateAsync(cancellationToken), cancellationToken)
                .Then(x => this.loggerService.Debug("Successfully authenticated communications service (attempt #{0}).", this.connectionAttempts), cancellationToken)
                .Then(x => this.ReviveActiveStreamsAsync(cancellationToken), cancellationToken)
                .Then(x => this.loggerService.Debug("Successfully revived streams (attempt #{0}).", this.connectionAttempts), cancellationToken),
            null,
            cancellationToken);

    return retryOnFailureTask;
} 
```

注意 custom `RetryOnFailure`、`Then`和`Delay`方法。这是我在谈论的一个很好的品味。

当然，这样做的缺点是在问题发生时跟踪问题。我不禁觉得TPL在这方面做得很差。在我看来，每个都`Task`应该包含有关谁创建它的信息。至少，TPL 中应该有钩子（例如`TaskCreated`事件），以便开发人员可以用他们自己的调试信息来补充任务。使用 .NET 4.5 可能会改善这种情况 - 不过我正在使用 .NET 4.0。

# 方法

追查问题的关键是费力地包装`Task`我创建的每一个`TaskCompletionSource`，用补充信息包装任何异常。例如，这是`ToBooleanTask`我事先拥有的扩展方法：

```
public static Task<bool> ToBooleanTask(this Task task)
{
    var taskCompletionSource = new TaskCompletionSource<bool>();

    task.ContinueWith(
        x =>
        {
            if (x.IsFaulted)
            {
                taskCompletionSource.TrySetException(x.Exception.GetBaseException());
            }
            else if (x.IsCanceled)
            {
                taskCompletionSource.TrySetCanceled();
            }
            else
            {
                taskCompletionSource.TrySetResult(true);
            }
        });

    return taskCompletionSource.Task;
} 
```

这是在进行此更改之后：

```
public static Task<bool> ToBooleanTask(this Task task)
{
    var taskCompletionSource = new TaskCompletionSource<bool>();

    task.ContinueWith(
        x =>
        {
            if (x.IsFaulted)
            {
                taskCompletionSource.TrySetException(new InvalidOperationException("Failure in to boolean task", x.Exception.GetBaseException()));
            }
            else if (x.IsCanceled)
            {
                taskCompletionSource.TrySetCanceled();
            }
            else
            {
                taskCompletionSource.TrySetResult(true);
            }
        });

    return taskCompletionSource.Task;
} 
```

在这种情况下，我已经有了一个`TaskCompletionSource`，所以它很简单。在其他情况下，我必须显式创建一个`TaskCompletionSource`并将任何故障/取消/结果从底层转发`Task`到`TaskCompletionSource`.

旁白：您可能想知道`ToBooleanTask`扩展方法的使用。如果您想实现一个同时处理通用和非通用任务的方法，它非常有用。您可以实现泛型版本，然后调用非泛型重载`ToBooleanTask`以创建泛型任务，然后将其传递给泛型重载。

一旦我检查了所有可能的罪魁祸首并按照上述补充了它们，我重新运行了我的测试，直到它失败并注意到它确实`ToBooleanTask`是在创建没有被观察到的任务。因此，我将其修改为：

```
public static Task<bool> ToBooleanTask(this Task task)
{
    var stackTrace = new System.Diagnostics.StackTrace(true);
    var taskCompletionSource = new TaskCompletionSource<bool>();

    task.ContinueWith(
        x =>
        {
            if (x.IsFaulted)
            {
                taskCompletionSource.TrySetException(new InvalidOperationException("Failure in to boolean task with stack trace: " + stackTrace, x.Exception.GetBaseException()));
            }
            else if (x.IsCanceled)
            {
                taskCompletionSource.TrySetCanceled();
            }
            else
            {
                taskCompletionSource.TrySetResult(true);
            }
        });

    return taskCompletionSource.Task;
} 
```

当失败发生时，这会给我一个完整的堆栈跟踪。我重新运行了我的测试，直到它失败，并且 - 万岁！- 获得了我需要追踪问题的信息：

```
Failure in to boolean task with stack trace:    at XXX.Utility.Tasks.TaskExtensions.ToBooleanTask(Task task) in C:\XXX\Src\Utility\Tasks\TaskExtensions.cs:line 110
   at XXX.Utility.Tasks.TaskExtensions.Then(Task antecedent, Func`2 getSuccessor, CancellationToken cancellationToken, TaskThenOptions options) in C:\XXX\Src\Utility\Tasks\TaskExtensions.cs:line 199
   at XXX.Utility.Tasks.StateMachineTaskFactory`1.TransitionTo(T endTransitionState, CancellationToken cancellationToken, WaitForTransitionCallback`1 waitForTransitionCallback, ValidateTransitionCallback`1 validateTransitionCallback, PreTransitionCallback`1 preTransitionCallback, Object state) in C:\XXX\Src\Utility\Tasks\StateMachineTaskFactory.cs:line 312
   <snip> 
```

所以我可以看到这是我的`Then`重载调用之一`ToBooleanTask`。然后我可以追踪那个确切的代码，问题很快就变得明显了。

不过，这让我很好奇。为什么我最初用名称补充每个任务的方法没有产生任何结果？我尝试恢复我的修复，直接命名由 生成的任务`ToBooleanTask`，然后重新运行，直到失败。果然，我在调试器中看到了任务名称。很明显，我最初以某种方式错过了命名这个任务。

呸！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:00:49.120

如果任务的数量是可控的，您可以使用 Visual Studio 中的“制作对象 ID”功能来跟踪每个任务：

*   在任务构造函数的断点中，将任务放入 Watch 窗口。
*   右键单击监视窗口中的任务并选择“制作对象 ID”。请注意，这会将 1# 放在值的末尾。为每项任务执行此操作。
*   做你的工作流程。在引发异常的任务中，检查它的编号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:37:29.253

打破`UnobservedTaskException`事件并检查`Task`. 您可以`Task`在调用堆栈中找到上一级或两级，因为该事件是由`TaskExceptionHolder`包含私有字段的类引发的`m_task`。

该`Task`对象将包含作为其执行的一部分运行的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T14:22:56.260

如果可能，您可以更改创建任务的代码以使用接受对象的任务构造函数： `Task(Action<Object>, Object)`

然后，在您创建任务的每个位置，您都可以向它传递一些独特的东西（识别整数、调用堆栈等）

然后，在 UnobservedTaskException 中，您可以检查此日期（存储在 中`Task.AsyncState`）。

这将帮助您缩小范围是您的任务还是其他任务。

# java - 使用错误凭据登录时无法捕获 Hibernate 异常

> ID：13452706
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:54.777
> 
> 标签：java, database, hibernate, exception

我正在用 Hibernate 制作一个 Java 项目。这是我登录数据库的代码：

```
1    public static void connect(String username, String password) throws Exception
2    {
3        Configuration cfg = new Configuration();
4        cfg.setProperty("hibernate.dialect", "org.hibernate.dialect.MySQLDialect");
5        cfg.setProperty("hibernate.connection.driver_class", "com.mysql.jdbc.Driver");
6        cfg.setProperty("hibernate.connection.url", "jdbc:mysql://localhost:3306/Scheme");
7        cfg.setProperty("hibernate.connection.username", username);
8        cfg.setProperty("hibernate.connection.password", password);
9
10        cfg.addResource("model/Classroom.hbm.xml");
11        cfg.addResource("model/Classteacher.hbm.xml");
12        cfg.addResource("model/Education.hbm.xml");
13        cfg.addResource("model/Lesson.hbm.xml");
14        cfg.addResource("model/Loginauth.hbm.xml");
15        cfg.addResource("model/Schoolclass.hbm.xml");
16        cfg.addResource("model/Semester.hbm.xml");
17        cfg.addResource("model/Semestersubject.hbm.xml");
18        cfg.addResource("model/Student.hbm.xml");
19        cfg.addResource("model/Subject.hbm.xml");
20        cfg.addResource("model/Teacher.hbm.xml");
21        cfg.addResource("model/Login.hbm.xml");
22        sessionFactory = cfg.buildSessionFactory();
23    } 
```

如果我使用了错误的用户名/密码，我会得到这个异常：

```
java.sql.SQLException: Access denied for user 'root1'@'localhost' (using password: YES)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:943)
at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:4113)
at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1308)
at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2336)
at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2369)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2153)
at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:792)
at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:381)
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:305)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:190)
at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:110)
at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:84)
at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2009)
at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1292)
at util.HibernateUtil.connect(HibernateUtil.java:22) <-- Line 22 at the above code
at core.LoginWindow$5.run(LoginWindow.java:199) 
```

无论我使用多少次 try/catch 和 throws，该方法仍然正确返回。我唯一的解决方法是添加这一行，但它更像是“黑客修复”而不是真正的修复。

```
Query q = session.createQuery("from Student");
q.list(); 
```

在上述代码的第 22 行和第 23 行之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:21:33.880

抛出的异常确实不是“未捕获”异常，而是将其记录在我无法到达的地方。它缺少这部分：

```
Exception in thread "AWT-EventQueue-0" 
```

我使用的是 Hibernate 3，但升级到了 4。然后将 buildSessionFactory() 方法更改为：[Is buildSessionFactory() 在 hibernate 4 中已弃用？](https://stackoverflow.com/questions/8621906/is-buildsessionfactory-deprecated-in-hibernate-4). 现在，如果我提供错误的凭据，我不会收到记录的异常。

问题解决了，爱你们。

# jquery - 使用 jqgrid 中的多选更改删除页面

> ID：13452708
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:55.083
> 
> 标签：jquery, jqgrid

如果我有 11 条记录并且我的 rown Num 在 Multiselect jqgrid 中为 10，我想知道如何删除行。

我想在第 1 页中选择行并在第 2 页中选择第 11 行，当我单击删除时，我在第 1 页中选择的行也将与第 2 页中的选定行一起被删除。

可能吗？任何人都可以分享它的代码或演示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:32:09.287

您无法选择页面上不可见的行（第 2 页）。如果确实需要，您将需要手动保存所选行的 id并`selarrrow`在. 有关更多信息和演示示例，请参阅[答案](https://stackoverflow.com/a/8172723/315935)。`loadComplete``setSelection`

# javascript - Javascript - 需要单独的符号

> ID：13452709
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:57.623
> 
> 标签：javascript

我需要单独的下一个字符串：

```
"func(ab)" 
```

**至：**

```
["func", "(", "ab", ")"] 
```

* * *

即单独的“（”和“）”符号。告诉我使用*str.split*的最佳技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:25:15.610

最简单的方法是这样做：

```
var result = "func(ab)".split(/\b/); 
```

这正如你提到`["func", "(", "ab", ")"]`的那样工作，结果给你。这是证明：http: [//jsfiddle.net/PKntA/](http://jsfiddle.net/PKntA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:31:52.537

假设您的输入中没有文本 TokenSeparator：

```
var result = inpout.replace("(", "(TokenSeparator");
result = result.replace(")", "TokenSeparator)");
result = result.split("TokenSeparator"); 
```

# wordpress - 如何在 bbPress 中显示 BuddyPress 头像？

> ID：13452710
> 
> 赞同：0
> 
> 时间：2012-11-19T11:19:57.267
> 
> 标签：wordpress, buddypress, bbpress

我在 3.4.2 WordPress 网站上安装了 bbPress 2.1.2 和 BuddyPress 1.6.1。

我想在 bbPress 的论坛上显示 BuddyPress 头像。

我怎么做？

我试过了

```
include(WP_PLUGIN_DIR."/buddypress/bp-loader.php"); 
```

进来`header.php`
并
打电话

```
bp_get_member_avatar() 
```

但没有成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:49:25.640

尝试这个。让我知道这是否适合您。

```
echo bp_core_fetch_avatar( 'item_id='.get_post_author_id() ); 
```

# spring-roo - Spring Roo 披萨店披萨订单

> ID：13452712
> 
> 赞同：1
> 
> 时间：2012-11-19T11:20:02.050
> 
> 标签：spring-roo

我是“Spring Roo”的新手，我正在浏览[比萨店](http://static.springsource.org/spring-roo/reference/html/beginning.html)的例子。

我能够运行它，但无法在一个订单中添加多个相同类型的比萨饼，即您可以添加多个不同类型的比萨饼，但不能添加相同类型的比萨饼。如何通过“Roo”实现这一目标？

另外，如果我要手动添加它，我应该如何存储它：

```
Map<Pizza,Integer> 
```

比萨 - 实际订购的比萨

整数 - 比萨饼的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:12:17.677

一种选择是使用连接表（例如订单行项目），如此类图所示：![连接表](../Images/e9cc6cdcfbe1520199fb8abe16af9508.png)

此实例图显示了客户订购 3 个比萨后数据库中的记录示例：2 个意大利辣香肠和 1 个那不勒斯：![在此处输入图像描述](../Images/7aa33a73507d39333515f55788f5f392.png)

这是在 roo 中使用连接表的示例（来自不同的域）：[link](https://stackoverflow.com/questions/7286833/how-to-do-a-many-to-many-relationship-in-spring-roo-with-attributes-within-de-r)

# javascript - 有没有更标准的处理“这个”而不用“那个”引用“这个”

> ID：13452713
> 
> 赞同：2
> 
> 时间：2012-11-19T11:20:14.187
> 
> 标签：javascript, jquery

我这里有一些代码：

```
App.prototype.binds = function(){
    var that = this;
    $('.postlist li').live('click', function(){ that.selectPost(this);} );
}

App.prototype.selectPost = function(){
    this.function();
} 
```

我在绑定函数中将“this”的引用创建为“that”，因此在我的 selectPost() 中，我可以使用“this”来引用 App 对象而不是列表项。

有没有更优雅/标准的解决方案而不是使用“那个”？

* * *

**有了答案，我的代码就变成了：**

```
App.prototype.binds = function(){
    $('.postlist li').live('click', $.proxy(this.selectPost, this) );
}

App.prototype.selectPost = function(e){
    this.function(); // function in App

    var itemClicked = e.currentTarget; //or
    var $itemClicked = $(e.currentTarget); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:24:05.197

您可以在构造函数中或及时绑定函数：

在构造函数中

```
function App() {
    this.selectPost = this.selectPost.bind( this );
                   //$.proxy( this.selectPost, this ) in jQuery
}

App.prototype.binds = function(){
    $('.postlist li').live('click', this.selectPost ); //Already bound in constructor
} 
```

及时：

```
App.prototype.binds = function(){
    $('.postlist li').live('click', this.selectPost.bind( this ));
                                    //$.proxy( this.selectPost, this ) in jQuery
} 
```

请注意，[`.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)仅在较新的浏览器中受支持，jQuery[`$.proxy`](http://api.jquery.com/jQuery.proxy/)应该是首选。

我在 jQuery 中打开了一个已被接受的功能请求[http://bugs.jquery.com/ticket/12031](http://bugs.jquery.com/ticket/12031)。使用 jQuery 事件时，这将使这更容易。

请注意，有一个常见的误解，即在 jQuery 事件处理程序`e.target`中将与正常情况相同。`this`它实际上是[`e.currentTarget`](http://api.jquery.com/event.currentTarget/)。所以现在它`this`指的是实例而不是元素，你可以通过`e.currentTarget`.

# intellij-idea - 无法在 IDEA 10.5 上运行 JBoss 5.0.1 GA 应用程序

> ID：13452716
> 
> 赞同：0
> 
> 时间：2012-11-19T11:20:27.510
> 
> 标签：intellij-idea, jboss5.x

我正在尝试在 IDEA 10.5 上运行简单的 hello world JBoss 5.0.1 GA 应用程序，它失败并出现错误，但在使用 IDEA 11（试用版）时，它按预期工作。

知道为什么（双关语不是故意的）吗？

来自控制台的错误：

```
[2012-11-19 01:07:20,890] Artifact JbossHelloWorld:war: Artifact is being deployed, please wait...

[2012-11-19 01:07:20,901] Artifact JbossHelloWorld:war: Artifact is not deployed. Press 'Deploy' to start deployment

[2012-11-19 01:07:20,957] Artifact JbossHelloWorld:war: Error during artifact deployment. See server log for details.

13:07:21,162 INFO  [ServerImpl] Starting JBoss (Microcontainer)... 
```

想法日志中的错误：

```
2012-11-19 12:58:31,194 [2899991]  DEBUG - min.JavaeeAgentAdminServerBase -    
javax.management.MBeanException  
    at org.jboss.mx.interceptor.ReflectedDispatcher.handleInvocationExceptions(ReflectedDispatcher.java:184)  
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:165)  
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)  
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)  
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)  
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)  
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
    at java.lang.reflect.Method.invoke(Method.java:597)  
    at org.jboss.jmx.connector.invoker.InvokerAdaptorService.invoke(InvokerAdaptorService.java:270)  
    at sun.reflect.GeneratedMethodAccessor302.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
    at java.lang.reflect.Method.invoke(Method.java:597)  
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)  
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)  
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:138)  
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)  
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:140)  
    at org.jboss.jmx.connector.invoker.SerializableInterceptor.invoke(SerializableInterceptor.java:74)  
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)  
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)  
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)  
    at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:180)  
    at sun.reflect.GeneratedMethodAccessor301.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
    at java.lang.reflect.Method.invoke(Method.java:597)  
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)  
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)  
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)  
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)  
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)  
    at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:855)  
    at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:422)  
    at sun.reflect.GeneratedMethodAccessor300.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
    at java.lang.reflect.Method.invoke(Method.java:597)  
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)  
    at sun.rmi.transport.Transport$1.run(Transport.java:159)  
    at java.security.AccessController.doPrivileged(Native Method)  
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)  
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)  
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)  
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)  
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)  
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)  
    at java.lang.Thread.run(Thread.java:619)  
Caused by: org.jboss.deployment.DeploymentException: Failed to deploy: file:/D:/projects/JbossHelloWorld/out/artifacts/JbossHelloWorld_war/JbossHelloWorld.war  
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:838)  
    at sun.reflect.GeneratedMethodAccessor328.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)  
    at java.lang.reflect.Method.invoke(Method.java:597)  
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)  
    ... 45 more  
Caused by: java.io.FileNotFoundException: JbossHelloWorld.war doesn't exist. (rootURI: file:/D:/projects/JbossHelloWorld/out/artifacts/JbossHelloWorld_war/JbossHelloWorld.war, file: /D:/projects/JbossHelloWorld/out/artifacts/JbossHelloWorld_war/JbossHelloWorld.war)  
    at org.jboss.virtual.plugins.context.file.FileSystemContext.getRoot(FileSystemContext.java:209)  
    at org.jboss.virtual.VFS.getRoot(VFS.java:304)  
    at org.jboss.virtual.VFS.createNewRoot(VFS.java:262)  
    at org.jboss.

deployment.MainDeployer.deploy(MainDeployer.java:826)  
        ... 49 more 
```

# javascript - Nivo 滑块不会隐藏以前的图像

> ID：13452723
> 
> 赞同：0
> 
> 时间：2012-11-19T11:20:37.730
> 
> 标签：javascript, html, css, nivo-slider

```
http://74.52.155.226/~projtest/team/harmeet/emed/ 
```

这是我正在处理的项目的链接。现在我使用的滑块是 nivo ，其中的图像将是 png。我尝试在 js 本身中寻找一个选项，但我找不到任何选项。问题是，当下一张图片加载时，上一张图片仍然显示，而行为应该是上一张图像淡出，下一张图像淡入。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:33:51.433

如何将其设置为使用“淡入淡出”样式？

```
$('#slider').nivoSlider({
    effect: 'fade'
}); 
```

此页面上提供了完整的使用详细信息：

[http://nivo.dev7studios.com/support/jquery-plugin-usage/](http://nivo.dev7studios.com/support/jquery-plugin-usage/)

# ios - CollectionView 与单元格重叠

> ID：13452727
> 
> 赞同：1
> 
> 时间：2012-11-19T11:21:01.850
> 
> 标签：ios, objective-c, cocoa-touch, uikit, uicollectionview

我的目标是在我的视图底部有一个集合视图。单元格中充满了照片库中的照片。我不知道为什么，但细胞相互重叠。有人知道为什么吗？这是来自 ViewController 的代码：

```
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView
     numberOfItemsInSection:(NSInteger)section
{

    return [self.fotoArray count];

}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"foto_cell";

    FotoCell *cell = [self.collectionView
                        dequeueReusableCellWithReuseIdentifier:cellIdentifier
                        forIndexPath:indexPath];

    Foto *currFoto = [self.fotoArray objectAtIndex:indexPath.row];
    // Set the selectedFotoID 
    [CoreDataManager sharedInstance].selectedFotoId = ((Foto*)[self.fotoArray objectAtIndex:indexPath.row]).objectID;
    NSURL *u = [NSURL URLWithString:currFoto.f_path];
    [self findImage:u in: cell];

    return cell;
}

// Get Photo from Asset Library
-(void)findImage:(NSURL*)u in: (FotoCell*) cell
{

    __block FotoCell *blockCell = cell;
    //
    ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
    {
        ALAssetRepresentation *rep = [myasset defaultRepresentation];
        CGImageRef iref = [rep fullResolutionImage];
        if (iref) {
            UIImage *largeimage = [UIImage imageWithCGImage:iref];
            //[largeimage retain];
            UIImage *thumbnail = [UIImage imageWithCGImage:iref scale:0.15 orientation:UIImageOrientationUp];
            [blockCell.fotoThumb setImage:thumbnail];
        }
    };

    //
    ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
    {
        NSLog(@"cant get image - %@",[myerror localizedDescription]);
    };

        NSURL *asseturl = u;
        ALAssetsLibrary* assetslibrary = [[[ALAssetsLibrary alloc] init] autorelease];
        [assetslibrary assetForURL:asseturl
                       resultBlock:resultblock
                      failureBlock:failureblock];

} 
```

这里是我的 Cell.m 类的代码：

```
@implementation FotoCell

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)dealloc {
    [_fotoThumb release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:09:09.560

我不清楚你的代码。但我以前遇到过这个问题。原因是您在 cellForItemAtIndexPath 中添加了可见视图（如图像、UILabel、...）：

## 当 collectionView 序列时，滚动时所有 Cell 视图都重叠在一起。

您可以尝试在您的 Cell 中初始化和 imageView，然后在 cellForItemAtIndexPath 中设置图像名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:22:54.323

你必须设置`itemSize`你的`UICollectionViewFlowLayout`实例。

# asp.net-mvc - 通过部分视图返回页面时，JQuery 函数功能将不起作用

> ID：13452728
> 
> 赞同：0
> 
> 时间：2012-11-19T11:21:00.837
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, partial-views

我在我的 .js 文件中放置了这个 jquery 函数......只要我的页面被加载，它就可以工作......但是当我将它更改为作为部分视图返回时......这个警报将不再起作用......它怎么会再次工作？

```
 $(document).ready(function () {

    var msg = '@ViewBag.Message';

    if (msg == '1')
        alert("New Time Shift has been saved.");

}); 
```

在我的控制器动作中......

```
 if (Request.IsAjaxRequest())
          return PartialView("_RecordList", userRecord); //alert wont work here...

   return View(userRecord); //this will return the whole view thus the alert works here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:52:23.677

不会从 ajax 请求执行文档就绪功能。您可以将 javascript 代码提取到整个视图的一个单独的函数部分。您还可以创建一个回调函数以在部分请求成功时执行，该函数也将调用它：

```
$(document).ready(function () {
    var msg = '@ViewBag.Message';
    initFunction(msg);
});

function initFunction(msg){
    if (msg == '1')
        alert("New Time Shift has been saved.");
}

function partialRequestSuccess(data){
    //store the message somewhere in the partial view, like a hidden div and get it using jquery
    var msg = ...
    initFunction(msg);
} 
```

然后你可以设置ajax请求的完整回调来调用我们刚刚创建的成功回调。如果您使用的是 MVC ajax 帮助程序，则可以设置一个 Success 参数，如下所示：

```
@using(Ajax.BeginForm(new AjaxOptions{ OnSuccess = "partialRequestSuccess" })) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:19:49.743

`I have this jquery function placed in my .js file....`

`var msg = '@ViewBag.Message';`

这是服务器代码，仅适用于`*.cshtml`文件，这是最小的一个问题。

# database - 每次 svn 提交时自动填充数据库

> ID：13452730
> 
> 赞同：1
> 
> 时间：2012-11-19T11:21:06.963
> 
> 标签：database, svn, post-commit-hook

我想编写 post commit hook 以在每次 svn commit 时自动更新数据库.....而且我想知道执行相同任务的任何其他方式而不是 post commit hook？

谢谢纳文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:13:46.937

我不会使用 post-commit 钩子——它在开发人员提交到 SVN 时运行，你真的希望你的提交尽可能快速和轻松。这使得难以处理数据库操作缓慢、失败或无法连接到数据库等不可避免的情况。

相反，我会考虑设置一个[持续集成服务器](http://en.wikipedia.org/wiki/Continuous_integration)来监控 SVN，并为每次提交运行您想要的任何脚本。

至于“如何”——要么编写本机应用程序来运行数据库查询，在命令行中传递参数，要么使用您的平台支持的任何脚本语言来执行数据库查询。Windows 上的 Powershell，*nix 上的几乎所有东西......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:25:56.193

假设您有 CI，请在构建过程中应用数据库更改。好好看看[LiquiBase](http://www.liquibase.org/)。它旨在完成这项任务并且是开源的。我用过，不会用别的。

# javascript - Column Plugins(tree) 在dojo中捕捉点击事件

> ID：13452731
> 
> 赞同：1
> 
> 时间：2012-11-19T11:21:09.070
> 
> 标签：javascript, dojo, mouseevent, dgrid

我有一个类似于以下代码的 dgrid，我的第二个字段是树，当用户单击树的图标时，我需要调用 XHR。我怎样才能赶上这个事件？

谢谢

```
 var CustomGrid = declare([OnDemandGrid, Keyboard, Selection, Pagination]); 

        var grid = new CustomGrid({ 
            columns: [ 
                selector({label: "#", disabled: function(object){ return object.type == 'DOCx'; }}, "radio"), 
                {label:'Id', field:'id', sortable: false}, 
                tree({label: "Title", field:"title", sortable: false, indentWidth:20}), 
                {label:'Count', field:'count', sortable: false} 
            ], 
            store: memoryStore, 
            pagingLinks: false, 
            pagingTextBox: true, 
            firstLastArrows: true, 
            pageSizeOptions: [10, 15, 25], 
            selectionMode: "single", // for Selection; only select a single row at a time 
            cellNavigation: false // for Keyboard; allow only row-level keyboard navigation 
        }, "grid"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:39:47.177

我找到了查看 dojo 代码的解决方案。在**dgrid/util**中有一个名为**mouse.js**的文件，您可以在其中找到其他示例，例如：

 **```
enterRow: handler(".dgrid-content .dgrid-row", "mouseover"),
        enterCell: handler(".dgrid-content .dgrid-cell", "mouseover"),
        enterHeaderCell: handler(".dgrid-header .dgrid-cell", "mouseover"),
        leaveRow: handler(".dgrid-content .dgrid-row", "mouseout"),
        leaveCell: handler(".dgrid-content .dgrid-cell", "mouseout"),
        leaveHeaderCell: handler(".dgrid-header .dgrid-cell", "mouseout"), 
```

因此，就我而言，我刚刚添加了：

```
clickCell: handler(".dgrid-content .dgrid-expando-icon", "click"),
dblclickCell: handler(".dgrid-content .dgrid-cell", "dblclick"), 
```

现在您可以在**dgrid/test的****Grid_mouseevents.html**中测试新事件。

 **问候。****

# android - 内存不足异常

> ID：13452732
> 
> 赞同：0
> 
> 时间：2012-11-19T11:21:17.807
> 
> 标签：android

我时不时地遇到这个异常，这让我很烦。在我的应用程序中，我们只扫描一个条形码，它将数据从条形码发送到服务器。我尝试了很多方法来清理内存并避免内存泄漏，但似乎什么也没有工作。任何帮助都会得到帮助。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.zxing.client.android/com.example.mypackage.filename}: android.view.InflateException: Binary XML file line #12: Error inflating class at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1652) 
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1668) 
at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2852) 
at android.app.ActivityThread.access$1600(ActivityThread.java:117) 
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:940) 
at android.os.Handler.dispatchMessage(Handler.java:99) 
at android.os.Looper.loop(Looper.java:123) 
at android.app.ActivityThread.main(ActivityThread.java:3703) 
at java.lang.reflect.Method.invokeNative(Native Method) 
at java.lang.reflect.Method.invoke(Method.java:507) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864) 
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622) 
at dalvik.system.NativeStart.main(Native Method) 
Caused by: android.view.InflateException: Binary XML file line #12: Error inflating class 
at android.view.LayoutInflater.createView(LayoutInflater.java:518) 
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56) 
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568) 
at android.view.LayoutInflater.rInflate(LayoutInflater.java:623) 
at android.view.LayoutInflater.inflate(LayoutInflater.java:408) 
at android.view.LayoutInflater.inflate(LayoutInflater.java:320) 
at android.view.LayoutInflater.inflate(LayoutInflater.java:276) 
at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:212) 
at android.app.Activity.setContentView(Activity.java:1657) 
at com.example.mypackage.filename.onCreate(TaskSelector.java:164) 
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1616) 
... 12 more Caused by: java.lang.reflect.InvocationTargetException 
at java.lang.reflect.Constructor.constructNative(Native Method) 
at java.lang.reflect.Constructor.newInstance(Constructor.java:415) 
at android.view.LayoutInflater.createView(LayoutInflater.java:505) 
... 23 more Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
at android.graphics.Bitmap.nativeCreate(Native Method) at android.graphics.Bitmap.createBitmap(Bitmap.java:477) 
at android.graphics.Bitmap.createBitmap(Bitmap.java:444) 
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349) 
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498) 
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473) 
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336) 
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697) 
at android.content.res.Resources.loadDrawable(Resources.java:1709) 
at android.content.res.TypedArray.getDrawable(TypedArray.java:601) 
at android.view.View.(View.java:1951) at android.view.View.(View.java:1899) 
at android.view.ViewGroup.(ViewGroup.java:286) at android.widget.RelativeLayout.(RelativeLayout.java:173) ... 26 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:45:52.770

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" > 
```

使用此代码这可能会有所帮助，或者让我知道我还有其他解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:23:29.260

您的位图太大，或者一次加载太多。

# objective-c - SQLite 数据库图像在 Xcode 中的构建时格式错误

> ID：13452739
> 
> 赞同：4
> 
> 时间：2012-11-19T11:21:48.177
> 
> 标签：objective-c, ios, xcode, sqlite

我正在开发一个 iOS 6 应用程序，并且正在使用 SQLite 数据库来存储数据。启动时，应用程序会在数据库上进行选择并在第一个屏幕上显示结果。但是，在尝试运行 select 时，我开始收到“数据库磁盘映像格式错误”错误。

奇怪的是，我可以使用 SQLite 浏览器[http://sqlitebrowser.sourceforge.net/](http://sqlitebrowser.sourceforge.net/)对项目文件夹中的数据库进行选择。但是，如果我在将数据库复制到模拟器文件夹 /Users//Library/ApplicationSupport/iPhone Simulator/6.0/Applications/... 后尝试打开数据库，那么我得到的磁盘映像格式错误。

数据库没有被后台线程访问，我也没有使用断点来停止执行，正如这里所建议的那样[sqlite database disk image malformed on iPhone SDK](https://stackoverflow.com/questions/3934641/sqlite-database-disk-image-malformed-on-iphone-sdk)的原因。

一次在数据库上执行的操作不超过一次。

感谢所有提示、提示和可能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T10:36:04.247

我发现这与我将一个相当大的数据库文件与应用程序捆绑在一起（大于 3 GB）有关。我已经通过 wifi 对数据进行应用内下载解决了这个问题。这导致数据库错误逐渐消失。

# knockout.js - 淘汰赛 ascx 不起作用

> ID：13452740
> 
> 赞同：2
> 
> 时间：2012-11-19T11:21:50.410
> 
> 标签：knockout.js, ascx

我目前正在开发一个 Web 应用程序，其中包含一些需要由 Knockout 绑定的 UI 控件。结构如下：MainPage.aspx -> _manageStructures.ascx -> _editStructure.ascx；所有这些都呈现在同一个页面中，通过 AJAX 添加新组件。MainPage 绑定工作完美，但 _editStructure 似乎没有获得绑定值。我所做的是创建一个 ModelView.js 文件，其中包含我在应用程序中需要的两个 ViewModel，然后是一个返回全局对象的“NameSpace”函数。

```
function v1 (name){
 this.name = ko.observable(name);
}
function v2(views){
 this.views = ko.observable(views);
}

function NameSpace() { }

var global = new NameSpace(); 
```

所以，当我需要应用一些绑定时，我要做的是：

```
var v  =new V1("luis");
global.v1 = v;

ko.applyBindings(global); 
```

然后，在我的 HTML 上，我所做的是：

```
<input data-bind="value: v1.name" /> 
```

现在，问题是我只能让它在主页上工作。

当我尝试将 V2 值绑定到我的 EditPage 上的输入时，该值始终为空

在我的 _manageStructure.ascx 中，我有一个操作链接，单击该链接将在网页中呈现 _editStructure。当我在同一页面中执行此操作时，它不起作用，但如果我在新选项卡上打开它，它会完美运行......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:28:18.937

您可以传递第二个参数来定义要在文档的哪个部分搜索数据绑定属性。例如，ko.applyBindings(myViewModel, document.getElementById('someElementId'))。这将激活限制为 ID 为 someElementId 的元素及其后代，如果您希望拥有多个视图模型并将每个模型与页面的不同区域相关联，这将非常有用。

# jqgrid - jqGrid - 打开多选的键盘导航

> ID：13452743
> 
> 赞同：0
> 
> 时间：2012-11-19T11:22:03.700
> 
> 标签：jqgrid

我需要能够在 jqGrid 中导航数据。我打开了虚拟分页 scroll = 1 并打开了多选。我需要能够使用键盘箭头键、向上翻页、向下翻页、主页、结束按钮。Page up 和 Page down 在页面之间移动，home 转到 jqGrid 中的第一页并结束到最后一页。任何做过这件事或如何做到这一点的人都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:38:22.080

*目前尚不*清楚键盘导航在`multiselect: true`. [您可以在答案](https://stackoverflow.com/a/6170308/315935)中找到一些旧的建议（远非完美）。我认为键盘导航的良好实现应该包括键盘导航，它只改变行的焦点而不改变选择。另一个键，如空格，应该用于选择或取消选择行。应该做额外的工作来实现行范围的选择（例如使用`Ctrl`和）。`Shift`

# mongodb - 在mongodb中提取子数组值

> ID：13452745
> 
> 赞同：8
> 
> 时间：2012-11-19T11:22:05.917
> 
> 标签：mongodb, mongo-shell

MongoDB新手在这里...

我有一个集合如下...

```
 > db.students.find({_id:22},{scores:[{type:'exam'}]}).pretty()
    {
        "_id" : 22,
        "scores" : [
            {
                "type" : "exam",
                "score" : 75.04996547553947
            },
            {
                "type" : "quiz",
                "score" : 10.23046475899236
            },
            {
                "type" : "homework",
                "score" : 96.72520512117761
            },
            {
                "type" : "homework",
                "score" : 6.488940333376703
            }
        ]
    } 
```

如何通过 mongo shell 仅显示测验分数？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-19T12:12:48.677

您的原始示例中有一些语法可能没有达到您的预期......也就是说，您的意图似乎是只匹配特定类型的分数（示例中的“考试”，您的描述中的“测验” ）。

下面是一些使用 MongoDB 2.2 shell 的示例。

### `$elemMatch`投影

您可以使用[$elemMatch 投影](http://docs.mongodb.org/manual/reference/projection/elemMatch/)返回数组中的第一个匹配元素：

```
db.students.find(
    // Search criteria
    { '_id': 22 },

    // Projection
    { _id: 0, scores: { $elemMatch: { type: 'exam' } }}
) 
```

结果将是每个文档的数组的匹配元素，例如：

```
{ "scores" : [ { "type" : "exam", "score" : 75.04996547553947 } ] } 
```

### 聚合框架

如果要显示多个匹配值或重塑结果文档而不是返回完整匹配的数组元素，可以使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)：

```
db.students.aggregate(
    // Initial document match (uses index, if a suitable one is available)
    { $match: {
        '_id': 22, 'scores.type' : 'exam'
    }},

    // Convert embedded array into stream of documents
    { $unwind: '$scores' },

    // Only match scores of interest from the subarray
    { $match: {
        'scores.type' : 'exam'
    }},

    // Note: Could add a `$group` by _id here if multiple matches are expected

    // Final projection: exclude fields with 0, include fields with 1
    { $project: {
        _id: 0,
        score: "$scores.score"
    }}
) 
```

在这种情况下，结果包括：

```
{ "result" : [ { "score" : 75.04996547553947 } ], "ok" : 1 } 
```

# java - 如何获取最近的 sharedPreferences

> ID：13452752
> 
> 赞同：0
> 
> 时间：2012-11-19T11:22:32.703
> 
> 标签：java, android, preference

我有一个后台服务，可以读取 cpu 使用情况和频率并将其显示在通知栏上

在应用程序设置（首选项）中，我可以选择仅显示频率负载或两者

但是获取共享首选项的方法不会获得最新的 SharedPreference

它仅在第一次服务启动时获得 SharedPreference，如果我在 Preference 屏幕中选择了不同的选项，它不会在服务中更新

这是代码

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    Runnable runnable = new Runnable() {@Override
        public void run() {
            while (thread) {

                sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this);
                items = sharedPrefs.getString("notif", "freq");
                System.out.println(items); //this keeps displaying the same value even if i go to Preference screen and change to something else
                if (items.equals("freq") || items.equals("both")) {

                }
                if (items.equals("load") || items.equals("both")) {

                } //reading frequency and load depending on what is selected
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                mHandler.post(new Runnable() {@Override
                    public void run() {
                        if (thread) {
                            createNotification(); //create notification
                        }
                    }
                });
            }
        }
    };
    new Thread(runnable).start();

    return START_STICKY;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:05:36.310

**解决了**

因为我的服务在单独的进程中运行，所以在访问共享首选项时我必须添加这个标志

```
private final static int PREFERENCES_MODE = Context.MODE_MULTI_PROCESS; 
```

像这样改变

```
sharedPrefs = this.getSharedPreferences("preference name", PREFERENCES_MODE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:29:40.150

确保您正确地将数据写入共享首选项，特别是您`commit()`的更改，[正如文档所说](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)：

> 您在编辑器中所做的所有更改都是批处理的，并且在您调用 commit() 或 apply() 之前不会复制回原始 SharedPreferences

这是示例代码：

```
SharedPreferences.Editor editor = mPrefs.edit();
editor.putBoolean( key, value );
editor.commit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:03:20.577

我认为错误在线

```
sharedPrefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

您从线程内部传递“this”的位置在哪里？您可以使用应用程序上下文更改它吗？

# cocoa - 允许 childWindow 中的视图成为 key 而不会失去对 parentWindow 的关注

> ID：13452753
> 
> 赞同：6
> 
> 时间：2012-11-19T11:22:34.807
> 
> 标签：cocoa, focus, nswindow, childwindow, nsresponder

我将 NSWindow 的自定义子类的 childWindow 添加到 parentWindow（也是 NSWindow 的自定义子类）。childWindow 具有 NSBorderlessWindowMask 和 canBecomeKeyWindow: 被覆盖以返回 YES 和 canBecomeMainWindow: 以返回 NO。

childWindow 设置为与 parentWindow 一起调整大小。所以我想创造一种错觉，即 childWindow 的视图是 parentWindow 的一部分。主要思想是将由基于文档的应用程序创建的文档窗口安排在一个主窗口中，以提供一个选项卡式界面（就像在浏览器中一样）以在文档之间切换。

我的问题是，每当我单击 childWindow 的一个视图时，parentWindow（主窗口）就会失去焦点，并且交通灯按钮变灰。这显然与我想要达到的目标背道而驰。

我找到了这个答案： [Make NSView in NSPanel first responder without key window status](https://stackoverflow.com/questions/4916100/make-nsview-in-nspanel-first-responder-without-key-window-status)

但是，即使我覆盖 isKeyWindow:（主窗口的）以始终返回 YES，但当我单击 childWindow 时，标题栏仍然显示为灰色。

我也尝试遵循这个建议： http: [//www.cocoabuilder.com/archive/cocoa/143945-non-focused-child-window.html](http://www.cocoabuilder.com/archive/cocoa/143945-non-focused-child-window.html)

但我不确定“在其 nextResponder 之前的响应者链中包含子窗口”是什么意思。使用 canBecomeKeyWindow: 返回 NO（对于 childWindow），孩子中的视图永远不会成为键并且总是灰色的。

任何线索我做错了什么？

一个补充：是否可以在不提供 childWindow 键状态的情况下在 childWindow FirstResponder 中创建视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-10T11:27:50.273

我通过模仿 NSPopover 的行为来完成这项工作。经过调查，我发现一个弹出窗口（使用私有 NSPanel 子类“_NSPopoverWindow”）认为它是键和主窗口，即使它不是从 [NSApp keyWindow] 返回的窗口。

创建您自己的自定义 NSPanel 子类，将其附加到父窗口，然后像这样覆盖以下方法：

```
- (BOOL)isKeyWindow {
    return YES;
}

- (BOOL)isMainWindow {
    return YES;
}

- (BOOL)canBecomeKeyWindow {
    return YES;
}

- (BOOL)canBecomeMainWindow {
    return YES;
}

- (void)makeKeyWindow {
    [super makeKeyWindow];
    [self.parentWindow makeKeyWindow];
}
- (void)makeMainWindow {
    [super makeMainWindow];
    [self.parentWindow makeMainWindow];
}
- (void)becomeKeyWindow {
    [super becomeKeyWindow];
}

- (void)becomeMainWindow {
    [super becomeMainWindow];
    [self.parentWindow becomeMainWindow];
}

- (void)resignMainWindow {

}
- (void)resignKeyWindow {

} 
```

[![NSWindow 与不窃取其主/关键状态的子窗口](../Images/3bf7adaa5494d24fe46dd47f778ee045.png)](https://i.stack.imgur.com/q5uFK.png)

# javascript - jquery克隆按钮操作不起作用

> ID：13452761
> 
> 赞同：0
> 
> 时间：2012-11-19T11:22:51.187
> 
> 标签：javascript, jquery, web2py

我有一个带有添加/删除按钮的表格，这些按钮在表格中添加和删除行，每个新行也添加了按钮

这里有我的 html

```
<table>
<tr>
   <th>catalogue</th>
   <th>date</th>
   <th>add</th>
   <th>remove</th>
</tr>
<- target row ->
<tr id="cat_row">
   <td>something</td>
   <td>something</td>
   <td><input id="Add" type="button" value="Add" /></td>
   <td><input id="Remove" type="button" value="Remove" /></td>
</tr>
</- target row ->
</table> 
```

JavaScript：

```
$("#Add").click(function() {
         $('#cat_row').after('<- target row with ->'); // this is only a notation to prevent repeatation
         id++;
});

$("#Remove").click(function() {
         $('#cat_'+id+'_row').remove();
         id--;
}); 
```

请注意，每次添加新行`id`后，例如在单击“添加”按钮**1 次后，此处也会发生更改**

```
<table>
<tr>
   <th>catalogue</th>
   <th>date</th>
   <th>add</th>
   <th>remove</th>
</tr>
<tr id="cat_row">
   <td>something</td>
   <td>something</td>
   <td><input id="Add" type="button" value="Add" /></td>
   <td><input id="Remove" type="button" value="Remove" /></td>
</tr>
<tr id="cat_1_row">
   <td>something</td>
   <td>something</td>
   <td><input id="Add" type="button" value="Add" /></td>
   <td><input id="Remove" type="button" value="Remove" /></td>
</tr>
</table> 
```

现在*新添加的按钮*没有动作我必须总是点击**原始按钮**- 添加/删除

在此之后，我想让**删除按钮****仅**删除单击它的行，例如，如果我单击第 2 行中的按钮，第 2 行将被删除

* * *

**信息：我使用 web2py 2.2.1 和 python 2.7 以及最新版本的 jQuery**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:25:58.250

我认为这会更好，而不是：

```
$('#cat_'+id+_row').remove(); 
```

在您的 onclick 事件中执行此操作：

```
$(this).parent().parent().remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:24:15.860

您不能有两个相同的按钮`id`（“添加”和“删除”都使用重复项）。[`id`值在页面上**必须**是唯一的](http://www.w3.org/TR/html5/global-attributes.html#the-id-attribute)。

您可能会考虑使用一个类，也可以看看事件委托。例如，假设这是您页面上*唯一*的表格（如果不是，只需使选择器更具体），如果您将按钮更改为具有“add-btn”和“remove-btn”类而不是`id`值，那么您可以使用[`delegate`](http://api.jquery.com/delegate/)：

```
$("table").delegate(".add-btn", "click", function() {
    // An add button was pressed, you can find out which
    // row like this:
    var row = $(this).closest('tr');
}); 
```

...对于`.remove-btn`按钮也是如此。

或者，有些人更喜欢使用[`on`](http://api.jquery.com/on)（注意参数的顺序略有不同）：

```
$("table").on("click", ".add-btn", function() {
    // An add button was pressed, you can find out which
    // row like this:
    var row = $(this).closest('tr');
}); 
```

您目前使用哪种风格是一种风格问题。我更喜欢`delegate`清晰，但 jQuery 团队喜欢超重载他们的函数。到目前为止，他们还没有弃用`delegate`，尽管他们确实称其为“已取代”。

# c# - 如何在 C# 中异步接收复杂对象？

> ID：13452765
> 
> 赞同：1
> 
> 时间：2012-11-19T11:22:59.453
> 
> 标签：c#, sockets, asynchronous

编辑： [对我在这里尝试做的事情和答案的更简洁的解释](https://stackoverflow.com/questions/13763456/how-to-concatenate-or-combine-or-join-a-series-of-binarily-serialized-by)

我正在使用 c# 异步套接字从源接收数据。

我的问题是如果要接收更多数据，如何以及在哪里存储接收到的数据？

收到字符串后，我可以使用字符串生成器从 msdn 接收和存储，如下所示：

```
private void ReceiveCallback_onQuery(IAsyncResult ar)
        {
            try
            {
                // Retrieve the state object and the client socket 
                // from the asynchronous state object.
                StateObject state = (StateObject)ar.AsyncState;
                Socket client = state.workSocket;

                // Read data from the remote device.
                int bytesRead = client.EndReceive(ar);

                if (bytesRead > 0)
                {
                    // There might be more data, so store the data received so far.
                    dataReceived += state.buffer; //Does not work (dataReceived is byte[] type)

                    // Get the rest of the data.
                    client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                        new AsyncCallback(ReceiveCallback_onQuery), state);
                }
                else
                {
                    // All the data has arrived; put it in response.
                    if (dataReceived > 1)
                    {
                        response_onQueryHistory = ByteArrayToObject(dataReceived)
                    }
                    // Signal that all bytes have been received.
                    receiveDoneQuery.Set();
                    }
            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }
        } 
```

我不想将接收到的数据转换为字符串，因为在我的情况下，我正在接收一个复杂的对象。

发送的数据是序列化的，我也可以反序列化。

我的问题是如何“持续”从套接字接收数据而不使用字符串生成器来存储它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:29:49.700

这取决于复杂事物在被分解字节中的线下推之前如何序列化，您将接收这些字节并使用用于序列化事物的相同算法/技术将其反序列化回其原始状态。

对于更具体的答案，我会要求您自己更具体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:47:27.023

```
My problem is how and where to store received data if there are more to be received? 
```

可以使用 Buffer.BlockCopy 并将其排队，例如，

```
 int rbytes = client.EndReceive(ar);

            if (rbytes > state.buffer)
            {
                byte[] bytesReceived = new byte[rbytes];
                Buffer.BlockCopy(state.buffer, 0, bytesReceived, 0, rbytes);
                state.myQueue.Enqueue(bytesReceived);                
                    client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                    new AsyncCallback(ReceiveCallback_onQuery), state)
            } 
```

# php - 带有backbone.js 的Zend 框架是个好主意吗？

> ID：13452766
> 
> 赞同：2
> 
> 时间：2012-11-19T11:23:01.467
> 
> 标签：php, zend-framework, backbone.js

我是backbone.js 的新手，我想用backbone.js 创建我的第一个中等规模的网站应用程序。我曾经只使用 zend 框架创建网站。我的问题是：zend 框架与backbone.js 一起使用是否繁重，我的意思是我是否应该为php（Slim）使用其他一些rest 框架？或者换句话说，与 php 一起使用的好的服务器端框架/库是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:40:59.823

我们使用zend 框架和backbone.js，并且集成效果很好。

Zend 框架 (ZF1) 提供了一个抽象的 rest 控制器，它自动处理 GET/POST/DELETE/PUT 请求。[http://framework.zend.com/apidoc/1.9/Zend_Rest/Zend_Rest_Controller.html](http://framework.zend.com/apidoc/1.9/Zend_Rest/Zend_Rest_Controller.html)

在我们的引导程序中，我们为 rest api 控制器设置了一个模块，称为`api`. 请注意您需要为此模块添加一个休息路由器：

```
 $restRoute = new Zend_Rest_Route($frontController);
        $frontController->getRouter()->addRoute('oauth_route', $route, array('api'));); 
```

此模块中的任何控制器都扩展`Zend_Rest_Controller`并实现了 getAction、indexAction、deleteAction 等。

PS。避免`Zend_Rest_Server`& `Zend_Rest_Client`。这些是旧模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:34:22.307

[yiiframework](http://www.yiiframework.com/)作为 PHP 框架是一个不错的选择。

Backbone.js 是 JavaScript MVC 框架，包括 yiiframework 在内的所有 PHP 框架确实是 PHP MVC 框架，PHP 与 Javascript 没有冲突。是的，当然，您可以将backbone.js 与任何PHP 框架一起使用。

[http://www.yiiframework.com/wiki/390/yiibackboneboilerplate-project-setup-for-your-yii-backbonejs-applications/](http://www.yiiframework.com/wiki/390/yiibackboneboilerplate-project-setup-for-your-yii-backbonejs-applications/)

# winapi - 无线鼠标和键盘的window API

> ID：13452784
> 
> 赞同：0
> 
> 时间：2012-11-19T11:24:32.270
> 
> 标签：winapi

是否有任何窗口 API 来捕捉无线鼠标和键盘发送的信号？我知道这个无线设备的信号在连接时总是会发送多远，但对于有线鼠标/键盘，当我们移动设备时，只是为了发送信号..如果我错了，请纠正我..

如果是上述情况，那么请让我知道任何 API 来捕捉无线鼠标/键盘发送的信号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:31:05.987

> 是否有任何窗口API

Windows API（这是一个用户模式 ​​API）并不关心你有什么样的鼠标：串口、USB、无线...

鼠标硬件连接在内核中由设备驱动程序处理。

# search - 在一组中找到最大值

> ID：13452785
> 
> 赞同：0
> 
> 时间：2012-11-19T11:24:32.307
> 
> 标签：search, sorting, big-o

如果我有一个数字列表，其中数字增加到一个点然后在该点之后减少，是否存在有限数量的猜测，与我必须做出的集合大小无关才能找到最大值？

值之间的距离是任意的，并且增加侧的值的数量可以不同于减少侧的值的数量。

最好的方法是什么？检查元素 1，然后是最后一个元素，然后是中间的一半？并重复？或者更复杂的东西？

这种算法的处理时间是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:40:57.353

您可以根据列表中的元素数量尝试类似于有序搜索的递归算法。

伪代码：

```
List search(int index, List listpart){
   if(listpart.length()==1){ // already found
       return listpart
   }
   else if(listpart(index+1)>listpart(i) && listpart(index-1)<listpart(i)){ //search right part
      List listpart_tmp = getlistpart(listpart, index, listpart.length())
      return search(index+(listpart.length()/4), listpart_tmp
   }
   else if(listpart(index+1)<listpart(i) && listpart(index-1)>listpart(i)){ //search left part
      List listpart_tmp = getlistpart(listpart, 0, index)
      return search(index-(listpart.length()/4), listpart_tmp
   }
   else if(listpart(index+1)<listpart(i) && listpart(index-1)<listpart(i)){ //found 
      return getlistpart(listpart, index, index)
   }
} 
```

功能

```
getlistpart 
```

是一个函数，它返回一个列表，该列表由给定索引之间的原始列表中的元素组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:39:31.757

您可以使用二分搜索将两个相邻元素而不是一个元素与固定值进行比较。从 a := 0, b := n, i := (a+b)/2 开始，比较 element(i) 和 element(i+1)。如果你注意到 e(i+1) > e(i)，你就知道断点在 i 之后，所以设置 a := i。如果 e(i) < e(i-1)，则相反，你设置 b := i。

复杂度将是 O(log n)。它会比常规的二进制搜索稍微慢一些，因为您需要更多的比较。

# node.js - npm 安装错误 ENOTDIR

> ID：13452791
> 
> 赞同：16
> 
> 时间：2012-11-19T11:25:06.823
> 
> 标签：node.js, npm

我对 Node.js 非常陌生，并尝试使用 npm 安装 Flatiron，但它给了我一个错误。

```
sudo npm install flatiron -g 
```

我得到 -

```
npm http GET https://registry.npmjs.org/flatiron
npm http 304 https://registry.npmjs.org/flatiron
npm ERR! Error: ENOTDIR, mkdir '/home/siddharthsaha/tmp/npm-28554/1353323290836-0.20847953506745398'
npm ERR! If you need help, you may report this log at:
npm ERR!     <http://github.com/isaacs/npm/issues>
npm ERR! or email it to:
npm ERR!     <npm-@googlegroups.com>

npm ERR! System Linux 3.2.0-24-generic
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install" "flatiron" "-g"
npm ERR! cwd /home/siddharthsaha/denarit
npm ERR! node -v v0.8.14
npm ERR! npm -v 1.1.65
npm ERR! path /home/siddharthsaha/tmp/npm-28554/1353323290836-0.20847953506745398
npm ERR! code ENOTDIR
npm ERR! errno 27
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /home/siddharthsaha/denarit/npm-debug.log
npm ERR! not ok code 0 
```

这里有什么问题？我没有线索。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T17:10:12.167

刚刚解决了问题。这是因为`tmp`在主目录中调用了一个文件。

```
rm -rf ~/tmp
sudo npm cache clear
sudo npm install -g node 
```

另外...如果您尝试安装 npm，则同样的错误和解决方案适用 - 删除`~/tmp`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-19T11:46:57.140

尝试

```
sudo mkdir -p /home/siddharthsaha/tmp
sudo npm cache clear 
```

在开始安装脚本之前，因为`npm http 304 https://registry.npmjs.org/flatiron`line 声明这个模块来自缓存。并且还`ENOTDIR`声明没有目录。因此，清空缓存将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T17:51:01.367

以下是在没有 root 的情况下从源安装给定版本的步骤注意 - 这会安装 nodejs，它为您提供 node 和 npm，它们在每个版本中组合在一起。

重新开始删除之前的 node.js 和 npm 安装以及这些：

```
sudo mv ~/.npmrc ~/.npmrc_ignore
sudo mv ~/.npm   ~/.npm_ignore
sudo mv ~/tmp    ~/tmp_ignore
sudo mv ~/.npm-init.js ~/.npm-init.js_ignore 
```

以自己的身份安装 nodejs 和 npm，而不是 root 执行以下命令（OSX/linux）：

```
export NODE_PARENT=${HOME}/bin_0_10_32

mkdir ${NODE_PARENT} 
```

下载源： [http ://nodejs.org/download/](http://nodejs.org/download/)

```
cd node-v0.xxxx

./configure   --prefix=${NODE_PARENT}/nodejs

make -j8
make install   #  IMPORTANT this is NOT using sudo
               # not wanted since installing into $USER owned $NODE_PARENT 
```

将其放入上述 --prefix 定义的目录中

```
export PATH=${NODE_PARENT}/nodejs/bin:$PATH 
```

定义环境变量 NODE_PATH 以便节点可以找到模块的目录，否则 npm install xxx 会将新安装的模块放入当前目录：

```
export NODE_PATH=${NODE_PARENT}/nodejs/lib/node_modules 
```

当您使用语法时： npm install -g some_cool_module 全局的 -g 将其安装到目录 $NODE_PATH 而不是您的 $PWD

nodejs install 也为您提供 npm ：

```
ls -la ${NODE_PARENT}/nodejs/bin 
```

您使用全局标志 -g 安装的后续模块将自动将它们的 ~binaries~ 放入上面的 bin dir ... 就像 browserify

现在将以上三个 export xxx=yyy 命令放入您的 ~/.bashrc 或其他类似的命令中，以便设置您的环境

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T13:31:25.617

我直接删除了npm-debug.log的文件。那对我来说没关系。

# ruby-on-rails - wicked_pdf 太多图像 = 损坏的 PDF

> ID：13452792
> 
> 赞同：1
> 
> 时间：2012-11-19T11:25:08.450
> 
> 标签：ruby-on-rails, pdf-generation, wkhtmltopdf, wicked-pdf

wicked_pdf（或 wkhtmltopdf）在生产模式下表现得很奇怪。找到问题需要一些时间，但似乎我的 PDF 损坏的原因是图像太多或文件太大。

当我尝试使用 300dpi 图片（4 MB）时，它坏了。当我降低到 72 dpi 时，它会起作用……有时。当我只使用缩略图时，它总是有效的。

我做了一个测试：一张带有小测试图像的封面有效。还有两张封面，……最多可以工作 30 张。当我附上封面 31 时，我的 pdf 总是损坏。

在开发中一切都很好，300dpi 图像，5 MB，50 MB，没问题。

有人知道这个问题吗？以及如何解决？:-)

PS：当我通过命令行执行 wkhtmltopdf 时，它根本没有显示任何图像，因此很难测试 wkhtmltopdf 或 wicked_pdf 是否是问题。我真的不喜欢生成 PDF！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:26:54.367

wkthmltopdf 尽最大努力收集并呈现 pdf 中的所有资源，就像为其提供支持的 webkit 浏览器一样。如果它无法及时检索和呈现它们，它有时会输出未完成的 pdf。

我们可以检查或做一些事情来优化这个过程。

确保您的所有资产（图像、javascript、css）都使用像“http://images/foo.jpg”这样的完整路径正确呈现，而不是像“/foo.jpg”这样的相对路径。

这会导致 wkhtmltopdf 通过网络获取这些资产，有时这还不够快，所以如果可以，请尝试使用文件系统资源链接，例如 'file:///projects/foo/images/foo.jpg '。wicked_pdf_image 和其他相关帮助程序会尝试为您执行此操作，但根据您使用的 Rails 版本，结果可能会有所不同。

wkhtmltopdf 使用大量内存和 cpu（尤其是大图像），请确保您的生产服务器不会因为它而饿死。

wicked_pdf 的 git 主版本具有使用临时文件而不是 I/O 流的优化。将您的 Gemfile 指向该 git://github.com/mileszs/wicked_pdf.git，看看这是否对您有所帮助。gem 的新版本可能会在接下来的几天内发布（我为 wicked_pdf 做了很多维护和发布管理）。

请回来报告。我很想知道上述任何一项或全部是否能改善这种情况。

# node.js - 按 mongoDB (mongoose) 中的虚拟字段排序

> ID：13452795
> 
> 赞同：13
> 
> 时间：2012-11-19T11:25:17.670
> 
> 标签：node.js, mongodb, sorting, mongoose

假设我有一些架构，它有一个像这样的虚拟字段

```
var schema = new mongoose.Schema(
{
    name: { type: String }
},
{
    toObject: { virtuals: true },
    toJSON: { virtuals: true }
});

schema.virtual("name_length").get(function(){
    return this.name.length;
}); 
```

在查询中是否可以按虚拟字段对结果进行排序？就像是

```
schema.find().sort("name_length").limit(5).exec(function(docs){ ... }); 
```

当我尝试这个时，结果很简单，没有排序......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T11:51:06.313

您将无法按虚拟字段排序，因为它们未存储到数据库中。

> 虚拟属性是便于使用但不会持久化到 mongodb 的属性。

[http://mongoosejs.com/docs/2.7.x/docs/virtuals.html](http://mongoosejs.com/docs/2.7.x/docs/virtuals.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-16T14:41:49.310

Schema 中定义的 Virtuals 不会注入到生成的 MongoDB 查询中。一旦从数据库中检索到这些函数，它们就会在适当的时刻为每个文档运行。

为了达到您想要实现的目标，您还需要在 MongoDB 查询中定义虚拟字段。例如，在聚合的 $project 阶段。

但是，在按虚拟字段排序时需要牢记以下几点：

*   投影文档只在内存中可用，所以如果我们只添加一个字段并将搜索结果的整个文档在排序之前存储在内存中，将会带来巨大的性能成本
*   由于以上原因，排序时根本不会使用索引

这是一个关于如何在保持相对良好性能的同时按虚拟字段排序的一般示例：

想象一下，您有一组球队，每个球队都包含直接存储在文档中的球员数组。现在，要求要求我们按照 favouredPlayer 的排名对这些球队进行排序，其中 favouredPlayer 基本上是一个虚拟属性，包含在特定条件下球队最相关的球员（在这个例子中，我们只想考虑进攻和防守球员） . 此外，上述标准取决于用户的选择，因此不能保留在文档中。

最重要的是，我们的“团队”文档非常大，所以为了减轻内存排序对性能的影响，我们只投影我们需要排序的字段，然后在限制结果后恢复原始文档。

查询：

```
[
  // find all teams from germany
  { '$match': { country: 'de' } },
  // project only the sort-relevant fields
  // and add the virtual favoredPlayer field to each team
  { '$project': {
    rank: 1,
    'favoredPlayer': {
      '$arrayElemAt': [
        {
          // keep only players that match our criteria
          $filter: {
            input: '$players',
            as: 'p',
            cond: { $in: ['$$p.position', ['offense', 'defense']] },
          },
        },
        // take first of the filtered players since players are already sorted by relevance in our db
        0,
      ],
    },
  }},
  // sort teams by the ranking of the favoredPlayer
  { '$sort': { 'favoredPlayer.ranking': -1, rank: -1 } },
  { '$limit': 10 },
  // $lookup, $unwind, and $replaceRoot are in order to restore the original database document
  { '$lookup': { from: 'teams', localField: '_id', foreignField: '_id', as: 'subdoc' } },
  { '$unwind': { path: '$subdoc' } },
  { '$replaceRoot': { newRoot: '$subdoc' } },
]; 
```

对于您上面给出的示例，代码可能如下所示：

```
var schema = new mongoose.Schema(
  { name: { type: String } },
  {
    toObject: { virtuals: true },
    toJSON: { virtuals: true },
  });

schema.virtual('name_length').get(function () {
  return this.name.length;
});

const MyModel = mongoose.model('Thing', schema);

MyModel
  .aggregate()
  .project({
    'name_length': {
      '$strLenCP': '$name',
    },
  })
  .sort({ 'name_length': -1 })
  .exec(function(err, docs) {
    console.log(docs);
  }); 
```

# path - 如何为 mtp 设备构建路径（可在文件夹浏览对话框中使用）？

> ID：13452798
> 
> 赞同：2
> 
> 时间：2012-11-19T11:25:24.130
> 
> 标签：path, copy, folderbrowserdialog, wpd, mtp

我实现了从 windows pc 到 android 设备的文件传输，该设备通过 MTP 连接到计算机。复制实现已准备就绪（我使用了此示例：[http](http://code.msdn.microsoft.com/windowsdesktop/Portable-Devices-COM-API-fd4a5f7d) ://code.msdn.microsoft.com/windowsdesktop/Portable-Devices-COM-API-fd4a5f7d ）。

现在我想改进 UI，我想提供一个文件夹选择对话框，用户可以在其中选择一个 MTP 设备文件夹，我将在其中保存文件（使用 FOS_PICKFOLDERS 的 CLSID_FileOpenDialog 效果很好）。请注意，简单的文件保存对话框不起作用，因为您会从对话框中收到错误消息：“您无法在此处保存”。

文件夹浏览的结果将类似于：
::{20D04FE0-3AEA-1069-A2D8-08002B30309D}\\?\usb#vid_04e8&pid_6860&mi_00#6&2296b879&0&0000#{6ac27878-a6fa-4155-ba85-f98f491d4f33}\ ,SECZ9519043CHOHB,12635222016}{01B8016B-0164-00F2-E100-55012C014001}

usb#vid_04e8&pid_6860&mi_00#6&2296b879&0&0000#{6ac27878-a6fa-4155-ba85-f98f491d4f33}
我知道这是设备，IPortableDeviceManager 使用它作为设备 ID。

SID-{10001,SECZ9519043CHOHB,12635222016}\{01B8016B-0164-00F2-E100-55012C014001}
这是设备上的路径。这些 GUID 是设备对象的 WPD_OBJECT_PERSISTENT_UNIQUE_ID 属性。

有了这些信息，我可以选择设备并在设备中找到文件夹，这样我就可以进行复制了。

我的问题是我还想在设备上的文件夹浏览对话框中选择一个默认目录，但我无法创建上面提到的路径。请注意，如果我将其作为默认路径，它将在正确的文件夹中开始浏览。

有问题的部分是起始 GUID，我无法获得：
::{20D04FE0-3AEA-1069-A2D8-08002B30309D}

我还查看了注册表。我只在一个条目中找到了这个 GUID：
HKEY_USERS\S-1-5-21-2044730494-4069800027-1247311059-1000\Software\Microsoft\Windows\CurrentVersion\Explorer\CLSID{20D04FE0-3AEA-1069-A2D8-08002B30309D}\ DefaultIcon
哪个值是这样的：
C:\Windows\System32\imageres.dll,-109
（CLSID 子文件夹包含更多的 GUID，所以我找不到，这是正确的）

你知道如何让这个 GUID 能够构建整个默认路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:31:28.363

该 guid 代表计算机文件夹，MTP 设备的外壳命名空间扩展是计算机文件夹委托。您可以将此 guid 用作常量来构造文件夹浏览器的解析名称。

问候，丽莎

# perl - 如何使用 perl 查找 IP 地址是否可 ping？

> ID：13452799
> 
> 赞同：2
> 
> 时间：2012-11-19T11:25:25.533
> 
> 标签：perl, networking, ping

如何查找 IP 地址是否可 ping？另外，如何使用 perl 脚本找到可 ping 的 IP 是静态的还是动态的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:08:15.817

看看[Net::Ping](https://metacpan.org/release/Net-Ping)模块；

```
#!/usr/bin/env perl
#
use strict;
use warnings;

use Net::Ping;

my $ip_address = shift || die "Need an IP address (or hostname).\n";

my $p = Net::Ping->new();
if ( $p->ping($ip_address) ) {
    print "Success!\n";
}
else {
    print "Fail!\n";
} 
```

找出一个 IP 地址是动态的还是静态的需要更多的工作。看看[这个](https://serverfault.com/questions/143062/finding-out-if-an-ip-address-is-static-or-dynamic)和[这个](https://stackoverflow.com/questions/11537401/detect-whether-public-ip-address-is-dynamic-or-static)帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:16:59.710

这样的事情可能有助于检查主机是否响应 ICMP：

```
#!/usr/bin/perl

use strict;
use warnings;
use Net::Ping;

my (@alive_hosts, @dead_hosts);

my $ping = Net::Ping->new;

while (my $host = <DATA>) {
        next if $host =~ /^\s*$/;
        chomp $host;
        if ($ping->ping($host)) {
                push @alive_hosts, $host;
        } else {
                push @dead_hosts, $host;
        }
}

if (@alive_hosts) {
        print "Alive hosts\n" . "-" x 10 . "\n";
        print join ("\n", sort @alive_hosts) . "\n\n"
}

if (@dead_hosts) {
        print "Dead hosts\n" . "-" x 10 . "\n";
        print join ("\n", sort @dead_hosts) . "\n\n";
}

__DATA__
server1
server2
server3 
```

The result would be something like:

```
Alive hosts
----------
server1
server2

Dead hosts
----------
server3 
```

I'm not sure about your second requirement.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T11:36:47.103

> 如何查找 IP 地址是否可 ping？

```
[mpenning@tsunami ~]$ perl -e '$retval=system("ping -c 2 172.16.1.1");if ($retval==0) {print "It pings";} else { print "ping failed"; }'
PING 172.16.1.1 (172.16.1.1) 56(84) bytes of data.
64 bytes from 172.16.1.1: icmp_req=1 ttl=255 time=0.384 ms
64 bytes from 172.16.1.1: icmp_req=2 ttl=255 time=0.416 ms

--- 172.16.1.1 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 999ms
rtt min/avg/max/mdev = 0.384/0.400/0.416/0.016 ms
It pings[mpenning@tsunami ~]$ 
```

以更友好的形式...

```
$retval=system("ping -c 2 172.16.1.1");
if ($retval==0) {
    print "It pings\n";
} else {
    print "ping failed\n";
} 
```

> 另外，如何使用 perl 脚本找到可 ping 的 IP 是静态的还是动态的？

如果您可以直接访问 DHCP 服务器，则只能执行此操作，或者您可以嗅探子网并查找 DHCP 数据包。如果没有更多信息，我们还不能回答这个问题。

# azure - 为什么 TableQuery 不支持我的 TakeLimit？

> ID：13452801
> 
> 赞同：10
> 
> 时间：2012-11-19T11:25:33.677
> 
> 标签：azure, azure-storage, azure-table-storage

我想用一个简单的 TableQuery 从我的 Azure 表中获取前*n行。*但是使用下面的代码，无论我对 Take 的限制如何，都会获取所有行。

我究竟做错了什么？

```
int entryLimit = 5;

var table = GetFromHelperFunc();

TableQuery<MyEntity> query = new TableQuery<MyEntity>()
    .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "MyPK"))
    .Take(entryLimit);

List<FeedEntry> entryList = new List<FeedEntry>();
TableQuerySegment<FeedEntry> currentSegment = null;

while (currentSegment == null || currentSegment.ContinuationToken != null)
{
    currentSegment = table.ExecuteQuerySegmented(query, this.EntryResolver, currentSegment != null ? currentSegment.ContinuationToken : null);
    entryList.AddRange(currentSegment.Results);
}

Trace.WriteLine(entryList.Count) // <-- Why does this exceed my limit? 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T12:19:39.057

存储 SDK 上的 Take 方法不像在 LINQ 中那样工作。想象一下你做这样的事情：

```
TableQuery<TableEntity> query = new TableQuery<TableEntity>()
                .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "temp"))
                .Take(5);
var result = table.ExecuteQuery(query); 
```

当您开始迭代时，`result`您最初只会得到 5 个项目。但在下面，如果您继续遍历`result`，SDK 将继续查询该表（并进入下一个“页面”，共 5 个项目）。

如果我的表中有 5000 个项目，则此代码将输出所有 5000 个项目（在 SDK 下将执行 1000 个请求，每个请求获取 5 个项目）：

```
TableQuery<TableEntity> query = new TableQuery<TableEntity>()
                .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "temp"))
                .Take(5);
var result = table.ExecuteQuery(query);
foreach (var item in result)
{
    Trace.WriteLine(item.RowKey);
} 
```

以下代码将在 1 个请求中准确获取 5 个项目并停在那里：

```
TableQuery<TableEntity> query = new TableQuery<TableEntity>()
                .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "temp"))
                .Take(5);
var result = table.ExecuteQuery(query);
int index = 0;
foreach (var item in result)
{
    Console.WriteLine(item.RowKey);
    index++;
    if (index == 5)
        break;
} 
```

实际上，**Take()**方法设置页面大小或“获取计数”（[TableQuery](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.table.tablequery.takecount.aspx)上的 TakeCount 属性）。但是，如果您只想要 5 条记录，您仍然可以按时停止迭代。

在您的示例中，您应该修改 while 循环以在达到 TakeCount（您通过调用 Take 设置）时停止：

```
while (entryList.Count < query.TakeCount && (currentSegment == null || currentSegment.ContinuationToken != null))
{
    currentSegment = table.ExecuteQuerySegmented(query, currentSegment != null ? currentSegment.ContinuationToken : null);
    entryList.AddRange(currentSegment.Results);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-04T07:07:20.240

AFAIK 存储客户端库 2.0 在 Take 实现中有一个错误。它已在 2.0.4 版中修复。[在http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/06/windows-azure-storage-client-library-2-0-tables-deep-dive.aspx)
阅读最后的评论

[编辑] 原始 MSDN 帖子不再可用。仍然存在于 WebArchive： [http ://web.archive.org/web/20200722170914/https://docs.microsoft.com/en-us/archive/blogs/windowsazurestorage/windows-azure-storage-client-library-2 -0-tables-deep-dive](http://web.archive.org/web/20200722170914/https://docs.microsoft.com/en-us/archive/blogs/windowsazurestorage/windows-azure-storage-client-library-2-0-tables-deep-dive)

# java - Oracle Number 数据类型值插入

> ID：13452802
> 
> 赞同：0
> 
> 时间：2012-11-19T11:25:32.163
> 
> 标签：java, oracle10g

我正在执行以下查询，但它正在插入第一个字段的部分值，即 95362 而不是 95362-07

插入查询::

```
INSERT INTO ACCIDENT VALUES(95362-07,'Orthoptic education on visual ergonomics','Orthoptic education on visual ergonomics'); 
```

获取表中的值::

```
95362,Orthoptic education on visual ergonomics,Orthoptic education on visual ergonomics. 
```

表结构：

```
desc accident

Name                           Null     Type                                                                                                                                                                                          
--------------------------------------------------
ID                                      NUMBER                                                                                                                                                                                        
ACC_NAME                                VARCHAR2(4000)                                                                                                                                                                                
ACC_DESC                                VARCHAR2(4000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:56:21.290

这是问题所在，您的第一列期望数据类型为`Number`

```
desc accident

Name                           Null     Type                                                                                                                                                                                          
--------------------------------------------------
ID                                      NUMBER                                                                                                                                                                                        
ACC_NAME                                VARCHAR2(4000)                                                                                                                                                                                
ACC_DESC                                VARCHAR2(4000) 
```

然后，当您插入查询时，仅计算第一个参数的 NUMBER 部分，即`95362`.

要将您的 ID 记录存储在表单中，`XXXXX-XX`您必须将`ID`列更改为`VARCHAR2`数据类型。否则你会一直得到这个结果。

我希望它有所帮助。干杯

# android - PhoneGap Build for windows phone 等平台

> ID：13452809
> 
> 赞同：0
> 
> 时间：2012-11-19T11:26:03.440
> 
> 标签：android, windows-phone-7, cordova

我已经在 windows phone 的 phonegap 中启动了一个项目，并创建了一个登录表单。后端我已经编写了一些 c# 代码来执行一些 api 方法并检查登录。

我已经构建了 phonegap 并获得了所有平台的输出文件。它是否与Windows以外的所有其他平台兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T12:41:21.747

恐怕您的 c# 代码将与其他平台不兼容。您要么需要为每个平台编写[Phonegap 插件，要么编写 JavaScript 来检查登录。](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html)

根据您的情况，Phonegap 具有用于访问设备文件系统或使用浏览器存储（Web SQL 数据库）的 API。

有关详细信息，请参阅[Phonegap API](http://docs.phonegap.com/en/edge/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:37:51.640

为了使用跨平台，我创建了一个 Web 服务并使用 ajax 调用调用 Web 服务的方法，如果 Web 服务托管在您应该使用的任何其他域中

```
$.mobile.allowCrossDomainPages = true;
$.support.cors = true; 
```

参考更多：- [http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

# hadoop - Hadoop setInputPathFilter 错误

> ID：13452820
> 
> 赞同：2
> 
> 时间：2012-11-19T11:26:55.960
> 
> 标签：hadoop, io

我正在使用 Hadoop 0.20.2（无法更改）并且我想在我的输入路径中添加一个过滤器。数据如下所示：

```
/path1/test_a1
/path1/test_a2
/path1/train_a1
/path1/train_a2 
```

我只想处理所有带有*火车*的文件。

看一下 FileInputFormat 类建议使用：

```
 FileInputFormat.setInputPathFilter(Job job, Class<? extends PathFilter> filter) 
```

这就是我的问题开始的地方，因为[PathFilter](http://hadoop.apache.org/docs/r0.20.2/api/org/apache/hadoop/fs/PathFilter.html)是一个接口 - 当然，我可以扩展接口，但我仍然没有实现。因此，我实现了接口：

```
class TrainFilter implements PathFilter
{
   boolean accept(Path path)
   {
      return path.toString().contains("train");
   }
} 
```

当我使用 TrainFilter 作为 PathFilter 代码编译时，但是当我运行它时，由于输入路径被搞砸了，我得到一个异常。如果不设置过滤器，我的代码会运行 /path1 下的所有文件，但是，在设置过滤器时，它会抛出错误：

```
InvalidInputException: Input path does not exist hdfs://localhost:9000/path1 
```

以下是我在驱动程序代码中的设置方式：

```
job.setMapperClass(....class);
job.setInputFormatClass(....class);
job.setMapOutputKeyClass(...class);
job.setMapOutputValueClass(Text.class);
job.setOutputKeyClass(IntWritable.class);
job.setOutputValueClass(IntWritable.class);

FileInputFormat.setInputPathFilter(job, TrainFilter.class);
FileInputFormat.addInputPath(job, new Path("/path1/"));
FileOutputFormat.setOutputPath(job, new Path("/path2/"));
job.waitForCompletion(true); 
```

关于我在这里做错了什么的任何建议？

编辑：我发现了问题。对 PathFilter 的第一次调用始终是目录本身 (/path1)，因为它不包含 ("train")，所以目录本身是无效的，因此会引发异常。这让我想到了另一个问题：我如何测试任意路径是否是目录？据我所知，我需要一个对 FileSystem 的引用，它不是 PathFilter 的默认参数之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T12:57:49.617

或者，您可以尝试遍历给定目录中的所有文件并检查文件名是否以*train*开头。例如：

```
 Job job = new Job(conf, "myJob");
        List<Path> inputhPaths = new ArrayList<Path>();

        String basePath = "/user/hadoop/path";
        FileSystem fs = FileSystem.get(conf);
        FileStatus[] listStatus = fs.globStatus(new Path(basePath + "/train*"));
        for (FileStatus fstat : listStatus) {
            inputhPaths.add(fstat.getPath());
        }

        FileInputFormat.setInputPaths(job,
                (Path[]) inputhPaths.toArray(new Path[inputhPaths.size()])); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T19:27:57.943

快速修复，如果路径包含“test”，您可以将路径列入黑名单而不是像 return false 那样列入白名单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T01:32:29.843

您可以通过让 Filter 实现 Configurable 接口（或扩展 Configured 类）来获取 FileSystem 实例，并在 setConf 方法中创建 fileSystem 实例变量：

```
class TrainFilter extends Configured implements PathFilter
{
   FileSystem fileSystem;

   boolean accept(Path path)
   {
      // TODO: use fileSystem here to determine if path is a directory
      return path.toString().contains("train");
   }

   public void setConf(Configuration conf) {
     if (conf != null) {
       fileSystem = FileSystem.get(conf);
     }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T15:03:13.973

我知道这是一个非常古老的问题，但是当它的所有示例都失败时，它帮助我找到了排除路径的答案，例如[这里](https://holynull.gitbooks.io/oreilly-hadoop-the-definitive-guide-4th-edition/content/page/querying-the-filesystem.html)记录的。

我只是想警告@ChrisWhite 给出的答案，因为我正在使用 Hadoop 3.3.0 API 并且当我要从配置中拉出一些东西时，使用 setConf 抛出了 NullPointerException。我发现相反，我将保留`extends Configured`在 PathFilter 签名中，但`getConf().get(<your configuration parameter name>)`只要您需要从作业配置中获得所需的内容，就可以将其放入。

所以，我的排除 PathFilter 看起来像这样：

```
public static class ExcludedPathsFilter extends Configured implements PathFilter {

    public boolean accept(Path includePathGlob){
        //debugging
        System.out.println("excludedPath parameter is "+getConf().get("excludedPath")+", includePath parameter is "+includePathGlob.toString()+" and !includePathGlob.toString().contains(getConf().get(\"excludedPath\")) is "+!includePathGlob.toString().contains(getConf().get("excludedPath")));
        return !includePathGlob.toString().contains(getConf().get("excludedPath"));
    }

} 
```

# java - 来自点数组列表的java圆识别

> ID：13452821
> 
> 赞同：3
> 
> 时间：2012-11-19T11:27:05.307
> 
> 标签：java, arraylist, detection, geometry

我目前有一个来自画布上手绘图的点数组列表。我想知道是否有一个简单的算法来检测该形状是否代表一个圆圈。我已经对此进行了一些研究，我指出的主要项目是霍夫变换或位图图像，但这两者似乎都有点过头了我需要它的顶部。任何指向算法或实现的指针都会非常有帮助。

提前感谢sansoms，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:51:44.833

![在此处输入图像描述](../Images/6f8847b8339f4fe922219d6b60254c62.png)

如果我正确解释了您的问题，您想知道所有点是否都在一个圆圈上。

如图所示，我们从列表中选择三个点 A、B、C 并计算假定圆的原点 O。通过检查 O 与列表中每个点之间的距离，我们可以得出这些点是否在一个圆上的结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:35:44.930

也许这个答案可以给你一些想法：[https ://stackoverflow.com/a/940041/12860](https://stackoverflow.com/a/940041/12860)

简而言之：计算二阶导数。如果它相当一致，它可能是一个圆圈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:47:49.807

阅读您的评论，绘制圆的更简单方法是用户单击中心点，然后拖动圆的半径。它的计算量要少得多，用户绘制起来也更容易。

您可以对矩形或任何其他凸多边形做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T13:49:21.647

如果您不知道用户想要绘制什么（例如，圆、椭圆、直线或矩形），您可以使用一些基本的优化算法来找到与手绘点最匹配的形状。

*   对于每个基本形状（椭圆、矩形、三角形、直线等），创建该形状的随机实例并测量给定点的误差
*   （单独地）优化每个形状，直到椭圆最匹配给定点，矩形最匹配点，最佳三角形等。
*   选择误差最小的形状并绘制它

# javascript - WebDriver executeAsyncScript 与 executeScript

> ID：13452822
> 
> 赞同：39
> 
> 时间：2012-11-19T11:27:11.533
> 
> 标签：javascript, testing, selenium, webdriver, qa

executeAsyncScript 和 executeScript 有什么区别？如何使用诸如 window.onload 之类的事件？我尝试过这样的事情

```
((JavascriptExecutor) driver).executeAsyncScript("window.onload = function() {alert('Hello')}"); 
```

但是当然它没有用......所以如果有人知道它是如何工作的，请写一个例子

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-11-22T19:53:45.717

（保持*简单*，*正确*。）

`execteScript`和之间的相关区别`executeAsyncScript`是：

调用的函数`executeAsyncScript`将“完成回调”作为最后一个参数，*必须*调用它来表示脚本已完成执行。

这允许它与仅在使用回调时“完成”的代码一起使用 - 例如。setTimeout 或异步 XHR。如果在超时限制内未调用“完成回调”，则返回的承诺将被拒绝。

根据[webdriver.WebDriver.executeAsyncScript](https://www.protractortest.org/#/api?view=webdriver.WebDriver.prototype.executeAsyncScript)文档：

> 与使用 #executeScript 执行同步 JavaScript 不同，使用 [#executeAsyncScript] 执行的脚本*必须通过调用提供的回调显式地发出信号它们已完成*。此回调将始终作为最后一个参数注入到执行的函数中。

也就是说，***这两个函数都会阻塞 WebDriver 控制流***，直到它们完成 - 要么在代码末尾运行，`executeScript`要么在调用“完成回调”时使用`executeAsyncScript`：名称中的“异步”表示使用的信号机制，并不意味着/暗示JavaScript 代码实际上是相对于 WebDriver 异步执行的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-19T12:34:01.093

我用`executeScript`. 提供的示例：

```
String cssSelector="...blablabla...";
JavascriptExecutor js = (JavascriptExecutor) driver;
StringBuilder stringBuilder = new StringBuilder();
stringBuilder.append("document.getElementById(\'"+cssSelector +"\').click();");
js.executeScript(stringBuilder.toString()); 
```

关于警报的详细信息，存在已知问题。你可以[在这里获取详细信息](http://code.google.com/p/selenium/issues/detail?id=2760)

根据文档的区别是：

> **执行脚本**
> 
> ```
> public java.lang.Object executeScript(java.lang.String script,
>                              java.lang.Object... args) 
> ```
> 
> 从接口复制的描述：JavascriptExecutor *在当前选定的框架或窗口的上下文中执行 JavaScript。提供的脚本片段将作为匿名函数的主体执行。在脚本中，使用 document 来引用当前文档。请注意，一旦脚本完成执行，局部变量将不可用，但全局变量将保持不变。如果脚本有返回值（即如果脚本包含return语句），那么将采取以下步骤：*
> 
> *   对于 HTML 元素，此方法返回一个 WebElement
> *   对于小数，返回 Double
> *   对于非十进制数，返回 Long
> *   对于布尔值，返回一个布尔值
> *   对于所有其他情况，返回一个字符串。
> *   对于数组，返回一个 List，其中每个对象都遵循上述规则。我们支持嵌套列表。
> *   除非值为null或者没有返回值，其中返回null
> 
> 参数必须是数字、布尔值、字符串、WebElement 或上述任意组合的列表。如果参数不符合这些条件，将引发异常。参数将通过“arguments”魔术变量提供给 JavaScript，就好像该函数是通过“Function.apply”调用的一样
> 
> 指定者：接口 JavascriptExecutor 中的 executeScript 参数： script - 要执行的 JavaScript args - 脚本的参数。可能为空 返回：Boolean、Long、String、List 或 WebElement 之一。或为空。
> 
> **执行异步脚本**
> 
> ```
> public java.lang.Object executeAsyncScript(java.lang.String script,
>                                   java.lang.Object... args) 
> ```
> 
> 从接口复制的描述：JavascriptExecutor *在当前选定的框架或窗口的上下文中执行一段异步的 JavaScript。与执行同步 JavaScript 不同，使用此方法执行的脚本必须通过调用提供的回调显式地表明它们已完成。此回调始终作为最后一个参数注入到执行的函数中。*传递给回调函数的第一个参数将用作脚本的结果。该值的处理方式与同步情况相同。
> 
> **示例 #1：在被测浏览器中执行休眠。**
> 
> ```
>  long start = System.currentTimeMillis();
>    ((JavascriptExecutor) driver).executeAsyncScript(
>        "window.setTimeout(arguments[arguments.length - 1], 500);");
>    System.out.println(
>        "Elapsed time: " + (System.currentTimeMillis() - start)); 
> ```
> 
> **示例 #2：将测试与 AJAX 应用程序同步：**
> 
> ```
>  WebElement composeButton = driver.findElement(By.id("compose-button"));
>    composeButton.click();
>    ((JavascriptExecutor) driver).executeAsyncScript(
>        "var callback = arguments[arguments.length - 1];" +
>        "mailClient.getComposeWindowWidget().onload(callback);");
>    driver.switchTo().frame("composeWidget");
>    driver.findElement(By.id("to")).sendKeys("bog@example.com"); 
> ```
> 
> **示例 #3：注入 XMLHttpRequest 并等待结果：**
> 
> ```
>  Object response = ((JavascriptExecutor) driver).executeAsyncScript(
>        "var callback = arguments[arguments.length - 1];" +
>        "var xhr = new XMLHttpRequest();" +
>        "xhr.open('GET', '/resource/data.json', true);" +
>        "xhr.onreadystatechange = function() {" +
>        "  if (xhr.readyState == 4) {" +
>        "    callback(xhr.responseText);" +
>        "  }" +
>        "}" +
>        "xhr.send();");
>    JSONObject json = new JSONObject((String) response);
>    assertEquals("cheese", json.getString("food")); 
> ```
> 
> 脚本参数必须是数字、布尔值、字符串、WebElement 或上述任意组合的列表。如果参数不符合这些条件，将引发异常。这些参数将通过“arguments”变量提供给 JavaScript。
> 
> 指定者：接口 JavascriptExecutor 中的 executeAsyncScript 参数： script - 要执行的 JavaScript。args - 脚本的参数。可能是空的。返回： Boolean、Long、String、List、WebElement 或 null 之一。

详细文档在[这里](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/remote/RemoteWebDriver.html)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-30T07:57:08.520

它们之间的主要区别在于，使用 async 执行的脚本必须通过调用提供的回调显式地表示它们已完成。此回调始终作为最后一个参数注入到执行的函数中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T14:55:39.563

```
((JavascriptExecutor) driver).executeScript("alert('Hello');"); 
```

将显示警报：

> ((JavascriptExecutor) 驱动程序).executeAsyncScript() 用于当 JS 需要时间来执行例如 Web 服务调用时。

`window.onload`确保页面完全加载时执行 JS。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-13T14:04:33.837

我花了很多时间来理解这个功能，最后我得到了它。以下代码将有很大帮助：

```
/**
 * executeAsyncScript document mentioned callback is a browser intrinsic function for returning deferred value (e.g 123 in example) from
 * js environment to Java environment
 * 
 */
@Test
public void testAsyncScript() {
    webDriver.manage().timeouts().setScriptTimeout(1, TimeUnit.SECONDS);
    Integer a = 23;
    TestUtil.elapse("first", () -> {
        Object value = getJsExecutor().executeAsyncScript("window.setTimeout(arguments[arguments.length - 1](123), 500);", a);
        // following code should be executed after 500ms timeout
        System.out.println("a is " + a); // a has nothing to do with the documented "callback"
        assertEquals(123, value);
    });

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-29T14:51:52.283

您可以执行以下操作：

```
JavascriptExecutor js=(JavascriptExecutor)driver;
String javascript="window.location='https://google.com';window.onload=alert('hello'); var callback=arguments[arguments.length-1]; callback();";
        js.executeAsyncScript(javascript); 
```

正如其他人所说，executeAsyncScript() 使用称为回调的信号机制来向主函数/代码发出信号，表明 executeAsyncScript 中的 javascript 已完成。回调被称为参数[arguments.length-1]。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-01T15:40:28.113

这个简单的 Async 脚本监听 DOM 上点击的元素并通过回调解析**executeAsyncScript**

```
 var clicked_element = await driver.executeAsyncScript('var callback=arguments[arguments.length - 1]; window.document.addEventListener("click", function(e){ var element = event.srcElement ||event.target; callback(element); });'); 
```

# java - 不以预定义部分结尾的匹配字符串

> ID：13452825
> 
> 赞同：1
> 
> 时间：2012-11-19T11:27:16.900
> 
> 标签：java, regex

给定字符串“abcdefgh”我如何匹配所有以“abcde”开头的字符串，其不以“fgh”结尾？

更通用的任务 - 匹配以某些**常见**模式开头但不以任何预定义（排除）模式结尾的字符串。

```
"\babcde(^fgh)\b" 
```

不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:31:37.400

您可以使用正则表达式：

```
^foo(?!.*bar$).*$ 
```

匹配所有以 . 开头`foo`但不以 . 结尾的字符串`bar`。

该部分`^foo`确保字符串以`foo`和开头

该部分`(?!.*bar$)`是否定的前瞻断言，以确保字符串不以`bar`.

[**看见**](http://www.rubular.com/r/OFZbl6gJe1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:36:02.923

如果所需的前缀和排除的后缀可能不重叠，则可以使用负前瞻。通过“字符串”，我假设您的意思是“单词”：

```
"\babcde(?!\w*fgh\b)" 
```

如果前缀和后缀可能重叠，则将前瞻移到前面

```
"\b(?!\w*fgh\b)abcde" 
```

如果“字符串”是指“字符串”，则使用`^`and`$`作为边界条件：

```
"^(?!.*fgh$)abcde" 
```

如果您也想获得匹配，而不仅仅是测试字符串，请将“字符串的其余部分”包含到正则表达式中：

```
"^(?!.*fgh$)abcde.*$" 
```

# svn - Maven 将 SVN 修订版添加到清单

> ID：13452827
> 
> 赞同：0
> 
> 时间：2012-11-19T11:27:21.020
> 
> 标签：svn, maven

我尝试使用 buildnumber-maven-plugin 将我当前的 SVN 修订号添加到战争的清单文件中。

在 pom.xml 我添加了：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>create</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <doCheck>false</doCheck>
                <doUpdate>false</doUpdate>
                <revisionOnScmFailure>0.0.1</revisionOnScmFailure>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <archive>
                    <manifest>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                    </manifest>
                    <manifestEntries>
                        <Implementation-Build>x ${buildNumber}</Implementation-Build>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin> 
```

但部署文件后，清单文件如下所示：

```
Manifest-Version: 1.0
Built-By: my.name
Build-Jdk: 1.6.0_33
Implementation-Title: Java EE 6 webapp project
Implementation-Version: 0.0.1-SNAPSHOT
Implementation-Vendor-Id: com.company.my
Implementation-Build: x ${buildNumber}
Created-By: Maven Integration for Eclipse 
```

因此`${buildNumber}`无论出于何种原因都不会评估。（而且`revisionOnScmFaulure`选项似乎不起作用。（出于调试原因，我添加了“x”。）

当我将项目作为 maven build 运行时，出现以下错误：

```
"Unknown lifecycle phase "create". You must specify a valid lifecycle phase or a goal in the format <plugin-prefix>:<goal> or <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy." 
```

但是，将目标更改为 create 以外的任何内容都不能解决问题并导致验证器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:45:45.413

这就是它适用于[rexsl 项目](http://www.rexsl.com)的方式（参见他们的[pom.xml](http://trac.fazend.com/rexsl/browser/rexsl/tags/rexsl-0.4.4/rexsl/pom.xml)）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <buildNumberPropertyName>buildNumber</buildNumberPropertyName>
                <doCheck>false</doCheck>
                <doUpdate>false</doUpdate>
                <getRevisionOnlyOnce>true</getRevisionOnlyOnce>
            </configuration>
            <executions>
                <execution>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>create</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <pluginManagement>
        <plugins>
            <plugin>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <archive>
                        <manifestEntries>
                            <ReXSL-Version>${project.version}</ReXSL-Version>
                            <ReXSL-Build>${buildNumber}</ReXSL-Build>
                        </manifestEntries>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

# java - 使用 Apache Commons exec 时遇到问题

> ID：13452830
> 
> 赞同：0
> 
> 时间：2012-11-19T11:27:28.927
> 
> 标签：java, apache-commons-exec

我试图使用 Apache commons 来运行脚本，并且从终端运行的脚本看起来输出类似于以下的数据——
**编辑——编辑以按照建议引入 waitFor。**

```
$./old-regress.sh

End with '*' as postcode !

            postcode:                 city:               street:         house number:              country:                 name:                  PDC: 
postcode           :      
city               : 
street             : 
house_num          : 
routing_code       : 
post_freight_centre: 
ic_c_err_code      : 0260
post_code_err_code : ----
city_error_code    : g---
street_error_code  : ---f
local_gov_number 1 : 
local_gov_number 2 : 
State              : 
admin. district    : 
district           : 
local gov. unit    : 
routing_code       : 
error_text_address : 
./old-regress.sh: line 2:  9722 Segmentation fault      ./ictest < /tmp/tmp_inp_file 
```

预计会出现分段错误，因为这就是二进制`ictest`（第三方）的工作方式。

现在，当我尝试使用 Apache Commons exec 通过我的应用程序执行相同的脚本时，它似乎只打印错误而不是输出。我尝试运行脚本的代码片段如下——

```
public class Test {
public String execToString(String command) throws Exception {
    ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
    CommandLine commandline = CommandLine.parse(command);
    DefaultExecutor exec = new DefaultExecutor();
    exec.setWorkingDirectory(new File("/home/vigna"));
    PumpStreamHandler streamHandler = new PumpStreamHandler(outputStream);
    exec.setStreamHandler(streamHandler);
    exec.setExitValue(139);
    DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();
    exec.execute(commandline,resultHandler);
    resultHandler.waitFor();
    return(outputStream.toString());
}
public static void main(String[] argv) throws Exception {
    Test test = new Test();
    System.out.println(test.execToString("./old-regress.sh"));
} 
```

上述代码段返回的输出如下——

```
./old-regress.sh: line 2: 15981 Segmentation fault      ./ictest < /tmp/tmp_inp_file 
```

**编辑 2——我尝试使用 ProcessBuilder。以下是我的代码**——

```
public class PBTest
{
    public static void main(String[] args) throws Exception
    {
        ProcessBuilder pb = new ProcessBuilder("./old-regress.sh");
        pb.directory(new File("/home/xxx/"));
        Process p = pb.start();
        String output = loadStream(p.getInputStream());
        String error  = loadStream(p.getErrorStream());
        int rc = p.waitFor();
        System.out.println("Process ended with rc=" + rc);
        System.out.println("\nStandard Output:\n");
        System.out.println(output);
        System.out.println("\nStandard Error:\n");
        System.out.println(error);
    }
    private static String loadStream(InputStream s) throws Exception
    {
        BufferedReader br = new BufferedReader(new InputStreamReader(s));
        StringBuilder sb = new StringBuilder();
        String line;
        while((line=br.readLine()) != null)
            sb.append(line).append("\n");
        return sb.toString();
    }
} 
```

使用 ProcessBuilder 的结果如下——

```
Process ended with rc=139
Standard Output:

Standard Error:

./old-regress.sh: line 2:  3975 Segmentation fault      ./ictest < /tmp/tmp_inp_file 
```

我认为 139 是由于分段错误，可能导致它失败。有什么建议吗？

关于我在这里做错了什么的任何指针？我如何也捕获输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:05:47.173

我建议使用`org.apache.commons.exec.LogOutputStream`而不是 ByteArrayOutputStream。单参数 PumpStreamHandler 构造函数捕获 stdout 和 stderr ——所以你很好。创建您的 LogOutputStream 实例，并将其作为单个参数传递给 PumpStreamHandler（就像您是 BAOS）。

由于您只是在 Handler 上调用 waitFor()，因此只需在 DefaultExecutor: 上使用同步执行方法`int exitValue = exec.execute(commandline)`。

我会尝试将退出代码设置为 null，然后从执行的响应中自己检查 exitValue。我预计问题是您的 ByteArrayOutputStream 正在从异常中截断，击败标准输出，而不是完全刷新内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:31:15.273

你在做。

```
exec.execute(commandline);
// gives the program no time to start or run.
return(outputStream.toString()); 
```

你应该改为做类似的事情

```
exec.execute(commandline).waitFor();    
// get the output only after the program has finished.
return(outputStream.toString()); 
```

# zend-framework2 - 从 zf2 中的插件调用插件

> ID：13452831
> 
> 赞同：0
> 
> 时间：2012-11-19T11:27:29.517
> 
> 标签：zend-framework2

我正在使用 zf2 并且我创建了一些插件，我可以从任何插件中的任何控制器调用它们（所以，没问题）。为此，在插件所在的控制器中，我已将其添加到 module.config.php

```
'controler_plugins' => array(
    'invokables' => array(
        'myplugin' => 'MyModule\Controller\Plugin\MyPlygin'
    ),
), 
```

因此，我的插件可以通过 juste $this->myplugin() 从每个控制器访问。

我的问题是我无法从另一个模块中的插件调用插件。知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T13:18:13.957

每个插件都包含对其调用的控制器的引用，因此您应该能够从另一个插件中调用任何已注册的插件，如下所示：

```
$this->getController()->myplugin(); 
```

# qt - 单击任何驱动器时在 TreeView 中显示音频和视频文件 (QFileSystemModel)

> ID：13452838
> 
> 赞同：0
> 
> 时间：2012-11-19T11:28:14.197
> 
> 标签：qt, qt4, filesystems, qfilesystemmodel

我想遍历系统中存在的驱动器并搜索其中的音频/视频文件。基本上遍历子目录并在树视图中显示文件。我有 2 个树视图，一个用于显示系统目录，另一个用于显示音频/视频文件。

```
// Displays System Drives inside TreeView(Drive View) When Application Starts
void PanasonicViewer::onCamStartup()
{
    m_SystemModel = new QFileSystemModel(this);
    m_SystemListViewModel = new QFileSystemModel(this);
    m_SystemModel->setRootPath(QDir::currentPath());
    ui->DriveView->setModel(m_SystemModel); //Left side TreeView
    ui->DriveListView->setModel(m_SystemListViewModel); //Right Side TreeView

    // regard less how many columns you can do this using for:
    for(int nCount = 1; nCount < m_SystemModel->columnCount(); nCount++)
       ui->DriveView->hideColumn(nCount);
}

//On Clicking The TreeView, it should display Audio and Video files in DriveListView
void PanasonicViewer::on_DriveView_clicked(const QModelIndex &index)
{
    QStringList sDriveFilters;

    QString sPath = m_SystemModel->fileInfo(index).absoluteFilePath();
    ui->DriveListView->setRootIndex(m_SystemListViewModel->setRootPath(sPath));    

    m_SystemModel->setRootPath(QDir::currentPath());
    m_SystemModel->setFilter(QDir::NoDotAndDotDot | QDir::AllDirs );
    m_SystemListViewModel->setFilter( QDir::Files | QDir::NoDotAndDotDot );

    sDriveFilters << "*.aac" << "*.wmv" << "*.avi" << "*.mpeg" << "*.mov" << "*.3gp" << "*.flv" << "*.mp3" ;

    m_SystemListViewModel->setNameFilters(sDriveFilters);
    m_SystemListViewModel->setNameFilterDisables(false);
} 
```

您可以在上面的单击事件中注意到我已将过滤器设置为选定的扩展。当我单击驱动器即 E:\ 但不显示子文件夹中存在的文件时，这似乎可以工作并显示音频和视频文件。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:11:25.920

问题是由于您的设置[`QFileSystemModel::filter`](http://doc.qt.digia.com/qt/qfilesystemmodel.html#filter).

的默认设置是`QDir::AllEntries | QDir::NoDotAndDotDot | QDir::AllDirs`，其中`QDir::AllEntries`转换为`QDir::Dirs | QDir::Files | QDir::Drives`。如果我们展开它，默认设置是：

```
QDir::Dirs | QDir::Files | QDir::Drives | QDir::NoDotAndDotDot | QDir::AllDirs 
```

通过调用`m_SystemModel->setFilter(QDir::NoDotAndDotDot | QDir::AllDirs )`，您告诉模型您只想查看标准目录，并希望排除所有文件。只需`setFilter`完全删除您的电话，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T09:27:24.167

你所期望的不是标准`QFileSystemModel`应该做的。您需要的是手动递归提取多媒体文件`QStringListModel`并将其设置在您的`QListView`，或直接使用`QListWidget`枚举时直接添加项目。当`QFileSystemModel`更改的选择时，您可以获取所选文件夹的路径，并递归列举文件和子文件夹文件。请注意，如果您单击某个驱动器，您最终将等待驱动器中的所有多媒体文件。如果这是您想要的，那么也许您可以考虑在工作线程中进行枚举，这并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:48:01.047

尝试改变

```
ui->DriveListView->setRootIndex(m_SystemListViewModel->setRootPath(sPath)); 
```

至

```
m_SystemListViewModel->setRootPath(sPath)
ui->DriveListView->setRootIndex(m_SystemListViewModel->index(sPath); 
```

我怀疑返回的 QModelIndex 是否`setRootPath`是您认为的那个。通过从 m_SystemListViewModel 中删除过滤器来解决此问题，以确保您实际上正在查看您认为的文件夹。

我知道如果 sPath 是目录路径，这应该可以工作。如果它是文件路径，我不确定它是否会按预期工作。

# actionscript-3 - 是否可以在 StageWebView 的位图上添加影片剪辑

> ID：13452844
> 
> 赞同：1
> 
> 时间：2012-11-19T11:28:52.807
> 
> 标签：actionscript-3, flash, bitmap, bitmapdata, stagewebview

我想在 StageWebView html 页面上添加一个简单的 spinnerloader(movieclip)，因为我将 StageWebView 页面转换为位图，但是没有用，请帮我解决这个问题

```
 var webView:StageWebView = new StageWebView();
     var textGoogle:TextField=new TextField();
     var textFacebook:TextField=new TextField()

     textGoogle.htmlText="<b>Google</b>";
        textGoogle.x=300;
        textGoogle.y=-80;        
        addChild(textGoogle);
        textFacebook.htmlText="<b>Facebook</b>";
        textFacebook.x=0;
        textFacebook.y=-80;        
        addChild(textFacebook);
        textGoogles.addEventListener(MouseEvent.CLICK,goGoogle);
        textFacebooks.addEventListener(MouseEvent.CLICK,goFaceBook);
        webView.stage = this.stage;
        webView.viewPort = new Rectangle(0, 100, stage.stageWidth, stage.stageHeight); 
```

函数 goGoogle(e:Event):void

```
 {
        webView.loadURL("http://www.google.com");
        webView.stage = null;
        webView.addEventListener(Event.COMPLETE,handleLoad);
    }

    function goFaceBook(e:Event):void
    {
        webView.loadURL("http://www.facebook.com");
        webView.stage = null;
        webView.addEventListener(Event.COMPLETE,handleLoad);
    }

 function handleLoad(e:Event):void
    {
        var bitmapData:BitmapData = new BitmapData(webView.viewPort.width, webView.viewPort.height,true,0xffffff);
        webView.drawViewPortToBitmapData(bitmapData);
        var webViewBitmap:Bitmap=new Bitmap(bitmapData);
        webViewBitmap.y = 100;
        addChild(webViewBitmap);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:52:13.050

这应该是可能的。创建位图后： 1\. 从舞台中删除 StageWebView 2\. 将位图添加到舞台。3\. 将您的影片剪辑添加到舞台。

# c# - 从字符串c#中过滤一行

> ID：13452848
> 
> 赞同：3
> 
> 时间：2012-11-19T11:29:14.863
> 
> 标签：c#

我想在 c# 中读取一个 .txt 文件并从字符串中过滤出一行并只显示该行。如果匹配在第一行，我会使用 streamreader.ReadLine 获得良好的输出。但如果它在第二行，我需要对其进行过滤。（我通过创建一个 ReadLine 循环来实现？）提前致谢

```
 private void comboBox3_SelectedIndexChanged(object sender, EventArgs e)
    {

        StreamReader sr = new StreamReader(textBox1.Text);
        string BoxLM1 = sr.ReadLine();

        if (comboBox3.Text == "Anderlecht")
        {
            if (BoxLM1.Contains("Anderlecht"))
            {
            label5.Text = BoxLM1;
            }

            else
            {
                string BoxLM2 = sr.ReadToEnd();

                    MessageBox.Show(BoxLM2);  

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T11:33:34.517

[`File.ReadLines()`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)您可以使用方法和 LINQ一次检查所有行：

```
var firstAnderlecht = File.ReadLines(textBox1.Text).FirstOrDefault(s => s.Contains("Anderlecht"));
if (firstAnderlecht != null) {
    label5.Text = firstAnderlecht;
} 
```

从文件中`ReadLines`生成可枚举的行；该`FirstOrDefault`方法允许您在没有循环的情况下将条件应用于文件的所有行，并选择条件适用的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:50:19.853

如果您正在处理大文件，我建议使用此迭代器：

```
private static IEnumerable FileIterator(String filePathe)
    {
        using (StreamReader streamReader = new StreamReader(filePathe))
        {
            String line;
            while ((line = streamReader.ReadLine()) != null)
            {
                yield return line;
            }
            yield break;
        }
    } 
```

它将阻止将完整文件加载到 RAM

# c# - 在遵守 DRY 的同时，我应该如何为接口的多个实现编写单元测试？

> ID：13452849
> 
> 赞同：3
> 
> 时间：2012-11-19T11:29:15.307
> 
> 标签：c#, .net, unit-testing, dry

我有多个实现相同接口的类，我应该如何编写单元测试来验证每个类是否正确实现了接口，将代码重复降至最低（DRY）？

作为我的意思的一个例子，以下是一个非常基本的库，其中包含`IDeleter`:`Deleter1`和`Deleter2`. 两者都`Delete`通过调用`Delete`其关联的`IRepository`.

```
using Microsoft.Practices.Unity;

namespace TestMultiple
{
    public interface IRepository
    {
        void Delete(string id);
    }

    public abstract class Baseclass
    {
        protected abstract IRepository GenericRepository { get; }

        public void Delete(string id)
        {
            GenericRepository.Delete(id);
        }
    }

    public interface IDeleter
    {
        void Delete(string id);
    }

    public interface IRepository1 : IRepository
    {
    }

    public abstract class RepositoryBase
    {
        public void Delete(string id)
        {
        }
    }

    public class Repository1 : RepositoryBase, IRepository1
    {
    }

    public class Deleter1 : Baseclass, IDeleter
    {
        protected override IRepository GenericRepository { get { return Repository; } }

        [Dependency]
        public IRepository1 Repository { get; set; }
    }

    public interface IRepository2 : IRepository
    {
    }

    public class Repository2 : RepositoryBase, IRepository2
    {
    }

    public class Deleter2 : Baseclass, IDeleter
    {
        protected override IRepository GenericRepository { get { return Repository; } }

        [Dependency]
        public IRepository2 Repository { get; set; }
    }
} 
```

对于这两个类`Deleter1`和`Deleter2`，我编写了两个对应的单元测试类，如下面的代码片段所示。测试检查相同的行为，即`Delete`在底层存储库上调用。有没有更好的方法来为所有的实现实现相同的测试`IDeleter`？例如，我是否应该编写一个包含常用测试方法的基类，例如`TestDelete`for`TestDeleter1`和`TestDeleter2`？

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Microsoft.Practices.Unity;
using Moq;

namespace TestMultiple.Tests
{
    [TestClass]
    public class TestDeleter1
    {
        [TestMethod]
        public void TestDelete()
        {
            var mockRepo = new Mock<IRepository1>();
            var container = new UnityContainer().RegisterInstance<IRepository1>(mockRepo.Object);
            var deleter = container.Resolve<Deleter1>();
            deleter.Delete("id");
            mockRepo.Verify(r => r.Delete("id"));
        }
    }

    [TestClass]
    public class TestDeleter2
    {
        [TestMethod]
        public void TestDelete()
        {
            var mockRepo = new Mock<IRepository2>();
            var container = new UnityContainer().RegisterInstance<IRepository2>(mockRepo.Object);
            var deleter = container.Resolve<Deleter2>();
            deleter.Delete("id");
            mockRepo.Verify(r => r.Delete("id"));
        }
    }
} 
```

**编辑：** 尽管我更喜欢 NUnit，但请随意提及可能有助于解决此类问题的单元测试框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:32:14.560

我知道在接口上断言常见行为的框架中编写测试没有简单的方法。您能做的最好的事情就是编写测试和辅助方法，就好像您正在测试一个抽象类，然后将真实类型插入到派生的测试类中。

例如，您可以创建一个`DeleterTests`为接口提供测试的类：

```
public abstract class DeleterTests<TRepository> where TRepository : IRepository
{
    [TestMethod]
    public void TestDelete()
    {
        var mockRepo = new Mock<TRepository>();
        var container = new UnityContainer();

        container.RegisterInstance<TRepository>(mockRepo.Object);

        var deleter = this.CreateDeleter(container);

        deleter.Delete("id");
        mockRepo.Verify(r => r.Delete("id"));
    }

    protected abstract IDeleter CreateDeleter(IUnityContainer container);
} 
```

然后，您从此类继承任何实现`IDeleter`，根据需要实现抽象`CreateDeleter`方法：

```
public class Deleter1Tests : DeleterTests<IRepository1>
{
    protected override IDeleter CreateDeleter(IUnityContainer container)
    {
        return container.Resolve<Deleter1>();
    }
}

public class Deleter2Tests: DeleterTests<IRepository2>
{
    protected override IDeleter CreateDeleter(IUnityContainer container)
    {
        return container.Resolve<Deleter2>();
    }
} 
```

如果您需要以不同的方式组合实例，您可以`CreateDeleter`以任何方式实现抽象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:58:56.003

您应该为每个类编写单元测试，而不是真正担心其他实现。如果您觉得自己一次又一次地编写相同的测试，那可能是因为您的生产代码是 un-DRY——而不是您的测试代码。正如其他人指出的那样；如果不同的实现有很多共同点，那么一些共同的抽象祖先可能是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:40:40.083

如果您的所有类都应该相同地实现 IDeleter 接口，那么您的基类不应该是抽象的。在基类中实现 IDeleter 接口，这样所有子类都从基类继承相同的实现。如果存在需要不同实现的边缘情况，则该类可以覆盖基类的实现。

# python - Django 的 STATIC_URL 和 Ajax 请求

> ID：13452850
> 
> 赞同：2
> 
> 时间：2012-11-19T11:29:25.320
> 
> 标签：python, django, django-templates

我的网页对服务器进行 AJAX 调用以动态选择要显示的图像。我遇到的问题是`STATIC_URL`变量评估为空字符串，因此图像无法加载。

这是我使用渲染图像路径的代码。

```
text = "<img src=\"{{ STATIC_URL }}/images/%s\"> %s" % (ball_file, val)
t = Template(text)
tt = t.render(Context()) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:31:40.890

为什么还要使用 Template ？这不行吗？

```
from django.conf import settings

text = u'<img src="%simages/%s"> %s' % (settings.STATIC_URL, ball_file, val) 
```

请注意，`STATIC_URL`应该包含尾部斜杠，因此`%simages`在此示例中而不是`%s/images`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T11:51:15.280

您没有为该模板提供任何上下文，因此包括 STATIC_URL 在内的所有变量自然都会解析为空。如果您使用 RequestContext，则上下文处理器将首先运行，因此静态 URL（以及用户和各种其他内容）等额外项目将可用。

但是我同意 jpic，最好直接在 Python 中执行此操作。

# c# - 将 c#.net 应用程序转换为 android

> ID：13452852
> 
> 赞同：-3
> 
> 时间：2012-11-19T11:29:38.300
> 
> 标签：c#, android

我知道这是一个非常模糊的问题，但我仍然在问。

有没有人可以将我现有的内置在 c#.net 和 DB 中的 WinForm 转换为 SQLSERVER 2008 到 andorid 应用程序？如果不是，那么构建应用程序的任何更简单的方法是因为我不熟悉任何移动应用程序工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:40:20.993

一般来说，没有。这些语言有些相似，但 UI 的构建方式却大不相同，必须从头开始重写。此外，数据库访问不同。我实际上怀疑Android是否具有与SqlServer“对话”所需的库。即使它设法通过一些通用的 ODBC 层进行对话，DB 访问仍然会有很大的不同。我假设这将包含超过 80% 的应用程序 - 因此可以安全地估计整个应用程序无法转换，并且必须编写一个新应用程序。当然，一些 SQL 查询可能会被重用，一些应用程序类也可能是可用的（如果以足够独立于平台的方式编写，那么它们可以被翻译成 Java）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:39:07.183

据我所知，这并不容易。如果您想要免费转换，您应该使用 Android SDK 用 Ja​​va 重写它（在 Dalvik 上运行 - 一个自定义 VM）。如上所述，如果您已经了解 C#，您将不会费力学习它，如果您有可能，您也可以使用 Mono Droid 或聘请开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:35:52.933

不，没有办法以*简单*的方式做到这一点。Android 开发在 UI 级别与 WPF 类似（您*可以*找到一些相似之处）+在谈论移动开发时，您有*完全不同的行为模型。*

简而言之，如果您想继续使用 C#，您可能会考虑选择[Mono Droid](http://xamarin.com/monoforandroid)。已经付款了。

# mysql - MySQL 5.5 中的一次性只读 SQL 语句验证？

> ID：13452855
> 
> 赞同：-1
> 
> 时间：2012-11-19T11:29:40.693
> 
> 标签：mysql, sql

我有一个接口，我希望允许输入任意 SQL 选择语句（作为输入字符串），该语句将从给定表中选择数据以用于操作。我想确保此语句不会更改数据库。

```
string query = GetStringFromForm(...);

DatabaseStatement statement(query);

statement.execute();

while (statement.fetch(...))
    ... 
```

实现这一点的一种方法是创建一个具有适当权限的新数据库用户，然后在该用户下执行语句。这会很麻烦，因为它需要设置这个新用户并为其创建一个新的数据库连接等等。

有没有办法隔离单个语句 MySQL 5.5 的权限？或者其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:03:38.343

不要为***所有内容***使用相同的登录名连接到数据库。

至少你*应该*为这个架构使用你的登录名：

1.  用于创建表等的开发级登录
2.  您的应用程序用于使应用程序运行的登录名
3.  用于执行用户指定查询的登录名

这意味着您的应用程序登录只有它需要的权限——读取或写入必要的表，而不是对每个表执行所有操作；例如，应用程序登录不需要能够创建或删除表。

这限制了代码错误的影响，但也限制了某人可以入侵您的系统的范围*（例如 SQL 注入攻击）*。

这也意味着运行用户特定查询的登录只需要被授予 SELECT 权限，并且只需要它应该能够使用的表/视图/函数。如果他们尝试运行他们没有权限的 INSERT 或 DELETE，您可以捕获错误并告诉用户他们是`very naughty boy`安全的，RDBMS 根本不会让用户损坏任何东西你还没有允许他们这样做。

简而言之，RDBMS 已经有了登录权限架构。使用它们来限制代码不同方面的权限和功能。

我不会尝试重新发明这个轮子。极有可能是您错过了某个技巧或黑客攻击，从而暴露了您的应用程序中的漏洞*。*我很欣赏你说这很麻烦，但这确实是正确的做事方式，也是唯一可靠的做事方式。抱歉，这是数据安全的标准方法是有原因的。

*（相信我，即使没有人试图破解你的系统，最终还是会有人输入一些古怪的查询——**不小心**绕过了你的安全性，让你的数据库大吃一惊。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:28:06.563

使用 MySQL 5.6，您可以：

```
START TRANSACTION READ ONLY; 
```

[https://dev.mysql.com/doc/refman/5.6/en/commit.html](https://dev.mysql.com/doc/refman/5.6/en/commit.html)

我想这就是你要找的东西，但你必须升级到 5.6 才能使用它。

# r - R 中的双向 ANOVA - 添加的术语未出现在汇总表中

> ID：13452856
> 
> 赞同：0
> 
> 时间：2012-11-19T11:29:48.170
> 
> 标签：r, anova

我正在处理一个涉及 9 种不同基因型的数据集，分为 3 个不同的类别。已经记录了来自每个基因型的大约 20 个大小测量值。

我尝试运行双向 anova（在单向 anova 确定基因型之间的大小显着不同之后），以分析 3 个类别以及不同基因型之间的差异。

我使用了函数`aov(size~genotype*class,data=x)` 我获得的汇总表只有一行`genotype`，我看不到`class`或`genotype:class`任何地方，正如我所预料的那样。我获得的表格与我刚运行时获得的表格相同`aov(size~genotype, data=x)`

我做错了什么？即使`class`/`class:genotype`不会改变结果的重要性，它们仍然应该出现在 anova 汇总表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:27:50.410

简而言之-您无法拟合您要拟合的模型……至少如果我正确理解您的数据的话。我的理解是你有类似的东西：

dat <- data.frame(size = rnorm(27), 基因型 = gl(9,3), class = gl(3, 9))

```
> dat <- data.frame(size = rnorm(27), genotype = gl(9,3), class = gl(3, 9))
> dat
          size genotype class
1   1.44189249        1     1
2   1.05766532        1     1
3   0.08133568        1     1
4   0.36642288        2     1
5   0.93266571        2     1
6  -0.64031787        2     1
7   0.33361892        3     1
8   0.53315507        3     1
9   0.26851394        3     1
10  0.05062280        4     2
11 -0.30924511        4     2
12 -0.61460429        4     2
13 -0.18901238        5     2
14  0.58881858        5     2
15  0.58625502        5     2
16  0.52002793        6     2
17  1.23862937        6     2
18 -2.02333160        6     2
19 -0.09918607        7     3
20  0.65947932        7     3
21 -0.65440238        7     3
22  0.10923036        8     3
23  0.76845484        8     3
24 -0.24804574        8     3
25 -0.30890950        9     3
26 -2.82056870        9     3
27  0.56828147        9     3 
```

（我主要关注的是基因型和类别之间的关系——不是每个基因型*类别组合的大小的实际值或样本大小）

如果每个基因型完全包含在单个类中，那么您无法将基因型效应与类效应分开。希望这对你有意义——如果不是让我用一个更小的例子来说明的话。首先——因为每个基因型完全属于一个类别，我们无法适应交互——这根本没有意义。如果基因型可以是至少两个类别的一部分，那么这种相互作用将很有用，因为它允许我们根据观察的类别为基因型赋予不同的效果。但是由于每个基因型都只属于一个类别......用相互作用拟合模型已经过时了。

现在看看为什么我们不能适应类效应，只需考虑包含基因型 1-3 的类 1。需要认识到的是，对于线性模型（ANOVA 只是线性模型的一个特例），我们建模的是不同组中的条件均值——如果可能，我们会尝试将其划分为某些效果。所以任何给我们相同组均值的模型本质上是等价的。假设第 1 类的影响是 c，基因型 1-3 的影响是 x、y 和 z（分别）。那么组 genotype1/class1 = c+x，对于 genotype2/class1 = c+y，对于 genotype3/class1 = c+z 的值。但请注意，我们可以很容易地说第一类效应是 0，然后说基因型 1-3 的效应是 c+x、c+y、c+z（分别）。所以类在这种情况下完全没用。由于基因型完全嵌套在类中，因此无法分离类效应。因此，如果我们想拟合一个完全固定的效应模型，我们只能拟合一个对基因型具有单独效应的模型。

# java - 使用 Java 检索 URL 中的参数

> ID：13452858
> 
> 赞同：5
> 
> 时间：2012-11-19T11:29:53.853
> 
> 标签：java, url, servlets, parameters

我有一个使用 XSL 和 XML 生成 PDF 的小 Servlet。由于我想通过 URL 指定文件，我需要从那里获取这些参数：

```
localhost/Servlet?xml=c:\xml\test.xml&xsl=c:\xsl\test.xsl 
```

所以我需要的参数是

```
 c:\xml\test.xml
 c:\xsl\test.xsl 
```

并且那些需要读入变量 xml-file 和 xsl-file。

我有这个，但我猜这对我没有帮助，因为我不知道如何将值应用到变量中：

```
Map para = request.getParameterMap();
java.util.Iterator it = params.keySet().iterator();

while ( it.hasNext() )
{
    String key = (String) it.next();
    String value = ((String[]) para.get( key ))[ 0 ];
} 
```

关于如何做到这一点的任何想法？

谢谢，

流浪汉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T11:34:28.000

在 SERVLET 中必须请求，是吗？

> 字符串 xml_path=request.getParameter("xml");
> 
> 字符串 xsl_path=request.getParameter("xsl");

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T11:34:41.750

我想你只是想要[request.getParameter(String param)](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)

例如

```
String xml = request.getParameter("xml"); 
```

请注意（供将来参考）以上内容不会处理*多个* `xml`参数。为此，您应该使用[request.getParameterValues(String param)](http://docs.oracle.com/javaee/1.3/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)

如上所述，您可能不应该传递文件名。最好我会上传文件，生成 PDF 并使其可用（只需通过响应，或者可能将其存储在您的 servlet 部署本地并返回一个 id 以供以后检索？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T11:34:27.383

这有什么问题？

```
String xsl = request.getParameter("xsl");
String xml = request.getParameter("xml"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T11:34:39.413

您可以使用`HttpServletRequest.getParameter()`...按名称获取参数

```
String xml-file = request.getParameter("xml");
String xsl-file = request.getParameter("xsl"); 
```

# php - htaccess rewriterule - 转义反向引用 B 标志替代

> ID：13452859
> 
> 赞同：2
> 
> 时间：2012-11-19T11:30:00.870
> 
> 标签：php, apache, .htaccess, mod-rewrite

我正在尝试重写包含 & 符号的 url。我尝试过使用 & 和 %26，但都被 apache 剥离了。

例如，如果 url 是：

```
healthyliving/fruit/apples_&_pears 
```

重写规则是：

```
RewriteRule ^healthyliving/fruit/([^/.]+)$ food.php?subpage=healthyliving&item=$1 [QSA,L] 
```

查询字符串将显示“apples_& *pears”，但`_GET['item']`会显示“apples* ”。

根据我的阅读，大多数解决方案都使用 B 标志来逃避反向引用。这个标志是在 2.2.7 中引入的。不幸的是，我们正在运行早期版本，由于各种原因我们现在无法升级。

有没有办法在不使用 B 标志的情况下实现我的需要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T14:33:00.223

我不完全确定你想用 $_GET 完成什么，但你可以试试这个

```
RewriteRule ^healthyliving/fruit/(.*)_&_(.*) food.php?subpage=healthyliving&item[]=$1&item[]=$2 [QSA,L] 
```

哪个应该给你：

```
Array ( [subpage] => healthyliving [item] => Array ( [0] => apples [1] => pears ) ) 
```

# php - 将值从一个 php 页面传递到另一个

> ID：13452862
> 
> 赞同：-5
> 
> 时间：2012-11-19T11:30:10.687
> 
> 标签：php, mysql

> **可能重复：**
> [将变量从一个 PHP 页面发送到另一个](https://stackoverflow.com/questions/7734163/sending-variables-from-one-php-page-to-another)

我有一个登录页面，该人输入用户名和密码，将用户重定向到下一页，用户应输入他/她的员工 ID 以获取他的休假详细信息（写入查询以检索休假详细信息）。

1.  我想要做的是当经理进入他的账户时，他应该得到他手下员工的休假详细信息，以批准或拒绝提交的休假。

2.  第一个页面中使用的经理 ID 应该用于检索其他 php 页面中的员工休假详细信息。

这该怎么做。我`$_POST`在第一页中使用了方法来获取经理 ID。是否可以在另一个页面中使用相同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:38:04.323

您可以将`$_POST`表单中字段的值传递到它提交到的一个页面。

如果您需要随后在更多页面上检索它（例如此处的emp id），您应该尝试将变量存储在[cookie](http://php.net/manual/en/features.cookies.php)中，并存储在客户端即浏览器端或[会话存储](http://php.net/manual/en/book.session.php)中，其中数据在服务器上分配内存本身。

# android - 关闭对话框后如何获取文本

> ID：13452864
> 
> 赞同：0
> 
> 时间：2012-11-19T11:30:22.930
> 
> 标签：android, dialog

我创建了一个如下所示的对话框类，即获取用户输入，然后用户可以确定或取消。

```
public class CustomDialog extends Dialog implements OnClickListener {
//String username= "hello"
//getter set
String getName(){
    username = this.name;
    return username; 
}
} 
```

我在我的活动中用这个代码调用它

```
custumButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {               
            TextView txtTime = (TextView) findViewById(R.id.tmptextView1);
            mosi.show();
            txtName.setText(mosi.getName());
        }
    }); 
```

每件事都很好，但是当我每次都调用 mosi.gettime() 时返回默认值而不发送用户输入。我在我的对话框中创建了一个 toast，当用户输入名称时它起作用但是当 sumbit 对话框没有在我的活动文本视图中显示 Inputname

请帮助我，对不起英语不好

****** *** ** *** ** *** ** *** ************ *** ** *** ** *** ** *** ** *****
我通过使用此代码覆盖确定按钮 setOnClickListener 对话框来**解决此问题*******

 *****```
Button mo = (Button)mosi.findViewById(R.id.btnTimepickerOk);
            mo.setOnClickListener(new View.OnClickListener() {

                public void onClick(View arg0) {
                    txtName.setText(mosi.getName());
                    mosi.dismiss();
                }

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:49:17.740

我建议您直接从您的听众中的对话中获取输入。例如

```
((EditText)dialog.findViewById(R.id.input)).getText(); 
```

要实现它，您可能需要将您的对话框声明为 final，但这不是问题。希望它会帮助你。*****

# javascript - 如何在html字符串中获取标题标签？

> ID：13452865
> 
> 赞同：8
> 
> 时间：2012-11-19T11:30:25.720
> 
> 标签：javascript, jquery, regex

嘿，我正在使用 ajax 将 html 页面加载到字符串中，现在我想找到页面的标题并使用它。

现在我确实设法获得了`<title>`使用正则表达式，但是它返回了标签以及标题本身，我希望从字符串中提取它，或者有没有办法在正则表达式中做到这一点？

这是我的代码：

```
var title = result.match(/<title[^>]*>([^<]+)<\/title>/); 
```

现在我如何在 this/ 而不是 this 之后获得实际标题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-19T11:32:31.803

`.match()`返回匹配数组，使用

```
var title = result.match(/<title[^>]*>([^<]+)<\/title>/)[1]; 
```

获得括号中的值

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-19T11:36:28.917

像这样将您的响应 html 字符串加载到 jQuery 对象中并检索文本

```
$(response).find("title").text(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T11:45:08.243

一种相对简单的纯 JavaScript 和非正则表达式方法：

```
var htmlString = '<head><title>Some title</title></head><body><p>Some text, in a paragraph!</p></body>',
    html = document.createElement('html'),
    frag = document.createDocumentFragment();
html.innerHTML = htmlString;
frag.appendChild(html);

var titleText = frag.firstChild.getElementsByTagName('title')[0].textContent || frag.firstChild.getElementsByTagName('title')[0].innerText;

console.log(titleText);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fJPUm/)。

显然，我不得不猜测您的 HTML 字符串并从内容周围删除（假定存在的）封闭`<html>`/`</html>`标记。但是，即使这些标签在字符串中，它仍然可以工作：[JS Fiddle demo](http://jsfiddle.net/davidThomas/fJPUm/1/)。

还有一种更实用的方法：

```
function textFromHTMLString(html, target) {
    if (!html || !target) {
        return false;
    }
    else {
        var fragment = document.createDocumentFragment(),
            container = document.createElement('div');
        container.innerHTML = html;
        fragment.appendChild(container);
        var targets = fragment.firstChild.getElementsByTagName(target),
            result = [];

        for (var i = 0, len = targets.length; i<len; i++) {
            result.push(targets[i].textContent || targets[i].innerText);
        }
        return result;        
    }
}

var htmlString = '<html><head><title>Some title</title></head><body><p>Some text, in a paragraph!</p></body></html>';

var titleText = textFromHTMLString(htmlString, 'title');

console.log(titleText);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/fJPUm/2/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-19T11:36:18.303

**代码：**

```
var title = result.match("<title>(.*?)</title>")[1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T11:37:25.557

使 reg exp 不区分大小写。这是完整的代码：

```
var regex = /<title>(.*?)<\/title>/gi; 
var input = "<html><head><title>Hello World</title></head>...</html>";
if(regex.test(input)) {
  var matches = input.match(regex);
  for(var match in matches) {
    alert(matches[match]);
  } 
} else {
  alert("No matches found!");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-02T04:28:51.303

试试这个，我认为这会有所帮助。它在我的情况下非常有效。:)

```
 var FindTag=(data='',tag='')=>{
    var div=document.createElement('div');
    div.innerHTML=data;
    data=$(div).find(tag)[0].outerHTML;
    return data;
 }

var data=FindTag(data,"title"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-26T17:42:12.280

正则表达式不是在 HTML 中查找内容的好方法，这对于简单的一次性正则表达式来说太复杂了。（请参阅有关此主题的[著名帖子](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags#1732454)。）相反，使用[`DOMParser`](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)'s[`parseFromString`](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString)然后查看生成的文档：

```
const html = "<!doctype html><head><title>example</title>";

const parser = new DOMParser();
const doc = parser.parseFromString(html, "text/html");
const title = doc.querySelector("title");
console.log(title.textContent);
```

# iphone - 应用程序未导航到第二个视图

> ID：13452868
> 
> 赞同：0
> 
> 时间：2012-11-19T11:30:29.170
> 
> 标签：iphone, objective-c, ios

我正在使用的代码

```
 NSLog(@"before Navigate to second activity");
    Signature *temp = [[Signature alloc]initWithNibName:@"Signature" bundle:nil];

    [self.navigationController pushViewController:temp animated:YES];

     NSLog(@"after Navigate to second activity"); 
```

在控制台上，两个日志语句都被打印出来，但我的应用程序没有将我导航到下一个视图。请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:38:20.360

我认为您的应用程序没有使用 navigationController 所以在 AppDelegate.m 文件中分配 rootViewController 像这样..

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    RootViewController *viewController1 = [[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease];
    UINavigationController   *navviewController=[[UINavigationController alloc]initWithRootViewController:viewController1];
    self.window.rootViewController = navviewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

之后检查它的工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:42:54.167

无论如何，日志消息都会显示，所以这并不奇怪。为该导航控制器的委托添加一个回调（当然，您必须首先设置一个委托）

```
navigationController:didShowViewController:animated: 
```

在那里您可以确保 viewController 已通过（确保 Signature 是 ViewController 实例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T12:13:07.300

如果您没有`UINavigationController`在您的应用程序上使用您不能调用的`pushViewController`，请`presentViewController:animated:completion:`改用：

```
[self presentViewController:temp animated:YES completion:nil]; 
```

有关更多信息，请查看[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/presentViewController%3aanimated%3acompletion%3a)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:56:12.217

CreditsViewController *viewController = [[CreditsViewController alloc] init];

[[self navigationController] pushViewController:viewController 动画：YES];

[viewController 发布];

你可以试试上面的代码

# java - Android 服务与 Guava 服务

> ID：13452869
> 
> 赞同：3
> 
> 时间：2012-11-19T11:30:31.637
> 
> 标签：java, android, guava

[Guava Service](http://code.google.com/p/guava-libraries/wiki/ServiceExplained)是否与[Android Service](http://developer.android.com/reference/android/app/Service.html)有类似的目的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:06:00.270

您的问题的答案取决于您实际尝试对它们做什么。Guava 的服务类是帮助器，旨在帮助您构建类似于 Android 服务实现的东西。Android 的服务实现为其环境所知并与之交互，而 Guava 的类只是提供了一个没有预定义行为的框架。

因此，您也许可以使用 Guava 的服务类编写 Android 服务的实现，但不添加代码，Guava 不提供 Android 实现的运行时集成。

回答您的评论：两者都不*需要*单独的线程（默认情况下，Android 的服务不会在单独的线程上运行）。Android 服务更接近于 Guava 的 AbstractIdleService 类，但 Android 提供了比 Guava 更多的关于何时启动和关闭服务的功能。

# jquery - 基思·伍德 jQuery iCalendar

> ID：13452870
> 
> 赞同：0
> 
> 时间：2012-11-19T11:30:35.687
> 
> 标签：jquery, google-calendar-api, icalendar

[有没有人在Pluggin](http://keith-wood.name/icalendar.html)之前使用过 Keith Wood 的 jQuery iCalendar 插件并设法让它添加“全天”事件？我删除了时间，只是做了日期，但是当我这样做时它只是默认为上午 12:00 - 我需要它是一个全天的活动而不是（没有时间）我查看了他网站上的文档和唯一的参考从我所看到的来看，似乎是几天而不是时间似乎是为了重复发生的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T22:16:30.467

只是更新这个以防其他人在寻找相同的东西..我就我的查询与作者取得了联系，这就是他回来的结果..

“该插件不直接支持全天事件，因为它不提供持续时间选项。您可以做的最好的事情是开始为 yyyy-mm-dd 00:00:00 并结束为 yyyy-mm-dd 23:59:59。”

仅供参考！

# assembly - X86 和 ARM 程序集的参考文档有哪些？

> ID：13452875
> 
> 赞同：1
> 
> 时间：2012-11-19T11:30:54.283
> 
> 标签：assembly, standards

在 C++ 案例中，有 ISO 论文和关于该语言未来和当前定义草案的“社区”论文。

X86 和 ARM 平台的程序集的等效来源是什么？

我发现很难跟上汇编的步伐，因为它真的很分散（即使只考虑 X86 平台），而且在许多情况下，我什至无法找出寄存器 X 指的是什么，或者什么 CPU 集支持该功能或寄存器。

没有所有寄存器的索引，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T16:51:09.913

如评论中所述，您的问题的答案很复杂，因为制造商为其处理器制作手册。此外，x86 更加复杂，因为 32 位和 64 位处理器通常有单独的文档手册（我对 ARM 不够熟悉，无法在此发表评论）。

**英特尔 x86**（32 位和 64 位）可在此处找到：[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

**AMD x86**文档：[所有处理器](http://support.amd.com/us/psearch/Pages/psearch.aspx?type=2.1;2.12&product=&contentType=Tech%20Doc%20Processor)和[AMD64 架构和软件手册](http://support.amd.com/us/psearch/Pages/psearch.aspx?type=2.1%3b2.12&product=5.7&contentType=Tech+Doc+Processor&ostype=&keywords=&items=20)。这里有很多资源，您可能需要根据您要查找的内容对其进行一些过滤。

**ARM**提供 ARM 架构的参考手册：[ARM Architecture](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.subset.architecture.reference/index.html)

# iphone - 是否有开源框架可以轻松实现与 SLComposeViewController 的社交分享？

> ID：13452876
> 
> 赞同：1
> 
> 时间：2012-11-19T11:30:59.077
> 
> 标签：iphone, ios, ipad, social-networking, sharing

我在 SO 上找到了这个[问题](https://stackoverflow.com/questions/12503287/tutorial-for-slcomposeviewcontroller-sharing)，有人提供了一个关于如何直接使用 SLComposeViewController 的快速教程。

每个人都想在他们的应用程序中实现共享功能，我可以想象有一个框架已经实现了一个可配置的共享表，它为用户提供了很多不同的选项？

我无法想象每个人都一直在重新发明这个轮子。但我也没有幸运地找到自己做的替代方案。

我所需要的只是一个包含各种共享选项的叠加层或操作表。然后用户点击一个，相应的 SLComposeViewController（或类似的）将被显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:43:07.183

检查共享工具包，它是一个开源框架：[http://getsharekit.com](http://getsharekit.com)或 addthis，它未打开，但可以为您提供所需的结果[http://support.addthis.com/customer/portal/articles/381270-addthis-for- ios-快速入门指南](http://support.addthis.com/customer/portal/articles/381270-addthis-for-ios-quick-start-guide)

# jquery - jQuery动画停止奇怪的输出

> ID：13452879
> 
> 赞同：0
> 
> 时间：2012-11-19T11:31:26.263
> 
> 标签：jquery, animation

我的问题是，我只为心脏设置动画 + - 宽度、高度和左上角，但它不会停止动画，它会加倍，如果我关闭并再次打开，舔每一步将执行两次，如果关闭三次，则执行三次很快。

令人讨厌，因为我之前成功使用了 .stop(true, false) 但没有使用此动画，我尝试将所有 -= 和 += 替换为居中的容器 div 中的绝对值（如左上角是方向变化不同）但没有解决它。

还尝试使用正在运行的变量并将其设置为 false 和 .clearQueue()。也将 $('#Heart') 作为变量并始终调用它，但问题仍然存在。如果有人能指出我为什么会出现这种行为，我会非常感激。

```
function opened() {
    var Heart = $('#Heart');
    if (Pacemaker === 3) {
        $('#Heart').fadeOut(100, function () {
            $('#Div').fadeIn(100);
            Runner = false;
        });
    }
    if (Runner === true && Pacemaker < 3) {
        Heart.animate({width: '170px', height: '142px', left: '10px', top: '+=10px'}, 600,     function () {
            console.log('still');
            Heart.animate({width: '210px', height: '182px', left: '0px', top: '-=10px'}, 600, function () {
                console.log('still');
                Heart.animate({width: '170px', height: '142px', left: '10px', top: '+=10px'}, 600, function () {
                    console.log('still');
                    Heart.animate({width: '210px', height: '182px', left: '0px', top: '-=10px'}, 600, function () {
                        console.log('still');
                        Pacemaker++;
                        /*$('#Heart').stop(true, false); tried also putting it here*/

                        opened();        
                    });       
                });     
            });       
        });
    }
}

//------------------------------------------------------------------------------

function closed() {
    $('#Heart').stop(true, false).css({display : 'block' });
    $('#Heart').clearQueue();
    Pacemaker = 0;   

} 
```

# mysql - MySQL JOIN 返回意外值

> ID：13452880
> 
> 赞同：1
> 
> 时间：2012-11-19T11:31:27.173
> 
> 标签：mysql, sql, select, join

我正在尝试做一个简单的 mysql 请求，但我遇到了问题。

我有 2 个表定义如下：

```
currencies
______________________________________________________________________________________
currency_id | currency_name | currency_symbol | currency_active | currency_auto_update

exchange_rates
____________________________________________________________________________________________________
exchange_rate_id | currency_id | exchange_rate_date | exchange_rate_value | exchange_rate_added_date 
```

我想要做的是`exchange_rates`为活动货币选择里面的最后一行。

我是这样做的：

```
SELECT c.currency_id, c.currency_name, c.currency_symbol, c.currency_active, er.exchange_rate_id, er.exchange_rate_date, er.exchange_rate_value
FROM currencies c
LEFT JOIN (
    SELECT er1.exchange_rate_id, er1.currency_id, er1.exchange_rate_date, er1.exchange_rate_value
    FROM exchange_rates er1
    ORDER BY er1.exchange_rate_date DESC
    LIMIT 1
    ) AS er
ON er.currency_id=c.currency_id
WHERE c.currency_active='1' 
```

即使有匹配的行，这也会`NULL`从表中返回值`exchange_rates`

我试图删除`LIMIT 1`，但如果我这样做，我会返回所有活动货币的行，这不是我想要的解决方案

这个查询应该是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:46:28.903

试试这个：

```
SELECT c.currency_id, c.currency_name, c.currency_symbol, c.currency_active, er.exchange_rate_id, er.exchange_rate_date, er.exchange_rate_value
FROM currencies c
LEFT JOIN (SELECT * FROM 
    (SELECT er1.exchange_rate_id, er1.currency_id, er1.exchange_rate_date, er1.exchange_rate_value
    FROM exchange_rates er1
    ORDER BY er1.exchange_rate_date DESC) AS A GROUP BY currency_id 
    ) AS er
ON er.currency_id=c.currency_id
WHERE c.currency_active='1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:39:57.307

查询的想法对我来说是正确的。您的左连接查询应返回具有最新汇率的行。你可以在这里使用内部连接，因为必须有一种货币引用这个......

```
SELECT c.currency_id, c.currency_name, c.currency_symbol, c.currency_active, er.exchange_rate_id, er.exchange_rate_date, er.exchange_rate_value
FROM currencies c
INNER JOIN exchange_rates_er1 e ON e.currency_id = c.currency_id
WHERE c.currency_active='1'
ORDER BY e.exchange_rate_date DESC
LIMIT 1 
```

# gwt - GWT RPC 方法调用失败且没有错误消息

> ID：13452881
> 
> 赞同：0
> 
> 时间：2012-11-19T11:31:35.637
> 
> 标签：gwt, rpc

在 GWT 应用程序中，我有 RPC 接口。某些方法工作正常（即`RemoeServiceServlet`配置良好），但是当我尝试调用另一个方法时，它总是以`onFailure()`方法失败。Ajax 调用也不会发生（我可以使用 FireBug 看到它，服务器端方法调用也不会发生），但该服务的另一个方法也执行 Ajax 调用。

当我尝试使用记录错误时，`e.getMessage()`我收到*“未定义”*消息。我还尝试使用`try-catch`- 没有错误消息来包装 RPC 调用代码。

此问题是否与 GWT-RPC 序列化有关？

**编辑：** Opera Dragonfly 在生成的 JavaScript 中显示以下方法错误（使用 PRETTY 模式编译）：

`function $check(this$static, typeSignature){ if (isNull($get_3(this$static.methodMapNative, typeSignature))) { Unhandled Object: undefined throw new SerializationException_1(typeSignature); } }`

带有错误信息

> 未处理的对象：未定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:11:39.973

我猜您有序列化问题，请记住 Java 序列化与 GWT 序列化不同。

使用 RPC 时，通常没有关于序列化错误的有意义的错误消息。

*   必须有 0 元构造函数
*   final 字段本质上是瞬态的（即不要在打算序列化的类中使用 final 字段）
*   集合（例如 List 和 Set）必须使用 @gwt.typeArgs 进行注释。@gwt.typeArgs 是一个 JavaDoc 注释，因此它必须包含在一个 JavaDoc 注释中，例如：/** @gwt.typeArgs */

有关详细信息，请参阅： [GWT 序列化](http://www.gwtapps.com/doc/html/com.google.gwt.doc.DeveloperGuide.RemoteProcedureCalls.SerializableTypes.html)

要尝试的另一件事：从 eclipse-plugin 运行 GWT 时，会在 eclipse 项目中创建一个文件夹（我相信它称为 gwt-unitCache）。有时我自己的 GWT 项目生病并输出奇怪的异常，我可以通过删除文件夹并再次运行项目来解决这个问题。

# itunes - 苹果联盟计划

> ID：13452885
> 
> 赞同：1
> 
> 时间：2012-11-19T11:31:44.393
> 
> 标签：itunes, affiliate

Apple 如何为联属计划会员付费？这笔钱是否记入 iTunes Connect？我有一个应用程序，当用户点击应用程序图标时，它会将用户带到 iTunes。附属合作伙伴是 Linkshare。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:31:17.013

Apple 不会付钱给你，Linkshare 会，确保你在那里填写你的付款方式。

此外，如果您要链接到应用程序，请确保您订阅了欧洲联盟计划，如果您想最大化您的联盟利润，否则您只会获得美国流量的份额。您可以使用[Afflr](http://www.afflr.com)将您的流量分配到适当的联盟网络。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T08:38:39.837

iTunes、App Store、Mac App Store、iBookstore 由第三方公司管理。您对该计划的付款不是通过与 Apple 的直接关系管理的。

在此处了解有关该计划以及如何开始的更多信息：http:
[//www.apple.com/itunes/affiliates/resources/documentation/itunes-app-store-affiliate-program.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-app-store-affiliate-program.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T22:37:40.883

Apple 生成收益报告，并通过第三方（通常是银行）生成发票并将其记入开发人员。首先，在他们付钱给你之前，你需要赚到超过 150 美元。那就是“最低付款门槛”。

如果您的收入未超过 150，则将滚动到下个月，直到您通过阈值。

在巴西，付款由银行（保利斯塔银行）进行，该银行将美元兑换成当前硬币，并将价值转移到您选择的银行账户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-07T23:33:02.147

截至 2013 年底和 2014 年初，Apple 摆脱了之前与 LinkShare 和 TradeDoubler 的关系，目前正在使用 Performance Horizo​​n Group 进行第三方附属管理。

[http://www.apple.com/itunes/affiliates/resources/blog/important-affiliate-program-changes.html](http://www.apple.com/itunes/affiliates/resources/blog/important-affiliate-program-changes.html)

[http://www.apple.com/itunes/affiliates/resources/phg_transition.html](http://www.apple.com/itunes/affiliates/resources/phg_transition.html)

从[这里](http://www.apple.com/itunes/affiliates/resources/archives.html)的公告趋势来看，似乎大多数国家都迁移（或迁移）到了 PHG 平台。

虽然之前的关系是更大的附属网络的一部分，但 PHG/iTunes 似乎是一个独立的私人附属计划，完全致力于 Apple/iTunes。

# javascript - 在 window.open 之后通过 JavaScript 获取上一页 URL

> ID：13452887
> 
> 赞同：1
> 
> 时间：2012-11-19T11:31:47.823
> 
> 标签：javascript

如果我有一个脚本调用`window.open`，将新页面加载到同一个窗口中，那么新页面的 JavaScript 需要识别上一页的 URL - 找到它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:47:14.413

您可以使用 window.opener.location.href ，它将为您提供打开新窗口的父页面的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:41:41.433

使用`Window.opener`你可以得到它，比如

```
var win=​window.open('http://heera.it')​;
console.log(win.opener.location.href); // will output the url 
```

[**例子。**](http://jsfiddle.net/c4dQY/1/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:39:51.040

您可以使用`window.opener`来获取对打开当前窗口的窗口的引用。不确定这是否是您所追求的。使用`window.open`时会出现一个新窗口，不知道“在同一屏幕中打开新窗口”是什么意思。

# project-management - Scrum 开发人员.. 还是我？

> ID：13452894
> 
> 赞同：3
> 
> 时间：2012-11-19T11:32:09.917
> 
> 标签：project-management, agile, scrum

我在一个 SCRUM 团队工作，几分钟前我们进行了一次扑克会议。我有（仍然有）“我应该如何打牌”的想法，但我的团队对此有另一个想法。我今天来到你面前问我是否应该改变我看待扑克的方式，或者环境（团队）不是'SCRUM-enaugh'......

我们有这个故事.. 我打了 50 个故事点（数字并不重要，想法是），2 个同事打了 10 个，团队的其他人平均打了 25 个。我们讨论了一下，我们决定重新打。

由于在会谈期间我的经验没有改善，要求也没有改变，我决定仍然在上面打 50 分，而团队的其他成员“同意”估计 25 个故事点。

```
25 remained. 
```

我的论点：会谈后，我认为我对故事的了解是一样的，要求是一样的，所以我的估计是一样的。

团队争论：会谈后，我们看到有 2 个人确切地知道故事的内容，他们估计有 25 人，所以我们将全部 25 人打牌，因为“团队将有 25 sp 的努力”

***我应该改变我看待扑克的方式还是环境（团队）不是'SCRUM-enaugh'......？？***

谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T16:40:27.633

在我看来，情况已经足够好了。当讨论后的人们仍然没有收敛到相同的估计时，通常的做法是取平均值（在你的情况下大约是 25）。

团队中不同的人有不同的“偏见”也很常见：有些人倾向于高估所有故事，有些人倾向于低估。这就是为什么平均值是一个很好的估计。

无论如何，经过一些迭代，你和团队会对这种故事的难度有更多的了解。估计应该变得更容易，因为所有团队成员都可以参考过去的经验，而不是对复杂性的最佳猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:03:21.380

如果你能证明是合理的，你不必改变你的估计。如果你能证明这一点，那么团队还不够“SCRUM”。然后团队需要通过它的估计程序并检查是否有改进:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T15:55:10.577

这就是我们团队所说的“冲突解决”。每次我们在一个项目上组建一个团队时，我们团队章程的一部分就是让每个人都同意一个**冲突解决模型**。我们使用它来确保在我们没有 100% 共识的情况下，我们有一个每个人都同意的模型来解决差异。

在您的情况下，您的模型首先进行讨论和重新估计，以尝试让人们获得相同的数字。如果失败了，您的团队中的大多数人似乎都认为将平均值/平均值/最多投票作为估计是正确的。根据您的问题，我倾向于认为您不同意这种方法。

在我们的一些团队中，我们使用了“竞争”模型，例如石头剪刀布，来确定胜利者。有时它总是“最高的胜利”，所以如果抓住故事的人是需要更多时间的人，他们就有积分去做。有时它是“多数规则”，您的团队似乎就是这种情况。

我建议你的 Scrum 主管或产品负责人让团队就每个人都同意的单一模型达成一致，这样每个人都知道他们正在进入什么领域。类似于以下内容。

**模型：**

1.  **第一步：**讨论 2 分钟并重新估算。
2.  **第二步：**如果仍然陷入僵局，选择多数。
3.  **第三步：**如果没有明显多数，选择更高的值。

显然，这可能不是您将使用的模型，但它是一个示例，说明如何让您的团队同意总是有结果的事情，并且仍然允许先说出来的基本原则。最重要的是每个人都知道模型是什么，并且每个人都同意它。

# django - Django floatformat 将 113.999 格式化为 114.0

> ID：13452895
> 
> 赞同：2
> 
> 时间：2012-11-19T11:32:14.220
> 
> 标签：django, django-templates, rounding

我有一个要传递给模板的值，即 113.999。

当我这样做时`{{ value|floatformat:"-1" }}`，它会输出 114.0。

查看代码： `some_var = 113.999`

模板代码： `{{ some_var|floatformat }}`

我对 floatformat 的理解是它应该四舍五入，如果全为零，则不显示小数部分。

floatformat 错了，还是我错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:07:36.500

有趣的是，通过探索代码，我发现量化发生在[检查 integer](https://github.com/django/django/blame/master/django/template/defaultfilters.py#L163)之后。因此`113.999`在检查整数并失败后被量化。

IMO，好吧，我不是数字符号的专家:)，`114.0`这里代表一个四舍五入的值，它不是原始的`114`.

如果你真的不想要这种行为，一个快速而尴尬的方法是
`{{ value|floatformat|floatformat }}`......

此外，默认情况下`floatformat`使用`-1`，因此`{{ value|floatformat }}`在您的代码中就足够了。

# c# - 由源 HTTP 请求的 HTTP 响应产生的 HTTP 请求是否具有与源 IP 相同的 IP

> ID：13452898
> 
> 赞同：0
> 
> 时间：2012-11-19T11:32:32.473
> 
> 标签：c#, http, dns, proxy, ip

标题可能有点混乱，但我不知道如何解释更容易或不同。我现在正在用 C# 编写本地代理服务器。当浏览器启动并由代理重定向的 HTTP 请求由相应的 Web 服务器响应时，浏览器会启动一堆新的 HTTP 请求，（你能告诉我浏览器是如何知道的，要重新加载什么，以及它是如何工作的吗？ ) 图片例如。我需要知道的是：我是否必须为每个重新加载的对象启动一个 DNS 请求，或者是否可以使用第一个 HTTP 请求中的 IP 地址？

问候，托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:49:14.977

来自[维基百科](http://en.wikipedia.org/wiki/Domain_Name_System#Record_caching)：

> DNS 解析过程通过在响应后将 DNS 请求记录缓存一段时间来减少单个服务器的负载。这需要对副本进行本地记录和后续咨询，而不是在上游发起新请求。解析器缓存 DNS 响应的时间由与每条记录关联的称为生存时间 (TTL) 的值确定。TTL 由发出权威响应的 DNS 服务器的管理员设置。有效期可能从几秒钟到几天甚至几周不等。

因此，虽然 TTL 尚未过期，但您可以重复使用已解析的 IP 地址，而无需执行新的 DNS 查找。当 TTL 过期时，您需要执行新的 DNS 查找。

[Dns 类](http://msdn.microsoft.com/en-us/library/system.net.dns.aspx)不公开与 IP 地址关联的TTL，我不确定它是否缓存了 IP 地址。您可以检查它是否执行缓存，例如，通过使用 Wireshark 查看流量。如果是这样，只需每次调用[​​ Dns 类方法。](http://msdn.microsoft.com/en-us/library/system.net.dns.aspx)如果没有，请实现您自己的 DNS 客户端或抱怨并每次调用[Dns 类方法。](http://msdn.microsoft.com/en-us/library/system.net.dns.aspx)

# debian - 在基于 Debian 的操作系统上手动安装手册页

> ID：13452900
> 
> 赞同：1
> 
> 时间：2012-11-19T11:32:44.987
> 
> 标签：debian, manpage

对于一个小的 Python 脚本“mytool”，我写了一个手册页，我想在基于 Debian 的操作系统上手动安装（没有操作系统包）。我怎么做？

我尝试压缩手册页并将其复制到多个位置（/usr/share/mytool、/usr/share/man8、/usr/local/man/man8），但如果我运行“man mytool”，则手册页不会显示. 我是否需要以某种方式刷新联机帮助页以便 man 找到文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:38:29.340

安装 -g 0 -o 0 -m 0644 mytool.8 /usr/local/man/man8/

# android - OnItemClickListener 与 OnItemLongClickListener

> ID：13452901
> 
> 赞同：0
> 
> 时间：2012-11-19T11:32:47.370
> 
> 标签：android

如何同时使用 OnItemClickListener 和 OnItemLongClickListener 或仅禁用列表视图上的长按？我已经覆盖了 OnItemLongClickListener，当我在 onItemLongClick 上返回 true 时，longclick 将禁用，但 OnItemClickListener 将不再响应。

```
DailyReportList.setOnItemLongClickListener(new OnItemLongClickListener(){ 
        @Override   
    public boolean onItemLongClick(AdapterView parentView, View childView, int position, long id) {

        return true;}});

    registerForContextMenu(DailyReportList);
    DailyReportList.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            arg1.showContextMenu();
            FillTxtWithListItems(arg1);

        }}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T08:49:07.200

如果您想禁用 onClick 或 onLongClick，您只需取消选中/选中`layout xml properties`. 查找有关如何禁用它的图像..![在此处输入图像描述](../Images/c41a79911760618a7003e48973a65fc6.png)

![在此处输入图像描述](../Images/048e381d9010c52146a18ad08c239f52.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:59:08.050

如果您不想长按侦听器或上下文菜单，请不要设置任何内容，也不要调用`registerForContextMenu()`. 列表本身没有这些。

# symfony-forms - 在 Symfony2.1 中手动更改或捕获无效 CSRF 令牌的消息

> ID：13452903
> 
> 赞同：3
> 
> 时间：2012-11-19T11:32:54.357
> 
> 标签：symfony-forms, symfony-2.1, csrf-protection

我正在使用**Symfony2.1**。它对表单具有内置的**CSRF 保护**。CSRF token 无效时返回的错误信息是：“ *The CSRF token is invalid. Please try resubmit the form* ”。

我使用经典调用将其显示在我的 Twig 模板中的表单顶部：

```
{{ form_errors(form) }} 
```

如何更改返回的消息？

或者，更高级的可能性是捕获此错误类型，以便在我的 Twig 模板中显示大量选项/链接。任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T12:02:32.270

您是否尝试在文件`validators.{locale_code}.yml`中设置为 key 设置翻译`The CSRF token is invalid. Please try to resubmit the form`？要更改默认消息，您可以尝试：

```
 #MyBundle\Resources\translations\validators.en.yml

 The CSRF token is invalid. Please try to resubmit the form : My custom CSRF error 
```

错误消息[在这里](https://github.com/symfony/Form/blob/master/Extension/Csrf/EventListener/CsrfValidationListener.php)抛出，它属于 FormError 类......因此应该可以翻译它。

# android - 获取用户的 GPS 位置并存储

> ID：13452906
> 
> 赞同：0
> 
> 时间：2012-11-19T11:33:02.937
> 
> 标签：android, gps

它想按检索顺序保留最后 10 个坐标的数组（例如 Java 泛型：List），因此最新的坐标始终位于堆栈的顶部等。如果我要求这个数组，我们可以回去看看用户通过跟踪步骤采取的步骤。请在此处帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:44:52.443

首先，您需要阅读有关如何检索用户 GPS 位置的信息。

[http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html)

然后让你的类实现 android.location.LocationListener 并在 onLocationChanged() 回调中将位置添加到列表中。

```
@Override
public void onLocationChanged(Location location) {
   list.add(location);
} 
```

# function - Haskell 以编程方式/动态定义函数

> ID：13452907
> 
> 赞同：7
> 
> 时间：2012-11-19T11:33:17.543
> 
> 标签：function, haskell, functional-programming, higher-order-functions

我正在寻找一种在 Haskell 中动态定义函数的方法，或者寻找我显然不知道的 Haskell 惯用的等效方法。

场景如下：我有一个`tagWithAttrs`基于提供的`String`参数生成新函数的函数。定义看起来像这样：

```
tagWithAttrs :: String -> ([(String, String)] -> [String] -> String)
tagWithAttrs tagName = [...]  -- Implementation ommited to save room.

h1 :: [(String, String)] -> [String] -> String
h1 = tagWithAttrs "h1"

main :: IO ()
main = putStrLn $ h1 [("id", "abc"), ("class", "def")] ["A H1 Test"]

-- Should display '<h1 id="abc" class="def">A H1 Test</h1>'. 
```

到目前为止，一切都很好。但是我指定的行`h1`是其中之一，因为我必须对我定义的每个 HTML 标记都这样做。在 Python 中，我会遍历 HTML 标记名称列表，将每个相应`tag_with_attrs`的结果从`globals()`. 简而言之，我会动态地将新条目插入符号表中。

这个习语的 Haskell 等价词是什么？

*顺便说一句，我完全意识到我正在复制许多已经完成 HTML 标记的现有库的工作。我正在为一个玩具项目做这个，仅此而已:)*

编辑：一些已发布的解决方案建议仍然依赖于逐一定义*最终结果标签功能的机制。*这违反了 DRY，否则我会按照我的方式去做。这是我试图回避的 DRY 违规行为。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T11:55:57.343

Haskell 是静态类型的，这意味着必须在编译时对所有符号进行类型检查。这意味着您不能在运行时将条目添加到符号表中。

你想要的是元编程。代码在**编译时**运行以生成其他代码（你自然而然地觉得懒惰打字）。这意味着类似于宏系统的东西。

Haskell 没有宏，但是 Haskell 有模板： [http ://www.haskell.org/haskellwiki/Template_Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)

与宏一样，其想法是编写一个生成 AST 的函数。元函数采用您要使用的函数的名称（在您的情况下为`div`、`ul`等`li`）并生成具有该名称的函数的 AST。

有点矫枉过正，但如果你真的想这样做，这是一个相对简单的教程： http: [//playingwithpointers.com/archives/615](http://playingwithpointers.com/archives/615)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T12:17:50.120

好吧，你知道 Haskell 是 curried 并且函数是一流的，所以你真的不需要任何魔法来做到这一点。只需认识到您可以执行以下操作：

```
import qualified Data.Map as M
import Data.Map (Map)
import Data.Text (Text)

type TagName = Text
type TagWithAttrs = Map TagName ([(String, String)] -> [String] -> String)

tagFuncs :: TagWithAttrs
tagFuncs =
    M.fromList $
    ("h1", \xs ys -> zs) :
    ("h2", \xs ys -> zs) :
    {- ... -}
    []

tagWithAttrs :: TagName -> [(String, String)] -> [String] -> String
tagWithAttrs = flip M.lookup tagFuncs 
```

这都是常规高效的 Haskell。注意：您可能很想通过使用子句将其定义`tagFuncs`为本地值。虽然这可以使您的代码更漂亮，但也会导致每次调用.`tagWithAttrs``where``tagWithAttrs`

要动态地将东西插入地图，您可以将地图作为参数`tagWithAttrs`而不是顶级地图。另一种选择是使用并发变量，如 an`MVar`或（可能更好） a `TVar`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-19T12:10:45.590

这可以通过一些[Template Haskell](http://www.haskell.org/haskellwiki/Template_Haskell)轻松完成：

```
{-# LANGUAGE TemplateHaskell #-}

import Control.Monad (forM)
import Language.Haskell.TH

tagWithAttrs :: String -> ([(String, String)] -> [String] -> String)
tagWithAttrs tagName = undefined

$(forM ["h1", "h2", "h3"] $ \tag ->
   valD (varP (mkName tag)) (normalB [| tagWithAttrs $(stringE tag) |]) [])

main :: IO ()
main = putStrLn $ h1 [("id", "abc"), ("class", "def")] ["A H1 Test"] 
```

这会生成声明`h1 = tagWithAttrs "h1"`、`h2 = tagWithAttrs "h2"`、`h3 = tagWithAttrs "h3"`等。要添加更多，只需将它们添加到列表中。

代码有点难看，因为不可能在 TH 中拼接模式。否则，我们将能够编写类似`[d| $(mkName tag) = tagWithAttrs $(stringE tag) |]`. 相反，我们必须使用 TH 组合子手动构造声明。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-21T01:52:32.993

我想我会做的是为标签定义一个数据类型：

```
data Tag = H1 | H2 | H3 ...
    deriving (Show, Eq, Ord, Enum, Bounded) 
```

这是您对所有标签的单点定义。

然后定义一个将`Tag`值映射到适当函数的函数：

```
tag :: Tag -> [(String, String)] -> [String] -> String
tag = tagWithAttrs . show 
```

然后在你想调用`h1`, `h2`,的地方`h3`你改为调用`tag H1`, `tag H2`, `tag H3`, 等等。

请注意，这与定义函数、、等的详细程度**相同；**实际上，您只是获得了稍长的名称（恰好包含一个空格）。对我来说，这是 DRY 和“说出你的意思”的理想组合。无论如何，对我来说似乎不是一个功能；实际上，我更愿意认为我正在使用一个函数处理多个数据项，而不是我拥有一组庞大的函数。`tag_h1``tag_h2``tag_h3``h1`

如果我对这个速度不满意（因为编译器可能不会优化掉所有的`tagWithAttrs`调用）***并且***我已经确定这是加速我的应用程序的“最容易实现的目标”，我会考虑记忆`tagWithAttrs`或`tag`，但在内部以保持相同的界面。一种快速的可能性：使用所有标签预先填充地图；您可以使用`Enum`and`Bounded`实例来执行此操作，而无需明确重新列出所有标签（这是您无法使用函数或字符串表示的标签所做的事情）。非严格评估的一个附带好处是，这可能会导致`tagWithAttrs`对实际使用的每个标签只进行一次评估。

这仍然会在每次`tag`调用时留下数据结构查找（除非编译器足够聪明以优化它们，这并非不可能）。我怀疑这将是最重要的性能瓶颈，除非您对程序的其余部分进行了一些重大优化。要在编译时进行所有查找（不依赖优化器），我认为您确实需要 Template Haskell。在这种情况下，我可能不会走那么远，只是因为我真诚地怀疑我是否需要它更快（而且我的*可用*计算时间比我的时间多）。*但即使我使用 Template Haskell 在编译时完成查找，我也不*希望*使其看起来像每个标签的单独顶级函数；我只是发现“标签和知道如何呈现标签的函数”比“标签，可以调用来呈现自己”是一种更自然和灵活的方法。*

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T15:25:54.847

编写一个简单的代码生成器，输入您想要的标签列表，将输出包含为一个模块。*

# http - 我如何在golang中跟踪上传进度

> ID：13452914
> 
> 赞同：7
> 
> 时间：2012-11-19T11:33:39.737
> 
> 标签：http, upload, go, progress

我正在尝试跟踪 GOLANG 中的上传进度，这就是我目前得到的

```
func Upload(w http.ResponseWriter, req *http.Request) {

    mr, err := req.MultipartReader()
    if err != nil {
        return
    }

    for {
        // var part *multipart.Part
        part, err := mr.NextPart()
        mr.partsRead

        if err == io.EOF {
            break
        }
        println(part)

    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T13:12:10.343

这将起作用，一个*流*来计算读取的字节数和你需要将*流*指向某个地方的总进度，在这个代码示例中，我将它指向一个文件。

```
func Upload(w http.ResponseWriter, req *http.Request) {

    mr, err := req.MultipartReader()
    if err != nil {
        return
    }
    length := req.ContentLength
    for {

        part, err := mr.NextPart()
        if err == io.EOF {
            break
        }
        var read int64
        var p float32
        dst, err := os.OpenFile("dstfile", os.O_WRONLY|os.O_CREATE, 0644)
        if err != nil {
            return
        }
        for {
            buffer := make([]byte, 100000)
            cBytes, err := part.Read(buffer)
            if err == io.EOF {
                break
            }
            read = read + int64(cBytes)
            //fmt.Printf("read: %v \n",read )
            p = float32(read) / float32(length) *100
            fmt.Printf("progress: %v \n",p )
            dst.Write(buffer[0:cBytes])
        }
    }
} 
```

# python - 为什么在将 Unicode 写入 CMD 时会出现 IOErrors？（使用代码页 65001）

> ID：13452916
> 
> 赞同：12
> 
> 时间：2012-11-19T11:33:49.503
> 
> 标签：python, windows, windows-8

我在 Windows 8 的 CMD 上，我已将代码页设置为 65001 ( `chcp 65001`)。我正在使用 Python 2.7.2 (ActivePython 2.7.2.5) 并将*PYTHONSTARTUP*环境变量设置为“bootstrap.py”。

**引导程序.py：**

```
import codecs
codecs.register(
    lambda name: name == 'cp65001' and codecs.lookup('UTF-8') or None
) 
```

这让我可以打印 ASCII：

```
>>> print 'hello'
hello
>>> print u'hello'
hello 
```

但是当我尝试使用非 ASCII 字符打印 Unicode 字符串时遇到的错误对我来说毫无意义。在这里，我尝试打印一些包含北欧符号的字符串（为了便于阅读，我在打印之间添加了额外的换行符）：

```
>>> print u'æøå'
��øåTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 2] No such file or directory

>>> print u'åndalsnes'
��ndalsnes

>>> print u'åndalsnesæ'
��ndalsnesæTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 22] Invalid argument

>>> print u'Øst'
��st

>>> print u'uØst'
uØstTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 22] Invalid argument

>>> print u'ØstÆØÅæøå'
��stÆØÅæøåTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 22] Invalid argument

>>> print u'_ØstÆØÅæøå'
_ØstÆØÅæøåTraceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: [Errno 22] Invalid argument 
```

如您所见，它并不总是引发错误（甚至不会每次都引发相同的错误），并且北欧符号只是偶尔正确显示。

有人可以解释这种行为，或者至少帮我弄清楚如何正确地将 Unicode 打印到 CMD 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-09T07:59:12.447

尝试这个 ：

```
# -*- coding: utf-8 -*-
    from __future__ import unicode_literals
    print u'æøå' 
```

**在交互式 python 会话**中使用 **from __future__ import unicode_literals**会很有用。

 ****当然可以使用WriteConsoleW**成功地将 Unicode 写入**控制台**。无论控制台代码页如何，包括 65001，这都有效。[这里](http://tahoe-lafs.org/trac/tahoe-lafs/browser/src/allmydata/windows/fixups.py)的代码是这样做的（它适用于 Python 2.x，但无论如何您都会从 C 调用 WriteConsoleW）。

 **WriteConsoleW 有一个我知道的错误，即[一次写入超过 26608 个字符时失败](http://tahoe-lafs.org/trac/tahoe-lafs/ticket/1232)。通过限制在单个调用中传递的数据量很容易解决这个问题。

字体不是 Python 的问题，但编码才是。仅仅因为某些用户可能没有选择可以显示这些字符的字体而无法输出正确的字符是没有意义的。这个错误应该重新打开。

（为了完整起见，可以使用 Lucida Console 和 Consolas 以外的字体在控制台上显示 Unicode，但它[需要注册表破解](https://stackoverflow.com/questions/878972/windows-cmd-encoding-change-causes-python-crash/3259271#3259271)。）我希望它有所帮助。****

# tfs - 从 TFS 获取特定的完整构建

> ID：13452919
> 
> 赞同：0
> 
> 时间：2012-11-19T11:33:52.143
> 
> 标签：tfs

我正在测试一个特殊的变化。这是 ChangeSet：123456（让我们假设）。我需要获得完整的解决方案，就像签入变更集的数据一样。

如果我确实获取特定版本 -> 通过变更集：123456，我只会得到那些受变更集影响的文件。我无法获得整个项目。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:11:10.093

如果您转到源代码管理资源管理器，您可以选择项目的根文件夹并执行“获取特定版本”。它将获取尚未在本地正确版本的所有文件。

您可以通过单击另一个选项来强制获取所有文件，以获取该对话框中的所有文件。

# android - ListItems 在中心的位置

> ID：13452921
> 
> 赞同：0
> 
> 时间：2012-11-19T11:34:01.167
> 
> 标签：android, android-layout, android-actionbar, actionbarsherlock, android-dialog

我正在android中构建我的第一个应用程序。我也在使用ActionBarSherlock。我现在想要开发的是一个对话框，在radioGroup的顶部和下方显示一个radioGroup一个列表。我已经这样做了，但是我的项目列表上位于左侧。有什么办法可以让它们位于中间吗？谢谢您的时间

这是xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent" android:layout_height="match_parent">

<RadioGroup
    android:id="@+id/radiogroup"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:checked="true"
            android:text="Justified" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:text="Unjustified" />

</RadioGroup>

<customAdapter.MyListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp" >

</customAdapter.MyListView> 
```

这是实际的代码：

```
 public static class MyDialogFragment extends SherlockDialogFragment {
    int mNum;
    RadioButton btn1;
    RadioButton btn2;

    /**
     * Create a new instance of MyDialogFragment, providing "num"
     * as an argument.
     */
    static MyDialogFragment newInstance(int num) {
        MyDialogFragment f = new MyDialogFragment();

        // Supply num input as an argument.
        Bundle args = new Bundle();
        args.putInt("num", num);
        f.setArguments(args);

        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mNum = getArguments().getInt("num");

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.myfrg, container, false);

        ListView lv = (ListView) v.findViewById(R.id.list);

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_spinner_item,justifiedAbsences);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
        lv.setAdapter(dataAdapter);

        return v;
    }
} 
```

这是在我添加了 fravity="center" 之后

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent" android:layout_height="match_parent"
android:gravity = "center" >

<RadioGroup
    android:id="@+id/radiogroup"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:checked="true"
            android:text="Justified" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:text="Unjustified" />

</RadioGroup>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp" >

</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:49:40.227

您必须将自己的布局膨胀到列表项。列表项应如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content">  

    <!-- List item name -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true">
    </TextView>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:47:09.330

在你的线上

```
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

您应该将布局更改为以文本为中心的新布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:54:16.430

这是最后的结果..

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="match_parent" 
android:layout_height="match_parent"
android:gravity = "center" >

<RadioGroup
    android:id="@+id/radiogroup"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="Justified" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Unjustified" />

</RadioGroup>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="20dp" >

</ListView> 
```

# c++ - std::chrono 超类型，函数参数传递

> ID：13452923
> 
> 赞同：5
> 
> 时间：2012-11-19T11:34:14.663
> 
> 标签：c++, c++11, chrono

我有

```
auto now = std::chrono::high_resolution_clock::now(); 
```

我想将它传递给使用通用类型的时间点的函数。我不想指定使用的时钟的分辨率或类型。

我试过使用

```
void my_function(std::chrono::time_point time_point); 
```

但没有成功。因为显然 std::chrono::time_point 不是一种类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T11:40:10.263

这[`std::chrono::time_point`](http://en.cppreference.com/w/cpp/chrono/time_point)是一个模板类，至少需要一个`clock`模板参数。

要么明确设置时钟，比如

```
void my_function(std::chrono::time_point<std::chrono::high_resolution_clock> time_point); 
```

或者你可以让你的函数本身成为一个模板：

```
template<typename Clock>
void my_function(std::chrono::time_point<Clock> time_point); 
```

在最后一种情况下，您实际上不必在调用函数时指定模板参数，编译器会为您计算出来：

```
my_function(now); 
```

# android - 如何以编程方式在android中使用google api从gmail获取前20个联系人

> ID：13452929
> 
> 赞同：3
> 
> 时间：2012-11-19T11:34:32.983
> 
> 标签：android, google-api, android-contacts

我的 gmail 帐户中有 50 个联系人。但它只允许我导入 25 个联系人。所以我计划一次又一次地发送谷歌 api 调用，直到所有联系人都导入我的手机。我怎么能做到这一点r存在任何其他解决方案，而不是一次又一次地发送api调用。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:43:20.813

使用以下代码一次导入超过 25 个联系人：

[https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=5000](https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=5000)

max-results 表示要导入的最大联系人数

# elasticsearch - 带有 all_terms 的构面：索引别名上的 true

> ID：13452941
> 
> 赞同：0
> 
> 时间：2012-11-19T11:35:16.663
> 
> 标签：elasticsearch, tire

我有一个多租户应用程序，它使用带有过滤器的索引别名。只有一个问题......当我使用`facet('tags') { terms :tags, all_terms: true }`它时，它会返回完整索引的所有术语，而不是与当前租户匹配的术语。

解决这个问题的简单方法在哪里（除了为每个客户生成索引）？

示例： http: [//pastie.org/5400685](http://pastie.org/5400685)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:38:45.347

看起来弹性搜索如何在过滤别名的方面处理 all_terms 存在错误。但是您的问题的解决方案很简单，只需删除并在or查询`all_terms: true`上运行您的方面。[`match_all`](http://www.elasticsearch.org/guide/reference/query-dsl/match-all-query.html)`*:*`

# c# - WPF和c#中的TreeTable控件

> ID：13452944
> 
> 赞同：1
> 
> 时间：2012-11-19T11:35:41.083
> 
> 标签：c#, wpf, datagrid, treeview

我想知道如何在具有树结构的数据网格中显示分层数据。我会让自己清楚这个场景

我有以下课程..

```
public class Package
{
    public String name { get; set; }
    public Measure measure { get; set; }
    public List<Class> classList { get; set; }
}

public class Class
{
    public String name { get; set; }
    public Measure measure { get; set; }
    public List<Method> methodsList { get; set; }
}

public class Method
{
    public String name { get; set; }
    public Measure measure { get; set; }
}

public class Measure
{
    public String tolc { get; set; }
    public String lloc { get; set; }
    public String ploc { get; set; }
    public String lComments { get; set; }
    public String blankLines { get; set; }
} 
```

现在我想在具有这样的树结构的数据网格中显示它们..

```
Item Name    TLOC    LLOC   PLOC   LCOMMENTS    BLANKLINES
package1     100     80     70     45           30
-class1      30      20     19     2            12
--method1    30      20     19     2            12
-class2      70      60     51     43           18
--method1    50      20     11     23           8
--method2    20      40     40     20           10
package2     50      20     10     5            5
-class       50      20     10     5            5 
```

希望我说清楚了。如何在 C# 中使用 WPF 完成此操作。
这将非常有帮助，这让我疯狂了好几天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:53:14.990

您需要在 XAML 中使用 CollectionViewSource，如下所示：

```
<CollectionViewSource x:Key="Packages" Source="{Binding AllCode}">
            <CollectionViewSource.SortDescriptions>
                <!-- Requires 'xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"' declaration. -->
                <scm:SortDescription PropertyName="Name"/>
            </CollectionViewSource.SortDescriptions>
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="PackageName"/>
                <PropertyGroupDescription PropertyName="ClassName"/>
            </CollectionViewSource.GroupDescriptions>
        </CollectionViewSource> 
```

然后你需要用组样式附魔数据网格：

```
<DataGrid x:Name="dataGrid1"
                  Background="{x:Null}"
                  ItemsSource="{Binding Source={StaticResource Packages}}"
        <DataGrid.Columns>
                <DataGridTextColumn DisplayMemberPath="PackageName"/>
                <DataGridTextColumn DisplayMemberPath="ClassName"/>
            </DataGrid.Columns>
            <DataGrid.GroupStyle>
                <!-- Style for groups at top level. -->
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">                            
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                        <Expander IsExpanded="True" Background="White">
                                            <Expander.Header>
                                                <DockPanel>
                                                    <TextBlock FontWeight="Bold" Text="{Binding Name}" Margin="5,0"/>
                                                    <TextBlock FontWeight="Bold" Text="{Binding ItemCount}" Margin="5,0"/>
                                                </DockPanel>
                                            </Expander.Header>
                                            <ItemsPresenter />
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </DataGrid.GroupStyle>
        </DataGrid> 
```

我没有测试它，所以我希望你有想法。如果没有，请告诉我。我试着解释更多

# php - 后代中的静态变量分配冒泡到父级？

> ID：13452951
> 
> 赞同：2
> 
> 时间：2012-11-19T11:35:58.050
> 
> 标签：php, static, aop, class-hierarchy

我遇到了一个问题，我不确定这是否只是正常行为，或者我写错了什么。我的基类中有一个方法，它通过为该特定类的所有新实例创建代理来将全局过滤器应用于给定类。我计划的方式如下：

1.  附加`static $global_filter`（代理）到我要过滤的类，它扩展了基类`object`
2.  通过我的加载机制，在新实例化时返回代理而不是实际类（这将屏蔽方法调用并相应地应用过滤器）

但是，我陷入了*第 1 步*，似乎当我尝试分配`static $global_filter`给我想要过滤的后代类时，我的基类`object`也获得了相同的分配，这破坏了从它扩展的所有其他内容。

相关代码见下图：

```
class object {

    public static $global_filter;

    public function _filterGlobal($class, $method, $callback) {
        if ( !is_object($class::$global_filter) ) {
            $class::$global_filter = new filterable(null);
            # Replace the object being called with the new proxy.
        }
        var_dump($class);
        var_dump($class::$global_filter); // `filterable`
        var_dump(\core\blueprint\object::$global_filter); // Returns same as line above
        die();
        return $class::$global_filter->_add($method, $callback);
    }

} 
```

`$class::$global_filter`和`\core\blueprint\object::$global_filter`（基类）都返回相同的实例。而我希望**`object::$global_filter`是 null**。

我没有使用后期静态绑定来保持一致性（单对象过滤器和全局过滤器都以相同的方式非静态地调用）。

[这个问题似乎相关](https://stackoverflow.com/questions/3017777/class-inheritance-in-php-5-2-overriding-static-variable-in-extension-class)

任何帮助都感激不尽 ：）

### 编辑，完整示例

这将是一个具体的类，它 extends `model`which extends`object`

```
<?php
use core\blueprint\model;
class modelMock extends model {
    protected $schema = array();
    public function method($test) {
        return $test;
    }
} 
```

这将是另一个对象（例如控制器），它也会扩展`object`。它将过滤器应用于所有新实例`model`

```
<?php
use core\blueprint\object;
class objectMock extends object {

    public function applyFilters() {
        $this->_filterGlobal('core\blueprint\model', 'method', function($self, $chain) {
            $chain->params[0] = 'new param'; // adjust the paramters
            return $chain->next();
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:51:22.267

> 当我尝试将静态 $global_filter 分配给要过滤的后代类时，我的基类对象也得到相同的分配

是的，确实发生了这种情况。静态属性本质上是一个全局变量，被限制在类的命名空间内。遇到全局变量问题通常表明您没有使用最佳解决方案。

为了解决您的问题，您可以将过滤器设为（非静态）属性：

```
$class->$filter = new Whatever(); 
```

但与往常一样，通往罗马的道路更多，我建议您寻找替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:06:16.583

我不知道这是否对你有帮助：

```
class a {
   public static $type;

   public static function setType($class, $newType) {
      $class::$type = $newType;
      var_dump($class::$type);
   }
}
class b {
   public static $type = 'myType';
}

var_dump(b::$type);
a::setType('b', 'yourType');
var_dump(a::$type); 
```

可能是您没有为具体类定义静态属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:09:32.613

感谢大家的帮助，今天早上我花了一些时间并设法解决了我的问题。这是一个解决方法，但它是这样的：

```
public function _filterGlobal($class, $method, $callback) {
    if ( !is_object($class::$global_filter[$class]) ) {
        $class::$global_filter[$class] = new filterable(null);
        # Replace the object being called with the new proxy.
    }
    return $class::$global_filter[$class]->_add($method, $callback);
} 
```

因此，基本上为了在子类中获得唯一的静态变量而不必显式定义它们，您可以使用一个数组来存储子类的名称作为键，然后通过 getter 访问这些变量。

# sql-server-2008 - 变量列名

> ID：13452954
> 
> 赞同：0
> 
> 时间：2012-11-19T11:36:04.073
> 
> 标签：sql-server-2008, tsql

我正在使用连接从两个表中选择数据。表 A 保存当前表 b 的最后快照数据。简单的例子......

```
TableA
ProductID uniqueidentifier
ProductName VarChar(200)
Qty INT
Date DateTime

TableB
ProductID uniqueidentifier
ProductName VarChar(200)
Qty INT
DateTaken DateTime

SELECT a.ProductName, a.Qty, b.Qty From TableA a join TableB b on a.ProductID = 
b.ProductID 
```

有没有办法可以使用行中的数据为列名命名...

```
SELECT a.ProductName, a.Qty As ['Quantity ' + a.DateTaken], b.Qty As ['Quantity ' + b.DateTaken] From TableA a join TableB b on a.ProductID = 
b.ProductID 
```

不使用动态 SQL

# shell - shell脚本中双引号内的单引号

> ID：13452960
> 
> 赞同：2
> 
> 时间：2012-11-19T11:36:30.577
> 
> 标签：shell, sed, quotes

我需要将文件中的字符串替换`"'a"`为`'a`. 在实践中，我需要删除双引号。

我正在考虑使用 sed 来执行此操作，但直到现在我才找到解决方案：我想我因为引号而犯了一些语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:41:32.743

如果您只需要从文件中删除所有双引号字符，那么您可以使用`tr`以下`-d`选项：

```
$ cat test.txt
this is a test "'a"
something "else"
doesn't touch single 'quotes'

$ cat test.txt | tr -d '"'
this is a test 'a
something else
doesn't touch single 'quotes' 
```

**更新：**

如果要替换特定实例，`"'a"`则`'a`可以使用`sed`：

```
sed "s|\"'a\"|'a|g" test.txt
this is a test 'a
something "else"
doesn't touch single 'quotes' 
```

但是，我怀疑您所追求的不仅仅是替换字符周围的引号`a`。此`sed`命令将替换`"'anything"`with的任何实例`'anyhting`：

```
sed "s|\"'\([^\"]\+\)\"|'\\1|g" test.txt
this is a test 'a
something "else"
doesn't touch single 'quotes' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T11:48:18.317

这似乎对我有用

```
echo '"a"' | sed "s/\"a\"/\'a/" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:50:36.747

这可能对您有用（GNU sed）：

```
sed 's/"\('\''[^"]*\)"/\1/g' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:55:50.020

你可以使用：

```
perl -pe 's/\042//g' your_file 
```

042 是双引号的八进制值。

测试如下：

```
> cat temp
"'a"
> cat temp | perl -pe 's/\042//g'
'a
> 
```

# oracle - ORA-00907: 缺少右括号

> ID：13452963
> 
> 赞同：1
> 
> 时间：2012-11-19T11:36:40.077
> 
> 标签：oracle, select, join

```
SELECT * FROM (
SELECT SUM(A.Precio)AS "Total gastado", B.email FROM ARTICULO_EVENTO A
    JOIN (C.email FROM PEDIDO_ARTICULO_EVENTO C)B
    ON(B.email=A.email)
WHERE B.FechaHora > TO_DATE('20-08-2012', 'MM-DD-YYYY')
GROUP BY (B.email)
ORDER BY SUM(A.Precio) DESC
)
WHERE ROWNUM <=5; 
```

ORA-00907: 缺少右括号。在第 3 行。

¿ 为什么会出现此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:39:49.063

试试这个，你忘记了子查询中的 select 关键字并留下了一个“;”：

```
SELECT * FROM (
SELECT SUM(A.Precio)AS "Total gastado", B.email FROM ARTICULO_EVENTO A
    JOIN (select C.email FROM PEDIDO_ARTICULO_EVENTO C)B
    ON(B.email=A.email)
WHERE B.FechaHora > TO_DATE('20-08-2012', 'MM-DD-YYYY')
GROUP BY (B.email)
ORDER BY SUM(A.Precio) DESC
)
WHERE ROWNUM <=5; 
```

# javascript - 发布到不同的域偶尔会失败

> ID：13452970
> 
> 赞同：0
> 
> 时间：2012-11-19T11:36:56.843
> 
> 标签：javascript, jquery, post

在将会话转移到与我合作的公司的过程中“发布”到其他站点时，我遇到了问题。他们要求我们通过“发布”请求在查询字符串中使用会话令牌导航到他们的站点（是的，请求中没有正文）。

这是我用于 Post 请求的代码：

```
navigateByPost = function(path, parameters)
{
    var form = $('<form />');

    form.attr("method", "post");
    form.attr("action", path);

    parameters && $.each(parameters, function (key, value)
    {
        var field = $('<input />');

        field.attr("type", "hidden");
        field.attr("name", key);
        field.attr("value", value);

        form.append(field);
    });

    $(document.body).append(form);
    form.submit();
} 
```

我这样称呼它：

```
navigateByPost('http://other.site/login/?parameter1=sessiontokenhere'); 
```

大多数情况下，这可以正常工作，但有时，在完全随机的时间间隔内，我看到请求被取消，并且导航永远不会发生。这是导航失败时我在 chrome 开发工具中看到的内容：

![Chrome 开发工具请求失败的屏幕截图](../Images/59ab585c7f32e6e30c1447872f5a37aa.png)

我已经检查了 Firefox，但问题似乎没有发生，所以我不知道实际问题是什么。我知道这在对方端不会是问题，因为它不可能到达那里并在一毫秒内被拒绝。它一定是浏览器中的东西，但我不知道。

请帮助我，伙计们，我的桌子快用完了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:30:09.150

我发现上面显示的代码确实可以正常运行。我发现附有代码的链接实际上是导致问题的原因。

之前，我得到这样的元素：

```
$(document).on("click", "a.sessiontransfer", function(e) {
    e.PreventDefault();
    doSessionTransfer();
    return false;
}); 
```

这样，如果向页面添加了任何其他链接，他们就会使用此功能。我发现这在 100% 的情况下都不起作用，偶尔会产生我在屏幕截图中粘贴的错误。从那以后，我将其更改为以下内容；

```
$("a.sessiontransfer").off().on("click", function(e) {
    e.PreventDefault();
    doSessionTransfer();
    return false;
}); 
```

我还没有在我尝试过的任何设备上出现此故障，但它有一个不幸的副作用，即如果我向页面添加任何链接，我将不得不重新调用此功能以重新挂钩所有元素，确保首先删除现有的点击。

我希望这将有助于节省某人几天的调查时间并在此过程中节省一些办公桌！

# windows-8 - AllowAllTrustedApps 注册表项在 Windows RT 中不可用

> ID：13452974
> 
> 赞同：4
> 
> 时间：2012-11-19T11:37:04.163
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

我试图找到注册表项

HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Appx\AllowAllTrustedApps

在 Windows RT 中，它似乎丢失了。我到了 Windows 文件夹，但 Appx 文件夹不在那里。我错过了什么吗？机器是否需要连接到域才能看到这部分注册表？或者我可以简单地添加子文件夹和密钥并期望它工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:55:06.153

事实证明，添加键和值是有效的。

1) 确保密钥 HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Appx 存在。如果没有，请添加它。

2) 确保 32 位 DWORD HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Appx\AllowAllTrustedApps 存在。如果没有，请添加它。

3) 将该 DWORD 的值设置为 1。

4）瞧！您现在可以在没有许可证 xml 文件的情况下侧加载您的 Windows 应用商店应用程序和/或注入自定义数据文件。

[http://technet.microsoft.com/en-us/library/hh824882.aspx](http://technet.microsoft.com/en-us/library/hh824882.aspx)

# java - 如何在tomcat服务器上部署带有mysql数据库的java web应用程序

> ID：13452977
> 
> 赞同：3
> 
> 时间：2012-11-19T11:37:08.610
> 
> 标签：java, mysql, database, eclipse, tomcat

我已经在 Eclipse 中使用数据库 mysql 创建了 java web 应用程序。但是现在我必须在 tomcat 服务器中部署该 web 应用程序。我知道如何在没有数据库的情况下部署 web 应用程序，但需要数据库方面的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T11:53:36.160

在 Java Web 应用程序中获取 JDBC 连接有两种主要方法。

1.  从容器内 JNDI 目录服务中注册的 DataSource 检索连接。
2.  在应用程序代码中手动创建连接。

**JNDI**

使用[JNDI](https://stackoverflow.com/questions/13452977/how-to-deploy-java-web-application-with-mysql-database-on-tomcat-server)需要在 tomcat 中创建一个连接池。这可以在 tomcat`config`目录中的 context.xml 文件中完成。

**示例 Context.xml 条目**

```
 <Resource name="jdbc/EmployeeDB"
            auth="Container"
            type="javax.sql.DataSource"
            username="dbusername"
            password="dbpassword"
            driverClassName="org.hsql.jdbcDriver"
            url="jdbc:HypersonicSQL:database"
            maxActive="8"
            maxIdle="4"/> 
```

然后将在您的代码中检索此连接，如下所示：

```
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
DataSource ds = (DataSource)
  envCtx.lookup("jdbc/EmployeeDB");

Connection conn = ds.getConnection();
... use this connection to access the database ...
conn.close(); 
```

**手动创建**

在您的代码中手动创建连接更简单，但建议使用 JNDI，因为它具有可移植性。

**手动示例**

```
public class MysqlConnect{
   public static void main(String[] args) {

      Connection conn = null;
      String url = "jdbc:mysql://localhost:3306/";
      String dbName = "jdbctutorial";
      String driver = "com.mysql.jdbc.Driver";
      String userName = "root"; 
      String password = "root";

      try {
          Class.forName(driver).newInstance();
          conn = DriverManager.getConnection(url+dbName,userName,password);
          conn.close();
      } catch (Exception e) {
          e.printStackTrace();
      }
  }
} 
```

在为这些场景中的任何一个进行部署时，在类路径中拥有适当的 JDBC 驱动程序非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:44:07.517

这里有2个场景：

1.  您可以使用简单的 JDBC 直接在代码中定义连接，`Class.forName()`在这种情况下，您只需要确保包含驱动程序的 jar 在类路径中并且它应该可以工作。
2.  这是首选方法 -[在服务器上定义数据源](http://tomcat.apache.org/tomcat-6.0-doc/jndi-datasource-examples-howto.html)并使用 JNDI API 在代码中调用它：

    ```
    InitialContext ic = new InitialContext();  
    DataSource ds = (DataSource)ic.lookup("jdbc/testDS");  
    conn = ds.getConnection(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T11:44:20.053

在 contex.xml 中使用 -- 标签我们可以连接到任何数据库

# .net - 是否有必要在信号量上调用 Dispose？

> ID：13452978
> 
> 赞同：10
> 
> 时间：2012-11-19T11:37:17.230
> 
> 标签：.net, multithreading, dispose, semaphore

```
class myclass 
{
    private Semaphore _sync;

    myclass ()
    {
          _sync = new Semaphore(1,1);
    }

    doasync()
    {
           _sync.WaitOne();
           //do some stuff
           _sync.Release();
    }
}

 somefunctionsomewhere() 
 {
     var myobject = new myclass();    
     //spawn 100 threads that all call myobject.doasync()
 } 
```

以上安全+干净吗？当所有 100 个线程都完成它们的异步工作时，是否会同时处理 _sync 和 myclass ？

如果没有，知道何时调用 _sync.Dispose() 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T12:22:59.297

简短回答：不，您不需要调用 Dispose()。

长答案：

虽然建议您在使用完信号量后调用 Dispose()，但垃圾收集器迟早会处理信号量的资源。

显式调用 Dispose() 将保证相关资源的早期释放，但仅当您在短时间内创建并*忘记大量 Semaphore 实例时才需要它。*

如果您调用 Dispose()，那么使用简单的 Dispose() 调用就可以了。您不需要创建终结器`~myclass()`，因为这只会复制已经完成的 Semaphore 实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T12:04:15.220

如果一个类实现了 IDisposable，你真的应该正确地处理它。这不仅仅是依赖垃圾收集器，一次性类可能具有需要正确清理的打开句柄/COM 对象，您不能保证 GC 会处理。

理想情况下，您应该`myclass`实现 IDisposable 并在 dispose 方法中清理一次性对象。如果您确实无法确定何时释放您的实例，`myclass`那么您可以在析构函数中实现逻辑`myclass`以调用 dispose 方法。

```
public class myclass : IDisposable
   {
   private Semaphore _sync;

    myclass ()
    {
          _sync = new Semaphore(1,1);
    }

    doasync()
    {
           _sync.WaitOne();
           //do some stuff
           _sync.Release();
    }

    public void Dispose()
       Dispose(true);
       GC.SuppressFinalize(this);
    {

    protected void Dispose(bool isDisposing)
    {
       var sync=Interlocked.Exchange(ref _sync,null);
       if (sync !=null) sync.Dispose();
    }

    // This is for when you cannot determine when to dispose of your object
    void ~myclass() {
       Dispose(false);
    }
} 
```

# grails - 运行 grails 应用程序时出错

> ID：13452986
> 
> 赞同：1
> 
> 时间：2012-11-19T11:37:46.207
> 
> 标签：grails, grails-2.0

我在 1.3.7 中有一个 grails 应用程序，但在运行该应用程序时显示以下消息：

| '应用程序需要 grails 版本 [1.3.7]，但 GRAILS_HOME 是版本 [2.1.0] - 如果此 Grails 版本比您的应用程序预期的版本新，请使用正确的 Grails 版本或运行 'grails upgrade'。

如果我输入 ${GRAILS_HOME} 它指向 1.3.7，这意味着 grails home 已经指向 1.3.7 。

我还将 2.0.1 用于其他应用程序。

有什么建议么 ？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:50:44.050

我想是的，你有两个 grails 版本，但是一个或两个版本在系统路径中，并且你运行，正在运行与 GRAILS_HOME 不同的版本，你应该只有一个在路径和 GRAILS_HOME 中，并且应该有相同的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T11:48:59.807

您的 PATH 环境变量很可能会选择 grails 2.1.0。如果您使用的是 unix 类型`which grails`，请找出路径中的 grails 目录。

# android - 更改 TextView 文本

> ID：13452991
> 
> 赞同：23
> 
> 时间：2012-11-19T11:38:13.363
> 
> 标签：android, textview

我正在尝试`TextView`从代码中更改我的文本。

这就是我的 xml 的样子：

```
XML:
<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal" /> 
```

和代码：

```
TextView tv1 = (TextView)findViewById(R.id.textView1);
tv1.setText("Hello");
setContentView(tv1); 
```

我的设备出现错误，应用程序停止。我试图显示一个`TextView`（未连接到 XML `TextView`）并且它有效。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-19T11:40:41.803

你的方法不正确。我认为这将是空指针异常（下一次发布日志猫）

在查找视图之前，您需要先指定您正在使用的布局。

**爪哇：**

```
// Specify the layout you are using.
setContentView(R.layout.yourlayout);

// Load and use views afterwards
TextView tv1 = (TextView)findViewById(R.id.textView1);
tv1.setText("Hello"); 
```

**科特林：**

```
// Specify the layout you are using.
setContentView(R.layout.yourlayout)

// Load and use views afterwards
val tv1: TextView = findViewById(R.id.textView1)
tv1.text = "Hello" 
```

[点击这里](http://www.codeproject.com/Articles/395614/Basic-structure-of-an-Android-project)学习你想知道的

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T11:40:04.467

删除这个..`setContentView(tv1);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-27T10:17:27.110

我遇到了同样的问题。我的应用程序也停止了。实际上，我是在函数/方法之外编写代码。所以要解决这个问题，这些行

```
TextView tv1 = (TextView)findViewById(R.id.textView1);
tv1.setText("Hello"); 
```

必须在函数/方法中。（可以由用户定义）（我是 android studio 的新手，所以我不知道问题背后的原因，但我只知道如何解决这个问题。尽管这个问题已经 8 岁了，但也许这对新问题有帮助。）

# javascript - 为画布元素添加边框

> ID：13452995
> 
> 赞同：0
> 
> 时间：2012-11-19T11:38:28.670
> 
> 标签：javascript, html, canvas

我在画布上画了一些箭头（类似的箭头可以在生命周期中查看）。我想单独为所有这些箭头绘制边框，就像我们添加到 div 一样。我尝试使用描边样式和描边方法，但它填满了我的整个箭头。

我正在使用填充样式和填充来为我的箭头填充颜色。

有什么办法吗？是不是就像填充和描边方法永远不能一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:01:42.463

您必须在画布的上下文中使用 beginPath() 和 closePath()（此处为“ctx”），然后使用 fill() 来实际填充元素：

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

ctx.beginPath();
ctx.moveTo(170, 80);
ctx.lineTo(300,150);
ctx.lineTo(100,150);
ctx.lineTo(170, 80);
// Etc, Make your movements to draw the arrow, here.
ctx.closePath();

//Line settings and drawing
ctx.lineWidth = 5;
ctx.strokeStyle = 'blue';
ctx.stroke();

//Fill settings and drawing
ctx.fillStyle = '#8ED6FF';
ctx.fill(); 
```

# asp.net - 带有VB的ASP.net中Sql服务器的参数化更新查询

> ID：13452998
> 
> 赞同：1
> 
> 时间：2012-11-19T11:38:38.230
> 
> 标签：asp.net, vb.net

我正在尝试编写参数化更新查询以将值插入 Sql Server Express 数据库。我写的查询是：

```
Dim cmd As New SqlCommand
cmd.Connection = conn
cmd.CommandText = "update tblposts set title=@ptitle, pdate=@pd, 
                   content=@pcontent where pid=@p"
cmd.Parameters.AddWithValue("ptitle", txtTitle.Text)
cmd.Parameters.AddWithValue("pcontent", txtcontent.InnerText)
cmd.Parameters.AddWithValue("pd", DateTime.Now.ToString)
cmd.Parameters.AddWithValue("p", postid) 
```

在运行`cmd.ExecuteNonQuery`时，我将受影响的行数设为 1，但更改未反映在数据库中。

在使用 打印查询`Debug.Write`时，我得到的查询不是参数值，而是参数本身的名称（即@pcontent、@title 等）

这里有什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:53:53.760

你`AddWithValue`需要在参数前面包含**@符号，所以：**

```
cmd.Parameters.AddWithValue("@ptitle", txtTitle.Text)
cmd.Parameters.AddWithValue("@pcontent", txtcontent.InnerText)
cmd.Parameters.AddWithValue("@pd", DateTime.Now.ToString)
cmd.Parameters.AddWithValue("@p", postid) 
```

我猜它正在正确执行，但是 where 子句是空白的，所以可能会更新一个空白行。

无论如何，请尝试上述方法，它应该会按预期更新。

**编辑添加**

将`CommandText`始终只有`@value`在其中，它不会将参数值替换到字符串中。

您需要遍历`cmd.Parameters`集合以写出值。

# session - 在 Zend Framwork 2 中创建和管理缓存和会话

> ID：13452999
> 
> 赞同：1
> 
> 时间：2012-11-19T11:38:45.923
> 
> 标签：session, caching, config, zend-framework2

我刚开始使用 ZF2 ...我想初始化`cache`并`session`在配置文件中使用它，并且能够使用服务管理器在应用程序（每个地方）中使用它，或者......我已经在谷歌搜索了几个小时而没有锁定.. . 在文档中找不到任何有用的东西并且...

我在module.config.php（应用程序模块）中试过这个：

```
'service_manager' => array(
        'factories' => array(
            'cache' => '\Zend\Cache\StorageFactory',
        ),
    ),
    'cache' => array(
        'storage' => array(
            'adapter' => 'Filesystem',
            'options' => array(
                'cache_dir' => __DIR__ . '/../../../data/cache'
            ),
        ),
        'plugins' => array('WriteControl', 'IgnoreUserAbort'),
        'options' => array(
            'removeOnFailure' => true,
            'exitOnAbort' => true,
            'ttl' => 100
        ),
    ), 
```

我收到了这个错误：`While attempting to create cache(alias: cache) an invalid factory was registered for this instance type.` 那么有效的工厂是什么？所以任何人都可以在这里帮助我吗？坦克...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T21:27:32.360

使用闭包作为工厂，因为`Zend\Cache\StorageFactory`没有实现`Zend\ServiceManager\FactoryInterface`

```
'service_manager' => array(
    'factories' => array(
        'cache' => function () {
            return Zend\Cache\StorageFactory::factory(array(
                'storage' => array(
                    'adapter' => 'Filesystem',
                    'options' => array(
                        'cache_dir' => __DIR__ . '/../../../data/cache',
                        'ttl' => 100
                    ),
                ),
                'plugins' => array(
                    'IgnoreUserAbort' => array(
                        'exitOnAbort' => true
                    ),
                ),
            ));
        },
    ),
) 
```

顺便提一句。清理你的缓存配置，你从哪里得到插件`WriteControl`和选项`removeOnFailure`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T07:42:17.090

我从谷歌来到这个主题，错误名称相同，但原因肯定不同。错误可能是由找不到文件错误引起的。如果您收到此错误，请检查您的配置记录

```
'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ), 
```

并确保所需文件（在我的情况下为映射器）根据上层规则位于目录中。