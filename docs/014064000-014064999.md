# StackOverflow 问答 14064000-14064999

# c# - Mono + OS X：“找不到包‘cocoa-sharp’”

> ID：14064001
> 
> 赞同：0
> 
> 时间：2012-12-28T02:52:34.393
> 
> 标签：c#, macos, mono

我最近在 Mac OS X 上安装了 Mono 和 MonoDevelop，现在我正在尝试为 Mac 创建一个原生 C# 应用程序。我尝试按照[Mono 教程](http://www.mono-project.com/Guide:Running_Mono_Applications)创建这个可双击的“应用程序”，但被卡住了。当我尝试实现文档中概述的命令时，我的具体错误是“找不到包 'cocoa-sharp'”。

我搜索了 SO，发现其他人报告缺少“可可锐”包。3 年前的一个帖子中给出的[建议是重新安装 Mono。](https://stackoverflow.com/questions/1272507/where-is-cocoa-sharp-in-mono)当这不起作用时会发生什么？我可以去获取“cocoa-sharp.pc”或任何特定文件并手动将其放入特定目录吗？我什至走在正确的道路上吗？

我使用的命令：

```
gmcs test.cs -pkg:cocoa-sharp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T22:24:19.880

cocoa-sharp 已经过时并且教程已经过时，但幸运的是有一个很好的替代品：[MonoMac](https://github.com/mono/monomac/)。您可以从 MonoDevelop 中获取和编译它（前提是您已经安装了 XCode），并且在 samples/ 目录中有很多示例。甚至还集成了 XCode 界面设计器。

就在最近宣布了 MonoMac 的继任者，但它是一种商业产品：[Xamarin.Mac](http://xamarin.com/mac)。

# javascript - 根据其中一个顶点的位置调整 div 的大小

> ID：14064002
> 
> 赞同：0
> 
> 时间：2012-12-28T02:52:39.740
> 
> 标签：javascript, html, css

**问题的背景：**我正在使用 960px 网格，现在我的布局看起来像[这件小艺术品](https://docs.google.com/drawings/d/1esyQw6jz9FReHeh4ZjkuRLnE-YXcwYZ1CJ4OjKEBGHM/edit):) 但我希望它实际上看起来更像[这样](https://docs.google.com/drawings/d/1awzoL84k6IX37utxSrzrwDw9nflUYyB2qX48wqbzGM4/edit)，你可以看到侧边栏“视觉上”粘在窗口的左边框。

现在它实际上不必被卡住。**我所需要的只是通过将其背景**一直向左延伸来使它看起来像

放置这样一个背景，我想在网格外使用一个空的 div，看起来像[这样](https://docs.google.com/drawings/d/101MoAVXUIV_sxgapIcbl6aL_024EqyDEF8f0N6JWJdw/edit)：验证论文：

*   它的**（上，左）**角是**（0,0）**
*   它的**高度与****侧边栏**相同
***   它的**宽度是****(0,0)**到**(x,y)**的距离，其中 (x,y) 是侧边栏**的右上角****

 **注意：(x,y) 随着 Windows 浏览器大小的调整而移动，这让我很难解决这个问题。

我不知道我是否把我的问题说清楚了，但我希望有人知道该怎么做。如果您认为这种方法不是一个好选择，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:57:26.190

如果我认为你愿意它真的很容易

只做一个div

这是CSS

```
#divname{
    posision:fixed;
    top:25%;
    left:0;
    z-index:-1;
    width:100%;/* make sure the body is 100% to*/
} 
```

高度只是你在侧边栏中使用的 100%**

# .htaccess - 向 URL 添加斜杠时获取 301 而不是 404

> ID：14064008
> 
> 赞同：2
> 
> 时间：2012-12-28T02:53:20.147
> 
> 标签：.htaccess, mod-rewrite, http-status-code-404, trailing-slash

我已经在这方面工作了几个小时，但找不到有关它的信息。嗯，是的，有信息，但我只能找到单独的解决方案，这些解决方案放在一起是行不通的。

我试图从这个开始：

```
RewriteCond %{REQUEST_URI} \.(php)$
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://www.example.com/$1/ [L,R=301] 
```

代码有效，我得到了斜杠。但是，如果我输入一个不存在的文件名，它会返回 301。例如：

```
http://www.example.com/thisfiledoesnotexist.php 
```

第一个标头响应是 301，这是合乎逻辑的，因为它试图返回：

```
http://www.example.com/thisfiledoesnotexist.php/ 
```

然后它返回 404，但是这样需要两次请求才能返回 404。

我想很多人以前都发现过这个问题，我相信这是一个普遍的问题，但我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:21:17.620

尝试使用`-f`支票。它检查请求是否针对现有文件：

```
RewriteCond %{REQUEST_FILENAME} -f
RewriteCond %{REQUEST_URI} \.(php)$
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://www.example.com/$1/ [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:17:01.277

终于我得到了解决方案！！！这并不简单，我真的不明白它是如何工作的。我尝试了 Adam Dimech 的代码，可以在[此页面](http://code.adonline.id.au/hide-file-extensions-add-trailing-slash/)中找到。

代码是：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/]+)/$ $1.php

RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.]+\.php(\?[^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://www.example.com/yourdirectory/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ http://www.example.com/yourdirectory/$1/ [R=301,L] 
```

此代码必须放在我们将使用的每个目录中。如果您使用相对路径，则必须使用

代码工作得很好。现在我可以取消 php 扩展名并强制使用斜杠。希望对更多人有用！

# c++ - 在 C++ 中解析浏览器请求标头

> ID：14064009
> 
> 赞同：-1
> 
> 时间：2012-12-28T02:53:23.657
> 
> 标签：c++, string, parsing, webserver

我用 C++ 制作了一个简单的网络服务器，我需要解析请求标头。我是怎么做到的？

这是我的标题...

```
GET /test?username=2 HTTP/1.1
Host: stream.mysite.com:7777
Connection: keep-alive
Cache-Control: max-age=0
User-Agent: Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: auth=asdfasdfaasdfasd 
```

我需要获取页面 (/test?username=2) 和 cookie 变量 auth (asdfasdfaasdfasd) 的内容。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T03:06:13.937

一个让您入门的简单示例：

```
#include <iostream>
#include <string>
#include <sstream>
int main() {
  std::string tk1, tk2, line = "GET /test?username=2 HTTP/1.1";
  std::stringstream ss(line);
  ss >> tk1;
  ss >> tk2;
  if (tk1 == "GET") {
    std::cout << "requested path: " << tk2 << std::endl;
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T03:03:33.137

这里定义了一个 Http 请求：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)

基本上你需要知道的：

```
GET <URL> <HTTP-Version><CRLF>
<Set of Headers each line terminated with <CRLF>>
<Empty Line with just <CRLF>> 
```

您想要的位将始终是 GET 之后的 <URL> 您将需要在标题中搜索字符串“Cookie：”

# gruntjs - 无法加载 grunt-contrib 模块

> ID：14064013
> 
> 赞同：0
> 
> 时间：2012-12-28T02:53:58.807
> 
> 标签：gruntjs, yeoman

我将 yeoman 用于我的开发工作流程。我已经在我的项目文件夹中安装了 grunt-contrib，并在我的 gruntfile.js 中添加了 loadnpm 任务

但是，当我启动我的 yeoman 服务器时，它一直给我找不到本地 npm 模块 grunt-contrib 的错误。

我什至尝试提供模块的绝对路径，但无济于事。下面是绝对路径，有什么问题吗？

```
grunt.loadNpmTasks('/home/murtaza/workspace/yeoman/angular/node_modules/grunt-contrib'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:34:31.980

没有完整的 grunt 文件，很难完全回答。但在我看来，可能的原因有以下三种：

1) loadNpmTasks 应该有'grunt-contrib'：

```
loadNpmTasks('grunt-contrib'); 
```

2）您需要将 grunt-contrib 添加到 package.json

3) 您需要从项目根目录运行“npm install”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T07:24:53.123

能够使用另一个插件 grunt-jade 运行它。下面的博客让我走了 - [http://www.thedjpetersen.com/blog/supercharging_yeoman/](http://www.thedjpetersen.com/blog/supercharging_yeoman/)

# windows-8 - 是否有适用于 Windows 8 进度对话框 API 的 API？

> ID：14064017
> 
> 赞同：3
> 
> 时间：2012-12-28T02:54:33.223
> 
> 标签：windows-8, progress

是否有用于新的 Windows 8 进度对话框的 API？

在这里，我们在其自然栖息地看到了一个 Windows 8 进度对话框；提取`.zip`文件：

![在此处输入图像描述](../Images/5a37d3d1b814f934d24415917fedf0d4.png)

**注意**：我使用术语*“进度对话框”*来指代指示*进度的**对话框*。不要与具有受支持[api的 Windows Shell](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775248(v=vs.85).aspx) *"Progress Dialog"*混淆。**[`IProgressDialog`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775248(v=vs.85).aspx)**

 **我快速浏览了[**MSDN Windows 8 技术**](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920512.aspx)列表，发现没有任何东西看起来与我正在研究的感兴趣的领域相关。（即仅仅因为我说过，并不能使它成为真的。[没有理由结束这个问题](https://superuser.com/questions/524439/how-safe-is-my-windows-8-microsoft-account)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:50:54.763

[正如这里](https://stackoverflow.com/questions/9978078/windows-8-fancy-progress-bars-via-c)提到的，目前还没有官方可用的。
但是，您可能会在 Internet 上找到一些自定义开发的。**

# php - 在 PHP 中响应之前搜索 CSV 文件

> ID：14064018
> 
> 赞同：1
> 
> 时间：2012-12-28T02:54:35.423
> 
> 标签：php, ajax, csv

我正在尝试通过 php 通过读取 CSV 文件来制作促销代码验证器。这是我的验证器的代码，而“test.csv”是我的 csv 文件：

```
<?php
// if data are received via POST, with index of 'test'
if (isset($_POST['test'])) {
    $file  = fopen('test.csv', 'r');
    $coupon = array($_POST['test']); 
    $coupondef = $_POST['test'];             // get data
    $coupon = array_map('preg_quote', $coupon);
    $regex = '/'.implode('|', $coupon).'/i';
    while (($line = fgetcsv($file)) !== FALSE) {  
    list($promocode, $amount) = $line;

    if(preg_match($regex, $promocode)) {
        echo "Coupon: '<i>".$coupondef."</i> is valid, with ".$amount."% of discount";
        $promocodevalid = 1;
        break;
    } else {
        echo "Coupon: '<i>".$coupondef."</i> is invalid.";
        $promocodevalid = 0;}
}
}
?> 
```

这是我的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ro">
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2" />
<title>Example Ajax POST</title>

<script type="text/javascript"><!--
function get_XmlHttp() {
  var xmlHttp = null;

  if(window.XMLHttpRequest) {
    xmlHttp = new XMLHttpRequest();
  }
  else if(window.ActiveXObject) {   
    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
  }

  return xmlHttp;
}

function ajaxrequest(php_file, tagID) {
  var request =  get_XmlHttp();

  var  the_data = 'test='+document.getElementById('txt2').value;

  request.open("POST", php_file, true);

  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  request.send(the_data);
  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      document.getElementById(tagID).innerHTML = request.responseText;
    }
  }
}
--></script>
</head>
<body>

<h3 style="cursor:pointer;" onclick="ajaxrequest('couponcheck.php', 'context')"><u>Click</u></h3>
<input type="text" id="txt2" value=""></div>
<div id="context">Here will be displayed the response from the php script.</div>

</body>
</html> 
```

CSV 文件每行有 2 列 - 第一个是优惠券代码，第二个是折扣金额。如果此处理器成功搜索输入的代码，它将返回折扣金额和一行字回原始文件（带有 javascript ajax 发送方/接收方的 html）。如果找不到代码，它将向页面发送无效消息。

问题是，由于我的 csv 文件中有超过 100 行，100 行无效消息将发布到我的接收者页面。（或在成功找到代码之前的行数）我想如何让它在发回响应之前搜索 csv？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:59:32.657

如果该行无效，您想要做的不是回显。如果有效就回显，如果没有有效的 ($promocodevalid = false;) 那么你可以回显错误。干得好：

```
<?php
    // if data are received via POST, with index of 'test'
    if (isset($_POST['test'])) {
        $promocodevalid = false;
        $file  = fopen('test.csv', 'r');
        $coupon = array($_POST['test']); 
        $coupondef = $_POST['test'];             // get data
        $coupon = array_map('preg_quote', $coupon);
        $regex = '/'.implode('|', $coupon).'/i';
        while (($line = fgetcsv($file)) !== FALSE) {  
           list($promocode, $amount) = $line;

           if(preg_match($regex, $promocode)) {
               echo "Coupon: '<i>".$coupondef."</i> is valid, with ".$amount."% of discount";
               $promocodevalid = true;
               break;
           }
        }
       if(!$promocodevalid) {
           echo "Coupon: '<i>".$coupondef."</i> is invalid.";
       }
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:03:51.573

由于您使用 Ajax 调用此 php 脚本，因此您应该在匹配后立即返回：

```
<?php
// if data are received via POST, with index of 'test'
if (isset($_POST['test'])) {
    $file  = fopen('test.csv', 'r');
    $coupon = array($_POST['test']); 
    $coupondef = $_POST['test'];             // get data
    $coupon = array_map('preg_quote', $coupon);
    $regex = '/'.implode('|', $coupon).'/i';
    while (($line = fgetcsv($file)) !== FALSE) {  
    list($promocode, $amount) = $line;

    if(preg_match($regex, $promocode)) {
        echo "Coupon: '<i>".$coupondef."</i> is valid, with ".$amount."% of discount";
        exit; // match made, stop the php file now
    } 
}
// if you get here you know there was no match
 echo "Coupon: '<i>".$coupondef."</i> is invalid.";
?> 
```

否则，如果您在循环中达到终端条件，您就知道没有匹配项（因为脚本没有被杀死），所以请等到那时输出“无效”消息。

# java - 应用部署后无法访问服务器

> ID：14064021
> 
> 赞同：-2
> 
> 时间：2012-12-28T02:55:14.533
> 
> 标签：java, tomcat, networking, vpn

起初，我在 JBoss 上运行的应用服务器中部署了一个 Java 应用程序。当我尝试点击应用程序 URL 时，该应用程序将无法访问，并且在 ping 时，服务器也没有回复。但有时，应用程序会运行（服务器也可以访问）。然后我迁移到Tomcat，同样的问题。后来我更改了服务器（物理机），但同样的问题仍然存在。偶尔网络中断的原因可能是什么？是应用程序本身，还是 VPN 网络？（我通过 VPN 访问这些服务器）。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:22:18.650

不确定您的网络配置，但请尝试以下操作：

1.  服务器上的防火墙设置。
2.  端口暴露（80 或 8080）。
3.  如果您认为这是 vpn 或网络问题，请让坐在该网络中的人访问您的应用程序。
4.  以调试模式启动服务器。
5.  如果您的服务器或应用程序正在报告某些错误，请查看日志。

这些将是我的第一步。

谢谢，
普拉泰克

# graphite - Graphite URL API 降低大时间间隔的分辨率

> ID：14064026
> 
> 赞同：5
> 
> 时间：2012-12-28T02:56:23.253
> 
> 标签：graphite

我有以下问题。如果我向石墨要一张从 2 年前到今天的图表，每秒都有数据，如下所示：

```
http://graphite/render?target=averageSeries(server.web1.load)&from=-2years 
```

它显示正确且非常快。显然，并非过去 2 年的所有分数都已呈现。但是，如果我要求石墨提供 csv 输出以使用其他绘图库自己渲染点：

```
http://graphite/render?target=averageSeries(server.web*.load)&from=-2years&format=csv 
```

我得到了整套积分（2 年 * 365 天 * 24 小时 * 60 分钟 * 60 秒的积分）。有没有办法制造石墨来减少这个数字？例如，要求最多 N 个点对大小为 WHOLE / N 的组进行平均或类似的事情。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T04:34:55.767

功能[总结](http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.summarize)是你需要的。由于图表上的数据点多于可用像素，因此汇总可以使用您选择的方法（平均、最大值、最小值或最后）聚合点。尽管您需要根据数据点的数量和总持续时间来计算适当的间隔。

# syntax-error - pyglet.gl 语法错误

> ID：14064037
> 
> 赞同：1
> 
> 时间：2012-12-28T02:57:48.560
> 
> 标签：syntax-error, pyglet, python-3.3

我刚刚开始尝试使用 pyglet (1.2alpha1) 的 alpha 版本并创建一个窗口，即

```
win = pyglet.window.Window() 
```

在第 133 行的 pyglet.window 中导致语法错误，即：

```
from pyglet.gl import gl_info 
```

老实说......我不知道这里发生了什么，因为 from x import y 是有效的语法，我对 pyglet 完全陌生，并且只有非常非常基本的 openGL 知识

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T23:59:11.920

好的，我找到了答案，事实证明，大量的 python 2.x 代码已经通过了，比如

```
print 'string' 
```

以及定义不明确的导入，例如

```
from base import (loads of modules here) 
```

它应该在哪里

```
from pyglet.gl.base import (aforementioned modules) 
```

有很多这些问题，因此我现在已经放弃了（由于一些数字后跟一个 L（我没有使用 python 2.x 的经验，所以我不知道 3.x 等价物是什么） ))

# paypal - 贝宝自适应付款呼叫者

> ID：14064038
> 
> 赞同：0
> 
> 时间：2012-12-28T02:57:53.727
> 
> 标签：paypal, paypal-adaptive-payments

正如pdf（自适应付款）中所写的那样：

如果您允许 PayPal 的第三方代表您执行应用程序，则第三方将成为 API 调用方，因为该方现在正在调用 Adaptive Payments API。第三方还必须获得 PayPal 的许可才能使用高级服务。例如，如果应用程序支持链式支付，则您和第三方都必须具有使用该服务的权限。

当第三方代表我执行申请时？如果我拥有我的 API 密钥，我认为我始终是 API 调用者。Paypal 是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:10:48.860

您需要将其视为三个（或更多）独立方：付款方、接收方和应用程序本身。

在许多情况下，您确实是 API 调用者，因为您将代表自己付款。但是，如果其他用户授予您的应用程序使用其 PayPal 帐户的权限，他们还需要您的应用程序需要在他们自己的帐户上获得批准的任何权限。

如果我们暂时离开自适应支付，我可以给你一个更好的例子。

PayPal Payments Pro 有月费、额外的账户审查和需要进行的批准才能使用它。如果您的 PayPal 帐户上有可用的 Payments Pro，则可以使用您的 API 凭据以这种方式进行付款，而不会出现任何问题。但是，如果其他人正在使用您的应用程序并且您正在使用您的 API 凭据代表他们处理付款，他们还需要在自己的帐户上启用 Payments Pro，否则调用将失败。

自适应支付也是如此。它具有帐户执行各种任务所需的许多特殊权限，即使您已获得批准，但这并不意味着您的用户拥有，因此您必须注意这一点。

希望这是有道理的。

# javascript - 这是普通函数，构造函数还是两者都不是？

> ID：14064044
> 
> 赞同：3
> 
> 时间：2012-12-28T02:58:15.003
> 
> 标签：javascript, class, object, constructor, jsdoc

我曾经喜欢使用 js。现在我只是沮丧。我正在尝试对我老板购买的大量代码进行 jsDoc 处理。作者没有提供 API，所以我将使用 jsDoc 创建一个。

不幸的是，代码并不清楚，它在一个 js 文件中包含大约 10k 行代码。我过去使用过对象文字，这不是对象文字。参数和函数不使用逗号分隔。此外，从不使用原型，但使用新运算符。我看过几本书，命名空间似乎是最接近的“风格”。这是程序的一般流程。我的问题遵循示例。

```
(function () {
var global = (function () {return this; } ).call();
global.X = {};
})();

X.init = function(){
    X.MyObjectA = new X.FooA();
    X.MyObjectB = new X.FooB();
}

X.FooA = function() {
   var storeStuff;
   do stuff
   .
   .
   function bar(){
        var storeSomething;
        do something
        do somthing else
        .
        .
        moreFunctions(){}
        var moreVars;
        .
        .

    }

    this.anOccasionalFunctionLiteral = function(){}
        .
        .
}

X.FooB = function(){
    Similar contents of FooB()
 }
 .
 .
 .
 Continues forever... 
```

所以我的问题是：

1.  这是什么*风格*！？当我说风格时，我想我的意思是什么是 FooA 和 FooB？他们是对象吗？上课？

2.  如果嵌套函数**不是 X.FooA 或 X.FooB 的成员，**我应该给它们什么标题。我被告知嵌套函数，包括 bar()，不是*对象*FooA 和 FooB 的方法。

3.  如果嵌套在*对象*内部的函数实际上不是其周围对象的方法，是否可以从任何地方调用它？还是正常范围规则适用？

为了让生活变得更加可读和快乐，我一直将类似于 FooA 和 FooB 的*对象*分类为构造函数，并将构造函数内的任何方法（例如 bar()）分类为 FooA 和 FooB 的方法。这可能不正确，但至少它是有组织的。有什么建议么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:11:22.280

FooA 和 FooB 是构造函数。

嵌套函数是“私有”函数。

FooA 内部的 bar 函数只能在 FooA 内部调用。

见 [http://javascript.crockford.com/private.html](http://javascript.crockford.com/private.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:11:21.640

1）我认为你的命名空间预感是正确的。第一个自执行匿名函数获取全局命名空间。他们可能没有做一些简单的事情，比如：

```
window.X = {}; 
```

因为这在“窗口”不是全局对象的环境中不起作用。（就像服务器上的nodejs）

2）我不会调用这些方法。就个人而言，我认为这取决于这些功能的实际功能是什么。它们可以充当对象的更多名称空间或构造函数。如果它们是大写的，作者可能更多地将它们视为命名空间或类，而不是方法。

3) bar() 函数只能从 X.FooA 调用，但是要注意，它可以在 X.FooA实际声明**之前调用**

```
X.FooA = function() {
  bar(); // this will work
  function bar() {
    alert('this will work');
  }
} 
```

这是因为在评估代码时，函数声明将被提升到周围函数的顶部。但是， bar 函数在 X.FooA 之外将不可用。

我不认为我会将 bar 归类为一种方法。也许作为“私人功能”或“私人方法”会更合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T03:11:34.533

看起来 FooA 和 FooB 是包含在“X”对象中的类。定义类中的匿名函数本质上是私有方法，而命名函数是包含类的公共方法。

```
var x = {
 classA:function(){
  do class constructor stuff...
  function myPrivateMethod(){do stuff...}
  this.myPublicMethod = function(){do stuff...}
 },
 classB:{another class contained in the object}
} 
```

# android - SherlockActivity 与 GridView 和 onItemClick

> ID：14064045
> 
> 赞同：1
> 
> 时间：2012-12-28T02:58:34.487
> 
> 标签：android, actionbarsherlock

我已经调整了我的应用程序以使用 SherlockActivity，但是因为我已经这样做了，所以我无法在我的网格视图上触发任何点击。下面是xml：

```
<?xml version="1.0" encoding="utf-8"?>

    <RelativeLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:background="@android:color/white">

        <GridView
            android:id="@+id/dashboard_grid"
            style="@style/dashboard"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:listSelector="@android:color/transparent"
            android:stretchMode="columnWidth"
            android:verticalSpacing="20.0dip" />

    </RelativeLayout> 
```

我的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);

    final ImageAdapter imageAdpt = new ImageAdapter(this);

    GridView gridview = (GridView) findViewById(R.id.dashboard_grid);
    gridview.setAdapter(imageAdpt);

    gridview.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(MainActivity.this, "" + position, Toast.LENGTH_SHORT).show();
            Class<?> c = imageAdpt.getImageClass(position);
            if(c != null){
                Intent intent = new Intent(MainActivity.this, c);
                startActivity(intent);
            }
        }
    });
} 
```

它与焦点有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:26:15.593

嗨，毕竟我是在给以前剩下的菜单充气！

```
 public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.mainmenu, menu);
} 
```

我将其替换为：

```
public boolean onCreateOptionsMenu(Menu menu) {

   menu.add("Search")
       .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
   return true;
} 
```

# ruby-on-rails - 更改模型状态的控制器操作的最佳实践

> ID：14064054
> 
> 赞同：0
> 
> 时间：2012-12-28T03:00:43.730
> 
> 标签：ruby-on-rails, model-view-controller, controller-actions

我有一个控制器，它对一个名为“问题”的资源具有正常的 CRUD 操作。问题表有一个名为已发布的布尔值，用于保存每个实例的状态。当一个问题将发布的布尔值设置为 true 时，问题的所有其他实例都应设置为 false。

我的问题是关于issues_controller.rb。现在，我没有将已发布的布尔值列为 attr_accessible。我的想法是我的视图中有一个按钮可以路由到特定的操作：

```
def publish
  // before_filter to set all the issues' publish column to false
  // update_attribute to set publish column to true
end

def surpress
  // update_attribute to set this issues publish column to false
end 
```

在进行了一些研究并重新考虑了我的方法之后，我认为创建某种新的控制器可能会更好——published_issues_controller.rb 使用更多资源丰富的路由：

```
def create
  // same as the publish method above
end

def destroy
  // same as surpress method above
end 
```

这是我的第一个 Rails 应用程序 - 任何关于这些方法（或完全不同的方法）是否最好的任何见解都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:32:20.947

> 当一个问题将发布的布尔值设置为真时，问题的所有其他实例都应设置为假

这对我来说似乎是一个奇怪的业务需求？

无论如何，我会使用您记录的控制器操作，但不会使用 before 过滤器

```
# routes
resources :issues do
  member do
    post 'publish' # might want put instead of post?
    post 'surpress' 
  end
end 
```

控制器

```
def publish
  issue = Issue.find(params[:id])
  Issue.transaction do
    issue.publish!
  end
  # ... redirect, etc...
end 
```

模型

```
def publish!
  published = true
  # set 'All' other issues [published = false]
  # maybe it is only ones that are somehow related to this one? same project?
  save!
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:05:36.307

是的，在你的 CRUD 中包含 REST（实际上非​​常相似），你就在那里。

`resources :issues`使用 REST ，您只需`config/routes.rb`

然后是一些标准动作。

rails 指南甚至将它们列在 CRUD 下：

[http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

所以，是的，创造和毁灭更好。

如果您只是实现它们，最佳实践是使用`:only =>`或`:except =>`限制它们的路由。

# javascript - niceScroll 在页面加载时不起作用

> ID：14064055
> 
> 赞同：0
> 
> 时间：2012-12-28T03:00:55.920
> 
> 标签：javascript, jquery, scrollbar

我正在为我的内容使用[niceScroll jQuery 插件](http://areaaperta.com/nicescroll/)。我的内容 ID #node-10，这里是 CSS：

```
#node-10{
    height: 200px;
    width: 370px;
}
#node-10 p{
    padding-top:0;
    margin-top:-3px;
    padding-left:0;
    padding-bottom:0;
} 
```

和 JS：

```
var nice = $("html").niceScroll({cursorborder:"",autohidemode:"false",cursorcolor:"##0076A3"});  // The document page (body)

  $("#div1").html($("#div1").html()+' '+nice.version);

    $("#node-10").niceScroll({cursorborder:"",autohidemode:false,cursorcolor:"red",boxzoom:true}); // First scrollable DIV 
```

并刷新我的网站。滚动在页面加载时不可见，但是当点击我的内容时，获取滚动条。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T12:04:27.540

目前尚不清楚您是否遇到同样的问题。

检查主页的颜色光标设置，您用两个井号字符“##”错误地写入。

尝试正确使用 cursorcolor:"#0076A3"

```
$("#node-10").niceScroll({cursorborder:"",autohidemode:false,cursorcolor:"red",boxzoom:true}); 
```

您可以在这里找到一个工作示例：http: [//jsfiddle.net/29W4m/](http://jsfiddle.net/29W4m/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T12:06:13.943

设置溢出：自动；首先为 div

# android - 当操作栏狭窄时，如何通知我的自定义 ActionView/ActionProvider？

> ID：14064056
> 
> 赞同：0
> 
> 时间：2012-12-28T03:00:57.017
> 
> 标签：android, android-actionbar, shareactionprovider

我已经实现了一个**自定义`ActionProvider`**，与`ShareActionProvider`. 然而，它有点宽，因为我包含了一个文本标签，该标签不存在于`ShareActionProvider`.

我注意到常规操作项（带有`SHOW_AS_ACTION_IF_ROOM`和`SHOW_AS_ACTION_WITH_TEXT`）在纵向配置中仅显示为**图标**，在我的 Galaxy Nexus 手机的操作栏中显示为带有横向配置标签的图标。我认为在不同的配置上，这种情况可能会有所不同。**我自定义添加标签的意图是相同的。**

*`ActionProvider`如果我的，更具体地说是我的等价物`ActivityChooserView`应该**显示标签**，我如何签入代码？*有什么面向未来的方法可以获取这些可能主要存在的知识`ActionMenuPresenter`？我可以采取任何安全的快捷方式，例如检查纵向或横向吗？还是可以以某种方式通知它？

* * *

作为一个*额外的问题*，`SHOW_AS_ACTION_IF_ROOM`似乎基于行动项目的数量，而不是它们的宽度。由于任何`ActionProvider`视图已经很宽，它没有为标题留下空间，而其他操作项（带有`SHOW_AS_ACTION_IF_ROOM`）没有移动到溢出菜单。即使在某些设备上，我的自定义`ActionProvider`也会略大于宽度的 50%，但我认为这是`ActionMenuPresenter`? 我怎样才能更好地控制这个（在高水平上），但仍然是动态的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:09:56.143

嗯，似乎我可以`mAllowTextWithIcon`在`ActionMenuItemView`（https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/view/menu/ActionMenuItemView.java）中使用并复制AOSP的配置它的资源结构。

# performance - 查找 Max/Min 连续 XOR 值

> ID：14064062
> 
> 赞同：4
> 
> 时间：2012-12-28T03:01:52.067
> 
> 标签：performance, algorithm, data-structures

我有以下问题：给定一个整数数组（最大大小为 50000），我必须找到最大 X 使得，

```
X = a[p] ^ a[p+1] ^ ... ... ^ a[q] for some p,q (p<=q) 
```

我还必须找到 X 的最小值。

我试过这个过程，

```
sum[i] = a[0] ^ a[1] ^ ... ... ^ a[i] for some i . 
```

我在 O(n) 中预先计算了它，并且

那么一些 X 的值`p,q(p<=q)`是 ,

```
X = sum[q] ^ sum[p-1]

MaxAns = Max of X for every pair of p,q (p<=q)

MinAns = Min of X for every pair of p,q (p<=q) 
```

但是这个过程是O(n^2)。

如果没有 O(n^2) 算法，我怎么能做到这一点，效率更高？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T08:07:01.597

该算法仅适用于位宽有限的无符号整数。

1.  **计算**每个数组元素的前缀总和（正如在 OP 中所做的那样）。
2.  **将每个前缀和添加到基数树**（最高有效位对应于根，最低有效位对应于叶子）。
3.  在计算`sum[q]`并将其添加到基数树之间，在部分构建的基数树中**搜索** `sum[q]`（以获得 X 的最小值）。对于 X 的最大值，搜索`~sum[q]`。
4.  如果树中缺少`sum[q]`（或）的任何位，请在 X 的最小/最大值中**切换该位并继续向下搜索树。**`~sum[q]`
***   **获取**为每个前缀找到的所有最小/最大值的最小值/最大值。**

 **时间复杂度为 O(N log M)，其中 M 是数组元素的最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:49:53.513

**这是完全错误的——不知道为什么，但一些测试似乎表明它是错误的。**

我认为您可以从“Programming Pearls”的第 8 列中获得一些灵感，其中问题基本上是：“给定实数向量 x[n]，计算在任何连续子向量中找到的最大和”。

我认为您可以重用不同的算法，通过异或替换加法和减法（在此过程中保留了大多数有趣的属性：0 仍然是中性元素，异或是它自己的逆，可交换性）。

你可以找到幻灯片：[http](http://cs.bell-labs.com/cm/cs/pearls/s08.pdf) ://cs.bell-labs.com/cm/cs/pearls/s08.pdf但我绝对推荐这本书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T09:28:24.110

**算法 ：**

初始化：

```
ans=a[0]
cur=a[0] 
```

循环遍历数组的每个元素：

```
(a) cur = max(a[i], cur^a[i])
(b) ans = max(cur, ans)
return ans 
```

示例：设数组为 1 2 3 5 8 10

```
ans=cur=1

for i=1:

cur = max(2,3) = 3

ans = max(1,3) = 3

for i=2:

cur = max(3,0) = 3

ans = max(3,3) = 3

for i=3:

cur = max(5,6) = 6

ans = max(6,3) = 6

for i=4:

cur = max(8,14) = 14

ans = max(6,14) = 14

for i=5:

cur = max(10,4) = 10

anx = max(14,10) = 14 
```

所以，ans = 14

**这是我在 C++ 中的实现**

```
int maxXOR(int a[], int n)
{
    int ans = a[0],cur=a[0];
    for(int i=1;i<n;i++)
    {
        cur=std::max(a[i],cur^a[i]);
        ans=std::max(ans,cur);
    }
    return ans;
} 
```

**分析 ：**

```
Time Complexity : O(n)
Space Complexity : O(1) 
```**

# android - 在Android中单击前放大按钮

> ID：14064064
> 
> 赞同：1
> 
> 时间：2012-12-28T03:02:01.507
> 
> 标签：android, button

我是 android 的初学者，我的自定义按钮有问题。

我正在尝试做一些特殊的效果，比如这个[花哨的按钮](http://www.buildinternet.com/live/elasticthumbs/)。

我应该在这个函数中使用哪种方法？

我尝试过手势、onTouch、onScroll、Selector 来创建自定义按钮，并在互联网上进行了大量研究，但仍然无法使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:35:44.440

我通常做的是设置一个 onTouchListener。

然后在 ACTION_DOWN 上，我做一些动画

在 ACTION_UP / ACTION_CANCEL 上，我会做出适当的反应。

在这种情况下， ACTION_DOWN 会导致放大，而其他 2 个 ACTION 会导致按钮变小！

[http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

最常见的用途；

```
Button bt....;
bt.setOnTouchListener(new OnTouchListener(){
public boolean onTouch(View v, MotionEvent event){
if(event.getAction() == MotionEvent.ACTION_DOWN) {do stuff...}
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T03:11:51.193

检查：http: [//developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

onLongClick() 来自 View.OnLongClickListener。当用户触摸并按住项目（处于触摸模式时）或使用导航键或轨迹球关注项目并按住合适的“输入”键或按住轨迹球时调用此方法（一秒钟）。

# c# - BringToFront() 方法会触发哪些事件？

> ID：14064067
> 
> 赞同：2
> 
> 时间：2012-12-28T03:02:14.153
> 
> 标签：c#, .net, winforms, event-handling

我有两个表单，Form1 和 Form2，每当我在 Form1 中调用 Form2.BringToFront() 时，我都想在 Form2 中做一些事情。

```
class Form1 : Form
{
    button1_MouseClick()
    {
        Form2.BringToFront();
        // trigger an event an do something in Form2 
    }
}

class Form2 : Form
{
    UnknownEvent_EventHandler()
    {
        //do something
    }
} 
```

但是有关 BringToFrontMethod 的文档并没有说明该方法触发了哪些事件。

*请注意，我不想在 Form2 上创建公共方法并调用它。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T03:11:23.217

好吧，它不会直接触发我所知道的，但由于其 Activation(focus) 被更改，Form.Activated 事件将触发。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated%28v=vs.80%29.aspx)找到代码文档。这是一个小示例代码：

```
private void Form1_Activated(object sender, System.EventArgs e)
{
   //What do you want to happen?
} 
```

如果这对您有帮助，请务必将其标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:31:32.673

```
 Form2 form2 = new Form2();
        private void button1_Click(object sender, EventArgs e)
        {
            form2.Show();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Application.OpenForms["Form2"].BringToFront();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-30T16:53:34.903

它已经是一个较老的问题，但是当我也遇到它时..

只需在表单/控件中添加一个将自身置于前面并从外部调用此方法的方法：

```
class Form1 : Form
{
    button1_MouseClick()
    {
        instanceOfForm2.ShowInFront();
    }
}

class Form2 : Form
{

    public void ShowInFront()
    {
        this.BringToFront();
        //Do whaterver you want after brought to front
    }
} 
```

# vba - 如何将 VBA 代码重写为 VBScript 代码（工具/规则）

> ID：14064069
> 
> 赞同：6
> 
> 时间：2012-12-28T03:02:29.067
> 
> 标签：vba, vbscript

我无法在使用该`search`功能的网站上找到此信息。我在[这篇文章中看到了类似](https://stackoverflow.com/questions/388819/is-it-possible-to-convert-vba-to-c)[的文章](https://stackoverflow.com/questions/896867/tool-to-convert-java-to-c-sharp-code)On C# into Java and VBA into C#

我提出这个问题是因为我认为如果不是全部的话，它至少是部分可以实现的，这对于其他人进行转换将是一个有用的指南。在网上找到的示例问题：[here](http://www.vbscriptexperts.com/general/Q_26775836-convert-outlook-vba-to-vbs.jsp)

**经过一些处理（代码更改）后，可以将所有[VBA](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)转换为[VBS吗？](http://en.wikipedia.org/wiki/VBScript)**

如果不是，什么类型的VBA程序不能转换？

如果是，是否有 vba 程序或任何工具可以自动执行此操作？如果没有，有人可以提供从 VBA 到 VBS 的转换规则的完整列表吗？（如果可能，我想编写一个 VBA 程序来自动执行此过程）

我只知道以下几点`Rules` （如果我错了请纠正我）

*   删除声明语句的类型

VBA: `Dim a as string`
VBS:`Dim a`

*   VBS 没有[枚举列表](http://www.datapigtechnologies.com/downloads/Excel_Enumerations.txt)（命名常量）

VBA：`Xlup`
VBS：-4162

*   您不能`redim someArray( A to B)`在 VBS 中使用语法（VBS 总是从 0 索引开始）

VBA: `Redim someArray( 1 to 10)`
VBS:`redim someArray(10)`

*   您不能在 VBS 的 for 循环中指定迭代器

VBA：

```
For i = 1 to 10 
    'do something
next i 
```

VBS：

```
For i = 1 to 10 
    'do something
next 
```

在 VBS 中总是需要完全合格的范围（只是一个演示。）

VBA： `range("A1") = "Testing"`

VBS： `ExcelObj.Workbooks(1).Worksheets(1).Range("A1") = "Testing"`

*   VBS 不能使用 VBA 集合类型（或者我没有使用正确的 CreateObject？）

PS我**知道**这个[列表](http://msdn.microsoft.com/en-us/library/30593abb%28v=VS.85%29.aspx)和[这个列表](http://www.taltech.com/support/entry/introduction_to_vba_and_vbscript)

我会很感激任何帮助，提前感谢，很抱歉这个长问题._。

编辑：我自己正在编写脚本，完成后会更新

# mysql - MySQL 子查询返回多行和内连接

> ID：14064073
> 
> 赞同：1
> 
> 时间：2012-12-28T03:03:30.440
> 
> 标签：mysql, subquery, inner-join

我有以下查询：

```
select user_name as rt, 
      (select source_user_name from tweets t where t.rt_user_name = u.user_name)
from topUserData u 
```

现在 MySQL 给我一个错误，说子查询返回不止一行。但是，我在这里想要的是这种一对多的关系。例如，如果 user_name 是 james 并且返回子查询（Linda、Bob、Suzanna、Sandy、Tom），那么我希望数据显示为：

詹姆斯琳达

詹姆斯鲍勃

詹姆斯·苏珊娜

詹姆斯桑迪

詹姆斯汤姆

我如何从我拥有的东西中获得这个功能？我也看到这类似于内部连接，但我想要子查询的答案。感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:06:21.443

我认为你需要`INNER JOIN`在这种情况下

```
SELECT  a.user_name as RT,
        b.source_user_name
FROM    topUserData a
        INNER JOIN tweets b
            ON a.user_name = b.rt_user_name 
```

或（*实际上不需要子查询，因为您在内部没有任何特殊操作*）

```
select user_name as rt, source_user_name 
from topUserData u
     INNER JOIN
     (
         select DISTINCT source_user_name 
         from tweets t 
     ) ON t.rt_user_name = u.user_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:07:35.563

您可以使用左连接

```
select user_name , source_username from topUserData u left join tweets t on t.rt_user_name = u.user_name 
```

# android - Android WebViewClient 不是 OverridingURL

> ID：14064076
> 
> 赞同：3
> 
> 时间：2012-12-28T03:03:47.150
> 
> 标签：android, webview, android-webview

我愿意`catch local anchor clicks`。这些锚点在页面内是本地的，即`href="#link_1"`. 捕捉这些点击的最佳方式是什么？`OverrideURL`不对他们开火？我正在加载基于锚 href 的新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T02:11:06.140

在某处找到答案，重定向可以被 shouldOverrideUrlLoading 拦截，前提是您使用的是 API 级别 11 或更高级别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-28T03:41:50.643

您在哪个版本中运行此程序。我发现 ICS 存在这个问题。在 ICS 中，仅当我尝试使用 Webview 加载错误的 URL 时才调用 shouldOverrideUrlLoading()。因此，您可以使用此行为进行快速修复。

# c++ - c++ - 无法使用已与其底层 RCW 分离的 COM 对象

> ID：14064081
> 
> 赞同：0
> 
> 时间：2012-12-28T03:04:37.137
> 
> 标签：c++, excel, command-line-interface, comobject, rcw

我的问题是标题中的错误消息：

```
COM object that has been separated from its underlying RCW cannot be used. 
```

我试图用谷歌搜索它，但我只能找到与析构函数/释放对象相关的解决方案。这不是我想做的事情。

首先，这是我的代码：

```
String^ filename="c:\\wb.xlsx";
Microsoft::Office::Interop::Excel::Application^ exApp= gcnew Microsoft::Office::Interop::Excel::ApplicationClass();
exApp->Visible=false;
exApp->Workbooks->Open(filename, 2, true, Type::Missing, Type::Missing, Type::Missing, true, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing, Type::Missing);
Worksheet^  exWss;
for (int x = 0; x <= checkedListBox1->CheckedItems->Count - 1; x++){
    for (int p=0; p<checkedListBox1->Items->Count; p++){
        if (checkedListBox1->CheckedItems[x]->ToString()->Equals(checkedListBox1->Items[p]->ToString())){
            p++;
            exWss  = safe_cast<Worksheet^> (exApp->ActiveWorkbook->Sheets[p]);
        }
    }
} 
```

简而言之：我有一个选中的列表框，这部分代码在选择了必要的东西后运行。在选中列表框中列出了 Excel 工作簿的不同工作表。我正在尝试根据选中列表框中的所选项目从工作簿中选择工作表。

在最后一行代码 (exWss = safe_cast (exApp->ActiveWorkbook->Sheets[p]);) 我收到了上述错误消息。

我已经看到元帅释放会导致这样的问题。在另一个函数中，虽然我运行 Marshal.Releasecomobject，但它是完全分离的，没有它我也会得到相同的错误。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:01:42.367

出于某种原因，“for”块似乎将 Interop 对象与其余代码完全分开。我设法通过在“for”块中初始化 Interop 对象来解决问题。（我引入了一个 bool 变量，指示工作簿是否已经打开 - 如果它是 false，它会在 'for' 块中打开它 - 否则它会继续）

然而有趣的是，该对象可以毫无问题地从“for”块中访问。我相信对此有一个解释，我不知道 - 我是新手，只是爱好程序员。

# jquery - 定位选择器具有正确的尺寸，可在不同的屏幕尺寸上缩放

> ID：14064082
> 
> 赞同：0
> 
> 时间：2012-12-28T03:04:42.317
> 
> 标签：jquery, html, css, layout, jquery-selectors

尝试使用 html 和 css 构建页面布局，页面包含 jQuery UI 选择器元素

*   期待拥有

    ```
    <div id="content">
        <img id="grid" src="http://placehold.it/350x250"/>
    </div> 
    ```

放置在屏幕的中心，与窗口的左、右、上和下边缘距离相等。

*   还有一个左侧菜单，包含 8 张图片，4x2 rowsxcols 布局

    ```
    <div id="menu" style="width:150px;float:left;">
        <b>Stock images</b><br>
            <ol id="selectable">
                <li id="house.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="gherkin.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="water.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="tree.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="me.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="hey.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="wutang.jpg" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
                <li id="test.png" class="ui-state-default"><img src="http://placehold.it/50x40"/></li>
        </ol>
    </div>
    <div id="content" style="float:left;">
        <img id="grid" src="http://placehold.it/350x250"/>
    </div> 
    ```

由于某种原因，我无法调整`#selectable`和`#selectalbe li`元素的高度尺寸。可选元素不应被`grid`元素阻挡。
目的是尽可能使用百分比而不是硬编码值，以便页面可以在不同尺寸的设备上正确呈现。
页眉和页脚 div 的位置很好。
感谢您对此的任何帮助！

这是当前布局的 jsfiddle .. [http://jsfiddle.net/TdNXD/10/](http://jsfiddle.net/TdNXD/10/)
目标布局，[链接](http://i.imgur.com/y8Bly.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T01:40:40.203

由于这实际上更像是一次大修而不是调整，所以这将是一个很长的答案，显示我为使其工作所做的所有更改。在那，请参考结果：

> [http://fiddle.jshell.net/userdude/TdNXD/16/show/light/](http://fiddle.jshell.net/userdude/TdNXD/16/show/light/)

和可编辑的小提琴：

[http://fiddle.jshell.net/userdude/TdNXD/16/](http://fiddle.jshell.net/userdude/TdNXD/16/)

灰色调：

> [http://fiddle.jshell.net/userdude/TdNXD/17/show/light/](http://fiddle.jshell.net/userdude/TdNXD/17/show/light/)
> 
> [http://fiddle.jshell.net/userdude/TdNXD/17/](http://fiddle.jshell.net/userdude/TdNXD/17/)

现在，正如您的评论所表明的那样，您正试图将 居中`img`在正确的内容区域的中间。在上面的小提琴中，它位于该内容区域的中间……（`div#main`我添加了一个）。所以如果我们考虑`nav`左边的宽度`#main`，你会得到：

> [http://fiddle.jshell.net/userdude/TdNXD/19/show/light/](http://fiddle.jshell.net/userdude/TdNXD/19/show/light/)
> 
> [http://fiddle.jshell.net/userdude/TdNXD/19/](http://fiddle.jshell.net/userdude/TdNXD/19/)

`img`如果都是彩色的，哪个颜色更容易看到居中：

> [http://fiddle.jshell.net/userdude/TdNXD/20/show/light/](http://fiddle.jshell.net/userdude/TdNXD/20/show/light/)
> 
> [http://fiddle.jshell.net/userdude/TdNXD/20/](http://fiddle.jshell.net/userdude/TdNXD/20/)

以上确实包括我注意到的一个小问题，因为当调整窗口大小时，`poadding`on`#menu`变窄了，这意味着 right 的绝对宽度`border`变得比 left 略宽`#main`。它可能不会或几乎不引人注意（如，也许`6-10px`），但我想我会提到它。

其他需要考虑的事项：

*   **IE7 和 8 中的布局中断。在 IE7**中更糟，但在 IE8 中仍然很糟糕。我的想法是 IE 缺乏对 , 的支持`display: table`，`min-width`而一些特殊的选择器如`input[type]`(etc.) 是根本原因，但我还没有确认哪些需要处理。如果您必须支持这些版本，我建议使用 IE 条件样式表来“修复”IE7/8 的显示，这将涉及使用`float`技术（不推荐，但可行）或（*颤抖*`) replacing the semantic markup with actual` 表元素。

*   你真的需要仔细阅读标记和样式表，最重要的是看看我在设计中加入的一些决定。我将标记修改为更具语义性，因此您将看到 HTML5 元素，如`section`、`aside`、`article`和`nav`，代替之前的元素。`p`如果我认为合适的话，我还将一些内容包装在标签中。我现在在想的一件事是`Stock Images`文本可能也应该放在一个`h2`块中，因为从技术上讲，这不是段落文本。`Input URL`和 也是如此，尽管由于功能的原因，它们可能适合作为候选者`Grid Dimensions`。`fieldset``legend`

*   另请注意，我从小提琴中删除了未使用的部分，例如`#feedback`样式）。

*   我还给了`min-width`几个元素，包括`#container`. 这是由保持“输入 URL”和“网格尺寸”中的布局完整性的愿望驱动`input`的。如果您希望它真正响应并保持从宽到窄的布局完整性，您需要使用特定于尺寸的属性以特定宽度重排它们。

好吧，这仍然是一个很长的答案，但希望这会有所帮助。如果您有任何问题，请告诉我。

# php - PHP的编码不正确？

> ID：14064083
> 
> 赞同：0
> 
> 时间：2012-12-28T03:04:45.723
> 
> 标签：php, html, encoding, utf-8, pdo

1) 我`tbl_Data`在数据库中有一个表，其`name`列的文本比较方法 (?) 属性设置为`utf8_polish_ci`. 当我浏览`tbl_Data`phpMyAdmin 时，它就像一个魅力。

2）在我的html代码中，我有：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8"> 
```

所以好像我正在为浏览器发送正确的编码头......

3）我的 PDO dsn 包含`;charset=UTF-8`，然后是 php 手册。

4）在我的php代码中，我使用：

```
foreach(parent::query('SELECT ID,PLName,LatinName from tbl_Data') as $row) {
    $result = $result."
        <tr>
            <td>".utf8_encode($row['PLName'])."</td>
        </tr>
    ";
} 
```

有了这一切，我仍然得到“垃圾”（= `?`）字符而不是正确的波兰字母，尽管其中一些显示良好（phpMyAdmin 显示正确）。我在这里缺少什么？请各位大侠指教！

我的 MySQL 引擎是`InnoDB`，网络服务器：`nginx`如果它是相关的，则使用 fpm...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:12:52.147

> 所以好像我正在为浏览器发送正确的编码头。

错误的。`<meta>`不是 HTTP 标头而是 HTML 标签，一种非标准的标签。因此，您的代码仍然缺少正确的标头。

```
header('Content-Type: text/html; charset=utf-8'); 
```

> 我的 PDO dsn 包含 ;charset=UTF-8，来自 php 手册。

如果您的 PHP 版本低于 5.3.6，它也不会工作。改用`SET NAMES utf8`常规查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:22:39.297

`utf8_encode()`如果您的文本已经是 UTF-8 编码，则没有理由使用。

一个潜在的问题可能是您的 PHP 版本。`;charset=UTF-8`只有 PHP 版本 >= 5.3.6 支持您的 DSN 元素。**在 5.3.6 之前，此元素被默默忽略**（而不是发出警告）。文档中提供了更多信息和解决方法：http: [//php.net/manual/en/ref.pdo-mysql.connection.php](http://php.net/manual/en/ref.pdo-mysql.connection.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T04:36:10.647

字符集 UTF-8 很好（在您的 html 中）：P

试试这个..（为此使用新的实验表来检查它，因为我不知道您的 PHP 脚本是否正在清理 $_POST 条目，或者根本没有做某事..）

1.  创建列设置为`utf8_bin`（不是 utf_ci_polish）名为“polish_title”

2.  在 PHP 将（文本输入、润色）数据传递给 mysql 之前，`INSERT (or update)`使用此（PHP 集成）功能隐藏那些

    $polish_input = **htmlspecialchars** ($input_polish_data);

    INSERT INTO table_name (polish_title) 值 ('$polish_input');

当波兰标志是您输入的一部分时，您将在 mysql 表中看到奇怪的数据（通过 phpmyadmin）

如果这行得通，您的所有 mqsql（文本）列都应该更改为 utf8_bin。为了让您自己轻松输入，您可以创建一个函数，在这些输入进入 mysql DB 之前“清理”您网站上的所有 $_POST 输入。

最大的优点是来自其他国家的访客会看到您的母语字母和标志（这也很重要）。

**编辑**（感谢常识用户输入）

是的，在你的标题中也必须包含这个

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T03:18:34.813

我无法评论你的帖子.....所以我建议在这里~_~
从[这里](http://php.net/manual/en/function.utf8-encode.php)，它说 utf8_encode — 将[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)字符串编码为 UTF-8
因此，我的问题是：你的输出是 ISO- 8859-1？
也许你可以创建一个正常的英语测试记录，然后再试一次。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-28T04:53:32.170

在您的 HTML 代码中，尝试：

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

# java - JDialog 停止父 JFrame 的执行

> ID：14064088
> 
> 赞同：0
> 
> 时间：2012-12-28T03:05:53.517
> 
> 标签：java, multithreading, swing, jdialog, animated-gif

我有一个 gif 动画图像，它在 jDialog 内显示无限循环加载进度......但是问题是当我加载这个 jDialog 时，父帧代码停止了。？如何做到这一点..这是我的代码..

```
ProgressDialouge pbDialog = new ProgressDialouge(this);
pbDialog.setVisible(true);
pbDialog.toFront();
postPairs.add(new BasicNameValuePair("PATH","authenticateUser.idoc"));
postPairs.add(new BasicNameValuePair("user_email",email));
postPairs.add(new BasicNameValuePair("user_password",password));
JSONArray jArray = asyncService.sendRequest(postPairs);
 if(jArray != null){
            new NewJFrame().setVisible(true);

            this.setVisible(false);
  } 
```

如果我更改我的 JDiaog 的 ModalityType.MODELESS，它不会停止代码的执行，但它也不会显示进度条..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T03:09:42.367

您很可能遇到了线程问题，您在 Swing 事件线程上运行长时间运行的任务，从而阻止事件线程更新 GUI。解决方案是使用后台线程，例如 SwingWorker 提供的后台线程。

我的猜测是有问题的行是这一行：

```
JSONArray jArray = asyncService.sendRequest(postPairs); 
```

再次，在后台线程中执行此操作。有关这方面的更多信息，请查看此链接：[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

例如：

```
import java.awt.Point;
import java.awt.Window;
import java.awt.event.ActionEvent;

import javax.swing.*;

public class ShowSwingWorker {
   private JPanel mainPanel = new JPanel();
   private JButton myBtn = null;
   private ProgressDialouge pbDialog = null;

   public ShowSwingWorker() {
      myBtn = new JButton(new AbstractAction("Push Me") {

         @Override
         public void actionPerformed(ActionEvent evt) {
            JButton source = (JButton) evt.getSource();
            source.setEnabled(false); // disable button
            Window win = SwingUtilities.getWindowAncestor(source);
            new MySwingWorker().execute(); // start background thread

            if (pbDialog == null) {
               pbDialog = new ProgressDialouge(win);               
               pbDialog.pack();
               pbDialog.setLocationRelativeTo(win);
               Point loc = pbDialog.getLocation();
               pbDialog.setLocation(loc.x - 100, loc.y - 100);
            }
            pbDialog.setVisible(true);
            // pbDialog.toFront();
         }
      });

      mainPanel.add(myBtn);
   }

   public JComponent getMainPanel() {
      return mainPanel;
   }

   private class MySwingWorker extends SwingWorker<Void, Void> {
      @Override
      protected Void doInBackground() throws Exception {
         Thread.sleep(4000); // emulate a long-running task

         // postPairs.add(new BasicNameValuePair("PATH",
         // "authenticateUser.idoc"));
         // postPairs.add(new BasicNameValuePair("user_email", email));
         // postPairs.add(new BasicNameValuePair("user_password", password));
         // JSONArray jArray = asyncService.sendRequest(postPairs);
         // if (jArray != null) {
         // new NewJFrame().setVisible(true);
         //
         // this.setVisible(false);
         // }
         return null;
      }

      @Override
      protected void done() {
         // Here you change your display.
         // you were swapping JFrames, but I recommend that you instead change views.
         myBtn.setEnabled(true);
         pbDialog.setVisible(false);
      }
   }

   private class ProgressDialouge extends JDialog {

      public ProgressDialouge(Window win) {
         super(win, "MyDialog", ModalityType.APPLICATION_MODAL);
         JProgressBar pBar = new JProgressBar();
         pBar.setIndeterminate(true);
         add(pBar);
      }

   }

   private static void createAndShowGUI() {
      ShowSwingWorker paintEg = new ShowSwingWorker();

      JFrame frame = new JFrame("ShowSwingWorker");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(paintEg.getMainPanel());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGUI();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-28T03:15:40.297

在模态对话框的情况下， pbDialog.setVisible(true) 行将阻塞，直到对话框被关闭。如果你想让对话框打开而不阻塞，你必须使它成为非模态的。使您的动画无法正常工作的原因可能是由于编写了同步代码来重新绘制对话框。您需要利用 EventQueue 定期重绘帧。您可以使用单独的线程，或者您可以使用一些不需要这样线程的更简单的代码：

```
public void paintComponent(Graphics g) {
    if( animate ) {
       Graphics2D g2d = (Graphics2D)g;
       BufferedImage frame = frames[currentFrame];
       g2d.drawImage(frame, null, x, y);
       frame.draw( g );
       currentFrame = (currentFrame + 1) % frames.length;
       repaint(); // this call will schedule a repaint at some point later.
    }
} 
```

这不需要线程，这在资源方面是一件好事，而且不太可能搞砸和违反 Swing 的单线程规则。您还可以查看：

[http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#drawImage(java.awt.Image](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html#drawImage(java.awt.Image) , java.awt.geom.AffineTransform, java.awt.image.ImageObserver)

用于在动画 gif 等内容上执行动画。

# c# - 需要帮助在运行时使用中继器控件更改布局

> ID：14064089
> 
> 赞同：0
> 
> 时间：2012-12-28T03:06:00.917
> 
> 标签：c#, asp.net

我是.Net 的新手。目前正在为在线巴士预订系统创建巴士布局。下面的代码有没有可能的解决方案

**1\. Booking.aspx 文件**

```
 <asp:Repeater ID="SeatLayout" runat="server">
     <HeaderTemplate><table class="seatList"><tr></HeaderTemplate>
       <ItemTemplate>
         <td>
          <input type="image" 
                  src="../Images/available_seat_img.png" ><%# Eval("NumberSeat")%></input>
          </td>
        </ItemTemplate>

     <FooterTemplate></tr></table></FooterTemplate>
  </asp:Repeater> 
```

**2\. 代码隐藏文件中的数据绑定。**

```
SeatLayout.DataSource = _seatBUS.GetAllSeatByBusRouter(_listBus);
SeatLayout.DataBind(); 
```

**3.数据源涉及“Seat”表，其中包含如下列**

```
SeatID
NumberSeat
Status
ListBusId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:43:24.807

这个怎么样：

1.  使用基本的公共汽车背景和公共汽车中各种座位的一组较小图像创建公共汽车图像。
2.  使用 CSS 绝对定位将座椅定位在各自的位置。
3.  根据数据源返回的 NumberSeat 更改座位图像。

我不确定您的巴士图像是什么样的，但您甚至可以使用 div 代替座位图像，这将减轻服务器负载并允许您简单地更改相应 div ID 的背景颜色而不是更改图片来源。

这些教程应该可以帮助您入门：

*   [如何使用 CSS 绝对定位 div](http://www.yourinspirationweb.com/en/css-tips-how-to-use-absolute-position-property/)
*   [如何在相对定位中使用绝对定位。](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)
*   [如何安装 JQuery。](https://stackoverflow.com/questions/1458349/installing-jquery)
*   [如何用 jquery 改变背景颜色。](http://api.jquery.com/css/)

# r - R在动物园对象和数据框之间转换，不同列数的结果不一致？

> ID：14064097
> 
> 赞同：11
> 
> 时间：2012-12-28T03:08:12.427
> 
> 标签：r, dataframe, zoo

我很难在数据框和动物园对象之间切换，特别是保持有意义的列名，以及单变量和多变量情况之间的不一致：

```
library(zoo)

#sample data, two species counts over time
t = as.Date(c("2012-01-01", "2012-01-02", "2012-01-03", "2012-01-04"))
n1 = c(4, 5, 9, 7)  #counts of Lepisma saccharina
n2 = c(2, 6, 0, 11) #counts of Thermobia domestica
df = data.frame(t, n1, n2)
colnames(df) <- c("Date", "Lepisma saccharina", "Thermobia domestica")

#converting to zoo loses column names in univariate case...
> z1 <- read.zoo(df[,1:2]) #time series for L. saccharina
> colnames(z1)
NULL
> colnames(z1) <- c("Lepisma saccharina") #can't even set column name manually
Error in `colnames<-`(`*tmp*`, value = "Lepisma saccharina") : 
  attempt to set colnames on object with less than two dimensions
#... but not in multivariate case
> z2 <- read.zoo(df) #time series for both species
> colnames(z2)
[1] "Lepisma saccharina"  "Thermobia domestica" 
```

要从动物园对象返回原始格式的数据框，使用它是不够的，`as.data.frame`因为它不包含日期列（日期在行名中结束）：需要做更多的工作。

```
zooToDf <- function(z) {
    df <- as.data.frame(z) 
    df$Date <- time(z) #create a Date column
    rownames(df) <- NULL #so row names not filled with dates
    df <- df[,c(ncol(df), 1:(ncol(df)-1))] #reorder columns so Date first
    return(df)
} 
```

这在多变量情况下效果很好，但在单变量情况下显然无法恢复有意义的列名：

```
> df2b <- zooToDf(z2)
> df2b
        Date Lepisma saccharina Thermobia domestica
1 2012-01-01                  4                   2
2 2012-01-02                  5                   6
3 2012-01-03                  9                   0
4 2012-01-04                  7                  11

> df1b <- zooToDf(z1)
> df1b
        Date z
1 2012-01-01 4
2 2012-01-02 5
3 2012-01-03 9
4 2012-01-04 7 
```

有没有一种简单的方法来处理*单*变量*和*多变量的情况？似乎`z1`需要以某种方式记住列名。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T04:36:38.360

如果您不想删除尺寸，请使用`drop=FALSE`：

```
R> (z1 <- read.zoo(df[,1:2], drop=FALSE))
           Lepisma saccharina
2012-01-01                  4
2012-01-02                  5
2012-01-03                  9
2012-01-04                  7 
```

如果您`write.zoo`想将动物园索引作为列包含在 data.frame 中，您可以执行以下操作：

```
zoo.to.data.frame <- function(x, index.name="Date") {
  stopifnot(is.zoo(x))
  xn <- if(is.null(dim(x))) deparse(substitute(x)) else colnames(x)
  setNames(data.frame(index(x), x, row.names=NULL), c(index.name,xn))
} 
```

* * *

更新：

为了简洁起见，在尝试编辑您的问题后，我想到了一种根据您的规格创建的简单方法（如果您不删除尺寸`df2b`，这也适用）：`z1`

```
R> (df2b <- data.frame(Date=time(z2), z2, check.names=FALSE, row.names=NULL))
        Date Lepisma saccharina Thermobia domestica
1 2012-01-01                  4                   2
2 2012-01-02                  5                   6
3 2012-01-03                  9                   0
4 2012-01-04                  7                  11 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-12T13:48:10.283

要将数据框转换为动物园，请使用`read.zoo`：

```
library(zoo)
z <- read.zoo(df) 
```

`drop`还要注意 中的和其他参数的可用性`?read.zoo`。

并从动物园转换为数据框，包括索引，使用`fortify.zoo`：

```
fortify.zoo(z, name = "Date") 
```

（如果加载了 ggplot2，那么您可以使用`fortify`.）

如问题下方的评论中所述，该问题以及其他一些答案要么已过时，要么存在一些重大误解。建议您查看[https://cran.r-project.org/web/packages/zoo/vignettes/zoo-design.pdf](https://cran.r-project.org/web/packages/zoo/vignettes/zoo-design.pdf)讨论动物园的设计理念，其中包括与 R 本身的一致性。如果你必须记住 R 的一组默认值和 zoo 的另一组默认值，当然 zoo 会更难使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-11T22:59:09.153

使用包有一个更新的简单解决方案`timetk`。它将转换几种时间序列格式，包括`xts`and `zoo`，到`tibble`s。只需换`as.data.frame`行即可获得数据框。

```
timetk::tk_tbl(zoo::read.zoo(df))
# A tibble: 4 x 3
  index      `Lepisma saccharina` `Thermobia domestica`
  <date>                    <dbl>                 <dbl>
1 2012-01-01                    4                     2
2 2012-01-02                    5                     6
3 2012-01-03                    9                     0
4 2012-01-04                    7                    11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-05T05:50:44.777

您可以简单地创建一个新数据集并添加 as.data.frame 来包装 fortify.zoo。这应该会有所帮助。z2=as.data.frame(fortify.zoo(z, name = "Date"))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-19T20:27:49.970

我想绕一圈。首先，将动物园写入 csv 文件，然后再次将其读取到 data.frame。默认情况下，索引列将命名为“索引”，但您可以使用参数更改它。

```
library(zoo)
date <-
  seq.Date(
    from = as.Date("2017-01-01"),
    to = as.Date("2017-01-10"),
    by = "days"
  )
value <- seq.int(from = 100, to = length(date))
vzoo <- zoo(value, date)
write.zoo(
  vzoo,
  index.name = "Date",
  file = "tmp.txt",
  sep = ",",
  col.names = TRUE
)
vzoo.df <- read.csv("tmp.txt", sep = ',') 
```

# jquery - 在鼠标悬停或悬停时停止 Jquery 动画

> ID：14064098
> 
> 赞同：0
> 
> 时间：2012-12-28T03:08:42.597
> 
> 标签：jquery, animation, mouseover

我想在元素悬停时停止或清除元素的动画，并在未悬停时返回。这是我的代码：

```
function blink(){
        $('#unitedkingdom, #germany, #korea, #philippines,
        #indonesia').delay(400).fadeTo(800,0.7).delay(800).fadeTo(800,1, blink);
    }

    $(document).ready(function(){

            blink();

        $('#unitedkingdom').hover(function(){
            $(this).stop(blink); //I'm trying to STOP the function i declared from above
            $('#uk').animate({opacity:1},300);
        });
        $('#germany').hover(function(){
            $('#ger').animate({opacity:1},300);
        });
        $('#korea').hover(function(){
            $('#kor').animate({opacity:1},300);
        });
        $('#philippines').hover(function(){
            $('#phil').animate({opacity:1},300);
        });
        $('#indonesia').hover(function(){
            $('#ind').animate({opacity:1},300);
        });
    }); 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:31:02.503

你要这个：

```
$(this).stop(true); 
```

jQuery`.stop()`文档 - [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# linux - 用于解析 grep 的 awk 命令

> ID：14064105
> 
> 赞同：2
> 
> 时间：2012-12-28T03:10:19.567
> 
> 标签：linux, unix, awk, grep

我有以下命令，其输出如下所示，有没有办法编写一个 awk 命令来解析当前输出并只打印下面“预期输出”字段中显示的那些？

```
ssh -p 29418 company.com gerrit query --commit-message --files --current-patch-set status:open project:platform/vendor/company/radio branch:master |grep refs 
```

电流输出：-

```
ref: refs/changes/26/206026/1
ref: refs/changes/25/206025/1
ref: refs/changes/22/206022/1 
```

期望的输出：-

```
206026
206025
206022 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:16:36.493

使用 awk：

```
awk -F'/' '{print $(NF-1)}' input 
```

另一件事是，您可以删除 grep 并直接使用 awk：

```
ssh -p 29418 company.com gerrit query     \
          --commit-message --files        \
          --current-patch-set status:open \
          project:platform/vendor/company/radio branch:master |
    awk -F'/' '/refs/ {print $(NF-1)}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T03:13:15.150

我知道你问过，`awk`但也许你可以试试`cut`：

```
cut -f4 -d"/" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T14:11:18.840

或者如何使用`grep`：

```
$ ... | grep -Po '(?<=ref: refs/changes/[0-9]{2}/)[0-9]+'
206026
206025
206022 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-18T20:10:12.493

```
grep search_string /directory/filename | cut -f1 -d':' 
```

grep 从文件目录中搜索字符串（例如 *.c，用于 c 文件列表）。

`grep include */*.c`--- 除了返回包含关键字“include”的所有子目录的 c 文件列表。此命令输出还将包含搜索字符串所在的整行。

例如`./tmp/readline-6.2:# include < stdlib.h>`，这是 grep 命令的输出 - 可能有几行输出，每行都包含“include”关键字。

要从此输出中获取文件名：

```
grep include /.c | cut -f1 -d':' 
```

# postgis - 如何用纯sql表达投影？

> ID：14064107
> 
> 赞同：0
> 
> 时间：2012-12-28T03:10:42.640
> 
> 标签：postgis, rgeo

我用过

```
RGEO_FACTORY = RGeo::Geographic.simple_mercator_factory
RGEO_FACTORY.point(lon, lat).projection 
```

但是现在我想用sql来实现它。我在 postgis 数据库中有点（几何）。

我应该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:13:21.107

[RGeo 简单的墨卡托工厂文档](http://rubydoc.info/github/dazuma/rgeo/master/RGeo/Geographic.simple_mercator_factory "RGeo 简单的墨卡托工厂文档")声明它使用 SRID 4326 存储点，使用 SRID 3785 进行投影。PostGIS 有[ST_Transform](http://postgis.refractions.net/docs/ST_Transform.html)。这是一个涵盖该主题的不错的[教程。](http://workshops.opengeo.org/postgis-intro/projection.html)假设您将 geom 字段存储在“nodes”表中，并且它位于 SRID 4326 中，那么您可以使用 ST_Transform 获得与 RGeo 简单墨卡托相同的投影。使用 ST_SRID 了解您的 geom 字段的 srid：

```
select geom, ST_SRID(geom) from nodes limit 1;
                        geom                        | st_srid 
----------------------------------------------------+---------
 0101000020E61000004A97FE25A9523E40B6B9D683EEE74D40 |    4326

select ST_Transform(geom, 3785) from nodes limit 1;
                    st_transform                    
----------------------------------------------------
 0101000020C90E0000FE8D2A88D4C04941A418472F1AE25F41 
```

如果您尝试将 geom 转换为相同的 srid，它不会改变：

```
select ST_Transform(geom, 4326) from nodes limit 1;
                    st_transform                    
----------------------------------------------------
 0101000020E61000004A97FE25A9523E40B6B9D683EEE74D40 
```

# java - 我想做一个从我的 hp 值中减去 25 的方法，但是有一个问题

> ID：14064109
> 
> 赞同：0
> 
> 时间：2012-12-28T03:10:44.747
> 
> 标签：java

到目前为止，我有这个 if 逻辑

```
if (d.intersects(r1) && en.visible == true && en.isAlive == false)
{
    hit = 25;
    // System.out.println(enemy_count);
    hitmang(hit);
}

if (d.intersects(r2) && en2.visible == true && en2.isAlive == false)
{
    hit = 25;
    hitmang(hit);
    //  System.out.println(enemy_count);
} 
```

用这个方法

```
private void hitmang(int x) { 
    p.user_hp = p.user_hp - x;
} 
```

这些都是我的敌人

```
en = new Enemy(700, 150);
en2 = new Enemy (980, 150); 
```

我想这样当我击中敌人时它只会从我身上减去 25 hp，但由于敌人的面积很大（113、134）它会减去 25，直到我离开那个范围使我的 hp ~-6000（显然是一个问题），有没有办法让它只减去一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:18:55.390

我猜是因为你的第一个代码片段在游戏循环中，它每秒运行很多次（通常是 30 次）。在每次执行（大约每 0.03 秒运行一次）中，您的形状*都会*与敌人相交（因为您没有离开）。

也就是说，你的生命值每 0.03 秒减少 25 秒，直到你远离敌人！

尝试这个：

`hitted`首先，在您的 Player 类中初始化一个字段。

```
private boolean hitted = false; 
```

然后，在你的游戏循环中。

```
if (d.intersects(r1) && en.visible == true && en.isAlive == false && !p.hitted)
{
    hit = 25;
    // System.out.println(enemy_count);
    hitmang(hit);
    p.hitted = true;
}

// Same goes to 2nd enemy ....

// if no longer intersects
if (!d.intersects(r1) && !d.intersects(r2)){
    p.hitted = false;
} 
```

* * *

或者您可能希望根据评论实施冷却机制。

如果这是您想要做的，请改为初始化另一个字段

```
private int hitSince = 0; 
```

然后，在你的游戏循环中。

```
if (d.intersects(r1) && en.visible == true && en.isAlive == false && hitSince <= 0)
{
    hit = 25;
    // System.out.println(enemy_count);
    hitmang(hit);
    hitSince = 30; // once hit, you won't be 'hit' and lose HP again in 30 frames
}

// Same goes to 2nd enemy ....

// decrease cooldown time every frame
hitSince--; 
```

如果您采用这种方式，您可能需要考虑使用`Timer`虽然，因为此代码将取决于您游戏的 FPS - 这可能在其他玩家的计算机中不稳定（因为他们的计算机速度很慢或在后台运行防病毒软件，例如。这通常被（来自游戏玩家）称为“滞后”）

顺便说一句，如果会有很多敌人，您需要将它们存储在一个`array`或一个`collection`诸如`ArrayList`

# iphone - iphone 应用程序 - 跟踪所有方法调用

> ID：14064110
> 
> 赞同：1
> 
> 时间：2012-12-28T03:10:54.423
> 
> 标签：iphone, objective-c, ios, debugging

我开发了一个 iphone 应用程序并提交到应用商店。现在，如果有人下载了应用程序并且应用程序崩溃了，我会从应用程序商店获得崩溃日志。但我无法理解崩溃是如何发生的。

所以，我想跟踪我的应用程序中的所有方法调用和最后一次触发的事件。如果在应用程序崩溃时捕获此信息并将其发送给我，我可以轻松解决问题。

有没有办法跟踪应用程序的所有方法调用？我不喜欢为所有方法添加 NSLog。（[跟踪 iPhone 应用程序中的方法调用](https://stackoverflow.com/a/3730126/1538079)）

当我在 XCODE 中运行代码时，会生成控制台日志。有没有办法可以从我的应用程序创建类似的日志？

请分享您的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:22:36.673

我也遇到过同样的情况。这是我为我的应用程序所做的事情。

要记录您自己的数据，请使用[Cocoalumberjack](https://github.com/robbiehanson/CocoaLumberjack)。它比 NSLog 快得多，并且可以动态打开/关闭。它还提供将数据保存到文件中的选项。NSLog 将减慢您的应用程序并填充控制台日志。此外，您通常不想记录太多。崩溃发生时，您无法安全地进行日志记录。因此，一旦您确定了问题区域在哪里，请在此处添加更多日志记录并尝试重现它，例如通过使用[KIF](https://github.com/square/KIF)之类的自动化测试框架。

更多来自这里 - [iOS 崩溃日志捕获、调试信息.. 捕获并通过电子邮件发送给开发团队](https://stackoverflow.com/questions/8233388/ios-crash-log-catch-debug-info-catch-and-send-via-email-to-the-dev-team)

希望这可以帮助...

# java - Java Mail 之谜 - SMTP 被阻止？

> ID：14064111
> 
> 赞同：12
> 
> 时间：2012-12-28T03:11:01.907
> 
> 标签：java, smtp, jakarta-mail

我有一个使用 javax.mail 发送 SMTP 消息的 Java 程序。这个程序在 Linux 机器上运行良好，我想事先强调一下。当我在我的 Windows 7 x64 机器上尝试相同的代码时，我收到此错误：

```
send failed, exception: javax.mail.MessagingException: Could not connect to SMTP host:     smtp.west.cox.net, port: 25;
nested exception is:  java.net.SocketException: Network is unreachable: connect 
```

这是代码：

```
Session session = Session.getInstance(props, null);
MimeMessage msg = new MimeMessage(session);
msg.setFrom();
msg.setRecipients(Message.RecipientType.TO, props.getProperty("mail.to", "me@mine.com"));
msg.setSubject(mySubject);
msg.setSentDate(new Date());
msg.setContent(sBuf.toString(), "text/html");
Transport.send(msg); 
```

该程序几乎对所有内容都使用默认值。它在同一网络上的另一个盒子上工作正常。它使用的设置与我用于常规邮件客户端的设置相同，效果很好。这个 Windows 盒子上有一些东西阻止了 SMTP，但仅适用于 Java。

我安装了 Symantec (Norton) 360。关闭它没有任何区别，但重新启动到安全模式（几乎禁用所有东西）允许程序正常工作并发送邮件。

所以，回顾一下：

1.  程序代码有效。
2.  设置正确。
3.  SMTP 适用于 Windows Mail，仅在此 Windows 机器上被 Java 阻止。

在我再花一天时间拆开东西并卸载/重新安装之前，我想知道是否有人对解决此问题有任何建议？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-28T16:14:35.240

问题是由于 Java 的 IPv4/IPv6 偏好。Java 尝试默认使用 IPv6 (?) 而我的 ISP 不支持 IPV6。但是，默认情况下，它在我的 Windows 7 机器上启用。

如果您遇到类似的行为，您可以通过转到“控制面板/网络和 Internet/网络连接”，右键单击您的 Internet 连接，然后从上下文菜单中选择“状态”来验证这一点。状态对话框将显示与此类似的两行：

```
IPv4 Connectivity:  Internet
IPv6 Connectivity:  No Internet access 
```

这是问题的根源——Java 更喜欢 IPv6，它不能用来连接到 Internet。

要解决此问题，请执行以下其中一项（或两项）操作：

1.  在 Windows 7 机器上禁用 IPv6。
2.  使用此命令行选项启动您的 java 程序：

    ```
    -Djava.net.preferIPv4Stack=true 
    ```

执行其中任何一项都可以解决问题。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-09T05:26:16.600

在从 java 1.6 升级到 java 1.7 期间，我遇到了同样的问题。出现问题是因为 java 1.7 默认使用 IPv6。要解决此问题，您需要添加 Java 选项，如下例所示。

只需在 Windows cmd 上运行此命令：

```
setx _JAVA_OPTIONS -Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-01T12:23:13.987

[Synantec EP 12.1 RU5](http://www.symantec.com/business/support/index?page=content&id=TECH224706&locale=en_US)解决了您的问题。

> Symantec Endpoint Protection 阻止 Java 邮件客户端发送的电子邮件
> 
> 修复 ID：3399185
> 
> 症状：Symantec Endpoint Protection 的 Internet 电子邮件自动防护功能会阻止 Java 邮件客户端发送的 SMTP 电子邮件。
> 
> 解决方案：更新了 Internet 电子邮件自动防护驱动程序以允许处理 IPv4 映射的 IPv6 地址。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-02T16:40:35.617

我也面临同样的问题，基本上是 Java 7 问题，只需传入 JVM 参数“-Djava.net.preferIPv4Stack=true”，我就摆脱了问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T21:39:38.837

尽管此问题已解决：指出某些 Windows 防火墙基于可执行文件名称（而不是纯粹的端口号本身）阻止/允许访问端口可能仍然有用 - 因此您最终可以使用一个程序（例如 Outlook ) 被允许，而另一个（比如 Java）被阻止。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-06-06T20:06:28.837

我有类似的问题，但奇怪的是，一旦我安装了 jdk 1.7，jdk 1.6 一切正常，我得到了异常。我想知道这可能是什么原因！

添加 IPV4 参数后，它工作正常。非常感谢。

# android-emulator - Jenkins - Android 模拟器插件 - AVD 的位置

> ID：14064112
> 
> 赞同：2
> 
> 时间：2012-12-28T03:11:12.407
> 
> 标签：android-emulator, jenkins-plugins

我在 mac OSx 10.7.4 上使用 Jenkins 1.495。我正在尝试配置 Android 模拟器插件。

在作业配置（高级项目选项）中，我指定了'使用客户工作区'-> 目录，即“/users/testuser/androidws/HelloWorld”。这是我的 android 项目所在的位置。

然后我选择了“在构建期间运行 Android 模拟器”并选择了“运行现有模拟器”，并给出了现有 avd 的名称。Jenkins 正在“/users/testuser/androidws/HelloWorld/.android/avd”中寻找这个 AVD 文件，而不是应该寻找“$HOME/.android/avd”。

我没有找到任何强制 Jenkins 查看 $HOME/.android/avd 文件夹的选项。

我正在使用具有 HOME 目录的真实用户将 Jenkins 作为守护程序运行。

任何想法表示赞赏..

谢谢

*   忘了提及如果我尝试使用“使用选项运行模拟器”（创建新模拟器）选项有效，但它会在我的项目中创建 .android/avd 文件夹。基本上 Jenkins 不是在 $HOME 中寻找 .android/avd ，这是我试图解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:52:49.163

听起来您在 Jenkins 系统配置中启用了“在工作区中创建模拟器”选项。

关闭它，它应该可以工作。

尽管如果您选择“使用现有模拟器”选项，插件应该被修复为自动执行此操作。

# jquery - 更改输入中名称 attr 的值：隐藏标签不起作用 - jQuery

> ID：14064116
> 
> 赞同：1
> 
> 时间：2012-12-28T03:11:22.670
> 
> 标签：jquery, ajax, forms, attr

我有以下表格（如下），其中有一个隐藏的输入标签。在表单提交和回复时，我想将该隐藏输入名称的名称更改为“__REMOVE__”的值。然后在再次提交表单响应时，我希望它返回“__ADD__”，依此类推。然而，该代码对我不起作用，名称 =“__ADD__” 永远不会在表单上更改。我对 jQuery 很陌生，所以请原谅我的无知。请注意，__BRONZE__ 的值永远不应更改 - 名称更改是后端 PHP 的要求。

**形式：**

```
<form action="cart.php" method="post" class="cart-ajax">
    <input type="hidden" name="__ADD__" value="__BRONZE__" />
    <br><button type="submit" class="add-more-top dark cart-button-eight">Add to Cart</button>
    <div class="cart-ajax-response"></div>
</form> 
```

**jQuery：**

```
$(document).ready(function() {

// code here snipped out to keep this question short

    // Shopping Cart Form
    $("form.cart-ajax").submit(function(e) {
            e.preventDefault();
            var form = $(this);

            // update the submit buttons text on form submission
            if(form.find('input:hidden').attr('name', '__ADD__'))
            {
                    form.find('button:submit').html('Adding...');
            }
            else if(form.find('input:hidden').attr('name', '__REMOVE__'))
            {
                    form.find('button:submit').html('Removing...');
            }

            $.post(form.attr('action'), form.serialize(),
                    function(data) {

                            // update the submit buttons text after successful response 
                            // update the hidden form field with the opposite of the current value
                            if(form.find('input:hidden').attr('name') == '__ADD__')
                            {
                                    form.find('button:submit').html('Remove');
                                    form.find('input:hidden').attr('name', '__REMOVE__');
                            }
                            else if(form.find('input:hidden').attr('name') == '__REMOVE__')
                            {
                                    form.find('button:submit').html('Add');
                                    form.find('input:hidden').attr('name', '__ADD__');
                            }

                            // do something with the returned data - used in cart-ajax-response div
                            form.find('.cart-ajax-response').empty().html(data.aResults[0]);

                    }, 'json');
    });
}); // <-- document ready 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T03:18:59.653

```
if(form.find('input:hidden').attr('name', '__ADD__')) 
```

没有按照你的想法做。您实际上是在设置该字段的名称，而不是询问它是否存在。

利用

```
if(form.find('input[name="__ADD__"]').length) 
```

note`.length`给你一个整数。没有它，您将返回一个对象，即使它的长度为 0 也是如此。

但是，看看这个[http://jsfiddle.net/3xTfX/2/](http://jsfiddle.net/3xTfX/2/) - 同样的事情，更少的代码

# vb.net - 编写键盘记录器的最有效方法？(VB.NET)

> ID：14064123
> 
> 赞同：-3
> 
> 时间：2012-12-28T03:12:23.613
> 
> 标签：vb.net, winapi, hook, keylogger

我正在设计一个键盘记录器来制作诸如“查询最多的 Google 字符串”之类的统计信息……用户会知道它是一个键盘记录器，而不是“秘密”。

我研究了 GetAsyncKeyState WinAPI 函数，但我也遇到过使用钩子。哪一个会占用最少的系统资源？记录击键的最有效方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:44:54.570

与其编写一个键盘记录器，它必须查看单个击键并手动尝试找出它们属于什么，我会编写一个浏览器插件，而不是查看被请求的实际 URL。然后您可以查找 Google 网址，并在检测到时查看正在提交的实际搜索词。比普通的键盘记录器更准确、更高效。

# c - C中的readline不起作用

> ID：14064127
> 
> 赞同：3
> 
> 时间：2012-12-28T03:13:25.130
> 
> 标签：c

我以前从未遇到过这样的问题。我在 Mac 上编写简单的 C 程序并像往常一样使用 gcc 编译。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <readline/readline.h>
#include <readline/history.h>

#define MAXLINES 5

char *lineptr[MAXLINES];
void writel(char *lineptr[], int nlines);
void quicksort(char *lineptr[], int left, int right);
void swap(char *v[], int i, int j);

/* sort input lines */
int main() {
  int nlines; /* number of lines to read */
  int i = 0;

  /* saves lines in the array lineptr */
  while (i < MAXLINES) {
    lineptr[i] = readline("Enter a line: \n");
    i++;
  }

  quicksort(lineptr, 0, MAXLINES-1);
  writel(lineptr, MAXLINES);
  return 0;
} 
```

似乎 readline 造成了麻烦。一旦我注释掉`lineptr[i] = readline("Enter a line: \n");`它就可以编译了。但我不明白这里的 readline 有什么问题......错误是：

> 架构 x86_64 的未定义符号：“_readline”，引用自：cckHOwOt.o ld 中的 _main：未找到架构 x86_64 的符号

感谢任何可以提供建议的人。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T03:20:14.673

用 编译你的代码`-lreadline`。当然，您还需要在系统上安装 readline-devel 软件包。

# android - 尝试将数据与搜索中的查询匹配时出现 NullPointerException

> ID：14064131
> 
> 赞同：1
> 
> 时间：2012-12-28T03:13:36.417
> 
> 标签：android, search, nullpointerexception

当我尝试执行搜索时，我在日志中收到 NullPointerException。我正在尝试使用 query() 和 getContactMatches() 方法将您从搜索中获得的查询与我的数据库中的联系人姓名相匹配。日志似乎指向这些方法中的代码。由于 getContactMatches() 中使用了 query() 方法，我认为错误源自 query()，但我不知道。

来自数据库类的一些代码：

```
public Cursor getContactMatches(String query, String[] columns) {
            String selection = COL_NAME + " MATCH ?";
            String[] selectionArgs = new String[] {query+"*"};

            return query(selection, selectionArgs, columns);
        }

private Cursor query(String selection, String[] selectionArgs, String[] columns) {
            SQLiteQueryBuilder build = new SQLiteQueryBuilder();
            build.setTables(DATABASE_TABLE);

            Cursor cursor = build.query(DBHelper.getReadableDatabase(),
                    columns, selection, selectionArgs, null, null, null);

            if (cursor == null) {
                return null;
            }

            return cursor;
        } 
```

搜索活动类的代码：

```
public class SearchResultsActivity extends ListActivity {

private ListView list;
DatabaseTable db;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search_results);
    db = new DatabaseTable(this);
    handleIntent(getIntent());
}

public void onNewIntent(Intent intent) {
    setIntent(intent);
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
    if (Intent.ACTION_VIEW.equals(intent.getAction())) {
        Intent contactIntent = new Intent(this, ContactActivity.class);
        contactIntent.setData(intent.getData());
        startActivity(contactIntent);
        finish();
    } else if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }

}

private void showResults(String query) {
    int name = 0;
    String c = "";
    Cursor cursor = db.getContactMatches(query, null);
    int cursor_length = db.cursorLength(cursor);
    String[] display = new String[cursor_length];
    list = (ListView)findViewById(android.R.id.list);
    int x = 0;

    //Loading data through Cursor into String array
    for (cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
    {
        name = cursor.getColumnIndex(DatabaseTable.COL_NAME);
        c = (cursor.getString(name));
        display[x] = c;
        c = "";
        x = x + 1;
        name = 0;
    }

    ArrayAdapter<String> contactAdapter = new ArrayAdapter<String>(this,
              R.layout.activity_search_results, android.R.id.list, display);
    list.setAdapter(contactAdapter);
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent contactIntent = new Intent(getApplicationContext(), ContactActivity.class);
            contactIntent.setData(getIntent().getData());
            startActivity(contactIntent);
        }
    });
} 
```

日志：

```
12-27 20:57:24.962: E/AndroidRuntime(635): FATAL EXCEPTION: main
12-27 20:57:24.962: E/AndroidRuntime(635): java.lang.NullPointerException
12-27 20:57:24.962: E/AndroidRuntime(635):  at com.example.myfirstapp.DatabaseTable.query(DatabaseTable.java:99)
12-27 20:57:24.962: E/AndroidRuntime(635):  at com.example.myfirstapp.DatabaseTable.getContactMatches(DatabaseTable.java:92)
12-27 20:57:24.962: E/AndroidRuntime(635):  at com.example.myfirstapp.SearchResultsActivity.showResults(SearchResultsActivity.java:51)
12-27 20:57:24.962: E/AndroidRuntime(635):  at com.example.myfirstapp.SearchResultsActivity.handleIntent(SearchResultsActivity.java:43) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:47:08.443

似乎您从未实际实例化引用变量`DBHelper`。这意味着虽然它是全局的，但它仍然是**null**。在某个地方，您将需要实例化它。如果 DbHelper 的构造函数也需要一个`Context`传递的，在`DatabaseTable`的构造函数中你可以这样做：

```
public DataBaseTable (Context context)
{
 DBHelper = new DbHelper (context);
 //rest of your initialization stuff here.
} 
```

否则，就做`DBHelper = new DbHelper ();`

# android - 应用程序启动时仅运行后台服务

> ID：14064132
> 
> 赞同：2
> 
> 时间：2012-12-28T03:13:53.927
> 
> 标签：android, android-activity

我只想在我的应用程序启动时启动服务。这是我的代码：

我的服务类：

```
public class MyService extends Service {
 @Override
  public int onStartCommand(Intent intent, int flags, int startId) {

     Log.i("LocalService", "Received start id " + startId + ": " + intent);

   // We want this service to continue running until it is explicitly
   // stopped, so return sticky.
   return START_STICKY;
  }

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

我的广播接收器类：

```
public class MyServiceReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    Intent service = new Intent(context, MyService.class);
    context.startService(service);
}
} 
```

还有我的 AndroidManifest 文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <service
      android:name=".MyService"
      android:label="@string/app_name"
      android:enabled="true"
      android:process=":my_process" >
    </service>

    <receiver 
        android:name=".MyServiceReceiver"
        android:enabled="true" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <action android:name="android.intent.action.BOOT_COMPLETED"/>
            <category android:name="android.intent.category.HOME"/>
        </intent-filter>
    </receiver>

</application> 
```

我想在应用程序启动（第一次安装）和设备启动时启动我的服务。

PS如果代码是正确的，也许我必须为eclipse“运行”按钮设置一个特定的配置？如果尝试创建新配置，我无法在“启动操作”中选择任何内容，因为我的应用程序没有活动，我必须选择“什么都不做”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:23:55.737

`onCreate`如果您希望服务在您启动应用程序后立即启动，您将需要一个主要活动来调用此服务。在您的主要活动中，将此代码包含在您的 onCreate 中。

`startService(new Intent(Main_Activity.this,MyServiceReceiver.class));`

这只是在您启动应用程序时调用您的服务。

# html - 如何在css中获取div的宽度：100%-1px

> ID：14064134
> 
> 赞同：0
> 
> 时间：2012-12-28T03:14:02.190
> 
> 标签：html, width

有没有办法在 CSS 中计算宽度？我想制作一个宽度小于 100% 宽度的 1px 。有没有类似的财产`width:100%-1px;`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:18:44.687

试试这个 JavaScript 片段：

```
elem = document.getElementById('div');
pElem = elem.parentNode;
pPadding = pElem.style.padding || pElem.style.paddingLeft + pElem.style.paddingRight || 0;
pBorder = pElem.style.borderWidth || pElem.style.borderLeftWidth + pElem.style.borderRightWidth || 0;    
elem.style.width = ( pElem.offsetWidth - pPadding - pBorder - 4 ) + "px"; 
```

**编辑：**重要的是要注意在这个脚本中，3 = 0、4 = 1、5 = 2、6 = 3 等等......所以 3 就像起始数字一样。

# ruby-on-rails - rails查询有很多关联，如何找出数据只有一个孩子

> ID：14064135
> 
> 赞同：1
> 
> 时间：2012-12-28T03:14:43.657
> 
> 标签：ruby-on-rails, has-many

这是细节：模型问题有很多答案。那么如何找出只有一个答案的所有问题（question.answers.count == 1）。反正要查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:55:19.600

Rails `Counter Cache` [http://railscasts.com/episodes/23-counter-cache-column](http://railscasts.com/episodes/23-counter-cache-column) + 通常`Question.includes(:answers).where(:answers_count => 1)` 除此之外，以后可以减少对数据库的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:30:10.457

以下应该可以解决问题：

```
Question.joins(:answers).select("count(answers_table_name.id) as answer_count, questions_table_name.id").
group("answers_table_name.question_id").having("answer_count=1") 
```

# razor - 使用 Azure 云服务上的包部署的 Razor 的依赖性问题

> ID：14064138
> 
> 赞同：3
> 
> 时间：2012-12-28T03:15:11.763
> 
> 标签：razor, azure, azure-web-roles

我正在尝试将 RockPaperAzure 项目部署到 Azure 云服务，但出现此错误。

```
Could not load file or assembly 'System.Web.WebPages.Razor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. 
```

我发现寻找解决方案的所有内容都只是建议包括项目中的 .ddl 文件并引用这些 .dll，但这不起作用。

我不知道缺少什么。

编辑：我通过将框架升级到 ASP.NET MVC 4 解决了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:09:10.230

您有引用旧版本的依赖程序集 - 1.0 - 使用 NuGet 更新所有引用。如果做不到这一点，您可以将程序集绑定重定向添加到 web.config：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    ...
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages.Razor" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

只需确保您引用的是 bin 文件夹中部署的版本。

# c# - Windows Phone 列表框轻弹行为

> ID：14064142
> 
> 赞同：1
> 
> 时间：2012-12-28T03:15:44.080
> 
> 标签：c#, silverlight, xaml, windows-phone

全部

在将列表框滚动到顶部时，如果我仍然按住手指，列表框将被压缩一点，但当我松开水龙头时它会像往常一样弹回。有什么方法可以检测到这种行为吗？

目前我正在使用此代码来捕获滚动事件，但是当列表框到达顶部或末尾时，即使我执行上述手势，这些值也将始终为 0 或列表框的高度。

```
void PageLoaded(object sender, RoutedEventArgs e)
    {
        List<ScrollBar> scrollBarList = GetVisualChildCollection<ScrollBar>(listBox1);
        foreach (ScrollBar scrollBar in scrollBarList)
        {
            if (scrollBar.Orientation == System.Windows.Controls.Orientation.Horizontal)
            {
                scrollBar.ValueChanged += new RoutedPropertyChangedEventHandler<double>(horizontalScrollBar_ValueChanged);
            }
            else
            {
                scrollBar.ValueChanged += new RoutedPropertyChangedEventHandler<double>(verticalScrollBar_ValueChanged);
            }
        }      
    }

    private void horizontalScrollBar_ValueChanged(object sender, RoutedEventArgs e)
    { 
    }

    private void verticalScrollBar_ValueChanged(object sender, RoutedEventArgs e)
    {
        ScrollBar scrollBar = (ScrollBar)sender;
        object valueObj = scrollBar.GetValue(ScrollBar.ValueProperty);
        object maxObj = scrollBar.GetValue(ScrollBar.MaximumProperty);
        if (valueObj != null && maxObj !=null)
        {
            double value = (double)valueObj;
            double max = (double)maxObj;

            System.Diagnostics.Debug.WriteLine(value);
            System.Diagnostics.Debug.WriteLine(max);
        }
    }

    void btnDelete_Click(object sender, EventArgs e)
    {
        ((ObservableCollection<String>)listBox1.ItemsSource).Remove("hello1");
        listBox1.ScrollIntoView(listBox1.Items[listBox1.Items.Count()-1]);
    }

    public static List<T> GetVisualChildCollection<T>(object parent) where T : UIElement
    {
        List<T> visualCollection = new List<T>();
        GetVisualChildCollection(parent as DependencyObject, visualCollection);
        return visualCollection;
    }
    private static void GetVisualChildCollection<T>(DependencyObject parent, List<T> visualCollection) where T : UIElement
    {
        int count = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < count; i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(parent, i);
            if (child is T)
            {
                visualCollection.Add(child as T);
            }
            else if (child != null)
            {
                GetVisualChildCollection(child, visualCollection);
            }
        }
    } 
```

# drupal - 如何为每个 Drupal 菜单锚添加特定的类

> ID：14064143
> 
> 赞同：3
> 
> 时间：2012-12-28T03:15:44.317
> 
> 标签：drupal, drupal-7, drupal-theming

我正在使用 drupal 开发一个网站，我需要知道如何将链接添加到 drupal 菜单锚点。

例如：

*   我有一个 drupal 菜单：用户菜单。在用户菜单中，我有几个链接列表，比如说：A、B、C、D。

*   然后，我想为每个锚添加类/ID，例如：`<a href = "AAA" class = "A">A</a>`

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T08:05:41.237

您应该尝试[菜单属性](http://drupal.org/project/menu_attributes)模块。

> 这个简单的模块允许您为菜单项指定一些附加属性，例如 id、name、class、style 和 rel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T00:45:04.460

如果您对模块选项不满意，还可以查看[this](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7#comment-11474)。它与 drupal 中的许多其他模板内容相同，因此理解它真的不会造成任何伤害；）

# javascript - 用javascript循环表单循环？

> ID：14064148
> 
> 赞同：1
> 
> 时间：2012-12-28T03:16:31.173
> 
> 标签：javascript, forms, loops

我有这样的表格：

```
<form name="calc" action="" id="calc">
<?php for($i=0; $i<15; $i++) { ?>
<input type="text" name="txt1[$i]" onkeyup="calcNumber()"/>
<input type="text" name="txt2[$i]" onkeyup="calcNumber()"/>
<input type="text" name="txt3[$i]" onkeyup="calcNumber()"/>
<span id="tot[$i]"></span>
<?php } ?>
</form> 
```

这是javascript代码：

```
<script type="text/javascript">
function calcNumber() {

for(var j=0; j<15; j++) {

var totNumber[j] = document.calc.txt1[j].value + document.calc.txt2[j].value + document.calc.txt3[j].value;

document.getElementById('tot[j]').innerHTML = totNumber[j];
}

}
</script> 
```

没有错误..但也没有结果。请让我知道我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T03:18:19.653

将您的 html 修复为以下内容。

```
<input type="text" name="txt1[<?php echo $i;?>]" onkeyup="calcNumber()"/>
<input type="text" name="txt2[<?php echo $i;?>]" onkeyup="calcNumber()"/>
<input type="text" name="txt3[<?php echo $i;?>]" onkeyup="calcNumber()"/>
<span id="tot[<?php echo $i;?>]"></span> 
```

以及您的 javascript 的当前行：

`document.getElementById('tot[' + j + ']').innerHTML = totNumber;`

`totNumber`不是`array`，在这种情况下也不需要。

**问题**

您呈现的 html 正是您在问题中提供的 html，`$i`不会被数字替换，因为它不在`<?php ?>`标签内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T05:59:40.203

我已经解决了问题，只需在`tot`in之后插入数组`function calcNumber()`，而不是在`tot`.

非常感谢你们的帮助。

# c# - EF：使用typeid映射实体框架层次结构

> ID：14064151
> 
> 赞同：2
> 
> 时间：2012-12-28T03:17:17.250
> 
> 标签：c#, mysql, entity-framework, orm, hierarchy

我不断收到此错误消息：

**异常详细信息：MySql.Data.MySqlClient.MySqlException：“字段列表”中的未知列“Extent1.RuleType”**

## 我的映射：

```
public abstract class AlertRule
{
    private DateTime? _updateDateTime = DateTime.Now;

    [Key]
    public int Id { get; set; }

    public int TemplateId { get; set; }
    public virtual AlertRuleTemplate Template { get; set; }

    public string RuleType
    {
        get
        {
            if (Template == null)
                return null;
            return Template.Name;
        }
    }
}
public class AlertOutageRule:AlertRule
{
    public virtual List<AlertRuleOutage> AlertRuleOutages { get; set; }
}
public class AlertMissingRule:AlertRule{}
public class AlertMetadataRule:AlertRule{} 
```

* * *

```
 public DbSet<AlertRule> AlertRules { get; set; } 
```

* * *

```
 modelBuilder.Entity<AlertRule>()
            .Map<AlertOutageRule>(m => m.Requires("RuleType").HasValue("NewsOutage"))
            .Map<AlertMetadataRule>(m => m.Requires("RuleType").HasValue("NewsMetadata"))
            .Map<AlertMissingRule>(m => m.Requires("RuleType").HasValue("NewsMissing"));
            //.Property(m => m.TemplateId).HasColumnType("int");

        modelBuilder.Entity<AlertRule>().ToTable("AlertRule"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:40:58.657

定义为`public string RuleType`只读（否`set{..}`）。

EF 不会将此属性与数据库进行映射。查看您的数据库架构，它将仅生成 2 列（Id，TemplateId）

# file - 文件句柄变量？

> ID：14064152
> 
> 赞同：2
> 
> 时间：2012-12-28T03:17:57.497
> 
> 标签：file, vb6

当我使用这个时，我得到一个错误的记录号错误：

```
Put #filehandle, (i * 100) + x, buf(x) 
```

当文件句柄是一个整数时，我通过这个打开。

```
filehandle = FreeFile
Open (App.Path & "\" & BufferFileRootName & "A") For Binary As filehandle 
```

我该如何解决这个问题，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T03:25:19.763

您应该检查您正在使用的`i`和的值。`x`坏记录号`put`通常表示记录号小于或等于零。

如果您打印出`i`and的值`x`（以及该计算的结果），它应该有望告诉您出了什么问题。

请记住，记录编号是从 1 开始的，因此，如果您的变量`i`和`x`变量都为零，则会导致此问题。

# android - 如何在可绘制文件夹中的共享推特中添加图像？

> ID：14064160
> 
> 赞同：1
> 
> 时间：2012-12-28T03:18:52.457
> 
> 标签：android, twitter, sharing

我需要帮助将可绘制的文本和图像发布到 Twitter。下面是我的代码。我试过了，总是失败。有人可以帮帮我吗。

```
private void ShareTwitter(){
        if (campaign == null) {
            finish();
        }else {
        String message =rewardItemTextView.getText().toString()+" "+"#TEST";
        try {
          Intent sharingIntent = new Intent(Intent.ACTION_SEND);

          Uri uri = Uri.parse("content://com.tes.activities/bbq.png");
//            Uri uri = Uri.parse("file:///android_assets/bbq");
          sharingIntent.setType("image/*");
          sharingIntent.setClassName("com.twitter.android","com.twitter.android.PostActivity");
          sharingIntent.putExtra(Intent.EXTRA_TEXT, message );
          sharingIntent.putExtra(Intent.EXTRA_STREAM, uri);
          startActivity(sharingIntent);
        } catch (Exception e) {
            Intent i = new Intent();
            i.putExtra(Intent.EXTRA_TEXT, message);
            i.setAction(Intent.ACTION_VIEW);
            i.setData(Uri.parse("https://mobile.twitter.com/compose/tweet"));
            startActivity(i);        
        } 
```

# c# - 我可以为每个项目维护单独的弹簧配置文件吗？

> ID：14064168
> 
> 赞同：1
> 
> 时间：2012-12-28T03:19:32.370
> 
> 标签：c#, spring.net

场景：我已经将 spring.net 用于应用程序启动所需的基本配置/对象。这个 spring 配置文件和启动对象是 xxHost 项目的一部分。

问题：现在，我需要实例化项目 XXProvider 中的对象，而 xxHost 没有对 xxProvider 的任何引用。

作为代码示例：

```
//All object exist in xxProvider.csproj, and are used for internal logic
var runnerInstance = new FirstRunner(new List<IFieldMatcher>
                                           {
                                             GenericBuilder.Build("ProductId"),
                                             GenericBuilder.Build("IsReceiver"), 
                                             GenericBuilder.Build("QuantityUnit")
                                           });

//Need to remove this instantiation to a spring config file!!!!
//and to be able to write something like this...
var runnerInstance = SpringSettings.FirstRunnerInstance; 
```

有没有办法可以维护一个 csproj 专有的 spring 文件？有没有办法可以延迟加载一个单独的 spring 文件，该文件没有在应用程序启动时加载？

任何适当的文件/参考都会有所帮助。感谢您的关注！

# java - Dropbox 显示文件列表

> ID：14064170
> 
> 赞同：2
> 
> 时间：2012-12-28T03:19:48.413
> 
> 标签：java, android, dropbox-api

显示保管箱文件列表时遇到问题。当我从 dropbox 成功验证并获得访问令牌时，我设置了访问令牌`mDBApi.getSession().setAccessTokenPair(tokens);` ，然后它将停止在`Entry contact = mDBApi.metadata("/", 1000, null, true, null);`我调查关于 dorpbox 上显示文件列表的大量解决方案时，我无法找出与我的代码的区别。请帮我 ：（

```
public class DropBoxActivity extends Activity{
final static private String APP_KEY = "MyKey";
final static private String APP_SECRET = "MySecret";
final static private AccessType ACCESS_TYPE = AccessType.DROPBOX;
// In the class declaration section:
private DropboxAPI<AndroidAuthSession> mDBApi;
SharedPreferences sharedPref;

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);        

    setContentView(R.layout.activity_drop_box); 
    sharedPref = PreferenceManager.getDefaultSharedPreferences(this);

    // And later in some initialization function:
    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
    mDBApi = new DropboxAPI<AndroidAuthSession>(session);
    mDBApi.getSession().startAuthentication(this);
    Log.d("DbAuthLog", "OnCreateEnd");

}

@Override
protected void onResume(){
    super.onResume();
    AccessTokenPair tokens=null;  
    //return control
     if (mDBApi != null && mDBApi.getSession().authenticationSuccessful()) {
         try{
               //MANDATORY call to complete auth.
               //Sets the access token on the session
             mDBApi.getSession().finishAuthentication();

             tokens = mDBApi.getSession().getAccessTokenPair();              

             // Provide your own storeKeys to persist the access token pair
             // A typical way to store tokens is using SharedPreferences
             storeKeys(tokens.key, tokens.secret);

         }catch(IllegalStateException e){

             Log.i("DbAuthLog", "Error authenticating", e);
         } 

     }

     try {           

        Log.d("DbAuthLog", "step0");
        AccessTokenPair access = getStoredKeys();
        mDBApi.getSession().setAccessTokenPair(tokens);
        Entry contact = mDBApi.metadata("/", 1000, null, true, null);
        Log.d("DbAuthLog", "step1");
        List<Entry> CFolder = contact.contents;
        Log.d("DbAuthLog", "step2");
          for (Entry entry : CFolder) {
                Log.i("DbAuthLog", "Filename: " + entry.fileName());
          }
          Log.d("DbAuthLog", "OnResumeEnd");

    } catch(DropboxServerException e){
        Log.d("DbAuthLog", "DropboxServerException");
        e.printStackTrace();
    } catch(DropboxUnlinkedException e){
        Log.d("DbAuthLog", "DropboxUnlinkedException");
        e.printStackTrace();
    } catch (DropboxIOException e) {
        // TODO Auto-generated catch block
        Log.d("DbAuthLog", "DropboxIOException");
        e.printStackTrace();
    } catch (DropboxException e) {
        // TODO Auto-generated catch block
        Log.d("DbAuthLog", "DropboxException");
        e.printStackTrace();
    } catch (NullPointerException e){
        Log.d("DbAuthLog", "DropboxException");
    }

}

private void storeKeys(String key, String secret){

    Log.d("DbAuthLog", "storeKeys");
    sharedPref = this.getPreferences(Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString("key", key);
    editor.putString("secret", secret);
    editor.commit();
    Log.d("DbAuthLog", key);
    Log.d("DbAuthLog", secret);

} 
```

# javascript - 如何让 javascript 在 dom 和 css 准备好但没有图像时执行

> ID：14064171
> 
> 赞同：7
> 
> 时间：2012-12-28T03:19:49.383
> 
> 标签：javascript, domready

我想在 dom 和 css 准备好时执行一些 javascript，但我不关心图像（我倾向于延迟加载图像）

我知道如何检测 dom 就绪状态，但如何检测 css 就绪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:26:25.867

您应该使用该`document.ready`事件。`window.onLoad`当所有图像和其他图像完全加载时触发。

资料来源：[window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T09:23:15.150

在页面标题中和任何 JavaScript 之前上传所有 CSS。

将 JavaScript 放在标签之前的页面底部也是最佳实践，以确保首先完全加载所有元素。

```
$(document).ready(function(){
    // now do your actions
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T17:01:31.400

你需要像下面这样的东西。此函数在 DOM 加载后立即执行，但不是整个页面。页面加载和 DOM 加载之间有很多区别。

```
$(document).ready(
                 function(){
                            alert('DOM is now loaded and can be manipulated .');
                           }
                 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T22:00:07.897

这将是使用 JS onload 和首先加载所有 CSS 的组合。如果在加载任何脚本之前加载所有 CSS，则可以保证加载所有 CSS；在加载时结合 JS，你会得到你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T23:09:52.443

如果你不能使用**$(document).ready**技术，你可以把你的脚本代码放在 body 标签关闭之前。

```
<body>
html code....
....
<script>
var executeAfterDOMReady;
....
</script>
</body> 
```

至于 CSS，你可以通过 jQuery 调用你的 CSS 文件：

```
$("<link/>", { rel: "stylesheet", type: "text/css", href: "your.css"}).appendTo("head"); 
```

甚至进行 Ajax 调用：

```
$.ajax({
    url:"your.css",
    dataType:"script",
    success:function(data){
        $("head").append("<style>" + data + "</style>");
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T19:43:40.770

这里的人们发布了许多使用[jQuery 的 DOM 就绪功能的](http://api.jquery.com/ready/)示例——但他们没有提及或演示为了使用它，您需要包含 jQuery。

您可以直接使用 JavaScript 来完成您想要的工作——但该技术因浏览器而异，而 jQuery 总是在为您规范这些差异方面做得很好——我个人是一个 jQuery 人。可能永远都是:)

**在您的 HTML 文档的末尾`<head>`，包含 jQuery 库，然后是您的代码 :)**

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
    $(function(){
        console.log("DOM is Ready! Images haven't finished loading yet!");
    });
</script> 
```

jQuery`.ready()`函数的使用有多种形式。就个人而言，我喜欢上面的方法。下面这两个，似乎是最官方宽恕的。

```
$(document).ready(function(){  console.log("DOM Ready!");  });

$(function(){  console.log("DOM Ready!");  }); 
```

* * *

**[关于 jQuery 的文档`.ready()`](http://api.jquery.com/ready/)有这样的说法：**

> 虽然 JavaScript 在页面呈现时提供了用于执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。**当使用依赖 CSS 样式属性值的脚本时，在引用脚本之前引用外部样式表或嵌入样式元素很重要。**

我为您突出显示了文档中的引用，因为您提到您希望首先加载 CSS。从表面上看，你只需要确保你的`<link rel="stylesheet" href="style.css" />`标签放在你的 jQuery 代码**上面**`<head>`的部分:)

 **快乐编码！//追赶

*[jQuery.com](http://jquery.com/)*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-28T03:30:32.907

除非您使用 javascript 显式加载 css 文件，否则 javascript 无法判断您的 .css 文件是否已加载。这是我将如何做后者：

```
function dynamicallyLoadCss(fileName,callBackFunc){
    var fileRef=document.createElement("link");
    fileRef.setAttribute("rel", "stylesheet");
    fileRef.setAttribute("type", "text/css");
    fileRef.setAttribute("href", filename);

    if(callBackFunc) {
        callBackFunc();
    }
}
//Call the function like so...
dynamicallyLoadCss("mystyles.css", function() {
    console.log("Our hamsters have finished loading your mystyles.css file.");
}); 
```**

# jquery - 2 具有相同对象的 JQuery AJAX post req

> ID：14064174
> 
> 赞同：2
> 
> 时间：2012-12-28T03:19:59.417
> 
> 标签：jquery, ajax, node.js, post, express

我想要做的，确切地说，是这样的：

```
<form>
    <input type="button" class="btn btn-warning" id="follow" value="Follow">  
</form>
<script type="text/javascript">

 $('#follow').click(function(){  
      $.ajax({ 
        url: '/follow'
        , type: 'POST'
        , cache: false
        , data: { user: '<%= username %>' }
        , complete: function() {

         },

        success: function(data) {

        },

        error: function() {

           console.log('process error');

        },
   });

   $('#follow').attr('value', 'Following');  
   $('#follow').attr('id', 'unfollow'); 
 });   

 $('#unfollow').click(function(){  
      $.ajax({ 
        url: '/unfollow'
        , type: 'POST'
        , cache: false
        , data: { user: '<%= username %>' }
        , complete: function() {

         },

        success: function(data) {

        },

        error: function() {

           console.log('process error');

        },
   });

   $('#follow').attr('value', 'Follow');  
   $('#follow').attr('id', 'follow'); 
 });           

</script> 
```

第一个 post req 工作正常，但第二个 req 不行。当我按下按钮时，值不会改变，我也没有收到对应的 post req to `/unfollow`。这里有什么问题？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:31:06.093

您的事件绑定发生在第一次加载 DOM 时。当您动态更改 ID 时，不会导致绑定更改。你需要委托`on()`它才能工作。

```
$(".btn").on("click", "#follow", function() {...});
$(".btn").on("click", "#unfollow", function() {...}); 
```

另一种选择是*不*更改 ID。使用单个处理程序，并检查该值是否为 current`"Follow"`或`"Unfollow"`，并调用适当的 URL。

```
$("#follow").click(function () {
    if ($(this).val() == "Follow") {
        $(this).val("Unfollow");
        var url = "/follow";
    } else {
        $(this).val("Follow");
        var url = "/unfollow";
    }
    $.ajax( {
        url: url
        , type: 'POST'
        , cache: false
        , data: { user: '<%= username %>' }
        , complete: function() {
        },

        success: function(data) {
        },
        error: function() {
           console.log('process error');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:46:39.723

Barmar 是正确的，但您也没有正确引用您的 ID。

在将其更改为 #unfollow 之后，您正在寻找 #follow :)

这是您要执行的操作的示例。

```
$(document).ready( function(){

   $("body").on("click", "#follow", function(){
      $(this).val("Unfollow");  
      $(this).attr("id","Unfollow"); 
   });

   $("body").on("click", "#Unfollow", function(){
      $(this).val("Follow");  
      $(this).attr("id","follow"); 
   }); 

}); 
```

这[是在 Jsfiddle](http://jsfiddle.net/Gb9Xa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:00:34.847

更改 id 不是一个好主意。

您可以通过保持 id 相同并`value`在单击处理程序中测试来获得正确的效果，如下所示：

```
$('#follow').on('click', function(){
    if(this.value == 'Follow') {
        $.ajax({
            url: '/follow',
            type: 'POST',
            cache: false,
            data: { user: '<%= username %>' },
                complete: function() {
            },
            success: function(data) {
            },
            error: function() {
                console.log('process error');
            }
        });
        $(this).attr('value', 'Following'); 
    }
    else {
        $.ajax({ 
            url: '/unfollow',
            type: 'POST',
            cache: false,
            data: { user: '<%= username %>' },
            complete: function() {
            },
            success: function(data) {
            },
            error: function() {
                console.log('process error');
            }
        });
       $(this).attr('value', 'Follow'); 
    }
}); 
```

您可以简化为一个`$.ajax()`块，具体取决于成功/错误/完成功能的相似程度。

您可能还想在成功处理程序中移动更改#follow 值的语句。否则，按钮的值将至少在片刻内撒谎，如果发生 ajax 错误，则更长时间。

# multithreading - 模拟器如何处理翻译记忆障碍（隐式和显式）？

> ID：14064182
> 
> 赞同：5
> 
> 时间：2012-12-28T03:21:56.517
> 
> 标签：multithreading, emulation, virtual-machine, memory-barriers, lockless

假设源架构和目标架构不同，模拟器如何有效地转换内存屏障？我知道通常现代仿真器将使用 JIT 将源[ISA](http://en.wikipedia.org/wiki/Instruction_set_architecture)转换为目标 ISA，但是要知道哪些代码可以被多个程序计数器访问，哪些似乎不是很棘手，然后知道哪些指令可以安全地重新排序（由于 ISA 差异，JIT 可能需要生成一些有效的东西）并且这似乎不是非常棘手。

您甚至不能保证在指令流中找到显式的内存屏障，例如 x86 上的许多人依赖对齐的字写入是原子的。模拟器是否保守地假设*每个*对齐的单词写入都不能重新排序？这似乎是一个潜在的巨大开销，这让我想知道是否有任何已知的分析来解决这类问题。

# python - 如何通过在 BeautifulSoup 中匹配其属性中的文本来获取元素

> ID：14064186
> 
> 赞同：1
> 
> 时间：2012-12-28T03:22:43.133
> 
> 标签：python, beautifulsoup

我有这个代码

```
<a title="Next Page - Results 1 to 60 " href="bla bla" class="smallfont" rel="next">&gt;</a> 
```

我想抓住`a`元素并获得 href 。

如何将`title`属性与`Next Page`

我想部分匹配`a`元素标题属性中的文本。

页面上有很多`a`类似的标签，唯一的区别是`title`属性包含`"Next Page`或文本是`>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:24:54.540

你必须使用正则表达式来完成你想要的。

首先将整个标记作为一个字符串并`BeautifulSoup`用它创建一个对象。

然后使用对象的`.findAll`方法`BeautifulSoup`如下

```
import BeautifulSoup
import re

soup = BeautifulSoup('<a title="Next Page - Results 1 to 60 " href="bla bla" class="smallfont" rel="next">&gt;</a>')

elements = soup.findAll('a', {'title':re.compile('Next Page.')}) 
# get all 'a' elements with 'title' attribute as 'Next Page something' into a list

for e in elements:
    if str(e.string) == '>' or e.string == '&gt;': # check if string inside 'a' tag is '>'
        print e['href'] 
```

# .net - 使用 string.text.contains 时如何忽略大小写？

> ID：14064189
> 
> 赞同：23
> 
> 时间：2012-12-28T03:23:18.530
> 
> 标签：.net, vb.net, string

我试图弄清楚如何在使用.text.contains 忽略大小写的同时检查一个字符串是否包含另一个字符串。

就目前而言，如果我这样做：

```
 Dim myhousestring As String = "My house is cold"
    If txt.Text.Contains(myhousestring) Then
    Messagebox.Show("Found it")
    End If 
```

只有在完全相同的情况下才会返回匹配项。因此，如果用户键入“我的房子很冷”，则不会匹配。

我怎样才能做到这一点？如果不可能，我可能只使用正则表达式而不是忽略大小写。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-28T03:29:11.487

根据[微软](http://msdn.microsoft.com/en-us/library/ms224424.aspx)`IndexOf`的说法，您可以使用而不是在字符串中进行不区分大小写的搜索`Contains`。因此，当`IndexOf`方法的结果返回大于 的值`-1`时，表示第二个字符串是第一个字符串的子字符串。

```
Dim myhousestring As String = "My house is cold"
If txt.Text.IndexOf(myhousestring, 0, StringComparison.CurrentCultureIgnoreCase) > -1 Then
    Messagebox.Show("Found it")
End If 
```

[您还可以使用StringComparison](http://msdn.microsoft.com/en-us/library/system.stringcomparison.aspx)的其他不区分大小写的变体。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-28T03:27:37.443

我不是 vb.net 程序员，但根据[Microsoft](http://support.microsoft.com/kb/312897)的说法，您可以使用字符串方法`ToUpper()`或`ToLower()`. 然后，您可以将其与`"my house is cold"`or进行比较`"MY HOUSE IS COLD"`。

```
Dim myhousestring As String = "MY HOUSE IS COLD"
If txt.Text.ToUpper.Contains(myhousestring) Then
    Messagebox.Show("Found it")
End If 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-08T14:16:16.260

我个人只是使​​用过：

```
item.Text.ToLower().Contains("my house is cold") 
```

您也可以使用 ToUpper。

警告：如果您要比较土耳其语或其他语言，ToLower() 和 ToUpper() 还带有一个选项参数，用于“CultureInfo”，允许您确保正确处理不同的语言。您可以使用上述解决方案，或者您可以按照 Microsoft 的 ToLower 文档中的步骤添加 CultureInfo，以获取您将要尝试操作的语言的 ToLower 上下文。

[ToLower() 与 CultureInfo 文档](https://msdn.microsoft.com/en-us/library/s8z5yt00(v=vs.110).aspx "ToLower(cultureInfo) 文档")

[ToUpper() 与 CultureInfo 文档](https://msdn.microsoft.com/en-us/library/24kc78ka(v=vs.110).aspx/ "ToUpper() 与文化信息文档")

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-27T10:01:44.673

我用 .toUpper 解决了这个问题

例如：

```
Dim UGroup as String = dr.Item(2).ToString().ToUpper
Dim s as String = ds.Item(1).ToString.ToUpper

If s.Contains(UGroup) then MsgBox("Well done!")
Else 
End Sub 
```

与 .toLower 相同的过程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T22:56:16.097

这就是我解决使 String.Contains 不区分大小写的问题的方法。

```
Dim s as string = "My HoUsE iS cOlD".ToUpper

If s.Contains("MY HOUSE IS COLD") Then Exit Sub 
```

对于我的特定问题，我正在检查的字符串位于 TextBox 中。

我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-30T02:00:33.080

或者你可以像这样使用正则表达式。

首先，导入正则表达式：

```
Imports System.Text.RegularExpressions 
```

然后试试这个代码：

```
Dim match As Match = Regex.Match(Textbox1.text,"My house is cold",RegexOptions.IgnoreCase)
If match.Success Then
   Msgbox(match.Value)
End If 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-23T13:50:07.927

那这个呢？

```
<Runtime.CompilerServices.Extension>
Function InStr(s As String, find As String) As Boolean
    Return s.ToLower.Contains(find.ToLower)
End Function 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-23T13:36:18.840

使用 InStr 示例。如果以太比较什么都不是，“包含”失败。

'如果我们发现了什么...

```
If InStr(1, value, search, vbTextCompare) > 0 Then

Beep

End If   

                                               ' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-10T13:37:12.537

我使用下面的代码来搜索/确认 TEXTBOX1 中的字符串是否在“c:\testsearch.txt”中。

```
 Imports System.IO

Private Function sinf(path As String, match As String) As Boolean 
    Dim s As String = File.ReadAllText(path).ToLower
    Return s.Contains(match.ToLower)
End Function

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim st As String
    st = TextBox1.Text
    If sinf("c:\testsearch.txt", st) = True Then 
        MsgBox("Found if")
    Else
        MsgBox("Try again")
    End If
End Sub 
```

# perl - 使用 perl 中的 WWW::Mechanize 模块从网页中提取一行

> ID：14064190
> 
> 赞同：1
> 
> 时间：2012-12-28T03:23:30.357
> 
> 标签：perl, perl-module, www-mechanize

这是我来自网页的示例数据

```
<hr>
<h4>This is Second line</h4>
Some Text Here<br>
Some More Text Here<br>

<h4>This is First line</h4>
Mem Capacity : 130.65 MB<br>
Mem Used : 74.52 MB<br>
Mem Available : 56.13 MB<br>
Mem Used Percentage : 57<br> 
```

我正在使用以下代码来提取类似

```
Mem Capacity : 130.65 MB
Mem Used : 74.52 MB
Mem Available : 56.13 MB
Mem Used Percentage : 57 
```

代码如下：

```
#!/usr/bin/perl
 use WWW::Mechanize;

 $mech = WWW::Mechanize->new();
 $url = 'some url';
 $result = $mech->get( $url );
 $content = $result->as_string();
 print $content;
 if($content =~ /Mem Capacity :([\d.]+)/)
 {
 $value = $1;
 print "Memory Capacity $value MB n";
 } 
```

我没有得到任何输出。谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:19:06.597

试试这个 - if($content =~ /Mem\s*Capacity\s*:\s*(\d+(.\d+)?)/i )

# hadoop - 如何将文本文件加载到存储为序列文件的 Hive 表中

> ID：14064193
> 
> 赞同：30
> 
> 时间：2012-12-28T03:24:48.283
> 
> 标签：hadoop, hive

我有一个存储为序列文件的配置单元表。

我需要将一个文本文件加载到这个表中。如何将数据加载到此表中？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-28T23:56:37.683

您可以将文本文件加载到文本文件 Hive 表中，然后将该表中的数据插入到您的序列文件中。

从制表符分隔的文件开始：

```
% cat /tmp/input.txt
a       b
a2      b2 
```

创建序列文件

```
hive> create table test_sq(k string, v string) stored as sequencefile; 
```

尝试加载；正如预期的那样，这将失败：

```
hive> load data local inpath '/tmp/input.txt' into table test_sq; 
```

但是有了这张表：

```
hive> create table test_t(k string, v string) row format delimited fields terminated by '\t' stored as textfile; 
```

负载工作得很好：

```
hive> load data local inpath '/tmp/input.txt' into table test_t;
OK
hive> select * from test_t;
OK
a       b
a2      b2 
```

现在从文本表加载到序列表中：

```
insert into table test_sq select * from test_t; 
```

*也可以使用覆盖*进行加载/插入以替换所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T21:15:37.807

您不能直接创建存储为序列文件的表并将文本插入其中。你必须这样做：

1.  创建存储为文本的表格
2.  将文本文件插入到文本表中
3.  执行 CTAS 以创建存储为序列文件的表。
4.  如果需要，删除文本表

例子：

```
CREATE TABLE test_txt(field1 int, field2 string)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t';

LOAD DATA INPATH '/path/to/file.tsv' INTO TABLE test_txt;

CREATE TABLE test STORED AS SEQUENCEFILE
AS SELECT * FROM test_txt;

DROP TABLE test_txt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T19:14:36.447

简单的方法是将表创建为文本文件并将文件移动到适当的位置

CREATE EXTERNAL TABLE mytable(col1 string, col2 string)
以“|”结尾的行格式分隔字段 存储为文本文件；

将文件复制到创建表的 HDFS 位置。
希望这可以帮助！！！

# html - 强制将字母和数字放入带有连字符分隔符的字段中

> ID：14064195
> 
> 赞同：3
> 
> 时间：2012-12-28T03:25:14.753
> 
> 标签：html, hyphen

请看下面的图片

[http://i50.tinypic.com/2cohfeo.jpg](http://i50.tinypic.com/2cohfeo.jpg)

我需要帮助在图像中插入 4 个特征的代码，从而形成新的 html 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:36:16.893

使用 javascript 和 jquery（如果您使用的是常规 javascript，我认为您需要使用 getElementById，Google 它）并假设您的文本框名为“text”：

[http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

```
$('input[name=text]').keydown(function(event)
{
    var text = this.val().replace("-",""); //get current text, take out the -
    var strlength = text.length;

    if (strlength >=10) //reached max length, ignore character        
    {
        return false; // might be event.preventDefault();
    }
    else if (strlength<5) //you want a letter
    {
        //if not a letter, cancel input
        if (!(/^[a-zA-Z]+$/.test(String.fromCharCode(event.which))) return false;
    }
    else if (strlength>=5) //you want a letter
    {
        //if not a number, cancel input
        if (!(/^[0-9]+$/.test(String.fromCharCode(event.which))) return false;
        else if (strlength==5) this.val(text + "-"); //Add the hyphen
    }
}); 
```

可能需要代码来处理退格，但应该是不言而喻的/解释性的

# objective-c - 我们可以有实现的协议吗？

> ID：14064199
> 
> 赞同：2
> 
> 时间：2012-12-28T03:26:35.543
> 
> 标签：objective-c, protocols

我想设置一个单例协议。实现该协议的类将支持 +(id) 单例

显然我会实现那个单例方法。一次又一次地重新实施同样的事情是一种浪费。

我可以使用继承，我已经知道该怎么做，但是一个类只能有一个父级，使用继承听起来有点矫枉过正。基本上我只会将单例存储在 NSMutableDictionary 中，其键是相应类的 NSStringFromClass。我想知道为什么没有人这样做。这与我[在 Objective-c 中使用的技术相同，我们如何拥有一个范围是整个类的变量（但不包括子类）](https://stackoverflow.com/questions/13738109/in-objective-c-how-can-we-have-a-variable-whose-scope-is-the-whole-class-but-do)

```
#import "BGSuperSingleton.h"

static NSMutableDictionary * allTheSingletons;
@implementation BGSuperSingleton

+(id) singleton1
{
    NSString* className = NSStringFromClass([self class]);

    id result = allTheSingletons[className];

    if (result==nil)
    {
        result = [[[self class] alloc]init];
        allTheSingletons[className]=result;
    }
    return result;
}

@end 
```

我可以使用类别。但是，类别几乎适用于任何课程。我可以限制我所有的单例都属于 SuperSingleton 类，但这会破坏目的

我可以使用协议。现在这太棒了。但是，协议没有实现。协议只声明一个类可以做的方法。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:38:48.890

> 所以我该怎么做？

你应该重新考虑你的设计。听起来您想在许多不同的类中采用此协议，以便您可以拥有每个类的共享实例。这些对象真的*需要*单例吗？*共享对象和不能*多次实例化的类之间存在区别。

考虑创建一个作为所有其他类的工厂的类。该类可以维护共享对象的字典，并且您可以简单地指出始终使用工厂来实例化其他类。实际上，您可以编写其他类，以便直接实例化它们会引发异常或其他东西。

# web - 重定向与重写？

> ID：14064200
> 
> 赞同：0
> 
> 时间：2012-12-28T03:26:44.533
> 
> 标签：web, websphere

我正在尝试配置 sunone webserver 6.1 配置文件`obj.conf`

我想要的是：

1.  我要求`http://www.test.com/aaa/a.htm`
2.  我收到`http://www.test.com/bbb/b.htm`

我`obj.conf`这样配置

`NameTrans fn="redirect" from="/aaa/a.htm" url="http://www.test.com/bbb/b.htm"`

`a.htm`这确实有效，但互联网浏览器地址栏从`b.htm`

我希望地址栏不改变。

如果我尝试重写属性，地址不会改变？并且有没有办法在 Sunone 网络服务器上使用重写属性，或者只有在服务器上才有可能。

首先什么是重定向、重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:41:10.140

**重定向**是一个 301 错误，这意味着该页面不再存在并将重定向到不同的页面*（更改 url）*
**重写**只是一个影子 URL，可用于调用不同的 URL *（不更改 url）*

[如何让 sun 网络服务器从 / 重定向](https://stackoverflow.com/questions/63295/how-do-i-get-sun-webserver-to-redirect-from)

# ios - OpenGL ES 中 glOrthof() 的非常简单的解释

> ID：14064202
> 
> 赞同：1
> 
> 时间：2012-12-28T03:27:09.690
> 
> 标签：ios, opengl-es

我在glOrthof的互联网上看到了一些以前的帖子和解释，但我就是不明白。我正在观看 Youtube 上的斯坦福 OpenGL ES 课程，出现了以下代码：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrthof(0, backingWidth, 0, backingHeight, -1, 1); 
```

此代码在屏幕的左下角绘制了 1px x 1px 的图片。为什么它会这样做呢？我认为这段代码将从 (0,0) 获取图片并将其拉伸到整个屏幕，因为它将平面指定为从 0 到屏幕宽度以及从 0 到屏幕高度。有人可以尽可能简单地解释为什么它在左下角将其绘制为 1px x 1px。完整的源代码可以在标有“openGLtransforms.zip”的斯坦福网站上找到：

[源代码网站](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/node/79)

（这段代码出现的文件是ES1Renderer.m）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:31:58.110

不，glortho 将这些内容“映射”到屏幕中，使屏幕中心成为这些平面的中心。因此，如果在给定 glortho 调用的情况下将对象放置在 (0,0,0) 处，则该对象将被放置在场景的角落。使平面从 -backingWidth/2 变为 +backingWidth/2 和 -backingHeight/2 变为 backingHeight/2 可能更有用。你的对象有多大？你的 zFar 平面离 zNear 太近了，你的物体适合那个空间吗？

# ms-access - Microsoft Access VBA - 运行时错误“3075”

> ID：14064203
> 
> 赞同：6
> 
> 时间：2012-12-28T03:27:10.057
> 
> 标签：ms-access, vba, ms-access-2003

我遇到了运行时错误“3075”。我是VBA的新手！>.< 我能知道哪里出错了吗？我解决不了...

例如，如果我在文本框 (txtMainName) 中输入名称“Sally”，则在单击搜索按钮时会弹出错误。

错误：

运行时错误“3075”：

查询表达式中的语法错误（缺少运算符）“和 [主申请人姓名] 像 'Sally'”。

```
Public Sub Search_Record()

Dim stDocName As String
Dim stLinkCriteria As String
Dim stLinkCriteria1 As String
Dim stLinkCriteria2 As String

    stLinkCriteria = ""
    stDocName = "frmDisplayInfo"

    If (Me!txtMainName <> "") Then
        stLinkCriteria1 = "[Main Applicant Name] Like ' " & Me![txtMainName] & "'"
        stLinkCriteria = stLinkCriteria & " And " & stLinkCriteria1
    End If

    If (Me!txtIDNo <> "") Then
        stLinkCriteria2 = "[ID No] Like ' " & Me![txtIDNo] & "'"
        stLinkCriteria = stLinkCriteria & " And " & stLinkCriteria2
    End If

    '(*This part is highlighted*)
    DoCmd.OpenForm stDocName, , , stLinkCriteria
    DoCmd.Maximize

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T03:45:57.380

`Runtime error 3975`是`Invalid operator`，根据一个快速的谷歌搜索`access vba runtime error 3075`（你可以自己做）。

问题是您只分配了`""`to的值`stCriteria`。如果第一个`if`语句执行，`stCriteria`则分配 的值`stCriteria AND stCriteria1`，这是无效的。

`if`如果执行第二条语句，也会发生同样的事情。（实际上，如果两者都实际运行，则`stCriteria`now contains `AND stCriteria1 AND stCriteria2`，这就更糟了。）

解决方案是修改您的代码以仅在`AND`需要时添加：

```
stLinkCriteria = ""
stDocName = "frmDisplayInfo"

If (Me!txtMainName <> "") Then
    stLinkCriteria = "[Main Applicant Name] Like ' " & Me![txtMainName] & "'"
End If

If (Me!txtIDNo <> "") Then
    If stLinkCriteria <> "" then
        stLinkCriteria = stLinkCriteria & " AND "
    End If
    stLinkCriteria2 = "[ID No] Like ' " & Me![txtIDNo] & "'"
    stLinkCriteria = stLinkCriteria & " And " & stLinkCriteria2
End If 
```

为了将来参考，解决这类问题的方法是在`stCriteria`导致错误的行（这里是`DoCmd.OpenForm`行）执行之前实际检查变量的值（在这种情况下）。为此，您可以在发生错误的行上设置断点，运行您的应用程序直到遇到断点，然后检查变量的值。这会*准确地*向您显示变量包含的内容，这可以揭示问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T04:02:27.627

从逻辑上看，您的 stLinkCriteria 似乎以“and”开头，这导致了错误：

你可能应该把：

```
If (Me!txtMainName <> "") Then

    stLinkCriteria1 = "[Main Applicant Name] Like ' " & Me![txtMainName] & "'"

    if stLinkCriteria <> "" then                   <==== add this

       stLinkCriteria = stLinkCriteria & " and "   <==== and this

    end if                                         <==== and this

    stLinkCriteria = stLinkCriteria & stLinkCriteria1  <=== change this

End If 
```

希望可行 - 否则，逻辑看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-25T20:31:48.997

我从点和字段名称之间的额外空格中收到此错误：

```
DoCmd.RunSQL "UPDATE  cp  INNER JOIN [char_lib] ON [cp]. [library_id]  = [char_lib].[id] set.. 
```

微软注意：请创建更精确和有用的错误消息。谢谢。我毫不怀疑你会做对的。

# c++ - 如何使用 taglib 编写 id3v2.3

> ID：14064204
> 
> 赞同：2
> 
> 时间：2012-12-28T03:27:28.333
> 
> 标签：c++, taglib, id3v2

当我使用 taglib 将 id3v2 标签写入 mp3 时，taglib 默认写入 id3v2.4。但是在windows上，媒体播放器和资源管理器无法解析它。

我怎么能解决这个问题？

像这样的代码：

```
TagLib::MPEG::File* mpegfile//i've already new the instance
TagLib::ID3v2::Tag* id3v2tag = mpegfile->ID3v2Tag();
id3v2tag->setTitle("taylor swift");
mpegfile->save; 
```

标头版本是 id3 v2.4 但我想另存为 id3 v2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-02T01:47:26.650

的`save`方法`MPEG::File`有几个像这样的重载：

```
bool save(int tags, bool stripOthers, int id3v2Version); 
```

因此，您最好不要简单地打电话`mpegfile->save;` ，而是

```
mpegfile->save( TagLib::MPEG::File::AllTags, true, 3); 
```

对于每个重载，请参阅[源文件](https://github.com/taglib/taglib/blob/master/taglib/mpeg/mpegfile.h)

# node.js - 如何映射数据以便我可以使用它来生成饼图？

> ID：14064208
> 
> 赞同：4
> 
> 时间：2012-12-28T03:28:06.930
> 
> 标签：node.js, express, d3.js

我想知道如何映射 2 个数组的数据，以便我可以使用数据生成使用 d3.js 的图表

当前我有2个数组：

```
wordsArray = {"THE","MAIN","PURPOSE","OF","PHOTOSYNTHESIS","IS","TO","MAKE",
             "FOOD","FOR","PLANT","IT","PRODUCE","SUGAR","MANUFACTURE"};
computationArray = {6,1,2,2,1,3,3,1,3,4,4,2,1,2,1}; 
```

wordsArray 包含所有不同的单词，而 computingArray 包含每个单词出现的次数。

我想知道是否有任何捷径可以使它看起来像这样：

```
var data = [{"words":"THE", "count": "6"}, 
{"words":"MAIN", "count": "1"}, {"words":"PURPOSE", "count": "2"}, 
{"words":"OF", "count": "2"}.... ]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:36:10.717

您正在寻找的是d3中的[zip功能：](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_zip)

```
d3.zip(wordsArray, computationArray).map(function(e) {
    return { words: e[0], count: e[1] };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:31:44.403

快捷方式称为[underscore.js](http://underscorejs.org/)

npm 安装下划线

使用那个好的库你可以做：

```
var data = _.map(_.zip(wordsArray, computationArray), function(v){
   return {words: v[0], count: v[1]};
}); 
```

# php - 在while循环中分配变量值的替代方法？

> ID：14064211
> 
> 赞同：1
> 
> 时间：2012-12-28T03:28:51.393
> 
> 标签：php, pdo

我目前习惯于在查询中使用 while 循环来为稍后在代码中使用的变量分配值。有时，这会变得很荒谬，因为我使用了一大堆 while 循环来汇集我需要的所有变量，从而将数据库中几个不同表的所需输出组合在一起。我对 php 还是很陌生，我想我已经开始掌握 pdo 的窍门了。但是，我不知道有比这更好的方法来为我的变量分配所需的值。下面的代码是我所说的一个非常简短的示例，只是为了清楚起见，以防我的英语很差。下面的代码是垃圾，但是一个例子。我非常感谢对此的任何建议、方向或见解。谢谢一米！

```
<?php
$stmt = $core->dbh->prepare("SELECT `user` FROM `buddies` WHERE `id` = ?");
        $stmt->bindParam(1, $id);
        $stmt->execute(); $u = ""; $fname = ""; $lname = ""; $burger = "";
        while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            $u = $row['user'];
            $stm = $core->dbh->prepare("SELECT fname,lname FROM `users` WHERE id = ?");
            $stm->bindParam(1, $u);
            $stm->execute();
            while ($rot = $stm->fetch(PDO::FETCH_ASSOC)){
                $fname = $rot['fname']; $lname = $rot['lname'];
                $st = $core->dbh->prepare("just another query that uses the last values assigned to variables returns")
                                $st->bindParam(1, $variable)
                                $st->execute
                                $burger = $st->fetchColumn();
            }//end of the second while loop of this function
        } //end of while statement 

echo $u." - ".$fname." ".$lname." text: ".$burger;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:37:19.077

使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en//join.html)。

例如，合并您的前两个查询，例如

```
 SELECT buddies.user, users.fname, users.lname FROM buddies JOIN users ON buddies.id=users.id 
```

根据场景，您可能仍需要使用变量分配。但绝对可以减少 while 循环的数量。如果表最有可能具有公共字段，则您在那里有一个关联，并且 JOIN 是要走的路。

# ruby-on-rails - Rails send_file 来自 Paperclip 的多种样式，如何避免代码重复？

> ID：14064218
> 
> 赞同：1
> 
> 时间：2012-12-28T03:29:44.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我在关联模型中使用的默认代码，用于从 Paperclip 下载图像作为 save_to。

**月控制器**

```
def download
  @wallpaper = Wallpaper.find(params[:wallpaper_id])
  @month = @wallpaper.months.find(params[:id])

  send_file @month.wallpaper_picture.path,
              :filename => @month.wallpaper_picture_file_name,
              :type => @month.wallpaper_picture_content_type,
              :disposition => 'attachment'
end 
```

**路线**

```
resources :wallpapers do  
  resources :months  
end  
match 'wallpaper/:wallpaper_id/download/:id' => 'months#download', :as => :download 
```

**查看/月/索引**

```
- @months.each do |month|  
  = link_to 'default', download_path(month.wallpaper_id, month.id) 
```

* * *

但是我的应用程序在我的模型中声明了近 6 种不同样式的回形针，并且每种样式都必须是可下载的。为此，我这样做了（我将仅显示 6 个代码块中的 2 个）：

**月控制器**

```
 def download_iphone4
    @wallpaper = Wallpaper.find(params[:wallpaper_id])
    @month = @wallpaper.months.find(params[:id])

    @month = 'public/system/wallpaper_pictures/' + @month.id.to_s + '/iphone4/' + @month.wallpaper_picture_file_name
    send_file @month,
              :disposition => 'attachment'
  end

  def download_iphone5
    @wallpaper = Wallpaper.find(params[:wallpaper_id])
    @month = @wallpaper.months.find(params[:id])

    @month = 'public/system/wallpaper_pictures/' + @month.id.to_s + '/iphone5/' + @month.wallpaper_picture_file_name
    send_file @month,
              :disposition => 'attachment'
  end 

  def download_ipad ...
  def download_1440 ...
  def download_1680 ...
  def download_1920 ...
  etc ... 
```

**路线**

```
match 'wallpaper_pictures/:wallpaper_id/iphone4/:id' => 'months#download_iphone4', :as => :download_iphone4  
match 'wallpaper_pictures/:wallpaper_id/iphone5/:id' => 'months#download_iphone5', :as => :download_iphone5  
match 'wallpaper_pictures/:wallpaper_id/ipad4/:id' => 'months#download_ipad', :as => :download_ipad  
match 'wallpaper_pictures/:wallpaper_id/1440/:id' => 'months#download_1440', :as => :download_1440  
match 'wallpaper_pictures/:wallpaper_id/1680/:id' => 'months#download_1680', :as => :download_1680  
match 'wallpaper_pictures/:wallpaper_id/1920/:id' => 'months#download_1920', :as => :download_1920 
```

**观看次数/月/索引**

```
- @months.each do |month|  
     = link_to 'iphone4', download_iphone4_path(month.wallpaper_id, month.id) 
     = link_to 'iphone5', download_iphone5_path(month.wallpaper_id, month.id) 
     = link_to 'ipad', download_ipad_path(month.wallpaper_id, month.id) 
     = link_to '1440', download_1440_path(month.wallpaper_id, month.id) 
     = link_to '1680', download_1680_path(month.wallpaper_id, month.id) 
     = link_to '1920', download_1920_path(month.wallpaper_id, month.id) 
```

我的问题来了：
**1）**我可以用更清洁/更好的方式来做吗？
**2）**我必须将块从我的控制器移动到模型或新控制器吗？
**3）**在代码的第一个和默认方法中，有一些哈希值，例如：

```
:filename => @month.wallpaper_picture_file_name,  
:type => @month.wallpaper_picture_content_type 
```

但在另一种方法中，我意识到我不需要使用它们。这些哈希是必要的吗？
**4）**我称它们为“哈希器”。这是正确的吗？还有什么更正吗？

* * *

PD：如果 send_file 在 Production 中失败，将其更改为 send_data 或
在 config/production.rb 中注释掉这一行

```
config.action_dispatch.x_sendfile_header = "X-Sendfile" 
```

[send_file 只是发送一个空文件](https://stackoverflow.com/questions/3456166/send-file-just-sends-an-empty-file)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:18:51.793

**将您的控制器**代码重构为：

```
def download_iphone4
  send_file (myfile params, :iphone4), :disposition => 'attachment'
end

def download_iphone5
  send_file (myfile params, :iphone5), :disposition => 'attachment'
end 

def download_ipad ...
def download_1440 ...
def download_1680 ...
def download_1920 ...

private 

def myfile params, style
  @wallpaper = Wallpaper.find(params[:wallpaper_id])
  @month = @wallpaper.months.find(params[:id])
  'public/system/wallpaper_pictures/' + @month.id.to_s + "/#{style}/" +@month.wallpaper_picture_file_name
end 
```

* * *

或者，您可以使用您的路线修改和控制器进一步干燥：

**路线.rb**

```
match 'wallpaper/:wallpaper_id/download/:id/:style' => 'months#download', :as => :download 
```

**控制器**

```
def download
  send_file (myfile params), :disposition => 'attachment'
end 

private 

def myfile params
  @wallpaper = Wallpaper.find(params[:wallpaper_id])
  @month = @wallpaper.months.find(params[:id])
  'public/system/wallpaper_pictures/' + @month.id.to_s + "/#{params[:style]}/" +@month.wallpaper_picture_file_name
end 
```

并从您的视图中生成路径，例如：

```
 = link_to 'iphone4', download_path(month.wallpaper_id, month.id,'iphone4') 
 = link_to 'iphone5', download_path(month.wallpaper_id, month.id,'iphone5') 
```

在上述两种情况下，您都可以将您的私有方法相应地移动到壁纸/月模型。

* * *

> 3）在代码的第一个和默认方法中，有一些哈希值，例如：
> 
> :filename => @month.wallpaper_picture_file_name, :type => @month.wallpaper_picture_content_type
> 
> 但在另一种方法中，我意识到我不需要使用它们。这些哈希是必要的吗？

:filename 让您可以控制作为附件发送的文件的文件名，您可以修改它并提供与实际文件不同的文件名。默认情况下，它将以其实际文件名返回附件。

:type 再次以类似方式工作，您可以将其强制为其他内容类型；但是它不会有太大影响，因为您已经将文件呈现为附件。

它们不是散列，它们是散列的键、值，或者在这里可以简单地视为属性。

# objective-c - iOS：以逐渐增加的速度开火方法

> ID：14064220
> 
> 赞同：1
> 
> 时间：2012-12-28T03:30:09.043
> 
> 标签：objective-c, ios, cocoa-touch, gamekit

我的游戏每秒播放一次滴答作响的时钟声。我希望声音在整个游戏过程中慢慢加快。我最初的想法是使用 NSTimer 并在方法触发时更新速度，如下所示：

```
static float soundDelay = 1.0;
timer = [NSTimer scheduledTimerWithTimeInterval:clickClackDelay
                                                     target:self
                                                   selector:@selector(playSound)
                                                   userInfo:nil
                                                    repeats:YES];

- (void)playSound {
    soundDelay -= 0.1;
    NSLog(@"Play sound");
} 
```

这没有用，而且似乎 NSTimer 并不是真的要以这种方式使用。关于我如何做到这一点的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:42:42.447

不要使用同一个定时器`-playSound`重复调用。相反，使用计时器调用该方法一次，然后创建一个具有更短延迟的新计时器。例如，您可以`-playSound`自己创建计时器，以便每次`-playSound`调用时都会创建一个新计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:49:34.113

`playSound`您可以通过从自身调用方法来实现它。您可以通过以下方式进行操作。

```
- (void)playSound
{
   static float soundDelay = 1.0;
   if([timer isValid])
   {
     [timer invalidate];
     timer = nil;
   }
   timer = [NSTimer scheduledTimerWithTimeInterval:clickClackDelay
                                                     target:self
                                                   selector:@selector(playSound)
                                                   userInfo:nil
                                                    repeats:NO];
    soundDelay -= 0.1;
    if(soundDelay <=0)   //when sound delay is zero invalidate timer
    {
       [timer invalidate];
       timer = nil;
    }
    NSLog(@"Play sound");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:48:19.097

为此，您应该重新安排另一个计时器。

```
- (void)playSound {
    static float soundDelay = 1.0;
    [NSTimer scheduledTimerWithTimeInterval:soundDelay
                                                     target:self
                                                   selector:@selector(playSound)
                                                   userInfo:nil
                                                    repeats:NO];
    if (soundDelay > 0.1) {
        soundDelay -= 0.1;
    }
    NSLog(@"Play sound");
} 
```

ps 你可能想添加一个终止条件。

# php - 具有数组内容的字符串到新数组php

> ID：14064225
> 
> 赞同：-4
> 
> 时间：2012-12-28T03:30:33.283
> 
> 标签：php, arrays, string, function

我在 html 中有一个表单，它将采用一个巨大的字符串，然后用空格、逗号和一个空格分隔，并且每个项目都用引号括起来，如下所示：

```
$s = '"info1" , "info2"'; //and so on 
```

所以我的问题是如何创建一个新的数组变量并将字符串中的信息设置为数组中的信息？基本上是这样的：

```
$array_ex = array("info1", "info2"); //of course there is going to be
                                     //way more than 2 items 
```

是否可以？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T03:31:58.740

```
$s = '"info1" , "info2"' //and so on

$array = explode(",",$s);

print_r($array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:12:15.780

explode 函数用于从具有特定分隔符的字符串生成数组。

作为上述问题的解决方案，您需要使用 explode 函数从用逗号分隔的字符串生成数组

例如

```
 $a=explode(",",$string); 
```

有关爆炸功能的更多详细信息，请参阅以下网址中提到的文档

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

# java - 为什么盐应该与散列值具有相同的长度？

> ID：14064227
> 
> 赞同：6
> 
> 时间：2012-12-28T03:30:48.400
> 
> 标签：java, security, passwords

我已经读过将要使用的盐应该与散列密码具有相同的长度，这背后的原因是什么？它会增加密码保护吗？[我在这里](http://crackstation.net/hashing-security.htm)读过 ：

> 为了使攻击者无法为每个可能的盐创建查找表，盐必须很长。一个好的经验法则是使用与散列函数的输出大小相同的盐。例如，SHA256 的输出是 256 位（32 字节），所以 salt 应该至少是 32 个随机字节。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-28T03:45:13.850

[这里](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)很好地描述了为什么需要密码盐。

不，您不需要您的盐与密码的长度相同。事实上，文章中列出的所有实现都没有这样做。通常，对于每添加一点盐，您都需要攻击者将其存储预算翻倍。

因此，对于当今的技术水平，拥有 10 字节的盐应该足够了。另请注意，盐是二进制值，而密码不是，因此盐长度应以位/字节而不是字符为单位测量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T03:54:48.837

盐没有特别需要那么长，尽管它肯定不会伤害。

[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)应该满足的唯一真正要求是它应该是全局唯一的。即使这也不是*硬性*要求，因为拥有一些重复的盐并不能真正帮助攻击者。只有当你得到*很多*重复时，盐才会开始失去效力。

特别是，由于[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)，如果盐是随机选择的，理想情况下它们应该至少有 2·log [2] ( *n* ) 位长，其中*n*是您期望拥有的最大用户数（或者更一般地说，最大您希望使用您选择的散列方法的用户数量）。当然，在此之上保留一些安全边际总是一个好主意。

特别是，地球的总人口略多于 2 ^(32)。这意味着，即使地球上的每个人都为您的系统注册了一个帐户，64 位的 salt 仍然足够。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T03:44:27.533

我认为盐的强度应该与密码的强度大致相同，因为两者都应该能够抵抗暴力攻击。

简单的盐会更容易受到攻击，但即使是简单的盐也会使攻击比没有盐更加费力。

# django - Django - 测试模型字段更改

> ID：14064234
> 
> 赞同：1
> 
> 时间：2012-12-28T03:31:56.210
> 
> 标签：django, unit-testing, django-models, django-testing

假设模型字段默认为`None`，并且经过一些复杂操作后的方法预计将字段更改为`None`。

在测试结束时，我做到了`assertEqual`，并且该领域`None`符合预期。如果该方法无声无息地失败并且`None`不是该方法操作的结果而仅仅是巧合怎么办？

有没有办法确定模型字段更改而不必在测试开始时设置不同的值？

在我的情况下，它是`ForeignKey`来自另一个包的复杂对象的字段。

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:08:19.360

这个问题已经开放了很长一段时间了，我不确定你是否还需要答案，但是我昨天在寻找其他东西时发现了它，现在我有一些空闲时间，所以......

我不是专家，它实际上可能无法满足您的特定需求，但在我看来，您需要一个模拟库。Michael Foord 的[Mock](http://www.voidspace.org.uk/python/mock)是最受欢迎的作品之一。

您可以做的是`mock.patch`用作装饰器或上下文管理器来模拟您尝试测试的属性，如下所示：

```
def test_attribute_is_being_set_to_none():
    mocked_attribute = mock.PropertyMock()
    with mock.patch('MyModule.MyClass.attribute_to_mock', mocked_attribute)
        MyObject = MyClass()
        MyObject.method()

    p.assert_called_with(None) 
```

这应该测试该属性是否`None`在您测试时设置为。如果你想更严格，你可以使用`assert_called_once_with(None)`来查看对象是否在方法期间只设置了一次。

您可能会在模拟属性、命名空间、使用装饰器或上下文管理器时遇到一些麻烦……这取决于很多事情，但我很确定模拟是这里的方法。

# model-view-controller - LINQ-to-SQL 模型上的 Mvc 控制器

> ID：14064236
> 
> 赞同：1
> 
> 时间：2012-12-28T03:32:10.407
> 
> 标签：model-view-controller, asp.net-mvc-4, datacontext

我正在尝试学习将 db 与 asp.net mvc 链接。

按照尝试构建控制器的 MS 教程的说明进行操作。右键单击控制器并添加一个控制器，但是 VSExpress 中由 LINQ-to-SQL 预先构建的数据上下文不适合，是否有任何教程显示如何在构建的 db 和 asp.net mvc 网页之间从零建立连接对专业人士

![在此处输入图像描述](../Images/3eb580380fc4d1f7cd1d92b5b1c32289.png)

单击“添加”后的结果返回不支持的上下文类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:44:12.903

ASP.Net MVC 的模板首先使用*实体​​框架代码*，而不是*LINQ-to-SQL*。您可以更改为使用实体框架或使用新模板（我知道有人这样做，但我不知道如何）。

[这是一个](http://codesamplez.com/development/net-mvc-with-linq-to-sql-tutorial)将 Linq-to-SQL 与 ASP.Net MVC3 结合使用的示例，但它手动创建了类，您仍然需要创建自己的模板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:54:08.450

检查以下 Scottgu 的博客链接。它可能会帮助你。

[linq到sql](http://weblogs.asp.net/scottgu/archive/2007/05/29/linq-to-sql-part-2-defining-our-data-model-classes.aspx)

# android - Android GCM 消息将数据从服务发送到活动

> ID：14064241
> 
> 赞同：0
> 
> 时间：2012-12-28T03:33:05.527
> 
> 标签：android, google-cloud-messaging

通常来说，一般来说。

我有一个可以通过 Google Cloud MEssaging (GCM) 从 Google APP Engine 接收数据的应用程序。

在一个实例中，Activity-X 将向 GCM 服务器调用 http-get，这将触发 GCM 消息返回给 APP。APP 有一个从 GCMBaseIntentService 扩展而来的 Service，用于注册和接收 GCM 消息。所以这部分起作用了，Activity-X 起作用了，这会触发从服务器到 APP 的 GCM 消息。APP 的 GCMBaseIntentService 被触发并接收数据。

我如何将接收到的数据返回给调用的活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:36:32.583

创建一个`Intent`您的自定义操作，用数据填充其附加内容，并将其发送到`Activity`.

# c# - 如何检查密码是否有效？ASP.NET MVC 成员资格

> ID：14064242
> 
> 赞同：3
> 
> 时间：2012-12-28T03:33:23.373
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-membership, asp.net-web-api

我正在使用默认的 asp.net mvc 4 会员系统。用户通过 ASP.NET Web API 以纯文本形式发送他的用户名和密码。

**所以我有他的普通密码，如何将它与存储的哈希密码进行比较？**

**是否有一个函数接受一个字符串并将其与散列的字符串进行比较？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T04:40:49.547

您必须确保您的 web.config 已正确设置以使用成员资格。[http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/6e9y4s5t%28v=vs.100%29.aspx)

此外，我还要确保在您的 web.config 中创建一个 MachineKey。[http://msdn.microsoft.com/en-us/library/ff649308.aspx](http://msdn.microsoft.com/en-us/library/ff649308.aspx)

您将放入控制器中的代码类似于：

```
[HttpPost]
public ActionResult Login(AuthenticationModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.Username, model.Password)) {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
             && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
    }
} 
```

您的模型类似于：

```
 public class AuthenticationModel
    {
        [Required]
        [Display(Name = "Username")]
        public string UserName { get; set; }

        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [Display(Name = "Remember Me?")]
        public bool RememberMe { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T14:59:45.007

好吧，我有一个类似的请求，我完成的是使用 64 字节字段存储密码，然后生成一个 32 字节盐和 32 字节哈希，然后从数据库中提取盐并使用该盐对相同的用户名进行编码，如果结果对象等于 DB 中的对象

这是我使用的方法

```
 public static bool IsPasswordValid(string plainPassword, byte[] data)
    {
        var prf = KeyDerivationPrf.HMACSHA512;
        var saltBytes = new byte[saltSize];
        var hashBytes = new byte[hashSize];
        Array.Copy(data, 0, saltBytes, 0, saltSize);
        Array.Copy(data, saltSize, hashBytes, 0, hashSize);
        var verificationHashBytes = KeyDerivation.Pbkdf2(plainPassword, saltBytes, prf, iterationCount, hashSize);
        return hashBytes.SequenceEqual(verificationHashBytes);
    } 
```

# image - 如何指纹图像？

> ID：14064243
> 
> 赞同：0
> 
> 时间：2012-12-28T03:33:39.557
> 
> 标签：image, fingerprint

我看到了 imagemagick 的这个命令，这很酷

```
compare -metric RMSE first.png second.png NULL: 
```

我试过了，两张相似的图像（但不是相互修改）的差异小于 15%。但是，如果我想找到相似的图像，我无法用 100 万张图像对每张图像进行真正的扫描，这太费力了。有没有办法对图像进行指纹识别（边缘指纹可能？边缘+颜色？）并存储 1-4k 字节并使用该数据来比较它们的接近程度？

# android - 如何强制视频在 youtube 播放器中全屏播放？

> ID：14064244
> 
> 赞同：10
> 
> 时间：2012-12-28T03:33:50.830
> 
> 标签：android, android-intent

我有一个应用程序，其中帮助部分有一个教程视频我想强制这个视频使用 Youtube 播放器全屏打开（就像 Market/Play 应用程序一样）。即使是纵向视频，它也会强制视频以全屏播放。

我使用此代码强制视频在 youtube 播放器中打开

```
String videoId = "VIDEO_ID_HERE";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube:"+videoId)); 
intent.putExtra("VIDEO_ID", videoId); 
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T04:30:44.017

Youtube v4.1.47 app cando it for you

```
intent.putExtra("force_fullscreen",true); 
```

我不知道低版本。

# google-app-engine - 用于 UI 测试的本地 AppEngine 1.7.3 开发服务器的性能

> ID：14064245
> 
> 赞同：0
> 
> 时间：2012-12-28T03:34:01.037
> 
> 标签：google-app-engine

我们最近从 AppEngine (Java) 1.6.3 升级到了 1.7.3。我们有一大套 UI 测试，它们在 CI 环境中针对本地开发服务器（通过 Ant 启动）运行。

在升级之前，每晚运行 UI 测试大约需要 4 个小时。自升级以来，它们需要 9 到 10 个小时。我进行了降级以仔细检查其他没有在起作用的东西，并且构建再次花费了通常的 4 小时。

中间版本中是否有任何可能导致此问题的内容？我将逐个发布以尝试进一步查明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:13:33.480

您的代码很有可能在 CheckRestricted 方法中花费了大量时间。您可以对其进行分析以确定是否确实如此。检查此问题以获取更多信息：

Java 开发服务器在 1.6.4 中非常慢
[http://code.google.com/p/googleappengine/issues/detail?id=7282](http://code.google.com/p/googleappengine/issues/detail?id=7282)

# php - 以编程方式关闭 log4php 日志记录

> ID：14064246
> 
> 赞同：1
> 
> 时间：2012-12-28T03:34:13.290
> 
> 标签：php, log4php

我在我的项目中使用 log4php。但是对于部署，我想使用配置数组关闭记录器。

关闭日志记录的参数是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:37:08.433

在 中`config.xml`，设置`level`

```
<configuration xmlns="http://logging.apache.org/log4php/">
    <appender name="myAppender" class="LoggerAppenderFile">
        <param name="file" value="myLog.log" />
    </appender>
    <root>
        <level value="WARN" />
        <appender_ref ref="myAppender" />
    </root>
</configuration> 
```

或者使用 php 配置文件`config.php`，执行

```
return array(
    'rootLogger' => array(
        'level' => 'DEBUG',     // you need to change here to set the log level
        'appenders' => array('default'),
    ),
    'appenders' => array(
        'default' => array(
            'class' => 'LoggerAppenderFile',
            'layout' => array(
                'class' => 'LoggerLayoutSimple'
            ),
            'params' => array(
                'file' => '/var/log/my.log',
                'append' => true
            )
        )
    )
); 
```

# android - 解压缩 apk 文件

> ID：14064251
> 
> 赞同：1
> 
> 时间：2012-12-28T03:35:00.117
> 
> 标签：android, android-source, android-launcher

我正在尝试从 AOSP 源构建 AOSP ICS 启动器（Launcher2），并将其安装到任何 Android 设备中，但我在安装 adb 时不断收到 INSTALL_FAILED_DEXOPT 错误。我怀疑这是因为 apk 是 odexed，因为在 out 目录中有一个 Launcher2.apk 和一个 Launcher2.odex 文件。

如果是这种情况，我如何对 apk 进行 deodex？

谢谢！

# macos - 无法在 osx 10.8.2 中构建 zeromq 3.2 stable

> ID：14064252
> 
> 赞同：1
> 
> 时间：2012-12-28T03:35:03.823
> 
> 标签：macos, message-queue, zeromq

./configure --with-pgm make

我得到了同样的错误：

```
Making all in foreign/openpgm
Making all in build-staging/openpgm/pgm
/bin/sh ./libtool --tag=CC   --mode=compile gcc -std=gnu99 -DPACKAGE_NAME=\"OpenPGM\" -DPACKAGE_TARNAME=\"openpgm\" -DPACKAGE_VERSION=\"5.1.118\" -DPACKAGE_STRING=\"OpenPGM\ 5.1.118\" -DPACKAGE_BUGREPORT=\"openpgm-dev@googlegroups.com\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_ARPA_INET_H=1 -DHAVE_FCNTL_H=1 -DHAVE_FLOAT_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_LIMITS_H=1 -DHAVE_LOCALE_H=1 -DHAVE_MEMORY_H=1 -DHAVE_NETDB_H=1 -DHAVE_NETINET_IN_H=1 -DHAVE_STDDEF_H=1 -DHAVE_STDINT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_STRINGS_H=1 -DHAVE_SYS_IOCTL_H=1 -DHAVE_SYS_PARAM_H=1 -DHAVE_SYS_SOCKET_H=1 -DHAVE_SYS_TIME_H=1 -DHAVE_SYS_TIMEB_H=1 -DHAVE_SYSLOG_H=1 -DHAVE_UNISTD_H=1 -DHAVE_WCHAR_H=1 -DHAVE__BOOL=1 -DHAVE_STDLIB_H=1 -DHAVE_MALLOC=1 -DHAVE_STDLIB_H=1 -DHAVE_UNISTD_H=1 -DHAVE_GETPAGESIZE=1 -DHAVE_MMAP=1 -DHAVE_STDLIB_H=1 -DHAVE_REALLOC=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_ATEXIT=1 -DHAVE_FLOOR=1 -DHAVE_FTIME=1 -DHAVE_GETHOSTBYADDR=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTNAME=1 -DHAVE_GETTIMEOFDAY=1 -DHAVE_INET_NTOA=1 -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_REGCOMP=1 -DHAVE_SELECT=1 -DHAVE_SETENV=1 -DHAVE_SETLOCALE=1 -DHAVE_SOCKET=1 -DHAVE_SQRT=1 -DHAVE_STPCPY=1 -DHAVE_STRCASECMP=1 -DHAVE_STRCHR=1 -DHAVE_STRDUP=1 -DHAVE_STRERROR=1 -DHAVE_STRNCASECMP=1 -DHAVE_STRPBRK=1 -DHAVE_STRRCHR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOUL=1 -DHAVE_STRTOULL=1 -I.    -I./include -DCONFIG_16BIT_CHECKSUM -DCONFIG_GALOIS_MUL_LUT -DGETTEXT_PACKAGE='"pgm"' -fvisibility=hidden -D_REENTRANT -DCONFIG_HAVE_GETNETENT -DCONFIG_HAVE_ISO_VARARGS -DCONFIG_HAVE_GNUC_VARARGS -DCONFIG_HAVE_ALLOCA_H -DCONFIG_HAVE_BACKTRACE -DCONFIG_HAVE_PSELECT -DCONFIG_HAVE_POLL -DCONFIG_HAVE_GETIFADDRS -DCONFIG_HAVE_IFR_NETMASK -DCONFIG_HAVE_MCAST_JOIN -DCONFIG_HAVE_IP_MREQN -DCONFIG_HAVE_SPRINTF_GROUPING -DCONFIG_HAVE_VASPRINTF -DCONFIG_HAVE_DSO_VISIBILITY -DCONFIG_BIND_INADDR_ANY -DCONFIG_HOST_ORDER_IP_LEN -DCONFIG_HOST_ORDER_IP_OFF -DCONFIG_TICKET_SPINLOCK -DCONFIG_DUMB_RWSPINLOCK -MT libpgm_noinst_la-thread.lo -MD -MP -MF .deps/libpgm_noinst_la-thread.Tpo -c -o libpgm_noinst_la-thread.lo `test -f 'thread.c' || echo './'`thread.c
libtool: compile:  gcc -std=gnu99 -DPACKAGE_NAME=\"OpenPGM\" -DPACKAGE_TARNAME=\"openpgm\" -DPACKAGE_VERSION=\"5.1.118\" "-DPACKAGE_STRING=\"OpenPGM 5.1.118\"" -DPACKAGE_BUGREPORT=\"openpgm-dev@googlegroups.com\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_DLFCN_H=1 -DLT_OBJDIR=\".libs/\" -DHAVE_ALLOCA_H=1 -DHAVE_ALLOCA=1 -DHAVE_ARPA_INET_H=1 -DHAVE_FCNTL_H=1 -DHAVE_FLOAT_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_LIMITS_H=1 -DHAVE_LOCALE_H=1 -DHAVE_MEMORY_H=1 -DHAVE_NETDB_H=1 -DHAVE_NETINET_IN_H=1 -DHAVE_STDDEF_H=1 -DHAVE_STDINT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_STRINGS_H=1 -DHAVE_SYS_IOCTL_H=1 -DHAVE_SYS_PARAM_H=1 -DHAVE_SYS_SOCKET_H=1 -DHAVE_SYS_TIME_H=1 -DHAVE_SYS_TIMEB_H=1 -DHAVE_SYSLOG_H=1 -DHAVE_UNISTD_H=1 -DHAVE_WCHAR_H=1 -DHAVE__BOOL=1 -DHAVE_STDLIB_H=1 -DHAVE_MALLOC=1 -DHAVE_STDLIB_H=1 -DHAVE_UNISTD_H=1 -DHAVE_GETPAGESIZE=1 -DHAVE_MMAP=1 -DHAVE_STDLIB_H=1 -DHAVE_REALLOC=1 -DHAVE_DECL_STRERROR_R=1 -DHAVE_STRERROR_R=1 -DHAVE_ATEXIT=1 -DHAVE_FLOOR=1 -DHAVE_FTIME=1 -DHAVE_GETHOSTBYADDR=1 -DHAVE_GETHOSTBYNAME=1 -DHAVE_GETHOSTNAME=1 -DHAVE_GETTIMEOFDAY=1 -DHAVE_INET_NTOA=1 -DHAVE_MEMMOVE=1 -DHAVE_MEMSET=1 -DHAVE_REGCOMP=1 -DHAVE_SELECT=1 -DHAVE_SETENV=1 -DHAVE_SETLOCALE=1 -DHAVE_SOCKET=1 -DHAVE_SQRT=1 -DHAVE_STPCPY=1 -DHAVE_STRCASECMP=1 -DHAVE_STRCHR=1 -DHAVE_STRDUP=1 -DHAVE_STRERROR=1 -DHAVE_STRNCASECMP=1 -DHAVE_STRPBRK=1 -DHAVE_STRRCHR=1 -DHAVE_STRSTR=1 -DHAVE_STRTOL=1 -DHAVE_STRTOUL=1 -DHAVE_STRTOULL=1 -I. -I./include -DCONFIG_16BIT_CHECKSUM -DCONFIG_GALOIS_MUL_LUT -DGETTEXT_PACKAGE=\"pgm\" -fvisibility=hidden -D_REENTRANT -DCONFIG_HAVE_GETNETENT -DCONFIG_HAVE_ISO_VARARGS -DCONFIG_HAVE_GNUC_VARARGS -DCONFIG_HAVE_ALLOCA_H -DCONFIG_HAVE_BACKTRACE -DCONFIG_HAVE_PSELECT -DCONFIG_HAVE_POLL -DCONFIG_HAVE_GETIFADDRS -DCONFIG_HAVE_IFR_NETMASK -DCONFIG_HAVE_MCAST_JOIN -DCONFIG_HAVE_IP_MREQN -DCONFIG_HAVE_SPRINTF_GROUPING -DCONFIG_HAVE_VASPRINTF -DCONFIG_HAVE_DSO_VISIBILITY -DCONFIG_BIND_INADDR_ANY -DCONFIG_HOST_ORDER_IP_LEN -DCONFIG_HOST_ORDER_IP_OFF -DCONFIG_TICKET_SPINLOCK -DCONFIG_DUMB_RWSPINLOCK -MT libpgm_noinst_la-thread.lo -MD -MP -MF .deps/libpgm_noinst_la-thread.Tpo -c thread.c  -fno-common -DPIC -o .libs/libpgm_noinst_la-thread.o
In file included from ./include/impl/sockaddr.h:38,
             from ./include/impl/notify.h:46,
             from ./include/impl/framework.h:66,
             from thread.c:23:
./include/pgm/in.h:34: error: redefinition of ‘struct group_req’
./include/pgm/in.h:40: error: redefinition of ‘struct group_source_req’
make[2]: *** [libpgm_noinst_la-thread.lo] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all-recursive] Error 1 
```

就像： [https ://zeromq.jira.com/browse/LIBZMQ-454](https://zeromq.jira.com/browse/LIBZMQ-454)

谁知道如何修复它？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:07:28.333

我通过这样做解决了这个问题：

```
cd foreign/openpgm/
wget http://openpgm.googlecode.com/files/libpgm-5.2.122~dfsg.tar.gz
cd ../..
./configure --with-pgm=libpgm-5.2.122~dfsg
make 
```

# php - 使用 Ajax 访问 HTML 下拉值，然后调用 PHP 函数

> ID：14064254
> 
> 赞同：0
> 
> 时间：2012-12-28T03:35:41.683
> 
> 标签：php, ajax, drop-down-menu

诚然，我对 Ajax 完全一无所知，但它似乎是完成任务的最佳方式。在经历了几个教程之后，我有了基本的了解，但仍然对我的问题感到迷茫。本质上，我试图捕获 HTML 下拉菜单的值，并使用用户选择的行值调用购物车函数。每个行值对应于 php 数组中的一个产品。

出现在我的头文件中的函数（注意：注释掉的部分是使用 onreadystatechange 的失败尝试）：

```
<script type="text/javascript">

function productchange(data){

var xmlhttp;

if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

  //xmlhttp.onreadystatechange=function()
  //{
  //if (xmlhttp.readyState==4 && xmlhttp.status==200)
  // {
  //document.getElementById("test").innerHTML=xmlhttp.responseText;
  //document.getElementById("test").innerHTML= data;
  //  }
  //}

  var URL = "http://www.example.com/wp-content/themes/themeX/order.php" + "?rownum=" + data;

  xmlhttp.open("GET",URL,false);
  xmlhttp.send(); 

}
//-->
</script> 
```

HTML 表：（div 标签再次尝试使用 innerHTML 失败。我能够在屏幕上获取值，但仍然无法使用 $_GET 捕获它以在我的函数调用中使用）

```
<TR>
   <TD>
      <select id="productcategory1" name="productcategory1" onchange="productchange(this.value)">
    <option value="$">--Please Select--</option>
    <option value="1">Product # 1 - $1.99</option>
    <option value="2">Product # 2 - $1.99</option>
    <option value="3">Product # 3 - $9.99</option>
    <option value="4">Product # 4 - $9.99</option>
  </select>
  </TD>
  <TD>    
  <div id="test">
  </div>
  <?php echo print_wp_cart_button_for_product($products[$rownum]["Product"], $products[$rownum]["Price"]); ?>
  </TD>
  </TR> 
```

订单.php：

```
<?php
global var $rownum;
$rownum = $_GET['rownum'];
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:21:33.487

`order.php`真的没有做任何事情，并且没有向客户端回显任何响应。AJAX 调用实际上应该做什么？（请记住，PHP 脚本在初始页面呈现时执行一次，因此 AJAX 调用只是一个完全独立的 Web 请求，然后需要返回一些客户端将在 onreadystatechange 函数中处理的数据。尝试添加回显当您取消注释 JS 处理程序时`order.php`，您应该会在 div 中看到它。

# ruby - 想要将 json 发布到 url，我将 json 作为字符串

> ID：14064261
> 
> 赞同：3
> 
> 时间：2012-12-28T03:36:11.810
> 
> 标签：ruby, json

我在一个字符串变量中有一个 json 表示，我想使用 ruby​​ 将它发布到一个 url。

所以到目前为止我有这个：

```
require 'json'
require 'net/http'

uri = URI.parse("http://www.example.com/post/here") 
```

我的 json 作为字符串看起来像：

```
{"id":-1,"userId":1,"name":"some-test","createdAt":1356665463287} 
```

如何获取该字符串并将其加载到 ruby​​ 对象中然后发布？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-28T03:54:03.443

在我看来，Net:HTTP 文档不值得付出努力。你可能会发现[法拉第](https://github.com/lostisland/faraday)更好一点：

```
require 'faraday'
conn = Faraday.new(:url => 'http://www.example.com')

# post payload as JSON instead of "www-form-urlencoded" encoding:
conn.post do |req|
  req.url '/post/here'
  req.headers['Content-Type'] = 'application/json'
  req.body = '{"id":-1,"userId":1,"name":"some-test","createdAt":1356665463287}'
end 
```

# jquery - 使用 jQuery 从文本区域中删除初始文本

> ID：14064262
> 
> 赞同：1
> 
> 时间：2012-12-28T03:36:11.843
> 
> 标签：jquery, symfony, textarea

我有一个通过 Symfony 构建的文本区域，代码如下：

控制器：

```
$form = $this->createFormBuilder($defaultData)
    ->add('name', 'text', array('label' => 'Name:'))
    ->add('email', 'email', array('label' => 'Email Address:'))
    ->add('subject', 'text', array('label' => 'Subject:'))
    ->add('message', 'textarea', array('label' => 'Message:'))
    ->getForm(); 
```

模板：

```
<div>
    {{ form_errors(form.message) }}
    <p class="label">{{ form_label(form.message) }}</p>
    {{ form_widget(form.message, { 'attr' : { 'class' : 'input', 'id' : 'message', 'rows' : '8' } }) }}
</div> 
```

这会产生以下 HTML：

```
<div>   
    <p class="label"><label for="form_message" class="required">Message:</label></p>
    <textarea id="form_message" name="form[message]" required="required"    class="input" id="message" rows="8">Type your message here</textarea>
</div> 
```

现在，当文本区域被聚焦时，我希望初始文本消失。我只是不知道该怎么做。我试过了：

```
$("#message").focus(function() {
    if (this.text() == "Type your message here") {
        this.text("");
    }
}); 
```

但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:41:11.847

你的代码有几个问题。

首先，对于您不使用的 textarea，请`.text()`使用`.val()`许多其他表单对象。引用焦点函数中的对象，`$(this)`而不是 only `this`。最后，您的 textarea 有 2 个 id `#message`，并且`#form_message`仅使用 1 个 ID，因此 HTML 结果如下：

```
<div>   
  <p class="label"><label for="form_message" class="required">Message:</label></p>
  <textarea name="form[message]" required="required" class="input" id="message" rows="8">Type your message here</textarea>
</div> 
```

更正后的 jQuery 函数结果为：

```
$("#message").focus(function() {
    if ($(this).val() == "Type your message here") {
        $(this).val("");
    }
}); 
```

# coffeescript - 如何制作数组数组？

> ID：14064264
> 
> 赞同：3
> 
> 时间：2012-12-28T03:36:18.107
> 
> 标签：coffeescript

我正在尝试用 做这样的事情`coffescript`，但它不起作用..

```
locations =
  [59.32522, 18.07002]
  [59.327383, 18.06747] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:42:26.690

哦，我想通了。。

```
locations = [
  [59.32522, 18.07002]
  [59.327383, 18.06747]
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T19:44:36.143

我意识到您为自己的问题找到了解决方案，而这并不是您正在寻找柯克的确切答案。但在 Ruby 中有一个我喜欢的任意散列对象散列（注意它们比固定维度数组更占用内存）。

# 来自：[http ://www.ruby-forum.com/topic/130324](http://www.ruby-forum.com/topic/130324)

# 作者：塞巴斯蒂安·亨格瑞克

```
blk = lambda {|h,k| h[k] = Hash.new(&blk)}
x = Hash.new(&blk)
x[:la][:li][:lu][:chunky][:bacon][:foo] = "bar" 
```

这种结构的有趣之处在于，您可以使用它动态创建所需的任何类型的嵌套哈希（有点像使用 mkdir -p 创建子目录）。它与[JSON 对象](http://www.json.org/)有一些共同点。

让我们看看类似的对象在 CoffeeScript 中会是什么样子

```
x = 
  la:  
    li:  
      lu:  
        chunky:  
          bacon:  
            foo: 'bar' 

alert x['la']['li']['lu']['chunky']['bacon']['foo']

y = { la: { li: { lu: { chunky: { bacon: { foo:'bary' } } } } } }  

alert y['la']['li']['lu']['chunky']['bacon']['foo'] 
```

由于括号运算符不能在 Javascript 中重载，我无法想出比纯 JSON 对象创建更简洁的创建界面

好的，我想出了一个 JSON 语法的缩写，但它不如 Ruby 嵌套哈希好。

```
Block = (obj,rest...) ->
  console.log 'obj',obj
  console.log 'rest',rest
  obj = {} if (typeof obj is "undefined") 
  if rest.length >= 2
    key = rest[0]
    obj[key] = Block(obj[key],rest[1...]...)
    obj
  else if rest.length is 1
    obj = rest[0]

z = new Block(z,'la','li','lu','chunky','bacon','foo','barz')
console.log z['la']['li']['lu']['chunky']['bacon']['foo']
# extend the object
z = new Block(z,'la','li','lu','chunky','bacon','fooz','ball')
console.log JSON.stringify(z)

# add a node to an internal hash
a = z['la']['li']['lu']
a = new Block(a,'chunky','bacon','another','node')
console.log 'a is',JSON.stringify(a)

# the node now exists on the parent as well
console.log 'z is',JSON.stringify(z) 
```

# c - 将指针传递给函数 - 取消引用或直接发送？

> ID：14064266
> 
> 赞同：-3
> 
> 时间：2012-12-28T03:36:41.290
> 
> 标签：c, pointers

我有这样的功能：

```
void foo(structTemp* p)
{
  .
  p->field1 = 1;
  p->field2 = 2;
  .
  foo_2(?????);
}

void foo_2(structTemp* p, int c)
{
   Need to use the pointer 'p' from foo here in this function.
} 
```

我使用了 foo_2(p, 3) 但它显示错误。如何正确传递要在 foo_2 中使用的指针 p ？

编辑：我试图将该函数称为 foo_2(p, 2) 或 foo_2(**p, 2) 但出现错误。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:43:48.907

您尝试调用它的方式*是*正确的，但您可能会`foo2`遇到在尝试使用它之前未声明的问题 - 在这种情况下，它会抱怨声明与早期（默认）不匹配。

您可以通过更改两个函数的顺序或在之前提供声明（原型）来检查/修复此问题`foo`，以便不使用默认原型：

```
void foo_2 (structTemp*, int); 
```

所以：

```
void foo_2 (structTemp* p, int c) {
    // Weave your magic here
}

void foo (structTemp* p) {
   foo_2 (p, 3);
} 
```

或者：

```
void foo_2 (structTemp*, int);

void foo (structTemp* p) {
   foo_2 (p, 3);
}

void foo_2 (structTemp* p, int c) {
    // Weave your magic here
} 
```

可以正常工作，因为它们都涉及`foo_2`在第一次使用之前声明您需要它。

如果你*已经*有一个原型，你应该检查它。由于您的评论包含指示编译器抱怨不兼容声明的文本，因此现有原型必须是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:05:57.443

要使用`p`inside `foo_2`，您的操作与 foo 中的完全相同。

`p->field1`与 wich 含义相同`(*p).field1` ：p 指向的结构内的变量 field1。

所以，像这样：

```
void foo(structTemp* p)
{
  .
  p->field1 = 1;
  p->field2 = 2;
  .
  foo_2(p,3);

  printf("field1 %d\nfield2 %d",p->field1, p->field2); 

}

void foo_2(structTemp* p, int c)
{
   p->field2 = 3;
} 
```

将打印：

```
field1 1
field2 3 
```

假设您的结构类似于：

```
typedef struct _t{

  int field1, field2;

}structTemp; 
```

如果您对此有疑问，可能是因为您的变量声明/名称中有一些错误。

# drupal - 在drupal模板中实现addtag

> ID：14064267
> 
> 赞同：0
> 
> 时间：2012-12-28T03:36:50.540
> 
> 标签：drupal, drupal-7, drupal-theming

我的模板中有代码：

```
$query = new EntityFieldQuery();
    $entities = $query->entityCondition('entity_type', 'node')
    ->propertyCondition('type', 'article')
    ->propertyCondition('status', 1)
    ->fieldCondition('field_show_on', 'tid', $group['identifier'], '=') // taxonomy identifier
    ->fieldCondition('field_perks_categories', 'tid', $categories['tid'], '=')
    ->fieldCondition('field_perks_sub_categories', 'tid', $subcategory['tid'], '=')
    ->execute(); 
```

我还有其他名为“artc_order”的表，其中包含 nid、重量以手动订购文章我想实现这个： [http ://eureka.ykyuen.info/2012/05/16/drupal-7-order-entityfieldquery-by- random-using-hook_query_tag_alter/](http://eureka.ykyuen.info/2012/05/16/drupal-7-order-entityfieldquery-by-random-using-hook_query_tag_alter/) 到我的模板文件，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:11:34.837

也许它对你的情况有用，`db_select`而不是`EntityFieldQuery()`. 您不能`JOIN`直接添加到，`EntityFieldQuery`因为它不受支持，可能在 Drupal 8 中。

您的查询可以这样重写`db_select`：

```
$query = db_select('node', 'n')
        ->fields('n', array('nid'))
        ->leftJoin('field_data_field_show_on', 'fso', 'fso.entity_id = n.nid') // You can use INNER if you need
        ->leftJoin('field_data_field_perks_categories', 'fpc', 'fpc.entity_id = n.nid') // Same thing here
        ->leftJoin('field_data_field_perks_sub_categories', 'fpsc', 'fpsc.entity_id = n.nid') // And here also
        ->leftJoin('order', 'o', 'o.nid = n.nid') // Join artc_order
        ->condition('n.type', 'article', 'LIKE')
        ->condition('fso.field_show_on_tid', $group['identifier'])
        ->condition('fso.field_perks_categories_tid', $categories['tid'])
        ->condition('fso.field_perks_sub_categories_tid', $subcategory['tid'])
        ->condition('n.status', 1)
        ->orderBy('o.weight')
        ->execute(); 
```

PS：我无法测试这个查询，因为我没有你的数据库，但差不多就是这样。

**PS2：在template.php**文件中使用查询不是一个干净的方法，我知道在某些极端情况下，我们需要这样做，但我认为 Drupal 有很多钩子可以让我们在自定义模块中获得我们需要的东西而不是**template.php**直接（这只是我的意见，我可能是错的）

# html - 谷歌浏览器 问题

> ID：14064268
> 
> 赞同：2
> 
> 时间：2012-12-28T03:36:53.697
> 
> 标签：html, video, html5-video

我正在尝试使用 html5 视频标签。它在 safari 和 firefox 上运行良好，但在 chrome 上屏幕闪烁并变为空白。但是，如果我调整浏览器窗口的大小，视频会再次出现。我已将代码放在测试页面上，也包含在下面。

[http://www.bilalallawala.com/test.html](http://www.bilalallawala.com/test.html)

任何帮助，将不胜感激

```
<video poster="https://s3.amazonaws.com/bilalallawala/resources/video/cover.jpg" preload="auto" autoplay="true" style="background-size:cover;width:100%;height:auto;position:fixed;left:0;">

    <source src="https://s3.amazonaws.com/bilalallawala/resources/video/tl16x9.ogg" type="video/ogg">
    <source src="https://s3.amazonaws.com/bilalallawala/resources/video/tl16x9.mp4" type="video/mp4">

</video> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:37:29.610

我做了几个快速测试，如果删除该`poster`属性，问题似乎就消失了。这对您应该仍然有效，因为浏览器将在可用时立即显示第一个视频帧，并且第一帧与您使用的海报相同。

不过，我不知道*为什么*会这样。

其他几点注意事项：

*   `autoplay`是一个布尔属性，所以它应该是`autoplay`独立的，或者`autoplay="autoplay"`不是`autoplay="true"`
*   这些视频是*非常*大的文件，可供用户下载。您可能需要考虑尝试缩小它们。

# sql - SQL - 困难查询 - 将多行汇总到列中

> ID：14064276
> 
> 赞同：4
> 
> 时间：2012-12-28T03:39:06.857
> 
> 标签：sql, sql-server-2008-r2

我正在尝试开发的查询遇到一个小挑战。

这是我的桌子的样子：-

帐户表

```
ClientNo        AccountType          Balance
  1234             SUP1                25
  1234            SUP1.1               35
  1234             RET1                20
  1111             SUP1                50
  1111             DIS4                60 
```

我正在尝试得到如下所示的结果：-

```
ClientNo   TotSupBal   TotSuppAccts   TotRetBal  TotRetAccts  TotDisBal   TotDisAccts
 1234         70             2           20          1            0             0
 1111         50             1            0          0            60            1 
```

本质上，一个客户可以多次出现在 Accounts 表中，因为每个客户可以有多个帐户。

帐户类型将始终以相同的字符开头，但是取决于这些帐户中有多少，该数字实际上可以是任何数字，并且后续帐户将始终是十进制然后是数字...例如，第一个 SUP 帐户只是 SUP1，但是下一个 SUP 帐户将是 SUP1.1，然后是 SUP1.2 等...

我写了以下查询

```
SELECT ClientNo, SUM(Balance) AS TotSupBal, COUNT(AccountType) AS TotSuppAccts
FROM Account
WHERE (AccountType LIKE 'SUP1.%') OR (AccountType = 'SUP1')
GROUP BY ClientNo 
```

**有 2 个不同的 WHERE 子句的原因是因为我不能只使用 SUP1%，因为有像 SUP12 这样的帐户与 SUP1 不同。*

此查询工作正常，但它只生成 SUP 帐户类型的列表。我怎样才能产生相同类型的输出，但是在每个帐户类型的多个列中？

我正在使用 Microsoft SQL 2008 R2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:24:34.627

PIVOT 是您所需要的 >> [http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

这是一个完全有效的解决方案：

```
WITH Accounts (AccountCategory, ClientNo, Balance) as (
  select 
    case 
        when AccountType like 'SUP%' then 'sup'
        when AccountType like 'RET%' then 'ret'
        when AccountType like 'DIS%' then 'dis' 
    end as AccountCategory,
    ClientNo, 
    Balance
  from Account
)
select * from (
  select ClientNo, sup as TotSupBal, ret as TotRetBal, dis as TotDisBal from Accounts as SourceTable PIVOT (
    SUM(Balance)
    FOR AccountCategory IN ([sup], [ret], [dis])
  ) as pt
) as sums inner join (
  select ClientNo, sup as TotSupAccts, ret as TotRetAccts, dis as TotDisAccts from Accounts as SourceTable PIVOT (
   COUNT(Balance)
   FOR AccountCategory IN ([sup], [ret], [dis])
  ) as pt
) as counts on sums.ClientNo = counts.ClientNo 
```

在 SqlFiddle 上试试：[http ://sqlfiddle.com/#!6/d5e91/26](http://sqlfiddle.com/#!6/d5e91/26)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:47:00.590

让我假设您事先知道帐户类型是什么。在这种情况下，您只需要一个条件聚合总和：

```
select clientNo,
       sum(case when (AccountType LIKE 'SUP1.%') OR (AccountType = 'SUP1')
                then Balance
            end) as TotSupBal,
       sum(case when (AccountType LIKE 'SUP1.%') OR (AccountType = 'SUP1')
                then 1
                else 0
           end) as TotSupAccts,
       sum(case when left(AccountType, 3) = 'RET'
                then Balance
            end) as TotRetBal,
       sum(case when left(AccountType, 3) = 'RET'
                then 1
                else 0
           end) as TotRetAccts,
       . . .
from account
group by clientNo 
```

我不确定其他帐户的确切逻辑是什么，所以我只看前三个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:48:49.773

```
SELECT
    ClientNo, 
    SUM(Balance) AS TotSupBal,
    COUNT(AccountType) AS TotSuppAccts,
    ret_bal AS TotRetBal,
    total_ret AS TotRetAccts
FROM 
    Account,
    (
        SELECT
            ClientNo c_num,
            SUM(Balance) AS ret_bal,
            COUNT(AccountType) total_ret
        WHERE AccountType LIKE 'RET%'
        GROUP BY ClientNo
    ) Table1RET_type  -- Your name for new table(You create new temporary table for you select) 
WHERE
    ((AccountType LIKE 'SUP1.%') OR (AccountType = 'SUP1'))
    AND Table1RET_type.c_num = ClientNo -- This is called join Table(google it for more info)
GROUP BY ClientNo 
```

现在您必须为要创建的所有列重复此逻辑。

# javascript - 确保在上一个功能完成时启动下一个功能。保持禁用所有目标元素的注册事件，直到工作完成

> ID：14064277
> 
> 赞同：0
> 
> 时间：2012-12-28T03:39:10.360
> 
> 标签：javascript, jquery

我有这个标记：

```
<span class="click">click</span>
<div><span>first child</span>, <span>second child</span>, <span>third child</span></div> 
```

点击“.click”（我们称其为“target”）后，我想要：
1\. 将“done” html 添加到下一个 div 的第一个子项中，如下所示：

```
$('.click').click(function (e) {
    $(this).next('div').children('span').first().html(function () {
        return $(this).html() + ' done';
    });
});
}); 
```

2.只有在上一个函数完成后，将“done”html添加到目标的next div的第三个孩子；
3\. 只有在前一个功能完成后，`alert ("third child done. coming to second...")`;
4.只有在上一个函数完成后，将“将是最后一个处理的元素”html添加到目标的next div的第二个孩子；
5\. 最后，只有在前一个功能完成后，`alert ('the job is done')`;
6.由于这些功能可能需要很长时间才能完成，甚至可能涉及多个setTimeouts，我必须禁用所有与“.click”相关的事件，直到整个逻辑完成（在这种特殊情况下，这意味着它们将在之后启用`alert ('the job is done')`）。
也许使用 $.Deferreds？或者创建某种回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:02:56.600

听起来您正在寻找的是延迟对象。在 jQuery 1.5 中可用。

使用延迟对象，您可以像这样编排函数调用

```
functionOne().done( function2, function3, function4 ) 
```

看看这个：[http ://api.jquery.com/deferred.done/](http://api.jquery.com/deferred.done/)

# java - 在java中创建要在restful webservice中返回的XML数据

> ID：14064278
> 
> 赞同：2
> 
> 时间：2012-12-28T03:40:01.667
> 
> 标签：java, web-services, rest

如何创建自己的 xml 数据以在 Java 中与 Restful Web 服务一起使用？我确实使用创建了一个字符串文件，`StringBuilder`但是当我尝试在客户端使用时，总是会出现从其中提取属性的问题，总是会出现错误。

下面列出的是我的代码；

```
Employee emp0 = new Employee("David", "Finance");
Employee emp1 = new Employee("Smith", "HealthCare");
Employee emp2 = new Employee("Adam", "Information technology");
Employee emp3 = new Employee("Stephan", "Life Sciences");

map.put("00345", emp0);
map.put("00346", emp1);
map.put("00347", emp2);
map.put("00348", emp3);

@GET
@Path("{id}")
@Produces({"application/xml"})
public String find(@PathParam("id") String id) {

    Employee emp = (Employee) map.get(id);
    if (emp != null) {
        StringBuilder br = new StringBuilder();
        br.append("<?xml version='1.0' encoding='UTF-8'?>").append(nl);
        br.append("<Employee>").append(nl);
        br.append("<Emp-ID>").append(id).append(" </Emp-ID >").append(nl);
        br.append("<Name>").append(emp.getName()).append(" </Name>").append(nl);
        br.append("<dept>").append(emp.getDept()).append(" </Department>").append(nl);
        br.append("</Employee>");
        return br.toString();
    } else {
        return "Unknown id";
    }
} 
```

我有一个名为 Employee 的 POJO，其名称和部门也作为属性。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:45:17.347

我建议您在 Employee 类上使用 JAXB 注释，而不是这个 stringbuilder 练习。
这个[链接](http://www.vogella.com/articles/JAXB/article.html)应该可以帮助你开始
，这个[链接](https://stackoverflow.com/questions/4880937/jaxb-annotations)应该回答任何进一步的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:49:46.687

如果您在类`@XmlRootElement(name="Employee")`上添加注释，`Employee`则可以执行以下操作：

```
@GET
@Path("{id}")
@Produces({"application/xml"})
public Employee find(@PathParam("id") String id) {

    return (Employee) map.get(id);

} 
```

然后`@XmlElement`注释可用于覆盖元素名称。您还可以利用 JAX-RS`Response`对象返回状态代码而不是`String`错误消息。

**了解更多信息**

*   [http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html](http://blog.bdoughan.com/2010/08/creating-restful-web-service-part-45.html)

# javascript - Jquery .ajax beforeSend 似乎从按钮中删除了单击事件处理程序？

> ID：14064279
> 
> 赞同：0
> 
> 时间：2012-12-28T03:40:18.977
> 
> 标签：javascript, jquery, event-handling

我正在尝试使用 wordpress 来停止 Jquery 发送的 ajax 请求，并使用一些额外的数据重新提交它。

这是它的工作原理：

*   用户单击提交按钮。

*   Wordpress 提交 ajax 请求

*   我以这种方式`beforeSend`设置了一个全局函数：`.ajaxSetup`

    `$.ajaxSetup( {beforeSend: monitorRequests } );`

*   当wordpress提交请求时，它被我的函数拦截，它调用另一个提交另一个ajax请求的函数，而`monitorRequests`'返回false，取消原始ajax请求。

*   我自己的ajax请求被发送，没有任何问题。

然而，这是问题所在。这样做一次后，如果用户再次单击提交按钮，则不会调用 wordpress 的单击处理程序。我想知道这是为什么，这是否与取消 ajax 请求有关？还是别的什么？我应该怎么做才能继续调用点击处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:47:32.593

弄清楚了，Wordpress 在 ajax 请求期间禁用了该按钮，并且由于从未调用过 wordpress 的回调，因此它保持禁用状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:58:30.730

$.ajaxSetup 全局影响页面中的 ajax 调用。您不知道在 WP 插件中实现了多少 AJAX，以及每个插件的自定义实现方式。

尝试将范围缩小到特定元素。你可以使用

```
$('.submit').bind('click', function(){ /* your fn */ }); 
//You can have many 'click' binding eg..
$('.submit').bind('click', function(){ /* another */ }); 
$('.submit').bind('click', function(){ /* yet another */ }); 
```

在现有脚本之前插入您的脚本。您的函数将首先被调用。

# ruby-on-rails - Rails：link_to的dynamic_path到不同的资源名称

> ID：14064282
> 
> 赞同：0
> 
> 时间：2012-12-28T03:41:01.760
> 
> 标签：ruby-on-rails, link-to

我该如何做一个`link_to`我可以修改的对象类字符串？

首先，我的对象是多态的（书、杂志），所以我需要 user `link_to(@object.title, [@object.user, @object])`。这使它像预期的`user_book_path`那样具有多态性。`user_magazine_path`

我的问题是如何将`user`部分更改为作家，例如。`writer_magazine_path`还是`writer_book_path`？因为在我的路线中，我将用户命名为`writer`，我想知道如何对`link_to`方法执行此操作。

**note**不知道我的标题是否正确。如果是，请纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:06:23.057

这种情况下可以使用eval，如下

```
<%= link_to @object.title, 
    eval("writer_#{@object.class.name.downcase)_path(pass_object_here)"} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:27:27.223

试试这个，例如做助手

**在你的助手中**

```
def *method_name(@object)*
  link_to "whatever" write_"#{object}"_path
end 
```

现在，在您的视图文件中

```
<%= method_name(@object) %> 
```

# c# - 如何在基类和派生类的 PrincipalPermission 中应用 OR

> ID：14064284
> 
> 赞同：0
> 
> 时间：2012-12-28T03:41:44.927
> 
> 标签：c#, security, role-base-authorization, genericprincipal

我有一个基类。

```
[PrincipalPermission(SecurityAction.Demand, Role = "Admin")]
public class Base
{

} 
```

并派生出一个。

```
[PrincipalPermission(SecurityAction.Demand, Role = "Developer")]
public class Derived : Base
{

} 
```

我想让具有“开发者”权限的用户创建派生对象。但我无法做，因为基类有管理员权限。

管理员应该能够创建所有派生类的对象。所以我想把权限放在管理员的基类中。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T10:45:57.107

这不起作用的原因是`Base`该类是在`Derived`该类之前创建的。由于只有管理员才能调用`Base`该类，因此您无法让`Role=Developer`创建基础对象。

但是，在这种情况下，您可以在基类中引入 2 个构造函数，一个`Admin`受限于`Developer`. 然后，您必须`Developer`从`Derived`类中显式调用 c'tor。

但是，我真的不建议这样做。我宁愿引入一个工厂类或方法并限制那里的创建。

# wpf - 如何设置数据网格列标题以显示图标和文本？

> ID：14064286
> 
> 赞同：0
> 
> 时间：2012-12-28T03:41:53.693
> 
> 标签：wpf, templates, datagrid, columnheader

我的 WPF 应用程序中有一个数据网格，我想在某些列上显示一个红灯图标，以证明该列缺少一些数据。这是我在 XAML 中的窗口资源：

```
<DataTemplate x:Key="RedTemp">
    <Image Source="/MyApp;component/Images/red.png"
           Height="9"
           Width="9"
           HorizontalAlignment="Right" />
</DataTemplate> 
```

这就是我从后面的代码中调用它的方式：

```
foreach (DataGridColumn y in grid.Columns)
{
    if (Missing== 1)
    {
        y.HeaderTemplate = FindResource("RedTemp") as DataTemplate;
    }              
} 
```

但是当我运行应用程序时，数据网格在列上显示红灯，但列标题文本消失了！

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:00:37.177

您应该修改您的 DataTemplate 以使您的文本具有 TextBlock，例如：

```
<DataTemplate x:Key="RedTemp">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <TextBlock Text="{TemplateBinding Content}"  />
        <Image Source="/MyApp;component/Images/red.png"
               Height="9"
               Width="9"
               HorizontalAlignment="Right"
               Grid.Column="1"
               />
     </Grid>
</DataTemplate> 
```

我还没有测试过这个。

*编辑：*在 2 个 UI 元素周围添加了一个面板。

# javascript - 替换现有的 HTML 元素？

> ID：14064287
> 
> 赞同：0
> 
> 时间：2012-12-28T03:42:00.223
> 
> 标签：javascript, php, html

目前我正在尝试替换一个简单的 HTML 元素来提醒用户他们输入的密码/用户名不存在。我是编程新手，我不确定我所做的只是因为它不起作用，或者因为我在某个地方犯了错误。

以下是 PHP 代码摘录：

```
if($player['id'] == false)
echo "
<script>
document.getElementById('alert').innerHTML='That username does not exist.'; 
</script>
"; 
```

然后再往下，我在 HTML 中有这个：

```
<p id="alert">Enter your Username and Password Above.</p> 
```

我正在尝试用“用户名不存在”位替换“输入您的用户名”部分。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:49:37.733

我认为实现这一点的最佳方法是

让你的信息像这样

```
$message = "Enter your Username and Password Above.";

if($player['id'] == false){
   $message = "That username does not exist.";
} 
```

并在 html 中使用它

```
<p id="alert"><?php echo $message; ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:01:30.107

这应该有效。但我无法对此进行测试。

```
<?php if($player['id'] == false) { ?>
 <script type='text/javascript'>  
      document.getElementById('alert').innerHTML='That username does not exist.'; 
 </script>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:54:30.580

```
<script type='text/javascript'>  
    document.getElementById('alert').innerHTML='That username does not exist.'; 
</script> 
```

我想这是因为您没有定义脚本的类型
可能是您可以尝试上面的代码

**更新**
供您参考，如果您要求javascript通过ID查找元素，您需要确保该元素存在，因此，您需要将上述脚本放在id为“alert”的html元素下

# c++ - 将 LPWSTR 转换为 v8::String

> ID：14064290
> 
> 赞同：0
> 
> 时间：2012-12-28T03:42:23.617
> 
> 标签：c++, node.js, v8

```
LPWSTR dscStr = "TEST STRING AAAAAA";

char buffer[5000];
wcstombs(buffer, dscStr, sizeof(dscStr));

return scope.Close(String::New(buffer)); // FAILED 
```

我需要将 LPWSTR（或 LPCWSTR）转换为 v8::String。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:05:38.000

您发布的代码甚至不应该编译，因为您试图将 a 分配`char const *`给 a `wchar_t *`。

这应该有效（我对此一无所知`v8::String`，所以我假设最后一行中的构造函数调用是正确的）

```
LPCWSTR dscStr = L"TEST STRING AAAAAA";
// LPCWSTR is an alias for wchar_t const *
// The L before the string literal indicates it is a wide string literal

char buffer[5000];
wcstombs( buffer, dscStr, wcslen(dscStr) );
// Need wcslen to compute the length of the string

return scope.Close(String::New(buffer)); 
```

# jquery - JQuery & CSS - css() 不工作

> ID：14064293
> 
> 赞同：-1
> 
> 时间：2012-12-28T03:42:42.343
> 
> 标签：jquery, css

我将如何使用`css()`以下代码进行设置？我试过了，但它不起作用！

我寻找了一种方法来做到这一点，但仍然找不到！甚至在这里：**[http ://api.jquery.com/css/](http://api.jquery.com/css/)**

**不工作**

```
$('#MyClass123').css('content:url','("image.jpg")');
$('#MyClass123').css('content','url("image.jpg")');
$('#MyClass123').css('content:url("image.jpg")'); 
```

**在职的**

```
<style>
.MyClass123{
    content:url("image.jpg");
}
</style>

<img class="MyClass123"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T03:46:10.187

不工作的第二个将是正确的方法。但是，它不起作用，因为您选择了一个名为 MyClass123 的 ID，而您应该选择一个类：

```
$('.MyClass123').css('content','url("image.jpg")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:46:29.690

更改`#`为`.`

您的 select 语句正在寻找一个 id 而不是一个类。

当我上我的电脑时，kater 会给你更多信息，msbe zomeone 会很乐意更新这个答案

jQuery 选择语句应该看起来与它们的 css 对应物完全一样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:46:31.843

你需要`$('img.MyClass123')`改用。`$('#MyClass123')`选择**id**为 MyClass1234 的元素，例如`<img id="MyClass123" />`.

基本上每个以哈希 (#) 开头的选择器都表示您正在寻找一个 id。带有点 (.) 的选择器表示您正在寻找类。id 和 classes 的区别在于，多个元素可以具有相同的 class，但只有一个元素可以同时带有不同的 id。

与此一致，您还可以使用选择器`$('.MyClass123')`。然而，它会找到类 MyClass123 的所有元素。因此，它可能会返回与您要查找的图像不同的元素。例如`<a href="#" class="MyClass123">`可以匹配。在点之前使用 img 组件更加明显。

检查：[http ://www.w3schools.com/cssref/css_selectors.asp](http://www.w3schools.com/cssref/css_selectors.asp)

# class - 如果 Haskell 的编译器总是需要用 "::Int" 指定多态函数的多态参数，为什么 "show 2" 是合法的

> ID：14064296
> 
> 赞同：4
> 
> 时间：2012-12-28T03:43:08.593
> 
> 标签：class, function, haskell, show, polymorphism

如果我们输入`show 2`，那么我们将得到“2”。但问题是显示满足`show :: Show a => a -> String`，并且`2`是多态的，如果不幸`show 2::Int`与我们不同，`show 2::Integer`我们将不得不写`show 2::Int`而`show 2::Integer`不是简单地写`show 2`。

我拒绝假设编译器足够聪明，可以知道`(A a)=>show a`A 的所有当前实例何时都属于 Show，给出相同的结果，我们不需要指定`show a::X`，以及 A 的所有当前实例何时`(A a)=>show a`属于 Show，给出不同的结果，我们必须指定`show a::X`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-28T03:52:24.373

这是由于默认规则。`show 2`实际上也是如此`show (2::Integer)`。[您可以在第 4.3.4 节](http://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-750004.3)的 haskell 2010 报告中阅读此内容。

要回答您的第二个问题，编译器不够智能。它是由于类型默认而发生的。

你可以检查

```
 number = 2 
```

在 ghci

```
*Main> :t number 
 number :: Integer 
```

现在您的自定义默认签名

```
 default (Int)
 number = 2 
```

在 ghci

```
*Main> :t number
number :: Int 
```

您可以在我引用的文档中了解何时可以默认类型。

# jquery - 选择更改时如何为下拉菜单显示不显眼的 jQuery 验证消息？

> ID：14064297
> 
> 赞同：5
> 
> 时间：2012-12-28T03:43:12.890
> 
> 标签：jquery, asp.net-mvc, jquery-validate, html-select, unobtrusive-validation

设置：

*   启用了客户端验证（+ 不显眼的 javascript）的 ASP.NET MVC 4。
*   jQuery 1.8.2
*   jquery.validate 1.10.0
*   jquery.validate.unobtrusive

的HTML：

```
<form action="/" method="post">
    <select data-val="true" data-val-required="DropDown is required." id="DropDown" name="DropDown">
        <option value="">Select a letter</option>
        <option>A</option>
        <option>B</option>
        <option>C</option>
    </select>
    <span data-valmsg-for="DropDown" data-valmsg-replace="true"></span>
    <br/>
    <button type="submit">Submit</button>
</form>​ 
```

**[您可以在这里](http://jsfiddle.net/andrewg/dCgyH/1/)**看到它的实际效果。

下拉菜单的服务器端代码非常无趣：

```
// View Model
public class ViewModel
{
    [Required]
    public string DropDown { get; set; }
}

// View
@Html.DropDownListFor(m => m.DropDown,
                      new SelectList(new[] { "A", "B", "C" }),
                      "Select a letter") 
```

以下是查看问题的步骤：

1.  用鼠标选择值之一（A、B、C）。
2.  用鼠标选择默认的空值（选择一个字母）。*不显示任何必需的消息。*
3.  使用箭头键，选择值之一（A、B、C）。
4.  使用箭头键，选择默认的空值（选择一个字母）。*这一次，将显示所需的消息。*
5.  用鼠标选择值之一（A、B、C）。*所需消息消失。*
6.  用鼠标选择默认的空值（选择一个字母）。*显示所需的消息。*

似乎在第一次触发验证之前（通过使用键盘更改值或按下提交按钮），鼠标事件不会启动事件。任何关于为什么会发生这种情况的解释（我做错了什么？）或解决方法，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:02:25.257

我相信您需要对 JQuery Validate 进行两次修改。

1.) 添加方法将空字符串的第一个值定义为无效值

```
 $.validator.addMethod(
            "SelectLetter",
            function(value, element) {
                if ($("#DropDown").val() === ''){
                    return false;
                } else return true;
            },
            "Please Select a Letter"
    );
    var validator = $("#LetterForm").validate({
            rules: {
                    DropDown: {
                        SelectLetter: true
                    }
            }

    }); 
```

2.) 添加 click() 事件来触发验证

```
$("#DropDown").click(function(){
          $("#LetterForm").validate().element("#DropDown");
        });
}); 
```

完整示例[http://jsfiddle.net/stupiddingo/L4c33/1/](http://jsfiddle.net/stupiddingo/L4c33/1/)

可能有一个更简单的解决方案，但这似乎有效。这是基于先前询问的[jQuery 自定义验证方法问题](https://stackoverflow.com/questions/3824608/jquery-custom-validation-method-issue)的答案。

# magento - 在 CentOS 上安装 Oauth

> ID：14064299
> 
> 赞同：1
> 
> 时间：2012-12-28T03:43:30.217
> 
> 标签：magento, oauth, oauth-2.0, magento-1.7, magento-1.4

我在 CentOS 上。在 magento 中，为了将数据列表转换为 JSON 格式，我知道最初我需要为消费者端安装 oauth。为了在centOS上安装oauth，我按照本网站的建议进行操作：http: [//coolbung.blogspot.in/2010/04/installing-oauth-on-centos-54.html](http://coolbung.blogspot.in/2010/04/installing-oauth-on-centos-54.html)

但是在给出命令“pecl install oauth-beta”时我遇到了问题。它显示找不到 pecl 命令。

我怎样才能重新爱上这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T03:49:33.190

发出此命令以首先发出 PHP Pear：

```
yum install php-pear 
```

参考：[http ://www.electrictoolbox.com/install-php-pecl-centos/](http://www.electrictoolbox.com/install-php-pecl-centos/)

# php - 致命错误：调用未定义的方法 Post::where()

> ID：14064302
> 
> 赞同：1
> 
> 时间：2012-12-28T03:44:03.447
> 
> 标签：php

`发生数据库错误

错误号：1054

Unknown column` //我需要一个有用的解决方案来解决这个错误，经过几个小时的调查。还是一样。有人吗？

```
function update_post($postID,$data){
    $this->where('postID',$postID); //error line
    $this->db->update('posts',$data);
} 

//code of posts.php
function editpost($postID){
    $data['success']=0;
    if($_POST){
        $data_post=array(
            'title'=>$_POST['title'],
            'post'=>$_POST['post'],
            'active'=>1
        );
        $this->post->update_post($postID,$data); // update_post function
        $data['success']=1;
    }
    $data['post']=$this->post->get_post($postID);
    $this->load->view('edit_post',$data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:58:05.003

您似乎没有将 $data_post 的值传递给函数，而是 $data

```
$data_post=array(
    'title'=>$_POST['title'],
    'post'=>$_POST['post'],
    'active'=>1
);
$this->post->update_post($postID,$data); // update_post function 
```

应该：

```
$data_post=array(
    'title'=>$_POST['title'],
    'post'=>$_POST['post'],
    'active'=>1
);
$this->post->update_post($postID,$data_post); // update_post function 
```

# r - 列表参数的 match.arg 函数

> ID：14064305
> 
> 赞同：0
> 
> 时间：2012-12-28T03:44:28.237
> 
> 标签：r, arguments, match

我的问题很简单。

```
x=list(type="call")

FUN <- function(x=list(type=c("call","put")))
{
  x$type=match.arg(x$type)
} 
```

这将返回一个错误：

```
> FUN(x)
Error in match.arg(x$type) : 'arg' should be one of “” 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T00:13:26.930

也许这就是你想要的：

```
FUN <- function(x=list(type=c("call","put")))
{
  x$type=match.arg(x$type, c('call', 'put'))
}

> print(FUN())
[1] "call"
> print(FUN(x))
[1] "call"
> print(FUN(list(type="put")))
[1] "put" 
```

# entity-framework - 实体框架生成的类不在我需要的命名空间中，有没有办法在不重新生成的情况下更改它使用的命名空间？

> ID：14064312
> 
> 赞同：16
> 
> 时间：2012-12-28T03:45:28.893
> 
> 标签：entity-framework, visual-studio, asp.net-mvc-4, namespaces

如果我需要重新生成应该在哪里指定命名空间。我正在尝试使用 Models 命名空间中的部分类，但它们不匹配。

下面的简化代码片段是生成实体框架类的地方

```
namespace projectname
{
   #region Contexts

   /// <summary>
  /// No Metadata Documentation available.
  /// </summary>
  public partial class MyClass
  {

  }
} 
```

当我在模型文件夹中添加一个类时，

```
namespace projectname.Models
{

    public partial class MyClass
    {
     //etc, etc 
    }
} 
```

正如您所看到的，当我尝试使用命名空间时，命名空间不匹配会导致问题，因为编译器同时看到了 projectname.Models.MyClass 和 projectname.MyClass。

我想要一些关于解决此问题的正确方法的建议，最好是更新 EF 类，以便它们存在于 projectname.Models 命名空间中，但我不知道如何去做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-16T01:40:06.260

根据 Roman O 的评论，可以通过更新文本转换 (.tt) 文件的“自定义工具命名空间”属性来更改命名空间，该属性将生成的实体类（在数据库优先方法中）与实体模型 (.edmx) 文件联系起来。这适用于带有 EF 5.0 的 VS 2012 Express。

我会发布截图，但由于缺乏声誉。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T04:47:45.930

IIRC，如果您使用实体数据模型，您应该能够直接通过 xml 文件或文件更改命名空间（您可能必须为所有各种存储和概念模型更改它）。甚至可能有一些方法可以在设计器中进行更改.. 看起来很简单。

实际上，解决方案可能在这里：

[生成的代码概述（实体数据模型设计器）](http://msdn.microsoft.com/en-us/library/vstudio/cc982041%28v=vs.100%29.aspx)（请参阅自定义工具命名空间）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-05T20:53:00.820

*   在解决方案资源管理器中右键单击项目中的 .edmx 文件，然后选择属性
*   在 VS 属性窗格中，细化自定义工具命名空间
*   输入您想要的完整 CLR 命名空间
*   重建项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-26T12:33:02.547

自动生成的类的命名空间将继承自 VS 项目设置（如果您在那里更改它甚至会更改）。当然，您应该将“自定义工具命名空间”属性设为空。（刚刚用 VS2013 和 EF6.1 测试过）不像设置文件一直是 pita :)

对于旧版本，有一个关于手动更改的好视频：

[https://youtu.be/B7Cqc9F0Ih8](https://youtu.be/B7Cqc9F0Ih8)

# python - 如果文件在 cwd 中不存在，则结束子程序的智能方法

> ID：14064313
> 
> 赞同：3
> 
> 时间：2012-12-28T03:45:49.437
> 
> 标签：python

我正在尝试在 cwd 中打开文件“data.txt”并读取行，如果文件不存在，是否有一个单行器（或关闭）退出子例程..我知道有像使用 os.path.exists 和尝试/排除 IO 错误，但对单行或最聪明的方式感兴趣

```
def readfile ():
    f = open('data.txt')
    lines = f.readlines()
    f.close() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T03:48:36.657

你可以使用`with`打开

```
with open('data.txt') as f:
    lines = f.readlines() 
```

with 语句将在嵌套代码块之后自动关闭文件。使用 with 语句的优点是，无论嵌套块如何退出，都可以保证关闭文件。如果在块结束之前发生异常，它将在异常被外部异常处理程序捕获之前关闭文件。

如果嵌套块包含 return 语句，或者 continue 或 break 语句，则 with 语句也会在这些情况下自动关闭文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T04:18:04.587

您可以使用[`os.path.exists`](http://docs.python.org/2/library/os.path.html#os.path.exists)和[条件表达式](http://www.python.org/dev/peps/pep-0308/)：

```
import os.path as opath

def readlines(path):
    return open(path).readlines() if opath.exists(path) else [] 
```

如果您正在进行惰性评估（它只会读取调用者消耗的行数），请将其与[生成器表达式](http://www.python.org/dev/peps/pep-0289/)结合起来：

```
import os.path as opath

def readlines(path):
    try:
        return (l for l in open(path)) if opath.exists(path) else ()
    except FileNotFoundError:
        return () 
```

# qt - Qt 错误找不到 -lQtCored collect2: ld 返回 1 退出状态

> ID：14064325
> 
> 赞同：1
> 
> 时间：2012-12-28T03:47:24.073
> 
> 标签：qt, debugging, qt-creator, static-linking

当我在**调试**模式下运行程序时，出现以下错误。

```
cannot find -lQtCored 
collect2: ld returned 1 exit status 
```

我可以在发布模式下正常运行程序。是因为我已经完成了**静态链接**（我可以在没有 Qt Creator 的情况下运行我的可执行文件）？我在 Windows 上使用 Qt Creator 和 Qt 4.7.0。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-07-26T06:31:37.080

以下命令将解决此问题：

```
sudo apt-get install libglu1-mesa-dev 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T04:55:53.050

您的链接器看不到 QtCore 的调试库（如图 - `-lQtCored`，释放库 - `-lQtCore`）。你需要检查一下，你是否真的构建了这个调试库，然后检查了这个调试库的所有路径。

PS。是的，您可以在没有 Qt-Creator 的情况下运行可执行文件。您应该使用`qmake`(into directory with your `.pro`) 和`make`(当您的 qmake 有 generate 时`Makefile`)。

PSS。如果要运行`.exe`，则应将一些 Qt 库放入带有`.exe`.

# macos - NSImageView 动画

> ID：14064328
> 
> 赞同：4
> 
> 时间：2012-12-28T03:47:59.763
> 
> 标签：macos, cocoa

我是 Mac 开发的新手，我们有没有像 **imagev = [NSArray arrayWithObjects**

我需要一些像我们在 iOS 中做的事情想在 mac 中做的事情，

```
imageVie.animationImages = [NSArray arrayWithObjects:
 [UIImage imageNamed:@"1.png"],[UIImage imageNamed:@"2.png"],
 [UIImage imageNamed:@"3.png"],[UIImage imageNamed:@"4.png"],
 [UIImage imageNamed:@"5.png"],[UIImage imageNamed:@"6.png"],
 [UIImage imageNamed:@"7.png"] ,nil]; 
```

在 iPhone 中，我如何制作动画

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-30T15:52:37.767

我发现有人使用[Core Animation 方法来解决这个问题](https://stackoverflow.com/q/13011527/449161)，这对我来说已经足够接近了。我稍微修改了一下。你需要`@import QuartzCore;`

```
- (void)awakeFromNib
{
    CALayer *layer = [CALayer layer];
    NSMutableArray *spinnerImages = [NSMutableArray arrayWithCapacity:30u];
    for (NSUInteger i = 0; i < 30; ++i)
    {
        NSString *imageName = [NSString stringWithFormat:@"spinner%@", @(i)];
        [spinnerImages addObject:[NSImage imageNamed:imageName]];
    }
    self.spinnerImages = spinnerImages;
    layer.frame = self.imageView.bounds;
    [self.imageView setLayer:layer]; // This view is just a container for the layer. Its frame can be managed by a xib.
    self.imageView.wantsLayer = YES;

    self.spinnerLayer = layer;
} 
```

然后你可以像这样动画它：

```
- (void)stopAnimating
{
    if ([self.layer.animationKeys containsObject:kAnimationKey])
    {
        [self.layer removeAnimationForKey:kAnimationKey];
    }
}

- (void)startAnimating
{
    if ([self.layer.animationKeys containsObject:kAnimationKey])
    {
        return;
    }
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:kAnimationKey];
    [animation setCalculationMode:kCAAnimationDiscrete];
    [animation setDuration:1.0f];
    [animation setRepeatCount:HUGE_VALF];
    [animation setValues:self.spinnerImages];
    [self.spinnerLayer addAnimation:animation forKey:kAnimationKey];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-27T09:03:29.927

**以Ben Flynn**的出色回答为基础。

在斯威夫特 3 中：

```
// This needs to happen around init.
// NSView (and who inherit from it) does not come with a layer.
// self.layer will be nil at init.
self.layer = CALayer()
self.wantsLayer = true

let layer = CALayer()
let keyPath = "contents" // (I did not find a constant for that key.)
let frameAnimation = CAKeyframeAnimation(keyPath: keyPath)
frameAnimation.calculationMode = kCAAnimationDiscrete

// Duration
// This is the duration of one cycle
let durationOfAnimation: CFTimeInterval = 2.5
frameAnimation.duration = durationOfAnimation
frameAnimation.repeatCount = HUGE// can also use Float.infinity

let imageSeq: [NSImage] = imageSequance // Your images to animate
frameAnimation.values = imageSeq

// Sadly, there are no layout constraints on CALayer.
// If your view will be resized while animating, you'll need to override
// 'func layout()' and calculate aspect ratio if needs be
let layerRect = CGRect(origin: CGPoint.zero, size: self.frame.size)
layer.frame = layerRect
layer.bounds = layerRect
layer.add(frameAnimation, forKey: keyPath)

self.layer?.addSublayer(layer) 
```

* * *

如果预计视图会调整大小：

删除这些行：

```
let layerRect = CGRect(origin: CGPoint.zero, size: self.frame.size)
layer.frame = layerRect
layer.bounds = layerRect 
```

并`self.needsLayout = true`在添加子层后调用。这将导致`layout()`被调用。

```
//let layerRect = CGRect(origin: CGPoint.zero, size: self.frame.size)
//layer.frame = layerRect
//layer.bounds = layerRect
layer.add(frameAnimation, forKey: keyPath)

self.layer?.addSublayer(layer)
self.needsLayout = true 
```

最后，覆盖`layout()`：

```
override func layout() {
    super.layout()

    var layerFrame = CGRect(origin: CGPoint.zero, size: self.frame.size)
    self.myLayer.frame = layerFrame
    self.myLayer.bounds = // Adjust ratio as needed.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T06:46:20.033

可可没有类似的东西`animatedImageWithImages:duration:`。Cocoa 中的图像可以在空间（不同的分辨率）和颜色深度上有所不同，但时间不一样；单个图像始终是静态图像，从不动画。

（动画 GIF*可能*有一个例外，但 GIF 每帧不能显示超过 255 或 256 种颜色，并且不支持部分透明。此外，我还没有尝试使用 NSImage 或 CGImage 机制创建或显示 GIF。 )

您需要做的不是创建图像，而是创建电影。[将图像添加到电影中，改变每个图像的持续时间以达到您想要的播放速度。](http://developer.apple.com/library/mac/documentation/QuickTime/Reference/QTKitFramework/Classes/QTMovie_Class/Reference/Reference.html#//apple_ref/occ/instm/QTMovie/addImage%3aforDuration%3awithAttributes%3a)然后，在[电影视图](http://developer.apple.com/library/mac/documentation/QuickTime/Reference/QTKitFramework/Classes/QTMovieView_Class/)中显示您的电影，可选择[隐藏控制器](http://developer.apple.com/library/mac/documentation/QuickTime/Reference/QTKitFramework/Classes/QTMovieView_Class/Reference/Reference.html#//apple_ref/occ/instm/QTMovieView/setControllerVisible%3a)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-27T14:12:36.967

**斯威夫特 4.2**

在添加`beginTime`. 因为`Swift 3`一些常数也发​​生了变化。所以我已将解决方案转换为`Swift 4.2`. 另外，我认为将其创建为`CALayer`扩展会很方便：

```
extension CALayer {  

static func image(sequence: [NSImage], duration: CFTimeInterval? = nil, frame: CGRect? = nil) -> CALayer {

    let layer = CALayer()
    if let f = frame { layer.frame = f }
    layer.autoresizingMask = [.layerWidthSizable, .layerHeightSizable]

    let keyPath = "contents"

    let keyFrameAnimation = CAKeyframeAnimation(keyPath: keyPath)
    keyFrameAnimation.values = sequence
    keyFrameAnimation.calculationMode = .discrete
    keyFrameAnimation.fillMode = .forwards
    keyFrameAnimation.duration = duration ?? CFTimeInterval(sequence.count / 18)
    keyFrameAnimation.repeatCount = Float.infinity
    keyFrameAnimation.autoreverses = false
    keyFrameAnimation.isRemovedOnCompletion = false
    keyFrameAnimation.beginTime = 0.0

    layer.add(keyFrameAnimation, forKey: keyPath)

    return layer

}
} 
```

像这样使用它

```
let sequenceLayer = CALayer.image(sequence: imageSequence, duration: 0.55, frame: yourView.bounds) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-21T13:44:20.333

```
@interface AnimatedNSImage : NSImage

    @property (nonatomic, retain) IBInspectable NSImageView         *delegate;

    @property (nonatomic, readonly) NSArray                         *frames;
    @property (nonatomic, readonly) CGFloat                         duration;

    - (instancetype) initWithImages:(NSArray*)frames duration:(CGFloat)duration;

@end 
```

在 .m 文件中...

```
@interface AnimatedNSImage () {

    NSTimer                         *_scheduledTimer;
    NSArray                         *_frames;

    NSUInteger                      _frameIndex;
    CGFloat                         _duration;

}

@end

@implementation AnimatedNSImage

    @synthesize delegate;

    - (NSArray *) frames
    {
        return _frames;
    }

    - (CGImageRef) CGImage
    {
        if (_frames && _frames.count >0) {
            NSImage *_frame = _frames[_frameIndex];
            return _frame.CGImage;
        }
        return nil;
    }

    - (NSArray<NSImageRep *> *) representations
    {
        NSImage *_frame = _frames[_frameIndex];
        return _frame.representations;
    }

    - (CGFloat) duration
    {
        return _duration;
    }

    - (void) __showNextFrame:(id)sender
    {
        _frameIndex = (_frameIndex + 1) % _frames.count;
        if (delegate) {
            [delegate setNeedsDisplay:YES];
        }
    }

    - (NSSize) size
    {
        if (_frames && _frames.count >0) {
            NSImage *_frame = _frames[_frameIndex];
            return _frame.size;
        }
        return CGSizeZero;
    }

    - (void) setup
    {
        _scheduledTimer = [NSTimer scheduledTimerWithTimeInterval:_duration target:self selector:@selector(__showNextFrame:) userInfo:nil repeats:YES];
    }

    - (void) dealloc
    {
        [_scheduledTimer invalidate];
        _scheduledTimer = nil;
    }

    - (instancetype) initWithImages:(NSArray *)frames duration:(CGFloat)duration
    {
        self = [super init];
        if (self) {
            _frames = frames;
            _duration = duration / 100.0f;
            [self setup];
        }
        return self;
    }

@end 
```

请注意，您必须分配委托（给 NSImageView）才能调用刷新。

一个例子....

```
IBOutlet NSImageView *_testGifView;

AnimatedNSImage *_animatedImage = [NSImage animatedImageWithAnimatedGIFURL:[NSURL URLWithString:@"https://media.giphy.com/media/B2zB8mHrHHUXS57Cuz/giphy.gif"]];
_testGifView.image = _animatedImage;        
_animatedImage.delegate = _testGifView; 
```

当然可以根据需要调整计划的计时器，因为输入时间以厘秒（而不是分钟）为单位。

# ios - didSelectRowAtIndexPath：仅在保持单元格约 3 秒后调用

> ID：14064331
> 
> 赞同：0
> 
> 时间：2012-12-28T03:48:24.037
> 
> 标签：ios, uitableview, didselectrowatindexpath

我正在从一个 nib 加载我的单元格，它们是`UITableViewCell`.

这些单元中的每一个都设置`userInteraction`为`YES`（在 nib 文件中）。

当点击一个单元格时，单元格的选择不会显示（在本例中为灰色），除非点击一小会。

即使显示单元格选择样式，将手指从单元格上移开仍然不会触发`didSelectRowAtIndexPath:`。

如前所述，启动它的唯一方法是按住电池约 3 秒钟。

有谁知道为什么会发生这种情况？所有的代表都设置正确，我也使用加载单元的出队方法。

感谢您的任何建议和指点！

***编辑 2***

抱歉，误解了取消选择的方法。他们在这里工作：

```
2012-12-28 04:20:28.120 myApp[2022:907] willSelectRowAtIndexPath: <NSIndexPath 0x1cda0400> 2 indexes [0, 0]
2012-12-28 04:20:28.130 myApp[2022:907] didSelectRowAtIndexPath: <NSIndexPath 0x1cda0400> 2 indexes [0, 0]

2012-12-28 04:20:32.166 myApp[2022:907] willSelectRowAtIndexPath: <NSIndexPath 0x1d936630> 2 indexes [1, 0]
2012-12-28 04:20:32.168 myApp[2022:907] willDeselectRowAtIndexPath: <NSIndexPath 0x1cd24770> 2 indexes [0, 0]
2012-12-28 04:20:32.171 myApp[2022:907] didDeselectRowAtIndexPath: <NSIndexPath 0x1cd24770> 2 indexes [0, 0]
2012-12-28 04:20:32.178 myApp[2022:907] didSelectRowAtIndexPath: <NSIndexPath 0x1d936630> 2 indexes [1, 0] 
```

`tableView:cellForRowAtIndexPath:`：

```
if (indexPath.section == 0) {
    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:@"CellID"];

    if (!cell) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        cell = (CustomCell *)[nib objectAtIndex:0];
    }

    NSArray *data = [[self.indexedData objectForKey:kIndexedDataKey] objectAtIndex:indexPath.row];
    CustomObject *dataObject = [data objectAtIndex:0];

    [cell setDataObject:dataObject];

    return cell;
} 
```

自定义单元格属性：

![在此处输入图像描述](../Images/e40e05e4e7fcf6bb32d0499ad0d1ede7.png)

（单元格的）所有子视图都具有相同的属性：

![在此处输入图像描述](../Images/dd224f0216bfa32b58366dd31c0fd460.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T21:06:46.033

正如@NJones 所说，我觉得自己很愚蠢，但我`UITapGestureRecognizer`对`UITableView`. 当我删除它时，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T14:47:05.157

这个话题有点老了，但我遇到了同样的问题：

对我来说，问题是因为 my`UITableView`被添加到 an`UIScrollView`并且更具体地添加到它的`contentView`. 看来，在里面`contentView`，我必须按住 2-3 秒才能触发该`didSelectRowAtIndexPath`方法。

我将我的 TableView 移到`self.view`而不是`contentView`它解决了问题！

# sql - 特定重复字符内的子字符串选择

> ID：14064334
> 
> 赞同：1
> 
> 时间：2012-12-28T03:48:59.430
> 
> 标签：sql, regex, postgresql

我一直在环顾四周，我几乎已经找到了答案，但我就是不能把手指放在上面。

我想在 URL 中的第 n 个正斜杠之后和下一个正斜杠之前选择值。

因此，例如：在以下 URL... [https://stackoverflow.com/foo/bar/thisValue/more/text/](https://stackoverflow.com/foo/bar/thisValue/more/text/)我想返回 thisValue（在第五个正斜杠之后）。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:28:16.390

您可以跳过正则表达式并使用[`split_part`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)：

> 拆分`string`并`delimiter`返回给定的字段（从一开始计数）。

例如：

```
=> select split_part('http://stackoverflow.com/foo/bar/thisValue/more/text/', '/', 6);
 split_part 
------------
 thisValue 
```

不要忘记 . 中的双斜线造成的空白部分`http://`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T08:46:11.543

当前接受的解决方案对我不起作用。这样做：

```
SELECT substring('http://stackoverflow.com/foo/bar/thisValue/more/text/'
                ,'^http://(?:[^/]*/){3}([^/]+)') 
```

解释：

```
^       .. anchor left  
(?:     .. non-capturing parenthesis  
[^/]*   .. 0-n character being not "/"  
{3}     .. last element 3 times  
([^/]+) .. 1-n characters not "/", this time in capturing parenthesis 
```

[更多在手册中。](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T03:59:16.760

```
http:\/\/([^\/]+\/){n}([^\/]+).*$ 
```

在你的例子中 n=3

# objective-c - ARC 和 CFR 释放？

> ID：14064336
> 
> 赞同：35
> 
> 时间：2012-12-28T03:49:25.287
> 
> 标签：objective-c, ios, cocoa-touch, automatic-ref-counting

我有点困惑。在我读过的任何地方，都建议在使用 ARC 时，您仍然需要发布有意义的核心基础对象，ARC 不管理它们。但是，我有一个方法使用了一些我使用`CFRelease`过的 CF 方法/对象，但这会导致应用程序崩溃。取消注释我`CFRelease`的 s 解决了这个问题，但我假设我有内存泄漏？

有人可以解释一下哪些东西需要发布，哪些不需要，或者这段代码有什么问题吗？

```
+ (NSString *) fileExtensionForMimeType:(NSString *)type
{
    CFStringRef mimeType = (__bridge CFStringRef)type;
    CFStringRef uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassMIMEType, mimeType, NULL);
    CFStringRef extension = UTTypeCopyPreferredTagWithClass(uti, kUTTagClassFilenameExtension);

    NSString *ext = (__bridge NSString *)extension;

    // CFRelease(mimeType);
    // CFRelease(uti);
    // CFRelease(extension);

    return ext;
} 
```

`CFRelease`如前所述，三个注释掉的调用解决了这个问题，但我知道这是错误的。我应该做什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-28T04:00:19.307

你不能释放`mimeType`，因为你不拥有它。您没有与`__bridge`演员一起转让所有权。

你应该发布`uti`，因为你已经创建了它。

您还应该发布`extension`，因为您也创建了它，但这可能会导致`ext`. 相反，将所有权转让给`ext`.

我建议如下：

```
+ (NSString *) fileExtensionForMimeType:(NSString *)type {
    CFStringRef mimeType = (__bridge CFStringRef)type;
    CFStringRef uti = UTTypeCreatePreferredIdentifierForTag(kUTTagClassMIMEType, mimeType, NULL);
    CFStringRef extension = UTTypeCopyPreferredTagWithClass(uti, kUTTagClassFilenameExtension);

    NSString *ext = (__bridge_transfer NSString *)extension;

    // CFRelease(mimeType); // not owned
    if (uti) CFRelease(uti);
    // CFRelease(extension); // ownership was transferred

    return ext;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-28T04:23:11.960

查看[WWDC 2012 - Modern Objective-C](https://developer.apple.com/videos/wwdc/2012/?id=405)，它概述了 Core Foundation 对象和 ARC 的新指南。那个视频大约是 37:35。简而言之，Core Foundation 函数`Copy`或`Create`名称创建了一个对象，该对象已将所有权转移到您的应用程序，并且您的应用程序负责释放它。

无论如何，如果所有权已通过 Core Foundation 方法以名称`Copy`或`Create`名称转移，您可以在完成后手动释放`CFRelease`它，或者更简单，您可以将所有权转移给 ARC 并让它处理它. 从历史上看，为了将所有权转移给 ARC，我们使用`__bridge_transfer`，但他们现在推荐`CFBridgingRelease`（尽管后者只是前者的宏）。而且，显然，如果您有一些通过其他机制检索到的核心基础对象，而不是名称`Copy`或`Create`名称中的函数，那么您既不应该`CFRelease`将其所有权转移给 ARC，也不应该将其所有权转移给 ARC。

通过说明，此方法可以完成您想要的：

```
+ (NSString *) fileExtensionForMimeType:(NSString *)type {

    NSString *uti = CFBridgingRelease(UTTypeCreatePreferredIdentifierForTag(kUTTagClassMIMEType,
                                                                            (__bridge CFStringRef)type,
                                                                            NULL));

    return CFBridgingRelease(UTTypeCopyPreferredTagWithClass((__bridge CFStringRef)uti,
                                                             kUTTagClassFilenameExtension));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:03:06.737

一般来说，我认为您应该尝试注释第一行 CFRelease(mimeType)，并取消注释后面的两行：CFRelease(uti) 和 CFRelease(extension)。你投了一个免费的桥来输入 NSString 并且 ARC 将处理发布。但是 uti 和扩展名是作为 CFString 创建/复制的。ARC 不知道如何处理它们（记住 ARC 是 NSObject 的编译器功能），因此您需要 CF 释放它们。

# android - Android 编程：GCMIntentService 卡在 WakeLock

> ID：14064337
> 
> 赞同：4
> 
> 时间：2012-12-28T03:49:28.757
> 
> 标签：android, notifications, push-notification, push, wakelock

我已经阅读了有关 WakeLock 的各种解决方案，例如在 AndroidManifest.xml 中添加权限以及确保 GCMIntentService 的构造函数设置为公共。

但是，我的代码仍然停留在“获取唤醒锁”

完全相同的代码作为单独的 Android 应用程序单独工作。

我只是在将它集成到我的主应用程序之后才遇到这个错误。

以下是我的 GCM Intent 服务代码：

```
package com.mp2012.ieatishootipostanalyzer.notifications;

import static com.mp2012.ieatishootipostanalyzer.notifications.CommonUtilities.SENDER_ID;
import static com.mp2012.ieatishootipostanalyzer.notifications.CommonUtilities.displayMessage;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

import com.google.android.gcm.GCMBaseIntentService;
import com.mp2012.ieatishootipostanalyzer.R;
import com.mp2012.ieatishootipostanalyzer.notifications.MainActivity2;

public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "GCMIntentService";

public GCMIntentService() {
    super(SENDER_ID);
}

/**
 * Method called on device registered
 **/
@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
    displayMessage(context, "Your device registred with GCM");
    Log.d("NAME", MainActivity2.name);
    ServerUtilities.register(context, MainActivity2.name, MainActivity2.email, registrationId);
}

/**
 * Method called on device un registred
 * */
@Override
protected void onUnregistered(Context context, String registrationId) {
    Log.i(TAG, "Device unregistered");
    displayMessage(context, getString(R.string.gcm_unregistered));
    ServerUtilities.unregister(context, registrationId);
}

/**
 * Method called on Receiving a new message
 * */
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("price");

    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
}

/**
 * Method called on receiving a deleted message
 * */
@Override
protected void onDeletedMessages(Context context, int total) {
    Log.i(TAG, "Received deleted messages notification");
    String message = getString(R.string.gcm_deleted, total);
    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
}

/**
 * Method called on Error
 * */
@Override
public void onError(Context context, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
    displayMessage(context, getString(R.string.gcm_error, errorId));
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
    // log message
    Log.i(TAG, "Received recoverable error: " + errorId);
    displayMessage(context, getString(R.string.gcm_recoverable_error,
            errorId));
    return super.onRecoverableError(context, errorId);
}

/**
 * Issues a notification to inform the user that server has sent a message.
 */
private static void generateNotification(Context context, String message) {
    int icon = R.drawable.ic_launcher;
    long when = System.currentTimeMillis();
    NotificationManager notificationManager = (NotificationManager)
            context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    String title = context.getString(R.string.app_name);

    Intent notificationIntent = new Intent(context, MainActivity2.class);
    // set intent so it does not start a new activity
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_SINGLE_TOP);
    PendingIntent intent =
            PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.setLatestEventInfo(context, title, message, intent);
    notification.flags |= Notification.FLAG_AUTO_CANCEL;

    // Play default notification sound
    notification.defaults |= Notification.DEFAULT_SOUND;

    // Vibrate if vibrate is enabled
    notification.defaults |= Notification.DEFAULT_VIBRATE;
    notificationManager.notify(0, notification);      

}

} 
```

主要活动

```
package com.mp2012.ieatishootipostanalyzer.notifications;

import static com.mp2012.ieatishootipostanalyzer.notifications.CommonUtilities.DISPLAY_MESSAGE_ACTION;
import static com.mp2012.ieatishootipostanalyzer.notifications.CommonUtilities.EXTRA_MESSAGE;
import static com.mp2012.ieatishootipostanalyzer.notifications.CommonUtilities.SENDER_ID;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gcm.GCMRegistrar;
import com.mp2012.ieatishootipostanalyzer.R;

public class MainActivity2 extends Activity {
// label to display gcm messages
TextView lblMessage;

// Asyntask
AsyncTask<Void, Void, Void> mRegisterTask;

// Alert dialog manager
AlertDialogManager alert = new AlertDialogManager();

// Connection detector
ConnectionDetector cd;

public static String name;
public static String email;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main2);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity2.this,
                "Internet Connection Error",
                "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    }

    // Getting name, email from intent
    Intent i = getIntent();

    name = i.getStringExtra("name");
    email = i.getStringExtra("email");      

    // Make sure the device has the proper dependencies.
    GCMRegistrar.checkDevice(this);

    // Make sure the manifest was properly set - comment out this line
    // while developing the app, then uncomment it when it's ready.
    GCMRegistrar.checkManifest(this);

    lblMessage = (TextView) findViewById(R.id.lblMessage);

    registerReceiver(mHandleMessageReceiver, new IntentFilter(
            DISPLAY_MESSAGE_ACTION));

    // Get GCM registration id
    final String regId = GCMRegistrar.getRegistrationId(this);

    // Check if regid already presents
    if (regId.equals("")) {
        // Registration is not present, register now with GCM
        GCMRegistrar.register(this, SENDER_ID);
    } else {
        // Device is already registered on GCM
        if (GCMRegistrar.isRegisteredOnServer(this)) {
            // Skips registration.
            Toast.makeText(getApplicationContext(), "Already registered with GCM", Toast.LENGTH_LONG).show();
        } else {
            // Try to register again, but not in the UI thread.
            // It's also necessary to cancel the thread onDestroy(),
            // hence the use of AsyncTask instead of a raw thread.
            final Context context = this;
            mRegisterTask = new AsyncTask<Void, Void, Void>() {

                @Override
                protected Void doInBackground(Void... params) {
                    // Register on our server
                    // On server creates a new user
                    ServerUtilities.register(context, name, email, regId);
                    return null;
                }

                @Override
                protected void onPostExecute(Void result) {
                    mRegisterTask = null;
                }

            };
            mRegisterTask.execute(null, null, null);
        }
    }
}       

/**
 * Receiving push messages
 * */
private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
        // Waking up mobile if it is sleeping
        WakeLocker.acquire(getApplicationContext());

        /**
         * Take appropriate action on this message
         * depending upon your app requirement
         * For now i am just displaying it on the screen
         * */

        // Showing received message
        lblMessage.append(newMessage + "\n");
        Toast.makeText(getApplicationContext(), "New Message: " + newMessage, Toast.LENGTH_LONG).show();

        // Releasing wake lock
        WakeLocker.release();
    }
};

@Override
protected void onDestroy() {
    if (mRegisterTask != null) {
        mRegisterTask.cancel(true);
    }
    try {
        unregisterReceiver(mHandleMessageReceiver);
        GCMRegistrar.onDestroy(this);
    } catch (Exception e) {
        Log.e("UnRegister Receiver Error", "> " + e.getMessage());
    }
    super.onDestroy();
}

} 
```

以下是AndroidManifest xml文件的代码

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="14" />
<!-- GCM connects to Internet Services. -->
<uses-permission android:name="android.permission.INTERNET" />

<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />

<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />

<!-- Creates a custom permission so only this app can receive its messages. -->
<permission
    android:name="com.mp2012.ieatishootipostanalyzer.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.mp2012.ieatishootipostanalyzer.permission.C2D_MESSAGE" />

<!-- This app has permission to register and receive data message. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<!-- Network State Permissions to detect Internet status -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Permission to vibrate -->
<uses-permission android:name="android.permission.VIBRATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >        
    <activity
        android:name=".login.DashboardActivity"
        android:label="IEatIShootIPost" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".login.RegisterActivity"
        android:label="IEatIShootIPost" 
    />
    <activity
        android:name=".login.LogoutActivity"
        android:label="IEatIShootIPost" 
    />
    <activity
        android:name=".login.SuccessRegister"
        android:label="IEatIShootIPost" 
    />
    <activity
        android:name=".login.LoginActivity"
        android:label="IEatIShootIPost" 
    />
    <activity
        android:name=".login.CalorieProgressActivity"
        android:label="IEatIShootIPost" 
    />        
    <activity
        android:name=".login.CalculateDRCIActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name=".login.WIETActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name=".login.NewFoodActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name=".login.PieChartActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name="org.achartengine.GraphicalActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name=".facebook.MainActivity"
        android:label="IEatIShootIPost" 
    />    
    <activity
        android:name=".notifications.MainActivity2"
        android:configChanges="orientation|keyboardHidden"
        android:label="IEatIShootIPost" 
    />    
    <activity
        android:name=".notifications.RegisterActivity"
        android:label="IEatIShootIPost" 
    />     
    <activity
        android:name=".login.DashboardBurnCalorieActivity"
        android:label="IEatIShootIPost" 
    />  
    <activity
        android:name=".login.ProgressBurnCalorieActivity"
        android:label="IEatIShootIPost" 
    />     

     <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>

            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.mp2012.ieatishootipostanalyzer" />
        </intent-filter>
    </receiver>

    <service android:name=".notifications.GCMIntentService" />
</application> 
```

最后但并非最不重要的是，来自 logcat 的错误

```
Registering app com.mp2012.ieatishootipostanalyzer of senders 74463753470
onReceive: com.google.android.com.c2dm.intent.REGISTRATION
GCM IntentService class: com.mp2012.ieatishootipostanalyzer.GCMIntentService
Acquiring wakelock 
```

它挂起....

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T03:53:57.217

将所有`GCM`相关的类保存在主包中，即你调用`gcm`注册的地方。在您的项目包名称中像这样`com.mp2012.ieatishootipostanalyzer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-30T19:55:51.867

可能是主包下有很多包，`GCM`代码需要放在另一个包下。例如`com.mp2012.ieatishootipostanalyzer.notification`. 这也可以完成，但您需要编辑谷歌云消息系统提供的 GCM 代码。这是在`GCMBroadcastReceiver`：

```
protected String getGCMIntentServiceClassName(Context context) 
{
    String className = context.getPackageName() +".notification"+DEFAULT_INTENT_SERVICE_CLASS_NAME;

    return className;
} 
```

该系统将工作。

# html - 如何在一个div中垂直居中文本，重叠另一个div

> ID：14064340
> 
> 赞同：0
> 
> 时间：2012-12-28T03:49:34.297
> 
> 标签：html, css, alignment, vertical-alignment

我有一个CSS问题。我试图将文本垂直居中放在一个覆盖另一个 div 的 div 中，但文本不会移动。

编辑：这是 JSFiddle 网址：http: [//jsfiddle.net/wgSEw/3/](http://jsfiddle.net/wgSEw/3/)

html如下：

```
<div id="footer-top">
            <div id="footer-top-left">
                <div id="footer-logo">
            </div>
            </div>
            <div id="footer-top-transition"></div>

        <div id="footer-top-right"></div>
        <div id="footer-top-bullets">
            <div id="site-map" class="footer-bullet">
                <img src="<?php echo BASE_IMG_URL . 'bulletlight.png'; ?>" alt="some_text">
                <span class="footer-bullet-text">Site Map</span>
            </div>
            <div id="report-issue" class="footer-bullet">
                <img src=<?php echo BASE_IMG_URL . 'bulletlight.png'; ?> alt="some_text">
                <span class="footer-bullet-text">Report an Issue</span>
            </div>
            <div id="submit-professor" class="footer-bullet">
                <img src=<?php echo BASE_IMG_URL . 'bulletblack.png'; ?> alt="some_text">
                <span class="footer-bullet-text">Submit Professor</span>
            </div>
            <div id="submit-school" class="footer-bullet">
                <img src=<?php echo BASE_IMG_URL . 'bulletblack.png'; ?> alt="some_text">
                <span class="footer-bullet-text">Submit a School</span>
            </div> 
        </div>
</div> 
```

当前的CSS是：

```
#footer-top{
    position: relative;
    width: 960px;
    height: 63px;
    float: left;
    background-image:url('midtilefooter.png');
}

#footer-top-left{
    width: 466px;
    height: 63px;
    float: left;
}

#footer-logo{
    width: 265px;
    height: 63px;
    float: left;
    background-image:url('leftlogo.png');
}

#footer-top-transition{
    width: 27px;
    height: 63px;
    float: left;
    background-image: url('midblacktransition.png');
}

#footer-top-right{
    width: 467px;
    height: 63px;
    float: left;
    background-color: black;
}

#footer-top-bullets{
    position: absolute;
    float: left;
    width: 960px;
    height: 63px; 
    margin-left: 265px;
}

.footer-bullet{
    float: left;
    height: 63px;
    width: 173px;
    color: white;
}

.footer-bullet-text{
    height: 63px;
    color: white;
    top: 50%;
    margin-top: -31px;
    vertical-align: middle;
} 
```

这实质上是为页脚的顶部创建一个基本背景，然后在该背景上覆盖一个项目符号 div，这样它就不会模糊或弄乱背景。项目符号显示在正确的位置，文本正确水平放置，但我根本无法让它垂直居中。任何帮助以及关于 css 的任何一般性建议都将不胜感激，我对它很陌生，它让我为我的钱奔波。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:03:16.397

使 div 垂直居中

html

```
 <div id="parent">
        <div id="child">Content here</div>
    </div> 
```

CSS选项1

```
#parent {position: relative;}

#child {
    position: absolute;
    top: 50%;
    left: 50%;
    height: 30%;
    width: 50%;
    margin: -15% 0 0 -25%;
} 
```

> 我们首先定位父 div 和子 div。接下来我们将孩子的 top 和 left 值分别设置为 50%，这将是 parent 的中心。然而，这将左上角设置在中心，所以我们还没有完成。
> 
> 我们需要将子元素向上（高度的一半）和向左（宽度的一半）移动，因此它的中心位于父元素的中心。这就是为什么我们需要知道子元素的高度（这里是宽度）。
> 
> 为此，我们给元素一个负的上边距和左边距，等于其高度和宽度的一半。
> 
> 与前两种方法不同，这个方法适用于块级元素。它确实适用于所有浏览器，但是内容可能会超出其容器，在这种情况下它会在视觉上消失。当您知道元素的高度和宽度时，它会工作得最好。

CSS 选项 2

```
#parent {position: relative;}

#child {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 50%;
    height: 30%;
    margin: auto;
} 
```

> 这种方法的想法是通过将顶部、底部、右侧和左侧的值设置为 0 来尝试让子元素伸展到所有 4 条边。因为我们的子元素比父元素小，所以它无法到达所有边4个边。
> 
> 然而，将 auto 设置为所有 4 个边的边距会导致相反的边距相等，并将我们的子 div 显示在父 div 的中心。
> 
> 不幸的是，上述方法在 IE7 及更低版本中不起作用，并且与之前的方法一样，子 div 内的内容可能会变得太大，导致它被隐藏。

css 选项 3

```
#parent {
    padding: 5% 0;
}

#child {
    padding: 10% 0;
} 
```

> 在上面的 css 中，我在两个元素上设置了顶部和底部填充。将其设置在子项上将确保子项中的内容垂直居中，将其设置在父项上可确保整个子项在父项中居中。
> 
> 我正在使用相对测量来允许每个 div 动态增长。如果其中一个元素或其内容需要使用绝对测量值进行设置，那么您需要进行一些数学运算以确保事情相加。
> 
> 例如，如果父项的高度为 400 像素，子项的高度为 100 像素，我们需要在顶部和底部都有 150 像素的填充。
> 
> 150 + 150 + 100 = 400
> 
> 除非我们的 % 值正好对应于 150 像素，否则在这种情况下使用 % 可能会出错。
> 
> 这种方法适用于任何地方。不利的一面是，根据您项目的具体情况，您可能需要做一些数学运算。但是，如果您符合开发灵活布局的想法，其中您的测量都是相对的，您可以避免数学。
> 
> 注意：此方法通过在外部元素上设置填充来工作。您可以翻转事物，而是在内部元素上设置相等的边距。我倾向于使用填充，但我也成功地使用了边距。您选择哪一种取决于您的项目的具体情况。

[来源](http://www.vanseodesign.com/css/vertical-centering/)

# php - phpunit selenium2 扩展中的显式等待

> ID：14064346
> 
> 赞同：7
> 
> 时间：2012-12-28T03:50:37.517
> 
> 标签：php, testing, selenium, phpunit, selenium-webdriver

对于 C#，有一种方法可以编写等待页面上的元素出现的语句：

```
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
IWebElement myDynamicElement = wait.Until<IWebElement>((d) =>
    {
        return d.FindElement(By.Id("someDynamicElement"));
    }); 
```

但是有没有办法在 phpunit 的 selenium 扩展中做同样的事情？

## 注1

我发现的唯一东西是`$this->timeouts()->implicitWait()`，但显然这不是我要找的东西。

## 笔记2

这个问题是关于 Selenium2 和 PHPUnit_Selenium2 扩展的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T23:24:13.573

你找到的`implicitWait`是你可以使用的，而不是waitForCondition。正如[WebDriver API](http://dvcs.w3.org/hg/webdriver/raw-file/tip/webdriver-spec.html#timeouts-1)的规范（您还发现了 ;)）所述：

> 隐式 - 设置驱动程序在搜索元素时应等待的时间。搜索单个元素时，驱动程序应轮询页面，直到找到一个元素或超时到期，以先发生者为准。

例如，此代码将等待最多 30 秒，以便在单击元素之前出现：

```
public function testClick()
{
    $this->timeouts()->implicitWait(30000);
    $this->url('http://test/test.html');
    $elm = $this->clickOnElement('test');
} 
```

缺点是它是在会话的生命周期内设置的，除非它设置回 0，否则可能会减慢其他测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:34:42.790

根据我的经验，很难从 phpunit 调试 selenium 测试用例，更不用说维护它们了。我在项目中使用的方法是使用 Selenium IDE，将测试用例存储为 .html 文件并仅通过 phpunit 调用它们。如果有任何问题，我可以从 IDE 中午餐它们并以更简单的方式进行调试。Selenium IDE 有 waitForElementPresent、waitForTextPresent 和可能的其他方法，可以解决您的问题。如果你想尝试一下，你可以在继承自 Selenium 测试用例类的类中使用这个方法。

```
 $this->runSelenese("/path/to/test/case.html"); 
```

# jquery-ui - 使用jquery的jsp ajax调用

> ID：14064350
> 
> 赞同：10
> 
> 时间：2012-12-28T03:51:14.380
> 
> 标签：jquery-ui, jquery, jquery-plugins

我有这个代码片段，我将数据传递给另一个 jsp 文件。

**Javascript**

```
$(document).ready(function() {
    $("#click").click(function() {
        name = $("#name").val();
        age = $("#age").val();
        $.ajax({
            type : "POST",
            url : "pageTwo.jsp",
            data : "name=" + name + "&age=" + age,
            success : function(data) {
                $("#response").html(data);
            }
        });
    });     
}); 
```

**HTML**

```
<body>
    Name:<input type="text" id="name" name="name">
    <br /><br /> 
    Age :<input type="text" id="age" name="age">
    <br /><br />
    <button id="click">Click Me</button>
    <div id="response"></div>
</body> 
```

在**pageTwo.jsp**中，我的代码是

```
 <%
   String name = request.getParameter("name");
   String age = request.getParameter("age");
   out.println(name + age);
 %> 
```

但这不起作用。我的 Jquery 有什么错误吗？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:03:49.813

```
$("#click").click(function(e) {
    // e.preventDefault();
    ...
    return false;
}); 
```

当然，安装 firebug 或使用 chrome 默认开发人员工具 (f12)。打开控制台并运行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:07:28.450

```
$(document).ready(function () {
    $("#click").click(function () {
        name = $("#name").val();
        age = $("#age").val();
        $.ajax({
            type: "POST",
            url: "pageTwo.jsp",
            data: "{'name':'" + name + "','age':'" + age + "'}",
            contentType: "application/json",
            async: false,
            success: function (data) {
                $("#response").html(data.d);
            }
        });
    });
}); 
```

# php - PHP Sum 3 数字等于确切数字（性能问题）

> ID：14064351
> 
> 赞同：0
> 
> 时间：2012-12-28T03:51:36.683
> 
> 标签：php, performance

我正在寻找一个解决方案来总结 3 个数字（在一个数组内 - 这是一个给定的数字列表），它等于一个数字。

例如

```
$sum = 172300
$array = array(11000,
1100,
2000,
1000,
4500,
83200,
3700,
29000
7000,
500,
1000,
2000,
20000
) 
```

我已经尝试过这个解决方案，但是，我将我的 PHP 设置为 execute_time 到 6000 它也不能给我一个结果。 [https://stackoverflow.com/revisions/76ee7de8-574f-4b0a-b078-8edff66d885d/view-source](https://stackoverflow.com/revisions/76ee7de8-574f-4b0a-b078-8edff66d885d/view-source)

我希望我能得到帮助来解决这个问题。我确实尝试了 3SUM 解决方案，它也无法输出结果。

我的数组列表有大约 100 个值，这意味着它有很多可能的组合，任何解决方案都可以帮助减少执行时间？

我需要帮助来解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:54:36.737

对数组进行排序。取最大的项目，然后寻找第一个项目（从第二个最大的项目开始），使两个项目加起来小于目标。然后，从最小的项目开始，看看是否有匹配项。如果不是，请将第二个数字向下移动一位，然后重试。重复此步骤，直到第二个小于（最大的一个 - 目标）的一半。此时，丢弃最大的项目，并重复整个过程（减去排序）。

您应该以比随机搜索更优化的方式找到您的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T03:58:24.457

我相信你正在寻找这个算法[http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)

更准确地说[http://en.wikipedia.org/wiki/Subset_sum_problem](http://en.wikipedia.org/wiki/Subset_sum_problem)

# sql-server - 如何获取此查询中记录的正确行号

> ID：14064352
> 
> 赞同：-2
> 
> 时间：2012-12-28T03:51:55.370
> 
> 标签：sql-server, reporting-services, reportingservices-2005

全部，

我有以下查询，它按照我的预期创建了一个结果集，但是真实记录都以行号 1 回归。我希望它们像假记录一样以递增的行号返回（当你看到代码和结果你会明白我的意思。）。

```
Declare @FakeEquipment TABLE(
EquipmentID varchar(25),
EquipmentDesc varchar(150), 
TrackingID varchar(25))

Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz01')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz02')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz03')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz04')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz05')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz06')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz07')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz08')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz09')
Insert into @FakeEquipment values( 'aaaa01',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa02',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa03',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa04',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa05',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa06',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa07',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa08',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa09',NULL,'zzz10')
Insert into @FakeEquipment values( 'aaaa10',NULL,'zzz10')

Select 
        Equipment_EquipmentID,
        Equipment_Description,
        JobAccount_TrackingID
        ,row as rowcnt

        from 
        (
        Select row_number() over (partition by Equipment_EquipmentID order by JobAccount_TrackingID) row,*
        from 

        (SELECT DISTINCT
        CustomizedFieldLogEquipmentJobAccount_1.Equipment_EquipmentID, 
        CustomizedFieldLogEquipmentJobAccount_1.Equipment_Description, 
        CustomizedFieldLogEquipmentJobAccount_1.JobAccount_TrackingID
        FROM
        CustomizedFieldLogEquipmentJobAccount AS CustomizedFieldLogEquipmentJobAccount_1 INNER JOIN CustomizedAccount ON CustomizedFieldLogEquipmentJobAccount_1.Account_AccountID = CustomizedAccount.AccountID
        WHERE
        (CustomizedAccount.AppliesToEquipment = 1)
        AND 
        (CustomizedFieldLogEquipmentJobAccount_1.FieldLog_FieldLogID =1219)
        AND
        IsRented = 0
        AND
        isnumeric(right(CustomizedFieldLogEquipmentJobAccount_1.JobAccount_TrackingID,1))=1

        union

        select 
        EquipmentID, 
        EquipmentDesc,
        TrackingID
        from @FakeEquipment) a 
)b 

Group By
Equipment_EquipmentID,
Equipment_Description,
JobAccount_TrackingID
,row
order by Equipment_EquipmentID 
```

它返回结果如下：

```
Equipment_EquipmentID   Equipment_Description   JobAccount_TrackingID   rowcnt
1218    PAVER   0441-01409  1
127 Ford F250 Pick-Up   0441-01409  1
1350    PNEUMATIC ROLLER    0441-01409  1
1354    VIBRATORY PUP ROLLER    0441-01409  1
1445    JOHN DEERE SKIP 0441-01409  1
16-003  FORD F-350  0441-01409  1
30  F550 CREW TRUCK 0441-01409  1
3-007   TRAFFIC CONTROL F-550   0441-01409  1
6-002   CAT PAVING ROLLER   0441-01409  1
6-006   CAT PAVING ROLLER   0441-01409  1
aaaa01  NULL    zzz01   1
aaaa01  NULL    zzz02   2
aaaa01  NULL    zzz03   3
aaaa01  NULL    zzz04   4
aaaa01  NULL    zzz05   5
aaaa01  NULL    zzz06   6
aaaa01  NULL    zzz07   7
aaaa01  NULL    zzz08   8
aaaa01  NULL    zzz09   9
aaaa01  NULL    zzz10   10 
```

如您所见，假设备表中的记录都有正确的行号，而真实记录的行号都是 1。

我要做的是在 2 个 SSRS 2005 矩阵控件之间拆分记录集，因此每个控件都有 6 条记录（最多 12 条），但我无法做到这一点。对此方向的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:01:02.117

这是按预期对记录进行编号。您正在对数据进行分区，`Equipment_EquipmentID`并且您从值的第一部分获得的数据`union`都是不同的。所以`row_number`不会增加。

仅当`row_number()`分区中的值与您的值不同时才会增加。

如果你想使用`row_number()`你可能不得不改变你分区的方式。

例如使用以下数据：

```
CREATE TABLE yourData
    ([Equipment_EquipmentID] varchar(6), [JobAccount_TrackingID] varchar(10))
;

INSERT INTO yourData
    ([Equipment_EquipmentID], [JobAccount_TrackingID])
VALUES
    ('1218', '0441-01409'),
    ('127', '0441-01409'),
    ('1350', '0441-01409'),
    ('1354', '0441-01409'),
    ('1445', '0441-01409'),
    ('16-003', '0441-01409'),
    ('30', '0441-01409'),
    ('3-007', '0441-01409'),
    ('6-002', '0441-01409'),
    ('6-006', '0441-01409')
; 
```

如果您使用以下查询：

```
select *,
  row_number() over(partition by Equipment_EquipmentID order by JobAccount_TrackingID) rn1
from yourdata; 
```

您将看到行号没有增加。

但是，如果您将分区更改为以下内容：

```
select *,
  row_number() over(partition by JobAccount_TrackingID order by JobAccount_TrackingID) rn2
from yourdata; 
```

行号递增。

请参阅带有两个查询[的演示的 SQL Fiddle 。](http://sqlfiddle.com/#!3/06831/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:08:22.083

当您实际添加唯一行 ID 时，这是可能的。

首先为“ID”添加一个新列到表中，并自动用递增的数字填充它。

然后每一行都有一个唯一的 ID，您可以通过该 ID 调用特定的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:11:55.703

蓝脚的答案+1。我更喜欢让数据库比报告做更多的计算，在这种情况下输出决定矩阵的“组”列，然后在“组”列上使用矩阵过滤器可能更简单：

```
SELECT  *, 
        [Grouping] = CASE 
            WHEN ROW_NUMBER() OVER (ORDER BY NEWID()) <= 6 THEN 'A' 
            WHEN ROW_NUMBER() OVER (ORDER BY NEWID()) <= 12 THEN 'B' 
            ELSE 'C' 
        END 
FROM    ... 
```

# javascript - 如果填充了文本框，如何自动取消选中复选框

> ID：14064353
> 
> 赞同：0
> 
> 时间：2012-12-28T03:52:12.900
> 
> 标签：javascript, checkbox, default, textfield

我已将复选框设置为默认检查。如果填充了某些文本字段，如何自动取消选中该复选框。我正在考虑使用javascript。

* * *

我试过用这个

```
<input type="text" name="commentID" id="commentID" onkeyup="userTyped('skipID', this)"/>
<input type="checkbox" name="skipID" value="N" id="skipID" checked="checked"  /> 
```

和 javascript

```
function userTyped(commen, e){
if(e.value.length > 0){
    document.getElementById(commen).checked=false;
}else{
    document.getElementById(commen).checked=true;
}}​ 
```

它可以工作，但是如果我有 3 个文本字段，并且我希望仅在填充所有文本字段后才填充复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T03:55:31.807

只需这样做：

```
<input type="checkbox" id="someid" checked="checked"/>

<textarea onchange="if (this.value != '') document.getElementById('someid').checked = false;"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T03:56:07.877

```
 if(document.getElementById('yourtextBox').value!=' ')
 {
    document.getElementById('checbox').checked=false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T17:09:00.837

```
$("#comment").on("keyup blur", function () {
    $("#box").prop("checked", this.value == "");
}); 
```

[编辑：您也可以使用 jQuery](http://jsfiddle.net/YpRyx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T04:24:52.280

试试下面的代码。在此代码中，每次在文本字段中键入字符时，都会调用该函数并且文本字段值的长度不为零，复选框将被取消选中，并且在您清除文本字段时将被选中

```
//Function get called when you type each letter
function OnChangeTextField(){
    //getting the length of your textbox
    var myLength = $("#myTextbox").val().length;
    if(myLength > 0){
        $("#myCheckbox").attr("checked", false);
    }else{
           $("#myCheckbox").attr("checked", true);
        }

}

<input type = "text" id = "myTextbox" onkeyup= "OnChangeTextField();"/>
<input type="checkbox" id = "myCheckbox" value = "true" checked = "checked"/> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-16T05:58:58.533

```
 $("#comment").on("keyup blur", function() {
    $("#box").prop("checked", this.value == "");
}); 
```

[试试 jQuery，这对我有用...](http://jsfiddle.net/mannielucero/SF7F7/2/)

# python - 如何在linux上下载没有扩展名的图像

> ID：14064355
> 
> 赞同：0
> 
> 时间：2012-12-28T03:53:11.433
> 
> 标签：python, linux, wget

在我的 python 脚本中，我从网页中获取图像的链接。但是很少有图片链接是这样的

`image.php?u=155594&dateline=1182409179`

终端是这样说的

```
HTTP request sent, awaiting response... 200 OK
Length: 4159 (4.1K) [image/png] 
```

但是图像被保存为`image.php?blabla`

有什么可以用扩展名以正确的格式保存它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:21:37.267

要使用 wget，您需要使用`-O`选项来指定输出文件。例如：

```
wget -O img.png http://example.com/image.php?foo=bar 
```

当你不知道类型时，这里有一个小 Python 脚本：

```
import os
import urllib2
import sys
d = urllib2.urlopen(sys.argv[0])
o = open('image.%s' % d.info().gettype(), 'w')
o.write(d.read()) 
```

# php - 正则表达式匹配特定的表达式格式

> ID：14064370
> 
> 赞同：0
> 
> 时间：2012-12-28T03:56:29.813
> 
> 标签：php, regex

我正在尝试找到一个匹配以下格式的特定表达式的正则表达式：

```
name = value 
```

但是，我需要它不匹配：

```
name.extra = value 
```

我有以下正则表达式：

```
([\w\@\-]+) *(\=|\>|\>\=|\<|\<\=) *([^\s\']+) 
```

它匹配第一个表达式，但也匹配第二个表达式 ( `extra = value`)。

我需要一个只匹配第一个表达式而不匹配第二个表达式的正则表达式（即带点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:00:39.480

只需在表达式中添加`^`开头和`$`结尾

```
^([\w\@\-]+) *(\=|\>|\>\=|\<|\<\=) *([^\s\']+)$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:10:09.040

否定的后向断言 ( `?<!`) 可能是您正在寻找的。

对于一个简单的任务：`(?<!\.)\b(\w+)\s*=\s*(\w+)`

**概括：**

*   `(?<!\.)`= 阻止该`.`位置的角色
*   `\b`= 单词的开头

捕获的单词是：

*   \1 = 目的地名称
*   \2 = 源名称

并使用您指定的正则表达式，这应该会给出以下内容：

`(?<!\.)\b([\w\@\-]+) *(\=|\>|\>\=|\<|\<\=) *([^\s\']+)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:39:42.467

你没有说你使用的是什么语言，但听起来你根本不需要使用正则表达式。

如果您使用的是 PHP，则使用该`explode`函数在`=`. 然后检查参数名称中是否有句点。

# javascript - angularjs表单验证语法错误令牌意外'{'

> ID：14064372
> 
> 赞同：1
> 
> 时间：2012-12-28T03:57:07.147
> 
> 标签：javascript, angularjs

我正在使用指令来验证 angularjs（版本 1.0.2）中的两个表单字段（日期）。为了验证表单，我使用以下指令。
[http://jsfiddle.net/cafau/Ja2ar/](http://jsfiddle.net/cafau/Ja2ar/)
我所做的唯一更改是将指令重命名为 ui-validate。我在
[http://jsfiddle.net/sidkurias/xXf6b/](http://jsfiddle.net/sidkurias/xXf6b/)创建了一个小提琴 我已经包含了我正在使用的部分 html 和控制器的相关部分。我想从指令调用控制器 validStartDate 和 startBeforeEnd 上有两种方法。当我这样做时，我收到以下错误

```
Error: Syntax Error: Token '{' is unexpected, expecting [)] at column 13 of the expression [(function (){
var sdate = new Date($scope.avail.sdate),
    today = new Date(getDefaultDates(0));
return sdate >= today ;
}) && true] starting at [{
var sdate = new Date($scope.avail.sdate),
    today = new Date(getDefaultDates(0));
return sdate >= today ;
}) && true].at Error (<anonymous>)
at throwError (http://g.dev/app/lib/angular/angular.js:5867:11)
at consume (http://g.dev/app/lib/angular/angular.js:5905:7)
at primary (http://g.dev/app/lib/angular/angular.js:6075:7)
at unary (http://g.dev/app/lib/angular/angular.js:6066:14)
at multiplicative (http://g.dev/app/lib/angular/angular.js:6049:16)
at additive (http://g.dev/app/lib/angular/angular.js:6040:16)
at relational (http://g.dev/app/lib/angular/angular.js:6031:16)
at equality (http://g.dev/app/lib/angular/angular.js:6022:16)
at logicalAND (http://g.dev/app/lib/angular/angular.js:6013:16) 
<form name="availForm" ui-validate="{startDate: validStartDate, sbe:startBeforeEnd}" class="ng-pristine ng-valid"> <br> 
```

对 watch 函数的调用可以正确解析验证函数，但随后会引发上述语法错误。关于为什么 angular 不喜欢函数定义的任何想法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T08:27:42.547

看来您需要在函数周围加上引号 ('')：

```
ui-validate="{startDate: 'validStartDate()', sbe:'startBeforeEnd()'}" 
```

# sql-server - 将所有者添加到 SQL Server 2005 数据库中

> ID：14064373
> 
> 赞同：0
> 
> 时间：2012-12-28T03:57:43.287
> 
> 标签：sql-server, sharepoint

SBS Server 2008 上的 SharePoint 最近一直在播放，只是给出了 404 消息。我想我已经找到了它的问题所在。数据库似乎没有所有者！[没有数据库所有者][1]

我目前正在尝试使用

```
USE SampleDB
EXEC sp_changedbowner 'DOMAINNAME\USERNAME' 
```

命令。这给了我一个错误：

> 消息 911，级别 16，状态 1，第 1 行无法在 sysdatabases 中找到数据库“SharePoint_AdminContent_d4e397f2”的条目。未找到具有该名称的条目。确保输入的名称正确。

有谁知道如何将所有者应用于数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:24:16.083

我怀疑问题出在`USE SampleDB`命令上。该错误表明它找不到您的`SharePoint_AdminContent_d4e397f2`数据库。`USE`在命令中检查数据库的拼写。

# android - Android：离线地图

> ID：14064374
> 
> 赞同：-1
> 
> 时间：2012-12-28T03:57:45.617
> 
> 标签：android, android-layout

您好，我正在开发一个应用程序，其中 .jpg 图像将用作地图。我正在为我大学附近互联网连接太低的徒步旅行地点开发此应用程序。

因此，仅使用预先保存的图像作为地图和 GPS，我希望让用户导航。我想知道如何显示可以平移和缩放的图像。我还希望在图像上添加一个叠加层以显示他的当前位置。.

请给一个简短的想法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:24:43.587

欢迎使用 Stack Overflow——这当然可以通过 Google 地图实现。您可以告诉地图为您加载图像——为每个图像提供边界角。

这**不是**一个容易解决的问题，因为有很多很多活动部件：

1.  最简单的部分实际上是获取带有地理参考角点的图像——最简单的格式可能是 GeoTIFF（或者只是一个列出角点的 XML）
2.  您必须管理图像缓存，一次加载太多图像，您将耗尽所有可用内存
3.  您必须监控每个平移/缩放/等的地图以适当地加载/卸载图像。理想情况下，当您缩小并逐渐放入越来越高分辨率的图像时，您会加载低分辨率图像

这是如何实现的？嗯 - 这是最难的部分。您基本上需要扩展[Google Map 的 Overlay 类](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Overlay) 并覆盖该`draw`方法。

1.  `draw`作为方法的一部分，您将图像（以及图像位图本身）的角点提供给地图
2.  当图像在视图中时，加载它，当它不在视图中时，卸载它。
3.  当您加载/卸载图像时，调用`postInvalidate`地图视图以强制它重新绘制图块。

值得注意的是，谷歌地图会缓存一些图像——如果你的大学校园足够小，你可能可以将整个图像放入缓存中。那么你根本不需要做任何花哨的工作。

# javascript - Javascript 在 IE 中不起作用

> ID：14064380
> 
> 赞同：0
> 
> 时间：2012-12-28T03:58:47.010
> 
> 标签：javascript

我在 IE 中遇到自动搜索 javascript 的问题。它在 Firefox 中正常工作。要了解我在说什么，请访问：

然后开始在搜索栏中输入单词购物车。您会在 Firefox 中看到它在下方排列，但在 IE 中却没有。任何帮助将不胜感激！

这是代码：

```
<script type="text/javascript">
function findPos(obj) {
    var curleft = curtop = 0;
    if (obj.offsetParent) {
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
    }
    return curleft.toString() + ' ' + curtop.toString();
}

(function() {
    var nxt_host = (("https:" == document.location.protocol) ? "https://" : "http://");
    nxt_host += "vector.nextopiasoftware.com/";
    document.write(unescape("%3C") + "script src='" + nxt_host + "nxt-ac-js-1.3-min.js' type='text/javascript'" + unescape("%3E%3C/script%3E"));
    document.write(unescape("%3C") + "link rel='stylesheet' type='text/css' href='" + nxt_host + "ac-1.3.css'" + unescape("%3E"));
})();
</script>

<script type="text/javascript">
(function() {
    var jnxtac = jQuery.noConflict(true);
    jnxtac("#myInput").css('z-index', '20000');
    jnxtac("#myInput").autocomplete({
        cid: '80c356394c27c27aacf41c465e455f7d'
    });
})();

if (navigator.appVersion.indexOf("MSIE") != -1) {
    var offsets = findPos(document.getElementById('search')).split(' ');
    var acStyleEl = document.createElement('style');
    var acStyleCss = '.ui-autocomplete {position:absolute !important;left: ' + (parseInt(offsets[0]) + 200) + 'px !important; top: ' + (parseInt(offsets[1]) + 24) + 'px !important;}';
    var bodyEl = document.getElementsByTagName('body')[0];
    acStyleEl.setAttribute("type", "text/css");
    acStyleEl.setAttribute("id", "acCssElement");
    bodyEl.appendChild(acStyleEl);
    acStyleEl.styleSheet.cssText = acStyleCss;
}​
</script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:34:25.610

正如其他评论所说，这不是很好的代码，可以重写以更好地工作并且更清晰。但是，这就是说我认为您所问的具体问题，它在 IE 中不起作用是因为有一个 if 语句读取浏览器代理（导航器）字符串，如果它包含“MSIE”，它不会显示您的菜单。

```
if (navigator.appVersion.indexOf("MSIE") != -1) { 
```

此行获取浏览器代理字符串，如果不包含“MSIE”（navigator.appVersion.indexOf() 将返回字符串开头的索引，如果未找到该字符串，则返回“-1”）然后执行剩余的函数中的代码：

```
if (navigator.appVersion.indexOf("MSIE") != -1) {
  var offsets  = findPos(document.getElementById('search')).split(' ');
  var acStyleEl = document.createElement('style');
  var acStyleCss = '.ui-autocomplete {position:absolute !important;left: ' + (parseInt(offsets[0]) +200) + 'px !important; top: ' + (parseInt(offsets[1]) + 24) + 'px !important;}';
  var bodyEl = document.getElementsByTagName('body')[0];
  acStyleEl.setAttribute("type", "text/css");
  acStyleEl.setAttribute("id", "acCssElement");
  bodyEl.appendChild(acStyleEl);
  acStyleEl.styleSheet.cssText = acStyleCss;
} 
```

代码很复杂，虽然我不确定 if 语句中的代码是做什么的，但它在 IE 中不会这样做，这听起来像你的问题......删除 if 语句，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:10:54.290

我不认为这是 css 和 javascript 的问题，在 IE 中，您的脚本正在中断，因此样式混乱并且组合框 div 向右移动。

```
d=c.width("").width() 
```

这是正在破坏的代码。

您是否调试过您的应用程序或更改了此内容。

# scala - Scala 光滑查询在列表中的位置

> ID：14064382
> 
> 赞同：29
> 
> 时间：2012-12-28T03:59:37.080
> 
> 标签：scala, typesafe-stack, slick

我正在尝试学习使用 Slick 来查询 MySQL。我有以下类型的查询来获取单个访问对象：

```
Q.query[(Int,Int), Visit]("""
    select * from visit where vistor = ? and location_code = ?
""").firstOption(visitorId,locationCode) 
```

我想知道的是如何更改上述内容以查询以获取 List[Visit] 的位置集合......像这样：

```
val locationCodes = List("loc1","loc2","loc3"...)
Q.query[(Int,Int,List[String]), Visit]("""
    select * from visit where vistor = ? and location_code in (?,?,?...)
""").list(visitorId,locationCodes) 
```

Slick可以做到这一点吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-28T11:28:25.250

正如另一个答案所暗示的，这对于静态查询来说很麻烦。静态查询接口要求您将绑定参数描述为`Product`. `(Int, Int, String*)` 不是有效的scala，并且使用`(Int,Int,List[String])`也需要一些kludges。此外，必须确保`locationCodes.size`始终等于`(?, ?...)`查询中的数量是脆弱的。

在实践中，这并不是什么大问题，因为您想改用查询 monad，这是使用 Slick 的类型安全且推荐的方式。

```
val visitorId: Int = // whatever
val locationCodes = List("loc1","loc2","loc3"...)
// your query, with bind params.
val q = for {
    v <- Visits 
    if v.visitor is visitorId.bind
    if v.location_code inSetBind locationCodes
  } yield v
// have a look at the generated query.
println(q.selectStatement)
// run the query
q.list 
```

这是假设您的表设置如下：

```
case class Visitor(visitor: Int, ... location_code: String)

object Visitors extends Table[Visitor]("visitor") {
  def visitor = column[Int]("visitor")
  def location_code = column[String]("location_code")
  // .. etc
  def * = visitor ~ .. ~ location_code <> (Visitor, Visitor.unapply _)
} 
```

请注意，您始终可以将查询包装在方法中。

```
def byIdAndLocations(visitorId: Int, locationCodes: List[String]) = 
  for {
    v <- Visits 
    if v.visitor is visitorId.bind
    if v.location_code inSetBind locationCodes
  } yield v
}

byIdAndLocations(visitorId, List("loc1", "loc2", ..)) list 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-28T10:32:17.870

它不起作用，因为`StaticQuery object`( `Q`) 期望隐式设置查询字符串中的参数，使用`query`方法的类型参数来创建一种 setter 对象（类型为[`scala.slick.jdbc.SetParameter[T]`](https://github.com/slick/slick/blob/master/src/main/scala/scala/slick/jdbc/SetParameter.fm)）。
的作用`SetParameter[T]`是将查询参数设置为 type 的值`T`，其中所需的类型取自`query[...]`类型参数。

据我所知，没有`T = List[A]`为 generic定义这样的对象`A`，这似乎是一个明智的选择，因为您实际上无法编写带有`IN (?, ?, ?,...)`子句参数动态列表的 sql 查询

* * *

我做了一个实验，通过以下代码提供这样一个隐式值

```
import scala.slick.jdbc.{SetParameter, StaticQuery => Q}

def seqParam[A](implicit pconv: SetParameter[A]): SetParameter[Seq[A]] = SetParameter {  
    case (seq, pp) =>
        for (a <- seq) {
            pconv.apply(a, pp)
        }
}

implicit val listSP: SetParameter[List[String]] = seqParam[String] 
```

在这个范围内，您应该能够执行您的代码

```
val locationCodes = List("loc1","loc2","loc3"...)
Q.query[(Int,Int,List[String]), Visit]("""
    select * from visit where vistor = ? and location_code in (?,?,?...)
""").list(visitorId,locationCodes) 
```

但是您必须始终手动保证大小与子句中`locationCodes`的数量相同`?``IN`

* * *

最后，我相信可以使用宏创建更简洁的解决方法，以概括序列类型。但我不确定这是否是框架的明智选择，因为上述序列大小的动态性质存在问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T04:18:02.700

您可以像这样自动生成 in 子句：

```
 def find(id: List[Long])(implicit options: QueryOptions) = {
    val in = ("?," * id.size).dropRight(1)
    Q.query[List[Long], FullCard](s"""
        select 
            o.id, o.name 
        from 
            organization o
        where
            o.id in ($in)
        limit
            ?
        offset
            ?
            """).list(id ::: options.limits)
  } 
```

并使用隐式 SetParameter 如[pagoda_5b 所说](https://stackoverflow.com/a/14068158/1213348 "pagoda_5b 答案")

```
 def seqParam[A](implicit pconv: SetParameter[A]): SetParameter[Seq[A]] = SetParameter {
    case (seq, pp) =>
      for (a <- seq) {
        pconv.apply(a, pp)
      }
  }

  implicit def setLongList = seqParam[Long] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-31T21:32:13.760

如果您有一个复杂的查询并且上面提到的 for 理解不是一个选项，您可以在 Slick 3 中执行以下操作。但是您需要确保自己验证列表查询参数中的数据以防止 SQL 注入：

```
val locationCodes = "'" + List("loc1","loc2","loc3").mkString("','") + "'"
sql"""
  select * from visit where visitor = $visitor 
    and location_code in (#$locationCodes)
""" 
```

变量引用前面的 # 禁用类型验证，并允许您在不提供用于列表查询参数的隐式转换的函数的情况下解决此问题。

# javascript - 我是疯了还是本地存储......？

> ID：14064383
> 
> 赞同：0
> 
> 时间：2012-12-28T03:59:39.573
> 
> 标签：javascript, for-loop, local-storage

我的目标：通过循环删除以前使用的项目来清理本地存储`for`。

通常，我有很多项目，比如：

```
order-1356666288243 => {"cartID":2713329701836,"productName"...
order-1356666288243 => {"cartID":2713329701836,"productName"... 
```

当我检查总共有多少项目时，我得到正确的从零开始的数量：

```
console.log( localStorage.length ); 
```

即使我`for loop`写出键和值以及`console.log()`其他一些东西，一切都很好：

```
for(var i=0, len=localStorage.length; i<=len; i++) {

    var key = localStorage.key(i);
    var value = localStorage[key];
    console.log(key + " => " + value);

        if(key != '' && key != null){

            console.log( key.indexOf('order-') );
            console.log(i + '. Key: ', key);

            if(key.indexOf('order-') != -1){
                console.log('The key to be removed is: ', key.toString());
                localStorage.removeItem(key.toString());
            }
       }

    console.log(i + ': ' + len);
} 
```

一切几乎都符合人们的预期。但是，当我运行脚本时，这一行**只执行一次：**

```
localStorage.removeItem(key); 
```

或者

```
localStorage.removeItem(key.toString()); 
```

事实上，我必须运行整个脚本的次数与项目数一样多。因此，如果我有 3 个项目，我需要运行循环 3 次以摆脱每个项目。

我很困惑：我哪里做错了？所有的`console.log()`东西都显示了 3 次（如果我有 3 个项目并运行`for loop`一次）。出于绝望，我什至改成`i < len`了`i >= len`，但这也不能解决问题。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:04:19.067

我认为问题在于，当您删除一个项目时，它会改变本地存储的长度。尝试从长度 1 向下迭代到 0 而不是从 0 向上迭代。（顺便说一句，循环条件应该是`i < len`，而不是`i <= len`。根据我的建议，当然应该是`i >= 0`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T04:29:51.673

问题是您在遍历集合时正在修改它。执行此操作时请务必小心。

在这种特殊情况下，当您删除一个项目时，长度会`localStorage`发生变化，因此您最终会跳过项目。

您应该`localStorage` *向后*遍历（最后一项到第一项），或者更好的是，您应该分两次执行此操作：一次收集要删除的键，另一次删除它们：

```
Object.keys(localStorage)
.filter(function(key){return key.indexOf('order-')===0})
.forEach(localStorage.removeItem, localStorage); 
```

或者，如果您需要它在 IE8 或 FF3.x 中工作：

```
var delkeys = [], key, i, len;
for (i=0,len=localStorage.length; i<len, key=localStorage.key(i); i++) {
    if (key.indexOf('order-')===0) {
        delkeys.push(key);
    }
}
for (i=0,len=delkeys.length; i<len, key=delkeys[i], i++) {
    localStorage.removeItem(key);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T04:18:33.957

循环应该倒计时以防止删除键改变存储长度的问题。试试这个 for 循环：

```
for( var i = localStorage.length; i--;){
//make sure to remove references to len in your code
} 
```

# javascript - 收听来自 IRC 的新消息

> ID：14064387
> 
> 赞同：0
> 
> 时间：2012-12-28T04:00:19.827
> 
> 标签：javascript, irc

有没有一种实用的方法来进行设置，使浏览器可以监听来自 IRC 服务器上指定频道的新消息，并将标题更改为“UserX 向您发送消息！” 什么时候发生？

如果有帮助，有问题的 IRC 频道托管在 Rizon.net 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:05:03.327

根据您侦听新消息的代码（AJAX、套接字、轮询等），这将是在发生这种情况时更改标题的代码：

```
document.title = "UserX messaged you!" 
```

您可以将此代码弹出到控制台中以自行检查。

通常，聊天网站（如 Facebook）会存储先前的值并定期更改该值。一旦消息引起注意，脚本应将其恢复为以前的值。

# vector - openCL 简单添加向量返回垃圾值

> ID：14064392
> 
> 赞同：0
> 
> 时间：2012-12-28T04:00:51.133
> 
> 标签：vector, opencl

这是我尝试编写一个 opencl 代码来添加 2 个向量

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#ifdef __APPLE__
#include <OpenCL/opencl.h>
#else
#include <CL/cl.h>
#endif

#define MAX_SOURCE_SIZE (0x100000)
//24/12
//data structure platform, device, context,program, kernel, command queue

void main()
{
    /////////////////////////////////////////////////////////////////////
    //PLATFORM QUERY:
    /////////////////////////////////////////////////////////////////////
    //clGetPlatformIDs(num_entries, platforms, &num_platforms);
    // two part: platform = NULL
    // malloc and get platforms*
    cl_uint num_platforms; //must be uint
    cl_platform_id *platforms;
    clGetPlatformIDs(5, NULL, &num_platforms);
    printf("There are %d platforms \n", num_platforms);
    platforms = (cl_platform_id*) malloc (num_platforms*sizeof(cl_platform_id)); 
    clGetPlatformIDs(5, platforms, &num_platforms);

    for(int i = 0; i < num_platforms; i++)
    {
        char name[40],vendor[40],version[40], profile[40],extensions[4096];
        clGetPlatformInfo(platforms[i],CL_PLATFORM_NAME, sizeof(name), &name, NULL);
        clGetPlatformInfo(platforms[i],CL_PLATFORM_VENDOR, sizeof(vendor), &vendor, NULL);
        clGetPlatformInfo(platforms[i],CL_PLATFORM_VERSION, sizeof(vendor), &version, NULL);
        clGetPlatformInfo(platforms[i],CL_PLATFORM_PROFILE, sizeof(vendor), &profile, NULL);
        //clGetPlatformInfo(platforms[i],CL_PLATFORM_EXTENSIONS, sizeof(vendor), &extensions, NULL);
        printf("Platform %d \n", i);
        printf("Name %s \n", name);
        printf("Vendor %s \n", vendor);
        printf("Version %s \n", version);
        printf("Profile %s \n", profile);
        //printf("Extension %s \n", extensions);
        printf("----------------------------------\n");
    }

    ////////////////////////////////////////////////////////////////
    //DEVICES QUERYING
    ////////////////////////////////////////////////////////////////
    cl_device_id* devices;
    cl_uint num_devices;
    cl_device_fp_config flag ;
    for(int i= 0; i< num_platforms; i++)
    {
        printf("Platform %d has:\n",i);
        clGetDeviceIDs(platforms[i], CL_DEVICE_TYPE_ALL, 3, NULL, &num_devices);
        devices = (cl_device_id*)malloc(num_devices*sizeof(cl_device_id));
        clGetDeviceIDs(platforms[i], CL_DEVICE_TYPE_ALL, num_devices, devices, NULL);
        char name[40];
        for(int j=0; j < num_devices; j++)
        {
            int err= clGetDeviceInfo(devices[j],CL_DEVICE_NAME,sizeof(name),name,NULL);
            if (err<0)
            {
                //printf("Error querying devices name\n");
            }
            else
            {
                printf("Device name %s \n", name);
            }
            err= clGetDeviceInfo(devices[j],CL_DEVICE_NAME,sizeof(flag),&flag,NULL);
            if (flag & CL_FP_DENORM)
            {
                printf("This device support denormalized number \n");
            }
        }
        printf("-----------------------------------\n");
    }

    ///////////////////////////////////////////////////////
    //CONTEXT QUERYING AND CREATING
    ////////////////////////////////////////////////////////
    //NOTE clCreateContext returns cl_context instead of errors
    //REF_COUNT if very important in the future

    //create context for GPU
    cl_context context;
    cl_uint ref_count;
    cl_int err;
    char name[40];
    context= clCreateContext(NULL,1,&devices[0], NULL,NULL,&err);
    clGetContextInfo(context,CL_CONTEXT_REFERENCE_COUNT,sizeof(ref_count), &ref_count, NULL);
    printf("Original reference count is %d \n",ref_count);
    /*clRetainContext(context);
    clGetContextInfo(context,CL_CONTEXT_REFERENCE_COUNT,sizeof(ref_count), &ref_count, NULL);
    printf("Incremented reference count is %d \n",ref_count);
    clReleaseContext(context);
    clGetContextInfo(context,CL_CONTEXT_REFERENCE_COUNT,sizeof(ref_count), &ref_count, NULL);
    printf("Decremented reference count is %d \n",ref_count);*/

    ////////////////////////////////////////////////////////
    //Create programme
    ///////////////////////////////////////////////////////

    size_t program_size;
    err=0;
    cl_program program;
    char* program_buffer;

    FILE* program_handle = fopen("kernel.cl","r"); 

    //More recommendable than source code???
    program_buffer = (char*)malloc(MAX_SOURCE_SIZE);
    program_size = fread( program_buffer, 1, MAX_SOURCE_SIZE, program_handle);
    fclose( program_handle );
    program = clCreateProgramWithSource(context,1,(const char**) &program_buffer,
        (size_t*)&program_size, &err);

    ////////////////////////////////////////////////////////
    //Build Program
    /////////////////////////////////////////////////////// 
    //const char options[] = "-cl-finite-math-only -cl-no-signed-zeros";
    char* program_log;
    size_t log_size;

    err= clBuildProgram(program, 1 , devices, NULL, NULL, NULL);
    if(err < 0) //debug , printing log
    {
        clGetProgramBuildInfo(program, devices[0], CL_PROGRAM_BUILD_LOG, 0, NULL, &log_size);
        program_log = (char*) malloc(log_size+1);
        program_log[log_size] = '\0'; 
        clGetProgramBuildInfo(program,devices[0],CL_PROGRAM_BUILD_LOG,log_size,
            program_log,NULL);
        printf("%s\n",program_log);
        free(program_log);
        //exit(1);
    }

    ///////////////////////////////////////////////////////////////////////////////////
    //create kernel
    ///////////////////////////////////////////////////////////////////////////////////
    cl_uint num_kernels;
    cl_kernel kernel;
    char kernel_name[40];
    kernel = clCreateKernel(program,"add",&err);
    if (err<0)
    {
        perror("could not found any kernels\n");
    }
    //kernels = (cl_kernel*)malloc(num_kernels*sizeof(cl_kernel));
    //clCreateKernelsInProgram(program, num_kernels, kernels, NULL);

    ///FOR REFERNECE
    //for(int i=0; i<num_kernels; i++)
    //{
        clGetKernelInfo(kernel,CL_KERNEL_FUNCTION_NAME,sizeof(kernel_name),kernel_name,NULL);
        printf("Kernel function: %s \n",kernel_name);
    //}

    /////////////////////////////////////////////////////
    //Create command queue
    /////////////////////////////////////////////////////
    cl_command_queue queue = clCreateCommandQueue(context, devices[0],CL_QUEUE_OUT_OF_ORDER_EXEC_MODE_ENABLE,&err);
    if (err < 0)
    {
        printf("Couldn't create command queue \n");
        exit(1);
    }
    clEnqueueTask(queue, kernel, 0, NULL, NULL);//only enqueue

    //////////////////////////////////////////
    unsigned int n= 1000; 
    int* h_a;
    int* h_b;
    int* h_c;
    cl_mem d_a;
    cl_mem d_b;
    cl_mem d_c;

    h_a = (int*) malloc(n*sizeof(int));
    h_b = (int*) malloc(n*sizeof(int));
    h_c = (int*) malloc(n*sizeof(int));

    for(int i=0; i< n; i++)
    {
        h_a[i]= 1;//sinf(i)*sinf(i);
        h_b[i]= 1;//cosf(i)*cosf(i);
    }

    d_a = clCreateBuffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR,sizeof(h_a),NULL,NULL);
    d_b = clCreateBuffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR,sizeof(h_a),NULL,NULL);
    d_c = clCreateBuffer(context, CL_MEM_WRITE_ONLY|CL_MEM_COPY_HOST_PTR,sizeof(h_a),NULL,NULL);

    err = clEnqueueWriteBuffer(queue,d_a,CL_TRUE,0,sizeof(h_a),h_a,0, NULL, NULL);
    err |= clEnqueueWriteBuffer(queue,d_b,CL_TRUE,0,sizeof(h_b),h_a,0, NULL, NULL);

    //////set argument
    err= clSetKernelArg(kernel,0,sizeof(cl_mem),&d_a);
    err= clSetKernelArg(kernel,1,sizeof(cl_mem),&d_b);
    err= clSetKernelArg(kernel,2,sizeof(cl_mem),&d_c);
    err= clSetKernelArg(kernel,3,sizeof(unsigned int),&n);

    ///////////////
    size_t globalsize, localsize;
    localsize=64;
    globalsize=ceil(n/(float)localsize)*localsize;
    err= clEnqueueNDRangeKernel(queue,kernel,1, NULL,&globalsize,&localsize,0,NULL,NULL);
    ////////////////////////
    clFinish(queue);

    err=clEnqueueReadBuffer(queue, d_c,CL_TRUE, 0, sizeof(h_c), h_c, 0 , NULL, NULL);

    for(int i = 0; i< n; i++)
    {
        printf(" h_c[%d] = %d \n", i, h_c[i]);
    }

    clReleaseMemObject(d_a);
    clReleaseMemObject(d_b);
    clReleaseMemObject(d_c);
    clReleaseProgram(program);
    clReleaseCommandQueue(queue);
    clReleaseContext(context);
    clReleaseKernel(kernel);

    free(h_a);
    free(h_b);
    free(h_c);

    getchar();
} 
```

这是我的 kernel.cl

```
__kernel void add(__global int * a, __global int *b, __global int* c, const unsigned n)
{
    int id= get_global_id(0);
    if (id<n)
        c[id]= a[id] + b[id];
} 
```

有了这个，我只收到了垃圾值，例如所有 i 的 h_c[i]= -842150451。请帮我修复它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:27:57.280

这种说法是不正确的：

```
sizeof(h_a) 
```

应该是这样的：

```
n * sizeof(int) 
```

实际上**h_a**只是一个*指针*，所以**sizeof(h_a) = sizeof(int)** => 你只有一个项目的空间。

# regex - 我可以使用正则表达式执行词干提取吗？

> ID：14064393
> 
> 赞同：5
> 
> 时间：2012-12-28T04:00:55.653
> 
> 标签：regex, stemming

如何让我的正则表达式与**一个条件**完全匹配？

例如，我有以下正则表达式：

```
(\w+)(?=ly|es|s|y) 
```

将表达式与单词“glasses”匹配返回：

```
glasse 
```

正确的匹配应该是：

```
glass (match should be on 'es' rather than 's' as in the match above) 
```

该表达式应适用于任何类型的词，例如：

```
films
lovely
glasses
glass 
```

目前正则表达式匹配上述单词为：

```
film - correct
lovel - incorrect
glasse - incorrect
glas - incorrect 
```

单词的正确匹配应该是：

```
film
love
glass
glass 
```

我现在遇到的问题是我不确定如何调整我的正则表达式以完全满足“s”或“es”，因为一个词可能同时包含“眼镜”。

## 更新

谢谢你到目前为止的答案。我很欣赏词干提取的复杂性和语言知识的要求。但是在我的特殊情况下，这些词是有限的（电影、可爱、眼镜和玻璃），因此我只会遇到这些词和上面表达式中的后缀。我没有专门的应用程序。我只是想看看是否可以使用正则表达式。我得出的结论是这是不可能的，但是以下是可能的：

找到或未找到匹配项，例如匹配眼镜但不是玻璃，但匹配电影：

```
film (match) - (films)
glass (match) - (glasses)
glass (no match) - (glass) 
```

我在想的是，是否有一种方法可以将后缀与字符串完全匹配。在上面的示例中，“es”匹配玻璃，因此条件“s”被丢弃。在玻璃（不匹配）的情况下，条件 's' 被丢弃，因为另一个 's' 在它之前，它不完全匹配。我必须承认我对此不是 100% 的，所以我的逻辑可能看起来有点不稳定，这只是一个想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T04:24:16.133

如果您想做词干提取，请使用像[Snowball](http://snowball.tartarus.org/)这样的库。用正则表达式做你想做的事情是不可能的。特别是，如果没有某种语言知识，您的正则表达式将不可能知道应该从“电影”而不是“玻璃”中删除尾随的“s”。

有大量关于词干提取和词形还原的文献。谷歌是你的朋友。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T14:55:13.150

您在这里遇到的基本问题是

```
(\w+)(?=ly|es|s|y) 
```

是*贪婪*的，并且会尽可能多地抓取，同时仍然允许整个正则表达式匹配。您还没有确切说明您使用的是哪种正则表达式，但请尝试

```
(\w+?)(?=ly|es|s|y) 
```

`+?`意思相同`+`但*不情愿*，尽可能少匹配，同时仍然允许整体匹配成功。

但是，这仍然存在拆分`glass`为`glas`and的问题`s`。要处理这个问题，你需要类似的东西

```
(\w+?)(?=ly|es|(?<!s)s|y) 
```

`s`在另一个 s 之前使用否定查找来防止替代匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T10:26:21.390

作为在/为python中寻找这种解决方案的人的案例，自然语言工具包提供了一个RegexpStemmer，它的工作速度非常快

```
# regex stemmer 
from nltk.stem import RegexpStemmer
rs = RegexpStemmer('ing$|s$|ed$|y$', min=3)
t=time.clock()
train[col]=train[col].apply(lambda x: ' '.join([rs.stem(word) for word in x.split()]))
print(time.clock()-t) 
```

[http://www.nltk.org/api/nltk.stem.html](http://www.nltk.org/api/nltk.stem.html)

[http://snowball.tartarus.org/algorithms/english/stemmer.html](http://snowball.tartarus.org/algorithms/english/stemmer.html)

# opengl-es - 只渲染 OpenGL 一次，而不是每一帧

> ID：14064394
> 
> 赞同：0
> 
> 时间：2012-12-28T04:00:59.133
> 
> 标签：opengl-es, opengl-es-2.0

我看到的几乎每个 OpenGL ES 示例都涉及更新每一帧，即使图像本身没有以任何方式移动。

我做了一些测试，我发现只渲染（使用`drawArrays`等）然后呈现渲染缓冲区（这两个动作，一起）一次然后不要再做任何一个，直到你在屏幕上有一些变化。

这是“正常”吗？我只是不认为这真的做了很多。绘制完成后，图形将保留在屏幕上，无需额外的持续渲染。

这可以接受吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:16:34.167

是的，这是可以接受的并且完全有效。您还需要考虑在上下文丢失时再次渲染。举个例子，使用 Android 标准的 OpenGL 辅助类，有一个选项只在需要时绘制，而不是在循环中绘制 (RENDERMODE_WHEN_DIRTY)。

# debugging - 调试内核模块时kgdb找不到源代码

> ID：14064395
> 
> 赞同：1
> 
> 时间：2012-12-28T04:00:58.353
> 
> 标签：debugging, linux-kernel, kernel, kernel-module, kgdb

我想用 kgdb 调试内核模块，请执行以下操作：

gdb：添加符号文件/home/gaoqiang/kernel-32/fs/ext4/ext4.ko 0xffffffffa0122000 -s .bss 0xffffffffa016b380 -s .data 0xffffffffa0168400

gdb：中断 ext4_getattr gdb：c

我成功到达断点，但 gdb 告诉我：“[No Source Available]”那么如何让 gdb 找到模块的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T06:12:27.920

根据你的问题

`(gdb) add-symbol-file /home/gaoqiang/kernel-32/fs/ext4/ext4.ko 0xffffffffa0122000 -s .bss 0xffffffffa016b380 -s .data 0xffffffffa0168400`

我假设该模块存在于目录 /home/gaoqiang/kernel-32/fs/ext4/ 中。如果您的源代码也在目录中，则 gdb 不会给出错误/警告。

`ext4.ko`因此，如果模块说的源文件`ext4.c`和其余的不存在于该目录中，请将它们复制到该目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T20:42:06.643

```
 (gdb)set solib-search-path /home/gaoqiang/kernel-32/fs/ext4/ 
```

# php - 让 jQuery 插件“Wookmark”从左到右显示 div？

> ID：14064398
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:01:13.713
> 
> 标签：php, jquery, html, css

> **可能重复：**
> [正确制作 Wookmark jQuery 顺序 div？](https://stackoverflow.com/questions/14028347/making-wookmark-jquery-order-divs-properly)

我想使用这里可用的 jQuery 插件“Wookmark”：[https ://github.com/GBKS/Wookmark-jQuery](https://github.com/GBKS/Wookmark-jQuery)

我希望它在每一行上从左到右显示，但它显示为：

```
[1] [2] [3] [4]
[7] [8] [6] [5] 
```

而不是这个：

```
[1] [2] [3] [4]
[5] [6] [7] [8] 
```

无论单元格中的内容如何，​​我都希望它从右到左显示。很抱歉没有最好地解释这一点，但我不太擅长用词。但我几乎希望单元格从左到右显示，无论如何并且仍然有效。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:30:10.453

您可以不使用任何插件，而是将 css float:left 赋予您的列表项并使容器宽度为 100%，这样您的列表将按相同的顺序排列。关注css可以帮助你。

```
.container{
width:100%;
    margin:0px;
    left:0px;

}

.container li{
    float:left;
    list-style:none;
    width:100px;
    height:100px;
    margin:10px;
} 
```

检查 jsfiddle [http://jsfiddle.net/sudhanshu414/3GVxT/](http://jsfiddle.net/sudhanshu414/3GVxT/)

如果你需要一些不同的东西告诉我。

并确保您是否使用左浮动，而不是在容器的下一个元素中添加 css clear:both 如果您不希望它与之前的元素一起浮动。

# ruby - 在创建第二个对象之前不调用终结器，除非使用 weakref

> ID：14064400
> 
> 赞同：5
> 
> 时间：2012-12-28T04:01:25.270
> 
> 标签：ruby, weak-references, finalizer

我正在玩红宝石终结器，并注意到一些对我来说非常奇怪的行为。我可以将触发代码减少到以下内容：

```
require "weakref"

class Foo
    def initialize
        ObjectSpace.define_finalizer(self, self.class.finalize)
    end

    def self.finalize
        proc {
            puts "finalizing"
        }
    end
end

Foo.new # does not work
#WeakRef.new(foo) # Using this instead, everything works as expected
sleep 1
ObjectSpace.garbage_collect
puts "... this did not finalize the object"

Foo.new
ObjectSpace.garbage_collect
puts "but this did?" 
```

正如程序所说，在第二次调用 Foo.new 之前没有运行终结器。我尝试在第一次调用垃圾收集器之前增加更多延迟（尽管据我所知，它根本不需要），但这无济于事。

奇怪的是，如果我使用注释掉的行 i，第一个终结器会按照我的预期被调用。在程序退出之前，第二个仍然没有被调用。

谁能解释为什么会这样？我正在运行带有 ruby​​ 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux] 的 Ubuntu 12.10。我尝试阅读弱引用代码，但据我所知，它所做的只是存储对象 object_id 以便以后检索它。

编辑：我知道在这种情况下手动调用垃圾收集器是没有意义的。我只是想了解这背后的机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:52:25.680

您无法收集您的`Foo`参考，因为它在您的终结器中被引用！因此，由于终结器本身持有对对象的引用，GC 永远不会收集它，因此永远不会触发终结器。您可以通过对终结器本身使用 Wea​​kRef 来解决此问题：

```
require "weakref"

class Foo
  class << self
    attr_accessor :objects_finalized

    def finalize
      proc {
        @objects_finalized ||= 0
        @objects_finalized += 1
      }
    end
  end

  def initialize
    ObjectSpace.define_finalizer WeakRef.new(self), self.class.finalize
  end
end

describe Foo do
  it "should be collected" do
    Foo.new
    expect { GC.start }.to change {
      ObjectSpace.each_object(Foo){} }.from(1).to(0)
  end

  it "should be finalized when it is collected" do
    expect { begin; Foo.new; end; GC.start }.to change {
      Foo.objects_finalized }.from(nil).to(1)
  end
end 
```

结果：

```
% rspec weakref.rb
..

Finished in 0.03322 seconds
2 examples, 0 failures 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T23:29:20.447

[我在http://edwinmeyer.com/Release_Integrated_RHG_09_10_2008/chapter05.html](http://edwinmeyer.com/Release_Integrated_RHG_09_10_2008/chapter05.html)上找到了答案（搜索“寄存器和堆栈”）

因为对对象的引用仍然存储在处理器寄存器中，所以垃圾收集器保持安全并假定它仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:28:03.200

请记住，与 Objective-C 或 C++ 等语言不同，对象的所有引用一旦消失，它就会消失，Ruby 是一种垃圾收集语言。解释器没有理由为一个对象调用笨重的低效垃圾收集器。当垃圾收集器运行时，所有其他处理都会停止。这是一个很大的性能打击。解释器足够聪明，可以等到大部分垃圾都出来后再收集。

示例：您是否将装有一块垃圾的垃圾袋带到垃圾箱？不，你等到它满了再走。

如果要强制进行 GC 收集，请尝试`GC.garbage_collect`手动调用收集器。除非你有充分的理由，否则不要在生产中使用它。

# svg - raphael js，计算 setViewBox 宽度高度以修复窗口

> ID：14064402
> 
> 赞同：0
> 
> 时间：2012-12-28T04:01:34.380
> 
> 标签：svg, raphael

我的第一个宽度的 div 内容画布：**1300**，高度 = **500**

然后我将 div 调整为 width = **800**， height = **500**

我将画布的大小调整为 width = **800**， height = **500**以修复窗口

但是画布中的一些元素是隐藏的（因为我的画布宽度现在是 800px）

所以我使用 setViewBox 来缩放它以固定宽度我的新宽度，高度

结果：当我拖动鼠标时，鼠标无法修复元素（我想我为 setViewBox 计算了错误的宽度高度）

其他问题：有什么办法让画布高度在向下拖动元素时自动扩展？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T14:32:36.213

试试这段代码（你必须包括 jquery + raphael js 2.x）：

```
var original_width = 777;
var original_height = 667;
var zoom_width = map_width*100/original_width/100;
var zoom_height = map_height*100/original_height/100;
if(zoom_width<=zoom_height)
   zoom = zoom_width;
else
   zoom = zoom_height;
rsr.setViewBox($("#"+map_name).offset().left, $("#"+map_name).offset().top, (map_width/zoom), (map_height/zoom)); 
```

# forms - perl-cgi 程序中的 500 内部服务器错误

> ID：14064404
> 
> 赞同：0
> 
> 时间：2012-12-28T04:02:00.340
> 
> 标签：forms, perl, cgi, internal-server-error, cgi-bin

我收到错误消息“内部服务器错误。服务器遇到内部错误或配置错误，无法完成您的请求。”

我在 html 中提交一个表单并获取它的值。

HTML 代码 (index.cgi)

```
#!c:/perl/bin/perl.exe
print "Content-type: text/html; charset=iso-8859-1\n\n";
print "<html>";
print "<body>";
print "<form name = 'login' method = 'get' action = '/cgi-bin/login.pl'> <input type = 'text' name = 'uid'><br /><input type = 'text' name = 'pass'><br /><input type = 'submit'>";
print "</body>";
print "</html>"; 
```

获取数据的 Perl 代码 (login.pl)

```
#!c:/perl/bin/perl.exe
use CGI::Carp qw(fatalsToBrowser);
my(%frmfields);
getdata(\%frmfields);
sub getdata {
    my ($buffer) = "";
    if (($ENV{'REQUEST_METHOD'} eq 'GET')) {
        my (%hashref) = shift;
        $buffer = $ENV{'QUERY_STRING'};
        foreach  (split(/&/,$buffer)) {
            my ($key, $value) = split(/=/, $_);
            $key = decodeURL($key);
            $value= decodeURL($value);
            $hashref{$key} = $value;
        }
    }
    else{
        read(STDIN,$buffer,$ENV{'CONTENT_LENGTH'})
    }
}

sub decodeURL{
    $_=shift;
    tr/+/ /;
    s/%(..)/pack('c', hex($1))/eg;
    return($_);
} 
```

HTML 页面正确打开，但是当我提交表单时，出现内部服务器错误。

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T05:35:24.970

Web 服务器的错误日志说明了什么？

不管它说什么，您*必须*自己停止解析表单数据。有一些模块，特别是[CGI.pm](https://metacpan.org/module/CGI)。使用它，您可以这样做：

```
use CGI;

my $CGI = CGI->new();

my $uid  = $CGI->param( 'uid'  );
my $pass = $CGI->param( 'pass' );

# rest of your script 
```

更清洁，更安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T11:31:15.020

我同意 Tore 的观点，你不能自己解析这个。您的代码有多个错误。你不允许多个参数值，你不允许 ; 备用分隔符，您不会使用 URL 中的查询字符串处理 POST，等等。

我不知道它会免费在线多久，但[我的新书“Beginning Perl”的第 15 章涵盖了 Web 编程](http://ofps.oreilly.com/titles/9781118013847/the_interwebs.html)。这应该让你开始一些体面的基础知识。请注意，在线版本是早期的草稿。实际的书还包括第 19 章，其中有一个完整的 Web 应用程序示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T04:12:49.463

可能是这条线有问题吗？

```
my (%hashref) = shift; 
```

您正在初始化一个正确的哈希，但`shift`会给您一个哈希引用，因为您做了`getdata(\%frmfields);`. 你可能想要这个，而不是：

```
my $hashref = shift; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T12:59:56.070

“500 Internal Server Error”只是意味着某些事情没有按照Web服务器的预期方式工作。也许您没有启用 CGI。也许脚本不可执行。也许它位于不允许 Web 服务器访问的目录中。甚至有可能 Web 服务器成功地运行了脚本并且它运行良好*，*但没有使用一组有效的 HTTP 标头开始其输出。您需要查看 Web 服务器的错误日志以找出它不喜欢的内容，这可能是也可能不是 Perl 问题。

但是，就像其他人所说的那样，不要尝试解析查询字符串并`%ENV`自己卑躬屈膝。使用许多可用且已知可以正常工作的精细模块或框架之一。 [CGI.pm](https://metacpan.org/module/CGI)是它们的鼻祖，适用于较小的项目，但我建议寻找合适的 Web 应用程序框架，例如[Dancer](https://metacpan.org/module/Dancer)、[Mojolicious](https://metacpan.org/module/Mojolicious)或[Catalyst](https://metacpan.org/module/Catalyst)（还有很多其他的，但这些是三巨头）如果您计划使用多个相对简单的页面和表单来构建任何东西。

# objective-c - 包装 NSUserDefaults 的模式是什么？

> ID：14064405
> 
> 赞同：6
> 
> 时间：2012-12-28T04:02:04.993
> 
> 标签：objective-c, ios, cocoa-touch, design-patterns, nsuserdefaults

我的应用程序使用 [NSUserDefaults standardUserDefaults] 作为快速而肮脏的数据库来存储有关用户和应用程序本身的状态。NSUserDefaults 的问题在于，它的灵活性允许下线出现大混乱，例如，当不同的文件都以自己的方式设置和读取字典中的不同键时。您无法执行规则，您可以搞砸密钥名称等。

我为 NSUserDefaults 编写了一个简单的单例“管理器样式”包装器，它在使用时都负责设置默认值，隐藏用于获取值的键的名称并封装一些额外的逻辑，例如编码到 NSData，在存储和从存储中检索对象。

在这一点上，它们是由读取/设置访问器支持的属性，但有些东西让我觉得不对劲，我想知道是否有更优雅的方式来实现相同的结果。有相当多的样板文件，语法最终有点令人不快。给你举个例子：

。H：

```
@interface UserDefaultsManager: NSObject

+ (UserDefaultsManager *)sharedInstance;

@property (nonatomic, assign) NSInteger somethingImTracking;

@end 
```

和.m：

```
NSString * const kSomethingImTracking= @"SomethingImTracking";

@implementation UserDefaultsManager

[...]

- (NSInteger)somethingImTracking
{
    return [[[NSUserDefaults standardUserDefaults] objectForKey:kSomethingImTracking] intValue];
}

- (void)setSomethingImTracking:(NSInteger)somethingImTracking
{
    [[NSUserDefaults standardUserDefaults] setInteger:somethingImTracking forKey:kSomethingImTracking];
} 
```

并访问：

```
NSInteger foo = [UserDefaultsManager sharedInstance].somethingImTracking; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T07:49:20.697

就我个人而言，我使用字符串常量来存储键名，并且直接访问用户默认对象，但我不倾向于在很大程度上使用默认值，或者在许多不同的类中使用默认值。

我对您的代码所做的一项改进是将它们全部作为类方法。单例没有任何好处（您没有维护任何状态，这一切都在默认对象中），这`...sharedInstance`从您的使用模式中去除了一些难看的重复代码 ( )。

`synchronize`不必每次设置都包含。只有在快速连续地从不同线程访问默认值时才需要它。操作系统也会定期调用它自己。

# ios - 使用 JSON 和 php 的 iOS 错误

> ID：14064406
> 
> 赞同：0
> 
> 时间：2012-12-28T04:02:07.067
> 
> 标签：ios, json, nsarray, nsdictionary

我正在尝试使用 JSON 来解析 php 文件中的一些输出，该文件有望从我的 MySQL 数据库中返回一些数据。但是，我收到错误消息：-JSONValue 失败。错误是：令牌 [A] 的非法开始。php 脚本返回一个字典数组，用于在地图上绘制注释。我究竟做错了什么？

```
- (void)getDeviceLocations {

    NSLog(@"Getting Device Locations");

    NSString *hostStr = @"http://98.246.50.81/firecom/api/getdevicelocations.php";
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:hostStr]];
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
    id object = [serverOutput JSONValue];
    NSMutableArray *array = (NSMutableArray *)object;

    for (NSDictionary *dictionary in array) {

        CLLocationCoordinate2D coord = {[[dictionary objectForKey:@"latitude"] doubleValue], [[dictionary objectForKey:@"longitude"] doubleValue]};

        Annotation *ann = [[Annotation alloc] init];
        ann.title = [dictionary objectForKey:@"deviceid"];
        ann.coordinate = coord;
        [mapView addAnnotation:ann];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:23:47.140

正如我评论的那样，您的 JSON 无效。您应该像这样返回一个有效的 JSON（使用您的数据）

```
[
  {
    "latitude": 45.5113,
    "deviceid": "E19 iPad",
    "longitude": "-122.800233"
  },
  {
    "latitude": 45.5458,
    "deviceid": "E05 iPad",
    "longitude": "-122.9588931798935"
  },
  {
    "latitude": 45.5207,
    "deviceid": "E01 iPad",
    "longitude": "-122.98941537737846"
  }
] 
```

我认为最好尝试使用[默认的 php JSON 编码方法 json_encode](http://php.net/manual/en/function.json-encode.php)来生成 json 字符串。

# android - 在 RelativeLayout 中将 ImageView 垂直居中到 TextView

> ID：14064414
> 
> 赞同：2
> 
> 时间：2012-12-28T04:03:11.283
> 
> 标签：android, android-layout

我有一个 ImageView（下面屏幕截图中的时钟图像），无论文本大小如何，我都希望将其垂直居中于时间戳文本（图像中的“2 小时前”）。

![在此处输入图像描述](../Images/c3382647391f254e34bae6ae62d674ab.png)

我试过`android:layout_centerVertical="true"`了，但没有效果。

我在下面包含了布局代码。将时钟（id createdTimeImage）垂直居中于RelativeLayout中的时间戳文本（id createdTime）的正确方法是什么？欣赏任何指向正确方向的指针。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content" >

<RelativeLayout
    android:id="@+id/fromPictureSection"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/square_shape_grey_border"
    android:padding="1dip"
    android:layout_marginLeft="10dip"
    android:layout_marginTop="10dip" >

    <ImageView
        android:id="@+id/fromPicture"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:contentDescription="@null" />
</RelativeLayout>

<TextView
    android:id="@+id/fromName"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/fromPictureSection"
    android:paddingLeft="5dip"
    android:paddingRight="10dip"
    android:paddingTop="12dip"
    android:textAppearance="@style/bodyTextStyle" />

<ImageView
    android:id="@+id/createdTimeImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/fromName"
    android:layout_toRightOf="@id/fromPictureSection"
    android:contentDescription="@null"
    android:paddingBottom="0dip"
    android:paddingLeft="5dip"
    android:paddingTop="0dip"
    android:layout_centerVertical="true"
    android:src="@drawable/clock" />

<TextView
    android:id="@+id/createdTime"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/fromName"
    android:layout_toRightOf="@id/createdTimeImage"
    android:layout_centerVertical="true"
    android:paddingBottom="0dp"
    android:paddingLeft="2dip"
    android:paddingRight="10dip"
    android:paddingTop="0dp"
    android:textAppearance="@style/smallGreyTextStyle" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:06:46.990

您可以将图像初始化为`textview`自身

```
<TextView
    android:id="@+id/createdTime"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/fromName"
    android:layout_toRightOf="@id/createdTimeImage"
    android:layout_centerVertical="true"
    android:paddingBottom="0dp"
    android:paddingLeft="2dip"
    android:paddingRight="10dip"
    android:paddingTop="0dp"
    android:textAppearance="@style/smallGreyTextStyle"
    android:drawableLeft="@drawable/clock" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:18:13.270

你可以这样做。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content" >

<RelativeLayout
android:id="@+id/fromPictureSection"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/ic_launcher"
android:padding="1dip"
android:layout_marginLeft="10dip"
android:layout_marginTop="10dip" >

<ImageView
    android:id="@+id/fromPicture"
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:contentDescription="@null" />
</RelativeLayout>

<TextView
android:id="@+id/fromName"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_toRightOf="@id/fromPictureSection"
android:textColor="@android:color/white"
android:text="some meore text"
android:paddingLeft="5dip"
android:paddingRight="10dip"
android:paddingTop="12dip" />
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:layout_toRightOf="@id/fromPictureSection"
android:layout_below="@id/fromName"
android:layout_centerHorizontal="true">
<ImageView
android:id="@+id/createdTimeImage"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:contentDescription="@null"
android:paddingBottom="0dip"
android:paddingLeft="5dip"
android:paddingTop="0dip"
android:layout_gravity="center"
android:src="@drawable/ic_menu_camera" />

<TextView
android:id="@+id/createdTime"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:textColor="@android:color/white"
android:text="some text here"
android:paddingBottom="0dp"
android:paddingLeft="2dip"
android:paddingRight="10dip"
android:paddingTop="0dp" />

</LinearLayout>

</RelativeLayout> 
```

# c# - netduino 检查电子邮件

> ID：14064416
> 
> 赞同：2
> 
> 时间：2012-12-28T04:03:24.030
> 
> 标签：c#, gmail, email-client, netduino

我看到很多关于如何使用 a 发送电子邮件的示例，但我希望运行一个检查电子邮件帐户的操作。

有谁知道这是否可以做到（我确定可以）并指出一些例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:23:16.120

您可以通过多种方式获取 gmail 收件箱。

**开放式流行音乐**

**如果您确实只想使用 POP，并且不介意使用外部库，那么这看起来是最好/最简单的方法。**OpenPop 允许您访问安全/不安全的电子邮件帐户并让您选择端口。请参阅[此帖子](http://www.floresense.com/resc_center/?art=1407)以开始使用。

> OpenPop 是实现邮件获取和解析的开源 C#.NET 代码包。在撰写本文时，它仅使用 Microsoft .NET 框架库来完成所需的工作。但是为了访问安全的 pop 服务器，可以使用一些 SSL 库来扩展 openPop。

例如，通过 Pop 访问 Gmail：

```
POPClient poppy = new POPClient();
poppy.Connect("pop.gmail.com", 995, true);
poppy.Authenticate(username@gmail.com, "password");
int Count = poppy.GetMessageCount();
if (Count > 0)
{
   for (int i = Count; i >= 1; i -= 1)
   {
     OpenPOP.MIMEParser.Message m = poppy.GetMessage(i, false);
     //use the parsed mail in variable 'm'
   }
} 
```

**TcpClient POP3：**

要通过 Pop3 从任何提供商处检索电子邮件，您可以使用 TcpClient。对于 Gmail，它只是略有不同，因为 Gmail 使用 SSL 和端口 995 进行 POP。[这里](http://weblogs.asp.net/satalajmore/archive/2007/12/19/asp-net-read-email.aspx)有一个例子：

```
// create an instance of TcpClient 

TcpClient tcpclient = new TcpClient();     

// HOST NAME POP SERVER and gmail uses port number 995 for POP 

tcpclient.Connect("pop.gmail.com", 995); 

// This is Secure Stream // opened the connection between client and POP Server

System.Net.Security.SslStream sslstream = new SslStream(tcpclient.GetStream());

// authenticate as client  

 sslstream.AuthenticateAsClient("pop.gmail.com"); 
```

**Gmail Atom 提要：**

第一种方法是使用.Net Gmail Tools`GmailAtomFeed`的一部分，它是[C# .Net Gmail 工具](http://archive.msdn.microsoft.com/CSharpGmail)的一部分。该网站说：

> GmailAtomFeed 类提供了一个简单的对象层，用于以编程方式访问 gmails atom 提要。只需几行代码，就可以从 gmail 中检索并解析提要。之后，可以通过对象层 AtomFeedEntryCollection 访问条目，此外还可以访问原始提要和提要 XmlDocument。

这是您如何使用它的示例：

```
 // Create the object and get the feed 
   RC.Gmail.GmailAtomFeed gmailFeed = new RC.Gmail.GmailAtomFeed("username", "password"); 
   gmailFeed.GetFeed(); 

   // Access the feeds XmlDocument 
   XmlDocument myXml = gmailFeed.FeedXml 

   // Access the raw feed as a string 
   string feedString = gmailFeed.RawFeed 

   // Access the feed through the object 
   string feedTitle = gmailFeed.Title; 
   string feedTagline = gmailFeed.Message; 
   DateTime feedModified = gmailFeed.Modified; 

   //Get the entries 
   for(int i = 0; i &lt; gmailFeed.FeedEntries.Count; i++) { 
      entryAuthorName = gmailFeed.FeedEntries[i].FromName; 
      entryAuthorEmail = gmailFeed.FeedEntries[i].FromEmail; 
      entryTitle = gmailFeed.FeedEntries[i].Subject; 
      entrySummary = gmailFeed.FeedEntries[i].Summary; 
      entryIssuedDate = gmailFeed.FeedEntries[i].Received; 
      entryId = gmailFeed.FeedEntries[i].Id; 
   } 
```

**地图**

如果您不限于 POP，另一种方法是使用 IMAP。使用 IMAP，您可以连接到 SSL 服务器并选择一个端口：

```
using (Imap imap = new Imap())
{
    imap.ConnectSSL("imap.gmail.com", 993);
    imap.Login("angel_y@company.com", "xyx***"); // MailID As Username and Password

    imap.SelectInbox();
    List<long> uids = imap.SearchFlag(Flag.Unseen);
    foreach (long uid in uids)
    {
        string eml = imap.GetMessageByUID(uid);
        IMail message = new MailBuilder()
            .CreateFromEml(eml);

        Console.WriteLine(message.Subject);
        Console.WriteLine(message.TextDataString);
    }
    imap.Close(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:01:17.273

我在网上找到了这段代码，但“POP3_Client”无法识别，我没有看到任何添加它的参考

```
 POP3_Client Mailbox = new POP3_Client(new >>>>IntegratedSocket<<<<<("pop.yourisp.com", 110), "yourusername", "yourpassword");
            Mailbox.Connect();
            Debug.Print("Message count: " + Mailbox.MessageCount.ToString());
            Debug.Print("Box size in bytes: " + Mailbox.BoxSize.ToString());

            uint[] Id, Size;
            Mailbox.ListMails(out Id, out Size);
            for (int Index = 0; Index < Id.Length; ++Index)
            {
                string[] Headers = Mailbox.FetchHeaders(Id[Index], new string[] { "subject", "from", "date" });
                Debug.Print("Mail ID " + Id[Index].ToString() + " is " + Size[Index].ToString() + " bytes");
                Debug.Print("Subject: " + Headers[0]);
                Debug.Print("From: " + Headers[1]);
                Debug.Print("Date: " + Headers[2]);
                Debug.Print("======================================================================");
            }

            Mailbox.Close(); 
```

# xcode - 如何在 iOS5 中旋转视图？

> ID：14064420
> 
> 赞同：1
> 
> 时间：2012-12-28T04:03:51.733
> 
> 标签：xcode, rotation, uisplitviewcontroller

我`splitviewController`在我的应用程序中使用了一个。应用程序的方向严格设置为横向。我已经在构建设置中正确完成了。

当我在 iOS 5.1 或更高版本中运行我的应用程序时，它运行良好。但是当我在 iOS 5 或更低版本中运行我的应用程序时，应用程序的方向不会更改为横向。这是个大问题。有什么解决办法吗？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  // Return YES for supported orientations
  return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:37:33.550

`viewControllers`全部使用这个`orientation`

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
   // Return YES for supported orientations
   [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
   return UIInterfaceOrientationIsLandscape(interfaceOrientation);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:13:57.363

简单的。改为插入以下内容：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:27:51.860

你应该更换你的

```
return (interfaceOrientation == UIInterfaceOrientationPortrait); 
```

声明与

```
return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight)); 
```

# python - Python中数据库中的数字

> ID：14064423
> 
> 赞同：2
> 
> 时间：2012-12-28T04:04:40.277
> 
> 标签：python, database, number-formatting

我是 Python 的新手，并且涉足该语言的各种特性。我发现的一个特点是以下代码片段的输出：

```
qry = 'SELECT COUNT(*) FROM <<TABLE>>'
cursor.execute(qry)
rowCounts = cursor.fetchone()
print("The number of rows in the <<TABLE>> table : {}".format(rowCounts)) 
```

我在终端上得到以下输出：

```
Connected to the MySQL database.
The number of rows in the <<TABLE>> table : (150L,) 
```

我被括号和逗号难住了。我已经搜索了解释这种情况的答案，但没有找到任何合理的格式解释。有什么我应该做的不同的事情吗？

感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:08:40.293

您看到的输出是因为 rowCounts`tuple`仅包含 1 个元素。

一个包含一个项目的元组是通过一个带逗号的值来构造的

# css - 如何让 div 向下浮动？

> ID：14064424
> 
> 赞同：20
> 
> 时间：2012-12-28T04:04:43.263
> 
> 标签：css, html, alignment, positioning

我有 4 个 div。一个是外包装，另外三个分别是页眉、内容和页脚。所有都是相同（固定）的宽度。但是外包装和内容 div 的高度是可变的。

无论这些大小如何，我都希望页脚 div 贴在外包装的底部。我尝试使用以下 CSS

```
position: relative;
bottom: 0px; 
```

但它没有用。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-04T17:07:38.490

要将 div 与底部对齐，首先必须使父 div 的位置相对，然后将所需 div 的位置设置为绝对并将`bottom`属性设置为零。

```
<div style="position: relative; height: 100px; border: solid;">
  <div style="position: absolute; height: 10px; border: solid; bottom: 0; right: 0;  left: 0; ">
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-28T04:45:10.523

*页脚 div*需要是：

*   `position:absolute;bottom:0;`; 这会将其推到其容器的底部，但是，当您向下滚动经过容器时，页脚将随之滚动。

*   `position:fixed;bottom:0;`; 这更常用于*粘性*页脚。这会将页脚放置在`bottom:0`您的屏幕上。所以无论你在哪里滚动，所见即所得（滚动时它不会四处移动）

*   `position:relative;bottom:0;`; 可以使用，但它将相对于它的兄弟姐妹（即除非*内容 div*将其推到底部，否则它不会去那里），或者，我相信如果容器是相对的，那么它可能会起作用（但**请**更正如果我错了我）。

根据您的问题：`i want the footer div to stick at the bottom of outer wrapper.`听起来您想对`absolute`页脚使用定位，以便它始终粘在其容器的底部......

*如果您希望无论用户滚动到哪里，*页脚都保持在屏幕底部，那么我建议`fixed`定位。

一定要看看[一些......教程](http://www.w3schools.com/css/css_positioning.asp)，最重要的是，[自己动手做实验！](http://jsfiddle.net)

你可以让我们成为一个[jsfiddle](http://jsfiddle.net)，也许它会更清楚地说明你想要完成的事情。祝你好运！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-28T04:15:55.377

您可以让包装器的位置是相对的，而内部 Divs 的位置是绝对的。

```
<div style="position: relative; height: 200px">
    <div style="position: absolute; top: 0px; height: 20px; background-color:red">
        header
    </div>

    <div style="position: absolute; top: 20px; bottom: 20px; overflow-y: auto">
        content
    </div>

    <div style="position: absolute; bottom: 0px; height: 20px; background-color:red">
        footer
    </div>
</div> 
```

试试这个[http://jsfiddle.net/YAaA3/](http://jsfiddle.net/YAaA3/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-28T04:34:36.217

使用 clear 获取内容下方的页脚。

简单地 -

```
#header {
 clear:both;
}
#footer {
 clear: both;
} 
```

这应该迫使页眉位于顶部，而页脚位于浮动元素下方。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-04T18:24:40.387

```
<div>
  <div style="position: relative; height: 10%; top: 90%; ">
  </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T04:33:10.337

[**更新**]

这是`CSS`始终**将**页脚粘在底部的那个。

**[**演示*](http://jsfiddle.net/SmEZd/3/)***

CSS-

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
#ou {
    position:relative;
    background-color:grey;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    width:400px;
    margin: 0 auto -30px; /* the bottom margin is the negative value of the footer's height */
}
#he
{
    height:30px;
    background-color:red;
}
#fo{
    background-color:yellow;
    height: 30px; /* .push must be the same height as .footer */
    position:relative;
    width:400px;
    margin:0 auto;
} 
```

# java - 我如何将敌人放入 ArrayList

> ID：14064426
> 
> 赞同：1
> 
> 时间：2012-12-28T04:04:56.427
> 
> 标签：java, arraylist

这是我的两个敌人

```
en = new Enemy(700, 150);
en2 = new Enemy (980, 150); 
```

我想让我的程序包含几个敌人，我只需要重新创建它们并进行单元碰撞

```
if (d.intersects(r1) && en.visible == true &&
        en.isAlive == false && !p.hitting){
    hitmang(hit);
    p.hitting = true;
}  

if (d.intersects(r2) && en.visible == true &&
        en.isAlive == false && !p.hitting){  
    hitmang(hit);
    p.hitting = true;
}

if (!d.intersects(r1) && !d.intersects(r2)){
    p.hitting = false;
} 
```

我必须用另一个敌人重新创建每个实例吗？

这些是我的敌人加上他们在游戏中的界限

```
Rectangle r1 = en.getBounds();
Rectangle r2 = en2.getBounds(); 
```

（我将它们作为矩形）

```
public Rectangle getBounds(){
    return new Rectangle(x, y, 114, 134);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:44:43.540

我不完全明白你要做什么？

你想将你的敌人添加到一个数组中，然后循环遍历它们以检查敌人边界框是否与玩家相交吗？

```
public List<Rectangle> enBoundingBoxes = new ArrayList<Rectangle>(); 
```

然后将敌人边界框添加到数组列表中。

```
enBoundingBoxes.add(en.getBounds());
enBoundingBoxes.add(en2.getBounds()); 
```

使用 for 循环遍历它们:)

```
for (int i = 0; i < enBoundingBoxes.size(); i++) {
Rectangle tempBBox = enBoundingBoxes.get(i);

if (d.intersects(tempBBox) && en.visible == true && !en.isAlive == false && !p.hitting) {
    hitmang(hit);
    p.hitting = true;
   }
}

etc etc... 
```

那是你所追求的吗？

祝你好运，我希望它有所帮助:)

编辑：我没有检查这是否有效，我在浏览器中写了它......

# ruby - 在 Ruby/Sinatra 中，Datamapper 的 .all 有效但 .get 无效？

> ID：14064429
> 
> 赞同：1
> 
> 时间：2012-12-28T04:05:04.073
> 
> 标签：ruby, sinatra, ruby-datamapper

我正在尝试从 Sinatra 中的路径获取数据，并使用 Datamapper 使用它来查找特定记录。Datamapper[**文档**](http://datamapper.org/docs/find.html) 似乎表明了这一点。

```
get "/test/:test_path" do
    test_get = Intake.get( params[:test_path] )
    # Do stuff
    erb :blah_blah_blah
end 
```

应该找到与符号关联的任何记录：`test_path`

这不起作用。test_get 为零。

同时，起作用的是

```
get "/test/:test_path" do
    test_all = Intake.all(:test_path => params[:test_path] )
    # Do stuff
    erb :blah_blah
end 
```

我的两个问题是：

1.  Datamapper 中的 .get() 调用我做错了什么？
2.  .all(:name => value) 方法是否比 .get() 慢，或者我使用哪个无关紧要？

这是一个简化的 Sinatra 脚本以演示该行为。

```
#!/usr/bin/env ruby

require 'rubygems'
require 'sinatra'
require 'dm-core'
require 'dm-timestamps'

DataMapper.setup(:default, {:adapter => 'yaml', :path => 'db'})

class Intake
  include DataMapper::Resource

  property :id,         Serial
  property :created_at, DateTime
  property :test_path,  String
end

get "/test/:test_path" do

  test_all = Intake.all(:test_path => params[:test_path] )
  puts 'test_all:' test_all.inspect

  test_get = Intake.get( params[:test_path] )
  puts 'test_get:' test_get.inspect

  "Hello World!"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:31:37.247

`#get`仅基于主键进行查找，其中`id`. 所以

```
Intake.get(params[:test_path]) 
```

寻找带有 id 的东西`params[:test_path]`，这将失败。利用

```
Intake.first(test_path: params[:test_path]) 
```

# sql - 如何删除Oracle中具有最大列值的行

> ID：14064431
> 
> 赞同：0
> 
> 时间：2012-12-28T04:05:42.277
> 
> 标签：sql, oracle

我的源代码控制数据库有 2 个表 -`PRJ`和 `PRJHIST`，它们都具有相同的列和约束。

例如。`PRJ`并`PRJHIST`有以下行

```
PRJ TABLE    

PRJ_NAME PRJ_TYPE PRJ_VERSION PRJ_AUTHOR PRJ_LANG  
PRJ001     SCRIPT   3           MARK       PERL  
PRJ002     SCRIPT   2           JACK       KSH  
PRJ003     BINARY   4           JADE       C++  

PRJHIST TABLE  

PRJ_NAME PRJ_TYPE PRJ_VERSION PRJ_AUTHOR PRJ_LANG
PRJ001     SCRIPT   1           MARK       PERL  
PRJ001     SCRIPT   2           MARK       PERL  
PRJ001     SCRIPT   3           MARK       PERL  
PRJ002     SCRIPT   1           JACK       KSH  
PRJ002     SCRIPT   2           JACK       KSH  
PRJ003     BINARY   1           JADE       C++  
PRJ003     BINARY   2           JADE       C++  
PRJ003     BINARY   3           JADE       C++  
PRJ003     BINARY   4           JADE       C++ 
```

该`PRJ`表始终具有表中最大版本的`PRJHIST`行

如何删除表`max(PRJ_VERSION)`中的所有行`PRJHIST`？

即我需要从`PRJHIST`表 中删除以下行

```
PRJ001     SCRIPT   3           MARK       PERL  
PRJ002     SCRIPT   2           JACK       KSH  
PRJ003     BINARY   4           JADE       C++ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:13:36.563

```
DELETE FROM PRJHIST a
 WHERE EXISTS (SELECT 'X' 
                 FROM PRJ b
                WHERE a.PRJ_NAME = b.PRJ_NAME
                  AND a.PRJ_VERSION = b.PRJ_VERSION); 
```

# sql - 从 isql 输出中删除空格

> ID：14064433
> 
> 赞同：2
> 
> 时间：2012-12-28T04:05:58.727
> 
> 标签：sql, bash, isql

有什么方法可以停止`isql`在返回字段之前和之后添加间距？我只想要表格行中的值，用`,`. 目前，使用`-b`and `-s ','`，我得到：

```
,some_column_entry         ,          3213,            another_column_entry, 
```

但是，我想要：

```
,some_column_entry,3212,another_column_entry, 
```

我通读了所有开关，但似乎找不到任何合适的东西。我希望以`isql`这种形式输出，而不是解析输出。

**编辑**：

```
select top 1 rtrim(ltrim(some_column)) from table 
```

返回

```
,abc             , 
```

`isql`似乎基于最大字符的大小输出，因为如果我运行以下命令：

```
select top 1 rtrim(ltrim(convert(varchar(3), some_column)) from table 
```

我得到：

```
,abc, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:49:55.477

尝试这个

```
 Use RTRIM(LTRIM(ColumnName)) in your -q Query Select command. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:50:05.683

之间的对比

```
some_column_entry         , 
```

和

```
,            another_column_entry, 
```

让我认为空格是您的字段条目的一部分，而不是使用的分隔符。

来自`man isql`：

> -dx 用 x 分隔列。
> 
> -x0xXX 用 XX 分隔列，其中 XX 是十六进制。例如 -x0x09 将使用选项卡。

如果这不起作用，那么您可以`isql`通过一个简单的`sed`用例管道输出：

```
isql ... | sed -e 's/\ //g' 
```

# c# - EF5 收到此错误消息：无法检查模型兼容性，因为数据库不包含模型元数据

> ID：14064434
> 
> 赞同：33
> 
> 时间：2012-12-28T04:06:08.967
> 
> 标签：c#, .net, entity-framework, entity-framework-5

我每次运行应用程序时都会显示此错误消息。我正在使用实体`Framework 5: Code First`

这是错误消息，

```
System.NotSupportedException: Model compatibility cannot be checked because the database does not contain model metadata. Model compatibility can only be checked for databases created using Code First or Code First Migrations.
   at System.Data.Entity.Internal.ModelCompatibilityChecker.CompatibleWithModel(InternalContext internalContext, ModelHashCalculator modelHashCalculator, Boolean throwIfNoMetadata)
   at System.Data.Entity.Internal.InternalContext.CompatibleWithModel(Boolean throwIfNoMetadata)
   at System.Data.Entity.Database.CompatibleWithModel(Boolean throwIfNoMetadata)
   at System.Data.Entity.DropCreateDatabaseIfModelChanges`1.InitializeDatabase(TContext context)
   at System.Data.Entity.Database.<>c__DisplayClass2`1.<SetInitializerInternal>b__0(DbContext c)
   at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass8.<PerformDatabaseInitialization>b__6()
   at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
   at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
   at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
   at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
   at System.Data.Entity.Internal.InternalContext.Initialize()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
   at System.Data.Entity.DbSet`1.Add(TEntity entity)
   at LaundryService_DEMO.frmMain.btnCreate_Click(Object sender, EventArgs e) in d:\MyDocs\Visual Studio 2012\Projects\LaundryService_DEMO\LaundryService_DEMO\frmMain.cs:line 39 
```

当我创建一个名为 invoice 的实体时，这个错误就开始了。这是实体的完整代码，

```
public class Invoice
{
    public string InvoiceID { get; set; }
    public string CustomerID { get; set; }
    public string UserID { get; set; }
    public decimal TotalAmount { get; set; }
    public DateTime TransactionDate { get; set; }
    public DateTime PaymentDate { get; set; }

    public Customer CustomerField { get; set; }
    public SystemUser SystemUserField { get; set; }
}

public class InvoiceMap : EntityTypeConfiguration<Invoice>
{
    public InvoiceMap()
    {
        // Primary Key
        this.HasKey(x => x.InvoiceID);

        // Property(ies) and Mapping(s)
        this.ToTable("Invoice");

        this.Property(x => x.InvoiceID)
            .IsRequired()
            .HasMaxLength(15)
            .HasColumnName("InvoiceID")
            .HasColumnType("nVarchar");

        this.Property(x => x.CustomerID)
            .IsRequired()
            .HasMaxLength(15)
            .HasColumnName("CustomerID")
            .HasColumnType("nVarchar");

        this.Property(x => x.UserID)
            .IsRequired()
            .HasMaxLength(15)
            .HasColumnName("UserID")
            .HasColumnType("nVarchar");

        this.Property(x => x.TotalAmount)
            .IsRequired()
            .HasColumnName("TotalAmount")
            .HasColumnType("decimal");

        this.Property(x => x.TransactionDate)
            .IsRequired()
            .HasColumnName("TransactionDate")
            .HasColumnType("datetime");

        this.Property(x => x.PaymentDate)
            .IsOptional()
            .HasColumnName("PaymentDate")
            .HasColumnType("datetime");

        // Relationship
        this.HasRequired(x => x.CustomerField)
            .WithMany(x => x.InvoiceCollection)
            .HasForeignKey(y => y.CustomerID);

        this.HasRequired(x => x.SystemUserField)
            .WithMany(x => x.InvoiceCollection)
            .HasForeignKey(y => y.UserID);
    }
} 
```

为了复制应用程序，我包含了[可供下载](https://dl.dropbox.com/u/16021179/LaundryService_DEMO.rar)的项目文件。所以这个问题不会充满代码。

如果我在问题中遗漏了细节，请发表评论，以便我将其包括在内。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-28T04:45:25.763

我发现代码通过更改工作

```
static LaundryShopContext()
{
  Database.SetInitializer<LaundryShopContext>(
    new DropCreateDatabaseIfModelChanges<LaundryShopContext>());
} 
```

进入

```
static LaundryShopContext()
{
  Database.SetInitializer<LaundryShopContext>(
    new DropCreateDatabaseAlways<LaundryShopContext>());
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-28T04:34:06.060

这可能与您的数据库不包含 _MigrationHistory 表有关（可以使用 SQL Server Management Studio 在 Tables > System Tables 中查看）。

不确定您是如何管理数据库的，但如果您仍处于开发阶段并使用 EF 迁移，一个快速的解决方案是删除数据库并运行 Update-Database，这将重新创建整个数据库并添加 _MigrationHistory 表。

如果要避免 EF 运行此检查，可以将其添加到 DbContext 类

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<IncludeMetadataConvention>();
} 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-09-16T01:48:54.683

如果像我一样，这是由于从 Code First 开始并更改为 Database First 开发中期项目造成的。这都是由一条简单的线引起的。如果您需要保留数据库及其数据，请注释掉以下行：

```
Database.SetInitializer<ApplicationDbContext>(new ApplicationDbInitializer()); 
```

从模型的这一部分。

```
public class ApplicationDbContext : IdentityDbContext<ApplicationUser>
{
    public ApplicationDbContext()
        : base("DefaultConnection", throwIfV1Schema: false)
    {
    }
    static ApplicationDbContext()
    {
        // Set the database intializer which is run once during application start
        // This seeds the database with admin user credentials and admin role
        //   Database.SetInitializer<ApplicationDbContext>(new ApplicationDbInitializer());
    }

    public static ApplicationDbContext Create()
    {
        return new ApplicationDbContext();
    }
} 
```

这在开始使用内置身份模型时经常发生。一旦让它们工作，您可以删除该行以保持其完整但保留功能。但是，如果您的模型发生更改，则必须将您的数据库配置为匹配.. 无论如何，您在 Database First 开发中正在做的事情！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-24T23:26:54.303

如果您尝试针对以前存在的同名数据库初始化上下文，但该数据库是使用另一个代码库创建的，也会发生这种情况。这就是为什么从 DropCreateDatabaseIfModelChanges 更改为 DropCreateDatabaseAlways 有效的原因，后一种配置会导致无论如何重新创建数据库，绕过可能导致此问题的任何类型的数据库版本控制。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-15T14:33:14.870

我知道我迟到了，但我刚刚遇到了同样的错误，我的数据库已经有一个迁移历史表。

该错误还可能表明历史表中的上下文键不正确。如果您将数据库上下文类移动到另一个命名空间，这可能会发生，就像我在重构时所做的那样。

**`ContextKey`将表中的值更新`MigrationHistory`到数据库上下文的新命名空间为我解决了这个问题**。

此解决方案不需要您丢弃数据库内容，因此可能优于该`DropCreateDatabaseAlways`解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T21:45:38.790

添加时出现此错误
`ContextKey = "MyProject.Repository.Common.DbContextA";`

到 Configuration.cs。删除该行后，它可以工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-11T07:58:56.340

我尝试了以下 3 个步骤。它对我有用.. 在包管理器控制台中运行以下命令 1\. enable-migrations 2\. update-database -verbose 3\. add-migration initialmigrations -ignorechanges

注意：我的场景是我已经创建了数据库/表（使用代码优先方法（使用共享数据库上下文库）。我尝试在另一个应用程序和另一个数据库中使用该库。我手动将第一个数据库同步到第二个数据库......就是这样为什么我遇到这个问题。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2015-03-07T21:00:37.053

```
CreateDatabaseIfNotExists<ApplicationDbContext>(); 
```

# utl-file - UTL_FILE WITH %ROWTYPE .. 错误

> ID：14064435
> 
> 赞同：0
> 
> 时间：2012-12-28T04:06:15.420
> 
> 标签：utl-file, rowtype

我想创建从员工记录中获取行的程序，该记录的薪水超过输入数字。然后将该输出输出到文本文件。我不明白我在哪里做错了。请帮帮我。提前致谢。

我有如下结构的员工表。描述表员工；名称空？类型

* * *

EMPLOYEE_ID NOT NULL NUMBER(6)
FIRST_NAME VARCHAR2(20)
LAST_NAME NOT NULL VARCHAR2(25)
EMAIL NOT NULL VARCHAR2(25)
PHONE_NUMBER VARCHAR2(20)
HIRE_DATE NOT NULL DATE
JOB_ID NOT NULL VARCHAR2(10)
SALARY NUMBER(8,2)
COMMISSION_PCT NUMBER(2,2)
MANAGER_ID NUMBER(6)
DEPARTMENT_ID NUMBER(4)

当我想在脚本下面运行时。

```
 CREATE OR REPLACE PROCEDURE P_TEST3 ( P_SAL NUMBER) IS

    TYPE EMP_TEMP IS TABLE OF employees%ROWTYPE;
   V_EMP_ROW     EMP_TEMP ;

 V1 utl_file.file_type;

 E1 utl_file.file_type;

    BEGIN

 V1 := utl_file.fopen('ABC','VALID.txt','W');
E1 := utl_file.fopen('ABC','ERROR.txt','W');

SELECT *  BULK COLLECT INTO V_EMP_ROW   FROM Employees  WHERE salary > p_sal   ;

FOR i IN  V_EMP_ROW.FIRST .. V_EMP_ROW.LAST 
    LOOP
    UTL_FILE.PUT_LINE (V1, V_EMP_ROW(I).EMPLOYEE_ID ||',' || V_EMP_ROW(I).FIRST_NAME ||','|| V_EMP_ROW(I).SALARY );
    END LOOP;

  dbms_output.put_line ('Total row inserted '||sql%rowcount || '.  Please see valid.txt file ' );

EXCEPTION

WHEN OTHERS THEN
raise_application_error( -20002,'An error was encountered - '||SQLCODE||' -ERROR- '||SQLERRM);

utl_file.put_line (E1,SQLCODE || '---' || SQLERRM);

DBMS_OUTPUT.PUT_LINE ('PLEASE SEE Error.txt FILE');

utl_file.fclose(v1);
utl_file.fclose(E1);

 END P_TEST3; 
```

/

并且编译器给出以下错误。[警告] ORA-24344：编译错误 21/42 成功 PLS-00302：必须声明组件 'EMPLOYEE_ID' 21/9 PL/SQL：忽略语句 (1: 0)：警告：已编译但存在编译错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:47:38.193

给你错误的行是 21，它似乎是：

```
UTL_FILE.PUT_LINE (V1, V_EMP_ROW(I).EMPLOYEE_ID ||',' || V_EMP_ROW(I).FIRST_NAME ||','|| V_EMP_ROW(I).SALARY ); 
```

我建议问题是在您的 BULK SELECT 语句中没有返回任何行，或者它们不是您期望的格式。

尝试放入类似的东西：

```
dbms_output.put_line('Record is: '|| V_EMPROW(i)); 
```

作为循环中的第一行。

或者，也许在循环之前对批量选择结果进行记录计数：

```
dbms_output.put_line('Record count is: '|| V_EMPROW.COUNT); 
```

# android - 无法在请求的上下文中使用函数 MATCH

> ID：14064436
> 
> 赞同：1
> 
> 时间：2012-12-28T04:06:19.363
> 
> 标签：android, sql, search

在getContactMatches()方法中，sql语句出现错误String selection = COL_NAME + "MATCH ?"; 我对sql不太熟悉，所以我不知道该怎么做

数据库类和 getContactMatches() 方法：

```
public class DatabaseTable {
private static final String TAG = "ContactsDatabase";

//The columns we'll include in the contacts table
public static final String COL_ID = "_id";
public static final String COL_NAME = "NAME";
public static final String COL_EMAIL = "EMAIL";

private static final String DATABASE_NAME = "CONTACT";
private static final String DATABASE_TABLE = "contactsTable";
private static final int DATABASE_VERSION = 2;
private Context ourContext;
private DbHelper DBHelper;
private SQLiteDatabase db;
private static final String DATABASE_CREATE = 
        "CREATE TABLE " + DATABASE_TABLE + " (" +
         COL_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
         COL_NAME + " TEXT NOT NULL, " + 
         COL_EMAIL + " TEXT NOT NULL);";

    private static class DbHelper extends SQLiteOpenHelper {

        DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {
            try {
                db.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            onCreate(db);
        }
    }

        public DatabaseTable(Context context) {
            ourContext = context;
        }

        public DatabaseTable open() throws SQLException {
            DBHelper = new DbHelper(ourContext);
            db = DBHelper.getWritableDatabase();
            return this;
        }

        public void close() {
            DBHelper.close();
        }

        public long insertContact(String name, String email) {
            ContentValues initialValues = new ContentValues();
            initialValues.put(COL_NAME, name);
            initialValues.put(COL_EMAIL, email);
            return db.insert(DATABASE_TABLE, null, initialValues);
        }

        public String getData()
        {
            String[] columns = new String[]{COL_ID, COL_NAME, COL_EMAIL};
            Cursor c = db.query(DATABASE_TABLE, columns, null, null, null, null, null);
            String data = "";
            int id = c.getColumnIndex(COL_ID);
            int colname = c.getColumnIndex(COL_NAME);
            int colemail = c.getColumnIndex(COL_EMAIL);
            for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
                data = data + c.getString(id) + " " + c.getString(colname) + " " + c.getString(colemail) + "\n";
            }
            return data;
        }

        public Cursor getContactMatches(String query, String[] columns) {
            String selection = COL_NAME + " MATCH ?";
            String[] selectionArgs = new String[] {query+"*"};

            return query(selection, selectionArgs, columns);
        }

        private Cursor query(String selection, String[] selectionArgs, String[] columns) {
            DBHelper = new DbHelper(ourContext);
            SQLiteQueryBuilder build = new SQLiteQueryBuilder();
            build.setTables(DATABASE_TABLE);

            Cursor cursor = build.query(DBHelper.getReadableDatabase(),
                    columns, selection, selectionArgs, null, null, null);

            if (cursor == null) {
                return null;
            }

            return cursor;
        }

        public int cursorLength(Cursor cursor) {
            int x = 0;
            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
                x = x + 1;
            return x;
        } 
```

# ios - iPhone UIImageView 设置 UIImages

> ID：14064437
> 
> 赞同：0
> 
> 时间：2012-12-28T04:06:28.327
> 
> 标签：ios, uiimageview

我正在制作纸牌游戏并尝试从对象的实例变量中调用 UIImages 来更新 UIImageView

我有一个 Deck 对象，它有一个 Card 对象的 NSArray 实例变量。

每个 Card 对象都有一些实例变量，其中一个是我试图在 UIImageView 中显示的 UIImage ......这就是我遇到问题的地方

情节提要没有显示 UIImageView 并且我没有收到任何编译错误

我要更新的 UIImageView 是 cardDisplay (ViewController.h)

这是我的代码中的一些片段

视图控制器.h

```
#import "Deck.h"
#import "Card.h"

@interface ViewController : UIViewController
{
    UIImageView *cardDisplay;
}

@property (nonatomic, retain) IBOutlet UIImageView *cardDisplay;

@end 
```

视图控制器.m

```
 #import "ViewController.h"

    #import "Deck.h"
    #import "Card.h"

    @implementation ViewController

@synthesize cardDisplay;

- (void)viewDidLoad
{
    [super viewDidLoad];

    Deck *deck = [[Deck alloc]init];

    NSLog(@"%@", deck);

    for (id cards in deck.cards) {
         NSLog(@"%@", cards);
    }

    self.cardDisplay = [[UIImageView alloc] initWithImage:
         [[deck.cards objectAtIndex:0 ] cardImage]];
}

@end 
```

卡片.h

```
@interface Card : NSObject
{
    NSString *valueAsString, *suitAsString;
    NSInteger faceValue, countValue;
    Suit suit;
    UIImage *cardImage;
}

@property (nonatomic, retain) NSString *valueAsString;
@property (nonatomic, retain) NSString *suitAsString;
@property (nonatomic) NSInteger faceValue;
@property (nonatomic) NSInteger countValue;
@property (nonatomic) Suit suit;
@property (nonatomic) UIImage *cardImage;

- (id) initWithFaceValue:(NSInteger)aFaceValue countValue:(NSInteger)aCountValue
                suit:(Suit)aSuit cardImage:(UIImage*)aCardImage;

@end 
```

甲板.h

```
#import "Card.h"

@interface Deck : NSObject
{
    NSMutableArray *cards;
}

@property(nonatomic, retain)NSMutableArray *cards;

@end 
```

甲板.m

```
#import "Deck.h"
#import "Card.h"

@implementation Deck

@synthesize cards;

- (id) init
{
    if(self = [super init])
    {
        cards = [[NSMutableArray alloc] init];

        NSInteger aCount, picNum = 0;

        for(int suit = 0; suit < 4; suit++)
        {
            for(int face = 1; face < 14; face++, picNum++)
            {

                if (face > 1 && face < 7) 
                    aCount = 1;
                else if (face > 6 && face < 10)
                    aCount = 0;
                else
                    aCount = -1;

                NSString *path = [[NSBundle mainBundle] bundlePath];
                NSString *imagePath = [path stringByAppendingPathComponent: 
                       [NSString stringWithFormat:@"/cards/card_%d.png",picNum]];

                UIImage *output = [UIImage imageNamed:imagePath];

                Card *card = [[Card alloc] initWithFaceValue:(NSInteger)face
                                                countValue:(NSInteger)aCount
                                                suit:(Suit)suit
                                                cardImage:(UIImage *)output];

                [cards addObject:card];
            }

        }
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:31:27.150

这一行：

```
self.cardDisplay = [[UIImageView alloc] initWithImage:
         [[deck.cards objectAtIndex:0 ] cardImage]]; 
```

应该：

```
self.cardDisplay.image = [[deck.cards objectAtIndex:0 ] cardImage]; 
```

您需要在 IB 中创建的图像视图上设置图像，而不是创建一个新的。这样做并不会阻止您以后使用计时器做您想做的事情。

# python - 删除转发地址

> ID：14064441
> 
> 赞同：0
> 
> 时间：2012-12-28T04:06:55.990
> 
> 标签：python, google-app-engine, gdata, google-apps, google-email-settings-api

我可以在 gdata.apps.emailsettings.client.EmailSettingsClient 类中使用[RetrieveForwarding](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.apps.emailsettings.client.html#EmailSettingsClient-retrieve_forwarding)获取 GDEntry 对象。

我可以使用 Regex 或 XML 模块查看该对象中哪些 XML 对象包含“ForwardTo”地址。示例输出包括（除其他外）以下行：

```
<ns0:property xmlns:ns0="http://schemas.google.com/apps/2006" name="enable" value="true" />
<ns0:property xmlns:ns0="http://schemas.google.com/apps/2006" name="action" value="KEEP" />
<ns0:property xmlns:ns0="http://schemas.google.com/apps/2006" name="forwardTo" value="name@email.com" /> 
```

现在我有了每个 forwardTo 地址，我想删除它们。我不想简单地禁用转发。在查看我的选项时，我看到的唯一可以调用的相关方法是[gdata.apps.emailsettings.client.EmailSettingsClient](http://gdata-python-client.googlecode.com/hg/pydocs/gdata.apps.emailsettings.client.html#EmailSettingsClient-update_forwarding)中的 UpdateForwarding。但是，如您所见，此方法不允许我删除 forwardTo 地址。

```
update_forwarding(self, username, enable, forward_to=None, action=None, **kwargs)
    Update Google Mail Forwarding settings.

    Args:
      username: string The name of the user.
      enable: Boolean Whether to enable incoming email forwarding.
      forward_to: (optional) string The address email will be forwarded to.
      action: string (optional) The action to perform after forwarding
              an email (ACTION_KEEP, ACTION_ARCHIVE, ACTION_DELETE).
      kwargs: The other parameters to pass to the update method. 
```

目标是删除现有的转发地址。这些帐户从一个人转移到另一个人，我正在尝试创建一个无缝过渡。这包括删除旧的转发地址，目前必须通过登录每个帐户手动完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:04:30.177

如您所见，没有办法完全删除转发地址。如果转发被禁用，则检索转发设置调用不会为电子邮件地址返回任何内容：

[https://developers.google.com/google-apps/email-settings/#retrieving_forwarding_settings](https://developers.google.com/google-apps/email-settings/#retrieving_forwarding_settings)

但是，电子邮件地址在 Gmail 设置 UI 中仍然可见，并且只能从那里删除。

如果您不希望用户知道他们的电子邮件正在被转发/监控，您可能需要使用[Google Apps Email Audit API Monitors](https://developers.google.com/google-apps/email-audit/#managing_email_monitors)或[Google Vault](http://www.google.com/enterprise/apps/business/products.html#vault)。

# svg - raphael js中的内联文本编辑

> ID：14064443
> 
> 赞同：4
> 
> 时间：2012-12-28T04:07:32.340
> 
> 标签：svg, raphael, javascript

所以我使用 Raphael JS 并尝试创建用户可编辑的文本输入。创建这样的东西的最简单和正确的方法是[什么](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-13T21:56:59.573

有一个插件：[https](https://github.com/marmelab/Raphael.InlineTextEditing) ://github.com/marmelab/Raphael.InlineTextEditing 。正如 Duopixel 所说，手工操作很棘手。

# javascript - UglifyJS / UglifyJS2 - 解密/还原工程结果有多难？

> ID：14064445
> 
> 赞同：0
> 
> 时间：2012-12-28T04:07:34.910
> 
> 标签：javascript, obfuscation, deobfuscation, uglifyjs

是否有任何可用的工具可以将优化的 blob 恢复为人类可读、易于理解的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:09:50.463

根据选项的不同，大部分有用的信息都会在这个过程中被破坏，但 UglifyJS2 本身可以重新添加缩进等。但是，局部变量名称、注释，有时（同样，取决于选项）其他东西会被破坏。

# java - 按等级和字母顺序对 IRC 用户进行排序 - Java Comparator

> ID：14064447
> 
> 赞同：1
> 
> 时间：2012-12-28T04:07:43.400
> 
> 标签：java, list, irc, comparator

我正在尝试在 java 中创建一个非常简单的 IRC 客户端，并且刚刚开始处理特定于频道的用户列表。我正在使用以下代码对用户列表进行排序，但它并没有按照应有的方式对其进行排序。IRC 层次结构是这样的：~ & @ % + (qaohv)，如果有人没有这些前缀之一，他们应该在用户列表的底部。有人知道我可以做些什么来使用一个比较器保留列表的字母顺序和排名顺序吗？

比较器代码：

```
public class StringComparator implements Comparator<String> {
    @Override
    public int compare(String a, String b) {
        return a.compareToIgnoreCase(b);
    }       
} 
```

上述比较器的示例输出：

```
%Brennan
&Adam
&Sheldon
+Mike
+Yoda
@Phil
@Unleashed
Jean
Damien
~Tim 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:21:00.477

在进行字母比较之前，您需要处理前缀的情况：

```
public class StringComparator implements Comparator<String> {
    @Override
    public int compare(String a, String b) {
        int pfx = betterPrefix(a[0],b[0]);
        if (pfx != 0)
            return pfx;
        return a.compareToIgnoreCase(b);
    }

    private int betterPrefix(char a, char b) {
        String prefixOrder = "@%&+"

        int idxa = prefixOrder.indexOf(a);
        if (idxa < 0) idxa = prefixOrder.length();
        int idxb = prefixOrder.indexOf(b);
        if (idxb < 0) idxb = prefixOrder.length();

        return idxa - idxb;
    }       
} 
```

这里我假设这两个字符串不为空，但你应该测试一下。

# jquery - 音频标签、jQuery 和 currentTime 的问题

> ID：14064449
> 
> 赞同：3
> 
> 时间：2012-12-28T04:07:50.160
> 
> 标签：jquery, html

```
<audio src="file.ogg" type="audio/ogg" controls="controls"></audio>​ 
```

为什么这个 jQuery/JavaScript 有效：

```
var audio = $('audio').get(0);
audio.play(); 
```

但这没有？：

```
var audio = $('audio').get(0);
audio.currentTime = 20;
audio.play(); 
```

[​jsFiddle](http://jsfiddle.net/H5EJh/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:18:48.793

尝试

```
var audio = $('audio');
audio.bind('canplay', function() {
        this.currentTime = 20;
});
audio.get(0).play(); 
```

# c# - 我们可以在本地系统下运行的 Windows 服务中访问网络文件吗？

> ID：14064450
> 
> 赞同：0
> 
> 时间：2012-12-28T04:08:01.797
> 
> 标签：c#, file, networking, directory

我有在本地系统帐户下运行的 Windows 服务。我正在检查 File.Exist（网络中的文件）。这适用于 windows 7，但是当我在 windows xp sp3 上运行此服务时，它会为 file.exists() 返回 false。有什么帮助？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:28:24.793

已解决.. LocalSystem 故意没有 NETWORK 权限，以便服务可以在该帐户下运行，并且“安全”免受可能触及网络的攻击。

所以你做得对 - 将其更改为其他帐户 - LocalSystem 不适用于进行网络访问的服务。

# css - 如何知道在哪里使用 css、less 和 Sass？

> ID：14064451
> 
> 赞同：11
> 
> 时间：2012-12-28T04:08:16.877
> 
> 标签：css, styles, sass, less

我了解 HTML、CSS 和 jQuery。最近我对[Sass](http://sass-lang.com/)的了解[较少](http://lesscss.org/)。由于它们都是样式表语言，我对在哪里使用它们有点困惑，因为 CSS 已经存在并且它也广泛用于每个网站。那么如何知道在该特定领域中在哪里使用这些（Less，Sass）。

我想到的另一个疑问是，在[wordpress](http://wordpress.org/)中使用 Sass 和 Less代替默认 CSS 是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-28T04:14:26.110

正如 zzzzBov 所说，LESS 和 SASS 是 css 预处理器。

基本上，您选择一个并用该语言编写您的样式定义。完成后，您通过预处理器运行它，它将为您生成一个普通的 CSS 文件。该普通文件就是您将在您的站点中使用的文件。

我强烈建议您跳过使用 SASS/LESS 或任何其他预处理器，直到您对 CSS 更加熟悉为止。

* * *

关于 LESS 的更多信息。

LESS 可以作为实际的预处理器提前运行，或者您可以简单地将 less.js 文件和您的 .less 文件链接起来，让浏览器来做。让浏览器这样做的问题在于，每个访问您网站的浏览器，对于每个页面，都必须“重新编译”css 才能正确呈现您的网站。考虑到您对访问您网站的计算机的控制为零，从某些人的角度来看，这可能会导致网站“缓慢”。

此外，该 javascript 仅适用于某些浏览器，进一步限制了它的实用性。

坦率地说，CSS 是您通常为网站设置一次并放置一年或更长时间的东西之一。所以，这可能根本不值得。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-28T04:21:26.567

SASS 和 LESS 是两种通过预处理器转换为 CSS 的领域特定语言。预处理器可以在 Javascript 中运行客户端，也可以通过 PHP、Node.js、Rails 等在服务器端运行。

SASS 或 LESS 都非常适合新项目。或者，如果您使用的框架可以使用这两种技术。（例如 Bootstrap 或 Rails）。

如果您正在修改使用纯 CSS（例如 Wordpress）的现有网站，您几乎应该始终扩展和构建现有样式。将纯 CSS 与 SASS/LESS 混合可能会一团糟，尤其是在您刚刚学习技术时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T05:30:42.047

两者都是为了让您的工作更轻松//节省时间，使您的 CSS 更具可读性，您将不再忘记您使用的颜色/边距或特定值，因为您可以创建变量、mixins 等。

如果您觉得您会从所提供的任何功能中受益，为什么不使用它呢？使用这些不是强制性的，我不会为我创建的每个项目都使用 CSS（尽管大部分）。试试看，一个多小时就知道基本功能了。

# java - 通过 SMTP Gmail Oauth2 问题发送邮件

> ID：14064454
> 
> 赞同：3
> 
> 时间：2012-12-28T04:08:56.363
> 
> 标签：java, smtp, gmail, smtp-auth, google-oauth

[我可以按照google 示例](http://code.google.com/p/google-mail-oauth2-tools/source/browse/trunk/java/com/google/code/samples/oauth2/OAuth2Authenticator.java)对 SMTP 进行身份验证。

但现在的问题是我无法发送邮件。每当我尝试发送邮件时，我都会收到以下错误。

```
com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 f5sm19578172pav.22

    at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2114)
    at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1618)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)
    at javax.mail.Transport.send0(Transport.java:195)
    at javax.mail.Transport.send(Transport.java:124) 
```

首先，我无法连接到本地主机，因此我在会话的属性中添加了几行代码，如下面的 OAuth2Authenticator 类，仍然成功验证。但是发不出去邮件。

```
props.put("mail.smtp.host", "smtp.gmail.com");
props.put("mail.smtp.port", "587"); 
```

我正在使用**相同的会话对象和 SMTP 传输对象**，当我第一次成功进行身份验证时，它们将从 OAuth2Authenticator 类返回。

```
 Message message = new MimeMessage(session);

        message.setFrom(new InternetAddress(msg.getFrom()));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse(msg.getTo()));
        message.setSubject(msg.getSubject());
        message.setText(msg.getBody());

        transport.send(message); 
```

完整的调试日志

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP gj1sm1027169pbc.11 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO E6410-PC
250-mx.google.com at your service, [202.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO E6410-PC
250-mx.google.com at your service, [202.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: Authenticate with SASL
DEBUG SMTP: SASL mechanisms allowed: XOAUTH2
DEBUG SMTP: SASL AUTH command trace suppressed
DEBUG SMTP SASL: Mechanisms: XOAUTH2
DEBUG SMTP SASL: SASL client XOAUTH2
DEBUG SMTP SASL: callback length: 1
DEBUG SMTP SASL: callback 0: javax.security.auth.callback.NameCallback@100ab23
DEBUG SMTP SASL: no response
Successfully authenticated to SMTP.
NOOP
250 2.0.0 OK gj1sm1027169pbc.11 - gsmtp
Is SMTP still connected: true
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP az8sm1466819pab.3 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO E6410-PC
250-mx.google.com at your service, [202.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO E6410-PC
250-mx.google.com at your service, [202.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: use8bit false
MAIL FROM:<user@gmail.com>
530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 az8sm1466819pab.3 - gsmtp
DEBUG SMTP: got response code 530, with response: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 az8sm1466819pab.3 - gsmtp

RSET
250 2.1.5 Flushed az8sm1466819pab.3 - gsmtp
DEBUG SMTP: MessagingException while sending
com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 az8sm1466819pab.3 - gsmtp

    at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2114)
    at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1618)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)
    at javax.mail.Transport.send0(Transport.java:195) 
```

编辑：我现在像这样明确地调用 AUTH 命令。

```
 byte[] response = String.format("user=%s\1auth=Bearer %s\1\1",
                    emailAddress, accessToken.getToken()).getBytes();
            response = BASE64EncoderStream.encode(response);
            System.out.println("token check : " + new String(response));

            transport.issueCommand("AUTH XOAUTH2 " + new String(response), 235); 
```

但反应还是一样。

```
DEBUG: setDebug: JavaMail version 1.4.5
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP kl3sm6965596pbc.15 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO E6410-PC
250-mx.google.com at your service, [xxx.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO E6410-PC
250-mx.google.com at your service, [xxx.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
Successfully authenticated to SMTP.
token check : abcdefgFuYUBnbWFpbC5jb20BYXV0aD1CZWabcdefgSEVTNlpUVlFTUXZfblZfZ01FaDF6WWtSQ2kzb1d5RElFQ19mb2NmWG5Sam93RUlBYVJRTldfNwEB
AUTH XOAUTH2 abcdefgFuYUBnbWFpbC5jb20BYXV0aD1CZWabcdefgSEVTNlpUVlFTUXZfblZfZ01FaDF6WWtSQ2kzb1d5RElFQ19mb2NmWG5Sam93RUlBYVJRTldfNwEB
235 2.7.0 Accepted
NOOP
250 2.0.0 OK kl3sm6965596pbc.15 - gsmtp
Is SMTP still connected: true
DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]
DEBUG SMTP: enable SASL
DEBUG SMTP: useEhlo true, useAuth false
DEBUG SMTP: trying to connect to host "smtp.gmail.com", port 587, isSSL false
220 mx.google.com ESMTP vo6sm6969236pbc.8 - gsmtp
DEBUG SMTP: connected to host "smtp.gmail.com", port: 587

EHLO E6410-PC
250-mx.google.com at your service, [xxx.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "STARTTLS", arg ""
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
STARTTLS
220 2.0.0 Ready to start TLS
EHLO E6410-PC
250-mx.google.com at your service, [xxx.xxx.xxx.xxx]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
250 ENHANCEDSTATUSCODES
DEBUG SMTP: Found extension "SIZE", arg "35882577"
DEBUG SMTP: Found extension "8BITMIME", arg ""
DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN XOAUTH XOAUTH2"
DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", arg ""
DEBUG SMTP: use8bit false
MAIL FROM:<user@gmail.com>
530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vo6sm6969236pbc.8 - gsmtp
DEBUG SMTP: got response code 530, with response: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vo6sm6969236pbc.8 - gsmtp

RSET
250 2.1.5 Flushed vo6sm6969236pbc.8 - gsmtp
DEBUG SMTP: MessagingException while sending
com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vo6sm6969236pbc.8 - gsmtp

    at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2114)
    at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1618)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)
    at javax.mail.Transport.send0(Transport.java:195)
    at javax.mail.Transport.send(Transport.java:124)

QUIT
221 2.0.0 closing connection vo6sm6969236pbc.8 - gsmtp
com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at
530 5.5.1 http://support.google.com/mail/bin/answer.py?answer=14257 vo6sm6969236pbc.8 - gsmtp

    at com.sun.mail.smtp.SMTPTransport.issueSendCommand(SMTPTransport.java:2114)
    at com.sun.mail.smtp.SMTPTransport.mailFrom(SMTPTransport.java:1618)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1119)
    at javax.mail.Transport.send0(Transport.java:195)
    at javax.mail.Transport.send(Transport.java:124) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:08:05.103

对不起，答案在这里：我测试过[的使用 XOauth 的 Android 中的 Javamail api](https://stackoverflow.com/questions/12503303/javamail-api-in-android-using-xoauth/12821612#12821612)，它可以工作。

“SMS 样式登录”失败 - 使用 2 步登录（通过电话 SMS）的安全帐户拒绝通过 SMTP 发送电子邮件（RAW 密码和 OAuth 样式，失败并出现身份验证错误）。他们将允许您创建 OAuth 令牌，但不会发送电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T05:35:35.063

这是一个旧线程，但是在经历了许多论坛（并且没有一个有正确答案）之后，我花了很长时间才弄清楚这一点，所以如果它对某人有帮助，我会发布它。上面的许多答案都建议使用不正确的密码

如果您使用带有 OAuth2 的最新 google api 并且还使用示例代码 @ [http://code.google.com/p/google-mail-oauth2-tools/downloads/detail?name=oauth2-java-sample-20120904 .zip&can=2&q=](http://code.google.com/p/google-mail-oauth2-tools/downloads/detail?name=oauth2-java-sample-20120904.zip&can=2&q=)

并且得到了例外 `com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required`。如需了解详情，请访问 530 5.5.1 [http://support.google.com/mail/bin/answer.py?answer=14257](http://support.google.com/mail/bin/answer.py?answer=14257) vo6sm6969236pbc.8 - gsmtp

以下是解决问题的步骤

`oauth2.py`完全按照 zip 下载中的说明运行 python 。Argument 是您必须在代码中使用的`OAuth2`oauthtoken。

运行`OAuth2Authenticator.connectToSmtp("smtp.googlemail.com", 587, email, oauthToken, true)`方法后得到`SMTPTransport`. 要发送消息：

```
 //create the message
  //Note that you do need to get the same session object that gets created within the connectToSmtp method.
  MimeMessage message = new MimeMessage(session);
  message.setFrom(new InternetAddress("from@gmail.com"));
  message.addRecipient(Message.RecipientType.TO, new InternetAddress("to@gmail.com"));
  message.setSubject("This is the Subject Line!");
  message.setText("This is actual message");

  //this was the magic line that is needed - for authentication
  transport.issueCommand("AUTH XOAUTH2 " + oauthToken, 235);

  //send the message
  transport.sendMessage(message, message.getAllRecipients()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:55:35.647

您只需要进行身份验证。按照这个例子，它也使用 gmail： [http ://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-28T05:25:49.770

我认为它要求对您的用户名进行身份验证。

```
session=Session.getInstance(props,
         new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(fromUsername, password);
            }
          }); 
```

然后在您的代码中使用上述会话。

我没有使用你提到的谷歌链接中指定的代码，但我使用 java mail api 从我的 gmail 帐户发送电子邮件。使用上面的代码进行身份验证

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T10:08:07.783

尝试将这些添加到您的道具配置中。

```
 props.put("mail.smtp.auth", true);
  props.put("mail.smtp.starttls.enable", true); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-08T08:39:37.327

嗨，朋友，我终于可以使用 OAUTH 发送消息，发布我的 OAuth2Authenticator 源，

```
/* Copyright 2012 Google Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/

package com.example;

import com.sun.mail.imap.IMAPStore;
import com.sun.mail.imap.IMAPSSLStore;
import com.sun.mail.smtp.SMTPTransport;

import java.security.Provider;
import java.security.Security;
import java.util.Properties;
import java.util.UUID;
import java.util.logging.Logger;

import javax.mail.Address;
import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.URLName;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

/**
* Performs OAuth2 authentication.
*
* <p>Before using this class, you must call {@code initialize} to install the
* OAuth2 SASL provider.
*/
public class OAuth2Authenticator {
 private static final Logger logger =
     Logger.getLogger(OAuth2Authenticator.class.getName());

 public static final class OAuth2Provider extends Provider {
   private static final long serialVersionUID = 1L;

   public OAuth2Provider() {
     super("Google OAuth2 Provider", 1.0,
           "Provides the XOAUTH2 SASL Mechanism");
     put("SaslClientFactory.XOAUTH2",
         "com.google.code.samples.oauth2.OAuth2SaslClientFactory");
   }
 }

 /**
  * Installs the OAuth2 SASL provider. This must be called exactly once before
  * calling other methods on this class.
  */
 public static void initialize() {
   Security.addProvider(new OAuth2Provider());
 }

 /**
  * Connects and authenticates to an IMAP server with OAuth2\. You must have
  * called {@code initialize}.
  *
  * @param host Hostname of the imap server, for example {@code
  *     imap.googlemail.com}.
  * @param port Port of the imap server, for example 993.
  * @param userEmail Email address of the user to authenticate, for example
  *     {@code oauth@gmail.com}.
  * @param oauthToken The user's OAuth token.
  * @param debug Whether to enable debug logging on the IMAP connection.
  *
  * @return An authenticated IMAPStore that can be used for IMAP operations.
  */
 public static IMAPStore connectToImap(String host,
                                       int port,
                                       String userEmail,
                                       String oauthToken,
                                       boolean debug) throws Exception {
   Properties props = new Properties();
   props.put("mail.imaps.sasl.enable", "true");
   props.put("mail.imaps.sasl.mechanisms", "XOAUTH2");
   props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);
   Session session = Session.getInstance(props);
   session.setDebug(debug);

   final URLName unusedUrlName = null;
   IMAPSSLStore store = new IMAPSSLStore(session, unusedUrlName);
   final String emptyPassword = "<your_gmail_password>";
   store.connect(host, port, userEmail, emptyPassword);
   return store;
 }

 /**
  * Connects and authenticates to an SMTP server with OAuth2\. You must have
  * called {@code initialize}.
  *
  * @param host Hostname of the smtp server, for example {@code
  *     smtp.googlemail.com}.
  * @param port Port of the smtp server, for example 587.
  * @param userEmail Email address of the user to authenticate, for example
  *     {@code oauth@gmail.com}.
  * @param oauthToken The user's OAuth token.
  * @param debug Whether to enable debug logging on the connection.
  *
  * @return An authenticated SMTPTransport that can be used for SMTP
  *     operations.
  */
 public static SMTPTransport connectToSmtp(String host,
                                           int port,
                                           String userEmail,
                                           String oauthToken,
                                           boolean debug) throws Exception {
   Properties props = new Properties();
   props.put("mail.smtp.starttls.enable", "true");
   props.put("mail.smtp.starttls.required", "true");
   props.put("mail.smtp.sasl.enable", "true");
   props.put("mail.smtp.sasl.mechanisms", "XOAUTH2");
   props.put("mail.smtp.auth","true");
   props.put(OAuth2SaslClientFactory.OAUTH_TOKEN_PROP, oauthToken);

   Session session = Session.getInstance(props);
   /*,
           new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("prateek.engineer@gmail.com", emptyPassword);
        }
      });*/
   session.setDebug(debug);

   final URLName unusedUrlName = null;
   SMTPTransport transport = new SMTPTransport(session, unusedUrlName);
   // If the password is non-null, SMTP tries to do AUTH LOGIN.
   final String emptyPassword = "<your_gmail_password>";
   transport.connect(host, port, userEmail, emptyPassword);

   Message message = new MimeMessage(session);
   message.setFrom(new InternetAddress("<your_gmail_id>"));
   message.setRecipients(Message.RecipientType.TO,InternetAddress.parse("<recepient_emailid>"));
   message.setSubject("Test Message");
   message.setText("First Message using OAuth Protocol");
   /*SMTPTransport.send(message);*/

   Address[] add=new InternetAddress[1];
   add[0]= new InternetAddress("<recepient_emailid>");
   transport.sendMessage(message, add);

   return transport;
 }

 /**
  * Authenticates to IMAP with parameters passed in on the commandline.
  */
 public static void main(String args[]) throws Exception {
   /*if (args.length != 2) {
     System.err.println(
         "Usage: OAuth2Authenticator <email> <oauthToken>");
     return;
   }*/
   String email = "<your_gmail_id>";

   String oauthToken = "";

   initialize();

   IMAPStore imapStore = connectToImap("imap.gmail.com",
                                       993,
                                       email,
                                       oauthToken,
                                       true);
   System.out.println("Successfully authenticated to IMAP.\n");
   SMTPTransport smtpTransport = connectToSmtp("smtp.gmail.com",
                                               587,
                                               email,
                                               oauthToken,
                                               true);

   System.out.println("Successfully authenticated to SMTP.");
 }
} 
```

添加您的密码和您错过的行，因为您需要身份验证的例外是:::

```
props.put("mail.smtp.auth","true"); 
```

在你的**connectToSmtp(.... , ...);** 方法

你得到的回应是::

```
From: <your_email_id>
To: <recepient_eemail_id>
Subject: Test Message
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

First Message using OAuth Protocol //its message u have 
.
250 2.0.0 OK 1360312537 a1sm52630615pav.2 - gsmtp
Successfully authenticated to SMTP. 
```

# ios - 允许跨 LAN 流式传输音乐的库或协议？

> ID：14064455
> 
> 赞同：0
> 
> 时间：2012-12-28T04:09:03.123
> 
> 标签：ios, streaming, lan

是否有任何库或开放协议允许跨局域网中的多台机器发送音乐比特流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:13:48.160

如果您希望每个人都像广播电台一样收听相同的内容，请尝试从媒体服务器流式传输。然后为您的媒体服务器上的频道创建一个带有嵌入式播放器的页面。然后发布页面。

为高数据使用做好准备，因为每个连接的用户都会将数据消耗增加 1 倍比特率。

# php - php/html 自动在 rss 帖子之间创建新行？

> ID：14064458
> 
> 赞同：0
> 
> 时间：2012-12-28T04:09:12.540
> 
> 标签：php, simplepie

我的目标是创建一个动态链接列表，它们彼此相邻（而不是彼此重叠）。到目前为止，我已经使用 Simplepie 和 Atom 数据源正确输出了链接，但由于某种原因，我的输出在 for each 语句中的每个新项目之间都有一个换行符。是否可以跳过换行符并将输出项彼此相邻放置？我没有得到任何错误，只是没有得到我的目标输出。请帮助这使我以指数速度变老:)

```
<body>
<?php
foreach ($feed->get_items() as $item):
?>
<div class="item"><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item-    >get_title(); ?></a></div><?php endforeach; ?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:12:42.740

将链接放在`<ul>`（无序列表元素）中，样式`float:left`如下

```
<body>
    <ul>
        <?php
            foreach ($feed->get_items() as $item):?>
                <li class="item"><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item- >get_title(); ?></a>
                </li>
            <?php endforeach; ?>
    </ul>
</body> 
```

# vb.net - Datagridview 自定义单元格边框和自定义单元格前景色

> ID：14064464
> 
> 赞同：1
> 
> 时间：2012-12-28T04:10:34.393
> 
> 标签：vb.net

抱歉，如果我的问题太长，但我必须在提问之前解释一下。

我想在满足我设置的条件时更改单元格的文本颜色。

我还想在每 2 行中绘制水平线，在每 5 列中绘制垂直线。

我可以分别做这两个。问题是我不能同时得到它们。

如果我先更改文本，受影响单元格的边框就会消失。

如果我先绘制边框，文本颜色会变回黑色（默认）。

**我必须更改单元格的文本颜色和边框颜色。**

我的代码如下：

```
Private Sub GridBorderLine(ByVal e As System.Windows.Forms.DataGridViewCellPaintingEventArgs)
    'Declare Border Style and Border Color
    Dim vBStyle As ButtonBorderStyle = ButtonBorderStyle.Solid
    Dim vBColor As Color = Color.Black

    'Custom Row Border (Horizontal)
    If e.RowIndex Mod 2 = False AndAlso e.RowIndex > 0 Then
        e.Paint(e.CellBounds, DataGridViewPaintParts.All - DataGridViewPaintParts.ContentBackground)

        Dim H As Integer = 0
        ControlPaint.DrawBorder(e.Graphics, e.CellBounds, vBColor, 0, vBStyle, vBColor, 3, vBStyle, vBColor, 0, vBStyle, vBColor, 0, vBStyle)
        e.Handled = True
    End If

    'Custom Column Border (Vertical)
    If e.ColumnIndex Mod 5 = False AndAlso e.ColumnIndex > 0 Then
         e.Paint(e.CellBounds, DataGridViewPaintParts.All - DataGridViewPaintParts.ContentBackground)

        Dim W As Integer = 0
        If e.RowIndex Mod 2 = False And e.RowIndex > 0 Then W = 3 Else W = 0
        ControlPaint.DrawBorder(e.Graphics, e.CellBounds, vBColor, 3, vBStyle, vBColor, W, vBStyle, vBColor, 0, vBStyle, vBColor, 0, vBStyle)
        e.Handled = True
    End If

    'Custom Cell Color
    If e.FormattedValue.ToString.Contains(txt.Text) Then 
        CellColor(e)
    End If
End Sub

Private Sub CellColor(ByVal e As System.Windows.Forms.DataGridViewCellPaintingEventArgs)
    Dim vLength as Integer = txt.Text.Length
    e.Paint(e.CellBounds, DataGridViewPaintParts.All - DataGridViewPaintParts.ContentForeground)

    If e.FormattedValue.ToString = "" Then Exit Sub
    Dim vBeginning As String = e.FormattedValue.ToString.Substring(0, vLength)
    Dim vEnd As String = e.FormattedValue.ToString.Substring(vLength)

    Dim s As Size = TextRenderer.MeasureText(e.FormattedValue.ToString, vFont)
    Dim f As Size = TextRenderer.MeasureText(vBeginning, vFont)
    Dim b As Size = TextRenderer.MeasureText(vEnd, vFont)

    'Arrange Center Middle
    Dim w = e.CellBounds.X + ((e.CellBounds.Width - s.Width) / 2)
    Dim h = e.CellBounds.Y + ((e.CellBounds.Height - s.Height) / 2)

    Dim topLeft As New Point(w, h)
    Dim p As New Point(topLeft.X + (s.Width - b.Width), topLeft.Y)

   TextRenderer.DrawText(e.Graphics, vBeginning, vFont, topLeft, Color.Red)
    TextRenderer.DrawText(e.Graphics, vEnd, vFont, p, Color.Blue)

    e.Handled = True
End Sub 
```

# python - Python正则表达式：如何排除超字符串？

> ID：14064465
> 
> 赞同：7
> 
> 时间：2012-12-28T04:10:39.620
> 
> 标签：python, regex

我想找到“不”的所有外观，但不包括“不好”或“不坏”的术语。

例如，“not not not good, not bad, not mine”将匹配第一个和最后一个“not”。

如何使用 python 中的 re 包实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T04:16:02.757

使用否定的前瞻断言：

```
\bnot\b(?!\s+(?:good|bad)) 
```

这将匹配`not`，除了字符串中`good`和`bad`紧随其后的情况。`not`我添加了单词边界`\b`以确保我们匹配单词`not`，而不是`not`在`nothing`or中`knot`。

* * *

`\b`是单词边界。它检查前面的字符是单词字符，后面的字符不是，***反之亦然***。单词字符通常是英文字母 (az, AZ)、数字 (0-9)*和下划线*(_)，但根据正则表达式的风格，可能会更多。

`(?!pattern)`是零宽度负前瞻的语法 - 它将检查从当前点开始，它无法`pattern`在输入字符串中找到指定的提前。

`\s`表示空白字符（空格 (ASCII 32)、新行`\n`、制表符`\t`等 - 查看文档以获取更多信息）。如果不想这么随意匹配，直接换成（空格）就好`\s`了。

 ``+`in匹配前面标记的`\s+`一个或多个实例，在这种情况下，它是空白字符。

`(?:pattern)`是非捕获组。不需要捕获`good`and `bad`，因此我指定 so 是为了提高性能。`

# vb.net - VB.Net 从字符串函数中提取数字

> ID：14064468
> 
> 赞同：0
> 
> 时间：2012-12-28T04:11:48.930
> 
> 标签：vb.net, function, numbers, extract

我的要求是可以通过搜索提取一些数字。

示例： `animalsOwned|4`将返回一个包含“4”

`animals|3|2|1|3`将返回一个包含“3”、“2”、“1”、“3”的数组

这将使我在文件流阅读器期间更容易。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:16:55.513

```
Dim astring = "ABCDE|1|2|3|4"

Dim numbers = (From s In astring
               Where Char.IsDigit(s)
               Select Int32.Parse(s)).ToArray() 
```

这个 LINQ 语句应该会有所帮助。它只是检查字符串中的每个字符以查看它是否是数字。请注意，这仅适用于单个数字。如果您希望“ABC123”返回 123 与 1、2、3 数组，它会变得有点复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:38:40.837

试试正则表达式。它是用于简单文本解析的强大工具。

```
Imports System.Text.RegularExpressions
Namespace Demo
    Class Program
        Shared Function Main(ByVal args As String()) As Integer
            Dim array As Integer() = ExtractIntegers("animals|3|2|1|3")
            For Each i In array
                Console.WriteLine(i)
            Next
            Return 0
        End Function
        Shared Function ExtractIntegers(ByVal input As String) As Integer()
            Dim pattern As String = "animals(\|(?<number>[0-9]+))*"
            Dim match As Match = Regex.Match(input, pattern)
            Dim list As New List(Of Integer)
            If match.Success Then
                For Each capture As Capture In match.Groups("number").Captures
                    list.Add(Integer.Parse(capture.Value))
                Next
            End If
            Return list.ToArray()
        End Function
    End Class
End Namespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:22:51.627

我有一段时间没有编写 VB，但我会给你一些伪代码：首先，循环遍历文件的每一行。将此变量称为 Line。然后，获取您正在搜索的内容的索引：例如 Line.indexOf("animalsOwned") 如果它返回 -1 它不存在；继续。找到它后，将 Index 变量添加到搜索字符串的长度和 1。 (Index=Index+1+Len(searchString)) 然后，从那里获取一个子字符串，并在行尾结束。通过 | 展开子字符串 字符，然后将每个字符添加到数组中。返回数组。

对不起，我不能给你太多帮助，但我现在正在开发一个重要的 PHP 网站；）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T04:38:51.310

您可以执行 a`variable.Split("|")`然后将每个部分分配给数组级别。

您可以对字符串进行计数，并使用 while 或 for 循环，您可以将拆分的部分分配给数组级别。然后您可以`IsNumeric()`检查每个数组级别。

# windows-8 - 有没有办法检测笔是否靠近 WinRT 中的屏幕

> ID：14064474
> 
> 赞同：4
> 
> 时间：2012-12-28T04:12:57.253
> 
> 标签：windows-8, windows-runtime, microsoft.ink

我希望能够检测我是否有一支笔靠近屏幕。
例如，如果我用笔打开它，我想显示一个不同的应用栏。
另外，当我将笔靠近它（不一定要触摸它）时，我想在屏幕上显示其他内容。

/吉米

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T04:33:16.810

当笔或手指靠近屏幕时，您将收到一个[`PointerEntered`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.pointerentered.aspx)事件。当笔或手指接触时触发该[`PointerPressed`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.icorewindow.pointerpressed.aspx)事件。如果硬件不支持接近，则在`PointerEntered`接触之前不会触发，并且会立即跟随一个`PointerPressed`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:32:04.067

我想到了。
我监听 PointerEntered-event 和 PointerExited-event，然后设置一个可以在 appbar_opened-event 中检查的变量。
效果很好。

/吉米

# eclipse - Eclipse 启动错误

> ID：14064475
> 
> 赞同：0
> 
> 时间：2012-12-28T04:12:57.237
> 
> 标签：eclipse

当我开始我的eclipse时，它给出了以下错误：

在以下期间发生内部错误：

```
"Repository registry initialization".
java.lang.NegativeArraySizeException 
```

有谁知道我该如何解决这个错误。？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:19:18.347

一旦建议将此工作区重命名 `.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi`为其他名称，然后尝试启动。这将重置基本透视图和打开的视图（并删除所有打开的编辑器）。

它不会重置工作区。这应该重置导致此问题的插件配置。（我指定的解决方案是启动 eclipse 问题的通用解决方案）

# php - 在 PHP 中为属性分配多个参数

> ID：14064479
> 
> 赞同：1
> 
> 时间：2012-12-28T04:13:52.970
> 
> 标签：php, class, constructor

我有一个这样的类定义：

```
class User{
    public $first;
    public $last;
    public $email;
    public $guid;
    public $website;
    public $bio;
    public $picture;
    public $gender;
    ...
} 
```

和一个构造函数，它从工厂函数中获取值并将它们放入类中，如下所示：

```
public function __construct($guid, $first , $last,$email, $bio, $picture, $gender) {
    $this->guid = $guid;
    $this->first = $first;
    $this->last = $last;
    $this->email = $email;
            ...
} 
```

是否有一种简单的方法可以自动分配所有这些变量？或者我可以使用带有 PHP 参数函数的 for 遍历它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:21:38.210

在这种情况下，这应该更简单：

```
class User{

    public function __construct($params) {//params is array('first' => 'hello', 'last' => 'hi', 'email'=>'hellohi@hi.com')
        foreach ($params as $key => $value)
        {
            $this->$key = $value;
        }
    }
} 
```

然后，您可以通过以下方式访问属性：

```
$params = array('first' => 'hello', 'last' => 'hi', 'email'=>'hellohi@hi.com');
$user = new User($params);
echo $user->first; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:23:55.287

```
<?php

class User {

    public $first;
    public $last;
    public $email;
    public $guid;
    public $website;
    public $bio;
    public $picture;
    public $gender;

    public function __construct($params) { // Same params array from previous answer.

        foreach ($params as $key => $value) {

            $this->$key = $value;
        }

    }
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-09T09:47:23.557

按照 Simon Germain 的建议使用 func_get_args 并使用您得到的列表函数：

```
<?php 

class Test{

    var $x, $y, $z;

    function __construct($x, $y, $z){
         list($this->x, $this->y, $this->z) = func_get_args();
    }
 } 
```

我不相信它可以以更短的方式完成。

# iphone - 如何为 IPHONE 和 IPAD 编写适合网站的 css？

> ID：14064482
> 
> 赞同：0
> 
> 时间：2012-12-28T04:15:35.313
> 
> 标签：iphone, html, css, ipad

我搜索了几次以使 css 适合我的 IPHONE 和 IPAD 网站。但是使用这些设备的元标记和 css 样式来解决这个问题的方法很少。但我对此没有什么疑问。

1.需要为iphone和ipad的横向和纵向添加单独的元标记？

2.如何为横向和纵向添加css？

3.如果不添加元标记（使用css），这会起作用吗？

4.我正在尝试为iphone和ipad添加适合屏幕的世界地图，那么我需要重新调整地图图像的大小吗？

5.每个设备和每个位置改变元标记值的原理是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:21:45.290

请查看[http://msdn.microsoft.com/en-us/magazine/hh653584.aspx](http://msdn.microsoft.com/en-us/magazine/hh653584.aspx)

这是关于响应式网页设计

# c# - 将委托作为参数的方法？

> ID：14064486
> 
> 赞同：3
> 
> 时间：2012-12-28T04:15:53.497
> 
> 标签：c#, .net, wpf, animation, delegates

我正在尝试创建一个将委托作为其参数之一但它不起作用的方法。我究竟做错了什么？我在具有`windowAnimation.Completed += new EventHandler(callback)`.

```
private void animateWindowWidth(Window window, double width, double duration, Delegate callback)
{
    window.BeginInit();
    window.Dispatcher.BeginInvoke(new Action(() =>
    {
        DoubleAnimation windowAnimation = new DoubleAnimation();
        windowAnimation.Duration = new Duration(TimeSpan.FromSeconds(duration));
        windowAnimation.From = window.Width;
        windowAnimation.To = width;
        windowAnimation.FillBehavior = FillBehavior.HoldEnd;
        windowAnimation.Completed += new EventHandler(callback);
        window.BeginAnimation(Window.WidthProperty, windowAnimation);
    }), null);
    window.EndInit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:01:36.223

我只是想我会解释一下为什么`Delegate`它本身不起作用。

`Delegate`不是真正的代表，而是一个代表。它基本上是一个包含委托的变量。这就是为什么将变量视为方法时会出现错误的原因。

一个简单的例子（假设你可能永远不会这样做）是如果你有两个代表来做加法。一个带有整数，另一个带有浮点数。您可以将委托存储在一个`Delegate`对象中，并将其传递给另一个调用`DynamicInvoke()`一个变量的函数：

```
 void MyMethod(Delegate d)
    {
        d.DynamicInvoke(leftHandSide, rightHandSide);
    } 
```

无论两个委托中的哪一个存储在`Delegate`对象中，您都可以获得适当的功能。

在您的情况下，`windowAnimation.Completed`需要一个实际的委托方法，例如 EventHandler。此外，EventHandler 的构造函数需要一个委托方法。因此，在任何一种情况下使用`Delegate`对象都行不通。

您必须将其包装在委托中或使用 lambda 函数来放置真正的方法调用

```
windowAnimation.Completed += (s,e) => callback.DynamicInvoke(); 
```

或者当你想调用这个方法时更改`callback`为一个并创建一个新的。`EventHandler`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:26:00.093

您可以将方法签名更改为：

```
private void animateWindowWidth(
    Window window, 
    double width, 
    double duration, 
    EventHandler callback) 
```

以及导致错误的那一行

```
windowAnimation.Completed += callback; 
```

`EvenHandler`然后在调用该方法时创建一个新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:48:40.077

尝试使用`Action`而不是`Delegate`替换此字符串：

```
windowAnimation.Completed += new EventHandler(callback); 
```

有了这个：

```
windowAnimation.Completed += (s, e) => callback(); 
```

所以，最后它应该是这样的：

```
private void animateWindowWidth(Window window, double width, double duration, Action callback)
{
    window.BeginInit();
    window.Dispatcher.BeginInvoke(new Action(() =>
    {
        DoubleAnimation windowAnimation = new DoubleAnimation();
        windowAnimation.Duration = new Duration(TimeSpan.FromSeconds(duration));
        windowAnimation.From = window.Width;
        windowAnimation.To = width;
        windowAnimation.FillBehavior = FillBehavior.HoldEnd;
        windowAnimation.Completed += (s, e) => callback());
        window.BeginAnimation(Window.WidthProperty, windowAnimation);
    }), null);
    window.EndInit();
} 
```

# c++ - 在专门的领域库中使用 Qt？

> ID：14064488
> 
> 赞同：0
> 
> 时间：2012-12-28T04:15:59.247
> 
> 标签：c++, qt, user-interface, core

我想使用 Qt 为我的专业应用程序开发 GUI。我打开了两个项目：一个名为“Gui”，可以使用 Qt 执行所有与 Gui 相关的代码，另一个名为“Core”库，包含与专业领域相关的代码。在我的项目“核心”中，我有很多功能，比如

```
bool DoSomething(ArgumentTypes arguments, string& errorInfo); 
```

如果 DoSomething 失败，我可以获得一些有意义的错误信息。我想在 GUI 中显示此错误信息（例如在消息框中），并且可以通过 Qt 翻译功能翻译成其他语言。我是否需要为我的“核心”库构建一个 Qt 库，然后使用 QString 和 tr() 函数来实现我想要的？似乎将 Qt 用于我的“核心”库是不合适的，因为它不是 GUI。有什么好主意吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:09:26.977

对于我的毕业论文，我编写了一个连接 QtCore 并在无头超级计算机上运行的程序。我主要使用 QtCore 进行字符串处理和插件加载，以及几何图元（QPoint、QLine 等）。

如您所见，Qt 本身并不是一个 GUI 库。如果您愿意，可以将 Qt 视为一个开发平台。标准 C++ 缺乏的连贯的瑞士军刀框架。Qt 是一个大型框架，GUI 只是其中一个方面。

因此，我建议您将核心库与 QtCore 链接，并将您的 GUI 应用程序与 QtCore+QtGui 链接（根据需要添加更多 Qt 模块）。

# mysql - 带有tenant_id的Mysql复合索引

> ID：14064489
> 
> 赞同：3
> 
> 时间：2012-12-28T04:15:59.460
> 
> 标签：mysql, indexing, multi-tenant

我们有一个多租户应用程序，它有一个包含 129 个字段的表，这些字段都可以在 WHERE 和 ORDER BY 子句中使用。我现在花了 5 天的时间试图找出最适合我们的索引策略，我获得了很多知识，但我仍然有一些问题。

1）在创建索引时，我是否应该首先将其设为一个带有tenant_id 的复合索引？（所有查询都有tenant_id = ？在WHERE 子句中）

2) 由于所有列都可以在 WHERE 子句和 order by 子句中使用，我应该对它们都创建索引吗？（知道当我按没有索引的列排序时，与拥有约 1,500,000 行的租户一起执行需要 6 秒）

3）制作PK（tenant_id，ID），但这不会影响到该表的连接吗？

任何有关如何处理此问题的建议将不胜感激。

====== 数据库引擎是 InnoDB

=======

结构体 ：

```
ID bigint(20) auto_increment primary
tenant_id int(11)
created_by int(11)
created_on Timestamp
updated_by int(11)
updated_on Timestamp
owner_id int(11)
first_name VARCHAR(60)
last_name VARCHAR(60)
.
.
.
(some 120 other columns that are all searchable) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T04:56:48.800

对问题的一些简短回答。据我所知，您对使用感到困惑`indexes`

如果比率 - 考虑在列上创建索引 -

`Consideration 1`-

> （列的唯一条目数）/（列中的总条目数）~= 1

也就是说，特定列中的 DISTINCT 行数很高。

创建**额外的** `index`总是会为 MySQL 服务器创建开销，所以你**不能**创建每一列一个`index`. *您的单个表可以拥有的索引数量也有限制 = 每个表 64*

现在，如果您`tenant_id`出现在所有搜索查询中，则应将其视为 a`index`或 a `composite key`，

前提是——

`Consideration 2`- 数量`UPDATEs`小于上`SELECTs`的数量`tenant_id`

`Consideration 3`-`indexe`就 而言，s 应该尽可能小`data types`。您**不得**创建`varchar 64`索引
[http://www.mysqlperformanceblog.com/2012/08/16/mysql-indexing-best-practices-webinar-questions-followup/](http://www.mysqlperformanceblog.com/2012/08/16/mysql-indexing-best-practices-webinar-questions-followup/)

`Point to Note 1`- 即使您确实将任何列声明为索引，MySQL 优化器仍可能不会将其视为查询执行的最佳计划。所以总是`EXPLAIN`用来知道发生了什么。[http://www.mysqlperformanceblog.com/2009/09/12/3-ways-mysql-uses-indexes/](http://www.mysqlperformanceblog.com/2009/09/12/3-ways-mysql-uses-indexes/)

`Point to Note 2`- 您可能想要`cache`搜索查询，因此请记住不要在`SELECT`查询中使用不可预测的语句，例如`NOW()`

最后 - 制作 PK (tenant_id, ID) 不应影响表上的连接。
还有一个很棒的链接来回答你所有的问题 - [http://www.percona.com/files/presentations/WEBINAR-MySQL-Indexing-Best-Practices.pdf](http://www.percona.com/files/presentations/WEBINAR-MySQL-Indexing-Best-Practices.pdf)

# jqgrid - 无法让 jquery.jqgrid 4.4.1 在 ASP.NET MVC 中工作

> ID：14064492
> 
> 赞同：2
> 
> 时间：2012-12-28T04:16:17.787
> 
> 标签：jqgrid, asp.net-mvc-4

我一直在努力让 jquery.jqgrid 4.4.1 在我的 ASP.NET MVC 4 解决方案中工作。我使用 NuGet 将 jquery.jqgrid 4.4.1 安装到我的项目中。我试图在我的页面中插入一个非常简单的网格，只是为了确保我的包含都正确设置。这是我的视图文件中的内容。

```
@{
ViewBag.Title = "Index";
}
<link href="~/Content/Site.css" rel="stylesheet" />
<link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />
<link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" />

                <script src="~/Scripts/jquery-1.7.2.min.js"></script>
    <script src="~/Scripts/i18n/grid.locale-en.js"></script>
    <script src="~/Scripts/jquery.jqGrid.min.js"></script>

<h2>Index</h2>
<script type="text/javascript">
    $(document).ready(function() {
    $("#myGrid").jqGrid({
        url:'@Url.Action("GetJqGridData")',
        datatype:'json',
        myType:'GET',
        colNames:['Id', 'Name'],
        colModel:[
        { name: 'Id', index: 'Id'},
        { name: 'Name', index: 'Name'}
        ],
        jsonReader: {
            root: 'Data',
        id: 'id',
        repeatitems: false
        },
        pager: $('#myPager'),
        rowNum:5,
        rowList: [2, 5, 10],
        width:600,
        viewrecords:true,
        caption: 'Jqgrid MVC Tutorial'
    });
});
</script>

    <table id="myGrid"></table>
    <div id="myPager"></div> 
```

这是我在运行解决方案时收到的 Javascript 错误。

> 站点/网格中第 54 行第 5 列未处理的异常
> 
> 0x800a01b6 - JavaScript 运行时错误：对象不支持属性或方法“jqGrid”

View 甚至从来没有达到调用控制器获取数据的地步。

任何帮助将不胜感激。

**更新** 了这里是发送到浏览器以获取更多详细信息的 HTML。索引 - 我的 ASP.NET MVC 应用程序

```
 <script src="/Scripts/modernizr-2.5.3.js"></script>

    </head>
    <body>
        <header>
            <div class="content-wrapper">
                <div class="float-left">
                    <p class="site-title"><a href="/">your logo here</a></p>
                </div>
                <div class="float-right">
                    <section id="login">
                            <ul>
        <li><a href="/Account/Register" id="registerLink">Register</a></li>
        <li><a href="/Account/Login" id="loginLink">Log in</a></li>
    </ul>

                    </section>
                    <nav>
                        <ul id="menu">
                            <li><a href="/">Home</a></li>
                            <li><a href="/Home/About">About</a></li>
                            <li><a href="/Grid">Grid Test</a></li>
                            <li><a href="/Home/Contact">Contact</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div id="body">

            <section class="content-wrapper main-content clear-fix">

<link href="/Content/Site.css" rel="stylesheet" />
<link href="/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />
<link href="/Content/themes/base/jquery.ui.all.css" rel="stylesheet" />

<script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/Scripts/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="/Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>

<h2>Index</h2>
<script type="text/javascript">
$(document).ready(function() {
    $("#myGrid").jqGrid({
        url:'/Grid/GetJqGridData',
        datatype:'json',
        myType:'GET',
        colNames:['Id', 'Name'],
        colModel:[
        { name: 'Id', index: 'Id'},
        { name: 'Name', index: 'Name'}
        ],
        jsonReader: {
        root: 'Data',
        id: 'id',
        repeatitems: false
        },
        pager: $('#myPager'),
        rowNum:5,
        rowList: [2, 5, 10],
        width:600,
        viewrecords:true,
        caption: 'Jqgrid MVC Tutorial'
    });
});
</script>

<table id="myGrid"></table>
<div id="myPager"></div>
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; 2012 - My ASP.NET MVC Application</p>
                </div>
            </div>
        </footer>

        <script src="/Scripts/jquery-1.7.2.js"></script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T19:17:14.223

我启动了一个新项目并通过 nuGet 包安装了网格，在我看来，您正在与默认情况下使用 MVC4 项目设置的默认资源捆绑器发生冲突。您需要从 Views/Shared/_Layout 文件中删除以下行：

```
@Scripts.Render("~/bundles/jquery") 
```

这将删除捆绑的脚本。

或者将您的 jqGrid 脚本引用添加到 App_Start 文件夹中的捆绑配置，然后从您的视图中删除脚本标签。

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                            "~/Scripts/jquery-{version}.js",
                            "~/Scripts/i18n/grid.locale-en.js",
                            "~/Scripts/jquery.jqGrid.min.js"));

<!----Remove These From your view-------!>
<script src="~/Scripts/jquery-1.7.2.min.js"></script>
<script src="~/Scripts/i18n/grid.locale-en.js"></script>
<script src="~/Scripts/jquery.jqGrid.min.js"></script> 
```

# tdd - 如何编写独立的功能测试

> ID：14064493
> 
> 赞同：0
> 
> 时间：2012-12-28T04:16:21.113
> 
> 标签：tdd, bdd

我真的不明白如何编写“独立”行为测试。

EG 用户可以将地址添加到地址簿。

所以我有一个地址簿类。我写了一个测试来添加一个地址。但是如何在不调用“显示地址”方法的情况下验证地址是否写入成功？当我调用“显示地址”方法时，我取决于显示方法是否正常工作。即便如此，这不是在一次测试中测试两种行为吗？

或者如果我深入数据库进行验证，那不是将“行为”与实现联系起来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:04:39.193

听起来您在某个时候将地址保存到数据库中，这意味着要么

a）地址簿需要以某种方式公开添加的地址 - 通过“GetAddresses”方法或“AddedAddresses”公共属性 - 以便它们可以被其他对象拾取和保存（听起来很可能来自你说）; 或者

b）您在地址簿类上有某种“保存”方法，该方法会触发将地址保存到数据库的操作，这意味着在您的地址簿类中，您依赖于其他一些对象，例如作为存储库或数据访问类。

如果是 a)，那么您需要调用该方法或属性以确保已按预期添加地址。如果是 b)，那么您可以向地址簿提供一个虚假的数据访问类，公开该虚假的公共属性，调用地址簿上的“保存”方法，并对虚假的公共“地址”属性进行验证数据访问类，如下所示：

（你没有提到语言，所以这只是伪代码）

```
class addressbook

    private _dataAccess
    private addresses

    constructor (dataaccess) _dataAccess = dataAccess

    public method AddAddress(address) addresses.add(address)

    public method save() _dataaccess.save(addresses)

class fakedataaccess

    public addresses

    public method save(addresses) addresses = addresses

{test}
public test AddingAddressesWorks

    fake = new fakedataaccess
    book = new addressbook(fake)

    // Do stuff to add addresses to addressbook

    book.save

    assert fake.addresses == the_addresses_i_added 
```

希望这是有道理的。您也可以通过模拟来实现这一点，但这超出了我的伪代码的范围，无论如何概念都是一样的。

但无论哪种方式，您都需要调用其他东西（因此可能会争辩说您正在测试另一个构造）以验证您想要验证的内容是正确的。

就个人而言，如果是我，我会在地址簿上放置一个公共的“地址”属性。

# windows-phone-7 - WP7 TimeZoneInfo.ConvertTime 没有给出正确的结果

> ID：14064494
> 
> 赞同：1
> 
> 时间：2012-12-28T04:16:28.700
> 
> 标签：windows-phone-7, timezone

我正在尝试将时间从 UTC 转换为电话的本地时间。为此，我使用以下内容：

```
if (progress.ActionDateTime.HasValue)
                    progress.ActionDateTime = TimeZoneInfo.ConvertTime(progress.ActionDateTime.Value, TimeZoneInfo.Local); 
```

但是，转换发生后的时间仍然完全相同。这种方法在 WP7 中有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T08:43:46.010

DateTime 不存储有关时区的信息。[根据文档](http://msdn.microsoft.com/en-us/library/bb382835.aspx)，`TimeZoneInfo.ConvertTime`将使用 DateTime.Kind 属性来确定应该如何转换时间：

*   DateTimeKind.Local 和 DateTimeKind.Unspecified：将本地时间转换为 destinationTimeZone 中的时间。
*   DateTimeKind.Utc：将协调世界时 (UTC) 转换为 destinationTimeZone 中的时间。

由于您使用`TimeZoneInfo.Local`的是第二个参数（指定目标时区），我假设您的 DateTimeKind 是本地的或未指定的。因此，您将本地日期转换为本地日期，这显然是行不通的。

`DateTime.ToLocalTime`也使用 DateTimeKind。[根据文档：](http://msdn.microsoft.com/en-us/library/system.datetime.tolocaltime.aspx)

*   Utc：此 DateTime 实例转换为本地时间。
*   本地：不执行转换。
*   未指定：此 DateTime 实例假定为 UTC 时间，并且转换的执行如同 Kind 是 Utc。

基本上，虽然`TimeZoneInfo.ConvertTime`认为 DateTimeKind.Unspecified = Local，但`DateTime.ToLocalTime`认为 DateTimeKind.Unspecified = Utc。它解释了为什么后者有效而前者无效。

# java - 在 Java 中向 iTextPDF 添加对新卢比符号的支持

> ID：14064498
> 
> 赞同：0
> 
> 时间：2012-12-28T04:16:59.433
> 
> 标签：java, pdf, unicode, itext

我的项目与计费应用程序有关，我正在使用 iTextPdf 库生成 PDF 文件。但是我的要求是在 iTextPdf 生成的 PDF 中显示新的卢比符号，而不是“卢比”。

我知道遵循 Unicode`\u20B9`是为了新的卢比符号。我正在使用以下代码进行格式化：

```
String formater(String a) {
  DecimalFormat formatter = new DecimalFormat("\u20B9 000");
  return formatter.format(Double.parseDouble(a));
} 
```

但生成的 PDF 文件不显示任何卢比符号。那么如何将它与 iTextPdf 库一起使用呢？是否需要与库本身合并任何其他字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:47:57.697

在 IDE 中更改不是问题。您的 iTextPDF 将以特定字符集将内容写入 PDF。控制数据是否正确显示。

你可以试试这两个链接

[SO问题包含如何检查字符集](https://stackoverflow.com/q/3753961/648157)

[iTextPdf 网站了解如何更正字符集](http://www.itextpdf.com/book/chapter.php?id=11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T04:07:26.860

感谢 mkl，Naveen 的帮助。

希望这可以帮助某人，我为此做了以下工作：

第 1 步：下载具有卢比符号 Unicode 的字体（为此我更新了我的 Windows（[Windows 更新](http://support.microsoft.com/kb/2496898)并获得了带有卢比符号的 arial 字体）

第 2 步：使用 iText，我使用 IDENTITY_H 编码创建了嵌入的基本字体：

```
BaseFont baseFont = BaseFont.createFont(this.getClass().getResource("arial.ttf").toString(), BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
Font font = new Font(baseFont); 
```

现在生成的 pdf 具有新的卢比符号。

# php - php取消设置影响全局范围的本地引用

> ID：14064500
> 
> 赞同：7
> 
> 时间：2012-12-28T04:17:19.370
> 
> 标签：php

我遇到了一些非常奇怪的 php 行为（ubuntu 10.04 上的 5.3.2）。应该在本地范围内发生的未设置正在影响调用函数的范围。以下片段是我的代码的简化，它显示了我只能假设是一个错误：

```
<?php
function should_not_alter($in)
{
    $in_ref =& $in['level1'];
    should_only_unset_locally($in);
    return $in;
}
function should_only_unset_locally($in)
{
    unset($in['level1']['level2_0']);
}
$data = array('level1' => array('level2_0' => 'first value', 'level2_1' => 'second value'));
$data = should_not_alter($data); //test 1
//should_only_unset_locally($data); //test 2
print_r($data);
?> 
```

如果您运行上述程序，您将看到该值`'first value'`已从`$data`全局范围内的数组中取消设置。但是，如果您注释掉`test 1`并运行`test 2`，则不会发生这种情况。

我只能假设 php 不喜欢引用数组的元素。在我的代码中我需要更改- 因此上面代码中`$in_ref`的行的原因。`$in_ref =& $in['level1'];`我意识到删除此行将解决`'first value'`在全局范围内未设置的问题，但这不是一个选项。

谁能确认这是否是 php 的预期行为？

我怀疑这是一个错误，而不是一个特性，因为这种行为与 php 使用普通（非数组）变量处理范围和引用的方式不一致。例如，使用字符串而不是数组函数`should_only_unset_locally()`对全局范围没有影响：

```
<?php

function should_not_alter($in)
{
    $in_ref =& $in;
    should_only_unset_locally($in);
    return $in;
}
function should_only_unset_locally($in)
{
    unset($in);
}
$data = 'original';
$data = should_not_alter($data); //test 1
//should_only_unset_locally($data); //test 2
print_r($data);

?> 
```

test1 或 test2 都`original`按预期输出。实际上，即使`$data`是一个数组但`$in_ref`引用了整个数组（即`$in_ref =& $in;`），那么错误的行为就会消失。

**更新**

[我已经提交了一个错误报告](https://bugs.php.net/bug.php?id=63865)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:36:58.803

是的，看起来像一个错误。

正如函数名称所暗示的那样，`should_not_alter`不应更改数组，因为它是按值传递的。（我当然不是基于名称——它也不应该根据它的定义改变任何东西。）

`$in_ref =& $in['level1'];`评论使它不理会的事实`$in`似乎进一步证明了它是一个错误。这是一个相当奇怪的小怪癖。不知道内部可能发生什么导致这种情况。

我会在 PHP 错误跟踪器上提交错误报告。对于它的价值，它仍然存在于 5.4.6 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:25:36.723

```
$data = should_not_alter($data) 
```

`$data`此行正在用返回值覆盖数组`should_not_alter`，即`$in`。这是正常行为。

~~此外，当您创建参考`$in_ref =& $in['level1'];`但您没有对它做任何事情时。它不会影响程序输出。~~

**简短的回答：**

`unset($in_ref)`在调用`should_only_unset_locally()`函数之前删除引用变量。

**长答案：**

创建对数组元素的引用时，该数组元素将替换为引用。这种行为很奇怪，但它不是一个错误——它是语言的一个特性，并且是设计使然。

考虑以下 PHP 程序：

```
<?php
$a = array(
    'key1' => 'value1',
    'key2' => 'value2',
);
$r = &$a['key1'];
$a['key1'] = 'value3';
var_dump($a['key1']);
var_dump($r);
var_dump($a['key1'] === $r);

Output:
string(6) "value3"
string(6) "value3"
bool(true) 
```

分配一个值会`$a['key1']`更改 的值，`$r`因为它们都引用相同的值。相反，更新`$r`将更新数组元素：

```
$r = 'value4';
var_dump($a['key1']);
var_dump($r);

Output:
string(6) "value4"
string(6) "value4" 
```

价值不存在`$r`或`$a['key']`- 这些只是参考。就好像他们都在引用一些令人毛骨悚然的隐藏价值。很奇怪吧？

对于大多数用例来说，这是理想且有用的行为。

现在将其应用于您的程序。以下行*修改*本地`$in`数组并用`'level1'`引用替换元素：

```
$in_ref = &$in['level1']; 
```

`$in_ref`不是参考`$in['level1']`-相反，它们都参考了相同的怪异值。所以当这条线出现时：

```
unset($in['level1']['level2_0']); 
```

PHP 将`$in['level1']`其视为对诡异值的引用并删除该`'level2_0'`元素。`should_not_alter()`并且由于它是一个引用，因此在函数的范围内也可以感觉到删除。

您的特定问题的解决方案是销毁将自动恢复`$in['level1']`正常行为的参考变量：

```
function should_not_alter($in) {
    $in_ref =& $in['level1'];
    // Do some stuff with $in_ref
    // After you're done with it delete the reference to restore $in['level1']
    unset($in_ref);
    should_only_unset_locally($in);
    return $in;
} 
```

# git - Git push 给出了 Permission denied (publickey)。致命：远端意外挂断。我应该怎么办？

> ID：14064502
> 
> 赞同：0
> 
> 时间：2012-12-28T04:17:31.223
> 
> 标签：git

所以我今天在终端打开了我的rails项目并进行了一些更改并尝试推送到github，但它不起作用。我在谷歌上搜索和堆栈溢出，所有人都指向安装 github 的说明来解决我的问题。

因此，我浏览了所有说明，但仍然遇到同样的问题。请帮忙！

```
admin@new-host-2:~/Desktop/sample_app$ git status
# On branch filling-in-layout
# Your branch is ahead of 'origin/filling-in-layout' by 3 commits.
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   modified:   app/views/pages/home.html.erb
#
no changes added to commit (use "git add" and/or "git commit -a")

admin@new-host-2:~/Desktop/sample_app$ git add .
admin@new-host-2:~/Desktop/sample_app$ git commit -am 'testing git yet again'
[filling-in-layout b607a16] testing git yet again
 1 files changed, 1 insertions(+), 1 deletions(-)
admin@new-host-2:~/Desktop/sample_app$ git push
Permission denied (publickey).
fatal: The remote end hung up unexpectedly

admin@new-host-2:~/Desktop/sample_app$ ssh-add -l
The agent has no identities.

admin@new-host-2:~/Desktop/sample_app$ git credential-osxkeychain
Usage: git credential-osxkeychain <get|store|erase> 
```

另外为什么它说#你的分支在 'origin/filling-in-layout' 之前 3 次提交？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:28:15.417

我建议这说明原因

```
admin@new-host-2:~/Desktop/sample_app$ ssh-add -l
The agent has no identities. 
```

您需要使用 ssh-add /path to keyfile 将您的密钥添加到 ssh-agent

如果您有密码，系统会要求您输入密码，然后将密钥添加到您的钥匙串中。然后，您应该能够推动提交。

它说“# Your branch are ahead of 'origin/filling-in-layout' by 3 commits”的原因是因为你还没有推送你的提交。您的本地版本比远程版本早 3 次提交。如果您成功完成推送，情况并非如此。

# iphone - AFJSONRequestOperation 数组填充但不能成功块之外的 NSLog 内容

> ID：14064503
> 
> 赞同：1
> 
> 时间：2012-12-28T04:17:43.397
> 
> 标签：iphone, objective-c, ios, afnetworking

[以下代码取自本教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)

我以前使用过这个片段，但我以前从未注意到这个问题。数组内容的 NSLog 在委托方法中打印，但不在成功块之外的 viewDidLoad 中。我需要一种将 JSON 数据保存到数组中的方法，以便在代码的其他地方使用。我还应该补充一点，我没有使用 UITableView 来显示我的数据。我错过了什么或者我该如何做到这一点？

**这不会打印 JSON 内容，认为它确实填充了数组：**

```
#import "AFNetworking.h"
...
- (void)viewDidLoad {
...

self.movies = [[NSArray alloc] init];
NSURL *url = [[NSURL alloc] initWithString:@"http://itunes.apple.com/search?term=harry&country=us&entity=movie"];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.movies = [JSON objectForKey:@"results"];
        [self.activityIndicatorView stopAnimating];
        [self.tableView setHidden:NO];
        [self.tableView reloadData];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

    NSLog(@"self.movies %@",self.movies); // does not print
...
} 
```

**这确实打印了 JSON 内容：**我只使用 numberOfRowsInSection 作为 NSLog 语句的单独位置。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (self.movies && self.movies.count) {
        NSLog(@"self.movies %@",self.movies); // prints
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:46:30.643

您正在启动异步操作，然后立即尝试打印出内容。将您的第一个`NSLog`语句移动到成功块中。

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    //the following lines of code execute after the response arrives
    self.movies = [JSON objectForKey:@"results"];
    NSLog(@"self.movies %@",self.movies);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start];
//this line of code executes directly after the request is made, 
//and the response hasn't arrived yet
NSLog(@"I probably don't have the response yet"); 
```

# parsing - 解析 aws cloudfront 日志

> ID：14064504
> 
> 赞同：0
> 
> 时间：2012-12-28T04:17:48.607
> 
> 标签：parsing, amazon-cloudfront, logfiles

我有一个解析 aws cloudfront 日志的 shell 脚本。

```
awk '{print $1","$2","$4","$5","$8","$9","(substr($11,1,7))","$12 }' access_log | grep cid= | sed -e 's/\/data//g;s/\/videos//g;s/\/images//g;s/\/hls//g;s/\/rss//g;s/\/xml//g;s/cid=//g' > stats.txt 
```

我正在尝试组合字段 $1 和 $2，因此日期时间戳类似于以下格式： Date_time 0000-00-00 00:00:00

目前在两个字段中日期、时间2012-12-23 20:59:47

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T22:54:50.190

脚本的 awk 部分在要格式化为日期时间的日期和时间部分之间添加逗号。这导致“YYYY-MM-DD HH:MM:SS”显示为“YYYY-MM-DD,HH:MM:SS”。

要获得结果，您需要将脚本更改为：

```
awk '{print $1" "$2","$4","$5","$8","$9","(substr($11,1,7))","$12 }' access_log | grep cid= | sed -e 's/\/data//g;s/\/videos//g;s/\/images//g;s/\/hls//g;s/\/rss//g;s/\/xml//g;s/cid=//g' > stats.txt 
```

这应该正确插入到日期时间字段中。

# android - 确定视图的宽度和高度

> ID：14064507
> 
> 赞同：1
> 
> 时间：2012-12-28T04:18:10.027
> 
> 标签：android

我是 Android 编程新手。

我的问题是确定子视图的宽度和高度的最佳方法是什么？

我正在编写一个应用程序，其中包括一个用于输入的钢琴键盘。

我有一个自定义视图，PianoKeyboardView。我需要知道 View 的尺寸才能绘制键盘。如果我将以下代码中的宽度和高度填充到我的 PianoKeyboardView 中，我的钢琴键盘画得很好。

```
Display display = ((WindowManager) this 
        .getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

    int width = display.getWidht();
    int height = display.getHeight(); 
```

显然我不想这样做。

我在 Eclipse 中创建了一个默认的 android 应用程序并选择了 FullScreen 选项。onCreate 的默认代码是：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_fullscreen);

    final View controlsView = findViewById(R.id.fullscreen_content_controls);
    final View contentView = findViewById(R.id.fullscreen_content); 
```

当我在默认视图上调用 getWidth() 和 getHeight() 时，我得到 0。

```
 int width = controlsView.getWidth();
    int height = controlsView.getHeight();
    width = contentView.getWidth();
    height = contentView.getHeight(); 
```

我的 PianoKeyboardView 宽度和高度也是 0，这是我的问题。

我的 activity_fullscreen.xml 将所有视图的宽度和高度设置为“match_parent”</p>

```
<FrameLayout    
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fitsSystemWindows="true" >

    <LinearLayout
        android:id="@+id/fullscreen_content_controls"
        style="?buttonBarStyle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|center_horizontal"
        android:background="@color/black_overlay"
        android:orientation="horizontal"
        tools:ignore="UselessParent" >

        <com.application.piano.PianoKeyboardView
        android:id="@+id/keyboard_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
             android:layout_weight="1"
        /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T09:30:10.623

您可以尝试基于此...（从[我对相关问题的回答中](https://stackoverflow.com/a/21426049/383414)复制）。

我使用以下技术 - 发布一个可运行的`onCreate()`，将在创建视图时执行：

```
 contentView = findViewById(android.R.id.content);
    contentView.post(new Runnable()
    {
        public void run()
        {
            contentHeight = contentView.getHeight();
        }
    }); 
```

完成后，此代码将在主 UI 线程上运行`onCreate()`。在这一点上，视图已经有了尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:50:48.553

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_fullscreen);

    final View controlsView = findViewById(R.id.fullscreen_content_controls);
    final View contentView = findViewById(R.id.fullscreen_content);

    ViewTreeObserver viewTreeObserver = controlsView.getViewTreeObserver();
    viewTreeObserver.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
            @Override
            public boolean onPreDraw() {
                int width = controlsView.getWidth();
                int height = controlsView.getHeight();
                return true;
            }
    }); 
```

希望这可以帮助你......

# c# - 在任何应用程序中模拟击键

> ID：14064512
> 
> 赞同：2
> 
> 时间：2012-12-28T04:18:54.393
> 
> 标签：c#, winapi, keyboard, keyboard-hook

如何在不是我的 C# 应用程序的窗口中模拟击键？

现在我正在使用`SendKeys.Send()`，但它不起作用。问题是我有一个全局键盘钩子，所以我直接从键盘捕获输入，`SendKeys.Send()`不像真正的键盘敲击。

最好的方法是以这种方式模拟真正的击键，无论我使用的是什么应用程序，我的程序都会捕捉到它，就好像有人按下了一个键一样。

我想我找到了问题的一部分。这是按下键时调用的事件：

```
static void KeyBoardHook_KeyPressed(object sender, KeyPressedEventArgs e)
{
   // Writes the pressed key in the console (it works)
   Console.WriteLine(e.KeyCode.ToString());

   // Check if pressed key is Up Arrow (it works and enters the condition)
   if(e.KeyCode == Keys.Up)
   {
     // Send the key again. (does not work)
     SendKeys.Send("{UP}");
   } 
} 
```

我这样尝试：

```
static void KeyBoardHook_KeyPressed(object sender, KeyPressedEventArgs e)
{
   // Writes the pressed key in the console (it works)
   Console.WriteLine(e.KeyCode.ToString());

   // Check if pressed key is Up Arrow (it works and enters the condition)
   if(e.KeyCode == Keys.Up)
   {
     // Send the key again. (does not work)
     PostMessage(proc.MainWindowHandle,WM_KEYDOWN, VK_UP,0);
   } 
} 
```

但它也不起作用。问题是因为我在我的事件中发送了密钥，它会因为按下一个键而调用自己吗？如果有人需要它，上面的代码。

```
[STAThread]
static void Main(string args)
{
  KeyBoardHook.CreateHook();
  KeyBoardHook.KeyPressed += KeyBoardHook_KeyPressed;
  Application.Run();
  KeyBoardHook.Dispose();
} 
```

如果您需要`KeyBoardHook`课程，我也可以发布。

我的猜测是我的键盘钩子正在捕捉低级键盘输出，而`SendKeys`只是模拟击键，所以我的钩子没有捕捉到它。有人想解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T16:37:53.830

我建议你使用这个非常酷的库，它为你掩盖了所有的复杂性，这里提供的 Windows 输入模拟器：http: [//inputsimulator.codeplex.com/](http://inputsimulator.codeplex.com/)

我相信它是基于 Windows 的[SendInput 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T16:16:11.293

您可以 p/invoke `keybd_event`（更简单、更容易）或`SendInput`（更新且具有更多功能）函数，它们在低得多的级别模拟键盘输入。

# javascript - 使用 javascript 进行代码语法错误检测的基本结构是什么？

> ID：14064513
> 
> 赞同：0
> 
> 时间：2012-12-28T04:18:55.673
> 
> 标签：javascript, codemirror, jshint, ace-editor

我正在设计一种语言，我想通过丰富的代码编辑器来增强用户体验。首先我在[CodeMirror](http://codemirror.net/)中遇到了困难，但后来我发现了[ACE Editor](http://ace.ajax.org/)，它也是开源的 :)

我已阅读所有内容并决定选择第二个选项。但是我找不到如何实现错误检测机制；我指的是工人档案。所以......最后**的问题是****，使用 javascript 查找语法错误的语法分析器的基本结构是什么？**（例如[JSHint](http://www.jshint.com/)）

我非常感谢您的回答，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:30:40.273

要进入 JavaScript 驱动的词法分析，请查看 JSLint 的源代码：

[https://github.com/douglascrockford/JSLint/blob/master/jslint.js](https://github.com/douglascrockford/JSLint/blob/master/jslint.js)

您需要特别注意第 1183 行，从那里开始词法分析和标记构造。祝你好运！

# php - 根据条件重新排序 HTML 元素？

> ID：14064514
> 
> 赞同：-6
> 
> 时间：2012-12-28T04:19:10.260
> 
> 标签：php, wordpress

如果在某个页面上，Wordpress 在“页面换行”之前加载横幅。

通过包含文件“header.php”加载横幅

但是，如果它在不同的页面上，我想在“main-wrap”之后加载它。

```
 <body> 

    <div id="page-wrap">

      <div id="main-wrap">
        <div id="main-header">

        <?php include ("./../included/header.php"); ?>
    </div>

 </div> 
```

我想指出我通过创建一个包含备用 header2.php 文件的条件语句解决了这个问题。因此，问题由两个单独的文件解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:26:13.503

`if..else...`像这样使用

```
<div id="main-header">
    <?php 
     if(condition) {
         include ("./../included/header.php"); 
     }
     ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:33:36.880

使用`if`语句。使用两个语句，这样您就不会得到重复的横幅。

```
<body> 
   <?php
   if( yourcondition ){
     include ("./../included/header.php");
   }
   ?>
    <div id="page-wrap">

      <div id="main-wrap">
        <div id="main-header">

   <?php
   if( yourcondition ){
     include ("./../included/header.php");
   }
   ?>
</div> 
```

# mysql - 创建表并在一条语句 MySQL 中插入数据

> ID：14064516
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:19:23.380
> 
> 标签：mysql, sql, phpmyadmin, mamp

我正在尝试创建一个表并在一个语句中将数据插入其中，但我不知道该怎么做。

该语句必须创建一个包含 3 列的表：股票代码、价格和报价日期。交易品种数据应该是从另一个表 my_stocks 中选择出来的。价格和报价日期需要手动插入。

我尝试了以下语句，但我不断收到语法错误：

```
CREATE TABLE stock_prices (
    symbol VARCHAR(20) NOT NULL,
    quote_date DATE NOT NULL,
    price DECIMAL(5,3) NOT NULL,
) SELECT symbol FROM my_stocks; 
```

我正在运行 MySQL Community Server 5.5.28，顺便说一句。

编辑：我明白了，适当的说法是：

```
CREATE TABLE stock_prices (
    quote_date DATE NOT NULL,
    price DECIMAL(5,5) NOT NULL
) SELECT `￼￼symbol`, SYSDATE() AS quote_date, 0 AS price FROM my_stocks; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-28T04:23:14.660

```
创建表 stock_prices (
    符号 VARCHAR(20) NOT NULL，
    quote_date 日期不为空，
    价格 DECIMAL(5,5) 非空，
) 选择符号, now(), 0 FROM my_stocks;

```

# nhibernate - 每个请求的 nHibernate 会话和异常管理

> ID：14064517
> 
> 赞同：4
> 
> 时间：2012-12-28T04:19:30.073
> 
> 标签：nhibernate, exception, session-per-request

我有一个类似的场景： Asp.NET MVC 4 website using nHibernate Session Per Request。使用 Ninject 将会话注入到具有 Get 和 Save 方法的存储库中。

有很多文章谈论 Session Per Request 并说这是在 Web 应用程序上做事的方式。

但是我在实现这样的逻辑时遇到了问题：

```
Read Data From Database
Alter Entity information
Save to Database
Read another entity
Alter entity
Save ... but an EXCEPTION OCCURS 
```

我想通过一条消息向用户展示我的观点。但我还必须刷新生成的网页，所以我还必须从数据库中读取一些信息。

根据 nHibernate 文档，必须丢弃带有异常的会话[Documentation Here](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-exceptions)

但我在这里找不到任何关于最佳方式的文章。

这种情况的最佳方法是什么？我将不得不向我的存储库对象注入一个新的会话？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T20:07:43.650

您可以从原始会话的 SessionFactory 属性创建一个新会话。您可以通过在存储库类中公开它或将其注入控制器来访问原始会话对象。然后，您可以使用新会话创建一个新存储库。

我在一些我期望发生唯一键违规的操作中执行此操作，并且我必须在模型中重新加载查找数据。这是一个例子：

```
 public ActionResult Create(MeasuresEditView model)
    {
        if (ModelState.IsValid)
        {
            using (var txn = _session.BeginTransaction())
            {
                try
                {
                    var measure = new Measure { Code = model.Code };
                    _session.Save(measure);
                    txn.Commit();
                    return RedirectToAction("Index");
                }
                catch (UniqueKeyException)
                {
                    txn.Rollback();
                    var msg = string.Format("A measure with the code '{0}' already exists, please enter a different code or cancel.", model.Code);
                    ModelState.AddModelError("Code", msg);
                }
                catch (Exception ex)
                {
                    if (txn.IsActive)
                    {
                        txn.Rollback();
                    }
                    log.Error("Create", ex);
                    throw;
                }
            }
        }
        // have to rebuild selectlist on post in new txn in case it was rolled back
        using (var session = _session.SessionFactory.OpenSession())
        using (var txn = session.BeginTransaction())
        {
            SetProductGroupSelectList(session, model, manualId);
            txn.Commit();
        }
        return View(model);
    } 
```

# xcode - 使用 UISearchBar 调用 API

> ID：14064518
> 
> 赞同：4
> 
> 时间：2012-12-28T04:19:38.047
> 
> 标签：xcode, api, uisearchbar, uisearchdisplaycontroller

我有一个 UITableView 显示来自 API 的结果。每当用户通过 searchBar:textDidChange: 输入 UISearchBar 时，都会调用该 API。有效地实现自动完成搜索。我的问题是加载到 UITableView 中的结果似乎是最后一次 API 调用之后的迭代。

示例：用户在 UISearchBar 中键入“union”，但 UITableView 中未显示任何结果。用户在“union”之后键入任何字符，例如“unions”，“union”的API结果显示在UITableView中。当用户向下滚动结果（“联合”，但实际上是“联合”）时，“重新填充的单元格”显示“联合”结果。

SearchViewController.h

```
#import <UIKit/UIKit.h>

@interface SearchViewController : UIViewController <UITextFieldDelegate, UISearchBarDelegate, UITableViewDelegate, UITableViewDataSource, UISearchDisplayDelegate>{
    UITableView *searchTableView;
    UISearchBar *sBar;
    UISearchDisplayController *searchDisplayController;
}

@property (strong, nonatomic) NSArray *loadedSearches;

@end 
```

搜索视图控制器.m

```
#import "SearchViewController.h"
#import "AFJSONRequestOperation.h"

@interface SearchViewController ()

@end

@implementation SearchViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = @"Search";
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    searchTableView = [[UITableView alloc] initWithFrame:self.view.bounds];
    searchTableView.delegate = self;
    searchTableView.dataSource = self;
    [self.view addSubview:searchTableView];

    sBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 160, 44)];
    sBar.placeholder = @"Bus Route to...";
    sBar.delegate = self;
    searchDisplayController = [[UISearchDisplayController alloc] initWithSearchBar:sBar contentsController:self];

    searchDisplayController.delegate = self;
    searchDisplayController.searchResultsDataSource = searchTableView.dataSource;
    searchDisplayController.searchResultsDelegate = searchTableView.delegate;

    searchTableView.tableHeaderView = sBar;
}

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    NSString *searchQuery = [NSString stringWithFormat:@"https://api.foursquare.com/v2/venues/search?ll=40.4263,-86.9177&client_id=xxx&client_secret=yyy&v=20121223&query='%@'",searchText];

    searchQuery = [searchQuery stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSURL *url = [[NSURL alloc] initWithString:searchQuery];

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                         JSONRequestOperationWithRequest:request
                                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){
                                             self.loadedSearches = JSON[@"response"][@"venues"];
                                         } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
                                             NSLog(@"%@", error.localizedDescription);
                                         }];

    [operation start];
    [searchTableView reloadData];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.loadedSearches.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    cell.textLabel.text = self.loadedSearches[indexPath.row][@"name"];

    return cell;
}

@end 
```

如果我的问题不清楚，请告诉我。

随意批评代码的其他方面，但我真的很感激我的问题的解决方案:) 提前致谢。

示例 API 响应 - [http://pastebin.com/UZ1H2Zwy](http://pastebin.com/UZ1H2Zwy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T00:28:36.393

问题似乎是您在获取数据之前刷新表，因为您正在使用 AFJSONRequestOperation 进行异步操作。因此，您的模型可能正在正确更新，但您的 tableview 是一次刷新。尝试在块成功回调中移动 [searchTableView reloadData]：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
      success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON)
      {
          self.loadedSearches = JSON[@"response"][@"venues"];

          // refreshing the TableView when the block gets the response
          [searchTableView reloadData];
      }
      failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON)
      {
          NSLog(@"%@", error.localizedDescription);
      }]; 
```

希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:17:41.850

您的请求是异步工作的，它可能与滚动或其他东西无关。只是结果在那个时候返回。尝试取消之前的请求。例如，如果您尝试搜索“联合”，则取消“联合”请求。希望能帮助到你。

# input - 输入类型="文件" 本地化

> ID：14064519
> 
> 赞同：8
> 
> 时间：2012-12-28T04:20:00.447
> 
> 标签：input, localization, upload

> **可能重复：**
> [标记文件上传按钮](https://stackoverflow.com/questions/686905/labeling-file-upload-button)

有没有办法本地化标签产生的文本？

我正在使用 Chrome 浏览器，它使用文本“选择文件”和“未选择文件”文本。

有没有办法自定义这个？或者至少将其更改为另一种语言？

# php - CakePhp - 关联数据不保存（但主要模型数据保存）

> ID：14064522
> 
> 赞同：2
> 
> 时间：2012-12-28T04:20:21.137
> 
> 标签：php, cakephp, cakephp-model

所以，我在 CakePhp 中有一个使用 Formhelper 的表单。此表单中有两个关联模型：Booking & Guest。数据库表似乎设置正确，因为页面通过模型中的关联足够准确地填充值。

保存我的表单数据时，会保存预订信息，但不会保存客人信息。我在下面的代码片段中简化了代码。任何想法我做错了什么？

**模型**

```
class Booking extends AppModel {
public $name = "Booking";

/*Associations Section*/
public $belongsTo = array('Property','Bookingsource');
public $hasMany = array('Payment','Occupant','Bookingfee');
public $hasAndBelongsToMany = array(
    'Addon',
    'Guest' => array(
        'unique' => FALSE
    )
);
} 
```

**控制器**

```
public function edit($id) {
    if ($this -> request -> is('post')) {
        if ($this -> Booking -> saveAll($this -> request -> data)) {
            $this -> Session -> setFlash('Booking Edited Successully!', "goodflash");
        } else {
            $this -> Session -> setFlash('Oops Something went wrong!', "badflash");
        }
    } else {
        $this->data = $this -> Booking -> findById($id);
        $this -> set('bookingid', $id);
    }
} 
```

**看法**

```
<?php
echo $this->Form->create("Booking", array('type' => 'post'));
echo $this -> Form -> hidden('Booking.id');
echo $this -> Form -> input('Booking.property_id');
echo $this -> Form -> input('Booking.checkin');
echo $this -> Form -> input('Booking.checkout');
echo $this -> Form -> input('Guest.0.firstname');
echo $this -> Form -> end("Submit");
?> 
```

查看正在处理的 SQL 时，我没有看到任何建议尝试编辑附加到我的模型的 Guest 表。

```
5   UPDATE `cake_bookingsystem`.`bookings` SET `id` = '10000', `property_id` = '01', `checkin` = '2012-11-10', `checkout` = '2012-12-13' WHERE `cake_bookingsystem`.`bookings`.`id` = '10000'       0   0   8
6   COMMIT      0   0   8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:44:34.463

尝试在您的视图中添加访客记录的 id 字段：

```
<?php
echo $this->Form->create("Booking", array('type' => 'post'));
echo $this -> Form -> hidden('Booking.id');
echo $this -> Form -> input('Booking.property_id');
echo $this -> Form -> input('Booking.checkin');
echo $this -> Form -> input('Booking.checkout');
echo $this -> Form -> input('Guest.0.id');
echo $this -> Form -> input('Guest.0.firstname');
echo $this -> Form -> end("Submit"); 
```

?>

# c# - MaskedTextBox.Mask 无法正常工作

> ID：14064536
> 
> 赞同：0
> 
> 时间：2012-12-28T04:22:53.707
> 
> 标签：c#, .net, textbox, masking, maskedtextbox

我`MaskedTextBox`在我的代码中使用日期字段。

当我提供`maskedTextBox1.Mask = "00/00/0000 00:00 AA"`代码时，在我的机器上运行应用程序时，它工作正常，并且掩码`textbox`显示为`[_ _/_ _ _/____ __:__ _ _ _]`

但是当我在另一台机器上运行相同的应用程序时，掩码显示为`[_ _ _-_ _ _-____ __:__ _ _ _]`

是如何被`/`替换的`-`？口罩机是否依赖，如果是，我们如何避免这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:29:39.417

我认为这与应用程序文化有关 [http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:44:31.360

这个问题可以通过在'/'之前提供转义字符来避免。
ex maskedTextBox1.Mask = @"00\/00\/0000 00:00 AA";
这将强制系统在屏幕上显示“/”。

# java - 2D 游戏瓷砖放置算法

> ID：14064539
> 
> 赞同：1
> 
> 时间：2012-12-28T04:23:19.830
> 
> 标签：java

[![解释](../Images/9b02ad4a82ea2d55e8921891cdf65fca.png)](https://i.stack.imgur.com/6pRGA.png)

大家好，

好的，所以过去几天我一直在努力解决这个问题，但我真的什么都没有了，这就是我在这里的原因。

我正处于制作 2D 游戏的早期阶段。我为开发人员模式创建了一个“库存”，它显示了一个瓷砖网格（如图底部所示）。

您可以将这些图块放置在地图网格中，然后将它们作为字符保存到文本文件中，以供将来加载地图。

一切正常。但是，我希望这样当我在地图上放置一个路径图块（红色边框）时，当它被其他路径图块（蓝色边框）包围时，它会变为正确的边图块。

这是我的 Tilemap.java。

```
 public class TileMap {

private Tile[][] tiles;

public TileMap(int width, int height) {
    tiles = new Tile[width][height];
}

public int getWidth() {
    return tiles.length;
}

public int getHeight() {
    return tiles[0].length;
}

public Tile getTile(int x, int y) {
    if (x < 0 || x >= getWidth() || y < 0 || y >= getHeight()) {
        return new VoidTile();
    } else {
        return tiles[x][y];
    }
}

public void setTile(int x, int y, Tile tile) {
    if (x >= 0 && y >= 0) {
        tiles[x][y] = tile;
    }
}

} 
```

好的，所以在我的主游戏类中，我有一个 TileMap 地图；

当我将它们放在 mouseClicked(MouseEvent e) 方法中时，我试图通过检查即将放置的磁贴的上、下、左和右磁贴来更新磁贴，就像这样。

```
 public void mouseClicked(MouseEvent e) {
    Inventory.click(e);

    if (e.getButton() == 1) {
        tempTile = Inventory.getSelectedTile();
        System.out.println("Selected Tile is " + tempTile);
    } else if (e.getButton() == 3) {

        boolean u = map.getTile(mouseGridX, mouseGridY - 1).connectsToPath;
        boolean d = map.getTile(mouseGridX, mouseGridY + 1).connectsToPath;
        boolean l = map.getTile(mouseGridX - 1, mouseGridY).connectsToPath;
        boolean r = map.getTile(mouseGridX + 1, mouseGridY).connectsToPath;
        boolean ul = map.getTile(mouseGridX - 1, mouseGridY - 1).connectsToPath;
        boolean ur = map.getTile(mouseGridX + 1, mouseGridY - 1).connectsToPath;   
        boolean dl = map.getTile(mouseGridX - 1, mouseGridY + 1).connectsToPath; 
        boolean dr = map.getTile(mouseGridX + 1, mouseGridY + 1).connectsToPath;   

                    if (!u && !l && !d && !r) {
                       map.setTile(mouseGridX, mouseGridY new PathTile(5));
                    }
            }
  } 
```

这是我的 PathTile.java 构造函数，它使用基于网格的精灵表。获取精灵（GridX，GridY）

```
 public PathTile(int tile) {
    this.tile = tile;
    connectsToPath = true;

    switch (tile) {
    case 1:
        this.image = Sprite.getSprite(1, 1);
        break;
    case 2:
        this.image = Sprite.getSprite(2, 1);
        break;
    case 3:
        this.image = Sprite.getSprite(3, 1);
        break;
    case 4:
        this.image = Sprite.getSprite(1, 2);
        break;
    case 5:
        this.image = Sprite.getSprite(2, 2);
        break;
    case 6:
        this.image = Sprite.getSprite(3, 2);
        break;
    case 7:
        this.image = Sprite.getSprite(1, 3);
        break;
    case 8:
        this.image = Sprite.getSprite(2, 3);
        break;
    case 9:
        this.image = Sprite.getSprite(3, 3);
        break;
    case 10:
        this.image = Sprite.getSprite(4, 2);
        break;
    case 11:
        this.image = Sprite.getSprite(5, 2);
        break;
    case 12:
        this.image = Sprite.getSprite(4, 3);
        break;
    case 13:
        this.image = Sprite.getSprite(5, 3);
        break;
    }
} 
```

这是基于 notch 的 Ludum Dare 游戏“MiniCraft”。但是，我似乎无法找到一种有效的方法来用我的方法实现它。

如果我的数学是正确的（可能不是），但这是否意味着有 65,535 个可能的结果？(4 * 4 * 4 * 4 * 4 * 4 * 4 * 4)??

我喜欢编程，但不是那么多，哈哈……

谁能帮我找出一个算法，或者至少给我指出正确的方向吗？

我知道这是一个非常大的问题，但所有的帮助将不胜感激！

节省。

编辑：这是缺口解决这个问题的方式。他使用类似于我的网格精灵表。然而，为了得到想要的精灵，他有一个 x & y 坐标，他乘以 32（网格框的大小）。

```
 boolean u = !level.getTile(x, y - 1).connectsToGrass;
    boolean d = !level.getTile(x, y + 1).connectsToGrass;
    boolean l = !level.getTile(x - 1, y).connectsToGrass;
    boolean r = !level.getTile(x + 1, y).connectsToGrass;

    if (!u && !l) {
        screen.render(x * 16 + 0, y * 16 + 0, 0, col, 0);
    } else
        screen.render(x * 16 + 0, y * 16 + 0, (l ? 11 : 12) + (u ? 0 : 1) * 32, transitionColor, 0);

    if (!u && !r) {
        screen.render(x * 16 + 8, y * 16 + 0, 1, col, 0);
    } else
        screen.render(x * 16 + 8, y * 16 + 0, (r ? 13 : 12) + (u ? 0 : 1) * 32, transitionColor, 0);

    if (!d && !l) {
        screen.render(x * 16 + 0, y * 16 + 8, 2, col, 0);
    } else
        screen.render(x * 16 + 0, y * 16 + 8, (l ? 11 : 12) + (d ? 2 : 1) * 32, transitionColor, 0);
    if (!d && !r) {
        screen.render(x * 16 + 8, y * 16 + 8, 3, col, 0);
    } else
        screen.render(x * 16 + 8, y * 16 + 8, (r ? 13 : 12) + (d ? 2 : 1) * 32, transitionColor, 0);
} 
```

如您所见，他使用 (boolean ? true : false) 方法接收要为精灵添加的所需数字。

我遇到的问题是找出一种方法，我可以使用类似的算法来确定我需要使用哪个精灵。

这就是我所要求的。我什至会很高兴看到其他人如何克服这个问题。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T00:50:05.027

我将给出 4 向 16 格版本的答案（更易于可视化，并且写出的时间要短得多），但这个想法延伸到 8 向情况。如果我没看错，你想弄清楚如何布置你的精灵，这样你就可以根据 u,l,d,r 找出你需要的位置。

您在这里基本上有一个 4 位数字 - 其中每个位对应于一个方向的连通性。所以你可以生成你的精灵：

```
ULDR 
0000: No connections
0001: Right side connected
0010: Down connected
0011: Down and right connected
0100: Left connected
0101: Left and right connected
0110: Left and down connected
0111: Left, right, and down connected
...
1111: Up, left, down and right all connected. 
```

您可以按该顺序制作精灵条（精灵的一维条）。Sprite[0] = 0000, Sprite[1] = 0001, .... Sprite[15] = 1111。然后要获得您的精灵，您只需寻找：

```
index = (up ? 0x8 : 0) | (left ? 0x4 : 0) | (down ? 0x2 : 0) | (right ? 0x1 : 0); 
s = sprite.getSprite(index, 0); 
```

现在，如果由于某种原因你想要一个 2D 精灵（比如说，如果它是作为一个需要大小为 2^nx 2^n 或其他东西的纹理完成的 - 我不是图形专家，我不知道），你可以这样做像：

```
x_index = (up ? 0x2 : 0) | (left ? 0x1 : 0);
y_index = (right ? 0x2 : 0) | (down ? 0x1 :0); 
s = sprite.getSprite(x_index, y_index); 
```

在任何一种情况下，您只需要排列精灵以匹配模式。我列出了上面第一个的顺序。对于二维精灵，您基本上有一个相应的精灵布局：

```
 DR
UL      00   01   10   11 
   00 0000 0001 0010 0011
   01 0100 0101 0110 0111
   10 1000 1001 1010 1011 
   11 1100 1101 1110 1111 
```

同样，这些位分别对应于与 ULDR 的连通性。如果你按照上面的方式布置精灵，并使用上面的算法，它应该可以工作（除非我搞砸并翻转了我的 Xs 和 Ys，我有时会这样做:)

现在，如果你想使用 8 维的情况，想法是一样的，除了你有 8 位而不是 4 位：

UL U UR LR DL D DR

但这只是将所有内容扩展到 8 位数字的问题： UUUL LR RDDD 0000 0001 0010 0011 0100 0101 0110 0111 1000 ... LR 0000 0001 0010 。. .

希望这是有道理的（并希望我回答正确的问题）。

# ruby-on-rails - Rails 中的分页 - 在编辑/更新属于其他页面的元素后始终重定向到第一页

> ID：14064553
> 
> 赞同：5
> 
> 时间：2012-12-28T04:25:07.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination, will-paginate

我使用**will_paginate** gem 对我的 test_app 的索引页进行分页。它只显示列出的拍卖，并且与每个拍卖相对应，有编辑、销毁功能。我的分页运行良好。我总共有 6 次拍卖以表格的方式列出，当我输入 per_page = 2 时，有 3 页。但是，当我在第 2 或第 3 页编辑和更新拍卖时，它只会在更新操作后进入第一页。我希望它保持在同一页面上。

我的观点 - Index.html.erb

```
<h1>Listing auctions</h1>

<table>
  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Item</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @auctions.each do |auction| %>
  <tr>
    <td><%= auction.name %></td>
    <td><%= auction.category %></td>
    <td><%= auction.item_id %></td>
    <td><%= link_to 'Show', auction %></td>
    <td><%= link_to 'Edit', edit_auction_path(auction) %></td>
    <td><%= link_to 'Destroy', auction, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />
<%= will_paginate @auctions %>
<%= link_to 'New Auction', new_auction_path %>
<%= link_to 'Back to Home', home_path %> 
```

我的模特 - Auction.rb

```
class Auction < ActiveRecord::Base
  attr_accessible :name, :category, :item_id
  self.per_page = 2
end 
```

我的控制器-auctions_controller.rb

```
class AuctionsController < ApplicationController
  # GET /auctions
  # GET /auctions.json
  def index
    @auctions = Auction.paginate(:page => params[:page])#pagination for Index
    #@posts = Post.paginate(:page => params[:page])
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @auctions }
    end
  end

  # GET /auctions/1
  # GET /auctions/1.json
  def show
    @auction = Auction.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @auction }
    end
  end

  # GET /auctions/new
  # GET /auctions/new.json
  def new
    @auction = Auction.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @auction }
    end
  end

  # GET /auctions/1/edit
  def edit
    @auction = Auction.find(params[:id])
  end

  # POST /auctions
  # POST /auctions.json
  def create
    @auction = Auction.new(params[:auction])

    respond_to do |format|
      if @auction.save
        format.html { redirect_to @auction, notice: 'Auction was successfully created.' }
        format.json { render json: @auction, status: :created, location: @auction }
      else
        format.html { render action: "new" }
        format.json { render json: @auction.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /auctions/1
  # PUT /auctions/1.json
  def update
    @auction = Auction.find(params[:id])

    respond_to do |format|
      if @auction.update_attributes(params[:auction])
        format.html { redirect_to @auction, notice: 'Auction was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @auction.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /auctions/1
  # DELETE /auctions/1.json
  def destroy
    @auction = Auction.find(params[:id])
    @auction.destroy

    respond_to do |format|
      format.html { redirect_to auctions_url }
      format.json { head :no_content }
    end
  end
end 
```

![在此处输入图像描述](../Images/70257f4fde27d159d8c09cf9e938f05b.png)

请提出解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:45:40.493

您需要在整个编辑/更新操作中保留**params[:page]**并将其与您的查询字符串合并

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:42:42.340

在您的`update`操作中，您有拍卖 ID，您可以在那里计算预期的页码。相应地并使用 `redirect_to @auction,:page=>page_no`

否则您必须将`page`参数从节目发送到编辑页面（单击编辑链接时），然后发送到更新操作以使用该页面不重定向

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-19T04:58:13.687

这是我的解决方案：

1.  在具有编辑/更新按钮的索引页面中（添加参数页面）

    ```
    = link_to content_tag(:span, "", :class => "fa fa-edit") + t('btn.edit'), edit_bill_path(bill, page: params[:page] || 1), :class => "btn btn-warning" 
    ```

2.  在您的表单中（添加隐藏字段页面）

    ```
    = f.input :page, as: :hidden, input_html: {value: params[:page]} 
    ```

3.  在您的控制器中（带有页面参数的自定义重定向路径）

    ```
    redirect_to your_path(page: params[:your_form_name_instance][:page]), notice: t('messages.update') 
    ```

4.  享受 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T17:44:03.107

如果您只想使用 :back 进行重定向，那么这就是您的删除方法在 auctions_controller.rb 中的样子：

```
 # DELETE /auctions/1
   # DELETE /auctions/1.json
   def destroy
     @auction.destroy
     respond_to do |format|
       format.html { redirect_to :back }
       format.json { head :no_content }
     end
   end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-08T07:58:48.680

您可以在用于分页的实例变量上使用方法**total_pages 。**

详情可以参考[我的回答](https://stackoverflow.com/questions/6723992/how-to-redirect-to-the-operating-page-in-will-paginate/17521530#17521530)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-04T13:28:41.567

我使用`{ redirect_to :back }`它并保持相同的页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-22T15:08:28.797

迟到的答案，但您可以在显示重定向到默认网址之前检查`request.referrer`它是否可用，在您的编辑、更新或销毁操作中使用类似这样的内容：

```
 def destroy
    @post.destroy
    respond_to do |format|
      format.html { redirect_to (request.referrer || posts_url), notice: 'Post was successfully destroyed.' }
      format.json { head :no_content }
    end
  end 
```

* * *

您还可以在此处阅读`devise`gem 如何处理[此文件中的重定向](https://github.com/plataformatec/devise/blob/master/lib/devise/controllers/store_location.rb)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-23T20:43:38.277

我发现最好的方法是`redirect_back`在 Rails 5+ 中使用。

例子：

```
# DELETE /guests/1
# DELETE /guests/1.json
def destroy
  @guest.destroy
  respond_to do |format|
    format.html { redirect_back(fallback_location: guests_url, notice: 'Guest was successfully destroyed.') }
    format.json { head :no_content }
  end
end 
```

基本上，它重定向到引用破坏操作的引用者。如果没有引荐来源网址`fallback_location`，则使用。例如，我的索引页面上有列出来宾的单按钮表单，当单击销毁按钮时，我被重定向回列出来宾的页面，`page`包括参数！

# asp.net-mvc - 如何在库 (ELMAH.MVC) 中配置路由？

> ID：14064556
> 
> 赞同：1
> 
> 时间：2012-12-28T04:25:48.893
> 
> 标签：asp.net-mvc, elmah.mvc

我不熟悉如何制作一个包并在包中包含一个控制器，并且正在查看 ELMAH.MVC 包并注意到它执行此操作。

我想我会在 web.config 文件中找到一个模块，或者可以调用引导类的东西，但我不知道它是如何调用的。

看起来需要调用 Bootstrap.Initialize 但我不知道这是如何完成的。

我的问题是这个包的控制器是如何注册的？

编辑：在这个工作了 2 小时后，我可能已经找到了解决方案。

在 Assembly.cs 中是一个类似于 [assembly: PreApplicationStartMethod(typeof(Elmah.Mvc.Bootstrap), "Initialize")] 的属性

根据我的快速阅读，这似乎是在调用 Application_start 方法之前调用该方法。

这看起来很可怕，但很酷，但很可怕。我花了很长时间才找到这个，我从来没有想过要做这样的事情。

我相信这回答了我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T14:39:51.290

Assembly.cs 内部是一个看起来像的属性

```
[assembly: PreApplicationStartMethod(typeof(Elmah.Mvc.Bootstrap), "Initialize")] 
```

在我发现这个之前，我不知道这个属性。关于它的一些信息可以在

[PreApplicationStartMethod 何时真正被触发运行？](https://stackoverflow.com/questions/5955866/when-does-preapplicationstartmethod-actually-get-triggered-to-run)

[我应该使用哪个 PreApplicationStartMethod？](https://stackoverflow.com/questions/8987159/which-preapplicationstartmethod-should-i-use)

# c# - 单声道未在服务器 PC 上加载 *.so 共享库

> ID：14064559
> 
> 赞同：0
> 
> 时间：2012-12-28T04:26:07.530
> 
> 标签：c#, dll, mono, shared-libraries

*   应用程序在 windows7、.net4.0 上编译
*   我将 dll: TECIT.TFORMer.dll 放在应用程序文件中
*   测试电脑，i386： ![在此处输入图像描述](../Images/f884317b5daecc260d06584b526de0f1.png)
*   服务器-pc，amd64：![在此处输入图像描述](../Images/48b804f484a17a4853ecb5e0d79a3140.png)

    > 在 test-pc 上，我调试了应用程序，并得到了结果，日志： ![在此处输入图像描述](../Images/f4d8a2cea0f666c37cd973a0b9ffe6df.png) 但在 server-pc 上，抛出异常，日志： ![在此处输入图像描述](../Images/dde5ae2d96666a133961c1390903d733.png)

    **为什么 test-pc app :DllImport 试图加载：'libTFORMer6.so' 但 server-pc app 从不显示日志？**

    谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:26:02.480

如果您的单声道是 64 位，则不能将 32 位库加载到其中。虽然操作系统通常支持运行 32 位代码，但它适用于整个过程。因此，您应该制作 64 位库或运行 32 位单声道。

免责声明：您的问题不太清楚您是否尝试在两个系统上使用相同的库。

# android-layout - 切换到 GUI xml 时出现 Eclipse Android 错误

> ID：14064562
> 
> 赞同：5
> 
> 时间：2012-12-28T04:26:26.117
> 
> 标签：android-layout

当我为首选项布局文件从 xml 切换到 GUI 时出现以下错误：

渲染期间引发异常：com.android.layoutlib.bridge.MockView 无法转换为 android.view.ViewGroup 异常详细信息记录在 Window > Show View > Error Log 中找不到以下类：- PreferenceCategory（修复构建路径， Edit XML) - PreferenceScreen (Fix Build Path, Edit XML)

我的 xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<PreferenceScreen 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

  <PreferenceCategory
    android:title="Activation">
    <CheckBoxPreference
      android:title="Title1"
      android:defaultValue="false"
      android:key="checkbox1">
    </CheckBoxPreference>
  </PreferenceCategory>

  <PreferenceCategory
    android:title="Option1">
    <PreferenceScreen
        android:title="Set Option">
    <CheckBoxPreference
      android:title="ENABLE OPTION"
      android:defaultValue="false"
      android:summary="text"
      android:key="checkboxOption1">
    </CheckBoxPreference>
    <CheckBoxPreference
      android:title="DISPLAY OPTIONS"
      android:defaultValue="false"
      android:summary="text"
      android:key="checkboxDisplay1">
    </CheckBoxPreference>
    <EditTextPreference
      android:title="OPTION2"
      android:name="Option2"
      android:summary="text"
      android:defaultValue="1"
      android:key="editOption2">
    </EditTextPreference>
    <CheckBoxPreference
      android:title="OPTION3"
      android:defaultValue="false"
      android:summary="text"
      android:key="checkboxOption3">
    </CheckBoxPreference>
    </PreferenceScreen>
  </PreferenceCategory>

  <PreferenceCategory
    android:title="Option4">
    <PreferenceScreen
        android:title="Set Option4">
    <CheckBoxPreference
      android:title="OPTION4"
      android:defaultValue="false"
      android:summary=""
      android:key="checkboxOption4">
    </CheckBoxPreference>
    <CheckBoxPreference
      android:title="OPTION5"
      android:defaultValue="false"
      android:summary="text"
      android:key="checkboxOption5">
    </CheckBoxPreference>
    <EditTextPreference
      android:title="OPTION6"
      android:name="Option6"
      android:summary="text"
      android:defaultValue="1"
      android:key="editOption6">
    </EditTextPreference>
    <EditTextPreference
      android:title="OPTION7"
      android:name="Option7"
      android:summary="text"
      android:defaultValue="1"
      android:key="editOption7">
    </EditTextPreference>
    <EditTextPreference
      android:title="OPTION8"
      android:name="Option8"
      android:summary="text"
      android:defaultValue="1"
      android:key="editOption8">
    </EditTextPreference>
    </PreferenceScreen>
  </PreferenceCategory>

  <PreferenceCategory
    android:title="OPTION9">
    <PreferenceScreen
        android:title="Option9">
    <EditTextPreference
      android:title="Option9"
      android:name="Option9"
      android:summary="text"
      android:defaultValue=""
      android:key="editOption9">
    </EditTextPreference>
    </PreferenceScreen>    
  </PreferenceCategory>

</PreferenceScreen> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T18:52:24.170

我遇到了这个问题，因为我将偏好列表视为正常活动。它实际上是完全不同的。首先，您需要将 XML 文件从 res/layout 移动到 res/xml（在 Eclipse 中，您必须手动创建此文件夹）。您还必须使用不同的 Java 代码：

```
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class Settings extends PreferenceActivity { //NOT activity!

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Initialize the preference screen defined in /res/xml/preference.xml
        addPreferencesFromResource(R.xml.preferences); //NOT setContentView
    }

} 
```

您将收到关于 API 级别 >=11 的关于 addPreferencesFromResource 被弃用的警告。这是因为 Android 希望您切换到基于片段（“PreferenceFragments”）的偏好屏幕，这有点复杂。[这里](http://developer.android.com/reference/android/preference/PreferenceActivity.html)有一个例子。

# asp.net-mvc-3 - mvc3 图像调整器

> ID：14064563
> 
> 赞同：0
> 
> 时间：2012-12-28T04:26:45.293
> 
> 标签：asp.net-mvc-3, path, imageresizer

我下载了 Nugent ImageResizer，我正在尝试按照此页面[http://imageresizing.net/docs/managed](http://imageresizing.net/docs/managed)上的示例调整上传图片的大小，但我看不到将其放入 Var 或 Image 变量中，所以我可以在**Path.Combine**中看到它是代码

```
var fileName = Path.GetFileName(file.FileName);
                var changename = getid + "_" + fileName;
          ImageBuilder.Current.Build(changename, changename,
                                                       new ResizeSettings("width=130&height=130"));

            var path = Path.Combine(Server.MapPath("~/uploads/profilepic"), changename);
                file.SaveAs(path); 
```

如何在 var 或某种类型的图像变量中获取**ImageBuilder**我想做的是这样的

```
 var resized=  ImageBuilder.Current.Build(changename, changename,
                                                       new ResizeSettings("width=130&height=130"));
var path = Path.Combine(Server.MapPath("~/uploads/profilepic"), resized);
                file.SaveAs(path); 
```

我要做的就是将**ImageBuilder**放在**Path.Combine**中而不会出错，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:05:51.613

### ImageResizer 应该直接给出上传的文件和输出路径

ImageResizer 支持 GUID 和路径清理。切勿按原样使用上传的文件名！

```
var i = new ImageJob(file, 
                    "~/uploads/profilepic/<guid>_<filename:A-Za-z0-9>.<ext>", 
                     new ResizeSettings("width=130&height=130&format=jpg"));
i.CreateParentDirectory = true; //Auto-create the uploads directory.
i.Build();

var newVirtualPath = ImageResizer.Util.PathUtils.GuessVirtualPath(i.FinalPath); 
```

# java - facebook会话未打开

> ID：14064564
> 
> 赞同：1
> 
> 时间：2012-12-28T04:26:59.103
> 
> 标签：java, android, facebook

我正在尝试将 facebook sdk 3.0 for android 添加到我的应用程序中。

我正在尝试使用该功能登录

> OpenSessionWithAllowLoginUI（布尔allowLoginUI）

当会话状态改变功能时

> SessionStateChanged（会话、状态、异常）

叫做。这些函数在下面给出。

```
 public void OpenSessionWithAllowLoginUI(boolean allowLoginUI)
    {

    Session.openActiveSession(this, true, new Session.StatusCallback()
    {
           @Override
           public void call(Session session, SessionState state, Exception exception)
           {
               SessionStateChanged(session, state, exception);
           }
    })
}

public void SessionStateChanged(Session session, SessionState state, Exception exception)
{
    switch (state)
    {
        case OPENED:
              if (exception == null)
              {
                  facebook = new Facebook("6346513133546");
              }

            break;

        case CLOSED:
        case CLOSED_LOGIN_FAILED:
            Session.getActiveSession().closeAndClearTokenInformation();
            facebook = null;
            break;

        default:
            break;
    }
} 
```

在调用函数会话状态更改两次。首先它将会话状态显示为“OPENING”，然后在登录并单击“确定”到权限弹出窗口后，会话状态更改为“CLOSED_LOGIN_FAILED”。会话状态永远不会“打开”，我得到以下异常

> remote_app_id 与存储的 id 不匹配

谁能告诉我这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T06:15:09.437

问题是我没有给出正确的密钥哈希。我使用生成密钥哈希`keytool -exportcert -alias androiddebugkey -keystore .android/debug.keystore | openssl sha1 -binary | openssl base64`并且它有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:51:47.460

您能否验证您的 Android 应用程序上的 app_id 是否与您的应用程序仪表板（https://developers.facebook.com/apps）上的完全相同？还要确保“Native Android App”有一个绿色复选标记，启用“Facebook 登录”并添加您的密钥哈希。

# android - 使用 SMSManager android 发送消息

> ID：14064565
> 
> 赞同：1
> 
> 时间：2012-12-28T04:27:10.430
> 
> 标签：android, sms

在我的应用程序中，我使用 SMSManager 在后台向特定号码发送消息。我已经注册了接收者来验证我的消息的发送状态、传递状态。这工作正常。但是当我发送消息时，如果电话号码被关闭或SIM卡被移除并重新打开或SIM卡被重新插入，我的消息不会被发送。如何实现这个功能？

短信管理器代码

```
SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phonenumber, null, message, sentPI, deliveredPI); 
```

接收器：

```
smsSentReceiver = new BroadcastReceiver() {

            public void onReceive(Context arg0, Intent arg1) {

                switch(getResultCode())
                {

                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS Sent", Toast.LENGTH_LONG).show();
                break;

                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Sms failed due to generic failure", Toast.LENGTH_LONG).show();
                    break;

                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "could not send the message due to unavailability of service.", Toast.LENGTH_LONG).show();
                    break;

                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", Toast.LENGTH_LONG).show();
                    break;

                }

            }
        };

            smsDeliveredReceiver = new BroadcastReceiver () {

            public void onReceive(Context arg0, Intent arg1) {
                switch(getResultCode())
                {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS Delivered", Toast.LENGTH_SHORT).show();
                    break;

                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not Delivered", Toast.LENGTH_SHORT).show();
                    break;
                }

                }

            };

            registerReceiver(smsSentReceiver, new IntentFilter(SENT));
            registerReceiver(smsDeliveredReceiver, new IntentFilter(DELIVERED ));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:22:17.407

您可以通过使用“Broadcst Reciver”来实现这一点。打开手机后，您将收到一个广播接收器，例如插入了新的 sim 卡，并尝试使用挂起的意图。

# linux - 未找到 Linux 内核 v3.5 中的 trace_console 定义

> ID：14064572
> 
> 赞同：0
> 
> 时间：2012-12-28T04:28:11.983
> 
> 标签：linux, linux-kernel

在 Linux 内核版本**3.5**中，在文件**kernel/printk.c**中有一个函数调用

`trace_console(text, 0, len, len);`@第 1219 行

我找不到这个函数的定义。我为它获取了完整的内核，并使用 cscope 和 ctags 进行了尝试，但我仍然无法找到它的定义。有什么我想念的概念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:05:37.983

这是因为它隐藏在 include/linux/tracepoints.h 中的一个宏（或者更确切地说，两个宏，一个用于启用跟踪，一个用于关闭时）中：

[启用跟踪时的__DECLARE_TRACE](http://lxr.linux.no/linux+v3.5/include/linux/tracepoint.h#L146)定义。

[__DECLARE_TRACE](http://lxr.linux.no/linux+v3.5/include/linux/tracepoint.h#L206)定义禁用跟踪时。

使用 .config 中的 CONFIG_TRACEPOINTS 启用/禁用跟踪

实际的 trace_console 在 include/trace/events/printk.h 中生成： [TRACE_EVENT_CONDITION](http://lxr.linux.no/linux+v3.5/include/trace/events/printk.h#L9)

# javascript - 如何从 rails @variable 访问 JSON？

> ID：14064580
> 
> 赞同：2
> 
> 时间：2012-12-28T04:29:30.637
> 
> 标签：javascript, ruby-on-rails, json

在 Rails 中，我调用了一个返回 JSON 的 API：

```
{"observations":{"realtime_start":"2012-12-27","realtime_end":"2012-12-27","observation_start":"1776-07-04","observation_end":"9999-12-31","units":"pca","output_type":"1","file_type":"xml","order_by":"observation_date","sort_order":"asc","count":"263","offset":"0","limit":"100000","observation":[{"realtime_start":"2012-12-27","realtime_end":"2012-12-27","date":"1947-01-01","value":"."},{"realtime_start":"2012-12-27","realtime_end":"2012-12-27","date":"1947-04-01","value":"-0.60853"} 
```

在控制器中，我将 JSON 传递给实例变量：

```
# Send the http request
response = Net::HTTP.get_response(uri)

# captures the http response
test = response.body

#converts the http response hash from xml to json
show_info = Hash.from_xml(test).to_json
@it = show_info 
```

最后，我在视图中渲染出实例变量：

```
<script>
x = "<%= @it %>"
</script> 
```

如果我在控制台中输入 x enter，json 会弹出格式有点不同，这可能是我的问题..

```
 "{&quot;observations&quot;:{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;observation_start&quot;:&quot;1776-07-04&quot;,&quot;observation_end&quot;:&quot;9999-12-31&quot;,&quot;units&quot;:&quot;pca&quot;,&quot;output_type&quot;:&quot;1&quot;,&quot;file_type&quot;:&quot;xml&quot;,&quot;order_by&quot;:&quot;observation_date&quot;,&quot;sort_order&quot;:&quot;asc&quot;,&quot;count&quot;:&quot;263&quot;,&quot;offset&quot;:&quot;0&quot;,&quot;limit&quot;:&quot;100000&quot;,&quot;observation&quot;:[{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2010-10-01&quot;,&quot;value&quot;:&quot;2.39307&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2011-01-01&quot;,&quot;value&quot;:&quot;0.07892&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2011-04-01&quot;,&quot;value&quot;:&quot;2.47721&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2011-07-01&quot;,&quot;value&quot;:&quot;1.27864&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2011-10-01&quot;,&quot;value&quot;:&quot;4.09234&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2012-01-01&quot;,&quot;value&quot;:&quot;1.96053&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2012-04-01&quot;,&quot;value&quot;:&quot;1.25266&quot;},{&quot;realtime_start&quot;:&quot;2012-12-27&quot;,&quot;realtime_end&quot;:&quot;2012-12-27&quot;,&quot;date&quot;:&quot;2012-07-01&quot;,&quot;value&quot;:&quot;3.10599&quot;}]}}" 
```

我的问题是如何访问其中一个键值对？我需要用javascript解析它吗？有没有办法通过点符号来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T23:01:23.620

我隐约记得以前做过类似的事情。问题是我从 Web 服务获取 json 字符串，然后在其上调用 .to_json 。

尝试改变这个：

```
Hash.from_xml(test).to_json 
```

对此：

```
Hash.from_xml(test) 
```

如果这不起作用，我认为其他帖子应该可以帮助您正确格式化 json： [Rails 中的 Weird JSON Javascript problem](https://stackoverflow.com/questions/5970419/weird-json-javascript-problem-in-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:43:22.457

JavaScript 中的 JSON 只是一个常规对象，仅此而已。所以你只需要不带引号传递它，就像这样：

```
<script>
x = <%= @it %>;
</script> 
```

之后，在 javascript 中，您`x`将只是一个对象，您将能够访问其中的任何信息

# c# - 从头开始构建我自己的 mvvm 项目？

> ID：14064585
> 
> 赞同：2
> 
> 时间：2012-12-28T04:29:54.020
> 
> 标签：c#, wpf, mvvm, mvvm-light

我对 MVVM 的调查不到一个月。我还尝试了一个 Mvvm 框架（来自 Laurent Bugnion 的 Mvvmlight。太棒了）。

但是我正在考虑自己做所有这些事情，这意味着我想从头开始构建我的项目遵循 mvvm 理念（不要使用任何可用的 mvvm 框架）。我想让它**尽可能简单，**但仍然有足够的功能并**严格遵循 mvvm 哲学**。这就是为什么我需要你的建议来帮助我认识到我需要什么、我面临什么以及需要多长时间？

在几乎 Mvvm 框架中，我发现它们支持以下内容：

*   构建一个 ViewModelBase：应该为 INotifyPropertyChanged 实现，INotifyPropertyChanging -> 支持绑定属性
*   RelayCommand（在 Prism 中是 DelegateCommand）：为 ICommand 实现
*   信使类

做一个 Mvvm 项目就够了吗？

我知道 Mvvm 是一个模型，所以有多种实现方式。但是像我这样的新手。很难知道我应该从哪里开始。对于一个长篇大论但不清楚的问题，我很抱歉。只是我试图展示我目前的情况，并向大家征求意见。

感谢您的阅读，新年快乐！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:39:35.973

对于简单的 MVVM 项目，以下就足够
了 1\. RelayCommand ：用于自定义命令
2\. Messenger（或 EventAggregator 或 MessageBus）：用于视图模型之间的通信
3\. ViewModelBase ：ViewModels 的基类。也可以用作模型的基类（但对于那个单独的基类）

对于较大的应用程序，还需要布局支持。这是由 Prism Regions 概念提供的。

除此之外，你很高兴。

但是，我建议使用现有的 MVVM 框架。看看[这个](https://stackoverflow.com/questions/1409553/what-framework-for-mvvm-should-i-use)常用的 MVVM 框架。它们是久经考验的框架（并且是免费的）。[构建SOLID](http://en.wikipedia.org/wiki/SOLID_(object-oriented_design))框架需要大量的测试工作。

我不会说构建一个框架是很大的努力，但不管它是什么，它都是完全不必要的（直到商业/工作环境非常严格并且不允许这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:33:04.970

我认为在不使用任何外部 MVVM 框架的情况下自己实现 MVVM 设计模式很重要（至少是第一次）。它将迫使您看到并理解“水下石头”以及解决问题的不同方法和解决方案。

# javascript - Android WebView 在加载 html 之前注入 Javascript

> ID：14064589
> 
> 赞同：17
> 
> 时间：2012-12-28T04:31:10.007
> 
> 标签：javascript, android, webview

我正在使用 Android WebView 加载一些网页。我需要在所有页面加载之前插入一段 Javascript 代码。

我正在尝试将它们注入 WebViewClient onPageStart 回调。

```
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.setWebViewClient(new WebViewClient(){

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        loadUrl("javascript:var output='test string';");
        }
})

mWebView.loadUrl("xxx.html"); 
```

HTML 代码：

```
<html>
<script>document.write(output);</script>
</html> 
```

我希望我的 Js 代码在 HTML 之前加载。但有时 JS 代码加载在 HTML 之后。

有什么办法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-29T12:20:14.430

我有同样的问题，我解决了。我在加载前隐藏`WebView`并在页面加载后显示。

```
webView.getSettings().setJavaScriptEnabled(true);
b.webView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        return false;
    }

    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public void onPageFinished(WebView view, String url) {
        super.onPageFinished(view, url);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
            b.webView.evaluateJavascript("javascript:window.document.getElementsByTagName('body')[0].style.color='white';", null);
        }
        else
        {
            b.webView.loadUrl("javascript:window.document.getElementsByTagName('body')[0].style.color='white';");
        }
        b.webView.setVisibility(View.VISIBLE);
    }

});

b.webView.setVisibility(View.INVISIBLE);
b.webView.loadUrl(PreferenceHelper.EULA_URL); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:50:15.110

通过 javascript 加载页面怎么样？

在您的资产中创建一个空白 html 页面，其中包括您的脚本和这个小功能（为了简单起见，我在这里使用 jquery，但您可以使用另一个框架或根本不使用框架）。

```
window.loadPage = function (url) {
    $.get(url, function(page) {
        $('html').replace(page);
    });
}; 
```

然后，在您的 android 应用程序上：

```
mWebView.loadUrl("javascript: loadPage('xxx.html')"); 
```

注意：我没有注意到 xxx.html 也可能在您的资产中，而不是在某处的 Web 服务器中，在这种情况下，出于安全原因，ajax 查询将失败，但您可以忘记 ajax 请求，阅读您的 html 页面字符串从您的 android 应用程序中，并将其作为参数传递给稍作修改的 javascript 函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-28T11:17:57.950

您可以在页面加载之前注入您的 javascript，如下所示：

```
 val mimeType = "text/html"
  val encoding = "utf-8"
  val injection = "<script type='text/javascript'>
        //Your JavaScript code here

       //**This line is important**
        window.location.replace('ACTUAL_URL');</script>"
  webView.loadDataWithBaseURL('ANY_DUMMY_URL', injection, mimeType, encoding, null) 
```

ACTUAL_URL 应该是您实际要加载的 URL。DUMMY_URL 可以是任何 URL，最好与 ACTUAL_URL 保持一致。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-19T11:13:24.873

我必须和你做同样的事情，因为在我的例子中，网页的加载取决于需要通过 JavaScript 从应用程序设置的一些变量。

在页面加载之前尝试了加载 javascript 的所有不同排列之后，这最终对我有用：

```
webView.loadUrl(url)
webView.settings.javaScriptEnabled = true
webView.settings.javaScriptCanOpenWindowsAutomatically = true

val javascript = "alert('some javascript message');window.JAVASCRIPT_GLOBAL_VARIABLE=true;"

webView.webViewClient = object : WebViewClient() {
    override fun onLoadResource(view: WebView?, url: String?) {
         super.onLoadResource(view, url)
         webView.evaluateJavascript(javascript) {}
    }    
} 
```

如果您需要在 web 视图加载时使用 javascript 注入的变量或方法 - 例如，为了验证用户身份，我还必须在 javascript 代码中添加以下内容以使其在每次打开 web 时可靠地工作看法。

```
window.location.replace('$url'); \\ this is the same url you want to inject the javascript into 
```

`addJavascriptInterface`如果您想要/可以为您的 Javascript 方法附​​加一些前缀，则使用唯一的作品。就我而言，这不是一个选择，因为相同的代码也适用于 iOS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T17:49:22.143

一种可能不是最简单的方法是使用 HttpClient 自己从 Web 服务器读取数据，然后对其进行修改并将其设置到 webview 中使用

```
webview.loadData(mydata, "text/html", null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T12:41:07.810

我会结合使用 Phonegap 和 JavaScript 接口。

在主 .java 文件的 OnCreate() 中，包括以下内容：

```
super.appView.addJavascriptInterface(new Object()
        {
          public void setOutput()
          {
            // here the body of your method in Android
          }
        }, "myInterface"); 
```

然后，在 .js 文件中，包含以下内容（显然，您必须在同一个文件中导入 Phonegap 才能捕获 onDeviceReady 方法）：

```
function onDeviceReady() {
        myInterface.setOutput();
      } 
```

当设备准备就绪时，这将在应用程序启动的第一刻从 JavaScript 触发您的方法。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-28T06:03:45.067

您可以尝试将您的 java 脚本放在 html 页面中，然后使用 android java script 函数调用可能会有所帮助

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-04-18T03:37:01.707

您可以
`webView.addJavascriptInterface("test string", "output");`
在加载网页之前使用注入所需的对象。

# ruby-on-rails - Accepts_nested_attributes_for 不保存嵌套属性

> ID：14064598
> 
> 赞同：0
> 
> 时间：2012-12-28T04:32:39.640
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

我已经被这个问题困扰了好几天了。这是我的第一个 Rails 应用程序，我快完成了，只是被这个大大减慢了。

我读到使用 Accepts_nested_attributes_for 是解决我在配方中嵌套成分以用于表单的问题的最佳解决方案，但到目前为止我还没有运气。我已经阅读了有关该主题的所有内容。API 说该模型现在有一个（在我的情况下）成分_attributes= 方法，我还没有看到。我尝试在带有哈希的控制台中使用 update_attributes

```
recipe.update_attrubutes {:ingredients_attributes=>[{:name=>"Test Ingredient"}]} 
```

这返回*true*，但显示配方对象没有变化。

我尝试了很多方法，我的第一个方法是在 View 的 forms_for 中使用 fields_for。由于这不起作用并且我测试代码无济于事，我开始深入研究，问题肯定比视图更深。

任何帮助将非常感激。我的代码如下

## 配方模型

对于 db 样式名称和显示样式名称之间的混淆转换，我们深表歉意。到目前为止，这是我维护它们的最佳解决方案。

```
class Recipe < ActiveRecord::Base

  DISH_TYPES={""=>"", "Breakfast"=>"breakfast", "Lunch"=>"lunch", "Soup"=>"soup", "Entree"=>"entree", "Desert"=>"desert"}
  SEASONS={"Any Season"=>"any", "Fall"=>"fall", "Winter"=>"winter", "Spring"=>"spring", "Summer"=>"summer"}
  DIETS={""=>"", "Vegan"=>"vegan", "Vegetarian"=>"vegetarian", "Omnivore"=>"omnivore"}

  DISH_TYPES_R={""=>"", "breakfast"=>"Breakfast", "lunch"=>"Lunch", "soup"=>"Soup", "entree"=>"Entree", "desert"=>"Desert"}
  SEASONS_R={"any"=>"Any Season", "fall"=>"Fall", "winter"=>"Winter", "spring"=>"Spring", "summer"=>"Summer"}
  DIETS_R={""=>"", "vegan"=>"Vegan", "vegetarian"=>"Vegetarian", "omnivore"=>"Omnivore"}

  attr_protected :user_id
  # Do NOT include user_id in the attr_accessible method, to avoid
  # the possibility of it being changed externally.
  belongs_to :user
  validates_presence_of :user  
  has_many :ingredients, dependent: :destroy # , inverse_of: :recipe

  # Allows for forms to write attributes down the hierarchy.
  accepts_nested_attributes_for :ingredients, allow_destroy: true , reject_if: lambda { |a| a[:content].blank? }

  before_save do
    # Lowercase and convert to strings all of the attributes
    # that require a specific format, namely the values in the
    # constant hashes above.
    STRING_ATTRIBUTES.each do |s|
      self.send("#{s}=".to_sym, self.send(s).downcase.to_s)
    end
  end

  validates :user_id, presence: true
  validates :name,  presence: true,
                    length: { maximum: 64 } #,uniqueness: true
  validates :dish_type, inclusion: { in: DISH_TYPES.values }
  validates :season, inclusion: { in: SEASONS.values }
  validates :diet, inclusion: { in: DIETS.values}
  validates :directions,  presence: true,
                          length: { maximum: 8192 }

  validates_associated :ingredients

  default_scope order: "recipes.created_at DESC"

  def method_missing (method)
    method = method.to_s
    if method.slice!("display_")
      if STRING_ATTRIBUTES.include?(method.to_sym)
        hash_name = method.upcase + 'S_R'
        Recipe.const_get(hash_name)[self.send(method.to_sym)]
      else
        method
      end
    else 
      method.class
    end
  end

  private

    STRING_ATTRIBUTES = [:dish_type, :season, :diet]

end 
```

## 成分模型

```
class Ingredient < ActiveRecord::Base

  attr_protected :id, :recipe_id
  belongs_to :recipe

  validates_presence_of :name
  #validates_presence_of :recipe
end 
```

## 配方控制器

我读过我不应该更改控制器中的任何内容。我只添加了一行，因此成分表显示在我的视图中

```
class RecipesController < ApplicationController
  before_filter :signed_in_user, only: [:create, :edit, :destroy]

  def index
    @recipes = Recipe.all
  end

  def new
    if signed_in?
      @recipe = current_user.recipes.build 
      @recipe.ingredients.build
    else
      flash[:error] = "First you have to register! Sign up here and start adding recipes ASAP."
      redirect_to signup_path
    end
  end

  def create
    @new_recipe = current_user.recipes.build(params[:recipe])
    if @new_recipe.save
      flash[:success] = "You've successfully added #{@new_recipe.name}!"
      redirect_to @new_recipe
    else
      redirect_to 'new'
    end
  end

  def edit
    @recipe = Recipe.find(params[:id])
  end

  def show
    @recipe = Recipe.find(params[:id].to_i)
  end

end 
```

## 配料控制器

我不相信成分控制器有任何用处，因为成分（目前）只能通过其父配方访问。

I will include the views upon request, but as I stated earlier, I don't believe it is that high-level.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:39:37.887

1.  You need to set `attr_accessible` for `Recipe` model and add there `:ingredients_attributes`
2.  As i see in your config, you have `reject_if: lambda { |a| a[:content].blank? }` for ingrediens_attributes and you are setting it only with name

# css - 样式表 -moz-linear-gradient 在网络移动浏览器中不显示？

> ID：14064604
> 
> 赞同：2
> 
> 时间：2012-12-28T04:33:45.060
> 
> 标签：css, stylesheet

我有一个示例代码：

```
<div class="title"><h3>Test Title<h3></div> 
```

和CSS

```
.title {
    background: -moz-linear-gradient(center top , #6F6F6F 0%, #4E4E4E 100%) repeat scroll 0 0 transparent;
} 
```

当我用PC浏览时结果还可以，但是使用手机（三星galaxy S3，iPhone 4）时结果不显示这种风格，如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:35:27.517

问题是您使用供应商前缀 -moz zo 只有一个正在阅读的浏览器 -moz 将与此一起使用

这是要使用的类型：

```
-moz-linear-gradient
-webkit-linear-gradient
-o-linear-gradient
-ms-linear-gradient
linear-gradient 
```

你也可以尝试只使用大多数浏览器支持的线性渐变

```
.title {
    background: linear-gradient(center top , #6F6F6F 0%, #4E4E4E 100%) repeat scroll 0 0 transparent;
} 
```

您也可以使用[它](http://www.colorzilla.com/gradient-editor/)来生成渐变

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T04:37:51.400

`-moz-`是 Gecko 驱动的浏览器的供应商特定前缀。它不适用于不是由 Gecko 提供支持的浏览器。此后语法已经标准化，因此在较新的浏览器上，根本不再需要有供应商前缀：

```
background: linear-gradient(red, green); 
```

不幸的是，并不是每个人都有更新的浏览器，因此您通常还必须包含供应商前缀*：*

```
background: -moz-linear-gradient(red, green);
background: -webkit-linear-gradient(red, green);
background: linear-gradient(red, green); 
```

当语法标准化时，不要被欺骗只使用供应商前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:17:43.997

你应该像这样使用：

```
。标题 {
    背景图像：-webkit-渐变（线性，左上，右下，从（rgba（255,0,0,1.0）），到（rgba（255,0,0,0.0）））；
}

```

这些链接可以帮助你：

[跨浏览器 CSS 渐变](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)

[Apple 社区关于使用渐变的讨论](https://discussions.apple.com/thread/1980640?start=0&tstart=0)

# git - GitHub 能很好地处理大型存储库吗？

> ID：14064605
> 
> 赞同：3
> 
> 时间：2012-12-28T04:33:58.590
> 
> 标签：git, github

我公司的SVN代码库在下载时大约250MB。随着多年的变化，它可能相当大（4X 那个大小）。如果我们将所有这些都转移到 GitHub，每个用户是否必须下载 250MB 或者他们必须下载 1GB 或更多才能获得存储库的完整历史记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:02:24.347

您可以在没有历史记录的情况下进行克隆： git clone --depth 1 your_repo_url （请参阅[https://git.wiki.kernel.org/index.php/GitFaq#How_do_I_do_a_quick_clone_without_history_revisions.3F](https://git.wiki.kernel.org/index.php/GitFaq#How_do_I_do_a_quick_clone_without_history_revisions.3F)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T08:26:16.097

> 如果我们将所有这些都转移到 GitHub，每个用户是否必须下载 250MB 或者他们必须下载 1GB 或更多才能获得存储库的完整历史记录？

每个用户在第一次克隆时都必须检索整个存储库。但是，git 服务器端实现会将存储库的“压缩”版本作为**[packfile 发送](http://git-scm.com/book/en/Git-Internals-Packfiles)**。因此传输的数据的重量将远小于 1Gb。

每个连续的 fetch/pull 操作只会检索服务器知道的并且不在客户端本地存储库中的新 git 对象（提交、树和 Blob）。这些也将作为*packfile*通过网络发送。

* * *

尽管@akonsu 在声明您可以克隆存储库的浅版本（即没有整个历史记录）时是正确的，但这会阻止用户进一步与 GitHub 托管的主要上游存储库进行交互。

事实上，**[git clone](http://git-scm.com/docs/git-clone)**文档指出：*“浅层存储库有许多限制（你不能克隆或从中获取，也不能从中推送或进入）”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:47:04.770

如果有很多文件的很多版本，您的对象数据库将随着时间的推移变得越来越大。

默认情况下，git 使用 zlib 压缩算法来存储单个 blob。但是可以告诉 git 将多个对象合并到一个包文件中，这也使用了 delta 压缩方法来节省空间。您的整个历史记录仍然存在，解包只需要比基于先前状态执行命令（例如检查旧版本）更长的时间。但我需要强调这是多么小。老实说，不到一秒钟的增加。

progit 书中有关 packfiles 的更多信息：http: [//git-scm.com/book/en/Git-Internals-Packfiles](http://git-scm.com/book/en/Git-Internals-Packfiles)

# android - asynctask 下载图像然后将图像加载到水平图库中

> ID：14064607
> 
> 赞同：1
> 
> 时间：2012-12-28T04:34:15.200
> 
> 标签：android, image, gallery

我正在使用 asynctask 下载图像，然后一旦完成下载，它应该将图像加载到我的水平图库中。可能吗？

现在我已经尝试过，但它一直在崩溃：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

new downloadFile().execute();
gallery = (Gallery) findViewById(R.id.examplegallery);
gallery.setAdapter(new AddImgAdp(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position, long id) {
            // Displaying the position when the gallery item in clicked
            Toast.makeText(MainActivity.this, "Position=" + position, Toast.LENGTH_SHORT).show();
    }
    });

}

/**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class downloadFile extends AsyncTask<String, String, String> {

        /**
         * getting all magazines from url
         * */
        protected String doInBackground(String... args) {
            URL myFileUrl = null;

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_login, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                mag = json.getJSONArray(TAG_MAGAZINE);

                for (int i = 0; i < mag.length(); i++) {
                    JSONObject c = mag.getJSONObject(i);

                    // Storing each json item in variable
                    String magLink = c.getString(TAG_MAGAZINE_URL);
                    String magThumb = c.getString(TAG_MAGAZINE_THUMBNAIL);
                    //String magazineIssue = c.getString(TAG_MAGAZINE_ISSUE);

                    urlList.add(magLink);
                    //urlList.add(magazineIssue);
                    thumbnailList.add(magThumb);

                    System.out.println(thumbnailList);
                }                   
            } 
            else {

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        for (int i = 0; i < thumbnailList.size(); i ++)
        {
        thumbnail = thumbnailList.get(i).toString();
        Log.d("thumbnail", thumbnail);
        number = i;
            try {
                myFileUrl = new URL(thumbnail);    // RETRIEVE IMAGE URL
                }
             catch (MalformedURLException e) {
                e.printStackTrace();
            }
            try {
                HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
                conn.setDoInput(true);
                conn.connect();
                InputStream in = conn.getInputStream();
                Log.i("im connected", "Download");
                bmImg = BitmapFactory.decodeStream(in);

                File filename;
                try {
                     // GET EXTERNAL STORAGE, SAVE FILE THERE
                    File storagePath = new File(Environment.getExternalStorageDirectory(),"Covers");
                    storagePath.mkdirs();

                    filename = new File(storagePath + "/photo"+number+".jpg");
                    FileOutputStream out = new FileOutputStream(filename);
                    bmImg.compress(Bitmap.CompressFormat.JPEG, 90, out);

                    out.flush();
                    out.close();
                    MediaStore.Images.Media.insertImage(getContentResolver(),filename.getAbsolutePath(), filename.getName(),
                            filename.getName());          

                 // displayImage();
                } catch (Exception e) {
                    e.printStackTrace();
                }   

            } catch (IOException e) {
                e.printStackTrace();
            }   

        }

            return null;
        }

        /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute() {    

        runOnUiThread(new Runnable() {
            public void run() {

              ArrayList<String>  mStringList= new ArrayList<String>();
              File strPath = new File(Environment.getExternalStorageDirectory() + "/Covers");
              int lists = strPath.listFiles().length; 
              Log.d("number of items in array ",String.valueOf(lists));

              File yourDir = new File(strPath, "");
              for (File f : yourDir.listFiles()) {
                  if (f.isFile())
                  {
                      String name = f.getName();
                      String v = strPath + "/" + name;
                      mStringList.add(v);
                  }
              }

              mImageIds = new String[mStringList.size()];
              mImageIds = mStringList.toArray(mImageIds);

              for(int a = 0; a < mImageIds.length ; a++){
                  Log.d("string is",(mImageIds[a]));
              }

            }

        });
    }
    }   

    public class AddImgAdp extends BaseAdapter {
        int GalItemBg;
        private Context cont;

        public AddImgAdp(Context c) {
            cont = c;
            TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
            GalItemBg = typArray.getResourceId(R.styleable.GalleryTheme_android_galleryItemBackground, 0);
            typArray.recycle();
            }
        public int getCount() {
            return mImageIds.length;
        }

        public Object getItem(int position) {
        return position;
        }

        public long getItemId(int position) {
        return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imgView = new ImageView((Context) cont);

        imgView.setImageDrawable(Drawable.createFromPath(mImageIds[position]));

        // Fixing width & height for image to display
        imgView.setLayoutParams(new Gallery.LayoutParams(80, 70));
        imgView.setScaleType(ImageView.ScaleType.FIT_XY);
        imgView.setBackgroundResource(GalItemBg);

        return imgView;
        }
        }

} 
```

这是我的 logcat 输出：

```
12-28 12:08:10.510: E/AndroidRuntime(5567): FATAL EXCEPTION: main
12-28 12:08:10.510: E/AndroidRuntime(5567): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.horizontalviewing/com.example.horizontalviewing.MainActivity}: java.lang.NullPointerException
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1978)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2003)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1169)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.os.Looper.loop(Looper.java:137)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread.main(ActivityThread.java:4446)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at java.lang.reflect.Method.invokeNative(Native Method)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at java.lang.reflect.Method.invoke(Method.java:511)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at dalvik.system.NativeStart.main(Native Method)
12-28 12:08:10.510: E/AndroidRuntime(5567): Caused by: java.lang.NullPointerException
12-28 12:08:10.510: E/AndroidRuntime(5567):     at com.example.horizontalviewing.MainActivity$AddImgAdp.getCount(MainActivity.java:247)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.widget.AbsSpinner.setAdapter(AbsSpinner.java:113)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at com.example.horizontalviewing.MainActivity.onCreate(MainActivity.java:69)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.Activity.performCreate(Activity.java:4465)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-28 12:08:10.510: E/AndroidRuntime(5567):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1942)
12-28 12:08:10.510: E/AndroidRuntime(5567):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:54:36.687

您在 getCount 方法中有一个空指针异常，因为您在后执行初始化之前初始化了适配器，要么将您的适配器创建移动到后执行代码中，要么首先初始化数组 mImageIds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:53:29.163

该错误告诉您在运行`mimageids`时尚未初始化。`getCount()`问题是这`mImageIds`不是适配器的变量。适配器应该是自包含的。您应该在适配器上创建添加/删除图像方法，以便在从服务器下载它们时添加它们。或类似的东西。

# python - 在 python 中导入 gtstreamer 的问题

> ID：14064611
> 
> 赞同：1
> 
> 时间：2012-12-28T04:34:36.580
> 
> 标签：python, gstreamer

我已经运行了 Windows 安装程序，但我不确定如何开始使用 gtstreamer。我读过的教程只是指示我安装包，然后导入模块`pygst`，但是当我尝试时，我得到了一个`ImportError: No module named pygst`.

我已经搜索了我的C盘。它似乎已安装到`/program files/OSSBuild/GStreamer`，但我不确定如何访问它。迄今为止，我安装的每个模块都会自动添加到文件中`lib/site packages` *或*拥有该`setup.py`文件。这个没有，所以对我来说有点陌生。

我该如何启动和运行..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:39:20.080

您可能想尝试编辑 PYTHONPATH 环境变量以包含该目录（用分号分隔路径）。示例：添加`C:\program files\OSSBuild\GStreamer`到末尾`C:\Python27\Lib;C:\other-python-files-etc;C:\program files\OSSBuild\GStreamer`

根据这里的答案：[https ://stackoverflow.com/a/4855685/1124529](https://stackoverflow.com/a/4855685/1124529)

此外，您可能需要检查以确保在该 GStreamer 文件夹中有一个名为的文件，`pygst.py`因为这就是模块的外观。如果没有，你可能下载了错误的东西。

# python - paypal python包不工作，所有测试返回错误代码-1

> ID：14064615
> 
> 赞同：0
> 
> 时间：2012-12-28T04:35:22.217
> 
> 标签：python, paypal, paypal-sandbox

这是我所做的，paypal-python git repo 是[https://github.com/duointeractive/paypal-python](https://github.com/duointeractive/paypal-python)

创建一个虚拟环境 pip install paypal pip install nose

在 site-packages/paypal 目录中，将测试目录复制到其中。

cp api_details_blank.py api_details.py

填写我的 api_user_name、密码、签名和客户的信用账户信息

鼻子测试测试/

这样做之后，我得到的只是

```
...EEE.E...
======================================================================
ERROR: test_abbreviated_sale (paypal.tests.test_direct_payment.TestDirectPayment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/tests/test_direct_payment.py", line 51, in test_abbreviated_sale
    sale = interface.do_direct_payment(**self.credit_card)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 270, in do_direct_payment
    return self._call('DoDirectPayment', **kwargs)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 125, in _call
    raise PayPalAPIResponseError(response)
PayPalAPIResponseError: None (Error Code: -1)

ERROR: test_authorize_and_delayed_capture (paypal.tests.test_direct_payment.TestDirectPayment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/tests/test_direct_payment.py", line 61, in test_authorize_and_delayed_capture
    auth = interface.do_direct_payment('Authorization', **self.credit_card)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 270, in do_direct_payment
    return self._call('DoDirectPayment', **kwargs)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 125, in _call
    raise PayPalAPIResponseError(response)
PayPalAPIResponseError: None (Error Code: -1)

======================================================================
ERROR: test_authorize_and_void (paypal.tests.test_direct_payment.TestDirectPayment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/tests/test_direct_payment.py", line 74, in test_authorize_and_void
    auth = interface.do_direct_payment('Authorization', **self.credit_card)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 270, in do_direct_payment
    return self._call('DoDirectPayment', **kwargs)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 125, in _call
    raise PayPalAPIResponseError(response)
PayPalAPIResponseError: None (Error Code: -1)

======================================================================
ERROR: test_sale (paypal.tests.test_direct_payment.TestDirectPayment)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/tests/test_direct_payment.py", line 30, in test_sale
    sale = interface.do_direct_payment('Sale', **self.credit_card)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 270, in do_direct_payment
    return self._call('DoDirectPayment', **kwargs)
  File "/Users/binleixue/Envs/tradeplatform/lib/python2.7/site-packages/paypal/interface.py", line 125, in _call
    raise PayPalAPIResponseError(response)
PayPalAPIResponseError: None (Error Code: -1)

----------------------------------------------------------------------
Ran 11 tests in 23.885s

FAILED (errors=4) 
```

**有人知道如何处理吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:46:32.900

如果您仍然卡住，我将[PayLib](https://github.com/rutherford/PayLib)创建为 PayPal Express Checkout 之上的一个简单抽象，用于定期付款。自述文件中的示例代码，它也在 PyPI 上。

# liferay - Portlet 配置页面不适用于 PACL

> ID：14064620
> 
> 赞同：0
> 
> 时间：2012-12-28T04:35:36.430
> 
> 标签：liferay

我使用 Liferay MVC 框架创建了一个简单的 portlet，并为 portlet 设置添加了一个**ConfigurationActionImpl**类和**configuration.jsp**。我使用`<liferay-ui:message>`标签来显示标签。

*   **没有PACL，它可以正常工作。**
*   使用 PACL，它不会显示映射到属性文件中键的值。它显示完整的键。与其他 PACL 错误一样，控制台中不会报告任何错误。

当我部署 portlet 时，这两行会被打印出来

**试图读取文件 global-configuration.properties**

**试图读取文件 C:\liferay-portal-6.1.1-ce-ga2\tomcat-7.0.27\bin\service.properties**

我在 liferay-plugin-package.properties 中完成了以下条目

```
security-manager-get-bean-property=\
com.liferay.portal.util.PortalUtil,\
com.liferay.portlet.documentlibrary.model.DLFileEntry,\
com.liferay.portlet.documentlibrary.service.DLFileEntryServiceUtil,\
com.liferay.portlet.documentlibrary.model.DLFileRank,\
com.liferay.portlet.PortletPreferencesFactoryUtil,\
com.liferay.portal.kernel.cache.CacheRegistryUtil,\
com.liferay.portal.kernel.cache.key.CacheKeyGeneratorUtil,\
com.liferay.portal.kernel.language.LanguageUtil,\
com.liferay.portal.kernel.bean.PortalBeanLocatorUtil,\
com.liferay.portal.kernel.deploy.hot.HotDeployUtil,\
com.liferay.portal.kernel.servlet.DirectRequestDispatcherFactoryUtil,\
com.liferay.portal.kernel.servlet.DirectServletRegistryUtil,\
com.liferay.portal.kernel.configuration.ConfigurationFactoryUtil,\
com.liferay.portal.kernel.staging.LayoutStagingUtil,\
com.liferay.portal.kernel.dao.shard.ShardUtil,\
com.liferay.portal.kernel.dao.db.DBFactoryUtil,\
com.liferay.portal.kernel.dao.orm.FinderCacheUtil,\
com.liferay.portal.kernel.dao.orm.EntityCacheUtil,\
com.liferay.portal.security.auth.AuthTokenUtil,\
com.liferay.portal.service.permission.PortletPermissionUtil,\
com.liferay.portal.kernel.util.PropsUtil,\
com.liferay.portal.kernel.util.HttpUtil,\
com.liferay.portal.kernel.util.HtmlUtil,\
com.liferay.portal.kernel.util.LocaleUtil

security-manager-services[portal]=\
com.liferay.portlet.documentlibrary.service.DLFileEntryService#getFileEntryByUuidAndGroupId,\
com.liferay.portlet.documentlibrary.service.DLFileEntryService#getFileAsStream,\
com.liferay.portlet.documentlibrary.service.DLFileEntryLocalService#getFileAsStream,\
com.liferay.portlet.documentlibrary.service.DLFileRankLocalService#updateFileRank,\
com.liferay.portlet.documentlibrary.service.DLAppHelperLocalService#getFileAsStream,\
com.liferay.portlet.asset.service.AssetEntryLocalService#incrementViewCounter,\
com.liferay.portal.service.GroupLocalService,\
com.liferay.portal.service.PortletPreferencesLocalService,\
com.liferay.portal.service.LayoutLocalService,\
com.liferay.portal.service.LayoutSetLocalService

security-manager-files-read=\
${java.io.tmpdir}${file.separator}-,\
${liferay.web.portal.dir}${file.separator}html${file.separator}taglib${file.separator}-,\
${liferay.web.portal.dir}${file.separator}html${file.separator}themes${file.separator}-

security-manager-files-write=${java.io.tmpdir}${file.separator}- 
```

提前致谢 ....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T05:40:10.150

我找到了解决方案，因为我缺少一件事....

```
security-manager-get-bean-property=\
...,\
com.liferay.portlet.PortletConfigFactoryUtil,\
... 
```

# arrays - 对 BinarySearch 感到困惑

> ID：14064621
> 
> 赞同：1
> 
> 时间：2012-12-28T04:35:37.763
> 
> 标签：arrays

> **可能重复：**
> [Arrays.binarySearch 不能正常工作](https://stackoverflow.com/questions/1356621/arrays-binarysearch-doesnt-work-like-it-should)

根据我对 BinarySearch 的理解，如果在数组或集合中找不到元素，它只会返回一个插入点。

所以这段代码让我有点困惑：

```
import java.util.*;

public class LookinGlass {

    public static void main(String args[]){

        String[] asa = {"x", "c", "b", "d"};

        int x  = Arrays.binarySearch(asa, "b");

        System.out.println("Index is at " + x);

        Arrays.sort(asa);

        int y = Arrays.binarySearch(asa, "b");

        System.out.println(x + " " + y);
    }

} 
```

当我打印出x时，为什么它说索引为-1，而数组中显然存在“b”并且可以找到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T04:39:58.200

因为二进制搜索不适用于未排序的数组。当您看到一个更大的元素时，您会断定搜索的项目不在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:40:40.227

二分搜索算法假定它正在查看按升序排序的数据，在您第一次调用数组时：

```
 String[] asa = {"x", "c", "b", "d"}; 
```

未排序。因此，`Arrays.binarySearch(asa, "b");`调用正在返回`-1`，因为它无法`"b"`使用二分搜索算法在您的数组中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:44:52.667

如果你认为二分搜索的工作方式很接近，然后试着想象如果你在一个未排序的列表上运行二分搜索会发生什么，那么它为什么不起作用应该会很明显。

如果仍有疑问，请实现您自己的二进制搜索并逐步完成。

# hadoop - hadoop 中的公平调度

> ID：14064622
> 
> 赞同：0
> 
> 时间：2012-12-28T04:35:39.200
> 
> 标签：hadoop

在多节点设置（主从）中配置公平调度时，应该在 mapred-site.xml 中为两个节点定义属性还是仅在主节点中定义属性？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:34:09.063

通常，您不需要在多个位置定义属性。如果需要，Hadoop 会自动将 mapred-site.xml 文件复制到从属服务器。

如果您在本地运行，则`HADOOP_CONF_DIR/mapred-site.xml`需要进行编辑。

如果您在 Amazon 的 EMR 集群上运行，那么在启动集群本身时，您可以提供此配置文件作为 bootstrap-action，它将被复制到所有节点中。可以使用 cli 完成，如下所示：

```
ruby elastic-mapreduce --create --alive --plain-output --master-instance-type m1.xlarge --
slave-instance-type m1.xlarge --num-instances 11  --name "Cluster name"  --bootstrap-action 
s3://elasticmapreduce/bootstrap-actions/configure-hadoop --args "--mapred-config-file, 
s3://<path-to-conf>/mapred-site-edited.xml" 
```

所以基本上每个 Hadoop 节点都应该有自己的配置，但您不需要手动将其复制到每个节点。

# python - 为什么我会收到来自 App Engine 的 Google API 调用的 invalid_grant？

> ID：14064630
> 
> 赞同：2
> 
> 时间：2012-12-28T04:38:23.457
> 
> 标签：python, google-app-engine

我正在尝试从 App Engine 访问 Google Prediction API 并按照此处的说明进行操作 - [https://developers.google.com/appengine/articles/prediction_service_accounts](https://developers.google.com/appengine/articles/prediction_service_accounts)

这在 App Engine 上部署时效果很好。但是，相同的代码在本地开发服务器上失败并出现以下错误。

```
credentials = AppAssertionCredentials(
              scope='https://www.googleapis.com/auth/prediction')
http = credentials.authorize(httplib2.Http(memcache))
service = build("prediction", "v1.5", http=http, developerKey=api_key)

ERROR    2012-12-28 03:48:53,084 client.py:461] Failed to retrieve access token: {
  "error" : "invalid_grant"
}
ERROR    2012-12-28 03:48:53,115 cgi.py:121] Traceback (most recent call last):
  File "/Users/gkedia/git/thirdgaze/main.py", line 83, in <module>
    service = build('prediction', 'v1.5', http=http, developerKey=api_key)
  File "/Users/gkedia/git/thirdgaze/apiclient/discovery.py", line 175, in build
    resp, content = http.request(requested_url)
  File "/Users/gkedia/git/thirdgaze/oauth2client/client.py", line 503, in new_request
    self._refresh(request_orig)
  File "/Users/gkedia/git/thirdgaze/oauth2client/client.py", line 412, in _refresh
    self._do_refresh_request(http_request)
  File "/Users/gkedia/git/thirdgaze/oauth2client/client.py", line 472, in _do_refresh_request
    raise AccessTokenRefreshError(error_msg)
AccessTokenRefreshError: invalid_grant 
```

我注意到的一件事是完全相同的参数， `key_name, signature = app_identity.sign_blob(base_str)`在生产和本地机器上返回不同的签名。

我的计算机时间已正确同步，并且似乎还没有涉及到 offline_access 参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:24:10.647

`app_identity`更一般地说，服务帐户将无法正常工作，`dev_appserver`您必须回退常规的[oauth2 网络服务器流程](https://developers.google.com/api-client-library/python/guide/aaa_oauth#OAuth2WebServerFlow)，以便在本地测试时获得与常规 Google 帐户关联的访问令牌。

就像是：

```
flow = OAuth2WebServerFlow(client_id='your_client_id',
                           client_secret='your_client_secret',
                           scope='https://www.googleapis.com/auth/prediction',
                           redirect_uri='http://localhost:8080/oauth2callback')
self.redirect(flow.step1_get_authorize_url()) 
```

然后在`/oauth2callback`处理程序中：

```
credentials = flow.step2_exchange(self.request.get('code'))
http = credentials.authorize(httplib2.Http(memcache))
service = build("prediction", "v1.5", http=http, developerKey=api_key) 
```

`dev_appserver`您可以使用`SERVER_SOFTWARE` [环境变量](https://developers.google.com/appengine/docs/python/runtime#The_Environment)轻松检测您是在生产环境中运行还是在生产环境中运行。

# c# - 无法在 Asp.net 中使用 AuthSubB 在 Google 联系人中添加联系人

> ID：14064635
> 
> 赞同：0
> 
> 时间：2012-12-28T04:38:46.780
> 
> 标签：c#, asp.net, contacts

我的问题是我无法在谷歌中添加联系人。我正在使用asp.net 2008。当我使用谷歌日历时，它可以毫无问题地保存。我不确定这是一个象征性的问题还是其他什么，所以我决定在这里问。下面是我添加联系人的代码

```
 protected void Create_Click()
    {

    GAuthSubRequestFactory authFactory_con = new GAuthSubRequestFactory("cp", "ContactApp");
    authFactory_con.Token = (String)Session["token"];
    ContactsService ser = new ContactsService(authFactory_con.ApplicationName);
    ser.RequestFactory = authFactory_con;               

    string str = "";

        ContactDetail contact = new ContactDetail
        {
            Name = NameTextBox.Text + " " + LastTextBox.Text,
            EmailAddress1 = primaryEmailTextBox.Text,
            EmailAddress2 = secondryEmailTextBox.Text,
            Phone = phoneTextBox.Text,
            Mobile = MobileTextBox.Text,
            Street = StreetTextBox.Text,
            City = CityTextBox.Text,
            Region = RegionTextBox.Text,
            PostCode = PostCodeTextBox.Text,
            Country = CountryTextBox.Text,
            Details = detailsTextBox.Text

        };

            GoogleContactService.AddContact(contact,ser);
            str = "<script>alert('Contact Added Sucessfully')</script>";

        Response.Write(str);   

} 
```

上面的函数调用了 GoogleContactService 的 AddContact 函数。下面是添加联系人功能的代码

```
 public void AddContact(ContactDetail contact, ContactsService GContactService)
     {
    ContactEntry newEntry = new ContactEntry();

    newEntry.Title.Text = contact.Name;
    //newEntry.Name.FullName = contact.Name;  

    newEntry.Name = new Name();     
    newEntry.Name.FullName = contact.Name;

    EMail primaryEmail = new EMail(contact.EmailAddress1);
    primaryEmail.Primary = true;
    primaryEmail.Rel = ContactsRelationships.IsWork;
    newEntry.Emails.Add(primaryEmail);

    EMail secondaryEmail = new EMail(contact.EmailAddress2);
    secondaryEmail.Rel = ContactsRelationships.IsHome;
    newEntry.Emails.Add(secondaryEmail);

    PhoneNumber phoneNumber = new PhoneNumber(contact.Phone);
    phoneNumber.Rel = ContactsRelationships.IsHome ;
    newEntry.Phonenumbers.Add(phoneNumber);

    PhoneNumber phoneNumber_ = new PhoneNumber(contact.Mobile );
    phoneNumber_.Primary = true;
    phoneNumber_.Rel = ContactsRelationships.IsMobile ;
    newEntry.Phonenumbers.Add(phoneNumber_);

    newEntry.PostalAddresses.Add(new StructuredPostalAddress()
    {
        Rel = ContactsRelationships.IsWork,
        Primary = true,
        Street = contact.Street  ,
        City = contact.City  ,
        Region = contact.Region  ,
        Postcode = contact.PostCode  ,
        Country = contact.Country  ,
        FormattedAddress = contact.Street + " , " + contact.City + " , " + contact.Region + " , " + contact.PostCode + " , " + contact.Country,
    });      
    newEntry.Content.Content = contact.Details;
    Uri feedUri = new Uri(ContactsQuery.CreateContactsUri("default"));

   // Uri feedUri = new Uri("http://www.google.com/m8/feeds/contacts/default/full");
    System.Net.ServicePointManager.Expect100Continue = false;
    ContactEntry createdEntry = (ContactEntry)GContactService.Insert(feedUri, newEntry);

} 
```

我在页面加载时获得令牌

以下是我尝试添加联系人时出现的错误。

用户代码未处理 GDataRequestException 请求执行失败：https//www.google.com/m8/feeds/contacts/default/full

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T09:30:31.563

好吧，我得到了解决问题的方法。这是一个非常愚蠢的错误。

我在做什么，我正在使用多范围令牌（用于日历和联系人）为了获取多范围令牌，我使用下面的代码

```
 string nextUrl = Request.Url.ToString();
 const string scope = "http://www.google.com/calendar/feeds/%20http://www.google.com/m8/feeds/";
 const bool secure = false;
 const bool session = true;
 string authSubUrl = AuthSubUtil.getRequestUrl(nextUrl, scope, secure, session);
 Response.Redirect(authSubUrl); 
```

从上面的“const string scope”变量中，您必须删除 %20 并留出空间。在 google Api 文档中，它被指定为 %20，但它不起作用。您必须删除 %20 并在它们之间添加空格。如下面的字符串。

```
 const string scope = "http://www.google.com/calendar/feeds/ http://www.google.com/m8/feeds/"; 
```

通过在字符串中使用 %20，您只能访问第一个服务而不是第二个。这就是为什么会出现所述错误。

# c++ - OpenSceneGraph 无法启动，因为缺少 osg80-osgd.dll

> ID：14064636
> 
> 赞同：1
> 
> 时间：2012-12-28T04:38:48.783
> 
> 标签：c++, openscenegraph

希望能得到一些帮助，最终在 Visual 2010 中解决这个问题。我正在尝试运行一个应该可以正常运行的示例项目，只是我得到一个错误弹出消息

**程序无法启动，因为您的计算机缺少 osg80-osgd.dll。**

当我去运行它时。我检查以确保我在环境变量的路径目录下正确指定了文件夹，并且我还在项目配置下正确列出了库。我最后使用dependency-Walker 分析了dll，发现了一些错误，但我不确定如何解释错误或如何处理给出的信息。希望能得到一些帮助来纠正dependency-Walker突出显示的错误，这样我就可以让我的项目正常运行。

![在此处输入图像描述](../Images/dae9b0f4b265fb61cf71695fe6ad5190.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T05:31:43.330

您是否可以混合 32 位和 64 位二进制文​​件、IE、64 位构建和 32 位 DLL？

# mysql - Ruby / MySQL 获取单行但仍在使用 .each？

> ID：14064649
> 
> 赞同：5
> 
> 时间：2012-12-28T04:40:14.930
> 
> 标签：mysql, ruby, mysql2

我正在使用[MySQL2](https://github.com/brianmario/mysql2) Ruby 驱动程序-但调用似乎有点多余

```
result.each{ |r| puts r['name'] } 
```

对于返回的单行数据。必须有一种更简单的方法来获取我想要的mysql字段而不必使用`each`块？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T04:47:41.890

你`result`应该是一个[`Mysql2::Result`](https://www.rubydoc.info/gems/mysql2/Mysql2/Result)，[`Enumerable`](https://ruby-doc.org/core/Enumerable.html)这样你就可以在上面使用[`first`](https://ruby-doc.org/core/Enumerable.html#method-i-first)（和其他`Enumerable`好东西）：

```
puts result.first['name'] 
```

# jquery - 如何防止在 jquery 中快速滚动？

> ID：14064652
> 
> 赞同：5
> 
> 时间：2012-12-28T04:40:47.740
> 
> 标签：jquery, html

我有一个在网上找到的简单的 html5 mp3 播放器。播放器从页面加载时开始向下滚动，所以当我按下播放或停止时，页面会弹出到播放器看不见的顶部。

我在页面上还有一些其他脚本，所以我想知道这是否会导致它。

有什么我可以添加到我的脚本中以使页面在使用播放器时保持静止？

提前致谢

```
<script>
        $(document).ready(function(){
            $("#play-bt").click(function(){
                $("#audio-player")[0].play();
                $("#message").text("Music started");
            })

            $("#pause-bt").click(function(){
                $("#audio-player")[0].pause();
                $("#message").text("Music paused");

            })
        })
    </script>

 <audio id="audio-player" name="audio-player" src="http://www.ep.dev/songs/robin.mp3" ></audio>
                        <div id="message">ROBIN - From "Snow in June"</div><br />
                        <a id="play-bt" href="#">PLAY</a> | <a id="pause-bt" href="#">PAUSE</a> | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:45:38.890

这是因为您的按钮`href='#'`设置了它们，这将导致浏览器查找 ID。删除href，它应该摆脱弹出。

改变这个：

```
<a id="play-bt" href="#">PLAY</a> | <a id="pause-bt" href="#">PAUSE</a> 
```

对此：

```
<a id="play-bt">PLAY</a> | <a id="pause-bt">PAUSE</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:43:37.013

尝试改变这一点：

```
<audio id="audio-player" name="audio-player" src="http://www.ep.dev/songs/robin.mp3" > 
```

在这

```
<audio id="audio-player" name="audio-player" src="http://www.ep.dev/songs/robin.mp3#audio-player" > 
```

我正在添加一个 #+idname 它应该在页面加载时转到 ID

ps 没有工作代码很难看到

# css - Size iframe content exactly the same as iframe

> ID：14064664
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:42:24.730
> 
> 标签：css, html

I have an iframe with a single object inside (and svg). The iframe is 640x480 pixels. The svg as reported by chrome inspector is also 640x480\. However the body of the iframe is reported to be 640x482 pixels and so scrollbars show up. I know I can set the iframe to overflow: hidden to cut off the content, or make the svg smaller, but I would like the iframe content to match the size of the iframe exactly.

I have tried setting all of these things to 0 on body, div, svg, html and iframe:

```
border: 0;
padding: 0;
outline-width: 0;
margin: 0; 
```

Am I forgetting something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:11:34.627

Ahh, I added `display: block;` to my SVG style and this fixed it!

# sharepoint - CQWP拉链接列表，当点击链接时呈现列表项而不是打开URL本身

> ID：14064667
> 
> 赞同：1
> 
> 时间：2012-12-28T04:42:43.300
> 
> 标签：sharepoint, hyperlink, cqwp

我在页面上有一个内容查询 Web 部件，我用它来提取链接列表（从链接列表中）以显示在页面上。我认为单击此链接，用户将能够导航到链接本身，但是单击时会打开列表项。谁能告诉我如何让链接重定向到下面的 URL 而不是列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T00:56:37.783

为了在[CQWP中呈现重定向到 URL 而不是 List Item URL 的链接列表项，请在](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.publishing.webcontrols.contentbyquerywebpart.aspx)*Presentation*选项卡中指定**要显示的字段**：

> 链接：URL [自定义列]；

如下图所示

![在此处输入图像描述](../Images/388644ace975216618de675fd1e4f079.png)

# php - 如何用simplexml解析xml？

> ID：14064668
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:42:51.157
> 
> 标签：php, simplexml

我正在尝试解析以下 xml，但我的代码只解析了每个部分的第一个标签，

```
$xml = simplexml_load_string($response);       
foreach ($xml->person as $p) {
  $p = $p->attributes()->name;
  echo "     ".$p. "        ";
} 
```

输出是 Joe Ray Alex，但我需要它来显示列表中每个人的姓名，所以应该是 Joe Jack Ray John Edward Alex。

```
 <?xml version="1.0" encoding="utf-8"?>
 <people>
   <person name="Joe">
   <person name="Jack">
   </person>
   </person>

   <person name="Ray">
   <person name="John">
   <person name="Edward">
   </person>
   </person>

   <person name="Alex">
   </person>
 </people> 
```

除了更改xml，还有其他选择吗？因为我收到了 xml 作为来自 Web 服务的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:01:20.177

1.  修复您的 XML

2.  如果你真的想打印内部元素数据，你应该做一个递归函数：

    ```
    function printNames($simpleXMLElement) {

        // Print the name attribute of each top level element
        foreach ($simpleXMLElement as $element) {

            // Print this elements name.
            $p = $simpleXMLElement->attributes()->name;
            echo "     ".$p."        ";

            // Send the inner elements to get their names printed
            foreach ($simpleXMLElement->children() as $child) {
                printNames($child);
            }
        }
    }

    $xml = simplexml_load_string($response);
    printNames($xml); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:59:21.970

为什么不更正 XML？

IE

```
<people>
   <person name="Joe" />
   <person name="Jack" />

   <person name="Ray" />
   <person name="John" />
   <person name="Edward" />

   <person name="Alex" />
 </people> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:02:26.147

鉴于您奇怪的 XML 结构，您要么必须查找并递归到`person`您找到的任何元素，要么需要生成所有`person`元素的平面列表。

这是一个 xpath 方法：

```
$people = $xml->xpath('descendant::person');

foreach ($people as $person) {
    echo $person['name'], "\n";
} 
```

# c# - 保存 TFS office 加载项的项目设置

> ID：14064669
> 
> 赞同：1
> 
> 时间：2012-12-28T04:42:56.310
> 
> 标签：c#, tfs, outlook-addin, office-addins

我有从 Outlook 访问 TFS 的场景。我正在使用 Office 插件进行自定义。

我不希望用户在打开 Outlook 后第一次访问 TFS 时都提供 TFS 连接设置。

我想创建一个设置表单，我可以在其中使用客户端文件系统保存设置。我怎样才能做到这一点 ？

可以有人指向示例或代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:00:39.977

您是否考虑过使用 MAPIFolder.GetStorage？您应该能够将任何自定义数据存储在任何文件夹中的隐藏消息中，收件箱可能是最好的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:33:25.887

**“我想创建一个设置表单，我可以在其中使用客户端文件系统保存设置”**

连接到 TFS 的连接详细信息使用 Windows 安全性，将此信息存储在本地文件中不是一个好主意。

> 当您使用 Team Explorer 连接到 TFS 时，它将尝试使用您当前的凭据连接到 TFS 环境。在两种情况下，您需要其他东西：
> 
> 1) 您当前的身份无权访问 TFS，每次连接到 TFS 时都会提示您输入凭据
> 
> 2) 您当前的身份可以访问 TFS，但您想使用其他凭据连接到 TFS。
> 
> 您可以通过将要用于创建与 TFS 的连接的凭据添加到“存储的用户和密码”来实现此目的。只需在其中添加 TFS 服务器的地址和凭据即可。下次访问 TFS 时，将使用这些凭据。

[http://www.ewaldhofman.nl/post/2009/05/21/Automatically-connect-to-TFS-under-another-user-account.aspx](http://www.ewaldhofman.nl/post/2009/05/21/Automatically-connect-to-TFS-under-another-user-account.aspx)

# unit-testing - 单元测试中的性能测试

> ID：14064670
> 
> 赞同：4
> 
> 时间：2012-12-28T04:43:09.697
> 
> 标签：unit-testing, testing, junit, performance-testing

单元测试中是否需要进行性能测试？如果是这样，最佳做法是什么？如果不是，请提供理由。

一个例子可以是针对过滤器效率的单元测试，断言完成过滤的时间。

这只是一个例子。但是，我想就未解决的问题获得建议，而不是针对上述问题的详细解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T05:14:10.650

不，这当然没有必要，甚至可能没有用。没有必要，因为您编写的大多数代码都具有很高的性能，而且您的时间最好花在其他地方。没用，因为如果您尝试在单元测试期间测量性能，您的结果将是错误的，因为运行测试的 JVM 几乎肯定与您的代码最终将以多种方式运行的位置不同，包括同时发生的活动种类被测代码、垃圾收集自调整、通用 JVM 设置和 JIT 编译等等。

# json - 欢迎 在煎茶建筑师

> ID：14064671
> 
> 赞同：0
> 
> 时间：2012-12-28T04:43:10.797
> 
> 标签：json, extjs

如何在 sencha architect 4-1 的面板中显示“欢迎”标签？当用户登录时，他们应该能够在面板中看到“欢迎”+用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:17:36.810

1.  在窗体上拖动 a `Ext.form.Label`。
2.  拖一个`Basic Event Binding`就可以了。函数的名称应该是`boxready`.
3.  转到代码实现并在此处键入您的逻辑。

就像是：

```
var user = "1933654";
this.setText("Welcome" + user); 
```

# javascript - 如何每次更改会话值

> ID：14064678
> 
> 赞同：0
> 
> 时间：2012-12-28T04:43:31.887
> 
> 标签：javascript, asp.net, html

我有一个分离器。

在拆分器的左窗格中，我有一个网格，在右窗格中，我有选项卡。

我将选定的记录放在会话中的网格 ID 值中，例如 `sessionStorage.setItem("ID",id)`. 将此 id 值传递给右侧选项卡并根据 ID 显示选项卡内容。

对于第一个选定的记录，它会显示该特定的 id 值，如果我在网格中选择不同的记录，那么 Id 值也不会传递到选项卡并显示具有第一个选定记录 id 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:57:59.833

在您的场景中，

使用 queryString 并重定向当前页面。

```
Response.Redirect("current.aspx?id"+ID) 
```

然后，在 TAB 窗格中传递值 ID

```
int ID =  int.parse(Request.QueryString["id"]); 
```

# php - __autoload 会影响包含的文件吗？

> ID：14064680
> 
> 赞同：1
> 
> 时间：2012-12-28T04:43:42.520
> 
> 标签：php, autoload

我有 index.php 文件，在最上面我定义了 __autoload 魔术函数。

```
function __autoload($className) {
   echo "autoloading $className";
   require_once('application/models/'.strtolower($className).'.php');
} 
```

然后，我引用了 __autoload 自动包含的 User 对象（User.php）。直到这一刻一切正常。问题是 User.php 引用了 File 类

```
 $obj->numberOfUploads = File::countUploadsByUser($obj->ID); 
```

此时抛出错误

> 致命错误：在第 19 行的 Z:\home\project\www\application\models\user.php 中找不到类“文件”

问题是，我可以看到输出

> 自动加载用户

但看不到有关文件的任何内容。因此，看起来，当捕获到对 File 的引用时，根本不会调用 __autoload 函数。尝试将 __autoload 函数添加到 User.php 导致有关重新声明该函数的错误。

很抱歉，如果之前提出过这个问题，我试图谷歌它并没有找到任何信息。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:40:00.240

从[php 手册中关于 autoload](http://php.net/manual/en/language.oop5.autoload.php)的评论来看，似乎很多人在定义`__autoload`两次时遇到了类似的问题。

我建议使用[`spl_autoload_register`](http://php.net/manual/en/function.spl-autoload-register.php)匿名函数来避免多个定义冲突，如该页面的示例 1 所示：

```
// Or, using an anonymous function as of PHP 5.3.0
spl_autoload_register(function ($class) {
    include 'classes/' . $class . '.class.php';
}); 
```

此外，您不需要使用`require_once`（可以只使用`require`），因为如果已经找到该类，则不会再次调用处理程序。

尝试`spl_autoload_register`仅在您的`index.php`文件中使用，如果这不起作用，请在您的文件中添加一个`User.php`。

祝你好运！

# mysql - MySQL - 两个查询之间的区别

> ID：14064682
> 
> 赞同：1
> 
> 时间：2012-12-28T04:44:01.997
> 
> 标签：mysql, select, group-by

```
(SELECT * FROM (SELECT clientid,totalquantity from clientquantity 
order by quantitydate desc) AS A GROUP BY clientid); 
```

和

```
SELECT clientid,totalquantity from clientquantity group by clientid; 
```

有人可以解释上面两个查询之间的区别吗？结果集在计算的行数方面是相同的。那么，这两个查询之间有区别吗？例如，性能方面还是数据差异？

第一个查询用作`LEFT JOIN`与另一个表的查询的一部分。为了简单起见，我在这篇文章中删除了另一个表。

> **以上是因为第二个查询也需要包含一个 ORDER BY 并且使用 SQL 的唯一方法就是像在第一个查询中那样做吗？我在第二个查询中省略了 ORDER BY，但在第二个查询中也是必需的。**

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:07:02.840

查看此[**SQL FIDDLE DEMO**](http://sqlfiddle.com/#!2/d520f/1)以了解您的两个查询之间的区别。

1.  当您按日期按数据降序使用 order 并使用 clientId 对该数据进行分组时，它将检索按日期最新的所有客户端数据。

2.  如果您直接使用`GROUP BY`子句，那么它将通过 clientId 从表中获取每条第一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:48:55.490

第一个查询`(SELECT * FROM (SELECT clientid,totalquantity from clientquantity order by quantitydate desc) AS A GROUP BY clientid);`（在我看来）像冗余部分。查询的最深部分 ( `SELECT clientId,totalquantity...`) 从按数量日期排序的表中获取所有信息。查询的第二部分是`SELECT * FROM ...`简单地说“将所有数据从内部结果集中拉到我的结果集中”。最后一部分是获取该结果集并按客户端 ID 对其进行分组。

第二个查询`SELECT clientid,totalquantity from clientquantity group by clientid;`几乎完全相同，但更简洁：它获取 clientid 和 totalquantity 列，并按客户端 ID 对其进行分组。*唯一的区别是它不按数量日期降序对其进行排序*。

执行时，它们基本上会做同样的事情（行顺序会不同），但是您的数据库引擎应该足够聪明，以使两者也具有几乎相同的性能。至于可读性，我将使用第二个查询并`ORDER BY quantitydate DESC`在 group by 语句之前添加，以便它与第一个执行相同的操作（当然，除非您不想对其进行排序）。

# c++ - 禁用指定文件夹的粘贴活动

> ID：14064683
> 
> 赞同：1
> 
> 时间：2012-12-28T04:44:08.997
> 
> 标签：c++, clipboard, copy-paste, api-hook

我想阻止粘贴活动到指定文件夹[说“堆栈溢出”]，我已经通过挂钩函数 IOFilOperation::MoveItems 和 IOFilOperation::CopyItems 来阻止从指定文件夹剪切和复制活动，所以我需要哪个函数挂钩实现粘贴块......请帮帮我

# objective-c - 动态调用带参数的方法

> ID：14064684
> 
> 赞同：2
> 
> 时间：2012-12-28T04:44:15.270
> 
> 标签：objective-c, ios

我知道可以像这样按名称调用方法：

```
 NSString *string =@"methodName";
[self performSelector:NSSelectorFromString(string)]; 
```

并且它将执行以下方法：

```
-(void)methodName
   {
              // todo:.....
   } 
```

我想知道如何调用具有以下参数的方法：

```
-(void)methodName:(NSString *)_name :withValue (NSString *) value
     {
              // todo:.....
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T04:49:58.650

您可以使用 -performSelector:withObject:

```
NSDictionary *dic = @{@"name":@"stringName",@"value":@"12"};

NSString *string =@"methodName:";
[self performSelector:NSSelectorFromString(string) withObject:dic]; 
```

在 -methodName 中：

```
-(void) methodName:(id)obj
{
    NSDictionary *dic = (NSDictionary *)obj;
    [self methodName:dic[@"name"] withValue:dic[@"value"]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:06:17.273

我不知道确切的语法，但是您可以使用[NSInvocation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:13:22.060

好吧，我不知道到底需要什么，但据我了解，它类似于：

```
NSArray *fruits = [NSArray arrayWithObjects:@"Apple", @"Mango", nil]; 
NSArray *drinks = [NSArray arrayWithObjects:@"Drink1", @"Drink2",nil];
[self serveOrdersWith:fruits andDrinks:drinks]; 
```

在类中的某处，将使用参数数组 fruits 调用该方法，即

```
-(NSArray*)serveOrdersWith :(NSArray*)array1 andDrinks:(NSArray*)array2{
     //Your code here but I will finish with this only
    NSArray *orderArray;
    [orderArray addObject:array1];
    [orderArray addObject:array2];
    return orderArray;
} 
```

# matlab - 从 MATLAB 中的 MSER 检测中获取区域点？

> ID：14064688
> 
> 赞同：2
> 
> 时间：2012-12-28T04:44:44.067
> 
> 标签：matlab, opencv, image-processing, computer-vision, matlab-cvst

在[Matlab 中检测 MSER](http://www.mathworks.in/help/vision/ref/detectmserfeatures.html)后，返回的 MSER 区域是椭圆。我们如何获得构成每个区域的确切点？

简单的代码：

```
REGIONS = detectMSERFeatures(I) 
```

在 OpenCV 中，我们得到拟合的椭圆以及区域的点（作为轮廓）。我找不到任何从 Matlab MSER 参数到 OpenCV 参数的直接映射。所以坚持使用 Matlab 检测 MSER。

但是，除了拟合椭圆之外，有没有办法获得构成区域的*实际点？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:53:44.727

**编辑**：您可以使用[Plot MSER 区域属性](http://www.mathworks.com/help/vision/ref/mserregions.plot.html)获得所需的点，例如（来自 matlab 文档）：

```
regions = detectMSERFeatures(I);
imshow(I);hold on;
plot(regions); 
```

绘制 MSER 区域

```
figure; imshow(I);hold on;
plot(regions,'showPixelList',true, 'showEllipses',false);
hold off; 
```

**原答案：**

REGIONS 将为您提供[有关质心 (X0,Y0)、方位角 (phi) 以及短轴和长轴](http://www.mathworks.com/help/vision/ref/mserregionsclass.html#bs_8r2b-3)（或它们的一半：椭圆的 a、b 参数）的信息。

**质心**：一个 M×2 数组，由 [xy] 质心坐标组成，椭圆的二阶矩与 MSER 区域相同。 **Axes**：一个二元素向量，[majorAxis minorAxis]。该向量指定椭圆的长轴和短轴，它们具有与 MSER 区域相同的二阶矩。 **方向**：从 -pi/2 到 +pi/2 弧度范围内的值。该值表示从 X 轴到椭圆长轴测量的椭圆方向。

您可以在每个存储区域（或 COUNT 属性）上使用以下代码进行循环。

要绘制椭圆的轮廓，您可以使用以下代码：

```
% These are just values to play with
a=10;
b=20;
phi=0.5236;
X0=40;
Y0=50;

 R  = [ cos(phi) sin(phi); -sin(phi) cos(phi) ];
 theta_r         = linspace(0,2*pi);
 ellipse_x_r     = X0 + a*cos( theta_r );
 ellipse_y_r     = Y0 + b*sin( theta_r );
 rotated_ellipse = R * [ellipse_x_r;ellipse_y_r];

 plot( rotated_ellipse(1,:),rotated_ellipse(2,:),'b' ); 
```

![在此处输入图像描述](../Images/467066d118b618c8defedefd673ac267.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-26T05:15:39.263

您可以使用以下方法获取每个区域中的所有坐标：

```
for i=1:length(regions) 
    coordinates=getfield(regions(i),'PixelList');
end 
```

# android - 耳机和免提同时输出音频

> ID：14064693
> 
> 赞同：10
> 
> 时间：2012-12-28T04:45:27.080
> 
> 标签：android

我正在尝试创建双屏设置。Android 平板电脑 (Nexus 10) 使用 HDMI 连接到另一个屏幕。

在平板电脑上播放电影（使用 VLC 或其他应用程序）时，它会在两个屏幕上正常显示。
但是，音频信号仅通过 HDMI 传输。使用[SOUNDAbout 应用程序](https://play.google.com/store/apps/details?id=com.woodslink.android.wiredheadphoneroutingfix)，我们设法在耳机或 HDMI 上进行音频*输出*。

我看不到同时为两个设备设置音频输出的功能。我尝试使用音频管理器进行设置，但它仅适用于一个通道。

```
AudioManager am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

am.setSpeakerphoneOn(true);
am.setWiredHeadsetOn(true); 
```

我注意到的另一件事是 setParameters API，它将变量传递给平台音频系统。那可能是ALSA，也许解决方案在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T11:19:54.020

没有办法以保证在所有 Android 设备上工作的方式做到这一点。这里的问题是，平台通常缺少任何类型的 HDMI+Speaker 或 HDMI+Headset 组合设备（即描述单个输出流到 HDMI 和其他目的地的低级路由的音频设备）。不一定有任何硬件限制，但它根本不是您通常想要使用的路线，因此尚未添加。

我从来没有遇到过一个平台，可以同时为任何流类型选择 HDMI 和有线耳机。在某些平台上，可以为 RING 和 ALARM 流类型选择 HDMI + 扬声器，但如果平台缺少组合设备来实现路由决策，您仍然只能在HDMI 或扬声器*中获得音频。*
看看[这段代码](https://www.codeaurora.org/gitweb/quic/la/?p=platform/hardware/qcom/audio.git;a=blob;f=alsa_sound/ALSADevice.cpp;h=1b8f8a0ff07dde4a2bdb9fa092ba17eb48ed006f;hb=jb_2.2_rb2_5.2#l1449)，看看我的意思。这就是使用 Qualcomm 平台的 OEM 大量基于其代码的原因。这段特定的代码所做的是为特定的流选择一个低级的输出路径。在您的情况下，它会看到 HDMI (AUX_DIGITAL) 可用，因此它会选择 HDMI“用例”（对应于[类似的](https://www.codeaurora.org/gitweb/quic/la/?p=platform/hardware/qcom/audio.git;a=blob;f=libalsa-intf/snd_soc_msm/snd_soc_msm_2x_Fusion3;h=8aab834fdfaa125173db55182b3943b5003bcc2f;hb=jb_2.2_rb2_5.2#l57)内容）并立即返回。

# javascript - jQuery 错误 - $(el).css('float') 当绝对或固定时 - 不同的浏览器返回不同的结果

> ID：14064694
> 
> 赞同：0
> 
> 时间：2012-12-28T04:45:28.813
> 
> 标签：javascript, jquery, css, cross-browser, css-float

如果元素是`floated`并且位置为`absolute`or`fixed`并且脚本`$(el).css('float')`运行 Chrome 将返回***“left”***，但所有其他主要（最新）浏览器返回***“none”***。

为什么是这样？我该如何解决这个问题？

示例： http: [//jsfiddle.net/ChPCD/7/](http://jsfiddle.net/ChPCD/7/) <在不同的浏览器中运行

编辑：感谢 Explosion Pills 的技术回答。更改了我的脚本以将定位短暂切换为静态以获取先前的浮点值。还是觉得跨浏览器的结果是一样的=P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:56:53.747

欢迎来到跨浏览器支持的美妙世界。

您的两个选择是：

1）编写浏览器特定的代码。使用某种方法来检测当前浏览器并执行特定于该浏览器的代码。

2）另辟蹊径。例如，与其说检查浮点值，不如查找特定的类或其他属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:28:33.800

如果您使用`position: absolute;`. 也许它对你有用之一

```
parseInt( $(el).css( 'left' ), 10) 
```

或者

```
$(el).position().left 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:03:44.173

看起来，由于[`absolute`或`fixed`定位覆盖了`float`行为](http://www.w3.org/TR/CSS21/visuren.html#propdef-float)，不同的浏览器正在返回被覆盖属性的不同值：完全丢弃或保留它。

也许您可以使用不同的方法来查找这些元素：也许是基于与`float`最初应用的相同规则的 jQuery 选择器，例如：

**CSS** `div.float-left{float:left;}`

**jQuery** `$('div.float-left').each(foo);`

# antlr - ANTLR 隐式乘法

> ID：14064697
> 
> 赞同：4
> 
> 时间：2012-12-28T04:46:05.760
> 
> 标签：antlr, grammar, antlr3

我是 ANTLR 的新手，我正在尝试扩展[此处](https://stackoverflow.com/a/1932664)介绍的简单计算器的示例。具体来说，我尝试添加一些简单的函数，负数等，以熟悉 ANTLR。但是，我在尝试实现“隐式”乘法时遇到了一些问题（例如，3cos(2)sin(2) 将被解释为 3*cos(2)*sin(2)）。

我在 Stack Overflow 上发现了一个具有相同问题的问题（[此处](https://stackoverflow.com/q/2398118/1933612)）。该问题的解决方案的一般形式看起来像我自己找到的，所以我不确定我的问题出在哪里。

我的语法如下。如果没有这`| p2 = signExpr {$value *= $p2.value;}`条线（最后一行`multiplicationExpr`），根据我的测试，一切似乎都正常。当我添加这一行并运行它时`antlr`，我收到以下错误：

```
error(211): calculator.g:24:3: [fatal] rule multiplicationExpr has non-LL(*) decision due to recursive rule invocations reachable from alts 3,4\.  Resolve by left-factoring or using syntactic predicates or using backtrack=true option.
warning(200): calculator.g:24:3: Decision can match input such as "'-' FLOAT" using multiple alternatives: 3, 4
As a result, alternative(s) 4 were disabled for that input 
```

启用`backtrack`会导致我的一些（正常工作的）测试表达式的计算错误。此外，警告谈到了替代方案 3 和 4 `multiplicationExpr`，但我在该块中只有三个替代方案，这让我感到困惑。

有人能指出我语法中的错误吗，如下所示？

```
grammar calculator;

eval    returns [double value]
        : exp = additionExpr    {$value = $exp.value;}
        ;

additionExpr    returns [double value]
        :               m1 = multiplicationExpr {$value = $m1.value;}
                ( '+'   m2 = multiplicationExpr {$value += $m2.value;}
                | '-'   m2 = multiplicationExpr {$value -= $m2.value;}
                )*
        ;

multiplicationExpr      returns [double value]
        :               p1 = signExpr   {$value = $p1.value;}
                ( '*'   p2 = signExpr   {$value *= $p2.value;}
                | '/'   p2 = signExpr   {$value /= $p2.value;}
                |       p2 = signExpr   {$value *= $p2.value;}
                )*
        ;

signExpr        returns [double value]
        :       (       '-' a = funcExpr        {$value = -1*$a.value;}
                ) | (   a = funcExpr            {$value = $a.value;}
                )
        ;

funcExpr        returns [double value]
        :       (       'cos' s = signExpr      {$value = Math.cos($s.value);}
                ) | (   'sin' s = signExpr      {$value = Math.sin($s.value);}
                ) | (   s = powExpr             {$value = s;}
                )
        ;

powExpr returns [double value]
        :               s1 = atomExpr   {$value = $s1.value;}
                ( '^'   s2 = signExpr   {$value = Math.pow($value, $s2.value);}
                )?
        ;

atomExpr        returns [double value]
        :       f = FLOAT                       {$value = Double.parseDouble($f.text);}
        |       '(' exp = additionExpr ')'      {$value = $exp.value;}
        ;

FLOAT
    :   ('0'..'9')+ ('.' ('0'..'9')*)? EXPONENT?
    |   '.' ('0'..'9')+ EXPONENT?
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? ('0'..'9')+ ; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:15:17.217

新年，新版本:-)

由于您是 ANTLR 的新手，并且现在已经看到 v3 的一些歧义问题，您一定会欣赏 v4 的强大功能。以下是将计算保持在表达式级别**的**解决方案（我是 v4 的新手），但展示了使用 ANTLR4 描述表达式是多么简单。

```
grammar Calculator;

progr : eval+ EOF ;

eval 
    :   mult ';' {System.out.println($eval.text + " -> " + $mult.value);}
    ;

mult    returns [double value]
    :   e1 = expr                  {$value = $e1.value;}
    |   e1 = expr e2 = mult        {$value = $e1.value * $e2.value;}
    ;

expr    returns [double value]
    :   e1 = expr '^'<assoc=right> e2 = expr   {$value = Math.pow($e1.value, $e2.value);}
    |   '-' e1 = expr              {$value = -1 * $e1.value;}
    |   e1 = expr '*' e2 = expr    {$value = $e1.value * $e2.value;}
    |   e1 = expr '/' e2 = expr    {$value = $e1.value / $e2.value;}
    |   e1 = expr '+' e2 = expr    {$value = $e1.value + $e2.value;}
    |   e1 = expr '-' e2 = expr    {$value = $e1.value - $e2.value;}
    |   'cos' s = expr             {$value = 2; System.out.println("cos" + $s.text + "=2");} // {$value = Math.cos($s.value);}
    |   'sin' s = expr             {$value = 5; System.out.println("sin" + $s.text + "=5");} // {$value = Math.sin($s.value);}
    |   FLOAT                      {$value = Double.parseDouble($FLOAT.text); System.out.println("FLOAT=" + $FLOAT.text);}
    |   '(' FLOAT ')'              {$value = $expr.value;} // just for demo, to avoid printing FLOAT parameters
    |   '(' e1 = expr ')'          {$value = $e1.value; System.out.println("expr(" + $e1.text + ")=" + $e1.value);}
    ;

FLOAT
    :   DIGIT+ ( '.' DIGIT* )? EXPONENT?
    |   '.' DIGIT+ EXPONENT?
    ;

WS  :   [ \t\r\n] -> channel(HIDDEN)
    ;

fragment DIGIT    : [0-9] ;
fragment EXPONENT : [Ee] ( '+' | '-' )? DIGIT+ ; 
```

文件 input.txt ：

```
3cos(2)sin(6);
4cos(2)cos(8)sin(6);
sin(1)sin(6);
sin(1)sin(6)cos(8)10sin(8);
sin(1)5cos(6)3;
2^8;
3*-12;
55/sin(0);
55/(2 + 3); 
```

执行 ：

```
$ echo $CLASSPATH
.:/usr/local/lib/antlr-4.0b3-complete.jar
$ alias
alias antlr4='java -jar /usr/local/lib/antlr-4.0b3-complete.jar'
alias grun='java org.antlr.v4.runtime.misc.TestRig'
$ antlr4 Calculator.g4 
$ javac Calculator*.java
$ grun Calculator progr input.txt 
FLOAT=3
cos(2)=2
sin(6)=5
3cos(2)sin(6); -> 30.0
FLOAT=4
cos(2)=2
cos(8)=2
sin(6)=5
4cos(2)cos(8)sin(6); -> 80.0
sin(1)=5
sin(6)=5
sin(1)sin(6); -> 25.0
sin(1)=5
sin(6)=5
cos(8)=2
FLOAT=10
sin(8)=5
sin(1)sin(6)cos(8)10sin(8); -> 2500.0
sin(1)=5
FLOAT=5
cos(6)=2
FLOAT=3
sin(1)5cos(6)3; -> 150.0
FLOAT=2
FLOAT=8
2^8; -> 256.0
FLOAT=3
FLOAT=12
3*-12; -> -36.0
FLOAT=55
sin(0)=5
55/sin(0); -> 11.0
FLOAT=55
FLOAT=2
FLOAT=3
expr(2 + 3)=5.0
55/(2 + 3); -> 11.0 
```

注意：
1）我给 cos 和 sin 赋予了固定值，以便能够轻松地验证计算。
2) 使用 -diagnostics 运行，您会看到歧义消息：

```
$ grun Calculator progr -diagnostics input.txt 
FLOAT=3
line 1:6 reportAttemptingFullContext d=2, input='(2)'
line 1:6 reportAmbiguity d=2: ambigAlts={5, 6}, input='(2)' 
```

这是因为我添加了以下行：

```
 |   '(' FLOAT ')'              {$value = $expr.value;} // just for demo 
```

打印得很好（避免将参数打印到 cos/sin）。这与`'(' e1 = expr ')'`. 删除它，消息就会消失。
3）查看 ANTLR4 如何标记（-tokens）和解析（-trace）：

```
grun Calculator progr -tokens -diagnostics -trace input.txt 
```

4) 站点：[http](http://antlr4.org)
://antlr4.org 5) 书籍：[http](http://pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference)
: //pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference 6) 在 OS X 上安装 4.0b3：[http://forums .pragprog.com/forums/206/topics/11231](http://forums.pragprog.com/forums/206/topics/11231)
7) SO 过滤器：[https](https://stackoverflow.com/questions/tagged/antlr4)
://stackoverflow.com/questions/tagged/antlr4 8) 组：[https ://groups.google.com/forum/#!forum/ antlr-讨论](https://groups.google.com/forum/#!forum/antlr-discussion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T15:54:50.607

将 BernardK 的解决方案融入到我以前的语法中，这是让`multiplicationExpr`一切都为我工作的新方法：

```
multiplicationExpr      returns [double value]
        :
                        p1 = signExpr   {$value = $p1.value;}
                ( (signExpr funcExpr*) => p2 = funcExpr {$value *= $p2.value;}
                | '*'   p2 = signExpr   {$value *= $p2.value;}
                | '/'   p2 = signExpr   {$value /= $p2.value;}
                )*
        ; 
```

在玩了一些之后，与我最初拥有的东西接近的东西也可以使用：

```
multiplicationExpr      returns [double value]
        :               p1 = signExpr   {$value = $p1.value;}
                (       p2 = funcExpr   {$value *= $p2.value;}
                | '*'   p2 = signExpr   {$value *= $p2.value;}
                | '/'   p2 = signExpr   {$value /= $p2.value;}
                )*
        ; 
```

再次感谢你，伯纳德。

# ios - 延迟后播放 AVAudioPlayer

> ID：14064700
> 
> 赞同：0
> 
> 时间：2012-12-28T04:46:22.287
> 
> 标签：ios, objective-c, cocoa-touch, avaudioplayer

我正在尝试以越来越高的频率背靠背播放两个音频文件（点击和咔哒声）。它在第一秒内按需要工作，然后声音同时开始播放。知道我在这里做错了什么吗？

```
static float clickClackDelay = 1.0;

- (void)runClickClackTimer {

    clickURL = [[NSBundle mainBundle] URLForResource:@"click" withExtension:@"wav"];
    clackURL = [[NSBundle mainBundle] URLForResource:@"clack" withExtension:@"wav"];
    avClick = [[AVAudioPlayer alloc] initWithContentsOfURL:clickURL error:nil];
    avClack = [[AVAudioPlayer alloc] initWithContentsOfURL:clackURL error:nil];

    clickClack = [NSTimer scheduledTimerWithTimeInterval:clickClackDelay
                                             target:self
                                           selector:@selector(runClickClackTimer)
                                           userInfo:nil
                                            repeats:NO];

    [avClick play];
    sleep(clickClackDelay);
    [avClack play];
    sleep(clickClackDelay);

    NSLog(@"Play sound every %.2f", clickClackDelay);

    clickClackDelay -= 0.01;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T06:30:42.880

首先`BOOL`在 .h 文件中定义实例：

```
 BOOL play; 
```

现在在`timer`需要的地方添加这个`play sound in delay`。

```
 NSTimer *clickClack = [NSTimer scheduledTimerWithTimeInterval:clickClackDelay
                                              target:self
                                            selector:@selector(runClickClackTimer)
                                            userInfo:nil
                                             repeats:YES]; 
```

它会根据 clickClackDelay 播放延迟的方法是：

```
-(void)runClickClackTimer
{
  if(play)
  {
    play = FALSE;
    [avClick play];
  }
  else
  {
    play = TRUE;
    [avClack play];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T04:55:56.070

第一个睡眠定时器和 NSTimer 都会延迟相同的时间，1 秒，因此调用

```
[avClack play]; 
```

在 runClickClackTimer 的第一个实例中同时

```
[avClick play]; 
```

在 runClickClackTimer 的第二个实例中。

我会设置两个单独的 NSTimer，它们调用两个单独的函数，可能是 runClickTimer 和 runClackTimer。

# prestashop - mail() 函数在 prestashop 中不起作用

> ID：14064704
> 
> 赞同：0
> 
> 时间：2012-12-28T04:46:50.683
> 
> 标签：prestashop

当我尝试从 prestashop 后端发送测试邮件时，它显示错误，如下所示：

**错误：请检查您的配置使用 mail() 发送失败，因为 PHP 的默认 mail() 函数返回布尔值 FALSE。**

有没有可用的修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:05:24.010

好吧，如前所述，请检查您的配置...或联系您的 Web 服务器的主机（或他们的文档！）以了解如何激活此功能。一些主机非常严格（至少默认情况下）并且不提供开箱即用的所有要求。

# ios - iOS 应用程序可以在后台获取 UIPasteboardChangedNotification 吗？

> ID：14064706
> 
> 赞同：3
> 
> 时间：2012-12-28T04:47:04.767
> 
> 标签：ios, background, notifications, nsnotificationcenter, uipasteboard

我看过一个名为 CopyTranslate 的 iPhone 应用程序。当我们复制某些东西时，例如在 safari 中，它可以通过本地通知对我们复制的内容进行翻译。

所以我想知道应用程序是否可以在后台接收 UIPasteboardChangedNotification 。然后我做了一个测试，我构建了一个可以在后台运行 10 分钟的应用程序，并观察 UIPasteboardChangedNotification。结果是应用程序无法在后台获得通知。

任何人都可以知道 CopyTranslate 如何实现它的功能吗？它每秒检查 UIPasetBoard 吗？如果是这样，它怎么知道有一个新的字符串副本而不是图像副本或其他东西。

谢谢你的任何想法！

我通过在后台检查每秒 UIPasteboard 的 changeCount 解决了这个问题。

以下是详细信息：

我在 AppDelegate 中持有一个属性 lastChangeCount，当我的应用程序进入后台时，我启动了一个无限的 while 循环，每次迭代休眠 1 秒。我会比较 UIPasteboard 的 changeCount 和 lastChangeCount 每次迭代，如果它们不相等，那么我知道粘贴板中有一些新的粘贴项目。所以我会得到 UIPasteboard 的字符串属性，如果它存在，我会安排一个本地通知来显示它。如果不是，我的意思是用户可能会复制图像或其他东西，所以我什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:18:53.893

一种可能的方法是当应用程序在后台以固定的时间间隔（例如 5 秒）“监控” UIPasteboard，然后可以知道剪贴板中是否有变化。为了确保复制内容是字符串，请检查`[[UIPasteboard generalPasteboard] string]`

然而后台任务被限制在600秒，（并且在后台播放静音音乐可能会被拒绝），所以关于如何延长时间的[讨论。](https://stackoverflow.com/questions/4656214/iphone-backgrounding-to-poll-for-events)此外，Pasterbot 已经声明了一个类似的方法，请参见[此处](http://tapbots.com/blog/pastebot/pastebot-music-in-background)。

# c# - StatusBar MenuStripItem 选择鼠标

> ID：14064708
> 
> 赞同：1
> 
> 时间：2012-12-28T04:47:34.873
> 
> 标签：c#, menustrip, statusstrip, toolstripmenu

我今天向你揭露我的问题。我创建了一个 statusStripLabel 用于显示当前名称 - 当鼠标悬停时，MenuStrip 或 ToolStripMenuItem 的选定项目。我有这个代码：（它正在工作）

```
private void ouvrirToolStripMenuItem1_MouseHover(object sender, EventArgs e)
{
    ToolStripMenuItem houver = (ToolStripMenuItem)sender;
    MenuStatusLabel.Text = houver.Text;
} 
```

但我想为所有工具条菜单制作，而不仅仅是一个。（一个函数或类似的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:04:23.227

这适合您的问题和良好的解决方案，我修改了此[链接的代码](http://www.hikaruyuuki.com/en/blog/display-tooltiphint-text-of-menu-items-in-status-bar-c-sharp.html)

```
 private void Form1_Load(object sender, EventArgs e)
        {
            toolStripStatusLabel1.Text = "Ready...";
            foreach (ToolStripMenuItem item in menuStrip1.Items)
            {
                TraverseMenuItemHint(item);
            }
        }

        private void MenuHint_Hint(object sender, EventArgs e)
        {
            toolStripStatusLabel1.Text = (sender as ToolStripMenuItem).Text;
        }

        private void TraverseMenuItemHint(ToolStripMenuItem element)
        {
            for (int i = 0; i < element.DropDownItems.Count; i++)
            {
                if (!(element.DropDownItems[i] is ToolStripSeparator))
                {
                    ToolStripMenuItem item = element.DropDownItems[i] as ToolStripMenuItem;
                    if (item.Text.Length > 0)
                        item.MouseEnter += MenuHint_Hint;
                    TraverseMenuItemHint(item);
                }
            }
        }

        private void fileToolStripMenuItem_DropDownClosed(object sender, EventArgs e)
        {
            toolStripStatusLabel1.Text = "Ready...";
    } 
```

# php - 为我的 Html / Php / MySql 脚本分页

> ID：14064713
> 
> 赞同：0
> 
> 时间：2012-12-28T04:48:12.580
> 
> 标签：php, html, mysql, pagination

如何分页此脚本以在一页上显示 5 行，在另一页上显示 5 行，依此类推。我已经为此尝试了教程和更多内容，但仍然无法获得它。

以下是我的代码：

```
<?php require "manybr.htm" ?>
<style>
<?php require "styles.css" ?>
</style>
<?php

$host="XXXXX"; // Host name 
$username="XXXX"; // Mysql username 
$password="XXXXX"; // Mysql password 
$db_name="XXXX"; // Database name 
$tbl_name="tylted"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql 
$sql="SELECT * FROM $tbl_name order by id desc";
$result=mysql_query($sql);
?>
<table background='images/view.png' width='50%' align='center'>
<tr>
<th align='center'>Group</th><th align='center'>Submition By</th><th align='center'>Submition On</th><th align='center'>ScreenName</th><th     align='center'>Password</th><th align='center'>Does This Work?</th><th align='center'>Vote</th>
</tr>
<tr>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td background='transparent' align='center'><b><a href="http://aol.cellufun.com/p/grp/grp.asp?v=??&grp=<? echo $rows['group']; ?>">{<? echo $rows    ['group']; ?>}</a> </b></td>
<td background='transparent' align='center'><b><a href="http://aol.cellufun.com/p/player.asp?v=&p=<? echo $rows['yname']; ?>"><? echo $rows['yname'];     ?><a> </b></td>
<td background='transparent' align='center'><b><? echo $rows['date']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['username']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['password']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['works']; ?>% Yes <font color='transparent'>||||</font>&nbsp; <? echo $rows['dworks']; ?>%     No</b></td>
<td background='transpatent' align='center'><b><a href='works.php?id=<? echo $rows['id']; ?>'><img src='images/ThumbsUp.png' height='30'     width='30'></a>&nbsp;&nbsp;&nbsp;<a href='dworks.php?id=<? echo $rows['id']; ?>'><img src='images/ThumbsDown.png' height='30' width='30'></a>

</td> 
</tr>

<?php
// close while loop 
}
?>

<?php
// close connection; 
mysql_close();
?>
</table> 
```

我已添加`LIMIT 0 , 5`到我的查询中，现在出现了 5 个。如何使用第 2 页的链接来完成该部分？

我不知道`MySqli`或`PDO`还不知道。我很快就会学会，所以请不要发表这种评论。我将很快将我的内联代码移动到 CSS 中，但还没有。我需要先让这个工作。

```
<?php

$host="XXX"; // Host name 
$username="XXX"; // Mysql username 
$password="XXX"; // Mysql password 
$db_name="XXX"; // Database name 
$tbl_name="tylted"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// select record from mysql 
 $offset=$_GET['p'];
 $sql="SELECT * FROM $tbl_name order by id desc LIMIT 4 OFFSET ".$offset;
 $result=mysql_query($sql);
?>
<table background='images/subbg.png' width='70%' align='center'>
<tr><th><?php require "links.php" ?></th></tr>
<tr>
<th align='center'>Group</th><th align='center'>Submition By</th><th    align='center'>Submition On</th><th align='center'>ScreenName</th><th   align='center'>Password</th><th align='center'>Does This Work?</th><th   align='center'>Vote</th>
</tr>
<tr>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td background='transparent' align='center'><b><a     href="http://aol.cellufun.com/p/player.asp?v=&p=<? echo $rows['yname']; ?>"><? echo   $rows['yname']; ?><a> </b></td>
<td background='transparent' align='center'><b><? echo $rows['date']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['username']; ?></b></td>
 <td background='transparent' align='center'><b><? echo $rows['password']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['works']; ?>% Yes <font    color='transparent'>||||</font>&nbsp; <? echo $rows['dworks']; ?>% No</b></td>
<td background='transpatent' align='center'><b><a href='works.php?id=<? echo   $rows['id']; ?>'><img src='images/ThumbsUp.png' height='30' width='30'>  </a>&nbsp;&nbsp;&nbsp;<a href='dworks.php?id=<? echo $rows['id']; ?>'><img   src='images/ThumbsDown.png' height='30' width='30'></a>

</td>
</tr>

<?php
// close while loop 
    }
?>

</table> 
```

^^^^ 以上更新为 bozdoz

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:57:34.927

在您的 SQL 查询中追加`LIMIT 5 OFFSET 1`以在第一页显示 5 个结果。为下一页增加偏移值。

例子 ：

`OFFSET 2`为您提供接下来的 5 个结果，依此类推...

要放置指向下一页的链接，您可以尝试将偏移值设置为变量。

`OFFSET $offset`在`$offset`php.ini 中增加的地方。

**索引.php**

```
<?php
 if(isset($_GET['p'])){
   if(is_numeric($_GET['p']))
      $offset=$_GET['p'];
   else 
      $offset=1;
  }
 else 
  $offset=1;

 $sql="SELECT * FROM $tbl_name order by id desc LIMIT 5 OFFSET ".$offset;
 $result=mysql_query($sql);
?> 
```

然后为链接

```
<a href='index.php?p=2'>2</a> 
```

那应该显示2页等等你可以做到

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:01:00.783

使用`$_GET`变量来获取限制：

使 URL 类似于`index.php?p=5`假设。

PHP 可以像这样包含 $_GET 变量：

```
<?php

$startnum = 0; //set default
if(isset($_GET['p'])&&is_numeric($_GET['p'])){
  $startnum = $_GET['p'];
}
$sql="SELECT * FROM $tbl_name order by id desc LIMIT $startnum, 5";

?> 
```

下一个和上一个链接可以是`<a href="?p=<?php echo $startnum+5 ?>">Next</a>`

## 完整的 PHP 在这里：

```
<style>
<?php require "styles.css" ?>
</style>
<?php

$host="XXXXX"; // Host name 
$username="XXXX"; // Mysql username 
$password="XXXXX"; // Mysql password 
$db_name="XXXX"; // Database name 
$tbl_name="tylted"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$startnum = 0; //set default
if(isset($_GET['p'])&&is_numeric($_GET['p'])){
  $startnum = $_GET['p']; //change offset
}

$sql="SELECT * FROM $tbl_name order by id desc LIMIT $startnum, 5";
$result=mysql_query($sql);
?>

See the <a href="?p=<?php echo $startnum+5; ?>">next page</a>
<table background='images/subbg.png' width='70%' align='center'>

<tr><th><?php require "links.php" ?></th></tr>
<tr>
<th align='center'>Group</th><th align='center'>Submition By</th><th    align='center'>Submition On</th><th align='center'>ScreenName</th><th   align='center'>Password</th><th align='center'>Does This Work?</th><th   align='center'>Vote</th>
</tr>
<tr>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='lime' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
<th align='center'>
<hr color='gold' width='100%'/>
</th>
</tr>
<?php
while($rows=mysql_fetch_array($result)){
?>

<tr>
<td background='transparent' align='center'><b><a     href="http://aol.cellufun.com/p/player.asp?v=&p=<? echo $rows['yname']; ?>"><? echo   $rows['yname']; ?><a> </b></td>
<td background='transparent' align='center'><b><? echo $rows['date']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['username']; ?></b></td>
 <td background='transparent' align='center'><b><? echo $rows['password']; ?></b></td>
<td background='transparent' align='center'><b><? echo $rows['works']; ?>% Yes <font    color='transparent'>||||</font>&nbsp; <? echo $rows['dworks']; ?>% No</b></td>
<td background='transpatent' align='center'><b><a href='works.php?id=<? echo   $rows['id']; ?>'><img src='images/ThumbsUp.png' height='30' width='30'>  </a>&nbsp;&nbsp;&nbsp;<a href='dworks.php?id=<? echo $rows['id']; ?>'><img   src='images/ThumbsDown.png' height='30' width='30'></a>

</td>
</tr>

<?php
// close while loop 
    }
?>

</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T04:51:32.113

您可以将 LIMIT 放入您的 SQLQuerry

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T05:13:18.717

正如其他人已经说过的，您可以使用[`LIMIT offset, row_count`MySQL 中的子句一次仅提取几行（或替代地`LIMIT row_count OFFSET offset`）](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)。

要获得该偏移量，您可以从您可以命名的 URL 中获取一个值`page`，并将该变量放在指向下一页和上一页的链接中。

例如，假设页面上显示了五个项目。在第一页上，获取 5 行，以及所有项目的计数。如果有更多项目，请添加指向 的链接`results.php?page=2`。从那个变量，我们知道我们的偏移量是多少。由于第一页的偏移量（隐式）为零，第二页为 5，第三页为 10，我们可以提取一个简单的公式：`offset = ($_GET["page"]-1) * items_per_page`

还有更多细节需要介绍，例如空结果集以及`page`变量是否存在，但我将由您决定。

## 参考：

[MySQL :: MySQL 5.6 参考手册 :: 13.2.9 SELECT 语法](http://dev.mysql.com/doc/refman/5.6/en/select.html)

# android - 我需要安装 NDK 来构建 OpenCV Android 项目吗？

> ID：14064715
> 
> 赞同：0
> 
> 时间：2012-12-28T04:48:21.583
> 
> 标签：android, opencv, android-ndk

我正在尝试编译 OpenCV 的示例 Android 项目，但遇到了困难。我收到此错误：在 PATH 中找不到程序“ndk-build.cmd”

使用 NDK C/C++ 的项目无法编译。所有其他编译成功。我试图通过编辑 C/C++ Build Environment 和 GNU C++ Includes 来解决这个问题。这两个都不起作用。我不认为我这样做是正确的。我正在使用 Windows 7 进行 Android 开发。一个在线论坛建议添加一个包含 ../android-ndk-r8/.. 的路径，但这个“android-ndk-r8”目录在 OpenCV-2.4.2-android-sdk 中不存在，我找不到那是什么相等的。

我一直试图解决这个问题一个星期，但没有任何收获。无法开始编码真的很令人沮丧。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T04:53:05.100

右键单击项目 -> 转到项目属性 -> 转到 C/C++ 构建 -> 构建变量 -> 添加名为 NDKROOT（名称）的环境变量和相关路径（值）（正是您的 NDK 所在的位置）。请注意，您需要在每个 NDK 项目中重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:59:19.693

你安装了android ndk bundle rom android ??? android-ndk-r8 可以在以下位置下载

[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)

您已从 android 下载 ndk 包以使用 c/c++ 代码。OpenCv 将不包含 ndk 包。

-普雷亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T06:05:54.677

我希望您查看以下[链接](http://sseyod.blogspot.com/2009/08/android-jnindk-notes-on-getting-started.html)和[堆栈帖子](https://stackoverflow.com/questions/3469448/installing-using-the-android-ndk-in-eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T18:25:05.700

也许您没有指定`PATH`. 也许[这个](https://stackoverflow.com/a/14527852/1446598)答案会有所帮助。

# php - 通过 GET 更改 DB 的状态？

> ID：14064724
> 
> 赞同：1
> 
> 时间：2012-12-28T04:49:55.687
> 
> 标签：php

**addCategory.php**

```
<?php
$parentId = isset($_GET['parentId']) ? $_GET['parentId'] : 0;

$categoryName = $categoryDescription = "";
$fail = "";

if (isset($_POST['submit'])) {  

    if (isset($_POST['categoryName']))
        $categoryName = fix_string($_POST['categoryName']);

    if (isset($_POST['categoryDescription']))
        $categoryDescription = fix_string($_POST['categoryDescription']);

    $hidParentId = $_POST['hidParentId'];
}

$fail  = validate_category_name($categoryName);
$fail .= validate_category_description($categoryDescription);

echo "<html><head><title>An Example Form</title>";

if ($fail == "") {
  echo "success";

    header("Location: processCategory.php?action=add&categoryName=$categoryName&categoryDescription=$categoryDescription&hidparentId=$hidParentId");

    exit;
}

// Now output the HTML and JavaScript code
?>

<!-- The HTML section -->

<style>.signup { border: 1px solid #999999;
    font: normal 14px helvetica; color:#444444; }</style>
<script type="text/javascript">
function validate(form)
{

    fail  = validateCategoryName(form.categoryName.value)
    fail += validateCategoryDescription(form.categoryDescription.value)

    if (fail == "") return true
    else { alert(fail); return false }
}
</script></head><body>
<table class="signup" border="0" cellpadding="2"
    cellspacing="5" bgcolor="#eeeeee">
<th colspan="2" align="center">Add Category</th>

<?php

if (isset($_POST['submit'])) {
?>

<tr><td colspan="2">Sorry, the following errors were found<br />
in your form: <p><font color=red size=1><i><?php echo $fail ?></i></font></p>
</td></tr>

<?php 
}
?>

<form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>?parentId=<?php echo $parentId; ?>"
    onSubmit="return validate(this)">
     <tr><td>Category Name</td><td><input type="text" maxlength="32"
    name="categoryName" value="<?php echo $categoryName; ?>" /></td>
    </tr><tr><td>Category Description</td><td><input type="text" maxlength="32"
    name="categoryDescription" value="<?php echo $categoryDescription; ?>" /></td>

    <input type="hidden" name="hidparentId" value="<?php echo $parentId; ?>" />

</tr><tr><td colspan="2" align="center">
    <input type="submit" name="submit" value="ok" /></td>
</tr></form></table>

<!-- The JavaScript section -->

<script type="text/javascript">
function validateCategoryName(field) {
    if (field == "") return "No name entered.\n"
    return ""
}

function validateCategoryDescription(field) {
    if (field == "") return "No description entered.\n"
    return ""
}

</script></body></html>

<?php
// Finally, here are the PHP functions

function validate_category_name($field) {
    if ($field == "") return "No name entered<br />";
    return "";
}

function validate_category_description($field) {
    if ($field == "") return "No description entered<br />";
    return "";
}

function fix_string($string) {
    if (get_magic_quotes_gpc()) $string = stripslashes($string);
    return htmlentities ($string);
}

?> 
```

**processCategory.php**

```
<?php
$action = isset($_GET['action']) ? $_GET['action'] : '';
switch ($action) {

    case 'add' :
        addCategory();
        break;

    case 'modify' :
        modifyCategory();
        break;

    case 'delete' :
        deleteCategory();
        break;

    default :
        // if action is not defined or unknown
        // move to main category page
        header('Location: index.php');
}

/*
    Add a category
*/
function addCategory() {

    $name        = $_GET['categoryName'];
    $description = $_GET['categoryDescription'];
    $parentId  = $_GET['hidparentId'];

    $sql   =  "INSERT INTO tbl_category (cat_parent_id, cat_name, cat_description) 
            VALUES ($parentId, '$name', '$description')";
    $result = dbQuery($sql) or die('Cannot add category' . mysql_error());

    header('Location: index.php?catId=' . $parentId);     

}

function modifyCategory() {

}

function deleteCategory() {

}

?> 
```

请注意，我通过 POST 获取用户输入，然后将该 POST 数据发送到相同的 .php 文件......然后在验证后将这些数据发送到另一个 .php 文件 THRU GET ......将这些 GET 数据插入DB 然后在插入这些数据后，我们重定向到另一个页面。

我读到如果你改变数据库的状态，你应该使用 POST 而不是 GET。我认为这很糟糕，因为可以在 URL 中看到 GET 数据，因此用户可以在 URL 中更改数据库的状态，另一个是当您单击刷新时，如果您使用 POST，那么浏览器会警告您尝试重复再次使用相同的方法，但是如果您使用 GET 浏览器将不会警告您，因此最终会两次发布相同的数据。

在我的代码中，用户无法操纵 url 来更改数据库，因为一旦插入数据，我们就会重定向到不同的页面，而且刷新问题在这里也不是问题。

我想要一个分开的地方来处理我的输入，那就是 processCategory.php。

我是菜鸟，如果我做得对，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:16:06.553

数据如何到达那里并不重要，它可以在途中修改。你可以把它放在 GET 或 POST 中，用户可以伪造它，提出自己的请求，或者中间的人可以修改它（除非你运行 https）。

您的脚本容易受到 addCategory 函数中的 SQL 注入的影响。您应该至少修改它，如下所示：

```
function addCategory() {
    $name        = mysql_real_escape_string($_GET['categoryName']);
    $description = mysql_real_escape_string($_GET['categoryDescription']);
    $parentId  = mysql_real_escape_string($_GET['hidparentId']);

    $sql   =  "INSERT INTO tbl_category (cat_parent_id, cat_name, cat_description) 
            VALUES ($parentId, '$name', '$description')";
... 
```

有人可以将 SQL 查询的一部分放入任何 $_GET（或 $_POST ......哪个都无所谓）中，并可能让它在您的服务器上执行。`mysql_real_escape_string`是为您提供的一项功能，以确保恶意用户可能进入您的脚本的任何查询部分都不会通过。此处插图：http: [//xkcd.com/327/](http://xkcd.com/327/)

此外，您可能希望使用 PDO 和参数化查询进行查找，因为它们更加安全。

至于用户修改东西并重新提交，您可以通过使用Nonce来防止这种情况。**nonce**是一种安全的东西，它是一个使用**过一次的数字**它至少应该在用户不小心刷新页面的情况下有所帮助。您可以将其视为“请求 id”，一旦“请求 id”被处理，就无法再次处理。

同样，只要您以某种方式验证数据，您将数据放在哪里并不重要。然而，一个限制是某些浏览器（如某些版本的 IE）往往不允许 URL 长度超过 2048 个字符左右。POST 数据通常不受限制（PHP 本身除外），因此如果您计划发送大量数据（如论坛上的帖子），您可能希望使用 POST。如果您发送的数据很少（如推文），您可以使用 GET。此外，不应通过 GET 发送密码，因为用户的浏览器可能会将其保存在其历史记录中，并且您不希望密码在任何地方的历史记录中浮动......

编辑：作为旁注，您不必有两个单独的 URL 来处理您的数据。您可以从 processCategory.php 中删除任何 HTML 部分，在 addCategory.php`require processCategory.php`的顶部使用，而不是执行重定向标头的那一行，将其替换为以下内容：

```
addCategory();
header("Location: someSuccessPage.php"); 
```

这没什么大不了的，但是使用过多的重定向和请求可能会使您的网站速度变慢一点，并且还会导致您的服务器接受比它需要的更多的请求。每次更改 Location 标头时，它都会发送一个 302，这使得用户的浏览器从服务器请求另一个 URL。

# android - 在onPause（）之前调用Android onResume（）？

> ID：14064727
> 
> 赞同：4
> 
> 时间：2012-12-28T04:50:05.373
> 
> 标签：android, android-activity

我对 Android Activity 的生命周期有一个重大疑问。用正常的英语术语来说，一旦你完成了 Pause，Resume 就会完成。但是在 Activity 的生命周期中，甚至在第一次 onPause 之前就已经调用了 OnResume。什么是这背后的原因是什么？

谁能告诉我为什么它的结构是这样的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:36:21.513

在通用英语术语中，Resume 意味着当某事暂停后再次开始交互时，

> 但在 Android 术语中，这意味着当 Activity 处于前台并且用户开始向 Activity 提供输入时。它可能是第一次或什至在暂停后处于前台。onResume() 只是暗示用户已经开始与活动交互。

`onStart()`并且`onResume()`是两个不同的术语。`onStart()`当 Activity 对用户可见时调用。并`onResume()`在活动进入前台并且用户开始与之交互时调用。

我给你举个例子，

假设你有一个带有一些移动对象的活动，这里我将描述在不同阶段执行的操作，

`onStart()-`活动从这里开始，而不是动画。

`onResume()-`在这里，对象开始动画。

`onPause()-`这里的对象停止Animation，Activity仍在运行。

`OnStop-`活动在这里停止。

希望对理解有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T04:53:57.933

参考这张图片：

![活动生命周期](../Images/c2c49d3ee0c16e5d94c3e3a44994fe39.png)

onResume() 将在 onStart() 之后调用。我认为您注意到的是 onResume()。[这](http://docs.xamarin.com/Android/Guides/Application_Fundamentals/Activity_Lifecycle)已经详细描述了活动生命周期：

OnResume：当 Activity 处于暂停状态后将开始与用户交互时调用此方法。**调用此方法时，活动将移动到活动堆栈的顶部，并且正在接收用户输入**。如果活动开始接受用户输入后需要执行任何任务，活动可以覆盖此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T05:02:36.407

您可以查看活动生命周期并确定 Android 的 onPause() 和 onResume() 概念不同。我只回答下面的问题。休息你可以阅读

> 谁能告诉我为什么它的结构是这样的？

从[文档](http://developer.android.com/reference/android/app/Activity.html)

> **onResume()**
> 
> 当 Activity 开始与用户交互时调用。此时，您的活动位于活动堆栈的顶部，用户输入将转到它。始终跟随 onPause()。

这意味着如果你想开始一些事情（比如一个计时器，当这个活动处于焦点并接收用户交互时显示第二个计数），你可以在 onResume() 中启动它。当这个活动成为焦点时，onResume() 是我们的回调。**无论此活动是刚刚创建还是在暂停后恢复，都应该调用它**。

> ya 在 onStart() 之后它很好，但用英语来说，resume 会在暂停后被命名，对吗？为什么它被设计成这样，有什么理由吗？

我认为你不应该在这种情况下采取字面意思。

# mysql - 仅列出与 Rails 3 中的用户相关的问题

> ID：14064732
> 
> 赞同：1
> 
> 时间：2012-12-28T04:50:17.620
> 
> 标签：mysql, ruby-on-rails, activerecord

```
I have the following models: 
```

*   用户
*   民意调查
*   方面
*   问题

    以下关系：

*   用户（has_many）-> 调查

*   调查（has_many）-> 尺寸
*   维度（has_many）-> 问题

    ================================

    我只需要为一个用户列出问题。例如： id = 1 的 USER 是登录名。所以只会列出该用户的问题。

    我尝试使用 INNER JOINS 手动使用 sql，但我做不到。谁能给我一个提示。我也试过 @question.dimension.survey.user_id = @current_user ，但没有成功

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:26:17.770

我决定好了，我不知道这是否是最好的方法（在 app/controllers/question_controller.rb 中）：

```
<% @questions.each do |question| %>
<% if (question.dimension.survey.user_id == @current_user.id) %>
<tr>
<td><%= question.dimension.survey.user.name %></td>
<td><%= question.dimension.survey.title %></td>
<td><%= question.dimension.name %></td>
<td><%= question.question %></td>
<td><%= question.order %></td>
<td><%= question.status %></td>
<td><%= link_to 'Show', question %></td>
<td><%= link_to 'Edit', edit_question_path(question) %></td>
<td><%= link_to 'Destroy', question, method: :delete, data: { confirm: 'Are you sure?' } %>
</td>
</tr>
<% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:57:25.607

下面的查询肯定会起作用。尝试这个。

`@questions = current_user.surveys.map{|d| d.dimensions}.map{|q| q.questions}`
如果你手动给当前用户，你可以像这样
`@questions = User.find(1).surveys.map{|d| d.dimensions}.map{|q| q.questions}`for user id=1

# android - 在 Android 中使用 Google 地图时遇到的问题

> ID：14064735
> 
> 赞同：2
> 
> 时间：2012-12-28T04:51:24.297
> 
> 标签：android, google-maps

我正在开发 android 中的谷歌地图服务。当我在我的 Windows 系统中尝试开发时，我得到了地图 apk 并将其安装在我的设备中。但现在我在 Linux 中开发同样的东西，得到灰色方块而不是地图。我认为这是与 API 密钥相关的问题。因此我尝试了不同的 API 密钥，但没有用。谁能帮我？？

这是我的清单文件

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="a.b.c"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity android:name=".MapsActivity">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>        

    </activity>
    <uses-library android:name="com.google.android.maps" />
    </application>

 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 

 </manifest> 
```

这是我的日志：

12-28 10:45:54.350：D/dalvikvm(303)：GC_FOR_MALLOC 在 971 毫秒内释放了 5018 个对象/307744 个字节 12-28 10:45:54.799：D/dalvikvm(303)：GC_FOR_MALLOC 在 12 毫秒内释放了 9826 个对象/598976 个字节12-28 10:45:55.110：D/dalvikvm(303)：GC_FOR_MALLOC 在 103 毫秒内释放了 5062 个对象/330144 个字节 12-28 10:45:55.420：D/dalvikvm(303)：GC_FOR_MALLOC 在 84 毫秒内释放了 6211 个对象/378792 个字节12-28 10:45:55.799：D/dalvikvm(303)：GC_FOR_MALLOC 在 98 毫秒内释放了 8531 个对象/652136 个字节 12-28 10:45:55.970：D/dalvikvm(303)：GC_FOR_MALLOC 在 50 毫秒内释放了 6098 个对象/370088 个字节12-28 10:45:56.180：I/MapActivity(303)：处理网络更改通知：CONNECTED 12-28 10:45:56.180：E/MapActivity(303)：无法获取连接工厂客户端 12-28 10： 45：59.480：D/dalvikvm（303）：GC_FOR_MALLOC 在 58 毫秒内释放 6029 个对象/539232 个字节 12-28 10：46：02.010：D/dalvikvm（303）：GC_FOR_MALLOC 在 46 毫秒内释放了 1367 个对象/165360 个字节 12-28 10：46：04.510：D/dalvikvm（303）：GC_FOR_MALLOC 在 43 毫秒内释放了 1274 个对象/161632 个字节 12-28 10： 46：06.910：D/dalvikvm（303）：GC_FOR_MALLOC 在 42 毫秒内释放了 1274 个对象/161528 个字节 12-28 10：46：09.360：D/dalvikvm（303）：GC_FOR_MALLOC 在 43 毫秒内释放了 1274 个对象/161600 个字节 12-28 10： 46：11.750：D/dalvikvm（303）：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161528 个字节 12-28 10：46：18.300：D/dalvikvm（303）：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161552 个字节360：D/dalvikvm（303）：GC_FOR_MALLOC 在 43 毫秒内释放了 1274 个对象/161600 个字节 12-28 10:46:11.750：D/dalvikvm（303）：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161528 个字节 12-28 10:46： 18.300：D/dalvikvm(303)：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161552 个字节360：D/dalvikvm（303）：GC_FOR_MALLOC 在 43 毫秒内释放了 1274 个对象/161600 个字节 12-28 10:46:11.750：D/dalvikvm（303）：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161528 个字节 12-28 10:46： 18.300：D/dalvikvm(303)：GC_FOR_MALLOC 在 44 毫秒内释放了 1274 个对象/161552 个字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:08:12.300

这是您编写如下 xml 文件的“apiKey”问题。

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    *android:apiKey="05M-7qOGbEjYduPPUdQgJt9ysL8HToawGdvu_ow*"
/> 
```

不使用 Windows 电脑“apikey”。现在您更改 linux pc 的“apikey”并生成新的 .apk 安装它。可能是你的问题解决了。

检查下面：红色方块的 insted 使用您从 Windows 获得的密钥库路径。

![在此处输入图像描述](../Images/29e551e812977f9419a5a73252279d44.png)

# django - 没有名为模型的模块

> ID：14064737
> 
> 赞同：0
> 
> 时间：2012-12-28T04:51:32.550
> 
> 标签：django

我知道这个错误已经提到论坛中的项目数，我尝试了所有但仍然失败..

案例1：从模型导入Category,Product

错误：无法导入 ecomstore.catalog.views。错误是：没有名为模型的模块

案例2：从ecomstore.catalog.models导入Category,Product

错误：无法导入 ecomstore.catalog.views。错误是：没有名为模型的模块

案例3：从catalog.models导入Category,Product

错误：无法导入 ecomstore.catalog.views。错误是：没有名为模型的模块

文件夹结构：目录 models.py views.py urls.py

模型.py

```
from django.db import models

# Create your models here.

class Category(models.Model): 
     name = models.CharField(max_length=50) 
     slug = models.SlugField(max_length=50, unique=True,
          help_text='Unique value for product page URL, created from name.') 
     description = models.TextField() 
     is_active = models.BooleanField(default=True) 
     meta_keywords = models.CharField("Meta Keywords",max_length=255,
          help_text='Comma-delimited set of SEO keywords for meta tag') 
     meta_description = models.CharField("Meta Description", max_length=255,   
          help_text='Content for description meta tag') 
     created_at = models.DateTimeField(auto_now_add=True) 
     updated_at = models.DateTimeField(auto_now=True) 

     class Meta: 
          db_table = 'categories' 
          ordering = ['-created_at'] 
          verbose_name_plural = 'Categories' 

     def __unicode__(self): 
          return self.name 

     @models.permalink 
     def get_absolute_url(self): 
          return ('catalog_category', (), { 'category_slug': self.slug })

class Product(models.Model): 
     name = models.CharField(max_length=255, unique=True) 
     slug = models.SlugField(max_length=255, unique=True, 
          help_text='Unique value for product page URL, created from name.') 
     brand = models.CharField(max_length=50)  
     sku = models.CharField(max_length=50) 
     price = models.DecimalField(max_digits=9,decimal_places=2)  
     old_price = models.DecimalField(max_digits=9,decimal_places=2,   
          blank=True,default=0.00) 
     image = models.CharField(max_length=50)           
     is_active = models.BooleanField(default=True) 
     is_bestseller = models.BooleanField(default=False) 
     is_featured = models.BooleanField(default=False) 
     quantity = models.IntegerField() 
     description = models.TextField() 
     meta_keywords = models.CharField(max_length=255,   
          help_text='Comma-delimited set of SEO keywords for meta tag') 
     meta_description = models.CharField(max_length=255,   
          help_text='Content for description meta tag') 
     created_at = models.DateTimeField(auto_now_add=True) 
     updated_at = models.DateTimeField(auto_now=True) 
     categories = models.ManyToManyField(Category) 

     class Meta: 
          db_table = 'products' 
          ordering = ['-created_at'] 

     def __unicode__(self): 
          return self.name 

     @models.permalink 
     def get_absolute_url(self): 
          return ('catalog_product', (), { 'product_slug': self.slug }) 

     def sale_price(self): 
          if self.old_price > self.price: 
               return self.price 
          else: 
               return None 
```

视图.py

```
from django.shortcuts import get_object_or_404, render_to_response
from models import Category,Product
from django.template import RequestContext
from django.core import urlresolvers
from django.http import HttpResponseRedirect
from forms import ProductAddToCartForm
from cart import cart

# Create your views here.
print 'prem in catalog views.py'

def index(request,template_name="catalog/index.html"):
     page_title = 'Musical instruments and Sheet Music for Musicians'
     return render_to_response(template_name,locals(),context_instance=RequestContext(request))

def show_category(request,category_slug,template_name="catalog/category.html"):
     c = get_object_or_404(Category,slug=category_slug)
     products = c.product_set.all()
     page_title = c.name
     meta_keywords = c.meta_keywords
     meta_description = c.meta_description
     return render_to_response(template_name,locals(),context_instance=RequestContext(request))

def show_product(request, product_slug, template_name="catalog/product.html"): 
     p = get_object_or_404(Product, slug=product_slug) 
     categories = p.categories.all() 
     page_title = p.name 
     meta_keywords = p.meta_keywords 
     meta_description = p.meta_description 
     # need to evaluate the HTTP method 
     if request.method == 'POST':
          # add to cart create the bound form 
          postdata = request.POST.copy() 
          form = ProductAddToCartForm(request, postdata) 
          #check if posted data is valid 
          if form.is_valid(): 
               #add to cart and redirect to cart page   
               cart.add_to_cart(request) 
               # if test cookie worked, get rid of it 
               if request.session.test_cookie_worked(): 
                    request.session.delete_test_cookie() 
               url = urlresolvers.reverse('show_cart') 
               return HttpResponseRedirect(url) 
     else: 
          # its a GET, create the unbound form.Note request as a kwarg 
          form = ProductAddToCartForm(request=request, label_suffix=':') 
     # assign the hidden input the product slug 
     form.fields['product_slug'].widget.attrs['value'] = product_slug 
     # set the test cookie on our first GET request 
     request.session.set_test_cookie() 
     return render_to_response(template_name, locals(),context_instance=RequestContext(request)) 

ecomstore
          catalog
                 models
                 urls
                 views
          cart
                 models
                 urls
                 views
                 cart 
```

设置网址

# visual-c++ - 如何加快我的 C++ 编译速度？

> ID：14064738
> 
> 赞同：2
> 
> 时间：2012-12-28T04:51:34.293
> 
> 标签：visual-c++

在 Visual C++ 中为我编译一个简单的程序也`cout << "Hello World!";`需要大约 25 秒。在 Code::Blocks 和我尝试过的所有其他 IDE 中也是如此。它曾经很快就在附近。我不知道为什么要花这么长时间。

它也不是我的处理器速度。我有一个 3.7 GHz 的 i7 2600k，所以这应该不是问题。我也有 8GB 的​​内存。

我真的不知道为什么这需要这么长时间。有人可以推荐我一个解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:59:42.500

编译非常受 I/O 限制。如果你有一个旧硬盘，即使是最快的 Core i7 仍然会编译缓慢。

对磁盘进行碎片整理，确保至少有 10-20% 的可用磁盘空间，或者换一个更快的硬盘。SSD 在这方面非常出色。

作为基准，我的视网膜 macbook pro（VM 中的 VS2010）可以在几分钟内编译 100,000+ 行项目（大量使用模板和诸如 boost 之类的东西）。

因为你有很多内存，你可以给自己找一个[RAM 磁盘](http://www.ltr-data.se/opencode.html/#ImDisk)试试看。不要忘记将系统头文件和库重新定位到 ram 磁盘。

# regex - 如何测试正则表达式引擎是否默认贪婪？

> ID：14064739
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:51:53.893
> 
> 标签：regex, regex-greedy

我困了，想不明白，怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:06:11.267

match `aa*`against`aa`看是匹配一个还是两个`a`s？

# iphone - 沿 UIView 左边缘显示渐变

> ID：14064740
> 
> 赞同：1
> 
> 时间：2012-12-28T04:52:16.607
> 
> 标签：iphone, uiview, drawrect, shadow, cagradientlayer

我正在尝试沿 UIView 的侧面绘制阴影，以使其具有 3D 风格的外观。这种变化适用于沿另一个视图底部的垂直渐变，但是我试图实现沿视图**左侧的****水平**渐变。下面是我的尝试。我得到了一种颜色，但是它没有渐变。

 **```
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = CGRectMake(-5, 0, 5, kScreenHeight);
gradient.startPoint = CGPointMake(0, 0.5);
gradient.endPoint = CGPointMake(1.0, 0.5);
gradient.colors = @[(id)[[UIColor wikiShadowColor] CGColor], (id)[[UIColor clearColor] CGColor]];
[self.layer insertSublayer:gradient atIndex:0]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:01:04.490

我已经成功使用了 layer.shadow：

```
[setAlarmView.layer setShadowColor:[UIColor blackColor].CGColor];
[setAlarmView.layer setShadowOffset:CGSizeMake(2.0, 2.0)];
[setAlarmView.layer setShadowRadius:35.0];
[setAlarmView.layer setShadowOpacity:1.0]; 
```

您将需要包含 QuartzCore.h。**

# android - 在android中滑动列表视图

> ID：14064743
> 
> 赞同：1
> 
> 时间：2012-12-28T04:52:40.710
> 
> 标签：android, listview, swipe

如何向右滑动 1-2 列表视图 2-3 列表视图右侧以及 1-2 左侧 2-3 左侧

![在此处输入图像描述](../Images/b9bd4efa2423b17516cbd125cd410fec.png)

我是 android 新手，我想向右滑动 1-2 列表视图 2-3 列表视图右侧以及 1-2 左侧 2-3 左侧，

我怎样才能做到这一点？

提前致谢。

这是我的代码

公共无效 onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.inspire);

    Context contex;

    activity = this;

    rowItems = fetchTwitterPublicTimeline();
    rowItems1 = fetchTwitterPublicTimeline1();
    rowItems2 = fetchTwitterPublicTimeline2();

    btn1 = (Button) findViewById(R.id.button1);
    btn2 = (Button) findViewById(R.id.button2);
    btn3 = (Button) findViewById(R.id.button3);

    TextView txtDesc = (TextView) findViewById(R.id.desc);
    TextView txtTitle = (TextView) findViewById(R.id.title);
    ImageView imageView = (ImageView) findViewById(R.id.icon);

    final ListView listView = (ListView) findViewById(R.id.listview);
    adapter = new InspireAdapter(this, R.layout.row, rowItems);
    listView.setAdapter(adapter);

    OnItemClickListener listener = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                final int position, long id) {

        }
    };

    listView.setOnItemClickListener(listener);

    final ListView listView1 = (ListView) findViewById(R.id.listview1);
    adapter1 = new InspireAdapter1(this, R.layout.row1, rowItems1);

    // listView1.setAdapter(adapter1);

    OnItemClickListener listener1 = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    };
    listView1.setOnItemClickListener(listener1);

    final ListView listView2 = (ListView) findViewById(R.id.listview2);
    adapter2 = new InspireAdapter2(this, R.layout.row2, rowItems2);

    // listView2.setAdapter(adapter2);

    OnItemClickListener listener2 = new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    };
    listView2.setOnItemClickListener(listener2);

    btn1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            listView1.setVisibility(View.GONE);
            listView.setVisibility(View.VISIBLE);
            listView2.setVisibility(View.GONE);

            btn1.setTextColor(Color.BLACK);
            btn2.setTextColor(Color.WHITE);
            btn3.setTextColor(Color.WHITE);

        }
    });

    btn2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            listView.setVisibility(View.GONE);
            listView1.setVisibility(View.VISIBLE);
            listView2.setVisibility(View.GONE);

            listView1.setAdapter(adapter1);

            btn2.setTextColor(Color.BLACK);
            btn1.setTextColor(Color.WHITE);
            btn3.setTextColor(Color.WHITE);
        }
    });

    btn3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            listView2.setVisibility(View.VISIBLE);
            listView1.setVisibility(View.GONE);
            listView.setVisibility(View.GONE);

            listView2.setAdapter(adapter2);

            btn3.setTextColor(Color.BLACK);
            btn1.setTextColor(Color.WHITE);
            btn2.setTextColor(Color.WHITE);

        }
    });
}

public ArrayList<rowitem> fetchTwitterPublicTimeline() {
    ArrayList<rowitem> listItems = new ArrayList<rowitem>();

    try {
        URL twitter = new URL(
                "http://jaihoon.com/app-admin/API/getInspire.php?appKey=86fb269d190d2c85f6e0468ceca42a20&type=poem");
        URLConnection tc = twitter.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream()));

        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = in.readLine()) != null) {
            sb.append(line + "\n");
        }
        line = sb.toString();
        JSONObject ja = new JSONObject(line);
        JSONArray ja1 = ja.getJSONArray("AllInspires");

        for (int i = 0; i < ja1.length(); i++) {
            JSONObject jo = (JSONObject) ja1.get(i);
            rowitem r = new rowitem();

            String inspiresum = null;
            String inspititle = null;
            String inspiimage = null;
            String inspitype = null;
            String inspitext = null;

            // inspitype = ja1.getJSONObject(i).getString("inspiretype");
            // r.setInspiretype(inspitype);

            inspiresum = ja1.getJSONObject(i).getString("inspiresummary");
            r.setInspiresummary(inspiresum);

            inspititle = ja1.getJSONObject(i).getString("inspiretitle");
            r.setInspiretitle(inspititle);

            inspiimage = ja1.getJSONObject(i).getString("inspireimage");
            r.setInspireimage(inspiimage);

            inspitext = ja1.getJSONObject(i).getString("inspiretext");
            r.setInspiretext(inspitext);

            listItems.add(r);

        }

    } catch (MalformedURLException e) {
        Log.e("dhrumil", "MalformedURLException" + e.getMessage());
    } catch (IOException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "IOException" + e.getMessage()); // e.printStackTrace();
    } catch (JSONException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "JSONException " + e.getMessage());
    }
    return listItems;

}

public ArrayList<rowitem> fetchTwitterPublicTimeline1() {
    ArrayList<rowitem> listItems = new ArrayList<rowitem>();

    try {
        URL twitter = new URL(
                "http://jaihoon.com/app-admin/API/getInspire.php?appKey=86fb269d190d2c85f6e0468ceca42a20&type=essay");
        URLConnection tc = twitter.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream()));

        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = in.readLine()) != null) {
            sb.append(line + "\n");
        }
        line = sb.toString();
        JSONObject ja = new JSONObject(line);
        JSONArray ja1 = ja.getJSONArray("AllInspires");

        for (int i = 0; i < ja1.length(); i++) {
            JSONObject jo = (JSONObject) ja1.get(i);
            rowitem r = new rowitem();
            String inspiresum = null;
            String inspititle = null;
            String inspiimage = null;

            inspiresum = ja1.getJSONObject(i).getString("inspiresummary");
            r.setInspiresummary(inspiresum);

            inspititle = ja1.getJSONObject(i).getString("inspiretitle");
            r.setInspiretitle(inspititle);

            inspiimage = ja1.getJSONObject(i).getString("inspireimage");
            r.setInspireimage(inspiimage);

            listItems.add(r);

        }

    } catch (MalformedURLException e) {
        Log.e("dhrumil", "MalformedURLException" + e.getMessage());
    } catch (IOException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "IOException" + e.getMessage()); // e.printStackTrace();
    } catch (JSONException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "JSONException " + e.getMessage());
    }
    return listItems;

}

public ArrayList<rowitem> fetchTwitterPublicTimeline2() {
    ArrayList<rowitem> listItems = new ArrayList<rowitem>();

    try {
        URL twitter = new URL(
                "http://jaihoon.com/app-admin/API/getInspire.php?appKey=86fb269d190d2c85f6e0468ceca42a20&type=tweet");
        URLConnection tc = twitter.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(
                tc.getInputStream()));

        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = in.readLine()) != null) {
            sb.append(line + "\n");
        }
        line = sb.toString();
        JSONObject ja = new JSONObject(line);
        JSONArray ja1 = ja.getJSONArray("AllInspires");

        for (int i = 0; i < ja1.length(); i++) {
            JSONObject jo = (JSONObject) ja1.get(i);
            rowitem r = new rowitem();
            String inspiresum = null;
            String inspititle = null;
            String inspiimage = null;

            inspiresum = ja1.getJSONObject(i).getString("inspiresummary");
            r.setInspiresummary(inspiresum);

            inspititle = ja1.getJSONObject(i).getString("inspiretitle");
            r.setInspiretitle(inspititle);

            inspiimage = ja1.getJSONObject(i).getString("inspireimage");
            r.setInspireimage(inspiimage);

            listItems.add(r);

        }

    } catch (MalformedURLException e) {
        Log.e("dhrumil", "MalformedURLException" + e.getMessage());
    } catch (IOException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "IOException" + e.getMessage()); // e.printStackTrace();
    } catch (JSONException e) { // TODO Auto-generated catch block
        Log.e("dhrumil", "JSONException " + e.getMessage());
    }
    return listItems;

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:57:17.750

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)，检查一下。演示项目也可以从 google play 下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:43:51.633

它很容易。在 android 最新版本中，Android 提供了一种创建项目滑动屏幕的方法。了解**我们如何创建滑动导航及其具有向后兼容性**

![在此处输入图像描述](../Images/a4500e58a28626d7ff3103f51fabf09e.png)

# php - 美德玛特订单完成时的插件调用

> ID：14064744
> 
> 赞同：-1
> 
> 时间：2012-12-28T04:52:44.127
> 
> 标签：php, joomla, joomla2.5

我创建了一个新组件，为此我希望在美德玛特完成订单时使用美德玛特订单 ID。

我的组件和美德玛特组件是不同的，所以我认为需要创建插件。但我不想在 mercurial 组件中编写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:39:46.337

如果您想创建一个也需要从 VM 文件调用的插件。下订单时，VM 调用 Order.php 模型文件和购物车 helper.php

所以你应该调用你的组件或插件调用函数，该代码应该在上述任何页面中。

有关更多详细信息，您可以查看 VM 提供的付款或发货插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T12:15:31.543

我认为这个扩展会对你有所帮助，但这与 vtiger 集成有关

[点击这里](http://extensions.joomla.org/extensions/clients-a-communities/crm-bridges/21208)

# magento - 如何在magento中注入新块

> ID：14064747
> 
> 赞同：0
> 
> 时间：2012-12-28T04:53:47.057
> 
> 标签：magento, magento-1.7

我正在开发自定义模块，并尝试在加载期间将我的自定义模块块代码嵌入到 cms 块中。我的块代码是：

```
{{block type="module/block_name" categories="2,4,3" template="catalog/product/list.phtml" }} 
```

这在 cms 块页面上运行。但我试图在运行时嵌入块代码。为此，我创建了一个事件

```
 <events>
     <controller_action_layout_generate_blocks_before>
          <observers>
              <mypage>
                       <type>singleton</type>
                       <class>Module_Model_Observer</class>
                       <method>addlisttocms</method>
                </mypage>
         </observers>
     </controller_action_layout_generate_blocks_before>
</events> 
```

在观察者上，我创建函数：

```
public function addlisttocms(Varien_Event_Observer $observer)
    {
     $controller = Mage::app()->getRequest()->getControllerName();
     $layout = Mage::app()->getRequest()->getRouteName();
     $var = Mage::app()->getRequest()->getActionName();
     $page =  Mage::app()->getRequest()->getParam('page_id');
} 
```

现在我希望当 cms 页面加载时，我使用上述函数嵌入我的块。是否可以 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:06:38.880

使用布局 XML 或自定义小部件来执行此操作。

自定义模块布局 XML 文件：

```
<cms_page_view>
    <block name="some.block" type="module/block_name" parent="content" template="catalog/product/list.phtml">
        <action method="setCategories">
            <ids>2,3,4</ids>
        </action>
    </block>
</cms_page_view> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T07:43:35.950

我将 answer.change 事件更改为 'controller_action_layout_generate_xml_before' 并在观察者中注入代码

```
 $layout = $observer->getLayout();
 $layout->getUpdate()->addUpdate('<reference name="content"> 
    <block name="mymodule" type="mymodule/blockname"  template="catalog/product/list.phtml">
        <action method="setCategories">
            <ids>2,3,4</ids>
        </action>
    </block>
</reference>');
$layout->generateXml();. 
```

为参考检查[网站](http://prattski.com/2012/04/25/magento-more-flexibility-for-your-layout-updates/)。

# codeigniter - phil sturgeon 的 codeigniter 休息库

> ID：14064748
> 
> 赞同：0
> 
> 时间：2012-12-28T04:53:54.417
> 
> 标签：codeigniter

**Phil Sturgeon 的 codeigniter REST 服务器与您从****codeigniter**站点下载的普通**codeigniter**有什么区别？

 **什么新文件被添加到休息服务器？

如果我已经准备好 codeigniter 中的代码，我需要从 codeigniter 休息服务器导入哪些文件到我安装的 codeigniter 以及需要哪些更改？

我的猜测是只有这两个文件需要从 phil sturgeon 的 rest 服务器导入到我的 codeigniter 中。

```
application/libraries/Format.php
application/libraries/REST_Controller.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:37:52.063

您可以查看[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)以获得更好的理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T12:32:59.123

您还需要 config/rest.php 文件。**

# asp.net - 如何在 asp.net 中为 Web 服务方法返回 xml 文件

> ID：14064752
> 
> 赞同：1
> 
> 时间：2012-12-28T04:54:01.413
> 
> 标签：asp.net, asmx

我想返回一个 XML 文件作为 asp.net 中 Web 服务方法的输出。谁能帮忙举个例子。

这是我做的网络服务方法。但是当我调用“Hai”方法时，我得到一个错误。我得到的错误如下：

**XML Document(1,287) 中存在错误**。

```
[WebMethod]
public XElement hai()
{
    try
    {

        XElement xmlTree1 = new XElement("Root",
                            new XElement("Child1", 1),
                            new XElement("Child2", 2),
                            new XElement("Child3", 3),
                            new XElement("Child4", 4),
                            new XElement("Child5", 5),
                            new XElement("Child6", 6)
        );

        return xmlTree1;
    }
    catch
    {
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T19:48:09.510

或者，您可以返回`XmlDocument`：

```
[WebMethod]
public XmlDocument hai()
{
        XmlDocument doc = new XmlDocument();

        XmlNode rootNode = doc.CreateElement("products");
        doc.AppendChild(rootNode);

        XmlNode product1Node = doc.CreateElement("product");
        rootNode.AppendChild(product1Node);

        XmlNode product1NameNode = doc.CreateElement("Name");
        product1NameNode.InnerText = "Product 1";
        product1Node.AppendChild(product1NameNode);
        XmlNode product1ColorNode = doc.CreateElement("Color");
        product1ColorNode.InnerText = "Blue";
        product1Node.AppendChild(product1ColorNode);

        XmlNode product2Node = doc.CreateElement("product");
        rootNode.AppendChild(product2Node);

        XmlNode product2NameNode = doc.CreateElement("Name");
        product2NameNode.InnerText = "Product 2";
        product2Node.AppendChild(product2NameNode);
        XmlNode product2ColorNode = doc.CreateElement("Color");
        product2ColorNode.InnerText = "Yellow";
        product2Node.AppendChild(product2ColorNode);

        return doc;
} 
```

**输出：**

```
<?xml version="1.0" encoding="UTF-8"?>
<products>
    <product>
        <Name>Product 1</Name>
        <Color>Blue</Color>
    </product>
    <product>
        <Name>Product 2</Name>
        <Color>Yellow</Color>
    </product>
</products> 
```

# playframework - [play framework 1.2.5]'play start'不能正常工作（windows XP）

> ID：14064759
> 
> 赞同：2
> 
> 时间：2012-12-28T04:55:36.830
> 
> 标签：playframework, production-environment, self-hosting

当我在生产模式下使用以下命令启动我的播放应用程序时。

`play start 'path to application' -Dprecompiled=true`

以下输出出现在命令提示符下：-

```
C:\Documents and Settings\328982>play start C:\328982\RCM\RCMComm\branches\Code\
WorkingCopy\RCMCommercial -Dprecompiled=true
~        _            _
~  _ __ | | __ _ _  _| |
~ | '_ \| |/ _' | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/
~
~ play! 1.2.5, http://www.playframework.org
~ framework ID is prod
~
~ OK, C:\328982\RCM\RCMComm\branches\Code\WorkingCopy\RCMCommercial is started
~ output is redirected to C:\328982\RCM\RCMComm\branches\Code\WorkingCopy\RCMCom
mercial\logs\system.out
~ pid is 4244
~ 
```

但是当我关闭命令提示符时，应用程序也会停止。

请指导我如何在内置服务器 jboss netty 上以生产模式托管播放应用程序 [版本 1.2.5]。

问候， Uttmesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T02:18:40.300

你检查过输出（logs/system.out）吗？我的猜测是，因为您在生产模式下运行，它试图绑定到端口 80，除非您以管理员身份运行 play，否则您无法绑定到端口。

# facebook - Woocommerce 硬编码 Facebook 按钮出现两次

> ID：14064766
> 
> 赞同：0
> 
> 时间：2012-12-28T04:56:51.027
> 
> 标签：facebook, facebook-like

我们想为我们网站上的一件或多件商品添加多种产品尺寸，并在 woocommerce 插件上运行。

选择产品尺寸后，“添加到购物车”按钮下方会显示一个类似 Facebook 的按钮。

在每个页面上，Facebook 的赞按钮都显示得很好，除了那些您可以选择多种尺寸的产品。然后like按钮出现两次。

我没有建立站点，但在 functions.php 文件中找到了类似 FB 的按钮的硬编码部分。我把它包括在这里。是否可能缺少一些代码以防止在所述实例中重复？

这是网站上的页面：http: [//www.hottot.com/shop/shampoo/](http://www.hottot.com/shop/shampoo/)

这是 pastebin 的代码：http: [//pastebin.com/MYh0SHWG](http://pastebin.com/MYh0SHWG)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:04:08.150

问题是你们正在使用的脚本已经添加了一个 facebook 按钮

```
 function nme_wc_after_add_to_cart_button() {
        echo '<div id="fb-root"></div>
        <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d . getElementById(id))
            return;
        js = d . createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
        fjs . parentNode . insertBefore(js, fjs);
    }

        (document, "script", "facebook-jssdk"));</script>

    <div class="fb-like" style="float:left; margin-top:12px;" data-href="https://www.facebook.com/HotTotHaircare" data-send="false" data-width="250" data-show-faces="true"></div>'; 
```

首先你回显回声`'<div id="fb-root"></div>`接下来你添加

```
<div class="fb-like" style="float:left; margin-top:12px;" data-href="https://www.facebook.com/HotTotHaircare" data-send="false" data-width="250" data-show-faces="true"></div>'; 
```

所以 2 我认为你生成了 2 个按钮

# android - 如何调试错误“您的项目包含错误，请在在 android 中运行您的应用程序之前修复它们”

> ID：14064768
> 
> 赞同：1
> 
> 时间：2012-12-28T04:57:00.007
> 
> 标签：android, eclipse, android-emulator, android-ndk

我刚刚开始在 android 平台上工作。我安装了 eclipse 和 android sdk。现在我想运行一个基本的 hello world 应用程序。我只是按照教程并尝试运行它但收到以下错误 **您的项目包含错误请在运行您的应用程序之前修复它们** 我如何调试它并在模拟器上运行应用程序请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:44:51.433

有两个可能的问题。

因为代码

因为 R.java

检查您的项目是否有任何包上的任何红色标记，如果有任何红色标记检查该类是否存在编译错误，这可能是由于语法错误而发生的，

或者如果您无法在代码中找到 R.java，请检查您的 RES 文件夹是否有任何可能的错误。

如果您找不到任何此类错误，请从 Project-->Clean(Select your project)-->Build Your project 清理并构建您的项目。

如果您使用任何外部 jar 文件，请将它们添加到构建路径中。右键单击项目->构建路径->配置构建路径->库->添加外部jar->订购它们

检查清单文件中项目的最小版本和最大版本，您使用的项目版本。

如果您仍然无法编译，请在此处发布您的代码，我们将为您编译:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T04:56:19.867

我不得不删除 .android 文件夹中存在的 debug.keystore 文件，并且不得不重新启动 eclipse.that 解决了我的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T05:43:48.090

1.  如果您刚刚安装了 Eclipse，最常用的解决方案可能是重新启动 Eclipse。

2.  如果它仍然不起作用，那么您的`res`文件夹可能有问题，请检查 -

    *   `layout`,`Drawable`文件夹和其他`res`子文件夹中不应有重复文件。
    *   文件夹中的名称`res`不应 s= 包含大写字母。
3.  删除，如果有的话 import android.R;

另外，看看这个答案，[R.java notsolved error](https://stackoverflow.com/a/14051970/1626878)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T05:11:56.227

基本上，当您的项目未正确编译时会发生此错误。几个快速的解决方案 1\. 清理您的项目并从项目构建 --> 清理和项目 --> 构建 2\. 检查项目的 Java 编译器设置。确保您的目标是正确的 JDK。3.检查项目的Android版本。(ie) 您的 Android SDK 应该具有编译和构建 apk 所需的 android 版本。

试试以上三个。你的问题应该得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T05:54:03.010

执行此步骤：

1.`Right click`你的项目，然后`Android tools`选择`"FIx Project properties"`。

2.现在`Clean`的项目..我认为这会对你有所帮助..让我们尝试一下并说..

# regex - ant - 使用正则表达式将字符串标记为子字符串

> ID：14064769
> 
> 赞同：0
> 
> 时间：2012-12-28T04:57:01.560
> 
> 标签：regex, string, ant, split, tokenize

我有一个格式的输入字符串`abc;def;ghi;jkl;........`等等。允许的最小输入字符串是`abc`，而最大令牌数没有限制。此外，每个令牌的长度不固定为 3。它可以是任意数量的字符。

例如，`america;russia;uae`也是一个可接受的输入

我想取出前三个标记并从中制作单独的属性。如果少于 3 个，那么这些相应的标记应该是`NULL`.

到目前为止，我已经尝试了很多正则表达式（我不习惯）

`${testprop}`包含输入字符串。

我正在使用以下命令

`propertyregex property="testprop1" input="${testprop}" regexp="(.*)(\;.*)*/" select="\1"`

但它不工作。任何关于更好正则表达式的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:51:26.233

使用此正则表达式来减少获取前 3 个字符（如果存在）。

`/(?i)\b([\w]{3}(?=[\w]*;))/`

[在这里验证](http://www.regex101.com/r/nF0gX1)

使用此正则表达式获取值小于 3 个字符的字符串。

`/(?i)\b([\w]{1,2}(?=;))/`

[在这里验证](http://www.regex101.com/r/kW3vA5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T04:28:22.037

谢谢大家。我终于想出了答案。

使用以下正则表达式，
`([^;]+)([;]?[^;]*)([;]?)([;]?[^;]*)([;]?)`

`1`我们可以分别得到 groups和`2`中的前 3 个字符串标记`4`。但是该组`2`带有一个前置`;`，可以通过应用`\;(.*)`和提取来进一步删除 group `1`。

`property name="inputString" value="russia;uae;germany;africa;"`

`propertyregex property="string1" input="${inputString}" regexp="([^;]+)([;]?[^;]*)([;]?)([;]?[^;]*)([;]?)" select="\1"`

`propertyregex property="string2" input="${inputString}" regexp="([^;]+)([;]?[^;]*)([;]?)([;]?[^;]*)([;]?)" select="\2"`

`propertyregex property="string3" input="${string2}" regexp="\;(.*)" select="\1"`

`propertyregex property="string4" input="${inputString}" regexp="([^;]+)([;]?[^;]*)([;]?)([;]?[^;]*)([;]?)" select="\4"`

这为您提供了 string1、string3 和 string4 中所需的前三个标记

`string1 = russia`

`string3 = uae`

`string4 = germany`

# objective-c - 如何在 iOS 中存储 GPS 坐标？

> ID：14064770
> 
> 赞同：1
> 
> 时间：2012-12-28T04:57:11.277
> 
> 标签：objective-c, ios, gps, coordinate

我有一些兴趣点，想对它们进行硬编码，但在 Objective-c 中似乎没有一个干净的工具可以做到这一点。

我想将两个数字关联到一个字符串：@"cool spot", 37.77794,-122.41933

我是否需要 NSStrings 的 NSDictionary 并将每个浮点数转换为字符串？对所有这些进行分组似乎开销太大？我应该做一个c-struct吗？这种情况已经出现了很多，但想不出一个干净的解决方案可能是什么。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T05:53:43.590

你打算如何存储它？如果您使用的是 core-data 之类的东西，那么最简单的选择是使用 2 个单独的数字来表示经度和纬度，然后在访问数据时简单地创建一个坐标（汤姆提到的 CLLocationCoordinate2D）

它非常依赖于您的存储方法，因为 iOS 仅允许为不同的方法保存某些类型的对象。

如果您实际上没有将它存储到文件中而只是在内存中使用它，那么正如汤姆所说，像 CLLocationCoordinate2D 这样的东西会起作用，它是一个结构而不是一个对象。如果您想要一个实际的对象，请使用 CLLocation，它在内部包含一个 CLLocationCoordinate2D 对象。

您可以使用以下命令创建 CLLocationCoordinate2D 对象：

```
CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(latitude, longitude); 
```

或者，如果您需要对象包装器，则使用以下命令创建一个 CLLocation 对象：

```
CLLocation *loc = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T04:58:48.473

看看`CLLocationCoordinate2D`（[CLLocationCoordinate2D - Apple Developer Docs](http://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html)），它有一个`latitude`字段和一个`longitude`字段。

# c# - 尝试捕获异常

> ID：14064785
> 
> 赞同：2
> 
> 时间：2012-12-28T04:59:15.380
> 
> 标签：c#, .net, exception-handling

我们在方法中经常使用try catch语句，如果方法可以返回一个值，但该值不是字符串，如何返回异常信息？例如：

```
public int GetFile(string path)
{
    int i;
    try
    {
        //...
        return i;
    }
    catch (Exception ex)
    { 
        // How to return the ex?
        // If the return type is a custom class, how to deal with it?
    }
 } 
```

如何返回异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:01:57.123

如果你想在 catch 块中做一些有用的事情，比如记录异常，你可以`remove`尝试 catch 块`throw`从 catch 块中抛出异常或异常。如果您想从您的方法发送异常消息并且**不想抛出异常**，那么您可以使用**[out](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)**字符串变量来保存调用方法的异常消息。

```
public int GetFile(string path, out string error)
{
    error = string.Empty.
    int i;
    try
    {
        //...
        return i;
    }
    catch(Exception ex)
    { 
        error = ex.Message;
        // How to return the ex?
        // If the return type is a custom class, how to deal with it?
    }
 } 
```

如何调用方法。

```
string error = string.Empty;
GetFile("yourpath", out error); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T05:06:18.073

如果您只是想抛出任何异常，请删除 try/catch 块。

如果你想处理特定的异常，你有两个选择

1.  只处理那些异常。

    ```
    try
    {
        //...
        return i;
    }
    catch(IOException iex)
    { 

        // do something
       throw;
    }
    catch(PathTooLongException pex)
    { 

        // do something
       throw;
    } 
    ```

2.  在通用处理程序中为某些类型做一些事情

    ```
    try
    {
        //...
        return i;
    }
    catch(Exception ex)
    { 
         if (ex is IOException) 
         { 
         // do something
         }
         if (ex is PathTooLongException) 
         { 
          // do something 

         }
         throw;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:12:50.910

您可以直接抛出异常，并从调用方法或事件中捕获该异常。

```
public int GetFile(string path)
{
        int i;
        try
        {
            //...
            return i;
        }
        catch (Exception ex)
        { 
            throw ex;
        }
} 
```

并在这样的调用方法中捕获它......

```
public void callGetFile()
{
      try
      {
           int result = GetFile("your file path");
      }
      catch(exception ex)
      {
           //Catch your thrown excetion here
      }
} 
```

# backbone.js - 如何定义在 URL 中具有附加参数的 BackboneJS 模型和集合？

> ID：14064787
> 
> 赞同：1
> 
> 时间：2012-12-28T04:59:20.997
> 
> 标签：backbone.js

我有一个模型（它是相应的集合），它有一个带有附加参数的 URL。例如，帖子的 URL`collection`类似于：

```
/rest-api/posts/2/comments/ 
```

对于特定的评论，URL 类似于：

```
/rest-api/posts/2/comments/3/ 
```

定义和实例化评论集合和模型的最佳模式是什么？

我目前正在这样做：

```
var Comment = Backbone.Model.extend({
    url: function () {
        var base = '/rest-api/posts/' + this.get('post_id') + '/comments/';
        if (this.isNew()) { return base; }
        return base + this.id + '/';
    },
    // ...
});

var CommentsCollection = Backbone.Collection.extend({
    model: Comment,
    url: function () {
        return '/rest-api/posts/' + this.post_id + '/comments/';
    },
    initialize: function (options) {
         this.post_id = options.post_id;
    },
    // ...
}); 
```

并像这样实例化集合：

```
CommentsList = new CommentsCollection({ post_id: current_post_id }); 
```

这是`accepted`在 Backbone.js 中执行此操作的模式吗？我正在向自己介绍这个新框架，我只是想以一种可读和可维护的方式对其进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T11:12:29.683

您不需要`url`在模型中定义，因为 Backbone 会自动将 id 附加到 Collection url：[http ://backbonejs.org/#Model-url](http://backbonejs.org/#Model-url)

关于集合 url，我认为这是获取 url 的一种完全有效的方法。

或者，但会增加复杂性，您可以将 Comments Collection 添加为 Post 模型的属性，并在需要时初始化或获取它。这样，如果您愿意，您可以`parent`在 Collection 上添加一个属性并引用该属性以获取基本 url 并附加`/comments`部分（如果帖子 url 发生更改，这应该避免在两个地方更改内容）。

最终，选择取决于您愿意处理的复杂程度。

# vb.net - 带有 Linq 错误的自定义 Datagridview

> ID：14064789
> 
> 赞同：0
> 
> 时间：2012-12-28T04:59:36.793
> 
> 标签：vb.net

我正在为 datagridview 开发高级搜索和过滤器控件。我放了一些代码来搜索整个数据网格列和任何值，但它给出了一些错误：

```
Public ReadOnly Property Count As Integer' has no parameters and its return type cannot be indexed 
```

代码 ：

```
Private Sub _filters_CollectionChanged(ByVal sender As Object, ByVal e As System.Collections.Specialized.NotifyCollectionChangedEventArgs)
        'Indicates whether the collection really changed
        Dim changed As Boolean = True

        'If a new element is added
        If e.Action = System.Collections.Specialized.NotifyCollectionChangedAction.Add Then
            For Each fi As FilterItem In e.NewItems

                'If the collection already contains this FilterItem

 '***********************************************************************************
                If _filters.Count((Function(x) x.Equals(fi))) > 1 Then 'Error Line here
 '************************************************************************************
                    SyncLock syncroot
                        'Disable the eventhandler while removing the item
                        RemoveHandler _filters.CollectionChanged, AddressOf _filters_CollectionChanged
                        'Remove the newly added FilterItem from the collection
                        _filters.RemoveAt(e.NewItems.IndexOf(fi))
                        'Enable the eventhandler
                        AddHandler _filters.CollectionChanged, AddressOf _filters_CollectionChanged
                        'The collection actually didn't change, there's no need to refilter
                        changed = False
                    End SyncLock
                Else
                    'subscribe to its event, so filtering will be done automatically every time when the filter changes
                    AddHandler fi.FilterChanged, AddressOf Filter
                End If
            Next
            'If the filter is removed
        ElseIf e.Action = System.Collections.Specialized.NotifyCollectionChangedAction.Remove Then
            For Each fi As FilterItem In e.OldItems
                'unsubscribe from its event
                RemoveHandler fi.FilterChanged, AddressOf Filter
            Next
        End If

        'Finally filter the list
        If changed Then
            Filter()
        End If
    End Sub 
```

# java - 在java中调用字符串值到URL

> ID：14064791
> 
> 赞同：0
> 
> 时间：2012-12-28T04:59:48.710
> 
> 标签：java, string, url, key-value

我已经开发了一个 android 应用程序。

在这里，我必须将字符串值传递给 url。请告诉我如何将字符串值传递给 url。给我解决方案。

```
 String mTitle;

           String URL = "http://api1.sfsfsfffsf.com/dev/categories/?fields=&categoryid="+mTitle+"&access_token=bfb787a6e1";
          static String KEY_CATEGORY = "category";
// public static final String URL_Address=null;
        static final String KEY_TITLE = "categoryName";
        static final String KEY_NAME ="categoryId";
          static final String KEY_SUBCATE = "categoryId";
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.subcate);
    Bundle b = getIntent().getExtras();
 mTitle = b.getString(KEY_SUBCATE);
 TextView grandtotal = (TextView) findViewById(R.id.subcate);
   grandtotal.setText("Welcome ," + mTitle ); 
```

这是我的网址：[http://api1.sfsfsfsff.com/dev/categories/?fields=&categoryid=10&access_token=bfb787a6e1112][1]

我已经直接提到**categoryid=10**表示已显示所有产品。

但我必须更改此网址，例如：[http://api1.sfsfsfsfsf.com/dev/categories/?fields=&categoryid="+mTitle+"&access_token=bfb787a6e1112][2]

Nw 我已经更改了我的 url，比如**categoryid="+mTitle+"**意味着不显示所有产品。

mTitle 价值来自我以前的活动。

我的代码有什么问题。

**编辑**：

我的 mTitle 值是 10。我必须像手段一样编写代码

**grandtotal.setText("欢迎 ," + mTitle );**

其显示的 mTitle 值成功。

**grandtotal.setText("欢迎 ," + URL );**

意味着给了我空值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T07:31:07.157

你的代码

```
String mTitle;

           String URL = "http://api1.sfsfsffsf.com/dev/categories/?fields=&categoryid=" + mTitle + "&access_token=bfb787a";
          static String KEY_CATEGORY = "category";
// public static final String URL_Address=null;
        static final String KEY_TITLE = "categoryName";
        static final String KEY_NAME ="categoryId";
          static final String KEY_SUBCATE = "categoryId";
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.subcate);
    Bundle b = getIntent().getExtras();
 mTitle = b.getString(KEY_SUBCATE);
 TextView grandtotal = (TextView) findViewById(R.id.subcate);
   grandtotal.setText("Welcome ," + mTitle ); 
```

错误：

```
 String URL = "http://api1.sfsfsffsf.com/dev/categories/?fields=&categoryid=" + mTitle + "&access_token=bfb787a"; 
```

正确代码：

```
String mTitle;

               String URL;
              static String KEY_CATEGORY = "category";
    // public static final String URL_Address=null;
            static final String KEY_TITLE = "categoryName";
            static final String KEY_NAME ="categoryId";
              static final String KEY_SUBCATE = "categoryId";
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.subcate);
        Bundle b = getIntent().getExtras();
     mTitle = b.getString(KEY_SUBCATE);

     URL = "http://api1.sfsfsffsf.com/dev/categories/?fields=&categoryid=" + mTitle +       "&access_token=bfb787a";
 TextView grandtotal = (TextView) findViewById(R.id.subcate);
   grandtotal.setText("Welcome ," + mTitle ); 
```

您的 mTitle 之后会被初始化，因此您只需要在此之后初始化 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:20:13.950

将您的网址作为字符串传递：-

```
String mTitle;
mTitle = b.getString(KEY_SUBCATE);
TextView grandtotal = (TextView) findViewById(R.id.subcate);  
String url="http://api1.sfsfsffsf.com/dev/categories/?   fields=&categoryid="+mTitle+"&access_token=";
grandtotal.setText(url); 
```

# html - 像 Pinterest 一样渲染照片

> ID：14064792
> 
> 赞同：1
> 
> 时间：2012-12-28T04:59:52.067
> 
> 标签：html, css, image, pinterest

现在，图片在我的 Ruby on Rails 应用程序上是这样渲染的。

![在此处输入图像描述](../Images/e23ee5ea3d0703602678b80dc869f99e.png)

图片基于一个表格，每行有五个单元格，每个单元格都有指定的填充，如上所示。正如你所看到的，这看起来有点尴尬，我想让它看起来像下面（来自 Pinterest） ![在此处输入图像描述](../Images/2948325c5bd2b068748f529abb5eac8e.png)

布局不必完全相同，但您明白这一点。我希望每张图片之间的填充调整得很好。通过浏览 Stackoverflow，我了解到使用[Masonry](http://masonry.desandro.com/index.html)可能是完美的解决方案，但我想知道是否还有其他选择，因为我想尽可能避免在我的应用程序中使用 jquery。

**更新：**

```
<div id="user_posts">
    <table>
    <% @posts.in_groups_of(5).each do |post_array| %>
        <tr>
        <% post_array.each do |post| %>
            <% unless post.blank? %>
            <td class="user_post_space"><%= link_to image_tag(post.image_url(:thumb), :class => "img-polaroid"), post %></td>
            <% end %>
        <% end %>
        </tr>
    <% end %>
    </table>
</div> 
```

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T05:35:13.903

我认为使用 Jquery Masonry 插件它会使布局像 pinterest

```
http://masonry.desandro.com/ 
```

# eclipse - 如何在 Groovy 控制台（GroovyStarter）和 GGTS/Eclipse 控制台中输出和显示 Unicode

> ID：14064793
> 
> 赞同：2
> 
> 时间：2012-12-28T04:59:52.807
> 
> 标签：eclipse, unicode, groovy, groovy-console

我想通过我的 DSL 在[groovy中输出](http://groovy.codehaus.org)[花卉公式](http://www.academia.edu/1175371/Floral_formulae_updated_for_routine_inclusion_in_formal_taxonomic_descriptions)，所以我需要一些特殊的符号，例如[女性符号](http://www.fileformat.info/info/unicode/char/2640/index.htm)和[上标和下标](http://www.unicode.org/charts/PDF/U2070.pdf)。

问题是关于 Eclipse IDE（[Groovy/Grails Tool Suite](http://grails.org/products/ggts) Version: 3.1.0.RELEASE 开发 grails 项目）和 Groovy 控制台（GroovyStarter）

鉴于此示例 groovy 语句：

`println '♀ Ca\u2075'`

如果我从终端运行程序，我会在终端中获得预期的输出：

```
$ groovy Testformula.groovy   
♀ Ca⁵ 
```

如果我从[Groovy/Grails Tool Suite](http://grails.org/products/ggts)作为*Java 应用程序*运行它也是一样的，但是如果我将它作为*Groovy 脚本*或在*Groovy 控制台*（Groovy starter）中运行它，我会得到问号而不是 unicode 符号：

```
groovy> package org.rondakit.test 
groovy> class Testformula { 
groovy>     static void main(def args) { 
groovy>         println '\u2640' 
groovy>         println '♀ Ca\u2075' 
groovy>     } 
groovy> } 
```

我得到了令人讨厌的结果：

```
?
? Ca? 
```

**问题**：是否可以在 GGTS 上配置*GroovyStarter*或*Groovy 控制台*以显示 unicode 符号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-10T02:18:06.450

我找到了 groovyConsole 的解决方案，您需要将“export JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8”放到环境变量中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:21:55.040

它在我的盒子（ubuntu 12.04）中使用“运行方式...”在 GGTS 下运行良好，无论是 Groovy 控制台还是 Groovy 脚本。您可能需要检查 ggts 中的配置。

默认情况下，Windows 以 cp1252 编码运行（我们在今年的一些项目中遇到了源代码错误编码的问题）。Linux 默认为 utf-8。我不确定 OS X

# cookies - 除使用 cookie 外，如何在 gwt 中保留页面数据（状态）

> ID：14064794
> 
> 赞同：0
> 
> 时间：2012-12-28T05:00:19.910
> 
> 标签：cookies, gwt, state, history

我有一个包含 6-7 个标签的应用程序。我想要的是，每当我关闭浏览器并再次打开它时，应该保留页面数据，即应该保持页面的状态。现在在我的页面中，我有数以千计的值，例如几棵树、文本框和复选框等。因此，将所有这些值一一存储在 cookie 中并不是一个好主意。

我用谷歌搜索了很多，但我没有找到任何方法来做到这一点。谁能帮我找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:57:09.533

我怀疑你在一个页面上有数千个独特的值——这意味着一个非常糟糕的设计。

更有可能的是，您有一个树，每次用户访问此页面时都会显示相同的值（即某种项目的列表），以及对应于特定数据对象（例如产品）的各种输入元素。在这种情况下，这个页面的整个状态可以总结成这样：

```
myWebSite/?#OrderForm:user=123&category=5&product=xyz&size=large 
```

当用户重新加载此页面（或稍后返回）时，您的应用程序可以解析此 URL 令牌，它会确切知道要向用户显示什么：显示 OrderForm 及其所有面板、复选框等，加载并用类别和产品填充树，将类别 5 设置为在菜单中选择，将产品 xyz 设置为产品树中的选定项目，在详细信息面板中显示此产品的详细信息，并在尺寸列表框中选择大尺寸。

当然，这只是一个示例，但是通过适当的应用程序设计，应用程序中的任何“页面”都可以用几个参数和很少（通常是一个）数据对象来描述。然后您可以将此状态存储在 URL 令牌中、cookie 中、服务器会话中或持久保存在数据库中 - 根据您的要求，您有很多选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:06:41.877

**没有神奇的解决方案。**

您可能会沿着以下路线探索 -

```
Server Side approach - Activities and Places with Asyc calls to get the last stored values.

Client Side approach - Activities and Places with HTML5 local storage. 
```

两者都不会很容易与您希望看到的那种缓存功能一起使用。

# node.js - 填充没有按我预期的那样工作

> ID：14064802
> 
> 赞同：0
> 
> 时间：2012-12-28T05:01:26.947
> 
> 标签：node.js, mongodb, mongoose

请在我的代码下面找到

```
var mongoose = require('mongoose');
var util = require('util');

var db = mongoose.connect('mongodb://localhost:27017/prats', function(err) {
  if (err) throw err;}  //this does not get printed
);

mongoose.connection.on("open", function(){
  console.log("mongodb is connected")}  //this gets printed
);

var Schema = mongoose.Schema;

var TestDocumentAccessSchema = new Schema({
  documentId: { type: Schema.ObjectId },
  userId: { type : String }, // Can be an SSO or a group (DL) id
  userName: { type : String },
});

var TestDocumentMasterSchema = new Schema({
  documentId: { type: Schema.ObjectId, ref: 'TestDocumentAccess'},
  masterId: { type: Schema.ObjectId }
});

var TestDocAccess  = mongoose.model('TestDocumentAccess', TestDocumentAccessSchema);
var TestDocMaster = mongoose.model('TestDocumentMaster', TestDocumentMasterSchema);

var document = new TestDocAccess(
    { documentId: '50dc37d6022b2bdd07000004',
    userId : "1234",
    userName : "Test Name",
    }
);

document.save(function (err) {
  if (err) return handleError(err);

  var master = new TestDocMaster({
    documentId: "50dc37d6022b2bdd07000004",
    masterId: "50a5e7bcda3c4d557f00847a"    // assign an ObjectId
  });

  master.save(function (err) {
    if (err) return handleError(err);
        console.log("That's it save success!!....");

    TestDocMaster.find({'masterId': '50a5e7bcda3c4d557f00847a'})
    .populate('documentId')
    .exec(function(err, TestDocAccess) {
        //I want all the document row corresponding to the master Id
        console.log("=========Test Doc Master======" +util.inspect(TestDocAccess.documentId));
    });
  });
}) 
```

我有多个与主 ID 对应的文档 ID，我期待 TestDocAccess.documentId 中的所有文档详细信息，但我得到一个**未定义**的..

请指出我上面的代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:18:32.330

为了`populate('documentId')`在您的示例中工作，引用`TestDocAccess`模型的集合中必须有一个文档，其中包含与模型集合匹配的`_id`（不是`documentId`您所期望的）。`documentId``TestDocMaster`

# jquery - 移动 Safari 固定位置页脚问题

> ID：14064804
> 
> 赞同：0
> 
> 时间：2012-12-28T05:01:32.730
> 
> 标签：jquery, mobile-safari, positioning, css-position, sticky-footer

如何让移动 safari 固定位置页脚停留在它所属的位置而不反弹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:01:32.730

好吧 - 我在发疯之前解决了这个问题。我不知道它是否适用于所有情况，但它在我的 iPhone 4s 上就像一个魅力。

假设您有正确的 css，类似于：

```
body { 
    height:100%;
}

#footer {
    position:fixed;
    bottom:0;
} 
```

并且您已经为移动设备设置了视口 -

这个解决方案对我来说非常有效。我正在使用 jQuery，但不是 jQueryMobile。这段 javascript/jq 代码解决了所有问题，并且没有弹跳或其他视觉失误：

```
document.ontouchstart=function(){
    $('#footer').animate({bottom:0},1);
} 
```

就是这样！希望这对某人有帮助。

# ios - iOS - 在情节提要中创建的 UILabel 动画不正确

> ID：14064806
> 
> 赞同：2
> 
> 时间：2012-12-28T05:01:46.887
> 
> 标签：ios, animation, storyboard

我将一个名为 testLabel 的 UILabel 拖到情节提要的位置 A(140,40) 中。我想将它从 A 动画到位置 B(100,250)。所以我写了如下代码..

```
#import "testViewController.h"

@interface testViewController ()
@property (weak, nonatomic) IBOutlet UILabel *testLabel;
@end

@implementation testViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    [UIView animateWithDuration:1.0
                          delay:1.0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{
                         CGPoint b = CGPointMake(100, 250);
                         self.testLabel.center = b;
                     }
                     completion:nil];
}

@end 
```

模拟器不是从 A 到 B 动画，而是将标签从 point(0,0) 动画到 A 点。我在哪里弄错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:16:54.030

我不会在 viewDidLoad 方法中制作动画。此时，iOS 尚未完全计算出您的子视图的框架。

如果您在 viewDidAppear 之类的方法中执行此动画：那么您会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:42:16.523

就像 PaReeOhNos 说的那样，您可以将其推迟到设置其起始坐标`viewDidAppear`的点`testLabel`，或者您可以执行以下操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.testLabel.center = CGPointMake(140, 40);

    [UIView animateWithDuration:1.0
                          delay:1.0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{
                         self.testLabel.center = CGPointMake(100, 250);
                     }
                     completion:nil];
} 
```

# maven - maven soapui pro 插件

> ID：14064808
> 
> 赞同：1
> 
> 时间：2012-12-28T05:01:59.993
> 
> 标签：maven, soapui

我正在使用 maven soapui pro 插件来运行测试套件。我想使用 groovy 脚本来创建测试用例所需的唯一数据。如何在 pom 中指定 groovy 脚本的路径以获取唯一数据？

当前的 pom 有以下插件：

```
<plugin>
                <groupId>eviware</groupId>
                <artifactId>maven-soapui-pro-plugin</artifactId>
                <version>4.0.0</version>
                <executions>
                    <execution>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <projectFile>src/test/resources/CIAM-Integration-test-suite-soapui-project.xml</projectFile>
                            <outputFolder>${project.build.directory}/soapui-reports</outputFolder>
                            <!-- <endpoint>${thirdpartyinventory.service.endpoint}</endpoint>  -->
                            <printReport>true</printReport>
                            <junitReport>true</junitReport>
                            <!-- <projectProperties>
                                <value>message=Hello World!</value>
                                <value>jdbcString=${thirdpartyinventory.jdbcString}</value>
                            </projectProperties> -->
                            <soapuiProperties>
                                <property>
                                    <name>soapui.logroot</name>
                                    <value>${project.build.directory}/soapui-logs/</value>
                                </property>
                                 <property>
                                        <name>soapui.scripting.library</name>
                                        <value>src/test/resources/B2C.groovy</value>
                                 </property>
                            </soapuiProperties>
                        </configuration>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>jgoodies</groupId>
                        <artifactId>looks</artifactId>
                        <version>2.2.0</version>
                    </dependency>
                    <dependency>
                        <groupId>fife</groupId>
                        <artifactId>rsyntaxtextarea</artifactId>
                        <version>1.3.4</version>
                    </dependency>
                    <dependency>
                        <groupId>junit</groupId>
                        <artifactId>junit</artifactId>
                        <version>4.4</version>
                    </dependency>
                    <dependency>
                        <groupId>hsqldb</groupId>
                        <artifactId>hsqldb</artifactId>
                        <version>1.8.0.10</version>
                        <type>jar</type>
                    </dependency>
                    <dependency>
                        <groupId>com.oracle</groupId>
                        <artifactId>ojdbc14</artifactId>
                        <version>10.2.0.3.0</version>
                        <type>jar</type>
                    </dependency>
                </dependencies>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:58:19.067

能够解决问题。

这是 pom 中的一个简单更改：

以前的代码：

```
<soapuiProperties>
                                <property>
                                    <name>soapui.logroot</name>
                                    <value>${project.build.directory}/soapui-logs/</value>
                                </property>
                                 <property>
                                        <name>soapui.scripting.library</name>
                                        <value>src/test/resources/B2C.groovy</value>
                                 </property>
                            </soapuiProperties> 
```

更改代码：

```
 <soapuiProperties>
                                <property>
                                    <name>soapui.logroot</name>
                                    <value>${project.build.directory}/soapui-logs/</value>
                                </property>
                                 <property>
                                        <name>soapui.scripting.library</name>
                                        <value>src/test/resources</value>
                                 </property>
                            </soapuiProperties> 
```

# r - 为矩阵中的某些相关性在 R 中生成图形

> ID：14064810
> 
> 赞同：12
> 
> 时间：2012-12-28T05:02:14.730
> 
> 标签：r, ggplot2, plyr, reshape2

我想在某个点上方和下方具有相关性以及 pvalue < 0.01 的变量（列）之间生成图表。这些图将是 ggplot2（线或条）图，绘制相关的两列（变量）。

到目前为止，这是我的方法的要点，有一些虚拟数据，我希望能指出下一步该去哪里。

```
# Create some dummy data
df <- data.frame(sample(1:50), sample(1:50), sample(1:50), sample(1:50))
colnames(df) <- c("var1", "var2", "var3", "var4")

# Find correlations in the dummy data
df.cor <- cor(df)

# Make up some random pvalues for this example
x <- 0:1000
df.cor.pvals <- data.frame(sample(x/1000, 4), sample(x/1000, 4), sample(x/1000, 4), sample(x/1000,4))
colnames(df.cor.pvals) <- c("var1", "var2", "var3", "var4")

# Find the significant correlations
df.cor.extreme <- ((df.cor < -0.01 | df.cor > 0.01) & df.cor.pvals < 0.5)

# Ready data to for plotting
df$rownames <- rownames(df)
df.melt <- melt(df, id="rownames")

# I want to plot the combinations of variables that have a TRUE value
# in the df.cor.extreme matrix 
```

下面是硬编码示例，如果 var1 和 var2 的值为 TRUE。我假设这是我需要某种循环来生成多个 varA 和 varB 相关的图的地方。

```
ggplot(df.melt[(df.melt$variable=="var1" | df.melt$variable=="var2"),], aes(x=rownames, y=value, group=variable, colour=variable)) +
  geom_line() 
```

![示例图](../Images/2541b9c1d232e050ad6834e8603ef402.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T06:03:11.070

正如@DrewSteen 的评论中所说，p-avlue 必须是相同的 cor 形状。

在这里，我提供了一个计算 p 值矩阵的函数（它应该存在一个内置函数，在 stats 包中）

```
pvalue.matrix <- function(x,...){
  ncx <- ncol(x)
  r <- matrix(0, nrow = ncx, ncol = ncx)
  for (i in seq_len(ncx)) {
    for (j in seq_len(i)) {
      x2 <- x[, i]
      y2 <- x[, j]
      r[i, j] <-  cor.test(x2,y2,...)$p.value
    }
  }
  r <- r + t(r) - diag(diag(r))
  rownames(r) <- colnames(x)
  colnames(r) <- colnames(x)
  r
} 
```

然后你使用 | 的矢量化版本 和 & 像这样

```
df.cor.sig <- (df.cor > 0.01 | df.cor < -0.01) & pvalue.matrix(df) < 0.5 
```

情节很经典，geom_tile

```
library(reshape2) ## melt
library(plyr)     ## round_any
 library(ggplot2) 
dat <- expand.grid(var1=1:4, var2=1:4)
dat$value <- melt(df.cor.sig)$value
dat$labels <- paste(round_any(df.cor,0.01) ,'(', round_any(pvalue.matrix(df),0.01),')',sep='')
ggplot(dat, aes(x=var1,y=var2,label=labels))+ 
  geom_tile(aes(fill = value),colour='white')+
 geom_text() 
```

![在此处输入图像描述](../Images/adbf067785d25422bc956f492448869a.png)

## OP澄清后编辑

```
plots <- apply(dat,1,function(x){
    plot.grob <- nullGrob()
    if(length(grep(pattern='TRUE',x[3])) >0 ){
      gg <- paste('var',c(x[1],x[2]),sep='')
      p <- ggplot(subset(df.melt,variable %in% gg ), 
            aes(x=rownames, y=value, group=variable, colour=variable)) +
            geom_line()
      plot.grob <- ggplotGrob(p)
    }
    plot.grob

})

library(gridExtra)
do.call(grid.arrange,  plots) 
```

![在此处输入图像描述](../Images/f7f250d6e4f2a0631d1f260ad2e05eb0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:56:36.627

如果您自己这样做，只是想在@agstudy 的答案中添加一个补充。

如果您使用生成矩阵索引表的函数的结果，您可以对其应用重要性。即这一行：

```
dat <- expand.grid(var1=1:4, var2=1:4) 
```

还要记住，上面一行中硬编码的 4 是（正方形）网格的长度。无论如何，您可以通过执行以下代码来忽略任何重复图形的生成：

```
# Find redunant pairs
dat <- data.frame(t(apply(dat, 1, function(x){
  if(x[1]-x[2] <= 0) {    # If > zero than pair has come before.
    -x                    # If = zero than pair is same 
  } else x
})))

# Remove redundant pairs
dat <- dat[dat$var1>0,] 
```

享受！

# sql-server - 此代码是否汇集 SQL 连接？

> ID：14064812
> 
> 赞同：0
> 
> 时间：2012-12-28T05:02:24.810
> 
> 标签：sql-server, entity-framework, system.data

我正在使用 Essential.Logging 的 SQL 记录器。我在[这里查看了库的来源](http://essentialdiagnostics.codeplex.com/SourceControl/changeset/view/3e11e4ac6474#Essential.Diagnostics/Diagnostics/SqlDatabaseTraceListener.cs)并看到了（在最后）

每次要登录到 SQL 时：

```
using (var connection = DbProviderFactoryExtensions.CreateConnection(dbFactory, connectionSettings.ConnectionString))
{
    using (var command = DbProviderFactoryExtensions.CreateCommand(dbFactory, CommandText, connection))
    {
        command.Parameters.Add(DbProviderFactoryExtensions.CreateParameter(dbFactory, "@ApplicationName", ApplicationName != null ? (object)ApplicationName : DBNull.Value));
        // ..snip..
        command.Parameters.Add(DbProviderFactoryExtensions.CreateParameter(dbFactory, "@Data", dataString != null ? (object)dataString : DBNull.Value));

        connection.Open(); // <====
        command.ExecuteNonQuery();
    }
} 
```

using 语句顶部的辅助函数是

```
public static DbConnection CreateConnection(DbProviderFactory dbFactory, string connectionString)
{
    if (dbFactory == null) throw new ArgumentNullException("dbFactory");

    var connection = dbFactory.CreateConnection();
    connection.ConnectionString = connectionString;
    return connection;
} 
```

问题：

1.  是否每次都打开（和关闭）与 SQL 服务器的连接？我认为汇集到 SQL 服务器的连接会更有效，对吧？
2.  如果我将其替换为 Entity Framework 5.0（带有 a `using (var db = new myDbContext()) { }`）会导致连接池吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:10:51.433

> 是否每次都打开（和关闭）与 SQL 服务器的连接？我认为汇集到 SQL 服务器的连接会更有效，对吧？

是的。和不。它通过 调用`Close()`，`Dispose()`但它实际上是在后台为您汇集连接，假设您没有在连接字符串中设置任何不允许汇集的属性。*你不会为此做任何事情；*尽可能晚地打开，并尽快关闭，让 ADO.NET 做它的事情。

> 如果我用 Entity Framework 5.0 替换它（使用 (var db = new myDbContext()) { } ）会导致连接池吗？

DbContext 也使用池化，因为它在后台使用常规的 ADO.NET。它生成的代码通常遵循我上面给出的建议：尽可能晚地打开，并尽可能早地关闭 - 让 ADO.NET 处理池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T11:42:55.947

作为对安德鲁[评论](https://stackoverflow.com/a/14064864/1313030)的支持信息：

除非您禁用连接池（通过将**Pooling=False**添加到连接字符串中），否则 ADO.NET 将连接您的连接。它根据连接字符串分隔连接池。如果给定的连接字符串存在一个池，则重新使用它，否则创建一个新连接。

默认最大连接池大小为 100。但您可以通过设置连接字符串的相关属性来更改池行为 - 最小池大小、最大池大小等。

有关连接池的工作原理，请参阅相关的[msdn 文章，并](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)[在此处](http://www.codeproject.com/Articles/17768/ADO-NET-Connection-Pooling-at-a-Glance)了解使用详情。

# ruby - 是否可以使用 MiniTest（例如 Foo.bar）测试类方法？

> ID：14064816
> 
> 赞同：3
> 
> 时间：2012-12-28T05:02:38.300
> 
> 标签：ruby, minitest

如何在不测试方法的行为（已在其他地方测试过）`Foo.bar`的情况下测试以下示例中调用的方法？`bar`

```
# Code
class Alpha
  def process
    Foo.bar
  end
end 
```

以下规范是我到目前为止所拥有的。不幸的是，这种方法会引发“已定义类”警告，因为 Foo 已在我的项目的其他地方定义。

```
 # Spec
 let(:alpha) { Alpha.new }
 let(:klass) { MiniTest::Mock.new }

 subject { alpha.process }

 it "calls Foo.bar" do
   klass.expect(:bar, '')     # Define method call expectation
   Foo = klass                # Redefine Foo as a mock object
   subject                    # Run method being tested
   klass.verify               # Confirm method was called
 end 
```

*我不希望我的测试依赖于`Foo`类，因为这是一个外部依赖，我不想测试 的响应值`Foo.bar`，因为它可能会任意改变。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T06:03:03.480

为了模拟这样的类，您必须像这样插入一个注入点：

```
class Alpha
  def initialize(opts = {})
    @foo_class = opts[:foo_class] || Foo
  end

  def process
    @foo_class.bar
  end
end 
```

这是可行的，因为类名只是 Ruby 中的一个常量，它可以像任何其他值一样被赋值。因此，您现在不是硬编码对`Foo`类的调用，而是在新实例变量指向的任何地方调用该方法。大多数情况下，除非您传递其他内容，否则这仍然是课堂。我通常像在这里一样将这样的模拟参数隐藏为可选参数。我也没有在面向最终用户的文档中包含对它们的引用，因为它们在技术上不是我认为的公共 API 的一部分。`Alpha``@foo_class``Foo`

然后在你的测试中，你可以`Alpha`像这样初始化你的对象：

```
fooClassMock = MiniTest::Mock.new
fooClassMock.expect(:bar, '')
alpha = Alpha.new(:foo_class => fooClassMock) 
```

你应该得到你正在寻找的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-27T15:09:22.713

我知道这是一个老问题，但我一直在寻找一个不需要修改业务代码以使测试更容易的解决方案，我想我想出了一个解决方案。

即使您使用的是 Rails，也需要添加到`gem "minitest"`您的. `Gemfile``require "minitest/mock"``test_helper.rb`

```
it "calls Foo.bar" do
  bar_is_called = false
  bar_lambda = ->{
    bar_is_called = true
  }

  Foo.stub(:bar, bar_lambda) do
    Alpha.new.process
  end
  bar_is_called.must_equal true
end 
```

`.stub`可以传递一个返回值，或者当传递一个响应的东西时`.call`，它会调用`.call`它（[存根方法的文档](http://docs.seattlerb.org/minitest/Object.html)）。在这个例子中。`bar_lambda`被调用，改变 的值`bar_is_called`。这验证了`Foo.bar`被调用的。

它在测试语法中的工作方式也类似：

```
test 'Foo.bar is called' do
  bar_is_called = false
  bar_lambda = ->{
    bar_is_called = true
  }

  Foo.stub(:bar, bar_lambda) do
    Alpha.new.process
  end
  assert bar_is_called
end 
```

# java - 我的 Java 代码用于输入姓名、年龄和查看一个人是否足够大可以做某事有什么问题？

> ID：14064819
> 
> 赞同：0
> 
> 时间：2012-12-28T05:02:56.177
> 
> 标签：java, if-statement

我的代码有什么问题？'if' 语句似乎不起作用！我运行程序并输入我的姓名和年龄。我输入了一个有资格使用该程序的年龄，但它说我太年轻了。我对此进行了编码，但它不会让我使用它！

```
import java.util.Scanner;

public class learning {
    public static void main(String args[]){

        Scanner uI = new Scanner(System.in);

        System.out.println("Enter your name: ");
        System.out.print(uI.nextLine());
        System.out.println(", enter your age: ");
        uI.nextInt();
        int person = 10;

        if (person > 10){
            System.out.println("You may use this program!");
        }else{
            System.out.println("You may not use this program. You are too young!");
        }

        uI.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:08:11.977

您没有分配`uI.nextInt();`给任何 int 变量。像 ：

```
 System.out.println(", enter your age: ");
    int personAge = uI.nextInt();
    int person = 10; // instead use this as constant, public static final int MIN_ALLOWED_AGE = 11;

    if (personAge > person){   // if (personAge >= MIN_ALLOWED_AGE){
        System.out.println("You may use this program!");
    }else{
        System.out.println("You may not use this program. You are too young!");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:04:31.973

好吧，现在你的 if 语句是：

```
if (person > 10) 
```

如果您希望它适用于 10 岁及以上，则应该是：

```
if (person >= 10) 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T05:05:01.753

10 永远不会大于 10，因此您的代码无法正常工作。做这个

```
person>=10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-28T05:14:19.690

使用此代码

```
public class learning {
   public static void main(String args[]){

    Scanner uI = new Scanner(System.in);

    System.out.println("Enter your name: ");
    System.out.print(uI.nextLine());
    System.out.println(", enter your age: ");

    int person = uI.nextInt();

    if (person > 10){
        System.out.println("You may use this program!");
    }else{
        System.out.println("You may not use this program. You are too young!");
    }

    uI.close();
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T05:05:34.987

```
 int person = 10;

    if (person > 10){
        System.out.println("You may use this program!");
    }else{
        System.out.println("You may not use this program. You are too young!");
    } 
```

你根本没有改变人的价值！它应该始终是 10。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-28T05:05:39.050

好的，首先您在第 12 行为变量分配了一个静态值，当您应该使用 >= 时，您正在使用 ">" 运算符。最后，您可以考虑在测试之前将 uI.nextInt() 的结果分配给 person，而不是将其设置为静态值。

# ios - 未正确检测到 iOS UIImage alpha

> ID：14064821
> 
> 赞同：1
> 
> 时间：2012-12-28T05:03:06.437
> 
> 标签：ios

下面的代码循环遍历图像的像素并获取每个像素的 alpha 值。如果 alpha 为零，则会在 x,y 坐标处创建一个红点。以下是 2 张具有透明背景的图像。第一个是字母“C”的图像，绘制红点时出现失真。第二个是字母“D”的图像，它工作得非常好，红点正好放置在 alpha 等于 0 的位置。有谁知道为什么一个图像的 alpha 以扭曲的模式被检测到，而另一个图像被检测到非常好？我真的一直在努力解决这个问题。对我来说完全是无稽之谈。提前感谢您的任何建议！！！

C 有问题 --> [http://i45.tinypic.com/rtdyet.png](http://i45.tinypic.com/rtdyet.png)

D 工作得很好 --> [http://i45.tinypic.com/21mb3om.png](http://i45.tinypic.com/21mb3om.png)

```
CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
UInt8 *pixels = (UInt8 *)CFDataGetBytePtr(data);

UIGraphicsBeginImageContext(size);
[image drawInRect:CGRectMake(0, 0, size.width, size.height)];
CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 1);
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor redColor].CGColor);

for (int x = 0; x < size.width; x++)
{
    for (int y = 0; y < size.height; y++)
    {
        int index = ((x + (y * (int)size.width)) * 4) + 3;
        CGFloat alpha = pixels[index];
        if (alpha == 0)
        {
            CGContextBeginPath(UIGraphicsGetCurrentContext());
            CGContextMoveToPoint(UIGraphicsGetCurrentContext(), x, y);
            CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), x, y);
            CGContextStrokePath(UIGraphicsGetCurrentContext());
        }
    }
}

UIImage *test = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageView *testView = [[UIImageView alloc] initWithImage:test];
testView.frame = CGRectMake(0, 0, size.width, size.height);
[self.view addSubview:testView]; 
```

# android - wsdl android 的 Soap 请求格式

> ID：14064822
> 
> 赞同：0
> 
> 时间：2012-12-28T05:03:42.267
> 
> 标签：android, web-services, android-ksoap2

我正在尝试使用 ksoap2 从 Android 访问 Web 服务。从我的 android 模拟器发送的肥皂请求就像，

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
<v:Body>
<Login xmlns="http://xxx.com/" id="o0" c:root="1">
<MyLoginCredentials i:type="d:anyType">
<Email i:type="d:string">asdf@asd.com</Email>
<Password i:type="d:string">asdf</Password>
</MyLoginCredentials>
</Login>
</v:Body>
</v:Envelope> 
```

但是从 SoapUI 表单中，成功的登录请求就像，

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:str="http://xxx.com/">
    <soapenv:Header/>
    <soapenv:Body>
        <str:Login>
    <str:MyLoginCredentials>

        <str:Email>asdf@asd.com</str:Email>
        <str:Password>asdf</str:Password>
    </str:MyLoginCredentials>
</str:Login>
    </soapenv:Body>
</soapenv:Envelope> 
```

这是我的android代码部分：

```
 String NAMESPACE = "http://xxx.com/";
        String METHOD_NAME = "Login";
        String SOAP_ACTION = "http://xxx.com/Login";
        String URL = "http://xxx.tk/service.asmx?wsdl";

        Object results;

        System.setProperty("http.keepAlive", "false");

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

        Request.addProperty("MyLoginCredentials", myLoginCredentials);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true; 

        String Str = null;
        try
        {
            androidHttpTransport.call(SOAP_ACTION, envelope);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        } 
```

请帮我解决问题。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:34:52.523

参考下面的链接可能对你有用。

[http://codeoncloud.blogspot.in/2012/04/android-web-service-access-tutorial.html](http://codeoncloud.blogspot.in/2012/04/android-web-service-access-tutorial.html)

[http://codeoncloud.blogspot.in/2012/04/android-403-webservice-access-tutorial.html](http://codeoncloud.blogspot.in/2012/04/android-403-webservice-access-tutorial.html)

[http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

# php - 将值从 FieldType 传递给另一个

> ID：14064824
> 
> 赞同：1
> 
> 时间：2012-12-28T05:03:58.727
> 
> 标签：php, symfony

我目前正在构建一个表单来向我正在开发的系统中的其他用户发送消息，消息的正文可以基于模板构建。截图：i.imgur.com/eFI1I.png

当我尝试加载模板以将它们应用于新消息时，我的问题就出现了。我通过实体类型加载模板。这是代码：

```
->add('plantillas', 'entity', array(
    'class' => 'UCA\SGExaBundle\Entity\Plantilla',
    'property' => 'nombre',
    'expanded' => true,
    'required' => false, 
```

表格的其余部分在这里：[https ://gist.github.com/4372276](https://gist.github.com/4372276)

控制器代码在这里：[https](https://gist.github.com/4372282) ://gist.github.com/4372282 （我很抱歉代码混乱，我尝试应用不同的解决方案）

模板实体具有以下属性：

*   ID
*   名词
*   康泰尼多

所有模板都在表单中呈现为复选框列表，显示属性 Nombre。问题是，一旦用户选择列表中的一个元素（单击复选框）（也在 URL gist 中），我希望来自所选模板的属性 Contenido 的值转移到名为 Cuerpo 的字段类型。 github.com/4372276）。

事实是我没有想法，我正在考虑在“Elegir Plantilla”按钮中进行提交，更新与消息的 FormType 链接的变量 mnj 的值。但是，即使提交，正文中的值也不会刷新。我想我必须应用一些方法来刷新它，但我不知道是哪一个。无论如何，我认为这不是一个有效的解决方案。

# c# - 为什么秒表第一次运行时滴答声更长

> ID：14064834
> 
> 赞同：0
> 
> 时间：2012-12-28T05:05:10.477
> 
> 标签：c#, .net, performance, stopwatch

我在一个while循环中运行这个代码大约10000次，我注意到timeSpent大约是4，除了第一次，大约是500，为什么？

```
Stopwatch s;
long price;
count = 10000;
while (count!=0)
{
   s = Stopwatch.StartNew();

   price = classA.Method(..some inputs...);  //this method do some iterations to return back a long given some inputs

   s.Stop();
   timeSpent = s.ElapsedTicks / (Stopwatch.Frequency / (1000L * 1000L));
   s.Reset();
   /*write the price, timeSpent and inputs into a .txt file*/
   count--;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:21:50.977

第一次调用方法时，它会从 IL 编译为本机代码。任何后续调用都会重新使用生成的本机代码。所以，一般来说，你会期望你第一次调用一个方法花费的时间最长。

不幸的是，很难证明这是原因，但这*可以*解释它。在进行基准测试/分析时，我已经多次看到同样的事情发生：第一次调用花费的时间最长。我通常通过丢弃第一次运行来解决这个问题。

当然，您调用的方法可能有副作用，获取资源并缓存它们，或者只是在第一次调用时才发生一次且仅发生的任何事情。这些只是我说很难确定的一些原因。

# asp.net-mvc-3 - 如何在 asp.net mvc3 中默认检查 html helper 复选框？

> ID：14064835
> 
> 赞同：0
> 
> 时间：2012-12-28T05:05:12.890
> 
> 标签：asp.net-mvc-3

我正在尝试检查 asp.net mvc3 中的 html 帮助程序默认值，但它没有发生。任何人都可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T06:07:34.280

您可以设置其选中的属性

```
@Html.CheckBox("myCheckBox", true) 
```

# spring - 几次调用后休眠无法打开 JDBC 连接

> ID：14064839
> 
> 赞同：2
> 
> 时间：2012-12-28T05:05:41.663
> 
> 标签：spring, hibernate, jdbc, jdbctemplate, hibernate-criteria

我是hibernate的新手并尝试使用它，所以为了学习目的，有些地方我使用Criteria API，有些地方使用HQL。

我的应用程序运行良好，但问题是在执行 5-6 次后，不再打开 JDBC 连接并且应用程序挂在那里。

在日志中它说......打开 JDBC 连接......就是这样。

我读了一些文档，它说这是因为一旦打开 Session 就没有释放它。

这是我正在运行的功能。

```
 public List<Place> getAllPlaces() {

        Session session = getSession();
        Criteria cr = session.createCriteria(Place.class);
        List ls= cr.list();

        session.close();

        return ls;

    }

    public List<User> getAllUser() {

        Session session = getSession();
        Criteria cr = session.createCriteria(User.class);
        List ls= cr.list();

        session.close();

        return ls;
    }

    public List<Carpooler> getAllCarpooler() {

        Session session = getSession();
        Criteria cr = session.createCriteria(Carpooler.class);
        List ls= cr.list();

        session.close();

        return ls;

    }

    public List<SourceToDestinationDetails> getAllSourceToDestinationDetailsbyCarpooler(
            Carpooler carpooler) {

        Session session = getSession();
        Criteria cr = session.createCriteria(SourceToDestinationDetails.class);
        cr.add(Expression.eq("listOfSourceToDestinationDetails",carpooler));
        List ls= cr.list();

        session.close();

        return ls;
    }

    public List<Carpooler> getExactMatchCarpooler(String from, String to) {

        log.debug("Request received for fetching Exact match Carpooler.");

        List<Carpooler> listOfFinalCarpooler = new ArrayList<Carpooler>();

        List list = null;
        try{
            list = getHibernateTemplate().findByNamedQueryAndNamedParam("findExactMatchingCarpooler", new String[]{"source","destination"}, new String[]{from,to});

            if(list!=null){
                log.debug("Fetched Exact match carpooler list is :"+list.toString());

                for (int j = 0; j < list.size(); j++) {
                    Object[] l = (Object[])list.get(j);

                        Carpooler c = (Carpooler)l[0];
                        SourceToDestinationDetails std = (SourceToDestinationDetails)l[1];

                        Carpooler c1 = new Carpooler();
                        c1.setCarpoolerCreationDate(c.getCarpoolerCreationDate());
                        c1.setCarpoolerId(c.getCarpoolerId());
                        c1.setDrivingLicenceNumber(c.getDrivingLicenceNumber());
                        c1.setUser(c.getUser());
                        c1.setListOfVehicleDetails(c.getListOfVehicleDetails());
                        c1.setUserType(c.getUserType());

                        List<SourceToDestinationDetails> listOfSourceToDestinationDetails =new ArrayList<SourceToDestinationDetails>();
                        listOfSourceToDestinationDetails.add(std);

                        c1.setListOfSourceToDestinationDetails(listOfSourceToDestinationDetails);

                        listOfFinalCarpooler.add(c1);

//                      log.debug("Carpooler is :"+c.getCarpoolerId());
//                      log.debug("SourceToDestinationDetails is :"+std.getSourceToDestinationId());
                }

            }else{
                log.debug("List is null");
            }

        log.debug("Returning back from fetching Exact match Carpooler");

            return listOfFinalCarpooler;
        }catch(Exception e){
            log.error("Exception Occurred while fetching Exact Match Result :"+e.getMessage());
        }
    return null;    
} 
```

日志

```
2012-12-28 10:32:33,529 DEBUG http-8080-4 [DashboardController.getLoginPage1] - Fetching list of all user, to display count on home page.
2012-12-28 10:32:33,529 DEBUG http-8080-4 [SessionFactoryUtils.doGetSession] - Opening Hibernate Session
2012-12-28 10:32:33,530 DEBUG http-8080-4 [SessionImpl.<init>] - opened session at timestamp: 13566709535
2012-12-28 10:32:33,531 DEBUG http-8080-4 [AbstractBatcher.logOpenPreparedStatement] - about to open PreparedStatement (open PreparedStatements: 0, globally: 0)
2012-12-28 10:32:33,531 DEBUG http-8080-4 [ConnectionManager.openConnection] - opening JDBC connection 
```

有人可以指导我哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T04:16:27.280

您正在尝试使用[HibernateDaoSupport.getSession()](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/HibernateDaoSupport.html#getSession%28%29)方法获取会话。

API 说，

> 请注意，这并不意味着从 HibernateTemplate 代码中调用，而只是在普通的 Hibernate 代码中调用。要么依赖线程绑定的 Session，要么将其与 releaseSession(org.hibernate.Session) 结合使用。

所以使用下面的[HibernateDaoSupport.releaseSession(org.hibernate.Session)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/HibernateDaoSupport.html#releaseSession%28org.hibernate.Session%29)方法来关闭打开的会话，而不是`session.close()`.

```
releaseSession(session); 
```

# android - 较早版本的 Android popupMenu

> ID：14064852
> 
> 赞同：-3
> 
> 时间：2012-12-28T05:07:34.557
> 
> 标签：android

我想要做的是当设备是更高版本的 ICS 时我想使用**PopupMenu**，对于早期版本，它会自动更改为**contextmenu**。

可以通过代码控制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:11:51.250

您可以查看当前使用该设备的 Android 版本

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
       //show context menu as you need
} else {
       // show pop up
} 
```

# delphi - 德尔福回调？

> ID：14064854
> 
> 赞同：12
> 
> 时间：2012-12-28T05:08:00.063
> 
> 标签：delphi, function, callback, procedure

我想知道是否有可能实现这样的事情：

`procedure waitandcall(time,@MyProcedureOrFunction)`

哪个执行我创建的函数或过程？

我不确定它们是否被称为回调。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-28T05:18:15.783

这是绝对可能的，你甚至不需要 @ 在你的函数之前。

事实上，所有的事件都是基于此。

首先为您的函数/过程定义一个类型

```
type
  TMyProc = procedure(Param1: Integer); 
```

然后，您可以在任何地方使用您的过程类型，只要您的过程的签名与您的类型匹配。

如果您使用的是对象方法而不是普通的过程/函数，则需要使用`of object`

```
type
  TMyMethod = procedure(Param1: Integer) of object; 
```

要从内部调用回调，您可以使用以下内容：

```
procedure DoAndCallBack(MyProc: TMyProc)
begin
  MyProc(1);
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T05:16:44.623

*回调*正是所谓的，Delphi 完全有能力创建和调用它们。它们也被称为*函数指针*。请参阅文档中的[*过程类型*](http://docwiki.embarcadero.com/RADStudio/XE3/en/Procedural_Types)。

# javascript - 如何从 apache velocity *.vm 文件中调用 javascript 函数？

> ID：14064856
> 
> 赞同：1
> 
> 时间：2012-12-28T05:08:28.837
> 
> 标签：javascript, velocity, confluence

我目前正在使用 Confluence 4.3，我正在尝试添加一个 HTML 按钮或 HTML 链接来调用 javascript 函数。

如何做到这一点？

具体来说，Confluence 中有一个名为“searchpanel.vm”的文件，它是一个简单的速度模板，定义了用于优化 Confluence 搜索的标准。

我希望在搜索面板中有一个按钮来调用 javascript 函数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:48:24.277

在 Velocity 中编写 Javascript 没有特殊的符号。只需像往常一样在任何 HTML 文件中编写。一个例子是：

```
 <form>
    #if ($searchVisible)
        <div id = "searchLinkContainer" >
            <a href="javascript:searchFunction()">Click here</a> to search.
        </div>  
    #end    
    </form>
    <script language="JavaScript" type="text/javascript">   
        function searchFunction () {
            //Do search
        }
    </script> 
```

请注意，如果您在 Velocity 中的条件语句中包含该标记并且它没有被遍历，则该脚本在 HTML 页面中将不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:55:18.397

Velocity 只是一种模板语言/引擎，可以打印任何你想要的东西。只需编写您通常使用的 HTML，无论您是否在`.vm`文件中。

# linux-device-driver - 树莓派中的 I2C Bitbanging

> ID：14064857
> 
> 赞同：3
> 
> 时间：2012-12-28T05:08:34.240
> 
> 标签：linux-device-driver, raspberry-pi, i2c

我们正在我们`raspberry pi`的一个项目中使用；同样我们要使用 i2c 来连接触摸屏。由于 pi 中的 i2c 不支持使用 i2c 位撞击的时钟拉伸计划。我正在按照链接中给出的程序进行操作； [I2C-GPIO](http://lwn.net/Articles/230571/)

我无法激活`i2c`on `gpio`。我收到以下错误

```
i2c-gpio: probe of i2c-gpio.0 failed with error -22 
```

问候苏曼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T13:38:44.740

我记得当我第一次开始使用 PI 时遇到类似的错误，您是否在 PI 上启用了 I2C？我不确定你运行的是哪个发行版，所以我假设你安装了 Raspbian Wheezy。

Wheezy 上默认禁用 I2C 启用它的过程非常简单，但是我没想到它会默认禁用，所以当第一个 I2C 调用被轰炸时我很失望。您发布的示例也没有提到启用 I2C，所以这就是我要开始的地方。

查看有关如何启用 I2C 的详细演练。 [http://www.skpang.co.uk/blog/archives/575](http://www.skpang.co.uk/blog/archives/575)

# javascript - 读取 IFRAME 的表单字段 - 跨域

> ID：14064858
> 
> 赞同：0
> 
> 时间：2012-12-28T05:08:35.793
> 
> 标签：javascript, json, iframe

**我的 html 页面如下所示.. 我需要做的是，如果有人在 IFRAME 之外的申请人信息 1$FirstName 字段中键入内容-我对在 Iframe 中打开的 url 没有任何控制权。这可能使用 Json 或 Javascript 吗？**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
First Name : 
<input name="ApplicantInfo1$FirstName" type="text" maxlength="30" id="ApplicantInfo1_FirstName" title="First Name" class="nonnumeric" minlength="2" style="width:200px;" /> 
<br />
<iframe id="progressive" src="https://www.progressivelp.com/onlineapplication/onlineapplication.aspx?sid=Metro2674957490&kid=1" width="940" height="1200" scrolling="no" style="border:none;"></iframe>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:35:55.097

由于浏览器强制执行相同的源策略，这是不可能的。

如果没有该策略，任何人都可以编写一个网页，在 iframe 中打开您的网上银行，并从该 HTML 中读取任何想要的内容。我认为我们可以同意这将是一个巨大的安全风险，因此通常相同的原始策略 (SOP) 是一件好事。

解决此限制的一种常见方法是在您的服务器上引入代理页面。然后，此代理页面可以代表您检索远程网页并将其内容返回给浏览器。这确保了两个 HTML 来自同一个域。

# c++ - 如何使用 rapidxml 读取嵌套的 xml

> ID：14064860
> 
> 赞同：2
> 
> 时间：2012-12-28T05:09:19.627
> 
> 标签：c++, rapidxml

我正在尝试使用 RapidXML 来解析如下所示的 xml 内容：

```
<?xml version="1.0" ?>
<!DOCTYPE open-psa>
<open-psa>
  <define-gate name="top" >
    <or>
      <gate name="g1" />
      <gate name="g2" />
    </or>
  </define-gate>
  <define-basic-event name="e1">
    <exponential>
      <parameter name="lambda1" />
      <mission-time />
    </exponential>
  </define-basic-event>
  <define-parameter name="lambda1">
    <lognormal-deviate>
      <float value="2.0e-5" />
      <float value="3" />
      <float value="0.95" />
    </lognormal-deviate>
  </define-parameter>
</open-psa> 
```

我已经能够使用以下代码访问所有直接子项以打开 psa

```
cout << "Importing fault tree...\n" ;
xml_document<> doc;
xml_node<> * root_node;
char* node_name;

// Read the xml file into a buffer
ifstream theFile ("SmallTree.xml");
vector<char> buffer((istreambuf_iterator<char>(theFile)),
                     istreambuf_iterator<char>());
buffer.push_back('\0');

// Parse the buffer
doc.parse<0>(&buffer[0]);

// Find the root node
root_node = doc.first_node("open-psa");

// Iterate over all child nodes
for (xml_node<> * node = root_node->first_node(); node; node = node->next_sibling())
{
    node_name = node->name();
    if (strcmp(node_name, "define-gate" ) == 0)
    {
        cout << node->name() << ", ";
        cout << node->first_attribute("name")->value() << endl;
    }
    else if (strcmp(node_name, "define-basic-event" ) == 0)
    {
        cout << node->name() << ", ";
        cout << node->first_attribute("name")->value() << endl;
    }
    else if (strcmp(node_name, "define-parameter" ) == 0)
    {
        cout << node->name() << ", ";
        cout << node->first_attribute("name")->value() << endl;
    }
} 
```

现在我被困住了。我如何访问嵌套在例如 define-gate name="top" 中的元素您可能会猜到一个实际的 .xml 文件可能有大量的门、基本事件、参数等，我不认为我可以假设任何特定的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T06:29:44.007

node->next_sibling() 为您提供 XML 文档中同一级别的下一个节点。如果你想进入'node'的内部节点，使用first_node()：

```
xml_node<>* nodeInternal = node->first_node(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T03:22:09.463

谢谢你的提示。经过一些实验，我想出了以下帮助函数来读取“门”。条件语句嵌套得很深，因此是助手。作品！再一次感谢你的帮助！

```
void readGate(xml_node<>* node)
{
// 
char* gname ;
xml_node<>* gtype = node->first_node();
if (gtype != 0)
{
    gname = gtype->name();
    if (strcmp(gname, "and" ) == 0)
    {
        // found an "and" gate, read children
        cout << "  " << gname << endl;
        xml_node<>* gin = gtype->first_node();
        while (gin != 0)
        {
            cout << "    " <<  gin->name() << ", ";
            cout << "    " <<  gin->first_attribute("name")->value();
            cout << endl;
            gin = gin->next_sibling();
        }
    }
    else if (strcmp(gname, "or" ) == 0)
    {
        // found an "or" gate, read children
        cout << "  " << gname << endl;
        xml_node<>* gin = gtype->first_node();
        while(gin != 0)
        {
            cout << "    " <<  gin->name() << ", ";
            cout << "    " << gin->first_attribute("name")->value();
            cout << endl;
            gin = gin->next_sibling();
        }
    }
} 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T22:37:01.640

每个节点都有 first_node() 函数，因此`if`在您确定节点名称的地方，您可以执行另一个以 开头`xml_node<>* child = node->first_node()`并继续的循环`child = child->next_sibling()`。

# java - HtmlUnit登录表单，javascript问题

> ID：14064863
> 
> 赞同：1
> 
> 时间：2012-12-28T05:10:14.767
> 
> 标签：java, javascript, forms, login, htmlunit

您好我正在尝试使用`htmlunit`登录到服务器。当我禁用`htmlunit's`javascript 支持时，我的程序成功发布了登录信息，但将我重定向到另一个页面，上面写着“因为您没有使用 javascript，所以您必须按一次继续”。即使在普通浏览器中，自动单击此继续按钮也会导致 404 页面，因此这不是一个选项。

所以——我需要设置 javascript 才能执行身份验证。有人可以帮我吗？下面是我的代码、抛出的错误的堆栈跟踪以及我正在使用的 html 源代码。提前致谢。

```
 WebClient wc = new WebClient(BrowserVersion.FIREFOX_3_6);
    wc.getCookieManager().setCookiesEnabled(true);
    wc.setJavaScriptEnabled(true);

    HtmlPage page0 = wc.getPage("https://my.usc.edu/wp/shiblogin.do?r=/wp/student/searchForm.do");
    HtmlPage page1 = wc.getPage("https://shibboleth.usc.edu/idp/Authn/UserPassword");

    HtmlForm loginForm = page1.getForms().get(0);

    //HtmlSubmitInput button = loginForm.getInputByValue("Login");
    HtmlTextInput userField = loginForm.getInputByName("j_username");
    HtmlPasswordInput passwordField = loginForm.getInputByName("j_password");

    userField.setValueAttribute("username");
    passwordField.setValueAttribute("password");

    HtmlPage page2 = (HtmlPage) loginForm.getInputByValue("Login").click();

    String htmlBody = page2.getWebResponse().getContentAsString();

    System.out.println(page2.asText());
    System.out.println(htmlBody); 
```

* * *

```
Caused by: com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException: 404 >/wp/student/searchForm.do/index.html for >https://my.usc.edu/wp/student/searchForm.do/index.html
>   at >com.gargoylesoftware.htmlunit.WebClient.throwFailingHttpStatusCodeExceptionIfNecessary(WebCli>ent.java:543)
>   at com.gargoylesoftware.htmlunit.WebClient.download(WebClient.java:2228)
>   at >com.gargoylesoftware.htmlunit.javascript.host.html.HTMLFormElement.submit(HTMLFormElement.jav>a:310)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>   at >sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>   at java.lang.reflect.Method.invoke(Method.java:597)
>   at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:137)
>   ... 34 more
>== CALLING JAVASCRIPT ==
>function () {
>   [native code, arity=0]
>}

>======= EXCEPTION END ======== 
```

* * *

```
<form id="loginform" action="/idp/Authn/UserPassword" method="post" onsubmit="if (this.getAttribute('submitted')) return false; this.setAttribute('submitted','true'); document.getElementById('submit').disabled=true;" >

                <fieldset>
                    <legend>USCnet Login</legend>
                    <table id="login">
                        <tr>
                            <th><label for="j_username">USC NetID:</label></th>
                            <td><input id="j_username" name="j_username" type="text" maxlength="12" value="" /></td>
                        </tr>
                        <tr>
                            <th><label for="j_password">Password:</label></th>
                            <td><input id="j_password" name="j_password" type="password" /></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td><input id="submit" type="submit" value="Login" /></td>
                        </tr> 
```

# jquery - 模棱两可的jsonp

> ID：14064867
> 
> 赞同：1
> 
> 时间：2012-12-28T05:11:08.323
> 
> 标签：jquery, json

我正在尝试使用 json/jsonp 为我未来的项目提出一个简单的请求，但我不知道我错过了什么。我已经通过[http://jsonlint.com/](http://jsonlint.com/)验证了我的链接。如果我将链接替换为“http://search.twitter.com/search.json?q=earthquake&lang=en&callback=?” 有用。谢谢你。这是我的代码：

```
 <html>
        <head>
            <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
            <script type="text/javascript">
            $(document).ready(function() {  
                $.getJSON('http://api.nytimes.com/svc/search/v1/article?format=json&query=cloud+computing&facets=des_facet%2Cper_facet%2Cgeo_facet%2Cclassifiers_facet%2Corg_facet&callback&api-key=b56e8aac267230a55c6f15cfeeb2cf4f:5:67104308&callback=?', 
                function(data){
                    var html = "<ul>Hello. This is  my data.</ul>";
                    $('.nytimes').html(html);   
                });
            });
            </script>
        </head>
        <body>
           <p>New York Times news</p>
           <div class="nytimes">    
           </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T06:59:14.133

为了您的参考，我附上了来自跨域的简单 JSONP 响应，并在我们的 UserInterface 中绑定了值。

```
$.ajax({
type: 'GET',
url: 'http://githubbadge.appspot.com/Jebasuthan',
dataType: 'jsonp',
success: function(json) {
    console.log(json);
    var result = '<h3>Name: ' + json.user.login + '</h3>' +
                 '<p>Forked Repository: ' + json.fork_repos + '</p>' +
                 '<p>Languages: ' + json.languages + '</p>' +
                 '<p>Email-Id: ' + json.user.email + '</p>' +
                 '<p>Location: ' + json.user.location + '</p>' +
                 '<p>Last Updated Date: ' + json.user.updated_at + '</p>' +
                 '<p>Blog: <a target="_blank" href='+ json.user.blog + '>' + json.user.blog + '</a></p>';
       $('#badge').append(result);
   }
}); 
```

[演示](http://jsfiddle.net/Jebasuthan/9eV8s/1/)

# yii - Yii 属性“CUploadedFile.maxWidth”未定义

> ID：14064873
> 
> 赞同：0
> 
> 时间：2012-12-28T05:11:42.903
> 
> 标签：yii

```
$uploadedFile=CUploadedFile::getInstance($model,'image1');
$uploadedFile->maxWidth = 400;
$uploadedFile->maxHeight = 300; 
```

我按照[这里](http://pastebin.com/BSAN20re)的例子。但是我收到错误消息，说“未定义属性“CUploadedFile.maxWidth”。”

是我的 CUploadFile.php 没有更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:06:04.183

该 pastebin 源并没有说明整个故事，因为它没有显示 maxWidth 的定义位置。CUploadedfile [http://www.yiiframework.com/doc/api/1.1/CUploadedFile](http://www.yiiframework.com/doc/api/1.1/CUploadedFile)没有属性 maxWidth。

与其使用 pastebin，不如试试这个扩展，它会做你想做的事情：[http ://www.yiiframework.com/extension/euploadedimage/](http://www.yiiframework.com/extension/euploadedimage/)

# css - 是否所有浏览器都允许我用 rgba 替换颜色#？

> ID：14064876
> 
> 赞同：0
> 
> 时间：2012-12-28T05:12:16.130
> 
> 标签：css

我正在处理的应用程序使用以下 CSS：

```
 background: -moz-linear-gradient(top, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0));
  background: -webkit-gradient(linear, 0 0, 0 100%, from(rgba(0, 0, 0, 0.1)), to(rgba(0, 0, 0, 0)));
  background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0));
  background: -o-linear-gradient(top, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0));
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0)); 
```

我使用了颜色编号，但是否可以对所有这些浏览器使用 rgba，或者有些浏览器不接受 rgba？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:13:28.393

所有这些浏览器都支持 rgba 较新版本

在这里您可以找到有关浏览器支持的更多信息[http://css-tricks.com/examples/RGBaSupport/](http://css-tricks.com/examples/RGBaSupport/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:17:34.697

看看[这个](http://css-tricks.com/rgba-browser-support/)！......我相信它会帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T07:49:26.330

我亲自测试了 CSS3 颜色在 Chrome 23、Firefox 17 和 IE9 中的工作。我还使用[这个站点](http://caniuse.com)来检查浏览器对 CSS3 功能以及 HTML5 的支持。

# java - JPA 中的 @Column 注释

> ID：14064884
> 
> 赞同：1
> 
> 时间：2012-12-28T05:12:58.403
> 
> 标签：java, jpa, orm

我正在尝试保留一个与数据库中不存在的表映射的实体。实体类是

```
 @Entity
 @Table(name = "NEWTABLE")
 public class Account {
       @Id
       @Column(unique=true)
       private int accountNo;
       private String customerName;

       // Respective Getters and Setters 
```

数据库中`NEWTABLE`不存在。当我试图保留这个实体时，它给了我以下错误：

```
Internal Exception: java.sql.SQLException: ORA-00942: table or view does not exist 
```

但是，如果我删除注释`unique=true`中的`@Column`，实体就会被持久化。如果你能告诉我这背后的原因，那将是一个很大的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:28:46.277

您是否首先尝试不使用`unique`注释，然后尝试`Account`使用 unique=true 条件保留对象。

如果是，那么原因可能是正确的，因为它无法更新就地模式以将约束修改为`Unique=true`.

如果您使用的是休眠，请尝试：

```
<property name="hibernate.hbm2ddl.auto">update</property> 
```

如果不存在，它将创建一个模式，并尝试修改现有的模式以匹配您定义的映射。

# jsoup - Jsoup 多类返回空

> ID：14064885
> 
> 赞同：0
> 
> 时间：2012-12-28T05:13:04.140
> 
> 标签：jsoup

我用 Jsoup 刮掉所有

来自以下 DOM 的元素，但它返回空。我不知道错误在哪里。

```
<div class="content bold">
   <div class="main">
       <p>123</p>
       <p>456</p>
       <p>789</p>
   </div>
</div> 
```

这是我的代码片段

```
Elements cont= doc.select(".main:has(p)");
System.out.println(cont.text()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T18:28:12.383

尝试：

```
Elements cont = doc.select(".main p"); 
```

# wpf - 如何在wpf（mvvm）中显示一个ok并取消按钮单击的对话框？

> ID：14064889
> 
> 赞同：0
> 
> 时间：2012-12-28T05:13:17.617
> 
> 标签：wpf, mvvm, showdialog

我正在尝试在单击按钮时显示一个带有确定和取消按钮的对话框。根据对话框结果，我想在 wpf 中保存\取消操作。我不确定如何在 wpf 中显示对话框。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:17:45.383

[从 View Model](http://www.codeproject.com/Tips/499977/Closing-View-from-ViewModel) 文章表单代码项目中查看Close View

[使用 MVVM 模式时显示对话框](http://www.codeproject.com/Articles/36745/Showing-Dialogs-When-Using-the-MVVM-Pattern)

[MVVM 和 DialogResult](http://blog.excastle.com/2010/07/25/mvvm-and-dialogresult-with-no-code-behind/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T20:32:32.887

你不使用 MVVM 来做到这一点。使用 MVVM 模式并不**意味着**永远*不*使用事件和代码隐藏。

在我看来，使用 MVVM 模式的最佳健康组合是在 XAML 中使用绑定和命令以及其他“MVVM-stuff”，以及事件和代码。如果它与 UI 有严格的关系（如消息框、双击或线程处理），请以老式方式使用代码。

所以使用 MessageBox.Show("hello"); 像往常一样在代码隐藏中，因为它与 UI 相关并且对模型/逻辑的意义较小。OpenFileDialog 和其他对话框也是如此。

# iphone - ios 5 和 ios 6 的 Facebook 集成

> ID：14064899
> 
> 赞同：5
> 
> 时间：2012-12-28T05:14:38.803
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我想为 ios 5 和 ios 6 集成 Facebook。

我知道将 facebook 集成到单个 ios（即 ios 5 或 ios 6）中，但不知道如何为 ios 5 和 ios 6 支持 facebook。

换句话说，如何为 ios 5 和 ios 6 集成 facebook？或者在两个 ios 中支持这一点的常用方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-28T05:27:44.067

那么如果你想在 iOS6 中使用 facebook 集成，并且如果 iOS 版本低于 6，你想使用 Facebook SDK for iOS，你可以在`Social Framework`. 此外，您还必须为其导入`Social Framework`。

```
#import<Social/Social.h> 
```

您可以在方法中通过类似这样的`buttonAction`方式检查集成 facebook 服务的可用性

```
- (void)buttonAction:(id)sender
{
    //Check for availability of Facebook integration and use its view controller to share on Facebook
    if(NSClassFromString(@"SLComposeViewController") != nil) {
        SLComposeViewController *fbController=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
            //Use fbController for sharing
        } else {
            // Service not available
        }
    }
    else{
        // Use your code for sharing on iOS versions other than 6.x to authenticate and get an access token.
    }
} 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T07:21:06.207

浏览[ios 5](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)和[ios 6](http://developers.facebook.com/blog/post/2012/09/25/facebook-sdk-for-ios-and-the-ios-6-facebook-integration/)的链接。

使用适用于 ios 5 和 6 的最新 sdk，并点击[链接](https://parse.com/questions/ios-5-support-for-new-sdk)了解详细信息。

检查这个也[链接](https://stackoverflow.com/questions/12735962/supporting-both-ios-5-and-ios-6-with-the-facebook-sdk-3-1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T09:05:40.263

如果您有 xcode 4.5 或更高版本。使用社交框架，您可以在 iOS 上实现 Facebook。还要检查 iPhone 教程的 FB 和 Twitter 集成。[访问 http://kmithi.blogspot.co.uk/2012/10/integrating-facebook-and-twitter-in-ios.html](http://kmithi.blogspot.co.uk/2012/10/integrating-facebook-and-twitter-in-ios.html)

# sql - 在 sql server 2005 db 中选择具有特定模式 (href) 的数据

> ID：14064900
> 
> 赞同：1
> 
> 时间：2012-12-28T05:14:46.977
> 
> 标签：sql, tsql, sql-server-2005

我有一个带有 html 内容列的表格我需要的是从中选择所有当前的 href 内容，例如

```
select 'href="MyFirstPAge.aspx" <table><tr><td> href="http://www.test.com/2009/05/aa-bb.html" </td></tr></table> href="MySecondPage.aspx"' as content 
```

我需要结果

1.  我的第一页.aspx
2.  [http://www.test.com/2009/05/aa-bb.html](http://www.test.com/2009/05/aa-bb.html)
3.  href="MySecondPage.aspx"

知道我该怎么做吗？

我需要所有行中的不同列表。

试过一个功能

```
create function dbo.GetLinks (@t nvarchar(max))
    returns @Links table (link nvarchar(max))
as
begin
    declare @strtpos int 
    SET @strtpos = PATINDEX('%href="http%.aspx"%', @t)
    declare @endpos int 
    SET @endpos = 0
    declare @lnk nvarchar(max)
    while @strtpos > 0
    begin
        select  @endpos = PATINDEX('%.aspx"%', @t)+ 5
          , @lnk = substring(@t ,@strtpos, @endpos - @strtpos +1) -- here is the error 
          , @t= RIGHT (@t, len(@t) - @endpos)
          , @strtpos = PATINDEX('%href="http%.aspx"%', @t)
        insert @Links values(@lnk )
    end 
    return
end
go 
```

但是收到错误消息 536，级别 16，状态 5，行 1 传递给 SUBSTRING 函数的长度参数无效。

样本数据是

> ```
> <a shape="rect" href="http://www.qwewqe.fda.gov/wqewqe/pdf8/wewe.pdf" 
> ```
> 
> target="_blank">系统市场。
> 
> 2010 年，一直在呼吁处理，
> 
> ```
>  target="_blank"> changes. </p><p style="text-align: justify">The  <a shape="rect" href="fghfghfgh.aspx" target="_blank">
>  substantially equivalent.</a> </p><p style="text-align: justify">Per th </p><p style="text-align: justify">market. </p>
>  <p style="text-align: justify">The <a shape="rect" href="asdd.aspx" target="_blank">sub.</a> </p><p style="text-align: 
> ```
> 
> 证明">也许
> 
> 八分之一的修订版
> 
> 评论家 5
> 
> 我们
> 
> 如果
> 
> sdfsdf
> 
> asd
> 
> 萨斯达斯达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:51:29.700

这够了吗？

```
declare @t nvarchar(max), @strtPos1 int, @strtPos2 int, @strtPos3 int
set @t='href="MyFirstPAge.aspx" href="http://www.test.com/2009/05/aa-bb.html" href="MySecondPage.aspx"'

SET @strtPos1 = PATINDEX('%.aspx"%', @t)
SET @strtPos2 = PATINDEX('%.html"%', @t)
SET @strtPos3 = PATINDEX('%href="http%.aspx"%', @t)

select substring(@t, 1, @strtPos1+4) union
select substring(@t, @strtPos3, (@strtPos2+4)-@strtPos3) union
select substring(@t, @strtPos2+7, LEN(@t)) 
```

作为函数

```
CREATE FUNCTION dbo.GetLinks (@t NVARCHAR(MAX))
    RETURNS @Links TABLE (link NVARCHAR(MAX))
AS
BEGIN
    DECLARE @strtPos1 INT, @strtPos2 INT, @strtPos3 INT
    SELECT @strtPos1 = PATINDEX('%.aspx"%', @t), @strtPos2 = PATINDEX('%.html"%', @t), @strtPos3 = PATINDEX('%href="http%.aspx"%', @t)

    INSERT INTO @Links SELECT SUBSTRING(@t, 1, @strtPos1+4)
    INSERT INTO @Links SELECT SUBSTRING(@t, @strtPos3, (@strtPos2+4)-@strtPos3)
    INSERT INTO @Links SELECT SUBSTRING(@t, @strtPos2+7, LEN(@t))

    RETURN
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T16:05:13.307

重写你的函数如下：

```
create function [dbo].[GetLinks] (@t nvarchar(max))
    returns @Links table (link nvarchar(max))
as
begin
    declare @strtpos int
    set @strtpos=100
    declare @endpos int 
    declare @lnk nvarchar(max)
    while @strtpos > 6
    begin
        set @strtpos = PATINDEX('%href="%', @t)+6
        if @strtpos>6 begin
            set @endpos = CHARINDEX ('"',@t,@strtpos+1)
            if @endpos>0 begin
                set @lnk = substring(@t ,@strtpos, @endpos - @strtpos)
                set @t= RIGHT (@t, len(@t) - @endpos)

                insert @Links values(@lnk )
            end
        end
    end 

    return
end 
```

尝试以下示例后：

```
select * from dbo.GetLinks('hello world href="MyFirstPAge.aspx" <table><tr><td> href="http://www.test.com/2009/05/aa-bb.html" </td></tr></table> href="MySecondPage.aspx"') as links 
```

它返回：

```
MyFirstPAge.aspx
http://www.test.com/2009/05/aa-bb.html
MySecondPage.aspx 
```

# ember.js - Ember-skeleton 刷新时间

> ID：14064902
> 
> 赞同：0
> 
> 时间：2012-12-28T05:14:54.700
> 
> 标签：ember.js

由于将所有 js 和 css 文件连接到一个文件中，无论是 app.js 还是 app.css，Ember-skeleton 都太慢而无法用于开发。每次刷新浏览器都会重新处理 Assetfile 吗？有没有人经历过同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:11:25.900

原来是静态文件夹中的图像。我将 img 文件夹移至 assets 文件夹，一切恢复正常。我不认为静态文件夹属于 app 文件夹。

# mysql - 如何重写（或），（和）条件的查询替换

> ID：14064905
> 
> 赞同：2
> 
> 时间：2012-12-28T05:15:10.333
> 
> 标签：mysql, query-performance, sql-execution-plan

1.  查询花费了太多时间来执行，大约 130 分钟。
2.  具有索引但查询未使用索引的表。
3.  表大小约为 3000 万条记录。
4.  请帮助我通过更改（或），（和）条件来重写查询。
5.  该查询未在正常执行中使用，因此我们尝试使用强制索引但没有运气。

询问：

```
SELECT customer_history.customer_id,
        customer_history.row_mod,
        customer_history.row_create,
        customer_history.event_id,
        customer_history.event_type,
        customer_history.new_value,
        customer_history.old_value
FROM customer_history FORCE INDEX (customer_history_n2)
WHERE customer_id >= 1
        AND customer_id < 5000000
        AND (customer_history.row_mod >= '2012-10-01')
        OR (
                customer_history.row_create >= '2012-10-01'
                AND customer_history.row_create < '2012-10-13'
                );

Table structure

    CREATE TABLE `customer_history` (
      `customer_id` int(11) NOT NULL,
      `row_mod` datetime DEFAULT NULL,
      `row_create` datetime DEFAULT NULL,
      `event_id` int(11) DEFAULT NULL,
      `event_type` varchar(45) DEFAULT NULL,
      `new_value` varchar(255) DEFAULT NULL,
      `old_value` varchar(255) DEFAULT NULL,
      KEY `customer_id1` (`customer_id`),
      KEY `new_value_n1` (`new_value`),
      KEY `customer_history_n1` (`row_create`),
      KEY `customer_history_n2` (`row_mod`)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

解释计划：

```
+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
| id | select_type | table            | type | possible_keys       | key  | key_len | ref  | rows     | Extra       |
+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
|  1 | SIMPLE      | customer_history | ALL  | customer_history_n2 | NULL | NULL    | NULL | 18490530 | Using where |
+----+-------------+------------------+------+---------------------+------+---------+------+----------+-------------+
1 row in set (0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:33:39.160

您可以尝试将此查询分为两部分：

```
SELECT customer_history.customer_id,
        customer_history.row_mod,
        customer_history.row_create,
        customer_history.event_id,
        customer_history.event_type,
        customer_history.new_value,
        customer_history.old_value
FROM customer_history
WHERE customer_id >= 1
        AND customer_id < 5000000
        AND (customer_history.row_mod >= '2012-10-01') 
```

和

```
SELECT customer_history.customer_id,
        customer_history.row_mod,
        customer_history.row_create,
        customer_history.event_id,
        customer_history.event_type,
        customer_history.new_value,
        customer_history.old_value
FROM customer_history
WHERE  customer_history.row_create >= '2012-10-01'
       AND customer_history.row_create < '2012-10-13'; 
```

并查看其中哪一个需要更长的时间来执行和优化它们。为了获得与第一个查询相同的结果集，您可以`UNION`在 MySQL 中使用这两个查询，或者简单地从应用程序层单独执行它们并在那里连接结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:34:01.490

啊，我想我知道你的问题是什么。根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)：

> 通过指定 USE INDEX (index_list)，您可以告诉 MySQL 仅使用一个命名索引来查找表中的行。替代语法 IGNORE INDEX (index_list) 可用于告诉 MySQL 不要使用某些特定的索引或索引。如果 EXPLAIN 显示 MySQL 正在使用可能索引列表中的错误索引，这些提示很有用。
> 
> 您也可以使用 FORCE INDEX，它的作用类似于 USE INDEX (index_list)，但另外假设表扫描非常昂贵。换句话说，仅当无法使用给定索引之一来查找表中的行时，才使用表扫描。

换句话说，通过使用 FORCE INDEX，您告诉 MySQL*只*使用`customer_history_n2`索引并跳过所有其他可用索引。您需要从查询中删除 FORCE INDEX 子句，或者将其指定为 this 以便它将使用其他可用列的索引：

```
SELECT customer_history.customer_id,
    customer_history.row_mod,
    customer_history.row_create,
    customer_history.event_id,
    customer_history.event_type,
    customer_history.new_value,
    customer_history.old_value
FROM customer_history
    FORCE INDEX (customer_history_n2, customer_history_n1, customer_id1)
WHERE customer_id >= 1
    AND customer_id < 5000000
    AND (customer_history.row_mod >= '2012-10-01')
    OR (
        customer_history.row_create >= '2012-10-01'
        AND customer_history.row_create < '2012-10-13' ); 
```

# javascript - 使用 Jquery 通过 Div 循环 Div

> ID：14064907
> 
> 赞同：3
> 
> 时间：2012-12-28T05:15:24.153
> 
> 标签：javascript, jquery, animation, loops

JQuery 菜鸟又来了。

这是我要实现的目标的示例。

```
$(function(){
var fourDivs = $('#window > div');
var doSlide = function (){

        if (fourDivs)
            fourDivs
            .delay(1000)
            .animate({marginLeft: 50})
            .delay(1000)
            .animate({marginLeft: 250})
            .delay(500)
            .fadeOut(200)
            .animate({marginLeft: -200})
            .fadeIn(500)

};

doSlide();
setInterval(doSlide, 2000); 
```

});

我认为这是一个有趣的尝试，但很糟糕。

对于那里的所有专家，我的想法是否正确？你们会推荐什么？

我将如何获得这样的动画循环以继续循环通过一类 div？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:21:40.110

[使用 jQuery 的`.each()`功能：](http://api.jquery.com/jQuery.each/)

```
function loop () {
    $('#window > div').each(function (index, myDiv) {
        if (myDiv) {
                myDiv
                .delay(1000)
                .animate({marginLeft: 50})
                .delay(1000)
                .animate({marginLeft: 250})
                .delay(500)
                .fadeOut(200)
                .animate({marginLeft: -200})
                .fadeIn(500);
       }

    });

}

setTimeout(loop, 1000); 
```

编辑：没有正确阅读您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:05:33.203

我建议你试试[jquery api queue](http://api.jquery.com/queue/)，但我不知道这个细节。

# symfony - Doctrine2 FindOneBy 函数返回空数组

> ID：14064908
> 
> 赞同：0
> 
> 时间：2012-12-28T05:15:31.433
> 
> 标签：symfony, doctrine-orm

我正在使用 Symfony2 和教义 2。

我需要知道`username`一个表上是否存在，所以我通过 AJAX 调用这个方法......

```
public function existeUsername()
{
    $req = $this->getRequest();
    $user = $req->request->get('user');
    $em = $this->getDoctrine()->getEntityManager();
    $usuario = $em->getRepository('RECURSIVAUserBundle:Usuario')->findOneByUsername($user);
    if ($usuario): 
        //user found
        $response = new Response(json_encode(array('error' => true, 'usuario' => $usuario, 'user' => $user)));
        $response->headers->set('Content-Type', 'application/json');
        return $response;
    else: 
        //did not found the user
        $response = new Response(json_encode(array('error' => false, 'user' => $user)));
        $response->headers->set('Content-Type', 'application/json');
        return $response;
    endif;
} 
```

该方法按预期工作，如果`username`数据库中存在则返回 true，否则返回 false。但是当从现有用户返回用户数据时`($usuario)`，它总是返回一个空的 JSON 数组 ({}) 而不是预期的对象。有任何想法吗？

如果我`var_dump($usuario`) 在返回响应之前打印出所有正确的字段和值`username`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:58:47.023

事实上，您用户的所有属性都是私有的。然而 json_encode，只编码公共对象属性。

你可以这样实现 JsonSerializable。[在此处](https://stackoverflow.com/a/9942303/1921639)查看更多详细信息或将这些属性设置为公共（更糟糕的解决方案）

希望这可以帮助。

# sql - 使用 1 个查询插入多行

> ID：14064909
> 
> 赞同：10
> 
> 时间：2012-12-28T05:15:33.820
> 
> 标签：sql, ms-access, ms-access-2003

我在使用 ms access 2003 插入带有 1 个查询的多行时遇到问题。当我`INSERT INTO`像下面的代码一样使用时

```
INSERT INTO Employee values ('1','b','c');
INSERT INTO Employee values ('2','d','e'); 
```

问题，ms access总是出现**sql语句结束后发现的popup characters**。那么，有没有办法将数据插入到表中呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T05:32:13.063

使用 Access SQL，您不能组合两个`INSERT`语句。您可以分别运行它们中的每一个。但是，如果您需要使用单个语句来执行此操作，则需要使用更复杂的查询。

```
INSERT INTO Employee
SELECT '1','b','c'
FROM Dual
UNION ALL
SELECT '2','d','e'
FROM Dual; 
```

`Dual`是一个设计为始终只包含一行的自定义表。[您可以使用此 Stack Overflow 答案](https://stackoverflow.com/a/7933927/77335)中的说明创建自己的`Dual`表。

但是，您实际上并不需要为此目的使用自定义表。`Dual`您可以使用仅返回一行的任何表或查询来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:16:53.430

尝试这个

```
INSERT INTO Table ( Column1, Column2 ) VALUES
( Value1, Value2 ), ( Value1, Value2 )

INSERT INTO Employee values (('1','b','c'),('2','d','e')); 
```

参考这里

[在 ms-access 表中插入多行的 SQL 代码](https://stackoverflow.com/questions/1212943/sql-code-to-insert-multiple-rows-in-ms-access-table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:46:45.437

不幸的是，似乎 MS Access 不兼容，除非您有源表，否则只允许插入单个查询。如果您可以将其连接到可以执行查询的工具，那么您可以创建一个循环来运行多个插入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T19:50:31.167

**使用此确认工作查询：**

```
INSERT INTO Product (Code,Name,IsActive,CreatedById,CreatedDate )

SELECT * FROM (

SELECT '10001000' AS Code,'Blackburn sunglasses' AS Name,1 AS IsActive,1 AS CreatedById,'2/20/2015 12:23:00 AM' AS CreatedDate FROM Product

UNION SELECT '10005200' AS Code,'30 panel football' AS Name,1 AS IsActive,1 AS CreatedById,'2/20/2015 12:23:09 AM' AS CreatedDate FROM Product

) ; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-28T05:18:19.743

```
insert into animal (animal_id, name, species)
values ( (1,'Foxi Maxi', 'dog'), (2, 'Dodo',' duck') , (3, 'Garfield', 'cat' ) ) 
```

使用这个例子

# access-rights - IBM Filenet：如何检查访问权限以删除

> ID：14064912
> 
> 赞同：0
> 
> 时间：2012-12-28T05:15:53.810
> 
> 标签：access-rights, filenet-content-engine

如何以编程方式检查当前连接的用户是否有权删除内容引擎对象存储中的文件夹或文档？我可以使用 folder.getAccessAllowed() 方法和 AccessLevel.* 常量来做到这一点吗？(CE 5.0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:32:45.990

`AccessLevel`旨在表示一组个人访问权限。要检查特定权利，您应该使用以下内容：

```
(object.getAccessAllowed() & AccessRight.DELETE_AS_INT) == AccessRight.DELETE_AS_INT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:11:26.597

这是一种方法：

```
int accessAllowed = document.getAccessAllowed();
if (checkRight(accessAllowed, AccessRight.DELETE))
{
    log.trace("Access level "
        + AccessRight.DELETE.toString() + " is present");
}

private boolean checkRight(int rights, AccessRight ar)
{
    return (rights & ar.getValue()) != 0;
} 
```

# c++ - 线程安全和静态函数

> ID：14064914
> 
> 赞同：6
> 
> 时间：2012-12-28T05:16:22.457
> 
> 标签：c++, multithreading

假设我有一个：

```
class base
{
    base(){f(this);};

    static void f(base * b) {(b->d)++;};

    int d;
}; 
```

现在，如果我在 2 个单独的线程上创建了一个 base 类型的对象，方法`f`会被认为是线程安全的吗？我问这个问题是因为通常据我所知，对于线程安全的方法，它不应该使用静态成员或全局变量。但正如你从上面的例子中看到的那样，我决定不将变量设为`d`静态，而是通过 base 的运行实例调用它。

另外，我认为我不需要保护这一行：`(b->d)++;`使用互斥锁，因为每个线程都有一个单独的基实例和变量 d。

我的分析正确吗？有什么我需要注意的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T05:22:48.450

是的，您的构造函数是线程安全的，因为它只访问实例变量（特别是`d`）。它确实表现出未定义的行为，因为它从未初始化中读取`d`以执行增量，但这与线程安全无关。

以下是修复未定义行为的方法：

```
base(): d(0) {f(this);}; 
```

现在它`d`已在初始化列表中初始化，您的程序以可预测的方式运行。

# asp.net - 查询表达式“pProductId =”中的语法错误（缺少运算符）

> ID：14064916
> 
> 赞同：0
> 
> 时间：2012-12-28T05:16:28.970
> 
> 标签：asp.net, image, ms-access, syntax-error

您好我正在尝试检索包含 ie 的 pProductImage。~/Images/pic1.jpg (images url) 来自 products 表，并使用 pProductId 作为标识符，根据 Id 显示不同的图像。

这是我的 catalogue.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.OleDb;

public partial class Catalogue : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string ImageId = Request.QueryString["Img"];

        string sqlText = "SELECT pProductImage FROM Products WHERE pProductId = " +ImageId;

        OleDbConnection mDB = new OleDbConnection(ConfigurationManager.ConnectionStrings["AccessConnection"].ConnectionString);
        OleDbCommand cmd = new OleDbCommand(sqlText, mDB);

        mDB.Open();
        OleDbDataReader rdr = cmd.ExecuteReader();
        if (rdr.Read())
        {
            Response.BinaryWrite((byte[])rdr["pProductImage"]);
        }
        mDB.Close();

    }
} 
```

在我的 cataglogue.aspx 中（要在图像控件中显示的图像）

```
<div>

    <img src="Catalogue.aspx?pProductId=2" alt="" />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:42:50.563

如果您将图像 url 存储在数据库表中，那么您需要将其视为字符串数据 - 例如

在代码隐藏中：

```
protected string GetProductImgUrl(int productId)
{
   var sqlText = "SELECT pProductImage FROM Products WHERE pProductId = " + productId.ToString();
   using(var mDB = new OleDbConnection(ConfigurationManager.ConnectionStrings["AccessConnection"].ConnectionString))
   {
       mDB.Open();
       var cmd = new OleDbCommand(sqlText, mDB);
       using (var rdr = cmd.ExecuteReader())
       {
          if (rdr.Read())
          {
            return ResolveUrl((rdr["pProductImage"]).ToString());
          }
       }
   }
   return ResolveUrl("~/images/NotAvailable.png");     // Not available image
} 
```

在加价中

```
<div>
    <img src='<%= GetProductImgUrl(2) %>' alt="" />
</div> 
```

# objective-c - 使用不同的个性化参数与 SUP 2.1.3 同步花费太多时间

> ID：14064923
> 
> 赞同：0
> 
> 时间：2012-12-28T05:16:58.917
> 
> 标签：objective-c, xcode4.3, sup

我正在尝试使用`XCode`with`SUP 2.1.3`作为后端在 Objective C 中开发一个应用程序。我`MBOs`在后端有很多。现在我正在使用个性化参数与 SUP 同步。

所以现在我面临一个问题，比如从不同的地方检索数据，`MBOs`我必须使用不同的个性化参数同步多次`MBOs`。所以当我运行应用程序时，一次又一次地同步它需要太多时间。我应该怎么做如何避免这种情况？

我可以使用任何同步组或其他东西吗？

谁能帮我解决这个问题。我对这项技术完全陌生。

非常感谢您提前提供的任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:37:03.440

实际上，我认为我的问题现在已经得到了一些解决。我所做的是，我使用了 'synchronize:synhronizationGroup' 方法而不是 'synchronize' 函数。它使我的执行速度更快，也避免了一些异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T19:02:47.813

我知道这个问题，请记住，一组新的 Personalizationparams 不会影响完整的 Deltasync，您必须获取引用新参数的新数据。

还要记住，SUP 服务器需要很多时间来调查 delta。

# ruby - 在字符串连接中正确使用“#”

> ID：14064932
> 
> 赞同：-1
> 
> 时间：2012-12-28T05:17:52.403
> 
> 标签：ruby

我写了这段代码，但不知道为什么它不打印第二句，它只打印第一部分，即“Some string concat is like”。我也期待从 TalkToMe 方法中看到句子的其余部分。

```
object1 = Object.new

def object1.TalkToMe
  puts ("Depending on the time, they may be in one place or another.")
end

object1.TalkToMe

puts "Some string concat is like " #{object1.TalkToMe} " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:20:14.673

首先，`TalkToMe`应该`talk_to_me`按照惯例。其次，只返回字符串，不要使用`puts`它，因为它会首先被评估，然后字符串 'Some string...' 将在单独的行上被评估。

你原来的问题：

改变

`puts "Some string concat is like " #{object1.TalkToMe} "`

对此

`puts "Some string concat is like #{object1.TalkToMe} "`

语法高亮显示`#{object1.TalkToMe}`被视为注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T05:20:29.380

它应该这样做，但不要结束字符串。

替换`puts "Some string concat is like " #{object1.TalkToMe} "`为`puts "Some string concat is like #{object1.TalkToMe} "`

注意去掉句子中间的“

# mysql - utf8_unicode_ci 排序规则是否支持泰语和印尼语？

> ID：14064933
> 
> 赞同：-1
> 
> 时间：2012-12-28T05:17:55.290
> 
> 标签：mysql, unicode, utf-8

我正在创建一个多语言 WordPress 网络/多站点。网络中的每个站点都专用于一个国家。将有一个泰语站点和另一个印尼语站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:39:35.310

从[这里](http://dev.mysql.com/doc/refman/5.6/en/charset-unicode-sets.html)：

> MySQL 根据 [http://www.unicode.org/reports/tr10/](http://www.unicode.org/reports/tr10/)中描述的 Unicode 排序算法 (UCA) 实现 xxx_unicode_ci 排序规则。排序规则使用版本 4.0.0 UCA 权重键： [http](http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt) ://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt ... 尚不支持某些字符。

您要求的排序规则应该包含在其中（我找到了泰语和巴哈萨语字符），但您最好在上线之前尝试一些示例文本。

# google-drive-api - google drive sdk，将pdf转换为google docs

> ID：14064934
> 
> 赞同：1
> 
> 时间：2012-12-28T05:18:09.303
> 
> 标签：google-drive-api

当我上传任何文件时，它会自动通过 php 代码以 google doc 格式帐户添加到我的 google drive 中。

执行此操作的步骤是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:22:31.007

您需要插入文件，确保传递`convert=true`参数。试用[PHP 快速入门指南](https://developers.google.com/drive/quickstart-php)以开始使用。

# javascript - Javascript缩放不同的标签

> ID：14064942
> 
> 赞同：0
> 
> 时间：2012-12-28T05:19:07.193
> 
> 标签：javascript, jquery, html, tabs, zooming

我用按钮和鼠标滚轮功能做了一个简单的放大和缩小功能。主要概念是限制最大缩放级别和最小缩放级别。

我通过两种方式成功地做到了

[箱 1](http://jsbin.com/itekek/26) [箱 2](http://jsbin.com/itekek/46)

但我试图在具有唯一 ID 或按类别的选项卡部分中进行此操作。

我的剧本

```
 var zoomLevel = 100;
 var maxZoomLevel = 150;
 var minZoomLevel = 50;
 var initW=0,initH=0;

 function zoom(zm) {
var img=document.getElementById("pic");
if(zm > 1){
    if(zoomLevel < maxZoomLevel){
        zoomLevel+=10;
    }else{
        return;
    }
}else if(zm < 1){
    if(zoomLevel > minZoomLevel){
        zoomLevel-=10;
    }else{
        return;
    }
}
img.style.width = (initW*zoomLevel/100)+"px";
img.style.height = (initH*zoomLevel/100)+"px";
img.style.marginLeft = ((initW-img.width)/2) + "px";
img.style.marginTop = ((initH-img.height)/2) + "px";
}

window.onload=function(){
 var img=document.getElementById("pic");
 initW=img.width;
 initH=img.height;
 img.onmousewheel=function(e){
e=e||window.event;
if(e.wheelDelta>=120) zoom(1.1);
else zoom(0.9);
};
if(/Firefox/.test(navigator.userAgent)){
img.addEventListener("DOMMouseScroll",function(e){
  if(e.detail<0) zoom(1.1);
  else if(e.detail>0) zoom(0.9);
  e.preventDefault();
 },false);
 }
 }; 
```

在这里，我通过使用**GetElementById** 来访问我的图像标签来获取我的元素是否有任何方法可以访问其他选项卡中的所有 img 标签。

我也试过**getElementsbyClassName**但它不能正常工作，只是检索节点列表。

我如何在这里访问所有三个图像

当前[BIN](http://jsbin.com/itekek/51/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:54:08.860

您已为所有三个图像分配了相同的 id ( `id="pic"`)。你不能这样做，ID 必须是唯一的。

如果您更改它们的 ID（例如：pic、pic2、pic3），并将其作为参数传递给您的缩放函数，那么所有选项卡都会缩放。

因此，将缩放功能更改为如下所示：

```
function zoom(zm, id) {
  var img=document.getElementById(id);
  ...
} 
```

并使您的 html 看起来像这样（仅一个示例）：

```
<div id="tabs-2">
  <input type="button" value ="-" onClick="zoom(0.9, 'pic2')"/>
  <input type="button" value ="+" onClick="zoom(1.1, 'pic2')"/>

  <div id="thediv">
   <img id="pic2" src="http://stereo-ssc.nascom.nasa.gov/beacon/t0193.jpg"/>
  </div>
</div> 
```

现在这三个都将单独缩放。这是一个展示它的[jsbin](http://jsbin.com/itekek/54/edit)。

但是，有一个错误。您用于跟踪缩放状态的变量正在选项卡之间共享。这意味着“缩放限制”并没有真正强制执行：您可以将一个选项卡一直向下缩放，然后将下一个选项卡一直向上缩放。重复此操作以使任何图像尽可能大或小。我不认为这是你想要的，但我将把它留给你来解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:25:34.987

你需要使用不同的ID

```
var img=document.getElementById("pic1");
var img=document.getElementById("pic2");` 
```

# python - 将字符串转换为列表并删除前缀和后缀

> ID：14064945
> 
> 赞同：0
> 
> 时间：2012-12-28T05:19:50.140
> 
> 标签：python, string, list

我想转换形式的字符串：

> {{0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1}, {1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0}, {0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0}, {1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0}, {1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0}}

到一个看起来完全一样的列表中（也就是说，我有一个字符串，就像它是一个列表一样，除了我需要将每个 { 替换为 [ 并将每个 } 替换为 ] 以便将其作为列表使用蟒蛇。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T05:22:16.017

```
eval(s.replace("{", "[").replace("}", "]")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T05:22:23.297

您将需要标准库中的两个函数：

*   字符串替换
*   ast.literal_eval

# python - 用数字附加序列中的所有可能性

> ID：14064954
> 
> 赞同：0
> 
> 时间：2012-12-28T05:21:20.380
> 
> 标签：python, append, sequence

我有一个问题正在消耗我的大脑。假设变量 I 存储一个序列，变量 II 存储一个序列，变量 III 也存储一个序列。变量 one 将代表数字 1、下一个 2 和下一个 3；然后我有另一个关键变量，其中包含这 3 个序列的随机字符。考虑到这个事实，我可以很容易地将这个关键变量的字符翻译成对应的数字。在示例中，`x = 'afh'`，比，说 是相同的`x = '123'`，因为 A OR B OR C = 1，依此类推。

现在是复杂的部分：

当关键变量 x 被转换为数字时，每个字符单独，我也可以从结果中随机返回字符。例如：`x = '123'`，那么我可以返回一个类似`['a','e','f']`, 或的列表`['b','d','i']`，特别是如果我使用`random.choice()`. 由此，我不知道该怎么做是：

如何将变量 I、II、III 的所有可能变化附加到列表中。例如：

```
['adg','beh','cfi','aei','ceg',...] 
```

我知道如何打印无休止的随机组合，但在这种情况下，我得到了重复，我不想要它们。我想将 I、II 和 III 之间所有可能的变化都附加到一个列表中，因为当它们被翻译成数字时，我可以从对应的序列中返回任何字符。好吧，我希望我的例子是不言自明的。非常感谢大家的关注！

```
I = 'abc' # 1
II = 'def' # 2
III = 'ghi' # 3
x = 'afh' # Random possibility: It could be an input.
L = []
LL = []

for i in range(len(x)):
    if x[i] in I:
        L.append(1)
    if x[i] in II:
        L.append(2)
    if x[i] in III:
        L.append(3)

for i in range(len(L)): # Here lies the mistery...
    if L[i] == 1:
        LL.append(I) 
    if L[i] == 2:
        LL.append(II)
    if L[i] == 3:
        LL.append(III)

print L
print LL 
```

输出是：

```
[1, 2, 3]

['abc', 'def', 'ghi'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:23:46.117

以下是我将如何重写您的代码。像你这样的冗长的 if 语句是一种很大的代码气味。我将序列放入一个元组并使用单个循环。我还用列表理解替换了第二个循环。

顺便说一句，如果您像明智的人一样使用基于零的索引，也可以简化索引。

```
I = 'abc' # 1
II = 'def' # 2
III = 'ghi' # 3
x = 'afh' # Random possibility: It could be an input.
L = []
LL = []

lists = I, II, III

for c in x:
    for i, seq in enumerate(lists):
        if c in seq:
            L.append(i+1)

LL = [lists[i-1] for i in L]

print L
print LL 
```

另外，一定要检查`itertools`模块，特别是`product`功能。目前尚不清楚您的意思，但是 product 为您提供了每个序列列表中的项目的所有组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:51:21.093

非常感谢锑！答案正是来自 itertools 的 product()。带有它的代码要简单得多：

```
from itertools import *

I = 'abc' # 1
II = 'def' # 2
III = 'ghi' # 3

IV = product(I,II,III)

for i in IV:
    print i 
```

输出正是我想要的，每一种可能的组合：

```
('a', 'd', 'g')
('a', 'd', 'h')
('a', 'd', 'i')
('a', 'e', 'g')
('a', 'e', 'h')
('a', 'e', 'i')
('a', 'f', 'g')
('a', 'f', 'h')
('a', 'f', 'i')
('b', 'd', 'g')
('b', 'd', 'h')
('b', 'd', 'i')
('b', 'e', 'g')
('b', 'e', 'h')
('b', 'e', 'i')
('b', 'f', 'g')
('b', 'f', 'h')
('b', 'f', 'i')
('c', 'd', 'g')
('c', 'd', 'h')
('c', 'd', 'i')
('c', 'e', 'g')
('c', 'e', 'h')
('c', 'e', 'i')
('c', 'f', 'g')
('c', 'f', 'h')
('c', 'f', 'i') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T05:58:12.380

```
 python 3.2

    [(i,v,c) for i in I for v in II for c in III] 
```

# android - 是否可以在尚未创建的哈希表中分配位置？

> ID：14064955
> 
> 赞同：0
> 
> 时间：2012-12-28T05:21:30.503
> 
> 标签：android, hashtable

简而言之，我想将一个 arrayList 分配给哈希表中尚未创建的位置。

举个例子，假设我的哈希表在它的第一个位置有一些东西，但我需要把一些东西放在它的第四个位置。当我现在尝试这个时，它似乎不可能，因为它只有在我分配第 4 位之前将值放在第 2 和第 3 位置时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:27:58.530

HashTable 维护映射而不是序列，您将值与键一起放置，但不会放在指定的索引处，如 1,2 或 4。对于索引集合，请使用 list 或证明使用 hashtable 与 index 处的值的原因。

# javascript - 什么 javascript 库最适合绘制具有多个系列的折线图，每个系列的点数都很少

> ID：14064966
> 
> 赞同：2
> 
> 时间：2012-12-28T05:22:29.550
> 
> 标签：javascript, html, charts

我需要在 HTML 页面上的单个绘图上绘制 60 个（将来更多）25 个点系列。整个图应该是可缩放和可过滤的（用户应该能够隐藏除所选系列之外的所有系列或仅隐藏所选系列）。

有人知道最适合此类任务的 javascript 图表库吗？当前的实现适用于 Highcharts 并且它在“隐藏除一个选定的系列之外的所有系列”功能时窒息。

也许我可以坚持使用 Highcharts，但我真的需要一种方法来*快速*隐藏所有系列，除了点击的系列。

**更新：**

好的，伙计们，我自己找到了可接受的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:25:33.047

看看[人力车](http://code.shutterstock.com/rickshaw/)。图表看起来很不错。也许可以让它做你想做的事？

如果没有，也许试试[Raphaël JS](http://raphaeljs.com/) 对于图表也很不错，并且还有用于图表的扩展 gRaphaël。

也许其中之一可能会做你所追求的:)

**编辑**

我也会将[Flot](http://www.flotcharts.org/)加入其中。我刚刚在一个项目中使用过它，它在大型数据集上运行得非常好，而且非常灵活和可扩展。值得关注

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T08:26:33.160

试试[amCharts.com](http://amcharts.com) 这是 JS fiddle 实现了您的场景：jsfiddle.net/zeroin/gqtmN/ 单击图例条目会隐藏所有图形并显示您单击的图形。

以及源代码，按照 SO 的要求：

```
var chart;

var chart;
var chartData = [];

function generateChartData() {
    var firstDate = new Date();
    firstDate.setDate(firstDate.getDate() - 60);

    for (var i = 0; i < 25; i++) {
        var newDate = new Date(firstDate);
        newDate.setDate(newDate.getDate() + i);

        var obj = {
            date: newDate
        };

        for (var j = 0; j < 60; j++) {
            obj["val" + j] = Math.round(Math.random() * (j + 1) * 10);
        }
        chartData.push(obj);
    }
}

AmCharts.ready(function() {

    generateChartData();

    chart = new AmCharts.AmSerialChart();
    chart.marginTop = 0;
    chart.autoMarginOffset = 5;
    chart.pathToImages = "http://www.amcharts.com/lib/images/";
    chart.zoomOutButton = {
        backgroundColor: '#000000',
        backgroundAlpha: 0.15
    };
    chart.dataProvider = chartData;
    chart.categoryField = "date";

    var categoryAxis = chart.categoryAxis;
    categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
    categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
    categoryAxis.dashLength = 2;
    categoryAxis.gridAlpha = 0.15;
    categoryAxis.axisColor = "#DADADA";

    for (var j = 0; j < 60; j++) {
        var graph = new AmCharts.AmGraph();
        graph.title = "series " + j;
        graph.valueField = "val" + j;
        graph.hidden = true;
        chart.addGraph(graph);
    }

    chart.graphs[0].hidden = false;

    var chartCursor = new AmCharts.ChartCursor();
    chartCursor.cursorPosition = "mouse";
    chart.addChartCursor(chartCursor);

    var chartScrollbar = new AmCharts.ChartScrollbar();
    chart.addChartScrollbar(chartScrollbar);

    var legend = new AmCharts.AmLegend();
    legend.addListener("showItem", handleAll);

    chart.addLegend(legend);
    chart.write("chartdiv");
});

function handleAll(event) {
    for (var j = 0; j < 60; j++) {
        chart.graphs[j].hidden = true;
    }

    event.dataItem.hidden = false;
    chart.validateNow();
}​ 
```

免责声明：我是 amCharts 的作者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:58:35.280

[teechart](/questions/tagged/teechart "显示标记为“teechart”的问题") HTML5 Charting Javascript 允许隐藏系列将其“可见”属性设置为 false。您可以使用系列 onclick 事件隐藏除单击的系列之外的所有其他系列，例如：

```
Chart1.series.each(function(series) { series.onclick=clickedSeries; });

function clickedSeries(series, point) {
  Chart1.series.each(function(s) { s.visible = (s === series) });
  Chart1.draw();
} 
```

这里有一个完整的在线演示：

[http://www.steema.com/files/public/teechart/html5/v2012.12.14.1.4/demos/](http://www.steema.com/files/public/teechart/html5/v2012.12.14.1.4/demos/)

问候大卫伯内达 www.teechart.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-05T19:21:17.877

好吧，对不起，我对你所有的答案都投了赞成票，但我对自己的解决方案完全满意。

在 Highcharts 上禁用比例的自动更新可以提高性能：

```
new Highcharts.Charts({
    chart: {
        ignoreHiddenSeries: false,
        reflow: false
    }
}); 
```

这样隐藏/显示系列作品是可以接受的。只是Highcharts的所有其他功能完全让我满意。

系列本身的大规模隐藏/显示并不那么重要，我只对提高性能感兴趣。

# magento - Magento：由于持续购物车，登录和注册页面的模板设计不正确

> ID：14064971
> 
> 赞同：1
> 
> 时间：2012-12-28T05:22:56.243
> 
> 标签：magento

我正在使用 Magento 1.7.0.2，我的登录和注册页面设计有问题。它没有从我的自定义主题中获取模板路径。相反，它从基本持久文件夹中获取模板路径。

例如，登录模板路径取自 **frontend/base/default/template/persistent/customer/form/login.phtml**而不是 **frontend/default/MY_THEME/template/customer/form/login.phtml**

奇怪的是，这个持久文件夹是如何起作用的。

**我也尝试下面的事情**

**1) 将持久性文件夹从设计基础目录复制到您的自定义主题目录。然后在您复制的文件上修改设计。**

**2）禁用持久购物车功能。您可以通过以下方式执行此操作：系统 -> 配置 -> 客户 -> 持久购物车 -> 常规选项 -> 启用持久性 = 否**

**3）通过编辑文件直接禁用模块：app/etc/modules/Mage_Persistent.xml 通过设置active = false。**

还刷新了我的 Magento 缓存和浏览器缓存！

除了这个，我还必须应用其他解决方案或建议吗？

等待您的善意回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T06:22:21.803

1.  将**login.phtml**从**frontend/base/default/template/persistent/customer/form/**复制到**frontend/default/MY_THEME/template/persistent/customer/form/**（您已经这样做了）
2.  **清除 Magento 缓存。**甚至您的浏览器缓存。

如果仍然没有出现，请检查文件夹路径。**如果您放置正确**，它**应该**在提示中显示主题模板路径。Magento 中没有导致这种问题的错误。确保您复制持久 login.phtml 的主题是您在设计设置中使用的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T10:11:01.483

将模板从 frontend/default/MY_THEME/template/customer/form/login.phtml 复制到 frontend/default/MY_THEME/template/persistent/customer/form/Login.phtml，然后刷新缓存。现在应该加载您对 Login.phtml 所做的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T10:41:55.840

有时模块可以覆盖用于登录表单的模板。也许您缺少模板文件。您应该检查布局 xml 句柄，例如：

```
<customer_account_login>
   <reference name="customer_form_login">
   <action method="setTemplate"><template>template/name.phtml</template></action>
   </reference>
</customer_account_login> 
```

您应该检查的另一件事是用于登录的块是否是核心块，因为模块可能再次发生模板覆盖。

# javascript - 使用 Raphael JS 的跨浏览器问题

> ID：14064974
> 
> 赞同：0
> 
> 时间：2012-12-28T05:23:13.140
> 
> 标签：javascript, cross-browser, raphael

我在 raphael JS 中创建一个矩形元素作为由 raphael JS 生成的 SVG 圆形元素的工具提示。我无法使用 Internet Explorer 中的以下代码访问圆心的坐标（我需要放置矩形工具提示）。

```
var c = {};
c.x = parseInt(c_element.node.attributes[0].nodeValue);
c.y = parseInt(c_element.node.attributes[1].nodeValue);

//code for the rectangle element tooltip
r = paper.rect(c.x,c.y,50,50); 
```

它在 Firefox 中运行良好。但在 IE 中，工具提示是在包含我的 raphael JS 论文的 div 的左上角创建的，而不是根据需要在圆圈的中心创建。

如何解决这个跨浏览器问题？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:08:05.633

我不确定为什么 IE 不喜欢这个，但有一个更简单的方法：

```
c.x = c_element.attr("cx");
c.y = c_element.attr("cy"); 
```

[jsFiddle](http://jsfiddle.net/G77Zw/1/)

如果您将 Raphael 对象记录到控制台，您可以查看“attrs”属性以查看其中的内容。每种类型的 Raphael 对象都不同。

虽然我们都在这里：我强烈建议您为工具提示使用绝对定位的 div。与 SVG 文本元素相比，HTML 可以更轻松地处理文本换行和调整工具提示大小以适应不同数量的文本。看到[这个答案](https://stackoverflow.com/questions/13994031/hoverout-too-slow/13995065#13995065)。（无论您使用什么，您仍然需要访问圆的坐标。）

# scala - Gradle 无法编译基本 Scala 项目

> ID：14064976
> 
> 赞同：5
> 
> 时间：2012-12-28T05:23:42.660
> 
> 标签：scala, gradle

我似乎无法让 gradle 正确编译一个简单的 Scala 项目。该目录如下所示：

```
.
├── build.gradle
└── src
    └── Main.scala 
```

`build.gradle`很简单：

```
apply plugin: 'scala'

sourceSets {
    main {
        scala {
            srcDir 'src'
        }
    }
} 
```

它因这个迷人的小错误而失败：

```
* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileScala'.
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
        at org.gradle.internal.Factories$1.create(Factories.java:22)
        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:179)
        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:232)
        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:138)
        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
        at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.executeTask(DefaultTaskPlanExecutor.java:52)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.processTask(DefaultTaskPlanExecutor.java:38)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:30)
        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
        at org.gradle.internal.Factories$1.create(Factories.java:22)
        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:124)
        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:112)
        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:130)
        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:158)
        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:113)
        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:81)
        at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:38)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:39)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:25)
        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
        at org.gradle.api.internal.Actions$RunnableActionAdapter.execute(Actions.java:137)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
        at org.gradle.launcher.Main.doAction(Main.java:48)
        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
        at org.gradle.launcher.Main.main(Main.java:39)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:32)
        at org.gradle.launcher.GradleMain.main(GradleMain.java:26)
Caused by: java.lang.NullPointerException: Cannot invoke method withInputStream() on null object
        at org.gradle.api.internal.project.AntBuilderDelegate.taskdef(DefaultIsolatedAntBuilder.groovy:136)
        at org.gradle.api.internal.tasks.scala.AntScalaCompiler$_execute_closure1.doCall(AntScalaCompiler.groovy:62)
        at org.gradle.api.internal.ClosureBackedAction.execute(ClosureBackedAction.java:58)
        at org.gradle.util.ConfigureUtil.configure(ConfigureUtil.java:130)
        at org.gradle.util.ConfigureUtil.configure(ConfigureUtil.java:91)
        at org.gradle.util.ConfigureUtil$configure.call(Unknown Source)
        at org.gradle.api.internal.project.DefaultIsolatedAntBuilder.execute(DefaultIsolatedAntBuilder.groovy:112)
        at org.gradle.api.internal.project.IsolatedAntBuilder$execute.call(Unknown Source)
        at org.gradle.api.internal.tasks.scala.AntScalaCompiler.execute(AntScalaCompiler.groovy:61)
        at org.gradle.api.internal.tasks.scala.AntScalaCompiler.execute(AntScalaCompiler.groovy)
        at org.gradle.api.internal.tasks.scala.DefaultScalaJavaJointCompiler.execute(DefaultScalaJavaJointCompiler.java:35)
        at org.gradle.api.internal.tasks.scala.DefaultScalaJavaJointCompiler.execute(DefaultScalaJavaJointCompiler.java:25)
        at org.gradle.api.internal.tasks.scala.DelegatingScalaCompiler.execute(DelegatingScalaCompiler.java:31)
        at org.gradle.api.internal.tasks.scala.DelegatingScalaCompiler.execute(DelegatingScalaCompiler.java:22)
        at org.gradle.api.internal.tasks.compile.IncrementalJavaCompilerSupport.execute(IncrementalJavaCompilerSupport.java:33)
        at org.gradle.api.internal.tasks.compile.IncrementalJavaCompilerSupport.execute(IncrementalJavaCompilerSupport.java:23)
        at org.gradle.api.tasks.scala.ScalaCompile.compile(ScalaCompile.java:131)
        at org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:216)
        at org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:122)
        at org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:147)
        at org.gradle.api.tasks.scala.ScalaCompile_Decorated.invokeMethod(Unknown Source)
        at org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23)
        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:161)
        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:156)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:472)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:461)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
        ... 57 more

BUILD FAILED 
```

我`gradle --version`的是：

```
------------------------------------------------------------
Gradle 1.3
------------------------------------------------------------

Gradle build time: Tuesday, November 20, 2012 11:37:38 AM UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.6.0_24 (Sun Microsystems Inc. 20.0-b12)
OS: Linux 3.2.0-29-generic amd64 
```

世界到底出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T07:01:05.380

如文档和示例中所示，您尚未声明要使用的 Scala 版本。（错误消息在即将发布的 Gradle 1.4 中得到修复。）

```
repositories {
    mavenCentral()
}

dependencies {
    scalaTools "org.scala-lang:scala-compiler:2.9.2"
    compile "org.scala-lang:scala-library:2.9.2"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T17:10:07.270

我在 Gradle 2.1 上遇到了这个问题。（虽然我没有得到同样的错误，但谷歌为我找到了这个。）我有一个“原因：：编译失败，因为内部编译器错误；有关详细信息，请参阅错误输出。” 错误，这并没有告诉我任何事情嘿。

我没有[在文档](http://www.gradle.org/docs/current/userguide/scala_plugin.html)中看到任何表明我需要使用 scalaTools 或类似的东西。

我最终关闭了基于 ant 的编译以使用 TypeSafe Zinc 编译器

```
tasks.withType(ScalaCompile) {
    scalaCompileOptions.useAnt = false
} 
```

# javascript - 滑动不工作

> ID：14064977
> 
> 赞同：0
> 
> 时间：2012-12-28T05:23:45.557
> 
> 标签：javascript, jquery, html, css

我需要左侧的导航选项卡在悬停时向下滑动其内容。但是代码不起作用。可能是什么问题。

```
 <ul class="nav nav-tabs nav-stacked">
    <li  id = "mousehover">
       <a style="background-color:#f78144; color: #000; text-align: center;" href="#">Time  Table</a>
    </li>
  </ul>
  <div id = "hovercontent">
    Contents 1 
  </div>

<script type = "script/javascript">
  $(document).ready(function(){
     $("#mousehover").hover(function(){
        $("#hovercontent").slideDown("slow");
     });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T05:26:17.693

代替

```
<script type="script/javascript"> 
```

和

```
<script type="text/javascript"> 
```

或者只是使用

```
<script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T05:34:56.270

```
<script type = "text/javascript">
  $(document).ready(function(){
     $("#mousehover").hover(function(){
        $("#hovercontent").slideDown("slow");
     });
  });
</script> 
```

用文本/javascript替换脚本/javascript

# glassfish - 启动 GlassFish 2.1 时出错

> ID：14064980
> 
> 赞同：0
> 
> 时间：2012-12-28T05:24:07.973
> 
> 标签：glassfish

我在我的应用程序中使用 GlassFish 2.1。

但似乎 GlassFish 启动设置存在一些问题。

启动 GlassFish 时出现以下错误。

```
 SEVERE: loader.error_while_loading_app_desc
java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/MEjbApp
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)

SEVERE: ERROR while loading application MEjbApp
SEVERE: LDR5006: Failed to load deployment descriptor
com.sun.enterprise.config.ConfigException: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/MEjbApp
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:389)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)
Caused by: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/MEjbApp
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    ... 22 more

SEVERE: core.unexpected_error_occured_while_loading_system_app
javax.management.MBeanException
    at com.sun.enterprise.server.ApplicationLoader.createRootMBean(ApplicationLoader.java:295)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:398)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)
Caused by: java.lang.NullPointerException
    at com.sun.enterprise.management.util.J2EEManagementObjectManager.createAppMBean(J2EEManagementObjectManager.java:547)
    at com.sun.enterprise.server.ApplicationLoader.createRootMBean(ApplicationLoader.java:284)
    ... 17 more

SEVERE: loader.error_while_loading_app_desc
java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__ejb_container_timer_app
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)

SEVERE: ERROR while loading application __ejb_container_timer_app
SEVERE: LDR5006: Failed to load deployment descriptor
com.sun.enterprise.config.ConfigException: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__ejb_container_timer_app
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:389)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)
Caused by: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__ejb_container_timer_app
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    ... 22 more

SEVERE: core.unexpected_error_occured_while_loading_system_app
javax.management.MBeanException
    at com.sun.enterprise.server.ApplicationLoader.createRootMBean(ApplicationLoader.java:295)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:398)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)
Caused by: java.lang.NullPointerException
    at com.sun.enterprise.management.util.J2EEManagementObjectManager.createAppMBean(J2EEManagementObjectManager.java:547)
    at com.sun.enterprise.server.ApplicationLoader.createRootMBean(ApplicationLoader.java:284)
    ... 17 more

SEVERE: loader.error_while_loading_app_desc
java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__JWSappclients
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)

SEVERE: ERROR while loading application __JWSappclients
SEVERE: LDR5006: Failed to load deployment descriptor
com.sun.enterprise.config.ConfigException: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__JWSappclients
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:389)
    at com.sun.enterprise.server.ApplicationLoader.<init>(ApplicationLoader.java:112)
    at com.sun.enterprise.server.TomcatApplicationLoader.<init>(TomcatApplicationLoader.java:88)
    at com.sun.enterprise.server.ExtendedApplicationLoader.<init>(ExtendedApplicationLoader.java:94)
    at com.sun.enterprise.server.pluggable.ExtendedApplicationLoaderFactory.createApplicationLoader(ExtendedApplicationLoaderFactory.java:63)
    at com.sun.enterprise.server.ApplicationManager.getLoader(ApplicationManager.java:166)
    at com.sun.enterprise.server.AbstractManager.loadOneSystemApp(AbstractManager.java:395)
    at com.sun.enterprise.server.AbstractManager$SystemAppStarter.doRun(AbstractManager.java:664)
    at com.sun.appserv.management.util.misc.RunnableBase.runSync(RunnableBase.java:304)
    at com.sun.appserv.management.util.misc.RunnableBase._submit(RunnableBase.java:176)
    at com.sun.appserv.management.util.misc.RunnableBase.submit(RunnableBase.java:210)
    at com.sun.enterprise.server.AbstractManager.loadSystem(AbstractManager.java:331)
    at com.sun.enterprise.server.SystemAppLifecycle.loadSystemApps(SystemAppLifecycle.java:162)
    at com.sun.enterprise.server.SystemAppLifecycle.onStartup(SystemAppLifecycle.java:108)
    at com.sun.enterprise.server.ApplicationServer.onStartup(ApplicationServer.java:449)
    at com.sun.enterprise.server.ondemand.OnDemandServer.onStartup(OnDemandServer.java:134)
    at com.sun.enterprise.server.PEMain.run(PEMain.java:409)
    at com.sun.enterprise.server.PEMain.main(PEMain.java:336)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.enterprise.server.PELaunch.main(PELaunch.java:415)
Caused by: java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__JWSappclients
    at com.sun.enterprise.deployment.deploy.shared.FileArchive.open(FileArchive.java:79)
    at com.sun.enterprise.instance.AppsManager.getAppDescriptor(AppsManager.java:356)
    ... 22 more 
```

即使当我尝试部署应用程序时，它也没有提供任何错误详细信息或消息，例如“应用程序部署成功”。

谁能告诉我，什么是 javax.management.MBeanException。什么时候生成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:51:15.570

看起来真正的问题是这样的：`java.io.FileNotFoundException: D:/glassfish/domains/domain1/applications/j2ee-apps/__JWSappclients`

您可以尝试通过删除文件夹来解决此问题`D:/glassfish/domains/domain1/applications/j2ee-apps`。然后，您可以尝试 Glassfish 启动时是否没有错误并重新部署您的应用程序。如果在部署期间错误再次出现，则说明您的应用程序有问题。您应该添加一些有关您的环境的信息来详细描述问题。

# c# - windows phone 7 - 在隔离存储中保存图像状态

> ID：14064983
> 
> 赞同：0
> 
> 时间：2012-12-28T05:24:17.450
> 
> 标签：c#, image, windows-phone-7

你好朋友我是 Windows 手机的新手正在开发一款用于学习的应用程序

这是一个带有一组图像的单页应用程序，并且正在基于**Image_tap()**显示图像，它运行良好。**现在我想在Application_closure**时保存图像状态（图像源）并且我想检索状态**Application_launching**

在**MainPage.xaml.cs**文件中

```
 PhoneApplicationService phoneAppservice = PhoneApplicationService.Current;     
 private void Image_Tap(object sender, GestureEventArgs e)
    {
        Image mybutton = (Image)sender;
        image1.Source = mybutton.Source;
        phoneAppservice.State["myValue"] = mybutton.Source;
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        object value;
        if (phoneAppservice.State.TryGetValue("myValue", out value))
        {
            image1.Source = (System.Windows.Media.ImageSource)value;
        }
    } 
```

在**app.xaml.cs**文件中：

```
 private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        getSource();
    }

 private void Application_Closing(object sender, ClosingEventArgs e)
    {
        saveSource();
    }

private void saveSource()
    {
        PhoneApplicationService phoneAppservice = PhoneApplicationService.Current;
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;

        settings["myValue"] = phoneAppservice.State["myValue"];
    }

    private void getSource()
    {
        PhoneApplicationService phoneAppservice = PhoneApplicationService.Current;
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;

        object myValue;
        if(settings.TryGetValue<object>("myValue", out myValue))
        {
            phoneAppservice.State["myValue"] = myValue;
        }
    } 
```

我正在保存获取图像源，但无法将该源设置为我的图像。我想我遗漏了一些东西，或者请提出正确的方法

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:54:40.297

在状态下，我保存了图像名称而不是图像源，然后给出了该图像的路径以显示

在**MainPage.xaml.cs**文件中，我对多个图像使用了单个 Image_Tap 事件

```
 private void Image_Tap(object sender, GestureEventArgs e)
    {
        Image mybutton = (Image)sender; // calcifying image based on image taped  
        image1.Source = mybutton.Source; // setting tapped source to image 
        phoneAppservice.State["myValue"] = mybutton.Name; // here saving the name of the image 
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        object value;
        if (phoneAppservice.State.TryGetValue("myValue", out value))
        {
            //retrieving the image name form state and creating new BitMapimage based on this name 
            BitmapImage newImg = new BitmapImage(new Uri("/Gallery;component/Images/"+value+".jpg", UriKind.Relative));
            image1.Source = newImg; 
        }
    } 
```

在 App.xaml.cs 文件中

这里在应用程序关闭时将状态保存在隔离存储中，并在应用程序启动时检索状态形式隔离存储

```
 private void Application_Launching(object sender, LaunchingEventArgs e)
    {
        getSource();
    }

 private void Application_Closing(object sender, ClosingEventArgs e)
    {
        saveSource();
    }

 private void saveSource()
    {
        PhoneApplicationService phoneAppservice = PhoneApplicationService.Current;
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;

        settings["myValue"] = phoneAppservice.State["myValue"]; //storing the state (image name) to isolated storage

    }

    private void getSource()
    {
        PhoneApplicationService phoneAppservice = PhoneApplicationService.Current;
        IsolatedStorageSettings settings = IsolatedStorageSettings.ApplicationSettings;

        object myValue;
        if(settings.TryGetValue<object>("myValue", out myValue))
        {
            phoneAppservice.State["myValue"] = myValue; // saving the state from isolated storage
        }
    } 
```

# magento - Magento 1.7 索引管理总是卡在目录 URL 重写可能会影响交叉销售和相关产品

> ID：14064988
> 
> 赞同：1
> 
> 时间：2012-12-28T05:25:22.993
> 
> 标签：magento

您好我正在尝试为交叉销售和相关产品设置一些产品。当我进入产品的管理部分并选择交叉销售产品时，我不会选择。我希望能够分配一些产品。我读到您应该重新索引我已经完成的操作，但目录 URL 重写始终显示为从第一天开始处理。我有 14k 产品。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T07:36:58.400

这不会解决您的索引管理问题，但是关于交叉销售，当您第一次点击交叉销售选项卡时，通常会出现“未找到记录”，直到您点击“重置过滤器”按钮。这让我好几次！

# java - 在java中访问抽象嵌套类

> ID：14064994
> 
> 赞同：-2
> 
> 时间：2012-12-28T05:25:59.363
> 
> 标签：java, class, nested, abstract

假设我有一个班级说 A 这是一个普通班级。

现在 A 嵌套了一个 B 类，而 B 又嵌套了 C。

B类是抽象类，而A，C则不是。

现在，不能为 B 创建对象，因为它是一个抽象类。

但是除非我为 B 类创建一个对象，否则我将无法为 C 类创建一个对象。因为，

```
outerclass out=new outerclass();
outerclass.innerlcass in=outerclass.new innerclass(); 
```

由于 B 没有 object ，因此在这种情况下，外部类对象“out”不可用。

那么如何为 C 创建一个对象呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T05:44:29.367

单程：

```
public class A {
    abstract class B {
        abstract String get();
        class C {
            void run() {
                System.out.println(get());
            }
        }
    }

    public static void main(String[] args) {
        new A().new B(){ String get() { return "hi"; } }.new C().run();
    }
} 
```

或者，使用与上述相同的 A、B 和 C：

```
class ConcreteB extends B {
    String get() {
        return "I'm not anonymous!";
    }
}

public static void main(String[] args) {
    new A().new ConcreteB().new C().run();
} 
```

# android - 制作华硕 google nexus 7 的模拟器

> ID：14064998
> 
> 赞同：1
> 
> 时间：2012-12-28T05:26:33.077
> 
> 标签：android, android-emulator, emulation, avd

我有 android sdk ，更新到最新版本（v21）。

现在我想要的是：

1.  **制作华硕 google nexus 7 的模拟器，包含 800 x 1280 分辨率和 216 dpi。**
2.  **当我将我的 sdk 更新到最新版本时，我无法编辑我当前的模拟器 dpi。**

请帮我创建这个 AVD。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T05:51:32.897

> 制作华硕 google nexus 7 的模拟器，包含 800 x 1280 分辨率和 216 dpi。

要使模拟器与**Google Asus Nexus 7**相同，您将在创建新 AVD 时将此作为默认设备。

> 当我将我的 sdk 更新到最新版本时，我无法编辑我当前的模拟器 dpi。

为此，您可以使用以下建议从最新的 AVD 中删除并创建新模拟器。

将您的 ADT 更新到版本 21 之后。

**`Add Custom`在旧版本中，如果您想要自定义设备配置（如果您想要 Nexus 4），则每次必须设置屏幕。**

在 ADT21 版本中，您可以通过

> **打开`AVD Manager`，你可以定义你的自定义屏幕`"Device Definition"`**

**替代方案（更简单的方法）**

> 在最新版本中，您不需要根据上述建议设置自定义设备配置，因为它提供了更简单的方法。您>只需使用您的设备配置制作模拟器，然后您将在`Graphical Layout`XML 中看到带有模拟器名称的那些配置

就像在使用名称为“Nexus7_Android_4.2”的Android 4.2创建我的Nexus7模拟器模拟器之后，我将自动在xml的图形布局中获得此设备配置。

下面是它的屏幕截图。

![在此处输入图像描述](../Images/b97d1e5e83c13f9e3be2d0ac367cfeab.png)

希望它会帮助你。