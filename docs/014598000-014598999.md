# StackOverflow 问答 14598000-14598999

# c# - MySQL + Entity 框架中的对象引用错误

> ID：14598006
> 
> 赞同：0
> 
> 时间：2013-01-30T06:32:50.547
> 
> 标签：c#, asp.net, mysql, entity-framework

我正在尝试使用 MySql 数据库学习实体框架。
尝试使用以下代码保存数据：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (txtName.Text == string.Empty ||
    txtAge.Text == string.Empty)
    {
        lblMsg.Text = "Please enter proper details first";
        return;
    }

    employee emp = new employee();
    emp.Name = txtName.Text;
    emp.Age = Convert.ToInt32(txtAge.Text);

    using (entityframeworkEntities context =
    new entityframeworkEntities())
    {

        context.AddToemployees(emp);
        if (context.SaveChanges() == 1)  // Error Part
        {
            lblMsg.Text = "Saved Successfully.";
        }
    }
} 
```

代码`Object Reference`在`if (context.SaveChanges() == 1)`. 甚至`emp`没有添加到`contaxt`对象中。

当我调试代码时，调试器会转到以下部分：

```
public entityframeworkEntities() :                               
base("name=entityframeworkEntities", "entityframeworkEntities") 
{
    this.OnContextCreated();   
} 
```

即使在这部分，调试器也来到了大括号，但跳过了`this.OnContextCreated();`行。

这是我在 Web.Config 中的连接字符串

```
<add name="entityframeworkEntities" connectionString="metadata=res://*/ApplicationWithMySql.csdl|res://*/ApplicationWithMySql.ssdl|res://*/ApplicationWithMySql.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;User Id=root;password=root;database=entityframework&quot;" providerName="System.Data.EntityClient" /> 
```

请帮助我，我哪里出错了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:47:39.017

只是你可能忽略了几件事。没有那么多答案。很长时间才能发表评论

```
<system.data>
    <DbProviderFactories>
        <remove invariant="MySql.Data.MySqlClient" />
        <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.3.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
    </DbProviderFactories>
</system.data> 
```

a.构建干净。

b.build mysql dll到你的bin目录

c.为 MySQL.Data 和 MySQL.Data.Entities 安装 nuget 包。（（右键单击程序集并确保在构建之前将 Copy Local 设置为 true）

d. 完全删除 Version=6.3.5.0 标记并在 VS.type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data" 上构建没有任何版本控制，而不是指定完整的版本数据。

# android - 通过代码为视图设置 android:layout_margin

> ID：14598009
> 
> 赞同：2
> 
> 时间：2013-01-30T06:33:15.180
> 
> 标签：android, android-view

在我的应用程序中，我正在创建一个 LinearLayout。当我将其他视图添加到布局时，它们看起来太近了（两个视图之间的差异非常小）。我想设置`android:layout_margin`在布局中添加的视图。怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:35:13.263

试试这个

```
LinearLayout layout = new LinearLayout(this);
layout.setOrientation(LinearLayout.VERTICAL);

LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
     LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);

params.setMargins(10, 20, 30, 40);

Button button = new Button(this);
button.setText("some text");
layout.addView(button, params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:39:19.333

如果你想通过 xml 来做，那么就这样做

```
android:layout_marginLeft="10dp"   //example
android:layout_marginRight="10dp" 
android:layout_marginTop="10dp" 
android:layout_marginBottom="10dp" 
```

无论您想在左侧，右侧，顶部或底部留出边距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:39:31.300

**试试这个**

```
 RelativeLayout.LayoutParams  my_params;             
 my_params= new RelativeLayout.LayoutParams(12,12);    
 my_params.leftMargin =57;    
 my_params.topMargin =143;     
 rl_main.addView(mProgress,my_params); 
```

这里**rl_main**是主布局，而**mprogress**是添加的对象。

# google-drive-api - Drive SDK API 在 Android 4.0.4 上插入崩溃

> ID：14598010
> 
> 赞同：0
> 
> 时间：2013-01-30T06:33:21.113
> 
> 标签：google-drive-api

当以下应用程序在 anoroid 上运行时，我收到消息“不幸的是它已停止”。我已经在 API 控制台中为这个包生成了客户端 ID。

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

   System.out.println("Getting Creditenal");

   Intent intent = AccountPicker.newChooseAccountIntent(null,
null, new String[]{"com.google"}, false, null, null, null, null);
   startActivityForResult(intent, CHOOSE_ACCOUNT);
       mContext = this;

  }

  @Override
  protected void onActivityResult(final int requestCode, final int
resultCode, final Intent data) {
switch (requestCode) {
case SHOW_EXCEPTION:
     if (resultCode == RESULT_OK && data != null && data.getExtras() != null) {
    AlertDialog ad1 = new AlertDialog.Builder(this).create();
        ad1.setCancelable(false); // This blocks the 'BACK' button
        mExcep += "--Sag Show Exception";
        ad1.setMessage(mExcep);
        ad1.setButton("OK", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        ad1.show();
     }
case CHOOSE_ACCOUNT:
    if (resultCode == RESULT_OK) {
            String accountName = data.getStringExtra(AccountManager.KEY_ACCOUNT_NAME);
            credential.setSelectedAccountName(accountName);
         service = getDriveService(credential);
         SaveFileToGoogleDrive();
    }
}
}

private void SaveFileToGoogleDrive() {

     Thread t = new Thread(new Runnable() {
          @Override
          public void run() {
              File newFile = new File();
              String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss",
 Locale.US).format(new Date());

                newFile.setTitle(timeStamp);
            newFile.setMimeType("text/plain");
            String contentStr = "Time,Lat,Lng,Address";

              try {
                      File insertedFile = service.files().insert(
                             newFile, ByteArrayContent.fromString("text/plain",
contentStr)).execute();
                      //File insertedFile = service.files().insert(newFile).execute();
                    } catch (Exception e) {
                            mExcep = e.getMessage();
                            mExcep+=e.getLocalizedMessage();
                            startActivityForResult(credential.newChooseAccountIntent(),
SHOW_EXCEPTION)
                    }
          }
        });
        t.start();
  }

 private Drive getDriveService(GoogleAccountCredential credential) {
    return new Drive.Builder(AndroidHttp.newCompatibleTransport(), new
    GsonFactory(), credential)
     .build();
  }

 public void showToast(final String toast) {
   runOnUiThread(new Runnable() {
    @Override
    public void run() {
      Toast.makeText(getApplicationContext(), toast,
      Toast.LENGTH_SHORT).show();
    }
  });
} 
```

}

也没有显示异常消息框，知道 API 失败的原因吗？

# zeromq - 使用 zeromq PUB/SUB 套接字检索订阅者数量

> ID：14598015
> 
> 赞同：14
> 
> 时间：2013-01-30T06:33:44.683
> 
> 标签：zeromq

是否可以从 zeromq 中的 PUB 套接字获取订阅者总数？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T07:24:48.303

是的，但不幸的是不是通过任何简单的属性或方法。

您需要使用[zmq_socket_monitor()](http://api.zeromq.org/3-2%3azmq-socket-monitor)函数将`inproc`服务套接字连接到要观察的主套接字。从那里您可以收听有关连接/断开连接的事件并保留自己的订阅者数量。不过，这可能不是一项微不足道的任务，因为（至少对我而言）似乎有点难以知道何时将订阅者（或任何远程连接）视为启动/关闭（关闭/断开/重试等）。你将不得不玩一下。

该链接包括示例和事件描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-26T08:11:10.927

这是代表 NodeJS 的实现，我认为对于 pub 是一样的。

就像 Jakob Möllås 所说，需要使用监视器。

```
const zmq = require('zmq')
        , rep = zmq.socket('rep');

let counter = 0;

rep.bind('tcp://*:5560', function (err) {
    if (err) {
        console.log(err);
    } else {
        console.log("Listening on 5560…");
        rep.monitor(500, 0);
    }
});

// Register to monitoring events
rep.on('connect', function (fd, ep) {
    console.log('connect, endpoint:', ep);
});
rep.on('connect_delay', function (fd, ep) {
    console.log('connect_delay, endpoint:', ep);
});
rep.on('connect_retry', function (fd, ep) {
    console.log('connect_retry, endpoint:', ep);
});
rep.on('listen', function (fd, ep) {
    console.log('listen, endpoint:', ep);
});
rep.on('bind_error', function (fd, ep) {
    console.log('bind_error, endpoint:', ep);
});
rep.on('accept', function (fd, ep) {
    console.log('accept, endpoint:', ep);
    counter++;
});
rep.on('accept_error', function (fd, ep) {
    console.log('accept_error, endpoint:', ep);
});
rep.on('close', function (fd, ep) {
    console.log('close, endpoint:', ep);
});
rep.on('close_error', function (fd, ep) {
    console.log('close_error, endpoint:', ep);
});
rep.on('disconnect', function (fd, ep) {
    console.log('disconnect, endpoint:', ep);
    counter--;
});

// Handle monitor error
rep.on('monitor_error', function(err) {
    console.log('Error in monitoring: %s, will restart monitoring in 5 seconds', err);
    setTimeout(function() { rep.monitor(500, 0); }, 5000);
});

rep.on('message', function (msg) {
    console.log(`recieve: `, JSON.parse(msg));
    rep.send(JSON.stringify({ "status": FAIL, "code": 3666 }));
}); 
```

* * *

安慰

```
recieve:  { method: 'login', login: 'a', password: 'b1' }
accept, endpoint: tcp://0.0.0.0:5560
accept, endpoint: tcp://0.0.0.0:5560
login: a, password: b1
recieve:  { method: 'login', login: 'a', password: 'b1' }
disconnect, endpoint: tcp://0.0.0.0:5560
login: a, password: b1
disconnect, endpoint: tcp://0.0.0.0:5560 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T03:20:00.647

似乎没有任何直接的方法。下面是监控套接字事件的 Python 代码，可用于维护计数：

```
import zmq
from zmq.eventloop import ioloop, zmqstream
import zmq.utils.monitor

class Publication:
    def start(self, port, host):
        context = zmq.Context()
        self._socket = context.socket(zmq.PUB)
        self._socket.bind("tcp://%s:%d" % (host, port))
        self._mon_socket = self._socket.get_monitor_socket(zmq.EVENT_CONNECTED | zmq.EVENT_DISCONNECTED)
        self._mon_stream = zmqstream.ZMQStream(self._mon_socket)
        self._mon_stream.on_recv(self._on_mon)

    def _on_mon(self, msg):
        ev = zmq.utils.monitor.parse_monitor_message(msg)
        event = ev['event']
        endpoint = ev['endpoint']
        if event == zmq.EVENT_CONNECTED:
            pass
            # print(endpoint)
        elif event == zmq.EVENT_DISCONNECTED:
            pass
            #print(endpoint) 
```

一个问题是由于某种原因 CONNECTED 事件没有触发。另一个问题是，即使事件触发，您也只能获得类似于 tcp://ip:port 字符串的端点 ID。因此，对于同一节点上的多个客户端，您将获得相同的端点 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-28T21:00:40.220

我遇到了一个（测试）场景，我必须等待 n 个订阅者才能开始发布消息。这是对我有用的函数（在 Python 中）：

```
def wait_for_n_subscribers(pub_socket: zmq.Socket, n_subscribers: int):
    """
    blocks until pub_socket had n_subscribers connected to it
    """
    connections = 0
    events_socket = pub_socket.get_monitor_socket(events=zmq.EVENT_HANDSHAKE_SUCCEEDED)  # only accept this event
    while connections < n_subscribers:
        recv_monitor_message(events_socket)  # this will block until a handshake was successful
        connections += 1 
```

**解释**：
创建`PUB`套接字后，我们将一个`PAIR`套接字附加到它，它将监视`PUB`套接字的事件。
当`SUB`套接字连接到`PUB`套接字时，它会在 PUB（绑定）端生成两个事件：
`EVENT_ACCEPTED (32)`后跟 `EVENT_HANDSHAKE_SUCCEEDED (4096)`.

因此，我们将监视`EVENT_HANDSHAKE_SUCCEEDED`作为成功订阅连接的指标。一旦连接了指定的订阅者，函数就会返回。

这是一个完整的玩具示例：

```
import threading
import time
import zmq
from zmq.utils.monitor import recv_monitor_message  # requires libzmq >= 4.0

ep = "ipc:///tmp/test-socket"

def print_events_map():
    "auxilliary function to print all zmq socket events"
    print("Event names:")
    for name in dir(zmq):
        if name.startswith('EVENT_'):
            value = getattr(zmq, name)
            print("%21s : %4i" % (name, value))

context = zmq.Context()

def wait_for_n_subscribers(pub_socket: zmq.Socket, n_subscribers: int):
    """
    blocks until pub_socket had n_subscribers connected to it
    """
    connections = 0
    events_socket = pub_socket.get_monitor_socket(events=zmq.EVENT_HANDSHAKE_SUCCEEDED)  # only accept this event
    while connections < n_subscribers:
        recv_monitor_message(events_socket)  # this will block until a handshake was successful
        connections += 1

def simulate_sender(wait, n):
    s_pub = context.socket(zmq.PUB)
    s_pub.bind(ep)
    if wait:
        wait_for_n_subscribers(s_pub, n)
    for i in range(5):
        s_pub.send_pyobj(i)
        time.sleep(1)

subscribers = 2
s_sub_1 = context.socket(zmq.SUB)
s_sub_1.setsockopt(zmq.RCVTIMEO, 3000)  # wait at most 3 seconds
s_sub_1.subscribe("")

s_sub_2 = context.socket(zmq.SUB)
s_sub_2.subscribe("")

wait = True  # set to false if publisher should not wait
threading.Thread(target=simulate_sender, args=(wait, subscribers,)).start()
time.sleep(1)
print("connecting 1")
s_sub_1.connect(ep)
print("connecting 2")
s_sub_2.connect(ep)
while True:
    try:
        print("received %s" % s_sub_1.recv_pyobj())
    except zmq.error.Again:
        print("no incoming msgs for 3 seconds")
        break 
```

笔记：

1.  设置`wait`为 False 将导致订阅者错过第一个发布的消息，因为订阅者在连接之前有 1 秒的延迟，并且发布者不会等待（等待订阅者连接）。
2.  该方案假定发布者绑定和订阅者连接。
3.  Tested with zmq 4.1.4, pyzmq 20.0.0

# windows - 如何在寄存器 wrt date 中添加字符串值

> ID：14598017
> 
> 赞同：0
> 
> 时间：2013-01-30T06:33:55.493
> 
> 标签：windows, registry

我想在 Windows 注册表 wrt 日期中添加一些值，例如。我有一个例子，它显示字符串 value=reg 和 value =4022299。这个值实际上代表 2059 年 11 月 1 日，我不知道从哪里可以为不同的日期生成不同的数字，所以我可以添加到我的注册表中。

任何人都可以帮助我吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:35:27.817

数值表示从 epoc 到指定日期和时间的多个时间单位（请注意，日期和时间在计算机中是相同的）。

一个常见的单位是秒，也就是“Unix 时间”（自 1970 年 1 月 1 日 UTC 以来的秒数）。.NET 使用 100 纳秒的“滴答声”。您也可以使用毫秒。

值 4022299，如果是秒和 Unix 时间，实际上表示 1970 年 2 月的日期，所以我不知道那里使用的是什么算法。

我建议您出于兼容性目的使用 Unix 时间。这是生成 Unix 时间值所需的代码：

```
public static Int32 GetUnixTimeStamp(DateTime date) {

    DateTime epochStart = new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);
    return (date - epochStart).Ticks * 100;
} 
```

像这样使用：

```
DateTime something = new DateTime( 2059, 11, 1 );
Int32 unixTime = GetUnixTimeStamp( something ); 
```

要将其添加到注册表：

```
Microsoft.Win32.Registry.SetValue("HKEY_CURRENT_USER\\SomeKey\\SomeValue", unixTime); 
```

# sql-server - SQL Server 连接限制

> ID：14598018
> 
> 赞同：0
> 
> 时间：2013-01-30T06:33:56.803
> 
> 标签：sql-server, ssms, sql-server-2008, ssms-2012

有没有办法限制个人连接到 SQL Server 管理。就像我有一组用户可以通过活动 2 连接登录到 SQL Server Management Studio，以便一次打开一个人。如果超过两个，将不允许与数据库的连接。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:26:22.077

如果您正在尝试解决高 CPU 使用率问题，那么我认为您找错了树。在“high cpu sql server”上进行谷歌搜索会得到[这个](https://stackoverflow.com/questions/9615742/sql-server-2008-r2-high-cpu-usage)，除此之外。

[也就是说，您可以使用登录触发器](http://technet.microsoft.com/en-us/library/bb326598%28v=sql.100%29.aspx)限制 ssms 会话。您可能希望将内部查询修改为如下内容：

```
SELECT 
    COUNT(*)
FROM 
    sys.dm_exec_sessions
WHERE 
    is_user_process = 1 
    AND program_name like 'Microsoft SQL Server Management Studio%'
    AND login_name = system_user 
```

我不知道它会让你得到你想要的，特别是因为你的最终目标是调整 CPU。每次登录都会触发触发器，这可能会使用比您要阻止的额外会话更多的处理能力。

另外，我不建议使用这个来访问已经滞后的生产服务器。您可以在开发副本上重放来自 prod 的探查器跟踪，无论是否进行此更改，看看是否有任何显着差异。但如果我是你，我会开始寻找缺失的索引。

# haskell - 针对明显相同问题的不同错误报告

> ID：14598020
> 
> 赞同：0
> 
> 时间：2013-01-30T06:34:10.033
> 
> 标签：haskell

使用 Haskell 的类型类，我创建了一个列表类型类的实例，其元素不是该类型类的实例：

```
class Three a where
    three :: a -> [a]

instance (Three a) => Three [a] where
    three x = [x, x, x] 
```

对于整数列表和字符列表，我收到不同的错误消息：

**字符**

```
*Main> three ['c']

<interactive>:11:1:
    No instance for (Three Char)
      arising from a use of `three'
    Possible fix: add an instance declaration for (Three Char)
    In the expression: three ['c']
    In an equation for `it': it = three ['c'] 
```

**整数**

*主要>三个[1, 2]

```
<interactive>:12:8:
    Ambiguous type variable `t0' in the constraints:
      (Num t0) arising from the literal `1' at <interactive>:12:8
      (Three t0) arising from a use of `three' at <interactive>:12:1-5
    Probable fix: add a type signature that fixes these type variable(s)
    In the expression: 1
    In the first argument of `three', namely `[1, 2]'
    In the expression: three [1, 2] 
```

为什么？？

（现在，Chars 的错误已被理解 - 没有实例。但 Integers 的歧义错误对我来说并不清楚。我认为这可能不是因为整数已经是某物（Num）的实例，所以我创建了另一个任意类型类和它的一个实例用于 Char，但对于 Char 得到与以前相同的错误）。

我会感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T18:35:56.690

第一个错误指出没有 for`Three`的实例`Char`。正如你所说，简单！

但是，在第二种情况下，由于数字文字的类型是未知/多态的，GHC 无法判断它们是否存在*实例*。因此，错误不是关于丢失的实例，而是一个模棱两可的变量。

例如，您可以`Three`同时拥有`Int`和的有效实例`Double`。GHC 怎么知道该选择哪个？

（即忽略扩展默认值）。

所以错误是不同的，因为错误的类型实际上*是*不同的。

# sql - 多边多对多关系

> ID：14598022
> 
> 赞同：0
> 
> 时间：2013-01-30T06:34:14.633
> 
> 标签：sql

我试图想出一个映射问题的解决方案，在这个问题中我可以将两个看似不相关的组联系起来。因此，假设我有一组属性 A、一个实体组 1 和一个实体组 2。我可以轻松地在 1 和 A 之间建立多对多关系，并执行如下查询

```
select * from 1 
  inner join a_1 on a_1.1_id = 1.id
  inner join a on a.id = a_1.a_id
  where a.attr = '123' 
```

我显然可以对与 2 相关的 A 做类似的事情。我实际上要查询的是 A 到 2 和 A 到 1，其中第 1 组和第 2 组中的元素在 A 中共享相同的属性。所以，如果属性 I 'm storage 是一个地址，我希望能够选择第 1 组和第 2 组中共享地址的所有人，以及这些地址是什么。

感谢帮助！

编辑：

表结构：

```
t1 -----< t1_A >------ A ------< t2_A >------ t2

t1[id, other], t1_A[id, t1id, Aid], A[id, address], t2_A[id, t2id, Aid], t2[id, other] 
```

目标是为 t1 中与 t2 中的元素具有相同地址的每个元素返回一行（以及该地址是什么）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:41:12.007

> 查询虽然是 A 到 2 和 A 到 1，其中组 1 和 2 中的元素在 A 中共享相同的属性。

我想你正在寻找`UNION`：

```
select address, ... -- and other properties
from table1 t1 
inner join a on a.a_id = t1.id
where a.attr = '123'
UNION ALL
select address, ... -- and other properties
from table2 t2 
inner join a on a.a_id = t2.id
where a.attr = '123' 
```

* * *

**更新：**

考虑到表格的结构，更新您的问题后：

**t1：**

*   `id`,
*   ...

**t1_A：**

*   `id`,
*   `t1id`,
*   `Aid`,
*   ...

**A：**

*   `id`,
*   `address`,
*   ...

**t2_A：**

*   `id`,
*   `t2id`,
*   `Aid`,
*   ...

**t2：**

*   `id`,
*   ...

所以，你想得到：

> 目标是为 t1 中与 t2 中的元素具有相同地址的每个元素返回一行（以及该地址是什么）。

然后你可以这样做：

```
SELECT
  t1.*,
  A.*
FROM t1
INNER JOIN t1_A ON t1.id = t1_A.t1id
INNER JOIN A    ON A.id  = t1_A.Aid
INNER JOIN t2_A ON a.id  = t2_A.aid
INNER JOIN t2   ON t2.id = t2_A.t2id; 
```

# c# - 使文本框不可编辑

> ID：14598024
> 
> 赞同：73
> 
> 时间：2013-01-30T06:34:20.020
> 
> 标签：c#, .net, winforms, textbox

我想让`TextBox`我的表单上的一些 es 不可编辑，但我想要`text`清晰（黑色而不是灰色），这就是我不想使用的原因

`myTextBox.Enabled = false;`

不知何故，我希望它被禁用，但具有非灰色前景色。

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-01-30T06:35:46.413

使用[`TextBox.ReadOnly`](http://msdn.microsoft.com/en-US/library/system.windows.forms.textboxbase.readonly%28v=vs.80%29.aspx)属性

```
TextBox.ReadOnly = true; 
```

对于非灰色背景，您可以将[`TextBox.BackColor`](http://msdn.microsoft.com/en-us/library/s2kh9x59.aspx)属性更改为`SystemColors.Window`颜色

```
textBox.BackColor = System.Drawing.SystemColors.Window; 
```

> 当此属性设置为 true 时，用户无法在运行时更改控件的内容。将此属性设置为 true 后，您仍然可以在代码中设置 Text 属性的值。您可以使用此功能而不是禁用具有 Enabled 属性的控件，以允许复制内容并显示工具提示。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-30T06:36:13.810

使用TextBox 上的[ReadOnly属性。](http://msdn.microsoft.com/en-US/library/system.windows.forms.textboxbase.readonly%28v=vs.80%29.aspx)

```
myTextBox.ReadOnly = true; 
```

但请记住：[TextBoxBase.ReadOnly 属性](http://msdn.microsoft.com/en-US/library/system.windows.forms.textboxbase.readonly%28v=vs.80%29.aspx)

> 当此属性设置为 true 时， **用户无法在运行时更改**控件的内容。将此属性设置为 true 后，您**仍然可以在 code 中设置 Text 属性的值**。您可以使用此功能而不是禁用具有 Enabled 属性的控件，以允许复制内容并显示工具提示。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-30T06:40:54.943

您可以尝试使用：

```
textBox.ReadOnly = true;
textBox.BackColor = System.Drawing.SystemColors.Window; 
```

仅当您想要非灰色背景颜色时，才需要最后一行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-03T11:37:06.793

只需在 XAML 中设置：

```
 <TextBox IsReadOnly="True" Style="{x:Null}" /> 
```

这样该文本就不会变灰。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-30T06:38:10.000

如果你想要你的`TextBox`不可编辑，你应该把它[设为 ReadOnly](http://msdn.microsoft.com/en-US/library/system.windows.forms.textboxbase.readonly%28v=vs.80%29.aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-13T23:22:26.970

如果您想使用 XAML 执行此操作，请将属性设置`isReadOnly`为`true`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-28T04:57:50.863

这是针对 GridView 的。

```
 grid.Rows[0].Cells[1].ReadOnly = true; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-08-25T04:46:14.417

在 aspx 页面中启用 =“false”

# asp.net - ASP.Net 使用什么缓存算法？

> ID：14598025
> 
> 赞同：4
> 
> 时间：2013-01-30T06:34:26.430
> 
> 标签：asp.net, .net, algorithm, caching, asp.net-caching

我正在围绕 ASP.Net 的缓存编写一个包装器，我很好奇他们使用什么缓存算法。例如，假设缓存中的所有内容都具有相同的到期日期和优先级，它如何清除项目？

[维基百科](http://en.wikipedia.org/wiki/Cache_algorithms)列出了 11 种不同的缓存算法。ASP.Net 是否使用其中之一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:38:25.650

您描述的算法用于确定何时在缓存变满时从缓存中删除项目。然而，ASP.NET 缓存没有固定容量 - 它位于堆上，因此它的大小不受限制。

缓存内部有一个以固定频率计时的计时器。在每个滴答声中，它都会查找过期项目并将其删除。如果一个项目有一个滑动到期，那么每个缓存获取都会增加它的生命周期，否则它会被删除。

更新：

我已经完成了 Cache 类，事实上，当“内存压力”变得太高时，有一个逻辑可以删除一定比例的最少使用项目。如果您转到`System.Web.UI.Caching.CacheMemoryStats.GetPercentToTrim()`和 ，您可以在 Reflector 中看到这一点`CacheCommon.CacheManagerThread(Int32)`。类中有一些非常复杂的逻辑`UsageBucket`，我现在无法理解，但是如果方法的名称是可以使用的，那么它似乎不是任何特殊的奇异缓存算法，而是基于最不频繁的算法- 使用算法。

所以我想我错了:)

# c# - 带有 API 签名 Asp.net C# 的 Paypal 沙盒帐户失败

> ID：14598027
> 
> 赞同：0
> 
> 时间：2013-01-30T06:34:32.543
> 
> 标签：c#, asp.net, paypal, sandbox

我正在使用带有 Soap API Signature Asp.net C# 的 Paypal Sandbox 帐户

相同的代码在真实的 Paypal 帐户上适用于我，但在沙箱中不起作用。

贝宝沙箱抛出错误

> *请求被中止：无法创建 SSL/TLS 安全通道*

请问有什么帮助吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:20:14.280

由于您没有说您使用的是什么 Url，我们不能说是对还是错。

这是 PayPal 的网址。

![在此处输入图像描述](../Images/e66ef016bb4d711e469034fce33bb5ad.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:23:06.513

`api.sandbox.paypal.com`如果您在不提供 API 证书的情况下尝试连接，通常会发生这种情况。尝试`api-3t.sandbox.paypal.com`改用。

# r - ggplot2 中 facet_grid() 中的自定义 scale_y_continuous()

> ID：14598031
> 
> 赞同：2
> 
> 时间：2013-01-30T06:34:48.640
> 
> 标签：r, ggplot2, visualization, facet

我希望在背景网格中添加一条额外的白线和一个额外的刻度线，但仅在小面*Low Tide*内，这有可能吗？

我想我可以在*Low Tide*或类似的命令中添加一个*中断*（在*y = 10*处）（请参阅下面的代码）。`scale_y_continuous()`

 *![_break_ 到 <code>scale_y_continuous()</code>](../Images/d738d5d2cf1f195a7e279d5dbb0085a6.png)

```
require(ggplot2)
df <- data.frame(cyl = mtcars[,2])
df$Tide  <- ifelse(df$cyl > 4, c('High Tide'), c('Low Tide'))
c <- ggplot(df, aes(factor(cyl)))
c + geom_bar(fill="white", colour="darkgreen", alpha=0.5) +
       facet_grid(. ~ Tide, scales = "free", space = "free") +
       scale_y_continuous(breaks=c(4, 6, 8),
          labels=c("Minimal", "Mild", "Moderate")) +
       scale_x_discrete(breaks=c(6,8,4),
          labels=c("East Coast", "West Coast", "West Coast Summer")) + 
       theme(axis.title.x = element_blank(), axis.title.y  = element_blank(), 
          axis.ticks.x = element_blank(), legend.position = "none") 
```*

# ruby - SIP 呼叫被星号拒绝

> ID：14598034
> 
> 赞同：3
> 
> 时间：2013-01-30T06:34:54.060
> 
> 标签：ruby, sip, asterisk, agi

我正在使用 Asterisk 和 Adhearsion。我已经创建了`ahn`应用程序并做了以下事情：

添加`dialplan.rb`到项目的根目录。内容 ：

```
adhearsion {
  play 'hello-world'
  hangup
} 
```

内容`config/adhearsion.rb`：

```
 ...
  ##
  # Use with Asterisk
  #
  config.punchblock.platform = :asterisk # Use Asterisk
  config.punchblock.username = "myuser" # Your AMI username
  config.punchblock.password = "mypassword" # Your AMI password
  config.punchblock.host = "127.0.0.1" # Your AMI host
  ... 
```

星号配置文件：

`extensions.conf`：

```
[adhearsion]
exten => test,1,AGI(agi://127.0.0.1)                                                                                                                                      

[adhearsion-redirect] 
```

的内容`sip.conf`

```
[general]
context=adhearsion
.... 
```

从 SJPhone 应用程序调用 (SIP) 时出现错误：

```
== Manager 'myuser' logged on from 127.0.0.1
  == Manager 'myuser' logged on from 127.0.0.1
    -- Added extension '1' priority 1 to adhearsion-redirect
  == Using SIP RTP CoS mark 5
    -- Executing [test@adhearsion:1] AGI("SIP/127.0.0.1-00000000", "agi://127.0.0.1") in new stack
[Jan 30 12:02:26] ERROR[4211]: utils.c:1164 ast_carefulwrite: write() returned error: Connection refused
[Jan 30 12:02:26] WARNING[4211]: res_agi.c:1509 launch_netscript: Connect to 'agi://127.0.0.1' failed: Connection refused
    -- Auto fallthrough, channel 'SIP/127.0.0.1-00000000' status is 'UNKNOWN' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:31:59.990

这意味着星号无法连接adhearsion fastagi 脚本。

可能的问题是：

*   粘连没有运行。启动它。
*   防火墙阻止adhearsion端口。为端口 4573(tcp) 添加防火墙允许规则
*   附着力框架内的一些错误，请参阅日志。

# c# - 使用 EF Code First 是否可以将标识种子值设置为 1 以外的值

> ID：14598035
> 
> 赞同：2
> 
> 时间：2013-01-30T06:34:54.963
> 
> 标签：c#, entity-framework

我需要将自动增量 id 字段中的每个第一个值设置为不同于 1 的值有没有办法做到这一点？

是否只是做一个问题

```
DBCC CHECKIDENT(<table_name>, RESEED, 1001) 
```

在 Seed 方法内的上下文初始化中？

这个方法我试过了，还是不行，请问还有什么方法可以试试。

PS：我知道如何使用种子 sql 语句，它让这个特定的功能可以工作，我在尝试解决问题时遇到了麻烦，即。在这种情况下，将标识列重新设置为 1001。在我的桌子上，我试图将身份种子值设置为 1001

# asymptotic-complexity - 如果 f(n)=O(g(n))，那么 f(n)∗log2(f(n)^ c)=O(g(n)∗log2(g(n))) 不应该取决于C的价值？

> ID：14598037
> 
> 赞同：11
> 
> 时间：2013-01-30T06:34:56.480
> 
> 标签：asymptotic-complexity

如果`f(n)=O(g(n))`，那么不应该`f(n)∗log2(f(n)^c)=O(g(n)∗log2(g(n)))`取决于 C 的值吗？

这里 C 是一个正常数。根据我的说法，如果 C 很大，那么该陈述将变为错误，如果 c 很小，则该陈述将是真实的。因此结果取决于c。

我正在上一门算法课，这是我被问到的问题之一。根据我的说法，这应该取决于常数 c 但答案是错误的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T06:40:56.580

```
log(x^c)  = c * log(x) 
```

所以，

```
log2(f(n)^c) == c * log2(f(n)) 
```

所以，

```
f(n)∗log2(f(n)^c) = c * f(n) * log2(f(n))

                   = O(g(n)∗log2(g(n))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-04-08T14:04:40.117

@Undefitied，根据 Big-Oh 符号的定义 f(n) = O(g(n)) 当且仅当存在一个常数“c”和一个 N 使得 f(n) <= c*f(n ) 对于所有 n > N。当我们断言 f(n) 与 O(g(n))“相等”时，我们并不是说它们在代数术语中必然“相等”。我们说 f(n) 以 g(n) 为界。如果 f 和 g 是不减的并且总是大于 1，并且 c 是一个正常数，那么 Mitch Wheat 上面给出的证明是正确的。

# android - 如何在 Eclipse 中将 android 项目转换为库项目？

> ID：14598038
> 
> 赞同：7
> 
> 时间：2013-01-30T06:34:58.133
> 
> 标签：android, android-library

我想将一个 android 项目转换为一个库项目。这可以做到吗？

我正在尝试在另一个项目中使用这个项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T06:38:20.007

> Android Studio 选项更新

**将应用模块转换为库模块**

如果您有一个现有的应用程序模块，其中包含要重用的所有代码，则可以将其转换为库模块，如下所示：

1.  打开现有应用程序模块的 build.gradle 文件。在顶部，您应该看到以下内容：

    ```
    `apply plugin: 'com.android.application'`
    ```

`*   更改插件分配，如下所示：

    ```
    `apply plugin: 'com.android.library'`
    ```

    `*   单击`Sync Project with Gradle Files`。`` 

 ``*而已。模块的整个结构保持不变，但它现在作为一个 Android 库运行，并且构建现在将创建一个 AAR 文件而不是 APK*

阅读有关如何[**创建 Android 库**](https://developer.android.com/studio/projects/android-library.html)以及如何[**在 Android Studio 中将现有项目转换为库项目的更多信息**](https://stackoverflow.com/questions/17614250/convert-existing-project-to-library-project-in-android-studio)

* * *

> 以下步骤适用于 Eclipse

步骤是

```
Right click on project -> property -> Android -> check 'Is library' check box -> OK 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:43:09.253

S.有可能。例如：如果您使用 Actionbar sherlock。

[https://github.com/JakeWharton/ActionBarSherlock/tree/master/library](https://github.com/JakeWharton/ActionBarSherlock/tree/master/library)，这是一个图书馆

已创建。您可以在属性-> Android-> 库中导入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T09:22:24.943

或者，如果您使用的是 Mac；

第一步。按住 ctrl 并点击项目。第二步。单击属性步骤三、Android 步骤四，确保选中“是库”复选框。``

# php - 如何保留动态添加的表行并更新数据库中的值

> ID：14598041
> 
> 赞同：0
> 
> 时间：2013-01-30T06:35:15.247
> 
> 标签：php, javascript, mysql

嗨，我是 php 新手，我创建了一个表单，该表单动态添加表格行，按下添加按钮我能够将其保存到我的数据库中，并且能够在用户单击编辑时保留这些值，但我的问题是当我按提交，即更新按钮，它会删除以前的记录并只保存新添加的行，或者如果我只是按更新按钮而不进行任何更改，那么它会从动态添加的表中删除所有值，我在插入我的数据库之前编写了删除命令那应该将以前的记录删除到我的数据库中并保存新的记录，但它会删除记录并只保存新添加的行 任何人都可以帮助我，这将是一个巨大的帮助我只是一个初学者，所以如果我正在做请给我这里有问题是我的代码和 javascript

```
<?php
    session_start();
    if (!isset($_SESSION["username"])) {
        header("Location: unauthorize_access.php");
        }
        include("config.php");
        /*mysql_query("LOCK TABLES `makhtab` WRITE, `makhzim` WRITE, `makhalim` WRITE, `country` WRITE, `state` WRITE,  `district` WRITE, `tehsil` WRITE, `city` WRITE, `centre` WRITE, `qabiliyat` WRITE") or die(mysql_error());*/

        $newsid = mysql_real_escape_string($_REQUEST['code']); // is used for both $_GET/$_POST variables
    if(isset($_POST['submit']))
    {
             $fname     = mysql_real_escape_string($_POST['name']);
             $fadd1     = mysql_real_escape_string($_POST['add1']);
             $fadd2     = mysql_real_escape_string($_POST['add2']);
             $fadd3     = mysql_real_escape_string($_POST['add3']);
             $fpin      = mysql_real_escape_string($_POST['pin']);
             $ftel      = $_POST["contact"];
             $fcenter   = mysql_real_escape_string($_POST['cmbcen']);
             $fcity     = mysql_real_escape_string($_POST['cmbcity']);
             $fteh      = mysql_real_escape_string($_POST['cmbteh']);
             $fdist     = mysql_real_escape_string($_POST['cmbdist']);
             $fstate    = mysql_real_escape_string($_POST['cmbstate']);
             $fcoun     = mysql_real_escape_string($_POST['cmbcoun']);
             $fstu      = mysql_real_escape_string($_POST['stu']);
             $fbatch    = mysql_real_escape_string($_POST['batch']);

             mysql_query("UPDATE `makhtab` SET `name`='$fname', `add1`='$fadd1', `add2`='$fadd2', `add3`='$fadd3', `pin`='$fpin', 
                         contact='$ftel', `center`='$fcenter', `city`='$fcity', `tehsil`='$fteh', `district`='$fdist', `state`='$fstate', 
                        `country`='$fcoun', students='$fstu', batch='$fbatch'  WHERE `code`='$newsid' ") or die(mysql_error());

             $num =  $_POST['rr'];
             mysql_query("DELETE FROM `makhalim` WHERE makhcode ='$newsid'")or die(mysql_error());
            print'<script type="text/javascript">';
            print"alert('alim'.$num.)";
            print'</script>';
             for($i=1;$i<$num;$i++)
             {
                $mname       = $_POST["alimname_$i"];
                $mmob        = $_POST["alimmob_$i"];
                $mqab        = $_POST["qabil_$i"];
                if(!empty($mname)){
                    mysql_query("INSERT INTO `makhalim`(makhcode, srno, `name`, mobile, `qabiliyat`) Values('$newsid', '$i', '$mname', '$mmob', '$mqab')") or die(mysql_error());
                 }
              }
             $hh =  $_POST['hh'];
             mysql_query("DELETE FROM makhzim WHERE makhcode ='$newsid'")or die(mysql_error());
             if($hh > 0){
                for($h=1;$h<$hh;$h++)
                {          
                    $m_name       = $_POST["zimname_$h"];
                    $m_mob        = $_POST["zimmob_$h"];

                    if(!empty($m_name)){
                       mysql_query("INSERT INTO `makhzim`(makhcode, srno, `name`, mobile) Values('$newsid', '$h', '$m_name','$m_mob')") or die(mysql_error());
                    }
                }
              }    

              /*mysql_query("UNLOCK TABLES") OR die(mysql_error());*/

              print'<script type="text/javascript">';
              print "alert('Records Updated Sucessfully')";
              header("refresh: 2; makh_tab.php");
              print'</script>';

              }

              elseif($newsid)
              {

              $result = mysql_query("SELECT `name`, `add1`, `add2`, `add3`, pin, contact, `center`, `city`, `tehsil`, `state`, `district`, `country`, students, batch FROM makhtab WHERE code='$newsid' ",$connect);
              $myrow = mysql_fetch_assoc($result);
                    $cname      = $myrow["name"];
                    $cadd1      = $myrow["add1"];
                    $cadd2      = $myrow["add2"];
                    $cadd3      = $myrow["add3"];
                    $cpin       = $myrow["pin"];
                    $ccen       = $myrow["center"];
                    $ccity      = $myrow["city"];
                    $cteh       = $myrow["tehsil"];
                    $cstate     = $myrow["state"];
                    $cdist      = $myrow["district"];
                    $ccoun      = $myrow["country"];
                    $cstu       = $myrow["students"];
                    $cbatch     = $myrow["batch"];
    ?>
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <title>Makhtab</title>
                <link rel="stylesheet" type="text/css" href="form2/view.css" media="all">
                    <script type="text/javascript" src="form2/view.js"></script>
                    <script type="text/javascript" src="form2/calendar.js"></script>
                    <meta http-equiv="Content-Script-Type" content="text/javascript"> 

                        <script language="javascript" type="text/javascript">
                            var jj=1;
                            function addRow()
                            {
                                //alert(jj)
                                var tbl = document.getElementById('zimtable');
                                var lastRow = tbl.rows.length;
                                var iteration = lastRow - 1;
                                var row = tbl.insertRow(lastRow);

                                var firstCell = row.insertCell(0);
                                var el = document.createElement('input');
                                el.type = 'text';
                                el.name = 'zimname_' + jj;
                                el.id = 'zimname_' + jj;
                                el.size = 40;
                                el.maxlength = 40;
                                firstCell.appendChild(el);

                                var secondCell = row.insertCell(1);
                                var el2 = document.createElement('input');
                                el2.type = 'text';
                                el2.name = 'zimmob_' + jj;
                                el2.id = 'zimmob_' + jj;
                                el2.size = 13;
                                el2.maxlength = 13;
                                secondCell.appendChild(el2);

                                // alert(i);
                                jj++;
                                makhtab.hh.value=jj;
                                 alert(jj);
                            }
                        </script>
                        <script language="javascript" type="text/javascript">
                            var ii=1;
                            function addalRow()
                            {
                               // alert(ii);
                                var tbl = document.getElementById('alimtable');
                                var lastRow = tbl.rows.length;
                                var iteration = lastRow - 1;
                                var row = tbl.insertRow(lastRow);

                                var firstCell = row.insertCell(0);
                                var el = document.createElement('input');
                                el.type = 'text';
                                el.name = 'alimname_' + ii;
                                el.id = 'alimname_' + ii;
                                el.size = 40;
                                el.maxlength = 40;
                                firstCell.appendChild(el);

                                var secondCell = row.insertCell(1);
                                var el2 = document.createElement('input');
                                el2.type = 'text';
                                el2.name = 'alimmob_' + ii;
                                el2.id = 'alimmob_' + ii;
                                el2.size = 13;
                                el2.maxlength = 13;
                                secondCell.appendChild(el2);

                                var thirdCell = row.insertCell(2);
                                var element4 = document.createElement("select");
                                element4.name ='qabil_'+ii;
                                var option1 = document.createElement("option");
                                option1.value='';
                                option1.innerHTML='';
                                element4.appendChild(option1);

                                var option2 = document.createElement("option");
                                option1.value='MUFTI';
                                option1.innerHTML='MUFTI';
                                element4.appendChild(option1);

                                var option3 = document.createElement("option");
                                option2.value='AALIM';
                                option2.innerHTML='AALIM';              
                                element4.appendChild(option2);

                                var option4 = document.createElement("option");
                                option3.value='QARI';
                                option3.innerHTML='QARI';               
                                element4.appendChild(option3);

                                var option5 = document.createElement("option");
                                option4.value='HAFIZ';
                                option4.innerHTML='HAFIZ';              
                                element4.appendChild(option3);

                                thirdCell.appendChild(element4);

                                // alert(i);
                                ii++;
                                makhtab.rr.value=ii;
                                  alert(ii);
                            }
                        </script>
                        <script  type="text/javascript" src="tran/js/jquery-1.6.1.min.js"></script>
                        <script  type="text/javascript" src="tran/js/jquery-ui-1.8.14.custom.min.js"></script>

                        <script  type="text/javascript" src="tran/js/jq-ac-script.js"></script>
          <SCRIPT language=Javascript>
          <!--
          function isNumberKey(evt)
          {
             var charCode = (evt.which) ? evt.which : event.keyCode
             if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;

             return true;
          }
          //-->
    </SCRIPT>

                        </head>
                        <body id="main_body" >

                            <div id="form_container">
                                <form id="makhtab" class="appnitro" enctype="multipart/form-data" method="POST"  onsubmit="return checkForm()">
                                    <div class="form_description">
                                        <br />
                                        <h2>Makhtab Details</h2>
                                    </div>

                               <table border="0px" width="100%">
                                            <tr>
                                                <td align="right"><label class="description" for="element_1">Code</label></td><td><input  name="code"  type="text" maxlength="11" size="11"  Placeholder="Please enter a code" value="<?php echo $newsid; ?>" disabled="disabled"/></td>
                                            </tr>
                                            <tr>
                                                <td align="right"><label class="description" for="element_1">Name</label></td><td><input id="name" name="name" onkeypress=""  tabindex="1"type="text" maxlength="40" size="40" value="<?php echo $cname; ?>"/></td></td>
                                            </tr>
                                            <tr>
                                                <td align="right"><label class="description" for="element_1">Address</label></td><td><input id="add1" name="add1"  type="text" maxlength="80" size="80"  value="<?php echo $cadd1; ?>"/></td></td>
                                            </tr>
                                            <tr>
                                                <td align="right"></td><td><input id="add2" name="add2"  type="text" maxlength="80" size="80"  value="<?php echo $cadd2; ?>"/></td>
                                            </tr>
                                            <tr>
                                                <td align="right"></td><td><input id="add3" name="add3"  type="text" maxlength="80" size="80"  value="<?php echo $cadd3; ?>"/></td></td>
                                            </tr>
                                             <tr>
                                                <td align="right"><label class="description" for="element_1">Pin</label></td><td><input id="pin"  name="pin"   type="text" maxlength="10" size="10"  value="<?php echo $cpin; ?>"/></td>
                                             </tr>
                                             <tr>
                                                <td align="right"><label class="description" for="element_1">Telephone</label></td><td><input id="contact"  name="contact"   type="text" maxlength="10" size="10"  value="8082034771"/></td>
                                            </tr>
                                         <tr>
                                                 <td align="right"><label class="description" for="element_1">Center</label></td><td><select name="cmbcen" class="element text medium" />
                                                 <option value="<?php echo $ccen; ?>"><?php echo $ccen; ?></option>
                                                <?php

                                                $result = mysql_query("SELECT code, `name` FROM centre") or die(mysql_error());

                                                while ($coun = mysql_fetch_array($result)) {

                                                    echo "<option value='$coun[name]'>$coun[name]</option>";
                                                }
                                                ?>
                            </select>
                                              </tr>
                                        <tr>

                                       <td align="right"><label class="description" for="element_1">City</label></td><td><select id="cmbcity" name="cmbcity" class="element text medium" style="font-size:14px;">
                                                <option value="<?php echo $ccity; ?>"><?php echo $ccity; ?></option>
                                               <?php

                                                $result = mysql_query("SELECT `name` FROM city ") or die(mysql_error());
                                                  while ($coun = mysql_fetch_array($result)) {
                                                          echo "<option value=".$coun['name'].">".$coun['name']."</option>";
                                                  }
                                                ?></select>
                                        </td>
                                        </tr>
                                     <tr>
                                        <td align="right"><label class="description" for="element_1">Tehsil</label></td><td><select id="cmbteh" name="cmbteh" class="element text medium" style="font-size:14px;">
                                                <option value="<?php echo$cteh; ?>"><?php echo$cteh; ?></option>
                                                <?php
                                                $result = mysql_query("SELECT  `name` FROM tehsil ") or die(mysql_error());
                                                   while($coun = mysql_fetch_array($result)) {
                                                    echo "<option value=".$coun['name'].">".$coun['name']."</option>";
                                                }
                                                ?></select>
                                        </td></tr>
                                                             <tr>
                                        <td align="right"><label class="description" for="element_1">District</label></td><td><select id="cmbdist" name="cmbdist" class="element text medium" style="font-size:14px;">
                                                <option value="<?php echo $cdist; ?>"><?php echo $cdist; ?></option>
                                                <?php
                                                $result = mysql_query("SELECT  `name` FROM district ") or die(mysql_error());
                                                   while($coun = mysql_fetch_array($result)) {
                                                    echo "<option value=".$coun['name'].">".$coun['name']."</option>";
                                                }
                                                ?></select>
                                        </td></tr>
                                        <tr>
                                        <td align="right"><label class="description" for="element_1">State</label></td><td><select id="cmbstate" name="cmbstate" class="element text medium" style="font-size:14px;">
                                                <option value="<?php echo $cstate; ?>"><?php echo $cstate; ?></option>
                                                <?php
                                                $result = mysql_query("SELECT  `name` FROM state ") or die(mysql_error());

                                                while ($coun = mysql_fetch_array($result)) {
                                                 echo "<option value=".$coun['name'].">".$coun['name']."</option>";
                                                 }
                                                ?></select>
                                        </td></tr>
                                                       <tr>
                                        <td align="right"><label class="description" for="element_1">Country</label></td><td><select id="cmbcoun" name="cmbcoun" class="element text medium" style="font-size:14px;">
                                                <option value="<?php echo $ccoun; ?>"><?php echo $ccoun; ?></option>
                                                <?php
                                                $result = mysql_query("SELECT  `name` FROM country ") or die(mysql_error());
                                                 while($coun = mysql_fetch_array($result)) {
                                                 echo "<option value=".$coun['name'].">".$coun['name']."</option>";a

                                                }
                                                ?></select>

                                        </td></tr>
                                  </table>          <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                    <div class="form_description">
                                                        <h2>Zimmedar Details</h2>
                                                    </div>

                                   <table  id="zimtable" border="0px" size="100px" cellspacing="0" cellpadding="2">
                                                    <tr>
                                                        <td><strong>Zimmedar Name</strong></td>
                                                        <td><strong>Mobile</strong> </td>
                                                    </tr>
                                  <?php

                                            $zim = mysql_query("SELECT * FROM `makhzim` WHERE makhcode='$newsid' ORDER BY srno")or die(mysl_error());
                                            $ctr= 0;
                                            while ($zrow = mysql_fetch_array($zim)){
                                                 $ctr++;
                                                       echo"<tr>";
                                                        echo "<td><input name='zimname_$ctr' type='text' id='zimname_$ctr' size='40' maxlength='20' value=$zrow[name] /></td>";
                                                        echo "<td><input name='zimmob_$ctr' type='text' id='zimmob_$ctr' size='13' maxlength='20' value=$zrow[mobile] /></td>";
                                                        echo "</tr>";
                                            }?>
                                       </table>
                                              <input type="button" value="Add" onclick="addRow();" /><input name="hh" type="hidden"  id="hh" value="<?php echo $ctr; ?>"/>

                                                    <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                    <div class="form_description">
                                                        <h2>Muallim Details</h2>
                                                        <!--<p>This is your form description. Click here to edit.</p>-->
                                                    </div>

                                       <table  id="alimtable" border="0px" size="100px" cellspacing="0" cellpadding="2">
                                                    <tr>
                                                        <td><strong>Muallim Name</strong></td>
                                                        <td><strong>Mobile</strong> </td>
                                                        <td><strong>Qabiliyat</strong> </td>

                                                    </tr>
                                                    <?php 
                                                    $alim = mysql_query("SELECT * FROM  `makhalim` WHERE makhcode='$newsid' ORDER BY srno") or die(mysql_error());

                                                    $mctr = 0;
                                                    while($arow = mysql_fetch_array($alim)){
                                                        $ctr++;
                                                        echo "<tr>";
                                                        echo "<td><input name='alimname_$mctr' type='text' id='alimname_$mctr' size='40' value=$arow[name] maxlength='20' /></td>";
                                                        echo "<td><input name='alimmob_$mctr' type='text' id='alimmob_$mctr' size='13' maxlength='20' value=$arow[mobile] /></td>";      
                                                        echo "<td><select id='qabil' name='qabil_$mctr' class='element text large' style='font-size:14px;'/>
                                                        <option value='$arow[qabiliyat]'>$arow[qabiliyat]</option>    
                                                           <option value=''></option>    
                                                            <option value='MUFTI'>MUFTI</option>
                                                            <option value='AALIM'>AALIM</option>
                                                            <option value='QARI'>QARI</option>
                                                            <option value='HAFIZ'>HAFIZ</option>
                                                            </select></td>";
                                                        echo"</tr>";
                                                    }
                                                    ?>
                                                </table>
                                                <input type="button" value="Add" onclick="addalRow();" /><input name="rr" type="hidden"  id="rr" value="<?php echo $mctr; ?>" />
                                                    <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                <table border="0px" width="85%">
                                                    <tbody><tr>
                                                            <td width="105"><label class="description">No. of Students</label></td>
                                                            <td width="65"><input type="text" name="stu" onkeypress="return isNumberKey(event)" size="5" maxlength="5" value="<?php echo $cstu; ?>"></input></td>
                                                            <td width="105"><label class="description">No. of Batches</label></td><td width="14"><input type="text" name="batch" onkeypress="return isNumberKey(event)" size="5" maxlength="3" value="<?php echo $cbatch; ?>"></input></td>
                                                        </tr>
                                                        <tr>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                                    <br /><p style="border-bottom: 1px dotted #ccc;"></p><br />
                                                    <input type="submit" name="submit" value="Update">&nbsp;&nbsp;<input type="submit" name="close" value="Exit"/>
                                                     </form>
                                                    </div>
                                                </body>
                                                </html>

      <?php
    }
    if(isset($_POST['close'])){
        header("Location: makh_tab.php");
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:31:06.817

我相信这是问题所在

1.  您的删除语句针对不是主键的字段

    ```
    mysql_query("DELETE FROM `makhalim` WHERE makhcode ='$newsid'") or die(mysql_error());
    AND 
    mysql_query("DELETE FROM makhzim WHERE makhcode ='$newsid'") or die(mysql_error()); 
    ```

由于您的 makhcode 不是主键，因此它正在处理同一代码的所有记录。

# ios - 当应用商店中有新的更新（最新版本）可用时，需要在我的 iOS 应用程序中显示通知

> ID：14598042
> 
> 赞同：2
> 
> 时间：2013-01-30T06:35:19.470
> 
> 标签：ios, apple-push-notifications

当应用商店中有新的更新可用时，我需要在我的 iOS 应用程序中显示通知，当我单击通知时，我需要将用户重定向到 itunes.apple.com 中的我的应用页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:43:26.753

看看[城市飞艇](http://urbanairship.com/products/push-messaging)。它是一个第三方服务器，可帮助您向设备发送推送通知。该教程可[在此处获得](https://docs.urbanairship.com/display/DOCS/iOS+Tutorials)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:16:17.397

您还可以使用第三方与服务器集成，如[Xtify](http://www.xtify.com/)或法国解决方案[Mainline](http://mainline.fr)

# java - 在复杂对象中收集数据的良好设计模式

> ID：14598043
> 
> 赞同：2
> 
> 时间：2013-01-30T06:35:19.440
> 
> 标签：java, design-patterns

假设我有一个复杂的对象层次结构，例如：

```
public class ClassRoom
{
    private ClassRoomInfo classRoomInfo;
    private List<Student> students;
    ...
} 
```

我将此对象作为来自客户端的输入，但该对象可能未完全填充。例如，客户端可以提供非常少的细节，例如对象`studentId(s)`中的次要信息。`classRoomInfo`我想`DataCollector`为这个对象编写一个类，它将预先收集所有丢失的数据。

在这种情况下，最好的设计模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:22:53.837

这是一种方法。这个想法是将视为[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)`ClassRoom`的一个实例，其中层次结构中的每个对象都知道如何使用. 如果一个对象已经被填充，它会通过返回自身来响应被要求填充自己的请求；如果未填写，它将从使用不可变对象来表示数据）。`DataCollector``DataCollector`

我已经`Fillable`为知道如何填充自己的对象定义了一个接口。但是，这并不是必需的，因为该`fillIn`方法永远不会被多态调用。这只是文档，真的。

我假设填写过程非常简单。显然，它可能更复杂，无论是在检测填写的内容（例如，一个空的学生列表可能表明该列表尚未填充），以及如何填写它。如果您将此设计应用于您的真正的问题，你会发现`DataCollector`变得异常复杂。您将需要以不同的方式考虑它；您可能希望将更多的集合逻辑移动到域类中，或者将其拆分为每个类的 DAO（`ClassRoomInfoDataCollector`等）。

```
public interface Fillable<T> {
    public T fillIn(DataCollector collector);
}

public class ClassRoom implements Fillable<ClassRoom> {
    private final ClassRoomInfo classRoomInfo;
    private final List<Student> students;

    private ClassRoom(ClassRoomInfo classRoomInfo, List<Student> students) {
        this.classRoomInfo = classRoomInfo;
        this.students = students;
    }

    @Override
    public ClassRoom fillIn(DataCollector collector) {
        ClassRoomInfo filledInClassRoomInfo = classRoomInfo.fillIn(collector);
        List<Student> filledInStudents = new ArrayList<Student>();
        for (Student student : students) {
            filledInStudents.add(student.fillIn(collector));
        }
        if (filledInClassRoomInfo == classRoomInfo && filledInStudents.equals(students)) return this;
        return new ClassRoom(filledInClassRoomInfo, filledInStudents);
    }
}

public class ClassRoomInfo implements Fillable<ClassRoomInfo> {
    final String roomNumber;
    final Integer capacity;

    private ClassRoomInfo(String roomNumber, int capacity) {
        this.roomNumber = roomNumber;
        this.capacity = capacity;
    }

    @Override
    public ClassRoomInfo fillIn(DataCollector collector) {
        if (capacity != null) return this;
        return new ClassRoomInfo(roomNumber, collector.getClassRoomCapacity(roomNumber));
    }
}

public class Student implements Fillable<Student> {
    final int id;
    final String name;

    private Student(int id, String name) {
        this.id = id;
        this.name = name;
    }

    @Override
    public Student fillIn(DataCollector collector) {
        if (name != null) return this;
        return new Student(id, collector.getNameOfStudent(id));
    }
}

public class DataCollector {
    public String getNameOfStudent(int id) {
        ...
    }

    public int getClassRoomCapacity(String roomNumber) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:32:49.397

我认为您需要在需要时*延迟加载*数据。类成员的 getter`ClassRoom`应该足以满足此目的。

不建议使用单独的`DataCollector`类，因为它会迫使您`ClassRoom`为所有成员公开设置器。

这个[链接](http://martinfowler.com/eaaCatalog/lazyLoad.html "关联")（和书）应该告诉你更多关于 Lazy load 的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:11:47.333

尝试“外观设计模式”。希望它可以帮助你。[您可以在http://javapapers.com/design-patterns/facade-design-pattern/](http://javapapers.com/design-patterns/facade-design-pattern/)中找到有关 Facade 的良好描述

# ember.js - 渲染模板如何将自定义模板渲染到路由使用的默认模板中定义的插座中。

> ID：14598048
> 
> 赞同：7
> 
> 时间：2013-01-30T06:35:33.463
> 
> 标签：ember.js, handlebars.js

我有一个场景，在特定路线中，我有两个出口，在同一路线中，我想在两个不同的出口中显示两个不同的模板。

**详细模板：**

```
 <script type="text/x-handlebars" data-template-name="details">
    Details Template
    {{#linkTo "index"}}Home{{/linkTo}}
    <hr/>
    <h4>DETAILS</h4>
    <hr/>
    <div class='outletArea'>
    {{outlet "detailsList"}}
    </div>
    <hr/>
    <div class='outletArea'>
    {{outlet "detailsMatrix"}}
    </div>
</script> 
```

**路线定义为：**

```
App.DetailsRoute = Ember.Route.extend({
renderTemplate: function () {
    this._super();//to render the details temlate whch has outlets
    this.render('detailsList', { outlet: 'detailsList' });//render the list in list outlet
    this.render('detailsMatrix', { outlet: 'detailsMatrix' });//rendet the matrix in matrix outlet
    }
}); 
```

但是这两个模板并没有在这两个出口中呈现，而是直接在根元素中呈现。

我的问题的小提琴是[http://jsfiddle.net/anshulguleria/eCTtu/](http://jsfiddle.net/anshulguleria/eCTtu/)

就像在 jsfiddle 中一样，我希望这两个模板在灰色区域中呈现。因此，当通过链接时，我渲染的模板不会被删除并一次又一次地渲染。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T07:24:19.100

你的`details`路由在顶层，所以当在没有指定选项的情况下调用`render`它的函数时，它会尝试在顶层模板中（即在模板中）找到这些出口。你可以在[这个 JSFiddle](http://jsfiddle.net/lcoq/ApmZ6/)中看到它。`renderTemplate``into``application`

如果您在嵌套路由中，它会在父模板 (AFAIK) 中搜索它们。

因此，您只需添加如下`into`选项：

```
this.render('detailsList', { outlet: 'detailsList', into: 'details' });
this.render('detailsMatrix', { outlet: 'detailsMatrix', into: 'details' }); 
```

它[有效！](http://jsfiddle.net/lcoq/2NfXx/1/)

**编辑**

看起来 Ember 期望有一个`application`具有`{{outlet}}`. 这似乎是 Ember 中的一个错误，我认为您可以在 github 中发布一个问题。

我更新[了上面的链接](http://jsfiddle.net/lcoq/2NfXx/1/)以添加应用程序模板。

# javascript - 解析作为响应返回的 JSON 对象

> ID：14598049
> 
> 赞同：2
> 
> 时间：2013-01-30T06:35:37.393
> 
> 标签：javascript, json, jquery

```
$(document).ready(function(){
    $('#id1').click(function(){

        $.ajax({
            type:"GET",
            url:" ggs.erm.servlet.setup5.Page",
            success:function(response){
                var obj = JSON.parse(response);
                alert(obj);
            }
        });
    });
}); 
```

我在解析从服务器收到的 JSON 对象时遇到问题。

```
Connection con = null;
JSONObject json = new JSONObject();
JSONArray jarray = new JSONArray();
try{
    con =ConnectionPool.getConnection();
    String sql = "select country from country_name";
    Statement stmt = con.createStatement();
    ResultSet rs =  stmt.executeQuery(sql);
    while(rs.next())
    {
        jarray.put(rs.getString(1));    
    }
    json.put("country", jarray);
}
catch(Exception e){e.printStackTrace();}
finally{
    try {
        con.close();
    } catch (SQLException e) {
    e.printStackTrace();}
    }
    response.setContentType("application/json");
    try {
        response.getWriter().write(json.toString());
    } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
} 
```

这是生成 json 的代码。
问题是如何解析我在客户端获得的 JSON 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:46:40.030

不要`alert()`用来调试。它只是为您提供`toString()`价值，即`[object Object]`.

相反，将对象记录到控制台。

```
console.log(response);

// or

var obj = JSON.parse(response);
console.log(obj); 
```

在浏览器中打开开发人员工具以查看对象的内容。

# mysql - 数小时未访问服务器后出现 MySQLNonTransientConnectionException

> ID：14598050
> 
> 赞同：3
> 
> 时间：2013-01-30T06:35:42.173
> 
> 标签：mysql, hibernate

有一个 Grails2.2/Hibernate/Tomcat7/MySQL5.5 网络服务器。在几个小时没有 Web 客户端请求它之后，对它的第一个请求失败如下。（事实上​​，它每天早上都会发生。）任何顺序请求都会得到正确处理。

我指示 MySQL 驱动程序，`?autoReconnect=true`但它没有帮助。

下面可以注意到回滚，但我不直接从我的代码中调用它。相反，它在长时间停顿后尝试持久化对象时隐式发生。

有什么办法可以治愈吗？

```
Error 500: Executing action [actionName] of controller [MyController] caused exception: Runtime error executing action
Servlet: grails
URI: /appname/grails/appName/actionName.dispatch
Exception Message: Communications link failure during rollback(). Transaction resolution unknown. 
Caused by: Communications link failure during rollback(). Transaction resolution unknown. 
Class: MyController 
At Line: [139] 
Code Snippet:

com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Communications link failure during rollback(). Transaction resolution unknown.
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1014)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)
    at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4808)
    at org.apache.commons.dbcp.DelegatingConnection.rollback(DelegatingConnection.java:368)
    at org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.rollback(PoolingDataSource.java:323)
    at MyController.logRequest(...)
    ...
    at grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilter.java:195)
    at grails.plugin.cache.web.filter.AbstractFilter.doFilter(AbstractFilter.java:63)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

Tomcat 的 context.xml：

```
<Resource name="jdbc/JNDI_NAME" auth="Container"
 type="javax.sql.DataSource" driverClassName="com.mysql.jdbc.Driver"
 url="jdbc:mysql://localhost:3306/dbname?autoReconnect=true"
 username="xxx" password="xxx" maxActive="20" maxIdle="10"
 removeAbandoned="true" removeAbandonedTimeout="60" logAbandoned="true"
 maxWait="-1"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:34:30.200

尝试将以下 c3po 配置添加到您的`hibernate.cfg.xml`文件中。那应该有帮助；看到[这个](http://www.mkyong.com/hibernate/how-to-configure-the-c3p0-connection-pool-in-hibernate/)。

```
<property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>
<property name="hibernate.c3p0.acquire_increment">1</property>
<property name="hibernate.c3p0.idle_test_period">300</property>
<property name="hibernate.c3p0.timeout">5000</property>
<property name="hibernate.c3p0.max_size">10</property>
<property name="hibernate.c3p0.max_statements">0</property>
<property name="hibernate.c3p0.min_size">1</property>
<property name="hibernate.c3p0.acquireRetryAttempts">3</property>
<property name="hibernate.c3p0.acquireRetryDelay">1000</property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:02:25.093

c3p0 没有在我的应用程序中使用，所以我最终告诉我的数据源首先验证数据库连接：

```
<Resource ...
   validationQuery="SELECT 1"
   testOnBorrow="true"/> 
```

# c++ - 我们可以在 C++ 中有一个静态类吗？

> ID：14598056
> 
> 赞同：1
> 
> 时间：2013-01-30T06:36:02.650
> 
> 标签：c++

我只是想知道我们是否可以在 C++ 中拥有静态类。我的意思是我们可以在 C++ 中将一个类声明为静态的`static class foo`吗？我知道我们可以在 C++ 中拥有静态成员变量和静态成员函数，但我不确定静态类。

编辑：

我打算问一个类是静态的意味着什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T06:43:48.783

`static`是*存储类*说明符。

*   应用于变量，它指定对象的*生命周期*和*可见性*——在这种情况下，生命周期是整个程序的执行，可见性仅限于特定的*翻译单元*（通常是给定的源文件）。
*   应用于函数，它类似地指定对象的*可见性*——仅限于定义它的特定翻译单元。
*   应用于类成员变量和函数，它将变量定义为类的属性，而不是对象本身。

这就是半迂腐的定义。问题是，您希望将什么语义附加到“静态类”的概念上？嵌套类自动具有类似静态的属性——它们是类的属性，而不是单个对象。如果您想要在外部范围内声明的类的类静态属性（即不与跨不同翻译单元的单一定义规则冲突），您可以使用[匿名命名空间](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T06:45:34.630

static 关键字意味着它所引用的对象在整个程序的生命周期中都存在。类定义只是构造对象的大纲。

考虑到这一点，也许您可​​能希望创建一个命名空间或创建一个[单例对象](http://en.wikipedia.org/wiki/Singleton_pattern)，这是一个设计为只有一个实例的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T06:40:33.380

不，但是如果您只使用静态方法（和数据）创建一个类，您基本上可以实现几乎相同的效果。请注意，C++ 中没有静态构造函数的概念。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T06:43:33.743

如果“静态类”指的是 C# 中的类，那么 C++ 中的等价物就是只创建一个构造函数并将其设为私有，并避免创建非静态成员。

如果“静态类”指的是 Java 中的类，那么*所有*C++ 类都是“静态的”，所以不能添加“静态”，因为它是多余的。

# java - EditText 在单独的 xml 文件上更改 WebView 页面？

> ID：14598057
> 
> 赞同：1
> 
> 时间：2013-01-30T06:36:11.917
> 
> 标签：java, android, xml, browser, webview

我正在开发一个 Android 网络浏览器，使用库 ActionbarSherlock 和 SlidingMenu，我有一个 EditText 作为我的 URL 栏，因为它是一个滑动菜单，它需要它自己的 .xml 文件，我如何强制我的“Go”按钮更改网页在另一个 .xml 文件上？

如果需要，这里是我的滑动菜单.xml的代码~

```
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.EditText;

public EditText iText;
public WebView iWeb;

public class LeftMenu extends Home_View implements OnClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.left_slide);

        iText = (EditText)findViewById(R.id.urlText);
        Button go = (Button)findViewById(R.id.bGo);
        go.setOnClickListener(this);
    }

    @Override
    public void onClick(View v){
        switch(v.getId()){
        case R.id.bGo:
            String page = iText.getText().toString();
            iWeb.loadUrl(page);
            break;
        }
    }
} 
```

# html - 如何在此幻灯片放映中设置默认图像？

> ID：14598062
> 
> 赞同：0
> 
> 时间：2013-01-30T06:36:48.530
> 
> 标签：html, css, image, hover, slideshow

我仅按照我在别处看到的示例使用 HTML 和 CSS 创建了幻灯片放映。它使用悬停选择器切换照片。我怎样才能让悬停永久保持在我悬停到另一张照片上？如何设置默认图片以激活悬停选择器？像这个例子，我似乎无法完全适应我的代码：[http](http://www.cssplay.co.uk/menu/cssplay-hover-permanent-gallery-v2.html) ://www.cssplay.co.uk/menu/cssplay-hover-permanent-gallery-v2.html ？

这是代码：

```
<!DOCTYPE html>
<html>
    <head>
      <link type="text/css"; rel="stylesheet"; href="SLideshow.css"/>
      <title>Untitled Document</title>
    </head>
<body>
<div class="SlideShow">
  <ul>
    <li>
      <img src="TheNorthFaceEcoGreen.jpg" class="Thumbnail">
      <div>
        <img src="TheNorthFaceEcoGreen.jpg" class="LargeImage">
      </div>
    </li>
    <li>
      <img src="PuenteAcelere.jpg" class="Thumbnail">
        <div>
          <img src="PuenteAcelere.jpg" class="LargeImage">
        </div>
    </li>
  </ul>
</div>
</body>
</html> 
```

使用这种样式：

```
<style type="text/css">
.LargeImage{width:42em; height:23.2em;border-radius:15px;}
.Thumbnail{width:10em; height:6em;}
.SlideShow{width:42em;height:33.2em;overflow:hidden; border:solid black 2px;}
.SlideShow>ul{padding:0;margin:0;}
.SlideShow>ul>li{display:inline;margin:0em;padding:0em;font-size:1em;margin-    right:-0.2em;}
.SlideShow>ul>li>div{display:none;}
.SlideShow>ul>li:hover>div{display:block;float:left;}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:22:33.370

我重写你的代码。

我使用“通用兄弟组合器”。

[http://www.w3.org/TR/selectors/#general-sibling-combinators](http://www.w3.org/TR/selectors/#general-sibling-combinators)

演示：http: [//jsfiddle.net/KgV33/1/](http://jsfiddle.net/KgV33/1/)

HTML：

```
<!DOCTYPE html>
<html>
<head>
<link type="text/css"; rel="stylesheet"; href="SLideshow.css"/>
<title>Untitled Document</title>
</head>
<body>
    <div class="SlideShow">
        <img src="http://dummyimage.com/420x232/ccc/fff&text=1" class="Thumbnail"/>
        <img src="http://dummyimage.com/420x232/ccc/000&text=2" class="Thumbnail"/>
        <div class="large">
            <img src="http://dummyimage.com/840x464/ccc/fff&text=1" class="LargeImage"/>
            <img src="http://dummyimage.com/840x464/ccc/000&text=2" class="LargeImage"/>
        </div>        
    </div>
</body>
</html> 
```

CSS：

```
.LargeImage{width:42em; height:23.2em;border-radius:15px;}
.Thumbnail{width:10em; height:6em;}
.SlideShow{width:42em;height:33.2em;overflow:hidden; border:solid black 2px;}

.SlideShow > .Thumbnail ~ .large > .LargeImage{
    display:none;
}
/* default large img */
.SlideShow > .Thumbnail ~ .large > .LargeImage:nth-child(1){
    display:block;
}
/* hide all large img */
.SlideShow > .Thumbnail:hover ~ .large > .LargeImage{
    display:none;
}

.SlideShow > .Thumbnail:nth-child(2):hover ~ .large > .LargeImage:nth-child(2),
.SlideShow > .Thumbnail:nth-child(1):hover ~ .large > .LargeImage:nth-child(1){ display:block; } 
```

# android - 提醒功能

> ID：14598063
> 
> 赞同：3
> 
> 时间：2013-01-30T06:36:49.923
> 
> 标签：android, alarmmanager, android-notifications, android-alarms, android-calendar

在我的应用程序中，我试图在该提醒上设置提醒和警报，但我无法这样做。

由于我不具备如何设置提醒的完整和适当的知识，因此对其进行编辑和删除。当我在谷歌上搜索时，我得到的东西对我来说并不容易理解。

我尝试了一个代码：Main.java

```
Calendar cal = Calendar.getInstance();
java.util.Calendar;

// add minutes to the calendar object
cal.set(Calendar.MONTH, 4);
cal.set(Calendar.YEAR, 2011);               
cal.set(Calendar.DAY_OF_MONTH, 5);
cal.set(Calendar.HOUR_OF_DAY, 21);
cal.set(Calendar.MINUTE, 43);

Intent alarmintent = new Intent(getApplicationContext(), AlarmReceiver.class);
alarmintent.putExtra("title","Title of our Notification");
alarmintent.putExtra("note","Description of our  Notification");
//HELLO_ID is a static variable that must be initialised at the BEGINNING OF CLASS with    1;

//example:protected static int HELLO_ID =1;
PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(), HELLO_ID,
alarmintent,PendingIntent.FLAG_UPDATE_CURRENT|  Intent.FILL_IN_DATA);
//VERY IMPORTANT TO SET FLAG_UPDATE_CURRENT... this will send correct extra's     informations to 
//AlarmReceiver Class
// Get the AlarmManager service

AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

报警接收器.java

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.widget.Toast;

public class AlarmReceiver extends BroadcastReceiver {

    private static int NOTIFICATION_ID = 1;

@Override
public void onReceive(Context context, Intent intent) {

    NotificationManager manger = (NotificationManager)     
    context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon, "Combi Note", System.currentTimeMillis());
    PendingIntent contentIntent = PendingIntent.getActivity(context, NOTIFICATION_ID, new Intent(context, AlarmReceiver.class), 0);
    Bundle extras=intent.getExtras();
    String title=extras.getString("title");
    //here we get the title and description of our Notification

    String note=extras.getString("note");
    notification.setLatestEventInfo(context, note, title, contentIntent);
    notification.flags = Notification.FLAG_INSISTENT;
    notification.defaults |= Notification.DEFAULT_SOUND;
    //here we set the default sound for our 
    //notification

    // The PendingIntent to launch our activity if the user selects this notification
    manger.notify(NOTIFICATION_ID++, notification);
    }
} 
```

如何在日历中设置提醒、编辑和删除提醒。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T13:20:15.453

我在浏览后找到了答案，因为我们可以通过使用 EVENTS 和 Reminder 访问默认设置来在 android 设备中设置提醒。

代码如图所示：

```
public void addReminder(int statrYear, int startMonth, int startDay, int startHour, int startMinut, int endYear, int endMonth, int endDay, int endHour, int endMinuts){ 
    Calendar beginTime = Calendar.getInstance();
    beginTime.set(statrYear, startMonth, startDay, startHour, startMinut);
    long startMillis = beginTime.getTimeInMillis();

    Calendar endTime = Calendar.getInstance();
    endTime.set(endYear, endMonth, endDay, endHour, endMinuts);
    long endMillis = endTime.getTimeInMillis();

    String eventUriString = "content://com.android.calendar/events";
    ContentValues eventValues = new ContentValues();

    eventValues.put(Events.CALENDAR_ID, 1);
    eventValues.put(Events.TITLE, "OCS");
    eventValues.put(Events.DESCRIPTION, "Clinic App");
    eventValues.put(Events.EVENT_TIMEZONE, "Nasik");
    eventValues.put(Events.DTSTART, startMillis);
    eventValues.put(Events.DTEND, endMillis);

    //eventValues.put(Events.RRULE, "FREQ=DAILY;COUNT=2;UNTIL="+endMillis);
    eventValues.put("eventStatus", 1);
    eventValues.put("visibility", 3);
    eventValues.put("transparency", 0); 
    eventValues.put(Events.HAS_ALARM, 1);

    Uri eventUri = getContentResolver().insert(Uri.parse(eventUriString), eventValues);
    long eventID = Long.parseLong(eventUri.getLastPathSegment());

    /***************** Event: Reminder(with alert) Adding reminder to event *******************/

    String reminderUriString = "content://com.android.calendar/reminders";

    ContentValues reminderValues = new ContentValues();

    reminderValues.put("event_id", eventID);
    reminderValues.put("minutes", 1);
    reminderValues.put("method", 1);

    Uri reminderUri = getContentResolver().insert(Uri.parse(reminderUriString), reminderValues);
} 
```

希望这个答案有助于在日历中为所有人设置提醒。

# javascript - 使用 jQuery 隐藏 div onClick

> ID：14598064
> 
> 赞同：0
> 
> 时间：2013-01-30T06:36:52.763
> 
> 标签：javascript, jquery, html, toggle, slideup

我在[这里](http://jsfiddle.net/fS5gq/)有一个脚本演示，它允许我在我的网站上显示和隐藏内容。它运行良好。

但是，**当我单击链接以显示内容然后再次单击以隐藏它时，它会重新打开它。**在显示（“活动”）状态下单击时，我需要它完全隐藏。

谁能解释如何解决这个问题？

谢谢你。

**代码：**

```
$(document).ready(function() {

 $('.showscroll').bind('click', 'h2, h3', function(e) {
   e.preventDefault();

   $(this).toggleClass('active');
   $('.newboxes2').slideUp().delay(200);
   $(this).find('.newboxes2').slideToggle();

               if($(this).is('.active') ) {
                       $(this).find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_onstate.png');
               } else {
                       $(this).find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_offstate.png');
               }
   if (this.id === 'service29') {
    $('html, body').animate({
      scrollTop: $(this).find('h2').offset().top
    }, 1000);
                }

 });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:45:06.133

如果您只调用它，它将正确切换`.slideToggle`。每次调用`.slideUp`时，它会在可见时向上滑动，然后立即向下滑动，因为它再次被切换。它第一次向下滑动，因为`.slideUp`它不可见。

如果要隐藏所有其他元素，可以使用`.not`排除当前“显示”的元素。

[http://jsfiddle.net/fS5gq/3/](http://jsfiddle.net/fS5gq/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:52:21.963

试试这个删除`$('.newboxes2').slideUp().delay(200);`

```
 $(document).ready(function() {

 $('.showscroll').bind('click', 'h2, h3', function(e) {
   e.preventDefault();

   $(this).toggleClass('active');       
   $(this).find('.newboxes2').slideToggle();

               if($(this).is('.active') ) {
                       $(this).find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_onstate.png');
               } else {
                       $(this).find('img.small').attr('src', '/wp-content/themes/boilerplate/images/image_corner_btn_offstate.png');
               }
   if (this.id === 'service29') {
    $('html, body').animate({
      scrollTop: $(this).find('h2').offset().top
    }, 1000);
                }

 });

}); 
```

[http://jsfiddle.net/fS5gq/4/](http://jsfiddle.net/fS5gq/4/)

# javascript - Javascript 工具提示帮助和颜色更改

> ID：14598065
> 
> 赞同：0
> 
> 时间：2013-01-30T06:36:54.397
> 
> 标签：javascript, tooltip, mouseover, outsystems

我对Javascript相当陌生。现在，我需要的是我的 projectXYZ 中有一个链接，该链接指向另一个 projectABC。我需要更改链接的颜色并显示链接的 MouseOver 事件的工具提示对话框。

我尝试更改颜色，但无法成功使用工具提示。是否有满足这些要求的组合解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:50:39.450

通常据说在游览 DIV 中添加一个“标题”属性就足够了，它会在鼠标悬停时显示为工具提示。

但是要制作具有正确定位的基本工具提示，您可以使用以下内容。我已经使用它并且它有效！

JS（将有两个 mwthods，showTip 和 hideTip）：

```
<script type="text/javascript">
function showtip(e,message) {
var x=0;
var y=0;
var m;
var h;
if(!e)
var e=window.event;
if(e.pageX||e.pageY) { x=e.pageX;  y=e.pageY;  }
else if(e.clientX||e.clientY)
{ x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop;}
m=document.getElementById('myTooltip');
if((y>10)&&(y<450))
{  m.style.top=y-4+"px";  }
else{  m.style.top=y+4+"px";  }
var messageHeigth=(message.length/20)*10+25;
if((e.clientY+messageHeigth)>510)
{  m.style.top=y-messageHeigth+"px"; }
if(x<850) { m.style.left=x+20+"px";  }
else{  m.style.left=x-170+"px";  }
m.innerHTML=message;m.style.display="block";m.style.zIndex=203;
}

function hidetip(){
var m;
m=document.getElementById('myTooltip');m.style.display="none";
}
</script> 
```

CSS：

```
<style type="text/css">
#myTooltip{padding: 5px; background-color: #FFF8DC;  border: 1px solid #DEB887; width:180px;font-family: Arial, Helvetica, sans-serif; font-size: 12px; color: #6b6b6b; display:none; position:absolute;left:0px;top:0px; }
</style> 
```

和 HTML（将在 href 下面有一个额外的 DIV 以显示工具提示）：

```
<a href="javascript:void(0)" onmouseover="showtip(event, 'Sample tooltip text');"
onmouseout="hidetip();">Hover mouse to see tooltip text.</a>
<div id="myTooltip" ></div> 
```

希望能帮助到你 ！！

# sql-server - 在 SQL Server 中维护“项目到组的关系”

> ID：14598067
> 
> 赞同：0
> 
> 时间：2013-01-30T06:37:06.130
> 
> 标签：sql-server

我正在使用两个表来维护`Items-Groups`关系。

我有一个`items`表，它将有两列`ItemName`和`Groups`.

另一个表`Group`有一个列`GroupName`

用户将为每个项目添加一个或多个组。然后，用户将查询没有分配给该组的项目。

目前我正在追加`GroupName`to`Groups`列，同时查询我`%Groups%`在 where 查询中使用的组。

但是如果用户两次添加同一个组，我需要检查并删除。

有没有更好的方法来维持这些关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:54:30.667

具有组的串联字段会阻止自动执行数据库完整性并禁止索引，因此某些查询将非常慢。

将主键 ItemId 添加（或更改）到 Items 并在 Group 中有一个外键 ItemId。然后，您可以`SELECT COUNT(*) FROM Group WHERE ItemId = X`获取分配给项目的组数。

以上假设项目与组的一对多关系，**如果它是多对多关系：**

而不是 Group 中的外键，有另一个 table `ItemGroupMapping(ItemId FK, GroupId FK)`。

将主键 GroupId 添加到 Group 可能是一个好的数据库设计的好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:46:26.740

不要尝试将多个项目存储在单个列 (*) 中。

相反，创建 3 个表-`Items`和. 将为项目所属的每个组存储 1 行，例如：`Groups``ItemGroups``ItemGroups`

```
CREATE TABLE ItemGroups (
     ItemID int not null,
     GroupID int not null,
     constraint FK_ItemGroups_Items FOREIGN KEY (ItemID) references Items (ItemID),
     constraint FK_ItemGroups_Groups FOREIGN KEY (GroupID) references Groups (GroupID),
     constraint PK_ItemGroups PRIMARY KEY (ItemID,GroupID)
) 
```

请注意，通过在 上添加主键`ItemID,GroupID`，我们防止了重复发生，无需进一步工作。

* * *

(*) SQL 具有一种设计用于包含多个项目的数据结构。它没有数组、列表、字典等。它只有一个结构。它被称为表。*如果你使用*这种结构，一切都会很好。如果您尝试使用例如存储在单个列中的字符串值来伪造某种其他类型的结构，那么事情就不会那么顺利了。

# excel - 如何使用 Excel Web App 数据连接从 Rest API 获取数据？

> ID：14598069
> 
> 赞同：0
> 
> 时间：2013-01-30T06:37:09.067
> 
> 标签：excel, ms-office, office365

我能够使用 REST API 查询在 excel Web 应用程序中填充数据的方法/最佳实践是什么？

我想创建一个模板并将其上传到我的网站，该模板将通过查询基于 REST 或 SOAP 的服务来刷新显示的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T00:03:58.850

How about a normal jquery based webapp using wcf service to populate your excel. So simply put initiates an ajax call to your REST endpoint?

```
try{
    $.ajax({
        type: 'POST',
        url: '/REST-URL',
        contentType: 'xml',
        data: '{data : your data does in here}',
        success: function (msg) {
            Office.context.document.setSelectedDataAsync(msg);
        },
        error: function () {
            result = "fail";
        }
    });
} catch (err) {
    result = err.description;
} 
```

Best practices should be based on how complicated your app is.

# javascript - 跨浏览器禁用用户选择（Ctrl + A）

> ID：14598070
> 
> 赞同：0
> 
> 时间：2013-01-30T06:37:09.480
> 
> 标签：javascript, jquery, html, css, event-handling

默认情况下，用户可以拖动并选择屏幕项目/按 CTRL + A ，所有项目将变为蓝色并模糊（选中）。但是，有没有办法阻止这个事件？谢谢

是否有任何简单的方法，例如在浏览器中添加一些限制或在 body 标签中添加一些属性可以解决问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:39:00.230

```
user-select:none;
-moz-user-select: none;
-webkit-user-select: none;
-ms-user-select: none; 
```

将以下`user-select`属性添加到您不想变成蓝色的元素。将它添加到 body 将变成`selectable`or`editable`元素不是`selectable`or `editable`。因此，建议在特定元素上使用它，例如

```
div, image, iframe {
    user-select:none;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
} 
```

或者您可以查看更多信息：

[文档](https://developer.mozilla.org/en-US/docs/CSS/user-select)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:53:03.863

您可以使用 jquery 来完成

```
$(function(){   
$(document).keydown(function(objEvent) {        
    if (objEvent.ctrlKey) {          
        if (objEvent.keyCode == 65) {                         
            objEvent.disableTextSelect();
            return false;
        }            
    }        
});
}); 
```

希望它有效，此代码在浏览器上禁用 ctrl+a

# powershell - 如何使用 powershell 修改降序文件夹结构中的所有文件？

> ID：14598071
> 
> 赞同：0
> 
> 时间：2013-01-30T06:37:10.450
> 
> 标签：powershell, sharepoint-2010

我正在尝试使用降序文件夹结构中的 .xml 文件扩展名更新所有文件，但我的脚本失败（可能是由于缺乏知识）。任何帮助都会很棒：

```
#Example of syntax
#=======================
# seekAndReplace -FilePath "\\sitecollection\newroot\pages" -FileExtension 
# "*.xml" -OldAddress "http://oldroot/sites/blank/" -NewAddress "http://newroot/sites/blank"
#

function seekAndReplace {
Param(
[string]$FilePath,
[string]$FileExtension,
[string]$OldAddress,
[string]$NewAddress
)
$files = Get-ChildItem $FilePath -Filter $FileExtension
    foreach ($file in $files) {
        (Get-Content $file.fullname) |
        ForEach-Object {$_ -replace $OldAddress,$NewAddress} |
        Set-Content $file.fullname
    } #end foreach
} #end function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:59:39.170

这有帮助吗？注意[Regex Escape 方法](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)的使用。您需要它来转义特殊字符。

```
Get-ChildItem $FilePath -Filter $FileExtension | Foreach-Object {
        (Get-Content $_.fullname) -replace [regex]::Escape($OldAddress),$NewAddress | Set-Content $_.fullname
} 
```

# android - 获取位置并发送短信

> ID：14598072
> 
> 赞同：1
> 
> 时间：2013-01-30T06:37:17.987
> 
> 标签：android, sms, location

下面的代码给了我手机的位置，但没有发送消息。

当我在位置管理器减速之前给出短信代码时，它会在尝试之前发送短信。

```
try{

    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    // Define a listener that responds to location updates
    LocationListener locationListener = new LocationListener() {
        String message;
         public void onLocationChanged(Location location) {
         // Called when a new location is found by the network location provider.
         String loc=location.toString();
       // Toast.makeText(getApplicationContext(), loc,Toast.LENGTH_LONG).show();
         String  phoneNumber="5556";
         message="this is amog and it is my current location "+loc;
         sendSMS(phoneNumber, message);
         Toast.makeText(getApplicationContext(), message,Toast.LENGTH_LONG).show();
         sendSMS(phoneNumber, message);

         }    

    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}

};

    // Register the listener with the Location Manager to receive location updates
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
    }catch(Exception e){
        Toast.makeText(getApplicationContext(), e.getMessage(),Toast.LENGTH_LONG).show();
    } 
```

# ant - Ant 任务检查目标目录中的重复文件

> ID：14598075
> 
> 赞同：3
> 
> 时间：2013-01-30T06:37:20.400
> 
> 标签：ant

我正在将文件列表从源目录复制到目标目录，我需要在复制之前检查重复的文件名..

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:56:42.753

只是想知道，这是否足够？

```
<copy todir="../new/dir" overwrite="false" verbose="true">
    <fileset dir="src_dir"/>
</copy> 
```

正如手册所说（[http://ant.apache.org/manual/Tasks/copy.html](http://ant.apache.org/manual/Tasks/copy.html)）：

> 详细 - 记录正在复制的文件。
> 
> overwrite - 覆盖现有文件，即使目标文件较新。

因为这将是一个省力的解决方案。否则，我认为您需要创建自己的 ant 任务。

* * *

**更新：**

好的，所以我检查了 ant 复制任务的来源，我相信您可以通过在子类中扩展它来完成所需的操作（新的 ant 任务）。正如我假设您正在运行多个文件复制而不仅仅是一个。

所以你需要：

*   好吧，这不是必须的，但我相信它会对您有所帮助：**下载 Ant 的源代码**（您正在使用的版本），假设您使用的是最新的：[http://ant.apache.org/srcdownload.cgi](http://ant.apache.org/srcdownload.cgi)
*   **创建你自己的蚂蚁任务**。有关如何执行和使用它的文档，请参阅：[http://ant.apache.org/manual/develop.html](http://ant.apache.org/manual/develop.html)（查看示例部分）
*   确保您的班级**扩展班级**：`org.apache.tools.ant.taskdefs.Copy`
*   **覆盖超类方法 doFileOperations**，因为它的 javadoc 说：

    > 实际上会复制文件（可能还有空目录）。这是子类覆盖的好方法。

检查您下载的源代码中的方法内容，**您的实现可能类似于以下**内容：

```
@Override
protected void doFileOperations() {
    if (fileCopyMap.size() > 0) {

    Enumeration e = fileCopyMap.keys();
    while (e.hasMoreElements()) {
        String fromFile = (String) e.nextElement();
        String[] toFiles = (String[]) fileCopyMap.get(fromFile);

        for (int i = 0; i < toFiles.length; i++) {
            String toFile = toFiles[i];

            if (fromFile.equals(toFile)) {
                log("Skipping self-copy of " + fromFile, verbosity);
                continue;
            }

            if (new File(toFile).exists) {
                log ("Warning: dest file already exists");
            }
        }
    }
            ...

    super.doFileOperations();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T13:20:14.147

这是一个更完整的实现：

```
import java.io.File;
import java.io.IOException;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;

import org.apache.tools.ant.BuildException;
import org.apache.tools.ant.Project;
import org.apache.tools.ant.taskdefs.Copy;

public class CopyNonDuplicateTast extends Copy {

    public CopyNonDuplicateTast() {
        setOverwrite(true);
    }

    @Override
    public void setOverwrite(boolean overwrite) {
        super.setOverwrite(true);
    }

    @Override
    protected void doFileOperations() {

        Set<String> allToFiles = new HashSet<String>();

        for (final Map.Entry<String, String[]> e : fileCopyMap.entrySet()) {
            final String fromFile = e.getKey();
            final String[] toFiles = e.getValue();

            for (int i = 0; i < toFiles.length; i++) {
                final String toFile = toFiles[i];

                if (fromFile.equals(toFile)) {
                    continue;
                }

                File destFile = new File(toFile);
                if ((destFile.exists() && destFile.isFile()) || allToFiles.contains(toFile)) {
                    String msg = "Destination file \"" + toFile + "\" exists";
                    IOException ex = new IOException(msg);
                    if (failonerror) {
                        throw new BuildException(msg, ex, getLocation());
                    }
                    log(msg, Project.MSG_ERR);
                }
                allToFiles.add(toFile);
            }
        }

        super.doFileOperations();
    }

} 
```

使用此实现，同一复制任务中的两个文件集可能会失败：

```
<copyNonDuplicate todir="${deployment.dir}/languageFiles">
    <fileset dir="../MyComponent1/src">
        <include name="**/*.properties" />
    </fileset>
    <fileset dir="../MyComponent2/src">
        <include name="**/*.properties" />
    </fileset>
</copyNonDuplicate> 
```

# c - C、位移。2个连续班次

> ID：14598076
> 
> 赞同：9
> 
> 时间：2013-01-30T06:37:26.977
> 
> 标签：c

```
static inline void ext4_ext_store_pblock(struct ext4_extent *ex,
                     ext4_fsblk_t pb)
{
    ex->ee_start_lo = cpu_to_le32((unsigned long) (pb & 0xffffffff));
    ex->ee_start_hi = cpu_to_le16((unsigned long) ((pb >> 31) >> 1) &
                      0xffff);
} 
```

这段代码来自linux内核。见最后一行。它确实 pb>>31 然后 >>1 这与 pb >> 32 相同，为什么不这样做？

谢谢你

编辑：谢谢大家。将补丁发送到 ext4 邮件列表

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T06:42:24.157

这两种方法并不完全相同，具体取决于底层数据类型。该标准（C11，6.5.7 位移位运算符）规定：

> 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。

因此，如果要将 32 位宽的整数类型向右移动 32 位，则会导致未定义的行为。但是，将其移动 31 位，然后再移动另一位*是*明确定义的。

这一点虽然是某人可能这样做的原因，但在这种特殊情况下可能没有实际意义。鉴于您的类型是（保证 64 位宽度），和`unsigned long long`之间应该没有区别。`(x >> 31) >> 1``x >> 32`

但是，如果某些平台实际上定义`ext4_fsblk_t`为 32 位类型（或者如果它是从允许 32 位类型^((a))的早期实现继承而来），您会发现自己不得不求助于两阶段转换来保证定义的行为。

* * *

^((a))：在和之间有一个过渡阶段`ext3`，`ext4`它允许移动到 48 位及其范围，这是通往64 位数据类型`ext3`的垫脚石。`ext4`在此之前，8TB 是文件系统的实际限制。

尽管我还没有确认，这个代码片段有*可能*是该转换的遗留物，在基础数据类型达到 64 位宽之前。

开始使用的类型 ,`sector_t`有条件地定义为`u64`or `unsigned long`，这可以解释为什么代码首先存在。在将其定义为后者的情况下，可能需要进行两阶段转变。

然而，鉴于这`ext4`已经把这个过渡阶段抛在了身后，我不确定是否需要再进行两阶段转变。最好的办法是提出变更请求，看看它是否被开发人员击落:-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T07:00:04.890

我可以想象代码是从 ext3 复制的，其中[ext3_fsblk_t](http://lxr.free-electrons.com/source/fs/ext3/ext3.h#L496)定义为`unsigned long`（32 位）。在这种情况下，paxdiablo 的论点是正确的：

> 该标准（C11，6.5.7 位移位运算符）规定：
> 
> > 如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。
> 
> 因此，如果将 32 位整数向右移动 32 位，则它是未定义的。但是，将其移动 31 位，然后定义另一个位。

对于[ext4_fsblk_t](http://lxr.free-electrons.com/source/fs/ext4/ext4.h#L73)被定义为`unsigned long long`并`long long`反过来[保证为 64 位](http://gcc.gnu.org/onlinedocs/gcc/Long-Long.html)，此代码不再有意义。

# excel - 如何确定哪个图像触发了宏

> ID：14598079
> 
> 赞同：1
> 
> 时间：2013-01-30T06:37:32.303
> 
> 标签：excel, vba

在 excel 中，我可以使用以下对话框将宏分配给图像：

![在此处输入图像描述](../Images/7cb6f8f6b34a2f5ed2ae9f0cf96d9948.png)

这导致代码：

```
Private Sub MyShape_Click()
    ' ...
End Sub 
```

但是，我需要将此宏分配给许多不同的图像。如何确定从单击处理程序中选择了哪个图像，以及如何获取对它的引用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:58:45.270

**更新：**

将相同的宏分配给所有图片并[`Application.Caller`](http://msdn.microsoft.com/en-us/library/office/ff193687.aspx)在宏中使用以确定调用它的图片/形状。在这种情况下（图片/形状）`Application.Caller`将是类型`String`。

```
Private Sub GenericPicture_Click()
    Select Case Application.Caller
        Case "Picture 1"
            'do your work
            MsgBox "You got me"
        Case "Picture 2" 
            'do your work
        ...

    End Select 

    'Lets flip the picture that has been clicked
    With ActiveSheet.Shapes(Application.Caller)
        .Flip msoFlipHorizontal
    End With
End Sub 
```

您还可以使用来自单独宏的参数来实现调用子程序的所需行为，该子程序实现所需的处理逻辑：

```
Sub Picture1_Click()
    DoWork 1
End Sub

Sub Picture2_Click()
    DoWork 2
End Sub

Sub DoWork(ByVal pic As Integer)
    'Implement your logic here
    MsgBox "Hi! I am picture" & pic
End Sub 
```

您分配给图像/形状的宏在哪里`Picture1_Click()`和是。`Picture2_Click()`

# wordpress - 如何从发布的自定义帖子字段中获取最低价格

> ID：14598080
> 
> 赞同：1
> 
> 时间：2013-01-30T06:37:34.330
> 
> 标签：wordpress, custom-fields

这是我的代码（那么我将如何从帖子中获得最低价格）

```
 <div> 
```

它正在从父类别中获取子类别

```
 <?php 
    $subcategories = get_categories('&child_of='.$cat.'&hide_empty');
    foreach ($subcategories as $subcategory) {
    ?> 
```

> * * *

```
 <div class="cat-con">
          <?php
          $subCatId=sprintf('%s',$subcategory->term_id); //the_content(); 
          query_posts('cat='.$subCatId.'&order=ASC&meta_key=price&orderby=meta_value_number'); 
```

这部分代码让我了解自定义字段的价格

```
while ( have_posts() ) : the_post();

      /************************************************************************/

      $price=$post->ID; 
      $price = get_post_meta($price, 'price', true);
      if ($price <= 3500) {
      $minPrice=$price;
      /************************************************************************/
          ?> 
```

> * * *

```
 <div class="cat-img">
     <?php $postID=$post->ID; $image = wp_get_attachment_image_src (get_post_thumbnail_id( $pageID ),'medium', true) ; ?>
     <img width="445" height="209" src="<?php echo $image[0]; ?>" alt="" />
     </div>
                  <div class="clear"></div>
                  <div class="cat-heading">
                      <?php echo sprintf('<a href="%s">%s</a>',get_category_link($subcategory->term_id), apply_filters('get_term', $subcategory->name));?></a>
                  </div>
                  <div class="clear"></div>
                  <div class="cat-con-text">
                      <p><?php the_content(); ?><p>
                  </div>
                  <div class="clear"></div>

                  <div>
                      <div class="floatright">
                          <a href="<?php echo sprintf('%s',get_category_link($subcategory->term_id)); ?>"><img src="<?php bloginfo( 'template_directory' );?>/images/btn-view.png" alt="" /></a>
                      </div>
                      <div class="cat-price">Price Start From &pound;<?php echo $minPrice?></div>
                      <div class="clear"></div>
                  </div>
                      <?php    
              } // end if $price
              endwhile; ?>
        </div>
        <?php } //end foreach; ?>
        <div class="clear"></div>
    </div>
    <!--End Category--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:03:30.883

假设您将`$minPrice`在底部（循环外）回显：

```
while ( have_posts() ) : the_post();

/************************************************************************/

$price=$post->ID; 
$price = get_post_meta($price, 'price', true);

if ( !isset( $minPrice ) || $price < $minPrice )
    $minPrice = $price;

/************************************************************************/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:20:41.060

```
`while ( have_posts() ) : the_post();
$price1 = get_post_meta($post->ID, "price", false);
echo $minPrice = min($price1);
endwhile;
` 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** **** /

```
It is getting me value array
Array ( [0] => 2500 )
Array ( [0] => 3500 ) 
```

# java - Java中反射方法的异常堆栈跟踪

> ID：14598090
> 
> 赞同：0
> 
> 时间：2013-01-30T06:38:14.550
> 
> 标签：java, reflection, stack-trace

我正在通过反射调用一个方法，这会引发异常。

但是，当我通过

```
StackTraceElement[] elements = Thread.currentThread().getStackTrace(); 
```

我没有得到反射方法的整个堆栈跟踪。它只获取堆栈跟踪直到我实现反射的方法。

反射的类完全在一个不同的项目中。

编辑：添加代码片段

**项目A**

```
Class ReflectionImpl {

   public void callMethodsviaReflection{
     try{
              // Reflection code to call the method

         }catch(InvocationTargetException iTE){

           StringBuilder errorLogBuilder = new StringBuilder();
            errorLogBuilder.append(ex.toString());
            errorLogBuilder.append("\n");

            StackTraceElement[] elements = Thread.currentThread().getStackTrace();

             for (int i=0;i<elements.length;i++) {

                 errorLogBuilder.append((elements[i].toString()));
                 errorLogBuilder.append("\n");
             }

            System.out.println(errorLogBuilder.toString());
        }
    }
} 
```

**项目 B** -->**在 Eclipse 中引用项目 A**

```
Class ReflectedClass{

 List<String> nameList = null;

 public void reflectedMethod(){

     nameList.add("Hello");
    }      
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T06:58:56.673

在您打电话的特定地点：

```
StackTraceElement[] elements = Thread.currentThread().getStackTrace(); 
```

您的“反射调用”已经完成，这反映在您从调用中返回的调用堆栈中。听起来更像你想要的：

```
iTE.getCause().getStackTrace(); 
```

这将为您提供调用堆栈***，包括***实际引发异常的方法。

# android - Android 无法初始化 Visualizer 引擎，错误：-4

> ID：14598094
> 
> 赞同：2
> 
> 时间：2013-01-30T06:38:21.957
> 
> 标签：android

我有一个错误：

```
public class VisualizerCapture extends Activity implements Visualizer.OnDataCaptureListener {
private Visualizer mVisualizer = new Visualizer(0); // error is here!!!

@Override
public void onCreate(Bundle savedInstanceState){
 super.onCreate(savedInstanceState);

    setupVisualizer();
} 
```

这是抛出的错误：

```
 java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{bla bla}: java.lang.RuntimeException: Cannot initialize Visualizer engine, error: -4 
```

我的清单：

```
 <uses-permission android:name="android.permission.RECORD_AUDIO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>    
    <uses-permission android:name="android.permission.INTERNET"/> 
```

设置方法：

```
private void setupVisualizer() {
    Visualizer.setEnabled(false);
    Visualizer.setCaptureSize(1);      //test
    Visualizer.setDataCaptureListener(this,250,false,true);
    //Visualizer.setScalingMode(visualizer.SCALING_MODE_AS_PLAYED);
    Visualizer.setEnabled(true);
            Log.v("ABS","setupVisualizer" + Visualizer.getEnabled());    //log

} 
```

为什么我得到这个错误？好像我已经满足了所有权限？

请耐心等待，我是开发新手。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:24:52.337

阅读文档后：

```
public Visualizer (int audioSession)

Added in API level 9
Class constructor.

Parameters
audioSession    system wide unique audio session identifier. If audioSession is not 0, the visualizer will be attached to the MediaPlayer or AudioTrack in the same audio session. Otherwise, the Visualizer will apply to the output mix. 
```

你确定你想要 0 吗？

## 更新

进一步查看错误：

```
public static final int ERROR_BAD_VALUE

Added in API level 9
Operation failed due to bad parameter value.

Constant Value: -4 (0xfffffffc) 
```

那是您遇到的错误，很可能您在 Visualizer 的配置中有问题，请仔细检查 setupVisualizer 方法中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T20:54:17.807

您无法让 Visualizer 在所有平台上运行。它是 Android 中测试最少的对象之一，恕我直言不应该发布。您绝对需要在任何地方捕获异常。

Visualizer 很可能是您将使用的最复杂且未记录的类之一。它具有 DSP 和 FFT 的怪异特性以及神秘的错误处理。

例如。在使用 Visualizer 时，您还应该始终实例化均衡器，以绕过音量控制。

你永远不应该在类的声明部分实例化对象依赖。这使得捕获异常变得困难，也使得依赖注入变得困难。

您应该在类的构造函数或 init 方法中实例化对象，以便您可以捕获异常并支持测试模拟以进行依赖注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T03:32:17.550

在清单文件中添加权限

```
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/> 
```

如果添加然后检查，

> 转到此应用的 AppInfo；导航到权限；确保已授予此应用请求的所有权限。

# python - Python 中的线程和多处理 os 模块

> ID：14598095
> 
> 赞同：2
> 
> 时间：2013-01-30T06:38:24.787
> 
> 标签：python, multithreading, parallel-processing, operating-system, multiprocessing

我正在尝试创建多个文件，这些文件将使用独立程序进行分析，作为用 python 编写的高吞吐量分析的一部分。

```
for foo in X:
    write foo_file
    os.system(run_program foo_file) 
```

对于 15,000 个不同的单个文件，如果我可以在多个内核上运行它们，这将运行得更快，但我不想淹没我的服务器。如何设置多个线程以在 os 中运行，但同时设置最大线程数？我不担心生成过程的速度，因为运行时是由我所在领域的外部程序标准定义的。

我查看了有关线程和多处理的文档并不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:19:37.400

限制产生的进程总数的一种简单方法是使用[多处理池](http://docs.python.org/2/library/multiprocessing.html)。

演示多处理池的简单示例是：

**测试.py**

```
from multiprocessing.pool import Pool
# @NOTE: The two imports below are for demo purposes and won't be necessary in
# your final program
import random
import time

def writeOut(index):
    """ A function which prints a start message, delays for a random interval and then
        prints a finish message
    """
    delay = random.randint(1,5)                                                                                                                                             
    print("Starting process #{0}".format(index))
    time.sleep(delay)
    print("Finished process #{0} which delayed for {1}s.".format(index, delay))

# Create a process pool with a maximum of 10 worker processes
pool = Pool(processes=10)
# Map our function to a data set - number 1 through 20
pool.map(writeOut, range(20)) 
```

这应该会给你一个类似的输出：

```
[mike@tester ~]$ python test.py 
Starting process #0
Starting process #2
Starting process #3
Starting process #1
Starting process #4
Starting process #5
Starting process #6
Starting process #7
Starting process #8
Starting process #9
Finished process #2 which delayed for 1s.
Starting process #10
Finished process #7 which delayed for 1s.
Finished process #6 which delayed for 1s.
Starting process #11
Starting process #12
Finished process #9 which delayed for 2s.
Finished process #12 which delayed for 1s.
Starting process #13
Starting process #14
Finished process #1 which delayed for 3s.
Finished process #5 which delayed for 3s.
Starting process #15
Starting process #16
Finished process #8 which delayed for 3s.
Starting process #17
Finished process #4 which delayed for 4s.
Starting process #18
Finished process #10 which delayed for 3s.
Finished process #13 which delayed for 2s.
Starting process #19
Finished process #0 which delayed for 5s.
Finished process #3 which delayed for 5s.
Finished process #11 which delayed for 4s.
Finished process #15 which delayed for 2s.
Finished process #16 which delayed for 2s.
Finished process #18 which delayed for 2s.
Finished process #14 which delayed for 4s.
Finished process #17 which delayed for 5s.
Finished process #19 which delayed for 5s. 
```

如您所见，前十个进程启动，然后每个后续进程仅在另一个进程池工作程序完成（变得可用）后才开始。使用多个进程（而不是多个线程）绕过了[全局解释器锁 (GIL)](http://wiki.python.org/moin/GlobalInterpreterLock)。

要使此示例代码与您的任务一起使用，您需要编写一个文件输出函数并将其传递给要写入的文件数据的可迭代对象，以`pool.map()`代替`writeOut`and `range(20)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T06:58:31.250

尝试这个：

```
class ThreadWriteFile(threading.Thread):
    def __init__(self, queue_to_write, queue_to_run):
        threading.Thread.__init__(self)
        self.queue_to_write = queue_to_write
        self.queue_to_run = queue_to_run

    def run(self):
        while True:
            foo_file = self.queue_to_write.get()
            write foo_file
            self.queue_to_run.put(foo_file)
            self.queue_to_write.task_done()

class ThreadRunProgram(threading.Thread):
    def __init__(self, queue_to_run):
        threading.Thread.__init__(self)
        self.queue_to_run = queue_to_run

    def run(self):
        while True:
            foo_file = self.queue_to_run.get()
            os.system(run_program foo_file)
            self.queue_to_run.task_done()

queue_to_write = Queue.Queue()
queue_to_run = Queue.Queue()

for foo in X:
    twf = ThreadWriteFile(queue_to_write, queue_to_run)
    twf.daemon = True
    twf.start()
    queue_to_write.put(foo)

    trf = ThreadRunProgram(queue_to_run)
    trf.daemon = True
    trf.start()

queue_to_write.join()
queue_to_run.join() 
```

# javascript - 结束日期大于开始日期的 Java 脚本

> ID：14598098
> 
> 赞同：-3
> 
> 时间：2013-01-30T06:38:32.023
> 
> 标签：javascript, validation, date

我需要一个 java 脚本来验证**end_date**大于**start_date**。我找到了 jquery 来完成这个过程。由于它禁用了所选开始日期之前的所有日期，我的老板告诉它不应该被使用，因为客户会以相同的方式询问所有以前的页面。因此，如果这是一个重复的问题，请通过提供任何工作示例或将我重定向到正确的链接来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T06:01:56.157

```
 $('#btnsave').click(function () {
            var startDate = new Date($('#Sdate').val());
            var endDate = new Date($('#Edate').val());

            if (startDate > endDate) {
                alert("Start date is before end date!");
                return false;
            }
            return true;
        });
```

# javascript - 对象标记上的鼠标滚轮事件

> ID：14598129
> 
> 赞同：3
> 
> 时间：2013-01-30T06:41:38.393
> 
> 标签：javascript, html, svg, mouseevent, mousewheel

我正在使用对象标签将 svg 图像嵌入到一些 html 中。我注意到当我有一个鼠标滚轮事件并且光标在这些对象标签之一上时，该事件不会被触发。当事件附加到对象标签父元素（或直接附加到主体等）时会发生这种情况，并且出于测试目的，我还尝试将鼠标滚轮事件直接附加到对象（不是滚动实际标签，而只是返回一个用于测试的控制台日志）它也不起作用。

显然对象标签以某种方式杀死页面事件并且不冒泡事件！？！

有没有解决的办法？如果光标落在对象标签上，当鼠标滚轮滚动突然停止时，它确实会扼杀页面的可用性。

我正在使用 Firefox，并且没有在其他浏览器中测试过。尽管如此，我还是需要支持 Firefox。

**更新：** 这个错误可能只影响 Linux 中的 Firefox。一小部分，这很好，但仍然包括我在内，因此需要解决方法。如果我将 svg 嵌入到 img 标签中，它可以正常工作，但是这会阻止 ie < ie9 的默认回退到 png，因此它并不是一个很好的解决方案。

# twitter-bootstrap - 如何在 twitter bootstrap 中创建只读表单布局

> ID：14598133
> 
> 赞同：13
> 
> 时间：2013-01-30T06:42:06.957
> 
> 标签：twitter-bootstrap

假设您在使用 twitter bootstrap 时有查看信息（不是编辑信息）。显示数据的最佳方式是什么？

这实际上是作为一个问题提出的：[https](https://github.com/twitter/bootstrap/issues/4094) ://github.com/twitter/bootstrap/issues/4094 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-03T13:48:31.347

### 引导程序 3

BS3 有一个**静态**场的概念。您可以在同一个表单上混合和匹配静态字段和输入字段。或者将所有静态字段用于只读表单。

[http://getbootstrap.com/css/#forms-controls-static](http://getbootstrap.com/css/#forms-controls-static)

`input`您可以将`p`标签与这个特殊的引导类一起使用，而不是普通元素：

```
<p class="form-control-static">email@example.com</p> 
```

### 引导程序 4：

您可以在标签上使用`form-control-plaintext`该类。`input`

请参阅[https://getbootstrap.com/docs/4.0/components/forms/#readonly-plain-text](https://getbootstrap.com/docs/4.0/components/forms/#readonly-plain-text)

### 助推器 5：

[表单控制明文](https://getbootstrap.com/docs/5.0/forms/form-control/#readonly-plain-text)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T06:43:47.970

我同意 MDO 在 github 上的回答。

这是上面展示的示例，它显示了如何使用 codepen 执行此操作。您可以尝试样式。很酷的工具。

这也显示了如何链接到 codepen 中的引导样式表。

[http://cdpn.io/gFecv](http://cdpn.io/gFecv)

# javascript - 在 Div 中动态分配链接

> ID：14598139
> 
> 赞同：0
> 
> 时间：2013-01-30T06:42:30.623
> 
> 标签：javascript, jquery

我们有一种方法可以选择一个 div 并为其分配一个文本，如下所示。

```
$(#divID).text("some text to show"). 
```

我想在要在 div 中显示的文本中动态放置一个超链接。我的意思是链接的 URL 将从方法传递。无论如何要做。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T06:44:27.723

试试这样：

```
$('#divID').html("<a href='www.go.com/mypage.php'>some text to show</a>"). 
```

或附加到现有内容

```
$('#divID').append("<a href='www.go.com/mypage.php'>some text to show</a>"). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:02:49.053

您可以将链接作为 html 附加到 div 中，如下所示

```
$("#divId").html("<a href='url'>hyperlink</a>") 
```

它应该适用于所有浏览器。

# android - 添加原生语言android

> ID：14598143
> 
> 赞同：1
> 
> 时间：2013-01-30T06:42:56.640
> 
> 标签：android, fonts, fontconfig

我需要向android添加本地语言渲染（不是字体。我的语言，僧伽罗语，使用复杂的脚本）支持。有没有机会使用`fontconfig`为arm编译的来做到这一点？

# .net - HTTP POST 请求在一定数量的请求后失败 - 重新启动应用程序池可以修复一段时间

> ID：14598144
> 
> 赞同：0
> 
> 时间：2013-01-30T06:43:07.800
> 
> 标签：.net, c#-4.0, post, iis-7

我有一个 ASHX 处理程序向我的一个单独网站发出 POST 请求。对于前 200 个请求，一切正常。之后，对该 URL 的所有请求都会收到错误“(500) Internal Server Error”。

如果我重新启动接收网站的应用程序池，它可以处理另外 200 个左右的请求。

我关闭了快速故障保护和应用程序池中 CPU 操作的限制。

关于可能导致此问题的原因或如何进一步调试的任何想法？我没有在 IIS 日志中看到任何关于该错误的提及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:18:37.033

我不是 100% 的问题是什么，但我找到了解决办法。

在接收 POST 请求的最后，而不是仅仅触发我使用 ThreadPool.QueueUserWorkItem() 将其排队的方法。没有更多的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:05:30.130

通常这是`ProcessRequest`. 可以肯定的是，尝试将方法体包装进去`try..catch`并在某处记录异常。

# node.js - 这种 node.js 异常处理方法的最佳实践？

> ID：14598145
> 
> 赞同：1
> 
> 时间：2013-01-30T06:43:09.373
> 
> 标签：node.js, exception-handling

我有这种模式的代码 - 我需要在 fn() 成功或 fn() 执行中出现异常时调用 next() 。

```
try {
    fn.call(obj, a, b, c, function(error, next) {
           ...
           next();
    });
} catch (ex) {
    // log. 
    next();  // This is under question.
} 
```

异常不仅可以发生在 fn 中，还可以发生在 next() 中的任何地方。我不应该从 catch 中调用 next() ，因为如果异常来自执行 next 期间的某个地方，我不会这样做。

那么你们推荐这种模式的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:32:05.050

首先，我建议您看一下[try...catch 块描述](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)（不要介意它是针对浏览器 JS 的）。在您的情况下，是否可以将`next()`函数放在 finally 块中？是的，我建议把它放在那里，然后把整个`try...catch`街区放在另一个`try...catch`街区里。

在最终确定中仍然抛出异常不是一个好习惯。你确定你`try...catch`在正确的地方使用吗？也许最好在内部进行`fn`（或在函数内部处理 wxception `error`）？

# google-app-engine - 使用批量加载程序的未索引属性

> ID：14598156
> 
> 赞同：1
> 
> 时间：2013-01-30T06:43:51.497
> 
> 标签：google-app-engine

我正在使用 python bulk loader 将 csv 文件加载到 appengine，我看到所有属性都被自动索引。

如何让某些属性未编入索引？

PD：我正在使用新配置：

> appcfg.py upload_data --config_file=bulkloader.yaml --filename=xxx.csv --kind=MyEntity --url= [http://xxx.appspot.com/remote_api](http://xxx.appspot.com/remote_api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:06:32.863

你可以使用这样的东西：http: [//alex.cloudware.it/2012/08/unindexed-entity-properties-with-bulk.html](http://alex.cloudware.it/2012/08/unindexed-entity-properties-with-bulk.html)

# javascript - Javascript 添加更多按钮运行时

> ID：14598160
> 
> 赞同：-2
> 
> 时间：2013-01-30T06:43:58.853
> 
> 标签：javascript, html, forms

我正在尝试使用 Javascript 添加动态文本框。

当有人单击`Add More`链接时，将动态添加 2 个文本框。

`Add More`我有当有人点击链接时我想重复的 HTML 代码。

```
<div class="row">
    <div class="left">Employer</div>
    <div class="right"><input type="text" class="tripObject" name="employer" id="employer" value=""> &nbsp; <strong>Position</strong> &nbsp; <input type="text" class="tripObject" name="position" id="position" value=""> &nbsp; <a href="javascript:addFormField();">Add More</a>
    </div>  
</div> 
```

`JavaScript`代码是：

```
window.optionId =1;

window.addFormField = function() {
    optionId += 1;
    var thisOption = $('<div>', {
        'class': 'row ' + optionId
    }).append(
        $('<div>').attr({
            'class': 'left'
        }).html('Employer'), 
        /*$('<div>').attr({
            'class': 'right'}),*/
        $('<input>').attr({
            'type': 'text',
            'size': 20,
            'name': 'option_' + optionId,
            'class': 'tripObject',
            'validate': 'required:true'
        }), 
        $('<a>').attr({
            'href': '#'
        }).html('Remove').click(function() {
            thisOption.remove();
        })
    ).appendTo('#editeducationInfo');
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:47:06.877

你为什么要把它复杂化？正如您在代码中使用的那样，这是通过and方法`jquery`附加现有元素的简单方法。`clone``append`

**文档：** [$.append()](http://api.jquery.com/append/)，[$.clone()](http://api.jquery.com/clone/)

```
var obj =  $("div.right").eq(0).clone(); //this will clone the html elements
$("div.row").append(obj); //this will append to the existing elements 
```

**更新：**

检查这个[小提琴](http://jsfiddle.net/JV8eU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:02:29.497

唐的回答是正确的。但除此之外，您还需要更改 ID 和 NAME 属性。否则，如果所有元素都具有相同的名称，则从表单提交中检索数据将产生问题。

# jquery - Meteor：从 NodeJs 到 php 制作 jQuery ajax 帖子

> ID：14598162
> 
> 赞同：1
> 
> 时间：2013-01-30T06:44:04.487
> 
> 标签：jquery, node.js, meteor

我正在使用[这个](https://github.com/crazytoad/meteor-collectionapi/blob/master/collectionapi.js)API 在我的流星应用程序中执行 CRUD 数据库操作。到目前为止，每一个操作都执行得很好。

现在考虑一个发生错误的用例（例如，一些验证错误，如无效参数）然后我想通过**jQuery ajax 调用**将错误对象发送到 php 脚本。

所以问题是：如何将对象从 NodeJs 脚本发布到 php？

我尝试通过添加 Meteor 的默认 jquery 包`meteor add jquery`。然后做了这样的事情：

```
var $ = require('jquery');
....
....
 function test(data){
   console.log('test'+JSON.stringify(data));
     $.post({
        type: 'POST',
        url: 'http://vibsy.com/test/chest.php',
        data: data,
        success: function(data) {
          console.log(data);
        } 
     });
  } 
```

但这显示了错误：

```
ReferenceError: require is not defined
    at app\server\collectionapi.js:1:10 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:52:26.103

Jquery 从客户端运行良好，我不太确定它是否会在服务器端运行。如果您执行了`meteor add jquery`，则不必使用`require`. Meteor 将自动引用准备使用的正确 js 文件。删除下面的行（仅限客户端），应该很好

```
var $ = require('jquery'); 
```

如果您的脚本在服务器上运行，它看起来就是这样。最好使用[Meteor.http](http://docs.meteor.com/#meteor_http)。运行`meteor add http`并使用类似的东西：

```
Meteor.http.call("POST", "http://vibsy.com/test/chest.php",{params: data}, function (error, result) {
    if (result.statusCode === 200) {
        console.log(result);
    }
 }); 
```

或更舒适（同步）：

```
var result = Meteor.http.call("POST", "http://vibsy.com/test/chest.php",{params: data});
if (result.statusCode === 200) {
    console.log(result.data); //JSON content
    console.log(result.content); //raw content
} 
```

# xml - 如何在 WCF 中将第三方服务的 XML 响应转换为 JSON？

> ID：14598163
> 
> 赞同：2
> 
> 时间：2013-01-30T06:44:04.950
> 
> 标签：xml, json, wcf, web-services

我正在使用 JSON.NET 将第三方服务响应 (XML) 转换为 JSON 格式。

到目前为止我尝试过的代码，

```
 IEnumerable<XElement> xe;
        IEnumerable<XElement> xe1;
        List<XElement> ele = new List<XElement>();

 using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
        {

          XNamespace ns = "http://www.opentravel.org/OTA/2003/05";
          XDocument xd = XDocument.Load(response.GetResponseStream());

           xe = xd.Root.Descendants(ns + "PricedItineraries").ToList();
            ele = new List<XElement>();

            foreach (XElement b in xe)
            {
                ele.Add(b);
            } 
```

}

在上面的代码中，如何将 ele 转换为 JSON 格式？我已经使用以下方式将 XMLdocument 转换为 JSON，

```
 Newtonsoft.Json.JsonConvert.SerializeXmlNode(xdoc); 
```

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:48:45.510

利用

```
JsonConvert.SerializeObject(ele, Newtonsoft.Json.Formatting.Indented);) 
```

# opengl-es - Uniform Struct 中的 OpenGL ES 2.0 GLSL Mat4 不起作用？

> ID：14598168
> 
> 赞同：0
> 
> 时间：2013-01-30T06:44:56.197
> 
> 标签：opengl-es, struct, glsl, uniform

我正在为 Android 2.3+ 构建本机活动应用程序。三星 Galaxy S3 OpenGL ES 2.0 GLSL 着色器似乎没有正确使用我的 mat4 统一结构变量！一个 GLSL 示例：

```
struct SceneStruct {
  mat4 modelViewProjectionMatrix;
};

uniform SceneStruct scene; 
```

这确实适用于我的桌面 Linux 版本，但在 Adreno 中为 Android (ARMEABI-V7A) 编译时，它不起作用。但是，如果我将它展平（将其放在结构之外），它就可以工作。

```
uniform mat4 scene_modelViewProjectionMatrix; 
```

有什么想法吗？

编辑：不起作用，如没有错误，但着色器不使用它们（例如 modelViewProjectionMatrix）

# html - 如何更改 html5 输入 type="date" 的默认日期格式

> ID：14598170
> 
> 赞同：2
> 
> 时间：2013-01-30T06:45:07.470
> 
> 标签：html, date-format

我们在 HTML5 中有默认日期类型。它有一些默认的日期格式，如 mm/dd/yy。（例如 88 年 5 月 21 日）。我想根据我的要求动态更改此日期格式。有什么选择吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:53:20.290

您可以在日期字段之前有一个隐藏字段，并在运行 javascript 调用的日期字段上创建一个 onchange 事件，它将日期格式转换为您的首选格式并将其存储到隐藏字段中。

您使用来自这些[javascript 库](http://www.codeanddesign-studio.com/2011/03/02/40-free-date-and-time-pickers/)之一的日期选择器。这些库中的大多数都有可能更改日期格式。

# hadoop - Oozie 服务器未从 hadoop 0.23.0 开始

> ID：14598181
> 
> 赞同：0
> 
> 时间：2013-01-30T06:45:45.310
> 
> 标签：hadoop, oozie

我正在尝试在 hadoop 0.23.0 上运行 apache oozie 版本 3.2.0，当我执行 bin/oozie-run.sh 时，会显示以下错误。

```
ERROR: Oozie could not be started

REASON: java.lang.NoClassDefFoundError: org/apache/hadoop/util/ReflectionUtils

Stacktrace:
-----------------------------------------------------------------
java.lang.NoClassDefFoundError: org/apache/hadoop/util/ReflectionUtils
    at org.apache.oozie.service.Services.setServiceInternal(Services.java:349)
    at org.apache.oozie.service.Services.<init>(Services.java:107)
    at org.apache.oozie.servlet.ServicesLoader.contextInitialized(ServicesLoader.java:38)
    ......

Caused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.ReflectionUtils
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    ... 27 more
----------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T08:52:33.353

这是因为您没有包含所需的 hadoop 库。将 hadoop 库放入 libext 文件夹并启动 oozie。

# ruby - 在 ruby 中运行脚本时等待击键

> ID：14598183
> 
> 赞同：1
> 
> 时间：2013-01-30T06:45:48.230
> 
> 标签：ruby

有没有办法运行 ruby​​ 脚本并在脚本中执行命令时仍然响应击键？

我想运行一个 ruby​​ 脚本，但能够按“空格”并暂停脚本（在当前运行的命令执行后），然后再次按“空格”并恢复脚本。

我唯一的想法（我确定这是一个奇怪的想法），是打开一个新线程并在那里等待击键，然后当我得到击键时，设置一个 stop_flag。只是现在看起来我需要在每个命令之后检查这个标志才能知道何时停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:14:31.940

如果您设置了一个记录器，并在整个脚本中散布了适当的代码，则可以使用信号随意打开和关闭调试输出：

```
 pid = fork do

  # set up a logger
  require 'logger'
  log = Logger.new(STDOUT)
  log.level = Logger::INFO

  # toggle between INFO and DEBUG log levels on SIGUSR1
  trap(:SIGUSR1) do
    if log.level == Logger::DEBUG
      log.level = Logger::INFO
    else
      log.level = Logger::DEBUG
    end
  end

  # Main loop - increment a counter and occasionally print progress
  # as INFO level.  DEBUG level prints progress at every iteration.
  counter = 0
  loop do
    counter += 1
    exit if counter > 100
    log.debug "Counter is #{counter}"
    log.info "Counter is #{counter}" if counter % 10 == 0
    sleep 0.1
  end

end

# This makes sure that the signal sender process exits when the
# child process exits - only needed here to make the example
# terminate nicely.
trap(:SIGCLD) do
  exit(0) if Process.wait(-1, Process::WNOHANG) == pid
end

# This is an example of sending a signal to another process.
# Any process may signal another by pid.
# This example uses a forking parent-child model because this
# approach conveniently yields the child pid to the parent.
loop do
  puts "Press ENTER to send SIGUSR1 to child"
  STDIN.gets
  Process.kill :SIGUSR1, pid
end 
```

分叉和 SIGCLD 陷阱是为了使示例适合一个文件；任何进程都可以向另一个进程发送信号。

fork 块内的代码是您的脚本。该脚本设置了一个默认日志级别为 INFO 的记录器，以及一个用于在 DEBUG 和 INFO 级别之间切换记录器的 SIGUSR1 信号的处理程序。

fork 块之外的东西只是向另一个进程发送信号的一个例子。按 ENTER 将发送信号并更改其他进程的日志记录级别。

这适用于 POSIX 系统，我不知道 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:47:18.377

与@Catnapper 类似的想法，我想我会分享它，尽管他打败了我。

```
require 'io/console' # Ruby 1.9

# Wait for the spacebar key to be pressed
def wait_for_spacebar
   sleep 1 while $stdin.getch != " "
end

# Fork a process that waits for the spacebar 
# to be pressed. When pressed, send a signal 
# to the main process.
def fork_new_waiter
   Process.fork do
      wait_for_spacebar
      Process.kill("USR1", Process.ppid)
   end
end

# Wait for a signal from the forked process
Signal.trap("USR1") do
   wait_for_spacebar

   # Debug code here

   fork_new_waiter
end

# Traps SIGINT so the program terminates nicely
Signal.trap("INT") do
   exit
end

fork_new_waiter

# Run program here in place of this loop
i = 0
loop do
   print i+=1
   sleep 1
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-10T20:09:51.030

您可以使用系统命令。

在 Windows 中使用：system "pause>null"

这对于每个操作系统都会有所不同。因此，您可以设置一个变量来检查操作系统。然后使用适当的命令。如果您想查看操作系统是否为 Windows，您的代码将如下所示：

如果 RUBY_PLATFORM =~ /mswin|msys|mingw|cygwin|bccwin|wince|emc/ $operatingSystem="win" end

# mysql - Mysql 5.1中的Mysql错误1064-无法成功执行

> ID：14598189
> 
> 赞同：1
> 
> 时间：2013-01-30T06:46:16.240
> 
> 标签：mysql, triggers

我正在尝试在 Mysql (5.1) 中编写触发器，但出现以下错误，请帮助。

错误是：

> SQL 错误 (1064)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法。

编写触发器的目的：

我正在编写分配用户的应用程序，并且我想将未分配`usercount`的字段存储`cluster_count`在`IX_branchdetails`表中。更新基表后。

扳机：

```
DELIMITER $$
CREATE  TRIGGER upd_trg AFTER
UPDATE ON DBNAME.BASETABLE
FOR EACH ROW 
BEGIN
DECLARE m_branchcode INTEGER;
DECLARE cnt INTEGER;
DECLARE cursor_branch CURSOR FOR
SELECT DISTINCT branchcode
FROM ix_branchdetails;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
open cursor_branch;
my_loop: loop
set done = false;
fetch cursor_branch into m_branchcode;
if done then
leave my_loop;
end if;
select count(1) into cnt from (select count(1) from BASETABLE  Where IX_BRANCHCODE = m_branchcode) as temp;
update DBANAME.ix_branchdetails set DBANAME.ix_branchdetails.cluster_count = cnt where  DBANAME.ix_branchdetails.BRANCHCODE = m_branchcode;
end loop my_loop;
close cursor_branch;
END $$ 
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:55:10.010

我没有看到`done`变量的声明：

```
DECLARE done TINYINT DEFAULT FALSE; 
```

分号 (;) 是 MySQL 语句的默认分隔符。要定义过程/函数/触发器，我们通常会看到语句分隔符更改为未出现在语句中的字符串：

```
DELIMITER $$

CREATE PROCEDURE ...

END$$

DELIMITER ; 
```

如果分隔符没有从分号更改，那么当 MySQL 在您的过程/函数/触发器中遇到第一个分号时，它会将其视为语句的结尾，这不是您想要的。您希望 MySQL 将整个代码块视为单个语句。

# actionscript-3 - 连接 ToggleButtonBar、combobox 和 datagrid

> ID：14598190
> 
> 赞同：0
> 
> 时间：2013-01-30T06:46:20.747
> 
> 标签：actionscript-3, datagrid, combobox, flash-builder, togglebutton

我想将这三个连接在一起。当您从切换按钮栏中选择时，它将显示在组合框中，您可以从那里选择将在数据网格中显示的其他数据。

现在我连接了前两个：

```
private function toggle(event:ItemClickEvent):void{

                list2.selectedIndex=-1; // reset so prompt shows
                if (togglebtn.selectedIndex==0)
                list2.dataProvider=elecItems;
                else if(togglebtn.selectedIndex==1)
                list2.dataProvider=toyItems;

            }

<mx:ToggleButtonBar id="togglebtn" x="9" y="29" color="0x323232" dataProvider="{dp}" horizontalGap="4" itemClick="toggle(event)"/>

<s:ComboBox id="list2" x="159" y="28" width="549" itemClick="select_item(event)"/> 
```

现在我想将组合框与数据网格连接起来，但是当我使用时：

```
if (list2.selectedIndex==0)
info_dg.dataProvider={info}; 
```

它指向两个索引....反正我自己也不太明白，希望能得到一些帮助。

除了使用 SelectedIndex==0 之外，我还可以使用 ID 代替吗？

数据结构：ToggleButtonBar

```
[Bindable]public var dp:ArrayCollection = new ArrayCollection([
            {label:"商品", data:399}, 
            {label:"顧客", data:599}]); 
```

组合框

```
[Bindable]public var elecItems:ArrayCollection = new ArrayCollection([
                {label:"text", data:299}, 
                {label:"tttナビ", data:999}, 
                {label:"大学院ttt", data:999}, 
                {label:"ttt", data:999}, 
                {label:"ttt制作", data:899},
                {label:"tttt", data:899}]);

            [Bindable]public var toyItems:ArrayCollection = new ArrayCollection([
                {label:"text", data:120}, 
                {label:"text", data:50}, 
                {label:"text", data:50},
                {label:"(株)text", data:30} ]); 
```

数据网格 XML 文件：

```
<fx:XMLList id="Info">
            <employee>
                <name>eeee／完了&lt;/name>
                <phone>eee</phone>
                <email>eee制作</email>
                <active>300,000</active>
                <image>eeee</image>
            </employee>
            <employee>
                <name>rrr／完了&lt;/name>
                <phone>rrr</phone>
                <email>rrr設営</email>
                <active>1,900,000</active>
                <image>rrrしないように</image>
            </employee>
        </fx:XMLList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:29:58.690

我有这样的结构来保存有关员工的信息

```
<fx:XMLList id="info">
        <toggle>
            <group>
                <employee>
                    <name>ei1_name1</name>
                    <phone>phone1</phone>
                </employee>
                <employee>
                    <name>ei1_name2</name>
                    <phone>phone2</phone>
                </employee>
            </group>
            <group>
                <employee>
                    <name>ei2_name1</name>
                    <phone>phone1</phone>
                </employee>
                <employee>
                    <name>ei2_name2</name>
                    <phone>phone2</phone>
                </employee>
            </group>
        </toggle>

        <toggle>
            <group>
                <employee>
                    <name>ti1_name1</name>
                    <phone>phone1</phone>
                </employee>
                <employee>
                    <name>ti1_name2</name>
                    <phone>phone2</phone>
                </employee>
            </group>
            <group>
                <employee>
                    <name>ti2_name1</name>
                    <phone>phone1</phone>
                </employee>
                <employee>
                    <name>ti2_name2</name>
                    <phone>phone2</phone>
                </employee>
            </group>
        </toggle>

    </fx:XMLList> 
```

有两个切换块可以区分“toy”和“elec”。每个块都有许多“组”项 - 每个对应于 CheckBox 中的相应项。

如果没问题，那么你不应该使用任何“if else”。取而代之的是，您的功能看起来像

```
 private function onCbChanged(evt:IndexChangeEvent):void
        {
            info_dg.dataProvider = info[togglebtn.selectedIndex].group[list2.selectedIndex].employee;
        } 
```

“togglebtn.selectedIndex”选择一个切换块，“list2.selectedIndex”选择一组切换。

# android - 单击按钮时如何更新列表视图？

> ID：14598197
> 
> 赞同：4
> 
> 时间：2013-01-30T06:46:56.560
> 
> 标签：android, button, android-listview

```
 public class MainActivity extends Activity {
    ListView list;
    String[] abc={"1","2","3"};
    MyCustomAdapter adapter;
    Button refresh;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            list=(ListView) findViewById(R.id.list);
             refresh=(Button) findViewById(R.id.refresh);
             adapter=new MyCustomAdapter(MainActivity.this,abc);
            list.setAdapter(adapter);

        }
         private class MyCustomAdapter extends BaseAdapter {
                private final Context context;
                private ArrayList mData = new ArrayList();
                private LayoutInflater mInflater;
                private String[] hashmap;
                ViewHolder holder = null;
                public MyCustomAdapter(Context context,String[] hashMaps) {
                    super();
                    this.context = context;
                    this.hashmap = hashMaps;
                    mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                }
                public int getCount() {

                    return hashmap.length;

                }

                public Object getItem(int position) {
                    return hashmap.length;
                }

                public long getItemId(int position) {

                    return position;
                }

                @Override
                public void notifyDataSetChanged() // Create this function in your adapter class
                {
                    super.notifyDataSetChanged();
                }
                @Override
                public View getView(final int position, View convertView, ViewGroup parent) {
                    System.out.println("getView " + position + " " + convertView);
                   // final ViewHolder holder = null;
                    if (convertView == null) {
                        convertView = mInflater.inflate(R.layout.view1, null);
                        holder = new ViewHolder();
                        holder.textView = (TextView)convertView.findViewById(R.id.text);
                        holder.btn = (Button)convertView.findViewById(R.id.refresh);
                        convertView.setTag(holder);
                    } else {
                        holder = (ViewHolder)convertView.getTag();
                    }
                    holder.textView.setText(hashmap[position]);

                    holder.btn.setOnClickListener(new OnClickListener(){  
                           @Override
                          public void onClick(View v) {
                             RelativeLayout rl = (RelativeLayout)v.getParent();
                            holder.textView = (TextView)rl.getChildAt(position);
                            Log.i("position",String.valueOf(position));
                            holder.textView.setText("10");
                           }
                         });

                    return convertView;

                }

            }

            public static class ViewHolder {
                public TextView textView;
                public Button btn;
            }

    } 
```

**视图.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   android:id="@+id/real"
    >
    <TextView 
                android:id="@+id/text"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:text="Text"
                android:layout_marginTop="15dp"
                android:layout_marginLeft="20dp"
                />
    <Button 
                android:id="@+id/refresh"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/text"
                android:text="button"
                 android:layout_marginLeft="20dp"
                />
    </RelativeLayout> 
```

在我的 ListView 中，当我单击按钮时，适配器视图中的值没有改变。如何解决这个问题？该列表包含每个位置的 3 个值。所以当我单击单击位置的按钮时，该值将更改而不是旧值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T06:59:55.927

试试这个 ：

```
holder.btn.setTag(convertView);

holder.btn.setOnClickListener(new OnClickListener(){  

                       @Override
                      public void onClick(View v) {
                          View tempView = v.getTag();
            TextView tv = (TextView)tempView.findViewById(R.id.text);
            tv.setText("your string");  
                       }
                     }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:32:57.410

更改 getView 方法代码如下。

```
@Override
        public View getView(final int position, View convertView,ViewGroup parent) {
            View vi = convertView;
            final TextView textView;
            if (convertView == null)
                inflater = (LayoutInflater)    context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vi = inflater.inflate(R.layout.vi, null);

            textView = (TextView) vi.findViewById(R.id.text);
            Button btn = (Button) vi.findViewById(R.id.refresh);
            textView.setText(hashmap[position]);
            btn.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Log.i("position  ", position + "");
                    textView.setText("10");
                }
            });

            return vi;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:53:30.387

叫这个

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, your_new_value)); 
```

有关更多信息，请尝试此[链接](http://www.androidhive.info/2012/03/android-listview-with-load-more-button/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T06:54:27.093

您应该使用 notifyDataSetChanged () 方法来刷新您的列表视图...

在适配器上调用 notifyDataSetChanged()

> ```
>  refresh.setOnClickListener(new OnClickListener() {
>             @Override
>             public void onClick(View p_v) {
>                 // TODO Auto-generated method stub
>                 adapter.notifyDataSetChanged();
>             }
>         }); 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T06:55:34.240

对于更新值列表视图，您可以使用`adapter.notifyDataSetChanged()`这将刷新您的列表适配器。但是在更改数据源中的值后调用它。

# excel - 为具有特定值的两个单元格之间的空单元格着色

> ID：14598198
> 
> 赞同：0
> 
> 时间：2013-01-30T06:46:59.740
> 
> 标签：excel

例如：连续(A1:Z1) 我有A1=1, D1=1, and F1=2, K1=2, and O1=3, U1=3

我想要一种条件格式，它将根据单元格范围 A 到 D、然后从 F 到 K、最后从 O 到 U 的值对空单元格进行着色。

我正在使用以下格式，它适用于值为 1 的单元格，但不适用于 2、3 或任何其他单元格值。

=COUNTIF(A1:Z1,1)=1

我已经尝试用 2 和 3 替换上述公式中的 1，但它不起作用。

有人可以帮我格式化吗？

瓦卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-01T20:09:34.437

链接似乎死了，所以有点猜测要求（例如没有重叠）我建议三个规则（允许每个不同的颜色）用于 A1 中`1`s、`2`s 和`3`s 的“书挡”之间的空白：

```
=AND(A1<>1,A2<>1,COUNTIF(A1:$Z1,1)=1)  
=AND(A1<>2,A2<>2,COUNTIF(A1:$Z1,2)=1)  
=AND(A1<>3,A2<>3,COUNTIF(A1:$Z1,3)=1) 
```

每个都适用于 =$A$1:$Z$1。

# jquery - jquery在不按顺序时会自行取消吗？

> ID：14598199
> 
> 赞同：-2
> 
> 时间：2013-01-30T06:47:04.647
> 
> 标签：jquery

我一直在学习 jquery 并注意到将脚本放在我网站的标题部分时它们会很好用，直到我在第一个脚本之前或之后放置另一个 jquery 脚本（就像它们相互取消一样）我没有具体的代码，因为我在学习它时注意到了这一点，希望我的教程能在某个时候得到它，但这还没有发生。我将列出一个我正在谈论的例子：

下面的例子行不通...

```
<script>

   $(document).ready(function(){
      $(this).doSomething();
   });

   $(function(){
      $(this).doSomethingElse();
   });

</script> 
```

然后我会删除脚本的底部功能，然后重新加载网站，然后第一个脚本最终会再次开始工作。这是我删除底部脚本的时候：

```
 <script>

   $(document).ready(function(){
      $(this).doSomething();
   });

   //bottom script deleted, one above works fine

 </script> 
```

所以，我又是 Jquery 的新手，我想知道如果脚本没有按顺序排列，jquery 是否会取消？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:55:59.807

没有互相取消这样的事情..只知道你做错了什么..！并且知道你应该打开控制台（大多数情况下是f12），看看是否有错误..

你在这里做错的是你使用`this`作为选择器，虽然它不是..这是一个例子，表明如果没有错误，每件事都会顺利运行......

[http://jsfiddle.net/sD8FQ/](http://jsfiddle.net/sD8FQ/)

# wpf - 检查方法是否附加到事件

> ID：14598202
> 
> 赞同：1
> 
> 时间：2013-01-30T06:47:39.453
> 
> 标签：wpf, events

WPF 中有没有办法检查事件是否附加了方法？
我希望能够做类似的事情

```
if (MyEvent != Null)
{
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:20:36.787

由于您正在创建自己的`event`，因此可以检查是否附加了方法。

下面我定义了一个方法`IsMethodAttachedToMyEvent`，它将检查给定`Action`的是否附加`MyEvent`。我已经使用了`GetInvocationList()`方法`MyEvent`来循环附加的方法。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.ComponentModel;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public event Action MyEvent;

        public MainWindow()
        {

            InitializeComponent();

            MyEvent += new Action(MainWindow_MyEvent);

            MessageBox.Show("Is MainWindow_MyEvent attached\n\n" + IsMethodAttachedToMyEvent(new Action(MainWindow_MyEvent) ));
            MessageBox.Show("Is MainWindow_MyEvent_1 attached\n\n" + IsMethodAttachedToMyEvent(new Action(MainWindow_MyEvent_1)));
        }

        public bool IsMethodAttachedToMyEvent(Action methodToCheck)
        {
            if (MyEvent != null)
            {
                foreach (Action act in MyEvent.GetInvocationList())
                {
                    if (act.Method == methodToCheck.Method)
                    {
                        return true;
                    }
                }
            }
            return false;

        }

        void MainWindow_MyEvent()
        {
            throw new NotImplementedException();
        }

        void MainWindow_MyEvent_1()
        {
            throw new NotImplementedException();
        }
    }
} 
```

# c# - wpf中通过两个多线程方法共享一个DataTable对象

> ID：14598205
> 
> 赞同：1
> 
> 时间：2013-01-30T06:47:40.583
> 
> 标签：c#, wpf, multithreading, wpfdatagrid

我在多线程方面不是那么好。但这是我需要做的。

我有一个数据网格。我想要一种方法来仅用前 50 行填充数据网格。同时，我希望一个线程获取接下来的 20 行并更新数据表，以便在显示 50 行时，将接下来的 20 行附加到数据表对象。通过这种方式，我可以处理大量数据而不会让我的数据表变慢。但是我在多线程中坚持使用资源共享（共享数据表对象）。

有下面的代码

```
public partial class InsertAndUpdateData : Window
{
    DataTable dt = new DataTable();

    public object lockOn = new object();

    public InsertAndUpdateData()
    {
        InitializeComponent();
        Thread oThread = new Thread(new ParameterizedThreadStart(FillGrid));
        oThread.Start(dt);
        oThread.Join();

        Thread.Sleep(1000);
        oThread.Abort();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        string name = txtName.Text;
        int salary = Convert.ToInt32(txtSalary.Text);

        using (var context = new NewtonEntities())
        {
            Employee emp = new Employee();
            emp.name = name;
            emp.salary = salary;

            context.AddToEmployees(emp);
            context.SaveChanges();
        }

        FillGridLastRowInserted();
    }

    public void FillGrid(object dtx)
    {
        lock (lockOn)
        {
            dt = (DataTable)dtx;
            var db = new NewtonEntities();
            var dataTable = (from c in db.Employees
                             select new
                             {
                                 c.id,
                                 c.name,
                                 c.salary
                             }).Take(20);

            dt.Columns.Add("id", typeof(int));
            dt.Columns.Add("name", typeof(string));
            dt.Columns.Add("salary", typeof(int));

            foreach (var item in dataTable)
            {
                DataRow dr = dt.NewRow();
                dr["id"] = item.id;
                dr["name"] = item.name;
                dr["salary"] = item.salary;
                dt.Rows.Add(dr);
            }

            myGrid.ItemsSource = dt.DefaultView;
        }
    }

    public void FillGridLastRowInserted()
    {
        var db = new NewtonEntities();
        var dataTable = (from c in db.Employees
                         orderby c.id descending
                         select new
                         {
                             c.id,
                             c.name,
                             c.salary
                         }).First();

        DataRow dr = dt.NewRow();
        dr["id"] = dataTable.id;
        dr["name"] = dataTable.name;
        dr["salary"] = dataTable.salary;
        dt.Rows.Add(dr);

        myGrid.ItemsSource = dt.DefaultView;
    }
} 
```

我在主类中有一个数据表。我希望 dt 对象由两个线程方法共享。

但是每次我遇到以下错误。

![在此处输入图像描述](../Images/66fd29a80d96f263158ef4d217ea80a4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T03:22:25.247

有一个更简单的解决方案。您只需要利用 WPF DataGrid 虚拟化。

使用 Snoop 确保您的网格具有虚拟化功能：[http ://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:04:34.733

如果你想坚持使用多线程。这是另一种方式：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <ListBox x:Name="lst">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

```
public partial class MainWindow : Window
{
    Thread th;
    static ObservableCollection<string> data;

    public MainWindow()
    {
        InitializeComponent();

        data = new ObservableCollection<string>();
        lst.ItemsSource = data;

        th = new Thread(() =>
        {
            while (true)
            {
                Thread.Sleep(500);

                this.Dispatcher.BeginInvoke(new Action(() =>
                { data.Add("zzzzzz"); }));
            }
        });

        th.Start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:06:12.163

您无法更新 Itemsource 的原因是 mygrid 归主线程所有，您无法从单独的线程更新主线程中存在的控件。

您应该从线程返回一个值，然后绑定 - [从线程返回一个值？](https://stackoverflow.com/questions/1314155/returning-a-value-from-thread)

如果您只想做一些后台工作，最好使用 BackgroundWorker [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# oracle - Oracle 隐式转换是否依赖于连接的表或视图

> ID：14598208
> 
> 赞同：3
> 
> 时间：2013-01-30T06:48:02.530
> 
> 标签：oracle, implicit-conversion

我现在遇到了一个奇怪的问题。查询本身很大，所以我不打算在这里发布（我可以发布以防有人需要查看）。现在我有一个表TABLE1，它有一个CHAR(1) 列COL1。此表列作为我的查询的一部分进行查询。当我过滤此列的记录集时，我会说：

```
WHERE TAB1.COL1=1 
```

这样查询运行并返回一个非常大的结果集。我最近更新了其中一个子查询以加快查询速度。但是在此之后，当我写 WHERE TAB1.COL1=1 时它不会返回任何内容，但是如果我将其更改为 WHERE TAB1.COL1='1' 它会给我我需要的记录。注意带引号的 WHERE 子句，不带引号。因此，为了更清楚起见，在更新其中一个子查询之前，我不必加上引号来检查 COL1 值，但在更新后我必须这样做。我不知道 Oracle 的哪些功能？

编辑：我发布查询的 tw 版本以防有人发现它有用

版本 1：

```
SELECT p.ssn,
  pss.pin,
  pd.doc_number,
  p.surname,
  p.name,
  p.patronymic,
  to_number(p.sex, '9') as sex,
  citiz_c.short_name citizenship,
  p.birth_place,
  p.birth_day as birth_date,
  coun_c.short_name as country,
  di.name as leg_city,
  trim( pa.settlement
  || ' '
  || pa.street) AS leg_street,
  pd.issue_date,
  pd.issuing_body,
  irs.irn,
  irs.tpn,
  irs.reg_office,
  to_number(irs.insurer_type, '9') as insurer_type,
  TO_CHAR(sa.REG_CODE)
  ||CONVERT_INT_TO_DOUBLE_LETTER(TO_NUMBER(SUBSTR(TO_CHAR(sa.DOSSIER_NR, '0999999'), 2, 3)))
  ||SUBSTR(TO_CHAR(sa.DOSSIER_NR, '0999999'), 5, 4) CONVERTED_SSN_DOSSIER_NR,
  fa.snr
FROM
  (SELECT pss_t.pin,
    pss_t.ssn
  FROM EHDIS_INSURANCE.pin_ssn_status pss_t
  WHERE pss_t.difference_status < 5
  ) pss
INNER JOIN SSPF_CENTRE.file_archive fa
ON fa.ssn = pss.ssn
INNER JOIN SSPF_CENTRE.persons p
ON p.ssn = fa.ssn
INNER JOIN
  (SELECT pd_2.ssn,
    pd_2.type,
    pd_2.series,
    pd_2.doc_number,
    pd_2.issue_date,
    pd_2.issuing_body
  FROM

--The changed subquery starts here
    (SELECT ssn,
      MIN(type) AS type
    FROM SSPF_CENTRE.person_documents
    GROUP BY ssn
    ) pd_1
  INNER JOIN SSPF_CENTRE.person_documents pd_2
  ON pd_2.type       = pd_1.type
  AND pd_2.ssn       = pd_1.ssn
  ) pd
--The changed subquery ends here

ON pd.ssn = p.ssn
INNER JOIN SSPF_CENTRE.ssn_archive sa
ON p.ssn = sa.ssn
INNER JOIN SSPF_CENTRE.person_addresses pa
ON p.ssn = pa.ssn
INNER JOIN
  (SELECT i_t.irn,
    irs_t.ssn,
    i_t.tpn,
    i_t.reg_office,
    (
    CASE i_t.insurer_type
      WHEN '4'
      THEN '1'
      ELSE i_t.insurer_type
    END) AS insurer_type
  FROM sspf_centre.irn_registered_ssn irs_t
  INNER JOIN SSPF_CENTRE.insurers i_t
  ON i_t.irn                   = irs_t.new_irn
  OR i_t.old_irn               = irs_t.old_irn
  WHERE irs_t.is_registration IS NOT NULL
  AND i_t.is_real             IS NOT NULL
  ) irs ON irs.ssn             = p.ssn
LEFT OUTER JOIN SSPF_CENTRE.districts di
ON di.code = pa.city
LEFT OUTER JOIN SSPF_CENTRE.countries citiz_c
ON p.citizenship = citiz_c.numeric_code
LEFT OUTER JOIN SSPF_CENTRE.countries coun_c
ON pa.country_code  = coun_c.numeric_code
WHERE pa.address_flag = '1'--Here's the column value with quotes
AND fa.form_type    = 'Q3'; 
```

和版本 2：

```
SELECT p.ssn,
  pss.pin,
  pd.doc_number,
  p.surname,
  p.name,
  p.patronymic,
  to_number(p.sex, '9') as sex,
  citiz_c.short_name citizenship,
  p.birth_place,
  p.birth_day as birth_date,
  coun_c.short_name as country,
  di.name as leg_city,
  trim( pa.settlement
  || ' '
  || pa.street) AS leg_street,
  pd.issue_date,
  pd.issuing_body,
  irs.irn,
  irs.tpn,
  irs.reg_office,
  to_number(irs.insurer_type, '9') as insurer_type,
  TO_CHAR(sa.REG_CODE)
  ||CONVERT_INT_TO_DOUBLE_LETTER(TO_NUMBER(SUBSTR(TO_CHAR(sa.DOSSIER_NR, '0999999'), 2, 3)))
  ||SUBSTR(TO_CHAR(sa.DOSSIER_NR, '0999999'), 5, 4) CONVERTED_SSN_DOSSIER_NR,
  fa.snr
FROM
  (SELECT pss_t.pin,
    pss_t.ssn
  FROM EHDIS_INSURANCE.pin_ssn_status pss_t
  WHERE pss_t.difference_status < 5
  ) pss
INNER JOIN SSPF_CENTRE.file_archive fa
ON fa.ssn = pss.ssn
INNER JOIN SSPF_CENTRE.persons p
ON p.ssn = fa.ssn
INNER JOIN

 --The changed subquery starts here
 (SELECT ssn,
    type,
    series,
    doc_number,
    issue_date,
    issuing_body
  FROM
    (SELECT ssn,
      type,
      series,
      doc_number,
      issue_date,
      issuing_body,
      ROW_NUMBER() OVER (partition BY ssn order by type) rn
    FROM SSPF_CENTRE.person_documents
    )
  WHERE rn = 1
  ) pd --
 --The changed subquery ends here

ON pd.ssn = p.ssn
INNER JOIN SSPF_CENTRE.ssn_archive sa
ON p.ssn = sa.ssn
INNER JOIN SSPF_CENTRE.person_addresses pa
ON p.ssn = pa.ssn
INNER JOIN
  (SELECT i_t.irn,
    irs_t.ssn,
    i_t.tpn,
    i_t.reg_office,
    (
    CASE i_t.insurer_type
      WHEN '4'
      THEN '1'
      ELSE i_t.insurer_type
    END) AS insurer_type
  FROM sspf_centre.irn_registered_ssn irs_t
  INNER JOIN SSPF_CENTRE.insurers i_t
  ON i_t.irn                   = irs_t.new_irn
  OR i_t.old_irn               = irs_t.old_irn
  WHERE irs_t.is_registration IS NOT NULL
  AND i_t.is_real             IS NOT NULL
  ) irs ON irs.ssn             = p.ssn
LEFT OUTER JOIN SSPF_CENTRE.districts di
ON di.code = pa.city
LEFT OUTER JOIN SSPF_CENTRE.countries citiz_c
ON p.citizenship = citiz_c.numeric_code
LEFT OUTER JOIN SSPF_CENTRE.countries coun_c
ON pa.country_code  = coun_c.numeric_code
WHERE pa.address_flag = 1--Here's the column value without quotes
AND fa.form_type    = 'Q3'; 
```

我已经在两个查询中为更改的子查询和 WHERE 子句添加了单独的注释。两个版本的子查询返回相同的结果，其中一个只是速度较慢，这就是我决定更新它的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:15:39.333

使用最简单的示例，我无法在 11.2.0.3.0 或 11.2.0.1.0 上重现您的问题。

```
SQL> create table tmp_test ( a char(1) );

Table created.

SQL> insert into tmp_test values ('1');

1 row created.

SQL> select *
  2    from tmp_test
  3   where a = 1;

A
-
1 
```

如果我随后在表中插入一个非数字值，我可以确认 Chris 的评论“Oracle 将重写`tab1.col1 = 1`为`to_number(tab1.col1) = 1`”，这意味着您在列中只有数字字符。

```
SQL> insert into tmp_test values ('a');

1 row created.

SQL> select *
  2    from tmp_test
  3   where a = 1;
ERROR:
ORA-01722: invalid number

no rows selected 
```

如果您有兴趣追踪它，您应该逐渐降低查询的复杂性，直到找到一个最小的、可重现的示例。Oracle 可以预先计算要在 JOIN 中使用的转换，因为您的查询很复杂，这似乎是对正在发生的事情的可能解释。

Oracle[明确建议不要使用隐式转换](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements002.htm#i53062)，因此最好不要使用它；正如你所发现的。首先，不能保证您的索引将被正确使用。

> Oracle 建议您指定显式转换，而不是依赖隐式或自动转换，原因如下：
> 
> *   使用显式数据类型转换函数时，SQL 语句更容易理解。
>     
>     
> *   隐式数据类型转换会对性能产生负面影响，尤其是在将列值的数据类型转换为常量而不是相反时。
>     
>     
> *   隐式转换取决于它发生的上下文，并且可能不会在每种情况下都以相同的方式工作。例如，从日期时间值到 VARCHAR2 值的隐式转换可能会返回意外年份，具体取决于 NLS_DATE_FORMAT 参数的值。
>     
>     
> *   隐式转换的算法可能会随着软件版本和 Oracle 产品的变化而变化。显式转换的行为更可预测。

如果列中只有数字字符，我强烈建议将其更改为 NUMBER(1) 列，并且我始终建议进行显式转换以避免从长远来看会带来很多痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:19:09.930

没有实际的查询很难说。我期望的是 TAB1.COL1 在重构之前和之后在某种程度上有所不同。

候选人的区别是 Number vs. CHAR(1) vs. CHAR(x>1) vs VARCHAR2

使用子查询很容易引入这样的差异，您可以在连接列中连接两个具有不同类型的表，并在子查询中返回不同的列。

要解决该问题，您可能需要检查查询的确切数据类型。不知道现在该怎么做..但一个想法是将它放在一个视图中并在其上使用 sqlplus desc 。

# mysql - 如何在mysql的两个值之间插入一个新值。？

> ID：14598209
> 
> 赞同：1
> 
> 时间：2013-01-30T06:48:05.310
> 
> 标签：mysql

我有一个 mySql 数据库，其中包含一个表，其中包含四个字段 Id（主键和自动增量）、节点、距离、压力。

```
ID      Node    Distance    Pressure 
001     15       320        45
002     16       420        41
003     17       520        45
.
.
.
.
10000    256     1245        1542 
```

问题是，如果你想插入一条新记录，那么新记录的 ID 变为 10001，但我想在两条记录之间插入一条新记录。例如：我需要在 001 和 002 之间插入一条新记录，这就是问题所在。我需要新记录的ID为002。目前我正在通过更新表来解决这个问题。但是对于大量记录来说这是不可行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:52:52.047

`auto-increment`如果 ID等同于**[Identity 列](http://msdn.microsoft.com/en-in/library/aa933196(v=sql.80).aspx)**，我认为您不能插入行，考虑到`SQL Server`

**更新：** 也在`Mysql`

**[MySQL 中的自动增量，](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)**如果 ID 为 and ，我们无法插入 Row`auto-increment`。

感谢[Mahmoud Gamal](https://stackoverflow.com/users/722783/mahmoud-gamal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:08:39.867

简单的。不要使用自动增量。然而，更好的答案是质疑您为什么要这样做！

# javascript - 循环内的睡眠/延迟/超时

> ID：14598210
> 
> 赞同：1
> 
> 时间：2013-01-30T06:48:14.123
> 
> 标签：javascript, loops, timeout, delay, sleep

我的 JavaScript 代码需要延迟，但如果我在代码中创建超时函数，就会遇到问题。但是，如果我取出超时代码，它工作得很好。我在这里搜索了关于超时/延迟的另一篇文章，但我认为我的情况有点不同。

```
var myArray = new Array('Book One', 'Book Two', 'Book Three', 'Book Four');

x = myArray.length - 1;

(function myLoop(x) {

    page = 3;

    (function myLoop2(page) {
        //setTimeout(function () {   

        var name = myArray[x];

        alert(name + ' Page: ' + page);

        if (--page) myLoop2(page);
        //}, 1000 )
    })(page);

    if (x != 0) myLoop(--x);
})(x); 
```

如果我删除代码中的注释，它会给我一个不同的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:47:25.587

是的，Javascript 中没有睡眠/等待功能。但是您可以使用 SetTimeout 函数完成大部分所需的功能。

我认为下面的代码会给你想要的结果。核实

```
var myArray = new Array('Book One', 'Book Two', 'Book Three', 'Book Four');

x = myArray.length - 1;

   (function myLoop(x2) {

    page = 3;

    (function myLoop2(page1, x1) {

       setTimeout(function () {  var name = myArray[x1];

    alert(name + ' Page: ' + page1);

    if (--page1)  myLoop2(page1, x1);}, 1000 )

    })(page,x2); 

    if (x2 != 0)  setTimeout(function () {myLoop(--x2);}, 4000 )
})(x); 
```

我们必须根据情况使用 setTimeout 函数。setTimeout 不会阻塞代码流。

在 Timed 函数中使用全局变量将导致在执行时间实例中使用变量。不是函数在 setTimeout 函数中计时时的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:00:43.943

不幸的是，JavaScript 中没有睡眠或等待功能。超时不会暂停程序执行。相反，它会安排函数在稍后执行，并继续执行，就好像此时没有发生任何事情一样。

因此，如果没有超时，代码将作为正常的嵌套循环运行。

使用超时，内部循环变为“调度一次，并在触发时调度下一个”。所以外循环将安排每本书的所有第一页。一秒钟后，第一页被触发，这将安排第二页。再过一秒，第二页被触发，依此类推。

# javascript - 从特定时区获取日期和时间

> ID：14598211
> 
> 赞同：0
> 
> 时间：2013-01-30T06:48:14.753
> 
> 标签：javascript, date, time

我正在启动我的新网站，该网站将于意大利时间上午 9 点启动。现在我给了 `dateFuture = new Date(2013,0,30,9,00,00);`，但它需要我在印度的本地电脑日期。我如何在早上 9 点显示意大利文网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:14:34.167

我了解您希望阻止某个页面在特定时间之前在特定位置被看到。如您所知，JavaScript 在浏览器中运行，仅凭时间您无法判断用户是在意大利还是在其他地方打开页面。

你可以去的最接近的是确保它会在那个时区的上午 9 点之后。

```
var now = new Date(); 
var nowUtc = new Date(
    now.getUTCFullYear(), 
    now.getUTCMonth(), 
    now.getUTCDate(),         
    now.getUTCHours(),
    now.getUTCMinutes(), 
    now.getUTCSeconds());

var eightAmUTC = new Date(2013,0,30,8,00,00); // 8am UTC is 9am In Italy for this date.

var nowIsAfter9InItaly = nowUtc > eightAmUTC; 
```

nowIsAfter9InItaly 将`true`在意大利上午 9 点之后，即 1 月 30 日，`false`否则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:58:53.360

要在意大利的时间是上午 9 点时获得印度的当地时间：

```
var offset = new Date().getTimezoneOffset() / 60 ;
var d = new Date(Date.UTC(2013,0,30,9 + offset,0,0)); 
```

# svn - 如何在同一个 SVN 存储库中合并基于文件夹的分支？

> ID：14598212
> 
> 赞同：3
> 
> 时间：2013-01-30T06:48:27.023
> 
> 标签：svn

我继承了具有以下结构的 SVN 存储库：

```
Master
-TheCodeRepo // Application code repo in here
Branches
-CoderGuy1
--Ticket123
---TheCodeRepo // Application code repo in here
-CoderGuy2
--Ticket555
---TheCodeRepo // Application code repo in here
-CoderGuy3
--Ticket444
---TheCodeRepo // Application code repo in here 
```

我需要将所有这些“分支”合并到主存储库中。它一团糟。这甚至可能吗？还是我必须使用一些差异 GUI 并手动合并所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:17:42.507

它看起来像功能分支策略的使用，每个开发人员都有一些额外的目录。如果您查看[SVN Red Book 中的文档](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.branchmerge.commonpatterns.feature)，您将看到以下模式：

1.  通过将主分支上的更改合并到特性分支，确保每个特性分支都是最新的。
2.  然后最后重新集成，然后删除功能分支。
3.  对每个功能分支重复这 2 个步骤。

一个新的策略当然应该避免大多数 bug 的特性分支，并且只在发布分支上修复它们（你应该有一个），或者直接在 Master（通常称为主干）上修复它们。

# jquery - 如何修复tinymce错误“b.editor为空”

> ID：14598214
> 
> 赞同：1
> 
> 时间：2013-01-30T06:48:35.313
> 
> 标签：jquery, tinymce

我有**tiny_mce_custom_popup.js**的tinymce 错误**b.editor is null**。

 *****b.editor is null**错误*仅在 Firefox 中发生。如何解决这个问题？

重现错误。

1.  加载页面

2.  重新加载页面

3.  发生错误。

这些是我的 html 页面。

**test1.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Test TinyMCE</title>

        <link rel="stylesheet" href="main.css">

        <script type="text/javascript" src="jquery.min.js"></script>
    </head>
    <body>

        <div class="container">
            <div class="insert-media">
                <div class="insert-popup-button" title="insert media"></div>
                <div class="insert-popup-container">
                    <iframe name="media-browser" id="media-browser" src="media-popup.html" class="media-browser-dialog iframe-in-dialog"></iframe>
                </div>
            </div>
            <form method="post">
                <div class="form-controls">Text input</div>
                <textarea name="body_value" placeholder="textarea input" rows="10" class="post-body"></textarea>
                <button type="submit">Save</button>
                <button type="reset">Reset</button>
            </form>
        </div>

        <script type="text/javascript" src="tiny_mce/jquery.tinymce.js"></script>
        <script type="text/javascript">
            $(function() {
                $('.insert-popup-button').click(function() {
                    $('.insert-popup-container').toggle();
                });
            });

            $('.post-body').tinymce({
                // Location of TinyMCE script
                script_url : 'tiny_mce/tiny_mce.js',
                apply_source_formatting : true,
                content_css : 'main.css',
                convert_urls : false,
                document_base_url : '/_vlab/test-tinymce/',
                inline_styles : true,
                preformatted : false,
                relative_urls : false,
                // fix bug when open and tinymce not show in first time.
                height: '400px',
                width: '100%'
            });// tinymce post-body

        </script>

    </body>
</html> 
```

**媒体popup.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Media popup</title>

        <link rel="stylesheet" href="main.css">

        <script type="text/javascript" src="jquery.min.js"></script>
    </head>
    <body>

        <div class="container media-container">
            <a href="#" onclick="return insert_media('<img src=\'001.jpg\'>');">insert media</a>
        </div>

        <script type="text/javascript" src="tiny_mce/tiny_mce_custom_popup.js"></script>
        <script type="text/javascript">
            function insert_media( element ) {
                element = htmlspecialchars_decode( element, 'ENT_QUOTES' );
                tinyMCE.activeEditor.execCommand('mceInsertContent', false, element);
                return false;
            }// insert_media

            function htmlspecialchars_decode (string, quote_style) {
                // http://kevin.vanzonneveld.net
                // +   original by: Mirek Slugen
                // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
                // +   bugfixed by: Mateusz "loonquawl" Zalega
                // +      input by: ReverseSyntax
                // +      input by: Slawomir Kaniecki
                // +      input by: Scott Cariss
                // +      input by: Francois
                // +   bugfixed by: Onno Marsman
                // +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
                // +   bugfixed by: Brett Zamir (http://brett-zamir.me)
                // +      input by: Ratheous
                // +      input by: Mailfaker (http://www.weedem.fr/)
                // +      reimplemented by: Brett Zamir (http://brett-zamir.me)
                // +    bugfixed by: Brett Zamir (http://brett-zamir.me)
                // *     example 1: htmlspecialchars_decode("<p>this -&gt; &quot;</p>", 'ENT_NOQUOTES');
                // *     returns 1: '<p>this -> &quot;</p>'
                // *     example 2: htmlspecialchars_decode("&amp;quot;");
                // *     returns 2: '&quot;'
                var optTemp = 0,
                i = 0,
                noquotes = false;
                if (typeof quote_style === 'undefined') {
                    quote_style = 2;
                }
                string = string.toString().replace(/&lt;/g, '<').replace(/&gt;/g, '>');
                var OPTS = {
                    'ENT_NOQUOTES': 0,
                    'ENT_HTML_QUOTE_SINGLE': 1,
                    'ENT_HTML_QUOTE_DOUBLE': 2,
                    'ENT_COMPAT': 2,
                    'ENT_QUOTES': 3,
                    'ENT_IGNORE': 4
                };
                if (quote_style === 0) {
                    noquotes = true;
                }
                if (typeof quote_style !== 'number') { // Allow for a single string or an array of string flags
                    quote_style = [].concat(quote_style);
                    for (i = 0; i < quote_style.length; i++) {
                        // Resolve string input to bitwise e.g. 'PATHINFO_EXTENSION' becomes 4
                        if (OPTS[quote_style[i]] === 0) {
                            noquotes = true;
                        } else if (OPTS[quote_style[i]]) {
                            optTemp = optTemp | OPTS[quote_style[i]];
                        }
                    }
                    quote_style = optTemp;
                }
                if (quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {
                    string = string.replace(/&#0*39;/g, "'"); // PHP doesn't currently escape if more than one 0, but it should
                    // string = string.replace(/&apos;|&#x0*27;/g, "'"); // This would also be useful here, but not a part of PHP
                }
                if (!noquotes) {
                    string = string.replace(/&quot;/g, '"');
                }
                // Put this in last place to avoid escape being double-decoded
                string = string.replace(/&amp;/g, '&');

                return string;
            }// htmlspecialchars_decode
        </script>

    </body>
</html> 
```

[jQuery 1.9.0](http://jquery.com/)

[tinymce jQuery 包 3.5.8](http://www.tinymce.com/download/download.php)**

# javascript - JavaScript：如何在 Chrome 调试器工具中检查断点值

> ID：14598216
> 
> 赞同：4
> 
> 时间：2013-01-30T06:48:45.863
> 
> 标签：javascript, google-chrome, javascript-debugger

我有一个简单的 js 文件，它连续打印日期。

我正在使用 Google Chrome 调试器工具 (F12)

我在该行设置了一个断点 `s = date.getSeconds();`

它已经停在那个断点处。

我的问题是我可以看到/检查断点值吗？？（如果它的日食，我会使用**Ctrl + Shift + i**）

**我知道控制台选项，但我可以看到调试器工具的价值吗？**

请在此处查看屏幕截图。

![在此处输入图像描述](../Images/3b4c341653ce06a4a0347a26369b1fd2.png)

提前致谢 。

```
function date_time(id)
{
        date = new Date;
        year = date.getFullYear();
        month = date.getMonth();
        months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'Jully', 'August', 'September', 'October', 'November', 'December');
        d = date.getDate();
        day = date.getDay();
        days = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday');
        h = date.getHours();
        if(h<10)
        {
                h = "0"+h;
        }
        m = date.getMinutes();
        if(m<10)
        {
                m = "0"+m;
        }
        s = date.getSeconds();
        if(s<10)
        {
                s = "0"+s;
        }
        result = ''+days[day]+' '+months[month]+' '+d+' '+year+' '+h+':'+m+':'+s;
        document.getElementById(id).innerHTML = result;
        setTimeout('date_time("'+id+'");','1000');
        return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:52:19.930

你可以

*   将鼠标悬停在感兴趣的变量上
*   打开右侧边栏上的“范围变量”部分
*   打开控制台（“按 Esc”）并输入变量以查看其值

例如：

![在此处输入图像描述](../Images/2c33e8df50ed2cafa3dd6e3574660f99.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T06:57:09.400

选择断点变量 's' 并右键单击选定的 's' 并选择选项 add to watch 然后你可以在 Chrome 调试器窗口的右侧看到 s 值，然后按 F10 调试下一行。

# c# - Windows 8 应用商店应用程序不支持 ASCIIEncoding

> ID：14598218
> 
> 赞同：4
> 
> 时间：2013-01-30T06:49:01.640
> 
> 标签：c#, windows-store-apps

我有这个代码在桌面应用程序中工作，但它在 Windows 8 Store 应用程序中不起作用，因为 System.Text 不再`ASCIIEncoding`支持：

`tagdata`是一个`byte array`。

```
ASCIIEncoding.ASCII.GetString(tagdata).Trim(); 
```

我应该使用 UT8Encoding 吗？我只想将字节数组转换为`ASCII`文本。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T06:50:52.720

首先，我建议使用`Encoding.ASCII`到处而不是`ASCIIEncoding.ASCII`- 后者在某种程度上暗示该`ASCII`属性是`ASCIIEncoding`该类的成员，但事实并非如此。

如果您知道您的字节数组*只是*ASCII 文本，那么您可以[`Encoding.UTF8`](http://msdn.microsoft.com/en-gb/library/system.text.encoding.utf8.aspx)自由使用，因为 ASCII 中存在的每个字符在 UTF-8 和 ASCII 中都以相同的方式表示。

如果要先检查有效性，只需要检查数组中的每个字节是否小于 128

```
bool isAscii = tagData.All(b => b < 128); 
```

# ios - 保存后台上下文后的 NSFetchedResultsController NSRangeException

> ID：14598222
> 
> 赞同：2
> 
> 时间：2013-01-30T06:49:12.917
> 
> 标签：ios, uitableview, core-data, nsfetchedresultscontroller

我自己无法重现这一点，所以我只需要收集一些我收集的错误日志即可。这个实在想不通。崩溃发生时有 2 个 FetchedResults 控制器处于活动状态。一个在主屏幕上显示每个类别中有多少项目，一个用于处理您深入研究的类别。我通过其余的回溯知道的是，在向下钻取视图中插入对象时总是会发生此问题。有任何想法吗？有人至少可以确认问题在于更新主屏幕上的单元格而不是在详细屏幕上插入单元格吗？

错误：

** 请注意，有趣的部分似乎是范围 {0,3} 和边界 [0 .. 1] 在我收到的有关此问题的 5-10 条日志中始终相同 **

应用程序特定信息： *** 由于未捕获的异常而终止应用程序 \'NSRangeException\'，原因：\'*** -[NSArray indexOfObject:inRange:]: range {0, 3} extends beyond bounds [0 .. 1]\'

Last Exception Backtrace: 0 CoreFoundation 0x35ad988f __exceptionPreprocess + 163
1 libobjc.A.dylib 0x336fd259 objc_exception_throw + 33
2 CoreFoundation 0x35acda09 -[NSArray indexOfObject:inRange:] + 205
3 CoreData 0x32e8e73d -[_NSDefaultSectionInfo indexOfObject:] + 133
4 CoreData 0x32e8f299 -[NSFetchedResultsController indexPathForObject:] + 149
5 CoreData 0x32e956f5 -[NSFetchedResultsController(PrivateMethods) _managedObjectContextDidChange:] + 4361

创建控制器：

```
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:mainContext sectionNameKeyPath:nil cacheName:self.groupID]; 
```

NSFetchedResultsController 代码：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath
{

    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[self.tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;
        case NSFetchedResultsChangeMove:
            [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath]withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView endUpdates];
}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    [self.tableView beginUpdates];
} 
```

配置单元格：

```
-(void)configureCell:(MessageRow *)cell atIndexPath:(NSIndexPath *)indexPath {

    MymanagedObject *myobj = [self.convoController objectAtIndexPath:indexPath];
    cell.title = myobj.title
 } 
```

请注意，在我的主屏幕上，所有操作基本上都以相同的方式完成，除了在更新时重新加载 tableview 行而不是配置

```
case NSFetchedResultsChangeUpdate:
            [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:55:00.577

我有一个类似的问题。

诀窍是跟踪屏幕上的内容和屏幕外的内容。我在回调中检查这些条件，`NSFetchedResultsControllerDelegate`如果 FRC 引用屏幕外数据，则不进行任何更新。

例如，您可以稍后通过使用触发器“赶上”更新`viewWillAppear`。

# php - 无法打开流：在亚马逊 EC2 上上传时，HTTP 包装器不支持可写连接

> ID：14598232
> 
> 赞同：3
> 
> 时间：2013-01-30T06:50:27.550
> 
> 标签：php, amazon-ec2

我正在使用亚马逊 EC2 服务器进行托管..

我遇到了一个问题：-我必须将一个文件从我的服务器复制到亚马逊存储桶

为此我正在使用

$str = file_get_contents(' [http://www.custmore.com/dev/usercontent/userphoto/user_photo_1358927451.jpg](http://www.custmore.com/dev/usercontent/userphoto/user_photo_1358927451.jpg) ');

file_put_contents“（[http://s3.amazonaws.com/custmorebuck/test](http://s3.amazonaws.com/custmorebuck/test) ”，$str）；

但是出现错误

无法打开流：HTTP 包装器不支持可写连接

任何人都可以建议解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:47:53.003

您必须使用流包装器。

[https://forums.aws.amazon.com/thread.jspa?messageID=283440](https://forums.aws.amazon.com/thread.jspa?messageID=283440)

希望上面的链接有帮助。

# ios6 - 如何将ios6中的按钮连接到LINEA Pro 4条码扫描仪

> ID：14598233
> 
> 赞同：2
> 
> 时间：2013-01-30T06:50:28.303
> 
> 标签：ios6, barcode-scanner, linea-pro

[如何使用适用于 IOS 的 Linea-Pro SDK？](https://stackoverflow.com/questions/13935378/how-do-i-use-the-linea-pro-sdk-for-ios?answertab=active#tab-top)

我找到了上述内容，这让我获得了“连接”。谢谢你的那个帖子，在我找到那个帖子之前，我完全死在了水里。

我现在正在搜索如何连接按钮以及扫描仪按钮以进行扫描，然后输入文本字段。这是我很难使用的连接按钮。我主要通过改编示例来学习 Xcode。

我仍在搜索 LINEA SDK，但它包罗万象，让人难以抗拒。我只想要条形码扫描功能。

在将扫描仪添加到我的真实应用程序之前，我正在使用基于故事板的最小项目和一个按钮和 textField 来学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T10:36:05.323

[如何使用适用于 IOS 的 Linea-Pro SDK？](https://stackoverflow.com/questions/13935378/how-do-i-use-the-linea-pro-sdk-for-ios) 检查这个首先尝试他们的演示，你可以在这里找到 [http://www.datecs.bg/en/products/Linea-Pro-iPhone-SDK/8/102](http://www.datecs.bg/en/products/Linea-Pro-iPhone-SDK/8/102) 这应该可以帮助你。

# iphone - MKCoordinateRegion setRegion 问题

> ID：14598237
> 
> 赞同：1
> 
> 时间：2013-01-30T06:51:05.557
> 
> 标签：iphone, ios, ios6, mkmapview, mkcoordinateregion

我将此代码用于 iPhone iOS 5.0 设备。一切都很好：

```
self.mapView = [[[MKMapView alloc]init] autorelease];
mapView.delegate = self;
mapView.frame = CGRectMake(0, 0, 320, 414);
[myView addSubview:mapView];
MKCoordinateRegion zoomRegion = MKCoordinateRegionForMapRect(MKMapRectWorld);
MKCoordinateRegion adjustedRegion = [mapView regionThatFits:zoomRegion];
[mapView setRegion:adjustedRegion animated:NO]; 
```

然后我在 iPhone 6.0 上尝试了它，它在字符串处崩溃`[mapView setRegion:adjustedRegion animated:NO];`

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException',
 reason: 'Invalid Region <center:+0.00000000, +0.00000000 span:+176.06470039, +360.00004292>' 
```

我应该在我的代码中更改什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T06:58:06.470

我认为你必须像这样设置`latitude span`和`longitude span`之前`setRegion`,,,,

```
MKCoordinateRegion zoomRegion = MKCoordinateRegionForMapRect(MKMapRectWorld);

MKCoordinateRegion adjustedRegion;
adjustedRegion.center = self.mapView.userLocation.coordinate;
adjustedRegion.span.latitudeDelta = 0.01;
adjustedRegion.span.longitudeDelta = 0.01;
adjustedRegion = [mapView regionThatFits:zoomRegion];
[mapView setRegion:adjustedRegion animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:56:26.233

**编辑**

在您的情况下`[mapView regionThatFits:zoomRegion];`，它会产生问题..删除它：

```
MKCoordinateRegion zoomRegion = MKCoordinateRegionForMapRect(MKMapRectWorld);
   // MKCoordinateRegion adjustedRegion = [self.mapView regionThatFits:zoomRegion];
    [self.mapView setRegion:zoomRegion animated:NO]; 
```

# javascript - 有没有办法只在显示不是无时加载图像？

> ID：14598241
> 
> 赞同：0
> 
> 时间：2013-01-30T06:51:14.960
> 
> 标签：javascript, html, image, load

很简单的问题：

如果它们是显示：无，我可以强制浏览器不下载任何图像或其他资源，但是当显示切换到内联时当然下载？

这里是概念：一个包含许多幻灯片作为图像的演讲演示，默认情况下都设置为 display:none，然后在视频达到特定时间索引时更改为 display:inline。浏览器仍会尝试加载所有图像，即使它们未显示，这可能会导致视频或应在幻灯片图像之后加载的元素挂起。

我有一系列这些：

```
<figure class="lectureNotCurrent" data-start="0" data-end="259">
<a href="img1_large.JPG" target="_blank">
<img src="img1_large.JPG" class="lectureSlidesImg" /></a></figure> 
```

编辑 - 应该工作吗？

```
<img data-src=/path/to/img.png src="">

//js
loadNextImages() {
   document.querySelectorAll("#slidesContainer footer").map(function () {
       this.getElementsByTagName('img').src = this.getElementsByTagName('img').dataset.src;
       delete this.dataset.src;
   });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T07:04:12.600

更新您的 html 以使隐藏的图像没有`src`（或有一个透明像素文件作为源，例如）并使用`data-src`和更改`src`它的显示时间：

```
<img data-src=/path/to/img.png src="">

//js
loadNextImages() {
    document.querySelectorAll("#container img").map(function () {
        this.src = this.dataset.src;
        delete this.dataset.src;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:17:45.753

这就是我最终要做的。

HTML

```
<figure class="lectureNotCurrent" data-start="0" data-end="259">
<a href="img1_large.JPG" target="_blank">
<img data-src="img1_large.JPG" src="" class="lectureSlidesImg" /></a></figure> 
```

在运行幻灯片计时的函数中，我添加了变量：

```
var imgNames = document.getElementsByClassName('lectureSlidesImg'); 
```

然后，我在代码部分（“for”循环）中添加了此语句，该语句根据视频的当前时间在正确的时刻将 display:inline 应用于图形标签。

```
imgNames[i].src = imgNames[i].getAttribute('data-src'); 
```

因此，除了显示相关的图形标签外，它还将获取相关图像的 data-src 值并将其插入到 src 属性中。然后加载图像。

data-* 自定义属性背后有很多强大的功能。很高兴我了解了这些。

但是，有人会认为 display:none 应该阻止加载内容，除非更改显示。

# java - 如何使用 Jsoup 解析仅包含一个类名的元素？

> ID：14598242
> 
> 赞同：3
> 
> 时间：2013-01-30T06:51:31.347
> 
> 标签：java, jsoup

对于这个 html：

```
<div id="list">
    <div class="one two three" date="20130121">
        ...
    </div>
    <div class="one" date="20130122">
        ...
    </div>
    <div class="one two" date="20130123">
        ...
    </div>
    <div class="one" date="20130124">
        ...
    </div>
</div> 
```

我想只提取日期元素`class = "one"`，这样如果包含“一个”类但有其他类是不正确的。
我期望的答案应该是`date="20130122"`和`date="20130124"`

我尝试使用：

```
Element outestDiv = doc.getElementById("list");
Elements eachDayBox = outestDiv.select("div.one"); 
```

但`eachDayBox.size()`返回 4 而不是 2。那么如何只用“一个”类提取？？另外，如何在“日期”中获取元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T06:58:27.113

`[attribute=value]`在选择中使用

```
Elements eachDayBox = outestDiv.select("div[class=one]"); //class only equal to one 
```

[参考](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:05:24.960

这将起作用。

```
Elements elements = doc.getElementsByAttributeValue("class", "one");
for(int i=0;i<elements.size();i++){
    Element tmp=elements.get(i);
    System.out.println(tmp.attr("date"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T07:08:08.933

获取日期值

`String date = eachDayBox .attr("date");`

# javafx - javafx中的可编辑表

> ID：14598249
> 
> 赞同：0
> 
> 时间：2013-01-30T06:52:06.260
> 
> 标签：javafx

我正在尝试在 javafx 中构建一个计费系统，我可以构建表格和所有内容。现在我想改变它，我希望表格已经是可编辑的，即表格中的文本字段应该在onEditCommite之前启用编辑。将数据存储在表中也存在问题。代码如下。在下面的代码中，行被添加并且可以被删除。但是我想在单击“新账单”按钮时使其可编辑。还有任何通过将 this.rate 和 this.qty 相乘来计算价格的方法。

```
 public class abc extends Application {
private TableView<Billing> table = new TableView<Billing>();
private final ObservableList<Billing> data = FXCollections.observableArrayList();
final HBox hb = new HBox();
final HBox hb1=new HBox();
final HBox hb2= new HBox();
private IntegerProperty index = new SimpleIntegerProperty();

public static void main(String[] args) {
launch(args); }

// Stage Start method. Whole Stage.
@Override
public void start(Stage stage) {
Scene scene = new Scene(new Group());
stage.setTitle("Billing");
stage.setWidth(550);
stage.setHeight(650);
final Label label = new Label("Billing Trial 2 ");
label.setFont(new Font("Comic Sans", 26));

//Call EditingCell and set true to make it editable
table.setEditable(true);
Callback<TableColumn, TableCell> cellFactory =
new Callback<TableColumn, TableCell>() {
public TableCell call(TableColumn p) {
return new EditingCell();
}
};

TableColumn srnoCol = new TableColumn("Sr. No. ");
srnoCol.setMinWidth(50);
srnoCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("srNo"));

srnoCol.setCellFactory(cellFactory);
TableColumn numCol = new TableColumn("Item Code ");
numCol.setMinWidth(50);
numCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("itemCode"));
numCol.setCellFactory(cellFactory);
numCol.setOnEditCommit(
new EventHandler<CellEditEvent<Billing, String>>() {
@Override
public void handle(CellEditEvent<Billing, String> t) {
((Billing) t.getTableView().getItems().get(
t.getTablePosition().getRow())
).setItemCode(t.getNewValue());
}
}
);
TableColumn nameCol = new TableColumn("Item Name ");
nameCol.setMinWidth(100);
nameCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("itemName"));
nameCol.setCellFactory(cellFactory);
nameCol.setOnEditCommit(
new EventHandler<CellEditEvent<Billing, String>>() {
@Override
public void handle(CellEditEvent<Billing, String> t) {
((Billing) t.getTableView().getItems().get(
t.getTablePosition().getRow())
).setItemName(t.getNewValue());
}
}
);

TableColumn qtyCol = new TableColumn("Qty ");
qtyCol.setMinWidth(100);
qtyCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("itemQty"));
qtyCol.setCellFactory(cellFactory);
qtyCol.setOnEditCommit(
new EventHandler<CellEditEvent<Billing, String>>() {
@Override
public void handle(CellEditEvent<Billing, String> t) {
((Billing) t.getTableView().getItems().get(
t.getTablePosition().getRow())
).setItemQty(t.getNewValue());
}
}
);

TableColumn rateCol = new TableColumn("Item Rate ");
rateCol.setMinWidth(50);
rateCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("itemRate"));
rateCol.setCellFactory(cellFactory);
rateCol.setOnEditCommit(
new EventHandler<CellEditEvent<Billing, String>>() {
@Override
public void handle(CellEditEvent<Billing, String> t) {
((Billing) t.getTableView().getItems().get(
t.getTablePosition().getRow())
).setItemRate(t.getNewValue());
}
}
);
TableColumn priceCol = new TableColumn("Item Price ");
priceCol.setMinWidth(50);
priceCol.setCellValueFactory(
new PropertyValueFactory<Billing, String>("itemPrice"));
priceCol.setCellFactory(cellFactory);
priceCol.setOnEditCommit(
new EventHandler<CellEditEvent<Billing, String>>() {
@Override
public void handle(CellEditEvent<Billing, String> t) {
((Billing) t.getTableView().getItems().get(
t.getTablePosition().getRow())
).setItemPrice(t.getNewValue());
}
}
);
table.setItems(data);

//indexing of elements for deleting function.
table.getSelectionModel().selectedItemProperty().addListener(newChangeListener<Object>() {
@Override
public void changed(ObservableValue<?>observable, Object oldvalue, Object newValue){
index.set(data.indexOf(newValue));
System.out.println("index: "+data.indexOf(newValue));
}
});

//Deleting
final Button deleteButton=new Button("Delete");
deleteButton.setOnAction(new EventHandler<ActionEvent>() {
@Override
public void handle(ActionEvent de){
int i = index.get();
if (i>-1){
data.remove(i);
table.getSelectionModel().clearSelection();
}
}
});

TableColumn amount = new TableColumn("Amount");
amount.getColumns().addAll(rateCol, priceCol);
table.setItems(data);
table.getColumns().addAll(srnoCol, numCol, nameCol, qtyCol, amount );

//add bill
final Button addButton = new Button("New Bill");
addButton.setOnAction(new EventHandler<ActionEvent>(){
@Override
public void handle(ActionEvent ae)
{
EditingCell ec = new EditingCell();
ec.getString();
ec.createTextField();
table.setEditable(true);
Callback<TableColumn, TableCell>  cellFactory =
new Callback<TableColumn, TableCell>() {
public TableCell call(TableColumn p) {
return new EditingCell();
}
};
ec.startEdit();
ec.cancelEdit();

data.add(new Billing(null,null,null,null,null,null));
}
});

hb.getChildren().addAll( addButton, deleteButton);
hb.setAlignment(Pos.BASELINE_LEFT);
hb.setSpacing(16);
final Label label2 = new Label();
label2.setAlignment(Pos.BASELINE_RIGHT);

final VBox vbox = new VBox();
vbox.setSpacing(15);
vbox.setPadding(new Insets(10, 0, 0, 10));
vbox.getChildren().addAll(label,hb2, hb,  table,hb1);
((Group) scene.getRoot()).getChildren().addAll(vbox);
stage.setScene(scene);
stage.show();
}

//Class Billing
public  static class Billing {
private final SimpleStringProperty itemSrNo;
private final SimpleStringProperty itemCode;
private final SimpleStringProperty itemName;
private final SimpleStringProperty itemQty;
private final SimpleStringProperty itemRate;
private final SimpleStringProperty itemPrice;
private Billing(String iSrNo, String iCode, String iName, String iQty, String iRate,String iPrice) 
{
this.itemSrNo = new SimpleStringProperty(iSrNo);
this.itemCode = new SimpleStringProperty(iCode);
this.itemName = new SimpleStringProperty(iName);
this.itemPrice = new SimpleStringProperty(iPrice);
this.itemQty = new SimpleStringProperty(iQty);
this.itemRate = new SimpleStringProperty(iRate);
}
public String getItemSrNo() {
return itemSrNo.get();
}
public void setItemSrNo(String iSrNo) {
itemSrNo.set(iSrNo);
}

public String getItemCode() {
return itemCode.get();
}
public void setItemCode(String iCode) {
itemCode.set(iCode);
}
public String getItemName() {
return itemName.get();
}
public void setItemName(String iName) {
itemName.set(iName);
}
public String getItemQty() {
return itemQty.get();
}
public void setItemQty(String iQty) {
itemQty.set(iQty);
}
public String getItemPrice() {
return itemPrice.get();
}
public void setItemPrice(String iPrice) {
itemPrice.set(iPrice);
}
public String getItemRate() {
return itemRate.get();
}
public void setItemRate(String iRate) {
itemRate.set(iRate);
}
}

//CellEditing
public  class EditingCell extends TableCell<Billing, String> {
private TextField textField;
public EditingCell() {
}
@Override
public void startEdit() {
if (!isEmpty()) {
super.startEdit();
createTextField();
setText(null);
setGraphic(textField);
textField.selectAll();
}
}
@Override
public void cancelEdit() {
super.cancelEdit();
setText((String) getItem());
setGraphic(null);
}
@Override
public void updateItem(String item, boolean empty) {
super.updateItem(item, empty);
if (empty) {
setText(null);
setGraphic(null);
}
else {
if (isEditing()) {
if (textField != null) {
textField.setText(getString());
}
setText(null);
setGraphic(textField);
}
else {
setText(getString());
setGraphic(null);
}
}
}
private void createTextField() {
textField = new TextField(getString());
textField.setMinWidth(this.getWidth() - this.getGraphicTextGap()* 2);
textField.focusedProperty().addListener(new ChangeListener<Boolean>(){
@Override
public void changed(ObservableValue<? extends Boolean> arg0, 
Boolean arg1, Boolean arg2) {
if (!arg2) {
commitEdit(textField.getText());
}
}
});
}
private String getString() {
return getItem() == null ? "" : getItem().toString();
}
}
}

// calculation of Qty x Rate.
class Calculate {

public String sum(int iQty, int iRate)
{
 int sum =  iQty*iRate;
 String s =""+sum;
 return s;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T18:44:40.963

老问题，但这是我认为应该起作用的：不要在你的 cellFactory 中使用 setGraphic(null)。始终将其设置为 TextField。同样对于计算部分，您可以将侦听器添加到数据模型中的属性，并对这些属性的值的任何更改执行计算。

# java - 在 java 中使用 stanford 词法分析器时的性能问题

> ID：14598250
> 
> 赞同：0
> 
> 时间：2013-01-30T06:52:06.297
> 
> 标签：java, nlp, stanford-nlp

我是斯坦福 NLP 的新手。我正在使用词法解析器来解析文件的内容并提取名词短语。在解析行时，生成树结构需要更多时间。

我正在使用 Tregex 模式从一行中获取名词短语。

我正在使用 1 MB 文件进行解析，因此解析和提取名词短语需要两个多小时。

这是我正在使用的完整代码。

```
 Tree x = parser.apply(line);
        System.out.println("tree s=="+x);
        TregexPattern NPpattern = TregexPattern.compile("@NP <@/NN.?/");
        TregexMatcher matcher = NPpattern.matcher(x);

        while (matcher.findNextMatchingNode()) {
            Tree match = matcher.getMatch();
            List<TaggedWord> tWord = match.taggedYield();
            Iterator<TaggedWord> it = tWord.iterator();
            String str="";
            while(it.hasNext()){
                TaggedWord word = it.next();
                String taggedWord = word.tag();
                if(taggedWord.equals("NN")||taggedWord.equals("NNS")||taggedWord.equals("NNP")){
                    str = str+word.value()+" ";
                }
            }
       } 
```

所以请帮助我如何提高性能或者是否有另一种方法来优化这段代码。

在此先感谢古斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T18:54:32.300

文本的全选区解析有点慢......如果你坚持下去，你可能无能为力。

但是有几点需要提一下：（i）如果你没有使用englishPCFG.ser.gz语法，那么你应该使用它，因为它比使用englishFactored.seer.gz更快并且（ii）解析很长的句子特别慢，因此，如果您可以通过省略或中断很长的句子（例如，超过 70 个单词）来获得，那将有很大帮助。特别是，如果某些文本来自网络抓取或其他任何内容，并且有一长串并非真正句子的内容，则过滤或划分它们可能会有很大帮助。

您可以采取的另一个方向是，您似乎并不需要一个完整的解析器，而只需要一个 NP 分块器（识别文本中最小名词短语的东西）。这些可以更快，因为它们不构建递归结构。斯坦福 NLP 工具中目前没有一个，但您可以通过在网络上搜索该术语找到一些。

# linux - 在 Linux 上制作 Sublime Text 2 命令的行为与在 MacOS X 上一样

> ID：14598261
> 
> 赞同：7
> 
> 时间：2013-01-30T06:52:55.957
> 
> 标签：linux, sublimetext2

有很多关于从命令行访问 Sublime Text 2 编辑器的问题。总之，响应是创建符号链接、别名或简单的 shell 脚本来运行适当的 sublime_text 命令。我能做到。我想要的是让 linux 版本表现得像 MacOS 版本。

在 MacOS 上，我有以下内容：

```
ln -s /Applications/Sublime\ Text\ 2.app/Contents/SharedSupport/bin/subl ~/bin/subl 
```

然后在我的 .zshrc 中：

```
alias subl="$HOME/bin/subl -n"
export EDITOR="$HOME/bin/subl -n -w" 
```

这有两件事。它给了我一个`subl`命令，可以在新窗口中打开命令行中给出的任何文件。该`subl`命令不会阻止终端。它还设置了我的编辑器以打开崇高的文本来编辑参数，但这次它确实阻塞了。特别是，`$EDITOR`阻塞直到**它的参数**被关闭。它不会阻塞无关的崇高文本窗口。

我可以通过以下方式在 linux 上实现类似的效果：

在 ~/bin/subl 中：

```
#! /bin/zsh

$HOME/Sublime\ Text\ 2/sublime_text -n $@ & 
```

然后在 ~/bin/subl_wait: (想想`mate_wait`TextMate 用户)

```
#! /bin/zsh

exec $HOME/Sublime\ Text\ 2/sublime_text -n -w $@ 
```

然后我可以设置`EDITOR`为`subl_wait`，并且几乎可以正常工作。 `subl`打开文件进行编辑并且不阻止。 `subl_wait`打开文件进行编辑并阻止。

问题是`subl_wait`等到**所有**打开的文件都关闭，而不仅仅是它的参数。

有没有可能让这个工作完美？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T22:17:25.450

看来我已经找到问题了。（感谢这篇文章：[http](http://www.sublimetext.com/forum/viewtopic.php?f=2&t=7003) ://www.sublimetext.com/forum/viewtopic.php?f=2&t=7003 ）

基本点：sublime 的行为会根据实例是否已经在运行而有所不同！

如果一个实例已经在运行，那么 Linux 上的 sublime 的行为类似于 MacOS。如果没有实例正在运行，则终端会阻塞，直到您退出 sublime。

考虑到这一点，我们只需要修改脚本以确保 sublime 正在运行：

在`~/bin/subl_start`：

```
#! /bin/zsh

if [ ! "$(pidof sublime_text)" ] ; then
  # start sublime text main instance
  # echo "Starting Sublime Text 2"
  $HOME/Sublime\ Text\ 2/sublime_text &
  sleep 1 # needed to avoid a race condition
fi 
```

在`~/bin/subl`：

```
#! /bin/zsh

. $HOME/bin/subl_start

exec $HOME/Sublime\ Text\ 2/sublime_text -n $@ 
```

在`~/bin/subl_wait`：

```
#! /bin/zsh

. $HOME/bin/subl_start

exec $HOME/Sublime\ Text\ 2/sublime_text -n -w $@ 
```

请注意，我在`-n`任何地方都使用了这些标志。这可能不是你的一杯茶。如果您正在使用，`-n`那么您可能还想查看您的`close_windows_when_empty`设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-14T19:16:31.140

受 OP 回答的启发，我`bash` **为 Sublime Text 创建了一个包装脚本，其中包含您的所有发现并在 OSX 和 Linux 上运行**。

它的目的有三个：

*   提供一个**统一的`subl`CLI**，其工作方式类似于 ST`subl`在 OSX 上自己的工作方式：调用 ST**而不阻塞，除非显式请求等待**。
*   **为 Linux 上与等待相关的错误**封装了一个解决方法。
*   当保存或符号链接到 as 时`sublwait`，提供一个自动应用and选项的**`sublwait`CLI** ，以使其**适合使用**（请注意，某些程序，例如，要求仅包含可执行文件的名称 - 不支持可执行文件 + 选项); 还确保至少指定了一个文件。`--wait``--new-window`**`$EDITOR`**`npm``$EDITOR`

唯一悬而未决的问题是 OP 避免竞争条件的方法是否`sleep 1`足够强大。

**更新**：请注意，`subl`在 OSX 上默认情况下不放置在`$PATH`- 您通常必须手动执行此操作。如果您还没有这样做，脚本现在将`subl`位于 ST 的应用程序包中；（它按以下顺序尝试应用程序名称：'Sublime Text'、'Sublime Text 2'、'Sublime Text 3'，首先在 中`/Applications`，然后在 中`~/Applications`。）

这是运行脚本的输出`-h`：

```
Multi-platform (OSX, Linux) wrapper script for invocation of Sublime Text (ST)
from the command line.

Linux:
  Works around undesired blocking of the shell (unless requested)
  and a bug when waiting for specific files to be edited.
Both platforms:
  When invoked as `sublwait`, automatically applies the
    --wait --new-window
  options to make it suitable for use with $EDITOR.

Therefore, you can to the following:
- Name this script `subl` for a CLI that supports ALL options.
  (On OSX, this will simply defer to the `subl` CLI that came with ST.)
- Place the script in a directory in your $PATH.
- In the same directory, create a symlink to the `subl` script named
  `sublwait`:
    ln -s subl sublwait
  and, if desired, add
    export EDITOR=sublwait
  to your shell profile. 
```

请注意，如果您只使用 OSX，您可以使用 ST 自己的`subl`并将此脚本直接保存为`sublwait`.

## 脚本来源：

```
#!/usr/bin/env bash

# Multi-platform (OSX, Linux) wrapper script for invocation of Sublime Text (ST)
# from the command line. Invoke with -h for details.

[[ $1 == '-h' || $1 == '--help' ]] && showHelpOnly=1 || showHelpOnly=0
[[ $(basename "$BASH_SOURCE") == 'sublwait' ]] && invokedAsSublWait=1 || invokedAsSublWait=0
[[ $(uname) == 'Darwin' ]] && isOsX=1 || isOsX=0

# Find the platform-appropriate ST executable.
if (( isOsX )); then # OSX: ST comes with a bona-fide CLI, `subl`.

  # First, try to find the `subl` CLI in the $PATH.
  # Note: This CLI is NOT there by default; it must be created by symlinking it from
  #       its location inside the ST app bundle.
  # Find the `subl` executable, ignoring this script, if named subl' as well, or a
  # script by that name in the same folder as this one (when invoked via symlink 'sublwait').
  stExe=$(which -a subl | fgrep -v -x "$(dirname "$BASH_SOURCE")/subl" | head -1)
  # If not already in the path, look for it inside the application bundle. Try several locations and versions.
  if [[ -z $stExe ]]; then
    for p in {,$HOME}"/Applications/Sublime Text"{,' 2',' 3'}".app/Contents/SharedSupport/bin/subl"; do
      [[ -f $p ]] && { stExe=$p; break; }
    done
  fi
  [[ -x $stExe ]] || { echo "ERROR: Sublime Text CLI 'subl' not found." 1>&2; exit 1; }

else # Linux: `sublime_text` is the only executable - the app itself.

  stExe='sublime_text'
  which "$stExe" >/dev/null || { echo "ERROR: Sublime Text executable '$stExe' not found." 1>&2; exit 1; }

fi

# Show command-line help, if requested.
# Add preamble before printing ST's own help.
# Note that we needn't worry about blocking the
# shell in this case - ST just outputs synchronously
# to stdout, then exits.
if (( showHelpOnly )); then

  bugDescr=$(
    cat <<EOF
works around a bug on Linux (as of v2.0.2), where Sublime Text,
if it is not already running, mistakenly blocks until it is exited altogether.
EOF
  )

  if (( invokedAsSublWait )); then

    # We provide variant-specific help here.
    cat <<EOF

Wrapper script for Sublime Text suitable for use with the \$EDITOR variable.

Opens the specified files for editing in a new window and blocks the 
invoking program (shell) until they are closed.
In other words: the --wait and --new-window options are automatically
applied.

Aside from encapsulating this functionality without the need for options
- helpful for tools that require \$EDITOR to be an executable name only -
$bugDescr

Usage: sublwait file ...

EOF
    # Note: Adding other options doesn't make sense in this scenario
    #       (as of v2.0.2), so we do NOT show ST's own help here.

  else

    cat <<EOF

Multi-platform (OSX, Linux) wrapper script for invocation of
Sublime Text (ST) from the command line.

Linux:
  Works around undesired blocking of the shell (unless requested)
  and a bug when waiting for specific files to be edited.
Both platforms:
  When invoked as \`sublwait\`, automatically applies the
    --wait --new-window
  options to make it suitable for use with \$EDITOR.

Therefore, you can to the following:
- Name this script \`subl\` for a CLI that supports ALL options.
  (On OSX, this will simply defer to the \`subl\` CLI that came with ST.)
- Place the script in a directory in your \$PATH.
- In the same directory, create a symlink to the \`subl\` script named
  \`sublwait\`:
    ln -s subl sublwait
  and, if desired, add
    export EDITOR=sublwait
  to your shell profile.

Sublime Text's own help:
------------------------
EOF

    # Finally, print ST's own help and exit.
    exec "$stExe" "$@"

  fi
  exit 0
fi

# Invoked as `sublwait`? -> automatically apply --wait --new-window options.
if (( invokedAsSublWait )); then

  # Validate parameters.
  # - We expect NO options - to keep things simple and predictable, we do NOT allow
  #   specifying additional options (beyond the implied ones).
  # - We need at least 1 file argument.
  # - As a courtesy, we ensure that no *directories* are among the arguments - ST doesn't support
  #  that properly (always waits for ST exit altogether); beyond that, however, we leave input
  #  validation to ST.
  if [[ "$1" =~ ^-[[:alnum:]]+$ || "$1" =~ ^--[[:alnum:]]+[[:alnum:]-]+$ ]]; then # options specified?
    { echo "ERROR: Unexpected option specified: '$1'. Use -h for help." 1>&2; exit 1; }
  elif (( $# == 0 )); then # no file arguments?
    { echo "ERROR: Missing file argument. Use -h for help." 1>&2; exit 1; }
  else # any directories among the arguments?
    # Note: We do NOT check for file existence - files could be created on demand.
    #       (Things can still go wrong - e.g., /nosuchdir/mynewfile - and ST doesn't
    #       handle that gracefully, but we don't want to do too much here.)
    for f in "$@"; do
      [[ ! -d "$f" ]] || { echo "ERROR: Specifying directories is not supported: '$f'. Use -h for help." 1>&2; exit 1; }
    done
  fi

  # Prepend the implied options.
  set -- '--wait' '--new-window' "$@"

fi

# Finally, invoke ST:
if (( isOsX )); then # OSX

  # `subl` on OSX handles all cases correctly; simply pass parameters through.
  exec "$stExe" "$@"

else # LINUX: `sublime_text`, the app executable itself, does have a CLI, but it blocks the shell.

  # Determine if the wait option was specified.
  mustWait=0
  if (( invokedAsSublWait )); then
    mustWait=1
  else
    # Look for the wait option in the parameters to pass through.
    for p in "$@"; do
      [[ $p != -* ]] && break # past options
      [[ $p == '--wait' || $p =~ ^-[[:alnum:]]*w[[:alnum:]]*$ ]] && { mustWait=1; break; }
    done
  fi

  if (( mustWait )); then # Invoke in wait-for-specified-files-to-close mode.

    # Quirk on Linux:
    # If sublime_text isn't running yet, we must start it explicitly first.
    # Otherwise, --wait will wait for ST *as a whole* to be closed before returning, 
    # which is undesired.
    # Thanks, http://stackoverflow.com/questions/14598261/making-sublime-text-2-command-on-linux-behave-as-it-does-on-macos-x
    if ! pidof "$stExe" 1>/dev/null; then
        # Launch as BACKGROUND task to avoid blocking.
        # (Sadly, the `--background` option - designed not to activate the Sublime Text window 
        #  on launching - doesn't actually work on Linux (as of ST v2.0.2 on Ubuntu 12.04).)
        ("$stExe" --background &)
        # !! We MUST give ST some time to start up, otherwise the 2nd invocation below will be ignored.
        # ?? Does a fixed sleep time of 1 second work reliably?
        sleep 1
    fi

    # Invoke in blocking manner, as requested.
    exec "$stExe" "$@"

  else # Ensure invocation in NON-blocking manner.

    if ! pidof "$stExe" 1>/dev/null; then # ST isn't running.
      # If ST isn't running, invoking it *always* blocks.
      # Therefore, we launch it as a background taks.
      # Invocation via a subshell (parentheses) suppresses display of the 
      # background-task 'housekeeping' info.
      ("$stExe" "$@" &)
    else # ST is already running, we can safely invoke it directly without fear of blocking.
      exec "$stExe" "$@"
    fi

  fi

fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-14T19:35:42.447

在 Ubuntu Gnu/Linux 13.04 64 位上：

我只是让 subl 几乎一直在运行。所以我的 git 配置有： `core.editor=/usr/bin/subl -n -w`

这就是我所需要的。我用 ctrl-s 保存 git commit 文件，用 ctrl-w 关闭窗口，我就完成了。但是我必须通过点击右上角的 X来*真正关闭窗口...... 96% 完美。*

# asp.net - TFS - 联机问题，曾经在脱机模式下工作

> ID：14598265
> 
> 赞同：1
> 
> 时间：2013-01-30T06:53:06.283
> 
> 标签：asp.net, visual-studio-2010, tfs

我们正在使用 TFS 在 Visual Studio 中工作。

我们正面临一个问题。如果我们离线工作，然后上网，那么它不会显示已更改文件的冲突，而是要求检查所有文件，否则它将在所有文件中显示confili。

任何人都可以知道这种行为。怎么解决？？

# c# - 对收到和响应的推文进行模拟测试

> ID：14598266
> 
> 赞同：0
> 
> 时间：2013-01-30T06:53:06.297
> 
> 标签：c#, mocking, nunit, moq

我有两个名为`ITweetReq`和的接口`ITweetResp`。

`Requests`当推文进来时，一个外部服务发送来发送推文，这是由接口实现的`ITweetReq`，我们的系统作为回报将回复发送回来，这是在`ITweetResp`接口中实现的。

传入和传出消息都记录在文件中。我必须对日志文件进行单元测试，以确保它记录了正确数量的接收和回复的消息。

我想知道是否应该模拟两个接口然后对日志文件进行测试，但不知道如何去做。任何帮助或建议将不胜感激。

我正在使用 NUnit 和 Moq 框架。

```
 var TweetReq = new Mock<ITweetReq>();
   var TweetRes = new Mock<ITweetRes>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:41:59.337

您似乎对什么是模拟/单元测试感到有些困惑。模拟通常是为正在测试的类“外部”的任何东西创建的。单元测试在你的代码上运行（通常是一个方法，或者它的一部分）。

您应该为执行日志记录的类编写单元测试，方法是调用接收/回复带有模拟对象的推文的方法，并测试预期结果。

如果您也模拟您的日志记录类可能会更好，因为直接测试文件可能会变得复杂并且不推荐。

例如，您的班级可能有这些方法。

```
public class TweetHandler
{
    public void Main()
    {
        ILogger logger = GetLogger();

        while (true)
        {
            ITweetReq request = GetNextRequest();

            ITweetRes response = HandleRequest(request, logger);

            SendResponse(response, logger);
        }
    }

    public ITweetRes HandleRequest(ITweetReq request, ILogger logger)
    {
        int id = request.Id;
        string text = request.Text;

        logger.Log("Received tweet " + id + " with text: " + text);

        return new TweetResponse(id, text);
    }

    public void SendResponse(ITweetRes response, ILogger logger)
    {
        logger.Log("Sending response to tweet: " + response.Id);
        Response(reponse);
    }
} 
```

然后，您可以像这样编写单元测试：

```
[TestMethod]
public void HandleRequest_ShouldLogIdAndText()
{
    // Arrange
    var handler = new TweetHandler();
    var mockRequest = new Mock<ITweetReq>();
    var mockLogger = new Mock<ILogger>();

    mockRequest.Setup(x => x.Id).Returns(10);
    mockRequest.Setup(x => x.Text).Returns("some text");

    // Act
    handler.HandleRequest(mockRequest, mockLogger);

    // Assert
    mockLogger.Verify(x => x.Log("Received tweet 10 with text: some text"));
}

[TestMethod]
public void SendResponse_ShouldLogId()
{
    // Arrange
    var handler = new TweetHandler();
    var mockResponse = new Mock<ITweetRes>();
    var mockLogger = new Mock<ILogger>();

    mockResponse.Setup(x => x.Id).Returns(20);

    // Act
    handler.SendReponse(mockResponse, mockLogger);

    // Assert
    mockLogger.Verify(x => x.Log("Sending response to tweet: 20"));
} 
```

# linq - 如何在 Linq 中按周对数据进行分组

> ID：14598270
> 
> 赞同：1
> 
> 时间：2013-01-30T06:53:24.677
> 
> 标签：linq, c#-4.0

我有从日期开始的数据`01/02/2011`并每天更新。

我想使用从日期开始的星期来格式化数据`01/02/2011`。

我有实体

```
public DateTime? MeasurementDate { get; set; } 
```

日期格式：`2011-02-01 00:00:00.0000000`

这给了我数据库中的日期..

我想按**周**对 linq 中的数据进行分组？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T14:49:22.083

如果您使用的是 Linq-To-Entities，您可以执行以下操作：

```
source.GroupBy(x => SqlFunctions.DatePart("ww", x.MeasurementDate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:25:01.630

使用类的`GetWeekOfYear`方法`Calendar`

```
var dt = new List<DateTime?> { /*...*/ };
var dfi = DateTimeFormatInfo.CurrentInfo;
var ordered = dt
    .Where(x => x.HasValue)
    .OrderBy(x => dfi.Calendar.GetWeekOfYear(x.Value, CalendarWeekRule.FirstDay, DayOfWeek.Monday)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T16:04:10.300

或者您可以获取一周中第一天的日期，然后按该日期分组。

获取一周中第一天的日期。您可以使用以下代码：

```
public static class DateTimeExtensions
{
    public static DateTime StartOfWeek(this DateTime dt, DayOfWeek startOfWeek)
    {
        int diff = dt.DayOfWeek - startOfWeek;
        if (diff < 0)
        {
            diff += 7;
        }
        return dt.AddDays(-1 * diff).Date;
    }
} 
```

然后你可以像这样按一周的第一个日期分组：

```
source.GroupBy(i => i.MeasurementDate.StartOfWeek(DayOfWeek.Monday)); 
```

[参考](https://stackoverflow.com/questions/44020982/linq-group-by-week-on-the-list/45039213#45039213)

# python - 将 %%EOF 附加到 python 中的 PDF 文件

> ID：14598274
> 
> 赞同：3
> 
> 时间：2013-01-30T06:53:37.343
> 
> 标签：python, pdf, eof, pypdf

我正在尝试使用 pyPdf 打开 PDF。我收到以下错误：

```
pyPdf.utils.PdfReadError: EOF marker not found 
```

我认为我应该自己添加EOF。但是，我不想写字节。它不是特定于操作系统的吗？我想调用类似 os.eof() 的东西。我写什么？[这个](https://stackoverflow.com/questions/2371645/how-to-append-eof-to-file-using-perl-or-python)线程没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:10:43.130

`%%EOF`PDF 的 EOF 标记是需要出现在 PDF 文件中的特殊字符串 ( )。如果没有，您的[PDF 格式不正确](http://blog.didierstevens.com/2009/05/14/malformed-pdf-documents/)。此字符串将实际 PDF 内容与任何附加数据（嵌入文件等）分开。

`EOF`它与您在读取任何文件时遇到的事件无关。

# html - Articulate：不安全的 JavaScript 尝试访问带有 URL 错误的框架

> ID：14598281
> 
> 赞同：0
> 
> 时间：2013-01-30T06:53:57.767
> 
> 标签：html

我正在尝试在 IFrame 中播放来自 Amazon Cloud 源的 story_html5.html 视频，“story.html”在 Iframe 中工作正常，但是当使用 story_html5.html 时，它会出错。

不安全的 JavaScript 尝试从 URL 为“URL2”的框架访问 URL 为“URL1”的框架。域、协议和端口必须匹配。

请让我知道解决方案。

谢谢， Laxmilal Menaria

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T22:20:02.280

我相信一旦代码确定需要它，就可以调用该文件的 html5 版本。基于此，您的个人代码可能看起来像是在试图劫持进程并导致异常。虽然没有你正在使用的确切代码，但很难说。这只是基于我不久前拆解了一些文件。

# ruby - 有没有办法使用赛璐珞每微秒调用一个块？

> ID：14598285
> 
> 赞同：1
> 
> 时间：2013-01-30T06:54:12.217
> 
> 标签：ruby, celluloid

我正在使用赛璐珞的`every`方法每微秒执行一个块，但是即使我指定小数点，它似乎总是每秒调用一次块。

```
interval = 1.0 / 2.0

every interval do
  puts "*"*80
  puts "Time: #{Time.now}"
  puts "*"*80
end 
```

我希望每 0.5 秒调用一次。但它每秒被调用一次。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:26:53.910

您可以使用赛璐珞获得小数秒分辨率。

赛璐珞使用 Timers gem 来管理`every`浮点时间数学和 ruby `sleep`​​，它具有合理的亚秒级分辨率。

以下代码完美运行：

```
class Bob
  include Celluloid
  def fred
    every 0.5 do
      puts Time.now.strftime "%M:%S.%N"
    end
  end
end

Bob.new.fred 
```

它产生以下输出：

```
22:51.299923000
22:51.801311000
22:52.302229000
22:52.803512000
22:53.304800000
22:53.805759000
22:54.307003000
22:54.808279000
22:55.309358000
22:55.810017000 
```

如您所见，它并不完美，但对于大多数用途来说已经足够接近了。

如果您看到不同的结果，很可能是因为您的代码在您给定的块中花费了多长时间，`every`或者其他计时器正在运行并且使该特定计时器处于饥饿状态。我会通过尽可能简化情况并慢慢添加部件来确定减速发生的位置来解决这个问题。

至于微秒级分辨率，我认为您不能希望使用任何重要的代码可靠地降低这么远。

简单的例子：

```
def bob
  puts Time.now.strftime "%M:%S.%N"
  sleep 1.0e-6
  puts Time.now.strftime "%M:%S.%N"
end 
```

产生：

```
31:07.373858000
31:07.373936000

31:08.430110000
31:08.430183000

31:09.062000000
31:09.062079000

31:09.638078000
31:09.638156000 
```

正如你所看到的，即使我的机器上只有一个基本的 ruby​​ 版本，只运行一条简单的`IO`线也不能可靠地给我微秒级的速度。

# javascript - Jquery：根据单选按钮选择自动选择一些复选框

> ID：14598286
> 
> 赞同：0
> 
> 时间：2013-01-30T06:54:24.300
> 
> 标签：javascript, jquery, checkbox

我试图根据单选按钮选择在复选框输入上自动选择一些，我能够做到这一点，但是对于我的清单我正在使用检查树插件，当我尝试读取输入元素时它没有采取...... .:(

下面是我的代码，

```
<script>
 $(function() {
$('.check-all').live('change', function(){
    $('.options').find('input[class=def]').attr('checked', true);
    return false;
});
$('.uncheck-all').live('change', function(){
    $('.options').find('input[class=def]').attr('checked', false);
    return false;
});
 });
</script>
<script type="text/javascript">
    var $checktree;
    $(function(){
        $checktree = $("ul.tree").checkTree();
        });
</script>
 <div id="main">
 <div class="full_w" >
  <div class="b2"><b>Define categories </b></div></div>
    <div id="cat_left">
  <div class="content">
</div>
<form action="http://localhost:8080/cgi-bin/cat_checkbox.pl" method="POST" name="form1">
<div class="options">
    <ul>
    <label><input type="radio" name="Selection" class="check-all" value="Default" id="type_0" checked="checked" />Default</label>
    <label><input type="radio" name="Selection" class="uncheck-all" value="Custom" id="type_1" />Custom</label>
    </ul>
    <ul>
    <li><input type="checkbox" class="def"id="option1" /><label for="option1">Option 1</label></li>
    <li><input type="checkbox" class="def" id="option2" /><label for="option2">Option 2</label></li>
    <li><input type="checkbox" class="def" id="option3" /><label for="option3">Option 3</label></li>
    <li><input type="checkbox" class="def" id="option4" /><label for="option4">Option 4</label></li>
    <li><input type="checkbox" id="option5" /><label for="option5">Option 5</label></li>
    </ul>

    // I tried till here its working fine, not able to do this same stuff foe below input elements  
</div>  
 <ul class="tree">
 <li><input type="checkbox"><label>Select All</label>
 <ul>
  <li><input class="cate" type='checkbox' class="def" name='v1' id='1' value='1'><label style=""; alt="">main1</label>
    <ul>
    <li><input type='checkbox' class="def" name='chk_0' value='1'><label>option1</label></li>
    <li><input type='checkbox'  class="def" name='chk_1' value='1'><label>option1</label></li>
</ul>
   </li>
 <li><input type='checkbox' name='' id='10' value='1'><label>main2</label>
    <ul>
    <li><input type='checkbox' name='' id='chk_7'' value='1'><label>option1</label></li>
    <li><input type='checkbox' class="def" name='chk_4' id='chk_8' value='1'><label>option1</label></li>
    <li><input type='checkbox' name='chk_5' id='chk_9' value='1'><label>option1</label></li>
</ul>
</li>
<li><input type='checkbox' name='' id='10' value='1'><label>main3</label>
    <ul style="width: 90%">
    <li><input type='checkbox' name='' id='chk_7'' value='1'><label>option1</label></li>
    <li><input type='checkbox' name='chk_4' id='chk_8' value='1'><label>option1</label></li>
    <li><input type='checkbox' name='chk_5' id='chk_9' value='1'><label>option1</label></li>
</ul>
 </li>
 </ul></li>
</ul>
</div>
<p><input type="submit" value="Submit"></p>
<INPUT  type="hidden" SIZE=20 NAME="ip_adrress" value={{ ip }} >
</form> 
```

这是Checktree插件

```
(function(jQuery) {
jQuery.fn.checkTree = function(settings) {
 settings = jQuery.extend({
    onExpand: null,
    onCollapse: null,
    onCheck: null,
    onUnCheck: null,
    onHalfCheck: null,
    onLabelHoverOver: null,
    onLabelHoverOut: null,
    labelAction: "expand",
    debug: false
}, settings);
    var $tree = this;
    $tree.find("li")        // Hide all of the sub-trees
    .find("ul:not(:first-child)").hide().end()// Hide all checkbox inputs
    .find(":checkbox").change(function(){
        var $all = jQuery(this).siblings("ul").find(":checkbox");
        var $checked = $all.filter(":checked");
            if($checked.length == 0) {
                jQuery(this)
                    .attr("checked", "")
                    .siblings(".checkbox")
                        .removeClass("checked")
                        .removeClass("half_checked")
                ;
                if (settings.onUnCheck) settings.onUnCheck(jQuery(this).parent());
            }
            else if ($all.length == $checked.length) {
                jQuery(this)
                    .attr("checked", "checked")
                    .siblings(".checkbox")
                        .removeClass("half_checked")
                        .addClass("checked")
                ;
                // Fire parent's onCheck callback
                if (settings.onCheck) settings.onCheck(jQuery(this).parent());
            }
            // Some children are checked, makes the parent in a half checked state.
            else { 
                // Fire parent's onHalfCheck callback only if it's going to change
                if (settings.onHalfCheck && !jQuery(this).siblings(".checkbox").hasClass("half_checked"))
                    settings.onHalfCheck(jQuery(this).parent());

                jQuery(this)
                    .attr("checked", "")
                    .siblings(".checkbox")
                        .removeClass("checked")
                        .addClass("half_checked")
                ;
            }
        })
        .css("display", "none")
    .end()

    .each(function() {

        // Go through and hide only ul's (subtrees) that do not have a sibling div.expanded:
        // We do this to not collapse *all* the subtrees (if one is open and checkTree is called again)
        jQuery(this).find("ul").each(function() {
            if (!jQuery(this).siblings(".expanded").length) jQuery(this).hide();
        });

        // Copy the label
        //var $label = jQuery(this).children("label").clone();
        // Create or the image for the checkbox next to the label
        var $checkbox = jQuery("<div class=\"checkbox\"></div>");
        // Create the image for the arrow (to expand and collapse the hidden trees)
        var $arrow = jQuery("<div class=\"arrow\"></div>");

        var $cb = jQuery(this).children(":checkbox");

        // If the li has children:
        if (jQuery(this).is(":has(ul)")) {
            // If the subtree is not visible, make the arrow collapsed. Otherwise expanded.
            if (jQuery(this).children("ul").is(":hidden")) $arrow.addClass("collapsed");
            else $arrow.addClass("expanded");

            // When you click the image, toggle the child list
            $arrow.click(function() {
                jQuery(this).siblings("ul").toggle();

                // Swap the classes: expanded <-> collapsed and fire the onExpand/onCollapse events
                if (jQuery(this).hasClass("collapsed")) {
                    jQuery(this)
                        .addClass("expanded")
                        .removeClass("collapsed")
                    ;
                    if (settings.onExpand) settings.onExpand(jQuery(this).parent());
                }
                else {
                    jQuery(this)
                        .addClass("collapsed")
                        .removeClass("expanded")
                    ;
                    if (settings.onCollapse) settings.onCollapse(jQuery(this).parent());
                }
            });
        }

        // When you click the checkbox, it should do the checking/unchecking
        if ($cb.attr("disabled"))
        {
            $checkbox.addClass("disabled");
        }
        else
        {
        $checkbox.click(function() {
            // Toggle the checked class)
            jQuery(this)
                .toggleClass("checked")
                // if it's half checked, its now either checked or unchecked
                .removeClass("half_checked")
            ;

            // Check/uncheck children depending on our status.
            if (jQuery(this).hasClass("checked")) {
                    // Set the (real, hidden) checkbox to checked
                    jQuery(this).siblings(":checkbox").attr("checked", "checked");
                // Fire the check callback for this parent
                if (settings.onCheck) settings.onCheck(jQuery(this).parent());

                // Go to the sibling list, and find all unchecked checkbox images
                jQuery(this).siblings("ul").find(".checkbox").not(".checked").not(".disabled")
                    // Set as fully checked:
                    .removeClass("half_checked")
                    .addClass("checked")

                    // For each one, fire the onCheck callback
                    .each(function() {
                        if (settings.onCheck) settings.onCheck(jQuery(this).parent());
                    })

                    // For each one, check the checkbox (actual input element)
                    .siblings(":checkbox")
                        .attr("checked", "checked")
                ;
            }

            // If Unchecked:
            else {
                    // Set the (real, hidden) checkbox to unchecked.
                    jQuery(this).siblings(":checkbox").attr("checked", "");

                // Fire the uncheck callback for this parent
                if (settings.onUnCheck) settings.onUnCheck(jQuery(this).parent());

                // Go to the sibling list and find all checked checkbox images
                jQuery(this).siblings("ul").find(".checkbox").filter(".checked").not(".disabled")
                    // Set as fully unchecked
                    .removeClass("half_checked")
                    .removeClass("checked")

                    // For each one fire the onUnCheck callback
                    .each(function() {
                        if (settings.onUnCheck) settings.onUnCheck(jQuery(this).parent());
                    })

                    // For each one, uncheck the checkbox (the actual input element)
                    .siblings(":checkbox")
                        .attr("checked", "")
                ;
            }

            // Tell our parent checkbox that we've changed (they might need to change their state)
            jQuery(this).parents("ul").siblings(":checkbox").change();
        });
        }

        // Add the appropriate classes to the new checkbox image based on the old one:
        if (jQuery(this).children(".checkbox").hasClass("checked"))
            $checkbox.addClass("checked");
        else if (jQuery(this).children(":checkbox").attr("checked")) {
            $checkbox.addClass("checked");
            jQuery(this).parents("ul").siblings(":checkbox").change()
        }
        else if (jQuery(this).children(".checkbox").hasClass("half_checked"))
            $checkbox.addClass("half_checked");

        // Remove any existing arrows or checkboxes or labels
        jQuery(this).children(".arrow").remove();
        jQuery(this).children(".checkbox").remove();
        //jQuery(this).children("label").remove();

        // Prepend the new arrow, label, and checkbox images to the front of the LI
        jQuery(this)
            //.prepend($label)
            .prepend($checkbox)
            .prepend($arrow)
        ;
    })

    .find("label")
        // Clicking the labels should do the labelAction (either expand or check)
        .click(function() {
            var action = settings.labelAction;
            switch(settings.labelAction) {
                case "expand":
                    jQuery(this).siblings(".arrow").click();
                    break;
                case "check":
                    jQuery(this).siblings(".checkbox").click();
                    break;
            }
        })

        // Add a hover class to the labels when hovering
        .hover(
            function() { 
                jQuery(this).addClass("hover");
                if (settings.onLabelHoverOver)  settings.onLabelHoverOver(jQuery(this).parent());
            },
            function() {
                jQuery(this).removeClass("hover");
                if (settings.onLabelHoverOut)                  settings.onLabelHoverOut(jQuery(this).parent());
            }
        )
    .end()
;

return $tree;
};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:10:19.280

~~您`$("ul.tree")`在 DOM 完全加载之前正在执行，jQuery 看不到它。我相信将那段代码`onload`移动到事件中，或者移动到 DOM 的底部，它会起作用。~~

好的...我相信我现在明白了。

```
$('.check-all').live('change', function(){
    $('.options').find('input[class=def]').attr('checked', true);
    //This line should select the ones marked with the class ".def"
    $('ul.tree').find('input.def').siblings("div.checkbox").click();
    return false;
}); 
```

还值得注意的是，我从[jquery-checktree](http://code.google.com/p/jquery-checktree/)重新下载了插件。

# android - 如何将 Android 上的视频录制到 Stream

> ID：14598299
> 
> 赞同：13
> 
> 时间：2013-01-30T06:55:33.373
> 
> 标签：android, stream, media, mediarecorder

Android [MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html)允许将视频保存到文件（文件或套接字）：

```
setOutputFile(FileDescriptor fd);
setOutputFile(String path) 
```

如何将视频数据保存到 OutputStream？它将用于流式视频录制。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T08:14:01.830

您可以使用[`ParcelFileDescriptor.fromSocket()`](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html#fromSocket%28java.net.Socket%29)：

```
String hostname = "example.com";
int port = 1234;

Socket socket = new Socket(InetAddress.getByName(hostname), port);

ParcelFileDescriptor pfd = ParcelFileDescriptor.fromSocket(socket);

MediaRecorder recorder = new MediaRecorder();
recorder.setOutputFile(pfd.getFileDescriptor());
recorder.prepare();
recorder.start(); 
```

如果您更喜欢 UDP，请[`ParcelFileDescriptor.fromDatagramSocket()`](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html#fromDatagramSocket%28java.net.DatagramSocket%29)改用。

[信用](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system)到期的信用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T07:56:23.610

[使用](https://stackoverflow.com/questions/7516018/android-localserversocket)特定于 Android 的[LocalServerSocket](http://developer.android.com/reference/android/net/LocalServerSocket.html)似乎是将视频数据作为流获取的唯一可能方法。简而言之，您必须：

1.  创建 LocalServerSocket 实例
2.  使用文件描述符 (mediaRecorder.setOutputFile(FileDescriptor fd);) 将其设置为 MediaRecorder 实例的输出文件
3.  接受连接
4.  在循环中的单独线程中从中读取字节（如从 InputStream 中）

另一个想法？

# javascript - 如何检查 SharePoint 2010 中的 Javascript 是否启用了评级设置？

> ID：14598301
> 
> 赞同：0
> 
> 时间：2013-01-30T06:55:34.730
> 
> 标签：javascript, sharepoint-2010, rating

我创建了自定义功能区按钮，我想检查评级设置是否启用。如果评级设置为启用，则启用功能区按钮，否则禁用功能区按钮。

这是获取当前列表的代码，但我没有看到任何检查评级设置的功能：

```
 var clientContext = new SP.ClientContext();
   var oWebsite = clientContext.get_web();
   var collList = oWebsite.get_lists();

   var listId = SP.ListOperation.Selection.getSelectedList();
   var sdlist = oWebsite.get_lists().getById(listId);

   clientContext.load(sdlist);

   function CheckRatingSettings(){
       var fields = sdlist.get_fields();
       //What next to check Ratting Setting, I can't find any function to get that
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:08:07.647

我认为您无法从客户端 API 查询。您最好的选择应该是实现一个 WCF 服务，在服务器上检查该服务，然后通过 javascript 查询该服务。

检查[CKS 开发人员工具](http://visualstudiogallery.msdn.microsoft.com/ee876627-962c-4c35-a4a6-a4d89bfb61dc)，他们有一个模板供 Visual Studio 在 Sharepoint 上创建 WCF 服务。

另一种选择是检查列表中是否存在“AverageRating”字段，当您启用评级时，此字段会添加到列表中。请记住，该字段可能存在，但评级可能会被禁用。

这没有经过测试（假设您的代码获得了正确的 listid，类似于以下内容：

```
var fields = slList.get_fields();
clientContext.load(fields );

function CheckRatingSettings(fields){
       for (var i = 0; i < fields.length; i++) {
           if (fields[i].internalName == "AverageRating") {
               return true;
           }
        }
        return false;
} 
```

# ruby-on-rails - 在 Ruby 中，如何从 CSV 文件中读取数据列？

> ID：14598302
> 
> 赞同：20
> 
> 时间：2013-01-30T06:55:48.667
> 
> 标签：ruby-on-rails, ruby, csv

我知道它是如何按行完成的

```
CSV.foreach(filename.csv) do |row|
  puts "#{row}"
end 
```

但是我完全迷失了专栏？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-08T14:08:24.237

测试.csv：

```
name,surname,no1,no2,no3,date
Raja,Palit,77489,24,84,12/12/2011
Mathew,bargur,77559,25,88,01/12/2011
harin,Roy,77787,24,80,12/12/2012
Soumi,paul,77251,24,88,11/11/2012 
```

按列访问：

```
require 'csv'
csv = CSV.read('test.csv', :headers=>true)
p csv['name'] #=>["Raja", "Mathew", "harin", "Soumi"]

#or even:
t = CSV.table('test.csv')
p t[:no1] #=> [77489, 77559, 77787, 77251] 
```

请注意，在最后一种情况下，cols 通过其符号化名称访问，并且尽可能将字符串转换为数字。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-08T13:10:37.353

这是解决方案的家伙：

```
CSV.foreach(filename).map { |row| row[0] } 
```

很抱歉这么晚才以正确的格式发布它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-30T07:05:35.730

**转置**您的 CSV 文件。通过这样做，您的行转换为列，反之亦然。下面是一个简单的转置示例。

```
 irb(main):001:0> [["1", "2", "3"], ["4", "5", "6"], ["7", "8", "9"]].transpose
    => [["1", "4", "7"], ["2", "5", "8"], ["3", "6", "9"]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T20:39:34.087

无聊所以决定在这里做一个替代解决方案。仅在第一行具有最大列数时才有效（此处）

```
columns = {}
rows.first.each_with_index do |col, i|
  columns[i] = []
end
rows.each do |row|
  row.each_with_index do |cell, i|
    columns[i] = columns[i] + [cell]
  end
end 
```

现在您应该能够通过索引访问每一列

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-07T10:19:35.567

'by_col' 方法根据您的列选择为您提供输出。

测试CSV：

```
name,surname,no1,no2,no3,date
Raja,Palit,77489,24,84,12/12/2011
Mathew,bargur,77559,25,88,01/12/2011
harin,Roy,77787,24,80,12/12/2012
Soumi,paul,77251,24,88,11/11/2012 
```

代码：

```
CSV.parse(File.open('test_csv'), headers: true).by_col['surname'] 
```

输出：

```
['Palit','bargur','Roy','paul'] 
```

# android - Android：使用 XML 自定义 EditText 布局

> ID：14598308
> 
> 赞同：12
> 
> 时间：2013-01-30T06:56:11.610
> 
> 标签：android, xml, layout, android-edittext

我正在尝试自定义 EditText 的外观，但我没有这样做...我希望将文本字段设置为圆形边框，左侧有一个图形图标（因此该图标也将位于边框内，旁边编辑文本）。有人可以解释一下我如何做到这一点吗？我需要将边框绘制为形状还是有一些属性？非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T07:05:47.507

像这样试试

```
 <EditText
                    android:id="@+id/rLastName"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/editbox"
                    android:hint="@string/lname"
                    android:padding="5dip"
                    android:singleLine="true"
                    android:textColor="#999999"
                     android:textSize="14dip"                          
                    android:drawableLeft="@drawable/ic_launcher" /> 
```

Drawable left 图标将设置在左侧

![在此处输入图像描述](../Images/b69df827e649ef2987c0169e2eb923f7.png)

你可以试试这个链接圆角[链接](https://stackoverflow.com/questions/3646415/how-to-create-edittext-with-rounded-corners)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:00:54.687

[如何创建带有圆角的 EditText？](https://stackoverflow.com/questions/3646415/how-to-create-edittext-with-rounded-corners)
和
[http://alinberce.wordpress.com/2012/02/20/android-edittext-with-custom-font-and-clear-button/](http://alinberce.wordpress.com/2012/02/20/android-edittext-with-custom-font-and-clear-button/)

# php - 如何在另一个php标签中使用一个php标签中定义的变量？

> ID：14598311
> 
> 赞同：0
> 
> 时间：2013-01-30T06:56:21.617
> 
> 标签：php, javascript

我写了一个 php 页面，里面有两个 php 标签和一个 script 标签。

```
<?php
$value = $_GET['hash'];
?>
<script>
function execute(){
<?php
$readfile = file($value);
for ($k=0;$k<=count($readfile)-1;$k++){
$cmd = $readfile[$k];
echo $cmd;}
?>
}
</script> 
```

我想在另一个 php 标签中使用 $value（就像上面一样，它有我要打开的文件），但我做不到。变量的范围是否仅限于一个 php 标签？如果是，我该如何解决这个问题请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:05:07.063

您的代码完美运行。一个 PHP 标记中的变量可以从所有其他标记访问，除非您在 PHP 函数中定义它们。

您在屏幕上看不到回声的原因是回声打印到 Javascript 函数。

如果您查看生成页面的来源，文件内容将在那里。

尝试这个：

```
function execute(){
    <?php
    $readfile = file($value);
    for ($k=0;$k<=count($readfile)-1;$k++){
        $cmd = $readfile[$k];
    ?>
        alert( <?php echo $cmd; ?> );
    <?php
    }
    ?>
}

execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:02:55.753

如果 $value 是一个 get 那么你不需要将它作为一个文件来访问，它应该只是一个短字符串。

就在第 7 行上方（带有 $readfile = file... 的那一行输入：

```
echo "alert(The hash value is: ".$value.")"; 
```

这将显示警报（因为它在脚本标签中）ps 你应该在你的开始标签中

# php - .htaccess 文件重写规则检查

> ID：14598312
> 
> 赞同：1
> 
> 时间：2013-01-30T06:56:21.757
> 
> 标签：php, .htaccess, codeigniter, open-source

我想重写我的 apache mod_rewrite 模式。我用来做以下事情：

```
RewriteEngine on
RewriteRule /^([^A-Z0-9a-z]+)\.html /search.php?search_id=$1&%{QUERY_STRING} 
```

使用上述规则，我无法得到我所期望的。谁能告诉我的代码有什么问题以及如何解决它。

已编辑。我的要求很简单。如果我输入 /1.html 到 /search.php?search_id=1，我想重定向

而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:15:00.047

这应该有效：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} !search\.php
RewriteCond %{REQUEST_URI}  ^/([0-9]+)\.html [NC]
RewriteRule  .*    search.php?search_id=%1    [L,QSA] 
```

静默地图

`http://example.com/FileID.html`

至：

`http://example.com/search.php?search_id=FileID`

`search.php`被认为是固定字符串，而`FileID`可以是任何数字。

对于永久重定向，替换`[L,QSA]`为`[R=301,L,QSA]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:58:27.603

您的规则中有错字，请尝试以下操作：

```
RewriteEngine on
RewriteRule ^/([^A-Z0-9a-z]+)\.html /search.php?search_id=$1&%{QUERY_STRING} 
```

顺便说一句，您也可以尝试使用它：

```
RewriteRule ^/?([^A-Z0-9a-z]+)\.html /search.php?search_id=$1&%{QUERY_STRING} 
```

这使得前导斜杠是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:29:43.870

你是在域名后面输入 1.html 吗？也就是说，如果您的域是 example.com，那么您输入 example.com/1.html？如果你正在这样做，那么不要在 .htaccess 文件中的正则表达式之前使用 /。

尝试将以下内容添加到您的主 .htaccess 文件中。它位于包含您网站主页的目录中：

```
RewriteEngine On
#RewriteBase /
RewriteRule ^([A-Za-z0-9]+)\.html/?$ /search.php?search_id=$1 [NC, L] 
```

我使用 RewriteBase 作为评论。如果您使用共享服务器，请将其保留为注释或删除该行。

编辑： [NC, L] 用来说明，规则的 NC 标志不需要区分大小写（无大小写），如果匹配，则 L 标志用于停止。

# c# - 在 MVC3 中编辑时避免验证

> ID：14598314
> 
> 赞同：0
> 
> 时间：2013-01-30T06:56:31.463
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我正在使用下面给定的类模型（使用 C# 的 MVC 3）来注册员工。新注册时使用密码/确认密码字段。当我编辑现有员工时，我不想再次更新/填写他们的密码/确认密码，但由于给定的验证（密码和确认密码），它不允许我更新员工的其余信息。

```
 public class EmployeeModel
    {   
    ....
    ....
    [Required(ErrorMessage = "Password is must")]
    [Display(Name = "Password")]
    [MaxLength(20, ErrorMessage = "Password can be maximum 20 chars long")]
    [StringLength(20, ErrorMessage = "Password can be maximum 20 chars long")]
    [MinLength(5, ErrorMessage = "Not a valid password, must be atleast 5 chars long")]
    public string Password { get; set; }

    [Compare("Password", ErrorMessage = "Password and Confirm password do not match")]
    public string ConfirmPassword { get; set; }
    ....
    ....
    } 
```

我的问题是：我是否应该创建另一个模型类来编辑员工（这个新模型将没有密码/确认密码字段）？但我发现它有问题，因为这种情况也可能出现在其他一些模块中，我不想最终为每个模块有两个模型类。

或者我应该在编辑时加载密码/确认密码字段但对用户隐藏它们吗？以上步骤有意义吗？还有哪些可能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:07:57.583

无需创建另一个模型类。

您可以使用现有的模型类，如果您不希望任何字段包含在验证中，您可以将它们从 ModelState 中删除。

你应该这样做：

```
public ActionResult Edit(EmployeeModel empmodel)
{

        ModelState.Remove("Password");
        ModelState.Remove("ConfirmPassword");
        if (ModelState.IsValid)
        {
          //do something
        }

} 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:59:19.410

如果您的编辑器视图需要不同的字段和验证，那么最好创建一个合适的视图模型来编辑视图。那个MVC很享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T06:59:30.900

有[viewmodal](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)的概念。为每个视图创建单独的模态以避免这种情况

# regex - 匹配xml中的多行匹配模式

> ID：14598317
> 
> 赞同：0
> 
> 时间：2013-01-30T06:56:51.943
> 
> 标签：regex, sublimetext2

如何匹配以下模式：

```
<aaa class = "dog">
   <bbb id = "one"/>
</aaa>
<aaa class = "dog">
   <bbb id = "two"/>
</aaa>
<aaa class = "dog">
   <bbb id = "three"/>
</aaa> 
```

我想：

```
<aaa class = "dog">
   <bbb id = "three"/>
</aaa> 
```

我用：

```
^(.)*dog(.|\r|\n|\t)*(three) 
```

但它匹配：

```
<aaa class = "dog">
   <bbb id = "one"/>
</aaa>
<aaa class = "dog">
   <bbb id = "two"/>
</aaa>
<aaa class = "dog">
   <bbb id = "three 
```

我应该如何编辑正则表达式以匹配我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:52:33.377

如果要匹配提到的确切三行，可以使用以下正则表达式：

```
<aaa class = "dog">[\r\n\t\s]*<bbb id = "three"/>[\r\n\t\s]*</aaa> 
```

# c# - C# 中使用的 AForge.Video.FFMPEG

> ID：14598323
> 
> 赞同：7
> 
> 时间：2013-01-30T06:57:11.890
> 
> 标签：c#, ffmpeg, aforge

我使用 Visual C# 2008 并想从 bmp 序列写入 AVI 文件。

我找到了 AForge.Video.VWF 但它仅适用于“vmw3”或“DIB”编解码器，我想使用 AForge.Video.FFMPEG 但它出错了。

例如我只是编码：

```
using System;
using System.Collections.Generic;

using System.Linq;
using System.Text;
using AForge.Video.FFMPEG;

namespace ConsoleApplication4
{
    class Program
    {
        static void Main(string[] args)
        {
            VideoFileWriter vfw = new VideoFileWriter();
        }
    }
} 
```

但我得到了这个`filenotfoundexception`

```
{"The specified module could not be found. (Exception from HRESULT: 0x8007007E)":null} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T20:39:24.643

为了正确使用 AForge.Video.FFMPEG，您必须确保将 FFmpeg dll 包含到您的输出文件夹中。最简单的方法是将它们添加到您的 VS 项目中，继续它们的属性并将复制到输出目录选项设置为“始终”。

AForge 使用的 FFmpeg 二进制文件可以在 AForge.NET 的外部文件夹中找到，通常在*C:\Program Files (x86)\AForge.NET\Framework\Externals\ffmpeg\bin*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:47:32.223

这是因为这个 AForge.Video.FFMPEG.DLL 依赖于另一个 dll。将所有 dll 复制到输出文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T20:14:58.913

不确定这是否仍然相关，但下载 Accord.Video.FFMPEG 会为您解决这个问题，只需记住明确构建到 x86

使用 Accord.Video.FFMPEG；

# c++ - 字符串编码 VB6/C++ dll

> ID：14598327
> 
> 赞同：0
> 
> 时间：2013-01-30T06:57:38.417
> 
> 标签：c++, vb6

我的程序使用的 2 个字符串中的某些字符有问题。

字符串 #1 使用从 3rd 方应用程序获取数据的 VB 代码填充。字符串 #2 从同一个第 3 方应用程序中获取类似数据，但它使用 C++ dll 获取数据并将其发送到 VB。

数据中有一些奇怪的符号。

我不太了解编码和不同的字符集，但我会尽力解释它。

我将使用“Т”作为我的示例角色。

“Т”（注意这不是正常的大写字母 t）它是 unicode 十进制值 1058 [http://www.unicodemap.org/details/0x0422/index.html](http://www.unicodemap.org/details/0x0422/index.html)

当此字符在运行时出现在 String #1 中时，它显示为“？”，我相信这正是 VB6 显示一些 unicode 字符的方式。当我在字符上使用 AscW 时，它返回正确的值 1058。

当我将字符串输出到文本文件时，它显示为“？”。

C++ DLL 中字符串 #2 中的相同字符显示为 2 个字符“Ð¢”

当我将该字符串输出到文本文件时，该字符正确显示为“Т”。

我只是出于测试目的将内容输出到文本文件。我只需要在运行时对 2 个字符串进行编码/显示相同。

知道这里发生了什么吗？有什么方法可以让奇怪的字符在两个字符串中都显示相同？

谢谢

编辑：C++ dll 也是多字符集，并以 BSTR 字符串发送数据

C++ DLL 中的代码

allChat 是一个 CString

```
BSTR Message;
int len = allChat.GetLength();
Message = SysAllocStringByteLen ((LPCTSTR)allChat,len+1); 
```

消息返回到 VB 应用程序.. 之后字符串没有任何反应。

字符串 #1 只是一个普通的 VB 字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:41:28.530

从西里尔字母“T”变为“Ð¢”的方式，您将字符串作为 UTF8 编码字符串（我通过切换编码使用 Notepad++ 验证了这一点）。在将其发送到您的 VB 应用程序之前，您需要将其转换为 Unicode。请注意，您的 VB 应用程序必须是 Unicode，而不是 ASCII。

您可以使用此函数将 UTF8 转换为 std::wstring：

```
std::wstring utf8to16( const char* src )
{
    vector<wchar_t> buffer;
    buffer.resize(MultiByteToWideChar(CP_UTF8, 0, src, -1, 0, 0));
    MultiByteToWideChar(CP_UTF8, 0, src, -1, &buffer[0], buffer.size());
    return &buffer[0];
} 
```

# html - 粘页脚和内容滚动 WP

> ID：14598329
> 
> 赞同：0
> 
> 时间：2013-01-30T06:57:48.393
> 
> 标签：html, css, overflow, footer, sticky-footer

我们在[http://cmagics.eu/digitalmagazinepublishing](http://cmagics.eu/digitalmagazinepublishing)有一个使用 responsive2 主题的 Wordpress 网站。我们正在尝试获得一个似乎可以正常工作的粘性页眉，但是我们也在尝试获得一个粘性页脚，它只是粘在页面底部并像[http://ryanfait.com/sticky-上的那样工作页脚/](http://ryanfait.com/sticky-footer/)

由于 responsive2 主题略显神秘，我该怎么办？

**1** . 使用正确的粘贴方法将页脚保持在页面底部不定位：固定

**2** . 当页面上有足够的空间时，停止滚动不必要的主要内容？

html源码：

查看源：[http ://cmagics.eu/digitalmagazinepublishing/](http://cmagics.eu/digitalmagazinepublishing/)

css

```
#footer {
    position: relative;
    clear:both;
    font-size: 11px;
    line-height: 1.5em;
    background: rgb(54, 53, 53);
    color: #fff;
    border-top: 2px solid #444;
    text-align:center;
    margin-top: -324px; **just a hack to make the footer appear at the bottom incorrectly**
    margin-bottom: -25px;
    height: 162px;
    font-family: Roboto Regular;
}

#site-container {
    width: 900px;
    margin: 130px auto 0 auto;
    overflow:auto;
    padding-bottom:162px;

}

.hfeed {
min-height:100%;
    height:100%;
    height: auto;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T21:42:24.530

[这是我认为非常干净的解决方案](https://stackoverflow.com/a/20114486/618649)。对所有主要内容元素（页眉、文章、页脚）使用绝对定位。如果您需要针对不同的屏幕宽度（响应式设计）更改页眉或页脚高度，请使用 @media 查询以不同的分辨率创建中断，并告诉您的主要内容区域隐藏溢出。您也可以通过这种方式在主要内容区域内使用浮动的相对布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:10:44.940

这是页脚CSS：-

```
#footer {
         position: fixed;
         font-size: 11px;
         line-height: 1.5em;
         background: rgb(54, 53, 53);
         color: #fff;
         border-top: 2px solid #444;
         text-align: center;
         margin-top: -324px;
         margin-bottom: -25px;
         height: 162px;
         font-family: Roboto Regular;
         bottom: 0;
        width: 100%;
      } 
```

# php - PHP 检索结果

> ID：14598334
> 
> 赞同：0
> 
> 时间：2013-01-30T06:58:03.253
> 
> 标签：php

我在检索结果时遇到了小麻烦，希望有人可以帮助我。

我有一个名为 $incategory 的字段，它是一个基于逗号的字符串，我想要做的是将其分解为一个可用于检索结果的数组，如下所示（希望这是有道理的）：

```
<?php 

$showlist = $row_listelements['incategory']; 

// ** e.g. $incategory = 1,3,5, 
// ** What I want to do is look at table 'category' 
// ** and retrieve results with an 'id' of either 1, 3 or 5

// ** Display Results
mysql_select_db($database_db, $db);
$query_display = "SELECT * FROM category WHERE id = ".$showlist." ORDER BY name ASC";
$display = mysql_query($query_display, $db) or die(mysql_error());
$row_display = mysql_fetch_assoc($display);
$totalRows_display = mysql_num_rows($display);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:05:28.867

你可以像这样直接使用 SQL 的 IN 关键字。

```
query_display = "SELECT * FROM category WHERE id IN (".$showlist.") ORDER BY name ASC"; 
```

另一个提示是停止使用 MYSQL_QUERY，因为它在 PHP 5.3 中已被弃用

编辑：如果 $showlist = '1,3,5,' 您将需要从字符串中删除最后一个逗号以使其在查询中可用。只需使用此查询

```
query_display = "SELECT * FROM category WHERE id IN ('".str_replace(",", "','", substr($showlist, -1))."') ORDER BY name ASC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:16:38.563

首先，您将`$incategory`字符串分解为包含所有类别编号的数组。例如：

```
$incategory = explode(",", $incategory); 
```

然后你只需要执行这个查询：

```
$query_display = "SELECT * FROM category WHERE id = "
               . $incategory[$i] . " ORDER BY name ASC"; 
```

`$i`应该事先定义（通常使用循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:01:25.383

使用爆炸功能并`,`用作分隔符。

参考这里[http://www.w3schools.com/php/func_string_explode.asp](http://www.w3schools.com/php/func_string_explode.asp)

希望这可以帮助。

# php - 如何读取 JSON 返回的数组

> ID：14598337
> 
> 赞同：0
> 
> 时间：2013-01-30T06:58:14.243
> 
> 标签：php, arrays, json

我如何读取这个数组？

```
stdClass Object ( 
  [0] => stdClass Object ( 
    [role_id] => 1 
    [username] => me@gmail.com 
    [date_time] => 2013-01-13 14:01:00
  ) 
  [status] => success 
) 
```

我可以将状态读取为 $objectname->status，但我无法读取 $objectname->username。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:15:47.187

那是因为`username`是 的一个属性`$objectname->{"0"}`，它也是一个对象。

试试这个：

```
$json='{"0":{"role_id":1,"username":"me@gmail.com","date_time":"2013-01-13 14:01:00"},"status":"success"}';
$obj=json_decode($json);
var_dump($obj);
var_dump($obj->{"0"}->username); 
```

[活生生的例子](http://3v4l.org/fYCJ7)

# file - 如何使用powershell检查文件夹中是否存在特定的文件扩展名？

> ID：14598338
> 
> 赞同：7
> 
> 时间：2013-01-30T06:58:22.557
> 
> 标签：file, powershell, directory, exists

我有一个由许多文件夹和子文件夹组成的根目录。我需要检查文件夹或子文件夹中是否存在像 *.sln 或 *.designer.vb 这样的特定文件，并将结果输出到文本文件中。

例如：

```
$root = "C:\Root\"
$FileType = ".sln",".designer.vb" 
```

文本文件的结果有点像下面：

```
.sln ---> 2 files
.sln files path ----> 
c:\Root\Application1\subfolder1\Test.sln
c:\Root\Application2\subfolder1\Test2.sln 
```

任何帮助将不胜感激！

问候， 阿希什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T07:40:30.363

尝试这个：

```
function Get-ExtensionCount {
    param(
        $Root = "C:\Root\",
        $FileType = @(".sln", ".designer.vb"),
        $Outfile = "C:\Root\rootext.txt"
    )

    $output = @()

    Foreach ($type in $FileType) {
        $files = Get-ChildItem $Root -Filter *$type -Recurse | ? { !$_.PSIsContainer }
        $output += "$type ---> $($files.Count) files"
        foreach ($file in $files) {
            $output += $file.FullName
        }
    }

    $output | Set-Content $Outfile
} 
```

我把它变成了一个函数，你的值作为默认参数值。通过使用调用它

```
Get-ExtensionCount    #for default values 
```

或者

```
Get-ExtensionCount -Root "d:\test" -FileType ".txt", ".bmp" -Outfile "D:\output.txt" 
```

输出保存到文件 ex：

```
.txt ---> 3 files
D:\Test\as.txt
D:\Test\ddddd.txt
D:\Test\sss.txt
.bmp ---> 2 files
D:\Test\dsadsa.bmp
D:\Test\New Bitmap Image.bmp 
```

要在开始时获取所有文件计数，请尝试：

```
function Get-ExtensionCount {
    param(
        $Root = "C:\Root\",
        $FileType = @(".sln", ".designer.vb"),
        $Outfile = "C:\Root\rootext.txt"
    )
    #Filecount per type
    $header = @()
    #All the filepaths    
    $filelist = @()

    Foreach ($type in $FileType) {
        $files = Get-ChildItem $Root -Filter *$type -Recurse | ? { !$_.PSIsContainer }
        $header += "$type ---> $($files.Count) files"
        foreach ($file in $files) {
            $filelist += $file.FullName
        }
    }
    #Collect to single output
    $output = @($header, $filelist)    
    $output | Set-Content $Outfile
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-09-22T16:14:22.693

这是一个确定 $OutputPath 目录中是否存在至少一个扩展名为 .txt 或 .ps1 的文件的单行代码：

```
(Get-ChildItem -Path $OutputPath -force | Where-Object Extension -in ('.txt','.ps1') | Measure-Object).Count 
```

**解释**：该命令告诉您指定目录中与任何列出的扩展名匹配的文件数。您可以追加`-ne 0`到末尾，返回 true 或 false 以在**if**块中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:42:25.810

这将在目录`$root`及其子目录中搜索类型为 的文件`$FileType`，包括隐藏文件和排除目录：

```
$root = "C:\Root\";
$FileType = "*.sln", "*.designer.vb";
$results = Get-ChildItem -Path $root -Force -Recurse `
    | Where-Object {
        if ($_ -isnot [System.IO.DirectoryInfo])
        {
            foreach ($pattern in $FileType)
            {
                if ($_.Name -like $pattern)
                {
                    return $true;
                }
            }
        }

        return $false;
    } 
```

请注意，我已将字符串修改`$FileType`为通配符模式。然后按扩展名对文件进行分组：

```
$resultGroups = $results | Group-Object -Property 'Extension'; 
```

然后遍历每个组并打印文件计数和路径：

```
foreach ($group in $resultGroups)
{
    # $group.Count: The number of files with that extension
    # $group.Group: A collection of FileInfo objects
    #  $group.Name: The file extension with leading period
    Write-Host "$($group.Name) ---> $($group.Count) files";
    Write-Host "$($group.Name) files path ---->";

    foreach ($file in $group.Group)
    {
        Write-Host $file.FullName;
    }
} 
```

要将结果写入文件而不是控制台，请使用[`Out-File`cmdlet](http://technet.microsoft.com/library/hh849882.aspx)而不是[`Write-Host`cmdlet](http://technet.microsoft.com/library/hh849877.aspx)。

# c# - 仅使用 parentId 对层次结构数据进行有效排序

> ID：14598346
> 
> 赞同：1
> 
> 时间：2013-01-30T06:58:48.487
> 
> 标签：c#, hierarchical-data

**问题**

订购一组平坦无序节点的最快方法是什么，以便始终在其子级之前列出父级。我当前的解决方案使用队列以广度优先方式迭代树。但是我一直想知道是否有更好/更有效的方法。

笔记：

*   我无法预先计算任何值
*   Id 和 ParentId 也可以是 Guid（即使整数我不能保证顺序 id）

**Linq 垫码**

```
void Main()
{
    var nodes = new Node[] {
        new Node { Id = 7, ParentId = 3 },
        new Node { Id = 4, ParentId = 2 },
        new Node { Id = 1, ParentId = 0 },
        new Node { Id = 2, ParentId = 1 },
        new Node { Id = 3, ParentId = 1 },

        new Node { Id = 5, ParentId = 2 },
        new Node { Id = 6, ParentId = 3 },
        new Node { Id = 8, ParentId = 0 },
    };

    SortHierarchy(nodes).Dump();
}

IEnumerable<Node> SortHierarchy(IEnumerable<Node> list)
{
    // hashtable lookup that allows us to grab references to the parent containers, based on id
    var lookup = new Dictionary<int, List<Node>>();

    Queue<Node> nodeSet = new Queue<Node>();
    List<Node> children;

    foreach (Node item in list) {
        if (item.ParentId == 0) { // has no parent
            nodeSet.Enqueue(item); // This will add all root nodes in the forest
        } else {
            if (lookup.TryGetValue(item.ParentId, out children)) {
                // add to the parent's child list
                children.Add(item);
            } else {
                // no parent added yet
                lookup.Add(item.ParentId, new List<Node> { item });
            }
        }
    }

    while (nodeSet.Any()) {
        var node = nodeSet.Dequeue();
        if (lookup.TryGetValue(node.Id, out children)) {
            foreach (var child in children) {
                nodeSet.Enqueue(child);
            }
        }
        yield return node;
    }
}

private class Node {
    public int Id { get; set; }
    public int ParentId { get; set; }
    public string Name { get; set; }
} 
```

**研究**

我确实找到了这个，但它并不是我所追求的（代码也不起作用）

[从父/子的平面列表构建层次结构对象](https://stackoverflow.com/questions/319108/building-hierarchy-objects-from-flat-list-of-parent-child)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T09:08:34.440

此代码给出相同的 dump() 结果，首先使用 parentid 对列表进行排序：

```
IEnumerable<Node> SortHierarchy2(IEnumerable<Node> list)
{
    return list.OrderBy(l => l.ParentId);
} 
```

只要您的孩子 ID 是 < 他们的父母 ID，这将起作用。

# three.js - 使用three.min.js（修订版55）更新项目时出现错误

> ID：14598347
> 
> 赞同：0
> 
> 时间：2013-01-30T06:58:50.633
> 
> 标签：three.js

我有一段时间没有更新我的项目（它基于three.js库），当我最近更新时（使用three.min.js：修订版55）我收到以下错误：

通过以下行，我得到“未捕获的类型错误：未定义不是函数”

```
controls = new THREE.TrackballControls(camera, renderer.domElement); 
```

和“未捕获的类型错误：无法读取未定义的属性 '0'”：

```
axe_b.geometry.materials[0].opacity = opacity; 
```

我应该在这些行中更改什么以使其运行？

使用之前版本的three.js，上面的代码很好。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:36:06.843

有关升级到当前版本的帮助，请参阅[迁移 Wiki](https://github.com/mrdoob/three.js/wiki/Migration)。

`TrackballControls.js`现在是示例的一部分，必须明确添加。请参阅three.js 示例。

`Materials`不再属于`Geometry`.

三.js r.55

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:40:19.450

THREE.TrackballControls 不再是three.js 或three.min.js 的一部分。它现在位于 example/js/controls/TrackballControls.js 中，因此您需要在 HTML 的头部添加与此类似的内容。

```
<script type="text/javascript" src="https://raw.github.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script> 
```

材质位于网格中的一个名为 material 的变量中，因此您的材质现在可能位于

```
axe_b.material.materials[0].opacity = opacity; 
```

或者

```
axe_b.material.opacity = opacity; 
```

取决于您是为网格定义了材料列表还是仅定义了一种材料。

# android - 如何从光标中选择指定的行？

> ID：14598350
> 
> 赞同：2
> 
> 时间：2013-01-30T06:59:02.827
> 
> 标签：android, cursor, android-contentprovider

我正在使用 Android，我的目的是过滤掉我的光标。游标来自数据库，它有一些行。现在我想通过使用 id 列从游标中跳过一些行，并将剩余的行作为游标传递给 listview 适配器。

我的代码就像检查行 id 是否等于 filtercursor 行 id 然后必须从当前光标中跳过该行。

编码：

```
 Cursor c = getActivity().getContentResolver().query(
            Provider.CONTENT_URI_DINERS, null,
            DinerColumns.COL_RESERVATION_FROM , null, null);

   c.moveToFirst();
    do{
        String dinerId = c.getString(c.getColumnIndex(DinerColumns.COL_DIN_ID));
        if(isSeatedDiner(dinerId)){

        }

    }while(c.moveToNext());

   private boolean isSeatedDiner(String dinerID){
        Cursor cursor = getActivity().getContentResolver().query(
                    Provider.CONTENT_URI_SEATED,
                    new String[] {"COUNT(*)"  },SeatedDinerColumns.COL_DINE_ID +"="+dinerID , null,
                    null);

        if(cursor.moveToFirst()){
                do
                {
                    String newId =  cursor.getString(cursor.getColumnIndex(SeatedDinerColumns.COL_DINE_ID));
                    if(Integer.parseInt(dinerID)==Integer.parseInt(newId))
                    {
                        return true;
                    }
                }while(cursor.moveToNext());
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:04:01.033

您可以在查询数据库时过滤数据。
或者 -[从 Cursor 中过滤行，这样它们就不会出现在 ListView 中](https://stackoverflow.com/questions/3027428/filter-rows-from-cursor-so-they-dont-show-up-in-listview)

# websphere - 尝试使用在 WebSphere Application Server 上工作的 CXF 获取 Camel 示例

> ID：14598352
> 
> 赞同：2
> 
> 时间：2013-01-30T06:59:16.633
> 
> 标签：websphere, cxf, apache-camel

我正在尝试使用在 WebSphere 上工作的 CXF 获得一个 apache camel 应用程序。

注意到一些错误

引起：java.lang。**IncompatibleClassChangeError**：org.apache.neethi.AssertionBuilderFactory at java.lang.ClassLoader.defineClassImpl(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:262) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:69 )

这是因为 org.apache.neethi 类是从 WAS 运行时加载的，而不是从 WEB-INF/lib 加载的 neeti3.0.2.jar

这是来自类加载器的信息：

类加载：org.apache.neethi.builders.AssertionBuilder 来自：文件：/D: **/Tools/WebSphere/AppServer/plugins/org.apache.axis2.jar**

Web 应用程序配置已更改为使用类加载器策略。它设置为上一个父级。*然而，这个班级似乎正在使用家长优先政策。*

CXF 包中是否有任何内容可以超越此政策？

我注意到使用 Axis2 和 WAS

[http://axis.apache.org/axis2/java/core/docs/app_server.html](http://axis.apache.org/axis2/java/core/docs/app_server.html)

为避免与 WebSphere 的 JAX-WS 运行时发生冲突，针对 Axis2 提到了一些额外的步骤。是否需要类似的东西才能使其正常工作？

谢谢芒鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T17:20:36.133

并非特定于 Camel，但我们正在处理类似的问题。

1）如果需要，您可以使用隔离的共享库。这似乎修复了类加载器通过 OSGi 拉入这些其他库。此解决方案并不适合所有人。

2) 设置 PARENT_LAST 的应用程序时，请确保您在正确的位置进行操作。如果你的战争中有罐子，那么你必须在**WAR 模块**上设置 PARENT_LAST ，而不是应用程序。在 WAS 控制台 > 应用程序 > 应用程序类型 > websphere 企业应用程序 > MyEAR > 管理模块 > MyWar > 更改“类加载器顺序”并使其成为“最后一个父级”

3) 进行更改后，您可以导出 ear 文件。在耳朵里，有一个文件 META-INF/ibmconfig/cells/defaultCell/applications/defaultApp/deployments/defaultApp/deployment.xml 有这个配置。对于 maven ear，你可以把它放到 src/main/application 中，让它和 ear 一起打包。

希望这会有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:20:22.487

我们正在 Camel 邮件列表中讨论类似的主题。我建议去那里看看：[http ://camel.465427.n5.nabble.com/camel-cxf-in-WebSphere-without-geronimo-jetty-depdendencies-possible-tp5726490.html](http://camel.465427.n5.nabble.com/camel-cxf-in-WebSphere-without-geronimo-jetty-depdendencies-possible-tp5726490.html)

# c# - 如何以表单应用程序将参数传递给 rdlc vs 2010

> ID：14598363
> 
> 赞同：2
> 
> 时间：2013-01-30T07:00:15.800
> 
> 标签：c#, winforms

```
try
{
   this.reportViewer1.ProcessingMode= ProcessingMode.Local;
   LocalReport rep = reportViewer1.LocalReport;
   rep.ReportPath = "PopularHealthClub\\HistoryReport.rdlc";
   string a = "Hello";
   ReportParameter p1 = new ReportParameter("Textbox3", a);
   this.reportViewer1.LocalReport.SetParameters(new ReportParameter[] { p1});
}
catch (Exception exc)
{
  MessageBox.Show(""+exc);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:01:41.640

无需创建 数组`ReportParameters`，只需传递您创建的数组即可。

改变这个：

```
this.reportViewer1.LocalReport.SetParameters(new ReportParameter[] { p1}); 
```

对此：

```
this.reportViewer1.LocalReport.SetParameters(p1); 
```

顺便说一句，从我在您的代码中看到的，您确定创建了一个名为“Textbox3”的参数吗？我认为您只是想为文本框分配一个值，这是完全错误的。

打开您的 RDLC 文件，转到“查看”->“报告数据”。现在，右键单击“参数”部分并​​选择“添加新参数”。使用唯一的名称，如“parameter1”。在您的设计报告中拖动此参数。

现在您已经创建了参数，您的代码将如下所示：

```
try
{
   this.reportViewer1.ProcessingMode= ProcessingMode.Local;
   LocalReport rep = reportViewer1.LocalReport;
   rep.ReportPath = "PopularHealthClub\\HistoryReport.rdlc";
   string a = "Hello";
   ReportParameter p1 = new ReportParameter("parameter1", a);
   this.reportViewer1.LocalReport.SetParameters(p1);
}
catch (Exception exc)
{
  MessageBox.Show(""+exc);
} 
```

# ajax - Web API 分段上传 FileData 始终为空，FormData 已填充

> ID：14598365
> 
> 赞同：1
> 
> 时间：2013-01-30T07:00:21.417
> 
> 标签：ajax, asp.net-web-api

我刚刚进入 Web API 并试图让以下方法为我工作，但似乎 provider.FileData 总是空的（计数 = 0），但 provider.FormData 似乎没有问题。我不知道为什么会这样。

```
public async Task<HttpResponseMessage> PostFormData()
{
    // Check if the request contains multipart/form-data.
    if (!Request.Content.IsMimeMultipartContent())
    {
        throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
    }

    string root = HttpContext.Current.Server.MapPath("~/App_Data");
    var provider = new MultipartFormDataStreamProvider(root);

    try
    {
        // Read the form data.
        await Request.Content.ReadAsMultipartAsync(provider);

        // This illustrates how to get the file names.
        foreach (MultipartFileData file in provider.FileData)
        {
            Trace.WriteLine(file.Headers.ContentDisposition.FileName);
            Trace.WriteLine("Server file path: " + file.LocalFileName);
        }
        return Request.CreateResponse(HttpStatusCode.OK);
    }
    catch (System.Exception e)
    {
        return Request.CreateErrorResponse(HttpStatusCode.InternalServerError, e);
    }
} 
```

我从以下调用方法

```
 uploader.bind('FileUploaded', function (up, file) {
            $('#' + file.id + " b").html("100%").css({ 'color': '#47C449' });
            $('#' + file.id).css({ 'background-color': '#F7FFF7' });
            var data = new FormData();

            data.append('file-', file.id);
            data.append('filename', file.name);
            data.append('Size', file.size);

            $.ajax({
                url: sf.getServiceRoot('mysite') + "upload/PostFormData",
                type: "POST",
                data: data,
                contentType: false,
                processData: false,
                beforeSend: sf.setModuleHeaders
            }).done(function (response, status) {
                alert(response);
            }).fail(function (xhr, result, status) {
                alert("error: " + result);
            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:07:56.110

试试这样：

```
uploader.bind('FileUploaded', function (up, file) {
    $('#' + file.id + " b").html("100%").css({ 'color': '#47C449' });
    $('#' + file.id).css({ 'background-color': '#F7FFF7' });
    var data = new FormData();
    data.append('file', file);

    var uri = sf.getServiceRoot('mysite') + 'upload/PostFormData';
    var xhr = new XMLHttpRequest();
    xhr.open('POST', uri, true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            alert(xhr.responseText); // handle response.
        }
    };
    xhr.send(data);
}); 
```

# eclipse - servlet 和主应用程序中的 Eclipse 调试（使用 F5）

> ID：14598367
> 
> 赞同：0
> 
> 时间：2013-01-30T07:00:40.490
> 
> 标签：eclipse, jakarta-ee, log4j

我有一个名为 Mo 的类。 Mo 有一个静态函数，如下所示：

```
public static void logsomething(String s) 
```

logsomething 的主体使用 log4j(jar)。这不是问题。

我还有一个主要功能：

```
public static void main(String[] args) {
        // TODO Auto-generated method stub
            Mo.logsomething("sth");
    } 
```

我在 main 中调用了 Mo.logsomething()。没关系。没有错误。

但我在 Servlet doGet 中称其为 Mo.logsomething("sth")：

```
protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {

            Mo.logsomething("sss");

        response.getWriter().println("<h1>hello</h1>");
    } 
```

获取异常：java.lang.NoClassDefFoundError: org/apache/log4j/Layout

所以很奇怪。我尝试调试以查看发生了什么。当调试光标在行时：Mo.logsomething("sss"); 我按 F5 进入代码。但我得到错误：找不到源。

我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:06:05.387

您不是在编写您使用的应用程序服务器。但是您的错误很可能是类路径错误。

问题是您的应用程序服务器找不到该`Log4J`库。

通常可以通过将`Log4J`jar 文件放入`WEB-INF/lib/`Web 应用程序的目录并再次部署该应用程序来解决此问题。

# javascript - HighChart 在 IE8 中无法完美呈现

> ID：14598371
> 
> 赞同：0
> 
> 时间：2013-01-30T07:01:02.867
> 
> 标签：javascript, orchardcms-1.6, dotnethighcharts

我将 highcharts 与 Orchard1.6 集成在一起，一切都很完美，但问题是图表在 IE8 中无法完美呈现，我不知道这是浏览器问题还是我需要为此解决更多问题，这是该问题的屏幕截图

![在此处输入图像描述](../Images/46ba26ea6edd9673fc3607512c2172ba.png)

任何人都知道解决此问题的方法会更有帮助谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:13:44.513

我认为这是浏览器问题，当我听到 Chart 和 IE8 就像有人在 Netscape 上使用 myspace 时一样。怪谁！

您正在查看的问题是 tootltip 的 z-index 如果不​​让我知道，因为您需要通过 jsfiddle 或其他东西给我们一些更直接的接口影响，以便我们可以修补或使用它来获得正确的值。

尝试查看带有 chrome 框架的 IE8 是否可以解决此问题或尝试兼容模式以查看是否有帮助。很可能一个 css hack 可以解决这个问题。

试试这个[Jsfiddle](http://jsfiddle.net/TuMwJ/34/)来解决 github 上[作为](https://github.com/highslide-software/highchart)问题报告的问题，但现在已关闭，因此其中的一个小提琴将帮助您解决这个问题。

```
color: rgb(51, 51, 51);
cursor: auto;
display: block;
fill: #333333;
font-family: 'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif;
font-size: 12px;
height: 16px;
line-height: normal;
text-align: left;
white-space: nowrap;
width: 141px; 
```

检查您正在加载的版本和 css

# c# - 如何将方形图像屏蔽为圆角图像？

> ID：14598375
> 
> 赞同：3
> 
> 时间：2013-01-30T07:01:36.190
> 
> 标签：c#, xaml, windows-phone-8

因为我想为我的 **图像控件实现一个****圆角蒙版**，所以我设计了一个这样的控件

 **```
 <Border x:Name="Border1"  CornerRadius="{Binding CornerRadius,Mode=TwoWay}"  >
            <Image  x:Name="ImageSource1" Background="Transparent" >
            </Image>
    </Border> 
<Border x:Name="MaskBorder1"  BorderBrush="White"  CornerRadius="{Binding CornerRadius,Mode=TwoWay}" BorderThickness="3" /> 
```

但是我得到了一个**控制**。

![在此处输入图像描述](../Images/fad55b252a54f6de978fa1185cf8112f.png)

有人有想法用**边框颜色**填充角落吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-04T14:35:57.983

只需剪辑图像，这是我使用的片段

```
 <Image                               
                            Width="96"
                            Height="96"
                            Stretch="UniformToFill"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top">
                            <Image.Clip>
                                <EllipseGeometry
                                    Center="48,48"
                                    RadiusX="48"
                                    RadiusY="48" />
                            </Image.Clip>
                        </Image> 
```

要使其工作，您需要将 Center、RadiusX 和 RadiusY 设置为图像大小的一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T09:50:20.033

不知道这个有用吗？但是对于图像处理，我总是使用[Writeablebitmapex 库](http://writeablebitmapex.codeplex.com/)！可以在[此处找到有关屏蔽图像的一个很好的示例...](http://adamkinney.wordpress.com/2010/01/09/image-blitting-in-silverlight-with-writeablebitmapex/)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T17:04:27.963

不确定您的使用，`CornerRadius="{Binding CornerRadius,Mode=TwoWay}"`但我有兴趣查看您的实现，在查看[Stecya 的帖子后，](https://stackoverflow.com/questions/5801525/image-with-only-two-rounded-corners-in-silverlight-xaml-c-sharp)如果它证明是您正在寻找的。**

# c# - Gridview，隐藏RowDataBound上的按钮？

> ID：14598376
> 
> 赞同：1
> 
> 时间：2013-01-30T07:01:38.913
> 
> 标签：c#, asp.net, gridview

非常快速的问题 - 我一定没有正确看到它，但是为什么 ASP 按钮“btnEdit”在 gridview 中仍然可见？在 RowDatabound （用于测试）上，我只是想隐藏它，并计划稍后在它周围放置一个 if 语句。

**后面的代码（RowDataBound）**

```
 protected void gvEditUser_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Button btnEdit = (Button)e.Row.FindControl("btnEdit");
        btnEdit.Visible = false;
        if (e.Row.RowState != null)
        {
            if ((e.Row.RowState & DataControlRowState.Edit) > 0)
            {

                CheckBox cbAdmin = (CheckBox)e.Row.FindControl("cbAdmin");
                DataRowView dr = e.Row.DataItem as DataRowView;
                if (Convert.ToBoolean(dr["admin"] = true))
                {
                    cbAdmin.Checked = true;
                }
                else
                {
                    cbAdmin.Checked = false;
                }
            }
        }
    }
} 
```

**ASPX 页面 (GridView)**

```
 <asp:GridView ID="gvEditUser" runat="server" AllowPaging="True" AutoGenerateColumns="False" OnRowCancelingEdit="gvEditUser_RowCancelingEdit" OnRowEditing="gvEditUser_RowEditing" OnRowCommand="gvEditUser_RowCommand" OnRowDeleting="gvEditUser_RowDeleting" OnPageIndexChanging="gvEditUser_PageIndexChanging" CellPadding="4" GridLines="None" CssClass="size12_text" PageSize="10">
        <Columns>
            <asp:TemplateField HeaderText="Username">
                <ItemTemplate>
                    <asp:Label ID="lbUsername" runat="server" Text='<%# Eval("username") %>' ></asp:Label>
                    <asp:Label ID="lbUserID" runat="server" Text='<%# Eval("userid") %>' Visible="false"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Full Name">
                <ItemTemplate>
                    <asp:Label ID="lbFullName" runat="server" Text='<%# Eval("fullname") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Email">
                <ItemTemplate>
                    <a href="mailto:<%# Eval("email") %>">Email</a>
                    <asp:Label ID="lbEmail" runat="server" Visible="false" Text='<%# Eval("email") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Address">
                <ItemTemplate>
                    <asp:Label ID="lbAddress" runat="server" Text='<%# Eval("housenumber")!=DBNull.Value ? Eval("housetype").ToString() == "0" ? Eval("HouseNumber").ToString() + " " + Eval("Address01").ToString() + " " + Eval("Address02").ToString() + " " + Eval("StreetType").ToString() + "<br />" + Eval("Suburb").ToString() + ", " + Eval("State").ToString() + " " + Eval("Postcode").ToString() + "<br />" + Eval("Country").ToString() : Eval("Address01").ToString() + " " + Eval("HouseNumber").ToString() + " " + Eval("Address02").ToString() + " " + Eval("StreetType").ToString() + "<br />" + Eval("Suburb").ToString() + ", " + Eval("State").ToString() + " " + Eval("Postcode").ToString() + "<br />" + Eval("Country").ToString() : "<div class=\"size11_text\">No Address in system.</div>"%>'></asp:Label>
                    <asp:Label ID="lbAddressRaw" runat="server" Text='<%# Eval("housenumber")!=DBNull.Value ? Eval("housetype").ToString() == "0" ? Eval("HouseNumber").ToString() + " " + Eval("Address01").ToString() + " " + (Eval("Address02")!=DBNull.Value ? Eval("Address02").ToString() + " " : "") + Eval("StreetType").ToString() : Eval("Address01").ToString() + " " + Eval("HouseNumber").ToString() + " " + Eval("Address02").ToString() + " " + Eval("StreetType").ToString() : ""%>' Visible="false"></asp:Label>
                    <asp:Label ID="lbHouseType" runat="server" Text='<%# Eval("housetype") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbHouseNumber" runat="server" Text='<%# Eval("housenumber") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbAddress01" runat="server" Text='<%# Eval("address01") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbAddress02" runat="server" Text='<%# Eval("address02") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbStreetType" runat="server" Text='<%# Eval("streettype") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbSuburb" runat="server" Text='<%# Eval("suburb") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbState" runat="server" Text='<%# Eval("state") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbPostcode" runat="server" Text='<%# Eval("postcode") %>' Visible="false"></asp:Label>
                    <asp:Label ID="lbCountry" runat="server" Text='<%# Eval("country") %>' Visible="false"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Home Phone">
                <ItemTemplate>
                    <asp:Label ID="lbTelephone" runat="server" Text='<%# Eval("telephone") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Work Phone">
                <ItemTemplate>
                    <asp:Label ID="lbWorkPhone" runat="server" Text='<%# Eval("workphone") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Mobile">
                <ItemTemplate>
                    <asp:Label ID="lbMobile" runat="server" Text='<%# Eval("mobile") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Shirt Size">
                <ItemTemplate>
                    <asp:Label ID="lbShirtSize" runat="server" Text='<%# Eval("shirtsize") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Pant Size">
                <ItemTemplate>
                    <asp:Label ID="lbPantSize" runat="server" Text='<%# Eval("pantsize") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Admin">
                <ItemTemplate>
                    <asp:CheckBox ID="cbAdmin" runat="server" Checked='<%# Convert.ToBoolean(Eval("admin")) %>' Enabled="false" />
                    <asp:Label ID="lbAdmin" runat="server" Text='<%# Eval("admin") %>' Visible="false" ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Last Login">
                <ItemTemplate>
                    <asp:Label ID="lbLastLogin" runat="server" Text='<%# Eval("lastlogin") %>' CssClass="size11_text_blurb"></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderStyle-Width="100px">
                <ItemTemplate>
                    <asp:Button ID="btnPasswordReset" runat="server" CssClass="txtbuttonsmall" CommandName="ResetPassword" Text="Reset Password" OnClientClick='<%# Eval("username","return confirm(\"Reset password for {0}?\");") %>'></asp:Button><br />
                    <asp:Button ID="btnEdit" runat="server" CssClass="txtbuttonsmall" CommandName="Edit" Text="Edit User"></asp:Button><br />
                    <asp:Button ID="btnDelete" runat="server" CssClass="txtbuttonsmall" CommandName="Delete" Text="Delete User" OnClientClick='<%# Eval("username","return confirm(\"Delete user {0}?\");") %>'></asp:Button>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:Button ID="btnCancel" runat="server" CommandName="Cancel" Text="Cancel Edit" CssClass="txtbutton"></asp:Button>
                </EditItemTemplate>
            </asp:TemplateField>
        </Columns>
        <AlternatingRowStyle BackColor="#d8e6f0" />
        <EditRowStyle BackColor="#a3cbe8" />
        <HeaderStyle BackColor="#032035" ForeColor="White" CssClass="size12_text" />
        <PagerStyle BackColor="#032035" ForeColor="White" HorizontalAlign="Center" CssClass="size12_text" />
        <RowStyle BackColor="#f9fbfc" />
    </asp:GridView> 
```

干杯，

特伦特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:34:52.893

我忘了在 gridview 上订阅 OnRowDataBound。不是一个聪明的家伙......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T08:24:53.717

绑定上的隐藏按钮（可以使用偶数条件）

```
<asp:GridView ID="GridView1" runat="server"  AutoGenerateColumns="false" OnRowCommand="grd_finantial_year_RowCommand"    DataKeyNames="srno" >
    <Columns>                           
        <asp:TemplateField HeaderText="Change Status">
            <ItemTemplate>                                  
                <asp:LinkButton ID="btnststact" Visible='<%#BtnVisibility(Eval("active").ToString(),"StatusACT")%>' Text="ACTIVATE" runat="server" CommandName="StatusACT" CommandArgument='<%#Eval("srno")%>' /> 
            </ItemTemplate>
        </asp:TemplateField>                   
    </Columns>
</asp:GridView> 
```

只需在具有公共访问级别的 C# 中添加此函数

```
public Boolean BtnVisibility(string StatusNo, string ButtonName) { // 0 means not active, 1 means activated

  if (ButtonName == "StatusACT") {
     if (StatusNo == "0") {//not active
        return true;
     }
     else if (StatusNo == "1") //active
     {
        return false;
     }
  }
return true;
} 
```

# jquery - 在所有验证后启用提交按钮

> ID：14598379
> 
> 赞同：0
> 
> 时间：2013-01-30T07:01:49.217
> 
> 标签：jquery

我有一个表格，我正在使用 focusin 和 focusout 事件并验证 focusout。我一开始禁用了提交按钮，我想在验证后再次启用它。这是我的代码。

```
 $("document").ready(function() {
    $("#contact_submit").attr("disabled", "disabled");
    $("#first_name").focusin(function() {
        $("#Frist_name_comment").html('Please inter your first name.');
    }).focusout(function() {
        var first_name = $("#first_name").val();
        if(first_name == "") {
            $("#Frist_name_comment").html("First Name is required.");
        }else {
            $("#Frist_name_comment").html('OK');
        }
    });

    $("#last_name").focusin(function() {
        $("#Last_name_comment").html('Please inter your last name.');
    }).focusout(function() {
            var last_name = $("#last_name").val();
        if(last_name == "") {

            $("#Last_name_comment").html("Last Name is required.");
        }else {
            $("#Last_name_comment").html('OK');
        }
    });

    $("#email").focusin(function() {
        $("#Email_comment").html('Please inter a email address.');
    }).focusout(function() {
        var email = $("#email").val();
        var atpos = email.indexOf("@");
        var dotpos = email.lastIndexOf(".");
        if((email == "" || atpos < 1 || dotpos < atpos+2 || dotpos+2 > email.length)) {
            mess == "Not a vallied email.";
            $("#Email_comment").html("Not a valied email.");
        }else {
            $("#Email_comment").html('OK');
        }
    });

    // hear i want to enable submit button after all validation

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:04:17.463

```
$("button").prop("disabled", true); <== for disabling 
```

或者

```
$("button").prop("disabled", false); <== for enabling 
```

`disabled`属性也可以是 BOOLEAN 来表示状态。jQuery 有`.attr()`和

`.prop()`访问元素属性的函数。我用过`.prop()`，你也可以用

`.attr()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:04:53.293

你可以试试这个：

```
if($("#Last_name_comment).text()=='OK'|| 
   $('#Frist_name_comment).text()=='OK' || 
   $('#Last_name_comment').text()=='OK' || 
   $('#Email_comment").text()=='OK'){
  $("#contact_submit").removeAttr("disabled");
} 
```

您必须检查`OK`字符串是否存在，然后删除 attr`disabled`

# jquery - 使用 https://github.com/blueimp/jQuery-File-Upload 添加其他数据

> ID：14598383
> 
> 赞同：1
> 
> 时间：2013-01-30T07:02:10.987
> 
> 标签：jquery

我正在尝试在每次上传时添加额外的表单数据。

我现在正在使用这个。

```
var data = {
    formData : {
        vendor:    '{{ $vendor }}',
        extension: '{{ $extension }}'
    },
    acceptFileTypes: /^({{ str_replace('/', '\/', implode('|', $mimes)) }})$/i,
    uploadTemplateId: 'media-upload-template-{{$identifier}}',
    downloadTemplateId: 'media-download-template-{{$identifier}}',

    // jQuery plugin requires size in Bytes, Laravel uses KB
    maxFileSize: {{ ($_valid = (int) $max_file_size) ? $_valid * 1024 : 'undefined' }}
}

// Grab the CSRF data
if ((csrf = $('#media-upload-csrf-{{$identifier}}')) && csrf.length) {
    data.formData[csrf.attr('name')] = csrf.val();
}

$('#media-upload-{{$identifier}}').fileupload(data);

$('#media-upload-{{$identifier}}').bind('fileuploadsubmit', function (e, data) {
    var inputs = data.context.find(':input');
    if (inputs.filter('[required][value=""]').first().focus().length) {
        return false;
    }
    data.formData = inputs.serializeArray();

}); 
```

我正在为每个文件添加一个用户 ID，因此 userid[] 将等于 n，这来自上传模板中文件旁边的选择

使用时出现问题

```
data.formData = inputs.serializeArray(); 
```

它会覆盖上面数据变量中的所有设置。

我也尝试过使用

```
$.each(inputs.serializeArray(), function(i, obj) {
            data.formData[obj.name] =obj.value;
}); 
```

代替

```
data.formData = inputs.serializeArray(); 
```

没有这样的运气。

有任何想法吗？

# applescript - 是否需要恢复文本项分隔符？

> ID：14598385
> 
> 赞同：2
> 
> 时间：2013-01-30T07:02:23.447
> 
> 标签：applescript

通常推荐的使用文本项目分隔符的方法是这样的：

```
set tid to AppleScript's text item delimiters
set AppleScript's text item delimiters to "x"
set l to text items of "aaxbb"
set AppleScript's text item delimiters to tid
l 
```

我通常会做这样的事情：

```
set text item delimiters to "x"
text items of "aaxbb" 
```

[http://macscripter.net/viewtopic.php?id=24725](http://macscripter.net/viewtopic.php?id=24725)：

> 重要的是要注意以下消息：“总是把它们放回去”。AppleScript 会记住它的分隔符设置。即使您在脚本编辑器中打开新的第二个脚本，您在第一个中设置的分隔符也将应用于第二个。

虽然我无法重现它。某些版本的 OS X 中的行为是否发生了变化？

[AppleScript：权威指南](http://books.gigatux.nl/mirror/applescriptdefinitiveguide/applescpttdg2-CHP-13-SECT-7.html#applescpttdg2-CHP-13-SECT-7)：

> 只要 AppleScript 脚本组件的此实例存在，文本项分隔符的值就会持续存在。因为您可能会在存在此脚本组件的情况下运行多个脚本，其中任何一个都可能设置文本项分隔符，所以不要对文本项分隔符的值做任何假设是明智的。

仍然是这种情况，还是您能举出文本项分隔符属性影响其他脚本的任何示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:12:58.390

我记得读过一些关于你所说的这个变化的东西，不再需要重置它们，但是在谷歌搜索后我找不到任何关于它的信息。因此，我做了一个快速测试。我制作了这两个脚本并在 AppleScript Editor 中运行它们。首先这个...

```
set text item delimiters to "something"
return text item delimiters 
```

然后这个...

```
return text item delimiters 
```

第二个脚本返回 {""}。所以似乎第一个脚本不会影响第二个。我在 10.6 和 10.8 中都进行了测试，结果相同。

这是applescript发行说明。我找不到 10.7 或 10.8 的发行说明。搜索他们也没有发现关于这个主题的任何内容......

```
http://developer.apple.com/library/mac/#releasenotes/AppleScript/RN-AppleScript/RN-10_3/RN-10_3.html#//apple_ref/doc/uid/TP40000982-CH103-SW1 
```

因此，我对你没有明确的答案。每个人都说要重置它们，但我的简单测试表明它不是必需的。

你也是对的，你不需要告诉块之外的“Applescript”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T21:19:36.433

我在[https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/conceptual/ASLR_fundamentals.html](https://developer.apple.com/library/mac/#documentation/applescript/conceptual/applescriptlangguide/conceptual/ASLR_fundamentals.html)在 AppleScript Fundamentals > Global Constants in AppleScript > text item delimiters 部分中找到了这个花絮：

* * *

如果您在脚本编辑器中更改文本项分隔符属性，它会保持更改状态，直到您恢复其先前的值或退出脚本编辑器并再次启动它。如果您在脚本应用程序中更改文本项分隔符，它会在该应用程序中保持更改，直到您恢复其先前的值或直到脚本应用程序退出；但是，在脚本编辑器或您运行的其他脚本应用程序中，分隔符不会更改。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-22T10:10:15.680

如果你运行一个脚本应用程序，那么我想技术上没有必要让它们休息，因为一旦它退出，它就退出了！

但是，如果您在脚本编辑器中运行脚本，那么对分隔符的更改*将保留*在脚本编辑器的该脚本中。我今天才看到。

但是几年前发生的变化是它不会*影响*在脚本编辑器中打开的*其他*脚本/窗口。

此外，当作为应用程序运行时，它只会影响该特定脚本。

# r - 将单词（字符）与 R 中的参考值匹配

> ID：14598386
> 
> 赞同：2
> 
> 时间：2013-01-30T07:02:23.860
> 
> 标签：r, character, matching

这是我的数据（A）。

```
 keyword
[1] shoes
[2] childrenshoes
[3] nikeshoes
[4] sportsshiirts
[5] nikeshirts
[6] shirts
... 
```

此外，这是另一个数据（B）。这是一个参考数据。

```
 keyword  value
[1] shoes    1
[2] shirts   2
... 
```

我需要匹配这个数据集。

所以，我想要那个结果。

```
 keyword        vlaue
[1] shoes          1
[2] childrenshoes  1     (because, this keyword include the 'shoes')
[3] nikeshoes      1     (because, this keyword include the 'shoes')
[4] sportsshiirts  2     (because, this keyword include the 'shirts')
[5] nikeshirts     2     (because, this keyword include the 'shirts')
[6] shirts         2
... 
```

如果我使用“合并”，我会不匹配这个数据集。这是因为 data(B) 中的关键字与 data(A) 中的数据不完全匹配。

我可以通过使用 regexpr() 或 gregexpr() 来一一处理。但是，我在数据中有很多参考（B）

那么，我该如何处理这个问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:19:44.657

这是一种方法：

首先，您的数据：

```
temp <- c("shoes", "childrenshoes", "nikeshoes", 
          "sportsshiirts", "nikeshirts", "shirts")

matchme <- structure(list(keyword = c("shoes", "shirts"), value = 1:2), 
                     .Names = c("keyword", "value"), 
                     class = "data.frame", row.names = c(NA, -2L)) 
```

其次，输出，一气呵成：

```
data.frame(
  keyword = temp, 
  value = rowSums(sapply(seq_along(matchme[[1]]), function(x) {
    temp[grepl(matchme[x, 1], temp)] <- matchme[x, 2]
    suppressWarnings(as.numeric(temp))
  }), na.rm = TRUE))
#         keyword value
# 1         shoes     1
# 2 childrenshoes     1
# 3     nikeshoes     1
# 4 sportsshiirts     0
# 5    nikeshirts     2
# 6        shirts     2 
```

`grepl`对“matchme”`data.frame`中的每个元素与源“temp”进行逻辑匹配`data.frame`。如果找到匹配项，它会从 "matchme" 的 "value" 列中提取值`data.frame`。否则，它保持原始值。这很好，因为我们知道当我们使用 转换结果向量时`as.numeric`，任何不能强制转换为数字的东西都会变成`NA`。

在该`sapply`步骤中，您将获得一个矩阵。如果我们可以假设每个项目只会有一个匹配项，那么我们可以安全地使用`rowSums`参数`na.rm = TRUE`来将该矩阵“折叠”成一个向量，该向量可以与我们的“临时”数据组合以创建结果`data.frame`。

我`suppressWarnings`在那里添加了一个，因为我知道我会收到很多`NAs introduced by coercion`警告，这些警告不会告诉我任何我不知道的事情。

请注意`0`“运动衫”。如果您需要近似匹配，您可能需要查看`agrep`并查看是否可以修改此方法。

# r - 使用 modFit (FME) 在 R 中查找置信区间

> ID：14598390
> 
> 赞同：1
> 
> 时间：2013-01-30T07:02:48.877
> 
> 标签：r, model, confidence-interval

我一直在最近的一个项目中使用 modFit（R 包的一部分，FME）。我有兴趣获得模型预测参数的置信区间，但我不知道如何做到这一点。当我查看 modFit 例程的摘要时，我得到了每个参数的标准误差和 t 值。我还得到了一个参数相关表。

如何使用此信息提取参数的置信区间？我觉得我的任务过于复杂了，但我只是卡住了。任何帮助将不胜感激。

这是我必须使用的摘要信息（我希望它不会给我的问题增加更多混乱，所以如果需要，请忽略）：

```
Parameters:
      Estimate Std. Error t value Pr(>|t|)    
Mb1  1.7022419  0.0022914  742.89   <2e-16 ***
M1b  2.0015269  0.0024875  804.64   <2e-16 ***
Mb2  0.4998066  0.0015215  328.50   <2e-16 ***
M2b  0.5079805  0.0011033  460.43   <2e-16 ***

---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.07965 on 67 degrees of freedom

Parameter correlation:
           Mb1     M1b     Mb2       M2b    
Mb1   1.000000  0.8377 -0.6335  0.006307 
M1b   0.837665  1.0000 -0.6208 -0.163344 
Mb2  -0.633522 -0.6208  1.0000  0.529634 
M2b   0.006307 -0.1633  0.5296  1.000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:29:52.557

您可以尝试 bootstrap package [boot](http://cran.r-project.org/web/packages/boot/index.html)它会根据重新采样建立您的置信区间

# java - 在 MySQL 中使用 ParameterMetaData 获取准备好的语句的正确数据类型

> ID：14598391
> 
> 赞同：0
> 
> 时间：2013-01-30T07:02:52.860
> 
> 标签：java, mysql, metadata

**我必须从MySQL**数据库中的准备好的语句中获取参数名称和参数数据类型。所以为此我使用了**ParameterMetaData**类。但现在我得到了错误的**数据类型**。这仅给出**“VARCHAR”**数据类型。当我在互联网上搜索这个查询时，我发现

> “返回参数类型。如果数据类型未知，则返回 java.sql.Types.VARCHAR”。

现在我应该怎么做才能获得正确的**数据类型**。如果可能，请帮助我。

这是我的代码：-

```
public class Main {
      public static void main(String[] args) throws Exception {
        Connection conn = getMySqlConnection();

        String query = "select * from survey where id > ? and name = ?";
        PreparedStatement pstmt = conn.prepareStatement(query);
        ParameterMetaData paramMetaData = pstmt.getParameterMetaData();
        if (paramMetaData == null) {
          System.out.println("db vendor does NOT support ParameterMetaData");
        } else {
          System.out.println("db vendor supports ParameterMetaData");
          String paramTypeName = paramMetaData.getParameterTypeName(1);
          String paramTypeName1 = paramMetaData.getParameterTypeName(2);
          System.out.println("param SQL type name=" + paramTypeName);
          System.out.println("param SQL type name1=" + paramTypeName1);

        }

        pstmt.close();
        conn.close();

      }

    public static Connection getMySqlConnection() throws Exception {
        String driver = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/test?generateSimpleParameterMetadata=true";
        String username = "root";
        String password = "";
        Class.forName(driver);
        Connection conn = DriverManager.getConnection(url, username, password);
        return conn;
      } 
```

这是给出输出：-

> 参数 SQL 类型名称= VARCHAR
> 参数 SQL 类型名称 1= VARCHAR

但我期待这个输出： -

> 参数 SQL 类型名称 = INTEGER
> 参数 SQL 类型名称 1= VARCHAR

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:19:41.443

要获得完整的结果，请使用`getParameterClassName(int param)`而不是`getParameterTypeName`

参考：[http ://docs.oracle.com/javase/7/docs/api/java/sql/ParameterMetaData.html#getParameterClassName%28int%29](http://docs.oracle.com/javase/7/docs/api/java/sql/ParameterMetaData.html#getParameterClassName%28int%29)

希望这可以帮助

# magento - 在magento中上传产品的致命错误

> ID：14598393
> 
> 赞同：1
> 
> 时间：2013-01-30T07:03:04.813
> 
> 标签：magento

现在，我在我的 magento 商店中为我的新产品上传了一张图片。但是我遇到了这样的错误。

**致命错误：第 88 行 /home/weraemer/public_html/theme_name/lib/Varien/Image/Adapter/Gd2.php 中允许的 67108864 字节内存大小已用尽（尝试分配 1860 字节）**。

任何人都可以提出解决此错误的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:58:33.003

您可以在您的 magento 文件夹中增加 php.ini 文件中的内存限制

# java - 当参数名称或值只有一个字母时，Spring MVC 无法获取参数

> ID：14598395
> 
> 赞同：0
> 
> 时间：2013-01-30T07:03:27.560
> 
> 标签：java, spring-mvc

控制器代码

```
@RequestMapping(value = "/requestparam/map")  
public String map(@RequestParam Map<String, String> params) {  
    System.out.println("get map params: " + params);  
    return "param";  
} 
```

网址：</p>

```
/requestparam/map?p1=1&p2=2&p=3&p4=44 
```

输出结果：

```
get map params: {p1=, p4=44, p2=, =} 
```

我也打印了`HtptServletRequest.getParametersMap()`，但结果是一样的。Spring MVC 版本是 3.2.0.RELEASE。为什么会发生这种情况，我该如何解决？，谢谢！

# c# - 在jquery中设置对话框文本

> ID：14598396
> 
> 赞同：0
> 
> 时间：2013-01-30T07:03:28.677
> 
> 标签：c#, javascript, jquery, html, css

我是 jquery 的新手，我遇到了一个问题。我正在尝试设计一个包含四个图像的网页，并且我希望弹出一个对话框，显示被单击的当前图像的详细信息。但是，我无法更改对话框中的文本，并且它始终显示第一张图像的详细信息。

在隐藏字段中设置一个数字以标识单击了哪个图像，然后 GetDetail1() 和 GetDetail2() 函数使用该数字返回具有适当详细信息的字符串。继承人的脚本：

```
<asp:HiddenField runat="server" Id="JavascriptValue" value="1"/>
<div id="dialog-block">
<b>Detail1:</b>
<table border="0">
    <tr>
    <td><% =GetDetail1() %></td>
    <td colspan="2">
        <img src="Assets\people\silhoeutte1.jpg" width="100" height="100" style="padding-left: 100px;" /></td>
    </tr>
    <tr>
    <td><b>Detail2:</b></td>
    </tr>
    <tr>
    <td><% =GetDetail2() %></td>
    </tr>
    </table>
</div>
<script type="text/javascript">
// the jQuery document ready handler
$(function () {
    var name;
    // create our dialog
    $('#dialog-block').dialog({
    title: '<%=GetImageName()%>',
    oneInstance: false,
    autoOpen: false,
    width: 400,
    buttons: {
        "Close": function () {
        closeDialog($(this))
        }
    }
    });

// the images to open the dialog
$('#image1,#image3,#image2,#image4').click(function (event) {
    if (this.id == 'image1') {
    document.forms['form1'].JavascriptValue.value = "1"; //set the value
    $('#dialog-block').dialog('open');
    }
    else if (this.id == 'image2') {
    document.forms['form1'].JavascriptValue.value = "2"; //set the value
    $('#dialog-block').dialog('open');
    }
    else if (this.id == 'image3') {
    document.forms['form1'].JavascriptValue.value = "3";//set the value
    $('#dialog-block').dialog('open');
    }
    else if (this.id == 'image4') {
    document.forms['form1'].JavascriptValue.value = "4"; //set the value
    $('#dialog-block').dialog('open');
    }
});
});

function closeDialog(elem) {
    elem.dialog("close");
}
</script> 
```

获取详细信息函数

```
public String GetDetails1()
{
    List<User> imagelist = DatabaseAccessor.getImagesFromDataBase();
    return imagelist[Convert.ToInt32(JavascriptValue.Value)].Detail;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:22:58.177

我认为您的问题在于这些方面 `document.forms['form1'].JavascriptValue.value`。你需要这样做`document.getElementById("JavascriptValue").value`。您的隐藏字段默认设置为 1，这就是您始终获取第一张图像详细信息的原因。

# c# - wpf中没有迭代器的列表

> ID：14598400
> 
> 赞同：0
> 
> 时间：2013-01-30T07:03:36.857
> 
> 标签：c#, wpf

假设有一个前向链表：

```
public class A
{
    public B Next { get; set; }

    public String Value { get; set; }

    public A(string value, B next)
    {
        this.Next = next;
        this.Value = value;
    }
}

public class B
{
    public A Next { get; set; }
    public int Value { get; set; }

    public B(int value, A next)
    {
        this.Next = next;
        this.Value = value;
    }
}

public partial class MyWindow : Window
{

    public A My_List{ get; set; }

    public MyWindow()
    {
        Program program = new Program();

        this.My_List = new A("value1", new B(1, new A("Value2", new B(2, new A("value3", new B(3, null))))));

        this.DataContext = this;
        InitializeComponent();
    }
} 
```

如何在 Wpf 中显示 *My_List*？我试过：

```
<StackPanel>
    <StackPanel.Resources>
        <DataTemplate DataType="{x:Type WpfApplication2:A}" x:Key="A_Template">
            <StackPanel Orientation="Horizontal">
                <Label Content="{Binding Path=Value}" />
                <Label Content="---" />
                <Label Content="{Binding Path=Next.Value}" />
                <ItemsControl ItemsSource="{Binding Path=Next.Next}" ItemTemplate="{DynamicResource A_Template}">

                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>

                </ItemsControl>
            </StackPanel>
        </DataTemplate>
    </StackPanel.Resources>

    <ItemsControl   ItemsSource="{Binding Path=My_List}"
                    ItemTemplate="{StaticResource A_Template}">

        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</StackPanel> 
```

但它不起作用，我认为这是因为 *My_List* 必须是实际列表而不是第一个元素。

编辑：只有一个空窗口，没有输出，没有编译器错误，也没有运行时异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:29:56.943

> 如何在 Wpf 中显示 *My_List*？

如果你想`A`用作`ItemsSource`for `ItemsControl`，那么你必须像这样`IEnumerable`实现`A`：

```
public class A : IEnumerable
{
    public B Next { get; set; }

    public String Value { get; set; }

    public A(string value, B next)
    {
        this.Next = next;
        this.Value = value;
    }

    #region IEnumerable Members

    private class AEnumerator : IEnumerator
    {
        private readonly A head;

        public AEnumerator(A head)
        {
            this.head = head;
        }

        #region IEnumerator Members

        public object Current { get; private set; }

        public bool MoveNext()
        {
            if (Current == null)
            {
                Current = head;
            }
            else
            {
                if (Current.GetType() == typeof(A))
                {
                    Current = ((A)Current).Next;
                }
                else
                {
                    Current = ((B)Current).Next;
                }
            }

            return Current != null;
        }

        public void Reset()
        {
            throw new NotImplementedException();
        }

        #endregion
    }

    public IEnumerator GetEnumerator()
    {
        return new AEnumerator(this);
    }

    #endregion
} 
```

# java - json 对象：需要创建一个通用方法来检索值

> ID：14598405
> 
> 赞同：2
> 
> 时间：2013-01-30T07:03:46.853
> 
> 标签：java, json

```
{
    "CollegeResponse": {
        "departmentDetails": {
            "id": 42,
            "departmentName": "computer science",
            "labDetails": {
                "id": 21,
                "description": "machine learning",
                "assistant": {
                    "empid": 201101,
                    "isPermanent": false
                }
            },
            "affilated": false
        }
    }
}

responseInString = response.getEntity(String.class);
JSONObject json = new JSONObject(responseInString);
String id = json.getJSONObject("CollegeResponse").getJSONObject("departmentDetails").getString("id"); 
```

目前我正在使用这个过程来验证 db 的 json 响应。但是如果我的 json 响应很大并且我需要用 db 解析每个值，我该如何编写一个通用方法或者它是否已经存在，比如接受 json 对象的 getvalue(jsondata`) 找到我需要迭代的级别并获得价值。我有很多不同的 json 响应，所以一个可以帮助我检索 json 值的通用方法会让我的工作变得简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:36:48.373

我使用字符串标记化从 json 对象中检索值。您需要提供 json 对象和字段值来获取特定键的值。我们可以进一步优化它吗？

```
package javaapplication1;

import java.util.StringTokenizer;
import net.sf.json.JSONException;
import net.sf.json.JSONObject;

public class Tokenization {

    public static void main(String args[]) {
        JSONObject parentData = new JSONObject();
        JSONObject childData = new JSONObject();
        parentData.put("command", "dance");
        parentData.put("uid", "123123123");
        childData.put("uid", "007");
        childData.put("username", "sup");
        childData.put("password", "bros");
        parentData.put("params", childData);
        System.out.println(parentData);
        String result = getValue(parentData, "params.uid");
        System.out.println("Result:" + result);
    }

    public static String getValue(JSONObject inputJson, String field) {
        String resultValue = null;
        try {
            StringTokenizer stJson = new StringTokenizer(field, ".");
            int count = stJson.countTokens();
            JSONObject objecStore = new JSONObject();
            objecStore = inputJson;
            while (stJson.hasMoreTokens()) {
                String st = stJson.nextToken();
                if (count > 1) {
                    JSONObject objNode = objecStore.getJSONObject(st);
                    count--;
                    objecStore = objNode;
                } else {
                    System.out.println(st);
                    resultValue = objecStore.getString(st);
                }
            }

        } catch (JSONException e) {
        }
        return resultValue;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:20:28.187

我认为您的意思是“解析”而不是“验证”-您的目标是在 Java 代码中使用数据。JAX/B 标准定义了一种 Java 对象和等效 JSON 表示之间的映射方式。在您的示例中，您将拥有诸如 CollegeResponse 和 DepartmentDetails 之类的类。

如果手动设置这些 Java 类有点繁琐，需要在每个类中创建与每个 JSON 属性对应的属性，然后对类进行注解以告知 JAX/B 对应关系。

本文[描述](http://www.vogella.com/articles/JAXB/article.html)了如何做到这一点。

似乎确实有[Eclipse 工具](http://sourceforge.net/projects/jaxb-builder/)可以自动完成这项手动工作。

完成后，将 JSON 转换为 Java 的代码变为

```
JAXBContext context = JAXBContext.newInstance(CollegeResponse.class);
Unmarshaller um = context.createUnmarshaller();
CollegeResponse college = (CollegeResponse ) um.unmarshal(
          /* some Reader for the JSON string */ ); 
```

最终的效果是，与其编写大量的小 getJSONObject() 调用，不如投资于设置相应的类，这应该会产生结构良好的代码，其中数据的处理，即真正的业务逻辑，与解析代码，我将其视为“管道”。

# c# - 使用 c# 在 WinRT 应用程序中获取当前时间格式。

> ID：14598406
> 
> 赞同：2
> 
> 时间：2013-01-30T07:03:50.520
> 
> 标签：c#, windows-runtime, windows-store-apps, culture

我需要使用 c# 在 WinRT 应用程序中获取当前时间格式。我已经使用 GeographicRegion 来获取区域，它只会告诉我们位置而不是格式。但通常我们只是改变格式来改变系统的日期时间格式。

所以帮助我找到我们如何确切地知道格式，因为它总是返回我“en-US”（默认语言）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:14:15.143

[Windows.Globalization.ApplicationLanguages.Languages](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.applicationlanguages.languages.aspx)中的顶级语言告诉您应用程序正在运行的语言。

不过，您不必知道，当您构造[Windows.Globalization.DateTimeFormatter](http://msdn.microsoft.com/en-us/library/windows/apps/br206834.aspx)并且不提供语言时，这些语言是默认的。

如果您想知道格式是什么而不实际呈现特定时间，请使用[Patterns](http://msdn.microsoft.com/en-us/library/windows/apps/windows.globalization.datetimeformatting.datetimeformatter.patterns.aspx)属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:23:25.947

这显示了如何获取当前 UI 文化、指定（波兰语）文化的长时间模式（格式），以及使用指定文化和指定模式的默认格式获取当前时间：

```
Debug.WriteLine(CultureInfo.CurrentUICulture.DateTimeFormat.LongTimePattern);
Debug.WriteLine(new CultureInfo("pl-pl").DateTimeFormat.LongTimePattern);
Debug.WriteLine(DateTime.Now.ToString(new CultureInfo("pl-pl")));
Debug.WriteLine(DateTime.Now.ToString(new CultureInfo("pl-pl").DateTimeFormat.ShortTimePattern)); 
```

这些是输出：

```
H:mm:ss
HH:mm:ss
2013-01-30 08:21:09
08:21 
```

# ruby-on-rails - 在 Rails 1.2.x 中，我们如何覆盖默认文档根（公共）目录

> ID：14598410
> 
> 赞同：0
> 
> 时间：2013-01-30T07:04:03.570
> 
> 标签：ruby-on-rails

我想为我的一个 rails 1.2.3 应用程序定义一个不同的文档根目录。默认情况下，rails 使用公共目录作为其文档根目录。有没有办法覆盖这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:29:55.147

在这种情况下，您正在与 Rails 约定作斗争，这是一个非常糟糕的主意（tm）。请浏览应用程序并将代码写入公共的路径更改为写入其他目录。有时，这是您在软件开发领域必须做的事情。

# ios5 - UIImagePickerControllerEditedImage 始终存在

> ID：14598414
> 
> 赞同：0
> 
> 时间：2013-01-30T07:04:22.517
> 
> 标签：ios5, uiimagepickercontroller

当我从使用 UIImagePickerController 的苹果文档中获取此代码时，此代码困扰着我。您检查图像是否使用“if (editedImage)”编辑的部分总是正确的。This is so (as according to people on this site) as UIImagePickerControllerEditedImage will always have data even if image was not edited, when the picker is set to editing YES. 问题是，如果 (UIImagePickerControllerEditedImage 和 UIImagePickerControllerOriginalImage) 都不是 nil，我们怎么知道哪个被选中？

我在这里和谷歌上查看了许多教程和许多其他问题。但它又回到了同样的事实，即使您没有编辑它，代码的逻辑也会让您 100% 获得编辑后的图像。

我测试了此代码和其他问题中给出的其他代码，但问题始终保持不变我无法判断哪个是用户想要使用的代码。如果字典有一个 BOOL 值要知道，那真的很有帮助。

在测试我的应用程序时，如果我从相册中选择一张照片或拍摄一张新照片，我将被带到编辑屏幕，在那里我可以取消或接受并调整图像大小/裁剪图像。即使我没有触摸图像，按下接受也会一直让我编辑图像。

这是图像选择器的苹果文档 API 中的代码。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
        NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
        UIImage *originalImage, *editedImage, *imageToSave;

        // Handle a still image capture
        if (CFStringCompare ((CFStringRef) mediaType, kUTTypeImage, 0)
            == kCFCompareEqualTo) {

            editedImage = (UIImage *) [info objectForKey:
                                       UIImagePickerControllerEditedImage];
            originalImage = (UIImage *) [info objectForKey:
                                         UIImagePickerControllerOriginalImage];

            if (editedImage) {
                imageToSave = editedImage;
            } else {
                imageToSave = originalImage;
            }
        }
      // work with image or save and exit modal. 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:51:09.640

根据 Wolvorin 的回答结束问题：

这是它应该工作的方式，因为您已将 UIImagePickerController 的编辑模式设置为 true，即使您不触摸图像，它也会自动缩放图像并裁剪它，它仅使用当前以正方形（白色边框）可见的图像。所以你总是得到分配的编辑图像属性或说不为空 – Wolvorin 1 月 30 日 8:32

# data-structures - 数据结构评论书籍

> ID：14598415
> 
> 赞同：0
> 
> 时间：2013-01-30T07:04:25.607
> 
> 标签：data-structures

我打算这个学期学习数据结构课程。我已经通过互联网寻找与数据结构相关的材料。我想在学期开始之前对数据结构的概念有一个想法。谁能推荐我任何材料或书籍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:26:04.820

有几本书将为您提供大量的学习。仅举几例，

1.[数据结构和算法变得简单](https://rads.stackoverflow.com/amzn/click/com/1468108867)——一位印度作者的很好读物

2\. Alfred Aho 和 Ulman 的[数据结构和算法](https://rads.stackoverflow.com/amzn/click/com/0201000237)

3\. Horowitz 和 Sahni[的数据结构基础](https://rads.stackoverflow.com/amzn/click/com/0929306406)

仅举几例学习基本数据结构。除此之外，还有其他非常适合算法的书籍。但是这些书应该足以给你一个介绍。

# c# - 在 mvc 中启用和创建角色

> ID：14598416
> 
> 赞同：-2
> 
> 时间：2013-01-30T07:04:37.510
> 
> 标签：c#, asp.net-mvc, model-view-controller, authentication, authorization

如何在 mvc 中启用角色？我的代码在下面给出，我不知道如何创建角色，我想将它添加到数据库中..

```
[AttributeUsage(AttributeTargets.All)]
    public class UserRightAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            //write your user right logic
            //if user has right to do nothig otherwise redirect to error page.
            string message = "It seems You  are not authorize to view this part of the web site!!!.";
            RouteValueDictionary redirectTargetDictionary = new RouteValueDictionary();
            redirectTargetDictionary.Add("area", "");
            redirectTargetDictionary.Add("action", "SaveData");
            redirectTargetDictionary.Add("controller", "Home");
            redirectTargetDictionary.Add("customMessage", message);
            filterContext.Result = new RedirectToRouteResult(redirectTargetDictionary);
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:08:53.650

首先 web.config 添加以下内容

```
<system.web>
    <roleManager enabled="true" />
    ... 
```

添加角色与 ASP.NET 相同，例如

```
Roles.CreateRole("RoleName");
Roles.AddUserToRole("userName", "RoleName"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T16:35:11.277

Web.config 添加

```
 <membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/"/>
  </providers>
</membership>
<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
  <properties>
    <add name="insid" type="int" defaultValue="0"/>
  </properties>
</profile>
<roleManager enabled="true">
  <providers>
    <clear/>
    <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider"/>
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider"/>
  </providers>
</roleManager> 
```

> ```
> Roles.CreateRole("RoleName");
> Roles.AddUserToRole("userName", "RoleName"); 
> ```

# sql - 访问 2007 如何将字符串从函数返回到“in”语句

> ID：14598418
> 
> 赞同：1
> 
> 时间：2013-01-30T07:04:44.780
> 
> 标签：sql, ms-access

你能帮我解决这个问题吗？

我有一个`ComboBox`表单，我想将这些值返回到`in`SQL 查询中的语句中：

```
SELECT *
FROM [Actual_list query]
WHERE ((([Actual_list LSC query].[place]) In (([Forms]![Internal forms]![Places].Value)))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:43:46.957

您将需要在 VBA 中构建您的 SQL。您可以从组合中获取列表。

这是一个数字列表，字符串列表需要引号。

```
For Each itm In Me.PlacesListbox.ItemsSelected
  listofvalues = listofvalues & "," & Me.PlacesListbox.Column(0, itm)
Next

listofvalues = Mid(listofvalues,2)

sSQL="SELECT * FROM [Actual_list query] " _
    & "WHERE [Actual_list LSC query].[place] In (" & listofvalues & ")" 
```

# java - 如何在 TimerTask 执行时暂停主线程？

> ID：14598425
> 
> 赞同：2
> 
> 时间：2013-01-30T07:05:24.980
> 
> 标签：java, multithreading

```
package demo;

import java.util.Timer;
import java.util.TimerTask;

public class Demo {
    public static Timer timer = new Timer();

    static {
        MyTask task = new MyTask();
        timer.schedule(task, 1000);     
    }

    public static void main(String[] args) {
        System.out.println("Begin..."); 

        while (true) {
            // do something         
        }
    }

}

class MyTask extends TimerTask { 
    public void run() {
        // do something 

        MyTask task = new MyTask();
        Demo.timer.schedule(task, 1000);
    }
} 
```

如何使`main`线程在进入时暂停并`TimerTask`在退出时恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:20:46.697

创建一个锁并等待 MyTask 设置 isFinished 标志并调用 lock.notify()

```
static Object lock = new Object();
static boolean isFinished;

public static void main(String[] args) throws Exception {
    System.out.println("Begin...");
    synchronized (lock) {
        while (!isFinished) {
            lock.wait();
        }
    }
} 
```

注意 lock.wait() 需要在一个 while 循环中，Java 不保证你的线程只会被通知唤醒，请参阅 Object.wait API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:30:51.100

有用性取决于执行主循环中的“做某事”需要多长时间，如果时间很长，您的计时器任务将具有不可预测的间隔，因为它们需要等待当前循环完成。主线程暂停以让定时器任务在循环结束时获得锁，并且在定时器任务完成并释放锁之前不会再次恢复。将“true”传递给构造函数使锁“公平”，以确保 timertask 有机会运行，并且主循环不会无限期地重新获取锁。

另外，请参阅这篇文章，了解为什么计时器任务不能（嗯，不应该，您实际上仍然可以这样做......）命令主线程只是任意停止： http: [//docs.oracle.com/javase/6/ docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html](http://docs.oracle.com/javase/6/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)

```
package demo;

import java.util.Timer;
import java.util.TimerTask;

public class Demo {
    public static Timer timer = new Timer();
    public static Lock lock = new ReentrantLock(true);

    static {
        MyTask task = new MyTask();
        timer.schedule(task, 1000);     
    }

    public static void main(String[] args) {
        System.out.println("Begin..."); 

        while (true) {
            lock.lock();
            try {
            // do something
            finally {
              lock.unlock();
            }         
        }
    }

}

class MyTask extends TimerTask { 
    public void run() {
        Demo.lock.lock();
        try {
          // do something

          MyTask task = new MyTask();
          Demo.timer.schedule(task, 1000);
        finally {
            Demo.lock.unlock();
        } 
    }
} 
```

# javascript - 如何检测一个点是否在一个圆圈中？

> ID：14598426
> 
> 赞同：8
> 
> 时间：2013-01-30T07:05:25.807
> 
> 标签：javascript, google-maps, google-maps-api-3

如何测试 LatLng 点是否在圆的范围内？（谷歌地图 JavaScript v3）

getBounds() 方法返回圆的边界框，它是一个矩形，所以如果一个点落在圆之外但在边界框内，你会得到错误的答案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T11:42:41.527

使用[球面几何库](https://developers.google.com/maps/documentation/javascript/geometry#Distance)（确保将其包含在 API 中）

```
function pointInCircle(point, radius, center)
{
    return (google.maps.geometry.spherical.computeDistanceBetween(point, center) <= radius)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:09:25.680

您可以手动进行距离比较，相当简单。

```
(x1 - x2)^2 + (y1 - y2)^2 <= D^2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T07:24:37.957

您可以使用 Circle 对象来显示它；

```
new google.maps.Circle({
            map : map,
            center : new google.maps.LatLng(lat,lng),
            strokeColor:'#00FFCC',
            strokeWeight:2,
            fillOpacity:0,
            radius:radiusm
        }); 
```

并将勾股定理应用于坐标：但在这种情况下，要使其成为“真实”圆，因为纬度和经度之间的 1° 之间的比率因纬度而异，您至少应该像这样调整它们：

```
var kmRadius = 100; //(radius of 100 km)
var lat_gap = kmRadius/111.1;
var lng_gap = lat_gap / Math.cos(lat / (Math.PI/180)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:11:52.553

你为什么不简单地用[勾股定理](http://en.wikipedia.org/wiki/Pythagorean_theorem)来计算呢？你知道a²+b²=c²。如果 c 低于 r（半径），你就知道它在里面。

```
var isInside=Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2) >= r*r; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T07:27:59.250

像这样的东西应该可以解决问题（代码未经测试）：

```
public boolean pointInCircle(Circle c, LatLng coord) {
  Rectangle r = c.getBounds();
  double rectX = r.getX();
  double rectY = r.getY();
  double rectWidth = r.getWidth();
  double rectHeight = r.getHeight();

  double circleCenterX = rectX + rectWidth/2;
  double circleCenterY = rectY + rectHeight/2;

  double lat = coord.getLatitude();
  double lon = coord.getLongitude();

  // Point in circle if (x−h)^2 + (y−k)^2 <= r^2
  double rSquared = Math.pow(rectWidth/2, 2);
  double point = Math.pow(lat - circleCenterX, 2) + Math.pow(lon - circleCenterY, 2);

  return (point <= rSquared) ? true : false;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-13T04:09:29.480

试试这个（Javascript）：

```
const toRadians = (val) => {
   return val * Math.PI / 180;
}
const toDegrees = (val) => {
   return val * 180 / Math.PI;
}
// Calculate a point winthin a circle
// circle ={center:LatLong, radius: number} // in metres
const pointInsideCircle = (point, circle) => {
    let center = circle.center;
    let distance = distanceBetween(point, center);

    return distance < circle.radius; // Use '<=' if you want to get all points in the border
};

const distanceBetween = (point1, point2) => {
    var R = 6371e3; // metres
    var φ1 = toRadians(point1.latitude);
    var φ2 = toRadians(point2.latitude);
    var Δφ = toRadians(point2.latitude - point1.latitude);
    var Δλ = toRadians(point2.longitude - point1.longitude);

    var a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) +
            Math.cos(φ1) * Math.cos(φ2) *
            Math.sin(Δλ / 2) * Math.sin(Δλ / 2);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

    return R * c;
} 
```

参考资料：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

这个 npm 帮助器模块做同样的事情，并返回一个布尔值，表明该项目是否在圆圈中。

[https://www.npmjs.com/package/fenery](https://www.npmjs.com/package/fencery)

# cakephp - 文件未上传到 cakephp 中的文件夹（没有插件）

> ID：14598429
> 
> 赞同：0
> 
> 时间：2013-01-30T07:05:32.557
> 
> 标签：cakephp

我正在将文件上传到 CakePHP 中的文件夹。我编写了以下代码。文件名已正确插入数据库，但未上传文件。

```
function addtickets(){
$this->data['Ticket']['attachment']=date('YmdHis').$this->data['Ticket']['attachment']['name'];
            if ($this->Ticket->save($this->data)){
                $target_path = "bug/app/tmp/uploads/";
                $target_path = $target_path . basename( $_FILES['Ticket']['attachment']['name']); 
                if(move_uploaded_file($_FILES['Ticket']['attachment']['tmp_name'], $target_path)) {
                    echo "The file ".  basename( $_FILES['Ticket']['attachment']['name']). 
                    " has been uploaded";
                    } else{
                    echo "There was an error uploading the file, please try again!";
                }
         $this->Session->setFlash('Ticket created');
} else {
                $this->Session->setFlash('Cannot create a ticket');
            }
    } 
```

我在位置有上传文件夹，`bug/app/tmp/uploads`它是可写的。

但是在单击提交按钮后，所有值都插入到数据库中，但文件没有上传。

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:25:37.320

尝试这个

```
$new_file_location = APP.'tmp'.DS.'uploads'.DS.$this->data['Ticket']["attachment"]['name'];

move_uploaded_file($this->data['Ticket']["attachment"]['tmp_name'], $new_file_location); 
```

# html - 编写正则表达式根据特定标签的属性替换html段落

> ID：14598434
> 
> 赞同：1
> 
> 时间：2013-01-30T07:05:52.730
> 
> 标签：html, regex, tags

我有一个包含与 html 混合的常规文本的字符串我如何编写正则表达式，以便我可以用常规文本替换特定的 p(paragraph) 标签这是我要替换的示例：

```
 <p style="padding-left: 30px;">someText</p> 
```

正则表达式应匹配此特定标记并将其替换为与 padding-left 属性 + innerText 匹配的空格。

顺便提一句。我正在 C# 中进行正则表达式解析

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:20:08.450

您应该改用 html/xml 解析器，但假设没有嵌套标签并且您的属性和样式始终以相同的顺序定义，您可以使用以下命令：

```
text.replace(/<p.*?style=.*?padding-left: (\d+).*?>(.*?)<\/p>/, function (x) {
    console.log((new Array(Number(arguments[1]))).join(' ') + arguments[2]);
}); 
```

# jquery - jQuery CSS 计数器

> ID：14598437
> 
> 赞同：0
> 
> 时间：2013-01-30T07:06:14.950
> 
> 标签：jquery, css, increment

我正在尝试创建一个针对多个 div 的函数，一次一个取决于变量。因此，如果他们单击按钮一次，它将显示 ID 为 #tip1 的提示，如果再次单击它，它将显示 #tip2 等。

```
 <script>
        var tipCount = 0;
        $('.subtitle').click({
            function () ({
                $('#tip'+tipCount++).toggleClass('visible');
            });
        });         
        </script> 
```

我已经用谷歌搜索了一个多小时，但无法让它工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:10:23.737

```
 var tipCount = 0;
    $('.subtitle').click(
        function () {
            $('#tip'+tipCount).hide();
            $('#tip'+(tipCount++)).show();
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:10:32.273

```
var tipCount = 0;
$('.subtitle').click(function(){
    $('#tip'+tipCount++).toggleClass('visible');
}); 
```

鉴于您的语法，可能有错误`(`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:19:44.017

主要问题是javascript格式不正确。这是方法的工作证明。

# html

```
<h2 class="subtitle">Subtitle</h2>

<div id="tip1">This is tip 1</div>
<div id="tip2">This is tip 2</div>
<div id="tip3">This is tip 3</div>
<div id="tip4">This is tip 4</div>
<div id="tip5">This is tip 5</div> 
```

# css

```
.hidden{
    display: none;
} 
```

# javascript

```
var tipCount = 0;
$('.subtitle').click(function(){
    $('#tip'+tipCount++).toggleClass('hidden');
}); 
```

# 演示：http: [//jsfiddle.net/7sgRu/](http://jsfiddle.net/7sgRu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:38:03.343

HTML

```
<button>bum</button
<div class="hidden" id="tip1">This is tip 1</div>
<div class="hidden" id="tip2">This is tip 2</div>
<div class="hidden" id="tip3">This is tip 3</div>
<div class="hidden" id="tip4">This is tip 4</div>
<div class="hidden" id="tip5">This is tip 5</div> 
```

CSS

```
.hidden{
    display: none;
} 
```

JavaScript

```
var tipCount = 1;
$('button').click(function(){
    if(tipCount==6){
        $('#tip5').addClass('hidden');
        tipCount=1;
    }    
    $('#tip'+tipCount).removeClass('hidden');
    tipCount--;
    $('#tip'+tipCount++).addClass('hidden');
    tipCount++;
}); 
```

演示：http: [//jsfiddle.net/7sgRu/4/](http://jsfiddle.net/7sgRu/4/)

# html - 想要显示带有 fancybox 库的 HTML 表格

> ID：14598438
> 
> 赞同：0
> 
> 时间：2013-01-30T07:06:15.857
> 
> 标签：html, fancybox-2

这是我在此的头一篇博文。希望就以下问题获得帮助：

1.  想要在画廊的每张图片下方显示一个 HTML 表格。我怎样才能做到这一点。

2.  当我想显示一个带有画廊图像的网页时，第一页总是可以的，但fancybox 不能正确显示其他网页。我怎么解决这个问题。

一个fancybox的新手，所以请展示完整的程序。

# php - Amazon XML：搜索产品并返回包括价格在内的结果

> ID：14598439
> 
> 赞同：0
> 
> 时间：2013-01-30T07:06:19.490
> 
> 标签：php, xml-parsing, amazon-web-services, amazon

我正在尝试做非常简单的事情，我只需要在 Amazon 中搜索并返回包含产品、描述和价格的 XML。这是我发送的最终地址：

```
http://webservices.amazon.com/onca/xml?AWSAccessKeyId=[MYKEYID]&AssociateTag=[MYASSOCIATION-TAG]&Keywords=Wireless%2520headset%2520xbox&Operation=ItemSearch&ReponseGroup=Full&SearchIndex=ALL&Service=AWSECommerceService&Timestamp=2013-01-29T21%3A04%3A49Z&Version=2011-08-01&Signature=[MY SIGNATURE] 
```

我得到了几乎所有东西，除了价格：

```
<XML .... >
<item>...</item>
<Item><ASIN>B003ZSP0WW</ASIN><ParentASIN>B001ELJPOQ</ParentASIN><DetailPageURL>http://www.amazon.com/Xbox-360-Wireless-Controller-Glossy-Black/dp/B003ZSP0WW%3FSubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB003ZSP0WW</DetailPageURL><ItemLinks><ItemLink><Description>Technical Details</Description><URL>http://www.amazon.com/Xbox-360-Wireless-Controller-Glossy-Black/dp/tech-data/B003ZSP0WW%3FSubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>Add To Baby Registry</Description><URL>http://www.amazon.com/gp/registry/baby/add-item.html%3Fasin.0%3DB003ZSP0WW%26SubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>Add To Wedding Registry</Description><URL>http://www.amazon.com/gp/registry/wedding/add-item.html%3Fasin.0%3DB003ZSP0WW%26SubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>Add To Wishlist</Description><URL>http://www.amazon.com/gp/registry/wishlist/add-item.html%3Fasin.0%3DB003ZSP0WW%26SubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>Tell A Friend</Description><URL>http://www.amazon.com/gp/pdp/taf/B003ZSP0WW%3FSubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>All Customer Reviews</Description><URL>http://www.amazon.com/review/product/B003ZSP0WW%3FSubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink><ItemLink><Description>All Offers</Description><URL>http://www.amazon.com/gp/offer-listing/B003ZSP0WW%3FSubscriptionId%3DAKIAJZRJGNZYA3M3E75Q%26tag%3DEBAZONSALE-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D386001%26creativeASIN%3DB003ZSP0WW</URL></ItemLink></ItemLinks><ItemAttributes><Manufacturer>Microsoft Software</Manufacturer><ProductGroup>Video Games</ProductGroup><Title>Xbox 360 Wireless Controller - Glossy Black</Title></ItemAttributes>
</Item> 
```

请帮忙，我应该怎么做才能看到产品价格？从亚马逊解析价格的任何更简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:37:20.720

尝试将其更改`&ReponseGroup=Full`为`&ReponseGroup=Large`那里，您将获得全部数据，但它也包括价格。它将在属性标签中。

注意：尝试将其更改为`&ReponseGroup=Small`您将获得较少的数据，但我不确定价格是否存在。

这是亚马逊产品广告 API 的代码

```
<?php
error_reporting(0);

define('AWS_API_KEY', 'your key');
define('AWS_API_SECRET_KEY', 'your key');
define('AWS_ASSOCIATE_TAG', 'your tag');
define('AWS_ANOTHER_ASSOCIATE_TAG', '');

define('PRODUCT_NUMBER', 20);

  require('./lib/AmazonECS.class.php');

$category                   = $_REQUEST['category'];
$search                     = $_REQUEST['search'];
$page                       = (isset($_REQUEST['page']) && $_REQUEST['page'] != 0)?$_REQUEST['page']:1;

try
{
    $amazonEcs              = new AmazonECS(AWS_API_KEY, AWS_API_SECRET_KEY, 'com', AWS_ASSOCIATE_TAG);

    $amazonEcs->associateTag(AWS_ASSOCIATE_TAG);
    $amazonEcs->returnType(AmazonECS::RETURN_TYPE_ARRAY);

    $response               = $amazonEcs->responseGroup('Large')->page(1)->category($category)->search($search);
    $page_count             = ceil(PRODUCT_NUMBER/10);
    $page_offset            = ($page-1)*$page_count+1;
    if($response['Items']['TotalPages'] <= $page_count){
         $page_count        = $response['Items']['TotalPages'];
    }
    $array_result           = array();
    for($i=$page_offset; $i<($page_count+$page_offset); $i++){
        $response_nxt       = $amazonEcs->responseGroup('Large')->page($i)->category($category)->search($search);
        $result_temp        = array_merge($array_result, $response_nxt['Items']["Item"]);
        $array_result       = $result_temp;
    }
    echo "<pre>";
    print_r($array_result);

}
catch(Exception $e)
{
  echo $e->getMessage();
}
?> 
```

# javascript - Bootstrap 弹出框不会在刚刚添加到 DOM 的元素上触发

> ID：14598445
> 
> 赞同：0
> 
> 时间：2013-01-30T07:07:00.590
> 
> 标签：javascript, css, twitter-bootstrap, popover

当我将鼠标悬停在 div 上时，我正在显示一个图标。

在单击该图标时，我想显示一个弹出框。

出于某种原因，弹出窗口根本不会触发。

我的 HTML：

```
<div class="kpi">
    <p>this is the kpi</p>
</div> 
```

我的 JavaScript：

```
$('.kpi').live('mouseenter', function(e) {
        $(this).find('p:first').append('<span class="gear" style="margin-left: 10px; position: absolute;"><i class="icon-cog"></i></span>');
    });

    $('.kpi').live('mouseleave', function(e) {
        $('.gear').remove();
    });

    $('.gear').popover({
        title:"titke",
        content:"click me",
        trigger:"click"
    });

$('.gear').live('click', function(e) {
    alert('clicked the gear');    
}); 
```

我可能会犯任何菜鸟错误吗？

这是[小提琴](http://jsfiddle.net/pAXGX/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:34:43.027

`popover`在不存在的元素上初始化。

```
$('.kpi').live('mouseenter', function(e) {
    $(this).find('p:first').append('<span class="gear" style="margin-left: 10px; position: absolute;"><i class="icon-cog"></i></span>');

    //Call the popover after creation of gear
    $('.gear').popover({
        title:"titke",
        content:"click me",
        trigger:"click"
    });

});

    $('.kpi').live('mouseleave', function(e) {
        $('.gear').remove();
    });

$('.gear').live('click', function(e) {
    alert('clicked the gear');    
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/pAXGX/4/)

您需要在创建元素并将其附加到 dom 之后调用`$('.gear').popover({...})`（`.gear`之后`$(this).find('p:first').append(...)`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:36:52.617

首先，您的 JSFiddle 缺少 jQuery popover 插件：我假设您想要包含[这个](http://daveyijzermans.nl/jquery/popover/demo.html).

但真正的问题是这行代码：

```
$(this).find('p:first').append('<span class="gear" .... 
```

当悬停`.kpi`. .popover 的初始化已经执行，并且不再为此类执行。我们需要再次为新创建的元素应用它，如下所示：

```
var span = $('<span class="gear" style="margin-left: 10px; position: absolute;"><i class="icon-cog"></i></span>');

span.popover({
    title: "title",
    content: "click me",
    trigger: "click"
});

$(this).find('p:first').append(span); 
```

尽管它可能不完全是您想要的（因为您`click`应用了第二个“”句柄），但我认为您可以从这里获取它。

**[JSFiddle 证明](http://jsfiddle.net/pAXGX/3/)**。

# iphone - Youtube 是否使用 HTTP 实时流媒体？

> ID：14598449
> 
> 赞同：0
> 
> 时间：2013-01-30T07:07:30.270
> 
> 标签：iphone, ios, ipad, http, youtube

我正在研究 HTTP Live-streaming。苹果表示它只会支持带有 HTTP 直播协议的大型视频

我想在 iOS 中显示一个 Youtube 视频，Youtube 是否使用 HTTP 直播，这样可以吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-06T12:42:39.213

实际上，我们永远不知道 YouTube 使用的是哪种流媒体。但如果您在应用程序中显示 YouTube 视频，Apple 不会拒绝。

我们可以在 UIWebView 中使用 iFrame 显示 YouTube 视频。似乎很多应用程序都在做同样的事情。

```
<!DOCTYPE html>
<html>
<body>

<iframe width="420" height="345"
src="http://www.youtube.com/embed/XGSy3_Czz8k">
</iframe>

</body>
</html> 
```

参考：[http ://www.w3schools.com/html/html_youtube.asp](http://www.w3schools.com/html/html_youtube.asp)

# php - 如何保持标签值始终附加并且不被新值替换

> ID：14598451
> 
> 赞同：0
> 
> 时间：2013-01-30T07:07:32.173
> 
> 标签：php, javascript, jquery

我想用自动建议制作一个多标签并用逗号分隔。我有一个问题。每次我从建议结果中单击。它总是被新值替换。

这是我的代码：

**HTML：**

```
<input type="text" id="ftags" autocomplete="off" value="" name="tags" onkeyup="lookup(this.value);">
<div id="suggestions" style="top: 26px; display: block;">
    <p id="searchresults">
        <span class="category">AirCraft</span>
            <a href="#" class="searchlink" id="data_1"><span class="searchheading" data="Ace Aviation" id="span_1">Ace Aviation</span></a>
            <a href="#" class="searchlink" id="data_2"><span class="searchheading" data=" Ackland" id="span_2"> Ackland</span></a>
            <a href="#" class="searchlink" id="data_3"><span class="searchheading" data="Adam Aircraft" id="span_3">Adam Aircraft</span></a><span class="seperator">
            <a href="" title="Sitemap">Nothing interesting here? Try the sitemap.</a>
        </span>
        <br class="break">
    </p>
</div> 
```

**jQuery**

```
function lookup(inputString) {
        if(inputString.length == 0) {
            $('#suggestions').fadeOut(); // Hide the suggestions box
        } else {
            $.post("modul/mod_album/rpc.php", {queryString: ""+inputString+""}, function(data) { // Do an AJAX call
                $('#suggestions').fadeIn(); // Show the suggestions box
                $('#suggestions').html(data); // Fill the suggestions box

            });
        }
}

$('.searchlink').click(function(e) {

        var parent  = $(this).closest('a').attr('id').replace('data_','');

        var val_data = $("#span_"+parent).attr('data');
        var ftag = $("#ftags").val();

       $("#ftags").val(val_data).focus();     

       e.preventDefault();

}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:14:43.077

考虑一行代码！ `var combo = ftag + val_data ;`

```
var val_data = $("#span_"+parent).attr('data');
var ftag = $("#ftags").val();
var combo = ftag + val_data ;
$("#ftags").val(combo).focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:12:22.943

此指令替换内容：

```
 $('#suggestions').html(data); 
```

您可能想要按照以下方式做一些事情：

```
 // append to current content
  $('#suggestions').html(  $('#suggestions').html()+data); 
```

或者，如果您需要一些 html 来分隔标签，

```
 var currentTags =  $('#suggestions').html();
  if (currentTags != '')
    currentTags += ',&nbsp;';
  $('#suggestions').html( currentTags+data); 
```

# iphone - UITextField textFieldShouldChange 没有给出完整的字符串

> ID：14598454
> 
> 赞同：1
> 
> 时间：2013-01-30T07:07:46.207
> 
> 标签：iphone, ios, uitextfield

我的代码是

```
 -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
 NSLog(@"%@",petTypeTextFeild.text);

return YES;
} 
```

当我输入“a”时，没有打印任何内容当我输入下一个字母“s”时，打印“a”我想要全文。

有没有像 textFinishChange 这样的其他方法？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:15:45.117

使用以下内容：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSLog(@"%@",newString);
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:25:54.663

这是一个在 textField 实际更改其值之前调用的委托，

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

这就是为什么你得到旧值的原因，所以你应该使用这条线来获得确切的价值

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
NSString *str = [textField.text stringByReplacingCharactersInRange:range withString:string];
NSLog(@"%@",str);
return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T07:11:50.613

在该方法中，您无法获得全文。如果您返回 Yes，则仅允许该特定字母，如果返回 No，则不允许更改文本。并使用此方法获取完整的文本。

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
```

# rabbitmq - rabbitmq是双向的吗？

> ID：14598456
> 
> 赞同：9
> 
> 时间：2013-01-30T07:07:55.767
> 
> 标签：rabbitmq

Producer向rabbitmq发送消息，consumer从rabbitmq接收消息，然后consumer通过rabbitmq将消息发送回producer。

可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:41:53.867

您是在尝试实现 RPC 类型的系统，还是只想知道如何双向发送消息？

基本管道是单向的。您不能通过消费者从生产者接收消息的同一队列将消息从消费者发送到生产者。

如果你想以另一种方式发送消息，你的消费者也需要是生产者，你的生产者也需要是消费者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:32:14.057

是的，它可能，但是生产者还必须监听一个队列，客户端将在该队列上发布/生产...，您可以在从生产者发送到客户端的第一个 msg 中发送 queueName/routingkey（生产者的）。 . 客户端在收到带有routingkey的msg后，可以将msg发送给原始生产者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T22:18:20.370

生产者需要另一个队列来从消费者那里获取响应，即所谓的回调队列。生产者可以发送带有reply_to 和correlation_id 的请求。然后，消费者可以利用reply_to作为路由键来指向正确的回调队列，生产者可以将回调队列出队并匹配correlation_id。

# embedded-linux - 为 Raspberry Pi 构建最小的 Linux

> ID：14598457
> 
> 赞同：14
> 
> 时间：2013-01-30T07:07:56.720
> 
> 标签：embedded-linux, raspberry-pi

现在我得到了我的树莓派。我是一位经验丰富的应用软件开发人员，但我以前从未做过硬件或低级编程。我想构建一个最小的 Linux，包括我的 Pi 上所有硬件的驱动程序。出于学习目的，我不想在我的 Pi 上安装任何预构建的 Linux 发行版。我应该从哪里开始？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T08:53:11.973

您还可以查看 Buildroot，[http:](http://buildroot.org) //buildroot.org 。我们有一个 Rasberry-Pi 的默认配置，并且一些贡献者正在努力支持这个平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:48:59.653

[从openembedded](http://www.openembedded.org/wiki/Main_Page)开始。已经有几个专用于树莓派的链接，例如：

*   [http://www.pimpmypi.com/blog/blogPost.php?blogPostID=7](http://www.pimpmypi.com/blog/blogPost.php?blogPostID=7)
*   [http://blogs.distant-earth.com/wp/?p=377](http://blogs.distant-earth.com/wp/?p=377)
*   [http://www.openembedded.org/wiki/LayerIndex](http://www.openembedded.org/wiki/LayerIndex)

# android - 从未在数据库上显式调用关闭

> ID：14598459
> 
> 赞同：2
> 
> 时间：2013-01-30T07:08:00.113
> 
> 标签：android, database, android-sqlite

我有一个由 sqlite db 提供的列表视图。我在几个不同的点调用 fillData() 来更新列表视图。

```
private void fillData() {
    readDatabase.open();
    Cursor itemsCursor = readDatabase.fetchAllItems();

    startManagingCursor(itemsCursor);

    String[] from = new String[] { DatabaseHandler.KEY_ITEM,
            DatabaseHandler.KEY_UNITCOST, DatabaseHandler.KEY_QUANTITY,
            DatabaseHandler.KEY_TOTAL };

    int[] to = new int[] { R.id.itemtext, R.id.costtext, R.id.quantitytext,
            R.id.totaltext };

    SimpleCursorAdapter items = new SimpleCursorAdapter(this,
            R.layout.rowincart, itemsCursor, from, to);

    setListAdapter(items);
    } 
```

**类的全部代码在这里添加**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.cartactivity);
    readDatabase = new DatabaseHandler(this);
//  readDatabase.open();
    loadwidget();
    fillData();
    ListView lv = getListView();
    this.registerForContextMenu(lv);

}

private void loadwidget() {
    Bundle extras = getIntent().getExtras();
    cost = extras.getInt("Cost");
    quantity = extras.getInt("quantity");
    product = extras.getString("product");
    Log.i("Hello Testing", cost + " and " + quantity + "   " + product);

}

@SuppressWarnings("deprecation")
private void fillData() {
    readDatabase.open();
    itemsCursor = readDatabase.fetchAllItems();

    startManagingCursor(itemsCursor);

    String[] from = new String[] { DatabaseHandler.KEY_ITEM,
            DatabaseHandler.KEY_UNITCOST, DatabaseHandler.KEY_QUANTITY,
            DatabaseHandler.KEY_TOTAL };

    int[] to = new int[] { R.id.itemtext, R.id.costtext, R.id.quantitytext,
            R.id.totaltext };

    SimpleCursorAdapter items = new SimpleCursorAdapter(this,
            R.layout.rowincart, itemsCursor, from, to);

    setListAdapter(items);

    }

@Override
protected void onDestroy() {
    super.onDestroy();
    itemsCursor.close();
    readDatabase.close();
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    menu.setHeaderTitle("SMARTAWAY");

    menu.add(0, DELETE_ID, 1, "Delete Item");

    menu.add(0, UPDATE_ID, 1, "Change Quantity");
}

public boolean onContextItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case DELETE_ID:
        AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
                .getMenuInfo();
        readDatabase.deleteItem(info.id);
        fillData();
        return true;
    case UPDATE_ID:

        final AdapterContextMenuInfo info1 = (AdapterContextMenuInfo) item
                .getMenuInfo();
        final Dialog dialog = new Dialog(Cartactivity.this);
        dialog.setContentView(R.layout.dialog);
        final EditText edit0 = (EditText) dialog
                .findViewById(R.id.quantity);
        edit0.setText(String.valueOf(Quantity));
        Button ok = (Button) dialog.findViewById(R.id.ok);
        dialog.setTitle("          Add More Items          ");
        dialog.setCancelable(true);
        Button inc = (Button) dialog.findViewById(R.id.inc);
        inc.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int c = Integer.parseInt(Quantity);
                c = c + 1;
                Quantity = String.valueOf(c);
                edit0.setText(Quantity);

            }
        });
        Button dec = (Button) dialog.findViewById(R.id.dec);
        dec.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                int c = Integer.parseInt(Quantity);
                c = c - 1;
                Quantity = String.valueOf(c);
                edit0.setText(Quantity);
            }
        });
        ok.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                row1 = info1.id; 
                flag = 1;
                int b = Integer.parseInt(Quantity);
                int total = cost * b;
                _total = String.valueOf(total);
                _cost = String.valueOf(cost);
                _quantity = String.valueOf(b);
                _item = product;

                Log.i(row1+" id"+_total +" total"+ _cost +" cost"+ _quantity+" quant", "Hello updated database");

                readDatabase.updateItem(row1, _item, _cost, _quantity, _total);

                fillData();

                dialog.dismiss();

            }
        });
        Button cancel = (Button) dialog.findViewById(R.id.cancel);
        cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            dialog.dismiss();   
            }
        });
        dialog.show();

        return true;
    }

    return super.onContextItemSelected(item);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long thisID) {
    super.onListItemClick(l, v, position, thisID);

    l.showContextMenuForChild(v);

    Cursor cursor = (Cursor) getListAdapter().getItem(position);
    Quantity = cursor.getString(cursor
            .getColumnIndex(DatabaseHandler.KEY_QUANTITY));
    /*Total = cursor.getString(cursor
            .getColumnIndex(DatabaseHandler.KEY_TOTAL));*/

} 
```

这里一切都很好，但是我在 Logcat 中发现了一些错误，即 close() 没有在数据库上显式调用，就像这样。该错误不会停止我在任何地方的工作，但问题看起来很奇怪。我想我必须关闭光标，但不确定。我已经在 Destroy 上关闭了数据库，但不确定游标。请帮忙。

[这里](https://stackoverflow.com/questions/5707713/close-was-never-explicitly-called)提到了同样的问题，但没有得到实际的解决方案

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:13:14.597

每次使用后都会关闭您`cursor`的问题，然后您的问题将得到解决

```
itemsCursor.close() 
```

由于您没有关闭它，因此当您关闭数据库时，不会释放游标的资源，您会收到该错误。

将您的光标作为全局变量，然后在您的`onDestroy`

```
@Override
protected void onDestroy() {
    super.onDestroy();
    itemsCursor.close();
    db.close();
} 
```

由于您现在将`close`语句添加为`filldata`方法的最后一个语句，因此`Adapter`of`listview`没有获得任何数据`cursor`，因为您没有在`listview`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:15:14.000

你应该关闭你的`cursor`对象和方法`database`中的对象`onDestroy()`，

```
if (itemsCursor!=null){
    itemsCursor.close();
}
if (readDatabase!=null){
    readDatabase.close();
} 
```

**编辑-** 您是否尝试在 fillData() 函数的末尾关闭光标，

```
@SuppressWarnings("deprecation")
private void fillData() {
    readDatabase.open();
    itemsCursor = readDatabase.fetchAllItems();

    startManagingCursor(itemsCursor);

    String[] from = new String[] { DatabaseHandler.KEY_ITEM,
            DatabaseHandler.KEY_UNITCOST, DatabaseHandler.KEY_QUANTITY,
            DatabaseHandler.KEY_TOTAL };

    int[] to = new int[] { R.id.itemtext, R.id.costtext, R.id.quantitytext,
            R.id.totaltext };

    SimpleCursorAdapter items = new SimpleCursorAdapter(this,
            R.layout.rowincart, itemsCursor, from, to);

    setListAdapter(items);
    if (itemsCursor!=null){
    itemsCursor.close();
     }
    if (readDatabase!=null){
        readDatabase.close();
      }
    } 
```

# c# - 在外部应用程序中捕获按钮的单击事件

> ID：14598468
> 
> 赞同：1
> 
> 时间：2013-01-30T07:09:07.380
> 
> 标签：c#, winforms, ui-automation

我想知道是否单击了外部应用程序中的按钮。在我不得不自己点击之前，我使用了以下代码：

```
//Get window
IntPtr wrapUp = Win32API.FindWindowByText(Win32API.GetDesktopWindow(), "WRAP-UP");
if ((int)wrapUp > 0)
{
    Win32API.SetFocus(wrapUp);
    IntPtr okButton = Win32API.FindWindowByText(wrapUp, "OK");
    Win32API.SetFocus(okButton);
    Win32API.PostMessage(okButton, Win32API.BM_CLICK, 0, 0);
} 
```

但现在我需要知道用户何时单击该按钮。有没有办法做到这一点？

我一直在搜索，我发现了几种从代码中执行点击的方法，但不是用于监听事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:38:59.593

您可以使用[SetWinEventHook](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373640%28v=vs.85%29.aspx)设置事件挂钩函数并侦听`EVENT_OBJECT_INVOKED`指示调用了对象（例如单击了按钮）。

# git - 使用 Nginx 和 Phusion Passenger 将 Rails Gitlab 项目自动部署到子域

> ID：14598470
> 
> 赞同：3
> 
> 时间：2013-01-30T07:09:15.760
> 
> 标签：git, nginx, passenger, gitlab

我刚刚在虚拟机上安装了 Nginx、Phusion Passenger 和 Gitlab。几乎我所有的项目都是 Rails 应用程序。如果我可以在创建新项目时自动将它们托管在子域上，而不必单独配置它们，那就太好了。

因此，当用户创建项目时，会生成一个 nginx 配置文件来响应`[repo].[user].[mydomain].com`

我目前的计划是有一个脚本以某种方式在新位置（例如`/var/www/`）创建主分支的副本，然后生成匹配的 nginx 脚本。

如何创建一个可以实现此目的的钩子？以及如何只创建一次 repo，如果它已经退出，则只进行拉取？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:27:55.240

[GitLab](http://gitlab.org/)在[Gitolite](https://stackoverflow.com/questions/13318715/how-do-programs-like-gitolite-work)上使用。
并且 Gitolite 允许将[更新挂钩作为 VREF](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)：您可以声明一个应用于所有存储库，这将生成您想要的文件并执行适当的操作，前提是该存储库为空（刚刚创建）。

# iphone - 使用 XML 和 RestKit 进行映射

> ID：14598473
> 
> 赞同：1
> 
> 时间：2013-01-30T07:09:26.097
> 
> 标签：iphone, ios, xml, restkit, cocoapods

自从我升级[了 RestKit](http://restkit.org)并开始使用[cocoapods](http://cocoapods.org)我的旧映射停止工作，因为所有值现在都嵌套在字典中。

有没有更优雅的方法来为 XML 进行 RestKit 映射（我知道 JSON 是 RestKit 的主要攻击线，但 XML 也不会很快消失。

### 更新前的映射

```
[mapping mapAttributes:@"username", @"password", @"firstName", @"lastName", nil]; 
```

### `.text`现在用后缀映射

```
[mapping mapKeyPath:@"username.text" toAttribute:@"username"];
[mapping mapKeyPath:@"firstName.text" toAttribute:@"firstName"];
[mapping mapKeyPath:@"lastName.text" toAttribute:@"lastName"]; 
```

### 我的播客文件

```
platform :ios, '6.0'

pod 'RestKit', '0.10.3'
pod 'RestKit/ObjectMapping/XML', '0.10.3' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:29:35.610

使用 0.20.0 版本的 RestKit。

一个 wiki 可用：[https ://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

# ruby-on-rails-3 - 我们可以用 mongoid 中的关联来定义 cancan 的能力吗

> ID：14598476
> 
> 赞同：2
> 
> 时间：2013-01-30T07:09:47.823
> 
> 标签：ruby-on-rails-3, mongoid, authorization, cancan

我正在尝试定义一种能力：

```
# customer.rb
class Customer
  include Mongoid::Document

  has_many :accounts
end

class Account
  include Mongoid::Document

  belongs_to :site
end

# ability.rb
can :manage, Customer, accounts: { :site_id.in => user.managed_site_ids }

# customers_controller.rb
Customer.accessible_by(current_ability) 
```

它总是返回空结果，我不确定，但我认为是因为 mongoid 不支持连接查询。你知道什么是错的，或者其他的选择吗？

# sql - 如何从 DbVisualiser 中删除表中的重复行

> ID：14598477
> 
> 赞同：0
> 
> 时间：2013-01-30T07:09:50.490
> 
> 标签：sql, dbvisualizer

我有一个名为 的表`ORG_MAP`，它包含 200 条记录，我执行了一个查询以将这 200 条记录复制到另一个名为`ORG_MAP_1`（的重复表`ORG_MAP`）的表中，但是发生的事情是相同的 200 条记录被插入到同一个`ORG_MAP`表中。

现在我想删除那些重复的记录。我不知道该怎么做。

请帮我。我正在使用 db Visualizer8.0.11 版本。

我使用的查询是：

```
INSERT INTO METRICS.ORG_MAP (REPORT_END_DATE,ENTITY,ENTITY_TYPE,RELATIONSHIP,TARGET,TARGET_TYPE)
SELECT REPORT_END_DATE,ENTITY,ENTITY_TYPE,RELATIONSHIP,TARGET,TARGET_TYPE
FROM METRICS.ORG_MAP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:07:34.350

我认为您的问题没有任何直接的解决方案，但我已经做了一些工作，可能对您有用....

```
create table #table(id int,c varchar(2))
insert into #table values('1','a')
insert into #table values('1','a')
insert into #table values('2','b')
insert into #table values('2','b')
insert into #table values('3','c')
insert into #table values('3','c')
insert into #table values('4','d')
insert into #table values('5','d')

declare @table table(uid int,id int ,c varchar(2));

with tbl as (
    select ROW_NUMBER() OVER(ORDER BY id DESC) AS uid ,id,c from #table
) 

insert into @table select * from tbl

declare @tmpid int,@tmpuid int,@cnt int
declare tmpc cursor 
for select uid,id from @table;

open tmpc

fetch next from tmpc 
into @tmpuid,@tmpid

while @@FETCH_STATUS = 0
BEGIN
set @cnt = (select COUNT(id) from @table where id = @tmpid)
IF (@cnt > 1)
BEGIN   
    delete from @table where uid = @tmpuid      
END

fetch next from tmpc 
into @tmpuid,@tmpid

END 

CLOSE tmpc; 
DEALLOCATE tmpc;

select * from @table

drop table #table 
```

# ios - 将一维数组转换为具有指定列数的二维数组

> ID：14598486
> 
> 赞同：0
> 
> 时间：2013-01-30T07:10:29.927
> 
> 标签：ios, objective-c, cocoa-touch

我正在传递一个具有元素“1,2,3,4,5,6,7”的一维数组，并且在我的代码中我想将此数组转换为二维数组。二维数组的列数将由 user 指定。说如果我将列值设置为 3

那么输出的二维数组应该是格式

```
123
456
7 
```

我班级的 .m 文件

```
-(NSMutableArray *)OneToTwoDimensionalArray:(NSMutableArray *)values :(NSInteger)columns
{
    NSMutableArray * twoDimensional=[[NSMutableArray alloc]initWithCapacity:columns];
    for(int i=0;i<columns;i++)
    {
        [twoDimensional insertObject:values atIndex:i];
    }
    return twoDimensional;
} 
```

视图控制器.m 文件

```
 EPArray *arr=[[EPArray alloc]init];
    int columns=4;
    arr1=[[NSMutableArray alloc]initWithObjects:@"1",@"2",@"3",@"4",@"5",@"6",@"7",nil];
    NSMutableArray *finalresult=[arr OneToTwoDimensionalArray:arr1 :columns];
    for(int i=0;i<columns;i++)
    {
        NSLog(@"%@",[finalresult objectAtIndex:i]);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:47:39.483

尝试这个，

```
NSArray *array = @[@"1", @"2", @"3", @"4", @"5", @"6", @"7"];
int noOfColumns = 3;

NSMutableArray *outerArray = [[NSMutableArray alloc] init];

for (int counter = 0; counter < [array count]; counter = counter + noOfColumns) {
    NSMutableArray *innerArray = [[NSMutableArray alloc] init];
    for (int arrayIndex = counter; ((arrayIndex < counter + noOfColumns) && (arrayIndex < [array count])); arrayIndex++) {
        [innerArray addObject:array[arrayIndex]];
    }
    [outerArray addObject:innerArray];
}

NSLog(@"outerArray = %@", outerArray); 
```

这里`outerArray`将给出具有提供的列值的二维数组。上面的代码可读且易于维护，特别是如果您想进行一些快速更改。

**输出：**

```
outerArray = (
        (
        1,
        2,
        3
    ),
        (
        4,
        5,
        6
    ),
        (
        7
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:49:35.927

[在我的另一个答案](https://stackoverflow.com/a/14599505/106435)（我更喜欢）旁边，我想提供另一个解决方案，它使用更传统的 C 风格编程，但可读性很强。

```
NSUInteger columnWidth = 3;
NSArray *array =  @[@1, @2, @3, @4 ,@5, @6, @7];
NSMutableArray *newArray = [NSMutableArray array];
NSUInteger columnIdx = 0;
for (NSUInteger count = 0; count < [array count]; ++count) {
    if (columnIdx == 0) {
        [newArray addObject:[NSMutableArray array]];
    }
    NSMutableArray *lastArray = [newArray lastObject];
    [lastArray addObject:array[count]];
    columnIdx = (++columnIdx)%columnWidth;
} 
```

newArray 现在包含所需的子数组。

请注意，此解决方案也使用模运算符`columnIdx = (++columnIdx)%columnWidth;`。
而不是这个，你也可以写

```
++columnIdx;
if(columnIdx == columnWidth) columnIdx = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:23:30.237

```
NSUInteger columnWidth = 3;
NSArray *array = @[@1, @2, @3, @4 ,@5, @6, @7];
NSMutableArray *mArray =[NSMutableArray array];
[array enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    if (idx % columnWidth == 0) {
        [mArray addObject:[NSMutableArray array]];
    }
    [[mArray objectAtIndex:[mArray count]-1] addObject:obj];
}]; 
```

`mArray`现在包含 3 个数组

```
(
    (
        1,
        2,
        3
    )
,
    (
        4,
        5,
        6
    )
,
    (
        7
    )
) 
```

此代码使用模运算符来查找一个数除以另一个数的余数。

```
if (idx % 3 == 0) {
    [mArray addObject:[NSMutableArray array]];
} 
```

如果没有余数，它必须是索引 0,3,6,...。在这种情况下，将一个新数组添加到外部数组中。对象总是添加到最后一个数组中。

另请注意，使用`enumerateObjectsUsingBlock:`应该比使用 c-style `for`( `for(int i=0;i<columns;i++)`) 甚至快速枚举更快。

* * *

我添加了[第二个答案](https://stackoverflow.com/a/14603298/106435)，它只使用 C 结构而不是块，但我更喜欢这个。

* * *

并且——当然——你应该考虑在 NSArray 上使用一个类别

```
@interface NSArray (Columns)
-(NSArray *)arrayOfArraysWithColumnWidth:(NSUInteger)width;
@end

@implementation NSArray (Columns)
-(NSArray *)arrayOfArraysWithColumnWidth:(NSUInteger)width
{
    NSAssert(width > 0, @"width need to be 1 or greater");//sanity check
    NSMutableArray *mArray =[NSMutableArray array];
    [self enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        if (idx % width == 0) {
            [mArray addObject:[NSMutableArray array]];
        }
        [[mArray objectAtIndex:[mArray count]-1] addObject:obj];
    }];

    return mArray;

}

@end 
```

你会像这样使用它：

```
NSArray *numbers = [@[@1, @2, @3, @4 ,@5, @6, @7] arrayOfArraysWithColumnWidth:3]; 
```

# java - 将 XSLT 应用于 XML 文件

> ID：14598492
> 
> 赞同：0
> 
> 时间：2013-01-30T07:10:49.097
> 
> 标签：java, xml, xslt-1.0, xslt-2.0

> **可能的重复：**
> [在 XML 上应用 XSLT v. 2](https://stackoverflow.com/questions/14596521/applying-xslt-v-2-on-xml)

我有一个带有 XML 文件的目录结构。我有一个 XSLT 1.0，我将其应用于所有这些文件并为每个文件生成新的 XML 文件。我用 JAVA 写过代码。但我的问题是我无法将输出文件放在一个单独的输出文件夹中，该文件夹的结构与我从中获取输入 XML 文件的文件夹相同。例如，如果我有一个根目录 Home，其中包含两个文件夹 Folder1 和 Folder2。每个 Folder1 & Folder2 都有许多 XML 文件。因此，当我转换这些文件夹中存在的 XML 文件时，这样生成的输出文件应该放在具有相同结构的单独文件夹中。

这是Java代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.OutputStream;
import javax.xml.transform.Source;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

public class XMLwithXSLT {
  public static void main(String[] args) throws FileNotFoundException,    
    TransformerConfigurationException, TransformerException {

  File dir = new File("Input Directory Root Path Here");
  listFilesInDirectory(dir);
 }

 public  static void listFilesInDirectory(File dir) throws FileNotFoundException,     
       TransformerException {

   File[] files = dir.listFiles();
   if (files != null) {
     for (File f : files) {
       if (f.isDirectory()) {
         System.out.println(f.getName());
         listFilesInDirectory(f);
        } else {
        System.out.println(f.getName());
        OutputXml(f);

    }
   }
 }

    public static void OutputXml(File in) throws FileNotFoundException, 
    TransformerException{

     TransformerFactory tFactory = TransformerFactory.newInstance();
     Source xslDoc = new StreamSource("backup.xslt");
     Source xmlDoc = new StreamSource(in.getPath()) ; 
     System.out.print(in.getName() + "/n");
     String outputFileName =  in.getName();
     System.out.print(outputFileName );
     OutputStream htmlFile;
            htmlFile = new FileOutputStream(outputFileName);

     Transformer transformer = tFactory.newTransformer(xslDoc);
     transformer.transform(xmlDoc, new StreamResult(htmlFile));  
      }
   } 
```

那么任何人都可以帮助我如何指定生成的新文件的输出路径吗？另外我如何生成与输入相同目录格式的输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:13:17.053

我从您的问题中得到的是，有两个文件夹 Folder1 和 Folder2。Folder1 有一些 XML 文件，Folder2 有一些 XML 文件。假设您已将 Folder1 中存在的所有 xml 文件的输出转换为 HTML 格式。现在您希望这些 HTML 文件存在于系统中某个名为 Folder1 的文件夹中（或者让我们考虑系统的临时文件夹）。对于 Folder2 中存在的所有 XML 文件，它们都是相同的。

如果您想要这种输出，请使用以下代码更新代码

```
 import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.OutputStream;
    import javax.xml.transform.Source;
    import javax.xml.transform.Transformer;
    import javax.xml.transform.TransformerConfigurationException;
    import javax.xml.transform.TransformerException;
    import javax.xml.transform.TransformerFactory;
    import javax.xml.transform.stream.StreamResult;
    import javax.xml.transform.stream.StreamSource;

    public class XMLwithXSLT {
      static String pathRequiredForFile=null;
      static String tempfolder=System.getProperty("java.io.tmpdir");
      public static void main(String[] args) throws FileNotFoundException,    
        TransformerConfigurationException, TransformerException {

      File dir = new File("Input Directory Root Path Here");
      listFilesInDirectory(dir);
     }
     public  static void listFilesInDirectory(File dir) throws FileNotFoundException,     
           TransformerException {

       File[] files = dir.listFiles();

       if (files != null) {
         for (File f : files) {
           if (f.isDirectory()) {
               pathRequiredForFile=f.getName();

             listFilesInDirectory(f);

            } else {
            System.out.println(f.getName());
            File path=new File(tempfolder+"//"+pathRequiredForFile);
            path.mkdir();
            OutputXml(f,path.getAbsolutePath());

        }
       }
     }
     }
        public static void OutputXml(File in,String saveFileInPath) throws FileNotFoundException, 
        TransformerException{

        TransformerFactory tFactory = TransformerFactory.newInstance();
        Source xslDoc = new StreamSource("backup.xslt");
        Source xmlDoc = new StreamSource(in.getPath()) ; 
        System.out.print(in.getName() + "/n");
         String outputFileName = in.getName().split("\\.")[0];
         System.out.println(outputFileName );
         OutputStream htmlFile;
                htmlFile = new FileOutputStream(saveFileInPath+"//"+outputFileName+".html");

         Transformer transformer = tFactory.newTransformer(xslDoc);
         transformer.transform(xmlDoc, new StreamResult(htmlFile));  
          }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:16:45.447

您应该将路径添加到输出目录。例如：

```
String outputFileName = "c:\\tmp\\xmloutput\\" + in.getName(); 
```

所以基本上，循环输入文件并接管子目录和文件名。查看它是否存在于您的输出目录中，如果不存在则创建它。如果是 zo，则以这种方式命名您的 outputFileName。

# c# - 使用 C# 进行 xslt 操作

> ID：14598495
> 
> 赞同：0
> 
> 时间：2013-01-30T07:11:00.713
> 
> 标签：c#, xslt

我有一个包含 100 个字段元素的父 xslt（存在嵌套字段）。现在我需要创建一个包含 50 个字段（基于 excel 文件）的子 xslt，保留与父级相同的结构，从父级中删除一些不需要的字段。关于我如何进行的任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:34:42.133

假设您已经知道如何使用要删除的字段列表填充数组（或其他集合），您应该能够执行以下操作：

```
string[] fields = new string[] { "c", "d" };
// In actuality, the assumption is that your XmlDocument is loaded some other way
XmlDocument document = new XmlDocument();
document.LoadXml("<ABCD> <a>1</a> <b>2</b> <c>3</c> <d>4</d> </ABCD>");

string xpath = "//*[" + fields.Select(v => "self::" + v)
                              .Aggregate((a, b) => a + " or " + b) 
                      + "]";
List<XPathNavigator> nodes = document.CreateNavigator().Select(xpath).Cast<XPathNavigator>().ToList();
foreach (XPathNavigator node in nodes)
{
    node.DeleteSelf();
}

string resultDoc = document.OuterXml; 
```

# php - 使用 PHP SoapClient 时解析模式出错

> ID：14598496
> 
> 赞同：0
> 
> 时间：2013-01-30T07:11:01.337
> 
> 标签：php, wsdl

我正在尝试使用 PHP SoapClient 来使用 eBay 网络服务。只需按照 eBay 官方示例：

```
$client = new SoapClient('http://developer.ebay.com/webservices/latest/ebaysvc.wsdl'); 
```

我收到如下错误：

> SoapFault 异常：[WSDL] SOAP-ERROR：解析架构：E:\xampp\htdocs\mysite\system\application\libraries\Ebaysvc.php 中的 simpleType 中出现意外：102 堆栈跟踪：#0

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:52:05.397

请将此网址用于 wsdl [http://developer.ebay.com/webservices/753/eBaySvc.wsdl](http://developer.ebay.com/webservices/753/eBaySvc.wsdl)

我不知道为什么更改了网址。感谢巴基斯坦的那篇文章[http://www.adeelsarfaraz.com/how-to-remove-the-fatal-error-soap-error-parsing-schema-unexpected-in-sequence-error/](http://www.adeelsarfaraz.com/how-to-remove-the-fatal-error-soap-error-parsing-schema-unexpected-in-sequence-error/)

# javascript - 投资组合模板：根据星期几显示帖子数？

> ID：14598498
> 
> 赞同：1
> 
> 时间：2013-01-30T07:11:03.600
> 
> 标签：javascript, wordpress, wordpress-theming

这是给我的第二个帖子，所以如果我遗漏了什么，我深表歉意！我在 wordpress 编码方面也很弱，但我正在学习！

我正在使用投资组合模板来组织教育内容页面。每个页面有 5 个帖子，每个工作日（周一至周五）一个帖子。我每周都会有不同的小组访问不同的页面，但大多数页面都是“旧的”。因此，现在访问它们时，您会同时看到所有 5 天。

我希望他们只看到以前和今天的帖子。因此，在周一访问时，您只能看到周一的帖子，即使周一至周五已发布。周三访问您会看到周一至周三。

所有的页面都是一样的，永远只有 5 个帖子。这种方法没有太大的灵活性，但没关系。我可能会包含一个元复选框来“启用/禁用”此功能，但不需要使用那么多。

这是当前 template-portfolio.php 的链接： [https ://gist.github.com/4671326](https://gist.github.com/4671326)

这是我试图修改的那个： [https ://gist.github.com/4661867](https://gist.github.com/4661867)

这是相关的代码：

```
$days = array(
              'monday' => 1,
              'tuesday' => 2,
              'wednesday' => 3,
              'thursday' => 4,
              'friday' => 5,
              );

$args = array(
              'post_type' => 'portfolio',
              'orderby' => 'menu_order',
              'order' => 'ASC',
              'meta_value' => esc_attr( get_post_meta( $post->ID, 'portsort', true ) ),
              'posts_per_page' => $days[date( 'l', current_time('timestamp') )],
              ); 
```

我的添加不起作用。这是我试图放在那里的逻辑：

> 根据当天的日期显示#number# 个帖子。因此，如果日期返回星期四，则只显示 4 个帖子。

对我来说，这似乎很容易做到......但由于某种原因它不能正常工作。

所以......我的问题：

1.  这是使其顺利工作的适当编码逻辑吗？
2.  我在代码本身中做错了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T05:41:07.867

较旧的问题，但可能只是区分大小写的问题：

```
$days = array(
          'monday' => 1,
          'tuesday' => 2,
          'wednesday' => 3,
          'thursday' => 4,
          'friday' => 5,
          );

$current_day = strtolower( date( 'l', current_time('timestamp') ) );

$args = array(
          'post_type' => 'portfolio',
          'orderby' => 'menu_order',
          'order' => 'ASC',
          'meta_value' => esc_attr( get_post_meta( $post->ID, 'portsort', true ) ),
          'posts_per_page' => $days[$current_day],
          ); 
```

# json - 如何在 yii 框架中访问多个值 json 元素

> ID：14598502
> 
> 赞同：1
> 
> 时间：2013-01-30T07:11:36.337
> 
> 标签：json, yii

我在 extjs+yii 工作。我的服务器端设计在 yii 框架中，客户端设计在 extjs 中。现在从 extjs 我得到 json 格式的输出数据为=

```
{"data":[{"optionId":"","questionId":"1","isAnswer":"","option":"Aus","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"2","isAnswer":"","option":"india","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"3","isAnswer":"","option":"England","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"4","isAnswer":"","option":"Srilanka","media":"","keyword":"","mediaTypeId":"","id":null}]} 
```

那么在 Yii frameowk 中如何访问这个 json 字段呢？我想访问这个 json 的 questionId 和 optionId 字段。所以有人可以帮我吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:24:59.937

您必须使用 解码 json [`CJSON::decode`](http://www.yiiframework.com/doc/api/1.1/CJSON#decode-detail "http://www.yiiframework.com/doc/api/1.1/CJSON#decode-detail")，然后访问以下字段：

```
$var='{"data":[{"optionId":"","questionId":"1","isAnswer":"","option":"Aus","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"2","isAnswer":"","option":"india","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"3","isAnswer":"","option":"England","media":"","keyword":"","mediaTypeId":"","id":null},{"optionId":"","questionId":"4","isAnswer":"","option":"Srilanka","media":"","keyword":"","mediaTypeId":"","id":null}]}';
$decoded=CJSON::decode($var);
// now your json is stored in $decoded as an array, so you can access as follows:
echo $decoded["data"][0]["questionId"];
echo $decoded["data"][0]["optionId"];
// to loop over the elements use foreach
foreach ($decoded["data"] as $value){
    echo $value["questionId"];
    echo $value["optionId"];
} 
```

* * *

使用`CJSON::decode`比依赖 native 更好`json_decode`，因为当 native 不可用时，CJSON::decode 仍然可以解码 json 字符串。[同样在某些情况下`json_decode`可以返回`null`正确的 json 字符串](https://github.com/yiisoft/yii/blob/1.1.13/framework/web/helpers/CJSON.php#L329 "https://github.com/yiisoft/yii/blob/1.1.13/framework/web/helpers/CJSON.php#L329")，请阅读[此处](http://gggeek.altervista.org/sw/article_20070425.html "http://gggeek.altervista.org/sw/article_20070425.html")以比较 php json 库。

# macos - 如何更改 NSSearchField 中取消按钮的行为？

> ID：14598505
> 
> 赞同：1
> 
> 时间：2013-01-30T07:11:42.347
> 
> 标签：macos, cocoa, nssearchfield

在 Finder 中，我发现当 NSSearchfield 第一次获得焦点时取消按钮消失，但是当我在搜索字段中输入内容时，除非我点击它，否则取消按钮一直存在。我还手动创建了一个 nssearchfield 并输入了一些单词.但是，当我一个一个删除单词直到什么都没有时，最后，取消按钮消失了。它看起来像nssearchfield的默认行为，那么我该如何更改默认行为？请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-13T18:34:11.557

您可以直接访问取消按钮：

### 迅速

```
let searchField = NSSearchField()

// Change the button:
if let cell = searchField.cell as? NSSearchFieldCell,
    let cancelButton = cell.cancelButtonCell {
    // Here you can access all properties of a NSButtonCell
}

// Hide the button:
searchField.cell?.cancelButtonCell = nil 
```

### 目标 C

```
NSSearchField* searchField = [NSSearchField new]

// Change the button:
NSSearchFieldCell* cell = searchField.cell
NSButtonCell* cancelButton = cell.cancelButtonCell
if (cancelButton) {
    // Here you can access all properties of a NSButtonCell
}

// Hide the button:
searchField.cell.cancelButtonCell = nil 
```

# ios - 试图将图层的 CABasicAnimation 位置和不透明度延迟 3 秒，但

> ID：14598510
> 
> 赞同：11
> 
> 时间：2013-01-30T07:11:53.147
> 
> 标签：ios, layer, cabasicanimation

我正在尝试使用 setBeginTime 将图层不透明度和位置的动画延迟 3 秒。我已经调用了层boxLayer。动画进展顺利，但是在前 3 秒内（该图层还没有显示），图层显示在其最终位置和不透明度。它不应该。组动画不能解决问题。有人可以帮忙吗？请参见下面的代码：

```
// Create an animation that will change the opacity of a layer
CABasicAnimation *fader = [CABasicAnimation animationWithKeyPath:@"opacity"];

// It will last 1 second and will be delayed by 3 seconds
[fader setDuration:1.0];
[fader setBeginTime:CACurrentMediaTime()+3.0];

// The layer's opacity will start at 0.0 (completely transparent)
[fader setFromValue:[NSNumber numberWithFloat:startOpacity]];

// And the layer will end at 1.0 (completely opaque)
[fader setToValue:[NSNumber numberWithFloat:endOpacity]];

// Add it to the layer
[boxLayer addAnimation:fader forKey:@"BigFade"];

// Maintain opacity to 1.0 JUST TO MAKE SURE IT DOES NOT GO BACK TO ORIGINAL OPACITY
[boxLayer setOpacity:endOpacity];

// Create an animation that will change the position of a layer
CABasicAnimation *mover = [CABasicAnimation animationWithKeyPath:@"position"];

// It will last 1 second and will be delayed by 3 seconds
[mover setDuration:1.0];
[mover setBeginTime:CACurrentMediaTime()+3.0];

// Setting starting position
[mover setFromValue:[NSValue valueWithCGPoint:CGPointMake(startX, startY)]];

// Setting ending position
[mover setToValue:[NSValue valueWithCGPoint:CGPointMake(endX, endY)]];

// Add it to the layer
[boxLayer addAnimation:mover forKey:@"BigMove"];

// Maintain the end position at 400.0 450.0 OTHERWISE IT IS GOING BACK TO ORIGINAL POSITION
[boxLayer setPosition:CGPointMake(endX, endY)]; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-30T07:47:43.443

问题是您正在将`boxLayer`属性 of`position`和 of设置`opacity`为它们的最终值。你需要：

1.  将`boxLayer`属性设置为它们的起始值，而不是它们的结束值（这就是为什么它从结束位置/不透明度开始......通常如果动画立即开始，这不是问题，但是因为你推迟了开始，使用结束位置是有问题的）；

2.  对于您的两个动画，您必须更改`removedOnCompletion`to`NO`和`fillMode`to `kCAFillModeForwards`（这是防止它在完成后恢复到原始位置的正确方法）。

因此：

```
// Create an animation that will change the opacity of a layer
CABasicAnimation *fader = [CABasicAnimation animationWithKeyPath:@"opacity"];

// It will last 1 second and will be delayed by 3 seconds
[fader setDuration:1.0];
[fader setBeginTime:CACurrentMediaTime()+3.0];

// The layer's opacity will start at 0.0 (completely transparent)
[fader setFromValue:[NSNumber numberWithFloat:startOpacity]];

// And the layer will end at 1.0 (completely opaque)
[fader setToValue:[NSNumber numberWithFloat:endOpacity]];

// MAKE SURE IT DOESN'T CHANGE OPACITY BACK TO STARTING VALUE    
[fader setRemovedOnCompletion:NO];
[fader setFillMode:kCAFillModeForwards];

// Add it to the layer
[boxLayer addAnimation:fader forKey:@"BigFade"];

// SET THE OPACITY TO THE STARTING VALUE
[boxLayer setOpacity:startOpacity];

// Create an animation that will change the position of a layer
CABasicAnimation *mover = [CABasicAnimation animationWithKeyPath:@"position"];

// It will last 1 second and will be delayed by 3 seconds
[mover setDuration:1.0];
[mover setBeginTime:CACurrentMediaTime()+3.0];

// Setting starting position
[mover setFromValue:[NSValue valueWithCGPoint:CGPointMake(startX, startY)]];

// Setting ending position
[mover setToValue:[NSValue valueWithCGPoint:CGPointMake(endX, endY)]];

// MAKE SURE IT DOESN'T MOVE BACK TO STARTING POSITION   
[mover setRemovedOnCompletion:NO];
[mover setFillMode:kCAFillModeForwards];

// Add it to the layer
[boxLayer addAnimation:mover forKey:@"BigMove"];

// SET THE POSITION TO THE STARTING POSITION
[boxLayer setPosition:CGPointMake(startX, startY)]; 
```

* * *

就个人而言，我认为您正在做很多工作，这些工作在视图上使用基于块的动画更容易完成（出于本演示的目的，我假设您`boxLayer`是一个`CALayer`名为 的控件`box`）。如果你这样做，你也不需要 Quartz 2D：

```
box.alpha = startOpacity;
box.frame = CGRectMake(startX, startY, box.frame.size.width, box.frame.size.height);

[UIView animateWithDuration:1.0
                      delay:3.0
                    options:0
                 animations:^{
                     box.alpha = endOpacity;
                     box.frame = CGRectMake(endX, endY, box.frame.size.width, box.frame.size.height);
                 }
                 completion:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-26T15:08:09.760

为了使用`beginTime`你应该对你的动画对象进行必要的配置并设置`fillMode`为`kCAFillModeBackwards`喜欢

```
zoomAnimation.fillMode = kCAFillModeBackwards; 
```

这在 Apple 文档中说：

> 使用 beginTime 属性设置动画的开始时间。通常，动画在下一个更新周期开始。您可以使用 beginTime 参数将动画开始时间延迟几秒钟。将两个动画链接在一起的方法是将一个动画的开始时间设置为与另一个动画的结束时间相匹配。如果您延迟动画的开始，您可能还需要将 fillMode 属性设置为 kCAFillModeBackwards。这种填充模式会导致图层显示动画的起始值，即使图层树中的图层对象包含不同的值。如果没有这种填充模式，您会在动画开始执行之前看到跳转到最终值。其他填充模式也可用。

[https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW2](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW2)

另外，根据 Rob 的回答：

> 对于您的两个动画，您必须将 removedOnCompletion 更改为 NO 并将 fillMode 更改为 kCAFillModeForwards （这是防止它在完成后恢复到原始位置的正确方法）。

这是一种有争议的说法，因为：

> 一旦动画被删除，表示层将回退到模型层的值，并且由于我们从未修改过该层的位置，所以我们的宇宙飞船会重新出现在它开始的位置。有两种方法可以处理这个问题：
> 
> 第一种方法是直接在模型层更新属性。这是推荐的方法，因为它使动画完全可选。
> 
> 或者，您可以通过将其 fillMode 属性设置为 kCAFillModeForwards 来告诉动画保持其最终状态，并通过将 removedOnCompletion 设置为 NO 来防止它被自动删除。但是，保持模型层和表示层同步是一种很好的做法，**因此应该谨慎使用这种方法**。

来自[https://www.objc.io/issues/12-animations/animations-explained/](https://www.objc.io/issues/12-animations/animations-explained/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-31T15:02:48.790

这篇文章很好地解释了为什么你不应该使用 removeOnCompletion 和 fillMode [https://www.objc.io/issues/12-animations/animations-explained/](https://www.objc.io/issues/12-animations/animations-explained/)

在我的情况下，我正在为用作导航的视图层设置动画，但会延迟该视图内的反弹动画；我需要在图层上更新这两个位置，因为它可以被解除然后再次显示。动画完成后，使用 removedOnCompletion 将不会更新图层的值

我这样做的方式是更新 CATransaction 完成块中的图层

```
CATransaction.setCompletionBlock { 
     // update the layer value
 }

CATransaction.begin()

// setup and add your animation

CATransaction.commit() 
```

# c# - 在选项卡控件中锚定表单

> ID：14598516
> 
> 赞同：2
> 
> 时间：2013-01-30T07:12:57.543
> 
> 标签：c#, .net, winforms

我有一个带有选项卡控件的 Form1。在这个选项卡控件中，我插入了 Form2。我已经将组件锚定在 Form2 中并且效果很好。但是，一旦我将 Form2 插入 Form1 的选项卡控件，当我调整窗口大小时，什么也没有发生。这就是我将 Form2 插入 Form1 的方式：

```
 public void AddNewForm(Form form, TabPage tab)
        {

            form.TopLevel = false;
            form.Anchor = (AnchorStyles.Bottom | AnchorStyles.Top | AnchorStyles.Right | AnchorStyles.Left);
            //form.Dock = DockStyle.Fill;
            form.Parent = tab;
            form.Show();

        } 
```

如您所见，我试图锚定和停靠 Form2，但没有任何帮助。

有人能帮忙吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:44:22.607

表单被锚定/停靠到标签页。让它改变大小需要改变标签页的大小。因此，当您调整 Form1 的大小时，它不会发生任何事情，除非您**还**锚定/停靠 TabControl 以使其更改大小。

# capistrano - cap deploy:setup 以 root 作为所有者创建发布文件夹

> ID：14598518
> 
> 赞同：6
> 
> 时间：2013-01-30T07:13:01.200
> 
> 标签：capistrano

我正在使用 capistrano 在 Ubuntu 服务器上播放我的 rails 应用程序。

我已经登录到服务器并创建了一个文件夹 /webapps/myapp，但这里没有子文件夹。

然后我跑

```
cap deploy:setup 
```

到目前为止没有错误，所以我运行

```
cap deploy:setup 
```

现在我收到这条消息

```
You do not have permissions to write to /webapps/myapp/releases 
```

我可以通过登录服务器并更改版本的所有者来解决这个问题，我只是想知道为什么它不是使用我用于部署的用户创建的？这是它的工作原理还是我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T11:19:14.173

In your deploy.rb file you should specify the deployment user and if he has sudo privilege.

```
set :user, "william"
set :use_sudo, false 
```

Giving sudo privilege isn't recommended, but this option exists.

The directory to which you deploy should be already owned by the deployment user "william"

# php - 使用 $pdf->PrintChapter() 方法后如何将自定义页脚放入 tcpdf？

> ID：14598519
> 
> 赞同：0
> 
> 时间：2013-01-30T07:13:02.503
> 
> 标签：php, tcpdf

我想在 PDF 文档的每一页末尾添加一个页脚 www.abc.com。我正在使用`$pdf->PrintChapter`方法以两列格式打印数据。

如果我使用 Footer() 方法覆盖逻辑来打印此自定义页脚，它将在 PDF 表的末尾打印（意味着仅在 PDF 的最后一页末尾，而不是在每一页之后）。我的要求是将页脚与页码一起放在每页的末尾。页码 正在自动打印，我只想将文本`www.abc.com`作为每页末尾的页脚。我附上我的一个 PDF 文档页面的屏幕截图和这个问题，供您参考。提前致谢。![在此处输入图像描述](../Images/f914a57ea9dfe0ad25d2d8578c02abbf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:31:02.763

我不熟悉 tcpdf，因为我使用 fPdf，但我在每个页面上处理页脚的方式是创建一个函数，将页脚数据显式写入特定的 x,y 坐标。然后我将该函数绑定到 addPage() 方法。因此，每次调用 addPage()（创建一个新页面）时，它都会将页脚数据写入当前页面的底部。

# ruby-on-rails - Ruby on Rails 在数据库中查找字符串

> ID：14598521
> 
> 赞同：1
> 
> 时间：2013-01-30T07:13:06.793
> 
> 标签：ruby-on-rails, ruby

请不要大喊大叫...我正在尝试运行搜索查询以在数据库中查找名字，基本上是在尝试查找特定用户然后显示该用户。

在控制台中起作用的是 Client.where 但我似乎无法让它在控制器中起作用。

```
irb(main):001:0>client = Client.where("name = 'Dusty'")
Client Load (0.4ms)  SELECT `clients`.* FROM `clients` WHERE (name = 'Dusty') 
```

我有的是。

一个视图'index.html.erb'：

```
<%= form_for :find_it do |n| %>
   Name: <%= n.text_field :text, :cols => "30", :rows => "1" %></br>
<%= n.submit "Find" %> 
```

还有clients_controller.rb中的一个控制器方法：

```
def find_it
  @post = Clients.all
  @post = Client.where("name = ", params[:find_it])
  @post = Client.find(params[:id])
end 
```

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:15:42.927

你的语法有点不对劲。使用散列式条件：

```
def find_it
  @post = Client.where(:name => params[:find_it])
  # @post = Client.find(params[:id]) # why is this line here? It overwrites previous results
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T08:21:16.273

有几种方法可以做到这一点：

```
# with old hash syntax (all ruby versions)
@clients = Client.where(:name => params[:find_it])

# with new hash syntax (ruby 1.9)
@clients = Client.where(name: params[:find_it])

# with text query
@clients = Client.where('name = ?', params[:find_it]) 
```

它们都是等价的。

代码为数据库中的**所有**`@post = Client.all`客户端分配变量`@post`，然后您使用完全不同的值重新分配两次。最后，您的变量被分配了id 等于的记录，这就是您将在视图中获得的内容。**`@post``Client``params[:id]`**

 **同样，通常您不必使用`all`方法。请注意：

```
Client.where(name: params[:find_it]).all.class
# => Array
Client.where(name: params[:find_it]).class
# => ActiveRecord::Relation 
```

这意味着您可以`ActiveRecord::Relation`使用其他查询方法进行查询，即

```
@clients = Client.where(name: params[:find_it])
@favourite_clients = @clients.where(favourite: true) 
```

Rails 将知道该做什么（它不会处理`ActiveRecord::Relation`，直到它必须对它做某事，即在视图中迭代结果时），所以你只想`all`在控制器中真正需要数组时添加。

您还应该考虑使用更有意义的变量名称，例如`@clients`代替`@post`.

当涉及到整个解决方案时，它应该更像：

```
# view
<%= form_for :find_it, :url => find_client_path do |n| %>
  Name: <%= n.text_field :text, :cols => "30", :rows => "1" %></br>
  <%= n.submit "Find" %>
<% end %> 
```

看看`form_for` [文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)。你可以发现你的文字不是`params[:find_it]`，而是`params[:find_it][:text]`。

您必须为`:url`您的操作提供路径选项`find_it`。

如果要在索引视图上显示结果，可以这样做：

```
# view
<%= form_for :find_it do |n| %>
  Name: <%= n.text_field :text, :cols => "30", :rows => "1" %></br>
  <%= n.submit "Find" %>
<% end %>

# controller
def index
  @clients = Client.scoped
  @clients = @clients.where(:name => params[:find_it][:text]) if params[:find_it]
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T07:23:46.953

代替

```
@post = Client.where("name = ", params[:find_it]) 
```

和

```
@post = Client.where("name = ?", params[:find_it]) 
```**

# debugging - 调试器中的断点如何工作？

> ID：14598524
> 
> 赞同：37
> 
> 时间：2013-01-30T07:13:18.120
> 
> 标签：debugging, compiler-construction, gdb, breakpoints

断点是 GDB 等最流行的调试器支持的最酷的特性之一。但是断点是如何工作的？编译器做了哪些代码修改来实现断点？是否有任何特殊的硬件功能用于支持断点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-30T08:43:16.350

编译器不需要以任何方式“修改”二进制文件来支持断点。然而，重要的是：

*   编译器在可执行文件中包含足够的信息（不在代码本身中，而是在同一文件的特殊部分中），以便调试器可以将用户想要调试的源代码与机器代码相关联。调试器需要知道的一个典型的事情是能够设置断点（除非您直接指定地址），即程序函数和源代码行（在机器代码内）从哪里（在哪个地址）开始。
*   编译器不会以任何方式优化代码，这使得无法关联源代码和机器代码。通常，您将需要未优化的调试代码或仅执行精心选择的优化的代码。

然后由调试器本身执行其余的工作。

1.  软件断点不一定需要特殊的硬件功能。这里的调试器依赖于修改原始二进制文件（它是加载到内存中的副本）。当您设置断点时，调试器将在断点位置放置特殊指令。这条特殊指令需要以某种方式让调试器检测到它（这条特殊指令）何时执行。这可能是一些导致某种中断/异常的指令，调试器可以挂钩，或者是一些处理对调试单元的控制的指令。如果它在某些操作系统下运行，则该操作系统需要支持修改正在运行的程序（使用 ptrace poke/peek 之类的东西）。软件断点的缺点是调试器需要能够修改正在运行的程序，如果程序从某种只读存储器运行（在嵌入式世界中很常见），这是不可能的。
2.  硬件断点（需要 CPU 支持）在不修改程序二进制文件的情况下实现类似的行为。这是特定于 CPU 的，但通常它允许您至少定义一个程序地址，在该地址处执行应该遇到断点。CPU不断将当前PC与这些断点地址进行比较，一旦条件匹配，它就会中断执行。这些断点的数量总是有限的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-08T07:15:24.443

首先要设置断点，我们必须在二进制文件中添加一些特殊信息。我们在编译 c 源文件时使用标志 -g 来包含此信息。软件调试器实际上使用此信息来放置断点。最好的例子正如我所经历的那样，对于硬件断点的支持在 VxWorks 中。基本上在断点处处理器停止。因此在内部，任何会给处理器带来异常的步骤都可以用来放置软件断点。而硬件断点通过匹配存储在硬件寄存器中的地址来工作，从而导致异常。所以硬件断点非常强大，但它严重依赖于架构。

这里有一个很好的解释 [，硬件断点和软件断点有什么区别？](https://stackoverflow.com/questions/8878716/what-is-the-difference-between-hardware-and-software-breakpoints) 此处提供了与处理器相关信息的良好介绍 [http://processors.wiki.ti.com/index.php/How_Do_Breakpoints_Work](http://processors.wiki.ti.com/index.php/How_Do_Breakpoints_Work)

# gstreamer - 关于 gst_element_release_request_pad

> ID：14598529
> 
> 赞同：0
> 
> 时间：2013-01-30T07:13:42.437
> 
> 标签：gstreamer

我有 Gstreamer 元素，它有请求垫作为接收垫。从应用程序中，我要求垫和链接如下：

```
 GstPadTemplate *sink_pad_template = gst_element_class_get_pad_template (GST_ELEMENT_GET_CLASS (mElement), "sink_%d");
    GstPad *pad = gst_element_request_pad (mElement, sink_pad_template, NULL, NULL);
    gst_pad_link(gst_element_get_static_pad (mQueue, "src"), pad); 
```

成功连接焊盘，但在释放请求焊盘时，gst_element_release_request_pad 未返回。尝试阻止前一个元素的 src pad（在管道中），取消链接然后 release_request_pad 但 gst_element_release_request_pad 没有返回。请让我知道释放请求垫时的正确步骤是什么？

```
 gst_pad_set_blocked(m_queueSrcPad, true);
    gst_pad_unlink(m_queueSrcPad, pad);
    gst_element_release_request_pad(m_Element, pad); 
```

在调用上述函数之前尝试将源垫设置为阻塞，但这仍然没有帮助

```
 gst_pad_set_blocked(SrcPad, true); // first element in pipeline 
```

# php - 如何在 jQuery 文件中分配 php 的会话 ID？

> ID：14598532
> 
> 赞同：0
> 
> 时间：2013-01-30T07:13:55.590
> 
> 标签：php, jquery, phpmyadmin

我有一个主文件

```
index.php 
```

我在其中包括其他四个文件，例如

```
header_get_started.php, 
content_main.php, 
right_sec_home.php, 
footer.php. 
```

这是我的代码

```
"index.php"

<script src="js/ajax.js"></script>
<?php include_once('header_getstarted.php'); ?>
<?php include_once('content_main.php'); ?>
<?php include_once('right_sect_home.php'); ?>
<?php include_once('footer.php'); ?>

"header_getstarted.php"

<span class="select_input">

       <?php
         $sqlCmd = "some query";
         echo combo('cmb_command','custom-class1 custom-class2','cmd_name','cmd_id','0',$sqlCmd,'sendpostmtu()' $width="style='width:250px;cursor:pointer;'")    
       ?>

       <input type="submit" name="" class="sub_bg" value="" onclick="get_request_by_command($('#cmb_command').val());">                                   
</span> 
```

在`header_get_started.php` 从选择框中选择任何命令时，我想将它的 id 分配给`$_SESSION['id']`.

Onclick 选择框我有一个 ajax 请求，可以刷新主要内容（`content_main.php`）。另外我希望在另一个页面中选择的 id`right_sec_home.php`来刷新它的内容。

如何在 JS 文件中为第二页分配 php 会话 ID？

我的 JS 文件是

```
function  get_request_by_command (commandId) {
          var cmdTitle=$('#cmb_command :selected').text();

          if(cmdTitle=="") {
              cmdTitle='ABC';           
          }

          $("#main_wrap").hide();

          if(cmdTitle=='--Select--'){
              $("#cmdTitle").html("");
          }else{
              $("#cmdTitle").html(cmdTitle);
          }

          $("#cmbs_cmd").val(commandId);

          document.getElementById('request_list').innerHTML='<img src="images/loader.gif" />';

          var strURL="request_by_command_tbl.php?id="+commandId;
          var req = getXMLHTTP();

          if (req) {
            req.onreadystatechange = function() {
              if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {        
                    var ret = req.responseText;
                    $("#requestTitle").html("<span id='cmdTitle'>"+cmdTitle+"</span>);
                    $('#request_list').html('');
                    $('#request_list').html(ret);
                    $('#main').show();
                    $("#searchDiv").show();
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
             }              
           }
           req.open("GET", strURL, true);
           req.send(null);
         } 
} 
```

通过使用这个 jQuery 函数，我创建了一个 ajax 请求，并将 id 发送到`"request_by_command_tbl.php"`文件。

在`"request_by_command_tbl.php"`我分配的文件中，

```
$_SESSION['id'] = $_REQUEST['id']; 
```

我也希望`$_SESSION['id']`在`right_sec_home.php`同一时刻。`$_SESSION['id']`他们在发送 ajax 请求之前在 jQuery 脚本文件中分配 php 的任何方式也是如此。

我的其他文件

```
"content_main.php"

<div id="request_list"> </div>        
    <div>  </div>
<div id="add_space"></div> 
```

我需要会话 ID 的右侧部分主文件

```
 "right_sec_home.php"

<?php

function getRequestByMonth($month, $year, $id){

        $que ="SELECT distinct(MS.date) FROM commands AS MC , ranks AS MR ,steady_tours AS MST, preferred_tours AS MPT, registration AS MMS where date_format(rm_date, '%c-%Y') = '".$month."-".$year."'
    AND    MMS.cmd_id ='".$_SESSION['id']."'    
        order by MMS.date";
        $res = mysql_query($que);
    while($rows[]=mysql_fetch_array($res)){}
        foreach ($rows as $res):
        if($res['date'] == "") continue;
        $dt = date("Y-n-j", strtotime($res['date'])); 
        $return[getDateB($dt)] = $res['date'];
        endforeach;
        return $return;
} 
```

我希望这已经足够清楚了。有任何想法吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:20:29.820

您无法使用 jquery 访问会话信息 ..

**解释**

会话是存储在服务器上的文件-> java 脚本在哪里只是一种客户端语言..

总有一种解决方法..但我想你应该更多地解释你想要实现的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:26:18.090

```
<?php $sessionId = session_id(); ?>

<input id="session_id" name="session_id" type="hidden" value="<?php echo $sessionId; ?>" /> 
```

使用 jquery 获取隐藏字段的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:30:00.873

您可以在 php 文件中使用一些隐藏字段或脚本变量。

例子 ：

```
<script>
var id = <?php echo $_SESSION['id']; ?>;
</script> 
```

可以使用 javascript 或 jquery 访问变量 id

# wso2 - 策略上传失败。EntitelmentPolicyAdminServiceException wso2

> ID：14598540
> 
> 赞同：0
> 
> 时间：2013-01-30T07:14:41.130
> 
> 标签：wso2, wso2carbon

我已经安装了 wso2 身份服务器并登录到 wso2 管理控制台。我正在尝试将策略导入身份服务器，但显示错误，提示**策略上传失败。EntitlementPolicyAdminServiceIdentityException**

你能告诉我如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:35:49.987

请让我们知道打印在 WSO2 Identity Server 控制台或 wso2carbon.log 文件中的后端错误日志。我认为这可能是因为根据架构定义，您的策略可能无效。

# javafx-2 - 减少 JavaFx 包中 JRE 的大小

> ID：14598550
> 
> 赞同：17
> 
> 时间：2013-01-30T07:15:18.670
> 
> 标签：javafx-2, bundle, java

我创建了一个 JavaFX 应用程序，为此我将它捆绑**为一个自包含的独立应用程序，使用 Java Runtime 的私有副本**。

但这变成了我的应用程序大小为 166MB，其中 146 Mb 大小用于 jre。

如何减小应用程序的大小，或者说捆绑运行时 JRE 的大小？

[我在某处](http://www.oracle.com/technetwork/java/javase/jre-7-readme-430162.html)读到某些文件在 jre 中是可选的，因此我在删除这些文件后尝试运行我的应用程序但无法运行该应用程序。

那么如何从我的应用程序的运行时 JRE 中删除未使用的文件/文件夹/模块？

据说[_](http://docs.oracle.com/javafx/2/deployment/self-contained-packaging.htm) _

> 默认情况下仅包含 Java 运行时的一个子集。排除了一些可选且很少使用的文件以减小包大小，例如所有可执行文件。如果您需要默认情况下未包含的内容，则需要将其复制为后处理步骤。

所以默认情况下它不会在 jre 中添加所有文件，在这种情况下我的应用程序没有运行。Application.jar 工作正常，因为它正在使用系统 jar。所以我在后处理步骤中添加了所有剩余的文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T14:02:21.513

Project Jigsaw 似乎对此有所帮助。

*   [OpenJDK：拼图项目](http://openjdk.java.net/projects/jigsaw/)
*   [为什么项目拼图？](https://stackoverflow.com/questions/11844829/why-project-jigsaw)

但它看起来最早会出现在 Java 9 中。

据我从您的帖子中了解到，您无法使用 JavaFX 提供的减小的 JRE 大小来运行您的应用程序。此外，您尝试了[此处](http://www.oracle.com/technetwork/java/javase/jre-7-readme-430162.html)详述的步骤，但仍然无法运行您的应用程序。

许多应用程序可以在 JRE 的 JavaFX 包中提供的有限数量的类中正常运行。也许您可以检查您正在使用哪些 Java 库导致此问题。然后，您可以探索这些库的替代方案。最后，您需要测试这些替代库是否大于或小于 JavaFX 包装中减少所提供的空间减少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T13:38:19.473

不幸的是，Java 8 无法删除未使用的文件。

要减小应用程序大小，您可以使用本机操作系统安装程序。

Windows Exe 安装程序的大小应该在 50 MB 左右，Mac OS X DMG 安装程序的大小应该在 60MB 左右。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T19:18:55.440

如果您使用[JavaFX ant 任务](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)来组装您的包，那么只需将 basedir 属性定义为平台元素中的空字符串，如下例所示：

```
 <fx:platform basedir="">
            <fx:jvmarg value="-Xmx768m" />
        </fx:platform> 
```

这将打包您的应用程序及其依赖项，但不会打包 JRE 本身。

# animation - 使用页面而不是状态的烟花动画

> ID：14598556
> 
> 赞同：1
> 
> 时间：2013-01-30T07:16:01.943
> 
> 标签：animation, adobe, fireworks

我正在为 Mac 使用 Adob​​e Fireworks 5.1，并且正在尝试制作横幅动画。我知道如何使用多种状态制作普通动画，但是，我需要对横幅动画的每张幻灯片进行热点处理以指向不同的 URL。我试图在不使用 Flash 的情况下执行此操作，因为 Fireworks 更易于使用。

# windows - 用我自己的服务器映射我的域名

> ID：14598557
> 
> 赞同：1
> 
> 时间：2013-01-30T07:16:06.810
> 
> 标签：windows, dns, hosting, windows-server-2008, nameservers

嗨，我有自己的域 mydomain.ac.in，我有自己的服务器（Windows 2008）和公共静态 IP。

现在我想在我自己的服务器上托管我的网站。

请给我一步一步的信息来完成它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:35:26.443

您需要向某些 DNS 托管服务（DNS 提供商）注册您的域，网络上的此类服务数量如此之多，我不想向该网站发送垃圾邮件。[谷歌](http://www.google.ch/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1&nord=1#hl=en&sugexp=les;&gs_rn=1&gs_ri=hp&qe=RE5TIHByb3ZpZGVy&qesig=OZXWWbAtWjCtP7KPwYPnMA&pkc=AFgZ2tnS3XY3ZV-Nk4zQmhC-MCo3cqrViiMt_HZyJ1wlraAh5VUVp6zwwfnyVe1UDXdmC2M0nJ6jQmDLh1djvxa1Ti1K7SSHpA&cp=12&gs_id=9&xhr=t&q=DNS%20provider&es_nrs=true&pf=p&safe=off&tbo=d&nord=1&output=search&sclient=psy-ab&oq=DNS%20provider&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41642243,d.Yms&fp=d25525c5451c0fc7&biw=888&bih=650&ion=1)。

此外，您保留此服务器的配置中心（以及您可能从哪里获得该公共 IP）也可能提供 DNS 服务。

另一方面，任何计算机都可以配置为名称服务器，但这可能无法在 Internet 范围内使用，并且只能在本地网络中使用（与 DHCP 服务结合使用）。如果有一种简单的方法可以让这个互联网广泛传播，我也会很感兴趣，但我怀疑。

您的操作系统与此问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:19:04.377

我已经由印度政府在 ernet 中注册了我的域，并且我从 BSNL India 获得了我的公共静态 IP。我已经托管了我的网站，并且已经可以使用该 IP 访问我的网站。现在我想将我的域与我拥有的服务器映射，以便我可以使用域名访问我的域。

我尝试了[http://www.hosting.com/support/dedicated/dns/setdns#additional](http://www.hosting.com/support/dedicated/dns/setdns#additional)中的步骤。但是当我添加名称服务器信息时，它说无法解析主机名？？？这就是为什么我想知道我在哪里犯错了..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:09:19.380

我再次尝试了[http://www.hosting.com/support/dedicated/dns/setdns](http://www.hosting.com/support/dedicated/dns/setdns)上的步骤并做对了。现在我已经在我的域名注册商 ernet 更新了名称服务器信息并等待它更新. 感谢人们帮助我

# ios - 将现有对象模型转换为 Core Data 托管对象模型

> ID：14598558
> 
> 赞同：6
> 
> 时间：2013-01-30T07:16:23.520
> 
> 标签：ios, core-data, model, nsmanagedobject

我正在开发一个 iOS 应用程序并且有几个对象模型。现在我想将它们转换为核心数据托管对象，因此从对象创建实体和属性，而不是从模型生成对象的标准相反方式。实现这一目标的最佳方法是什么？

我尝试从而`NSManagedObject`不是扩展`NSObject`，然后手动创建实体和属性并为实体设置类名称，但这不起作用:-(

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T16:50:34.683

我最近为一个具有非常大而复杂的数据模型的大型项目做了这个。这是我发现非常可行的工作流程。

首先，我在 Xcode 中创建一个新的数据模型并手动填充它。这是一个很好的练习，因为它迫使您检查您的模型，并可能利用简化的机会。

然后，使用模型中的 Xcode 生成类文件。如果您有任何应该包含在对象中的特殊代码，请将它们作为类别添加到单独的文件中（例如 Xcode 生成的 Event.h 和 Event.m、Event+Additions.h 和 Event+Additions.m 以及您的代码）。

# javascript - JavaScript：如何在 Chrome 调试器工具中设置条件断点

> ID：14598561
> 
> 赞同：104
> 
> 时间：2013-01-30T07:16:39.297
> 
> 标签：javascript, google-chrome

我有一个简单的 js 文件，它连续打印日期。

我正在使用 Google Chrome 调试器工具 (F12)

我的问题是，**是否可以在 Google Chrome 中设置条件断点？**

在我的代码中，如果秒值等于 50，我想设置一个断点？

```
s = date.getSeconds(); 
```

[这](http://jsfiddle.net/nVpXN/1/)是我的来源所在的 jsfiddle

（不知道为什么它不能在 jsfiddle 中工作）

无论如何我的问题是，是否可以在 chrome 调试器工具中设置条件断点？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-01-30T07:21:08.170

对的，这是可能的。

右键单击断点的标记并选择“编辑断点...”，您可以设置条件。

来自[developer.google.com 上断点](https://developers.google.com/web/tools/chrome-devtools/javascript/breakpoints#conditional-loc)上的 Chrome 开发人员工具（重点是我的）：

> 注意：您设置的所有断点都显示在右侧边栏中的断点下。单击该条目会跳转到源文件中突出显示的行。设置断点后，右键单击蓝色标记断点指示器，**为该断点设置条件语句**。键入一个表达式，断点只有在条件为真时才会暂停。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-30T07:21:19.220

看看`debugger`声明。基本上它会调用任何可用的调试器工具，在 Chrome 中它就像解释器遇到断点一样。

您的代码将是：

```
s = date.getSeconds();
if (s == 50) {
   debugger;
} 
```

从[参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/debugger)：

> [调试器] 调用任何可用的调试功能。如果没有可用的调试功能，则此语句无效。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-07T10:00:53.927

您可以按照以下步骤在 Google Chrome 中设置条件断点：

1.右键单击要停止的断点，请chk on [![在此处输入图像描述](../Images/c4f408ad2b4780a25f5364fb1c8f2229.png)](https://i.stack.imgur.com/UnDQy.png)

2.点击“添加条件断点”，会出现一个文本，你可以添加条件（如果条件满足则结果为'true'，否则为'false'），添加条件后断点颜色将变为橙色，开启 [![在此处输入图像描述](../Images/e2d3b096853e89e68e5d36680707b1f3.png)](https://i.stack.imgur.com/qwvxM.png)

3.重新加载同一页面，如果条件满足，你可以看到断点将起作用，例如 [![在此处输入图像描述](../Images/0c7b92e88ed7c37152cb4f6b5759a0dd.png)](https://i.stack.imgur.com/8T45f.png)

# asp.net - DropDownList1.SelectedIndexChanged 不起作用

> ID：14598562
> 
> 赞同：0
> 
> 时间：2013-01-30T07:16:41.670
> 
> 标签：asp.net, vb.net

```
Protected Sub DropDownList1_SelectedIndexChanged(
    ByVal sender As Object,
    ByVal e As System.EventArgs) Handles DropDownList1.SelectedIndexChanged

    Context.Response.Write("selectedindexchanged")
End Sub 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:25:49.073

您是否为下拉列表设置了 Autopostback = true

# c# - 以编程方式更改 DockWindow 的宽度

> ID：14598563
> 
> 赞同：4
> 
> 时间：2013-01-30T07:16:43.143
> 
> 标签：c#, winforms, telerik, width

我有以下代码：

```
var hWindow1 = new HostWindow(new Control() {Dock= DockStyle.Fill}, DockType.ToolWindow);
radDock1.DockWindow(hWindow1, DockPosition.Left);

var hWindow2 = new HostWindow(new Control() { Dock = DockStyle.Fill }, DockType.ToolWindow);
radDock1.DockWindow(hWindow2, DockPosition.Bottom); 

var hWindow3 = new HostWindow(new Control() { Dock = DockStyle.Fill }, DockType.ToolWindow);
radDock1.DockWindow(hWindow3, DockPosition.Right);            

var hWindow4 = new HostWindow(new Control() { Dock = DockStyle.Fill }, DockType.Document);            
radDock1.DockWindow(hWindow4, DockPosition.Fill);

var hWindow5 = new HostWindow(new Control() { Dock = DockStyle.Fill }, DockType.Document);
radDock1.AddDocument(hWindow5, hWindow1, DockPosition.Fill); 
```

如何以编程方式更改某些 DockWindow 的宽度（例如`hWindow3`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T07:11:07.350

假设您的容器是“容器”。您可以将 SizeMode 设置为 Absolute 并设置所需的大小。这个[链接](http://www.telerik.com/help/winforms/dock-object-model-example-building-an-advanced-layout-at-runtime.html)非常好。

Container.SizeInfo.SizeMode = SplitPanelSizeMode.Absolute;

Container.SizeInfo.AbsoluteSize = new Size(desiredWidth, desiredHeight);

# parsing - 编译 xmlbeans 时出现错误：java io.ioexception 无法运行程序“javac”

> ID：14598564
> 
> 赞同：1
> 
> 时间：2013-01-30T07:16:43.680
> 
> 标签：parsing, xml-parsing, xmlbeans

我正在尝试运行 xmlBeans 示例来编译 xsd 并创建一个与之对应的 jar，但是我一次又一次地收到此错误

```
java.io.Exception: Cannot run program "filelocation\javac": CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start
    ............ 
```

它可能与我的“路径”或“类路径”环境变量有关。请提出一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T10:25:53.230

我找到了问题的解决方案

我正在使用命令

> scomp -out 汽车政策.jar 汽车政策.xsd

但我猜路径变量中的 javac 位置存在一些问题

所以我给了这个命令

> scomp -compiler "c:\Program Files\Java\jdk1.6\bin\javac.exe" -out 汽车政策.jar 汽车政策.xsd

它在该位置提供了所需的汽车政策.jar。

> 请注意，javac.exe 的位置可能不同。

# django - 通过 Nginx、Django 提供 206 字节范围

> ID：14598565
> 
> 赞同：4
> 
> 时间：2013-01-30T07:16:49.157
> 
> 标签：django, nginx, mp3, gunicorn, podcast

我让 Nginx 为我在 Gunicorn 上运行的静态 Django 文件提供服务。我正在尝试提供 MP3 文件并让它们具有头部 206，以便它们将被 Apple 接受用于播客。目前，音频文件位于我的静态目录中，并直接通过 Nginx 提供。这是我得到的回应：

```
 HTTP/1.1 200 OK
    Server: nginx/1.2.1
    Date: Wed, 30 Jan 2013 07:12:36 GMT
    Content-Type: audio/mpeg
    Content-Length: 22094968
    Connection: keep-alive
    Last-Modified: Wed, 30 Jan 2013 05:43:57 GMT 
```

有人可以帮助以正确的方式提供 mp3 文件，以便接受字节范围。

更新：这是我认为通过 Django 提供文件的代码

```
 response = HttpResponse(file.read(), mimetype=mimetype)
    response["Content-Disposition"]= "filename=%s" % os.path.split(s)[1]
    response["Accept-Ranges"]="bytes"
    response.status_code = 206
    return response 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:09:10.840

如果您只想在负责提供静态 .mp3 文件的指令中执行此操作，请添加这些指令`nginx`：`location`

```
# here you add response header "Content-Disposition"
# with value of "filename=" + name of file (in variable $request_uri),
# so for url example.com/static/audio/blahblah.mp3 
# it will be /static/audio/blahblah.mp3
# ----
set $sent_http_content_disposition filename=$request_uri;
    # or
add_header content_disposition filename=$request_uri;

# here you add header "Accept-Ranges"
set $sent_http_accept_ranges bytes;
# or
add_header accept_ranges bytes;

# tell nginx that final HTTP Status Code should be 206 not 200
return 206; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-27T19:18:31.723

您的配置中有一些东西阻止 nginx 支持对这些静态文件的范围请求。使用标准 nginx 模块时，这可能是以下过滤器之一（这些过滤器修改响应，如果在请求正文处理期间可能发生修改，则禁用字节范围处理）：

*   [压缩包](http://nginx.org/en/docs/http/ngx_http_gzip_module.html)
*   [枪弹](http://nginx.org/en/docs/http/ngx_http_gunzip_module.html)
*   [添加过滤器](http://nginx.org/en/docs/http/ngx_http_addition_module.html)
*   [西西](http://nginx.org/en/docs/http/ngx_http_ssi_module.html)

所有这些模块都有指令来控制它们使用的 MIME 类型 ( `gzip_types`, `gunzip_types`, `addition_types`, `ssi_types`)。默认情况下，它们设置为限制性的 MIME 类型集，即使启用了这些模块，范围请求也适用于大多数静态文件。但是放置类似的东西

```
ssi on;
ssi_types *; 
```

进入配置将禁用对所有受影响的静态文件的字节范围支持。

检查您的 nginx 配置并删除有问题的行，和/或确保关闭有问题的模块以获取您提供 mp3 文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:27:05.260

您可以定义自己的状态码：

```
response = HttpResponse('this is my response data')
response.status_code = 206
return response 
```

如果你使用的是 Django 1.5，你可能想看看新的 StreamingHttpResponse：

[https://docs.djangoproject.com/en/dev/ref/request-response/#streaminghttpresponse-objects](https://docs.djangoproject.com/en/dev/ref/request-response/#streaminghttpresponse-objects)

这对于大文件非常有帮助。

# python - Python matplotlib错误栏问题

> ID：14598569
> 
> 赞同：4
> 
> 时间：2013-01-30T07:17:14.437
> 
> 标签：python, numpy, matplotlib

鉴于这些 numpy 数组

```
x = [0 1 2 3 4 5 6 7 8 9]
y = [[ 0\.        ]
     [-0.02083473]
     [ 0.08819923]
     [ 0.9454764 ]
     [ 0.80604627]
     [ 0.82189822]
     [ 0.73613942]
     [ 0.64519742]
     [ 0.56973868]
     [ 0.612912  ]]
c = [[ 0\.          0\.        ]
     [-0.09127286  0.04960341]
     [-0.00300709  0.17940555]
     [ 0.82319693  1.06775586]
     [ 0.74512774  0.8669648 ]
     [ 0.75177669  0.89201975]
     [ 0.63606087  0.83621797]
     [ 0.57786173  0.7125331 ]
     [ 0.46722312  0.67225423]
     [ 0.54951714  0.67630685]] 
```

我想使用 c 中的值绘制 x,y 的图形，并带有误差线。我试过

```
plt.errorbar(x, y, yerr=c) 
```

但是口译员给了我这个错误：

```
File "C:\Python\32\lib\site-packages\matplotlib\axes.py", line 3846, in vlines
  for thisx, (thisymin, thisymax) in zip(x,Y)]
File "C:\Python\32\lib\site-packages\matplotlib\axes.py", line 3846, in <listcomp>
  for thisx, (thisymin, thisymax) in zip(x,Y)]
ValueError: too many values to unpack (expected 2) 
```

`x`in`zip`的值为

```
[0 1 2 3 4 5 6 7 8 9] 
```

`Y`in`zip`的值为

```
[[[ 0\.          0\.        ]
  [ 0.07043814 -0.11210759]
  [ 0.09120632  0.08519214]
  [ 0.12227947  1.76867333]
  [ 0.06091853  1.55117401]
  [ 0.07012153  1.57367491]
  [ 0.10007855  1.3722003 ]
  [ 0.06733568  1.22305915]
  [ 0.10251555  1.0369618 ]
  [ 0.06339486  1.16242914]]

 [[ 0\.          0\.        ]
  [-0.07043814  0.02876869]
  [-0.09120632  0.26760478]
  [-0.12227947  2.01323226]
  [-0.06091853  1.67301107]
  [-0.07012153  1.71391797]
  [-0.10007855  1.57235739]
  [-0.06733568  1.35773052]
  [-0.10251555  1.2419929 ]
  [-0.06339486  1.28921885]]] 
```

我已经阅读过，看起来我的代码**应该**是正确的（一个愚蠢的假设，但我找不到相反的证据......但是），但它看起来`errorbar`不喜欢二维数组。文档说它`yerr`可以是一个二维数组，第一列是最小误差，第二列是最大值。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:34:54.370

我在下面更正的代码存在一些问题，因此它可以正常工作。

```
import numpy
import pylab

arr = numpy.asarray

x = arr([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])   # put comma between numbers
y = arr([[ 0\.        ],                   # make it vector
     [-0.02083473],
     [ 0.08819923],
     [ 0.9454764 ],
     [ 0.80604627],
     [ 0.82189822],
     [ 0.73613942],
     [ 0.64519742],
     [ 0.56973868],
     [ 0.612912  ]]).flatten()
c = arr([[ 0\.        ,  0\.        ],
     [-0.09127286,  0.04960341],
     [-0.00300709,  0.17940555],
     [ 0.82319693,  1.06775586],
     [ 0.74512774,  0.8669648 ],
     [ 0.75177669,  0.89201975],
     [ 0.63606087,  0.83621797],
     [ 0.57786173,  0.7125331 ],
     [ 0.46722312,  0.67225423],
     [ 0.54951714,  0.67630685]]).T      # transpose
pylab.errorbar(x, y, yerr=c)
pylab.show() 
```

结果：

![在此处输入图像描述](../Images/f281c8f4e583eb6eb4e9f33c7a3b95fa.png)

祝你好运。

# matlab - 生成许多 随机向量与生成单个随机矩阵之间是否存在统计差异

> ID：14598573
> 
> 赞同：9
> 
> 时间：2013-01-30T07:17:23.087
> 
> 标签：matlab, random, matrix, statistics

使用以下两种方法为蒙特卡罗模拟生成一系列路径之间是否存在统计差异（请注意，路径我的意思是 350 个点的向量，正态分布）：

一种）

```
for path = 1:300000
    Zn(path, :) = randn(1, 350); 
end 
```

或更高效的 B)

```
Zn = randn(300000, 350); 
```

我只是想确保方法 B 中的行之间没有有趣的附加相关性或依赖性，而方法 A 中不存在。就像方法 B 通常分布在 2 维上，而 A 超过 1 维，所以也许这使得两个统计不同？

如果存在差异，那么我需要知道均匀分布的相同点（即 rand 而不是 randn）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:39:13.050

只是添加到@natan (+1) 的答案，运行以下代码：

```
%# Store the seed
Rng1 = rng;

%# Get a matrix of random numbers
X = rand(3, 3);

%# Restore the seed
rng(Rng1);

%# Get a matrix of random numbers one vector at a time
Y = nan(3, 3);
for n = 1:3
    Y(:, n) = rand(3, 1);
end

%# Test for differences
if any(any(X - Y ~= 0)); disp('Error'); end; 
```

`X`您会注意到和之间没有区别`Y`。也就是说，一步构建矩阵与从向量序列构建矩阵没有区别。

但是，我的代码和您的代码之间存在差异。注意我按列而不是行填充矩阵，因为当`rand`用于一步构建矩阵时，它按列填充。顺便说一句，我不确定您是否意识到，但作为一般规则，您应该始终尝试对矩阵的列而不是行执行向量运算。前几天我在回答关于 SO 的问题时解释了原因；看到[这里](https://stackoverflow.com/questions/14515419/should-arrays-be-thought-of-as-horizontal-or-vertical-structures/14515470#14515470)更多...

关于独立/依赖的问题，需要注意自己使用的语言。生成的数字序列`rand`是**完全依赖**的。对于绝大多数统计测试，它们**似乎是独立**的——尽管如此，理论上，人们可以构建一个统计测试来证明由`rand`.

最后想一想，如果你有一份 Greene 的“计量经济学分析”，他在第 17.2 节中对随机数生成进行了简洁的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-26T17:38:20.807

就基本 R 的随机数生成器而言，一次生成随机数序列或逐个生成随机数序列似乎没有任何区别。因此，@Colin T Bowers' (+1) 建议的上述行为也适用于 R。下面是 Colin 代码的 R 版本：

```
#set seed
set.seed(1234)
# generate a sequence of 10,000 random numbers at once 
X<-rnorm(10000)
# reset the seed
set.seed(1234)
# create a vector of 10,000 zeros
Y<-rep(0,times=10000)
# generate a sequence of 10,000 random numbers, one at a time
for (i in 1:10000){
Y[i]<-rnorm(1)
}
# Test for differences
if(any(X-Y!=0)){print("Error")} 
```

# android - 使用定制的设备ROM开发android应用程序

> ID：14598574
> 
> 赞同：2
> 
> 时间：2013-01-30T07:17:43.350
> 
> 标签：android, performance

目前我正在开发一个android应用程序。此应用程序应在设备启动时加载，并且应限制所有内置和其他应用程序。我已经在论坛中搜索过，因为可以通过定制我们的 ROM 来实现。但是这个过程可以由我们自己手动完成。我想通过编码来做到这一点。或者有没有其他方法可以让我的应用程序默认？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:31:53.677

如果您希望您的应用程序是默认的 - 是的，您只有构建自己的自定义 android 的方法。

您只能在默认的 android 系统上做的就是在操作系统加载后自动加载您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:36:43.747

你没有准确地说明你打算做什么。*限制*和*默认*这两个词可能意味着很多事情。

尽管 dilix 写了什么，但如果你让你的应用程序成为启动器，你*可能会*成功实现你想要的一种方法。启动器在系统中扮演着有趣的角色。

但是，您不能强迫任何人真正使用它。但这无论如何都不可能，对吧？除非您与设备制造商交谈。

# django - 如何将视图中的两个变量传递给Django中的html

> ID：14598575
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:17:43.563
> 
> 标签：django, django-forms, django-templates, django-views

我已将表中的对象放入 2 个变量中。现在我想将这些变量的值发送到 html 使用`render_to_response`.

```
def AssetMovement(request):
    print "AssetMovement"
    feature_list = request.session['feature_list']
    featuresgroups = request.session['featuresgroups']
    pplid=request.session['pplid']
    empnm = Asset_Assignment_Employee.objects.filter(Employee__People=pplid)
    print empnm
    id_obj = Asset_Track.objects.all()
    print id_obj
    report = reports.astmvmt_repo(queryset=id_obj)
    report.generate_by(PDFGenerator, filename= 'E:\My Work Location\Example\WorkSpace\\asset_track1\media\\'+str(2)+".pdf")
    return render_to_response('asset_mgmt/astmvmtReport.html',{"contacts":feature_list,'root': settings.MEDIA_ROOT,'len':len(feature_list)-1,"featuresgroups":featuresgroups,'assertlist':id_obj}) 
```

像上面一样，我已经通过'assertlist'发送了id_obj，现在我想发送具有相同名称的empnm对象，即'assertlist'并显示在表格中。

请尝试尽快回答这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:54:53.387

除了上面的评论，另一种选择是使用`{% with %}`模板标签重新分配变量：[https ://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#with)

# iphone - 打开 iTunes Store 到特定歌曲

> ID：14598577
> 
> 赞同：5
> 
> 时间：2013-01-30T07:17:48.347
> 
> 标签：iphone, objective-c, itunes-store

好的，我在这里看到了类似的问题，但没有一个真正为我回答这个问题。

我有一个流媒体音频应用程序，流源返回给我歌曲标题和艺术家姓名。我在应用程序中有一个 iTunes 按钮，并且想要打开 iTunes STORE（搜索）到那首确切的歌曲，或者至少关闭。我尝试了以下方法：

* * *

```
NSString *baseString = @"itms://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?songTerm=";

NSString *str1 = [self.songTitle2 stringByReplacingOccurrencesOfString:@" " withString:@"+"];

NSString *str2 = [self.artist2 stringByReplacingOccurrencesOfString:@" " withString:@"+"];

NSString *str = [NSString stringWithFormat:@"%@%@&artistTerm=%@", baseString, str1, str2];

[[UIApplication sharedApplication] openURL: [NSURL URLWithString:str]]; 
```

* * *

此调用确实按预期将我切换到 iTunes STORE，但随后弹出错误“无法连接到 iTunes Store”。我显然在线，因为这首歌正在积极播放，而且我在商店里。iTunes 应用程序中的搜索框只显示歌曲名称，没有其他内容。

以下是生成字符串的示例：itms://phobos.apple.com/WebObjects/MZSearch.woa/wa/advancedSearchResults?artistTerm=Veruca+Salt&artistTerm=Volcano+Girls

我已经厌倦了将它生成的字符串粘贴到 Safari 中，它在我的 Mac 上运行良好，可以打开商店中艺术家的专辑。为什么不接电话？

此外，它似乎忽略了这两个项目，因为它没有带我去听那个艺术家的歌。这是否还需要知道专辑名称（我目前没有。）

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T05:43:13.750

是的，我正在回答我自己的问题。

在与我认识的最好的程序员之一进行大量挖掘和交谈之后，我们有了一个解决方案，所以我想我会在这里分享它。该解决方案采用歌曲名称和艺术家，实际上确实调用了 Link Maker API，取回一个 XML 文档，并提取必要的信息以创建指向 iTunes Store 的链接，通过以下方式打开专辑中歌曲的商店包含这首歌的艺术家。

在视图控制器的界面中，添加：

```
@property (strong, readonly, nonatomic) NSOperationQueue* operationQueue;
@property (nonatomic) BOOL searching; 
```

在实施中：

```
@synthesize operationQueue = _operationQueue;
@synthesize searching = _searching; 
```

以下是将为您执行此操作的方法和代码：

```
// start an operation Queue if not started
-(NSOperationQueue*)operationQueue
{
    if(_operationQueue == nil) {
        _operationQueue = [NSOperationQueue new];
    }
    return _operationQueue;
}
// change searching state, and modify button and wait indicator (if you wish)
- (void)setSearching:(BOOL)searching
{
// this changes the view of the search button to a wait indicator while the search is     perfomed
// In this case
    _searching = searching;
    dispatch_async(dispatch_get_main_queue(), ^{
        if(searching) {
            self.searchButton.enabled = NO;
            [self.searchButton setTitle:@"" forState:UIControlStateNormal];
            [self.activityIndicator startAnimating];
        } else {
            self.searchButton.enabled = YES;
            [self.searchButton setTitle:@"Search" forState:UIControlStateNormal];
            [self.activityIndicator stopAnimating];
        }
    });
}
// based on info from the iTunes affiliates docs
// http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html
// this assume a search button to start the search. 
- (IBAction)searchButtonTapped:(id)sender {
    NSString* artistTerm = self.artistField.text;  //the artist text.
    NSString* songTerm = self.songField.text;      //the song text 
    // they both need to be non-zero for this to work right.
    if(artistTerm.length > 0 && songTerm.length > 0) {

        // this creates the base of the Link Maker url call.

        NSString* baseURLString = @"https://itunes.apple.com/search";
        NSString* searchTerm = [NSString stringWithFormat:@"%@ %@", artistTerm, songTerm];
        NSString* searchUrlString = [NSString stringWithFormat:@"%@?media=music&entity=song&term=%@&artistTerm=%@&songTerm=%@", baseURLString, searchTerm, artistTerm, songTerm];

        // must change spaces to +
        searchUrlString = [searchUrlString stringByReplacingOccurrencesOfString:@" " withString:@"+"];

        //make it a URL
        searchUrlString = [searchUrlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSURL* searchUrl = [NSURL URLWithString:searchUrlString];
        NSLog(@"searchUrl: %@", searchUrl);

        // start the Link Maker search
        NSURLRequest* request = [NSURLRequest requestWithURL:searchUrl];
        self.searching = YES;
        [NSURLConnection sendAsynchronousRequest:request queue:self.operationQueue completionHandler:^(NSURLResponse* response, NSData* data, NSError* error) {

            // we got an answer, now find the data.
            self.searching = NO;
            if(error != nil) {
                NSLog(@"Error: %@", error);
            } else {
                NSError* jsonError = nil;
                NSDictionary* dict = [NSJSONSerialization JSONObjectWithData:data options:0 error:&jsonError];
                if(jsonError != nil) {
                    // do something with the error here
                    NSLog(@"JSON Error: %@", jsonError);
                } else {
                    NSArray* resultsArray = dict[@"results"];

                    // it is possible to get no results. Handle that here
                    if(resultsArray.count == 0) {
                        NSLog(@"No results returned.");
                    } else {

                        // extract the needed info to pass to the iTunes store search
                        NSDictionary* trackDict = resultsArray[0];
                        NSString* trackViewUrlString = trackDict[@"trackViewUrl"];
                        if(trackViewUrlString.length == 0) {
                            NSLog(@"No trackViewUrl");
                        } else {
                            NSURL* trackViewUrl = [NSURL URLWithString:trackViewUrlString];
                            NSLog(@"trackViewURL:%@", trackViewUrl);

                           // dispatch the call to switch to the iTunes store with the proper search url
                            dispatch_async(dispatch_get_main_queue(), ^{
                                [[UIApplication sharedApplication] openURL:trackViewUrl];
                            });
                        }
                    }
                }
            }
        }];
    }
} 
```

返回的 XML 文件还有很多其他有用的信息，您也可以在这里提取，包括三种尺寸的专辑封面、专辑名称、成本等。

我希望这对其他人有所帮助。这让我困惑了很长一段时间，我感谢我的一个好朋友完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:59:19.213

您实际上是在使用 URL 进行搜索。这就是 iTunes 在搜索时打开的原因。我在 Mac OS X 中的 iTunes 也会在搜索中打开。

使用[iTunes 的 Search API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)搜索您想要的内容并获取艺术家、专辑或歌曲 ID，以便您可以为该内容生成直接 URL。

查看[iTunes Link Maker](http://itunes.apple.com/linkmaker)如何为艺术家或特定专辑创建 URL 并在您的应用程序中编写该 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T18:23:24.230

现在，当您尝试打开 iTunes html url 时，iOS 似乎已经直接打开了 iTunes 应用程序。

例如，尝试在**[https://itunes.apple.com/br/album/falando-de-amor/id985523754](https://itunes.apple.com/br/album/falando-de-amor/id985523754)**上执行 openURL 已经打开了 iTunes 应用程序而不是网站。

# html - 如果没有正常的 HTTP 协议，Websockets 可以很容易地完成哪些事情？

> ID：14598579
> 
> 赞同：0
> 
> 时间：2013-01-30T07:17:54.720
> 
> 标签：html, websocket

我知道 a 的基本概念`WebSocket`。我知道它允许 *同时双向（全双工）*内置的持久通信支持。所以它对于`server push`一种场景非常有用。还有哪些场景`WebSockets`最适合？`WebSockets`我们作为程序员应该积极地将其视为解决方案而不是重新发明轮子的一些常见情况是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:57:20.570

好吧，服务器推送是HTTP单向缺乏的双向支持的主要组成部分。它还支持跨域请求。因为服务器现在可以异步联系客户端，所以它启用了一大堆技术和应用程序：

*   内置心跳。我在我的一个应用程序中使用它，如果有人断开连接，我不再需要检查自己。
*   拥有一个由不同后端应用程序实时提供服务的客户端应用程序
*   实时更新流数据、新闻提要等
*   在浏览器中运行的多用户游戏

所有这些你以前都可以通过长轮询来做，但它效率低下（大量开销）、复杂（难以实现）和丑陋（根本不适合使用）。WebSocket 简化了大部分工作。根据这篇文章，WebSocket 通常可以减少 500 倍的开销和 3 倍的延迟。[http://www.websocket.org/quantum.html](http://www.websocket.org/quantum.html)

# python - 使用鼻子的 Python 测试加载器

> ID：14598582
> 
> 赞同：2
> 
> 时间：2013-01-30T07:18:10.243
> 
> 标签：python, nose

我是 Python 和 Nose 框架的初学者。我需要做的是编写一个测试加载器，它将使用 Nose 加载测试。测试的结果必须生成为 HTML 报告。有人可以给我描述一下如何做到这一点。我想知道要编写哪些 python 测试用例文件，要包含哪些库。请给我一个开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:43:04.867

我相信你描述的能力已经存在于鼻子中。

*   鼻子发现并加载测试。
*   Nose 可以多种格式打印输出，包括 XML（带有插件）。

如果你安装了 Nose 和[NoseXML](http://pypi.python.org/pypi/NoseXML/)或[NoseXMLUnit](http://nosexunit.sourceforge.net/)插件，我相信你应该有你需要的。如果您确实需要 HTML 而不是 XML，请使用其中一个插件作为基础来编写您自己的插件。（并确保将其添加到[第三方插件列表中](https://nose-plugins.jottit.com/)）。

# linux - 查找在 -exec 命令上返回成功的文件名

> ID：14598583
> 
> 赞同：9
> 
> 时间：2013-01-30T07:18:15.730
> 
> 标签：linux, bash, unix, find

我正在使用 find 来查找为查询返回一些行的数据库的名称。

```
$ find . -name 'sqlite.db' -exec sqlite3 "{}" 'SELECT * FROM table WHERE column1="value"' \; 

value|a|b|c|d 
```

但我想要数据库的名称，所以我尝试了显示所有名称的 -print

```
$ find . -name 'sqlite.db' -print -exec sqlite3 "{}" 'SELECT * FROM table WHERE column1="value"' \; 

/dir1/a/sqlite.db
value|a|b|c|d
/dir2/a/sqlite.db
/dir2/b/sqlite.db
/dir3/a/sqlite.db 
```

有没有办法只获取命令运行的退出状态为成功的文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T18:57:38.767

你只需要`-print`在`-exec`. 这是一个短路 boolean `and`，并且通过放置`-print`before `-exec`，打印发生在 exec 之前。

```
find . -name sqlite.db -exec ... \; -print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:31:20.313

即使没有找到符合条件的数据， sqite3 也会返回 0。仅当 sql 语句本身或传递的参数中存在错误时，它才返回 false。

```
sqlite3 sqlite.db 'SELECT * FROM table WHERE column1="value"' 
```

即使数据库中没有匹配列，也会返回 0。您可以将命令与 grep 结合使用以使查找工作。

```
sqlite3 sqlite.db 'SELECT * FROM table WHERE column1="value" | grep value 
```

所以你的 find 命令变成

```
find . -name 'sqlite.db' -exec sqlite3 "{}" 'SELECT * FROM table WHERE column1="value"' | grep value \; 
```

**编辑：**

以上不起作用，因为 exec 无法处理管道。请参阅[如何包含管道 | 在我的 linux 中找到 -exec 命令？](https://stackoverflow.com/questions/307015/how-do-i-include-a-pipe-in-my-linux-find-exec-command)

```
find . -name "*.db" -type f | while read file ; do sqlite3 $file "SELECT * FROM table WHERE column1='value'" | grep value ; if [ $? -eq 0 ] ; then echo $file ; fi done 
```

我已经对此进行了测试并且可以正常工作，但我不确定这是否是您正在寻找的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:31:09.913

您可以获取退出状态并在 if 语句中对其进行测试，以便执行您想要的操作。

获得此状态的方法是使用`$?`变量。这是一个关于它的教程：http: [//tldp.org/LDP/abs/html/exit-status.html](http://tldp.org/LDP/abs/html/exit-status.html)

如果您想在`find`命令之后添加更多代码，您可以查看为`xargs`找到的每个输出行执行一个 shell 脚本，`find`使用以下命令将结果作为参数传递`xargs`：

```
find . -name 'sqlite.db' | xargs <your_script>.sh 
```

此外，在您的情况下，另一种解决方案可能是使用`AWK`对每个`find`输出行执行查询并分别分析其结果：

```
find . -name 'sqlite.db' | awk '{system("sqlite3 ..."); if () {} else {} }' - 
```

# c# - 如何为 switch 语句解析 CA1820

> ID：14598591
> 
> 赞同：5
> 
> 时间：2013-01-30T07:19:17.997
> 
> 标签：c#, .net

我收到以下 FxCop 错误：

> CA1820：Microsoft.Performance：将“Program.Main()”中对“string.operator ==(string, string)”的调用替换为对“String.IsNullOrEmpty”的调用。

```
 static void Main()
    {
        string str = "abc";

        switch (str)
        {
            case "":
                Console.WriteLine("Hello");
                break;
        }

        Console.ReadLine();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:29:25.570

嗯有趣的问题。如果你在[ILSpy](http://ilspy.net/)中查看它，你会看到反编译的代码如下：

```
string str = "abc";
string a;
if ((a = str) != null && a == "")
{
    Console.WriteLine("Hello");
}
Console.ReadLine(); 
```

*它转换为`if-else`块的原因是，如果 switch 语句包含`5`或少于`5`case 子句，那么它将被视为`if - else`否则将使用查找表。（我不确定数字`5`，但这就是显示的内容ILSpy)*

现在它正在抱怨`a == ""`，这里是它抱怨它的描述：

[CA1820：使用字符串长度测试空字符串](http://msdn.microsoft.com/en-us/library/ms182279.aspx)

> 使用 String.Length 属性或 String.IsNullOrEmpty 方法比较字符串**比使用 Equals 快得多**. 这是因为 Equals 执行的 MSIL 指令明显多于 IsNullOrEmpty 或为检索 Length 属性值并将其与零进行比较而执行的指令数。您应该知道 Equals 和 Length == 0 对于空字符串的行为不同。如果您尝试获取空字符串的 Length 属性的值，公共语言运行库将引发 System.NullReferenceException。如果在空字符串和空字符串之间进行比较，公共语言运行时不会抛出异常；比较返回假。空值测试不会显着影响这两种方法的相对性能。面向 .NET Framework 2.0 时，使用 IsNullOrEmpty 方法。否则，尽可能使用 Length == 比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:22:54.877

此规则强制使用`Length`字符串的任一属性或`string.IsNullOrEmpty`检查空字符串，而不是使用相等运算符 ( `str == ""`) 进行检查。

```
 string str = "abc";

        switch (str.Length)
        {
            case 0:
                Console.WriteLine("Hello");
                break;
        }

        Console.ReadLine(); 
```

但我建议您在`switch`语句之前使用 IsNullOrEmpty 检查字符串或将`string.Empty`大小写转换为`default`大小写。

```
if (string.IsNullOrEmpty(str))
{
    // related code section
}
else
{
    switch (str)
    {
        case "case1":
            Console.WriteLine("Hello");
            break;
        case "case2":
            Console.WriteLine("case2");
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:26:32.247

您不应该在 switch 语句中执行此操作。这是一种糟糕的编程习惯。

您应该使用简单的 if 条件。

```
string str = "abc";
if (string.IsNullOrEmpty(str))
    Console.WriteLine("Hello"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T07:23:50.993

您应该使用 string.empty 而不是 "" 但这可能无法解决 fxcop 警告。通常我会注意，但在这种情况下似乎过于活跃，假设你真的想要带有字符串的 switch/case 模式。如果由于某种原因无法抑制它（假设真正的 switch 语句有更多案例），您可以在案例前面编写一个特殊的 if (String.IsNullOrEmpty(str)) ... 。

# javascript - 如何使javascript代码更清晰？

> ID：14598593
> 
> 赞同：0
> 
> 时间：2013-01-30T07:19:17.637
> 
> 标签：javascript

我有五星级和平均分。

> 1.  平均分是浮点数
> 2.  五星级只有 10 部分，一星有两个半星（所以 10 部分是五星级）

前任：

```
Average score is: from 0 - 5 (average = 4.658, or average = 0.256, 0 <= average <= 5)

Five star rating is 10 section: [0, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5] 
```

如何根据平均分查看平均分并将其设置为10个部分？

这是我的代码，很长。

```
 var twofixed = Math.round(average * 100) / 100;           
            twofixed = Math.abs(twofixed);
            var decimal = twofixed - Math.floor(twofixed)

            twofixed = (twofixed + "").split(".");

            if(twofixed[0] == 0)
            {
                if(twofixed[1] == undefined) { average = 0; }
                else
                {
                    if(twofixed[1] <= 99)
                    {
                        average = 0.50;
                    }
                    else
                    {
                        average = 1;
                    }
                }
            }
            else if(twofixed[0] == 1)
            {
                if(twofixed[1] == undefined) { average = 1; }

                else
                {
                    if(twofixed[1] <= 99)
                    {
                        average = 1.50;
                    }
                    else
                    {
                        average = 2;
                    }
                }
            }
            else if(twofixed[0] == 2)
            {
                if(twofixed[1] == undefined) { average = 2; }
                else
                {
                    if(twofixed[1] <= 99)
                    {
                        average = 2.50;
                    }
                    else
                    {
                        average = 3;
                    }
                }
            }
            else if(twofixed[0] == 3)
            {
                if(twofixed[1] == undefined) { average = 3; }
                else
                {
                    if(twofixed[1] <= 99)
                    {
                        average = 3.50;
                    }
                    else
                    {
                        average = 4;
                    }
                }
            }
            else if(twofixed[0] == 4)
            {
                if(twofixed[1] == undefined) { status = 'Great'; average = 4; }
                else
                {
                    if(twofixed[1] <= 99)
                    {
                        average = 4.50;
                    }
                    else
                    {
                        average = 5;
                    }
                }                    
            }
            else if(twofixed[0] == 5)
            {
                if(twofixed[1] == undefined) { average = 5; }
            } 
```

非常感谢 @th3falc0n 的小代码，我写了 50 多行代码，但是你可以用一行代码来解决我的长代码。

感谢大家帮助我，对于不清楚的问题和糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:27:51.270

如果我正确理解您的问题，您想要取平均分并将其转换为星级评分，其中每颗星值两分，并且您开始时似乎是和`average`之间的小数`0``5`。

如果是这样：

```
// Flags for whether to show stars, based on `average` being
// a fractional number `0 <= average < 5`
var stars = [
    average > 0,
    average > 1,
    average > 2,
    average > 3,
    average > 4
]; 
```

那些是旗帜。用于`stars[0]`决定是否显示第一颗星，`stars[1]`决定是否显示第二颗等。

如果您`average`实际上介于`0`和之间`10`，则只需相应地调整数字：

```
// Flags for whether to show stars, based on `average` being
// a fractional number `0 <= average < 10`
var stars = [
    average > 0,
    average > 2,
    average > 4,
    average > 6,
    average > 8
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:31:02.927

我想你只需要

```
Math.floor(average * 2.0) / 2.0; 
```

此代码仅从任何浮点数中留下 xy。

编辑：我犯了一个小错误。我将它设置为 0.1 步，所以它会使 0.85 到 0.8，现在固定 (1/2.0) = 0.5 步。您可以将 4.0 用于 0.25 步，将 10.0 用于 0.1，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:32:31.490

```
function getAverage(twofixed)
        {
            var average;
            if(twofixed[1] == undefined)
            {
                average = twofixed[0];
            }
            else
            {
                average = (twofixed[1] <= 99) ? twofixed[0]+0.50 : twofixed[0]+1;
            }
            return average;
        } 
```

# c# - 在 MVC3 中随时间动态改变主题

> ID：14598597
> 
> 赞同：1
> 
> 时间：2013-01-30T07:19:43.427
> 
> 标签：c#, css, asp.net-mvc-3

大家好，我在互联网上阅读了很多关于如何在 MVC3 中动态更改主题的文章和教程。但这似乎不符合我的需要。

我读过这一堆教程
[http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine](http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine)
[http://kazimanzurrashid.com/posts/asp-dot-net-mvc-theme -supported-razor-view-engine](http://kazimanzurrashid.com/posts/asp-dot-net-mvc-theme-supported-razor-view-engine)
[http://www.carlj.ca/2007/11/19/dynamically-applying-themes-to-your-aspnet-site-with-a-sitemap/](http://www.carlj.ca/2007/11/19/dynamically-applying-themes-to-your-aspnet-site-with-a-sitemap/)
[http://www。 dotnetfunda.com/articles/article14.aspx](http://www.dotnetfunda.com/articles/article14.aspx)
[http://msdn.microsoft.com/en-us/library/tx35bd89.aspx](http://msdn.microsoft.com/en-us/library/tx35bd89.aspx)
[http://www.codeproject.com/Articles/18300/How-to-change-page- theme-in-asp-net-2-0-dynamicall](http://www.codeproject.com/Articles/18300/How-to-change-page-theme-in-asp-net-2-0-dynamicall)
等等，但不符合我的需要 T_T。

**问题：**我希望我的主题（style.css）可以不时动态更改，而无需单击任何按钮。它只是自发地变化，比如让一个主题在单个页面/视图中更改为另一个主题 30 分钟。（*其实我什至不知道这是否可能*）

到目前为止，我正在关注本[教程](http://www.codeproject.com/Articles/171695/Dynamic-CSS-using-Razor-Engine)，但似乎不是一个完整的方法。

我的想法是：
**我希望 _Layout 中的 style.css 在 30 分钟后更改为 style2.css，然后再过 30 分钟后再次更改为 style3.css，然后再次循环返回 style.css 等等。**采用这种方法的最佳方法在哪里？在视图中？控制器？jQuery？javascript？或任何东西。

我将非常感谢这里的任何建议和答案。在此先感谢..

**Edit2：**
目前我从 Juann Strauss 那里收集了一个解决方案，它使用了我认为有概念的 javascript

```
<link rel="Stylesheet" href="@Url.Content("~/Content/style.css")" id="style" />
<script type="text/javascript">
function changetheme()
{
    alert('changing theme');
    var thestyle = document.getElementById("style");
    switch (thestyle.href)
    {
        case "@Url.Content("~/Content/style.css")":
            thestyle.href = "@Url.Content("~/Content/style2.css")";
            break;
        case "@Url.Content("~/Content/style2.css")":
            thestyle.href = "@Url.Content("~/Content/style3.css")";
            break;
        case "@Url.Content("~/Content/style3.css")":
            thestyle.href = "@Url.Content("~/Content/style.css")";
            break;
    }
}
setInterval(changetheme, (30 * 60 * 1000)); 
```

**问题：**显示`case "@Url.Content("~/Content/style.css")":`一条绿色波浪线，表示*正则表达式中的语法错误*。我怎么可能修好它？

我有另一个解决方案，但似乎也不起作用... T_T

**代码：**

```
<link rel="Stylesheet" href="@Url.Content("~/Content/style.css")" id="style" />
<script type="text/javascript">
function changetheme()
{
alert('changing theme');
var thestyle = document.getElementById("Site");
var href = '@Url.Content("~/")';

switch(thestyle) 
{
    case (href + '/Content/style.css'): (href + '/Content/style2.css');
        break;
    case (href + '/Content/style2.css'): (href + '/Content/style3.css');
        break;
    case (href + '/Content/style3.css'): (href + '/Content/style.css');
        break;
}
}

setInterval(changetheme, (30 * 60 * 10000 )); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T07:34:30.813

javascript。创建一个函数来更改您的 css 源文件并将其超时设置为 30 分钟。如果用户在页面上停留 30 分钟，这将起作用。

如果您希望在用户浏览您的网站时发生这种情况，您将不得不将会话开始的时间存储在会话变量中，并将自上次主题更改以来的分钟数作为某些动态构建的 javascript 的一部分输出在前端。

如果这还不够清楚，请告诉我，我会写一些代码。

编辑：代码

```
<link rel="Stylesheet" href="@Url.Content("~/Content/style.css")" id="style" />
<script type="text/javascript">
    function changetheme()
    {
        alert('changing theme');
        var thestyle = document.getElementById("style");
        switch (thestyle.href)
        {
            case "@Url.Content("~/Content/style.css")":
                thestyle.href = "@Url.Content("~/Content/style2.css")";
                break;
            case "@Url.Content("~/Content/style2.css")":
                thestyle.href = "@Url.Content("~/Content/style3.css")";
                break;
            case "@Url.Content("~/Content/style3.css")":
                thestyle.href = "@Url.Content("~/Content/style.css")";
                break;
        }
    }
    setInterval(changetheme, (30 * 60 * 1000));
</script> 
```

# php - I want to use a string containing spaces in my URL, how?

> ID：14598600
> 
> 赞同：0
> 
> 时间：2013-01-30T07:19:44.030
> 
> 标签：php, html

```
$name='joseph john mathew';

$urlPgN ="<a href=author_stories.php?pgNo={pgNo}&name=$name style='text-decoration:none;color:#666; padding:0 2px 0 2px; '>{pgTxt}</a>"; 
```

I'm getting `localhost/rose/author_stories.php?pgNo=2&name=joseph` only. How can I do it so I get the full name in the URL?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:26:01.293

While you should use `urlencode`, you don't *need* to. The real problem is due to the fact that you don't have quotes around the `href` attribute:

```
$urlPgN ="<a href='author_stories.php?pgNo={pgNo}&name=$name' 
```

Using `urlencode($name)` can be done too and is more technically correct.

Do *not* use `urldecode` on `$_GET`/`$_POST`. This is done automatically by PHP.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:23:57.080

By using [urlencode](http://php.net/urlencode) and [urldecode](http://php.net/urldecode)

```
$name=urlencode('joseph john mathew');

$urlPgN ="<a href=\"author_stories.php?pgNo={pgNo}&name=$name\" style=\"text-decoration:none;color:#666; padding:0 2px 0 2px;\">{pgTxt}</a>"; 
```

And to fetch

```
$name = urldecode($_GET['name']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:30:39.733

use urldecode and you are missing quotes for href attributes.

```
$urlPgN ="<a href='".urldecode('author_stories.php?pgNo='.$pgNo.'&name='.$name)."' style='text-decoration:none;color:#666; padding:0 2px 0 2px; '>$pgTxt</a>"; 
```

ref: [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

# excel - 根据条件更改图表范围

> ID：14598602
> 
> 赞同：0
> 
> 时间：2013-01-30T07:19:54.670
> 
> 标签：excel, vba

关于excel图表动态范围选择的问题。希望有人可以帮助我。

我在 B27:F41 的 excel 表中有一个表格数据。该数据将在两侧扩展和收缩，即行甚至列将增加/减少。

Q1.我最大的桌子是B27:CZ120。是否有可能我给出最大的范围并且图表会忽略所有空行和列？或至少空列。

Q2。如果以上是不可能的，那么我该如何从宏中更改范围。

注册。问题 2 - 考虑到在宏中我已经知道数据存在的范围。我只想将此范围传递给图表范围。

[在这里](http://chandoo.org/wp/2009/10/15/dynamic-chart-data-series/)找到了一些解释，但它仅适用于动态行数而不是列数。

如果需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:14:35.750

您的链接中的解决方案非常好：对您只需要交换`OFFSET`参数并使用范围高度计算的列采用它。

这是我自己用于教授新东西的示例书，它包括 3 个示例 - 行、列和堆叠列：[https ://www.dropbox.com/s/76llm0na9tvee90/DynamicCharts.xlsx](https://www.dropbox.com/s/76llm0na9tvee90/DynamicCharts.xlsx)

当然，您将能够轻松地采用它来满足您的需求。祝你好运！

# rspec - Rails Factory Girl 在规范和事务中回滚

> ID：14598604
> 
> 赞同：1
> 
> 时间：2013-01-30T07:19:58.753
> 
> 标签：rspec, transactions, factory-bot

我正在我的组模型上测试一种方法。它依赖于通过工厂创建一些徽章类型。

这是代码

```
it "add itself to badges with method add_to_badgetypes" do
    badge = FactoryGirl.create(:badgetype)
    old_badge_ids = badge.group_ids.split(",")
    badge2 = FactoryGirl.create(:badgetype, :group_ids => "3,4,5")
    group.add_to_badgetypes(badge.id, badge2.id)
    expect( badge.group_ids ).to eq( old_badge_ids.push(group.id).join(",") ) 
end 
```

'

badge.group_ids' 之前是“200, 300”，之后应该是“200,300,#{group.id}”。当我跟踪日志时，我看到了这个：

```
 `   Badgetype Load (0.5ms)  SELECT group_ids FROM `badge_types` WHERE `badge_types`.`id` = 40 LIMIT 1

   (0.2ms)  SAVEPOINT active_record_1

   (0.3ms)  UPDATE `badge_types` SET `group_ids` = '200,300,15' WHERE `badge_types`.`id` IS NULL

   (0.2ms)  RELEASE SAVEPOINT active_record_1

  Badgetype Load (0.4ms)  SELECT group_ids FROM `badge_types` WHERE `badge_types`.`id` = 41 LIMIT 1

   (0.1ms)  SAVEPOINT active_record_1

   (0.3ms)  UPDATE `badge_types` SET `group_ids` = '3,4,5,15' WHERE `badge_types`.`id` IS NULL

   (0.1ms)  RELEASE SAVEPOINT active_record_1

   (0.3ms)  ROLLBACK

   (0.1ms)  BEGIN 
```

`

所以它成功更新了 group_ids，但由于某种原因测试失败，如果我 pp badge.group_ids 我得到原始值（200,300），而不是更新后的值。

我认为这与“SAVEAPOINT active_record_1”有关，然后是 UPDATE，然后是 RELEASE SAVEPOINT。如果是这样，为什么？

我怎样才能让这个规范通过，因为它似乎都在数据库中搞砸了，而不是方法。

谢谢

**编辑**

通过在控制台中玩耍发现了一些更有趣的信息。如果我创建一个工厂并为其分配一行：

```
g = FactoryGirl.create(:group) 
```

然后运行：

```
g.add_to_badgetype(1,2) 
```

我得到这个 SQL

```
1.9.3-p286 :080 > g.add_to_badgetypes(1, 2)
  Badgetype Load (0.5ms)  SELECT group_ids FROM `badge_types` WHERE `badge_types`.`id` = 1 LIMIT 1
   (0.1ms)  BEGIN
   (0.2ms)  UPDATE `badge_types` SET `group_ids` = 'test,8,9,10' WHERE `badge_types`.`id` IS NULL
   (0.1ms)  COMMIT
  Badgetype Load (0.3ms)  SELECT group_ids FROM `badge_types` WHERE `badge_types`.`id` = 2 LIMIT 1
   (0.1ms)  BEGIN
   (0.2ms)  UPDATE `badge_types` SET `group_ids` = '200,300,8,9,10' WHERE `badge_types`.`id` IS NULL
   (0.1ms)  COMMIT
 => [1, 2] 
```

注意奇怪的 UPDATE 语句“WHERE badge_types.id IS NULL”

如果在创建工厂之后，我将它重新分配给一个变量，然后运行相同的命令，它可以找到：

```
1.9.3-p286 :081 > g = Group.last
  Group Load (0.5ms)  SELECT `groups`.* FROM `groups` ORDER BY `groups`.`id` DESC LIMIT 1
 => #<Group id: 10, group_name: "Test Group", short_name: "test_group", enrollment: false, kiosk: false, landing: 0, ro_landing: 0> 
1.9.3-p286 :082 > g.add_to_badgetypes(1, 2)
  Badgetype Load (0.6ms)  SELECT `badge_types`.* FROM `badge_types` WHERE `badge_types`.`id` = 1 LIMIT 1
   (0.1ms)  BEGIN
   (0.4ms)  UPDATE `badge_types` SET `group_ids` = 'test,8,9,10' WHERE `badge_types`.`id` = 1
   (0.2ms)  COMMIT
  Badgetype Load (0.4ms)  SELECT `badge_types`.* FROM `badge_types` WHERE `badge_types`.`id` = 2 LIMIT 1
   (0.1ms)  BEGIN
   (0.4ms)  UPDATE `badge_types` SET `group_ids` = '200,300,8,9,10' WHERE `badge_types`.`id` = 2
   (0.2ms)  COMMIT
 => [1, 2] 
```

显然，作为工厂的组导致 SQL 更新语句查找 NULL 的 id。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:29:52.077

啊啊啊，我想通了。

我只需要重新加载变量“badgetype”

在平等测试之前，我添加了

@badge.reload

等等。奇怪的。

# c# - 在通用方法中从查询中取出无效的 LINQ 方法的解决方法

> ID：14598606
> 
> 赞同：1
> 
> 时间：2013-01-30T07:20:12.703
> 
> 标签：c#, linq, entity-framework, generics

我正在尝试执行以下通用方法来搜索数据库中的实体：

```
 // 'atributo' is the name of the attribute to search against
    public List<TEntity> buscar<TEntity>(string valor, string atributo) where TEntity : class
    {
        var matches = from m in db.Set<TEntity>()
                      where m.GetType().GetProperty(atributo).GetValue(m, null).ToString().Contains(valor)
                      select m;

        return matches.ToList();
    } 
```

当然我得到了例外：

**LINQ to Entities 无法识别方法“System.String ToString()”方法**

而且我知道 GetType()、GetProperty() 和 GetValue() 也是无效的 LINQ 方法。

我无法弄清楚如何在查询之前使用无效方法。

有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T08:23:11.183

您可以自己编写表达式树（动态 LINQ 对于您的需要来说太过分了）：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Linq.Expressions;

class YourClass
{
    public static List<TEntity> DoSomething<TEntity>(DbContext db, string valor, string atributo)
        where TEntity : class
    {
        var mParam = Expression.Parameter(typeof(TEntity));

        var matches = db.Set<TEntity>()
                        .Where(Expression.Lambda<Func<TEntity, bool>>(
                            Expression.Call(
                                Expression.Convert(
                                    Expression.Property(mParam, atributo),
                                    typeof(String)
                                    ),
                                "Contains",
                                new Type[0],
                                Expression.Constant(valor)
                                ),
                            mParam
                         ));

        return matches.ToList();
    }
} 
```

笔记：

1.  如果该属性未在 TEntity 上定义，那将不起作用（即使 TEntity 是抽象的并且所有子类*都*定义了该属性）；
2.  如果已知属性的返回类型为`String`，则可以避免`Expression.Convert`调用；
3.  如果 Entity Framework 不能将属性的值转换为字符串（例如，如果属性返回实体类型），这将不起作用；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:52:57.340

linq to entity 将 linq 转换为表达式树，然后尝试将该表达式树转换为 SQL。它不评估表达式，因此不能将反射代码转换为 SQL。您可以做的是使用[动态 linq](https://stackoverflow.com/questions/2455659/how-to-use-contains-or-like-in-a-dynamic-linq-query)，您的代码将类似于

```
public List<TEntity> buscar<TEntity>(string valor, string atributo) where TEntity : class
{
    return db.Set<TEntity>()
           .Where(atributo + =".Contains(\"" + valor + "\")")
           .ToList()
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T07:23:32.890

更新：

```
SqlFunctions.StringConvert(m.GetType().GetProperty(atributo).GetValue(m, null)) 
```

# web-services - joomla/jomsocial 是否为其核心功能提供 web 服务/API？

> ID：14598607
> 
> 赞同：0
> 
> 时间：2013-01-30T07:20:14.747
> 
> 标签：web-services, api, cordova, joomla, jomsocial

我正在使用 phonegap 开发移动应用程序。

我的移动应用程序将具有与我的 joomla-jomsocial 网站相同的功能。

我必须使用 jQuery.ajax 访问 Web 服务，因为我只使用 javascript 和 html。

joomla-jomsocial 中是否有现成的 Web 服务或 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:57:04.993

Joomla！[直到最近才成立了一个“ Web 服务](http://docs.joomla.org/Web_Services_Working_Group)”工作组，我认为您暂时不会看到任何结果。

正如@Riccardo Zom 所说，最好的办法是使用`format`/`tmpl`参数从每种组件类型中访问最简单的格式。

如果您有足够的动力，您可以扩展现有组件（核心和其他）以返回所需的格式（例如`json`），在这种情况下，您应该阅读[Louis Landry 关于从 1.5 时代`XML-RPC`功能集更改为 1.6/2.5 机制的说明。](http://docs.joomla.org/Xml-rpc_changes_in_Joomla!_1.6)

如果您仍在关注它，您可能对Rafael Corral的“ [Joomla! API - Generic RESTful API framework for Joomla!2.5](https://github.com/rcorral/com_api)`com_api` ”感兴趣，它是一个组件 ( )，它提供了一个为 Joomla! 创建 RESTful API 的框架！2.5 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:36:56.047

除非您想在 html 应用程序中重写整个组件逻辑，否则您可能会很高兴在没有所有额外页面标记的情况下获取组件输出，即获取从组件返回的裸 html：只需将 &format=raw 添加到查询中；如果您还希望返回库和 css，请添加 &tmpl=component

在一些核心组件中也有（有限的）对 &format=json 的支持。

# python - 在 SQLAlchemy 中使用 OVER 窗口函数

> ID：14598610
> 
> 赞同：5
> 
> 时间：2013-01-30T07:20:28.380
> 
> 标签：python, postgresql, sqlalchemy

如何使用 SQLAlchemy 获得有限结果的总数。我目前正在使用 Postgres，所以我知道我可以使用窗口函数。我基本上想知道如何在 SQLAlchemy 中编写以下内容：

```
SELECT foo
  ,count(*) OVER() AS full_count
FROM   bar
ORDER  BY <some col>
LIMIT  <pagesize>
OFFSET <offset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:58:15.303

就像是：

```
select(
    [
        bar.c.foo,
        func.count().over().label('full_count'),
    ],
    ...
) 
```

门票介绍：[http ://www.sqlalchemy.org/trac/ticket/1844#comment:9](http://www.sqlalchemy.org/trac/ticket/1844#comment:9)

# visual-studio-2010 - 在 Visual Studio 中制作一些 tcl 方法的可加载 DLL 的步骤

> ID：14598614
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:20:37.017
> 
> 标签：visual-studio-2010, visual-studio, tcl

我想为我的一些 tcl 方法创建一个可加载的 DLL。但我不知道如何做到这一点。为此，我举了一个简单的 tcl api 示例，它添加两个数字并打印总和。现在我想为此创建一个可加载的 DLL 来导出这个 tcl 功能。

但我不明白如何在 Visual Studio 中做到这一点。我编写了一个 C 代码，它可以调用这个 tcl api 并获得两个整数的总和，但我也不希望它这样做。我想创建一个 DLL 文件来使用这个 tcl 功能。如何在 Visual Studio 2010 上创建此 DLL。

下面是我正在使用的示例 tcl 程序：

```
#!/usr/bin/env tclsh8.5
proc add_two_nos { } {

set a 10

set b 20

set c [expr { $a + $b } ]

puts " c is $c ......."

} 
```

这是可以使用此 tcl 功能的 C 代码：

```
#include <tcl.h>
#include <stdio.h>
#include <stdlib.h>

    int main(int argc, char **argv) {
    Tcl_Interp *interp;
    int code;
    char *result;

    Tcl_FindExecutable(argv[0]);
    interp = Tcl_CreateInterp();
    code = Tcl_Eval(interp, "source myscript.tcl; add_two_nos");

    /* Retrieve the result... */
    result = Tcl_GetString(Tcl_GetObjResult(interp));

    /* Check for error! If an error, message is result. */
    if (code == TCL_ERROR) {
    fprintf(stderr, "ERROR in script: %s\n", result);
    exit(1);
    }

    /* Print (normal) result if non-empty; we'll skip handling encodings for now */
    if (strlen(result)) {
    printf("%s\n", result);
    }

    /* Clean up */
    Tcl_DeleteInterp(interp);
    exit(0);
    } 
```

我已经使用以下命令成功编译了这段代码 gcc simple_addition_wrapper_new.c -I/usr/include/tcl8.5/ -ltcl8.5 -o simple_addition_op

上面的代码正在使用预期的输出。

在 Visual Studio 2010 中为此创建可加载的 dll 需要采取哪些步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:15:10.273

如果你看一下这个问题的答案：[这里](https://stackoverflow.com/questions/13929478/how-to-make-a-loadable-dll-to-use-tcl-code-functionality-by-any-program/13935698#13935698)它给出了你需要经历的过程的基本轮廓。我的回答中有一些关于创建 DLL 的 Microsoft MSDN 文章的链接。

更详细地介绍其中嵌入了 Tcl 的 C++ dll。

第一步是创建一个具有正确类型的新 Visual Studio 项目，该项目将构建一个导出符号的 dll。我的示例项目名为 TclEmbeddedInDll，该名称出现在代码中的符号中，例如由 Visual Studio 生成的 TCLEMBEDDEDINDLL_API。

dllmain.cpp 如下所示：

```
// dllmain.cpp : Defines the entry point for the DLL application.
#include "stdafx.h"

BOOL APIENTRY DllMain( HMODULE hModule,
    DWORD  ul_reason_for_call,
    LPVOID lpReserved
    )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        {
            allocInterp() ;
            break ;
        }

    case DLL_THREAD_ATTACH:
        break ;
    case DLL_THREAD_DETACH:
        break ;
    case DLL_PROCESS_DETACH:
        {
            destroyInterp() ;
            break;
        }
    }
    return TRUE;
} 
```

和函数在 TclEmbeddedInDll.h 中定义`allocInterp()`，`destroyInterp()`这里使用函数而不是直接创建 Tcl_Interp 的原因是它使有关 Tcl 的细节远离 DLL 接口。如果您在此处创建 interp，则必须包含 tcl.h，然后当您尝试在另一个程序中使用 DLL 时，事情会变得复杂。

接下来显示 TclEmbeddedInDll.h 和 .cpp，该函数`fnTclEmbeddedInDll()`是从 DLL 导出的函数——我为此使用 C 链接而不是 C++，因为它更容易从其他语言调用函数恕我直言。

```
// The following ifdef block is the standard way of creating macros which make exporting 
// from a DLL simpler. All files within this DLL are compiled with the TCLEMBEDDEDINDLL_EXPORTS
// symbol defined on the command line. This symbol should not be defined on any project
// that uses this DLL. This way any other project whose source files include this file see 
// TCLEMBEDDEDINDLL_API functions as being imported from a DLL, whereas this DLL sees symbols
// defined with this macro as being exported.
#ifdef TCLEMBEDDEDINDLL_EXPORTS
#define TCLEMBEDDEDINDLL_API __declspec(dllexport)
#else
#define TCLEMBEDDEDINDLL_API __declspec(dllimport)
#endif

extern "C" {
    TCLEMBEDDEDINDLL_API void fnTclEmbeddedInDll(void);

}

void allocInterp() ;
void destroyInterp() ;

// TclEmbeddedInDll.cpp : Defines the exported functions for the DLL application.
//

#include "stdafx.h"

extern "C" {

    static Tcl_Interp *interp ;

    // This is an example of an exported function.
    TCLEMBEDDEDINDLL_API void fnTclEmbeddedInDll(void)
    {
        int code;
        const char *result;
        code = Tcl_Eval(interp, "source simple_addition.tcl; add_two_nos");
        result = Tcl_GetString(Tcl_GetObjResult(interp));
    }
}

void allocInterp() 
{
    Tcl_FindExecutable(NULL);
    interp = Tcl_CreateInterp();
}

void destroyInterp()
{
    Tcl_DeleteInterp(interp);
} 
```

allocInterp() 和 destroyInterp() 的实现非常幼稚，没有进行错误检查。

最后，对于 Dll，stdafx.h 文件将它们联系在一起，如下所示：

```
// stdafx.h : include file for standard system include files,
// or project specific include files that are used frequently, but
// are changed infrequently
//

#pragma once

#include "targetver.h"

#define WIN32_LEAN_AND_MEAN             // Exclude rarely-used stuff from Windows headers
// Windows Header Files:
#include <windows.h>

// TODO: reference additional headers your program requires here
#include <tcl.h>
#include "TclEmbeddedInDll.h" 
```

# asn.1 - 在 ASN.1 导入中使用路径

> ID：14598617
> 
> 赞同：0
> 
> 时间：2013-01-30T07:20:41.297
> 
> 标签：asn.1

由于我在任何地方都找不到答案，所以思想可能应该问它。

在`ASN.1`我们使用`IMPORTS`从*其他* `ASN`. 语法当然如下，

```
IMPORTS valuetag from eutra-def 
```

我的问题是如何从同一文件夹**中不**存在的 ASN 导入它。换句话说，我如何提供 eutra-def 存在的路径？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:41:24.950

这完全取决于您的工具。从 ASN.1 的角度来看，您只是声明模块 eutra-def 中的 valuetag 可以在此模块中合法引用。ASN.1 不关心该模块的定义位置或方式，也不给您任何指定方式。

# jquery - jQuery水平可排序和可调整大小使元素在排序时跳跃

> ID：14598619
> 
> 赞同：3
> 
> 时间：2013-01-30T07:20:48.790
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, resizable

我正在使用 jQuery 创建一组可水平排序的元素，这些元素也可以通过右侧（东）句柄调整大小。问题是在调整元素大小后，当我移动它的水平位置时，在移动过程中元素会跳到页面顶部。

HTML

```
<div id="spacer"></div>
<div id="box">
    <div id="list">
        <div class="resize">ONE</div>
        <div class="resize">TWO</div>
        <div class="resize">THREE</div>
    </div>
</div> 
```

JAVASCRIPT

```
$(function() {
    $('#list').disableSelection().sortable({
        scroll: true,
        placeholder: 'placeholder',
        containment:'parent',
        axis: 'x'
    });
    $('.resize').resizable({
            handles: 'e'
         });
}); 
```

CSS

```
#spacer {height: 100px}
#box {
    height: 40px;
    width: 500px;
    float: left;
}

#list {
    background-color:blue;
    white-space:nowrap;
    overflow-x:scroll;
    overflow-y:hidden;
}
.resize {
    background-color:darkgray;
    height:40px;
    width:100px;
    cursor:move;
    display:inline-block;
}
.placeholder {
    display:inline-block;
    height: 1px !important;
}

.ui-resizable-handle {
 height:15px;  
 width: 20px; 
    background-color:red;
    cursor: pointer;
} 
```

我究竟做错了什么？jsFiddle 在[这里](http://bit.ly/UBZfeR)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:59:22.650

从您的代码中删除“axis：x”
更改您的 jquery 部分，如下所示..

```
$(function () {
    $('#list').sortable({
        scroll: true,
        placeholder: 'placeholder',
        containment: 'parent',
        //axis: 'x'
    });
    $('#list').disableSelection();
    $('.resize').resizable({
        handles: 'e'
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:20:09.357

如果定义了轴的值，则只能水平或垂直拖动项目。可能的值：“x”、“y”。我不是 100% 确定，但在你的情况下，它与调整元素的大小相冲突。

删除轴或尝试

```
axis: 'xy' 
```

# jquery - jQuery 函数在 iOS 移动设备上不起作用

> ID：14598623
> 
> 赞同：0
> 
> 时间：2013-01-30T07:20:56.150
> 
> 标签：jquery, ios, mobile

在我的网站上，我使用 jQuery 函数来显示不同部分的内容，而无需重新加载页面。它在计算机上运行良好，但在 iOS 设备上运行良好（我没有尝试过 Android）。知道我需要做什么吗？

问题在于点击[hiredustinhill.com上的帖子](http://hiredustinhill.com)

用于菜单导航的 JQuery 函数并发布注释：

```
jQuery('#header ul li a').click(function(){
        var thisClass = jQuery(this).attr("rel");
        jQuery("div.slide").stop(true, true).css('display', 'none');
        jQuery("."+thisClass).animate({opacity: "show", height: "show"}, "slow");
        jQuery('#header ul li.active').removeClass("active");
        jQuery(this).parent("li").addClass("active");
        return false;
    });
    jQuery('#postit-click a').click(function(){
        var thisClass = jQuery(this).attr("rel");
        jQuery('header ul li.active').html('Variable: '+thisClass);
        jQuery("div.slide").stop(true, true).css('display', 'none');
        jQuery("."+thisClass).animate({opacity: "show", height: "show"}, "slow");
        jQuery('#header ul li.active').removeClass("active");
        jQuery(thisClass).addClass("active");
        return false;
    }); 
```

在此先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:55:23.633

耐心是关键！哈哈 :) 我不太确定为什么它不能在我的 iPad 或 iPhone 上运行，但它现在可以运行了。我查看了 jQuery 文档，发现应该没有任何问题。很高兴它有效！

# php - PHP/MySQL 使用 time() 检查过去 24 小时内是否可用的 ip

> ID：14598624
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:21:05.313
> 
> 标签：php, mysqli, ip

数据库：

```
pub_id pub_name time              ip
1      King     1359500087        3388636152
2      Queen    1359550082        6385394932
3      Jack     1359502084        5648646562
4      Heart    1359524083        9283834142
5      Jim      1359503082        3388636152
                |_ Using time()    |_ Using ip2long() 
```

PHP/MySQLi 代码：

```
$pub_id = $_GET['pub_id'];
$pub_name = $_GET['pub_name'];
$ip = ip2long($_SERVER['REMOTE_ADDR']);
$time = time();

$query = $db->query("SELECT * FROM impressions WHERE pub_id = '$pub_id' AND pub_name = '$pub_name' AND ip = '$ip' AND time >= '???'");
$ip_adderss = $query->num_rows;
$query->close();

if($ip_adderss == 0){
// Redirect
} else{
// Do nothing
} 
```

现在使用 time() 和 IP 我如何检查当前访问者上次访问是否是 24 小时前？

一个简单的解决方案是使用 if 语句来检查 ip 时间和现在时间。

```
// Check if the IP is new or returning
$query = $db->query("SELECT * FROM impressions WHERE pub_id = '$pub_id' AND pub_tag = '$pub_tag' AND month = '$month' AND day = '$day' AND ip = '$ip' AND domain = '$domain' AND valid = '1' ORDER BY id DESC");

$ip_address = $query->num_rows;

if($ip_address == 0){

    $ip_ok = 1;

} elseif($ip_address != 0){

    $impression = $query->fetch_assoc();

    if($time >= ($impression['time'] + 86400)){

        $ip_ok = 1;

    } else{

        $ip_ok = 0;

    }

} else{

$ip_ok = 0;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:38:14.137

您的`time`字段包含 unix 时间戳，它只是几秒钟。
因此，计算一天前的点很容易——只需从当前时间戳中减去 86400。
所以，你的情况就像小学数学一样简单：

```
WHERE time >= unix_timestamp() - 86400 
```

或者，如果你想使用`time()`PHP 函数

```
$time  = time() - 86400;
$query = "SELECT * FROM impressions WHERE ... AND time >= ?"); 
```

然后绑定该值。

# image - 如何在 BlackBerry 中将图像转换为位图？

> ID：14598626
> 
> 赞同：0
> 
> 时间：2013-01-30T07:21:07.737
> 
> 标签：image, blackberry, bitmap

在我的应用程序中，我从服务器获取图像。现在我想将该图像转换为位图以在屏幕上显示。为此，我使用以下代码。但这并没有给我相同的图像，这意味着没有确切的尺寸和清晰度。它比确切的图像要小。

我使用了以下代码：

```
private Bitmap getBitmapFromImg(Image img) {
    Bitmap bmp = null;
    try {
        Logger.out(TAG, "It is inside the the image conversion        " +img);
        Image image = Image.createImage(img);
        byte[] data = BMPGenerator.encodeBMP(image);
        Logger.out(TAG, "It is inside the the image conversion---333333333"+data);
        bmp = Bitmap.createBitmapFromBytes(data, 0, data.length, 1);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return bmp;
} 
```

这是 BMPGenerator 类：

```
public final class BMPGenerator {

    /**
     * @param image
     * @return
     * @throws IOException
     * @see {@link #encodeBMP(int[], int, int)}
     */
    public static byte[] encodeBMP(Image image) throws IOException {
            int width = image.getWidth();
            int height = image.getHeight();
            int[] rgb = new int[height * width];
            image.getRGB(rgb, 0, width, 0, 0, width, height);
            return encodeBMP(rgb, width, height);
    }

    /**
     * A self-contained BMP generator, which takes a byte array (without any unusual
     * offsets) extracted from an {@link Image}. The target platform is J2ME. You may
     * wish to use the convenience method {@link #encodeBMP(Image)} instead of this.
     * <p>
     * A BMP file consists of 4 parts:-
     * <ul>
     * <li>header</li>
     * <li>information header</li>
     * <li>optional palette</li>
     * <li>image data</li>
     * </ul>
     * At this time only 24 bit uncompressed BMPs with Windows V3 headers can be created.
     * Future releases may become much more space-efficient, but will most likely be
     * ditched in favour of a PNG generator.
     * 
     * @param rgb
     * @param width
     * @param height
     * @return
     * @throws IOException
     * @see http://en.wikipedia.org/wiki/Windows_bitmap
     */
    public static byte[] encodeBMP(int[] rgb, int width, int height)
                    throws IOException {
            int pad = (4 - (width % 4)) % 4;
            // the size of the BMP file in bytes
            int size = 14 + 40 + height * (pad + width * 3);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream(size);
            DataOutputStream stream = new DataOutputStream(bytes);
            // HEADER
            // the magic number used to identify the BMP file: 0x42 0x4D
            stream.writeByte(0x42);
            stream.writeByte(0x4D);
            stream.writeInt(swapEndian(size));
            // reserved
            stream.writeInt(0);
            // the offset, i.e. starting address of the bitmap data
            stream.writeInt(swapEndian(14 + 40));
            // INFORMATION HEADER (Windows V3 header)
            // the size of this header (40 bytes)
            stream.writeInt(swapEndian(40));
            // the bitmap width in pixels (signed integer).
            stream.writeInt(swapEndian(width));
            // the bitmap height in pixels (signed integer).
            stream.writeInt(swapEndian(height));
            // the number of colour planes being used. Must be set to 1.
            stream.writeShort(swapEndian((short) 1));
            // the number of bits per pixel, which is the colour depth of the image.
            stream.writeShort(swapEndian((short) 24));
            // the compression method being used.
            stream.writeInt(0);
            // image size. The size of the raw bitmap data. 0 is valid for uncompressed.
            stream.writeInt(0);
            // the horizontal resolution of the image. (pixel per meter, signed integer)
            stream.writeInt(0);
            // the vertical resolution of the image. (pixel per meter, signed integer)
            stream.writeInt(0);
            // the number of colours in the colour palette, or 0 to default to 2n.
            stream.writeInt(0);
            // the number of important colours used, or 0 when every colour is important;
            // generally ignored.
            stream.writeInt(0);
            // PALETTE
            // none for 24 bit depth
            // IMAGE DATA
            // starting in the bottom left, working right and then up
            // a series of 3 bytes per pixel in the order B G R.
            for (int j = height - 1; j >= 0; j--) {
                    for (int i = 0; i < width; i++) {
                            int val = rgb[i + width * j];
                            stream.writeByte(val & 0x000000FF);
                            stream.writeByte((val >>> 8) & 0x000000FF);
                            stream.writeByte((val >>> 16) & 0x000000FF);
                    }
                    // number of bytes in each row must be padded to multiple of 4
                    for (int i = 0; i < pad; i++) {
                            stream.writeByte(0);
                    }
            }
            byte[] out = bytes.toByteArray();
            bytes.close();
            // quick consistency check
            if (out.length != size)
                    throw new RuntimeException("bad math");
            return out;
    }

    /**
     * Swap the Endian-ness of a 32 bit integer.
     * 
     * @param value
     * @return
     */
    private static int swapEndian(int value) {
            int b1 = value & 0xff;
            int b2 = (value >> 8) & 0xff;
            int b3 = (value >> 16) & 0xff;
            int b4 = (value >> 24) & 0xff;

            return b1 << 24 | b2 << 16 | b3 << 8 | b4 << 0;
    }

    /**
     * Swap the Endian-ness of a 16 bit integer.
     * 
     * @param value
     * @return
     */
    private static short swapEndian(short value) {
            int b1 = value & 0xff;
            int b2 = (value >> 8) & 0xff;

            return (short) (b1 << 8 | b2 << 0);
    } 
```

我的代码哪里错了？？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:51:59.400

我相信你不需要这部分：

```
Image image = Image.createImage(img);
byte[] data = BMPGenerator.encodeBMP(image);
Logger.out(TAG, "It is inside the the image conversion---333333333"+data);
bmp = Bitmap.createBitmapFromBytes(data, 0, data.length, 1); 
```

只需用于`Image`获取原始 ARGB 数据：

```
int width = image.getWidth();
int height = image.getHeight();
int[] argbData = new int[height * width];
image.getRGB(argbData, 0, width, 0, 0, width, height); 
```

然后使用`argbData`创建一个`Bitmap`：

```
Bitmap b = new Bitmap(width, height);
b.setARGB(argbData, 0, width, 0, 0, width, height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T05:30:58.170

感谢阿米赫德您的回复。我能够以不同的方式解决这个问题。我正在使用这四行代码：

```
Image image = Image.createImage(img);
byte[] data = BMPGenerator.encodeBMP(image);
EncodedImage encodeimage = EncodedImage.createEncodedImage(data, 0, data.length);
bmp = encodeimage.getBitmap(); 
```

现在我得到了相同质量的图像。我没有检查你的解决方案。可能那也可以工作..

# mysql - 在 EC2 服务器上使用 HAProxy 对 MySql 进行负载平衡

> ID：14598632
> 
> 赞同：1
> 
> 时间：2013-01-30T07:21:43.640
> 
> 标签：mysql, amazon-ec2, haproxy

对于我们在 Amazon EC2 实例上设置的应用程序，我们使用 MySQL 数据库，安装在 2 个 EC2 实例上，处于主-主复制模式。为了对这些数据库服务器进行负载平衡，我使用了部署在另一个 EC2 实例上的 HAProxy，并进行了配置

```
listen  mysql <public dns of haproxy>:<port>
mode tcp
balance roundrobin
server mysql-db-s1 <elastic ip of db server1>:<port> maxconn 2000
server mysql-db-s2 <elastic ip of db server2>:<port> maxconn 2000 
```

所有三个实例都分配了弹性 ip，我使用 haproxy 的公共 dns 从我的应用程序连接。但有时我会收到错误

```
 `com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: C
  ommunications link failure The last packet successfully received from the server was  58,085 milliseconds ago.  
  The last packet sent successfully to the server was 0 milliseconds ago.` 
```

这与我在这里给出的配置有什么关系吗？使用弹性 ip 而不是公共 DNS 更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:40:13.950

这本质上不是 HAProxy 问题，因为我在直接连接到其中一个数据库后遇到了同样的错误。稍微调整了数据库并修复了我的应用程序中的一些代码，现在我至少在过去 12 小时内都没有得到这个。感谢您的建议。我会将其中一个数据库移动到另一个可用区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-29T12:47:02.200

由于对大量网站的请求，Web 服务器和数据库的负载平衡概念。所以我们需要知道如何通过负载均衡来处理这么多的请求。

在本文中，我们将讨论使用 HAProxy 的 MySQL 负载平衡概念。假设 MySQL 节点 1 的 IP 地址为 192.168.1.172，MySQL 节点 2 的 IP 地址为 192.168.2.82。

第 1 步：创建 MySQL 用户并安装 MySQL 客户端 我们需要确保 MySQL 服务器必须配置为执行 Master-Master 复制，因为负载平衡涉及读取和写入所有后端。我们首先需要为 HAPorxy 创建一个 MySQL 用户。HAProxy 将使用第一个用户来检查服务器的状态

```
$ mysql -u root -p -e "INSERT INTO mysql.user (Host,User) values ('192.168.1.172','haproxy_check'); FLUSH PRIVILEGES;"
$ mysql -u root -p -e "GRANT ALL PRIVILEGES ON *.* TO 'haproxy_root'@'192.168.1.172' IDENTIFIED BY 'password' WITH GRANT OPTION; FLUSH PRIVILEGES"

$ sudo apt-get install mysql-client

$ sudo apt-get install haproxy
$ sed -i "s/ENABLED=0/ENABLED=1/" /etc/default/haproxy

$ sudo nano /etc/haproxy/haproxy.cfg 
```

并将此内容添加到该新配置文件中

```
global
log 127.0.0.1 local0 notice
user haproxy
group haproxy
defaults
log global
retries 2
timeout connect 3000
timeout server 5000
timeout client 5000

listen mysql-cluster
bind 127.0.0.1:3306
mode tcp
option mysql-check user haproxy_check
balance roundrobin
server mysql-1 192.168.1.172:3306 check
server mysql-2 192.168.2.82:3306 check 
```

第 3 步：测试负载平衡

```
$ mysql -u haproxy_root -p -e "show variables like 'server_id'" 
```

# factor-lang - 如何在因子中调用构造的报价

> ID：14598633
> 
> 赞同：8
> 
> 时间：2013-01-30T07:21:49.857
> 
> 标签：factor-lang

我有一个词构成了我想要被调用的引用。但是，当我加载代码时，我得到**Cannot apply “call” to a run-time computed value**。如果我使用 walker 并逐步执行它按预期执行的代码。你应该如何调用构造的报价？

```
: ba>struct ( array class -- struct array )
[ <struct> swap ] keep struct-slots
[
    [ type>> to-type ] keep  
    name>> setter-word 1quotation curry
    [ over ] dip  curry  call drop
] each
; 
```

编辑：这确实有效

```
: ba>struct ( array class -- struct array )
    [ <struct> swap ] keep struct-slots
    [
        [ type>> to-type ] keep  
        name>> setter-word 1quotation curry
        [ over ] dip  curry  call( -- x ) drop
    ] each
    ; 
```

问题源于运行时不知道构造引用的堆栈效应是什么。在这些情况下，您必须在调用的引用中声明堆栈的样子。

# php - 如果在 Facebook 发布流脚本中发现致命错误，则继续循环

> ID：14598641
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:22:22.563
> 
> 标签：php, facebook, loops, fatal-error, continue

我有以下 PHP 代码：

```
require 'facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'XXXX',
  'secret' => 'XXXX',
));
$ids = array('1234','5678','1348','1476');
foreach ($ids as $id) {
    $USER_ID = $id; 
    $args = array( 
        'message'       =>  'Hello from XXXXX',
        'link'          =>  'http://www.xxxxx.com/',
        'caption'       =>  'Visit XXXXXXX.com for Facebook API Integration.',
        'picture'   =>  'http://www.xxxxxxx.com/busman.png'
    );
$post_id = $facebook->api("/$USER_ID/feed", "post", $args);
} 
```

效果很好，偶尔有些用户可以卸载或撤销对 facebook 应用程序的访问权限以代表他/她发布，如果该用户 ID 处于循环中，则整个过程将停止在那里并且下一个用户不会被触及.

即使遇到此致命错误，我该怎么做才能继续循环：

> 致命错误：未捕获的 OAuthException：(#200) 用户尚未授权应用程序执行在 /home/xxxxx/public_html/xxxxx/base_facebook.php 第 1254 行抛出的此操作 <

顺便说一句，我正在为 Facebook 使用 PHP SDK。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:43:22.490

尝试捕捉异常。就像是：

```
try {

    $post_id = $facebook->api("/$USER_ID/feed", "post", $args);

} catch (FacebookApiException $e) {

    // Do something with the error if you want.
    // For example, remove it from your list so that your
    // script doesn't try to use this ID again.

} catch (Exception $e) {

    // Any other exception
} 
```

更多信息：

*   Facebook API 错误和异常（和代码）：
    [https ://developers.facebook.com/docs/reference/api/errors/](https://developers.facebook.com/docs/reference/api/errors/)
*   使用 PHP 处理 Facebook API 错误：
    [https ://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)
*   PHP 异常剖析：
    [http ://www.php.net/manual/en/class.exception.php](http://www.php.net/manual/en/class.exception.php)
*   捕获 PHP 异常：
    [http: //php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

# android - 如何在 android 应用程序中使用 yahoo contact api？

> ID：14598642
> 
> 赞同：5
> 
> 时间：2013-01-30T07:22:23.907
> 
> 标签：android, contacts, yahoo-api

我想在[这里](http://developer.yahoo.com/social/contacts/)从 yahoo contact api 获取所有电子邮件 ID 和姓名。我已经阅读了 yahoo contact api 的文档，通过我的帐户登录我已经创建了 api 密钥和消费者密钥，我能够在线看到 json 响应，现在我的问题是如何将这样的东西集成到 android 中，（即如何在android中获得这样的json响应），关于这个api的android文档缺乏。我也读过[这篇](http://developer.yahoo.com/forum/Fantasy-Sports-API/Yahoo-API-for-Android-application/1325574236600-f1a6913c-07c4-4ef8-85d9-a33a6662ba54)文章，但这让我更加困惑，任何人都可以指导我正确地指导我如何在 android 应用程序中使用这个 api。

谢谢

# database - 一两个字段代表“当前步骤”和“是否完成”状态？

> ID：14598643
> 
> 赞同：0
> 
> 时间：2013-01-30T07:22:24.770
> 
> 标签：database, database-design

对不起，如果这个问题太愚蠢或太神经质......但我自己无法弄清楚。所以我想看看其他人是如何处理的。

我的问题是：

我想写一个程序来显示做某事的进度。所以我需要记录它当前处于哪个状态，以便有人可以随时检查它。有两种方法：

1.  使用两个字段来表示进度状态：`step`和`is_finished`。

2.  仅提交一个：`step`. 例如，如果这件事需要 5 步，则`6`意味着完成。（0表示未启动？）

比较以上两种方法。

两个领域：

1.  似乎更清楚了。而最重要的是，从逻辑上讲`step`和`finished or not`是两个概念吗？我不确定。

2.  如果事情结束了。我们将`is_finished`字段更改为`true`（或您喜欢的 1）。但是现在如何处理`step`字段？加一个，或者只是因为它现在没有意义而不再碰它？

一个领域：

1.  简单，节省空间。但不是很直观。例如，我们不知道`6`仅查看此字段的真正含义，因为它可能代表完成或中间步骤。它需要其他信息`total step`来确定。如果总步数发生变化，这个含义可能不是很稳定（`is_finished`两场方法中的场不会受此影响）。

那么您将如何处理呢？谢谢！

**更新：**

我忘记了在上一篇文章中可能有用的一点：

故事是：我们为客户提供基于网络的服务。（此服务有时间限制，例如1年期限） 客户购买后，我们的部署程序准备硬件（虚拟机）并部署一些需要一些时间才能完成的软件。我们想为客户提供进度信息。部署完成后，应通知客户。

数据库设计：

1.  它需要一个`usage state`字段来表示`running normal`, `running but owe (expired)`, `stop`。令我困惑的是它是否应该包含`not deployed yet`信息`deploying`？

2.  进度信息应该包括一些其他信息，例如，`start time`这样我们就可以知道自开始以来经过了多少时间。但是这个信息不需要持久化，因为只要它完成了我们就不会关心这些信息。所以我决定将这些进度信息存储在一个单独的（临时）表中。然后我认为它需要另一个更持久的表中的另一个字段来判断事情是否完成。那么我们可以将它结合到`usage state`上面提到的领域吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:32:34.483

这仍然是一个品味问题，但我建议使用单一`int`字段的第二个选项`step`。在插入新记录时，初始化将指示“尚未开始”的`step`值`0`。任何正整数值显然都表示当前步骤。一旦轨迹完成，我将设置`step`为`NULL`. 正如您正确指出的那样，此方法确实需要可靠的文档，但我认为它并不太令人困惑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:24:42.363

我更喜欢单场方法，原因如下：

*   （假设您要搜索步骤）您可以仅使用一个简单的索引“覆盖”所有步骤。
*   如果您想在每个步骤中附加一些附加信息，单字段方法可以轻松地将 FOREIGN KEY 容纳到包含该信息的新表中。
*   需要的存储空间略少。如今，存储很便宜，但这不是重点——缓存和网络性能才是。

两场方法：

*   （假设您要搜索步骤）可能需要一个“更胖”的复合索引甚至两个索引（这会占用空间、降低缓存效率并导致 INSERT/UPDATE/DELETE 操作的维护成本）。
*   需要 CHECK 来保护数据库免受“不可能”组合的影响。有趣的是，一些 DBMS 不强制执行 CHECK（我在看着你，[MySQL](https://stackoverflow.com/a/2115511/533120)）。
*   需要稍多的存储空间（因此适合缓存的空间会稍少，占用的网络带宽稍多等）。

注意：如果您选择使用 NULL，这可能会在某些 DBMS 下产生“有趣”的后果（例如，[Oracle 不索引 NULL](http://www.dba-oracle.com/oracle_tips_null_idx.htm)）。

> 例如，我们不知道 6 的真正含义

这并不重要，只要客户端*应用程序*知道它的含义。

为应用程序而不是人类设计数据库。

> 如果总步骤发生变化，这个含义可能不是很稳定

是的，但是如果在现有步骤的“中间”添加新步骤，则双字段方法也有同样的问题。

*   要么相应地更新表，
*   或者永远不要更改步长值。例如，如果第 5 步是最后一个，那么尽管新添加的第 6 步具有更大的价值，但会更早考虑 - 您的应用程序（或我提到的附加表）将知道步骤的顺序，即使它们的值没有排序。如果您*真的*想要“按值排序”而不使用 UPDATE，请执行以下步骤：10、20、30 等，这样您就可以在间隙中插入新步骤（旧的 BASIC 行号技巧）。

# ajax - 在没有 div 的情况下在 Head 中对脚本或样式进行分组的最佳方法？

> ID：14598644
> 
> 赞同：0
> 
> 时间：2013-01-30T07:22:28.547
> 
> 标签：ajax, html, scripting, load, head

双重问题。

使用利用**AJAX**加载新页面的 Web 模板，而不是传统的指向浏览器到 url 样式，如何在必要时向页面头部添加新的脚本或样式标签？

我认为使用 jQuery $('head').append(script); 工作得很好，但是（这是下半部分），如果我想将所有依赖于页面的脚本与那些在整个网站上通用的脚本分组，我该怎么做？

使用`div`声音如此诱人，因为我可以在初始页面渲染时打印它并调用 ，但在**头脑**`$('head div.external').append(script)`中仍然可能是个坏主意。

 **是否有任何其他元素或方法可以用来对这些进行分组？目标是在用户离开当前页面时轻松删除所有这些。一个较小的考虑是 Google Analytic 指示您将它放在 head 标签的末尾（老实说，我不知道为什么最后一个脚本很重要），我不希望我的脚本干扰。这些甚至需要在头部，我可以在身体的末端放置一个 div 并使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:28:23.777

当然，如果有必要，最简单的方法是使用类：

```
$(script).addClass('external').appendTo('head'); 
```

然后稍后：

```
$('script.external').remove(); 
```

但是，老实说，我不确定这会实现什么。**

# apache-flex - 如何在数据网格中添加文本输入？

> ID：14598647
> 
> 赞同：2
> 
> 时间：2013-01-30T07:22:41.883
> 
> 标签：apache-flex, datagrid

我正在尝试在数据网格中添加一个 textInput，以便用户可以看到有一个文本框供他们编辑。我有一个 textInputRender 以便我可以在 dataGrid 中显示文本框并相应地更新值。

我还有另一个 dataGrid 表来捕获我在之前的 dataGrid 表中选择的值。

问题是我能够在 dataGrid 表中看到文本框。但是我必须双击单元格并输入我的值才能将 dataGrid 中单元格的值保存回数据提供者。实际上，用户不会双击输入，因为他们可能只是在其中输入值。是否有无需双击单元格即可捕获值的方法？？

双击文本框并输入我的新值后的下一个问题它不反映文本框中的变化。但是我可以看到新输入的值被捕获。

请帮助我。我已经为此苦苦挣扎了很长时间。请告诉我如何解决这个问题？

这是我将它放在 GridItemRenderer 标签中的文本框的自定义渲染器：

```
<s:TextInput id="ti" text="{data.quant}"/> 
```

这是我的代码：

```
 <fx:Script>
    <![CDATA[                
        import FrontEndObjects.ColourItems;         
        import mx.collections.ArrayCollection;          
        import spark.events.IndexChangeEvent;

        [Bindable]
        private var order:ArrayCollection = new ArrayCollection();  

        private function addOrder():void{               
            var orderItems:ColourItems = new ColourItems("OrderNo","1","--Choose a colour--");
            order.addItem(orderItems);              
        }  

        [Bindable]
        private var confirmOrder:ArrayCollection = new ArrayCollection();   

        protected function saveData(event:MouseEvent):void
        {
            //dataGrid is the id (name) of our dataGrid table
            var dataProvider = myDG.dataProvider;               
            var item = null;
            for (var i:int = 0; i < dataProvider.length; i++)
            {
                item = dataProvider.getItemAt(i);
                confirmOrder.addItem(item);
                //Alert.show("the data is : " + item);
            } 

        }
    ]]>
</fx:Script>

<s:BorderContainer x="240" y="50" width="449" height="518">
    <s:DataGrid id="myDG" x="32" y="27" width="393" height="151" dataProvider="{order}"
                editable="true" variableRowHeight="true">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="label1" headerText="Order #" editable="false"/>                
                <s:GridColumn dataField="quant" headerText="Qty" editable="true" itemRenderer="DesignItemRenderer.myTextInputRender"/>                  
                <s:GridColumn dataField="color" headerText="Color" editable="true" rendererIsEditable="true">                       
                    <s:itemRenderer>
                        <fx:Component>                              
                            <s:GridItemRenderer>
                                <fx:Script>
                                    <![CDATA[
                                        import spark.events.IndexChangeEvent;

                                        protected function onCbChange(event:IndexChangeEvent):void
                                        {
                                            var value:String = (event.currentTarget as DropDownList).selectedItem;
                                            data[column.dataField] = value; 
                                        }
                                    ]]>
                                </fx:Script>                                    
                                <s:DropDownList id="cb" width="100%" change="onCbChange(event)" prompt="--Choose a colour--">  <!--selectedIndex="0" requireSelection="true" >-->
                                    <s:dataProvider>
                                        <s:ArrayCollection>
                                            <fx:String>red</fx:String>
                                            <fx:String>blue</fx:String>
                                            <fx:String>green</fx:String>
                                        </s:ArrayCollection>                                        
                                    </s:dataProvider>
                                </s:DropDownList>                                   
                            </s:GridItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>           
                </s:GridColumn>                 
            </s:ArrayList> 
        </s:columns >
    </s:DataGrid>
    <s:DataGrid id="myDG1" x="24" y="317" width="401" height="174" dataProvider="{confirmOrder}"
                requestedRowCount="4">
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="label1" headerText="Ordernum - getback"></s:GridColumn>
                <s:GridColumn dataField="quant" headerText="quanty-getback"></s:GridColumn>
                <s:GridColumn dataField="color" headerText="color-getback"></s:GridColumn>
            </s:ArrayList>
        </s:columns>    
    </s:DataGrid>
    <s:Button x="355" y="186" label="add" click="addOrder()" />
    <s:Button x="277" y="186" label="save" click="saveData(event)"/>
</s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:03:08.553

试试这个：

在 GridColumn "quant" 中设置 rendererIsEditable="true"

```
<s:GridColumn dataField="quant" headerText="Qty" editable="true" rendererIsEditable="true" itemRenderer="DesignItemRenderer.myTextInputRender"/> 
```

像这样更改您的 ItemRenderer

```
<?xml version="1.0" encoding="utf-8"?> 
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                xmlns:s="library://ns.adobe.com/flex/spark" 
                xmlns:mx="library://ns.adobe.com/flex/mx"
                clipAndEnableScrolling="true">

<fx:Binding source="ti.text" destination="data.quant"/>

<s:TextInput 
    id="ti" 
    text="{data.quant}" 
    editable="true"/> 

</s:GridItemRenderer> 
```

它对我很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:39:58.197

无论如何，我无法识别出您的代码存在哪些问题，我设法开发了一个：

> 数据网格中的文本输入，以便用户可以看到有一个文本框供他们编辑

使用此代码

```
 <mx:DataGrid id="weekGrid" width="100%" height="60%"
    dataProvider="{weekList}" editable="true">
<mx:DataGridColumn id="noteColumn" dataField="note" editable="false"
               headerText="Note" sortable="false">
    <mx:itemRenderer>
        <fx:Component>
            <mx:VBox width="100%" height="100%" horizontalAlign="center"
                     verticalAlign="middle">
                <fx:Script>
                    <![CDATA[
                        import managers.StraordinariManager;

                        import spark.events.TextOperationEvent;

                        protected function textinput1_changeHandler(event:TextOperationEvent):void
                        {
                            data['note']=textInput.text;        
                            outerDocument.notSavedAlert.statrtBlinker();
                        }

                    ]]>
                </fx:Script>

                <s:TextInput id="textInput" width="100%" height="100%"
                             borderVisible="false"
                             change="textinput1_changeHandler(event)"
                             editable="{data.oreStr!=null}"

                             text="{data.oreStr!=null?data.note:''}">
                </s:TextInput>
            </mx:VBox>
        </fx:Component>
    </mx:itemRenderer>
   </mx:DataGridColumn>
</mx:DataGrid> 
```

我使用 a`ItemRenderer`而不是 a`ItemEditor`来避免双击问题。请注意，列`editable`属性设置为`false`，但网格设置为`editable="true"`。

我还使用相同的技术来插入不同的组件，这是一个使用单选按钮的示例：

```
 <mx:DataGridColumn id="flag" headerText="Approva Rifiuta" >
                <mx:itemRenderer>
                    <fx:Component>
                        <mx:HBox width="100%" height="100%" horizontalAlign="center" 
                                 verticalAlign="middle">

                            <fx:Script>
                                <![CDATA[
                                    import managers.IngressiManager;
                                    import mx.events.FlexEvent;

                                    protected function radiobutton1_changeHandler(event:Event):void
                                    {   
                                        if(apprRb.selected){
                                            data['flag']=ApprovazioneStraordinariView.APPROVA_FLAG;
                                            data['note']="";
                                        }else
                                            if(rifRb.selected){
                                                data['flag']=ApprovazioneStraordinariView.RIFIUTA_FLAG;
                                            }
                                    }

                                ]]>
                            </fx:Script>
                            <s:RadioButton id="apprRb" label="A"
                                           click="radiobutton1_changeHandler(event)"  
                                           groupName="approvaRifiutaGroup" 
                                           selected="{data['flag']==ApprovazioneStraordinariView.APPROVA_FLAG}">
                            </s:RadioButton>
                            <s:RadioButton id="rifRb" label="R"  
                                           click="radiobutton1_changeHandler(event)"
                                           groupName="approvaRifiutaGroup" 
                                           selected="{data['flag']==ApprovazioneStraordinariView.RIFIUTA_FLAG}">
                            </s:RadioButton>
                            <fx:Declarations>
                                <s:RadioButtonGroup  id="approvaRifiutaGroup">
                                </s:RadioButtonGroup>
                            </fx:Declarations>
                        </mx:HBox>
                    </fx:Component>
                </mx:itemRenderer> 
```

# javascript - 单击任何标签链接a，按钮或提交按钮时如何检查windon next url？

> ID：14598648
> 
> 赞同：1
> 
> 时间：2013-01-30T07:22:46.213
> 
> 标签：javascript, url, browser

就像我有一个带有内部网站页面链接和社交媒体和其他网站链接的网站，如果用户点击任何链接，div 有 onclick 事件，按钮任何类型的事件是重新加载页面或进入网站的其他页面。

我想检查用户是否正在离开网站或只是进入网站的另一个页面。

很简单，我想检查用户是否在我的网页上并在重新加载页面或浏览器 url 更改为下一个 url 之前离开。

# java - 核心 Java 数组插入

> ID：14598650
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:22:57.873
> 
> 标签：java

我想在数组中插入一个元素。我有一个大小为 5 的数组 1（其中所有索引都已满）。我又创建了一个大小为 6 的数组 2，并将数组 1 的所有元素插入到数组 2 中。现在我想在array2的第3个位置插入一个元素，这样第3个位置的元素将移动到第4个，第4个将移动到第5个，第5个将移动到6个。

我在下面开发了一个程序。但是让字符串索引超出界限异常。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:27:33.550

`System.arraycopy(...)`方法是你的帮手。剩下的你自己做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:25:55.877

可悲的是，阵列不是这项任务的最佳选择。如果您不必将自己绑定到数组，我建议您使用 List (ArrayList)。你也有方法 toArray()。

这是一个教程，但您会发现许多其他教程：[http ://www.java-samples.com/showtutorial.php?tutorialid=234](http://www.java-samples.com/showtutorial.php?tutorialid=234)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:34:32.703

我快速给你打了点东西。

```
public int[] insert(final int[] array, final int index, final int...nums){
    if(nums.length == 0){
        return array;
    }
    int[] newArray = new int[array.length + nums.length];
    int i = 0;
    for(; i < index; i++){
        newArray[i] = array[i];
    }
    for(int j = 0; j < nums.length; j++){
        newArray[i + j] = nums[j];
    }
    for(; i < array.length; i++){
        newArray[i + nums.length] = array[i];
    }
    return newArray;
} 
```

我个人尽量避免使用 System.arraycopy，因为在这里您可以更轻松地看到更好的流程。如果你能看到它是如何工作的，这比依赖别人的代码更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:47:39.883

如果您需要在数组中间插入并动态更改其大小 - 最好使用 LinkedList 集合。

# openerp - 回复字段未在 openerp v7 上显示

> ID：14598653
> 
> 赞同：0
> 
> 时间：2013-01-30T07:23:02.430
> 
> 标签：openerp

将消息发送到电子邮件地址时，如何显示**回复字段？**我很困惑，因为有时它会显示，有时不会..

我使用 Openerp v7 ..

我从**mail_mail.py**修改了**_get_default_from**。

 **```
def _get_default_from(self, cr,uid, context=None):
this = self.pool.get('res.users').browse(cr, uid,uid, context=context)
    if this.alias_domain:
    return '%s@%s' % (this.alias_name,this.alias_domain)
elif this.email:
    return this.email
    raise osv.except_osv(_('Invalid Action!'), _("Unable to send email, please configure the sender's email address or alias."))
_defaults = {
    'state': 'outgoing',
    'email_from': lambda self, cr, uid, ctx=None: self._get_default_from(cr, uid,ctx),
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T06:17:04.280

显然`_get_default_from()`方法用于获取“email_from”字段的值。

请参阅*mail_mail.py*中的**_columns**，有一个名为“reply_to”的列：

```
'reply_to': fields.char('Reply-To', help='Preferred response address for the message') 
```

如果您想显示“reply_to”，我认为您必须将此字段添加到定义视图的 XML 文件中。**

# php - 报错mysql查询

> ID：14598657
> 
> 赞同：0
> 
> 时间：2013-01-30T07:23:20.223
> 
> 标签：php, mysql, sql

我正在将包含 mysql_* 函数的 php 脚本转换为 PDO。

我想在我的旧脚本中显示所有与 sql 相关的错误，但我注意到，只要**sql 语法有错误，**即使打开了错误报告，php 也会输出一个空白页。错误也不会记录在日志文件中。

如果我在包含多个 sql 查询的脚本末尾使用 mysql_error() 函数，则各个 sql 查询报告的错误将被**覆盖**，并且仅显示最后创建的错误。

所以我的问题不是在每个 sql 查询的末尾使用 die() 或 mysql_error() 函数，有没有一种方法可以一次查看脚本中的所有错误？

我正在使用 PHP 5.3.8 版和 mysql 5.5 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:39:30.120

> 所以我的问题不是在每个 sql 查询的末尾使用 die() 或 mysql_error() 函数，有没有一种方法可以一次查看脚本中的所有错误？

不建议这样做。因为它不会停止脚本（**通常在关键点**），而是会继续执行。

但是，如果您真的需要这个，您可以将所有`SQL`错误保存在某个容器中，例如`$errors`数组。它看起来像这样（程序代码）：

```
<?php

$errors = array();

if ( ! mysql_query("SOME INVALID QUERY") ){

    array_push($errors, mysql_error());
}

if ( ! mysql_query("SOME ANOTHER INVALID QUERY") ){
   array_push( $errors, mysql_error() );
}

//lot of code
//.....

print_r( $errors ); 
```

`error_reporting``display_errors`它们都与 SQL 错误无关，而是 PHP 引擎本身。它们不会显示任何 SQL 错误。

而且，像往常一样，停止使用`mysql_*`函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:30:34.423

肯定`mysql_error()`只返回来自最新查询的错误。

关于 PHP 返回一个空白页，可能你没有打开 display_errors。您需要同时打开两个`error_reporting`AND`display_errors`指令才能显示错误。

# c++ - 如何以编程方式禁用opencv中两个网络摄像头的自动对焦

> ID：14598662
> 
> 赞同：0
> 
> 时间：2013-01-30T07:23:37.173
> 
> 标签：c++, opencv, webcam, directshow

由于自动对焦，我很难校准两台相机并获得它们的姿势。我正在使用两个相同类型的罗技网络摄像头，openCV 和 C++。

我试过这个：

```
cv::Size imageSize(1600,1200);      
cv::VideoCapture cap1(0);
cap1.set(CV_CAP_PROP_FRAME_WIDTH,imageSize.width);
cap1.set(CV_CAP_PROP_FRAME_HEIGHT,imageSize.height);

cv::VideoCapture cap2(1);
cap2.set(CV_CAP_PROP_FRAME_WIDTH,imageSize.width);
cap2.set(CV_CAP_PROP_FRAME_HEIGHT,imageSize.height);

IAMCameraControl *pCameraControl; 
HRESULT hr; 
if (hr == S_OK) {
  long defaultFocusValue = 0;
  hr = pCameraControl->Set(CameraControl_Focus, // property 
                        defaultFocusValue, // value
                        CameraControl_Flags_Manual //Flag
                                ); 
} 
```

仅使用一台相机即可工作，但使用两台 - 不是。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:11:35.133

IAMCameraControl接口在 DirectShow 捕获过滤器上公开**。**您没有展示如何获得此接口，但通常您需要从每个捕获过滤器中获取此接口的单独实例，如（C# 代码示例）：

```
IAMVideoProcAmp VideoProcAmp1 { get { return cap1 as IAMVideoProcAmp; } }
IAMVideoProcAmp VideoProcAmp2 { get { return cap2 as IAMVideoProcAmp; } } 
```

# elisp - 在 emacs lisp 中柯里化一个函数

> ID：14598664
> 
> 赞同：7
> 
> 时间：2013-01-30T07:23:38.950
> 
> 标签：elisp, emacs24

我有许多方便的函数可以在当前单词或区域上运行，并且由于懒惰等原因。我已经用模板构建了它们......

例如

```
(defun lower-camelcase-at-point-or-region ()
  "lowerCamelCaseTheCurrent dashed or snake_case word or any words in text selection."
  (interactive)
  (let (pos1 pos2 meat)
    (if (and transient-mark-mode mark-active)
        (setq pos1 (region-beginning)
              pos2 (region-end))
      (setq pos1 (car (bounds-of-thing-at-point 'symbol))
            pos2 (cdr (bounds-of-thing-at-point 'symbol))))
    (setq meat (s-lower-camel-case (buffer-substring-no-properties pos1 pos2)))
    (delete-region pos1 pos2)
    (insert  meat)    
    )
  ) 
```

实际上，这都是样板，除了这条线......

```
(setq meat (s-lower-camel-case (buffer-substring-no-properties pos1 pos2))) 
```

我在哪里调用`s-lower-camel-case`缓冲区子字符串。我想重用 at point 或 region 的东西，但不要在任何地方复制它，（因为这很愚蠢，而且维护起来很头疼。）

所以我真正想知道的是，我可以在 Emacs Lisp 中 curry 函数吗？

当我尝试这个...

```
(defun do-stuff-on-point-or-region ()
  "Do stuff."
  (interactive)
  (operate-on-point-or-region 's-lower-camel-case)
) 
```

定义`operate-on-point-or-region`为...：

```
(defun operate-on-point-or-region (fn)
  "Pick the substring at point, or region 
   and replace it with the output of fn"
  (let (pos1 pos2 meat)
    (if (and transient-mark-mode mark-active)
        (setq pos1 (region-beginning)
              pos2 (region-end))
      (setq pos1 (car (bounds-of-thing-at-point 'symbol))
            pos2 (cdr (bounds-of-thing-at-point 'symbol))))
    (setq meat (fn (buffer-substring-no-properties pos1 pos2)))
    (delete-region pos1 pos2)
    (insert  meat)    
    )
) 
```

我得到：`Symbol's function definition is void: fn`

我是否愚蠢地假设在 Emacs Lisp 中可以进行柯里化！？还是我只是做错了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T08:47:38.370

I wish to add that in Emacs lisp currying is not possible -- function application is not currying, because it does not follow the curry's formula.

Currying means to apply a function to partial arguments, and return another function. This is not possible in Elisp, due to the dynamic scope.

EDIT: UPDATE

Now emacs-gnu has closures.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T08:12:48.370

首先，emacs-lisp 是一个 2-lisp，有点，排序，所以以下是无效的：

```
(defun foo (fn)
  (fn 3)) ;; DOES NOT WORK! 
```

相反，您必须执行以下操作：

```
(defun foo (fn)
  (funcall fn 3)) 
```

所以如果你`(setq meat (fn`用`(setq meat (funcall fn`代码替换应该可以工作。

# javascript - 使用 Javascript 链接图像组件

> ID：14598665
> 
> 赞同：0
> 
> 时间：2013-01-30T07:23:43.090
> 
> 标签：javascript, tridion

我在 Tridion 中有一个嵌入式组件，它具有 Image 字段（名为 LeadImage）。使用自定义弹出窗口，我想在此图像字段（leadImage）中链接图像。可能吗？这必须通过单击组件的“保存”事件来完成，因此主要是 jquery/javascript。

要链接的图像已经在 CMS 系统中。默认情况下，它将通过在自定义弹出窗口中执行一些其他操作来创建。我将拥有图像的 tcmid/图像名称等。

无法找到有关 Anguilla Api 的太多文档来帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T00:07:44.557

是的，可以使用 Anguilla 框架覆盖 SDL Tridion GUI 中的“插入组件”按钮。

有大量关于 anquilla 框架的帖子......我推荐这个[http://albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript- without-showing-a-gui-element/](http://albertromkes.com/2012/01/30/tridion-gui-extensions-how-to-load-a-javascript-without-showing-a-gui-element/)向您展示如何将您自己的 javascript 注入特定的“视图”

要覆盖插入组件按钮，您只需删除事件处理程序：

```
// remove the default insert behavior which is to open up the item select dialog
$log.message("Removing handlers for the insert event");
$evt.removeAllEventHandlers(fieldBuilder, "insert"); 
```

然后你可以通过添加你自己的事件处理程序来放置你自己的功能：

```
// add our own insert behavior
$log.message("Adding a custom handler for the insert event");
$evt.addEventHandler(fieldBuilder, "insert", function(event) {
  // whatever it is you wish to do :)
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:41:13.607

我将假设一个“嵌入式组件”是一个`Component Link`允许`Multimedia Links`或可能是一个`Multimedia Link`本身（在模式字段选项中）。

## 开箱即用的架构字段默认值

除了您使用“自定义弹出窗口中的某些其他操作”创建图像以设置默认链接组件这一事实之外，您可以：

1.  `Default Value`在架构字段的链接项目中设置
2.  设置`Default`模板或渲染逻辑

## 关系

否则，使用多种方法之一创建图像之间的关系：

*   手动管理列表（“链接列表”或“容器”组件）
*   “配置”组件（键值对）
*   组织项目——特定文件夹中的项目
*   命名约定——具有相似名称的项目一起呈现
*   类别和关键字（分类法分类）

*作者希望能够控制他们链接到哪些图像或自动添加它们以进行渲染。它不一定必须在组件中。*

## 变化和蓝图

虽然对特定字段的扩展当然是可能的，但为特定模式字段中的特定字段创建此扩展存在风险。确保您的方法适用于新组件、新逻辑和架构更改。

如果您有添加`leadimage`. **还要确保您的组件 ID 使用正确的发布 ID 用于创建这些组件的位置。**

**例如，您需要处理 tcm-id 来自比 020 内容出版物更低的出版物的本地化版本。**

听起来像是一个有趣的要求，请对其他操作应该做什么发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:09:02.637

感谢约翰的快速回复。这与我正在寻找的一致。

由于我的字段生成器将有很多字段，我已将代码修改如下：

```
var imageField = fieldBuilder.getField("lead_image"); // Where lead_image is the name for ImageField in this component

// remove the default insert behavior which is to open up the item select dialog
$log.message("Removing handlers for the insert event");
$evt.removeAllEventHandlers(imageField "insert");

// add our own insert behavior
$log.message("Adding a custom handler for the insert event");
$evt.addEventHandler(imageField , "insert", function(event) {
} 
```

在 addeventhandler 中是否可以根据需要设置 Title 和 ImageIcon ？无法在 Anquilla Api 或其他任何地方找到它。

# android - Android：在 onResume() 期间执行不需要的功能的活动

> ID：14598669
> 
> 赞同：1
> 
> 时间：2013-01-30T07:23:54.770
> 
> 标签：android, onresume, activity-lifecycle

我正在制作一个带有闪屏动画的应用程序。我已经为用户提供了取消动画的选项。

主屏幕 (Home) 有一个 TextView (tv) 。我在 onCreate() 期间设置了文本，并在 onResume() 期间再次设置了文本。

运行动画时，流程为：闪屏 -> 主屏幕 -> 其他活动。tv 的文本已设置，然后返回主屏幕“重新加载”并设置不同的文本。

当动画被取消时，它会从主屏幕开始：主屏幕 -> 其他活动。

问题：当动画被取消时，主屏幕在 onCreate() 期间将文本设置在 tv2 中，然后在 onResume() 中再次设置它，即使我添加了一个“if”子句来防止这种情况发生。

这是代码：

```
public class Home extends Activity {
    public static boolean reload = true;
    EditText tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    tv= (EditText) findViewById(R.id.textViewFact);
    tv.setText(updateText()); 
    MORE STUFF ....
} 
```

如果用户选择取消动画，则从不同的活动中将“重新加载”设置为 false。

现在对于onResume：

```
public void onResume(){
    super.onResume();
    Log.i("test", "home activity before if: " + Home.reload);

    if(!reload){
        Log.i("test", "home activity inside if: " + Home.reload);

        return;
    }
    else{
        Log.i("test", "home activity inside else: " + Home.reload);

        tv.setText(updateText()); 
    }
} 
```

如您所见，updateText() 在 onCreate() 和 onResume() 中运行，但如果 reload 为假（如您在以下 logcat 输出中看到的那样），它不应该运行 updateText( ） 再次。

```
01-30 08:44:50.140: I/test(551): home activity before if: false
01-30 08:44:50.140: I/test(551): home activity inside if: false
01-30 08:44:51.170: I/test(551): home activity before if: false
01-30 08:44:51.170: I/test(551): home activity inside if: false 
```

我不知道为什么它会进入 onResume() TWICE（它是，通过日志输出），以及它是如何运行 updateText() 函数的，当它只在 ELSE 子句中时，它不是t 达到，根据日志输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:02:22.030

事实证明，updateText() 再次被调用，不是从 onResume() 而是从 onCreate()，因为调用主屏幕的活动没有正确完成，实际上调用主活动启动两次。

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:40:09.740

我建议您在首选项中放置和更新您的重新加载标志，并在使用它之前从首选项中获取...

# php - 致命错误：在 ftp_login

> ID：14598673
> 
> 赞同：1
> 
> 时间：2013-01-30T07:24:33.223
> 
> 标签：php, ftp

我正在尝试使用 php 将图像文件上传到远程服务器，我能够成功建立 ftp 连接，但无法使用登录`ftp_login`，它给了我错误`Fatal error:`

**php**

```
require_once('../rmconn.php');

$ftp_conn = ftp_connect($rmhost, 21) or trigger_error(mysqli_connect_error(), E_USER_ERROR);
$ftp_login = @ftp_login($ftp_conn, $user, $pass) or trigger_error(mysqli_error($rmconn), E_USER_ERROR);

ftp_pasv($ftp_conn, true);

if ($ftp_login) {
    echo "Connected as $user@$rmhost\n";
} else {
    echo "Couldn't connect as $user";
}

ftp_close($ftp_conn); 
```

请查看并建议任何可能的方式来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:30:07.787

问题大概出在这里：

```
$ftp_conn = ftp_connect($rmhost, 21) or trigger_error(mysqli_connect_error(), E_USER_ERROR);
$ftp_login = @ftp_login($ftp_conn, $user, $pass) or trigger_error(mysqli_error($rmconn), E_USER_ERROR); 
```

具体在`mysqli_error`部分。像这样替换：

```
$ftp_conn = ftp_connect($rmhost, 21) or die("could not connect");
$ftp_login = ftp_login($ftp_conn, $user, $pass) or die("could not login"); 
```

我也删除了`@`之前的`ftp_login`. 在调试时，您应该抑制警告和错误。

# ruby - “dir”如何与“puts”和“File::realdirpath()”一起使用

> ID：14598677
> 
> 赞同：0
> 
> 时间：2013-01-30T07:24:49.060
> 
> 标签：ruby

请找到以下代码：

```
current_dir = Dir.pwd
Dir.chdir('C:\Documents and Settings\Peter\My Documents\userdata\Downloaded Files')
current_dir = Dir.pwd

Dir.entries(current_dir)[2..-1].each do |dir|

  puts dir
  puts "-------"
  Dir.entries(dir)[2..-1].each do |d|

    #file_loc_dir =
    #File.rename(d, dir.concat(d))
    puts File.realdirpath(d ,dir)
    #puts dir.concat(d)

  end
  puts "-------"
end 
```

***输出：***

```
C:\Documents and Settings\peter\My Documents\userdata\Ruby\Scripts>FileNamere
naming.rb
D07141
-------
C:/Documents and Settings/peter/My Documents/userdata/Downloaded Files/D07141
/Water lilies.jpg
C:/Documents and Settings/peter/My Documents/userdata/Downloaded Files/D07141
/Winter.jpg
-------
D07141101
-------
C:/Documents and Settings/peter/My Documents/userdata/Downloaded Files/D07141
101/Water lilies.jpg
C:/Documents and Settings/peter/My Documents/userdata/Downloaded Files/D07141
101/Winter.jpg 
```

***混乱：***

而`puts dir`给出`D07141`和`D07141101`，`File.realdirpath(d ,dir)`给出*扩展*的目录名称。你能澄清一下逻辑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:20:39.087

从文档中：

> 返回实际文件系统中路径名的真实（绝对）路径名。真实路径名不包含符号链接或无用的点。
> 
> 如果给出了 dir_string，它将用作解释相对路径名的基本目录，而不是当前目录。
> 
> 真实路径名的最后一个组件可能不存在。

（[http://apidock.com/ruby/v1_9_3_125/File/realdirpath/class](http://apidock.com/ruby/v1_9_3_125/File/realdirpath/class)）

它被扩展了，因为这就是该方法的作用。您不是在调用`puts`内部调用 dir `#entries`，而是在 的返回值上调用它，`File.realdirpath`如上所述，它扩展了传入的条目。

# sql - 如何使用管道 | 作为 VBA 访问中 SQL 查询的一部分

> ID：14598686
> 
> 赞同：2
> 
> 时间：2013-01-30T07:25:22.147
> 
> 标签：sql, ms-access, vba, pipe

我的访问数据库中有一个记录集，其中有一个名为“OperationDesc”的字段，该字段存储包含管道（“|”）字符的字符串。每当我使用 VBA SQL 方法搜索我的记录集以识别其中包含管道字符的特定字符串时 - 我收到错误 3077“表达式中垂直条的使用无效。

导致错误的部分是这样的：

```
Set dbs = CurrentDb
qr = "SELECT * FROM [A500Constants] ORDER BY [A500Constants].[ID];"
Set rs = dbs.OpenRecordset(qr)
qr = "[A500Constants].[ID] = " & Me.Controls("AddRoutDesc" & spot).Value
**rs.FindFirst qr**

If rs.Fields("ID") = 1 And Not rs.Fields("OperationDesc") = Me.Controls("AddRoutDesc" & CStr(spot)).Value Then
    'If true at start of rs when not suppose to be - signifies new entry time
    'if Me.Controls("AddRoutDesc" & CStr(Spot)).Value returned a description rather than ID the If would evaluate properly for the 1st item on the routing too
    'beginning process of validating new operation data 
```

当 Me.Controls("AddRoutDesc" & spot).Value 是一个包含 | 管道字符。

**这是试图做什么：** 有 n 个具有命名约定 AddRoutDesc0、AddRoutDesc1、.... 的组合框，从那里我允许用户输入她/他希望的任何文本。离开组合框后，我通过标题为“OperationDesc”的列搜索表/记录集，以查看之前是否使用过此描述。（我知道我目前正在搜索 ID - 我想搜索 OperationDesc 字段，因为它是允许用户同时输入新描述的唯一方法，因为多列组合框和列表属性的链接。）组合框填充了先前的描述以供选择，其中一些具有管道 | 特点。当我选择了这样的描述并离开运行上述内容的组合框时，就会出现此错误。如果有一些更简单的方法 - 我**如何让 SQL 将管道视为字符串的另一部分**，这将是完美的。

我目前已准备好以下代码，它可以搜索 | （或任何真正的东西）并用一些额外的分隔符和管道替换它，以使其不会在 SQL 中标记 w/e。

```
Private Function SQLStringFixer(InputString As String, ByVal FindString As String, ByVal ReplacementString As String, ByVal CompType As Integer) As String
   If Not IsNull(InputString) Then
        Dim WorkingStr As String
        Dim Pntr As Integer

        WorkingStr = InputString
        Pntr = InStr(1, WorkingStr, FindString, CompType)

        Do While Pntr > 0
            WorkingStr = Left(CStr(WorkingStr), CLng(Pntr - 1)) & ReplacementString & Mid(WorkingStr, Pntr + Len(FindString))
            Pntr = InStr(Pntr + Len(ReplacementString), WorkingStr, FindString, CompType)
        Loop
        SQLStringFixer = WorkingStr
    Else
        SQLStringFixer = ""
    End If
End Function

Private Function FixStr4JetSQL(InputString As String) As String
     Dim Temp As String
     Temp = SQLStringFixer(InputString, "'", "''", vbBinaryCompare)
     FixStr4JetSQL = SQLStringFixer(Temp, "|", "' & chr(124) & '", vbBinaryCompare)
End Function 
```

我最终只需要知道哪些字符或字符集会让 SQL 中的查询看到 | 管道作为管道，而不是一些关键符号来做 w/e。如果有人知道这是什么——这将是一个很大的帮助——这样一件微不足道的事情已经花费了我很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:45:26.970

> `rs.FindFirst qr`当`Me.Controls("AddRoutDesc" & spot).Value`是一个包含`|`管道字符的字符串时，程序会出错。

我不确定它是否适用于包含除数字或 SQL 关键字（如`NULL`.

考虑是否`Me.Controls("AddRouteDesc" & spot).Value`包含`iamastringwithoutapipe`. 该行：

```
qr = "[A500Constants].[ID] = " & Me.Controls("AddRoutDesc" & spot).Value 
```

相当于：

```
qr = "[A500Constants].[ID] = " & "iamastringwithoutapipe" 
```

相当于：

```
qr = "[A500Constants].[ID] = iamastringwithoutapipe" 
```

我认为正确的说法是：

```
qr = "[A500Constants].[ID] = '" & Me.Controls("AddRoutDesc" & spot).Value & "'" 
```

这相当于：

```
qr = "[A500Constants].[ID] = 'iamastringwithoutapipe'" 
```

总的来说，`FindFirst`像这样使用[是相当脆弱](http://support.microsoft.com/kb/113955)的。您最好编写一些[参数化查询](http://www.a1vbcode.com/vbtip-28.asp)和/或不使用 Access。

# linux - 为什么我从 ubuntu 切换到 archlinux 后不能从终端运行 ack？

> ID：14598687
> 
> 赞同：3
> 
> 时间：2013-01-30T07:25:34.013
> 
> 标签：linux, archlinux, ack

我只是从 ubuntu 切换到 archlinux，然后通过 pacman 安装了 ack-grep。但是我发现我无法`$ ack`从终端直接运行。我必须打字`$ perl ack`，这很痛苦......我想知道是否有人遇到过类似的情况以及您如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:14:11.720

这里没有理由使用别名。在这种情况下更新 $PATH 是 perl 的工作。看到 perl 包包含在基本组中，然后最多重新登录应该更正所有内容。

我还在我的系统上对此进行了测试，并且（安装时应**始终**使用`pacman -Syu ack`-Syu ）。

 **`# pacman -Syu ack`

`# ack --help`（没有错误）

**还**

`$ which ack`

`/usr/bin/vendor_perl/ack`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:30:00.707

这取决于您使用的外壳。可能您可以做的最简单的事情（假设`bash`）是为您想要的命令创建一个别名，例如：

```
alias acx='perl ack' 
```

您可能希望将它放在您的某个启动脚本中的某个位置，例如`.profile`，或`.bash_profile`您的主目录中。

如果您使用的是不支持别名的其他页面，您仍然可以求助于提供脚本来为您进行翻译，例如将以下`acx`文件放在您的路径中：

```
perl ack "$@" # or however your particular sheel transfers all arguments. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T00:40:52.757

正如上面的答案所示，您*不必*创建别名来运行 ack 。让我们解决您的问题，而不是使用解决方法别名。

为什么不能运行ack？当你运行它时会发生什么？你收到错误信息了吗？错误信息是什么？**

# asp.net-mvc-3 - 单页 MVC3 网站 - 如何映射 URL 以接受主页索引上的查询字符串参数

> ID：14598689
> 
> 赞同：0
> 
> 时间：2013-01-30T07:25:36.297
> 
> 标签：asp.net-mvc-3, url-rewriting

我正在创建一个只有一页的网站。我想映射查询字符串值，而不是在 URL 上映射控制器。

这就是我要的：

```
http://{mysite}/Hello/World 
```

我希望我的 Home 控制器选择它（在 Index 方法中）并将 Hello 读入 valueA 并将 World 读入 valueB 字段。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:33:03.253

弄清楚了。我在尝试创建路线时犯了一个错误。这适用于我需要的东西：

```
routes.MapRoute(
            "Default", // Route name
            "{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

# ios - 动画期间裁剪图像，设置为图像视图

> ID：14598694
> 
> 赞同：0
> 
> 时间：2013-01-30T07:25:51.050
> 
> 标签：ios, animation, uiimageview

使用 imageView 处理一些动画。

在我的 imageView 的起始宽度为 700 像素（图像大小为 700*300）。
现在我必须使用动画将 imageView 宽度减小到 0 px。动画时长为 1 小时。

说 30 分钟后我的 imageView 的宽度将是 350 Px。

由于我在只有 350 px 宽度的 imageView 中使用相同的图像（700*300），因此 imageView 中的图像在动画中看起来正在缩小。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:3600];
newRect.size.width = 0;
imgView.frame = newRect;
[UIView commitAnimations]; 
```

所以在动画期间，我想将图像裁剪为 imageView 的大小。
我怎样才能做到这一点。有什么方法可以在 AnimationTime 之间更改图像。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:31:41.177

你为什么不尝试相反的情况。在裁剪图像时创建动画？您将每 0.5 秒安排一次计时器，您将逐个裁剪图像，然后在 imageView 中显示裁剪后的图像。然后您将实现流畅的动画和裁剪的图像。

# drop-down-menu - 如何使用四个下拉列表（国家、州、城市、密码）

> ID：14598701
> 
> 赞同：0
> 
> 时间：2013-01-30T07:26:03.563
> 
> 标签：drop-down-menu

在一张表中使用下拉列表（国家、州、城市）。我想根据国家选择一个又一个，必须显示州，根据州，必须在asp.net（C＃）中显示城市。

例如：我有一个名为公司详细信息的页面，我需要在其中输入公司地址，如国家、州、城市。现在，我的要求是，如果我选择印度作为国家，那么印度的所有州列表都应该显示在状态下拉框中，如果我选择它，我应该选择一个州，比如说安得拉邦在城市投递箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:44:01.400

您期待多个依赖选择框。将您的代码发布到您尝试过的内容。

检查以下链接以了解它们是如何实现的。 [http://demo.rsjoomla.com/dynamic-drop-down-change-form-example](http://demo.rsjoomla.com/dynamic-drop-down-change-form-example)

谷歌“动态下拉选择”查看更多示例。

希望能帮助到你。

# ruby-on-rails - 使用 DELETE 而不是 GET 删除后 Rails 重定向

> ID：14598703
> 
> 赞同：20
> 
> 时间：2013-01-30T07:26:06.890
> 
> 标签：ruby-on-rails, redirect, routes, http-delete

我有一条要发布的路线`DELETE`：

```
user_authorization_path(@user, authorization) 
```

它击中了我的控制器，控制器删除了资源，然后发出重定向：

```
redirect_to edit_user_path(params[:user_id]) 
```

这样做的结果是重定向时出现路由错误：

```
ActionController::RoutingError (No route matches [DELETE] "/users/1/edit") 
```

我可以在日志中看到 rails 正在做正确的事情，直到重定向，它试图发出另一个`DELETE`而不是`GET`：

```
Started DELETE "/users/1/authorizations/12"...
...
Redirected to http://localhost:3000/users/1/edit
Completed 302 Found in 8ms (ActiveRecord: 0.2ms)

Started DELETE "/users/1/edit"...

ActionController::RoutingError (No route matches [DELETE] "/users/1/edit") 
```

Chrome 调试器显示初始请求：

```
Request URL:http://localhost:3000/users/1/authorizations/12
Request Method:DELETE
Status Code:302 Found 
```

及其以下重定向：

```
Request URL:http://localhost:3000/users/1/edit
Request Method:GET
Status Code:404 Not Found 
```

所以这似乎是浏览器正确地遵循了重定向，但是 rails 忽略了`GET`重定向调用，而是使用`DELETE`它导致 404（因为`DELETE`该资源不支持 - 无论如何这是错误的）。

如果我只是在重定向的 URL 上执行“GET”，它就可以正常工作。

删除后我对 Rails 的重定向缺少什么？谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-02-19T13:47:51.953

这应该以更好的方式修复它：

`redirect_to edit_user_path(params[:user_id]), status: 303`

[http://api.rubyonrails.org/classes/ActionController/Redirecting.html](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)

> 如果您使用 GET 或 POST 以外的 XHR 请求并在请求之后进行重定向，则某些浏览器将使用原始请求方法跟随重定向。这可能会导致不良行为，例如双重删除。要解决此问题，您可以返回 303 See Other 状态代码，随后将使用 GET 请求。

# ocaml - Ocaml 模块签名

> ID：14598709
> 
> 赞同：0
> 
> 时间：2013-01-30T07:26:26.060
> 
> 标签：ocaml

你能解释一下这段代码吗：

```
module type MP_ACTION_DISPATCHER = sig
    type t
    val dispatch : t -> MULTI.state -> MULTI.action -> MULTI.state Lwt.t
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:06:09.477

`t`这是实现类型和功能的模块（即模块的类型）的签名`dispatch`。

该函数`dispatch`将 type`t`的值、type 的值和 type`MULTI.state`的值作为输入，`MULTI.action`并返回 type 的值`MULTI.state Lwt.t`（Lwt 是一个单线程库）。`MULTI.state Lwt.t`是返回 type 值的线程类型`MULTI.state`。

# indexing - 弹性搜索 - 具有数组类型和嵌套对象属性的复杂查询

> ID：14598711
> 
> 赞同：2
> 
> 时间：2013-01-30T07:26:34.023
> 
> 标签：indexing, elasticsearch

鉴于以下映射，我需要获得符合以下条件的结果

1.  名字、姓氏、date_of_birth 和 Active = true 的完全匹配或
2.  名字、姓氏、Active = true 和 1 个可能的多个电子邮件中的完全匹配或
3.  名字、姓氏、Active = true 和 1 个旅行证件**号码**（可能的倍数）完全匹配

其中电子邮件和旅行证件可以指代项目集合。

```
 {
    "profile":{
        "properties":{

            "date_of_birth":{
                "type":"date",
                "store":"no"
            },
            "first_name":{
                "type":"string",
                "store":"no"
            },
            "last_name":{
                "type":"string",
                "store":"no"
            },
            "email":{
                "type":"string",
                "store":"no"
            },
            "active":{
                "type":"string",
                "store":"no"
            },
            "travel_document":{
              "properties" : {
                   "countryOfCitizenship" : {"type" : "string"},
                   "countryOfIssue" : {"type" : "string"},
                   "expirationDate" : {"type" : "date"},
                   "nationality" : {"type" : "string"},
                   "number" : {"type" : "string"},
                   "addressLines" : {"type": "string"},
                   "issuedForAreaCode" : {"type": "string"},
                   "type" : {"type": "string"}
                }
            }
        }
    }
} 
```

有没有办法可以在弹性搜索中执行这种搜索？我可以用[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T10:42:27.653

是的你可以。

首先，回答您关于嵌套查询的问题：

如果您需要在一组对象中查询 SAME OBJECT 中的多个字段（例如`travel_document.nationality`，`travel_document.expirationDate`然后您需要`travel_document`从一个类型更改为另一个`object`类型`nested`并使用嵌套查询。

在您给出的示例查询中，您没有表明您需要此功能。相反，您是在询问 ANY`travel_document`是否有价值。所以在这种情况下，您不需要使用嵌套功能。

（如果您认为将来可能需要对相关字段进行查询，那么您可能确实想要使用`nested`。您还可以设置`include_in_root`将嵌套对象作为单独`nested`对象和在主文档中进行索引）。

对于下面的查询，我假设它`travel_document`不是嵌套的。

第二：您在名称字段中使用“完全匹配”。

默认情况下，会分析字符串字段，因此“Mary Jane”将被索引为术语 ['mary','jane']。如果您在该字段上运行查询以查找“Mary”，那么它将匹配，因为该字段确实包含“mary”。但是，这不是完全匹配。

如果要进行精确匹配，则需要创建字段`not_analyzed`，在这种情况下，“Mary Jane”将被索引为单个术语“Mary Jane”，并且对“Mary”的查询将不匹配。不利的一面是，在这种情况下，您不能在名称字段上使用全文查询。

`keyword`同样，让电子邮件字段 not_analyzed （或使用带有标记器的自定义分析器 - 它不会标记字符串 - 和`lowercase`标记过滤器）可能更有意义。

在下面的查询中，我假设您的姓名字段已被分析，而您的电子邮件字段未被分析：

```
curl -XGET 'http://127.0.0.1:9200/my_index/properties/_search?pretty=1'  -d '
{
   "query" : {
      "filtered" : {
         "query" : {
            "bool" : {
               "must" : [
                  {
                     "match_phrase" : {
                        "first_name" : "mary jane"
                     }
                  },
                  {
                     "match_phrase" : {
                        "last_name" : "smith"
                     }
                  }
               ]
            }
         },
         "filter" : {
            "and" : [
               {
                  "term" : {
                     "active" : 1
                  }
               },
               {
                  "or" : [
                     {
                        "term" : {
                           "date_of_birth" : "1980-01-01"
                        }
                     },
                     {
                        "terms" : {
                           "email" : [
                              "mary@smith.com",
                              "maryjane@smith.com"
                           ]
                        }
                     },
                     {
                        "terms" : {
                           "travel_document.number" : [
                              "1234",
                              1235
                           ]
                        }
                     }
                  ]
               }
            ]
         }
      }
   }
}
' 
```

# iphone - UIDocumentInteractionController Open In menu 使工具栏项在 iPhone 中消失

> ID：14598713
> 
> 赞同：0
> 
> 时间：2013-01-30T07:26:39.227
> 
> 标签：iphone, ios6, toolbar, uidocumentinteraction

我有一个 UIToolbar 添加到视图中，并且工具栏有几个 UIBarButtonItem。其中一个按钮将调出 UIDocumentInteractionController Open In 菜单。在 iPhone 中，Open In 菜单的工作方式类似于 UIActionSheet，它将从屏幕底部显示并禁用除自身之外的所有其他按钮（屏幕的其他部分将被浅灰色阴影遮盖，你知道我的意思） .

**我的问题是，当 Open In 菜单出现时，UIToolBar 中的所有按钮都消失了，有点像 iOS 的“自动隐藏”。**关闭“打开方式”菜单后，按钮将返回。我想要的只是在打开“打开方式”菜单时保持按钮可见。

这个问题只出现在 iOS6（当然还有 iPhone）中，因为在 iOS5 中，Open In 菜单有不同的风格。我不太确定这种行为是否可以改变。然而，Adobe PDF 阅读器应用程序似乎在做和我一样的事情，但工具栏项目永远不会消失。

我用来调出 Open In 菜单的代码是这样的：

```
[documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.topBar animated:YES] 
```

self.topBar 是我之前提到的工具栏，我也尝试过 self.view、self.view.window 等，但都没有奏效。

我错过了什么吗？还是有一些解决方法？

根据需要添加更多代码：

在 XIB 文件中添加了 UIToolbar，我使用 UIButton 自定义了一个 UIBarbuttonItem，如下所示：

```
UIButton *button = [UIButton  buttonWithType:UIButtonTypeCustom];
[button setImage:image forState:UIControlStateNormal];
button.frame = CGRectMake(0, 0, image.size.width, image.size.height);
[button addTarget:self action:@selector(doSth) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *tItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

然后我将 tItem 添加到 UIToolbar 的 items 数组中：

```
NSArray *items = [NSArray arrayWithObject:tItem];
topBar.items = items; 
```

“doSth”方法只做一件事，只需初始化一个 UIDocumentInteractionController 并显示 Open In 菜单：

```
UIDocumentInteractionController documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
[documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.topBar animated:YES]; 
```

当然，工具栏中还有更多条形按钮项。因此，当显示“打开方式”菜单时，所有按钮都被“隐藏”了。我认为Apple可能会通过设计来做到这一点，但我想知道是否有一些解决方法可以改变这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:10:16.217

这里的秘诀是使用 UINavigationBar 而不是 UIToolbar。官方应该在屏幕底部使用 UIToolbars，在顶部使用 UINavigationBars。（然而，这在以前可能是不可能的，因为直到 iOS5，UINavigationBar 才可以在每一端有多个项目。）

这似乎是 Apple 的“设计”。有关此功能可能有用的示例，请在查看 Dropbox 应用中的文件时查看底部工具栏。（如果他们不隐藏项目，他们将直接降落在“取消”按钮的接缝处。）

# c# - 在 LINQ 查询中动态修改 Where 条件

> ID：14598714
> 
> 赞同：7
> 
> 时间：2013-01-30T07:26:41.810
> 
> 标签：c#, linq, entity-framework, predicate

以下实体框架查询运行没有错误。

```
Predicate<Program> filterProgram;
if (programId.HasValue)
    filterProgram = (p => p.Id == programId && !p.IsDeleted);
else
    filterProgram = (p => !p.IsDeleted);

var analytics = (from a in repository.Query<Analytic>()
                 where (a.Marker == "Open" || a.Marker == "LastTouch") &&
                 a.EntityType == "Proposal" &&
                 a.Site == "C"
                 join p in repository.Query<Program>()
                 on a.EntityId equals p.Id
                 //where filterProgram(p)
                 group a
                 by new { a.LoginSessionId, a.EntityId, p.Id, p.Name } into g
                 let f = g.OrderBy(x => x.TimestampUtc).FirstOrDefault(x => x.Marker == "Open")
                 where f != null
                 let t = g.FirstOrDefault(x => x.Marker == "LastTouch" && x.TimestampUtc > f.TimestampUtc)
                 select new
                 {
                     ProgramId = g.Key.Id,
                     Program = g.Key.Name,
                     ProposalId = g.Key.EntityId,
                     FirstOpen = f,
                     LastTouch = (t ?? f).TimestampUtc
                 }).ToList(); 
```

但是，如果我取消注释该行`where filterProgram(p)`，我会收到运行时错误：

> LINQ to Entities 不支持 LINQ 表达式节点类型“Invoke”。

我期待 LINQ 能够将我的谓词合并到查询中并将其转换为 SQL。为什么我会收到此错误，有没有办法以这种方式动态修改 where 谓词？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:49:10.000

问题是因为实体框架需要能够将您的 LINQ 查询转换为 SQL。您的 LINQ 查询被编译成称为表达式树的数据结构，然后将其传递给实体框架以转换为 SQL。

你有两个选择：

1.  `filterProgram`用更基本的 C# 表达式替换您的调用。根据复杂性，`filterProgram`这可能是不可能的。
2.  删除您对 的调用`filterProgram`，并将此查询转换为`IEnumerable<T>`，也许通过调用`.ToList()`。然后，您可以使用进一步过滤此查询的结果`filterProgram`

**示例 2**

```
 var query = /* Your Query With filterProgram commented out */
   var resultsFromSql = query.ToList();
   var fullyFiltered = resultsFromSql.Select(filterProgram); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T08:06:58.510

`filterProgram`将 的类型更改为`Expression<Func<Program, bool>>`，然后它应该可以在 LINQ Where 子句中使用。

然而，有一个警告：我设法让它在方法链语法中工作，但不是在查询语法中。

例如，这有效：

```
dataContext.Programs.Where (filterProgram) 
```

但这不会：

```
from p in dataContext.Programs
where filterprogram 
```

*（编译器抱怨它无法解析方法，该方法在和`Where`上都可用。）`IEnumerable``IQueryable`*

在您的情况下，更换该行可能是可以接受的

```
join p in repository.Query<Program>() 
```

和

```
join p in repository.Query<Program>().Where(filterProgram) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T07:38:34.940

在 Linq to Entities 中，如果不将查询转换为`IEnumerable`. 因此，既然`filterProgram`是一个方法，你就不能在查询内部调用。

如果可能的话，你可以在打电话`ToList`之前打电话`FilterProgram`，它会起作用。另一种选择可能是将逻辑插入`filterProgram`到查询中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:07:08.300

问题是 linq2entities 尝试将表达式树转换为 SQL，您的表达式树`Invoke`在委托类型（filterProgram）上调用了该方法，但是没有什么能阻止您内联该谓词

```
var id= programId.HasValue ? programId.GetValueOrDefault() : -1;
var analytics = (from a in repository.Query<Analytic>()
                 where (a.Marker == "Open" || a.Marker == "LastTouch") &&
                 a.EntityType == "Proposal" &&
                 a.Site == "C"
                 join p in repository.Query<Program>()
                 on a.EntityId equals p.Id
                 where !p.IsDeleted && (!hasValue || p.Id == id)
                 .... 
```

这假定 -1 是无效的 programId

# prolog - Prolog递归过程的解释

> ID：14598715
> 
> 赞同：4
> 
> 时间：2013-01-30T07:26:45.033
> 
> 标签：prolog, failure-slice, successor-arithmetics

如果可能的话，我希望有人解释这个过程（来自“现在学习序言”一书）。它需要两个数字并将它们相加。

```
add(0,Y,Y).  
add(s(X),Y,s(Z)) :- add(X,Y,Z). 
```

原则上我理解，但我有一些问题。假设我发出查询

```
?- add(s(s(0)), s(0), R). 
```

结果是：

```
R = s(s(s(0))). 
```

第 1 步是与规则 2 的匹配。现在 X 变为 s(0)，Y 仍然是 s(0)。但是 Z（根据本书）变为 s(_G648)，或 s()，其中包含未实例化的变量。为什么是这样？

在最后一步，匹配第一条规则，结束递归。在这里，Y 的内容以某种方式最终出现在 Z 的未实例化部分中！非常混乱，我需要一个简单的英文解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:56:38.930

第一个前提：

*   我们已经`s(X)`定义为`X`s(X) = X+1
*   _G### 表示法用于跟踪用于递归的内部变量

让我们首先看一下我觉得更直观的后继加法的另一个定义：

```
add(0,Y,Y).
add(s(A),B,C) :- add(A,s(B),C). 
```

这基本上是相同的，但递归更容易看到：

我们问

```
add(s(s(0)),s(0),R). 
```

现在在第一步序言中说这相当于

```
add(s(0),s(s(0)),R) 
```

因为我们有`add(s(A),B,C) :- add(A,s(B),C)`，如果我们看问题 A = s(0) 和 B=s(0)。但这仍然没有终止，所以我们必须重新应用 A=0 和 B=s(s(0)) 的等价性，所以它变成

```
add(0,s(s(s(0))),R) 
```

其中，鉴于`add(0,Y,Y).`这意味着

```
R = s(s(s(0))) 
```

* * *

您对 add 的定义基本相同，但有两个递归：

首先它将第一个参数运行到 0，所以它归结为 add(0,Y,Y)：

```
add(s(s(0)),s(0),R) 
```

X=s(0), Y = s(0) 和 s(Z) = R 和 Z = _G001

```
add(s(0),s(0),_G001) 
```

X = 0，Y=s(0) 和 s(s(Z)) = s(G_001) = R 和 Z = _G002

```
add(0,s(0),_G002) 
```

所以现在它知道 _G002 是定义 add(0,Y,Y) 的 s(0) 但必须追溯它的步骤所以 _G001 是 s(_G002) 并且 R 是 s(_G001) 是 s(s(_G002) ) 是 s(s(s(0)))。

所以关键是为了得到定义 add(0,Y,Y) 序言必须为第一次递归引入内部变量，然后在第二次递归中评估 R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:32:05.630

如果您想了解 Prolog 程序的含义，您可能首先关注*关系*描述的内容。然后你可能想了解它的终止属性。

如果您按照您的问题所暗示的那样深入了解具体执行的细节，您很快就会迷失在众多细节中。毕竟，Prolog 有*两种*不同的交错控制流程（AND 和 OR 控制），此外它还具有包含参数传递、分配、比较和方程求解的统一性。

简介：虽然计算机可以毫不费力地执行具体的查询以获取无数的推论，但在浏览完这些推论之后你会感到疲倦。你不能在这方面打败电脑。幸运的是，有更好的方法来理解程序。

对于含义，先看规则。上面写着：

```
add(s(X),Y,s(Z)) :- add(X,Y,Z). 
```

看到`:-`中间了吗？它是用来象征箭头的。箭头从右到左指向有点不寻常。在非正式写作中，您会从左到右书写。阅读如下：

> 前提是，`add(X,Y,Z)`是真的，那么也是`add(s(X),Y,s(Z))`真的。

所以我们假设我们已经有了一些`add(X,Y,Z)`意义“X+Y=Z”。鉴于此，我们可以得出结论，“(X+1)+Y=(Z+1)”也成立。

之后，您可能有兴趣了解它的终止属性。让我说得非常简短：要理解它，只要看一下规则就足够了：第二个论点只是进一步阐述。因此：第二个参数不影响终止。第一个和第三个参数看起来都一样。因此：它们都以相同的方式影响终止！事实上， add/3 终止，如果第一个或第三个参数不会与`s(_)`.

[在标记为 failure-slice](/questions/tagged/failure-slice "显示标记为“故障切片”的问题")的其他答案中找到有关它的更多信息，例如：

[Prolog 后继符号产生不完整的结果和无限循环](https://stackoverflow.com/questions/10139640/prolog-successor-notation-yields-incomplete-result-and-infinite-loop/10141181#10141181)

* * *

但现在要回答你的问题，因为`add(s(s(0)), s(0), R).` 我只看第一个论点：是的！这将终止。而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:57:05.357

让我们将问题分为三个部分：关于**变量实例化**的问题和我在该示例的变体中使用的**累加器模式**：

```
add(0,Y,Y).                    
add(s(X),Y,Z):-add(X,s(Y),Z). 
```

以及关于您使用**替换组合的**示例的评论。

为了查看哪个规则（即 Horn 子句）匹配（其头部统一），Prolog 应用的是[统一算法](http://en.wikipedia.org/wiki/Unification_%28computer_science%29#A_unification_algorithm)，它特别告诉我，如果我有一个变量，比如说 X 和一个函子，即 f(Y ）这两个术语*统一（关于*[发生检查](http://en.wikipedia.org/wiki/Occurs_check)的一小部分...检查但没关系atm）因此有一个替代项可以让您将一个转换为另一个。

当您的第二条规则被调用时，R 确实统一为 s(Z)。不要被 Prolog 赋予新的、未实例化的变量的内部表示吓到，它只是一个变量名（因为它以 '_' 开头），它代表一个代码（Prolog 必须有一种方法来表示不断新生成的变量和所以 _G648、_G649、_G650 等等）。当您调用 Prolog 过程时，您传递的未实例化的参数（在这种情况下为 R）用于包含过程完成执行时的结果，并且它将包含结果，因为在过程中的某个时刻调用它将被实例化（总是通过统一）。如果在某些时候你有一个 var，即 K 被实例化为 s(H)（或者 s(_G567)，如果你愿意的话），

**累加器模式**取自函数式编程，简而言之，它是一种拥有变量的方法，即累加器*（*在我的例子中是 Y 本身），它有责任在某些过程调用之间进行部分计算。该模式依赖于递归，大致具有以下形式：

*   递归的基本步骤（我的第一条规则，即）总是说，由于您已经到达计算的结尾，您可以将部分结果（现在是总计）从累加器变量复制到输出变量（这是其中的步骤，通过统一你的输出变量被实例化！）
*   递归步骤告诉如何创建部分结果以及如何将其存储在累加器变量中（在我的情况下，我“增加”Y）。请注意，在递归步骤中，输出变量永远不会改变。

最后，关于您的示例，它遵循另一种模式，即**替换的组合**，我认为通过统一考虑累加器和实例化，您可以更好地理解。

*   它的基本步骤与累加器模式相同，但 Y 在递归步骤中永远不会改变，而 Z 会改变
*   它用于通过在到达基本步骤并且每个过程调用结束后在*每个递归调用结束时*部分实例化所有计算来将 Z 中的变量与 Y 统一。因此，在第一次调用结束时，Z 中的内部自由 var 已被 Y 中的值多次统一替换。请注意下面的代码，在您到达底部调用后，过程调用堆栈开始弹出并且您的部分vars (S1, S2, S3 for semplicity) 得到统一，直到 R 被完全实例化

这是堆栈跟踪：

```
add(s(s(s(0))),s(0),S1).          ^ S1=s(S2)=s(s(s(s(0))))
add(  s(s(0)) ,s(0),S2).          | S2=s(S3)=s(s(s(0)))
add(    s(0)  ,s(0),S3).          | S3=s(S4)=s(s(0))
add(      0   ,s(0),S4).          | S4=s(0)
add(      0   ,s(0),s(0)).  ______| 
```

# nhibernate - NHibernate Criteria 在使用子查询时为 Sybase 生成无效 SQL

> ID：14598716
> 
> 赞同：1
> 
> 时间：2013-01-30T07:26:45.517
> 
> 标签：nhibernate, subquery, sap-ase, hibernate-criteria

标准：

```
var subQuery = DetachedCriteria.For<RecordInfo>();
    .Add(Restrictions.Eq("Property1", "some string"))
    .Add(Restrictions.EqProperty("Property2", "record.Id"))
    .SetProjection(Projections.Max("Id"));

var criteria = session.CreateCriteria(typeof(Record), "record")
    .CreateAlias("record.ListOfRecordInfo", "recordInfo")
    .Add(Subqueries.PropertyEq("recordInfo.Id", subQuery)); 
```

将为 Sybase ASE 15.5 方言生成类似这样的内容：

```
SELECT this_.Record_Id as Record1_2_3
...
FROM Record this_
INNER JOIN Record_Info Record_Info_
ON this_.Record_Id = Record_Info_.Property_2
WHERE Record_Info_.Record_Info_Id = 
(
    SELECT max(this_0_.Record_Info_Id) as y0_
    FROM Record_Info this_0_
    WHERE this_0_.Property_1 = @p0
    AND this_0_.Property_2 = this_.Record_Id
) 
```

问题是生成的 as y0_，Sybase 不允许我使用的 Sybase 版本的子查询别名。

如何修改我的查询以使 NHibernate 不会为子查询生成别名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:11:32.113

我们可以使用自定义 SQL 语句调整子查询的投影。所以而不是：

```
var subQuery = DetachedCriteria.For<RecordInfo>(); 
    ...
    .SetProjection(Projections.Max("Id")); // instead of this 
```

我们可以完成这个：

```
var subQuery = DetachedCriteria.For<RecordInfo>(); 
    ...
    .SetProjection(Projections.SqlProjection(" MAX(RecordInfoId) " // use this
      , new string[] {"ID"}
      , new IType[] {NHibernate.NHibernateUtil.Int32})); 
```

我们必须使用列名，因为我们跳过了 NHibernate Property-to-Column ( `Id`to `RecordInfoId`)。

这将避免

*   `SELECT max(this_0_.Record_Info_Id) as y0_`将其替换为
*   `SELECT MAX(RecordInfoId)`（我们的自定义 SQL）

# .htaccess - .htaccess rewriterule 不重定向特定的 url

> ID：14598717
> 
> 赞同：0
> 
> 时间：2013-01-30T07:26:49.743
> 
> 标签：.htaccess, rewrite

我写了重写url的规则

```
RewriteRule ^([a-zA-Z0-9-/]+)$ news.php?id=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ news.php?id=$1 
```

但我需要`http://mysite.com/blog/`不要被这些规则重写。谢谢你的建议:)。

我的 .htaccess 文件：

```
RewriteEngine On 
RewriteBase / 
RewriteCond %{REQUEST_URI} !news\.php [NC] 
RewriteCond %{REQUEST_URI} !/blog [NC] 
RewriteCond %{REQUEST_URI} ^/([^/]+) [NC] 
RewriteRule .* news.php?id=%1 [R=301,L] 
RewriteRule ^video_([^/]+) video.php?page=Video&table=$1 
RewriteRule ^en/([a-zA-Z0-9-/]+)$ en/news_en.php?no=$1 
RewriteRule ^en/([a-zA-Z0-9-/]+)/$ en/news_en.php?no=$1 
RewriteRule ^it/([a-zA-Z0-9-/]+)$ it/news.php?id=$1 
RewriteRule ^it/([a-zA-Z0-9-/]+)/$ it/news.php?id=$1 

RewriteRule ^photo_([^/]+) photogalery.php?page=Photo&part=$1 
RewriteRule ^en/photo_([^/]+) en/photogalery.php?page=Photo&part=$1 
RewriteRule ^it/photo_([^/]+) it/photogalery.php?page=Photo&part=$1 
ErrorDocument 404 /404.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:41:39.990

利用

```
重写引擎开启
重写规则 ^blog/([a-zA-Z0-9_-]+)$ news.php?id=$1

```

# javascript - dojo 教程：dojo 未定义

> ID：14598719
> 
> 赞同：2
> 
> 时间：2013-01-30T07:26:56.797
> 
> 标签：javascript, html, dojo

我想开始使用道场。

因此我使用他们的教程：[http ://dojotoolkit.org/documentation/tutorials/1.8/hello_dojo/](http://dojotoolkit.org/documentation/tutorials/1.8/hello_dojo/)

最简单的教程显示这个页面

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: Hello Dojo!</title>
</head>
<body>
    <h1 id="greeting">Hello</h1>
    <!-- load Dojo -->
    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js"
               data-dojo-config="async: true"></script>
</body>
</html> 
```

我现在打开页面（在他们的页面上尝试了本地和托管版本）。当我写

```
dojo.query("h1") 
```

在我的萤火虫控制台中，我收到消息：

> ReferenceError: dojo 未定义

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-03T13:24:53.970

这个问题缺乏正确的答案。这不起作用的原因是您启用了`async`模式。这实际上做的是 Dojo 核心将被异步加载。

**Dojo 核心**是加载文件时自动加载的 Dojo 的一部分`dojo.js`。它设置了一个名为的全局变量`dojo`，其中包含`dojo.query`部件等基本功能。

您的问题是您实际上并没有等待核心加载。因为核心未加载，`dojo`将是`undefined`，给你那个错误。

* * *

您应该只`async`在使用 AMD 加载程序 ( `require()`) 时使用模式，如果您不想使用它（传统模式），您只需`async`将`false`. 但这种模式实际上已被**弃用**，将在 Dojo 2.0 中删除。

另一种解决方案是使用 AMD 加载器（异步模块加载器），正确的语法是：

```
require([ "dojo/query" ], function(query) {
    query("h1");
}); 
```

在此示例中，您可能有机会尚未加载 DOM，因此最好的答案是等待 DOM 也加载，结果是：

```
require([ "dojo/query", "dojo/domReady!" ], function(query) {
    query("h1");
}); 
```

* * *

当您使用协议隐含 URL 时，您表示它正在工作。然而，事实并非如此。它突然起作用的唯一原因是因为您离开了该`async`属性，默认为`false`.

与[克里斯托弗](https://stackoverflow.com/a/14599019/1915448)所说的不同，传统模式仍然可用，但已被弃用。

[艾格尼丝的回答](https://stackoverflow.com/a/18240285/1915448)会起作用，因为它使用的是 AMD 加载程序。但是，将遗留代码和新语法结合起来看起来并不好。如果您选择 AMD，则应将所有内容都放入 AMD，而不仅仅是某些部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:51:38.053

由于之前没有 Dojo 的经验，我阅读了一些文档。尤其是[这部分](http://dojotoolkit.org/documentation/tutorials/1.8/modern_dojo/)，讲的是“现代道场”。

事实证明，从 1.7 版开始，您不能再仅仅加载 dojo.js 并期望调用`dojo.something`. 有了“新道场”，就再也不可能了。这就是你得到`dojo is not defined`.

有关更多信息，请阅读有关如何开始的更新文档，但这里有一个简单的 hello world：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tutorial: Hello Dojo!</title>
    <link rel="stylesheet" href="../../../resources/style/demo.css">
</head>
<body>
    <h1 id="greeting">Hello</h1>
    <!-- load dojo and provide config via data attribute -->
        <script src="//ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js" data-dojo-config="isDebug:1, async:1"></script>
    <script>
        require(["dojo/dom", "dojo/domReady!"], function(dom){
            var greeting = dom.byId("greeting");
            greeting.innerHTML += " from Dojo!";
        });
    </script>
</body>
</html> 
```

如果您喜欢使用旧方式，我想您可以参考 1.7 之前的 Dojo 版本，但使用旧版本很少是一种好的方式，因此我建议您学习新的做事方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-14T19:12:10.043

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Title</title>
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.9.1/dojo/dojo.js" data-dojo-   config="async: true"></script>
</head>

<body>

<script>
require(["dojo"], function(dojo){
dojo.ready(function(){  
//Your code here
});
});
</script>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T07:31:42.807

你确定你的dojo来源在“//ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js”，因为你的文件夹结构看起来像googleapis文件夹中的“ [http:// ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js](http://ajax.googleapis.com/ajax/libs/dojo/1.8.1/dojo/dojo.js) "

# jsf-2 - PreRenderView 在每次回发时增量调用

> ID：14598720
> 
> 赞同：6
> 
> 时间：2013-01-30T07:27:11.390
> 
> 标签：jsf-2, cdi, prerenderview

我对`f:event type="preRenderView"`.

在我在这里搜索的过程中，我发现了 BalusC 在[这个](https://stackoverflow.com/questions/10147261/jsf-fevent-execution-order)和[这篇](https://stackoverflow.com/questions/9772094/prerenderview-event-triggered-before-an-action-commandbutton)与我的问题相关的帖子中的常见答案 - 仍然给我留下了两个问题：

1.  当我将一个`f:event type="preRenderView"`放在模板文件中（用于管理常见任务，例如检查适用于我所有视图的用户状态）和`f:event type="preRenderView"`每个视图中的另一个（用于处理视图特定的初始化）时，我想知道为什么调用视图中的侦听器方法在模板中的那个之前。

2.  当我按照建议将整个放在`<f:metadata><f:event [..] /></f:metadata>`后面时，它会在从登录页面重定向到该页面后被调用两次，但是当我在它只被调用一次`ui:define`之后将它提高一级时。`ui:composition`

* * *

**更新：示例**

以下示例演示了上述行为：

这是模板文件`template_test.xhtml`，包含一个`preRenderView`事件侦听器，该侦听器在所有视图的处理程序中调用一个通用方法：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="de" lang="de" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <link rel="stylesheet" type="text/css" href="../resources/css/style.css" />
</h:head>
<h:body>
    <f:event type="preRenderView" listener="#{testHandler.initCommon()}" />
    <div id="content">
        <ui:insert name="content" />
    </div>
</h:body>
</html> 
```

这是视图文件`test.xhtml`，还包含一个事件侦听器，用于`preRenderView`在处理程序中调用视图特定方法和通过处理程序方法重定向的命令按钮：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="template_test.xhtml">
    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderView"
                listener="#{testHandler.initIndividual()}"></f:event>
        </f:metadata>
        <h:form>
            <h:commandButton value="Redirect" action="#{testHandler.redirect()}" />
        </h:form>
    </ui:define>
</ui:composition> 
```

这是`TestHandler.java`包含 3 个方法的处理程序类：

```
package test;

import java.io.Serializable;

import javax.enterprise.context.SessionScoped;
import javax.inject.Named;

@Named
@SessionScoped
public class TestHandler implements Serializable {

    private static final long serialVersionUID = -2785693292020668741L;

    public void initCommon() {
        System.out.println("Common init called.");
    }

    public void initIndividual() {
        System.out.println("Init for individual page called.");
    }

    public String redirect() {
        return "test/test.xhtml?faces-redirect=true";
    }
} 
```

现在，这是我在请求测试页面时在我的 tomcat 日志中看到的内容：

```
Init for individual page called.
Common init called.
Init for individual page called. 
```

这表明没有。1，视图中的事件处理程序在模板中的事件处理程序之前被调用，并且没有。2，从视图中调用事件处理程序两次。

它还显示了第三点（这就是为什么我包含一个带有重定向到同一页面的按钮的原因）显示如果页面被重定向请求会发生什么 - 单个页面被调用更多次：

```
Init for individual page called.
Common init called.
Init for individual page called.
Init for individual page called. 
```

两者都没有。2 和 3 可以通过将整个元数据部分放在上面`ui:define`或通过向视图的元数据部分添加一个虚拟参数来防止，该参数不包含在 URL 中：

```
<f:metadata>
    <f:viewParam name="dummyToDenySecondRedirect" />
    <f:event type="preRenderView"
        listener="#{testHandler.initIndividual()}"></f:event>
</f:metadata> 
```

有人能告诉我这些案件的原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:22:18.887

我可以重现它。这是由 CDI 的存在`/WEB-INF/beans.xml`和隐含的 CDI 引起的。当您在保留`beans.xml`文件的同时切换回标准 JSF 注释时，甚至会发生这种情况。这已经报告为[issue 1771](http://java.net/jira/browse/JAVASERVERFACES-1771)和[issue 2162](http://java.net/jira/browse/JAVASERVERFACES-2162)。然而，由于没有具体的 WAR 文件重现该问题并且投票率低，Mojarra 开发人员没有费心仔细研究它。

我已将其再次报告为[issue 2719](http://java.net/jira/browse/JAVASERVERFACES-2719)。这个问题可以用一个更小的例子来重现：

```
<!DOCTYPE html>
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
>
    <f:metadata>
        <f:event type="preRenderView" listener="#{bean.preRenderView}" />
    </f:metadata>
    <h:head>
        <title>preRenderView fail</title>
    </h:head>
    <h:body>
        <p>On initial request, you'll see the listener being invoked twice instead of only once.</p>
        <p>On every postback by the below button, you'll see the listener being invoked once more.</p>
        <h:form>
            <h:commandButton value="submit" />
        </h:form>
        <p>Note however that this increments every time you issue the postback.</p>
        <p>If you remove <code>/WEB-INF/beans.xml</code> and redeploy, then the issue will disappear.</p>
    </h:body>
</html> 
```

和

```
package com.example;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public class Bean {

    public void preRenderView() {
        System.out.println("preRenderView called");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-06T12:37:54.110

缺少的资源也可能导致监听器被调用两次。我在这里使用 MyFaces 2.2：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">

<f:metadata>
    <f:event type="preRenderView" listener="#{testController.update()}" />
</f:metadata>

<h:head>
    <script type="text/javascript" src="#{resource['/js/missing.js']}" />
    <title>Test</title>
</h:head>

<h:body>
    <p>TestController.update() is called twice.</p>
</h:body>

</html> 
```

显然，您首先不应该包含任何缺失或过时的资源。但是，假设您（错误地）并且您的听众被连续两次调用，您没有机会找到该问题的实际原因。JSF 不应该这样做。

# c++ - clEnqueueCopyBufferRect 是如何工作的？

> ID：14598721
> 
> 赞同：1
> 
> 时间：2013-01-30T07:27:13.740
> 
> 标签：c++, opencl

我需要了解 clEnqueueCopyBufferRect 是如何工作的。例如，我需要从具有原点 (1,1) 的 4x4 区域（让它成为 int 数组）复制 3x3 区域。我有两个建议：

1.  它只是复制大小与矩形 3x3 区域大小匹配的线性区域，因此结果是：

    ```
    1 1 1 1     0 0 0 0
    1 1 1 1  -> 0 1 1 1
    1 1 1 1     1 1 1 1
    1 1 1 1     1 1 0 0 
    ```

2.  或者它复制矩形区域，结果是：

    ```
    1 1 1 1     0 0 0 0
    1 1 1 1  -> 0 1 1 1
    1 1 1 1     0 1 1 1
    1 1 1 1     0 1 1 1 
    ```

为了检查这一点，我使用了下一个示例代码：

```
int main(int argc, char * argv[])
{
std::vector<Platform> platforms;
Platform::get(&platforms);

cl::Platform platform = platforms[0];

cl_context_properties cps[3] = {CL_CONTEXT_PLATFORM, (cl_context_properties)platform(), 0}; 

cl::Context context(CL_DEVICE_TYPE_GPU,cps);

std::string kr_str = "__kernel void StepKernel(__global int* in) { in[get_global_id(1)*4 + get_global_id(0)] = 1;}";

Program program=cl::Program(
    context,
    cl::Program::Sources(
      1,
      std::make_pair(kr_str.c_str(),kr_str.length()+1)
    )
  );

std::vector<cl::Device> devices = context.getInfo<CL_CONTEXT_DEVICES>();

std::vector<cl::Device> device(1,devices[0]);

program.build(device);

cl::Kernel kernel = cl::Kernel(program, "StepKernel");

cl::CommandQueue queue(
      context,
      device[0],
      CL_NONE
    );  

cl::Buffer in_buffer_on_device(
        context,
        CL_MEM_READ_WRITE,
        16*sizeof(int)
    );

cl::Buffer out_buffer_on_host(
        context,
        CL_MEM_READ_WRITE|CL_MEM_ALLOC_HOST_PTR,
        16*sizeof(int)
    );

void *ptr_on_host = 
queue.enqueueMapBuffer(
    out_buffer_on_host,
    CL_BLOCKING,
    CL_MAP_WRITE|CL_MAP_READ,
    0, 16*sizeof(int),
    NULL, NULL
);

for(int k = 0; k < 4; k++)
  for(int i = 0; i < 4; i++)
    static_cast<int*>(ptr_on_host)[k*4 + i] = 0;        

cl::size_t<3> origin, region;
origin[0]=0; origin[1]=0; origin[2]=0;
region[0]=4*sizeof(int); region[1]=4; region[2]=1;

Event evt;
queue.enqueueCopyBufferRect(
  out_buffer_on_host,
  in_buffer_on_device,          
  origin, origin, region,
  sizeof(int)*4,sizeof(int)*4*4,sizeof(int)*4,sizeof(int)*4*4,
  NULL,
  &evt
);
evt.wait();

kernel.setArg(0,in_buffer_on_device);

queue.enqueueNDRangeKernel(
            kernel, 
            cl::NDRange( 0, 0), 
            cl::NDRange( 4, 4), 
            cl::NullRange, 
            NULL,
            &evt
);
evt.wait();

origin[0]=1*sizeof(int); origin[1]=1; origin[2]=0;
region[0]=3*sizeof(int); region[1]=3; region[2]=1;

queue.enqueueCopyBufferRect(                
  in_buffer_on_device,
  out_buffer_on_host,               
  origin, origin, region,
  sizeof(int)*4,sizeof(int)*4*4,sizeof(int)*4,sizeof(int)*4*4,
  NULL,
  &evt
);  
evt.wait();

for(int k = 0; k < 4; k++)
{
  for(int i = 0; i < 4; i++)
  {
    std::cout << static_cast<int*>(ptr_on_host)[k*4 + i]<< "\t";
  }
  std::cout << std::endl;
}

return 0;
} 
```

输出是：

```
0   0   0   0   
0   1   1   1   
1   1   1   1   
1   1   0   0 
```

所以，如果我没有犯任何错误，CL 会复制线性区域。所以这样的行为对我来说毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:44:25.093

它复制矩形区域。否则它作为 API 将毫无用处。

# netbeans - 当 FXML 与控制器位于不同的包中时，JavaFX Scenebuilder 看不到 id

> ID：14598724
> 
> 赞同：3
> 
> 时间：2013-01-30T07:27:39.957
> 
> 标签：netbeans, javafx-2, javafx, java-7, scenebuilder

我用 java se7 安装了 netbeans，javafx 示例运行良好。`@FXML`在scenebuilder中，我可以为在我的控制器中定义和注释的每个控件选择一个ID 。但是，我喜欢我的项目组织。当我创建一个新包并将我的 FXML 文件移到那里时，（myapp/views）并且控制器停留在它所在的根目录 -> myapp 中，然后在 scenebuilder 中似乎找不到 id。

我知道 FXML 中的“控制器类”，但由于我没有移动我的控制器，所以不应该改变。

更具体地说，当我的控制器和 fxml 都在包“holidayapp”中时，它可以工作。将 fxml 移动到子包 holidayapp/views'，不起作用。控制器类仍然存在

```
<AnchorPane id="AnchorPane" prefHeight="200" prefWidth="320" xmlns:fx="http://javafx.com/fxml" fx:controller="holidayapp.HolidayViewController"> 
```

因为 HolidayViewController 保留在根包中。除了将 fxml 文件从主包移动到子包之外，我什么也不做。

我想在我的场景构建器中查看来自 holidayViewController 的 id。使用子包中的 fxml 进行编译和运行从来都不是问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:19:03.437

我认为您可能会遇到以下问题：

[https://bugs.openjdk.java.net/browse/JDK-8091793](https://bugs.openjdk.java.net/browse/JDK-8091793)

如果您认为可以，请考虑对此问题进行投票和/或评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T06:59:23.853

我处理这个问题的方法是将我的 Main 类放入视图（扩展 Application 的那个）。这让我可以访问我的 Controller 类、它们的变量和方法。这适用于 SceneBuilder 1.1。

我只能在使用 Eclipse 而不是 NetBeans 时发言，所以这样做可能仍然一无所获。

# wordpress - 是否可以在 WordPress API 中请求匹配多个类别的文章？

> ID：14598725
> 
> 赞同：1
> 
> 时间：2013-01-30T07:27:47.257
> 
> 标签：wordpress, api

这些 api 完美运行。 [http://domain.com/wp/api/get_tag_posts/?tag_slug=banana](http://domain.com/wp/api/get_tag_posts/?tag_slug=banana) [http://domain.com/wp/api/get_category_posts/?category_slug=featured](http://domain.com/wp/api/get_category_posts/?category_slug=featured)

有没有办法将多个标签或类别加入一个请求？例如

[http://domain.com/wp/api/get_category_posts/?category_slug=featured,news](http://domain.com/wp/api/get_category_posts/?category_slug=featured,news) 或 [http://domain.com/wp/api/get_category_posts/?category_slug=featured|news](http://domain.com/wp/api/get_category_posts/?category_slug=featured|news)

我希望在 SQL 中做一个“其中 category_name in ('featured','news')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T22:51:20.117

我需要做同样的事情并最终使用了这个插件

查询多个分类。此插件可让您使用多个自定义分类法进行分面搜索。（作者的描述）。

[http://wordpress.org/extend/plugins/query-multiple-taxonomies/](http://wordpress.org/extend/plugins/query-multiple-taxonomies/)

它也有一个方便的侧边栏小部件。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T05:30:24.553

你在这之后

```
<?php $args = array(
'posts_per_page' => 10,
'category__not_in' => array(5,151)
    );
    query_posts($args);?> 
```

这是您在 PHP 中需要执行的操作，以从多个类别中获取多个帖子。现在，如果您还在寻找 json 或 xml 或它吐出的任何格式。在functions.php中添加一个新函数并注册它

```
add_action( 'wp_ajax_nopriv_getmyjson', 'myfunctionname' );
add_action( 'wp_ajax_getmyjson', 'myfunctionname' );
function myfunctionname()
{
   Global $wpdb;
  ...
 } 
```

在您的主题或插件中调用它并使用 action=getmyjson 和 url 转到带有 nonce 集的 admin_ajax。之后`Global $wpdb`您可以使用上述功能将所有帖子带出，然后将它们作为 json 对象输出。像这样的东西

```
$response = json_encode( array( 
    'success' => true,
    'message' => $ajaxmsg
    'posts' => $mypostarray
    ) 
);

// response output
header( "Content-Type: application/json" );
echo $response;

die();   //This would then make sure it is not getting anything else out of wordpress and sends only json out. 
```

一旦这一切完成。您将有多个以 json 格式发布的帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:24:08.447

您是否尝试过将 category_name 设为数组？例如

```
<?php $args = array(
    'posts_per_page' => 10,
    'category_name' => array('featured', 'news')
);
query_posts($args);?> 
```

另外，使用标签，我发现了这个例子：

```
<?php query_posts('cat=32&tag=hs1+hs1&showposts=10'); ?> 
```

或者

```
<?php query_posts(array(
    'posts_per_page' => 10,
    'category_name' => array('featured', 'news'),
    'tag_slug__and'=>array('banana')
 )); ?> 
```

# c - 反转行的顺序而不用反转C中的单词

> ID：14598730
> 
> 赞同：-3
> 
> 时间：2013-01-30T07:28:03.947
> 
> 标签：c, string, reverse

在 C 中，我们如何接受具有多行的输入，然后输出具有相反顺序的行（不改变每行中单词的顺序）。
例如：

```
输入：第 1 行
        2号线
        3号线
        4号线

输出：第 4 行
        3号线
        2号线
        1号线

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:36:26.950

解决方案很简单。假设这`lines`是一个长度为的行数组（没有尾随换行符）`size`，应该执行以下循环：

```
for(i = size - 1; i >= 0; --i)
    puts(lines[i]) 
```

**即，您只需以相反的顺序**输出行：从最后一个开始，到第一个结束。

关于“如何输入和存储行”的问题：有几种选择。可以使用`getline`（POSIX 函数）或`fgets`函数（如有必要，您可以手动删除尾随换行符）来执行输入；不要使用`gets`- 这是**邪恶**的。您必须使用循环来输入行。`realloc`根据您的任务，行可以存储在静态或动态扩展（通过）数组中。或者你可以执行一个不那么聪明的技巧：编写一个递归函数，利用堆栈存储行（伪代码）：

```
function reverseLines():
{
    string line;
    input(line);
    if not end-of-input():
    {
        reverseLines();
        output(line);
    }
} 
```

但是如果你的输入足够大，就会遇到**栈溢出**错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:57:43.023

如果您可以设置一些最大行长，则可以使用标准 C`fgets()`函数读取行。如果您使用的是最新的 POSIX 兼容操作系统，或者拥有 GNU glibc，您可以使用 getline()，它会为行分配内存，因此您可以读取任何行长度。请在此处[查看此答案。](https://stackoverflow.com/a/2532533/1717300)

对于每一行，您将获得`char*`指针。

如果您可以设置支持的最大行数，您可以使用`char *lines[MY_MAX_LINE_COUNT]`来存储指针，然后简单地从数组中以相反的顺序打印。更好的是实现一个非常简单的链表，它允许预先添加（这可能是最简单的链表代码，基本上是一个只有*push*的堆栈，不需要*pop* ...），然后在所有的时候打印行已阅读。

* * *

对于简单的情况，为了避免为每一行分配一个链表结构，最好将`char*`行指针存储到一个数组中，该数组使用[`realloc()`](http://linux.die.net/man/3/realloc): 增长。

首先是需要的变量：

```
int arraysize = 16; /* any size will do, 16 is nice round number */
char *lines[16] = malloc(sizeof(char*) * arraysize);
int linecount = 0; 
```

然后循环获取输入：

```
while(/* test for eof or whatever */) {
    char *line = /* code to get the line */;

    if (linecount == arraysize) {
      arraysize *= 2;
      lines = realloc(lines, sizeof(char*) * arraysize);
    }
    lines[linecount] = line; /* old lines are at indexes 0..(linecount-1) */
    ++linecount; 
```

并为此打印循环：

```
for(int index = linecount-1 ; index >= 0 ; --index) {
  puts(lines[index]); /* if line has newline stripped, else printf("%s", lines[index]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:17:14.937

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void reverseLines(void);

int main (void) {
    reverseLines();

    return 0;
}

void reverseLines(void) {
    char *line;
    size_t len = 0;

    getline(&line, &len, stdin);

    if (strcmp(line, "") != 0) // NOT end of input
    {
        reverseLines();
        printf ("%s", line);
    }

    free (line);
}

/* References:
* 
* http://www.gnu.org/software/libc/manual/html_node/Line-Input.html
* http://souptonuts.sourceforge.net/code/getline.c.html
*/ 
```

感谢@nameless 的伪代码和@hyde 的getline 函数（我不知道）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-30T07:49:44.487

您可以使用循环来获取这些行...即

```
for(...) {

  scanf(...); /* or use getline() here*/

} 
```

并且还使用循环打印它，例如上面的答案。

而且很简单，如果你是编程新手，请多多练习。:)

# c# - 适用于 Android 的 Mono：StartActivityForResult 上的 java.lang.NullPointerException

> ID：14598735
> 
> 赞同：1
> 
> 时间：2013-01-30T07:28:28.513
> 
> 标签：c#, android, nullpointerexception, xamarin.android

我有关于 StartActivityForResult 的问题。我有一个来自网络服务的表单，偶尔会导致需要打开 cam 拍照的字段，将其显示在视图上并将其发送回。

问题是我的 StartActivityForResult 总是出现非描述性 Java.Lang.NullPointerException 错误。

这是代码

**PrevzemVozila.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using System.Data;
using Android.Content.PM;
using Android.Provider;

namespace UUIDev
{
[Activity(Label = "Prevzem vozila v servis", NoHistory = true, Icon="@drawable/Icon",     ConfigurationChanges = Android.Content.PM.ConfigChanges.Orientation)]
public class PrevzemVozila : Activity
{
    si.rcg.hat._hat_Tablet chk = new si.rcg.hat._hat_Tablet();
    Java.IO.File _file;
    PackageManager _pm;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        SetContentView(Resource.Layout.Prevzem);

        _pm = this.PackageManager;

        //Window.SetSoftInputMode(SoftInput.StateAlwaysVisible);

        var Ticket = Intent.GetStringExtra("sentTicket") ?? "";
        var FormIdStr = Intent.GetStringExtra("sentFormId") ?? "";
        var EventNoStr = Intent.GetStringExtra("sentEventNo") ?? "";

        int FormId = int.Parse(FormIdStr);
        int EventNo = int.Parse(EventNoStr);

        DataSet GetSingleEvent = new DataSet();
        GetSingleEvent = chk.GetSingleEvent(Ticket, FormId, EventNo);

        IList<Prevzem> listPrevzem = new JavaList<Prevzem>();

        var lstPrevzem = FindViewById<ListView>(Resource.Id.lstPrevzem);
        var prevzemAdapter = new PrevzemAdapter(this, Resource.Layout.ListPrevzem, new JavaList<Prevzem>());
        lstPrevzem.Adapter = prevzemAdapter;

        foreach (DataRow row in GetSingleEvent.Tables[0].Rows)
        {
            var item = new Prevzem();
            item.IdRec = row["IdRec"].ToString();
            if (item.IdRec.Equals(""))
                item.IdRec = null;

            item.FieldId = row["FieldId"].ToString();
            if (item.FieldId.Equals(""))
                item.FieldId = null;

            item.FieldDesc = row["FieldDesc"].ToString();
            if (item.FieldDesc.Equals(""))
                item.FieldDesc = null;

            item.FieldType = row["FieldType"].ToString();
            if (item.FieldType.Equals(""))
                item.FieldType = null;

            item.isReadOnly = row["isReadOnly"].ToString();
            if (item.isReadOnly.Equals(""))
                item.isReadOnly = null;

            item.FieldValue = row["FieldValue"].ToString();
            if (item.FieldValue.Equals(""))
                item.FieldValue = null;

            item.FieldTextValue = row["FieldTextValue"].ToString();
            if (item.FieldTextValue.Equals(""))
                item.FieldTextValue = null;

            item.OptBox_Options = row["OptBox_Options"].ToString();
            if (item.OptBox_Options.Equals(""))
                item.OptBox_Options = null;

            listPrevzem.Add(item);

            RunOnUiThread(() => {prevzemAdapter.Add(item);});
        }
    }

    public override void OnConfigurationChanged(Android.Content.Res.Configuration newConfig)
    {
        base.OnConfigurationChanged(newConfig);
    }

    public void OnGetCam(Intent _intent, IList<ResolveInfo> _avalableActivities)
    {
        if (_avalableActivities != null && _avalableActivities.Count > 0)
        {
            var dir = new Java.IO.File(
                Android.OS.Environment.GetExternalStoragePublicDirectory(
                Android.OS.Environment.DirectoryPictures), "RCG_Foto");

            if (!dir.Exists())
            {
                dir.Mkdirs();
            }

            _file = new Java.IO.File(dir, String.Format("avto_{0}.jpg", Guid.NewGuid()));

            _intent.PutExtra(MediaStore.ExtraOutput, Android.Net.Uri.FromFile(_file));

            this.StartActivityForResult(_intent, 5);
        }
    }

        protected override void OnActivityResult(int requestCode, Result resultCode, Android.Content.Intent data)
        {
            base.OnActivityResult(requestCode, resultCode, data);

        var imageView = FindViewById<ImageView>(Resource.Id.imageSending);

            // make it available in the gallery
            var mediaScanIntent = new Intent(Intent.ActionMediaScannerScanFile);
            var contentUri = Android.Net.Uri.FromFile(_file);
            mediaScanIntent.SetData(contentUri);
            SendBroadcast(mediaScanIntent);

            // display in ImageView
            var fotka = MediaStore.Images.Media.GetBitmap(ContentResolver, contentUri);
            imageView.SetImageBitmap(fotka);
            fotka.Dispose();
        }
    }
} 
```

**PrevzemAdapter.cs**

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.IO;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using System.Data;
using Android.Text;
using Android.Content.PM;
using Android.Provider;

namespace UUIDev
{
    [Activity(Label = "Prevzem Adapter")]
    public class PrevzemAdapter : ArrayAdapter<Prevzem>
    {
        int resource;

        PrevzemVozila pa;

        Intent availIntent;

        IList<ResolveInfo> availableActivities;

        Context p_context = null;

        //Initialize adapter
        public PrevzemAdapter(Context context, int resource, IList<Prevzem> items)
            : base(context, resource, items)
        {
            this.resource = resource;
            this.p_context = context;
            this.AvailIntent = new Intent(MediaStore.ActionImageCapture);
            this.AvailActivities = p_context.PackageManager.QueryIntentActivities(AvailIntent, PackageInfoFlags.MatchDefaultOnly);
        }

        public override View GetView(int position, View convertView, ViewGroup parent)
        {
            LinearLayout view;

            //Get our items
            var item = GetItem(position);

            //Inflate the view
            if (convertView == null)
            {
                view = new LinearLayout(Context);
                var inflater = Context.LayoutInflaterService;
                LayoutInflater vi;
                vi = (LayoutInflater)Context.GetSystemService(inflater);
                vi.Inflate(resource, view, true);
            }

            else
            {
                view = (LinearLayout)convertView;
            }

            var FieldDesc = view.FindViewById<TextView>(Resource.Id.txtFieldDesc);
            FieldDesc.Text = item.FieldDesc != null ? item.FieldDesc : "";

            var IdRec = view.FindViewById<TextView>(Resource.Id.txtIdRec);
            IdRec.Text = item.IdRec != null ? item.IdRec : "";

            var FieldId = view.FindViewById<TextView>(Resource.Id.txtFieldId);
            FieldId.Text = item.FieldId != null ? item.FieldId : "";

            var FieldTextValue = view.FindViewById<EditText>(Resource.Id.editVal);
            FieldTextValue.Text = item.FieldTextValue != null ? item.FieldTextValue : "";

            var ButtonValue = view.FindViewById<Button>(Resource.Id.button1);
            ButtonValue.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;

            var CamImage = view.FindViewById<ImageView>(Resource.Id.imageSending);
            CamImage.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;

            var SpinnerValue = view.FindViewById<Spinner>(Resource.Id.spinnerVal);

            bool isReadOnly = bool.Parse(item.isReadOnly);

            if (isReadOnly == true)
            {
                FieldTextValue.Enabled = false;
                SpinnerValue.Enabled = false;

            }
            else
            {
                FieldTextValue.Enabled = true;
                SpinnerValue.Enabled = true;
            }

            // if field is TextBOX_INT
            if (item.FieldType == "TextBOX_INT")
            {
                FieldTextValue.InputType = InputTypes.ClassNumber;   
            }

            // if field is TextBOX or TextBOX_INT or TextAREA
            if (item.FieldType == "TextBOX" || item.FieldType == "TextBOX_INT" || item.FieldType == "TextAREA")
            {
                FieldTextValue.SetSingleLine(true);

                FieldTextValue.Visibility = view.Visibility == ViewStates.Visible ? ViewStates.Visible : ViewStates.Visible;

                SpinnerValue.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;
            }

            // if field is TextAREA
            if (item.FieldType == "TextAREA")
            {
                FieldTextValue.InputType = InputTypes.ClassText;

                FieldTextValue.SetSingleLine(false);
            }

            // if field is ComboBOX or OptionBox
            if (item.FieldType == "ComboBOX" || item.FieldType == "OptionBOX")
            {
                FieldTextValue.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;

                SpinnerValue.Visibility = view.Visibility == ViewStates.Visible ? ViewStates.Visible : ViewStates.Visible;
                List<string> entries = new List<string>();

                String rawXML = item.OptBox_Options;

                StringReader stream = null;
                XmlTextReader reader = null;

                DataSet xmlDS = new DataSet();
                stream = new StringReader(rawXML);
                // Load the XmlTextReader from the stream
                reader = new XmlTextReader(stream);
                xmlDS.ReadXml(reader);

                DataSet myOPTvalues = new DataSet();
                myOPTvalues = xmlDS;

                foreach (DataRow row in myOPTvalues.Tables[0].Rows)
                {
                    var optItem = new PrevzemSpin();
                    optItem.FieldValue = row["FieldValue"].ToString();
                    if (optItem.FieldValue.Equals(""))
                        optItem.FieldValue = null;

                    optItem.FieldTextValue = row["FieldTextValue"].ToString();
                    if (optItem.FieldTextValue.Equals(""))
                        optItem.FieldTextValue = null;

                    entries.Add(optItem.FieldTextValue);
                    SpinnerValue.Tag = optItem.FieldValue;
                }

                var adapter = new ArrayAdapter<string>(p_context, Android.Resource.Layout.SelectDialogItem, entries);
                adapter.SetDropDownViewResource(Android.Resource.Layout.SelectDialogSingleChoice);
                SpinnerValue.Adapter = adapter;

                if (SpinnerValue.Adapter.Count.Equals(2))
                {
                    SpinnerValue.SetSelection(1);
                }                
            }

            // if field is Picture_REQ
            //if (item.FieldType == "Picture_REQ")
            // {
                ButtonValue.Visibility = view.Visibility == ViewStates.Visible ? ViewStates.Visible : ViewStates.Visible;
                CamImage.Visibility = view.Visibility == ViewStates.Visible ? ViewStates.Visible : ViewStates.Visible;
                FieldTextValue.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;
                SpinnerValue.Visibility = view.Visibility == ViewStates.Gone ? ViewStates.Gone : ViewStates.Gone;

                ButtonValue.Click += delegate
                {
                    pa = new PrevzemVozila();
                    if (pa != null)
                    {
                        pa.OnGetCam(this.AvailIntent, this.AvailActivities);
                    }
                };
            //}

            return view;
        }

        public IList<ResolveInfo> AvailActivities
        {
            set { this.availableActivities = value; }
            get { return this.availableActivities; }
        }

        public Intent AvailIntent
        {
            set { this.availIntent = value; }
            get { return this.availIntent; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T10:45:05.967

不久前，Xamarin 提供的补丁解决了这个问题。

# html - 如何在缩放后清除 HTML5 画布

> ID：14598742
> 
> 赞同：2
> 
> 时间：2013-01-30T07:29:17.640
> 
> 标签：html, html5-canvas

我在使用画布时遇到问题。请参见下面的代码。

**HTML**

```
<canvas id="canvas" width="400" height="400"></canvas>    
<input id="but" type="button" value="clear canvas" onclick="ClearCanvas()"> 
```

**JS**

```
can = document.getElementById('canvas');
ctx = can.getContext("2d");

ctx.fillStyle = 'rgb(205,190,245)';
ctx.fillRect(0, 0, can.width, can.height);

ctx.scale(0.4, 0.4);
ctx.fillStyle = 'rgb(105,180,235)';
ctx.fillRect(0, 0, can.width, can.height);

$("#but").click(function()
{
    var ctx = document.getElementById('canvas').getContext("2d");

    ctx.scale(1, 1);
    ctx.clearRect(0, 0, can.width, can.height);
}); 
```

当我点击“清除画布”按钮时，它并没有清除整个画布。它只是清除缩放的部分。缩放后如何清除整个画布？

你可以在这个[FIDDLE中现场直播](http://jsfiddle.net/sathyamoorthi/uGnhx/)

**注意：在 FF 中没有问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:34:57.403

您的线路：

```
ctx.scale(1, 1); 
```

应该读：

```
ctx.scale(2.5, 2.5); 
```

最初，您将比例从 1 减少到 0.4，比原始比例小 2.5 倍。(1 / 0.4 = 2.5)

将比例设置为 1 将按 100% 缩放，即没有变化。

其他选项包括：

*   替换 ctx.scale(1, 1); 与 ctx.setTransform(1, 0, 0, 1, 0, 0);
*   使用 Save() 和 Restore()[链接](http://html5.litten.com/understanding-save-and-restore-for-the-canvas-context/)

# javascript - 实现自动完成时出现“this.source 不是函数”错误

> ID：14598743
> 
> 赞同：3
> 
> 时间：2013-01-30T07:29:23.010
> 
> 标签：javascript, jquery, json, jquery-events

```
$(document).ready(function(){
   var var_name=null;
   $('#id1').click(function(){

      $.ajax({
         type:"GET",
         url:" ggs.erm.servlet.setup5.Page",
         success:function(response){
            var_name=response;
            console.log(response);
         }
      })
   });
   $("#id").autocomplete({source:var_name});
}); 
```

这是我搞砸的代码，它说 TypeError:this.source is not a function。我哪里错了，纠正我？？？![响应中的错误和 Json 屏幕截图](../Images/881f47678dac05fc3074b15ef9472373.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T07:36:29.240

jQuery Ajax 方法是非阻塞的，所以看起来您正试图在前一个方法解析之前设置一个自动完成源。您可能希望将`autocomplete`分配移动到呼叫的成功方法中`.ajax()`。

所以，而不是你所拥有的，使用：

```
$.ajax({
    type:       "GET",
    url:        "ggs.erm.servlet.setup5.Page",
    success:    function(response) {
        $("#id").autocomplete({ source: response });
    }
}); 
```

# haskell - haskell - 我怎样才能从值到类型？

> ID：14598750
> 
> 赞同：9
> 
> 时间：2013-01-30T07:29:36.887
> 
> 标签：haskell, dependent-type, type-level-computation

想象一下，我有以下数据类型和类型类（带有适当的语言扩展）：

```
data Zero=Zero
data Succ n = Succ n
class Countable t where
      count :: t -> Int
instance Countable Zero where
      count Zero = 0

instance (Countable n) => Countable (Succ n) where
      count (Succ n) = 1 + count n 
```

是否可以编写一个函数，从整数中为我提供正确类型类实例的实例？基本上，一个函数`f`使得`count (f n) = n`

我的尝试是以下变体，但这在编译时给了我一些类型错误：

```
f::(Countable k)=> Int -> k
f 0 = Zero
f n = Succ $ f (n-1) 
```

在寻找解决方案时，我经常讨论依赖类型，但我还没有能够将这些讨论映射到我的用例。

* * *

背景：因为我意识到这会得到很多“你为什么要这样做”类型的问题......

我目前正在使用该`Data.HList`包来处理异构列表。在这个库中，我想构建一个函数`shuffle`，当给定一个整数时`n`，它会将`n`列表的第 th 个元素移到末尾。

例如，如果我有`l=1:"Hello":32:500`，我想`shuffle 1 l`给`1:32:500:"Hello"`。

我已经能够编写专门的函数`shuffle0`来回答用例`shuffle 0`：

```
shuffle0 ::(HAppend rest (HCons fst HNil) l')=>HCons fst rest -> l'
shuffle0 (HCons fst rest) = hAppend rest (HCons fst HNil) 
```

我还编写了这个函数`next`来“包装”一个函数，例如`next (shuffle n) = shuffle (n+1)`：

```
next :: (forall l l'. l -> l') -> (forall e l l'.(HCons e l) -> (HCons e l'))
next f = \(HCons e l)-> HCons e  $ (f l) 
```

我觉得我的类型签名可能无济于事，即没有长度编码（这是可能出现问题的地方）：

```
shuffle 0=shuffle0
shuffle n= next (shuffle (n-1)) 
```

GHC 抱怨无法推断出洗牌的类型。

这并不让我感到惊讶，因为该类型可能不是很有根据。

直觉上我觉得应该提到列表的长度。我可以通过 type 函数获得特定 HList 类型的长度`HLength`，并通过一些精心选择的约束重写 shuffle 以使其合理（至少我认为）。

问题是我仍然需要获得我选择的长度的类型级别版本，以便我可以在调用中使用它。我什至不确定这是否可行，但我觉得我会有更好的机会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T10:08:39.603

要回答您最初的问题，如果没有完整的依赖类型系统（Haskell 没有），您将无法编写这样的`f`from到整数的类型级归纳表示。`Int`但是，您在“上下文”中描述的问题在 Haskell 中不需要这样的功能。

我相信以下内容大致是您正在寻找的内容：

```
 {-# LANGUAGE MultiParamTypeClasses, FlexibleInstances, FlexibleContexts, FunctionalDependencies, UndecidableInstances #-}

 import Data.HList

 data Z = Z
 data S n = S n

 class Nat t
 instance Nat Z
 instance Nat n => Nat (S n)

 class (Nat n, HList l, HList l') => Shuffle n l l' | n l -> l' where
     shuffle :: n -> l -> l'

 instance Shuffle Z HNil HNil where
     shuffle Z HNil = HNil

 instance (HAppend xs (HCons x HNil) ys, HList xs, HList ys) => Shuffle Z (HCons x xs) ys where
     shuffle Z (HCons x xs) = hAppend xs (HCons x HNil)

 instance (Shuffle n xs ys) => Shuffle (S n) (HCons x xs) (HCons x ys) where
     shuffle (S n) (HCons x xs) = HCons x (shuffle n xs) 
```

例如

```
 *Main> shuffle (S Z) (HCons 1 (HCons "Hello" (HCons 32 (HCons 500 HNil))))
 HCons 1 (HCons 32 (HCons 500 (HCons "Hello" HNil))) 
```

这个定义背后的一般技术是首先考虑如何编写非依赖类型的版本（例如这里，如何将元素打乱到列表的末尾），然后将其转换为类型级别（约束）版本。请注意，`shuffle`类型类实例中约束的递归结构完全反映了 的递归结构。

这是否解决了您正在尝试做的事情？

# c++ - 类型转换和异常处理

> ID：14598751
> 
> 赞同：2
> 
> 时间：2013-01-30T07:29:43.523
> 
> 标签：c++, exception-handling, casting

*   在下面提到的代码中，当我使用`float`参数调用“方法”时，它会自动转换为`int`并执行必要的任务。但是，如果我抛出`float`类型并且直接`catch`期望`int`参数，它不起作用？为什么？

*   另一件事，如果没有`catch`声明，`float`那么它应该转到一般`catch`情况下，如果我重新抛出`catch`将处理它的情况？

    ```
    int method(int i)
    {
        return i--;
    }
    void main()
    {
        try {
            cout<<method(3.14);
            throw string("4");
        }
        catch(string& s){
            try{
                cout << s;
                throw 2.2;
            }
            catch(int i)
                cout<<i;

            catch(...)
                throw;

            cout<<"s"+s;
        }
        catch(...)
            cout<<"all";
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:36:12.237

请不要使用这样的例外。异常是针对*特殊情况*，而不是正常的程序逻辑。每次滥用异常时，$DEITY 都会杀死一只小猫。通过`throw`ing 它。入坑。火的。和悲伤。

* * *

话虽如此：

*   隐式转换不适用于异常。请参阅：[您可以通过转换运算符的类型捕获异常吗？](https://stackoverflow.com/questions/2343208/can-you-catch-an-exception-by-the-type-of-a-conversion-operator)
*   未捕获的异常将终止您的程序。所以重新抛出它会导致调用`terminate()`，并且你的程序已经死了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:36:23.760

函数调用在编译时解析，编译器能够检查类型，找到最接近的匹配（重载解析），然后进行适当的转换。当传播异常时，运行时不会发生此类事情。异常被`catch`与类型完全匹配的 a 或异常的明确基数之一捕获。在你的情况下`int`根本不匹配 a `double`。

与您的第二个问题一样：您`rethrow`没有被块包围`try`，因此它不会被 last 捕获`catch(...)`。最后一个`catch(...)`对应于第一个`try`块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T07:39:41.300

在几种情况下，简单变量可以转换为其他简单类型。其中之一是如果需要这样的转换来调用方法。这就是您的案例 1 中发生的情况——它发生在编译期间，调用在运行时未解决。如果要禁止此类行为，请使用[`explicit`关键字](https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean)

但是，如果有两种方法具有不同类型的参数，则将选择参数与您传递的参数“最接近”的方法。类型转换不适用于 throw。只有当抛出的类型与 catch 参数中的类型匹配时，它才会匹配。因此默认捕获工作。

顺便说一句：您实际上使用的是双精度值，而不是浮点数！2.2f 将是一个浮点数

# bash - 在 Windows 7 上的 cygwin 中运行 bash 脚本

> ID：14598753
> 
> 赞同：13
> 
> 时间：2013-01-30T07:29:54.643
> 
> 标签：bash, windows-7, cygwin

我正在尝试在 Windows 7 上的 cygwin 中运行以下 bash 脚本

```
REPEATTIMES="$1"

if [ $# = 0 ]; then

    echo "Usage: fetch topN repeatTimes"
    exit 1
fi

for (( i=1; i<=$REPEATTIMES; i++ ))
do
    echo "ITERATION: $i"
    echo "GENERATING"

    log=thelogs/log 

    bin/nutch generate crawl/segment -topN 10 > $log
    batchId=`sed -n 's|.*batch id: \(.*\)|\1|p' < $log`

    echo "batch id: $batchId "

    # rename log file by appending the batch id
    log2=$log$batchId
    mv $log $log2
    log=$log2

    echo "FETCHING"
    bin/nutch fetch crawl/segments/$batchId >> $log

    echo "PARSING"
    bin/nutch parse crawl/segments/$batchId >> $log

    echo "UPDATING DB"
    bin/nutch updatedb crawl/crawldb crawl/segments/$batchId >> $log

    echo "Done "

done 
```

* * *

但是当我运行它时，我得到了错误：

```
line 11 :syntax error near unexpected token '$'\r'

line 11 :'for (( i=1; i<= REPEATTIMES; i++ )) 
```

该脚本在 ubuntu 服务器上运行良好。但我现在需要在 Windows 机器上运行它。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-30T15:32:06.937

如果您无法修复所有脚本，您应该能够通过设置忽略 CR 的选项来修改 Cygwin 中的 EOL 行为：

```
set -o igncr 
```

如果你把它添加到你的 .bash_profile 中，它会在你登录时默认全局设置：

```
export SHELLOPTS
set -o igncr 
```

您也可以在每个脚本内部执行此操作，方法是将此行放在 #! 之后。线：

```
(set -o igncr) 2>/dev/null && set -o igncr; # this comment is required 
```

您需要注释以忽略该选项生效之前读取的该行中的 CR。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-30T07:36:29.023

最新版本的 Cygwin 似乎只支持 Unix 格式的文件（即用 \n 换行，而不是 DOS/Windows \r\n 换行）。

要解决此问题，请运行 /bin/dos2unix.exe 实用程序，将您的脚本作为命令的参数：

```
e.g. /bin/dos2unix.exe myScript.sh 
```

这会将其转换为 Unix 格式，然后您应该能够运行它。

# javascript - HTML5画布中的简单加载动画

> ID：14598761
> 
> 赞同：14
> 
> 时间：2013-01-30T07:30:33.690
> 
> 标签：javascript, html5-canvas

我正在寻找一个简单的图像加载动画。我想找到一个简短的解决方案，它只使用画布上的绘图和纯 Javascript。

请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T07:58:50.417

我会使用由在线工具（如[Ajaxload.info](http://www.ajaxload.info/)或[Preloaders.net](http://preloaders.net/) ）生成的加载 GIF ，并将其放置在您可以在 canvas 元素前面切换的 div 标签中。

有关更多微调器生成器脚本，请参阅[5 在线加载 AJAX 微调器生成器工具](http://www.jquery4u.com/tools/online-loading-ajax-spinner-generators/)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T07:43:29.970

```
 drawProgressIndicator: function(){

    var can = this.imgCanvas;
    var ctx = this.imgCtx;

    ctx.save();
    ctx.clearRect(0, 0, can.width, can.height);
    ctx.translate(can.width / 2, can.height / 2);
    ctx.scale(0.4, 0.4);
    ctx.rotate(-Math.PI / 2);
    ctx.strokeStyle = "black";
    ctx.fillStyle = "white";
    ctx.lineWidth = 8;
    ctx.lineCap = "round";
    var step = this.animationStep;
    ctx.fillStyle = "black";
    ctx.save();
    ctx.rotate(step * Math.PI / 30);
    ctx.strokeStyle = "#33ccff";
    ctx.fillStyle = "#33ccff";
    ctx.lineWidth = 10;
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(68, 0);
    ctx.stroke();
    ctx.fill();
    ctx.restore();
    ctx.beginPath();
    ctx.lineWidth = 14;
    ctx.strokeStyle = 'gray';
    ctx.arc(0, 0, 80, 0, Math.PI * 2, true);
    ctx.stroke();
    ctx.restore();
    this.animationStep += 1;
}, 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-11-25T09:43:51.147

这是我的加载，其中有 2 个使用画布的圆圈

```
var canvas = document.createElement("canvas");
canvas.width = 200;
canvas.height = 200;
canvas.style.backgroundColor = "black";
document.body.appendChild(canvas);

var ctx = canvas.getContext("2d");

var bigCircle = {
    center: {
        x: 100,
        y: 100
    },
    radius: 50,
    speed: 4
}

var smallCirlce = {
    center: {
        x: 100,
        y: 100
    },
    radius: 30,
    speed: 2
}

var progress = 0;

function loading() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    progress += 0.01;
    if (progress > 1) {
        progress = 0;
    }

    drawCircle(bigCircle, progress);
    drawCircle(smallCirlce, progress);

    requestAnimationFrame(loading);
}
loading();

function drawCircle(circle, progress) {
    ctx.beginPath();
    var start = accelerateInterpolator(progress) * circle.speed;
    var end = decelerateInterpolator(progress) * circle.speed;
    ctx.arc(circle.center.x, circle.center.y, circle.radius, (start - 0.5) * Math.PI, (end - 0.5) * Math.PI);
    ctx.lineWidth = 3;
    ctx.strokeStyle = "white";
    ctx.fill();
    ctx.stroke();
}

function accelerateInterpolator(x) {
    return x * x;
}

function decelerateInterpolator(x) {
    return 1 - ((1 - x) * (1 - x));
}
```

希望有帮助

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-01T11:30:07.877

试试这个.. [http://jsfiddle.net/swarnendu/Ky25d/](http://jsfiddle.net/swarnendu/Ky25d/)

```
<html>
<head>
<style type="text/css">

#layer6,#layer7,#layer8{position: absolute;left: 0px;top: 0px;}
.anim_8{-webkit-animation-duration: 1.5s;-webkit-animation-iteration-count:infinite;-webkit-transform-origin:25px 25px;-webkit-animation-name:animation_6;-webkit-animation-timing-function: linear;
-moz-animation-timing-function: linear; -moz-animation-duration: 1.5s; -moz-animation-name: animation_6;  -moz-transform-origin:25px 25px; -moz-animation-iteration-count:infinite ; 
-o-animation-timing-function: linear; -o-animation-duration: 1.5s; -o-animation-name: animation_6;  -o-transform-origin:25px 25px; -o-animation-iteration-count:infinite ;}
@-webkit-keyframes animation_6{
0%{ -webkit-transform:  rotate(0deg)  ;}     
100%{ -webkit-transform:  rotate(360deg)  ;} 
}
@-o-keyframes animation_6{
0%{ -o-transform:  rotate(0deg)  ;}     
100%{ -o-transform:  rotate(360deg)  ;} 
}

@-moz-keyframes animation_6{
0%{ -moz-transform:  rotate(0deg)  ;}     
100%{ -moz-transform:  rotate(360deg)  ;} 
}       

</style> 

<script type="text/javascript">
window.addEventListener("load",draw_canvas,false) ;
function draw_canvas()
{
var c6=document.getElementById("layer6");var ctx6=c6.getContext("2d");  ctx6.fillStyle="#FF000 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-01T14:33:20.780

这篇文章：[https](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Basic_animations) ://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Basic_animations帮助我绘制了自己的动画。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-31T14:46:59.123

这是一个仅使用 javascript 和 canvas- [animation](http://canvimation.github.com/gallery/planet.html)的动画 它是使用应用程序[canvimation](http://canvimation.github.com/)创建的，帮助文件在[这里](https://sites.google.com/site/canvimationhelp/introduction)。

但是，由于它不使用图像并且它并不简单，因此它可能不是您想要的。

我能想到的唯一另一种方法是使用[context.drawImage](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images)和[setTimeout](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)来加载一系列图像

或者真的只是在画布中使用 gif 图像，如下面的代码所示

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script type="text/javascript">
            function main() {
               img=document.getElementById("anigif");
               Ani=$("ani");
               Ani.width=500;
               Ani.height400;
               Ani.ctx=Ani.getContext('2d');
               Ani.ctx.drawImage(img,0,0)
            }
        </script>
    </head>
    <body onload="main()">
        <img id="anigif" src="http://www.mathworks.com/matlabcentral/fx_files/21944/2/DancingPeaks.gif">
        <canvas id="ani"></canvas>
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T09:31:33.817

如果您正在使用 html5 画布搜索简单的加载动画，那么这里就是.. [http://jsfiddle.net/swarnendu/urV4p/](http://jsfiddle.net/swarnendu/urV4p/)

```
<html>
<head>
    <style type="text/css">
        #d1,#ci1,#ci2,#ci3{position:absolute;top:0px;left:0px}            

        .cc2{   -webkit-animation-duration: 1s; -webkit-animation-name: loading2w; -webkit-animation-iteration-count:infinite;  -moz-animation-duration: 1s; -moz-animation-name: loading2m; -moz-animation-iteration-count:infinite;   -o-animation-duration: 1s; -o-animation-name: loading2o; -o-animation-iteration-count:infinite;}
        .cc3{   -webkit-animation-duration: 1s; -webkit-animation-name: loading3w; -webkit-animation-iteration-count:infinite;  -moz-animation-duration: 1s; -moz-animation-name: loading3m; -moz-animation-iteration-count:infinite;   -o-animation-duration: 1s; -o-animation-name: loading3o; -o-animation-iteration-count:infinite;}            
        @-webkit-keyframes loading2w{
            0%{visibility:hidden;} 
            33%{visibility:hidden;} 
            33.33%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
        @-moz-keyframes loading2m{
            0%{visibility:hidden;} 
            33%{visibility:hidden;} 
            33.33%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
        @-o-keyframes loading2o{
            0%{visibility:hidden;} 
            33%{visibility:hidden;} 
            33.33%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
        @-webkit-keyframes loading3w
        {
            0%{visibility:hidden;} 
            66.33%{visibility:hidden;} 
            66.67%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
        @-moz-keyframes loading3m
        {
            0%{visibility:hidden;} 
            66.33%{visibility:hidden;} 
            66.67%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
        @-o-keyframes loading3o
        {
            0%{visibility:hidden;} 
            66.33%{visibility:hidden;} 
            66.67%{visibility:visible;} 
            100%{visibility:hidden;}   
        }
    </style>
    <script type="text/javascript">
        window.addEventListener("load",win_load,false);
        function win_load()
        {                
            var c10=document.getElementById("ci1");var ctx10=c10.getContext("2d");ctx10.fillStyle="#f00";ctx10.font="15pt Calibri";ctx10.fillText("Loading .",5,15);      
            var c10=document.getElementById("ci2");var ctx10=c10.getContext("2d");ctx10.fillStyle="#f00";ctx10.font="15pt Calibri";ctx10.fillText("               .",5,15);   
            var c10=document.getElementById("ci3");var ctx10=c10.getContext("2d");ctx10.fillStyle="#f00";ctx10.font="15pt Calibri";ctx10.fillText("                .",5,15);      
        }
    </script>
</head>
<body>
    <div id="d1">
        <canvas id="ci1" class="cc1" width="100" height="100"></canvas>
        <canvas id="ci2" class="cc2" width="100" height="100"></canvas>
        <canvas id="ci3" class="cc3" width="100" height="100"></canvas>
    </div>
</body> 
```

# c# - 如何将多个传递价值的点击事件合二为一？

> ID：14598765
> 
> 赞同：0
> 
> 时间：2013-01-30T07:30:50.093
> 
> 标签：c#, xaml, button, windows-phone-8, windows-phone

我有以下代码，我为我的游戏级别菜单的每个按钮单击事件传递了一个参数。

```
 private void btnLevelVeryEasy_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=0", UriKind.Relative));
    }

    private void btnLevelEasy_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=1", UriKind.Relative));
    }

    private void btnLevelMedium_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=2", UriKind.Relative));
    }

    private void btnLevelHard_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=3", UriKind.Relative));
    }

    private void btnLevelInsane_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=4", UriKind.Relative));
    } 
```

我的问题是，如何通过让所有按钮触发一次单击事件并传递唯一参数来更优雅地做到这一点？就像是

```
 private void btnLevel_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/GamePlay.xaml?parameter=[buttontag]", UriKind.Relative));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:57:56.483

Sayse 几乎是对的，除了 .Name 应该在 () 之后：

```
string buttonName = ((Button)sender).Name;

            switch (buttonName)
            {
                case "button1":
                    MessageBox.Show("Button1 pressed");
                    break;
                case "button2":
                    MessageBox.Show("Button2 pressed");
                    break;
            } 
```

编辑：

OP，你知道如何链接每个按钮上的事件吗？（在事件中，只需单击下拉菜单并选择先前创建的事件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:46:48.970

根据我的评论，根据您的按钮的命名方式，您可以使用

```
string buttonName = ((Button)sender).Name; 
```

按钮是你的按钮类

然后解析这个字符串得到你名字中已经包含的数字...

例如

```
string lastChar = buttonName[buttonName.length - 1]; 
```

编辑如果您希望保持名称相同，则可以使用 switch 语句

```
string s;
switch(((Button)sender).Name)
{
case "btnLevelEasy":
s = "1";
break; 
```

# parsing - 如何让 Lemon 解析器在换行符上终止自身？

> ID：14598768
> 
> 赞同：0
> 
> 时间：2013-01-30T07:30:57.810
> 
> 标签：parsing, token, eol, lemon

按照[这个旧教程](http://souptonuts.sourceforge.net/readme_lemon_tutorial.html)，我试图让柠檬解析器自动终止对`EOL`令牌的解析。[解析器](https://github.com/theory/flex-lemon-example/blob/166d26471a194a3fb12e0f09c5aec340e2157d6f/shellparser.y)的相关部分如下所示：

```
start ::= in .
in ::= .
in ::= in commandList EOL .
{
    printf("start ::= commandList .\n");
    printf("> ");
} 
```

下面是我使用 Flex 扫描的令牌[执行解析器的方式：](https://github.com/theory/flex-lemon-example/blob/166d26471a194a3fb12e0f09c5aec340e2157d6f/main.c)

```
int lexCode;
do {
    lexCode = yylex(scanner);
    Parse(shellParser, lexCode, yyget_text(scanner));
    // XXX This line should not be necessary; EOL should automatically
    // terminate parsing. :-(
    if (lexCode == EOL) Parse(shellParser, 0, NULL);
} while (lexCode > 0); 
```

我想消除在`EOL`此处检查令牌的需要，并让解析器确定何时完成。我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:46:47.253

在 EBNF 术语中，您的定义`in`是

```
in ::= (commandList EOL)* 
```

这允许多个 EOL。你想要的是

```
in ::= commandList* EOL 
```

哪个应该解决

```
start ::= in EOL .
in ::= .
in ::= in commandList . 
```

请注意，这不允许完全为空的输入（甚至没有 EOL）；如果这是一个问题，您可以根据需要进行调整。

# file-upload - 将文件上传到保管箱时，方法出错

> ID：14598774
> 
> 赞同：0
> 
> 时间：2013-01-30T07:31:17.403
> 
> 标签：file-upload, oauth, dropbox

我正在使用下面的 url 使用 oauth 将文件上传到保管箱，但出现错误 {“error”：“调用需要以下方法之一：PUT，POST，得到 GET！”} 将 httpmethod 作为 PUT 传递，但仍然询问错误.

用于上传的签名是

[https://api-content.dropbox.com/1/files_put/dropbox/test?oauth_consumer_key=twcek2m7cxtantc&oauth_signature_method=PLAINTEXT&oauth_token=918v4lxg2w23car&oauth_version=1.0&oauth_signature=fbs34nykryouuj1%26rbbprgh95tjzf22](https://api-content.dropbox.com/1/files_put/dropbox/test?oauth_consumer_key=twcek2m7cxtantc&oauth_signature_method=PLAINTEXT&oauth_token=918v4lxg2w23car&oauth_version=1.0&oauth_signature=fbs34nykryouuj1%26rbbprgh95tjzf22)

使用这个我得到了错误

{"error": "调用需要以下方法之一：PUT、POST、得到 GET！"}

请告诉我如何解决此错误。

```
public FileSystemInfo UploadFile(string root, string path, string file)
        {
            var uri = new Uri(new Uri(DropboxRestApi.ApiContentServer),
                String.Format("files_put/{0}/{1}",
                root, UpperCaseUrlEncode(path)));

            var oauth = new OAuth();
            //var requestUri = oauth.DownloadSignRequest(uri, _consumerKey, _consumerSecret, "POST", _accessToken);
            var requestUri = oauth.SignRequest(uri, _consumerKey, _consumerSecret, _accessToken, "PUT");

            var request = (HttpWebRequest) WebRequest.Create(requestUri);
            request.Method = WebRequestMethods.Http.Post;
            request.KeepAlive = true;

            byte[] buffer;
            using (var fileStream = new FileStream(file, FileMode.Open, FileAccess.Read))
            {
                int length = (int) fileStream.Length;
                buffer = new byte[length];
                fileStream.Read(buffer, 0, length);
            }

            request.ContentLength = buffer.Length;
            using (var requestStream = request.GetRequestStream())
            {
                requestStream.Write(buffer, 0, buffer.Length);
            }

           // request.Method = "POST";

            var response = request.GetResponse();
            var reader = new StreamReader(response.GetResponseStream());
            var json = reader.ReadToEnd();
            return ParseJson<FileSystemInfo>(json);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:33:39.033

我在保存要上传的文件的路径时出错。

为保存在路径中提供相同的文件名。

就这样。

# autohotkey - 在自动热键中双重使用键？

> ID：14598777
> 
> 赞同：0
> 
> 时间：2013-01-30T07:31:36.530
> 
> 标签：autohotkey

我想分配数字 1，这样当我按下它时，结果是发送到计算机 qx 然后输入。

```
1:: Send, qx{ENTER}
q:: Send, jx{Enter} 
```

但后来我也想指定字母 q 向计算机发送其他内容。是否有可能做到这一点？我担心如果我将 1 分配给涉及 q 的东西，那么每当我按 1 时 q 也会被调用，我们最终会陷入循环。

有什么方法可以修复它，以便 AHK 知道什么时候发送 qx 我不想调用 q 函数（因此是 jx）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:14:18.217

好想法。AutoHotKey 开发人员已经考虑到这一点并引入了 $ 来防止这种“循环”

例子：

```
$1::Send, q
$q::Send, 1 
```

按 1 将生成 aq，但由于 $ 它不会触发第二个热键，反之亦然。

因此，通过在 q 前面加一个 $，您将在您的情况下防止此循环。

# asp.net-mvc - 浏览器刷新时的 Http Post

> ID：14598782
> 
> 赞同：2
> 
> 时间：2013-01-30T07:31:53.613
> 
> 标签：asp.net-mvc

**我的页面结构**

我有 3 个文本框，我在其中启用了客户端验证。

我有提交按钮来发布表单数据。

**问题**

当我单击提交按钮时，它将转到我的 Post 方法，假设我没有在文本框中输入值，那么它会从服务器端（Http Post）向我抛出错误。

现在我将在文本框中输入值，然后我将刷新浏览器，它进入 Post 方法而不是 Get ！！！

*有什么帮助吗？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T09:34:14.943

这是浏览器的默认行为，它在刷新时重新发出最后一个请求，在这种情况下恰好是一个 POST。

如果您希望防止刷新时重新发布，您应该在 MVC 中实现 PRG (POST-Redirect-GET) 模式。这是接收 POST 的控制器在处理后使用 GET 请求重定向的地方。因此，最后一个浏览器请求是一个 GET，它将在刷新时重新发出。

```
[HttpPost]
public ActionResult Create(Model model) {
    if (ModelState.IsValid) {
      //do processing
         return RedirectToAction("Details", new { id = model.Id })
    }
    return View(model);
} 
```

# c# - 给定要保留的记录 ID 列表。删除非会员的最佳方法是什么？

> ID：14598786
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:32:03.503
> 
> 标签：c#, mysql, ado.net

我有一个要保留的记录的记录 ID 列表。删除不在集合中的所有记录的最佳方法是什么？我在 C# 中使用 MySQL 和 ADO.NET。我想尽量减少完成所有删除的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:54:46.110

问题是你在哪里有这些ID？他们在另一张桌子上吗？它们在文件中吗？

如果你只有几个 id

```
DELETE FROM foo WHERE id NOT IN (1, 2, 7, 8, 10); 
```

如果您从表中获取 id

```
DELETE foo.* FROM foo LEFT JOIN foo_bar ON foo.id = foo_bar.foo_id WHERE foo_bar.foo_id IS NULL; 
```

如果您在文件中有 id（每行一个 id）

```
CREATE TEMPORARY TABLE foo_keep (id INT, PRIMARY KEY (id));
LOAD DATE INFILE '/tmp/myids.list' INTO foo_keep;
DELETE foo.* FROM foo LEFT JOIN foo_keep ON foo.id = foo_keep.id WHERE foo_keep.id IS NULL; 
```

# python - 提取 XML 属性

> ID：14598789
> 
> 赞同：0
> 
> 时间：2013-01-30T07:32:24.830
> 
> 标签：python, xml, python-3.x, beautifulsoup

我有一个包含数千条记录的 XML 文件，格式如下：

```
<custs>
    <record cust_ID="B123456@Y1996" l_name="Jungle" f_name="George" m_name="OfThe" city="Fairbanks" zip="00010" current="1" />
    <record cust_ID="Q975697@Z2000" l_name="Freely" f_name="I" m_name="P" city="Yellow River" zip="03010" current="1" />
    <record cust_ID="M7803@J2323" l_name="Jungle" f_name="Jim" m_name="" city="Fallen Arches" zip="07008" current="0" />
</custs>
    #   (I know it's not normalized.  This is just sample data) 
```

如何将其转换为 CSV 或制表符分隔的文件？我知道我可以使用 re.compile() 语句在 Python 中对其进行硬编码，但是在 diff XML 文件布局中必须有一些更简单、更便携的东西。

我在这里找到了几个关于属性的线程，（[Beautifulsoup 无法使用 attrs=class 提取数据](https://stackoverflow.com/questions/11713977/beautifulsoup-unable-to-extract-data-using-attrs-class)，使用[beautifulsoup 提取属性值](https://stackoverflow.com/questions/2612548/extracting-an-attribute-value-with-beautifulsoup)）并且他们让我几乎到了那里：

```
#  Python 3.30
#
from bs4 import BeautifulSoup
import fileinput

Input = open("C:/Python/XML Tut/MinGrp.xml", encoding = "utf-8", errors = "backslashreplace")
OutFile = open('C:/Python/XML Tut/MinGrp_Out.ttxt', 'w', encoding = "utf-8", errors = "backslashreplace")

soup = BeautifulSoup(Input, features="xml")

results = soup.findAll('custs', attrs={})

# output = results   [0]#[0]

for each_tag in results:
    cust_attrb_value = results[0]
#       print (cust_attrb_value)
    OutFile.write(cust_attrb_value)

OutFile.close() 
```

下一步（最后？）步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:26:18.750

如果此数据的格式正确（例如，使用规范的 XML），您应该考虑[`lxml`](http://lxml.de/)而不是 BeautifulSoup。使用`lxml`，您可以读取文件，然后可以在其上应用 DOM 逻辑，包括 XPath 查询。通过您的 XPath 查询，您可以获取`lxml`代表您感兴趣的每个节点的对象，从中提取您需要的数据，并使用类似[`csv`](http://docs.python.org/2/library/csv.html)模块的东西将它们重写为您选择的任意格式。

具体来说，在 lxml 文档中，查看这些教程：

*   [从字符串和文件解析](http://lxml.de/tutorial.html#parsing-from-strings-and-files)
*   [元素类：使用 XPath 查找文本](http://lxml.de/tutorial.html#using-xpath-to-find-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:33:50.950

我（也）不会为此使用 BeautifulSoup，虽然我喜欢 lxml，但这是一个额外的安装，如果您不想打扰，这很简单，可以使用标准的 lib ElementTree 模块。

就像是：

```
import xml.etree.ElementTree as ET
import sys
tree=ET.parse( 'test.xml' )
root=tree.getroot()
rs=root.getchildren()
keys = rs[0].attrib.keys()
for a in keys: sys.stdout.write(a); sys.stdout.write('\t')
sys.stdout.write('\n')
for r in rs:
    assert keys == r.attrib.keys()
    for k in keys: sys.stdout.write( r.attrib[k]); sys.stdout.write('\t')
    sys.stdout.write('\n') 
```

将从 python-3 生成：

```
zip m_name  current city    cust_ID l_name  f_name  
00010   OfThe   1   Fairbanks   B123456@Y1996   Jungle  George  
03010   P   1   Yellow River    Q975697@Z2000   Freely  I   
07008       0   Fallen Arches   M7803@J2323 Jungle  Jim 
```

请注意，对于 Python-2.7，属性的顺序会有所不同。如果您希望它们以不同的特定顺序输出，您应该对列表“keys”进行排序或排序。

断言正在检查所有行是否具有相同的属性。如果您实际上在元素中缺少或不同的属性，那么您必须删除它并添加一些代码来处理差异并为缺失值提供默认值。（在您的示例数据中，您有一个空值（ m_name="" ），而不是一个缺失值。您可能需要检查此输出的使用者是否正确处理了这种情况，或者添加一些更特殊的处理这个案例。

# php - PHP 从文本文件写入和读取

> ID：14598791
> 
> 赞同：0
> 
> 时间：2013-01-30T07:32:46.013
> 
> 标签：php

我在写入和读取文本文件时遇到问题。

我必须首先从一个文本文件向另一个文本文件写入一些我需要再次读取的值。以下是代码片段：

写入文本文件：

```
$fp = @fopen ("text1.txt", "r");

$fh = @fopen("text2.txt", 'a+');

if ($fp) {
 //for each line in file
    while(!feof($fp)) {
    //push lines into array
    $thisline = fgets($fp);
    $thisline1 = trim($thisline);

     $stringData = $thisline1\. "\r\n";
    fwrite($fh, $stringData);

                  fwrite($fh, "test");

                }
            }
fclose($fp);
fclose($fh); 
```

从书面文本文件中读取

```
$page = join("",file("text2.txt"));
$kw = explode("\n", $page);
for($i=0;$i<count($kw);$i++){

 echo rtrim($kw[$i]);

} 
```

但是，如果我没有弄错我用来插入换行符的“/r/n”，那么当我回读时，就会出现问题，我需要将读取的值从偶数行传递给一个函数来执行其他操作。

我该如何解决这个问题？基本上，我需要将某些值写入文本文件，然后只读取偶数行中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:47:52.300

我不确定您是否对偶数行号或重新读取文件有问题。

这是偶数行号的解决方案。

```
$page = join("",file("text2.txt"));
$kw = explode("\n", $page);
for($i=0;$i<count($kw);$i++){

    $myValue = rtrim($kw[$i]);
    if(i % 2 == 0)
    {
        echo $myValue;
    }

} 
```

# jclouds - 使用 jclouds 的 Cinder API

> ID：14598793
> 
> 赞同：0
> 
> 时间：2013-01-30T07:33:02.330
> 
> 标签：jclouds, hp-cloud-services

我一直在阅读有关添加到 Cinder Openstack API 的支持 jclouds，并且我正在查看 Rackspace Cloud 上的这个示例用法。

[https://github.com/jclouds/jclouds-examples/blob/master/rackspace/src/main/java/org/jclouds/examples/rackspace/cloudblockstorage/CreateVolumeAndAttach.java](https://github.com/jclouds/jclouds-examples/blob/master/rackspace/src/main/java/org/jclouds/examples/rackspace/cloudblockstorage/CreateVolumeAndAttach.java)

有人知道这是否也支持 HP Cloud？如果没有，我如何将 HP Cloud Block Storage 与 jclouds 一起使用？

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:50:16.850

*HP Cloud即将*支持 OpenStack Block Storage (Cinder) API 。请参阅我们的 API 文档以参考当前支持的块存储 API：[https ://docs.hpcloud.com/api/block-storage/](https://docs.hpcloud.com/api/block-storage/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:16:36.070

您*应该*能够将 Cinder API 与 HP 一起使用，但我试过了，但它不起作用。这就是我所做的。

```
Iterable<Module> modules = ImmutableSet.<Module> of(new SLF4JLoggingModule());

RestContext<CinderApi, CinderAsyncApi> cinder = ContextBuilder.newBuilder("openstack-cinder")
  .endpoint("https://region-a.geo-1.identity.hpcloudsvc.com:35357/v2.0/")
  .apiVersion("1.1")
  .credentials(myHpTenantName + ":" + myHpUsername, myHpPassword)
  .modules(modules)
  .build(CinderApiMetadata.CONTEXT_TOKEN);
VolumeApi volumeApi = cinder.getApi().getVolumeApiForZone("az-1.region-a.geo-1");
System.out.println(volumeApi.list()); 
```

对 list() 的调用返回一个空列表，但打开日志记录后，我可以看到它实际上是一个 404 导致返回空列表。为列出卷而创建的 URL 是

```
https://az-1.region-a.geo-1.compute.hpcloudsvc.com/v1.1/myHpTenantId/volumes 
```

根据 HP 服务目录，我认为这应该是有效的，但它返回 404。

我会 ping 我从 HP 认识的人，看看我们能不能弄清这个问题。

# c++ - 在 C++ 中为配对对象定义排序函数的比较器

> ID：14598796
> 
> 赞同：-3
> 
> 时间：2013-01-30T07:33:25.930
> 
> 标签：c++

下面是我的代码。操作功能无法正常工作。任何帮助将不胜感激。通常，`sort`按升序排序。我想定义operat，使其按降序排序

```
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<vector>
#include<utility>
using namespace std;
typedef pair<int,int> pii;
typedef pair<int,pii> pwp;

bool operat(pwp a, pwp b){
    if(a.first > b.first){
        return true;
    }else if(a.second.first > b.second.first) {
        return true;

    }else if (a.second.second > b.second.second) { return true;}
    return false;

}
int main(){
    vector<pwp> inp;
    pwp obj1 = make_pair(1998,make_pair(3,24));
    pwp obj2 = make_pair(1998,make_pair(3,21));
    pwp obj3 = make_pair(1997,make_pair(3,24));
    inp.push_back(obj1);
    inp.push_back(obj2);
    inp.push_back(obj3);
    printf("Before sorting\n");
    for(int i = 0 ; i< inp.size();i++){
        pwp sth = inp[i];
        printf("%d %d %d\n",sth.first,sth.second.first,sth.second.second);

    }
    sort(inp.begin(), inp.end(),operat);
    cout<<"After soring"<<endl;
    for(int i = 0 ; i< inp.size();i++){
        pwp sth = inp[i];
        printf("%d %d %d\n",sth.first,sth.second.first,sth.second.second);
    }
return 0;
} 
```

新的一个：

```
bool operat(pwp a, pwp b){
    if(a.first > b.first){
        return true;
    }else if(a.first <  b.first) return false;

    else if(a.second.first > b.second.first) {
        return true;

    }else if (a.second.first < b.second.first) return false;
    else if (a.second.second > b.second.second) { return true;}
    return false;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:36:52.463

[std::pair](http://en.cppreference.com/w/cpp/utility/pair)带有比较运算符，如果其模板参数具有这些运算符，则该运算符起作用。因此，您可以简单地使用[std::greater](http://en.cppreference.com/w/cpp/utility/functional/greater)实例作为比较函子：

```
#include <functional> // for std::greater

operat = std::greater<pwp>();
std::sort(inp.begin(), inp.end(),operat); 
```

如果`std::greater`由于某种原因使用太令人生畏，那么另一种方法是定义函数`operat`：

```
bool operat(const pwp& a, const pwp& b){ return a > b; } 
```

如果您坚持自己实现词法比较逻辑，那么我会建议以下内容：与其试图弄清楚如何正确比较`std::pair<int, std::pair<int, int>>`，不如从总体上弄清楚如何进行比较`std::pair<T1,T2>`。然后在比较中使用该逻辑`std::pair<T1, std::pair<T2, t3>>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T07:36:10.450

在您的代码中：

```
bool operat(pwp a, pwp b){
    if(a.first > b.first){
        return true;
    }else if(a.second.first > b.second.first) {
        return true;
    }else if (a.second.second > b.second.second) { return true;}
    return false;
} 
```

仅当 a.first == b.first 和第三个比较时才应执行第二个比较 a.second.first == b.second.first

# sharepoint - 使用 C# 从 Sharepoint 资产目录中读取文件

> ID：14598797
> 
> 赞同：0
> 
> 时间：2013-01-30T07:33:26.660
> 
> 标签：sharepoint, sharepoint-2010

我们如何使用 C# 从 Sharepoint 资产目录中读取文件。

喜欢

`string[] filePaths = Directory.GetFiles(@"D:\vikrant\Sneham\samplepics", "*.*", SearchOption.AllDirectories);`

在这里，`"D:\vikrant\Sneham\samplepics`如果我写资产库的位置，`http://machinename:7/SiteAssets/SnehamBackgrounds/`那么它会抛出错误（URI 相关）。

要求是从资产 libaray 中一一读取文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:45:30.387

```
using (SPSite site = new SPSite("http://YourSite/"))
{
   using(SPWeb web = site.OpenWeb("/"))
   {
     SPList assetsLibrary = web.Lists["LibraryName"];

     foreach (SPListItem item in assetsLibrary.Items)
     {
        if(item != null)
        {
           Console.WriteLine(item.File.Name);
        }
     }
   }
}

Console.ReadKey(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T09:35:59.773

考虑使用`EnsureSiteAssetsLibrary()`. 该函数将返回 SiteAssets-Library（如果 SiteAssets 不存在，将创建它们）。

```
SPList assetsLibrary = SPContext.Current.Web.Lists.EnsureSiteAssetsLibrary(); 
```

# robots.txt - Robot.txt 允许域中的指定 URL

> ID：14598802
> 
> 赞同：2
> 
> 时间：2013-01-30T07:33:48.120
> 
> 标签：robots.txt

我只想允许主 URL（域）和`http://domain/about`，以及其他 URL 对搜索 google 不可见。示例我的链接如下：

```
http://example.com
http://example.com/about
http://example.com/other1
http://example.com/other2
http://example.com/other3
http://example.com/other4
http://example.com/other5
http://example.com/other6
and more URL. 
```

我的问题是 robots.txt 的内容是什么，我想只允许`http://example.com`和`http://example.com/about`，我的网站使用 wordpress。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T00:37:39.723

你想要的是：

```
User-agent: *
Allow: /$
Allow: /about
Disallow: / 
```

`$`表示 url 字符串必须在那里结束。所以它不会允许，例如，`/example.com/foo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:17:46.113

```
User-agent: *
Allow: http://example.com/about
Disallow: / 
```

# c++ - 如何让两个函数相互调用 C++

> ID：14598812
> 
> 赞同：12
> 
> 时间：2013-01-30T07:34:51.690
> 
> 标签：c++, mutual-recursion

我有 2 个这样的函数可以对 if 循环进行混淆：

```
void funcA(string str)
{
    size_t f = str.find("if");
    if(f!=string::npos)
    {
        funcB(str);        //obfuscate if-loop
    }
}

void funcB(string str)
{
     //obfuscate if loop
     funcA(body_of_if_loop);     //to check if there is a nested if-loop
} 
```

与此有关的问题是，如果我放之前`funcA`将无法看到`funcB`，反之亦然。`funcB``funcA`

在此不胜感激任何帮助或建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T07:38:20.363

你想要的是[前向声明](http://en.wikipedia.org/wiki/Forward_declaration)。在你的情况下：

```
void funcB(string str);

void funcA(string str)
{
    size_t f = str.find("if");
    if(f!=string::npos)
    {
        funcB(str);        //obfuscate if-loop
    }
}

void funcB(string str)
{
     //obfuscate if loop
     funcA(body_of_if_loop);     //to check if there is a nested if-loop
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-30T07:36:59.160

前[向声明](http://en.wikipedia.org/wiki/Forward_declaration)将起作用：

```
void funcB(string str); 

void funcA(string str)
{
    size_t f = str.find("if");
    if(f!=string::npos)
    {
        funcB(str);        //obfuscate if-loop
    }
}

void funcB(string str)
{
     //obfuscate if loop
     funcA(body_of_if_loop);     //to check if there is a nested if-loop
} 
```

# ant - 如何更改 ant exec 任务中的 Path 变量？

> ID：14598815
> 
> 赞同：3
> 
> 时间：2013-01-30T07:35:05.763
> 
> 标签：ant, exec, environment-variables, setx

我尝试使用[此](https://stackoverflow.com/questions/5607580/how-to-set-the-path-environment-variable-from-ant-script)链接设置`Path`变量`in ant exec`任务。但它不以某种方式工作。我正在尝试添加当前的文件，并且我在.`THRIFT_HOME``set to basedir``thrift.exe``basedir`

另外，当我更改`executable attribute value`为时`thrift.exe`，thrift 编译器可以正常工作`basedir`，`not added`但是`Path`.

```
<exec executable="thrift">
    <env key="Path" value="${env.Path};${THRIFT_HOME}" />
</exec> 
```

我还尝试使用以下`setx`命令：

```
<exec executable="setx">
    <arg value="Path"/>
    <arg value="%Path%;${THRIFT_HOME}"/>
</exec> 
```

但它仍然不起作用。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:20:15.893

这个怎么样：

```
<property environment="env"/>
<!-- to see if you can access it -->
<echo message="${env.Path}" />
<exec executable="thrift">
    <env key="Path" value="${env.Path};${THRIFT_HOME}" />
</exec> 
```

我在这里找到了一个提示：http: [//www.factsandpeople.com/facts-mainmenu-5/23-other-software-technologies/125-using-environment-variables-in-ant-environment-variables-are-未评估](http://www.factsandpeople.com/facts-mainmenu-5/23-other-software-technologies/125-using-environment-variables-in-ant-environment-variables-are-not-evaluated)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:20:21.187

我目前在 Windows 7 上使用，问题在于文件夹名称中的空格。在 Windows 上工作时，这是一个大问题。

我尝试将 thrift 可执行文件放置在`/d/thrift/`它工作并分配`THRIFT_HOME = /d/thrift`. 然后我试`/d/thrift demo/`了一下，问题就出来了。

```
D:\noknok_fido_to_ostp\noknok_fido_to_ostp_workspace\Demo\build.xml:33: Execute failed: java.io.IOException: Cannot run program "thrift-0.9.0.exe": CreateProces
s error=2, The system cannot find the file specified
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
        at java.lang.Runtime.exec(Runtime.java:593)
        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:862)
        at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
        at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:631)
        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(ProcessImpl.java:81)
        at java.lang.ProcessImpl.start(ProcessImpl.java:30)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
        ... 23 more 
```

另一个问题是`/d/thrift`在`Eclipse Ant plugin build`. 我使用命令提示符进行了尝试，构建成功。

这教会了一个新的教训：**始终从命令提示符构建！**

感谢所有回答这个问题的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T11:16:27.687

那么[`searchpath`](http://ant.apache.org/manual/Tasks/exec.html)属性呢？

> searchpath：当该属性为真时，解析可执行文件的位置时会搜索系统路径环境变量。自蚂蚁 1.6.3

所以我认为是这样的：

```
 <exec executable="thrift" searchpath="true">
       <env key="Path" value="${env.Path};${THRIFT_HOME}" />
    </exec> 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-21T08:39:11.907

我发现它通过引用变量的值来工作

`<exec executable="setx"> <arg line="Path &quot;${env.Path};c:\test Path&quot;" /> <arg line="/m" /> </exec>`

[https://stackoverflow.com/a/23777929/3659861](https://stackoverflow.com/a/23777929/3659861)

# java - Alfresco 错误 Web 脚本状态 500 - 内部错误 Web

> ID：14598816
> 
> 赞同：1
> 
> 时间：2013-01-30T07:35:10.167
> 
> 标签：java, drupal-7, alfresco, cmis, alfresco-share

我是 Drupal 的新手。我正在使用 CMIS 配置 Drupal 和 Alfresco。我可以在 Drupal 中看到 Alfresco 的文件和文件夹。例如，我无法使用 cmis 查询检索这些文件`SELECT * FROM cmis:document WHERE cmis:objectId='workspace://SpacesStore/d3c5f86e-9174-4cfb-9bc9-03aa881d0810'`。我收到以下错误日志：

```
HTTP call to [http://localhost:8080/alfresco/service/cmis/queries] returned [500]. 
Response: Web Script Status 500 - Internal Error Web Script Status 500 - Internal Error The Web Script /alfresco/service/cmis/queries has responded with a status of 500 - Internal Error. 500 
Description: An error inside the HTTP server which prevented it from fulfilling the request.
Message:00300034 Wrapped Exception (with status template): 00300212 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js': 00300211
Exception:java.security.cert.CertificateExpiredException - NotAfter: Fri Aug 17 17:34:11 IST 2012
sun.security.x509.CertificateValidity.valid(CertificateValidity.java:256) 
sun.security.x509.X509CertImpl.checkValidity(X509CertImpl.java:570) 
sun.security.provider.certpath.BasicChecker.verifyTimestamp(BasicChecker.java:157) 
sun.security.provider.certpath.BasicChecker.check(BasicChecker.java:109) 
sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:117) 
sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:328) 
sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:178) 
java.security.cert.CertPathValidator.validate(CertPathValidator.java:250) 
sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:275) 
sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:263) 
sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:173) 
sun.security.validator.Validator.validate(Validator.java:218) 
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126) 
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209) 
com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249) 
com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185) 
com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136) 
com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593) 
com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529) 
com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893) 
com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138) 
com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:632) 
com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:59) 
java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65) 
java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123) 
org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:506) 
org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114) 
org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096) 
org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) 
org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171) 
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) 
org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 
org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:318) 
org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49) 
org.alfresco.repo.search.impl.solr.SolrCMISQueryServiceImpl.query(SolrCMISQueryServiceImpl.java:93) 
sun.reflect.GeneratedMethodAccessor860.invoke(Unknown Source) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:65) 
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172) 
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
$Proxy140.query(Unknown Source) 
org.alfresco.repo.cmis.rest.CMISScript.query(CMISScript.java:683) 
sun.reflect.GeneratedMethodAccessor859.invoke(Unknown Source) 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
java.lang.reflect.Method.invoke(Method.java:597) 
org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155) 
org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243) 
org.mozilla.javascript.optimizer.OptRuntime.call2(OptRuntime.java:76) 
org.mozilla.javascript.gen.c13._c0(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js:67) 
org.mozilla.javascript.gen.c13.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js) 
org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393) 
org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834) 
org.mozilla.javascript.gen.c13.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js) 
org.mozilla.javascript.gen.c13.exec(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js) 
org.alfresco.repo.jscript.RhinoScriptProcessor.executeScriptImpl(RhinoScriptProcessor.java:483) 
org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:191) 
org.alfresco.repo.processor.ScriptServiceImpl.execute(ScriptServiceImpl.java:212) 
org.alfresco.repo.processor.ScriptServiceImpl.executeScript(ScriptServiceImpl.java:174) 
org.alfresco.repo.web.scripts.RepositoryScriptProcessor.executeScript(RepositoryScriptProcessor.java:102) 
org.springframework.extensions.webscripts.AbstractWebScript.executeScript(AbstractWebScript.java:1193) 
org.alfresco.repo.cmis.rest.CMISWebScript.executeScript(CMISWebScript.java:46) 
org.springframework.extensions.webscripts.DeclarativeWebScript.execute(DeclarativeWebScript.java:86) 
org.alfresco.repo.web.scripts.RepositoryContainer$2.execute(RepositoryContainer.java:393) 
org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:388) 
org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:462) 
org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:500) 
org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:316) 
org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:372) 
org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:209) 
org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118) 
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58) 
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) 
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) 
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) 
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 
org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470) 
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) 
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) 
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) 
org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:861) 
org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579) 
org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1584) 
java.lang.Thread.run(Thread.java:662) &nbsp;
Exception:java.security.cert.CertPathValidatorException - timestamp check failed
sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:139)
Exception:sun.security.validator.ValidatorException - PKIX path validation failed: java.security.cert.CertPathValidatorException: timestamp check failed
sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:289)
Exception:javax.net.ssl.SSLHandshakeException - sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: timestamp check failed
com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
Exception:org.alfresco.repo.search.impl.lucene.LuceneQueryParserException - 00300211
org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:364)
Exception:org.alfresco.scripts.ScriptException - 00300212 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js': 00300211
org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:195)
Exception:org.springframework.extensions.webscripts.WebScriptException - 00300034 Wrapped Exception (with status template): 00300212 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/cmis/queries.post.cmisquery.js': 00300211
org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:970)
Server:Community v4.0.0 (4003) schema 5,025 Time:30 Jan, 2013 12:52:18 PM
Diagnostics:Inspect Web Script (org/alfresco/cmis/queries.post)
Error returning CMIS results - check your repository is active and the query / path is correct 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:52:29.443

正如@Ramsus 所说，这是您的 Solr 配置有问题。即使您不直接调用 Solr，您也正在运行 CMIS 查询，该查询由 Alfresco 在内部路由到搜索引擎，即 Solr。从您发布的堆栈跟踪中应该很明显：

```
org.alfresco.repo.search.impl.solr.SolrQueryHTTPClient.executeQuery(SolrQueryHTTPClient.java:318) 
org.alfresco.repo.search.impl.solr.SolrQueryLanguage.executeQuery(SolrQueryLanguage.java:49) 
org.alfresco.repo.search.impl.solr.SolrCMISQueryServiceImpl.query(SolrCMISQueryServiceImpl.java:93) 
[...]    
org.alfresco.repo.cmis.rest.CMISScript.query(CMISScript.java:683) 
```

也就是说，主要问题是关于 HTTPS 和证书验证，由于证书过期而失败：

```
Exception:java.security.cert.CertificateExpiredException - NotAfter: Fri Aug 17 17:34:11 IST 2012
sun.security.x509.CertificateValidity.valid(CertificateValidity.java:256) 
```

您需要为 Alfresco 和 Solr 之间的 HTTPS 通信使用有效的证书。

编辑：根据@Will Abson 的评论，这是开箱即用 SSL 证书的一个[已知问题。](https://forums.alfresco.com/forum/announcements/important-ssl-certs-solr-alfresco-4-expire-week-08152012-1307)您需要创建或检索另一个有效的并按照[wiki中的说明进行配置](http://wiki.alfresco.com/wiki/Alfresco_And_SOLR#Generating_new_SSL_certificates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:46:16.327

... 例外：java.security.cert.CertificateExpiredException - NotAfter：星期五 8 月 17 日 17:34:11 IST 2012
....

可能是 Alfresco Solr 证书 - 请参阅[http://wiki.alfresco.com/wiki/Alfresco_And_SOLR](http://wiki.alfresco.com/wiki/Alfresco_And_SOLR)

# html - 使用溢出在 ipad 上制作 div:touch 以与原生容器相同的方式滚动

> ID：14598817
> 
> 赞同：2
> 
> 时间：2013-01-30T07:35:16.503
> 
> 标签：html, ipad, scroll

在 ipad 上，有一个 css 声明 -webkit-overflow-scrolling:touch，它为任何带有剪辑内容的 div 提供快速弹跳滚动。但它与原生 ios 滚动有一些区别：

1.  如果它以前从未滚动过（例如，父 div 的 scrollTop 属性为 0）并且试图向上滚动它，它不会反弹，而是向上滚动一整页。内容滚动到最底部并向下滚动的情况相同。

2.  如果内容 insede 可滚动容器小于容器本身，它也不会反弹，而是将滚动传播到页面上的其他元素。

有没有办法让它的行为与原生 ios 滚动完全一样，所以触摸容器总是会滚动它，但不会滚动页面。

# android-fragments - 水平滚动的 FragmentTabHost

> ID：14598819
> 
> 赞同：8
> 
> 时间：2013-01-30T07:35:19.463
> 
> 标签：android-fragments, horizontalscrollview

我正在尝试构建一个 FragmentTabHost 并使其水平可滚动。我一直在寻找解决方案，但找不到任何东西，所有帖子都是关于普通 TabHost 的。

我正在使用[FragmentTabHost的 android 站点中解释的支持库](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)

我的布局是：

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:tag="trip_entry_tab"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="0"/>
    <FrameLayout
        android:id="@+id/realtabcontent"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"/>
</LinearLayout> 
```

已经尝试将 tabwidget 嵌套到水平滚动视图中（这是我可以在其他帖子中找到的解决方案，但始终适用于 TabHost 而不是 FragmentTabHost），但没有任何变化：

```
<HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:fillViewport="true"
            android:scrollbars="none" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
            </TabWidget>
        </HorizontalScrollView> 
```

我的标签只是缩小了，这真的不好看。有人让它可以让片段标签主机可滚动吗？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T08:35:35.193

根据我的经验，`FragmentTabHost`不太关心 xml 定义，必须以编程方式进行。我通过`HorizontalScrollView`从 xml 中省略 并将其添加到我`onCreate`的`FragmentActivity`.

xml：

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1" />
    </LinearLayout>

</android.support.v4.app.FragmentTabHost> 
```

然后在添加选项卡后的 onCreate 中（也以编程方式）：

```
TabWidget tw = (TabWidget) findViewById(android.R.id.tabs);
LinearLayout ll = (LinearLayout) tw.getParent();
HorizontalScrollView hs = new HorizontalScrollView(this);
hs.setLayoutParams(new FrameLayout.LayoutParams(
    FrameLayout.LayoutParams.MATCH_PARENT,
    FrameLayout.LayoutParams.WRAP_CONTENT));
ll.addView(hs, 0);
ll.removeView(tw);
hs.addView(tw);
hs.setHorizontalScrollBarEnabled(false); 
```

不知道这是否是最优雅的解决方案，但它似乎工作正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-15T12:12:12.300

我尝试了各种场景，其中一种适用于 XML 布局的场景是：

```
<android.support.v4.app.FragmentTabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:fillViewport="true"
            android:scrollbars="none" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom" />

        </HorizontalScrollView>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>

</android.support.v4.app.FragmentTabHost> 
```

它工作正常，选项卡在屏幕外右侧，可以“滚动”到。另请注意，我不使用“@+id/realtabcontent”FrameLayout。

**使用的资源：**

*   [http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html](http://developer.android.com/reference/android/support/v4/app/FragmentTabHost.html)
*   [https://maxalley.wordpress.com/2013/05/18/android-creating-a-tab-layout-with-fragmenttabhost-and-fragments/](https://maxalley.wordpress.com/2013/05/18/android-creating-a-tab-layout-with-fragmenttabhost-and-fragments/)

问候

# django - Django 表单：自定义 html 输出

> ID：14598823
> 
> 赞同：1
> 
> 时间：2013-01-30T07:35:49.833
> 
> 标签：django, forms

我正在使用[django-crispy-forms](https://github.com/maraujop/django-crispy-forms)和 bootstrap 来呈现我的 django 表单。

我想使用像[这里](http://jasny.github.com/bootstrap/javascript.html#fileupload)这样的文件上传字段，但我不确定如何让我的 html 像这样输出：

```
<div class="fileupload fileupload-new" data-provides="fileupload">
  <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;"><img src="http://www.placehold.it/50x50/EFEFEF/AAAAAA" /></div>
  <div class="fileupload-preview fileupload-exists thumbnail" style="width: 50px; height: 50px;"></div>
  <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" /></span>
  <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
</div> 
```

使用 a`ModelForm`给我这样的输出：

```
<div id="div_id_my_id" class="control-group">
  <label class="control-label " for="id_my_id"> My Model Field</label>
  <div class="controls">
</div> 
```

对于这样的表格：

```
class MyForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.helper = FormHelper(self)
        self.helper.layout = Layout(
            Div(
                Div('stuff', 'things' css_class='span6'),
                Div('main_image', 'my_id', css_class='span6' ),
            css_class='row-fluid'),
        )

    class Meta:
        model=MyForm 
```

所以我需要添加一个 div、一个 span 并更改它们的一些属性。你遇到过这个问题吗？谢谢你的想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:19:53.507

你可以这样做：

```
from crispy_forms.layout import Field

class FileField(Field):
    template = 'bootstrap/layout/file_field.html'

file_field.html

{% load crispy_forms_field %}

<div id="div_{{ field.auto_id }}" class="control-group{% if form_show_errors%}{% if field.errors %} error{% endif %}{% endif %}{% if field.css_classes %} {{ field.css_classes }}{% endif %}">
    {% if field.label %}
        <label for="{{ field.id_for_label }}" class="control-label {% if field.field.required %}requiredField{% endif %}">
            {{ field.label|safe }}{% if field.field.required %}<span class="asteriskField">*</span>{% endif %}
        </label>
    {% endif %}

    <div class="controls">
        <div class="fileupload fileupload-new" data-provides="fileupload">
          <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;"><img src="http://www.placehold.it/50x50/EFEFEF/AAAAAA" /></div>
          <div class="fileupload-preview fileupload-exists thumbnail" style="width: 50px; height: 50px;"></div>
          <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" name="{{ field.html_name }}" id="id_{{ field.html_name }}" value="{{ field.value }}" /></span>
          <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
        </div>
        {% include 'bootstrap/layout/help_text_and_errors.html' %}
    </div>
</div> 
```

然后在你的 FormHelper 中使用它作为`FileField('main_image')`.

# java - 使用 Java 对串行字节数进行十六进制计数

> ID：14598824
> 
> 赞同：0
> 
> 时间：2013-01-30T07:35:52.423
> 
> 标签：java, jakarta-ee, serial-port

每次发送我有一个传入的 11 个字节的数据。它始终以标识设备的 0A 52 开头。剩下的就是这样：

```
0A 52 08 01 01 01 00 C1 20 02 59 

52 Packettype    
08 subtype       
01 Sequence nbr  
01 01 ID            
00 C1 SenseT
20 SenseH
02 Status         
5  level  
9  PwrLvl 
```

由于没有 CR/LF，因此在 11 个字节中读取的最佳方法是确保它以 0A 52 开头并且仍然能够将最后一个字节分成半字节。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:00:05.597

> 而 ( ( len = this.in.read(buffer,0,1)) > -1 )

将要读取的字节长度设置为 1 即可解决问题。请参阅： [http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read(byte[], int, int)](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D,%20int,%20int%29)

这比我能解释得更好。

# themes - PrestaShop：创建专门的供应商页面

> ID：14598825
> 
> 赞同：2
> 
> 时间：2013-01-30T07:36:07.147
> 
> 标签：themes, prestashop

我们正计划与 PrestaShop 一起开发家具店。我是 PrestaShop 的新手，有兴趣了解更多信息。以下是我们的场景：

1.  在商店中，我们希望顶部导航列出房屋中的区域（例如餐厅、卧室等）。当我们将鼠标悬停时，会出现一个带有家具类型列表的下拉菜单（例如餐椅、餐桌等）。

2.  除此之外，左侧将是“收藏”列表。每个集合都可以包含不同家具类型的物品。例如，集合 A 可以有餐椅、客厅椅等。

3.  在集合列表中，有可能有一个“特殊”集合。与其他集合相比，此集合将具有不同的布局页面。

因此，我想知道是否：

1.  这可以使用 Prestashop 吗？我可以看到#1 可以使用类别功能（第一级类别作为房屋中的区域，第二级类别作为家具类型）。此外，#2 可能使用“供应商”或“制造商”。我担心的是，有没有办法将“供应商”/“制造商”实际分开为“特价商品”？

2.  如果可能的话，我们真的可以为这些创建一个专门的页面吗？

非常感谢大家的帮助！任何形式的建议都会很棒！我期待着收到您的来信！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T21:45:22.317

对于您的 3 个需求中的每一个：

1.  您是正确的，PS 的类别将允许您执行此操作。类别系统允许您拥有尽可能深的类别层次结构，并且您所描述的正是它的用途。

2.  正如您所暗示的，您可以使用供应商或制造商，只需将名称更改为“集合”并将产品与正确的供应商相关联（如果您选择供应商而不是集合）。您可以向供应商或制造商添加默认情况下显示在产品列表之前的说明。

3.  您可以向每个供应商或制造商页面添加自定义描述，但我认为您正在寻找更多变化。如果“特殊”集合所需的布局更改不是太广泛，您可以通过在页面模板中执行一些棘手的操作来实现它，该模板检查当前正在显示的页面，并显示或隐藏 HTML 或根据结果执行 Javascript . 这将提供相当多的灵活性，即使它是“脏”的，因为您必须在模板中硬编码信息。实现此目的的更好方法是覆盖制造商控制器（假设您选择使用制造商来表示集合）以对某些制造商 ID 使用不同的模板。我没有测试过这段代码，但我认为它非常接近你的代码

    ```
    class ManufacturerController extends ManufacturerControllerCore {

      // array with the selected manufacturers
      private $customManufacturers = array(1, 2, 3);

      public function init() {
        parent::init();
        if (in_array($this->manufacturer->id, $this->customManufacturers)) {
          $this->setTemplate(_PS_THEME_DIR_.'manufacturer-custom.tpl');
        }
      }
    } 
    ```

# c# - Visual Studio 2010 C#使用未分配的局部变量

> ID：14598835
> 
> 赞同：-2
> 
> 时间：2013-01-30T07:36:47.067
> 
> 标签：c#, variables

我正在制作一个应用程序，它将在 xml 文件中加载和保存设置。我搜索了所有这些问题和答案并尝试了所有这些方法，但我没有找到解决问题的方法。这是代码：

```
private void DocumentToPrint_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {
        int x1 = 1;            
        XmlReader reader = XmlReader.Create("settings.xml");
        while (reader.Read())
        {
            if ((reader.NodeType == XmlNodeType.Element) && (reader.Name == "coordinates"))
            {
                if (reader.HasAttributes)
                {
                    x1 = int.Parse(reader.GetAttribute("tekst1x"));
                }

            }
        }
        reader.Close();

        var line1 = textBox1.Text;
        Font PrintFont = this.textBox1.Font;
        SolidBrush PrintBrush = new SolidBrush(Color.Black);
        e.Graphics.DrawString(line1, PrintFont, PrintBrush, x1, 30, new StringFormat());
        PrintBrush.Dispose();
    } 
```

所以它总是向我展示

这个错误：

> 即使我确实将 x1 分配给 1，也使用未分配的局部变量“x1”。

在这条线上

`e.Graphics.DrawString(line1, PrintFont, PrintBrush, x1, 30, new StringFormat());`

任何帮助将不胜感激。在此先感谢并致以最良好的祝愿。

**我编辑了问题并添加了完整的代码**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:01:29.827

给定的代码确实编译得很好。这似乎是IDE的问题。我想这足以解决`Clean`问题`Rebuild`。但是，如果它没有帮助，您可以尝试重新启动 Visual Studio。

# jquery - spring 使用 jquery-ajax 上传文件

> ID：14598836
> 
> 赞同：0
> 
> 时间：2013-01-30T07:36:52.353
> 
> 标签：jquery, spring-mvc, file-upload

我想`WEB-INF/attachments`使用 jquery ajax 或任何其他机制将文件上传到服务器，因为我必须在不刷新页面的情况下上传文件。我一直在凝视，但没有找到任何对我有帮助的东西。

请帮助我，因为我为此苦苦挣扎了两天。

我相信这个问题会给我带来很多反对票并要求关闭，但除了在这里问之外我不知道。:(

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:15:51.033

你可以使用这个：使用属性创建表单`target='file_upload_iframe'`。使用属性创建 iframe `name='file_upload_iframe'`。表单将提交到 iframe 中，POST 请求的响应将在 iframe 中。因此，您可以使用 jquery 检查响应内容（错误、成功或其他）并将消息显示给用户。此外，您需要在生产中隐藏您的 iframe，但对于调试，您可以显示它。它非常有用。

你可以使用这样的东西来检查上传结果：

```
$('document').ready(function()
{
    $('iframe#file_upload_iframe').load(function()
    {
       callback(this);
    });
}); 
```

优点：据我所知，这是跨浏览器方法。

缺点：浏览器选项卡的加载图标会出现，但不是那么可怕，恕我直言。

PS你也可以使用插件[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/) [7个使用jquery的受信任的ajax文件上传插件](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)

但他们中的一些人使用闪光灯......

# c# - 从程序集中检索 PDB

> ID：14598848
> 
> 赞同：2
> 
> 时间：2013-01-30T07:37:50.797
> 
> 标签：c#, reflection

通过加载程序集后，`Assembly.Load(byte[] rawAssembly, byte[] rawSymbolStore)`是否可以从创建的程序集实例中检索 rawSymbolStore 数据？呼叫被转发到这个方法，我看不到它做了什么..

```
[MethodImpl(MethodImplOptions.InternalCall)]
internal static RuntimeAssembly nLoadImage(byte[] rawAssembly, byte[] rawSymbolStore, Evidence evidence, ref StackCrawlMark stackMark, bool fIntrospection, SecurityContextSource securityContextSource); 
```

我想要做的是将一个 Assembly 实例序列化为两个字节数组并将它们发送到远程机器以在那里加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:02:25.140

> 是否可以从创建的 Assembly 实例中检索 rawSymbolStore 数据？

不会。程序集的 .pdb 文件是磁盘上的一个单独文件。它包含程序集的调试符号，您通常可以在项目的构建目录中找到它。您可以将 .pdb 文件与 .dll 一起部署，但这是可选的。它仅用于在异常堆栈跟踪中显示文件 + 行号信息。

您必须使用 File.ReadAllBytes() 之类的调用来获取所需的字节 []。Assembly.Location 属性应该有助于定位程序集的 .pdb 文件。如果您不部署它，或者 ReadAllBytes 失败，则为第二个参数传递 null。

# terminal - 在 Apple Script 中运行管理 shell 脚本时如何覆盖请求身份验证？

> ID：14598849
> 
> 赞同：4
> 
> 时间：2013-01-30T07:37:52.523
> 
> 标签：terminal, applescript, administrator

我想做一个简单的程序，每次在用户界面后面登录时运行。在我的 applescript 中，我正在运行一个需要管理员身份验证的 sudo 命令。有没有办法在每次运行时覆盖对身份验证的需求？我不想在登录后每次运行此脚本时都输入我的用户名和密码。有什么帮助吗？（而且非常简单，因为我是新手。）非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T08:39:04.660

您可以将您的用户名和密码放在 applescript 命令中，这样它就不会要求提供这些凭据。但是请注意，这些项目以纯文本形式存储在 AppleScript 中，因此其他人可以看到它们。它不是很安全，但由您决定它是否安全。注意：您不再需要命令中的“sudo”。

```
do shell script "whatever" user name "username" password "password" with administrator privileges 
```

有一些方法可以让您将密码存储在钥匙串中并从 applescript 中检索它，从而确保其安全。如果您想这样做，则按如下方式创建密码项。

打开钥匙串访问应用程序并选择左栏中的钥匙串。然后单击文件>新密码项...，为其命名，将您的帐户短名称输入帐户，然后输入密码。在密码列表中突出显示它并获取有关它的信息。在 Attributes 按钮下输入它的种类作为通用键。之所以选择它，是因为它们的数量不多，而且搜索速度要快得多。无论您给它起什么名字，都必须在下面的“您的密码名称”中的代码中输入。

现在从applescript你可以像这样使用它......

```
set myPass to getPW()

do shell script "whatever" user name "username" password myPass with administrator privileges

on getPW()
    do shell script "security 2>&1 >/dev/null find-generic-password -gl \"Your Password Name\" | awk '{print $2}'"
    return (text 2 thru -2 of result)
end getPW 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:06:32.633

另一个解决方案是编辑

```
etc/sudoers 
```

配置文件。

该文件的设置可以允许特定用户以超级用户身份执行特定命令（使用...是...特定参数）。

如果命令本身不是问题，但问题是在代码中暴露了密码，那么这可能是解决方案。

应以超级用户身份**运行命令****visudo**编辑sudores文件。

***在您开始篡改 sudoers 之前，我强烈建议您了解 visudo 和 sudoers 语法的基本知识，因为弄乱该文件可能会导致系统出现严重问题。***

如您所知，您正在做的只是添加几行代码。

有关信息，您可以谷歌或从这里开始[http://www.sudo.ws/sudoers.man.html](http://www.sudo.ws/sudoers.man.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T12:59:22.560

如果您希望所有管理员帐户都能够在不输入密码的情况下使用 sudo 命令，请执行以下操作。

将 /private/etc/sudoers 文件中如下所示的行从

```
%admin  ALL=(ALL) ALL 
```

至

```
%admin  ALL=(ALL) NOPASSWD: ALL 
```

这种编辑可以通过使用终端和文本编辑应用程序来完成。打开终端应用程序并键入以下命令：

```
cd ~/desktop
sudo cp -n /etc/sudoers /etc/sudoers.orignal
sudo cp /etc/sudoers sudoers.txt
sudo chmod ug+w sudoers.txt
open sudoers.txt
visudo -c -f sudoers.txt
sudo cp -X sudoers.txt /etc/sudoers 
```

完成后，可以将桌面上的 sudoers.txt 文件放入垃圾箱。

要撤消更改，请使用以下命令：

```
sudo cp /etc/sudoers.original /etc/sudoers 
```

这是使用 OS X 10.10.1 测试的

如果您想对单个用户执行相同操作，请参阅： [http ://hints.macworld.com/article.php?story=20021202054815892](http://hints.macworld.com/article.php?story=20021202054815892)

下面简要说明每个命令的作用：

```
cd ~/desktop 
```

这可确保您在桌面文件夹中工作。

```
sudo cp -n /etc/sudoers /etc/sudoers.original 
```

这会备份您的 sudoers 文件。备份可用于撤消您的更改。-n 选项确保不会覆盖现有的 sudoers.original 文件。

```
sudo cp /etc/sudoers sudoers.txt 
```

将 sudoers 文件复制到您的桌面。添加了 .txt 扩展名，因此 OS X 将知道这是一个文本文件。

```
sudo chmod ug+w sudoers.txt 
```

更改文件的权限以允许写入访问。

```
open sudoers.txt 
```

在 TextEdit 应用程序中打开文件。您需要编辑文件并保存更改。

```
visudo -c -f sudoers.txt 
```

检查编辑的文件是否有语法错误。输出应该是`sudoers.txt: parsed OK`.

```
sudo cp -X sudoers.txt /etc/sudoers 
```

将文件复制回 /etc 目录。

# sql - 动态 SQL 过程，可以使用 while 循环插入表以控制行条目数

> ID：14598850
> 
> 赞同：0
> 
> 时间：2013-01-30T07:37:53.727
> 
> 标签：sql, sql-server, database, sql-server-2008, dynamic-sql

我有一个基于 SQL 的小挑战，我正在尝试解决它以更好地了解动态 SQL。

我的要求如下。

我创建了一个如下所示的表：

```
CREATE TABLE Prison_Doors
(
 DoorNum INT IDENTITY(1,1) PRIMARY KEY,
 DoorOpen BIT,
 DoorClosed BIT,
 Trips INT
 )
 GO 
```

我需要创建一个动态 SQL Proc 来插入 50 个门号并将它们分配为已关闭。

proc的预期结果：

```
|DoorNum|DoorOpen|DoorClosed|Trips|
|-------|--------|----------|-----|
|   1   |    0   |     1    |null |
|-------|--------|----------|-----|
|---------All the way to 50-------|
|-------|--------|----------|-----|
|   50  |    0   |     1    |null | 
```

这是我写的，但它没有插入：

```
BEGIN
DECLARE @SQL VARCHAR(8000)
DECLARE @Index INT
SET @Index=1

WHILE (@Index<=50)
BEGIN
    SET @SQL= 'INSERT INTO Prison_Doors(DoorNum,DoorOpen,DoorClosed)
                    VALUES('+CAST(@Index AS VARCHAR)+',0,1),'
    SET @Index=@Index+1
END

SET @SQL = SUBSTRING(@SQL, 1, LEN(@SQL)-1)
EXEC(@SQL) 
```

结尾

我想知道我做错了什么。

完成所有这些之后，我需要运行另一个循环，从一号门开始，每隔一扇门打开一次，然后将行程改为一，然后增加到每 3 扇门打开，行程变为 2，这种递增一直持续到所有门是打开的，然后将选择它所花费的旅行次数。

我希望有人可以帮助我，因为我是 Dynamic SQL 的新手，我只需要一些指导而不是完整的解决方案。

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:51:03.830

你得到的错误是因为你试图插入一个标识列`DoorNumber`：

```
DoorNum INT IDENTITY(1,1) PRIMARY KEY, 
```

从列列表中删除该列，而不是：

```
INSERT INTO Prison_Doors(DoorNum,DoorOpen,DoorClosed) 
```

删除该列`DoorNum`：

```
INSERT INTO Prison_Doors(DoorOpen,DoorClosed)
... 
```

* * *

**但是，**不需要动态 SQL 来执行此操作，您可以使用如下锚表执行此操作：

```
 WITH temp 
 AS
 (
   SELECT n
   FROM (VALUES(1), (2), (3), (4)) temp(n)
 ), nums
 AS
 (
   SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS n
   FROM temp t1, temp t2, temp t3
 )
 INSERT INTO Prison_Doors(DoorOpen, DoorClosed)
 SELECT 0 AS DoorOpen, 1 AS DoorClosed
 FROM nums
 WHERE n <= 50; 
```

## [现场演示。](https://data.stackexchange.com/stackoverflow/query/94050/dynamic-sql-procedure-that-can-insert-into-a-table-using-a-while-loop-to-control)

* * *

**更新：**

## 我的代码逐行做什么？

**生成数字序列：**

第一个问题是生成从 1 到 50 的 50 个数字的序列，我使用了一个只有四行从 1 到 4 的锚表，如下所示：

```
SELECT n
FROM (VALUES(1), (2), (3), (4)) temp(n); 
```

这种使用 SQL-Server-2008 的语法`VALUES`是新的，它被称为行值构造函数。在 之后`VALUES`，您分配表的别名和括号中的目标列，例如`temp(n)`。

对于旧版本，您必须使用类似的东西：

```
SELECT n
FROM 
(
   SELECT 1 AS n
   UNION ALL 
   SELECT 2
   UNION ALL
   SELECT 3
   UNION ALL 
   SELECT 4
) AS temp; 
```

这将只给你 4 行，但我们需要生成 50 行。这就是为什么我`CROSS JOIN`这个表使用了 3 次：

```
FROM temp t1, temp t2, temp t3 
```

它与

```
FROM temp t1
CROSS JOIN temp t2
CROSS JOIN temp t3 
```

这会将这些行乘以 64 次，4 行³ = 64 行：

```
1   1   1
1   2   1
1   3   1
1   4   1
2   1   1
2   2   1
2   3   1
2   4   1
....
3   1   4
3   2   4
3   3   4
3   4   4
4   1   4
4   2   4
4   3   4
4   4   4 
```

* * *

**功能的使用`ROW_NUMBER()`：**

然后使用[`ROW_NUMBER()`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)会给我们一个从 1 到 64 的排名数字，如下所示：

```
 WITH temp 
 AS
 (
   SELECT n
   FROM (VALUES(1), (2), (3), (4)) temp(n)
 )
 SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS n
 FROM temp t1, temp t2, temp t3; 
```

请注意：`ROW_NUMBER`需要一个`ORDER BY`子句，否则顺序无关紧要，所以我使用了`(SELECT 1)`.

还有另一种不使用 来生成序列号的方法`ROW_NUMBER`，它也取决于`CROSS JOIN`，具有如下锚表：

```
 WITH temp 
 AS
 (
   SELECT n
   FROM (
         VALUES(0), (1), (2), (3), (4), (5), (6), (7), (8), (9)
        ) temp(n)
 ), nums
 AS
 (
   SELECT t1.n * 100 + t2.n * 10 + t3.n + 1 AS n
   FROM temp t1, temp t2, temp t3
 )
 SELECT n
 FROM nums 
 ORDER BY n; 
```

[**另一种生成数字序列的方法**](https://data.stackexchange.com/stackoverflow/query/94095/another-way-for-generating-sequence-of-numbers)

* * *

**常用表表达式：**

CTE称为[通用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)，在SQL Server 2005中引入，是SQL Server支持的表表达式类型之一。其他三个是：

*   派生表，
*   意见，和
*   内联表值函数。

它有很多重要的优点。其中之一是让您创建一个虚拟表，以后可以重复使用它们，就像我所做的那样：

```
 WITH temp 
 AS
 (
   SELECT n
   FROM (VALUES(1), (2), (3), (4)) temp(n)
 ), nums
 AS
 (
   SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS n
   FROM temp t1, temp t2, temp t3
 )
 ... 
```

在这里，我定义了两个 CTE ，`temp`然后定义了另一个`nums`，`temp`所以这个 OL，你可以创建多个 CTE，只需放一个分号，然后是一个带有`AS`子句和两个的新 CTE `()`。

* * *

**使用从另一个表插入一个表`INSERT INTO ... SELECT ...`**

现在，我们有一个`nums`从 1 到 64 行的虚拟表，我们需要插入从 1 到 50 的行。

为此，您可以使用`INSERT INTO ... SELECT ...`.

请注意，`INSERT`子句中的列是可选的，但是如果这样做，则必须为每一行输入一个值，否则会出现错误，例如，如果您有四列，而`VALUES`子句中只输入了三个值或者在`SELECT`子句中，那么你会得到一个错误。这对于定义如下的 idenetityt 列无效：

```
Identity(1,1)
         ^ ^
         | |
         | ------------------The seed
         The start 
```

在这种情况下，您只需忽略子句中列列表中的该列`INSERT`，它将具有标识值。有一个选项可以让您手动插入一个值，就像在[@Raj's answer](https://stackoverflow.com/a/14599022/722783)中一样。

**请注意：**在我的回答中，我没有将序列号插入该列，而是将值插入 50 次。但是由于 Identity 列，实际数字会自动生成：

```
 ...
 INSERT INTO Prison_Doors(DoorOpen, DoorClosed)
 SELECT 0 AS DoorOpen, 1 AS DoorClosed
 FROM nums;
 WHERE n <= 50; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:51:54.813

首先，您已将 DoorNum 声明为 Identity，然后您尝试将值显式插入该列。SQL Server 不允许这样做，除非您选择

```
SET IDENTITY_INSERT ON 
```

试试这个查询。它应该插入你想要的 50 行

```
DECLARE @SQL VARCHAR(8000)
DECLARE @Index INT
SET @Index=1

WHILE (@Index<=50)
BEGIN
    SET @SQL= 'INSERT INTO Prison_Doors(DoorOpen,DoorClosed)VALUES(0,1)'
EXEC(@SQL)
SET @Index=@Index+1
END 
```

拉吉

# android - 如何在PhoneGap的LinkedIn墙上分享短信？

> ID：14598851
> 
> 赞同：3
> 
> 时间：2013-01-30T07:37:57.797
> 
> 标签：android, cordova, linkedin, phonegap-plugins

我正在PhoneGap 中开发一个应用程序，我想在Facebook、twitter 和LinkedIn 中共享文本消息。对于 ANDROID-LinkedIn，我正在搜索许多 Google 链接，但我得到了很好的链接。请帮助我，我在这里感到震惊

我正在实现这个示例：

```
<html>
    <head>
        <title>OAuthSimple w/ LinkedIn</title>
        <script src="OAuthSimple.js"></script>
        <script>
            /*
                You must edit the two following lines and put in your consumer key and shared secret
            */
            var consumer_key = "ibmay1qostgk";
            var shared_secret = "4HqeDRZ2ZKAvASlM";

            /*
                Nothing below here needs to be edited for the demo to operate
            */

            var oauth_info = {};
            var oauth = OAuthSimple(consumer_key, shared_secret);

            function parse_response(response, callback) 
            {
                response.replace(new RegExp("([^?=&]+)(=([^&]*))?", "g"), function($0, $1, $2, $3) { oauth_info[$1] = $3; });
                callback.call();
            }

            function authorize_url() 
            34{
                set_url("https://www.linkedin.com/uas/oauth/authenticate?oauth_token=" + oauth_info.oauth_token, document.getElementById("au"));
            }

            function access_token_url(pin) {
                oauth.reset();      
                var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/uas/oauth/accessToken", parameters: {oauth_verifier: pin}, signatures: oauth_info}).signed_url;

                set_url(url, document.getElementById("at"));
            }

            function fetch_profile_url() {
                oauth.reset();  

                var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/v1/people/~", signatures: oauth_info}).signed_url;

                set_url(url, document.getElementById("fp"));
            }

            function set_url(url, element) {
                element.value = url;

                var span = document.createElement("span");
                span.innerHTML = "&nbsp;&nbsp;<a href='" + url + "' target='_blank'>Open</a>";
                element.parentNode.insertBefore(span, element.nextSibling);
            }

            window.onload = function() {
                var url = oauth.sign({action: "GET", path: "https://api.linkedin.com/uas/oauth/requestToken", parameters: {oauth_callback: "oob"}}).signed_url;

                set_url(url, document.getElementById("rt"));
            }
        </script>
    </head>
    <body>
        <h1>OAuthSimple w/ LinkedIn</h1>
        <label for="rt">Request Token URL:</label> <input type="text" size="100" name="rt" id="rt" >
        <br><br>
        <label for="rtr">Request Token Response:</label><br><textarea rows="5" cols="75" name="rtr" id="rtr"></textarea>
        <br>
        <button onclick="javascript:parse_response(document.getElementById('rtr').value, authorize_url)">Parse Response</button>
        <br><br>
        <label for="au">Authorize URL:</label> <input type="text" size="100" name="au" id="au">
        <br><br>
        <label for="vp">Verifier PIN Code:</label> <input type="text" size="100" name="vp" id="vp">
        <button onclick="javascript:access_token_url(document.getElementById('vp').value)">Get Access Token URL</button>
        <br><br>
        <label for="at">Access Token URL:</label> <input type="text" size="100" name="at" id="at">
        <br><br>
        <label for="atr">Access Token Response:</label><br><textarea rows="5" cols="75" name="atr" id="atr"></textarea>
        <br>
        <button onclick="javascript:parse_response(document.getElementById('atr').value, fetch_profile_url)">Parse Response</button>
        <br><br>
        <label for="fp">Fetch Profile URL:</label> <input type="text" size="100" name="fp" id="fp">
    </body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:04:25.293

这是使用 Phonegap 登录和发送 msg linkedIn 的完整示例

```
ref = window.open('https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id=APIKEY&scope=w_messages r_network r_emailaddress r_fullprofile&state=APISECRET&redirect_uri=SOMEACTIVESITE','_blank','location=no');
    ref.addEventListener('loadstart', function(e){
        $.mobile.loading( 'show' );
        if(e.url.indexOf('?code=') >=0 ){
            if(e.url.match(/=[^]+&/)){
                var code = e.url.match(/=[^]+&/)[0].substring(1).replace('&','');
                window.sessionStorage.setItem('code', code);
                ref.close();

                $.ajax({
                    url: 'https://www.linkedin.com/uas/oauth2/accessToken?grant_type=authorization_code&code='+code+'&redirect_uri=http://janbeeangeles.com&client_id=jwwwdjplwubu&client_secret=ygMy3EpVcs6IAORE',
                    success: function(a){

                        $.ajax({
                            url : 'https://api.linkedin.com/v1/people/~/mailbox?oauth2_access_token='+a.access_token,
                            type: 'post',
                            headers : {
                                'Content-Type'  : 'application/json',
                                'x-li-format'   : 'json'
                            },
                            data: JSON.stringify({
                              "recipients": {
                                "values": [
                                {
                                  "person": {
                                    "_path": "/people/~",
                                   }
                                }]
                              },
                              "subject": "asdasdasd on your new position.",
                              "body": "You are certainly the best person for the job!"
                            }),
                            success: function(a){
                                alert(2222)
                            },
                            error: function(a){
                                alert(JSON.stringify(a))
                            }
                        })
                    },
                    error: function(a){
                        alert(JSON.stringify(a))
                    }
                })
            }
        }
    }); 
```

# java - java.lang.OutOfMemoryError 将文件读取到字节 [] 数组

> ID：14598857
> 
> 赞同：9
> 
> 时间：2013-01-30T07:38:24.847
> 
> 标签：java, arrays, io, out-of-memory

有没有更清洁和更快的方法来做到这一点：

```
BufferedReader inputReader = new BufferedReader(new InputStreamReader(context.openFileInput("data.txt")));
String inputString;
StringBuilder stringBuffer = new StringBuilder();
while ((inputString = inputReader.readLine()) != null) {
    stringBuffer.append(inputString + "\n");
}
text = stringBuffer.toString();
byte[] data = text.getBytes(); 
```

基本上我正在尝试将文件转换为`byte[]`，除非文件足够大，否则我会遇到内存不足错误。我一直在寻找解决[方案](https://stackoverflow.com/questions/9505025/byte-and-java-lang-outofmemoryerror-reading-file-by-bits)，我在这里尝试这样做，但没有奏效。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:45:11.230

几点建议：

1.  您不需要创建字符串生成器。您可以直接从文件中读取字节。
2.  如果您读取多个文件，即使不需要，也要检查内存中剩余的那些 byte[] 数组。
3.  最后使用 -Xmx 选项增加 Java 进程的最大内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:47:13.127

我们知道这个文件的大小，可以通过直接分配给定大小的字节数组而不是扩展它来节省一半的内存：

```
byte [] data = new byte[ (int) file.length() ];
FileInputStream fin = new FileInputStream(file);
int n = 0;
while ( (n = fin.read(data, n, data.length() - n) ) > 0); 
```

这将避免分配不必要的额外结构。字节数组只分配一次，并且从一开始就具有正确的大小。while 循环确保加载所有数据（`read(byte[], offset, length)`可能只读取文件的一部分，但返回读取的字节数）。

**澄清：**当 StringBuilder 用完时，它会分配一个比初始缓冲区大两倍的新缓冲区。目前，我们使用的内存量大约是最低要求的两倍。在最退化的情况下（最后一个字节不适合一些已经很大的缓冲区），可能需要接近最小 RAM 量的三倍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T07:43:59.363

如果您没有足够的内存来存储整个文件，您可以尝试重新考虑您的算法以在读取文件数据时处理文件数据，而无需构建大型`byte[]`数组数据。

如果你已经尝试过`java`通过参数来增加内存`-Xmx`，那么没有任何解决方案可以让你将数据存储在内存中，由于内存太大，内存无法定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:49:38.093

您正在将字节复制到 char （使用两倍的空间）并再次复制回字节。

```
InputStream in = context.openFileInput("data.txt");
ByteArrayOutputStream bais = new ByteArrayOutputStream();
byte[] bytes = new byte[8192];
for(int len; (lne = in.read(bytes) > 0;)
   bais.write(bytes, 0, len);
in.close();
return bais.toByteArray(); 
```

这将使您的内存需求减半，但仍可能意味着您的内存不足。在这种情况下，您必须

*   增加最大堆大小
*   逐步处理文件，而不是一次全部处理
*   使用内存映射文件，它允许您在不使用太多堆的情况下“加载”文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T07:51:45.797

这类似于[Java 中的 File to byte[]](https://stackoverflow.com/questions/858980/file-to-byte-in-java)

您当前正在读取字节，将它们转换为字符，然后尝试将它们转换回字节。从 Java API 中的 InputStreamReader 类：

> InputStreamReader 是从字节流到字符流的桥梁：它读取字节并将它们解码为字符。

仅以字节为单位读取会更有效。

一种方法是`ByteArrayInputStream`直接使用 .on`context.openFileInput()`或 Jakarta Commons `IOUtils.toByteArray(InputStream)`，或者如果您使用的是 JDK7，则可以使用`Files.readAllBytes(Path)`.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-30T11:36:16.523

“更清洁和更快的方法”是根本不这样做。它没有规模。一次处理一个文件。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-30T07:55:28.877

此解决方案将在加载之前测试可用内存...

```
File test = new File("c:/tmp/example.txt");

    long freeMemory = Runtime.getRuntime().freeMemory();
    if(test.length()<freeMemory) {
        byte[] bytes = new byte[(int) test.length()];
        FileChannel fc = new FileInputStream(test).getChannel();
        MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_ONLY, 0, (int) fc.size());

        while(mbb.hasRemaining()) {
            mbb.get(bytes);
        }
        fc.close();
    } 
```

# sql-server-2008-r2 - 想要按日期从 db 表中获取 MAX(ID)，但它在 sqlserver 2008 r2 中只返回相同的 ID

> ID：14598864
> 
> 赞同：0
> 
> 时间：2013-01-30T07:39:14.397
> 
> 标签：sql-server-2008-r2

我正在尝试从数据库表中获取最大 ID，并希望在 win 表单加载时显示它。我正在使用以下查询来获取最大 ID。

```
SELECT ISNULL(MAX(ID),0)+1  FROM StockMain WHERE VRDATE = '2013-01-30' 
```

上面应该返回今天的最大ID。例如，如果我第一次执行此语句，它将返回值'1'。在 ID = '1' 上保存第一条记录后，它应该给我 MAX(ID) = '2'。但它返回值 1。

任何建议或解决方案？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:51:14.523

疯狂的猜测......但是什么数据类型是`VRDATE`？它是否包含时间组件，还是只是一个日期？

如果它包含指示您何时保存记录的时间组件，它将不会通过`VRDATE = '2013-01-30'`检查，因为这默认为午夜的时间。由于时间不相同，所以它们不相等。

相反，请尝试：

```
SELECT ISNULL(MAX(ID),0)+1  
FROM StockMain 
WHERE VRDATE BETWEEN '2013-01-30' AND '2013-02-01' 
```

下一个问题...您是否考虑过使用`IDENTITY`列而不是手动管理 ID 值？

# ruby - 如何在 Windows 上安装 dctmruby（使用 ruby 访问 documentum）

> ID：14598869
> 
> 赞同：1
> 
> 时间：2013-01-30T07:39:54.933
> 
> 标签：ruby, documentum

我正在尝试使用在 Windows`ActiveDCTM`上访问。`Documentum`有两个相关的宝石：`activedctm`和`dctmruby`.

当我安装`dctmruby`时，出现错误：

```
checking for dmAPIInit() in -ldmcl40... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/RailsInstaller/Ruby1.9.3/bin/ruby
        --with-dctm-dir
        --without-dctm-dir
        --with-dctm-include
        --without-dctm-include=${dctm-dir}/include
        --with-dctm-lib
        --without-dctm-lib=${dctm-dir}/lib
        --with-myflag-dir
        --with-myflag-include
        --without-myflag-include=${myflag-dir}/include
        --with-myflag-lib
        --without-myflag-lib=${myflag-dir}/lib
        --with-dmcl40lib
        --without-dmcl40lib
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler
 failed to generate an executable file. (RuntimeError)
You have to install development tools first.
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:461:in `try_link
0'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:476:in `try_link
'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:619:in `try_func
'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:845:in `block in
 have_library'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:790:in `block in
 checking_for'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:284:in `block (2
 levels) in postpone'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:284:in `block in
 postpone'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:280:in `postpone
'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:789:in `checking
_for'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/mkmf.rb:840:in `have_lib
rary'
        from extconf.rb:22:in `<main>' 
```

有谁知道如何解决它，或者是否有另一种更好的方法来访问红宝石的文档？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:16:37.077

如果您找不到任何方法来完成这项工作，我可以建议您查看 Documentum Foundation Services (DFS)。DFS 基于 SOAP，因此您不需要任何本地库或旧版本的包。我要提醒的是，我使用它的所有经验都是使用 Java 或 .Net，不过，它们都包含生产力层，而不是使用原始 SOAP 调用。

如果您还没有，您可能还想查看[http://developer.emc.com 。](http://developer.emc.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:23:33.293

从未使用 Ruby 访问过 dctm，但它几乎肯定需要访问 dmcl40（基于 c 的库）和可能的 dfc（基于 java 的库）。出于兴趣，您连接到哪个版本的 documentum？

# scala - 元组元素的 Akka 2.1.0 类型检查

> ID：14598872
> 
> 赞同：2
> 
> 时间：2013-01-30T07:40:06.733
> 
> 标签：scala, akka, type-safety

使用`Akka 2.1.0`我正在从一个 Actor ( `ActorA`) 向另一个Actor ( ) 发送消息，`ActorB`并期望返回的消息是`Option[(String, String)]`. `ActorB`有一个 val 定义为 an`Enumeration`并且这将作为`Tuple`结果的第二个元素返回。 `ActorA`使用`Await.result().asInstanceOf[Option[(String, String)]`模式（我知道这是不好的阻塞行为，但不认为这解释了我看到的行为），并将结果分配给 val. 后来，当我尝试提取结果的第二个元素时，`Tuple`我得到了一个强制转换`scala.Enumeration#Val cannot be cast to java.lang.String`异常。在以前的版本中`Akka`没有出现这种情况，并且`Akka 2.1.0`我预计该`Await.result`操作会爆炸。谁能解释这里发生了什么？

```
object MyEnumeration extends Enumeration {
  type Enum = Value
  val Foo = Value("foo")
  val Bar = Value("bar")
}

case class ActorA extends Actor {
  implicit val timeout = Timeout(10000)
  val result = Await.result((ActorB ? MyMessage), timeout.duration).asInstanceOf[Option[(String, String)]]

  val validResult = result.get
  val validType = validResult._2 // this is of type Enumeration#Val not String

}

case class ActorB extends Actor {
  def myType = MyEnumeration.Foo
  def receive = {
  case MyMessage =>
      sender ! Option((validString, myType))
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:18:00.627

它实际上在 Akka 2.0.3 中不起作用。据我了解，您以不同方式解析收到的消息。

```
// enum
object E extends Enumeration { val a,b,c = Value }

// send 
case "Hello" => sender ! Some(("Hai", E.a))

// works
Await.result(rootActor ? "Hello", timeout.duration)
.asInstanceOf[Option[(String, String)]] match {
  case a: Option[Tuple2[_, _]] => // diff is here 
    println("" + a.get._2)
    a.get._2
}  

// does not work
Await.result(rootActor ? "Hello", timeout.duration)
.asInstanceOf[Option[(String, String)]] match {
  case a: Option[Tuple2[String, String]] => // diff is here
    println("" + a.get._2)
    a.get._2
} 
```

# java - 从数组创建多个数组

> ID：14598877
> 
> 赞同：-1
> 
> 时间：2013-01-30T07:40:44.500
> 
> 标签：java, arrays, string

我有一个数组，其中存储了一些数据。数组里面会有一些这样的数据

```
Alluser[0] = John || 20 || Student;

Alluser[1] = Will || 19 || Student; 
```

我想拆分数据并将一个用户安排到一个数组中。像这样的东西

```
 user0[0] = John;
 user0[1] = 20;
 user0[2] = Student; 
```

以后用户数会不断增加。但我不知道如何不断为新用户创建新数组。我尝试过这样的事情

```
for(int i=0;i<Alluser.length;i++){
      String[] user[i]= Alluser[i].split("||");
} 
```

我知道 String[] user[i] 是错误的，我只是没有真正构造正确的方法来处理这个问题。任何评论和回答将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T07:43:26.683

如果您需要一个需要增加大小的数组，请考虑[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html). 它是一个可调整大小的列表，内部结构类似于数组。

此外，您的`for`循环将无法工作，因为在那里定义的数组无法从循环外部访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T07:43:45.913

使用面向对象：

创建`class User`并存储`List<User> listOfUsers;`

在这种情况下，您将拥有一个用户列表，并可以访问每个项目、删除它或添加新用户。

```
class User{
    String name;
    int age;
    ...
} 
```

你也可以迭代：

```
for (User eachUser: listOfUsers){
    eachUser.getName();
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:44:08.550

既然您有可用的拆分，请利用它来发挥您的优势！

```
String[] user = getContent[i].split("||"); 
```

这会将用户数组设置为包含，例如：“John”、“19”、“Student”。

如您所见，存在间距问题，因此使用字符串“||”代替分割。

现在，要将其存储在外部，请执行以下操作：

```
String data = new String[getContent.length][3]; 
```

这样，您就可以将“拆分”放入 data[i] 中。

# android - 图库视图移除焦点 - Android

> ID：14598878
> 
> 赞同：0
> 
> 时间：2013-01-30T07:40:53.970
> 
> 标签：android

我想删除所选项目的图库中的焦点。我得到这样的输出，这是一张图片：![在此处输入图像描述](../Images/ab2703ffedc45ba974a74225f919d6e0.png)

这里选择了第一个项目。所以它看起来比第二张图像更暗。我想显示一个图像，因为它没有聚焦或选择。

请任何人帮助。我会很感激的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T09:16:36.743

创建一个 statelist 可绘制对象（请参阅[http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html](http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html)）并将“选定”状态自定义为您想要的任何状态，在您的情况下为透明。然后你提供这个drawable作为项目的背景。

编辑：

也看看画廊

```
 android:unselectedAlpha 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:55:15.287

你可以使用类似的东西

View.clearFocus()

```
LinearLayout myLayout = (LinearLayout) activity.findViewById(R.id.my_layout);
myLayout.requestFocus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:04:50.220

尝试将您的 xml 中的以下两个属性应用于您的画廊。

```
android:focusableInTouchMode="false"
android:focusable="false" 
```

# xamarin.ios - Xamarin monotouch 添加许可证

> ID：14598881
> 
> 赞同：0
> 
> 时间：2013-01-30T07:41:16.483
> 
> 标签：xamarin.ios, monodevelop, xamarin

我在我的 Mac 上安装了 monotouch，monodevelop 试用版。
我现在有一个许可证（序列号和文件），我想知道如何将许可证添加到 monotouch 和 monodeveloper，以便我可以在我的 iPhone 上运行我的应用程序？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:05:49.453

对于与激活和/或安装相关的任何问题，您应该联系 support@xamarin.com。

# c# - 将树视图中存在的 XML 数据拖放到 c# wpf 中的画布中？

> ID：14598882
> 
> 赞同：1
> 
> 时间：2013-01-30T07:41:15.123
> 
> 标签：c#, wpf

我想将树视图中存在的 xmldata 拖放到画布上，但无法得到它。我尝试了一些代码，可能会遗漏一些东西。下面是我的代码。

```
//handler for mouse move event
private void treeview_mousemove(object sender,MouseEventArgs e) 
{
    if (e.LeftButton == MouseButtonState.Pressed) 
    {
        DataObject data = new DataObject();
        data.SetData(DataFormats.StringFormat, treeView1.SelectedItem.ToString());
        data.SetData("string", treeView1.SelectedItem);
        data.SetData("Object", this);
        DragDrop.DoDragDrop(this,data, DragDropEffects.Copy);
    }
}

//handler for drop event attached in canvas (Don`t know what to do here)  getting 
InvalidOperationException {Logical tree depth exceeded while traversing the tree. This could indicate a cycle in the tree.}
private void treeview_drop(object sender,DragEventArgs e)
{
    e.Effects = DragDropEffects.None;
    UIElement uieve = (UIElement)e.Data.GetData("Object");
    if (e.Data.GetDataPresent(DataFormats.StringFormat))
    {
        canvas1.Children.Add(uieve);
        e.Effects = DragDropEffects.Copy;
    }
}

//handler for drag enter event in canvas
private void treeview_dragenter(object sender, DragEventArgs e)
{
    e.Effects = DragDropEffects.Copy;
}

//handler for dragover event
private void treview_dragover(object sender,DragEventArgs e)
{
    e.Effects = DragDropEffects.None;
    if (e.Data.GetDataPresent(DataFormats.StringFormat))
    {
        string data = (string)e.Data.GetData(DataFormats.StringFormat);
        e.Effects = DragDropEffects.Copy;
    }
} 
```

我想要的只是在画布中放置一个 xml 元素，但不知道该怎么做。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:19:48.500

我认为您可以通过项目的列表视图替换画布，定义 ItemTemplate 和 DataTemplate。我实际上在我的项目中使用它。拖放功能更简单。

```
<ListView>
    <ListView.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
        <DataTemplate>
             <!-- Your item representation -->
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

迈克尔，

# java - 在接收器代码中注销接收器

> ID：14598885
> 
> 赞同：1
> 
> 时间：2013-01-30T07:41:37.840
> 
> 标签：java, final

美好的一天，我动态构建了 android 短信发送和交付接收器，我收到泄漏错误，因为我需要在切换活动之前取消注册接收器。我想在收到响应时注销接收器。

此外，我无法覆盖 onPause 和 resume，因为此类是一个库并扩展了对话框，并且必须在代码中构造接收器。

这是代码：

```
private void sendSMS(String msg, String msisdn, String func) { 

   String SENT = "SMS_SENT";
   String DELIVERED = "SMS_DELIVERED";
   log("SMS FUNCTION: RUN");

    PendingIntent sentPI = PendingIntent.getBroadcast(mContext, 0,
           new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(mContext, 0,
           new Intent(DELIVERED), 0);

    BroadcastReceiver smsReceiverD=new BroadcastReceiver(){

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            log("SMS FUNCTION: SMS DELIVER CHECK");
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    break;
                case Activity.RESULT_CANCELED:
                    sendEventLog("Failed(SMS not delivered)"); 
                    break;
            }
        }

    };

    BroadcastReceiver smsReceiverS=new BroadcastReceiver(){

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            log("SMS FUNCTION: SEND CHECK");

            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    log("Failed(Generic failure)");
                    sendEventLog("moFailed(Generic failure)");  
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    sendEventLog("Failed(No service)");     
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    sendEventLog("Failed(Null PDU)");   
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    sendEventLog("Failed(Radio off)");  
                    break;
            }
        }

    };

   SmsManager MySmsManager = SmsManager.getDefault();
   sendEventLog("Send("+keyword+":"+msisdn+")");         

   if (msg != null) {
    log("SMS FUNCTION: SMS SEND");
       MySmsManager.sendTextMessage(msisdn, null, keyword, sentPI, deliveredPI);
       mContext.registerReceiver(smsReceiverD,new IntentFilter(DELIVERED));
       mContext.registerReceiver(smsReceiverS,new IntentFilter(SENT));
    }
   } 
```

我想添加

```
mContext.unregisterReceiver(smsReceiverS); 
```

在 smsReciverS.

它说

```
Cannot refer to a non-final variable smsReceiverS inside an inner class defined in a different method 
```

如果我确实做到了：

```
The local variable smsReceiverS may not have been initialized 
```

请有人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:48:12.010

在你的方法中使用`arg0.unregister(this);`where `arg0`is instanceof`Context``onReceive(Context arg0, Intent arg1)``smsReceiverS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:50:03.627

我认为在这种情况下，您可以使用`Handler`和`Runnable`任务来取消注册您的接收器：

```
private Handler mHandler = new Handler();

....

private Runnable unregisterIt = new Runnable() {

    @Override
    public void run() {
        mContext.unregisterReceiver(smsReceiverS);
    }
};

...
//to unregister just call this
mHanler.post(unregisterIt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:00:27.580

虽然 Waqas 的解决方案绝对是可能的（onReceive() 将在接收器运行的上下文中调用），而 Evos 的解决方案对我来说毫无意义（代码通过调用假设`Handler()`它在它所在的确切上下文中运行然后稍后应该运行），两个答案都没有解决原始问题，即关于最终变量的错误。

关键是您需要使 mContext 成为最终的，这样它就不会为您的即时广播接收器更改，因为它是一个匿名内部类，它将携带对它的隐式引用。但是，限制适用于最终变量；它们必须只初始化一次。

强制执行的分析是在编译时运行的，并且对 Android 机制没有更深入的了解，所以重要的是声明、构造函数和未来的进一步使用。

大概，你在声明

```
Activity mContext = null; 
```

这会导致稍后出现错误，因为您会再次分配一个值？

虽然 Waqas 的解决方案会起作用，但如果您想了解`final`. 并且我的假设是错误的，您将不得不使用有关使用`mContext`.

# c++ - 操作系统中 TCP 服务器的差异

> ID：14598887
> 
> 赞同：-2
> 
> 时间：2013-01-30T07:41:47.280
> 
> 标签：c++, qt, tcp, tcpclient

我在 windows 中开发了一个带有 qt 的 tcp-server。大约有 10-20 个客户端连接服务器，服务器和客户端之间有数据传输。每个连接的客户端都有不同的线程。服务器发送一个数据包，如果收到 ACK，则等待对该数据包的回复，然后发送下一个数据包。如果没有回复，则超时。如果客户端在 2 分钟内没有发送答案，我的服务器会再次发送相同的数据包。

没有问题。（顺便说一下我的电脑windows7家庭高级版）当我将我的应用程序带到另一台装有windows7 Ultimate的电脑上时，如果超时，而不是再次发送相同的数据包，它什么也不做。我的电脑和这台电脑的另一个区别是，这台电脑没有安装qt。我使用所需的 dll 运行我的应用程序。

什么会导致这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:11:32.553

首先是保持命名顺序：

*   IP发送*数据包*
*   TCP 发送*段*
*   一个套接字发送一个*数据流*。（概念不同于*std::stream*）

IP 实现为设备驱动程序，TCP 实现为在其上播放的驱动程序，soket 是链接到应用程序（可能是静态或动态）的库，所有 QT 东西都是使用套接字发送数据的库。

将流分成段的角色属于套接字库，将段分成数据包，枚举它们，检查是否缺少某些内容并请求重传的角色属于 TCP。

您的代码不应该处理所有这些：它只需要发送和接收数据，并管理底层套接字在持续和不可恢复的 TCP 故障情况下可能报告的错误情况。

定义网络超时不是您的代码角色（有30 多年的[完善和定义的标准](http://www.ietf.org/rfc/rfc793.txt)：自己做其他事情只会让网络管理员的生活变得一团糟，并且不会为您的应用程序增加任何价值）

您的问题很可能是您的时间和“传输控制”与底层 TCP 协商时间之间的冲突（这取决于双方驱动程序中的 avaliale 缓冲区大小，并且可能不仅取决于操作系统，还取决于随着时间的推移，操作系统实际上在做什么），这使得两个控制系统以一种不稳定的方式进行改造。

# javascript - EditableGrid - 使用 javascript 显示搜索过滤器和分页

> ID：14598892
> 
> 赞同：0
> 
> 时间：2013-01-30T07:42:15.250
> 
> 标签：javascript, search, filter, grid, editablegrid

我正在使用 EditableGrid 使用 Javascript 动态创建网格。

我能够正确显示网格。但是谁能告诉我，我如何添加搜索过滤器（搜索框）和分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:48:16.077

这应该可以解决问题：

```
<input type="text" id="searchField" /> 
```

```
var myGrid= new EditableGrid("myGrid", {
    // Whatever options you chose
});

var searchField = document.getElementById('searchField');
searchField.addEventListener(
    'keyup',
    function (){
        myGrid.filter(searchField.value);
    }
); 
```

# jquery - 这个怎么不显示？

> ID：14598893
> 
> 赞同：0
> 
> 时间：2013-01-30T07:42:15.347
> 
> 标签：jquery

Web Developer 将我的 JavaScript 显示为有效，但如果我运行该页面，这将不起作用。我尝试遵循 jquery-color 网站上的用法，但它每次都返回缺少的属性 id。我真的希望当我在大学学习 JavaScript 时，我有一个更好的导师。他在没有真正教过的情况下快速浏览了 jQuery 和大部分 JavaScript。

编辑＃1：我修复了代码中的（this）错误，但仍然不行。

这是jQuery的代码：

```
<script type="text/javascript">
        jQuery("li.site-links").hover(function(){
            jQuery(this).stop().animate({
                backgroundColor: "#000000"
            }, 1000 );
        });
    </script> 
```

和网站链接： http: [//lab.nmjgraphics.com](http://lab.nmjgraphics.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T07:42:47.397

您需要在选择器中更改`"this"`为`this`以访问事件源。在选择器中使用“this”将搜索标签名称 this ，就像`jQuery("input")`将获取所有带有 name 的标签`input`。

改变

```
 jQuery("this") 
```

到

```
 jQuery(this) 
```

您可以在[此处](http://jsfiddle.net/rajaadil/T8NU2/1/)`"this"`查看to之间的区别`this`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:43:52.870

试试这个：

```
jQuery(function(){
   jQuery("a.site-links").hover(function(){
        jQuery(this).closest('li').stop().animate({
            backgroundColor: "#000000"
        }, 1000 );
    },function(){
        jQuery(this).closest('li').stop().animate({
        backgroundColor: "transparent"
    }, 1000 );
    });
 }); 
```

您可以尝试使用`.parent('li')`

或试试这个：

```
jQuery(function(){
   jQuery("a.site-links").parent('li').hover(function(){
        jQuery(this).stop().animate({
            backgroundColor: "#000000"
        }, 1000 );
    },function(){
        jQuery(this).closest('li').stop().animate({
        backgroundColor: "transparent"
    }, 1000 );
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:58:32.333

首先：您的选择器错误。你没有`<a>`.site-link。你有`<li><a>`一个 .site-link

所以：

```
$(".site-links").hover(function(){
jQuery(this).parent().stop().animate({
    backgroundColor: "#000"
    }, 1000 );
}); 
```

这是一个不透明的演示：http: [//jsfiddle.net/2VgBa/](http://jsfiddle.net/2VgBa/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:00:42.160

除了`$("this")`要`$(this)`修复，

`jQuery("li.site-links")`查找`li`带有 class的 a `site-links`，但在您的实时站点上没有，因此*此*选择器不会选择任何内容。

要解决此问题，这些中的任何一个都可以使用

*   将选择器更改为以any`"li .site-links"`为目标，或`.site-links``li`
*   将`site-links`类添加到`li`( `<li class="site-links">`)，或
*   将选择器更改为以class`"a.site-links`为目标。`a``site-links`

* * *

此外，您尝试在每次悬停时将背景颜色设置为黑色，但您从不撤消动画。那是你要的吗？也许你想要类似的东西

```
jQuery("li.site-links").hover(function(){
    jQuery(this).stop().animate({
        backgroundColor: "rgb(79, 89, 100)"
    }, 1000 );
},function(){
    jQuery(this).stop().animate({
        // color alpha not supported in IE8: http://caniuse.com/#search=rgba
        backgroundColor: "rgba(79, 89, 100, 0)"
    }, 1000 );
}); 
```

* * *

如果在 IE<10（没有动画，背景突然变化）中减少体验不是问题，您应该使用 CSS 过渡，因为它们可以过渡任何类型的背景（不仅仅是颜色）并且不需要 javascript：

```
#menu-bar li{
  transition: 1s;
  -webkit-transition: 1s;
  background: url("../imgs/menu-normal.png");
}

#menu-bar li:hover{
  background: url("../imgs/menu-hover.png");
} 
```

# android - 如何在 Paypal 沙箱环境中将 API 凭证与 APP Id 关联起来

> ID：14598894
> 
> 赞同：1
> 
> 时间：2013-01-30T07:42:23.240
> 
> 标签：android, paypal

我在[https://developer.paypal.com/](https://developer.paypal.com/)上注册并获得了 3 条信息

*   API 用户名
*   API 密码
*   签名

API 密码签名

我正在开发一个安卓应用程序。我想与 Paypal 集成。Android 开发人员文档说您需要 AppId。我希望它应该由相同的用户名生成，我已经生成了上述信息。但我无法弄清楚如何生成 AppId。我可以在上面提到的 URL 中找到一个链接。有什么帮助吗？或链接阅读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:35:39.913

对于沙盒，AppID 为 APP-80W284485P519543T

请参阅此页面上图 5 正下方的 doco：

[https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-sandbox-getting-started-guide](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-sandbox-getting-started-guide)

# ruby-on-rails - 使用茧自动以嵌套形式添加子项

> ID：14598899
> 
> 赞同：3
> 
> 时间：2013-01-30T07:42:59.720
> 
> 标签：ruby-on-rails, cocoon-gem

假设我有这些模型，我打算在同一个表单上添加/删除：

```
class Survey < ActiveRecord::Base
  has_many :questions
end

class Question < ActiveRecord::Base
  belongs_to :survey
  has_many :answers
end

class Answer < ActiveRecord::Base
  belongs_to :question
end 
```

我已经让 Cocoon 使用“添加问题”链接，然后使用“添加答案”链接，单击该链接时，会相应地添加新项目。

我想知道的是，是否可以让 Cocoon 在单击链接时自动添加“子”嵌套项。例如（使用上述模型示例），当用户点击“添加问题”链接时，我想在创建“新问题”记录后自动创建“新答案”记录。

我找到了这个链接（[Rails - Dynamically build deep nested objects (Cocoon / nested_form)](https://stackoverflow.com/questions/12709331/rails-dynamically-build-deeply-nested-objects-cocoon-nested-form)），但我无法完全理解。

Cocoon 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T03:20:59.917

```
$(document).ready(function() {
  $("a.add_fields").click();
}); 
```

这对我有用。

# ruby-on-rails-3 - RailsAdmin 设置不同的默认设计用户模型

> ID：14598906
> 
> 赞同：2
> 
> 时间：2013-01-30T07:43:37.840
> 
> 标签：ruby-on-rails-3, devise, rails-admin

我有两个不同的设计用户模型，User 和 AdminUser，这最初来自 ActiveAdmin 设置。

我现在已经切换到 RailsAdmin，我希望默认用户模型是 AdminUser，并防止 User 模型访问管理页面。目前在任一模式下登录都将允许访问。

路线.rb

```
devise_for :admin_users
mount RailsAdmin::Engine => '/admin', :as => 'rails_admin' 
devise_for :users 
```

# postgresql - Postgres 配置指向 centos 上的加密文件系统

> ID：14598915
> 
> 赞同：0
> 
> 时间：2013-01-30T07:44:15.843
> 
> 标签：postgresql

我正在开发centos 6.2 版本。我想用加密的文件系统配置 postgres。我使用 LUKS 在 centos 上创建了一个加密分区。现在我想用这个挂载的分区初始化数据库集群。但我收到以下错误。

```
bash-4.1$ initdb -D /mnt/cryptofs/data/
could not change directory to "/root/dimple/encryption"
The files belonging to this database system will be owned by user "postgres".
This user must also own the server process.

The database cluster will be initialized with locale en_US.UTF-8.
The default database encoding has accordingly been set to UTF8.
The default text search configuration will be set to "english".

initdb: directory "/mnt/cryptofs/data" exists but is not empty
If you want to create a new database system, either remove or empty
the directory "/mnt/cryptofs/data" or run initdb
with an argument other than "/mnt/cryptofs/data". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:53:42.567

您指定`PGDATA`为 be `/mnt/cryptofs/data/`，而`initdb`抱怨 bout `/root/dimple/encryption`，这让我认为：

*   `/mnt/cryptofs/data/`实际上是一个符号链接；
*   `/root/dimple/encryption`您对该目录没有适当的权限；
*   里面有一些文件`/mnt/cryptofs/data/`。确保它完全是空的，没有隐藏文件，也没有`lost+found`目录。

最好看看什么是`/mnt/cryptofs/data/`权限以及权限是什么。

# windows - 如何在cmd中调用嵌套程序

> ID：14598916
> 
> 赞同：1
> 
> 时间：2013-01-30T07:44:19.813
> 
> 标签：windows, shell, batch-file, cmd

程序 A(cmd.exe \C)（接受 1 个参数）

程序 B：（接受 1 个或多个参数）

C1,C2,C3, ... : agruments 列表

如果我输入`A B C1 C2 C3`cmd 提示符，所需的解释是

`A (B (C1 C2 C3))` （C是B的论据，B是A的论据）

But NOT AS `A (B) (C1) (C2) (C3)`(B,C1,C2, C3, .... 是 A 的参数)

我应该如何在 cmd 提示符下转义/重定向/管道？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T07:53:19.300

根据[Microsoft 的文档](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)，您可以将`|`运算符用于管道。

您需要将命令重写为：

```
B C1 C2 C3 | A 
```

希望这可以帮助。

* * *

**更新**

自从您更新了问题以来，我想您正在尝试执行以下操作：

```
cmd.exe /C B C1 C2 C3 
```

您可以使用转义特殊字符`^`

或尝试像这样引用字符串：

```
cmd.exe /C "B C1 C2 C3" 
```

**更新 2**

如果你对`cmd.exe /C`引号有疑问（例如 B、C1、C2、C3 包含空格），你应该用另一对引号将整个命令括起来

```
cmd.exe /C ""B" "C1" "C2" "C3"" 
```

仅供参考，在`Processing quotation marks`微软[文档中关于 cmd.exe](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cmd.mspx?mfr=true)的部分：

> 如果您指定 /c 或 /k，则 cmd 会处理字符串的其余部分，并且仅当满足以下所有条件时才会保留引号：
> 
> *   您不使用 /s。
> *   您只使用了一组引号。
> *   请勿在引号内使用任何特殊字符（例如：&<>( ) @ ^ |）。
> *   您在引号内使用一个或多个空白字符。
> *   引号内的字符串是可执行文件的名称。
> 
> 如果不满足前面的条件，则通过检查第一个字符来处理字符串，以验证它是否是左引号。如果第一个字符是左引号，则它与右引号一起被剥离。保留右引号后的任何文本。

您可能还想阅读[语法：转义字符、分隔符和引号](http://ss64.com/nt/syntax-esc.html)：

> 启动需要“引号”的程序路径中带有空格的批处理脚本
> 
> `CMD /k ""c:\batch files\test.cmd" "Parameter 1 with space" "Parameter2 with space""`

# ios - 在捆绑包 NSBundle 中找不到名为“Storyboard.storyboard”的故事板

> ID：14598917
> 
> 赞同：2
> 
> 时间：2013-01-30T07:44:22.793
> 
> 标签：ios, storyboard, nsbundle

我在一个 iOS 项目中创建了一个新目标，并添加了一些文件以及一个新的故事板文件。但是在模拟器中运行时（我没有尝试过该设备）它`UIApplicationMain(argc, argv, nil, NSStringFromClass([PKPreprocessAppDelegate class]))`在 main.c 中呕吐：

```
(lldb) po $eax 

(unsigned int) $1 = 151596752 Could not find a storyboard named 'Storyboard.storyboard' 
in bundle NSBundle </Users/XXX/Library/Application Support/iPhone Simulator/6.0/Applications/007281D7-F09F-482A-A57A-CEEC1C65176B/XXXXX Preprocess.app> (loaded) 
```

plist 在 key 下有一个匹配的 Storyboard.storyboard `UIMainStoryboardFile~iphone`。我还检查了`Copy Bundle Resources`是否列出了该故事文件。在捆绑包中，文件位于目录中`en.lproj`（尽管命名为`Storyboard.storyboardc`）。我什至尝试从`en.lproj`目录中复制出来，但无济于事。

编辑：我也试过 plist 下的 key`UIMainStoryboardFile`仍然不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T08:17:02.930

从评论部分：

您可以单击您的项目 -> 目标 -> iPhone/iPod 部署信息，然后查看您的故事板是否列在那里？此外，单击您的故事板文件 -> 显示文件检查器 -> 目标成员，确保项目上有复选标记。

# php - 在按钮单击时使用 javascript 隐藏 ul，在按钮单击时也将值插入到 mysql

> ID：14598918
> 
> 赞同：0
> 
> 时间：2013-01-30T07:44:21.750
> 
> 标签：php, javascript, mysql

如何在 php 中隐藏 ul 点击按钮？>

```
 <li style='width:115px;margin-left:7px;word-wrap:break-word;'><?php echo  $row['title'];?></li>
                            <li style='width:90px;margin-left:7px;word-wrap:break-word;'><?php echo  $row['status'];?></li>                    
                            <li style='width:80px;margin-left:7px;word-wrap:break-word;'><?php echo  $row['added_date'];?></li>
                            <li style="width:40px;text-align:left;margin-left:5px;"><a href="<?php echo $url;?>?p=<?php echo $currentPage;?>&show=1&guest_id=<?php echo $guestId;?>&enquiry_id=<?php echo $enquiry_id;?>&pid=<?php echo $proposalId;?>"  style="text-decoration:none;" >Edit</a></li> 
                        <li style="width:70px;text-align:left;"><a id="link" name="link" href="addguestinformation.php?enq=<?php echo $row['enq_id'];?>&pid=<?php echo $proposalId; ?>"  style="text-decoration:none;" >Booking</a></li> 
                            <!--<li style="width:70px;text-align:left;"><button id="bookingconfirm" name="bookingconfirm" class="button" type="button" onclick="bookingForm(<?php //echo $row['enq_id']?>);">Booking</button>-->

                          </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:40:15.807

单独使用 php，如果不重新加载页面，您将无法真正做到这一点，现在这不是那么用户友好，但是[Jquery](http://jquery.com/)是一个 javascript 库，可以为您做到这一点

```
 //Gets the referance of the DOM Object by using the ID 
    $('#hideButton').click(function(e){

    //prevents the default action of the button
        e.preventDefault();

    //Hides the list
        $('#foo').fadeOut('slow', function(b){
           //What to do once the list has faded out
            alert('hidden');
        });
    }); 
```

[单击此处](http://jsfiddle.net/yq69X/1/)获取有效的 JSfiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:51:39.353

使用 jQuery 你可以隐藏元素 UL

```
    $('ul').on('click',function(){
            this.fadeout('slow');//点击Ul时会隐藏Ul
    });

```

```
 to hide UL with attribute Id use 
```

```
     $('#hide').on('点击',function(){
            this.fadeOut('slow');

    });

```

# c# - 统计 SQL 结果并输出结果数据

> ID：14598922
> 
> 赞同：0
> 
> 时间：2013-01-30T07:44:37.163
> 
> 标签：c#, asp.net, sql, select, count

我尝试做的是，计算我在这个 SQL 语句中的行数，以及想要将数据检索到`Repeater`. 这是`ASP.NET`/ `C#`。

```
SELECT COUNT(*) AS 'numbersOfOrdres' 
FROM customers 
INNER JOIN orders ON customers.customer_id = orders.order_customer_id 
```

好像不行，一直报错`"Does not contain 'THEN MY FIELD NAME'`在中继器中收到错误。

编辑：中继器代码

```
<asp:Repeater ID="customerOrdersRepeater" runat="server">
<HeaderTemplate>
    <table>
    <tr>
        <td><b>Customer name</b></td><td><b>Customer adresse</b></td><td>Numbers of orders</td>
    </tr>
</HeaderTemplate>
<ItemTemplate>
    <tr>
        <td><%# Eval("customer_name") %></td><td><%# Eval("customer_adresse") %></td><td><%# Eval("numbersOfOrdres") %></td>
    </tr>
</ItemTemplate>
<FooterTemplate>
    </table>
</FooterTemplate> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:03:50.413

您需要使用`GROUP BY`. 看起来您希望每个唯一的客户/客户地址都有一行。因此，假设这些被保留`customers.name`并且`customers.adresse`您的查询将是

```
SELECT customers.name AS customer_name, customers.adresse AS customer_adresse, 
    COUNT(*) AS 'numbersOfOrdres' 
FROM customers 
INNER JOIN orders ON customers.customer_id = orders.order_customer_id
GROUP BY customers.name, customers.adresse 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:04:52.700

如果我了解您要做什么，我认为您需要使用 group by。

这就是我想你想看到的

```
Customer 1, customer_1_address, 3
Customer 2, customer_2_address, 1
Customer 3, customer_3_address, 5 
```

假设有 3 个客户，分别有 3、1 和 5 个订单。

如果是这样，一个 group by 可能会得到你想要的，即

```
select 
  customer_name,
  customer_address,
  count(*)
from
  customers
join
  orders
on customers.cust_id = orders.cust_id
group by customer_name, customer_address 
```

可能有更有效的方式来说明分组依据，即在 su 查询中对 cust_id 进行分组，然后加入该查询以获取客户姓名和地址。假设上述选择对您有用，但我会为您自己留下进一步的改进。

# c++ - Qt/C++ 中 WithEvents VBA 的等价物

> ID：14598923
> 
> 赞同：0
> 
> 时间：2013-01-30T07:44:48.683
> 
> 标签：c++, qt, vba, com, activex

我正在将 Excel 宏移植到 Qt/C++。

该宏使用 ActiveX 和 COM 与另一个应用程序通信（[Brüel & Kjaer](http://www.bkhome.com/)的[Pulse Labshop](http://www.bksv.com/products/pulse-analyzer/pulse-platform/pulse-labshop.aspx)）进行通信。

Excel 宏通过`WithEvents`变量拦截 Labshop 通知。

如何在 C++ 中实现相同的行为？Qt 信号/槽机制在这里似乎是不可能的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:16:14.080

`WithEvents`[是在 VB 和 VBA 中用于调用 VB 运行时中的代码的关键字，该代码执行使用COM 可连接对象体系结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686567%28v=vs.85%29.aspx)设置回调机制所需的一切。

您需要阅读此架构及其相关接口`IConnectionPoint`等；在 C++ 代码中实现事件接收器接口；然后添加代码以使用 Pulse Labshop 的事件源注册您的接收器。

所有这些工作都是用一个“魔术”关键字完成的，这是 VB 在当时如此受欢迎的一个很好的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:55:01.413

实际上 Qt 可以从 dll 和 tlb 生成特定的 QAxObject。

对于这个项目，供应商给了我一个 tlb 文件。

在专业文件中：

```
TYPELIBS = lib/Pulse.tlb
TYPELIBS = $$system( dumpcpp lib/Pulse.tlb -nometaobject -o src/controller/Pulse ) 
```

然后生成一个 Pulse.h 文件。这些类有插槽和信号。所以很容易拦截事件。

它不起作用的原因是 Pulse Labshop 许可证已过期。

# wcf - 异常类型：ThreadAbortException

> ID：14598929
> 
> 赞同：2
> 
> 时间：2013-01-30T07:45:13.143
> 
> 标签：wcf, iis

我们有 WCF 服务，它在开发环境中工作。当我们在生产环境中部署时，我们面临以下错误：

```
Application information: 
    Application domain: /LM/w3svc/1/root/service-1-130039569765206325 
    Trust level: Full 
    Application Virtual Path: /service 
    Application Path: C:\inetpub\wwwroot\service\ 
    Machine name: DELTA 

Process information: 
    Process ID: 1320 
    Process name: w3wp.exe 
    Account name: NT AUTHORITY\NETWORK SERVICE 

Exception information: 
    Exception type: ThreadAbortException 
    Exception message: Thread was being aborted.
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
   at System.Web.HttpApplication.ApplicationStepManager.ResumeSteps(Exception error)
   at System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) 
```

请帮助我们找到解决上述问题的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:42:21.160

看起来您的 IIS 无法为应用程序分配足够的内存并且线程被中止。它是 IIS 配置问题，而不是您的代码问题。尝试重新创建虚拟目录并创建一个条目。

# javascript - 在执行其他代码之后执行的一段代码

> ID：14598932
> 
> 赞同：0
> 
> 时间：2013-01-30T07:45:21.903
> 
> 标签：javascript, jquery

我有一段代码要在另一段代码之后执行。现在我正在使用 setTimeout 但这不是一个好的解决方案。

例如，我正在使用一个文本编辑器，它当然需要时间进行初始化。

```
myTextEditor.initialize();
setHeightToMyTextEditor(); 
```

在此示例中，myTextEditor 的高度不正确。它保持不变，因为文本编辑器仍未初始化。所以，我使用 setTimeout 并在 3 秒后执行 setHeightToMyTextEditor() 。但是，如果有人的互联网速度慢得多，我想这将是一个问题。

那么，如何让 setHeightToMyTextEditor() 在文本编辑器初始化后执行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:49:44.793

所以你必须把它写在初始化的回调函数中。

请参考 jquery 回调教程。

```
http://api.jquery.com/jQuery.Callbacks/ 
```

例子 ：

```
 $(document).ready(function(){
  $("button").click(function(){
    $("p").hide("slow",function(){
      alert("The paragraph is now hidden");
    });
  });
}); 
```

# javascript - 什么时候在 js 中使用 == 而不是 === 是个好主意？

> ID：14598933
> 
> 赞同：1
> 
> 时间：2013-01-30T07:45:33.393
> 
> 标签：javascript

`===`比较两个值并确保类型相同，`==`而不关心类型。在“JavaScript 的优秀部分”一书中`==`如果我没记错的话，

那么当你需要使用`==`而不是时，你能给出用例的例子`===`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:48:53.863

如果您知道比较是相同的类型，则`==`与 相同`===`，但为您节省一个字符。

例如，您可以只做`typeof foo == 'function'`而不是`typeof foo === 'function'`, 因为`typeof`将始终返回一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T07:50:03.047

正如您所指出的，`==`比较两个对象的值，同时`===`比较类型。

弱类型的问题是你不能总是 100% 确定变量可能是什么类型。例如，您可能想从字符串中提取一个数字。随着您的代码变得越来越复杂，跟踪代码中哪些位置的变量是什么类型变得越来越困难。

于是进来了`==`。`"1" == 1`返回真，但 `"1" === 1`不是。这通常是一件好事。虽然最终是个人选择使用哪个运算符的问题，但普遍接受的用法是`==`默认使用，`===`当这根本不够用时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T07:48:37.947

当您要检查值和类型时，请使用`===`. 如果您只想检查值使用`==`

有关[javascript 中比较运算符的更多信息](http://www.w3schools.com/js/js_comparisons.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:10:21.467

你的问题，强调我的：

> **...当您需要**使用`==`而不是时，您能否举例说明用例`===`？

这是一个加载的问题。`==`你可以通过结合其他代码来模拟`===`，只要你能做到，你就永远不会真正“需要” `==`。这有点像询问您“需要”的情况`++`，可能是因为您更喜欢将其写为`foo += 1`.

您的标题提出了一个更实际的问题：

> 什么时候在 js 中使用 == 而不是 === 是个好主意？

每当您发现自己在模仿 with 的行为时`==`，`===`您可能应该只是在使用`==`. 这包括大多数情况下，您将操作的双方都转换为相同的类型，然后与`===`. 这就是它的`==`用途，为什么不使用它？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T07:53:48.940

由于您是专门要求示例，而不是解释......我最常见的用例`===`是这样的：

```
function isFoo(val) {
    if(val) // checks val 'exists'
    {
        return (val == 'foo'); // returns true or false
    }
    //'returns' undefined
}

var checkResult = isFoo('bar');

if(checkResult  === true) {
    alert('The value is foo');
}
else if(checkResult === false) {
    alert('The value exists, but is not foo');
}
else { // result was undefined
    alert('No value was provided, or it was null/undefined/false');
} 
```

这是一种懒惰的方式，但效果很好。在实践中，通常您很少*需要*使用`==`，您更有可能*需要*使用`===`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T07:55:08.710

`===`使用and运算符几乎总是更好`!==`。

`==`and运算符会进行类型强制，`!=`例如。他们将强制将字符串评估为数字。

而在 的情况下`===`，由于字符串“1”与数值 1 不同，所以结果为假。

[也](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)见此。

# ios - 如果文件存在，不要保存到文件 NSFileManager

> ID：14598934
> 
> 赞同：2
> 
> 时间：2013-01-30T07:45:36.873
> 
> 标签：ios, nsfilemanager

我有一个 NSFileManager 搜索文件，如果文件不存在，它会创建一个文件，如果文件存在，它会写入文件。但我想要的是，如果文件存在，它就不会写入它。这是我的代码。

```
NSString *docPath =[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
NSLog(@"%@", docPath);
NSString *results=[docPath stringByAppendingPathComponent:@"results.csv"];

if (![[NSFileManager defaultManager] fileExistsAtPath:results]) {
    [[NSFileManager defaultManager]
     createFileAtPath:results contents:nil attributes:nil];
}
NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:results];
[fileHandle seekToEndOfFile];
[fileHandle writeData:[save dataUsingEncoding:NSUTF8StringEncoding]];
[fileHandle closeFile];
NSLog(@"info saved"); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T06:48:18.313

您应该接受 Flexicoder 的回答，但显然，如果`save`是 a `NSString`，您可以稍微简化一下：

```
NSString *docPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *results = [docPath stringByAppendingPathComponent:@"results.csv"];

if (![[NSFileManager defaultManager] fileExistsAtPath:results])
    [save writeToFile:results atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T10:40:04.597

将所有代码包含在 if 语句中

```
NSString *docPath =[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0];
NSLog(@"%@", docPath);
NSString *results=[docPath stringByAppendingPathComponent:@"results.csv"];

if (![[NSFileManager defaultManager] fileExistsAtPath:results]) {
    [[NSFileManager defaultManager]
 createFileAtPath:results contents:nil attributes:nil];
    NSFileHandle *fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:results];
    [fileHandle seekToEndOfFile];
    [fileHandle writeData:[save dataUsingEncoding:NSUTF8StringEncoding]];
    [fileHandle closeFile];
    NSLog(@"info saved");
} 
```

# android - Android Fragment Tab Pager Jerk 问题

> ID：14598936
> 
> 赞同：2
> 
> 时间：2013-01-30T07:45:42.647
> 
> 标签：android, android-fragments, android-viewpager, android-tabs

我正在使用**ViewPager**和**TabHost**来更改带有**标签触摸/滑动效果**的片段。但问题是，我在滑动手势时在片段过渡之间出现了 Jerk。可能是什么问题呢？

我使用了在**Support4Demos**项目中使用的**FragmentTabsPager**类。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:31:20.717

此问题已解决。**FragmentActivity的****.xml**文件中存在问题。请参阅下面的布局代码并注意**LinearLayout**声明中的注释。

 ****```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" <!-- Replacing layout_height="match_parent" resolved my issue-->
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0" />

        <android.support.v4.view.ViewPager
            android:id="@+id/viewPager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1" />
    </LinearLayout>
</TabHost> 
```******

# php - 我们如何在我们的 drupal 7 模块中加载 php sdk 库

> ID：14598943
> 
> 赞同：1
> 
> 时间：2013-01-30T07:46:17.590
> 
> 标签：php, drupal, drupal-7

谁能告诉我如何在我们的drupal 7模块中加载php sdk库？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T15:49:19.370

我不确定您所说的“php sdk 库”（哪个 SDK？）是什么意思，但我会提供有关包含库的一般信息。

您可能希望创建对[库 API](https://drupal.org/project/libraries)模块的依赖项。这为您提供了一种轻松访问库并定义您需要的 SDK 版本的方法。

您要访问的库将放在`libraries`子文件夹中。例如，如果我想使用“Foobar”SDK，我会将文件放在`sites/all/libraries/foobar`.

以下是使用库 API 的文档： [https ://drupal.org/node/1342238](https://drupal.org/node/1342238)

> **正在加载**
> 
> 要从模块内部加载库，只需执行以下操作：

```
<?php
libraries_load($name);
?> 
```

就是这么简单！所以继续我上面的例子，我需要做的就是添加`libraries_load('foobar')`。

# java - 是否有任何与 EXT.NET 框架等效的 Java？

> ID：14598947
> 
> 赞同：1
> 
> 时间：2013-01-30T07:46:40.163
> 
> 标签：java, extjs, ext.net

EXT.NET 框架给我留下了深刻的印象，其中包含大量的控件和 EXT.js 的使用。是否有类似 EXT.NET 的框架，但适用于 Java 方面的技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:05:10.210

还没有（用于控制）。C#很好的封装了很多控件。但是我认为控件对于真正的开发者来说并不是那么重要。java有很多开源框架框架。C#控件，我觉得只是表面，好用，VS2010确实是一款不错的开发工具。Strut2 Hibernate Spring等。对不起，谷歌翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T08:43:45.183

看看 ExtGxt，它基于 Java 和 GWT。完成服务器端编码，编译后转换为java脚本。对于具有良好 Java 知识的人来说很容易。

[来自 Sencha 的 ExtGxt](http://www.sencha.com/products/gxt/)

# mysql - MySQL外键无法创建表错误：121

> ID：14598948
> 
> 赞同：0
> 
> 时间：2013-01-30T07:46:40.953
> 
> 标签：mysql, foreign-keys

我有两张桌子

```
CREATE TABLE `patient_doctor_decision` (
  `id` bigint(50) NOT NULL,
  `help_entity_id` bigint(50) NOT NULL,
  `description` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `help_entity` (
  `id` bigint(50) NOT NULL AUTO_INCREMENT,
  `type` int(50) NOT NULL,
  `comments` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

两张表都已经有很多数据了。

我想在 patient_doctor_decision.help_entity_id 字段和 help_entity.id 字段上建立 FK 关系。

```
ALTER TABLE `patient_doctor_decision`  
  ADD CONSTRAINT `fk_help_entity` FOREIGN KEY (`help_entity_id`) REFERENCES `help_entity`(`id`); 
```

我已经验证了外键是有效的，并且没有外键在引用的表中作为主键不存在。

```
SELECT * FROM patient_doctor_decision d WHERE d.help_entity_id NOT IN (
    SELECT id FROM help_entity); 
```

返回 0 行。

但是当我执行上面提到的 Alter 语句时，我得到了这个错误

```
ERROR 1005: Can't create table 'mydb.#sql-57c_9' (errno: 121) 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:23:49.560

好吧，我没有得到确切的工作，但更改外键约束名称对我有用。

# javascript - 自动间距输入字段值

> ID：14598949
> 
> 赞同：0
> 
> 时间：2013-01-30T07:46:41.990
> 
> 标签：javascript, jquery

我正在创建一个付款表格，其中一个字段是 VISA、万事达卡等的卡号。我的问题是如何自动间隔用户输入的值（卡号）。

假设我输入：

```
4242 4242 4242 4242 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:48:57.723

你正在寻找的是一个输入掩码..你可以试试这个**[Input Mask jQuery](https://github.com/RobinHerbots/jquery.inputmask)**

```
<input id="creditCard" />

$(document).ready(function(){
   $("#creditCard").inputmask("mask", {"mask": "9999 9999 9999 9999"}); //specifying fn & options
}); 
```

这是一个 [小提琴示例](http://jsfiddle.net/zcmx3/1/)

# android - 在android的textview中显示越南语字符

> ID：14598950
> 
> 赞同：2
> 
> 时间：2013-01-30T07:46:42.147
> 
> 标签：android

我正在尝试从 midi 文件中解析歌词并获取一些越南语字符，例如：ắ、ố、ê、...我如何在 textview 中显示这些字符。谢谢

我试过了，但没有工作

```
while(it.hasNext()) {
        MidiEvent E = it.next();

        if(E.getClass().equals(Lyrics.class)) {
            Lyrics lyric = (Lyrics)E;
            String a = "";
            try {
                a = new String(lyric.getLyric().getBytes("UTF8"), "UTF8");
            } catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            mLyrics += a;
        }
    }

    TextView txtLyric = (TextView)findViewById(R.id.txtLyric1);

    txtLyric.setText(mLyrics); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:57:09.707

我认为您可以尝试`encode`输入数据，`UTF-8`然后将它们显示到`textview`

```
String original = "";

  try {
      byte[] converted = original.getBytes("UTF8");

  } catch (UnsupportedEncodingException e) {
      e.printStackTrace();
  } 
```

# sql - 查询从sql server中的两个表中获取数据

> ID：14598953
> 
> 赞同：0
> 
> 时间：2013-01-30T07:46:50.900
> 
> 标签：sql, sql-server-ce

我有两个表父子表，例如员工表和部门表。我想显示部门名称，按它们在 Employee 表中出现的次数排序，应该首先列出出现次数最多的部门名称。请告诉我解决方案紧急，SQL 语句应该由 SqlCE 支持

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:57:25.017

```
SELECT dept.Name, COUNT(emp.id) as timesOccurring 
FROM departments dept
INNER JOIN employees emp
ON emp.dept_id = dept.id
GROUP BY dept.Name
ORDER BY timesOccurring 
```

那应该这样做。

# math - 在圆的周长上查找点

> ID：14598954
> 
> 赞同：1
> 
> 时间：2013-01-30T07:46:54.563
> 
> 标签：math, coordinate-systems

我需要从圆心画线。为此，我首先选择图像的中心作为圆心并绘制一个已知半径的圆。之后使用圆的参数方程，我只是通过将角度增加 6 度来计算周长上的 x 和 y。

```
 x = cx + r * cos(a)
 y = cy + r * sin(a) 
```

我正在使用 OpenCV 来完成所有这些，其中像素坐标从左上角开始。所以我的问题是对于 360 度循环，算法需要绘制 60 条线，但是当角度达到 120 度时，它会完成一个循环，我注意到每条线可以分开大约 15 度而不是 6 度。下面是我的图像是在 120 度之后。

![120度后的图像](../Images/fe2954097c7b8e7c679676de4f4def63.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T08:21:27.630

`sin`并`cos`期望角度以弧度为单位。如果您以度为单位提供角度，则实际差异`6 == 6 - 2 * Pi`约为 -16.22°。

所以只需从度数计算弧度：

```
x = cx + r * cos(a * CV_PI / 180.0)
y = cy + r * sin(a * CV_PI / 180.0) 
```

# google-app-engine - Google App Engine：Lucene org.apache.lucene.store.LockObtainFailedException：锁定获取超时

> ID：14598958
> 
> 赞同：2
> 
> 时间：2013-01-30T07:47:28.610
> 
> 标签：google-app-engine, lucene

在`Google APP engine`，我正在使用`Lucene 4.1`.

我能够在本地生成索引文件，但在谷歌服务器上我得到以下异常（虽然相同的代码在本地机器上工作正常）：

```
org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out:
   com.googlecode.lucene.appengine.GaeLockFactory$1@104a681 
```

这是我的代码：

* * *

```
package com.search.domain;

import java.io.IOException;
import java.util.Set;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.TextField;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.index.IndexWriterConfig.OpenMode;
import org.apache.lucene.util.Version;

import com.domain.dataobjects.Item;
import com.googlecode.lucene.appengine.GaeDirectory;
import com.googlecode.lucene.appengine.GaeLuceneUtil;

public class ItemDataIndexWriter {

public String createIndexes(){
    IndexWriter indexWriter = null;
    GaeDirectory indexDirectory = null;
try{    
        indexDirectory = new GaeDirectory();

        StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_41 );

        IndexWriterConfig config = GaeLuceneUtil.getIndexWriterConfig(Version.LUCENE_41, analyzer);//get configuration

        config.setOpenMode(OpenMode.CREATE_OR_APPEND);
        indexWriter = new IndexWriter(indexDirectory, config);

        addToDoc(indexWriter,"test");
 }catch(Exception e){
     e.printStackTrace();
     System.out.println(e.getMessage());
     return e.toString();
 }
 finally{
     try {
        if(indexWriter!=null)
             indexWriter.close();
        if(indexDirectory!=null)
             indexDirectory.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        System.out.println(e.getMessage());
    }        
 }
return "Good";
}

private static void addToDoc(IndexWriter w, String item) throws IOException {

    Document doc = new Document();
    doc.add(new TextField("item", item, Field.Store.YES));
    w.addDocument(doc);
}
} 
```

* * *

谁能指导我？怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T13:59:14.680

只需进入`Google AppEngine administration -> Datastore viewer`，选择 GaeLock 实体并删除所有实体，这样做您将解锁每个因任何原因被锁定的 Lucene 索引。

当心！可能您的数据存储已陷入脏状态，因此您必须通过删除以下所有条目来手动删除索引：`LuceneIndex`, `Segment`, `SegmentHunk`, `GaeLock`。

当 Lucene AppEngine 配置不正确时，您可能会遇到问题。检查[lucene-appengine 站点](https://code.google.com/p/lucene-appengine/)上的配置说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-09T18:28:47.427

我遇到了同样的问题，但在测试中，在云中运行得很好。我在 groovy 中做到了这一点：

```
 final DatastoreService datastore = DatastoreServiceFactory.getDatastoreService()
    final PreparedQuery pq = datastore.prepare(new Query())
    def list = pq.asList(FetchOptions.Builder.withDefaults())
    datastore.delete(list.collect {it.key})

    GetIndexesRequest builder = GetIndexesRequest.newBuilder().build()
    GetResponse<Index> indexes = SearchServiceFactory.getSearchService().getIndexes(builder)

    for (Index index : indexes) {

        Results<ScoredDocument> result = index.search("")

        for (Document document : result) {
            index.deleteAsync(document.id)
        }
    } 
```

它应该在每次测试之前清理数据存储中的所有数据和所有索引。**但在index.deleteAsync(document.id)**行中抛出错误

# java - Java 二进制字符串到文件

> ID：14598959
> 
> 赞同：-6
> 
> 时间：2013-01-30T07:47:35.990
> 
> 标签：java, io

我有一个文件转换为二进制字符串（示例）`String = "101001010101"`，我需要这个来将此字符串写入文件。

我得到这个二进制字符串：

```
File -> byte[] -> FileInputStream -> String 
```

如何将其转换回文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:50:16.497

使用[`FileUtils`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)commons-io 中的类。这将帮助您进行此类操作。

# ios - 如何在 IOS 中检查所有 NSURLConnections 的 SSL 证书

> ID：14598968
> 
> 赞同：0
> 
> 时间：2013-01-30T07:48:03.177
> 
> 标签：ios, ssl, nsurlconnection

现在我使用 -connection:didReceiveAuthenticationChallenge: 函数来检查 SSL 证书。根据用户的要求，我需要检查所有请求。但在我的测试演示中，-connection:didReceiveAuthenticationChallenge: 委托函数将在 5 分钟内仅调用一次。5分钟后，它会再次被调用。但是我们的用户可能会在 5 分钟内发送多个请求。有人知道必须解决这个问题吗？

请求代码

```
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:_server_url]];
[urlRequest setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:[query dataUsingEncoding:NSUTF8StringEncoding]];

urlConnection = [[[NSURLConnection alloc] initWithRequest:urlRequest delegate:self] autorelease] ;
[urlConnection scheduleInRunLoop:[NSRunLoop mainRunLoop]
                      forMode:NSDefaultRunLoopMode];
[urlConnection start]; 
```

委托职能：

```
- (BOOL)connection:(NSURLConnection *)conn canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace
{
    NSLog(@"authenticate method:%@",protectionSpace.authenticationMethod);

    return YES;
}

- (void) connection:(NSURLConnection *)conn didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
{
    NSURLAuthenticationChallenge *_challenge=[challenge retain];

    SecTrustRef trustRef = [[_challenge protectionSpace] serverTrust];
    SecTrustEvaluate(trustRef, NULL);

    SecCertificateRef certRef = SecTrustGetCertificateAtIndex(trustRef, 0);

    NSData *certificateData = (NSData *) SecCertificateCopyData(certRef);
    const unsigned char *certificateDataBytes = (const unsigned char *)[certificateData bytes];
    X509 *certificateX509 = d2i_X509(NULL, &certificateDataBytes, [certificateData length]);

    NSString *subject = CertificateGetDomainName(certificateX509);

    NSLog(@"Subject: %@", subject);

    [[_challenge sender] continueWithoutCredentialForAuthenticationChallenge:_challenge];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:14:49.423

没有简单的方法来刷新 TLS 缓存：http: [//developer.apple.com/library/ios/#qa/qa1727/_index.html](http://developer.apple.com/library/ios/#qa/qa1727/_index.html)

尝试重新考虑您的用例，以确定您是否真的每次都需要身份验证。

# spring - 可以为使用组件扫描定义的 bean 提供自定义限定符吗？

> ID：14598969
> 
> 赞同：3
> 
> 时间：2013-01-30T07:48:06.163
> 
> 标签：spring, spring-mvc

牢记以下 bean 定义：

```
<bean id="bean1" class="com.mycompany.SomeClass">
   <property name="prop1" value="value1">
   <property name="prop2" value="value2">
</bean>
<bean id="bean2" class="com.mycompany.SomeClass">
   <property name="prop1" value="value3">
   <property name="prop2" value="value4">
</bean> 
```

在基于注释的环境中，我可以使用`@Qualifier`注释来区分两者：

```
@Autowired
@Qualifier("bean1")
private SomeClass first;

@Autowired
@Qualifier("bean2")
private SomeClass second; 
```

如果我不想在 XML 配置文件中声明 bean，而是使用`@Component`Annotation，我可以实现同样的目的吗？我找不到任何方法来注入同一类的两个不同的bean，使用不同的参数初始化，使用`@Autowired`注释。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:47:58.620

来自 javadoc

```
public abstract String value
The value may indicate a suggestion for a logical component name, to be turned into a Spring bean in case of an autodetected component. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:17:14.840

只是`@Component("myBeanName")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:08:51.893

以下是如何使用 Java 实现这一点`@Configuration`：

```
@Configuration 
public class Config {

    @Bean
    public SomeClass bean1() {
        SomeClass s = new SomeClass();
        s.setProp1(value1);
        s.setProp2(value2);
        return s;
    }

    @Bean
    public SomeClass bean2() {
        SomeClass s = new SomeClass();
        s.setProp1(value3);
        s.setProp2(value4);
        return s;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:17:22.317

如果您使用@Component，您将如何区分 SomeClass 中的 bean1 和 bean2？如果要避免使用 XML，则必须使用 Java 配置类，该类定义了具有不同属性的这两个 bean。

请参阅[Spring Java 配置](http://www.tutorialspoint.com/spring/spring_java_based_configuration.htm)。

# php - 包罗万象的正则表达式

> ID：14598972
> 
> 赞同：1
> 
> 时间：2013-01-30T07:48:18.497
> 
> 标签：php, regex, preg-match, catch-all

在我的 PHP 程序中，我有一些仅在运行时定义的正则表达式。我如何编写一个正则表达式来匹配那些匹配项没有捕获的所有其他内容？

```
var_dump(preg_match("#^Bob$#", 'Bob'));
var_dump(preg_match("#^Alice$#", 'Alice')); 
```

我需要的正则表达式是 and 以外的所有`^Bob$`内容`^Alice$`。

我尝试使用

```
var_dump(preg_match("#(?(?=(^Bob$|^Alice$))|^$|.*)#", 'John')); 
```

但是 preg_match 函数给了我`Warning: preg_match(): Compilation failed: conditional group contains more than two branches at offset 27`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T08:19:11.523

您使用了语法错误的条件（以 开头的第一组`?`），这就是您的警告。

但我认为你不需要条件正则表达式，试试

```
 var_dump(preg_match("#^(?!(Bob|Alice)$).*#", 'John')); 
```

我将 Anchor`^`移到了表达式的最开始和`$`交替之外，因此它对两种选择都有效。

这个正则表达式将匹配每个字符串（没有换行符），不仅是“Bob”或“Alice”。

# c# - 给定一个序列，找到最大的“逆序”子序列

> ID：14598978
> 
> 赞同：4
> 
> 时间：2013-01-30T07:48:37.793
> 
> 标签：c#, algorithm, linq

（是的，我已经尽可能多地搜索了......）也许我不应该使用序列，但没有更好的方式来描述它......

[修订：如答案部分所述，子序列不是正确的描述。一对数字是正确的词！]

给定一个数字序列，并将序列中一对数字的大小定义为两个数字之间的距离。显然最大的一对是[第一个数字，最后一个数字]。问题是找到顺序与 [first,last] 对相反的最大数字对。

例如，如果序列是，`{1,6,3,5,2,8}`那么答案应该是 `[6,2]`因为 [1,8] 的顺序是递增的，而递减顺序的最大对是 [6,2]。

一个附带的问题是，这可以使用类似 SQL 的语句以声明性方式解决吗？具体来说，我正在考虑使用 LINQ 来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:01:36.200

这不是适合 SQL 的问题。它的措辞也很糟糕。您实际上是在寻找数字对而不是子序列，而大小是两者之间的距离。

可以通过向后扫描序列来求解**O(n)**，找出给定点之后的最小数字及其位置。这给出`{1,2,2,2,2,8)`和`{0,4,4,4,4,5}`。然后与原始序列并行扫描得到大小为`{0,3,2,1,0,0}`，因此最大大小为`(6,2)`大小为 3 的对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:05:50.567

未经测试，但我会尝试以下方法：

```
var sequence = new[] {1, 6, 3, 5, 2, 8};
var isGoingUp = sequence.First() < sequence.Last();

//if the first sequence is going up, invert the sign on the sequence
//this way we can always compare using "<"
var sequenceToCheck = sequence.Select(x => isGoingUp ? -x : x).ToList();

//initial values
int currentLength = 1; //the length of the subsequence found
int startIndex = 0; //the starting index of the subsequence

//check for each item's longest subsequence
for (int i = 0; i < sequenceToCheck.Count; i++)
{
    //go from the end towards the beginning and find the longest sequence for i
    for (int j = sequenceToCheck.Count - 1; i > j; i--)
    {
        if (sequenceToCheck[i] < sequenceToCheck[j])
        {
            //found i's longest subsequence
            if (currentLength < j - i + 1)
            {
                startIndex = i;
                currentLength = j - i + 1;
            }
            break; //don't check any smaller sequences for i
        }
    }

    if(sequenceToCheck.Count - i < currentLength)
        break; //no need to check any more, no sequence past this can be longer
}

var subsequence = sequence.Skip(startIndex).Take(currentLength); 
```

您也应该能够在 LINQ 中实现此解决方案，方法是计算从每个点到匹配数字的距离（从末尾开始）。

* * *

然而，在 SQL 中实现这一点会稍微困难一些，尽管你绝对可以做到。这是我的尝试和一个[有效的 SQL Fiddle 示例](http://www.sqlfiddle.com/#!6/c1c85/10)：

```
WITH firstValue AS (
    SELECT TOP 1 value
    FROM t
    ORDER BY id
), lastValue AS (
    SELECT TOP 1 value
    FROM t
    ORDER BY id DESC
), seqToCheck AS (
    SELECT id, 
        CASE WHEN lastValue.value > firstValue.value THEN 0-t.value 
             ELSE t.value 
        END AS value
    FROM t
    CROSS JOIN firstValue
    CROSS JOIN lastValue
), subSequences AS (
    SELECT s1.id, COALESCE(MAX(s2.id - s1.id + 1),1) AS distance
    FROM seqToCheck AS s1
    LEFT JOIN seqToCheck AS s2 ON s1.value < s2.value AND s2.id > s1.id
    GROUP BY s1.id
), longestSubSequence AS (
    SELECT TOP 1 id, distance
    FROM subSequences
    ORDER BY distance DESC
)
SELECT t.value
FROM t
INNER JOIN longestSubSequence AS l ON t.id >= l.id AND t.id < l.id + l.distance
ORDER BY t.id 
```

`id`这假设您有一个*不包含 gaps*的升序标识列。`ROW_NUMBER() OVER(ORDER BY xxxxx)`如果您没有这样的事情，您也可以这样做。

为了使用索引，您可能会使其变得更复杂一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:27:36.823

一个好的算法是从外向内进行比较，一旦你得到你需要的就中断。由于你的目标序列需要在第一个和最后一个之间进行比较，这个问题很容易实现。从外部缩小序列可确保您更快地获得所需的最大序列。

在您的情况下， **{1,6,3,5,2,8}**

```
1\. Compare 1 and 8 
2\. Compare 1 and 2
3\. Compare 6 and 8
4\. Compare 6 and 2 and you got your sequence 
```

# php - 检查图像文件是否存在

> ID：14598983
> 
> 赞同：0
> 
> 时间：2013-01-30T07:49:00.630
> 
> 标签：php

我想检查一个 img 文件是否存在，否则我使用默认的 img。

但我想用来确保图像文件存在的检查不起作用。

我有以下代码。

```
$filename = "http://".$_SERVER['SERVER_NAME']."/media/img/".$row['CatNaam'].".jpg";
        echo"  <img src=\"".$filename."\" alt=\"".$row['CatNaam']."\">";

        echo "filename";

        if (file_exists($filename)) {
            echo "The file $filename exists";
        } else {
            echo "The file $filename does not exist";
        } 
```

图像在那里，我可以看到它，但它说图像不存在。如果我从 echo filename 复制响应，则该文件就在那里。

编辑：

我将我的代码更改为

```
$filename = "/media/img/".$row['CatNaam'].".jpg";
        echo $filename;
        echo"  <img src=\"".$filename."\" alt=\"".$row['CatNaam']."\">";

         echo "<br> $filename <br>";
        if (file_exists($filename)) {
            echo "The file $filename exists";
        } else {
            echo "The file $filename does not exist";
        } 
```

我仍然可以看到图像，但现在我收到了不同的警告（我想这比以前更好）

警告说：

arning: file_exists() [function.file-exists]: open_basedir 限制生效。文件（/media/img/Badkraan.jpg）不在允许的路径内：（审查）在第 71 行的 mydomain/public_html/ve/paginas/producten/zoek.php 文件 /media/img/Badkraan。 jpg不存在

文件权限为 755

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T15:03:13.287

来源：[http ://us1.php.net/file_exists](http://us1.php.net/file_exists)

```
<?php
    $filename = '/path/to/foo.txt';

    if (file_exists($filename)) {
        echo "The file $filename exists";
    } else {
        echo "The file $filename does not exist";
    }
?> 
```

**或者**

来源：[http ://us1.php.net/manual/en/function.is-file.php](http://us1.php.net/manual/en/function.is-file.php)

```
<?php
    var_dump(is_file('a_file.txt')) . "\n";
    var_dump(is_file('/usr/bin/')) . "\n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T09:16:53.980

检查这个：

```
$file = 'Your_file';
$file_headers = @get_headers($file);

if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
   // does not exist
} else {
   // exist     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:10:17.417

```
<?php
$imgFile = "http://www.technew.in/uploads/image/samsung_galaxy_xpro_2_technew_in.jpg";
if (getimagesize($imgFile)) {
  echo "Valid image file";
} else {
  echo "Invalid image file or file not exist";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T07:52:46.783

尝试以下操作

*   确保`$filename`经过适当验证
*   它仅`allow_url_fopen`在您的 PHP 配置中激活时才有效
*   确保您已授予图像文件夹的权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T07:52:57.347

您正在检查客户端看到的文件（http ...）。相反，您需要检查服务器磁盘上的实际文件，即如果您使用的是 linux，则类似于：

```
if(file_exists($PATH_TO_FILES . '/' . $row['CatNaam'] . ".jpg")) ... 
```

其中 $PATH_TO_FILES 可以从以下内容开始计算：`dirname(__FILE__))`，这将为您提供当前脚本所在的目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-09T16:01:24.490

我有同样的问题，我通过给出实际地址来解决它，它很漂亮，但它对我有用：

1-首先获取当前位置的地址并将其放入数组中：

```
$pieces = explode("/", __FILE__); 
```

2-更改地址以适合您想要的文件：

```
array_pop($pieces); 
```

3-最后把它放在一起：

```
$final = implode("/", $pieces); 
```

4-然后将其放入文件存在函数中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T07:56:36.650

对于由于安全模式限制而无法访问的文件，此函数返回 FALSE。 [http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T07:58:11.447

`file_exists`对于通过 http 协议提供的文件，这可能无法正常工作。至少在我的情况下是这样的（即使`allow_url_fopen`设置为`On`）。我假设文件来自您无法直接访问文件系统的不同服务器。否则，仅使用文件本身的完整路径会更容易。

不过你可以试试这样。这不是很好，但它至少应该完成工作。您应该能够在 php.net 页面上找到一些其他示例`file_exists`。

```
$filename = "http://".$_SERVER['SERVER_NAME']."/media/img/".$row['CatNaam'].".jpg";
echo"  <img src=\"".$filename."\" alt=\"".$row['CatNaam']."\">";
echo "filename";

$file_headers = @get_headers($filename);
if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    echo "The file $filename does not exist";
}
else {
    echo "The file $filename exists";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-01T10:33:28.997

$filename = " [http://im.rediff.com/money/2011/jan/19sld3.jpg](http://im.rediff.com/money/2011/jan/19sld3.jpg) ";

```
 $file_headers = @get_headers($filename);

    if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    //return false; 
    echo "file not found";
    }else {
    //return true;  
    echo "file found";

    } 
```

# cakephp - CakePHP 表单助手日期字段，但仅使用月份选择。允许日期和年份作为文本字段

> ID：14598988
> 
> 赞同：0
> 
> 时间：2013-01-30T07:49:28.213
> 
> 标签：cakephp, cakephp-2.0

**我正在尝试获取 cakephp 日期字段以将月份输出为选择，并将年份作为文本字段而不是两者都作为选择字段。**

这是我认为输出日期类型字段的传统 Cake 方式（我将 dateFormat 属性添加到当前仅显示 2 个选择框（跳过当天））：

```
<?php echo $this->Form->input('Payment.credit_card_expiration', array('type' => 'date', 'label' => 'Expiration date', 'dateFormat' => 'MY')) ?> 
```

我暂时做的是我认为一种 hack，即将它分成 2 个字段。我不喜欢它，因为它没有显示该字段的validationErrors（主要问题）并且它看起来像丑陋的代码（为什么要编写丑陋的代码，特别是如果蛋糕有办法做到这一点）。

```
<?php
echo $this->Form->input('Payment.credit_card_expiration.month', array('type' => 'select', 'label' => 'Expiration date', 'options' => array('Month','Jan','Feb','...')));
echo $this->Form->input('Payment.credit_card_expiration.year', array('type' => 'text', 'label' => '&nbsp;', 'placeholder' => 'Year'));

if(isset($this->validationErrors['Payment']['credit_card_expiration'])) {
    echo '<div class="error-message">' . $this->validationErrors['Payment']['credit_card_expiration'][0] . '</div>';
    echo '<div class="row"><div class="span5">&nbsp;</div></div>';
}
?> 
```

作为说明，我考虑过可能必须扩展 FormHelper。我以前没有这样做过，但我确信我可以做到。我只是想知道是否有内置的方式或优雅的技巧。

这是我在 StackOverflow 上的第一篇文章，所以我们开始吧，我会看看会发生什么。感谢您的任何想法或见解，非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:52:03.597

CakePHP FormHelper 说您可以使用[`$this->Form->month()`](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3amonth)它

# scala - 对 flatMap/Map 转换的理解感到困惑

> ID：14598990
> 
> 赞同：90
> 
> 时间：2013-01-30T07:49:35.360
> 
> 标签：scala, map, monads, for-comprehension

我似乎真的不了解 Map 和 FlatMap。我不明白的是，理解如何是对 map 和 flatMap 的一系列嵌套调用。以下示例来自[Scala 中的函数式编程](http://www.manning.com/bjarnason/)

```
def bothMatch(pat:String,pat2:String,s:String):Option[Boolean] = for {
            f <- mkMatcher(pat)
            g <- mkMatcher(pat2)
 } yield f(s) && g(s) 
```

翻译成

```
def bothMatch(pat:String,pat2:String,s:String):Option[Boolean] = 
         mkMatcher(pat) flatMap (f => 
         mkMatcher(pat2) map (g => f(s) && g(s))) 
```

mkMatcher 方法定义如下：

```
 def mkMatcher(pat:String):Option[String => Boolean] = 
             pattern(pat) map (p => (s:String) => p.matcher(s).matches) 
```

模式方法如下：

```
import java.util.regex._

def pattern(s:String):Option[Pattern] = 
  try {
        Some(Pattern.compile(s))
   }catch{
       case e: PatternSyntaxException => None
   } 
```

如果有人可以在这里阐明使用 map 和 flatMap 背后的基本原理，那就太好了。

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2013-01-30T10:48:57.480

*TL;DR 直接进入最后一个示例*

我会试着回顾一下。

**定义**

`for`理解是一种语法快捷方式，可以以一种易于阅读和推理的方式`flatMap`组合起来。`map`

让我们稍微简化一下，假设`class`提供上述两种方法的每个都可以称为 a `monad`，我们将使用该符号`M[A]`来表示`monad`具有内部类型的 a `A`。

**例子**

一些常见的单子包括：

*   `List[String]`在哪里
    *   `M[X] = List[X]`
    *   `A = String`
*   `Option[Int]`在哪里
    *   `M[X] = Option[X]`
    *   `A = Int`
*   `Future[String => Boolean]`在哪里
    *   `M[X] = Future[X]`
    *   `A = (String => Boolean)`

**地图和平面地图**

在通用单子中定义`M[A]`

```
 /* applies a transformation of the monad "content" mantaining the 
  * monad "external shape"  
  * i.e. a List remains a List and an Option remains an Option 
  * but the inner type changes
  */
  def map(f: A => B): M[B] 

 /* applies a transformation of the monad "content" by composing
  * this monad with an operation resulting in another monad instance 
  * of the same type
  */
  def flatMap(f: A => M[B]): M[B] 
```

例如

```
 val list = List("neo", "smith", "trinity")

  //converts each character of the string to its corresponding code
  val f: String => List[Int] = s => s.map(_.toInt).toList 

  list map f
  >> List(List(110, 101, 111), List(115, 109, 105, 116, 104), List(116, 114, 105, 110, 105, 116, 121))

  list flatMap f
  >> List(110, 101, 111, 115, 109, 105, 116, 104, 116, 114, 105, 110, 105, 116, 121) 
```

**用于表达**

1.  `<-`表达式中使用符号的每一行都被转换为一个`flatMap`调用，除了最后一行被转换为结束`map`调用，其中左侧的“绑定符号”作为参数传递给参数函数（什么我们之前称为`f: A => M[B]`）：

    ```
    // The following ...
    for {
      bound <- list
      out <- f(bound)
    } yield out

    // ... is translated by the Scala compiler as ...
    list.flatMap { bound =>
      f(bound).map { out =>
        out
      }
    }

    // ... which can be simplified as ...
    list.flatMap { bound =>
      f(bound)
    }

    // ... which is just another way of writing:
    list flatMap f 
    ```

2.  一个只有一个的 for 表达式`<-`被转换为一个`map`调用，该表达式作为参数传递：

    ```
    // The following ...
    for {
      bound <- list
    } yield f(bound)

    // ... is translated by the Scala compiler as ...
    list.map { bound =>
      f(bound)
    }

    // ... which is just another way of writing:
    list map f 
    ```

**现在说到重点**

如您所见，该`map`操作保留了原始 的“形状” `monad`，因此`yield`表达式也是如此： a`List`仍然是 a `List`，其内容由`yield`.

另一方面，中的每条装订线`for`只是连续的组合`monads`，必须“压平”以保持单一的“外部形状”。

假设每个内部绑定都被转换为一个`map`调用，但右手是同一个`A => M[B]`函数，你最终会在推导中得到一个`M[M[B]]`for each line。
整个`for`语法的目的是轻松地“扁平化”连续单子操作的串联（即“提升”“单子形状”中的值的操作：） ，并添加*可能*执行结论转换`A => M[B]`的最终`map`操作。

 *我希望这能解释翻译选择背后的逻辑，它以机械的方式应用，即：`n` `flatMap`嵌套调用由单个`map`调用结束。

**一个人为的说明性示例**
旨在显示`for`语法的表现力

```
case class Customer(value: Int)
case class Consultant(portfolio: List[Customer])
case class Branch(consultants: List[Consultant])
case class Company(branches: List[Branch])

def getCompanyValue(company: Company): Int = {

  val valuesList = for {
    branch     <- company.branches
    consultant <- branch.consultants
    customer   <- consultant.portfolio
  } yield (customer.value)

  valuesList reduce (_ + _)
} 
```

你能猜出它的类型`valuesList`吗？

如前所述，the 的形状`monad`是通过推导来维持的，所以我们从 a `List`in开始`company.branches`，并且必须以 a 结束`List`。
相反，内部类型会发生变化并由`yield`表达式确定：`customer.value: Int`

`valueList`应该是一个`List[Int]`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-25T13:53:59.687

我不是一个 scala mega 头脑，所以请随时纠正我，但这就是我`flatMap/map/for-comprehension`向自己解释这个传奇的方式！

要理解`for comprehension`并将其翻译成`scala's map / flatMap`我们必须采取小步骤并理解组成部分 -`map`和`flatMap`. 但不`scala's flatMap`只是`map`你`flatten`问自己！如果是这样，为什么这么多开发人员发现很难掌握它或`for-comprehension / flatMap / map`. 好吧，如果您只查看 scala`map`和`flatMap`签名，您会发现它们返回相同的返回类型`M[B]`，并且它们在相同的输入参数上工作`A`（至少是它们采用的函数的第一部分），如果那有什么不同呢？

**我们的计划**

1.  了解 scala 的`map`.
2.  了解 scala 的`flatMap`.
3.  了解 scala 的`for comprehension`.`

**斯卡拉的地图**

scala地图签名：

```
map[B](f: (A) => B): M[B] 
```

但是当我们看到这个签名时，有一个很大的部分丢失了，它是——它是`A`从哪里来的？我们的容器是类型的`A`，所以在容器的上下文中查看这个函数很重要 - `M[A]`。我们的容器可以是一个`List`类型的项目，`A`我们的`map`函数采用一个函数将每个类型的项目转换`A`为 type `B`，然后它返回一个类型的容器`B`（或`M[B]`）

让我们在考虑容器的情况下编写地图的签名：

```
M[A]: // We are in M[A] context.
    map[B](f: (A) => B): M[B] // map takes a function which knows to transform A to B and then it bundles them in M[B] 
```

请注意**关于地图的一个非常重要的事实- 它会****自动**捆绑在输出容器中`M[B]`，您无法控制它。让我们再次强调一下：

1.  `map`为我们选择输出容器，它将与我们处理的源相同，因此对于`M[A]`容器，我们只得到相同的`M`容器`B` `M[B]`，没有别的！
2.  `map`为我们做这个容器化，我们只给一个映射 from `A`to`B`它将把它放在盒子里，`M[B]`然后把它放在盒子里！

您看到您没有指定如何对`containerize`项目进行转换，您只是指定了如何转换内部项目。因为我们有相同的容器`M`，这意味着是相同的容器`M[A]`，这意味着如果你有，那么你将拥有一个，更重要的是为你做！`M[B]``M[B]``List[A]``List[B]``map`

既然我们已经处理了，`map`让我们继续`flatMap`。

**Scala 的平面地图**

让我们看看它的签名：

```
flatMap[B](f: (A) => M[B]): M[B] // we need to show it how to containerize the A into M[B] 
```

您会看到 map 与 flatMap 的巨大差异，`flatMap`我们为它提供的功能不仅可以转换，`A to B`还可以将其容器化为`M[B]`.

**为什么我们关心谁做容器化？**

那么为什么我们如此关心 map/flatMap 的输入函数是容器化`M[B]`还是 map 本身为我们容器化呢？

您会看到正在`for comprehension`发生的事情是对提供的项目进行多次转换，`for`因此我们赋予装配线中的下一个工人确定包装的能力。想象我们有一条流水线，每个工人都对产品做一些事情，只有最后一个工人将它包装在一个容器中！欢迎来到`flatMap`这是它的目的，`map`每个工人在完成该项目的工作后也会将其打包，以便您将容器放在容器之上。

**强大的理解力**

现在，考虑到我们上面所说的内容，让我们来看看你的理解：

```
def bothMatch(pat:String,pat2:String,s:String):Option[Boolean] = for {
    f <- mkMatcher(pat)   
    g <- mkMatcher(pat2)
} yield f(s) && g(s) 
```

我们在这里得到了什么：

1.  `mkMatcher`返回一个`container`容器包含一个函数：`String => Boolean`
2.  规则是如果我们有多个`<-`它们转换为`flatMap`除了最后一个。
3.  就像`f <- mkMatcher(pat)`第一个`sequence`（想想`assembly line`）我们想要的只是把`f`它传递给装配线上的下一个工人，我们让装配线上的下一个工人（下一个功能）能够确定什么是包装我们的项目这就是为什么最后一个功能是`map`。
4.  最后一个`g <- mkMatcher(pat2)`会用`map`这个是因为它最后一个流水线！所以它可以做最后的操作`map( g =>`，是的！拉出`g`并使用`f`已经从容器中拉出的，`flatMap`因此我们首先得到：

    mkMatcher(pat) flatMap (f // 拉出 f 函数将项目交给下一个流水线工人（你看它可以访问`f`，不要将它打包回来我的意思是让地图确定包装让下一个流水线工人确定container.mkMatcher(pat2) map (g => f(s) ...)) // 因为这是装配线中的最后一个函数，我们将使用 map 并将 g 从容器中拉出并返回包装，它`map`和这个包装将一路加速，成为我们的包裹或容器，是的！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-30T08:22:22.283

基本原理是链接一元操作，这提供了一个好处，适当的“快速失败”错误处理。

其实很简单。该`mkMatcher`方法返回一个`Option`（它是一个 Monad）。的结果`mkMatcher`，一元操作，要么是 a 要么是`None`a `Some(x)`。

将`map`or`flatMap`函数应用于 a`None`总是返回 a `None`- 作为参数传递给的函数`map`并且`flatMap`不被评估。

因此，在您的示例中，如果`mkMatcher(pat)`返回 None ，则应用于它的 flatMap 将返回 a （不会执行`None`第二个单子操作）并且 final将再次返回 a 。换句话说，如果 for comprehension 中的任何操作返回 None，则您有一个快速失败的行为，并且不会执行其余操作。`mkMatcher(pat2)``map``None`

这是错误处理的一元风格。命令式风格使用异常，基本上是跳转（到 catch 子句）

最后一点：该`patterns`函数是一种将命令式错误处理（`try`... `catch`）“转换”为单子式错误处理的典型方式，使用`Option`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T08:14:28.343

这可以翻译为：

```
def bothMatch(pat:String,pat2:String,s:String):Option[Boolean] = for {
    f <- mkMatcher(pat)  // for every element from this [list, array,tuple]
    g <- mkMatcher(pat2) // iterate through every iteration of pat
} yield f(s) && g(s) 
```

运行它以更好地了解其扩展方式

```
def match items(pat:List[Int] ,pat2:List[Char]):Unit = for {
        f <- pat
        g <- pat2
} println(f +"->"+g)

bothMatch( (1 to 9).toList, ('a' to 'i').toList) 
```

结果是：

```
1 -> a
1 -> b
1 -> c
...
2 -> a
2 -> b
... 
```

这类似于`flatMap`- 遍历 in 中的每个元素`pat`并 foreach 元素`map`到 in 中的每个元素`pat2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T08:14:11.987

首先，`mkMatcher`返回一个签名为 的函数`String => Boolean`，这是一个正常的 java 过程，刚刚运行`Pattern.compile(string)`，如`pattern`函数所示。然后，看这条线

```
pattern(pat) map (p => (s:String) => p.matcher(s).matches) 
```

该`map`函数应用于 的结果`pattern`，即`Option[Pattern]`，因此`p`in`p => xxx`就是您编译的模式。因此，给定一个模式`p`，构造一个新函数，它接受一个字符串`s`，并检查是否`s`与模式匹配。

```
(s: String) => p.matcher(s).matches 
```

请注意，`p`变量绑定到编译模式。现在，很清楚带有签名的函数是如何`String => Boolean`由`mkMatcher`.

接下来，让我们检查一下`bothMatch`基于`mkMatcher`. 为了展示如何`bothMathch`工作，我们首先看这部分：

```
mkMatcher(pat2) map (g => f(s) && g(s)) 
```

因为我们得到了一个带有 from 签名的函数，`String => Boolean`在`mkMatcher`这个`g`上下文中，`g(s)`它等价于`Pattern.compile(pat2).macher(s).matches`，如果 String s 匹配 pattern 则返回`pat2`。那么怎么样`f(s)`，和 一样`g(s)`，唯一不同的是，第一次调用`mkMatcher`uses `flatMap`，而不是`map`，为什么？因为return ，如果你同时使用这两个调用，你会得到一个嵌套的结果`mkMatcher(pat2) map (g => ....)`，这不是你想要的。`Option[Boolean]``Option[Option[Boolean]]``map`*

# android - 数据库插入需要很长时间

> ID：14598995
> 
> 赞同：2
> 
> 时间：2013-01-30T07:49:51.460
> 
> 标签：android, sqlite

我正在使用以下代码将数据插入表中。

```
public CourseDB addcourseByType(CourseDB rmdb) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.beginTransaction();
        try {
            ContentValues values = new ContentValues();
            values.put(COURSE_NAME, rmdb.getcourse_name()); 
            values.put(CATEGORY_COURSE_TYPE, rmdb.getcategory_course_type()); 
            values.put(COURSE_CRS, rmdb.getcourse_crs());
            values.put(CATEGORY_ID_FOR, rmdb.getcat_foreign_id()); // Contact
            db.insert(TABLE_COURSE, null, values);

            String selectQuery = "SELECT " + COURSE_ID + " FROM "
                + TABLE_COURSE + " WHERE " + COURSE_CRS + "='"
                + rmdb.getcourse_crs() + "'" + " AND " + CATEGORY_ID_FOR
                + "='" + rmdb.getcat_foreign_id() + "'";
            SQLiteDatabase db1 = this.getWritableDatabase();
            Cursor cursor = db1.rawQuery(selectQuery, null);
            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                     rmdb.setcourse_id(Integer.parseInt(cursor.getString(0)));
                } while (cursor.moveToNext());
            }
            cursor.close();

        db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
          }
       db.close();
       return rmdb;
} 
```

请让我知道是否有任何方法可以更改代码以更快地添加值，我`JSON`从文件中获取格式数据，将其存储为数组并将其传递给上述方法。

**阿斯米塔**

我尝试了这些建议，并且能够将插入时间从 16 秒减少到 11 秒。请看看我的新代码。是否可以进一步减少。

```
// //convert string to JSONArray
                JSONArray jArray = new JSONArray(bufferString);
                if (bufferString.isEmpty()) {

                } else {

                    db.deleteAllCourseByTypeDB(type);
                }

                boolean eventFlag = false;
                db.beginTransaction();
                SQLiteDatabase sqlDB = db.getWritableDatabase();

                 long startTime = System.currentTimeMillis();
                 ContentValues values = new ContentValues();
                for (int j = 0; j < jArray.length(); j++) {
            long insideStart = System.currentTimeMillis();

            JSONObject json_data = jArray.getJSONObject(j);
            String crsCd = (json_data.getString("crsCd"));
            String crsTitle = (json_data.getString("crsTitle"));
        System.out.println("Time for one JSON parsing "+(System.currentTimeMillis()-insideStart));

            try
                {

                    values.put(COURSE_NAME, crsTitle);                          values.put(CATEGORY_COURSE_TYPE, type); // Contact
                                                                                            // Name
                        values.put(COURSE_CRS, crsCd);
                        values.put(CATEGORY_ID_FOR, id_notebook2); // Contact
                        sqlDB.insert(TABLE_COURSE, null, values);
                        //Error in between database transaction 

                    }
                      finally {

                      }
                    System.out.println("Time for one One Looping "+(System.currentTimeMillis()-insideStart));

                }

                db.setTransactionSuccessful();
                db.endTransaction();
                db.close();
                long endTime = System.currentTimeMillis();
            System.out.println("this is my timer "+(endTime-startTime)/1000);

    } catch (FileNotFoundException e) { } catch (IOException e) {
        e.printStackTrace();

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:01:24.233

您以相同的方法进行了插入和选择查询，将方法分为两种，一种用于插入，一种用于选择和尝试。希望能帮助到你。

**编辑：**

经过很长时间找到了一种解决方案

它工作得非常快......

```
String sql = "INSERT INTO table (column1, column2) VALUES (?, ?)";
db.beginTransaction();

SQLiteStatement stmt = db.compileStatement(sql);

for (int i = 0; i < values.size(); i++) {
    stmt.bindString(1, values.get(i).column1);
    stmt.bindString(2, values.get(i).column2);
    stmt.execute();
    stmt.clearBindings();
}

db.setTransactionSuccessful();
db.endTransaction(); 
```

对于 10,000 个数据，只需 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:06:04.790

如果您知道操作类型，为什么要运行 rawquery。您可以使用API 中指定的[update](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)或[insert](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)或[select](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)方法来更改查询。

此外，如果您只能考虑光标的一个结果，那么您可能不需要循环。只需移动到第一个位置并获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T08:09:13.110

首先，您不需要在同一函数中使用数据库类的第二个实例：`SQLiteDatabase db = this.getWritableDatabase();`并且比`SQLiteDatabase db1 = this.getWritableDatabase();`。仅使用`db`. 其次，我可以看到您的列表将 int 作为参数，因此`rmdb.setcourse_id(Integer.parseInt(cursor.getString(0)));`可以将其更改为`cursor.getInt();`. 无需额外转换。

最后，关于插入，实现真正快速插入大部分数据的最佳方法是使用类似于以下内容的方法：

```
String insertSql = "REPLACE INTO requested_cards ";
for (int j = 0; j < requested_cards.length(); j++) {
  int id = 0;
  try {
    id = requested_cards.getInt(j);
  } catch (JSONException e) {
    e.printStackTrace();
  }
  if (j == 0) {
    insertSql += "SELECT " + my_id
            + " AS id, " + id
            + " AS cardId ";
  } else {
    insertSql += "UNION SELECT " + my_id
            + " , " + id + " ";
  }

 }
 dbHelper.executeSQL(insertSql); 
```

编辑：

所以你的陈述应该是这样的：

```
REPLACE INTO myTable 
SELECT myValueFromJSOn AS id, myAnotherValueFromJson AS name (and etc. depending on which rows you want to insert/update) 
UNION SELECT myValueFromJSON , myAnotherValueFromJSON
UNION SELECT myValueFromJSON, myAnotherValueFromJSON... 
```

就这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T08:10:31.870

如果您的主键是 INTEGER AUTOINCREMENT，那么您的键是行 id 的别名，而行 id 正是由 db.insert 重新调整的。见[这里](http://sqlite.org/lang_createtable.html#rowid)。因此，您无需选择获取 id。