# StackOverflow 问答 15541000-15541999

# css - 这两个怎么弄 排队？

> ID：15541002
> 
> 赞同：3
> 
> 时间：2013-03-21T06:38:43.157
> 
> 标签：css, html

我正在编辑别人的代码，有一个现有的表单和 css 文件，我所做的是在表单中添加了 5 个“选择”标签，并且我想让选择内联。

每个选择都有一个标签，所以我将它们两个放在一个 div 中，因此我有 5 个 div。我想将前 3 个 div 放在一行，最后 2 个放在另一行。我在 css 文件上工作了几个小时以使事情正常进行，但仍然失败。

我现在遇到的问题是我不能将 s 放在同一行，它们每个都占用一个单独的行，所以我现在有 5 行表格......但我只需要 2 行。

请帮助我，对CSS不太熟悉。

```
<html>
<link rel="stylesheet" href="css/mrbs.css.php" type="text/css">
        <link rel="stylesheet" media="print" href="css/mrbs-print.css.php" type="text/css">
    <form id="add_room" class="form_admin" action="addsystem.php" method="post">
      <fieldset>
      <legend>Add System</legend>

 <div id="sdw-div" style="white-space:nowrap; display:inline">     
    <label for = "sdw">sdw:</label>
    <select id="sdw" name="sdw" style="display:inline">
        <option selected="selected" value="0">0</option>
       <option  value="1">1</option>
       <option  value="2">2</option>
       <option  value="3">3</option>
       <option  value="4">4</option>
     </select>
</div>

 <div id="etl-div" style="white-space:nowrap; display:inline">       
    <label for = "etl">etl:</label>
     <select id="etl" style="display:inline" name = "etl">
        <option selected="selected" value="0">0</option>
        <option  value="1">1</option>
        <option  value="2">2</option>
        <option  value="3">3</option>
        <option  value="4">4</option>
    </select>
</div>

<div id="hdm-div" style="white-space:nowrap; display:inline">       
    <label for = "hdm">hdm:</label>
     <select id="hdm" style="display:inline" name = "hdm">
        <option selected="selected" value="0">0</option>
        <option  value="1">1</option>
        <option  value="2">2</option>
        <option  value="3">3</option>
        <option  value="4">4</option>
    </select>
</div><strong>

.........other two are just the same....

</form>
</html></strong> 
```

这是form_admin的css文件

```
form.form_admin {float: left; clear: left; margin: 2em 0 0 0}
.form_admin fieldset {float: left; width: auto; border: 1px solid <?php echo $admin_table_border_color ?>; padding: 1em}
.form_admin legend {font-size: small}
.form_admin div {float:left; clear:left;}
.form_admin label {
    display: block; float: left; clear: left;
    width: <?php echo $admin_form_label_width ?>em; min-height: 2.0em; text-align: right;
}
.form_admin input {
    display: block; float: left; clear: right;
</strong>    width: <?php echo $admin_form_input_width ?>em;
    margin-top: -0.2em; margin-left: <?php echo $admin_form_gap ?>em;
    font-family: <?php echo $standard_font_family ?>; font-size: small;
}
.form_admin select {
    display: block; float: left; clear:right; margin-left: 1.0em;
}

.form_admin input.submit {
    width: auto; margin-top: 1.2em; margin-left: <?php echo number_format(($admin_form_gap + $admin_form_label_width), 1, '.', '')?>em
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T06:39:52.413

给 div 一个`float:left;`CSS，将它们显示为内联。

也`<strong>`从`html`标签末尾删除。

### **[`Demo`](http://jsfiddle.net/BbrLX/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T16:19:41.753

尝试 ：

```
display:inline-block 
```

我发现它比其他软件选项效果更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:43:43.573

为所有五个 div添加样式`float:left`。还添加一个

```
<div style="clear:all"></div> 
```

在第三格之后。还需要一个宽度合适的父容器；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:45:52.330

你`divs`已经是了`display:inline`，此外，你也已经`float:left`-ed 他们了。

仍然如果它们没有出现在同一行，那么只有一件事，您的父容器没有适当的宽度来容纳同一行中的所有 div。

所以给你的父容器适当的宽度

看到这个[小提琴](http://jsfiddle.net/manishmishra256/HrE39/1/)。一切正常！

# debugging - 有效地使用 gdb

> ID：15541017
> 
> 赞同：4
> 
> 时间：2013-03-21T06:39:51.270
> 
> 标签：debugging, gdb

只要有可能，我通常倾向于学习键盘快捷键。看到经验丰富的程序员有效地使用 VI 真是太神奇了。我一直在尝试切换到使用 gdb 进行调试，而不是使用 eclipse 调试器（基于 gdb）而且我仍然发现很难实际浏览代码、检查变量等。实际上，我从未见过有经验的 gdb 用户，所以我想知道...值得吗？是否可以使用 gdb 有效地工作？

注意：我也试过cgdb，它是gdb的curses扩展。好多了，但我还是觉得效果还不够。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:40:14.507

GDB 有一个 curses 界面，可以通过命令行选项 -tui 激活。该界面具有单键模式，只需一次按键即可进行最常用的操作。如果您另外使用自动命令执行，例如显示变量值，当到达断点时，这将尽可能地舒适和快速。但是，如果您仍然使用 Eclipse，我认为避免 gdb 的 Eclipse UI 是没有意义的。

我在emacs里面使用了一段时间的GDB，但是发现GDB和emacs之间传输信息的时间不可接受，所以我切换到了上面提到的这种TUI模式。我不知道，如果 GDB 和 Eclipse 之间的信息传输更快，但至少复杂程序的启动时间在 GDB 中直接比在 Eclipse 中要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:05:56.380

你也可以试试 ddd 调试器：

[http://www.gnu.org/software/ddd/](http://www.gnu.org/software/ddd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:49:07.393

尽管提供了赏金，但这个问题并没有引起太多关注。所以我决定为自己进一步调查这个问题。最后，我偶然发现了一个我认为非常有效的解决方案。

它被称为`tmux`，它与 基本相似`gnu screen`。此工具允许将控制台拆分为多个窗格，每个窗格包含不同的进程。因此，可以有一个带有`gdb`和的窗口`emacs`。使用专用热键在窗口之间切换非常容易。

# java - Java：框架响应弹出操作。如何？

> ID：15541020
> 
> 赞同：-4
> 
> 时间：2013-03-21T06:39:57.427
> 
> 标签：java, swing, frame, jbutton

在我的框架中有一个 JTable 和 SAVE 按钮。我将数据输入 JTable 并将其保存到 DATABASE。在我目前的程序中：

当我单击“保存”按钮时，它会检查数据并将其推送到数据库..

我担心的是：

单击“保存”按钮时，将触发带有两个按钮（确定和取消）的框架询问（您确定要保存记录吗？）。然后，如果单击 OK 按钮，JTable 中的数据将被推送到 DATBASE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:05:09.103

`When "SAVE" button will be clicked, a frame with two button (OK & CANCEL) asking (Are you sure to save the record?) will trigger. Then, If OK button is clicked,the data in JTable will be pushed to the DATBASE.`

使用[JOptionPane](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)，然后你可以在那里测试[所需的回报](https://stackoverflow.com/a/9228595/714968)

# mysql - SQL 连接以获取不属于两个日期之间的记录

> ID：15541025
> 
> 赞同：0
> 
> 时间：2013-03-21T06:40:16.160
> 
> 标签：mysql, sql

我有以下表格：

```
discount table:
id
name
description
amount

discount_exception
id
from_date
to_date
discount_id (foreign key to discount table) 
```

折扣例外表用于存储折扣不应提供给用户的日期范围，因此不应显示。请注意，折扣和折扣异常之间存在 1:M 关系。换句话说，一个折扣可以有很多例外。

现在，我编写 SQL 的方式是获取所有折扣，然后在数组中循环遍历它们，并查询 discount_exception 表以了解每个折扣是否在特定日期范围内。我更愿意修改 SQL，以便一个数据库调用可以获取所有不包含在指定日期范围内的异常日期的折扣。

例如，如果用户正在购买 2013-5-1 和 2013-5-5 之间运行的 5 天服务，我想检查 discount 和 discount_exception 表以找出哪些折扣在 2013-5 内有例外-1 和 2013-5-5，然后仅显示在指定日期范围内没有例外的折扣。有没有办法用一个 select 语句来做到这一点，而不是分解 SQL 来为每个折扣单独调用数据库？我很难理解 SQL，尤其是当 discount 表和 discount_exception 表之间存在 1:M 关系时。

我正在尝试这样的事情：

```
SELECT * FROM discount INNER JOIN `discount_exceptions` ON discount.id = discount_exceptions.discount_id AND (discount_exceptions.date_from NOT BETWEEN '2013-5-1' AND '2013-5-5' OR discount_exception.date_to NOT BETWEEN '2013-5-1' AND '2013-5-5'); 
```

但是这个和这个的其他变体似乎并不奏效。知道我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:57:25.193

试试这个怎么样：

```
 select * 
   from discount
    where id not in (
        SELECT discount.id FROM discount

             LEFT JOIN discount_exception 
                  ON discount.id = discount_exception.discount_id 
         WHERE ('2013-5-1'  between discount_exception.from_date and discount_exception.to_date ) 
                    OR ('2013-5-5'  BETWEEN discount_exception.from_date  and discount_exception.to_date )
                    OR (discount_exception.from_date between '2013-5-1' and '2013-5-5' )
                    OR (discount_exception.to_date between '2013-5-1' and '2013-5-5') )
 ) 
```

可能更好地添加 distinct 以获得不同的 ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:04:48.237

要检查交叉点，您只需查看任一范围的起点是否在另一个范围内。然后你形成一个子查询来排除那些匹配的。

```
set @start_date = CAST('2013-05-01' as date);
set @stop_date = CAST('2013-05-05' as date);

select *
from discounts
where id not in (select discount_id
                 from discount_exception
                 where from_date between @start_date and @stop_date or
                       @start_date between from_date and to_date) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T04:24:51.207

假设您要查找适用于日期范围 '2013-03-01' 到 '2013-03-03' 的所有折扣，首先找到适用于该范围的所有 discount_exceptions

```
select e.*
from discount_exception e 
where e.from_date between '2013-03-02' and '2013-03-04'
or e.to_date between '2013-03-02' and '2013-03-04'; 
```

加入上面的折扣表将为您提供适用于此日期范围的所有折扣例外的折扣 ID。使用不同的关键字，因此您不会得到重复的 ID。让我们称之为“异常集”

```
select distinct d.id
from discount_exception e 
join discount d on d.id = e.discount_id
where e.from_date between '2013-03-02' and '2013-03-04'
or e.to_date between '2013-03-02' and '2013-03-04'; 
```

然后，您可以执行折扣表的另一个联接以查找适用于日期范围的所有折扣（即 id 不在上面设置的例外中的折扣）

```
select *
from discount
where id not in (
  select distinct d.id
  from discount_exception e 
  join discount d on d.id = e.discount_id
  where e.from_date between '2013-03-02' and '2013-03-04'
  or e.to_date between '2013-03-02' and '2013-03-04'
); 
```

# java - jbutton id没有显示

> ID：15541028
> 
> 赞同：0
> 
> 时间：2013-03-21T06:40:45.660
> 
> 标签：java, swing, jbutton

我刚刚创建了一个简单的图像面板并在面板上添加了一个按钮

任何人都可以告诉我代码中的问题吗？

图像显示但按钮不显示

```
package inventorymanagement;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import javax.swing.JButton;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class ImageTest {

public static void main(String[] args) {
ImagePanel panel = new ImagePanel(new ImageIcon("E:/Desktop[/icon/6470729-exclamation-mark-icon-button-3d-red-glossy-circle.jpg").getImage());
JButton jButton1=new JButton("jButton1");
panel.add(jButton1);

JFrame frame = new JFrame();
frame.getContentPane().add(panel);
frame.pack();
frame.setVisible(true);

}
}

class ImagePanel extends JPanel {

private Image img;
public ImagePanel(String img) {
this(new ImageIcon(img).getImage());
}

public ImagePanel(Image img) {
this.img = img;
Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
setPreferredSize(size);
setMinimumSize(size);
setMaximumSize(size);
setSize(size);
setLayout(null);
}

public void paintComponent(Graphics g) {
g.drawImage(img, 0, 0, null);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:14:37.790

您必须设置面板的布局

只需`panel.setLayout(new java.awt.FlowLayout());`在添加按钮之前添加`panel.add(jButton1);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:14:47.347

当您`setLayout(null);`需要为所有组件设置边界时。您应该阅读这些教程： [http ://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

# html - HTML5 矢量效果

> ID：15541031
> 
> 赞同：1
> 
> 时间：2013-03-21T06:40:55.987
> 
> 标签：html, animation, svg, html5-canvas

我有一个想法，我希望您能就如何实现它提供意见。本质上，我希望有一个页面元素可以响应和动画。让我举个例子 - 假设我将鼠标指向按钮或图像，当鼠标指向它时，它会在它周围播放类似[http://hakim.se/experiments/html5/magnetic/02/](http://hakim.se/experiments/html5/magnetic/02/)的动画，如果我指向远离它，它就会消失。[或者，拥有类似http://hakim.se/experiments/html5/trail/03/](http://hakim.se/experiments/html5/trail/03/)之类的东西会很酷从当前鼠标位置流向我想引起用户注意的元素。我对如何实现这一点知之甚少，认为创建叠加层和使用元素的坐标是最合适的，但不是 100% 可以这样做。您对最佳实践、现有库/框架有什么建议或建议可以帮助我吗？

谢谢！

# asp.net-mvc - webconfig 文件中的错误

> ID：15541043
> 
> 赞同：2
> 
> 时间：2013-03-21T06:41:44.867
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 MVC 4 的新手。我正在编写一个在浏览互联网时发现的[教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)，我正在尝试将模型添加到我的应用程序中。我已经创建了一个模型，当我尝试添加控制器时它给了我一条错误消息喜欢..

```
Unable to retrive metadata for 'Practice.Models.Customer'.Invalid value for Key 'attachdbfilename'. 
```

**型号**：

```
public class Customer
 {

    public int ID { get; set; }
    public string Name { get; set; }
    public int Amount { get; set;}
 }
 public class CustomerDBContext : DbContext
 {
    public DbSet<Customer> Customers { get; set; }
 } 
```

**连接字符串**：

```
 <connectionStrings>
<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-practice-20130320183458;Integrated Security=SSPI" providerName="System.Data.SqlClient" />
<add name="CustomerDBContext"
     connectionString="Data Source=(LocalDB)\\v11.0;AttachDbFilename=|DataDirectory|\Customers.mdf;Integrated Security=SSPI"
     providerName="System.Data.SqlClient" /> 
```

我认为 ConnectionString 有一些问题，但不知道它在哪里。请帮我解决这个问题..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T22:40:50.207

我认为你必须让你的实体虚拟化。

```
public virtual int ID { get; set; }
public virtual string Name { get; set; }
public virtual int Amount { get; set;} 
```

# c# - C# - 发送邮件失败

> ID：15541045
> 
> 赞同：3
> 
> 时间：2013-03-21T06:41:53.167
> 
> 标签：c#, asp.net, .net

当我部署它时，此代码在我的本地机器上运行良好。它给出了`Failure sending mail`错误..请帮助...

```
MailAddress addrsTo = new MailAddress(toEmail);
MailAddress addrsFrom = new MailAddress("XXX@XXX.com", "XXX Title");

MailMessage mailmsg = new MailMessage(addrsFrom, addrsTo);
mailmsg.Subject = mailSbjct;

mailmsg.Body = "XXX Body";

SmtpClient smtp = new SmtpClient("mail.XXX.com");
smtp.EnableSsl = false;
smtp.Port = 26;
smtp.Credentials = new NetworkCredential("XXX@XXX.com", "XXXXXXX");

try {
    smtp.Send(mailmsg);
} catch (Exception exc) {
    throw new XXXException(1234, "---" + exc.Message);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T06:49:58.027

如果您使用的是[gmail](http://www.gmail.com) ，您可以试试这个：

```
 MailMessage mail = new MailMessage();
 mail.Subject = "Your Subject";
 mail.From = new MailAddress("senderMailAddress");
 mail.To.Add("ReceiverMailAddress");
 mail.Body = "Hello! your mail content goes here...";
 mail.IsBodyHtml = true;

 SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);
 smtp.EnableSsl = true;
 NetworkCredential netCre = new NetworkCredential("SenderMailAddress","SenderPassword" );
 smtp.Credentials = netCre;

 try
  {
   smtp.Send(mail);                
  }
  catch (Exception ex)
  {               
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T07:01:19.710

正如您在问题中提到的，**在我的本地机器上运行良好**。
这表明问题出在您提供用于发送邮件的凭据上。

## 编辑 1

如果您使用**自己的域凭据**，那么它将无法在服务器上运行。
用户 IIS 应该有足够的权限来发送邮件。
IIS 用户更多详细信息
[http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis](http://www.iis.net/learn/get-started/planning-for-security/understanding-built-in-user-and-group-accounts-in-iis)

这是一个 SO 链接
[如何通过 IIS7 发送电子邮件？](https://stackoverflow.com/questions/4585130/how-to-send-email-through-iis7)

# google-drive-realtime-api - 如何在 Android 设备上重现 UserRecoverableAuthIOException？

> ID：15541048
> 
> 赞同：3
> 
> 时间：2013-03-21T06:42:19.277
> 
> 标签：google-drive-realtime-api

当我使用 Google Drive API 进行调试时，我遇到了这个问题：

当我第一次调用`service.about().get().execute();`我的应用程序时，它会捕获`UserRecoverableAuthIOException`并且我的代码调用 startActivity。

但是在我确认之后`auth dialog`，它就再也没有出现过。

我想调试整个身份验证例程，但是如何擦除身份验证数据并让它再次引发异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T16:09:40.360

只需将应用与您使用的 Google 服务断开连接，例如 Google Drive 网页中的“管理应用”设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T06:21:40.723

转到[https://accounts.google.com/IssuedAuthSubTokens](https://accounts.google.com/IssuedAuthSubTokens)以撤消应用程序的访问权限并再次期待异常。

# php - 在数组中获取 wordpress 自定义帖子类型元框值

> ID：15541052
> 
> 赞同：1
> 
> 时间：2013-03-21T06:42:26.697
> 
> 标签：php, custom-post-type, wordpress

我在 wordpress 主题中创建了“投资组合”自定义帖子类型。

```
<?php
    add_action( 'init', 'portfolio' );
    function portfolio() {
      $labels = array(
        'name' => _x('portfolio', 'post type general name'),
        'singular_name' => _x('portfolio', 'post type singular name'),
        'add_new' => _x('Add New', 'Slide'),
        'add_new_item' => __('Add New slide'),
        'edit_item' => __('Edit project'),
        'new_item' => __('New project'),
        'view_item' => __('View project'),
        'search_items' => __('Search project'),
        'not_found' =>  __('No project Found'),
        'not_found_in_trash' => __('No project found in Trash'),
        'parent_item_colon' => ''
      );

    $supports = array( 'title','editor','thumbnail');

      register_post_type( 'portfolio', 
        array(
          'labels' => $labels,
          'public' => false,
          'publicly_queryable'          =>false,
          'show_ui'         =>true,
          'show_in_menu'        =>true,
          'query_var'           =>true,
          'rewrite'         =>false,
          'capability_type'             =>'post',
          'has_archive'         =>false,
          'hierarchical'        =>false,
          'menu_position'       =>15,
          'supports' => $supports
        )
      );
    }

    ?> 
```

在其中成功添加了一个带有文本输入的元框，以获取投资组合图像的 URL。以这种方式添加了 5 个帖子，其中在元框中具有投资组合图像 url。该值的输出是`<?php echo get_post_meta($post->ID,'portfolio-url',true); ?>`

我创建了 5 个投资组合，每个投资组合都有 url。如何获取数组中所有 url 的值，以便我可以将 jquery 中的这些值用作变量？

```
var _portfolioImage = [url1,url2,url3,url4,url5]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:02:22.010

把它写在一个循环中

```
<script>
var arr = new Array();
/*loop starts here*/
for(i=0;i<5;i++){

     arr.push('<?php echo get_post_meta($post->ID,'portfolio-url',true); ?>');

/*loop ends here*/
}
</script> 
```

# c# - 在 C# 中检查用户帐户设置

> ID：15541054
> 
> 赞同：2
> 
> 时间：2013-03-21T06:42:32.837
> 
> 标签：c#, windows-7, user-accounts

是否可以从 ac#/.Net 程序中查看`User Account Control Settings`. 具体来说，我想知道它是否设置为以下之一

*   始终通知

*   从不通知

我不想更改设置，但我想知道它们是什么。![在此处输入图像描述](../Images/7f9dca8e0607a20b417cb976def3b734.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:45:37.833

我不确定你能做到。您可以做的是创建和嵌入清单。

> 在 Windows Vista® 中，标记应用程序的正确方法是在程序中嵌入应用程序清单，告诉操作系统应用程序需要什么。在 Windows Vista 版本中，有一些规定允许未显示或未签名的代码使用完整的管理访问令牌运行。

请看[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)帖子。

根据我的经验，它不仅适用于Vista，而且适用于Win7，Win2008。

我们确实尝试过使用 manifest，它确实有效。

另外，这可能对您也有帮助：

运行这样的命令将清单嵌入到 exe：

```
mt.exe -manifest  "C:\path\to\ypur\manifest\my.manifest" -outputresource:"Path\to\your\exefile\My.exe" 
```

将此命令用于构建后事件：

```
mt.exe -manifest "$(ProjectDir)$(TargetName).exe.manifest" -updateresource:"$(TargetDir)$(TargetName).exe;" 
```

# watir - 从 watir webdriver 中的 span 元素中检索文本

> ID：15541059
> 
> 赞同：4
> 
> 时间：2013-03-21T06:42:46.543
> 
> 标签：watir, watir-webdriver

我有以下内容：

```
<ul class="a">
  <li class="b">
    <a class="c">
      <span class="d">
        <strong>text</strong>
      </span>
    </a>
  </li>
</ul> 
```

我正在尝试从跨度中获取“文本”。

当我尝试：

```
puts browser.ul( :class =>'a').li( :class =>'b').link(:class =>'c').span(:class =>'d') 
```

我把`span`元素拿回来了。`#<Watir::Span:0x007fa1d11edb18>`我应该这样做。

但是在尝试时：

```
puts browser.ul( :class =>'a').li( :class =>'b').link(:class =>'c').span(:class =>'d').text 
```

我收到一条错误消息：

```
unable to locate element, using {:class=>'b', :tag_name=>"li"} 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T12:35:07.587

如果您可以指出问题可重现的页面，这将有所帮助，即使这意味着您自己创建一个页面，将其放入保管箱并公开。

您是否甚至尝试使用您发布的 html 和 ruby​​ 代码复制问题？我问是因为提供的代码无法重现该问题。自己看看：

```
> browser.ul( :class =>'a').li( :class =>'b').link(:class =>'c').span(:class =>'d')
 => #<Watir::Span:0x..fa66c75ff618434cc located=false selector={:class=>"d", :tag_name=>"span"}> 

> browser.ul( :class =>'a').li( :class =>'b').link(:class =>'c').span(:class =>'d').text
 => "text" 
```

据我了解，您很惊讶，当您提供一些代码时，Watir 返回一个元素，但是当您想对该元素执行方法时，它抱怨找不到该元素。

仔细看看代表页面元素的 ruby​​ 对象：

```
#<Watir::Span:0x..fa66c75ff618434cc located=false selector={:class=>"d", :tag_name=>"span"}> 
```

请注意`located=false`。据我所知，这意味着 watir 在尝试访问它之前会创建一个 ruby​​ 对象，因此代码的第一行不会引发任何异常。但是当您尝试使用该元素时，watir 在页面上找不到它并抱怨。

# html - Div `100%` 高度和 `40px` 下边距

> ID：15541062
> 
> 赞同：1
> 
> 时间：2013-03-21T06:42:54.420
> 
> 标签：html, css, transition, margin, padding

我知道在这里之前有人问过类似的问题。

但它有点不同，因为它涉及`css transitions`.

[http://jsfiddle.net/fariskassim/rWNJN/4/](http://jsfiddle.net/fariskassim/rWNJN/4/)

```
.panel{

width:inherit;
height: 0%;
display:block;
position: absolute;

background: #000;
opacity:0;
z-index: 2;

margin-top: 40px;
margin-right: 40px;
margin-left: 40px;
margin-bottom: 40px;

bottom:0;
top:0;
left:0;
right:0;

-webkit-transition: all .8s ease-in-out;
-moz-transition: all .8s ease-in-out;
-o-transition: all .8s ease-in-out;
transition: all .8s ease-in-out;

} 
```

打开盒子后，

我试图让绿色框`40px`在浏览器周边的所有侧面都有一个，我已经设法为左/右和顶部做到了，但底部是一个问题。

知道我该如何解决这个问题吗？

编辑：同时，我仍然想要打开和关闭盒子时的擦除效果。

[http://jsfiddle.net/fariskassim/rWNJN/4/](http://jsfiddle.net/fariskassim/rWNJN/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:55:52.890

**随心所欲**+ 响应高度

```
.panel:target{

    background-color: rgba(226, 229, 16, 0.8);
    opacity:100;
    height: auto;

    width:inherit;
    display:block;

    margin-top: 40px;
    margin-right: 40px;
    margin-left: 40px;
    margin-bottom:40px;
    bottom:0;
    top:0;
    left:0;
    right:0;
} 
```

[自动调整演示](http://jsfiddle.net/stackmanoz/rWNJN/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:51:39.550

那是因为你已经`height:100%`在`.panel:target`. 删除它就可以了。

```
.panel:target{

    background-color: rgba(226, 229, 16, 0.8);
    opacity:100;

    width:inherit;
    display:block;

    margin-top: 40px;
    margin-right: 40px;
    margin-left: 40px;

    bottom:0;
    top:0;
    left:0;
    right:0;
} 
```

**[演示](http://jsfiddle.net/rWNJN/6/)**

# javascript - 如何在 node.js 中编写测试驱动编程？

> ID：15541066
> 
> 赞同：0
> 
> 时间：2013-03-21T06:43:03.993
> 
> 标签：javascript, node.js, routes, express, serverside-javascript

最近我接触到了 node.js 以及 express、mongodb 和 ejs 等包。我有几个问题：

作为学习目的，我创建了一个使用 express、mongodb 和 ejs[的用户管理的 github存储库。](https://github.com/justin-john/node-user-management)我的所有功能都在[routes/users.js](https://github.com/justin-john/node-user-management/blob/master/routes/users.js)文件中。我需要编写所有这些功能的测试用例。如何使用此示例创建测试驱动编程？

在我的文件[路线](https://github.com/justin-john/node-user-management/blob/master/app.js#L25-L26)中`app.js`。

```
app.get('/login', user.login);
app.post('/login', user.loginSubmit); 
```

我需要为登录页面渲染和提交等编写不同的路由。如果还有一些 ajax 请求，那么`app.js`在考虑单个页面的路由时，我们在文件中有很多路由。是这样还是需要改变我的结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:02:25.447

我推荐你[Mocha](http://visionmedia.github.com/mocha/)，它来自 expressjs 的同一个人。它支持您的代码的测试覆盖率、之前、之后的钩子，当然它还支持异步代码。

我将它与 should.js 甚至 chai.js 结合使用

mocha 中的测试看起来像，代码来自我自己的测试，我使用 superagent 来发出请求。

```
it('requests a permission with valid ticket', function (done){
        agent
            .post(route.server + '/preq')
            .set('Content-Type', 'application/json')
            .set('Authorization', 'Bearer ' + ACCESSTOKEN)
            .send({ticket: TICKET})
            .end(function (req,res) {

                res.should.have.property('statusCode').that.equals(201);
                var location = .....
                res.headers.should.have.property('location').that.is.equal(location);
                done();
            });
    }) 
```

# gnuplot - 用 GNUplot 绘制 exp 系列

> ID：15541071
> 
> 赞同：0
> 
> 时间：2013-03-21T06:43:13.963
> 
> 标签：gnuplot

我必须用 gnuplot 绘制 2^number。我的数据如下所示

```
2 1
4 10
8 15
16 20
.. 
```

在 x 轴上，我希望数字的形式为 2^power。我尝试 `set format x "2^%L`过，但在 x 轴上到处都有 2^0。请提出一些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:11:16.407

%L 使用当前的对数刻度，默认以 10 为底，因此需要输入：

```
set logscale x 2 
```

将其设置为基数 2

# iphone - 将事件添加到 iPhone 中的默认日历时出现错误的时间

> ID：15541076
> 
> 赞同：0
> 
> 时间：2013-03-21T06:43:26.903
> 
> 标签：iphone, ios, objective-c, calendar, ekeventstore

现在我正在 iPhone 中开发日历应用程序。我正在尝试将事件添加到 iPhone 中的默认日历。在这种情况下，添加事件已成功完成。但我无法在正确的开始时间添加事件。事件的开始日期完全正确，但 iPhone 的默认日历中的时间不同。我使用了以下代码。请帮帮我..

NSLog(@"开始标签为：%@",startLabel.text);// 2013-03-28 12:03:41 PM

```
NSLog(@"end label is : %@",endLabel.text);//2013-03-28 01:03:41 PM

     NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
     [dateFormat setDateFormat:@"yyyy-MM-dd hh:mm:ss a"];
     [dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
     NSLog(@"description is : %@",[dateFormat description]);

     NSDate *sDate=[dateFormat dateFromString:startLabel.text];      
     NSDate *eDate = [dateFormat dateFromString:endLabel.text];
     NSLog(@"startDate is : %@",sDate);//2013-03-28 12:03:41 +0000
     NSLog(@"endDate is : %@",eDate);// 2013-03-28 13:03:41 +0000
     self.eventStore = [[EKEventStore alloc] init];
     EKEvent *myevent = [EKEvent eventWithEventStore:self.eventStore];
     myevent.title = titleFld.text;
     myevent.location  = locFld.text;
     myevent.startDate = sDate;
     myevent.endDate =  eDate;
     [myevent setCalendar:[eventStore defaultCalendarForNewEvents]];
     NSError *err;
     [self.eventStore saveEvent:myevent span:EKSpanThisEvent error:&err]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:48:40.237

采用`[dateFormat setTimeZone:[NSTimeZone systemTimeZone]];`

代替

`[dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];`

希望这能解决您的问题。

# c# - 具有特定条件内容的网格加载

> ID：15541081
> 
> 赞同：0
> 
> 时间：2013-03-21T06:44:03.017
> 
> 标签：c#, .net, sql, winforms, linq

我有以下数据库表>>

```
 (string)   (float)     (float)       (float)
    TradeNo | Buy_Sell | Trade_Qty | Market_Price

    205412     1           50            300   

    205487     2           30            350 

    208754     1           20            200 
```

在此表中有列 Buy_Sell。买=1，卖=2

当我绑定网格时，值会按原样显示。

但是，我想在网格中将它们显示为 >

```
TradeNo | Buy_Sell | Trade_Qty | Market_Price

205412     Buy           50            300   

205487     Sell          30            350 

205487     Buy           20            200 
```

我怎样才能做到这一点？

我只是用以下代码绑定了网格>

```
try
{
    con.Open();
    da = new SqlDataAdapter("select ..., 
                TradeNo, Buy_Sell, TradeQty, MarketPrice", con);
    DataSet ds = new DataSet();
    da.Fill(ds);
    // gvTradeFile.DataSource = ds.Tables[0];
    gvTradeFile.DataSource = ds.Tables[0].AsEnumerable()
        .Select(d => new
        {
            TradeNo = d.Field<string>("TradeNo"),
            Buy_Sell = d.Field<float>("Buy_Sell") == 1 ? "Buy" : "Sell",
            TradeQty = d.Field<float>("TradeQty"),
            Market_Price = d.Field<float>("MarketPrice")
        });             
 }
 catch (Exception ex)
 {
     MessageBox.Show(ex.Message);
 } 
```

这段代码没有给我任何例外，但也没有在网格中显示我的结果。

除了 LINQ 查询之外，还有其他方法可以得到这样的结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:58:18.443

`Select`方法返回`IQueryable`结果。这不足以使数据绑定正常工作，因为属性`DataSource`等待`IList`、或的对象。`IListSource``IBindingList``IBindingListView`

不过，解决方案很简单 - 只需将您的结果数据集转换为实现这些接口之一的东西，例如只需调用`ToList`：

```
.Select(d => new {...}).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:11:09.780

[您需要使用AsDataView()](http://msdn.microsoft.com/en-gb/library/bb907985.aspx)将查询转换回 DataView 。例如

```
.Select(d => new
{
    TradeNo = d.Field<string>("TradeNo"),
    Buy_Sell = d.Field<float>("Buy_Sell") == 1 ? "Buy" : "Sell",
    TradeQty = d.Field<float>("TradeQty"),
    Market_Price = d.Field<float>("MarketPrice")
})
.AsDataView(); 
```

# python - 使用 Python 提取 HTML 数据字段

> ID：15541085
> 
> 赞同：0
> 
> 时间：2013-03-21T06:44:28.413
> 
> 标签：python, python-3.x, extract, html-content-extraction

请原谅我缺乏知识，但是给定以下格式的 HTML，提取单个数据字段的最佳方法是什么？请记住，它们中的一些或全部通常为 NULL，在这种情况下，我们将它们保持为 NULL。

```
<div class="profile-section" id="a-bit-more-about">
                            <dl>
            <dt>Name:</dt>
            <dd><span class="given-name">Clem</span> <span class="family-name">Kadiddlehopper</span></dd>
        </dl>
        <!-- <span class="RealName">/ <span class="fn n"><span class="given-name">Clem</span> <span class="family-name">Kadiddlehopper</span></span></span> -->
                        <dl>
        <dt>Joined:</dt>
        <dd>September 1910</dd>
    </dl>
    <div class="sep"></div>
    <dl>
        <dt>Hometown:</dt>
        <dd>Quiet Rest Maximum Security Twilight Home</dd>
    </dl>
    <dl>
        <dt>Currently:</dt>
        <dd><span class="adr"><span class="locality">They won't tell me</span>, <span class="country-name">Zimbobwe</span></span></dd>
    </dl>
    <div class="sep"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:48:28.390

您需要一个 HTML 解析器。我推荐[美丽的汤](http://www.crummy.com/software/BeautifulSoup/)或[lxml。](http://lxml.de/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:43:25.630

使用第三方模块美汤，lxml或内置模块html.parser。例如：

```
from bs4 import BeautifulSoup
soup = BeautifulSoup('<html><body><a>bbb</a></body></html')
soup.find('a') 
```

或者，如果喜欢，您可以将正则表达式用于小目标。

# python - 如何在 Python 中从 USB 设备 VID 和 PID 确定 sysfs devpath？

> ID：15541088
> 
> 赞同：1
> 
> 时间：2013-03-21T06:44:37.347
> 
> 标签：python, linux, usb, sysfs

我需要从 Python 中的 VID 和 PID 在 sysfs 树中找到一个 USB 设备。这里最明智的方法是什么？递归扫描目录树是我想到的唯一想法。有没有更好的方法？顺便说一句，我不能使用 libusb 绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:05:55.733

您可以尝试对 USB 设备使用 sysfs 路径、/sys/bus/usb/devices/，并为 idProduct 和 idVendor 文件使用通配符

```
/sys/bus/usb/devices/*/idProduct
/sys/bus/usb/devices/*/idVendor 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T08:18:15.167

两年后，从识别设备到实际设备的连接仍然不是直截了当的。您必须扫描 sysfs 以识别设备是正确的。当前没有从唯一 ID 到设备的索引。

这是一个例子：

我有一个 USB → LPT 端口连接（没有序列号）

我在 /sys/class 下找到设备。在这种情况下，在 usbmisc 下：

```
> ls -l /sys/class/usbmisc
lrwxrwxrwx 1 root root 0 Sep 11 12:11 lp0 -> ../../devices/platform/bcm2708_usb/usb1/1-1/1-1.3/1-1.3.4/1-1.3.4:1.0/usbmisc/lp0 
```

要检索有关设备的供应商和其他信息，请遍历树：

进入真实路径：

```
 > cd -P /sys/class/usbmisc/lp0 
```

沿着分支走一点（到这里： /sys/devices/platform/bcm2708_usb/usb1/1-1/1-1.3/1-1.3.4 ）：

```
 > cd ../../../ 
```

在这里您可以找到有用的文件：
idVendor
idProduct
serial
busnum
devnum

我可以通过不止一种方式检索设备名称：

我可以使用上面的 busnum 和 devnum 并组成这个设备名称：**/dev/usb/001/008**

或使用 /sys/class/usbmisc/lp0/uevent 中的信息：
MAJOR=180
MINOR=0
DEVNAME=usb/lp0

将 /dev 添加到 DEVNAME 值，我得到**/dev/usb/lp0**

我本来希望有一个更简单的方法，有一个唯一的密钥、一个描述和一个指向每个设备的链接。人们可能希望它会出现在 sysfs 的未来版本中。但由于使用 C sysfs API 更容易使用，前景可能还有很长的路要走

# java - hibernate如何在表中间插入记录？

> ID：15541095
> 
> 赞同：0
> 
> 时间：2013-03-21T06:45:17.290
> 
> 标签：java, database, hibernate, jpa

我有一张包含数千条记录的表。我想在中间插入记录。我保存在表中的对象非常复杂。这是一种方便的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:22:07.233

如果考虑表中数据的顺序与表的主键顺序相同。然后，您可以在 pojo 中插入指定*主键*的记录（设置 id 例如：）`employee.setId(25);`。但是，如果您这样做，则不应将主键设为 *auto_increment*。

# r - 如何在 R 中安装作为 tar 文件的 PROcess Packages？

> ID：15541101
> 
> 赞同：2
> 
> 时间：2013-03-21T06:45:35.427
> 
> 标签：r

我尝试通过以下方式安装 PROcess 包：

```
>install.packages("/home/R-Packages/PROcess.tar.gz",repos=NULL) 
```

然后出现以下错误：

```
ERROR: dependency ‘Icens’ is not available for package ‘PROcess’ 
```

然后我尝试安装 Icens 包：

```
>install.packages("Icens") 
```

然后出现以下错误：

```
package ‘Icens’ is not available (for R version 2.15.3) 
```

所以任何人都可以帮助我解决这个问题并提出一些建议，以便我能够安装 PROcess 包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:54:41.313

Icens 软件包已从 CRAN 移至另一个存储库：Bioconductor。[Icens 的 Bioconductor 页面](http://www.bioconductor.org/packages/release/bioc/html/Icens.html)声明可以使用以下命令安装它：

```
source("http://bioconductor.org/biocLite.R")
biocLite("Icens") 
```

# c# - SQL 命令生成器查询值

> ID：15541104
> 
> 赞同：1
> 
> 时间：2013-03-21T06:45:40.273
> 
> 标签：c#, .net-4.0, sqlcommandbuilder

我有一个 SQLDataAdapter，在我的查询中我获取两个字段，ID（PK），名称。

我向我的数据适配器注册了一个 sql 命令生成器，因此我不必编写查询来更新数据库中的表。

当我调用该`da.update()`方法时，sql 会抛出无法将 null 插入 DimensionID 的错误，由于此错误，我必须在我的数据集中也选择此字段，然后我在网格中使用适当的值填充此字段。然后`da.update()`工作。

现在的问题是我不希望这个字段出现在我的网格中，当我将其可见属性设置为 false 时，命令生成器会在查询中省略此列。为了解决这个问题，我必须将列宽设置为 0，但我的网格中仍然有一条细线。

有没有更好的方法来处理这种情况？除了我手动编写查询。

下面是填充网格的代码；

```
 private void frmAttributes_Load(object sender, EventArgs e)
    {
        ds.Tables.Add("Attributes");
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
        cmd.CommandText = "select ID,Attribute,Code,DimensionID from DimensionAttribute where dimensionid = " + SelectedAttribute;
        da.SelectCommand = cmd;
        cb.DataAdapter = da;

        da.Fill(ds,"Attributes");

        this.dgvAttributes.DataSource = ds.Tables["Attributes"];
        this.dgvAttributes.Columns["ID"].Visible = false;
        this.dgvAttributes.Columns["DimensionID"].Width = 0;

    } 
```

这是更新按钮背后的代码：

```
 private void btnOk_Click(object sender, EventArgs e)
    {

        if (ds.HasChanges())
        {
            DialogResult d = new DialogResult();
            d = MessageBox.Show("Are you sure you want to save changes to database?", this.Text, MessageBoxButtons.YesNo, MessageBoxIcon.Question);
            if (d == DialogResult.Yes)
            {
                try
                {
                    fillDimensionID();
                  da.UpdateCommand =  cb.GetUpdateCommand();
                    da.InsertCommand = cb.GetInsertCommand();
                    da.DeleteCommand = cb.GetDeleteCommand();

                    da.Update(ds,"Attributes");

                    this.DialogResult = DialogResult.OK;
                    this.Close();

                }
                catch (Exception)
                {

                    throw;
                }

            }
            else
            {
                return;
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:01:07.400

这是 AutoGeneratedCommands 的问题。它们要求在触发更新之前为每个属性分配适当的值。

您可以采用以下任一方法：

1.  修改列 DimensionID 以接受空值；或者

2.  在数据库中编写您自己的更新 SP 并将其注册为 UpdateCommand 与您的数据适配器。

希望这会告诉你路径。

# visual-studio-2010 - 带 TFS 的 DBGhost

> ID：15541105
> 
> 赞同：0
> 
> 时间：2013-03-21T06:45:43.203
> 
> 标签：visual-studio-2010, tfs-migration, dbghost

我们目前正在将 DBGhost 与我们的 SQL 服务器数据库一起使用。当前的版本控制工具是 VSS，我们正在使用 DBGhost。现在，我们想迁移到 TFS 并且有一些关于使用 DBGhost 和 TFS 的问题。

1.  DBGhost 可以与 TFS 一起使用吗？
2.  如果是，它期望从 TFS 得到什么样的输出？

    一个。只需签入与 VSS 相同的数据库文件（表、存储过程 .sql 文件等）

    湾。或者在文件签入后需要 TFS 运行构建，然后 DBGhost 查看构建的结果？

我的意思是，对于将 DB Ghost 与 TFS 一起使用，是否可以像这样将 VSS 中的所有代码放入 TFS 中，或者应该首先使用 SSDT 将其转换为 Visual Studio 数据库解决方案，然后放入 TFS，然后在 TFS 中定义每次签入后都会运行的构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:39:50.460

DB Ghost 与 TFS 配合得很好，我们有很多客户在使用它。本质上，您所要做的就是从 TFS 存储库中将命令行拉到本地文件夹，然后将 DB Ghost 指向该组文件夹，其余的都是一样的。

# android - 条码扫描

> ID：15541106
> 
> 赞同：1
> 
> 时间：2013-03-21T06:45:44.707
> 
> 标签：android, zxing, barcode-scanner

我正在使用 Zxing Lib 扫描二维码和条形码。我的代码在二维码上运行良好，但不幸的是它也不适用于条形码。

```
 Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.setPackage("com.google.zxing.client.android");
    intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0); 
```

任何帮助都会非常显着。在我的应用程序中，我无法使用 InTENTINTEGRATOR

在 zxing LIB 中提供了以下格式-

```
 static final Collection<BarcodeFormat> PRODUCT_FORMATS;
       static final Collection<BarcodeFormat> ONE_D_FORMATS;
       static final Collection<BarcodeFormat> QR_CODE_FORMATS =         EnumSet.of(BarcodeFormat.QR_CODE);
    static final Collection<BarcodeFormat> DATA_MATRIX_FORMATS = EnumSet.of(BarcodeFormat.DATA_MATRIX);
     static {
    PRODUCT_FORMATS = EnumSet.of(BarcodeFormat.UPC_A,
                             BarcodeFormat.UPC_E,
                             BarcodeFormat.EAN_13,
                             BarcodeFormat.EAN_8,
                             BarcodeFormat.RSS_14);
ONE_D_FORMATS = EnumSet.of(BarcodeFormat.CODE_39,
                           BarcodeFormat.CODE_93,
                           BarcodeFormat.CODE_128,
                           BarcodeFormat.ITF);
ONE_D_FORMATS.addAll(PRODUCT_FORMATS); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:51:46.877

你用它来扫描条码

```
private void drawResultPoints(Bitmap barcode, Result rawResult) {
    ResultPoint[] points = rawResult.getResultPoints();
    if (points != null && points.length > 0) {
        Canvas canvas = new Canvas(barcode);
        Paint paint = new Paint();
        paint.setColor(getResources().getColor(R.color.result_points));
        if (points.length == 2) {
            paint.setStrokeWidth(4.0f);
            drawLine(canvas, paint, points[0], points[1]);
        } else if (points.length == 4
                && (rawResult.getBarcodeFormat() == BarcodeFormat.UPC_A || rawResult
                        .getBarcodeFormat() == BarcodeFormat.EAN_13)) {
            // Hacky special case -- draw two lines, for the barcode and
            // metadata
            drawLine(canvas, paint, points[0], points[1]);
            drawLine(canvas, paint, points[2], points[3]);
        } else {
            paint.setStrokeWidth(10.0f);
            for (ResultPoint point : points) {
                canvas.drawPoint(point.getX(), point.getY(), paint);
            }
        }
    }
} 
```

还要检查这个

```
 private boolean encodeContentsFromZXingIntent(Intent intent) {
 // Default to QR_CODE if no format given.
String formatString = intent.getStringExtra(Intents.Encode.FORMAT);
format = null;
if (formatString != null) {
  try {
    format = BarcodeFormat.valueOf(formatString);
  } catch (IllegalArgumentException iae) {
    // Ignore it then
  }
}
if (format == null || format == BarcodeFormat.QR_CODE) {
  String type = intent.getStringExtra(Intents.Encode.TYPE);
  if (type == null || type.length() == 0) {
    return false;
  }
  this.format = BarcodeFormat.QR_CODE;
  encodeQRCodeContents(intent, type);
} else {
  String data = intent.getStringExtra(Intents.Encode.DATA);
  if (data != null && data.length() > 0) {
    contents = data;
    displayContents = data;
    title = activity.getString(R.string.contents_text);
  }
}
return contents != null && contents.length() > 0; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:58:33.943

您可以尝试更改扫描模式。尝试类似：

```
intent.putExtra("SCAN_MODE", "PRODUCT_MODE"); 
```

或者

```
intent.putExtra("SCAN_MODE", "ONE_D_MODE"); 
```

您可以在以下页面上找到更多信息： [https ://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/Intents.java](https://code.google.com/p/zxing/source/browse/trunk/android/src/com/google/zxing/client/android/Intents.java)

# c - 在C中重复修改一个字符串

> ID：15541113
> 
> 赞同：1
> 
> 时间：2013-03-21T06:46:08.213
> 
> 标签：c, segmentation-fault

我想修改一个这样的字符串：—</p>

```
MainString="",            ToUpdate="ABC" -> return# "ABC=1"
MainString="ABC=1",       ToUpdate="ABC" -> return# "ABC=2"
MainString="ABC=2",       ToUpdate="ABC" -> return# "ABC=3"
MainString="ABC=3",       ToUpdate="XYZ" -> return# "ABC=3:XYZ=1"
MainString="ABC=3:XYZ=1", ToUpdate="XYZ" -> return# "ABC=3:XYZ=2"
MainString="ABC=3:XYZ=2", ToUpdate="XYZ" -> return# "ABC=3:XYZ=3" 
```

我有以下功能：

```
void UpdateString(char *MainString, char ToUpdate[20])
{
    char *pData[50][2];
    char *saveptr1=NULL;
    int i=0,j=0,nIsPresentFlag=0;
    unsigned int CdrCnt=1;
    char workbuf1[200];
    char workbuf[200];

    memset(workbuf,0,200);
    memset(workbuf1,0,200);

    if(strlen(MainString)>0)
    {
        strcat(MainString,":");
    }

    strcpy(workbuf1,MainString);

    pData[i][0]=strtok_r(workbuf1,"=",&saveptr1);
    pData[i][1]=strtok_r(NULL,":",&saveptr1);

    if(pData[i][0]) {i++;pData[i][0]=NULL; pData[i][1]=NULL;}

    while((pData[i][0]=strtok_r(NULL,"=",&saveptr1)))
    {
        pData[i][1]=strtok_r(NULL,":",&saveptr1);
        i++;
    }

    for(j=0;j<i;j++)
        if(strncmp(ToUpdate,pData[j][0],strlen(pData[j][0]))==0)
        {
            CdrCnt=atoi(pData[j][1]);
            CdrCnt+=1;
            sprintf(pData[j][1],"%d",CdrCnt);
            nIsPresentFlag=1;
            break;
        }

    if(nIsPresentFlag==1)
        for(j=0;j<i;j++)
            sprintf(workbuf,"%s%s=%s:",workbuf,pData[j][0],pData[j][1]);
    else
        sprintf(workbuf,"%s%s=%d:",MainString,ToUpdate,1);

    workbuf[strlen(workbuf)-1]='\0';

    memset(MainString,0,200);
    strcpy(MainString,workbuf);

} 
```

奇怪的是，这个函数正在工作，但有时会导致带有段错误的核心转储。

这段代码有什么问题？有什么更好的方法可以管理上述任务？

==================================================== ==============================

# 编辑 1

字符串声明：

```
char MainString[200]; 
```

调用是这样的：

```
UpdateString((char*)&MainString,"ABC"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:51:13.637

### 初步观察

鉴于此测试代码：

```
static void chkit(char *s, char *u)
{
    printf("[%s] && [%s]", s, u);
    UpdateString(s, u);
    printf(" ==> [%s]\n", s);
}

int main(void)
{
    char MainString[200] = "";

    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "XYZ");
    chkit(MainString, "XYZ");
    chkit(MainString, "XYZ");
    chkit(MainString, "DEF");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "XYZ");
    chkit(MainString, "ABC");
    chkit(MainString, "GHI");
    return 0;
} 
```

我得到的输出是：

```
[] && [ABC] ==> [ABC=1]
[ABC=1] && [ABC] ==> [ABC=2]
[ABC=2] && [ABC] ==> [ABC=3]
[ABC=3] && [XYZ] ==> [ABC=3:XYZ=1]
[ABC=3:XYZ=1] && [XYZ] ==> [ABC=3:XYZ=2]
[ABC=3:XYZ=2] && [XYZ] ==> [ABC=3:XYZ=3]
[ABC=3:XYZ=3] && [DEF] ==> [ABC=3:XYZ=3:DEF=1]
[ABC=3:XYZ=3:DEF=1] && [ABC] ==> [ABC=4:XYZ=3:DEF=1]
[ABC=4:XYZ=3:DEF=1] && [ABC] ==> [ABC=5:XYZ=3:DEF=1]
[ABC=5:XYZ=3:DEF=1] && [ABC] ==> [ABC=6:XYZ=3:DEF=1]
[ABC=6:XYZ=3:DEF=1] && [ABC] ==> [ABC=7:XYZ=3:DEF=1]
[ABC=7:XYZ=3:DEF=1] && [ABC] ==> [ABC=8:XYZ=3:DEF=1]
[ABC=8:XYZ=3:DEF=1] && [ABC] ==> [ABC=9:XYZ=3:DEF=1]
[ABC=9:XYZ=3:DEF=1] && [ABC] ==> [ABC=10:=3:DEF=1]
[ABC=10:=3:DEF=1] && [XYZ] ==> [ABC=10:=3:DEF=1:XYZ=1]
[ABC=10:=3:DEF=1:XYZ=1] && [ABC] ==> [ABC=11:3:DEF=1:XYZ=1]
[ABC=11:3:DEF=1:XYZ=1] && [GHI] ==> [ABC=11:3:DEF=1:XYZ=1:GHI=1] 
```

当数字从 1 位增加到 2 位时，显然存在问题。

### 一个问题

在代码中：

```
if (nIsPresentFlag == 1)
    for (j = 0; j < i; j++)
        sprintf(workbuf, "%s%s=%s:", workbuf, pData[j][0], pData[j][1]); 
```

您通过写入`workbuf`并将其作为参数之一传递来调用未定义的行为。那简直是危险的。你有一定的几率侥幸逃脱，但“侥幸逃脱”是一个有效的术语——不能保证它会奏效。

当您将新号码格式化为空间不足时，会出现覆盖问题。

### 工作代码

下面的代码似乎工作：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

static void UpdateString(char *MainString, char ToUpdate[20])
{
    char *pData[50][2];
    char *saveptr1 = NULL;
    int   i = 0;
    int   nIsPresentFlag = 0;
    char  workbuf1[200];
    char  workbuf[200];
    char  extra[16];

    if (strlen(MainString) > 0)
        strcat(MainString, ":");

    strcpy(workbuf1, MainString);

    pData[i][0] = strtok_r(workbuf1, "=", &saveptr1);
    pData[i][1] = strtok_r(NULL, ":", &saveptr1);

    if (pData[i][0])
        i++;

    while ((pData[i][0] = strtok_r(NULL, "=", &saveptr1)) != 0)
    {
        pData[i][1] = strtok_r(NULL, ":", &saveptr1);
        i++;
    }

    for (int j = 0; j < i; j++)
    {
        if (strncmp(ToUpdate, pData[j][0], strlen(pData[j][0])) == 0)
        {
            unsigned int CdrCnt = atoi(pData[j][1]);
            CdrCnt += 1;
            pData[j][1] = extra;
            sprintf(pData[j][1], "%u", CdrCnt);
            nIsPresentFlag = 1;
            break;
        }
    }

    if (nIsPresentFlag == 1)
    {
        char *dst = workbuf;
        for (int j = 0; j < i; j++)
        {
            int n = sprintf(dst, "%s=%s:", pData[j][0], pData[j][1]);
            /* Broken if sprintf() returns -1 */
            dst += n;
        }
    }
    else
        sprintf(workbuf, "%s%s=%d:", MainString, ToUpdate, 1);

    workbuf[strlen(workbuf)-1] = '\0';

    strcpy(MainString, workbuf);
}

static void chkit(char *s, char *u)
{
    printf("[%s] && [%s]", s, u);
    UpdateString(s, u);
    printf(" ==> [%s]\n", s);
}

int main(void)
{
    char MainString[200] = "";

    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "XYZ");
    chkit(MainString, "XYZ");
    chkit(MainString, "XYZ");
    chkit(MainString, "DEF");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "ABC");
    chkit(MainString, "XYZ");
    chkit(MainString, "ABC");
    chkit(MainString, "GHI");
    chkit(MainString, "PQRSTU");
    chkit(MainString, "I");
    chkit(MainString, "I");
    chkit(MainString, "I");
    chkit(MainString, "PQRSTU");

    return 0;
} 
```

它省略了`memset()`操作；可以将空终止字符串复制到任意数据上，只要您不超出空终止符，就不会遇到任何问题。该变量`extra`用于存储新的数字；它避免了数字从N变为N+1位时出现的问题。该函数`sprintf()`返回它写入的字符数；用于将数据安全地添加到工作缓冲区。

### 示例输出

```
[] && [ABC] ==> [ABC=1]
[ABC=1] && [ABC] ==> [ABC=2]
[ABC=2] && [ABC] ==> [ABC=3]
[ABC=3] && [XYZ] ==> [ABC=3:XYZ=1]
[ABC=3:XYZ=1] && [XYZ] ==> [ABC=3:XYZ=2]
[ABC=3:XYZ=2] && [XYZ] ==> [ABC=3:XYZ=3]
[ABC=3:XYZ=3] && [DEF] ==> [ABC=3:XYZ=3:DEF=1]
[ABC=3:XYZ=3:DEF=1] && [ABC] ==> [ABC=4:XYZ=3:DEF=1]
[ABC=4:XYZ=3:DEF=1] && [ABC] ==> [ABC=5:XYZ=3:DEF=1]
[ABC=5:XYZ=3:DEF=1] && [ABC] ==> [ABC=6:XYZ=3:DEF=1]
[ABC=6:XYZ=3:DEF=1] && [ABC] ==> [ABC=7:XYZ=3:DEF=1]
[ABC=7:XYZ=3:DEF=1] && [ABC] ==> [ABC=8:XYZ=3:DEF=1]
[ABC=8:XYZ=3:DEF=1] && [ABC] ==> [ABC=9:XYZ=3:DEF=1]
[ABC=9:XYZ=3:DEF=1] && [ABC] ==> [ABC=10:XYZ=3:DEF=1]
[ABC=10:XYZ=3:DEF=1] && [XYZ] ==> [ABC=10:XYZ=4:DEF=1]
[ABC=10:XYZ=4:DEF=1] && [ABC] ==> [ABC=11:XYZ=4:DEF=1]
[ABC=11:XYZ=4:DEF=1] && [GHI] ==> [ABC=11:XYZ=4:DEF=1:GHI=1]
[ABC=11:XYZ=4:DEF=1:GHI=1] && [PQRSTU] ==> [ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1]
[ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1] && [I] ==> [ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=1]
[ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=1] && [I] ==> [ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=2]
[ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=2] && [I] ==> [ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=3]
[ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=1:I=3] && [PQRSTU] ==> [ABC=11:XYZ=4:DEF=1:GHI=1:PQRSTU=2:I=3] 
```

我做了一些基本的检查`valgrind`（并添加了一些动态内存分配），它提出了一个干净的健康状况。

注意诊断打印的样式。它显示了输入和输出，这很有帮助。并且它将字符串包含在一个独特的标记中（此处`[]`），以便可以更容易地发现杂散空间等。

# c - 我如何比较这个变量以便我可以在 switch 语句中使用它？

> ID：15541116
> 
> 赞同：0
> 
> 时间：2013-03-21T06:46:18.053
> 
> 标签：c

我只想允许字符串或整数输入，但我似乎无法弄清楚，这就是我到目前为止所拥有的......

```
#include <string.h>
#include <stdio.h>
#include <limits.h>
#include <ctype.h>
#include <stdlib.h>
#define maxL 9182

int main() {
    char menuOption;
    char cmd[10];

// DECLARE FUNCTIONS TO BE USED IN MENU

    float circle() {
        float numbers;
        float calcFloat;

        printf("\n\nYou've selected a circle!\n\n");
        printf("Enter in a value between 1.00 and 1000.00: ");
         scanf("%f%*c",&calcFloat);
        printf("You've entered %f\n", calcFloat);

        numbers = 2*calcFloat*3.14159;

        printf("The circumference of your circle is: %f\n\n\n", numbers);

    }

    float sphere() {
        float sphere;
        float calcSphere;

        printf("\n\nYou've selected a sphere!\n\n");
        printf("Enter in a value between 10.5 and 1024.00: ");
         scanf("%f%*c",&calcSphere);
        printf("You've entered %f\n", calcSphere);

        sphere = (4/3)*calcSphere*calcSphere*calcSphere*3.14159;

        printf("The volume of a sphere with your value is: %.2f\n\n\n", sphere);

    }

    char checkInput(char input) {

        if ((strcmp(input, "0") == 0) || (strcmp(input, "zero") == 0)) {
        return 0;
        }
    }

// END OF FUNCTIONS

// CREATE AND SHOW MENU AND RECEIVE INPUT TO DIRECT TO PROPPER FUNCTION.

    for (;;) {

        printf("Menu: \n" 
        "(0)Circle\n" 
        "(1)Sphere\n" 
        "(2)Palindrome\n" 
        "(3)Shuffle\n" 
        "(4)Quit\n");

        printf("Select your choice!: ");
        scanf("%c", cmd);           

        switch (checkInput(tolower(cmd))) {

            case 0:
                circle();
            break;

            case 1:
                sphere();
            break;
        }
    }

// END OF SWITCH STATEMENT AND MENU
} 
```

我想让人们在其中输入 0 或零`scanf`以减少用户错误，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:52:17.463

该`getline`函数将允许您将字符串存储到`cmd`.

然后，您可以将您的字符串与`strcmp`

```
if ((strcmp(cmd, "0") == 0) || (strcmp(cmd, "zero") == 0)) {
    circle();
} else if ((strcmp(cmd, "1") == 0) || (strcmp(cmd, "one") == 0)) {
    sphere();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:04:29.547

将输入读入一个以 NUL 结尾的字符串`cmd`，然后

```
switch (((strcmp(cmd, "0") == 0) || (strcmp(cmd, "zero") == 0)) +
        ((strcmp(cmd, "1") == 0) || (strcmp(cmd, "one") == 0)) * 2)
{
case 1:
  circle();
  break;
case 2:
  sphere();
  break;
default:
  // handle the error
  break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:00:40.613

> 我只想允许字符串或整数输入

最好的方法是使用正则表达式来验证输入

```
 #include <regex.h>

    regex_t checkInteger;
    regex_t checkFloat;

    bool isInteger = false;
    bool isFloat = false

    int reti;
    char input[100];

    // read input from user

    regcomp(&checkInteger, "^[1-9][0-9]*$", 0);
    regcomp(&checkFloat, "^[1-9][0-9]*\.[0-9]+$", 0);

    isInteger = !regexec(&checkInteger, input, 0, NULL, 0);
    isFloat = !regexec(&checkFloat, input, 0, NULL, 0);

    if (isInteger)
    {
            // input is integer
    }
    else if (isFloat)
    {
            // input is float
    }

    regfree(&checkInteger);
    regfree(&checkFloat); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:01:00.187

像这样改变你的`checkInput`功能

```
int checkInput(char* input) {
  int i = 0;
  while (i < strlen(input))
    input[i] = tolower(input[i]);

  if ((strcmp(input, "0") == 0) || (strcmp(input, "zero") == 0)) {
    return 0;
  } else if ((strcmp(input, "1") == 0) || (strcmp(input, "one") == 0)) {
    return 1;
  }
  return 4;  // Quit Option
} 
```

在你`main`这样的电话中

```
switch (checkInput(cmd)) {

    case 0:
        circle();
    break;

    case 1:
        sphere();
    break;
} 
```

您正在接受一个字符串到 variable `cmd`。将其声明为这样的字符数组`char cmd[10];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:01:10.063

解决方案1：作为字符串

```
case "0": 
```

作为整数

```
int cmd; // declare cmd as atring

printf("Select your choice!: ");
    scanf("%d", &cmd); 

switch (cmd) {

            case 0:
                circle();
---- 
```

# java - 具有枚举字段类型的 Ebean 模型意外生成的进化脚本

> ID：15541120
> 
> 赞同：0
> 
> 时间：2013-03-21T06:46:48.737
> 
> 标签：java, enums, playframework, ebean, playframework-evolutions

我仍在使用 Play Framework 学习 Ebean ORM。Play!Framework 生成的意外进化脚本有问题。我正在使用**Play!Framework 2.1.1**和 JDK 1.7 更新 5 64 位。对不起，这个问题中的长代码片段。

我有两个 Ebean 模型，如下所示：

### `Course.java`

```
package models;

import play.data.validation.Constraints;
import play.db.ebean.Model;
import javax.persistence.*;

@Entity
@Table(name = "castillo_courses")
public class Course extends Model {
    public enum CourseType {
        COMPULSORY(1), BASIC_INTEREST(2), ADVANCED_INTEREST(3), THESIS(4);

        private int value;

        CourseType(int value) {
            this.value = value;
        }

        public int getValue() {
            return value;
        }
    }

    @Id
    private String code;
    @Constraints.Required
    private String course_name;
    @Constraints.Required
    private String credits;
    @Constraints.Required
    private CourseType course_type;

    // Ebean finder and Other getter and setter method
    ......
} 
```

### `CourseInterest.java`

```
package models;

import play.data.validation.Constraints;
import play.db.ebean.Model;

import javax.persistence.*;

@Entity
@Table(name = "castillo_course_interest")
public class CourseInterest extends Model {
    public enum InterestType {
        ARCHITECTURAL_INFRA(1), SOFTWARE_TECH(2), INFORMATION_PROCESSING(3), ENTERPRISE_SYSTEM(4), COMP_INTELLIGENCE(5);
        private int value;

        InterestType(int value) {
            this.value = value;
        }

        public int getValue() {
            return value;
        }
    }

    @Id
    @ManyToOne
    @JoinColumn(name = "course_code", referencedColumnName = "code")
    private Course course;
    @Id
    @Constraints.Required
    private InterestType interest_type;

    // Ebean finder and Other getter and setter method
    ......
} 
```

这是从上面的模型生成的进化脚本：

```
# --- Created by Ebean DDL
# To stop Ebean DDL generation, remove this comment and start using Evolutions

# --- !Ups

create table castillo_courses (
  code                      varchar(255) not null,
  course_name               varchar(255),
  credits                   varchar(255),
  course_type               integer,
  constraint ck_castillo_courses_course_type check (course_type in (0,1,2,3)),
  constraint pk_castillo_courses primary key (code))
;

create table castillo_course_interest (
  course_name               varchar(255),
  credits                   varchar(255),
  course_type               integer,
  interest_type             integer not null,
  constraint ck_castillo_course_interest_course_type check (course_type in (0,1,2,3)),
  constraint ck_castillo_course_interest_interest_type check (interest_type in (0,1,2,3,4)))
;

create sequence castillo_courses_seq;

create sequence castillo_course_interest_seq;

# ..... !DOWNS code not shown 
```

我对生成的进化脚本的期望是：

1.  在`castillo_courses` `CREATE TABLE`脚本中，`ck_castillo_courses_course_type`约束应该按照属性`(1,2,3,4)`的定义签入，**而不是**签入。我怀疑进化是通过使用我的枚举值生成的。`CourseType.value`**`(0,1,2,3)``ORDINAL`**

***   在`castillo_course_interest` `CREATE TABLE`脚本中，它再次定义`castillo_courses`除`code`. 我希望脚本**仅**定义注释定义`course_code`的列。`@JoinColumn`这里还有另一个问题。它也没有生成**主键约束**的脚本，因为我`@Id`在模型中定义了两个。** 

 **我感谢任何可以解释、提供建议或帮助我解决这个问题的人.. :)

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T02:19:16.337

用户 @EnumValue("1")

样本。

如果所有值都可以解析为整数，那么 Ebean 将持久保存并以整数而不是字符串的形式获取它们。

```
public enum InterestType {
       @EnumValue("1")
        ARCHITECTURAL_INFRA(1),
 @EnumValue("2")
SOFTWARE_TECH(2),
@EnumValue("3")
INFORMATION_PROCESSING(3),
 @EnumValue("4")
ENTERPRISE_SYSTEM(4),
@EnumValue("5")
 COMP_INTELLIGENCE(5);
        private int value;
        InterestType(int value) {
            this.value = value;
        }
        public int getValue() {
            return value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:54:08.187

> 对于第 1 个问题，我使用了来自[@publiclass1](https://stackoverflow.com/users/2085456/publiclass1)的建议。

* * *

> 对于第 2 个问题，我了解了复合主键。在`CourseInterest`模型上，我使用了复合主键，因为我希望它有两种类型的主键，一种是外键（`course_code`），另一种是公共字段（`interest_type`）。所以，我尝试如下。

### 这是`CourseInterest`模型样本：

```
@EmbeddedId // using compound primarykey
public CourseInterestPK key;

@MapsId("courseCode") // map embedded key
@ManyToOne
@JoinColumn(name = "course_code", referencedColumnName = "code")
public Course course;

@MapsId("interestType") // map embedded key
@Constraints.Required
public InterestType interest_type; 
```

### 这是`CourseInterestPK`（复合主键定义）类的示例：

```
@Embeddable
public class CourseInterest15541120PK {
     @Column(name = "course_code")
     public String courseCode;

     @Column(name = "interest_type")
     public CourseInterest.InterestType interestType;

     @Override
     public boolean equals(Object obj) {
         ... // MUST to override this method
     }

     @Override
     public int hashCode() {
         ... // MUST to override this method  
     }
} 
```

所以，通过这些技术，我得到了我想要的进化脚本。;)**

# qt - qt 4.8.4 中的文本渲染

> ID：15541122
> 
> 赞同：2
> 
> 时间：2013-03-21T06:47:07.747
> 
> 标签：qt, text, rendering

我创建 QGraphicsTextItem 并旋转它。我使用渲染标志

```
mMapView->setRenderHints(QPainter::Antialiasing | QPainter::TextAntialiasing); 
```

但是文本项只有在不旋转时才好看。

![在此处输入图像描述](../Images/309839cb9c1a217097ca1bfe33db1902.png)

如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:18:39.033

这有点棘手。我假设你在 Windows 下工作。

`...\src\gui\text\qfont_p.h`您必须将第75 行文件中的默认提示更改为

```
... hintingPreference(QFont::PreferNoHinting) 
```

然后你必须配置和编译带有 DIRECTWRITE 的 Qt 库。

```
configure -opensource -debug-and-release -directwrite
nmake 
```

（此解决方案不适用于 Windows XP）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:20:40.810

如果您绘制一条宽度为 1 px 的线，则渲染在水平或垂直方向上都很好。但是对于像 45° 这样的角度，由于锯齿（即使使用抗锯齿），它会很难看。

您的文本也是同样的问题：字体太小而无法避免混叠。

您可以使用更大的文本来解决此问题...

# objective-c-blocks - ios 块等待完成

> ID：15541124
> 
> 赞同：0
> 
> 时间：2013-03-21T06:47:19.930
> 
> 标签：objective-c-blocks

如何等待块执行完成？我在 HTTP 请求的上下文中对此感兴趣，其中成功响应在一个块中执行。这尤其发生在 AFNetworking 中。

我已经找到 `dispatch_sync`但不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:53:14.213

[FSNetworking](https://github.com/foursquare/FSNetworking)是我见过的最好的 HTTP 库。

FSNConnection 支持一个块执行完成。

这是一个例子

```
NSURL *url                = ...; // required
NSDictionary *headers     = ...; // optional
NSDictionary *parameters  = ...; // optional

FSNConnection *connection =
[FSNConnection withUrl:url
                method:FSNRequestMethodGET
               headers:headers
            parameters:parameters
            parseBlock:^id(FSNConnection *c, NSError **error) {
                return [c.responseData dictionaryFromJSONWithError:error];
            }
       completionBlock:^(FSNConnection *c) {
           NSLog(@"complete: %@\n  error: %@\n  parseResult: %@\n", c, c.error, c.parseResult);
       }
         progressBlock:^(FSNConnection *c) {
             NSLog(@"progress: %@: %.2f/%.2f", c, c.uploadProgress, c.downloadProgress);
         }];

[connection start]; 
```

# java - 对在 Java 中附加字符串感到困惑

> ID：15541126
> 
> 赞同：1
> 
> 时间：2013-03-21T06:47:27.967
> 
> 标签：java, string, append

我有附加字符串的情况。我很困惑..

```
 public static void foo() {
       String s = "str4";
       String s1 = "str" + s.length();
       System.out.println("(s==s1) = " + (s1 == s));
   } 
```

和

```
 public static void bar() {
       String s = "str4";
       String s1 = "str" + "4";
       System.out.println("(s==s1) = " + (s1 == s));
    } 
```

在第一种情况下，它返回“false”，但在第二种情况下返回“true”据我所知，在这两种情况下，“str4”对象都是在堆上创建的。所以它在这两种情况下都应该返回 true。但事实并非如此。请有人帮我弄清楚为什么会这样。? 谢谢。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T06:48:57.613

利用

```
s1.equals(s) 
```

比较字符串，否则比较引用。

在第二种情况下，它返回，`true`因为`String s1 = "str" + "4";`将被优化为`String s1 = "str4";`并且将引用相同的字符串。`s``s1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:11:49.833

以我自己的理解：

> "str" => 字符串
> 
> “4” => 字符串

然而，

> s.length() => int

***使用 ==，比较内存位置。***

使用第一个示例，Java 创建**另一个**字符串，该字符串位于“s”位置以外的另一个内存位置，因为您正在尝试执行 String + int = String。

第二个示例返回 true ，因为它与您的 's' 只是相同的内存位置，只是值已更改。字符串 + 字符串 = 连接字符串

由于您正在尝试比较两个字符串内部是否具有相同的字符但不一定位于相同的位置，因此***s.equals(s1)***是最佳解决方案。

但是，如果您想测试两个变量是否都指向同一个对象，则必须使用**==因为它的****浅比较**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:49:16.907

你需要为此使用 .equals()

```
.equals() // if you dont want to ignore case

.equalsIgnoreCase() // if you want to ignore case 
```

== 比较参考。

在第二种情况下，两个字符串都相等。所以引用也相等。

```
 String s = "str4";
   String s1 = "str" + "4"; .//finally str4 
```

这里 s1 和 s2 的内容是相等的。所以它们具有相同的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T06:50:43.800

Java 中的 == 运算符仅在两个引用都指向同一个对象时才返回 true。如果您尝试比较两个字符串的等效内容，则必须使用 equals() 方法。

# php - 如何使用php在表格单元格中添加图像以及其他一些数据

> ID：15541139
> 
> 赞同：-6
> 
> 时间：2013-03-21T06:48:38.580
> 
> 标签：php, javascript, html, css

我正在设计一个日历`javascript`，使用什么来在某个特定日期添加一些图标以显示当天有什么特别之处，但我使用 echo 在每个日期打印当前日期`table cell`，同时我需要在相关日期添加这些图标。

给我一些示例编码

```
for ($i=1; $i<($maxday+$startday); $i++) {

 if (($i % 7) == 1 ) 
    echo "<tr>";

if ($i < $startday)
{ 
    echo "<td></td>";
    continue;
};
$current_day = $i - $startday + 1;
if(in_array($cYear."-".$cMonth."-".$current_day,$unavailable))
{
     echo "<td>". $current_day . "</div></td>";

}
else
{
    echo "<td class=\"available\">". $current_day ." </td>";

}
}
if (($i % 7) == 0 ) echo "</tr>"; 
```

} ?>

只是使用 echo 我正在显示日期，即从 1 到 31，但我需要添加一些图标以及一些特定的日期......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:10:14.073

您将回显标签，或者如果您想要背景上的图片，您将创建引用背景的类，您将与标签一起回显该类。

# javascript - fulcalendar中从上到下而不是从左到右的天数排列

> ID：15541140
> 
> 赞同：0
> 
> 时间：2013-03-21T06:48:38.240
> 
> 标签：javascript, jquery, html, fullcalendar, jquery-week-calendar

我正在尝试更改全日历中的日期安排。现在，天在飞蛾、周视图中从左到右排列。我需要从上到下而不是从左到右安排日子。他们使用表格来安排日子。在我看来，表格可能不适合这种要求。所以我用 div 改变了表格。日子是从上到下排列的，但事件并没有完美地显示出来。任何人都可以帮助我吗？提前致谢。

我正在使用来自[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)的 fullcalendar.js 并根据我的要求更新了代码

事件显示在日历上，根据从左到右的天数排列找到所需的位置。我不知道如何修改函数以根据天数从上到下的安排来查找事件的位置。

请给任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:19:06.647

如果你想这样做，你需要修改 fullcalendar.js 的源代码。文档中提供的功能不支持您的需求。

# php - PHP 和 MySQL - 无法选择数据库

> ID：15541141
> 
> 赞同：-1
> 
> 时间：2013-03-21T06:48:38.863
> 
> 标签：php, mysql

我正在尝试使用数据库'coolometer。我试过这样连接：

```
$con = mysqli_connect("localhost", "x", "x", "coolometer") or die("cannot connect"); 
```

但它只是说“没有选择数据库”。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:59:55.757

我认为您的 MySQLi 扩展已禁用，因此您需要先检查 var_dump(function_exists('mysqli_connect')); 如果它输出 bool(false)，那么你需要启用 MySQLi 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:55:58.400

检查您的数据库名称是否正确，有时，您的数据库名称前面有一个前缀，然后要使用的正确数据库名称是'prefix_databasename'。

另一种可能性是您的用户 x 和密码 x 没有正确访问您尝试选择的数据库的权限。如果是这种情况，也没有选择数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:53:09.863

检查你的数据库是否同名......似乎你只是写错了你的数据库......或者我的用户或密码错误，有时如果你使用连接到你电脑上的本地主机（用于测试站点的简单家用电脑）没有密码只是空着......（一种可能性......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:00:05.250

确保你没有使用

```
mysqli_close($con); 
```

中间的任何地方，您`$con`以后需要使用连接的地方。因为当您关闭它时，除非您再次启动连接，否则您将无法使用它。

# c# - 实时交通数据 API 或 Web 服务

> ID：15541150
> 
> 赞同：0
> 
> 时间：2013-03-21T06:49:27.727
> 
> 标签：c#, asp.net, web-services, api, google-maps-api-3

我想开发一个应用程序来显示来自印度不同城市的实时交通数据。我想将交通数据存储到数据库中。我只想要交通数据而不是交通事故。

我正在寻找免费的。

我有谷歌它并在 API 或网络服务下面找到。但这些对我没有用。

1.  MapQuest API - 此 API 不适用于印度城市，并且不提供交通数据。
2.  雅虎流量 Web 服务 API - 此 API 已关闭。
3.  Bing Map API - 它只提供交通事件而不是交通数据。

任何人都可以建议任何免费的 API 或 Web 服务，它们将为我提供来自印度不同城市的实时交通数据。请任何人都可以帮助我实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T05:37:20.797

我没有尝试以下服务，但也有：

TomTom 交通网络服务 esri 世界地图服务

请尝试让我知道它是否对您有帮助。

沙拉德·艾莉亚

# java - 许多在耶拿的 TDB 或 SDB 上命名模型

> ID：15541151
> 
> 赞同：0
> 
> 时间：2013-03-21T06:49:47.573
> 
> 标签：java, rdf, jena

我正在开发一个使用 Jena 的应用程序。我想在 TDB 或 SDB 上使用许多命名模型。但是，DataSource 类已被删除。为了做到这一点，我不会没有Model，只使用Graph和DatasetGraph？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:22:48.313

使用`Dataset`，`DataSource`/`Dataset`拆分已被删除。`Dataset`现在有你需要的操作。

# javascript - 如何使用 Hammer.js 在 iOS 中禁用垂直滚动？

> ID：15541152
> 
> 赞同：6
> 
> 时间：2013-03-21T06:49:51.247
> 
> 标签：javascript, jquery, safari, multi-touch, hammer.js

我正在尝试在水平滚动列表中使用 Hammer.js（jQuery 版本）禁用 iOS 中的垂直滚动。我试过这个：

```
$(document).hammer().on('swipe,drag', 'body',
    function(event)
    {
        if (event.direction == Hammer.DIRECTION_UP || event.direction == Hammer.DIRECTION_DOWN) 
        {
            event.preventDefault();
        }
    }
); 
```

但它不起作用。那么，如何在仍然能够水平滚动的同时禁用垂直滚动？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-17T09:56:11.153

我使用 event.gesture.preventDefault 做到了：

```
$('#horizontalCarousel').hammer({ drag_lock_to_axis: true }).on("swipe drag", function(event) {
        event.gesture.preventDefault();
        if(event.type == "swipe"){
            swipeAction(event);
        } else {
            dragAction(event);
        }
 }); 
```

这是给定的[文档](https://github.com/EightMedia/hammer.js/wiki/Event-delegation-and-how-to-stopPropagation---preventDefaults)

[编辑]

我的回答只是让您知道您使用了错误的 event.preventDefault()。实际上，您还使用了错误的语法来检查事件方向。您应该能够以这种方式管理它，尽管我还没有测试过：

```
$(document).hammer({ drag_lock_to_axis: true }).on("swipe drag", function(event) {
            if (event.gesture.direction == Hammer.DIRECTION_UP || event.gesture.direction == Hammer.DIRECTION_DOWN){
                 event.gesture.preventDefault();
            }
     }); 
```

改变了 2 件事：event.gesture.direction 和 event.gesture.preventDefault()；event.direction 是在旧版本的锤子 js 上执行此操作的方式。

注意：如果你想对滑动事件做一些事情，例如：滑动时水平跳跃更大的量，你可以结合我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T18:51:11.303

看看这个页面：

[https://github.com/EightMedia/hammer.js/wiki/Event-delegation-and-how-to-stopPropagation---preventDefaults#evgesturestoppropagation](https://github.com/EightMedia/hammer.js/wiki/Event-delegation-and-how-to-stopPropagation---preventDefaults#evgesturestoppropagation)

假设您`$`是 jQuery 并且您使用的是 jQuery 版本的hammer.js，请尝试此操作

```
 $('body').hammer().on('touch', function(ev){
      var $t = $(ev.target); //let's you know the exact element you touched.
      if(ev.gesture.direction === 'left' || ev.gesture.direction ==='right'){

      } else {
           ev.gesture.preventDefault();
      }
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-12T16:44:17.377

您可以使用 drag_block_vertical 选项禁用垂直滚动：

```
$(document).hammer({drag_block_vertical: true}).on('swipe,drag', 'body', function(event){
    // etc
}); 
```

此外，您在应该始终存在的 body 元素上调用它。因此，您可能可以简化为：

```
$('body').hammer({drag_block_vertical: true}).on('swipe,drag', function(event){
    // etc
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-23T12:12:35.413

Hammer(document.body, { prevent_defaults: true });

# node.js - 在 node.js 中自定义验证消息

> ID：15541154
> 
> 赞同：1
> 
> 时间：2013-03-21T06:50:02.310
> 
> 标签：node.js, express, railway.js, compoundjs

我是 Node.js 的新手，在 node.js 中自定义验证消息时遇到了问题。我使用 CRUD 操作使用 Compound JS 创建了一个简单的应用程序。在我的应用程序中有一个名为“id”的字段。“id”字段只接受整数值。然后我使用 model/user.js 中的以下代码验证该字段。

```
module.exports = function (compound, User) {
 var num = /^\s*\d+\s*$/;
 User.validatesFormatOf('id', {with: num, message:"is not a number"});
}; 
```

通过使用上面的代码，它工作正常。但我也想检查该字段是否为空白。然后我稍微修改一下代码。修改后的代码如下所示：

```
module.exports = function (compound, User) {
     var num = /^\s*\d+\s*$/;
     User.validatesFormatOf('id', {with: num, message: {blank: "can't be blank", with: "is not a number"}});
    }; 
```

然后，如果该字段为空，则验证消息将显示为“Id 不能为空”。但是，当我在 id 字段中输入数字以外的值时，验证错误消息将是“Id [object Object]”。我认为关键字 with 不受支持。这里是否有任何其他关键字，如“空白”或“分钟”，以便我可以将验证消息作为“ID 不是数字”。

我找到了一个解决方案，所以修改后的 user.js 版本是这样的：

```
 module.exports = function (compound, User) {
     var num = /^\s*\d+\s*$/;
     User.validatesPresenceOf('id', {message: "can't be blank"});
     User.validatesFormatOf('id', {with: num, message:"is not a number"});
    }; 
```

上面代码的问题是它同时显示两条验证消息，即同时显示默认和自定义空白消息。我的要求是一次只显示一个字段的验证消息。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:38:17.077

它看起来像是 JugglingDB（CompoundJS 使用的 ORM）中的一个错误。

考虑以下代码：

```
var juggling = require('jugglingdb');
var Schema = juggling.Schema;

var schema = new Schema('memory');
var User = schema.define('User');
var num = /^\s*\d+\s*$/;

User.validatesPresenceOf('id', {message: "can't be blank"});
User.validatesFormatOf('id', {with: num, message:"is not a number"});
User.validatesFormatOf('id', {with: num, message:"is not a number"});

var user = new User({ id : '' });

user.isValid(function(valid) {
  if (! valid)
  {
    console.log('invalid', user.errors);
  }
  else
  {
    console.log('valid');
  }
}); 
```

这实际上会产生 3 个错误：

```
invalid { id: [ 'can\'t be blank', 'is blank', 'is blank' ] } 
```

如果您添加另一个`User.validatesFormat`，它将产生 4 个错误。它看起来像是 JugglingDB 验证代码中某处的范围界定问题，我将发布错误报告。

现在，也许您可​​以只使用发生的第一个错误 ( `user.errors[0]`)。**编辑：**从外观上看，如果它可以工作，这也是你必须做的，因为 JugglingDB 将运行所有验证测试并为所有失败的测试生成错误。

# java - 获取http url连接错误

> ID：15541162
> 
> 赞同：0
> 
> 时间：2013-03-21T06:51:00.803
> 
> 标签：java, xmlhttprequest, weblogic, httpconnection

当我尝试从服务器读取数据时，我收到错误 400：从服务器读取数据时出现错误请求错误。尽管为 localhost URL 运行相同的代码时，它可以正常工作。

这是我的代码：

```
package xmlComm;

import java.io.*;
import java.net.*;
import java.util.*;
import java.text.*;
import javax.xml.*;
import javax.xml.rpc.Call;

public class SampleXml {

    public String TelXml(String msisdn,String region){
        String temp="";
        System.out.println(region);
        try{

            /*******************PARAMETER DECLARATION AND INITIALIZATION *******************************/
            URL url = null;
            String HOSTNAME=InetAddress.getLocalHost().getHostName().replaceAll("[\\-\\+\\.\\^:,]", "");
            Date TIMESTAMP=new Date();
            SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmmssSSS");
            SimpleDateFormat sdf1 = new SimpleDateFormat("yyyyMMddHHmmssSSSS");
            String ORIGIN_TIMESTAMP=sdf1.format(TIMESTAMP);
            String FINAL_DATE=ORIGIN_TIMESTAMP.substring(0, 8)+"T"+ORIGIN_TIMESTAMP.substring(8,10)+":"+ORIGIN_TIMESTAMP.substring(10,12)+":"+ORIGIN_TIMESTAMP.substring(12,14)+"+"+ORIGIN_TIMESTAMP.substring(14,18);
            String TRANSACTION_ID=sdf.format(TIMESTAMP);
            HttpURLConnection urlConn;
            DataOutputStream printout;
            BufferedReader input;   

            /********************************************************************************************/

            url =new URL("server URL");// no problem in URL

            urlConn =(HttpURLConnection)url.openConnection();

            System.out.println(urlConn);
            //urlConn.connect();
            //urlConn.wait(2);
            urlConn.setDoInput(true);
            urlConn.setDoOutput(true);
            urlConn.setUseCaches(false);

            //java.util.Date dt = new java.util.Date();
                //              SimpleDateFormat formatter = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
                //              dateTime=formatter.format(dt);
            //set request method
            urlConn.setRequestMethod("POST");
            //set request type
            //urlConn.setRequestProperty("Content-Type", "application/xml");
            //urlConn.setRequestProperty(key, value)
            StringBuffer buf = new StringBuffer(); 
            buf.append("POST /ABC/1.1\n"+
                    "User-Agent: ABC\n"+
                    "Authorization:Basic ABC\n"+
                    "Content-Type: text/xml\n"+
                    "Content-Length: 706\n\n"+
                    "<?xml version=\"1.0\"encoding=\"ISO-8859-1\"?>\n"+
                    "<methodCall>\n"+
                    "<methodName>MethodNameABC</methodName>\n"+
                    "<params>\n"+
                    "<param>\n"+
                    "<value>\n"+
                    "<struct>\n"+
                    "<member>\n"+
                    "<name>originNodeType</name>\n"+
                    "<value><string>EXT</string></value>\n"+
                    "</member>\n"+
                    "<member>\n"+
                    "<name>originHostName</name>\n"+
                    "<value><string>"+HOSTNAME+"</string></value>\n"+
                    "</member>\n"+
                    "<member>\n"+
                    "<name>originTransactionID</name>\n"+
                    "<value><string>"+TRANSACTION_ID+"</string></value>\n"+
                    "</member>\n"+
                    "<member>\n"+
                    "<name>originTimeStamp</name>\n"+
                    "<value><dateTime.iso8601>"+FINAL_DATE+"</dateTime.iso8601></value>\n"+
                    "</member>\n"+
                    "<member>\n"+
                    "<name>subscriberNumber</name>\n"+
                    "<value><string>"+msisdn+"</string></value>\n"+
                    "</member>\n"+
                    "</struct>\n"+
                    "</value>\n"+
                    "</param>\n"+
                    "</params>\n"+
                    "</methodCall>");

            String Inpt = buf.toString();
            System.out.println("*********************************   Request   ********************************");
            System.out.println(Inpt);
            printout = new DataOutputStream(urlConn.getOutputStream());
            printout.writeBytes(Inpt);
            printout.flush ();
            printout.close ();

            //Get response data.
            input = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));

            String str;

            while((str = input.readLine())!=null){
                str += input.readLine();
                    if(str!=null){
                    temp=str;
                }
            }
            System.out.println("*********************************   Response   ********************************");
            System.out.println(temp);

        }   
        catch (MalformedURLException me{
            System.err.println("MalformedURLException; " + me);
        }
        catch (IOException ioe){
            System.err.println("IOException; " + ioe.getMessage());
        }
        String returnmsg = "abcc";
        return returnmsg;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        SampleXml Sxml= new SampleXml();
        Sxml.TelXml("1234567890", "City");
    }
} 
```

# html - HTML 列出产品属性

> ID：15541163
> 
> 赞同：1
> 
> 时间：2013-03-21T06:51:02.803
> 
> 标签：html, text, alignment, indentation

我想按以下方式列出产品属性：

属性 1：项目

属性 2：项目

属性 3：项目

属性 4432：项目

请注意，“项目”开始有点缩进。

我知道这可以通过使用表格和 div 来完成。然而，它们对我来说似乎有点矫枉过正。有人能告诉我这通常是如何实现的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:53:15.813

定义列表在这里是合适的：

```
<dl>
    <dt>Property</dt>
    <dd>The related item</dd>
    <dt>Property2 </dt>
    <dd>The second related item</dd>
</dl> 
```

要使该列表完全按照您在问题中显示的方式显示，请使用以下 CSS：

```
dl dt {
    float: left;
    margin: 0 10px 0 0;
}

dl dd + dt, dl dd + dd {
    clear: left
}

dl dd + dd {
    float: none
} 
```

在此处查看 jsfiddle：http: [//jsfiddle.net/Jolora/N5Zkd/](http://jsfiddle.net/Jolora/N5Zkd/)

或者，一个简单的无序列表会产生更清晰的代码，尽管语义稍差：

```
<ul>
    <li>Property <span>The related item</span></li>
    <li>Property 2 <span>The related item</span></li>
</ul> 
```

span 标签允许您添加 CSS 以应用缩进。如果不需要超过一个空格缩进，则删除 span 标签。

# facebook - facebook 应用程序域

> ID：15541164
> 
> 赞同：0
> 
> 时间：2013-03-21T06:51:03.590
> 
> 标签：facebook

我尝试在 facebook 上注册我的网站。我的网站*[http://itmarket.issart.com/](http://itmarket.issart.com/)* 我尝试在应用程序域 *itmarket.issart.com* *www.itmarket.issart.com* 和其他中使用，但我总是有错误您已指定应用程序域但未指定有效的集成 URL。

www.itmarket.issart.com 必须来自以下之一：站点 URL、移动站点 URL、画布 URL、安全画布 URL、页面选项卡 URL 或安全页面选项卡 URL。

# web-services - 在 Web 服务中使用 http get 请求时出错（SOAPFault 异常）

> ID：15541166
> 
> 赞同：1
> 
> 时间：2013-03-21T06:51:16.200
> 
> 标签：web-services, http, jakarta-ee

我创建了一个窗口应用程序，它将使用以下代码发出 http get 请求

```
HttpClient client = new DefaultHttpClient();

HttpGet request = new HttpGet("http://www.google.com");
HttpResponse response = client.execute(request);

BufferedReader rd = new BufferedReader
  (new InputStreamReader(response.getEntity().getContent()));

String line = "";
while ((line = rd.readLine()) != null) {
  result = result + line;
} 

    } catch (IOException ex) {
       JOptionPane.showMessageDialog(null,ex.getCause());
    } 
    return result;. 
```

变量“结果”是一个字符串，我使用了这些包

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient; 
```

这段代码完美无缺。但是，我想在 Web 服务中使用此代码。我在 Web 服务中复制并粘贴了相同的代码，但收到以下错误。

```
Exception in thread "AWT-EventQueue-0" javax.xml.ws.soap.SOAPFaultException: org/apache/commons/logging/LogFactory
at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178)
at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:119)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)
at $Proxy30.identifyThisSong(Unknown Source)`Caused by: java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.apache.http.impl.client.AbstractHttpClient.<init>(AbstractHttpClient.java:187)
at org.apache.http.impl.client.DefaultHttpClient.<init>(DefaultHttpClient.java:146)
at com.raghuvenmarathoor.songIdentify.SongIdentify.identifyThisSong(SongIdentify.java:43)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.xml.ws.api.server.InstanceResolver$1.invoke(InstanceResolver.java:246)
at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:146)
at com.sun.xml.ws.server.sei.EndpointMethodHandler.invoke(EndpointMethodHandler.java:257)
at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:95)
at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:629)
at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:588)
at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:573)
at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:470)
at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:295)
at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:515)
at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:285)
at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:143)
at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:155)
at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:189)
at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:76)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)` 
```

我是网络服务的新手。我在谷歌上搜索了很多关于这个问题的信息，但找不到任何相关的结果（大部分结果都是关于使用 http get 请求访问网络服务）。这就是我想要实现的目标：

1.  访问网络服务
2.  Web 服务应该使用 http get 请求从另一个网站访问信息。
3.  将从 http get 请求中检索到的值返回给我的客户端应用程序。

任何参考资料或替代方式或建议都会非常有帮助..

提前致谢

拉古

# c# - 构造函数过度注入，类型集中于收集数据

> ID：15541169
> 
> 赞同：2
> 
> 时间：2013-03-21T06:51:28.043
> 
> 标签：c#, dependency-injection, constructor

我知道这个论点在 SO 上得到了很好的介绍，尤其是在

[为什么不使用 IoC 容器来解决实体/业务对象的依赖关系？](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec)

还有其他问题；但疑虑依然存在。

我使用了收集数据而不是*实体*或*业务对象的措辞**类型，*以使问题集中在原则上。

 **所以，如果我有一个依赖于这样的[原始数据](http://blog.ploeh.dk/2012/07/02/PrimitiveDependencies/)（甚至更多字段）的类型：

```
public class Animal {
  private readonly string name;
  private readonly string nickname;
  private readonly int weight;
  private readonly int heightAtWithers:
  private readonly Color mainColor;
  private raadonly bool isMale;
  private readonly bool isAggressive;

  public Animal(string name, string nickname, int weight,
                int heightAtWithers, Color mainColor,
                bool is Male, bool isAggressive)
  {
    // remainder omitted
  }

  public string Name { get { return this.name; } }

  // remainder omitted
} 
```

这是*构造函数过度注入*的情况吗？

在[Mark Seemann](http://blog.ploeh.dk/)书中，建议将依赖项的数量保持在 2 到 4 之间（如果我没记错的话）。

对于这种*反模式*不适用的类型是否可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T06:57:11.657

这些并不是通常意义上的真正*依赖关系*——它们是实体的数据。它不像那些东西提供多态服务等等。我通常不*期望*依赖注入框架（或 IoC 容器）来创建这样的对象——通常它会是 ORM 或手写代码的一部分。

调用这样的构造函数确实有点痛苦，如果你想提供默认值也变得很棘手。如果您使用的是 C# 4 或更高版本，可选参数和命名参数会有所帮助。（它们确实要求在编译时知道默认值，请注意。）

一种替代方法是创建具有相关默认值的可变*构建器类型。*我通常把它做成一个嵌套类。您可以给它一个无参数的构造函数，并在构建构建器时验证所需的一切是否存在，或者提供具有所有*必需*值的构造函数，并将属性保留为可选值。然后你可以使用对象初始化器愉快地创建实例：

```
var animal = new Animal.Builder("Frederick") {
                 NickName = "Freddie",
                 Weight = 10,
                 MainColor = Color.Brown
             }).Build(); 
```

编写构建器是烦人的样板工作，但它可能很有用。*如果您*发现在构建实例时总是有相关信息可以手头，那么坚持使用当前的构造函数可能会更简单。考虑使用命名参数来使每个参数的含义更清楚，特别是当有多个具有相同类型的参数时：

```
var animal = new Animal(name: "Frederick", nickname: "Freddie",
                        weight: 10, heightAtWithers: 20,
                        Color.Brown, isMale:true, isAggressive: false); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T06:56:53.510

IIRC，当 Mark 谈到构造函数过度注入时，它是基于违反[SRP的。](http://en.wikipedia.org/wiki/Single_responsibility_principle)

一个依赖于大量其他服务的类很可能做不止一件事。
对于依赖于许多原语的类来说，情况不一定如此。

话虽如此，原始数据类型的依赖和“数据持有者类”的数据是两个不同的东西。

将您的类与您链接的文章中描述的类进行比较：
`DbChartReader` *需要* `top`能够完成它的工作 - 它是一个依赖项。
`Animal`不做任何工作。通过构造函数传入的数据基本上*就是*对象——构造函数的参数就是：data。**

# django - django 使用 pre_save 发送邮件

> ID：15541172
> 
> 赞同：0
> 
> 时间：2013-03-21T06:51:44.493
> 
> 标签：django, email, django-models, django-email

1.作为学习 django 的一部分，我正在尝试使用 pre_save 信号将邮件发送到电子邮件 ID。

2.邮件应该发送到字段中提到的电子邮件ID。我没有使用信号的正确方法。这里我给出models.py和views.py。

```
views.py

def addbook():  

    form = BookForm

    if request.POST:
        form = BookForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            form.save()
            return redirect('/index/')
    return render_to_response('addbook.html',{ 'form':form },context_instance=RequestContext(request)) 
```

模型.py

```
class Book(models.Model):

    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    email = models.EmailField()
    bookref = models.CharField(max_length=10)
    class Meta:
        db_table = u'Book'

    def __unicode__(self):
        return "%d %s %s %s %s" % (self.book_id,self.book_name, self.author_name,self.publisher_name,self.email,self.bookref) 
```

我的要求是在提交图书详细信息时，应自动向字段中的 id 发送一封电子邮件。

一个关于这样做的例子将有很大的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:36:51.403

在 Book models 下，创建信号函数。

```
class Book(models.Model):
    [..........]

def send_update(sender, instance, created, **kwargs):
    if instance.author_name:
        message = "Book is updated"
        subject = "Updates"
        send_mail(subject, message, your_email,
            [instance.email,])

post_save.connect(send_update, sender=Book) 
```

# c++ - 向 FTP 服务器发送关闭文件信号

> ID：15541176
> 
> 赞同：0
> 
> 时间：2013-03-21T06:51:57.297
> 
> 标签：c++, file-upload, ftp

我正在使用 Windows 套接字在 C++ 中实现 FTP 客户端。我已成功连接到端口 21 上的服务器，并在数据端口上使用“STOR Sample.txt”命令以 PASV 模式传输文件。问题是我无法告诉服务器传输完成（我想发送信号以关闭数据连接），以便我可以在我的控制连接上从服务器接收“226 Transfer OK”。

此外，我没有通过 recv() 从服务器接收任何内容。我认为这是因为服务器仍在侦听数据连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:03:33.320

看看这个： [STOR 命令的正确用户](https://stackoverflow.com/questions/9624613/proper-user-of-stor-command)

当您发送 PASV 时，您返回要连接的端口，然后您告诉服务器使用 STOR 将数据存储在哪里，然后您连接到 PASV 命令返回的端口并发送数据 - 完成后关闭第二个套接字并继续发送原始命令。

# sql - 需要帮助为 oracle 进行动态查询

> ID：15541179
> 
> 赞同：1
> 
> 时间：2013-03-21T06:52:10.203
> 
> 标签：sql, oracle, dynamic

所以我需要从只能在运行时识别的表中选择记录。这就是我所得到的，但我有点卡住了。任何帮助、建议或指出如何更容易/正确地做到这一点将不胜感激。

```
DECLARE
 TABLE_NAME VARCHAR2(255);
 QUERY_STR VARCHAR2(1000);
BEGIN
 SELECT CASE WHEN UPPER(APP.MODULE_LONG_NAME) LIKE 'PLEDGE%' THEN 'PLEDGE_HDR' ELSE 'CONTACT_HDR' END 
 INTO TABLE_NAME
 FROM REQST_HDR RH 
 INNER JOIN LKUP_REQST_TYPE LRT ON LRT.REQST_TYPE_ID = RH.REQST_TYPE_ID
 INNER JOIN APP_MODULE_MSTR APP ON APP.MODULE_ID = LRT.MODULE_ID;

 QUERY_STR := 'SELECT * FROM ' || TABLE_NAME || '--MORE FILTERING';

 --SOMEHOW SHOW RESULTS OF QUERY_STR IN TABLE FORM.
END; 
```

更新 - 由于我无法让任何解决方案发挥作用，我最终只使用 COALESCE，因为无论如何我只有两个表来作为查询的基础。感谢所有回答的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:08:39.163

尝试这样的事情：

```
CREATE OR REPLACE FUNCTION choose_a_function_name RETURN SYS_REFCURSOR IS
 TABLE_NAME VARCHAR2(255);
 QUERY_STR VARCHAR2(1000);
 res sys_refcursor;
BEGIN
 SELECT CASE WHEN UPPER(APP.MODULE_LONG_NAME) LIKE 'PLEDGE%' THEN 'PLEDGE_HDR' ELSE 'CONTACT_HDR' END 
 INTO TABLE_NAME
 FROM REQST_HDR RH 
 INNER JOIN LKUP_REQST_TYPE LRT ON LRT.REQST_TYPE_ID = RH.REQST_TYPE_ID
 INNER JOIN APP_MODULE_MSTR APP ON APP.MODULE_ID = LRT.MODULE_ID;

 QUERY_STR := 'SELECT * FROM ' || TABLE_NAME || '--MORE FILTERING';

 OPEN res FOR QUERY_STR;

 RETURN res;

END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:55:04.890

复制/粘贴以表格形式查看以下查询的结果：

```
DECLARE
  emp_cur_rc      SYS_REFCURSOR;
  emp_rec         scott.emp%ROWTYPE;
  --
  v_sql           VARCHAR2(200);
  v_tab_name      VARCHAR2(200):= 'scott.emp';
  v_field_name    VARCHAR2(200):= 'job';
  v_list          VARCHAR2(200):= '''MANAGER'', ''CLERK''';
BEGIN
  v_sql:= 'SELECT * FROM '|| v_tab_name ||' WHERE '||v_field_name ||' IN ('||v_list||')';

 OPEN emp_cur_rc FOR v_sql;
 LOOP
   FETCH emp_cur_rc INTO emp_rec;
   EXIT WHEN emp_cur_rc%NOTFOUND;
     dbms_output.put_line(emp_rec.empno||chr(9)||emp_rec.ename||chr(9)||emp_rec.job);
 END LOOP;
 CLOSE emp_cur_rc;
END;
/ 
```

# javascript - 画布与 img - 性能

> ID：15541183
> 
> 赞同：6
> 
> 时间：2013-03-21T06:52:37.787
> 
> 标签：javascript, html

我试图找到一些有关此的相关资料，但一无所获。

所以，我的问题很简单。画布比img快吗？我将使用 img (png, gif) 或画布中的对象。

1.  对象只使用一次，
2.  多次使用同一对象，例如管理员图标，
3.  不同对象的多次使用，例如公司的徽标。

我对内存使用、浏览器性能和加载速度感兴趣。

edit#1：画布由js绘制，与img标签中的图像相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:13:13.933

不，`img`它比使用`canvas`. **该`img`标签旨在显示图像**，因此如果您只需要这样做，请使用`img`标签。多次使用无关紧要，因为图像只会下载一次。

如果您需要一些动画或交互性，那就是考虑的时候了`canvas`。

# javascript - 事件目标匹配但未调用函数？

> ID：15541184
> 
> 赞同：1
> 
> 时间：2013-03-21T06:52:42.567
> 
> 标签：javascript, jquery

考虑以下jquery：

```
$('.entry-links:not(.entry-links-processed)').each(function(){
        $(this).addClass('entry-links-processed');
        $('li a', this).click(function(event){
            $target = $(event.target);
            var tabPics = $('#tab-pics>a');
            if($target === tabPics){
                tabTest.getPics();
            }
          $('.entry-links li a').removeClass('active');
          $(this).addClass('active');
          var id = $(this).attr('href');
          $('.entry-box:not(' + id + ')').hide();
          $(id).show();
            return false;
        });
    }); 
```

我有三个选项卡或菜单项：当您单击一个时，此代码将隐藏其他选项卡的内容部分。

其中，以下部分是这个问题的重点：

```
 $target = $(event.target);
            var tabPics = $('#tab-pics>a');
            if($target === tabPics){
                tabTest.getPics();
            } 
```

正如代码片段所示，我试图在单击图片选项卡时调用一个函数。按照我的代码使用断点，我看到我成功捕获了 $target，但是，即使它与 tabPics 匹配，函数调用也被跳过，其余代码正常运行。

如果我匹配了 $target 和 tabPics，为什么当我满足 if 语句中的条件时它会跳过函数调用？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:24:19.100

您原来的方法不起作用，因为您正在测试两个不同对象的相等性：

```
var $target = $(event.target);
var tabPics = $('#tab-pics>a'); 
```

当您在选择器或现有 dom 元素上调用 jQuery 时，它会返回一个自身版本，该版本包装了它决定匹配的元素。每次这个对象都不一样，所以下面的代码：

```
if ( $target === tabPics ) {
  /// this wont be reached
} 
```

和说的一样：

```
if ( {} === {} ) {
  /// neither will this
} 
```

虽然上面的代码两个对象在视觉上看起来是一样的，即使你这样做：

```
if ( {a:123} === {a:123} ) {
  /// nope...
} 
```

JavaScript 仍然会将上述内容视为错误，因为当使用对象比较对象时`===`，对象必须是完全相同的对象，它们不能是具有相同内容的不同对象。

以下链接可能有用：

[你会如何比较 jQuery 对象？](https://stackoverflow.com/questions/2436966/how-would-you-compare-jquery-objects)

希望这能消除混乱。我可以看到您的逻辑在哪里，并且在另一种语言中它可能是有意义的，这不是`===`在 JavaScript 中测试对象时的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:56:42.980

您目前无法在 jquery (.entry-link:not) 中定位伪选择器来设置 CSS 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:08:43.363

我解决了这个问题。虽然我仍然认为这段代码应该可以工作：

```
 if($target === tabPics){
            tabTest.getPics();
        } 
```

由于某种原因它不会......但使用 .is() 确实有效！所以现在代码看起来像这样：

```
 $target = $(event.target);
            var tabPicsLi = $('#tab-pics');
            var tabPics = $('a', tabPicsLi);
            if($target.is(tabPics)){
                tabTest.getPics();
            } 
```

它可以正常工作。也就是说，如果有人看到这篇文章，请查看我的原始代码结构并了解为什么这种特定方式不起作用，我将非常感谢您的回复。从错误中吸取教训对我来说是无价的。

# java - Jboss7.1中如何配置简单认证

> ID：15541189
> 
> 赞同：8
> 
> 时间：2013-03-21T06:53:14.537
> 
> 标签：java, security, jsp, jboss7.x

我正在研究由**纯 jsps(scriptlets)**编写的项目，而不使用任何框架。

jboss 版本：jboss-as-7.1.0.Final

我现在正在尝试在其上添加简单的身份验证。因此，当用户尝试浏览 jsps 时，例如`http://localhost/myContextPath/hello.jsp`，它需要先登录。

**web.xml**

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>All Access</web-resource-name>
        <url-pattern>/*</url-pattern>
        <http-method>DELETE</http-method>
        <http-method>PUT</http-method>
        <http-method>HEAD</http-method>
        <http-method>OPTIONS</http-method>
        <http-method>TRACE</http-method>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
</login-config> 
```

**jboss-web.xml**

```
<jboss-web>
<security-domain>other</security-domain>
</jboss-web> 
```

**Standalone.xml（[jboss_home]\standalone\configuration 文件夹）**

```
<subsystem xmlns="urn:jboss:domain:security:1.1">
        <security-domains>
            <security-domain name="other" cache-type="default">
                <authentication>
                    <login-module code="UsersRoles" flag="required">
                        <module-option name="usersProperties" value="users.properties"/>
                        <module-option name="rolesProperties" value="roles.properties"/>
                    </login-module>
                </authentication>
            </security-domain>
            <security-domain name="form-auth">
                <authentication>
                    <login-module code="UsersRoles" flag="required">
                        <module-option name="usersProperties" value="users.properties"/>
                        <module-option name="rolesProperties" value="roles.properties"/>
                    </login-module>
                </authentication>
            </security-domain>
        </security-domains>
    </subsystem> 
```

**users.properties（放在 webapp classes 文件夹下）**

```
user1=jboss7 
```

**roles.properties（放在 webapp classes 文件夹下）**

```
user1=Admin 
```

在所有这些修改之后，我尝试浏览我的 hello jsp。我像往常一样工作。没有身份验证，也不例外。

我不确定我是否会朝着正确的方向前进，或者安全约束是完全不同的事情。请帮忙，谢谢！！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-24T05:04:36.603

[只需按照本文](http://www.mastertheboss.com/jboss-security/securing-as-7-applications-using-the-applicationrealm)中的步骤为 7.1 设置 BASIC 身份验证。

尝试这个。

## 配置

### Web.xml

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>All Access</web-resource-name>
        <url-pattern>/*</url-pattern>
        <http-method>DELETE</http-method>
        <http-method>PUT</http-method>
        <http-method>HEAD</http-method>
        <http-method>OPTIONS</http-method>
        <http-method>TRACE</http-method>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>ApplicationRealm</realm-name>
</login-config>

<security-role>
    <role-name>user</role-name>
</security-role> 
```

### jboss-web.xml

```
<jboss-web>
    <security-domain>java:/jaas/other</security-domain>
</jboss-web> 
```

### 独立的.xml

如果您使用的是**ApplicationRealm** ，则无需执行任何操作。

## 添加用户

您可以使用 jboss 提供的工具将用户添加到**ApplicationRealm 。**

从*%JBOSS_HOME%/bin*内。使用*add-user.bat（或）add-user.sh*工具。

```
C:\dev\jboss-eap-6.2\bin>add-user

What type of user do you wish to add?
 a) Management User (mgmt-users.properties)
 b) Application User (application-users.properties)
(a): b

Enter the details of the new user to add.
Using realm 'ApplicationRealm' as discovered from the existing property files.
Username : johngalt
Password :
Re-enter Password :
What groups do you want this user to belong to? (Please enter a comma separated list, or leave blank for none)[  ]: user
About to add user 'johngalt' for realm 'ApplicationRealm'
Is this correct yes/no? yes
Added user 'johngalt' to file 'C:\dev\jboss-eap-6.2\standalone\configuration\application-users.properties'
Added user 'johngalt' to file 'C:\dev\jboss-eap-6.2\domain\configuration\application-users.properties'
Added user 'johngalt' with groups user to file 'C:\dev\jboss-eap-6.2\standalone\configuration\application-roles.properties'
Added user 'johngalt' with groups user to file 'C:\dev\jboss-eap-6.2\domain\configuration\application-roles.properties'
Is this new user going to be used for one AS process to connect to another AS process?
e.g. for a slave host controller connecting to the master or for a Remoting connection for server to server EJB calls.
yes/no? no
Press any key to continue . . .

C:\dev\jboss-eap-6.2\bin> 
```

这对我有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T19:39:52.020

这对我有用。将此添加到 web.xml

```
 <security-constraint>
    <web-resource-collection>
        <web-resource-name>HtmlAuth</web-resource-name>
        <description>application security constraints
        </description>
        <url-pattern>/*</url-pattern>
        <http-method>DELETE</http-method>
        <http-method>PUT</http-method>
        <http-method>HEAD</http-method>
        <http-method>OPTIONS</http-method>
        <http-method>TRACE</http-method>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>user</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>ApplicationRealm</realm-name>
</login-config>
<security-role>
    <role-name>user</role-name>
</security-role> 
```

然后添加或创建一个 jboss-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
    <security-domain>java:/jaas/other</security-domain>
</jboss-web> 
```

将用户名添加到 jboss：C:\jboss\jboss-eap-6.2\bin>add-user.bat

```
What type of user do you wish to add?
 a) Management User (mgmt-users.properties)
 b) Application User (application-users.properties)
(a): b

Enter the details of the new user to add.
Using realm 'ApplicationRealm' as discovered from the existing property files.
Username : testid
User 'testid' already exits, would you like to update the existing user password
 and roles
Is this correct yes/no? yes
Password :
Re-enter Password :
What groups do you want this user to belong to? (Please enter a comma separated
list, or leave blank for none)[user]: user,Manager
Updated user 'testid' to file 'C:\jboss\jboss-eap-6.2\standalone\configuration\a
pplication-users.properties'
Updated user 'testid' to file 'C:\jboss\jboss-eap-6.2\domain\configuration\appli
cation-users.properties'
Updated user 'testid' with groups user,Manager to file 'C:\jboss\jboss-eap-6.2\s
tandalone\configuration\application-roles.properties'
Updated user 'testid' with groups user,Manager to file 'C:\jboss\jboss-eap-6.2\d
omain\configuration\application-roles.properties'
Is this new user going to be used for one AS process to connect to another AS pr
ocess?
 e.g. for a slave host controller connecting to the master or for a Remoting conn
ection for server to server EJB calls.
yes/no? yes
To represent the user add the following to the server-identities definition <sec
ret value="TWF2ZXJpY2sjMDE=" />
Press any key to continue . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:01:43.073

我没有看到更改 JBoss 配置的要求，就像您以后要更改服务器容器一样，配置也需要更改。取而代之的是，使用会话对象来检查会话是否已经存在。如果它没有将页面重定向到登录页面。这将返回当前会话。

`request.getSession();`

在您的登录页面中，将当前会话设置为属性

`session.setAttribute('sess',request.getSession());`

使用此比较，用户将无法直接访问任何其他页面。

# mysql - 如何从mysql中的一个表中获取所有数据？

> ID：15541196
> 
> 赞同：0
> 
> 时间：2013-03-21T06:53:39.880
> 
> 标签：mysql, sql, database, left-join

我在mysql数据库中有以下表格

a_ad_display

```
id | advId | 
```

a_mediatype

```
id | mediaId
 1 | animation 
 2 | Video
 3 | Image 
```

a_advertise

```
advId | mediatypeId | organizationId 
```

现在我想要的是从 a_ad_display 中获取 advId 的所有记录，其中 advId 的计数在广告表中注册到 organizationId="some specific id" 并使用它们的媒体类型进行分组。

我通过以下查询实现了这一点....

```
SELECT COUNT(a.advertiseId) as Total ,m.medianame

FROM a_mediatype as m

 JOIN a_advertise as a ON a.mediaTypeId = m.mediaId

 JOIN  a_ad_display as ad ON ad.advId = a.advertiseId

where a.organizationId in(SELECT t.organizationId

FROM organization_ AS t JOIN organization_ AS p ON  t.treePath LIKE CONCAT( p.treePath, '%')

where p.organizationId ='37423')  GROUP BY m.medianame 
```

但我的输出是这样的

```
 medianame | count 
  animation | 92
  Images    | 103 
```

所以这意味着 a_ad_display 中没有具有特定组织 ID 的视频类型 advId ...

但我想要的是如下......

```
medianame | count 

animation | 92

video     | 0

Images    | 103 
```

这意味着如果没有来自特定媒体类型的建议，那么也会在输出中显示 0 Count..

任何人都可以在这个问题上给我一些指导吗？

**看我的 sql fiddle 演示** [http://sqlfiddle.com/#!2/391a2/11](http://sqlfiddle.com/#!2/391a2/11)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:56:01.373

改用`LEFT JOIN`：

```
SELECT 
  m.medianame,
  IFNULL(COUNT(ad.id), 0) AS Total 
FROM a_mediatype as m
LEFT JOIN a_advertise   AS a   ON a.mediaTypeId    = m.mediaId
LEFT JOIN a_ad_display  AS ad  ON ad.advId         = a.advId
LEFT JOIN organization_ AS o   ON a.organizationId = o.organizationId
LEFT JOIN organization_ AS p   ON o.organizationId = p.organizationId 
                              AND p.organizationId = '37423'  
                              AND o.treePath       LIKE CONCAT( p.treePath, '%')
GROUP BY m.medianame; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/5faf8/2)

这会给你：

```
| MEDIANAME | TOTAL |
---------------------
| animation |    13 |
|     image |     2 |
|     video |     0 | 
```

# dtd - 在我的 XML 中，我收到错误消息，因为“根元素之后的文档中的标记必须格式正确。”

> ID：15541197
> 
> 赞同：0
> 
> 时间：2013-03-21T06:53:40.303
> 
> 标签：dtd, xml

我已经编写了一个 xslt，用于将 xml 文件转换为 html 文件，如果我取出 DTD 部分（将其注释掉），它会按预期工作。

下面是我的DTD。你能告诉我为什么会出现这个错误，我该如何纠正它以及如何使用我的 DTD 而不会在我的 xml 中出现错误。

```
 <?xml version="1.0" encoding="UTF-8"?>
<!-- ===================================================================

     Name:           SMGHK DTD
     Project:         SMGHK

     Purpose:       A generic DTD for SMGHK Books.

     =================================================================== -->
<!-- ======================================================================= -->
<!--                       Character Entities                                -->
<!-- ======================================================================= -->
<!ENTITY % ISOamsa PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Arrow Relations//EN//XML" "isoamsa.ent">
<!ENTITY % ISOamsb PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Binary Operators//EN//XML" "isoamsb.ent">
<!ENTITY % ISOamsc PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Delimiters//EN//XML" "isoamsc.ent">
<!ENTITY % ISOamsn PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Negated Relations//EN//XML" "isoamsn.ent">
<!ENTITY % ISOamso PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Ordinary//EN//XML" "isoamso.ent">
<!ENTITY % ISOamsr PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Relations//EN//XML" "isoamsr.ent">
<!ENTITY % ISObox PUBLIC "ISO 8879:1986//ENTITIES Added Math Symbols: Relations//EN//XML" "isobox.ent">
<!ENTITY % ISOcyr1 PUBLIC "ISO 8879:1986//ENTITIES Russian Cyrillic//EN//XML" "isocyr1.ent">
<!ENTITY % ISOcyr2 PUBLIC "ISO 8879:1986//ENTITIES Non-Russian Cyrillic//EN//XML" "isocyr2.ent">
<!ENTITY % ISOdia PUBLIC "ISO 8879:1986//ENTITIES Non-Russian Cyrillic//EN//XML" "isodia.ent">
<!ENTITY % ISOgrk1 PUBLIC "ISO 8879:1986//ENTITIES Greek Letters//EN//XML" "isogrk1.ent">
<!ENTITY % ISOgrk2 PUBLIC "ISO 8879:1986//ENTITIES Monotoniko Greek//EN//XML" "isogrk2.ent">
<!ENTITY % ISOgrk3 PUBLIC "ISO 8879:1986//ENTITIES Greek Symbols//EN//XML" "isogrk3.ent">
<!ENTITY % ISOgrk4 PUBLIC "ISO 8879:1986//ENTITIES Alternative Greek Symbols//EN//XML" "isogrk4.ent">
<!ENTITY % ISOlat1 PUBLIC "ISO 8879:1986//ENTITIES Added Latin 1//EN//XML" "isolat1.ent">
<!ENTITY % ISOlat2 PUBLIC "ISO 8879:1986//ENTITIES Added Latin 2//EN//XML" "isolat2.ent">
<!ENTITY % ISOnum PUBLIC "ISO 8879:1986//ENTITIES Numeric and Special Graphic//EN//XML" "isonum.ent">
<!ENTITY % ISOpub PUBLIC "ISO 8879:1986//ENTITIES Publishing//EN//XML" "isopub.ent">
<!ENTITY % ISOtech PUBLIC "ISO 8879:1986//ENTITIES General Technical//EN//XML" "isotech.ent">
%ISOamsa;%ISOamsb;%ISOamsc;%ISOamsn;%ISOamso;%ISOamsr;%ISObox;%ISOcyr1;%ISOcyr2;%ISOdia;%ISOgrk1;%ISOgrk2;%ISOgrk3;%ISOgrk4;%ISOlat1;%ISOlat2;%ISOnum;%ISOpub;%ISOtech;
<!-- ============================================================ -->
<!--                    ENTITY DEFINITIONS  -->
<!-- ============================================================ -->
<!ENTITY % form.elements SYSTEM
           "forms.ent">
<!ENTITY % table.elements SYSTEM
           "table.ent">
<!ENTITY % common.attrib " id
              ID
              #IMPLIED
       differentiation (grey | head | box | footnote) #IMPLIED
    columns CDATA #IMPLIED
    update-date CDATA #IMPLIED
    num CDATA #IMPLIED
         ">
<!ENTITY % block.elements "para | orderedlist | itemizedlist | unorderedlist | checklist | table | figure |
             simplelist | note | extract | box | maths | page">
<!-- "footnoteref", "footnote" and "ref" elements have been added to %inline.base on 06/21/2006 -->
<!ENTITY % inline.base "#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | break | page | c">
<!ENTITY % inline.elements "name | email | author | authorinitials | inlinegraphic | address | publishername | fib | page">
<!ENTITY % book-meta-model "product-number?, wms-number?, subject*, filing-instructions?, blurb?">
<!ENTITY % chapter-meta-model "author*, copyright?, pub-date?, subject*, contributor*, source*, rev-date?">
<!ENTITY % graphic-meta-model "text">
<!ENTITY % combined "endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | para | orderedlist | unorderedlist | itemizedlist | checklist | table | figure |
             simplelist | note | extract | box | break | page">
<!ENTITY % math-model "title?, subtitle?, equation+,
                         (para)*">
<!-- ============================================================ -->
<!--                    BOOK ELEMENTS  -->
<!-- ============================================================ -->
<!ELEMENT book ((page?, title, subtitle?), book-meta?, frontmatter, body, backmatter?)>
<!ATTLIST book
%common.attrib; 
pubid CDATA #IMPLIED
label CDATA #IMPLIED
type (chb | tre) #REQUIRED
interest-code CDATA #IMPLIED
interest-description CDATA #IMPLIED
>
<!ELEMENT book-meta (%book-meta-model;)>
<!ELEMENT frontmatter (page | figure | seriesinfo | bookinfo | journalinfo | toc | glossary | chapter | part)*>
<!ELEMENT body (chapter | part | page)*>
<!ELEMENT backmatter (glossary | bibliography | chapter | part | appendix | toa | index | page)*>
<!-- "title" and "edition" elements have been added to "bookinfo" element on 06/22/2006 -->
<!ELEMENT bookinfo (title?, (authors? | editor? | contribution? | graphic? | publisherinfo? | copyright? | contactinfo? | legalnotice? | catalogrecord? | isbn? | printinfo? | edition? | otherinfo | page)*)>
<!ATTLIST bookinfo
%common.attrib; 
>
<!ELEMENT journalinfo (journtitlepage?, journinfopage?)>
<!ATTLIST journalinfo
%common.attrib; 
>
<!ELEMENT journtitlepage (title?, subtitle?, (volume? | issue? | issuedate?)*)>
<!ATTLIST journtitlepage
%common.attrib; 
>
<!ELEMENT volume (#PCDATA)>
<!ATTLIST volume
%common.attrib; 
>
<!ELEMENT issue (#PCDATA)>
<!ATTLIST issue
%common.attrib; 
>
<!ELEMENT issuedate (day | month | year)*>
<!ATTLIST issuedate
%common.attrib; 
>
<!ELEMENT journinfopage (title?, (authors? | editors? | editorial? | contribution? | graphic? | publisherinfo? | copyright? | contactinfo? | legalnotice? | catalogrecord? | issn? | printinfo? | otherinfo)*)>
<!ATTLIST journinfopage
%common.attrib; 
>
<!ELEMENT editors (para? | editor)+>
<!ATTLIST editors
%common.attrib; 
>
<!ELEMENT editorial (title?, editors)>
<!ATTLIST editorial
%common.attrib; 
>
<!ELEMENT seriesinfo ((page?, title, subtitle?)?, editor?, issn?, pubhistory, (%block.elements;)*)>
<!ATTLIST seriesinfo
%common.attrib; 
>
<!ELEMENT printinfo (%block.elements;)*>
<!ATTLIST printinfo
%common.attrib; 
>
<!-- "edition" element has been created on 06/21/2006 -->
<!ELEMENT edition (#PCDATA)>
<!ATTLIST edition
%common.attrib; 
>
<!ELEMENT publisherinfo (para+)>
<!ATTLIST publisherinfo
%common.attrib; 
>
<!ELEMENT pubtitle (#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | break | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | page)*>
<!ATTLIST pubtitle
%common.attrib; 
>
<!ELEMENT issn (#PCDATA)>
<!ATTLIST issn
%common.attrib; 
>
<!ELEMENT publishername (#PCDATA)>
<!ATTLIST publishername
%common.attrib; 
>
<!-- "title" element has been added to "pubhistory" element on 06/24/2006 -->
<!ELEMENT pubhistory (title?, (para? | publist)*)>
<!ATTLIST pubhistory
%common.attrib; 
>
<!ELEMENT publist (publication)+>
<!ATTLIST publist
%common.attrib; 
>
<!ELEMENT legalnotice (%block.elements;)+>
<!ATTLIST legalnotice
%common.attrib; 
>
<!ELEMENT copyright (para)+>
<!ATTLIST copyright
%common.attrib; 
>
<!ELEMENT otherinfo (title?, (%block.elements;)*)>
<!ATTLIST otherinfo
%common.attrib; 
>
<!ELEMENT catalogrecord (catalog)+>
<!ATTLIST catalogrecord
%common.attrib; 
>
<!ELEMENT catalog (address, para)+>
<!ATTLIST catalog
%common.attrib; 
>
<!ELEMENT publication (#PCDATA | pubtitle | author | edition)*>
<!ATTLIST publication
%common.attrib; 
>
<!ELEMENT isbn (#PCDATA)>
<!ATTLIST isbn
%common.attrib; 
>
<!ELEMENT editor (type?, (address? | name)*, affiliation?)>
<!ATTLIST editor
%common.attrib; 
>
<!ELEMENT type (#PCDATA)>
<!ATTLIST type
%common.attrib; 
>
<!ELEMENT affiliation (#PCDATA)>
<!ATTLIST affiliation
%common.attrib; 
>
<!ELEMENT contribution (label, contributor+)>
<!ATTLIST contribution
%common.attrib; 
>
<!ELEMENT label (#PCDATA)>
<!ATTLIST label
%common.attrib; 
>
<!ELEMENT contributor (role, name)+>
<!ATTLIST contributor
%common.attrib; 
>
<!ELEMENT role (#PCDATA)>
<!ATTLIST role
%common.attrib; 
>
<!ELEMENT case (#PCDATA | casename | content-style | break)*>
<!ATTLIST case
%common.attrib; 
type (reply | versus) #IMPLIED
>
<!ELEMENT casename (#PCDATA | content-style | break | pgs | page)*>
<!ATTLIST casename
%common.attrib; 
>
<!ELEMENT legal (#PCDATA | l-title | l-num | l-name | l-date | l-item | content-style)*>
<!ATTLIST legal
%common.attrib; 
type (USC | IRC | Pub-L | Statute | CFR | Secur-Act | Secur-Rel | Exch-Act | Exch-Rel | Exch-Rule | Regul | St-Code | Unif-Act | Rest | Fed-App | Fed-Bankr | Fed-Civ) #REQUIRED
>
<!ELEMENT l-title (#PCDATA | content-style)*>
<!ATTLIST l-title
%common.attrib; 
>
<!ELEMENT l-num (#PCDATA | content-style)*>
<!ATTLIST l-num
%common.attrib; 
>
<!ELEMENT l-name (#PCDATA | content-style)*>
<!ATTLIST l-name
%common.attrib; 
>
<!ELEMENT l-date (#PCDATA | content-style)*>
<!ATTLIST l-date
%common.attrib; 
>
<!ELEMENT l-item (#PCDATA | content-style)*>
<!ATTLIST l-item
%common.attrib; 
>
<!ELEMENT name (#PCDATA | honorific | firstname | middlename | surname)*>
<!ATTLIST name
%common.attrib; 
>
<!-- "orgname" element has been created on 06/21/2006 -->
<!ELEMENT orgname (#PCDATA | footnoteref | footnote)*>
<!ATTLIST orgname
%common.attrib; 
>
<!-- "title" element has been added to "contactinfo" element on 06/22/2006 -->
<!ELEMENT contactinfo (title?, para+)>
<!ATTLIST contactinfo
%common.attrib; 
>
<!ELEMENT authors (author)+>
<!ATTLIST authors
%common.attrib; 
>
<!ELEMENT toc (page | title | subtitle | toc-frontitem | toc-part | toc-backitem)*>
<!ATTLIST toc
%common.attrib; 
>
<!ELEMENT toc-frontitem (toc-title, toc-pg?, otherinfo*, author*)>
<!ATTLIST toc-frontitem
%common.attrib; 
num CDATA #IMPLIED
linkend IDREF #IMPLIED
endterm CDATA #IMPLIED
>
<!ELEMENT toc-backitem (toc-title, toc-pg?, otherinfo*, author*)>
<!ATTLIST toc-backitem
%common.attrib; 
num CDATA #IMPLIED
linkend IDREF #IMPLIED
endterm CDATA #IMPLIED
>
<!ELEMENT toc-part (title?, subtitle?, (toc-div | page)*)>
<!ATTLIST toc-part
%common.attrib; 
>
<!ELEMENT toc-div (title?, subtitle?, (toc-item | page)*)>
<!ATTLIST toc-div
%common.attrib; 
>
<!ELEMENT toc-item (toc-title?, toc-pg?, otherinfo*, author*, (toc-subitem | page)*)>
<!ATTLIST toc-item
%common.attrib; 
num CDATA #IMPLIED
linkend IDREF #IMPLIED
endterm CDATA #IMPLIED
>
<!ELEMENT toc-subitem (toc-title, toc-pg?, otherinfo*, author*, (toc-subitem | page)*)>
<!ATTLIST toc-subitem
%common.attrib; 
num CDATA #IMPLIED
linkend IDREF #IMPLIED
endterm CDATA #IMPLIED
level (1 | 2 | 3 | 4 | 5 | 6) #IMPLIED
>
<!ELEMENT toc-title (#PCDATA | content-style | xref | c)*>
<!ATTLIST toc-title
%common.attrib; 
>
<!ELEMENT toc-pg (#PCDATA | content-style | xref)*>
<!ATTLIST toc-pg
%common.attrib; 
>
<!-- TABLE OF AUTHORITIES (LIST OF CASES) -->
<!ELEMENT toa (pgs | title | subtitle | para | toa-section | page)*>
<!ATTLIST toa
%common.attrib; 
>
<!ELEMENT toa-section (title | subtitle | toa-div | page)*>
<!ATTLIST toa-section
%common.attrib; 
type CDATA #IMPLIED
>
<!ELEMENT toa-div (pgs | title | subtitle | toa-div | toa-entry | page)*>
<!ATTLIST toa-div
%common.attrib; 
level (div1 | div2 | div3 | div4 | div5) #REQUIRED
>
<!--ELEMENT toa-entry (primary-entry+, (secondary-entry | tertiary-entry)*)-->
<!ELEMENT toa-entry (primary-entry)>
<!ATTLIST toa-entry
%common.attrib; 
>
<!ELEMENT primary-entry (entry-name, pgs?, secondary-entry*)>
<!ATTLIST primary-entry
%common.attrib; 
>
<!ELEMENT secondary-entry (entry-name, pgs?, tertiary-entry*)>
<!ATTLIST secondary-entry
%common.attrib; 
>
<!ELEMENT tertiary-entry (entry-name, pgs?)>
<!ATTLIST tertiary-entry
%common.attrib; 
>
<!ELEMENT entry-name (#PCDATA | xref | content-style | unorderedlist | extract)*>
<!ATTLIST entry-name
%common.attrib; 
>
<!ELEMENT pgs (#PCDATA | pg)*>
<!ATTLIST pgs
%common.attrib; 
>
<!ELEMENT pg (#PCDATA | xref | content-style)*>
<!ATTLIST pg
%common.attrib; 
>
<!ELEMENT chapter (title | subtitle | chapter-meta | biography | toc | introduction | %block.elements; | forms | section | endnotes | bibliography | qandaset | appendix | exhibits | exhibit | letter | toa)*>
<!-- "aboutauthor" and "abbreviations" attribute values have been added to "type" attribute on 06/22/2006 -->
<!ATTLIST chapter
%common.attrib; 
type (cdinfo | acknowledgement | glossary | dedication | preface | aboutauthor | abbreviations | tabchap) #IMPLIED
level CDATA #IMPLIED
num CDATA #IMPLIED
interest-code CDATA #IMPLIED
interest-description CDATA #IMPLIED
>
<!ELEMENT chapter-meta (%chapter-meta-model;)>
<!ELEMENT glossary ((title, subtitle?)?, (%block.elements;)*, (glossdiv? | glossentry+))>
<!ATTLIST glossary
%common.attrib; 
>
<!ELEMENT biography ((title, subtitle?)?, (%block.elements;)*)>
<!ELEMENT bibliography ((title, subtitle?)?, (%block.elements;)*, (bibliodiv? | biblioentry+))>
<!ATTLIST bibliography
%common.attrib; 
>
<!ELEMENT bibliodiv ((title, subtitle?)?, (%block.elements;)*, (biblioentry)+)>
<!ATTLIST bibliodiv
%common.attrib; 
>
<!ELEMENT biblioentry (#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | title | subtitle | citetitle | date | publisher | pagenums | uri | edition | volume | issue | page)*>
<!ATTLIST biblioentry
%common.attrib; 
>
<!ELEMENT citetitle (#PCDATA)>
<!ELEMENT date (day | month | year)*>
<!ELEMENT blank-date (para)>
<!ELEMENT pub-date (day | month | year)*>
<!ELEMENT rev-date (day | month | year)*>
<!ELEMENT day (#PCDATA)>
<!ELEMENT month (#PCDATA)>
<!ELEMENT year (#PCDATA)>
<!ELEMENT publisher (publishername, address*)>
<!ELEMENT pagenums (#PCDATA)>
<!-- "uri" element has been created on 06/22/2006 -->
<!ELEMENT uri (#PCDATA | content-style)*>
<!ATTLIST uri
%common.attrib; 
href CDATA #IMPLIED
>
<!ELEMENT glossdiv ((title, subtitle?)?, (%block.elements;)*, (glossentry)+)>
<!ATTLIST glossdiv
%common.attrib; 
>
<!ELEMENT glossentry (glossterm, (indexterm)*, (glosssee | glossdef+))>
<!ATTLIST glossentry
%common.attrib; 
>
<!ELEMENT glossterm (#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | break | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | page)*>
<!ATTLIST glossterm
%common.attrib; 
linkend IDREF #IMPLIED
>
<!ELEMENT glosssee (#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | break | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | page)*>
<!ATTLIST glosssee
%common.attrib; 
>
<!ELEMENT glossseealso (#PCDATA | endnoteref | xref | glossterm | endnote | phrase | quote | indexterm | content-style | footnoteref | footnote | ref | uri | case | casename | legal | break | name | email | author | authorinitials | inlinegraphic | address | publishername | fib | page)*>
<!ATTLIST glossseealso
%common.attrib; 
>
<!ELEMENT glossdef ((%block.elements;)+, glossseealso*)>
<!ATTLIST glossdef
%common.attrib; 
>
<!ELEMENT appendix (page?, title, subtitle?, (toc | %block.elements; | forms | section | exhibits | exhibit)*)>
<!ATTLIST appendix
     num CDATA #IMPLIED
     differentiation CDATA #IMPLIED
%common.attrib; 
>
<!ELEMENT index (title | subtitle | indexdiv | page)+>
<!ATTLIST index
%common.attrib; 
>
<!ELEMENT indexdiv (title, (indexentry | page)+)>
<!ATTLIST indexdiv
%common.attrib; 
>
<!ELEMENT indexentry (primaryie+, (secondaryie | tertiaryie | page)*)>
<!ATTLIST indexentry
%common.attrib; 
>
<!ELEMENT primaryie (#PCDATA | content-style | xref)*>
<!ATTLIST primaryie
%common.attrib; 
>
<!ELEMENT secondaryie (#PCDATA | content-style | xref)*>
<!ATTLIST secondaryie
%common.attrib; 
>
<!ELEMENT tertiaryie (#PCDATA | content-style | xref)*>
<!ATTLIST tertiaryie
%common.attrib; 
level (1 | 2 | 3 | 4) #IMPLIED
>
<!ELEMENT part ((title, subtitle?), (appendix | chapter | toc | index | glossary | bibliography | page)+)>
<!ATTLIST part
%common.attrib; 
>
<!ELEMENT section (title, subtitle?, (%block.elements; | forms | section)*)>
<!ATTLIST section
%common.attrib; 
type CDATA #IMPLIED
level (sect1 | sect2 | sect3 | sect4 | sect5 | sect6 | sect7 | sect8 | sect9 | sect10) #IMPLIED
number-type (arabic | lower.alpha | upper.alpha | lower.roman | upper.roman | manual | unnumbered) #IMPLIED
num CDATA #IMPLIED
>
<!ELEMENT box (title?, subtitle?, (%block.elements; | forms)*, (section)*)>
<!ATTLIST box
%common.attrib; 
border (border | none) "border"
>
<!ELEMENT subject (#PCDATA)>
<!ELEMENT source (para)*>
<!ELEMENT exhibits (exhibit+)>
<!ELEMENT exhibit (page?, exhibit-meta, blank-date?, head1?, head2?, (endorsement | policy | schedule | letter | other | page)*)>
<!ATTLIST exhibit
%common.attrib; 
type CDATA #IMPLIED
>
<!ELEMENT exhibit-meta (form-num?, title, subtitle?)>
<!ATTLIST exhibit-meta
%common.attrib; 
>
<!ELEMENT form-num (%inline.base;)*>
<!ELEMENT head1 (#PCDATA)>
<!ELEMENT head2 (#PCDATA)>
<!ELEMENT head3 (#PCDATA)>
<!ELEMENT endorsement ((title? | head1? | head2?)*, (figure | form | page)+)>
<!ATTLIST endorsement
%common.attrib; 
type CDATA #IMPLIED
>
<!ELEMENT letter (head1?, head2?, head3?, (to | via | subject | date | letter-info | %block.elements; | section)*, from?, (form)*)>
<!ATTLIST letter
%common.attrib; 
>
<!ELEMENT to (%combined;)*>
<!ATTLIST to
%common.attrib; 
>
<!ELEMENT via (%combined;)*>
<!ATTLIST via
%common.attrib; 
>
<!ELEMENT from (%combined;)*>
<!ATTLIST from
%common.attrib; 
>
<!ELEMENT letter-info (%combined;)*>
<!ATTLIST letter-info
%common.attrib; 
>
<!ELEMENT schedule ((title? | head1?)*, (figure | form | page)+)>
<!ATTLIST schedule
%common.attrib; 
type CDATA #IMPLIED
>
<!ELEMENT policy ((title? | head1? | head2?)*, (figure | form | page)+)>
<!ATTLIST policy
%common.attrib; 
>
<!ELEMENT other ((title? | head1? | head2?)*, (figure | form | page)+)>
<!ATTLIST other
%common.attrib; 
>
<!ELEMENT product-number (#PCDATA | content-style)*>
<!ATTLIST product-number
%common.attrib; 
>
<!ELEMENT wms-number (#PCDATA | content-style)*>
<!ATTLIST wms-number
%common.attrib; 
>
<!ELEMENT filing-instructions ((title? | edition? | subtitle?)*, (%block.elements;)*)>
<!ATTLIST filing-instructions
%common.attrib; 
>
<!ELEMENT blurb (title | edition | authors | %block.elements;)*>
<!ATTLIST blurb
%common.attrib; 
>
<!ELEMENT photo-credit (#PCDATA | content-style)*>
<!ATTLIST photo-credit
%common.attrib; 
>
<!ELEMENT introduction ((title, subtitle?)?, (%block.elements; | forms)*)>
<!ATTLIST introduction
%common.attrib; 
>
<!ELEMENT endnotes EMPTY>
<!ATTLIST endnotes
%common.attrib; 
>
<!ELEMENT text (#PCDATA)>
<!ATTLIST text
%common.attrib; 
>
<!ELEMENT maths (%math-model;)>
<!ATTLIST maths
%common.attrib; 
position (fixed | float | margin) #IMPLIED
>
<!ELEMENT equation (para | figure)*>
<!ATTLIST equation
%common.attrib; 
number (numbered | nonumber) #IMPLIED
eqn-num CDATA #IMPLIED
href CDATA #IMPLIED
display (inline | block) #REQUIRED
width CDATA #IMPLIED
height CDATA #IMPLIED
>
<!ELEMENT break (#PCDATA | content-style)*>
<!ATTLIST break
%common.attrib; 
>
<!ELEMENT page (#PCDATA | content-style)*>
<!ATTLIST page
num CDATA #IMPLIED
>

<!-- ============================================================ -->
<!--                    BLOCK ELEMENTS  -->
<!-- ============================================================ -->
%form.elements; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:07:13.113

无法确定为什么会收到错误消息，因为在您的问题中您没有引用错误消息，也没有说明您正在调用哪个处理器或如何调用。因此，您得到的任何答案都必然是基于证据不足的猜测。

您显示的文档使用 DTD 语法。它不是 XML 文档，也不应该以 XML 声明开头。从您的描述看来，您好像在要求 XML 解析器将其解析为 XML 文档；不要那样做。

# sql - 如果在一个插入语句中插入多条记录，如何使用插入触发器

> ID：15541198
> 
> 赞同：0
> 
> 时间：2013-03-21T06:53:45.853
> 
> 标签：sql, sql-server, sql-server-2008

我想在一个插入语句中插入多条记录，当时我的触发器出现错误

错误是

> `Msg 512, Level 16, State 1, Procedure SetIntFlag, Line 7 Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression. The statement has been terminated.`

我的触发器是

```
declare @act char(16)if update (first_nm)
set @act = (select acct_no from inserted)
update Client set Phn9_int = 1 where acct_no = @act 
```

如果不止一列插入其显示错误，因为它分配给一个变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:10:23.857

假设这是整个触发器：

```
update Client set Phn9_int = 1 where acct_no in (
    select acct_no from inserted) 
```

基本上，我的经验法则是，如果您在触发器中看到任何标量变量，就多行操作而言，它可能已被破坏。例外是如果它使用游标，但*通常*可以避免使用游标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:38:24.767

不要在 WHERE 子句中使用 local_variable 作为条件。而是使用简单的 JOIN 条件

```
if update (first_nm)
update c
set c.Phn9_int = 1
FROM Client c JOIN inserted i ON c.acct_no = i.acct_no 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:10:31.830

声明光标在插入并使用它，代码应该类似于下面的：

```
DECLARE @act char(16)
DECLARE my_Cursor CURSOR FAST_FORWARD FOR SELECT acct_no FROM INSERTED;

OPEN my_Cursor 
FETCH NEXT FROM my_Cursor into @act

WHILE @@FETCH_STATUS = 0 
BEGIN 
     UPDATE Client SET Phn9_int = 1 where acct_no = @act
     FETCH NEXT FROM my_Cursor into @act 
END

CLOSE my_Cursor
DEALLOCATE my_Cursor 
```

# c# - 替换属性值的数据注释？

> ID：15541199
> 
> 赞同：4
> 
> 时间：2013-03-21T06:53:45.693
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations

是否可以使用 Data Annotation 属性来操作文本并在操作后返回一个新的？

例如，我想验证一个字符串属性是否有特殊字符或单词之间有多个空格，然后返回一个新字符串来替换原始属性的值。

使用数据注释有多大可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-16T20:00:26.290

回答有点晚了（2 年！），但是是的，您可以修改在自定义 DataAnnotations 属性中验证的值。关键是重写 ValidationAttribute 的[IsValid(Object, ValidationContext)](https://msdn.microsoft.com/en-us/library/dd730022.aspx)方法并执行一些反射魔法：

```
public class MyCustomValidationAttribute : ValidationAttribute
{
    protected override ValidationResult IsValid(object value, ValidationContext ctx)
    {
        // get the property
        var prop = ctx.ObjectType.GetProperty(ctx.MemberName);

        // get the current value (assuming it's a string property)
        var oldVal = prop.GetValue(ctx.ObjectInstance) as string;

        // create a new value, perhaps by manipulating the current one
        var newVal = "???";

        // set the new value
        prop.SetValue(ctx.ObjectInstance, newVal);

        return base.IsValid(value, ctx);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:48:06.897

Corak 的建议是最好的方法。但是，您可以编写基类并使用反射，您可以对类型成员的内容做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:44:53.370

这不是数据注释，而只是一个属性。

所以是的，通过这里已经讨论过的各种方法：

[如何通过自定义 Attribute 获取和修改属性值？](https://stackoverflow.com/questions/2864343/how-to-get-and-modify-a-property-value-through-a-custom-attribute) [在运行时更改属性的参数](https://stackoverflow.com/questions/51269/change-attributes-parameter-at-runtime)

有趣的是注意到从验证到子类到“你不能”的各种解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-20T15:40:12.173

这是一个可能包含您所期望的包：[Dado.ComponentModel.Mutations](https://github.com/roydukkey/Dado.ComponentModel.Mutations)

此示例将确保从字符串中删除无效字符。它没有引入验证，但`System.ComponentModel.Annotations`可以与`Dado.ComponentModel.Mutations`.

```
public partial class ApplicationUser
{
    [ToLower, RegexReplace(@"[^a-z0-9_]")]
    public virtual string UserName { get; set; }
}

// Then to preform mutation
var user = new ApplicationUser() {
    UserName = "M@X_speed.01!"
}

new MutationContext<ApplicationUser>(user).Mutate(); 
```

调用 to 后`Mutate()`，`user.UserName`将变为`mx_speed01`。

# javascript - 如何在视频拇指上的 onmouseover 上显示视频时长？

> ID：15541204
> 
> 赞同：0
> 
> 时间：2013-03-21T06:54:09.853
> 
> 标签：javascript, jquery, html

我有一个带有视频拇指的页面。我想知道如何在鼠标悬停时显示视频持续时间（**在图像左下角的黑框中显示持续时间**）拇指图像并在鼠标悬停时再次隐藏它？目前，正如您在演示中看到的那样，视频持续时间始终可见，但我想让它仅在用户将鼠标放在拇指图像上时才可见。如果你们帮我完成这项任务，我会很高兴。在此先感谢。

**小提琴演示：http:** [//jsfiddle.net/shodaburp/k6yAQ/1/](http://jsfiddle.net/shodaburp/k6yAQ/1/)

```
<div class="ListSlideDown">
    <div class="ListFadeIn">
        <div class="CurrentPage">1</div>
        <div class="IsLastPage">0</div>
        <div class="SortColumn">latest</div>
        <div class="Item ItemLeft">
            <div class="Clipping">
                <a class="ImageLink" href="/videos/vid1" title="video1">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video 1" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid1"><span class="Text">51:57</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid1" title="video 1">video 1</a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 604</div>
        </div>
        <div class="Item ItemMiddle">
            <div class="Clipping">
                <a class="ImageLink" href="/videos/vid2" title="video2">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video 2" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid2"><span class="Text">12:23</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid2" title="video 2">video 2</a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 7531</div>
        </div>
        <div class="Item ItemRight">
            <div class="Clipping">
                <a class="ImageLink" href="/videos/vid3" title="video3‌">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video3‌" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid3"><span class="Text">17:36</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid3" title="video 3‌">video 3‌&lt;/a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 996</div>
        </div>
        <div class="LineSpacer3"></div>
        <div class="Item ItemLeft">
            <div class="Clipping">
                <a class="ImageLink" href="/videos/vid4" title="video4">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video 4" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid4"><span class="Text">31:57</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid4" title="video 4">video 4</a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 604</div>
        </div>
        <div class="Item ItemMiddle">
            <div class="Clipping">
                <a class="ImageLink" href="/video/video5" title="video5">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video 5" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid5"><span class="Text">2:23</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid2" title="video 5">video 5</a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 2531</div>
        </div>
        <div class="Item ItemRight">
            <div class="Clipping">
                <a class="ImageLink" href="/videos/vid6" title="video6‌">
                    <img class="ItemImage" src="http://img.youtube.com/vi/bQVoAWSP7k4/0.jpg" alt="video6‌" />
                    <img class="OverlayIcon" src="http://shodaburp.com/jsfiddle/playbutton.png" alt="" />
                </a>
                <a class="DurationInfo" onmouseover="showDuration2(this);" onmouseout="hideDuration2(this);" href="/videos/vid6"><span class="Text">12:36</span>
                </a>
            </div>
            <div class="Title">
                <a href="/videos/vid6" title="video 6‌">video 6‌&lt;/a>
            </div>
            <div class="VideoAge">1 day before</div>
            <div class="PlaysInfo">broadcast: 196</div>
        </div>
        <div class="LineSpacer3"></div>
        <div class="BottomFix"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:26:17.463

我不明白在这种情况下你为什么需要 JavaScript：

[http://jsfiddle.net/DerekL/habb9/](http://jsfiddle.net/DerekL/habb9/)

只需使用 CSS：

```
.Clipping{                     /*<--Change to .Clipping*/
    position: relative;
}
.DurationInfo{
    position: absolute;
    bottom: 5px;
    right: 5px;
    display: none;
}
.Item:hover .DurationInfo{
        display: block;
} 
```

你甚至可以添加一个漂亮的过渡：

[http://jsfiddle.net/DerekL/habb9/2/](http://jsfiddle.net/DerekL/habb9/2/)

```
.DurationInfo{
    opacity: 0;
    right: -5px;
    transition: opacity .2s ease-in-out,     /*Prefix not included*/
                right .2s ease-in-out;
}
.Item:hover .DurationInfo{
        right: -5px;
        opacity: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:47:55.923

以防万一您想使用 jquery，您可以使用`hover`和`mouseleave`方法。

[http://jsfiddle.net/btevfik/k6yAQ/4/](http://jsfiddle.net/btevfik/k6yAQ/4/)

# jquery - Jquery点击事件在第一次点击时不执行

> ID：15541208
> 
> 赞同：2
> 
> 时间：2013-03-21T06:54:26.110
> 
> 标签：jquery, ruby-on-rails

我不明白为什么我必须在 JQuery 中单击两次链接：

```
$(function(){
    $("#more_reviewers").click(function(){
        $("#reviewer_list").html("<%= escape_javascript(render 'restaurants/restaurant_reviewer_list', :venue => @restaurant, :limit => @restaurant.reviews.count) %>");
    });
}); 
```

当我单击时，视图会覆盖显示的审阅者限制并显示所有审阅者。我不明白为什么我需要点击同一个按钮两次。类似问题的其他答案都没有对我有用，因为问题涉及 cookie 依赖，或者我没有做的其他事情。

我刚刚测试了另外一件事：当我放置一个显示事件类型的警报时，第一次它什么都不显示（好像 JS 脚本没有绑定到链接）然后第二次它用正确的事件类型发出警报（“点击”）。

ID为“more_reviewers”的链接在rails中如下：

```
<%= link_to "more", "#", :id => "more_reviewers", :remote => true  %> 
```

该链接显示正确的项目，但仅在单击两次后（第一次，页面上似乎没有任何变化）

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:08:14.653

你的 show.js.erb 应该只包含：

```
$("#reviewer_list").html("<%= escape_javascript(render 'restaurants/restaurant_reviewer_list', :venue => @restaurant, :limit => @restaurant.reviews.count) %>"); 
```

现在，您将单击事件绑定到您已经单击的链接，这意味着您必须再次单击它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-26T14:38:20.923

刚刚遇到这样的问题，您应该能够像这样解决它（这使您可以在同一个文件中而不是在 application.js 中执行其他 js 内容）：

```
$(function(){
  $("#more_reviewers").bind('ajax:complete', function() {
    $("#reviewer_list").html("<%= escape_javascript(render 'restaurants/restaurant_reviewer_list', :venue => @restaurant, :limit => @restaurant.reviews.count) %>");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:58:29.387

尝试：

```
<%= link_to "more", "", :id => "more_reviewers", :remote => true  %> 
```

就我而言

```
<%= link_to "more", "#", :id => "more_reviewers", :remote => true  %> 
```

也可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T12:52:16.650

在您的 Java 脚本中尝试包括以下内容：

```
<%= javascript_include_tag "jquery-1.8.3", "jquery.validate" %> 
```

我认为这将解决您的问题，因为我得到了使用它的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:08:06.327

删除 html 代码中的“#”。将其替换为`javascript:void(0);`

```
<%= link_to "more", "javascript:void(0);", :id => "more_reviewers", :remote => true  %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T07:11:13.703

这也将起作用。

```
$("#more_reviewers").click(function(e){
    e.preventDefault();
    #.....
}); 
```

# c++ - c++类中的动态数组

> ID：15541211
> 
> 赞同：0
> 
> 时间：2013-03-21T06:55:08.510
> 
> 标签：c++, arrays, class, function

我正在编写一个包含数组的酒店程序

//数组的大小是该酒店的房间数

//array[i] 包含房间 i 中的人，最多 3 人

一切正常（构造函数，复制构造函数，析构函数）我通过打印函数检查它（它打印数组的内容-零）

直到我发布状态函数（在类中定义）用一些数字自动填充数组内容！

```
void status (const Hotel& o){

    for (int i=0 ;i<o.numofrooms ;i++ ) {

if (o.arrayptr[i]=0)

    cout<<"Room number "<<i<< " is available"<<endl;
else
    cout<<"Room number "<<i<< " is unavailable"<<endl;

 }

} 
```

打印所有房间都不可用！谁在那里 :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:57:56.807

改成

```
if (o.arrayptr[i] == 0); // you're using the assignment '=' instead of the comparison '==' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:59:52.577

您通过执行使所有数组项为 0

```
o.arrayptr[i]=0 
```

代替

```
o.arrayptr[i]==0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:09:32.950

正如其他人已经指出的那样，将 if (o.arrayptr[i]=0) 更改为 if (o.arrayptr[i] **==** 0)。

为了捕获此类错误，请始终将常量放在相等比较的左侧。例如：

```
if (0 = o.arrayptr[i]) // flagged as an error by the compiler. 
```

一个原因是，如果您遗漏了其中一个 = 符号，编译器会为您找到错误。

# hadoop - oozie hive hadoop 工作

> ID：15541215
> 
> 赞同：1
> 
> 时间：2013-03-21T06:55:36.970
> 
> 标签：hadoop, mapreduce, hive, sqoop, oozie

嗨，我可以在 hive 终端中运行 hive 命令，但是当我尝试通过 oozie 运行它时，我无法运行它，出现一些错误，并且日志文件如下所示

```
2013-03-21 11:55:48,973  INFO ActionStartXCommand:539 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] Start action [0000005-130314190356094-oozie-biad-W@hive-node] with user-retry state : userRetryCount [0], userRetryMax [0], userRetryInterval [10]
2013-03-21 11:55:57,940  WARN HiveActionExecutor:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] credentials is null for the action
2013-03-21 11:55:57,940  WARN HiveActionExecutor:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] Could not find credentials properties for: null
2013-03-21 11:56:04,940  INFO HiveActionExecutor:539 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] checking action, external ID [job_201303141654_0020] status [RUNNING]
2013-03-21 11:56:04,955  WARN ActionStartXCommand:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] [***0000005-130314190356094-oozie-biad-W@hive-node***]Action status=RUNNING
2013-03-21 11:56:05,334  WARN ActionStartXCommand:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] [***0000005-130314190356094-oozie-biad-W@hive-node***]Action updated in DB!
2013-03-21 11:56:33,520  INFO CallbackServlet:539 - USER[-] GROUP[-] TOKEN[-] APP[-] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] callback for action [0000005-130314190356094-oozie-biad-W@hive-node]
2013-03-21 11:56:34,214  INFO HiveActionExecutor:539 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] action completed, external ID [job_201303141654_0020]
2013-03-21 11:56:34,365  WARN HiveActionExecutor:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] Launcher ERROR, reason: Main class [org.apache.oozie.action.hadoop.HiveMain], exit code [10]
2013-03-21 11:56:35,059  INFO ActionEndXCommand:539 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[0000005-130314190356094-oozie-biad-W@hive-node] ERROR is considered as FAILED for SLA
2013-03-21 11:56:35,364  WARN CoordActionUpdateXCommand:542 - USER[biadmin] GROUP[-] TOKEN[] APP[hive-wf] JOB[0000005-130314190356094-oozie-biad-W] ACTION[-] E1100: Command precondition does not hold before execution, [, coord action is null], Error Code: E1100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:50:31.903

这看起来像 Oozie 作业日志，它通常无法提供足够的信息让您找到问题的根源。您应该查看 map reduce 作业的任务日志。找到它的最简单方法是转到 Oozie Web 控制台（即[http://example.example.com:11000/oozie/](http://example.example.com:11000/oozie/))，双击有问题的 oozie 作业以打开其作业信息，在作业信息选项卡上双击失败的 Hive 操作。在进入选项卡的操作上应该有一个控制台 URL 字段。打开该地址并单击链接以查找有关任务的更多信息（即使是成功的，因为 oozie 可以吞下蜂巢故障并向任务跟踪器报告成功。根据我的经验，有用的日志一直在成功的地图任务中）。查看日志，希望但不一定，您会找到一些可以将其从“hive failed”缩小的内容。

这不是问题的真正答案，所以如果有人想将此作为评论发布并将此答案标记为删除，请这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T11:58:21.330

上述错误是因为，您使用了不匹配的 hadoop 和 hive 版本。要清除此错误，请使用所需版本重建 oozie。要使用所需版本重建 oozie，请在 OOZIE_HOME 中编辑 pom.xml 文件。

```
<hadoop.version>x.x.x</hadoop.version>
 <hive.version>0.x.x</hive.version>
 <pig.version>0.x.x</pig.version> 
```

编辑 pom 文件后，运行 OOZIE_HOME/bin/mkdistro.sh -DskipTests。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T04:58:53.043

错误来自 Oozie，协调器没有启动工作流，即，如果您以 root 用户启动 Oozie，请停止服务并使用您安装 Oozie 的用户重新启动 oozie。现在重新运行工作流程。

这将解决您的问题！

# linux - 在 Linux 下编程和运行 Windows 文件？

> ID：15541218
> 
> 赞同：0
> 
> 时间：2013-03-21T06:55:46.340
> 
> 标签：linux, windows

当计算机上已经安装了 Windows 时，是否可以在不使用 wine 的情况下在 Linux 下编程或运行 Windows 可执行文件？

我的意思是，据我所知，wine 除了下载 Windows 库并使用它们模拟 Windows 环境来运行程序之外什么都不做。我发现使用已有的东西而不是第二次下载它更舒服。

我也不想再次编写所有代码，而只是告诉例如 Qt 或 gcc 使用 Windows 文件而不是 linux 文件。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:05:28.783

Wine 不会下载 Windows dll，它会重新执行 api。因此，要运行 Windows 应用程序，您必须使用 Wine 或虚拟机之类的东西。

顺便说一句：问题更适合 superuser.com

BTW2：如果是关于编程：您可以尝试使用 Mono 等框架并针对不同的操作系统进行编译。

# javascript - 表单中的jQuery验证位置

> ID：15541220
> 
> 赞同：-4
> 
> 时间：2013-03-21T06:55:46.857
> 
> 标签：javascript, jquery, css

我有一个文本框并使用 jquery 完成验证，但验证错误显示在文本框旁边。如何对齐验证错误以显示在特定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:12:16.423

如果您使用 jquery validate 插件，只需添加此代码

```
 $("element").validate({
      errorLabelContainer: $("element"),
      errorClass: ".class"
 }); 
```

# c#-4.0 - C# 4.0 中 Box 的身份验证

> ID：15541228
> 
> 赞同：3
> 
> 时间：2013-03-21T06:56:03.980
> 
> 标签：c#-4.0, box-api

我正在尝试使用以下 C# 语言代码获取访问令牌，但我收到 400 错误请求异常。

代码：

```
WebRequest httpWReq = WebRequest.Create("https://www.box.com/api/oauth2/token");

string postData = "grant_type=authorization_code"; 
postData += "&code=" + Code; 
postData += "&client_id=MY_CLIENT_ID"; 
postData += "&client_secret=MY_CLIENT_SECRET"; 
postData += "&redirect_uri=https://www.google.com";

byte[] data = Encoding.UTF8.GetBytes(postData); 
httpWReq.Method = "POST"; 
httpWReq.ContentType = "application/x-www-form-urlencoding"; 
httpWReq.ContentLength = data.Length; 

using (Stream stream = httpWReq.GetRequestStream()) 
{ 
    stream.Write(data, 0, data.Length); 
}

var response = httpWReq.GetResponse();
var responseStream = response.GetResponseStream();
using (var reader = new StreamReader(responseStream))
{
    var responseReader = reader.ReadToEnd();
    MessageBox.Show(responseReader);
} 
```

但我总是收到以下错误：

```
{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

如何克服这个问题？

任何帮助将不胜感激。提前致谢。

谢谢，哈里什·雷迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:44:14.530

我看到两个可能的问题，都与这一行有关：

```
postData += "&redirect_uri=https://www.google.com"; 
```

1.  我认为您需要对重定向 URI 进行 urlencode。
2.  我认为您不拥有*google.com*域，因此这是一个无效值。:) 您需要重新指向您发出请求的域。或者更好的是，在 Box 应用程序的配置页面上预设此重定向 URI。

顺便说一句，您可能有兴趣查看 GitHub 和 NuGet 上的[Box API v2 SDK for .Net](https://github.com/jhoerr/box-csharp-sdk-v2)（以及相应[的基于 MVC 的 OAuth 示例](https://github.com/jhoerr/box-csharp-sdk-v2.sample.oauth)）。（完全披露：我对两者都有贡献。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T06:54:51.190

```
HttpWebRequest httpWReq =
                (HttpWebRequest)WebRequest.Create("https://api.box.com/oauth2/token");

            ASCIIEncoding encoding = new ASCIIEncoding();
            string postData = "grant_type=authorization_code";
            postData += "&code=" + authorizationCode;
            postData += "&client_id=" + ClientId;
            postData += "&client_secret=" + ClientSecretId;
            byte[] data = encoding.GetBytes(postData);

            httpWReq.Method = "POST";
            httpWReq.ContentType = "application/x-www-form-urlencoded";
            //httpWReq.ContentType = "application/x-www-form-urlencoded";
            httpWReq.ContentLength = data.Length;

            using (Stream stream = httpWReq.GetRequestStream())
            {
                stream.Write(data, 0, data.Length);
            } 
```

# c++ - memcpy 的多线程编程

> ID：15541231
> 
> 赞同：3
> 
> 时间：2013-03-21T06:56:22.790
> 
> 标签：c++, c, multithreading, memcpy

我正在为 memcpy 函数做一个优化任务，我在这里找到了这个链接。[如何提高 memcpy 的性能](https://stackoverflow.com/questions/4260602/how-to-increase-performance-of-memcpy)

由于我不熟悉多线程编程，所以不知道如何将下面的代码插入到原来的main函数中？如何将原问题中的代码修改成多线程memcpy项目？我的意思是，如何为这个多线程项目创建一个完整的`memcpy`项目。在原始 main 函数中插入类似`startCopyThreads`or `stopCopyThreads`or函数的地方在哪里？`mt_memcpy`

```
#define NUM_CPY_THREADS 4

HANDLE hCopyThreads[NUM_CPY_THREADS] = {0};
HANDLE hCopyStartSemaphores[NUM_CPY_THREADS] = {0};
HANDLE hCopyStopSemaphores[NUM_CPY_THREADS] = {0};
typedef struct
{
    int ct;
    void * src, * dest;
    size_t size;
} mt_cpy_t;

mt_cpy_t mtParamters[NUM_CPY_THREADS] = {0};

DWORD WINAPI thread_copy_proc(LPVOID param)
{
    mt_cpy_t * p = (mt_cpy_t * ) param;

    while(1)
    {
        WaitForSingleObject(hCopyStartSemaphores[p->ct], INFINITE);
        memcpy(p->dest, p->src, p->size);
        ReleaseSemaphore(hCopyStopSemaphores[p->ct], 1, NULL);
    }

    return 0;
}

int startCopyThreads()
{
    for(int ctr = 0; ctr < NUM_CPY_THREADS; ctr++)
    {
        hCopyStartSemaphores[ctr] = CreateSemaphore(NULL, 0, 1, NULL);
        hCopyStopSemaphores[ctr] = CreateSemaphore(NULL, 0, 1, NULL);
        mtParamters[ctr].ct = ctr;
        hCopyThreads[ctr] = CreateThread(0, 0, thread_copy_proc, &mtParamters[ctr], 0,     NULL); 
}

    return 0;
}

void * mt_memcpy(void * dest, void * src, size_t bytes)
{
    //set up parameters
    for(int ctr = 0; ctr < NUM_CPY_THREADS; ctr++)
    {
        mtParamters[ctr].dest = (char *) dest + ctr * bytes / NUM_CPY_THREADS;
        mtParamters[ctr].src = (char *) src + ctr * bytes / NUM_CPY_THREADS;
        mtParamters[ctr].size = (ctr + 1) * bytes / NUM_CPY_THREADS - ctr * bytes /     NUM_CPY_THREADS;
    }

    //release semaphores to start computation
    for(int ctr = 0; ctr < NUM_CPY_THREADS; ctr++)
        ReleaseSemaphore(hCopyStartSemaphores[ctr], 1, NULL);

    //wait for all threads to finish
    WaitForMultipleObjects(NUM_CPY_THREADS, hCopyStopSemaphores, TRUE, INFINITE);

    return dest;
}

int stopCopyThreads()
{
    for(int ctr = 0; ctr < NUM_CPY_THREADS; ctr++)
    {
        TerminateThread(hCopyThreads[ctr], 0);
        CloseHandle(hCopyStartSemaphores[ctr]);
        CloseHandle(hCopyStopSemaphores[ctr]);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:05:32.577

这在很大程度上取决于架构和操作系统。

使用一个处理器：

如果您`memcpy`在只有 1 个核心的机器上使用线程，那么它不会显示加速。原因是，对于在一个处理器上运行的所有线程，都会有上下文切换，与使用 memcpy 而不使用线程时相比，这将是一种开销。

多核：

在这种情况下，它还取决于内核，是否将您的线程映射到不同的处理器上，因为这些线程将是用户级别的。如果您的线程在同时运行的不同处理器上，如果内存具有双端口访问，您可能会看到加速。对于单端口访问，我不确定它是否会有所改进。

# linux - 如何快速确定哪个进程（如果有）监听串口。

> ID：15541233
> 
> 赞同：1
> 
> 时间：2013-03-21T06:56:42.063
> 
> 标签：linux

我正在寻找一个命令来查看监听端口的进程，例如`/dev/ttyS0`（在 Linux 系统上具有 root 权限）。我可以做到这一点

```
lsof /dev/ttyS0 
```

但这真的太慢了​​。另外，我不能使用该`-p`标志来使其更快。

我想使用 linux 系统的其他资源做同样的事情。那可能吗？

# php - 如何阻止重复条目进入数据库

> ID：15541235
> 
> 赞同：1
> 
> 时间：2013-03-21T06:56:48.703
> 
> 标签：php, mysql, loops, insert, duplicates

您好我正在尝试通过选择复选框将信息数组插入数据库中的字段中

```
 $list = $_POST['sub'];

    // for each loop to insert each value into the database with the selected users informtion
    foreach ($list as  $value)  {

        // The query to run
        $listQuery='INSERT INTO tbl_list (`userId`, `subId`) VALUES (\'' . $id . '\', \'' . $value . '\')';

        // Run the query
        $objects->query($listQuery);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:07:24.703

`userId`您应该为 ( , )添加一个唯一键`subId`：

```
ALTER TABLE tbl_list ADD UNIQUE(`userId`, `subId`) 
```

然后，您应该使用`INSERT IGNORE`or`REPLACE INTO`来避免插入期间的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:12:35.523

您可以使用 [Insert Ignore](http://www.tutorialspoint.com/mysql/mysql-handling-duplicates.htm)而不是`Insert`在 mysql 查询中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T18:45:07.207

为了阻止重复的条目进入数据库，你必须做这件事。一步一步来

```
> 1.set a unique key on the table

after Complete create unique key you have to decide what you want to do when there's a duplicate

> 2\. ignore it

> 3.Overwrite the previously entered record

> Update some counter 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T07:04:59.450

您需要做两件事，首先使您的 userId 成为主键，然后尝试此查询
$listQuery='INSERT INTO tbl_list ( `userId`, `subId`) VALUES (\'' . $id . '\', \'' . $value . '\' ) 重复键更新 userId = LAST_INSERT_ID()';

# css - 关于 css 和 !important 标签

> ID：15541239
> 
> 赞同：3
> 
> 时间：2013-03-21T06:57:07.500
> 
> 标签：css, styles

任何人都可以解释在现实中做什么！在 css 样式中很重要吗？

当我在其他网站上查看 css 时，他们有时会使用它，但为什么呢？我并没有真正理解！重要的“工作”：D

谢谢你...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T06:59:30.293

`!important`规则是一种让你的方法，但`CSS cascade`也有你认为最重要的规则总是被应用。`!important`无论该规则出现在 CSS 文档中的什么位置，都将始终应用具有该属性的规则。因此，如果您想确保始终应用某个属性，您可以将该`!important`属性添加到标签中。因此，要使段落文本始终为红色，在上面的示例中，您将编写：

```
p { color: #ff0000 !important; }
 p { color: #000000; } 
```

在你的 CSS 中使用`!important`通常意味着你自恋、自私或懒惰。尊重即将到来的开发者...

**[更多关于这个](http://css-tricks.com/when-using-important-is-the-right-choice/)**

**[有关此链接的更多信息 2](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)**

`!important`是 CSS1 的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:00:23.277

## 它是什么？

`!important`覆盖其他没有它的样式。这是 CSS 的基本优先级顺序：

1.  规则与`!important`

2.  更具体的规则

    ```
    .classNameA .classNameB {} /* more specific */
    .classNameB {} 
    ```

3.  规则的顺序

    ```
    .classNameB {}
    .classNameB {} /* takes priority */ 
    ```

## 例子

```
.classNameB .classNameA {
    background-color: red;
}
.classNameA {
    background-color: blue !important;
} 
```

尽管`.classNameA`在第一条规则中更具体，但`background-color`of`.classNameA`是`blue`因为`!important`.

## 你应该使用它吗？

不，不惜一切代价避免它。仅在绝对必要时才使用它，并且如果您发现自己处于这种情况，请考虑重构您的 CSS。这样做的原因是，当您到处都有`!important`规则时，很难更改您的 CSS。这也是糟糕的 CSS 设计的一个指标。

## 进一步阅读

*   [Smashing 杂志 - !important CSS 声明：如何以及何时使用它们](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)
*   [CSS 技巧 - 使用 !important 是正确的选择](http://css-tricks.com/when-using-important-is-the-right-choice/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T06:59:46.100

`!important``priority`在 css 属性上设置。如果你有两个相同的 CSS 属性但有一些不同的值，一个`!important`标记会将优先级设置为 HIGH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:03:06.187

通常，后面的 CSS 声明会优先处理。因此，如果您在样式表中为某个元素声明了某种背景颜色，并且页面本身的样式块或内联样式为该元素声明了另一种背景颜色，则样式块或内联样式会否决样式表。

如果您添加`!important`到样式表中的声明，则该声明不会被否决。

# jquery - jQuery网格遍历方法

> ID：15541246
> 
> 赞同：1
> 
> 时间：2013-03-21T06:57:46.307
> 
> 标签：jquery, html, css

我正在制作一个基于网格的游戏，我希望用户能够单击网格中的每个可选块，以使相邻（水平、垂直、对角）块可选择并阻止选定块。所有选定块应该保持选中状态。我正在使用两个不同的类，称为 selectable 和 selected 来区分。只有当前选定块的相邻块应该是可选择的。现在我想要与当前（最后一个）不相邻的所有可选元素被选中元素返回到它们的默认状态。像这样的东西（选择深蓝色，可选择浅蓝色）：

![在此处输入图像描述](../Images/e996f17f4f8ef245850230eb5b2ab439.png)

我使用了一些 jQuery 遍历方法，但我被困在一个点上，我无法找出任何有效的代码。请帮忙！

小提琴：http: [//jsfiddle.net/3DHMd/2/](http://jsfiddle.net/3DHMd/2/)

HTML：

```
 <div class="outer">
<div class="inner">
<div class="grid">
<div class="column" id="column1">   
<div id="1" class="block"></div>
<div id="6" class="block"></div>
<div id="11" class="block"></div>
<div id="16" class="block"></div>
<div id="21" class="block"></div>
<div id="26" class="block"></div>
</div>
<div class="column" id="column2">
<div id="2" class="block"></div>
<div id="7" class="block"></div>
<div id="12" class="block"></div>
<div id="17" class="block"></div>   
<div id="22" class="block"></div>
<div id="27" class="block"></div>
</div>
<div class="column" id="column3">   
<div id="3" class="block"></div>
<div id="8" class="block"></div>
<div id="13" class="block"></div>
<div id="18" class="block"></div>
<div id="23" class="block"></div>
<div id="28" class="block"></div>
</div>
<div class="column" id="column4">   
<div id="4" class="block"></div>
<div id="9" class="block"></div>
<div id="14" class="block"></div>
<div id="19" class="block"></div>
<div id="24" class="block"></div>
<div id="29" class="block"></div>
</div>
<div class="column" id="column5">   
<div id="5" class="block"></div>
<div id="10" class="block"></div>
<div id="15" class="block"></div>
<div id="20" class="block"></div>
<div id="25" class="block"></div>
<div id="30" class="block"></div>
</div>
</div> 
```

CSS：

```
 html,body{
width:100%;
height:100%;
margin:0 auto;
cursor:default;
}

.outer {
    position: relative;
    display:table;
    width:100%; 
    height:85.25%;
    background-color:#959595;
}

.inner {
display:table-cell; 
    text-align:center;
    width:100%;
    height:85.25%;
}

.grid{
    margin-top: 2%;
    margin-right: auto;
    margin-left: auto;
    border:0.7em solid #778086;
    width:93%; 
    height:90%;
    background-color: #B3B1B1;
    clear:both;    
}

.column{
width:20%;
height:100%;
float: left;
}

.block {
 width:100%;
 height:16.15%;
 border: 0.1em solid  #778086;
 text-align: center;
font-size: 1.3em;
font-family: 'Roboto', sans-serif;
line-height: 2.8em;
}

.selected {
    background-color:#2976A2; 
    color:#FFFFFF;
}

.selectable {
    cursor: pointer;
    cursor: hand;
    background-color:#8DBFC4; 
    color:#FFFFFF;
    } 
```

JS：

```
 $('#1').addClass('selected');

$('#2,#6,#7').addClass('selectable');

$(document).on('click','.selectable',function() {
$(this).toggleClass('selected').toggleClass('selectable');
var ind=$(this).index();
$(this).prev().toggleClass('selectable');
$(this).next().toggleClass('selectable');
if (ind!=0)
{
$(this).parent().prev().children().eq(ind-1).toggleClass('selectable');
$(this).parent().next().children().eq(ind-1).toggleClass('selectable');
}
$(this).parent().prev().children().eq(ind).toggleClass('selectable');
$(this).parent().next().children().eq(ind).toggleClass('selectable');
$(this).parent().prev().children().eq(ind+1).toggleClass('selectable');
$(this).parent().next().children().eq(ind+1).toggleClass('selectable');
$(this).parents().children('.selected.selectable').removeClass('selectable'); $(this).parents().siblings().children('.selected.selectable').removeClass('selectable'); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:45:08.263

尝试

```
function markSelectable(el) {
    el.addClass('selectable');
}

var $grid = $('.grid')
$grid.on('click', '.selectable:not(.selected)', function() {
    var $this = $(this), ind = $this.index(), $parent = $this.parent(), count, filter;

    $('.selectable', $grid).removeClass('selectable');
    $this.addClass('selected');

    markSelectable($this.prev(':not(.selected)'));
    markSelectable($this.next(':not(.selected)'));

    count = ind == 0 ? 2 : 3;
    filter = '.block' + (ind > 1 ? ':gt(' + (ind - 2) + ')' : '') + ':lt('
            + count + '):not(.selected)';

    markSelectable($(filter, $parent.prev()));
    markSelectable($(filter, $parent.next()));
});

$('.block:first', $grid).addClass('selectable').trigger('click'); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZauHW/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:14:09.013

我用这个解决了它：

JS代码：

```
 $('#1').addClass('selected');

$('#2,#6,#7').addClass('selectable');

$(document).on('click','.selectable',function() {
$(this).addClass('selected').removeClass('selectable');
var ind=$(this).index();
$('.block').removeClass('selectable');
$(this).prev().addClass('selectable');
$(this).next().addClass('selectable');
if (ind!=0)
{
$(this).parent().prev().children().eq(ind-1).addClass('selectable');
$(this).parent().next().children().eq(ind-1).addClass('selectable');
}
$(this).parent().prev().children().eq(ind).addClass('selectable');
$(this).parent().next().children().eq(ind).addClass('selectable');
$(this).parent().prev().children().eq(ind+1).addClass('selectable');
$(this).parent().next().children().eq(ind+1).addClass('selectable');
$(this).parents().children('.selected.selectable').removeClass('selectable'); 
$(this).parents().siblings().children('.selected.selectable').removeClass('selectable'); 
$(this).parents().children('.selected').off('click');
$(this).parents().siblings().children('.selected').off('click');

}); 
```

小提琴：http: [//jsfiddle.net/3DHMd/3/](http://jsfiddle.net/3DHMd/3/)

# css - 如何将样式添加到 display:table 中的行

> ID：15541248
> 
> 赞同：1
> 
> 时间：2013-03-21T06:57:48.857
> 
> 标签：css, jsp, struts2

以下是我的代码....它在除 Firefox 之外的所有浏览器中都能完美运行...在 Firefox 中，该行的底部边框不可见...我该如何解决？

```
 <display:table class="displayTableBorder" export="false" style="width:95%;" rules="rows" summary="Plan actions and notes" name="planSummaryDTO.listPlanNoteDto" uid="planNote" rules="rows" requestURI="" pagesize="2">

 <display:column class="table-row" style="border:1px solid black;" title="Action" headerClass="hixTableHeader header" class="displayTagtd" style="width: 10%;text-align: center;">

   <a href="javascript:showUpdateWindow('UPDATE','${planNote.noteId}');" style="FONT-SIZE: 14px;font-family: Vegur;color: rgb(0, 0, 0); text-decoration:underline;font-weight:normal">${planNote.action}</a>
</display:column>

<display:column style="border:1px solid black;" property="createdDate" style="width: 20%;text-align: center;"  title="Date" headerClass="hixTableHeader header" class="displayTagtd" />
            </display:table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:04:56.053

如果您是代码生成表，则删除内联样式并使用以下 CSS

```
 <style>
 table, table tr, table tr td
 {
    border: 1px solid gray;
    -moz-border: 1px solid gray;
    -webkit-border: 1px solid gray;
    border-collapse: collapse;
 }
 </style> 
```

如果上面的代码不适合您，请在此处将您生成的代码发送给我。我会解决你的问题。

# c - 解释打印两个数字的 GCD 和 LCD 的程序的工作原理

> ID：15541253
> 
> 赞同：1
> 
> 时间：2013-03-21T06:58:04.990
> 
> 标签：c

我知道它非常简单，但我无法找出变量`t`的用途。

```
int main() {
    int a, b, x, y, t, gcd, lcm;

    printf("Enter two integers\n");
    scanf("%d%d", &x, &y);

    a = x;
    b = y;

    while (b != 0) {
       t = b;
        b = a % b;
        a = t;
    }

    gcd = a;
    lcm = (x*y)/gcd;

    printf("Greatest common divisor of %d and %d = %d\n", x, y, gcd);
    printf("Least common multiple of %d and %d = %d\n", x, y, lcm);

    return 0;
} 
```

如果我删除 variable 的使用`t`，则输入必须按降序给出（即最高输入优先）。如果`t`使用一切正常。我对编程很陌生，所以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:18:57.827

这是计算 GCD 的欧几里得算法。

```
 function gcd(a, b){
     while (b ≠ 0){
        t := b;
        b := a mod t;
        a := t;
      }
     return a
    } 
```

这个逻辑减少了 a 和 b 的值。t 是一个持有 b 值的虚拟变量，同时正在计算 b 的下一个新值。这将更小。所以最终我们将能够以所需的结果终止算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:03:42.033

在这个 t 是临时持有。

在这个`while`循环`a%b`中必须设置为b，并且b的值必须设置为a。避免损失 b 的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:07:15.450

假设您有 2 个值 - 旧的“a”和旧的“b”（没有“t”）。

“while”循环应该将这些值更新为新的“a”和新的“b”。每次重新计算新的“a”都需要旧的“b”，每次重新计算新的“b”都需要旧的“a”。但是，如果您先计算“b”，它会覆盖旧值，并且您无法正确计算“a”。反过来也一样——重新计算新的“a”，你会失去旧的值，不能用它来计算“b”。因此，您需要一个临时变量来存储您在迭代中首先重新计算的任何变量（“a”或“b”）的旧值，然后使用这个缓存的值来计算另一个 :) 't' 是这个临时变量.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T07:10:25.933

使用临时变量是一种常见的编程习惯。它用于保存变量值的副本，以便稍后在使用不同值更新变量后使用该值。也许最简单的用例是*交换*，也称为*交换*。

```
/* swap the values held by a and b */
t = b; /* t holds the value in b */
b = a; /* b gets the value in a */
a = t; /* a gets the value in t */ 
```

循环的逻辑与`while`上图没有根本不同。

实现的算法是*欧几里得算法*。它基于*除法定理*，该定理指出对于正的`a`和`b`，存在`q`这样的`a = q*b + r`和`0 <= r < b`。在 C 中，`r`可以用 计算`a % b`。

在`a`小于的情况下`b`，`a % b`则为`a`。因此，该算法允许`a`并`b`在下一次迭代中切换位置。

如果您想要一个没有临时的算法公式，您可以使用循环缓冲区。

```
int r[3] = { a, b, a % b };
int i = 0;
while (r[(i + 2) % 3]) {
    ++i;
    r[(i + 2) % 3] = r[i % 3] % r[(i + 1) % 3];
}
gcd = r[(i + 1) % 3]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T07:14:09.577

根据您的程序逻辑，

*   考虑两个数字 - 2 和 3。
*   要计算 GCD，
    1.  计算 2 % 3。结果是 2（不是 0）所以继续。
    2.  计算 3 % 结果 => 3 % 2。结果为 1（不是 0）所以继续。
    3.  计算 2 % 结果 => 2 % 1。这个答案是 0。因此我们的 GCD 是第二个数字（即）1。

所以基本上，您`t`可以帮助您在每次迭代中存储第二个数字，以便在下一次迭代中，您的第一个数字（即“%”运算符左侧的数字）是上一次迭代的第二个数字。（我希望这没有把你的废话弄糊涂）

所有这些都是必要的，因为您在每次迭代中都用 '%' 操作的结果覆盖了第二个数字。

# javascript - 在谷歌地图的线路路径中放置方形或圆形图像

> ID：15541257
> 
> 赞同：1
> 
> 时间：2013-03-21T06:58:45.137
> 
> 标签：javascript, google-maps, line

我已经使用 javascript 和 gps 坐标在 Google 地图中绘制了一条线路径。

谁能告诉我如何在谷歌地图中绘制的线路径的末端放置一个圆圈或正方形。

[演示](http://jsfiddle.net/nidhish31589/wLeBh/)

我的代码如下所示

```
function initialize(){
       var center= new google.maps.LatLng(10.012552,76.327043);
       var myOptions = {
                zoom: 16,
                center: center,
                mapTypeControl: true,
                mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
                navigationControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP
       }     
      var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

      var polylineCoordinates = [
            new google.maps.LatLng(10.013566,76.331549),
            new google.maps.LatLng(10.013566,76.331463),
            new google.maps.LatLng(10.013503,76.331313),
            new google.maps.LatLng(10.013482,76.331205),
            new google.maps.LatLng(10.013419,76.330926),
new google.maps.LatLng(10.013334,76.330712),
new google.maps.LatLng(10.013313,76.330411),
new google.maps.LatLng(10.013292,76.330175),
new google.maps.LatLng(10.013228,76.329854),
new google.maps.LatLng(10.013144,76.329553),
new google.maps.LatLng(10.013059,76.329296),
new google.maps.LatLng(10.012996,76.329017),
new google.maps.LatLng(10.012869,76.328802),
new google.maps.LatLng(10.012785,76.328545),
new google.maps.LatLng(10.012700,76.328223),
new google.maps.LatLng(10.012679,76.328030),
new google.maps.LatLng(10.012658,76.327837),
new google.maps.LatLng(10.012637,76.327600),
new google.maps.LatLng(10.012573,76.327322),
new google.maps.LatLng(10.012552,76.327043),

      ];
      var polyline = new google.maps.Polyline({
          path: polylineCoordinates,
          strokeColor: '#FF3300',
          strokeOpacity: 2.0,
          strokeWeight: 5,
          editable: false
      });

      polyline.setMap(map);    
}
initialize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:14:50.437

您可以在给定位置创建一个[图标](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)`polylineCoordinates[polylineCoordinates.length-1]`

[**http://jsfiddle.net/wLeBh/5/**](http://jsfiddle.net/wLeBh/5/)

# c# - 查询字符串上的回发页面

> ID：15541260
> 
> 赞同：0
> 
> 时间：2013-03-21T06:58:55.347
> 
> 标签：c#, asp.net, postback, autopostback

这个问题与[Is postback works only in pageload 重复？](https://stackoverflow.com/questions/15540048/is-postback-works-only-in-pageload?noredirect=1#comment22017961_15540048) 当我的查询字符串中有值时，我想发回页面。见代码

```
if (Request.QueryString["HotelID"] != null)
// here i want to post back 
{ 
```

我怎样才能发回页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:41:28.850

你可以使用这个：

```
if (Request.QueryString["HotelID"] != null)
{
    Page_Load(sender, e);
} 
```

或这个：

```
if (Request.QueryString["HotelID"] != null)
{
    Response.Redirect(Page.AppRelativeVirtualPath.ToString());
} 
```

希望能帮助到你：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:47:05.783

尝试这个;

```
if(!String.IsNullOrEmpty(Request.QueryString["HotelID"]))
{
     Response.Redirect(Request.UrlReferrer.ToString());
    or
     Response.Redirect("yourpagewithpath.aspx");
} 
```

# php - 检查 SQL 语句是否实际运行

> ID：15541261
> 
> 赞同：-1
> 
> 时间：2013-03-21T06:58:57.333
> 
> 标签：php, mysql

我发布这个是为了看看是否有人可以帮助我解决这个小问题。现在我有这个代码：

```
visible $sqlUpdate = "UPDATE user.user SET level='1' WHERE id='".$_GET['char']."' AND level >249 AND power>0 LIMIT 1"; 
```

我想要做的是，如果查询实际运行， print `Correct`，否则，`Error`.

我尝试了什么：

```
visible       $sqlUpdate = "UPDATE user.user SET level='1' WHERE id='".$_GET['char']."' AND level >249 AND power>0 LIMIT 1";
              $updatePos = mysql_query($sqlUpdate);
              if($sqlUpdate==1) {

              }
              else { echo'<p class="as">Correct.</p>'; }

            }
            else {
              echo'<p class="as">Error .</p>';
            } 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:10:17.120

如果条件应检查 $updatePos。如果它是真的，那么它是正确的，否则它会给你错误。

你可以从这里查看一个例子：http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:02:46.340

使用`mysql_affected_rows()`which 返回成功时受影响的行数，*如果最后一个查询失败则返回 -1*。

```
$chrVal = $_GET['char'];
$sqlUpdate = "UPDATE user SET level = '1' WHERE id = '$chrVal' AND level > 249 AND power > 0 LIMIT 1";
$updatePos = mysql_query($sqlUpdate);
if(mysql_affected_rows() >= 1) 
{ 
    echo'<p class="as">Correct.</p>';
}
else
{
    echo'<p class="as">Error .</p>';
} 
```

*   [mysql_affected_rows()](http://www.php.net/manual/en/function.mysql-affected-rows.php)

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:02:59.003

如果您想知道行是否更新。尝试`mysql_affected_rows()`

[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)

```
$char = mysql_escape_string($_GET['char']);
$sqlUpdate = "UPDATE user.user SET level='1' WHERE id='" . $char . "' AND level >249 AND power>0 LIMIT 1";
$updatePos = mysql_query($sqlUpdate);
$affRows = mysql_affected_rows();
if ($affRows) {
  echo'<p class="as">Correct.</p>';
} else {
  echo'<p class="as">Error .</p>';
} 
```

也用于`mysql_escape_string`避免 sql 注入 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:08:50.960

尝试这个：

```
$sqlUpdate = "UPDATE user.user SET level='1' WHERE id='".$_GET['char']."' AND level >249 AND power>0 LIMIT 1";
              $updatePos = mysql_query($sqlUpdate);
              if($updatePos==1) {

              }
              else { echo'<p class="as">Correct.</p>'; }

            }
            else {
              echo'<p class="as">Error .</p>';
            } 
```

您也可以检查它 mysql_num_rows();

像[这样](http://php.net/manual/en/function.mysql-affected-rows.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:03:23.617

将变量名 $sqlUpdate 更改为 $updatePos

```
$sqlUpdate = "UPDATE user.user SET level='1' WHERE id='".$_GET['char']."' AND level >249 AND power>0 LIMIT 1";
                  $updatePos = mysql_query($sqlUpdate);
                  if($updatePos==1) {

                  }
                  else { echo'<p class="as">Correct.</p>'; }

                }
                else {
                  echo'<p class="as">Error .</p>';
                } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T07:07:35.860

我使用以下。

```
 if( $updatePos = mysql_query($sqlUpdate))
 {
 echo'<p class="as">Correct.</p>';     
 }
 else
 {
 echo'<p class="as">Error.</p>';     
 } 
```

如果查询错误，它将返回错误。

# c++ - 在不退出程序的情况下使用警报（3）——C++

> ID：15541262
> 
> 赞同：0
> 
> 时间：2013-03-21T06:58:58.810
> 
> 标签：c++, linux, makefile, centos

这是我的代码。

```
 #include<iostream>
int main()
{
    std::string str;
    while(true)
    {
    std::cout<<"enter string \n";
    alarm(3);
    getline(std::cin,str);
       // calling another function in some other class,
           and return to here (If not entered any string in 3 sec) 
    }
    return 0;
} 
```

2 秒后它退出我的程序。但是，我想继续调用另一个函数并返回相同的 getline()。是否可以？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:02:35.310

如果您阅读[参考页面，`alarm`](http://pubs.opengroup.org/onlinepubs/009695399/functions/alarm.html)您会看到：

> 该功能应使系统在经过秒指定的实时秒数后为进程`alarm()`生成信号。`SIGALRM`

您需要*捕获*此`SIGALRM`信号，例如通过使用[`sigaction`](http://pubs.opengroup.org/onlinepubs/009695399/functions/sigaction.html)系统调用。

# c++ - 如何使用 Boost Filesystem Library v3 确定文件是否包含在路径中？

> ID：15541263
> 
> 赞同：14
> 
> 时间：2013-03-21T06:59:00.733
> 
> 标签：c++, boost, boost-filesystem

如何确定文件是否包含在 boost 文件系统 v3 的路径中。

我看到有一个较小或较大的运算符，但这似乎只是词汇。我看到的最好的方法是：

*   取文件的两个绝对路径和路径
*   删除文件的最后一部分，看看它是否等于路径（如果它包含）

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T14:13:14.847

以下函数应确定文件名是否位于给定目录中的某个位置，无论是作为直接子目录还是在某个子目录中。

```
bool path_contains_file(path dir, path file)
{
  // If dir ends with "/" and isn't the root directory, then the final
  // component returned by iterators will include "." and will interfere
  // with the std::equal check below, so we strip it before proceeding.
  if (dir.filename() == ".")
    dir.remove_filename();
  // We're also not interested in the file's name.
  assert(file.has_filename());
  file.remove_filename();

  // If dir has more components than file, then file can't possibly
  // reside in dir.
  auto dir_len = std::distance(dir.begin(), dir.end());
  auto file_len = std::distance(file.begin(), file.end());
  if (dir_len > file_len)
    return false;

  // This stops checking when it reaches dir.end(), so it's OK if file
  // has more directory components afterward. They won't be checked.
  return std::equal(dir.begin(), dir.end(), file.begin());
} 
```

如果您只想检查目录是否是文件的直接父目录，请改用：

```
bool path_directly_contains_file(path dir, path file)
{
  if (dir.filename() == ".")
    dir.remove_filename();
  assert(file.has_filename());
  file.remove_filename();

  return dir == file;
} 
```

您可能还对关于路径[的“相同”意味着什么的讨论感兴趣。](http://www.boost.org/doc/libs/1_53_0/libs/filesystem/doc/reference.html#path-non-member-functions)`operator==`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-12-13T18:56:11.893

如果你只是想在词法上检查一个是否是另一个的前缀，`path`而不用担心或符号链接，你可以使用这个：`.``..`

```
bool path_has_prefix(const path & path, const path & prefix)
{
    auto pair = std::mismatch(path.begin(), path.end(), prefix.begin(), prefix.end());
    return pair.second == prefix.end();
} 
```

请注意，`std::mismatch`此处使用的四个参数重载直到 C++14 才添加。

当然，如果您想要的不仅仅是路径的严格词法比较，您可以在其中一个或两个参数上调用`lexically_normal()`or 。`canonical()`

# android - 是否可以将一个分配用于一系列渲染脚本操作？

> ID：15541265
> 
> 赞同：2
> 
> 时间：2013-03-21T06:59:03.137
> 
> 标签：android, renderscript

例如，我从位图进行分配，然后对其应用brightnessContrastRs()，然后在该分配上应用一些具有类似实现的不同过滤器，由brightnessContrastRs() 操作更改？

```
public Bitmap brightnessContrastRs(Bitmap bmIn, int brightness, int contrast)
{
    Bitmap bmOut = Bitmap.createBitmap(bmIn.getWidth(), bmIn.getHeight(),
            bmIn.getConfig());
    Allocation allocIn;
    allocIn = Allocation.createFromBitmap(rs, bmIn,
            Allocation.MipmapControl.MIPMAP_NONE,
            Allocation.USAGE_SCRIPT);
    Allocation allocOut = Allocation.createTyped(rs, allocIn.getType());

    scriptCBrightnessContrast.set_in(allocIn);
    allocIn.destroy();
    scriptCBrightnessContrast.set_out(allocOut);
    scriptCBrightnessContrast.set_script(scriptCBrightnessContrast);
    float rowContrast = ((100.0f + contrast) * (100.0f + contrast) / 10000.0f);
    float rowBrightness = brightness / 255.f;
    scriptCBrightnessContrast.set_rowBrightness(rowBrightness);
    scriptCBrightnessContrast.set_rowContrast(rowContrast);
    scriptCBrightnessContrast.invoke_filter();
    allocOut.copyTo(bmOut);
    allocOut.destroy();
    return bmOut;
} 
```

RS脚本：

```
rs_allocation out;
rs_allocation in;
rs_script script;

float rowBrightness;
float rowContrast;

void root(const uchar4* v_in, uchar4* v_out, const void* usrData, uint32_t x,
          uint32_t y)
{
   float4 current = rsUnpackColor8888(*v_in);

   current.r = clamp(((clamp(current.r + rowBrightness, 0.0f, 1.0f) - 0.5f) * rowContrast + 0.5f), 0.0f, 1.0f);
   current.g = clamp(((clamp(current.g + rowBrightness, 0.0f, 1.0f)- 0.5f) * rowContrast + 0.5f), 0.0f, 1.0f);
   current.b = clamp(((clamp(current.b + rowBrightness, 0.0f, 1.0f) - 0.5f) * rowContrast + 0.5f), 0.0f, 1.0f);

   *v_out = rsPackColorTo8888(current.r, current.g, current.b, current.a);
}
void filter()
{
    #if !defined(RS_VERSION) || (RS_VERSION < 14)
       rsForEach(script, in, out, 0);
    #else
       rsForEach(script, in, out);
    #endif
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T16:44:21.773

您应该改用 ScriptGroup。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T22:44:31.650

如果您问是否可以像这样传递分配并让事情正常进行，是的，您当然可以这样做。但是，您不能那么早销毁 allocIn，因为它仍然需要在脚本启动时使用。

# android - 在android的textview中显示静态和动态数据

> ID：15541266
> 
> 赞同：0
> 
> 时间：2013-03-21T06:59:03.943
> 
> 标签：android

他们无论如何要在textview中显示静态和动态数据..

这是我在我的 xml 中定义的 textview

```
<TextView
        android:gravity="center_horizontal"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:id="@+id/Rowtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:text="Listiems" />. 
```

我必须显示它们在 android:text 中的文本及其旁边的动态数据。

他们有什么办法吗？

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:04:15.527

有两种方法可以做到这一点 1）在 android:text 参数中提供静态文本，然后从你的类中附加动态文本

```
android:text="some static String"
textView.append(Some dynamic String"); 
```

2）或者你可以在类文件中给出两者，如下所示

```
 textView.setText(getString(R.string.someString)+"Some dynamic String"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:01:13.067

利用

```
String tempString="Your Dynamic text Here";
TextView text=(TextView)findViewById(R.id.Rowtext);
SpannableString spanString = new SpannableString(tempString);
spanString.setSpan(new StyleSpan(Typeface.BOLD), 0, spanString.length(), 0);
text.setText(" ");
text.append(spanString); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:01:22.750

```
 <TextView
    android:gravity="center_horizontal"
    android:paddingTop="5dp"
    android:paddingBottom="5dp"
    android:id="@+id/Rowtext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:text="Listiems" />.

TextView _tv= (TextView) findViewById(R.id.Rowtext);
StyleSpan boldSpan = new StyleSpan( Typeface.BOLD );
SpannableString ss=  new SpannableString("Your Dynamic text");
ss.setSpan( boldSpan, 0, ss.length(), Spannable.SPAN_INCLUSIVE_INCLUSIVE );
_tv.append(" ");
_tv.append(ss); 
```

用于样式化可跨字符串。[http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

生成的快照

![在此处输入图像描述](../Images/8882fac9769e189d8a8f937f93a3fbd9.png)

# wcf-data-services - wcf 数据服务 - 在保存更改时传递额外的参数

> ID：15541269
> 
> 赞同：0
> 
> 时间：2013-03-21T06:59:10.890
> 
> 标签：wcf-data-services, odata

我有一个现有的 Web 应用程序，我想用 WCF 数据服务包装它，为它提供 OData 输入/输出格式。

在检索记录时，我可以发送我喜欢的任何内容（myusername = "blabala"、mycurrentusersession = "23434sdfgdf" 等等......）。但是在“SaveChanges”中，我不控制发送的内容 - 不过，我确实需要提供现有应用程序的能力： - 我当前的用户会话 - 特定的检索状态键（我现有的应用程序是有状态的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:05:10.780

您可以在传出请求的标头中添加这些值。

假设，您`Add Service Reference`在您的客户端应用程序中执行了“”，您的`WCF-DataService`.

然后在`Reference.cs`服务内部（在客户端），搜索`OnContextCreated`事件：

然后，将处理程序添加到`SendingRequest`事件

```
partial void OnContextCreated() 
{ 
   this.SendingRequest += Entity_SendingRequest; 
} 
```

在里面`Entity_SendingRequest`你可以添加标题。

```
void Entity_SendingRequest(object sender, SendingRequestEventArgs e) 
{ 
   e.RequestHeaders.Add("myusername", "blabala");
   e.RequestHeaders.Add("mycurrentusersession", "23434sdfgdf");
} 
```

你可以很容易地在服务器端处理它，即在 WCF-DataService 的 DataContext 中。

你也可以通过一个`CookieContainer`. 这是 WCF 数据服务的表单身份验证的基础。

```
void Entity_SendingRequest(object sender, SendingRequestEventArgs e) 
{ 
   CookieContainer cookieContainer = new CookieContainer();
   foreach (var cc in _cookies)
   {
       Cookie cookie = new Cookie(cc.Key, cc.Value.Value);
       cookieContainer.Add(new Uri("http://localhost", UriKind.Absolute), cookie);
   }
   var cookieHeader = cookieContainer.GetCookieHeader(new Uri("http://localhost", 
                                                            UriKind.Absolute));
    e.RequestHeaders["Cookie"] = cookieHeader;
} 
```

# qt - 如何显示图标在每一行中使用 QSqlRelationalTableModel 和 QTableView

> ID：15541270
> 
> 赞同：0
> 
> 时间：2013-03-21T06:59:13.060
> 
> 标签：qt, qtableview

现在，我尝试使用 QSqlRelationalTableModel 和 QTableView 在数据库中显示我的数据，根据属性“fileType”如“doc,txt,exe,sln”在第一列显示图标。

```
 dirModel=new QSqlRelationalTableModel(this);
    dirModel->setTable("ecm_doc");
    dirModel->setFilter(QString("creatoruserid='%1' and parentid='%2'").arg(userid).arg(parentid));
    dirModel->select();
    dirView=new QTableView(this);
    dirView->setItemDelegate(new DirDelegate(this));

    dirView->setModel(dirModel);
    dirView->setSelectionMode(QAbstractItemView::SingleSelection);

     showIcon();

void DirTree::showIcon()
{
    int rowCount = dirModel->rowCount();
    for(int row = 0; row < rowCount; row++)
    {
//here is a test.
        QModelIndex index = dirModel->index(row, 1);
        QIcon folderIcon(style()->standardPixmap(QStyle::SP_DirClosedIcon));
        dirModel->setData(index, folderIcon, Qt::DecorationRole);
    }
} 
```

帮帮我，在线等待:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:44:53.227

您应该继承`QSqlRelationalTableModel`并重新实现该[`data()`](http://qt-project.org/doc/qt-4.8/qsqlrelationaltablemodel.html#data)函数以指定图标：

```
QVariant MyModel::data(const QModelIndex &index, int role) const
{
    // I assume that 1 is the db table column with the filetype property 
    if (index.column() == 1 && role == Qt::DecorationRole)
    {
       QSqlRecord r = modelRecord(index.row());
       QString fileType = r.field(1).value().toString();

       QIcon icon; 
       if (fileType == "exe")
          icon = QIcon(":/PathToIcon/exe.png");
       else if (fileType == "sln")
          icon = QIcon(":/PathToIcon/sln.png"); 
       ...
       return QVariant(icon);
    }

    return QSqlRelationalTableModel::data(index, role);
} 
```

# .htaccess - 松开 .htaccess 文件的 RewriteRule(s) 以访问不带斜杠的 URL

> ID：15541272
> 
> 赞同：0
> 
> 时间：2013-03-21T06:59:24.587
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的文件总是需要带有**斜杠**`.htaccess`的URL，例如：

 **```
http://localhost/menjaraz/webroot/about/
http://localhost/menjaraz/webroot/2013/03/21/you-are-my-heart-you-are-my-soul/ 
```

工作，否则会触发 404 错误。

我希望放宽规则，以便没有**结尾斜杠**的URL**也**可以。

摘抄

```
RewriteBase /menjaraz/webroot
RewriteRule ^([^/]*)/$ index.php?page=$1
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)/$ index.php?a=$1&b=$2&c=$3&page=$4 
```

我该怎么做？我对正则表达式和 mod_rewrite 都不太满意。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:51:14.123

您需要使用以下命令将最后一个斜杠设为可选`?`：

```
RewriteBase /menjaraz/webroot
RewriteCond %{REQUEST_URI} !index.php
RewriteRule ^([^/]*)/?$ index.php?page=$1
RewriteCond %{REQUEST_URI} !index.php
RewriteRule ^([^/]*)/([^/]*)/([^/]*)/([^/]*)/?$ index.php?a=$1&b=$2&c=$3&page=$4 
```

使`?`前面的字符或组是可选的。因为没有尾部斜杠，所以您需要添加一个条件以确保`index.php`不会被重写。**

# java - 是否可以确保对 SOAP 绑定的无效 xml 符号进行有效的 JAX-WS 客户端编组？

> ID：15541275
> 
> 赞同：0
> 
> 时间：2013-03-21T06:59:36.507
> 
> 标签：java, web-services, soap, jaxb, jax-ws

我有 java (1.6) 客户端，基于 JAX-WS、JAXB、SOAP 绑定构建，调用 wcf (3.5) 服务 (basicHttpBinding)。

当我尝试使用肥皂无效字符（例如，![在此处输入图像描述](../Images/ae9535ffe13431af548967b02ffa7cbf.png) （退格，...））调用服务器时 - 我在两个方向上都失败了：

当我发送此类文本时，我失败了（对于编组和解组），但有异常

> javax.xml.ws.soap.SOAPFaultException：格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://company.com/XXXParams](http://company.com/XXXParams)时出错。
> InnerException 消息是“**反序列化 XXX.MyParams 类型的对象时出错。
> 字节 0x08 在此位置无效。**第 1 行，位置 1177.'。

有关更多详细信息，请参阅 InnerException。

> 在 com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178) ~[?:1.6.0_24] 在
> com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder. java:119) ~[?:1.6.0_24] 在
> com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108) ~[?:1.6.0_24] 在
> com.sun。 xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78) ~[?:1.6.0_24] at
> com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java :107) ~[?:1.6.0_24]

# iphone - 触摸事件 (touchesMoved) 在 UIScrollView 内的 UIViews 上不起作用

> ID：15541276
> 
> 赞同：2
> 
> 时间：2013-03-21T06:59:37.717
> 
> 标签：iphone, ios, uiviewcontroller, uiscrollview, uitouch

我有一个`UIView`内部 a `UIScrollView`，并且`UIViewControllers`这些视图没有接收到触摸事件。如果我将视图从滚动视图中取出，那么它就可以工作。

UserInteraction 是所有视图的默认开启，但它仍然无法正常工作！

这一定是可能的，如果有人能指出我正确的方向，我将不胜感激！

非常感谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:09:33.833

您可以使用以下方法

```
 UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
 [panRecognizer setMinimumNumberOfTouches:1];
 [panRecognizer setMaximumNumberOfTouches:1];
 [panRecognizer setDelegate:self];
 [yourView addGestureRecognizer:panRecognizer]; 
```

并处理它

```
 -(void)move:(id)sender {

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateChanged){
         // This will return you location in view
         CGPoint currentPoint =  [sender locationInView:self.view];

         // This will return you location in Scrollview
         CGPoint scrollPoint =  [sender locationInView:[[sender view] superview]];

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:03:45.677

将以下代码添加到实现文件然后触摸移动

```
 @interface UIScrollView(Custom)
    @end
    @implementation UIScrollView(Custom)

   -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
}
    @end 
```

# javascript - 在也包含 html 的数据表中按百分比对列进行排序

> ID：15541289
> 
> 赞同：2
> 
> 时间：2013-03-21T07:00:24.143
> 
> 标签：javascript, jquery, sorting, datatables

我有一张包含大量百分比的表格。我使用[DataTables对我的大部分表格进行排序，如果您在](http://www.datatables.net/)[此处](http://fantasymls.net/theme/index.php)检查最右边的列，则基于文本的百分比确实可以正确排序。

问题是......我想删除它并将其替换为左侧的 CSS 条（最右边的第二列）。我根本无法使用 DataTables 对这些 CSS 条进行排序。

这是我在每个`<td>`...中使用的代码

```
<div id="positive">
    <div class="anim" style="width:27%;">
        <div class="text">27.05%</div>
    </div>
</div> 
```

我使用[HERE](http://datatables.net/plug-ins/sorting)的百分比部分中的代码来获取要在最右侧列排序的百分比。

知道如何让 DataTables 忽略上面代码中的所有 HTML 标签并仅按百分比排序吗？

感谢您提供的任何帮助，如果您需要更多信息，请告诉我。

**EDIT1：**这是用于对文本百分比进行排序的代码

```
 jQuery.extend( jQuery.fn.dataTableExt.oSort, 
        {
        "percent-pre": function ( a ) 
            {
            var x = (a == "-") ? 0 : a.replace( /%/, "" );
            return parseFloat( x );
            },

        "percent-asc": function ( a, b ) 
            {
            return ((a < b) ? -1 : ((a > b) ? 1 : 0));
            },

        "percent-desc": function ( a, b ) 
            {
            return ((a < b) ? 1 : ((a > b) ? -1 : 0));
            }
        } ); 
```

以下是我在该页面上用于数据表的选项（如果需要，我可以更改内容）。

**编辑2：**

```
 $(document).ready(function() 
        {
        $('#gradient-style').dataTable( 
            {
            "bPaginate": true,
            "aaSorting": [[ 7, "desc" ]],
            "bJQueryUI": true,
            "aLengthMenu": [[50, 100, 200, -1], [50, 100, 200, "All"]],
            "iDisplayLength": 50,
            "sPaginationType": "full_numbers",
            "sDom": '<"H"lf>rt<"F"ip>',
            "aoColumnDefs": [ { "bVisible": false, "aTargets": [ 0, 6 ] } ],

            "aoColumns": [
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            null,
            { "sType": "percent" },
            { "sType": "percent" } ]
            } );
        } ); 
```

**EDIT3：解决了**

这就是我所做的...转到[此页面](http://datatables.net/plug-ins/sorting)。`Numbers with HTML`与合并 `Percentage`。这是我在 edit1 代码中更改的代码。

```
 /* This cuts out the HTML */
            var x = String(a).replace( /<[\s\S]*?>/g, "" );
            return parseFloat( x );
            /* This takes what's left, removes the % sign and sorts by that */
            var y = (x == "-") ? 0 : x.replace( /%/, "" );
            return parseFloat( y ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:15:32.580

### 2014 年更新：

从[文档](http://datatables.net/plug-ins/sorting/num-html)：

> DataTables 1.10+ 内置了 HTML 数字数据类型检测和排序功能。因此，此插件被标记为已弃用，但在使用旧版本的 DataTables 时可能很有用。

### 已弃用的答案：

我检查了您发布的[网址](http://datatables.net/plug-ins/sorting)，发现了一些新内容：带 HTML 的数字，您是否尝试过。根据文档，它将剥离 html 标签并仅使用数字进行排序。

```
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    "num-html-pre": function ( a ) {
        var x = String(a).replace( /<[\s\S]*?>/g, "" );
        return parseFloat( x );
    },

    "num-html-asc": function ( a, b ) {
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    },

    "num-html-desc": function ( a, b ) {
        return ((a < b) ? 1 : ((a > b) ? -1 : 0));
    }
} ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T07:50:54.247

这个问题还有一个非编程的解决方案。

在金融和许多其他工作领域中，通常将单位（%、$、€）放在表格的标题行中。在每一行上重复该符号是没有用的，并且可能会使您的页面的可读性略低于没有。

只需考虑此选项，您的排序问题就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T12:45:12.773

```
 $.fn.dataTableExt.afnSortData['num-sort'] = function(oSettings, iColumn) {
        var aData = [];
        $('td:eq(' + iColumn + ')', oSettings.oApi._fnGetTrNodes(oSettings)).each(function() { aData.push($(this).text().replace(/[^0-9\.]/g, '')); });

        console.log(aData);
        return aData;
    } 
```

# linux-kernel - 初始化驱动程序时 module_init 和 subsys_initcall 有什么区别？

> ID：15541290
> 
> 赞同：18
> 
> 时间：2013-03-21T07:00:26.257
> 
> 标签：linux-kernel, linux-device-driver

`module_init`初始化驱动程序和初始化驱动程序有什么区别`subsys_initcall`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-21T08:43:35.103

差异与时间有关，或者更准确地说，与执行顺序有关。也就是说，声明为的过程`subsys_initcall`保证在声明为的过程之前执行`module_init`。这种排序确保子系统和平台驱动程序在设备驱动程序尝试利用前者的功能之前被初始化（例如，设备驱动程序注册为子系统设备）。

每个宏的实际定义取决于内核是否配置为（可加载）模块。这些宏（和其他 init 宏）的定义可以在[include/linux/init.h中找到](http://lxr.free-electrons.com/source/include/linux/init.h?v=3.7)

请注意，`subsys_initcall()`只能由内置（静态链接）模块使用。
`module_init`可以由内置或可加载模块使用。

# xml - XML (LibXML)：用具有相同内容的 xhtml:h2 标记替换 xhtml:h1 标记的最简单方法

> ID：15541294
> 
> 赞同：0
> 
> 时间：2013-03-21T07:00:42.433
> 
> 标签：xml, perl, libxml2

我正在使用 Perl/CPAN [XML::LibXML](http://metacpan.org/release/XML-LibXML)来解析和操作一个有效的 XHTML 1.1 文档，该文档包含多个嵌套的 <div> 标签和 <h1> 、 <h2> 等。

现在，我正在从那里提取 div，它们的标题从 <xhtml:h2 /> 开始，我想将其转换为从 <xhtml:h1 /> 开始（即：h2 → h1 ; h3 → h2 ; h4 → h3 等.)。

如何使用 XML::LibXML 做到这一点？

这是我到目前为止所拥有的：

```
 foreach my $h_idx (2 .. 6)
    {
        foreach my $h_tag ($scene_xpc->findnodes(qq{//xhtml:h$h_idx}))
        {
            my $replacement = $h_tag->cloneNode(1);
            # TODO : how do I set the name?
            $replacement->set
            $h_tag->replaceNode($replacement);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:16:29.990

正如您似乎从变量名中猜到的那样`$scene_xpc`，您需要定义一个定义`XML::LibXML::XPathContext`了`xhtml`命名空间的变量。此后，您可以像使用普通`XML::LibXML`对象一样使用该上下文，只是您现在可以在元素和属性名称中指定注册的命名空间。

我不清楚你为什么要克隆每个节点。据我所知，您需要做的就是`setNodeName`在每个节点上。所需要的只是本地名称：元素将保留其原始名称空间。

这个简短的节目展示了这个想法。

```
use strict;
use warnings;
use 5.014;    # For non-destructive substitution

use XML::LibXML;

my $filename = 'xhtml.html';

my $xml = XML::LibXML->new;
my $doc = $xml->parse_file($filename);

my $xpc = XML::LibXML::XPathContext->new($doc);
$xpc->registerNs('xhtml', 'http://www.w3.org/1999/xhtml');

for my $head ('h2' .. 'h6') {
  my $newhead = $head =~ s/(\d)/$1-1/er;
  for my $node ($xpc->findnodes("//xhtml:$head")) {
    $node->setNodeName($newhead);
  }
}

print $doc->toString; 
```

# java - 如何在 android 的 datepicker 中更改日期选择器的视图并像日历一样显示？

> ID：15541297
> 
> 赞同：1
> 
> 时间：2013-03-21T07:00:48.770
> 
> 标签：java, android, android-ui, android-datepicker, android-date

**

## 在 Android 中开发日常开支应用程序

** 我见过很多安卓应用程序，用户可以从日期选择器中选择日期。

在我的应用程序中，我在活动中使用了日期字段。

所以我想设计我自己的日期选择器，比如日历视图。

我想显示日期选择器...

1）第一个图像 [日期选择器](https://a248.e.akamai.net/camo.github.com/2a4a413d3f7df61adffdb5c098dada8efcffd92f/687474703a2f2f796573796f2e6769746875622e636f6d2f696d616765732f616e64726f69645f646174657069636b65722e706e67)

2）第二个图像 [日期选择器](http://3.bp.blogspot.com/_O-vNZWmCFxA/TNw8rT3GeII/AAAAAAAAAAs/wPC6Y0LCeKk/s1600/full-2_3-2.png)

我正在开发像日常开支这样的应用程序......所以如果有人知道如何在 android.plz 回复中开发时尚的日期选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:07:46.480

看看这个例子

[http://w2davids.wordpress.com/android-simple-calendar/](http://w2davids.wordpress.com/android-simple-calendar/)

如果你改变布局背景，你会得到你想要的

您复制以下代码并在按钮 onclick 调用中

```
 Intent i=new Intent(MainActivity.this,SimpleCalendarViewActivity.class);
                startActivity(i); 
```

并在 SimpleCalendarViewActivity 的 android Manifest File 中添加此主题。它会将其显示为对话框。看看这个

```
 android:theme="@android:style/Theme.Dialog" 
```

# highcharts - Highcharts 格式

> ID：15541299
> 
> 赞同：0
> 
> 时间：2013-03-21T07:00:57.473
> 
> 标签：highcharts

我正在尝试制定 Highcharts 的格式。

在其中一个演示中，有以下调用：

```
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=range.json&callback=?', function(data) {code to build the chart 
```

调用时，返回类似如下的数据：

```
callback([ 
```

/* 2009-01-01 */ [1230771600000, -5.8, 0.1], [1230858000000, -4.1, 1.4], [1230944400000, -0.5, 4.1], [1231030800000, -8.9, -0.7], [1231107] 9.7, -3.7], [1231203600000, -3.4, 3.2], [1231290000000, -3.9, -0.2], [1231376400000, -2.4, 6.7], [1231462800000, 3.8, 6.9], [123154,9208], [123154,9208]3\. );

我遇到的问题是我想通过我自己的 AJAX 调用传递数据，该调用的结果将包含图形数据以及其他一些东西。但是，我似乎无法获得正确的格式，因此 HC 可以读取它。我阅读了他们关于格式的页面，但没有运气。

我认为问题在于“回调（[]）；” 需要删除容器，但是当我这样做时，数据不会显示在图表中。

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:56:07.007

好的，我想通了。

当 jQuery 加载所有数据时，它会将其转换为字符串。在 Highcharts 使用之前，需要使用`$.parseJSON(data)`.

感谢 Pawel 和 Austin 的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:36:30.880

我曾经遇到过同样的问题。您的**json 必须在将**其放入 highcharts 系列之前进行解析
高图表系列接受这种格式的数组

```
[[float,float],[float,float]] 
```

而您未解析的 json 会尝试给出

```
[[String,String],[String,String]] 
```

删除你的 'callback([]);' container ，您需要先解析各个 '[x,y]' 点，然后再将其提供给系列对象

一种方法（在 js 中）：

> 1.  字符串[] jsonComponents= jsonWithoutContainer.split(",");
>     
> 2.  迭代每个 jsonComponents 数组。
>     
> 3.  对于每个 jsonComponent - String[] xyComps=jsonComponent.split(",");
>     
> 4.  x=parseFloat(xyComp[0]); y1=parseFloat(xyComp[1]); y2= parseFloat(xyXomp[2]);
>     
> 5.  将这些放入一个数组中，使用 array1.push(x,y1) 并将其提供给 chart.series(array1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:52:49.573

此回调用于 JSONP。您可以简单地使用标准 JSON 来实现：

```
[[1230771600000, -5.8, 0.1], [1230858000000, -4.1, 1.4], [1230944400000, -0.5, 4.1] ... ] 
```

没有任何评论、功能等。如果数据看起来像这样，它应该可以工作。

# django - 无法在 Tastypie UserResource 中公开“auth_user_groups”表

> ID：15541302
> 
> 赞同：0
> 
> 时间：2013-03-21T07:01:06.227
> 
> 标签：django, tastypie, django-authentication

我一直在努力找出是否有办法在我的 UserResource Tastypie modelResource 中公开“auth_user_groups”表。

我能够获取组和用户，但不确定如何在我的 UserResource 中显示用户分配到的组。这是我拥有的模型资源：

```
class GroupResource(ModelResource):
class Meta:
    queryset = Group.objects.all()
    always_return_data = True
    resource_name = 'groups'
    detail_allowed_methods = ['get']
    list_allowed_methods = ['get']
    filtering = {
        'username': ALL,
    }
    authentication = ApiKeyAuthentication()
class UserResource(ModelResource):
class Meta:
    queryset = User.objects.all()
    always_return_data = True
    resource_name = 'user'
    excludes = ['is_active', 'is_staff', 'is_superuser']
    authorization = UserAuthorization() 
    detail_allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
    list_allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
    filtering = {
        'username': ALL,
    }
    authentication = ApiKeyAuthentication() 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:05:03.837

正如[美味的文档](http://django-tastypie.readthedocs.org/en/latest/tutorial.html)所述：

> ModelResource 子类将自省所有非关系字段

因此，您必须将*组*字段添加到您的*UserResource*：

```
class UserResource(ModelResource):
  groups = fields.ManyToManyField(GroupResource, 'groups', null=True, full=True)

  class Meta:
     [...] 
```

# android - Android 推送通知 - Google Play

> ID：15541305
> 
> 赞同：3
> 
> 时间：2013-03-21T07:01:16.397
> 
> 标签：android, google-cloud-messaging

我已经使用 GCM 将推送通知集成到我的 android 应用程序中。它工作正常。现在我要将我的应用程序上传到 Google Play。我是否需要更改推送通知设置中的任何内容才能上传到 Google Play？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T13:52:40.563

不，你不需要改变任何东西。如果它在您的测试区域工作，它也将在生产（Google Play）中工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T13:43:37.097

如果您已经实现了[Urban Airship 推送通知](http://urbanairship.com/)，那么您必须制作您的生产标志`true`并更改代码，如下所示：

```
public static final boolean URBAN_AIRSHIP_IN_PRODUCTION = true;
public static final boolean URBAN_AIRSHIP_RICH_PUSH_ENABLED = false; 
```

# windows - <此时是出乎意料的。将输入数据作为 xml 发布到休息服务时从 curl 命令行

> ID：15541310
> 
> 赞同：4
> 
> 时间：2013-03-21T07:01:22.030
> 
> 标签：windows, json, wcf, rest, curl

当我将原始字符串作为 JSON REST 服务调用的输入发布时，它正在执行前：

```
curl -d "{\"input1\": \"as\", \"input2\": \"ad\"}"  -i -X POST -H "Content-Type:application/json"  http://localhost/rtygies/Service1.svc/rest/receivedata1 
```

但是，当我将 xml 作为输入发布时，会出现如下错误：

```
curl -d "{\"input1\": \"<xml></xml>\", \"input2\": \"<xml></xml>\"}"  -i -X POST -H "Content-Type:application/json"  http://localhost/rtygies/Service1.svc/rest/receivedata1 
```

***错误：<此时出乎意料***

我在 Windows 中使用 curl。

任何人都可以说如何从 curl 以 JSON 格式将 xml 作为字符串输入发布到 Rest 服务

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-15T23:25:22.230

实际上，我不知道是什么情况，但是`< is unexpected this time` 当我尝试以下命令（在 Windows 上）时出现错误消息：

```
curl -u admin:password -XPOST -H 'Content-type: text/xml' -d '<namespace><prefix>newWorkspace</prefix><uri>http://geoserver.org</uri></namespace>' http://localhost:8080/geoserver/rest/namespaces 
```

然后我将单引号更改为双引号，它起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-08T10:20:42.717

我对双引号没有运气，但是用 ^ 转义 < 和 > 对我有用。

所以你的卷曲变成..

```
curl -d "{\"input1\": \"^<xml^>^</xml^>\", \"input2\": \"^<xml^>^</xml^>\"}"  -i -X POST -H "Content-Type:application/json"  http://localhost/rtygies/Service1.svc/rest/receivedata1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-16T15:20:59.290

重定向符号可以通过 "

尝试使用

```
curl -d "{\"input1\": \""<xml></xml>"\", \"input2\": \""<xml></xml>"\"}"  -i -X POST -H "Content-Type:application/json"  http://localhost/rtygies/Service1.svc/rest/receivedata1 
```

# iphone - 从响应 NSString 中获取子字符串

> ID：15541312
> 
> 赞同：0
> 
> 时间：2013-03-21T07:01:24.300
> 
> 标签：iphone, ios, nsstring

我需要从字符串中获取子字符串`CODE`的值（`X2.31`）

```
NSString *str = @"SHMU=\"\" CODE=\"X2.31\" XTN=\"; 
```

我怎么能得到那个特定的子字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:31:12.337

试试下面的

```
 NSString *str = @"SHMU=\"\" CODE=\"X2.31\" XTN=\"";

 NSRange range = [str rangeOfString:@"CODE="];
 NSString *substring = [[str substringFromIndex:NSMaxRange(range)] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
 NSArray *str1 = [substring componentsSeparatedByString:@" "];
 NSLog(@"the sub %@",[[str1 objectAtIndex:0] stringByTrimmingCharactersInSet[NSCharacterSet whitespaceCharacterSet]]); 
```

通过字符串是“X2.31”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:28:51.663

```
NSString *strOrg = [NSString stringWithFormat:@"%@",@"SHMU=\"\" CODE=\"X2.31\" XTN=\""] ;

NSString *strLeft = [NSString stringWithFormat:@"%@",@"SHMU=\"\" CODE=\""] ;
NSString *strRight = [NSString stringWithFormat:@"%@",@"\" XTN=\""] ;

NSLog(@"%@", [self getDataBetweenString:strOrg LeftString:strLeft RightString:strRight LeftOffset:13]);

- (NSString *)getDataBetweenString:(NSString *)orgString LeftString:(NSString *)leftString RightString:(NSString *)rightString LeftOffset:(NSInteger)leftPos;
{
    NSInteger left, right;
    NSString *foundData;
    NSScanner *scanner=[NSScanner scannerWithString:orgString];
    [scanner scanUpToString:leftString intoString: nil];
    left = [scanner scanLocation];
    [scanner setScanLocation:left + leftPos];
    [scanner scanUpToString:rightString intoString: nil];
    right = [scanner scanLocation] + 1;
    left += leftPos;
    foundData = [orgString substringWithRange: NSMakeRange(left, (right - left) - 1)];         return foundData;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:30:19.883

这仅**特定**于您发布的**str 。**您的号码后面必须跟第一个 X。

```
float f=[[str componentsSeparatedByString:@"X"][1] floatValue]; 
```

# android - 如何从 sdcard 到自定义 ondraw 方法绘制位图

> ID：15541315
> 
> 赞同：0
> 
> 时间：2013-03-21T07:01:32.000
> 
> 标签：android, image, canvas, sd-card

我在 sdcard 上有一个图像，谁能告诉我如何将图像从 sdcard 绘制到自定义的 ondraw 方法上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:18:45.170

我得到的答案实际上是从 sdcard 中绘制图像，我们必须在下面的函数中再次初始化图像

```
 public void surfaceCreated(SurfaceHolder holder)
       {

            ball=BitmapFactory.createScaledBitmap(src,width,height,true);
            bgr=BitmapFactory.decodeFile("/sdcard/1364275090569.jpg");
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:38:34.910

实际上这是我的代码，在此我可以通过放置在资源文件夹中的图像在背景上绘制和自定义移动图像，但是当我从 sdcard 加载图像然后实现它时，应用程序会出错

```
public class Preview extends Activity{

 BallBounces ball;
 public static int wd;
 public static int ht;
public static  String txt;
public static String path;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    Intent i=getIntent();

    ball = new BallBounces(this);
    setContentView(ball);

     txt=i.getStringExtra("bpath");
     path=i.getStringExtra("path");

    wd= getWindowManager().getDefaultDisplay().getWidth();
    ht=getWindowManager().getDefaultDisplay().getHeight();

} 
```

} 类 BallBounces 扩展 SurfaceView 实现 SurfaceHolder.Callback {

```
private int mActivePointerId = INVALID_POINTER_ID;
private static final int INVALID_POINTER_ID = -1;
private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;
public float mPosX=0;
public float mPosY=0;
public float mLastTouchX;
public float mLastTouchY;

//For Fetching image
private Bitmap bmp;
private Drawable image;
private byte[] byteArray;
private ByteArrayBuffer baf = null;
int wid =Preview.wd, hght = Preview.ht;
//For Rotation
int direction = 0;
int degree = 0;
String twxt=Preview.txt;
String pth=Preview.path;
float wdth,hgt;
private float newX ;
public float newY ;
private float rotateX;
private float rotateY;
private float imgX;
private float imgY;
 GameThread thread;
public int screenW; //Device's screen width.
public int screenH; //Devices's screen height.
public int ballX; //Ball x position.
public  int ballY; //Ball y position.
int initialY ;
float dY; //Ball vertical speed.
int ballW;
int ballH;
int bgrW;
int bgrH;
int angle;
int bgrScroll;
int dBgrY; //Background scroll speed.
float acc;
Bitmap ball, bgr, bgrReverse;
boolean reverseBackroundFirst;
boolean ballFingerMove;
Bitmap d;
//Measure frames per second.
long now;
int framesCount=0;
int framesCountAvg=0;
long framesTimer=0;
Paint fpsPaint=new Paint();

//Frame speed
long timeNow;
long timePrev = 0;
long timePrevFrame = 0;
long timeDelta;

public BallBounces(Context context) {
    super(context);

    ball = BitmapFactory.decodeResource(getResources(), R.drawable.bubble);//load image
   bgr = BitmapFactory.decodeResource(getResources(), R.drawable.grd); //Load a background.

    bgrW = bgr.getWidth();
    bgrH = bgr.getHeight();

    ballW = ball.getWidth();
    ballH = ball.getHeight();

    image =new BitmapDrawable(context.getResources() , ball);

    imgX=image.getIntrinsicWidth();
    imgY=image.getIntrinsicHeight();

    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener()); 
    //Set thread
    getHolder().addCallback(this);

    setFocusable(true);
}

@Override
public void onSizeChanged (int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    //This event-method provides the real dimensions of this custom view.
    screenW = w;
    screenH = h;
    System.out.println(w+"  X  "+h);
   bgr = Bitmap.createScaledBitmap(bgr, w, h, true); //Scale background to fit the screen.
    bgrW = bgr.getWidth();
   bgrH = bgr.getHeight();

}

//***************************************
//*************  TOUCH  *****************
//***************************************
@Override
public synchronized boolean onTouchEvent(MotionEvent ev) {

     mScaleDetector.onTouchEvent(ev);

        final int action = ev.getActionMasked();

        if (action == MotionEvent.ACTION_DOWN) {

            System.out.println("DOWN");
            final float x = ev.getX();
            final float y = ev.getY();

            mLastTouchX = x;
            mLastTouchY = y;

            System.out.println("DOWN-POSITION--"+x+"  X  "+y);
            mActivePointerId = ev.getPointerId(0); 
        }

        if (action == MotionEvent.ACTION_MOVE) {

            System.out.println("MOVE");
            final int pointerIndex = ev.findPointerIndex(mActivePointerId);
            final float x = ev.getX(pointerIndex);
            final float y = ev.getY(pointerIndex);

            System.out.println("Moving points" +x+" X "+y);

            if (!mScaleDetector.isInProgress()) {
                final float dx = x - mLastTouchX;

                final float dy=y-mLastTouchY;

                mPosX += dx;
                mPosY += dy;
                newX=ev.getRawX();
                newY=ev.getRawY();

                System.out.println("Image Config" +newX+"  X  "+newY);
                invalidate();
            }

            mLastTouchX = x;
            mLastTouchY = y;

        }

        if (action == MotionEvent.ACTION_UP) {
            System.out.println("UP");
            mActivePointerId = INVALID_POINTER_ID;

        }

        if (action == MotionEvent.ACTION_CANCEL) {
            System.out.println("CANCEL");
            mActivePointerId = INVALID_POINTER_ID;
        }

        if (action == MotionEvent.ACTION_POINTER_UP) {
            System.out.println("ACTN_POINTER_UP");
            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
            >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;

        }

        return true;
}

public BitmapDrawable writeOnDrawable(int drawableId, String text){

    Rect bounds = new Rect();
    Paint textPaint = new Paint();
    textPaint.getTextBounds(twxt,0,twxt.length(),bounds);
    float height = bounds.height();
    float width = bounds.width();
    wdth=width/2;
    hgt=height/2;

    Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);

    Paint paint = new Paint(); 
    paint.setStyle(Style.FILL_AND_STROKE);  
    paint.setColor(Color.WHITE);

    paint.setTextSize(15); 
    Canvas canvas = new Canvas(bm);
    int xPos =(int) ((bm.getWidth()/2)-wdth);

    int yPos = (int) ((bm.getHeight()/2)-hgt) ;

    canvas.drawText(text, xPos-(wdth/8),yPos+hgt, paint);
    return new BitmapDrawable(bm);
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    Rect fromRect1 = new Rect(0, 0, bgrW - bgrScroll, bgrH);
    Rect toRect1 = new Rect(bgrScroll, 0, bgrW, bgrH);

    Rect fromRect2 = new Rect(bgrW - bgrScroll, 0, bgrW, bgrH);
    Rect toRect2 = new Rect(0, 0, bgrScroll, bgrH);

    if (!reverseBackroundFirst) {
        canvas.drawBitmap(bgr, fromRect1, toRect1, null);

    }
    else{
        canvas.drawBitmap(bgr, fromRect2, toRect2, null);

    }

   if(mPosX<0)
    {
        mPosX=0;
    }
    if(mPosX>screenW-ballW)
    {
        mPosX=screenW-ballW;
    }
    if(mPosY>screenH-ballH)
    {
        mPosY=screenH-ballH;
    }

    if(mPosY<0)
    {
        mPosY=0;
    }

    canvas.drawBitmap(ball, mPosX, mPosY, null); 
     canvas.drawText(mPosX+ "  X  "+mPosY, 40, 70, fpsPaint);
     canvas.drawText(ballW+ "  X  "+ballH, 40, 100, fpsPaint); 

     canvas.drawText(screenW+ "  X  "+screenH, 40, 150, fpsPaint);
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
}

public void surfaceCreated(SurfaceHolder holder) {
    thread = new GameThread(getHolder(), this);
    thread.setRunning(true);
    thread.start();
}
public void surfaceDestroyed(SurfaceHolder holder) {
    boolean retry = true;
    thread.setRunning(false);
    while (retry) {
        try {
            thread.join();
            retry = false;
        } catch (InterruptedException e) {

        }
    }
}

class GameThread extends Thread {
    private SurfaceHolder surfaceHolder;
    private BallBounces gameView;
    private boolean run = false;

    public GameThread(SurfaceHolder surfaceHolder, BallBounces gameView) {
        this.surfaceHolder = surfaceHolder;
        this.gameView = gameView;
    }

    public void setRunning(boolean run) {
        this.run = run;
    }

    public SurfaceHolder getSurfaceHolder() {
        return surfaceHolder;
    }

    @Override
    public void run() {
        Canvas c;
        while (run) {
            c = null;

            //limit frame rate to max 60fps
            timeNow = System.currentTimeMillis();
            timeDelta = timeNow - timePrevFrame;
            if ( timeDelta < 16) {
                try {
                    Thread.sleep(16 - timeDelta);
                }
                catch(InterruptedException e) {

                }
            }
            timePrevFrame = System.currentTimeMillis();

            try {
                c = surfaceHolder.lockCanvas(null);
                synchronized (surfaceHolder) {
                   //call methods to draw and process next fame
                    gameView.onDraw(c);
                }
            } finally {
                if (c != null) {
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 5.0f));

        invalidate();
        return true;
    }
} 
```

}

# webforms - ASP.NET WebForms FriendlyUrlSegments 不包含采用 0 个参数的构造函数

> ID：15541317
> 
> 赞同：1
> 
> 时间：2013-03-21T07:01:40.273
> 
> 标签：webforms, friendly-url, asp.net-4.5

我正在用 ASP.NET 4.5 WebForms 中的 FriendlyUrls 做一个简单的测试，Foo.aspx 变成 /Foo/ （它有效）。当我尝试使用 FriendlyUrlSegments 属性将 id 从 URL 获取到控件中时，我收到此错误：

```
'Microsoft.AspNet.FriendlyUrls.ModelBinding.FriendlyUrlSegmentsAttribute' does not contain a constructor that takes 0 arguments 
```

具有 [FriendlyUrlSegments] 错误的方法：

```
public Person GetPerson([FriendlyUrlSegments]int? id)
{
    return People.Find(p => p.Id == id);
} 
```

我试图从 NuGet 更新 FriendlyUrls。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:27:16.813

像这样写你的方法：

```
public Person GetPerson([FriendlyUrlSegments(0)] int? id)
{
    return People.Find(p => p.Id == id);
} 
```

该`[FriendlyUrlSegments]`属性在 URL 中的页面之后使用零索引的分段映射。例如，如果您请求 /Hello/foo/bar/... 而您的页面是 Hello.aspx，那么`[FriendlyUrlSegments(0)]`将映射到“foo”，`[FriendlyUrlSegments(1)]`将映射到“bar”，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:45:18.723

我认为您所做的方式是模型绑定，而不是从 url 获取信息。我读了这篇[文章](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

斯科特汉塞尔曼和我试试。我和你有同样的问题。我想`[FriendlyUrlSegments]int? id`

用于模型绑定。而不是我这样做：

```
var id=Request.GetFriendlyUrlSegments()[0];
yourmethod(id); 
```

如果我错了，请随时纠正我！希望这有帮助。

# php - TRIGGER CREATED 成功创建，但 information_schema TRIGGERS 表中没有触发器

> ID：15541318
> 
> 赞同：3
> 
> 时间：2013-03-21T07:01:40.247
> 
> 标签：php, mysql, sql, triggers, phpmyadmin

您好我正在尝试使用触发器，我的 MySQL 版本是 5.5.8

问题是当我创建触发器时，PHPMyadmin 说它已成功创建，

**这是我的触发器**

```
DELIMITER $$
CREATE TRIGGER `check_pupil_before_insert` BEFORE INSERT ON `pupil_data`
FOR EACH ROW  BEGIN
  IF  CHAR_LENGTH( NEW.DateOfBirth ) < 4 THEN
       SIGNAL SQLSTATE '12345'
        SET MESSAGE_TEXT := 'check constraint on pupil_data.DateOfBirth  failed';
    END IF;
END$$  
DELIMITER ; 
```

它说

```
Your SQL query has been executed successfully
DELIMITER $$ CREATE TRIGGER `check_pupil_before_insert` BEFORE INSERT ON  `pupil_data` 
FOR EACH
ROW BEGIN 
IF CHAR_LENGTH( NEW.DateOfBirth ) <4
THEN SIGNAL SQLSTATE '12345'
SET MESSAGE_TEXT :=  'check constraint on pupil_data.DateOfBirth  failed';

END IF ; 
```

但是当我

```
select * from information_schema.triggers

MySQL returned an empty result set (i.e. zero rows). ( Query took 0.0843 sec )
SELECT * 
FROM information_schema.triggers
LIMIT 0 , 30 
```

为什么会发生这种情况，请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:15:15.697

![图片](../Images/71823322f9463030da665e04b012e2b7.png)

检查这个..它将帮助你......并确保查询与图像更改“：=”到“=”中显示的相同

# bash - 从子 shell 设置父 shell 的变量

> ID：15541321
> 
> 赞同：64
> 
> 时间：2013-03-21T07:01:53.667
> 
> 标签：bash, shell, subshell

如何从子 shell 中在父 shell 中设置变量？

```
a=3
(a=4)
echo $a 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-21T09:28:16.750

子shell 的全部意义在于它*不会*影响调用会话。在 bash 中，子 shell 是一个子进程，其他 shell 有所不同，但即便如此，子 shell 中的变量设置也不会影响调用者。根据定义。

你需要一个子shell吗？如果您只需要一个组，请使用大括号：

```
a=3
{ a=4;}
echo $a 
```

给出`4`（注意那个空格）。或者，将变量值写入标准输出并在调用者中捕获它：

```
a=3
a=$(a=4;echo $a)
echo $a 
```

避免使用反引号``，它们已被弃用并且可能难以阅读。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-21T11:43:44.227

有 gdb-bash-variable hack：

```
gdb --batch-silent -ex "attach $$" -ex 'set bind_variable("a", "4", 0)'; 
```

虽然这总是在全局范围内设置一个变量，而不仅仅是父范围

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-21T07:06:01.430

你没有。子shell 无权访问其父环境。（至少在 Bash 提供的抽象范围内。您可能会尝试使用`gdb`，或粉碎堆栈或诸如此类的东西，以秘密获得此类访问权限。不过，我不建议这样做。）

一种替代方法是子外壳将赋值语句写入临时文件以供其父级读取：

```
a=3
(echo 'a=4' > tmp)
. tmp
rm tmp
echo "$a" 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-10-10T13:31:24.620

如果问题与 while 循环有关，解决此问题的一种方法是使用 Process Substitution：

```
 var=0
    while read i;
    do
      # perform computations on $i
      ((var++))
    done < <(find . -type f -name "*.bin" -maxdepth 1) 
```

如此处所示：[https ://stackoverflow.com/a/13727116/2547445](https://stackoverflow.com/a/13727116/2547445)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-12-01T08:48:03.357

要更改从父脚本调用的脚本中的变量，您可以调用以“.”开头的脚本。

```
a=3
echo $a    
. ./calledScript.sh
echo $a 
```

在称为Script.sh

```
a=4 
```

预期产出

```
3
4 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-21T07:36:03.700

您可以在子shell中输出值并将子shell输出分配给调用者脚本中的变量：

```
# subshell.sh
echo Value

# caller
myvar=$(subshell.sh) 
```

如果 subshel​​l 有更多输出，您可以通过将变量值和其他消息重定向到不同的输出流来分离它们：

```
# subshell.sh
echo "Writing value" 1>&2
echo Value

# caller
myvar=$(subshell.sh 2>/dev/null) # or to somewhere else
echo $myvar 
```

或者，您可以在子 shell 中输出变量分配，在调用者脚本中评估它们并避免使用文件来交换信息：

```
# subshell.sh
echo "a=4"

# caller
# export $(subshell.sh) would be more secure, since export accepts name=value only.
eval $(subshell.sh)
echo $a 
```

我能想到的最后一种方法是使用退出代码，但这仅涵盖整数值交换（并且在有限范围内）并打破了解释退出代码的约定（0 表示成功，其他所有内容都为 0）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-11T00:27:07.737

除非您可以将所有 io 应用到管道并使用文件句柄，否则在 $(command) 和任何其他子进程中基本的变量更新是不可能的。

然而，常规文件是 bash 用于常规顺序处理的全局变量。注意：由于竞争条件，这种简单的方法不适合并行处理。

像这样创建一个 set/get/default 函数：

```
globalVariable() { # NEW-VALUE
    # set/get/default globalVariable
    if [ 0 = "$#" ]; then
        # new value not given -- echo the value
        [ -e "$aRam/globalVariable" ] \
            && cat "$aRam/globalVariable" \
            || printf "default-value-here"
    else
        # new value given -- set the value
        printf "%s" "$1" > "$aRam/globalVariable"
    fi
} 
```

"$aRam" 是存储值的目录。我喜欢它是速度和波动性的 ram 磁盘：

```
aRam="$(mktemp -td $(basename "$0").XXX)" # temporary directory
mount -t tmpfs ramdisk "$aRam" # mount the ram disk there
trap "umount "$aRam" && rm -rf "$aRam"" EXIT # auto-eject 
```

要读取值：

```
v="$(globalVariable)" # or part of any command 
```

要设置值：

```
globalVariable newValue # newValue will be written to file 
```

要取消设置值：

```
rm -f "$aRam/globalVariable" 
```

访问函数的唯一真正原因是应用默认值，因为 cat 会在文件不存在的情况下出错。应用其他获取/设置逻辑也很有用。否则，根本不需要它。

避免 cat 不存在的文件错误的丑陋读取方法：

```
v="$(cat "$aRam/globalVariable 2>/dev/null")" 
```

这种混乱的一个很酷的功能是您可以在程序运行时打开另一个终端并检查文件的内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-28T15:54:51.487

不要从父 shell 访问变量，而是更改命令的顺序并使用[进程替换](https://tldp.org/LDP/abs/html/process-sub.html)：

```
a=3
echo 5 | (read a)
echo $a 
```

打印 3

```
a=3
read a < <(echo 5)
echo $a 
```

打印 5

另一个例子：

```
let i=0 
seq $RANDOM | while read r
              do 
                let i=r 
              done
echo $i 
```

对比

```
let i=0
while read r 
do 
  let i=r 
done < <(seq $RANDOM)
echo $i 
```

或者，当作业控制处于非活动状态时（例如在脚本中），您可以使用`lastpipe`shell 选项来获得相同的结果，而无需更改命令的顺序：

```
#!/bin/bash
shopt -s lastpipe
let i=0
seq $RANDOM | while read r
              do 
                let i=r
              done
echo $i 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-19T17:36:18.080

一个允许多个变量的非常简单实用的方法如下，最终可能会在调用中添加参数：

```
function ComplexReturn(){
  # do your processing... 
  a=123
  b=456
  echo -n "AAA=${a}; BBB=${b};"
}
# ... this can be internal function or any subshell command
eval $(ComplexReturn)
echo $AAA $BBB 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-01T14:30:44.783

虽然从子 shell 中获取多个变量比较困难，但您可以在函数内设置多个变量，而无需使用全局变量。

您可以将变量的*名称*传递给一个函数，该函数用于将其转换为一个名为[**nameref**](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameters.html)`local -n`的特殊变量：[](http://www.gnu.org/software/bash/manual/html_node/Shell-Parameters.html)

 **```
myfunc() {
    local -n OUT=$1
    local -n SIDEEFFECT=$2
    OUT='foo'
    SIDEEFFECT='bar'
}

myfunc A B
echo $A
> foo
echo $B
> bar 
```

这是我最终使用的技术，而不是让 subshel​​l`FOO=$(myfunc)`工作设置多个变量。**

# macos - 如何在 Mac OS X 上使用 Haskell 捕获屏幕？

> ID：15541328
> 
> 赞同：2
> 
> 时间：2013-03-21T07:02:25.310
> 
> 标签：macos, haskell, screen-capture

如何在 Mac OS X 上使用 Haskell 捕获屏幕？

我读过[Haskell 中的屏幕截图？](https://stackoverflow.com/questions/11963561/screen-capture-in-haskell). 但我正在开发 Mac Mini。因此，Windows 解决方案不适用，GTK 解决方案不起作用，因为它只捕获黑屏。Mac 中的 GTK 仅捕获黑屏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:23:51.107

> 如何使用……和 OpenGL 捕获屏幕？

只有运气好。OpenGL 主要是一个绘图 API，主帧缓冲区的内容是未定义的，除非它是由 OpenGL 函数自己绘制的。OpenGL 可能被滥用是由于图形系统确实管理其屏幕窗口的帧缓冲区的方式：在创建没有预定义背景颜色/画笔的窗口后，其初始帧缓冲区内容只是窗口之前屏幕上的所有内容创建。如果在此之上创建了 OpenGL 上下文，则可以使用 glReadPixels 读取帧缓冲区，从而创建屏幕截图。

如今，窗口合成已成为常态，这使得滥用 OpenGL 截取屏幕截图几乎是不可能的。通过合成，每个窗口都有自己的离屏帧缓冲区，并且屏幕的内容仅在最后合成。如果您在合成窗口系统上使用上述方法，该方法依赖于包含所需内容的未初始化内存，则结果将在纯色透明、严重扭曲的垃圾碎片和数据噪声之间大相径庭。

由于可靠地截取屏幕截图必须考虑到系统的许多特性，因此几乎不可能编写一个真正可移植的屏幕截图程序。

OpenGL 绝对不是它的错误工具，无论过去人们（包括我自己）是否能够滥用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-06T09:39:54.967

我编写了这个 C 代码来捕获 Mac 的屏幕并通过函数 glDrawPixels 在 OpenGL 窗口中显示它：

opengl-capture.c

[http://pastebin.com/pMH2rDNH](http://pastebin.com/pMH2rDNH)

为 Haskell 编写 FFI 代码非常简单。我会尽快做的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-21T16:56:59.337

这可能有助于在 C 中找到解决方案：

NeHe 制作 - 使用 gluUnProject
[http://nehe.gamedev.net/article/using_gluunproject/16013/](http://nehe.gamedev.net/article/using_gluunproject/16013/)

Apple 邮件列表 - 回复：发布的屏幕快照示例代码
[http://lists.apple.com/archives/cocoa-dev/2005/Aug/msg00901.html](http://lists.apple.com/archives/cocoa-dev/2005/Aug/msg00901.html)

在 Windows、Linux 和 OS X 上编译 OpenGL 程序
[http://goanna.cs.rmit.edu.au/~gl/teaching/Interactive3D/2012/compiling.html](http://goanna.cs.rmit.edu.au/~gl/teaching/Interactive3D/2012/compiling.html)

[使用 GL_RGB 格式抓取 Mac OS 屏幕](https://stackoverflow.com/questions/2132204/grab-mac-os-screen-using-gl-rgb-format)

# opencv - 3D cv::Mat1f 的模糊平面

> ID：15541329
> 
> 赞同：1
> 
> 时间：2013-03-21T07:02:28.627
> 
> 标签：opencv

我创建了用于计算直方图的三维矩阵，如下所示：

```
// Histogram of HSV image
int const hue_bins = 180; //
int const sat_bins = 256; //
int const val_bins = 4;   // Only four bins for V channel!
float const hue_range[2] = {0, 180};
float const sat_range[2] = {0, 256};
float const val_range[2] = {0, 256};
int const hsv_sizes[] = {hue_bins, sat_bins, val_bins};
cv::Mat1f m_tone_frequences(3, hsv_sizes, 0.); 
```

然后我正在使用

```
cv::calcHist
    ( &image, 1, channels, mask, histogram
    , num_channels, hsv_sizes, ranges);
...
cv::calcBackProject
    ( &image_f, 1, channels, histogram
    , backproject, hsv_sizes, 1.0); 
```

并且似乎工作正常（代码已简化）。

由于直方图是从单个图像中采样的，因此可能会遇到采样问题（感兴趣的对象具有狭窄的颜色分布）。所以我想将高斯平滑应用于“值”直方图平面。我尝试获取直方图行，但它给了我另一个 3D Mat：

```
cv::Mat1f hrow = histogram.row(0); 
// hrow.dims ==3 && hrow.rows == -1 && hrow.cols == -1 
```

而且我对处理它没有任何想法。

我无法解决这个问题，因为这个动作应该很简单。

任何意见是极大的赞赏。

# c - 错误：“字符串”未声明（在此函数中首次使用）gcc OS X

> ID：15541333
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:02:46.890
> 
> 标签：c, macos, gcc

```
$gcc a.c

string s = "string";

a.c:4: error: ‘string’ undeclared (first use in this function)

$gcc -v

Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~182/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~182/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:04:45.677

`string`C中没有数据类型。

您可能想使用：

```
const char* s = "string"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:32:54.833

C中没有`String`这样的数据结构。我们用作String的通用术语实际上是一个`\0`终止的字符数组。

所以这是你可以做的

```
char *s = "string" 
```

或者可能

```
char s[]="string" 
```

# php - 使用全球化时生成 URL 时锂 PHP 表单帮助程序失败

> ID：15541335
> 
> 赞同：0
> 
> 时间：2013-03-21T07:02:58.047
> 
> 标签：php, localization, globalization, lithium

我已经在我的锂框架中激活了全球化配置。

当我在我的视图中使用 html 帮助程序时，例如“$this->form->create()”。

该页面引发了“找不到 URL 的参数匹配”的异常`{$url}`。

我发现在我的“ **Lithium\action\Request** ”对象中，**Param**属性有一个名为“ **locale** ”的键，它检测到带有“zh_CN”的语言环境设置。这是正确的，但问题是。路由对象找不到正确的匹配。

那么如何处理呢？感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:29:57.393

您可以使用该[`li3 route`命令](http://lithify.me/docs/lithium/console/command/Route%3a%3aall%28%29)来帮助您调试它。

[确保您`app/config/routes.php`](https://github.com/UnionOfRAD/framework/blob/master/app/config/routes.php#L22-L33)在环境变量中拥有所需的路线和语言（此处`zh_CN`） 。`locales`

# html - 为什么降价项目符号点由额外的换行符分隔？

> ID：15541337
> 
> 赞同：4
> 
> 时间：2013-03-21T07:03:01.577
> 
> 标签：html, github, markdown, jekyll

我的降价页面包含以下几行：

```
- [Section1](#section1)  
  - [Subsection1](#subsection1)
  - [Subsection2](#subsection2)
- [Section2](#section2)
- [Section3](#section3)
- [Section4](#section4) 
```

**预期**输出（假设每个*项目符号是一个超链接）*：

> *   第一节
>     
>     *   第 1 小节
>     *   第 2 小节
> *   第二节
> *   第三节
> *   第四节

**实际**输出（假设每个*项目符号是一个超链接）*：

> *   第一节
>     
>     
>     *   第 1 小节
>     *   第 2 小节
>          
> *   第二节
>     
>     
> *   第三节
>     
>     
> *   第四节

我不知道为什么 Github/Jekyll 服务器没有生成*预期*的输出。

当我在浏览器（Chrome）中查看源代码时，我发现了这一点（这**不是**预期的）：

```
<ul>
<li>
<p><a href='#section1'>Section1</a></p>

<ul>
<li><a href='#subsection1'>Subsection1</a></li>

<li><a href='#subsection2'>Subsection2</a></li>
</ul>
</li>

<li>
<p><a href='#section2'>Section2</a></p>
</li>

<li>
<p><a href='#section3'>Section3</a></p>
</li>

<li>
<p><a href='#section4'>Section4</a></p>
</li>
</ul> 
```

为什么我`<p>`在这里看到标签？生成器或我的降价代码有问题吗？

我应该如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T16:26:46.810

我刚刚运行了一些测试，看起来它是导致问题的降价处理引擎。

*   使用 Maruku 降价引擎会添加空行。
*   使用 redcarpet markdown 引擎，无需添加额外的行。
*   使用 kramdown 降价引擎不会添加额外的行。

（无法使用 rdiscount 进行测试，因为它未安装在 Windows 上）

# git - 从 git repo 恢复文件而不提交

> ID：15541341
> 
> 赞同：2
> 
> 时间：2013-03-21T07:03:09.583
> 
> 标签：git, github, version-control

我从本地工作区中删除了一个文件，然后意识到我需要它。我还没有提交或推送到 repo，所以我想将该文件返回到我的本地工作区。

我的问题是我的本地 repo 比远程 master 提前 10 次提交，因此简单地克隆 master 并不好，也不是检查不同的提交。恐怕我要么抹去我的本地回购和来源，要么把事情搞砸。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:04:16.507

如果您尚未提交该更改，以下内容将为您返回文件：

```
git checkout <filename> 
```

确切的文件名可以通过`git status`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T18:44:35.243

如果你做了 a ，*那一刻*`git add file`它的内容会保存在索引中，你可以通过. 如果你没有这样做，但它之前已经编辑过，你会得到最后一个版本。*`git checkout file``add``commit`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:35:28.623

即使您确实提交了更改并希望从早期版本中获取文件，您也可以使用命令获取它

```
git show <revision>:<filename> > <new-filename> 
```

（不重定向输出，它只会在 中显示文件修订的内容`less`）。*

# batch-file - 在win 7和XP上获取IP地址

> ID：15541346
> 
> 赞同：0
> 
> 时间：2013-03-21T07:03:30.427
> 
> 标签：batch-file, cmd

我需要批处理文件来检查 IP 地址是否为空白或丢失。有时批处理文件将在 windows 7 上运行，有时在 windows xp 上运行。所以我需要这种输出。

如果没有丢失或空白“您的 ip 是 %ip%，一切正常

如果缺失或空白“错误未找到 ip”

```
Connection-specific DNS Suffix  . : dxtnxx.naits.local
IP Address. . . . . . . . . . . . : 11.73.11.111
Subnet Mask . . . . . . . . . . . : 255.255.254.0
IP Address. . . . . . . . . . . . : fe80::21b:77ff:fec3:f95b%5
Default Gateway . . . . . . . . . : 10.11.11.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:22:52.750

尝试这个：

```
@echo off &setlocal
for /f "tokens=2delims=[]" %%a in ('ping -n 1 -4 %computername% ^| find /i "%computername%"') do set "ip=%%a"
if "%ip%"=="127.0.0.1" set "ip="
if not defined ip (echo.Error No ip found) else echo.your ip is %ip%, Everything is ok
endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:00:21.297

```
for /f "tokens=2 delims={}" %%I in (
    'wmic nicconfig where ipenabled^="TRUE" get ipaddress /format:list'
) do set "ip=%%~I"

if "%ip:~0,7%" equ "169.254" set ip=
if "%ip:~0,2%" equ "0." set ip=

if not defined ip (
    echo Error: No Internet access.
    exit /b 1
)
echo Your IP address is %ip%.  We're good to go. 
```

正如 mfm4aa 指出的那样，该脚本不适用于 XP Home，因为 XP Home 不包含`wmic`. 不过，XP Pro 应该没问题。

除了检查机器是否有IP地址外，这个脚本还会检查IP地址是否是`169.254`自动配置地址，并相应地失败。

# android - 如何确定在 android 中以编程方式运行应用程序的权限？

> ID：15541348
> 
> 赞同：1
> 
> 时间：2013-03-21T07:03:35.753
> 
> 标签：android, activity-manager

我想在我的软件中查看运行 android 应用程序的权限。

出于这个原因，我有以下代码：

```
 List<App> apps = new ArrayList<App>();
   ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);

   PackageManager packageManager = getPackageManager();

   List<RunningAppProcessInfo> l = am.getRunningAppProcesses();
   Iterator<RunningAppProcessInfo> i = l.iterator();

   PackageManager pm = this.getPackageManager();
   int row_count = 0 ;

   while(i.hasNext()) {
     ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
     try 
     {
       CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
       App app = new App();
       app.setTitle(c.toString());
       app.setPackageName(l.get(row_count).processName);

       PackageInfo packageInfo =  packageManager.getPackageInfo(l.get(row_count).processName, PackageManager.GET_PERMISSIONS);
       String[] reqPermission= packageInfo.requestedPermissions;
       app.set_Permission_Info(reqPermission);

    //   app.setVersionName(p.versionName);
     //  app.setVersionCode(p.versionCode);
      // CharSequence description = p.applicationInfo.loadDescription(packageManager);
     //  app.setDescription(description != null ? description.toString() : "");
       row_count++;
       // app.setSize(p.s)
       apps.add(app);

     }

     catch(Exception e){} 
```

但有一个问题。

当我运行我的应用程序时，我发现应用程序名称和应用程序的包名称不一致。为什么会引入这个问题？

主要问题描述如下：

让我们假设一个名为“EBOOK_Reader”和“Camera”的应用程序正在我的设备中运行。包名分别为“com.ab”和“com.cd”。此代码的问题是适当的包名称与适当的应用程序名称不符。

它显示了“com.ab”到“Camera”和“com.cd”到“EBOOK_Reader”的包名，这是不需要的。

知道如何解决问题吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-02T11:13:02.153

这是正确的并且正在运行：

```
 PackageManager mPm = getPackageManager();   
List <PackageInfo> appList=mPm.getInstalledPackages(PackageManager.GET_PERMISSIONS|PackageManager.GET_RECEIVERS|
          PackageManager.GET_SERVICES|PackageManager.GET_PROVIDERS);

for (PackageInfo pi : appList) {
    System.out.println("Process Name: "+pi);
    // Do not add System Packages
    if ((pi.requestedPermissions == null || pi.packageName.equals("android")) || 
            (pi.applicationInfo != null && (pi.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0)) 
        continue;

    for (String permission : pi.requestedPermissions) {
        //Map<String, String> curChildMap = new HashMap<String, String>();
        //System.out.println("############     "+permission);

        try {
            PermissionInfo pinfo = mPm.getPermissionInfo(permission, PackageManager.GET_META_DATA);
            CharSequence label = pinfo.loadLabel(mPm);
            CharSequence desc = pinfo.loadDescription(mPm);
            System.out.println("$$$$$ "+label+"!!!!!! "+desc);

        } catch (NameNotFoundException e) {
            Log.i(TAG, "Ignoring unknown permission " + permission);
            continue;
       }
    }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:21:37.400

进程名称不绑定到应用程序包名称。为了方便起见，默认情况下它们碰巧是相同的。但是，每个应用程序都可以使用该属性在其清单中自由更改其进程名称[`android:process`](http://developer.android.com/guide/topics/manifest/application-element.html#proc)，或者为各种组件生成更多具有不同名称的进程。

在更高级的场景中，多个应用程序可以共享同一个进程。

特别是，这意味着您不能使用进程名称来获取当前正在运行的应用程序。[`RunningAppProcessInfo.pkgList`](http://developer.android.com/reference/android/app/ActivityManager.RunningAppProcessInfo.html#pkgList)您应该改为使用该字段迭代在该进程中加载​​的包列表。请记住，它是一个数组，可以包含多个应用程序包名称。（请参阅上面有关高级场景的说明）

在单独的说明中，作为[`getRunningAppProcesses()`](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)各州的文档：

> 注意：此方法仅用于调试或构建面向用户的流程管理 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:24:23.337

应用名称和应用的包名称通常不同。您最好使用包名称，因为它在整个设备中是唯一的。

更新：现在我明白你的问题了。感谢您的澄清。这是因为变量`row_count`。基本上你正在使用两个不同的迭代器变量。这就是为什么你会得到 2 个不同的结果。你不需要`row_count`，因为你已经有了`i`. 试试下面的更新代码：

基本上`l.get(row_count).processName`被替换了`info.processName`。

```
List<App> apps = new ArrayList<App>();
   ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);

   PackageManager packageManager = getPackageManager();

   List<RunningAppProcessInfo> l = am.getRunningAppProcesses();
   Iterator<RunningAppProcessInfo> i = l.iterator();

   PackageManager pm = this.getPackageManager();
   // int row_count = 0 ; // no need for this. feel free to delete

   while(i.hasNext()) {
     ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
     try 
     {
       CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
       App app = new App();
       app.setTitle(c.toString());
       app.setPackageName(info.processName);

       PackageInfo packageInfo =  packageManager.getPackageInfo(info.processName, PackageManager.GET_PERMISSIONS);
       String[] reqPermission= packageInfo.requestedPermissions;
       app.set_Permission_Info(reqPermission);

    //   app.setVersionName(p.versionName);
     //  app.setVersionCode(p.versionCode);
      // CharSequence description = p.applicationInfo.loadDescription(packageManager);
     //  app.setDescription(description != null ? description.toString() : "");
       //row_count++; // no need for this. feel free to delete
       // app.setSize(p.s)
       apps.add(app);

     }

     catch(Exception e){} 
```

# llvm - 指定我的 LLVM 通行证对 mem2reg 通行证的依赖关系

> ID：15541352
> 
> 赞同：4
> 
> 时间：2013-03-21T07:04:00.047
> 
> 标签：llvm, llvm-3.0

我正在编写一个`ModulePass`并使用它调用它`opt -load`。我需要`alloca`在我的通行证运行时将其提升为寄存器，使用 -mem2reg 开关进行选择。

有一个[链接](http://comments.gmane.org/gmane.comp.compilers.llvm.devel/35640)表明，PromoteMemoryToRegsiter 通行证是一个转换通行证，因此我的通行证不需要。这是 2010 年的声明。这仍然成立吗？

我发现的帖子之一建议类似

```
AU.addRequiredID(PromoteMemoryToRegister::MemoryToRegisterID); 
```

但这与我上面链接的帖子相矛盾。

所以我的问题是，如果可能的话，如何表达我的通行证的这种依赖关系？一般来说，我如何表达这种传递依赖关系？一个变换通道和另一个通道有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:41:14.403

> 一个变换通道和另一个通道有什么区别？

变换通道是可能使其他通道的结果无效的通道。

> 如何表达我的通行证的这种依赖关系？

首先，我推荐阅读[官方“如何编写通行证”指南的通行证依赖部分](http://llvm.org/docs/WritingAnLLVMPass.html#id38)。在任何情况下，在转换通道之间添加依赖项的正确方法是在您的通道管理器中添加一个在另一个之前（[请参阅通道管理器的指南部分](http://llvm.org/docs/WritingAnLLVMPass.html#writing-an-llvm-pass-passmanager)），或者，如果您只是调用`opt`，则添加您想要的所有通道*按照您希望它们发生的顺序*，例如：

```
opt -load mypass.so -mem2reg -mypass 
```

# android - 以编程方式设置字体并在 xml 中设置文本样式不起作用

> ID：15541353
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:08.070
> 
> 标签：android, textview

我在 xml 中定义了一个 textview，现在我正在以编程方式设置字体，如下所示：

```
textView.setTypeface(APP_FONT_REGULAR); // which is custom font in assests (.ttf file). 
```

现在我已经`android:textStyle="bold"`在 xml中设置了

但它没有应用粗体？

我需要应用自己的 Typface 并将其设置为粗体的原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:24:25.087

> 我需要应用我自己的字体并将其设置为粗体。

当你`setTypeface()`这样打电话时，你可以设置外观

```
textView.setTypeface(APP_FONT_REGULAR, Typeface.BOLD); 
```

它解决了你的问题。看看这个。

# iphone - 将 NSString 转换为 NSDate 返回 (null) 值

> ID：15541354
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:11.313
> 
> 标签：iphone, objective-c, nsdate, nsdateformatter

我有一个字符串格式的日期“ `2013-03-19T19:00:50`”
我正在尝试将其转换为`NSDate`使用`NSDateFormatter`

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-ddThh:mm:ss"];
NSDate *startDate = [dateFormatter dateFromString:date];
NSLog(@"date in date format : %@",startDate); 
```

但它给了我空日期

```
date in date format : (null) 
```

问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T07:10:02.397

采用 ：

```
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"]; 
```

您有 24 小时格式的时间，因此`HH`是必需的。`hh`当时间为 12 小时格式时使用。

并且`T`必须是单引号，T 不是日期的一部分，这是一个添加的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:12:20.517

根据[日期格式化程序模式](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns) `hh`意味着`Hour [1-12]`You want `Hour [0-23]`which is `HH`.

任何不是日期格式模式或不能以这种方式解释的字母都必须放在撇号之间。

采用`[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:08:07.090

这样做，

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"];
NSDate *startDate = [dateFormatter dateFromString:date];
NSLog(@"date in date format : %@",startDate); 
```

# java - 在 AlertDialog 上单击“确定”后如何重新加载主要活动

> ID：15541355
> 
> 赞同：1
> 
> 时间：2013-03-21T07:04:11.560
> 
> 标签：java, android

我有一个 AlertDialog，我希望在单击“确定”后重新加载主活动。问题是在我单击“确定”后，我的活动返回到主屏幕。

**JAVA代码：**

```
private void buildAlertMessageNoGps() {
    final AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(
        "This application needs GPS satellite or Wireless Networks localization enabled" 
        + "\n" + "Do you want to enable it?")
        .setCancelable(true)
        .setPositiveButton("Yes",
    new DialogInterface.OnClickListener() {
        public void onClick(final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
            startActivity(new Intent(
            Settings.ACTION_LOCATION_SOURCE_SETTINGS));
            finish();
            startActivity(getIntent());
        }

    })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
        public void onClick(final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
            dialog.cancel();

        }
    });

    final AlertDialog alert = builder.create();

    alert.show();

} 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:10:29.027

更改此代码

```
new DialogInterface.OnClickListener() {
    public void onClick(final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
        startActivity(new Intent(
        Settings.ACTION_LOCATION_SOURCE_SETTINGS));
        finish();
        startActivity(getIntent());
    } 
```

至

```
new DialogInterface.OnClickListener() {
    public void onClick(final DialogInterface dialog, @SuppressWarnings("unused") final int id) {
        startActivityForResult(new Intent(
        Settings.ACTION_LOCATION_SOURCE_SETTINGS), 0);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:05:42.797

再次调用 onCreate 方法。但是将 null 作为参数传递。

```
onCreate(null); 
```

# php - 使用 TableGateway 选择函数设置参数显示错误未定义变量

> ID：15541356
> 
> 赞同：1
> 
> 时间：2013-03-21T07:04:12.473
> 
> 标签：php, zend-framework2

我在我的模型中创建了一个函数，例如：

```
public function getAllMenuByOnlyActionPage($actionlot){

            $act  = trim($actionlot);
            $result = $this->tableGateway->select(function (Select $select) {
                        $select->where(array('status != ?' => 13))
                        ->where(array('action' => $act))
                        ->order('id ASC');
                    }); 
            $results = array();
            foreach ($result as $row) {
                $results[] = $row;
            }
            return $results;

        } 
```

当我尝试执行时，它会显示给我`Notice: Undefined variable: act`。我已经看到这个链接[ZF2 tableGateway select](https://stackoverflow.com/questions/10297447/zf2-tablegateway-select)但我想为这个函数设置参数。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T07:39:34.987

尝试

```
$result = $this->tableGateway->select(function (Select $select) use ($act)  {
                        $select->where(array('status != ?' => 13))
                        ->where(array('action' => $act))
                        ->order('id ASC');
                    }); 
```

# ruby-on-rails-3.2 - 为什么我不能将对象添加到关系中？

> ID：15541359
> 
> 赞同：1
> 
> 时间：2013-03-21T07:04:16.657
> 
> 标签：ruby-on-rails-3.2, has-and-belongs-to-many

只是学习轨道...

我有以下型号：

```
class TimeSlot < ActiveRecord::Base
  has_and_belongs_to_many :users
end

class User < ActiveRecord::
   has_and_belongs_to_many :time_slots
end 
```

我还有一个模型可以加入两者：

```
class TimeSlotsUsers < ActiveRecord::Base
  attr_accessible :time_slot_id, :user_id
end 
```

在控制台中，我创建了一个用户对象，并且我想将它与 TimeSlot 相关联。我有一个变量`ts`，它是一个 TimeSlot 对象，`u`它是一个用户对象。两者都已存在于数据库中。当我这样做时`ts.users << u`，我收到一条错误消息：“ActiveRecord::StatementInvalid: SQLite3::ConstraintException: time_slots_users.created_at may not be NULL: INSERT INTO "time_slots_users" ("time_slot_id", "user_id") VALUES (1, 1)。

为什么 created_at 会为空？不是在创建 TimeSlotsUsers 中的记录时自动创建的吗？我是否需要改用 has-many through 关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:18:15.300

如果您希望将 user_id 和 timeslot_id 以外的任何信息作为关系的一部分，则连接模型是一个很好的模式。例如，如果你有`groups`并且`users`你有一个多对多的关系，但有时用户是一个`admin`组的一个，你可以把`is_admin`属性放在连接模型上。

为了保持你的连接模型，一个更好的 Rails 模式如下......

```
class TimeSlot < ActiveRecord::Base
  has_many :time_slot_users
  has_many :users, through: :time_slot_users
end

class User < ActiveRecord::Base
  has_many :time_slot_users
  has_many :time_slots, through: :time_slot_users
end

class TimeSlotsUsers < ActiveRecord::Base
  belongs_to :users
  belongs_to :time_slots
end 
```

我不同意其他主张在连接表上没有主键的答案之一。
例如，当您想使用 REST API 删除或编辑该关系时，拥有该关系的唯一 ID 很重要。是否有`updated_at`或`created_at`取决于它们是否是您的问题域中的有用数据。它可能是有用的信息，例如，知道用户何时被添加到组中（或者它可能不是）。

在 (user_id, time_slot_id) 上的连接表上拥有唯一索引以确保数据完整性非常重要。Rails 模型可以在 99.999% 的实例中可靠地验证唯一性，但不是 100% 的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:45:05.107

habtm 关系的连接表[不应该有`created_at`和`updated_at`列](http://guides.rubyonrails.org/association_basics.html#creating-join-tables-for-has_and_belongs_to_many-associations)。您也不需要连接模型。

如果你想对连接表做一些事情和/或向它添加属性，你应该更改为`has_many :through`.

# css - 如何在歌剧中禁用css动画关键帧？

> ID：15541365
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:40.933
> 
> 标签：css

我使用 CSS3`transform`和`animation`功能创建了一个动画。现在我想禁止动画在 Opera 上显示。

当我从 css 中删除 Opera 特定代码 ( `@-o-keyframes leftright { 0% { left: -10%; } 100%{ left: 101%;}}`) 时，动画不会在 Opera 上自行禁用。

但是，当我删除默认动画代码 ( `@keyframes leftright { 0% { left: -10%; }100%{ left: 101%;}}`) 时，它会在 Opera 上自行禁用。

我想在不删除默认代码的情况下在 Opera 上禁用它。

这是代码

```
@keyframes leftright {  0% { left: -10%; }100%{ left: 101%;}}
@-moz-keyframes leftright { 0% { left: -10%; }  100%{ left: 101%;}}
@-webkit-keyframes leftright {  0% { left: -10%; }  100%{ left: 101%}}
@-o-keyframes leftright { 0% { left: -10%; } 100%{ left: 101%;}} 
```

有没有办法完成这件事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T07:47:32.657

首先，*您应该**始终**将**无前缀**的关键帧放在**最后***。

这意味着您应该拥有：

```
@-moz-keyframes leftright { 0% { left: -10%; }  100%{ left: 101%;}}
@-webkit-keyframes leftright {  0% { left: -10%; }  100%{ left: 101%}}
@-o-keyframes leftright { 0% { left: -10%; } 100%{ left: 101%;}} 
@keyframes leftright {  0% { left: -10%; }100%{ left: 101%;}} 
```

* * *

为了回答您的问题，您所描述的原因是因为*Opera 支持不带前缀的关键帧动画*`@keyframes leftright { 0% { left: -10%; }100%{ left: 101%;}}`，并且即使`@-o-keyframes leftright { 0% { left: -10%; } 100%{ left: 101%;}}`缺少Opera 特定的前缀 ( ) 也会应用它们 ( )。

实现你想要的最简单的方法可能是[**使用选择器黑客**](http://browserhacks.com/#op)来定位 Opera（我选择只适用于 Opera 9.5+ 的原因是旧版本不支持关键帧动画，前缀或无前缀）并在为所有浏览器添加动画后仅为该浏览器删除动画。

例如，如果您`<div class='boo'></div>`在 HTML 中有类似的内容，那么您的 CSS 中需要有类似的内容：

```
.boo {
  position: absolute;
  width: 5em; height: 5em;
  background: blue;
  animation: leftright 5s linear 5; /* set animation for all browsers */
}
noindex:-o-prefocus, .boo { /* remove animation just for Opera */
  animation: none;
} 
```

# [*工作演示*](http://codepen.io/thebabydino/pen/IrbjA)

（在 Opera 和其他浏览器中查看）

*[请注意，我的现场演示使用[**-prefix-free**](http://leaverou.github.com/prefixfree/)，它根据需要通过 JavaScript 添加供应商前缀，并且在**您的**代码中您仍然需要为 WebKit 动画添加前缀 - 有关带/不带前缀的浏览器支持的更多信息，总是检查[**caniuse.com**](http://caniuse.com/#feat=css-animation) ]*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:53:24.590

尝试 ：

```
@-moz-keyframes leftright { 0% { left: -10%; }  100%{ left: 101%;}}
@-webkit-keyframes leftright {  0% { left: -10%; }  100%{ left: 101%}}
@-o-keyframes leftright { none; } 
```

有时您不需要为它工作的精确前缀。因此，您需要将值更改为`none`.

# android - notifyDataSetChanged 不工作

> ID：15541366
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:41.693
> 
> 标签：android

我从 Web 服务中获取 JSON 格式的数据，然后将数据放入自定义的`ListView`.

单击 的项目时`ListView`，我会打开一个新的`Activity`. 现在我点击这个活动的“提交”按钮我回到同一个`ListView`，

**当我回到 时`ListView`，我想更改我之前单击的 listitem 的文本**

我只想刷新或重新调用活动时再次`listticket.java`

现在数据是静态的。我使用了网络服务。

**listticket.java**

```
public class listticket extends Activity {

    static ListView listView;

    ArrayList<String> aryTicket = new ArrayList<String>();

    private String[] listArr = { "A", "B" };

    private String[] listStatus = { "Alert", "Alert" };
    private String[] listTicketid = { "1", "2" };

    ArrayList<String> ary_ticket_code = new ArrayList<String>();

    ArrayList<String> ary_address = new ArrayList<String>();
    ArrayList<String> ary_ticketid = new ArrayList<String>();

    public static ArrayList<String> ary_status = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.listticket);

        listView = (ListView) findViewById(R.id.itemList);

        // filllistdata();

        listArr = new String[ary_ticket_code.size()];
        listArr = ary_ticket_code.toArray(listArr);

        listStatus = new String[ary_status.size()];
        listStatus = ary_status.toArray(listStatus);

        listTicketid = new String[ary_ticketid.size()];
        listTicketid = ary_ticketid.toArray(listTicketid);

        MyArrayAdapter adapter = new MyArrayAdapter(this, listArr);
        listView.setAdapter(adapter);

    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        ary_status.set(0, "Work Done");
        ((MyArrayAdapter) listView.getAdapter()).notifyDataSetChanged();

    }

    public class MyArrayAdapter extends ArrayAdapter<String> {

        Activity context;
        String[] listArr;

        private TextView btnchkout;

        // private final integer[] image;

        public MyArrayAdapter(Activity context, String[] objects) {
            super(context, R.layout.ticket, objects);
            // TODO Auto-generated constructor stub
            this.context = context;
            listArr = objects;

        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater inflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.ticket, null, true);

            TextView textView = (TextView) view.findViewById(R.id.txtTicketNo);
            textView.setText(listArr[position]);

            final TextView txtAlert = (TextView) view
                    .findViewById(R.id.txtAlert1);
            // Toast.makeText(getApplicationContext(), listStatus[position],
            // Toast.LENGTH_LONG).show();
            String statusCheck = listStatus[position].toString().trim();

            if (statusCheck.equals("Alert") == true) {
                txtAlert.setText(statusCheck);
                txtAlert.setTextColor(getResources().getColor(R.color.red));

            } else if (statusCheck.equals("In Progress") == true) {
                txtAlert.setText(statusCheck);
                txtAlert.setTextColor(getResources().getColor(R.color.view));

            } else if (statusCheck.equals("Work Complete Pending paperwork") == true) {
                txtAlert.setText("Work Done");
                txtAlert.setTextColor(getResources().getColor(R.color.green));

            } else {
                txtAlert.setText(statusCheck);
                // txtAlert.setTextColor(getResources().getColor(R.color.defaulttextcolor));
            }

            final TextView btntextView = (TextView) view
                    .findViewById(R.id.btnCheckin);

            if (statusCheck.equals("In Progress")) {
                Drawable d = getResources().getDrawable(R.drawable.btncheckin);
                btntextView.setBackgroundDrawable(d);
            }

            btnchkout = (TextView) view.findViewById(R.id.btnCheckout);

            btnchkout.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    Intent intent = new Intent(listticket.this,
                            ticket_detail.class);
                    startActivity(intent);

                }
            });

            return view;
        }
    }

} 
```

单击 ListItem 时的另一个布局

**票务细节.java**

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.ticket_detail);

        btnSubmit = (TextView) findViewById(R.id.btnSubmit);

        btnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                     new AsyncAction().execute(null,null,null);

                //onBackPressed();
            }
        });
    }

    private class AsyncAction extends AsyncTask<String, Void, String> 
    {
         public boolean status=false;
        private ProgressDialog pd;
        @Override
        protected String doInBackground(String... arg0) 
        {
            // TODO Auto-generated method stub
            try
              {

            } 
              catch (Exception e) 
              {
                // TODO: handle exception
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) 
        {

           pd.dismiss();  
           Intent intent = new Intent(ticket_detail.this,listticket.class);
           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
           startActivity(intent);
           //finish();

        }

        protected void onPreExecute() 
        {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(ticket_detail.this);
            pd.setMessage("Please Wait ...");
            pd.setIndeterminate(true);
            pd.setCancelable(false);
            pd.show();
        }

    }

      @Override
       public boolean onKeyDown(int keyCode, KeyEvent event) {
           if (keyCode == KeyEvent.KEYCODE_BACK) {
               Intent a = new Intent(ticket_detail.this,listticket.class);
               a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
               startActivity(a);
               finish();

               return true;
           }
           return super.onKeyDown(keyCode, event);
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:22:20.863

全局创建适配器对象并在内部`onCreate`和内部初始化一次，`onResume()` 通知您的适配器，如下所示：

`Delcaration`

> MyArrayAdapter 适配器；

`onCreate`

```
adapter = new MyArrayAdapter(this, listArr);
listView.setAdapter(adapter); 
```

`onResume()`

> 适配器.notifyDataSetChanged();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:53:15.493

Try this, add, clear and remove calls notifyDataSetChanged itself and you dont have to change your adapter everytime you refresh your information, its expensive.

```
adapter.clear()

for (Object o : object)
  adapter.add(o) 
```

# xslt - 如何为 xsl 中的不同页面应用不同的页面宽度？这是用于生成 PDF

> ID：15541367
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:44.270
> 
> 标签：xslt, xsl-fo

我必须使用 xml 和 xsl 生成 pdf。在 PDF 上，我需要不同页面的不同宽度。我怎样才能做到这一点？

谢谢并恭祝安康

克里希南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:05:11.287

一个完整的 xsl-fo 示例：

```
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">  
                <fo:layout-master-set>
                    <fo:simple-page-master page-height="10cm" page-width="5cm" 
                            master-name="format1">
                        <fo:region-body />
                    </fo:simple-page-master>
                    <fo:simple-page-master page-height="5cm" page-width="10cm" 
                            master-name="format2">
                        <fo:region-body/>
                    </fo:simple-page-master>
                </fo:layout-master-set>
                <fo:page-sequence master-reference="format1">
                    <fo:flow flow-name="xsl-region-body">
                        <fo:block>Test format 1</fo:block>
                    </fo:flow>
                </fo:page-sequence>
                <fo:page-sequence master-reference="format2">
                    <fo:flow flow-name="xsl-region-body">
                        <fo:block>Test format 2</fo:block>
                    </fo:flow>
                </fo:page-sequence>
</fo:root> 
```

# visual-studio - 是否可以将 PostSharp 3 与 Visual Studio Express 一起使用？

> ID：15541370
> 
> 赞同：6
> 
> 时间：2013-03-21T07:04:46.190
> 
> 标签：visual-studio, postsharp

PostSharp 3 仅作为 Visual Studio 扩展提供。Visual Studio Express 不支持扩展。有没有办法将 PostSharp 3 与 Express 版本的 Visual Studio 一起使用？

以前我们使用 PostSharp 2.1 作为具有免费 PostSharp express 许可证的外部工具，但目前此[许可证不可用](http://support.sharpcrafters.com/discussions/problems/1007-mr)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T07:43:28.577

这是 PostSharp 技术支持的回答：

PostSharp 2.1 Starter 版本不再可用。但是，PostSharp 3 在 VS Express 中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T11:47:39.113

现在可以使用 Nuget 包。实际上，您应该在所有编译失败的项目中添加对 Postsharp Nuget 的引用。

就我而言，我在一些引用的项目和控制台应用程序项目和 WebApplication 项目中有一个 postsharp 引用，这些项目也需要引用包。

要提供许可证，只需转到包文件夹并运行 Postsharp.HQ.v.3.0.exe

# c# - Alfresco 以编程方式导航到正确的文件夹

> ID：15541371
> 
> 赞同：1
> 
> 时间：2013-03-21T07:04:47.543
> 
> 标签：c#, alfresco, cmis, dotcmis

我对 Alfresco 和 dotCMIS 库有疑问。基本上我想进入一个特定的文件夹并在那里创建一个文档。

此时我有以下代码（我知道它很乱，但它是用于测试）：

```
 Dictionary<string, string> parameters = new Dictionary<string, string>();

            parameters[SessionParameter.BindingType] = BindingType.AtomPub;
            parameters[SessionParameter.AtomPubUrl] = "http://webadress:2005/alfresco/service/cmis";
            parameters[SessionParameter.User] = "amdin";
            parameters[SessionParameter.Password] = "admpsw";

            SessionFactory factory = SessionFactory.NewInstance();
            IList<DotCMIS.Client.IRepository> repositories = factory.GetRepositories(parameters);
            DotCMIS.Client.ISession session = repositories[0].CreateSession();

            foreach (ICmisObject cmisObject in rootFolder.GetChildren())
            {
                Console.WriteLine(cmisObject.Name);
                if (cmisObject.Name.Equals("AlfresCO"))
                {
                    var type = cmisObject.GetType();
                    IFolder circabcfolder = cmisObject as IFolder;
                    foreach (ICmisObject obj in circabcfolder.GetChildren())
                    {
                        Console.WriteLine(obj.Name);
                        if (obj.Name.Equals("SubFolder1"))
                        {
                            IFolder circabcfolder2 = obj as IFolder;
                            foreach (ICmisObject obj2 in circabcfolder2.GetChildren())
                            {
                                Console.WriteLine(obj2.Name);

                                foreach (ICmisObject obj3 in (obj2 as IFolder).GetChildren())
                                {
                                    Console.WriteLine(obj3.Name);
                                    if (obj3.Name.Equals("Library"))
                                    {
                                        foreach (ICmisObject obj4 in (obj3 as IFolder).GetChildren())
                                        {
                                            Console.WriteLine(obj4.Name);
                                            if (obj4.Name.Equals("MyFolder"))
                                            {
                                                IDictionary<string, object> properties2 = new Dictionary<string, object>();
                                                properties2[PropertyIds.ObjectTypeId]= "cmis:folder";
                                                properties2[PropertyIds.Name] = "Test Folder";

                                                IFolder newFolder = (obj4 as IFolder).CreateFolder(properties2);

                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } 
```

它只是打开一个根文件夹，例如，这意味着我在“alfresco”中，然后我必须导航到另一个子文件夹，然后是另一个子文件夹，最后我到达：/Library、/Groups、/Newsgroups .. . 等等。在库中我可以打开“我的文件夹”，但是有没有更简单的方法来打开 /Library/MyFolder 而不是真正遍历所有层以获得正确的文件夹......？

我可以做类似的事情吗..`session.GetFolderByName("MyFolder")`

我也不能依赖 ID，例如在其他门户中，为文件夹随机生成的 ID 可能不同，所以我不能说 GetFolderById(..);

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:34:36.320

我对 DotCMISClient 不是很熟悉，但是如果您查看全部服务（应该可以通过客户端获得），那么您会看到 2 个可以解决问题的服务

1.  [GetObjectByPath](http://wiki.alfresco.com/wiki/CMIS#Object_Services)
2.  [询问](http://wiki.alfresco.com/wiki/CMIS_Query_Language#cmis%3afolder)

查询非常简单，类型为 cmis:folder 且名称为“MyFolder”。

# modal-dialog - 在点击和回调函数上打开 Foundation Reveal？

> ID：15541372
> 
> 赞同：0
> 
> 时间：2013-03-21T07:04:52.320
> 
> 标签：modal-dialog, zurb-foundation

我正在从 jQueryTools Overlay 迁移，我无法真正掌握有关如何通过 JavaScript 单击事件打开 Reveal 的文档。

据说我有这个代码：

```
<a href="#revealModal" class="revealTrigger">Click Me For A Modal</a>
<div id="revealModal" class="reveal-modal">
    <p>Im a cool paragraph that lives inside of an even cooler modal. Wins</p>
</div> 
```

通常，我在 jQueryTools Overlay 中对 click 事件进行编码，例如：

```
$('.revealTrigger').click(function() {
    $('#revealModal').reveal();
}); 
```

但这不起作用。Reveal 中对应的正确代码是什么？

那么回调事件呢？我可以写这样的东西：

```
$('.revealTrigger').click(function() {
    $('#revealModal').reveal({
        open: function(){
            // prepare some stuff before showing
        },
        opened: function(){
            // execute stuff prepared by open function
        },
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:55:08.867

可以通过两种方式打开 Reveal 模式，按属性：

```
<a href="#" data-reveal-id="myModal">Click Me For A Modal</a>
 <div id="myModal" class="reveal-modal">
      <h2>Awesome. I have it.</h2>
      <p class="lead">Your couch.  It is mine.</p>
      <p>Im a cool paragraph that lives inside of an even cooler modal. Wins</p>
      <a class="close-reveal-modal">&#215;</a>
    </div> 
```

或通过javascript：

```
<a class="large button" onclick="javascript:showModal();" href="#">Show Modal</a>

<script>
     $('#myModal').foundation('reveal', {
          opened: function () {
              alert('The couch was stolen!');
          },
          closed: function () {
              alert("Now it's yours again");
          }
     });
     $(document).foundation();
     function showModal() {
         $('#myModal').foundation('reveal', 'open');          
     }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T23:24:16.873

您还可以绑定打开、打开、关闭和关闭事件。

```
#CoffeeScript
$("div[class$='-modal']").on "opened", ->
  console.log "howdy" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T11:48:42.347

请使用以下代码

```
 $('#modal_id').bind('closed', function() {
     console.log("myModal closed!");
   }); 
```

# python-3.x - 如何使用 Python Idle 保存程序？

> ID：15541373
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:04:56.230
> 
> 标签：python-3.x

我有一台 Mac Ver 10.6.8，并且刚刚安装了带有 IDLE 的 Python 3.3。我是全新的，这是我正在学习的第一门程序语言，没有任何经验。我正在为新程序员使用 Wikibooks 指南。我已经完成了“Hello World”，但在谈到使用 -> 文件 -> 另存为保存它之后。我觉得很愚蠢，但我没有看到可以选择文件的此功能或区域。我有一个截图，但不能不发布，因为我没有代表点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:19:52.950

1.  文件
2.  另存为
3.  给它命名
4.  节省

您的文件将以 .py 扩展名保存，这是一个 Python 脚本文件。

# java - 获取格林威治标准时间

> ID：15541381
> 
> 赞同：3
> 
> 时间：2013-03-21T07:05:13.977
> 
> 标签：java, android, timezone, gmt

**印度标准时间**(IST) 比格林威治标准时间早 5:30 小时（5 小时 30 分钟）。我们将其显示为 GMT+5.5。

有没有办法按时区找到这个值（在上述情况下，值 = 5.5）？

在我的 android 应用程序中，我可以获取设备时区。但是如何使用设备时区获取此值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:38:24.127

```
double timezoneval = 0.0;
        Calendar cal = Calendar.getInstance();
        cal.set(mn.Year(), mn.Month(), mn.Day(), mn.Hour(), mn.minute(),
                (int) mn.second());
        TimeZone tz = TimeZone.getDefault();
        boolean t = tz.inDaylightTime(cal.getTime());
        if (t)
            timezoneval = ((TimeZone.getDefault().getRawOffset())
                    / (60 * 60 * 1000D) + (TimeZone.getDefault()
                    .getDSTSavings() / (60 * 60 * 1000D)));
        else
            timezoneval = ((TimeZone.getDefault().getRawOffset()) / (60 * 60 * 1000D)); 
```

你可以试试这段代码。这将为您提供时区的值。如果你想要不同的时区值；只需更改 `TimeZone tz = TimeZone.getDefault();` 为

```
TimeZone tz = TimeZone.getTimeZone("Asia/Kolkata");
        TimeZone.setDefault(tz); 
```

它会为你工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:23:26.987

检查时区类。原始偏移量是您想要的，以毫秒为单位。您可以轻松地将其转换为以小时为单位的价值。

```
long rawOffset = TimeZone.getDefault().getRawOffset(); 
```

请参阅[http://developer.android.com/reference/java/util/TimeZone.html#getRawOffset()](http://developer.android.com/reference/java/util/TimeZone.html#getRawOffset())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-16T15:57:46.037

# tl;博士

> 如何使用设备时区获取此值

```
ZonedDateTime.
now(
    ZoneId.systemDefault()  // Or: ZoneId.of("Asia/Kolkata") 
)
.getOffset()
.toString() 
```

请参阅[在 IdeOne.com 上实时运行的代码](https://ideone.com/0ZPaJ0)。

> +05:30

# *java.time*

**使用`java.time`现代 API 的解决方案：**

```
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        ZonedDateTime zdt = ZonedDateTime.now(ZoneId.of("Asia/Kolkata"));
        int seconds = zdt.getOffset().getTotalSeconds();
        System.out.println(seconds);

        // If required, convert it into hours
        double hours = seconds / 3600.0;
        System.out.println(hours);
    }
} 
```

**输出：**

```
19800
5.5 
```

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和您的 Android API 工作level 仍然不符合 Java-8，请[通过 deugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)检查 Java 8+ APIs 。)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:08:39.333

试试这个代码

```
 public class Sample {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    try {
        String dateStr = "2010-06-14 02:21:49-0400";
        SimpleDateFormat sdf =  new SimpleDateFormat("yyyy-MM-dd HH:mm:ssZ");
        TimeZone tz = TimeZone.getDefault();
        sdf.setTimeZone(tz);
        Date date = sdf.parse(dateStr);

        sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss a");
        String newDateStr = sdf.format(date);

        System.out.println(newDateStr);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
} 
```

输出应该是这样的

2010-06-14 08:21:49

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:07:15.763

尝试：

```
TimeZone.getDefault(); 
```

[getDefault()](http://download.oracle.com/javase/1,5.0/docs/api/java/util/TimeZone.html#getDefault%28%29)返回当前设备的时区详细信息。然后，您可以调用[getOffset()](http://developer.android.com/reference/java/util/TimeZone.html#getOffset%28long%29)来获取 UTC 和这个时区之间的差异。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-21T09:38:31.270

这实际上是我需要的。

```
double rawOffset = TimeZone.getDefault().getRawOffset();

rawOffset = rawOffset / (60 * 60 * 1000);

System.out.println("rawOffset : " + rawOffset); 
```

# java - 为 @ElementCollection 自动生成 add() 和 remove() 方法

> ID：15541388
> 
> 赞同：2
> 
> 时间：2013-03-21T07:05:43.623
> 
> 标签：java, spring, jpa, spring-roo

我有一个包含`@ElementCollection`s的实体`String`：

```
@RooJavaBean
public class Foo {

    @ElementCollection
    private Set<String> names;

} 
```

Roo 生成`getNames()`和`setNames(Set<String>)`。有什么方法也可以生成`addName(String)`和`removeName(String)`方法吗？或者，除了 Roo 之外，还有没有关于如何实现这些方法的最佳实践？为每个持有一个 just 的类编写相同的代码`@ElementCollection`感觉不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:30:26.520

您可以添加/删除，但只需执行 obj.getNames().add() 或 obj.getNames().remove(name)。当您可以将其链接在一起时，我没有看到专门用于添加的方法的好处。我唯一能看到在实体中的集合上需要特定的添加/删除/替换方法是如果您需要围绕添加/删除/替换执行特定逻辑，在这种情况下，Roo 无论如何都是无用的。

# java - Java 如何决定在哪里寻找主类？

> ID：15541393
> 
> 赞同：4
> 
> 时间：2013-03-21T07:06:02.887
> 
> 标签：java, classpath

我在一个名为“staged”的文件夹中有一堆 .jar 文件。

```
/target
  /staged
    - akka-slf4j_2.10.0-RC1-2.1.0-RC1.jar
    - play_2.10-2.1-RC1.jar
    - etc... 
```

虽然我的当前目录是“目标”，但我尝试运行命令

```
$ java -cp ./staged/* play.core.server.NettyServer ./..
Error: Could not find or load main class ..staged.akka-slf4j_2.10.0-RC1-2.1.0-RC1.jar 
```

奇怪的是，Java 在 staged.akka-slf4j_2.10.0-RC1-2.1.0-RC1.jar 中寻找一个主类。NettyServer 类位于名为 play_2.10-2.1-RC1.jar 的完全不同的 .jar 文件中。Java 如何决定要搜索哪些 .jar 文件以找到 main 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:08:30.490

Java 不搜索特定的 jar 文件。它只是在生成的类路径中搜索您在命令行中指定的类。

编辑：除非您指定“-jar”，否则它使用 MANIFEST.MF 文件的 Main-Class 指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:16:47.953

您收到此错误是因为类路径应包含由冒号分隔的条目`:`，而不是空格。当 shell 展开`target/*`时，它会在每个文件之间放置空格，这使得 java “认为”只有第一个 jar 文件在类路径中，第二个 jar 文件是您要运行的类的名称，其余的是命令应该传递给的行参数`main`。

如果引用路径，则将 `java`* 扩展为具有正确分隔符的文件列表：

```
java -cp "./staged/*" play.core.server.NettyServer ./.. 
```

另请参阅[此问题中从目录中的所有文件创建类路径的其他方法](https://stackoverflow.com/questions/4729863/using-bash-how-do-you-make-a-classpath-out-of-all-files-in-a-directory)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:08:11.927

在`MANIFEST.MF`你必须写这样一行：

```
Main-Class: MyPackage.MyClass 
```

然后把这个 Manifest 添加到你的 jar 中，jar 就知道去哪里找了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T07:08:31.103

在 META-INF 文件夹中的 .jar 中有 MANIFEST.MF 文件。

如果它不存在，您可以创建一个新的。

[http://docs.oracle.com/javase/tutorial/deployment/jar/defman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/defman.html)

示例内容：

```
Manifest-Version: 1.0
Created-By: 1.7.0_06 (Oracle Corporation)
Main-Class: org.package.MainClass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:21:09.500

shell 扩展了你的命令行

```
java -cp ./staged/* play.core.server.NettyServer ./.. 
```

例如

```
java -cp ./staged/play_2.10-2.1-RC1.jar ./staged/akka-slf4j_2.10.0-RC1-2.1.0-RC1.jar  ...  play.core.server.NettyServer ./.. 
```

Java 现在有`./staged/play_2.10-2.1-RC1.jar`作为类路径和`./staged/akka-slf4j_2.10.0-RC1-2.1.0-RC1.jar`第一个参数，它在其中搜索主类。

# jquery - 追加到不存在的元素会在 JQuery 中创建该元素的新实例吗？

> ID：15541394
> 
> 赞同：1
> 
> 时间：2013-03-21T07:06:03.920
> 
> 标签：jquery

在我的浏览器中，我有一个文本框和一个提交按钮。使用文本框中的文本，我想将该文本作为列表项添加到无序列表的末尾。无序列表尚不存在，但我希望文本出现在文本框和提交按钮下。我做了这个功能：

**代码：**

```
 function display(text) {                       // 'text' from the textbox
      $('ul').append('<li>' + text + '</li>');
 } 
```

当我使用 .display() 时，我希望能够将参数中的文本显示为无序列表中的新列表项。

**问题：**如果一个尚不存在，JQuery 是否会创建一个新的 'ul' 或者我应该先创建一个？如果是这样，我是否正确使用 JQuery 将列表项添加到无序列表？

任何建议都有帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:14:18.817

首先，您必须使用`$('<ul>')`创建一个新的`<ul>`，同时`$('ul')`选择已经存在的元素。

有关详细信息，请参阅[`jQuery( html [, ownerDocument ] )`](http://api.jquery.com/jQuery/#jQuery2)

然后你可以像这样重写你的代码：

```
var ul = $('<ul>');  // save the new created element.
ul.appendTo('body')  // add it into <body> or other place you want to insert
function display(text) {                       // 'text' from the textbox
      ul.append('<li>' + text + '</li>');
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:15:59.680

您的选择器会创建一个包含页面上每个元素`$('ul')`的 jQuery 数组。`<ul>`如果没有`<ul>`元素，则数组为空。如果您想要一个`<ul>`元素但没有，您需要自己创建它，当然您可以使用 jQuery 轻松完成。

您附加`<li>`元素的方式很好，但如果页面上没有 a ，它不会做任何事情`<ul>`。

此外，您真的不应该像这样通过标记名进行选择。如果页面上有多个`<ul>`怎么办？您应该按 id 或 class 选择它。

# android - Android平板电脑中的表格布局缩小

> ID：15541395
> 
> 赞同：0
> 
> 时间：2013-03-21T07:06:14.137
> 
> 标签：android, tablelayout

我制作了一个在三星 Galaxy 2S 上运行的应用程序。我将它扩展到平板电脑，所以我复制了所有布局并粘贴到 layout-large 文件夹中。

图像移位和大小出现问题。我已经解决了它们，但是在布局中，我使用了表格布局，它缩小了。你能告诉我这是图像问题还是布局设计问题？

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:shrinkColumns="*"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow00"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView00"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
            android:textSize="20dp"
            android:textColor="#000000"
            android:text="ORGANIZER"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:id="@+id/editText01"
            android:textColor="#000000"
             android:textSize="16dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
            android:hint="ORGANIZER FILLL"
             android:background="@drawable/text_field_1"
            android:imeOptions="flagNoExtractUi"
            android:inputType="text" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
             android:textSize="20dp"
            android:textColor="#000000"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
            android:text="AGENDA"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:textColor="#000000"
             android:background="@drawable/text_field_1"
           android:textSize="16dp"
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
            android:hint="AGENDA FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="text" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:textColor="#000000"
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
             android:textSize="20dp"
            android:text="DETAILS"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:textColor="#000000"
             android:background="@drawable/text_field_1"
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
             android:textSize="16dp"
            android:gravity="center"
            android:hint="DETAIL FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="textCapSentences"
            android:text="" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:textColor="#000000"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="2"
             android:textSize="20dp"
            android:gravity="center"
            android:text="WHERE"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <EditText
             android:background="@drawable/text_field_1"
            android:id="@+id/editText3"
            android:textColor="#000000"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_span="2"
             android:textSize="16dp"
            android:gravity="center"
            android:hint="WHERE FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="textCapWords" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow7"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:textColor="#000000"
            android:id="@+id/textView4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
             android:textSize="20dp"
            android:text="TIME"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:textColor="#000000"
             android:background="@drawable/text_field_1"
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
             android:textSize="16dp"
            android:gravity="center"
            android:hint="TIME FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="time"
            android:text="" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow9"
        android:textColor="#000000"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
             android:textSize="20dp"
            android:gravity="center"
            android:text="DATE"
            android:textColor="#000000"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow10"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
             android:background="@drawable/text_field_1"
            android:id="@+id/editText4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:textColor="#000000"
            android:gravity="center"
             android:textSize="16dp"
            android:hint="DATE FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="date"
            android:text="" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow11"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView6"
            android:textColor="#000000"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:textSize="20dp"
            android:layout_span="2"
            android:gravity="center"
            android:text="INVITE"
            android:textAppearance="?android:attr/textAppearanceLarge" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <EditText
            android:textColor="#000000"
             android:background="@drawable/text_field_1"
            android:id="@+id/editText5"
             android:textSize="16dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_span="2"
            android:gravity="center"
            android:hint="INVITE FILL"
            android:imeOptions="flagNoExtractUi"
            android:inputType="textCapWords" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow17"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button2"
            android:textColor="#000000"
            android:layout_weight="1"
            android:text="EDIT"

            android:visibility="visible" />

        <Button
            android:id="@+id/button1"
            android:layout_weight="1"
            android:text="UPDATE"
            android:textColor="#000000"
          />
    </TableRow>

</TableLayout> 
```

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:15:21.747

尝试使您的每个表格如下...

```
<TableRow
    android:id="@+id/tableRow01"
    android:layout_width="match_parent"
    android:layout_height="match_parent" > 
```

我猜`wrap_content`是导致这种收缩......

# android - 如何调用扩展基本活动的活动

> ID：15541401
> 
> 赞同：0
> 
> 时间：2013-03-21T07:06:39.640
> 
> 标签：android, subactivity

我正在写一个如下的活动课程

```
public class HeaderFooter extends Activity {
        public void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.headerfooter);
        }
 } 
```

我正在从 HeaderFooter 类中再扩展一个类

```
public class Home extends HeaderFooter 
{
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            ViewGroup vg = (ViewGroup) findViewById(R.id.lldata);
            ViewGroup.inflate(Home.this, R.layout.home, vg);
        }
} 
```

如何在 listitemclick 事件中从基类调用扩展类

如果我尝试使用以下代码

```
 Intent i=new Intent(HeaderFooter .this, Home .class);
                    startActivity(i); 
```

我收到异常告诉我如何从我的主类中调用扩展类。

异常详情：

```
03-21 07:17:44.173: E/AndroidRuntime(1522): FATAL EXCEPTION: main
03-21 07:17:44.173: E/AndroidRuntime(1522): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pcmac.parentconnect/com.pcmac.parentconnect.Grades}: java.lang.NullPointerException
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.os.Looper.loop(Looper.java:137)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at java.lang.reflect.Method.invokeNative(Native Method)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at java.lang.reflect.Method.invoke(Method.java:511)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at dalvik.system.NativeStart.main(Native Method)
03-21 07:17:44.173: E/AndroidRuntime(1522): Caused by: java.lang.NullPointerException
03-21 07:17:44.173: E/AndroidRuntime(1522):     at com.pcmac.parentconnect.LayerStack.onCreate(LayerStack.java:174)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at com.pcmac.parentconnect.Grades.onCreate(Grades.java:15)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.Activity.performCreate(Activity.java:5104)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-21 07:17:44.173: E/AndroidRuntime(1522):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-21 07:17:44.173: E/AndroidRuntime(1522):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:28:08.427

在这种情况下，您要使用 Intent 的另一个构造函数：

```
 Intent i = new Intent();
 i.setClassName(context, getTargetActivityClassName() /* child class override this method and return a string */); 
```

# python - Python字符串实习

> ID：15541404
> 
> 赞同：111
> 
> 时间：2013-03-21T07:07:07.667
> 
> 标签：python, string, python-internals, internals, string-interning

虽然这个问题在实践中没有任何实际用途，但我很好奇 Python 如何进行字符串实习。我注意到以下内容。

```
>>> "string" is "string"
True 
```

这正如我所料。

你也可以这样做。

```
>>> "strin"+"g" is "string"
True 
```

这很聪明！

但你不能这样做。

```
>>> s1 = "strin"
>>> s2 = "string"
>>> s1+"g" is s2
False 
```

为什么 Python 不会评估`s1+"g"`，并意识到它与相同`s2`并将其指向相同的地址？最后一个区块实际上发生了什么让它返回`False`？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-03-21T07:15:55.527

这是特定于实现的，但您的解释器可能正在实习编译时常量，而不是运行时表达式的结果。

下面使用 CPython 3.9.0+。

在第二个示例中，表达式`"strin"+"g"`在编译时计算，并替换为`"string"`. 这使得前两个示例的行为相同。

如果我们检查字节码，我们会发现它们完全相同：

```
 # s1 = "string"
  1           0 LOAD_CONST               0 ('string')
              2 STORE_NAME               0 (s1)

  # s2 = "strin" + "g"
  2           4 LOAD_CONST               0 ('string')
              6 STORE_NAME               1 (s2) 
```

此字节码是通过以下方式获得的（在上面之后打印了几行）：

```
import dis

source = 's1 = "string"\ns2 = "strin" + "g"'
code = compile(source, '', 'exec')
print(dis.dis(code)) 
```

第三个示例涉及运行时连接，其结果不会自动实习：

```
 # s3a = "strin"
  3           8 LOAD_CONST               1 ('strin')
             10 STORE_NAME               2 (s3a)

  # s3 = s3a + "g"
  4          12 LOAD_NAME                2 (s3a)
             14 LOAD_CONST               2 ('g')
             16 BINARY_ADD
             18 STORE_NAME               3 (s3)
             20 LOAD_CONST               3 (None)
             22 RETURN_VALUE 
```

这个字节码是通过以下方式获得的（它在上面打印了几行，这些行与上面给出的第一个字节码块完全相同）：

```
import dis

source = (
    's1 = "string"\n'
    's2 = "strin" + "g"\n'
    's3a = "strin"\n'
    's3 = s3a + "g"')
code = compile(source, '', 'exec')
print(dis.dis(code)) 
```

如果您要手动[`sys.intern()`](https://docs.python.org/3/library/sys.html?highlight=sys#sys.intern)获取第三个表达式的结果，您将获得与以前相同的对象：

```
>>> import sys
>>> s3a = "strin"
>>> s3 = s3a + "g"
>>> s3 is "string"
False
>>> sys.intern(s3) is "string"
True 
```

此外，Python 3.9 会为上面的最后两个语句打印警告：

> SyntaxWarning: "is" 带有文字。你的意思是“==”吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-10T05:56:00.677

**情况1**

```
>>> x = "123"  
>>> y = "123"  
>>> x == y  
True  
>>> x is y  
True  
>>> id(x)  
50986112  
>>> id(y)  
50986112 
```

**案例2**

```
>>> x = "12"
>>> y = "123"
>>> x = x + "3"
>>> x is y
False
>>> x == y
True 
```

现在，您的问题是为什么 id 在 case 1 和 case 2 中相同。
在 case 1 中，您已将字符串文字分配`"123"`给`x`and `y`。

由于字符串是不可变的，解释器只存储一次字符串文字并将所有变量指向同一个对象是有意义的。
因此，您会看到 id 相同。

在情况 2 中，您正在`x`使用串联进行修改。两者`x`和`y`具有相同的值，但不同的身份。
两者都指向内存中的不同对象。因此他们有不同的`id`和`is`运营商返回`False`

# asp.net - ASP.NET WCF 服务错误“调用线程必须是 STA，因为许多 UI 组件都需要这个。”？

> ID：15541405
> 
> 赞同：0
> 
> 时间：2013-03-21T07:07:08.960
> 
> 标签：asp.net, wcf, iis-7, sta

我有一些使用一些 .net 程序集的窗口工作流。我正在从这些工作流窗口访问一些硬件。我通过虚拟目录方法在 IIS 上发布的 XYZ 服务对这一切都有帮助。现在我想从我的 .Net Web 应用程序中使用这些工作流。我做了一个 wcf 服务和一个 web 客户端。我的 wcf 服务（根据 Web 客户端请求）加载工作流（成功）并尝试执行。

问题是当我调用加载的工作流的执行时，它给出了异常**“调用线程必须是 STA，因为许多 UI 组件都需要这个。”**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T21:29:48.027

如果您从不是单线程单元线程的线程中使用 WinForms/WPF 对象，您将收到此异常。为了使用 WCF 服务中的这些对象，您需要创建一个新线程，将该线程上的单元状态设置为`STA`，然后启动该线程。

我的简单示例采用一个字符串并根据 WPF TextBox 的 SpellCheck 功能对其进行检查：

```
public bool ValidatePassword(string password)
{
    bool isValid = false;

    if (string.IsNullOrEmpty(password) == false)
    {
        Thread t = new Thread(() =>
        {
            System.Windows.Controls.TextBox tbWPFTextBox = new System.Windows.Controls.TextBox();

            tbWPFTextBox.SpellCheck.IsEnabled = true;
            tbWPFTextBox.Text = password;
            tbWPFTextBox.GetNextSpellingErrorCharacterIndex(0, System.Windows.Documents.LogicalDirection.Forward);

            int spellingErrorIndex = tbWPFTextBox.GetNextSpellingErrorCharacterIndex(0, System.Windows.Documents.LogicalDirection.Forward);

            if (spellingErrorIndex == -1)
            {
                isValid = true;
            }
            else
            {
                isValid = false;
            }

        });

        t.SetApartmentState(ApartmentState.STA);
        t.Start();
        t.Join();
    }

    return isValid;
} 
```

您还可以参考这篇 SO 帖子： [How to make a WCF service STA (single-threaded)](https://stackoverflow.com/questions/49445/how-to-make-a-wcf-service-sta-single-threaded)

以及答案中的链接：http: [//www.netfxharmonics.com/2009/07/Accessing-WPF-Generated-Images-Via-WCF](http://www.netfxharmonics.com/2009/07/Accessing-WPF-Generated-Images-Via-WCF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T15:15:37.177

我找到了这个

[STA线程](https://blogs.msdn.microsoft.com/jfoscoding/2005/04/07/why-is-stathread-required/)

您也可以使用解决您的问题

```
[STAthread]
private void yourMethod()
{
//Call the execution here
} 
```

或者尝试这样做：

```
private void yourMethod()
{
     Thread t = new Thread(here delegate your method where you call the execution);
     t.SetApartmentState(ApartmentState.STA);
     t.Start();
} 
```

# python - 在 PyBrain 中禁用某些输出节点

> ID：15541407
> 
> 赞同：0
> 
> 时间：2013-03-21T07:07:15.207
> 
> 标签：python, neural-network, ocr, pybrain

我正在 PyBrain 中创建一个简单的前馈神经网络来分类字符（26 个小写字母、26 个大写字母和 10 个数字）

有两种不同的文件——一种只有大写字母和数字，另一种有小写字母、数字和大写字母。

我必须创建两个不同的网络吗？在处理第一个文档时，有什么方法可以禁用大写节点？如果以后有更多的文档（文档的图像）集成到项目中，也会有其他的组合。为他们创建新的网络似乎很乏味。

提前致谢

PS：有人知道关于 pyBrain 的任何非常（非常）好的教程吗？我是初学者，文档仅涉及非常简单的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:36:11.850

难怪每个单独的网络在其训练过的相应训练集上产生更好的性能。但是这些预测误差值具有误导性，因为在训练集上最小化误差是一个*不适定问题。*您的最终目标是最大化模型的泛化性能，使其在训练期间未见过的新数据上表现良好。想象一个网络，它只记住每个字符，因此功能更像一个哈希表。这样的网络将在训练数据上产生 0 错误，但在其他数据上表现不佳。

衡量泛化性能的一种方法是从可用数据中提取一小部分（例如 10%）并将其用作*测试集*。您在训练期间不使用此测试集，仅用于测量。

此外，您应该检查网络的拓扑。你使用多少个隐藏层和每个隐藏层有多少个神经元？确保您的拓扑足够大，以便它可以解决您的问题的复杂性。

还可以查看其他提高网络泛化性能的技术，例如*L1 正则化*（在每个训练步骤后减去一小部分固定的权重绝对值）、*L2 正则化*（在每次训练后减去一小部分权重step）或[Dropout](http://arxiv.org/pdf/1207.0580.pdf)（在训练期间随机关闭隐藏单元，并在训练完成后立即将权重向量减半）。此外，您应该考虑更有效的训练算法，例如*RPROP-*或*RMSProp*，而不是简单的反向传播（请参阅[Geoffrey Hinton 的神经网络课程](https://www.coursera.org/course/neuralnets)）。您还应该考虑包含书面数字 0-9 的 MNIST 数据集来测试您的设置（您应该很容易在测试集上实现少于 300 个错误分类）。

要回答有关如何省略某些输出神经元的原始问题，您可以创建自己的层模块。看一下 SoftmaxLayer，但在应用 softmax 激活函数之前，将所有属于您要省略的类的输出神经元设置为 0。您需要`outbuf`在`_forwardImplementation`. 如果您想在训练期间使用它，请确保将这些类的错误信号设置为零，然后再将错误反向传播到前一层（通过操纵`_backwardImplementation`）。这可能很有用，例如，如果您有不完整的数据并且不想丢弃仅包含一个 NaN 值的每个样本。但在你的情况下，你实际上不需要这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:09:27.927

你不需要两个网络，一个就足够了。您将需要 62 个标签（26 个上、26 个下和 10 个数字）和一个更大的数据集来训练这些标签。您可能可以使用这两个文档来构建数据集。

Prog Ng 在他的 coursera 课程中提供了一个非常好的手写识别教程（Lectures 3 and 4 at [http://www.ml-class.org](http://www.ml-class.org)）。我想这门课很快就要开始了，你会发现它在分类手写数字方面非常有用

# php - 如何在codeigniter控制器单语句中应用内部css

> ID：15541409
> 
> 赞同：0
> 
> 时间：2013-03-21T07:07:19.193
> 
> 标签：php, codeigniter, jquery

你好朋友我知道我们可以在视图端应用 css 但在某些情况下我必须显示公司可用性或不使用直接从控制器显示状态的 ajax 现在我想应用 css 我的代码与上面和这里相同'companyname' 是我的 id 和 html 输入标签的名称。

```
controller :
function get_companyname() {

        if (strlen($_POST['companyname']) >= 5) {

            $query = $this->company_model->verify_companyname($_POST['companyname']);
            if ($query > 0) {
                echo " Not Available";// i want to apply css here 

            } else {
                echo "Available"; // i want to apply css here

            }
        }
    } 

ajax code:

$('#companyname').keyup(function(){
    var companyname= $(this).val();
    if(companyname.length>=5){
         $('#companyname_status').text('searching....');
         if(companyname != ''){
             $.post('test',{ companyname:companyname},function(data){ //test redirects to controller function
                  $('#companyname_status').text(data);
             });
         }
         else{
             $('#companyname_status').text('');
         }
     }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:36:01.640

您可以将文本包装在内部或使用某个类进行标记。在 CSS 中定义类。否则，您可以在 span 标签本身中使用内联样式。例子：

```
 echo "<span class=test>Available</span>"; 
```

在您的 CSS 中：

```
 .test {
   color: red;
  } 
```

其他方式：

```
 echo "<span style=\"color:red;\">Available</span>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:37:27.823

像这样改变你的条件

```
if (strlen($_POST['companyname']) >= 5) {
    $query = $this->company_model->verify_companyname($_POST['companyname']);
    if ($query > 0) {
        echo 1;
    } else {
        echo 0;
    }
} 
```

发布请求

```
$.post('test',{ companyname:companyname ,function(data){
    if(data == 1){
        $('#companyname_status').addClass('newclass');  
    }
} 
```

# php - 用方括号解码 JSON

> ID：15541417
> 
> 赞同：3
> 
> 时间：2013-03-21T07:07:50.660
> 
> 标签：php, json, echo

我试图解码这个 json，但没有运气，这些方括号让我感到困惑任何帮助将不胜感激，这是我的 json

```
[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:13:34.557

试试这个：

```
var_export( json_decode( '[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}]' )  ); 
```

`json_decode`返回数组或`object`. 你可以用`var_export`not打印它`echo`

您可以访问值：

```
$items = json_decode('[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}]');

foreach( $items as $each ){
  echo $each->location[0]->building[0];
  echo '<hr />';
  echo $each->location[0]->name;
  echo '<hr />';
  echo $each->name; // default organization
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:18:38.997

您的 json 是有效的，可能是您在访问数组内的对象时遇到问题。

print_r 永远是了解数组结构的好朋友。试试这个

```
 $json = '[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}]';
$decoded = json_decode($json);

echo '<pre>';
print_r($decoded);

$location = $decoded[0]->location;
$building = $location[0]->building[0];
$name = $location[0]->name; 
```

位置 0 的对象将仅返回第一项，如果您的数组有多个值，则使用 foreach

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:14:42.647

似乎它是一个有效的 JSON。

```
$my_json = '[{"location":[{"building":["Default Building"],"name":"Default Location"}],"name":"Default Organization"}]';
$my_data = json_decode($my_json);
print_r($my_data); 
```

// 输出

```
Array
(
    [0] => stdClass Object
        (
            [location] => Array
                (
                    [0] => stdClass Object
                        (
                            [building] => Array
                                (
                                    [0] => Default Building
                                )

                            [name] => Default Location
                        )

                )

            [name] => Default Organization
        )

) 
```

# python - Python双变量搜索算法

> ID：15541418
> 
> 赞同：1
> 
> 时间：2013-03-21T07:07:56.840
> 
> 标签：python, search

我有一个算法：

*   接受两个输入 (x, y)，其中 x 和 y 是两个独立泊松分布中的“lambda”变量 ( [http://en.wikipedia.org/wiki/Poisson_distribution#Definition](http://en.wikipedia.org/wiki/Poisson_distribution#Definition) )
*   计算每个 x 和 y 的泊松向量，
*   计算两个泊松向量的矩阵乘积
*   返回 [sum(upper_quadrant), sum(lower_quadrant), sum(diagonal)]

所以：

```
import math, random

def poisson(m, n):
    p=math.exp(-m)
    r=[p]
    for i in range(1, n):
        p*=m/float(i)
        r.append(p)
    return r

def simulate(mx, my, n):
    r=[0.0 for i in range(3)]
    px, py = (poisson(mx, n), 
              poisson(my, n))
    for i in range(n):
        for j in range(n):
            if i > j:
                k=0
            elif i < j:
                k=1
            else:
                k=2
            r[k]+=px[i]*py[j]
    return r 
```

现在我需要求解 x 和 y，给定一组特定的输出。我已经破解了以下求解器函数：

```
def solve(p, n, generations, decay, tolerance):
    def rms_error(X, Y):
        return (sum([(x-y)**2 
                     for x, y in zip(X, Y)])/float(len(X)))**0.5
    def calc_error(x, y, n, target):
        guess=simulate(x, y, n)
        return rms_error(target, guess)    
    q=[0, 0]
    err=calc_error(math.exp(q[0]), math.exp(q[1]), n, p)
    bestq, besterr = q, err
    for i in range(generations):
        if besterr < tolerance:
            break
        q=list(bestq)
        if random.random() < 0.5:
            j=0
        else:
            j=1
        fac=((generations-i+1)/float(generations))**decay
        q[j]+=random.gauss(0, 1)*fac
        err=calc_error(math.exp(q[0]), math.exp(q[1]), n, p)
        if err < besterr:
            bestq, besterr = q, err
            # print (i, bestq, besterr)
    q, err = [math.exp(q) for q in bestq], besterr
    return (i, q, err) 
```

哪个有效，但似乎需要相对大量的尝试才能返回一个不太优化的响应：

```
if __name__=="__main__":
    p, n = [0.5, 0.2, 0.3], 10
    q, err = solve_match_odds(p, n, 
                              generations=1000,
                              decay=2,
                              tolerance=1e-5)
    print q
    print simulate_match_odds(q[0], q[1], n)
    print (i, err) 
```

和：

```
justin@justin-ThinkPad-X220:~/work/$ python solve.py 
[0.5, 0.2, 0.3]
[0.5000246335218251, 0.20006624338256798, 0.29990837191131686]
(999, 6.680993630511076e-05)
justin@justin-ThinkPad-X220:~/work/$ 
```

我不是 CS 专业的，我觉得我在这里错过了一系列搜索文献。有人可以建议一种更好的方法来搜索二维空间中的变量，例如这样吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:56:27.210

您可以使用[scipy.optimize](http://docs.scipy.org/doc/scipy/reference/optimize.html)库来解决这个问题：

```
import math, random

def poisson(m, n):
    p=math.exp(-m)
    r=[p]
    for i in range(1, n):
        p*=m/float(i)
        r.append(p)
    return r

def simulate(mx, my, n):
    r=[0.0 for i in range(3)]
    px, py = (poisson(mx, n), 
              poisson(my, n))
    for i in range(n):
        for j in range(n):
            if i > j:
                k=0
            elif i < j:
                k=1
            else:
                k=2
            r[k]+=px[i]*py[j]
    return r

from scipy import optimize

Target, N = [0.5, 0.2, 0.3], 10

def error(p, target, n):
    r = simulate(p[0], p[1], n)
    return np.sum(np.subtract(target, r)**2)

r = optimize.fmin(error, (0, 0), args=(Target, N))
print simulate(r[0], r[1], n) 
```

输出：

```
Optimization terminated successfully.
         Current function value: 0.000000
         Iterations: 67
         Function evaluations: 125
[0.49999812501285623, 0.20000418001288445, 0.2999969464616799] 
```

# jquery - IE 8 中 Jquery 的意外调用错误

> ID：15541419
> 
> 赞同：0
> 
> 时间：2013-03-21T07:07:58.347
> 
> 标签：jquery, wordpress, internet-explorer-8

网页问题：

[http://choiceofficeinstallations.com/office/projects/](http://choiceofficeinstallations.com/office/projects/)

它适用于所有浏览器，包括 chrome、safari、FF 和 Opera，但不适用于 IE 8....

IE 8 在 jquery.js 文件上给出了著名的 Unexpected Call 错误。我尝试更改代码的位置，添加 noconflict，还尝试了 TRY CATCH，但没有任何效果。

几个小时后，我无法理解它为什么这样做。

奇怪的是，网站主页上的滑块正在使用相同的 JQUERY，它在 IE 8 中运行良好，没有错误。所以我知道它不是 jquery.js，可能是其他导致错误的 custom.js 文件。

# python - Python：如何在 python 2.6 中创建一个包含文本和变量值的字符串

> ID：15541421
> 
> 赞同：3
> 
> 时间：2013-03-21T07:08:05.987
> 
> 标签：python, string

基本上我正在寻找将字符串和变量连接在一起。

在 Java 中：

```
String s = "HI my name is "+var_name+" I'm "+age+" years old"; 
```

在 PHP 中：

```
$s = "Hi my name is ".$var_name." I'm ".$age." years old"; 
```

我想在 Python 中做类似的事情。我知道 Python 3.0 及更高版本支持的格式函数，但我在 Python 2.6 版本上运行它有一个限制。我无法升级，所以请告诉我最好的方法。

PS - 我开始知道该格式也适用于 Python 2.6。如果您有任何其他方法，也请告诉我。知道更多总是好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:10:12.453

`.format` [也适用于 Python 2.6](http://docs.python.org/release/2.6/library/stdtypes.html#str.format)：

```
"Hi my name is {name}. I'm {age} years old.".format(name="John", age=30) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:12:26.877

做你想做的另一种方法：

```
# name is string and age is an integer
"Hi my name is %s. I'm %d years old" % (name, age)
"Hi my name is " + name + ". I'm " + str(age) + " years old"
"Hi my name is %(name)s. I'm %(age)d years old" % {'name':name, 'age':age} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:09:16.887

```
"Hi my name is {0}. I'm {1} years old".format(name, age) 
```

# c# - 如何测试不区分大小写的 StringA.Contains(StringB)？

> ID：15541427
> 
> 赞同：-2
> 
> 时间：2013-03-21T07:08:33.673
> 
> 标签：c#, string

如何测试子字符串是否包含在其他中，但不区分大小写？

`string1.Contains(string2)`不区分大小写。如果没有现有的方法，我想写一个优化的方法，有什么指针吗？

**编辑：**它也应该适用于全球化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:10:10.583

您可以在执行检查之前将两个字符串都转换为大写：

```
string1.ToUpperInvariant().Contains(string2.ToUpperInvariant()) 
```

或者，如果您想在定义不区分大小写时考虑当前文化：

```
string1.ToUpper().Contains(string2.ToUpper()) 
```

或者，您甚至可以通过调用`ToUpper`接受`CultureInfo`.

[代码分析警告 CA1308: Normalize strings to uppercase](http://msdn.microsoft.com/en-us/library/bb386042.aspx)中描述了您应该转换为大写而不是小写的原因：

> 字符串应规范化为大写。一小部分字符在转换为小写时不能往返。往返意味着将字符从一种语言环境转换到另一种以不同方式表示字符数据的语言环境，然后从转换后的字符中准确地检索出原始字符。

您可能想知道哪些“小部分字符”会受此影响，并且根据[Michael S. Kaplan](http://www.siao2.com/2004/12/02/273619.aspx)的说法，显然至少一些格鲁吉亚文字存在此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T07:10:48.277

使用[String.IndexOf 方法 (String, StringComparison)](http://msdn.microsoft.com/en-us/library/ms224425.aspx)

```
string str = "Some test String";
string str2 = "test";
if (str.IndexOf(str2, StringComparison.InvariantCultureIgnoreCase) > 0)
{
    //str contains str2
}
else
{
    //str does not contain str2
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T07:10:15.407

```
string1.ToUpper().Contains(string2.ToUpper()) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T07:12:29.283

你可以使用这个重载[`String.IndexOf Method (String, StringComparison)`](http://msdn.microsoft.com/en-us/library/ms224425.aspx)

为了`StringComparison.InvariantCultureIgnoreCase`

> 使用区分区域性的排序规则、不变的区域性比较字符串，并忽略要比较的字符串的大小写。

```
string string1 = "YOURSTRING";
bool containsornot = string1 .IndexOf("yourstring", StringComparison.InvariantCultureIgnoreCase) >= 0; 
```

这是一个[`DEMO`](http://ideone.com/FJ5RHD).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T07:11:30.913

你试过**string1.IndexOf(string2, StringComparison.InvariantCultureIgnoreCase)**

或使用**StringComparison.OrdinalIgnoreCase**

[点击这里获取更多信息](http://msdn.microsoft.com/en-IN/library/system.stringcomparison.aspx)

# javascript - 如何在这里正确使用 isNaN ？

> ID：15541434
> 
> 赞同：1
> 
> 时间：2013-03-21T07:09:12.630
> 
> 标签：javascript, forms, background, numbers

我有两个领域。第一个是名称字段，另一个是数字字段。我想检查数字字段是否为数字，如果不是，则将使用 select() 并且背景变为黄色而不是蓝色。不知何故，我没有得到我想要的。

```
window.onload=function()
{

idUser = document.getElementById("user");

document.getElementById("form").onsubmit=function()
{
    if(idUser.value == "")
    {
        alert("Username Required");
        idUser.focus();

        return false;
    }

birYear = document.getElementById("birthyear");

    if(isNaN(birYear))
    {
        birYear.select();
        alert("number");
        return false;
    }

}
} 
```

我`alert("number");`只是用来仔细检查它是否正确。我不需要警报，但不知何故，如果我同时输入数字或文本，它只是警报编号，这意味着我没有做我想做的事情。

在此先感谢帮助我的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:10:57.757

你必须获得价值：

```
birYear = document.getElementById("birthyear").value; 
```

`document.getElementById("birthyear")`给你控制权，在哪里`document.getElementById("birthyear").value`给出那个输入（或任何其他）控制的值..

并且`isNan()`是为了价值而不是控制....

**编辑 ：**

您可以通过更改样式来做到这一点：`document.getElementById("birthyear").style.background-color = "yellow";`

# c++ - 在 C++ 中从被调用函数调用函数名

> ID：15541436
> 
> 赞同：2
> 
> 时间：2013-03-21T07:09:24.053
> 
> 标签：c++, visual-c++

无论如何在不修改调用函数代码的情况下从c ++中的被调用函数中获取调用函数名称？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T07:11:38.457

不，没有。编译代码后，所有函数名和变量名都将丢失。

出于调试目的而保留的调试信息可能包含该信息。但它不是代码本身的一部分，无法通过标准 C++ 方法访问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T07:13:02.647

不，不在标准 C++ 中。

尽管大多数编译器都有特殊的私有函数来获取调用堆栈，但如果幸运的话，您可以将先前的函数地址类型转换为可调用的形式。但是**，如果**可能，那么您必须小心之前的调用是否是成员函数，因为成员函数需要一个额外的参数`this`。如果您没有对该对象的引用，则无法调用成员函数。当然，您还必须了解所有其他参数类型和位置。

简而言之，这*可能*是可能的，但并不容易，而且很可能很危险。

# visual-studio-extensions - 如何获取VS Server Explorer窗口DDEX选择的连接节点对象

> ID：15541438
> 
> 赞同：1
> 
> 时间：2013-03-21T07:09:27.390
> 
> 标签：visual-studio-extensions, vs-extensibility, vspackage

我在我的 VS 扩展的服务器资源管理器中为连接节点添加了一些选项。对于我添加的菜单选项之一，我需要获取非常选定的连接的连接字符串，因此我通过在 BeforeQueryStatus 事件和命令处理程序方法中添加一些代码来尝试此操作。但看起来我错过了一些东西，因为每次我想获得 DataViewHierarchyAccessor 的实例时，我总是得到一个空值。虽然如果我做同样的事情但在较低级别的节点中工作正常。我没有运气使用以下代码：

IVsDataExplorerNodeSelection nodeSelection = (IVsDataExplorerNodeSelection)Package.GetGlobalService(typeof(IVsDataExplorerNodeSelection));

IVsUIHierarchy 层次结构 = Marshal.GetTypedObjectForIUnknown(hierarchyPtr, typeof(IVsUIHierarchy)) 作为 IVsUIHierarchy；

有没有人为服务器资源管理器窗口的连接节点做过类似的事情？

更新：

看起来我在这方面取得了一些进展，我只是尝试了这个：

```
EnvDTE80.DTE2 _applicationObject = GetDTE2();
UIHierarchy uih = _applicationObject.ToolWindows.GetToolWindow("Server Explorer") as UIHierarchy;
Array selectedItems = (Array)uih.SelectedItems;
if (null != selectedItems)
    {
        foreach (UIHierarchyItem selItem in selectedItems)
        {
            SelectedItem prjItem = selItem.Object as EnvDTE.SelectedItem;
            string name = prjItem.Name;
        }
    } 
```

现在我的问题是是否有更好的类型来投射 selectedItems 列表？而不是 EnvDTE.SelectedItem。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T21:26:56.940

将我的问题标记为已回答，因为我发布的代码起到了作用。

```
EnvDTE80.DTE2 _applicationObject = GetDTE2();
UIHierarchy uih = _applicationObject.ToolWindows.GetToolWindow("Server Explorer") as UIHierarchy;
Array selectedItems = (Array)uih.SelectedItems;
if (null != selectedItems)
{
    foreach (UIHierarchyItem selItem in selectedItems)
    {
        SelectedItem prjItem = selItem.Object as EnvDTE.SelectedItem;
        string name = prjItem.Name;
    }
} 
```

# python - 如何将自定义列顺序（在分类上）应用于熊猫箱线图？

> ID：15541440
> 
> 赞同：16
> 
> 时间：2013-03-21T07:09:32.100
> 
> 标签：python, pandas, boxplot, categorical-data

编辑：这个问题早在 2013 年就出现了 pandas ~0.13，并被版本 0.15-0.18 之间的 boxplot 的直接支持所淘汰（根据[@Cireo 的最新回答](https://stackoverflow.com/a/44057503/202229)；自从有人问到这个问题后，pandas 也大大改进了对分类的支持。）

* * *

我可以`boxplot`在 pandas DataFrame 中获得一个薪水列...

```
train.boxplot(column='Salary', by='Category', sym='') 
```

...但是我不知道如何**定义“类别”列上使用的索引顺序 - 我想**根据另一个标准提供我自己的自定义顺序：

```
category_order_by_mean_salary = train.groupby('Category')['Salary'].mean().order().keys() 
```

如何将我的自定义列顺序应用于箱线图列？（除了丑陋的用前缀来强制排序的列名）

'Category' 是一个字符串（真的，应该是一个 categorical，但这又回到了 0.13，其中 categorical 是一个三等公民）列有 27 个不同的值：`['Accounting & Finance Jobs','Admin Jobs',...,'Travel Jobs']`. 所以它可以很容易地分解为`pd.Categorical.from_array()`

经检查，限制在 inside **`pandas.tools.plotting.py:boxplot()`**，它在不允许排序的情况下转换列对象：

*   [pandas.core.frame.py.boxplot()](https://github.com/pydata/pandas/blob/master/pandas/core/frame.py)是通过
*   **[pandas.tools.plotting.py:boxplot()](https://github.com/pydata/pandas/blob/master/pandas/tools/plotting.py)** 实例化...
*   [matplotlib.pyplot.py:boxplot()](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/pyplot.py)实例化 ...
*   [matplotlib.axes.py:boxplot()](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes.py)

我想我可以破解一个自定义版本的 pandas boxplot()，或者深入到对象的内部。并提交增强请求。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T15:34:31.083

如果没有工作示例，很难说如何做到这一点。我的第一个猜测是只添加一个包含您想要的订单的整数列。

一种简单的蛮力方法是一次添加一个箱线图。

```
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

df = pd.DataFrame(np.random.rand(37,4), columns=list('ABCD'))
columns_my_order = ['C', 'A', 'D', 'B']
fig, ax = plt.subplots()
for position, column in enumerate(columns_my_order):
    ax.boxplot(df[column], positions=[position])

ax.set_xticks(range(position+1))
ax.set_xticklabels(columns_my_order)
ax.set_xlim(xmin=-0.5)
plt.show() 
```

[![在此处输入图像描述](../Images/6ff0caf82de1998edcb287dd511b91ee.png)](https://i.stack.imgur.com/3Mwme.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-18T22:48:41.860

编辑：这是在版本 0.15-0.18 之间添加直接支持后的正确答案

* * *

**tl;博士**：对于最近的熊猫 - 使用[boxplot](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.boxplot.html#matplotlib.pyplot.boxplot)`positions`的参数。

添加一个单独的答案，这可能是另一个问题 - 感谢反馈。

我想在 groupby 中添加自定义列顺序，这给我带来了很多问题。最后，我不得不避免尝试`boxplot`从`groupby`对象中使用，而是自己遍历每个子图以提供明确的位置。

```
import matplotlib.pyplot as plt
import pandas as pd

df = pd.DataFrame()
df['GroupBy'] = ['g1', 'g2', 'g3', 'g4'] * 6
df['PlotBy'] = [chr(ord('A') + i) for i in xrange(24)]
df['SortBy'] = list(reversed(range(24)))
df['Data'] = [i * 10 for i in xrange(24)]

# Note that this has no effect on the boxplot
df = df.sort_values(['GroupBy', 'SortBy'])
for group, info in df.groupby('GroupBy'):
    print 'Group: %r\n%s\n' % (group, info)

# With the below, cannot use
#  - sort data beforehand (not preserved, can't access in groupby)
#  - categorical (not all present in every chart)
#  - positional (different lengths and sort orders per group)
# df.groupby('GroupBy').boxplot(layout=(1, 5), column=['Data'], by=['PlotBy'])

fig, axes = plt.subplots(1, df.GroupBy.nunique(), sharey=True)
for ax, (g, d) in zip(axes, df.groupby('GroupBy')):
    d.boxplot(column=['Data'], by=['PlotBy'], ax=ax, positions=d.index.values)
plt.show() 
```

在我的最终代码中，确定位置甚至更复杂一些，因为每个 sortby 值都有多个数据点，我最终不得不执行以下操作：

```
to_plot = data.sort_values([sort_col]).groupby(group_col)
for ax, (group, group_data) in zip(axes, to_plot):
    # Use existing sorting
    ordering = enumerate(group_data[sort_col].unique())
    positions = [ind for val, ind in sorted((v, i) for (i, v) in ordering)]
    ax = group_data.boxplot(column=[col], by=[plot_by], ax=ax, positions=positions) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-18T06:12:31.403

实际上，我遇到了同样的问题。我通过制作地图并重置xticklabels来解决它，代码如下：

```
df = pd.DataFrame({"A":["d","c","d","c",'d','c','a','c','a','c','a','c']})
df['val']=(np.random.rand(12))
df['B']=df['A'].replace({'d':'0','c':'1','a':'2'})
ax=df.boxplot(column='val',by='B')
ax.set_xticklabels(list('dca')) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-09T10:27:59.667

正如 Cireo 指出的那样：

使用新的**position=**属性：

`df.boxplot(column=['Data'], by=['PlotBy'], positions=df.index.values)`

*我知道这是以前精确的，但是对于像我这样的新手来说还不够清楚/总结*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-18T20:48:11.287

请注意，pandas 现在可以创建分类列。如果您不介意在图表中显示所有列，或者适当地修剪它们，您可以执行以下操作：

[http://pandas.pydata.org/pandas-docs/stable/categorical.html](http://pandas.pydata.org/pandas-docs/stable/categorical.html)

```
df['Category'] = df['Category'].astype('category', ordered=True) 
```

最近的熊猫似乎也允许`positions`从框架到轴一直通过。

*   [https://github.com/pandas-dev/pandas/blob/master/pandas/core/frame.py](https://github.com/pandas-dev/pandas/blob/master/pandas/core/frame.py)
*   [https://github.com/pandas-dev/pandas/blob/master/pandas/plotting/_core.py](https://github.com/pandas-dev/pandas/blob/master/pandas/plotting/_core.py)
*   [https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/pyplot.py](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/pyplot.py)
*   [https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes/_axes.py](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes/_axes.py)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-06T15:12:44.303

如果您对箱线图中的默认列顺序不满意，可以通过在箱线图函数中设置*column*参数将其更改为特定顺序。

检查以下两个示例：

```
np.random.seed(0)
df = pd.DataFrame(np.random.rand(37,4), columns=list('ABCD'))

##
plt.figure()
df.boxplot()
plt.title("default column order")

##
plt.figure()
df.boxplot(column=['C','A', 'D', 'B'])
plt.title("Specified column order") 
```

[![在此处输入图像描述](../Images/710b2b0e8e8d228ab7e2bdd1fec7ea81.png)](https://i.stack.imgur.com/XHlFG.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-23T18:24:35.233

这可能听起来有点傻，但许多情节允许你确定顺序。例如：

**图书馆和数据集**

```
import seaborn as sns
df = sns.load_dataset('iris') 
```

**具体顺序**

```
p1=sns.boxplot(x='species', y='sepal_length', data=df, order=["virginica", "versicolor", "setosa"])
sns.plt.show() 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-12T13:58:53.480

这可以通过应用分类顺序来解决。你可以自己决定排名。我将举一个星期几的例子。

*   提供到工作日的分类顺序

    ```
    #List categorical variables in correct order
    weekday = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday']
    #Assign the above list to category ranking
    wDays = pd.api.types.CategoricalDtype(ordered= True, categories=Weekday)
    #Apply this to the specific column in DataFrame
    df['Weekday'] = df['Weekday'].astype(wDays)
    # Then generate your plot
    plt.figure(figsize = [15, 10])
    sns.boxplot(data = flights_samp, x = 'Weekday', y = 'Y Axis Variable', color = colour) 
    ```

# android - 如果我在 doinbackground 中运行方法并且当它运行时我单击任何按钮然后我得到错误...如何解决？

> ID：15541446
> 
> 赞同：-5
> 
> 时间：2013-03-21T07:09:47.370
> 
> 标签：android, multithreading, android-asynctask

我想显示所有短信..所以我运行 loadIntialMessage() 来显示 20 条短信..

在这种方法上，我将运行线程背景以显示下一条短信。这是在 loadIntialmessage() 方法的列表滚动方法上运行的 AsyncTask 类。

```
 public void loadInitialMessages() {
    String[] columns = new String[] { "_id", "thread_id", "date", "body",
            "address", "type", "read" };
    String orderby;
    Log.d(TAG, "sory index" + sort_index);
    // sort_index =1;
    if (sort_index == 0) {
        orderby = "date DESC";
    } else {
        orderby = "date ASC";
    }
    for (int i = 0; i < ((IdSMS.size() > NO_OF_SMS_TO_LOAD) ? NO_OF_SMS_TO_LOAD
            : IdSMS.size()); i++) {

        Cursor c = getContentResolver().query(Uri.parse(SMS_URI_ALL),
                columns, " _id =" + IdSMS.get(i), null, null);
        while (c.moveToNext()) {
            String contactname = getContactDisplayNameByNumber((c
                    .getString(c.getColumnIndexOrThrow("address"))));
            // Log.d(TAG, "contact number without replace space" +
            // contactname);
            if (contactname.contains(" ")) {
                contactname.replace(" ", "");
                // Log.d(TAG, "contact number  replace space" +
                // contactname);
            }
            if (!NumberListContact.contains(contactname)) {

                NumberListContact.add(contactname);
                IdSMS.add(c.getString(c.getColumnIndexOrThrow("_id"))
                        .toString());
                ThreadSMS.add(c.getString(
                        c.getColumnIndexOrThrow("thread_id")).toString());
                SMSDate.add(c.getString(c.getColumnIndexOrThrow("date"))
                        .toString());
                MessageList.add(c
                        .getString(c.getColumnIndexOrThrow("body"))
                        .toString());
                NumberList.add(c.getString(
                        c.getColumnIndexOrThrow("address")).toString());
                SMSType.add(c.getString(c.getColumnIndexOrThrow("type"))
                        .toString());
                SMSRead.add(c.getString(c.getColumnIndexOrThrow("read"))
                        .toString());
                Log.d(TAG,
                        "read and unread"
                                + c.getString(
                                        c.getColumnIndexOrThrow("read"))
                                        .toString());
            }
            Log.d(TAG, "Counter Value " + counter);
            Log.d(TAG,
                    " thread_Id "
                            + c.getString(
                                    c.getColumnIndexOrThrow("thread_id"))
                                    .toString());

            counter++;
        }
        c.close();
    }

    // refreshAdapter();
    inboxAdaptor = new inboxAdaptor(getApplicationContext(), IdSMS,
            ThreadSMS, NumberListContact, NumberList, MessageList, SMSDate,
            SMSType, SMSRead);

    lvmsg.setAdapter(inboxAdaptor);

    inboxAdaptor.notifyDataSetChanged();

    lvmsg.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub

            if (MessageList.size()
                    - (int) (firstVisibleItem + visibleItemCount) <= 1) {
                Log.d("onScroll", " firstVisibleItem " + firstVisibleItem);
                Log.d("onScroll", " visibleItemCount " + visibleItemCount);
                Log.d("onScroll", " totalItemCount " + totalItemCount);

                Log.d(TAG,
                        "Adding more data to listview ---------------------->>");

                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        // TODO Auto-generated method stub
                        LoadNewMessage myTask = new LoadNewMessage(
                                MainActivity.this);
                        myTask.execute();
                    }
                });
                // if(!isLoadingNewMessages){
                // mLoadNewMessage.post(new Runnable() {
                //
                // @Override
                // public void run() {
                // // TODO Auto-generated method stub
                // isLoadingNewMessages=true;
                // addToListview();
                //
                // }
                // });
                // }

            }
        }
    });

}

class LoadNewMessage extends AsyncTask<Void, Void, Void> {

    ProgressDialog pd;
    Context context;

    public LoadNewMessage(Context context) {
        this.context = context;
        pd = new ProgressDialog(context);
    }

    @Override
    protected void onPreExecute() {

    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        try {
            addToListview();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void... params) {

        inboxAdaptor.notifyDataSetChanged();

    }

} 
```

`

在 addToListview() 我显示下一条短信..

```
public void addToListview() {
    String[] columns = new String[] { "_id", "thread_id", "date", "body",
            "address", "type", "read" };
    String orderby = "date DESC limit 10";
    if (sort_index == 1) {
        orderby = "date ASC";
    } else {
        orderby = "date DESC";
    }
    // Log.d(TAG, " Adding new values Counter "+counter);

    for (int i = 0; i < (((IdSMS.size() - counter) > NO_OF_SMS_TO_LOAD) ? NO_OF_SMS_TO_LOAD
            : (IdSMS.size() - counter)); i++) {

        Cursor c = getContentResolver().query(Uri.parse(SMS_URI_ALL),
                columns, " _id =" + IdSMS.get(counter), null, null);
        // Log.d(TAG, " Adding new values cursor count "+c.getCount());
        while (c.moveToNext()) {
            String contactname = getContactDisplayNameByNumber((c
                    .getString(c.getColumnIndexOrThrow("address"))));

            if (!NumberListContact.contains(contactname)) {

                NumberListContact.add(contactname);
                IdSMS.add(c.getString(c.getColumnIndexOrThrow("_id"))
                        .toString());
                ThreadSMS.add(c.getString(
                        c.getColumnIndexOrThrow("thread_id")).toString());
                SMSDate.add(c.getString(c.getColumnIndexOrThrow("date"))
                        .toString());
                MessageList.add(c
                        .getString(c.getColumnIndexOrThrow("body"))
                        .toString());
                NumberList.add(c.getString(
                        c.getColumnIndexOrThrow("address")).toString());
                SMSType.add(c.getString(c.getColumnIndexOrThrow("type"))
                        .toString());
                SMSRead.add(c.getString(c.getColumnIndexOrThrow("read"))
                        .toString());
            }

        }
        c.close();
        counter++;
    }

    isLoadingNewMessages = false;
    // refreshAdapter();
} 
```

但是当我在消息加载时单击任何其他按钮时出现错误..

```
 03-15 13:01:35.334: W/System.err(283): java.lang.NullPointerException
   03-15 13:01:35.334: W/System.err(283):   at com.example.smsmanager.MainActivity.addToListview(MainActivity.java:325)
   03-15 13:01:35.344: W/System.err(283):   at com.example.smsmanager.MainActivity$LoadNewMessage.doInBackground(MainActivity.java:139)
   03-15 13:01:35.344: W/System.err(283):   at com.example.smsmanager.MainActivity$LoadNewMessage.doInBackground(MainActivity.java:1)
   03-15 13:01:35.344: W/System.err(283):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
   03-15 13:01:35.344: W/System.err(283):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
   03-15 13:01:35.344: W/System.err(283):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
   03-15 13:01:35.344: W/System.err(283):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
   03-15 13:01:35.344: W/System.err(283):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
   03-15 13:01:35.344: W/System.err(283):   at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:18:52.510

这是我的猜测。除非您发布代码，否则不能非常具体：

在 doInBackground 方法中，它调用 MainActivity.addToListview 方法，该方法修改了 UI 并且某些对象尚未准备好。空对象可能取决于您的异步任务完成还是您忘记设置它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:25:35.567

这是我的猜测：您正在尝试从不在 UI 线程上的 AsyncTask 更新 UI。您要做的就是向 Handler 发送消息并让 Handler 更新 UI。

将此添加到您的类变量中：

```
private Handler handler = new Handler(); 
```

*`Message`注意：您可以通过对象或类变量发送各种数据*。

将此添加到您的 doInBackground() 函数中：

```
handler.sendEmptyMessage(0); 
```

使用添加到您的类的函数更新您的 UI，如下所示：

```
private final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        // Do something to the UI here.
    }
}; 
```

# spring - 春天@ExceptionHandler

> ID：15541454
> 
> 赞同：0
> 
> 时间：2013-03-21T07:10:03.920
> 
> 标签：spring, exception, annotations

所有，我的控制器：

```
@RequestMapping(method = RequestMethod.GET, value = "/search")
@ResponseBody
public CemeteryRestResponse<List<String>> search(
        @RequestParam("location") Location location) {
    CemeteryRestResponse<List<String>> restResponse = new CemeteryRestResponse<List<String>>();
    restResponse.setBody(new ArrayList<String>());
    Long a = Long.valueOf("aaaa");
    try {
        for (PublicCemetery cemetery : cemeteryDao.findByLocation(location)) {
            restResponse.getBody().add(cemetery.getNameCn());
        }
    } catch (Exception e) {
        try {
            throw new SQLException();
        } catch (SQLException e1) {
            e1.printStackTrace();
        }
    }
    restResponse.setSuccess(true);
    return restResponse;
} 
```

我在同一个控制器中的执行句柄方法：

```
@ExceptionHandler(value = { Exception.class, SQLException.class,
        IllegalArgumentException.class, NumberFormatException.class })
@ResponseBody
public CemeteryRestResponse<String> exceptionHandler(Exception e,
        SQLException e2, IllegalArgumentException e3,
        NumberFormatException e4) {
    CemeteryRestResponse<String> restResponse = new CemeteryRestResponse<String>();
    restResponse.setFailureMessageCn("data base exception");

    restResponse.setSuccess(false);
    return restResponse;
} 
```

当搜索方法 trhow SQLException 和 NumberFormatException @ExceptionHandler 无法处理时。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:15:46.133

你捕获`Exception`（所有异常），然后抛出一个新的`SQLException`. 然后您立即捕获该 SQLException 并打印其堆栈跟踪。搜索方法**永远不会**抛出任何异常。

删除 try-catch 周围

```
throw new SQLException(); 
```

它应该可以工作。但是请重新考虑您的异常处理（不要捕获所有异常然后抛出另一种类型的异常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:17:01.580

请求处理程序方法没有抛出异常，您自己处理所有异常。

只有当请求处理程序向 Spring 框架抛出异常时，异常处理程序才会生效。

```
@RequestMapping(method = RequestMethod.GET, value = "/search")
@ResponseBody
public CemeteryRestResponse<List<String>> search(
        @RequestParam("location") Location location) throws Exception{
    CemeteryRestResponse<List<String>> restResponse = new CemeteryRestResponse<List<String>>();
    restResponse.setBody(new ArrayList<String>());
    Long a = Long.valueOf("aaaa");
    for (PublicCemetery cemetery : cemeteryDao.findByLocation(location)) {
        restResponse.getBody().add(cemetery.getNameCn());
    }
    restResponse.setSuccess(true);
    return restResponse;
} 
```

# r - 混合数据帧与向量的乘法

> ID：15541458
> 
> 赞同：3
> 
> 时间：2013-03-21T07:10:08.813
> 
> 标签：r, vector, dataframe

R初学者在这里：在搜索了一天多的简单答案之后，决定在这里发布我的第一个问题：

我想将数据框中的数字列与数字向量相乘（或除以）。数据框不仅包含数字，还包含字符串。在我的搜索中，我了解了`t(t(mydf) * myvec))`、`sweep()`、和替换操作，但我无法找出一个聪明的函数来允许我指定哪些列被相乘而无需对数据框进行子集化。`scale()``*apply()`

如何将 test.dat 的最后两列中的每一行与 myvec 相乘/除以，并返回一个包含结果以及未更改列的数据帧>（对于数字，我可以在 myvec 中添加一个“1”）。但是我该如何处理这些名字呢？先感谢您！！

正确的例子：

> mydf <-as.data.frame(rbind(c("chrX", 5624624, 5631869, "Nudt11", 2, "+", 1, 7245, 1.332, 9651.3), c("chrX", 5977262, 6210835, "Shroom4", 9, "+", 1, 233573, 1.357, 316914)))
> 
> colnames（mydf）<-c（“chr”，“start”，“end”，“name”，“score”，“strand”，“score2”，“width”，“value”，“value2”）
> 
> myvec<-c(10, 0.0001)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:33:00.470

如前所述，您没有`data.frame`在您的示例中处理。让我们`data.frame`首先制作您的数据：

```
# bind the numerical values as variables (columns) of data.frame
mydf <-as.data.frame(cbind(
 c(1, 10, 3.6, 4.5, 5.4, 99), 
 c(12, 18, 9, 8.1, 7.2, 84)))

# give names to columns: 
names(mydf)<-c("somename","othername")

#multiply the wanted rows with myvec:

mydf[4:6,]<-myvec*mydf[4:6,]
mydf
  somename othername
1  1.00000  12.00000
2 10.00000  18.00000
3  3.60000   9.00000
4 40.50000  72.90000
5 54.00000  72.00000
6 16.50033  14.00028 
```

编辑：同样，您的示例数据不是 data.frame，但是在将其调整为适当的数据框后，数值实际上是数字而不是因子，这仍然有效：

```
mydf[,9:10]<-myvec*mydf[,9:10]
mydf
   chr   start     end    name score strand score2  width     value     value2
1 chrX 5624624 5631869  Nudt11     2      +      1   7245 1.332e+01 96513.0000
2 chrX 5977262 6210835 Shroom4     9      +      1 233573 1.357e-04    31.6914 
```

所以你可以通过使用方括号来选择你想要的任何列，只要确保长度`myvec`等于列数，这样你就不会因为回收而得到任何令人惊讶的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:26:57.580

第一步是将您的字符矩阵`mydf`（它不是数据框）更改为具有命名列的数据框：

```
mydf2 <- setNames(as.data.frame("mode<-"(t(mydf[ , -1]), "numeric")), mydf[ , 1])

> mydf2
  somename othername
1      1.0      12.0
2     10.0      18.0
3      3.6       9.0
4      4.5       8.1
5      5.4       7.2
6     99.0      84.0 
```

然后很容易应用乘法`myvec`：

```
res <- lapply(mydf2[4:6, ], "*", myvec) 
```

用新值替换这些值：

```
mydf2[4:6, ] <- res

> mydf2
  somename othername
1  1.00000  12.00000
2 10.00000  18.00000
3  3.60000   9.00000
4 40.50000  72.90000
5 54.00000  72.00000
6 16.50033  14.00028 
```

**更新**

根据您的编辑，这是一种方法：

```
last2 <- tail(seq_along(mydf), 2) # find the index of the last two columns

# transform columns from factor to numeric and multiplicate with vector
res <- lapply(lapply(mydf[last2], 
                     function(x) as.numeric(as.character(x))), "*", myvec)

mydf[last2] <- res # replace values

> mydf
   chr   start     end    name score strand score2  width     value     value2
1 chrX 5624624 5631869  Nudt11     2      +      1   7245 1.332e+01 96513.0000
2 chrX 5977262 6210835 Shroom4     9      +      1 233573 1.357e-04    31.6914 
```

# ruby-on-rails - mongodb导入导出数据库

> ID：15541462
> 
> 赞同：0
> 
> 时间：2013-03-21T07:10:13.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我想将 mogodb 数据库从一台机器导入并还原到另一台机器

我用过

```
sudo mongodump --collection collection --db ppm_v2_development 
```

但它得到空文件夹转储/ppm_v2_development/

[这](http://docs.mongodb.org/manual/reference/mongoexport/) 也对我没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:14:44.883

检查此幻灯片[在 mongo db linux 文件中备份、恢复和修复数据库](http://www.slideshare.net/yourcanjou/backup-restore-and-repair-database-in-mongo-db-linux-file#btnNext)

# javascript - Chrome 控制台 POST jquery 404（未找到）：jquery.min.js:2

> ID：15541470
> 
> 赞同：0
> 
> 时间：2013-03-21T07:10:37.417
> 
> 标签：javascript, jquery, codeigniter, post

级别：新手（JavaScript、jQuery、CodeIgniter）

我创建了一个更改密码的功能，然后我使用 chrome 浏览器在 localhost 中运行它。当我想从我的 JavaScript 调用 PHP 函数时，我遇到了麻烦。Chrome 控制台说该页面未找到，该文档的链接是 jquery.min.js:2

我不知道我应该做什么，因为我是 jQuery 新手。这是我在 pengaturan.html 中的 html

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" type="text/css" href="css/style1.css" />

<script src="jq/jquery.mobile-1.2.0.min.js"></script>
<script src="jq/jquery-1.9.1.min.js"></script>
<script src="jq/jquery-1.8.2.min.js"></script>
<script src="date/js/jquery.min.js"></script>
<script src="date/js/kendo.web.min.js"></script>
<script src="date/js/console.js"></script>

<script src="jq/proses/set_ip.js"></script>
<script src="jq/proses/newpass/newpass.js"></script>

<script src="jq/proses/script.js"></script>

<title>edc - e diabet consult</title>
</head>
<body>
<h1 align="center">Pengaturan</h1>

<p align="left" class="navigation">

<a href="settings.html" class="back">
<img src="ico/kembali.png">
</a>

</p>

<form id="form_pengaturan" action="post">

<p align="center">

<strong>Password lama:</strong><br />
<input type="password" name="pass" id="pass"/><br />

<strong>Password baru:</strong><br />
<input type="password" name="newpass" id="newpass"/><br />

<strong>Konfirmasi password baru:</strong><br />
<input type="password" name="confnewpass" id="confnewpass"/><br /><br/>

<input type="button" value="Simpan" onclick="cek()" id="simpan" class="button"/>
<input type="reset" value="Reset" class="button"/>

</p>
</form>
</body>
</html> 
```

这是我在 newpass.js 中的 javascript

```
/*Don't forget to add set_ip.js and jquery before you use this script in HTML page to make it work*/
var urlini = seturl();
var part= 'newpass/';

$(document).ready(function() {
currentYear = (new Date).getFullYear();
$("#tgllahir_inp").kendoDatePicker({
                // defines the start view
                start: "year",
        min: new Date(currentYear-50,'0','01'),
        max: new Date(currentYear-14,'0','01'),
                    // defines when the calendar should return date
                    depth: "day",

                    // display month and year in the input
                    format: "yyyy-MM-dd"
                });
});

function cek() {
    pass =  /^([-a-z0-9_-])+$/i.test($("#pass").val());     
    newpass =  /^([-a-z0-9_-])+$/i.test($("#newpass").val());
    confnewpass =  /^([-a-z0-9_-])+$/i.test($("#confnewpass").val());

    var form_reg =  $("input").val();
    if(form_reg == "")
    {
        alert("Semua data harus diisi.");       
    }
    else if($("#newpass, #confnewpass").val().length  == 0 || $("#newpass, #confnewpass").val().length  < 5 || $("#newpass, #confnewpass").val().length > 15)
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda lebih dari 5 dan kurang dari 15 karakter.");        
    }
    else if( !pass || !newpass || !confnewpass || $("#newpass").val() != $("#confnewpass").val())
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda sesuai.");      
    }
    else
    {
        $.post(urlini+part+'cek',
            $('#form_pengaturan').serialize(),function(msg){
            if(msg == '1')
            {               
                alert("Data berhasil disimpan!");
                window.location="index.html";
            }
            else if(msg == '0')
            {
                alert("Password yang anda masukkan tidak benar!");
            }
        });
    }   
} 
```

这是我在 newpass.php 中的 php 控制器（服务器端）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->model('newpass_model','npmod');
    }

    function cek()
{               
    $q = $this->npmod->pasien_pass();
    echo $q;
}
}
?> 
```

这是我在 newpass_model.php 中的 php 模型（服务器端）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass_model extends CI_Model {

    public function pasien_pass(){

    $id = $this->session->userdata('id');
    $pass = md5($this->input->post("pass"));

    $query = $this->db->where("iduser",$id)->get("user");

    if( $query->num_rows() == 1 ) {
        $row    = $query->row();
        $oldpass= $row->password;

        if($pass==$oldpass)
        {
            $newpass = md5($this->input->post("newpass"));
            $confnewpass = base64_encode($this->input->post("confnewpass"));

            $data = array(
                'password' => $newpass,
                'passbit_user' => $confnewpass            
            );
            $this->db->where('iduser',$id);
            $this->db->update('user',$data);    
            return"1";
        }
        else
        {
            return "0";
        }
    } else {
        return "0";
    }    
    }
}
?> 
```

当我运行它时，Chrome 控制台说该页面未找到并且该文档的链接是 jquery.min.js:2 你知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T01:30:18.407

找不到错误 404 是因为我忘记更改 php 文件的文件名。事实是我从函数工作的其他文件中复制了那些 php 文件。

好吧，在那之后我改变了我所有的 php 代码，一切都很好。

谢谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:20:20.933

按此顺序尝试：

```
<script src="jq/jquery-1.9.1.min.js"></script>
<script src="jq/jquery.mobile-1.2.0.min.js"></script>
<script src="date/js/kendo.web.min.js"></script>
<script src="date/js/console.js"></script>

<script src="jq/proses/set_ip.js"></script>
<script src="jq/proses/newpass/newpass.js"></script>

<script src="jq/proses/script.js"></script> 
```

您可以在使用最新的 jQuery 1.9.1 时删除这些实例。

```
<script src="jq/jquery-1.8.2.min.js"></script>
<script src="date/js/jquery.min.js"></script> 
```

移动 jQuery 应该在 jQuery 库之后。

相反，您可以尝试 CDN 托管库。

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

# javascript - 使用下划线遍历 Javascript 中的多嵌套对象

> ID：15541471
> 
> 赞同：0
> 
> 时间：2013-03-21T07:10:40.410
> 
> 标签：javascript, backbone.js, underscore.js

我正在使用主干和下划线。我的对象看起来像：

```
TopObject: {
name: '',
middleObjects: []
}

MiddleObject: {
name: '',
bottomObjects: []
}

BottomObject: {
name:'',
someOtherProp: ''
} 
```

所以基本上如果你有一个topObject，它将有多个中间对象作为它的属性之一，而middleObjects 将有多个bottomObjects 作为它的属性之一。

我不确定如何在表格中显示这些字段。所以我用下划线走了这么远。

```
var someTopObject = new TopObject(); // that has real data
_.each(someTopObject.get('middleObjects'), function (midObjs) {
  // do something with MidObj.name
  // not sure how to get midObjs.bottomObjects
}); 
```

现在我知道bottomObjects只能有2个项目。所以我想我可以硬编码在bottomObjects中获取第一个和第二个对象，但我不确定是否有更优雅的方式。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:54:42.790

嵌套循环？

```
_.each(someTopObject.get('middleObjects'), function (midObj) {
    _.each(midObj.get('bottomObjects'), function (bottomObj) {
        // do stuff
    });
}); 
```

# libevent - libevent 无法读取打开的套接字描述符

> ID：15541472
> 
> 赞同：0
> 
> 时间：2013-03-21T07:10:43.123
> 
> 标签：libevent

最近，我有一个使用 libevent 的小型套接字服务器程序。

总之，它完成以下工作。

```
void read_function(int fd, short event, void* arg) {
    printf("callback is called!\n");

    // read from fd, and send a reply to fd!
}

void accept_thread_function() {
    int fd = accept(...);
    struct event* ev_read = new struct event();
    memset(ev_read, 0, sizeof(struct event));
    event_set(ev_read, fd, EV_READ|EV_PERSIST,read_function,ev_read);
    event_add(ev_read, 0);
}

int main() {
    event_init();
    THREAD a = start 'accept_thread_function' as a thread;
    event_dispatch();
    THREAD::join(a);
} 
```

问题是，read_function 永远不会被调用。

传入连接被正确接受。（叹）

我正在等待您对这个问题的友好评论。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:24:53.710

首先，看一下 Nick Mathewson 写的关于 libevent 的（免费）精彩书籍：

[http://www.wangafu.net/~nickm/libevent-book/Ref1_libsetup.html#_locks_and_threading](http://www.wangafu.net/~nickm/libevent-book/Ref1_libsetup.html#_locks_and_threading)

然后，您需要确保在调用 event_dispatch()*之前添加了事件。*

# javascript - 带有xmldata的数组中jqgrid的所有数据

> ID：15541477
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:09.833
> 
> 标签：javascript, jquery, jqgrid

如何`jqgrid`使用“”获取一个数组中的所有数据`xmldata`？我知道如何使用“ `local`”数据获取数据，所以我尝试了

```
var localGridData = $("#list").jqGrid('getGridParam','data'); 
```

但它不工作`xmldata`。

那么任何人都可以建议我，如何使用`xmldata`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:07:25.020

如果您使用`datatype: "xml"`或`datatype: "json"` *不*使用选项`loadonce: true`，则不会填充内部参数`data`并且您不能使用`$("#list").jqGrid('getGridParam','data')`. 在这种情况下，您可以在`getRowData`没有附加参数的情况下使用。

# wpf - WPF Datagrid 样式选定的行

> ID：15541480
> 
> 赞同：1
> 
> 时间：2013-03-21T07:11:18.787
> 
> 标签：wpf, xaml, visual-studio-2012, wpfdatagrid, expression-blend

我有一个 wpf 4.5 应用程序，它在用户控件中有一个数据网格。我在 Blend 中为数据网格设计了样式，但是当我将样式复制到我的 VS 2012 项目中时，它无法正常工作。

这是 Blend 中的基本样式：

![混合 DataGrid 样式](../Images/ae527a0d9f1ee948d36fbad4ca171ecf.png)

请注意所选行中文本的颜色（绿色）和正在编辑的文本框周围的填充

现在这是 Visual Studio 2012 的相同样式：

![VS 数据网格样式](../Images/dff1d8b1966f82e4abb58436c77aaaff.png)

因此，所选行中突出显示的文本与背景颜色相同（使其不可见），我无法更改文本框边框颜色或边距以匹配混合样式。

这是单元格样式：

```
<Style TargetType="{x:Type DataGridCell}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Border x:Name="border"
                        BorderBrush="Transparent"
                        BorderThickness="1"
                        Background="Transparent"
                        SnapsToDevicePixels="True"
                        Margin="15,10,15,10">
                    <ContentPresenter Name="CellContent" SnapsToDevicePixels="True" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Foreground" Value="Green"/>
                    </Trigger>
                    <Trigger Property="IsKeyboardFocusWithin" Value="True">
                        <Setter Property="BorderBrush" TargetName="border" Value="#FFD8D8D8"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>                
        </Setter.Value>
    </Setter>
</Style> 
```

因此您可以看到将绿色标记为前景色的触发器在混合中有效，但在视觉工作室中无效。我认为这是一种系统颜色，它以某种方式覆盖了触发器，但我不确定如何追踪它。

有人可以通过设置选定的行文本颜色和文本框边框/边距来帮助我纠正这个样式问题。

[这是整个数据网格样式资源字典的链接](https://skydrive.live.com/redir?resid=6B515365F8F581A1!306&authkey=!AJwm6DfDqhkgRxI)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T05:22:57.950

所以原来是DataGridCell风格的冲突。我对所有数据网格单元格应用了没有键名的 DataGridCell 样式。然后我根据上面提到的创建了另一种单元格样式但是由于某种原因，如果我尝试将此单元格样式应用于数据网格中的特定列声明，则样式会中断。所以我不得不删除“基于样式”并找到另一种方法来进行特定于列的格式化。

编辑：在此处查看样式，太长无法发布[DataGridStyle](http://sdrv.ms/ZPNbZL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:07:03.923

嗨，我尝试了您的样式，在我的机器上，前景颜色更改为绿色......但如果它在您的 DevEnvironment 中不起作用，您可以尝试覆盖所选行文本的 SystemColor！

将此添加到您的样式中并删除触发器

```
<SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Green" /> 
```

# ruby-on-rails - 使用angularjs在rails中获取自定义操作的结果

> ID：15541483
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:33.050
> 
> 标签：ruby-on-rails, angularjs

我正在使用带有 angularjs 的 rails 3.2，并且我正在尝试了解如何使用 angular 的 $resource。

我希望资源从非默认操作返回结果（因此不获取、保存、查询、删除和删除）

所以在我的帖子控制器中我有

```
def home
  @recent_posts = Post.recent_posts
  respond_to do |format|
    format.html
    format.json
  end
end 
```

然后在我的 js 文件中

```
app.factory "Post", ["$resource", ($resource) ->
  $resource("/post/:id/:action", {id: "@id"}, {home: {method: "GET", isArray: true}})
]

@HomeCtrl = ["$scope", "Post", ($scope, Post) ->
  $scope.recent_posts = Post.home()
] 
```

在我看来，如果我尝试做类似`ng-repeat="post in recent_posts"`的事情，它不会返回任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:21:38.680

您忘记指定`action`参数：

```
app.factory "Post", ["$resource", ($resource) ->
  $resource "/post/:id/:action",
    id: "@id"
  ,
    home:
      method: "GET"
      params:
        action: "home"

      isArray: true

] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:24:11.960

感谢您的建议，他们帮助我找到了最终有效的方法。我只是像这样更改了家庭控制器：

```
@HomeCtrl = ["$scope", "Post", ($scope, Post) ->
  $scope.recent_posts = Post.home({action:'home'});
] 
```

# php - 左连接可选表

> ID：15541484
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:34.253
> 
> 标签：php, mysql, sql, wordpress

我尝试选择表`pep_posts`然后左连接`pep_postmeta`但表`pep_postmeta`是可选的意味着如果表中没有数据`pep_postmeta`，结果仍然可以显示。

下面是我的查询，但如果表有数据，这个查询只显示数据`pep_postmeta`，这不是我想要的。

```
select p.*, pm.* 
from `pep_posts` p 
left join `pep_postmeta` pm 
  on pm.post_id=p.ID 
where p.post_parent='".$current_page_id."' and
     p.post_status='publish' and pm.meta_key='book_image' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:14:53.523

在左连接中，如果您在`WHERE`子句中引用可选表，它仍将仅过滤掉该表中具有值的行。您需要做的是将条件移至不会删除行`pm`的`ON`子句，只需将值设置为`NULL`.

```
SELECT p.*, pm.* 
FROM `pep_posts` p 
LEFT JOIN `pep_postmeta` pm 
  ON pm.post_id=p.ID and pm.meta_key='book_image' 
WHERE p.post_parent='".$current_page_id."' AND
     p.post_status='publish' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:17:37.127

您的 WHERE 条件中的问题

```
and pm.meta_key='book_image' 
```

如果 pep_postmeta 没有数据，则选择中的 pm.meta_key 值将为 NULL 因此，您应该删除此条件或将其重写为类似的内容

```
and (pm.meta_key='book_image' or pm.meta_key IS NULL) 
```

# symfony - Symfony 从 2.1 更新到 2.2 作曲家错误

> ID：15541486
> 
> 赞同：7
> 
> 时间：2013-03-21T07:11:39.927
> 
> 标签：symfony, composer-php, symfony-2.2

我正在尝试将我的项目从 symfony 2.1 更新到 2.2 。我尝试逐包更新它。当我输入时`composer.phar update symfony/symfony`，我收到以下错误：

```
 Problem 1
- Conclusion: don't install symfony/symfony 2.2.x-dev
- Conclusion: don't install symfony/symfony v2.2.0
- Conclusion: don't install symfony/symfony v2.2.0-RC3
- Conclusion: don't install symfony/symfony v2.2.0-RC2
- Installation request for symfony/monolog-bundle == 2.1.9999999.9999999-dev -> satisfiable by symfony/monolog-bundle 2.1.x-dev.
- Conclusion: don't install symfony/symfony v2.2.0-RC1
- Conclusion: don't install symfony/symfony v2.2.0-BETA2
- doctrine/doctrine-bundle v1.2.0-beta1 requires symfony/framework-bundle >=2.2.0-beta2,<2.3-dev -> satisfiable by symfony/symfony 2.2.x-dev, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3, symfony/framework-bundle 2.2.x-dev, symfony/framework-bundle v2.2.0, symfony/framework-bundle v2.2.0-BETA2, symfony/framework-bundle v2.2.0-RC1, symfony/framework-bundle v2.2.0-RC2, symfony/framework-bundle v2.2.0-RC3.
- doctrine/doctrine-bundle 1.2.x-dev requires symfony/framework-bundle >=2.2.0-beta2,<2.3-dev -> satisfiable by symfony/symfony 2.2.x-dev, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3, symfony/framework-bundle 2.2.x-dev, symfony/framework-bundle v2.2.0, symfony/framework-bundle v2.2.0-BETA2, symfony/framework-bundle v2.2.0-RC1, symfony/framework-bundle v2.2.0-RC2, symfony/framework-bundle v2.2.0-RC3.
- don't install symfony/framework-bundle 2.2.x-dev|don't install symfony/symfony v2.2.0-BETA1
- don't install symfony/framework-bundle v2.2.0|don't install symfony/symfony v2.2.0-BETA1
- don't install symfony/framework-bundle v2.2.0-BETA2|don't install symfony/symfony v2.2.0-BETA1
- don't install symfony/framework-bundle v2.2.0-RC1|don't install symfony/symfony v2.2.0-BETA1
- don't install symfony/framework-bundle v2.2.0-RC2|don't install symfony/symfony v2.2.0-BETA1
- don't install symfony/framework-bundle v2.2.0-RC3|don't install symfony/symfony v2.2.0-BETA1
- Installation request for symfony/symfony 2.2.* -> satisfiable by symfony/symfony 2.2.x-dev, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA1, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3.
- Installation request for doctrine/doctrine-bundle 1.2.* -> satisfiable by doctrine/doctrine-bundle 1.2.x-dev, doctrine/doctrine-bundle v1.2.0-beta1. 
```

我的作曲家.json：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.2.*",
        "doctrine/orm": "~2.2,>=2.2.3",
        "doctrine/doctrine-bundle": "1.2.*",
        "twig/extensions": "1.0.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.2.*",
        "symfony/monolog-bundle": "2.2.*",
        "sensio/distribution-bundle": "2.2.*",
        "sensio/framework-extra-bundle": "2.2.*",
        "sensio/generator-bundle": "2.2.*",
        "jms/security-extra-bundle": "1.4.*",
        "jms/di-extra-bundle": "1.3.*",

        "friendsofsymfony/rest": "0.7.0",
        "friendsofsymfony/rest-bundle": "0.9.0",
        "jms/serializer-bundle": "0.9.0",
        "friendsofsymfony/jsrouting-bundle": "1.0.3",
        "friendsofsymfony/user-bundle": "v1.3.0",
        "knplabs/knp-menu-bundle": "dev-master",
        "knplabs/knp-paginator-bundle": "v2.3",
        "guzzle/guzzle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "config": {
        "bin-dir": "bin"
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "branch-alias": {
            "dev-master": "2.3-dev"
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:14:09.280

您将一些第三方捆绑包锁定到某个标签/版本。

```
"friendsofsymfony/user-bundle": "v1.3.0", 
```

此捆绑包的`v1.3.0`标签[仅支持 Symfony 2.1.*](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/v1.3.0/composer.json#L25)。

您将必须检查每一个第三方捆绑包，并确保您使用的是正确的标签/版本。

上面的行应该看起来像

```
"friendsofsymfony/user-bundle": "v1.3.1", 
```

您可以[在 bundle 的 composer.json 中](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/v1.3.1/composer.json#L25)`v1.3.1`查看标签的要求。

你也可以使用这个`dev-master`标签，但如果你不打算定期升级 Symfony，这可能会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T11:09:37.043

我也有完全一样的问题。我将教义捆绑的作曲家条目更改为

```
"doctrine/doctrine-bundle": "1.2.*@alpha", 
```

因为这就是根据[http://symfony.com/blog/symfony-2-2-0](http://symfony.com/blog/symfony-2-2-0)将整体稳定性标志设置为 alpha 的原因。

但是现在我在更新软件包时仍然收到此消息：

```
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - Installation request for doctrine/doctrine-bundle 1.2.*@alpha -> satisfiable by doctrine/doctrine-bundle v1.2.0-beta1.
    - Conclusion: don't install symfony/symfony 2.2.x-dev
    - Conclusion: don't install symfony/symfony v2.2.0
    - Conclusion: don't install symfony/symfony v2.2.0-RC3
    - Conclusion: don't install symfony/symfony v2.2.0-RC2
    - Installation request for bcc/resque-bundle v1.0 -> satisfiable by bcc/resque-bundle v1.0.
    - Conclusion: don't install symfony/symfony v2.2.0-RC1
    - Conclusion: don't install symfony/symfony v2.2.0-BETA2
    - doctrine/doctrine-bundle v1.2.0-beta1 requires symfony/framework-bundle >=2.2.0-beta2,<2.3-dev -> satisfiable by symfony/symfony 2.2.x-dev, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3, symfony/framework-bundle 2.2.x-dev, symfony/framework-bundle v2.2.0, symfony/framework-bundle v2.2.0-BETA2, symfony/framework-bundle v2.2.0-RC1, symfony/framework-bundle v2.2.0-RC2, symfony/framework-bundle v2.2.0-RC3.
    - don't install symfony/framework-bundle 2.2.x-dev|don't install symfony/symfony v2.2.0-BETA1
    - don't install symfony/framework-bundle v2.2.0|don't install symfony/symfony v2.2.0-BETA1
    - don't install symfony/framework-bundle v2.2.0-BETA2|don't install symfony/symfony v2.2.0-BETA1
    - don't install symfony/framework-bundle v2.2.0-RC1|don't install symfony/symfony v2.2.0-BETA1
    - don't install symfony/framework-bundle v2.2.0-RC2|don't install symfony/symfony v2.2.0-BETA1
    - don't install symfony/framework-bundle v2.2.0-RC3|don't install symfony/symfony v2.2.0-BETA1
    - Installation request for symfony/symfony 2.2.* -> satisfiable by symfony/symfony 2.2.x-dev, symfony/symfony v2.2.0, symfony/symfony v2.2.0-BETA1, symfony/symfony v2.2.0-BETA2, symfony/symfony v2.2.0-RC1, symfony/symfony v2.2.0-RC2, symfony/symfony v2.2.0-RC3. 
```

我真的不明白这些错误消息的实际问题是什么。

# sql - 如何在sql中的字段中搜索多个字符串或字符

> ID：15541487
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:43.657
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 sql server，我有一个有两个字段的表

1.  姓名
2.  描述

我想选择所有包含以下字符串的行

('$','%' , 'ac cd' , 'hjd oih')

我正在这样使用它

```
select Name , description from table_name 
where Description like any (' %$%',' %[%]%','%ac cd%' , '%hjd oih%') 
```

现在当我运行它时它给出错误

```
Incorrect syntax near the keyword 'any'. 
```

谢谢 ，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:23:07.843

如果您必须`multiple patterns`搜索，那么最好创建`derived table`或`temporary table`存储`patterns`

```
DECLARE @patterns TABLE  (
pattern VARCHAR(20)
);

INSERT INTO @patterns VALUES ('%$%'), ('%[%]%'), ('%ac cd%');

SELECT a.* FROM table_name a JOIN @patterns p ON (a.Description LIKE p.pattern); 
```

如果您有多个要比较的列，只需在`ON`子句中添加表达式

```
SELECT a.* FROM table_name a JOIN @patterns p ON (a.Description LIKE p.pattern)
OR (a.Column2 like p.pattern); 
```

**更新：使用视图**

```
CREATE VIEW PatternSearch
AS
 WITH Patterns (Patterns)
  AS
  (
     Select  '%Tool%'
     union all
     Select '%Sale%'
     union all
     Select  '%ac cd%'
  )
   SELECT a.* FROM table_name a JOIN Patterns p ON (a.Description LIKE p.pattern)

GO 
```

未经测试，但你可以这样做

[来源](https://stackoverflow.com/questions/1387612/how-can-i-introduce-multiple-conditions-in-like-operator)

# c# - 修复 gridview 列宽不起作用。

> ID：15541488
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:48.457
> 
> 标签：c#, asp.net, gridview

我有以下代码。我已经设置了`width="150px"`页脚样式、行样式和页眉样式。

**代码**：

```
<strong>Title</strong><br />
        <asp:GridView ID="socGridView" runat="server"
        CaptionAlign="Top" HorizontalAlign="Justify"  
        DataKeyNames="id"  onselectedindexchanged="socGridView_SelectedIndexChanged"
        ToolTip="Excel FIle DownLoad Tool" CellPadding="4" ForeColor="#333333" 
        GridLines="None">

        <RowStyle width = "150px"   BackColor="#E3EAEB" />
            <Columns>
            <asp:CommandField ShowSelectButton="True" SelectText="Download" ControlStyle-ForeColor="Blue"/>
            </Columns>
         <FooterStyle width = "150px"  BackColor="#1C5E55" Font-Bold="True" ForeColor="White" />
         <PagerStyle BackColor="#666666" ForeColor="White" HorizontalAlign="Center" />
         <SelectedRowStyle BackColor="#C5BBAF" Font-Bold="True" ForeColor="#333333" />
         <HeaderStyle width = "150px"  BackColor="Gray" Font-Bold="True" ForeColor="White" />
         <EditRowStyle BackColor="#7C6F57" />
         <AlternatingRowStyle BackColor="White" /> 
```

但是，它对我不起作用。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-25T04:10:10.963

我有同样的问题，列的宽度没有改变但是，在我设置了gridview的宽度之后，它就可以工作了！例如

```
 <asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" 
    DataSourceID="datasource_ssc" EnableModelValidation="True" Width="50%" 
    BackColor="White" BorderColor="#DEDFDE" BorderStyle="None" BorderWidth="1px" 
    CellPadding="4" ForeColor="Black" GridLines="Vertical" 
    DataKeyNames="ssc,sales" AllowSorting="True"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:32:11.360

您不能定义行宽。您可以使用 Gridview 或列来执行此操作，例如：

```
'Gridview Width
<asp:GridView ID="GridView1" runat="server" Width="100px">

'Column Width
<Columns>
    <asp:BoundField HeaderText="Name (long)" DataField="Name">
            <ItemStyle Width="150px"></ItemStyle>
    </asp:BoundField>
</Columns>

'code behind
columnName.ItemStyle.Width = Unit.Percentage(someDouble); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T11:07:30.243

ItemStyle 不工作！使用页眉样式。

```
GridView1.Columns[2].HeaderStyle.Width = 20; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-23T10:14:57.557

```
asp:BoundField DataField="vProductInfo" HeaderText="Product Info" ItemStyle-Wrap="false"
                            HeaderStyle-Width="200px"  ItemStyle-Width="200px" SortExpression="vProductInfo" /> 
```

必须设置属性 ItemStyle-Wrap="false"

# c# - asp.net <%%> 自动解析

> ID：15541491
> 
> 赞同：-2
> 
> 时间：2013-03-21T07:11:51.470
> 
> 标签：c#, asp.net

我的网站上有一个代码

```
<link href="<%=ResourceUrl %>PointMall/css/jjh_style.css" rel="stylesheet" type="text/css"
media="screen" /> 
```

在浏览器上被改变

```
<link href="&lt;%=ResourceUrl %>PointMall/css/jjh_style.css?t=1" rel="stylesheet" type="text/css" media="screen" /> 
```

为什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:20:37.533

使用单引号而不是双引号。例如：

```
<link href='<%= ResourceUrl + "PointMall/css/jjh_style.css" %>' rel="stylesheet" type="text/css" media="screen" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:28:23.427

如果`/`ResourceUrl 中有，请使用单引号而不是双引号

```
<link href='<%= ResourceUrl + "PointMall/css/jjh_style.css" %>' rel="stylesheet" 
           type="text/css" media="screen" /> 
```

否则

```
<link href='<%= ResourceUrl + "/PointMall/css/jjh_style.css" %>' rel="stylesheet" 
           type="text/css" media="screen" /> 
```

# php - 如何通过在另一个 PHP 脚本上调用它来执行我的 PHP 脚本？

> ID：15541493
> 
> 赞同：0
> 
> 时间：2013-03-21T07:11:56.583
> 
> 标签：php, smarty

我想通过在另一个文件中调用它来在后台执行一个 php 脚本。

例如：您有两个文件 file1.php 和 file2.php。在 file1.php 中开始执行 file2.php

注意：没有在 file1.php 中使用 include 语句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:20:58.753

我想你可以使用这个 PHP 函数[http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php) 但是你想要它非常奇怪的愿望:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:25:08.817

对于 php 中的后台使用：

1.  来自客户端的 ajax 调用（服务器告诉客户端 ajax）
2.  齿轮工
3.  卷曲自己而不等待回应。

如果您使用特定框架，请告诉我们，以便我们告诉您如何操作。

我建议开始，尝试使用 curl 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:22:20.580

如果您的两个文件都在同一个文件夹中，那么在 file1

```
 exec('php file2.php'); 
```

或为 file2 提供适当的文件路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:17:40.750

请在 file1.php 的页面加载上使用 ajax

# php - 使用 Symfony2 上传和删除多个文件

> ID：15541494
> 
> 赞同：1
> 
> 时间：2013-03-21T07:12:09.023
> 
> 标签：php, forms, symfony, doctrine-orm, persistence

我想知道如何在不使用集合字段类型的情况下创建多个文件上传。问题是：我有一门课，我需要在这门课上链接图像。我不需要这些图像中的任何描述和其他类型的信息，所以我只需在我的主要实体中创建附加字段。然后我添加

```
->add('files', 'file', array(
        'label' => 'Images',
        'required' => false,
        'attr' => array(
            'accept' => 'image/*',
            'multiple' => true
        ) 
```

在它的表单类中，这个：

```
 /**
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function preUpload()
{
    if (!empty($this->files)) {
        if (!empty($this->images)) {
            $this->insertingKey = $this->images->count();
        }
        foreach ($this->files as $file) {
            $imageName = uniqid('entity_') . '_' . date('Y-m-d_H:i') .  '.' . $file->guessExtension();
            if ($this->images === null) {
                $this->images = new ArrayCollection();
            }
            $this->images->add($imageName);
        }
    }
}

/**
 * @ORM\PostPersist()
 * @ORM\PostUpdate()
 */
public function upload()
{
    if (empty($this->files)) {
        return;
    }

    if ($this->insertingKey) {
        foreach ($this->files as $file) {
            $file->move($this->getUploadRootDir(), $this->images[ $this->insertingKey++ ]);
        }
    } else {
        foreach ($this->files as $key => $file) {
            $file->move($this->getUploadRootDir(), $this->images[ $key ]);
        }
    }
} 
```

作为我的实体类中的学说事件，当然我使文件归档像数组一样工作。但我的问题是 - 我不能第二次添加图像。例如，当我已经上传了一些图像并决定再上传一些图像时 - 他们实际上传（我可以在我的项目目录中看到它们），但我的页面上没有任何变化。

你能给我一些建议吗？或者也许有一些其他方法可以上传许多文件并且同时只有一个表单域？太谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T07:19:59.410

我已经通过这种方式解决了这个问题：

这是我的实体的代码

```
 /**
 * @ORM\PrePersist()
 * @ORM\PreUpdate()
 */
public function preUpload()
{
    if ($this->files[0] != null || !$this->files) {
        if (!empty($this->images)) {
            $this->insertingKey = count($this->images);
        }
        foreach ($this->files as $file) {
            $imageName = uniqid('pref_') . '_' . date('Y-m-d_H:i') .  '.' . $file->guessExtension();
            if ($this->images === null) {
                $this->images = array();
            }
            $this->images[] = $imageName;
        }
    }
}

/**
 * @ORM\PostPersist()
 * @ORM\PostUpdate()
 */
public function upload()
{
    if ($this->files[0] == null || !$this->files) {
        return;
    }

    if ($this->insertingKey) {
        foreach ($this->files as $file) {
            $file->move($this->getUploadRootDir(), $this->images[ $this->insertingKey++ ]);
        }
    } else {
        foreach ($this->files as $key => $file) {
            $file->move($this->getUploadRootDir(), $this->images[ $key ]);
        }
    }
}

public function getImagesWithAbsolutePath()
{
    if (!empty($this->images)) {
        $images = array();
        foreach ($this->images as $image) {
            $images[$image] = $this->getUploadRootDir() . '/' . $image;
        }

        return $images;
    }

    return null;
}

public function getImagesWithRelativePath()
{
    if (!empty($this->images)) {
        $images = array();
        foreach ($this->images as $image) {
            $images[$image] = $this->getUploadDir() . '/' . $image;
        }

        return $images;
    }

    return null;
}

public function getUploadRootDir()
{
    return __DIR__ . '/../../../../web/' . $this->getUploadDir();
}

public function getUploadDir()
{
    return 'images/venue';
}

public function removeImage($imageName)
{
    if ($this->images && in_array($imageName, $this->images)) {
        $key = array_search($imageName, $this->images);
        unset($this->images[$key]);
        if (file_exists($this->getUploadRootDir() . '/' . $imageName)) {
            unlink($this->getUploadRootDir() . '/' . $imageName);
        }

        $this->images = array_values($this->images);
    }
} 
```

这是来自控制器的一段代码：

```
if ($request->getMethod() === "POST") {
        $form->bind($request);
        if ($form->isValid()) {
            $deleteImages = $request->request->get('delete_thumb', array());
            if (!empty($deleteImages)) {
                foreach ($request->request->get('delete_thumb') as $image) {
                    $imageName = substr($image, strrpos($image, '/') + 1);
                    $venue->removeImage($imageName);
                }
            }
            $this->persist($venue, true);
            if ($request->request->get('submit-and-quit') !== null) {
                return $this->redirectToRoute('admin_list');
            }

            return array('form' => $form->createView());
        }
    } 
```

# c++ - 如何使用 Boost.Program_options 实现子命令？

> ID：15541498
> 
> 赞同：30
> 
> 时间：2013-03-21T07:12:27.437
> 
> 标签：c++, boost-program-options

我想为我的程序实现子命令。我还需要能够为不同的子命令提供不同的参数选项。使用 Boost.Program_options 执行此操作的最佳方法是什么？

子命令用于 svn、git 和 apt-get 等程序。

例如，在 GIT 中，一些可用的子命令是：

```
git status  
git push  
git add  
git pull 
```

我的问题和这个人的基本一样：http: [//boost.2283326.n4.nabble.com/subcommands-with-program-options-like-svn-command-td2585537.html](http://boost.2283326.n4.nabble.com/subcommands-with-program-options-like-svn-command-td2585537.html)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-04-16T03:42:15.657

如果我正确理解了问题，您想解析以下形式的命令行选项：

```
[--generic-option ...] cmd [--cmd-specific-option ... ] 
```

这是我的示例解决方案。为清楚起见，我将省略任何验证代码，但希望您能看到如何相当简单地添加它。

在此示例中，我们有“ls”子命令，可能还有其他命令。每个子命令都有一些特定选项，此外还有通用选项。因此，让我们从解析通用选项和命令名称开始。

```
po::options_description global("Global options");
global.add_options()
    ("debug", "Turn on debug output")
    ("command", po::value<std::string>(), "command to execute")
    ("subargs", po::value<std::vector<std::string> >(), "Arguments for command");

po::positional_options_description pos;
pos.add("command", 1).
    add("subargs", -1);

po::variables_map vm;

po::parsed_options parsed = po::command_line_parser(argc, argv).
    options(global).
    positional(pos).
    allow_unregistered().
    run();

po::store(parsed, vm); 
```

请注意，我们为命令名称创建了一个位置选项，并为命令选项创建了多个位置选项。

现在我们在相关的命令名称上进行分支并重新解析。我们现在以字符串数组的形式传入无法识别的选项，`argc`而不是传入原始选项。`argv`该`collect_unrecognized`函数可以提供这一点 - 我们所要做的就是删除（位置）命令名称并使用相关的`options_description`.

```
std::string cmd = vm["command"].as<std::string>();
if (cmd == "ls")
{
    // ls command has the following options:
    po::options_description ls_desc("ls options");
    ls_desc.add_options()
        ("hidden", "Show hidden files")
        ("path", po::value<std::string>(), "Path to list");

    // Collect all the unrecognized options from the first pass. This will include the
    // (positional) command name, so we need to erase that.
    std::vector<std::string> opts = po::collect_unrecognized(parsed.options, po::include_positional);
    opts.erase(opts.begin());

    // Parse again...
    po::store(po::command_line_parser(opts).options(ls_desc).run(), vm); 
```

请注意，我们`variables_map`对特定于命令的选项使用与通用选项相同的选项。由此我们可以执行相关的操作。

此处的代码片段取自包含一些单元测试的可编译源文件。[你可以在这里](https://gist.github.com/randomphrase/10801888)找到它的要点。请随时下载并使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T00:41:43.517

*您可以使用位置选项*将子命令名称从命令行中取出- 请参阅[本教程](https://web.archive.org/web/20160302223730/http://www.radmangames.com/programming/how-to-use-boost-program_options)。

似乎没有对子命令的任何内置支持 - 您需要[`allow_unregistered`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost/program_options/basic_command_line_parser.html#idp44978768-bb)在顶级解析器上设置选项，找到命令名称，然后通过第二个解析器运行它以获取任何特定于子命令的选项。

# button - 数据表插件中 csv 按钮的工具提示

> ID：15541502
> 
> 赞同：0
> 
> 时间：2013-03-21T07:12:41.300
> 
> 标签：button, csv, tooltip, datatables

是否有任何选项可以为数据表中的 csv 按钮提供工具提示？我关于这个 csv 按钮的代码是这样的：

```
$('#example').dataTable( {
"bProcessing": true,
//"bServerSide": true,
"sAjaxSource": "datatabledb.php",
"bJQueryUI": true,
"sPaginationType": "full_numbers",
//"sDom": 'T<"clear">rt',
"sDom": 'T<"clear">lfrtip',
"oTableTools": {
"aButtons": [
{
"sExtends": "csv",
"sButtonText": "Save to CSV",
"bFooter":false                             }
]
},
"oLanguage": {
"sSearch": "Search all columns:"
},
"aoColumns": [
null,
{ "bSortable": false }, // disable the sorting property for checkbox header
null,
null,
null,
null,
null,
null,
null,
null
]       
} ); 
```

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:25:37.070

您可以使用 sTooltip ：

```
"aButtons": [{
  "sExtends": "csv",
  "sButtonText": "Save to CSV",
  "sTooltip": "My CSV button's tooltip",
  "bFooter": false
}] 
```

请[在此处查看 Flash 按钮选项部分中的 sTooltip 选项](http://datatables.net/extras/tabletools/button_options)

**编辑**根据 Srimanta，“sTooltip”需要在“bFooter”之前工作。

# c# - 如何从 XtraTreeList.TreeList 中的节点检索数据？

> ID：15541503
> 
> 赞同：2
> 
> 时间：2013-03-21T07:12:45.670
> 
> 标签：c#, treeview, devexpress

我正在使用 XtraTreeList.TreeList 来显示分层数据。数据存储在实现 DevExpress.XtraTreeList.TreeList.IVirtualTreeListData 的自定义业务对象中。

虽然“名称”列的数据正常显示，但通过以下代码检索：

```
public void VirtualTreeGetCellValue(DevExpress.XtraTreeList.VirtualTreeGetCellValueInfo info)
{
   if (info.Column.FieldName == "Name")
      info.CellData = root.providers[provGroup.Key];
   if (info.Column.FieldName == "ImageIndex")
      info.CellData = imageIndex;
} 
```

我在为节点提供适当的图像索引时遇到了困难。

简单地说，我不知道如何提供它。我尝试将 TreeList 中的 ImageIndexFieldName 设置为“ImageIndex”并像这样处理 CustomDrawNodeImages 事件：

```
void BoundTree_CustomDrawNodeImages(object sender, DevExpress.XtraTreeList.CustomDrawNodeImagesEventArgs e)
{
    e.StateImageIndex = e.StateImageIndex = (int)(e.Node.GetValue("ImageIndex")??-1);
    e.Handled = false;
} 
```

但这不会产生任何结果。

我想做的是检索实现与节点对应的 IVirtualTreeListData 的对象，但是怎么做呢？在文档中，建议使用 Node.GetValue(column) 从节点检索数据，但在执行时，IVirtualTreeListData.VirtualTreeGetCellValue 根本不会被调用。似乎节点用与列对应的数据填充一次，然后不再使用业务对象（好吧，也许数据也被设置，但在我的情况下不是）。

我将不胜感激任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:29:03.780

如果你有`Node`你可以通过使用获取底层数据源`treeControl.GetDataRecordByNode(e.Node)`

在您的示例中，它看起来像这样：

```
private void BoundTree_CustomDrawNodeImages(object sender, DevExpress.XtraTreeList.CustomDrawNodeImagesEventArgs e)
{
    var myType = (MyType)BoundTree.GetDataRecordByNode(e.Node);
    e.StateImageIndex = myType.ImageIndex ?? -1 
} 
```

# javascript - 检查xml文件中的元素值

> ID：15541506
> 
> 赞同：2
> 
> 时间：2013-03-21T07:12:56.620
> 
> 标签：javascript, html, xml, xpath

这是我的 xml:-

```
<results>
    <result>
        <Country_Code>IN</Country_Code>
        <Country_Name>India</Country_Name>
        <Region_Name>Gujarat</Region_Name>
        <City>Rajkot</City> 
        <lat>13.060422</lat>
        <lng>80.24958300000003</lng>
    </result>
    <result>
        <Country_Code>KE</Country_Code>
        <Country_Name>Kenya</Country_Name>
        <Region_Name>Vihiga</Region_Name>
        <City>Kakamega</City> 
        <lat>0.1182473</lat>
        <lng>34.7334515999997</lng>
    </result>
</results> 
```

这是脚本：-

```
<script>
    var xml;
    $.get(
        "sea.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );
    function get_list(ls) {
        var elName = $('#select').val();
        var value = $('#value').val();
        var xPath = '//lat[@value '+ ls +' "'+elName+'"]'and  var xPathh='//lng[@value '+ ls +' '+value+']'+'/../City/@value';
        var xPath = '//[lat = ('+ elName+') and lng = ('+ value +')]'+'/result';

        var iterator = xml.evaluate(xPath, xml.documentElement, null,
            XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
        var thisNode = iterator.iterateNext();
        var str = '';
        while (thisNode) {
            if (str) {
                str += ', ';
            }
            str += thisNode.textContent;
            thisNode = iterator.iterateNext();
        }

        $("#result").text(str);
    }
</script> 
```

这是html代码：-

```
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" name="button" value="Search" onclick="get_list('=')">
    <div id="result">
    </div>
</body> 
```

我有两个文本框：-

在第一个文本框中输入纬度值`13.060422`（它在我的 xml 文件中）

在第二个文本框中输入经度值`80.24958300000003`（它在我的 xml 文件中）

然后两者都在我的 xml 元素值中匹配返回所有同级值，如

`IN India Gujarat Rajkot 13.060422 80.24958300000003`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:22:31.437

当你使用 jquery 试试这个

**[演示](http://jsfiddle.net/pintu31/EApyj/3/)**

```
var xml = "<results><result><Country_Code>IN</Country_Code><Country_Name>India</Country_Name><Region_Name>Gujarat</Region_Name><City>Rajkot</City><lat>13.060422</lat><lng>80.24958300000003</lng></result><result><Country_Code>KE</Country_Code><Country_Name>Kenya</Country_Name><Region_Name>Vihiga</Region_Name><City>Kakamega</City><lat>0.1182473</lat><lng>34.7334515999997</lng></result></results>";

xmlDoc = $.parseXML( xml );
$xml = $( xmlDoc );
function get_list(ls){
   $lat = $("#select").val();
   $lng = $("#value").val();
   $title = $xml.find( "lat:contains('"+$lat+"')" ).closest('result');    
   $t = $title.find("lng:contains('"+$lng+"')").closest('result');    
   $str = $t.contents().map(function(){
       return $(this).contents().eq(0).text();
   }).get().join(' ');

   $("#result").text($str);
} 
```

# php - 按子域访问会话

> ID：15541511
> 
> 赞同：0
> 
> 时间：2013-03-21T07:13:21.547
> 
> 标签：php, html, session, subdomain

您好，我在访问子域上的会话时遇到问题。会话将使用以下代码在 domain.com 上设置：

```
<?php
ob_start();
ini_set("session.cookie_domain",".domain.com");
session_start();
header ("Content-Type: text/html; charset=utf-8");
.... 
```

所以在域前面添加一个点可能应该为子域设置会话。

我查看了我发现这一行的 phpinfo：

```
session.cookie_domain   no value    no value 
```

由于主机设置我没有机会编辑 php.ini 文件。所以我不得不在上面的所有文件上添加 ini_set 行。

问题如下：当我调用 domain.com 时，将设置一个会话。我建立了一个测试页，可以轻松地回显会话和 cookie。正如我所说，会话将在 domain.com 上设置，当我调用 domain.com/testfile.php 时，它将正确显示。但是当我调用 www.domain.com/testfile.php 时，只会显示 cookie 而不会显示会话，即为空。在 testfile.php 上还添加了 ini_set 行。

所以我不知道为什么这不起作用？我还多次删除了缓存和浏览器历史记录，但没有改变任何东西。我也尝试了不同的浏览器。

如果有人可以给我提示，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:22:38.700

你必须先开始会话。然后它会工作

```
<?php
session_start();
ob_start();
ini_set("session.cookie_domain",".domain.com");
header ("Content-Type: text/html; charset=utf-8");
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:24:44.917

嗨尝试以下选项：

```
session.cookie_domain = ".example.com" 
```

在您的 .htaccess 中：

```
php_value session.cookie_domain .example.com 
```

作为脚本中的第一件事：

```
ini_set('session.cookie_domain', '.example.com' ); 
```

或者

```
session_set_cookie_params(0, '/', 'example.com', false, false); 
```

或者

```
 if(isset($_COOKIE['session_id']))
            session_id($_COOKIE['session_id']);
        Zend_Session::start(); //or session_start();
        if(!isset($_COOKIE['session_id']))
            setcookie('session_id', session_id(), 0, '/', '.yourdomain.com'); 
```

# javascript - PHP 到 JavaScript - 已经过去了

> ID：15541512
> 
> 赞同：0
> 
> 时间：2013-03-21T07:13:29.737
> 
> 标签：javascript

我正在尝试研究如何在 JavaScript 中执行以下操作：

```
if(strtotime($row['last_active']) < (time() -(30))) { 
            //update...
        } 
```

`$row['last_active']`保存来自 MySQL 的时间日期。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:41:50.617

你不需要用外部 JS 库来打扰你，我会这样做：

PHP

```
<?php 
    $date = strtotime($row['last_active']);
?> 
```

JS

```
//Number of milliseconds since midnight Jan 1, 1970
var serverDate = <?php echo (date('U',$date) * 1000); ?>

//Compare with current number of milliseconds (like above) - 30 seconds
if(serverDate < (new Date().getTime() - (30 * 1000)) { 
    //update...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:24:03.367

使用库：

```
var then = new XDate('<?=$row['last_active']?>');
var now = new XDate();

days_between = now.diffDays(then); 
```

[http://arshaw.com/xdate/](http://arshaw.com/xdate/)

还有[Moment.js](http://momentjs.com/)和[Date.js](http://code.google.com/p/datejs/)。

您也可以在查询中...

```
SELECT last_active, DATEDIFF(CURDATE(), last_active) AS days_last_active 
```

或者：

```
SELECT last_active, DATEDIFF(CURDATE(), last_active) > 30 AS is_inactive 
```

`DATEDIFF()`可能也需要使用`DATE()`：

```
DATEDIFF(CURDATE(), DATE(last_active)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:18:11.867

您可以存储`$row['last_active']`在 javascript 变量中，对于时间，您可以使用 javascript 当前时间变量`date = new Date();`

但请注意，javascript 日期变量为您提供客户端机器时间而不是服务器时间。

# mysql - 内连接与左连接的组合结果

> ID：15541518
> 
> 赞同：4
> 
> 时间：2013-03-21T07:13:59.550
> 
> 标签：mysql

```
SELECT name,trans FROM skyplan_deploy.deploy_sids d WHERE apt='KBOS' AND name != trans  
LEFT JOIN  
(SELECT distinct c.sid_ident as name,c.fix_ident from corept.std_sid_leg as c  
   INNER JOIN  
        (SELECT sid_ident,transition_ident,max(sequence_num) seq,route_type  
         FROM corept.std_sid_leg  
         WHERE data_supplier='J' AND airport_ident='KBOS'  
         GROUP BY sid_ident,transition_ident)b  
         ON c.sequence_num=b.seq and c.sid_ident=b.sid_ident and        c.transition_ident=b.transition_ident  
         WHERE c.data_supplier='J' and c.airport_ident='KBOS')right_tbl  
ON d.name=right_tbl.sid_ident; 
```

这是我的代码..执行时我在左连接时遇到错误，说语法错误。请大家帮忙...我已经完成了语法教程，但结果却是空手而归。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:16:11.613

将`WHERE`子句移动到查询的末尾。另外，子句中的那一列是什么`trans`？`WHERE`它从哪里来的？如果它是字符串文字，则将其放在引号中。

应该这样写：

```
SELECT 
  name,
  trans 
FROM skyplan_deploy.deploy_sids d 
LEFT JOIN
(
   SELECT distinct c.sid_ident as name, c.fix_ident 
   from corept.std_sid_leg as c
   INNER JOIN
   (
      SELECT sid_ident, transition_ident, max(sequence_num) seq, route_type
      FROM corept.std_sid_leg
      WHERE data_supplier='J' AND airport_ident='KBOS'
      GROUP BY sid_ident,transition_ident
   ) b ON c.sequence_num=b.seq 
       and c.sid_ident = b.sid_ident 
       and c.transition_ident = b.transition_ident
    WHERE c.data_supplier='J' and c.airport_ident='KBOS'
) AS right_tbl  ON d.name = right_tbl.sid_ident
WHERE apt = 'KBOS'
  AND right_tbl.sid_ident IS NULL ; 
```

# clojure - repl 中两个 ns 冲突的相同功能

> ID：15541520
> 
> 赞同：1
> 
> 时间：2013-03-21T07:14:02.617
> 
> 标签：clojure

在我的 repl 中，我从一个具有函数的文件中加载了 ns `parse`。所以`(use 'demo.one)`在输入 repl 时工作正常。

现在我有另一个具有相同名称的函数的 ns。当我输入这个`（使用'demo.two）时，它给了我一个错误。

如何防止两个 ns 中的函数名称冲突？在上面我只想使用第二个 ns 的函数。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:01:59.677

还有一种方法可以给命名空间起别名`require`，

你可以`:as`使用`:require`

```
(ns your.namespace
(:require [demo.one :as one])
(:require [demo.two :as two]))

(one/parse "foo") ; use the namespace demo.one parse function
(two/parse "foo") ; use the namespace demo.two parse function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:17:14.477

您可以通过命名空间来避免冲突`require`，然后完全限定您的函数调用。

例如

```
(require 'demo.two)
(demo.two/parse "foo") 
```

# javascript - phantomjs outputEncoding.js 错误

> ID：15541529
> 
> 赞同：5
> 
> 时间：2013-03-21T07:14:26.683
> 
> 标签：javascript, utf-8, character-encoding, phantomjs

phantomjs outputEncoding.js 示例不显示正确的字符（丹麦字符）...

我在 Windows 上运行 phantomjs 1.7。

（这曾经在我在 linux 上运行 phantomjs 1.4 时有效，但在更新到 1.8.2 版本后也会在 linux 上报错）

输出编码.js：

```
function helloWorld() {
        console.log(phantom.outputEncoding + ": æøå");
}

console.log("Using default encoding...");
helloWorld();

console.log("\nUsing other encodings...");

var encodings = ["euc-jp", "sjis", "utf8", "System"];
for (var i = 0; i < encodings.length; i++) {
    phantom.outputEncoding = encodings[i];
    helloWorld();
}

phantom.exit(); 
```

控制台结果：

![控制台输出](../Images/f6d029aed3ec0dd251079ba6d8ae9892.png)

非常感谢任何帮助！

谢谢。

# autotools - 如何在 autoconf:configure.ac 中使用字符串变量

> ID：15541534
> 
> 赞同：2
> 
> 时间：2013-03-21T07:14:39.273
> 
> 标签：autotools, m4

如何在 configure.ac 中为消息使用变量

```
if test "$foo" = "yes"; then
    AC_MSG_ERROR([this string is being used in WARN as well as ERROR])
else
    AC_MSG_WARN([this string is being used in WARN as well as ERROR])
fi 
```

在变量中定义字符串*“此字符串在 WARN 和 ERROR 中使用”然后在***AC_MSG_WARN**和**AC_MSG_ERROR**中使用该变量是有意义的。最好的方法是什么？

除此之外，m4 是否有任何宏可以通过将字符串和 $foo 作为参数来替换整个 if else ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:32:37.820

这应该有效：

```
msg="this string is being used in WARN as well as ERROR"
if test "$foo" = "yes"; then
    AC_MSG_ERROR([$msg])
else
    AC_MSG_WARN([$msg])
fi 
```

> 除此之外，m4 是否有任何宏可以通过将字符串和 $foo 作为参数来替换整个 if else ？

如果你写一个，它会的。:-)。if-else 不在 m4 中，而是在`configure`shell 脚本 m4 的输出中。就像是：

```
AC_DEFUN([AX_TEST_FOO], [
    pushdef([MSG],$1)
    pushdef([FOO],$2)
    AS_IF([test $FOO = yes], [AC_MSG_ERROR([$MSG])], [AC_MSG_WARN([$MSG])])
    popdef([FOO])
    popdef([MSG])
]) 
```

称为：

```
AX_TEST_FOO(["this string is being used in WARN as well as ERROR"], [$foo]) 
```

应该很近。我没试过。

# mysql - Mysql在最后一次出现字符串之前获取子字符串

> ID：15541540
> 
> 赞同：3
> 
> 时间：2013-03-21T07:14:58.400
> 
> 标签：mysql

我想从搜索字符串的开始到最后一次出现字符串的子字符串。

**示例字符串**：*“Abcd Corp 是一个很好的合作组织。Abcd corp 合并”*

**搜索字符串**： *“公司”*

**预期输出**：*“Abcd Corp 是一个很好的合作组织。Abcd”*

IE。获取字符串直到最后一次出现搜索字符串。有人可以建议最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:33:40.977

Here is an way, probably not the most efficient way:

```
 mysql> set @a = "Abcd Corp is a good org to work with. Abcd corp incorporated";
Query OK, 0 rows affected (0.00 sec)

mysql> select substring(@a, 1, length(@a) - length('corp') - instr(reverse(@a), reverse('corp')) + 1);
+-----------------------------------------------------------------------------------------+
| substring(@a, 1, length(@a) - length('corp') - instr(reverse(@a), reverse('corp')) + 1) |
+-----------------------------------------------------------------------------------------+
| Abcd Corp is a good org to work with. Abcd corp in                                      |
+-----------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:29:38.820

您可以使用 Substring_index 函数

```
 select substring_index("Abcd Corp is a good org to work with. Abcd corp incorporated.", "corp", 1) 
```

注意：此查询仅在 Copr 在两次可用时有效。如果超过两个，则需要更改函数参数。

# twitter - Newtonsoft.Json 依赖问题

> ID：15541543
> 
> 赞同：5
> 
> 时间：2013-03-21T07:15:14.343
> 
> 标签：twitter, json.net, tweetsharp

我的项目使用 Newtonsoft.json V4.5。现在我需要在我的项目中集成 twitter oAuth。

我决定使用 Tweetsharp.dll 进行集成。遇到了 Newtonsoft.Json 的依赖冲突问题，即 Tweetsharp 需要 Newtonsoft.json 3.5。

问题是我无法从我的项目中替换我较新版本的 Newtonsoft.Json，因为它会影响其他功能。

请帮我解决这个问题。

```
Server Error in '/' Application.

 Could not load file or assembly 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral,         PublicKeyToken=30ad4fe6b2a6aeed' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

  Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

  Exception Details: System.IO.FileLoadException: Could not load file or assembly 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)

 Source Error: 

 Line 188:            if (CallbackUrl != null && CallbackUrl.Trim().Length > 0)
 Line 189:            {
 Line 190:                twitter =     FluentTwitter.CreateRequest().Configuration.UseHttps().Authentication.GetRequestToken(ConsumerKey, ConsumerSecret, CallbackUrl);
 Line 191:            }
 Line 192:            else

 Source File: C:\Users\hnarikkoden\Desktop\Socxo\B2\App_Start\TwitterInfo.cs    Line: 190 

  Assembly Load Trace: The following information can be helpful to determine why the   assembly 'Newtonsoft.Json, Version=3.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed' could not be loaded. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:22:29.247

您无法同时引用这两个库，因此您最好的方法是：

- 编辑 TweetSharp 项目，因为它是开源的，并尝试自己“升级”它

-在[TweetSharp Github](https://github.com/danielcrenna/tweetsharp/issues)上发布问题并要求更新

# mysql - MySQL架构优化——MySQL集群

> ID：15541546
> 
> 赞同：0
> 
> 时间：2013-03-21T07:15:31.700
> 
> 标签：mysql, database-design, storage-engines

g我正在开发一个具有以下结构的 Web 应用程序：我们有“客户”，每个客户都有自己的“用户”。每个客户（以及他的用户和其他数据）都与其他客户完全分离，并且他们之间没有共享数据。
此外，每个“客户”都有不同的子网站，所有来自那里的查询（无论是他还是他的用户）都将始终引用一个 customer.id

数据库按以下方式构建：

```
CREATE TABLE `customer` ( 
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT 
) ENGINE=InnoDB; 

CREATE TABLE `user` ( 
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT, 
  `customerID` int(11) unsigned 
) ENGINE=InnoDB; 

CREATE TABLE `blogPost` ( 
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT, 
  `userID` int(11) unsigned 
) ENGINE=InnoDB; 
```

我有很多表，比如“blogPost”，它们通过用户连接到客户。

一个常见的查询是这样的：

```
SELECT *  
FROM `blogPost` bp 
INNER JOIN `user` u 
ON bp.userID=u.id 
WHERE u.customerID = 324 
```

值得注意的是，这些连接很昂贵而且真的没有必要——因为当我们进入一个子网站时，我们只对连接到特定客户的数据感兴趣

所以问题是如何改进数据库？我对这个主题阅读得越多，我就越困惑——NDB
（MySQL 集群）存储引擎是要走的路吗？
是否最好为每个客户创建许多不同的数据库？也许添加一个冗余`customerID`字段`blogPost`？还有什么想法？MongoDB？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:11:55.727

> 所以问题是如何改进数据库？

是的，连接很昂贵。特别是如果（正如您的 create table 语句所暗示的那样）您*没有索引*。如果确实如此，那么您**必须**添加索引，至少在主键和外键上。（我还注意到，根据您的设计，您不会为博客文章存储任何内容？真的吗？

> 一个常见的查询是......

真的吗？如果您的查询没有实现任何类型的过滤，那么您的应用程序就会出现问题。如果过滤被实现为分页并且数据很少被删除/更新，那么每个外键序列号将比全局自动增量 ID 更有效。

> 是否最好创建许多不同的数据库

绝对不。

当然，如果您的物理设备将 I/O 分布在不同的磁盘上会提高 I/O 性能（假设您的 DBMS 配置正确并且您的热数据集太大而无法放入内存）在这种情况下您应该考虑在不同的磁盘上交错索引和数据文件和/或使用 MySQL 内置的跨文件系统分片支持。

> 也许在 blogPost 中添加一个多余的 customerID 字段

也许。

集群对于可用性和性能来说是一个非常好的想法 - 但它会带来设置和保持运行所需的技能和时间方面的开销。你现在当然不应该看 NDB - 在你用尽了调整单个实例的范围之后，看看同步和异步复制。

首先添加索引，然后调整您的 DBMS 配置，然后尝试将 customerID 添加到博客文章中，然后查看文件是如何在您的存储中分布的（这看起来像是 SSD 的一个很好的用例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:54:23.597

首先让我们清理 NDB 引擎，MySQL Cluster / NDB 不是这里的方法，它不仅没有提供任何有助于你的情况的东西，它实际上使它更复杂。您不仅需要大量资源和至少 3 个数据库服务器来运行 NDB，诸如 JOINS 之类的东西在 NDB 中仍然不是很好——只是不要去那里。

连接表没有任何问题，RDBMS 旨在有效地做到这一点。如果您要加入外键索引，这将既快速又高效。您在这里尝试做的是绝大多数网络数据库每天处理的事情，并且其中大多数将信息连接在一起。

您可以为每个客户使用一个数据库，但请相信我，这将大大增加您的数据库管理工作，如果您出于业务原因等原因确实不必走这条路，请不要这样做。当架构更改发生并且客户 x 有性能问题但客户 y 没有时，这是一场噩梦 - 你最终会给自己带来很多工作

# php - Magento：机器内存分配

> ID：15541549
> 
> 赞同：0
> 
> 时间：2013-03-21T07:15:44.017
> 
> 标签：php, magento, memory-management

目前我有一个在 iweb 共享虚拟主机上运行的 Magento 购物车。

最近有客户抱怨页面有时是空白的，我发现是因为500错误，内存不足。

我告诉管理员，他为我提供了一个使用 php 的脚本`memory_get_peak_usage`

他说应用程序需要 32mb 才能运行，并说如果 30 个并发人访问该页面，这意味着 32mb X 30 几乎是 1000mb 的内存成本。

我不确定他是否说真话，因为对于Magento，即使打开Magento的缓存，也需要3mb。

所以我想知道`memory_get_peak_usage`X 并发用户是否等于总内存使用量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:35:40.220

您的管理员过于简化了一些事情，但他所说的基本上是正确的。Magento 是个内存大户。领先的[Magento 主机](https://affiliates.nexcess.net/idevaffiliate.php?id=1626)（附属链接，单击它并购买东西，我得到回扣）为他们的入门级 Magento 计划提供 16GB 内存。那是 16,384 GB。

“iweb 共享虚拟主机”不是 Magento 的合适服务器主机。搬家。

# marklogic - 在 Marklogic 中获取 XDMP-CONFLICTINGUPDATES 异常

> ID：15541552
> 
> 赞同：0
> 
> 时间：2013-03-21T07:15:50.550
> 
> 标签：marklogic

`XDMP-CONFLICTINGUPDATES`尝试执行以下语句时获取：

```
 (dls:document-update($uri,$content,"Main Document Updated",fn:true(),xdmp:default-permissions(),$content-collection), 
     dls:document-checkin($uri, fn:true()),
     dls:document-update($sub-uri,$sub-content,"sub Document Updated",fn:true(),xdmp:default-permissions(),$content-sub-collection),
     dls:document-checkin($sub-uri, fn:true()),
     cin:update-version ($sub-uri))

     declare function cin:update-version ($sub-uri){
      let $id := xs:int(fn:doc($sub-uri)//id)
      return
       xdmp:node-replace(fn:doc($sub-uri)//id,element id {fn:sum(($id,1))})
      }; 
```

与多语句事务的事务规则有点混淆。由于文档上的锁定已被释放。为什么在其上进行节点替换时会有任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:28:52.763

由于语法错误，示例代码不会按所写的方式运行：缺少变量并且表达式主体后面有一个函数。但回顾过去，这里没有什么可以建议多语句交易。相反，这看起来像一个语句，因此多个更新`$uri`相互冲突。调用`dls:document-update`更新`$uri`，然后`dls:document-checkin`尝试更新同一事务中的同一文档，导致冲突。同样的逻辑适用于`$sub-uri`. 在文档中，[http](http://docs.marklogic.com/dls:document-update) ://docs.marklogic.com/dls:document-update 指出“此函数必须在与 dls:document-checkout 和 dls:document-checkin 分开的事务中调用”。

MarkLogic 事务的行为与您预期的不同，因为 XQuery 不是命令式或过程式语言。[尝试在http://docs.marklogic.com/guide/app-dev/transactions](http://docs.marklogic.com/guide/app-dev/transactions)阅读交易

在大多数情况下，我更喜欢将单独的事务编写为单独的请求，但这里是使用分号编写的查询的第一部分来分隔事务。您可以尝试以样式重写相同的代码`xdmp:commit`，以了解差异。

```
(: multiple statements with semicolons :)
(: statement 1 :)
import module namespace dls="http://marklogic.com/xdmp/dls"
 at "/MarkLogic/dls.xqy";

declare variable $content := <test>content</test>;
declare variable $content-collection := "content";
declare variable $uri := "test";

dls:document-update(
  $uri,
  $content,
  "Main Document Updated",
  fn:true(),
  xdmp:default-permissions(),
  $content-collection) ;

(: statement 2 :)
import module namespace dls="http://marklogic.com/xdmp/dls"
 at "/MarkLogic/dls.xqy";

declare variable $uri := "test";

dls:document-checkin($uri, fn:true()) 
```

# c# - 将双引号存储在单引号内

> ID：15541555
> 
> 赞同：0
> 
> 时间：2013-03-21T07:15:54.417
> 
> 标签：c#

我想在 char 数组中存储一些字符，其中一个是双引号（“）。我尝试使用转义字符，但我做错了。

```
private char[] characters = new char[] { '\"\"', ... }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:17:49.933

该`char`类型只能存储一个字符，您试图存储两个双引号。试试这个：

```
private char[] characters = new char[] { '"', ... }; 
```

您也试图逃避它，但这是不必要的。仅当您在字符串文字中时才需要转义双引号，即。双引号内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:17:18.820

一个字符就是一个字符。您正试图将两个放入其中。只放一个进去。
此外，因为 char 是由单引号指定的，所以您不需要转义双引号 - 但这样做不是错误，也可以工作。
因此，以下任何一项都是正确的：

```
private char[] characters = new char[] { '"', ... };
private char[] characters = new char[] { '\"', ... }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:19:44.353

只需使用`{ '"', ... };`喜欢;

```
private char[] characters = new char[] { '"', ... }; 
```

如前所述，[`char`](http://msdn.microsoft.com/en-us/library/system.char.aspx)类型包含一个 unicode 字符。您不必为此使用转义字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:18:08.120

用这个：

```
private char[] characters = new char[] { '\"','\"', ... }; 
```

希望能帮助到你 ：）

# linux - 带有额外空格的 Bash 命令替换：如何解决这个问题？

> ID：15541557
> 
> 赞同：0
> 
> 时间：2013-03-21T07:15:58.753
> 
> 标签：linux, bash

我想替换一些进程的数量来找出它的命令行，如下所示：

```
> cat /proc/"`fuser /dev/ttyS0`"/cmdline
cat: /proc/5231 /cmdline: No such file or directory 
```

但它似乎`fuser`为 PID 添加了一个额外的空格。知道如何解决这个问题，或者以其他方式解决吗？

预期行为：我想`fuser`在第二步 display 中使用 and获取进程 ID `/proc/<id>/cmdline`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:41:14.877

我想`echo \"`fuser /dev/ttyS0`\"`会告诉你有一个领先的空间。如果您将操作分为两个步骤，则可以执行以下操作

```
u=`fuser /dev/ttyS0`
cat /proc/${u// /}/cmdline 
```

所以首先你将结果分配给`fuser`变量`u`（它仍然包含空格），然后你删除所有空格`u`（开始一个模式替换`//`替换所有出现的模式，如果你只使用`/`第一次出现将被替换 - - 在您的示例中这不是问题）。

# java - 整个应用程序中的全局键绑定以在 ctrl+h 上打开 chm 文件

> ID：15541563
> 
> 赞同：2
> 
> 时间：2013-03-21T07:16:26.503
> 
> 标签：java, swing, keylistener

我正在尝试在 java 程序中打开一个 chm 文件。现在我希望当我在整个程序的任何地方点击`Ctrl`+时打开这个 chm 文件。`h`

我正在使用以下代码打开 chm 文件并且它正在工作。问题是在整个项目中用`Ctrl`+打开文件。`h`

```
public class Testproject {    
    public static void main(String[] args) {
        try {
            Runtime.getRuntime().exec("hh.exe path of the chm file here/abc.chm");
        }
        catch(Exception ex) {
            System.out.println("exceptioin is"+ex);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:35:07.983

大多数添加键绑定的方法都是基于每个组件进行的，因此您必须为所有顶级窗口创建绑定，可能包括对话框，这会很烦人。因此，您必须在事件调度系统的某个中心位置获取事件。

一种可能的方法似乎是[`Toolkit.addAWTEventListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html#addAWTEventListener%28java.awt.event.AWTEventListener,%20long%29)，使用自定义侦听器作为第一个参数和[`KEY_EVENT_MASK`](http://docs.oracle.com/javase/7/docs/api/java/awt/AWTEvent.html#KEY_EVENT_MASK)第二个参数。以这种方式注册的侦听器*应该*会收到所有击键的通知，因此您可以将它们投射到[`KeyEvent`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)并检查它们是否为`Ctrl`+`h`并采取相应的行动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:17:48.923

正如我在评论中已经提到的，为应用程序全局拦截 KeyEvents 设计的类是[KeyEventDispatcher](http://docs.oracle.com/javase/7/docs/api/java/awt/KeyEventDispatcher.html)：

> KeyEventDispatcher 与当前的 KeyboardFocusManager 在所有 KeyEvent 的定位和调度中协作。使用当前 KeyboardFocusManager 注册的 KeyEventDispatcher 将在将 KeyEvent 分派到其目标之前接收它们，从而允许每个 KeyEventDispatcher 重新定位事件、使用它、分派事件本身或进行其他更改。

因此，任务是实现一个调度程序，它在 dispatch(KeyEvent) 方法中执行您想要的操作，例如：

```
public class MyDispatcher implements KeyEventDispatcher {

    @Override
    public boolean dispatchKeyEvent(KeyEvent e) {
        if (!e.isConsumed()) {
            if (processMyStuff(e)) {
                e.consume();
            }
        }
        return false;
    }

    protected boolean processMyStuff(KeyEvent e) {
        if (!isMyTrigger(e)) return false;
        doMyStuff();
        return true; 
    }

}

// usage:
KeyboardFocusManager.getCurrentKeyboardFocusManager()
    .addKeyEventDispatcher(new MyDispatcher()); 
```

请注意，您*可以*通过向 Toolkit 添加全局侦听器来实现目标，但需要注意以下几点：

*   作为一般规则，使用最适合工作的工具，特别是如果它是为满足确切要求而设计的
*   AWTEventListener 可能无法在安全受限的上下文中工作

# .net - 使用 ExtraData 将参数从授权服务器发送回客户端

> ID：15541567
> 
> 赞同：1
> 
> 时间：2013-03-21T07:16:51.650
> 
> 标签：.net, oauth-2.0, dotnetopenauth, access-token

我一直在尝试使用类`ExtraData`上的属性`EndUserAuthorizationSuccessBase`将额外的参数发送回客户端。我首先需要发回用户名，但后来我发现我可以从`AccessToken`. 现在我需要发回用户是否让她保持登录的选择（所以我会创建一个持久性 cookie 或一个在 30 分钟内过期的 cookie）。不幸的是，我无法让它正常工作。发生的情况是，当我在授权服务器上调用令牌的端点时，消息中的`OutgoingWebResponse`指示失败。下面是我的代码：`invalid token``Body`

```
 public ActionResult Login(String username, String password, String rememberMe, String keepMeSignedIn)
    {
        var request = Session[SESSION_KEY] as EndUserAuthorizationRequest;
        if (request != null)
        {
            Guid siteId = Guid.Parse(request.ClientIdentifier);
            Boolean isAuthenticated = this._identityProviderManager.Authenticate(siteId, "FA", username, password);
            if (isAuthenticated)
            {
                var serviceHost = new AuthorizationServerHost();
                var authorizationServer = new DotNetOpenAuth.OAuth2.AuthorizationServer(serviceHost);
                var approvalMessage = authorizationServer.PrepareApproveAuthorizationRequest(request, username, request.Scope);
                approvalMessage.ExtraData[GlobalConstants.Misc.KeepMeSignedIn] = Convert.ToString(keepMeSignedIn != null && keepMeSignedIn.Equals("on", StringComparison.InvariantCultureIgnoreCase));

                return authorizationServer.Channel.PrepareResponse(approvalMessage).AsActionResult();

            }
        }
        return View();
    } 
```

**令牌端点**

```
 public ActionResult GetToken()
    {
        AuthorizationServerHost serverHost = new AuthorizationServerHost();
        AuthorizationServer authorizationServer = new DotNetOpenAuth.OAuth2.AuthorizationServer(serverHost);
        OutgoingWebResponse response = authorizationServer.HandleTokenRequest(Request);
        ActionResult result = response.AsActionResult();
        return result;
    } 
```

为什么会这样？

# linux - 使用 Bash 脚本将第一个空格替换为文件中的其他字符串

> ID：15541568
> 
> 赞同：1
> 
> 时间：2013-03-21T07:16:53.227
> 
> 标签：linux, bash

例如，我在文件中有一个类似“test test test”的字符串。我想用'1'替换第一个空格，使其成为“test 1 test test”。

我试过`sed -i "s/^\ /\ 1\ /g" text.txt`了，但它会将所有空格更改为“ 1 ”，所以我想知道如何让它只发生在第一个找到的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:23:17.450

不要`'g'`像这样使用选项（全局替换）：

```
sed 's/ / 1 /' 
```

# matlab - 使用matlab函数“pdf”

> ID：15541575
> 
> 赞同：2
> 
> 时间：2013-03-21T07:17:19.007
> 
> 标签：matlab, probability, gaussian

我有一个`obj`64 维的高斯混合分布对象，想把它放在`pdf`函数中找出某个点的概率。

然而，当我输入`pdf(obj,obj.mu(1,:))`测试对象时，它会产生非常高的概率（如 2.4845e+069）

这没有意义，因为概率应该介于零和一之间。

我的matlab有问题吗？

ps 甚至`pdf(obj,obj.mu(1,:)+obj.Sigma(1,1)*rand())`产生高概率 (2.1682e+069)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T05:18:50.830

首先要做的事情是：概率密度函数并不总是评估为 1，它只是在其域上*积分为 1。*

此外，您看到的是拟合高斯混合模型时[的奇点问题（参见第 434 页，图 9.7）。](http://www.cse.psu.edu/~rcollins/CSE586Spring2010/papers/prmlMixturesEM.pdf)某些组件崩溃到单个数据点不可避免地会导致方差变为 0 并且 PDF 爆炸。这在高斯混合模型中经常遇到，因为它不是对数凸的，并且似然函数中有很多局部最大值。我们试图找到一个表现良好的、表现良好的局部最大值，而奇点是特别糟糕的情况。

当您看到这一点时，您将希望以不同的起点重新运行算法或减少您正在使用的组件数量。上面的书还建议将特定组件重置为不同的值。

另一种方法是使用贝叶斯方法，对参数采用先验或正则化项，这将惩罚古怪的值，例如 0 sigma 参数。

您可以使用不同的起始值间接控制第一部分`gmdistribution.fit`。对于第二部分，您可以使用`Regularize`参数： http: [//www.mathworks.com/help/stats/gmdistribution.fit.html](http://www.mathworks.com/help/stats/gmdistribution.fit.html)

# gridview - 在 WinRT 中存储来自 GridView 的数据

> ID：15541580
> 
> 赞同：0
> 
> 时间：2013-03-21T07:17:44.143
> 
> 标签：gridview, windows-runtime

我创建了一个开始为空的 GridView 布局。然后用户输入数据，并为每个条目创建一个 GridViewItem。数据绑定到代码隐藏中的集合。

保存此集合以使其在应用程序关闭和重新打开时仍然存在的最佳方法是什么？

我目前正在使用 SQLite，但我希望有一些更简单的方法可以让我存储实际对象，而不必将它们转换为数据库的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:15:49.733

这实际上取决于您要保存多少数据以及您希望如何使用它。如果不是数千个对象，将其保存在应用程序中本地就足够了。CodePlex 上有一个很棒的帮助类允许这样做，你可以在这里找到它：[Link to codeplex](http://winrtstoragehelper.codeplex.com/)。

辅助类是通用的，因此您可以非常轻松地保存和加载各种对象，而无需创建数据库。它使用异步，它支持使用[RoamingFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingfolder)、[TemporaryFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.temporaryfolder)和[LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder)存储文件夹存储和加载数据

# cakephp - 如何在 cakephp 中显示下拉分页数据中的选定值？

> ID：15541582
> 
> 赞同：3
> 
> 时间：2013-03-21T07:17:46.193
> 
> 标签：cakephp, pagination, cakephp-1.3, cakephp-2.0, cakephp-2.1

我在分页中遇到问题 我有三个下拉列表，我选择的结果显示完美，但是当我点击像 1|2|3 这样的分页数字时，问题就在这里，当我点击 2 时，选择选项将消失并获得默认结果，我从两天开始尝试了很多但我没有成功，我想当点击分页数字2时它显示第2页的选定下拉结果，我不明白发生了什么问题，这个是我的代码

```
$this->paginate = array(
    'conditions' => array(
        'association_id' => $associationId,
        'is_archive'     => false,
        'AssocMember.mem_id'    => $request['associations']['mem_type'],
        'AssocMember.status_id' => $request['associations']['status'],
        $cond4,
        isset($keywordQuery) ? $keywordQuery : "",              
    ),
    'limit' => 10 
);

$members = $this->paginate('AssocMember');
$this->set('members',$members); 
```

这就是我的观点，我称之为分页

```
echo $this->PaginatorManager->options(array('update'=> REGION_LEFT_COL));
echo $this->PaginatorManager->numbers(); 
```

我不知道怎么了？请帮助我，我卡在这里，提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:15:59.570

该链接不包含您的所有视图代码，因此很难说。我怀疑您的问题是，当您单击分页链接时，url 中的参数没有传递给您的操作。

要解决此问题，您需要将 url 参数传递给分页对象，以使其始终附加值。前任：

尝试将此添加到您的视图中：

```
$urlparams = $this->params['url'];
unset($urlparams['url']);

$this->Paginator->options(array('url' => array('?' => http_build_query($urlparams)))); 
```

# sql - 来自数据库的信号值分类限制

> ID：15541589
> 
> 赞同：0
> 
> 时间：2013-03-21T07:18:14.453
> 
> 标签：sql, classification

给定一些信号，我需要找出具有配置的最小和最大限制的机器的状态。我计划建立一个具有以下结构的表（和示例数据）

```
| StateID | SignalID | min | max |  
|---------|----------|-----|-----|  
|    1    |    1     |  1  |  2  |  
|    1    |    3     |  2  |  3  |  
|    2    |    2     |  0  |  4  |  
|    3    |    2     |  5  |  9  | 
```

因此，我可以通过有效的那些行找到可能的状态（在 SignalID 的值介于 min 和 max 之间的意义上）。所有信号的有效状态的交集应该导致正确的状态（假设表格以这种方式完成）。但是-至于某些状态，可能对给定信号没有亲和力-我认为必须首先遍历状态-似乎效率低下，或者？
上表中的一些示例（如果已实现，则 SignalValue 介于 min 和 max 之间）：

*   (1,2,3) -> 1（第 1 行和第 2 行已完成）或 -> 2（第 3 行已完成）
*   (2,9,2) -> 1（第 1 行和第 2 行已完成）或 -> 3（第 4 行已完成）
*   (3,1,3) -> 2（仅满足第 3 行）
*   (3,8,2) -> 3（仅满足第 4 行）

重新开始我有一些问题：

1.  我可以更改表结构（或逻辑）中的某些内容以优化它吗？
2.  如何处理不依赖于信号的状态而不为该状态添加具有 min=-infinity 和 max=infinity 的行？
3.  由于状态和信号的数量是动态的——如何高效地进行相应的查询？可以在 SQL 中完成（结果的动态计数的）交集吗？

感谢您的任何想法和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:15:17.287

好的，我将回答我认为您的问题，而不是您实际提出的问题。因此，如果我没有得到您想要做的事情，请进一步澄清。

您正在存储两个不同的事实，但您只给出了一个示例。我假设您要记录 A) 允许的状态和 B) 观察到的状态，即：

```
CREATE TABLE valid_states (
  state_nbr integer not null,
  signal_nbr integer,
  signal_min integer,
  signal_max integer,

  PRIMARY KEY (state_nbr, signal_nbr)
);

CREATE TABLE observed_signals (
  signal_nbr integer primary key,
  signal_value integer not null
); 
```

然后，您可以通过从以下两者中进行选择来查询“观察到的有效状态”：

```
SELECT s.state_nbr, o.signal_nbr 
  FROM valid_states AS s LEFT JOIN observed_signals AS o ON s.signal_nbr = o.signal_nbr 
  WHERE o.signal_value BETWEEN s.signal_min AND s.signal_max 
    OR (s.signal_min IS NULL AND o.signal_value <= s.signal_max)
    OR (s.signal_max IS NULL AND o.signal_value >= s.signal_min)
    OR (s.signal_min IS NULL AND s.signal_max IS NULL); 
```

好吧，可能有一些方法可以更有效地编写该查询，但你明白了。

# python - 如何在 Numpy 中绘制 FFT

> ID：15541590
> 
> 赞同：5
> 
> 时间：2013-03-21T07:18:17.023
> 
> 标签：python, matlab, image-processing, numpy

这似乎是一个非常简单的问题，但我找不到任何文档。

我在 Numpy 中有一个图像，我想要`imshow`FFT。

在 Matlab 中我可以做到

```
F = fft(myimg)
imshow(F) 
```

我不能在 Numpy 中做同样的事情，因为 F 是复值。尝试这样做`imshow(real(F))`会给我一个全黑的图像-我猜是因为在 [0,1] 而不是 0..255 中。乘以 255 也不能解决问题。

关于如何获得我的情节的任何想法？

*更新：*

好的，natan 指出了我如何错误地简化了这个问题。请允许我回溯一下。我有一个尺寸为（200、30、30、3）的视频矩阵。200 帧，30x30 像素，3 个颜色通道。对于每个像素的每个颜色通道，我想计算该像素在系列中随时间变化的 fft。那应该给我一个新的矩阵，即 (200,30,30,3)。对于每个像素，跨每个颜色通道，每个像素的 200 维时间傅里叶变换。然后我应该能够查看例如由每个像素中傅立叶变换的第一个系数的值创建的图像。

请注意，matlab fft 在第一个非单一维度上运行，所以`F = fft(video)`我正在做的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T07:48:43.723

这是使用 scipy 的 2D 图像的示例：

```
from scipy import fftpack
import numpy as np
import pylab as py

# Take the fourier transform of the image.
F1 = fftpack.fft2(myimg)

# Now shift so that low spatial frequencies are in the center.
F2 = fftpack.fftshift( F1 )

# the 2D power spectrum is:
psd2D = np.abs( F2 )**2

# plot the power spectrum
py.figure(1)
py.clf()
py.imshow( psf2D )
py.show() 
```

对于一维迹线，您可以[在此处](https://stackoverflow.com/questions/9456037/scipy-numpy-fft-frequency-analysis)查看示例...

# zeromq - ZeroMQ pub-sub 类别：多个订阅是否可以使用通配符？

> ID：15541598
> 
> 赞同：0
> 
> 时间：2013-03-21T07:18:58.527
> 
> 标签：zeromq, publish-subscribe

我一直在阅读 ZeroMQ 文档，我想知道是否有办法使用通配符进行订阅？我需要一个系统，您可以在其中发布类似 ABC 的内容，然后订阅`*`A..C 或 AB `*`（即订阅`*`A..C 将匹配 ABC、AXC、AYC 等上的发布）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-12T05:35:14.693

## 直接地？不
，间接的？哦，当然，先生！

方法的ZeroMQ 语法`.setsockopt( zmq.SUBSCRIBE, ... )`本身不允许设置其他但前缀匹配的主题过滤器订阅。由于 Martin SUSTRIK 和 Pieter HINTJENS 多次提到的性能原因，过滤内部使用的技术不允许更复杂的字符串/解析。

一个有趣的事情是由此产生的副作用 - 人们无法避免扩展字符串，这些字符串“超出”主题过滤器长度，来自正匹配并因此被传递。

这并不意味着，我们会放弃。众所周知，ZeroMQ 确实可以对数千个项目进行操作，所以让我们利用这一魔力。

## 如何设置过滤器`"A.*.C"`？

一种方法可能是使用相当幼稚（温和）的力量并“机械地”设置形式过滤器“A.*.C”的所有可能“扩展” - 即：

```
for aWildcardToEXPAND_item in ( "A", "B", "C", "D", ... ): # all legal expansions
    aSUB.setsockopt( zmq.SUBSCRIBE, "A.{0:%s}.C".format( aWildcardToEXPAND_item ) )
pass; # just-SEQ life is great & so forgiving :o) 
```

许多更智能、装饰性、使用上下文的专用迭代器可能有助于将其扩展到简单的设置/丢弃扩展/订阅迭代器，这将满足您的所有需求，所以不要犹豫，继续前进，这是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:19:49.257

ZeroMQ`PUB/SUB`进行前缀匹配。所以 AB* 很好（在你的例子中将匹配 ABC）。
不支持“就地匹配”，原因很明显（订阅存储在 trie 数据结构中）[ [http://www.250bpm.com/blog:19]](http://www.250bpm.com/blog:19])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T14:37:31.733

您可以在进程中的 zmq 套接字中订阅“”，然后在那里实现更高级的过滤器作为代理执行线程，该代理线程通告接收执行过滤请求的实际 XPUB 套接字。

# c# - 将内容插入到 sqlite 中的列中

> ID：15541600
> 
> 赞同：2
> 
> 时间：2013-03-21T07:19:14.640
> 
> 标签：c#

我的sqlite表是这样的

```
 content_id      content_no      content_1       content_2
  1               1:1             NULL            1:1 text
  2               1:2             NULL            1:2 text 
```

现在我想将内容插入“content_1”。只有 content_no 与 content_1 的 1:1 匹配。

我的插入代码是这样的：

```
 cmd.CommandText = "insert into Content (content_1) values (?)";

 SQLiteParameter Field3 = cmd.CreateParameter();
 cmd.Parameters.Add(Field3);
 Field3.Value = node.InnerText; 
```

但它正在插入这样的内容

```
 content_id      content_no      content_1       content_2
  1               1:1              NULL           1:1 text
  2               1:2              NULL           1:2 text
                                 1:1 text       
                                 1:2 text 
```

我不想这样。最后两行应该移到前两行

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T04:52:58.557

```
using (SQLiteTransaction SQLiteTrans = connection.BeginTransaction())
               {
                   using (SQLiteCommand cmd = connection.CreateCommand())
                   {
                     cmd.CommandText = ("update contents set content_1 ='" + paraNode + "' where content_id ='" + Count + "'");

                       SQLiteParameter Field1 = cmd.CreateParameter();
                       SQLiteParameter Field2 = cmd.CreateParameter();
                       cmd.Parameters.Add(Field1);
                       cmd.Parameters.Add(Field2);
                       cmd.ExecuteNonQuery();
                   }
                   SQLiteTrans.Commit();
               } 
```

快乐编码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:20:22.997

> 我不想这样。最后两行应该移到前两行

您需要**UPDATE**语句，而不是`INSERT`语句。

```
cmd.CommandText = "Update Content SET content_1 = @pcontent_1 WHERE content_id = @pcontent_id";

cmd.Parameters.Add(new SQLiteParameter("@pcontent_1", "1:1"));
cmd.Parameters.Add(new SQLiteParameter("@pcontent_id", node.InnerText)); 
```

您需要将`content_id`and传递`content_1`给查询的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:21:41.660

您要么必须拥有`delete`以前的内容和`insert`新的内容，要么，

只需`UPDATE`对现有内容进行查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:24:17.283

在您的情况下使用**Update**更合适，但您还需要提供主键，而不仅仅是 content_1

# c# - 无法更新。数据库或对象是只读的

> ID：15541601
> 
> 赞同：1
> 
> 时间：2013-03-21T07:19:21.197
> 
> 标签：c#, asp.net-mvc, excel, oledbconnection

在我的 MVC3 Razor 项目中，我上传了一张 Excel 表格并将其保存在我的项目文件夹中。我需要读取 excel 中的值。为此，我只需创建 OLedbConnection。我收到错误“无法更新。数据库或对象是只读的。” 在执行行 dbConnection.Open();

控制器：

```
 string fp="@"+Session["FilePathFinal"].ToString();
        DataTable fooData = new DataTable();
        OleDbConnection dbConnection =
          new OleDbConnection
            (@"Provider=Microsoft.Jet.OLEDB.4.0;"
             + @"Data Source='"+fp+"';"
             + @"Extended Properties=""Excel 8.0;""");
        dbConnection.Open(); 
```

fp 是文件路径。文件路径包含值 `@D:\MVC\Admin\Import.Admin\App_Data\ImportFileHome\Baby needs.csv`

如何摆脱这个问题。有什么帮助？？？

注意：我的 excel 文件是 Excel 2013

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-08-03T23:09:45.253

对于 CSV 试试这个：

```
OleDbConnection conn = new OleDbConnection
               ("Provider=Microsoft.Jet.OleDb.4.0; Data Source = " +
                 Path.GetDirectoryName(FileName) +
                 "; Extended Properties = \"Text;HDR=YES;FMT=Delimited\""); 
```

# java - Maven 说尽管存在依赖，但现在存在依赖

> ID：15541602
> 
> 赞同：1
> 
> 时间：2013-03-21T07:19:25.330
> 
> 标签：java, maven, intellij-idea

我有一个包含两个模块的项目，我需要在另一个模块中使用第一个模块中的类。为此，我在第一个的 pom 文件中添加了依赖项：

```
<dependency>
      <groupId>com.mdnaRabbit.worker</groupId>
      <artifactId>Worker</artifactId>
      <version>1.0-SNAPSHOT</version>
  </dependency> 
```

当我尝试添加的模块的 pom 如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

    <parent>
        <artifactId>DLP</artifactId>
        <groupId>com.messagedna.dlp</groupId>
        <version>1.0</version>
    </parent>
    <groupId>com.mdnaRabbit.worker</groupId>
  <artifactId>Worker</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>Worker</name> 
```

当我像这样将课程导入第一堂课时：

```
import com.mdnaRabbit.worker.data.Data; 
```

并尝试执行打包我有以下跟踪：

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/mikhail/bzrrep/DLP/NewTask/src/main/java/com/mdnaRabbit/newt/App.java:[9,33] error: package com.mdnaRabbit.worker.data does not exist
[ERROR] /home/mikhail/bzrrep/DLP/NewTask/src/main/java/com/mdnaRabbit/newt/App.java:[39,19] error: cannot find symbol
[ERROR]  class App
/home/mikhail/bzrrep/DLP/NewTask/src/main/java/com/mdnaRabbit/newt/App.java:[27,12] error: cannot find symbol
[ERROR]  class App
/home/mikhail/bzrrep/DLP/NewTask/src/main/java/com/mdnaRabbit/newt/App.java:[40,8] error: cannot find symbol
[ERROR]  class App
/home/mikhail/bzrrep/DLP/NewTask/src/main/java/com/mdnaRabbit/newt/App.java:[40,24] error: cannot find symbol
[INFO] 5 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure 
```

导入字符串没有红色下划线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:28:34.410

**已解决**：我需要运行“mvn install”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:31:25.357

也许这会有所帮助。

```
<plugin>
    <groupId>com.mdnaRabbit.worker</groupId>
    <artifactId>WORKER</artifactId>
    <version>1.0-SNAPSHOT</version>
    <configuration>
          <!-- parameters and values common to all goals, as required -->
    </configuration>
</plugin> 
```

或者尝试手动安装。

# mysql - 为什么我无法在运行时更改变量 long_query_time 变量

> ID：15541603
> 
> 赞同：33
> 
> 时间：2013-03-21T07:19:36.087
> 
> 标签：mysql, mysql-slow-query-log

我正在使用 MySQL 5.1.66 版。我看到[long_query_time](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_long_query_time)变量是动态的，但是当我尝试

```
set GLOBAL long_query_time=1; 
```

再次进行上述操作后我尝试了

```
mysql> show variables like 'long_query_time';
+-----------------+-----------+
| Variable_name   | Value     |
+-----------------+-----------+
| long_query_time | 10.000000 |
+-----------------+-----------+
1 row in set (0.00 sec) 
```

从 mysql 控制台它没有得到改变，为什么？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-21T07:31:54.623

您正在设置一个 GLOBAL 系统变量，但您正在查询 SESSION 变量。要使 GLOBAL 变量设置对当前会话生效，您需要重新连接，或者设置 @@SESSION.long_query_time 变量。（注意 SHOW VARIABLES 默认显示会话变量。）

这是一个例子：

```
mysql> SHOW SESSION VARIABLES LIKE "long_query_time";
+-----------------+-----------+
| Variable_name   | Value     |
+-----------------+-----------+
| long_query_time | 10.000000 |
+-----------------+-----------+

mysql> SET @@GLOBAL.long_query_time = 1;

mysql> SHOW GLOBAL VARIABLES LIKE "long_query_time";
+-----------------+----------+
| Variable_name   | Value    |
+-----------------+----------+
| long_query_time | 1.000000 |
+-----------------+----------+

mysql> SHOW VARIABLES LIKE "long_query_time";
+-----------------+-----------+
| Variable_name   | Value     |
+-----------------+-----------+
| long_query_time | 10.000000 |
+-----------------+-----------+ 
```

* * *

MySQL 8.0 引入了`SET PERSIST ..`有助于持久化动态设置的配置的语法。请参阅[MySQL 8.0 手册](https://dev.mysql.com/doc/refman/8.0/en/set-variable.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T07:25:36.203

更改 mysql (cfr. [http://dev.mysql.com/doc/refman/5.1/en/set-statement.html](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html) ) 中的系统变量值不会更改已连接到会话的客户端的值。

更改将持续到服务器重新启动、后续更改或会话到期。

请参阅[http://bugs.mysql.com/bug.php?id=38704](http://bugs.mysql.com/bug.php?id=38704)了解更多详情

# php - 在 PHPUnit 中模拟具有内部依赖关系的对象

> ID：15541604
> 
> 赞同：3
> 
> 时间：2013-03-21T07:19:43.400
> 
> 标签：php, unit-testing, mocking, phpunit

我对测试有点陌生，我想了解如何在现实世界场景中实施测试。例如，有这段代码实现了一个内部框架，并使用了方法链。乍一看，我认为 mocking 是最好的方法，但大多数例子都是这样的：

```
public function someFunction(A $a)
{
    return $a * b;
} 
```

但是，我正在测试的代码是这样的：

```
public function deleteUser($user_id)
{
    $user_id = (int)$user_id;
    $flag = Framework::getInstance()->request->get('delete') || false;

    if (!$this->exists($user_id)) {
        throw new UserException(UserException::NOT_EXIST);
    }

    return $this->delete([
        'id' => $user_id
    ]);
} 
```

你将如何测试它？

我已经查看了“[在 PHPUnit 中测试具有依赖关系的对象](https://stackoverflow.com/questions/545282/testing-objects-with-dependencies-in-phpunit)”，但修改实际代码不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T18:42:58.797

简短的回答：您不能对该代码进行单元测试。由于静态方法调用，代码与Framework类过于耦合，无法单独测试*deleteUser()*方法。[这篇](http://sebastian-bergmann.de/archives/882-Testing-Code-That-Uses-Singletons.html)关于测试使用单例的代码的文章很好地描述了这种情况。

长答案是您无法对该代码进行单元测试，但您仍然可以创建有用的测试，例如集成测试或功能测试。您可以[将此问题](https://stackoverflow.com/questions/4904096/whats-the-difference-between-unit-functional-acceptance-and-integration-test)用作参考，但基本上，在集成测试中，您可以同时测试代码的多个部分。在这种测试中，您可以测试此方法的预期行为，即删除用户，而不必担心您的类的依赖关系。你想测试两个类（被测类和框架类）一起工作，所以你不需要模拟任何东西。

说了这么多，为什么不改代码呢？我强烈建议将依赖项注入您的代码（如第一篇文章中所述）而不是使用单例。

# javascript - JW 播放器无法在 IE 8 中运行

> ID：15541610
> 
> 赞同：8
> 
> 时间：2013-03-21T07:20:13.940
> 
> 标签：javascript, internet-explorer-8, jwplayer

我只是在检查 JW Players 与所有浏览器的兼容性。但是，在 IE 8 浏览器中甚至没有出现空白屏幕，在其他浏览器中它运行良好。

我已经阅读了链接[JWPlayer Not Working for Internet Explorer 8](https://stackoverflow.com/questions/12983801/jwplayer-not-working-for-internet-explorer-8)但无法获得任何帮助。

```
<html>
<head>
<script type="text/javascript" src="jwplayer.js"></script>
</head>
<body>
<script>
if((window.outerWidth && window.outerWidth > 640) || (document.body.clientWidth && 
document.body.clientWidth > 640)){
alert('error'); 
 }
</script>
<div id="myElement">Loading the player ...</div>
<script type="text/javascript">
    jwplayer("myElement").setup({
        file: "myVideo.mp4",
         image: "myPoster.jpg",
           });

</script>
<ul>
    <li onclick='jwplayer().play()'>Start playback</li>
    <li onclick='alert(jwplayer().getVolume())'>Get audio volume</li>
    <li onclick='jwplayer().pause();'>pause</li>

</ul>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T07:24:52.600

尝试。

```
<script type="text/javascript">
jwplayer("myElement").setup({
    file: "myVideo.mp4",
     image: "myPoster.jpg"
       });
</script> 
```

逗号已删除

# excel - 根据tabstrip索引将一系列数字从regedit复制到多个工作表？

> ID：15541616
> 
> 赞同：0
> 
> 时间：2013-03-21T07:20:31.290
> 
> 标签：excel, excel-2010, userform, vba

我正在尝试在 EXCEL/VBA 中创建一个用户表单，一旦选择了命令按钮“预测”，它将允许您选择数据范围并将数据范围复制到特定工作表，具体取决于标签条索引。

到目前为止，这是我对 tabstrip 所做的更改：

```
Private Sub tbsMethod_Change()
Dim tabIndex As Integer
tabIndex = tbsMethod.SelectedItem.Index
Select Case tabIndex
Case 0
Label2.Visible = True
RefEdit1.Visible = True
Label_a.Visible = False
Label_b.Visible = False
Label_g.Visible = False
TextBox_a.Visible = False
TextBox_b.Visible = False
TextBox_g.Visible = False
Case 1
Label2.Visible = True
.... 
```

这就是我认为问题所在（commandbutton_click）：

```
Sub ForecastButton_Click()
Dim tabIndex As Integer
Dim ws As Worksheet
tabIndex = tbsMethod.SelectedItem.Index
With ThisWorkbook
Select Case tabIndex
'copies to worksheet or "module"
Case 0
Application.GoTo ActiveWorkbook.Sheets("Sheet1").Range("B7")
Range(RefEdit1.Value).Copy Destination:=Sheet1.Range("B7:B26")
Case 1
Range(RefEdit1.Value).Copy Destination:=Sheet3.Range("B7:B26")
Application.GoTo ActiveWorkbook.Sheets("Sheet3").Range("B7")
Case 2
Application.GoTo ActiveWorkbook.Sheets("Sheet4").Range("B7")
.Cells(29, 2).Value = Me.TextBox_a.Value
Range(RefEdit1.Value).Copy Destination:=Sheet4.Range("B7:B26")
Case 3
Application.GoTo ActiveWorkbook.Sheets("Sheet5").Range("B7")
.Cells(29, 2).Value = Me.TextBox_a.Value
.Cells(30, 2).Value = Me.TextBox_b.Value
Range(RefEdit1.Value).Copy Destination:=Sheet5.Range("B7:B26")

Case 4
Application.GoTo ActiveWorkbook.Sheets("Sheet6").Range("B7")
.Cells(29, 2).Value = Me.TextBox_a.Value
.Cells(30, 2).Value = Me.TextBox_b.Value
.Cells(31, 2).Value = Me.TextBox_g.Value
Range(RefEdit1.Value).Copy Destination:=Sheet6.Range("B7:B26")

End Select
Unload dfMod
End With

Me.R.Value = ""
Private Sub cmdClose_Click()
    Unload dfMod
End Sub 
```

我收到错误消息“错误 9 下标超出范围”。现在它说“找不到方法或数据成员”。VBA/EXCEL 相当新，所以任何帮助将不胜感激

谢谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:49:25.933

你的代码中有

```
With thisworkbook
    ...
    .cells(... 
```

`cells`不是`workbook`对象的属性或方法，将返回错误

# javascript - webrtc - 语音不起作用

> ID：15541620
> 
> 赞同：0
> 
> 时间：2013-03-21T07:20:47.877
> 
> 标签：javascript, html, webrtc

我想使用 webRTC 显示来自我的相机的视频并从我的麦克风听到声音，但语音不起作用。你知道为什么我的代码不能正常工作吗？

JS

```
if(navigator.getUserMedia){
        navigator.getUserMedia({
                video: true,
                audio: true
        }, onSuccess, onError);
}else{
        console.log('Twoja przegladarka nie obsluguje webRTC - getUserMedia');
}

function onSuccess(stream){
        var video = document.getElementById('webcam'),
        videoSrc;
        //audioContext,
        //mediaStreamSource;

         if (window.webkitURL) {
      videoSource = window.webkitURL.createObjectURL(stream);
    } else {
      videoSource = stream;
    }

        video.autoplay = true;
        video.src = videoSource;

var audioContext = 'AudioContext' in window ? new AudioContext() :
    (('webkitAudioContext' in window) ? new webkitAudioContext() : null);
  if (audioContext) {
    var mediaStreamSource = audioContext.createMediaStreamSource(stream);
    mediaStreamSource.connect(audioContext.destination);
  } else {
    // ...
  }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:06:04.830

27.0.1436.1 之前的 Chrome 版本默认为与 LocalMediaStreams 关联的视频元素设置“静音”属性。设置`video.muted = false`应启用本地音频播放。

有关更多信息，请参阅[此帖子](https://groups.google.com/forum/#!msg/discuss-webrtc/ggDyBJxN4p8/mMEAqFbufsYJ)和[此示例](https://webrtc.googlecode.com/svn/trunk/samples/js/demos/html/local-audio-rendering.html)。

# google-app-engine - 使用 UnicodeDecodeError 升级到 gae 1.7.6 后 dev_appserver 崩溃

> ID：15541627
> 
> 赞同：2
> 
> 时间：2013-03-21T07:21:28.040
> 
> 标签：google-app-engine

在我升级到 gae 1.7.6 后，dev_appserver 崩溃了，因为我有带有德语变音符号的文件夹。
1.7.5 可以正常工作！

```
    2013-03-21 07:26:26 运行命令：“['C:\\Python27\\pythonw.exe', 'C:\\Program Files (x86)\\Google\\google_appengine\\dev_appserver.py' ,
    '--skip_sdk_update_check=yes', '--port=8080', '--admin_port=8000', '--storage_path=C:/rugad', 'C:\\rugad\\gae']"
    INFO 2013-03-21 07:26:33,154 devappserver2.py:401] 跳过 SDK 更新检查。
    INFO 2013-03-21 07:26:33,276 api_server.py:152] 在以下位置启动 API 服务器：http://localhost:49981
    INFO 2013-03-21 07:26:33,283 dispatcher.py:98] 启动服务器“默认”运行在：http://localhost:8080
    INFO 2013-03-21 07:26:33,288 admin_server.py:117] 在以下位置启动管理服务器：http://localhost:8000
    回溯（最近一次通话最后）：
      文件“C:\Program Files (x86)\Google\google_appengine\_python_runtime.py”，第 194 行，在
        _run_file(__file__, globals())
      _run_file 中的文件“C:\Program Files (x86)\Google\google_appengine\_python_runtime.py”，第 190 行
        execfile(script_path, globals_)
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\runtime.py”，第 101 行，在
        主要的（）
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\runtime.py”，第 78 行，在 main
        sandbox.enable_sandbox（配置）
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\sandbox.py”，第 168 行，在 enable_sandbox
        __import__('网站')
      文件“C:\Python27\lib\site.py”，第 563 行，在
        主要的（）
      文件“C:\Python27\lib\site.py”，第 545 行，在 main
        known_paths = addusersitepackages(known_paths)
      文件“C:\Python27\lib\site.py”，第 280 行，在 addusersitepackages 中
        如果 ENABLE_USER_SITE 和 os.path.isdir(user_site):
      文件“C:\Python27\lib\genericpath.py”，第 41 行，在 isdir
        st = os.stat(s)
      __call__ 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\stubs.py”，第 268 行
        如果不是 FakeFile.is_file_accessible(path)：
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\stubs.py”，第 237 行，在 is_file_accessible
        _is_path_in_directories(fixed_filename, FakeFile._allowed_dirs))
      _is_path_in_directories 中的文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\devappserver2\python\stubs.py”，第 289 行
        如果 os.path.commonprefix([fixed_pa​​th, fixed_pa​​rent]) == fixed_pa​​rent:
      文件“C:\Python27\lib\genericpath.py”，第 71 行，通用前缀
        s1 = min(m)
    UnicodeDecodeError：“ascii”编解码器无法解码位置 10 中的字节 0xe4：序数不在范围内（128）
    错误 2013-03-21 07:26:37,250 http_runtime.py:221] 来自运行时的意外端口响应 ['']; 退出开发服务器
    INFO 2013-03-21 07:26:37,315 api_server.py:517] 应用所有待处理事务并保存数据存储
    INFO 2013-03-21 07:26:37,315 api_server.py:520] 保存搜索索引
    2013-03-21 07:26:37（进程以代码 0 退出）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:59:40.007

根据您的错误消息，似乎发生了错误`'_python_runtime.py'`。**当我将 Google App Engine 1.7.5**更新为**1.7.6**时，我遇到了类似的错误。

就我而言，我的`'_python_runtime.py'`文件丢失了。

你会尝试检查你的这个文件是最新的吗？

我从这个 url 得到这个文件。 [https://googleappengine.googlecode.com/svn/trunk/python/_python_runtime.py](https://googleappengine.googlecode.com/svn/trunk/python/_python_runtime.py)

而且，我将此文件放入以下文件夹。

```
/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine 
```

（对不起，我用的是Mac。所以我不知道谷歌应用引擎在Windows环境中安装在哪里。）

# ios - UISegmentedControl 显示不同的视图控制器

> ID：15541628
> 
> 赞同：0
> 
> 时间：2013-03-21T07:21:33.250
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, uisegmentedcontrol

我只是问自己是否可以使用 a`UISegmentedControl`从一个视图控制器传递到另一个（`UISegmentedControl`更准确地说，每个视图控制器中一个）。

人机界面指南文档中提到，它`UISegmentedControl`可以用于从一种视图、一种外观到另一种视图，但没有提及`viewController`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:43:56.523

我认为您可以使用一个容器视图控制器，添加一些子视图控制器并在段控制选择更改时在它们之间切换。

# scheme - transform-painter 如何在 SICP 中的图片语言中工作

> ID：15541632
> 
> 赞同：4
> 
> 时间：2013-03-21T07:21:40.523
> 
> 标签：scheme, image, sicp

[在 SICP 中的图片语言中，](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html#%_sec_2.2.4)我无法理解该`transform-painter`过程的工作原理：

```
(define (transform-painter painter origin corner1 corner2)
  (lambda (frame)
    (let ((m (frame-coord-map frame)))
      (let ((new-origin (m origin)))
        (painter
         (make-frame new-origin
                     (sub-vect (m corner1) new-origin)
                     (sub-vect (m corner2) new-origin))))))) 
```

特别是为什么新原点对参数帧的边缘映射的向量减法是必要的。我会认为新角的映射，即`(m corner1)`和`(m corner2)`，可以作为变换框架的新边缘。

我做了一些计算，我想知道我在哪里搞混了。举`flip-vert`个例子，

```
(define (flip-vert painter)
  (transform-painter painter
                     (make-vect 0.0 1.0)   ; new origin
                     (make-vect 1.0 1.0)   ; new end of edge1
                     (make-vect 0.0 0.0))) ; new end of edge2 
```

让`flip-vert`具有以下尺寸的框架作为参数，

> 原点 = (0, 0), 边 1 = (4, 0), 边 2 = (0, 4)

因此，映射公式将变为`(0,0) + x(4,0) + y(0, 4)`。

在, , 和作为参数传递给`flip-vert`,和的情况下。`origin``corner1``corner2``transform-painter``(0,1)``(1,1)``(0,0)`

所以在把它们放入映射公式之后，一个接一个，我们得到结果

> 新原点 = (0,0)+0*(4,0)+1*(0,4) = (0,4)
> 
> 映射角1 = (0,0)+1*(4,0)+1*(0,4) = (4,4)
> 
> 映射角2 = (0,0)

现在`transform-painter`获取最后两个结果并将它们减去`new-origin`以构建新框架，从而得到具有以下尺寸的框架。

> 原点 = (0,4)，新角 1 = (4,0)，新角 2 = (0,-4)

在坐标平面上查看这些点，结果似乎不正确，而在减法发生之前的原始角结果，确实如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:53:49.833

请看附图（对不起我的绘画技巧:)）。我已将转换后的向量标记为**mcorner1**，您说它足以作为画家将要作用的新框架的新角（**mcorner1**是映射到**corner1点的****m**坐标变换）。

 **但请注意，这是一个仅在正确点“结束”的向量。您也必须翻译原点才能获得正确的帧。现在观察新原点位于**新原点**处，并且您寻找的新角（红色角）确实是前两个角的向量差。

![位于单位正方形中的蓝框映射到红框](../Images/166c18056e5f81583bc3d64ae4bc0823.png)

（图片显示位于单位正方形中的蓝色框架被映射到红色框架上）**

# python - 如何使用python获取excel工作表中的行号？

> ID：15541641
> 
> 赞同：12
> 
> 时间：2013-03-21T07:22:36.197
> 
> 标签：python, xlrd

我有一个这样的 Excel 表：

```
 A B C D E F G
1 0 0 0
2   0 0
3 0
4
5 0 0 0 0 0 0 0
6 0 0   0 
```

每个“0”代表一些数据值，我正在读取这些值并将它们与我的原始数据进行比较，当数据匹配失败时，它会返回一条消息。我想要的是返回 excel 表的行号以及列号或特别是 CELL 位置。请帮我这样做！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T07:42:15.763

试试这个：

```
import xlrd
workbook = xlrd.open_workbook('book.xls')
for sheet in workbook.sheets():
    for row in range(sheet.nrows):
        for column in range(sheet.ncols):
            print "row::::: ", row
            print "column:: ", column
            print "value::: ", sheet.cell(row,column).value 
```

它会给你确切`row`的`column`数字和`cell`价值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:42:24.323

在遍历工作表时跟踪列和行。An`xlrd` `Cell`不会跟踪他们在工作表中“居住”的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:43:12.923

如果您正在比较单元格值，那么您的索引是行号和列号，否则您可以在行和列循环上启动计数器，并在每次迭代时递增，这将告诉您确切的列号和行号。

# java - 寻找 JDOM2 XPath 示例

> ID：15541652
> 
> 赞同：4
> 
> 时间：2013-03-21T07:23:37.000
> 
> 标签：java, xpath, jdom-2

我是第一次使用 JDOM2，我正在寻找一些基于 XPATH 的示例。

例如：我的 XML 如下所示

```
<Root>
  <Parent id="1">
    <Child id="1" />
    <Child id="2" />
    <Child id="3" />
  </Parent>
  <Parent id="2">
    <Child id="1" />
    <Child id="2" />
    <Child id="3" />
  </Parent>
  <Parent id="3">
    <Child id="1" />
    <Child id="2" />
    <Child id="3" />
  </Parent>
</Root> 
```

我的背景是 .NET & XPATH 遍历使用 System.XML 非常容易

我正在开发一个需要使用 XML 的（新的）Java 应用程序。我打算使用JDOM2。我想使用 DOM 解析而不是 SAX。

我正在寻找一些关于如何将 XPATH 与 JDOM2 一起使用的示例。

前任。我如何导航到一个元素让我们说`"/Root/Parent[@id='2']/Child[@id='3']"`

你们能给我举一些例子吗？我搜索过，但找不到 JDOM2 的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T07:55:49.657

好的，找到了这个[https://github.com/hunterhacker/jdom/wiki/JDOM2-A-Primer](https://github.com/hunterhacker/jdom/wiki/JDOM2-A-Primer)并且似乎很有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-20T15:01:17.737

[http://www.studytrails.com/java/xml/jdom2/java-xml-jdom2-xpath/](http://www.studytrails.com/java/xml/jdom2/java-xml-jdom2-xpath/)

是使用 JDOM2 和 XPATH 的示例

# java-me - lwuit 资源编辑器中的自定义选项卡标题

> ID：15541654
> 
> 赞同：0
> 
> 时间：2013-03-21T07:23:44.887
> 
> 标签：java-me, lwuit, codenameone

我正在尝试为一个应用程序创建一个代号，在该应用程序中我必须使用选项卡式表单。我制作了一个带有标签容器的表单，它有三个容器来显示三个标签。但是这三个选项卡标题看起来很笨重，对于我的 UI 来说高度很大。

我们如何编辑它的高度？
如果可以，我们可以制作自己的标签页眉，那么如何制作？
我们可以在其中使用任何类型的渲染器吗？

可以使用 lwuit res 编辑器完成还是我必须在代码中完成。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:20:59.377

只需将选项卡边框定义为空，它将删除边框，从而缩小选项卡占用的大小。对 TabsContainer UIID 执行相同操作，并且选项卡占用的大小应该非常小。如果您希望它仍然看起来不错，只需定义一个符合您要求的新“更小”边框。

# php - 使用 GD 更改图像颜色

> ID：15541657
> 
> 赞同：0
> 
> 时间：2013-03-21T07:24:08.033
> 
> 标签：php, image-manipulation, php-gd, imagefilter

我想了解 PHP 中的图像处理并编写一些代码来编辑照片。

所以，我正在阅读有关 imagefilter() 函数的信息，但我想手动编辑颜色。

我有一小段带有 imagefilter 的代码来做图像棕褐色

```
imagefilter($image, IMG_FILTER_GRAYSCALE); 
imagefilter($image, IMG_FILTER_COLORIZE, 55, 25, -10);
imagefilter($image, IMG_FILTER_CONTRAST, -10); 
```

我想做同样的事情，但没有 imagefilter(); 有可能的？

我知道它可能会获取图像中的颜色，然后更改它们并重新绘制它；

要获得图像颜色，我有这个：

```
$rgb = imagecolorat($out, 10, 15);
$colors = imagecolorsforindex($out, $rgb); 
```

这打印：

```
array(4) { 
  ["red"]=> int(150) 
  ["green"]=> int(100) 
  ["blue"]=> int(15) 
  ["alpha"]=> int(0) 
```

}

因为我可以编辑那些值并将它们整合到图片中？

我将不胜感激任何形式的帮助：书籍、教程、代码片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:34:58.033

使用[imagesetpixel()](http://php.net/imagesetpixel)函数。由于此函数需要一个颜色标识符作为第三个参数，因此您需要使用[imagecolorallocate()](http://www.php.net/manual/en/function.imagecolorallocate.php)创建一个。

这是一个示例代码，它将每种颜色的颜色值减半：

```
$rgb = imagecolorat($out, 10, 15);
$colors = imagecolorsforindex($out, $rgb);

$new_color = imagecolorallocate($out, $colors['red'] / 2, $colors['green'] / 2, $colors['blue'] / 2);
imagesetpixel($out, 10, 15, $new_color); 
```

现在这里有一个简单的灰度过滤器：

```
list($width, $height) = getimagesize($filename);
$image = imagecreatefrompng($filename);
$out = imagecreatetruecolor($width, $height);

for($y = 0; $y < $height; $y++) {
    for($x = 0; $x < $width; $x++) {
        list($red, $green, $blue) = array_values(imagecolorsforindex($image, imagecolorat($image, $x, $y)));

        $greyscale = $red + $green + $blue;
        $greyscale /= 3;

        $new_color = imagecolorallocate($out, $greyscale, $greyscale, $greyscale);
        imagesetpixel($out, $x, $y, $new_color);
    }
}

imagedestroy($image); 
header('Content-Type: image/png');
imagepng($out);
imagedestroy($out); 
```

在循环内使用时要小心`imagecolorallocate`，您不能分配比`imagecolorstotal`在单个图像内返回更多的颜色。如果达到限制`imagecolorallocate`将返回 false，您可以使用[`imagecolorclosest`](http://www.php.net/manual/en/function.imagecolorclosest.php)获取已分配的壁橱颜色。

# javascript - 无法访问对象文字内另一个函数中的变量

> ID：15541658
> 
> 赞同：3
> 
> 时间：2013-03-21T07:24:08.253
> 
> 标签：javascript, jquery

我有以下代码`javascript`

```
var Obj = {
    init: function () {
        this.over = $('<div />').addClass('over');
        $('body').append(this.over);
        $('.click').on('click', this.show);
    },
    show: function () {
        console.log(this.over);
    }
}

Obj.init(); 
```

当用户单击`.click`链接时，它会触发`show`函数并注销在`init`函数中创建的 dom 元素。**但问题是它注销未定义。为什么？**如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:30:28.343

试试这个 ：

```
var Obj = {
init: function () {
    this.over = $('<div />').addClass('over');
    $('body').append(this.over);
    $('.click').on('click', this.show);
},

show: function () {
    // here the 'this' is the button , not the obj object ..
    console.log($('.over'));
}
}

Obj.init(); 
```

另外一个选项 ：

```
var Obj = {
init: function () {
    this.over = $('<div />').addClass('over');
    $('body').append(this.over);
    var that = this;
    $('.click').on('click', function(e){
       that.show.call(that, e); // calling the show function with call, causing 'this' to be obj
    });
},

 // 'this' is the obj
show: function (e) {
    console.log(this.over);
}
}

Obj.init(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:33:53.730

这里的问题是`this`( `Obj`) 的范围。

使用以下代码解决您的问题。

```
var Obj = {
init: function () {
    this.over = $('<div />').addClass('over');
    $('body').append(this.over);
    $('.click').on('click', $.proxy(this.show, this));
},

show: function () {
    console.log(this.over);
}
};

Obj.init(); 
```

了解更多关于[jQuery.proxy](http://api.jquery.com/jQuery.proxy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:38:33.270

因为 jQuery 将被点击的 DOM 元素注入到 'this' 而不是 'Obj' 对象中。一种解决方案是关闭：

```
var Obj = {
  init: function () {
    this.over = $('<div />').addClass('over');
    $('body').append(this.over);
    $('.click').on('click', this.show());
  },

  show: function () {
    var self = this;
    return function () {
        console.log("over:", self.over);
    }
  }
}
Obj.init(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:35:07.640

您将存储在中的函数*传递*`this.show`给`on`. 当它被调用时，它不会在`Obj`so `this`is not的上下文中被调用`Obj`。

您需要创建一个不依赖于在`Obj`.

最简单的方法是使用`bind`：

```
$('.click').on('click', this.show.bind(this)); 
```

但这对[浏览器的支持有限](http://caniuse.com/#search=bind)。

您还可以使用闭包：

```
var myObj = this;
var show = function () {
    myObj.show()
}
$('.click').on('click', show); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T07:38:18.623

当用jquery绑定一个函数到一个事件时，调用这个函数的上下文就是被点击的dom对象。

```
var Obj = {
init: function () {
    this.over = $('<div />').addClass('over');
    $('body').append(this.over);
    var that = this;
    $('.click').on('click', function(){ 
        // console.log( this ) will log the dom object
        that.show.call( that ) 
     } );
},

show: function () {
    console.log(this.over);
}
}

Obj.init(); 
```

# android - Android：带有单选按钮的列表视图项目？

> ID：15541666
> 
> 赞同：-2
> 
> 时间：2013-03-21T07:24:40.583
> 
> 标签：android, listview, android-listview, radio-button, radio-group

我有一个列表视图和一个关联的行视图（xml），列表中有 5 个问题，每个问题有 4 个选项。因此，行视图 xml 定义了文本视图（用于问题）和单选组内的 4 个唯一单选按钮（用于选项），因此作为具有 4 个选项的问题的单个文本视图是在列表中重复 5 次的单个组件。我的问题是如何检索为所有 5 个问题选择的特定单选按钮及其在单个事件上的相关选项，例如：提交按钮

遇到一个严重的问题，感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:28:42.273

```
public void onRadioButtonClicked(View view) {
// Is the button now checked?
boolean checked = ((RadioButton) view).isChecked();

// Check which radio button was clicked
switch(view.getId()) {
    case R.id.radiobutton1:
        if (checked)
            // radio button 1 is selected.
        break;
    case R.id.radiobutton2:
        if (checked)
            // radio button 2 is selected.
        break;
     case R.id.radiobutton3:
        if (checked)
            // radio button 3 is selected.
        break;
      case R.id.radiobutton4:
        if (checked)
            // radio button 4 is selected.
        break;
  }
} 
```

[http://developer.android.com/guide/topics/ui/controls/radiobutton](http://developer.android.com/guide/topics/ui/controls/radiobutton)。

```
public View getView(final int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
     {
        arg1=mInflater.inflate(R.layout.listviewsingleimg, arg2,false);
        vh.iv1= (ImageView)arg1.findViewById(R.id.ivs);
        vh.rb= (RadioButton) arg1.findViewById(R.id.radioButton1);
        vh.tv= (TextView)arg1.findViewById(R.id.textView1);

     }
    else
    {
     arg1.setTag(vh);
    }
        vh.iv1.setImageResource(R.drawable.ic_launcher);
        vh.tv.setText("hello");
        vh.rb.setText("radioButton");
        vh.rb.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if(arg0==1)
                {
                switch(v.getId()) {
                case R.id.radioButton1:
                    if (vh.rb.isChecked())
                        // radio button 1 is selected.
                        Toast.makeText(c,"radiobutton 1 clicked",1000).show();
                    break;
                }
              }

            }

        });

    return arg1;
}

static class ViewHolder
{
TextView tv;
RadioButton rb;
ImageView iv1;

} 
```

当单击列表视图位置 1 的单选按钮时，上面显示吐司。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:01:12.727

你好我的朋友我有你的问题

您将不得不使用 sparseBooleanArray 来获取按钮单击时所有五个问题的单选按钮 c 状态

# android - 无法为媒体录像机设置视频质量

> ID：15541667
> 
> 赞同：0
> 
> 时间：2013-03-21T07:24:41.377
> 
> 标签：android, video, video-capture

在我的代码中，我无法设置摄像机配置文件

```
private void initRecoreder() {
    File dir = new File(Environment.getExternalStorageDirectory().getPath()
            + "/Registrator/Video/");

    recorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setMaxDuration(900000);// 15 min
    if (!dir.exists()) {
        dir.mkdirs();
    }
    recorder.setOutputFile(dir.getAbsolutePath() + "video.3gp");
}

private void prepareRecorder() {
    recorder.setPreviewDisplay(holder.getSurface());
    try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        e.printStackTrace();
        finish();
    } catch (IOException e) {
        e.printStackTrace();
        finish();
    }
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    prepareRecorder();
    initRecoreder();
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    if (recording) {
        recorder.stop();
        recording = false;
    }
    recorder.release();
    finish();
} 
```

这是我的日志猫

```
03-21 11:16:38.660: E/AndroidRuntime(4584): FATAL EXCEPTION: main
03-21 11:16:38.660: E/AndroidRuntime(4584): java.lang.RuntimeException: Unable to start activity ComponentInfo{mobi.esys.videoregistrator/mobi.esys.videoregistrator.RegistatratorActivity}: java.lang.IllegalStateException
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.os.Looper.loop(Looper.java:137)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread.main(ActivityThread.java:4507)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at java.lang.reflect.Method.invokeNative(Native Method)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at java.lang.reflect.Method.invoke(Method.java:511)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at dalvik.system.NativeStart.main(Native Method)
03-21 11:16:38.660: E/AndroidRuntime(4584): Caused by: java.lang.IllegalStateException
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.media.MediaRecorder.setOutputFormat(Native Method)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at mobi.esys.videoregistrator.RegistatratorActivity.initRecoreder(RegistatratorActivity.java:52)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at mobi.esys.videoregistrator.RegistatratorActivity.onCreate(RegistatratorActivity.java:34)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.Activity.performCreate(Activity.java:4469)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
03-21 11:16:38.660: E/AndroidRuntime(4584):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
03-21 11:16:38.660: E/AndroidRuntime(4584):     ... 11 more
03-21 11:17:02.930: E/MediaRecorder(4671): setOutputFile called in an invalid state(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:58:40.167

[这是工作示例，我的代码不适用于 Android 2.3 或更高版本](http://android-er.blogspot.hk/2011/10/simple-exercise-of-video-capture-using.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:56:10.097

使用此代码录制视频。

```
 recorder = new MediaRecorder();

          recorder.setCamera(mCamera);
            recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC); 

            profile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);

            recorder.setProfile(profile);

            recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            recorder.setOutputFile(path+filename);
            prepareRecorder();
            recorder.start(); 
```

并在清单中添加此权限

```
 <uses-permission android:name="android.permission.CAMERA"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

# java - 通过网络发送带有换行符的文本

> ID：15541670
> 
> 赞同：1
> 
> 时间：2013-03-21T07:24:53.510
> 
> 标签：java, networking, client-server

我正在尝试通过 Java 网络发送带有新行的文本。例如：

> “你好\n这是一个新行”

这是我用于客户端的代码：

```
Socket kkSocket = null;
PrintWriter out = null;
BufferedReader in = null;

/*connect to server here*/

BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
String fromServer;
String fromUser;

while ((fromServer = in.readLine()) != null) {
    System.out.print("Server: " + fromServer);
    if (fromServer.equals("Bye.")) {
        break;
    }

    fromUser = stdIn.readLine();
    if (fromUser != null) {
        System.out.print("Client: " + fromUser);
        out.println(fromUser);
    }
}

out.close();
in.close();
stdIn.close();
kkSocket.close(); 
```

这是我用于服务器的代码：

```
/*Connect to server here*/
PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
String inputLine, outputLine;
Protocol kkp = new Protocol();

outputLine = kkp.processInput(null);
out.println(outputLine);

while ((inputLine = in.readLine()) != null) {
    outputLine = kkp.processInput(inputLine);
    out.println(outputLine);
    if (outputLine.equals("Bye.")) break;
} 
```

但它只返回第一行。

有没有人能指出我正确的方向，以便我可以使用新的线路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:19:17.353

首先要注意的是该`readLine()`方法使用行终止符`\n`作为其中之一，剩余文本不包括在内的原因，为了发生这种情况，您必须`readLine()`再次调用该方法。在你的情况下，我会使用如下`read(char[] cbuf, int off, int len)`方法：`char[]`

而不是使用`readLine()`use`read(char[] cbuf, int off, int len)`来阅读如下

```
char[] cbuf = new char[1024];
while (in.read(cbuf, 0, cbuf.length) != null) {
    fromServer =  new String(cbuf);
    System.out.print("Server: " + fromServer);
    if (fromServer.equals("Bye.")) {
        break;
    }

    fromUser = stdIn.readLine();
    if (fromUser != null) {
        System.out.print("Client: " + fromUser);
        out.println(fromUser);
    }
} 
```

# database - Oracle - 比较具有大量列的行

> ID：15541672
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:24:57.710
> 
> 标签：database, oracle, plsql, oracle10g

我需要将 2 行与大量列进行比较。

有点像

```
ID A Column1 Column2 .....
ID B 列 1 列 2 .....
ID C Column1 Column2 .....

```

我需要比较大量的列，比如对它们进行减法。我不想从表中减去，我想对所有列进行类似的操作。任何一个电话都告诉我如何做到这一点，而无需引用名称的每一列。减法或加法等操作在每一列上保持不变。

基本上是这样理解的。

```
CDE01 A 06 C D
PDE02 B 07 C D
PDE03 A 05 C D 
```

因此，如果我与 CDE01 进行比较，其他行有 2 列和 3 列相同。我有一张表，里面有很多需要匹配的列。该表将有两种这样的行，我需要根据 where 子句将一组中的每一行与其他子集的每一行进行比较。像 PDE 和 CDE 一样，这里是两种不同的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T16:48:36.953

为什么不创建两个视图（或更多根据需要）。每个视图都代表您认为的分组（您将它们称为行的种类）。所以你最终可能会得到一个视图：CDE_data 和 PDE_data。

然后，您必须确定行不同意味着什么。根据您提供的数据，我根本看不到任何匹配项 - 您需要确定 CDE_data 中的一行如何匹配 PDE_data 行。您可能只匹配第二列（A 和 B）。如果是这种情况，则基于此将 cde_dta 加入 pde_data ，然后在此处使用解决方案：

[oracle中如何逐列比较两个表](https://stackoverflow.com/questions/3980462/how-to-compare-two-tables-column-by-column-in-oracle)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T20:17:57.413

您需要查询元数据以生成比较。我以为我只是回答了这样一个问题......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T04:22:50.577

要比较表中的大量数据，您可以使用“ **Oracle GoldenGate Veridata** ”或大量第三方工具，如下所示：

Toadsoft.com/ -- 共享软件

dkgas.com/oradbdiff.htm

softtreetech.com/dbtools/

Impacttoys.com/supported_ora_features.htm -- 免费

# c# - Windows 8 应用程序上的全局应用程序栏

> ID：15541674
> 
> 赞同：8
> 
> 时间：2013-03-21T07:25:07.473
> 
> 标签：c#, xaml, windows-8, microsoft-metro, appbar

我正在开发一个 Windows 8 应用程序项目。我正在使用 Visual Studio 2012，它是预定义的模板（GroupedPage、SplitPage、ItemsPage）。
这时候我需要添加一个App bar。我选择的方式是创建一个并将其显示在所有页面上。我正在阅读这篇文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150604.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150604.aspx)

要将其包含在我的项目中，我将全局页面设置为 App.xaml 上的起始页面

```
protected async override void OnLaunched(LaunchActivatedEventArgs args)
...
  if (!rootFrame.Navigate(typeof(GlobalPage), args.Arguments))
                    throw new Exception("Failed to create initial page");
... 
```

在 Global 页面上，我正在更改 OnLaunched 方法，以便进入真正的主页：

```
 rootPage = e.Parameter as Page;            
            frame1.Navigate(typeof(MainPage), this); 
```

我为按钮添加事件订阅，比如

```
 private void ButtonBlogList_Click(object sender, RoutedEventArgs e)
        {
            this.Frame.Navigate(typeof(BlogListManagement), this);
        } 
```

启动应用后，显示App栏，我可以用里面的应用按钮导航，但是第一次导航后，目标页面上没有显示AppBar。

知道我的错误吗？
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T08:18:01.517

您要做的是在 LayoutAwarePage 上设置 AppBar，因为所有页面都派生自该页面。对于 AppBar 的内容，您可能希望使用 UserControl，以便于编码和设置样式。

首先创建用户控件：

```
<UserControl
x:Class="AppBarGlobal.AppbarContent"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:AppBarGlobal"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<StackPanel Orientation="Horizontal">
    <Button
        Content="1"
        Style="{StaticResource AppBarButtonStyle}" />
    <Button
        Content="2"
        Style="{StaticResource AppBarButtonStyle}" />
</StackPanel> </UserControl> 
```

然后在要创建 AppBar 的 LayoutAwarePage 的构造函数中，将内容设置为 UserControl，并将其添加到页面上的 Buttom 或 TopAppBar - 在此示例中，我使用 BottomAppBar 并在构造函数中设置everthing，就像这样：

```
 public LayoutAwarePage()
    {
        bar = new AppBar();
        bar.Content = new AppbarContent();
        this.BottomAppBar = bar;
        //and the remaining code for the constructor hereafter. 
```

这应该允许您在派生自 LayoutAwarePage 的所有页面上的 Windows 应用商店应用程序中拥有一个全局应用程序栏。

# hadoop - 使用 SequenceFile 类写入文件

> ID：15541678
> 
> 赞同：0
> 
> 时间：2013-03-21T07:25:29.483
> 
> 标签：hadoop, sequencefile

我使用以下代码将一些数据写入 SequenceFile 格式文件。当程序运行一段时间时，我通过 Eclipse 控制台上的红色按钮中断程序。但是，当我检查 hdfs 上的数据文件时，序列文件的大小为零。而且也不能使用'hadoop fs -text filename'命令查看文件。当我使用 SequenceFile.Reader 读取之前创建的文件时，我遇到了 'Exception in thread "main" java.io.EOFException' 异常。在这种情况下，怎么办？我的开发环境是 eclipse3.7（在 windows 7 上）和 hadoop 集群（hadoop 版本 1.0.3 ）在 CentOS 6 上。

类序列扩展线程{

```
private String uri = "hdfs://172.20.11.60:9000";
private String filePath = "/user/hadoop/input/";
private String fileName = "Sequence-01.seq";
public SequenceFile.Writer writer;
private static int cnt = 0;

private void init() {
    Configuration conf = new Configuration();
    try {
        FileSystem fs = FileSystem.get(URI.create(uri), conf);
        writer = SequenceFile.createWriter(fs, conf, new Path(filePath
                + fileName), LongWritable.class, Text.class);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public Sequence() {
    init();
}

@Override
public void run(){
    while(true){
        try {
            writer.append(new LongWritable(100), new Text("hello,world"));
            cnt++;
            if(cnt%100 == 0){
                System.out.println("flush current data to file system");
                writer.syncFs();
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("append data error");
            e.printStackTrace();
        }

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            System.out.println("thread interupted");
            e.printStackTrace();
        }
    }
} 
```

}

公共类 TestSequenceFile {

```
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    new Sequence().start();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:55:04.860

一般建议：不要中断进程。

解决方案：对我来说，以下代码运行良好。

```
 import java.io.IOException;
import java.net.URI;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.SequenceFile;

import org.apache.hadoop.io.Text;

public class SequenceFileWriteDemo {
private static final String[] DATA = {
"One, two, buckle my shoe",
"Three, four, shut the door",
"Five, six, pick up sticks",
"Seven, eight, lay them straight",
"Nine, ten, a big fat hen"};

public static void main(String[] args) throws IOException {
//String uri = "/home/Desktop/inputSort.txt";
String uri = "hdfs://localhost:9900/out1.seq";

Configuration conf = new Configuration();
FileSystem fs = FileSystem.get(URI.create(uri), conf);
Path path = new Path(uri);
IntWritable key = new IntWritable();
Text value = new Text();
SequenceFile.Writer writer = null;

try {
writer = SequenceFile.createWriter(fs, conf, path,
    key.getClass(), value.getClass());

    for (int i = 0; i < 130; i++) {
    key.set(100 - i);
    value.set(DATA[i % DATA.length]);

    System.out.printf("[%s]\t%s\t%s\n", writer.getLength(), key, value, key.getClass(), value.getClass());

    writer.append(key, value);
    }
    } finally {
    IOUtils.closeStream(writer);
    }
}} 
```

有关写入序列文件的详细信息，请参阅 Book Hadoop-The Definitive Guide（O'Reilly 出版物）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T06:34:28.330

是的，Hadoop 权威指南最适合它，这里是读取和写入序列文件的示例。

其实sequence file形成字节序列或者hadoop Writables，主要用来组合各种小文件来组合并馈送到map函数。

[http://javatute.com/javatute/faces/post/hadoop/2014/creating-sequence-file-using-hadoop.xhtml](http://javatute.com/javatute/faces/post/hadoop/2014/creating-sequence-file-using-hadoop.xhtml)

# shell - 那么 k shell 脚本上不会出现预期错误

> ID：15541684
> 
> 赞同：1
> 
> 时间：2013-03-21T07:25:52.430
> 
> 标签：shell, unix, ksh

我编写了一个简单的 k shell 程序，但我看到以下错误“第 11 行的 0403-057 语法错误：不需要‘then’。”

代码是

```
 #!/usr/bin/ksh
    function check_rm 
   {
  number=$#    #assign number of parameters
if [[ $1 -gt 0 ]]; #if RC is success
    then 

        if[[ "$number" -gt 2 ]];  
        then         

        /usr/bin/mv  $4  $3
        echo " ERROR for $2 " 
    fi

    #user_name=`whoami`
    #mail_body="$3 checked in by $user_name" 
    #echo $mail_body 

else 

        if[[ "$number" -gt 2 ]];  
            then 

            /usr/bin/rm -rf $4
        fi      
        echo "GOOD for $2  "   
        echo "3f was successful"
fi 
```

}

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:45:06.793

正如 Wrikken 在评论中指出的那样，问题是在`if`和`[[`;之间的那条线上缺少空格。ksh 需要这个来告诉两者是分开的。脚本后面也有同样的问题；您需要修复这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:54:18.417

您可以删除“;” 在你的 if 条件之后。如果条件具有非常严格的语法，我更正了您的代码：

```
 #!/usr/bin/ksh

    function check_rm 
    {
        #assign number of parameters
        number=$#    
        #if RC is success
        if [[ $1 -gt 0 ]] 
        then 
            if [[ ${number} -gt 2 ]]
            then         
                /usr/bin/mv  $4  $3
                echo " ERROR for $2 " 
            fi

            #user_name=`whoami`
            #mail_body="$3 checked in by $user_name" 
            #echo $mail_body 

        else 
            if [[ ${number} -gt 2 ]]
            then 
                /usr/bin/rm -rf $4
            fi      
            echo "GOOD for $2  "   
            echo "3f was successful"
        fi                  

    } 
```

# sharepoint - 在 SP2010 中基于自定义布局部署页面

> ID：15541685
> 
> 赞同：3
> 
> 时间：2013-03-21T07:25:53.703
> 
> 标签：sharepoint, sharepoint-2010

我能够成功部署自定义页面布局并在母版页库中看到它。我也可以从这个布局手动创建页面。

我想要做的是在我的站点定义中有一个基于自定义布局的页面自动随包一起部署。

如何部署页面并告诉该页面使用哪种布局？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:46:03.267

使用模块，您可以从您的页面创建实例`PageLayout`

我猜你的 PageLayouts PageName`Home.aspx`比实例名称应该是`Home.aspx`

希望您的页面布局上传到`_catalogs/masterpage`目录。

```
 <Module Name="PagesLayouts"
      Url="_catalogs/masterpage"
      Path=""
      RootWebOnly="False">
  <File Url="YourModuleName/Home.aspx" Type="GhostableInLibrary" IgnoreIfAlreadyExists="TRUE"></File>
</Module> 
```

比：

```
<Module Name="CustomPages" Url="Pages" Path="" RootWebOnly="FALSE">
 <File Name="Home.aspx" Url="Home.aspx" Type="GhostableInLibrary" Path="Home.aspx" IgnoreIfAlreadyExists="TRUE">
  <Property Name="Title" Value="Home" />
  <Property Name="PublishingPageLayout" Value="~SiteCollection/_catalogs/masterpage/Home.aspx" />
  <Property Name="ContentType" Value="Page" />
 </File>
</Module> 
```

见这里： http: [//kamilmka.wordpress.com/2011/03/30/create-sharepoint-page-instance-from-a-feature/](http://kamilmka.wordpress.com/2011/03/30/create-sharepoint-page-instance-from-a-feature/)

## 更新 ：

我刚刚创建了演示项目以便正确理解。你可以看到我的解决方案结构。刚刚添加了一个模块名称为 PageLayouts 并放置了一个 PageLayout Page。

![在此处输入图像描述](../Images/8d6c7f66ed218bf49ef9c6cbd4f28e1d.png)

我使用过的模块的完整 Element.xml 文件：

```
 <Elements xmlns="http://schemas.microsoft.com/sharepoint/">
 <Module Name="PageLayouts" Url="_catalogs/masterpage" Path="" RootWebOnly="TRUE">
 <File Path="PageLayouts\CustomPageLayouts.aspx" Url="CustomPageLayouts.aspx" Type="GhostableInLibrary" IgnoreIfAlreadyExists="TRUE">
    <Property Name="Title" Value="Custom General Page" />
    <Property Name="MasterPageDescription" Value="Custom General page layout" />
    <Property Name="ContentType" Value="$Resources:cmscore,contenttype_pagelayout_name;" />
    <Property Name="PublishingPreviewImage" Value="~SiteCollection/_catalogs/masterpage/$Resources:core,Culture;/Preview Images/WelcomeSplash.png, ~SiteCollection/_catalogs/masterpage/$Resources:core,Culture;/Preview Images/WelcomeSplash.png" />
  <Property Name="PublishingAssociatedContentType" Value=";#$Resources:cmscore,contenttype_welcomepage_name;;#0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF390064DEA0F50FC8C147B0B6EA0636C4A7D4;#" />
  </File>
 </Module>
 <!--Create Page instance from Page layouts of CustomPageLayouts.aspx-->
 <Module Name="CustomPages" Url="Pages" Path="" RootWebOnly="FALSE">
   <File Name="Home.aspx" Url="Home.aspx" Type="GhostableInLibrary" Path="PageLayouts\CustomPageLayouts.aspx" IgnoreIfAlreadyExists="TRUE">
    <Property Name="Title" Value="Home" />
    <Property Name="PublishingPageLayout" Value="~SiteCollection/_catalogs/masterpage/CustomPageLayouts.aspx"/>
    <Property Name="ContentType" Value="Page" />
  </File>
</Module> 
```

希望能帮助到你！！

# c - 创建结构数组

> ID：15541692
> 
> 赞同：0
> 
> 时间：2013-03-21T07:26:35.543
> 
> 标签：c, struct

所以我试图修改一些代码，我需要创建一个结构数组。该结构声明如下：

```
typedef struct header
{
    int sample_rate;
    int num_channels;
    int bit_res;
    int num_samples;
    char *data;
} header;

typedef struct header* header_p; 
```

创建和使用此结构的数组的正确方法是什么？我正在尝试以下方式：

```
header_p fileHeader;
...
fileHeader = (header_p)malloc(sizeof(header) * (argc-1)); 
```

这似乎可行，但我不确定如何正确访问数组。

编辑：（我的一些问题不知何故被砍掉了）当我尝试像这样访问数组时：

> fileHeader[0] = 返回 header_p 的函数；

我收到以下编译错误：

```
incompatible types when assigning to type ‘struct header’ from type ‘header_p’ 
```

编辑：（想通了）在遵循 Lundins 的建议删除隐藏结构指针的愚蠢 typedef 之后，更容易看到发生了什么。然后更容易看出 Alex 关于取消引用我的指针的必要性是正确的。我将接受亚历克斯的回答，因为从技术上讲这是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:38:44.263

> 创建和使用此结构的数组的正确方法是什么？

```
header* fileHeader;

fileHeader = malloc(sizeof(header) * (argc-1)); 
```

*   指针 typedef 没有意义，使您的程序不可读。
*   强制转换 malloc 的结果没有意义。
*   您分配了 sizeof(header) * 参数的数量，然后按预期分配了 -1*字节*而不是 -1*参数*。观察运算符优先级。这是一个错误，您分配了太多内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:29:53.163

这里：

```
fileHeader[0] = function that returns header_p; 
```

您忘记了指针取消引用。

```
fileHeader[0] = *function_returning_header_p(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:29:26.680

您可以像这样访问它：

```
fileHeader[0].bit_res     = ...
fileHeader[1].num_samples = ... 
```

由于它是一个指针，因此您可以在索引处使用`[]`. 然后，您使用`.`.

# tkinter - 如何划分两个用户输入？蟒蛇 3.3

> ID：15541693
> 
> 赞同：1
> 
> 时间：2013-03-21T07:26:40.650
> 
> 标签：tkinter, division, python-3.3

我正在构建一个简单的倒数计时器。在这个阶段，我想从我的 GUI 中获取两个用户条目（我已经对此进行了编程）并执行操作`value_a`/ `value_b`。

每次我这样做我都会得到`TypeError: unsupported operand type(s) for /: 'IntVar' and 'IntVar'`

这是有问题的功能：

```
def mineTime():
    mtime = ueAV / ueMY
    label_mtime = Label(text=mtime,fg='white',bg='grey').pack()
    return

# GUI Object

mGui =  Tk()
ueAV = IntVar()
ueMY = IntVar() 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:28:33.977

使用`IntVar.get()`类似这个例子的方法

```
mtime = ueAV.get() / ueMY.get() 
```

如果你在 Python 2 上，你可能想先转换为浮点数，否则它只会执行整数除法。

```
mtime = float(ueAV.get()) / ueMY.get() 
```

您还需要更改此行以将结果转换为标签的文本

```
Label(text=str(mtime),fg='white',bg='grey').pack() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:29:50.850

您需要使用[`get()`](http://epydoc.sourceforge.net/stdlib/Tkinter.IntVar-class.html)将值作为整数取回。

```
def mineTime():
    mtime = ueAV.get() / ueMY.get()
    # other stuff 
```

# java - 如何在 Windows Java 插件上设置 JVM 选项

> ID：15541696
> 
> 赞同：0
> 
> 时间：2013-03-21T07:26:47.863
> 
> 标签：java, applet, jvm

在 Windows 上，我尝试了以下两个，但没有任何效果。

> Java控制面板/Java/Java运行时设置/查看/用户/运行时参数-Dfile.encoding=UTF-8
> 
> 设置 JAVA_TOOL_OPTIONS=-Dfile.encoding=UTF-8
> 
> Java 控制台仍然打印出来
> 
> ```
> file.encoding = MS949 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T14:45:39.953

传递运行时参数不适用于版本为 > 的 jre`7u17`

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8016005](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8016005)

它应该在 jre 中修复`7u40`。

我不得不降级到`7u17`.

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:22:26.630

也许您需要一个全局 JVM 选项：

尝试添加`JAVA_OPTS`到您的 Windows 环境。

```
set JAVA_OPTS=-Dfile.encoding=UTF-8 %JAVA_OPTS% 
```

# forms - 使用 bootstrap twitter 在表单中存在对齐问题

> ID：15541701
> 
> 赞同：0
> 
> 时间：2013-03-21T07:27:14.213
> 
> 标签：forms, twitter-bootstrap, alignment

我在这里有一个输入类型和按钮类型的表单

```
<div class="span12" style="margin-left: 10px; margin-right: 5px;">
    <div class="row-fluid mt20">
        <div id="searchBox">
        <form id="general-search-form" autocomplete="off">
            <input type="text" placeholder="" class="search-query" name="q" />
                <button type="submit" class="btn pull-right" title="search"></button>
        </form>
        </div>
    </div>
</div> 
```

我需要有这样的布局，在桌面版本中输入类型占据 50% 的宽度，搜索按钮占据 50% 的宽度。在移动版本中，输入类型应位于顶部，搜索按钮应位于下方。怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:40:46.560

我想你可能想要这样的东西......

```
<form>
<div class="container-fluid">
 <div class="row-fluid">
  <div class="span6">
   <input type="text" class="input-block-level">
  </div>
  <div class="span6">
   <button type="submit" class="btn custom-button">Search</button>
  </div>
 </div>
</div>
</form> 
```

然后您需要自己设置按钮样式以使其占据 span6 的整个宽度。

```
.custom-button {
    width: 100%;
} 
```

考虑到填充和边框，您可能需要对按钮宽度进行一些试验和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:31:27.373

设置`float:left`为浏览器 CSS 中的两个元素，宽度设置为 50%。对于移动设备 CSS 使用`float:none`. 尝试使宽度为 100%。

这将为您提供所需的输出。可能需要也可能不需要小的调整。

# foreign-keys - SQLAlchemy：如何使用外键保存对象？

> ID：15541703
> 
> 赞同：2
> 
> 时间：2013-03-21T07:27:15.807
> 
> 标签：foreign-keys, sqlalchemy, flask, flask-sqlalchemy

我有这些课。

```
class User(object):

    query = db_session.query_property()        

    def __init__(self, username, passhash, salt):    
        self.username = username    
        self.passhash = passhash    
        self.salt = salt

users = Table('users', metadata,    
    Column('id', Integer, primary_key=True),    
    Column('username', String(60)),    
    Column('passhash', String),    
    Column('salt', String)    
    )

mapper(User, users)

class Buoy(object):

    query = db_session.query_property()    
    author = relationship("User", backref=backref("buoys", order_by=id))

    def __init__(self, label, lead, body, author):    
        self.label = label    
        self.lead = lead    
        self.body = body    
        self.author = author

buoys = Table('buoys', metadata,    
    Column('id', Integer, primary_key=True),    
    Column('label', String),    
    Column('lead', String),    
    Column('body', String),    
    Column('author_id', Integer, ForeignKey('users.id'))    
    )

mapper(Buoy, buoys) 
```

在我的 Python Flask 代码中，我想创建并保存一个新的浮标：

```
buoy = Buoy(label, lead, body, current_user) 
```

当我这样做时，buoy.author 是正确的，但 buoy.author_id 是 None。请问，当buoy.author已知时，有什么方法可以自动将current_user.id分配给buoy.author_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:00:38.460

`buoy.author_id`将在`buoy`实例添加到会话并被`session.flush()`调用后设置。

# macos - nm 找不到符号时处理“dyld：惰性符号绑定失败：未找到符号”错误

> ID：15541706
> 
> 赞同：9
> 
> 时间：2013-03-21T07:27:40.267
> 
> 标签：macos, gcc, osx-mountain-lion, dylib, libstdc++

我有一个胖（32 位和 64 位）英特尔二进制文件`myBinary`，它无法在另一个运行 Mac OS X 10.8.2 的工作站上运行：

```
$ myBinary
dyld: lazy symbol binding failed: Symbol not found: __ZNSt8__detail15_List_node_base7_M_hookEPS0_
  Referenced from: /usr/local/bin/myBinary
  Expected in: /usr/lib/libstdc++.6.dylib

dyld: Symbol not found: __ZNSt8__detail15_List_node_base7_M_hookEPS0_
  Referenced from: /usr/local/bin/myBinary
  Expected in: /usr/lib/libstdc++.6.dylib

Trace/BPT trap: 5 
```

我从运行 GCC 4.7.2 的 Mac OS X 10.8.2 工作站编译它：

```
$ gcc --version
gcc (MacPorts gcc47 4.7.2_2+universal) 4.7.2 
```

我跑`nm`了，符号未定义：

```
$ nm /usr/local/bin/myBinary | grep __ZNSt8__detail15_List_node_base7_M_hookEPS0_
     U __ZNSt8__detail15_List_node_base7_M_hookEPS0_ 
```

编译时我错过了什么或做错了什么`myBinary`？我不确定我能对丢失的符号做些什么`/usr/lib/libstdc++.6.dylib`——我是否应该将 C++ 库静态编译成`myBinary`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:14:52.627

是的，您有 2 个选项，要么不使用客户没有的库...（您可以将它们作为 dyld 或框架提供。）

或者只是静态链接库...如果您的包只是一个进程，这实际上最终会在内存和磁盘空间中变小，因为您可以剥离不使用的符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:44:08.757

每个 C++ 编译器都有自己的标准 C++ 库实现。由于您使用的是外部编译器 (GCC 4.7)，因此它的库在 Mac OS X 的标准安装中不可用。

您唯一的选择是将库捆绑在您的应用程序中或静态链接它。

要将库与应用程序捆绑在一起：

1.  使用更新库的安装名称`install_name_tool`

2.  确保您的应用会在需要时找到它

例如，您可以将 dylib 放入 .app/Contents/Frameworks，将其安装名称设置为`@rpath`并使用`-rpath @executable_path/../Frameworks`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-08T06:01:16.313

我在使用 MacPorts GCC 4.8 编译 10.6 时遇到了同样的问题，然后尝试在没有 MacPorts 的全新 10.9 安装上运行我的应用程序。幸运的是，我找到了您的问题，而 Kentzo 的回答将我引向了正确的方向，*说明*问题发生的原因……但它并没有真正提供我正在寻找的解决方案。

首先，我将解释为什么它可以在您的系统上正确运行：MacPorts 为您的系统提供了 GCC 4.7 为其提供符号的 libstdc++ 版本，位于 /opt/local/lib 而不是 /usr/lib 下。这对我来说是这样的（使用 GCC 4.8 通用）：

```
$ find /opt/local/lib -name 'libstdc++.*'
/opt/local/lib/gcc48/i386/libstdc++.6.dylib
/opt/local/lib/gcc48/i386/libstdc++.a
/opt/local/lib/gcc48/i386/libstdc++.a-gdb.py
/opt/local/lib/gcc48/i386/libstdc++.dylib
/opt/local/lib/gcc48/i386/libstdc++.la
/opt/local/lib/gcc48/libstdc++.6.dylib
/opt/local/lib/gcc48/libstdc++.a
/opt/local/lib/gcc48/libstdc++.a-gdb.py
/opt/local/lib/gcc48/libstdc++.dylib
/opt/local/lib/gcc48/libstdc++.la
/opt/local/lib/libgcc/libstdc++.6.dylib
/opt/local/lib/libstdc++.6.dylib 
```

您可以看到您的应用程序链接到的内容`otool -L`：

```
$ otool -L myBinary
myBinary:
    /opt/local/lib/libgcc/libstdc++.6.dylib (compatibility version 7.0.0, current version 7.18.0)
    /usr/lib/libgcc_s.1.dylib (compatibility version 1.0.0, current version 832.0.0)
    /opt/local/lib/libgcc/libgcc_s.1.dylib (compatibility version 1.0.0, current version 1.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 125.2.11) 
```

提高可移植性的最简单方法是`-static-libstdc++ -static-libgcc`在最后的 gcc 构建步骤（调用链接器的步骤）中。您需要两者，因为动态 libgcc 将带来动态 libstdc++ 绑定，因此仅请求静态 libstdc++ 是不够的。对于一个简单的应用程序，您的 gcc 行可能如下所示：

```
g++ -static-libstdc++ -static-libgcc myBinary.cpp -o myBinary 
```

但是，根据[关于链接器选项的 gcc 手册页](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Link-Options.html)，静态链接 libgcc 可能会在跨库处理异常时导致问题。我没有遇到问题，但你可能会。

因此，要按照 Kentzo 的方式进行操作，首先您应该从 MacPorts 获取最新的 install_name_tool，这样它就不会被未知的加载命令混淆：

```
sudo port install cctools +universal 
```

现在，让我们更改路径，以便它搜索可执行文件的目录：

```
/opt/local/bin/install_name_tool -change /opt/local/lib/libgcc/libstdc++.6.dylib '@executable_path/libstdc++.6.dylib'
/opt/local/bin/install_name_tool -change /opt/local/lib/libgcc/libgcc_s.1.dylib '@executable_path/libgcc_s.1.dylib' 
```

现在您只需要将这些 dylib 与应用程序一起分发。如果您正在制作 .app，请将 dylib 复制到 myBinary.app/Contents/MacOS/。

最后一点：如果您在制作良好的通用二进制文件时遇到问题，可以单独构建架构（使用不同的编译器和选项），然后将它们与[lipo](http://www.unix.com/man-page/osx/1/lipo/)合并：

```
/usr/bin/g++ -arch i686 -mmacosx-version-min=10.5 -isysroot /Developer/SDKs/MacOSX10.5.sdk myBinary.cpp -o myBinary_32
/opt/local/bin/g++ -arch x86_64 -static-libstdc++ -static-libgcc myBinary.cpp -o myBinary_64
lipo myBinary_32 myBinary_64 -create -output myBinary 
```

# iphone - 如何将详细信息添加到从我的应用程序添加的 google 地方？

> ID：15541708
> 
> 赞同：3
> 
> 时间：2013-03-21T07:27:42.510
> 
> 标签：iphone, ios

我已从我的应用程序中将我的地点（添加到一种受支持的 Google API 类型的新地点）添加到 Google 地点，引用了我的链接[Add new place to Google Places](https://stackoverflow.com/questions/15493283/add-new-place-to-google-places)。谷歌放置 API 有它的详细信息，如格式化地址、电话号码、URL..等。所以现在我还想添加那个地方的详细信息，比如格式化的地址、电话号码、我添加的地方的网址。

任何人请帮我解决这个问题。

# asp.net - 现有 asp.net 网络表单上的 WCF

> ID：15541710
> 
> 赞同：1
> 
> 时间：2013-03-21T07:27:52.820
> 
> 标签：asp.net, wcf, webforms

我有一个 ASP.NET Web 表单，我想开始为其构建 iPhone 应用程序。为此，我认为最好的方法是使用 WCF 公开 y 方法，这是我第一次使用 WCF。

我目前拥有的项目是使用以下方法创建的网站：File > New > Website，而不是 File > New > ASP.NET Web Forms 项目。

我的问题是：

1.  我可以使用我网站上已有的代码，还是必须将这些方法重新创建为 WCF Web 方法。
2.  我应该将 WCF 服务添加到我当前的项目还是必须创建一个新的 WCF 项目？如果第二个选项如何部署呢？

如果有关于如何做到这一点的教程，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T03:16:31.657

ASP.NET 框架有了新的改进。

您可以使用 Web API 公开现有的 Web 窗体函数。

[一个 ASP.NET - 使用 ASP.NET MVC 4 Beta 和 ASP.NET Web API 制作 JSON Web API](http://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx)

![在此处输入图像描述](../Images/c6130b3c4c2a02b0f3918b18225f8235.png)

# ruby-on-rails - 通过模式在我的索引页面内呈现显示页面

> ID：15541713
> 
> 赞同：2
> 
> 时间：2013-03-21T07:28:06.587
> 
> 标签：ruby-on-rails, modal-dialog, partial-views

我正在使用模态在索引页面内弹出显示页面.....一切正常，直到我开始在我的显示页面部分中使用@product.name。

我收到此错误：

```
undefined method `name' for nil:NilClass 
```

我知道这是一个简单的解决方法，请帮助....rails 新手 这是我的代码：

**意见**

_show.html.erb

```
<div id="myModal" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="content-inner hero-unit">
    <h1 class="pump-up center">
      <br>
      <strong>Coming Soon.</strong></h1>
      <br><br>
      <p>
        <b>Name: </b>
        **<%= @product.name %>**
      </p>
  </div>
</div> 
```

index.html.erb

```
<%= render :partial => "show", :locals => { :product => @product }  %>

<div class="row">
  <% @products.each do |product| %>
      <div class="span3">

        <a href="#myModal" role="button" data-toggle="modal">
        <%=(image_tag product.photo(:medium))%></a>

      </div>
  <% end %>
</div> 
```

**模型**

产品.rb

```
class Product < ActiveRecord::Base
  attr_accessible :name, :photo
end 
```

**控制器**

products_controller.rb

```
class ProductsController < ApplicationController

  def show
    @product = Product.find(params[:id])
  end

  def index
    @products = Product.all
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:47:46.030

您正在`index`使用操作渲染模板，`index`因此`@product`在您的范围内是`Nil`. 您必须在每个产品的循环内调用部分渲染。

`index.html.erb`应该是这样的：

```
<div class="row">
  <% @products.each do |product| %>
      <div class="span3">
        <%= render :partial => "show", :locals => { :product => product }  %>
        <a href="#myModal" role="button" data-toggle="modal">
        <%=(image_tag product.photo(:medium))%></a>

      </div>
  <% end %>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T15:53:16.280

对于像我这样懒惰地四处寻找解决方案的人：

*index.html.erb*应该是这样的：

```
<div class="row">
 <% @products.each_with_index do |product, index| %>
  <div class="span3">
    <%= render :partial => "show", :locals => { :product => product, :index => index }  %>
    <a href=<%="#myModal_#{index}"%> role="button" data-toggle="modal">
    <%=(image_tag product.photo(:medium))%></a>
  </div>
 <% end %>
</div> 
```

*show.html.erb*应该是这样的：

```
<div id=<%="myModal_#{index}"%> class="modal hide fade" role="dialog" aria-labelledby="myModalLabel"   aria-hidden="true">
 <div class="content-inner hero-unit">
 <h1 class="pump-up center">
  <br>
  <strong>Coming Soon.</strong></h1>
  <br><br>
  <p>
    <b>Name: </b>
    **<%= product.name %>**
  </p>
 </div>
</div> 
```

# c# - 开发人员许可错误 Windows RT（错误 0x90070005）

> ID：15541723
> 
> 赞同：2
> 
> 时间：2013-03-21T07:28:36.317
> 
> 标签：c#, windows-rt

我正在尝试在 Windows RT（高通平板电脑）上安装一个应用程序（我自己开发的）。在安装过程中（获取开发人员许可证），它给了我一个错误，即“我们无法获得您的 Windows RT 开发人员许可证。（错误 0x90070005）。我的 Windows 仅用于测试目的的 Windows RT。构建 9200。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:36:18.607

根据 MSDN 论坛上的这个帖子（[http://social.msdn.microsoft.com/Forums/en-US/windowsdeveloperpreviewgeneral/thread/4f6eaf3e-08f4-44e5-816d-43ad172235f5/](http://social.msdn.microsoft.com/Forums/en-US/windowsdeveloperpreviewgeneral/thread/4f6eaf3e-08f4-44e5-816d-43ad172235f5/)），问题可能是由密码太长。考虑将密码更改为较短的密码，然后重试。

# glassfish - GlassFish 负载平衡器配置器插件在 32 位机器上安装 64 位二进制文 件

> ID：15541725
> 
> 赞同：3
> 
> 时间：2013-03-21T07:28:37.427
> 
> 标签：glassfish

我在 32 位 Ubuntu 12.10 上运行 GlassFish 3.1.2.2 和 iPlanet 7
我正在安装 GlassFish 负载平衡器配置器插件 v3.1.2.2。
安装过程正常并且不报告任何错误：

> 信息：已开始安装 GlassFish 负载均衡器插件
> 信息：检测到 Oracle iPlanet Web Server 版本为 7.x
> 信息：已完成 GlassFish 负载均衡
> 器插件安装 信息：GlassFish 负载均衡器插件安装已成功完成。

但是当我尝试启动 iPlanet 实例时，它会报告一个错误：

> ADMIN3603：启动服务器时出错：失败：CORE2253：运行初始化函数加载模块时出错：.../webserver7/plugins/lbplugin/bin/libpassthrough.so 的 dlopen 失败（.../webserver7/plugins/lbplugin/bin /libpassthrough.so：错误的 ELF 类：ELFCLASS64）失败：服务器初始化失败

我正在检查 libpassthrough.so ：

> 文件 libpassthrough.so

它报告说

> libpassthrough.so：ELF 64 位 LSB 共享对象，x86-64，版本 1 (SYSV)，动态链接，剥离

任何想法如何制作负载均衡器插件来安装 32 位版本的二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:22:52.973

这不再与负载平衡器插件相关，从 iPlanet 7 开始 libpassthrough.so 被捆绑到 Web 服务器中。

您需要从[http://www.oracle.com/technetwork/java/webtier/downloads/iplanet-webserver-525365.html](http://www.oracle.com/technetwork/java/webtier/downloads/iplanet-webserver-525365.html)下载与 linux 32 位兼容的安装程序，以便从 32 位机器上运行它。

# networking - Azure 虚拟网络 - 提供不存在的 DNS 服务器

> ID：15541729
> 
> 赞同：1
> 
> 时间：2013-03-21T07:28:48.827
> 
> 标签：networking, azure, dns, azure-virtual-machine, azure-virtual-network

我正忙于创建一个虚拟网络，以便我的 Azure VM 可以相互通信。

我目前在需要指定 DNS 服务器地址的屏幕上（下面的屏幕截图）。在这一点上，我不确定是否要维护 DNS 服务器以进行名称解析，或者是否只指定 IP 地址。

**问题：**

*   **在这里提供一个可能不存在的 DNS 服务器地址有什么害处？**

*   **这是否意味着我可以在稍后阶段使用下面屏幕上提供的 IP 地址来实现 DNS 服务器？**

![在 Azure 中创建虚拟网络 - DNS 服务器](../Images/9a3d1caf874a0175a1504a010495bde7.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:53:00.520

一旦创建了虚拟网络，您只能添加子网，并且在不删除虚拟网络的情况下无法更改 DNS 服务器。因此，如果您想保留虚拟网络，请确保输入一些 DNS 服务器地址。你可能想要两个。一个用于您的私有 IP 地址（您在 Azure 中启动的 VM），一个用于公共 IP 地址。您至少应该考虑添加公共地址 DNS。我在 8.8.8.8 上使用了谷歌。您*应该*使用命名地址而不是 IP 地址，但如果您只有几台服务器，这不是什么大问题，而您仍在继续。

这取决于您使用的是 VPN 网关还是仅限 Azure 的网络，以及您是处于开发/测试还是生产环境。如果您在生产中，删除虚拟网络可能会导致大量停机。如果您有 VPN 网关，则在“另一端”进行频繁更改可能会更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T23:47:28.963

现在，您可以在创建虚拟网络时将 DNS 服务器留空，然后再进行更新。

# if-statement - 试图弄清楚如何在 Python 3.3.0 中正确使用 while 循环

> ID：15541735
> 
> 赞同：1
> 
> 时间：2013-03-21T07:28:59.350
> 
> 标签：if-statement, python-3.x, while-loop

我是 Python 的一个真正的菜鸟，我正在编写一个程序来输出给定日期是否是有效的日历日期。我确信有更优雅的方式来做到这一点。

在这一点上，我试图弄清楚如何添加一个变量来创建一个while循环，如果它是闰年或不是闰年，它将处理日期。不过，所有建议都非常受欢迎。

我已将代码尝试的问题区域放在 <> 中。这是我到目前为止的代码：

```
def main():
print("This program tests the validity of a given date")

date = (input("Please enter a date (mm/dd/yyyy): "))
month, day, year = date.split("/")
month = int(month)
day = int(day)
year = int(year)
Mylist31 = [1, 3, 5, 7, 8, 10, 12]
Mylist30 = [4, 6, 9, 11]

#Calculates whether input year is a leap year or not
if year >= 100 and year % 4 == 0 and year % 400 == 0:
    <it is a leap year>
elif year >= 0 and year <100 and year % 4 == 0:
    <it is a leap year>
else: 
    <it is not leapyear>

while <it is a leapyear>:
    if month in Mylist31 and day in range(1, 32):
        print("Valid date")
    elif month in Mylist30 and day in range(1,31):
        print("Valid date")
    elif month == 2 and day in range(1,30):
        print("Valid date")
    else:
        print("Not a Valid date")  
while <it is not a leapyear>:
etc... 
```

主要的（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:21:53.090

我已经稍微完成了你的代码。希望从那里你可以继续改进它，朝着你想要的方向发展。

```
def main():
    print("This program tests the validity of a given date")

    date = (raw_input("Please enter a date (mm/dd/yyyy): "))
    month, day, year = date.split("/")
    month = int(month)
    day = int(day)
    year = int(year)
    Mylist31 = [1, 3, 5, 7, 8, 10, 12]
    Mylist30 = [4, 6, 9, 11]

    ##Calculates whether input year is a leap year or not
    if year >= 100 and year % 4 == 0 and year % 400 == 0:
        is_leap_year = True
    elif year >= 0 and year <100 and year % 4 == 0:
        is_leap_year = True
    else:
        is_leap_year = False

    if is_leap_year:
        if month in Mylist31 and day in range(1, 32):
            print("Valid date")
        elif month in Mylist30 and day in range(1,31):
            print("Valid date")
        elif month == 2 and day in range(1,30):
            print("Valid date")
        else:
            print("Not a Valid date")
    else:
        #TODO: validate non-leap-year date
        pass

main() 
```

# zend-framework - tinymce 编辑器删除一些文本区域

> ID：15541736
> 
> 赞同：0
> 
> 时间：2013-03-21T07:28:59.747
> 
> 标签：zend-framework, tinymce, mootools, socialengine

我有几个文本区域。我正在尝试删除除一个 textarea 之外的某些 textarea 的 tinymce。

我正在使用以下代码片段来删除tinymce。

```
 window.addEvent('load', function(){
      $$('textarea[id^="fields-"],textarea[id^="classified_photo_"]').each(function(item){
          tinyMCE.execCommand('mceFocus', false, item.get('id'));
          tinyMCE.execCommand("mceRemoveControl", false, item.get('id'));
          tinyMCE.triggerSave();
      })
    }); 
```

使用此代码片段后，我发现它正在删除tinymce，但添加一些html标签可能来自tinymce。![在此处输入图像描述](../Images/48870d602d86c9da491a9e4fc835fbe8.png)

任何帮助都将是非常可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:18:34.250

关闭 tinymce 实例后，html 源元素（在您的情况下为 textareas）将再次生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:40:57.947

我正在使用社交引擎，并且在看到代码后我不想更改我的核心助手我发现以下解决方案使一些选定的 textarea 作为 tinymce 编辑器并且剩余的 textarea 保持不变，

```
$form = new Engine_Form();

$form->addElement('Tinymce', 'birthdate', array('editorOptions' => array('theme_advanced_buttons1' => array('undo', 'redo', 'cleanup', 'removeformat', 'pasteword', '|', 'code',
  'media', 'image', 'link', 'fullscreen', 'preview'), 'editor_selector' => 'mceEditor')))->setAttrib('class', 'mceEditor');
$form->birthdate->setAttrib('class', 'mceEditor'); 
```

这里 editorOptions 数组键设置 tinymce 配置。

# css - 自定义光标图像

> ID：15541738
> 
> 赞同：0
> 
> 时间：2013-03-21T07:29:05.510
> 
> 标签：css

如何为列表框下拉应用自定义光标图像？当 css 应用为时，

```
body select,
   body option{
   cursor: url(Pointer.cur), auto;
} 
```

它不适用于chrome浏览器中的下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:32:07.127

习惯了这个

```
cursor:url(/img/magnify.cur), -moz-zoom-in, -webkit-zoom-in auto; 
```

您还可以查看不同浏览器支持[**的光标**](http://www.worldtimzone.com/mozilla/testcase/css3cursors.html)关键字列表。

你可以使用**[jquery插件](http://jquery.kidsil.net/custom-cursor/)**

# c# - JSON - asp.net 中的 ButtonClick 没有触发？

> ID：15541740
> 
> 赞同：0
> 
> 时间：2013-03-21T07:29:19.577
> 
> 标签：c#, asp.net, json

嗨 iam 第一次在 asp.net 中使用 JSON。

我的 aspx 代码：

```
 <script type="text/javascript">
    $('#imgbtnGo').click(function () {
          alert("Hi");
    var valService = $("#ddlService").val();
          alert("valService"+ valService);
    $.ajax({
        type: "GET",
        url: "/VoyageOneService.svc/BindVoyageDetails?valService =" + valService,
        contentType: "application/json; charset=utf-8", 
        dataType: "Json",
        processdata: true,
        success: function (msg) {
            ServiceSucceeded(msg);
        },
        error: ServiceFailed
    });

   });
   function ServiceSucceeded(result) {
                alert(result);
  }
</script> 
```

和

```
 <asp:DropDownList ID="ddlService" runat="server" Width="100px" TabIndex="1"></asp:DropDownList>
        <asp:ImageButton ID="imgbtnGo" runat="server" ImageUrl="~/image_repository/go_icon.png"  />

     <asp:ScriptManagerProxy ID="ScriptProxyVoy" runat="server">
       <Services>
        <asp:ServiceReference Path="~/VoyageOneService.svc" />
    </Services>
</asp:ScriptManagerProxy> 
```

..

我的服务是：

```
 public string BindVoyageDetails(int serviceid)
{
                     /// Coding here..
                   Serialization
           MemoryStream stream = new MemoryStream();
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(VoyageMaster));
    serializer.WriteObject(stream, objVoyMstr);
    stream.Position = 0;
    StreamReader streamReader = new StreamReader(stream);
    return streamReader.ReadToEnd(); 
```

}

我希望我在服务方面很完美，但是当我点击我的按钮时，我并没有触发该服务....

我找不到原因，请任何人帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:33:57.123

您正在使用这样的按钮 ID

```
$('#imgbtnGo').click(function () 
```

butt`imgbtnGo`不是页面呈现后按钮的实际 ID，因此您可以获取它，`ClinetID`或者您需要`ClientIDMode="Static"`为按钮设置。

```
<asp:ImageButton ID="imgbtnGo" runat="server" ImageUrl="~/image_repository/go_icon.png" ClientIDMode="Static"  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:36:13.037

除了 Sachin 给出的 JavaScript 建议更改之外，您还需要向 Web 方法添加以下属性（为了使其以 JSON 格式发出响应）：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

来源：[ASP.NET JSON Web 服务响应格式](https://stackoverflow.com/questions/1238672/asp-net-json-web-service-response-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:07:14.427

您还需要使用绑定`binding="webHttpBinding"`，通过以下链接 [http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery](http://www.codeproject.com/Articles/132809/Calling-WCF-Services-using-jQuery)

# codeigniter - 使用 PyroCMS 创建 PHP 表单

> ID：15541745
> 
> 赞同：0
> 
> 时间：2013-03-21T07:29:38.733
> 
> 标签：codeigniter, pyrocms

我可以使用 Pyrocms 创建带有图片附件的客户表格、员工表格、项目吗？然后我将创建另一个表单来链接这些表单并创建一个交易表单？我不是 PHP 专家，但我可以创建和修改代码。我不太擅长设计或使用 Code Igniter，所以我想试试 Pyrocms。

# delphi - Delphi如何将二进制数据写入标准输出？

> ID：15541746
> 
> 赞同：6
> 
> 时间：2013-03-21T07:29:39.050
> 
> 标签：delphi, console, stdout

如何从 Delphi 控制台应用程序写入标准输出？

这是我尝试过的。我根据我能找到的信息操纵了这个简单的测试应用程序，从磁盘读取文件并将其输出到控制台标准输出：

```
program ConsoleOut;
{$APPTYPE CONSOLE}
uses
  Classes, Windows, SysUtils;

var
  S: TMemoryStream;
  OutputStream: THandleStream;
  ss: string;
  Buffer: PByte;
  i: Integer;
begin
  S := TMemoryStream.Create;
  S.LoadFromFile('1.jpg');
  S.Seek(0, soFromBeginning);

  //Am I right that from now on writing to OutputStream will write to stdout?
  OutputStream := THandleStream.Create(GetStdHandle(STD_OUTPUT_HANDLE));

  GetMem(Buffer, S.Size);
    S.ReadBuffer(Buffer^, S.Size);
    i := OutputStream.Write(Buffer^, S.Size); //i = 0 here for some reason
  FreeMem(Buffer, S.Size);

  Writeln(i, ' byte written to output');
  Readln(ss); //Don't exit app to read previous line
  S.Free;
end. 
```

但由于某种原因它失败了。您能否指导我以正确的方式写入标准输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T08:08:15.790

你的方法是合理的。但是，如果标准输出连接到控制台，那么您的代码将失败。`GetLastError`跟踪流写入的调用会显示错误代码`ERROR_NOT_ENOUGH_MEMORY`：

> 没有足够的存储空间来处理此命令。

如果您将标准输出重定向到文件，那么您的代码将正常工作。当然，您并不想将二进制数据发送到控制台。这只会将不可读的内容放在控制台上，并使计算机发出恼人的哔哔声！

如果您必须输出到控制台，那么您需要找出控制台设备缓冲区的大小并以适当大小的块写入它。我必须承认，我不确定你是怎么做到的。你可以使用试错法，但这对我没有吸引力。想必有办法查询控制台来查找信息。

查看文档[`WriteConsole`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms687401.aspx)，似乎 64K 是上限。事实上，如果我将空格写入您的句柄流，那么我可以一次写入近 64K。但是，如果我写原始的 JPEG 二进制数据，那么它会更早地给出。所以我认为这也是问题的一部分——不要将 JPEG 文件转储到控制台上。

另一条评论。由于您将文件的内容读入内存流，因此无需分配中间缓冲区。可以`S.Memory^`直接写。

# php - 无需安装语言环境即可使用 PHP Gettext

> ID：15541747
> 
> 赞同：15
> 
> 时间：2013-03-21T07:29:39.827
> 
> 标签：php, arrays, gettext, zend-translate, php-gettext

我一直在寻找国际化开源项目的选项：

*   似乎每个人都推荐的 Gettext 显然需要“安装在您的系统上”才能使用语言环境。请参阅 PHP 手册上的此[注释](http://www.php.net/manual/en/book.gettext.php#91187)，它准确地反映了我的情况。这个[SO question](https://stackoverflow.com/questions/3398113/php-gettext-problems)也询问了同样的问题。这不适合开源项目，因为我不能相信最终用户在他们的系统上安装了适当的语言环境。此外，您必须安装语言环境才能使用已翻译的字符串（IMO），这非常奇怪。

*   Zend_Translate 有时也推荐使用 gettext，但我没有使用 Zend 框架，所以我认为这不是我的选择。有人说你可以将它从 Zend 框架中分离出来，但我不知道如何。如果有人能告诉我需要哪些文件（我已经下载了 Zend 框架的压缩包）来挑选，我愿意使用 Zend_Translate。

*   数组。这就是我现在正在做的事情，但这并不理想，因为：

    *   当当前页面不会使用大多数翻译时，它将占用大量内存来定义每个翻译。
    *   我在发现自己复制数组中的键时遇到了问题，这已经变成了 1000 行代码长而且我几乎没有添加任何东西......
    *   这意味着非程序员无法真正翻译，而 POedit 是每个人都希望使用的标准。

我可以`.mo`在没有 Gettext 或 Zend_Translate 的情况下以某种方式读取文件，还是必须使用 Gettext？如果是这样，我怎样才能使所有语言环境都工作，就像我上面链接的问题一样？

编辑：我现在愿意使用 Zend_Translate。我只需要弄清楚我需要什么文件（如果可以将它们合并到一个文件中那就太好了）——我不想在我的项目中使用整个 Zend 框架。

* * *

更新：我很想看看大型开源项目如何处理 i18n：

*   Moodle 使用[数组](https://github.com/moodle/moodle/blob/master/lang/en/)。
*   Drupal 似乎使用[数组，带有数据库后备](https://github.com/drupal/drupal/blob/7.x/includes/bootstrap.inc#L1464)。他们还跑去`setlocale('C')`获得一个通用的语言环境并规避整个`setlocale`混乱。
*   Wordpress 为 i18n 使用[了大量自己的函数](https://github.com/WordPress/WordPress/blob/55fb020e84fd46bd56668facd1f3a74be1776cbf/wp-includes/l10n.php)，尽管下面确实使用了 gettext。

因此，据我所知，这三个随机项目都没有使用 Zend_Translate，也没有直接使用 gettext。

也许使用语言环境是个好主意，将`C`语言名称存储在文本域名中，然后从那里开始。

* * *

因此，就我所知：

```
$lang = 'de'; //debug
setlocale( LC_ALL, 'C' );
bindtextdomain( 'default', PATH . "/locale/$lang" );
bind_textdomain_codeset( 'default', 'UTF-8' );
textdomain( 'default' );

var_dump( file_exists( PATH . "/locale/$lang/C/LC_MESSAGES/default.mo" ) ); //bool(true) 
```

但我仍然只是得到英文字符串，即使我使用 poedit、msgfmt 等来制作适当的文件。我也尝试过重新启动 Apache。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:44:37.440

尝试[gettext-php](https://launchpad.net/php-gettext/)。它是用 PHP 编写的 gettext 的替代品。我认为它最初是为 WordPress 完成的，因为 WP 需要在共享主机上运行，​​而共享主机并不总是为每个语言环境配置。在我看来，这也是你的问题。

它对性能有一点影响，但对我来说根本不是问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T22:38:23.217

这是解决方案：

```
$lang = 'de'; //debug
setlocale( LC_ALL, 'C.UTF-8' );
bindtextdomain( 'default', PATH . "/locale/$lang" );
bind_textdomain_codeset( 'default', 'UTF-8' );
textdomain( 'default' ); 
```

这与我在答案底部发布的示例之间的唯一区别是它不仅`C.UTF-8`使用`C`.

我将对此进行更多测试，如果它可以跨平台工作，如果我发现其他任何内容，我会更新这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T08:04:56.457

对于任何对此仍有疑问的人，您可以尝试下面的代码，我从这里获得：http: [//php.net/manual/en/function.gettext.php#58310](http://php.net/manual/en/function.gettext.php#58310)

它解决了我在 freebsd 服务器上的问题，没有额外的语言环境安装（fr_FR 和 my_MY） 当您遇到 gettext 缓存问题时，此代码也很有用。

```
<?php
function initialize_i18n($locale) {
  $locales_root="/app/php/locale"; // change This to where you locale folder at
  putenv('LANG='.$locale);
  setlocale(LC_ALL,"");
  setlocale(LC_MESSAGES,$locale);
  setlocale(LC_CTYPE,$locale);
  $domains = glob($locales_root.'/'.$locale.'/LC_MESSAGES/*.mo');
  $current = basename($domains[0],'.mo');
  $timestamp = preg_replace('{messages-}i','',$current);
  bindtextdomain($current,$locales_root);
  textdomain($current);
}
?> 
```

# c# - 如何在 Windows 8 商店应用程序中获取像素的颜色代码？

> ID：15541750
> 
> 赞同：0
> 
> 时间：2013-03-21T07:29:47.023
> 
> 标签：c#, windows-8, pixel, color-codes

我正在使用一张图片，我想点击获取图片的颜色代码。因此，我以 x 和 y 坐标的形式成功获得了敲击区域的位置。

```
Point clickPoint = e.GetPosition(image1);
int x = Convert.ToInt32(clickPoint.X);
int y = Convert.ToInt32(clickPoint.Y); 
```

但我无法获得我尝试过的像素颜色代码，如下所示：

```
WriteableBitmap writeableBmp = new WriteableBitmap(x, y);
writeableBmp.GetBitmapContext();
Windows.UI.Color color = writeableBmp.GetPixel(120,120); 
```

我总是得到白色的颜色代码（{#00000000}）

# windows-phone-7 - 横向模式在 Windows Phone 模拟器中不起作用

> ID：15541757
> 
> 赞同：0
> 
> 时间：2013-03-21T07:30:10.383
> 
> 标签：windows-phone-7, landscape-portrait

横向模式在 Windows Phone 模拟器中无法正常工作。当我运行我的应用程序时，我看不到正确的键盘视图，例如在使用纵向模式时。如何启用键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:03:16.170

这听起来像 Windows Phone 模拟器中的方向？

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402568%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402568%28v=vs.105%29.aspx)

# wordpress - 数据库连接问题，无法从数据库中获取数据

> ID：15541760
> 
> 赞同：0
> 
> 时间：2013-03-21T07:30:19.280
> 
> 标签：wordpress

```
<?php
/*
Template Name: test
*/

// edit these values to match your database information
$server = "localhost";
$user = "root";
$password = "";
$db = "_wp201";

$con = mysql_connect($localhost,$user,$password); 

if (!$con) {
    die("database connection error");
} else {

mysql_select_db($db, $con);

// example query
$result = mysql_query("SELECT * FROM wp_posts
WHERE post_author='1'");

// show all posts by author 1 (admin)
while($row = mysql_fetch_array($result))
  {
    if($row['post_status'] == "publish") {
    echo "".$row['post_title']." <br />";
    }
  }

}
mysql_close($con);
?> 
```

我正在 wordpress 中创建一个自定义注册页面。所以我创建了一个测试页面来测试数据库连接。但是没有显示任何内容。为什么呢？请帮忙。（所有服务器进入都是正确的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:04:37.767

停止使用[`mysql_*`](http://php.net/manual/en/function.mysql-query.php)函数，它们将从 PHP 5.5.0 起被弃用。

* * *

改用 WordPress [`$wpdb`](http://codex.wordpress.org/Class_Reference/wpdb)。

```
$myrows = $wpdb->get_results( 
  "SELECT * FROM $wpdb->posts
   WHERE post_author=1" 
); 
```

* * *

使用[WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query)的 WordPress 方法：

```
<?php
/*
Template Name: test
*/

$myquery = new WP_Query( array(
  'author' => 1,
  'post_status' => 'publish'
  ) );

while( $myquery->have_posts() ):
  $myquery->the_post();
  echo get_the_title() . '<br />';
endwhile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:36:56.610

尝试`mysql_fetch_assoc`代替`mysql_fetch_array`

哦，您确定数据库中有包含这些数据的行吗？

# c++ - 共享内存中的向量结构

> ID：15541764
> 
> 赞同：1
> 
> 时间：2013-03-21T07:30:28.243
> 
> 标签：c++, memory, vector, struct, ipc

我有以下结构：

```
struct outData{   
    int a;
    float lat, lon;
} 
```

通过共享内存用于IPC。现在我想更新它看起来像这样：

```
 struct outData{
        int a;   
        std::vector<std::pair<std::string, int>> allInts;
        std::vector<std::pair<std::string, float>> allfloats;
} 
```

为了方便起见，我的共享内存为 4096 字节，因此我不必每次更改结构时都修改 sizeof(outData) 行代码。

当我用动态成员创建这样的结构时，是否保证它们都是在 (int a) 之后创建的，因此在共享内存中？

向量的向量怎么样？

```
 struct outData{
        int a;   
        std::vector<std::pair<std::string, int>> allInts;
        std::vector<std::pair<std::string, float>> allfloats;
        std::vector<std::pair<std::string, std::vector<byte>>> allByteMessages;
} 
```

哇，感谢您的快速回答！根据您的输入，我制定了此解决方案：

```
struct outData{
    int *iarray;
    float *farray;
} gtempStruct; 

SetSharedMem(std::vector<std::pair<int, float>> &input)
{
    void * p_v;
    gtempStruct.iarray = new int[input.size()];
    gtempStruct.farray = new float[input.size()];
    fillStruct(input);
    outData *p_oD = (outData *) p_Shm; // p_Shm = pointer to shared memory start
    *p_oD = gtempStruct;
    p_v = p_oD;
    p_v = reinterpret_cast<char*>(p_v) + sizeof(outData) -1;
    p_v = reinterpret_cast<void*>(p_v);
    memcpy(p_v, gtempStruct.iarray, sizeof(int)*input.size())
    p_oD->iarray = (int*) p_v;
    .
    .
    .
} 
```

这行得通，但它没有经过彻底的测试。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:33:36.990

这是行不通的。字符串不会在共享内存中。对象将`std::string`是，但其内容不会。对于`std::vector<byte>`. 矢量对象将在共享内存中，但其内容不会。

这两个类都不知道在构造它们时它们的内容有多大。所以他们的静态内容只包含足够的信息来找到他们的动态内容。动态内容是单独分配的。

如果要使用共享内存，则必须在字节级别定义该共享内存的内容。具有内部绝对指针的类将不起作用。如果您需要指针，则必须使它们相对于共享内存段的开头，以便它们在进程之间有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:39:05.350

我不确定您所说的“是否保证它们都是在 (int a) 之后创建的，因此在共享内存中”是什么意思。

但是，我认为您不能在 shmem 中使用带有虚拟表的对象（任何具有至少一个虚拟功能的对象）。当调用任何此类函数（例如析构函数）时，这可能会导致崩溃。

这是对数组使用的内存是动态分配的事实的补充，即实际数组位于其他位置。

您可能需要使用自定义结构，例如：

```
struct {
    int arraySize;
    int array[];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:41:07.147

这几乎不可能，但不值得。

std::string 和 std::vector 类在它们之外存储数据，通常在用 new 分配的堆上。您可以将不同的分配器作为模板参数传递，在这种情况下，将使用该分配器而不是新分配器。理论上，您可以编写一个能够理解您的共享内存的分配器。请注意，编写可靠的分配器很难。

此外，std 结构具有内部指针。如果两个进程中共享内存的虚拟地址不同（这很可能），那么这些指针将指向内存的奇怪部分。

请注意，您*可以*将普通的旧 c 样式数组放入结构中，*这些*数组将满足您的需求。包括，你可以使用一个可变长度的结构，前提是你不要对它做非常 c++ish 的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T07:38:42.003

恐怕行不通。

*   正如@DavidSchwartz 所指出的，向量会将实际字符串存储在内部管理的内存中（这当然与您拥有的任何专有共享内存机制无关）。
*   任何非 POD 数据类型通常都有大量自动生成的代码，这些代码将存储在您无法控制的位置：虚拟表、自动生成的构造函数等。有一些方法可以控制这种行为，但这并不是微不足道的，并不总是可能的，也不总是足够好。

# javascript - 使用 jQuery 从另一个网页抓取内容

> ID：15541766
> 
> 赞同：0
> 
> 时间：2013-03-21T07:30:29.210
> 
> 标签：javascript, jquery

我刚开始学习jQuery。我遇到了这个“从其他网页抓取内容”。我正在浏览其中一个站点中的代码以了解如何实现它，这是其中的一部分：

```
$(document).ready(function(){
    $('#list').load("http://www.narutoget.com ul", function(responseText){
        $('#otherHtml').text(responseText);
    });
}); 
```

我无法从页面（即 narutoget.com）获取内容。有人可以帮我解决如何实现它吗？我想知道这样做是否合法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:03:13.393

您可能被禁止使用跨站点来源策略。JSON-P 是解决这个问题的一种方法，[JQuery Cross-Domain .load() (self-constructing widget)](https://stackoverflow.com/questions/3889001/jquery-cross-domain-load-self-constructing-widget)

你有错误吗？查看 NET 下的 Web 检查器，查看该请求的状态代码是什么。如果没有任何错误或跨域限制，我看不出问题出在哪里。你有没有收到任何文字？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:50:31.473

由于您没有维护另一个站点，因此[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止它，除非另一个站点通过包含良好的[CORS 标头](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)明确允许它，并且唯一的解决方案是在服务器端进行，您可以在其中查询随心所欲的服务器。

如果您还维护另一个站点，那么您只需放置好的 CORS 标头即可让您的第一个站点查询它。

这是一个关于为各种服务器端技术启用跨源请求的好教程：[enable-cors](http://enable-cors.org/)

完成后，您只需查询服务器并分析页面：

```
$.get("http://www.narutoget.com", function(html) {
    var ul = $('ul', html).val();
    $('#otherHtml').text(ul);
}); 
```

# r - 如何根据条件替换多列中的值？

> ID：15541773
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:30:57.197
> 
> 标签：r, replace, find, criteria

我想`99`用仅在 columns`NA`中的所有记录替换所有值。我知道如何一次为一列执行此操作，但我想在一个命令中对所有列更有效地执行此操作。`ART == '999'``L1:L8`

样本数据：

```
df <- structure(list(KARTA = c("02C2H", "02C2H", "02C2H", "02C2H", 
"02C2H", "02C2H", "02C2H", "02C2H", "02C2H", "02C2H", "02C2H", 
"02C2H", "02C2H", "02C7H", "02C7H", "02C7H", "02C7H", "02C7H", 
"02C7H", "02C7H", "02C7H", "02C7H", "02C7H", "02C7H", "02C7H"
), YEAR = c(1997L, 1999L, 2000L, 2001L, 2002L, 2003L, 2005L, 
2006L, 2007L, 2008L, 2009L, 2010L, 2011L, 1997L, 1998L, 2000L, 
2001L, 2002L, 2003L, 2004L, 2006L, 2008L, 2009L, 2010L, 2011L
), ART = c("999", "999", "100", "100", "100", "999", "999", "999", 
"999", "999", "999", "999", "999", "999", "999", "999", "999", 
"999", "999", "999", "999", "999", "999", "999", "999"), L1 = c(99, 
99, 99, 99, 99, 10, 10, 10, 10, 10, 10, 10, 10, 99, 99, 99, 99, 
99, 10, 10, 10, 10, 10, 10, 10), L2 = c(99, 99, 99, 99, 99, 10, 
10, 10, 10, 10, 10, 10, 10, 99, 99, 99, 99, 99, 10, 9, 10, 10, 
10, 10, 10), L3 = c(99, 99, 99, 99, 99, 7, 10, 10, 10, 10, 10, 
10, 10, 99, 99, 99, 99, 99, 10, 10, 10, 10, 10, 10, 10), L4 = c(99, 
99, 99, 99, 99, 10, 10, 10, 10, 10, 10, 10, 10, 99, 99, 99, 99, 
99, 10, 10, 8, 7, 7, 10, 8), L5 = c(99, 99, 99, 99, 99, 5, 8, 
10, 10, 10, 10, 10, 10, 99, NA, 99, 99, 99, 10, 10, 7, 7, 0, 
10, 8), L6 = c(99, 99, 99, 99, 99, 8, 10, 10, 10, 10, 10, 10, 
10, 99, 99, 99, 99, 99, 10, 9, 10, 10, 10, 10, 10), L7 = c(99, 
99, 99, 99, 99, 10, 10, 10, 10, 10, 10, 8, 10, 99, 99, 99, 99, 
99, 10, 10, 10, 10, 10, 10, 10), L8 = c(99, 99, 99, 99, 99, 10, 
10, 10, 10, 10, 10, 10, 10, 99, 99, 99, 99, 99, 10, 10, 6, 10, 
10, 10, 10)), .Names = c("KARTA", "YEAR", "ART", "L1", "L2", 
"L3", "L4", "L5", "L6", "L7", "L8"), row.names = c(161008L, 161009L, 
161010L, 161011L, 161012L, 87055L, 106223L, 128072L, 160909L, 
172583L, 208774L, 45L, 227972L, 161013L, 161014L, 161015L, 161016L, 
161017L, 71813L, 89034L, 139633L, 181266L, 208838L, 97L, 225989L
), class = "data.frame") 
```

如何替换单列（'L1'）中的值的示例

```
df[which(df$ART == '999' & df$L1 == '99'), ] <- NA 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T07:59:51.987

在您的示例中，数据`ART`始终为 999，但我认为并非总是如此，您只想在 where 的那些行中替换`99`为，可以这样完成：`NA``ART==999`

```
df$ART[3:5]<-100 #just to give some difference
df[df$ART==999, 4:10][df[df$ART==999,4:10] == 99] <- NA

       KARTA YEAR ART L1 L2 L3 L4 L5 L6 L7 L8
161008 02C2H 1997 999 NA NA NA NA NA NA NA 99
161009 02C2H 1999 999 NA NA NA NA NA NA NA 99
161010 02C2H 2000 100 99 99 99 99 99 99 99 99
161011 02C2H 2001 100 99 99 99 99 99 99 99 99
161012 02C2H 2002 100 99 99 99 99 99 99 99 99
87055  02C2H 2003 999 10 10  7 10  5  8 10 10
... 
```

# java - 根据 Object 的成员变量从 value 中对 HashMap 进行排序

> ID：15541777
> 
> 赞同：6
> 
> 时间：2013-03-21T07:31:08.413
> 
> 标签：java, sorting, collections, hashmap

上一节课

```
class Employee {
    int id;
    String name;
} 
```

和一张包含此对象值的地图

```
Map<Integer, Employee> map = new HashMap<Integer, Employee>(); 
```

现在我想对上面`map`的一个基础进行排序`Employee's name`。意味着当我使用 迭代此地图时`Map.Entry`，`Employee`对象必须按字母顺序检索。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:43:34.103

使用此构造函数将[TreeMap](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)与自定义[Comparator一起使用：](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

[http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap(java.util.Comparator)](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap(java.util.Comparator))

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:52:56.690

您无法对 a 进行排序`HashMap`，但您可以对使用 获得的条目进行排序`entrySet()`。

```
public class MapSort {
    private static class Employee {
        public String name;

        public Employee(String name) {
            this.name = name;
        }

        @Override
        public String toString() {
           return name;
        }
    }

    public static void main(String[] args) {
        Map<Integer, Employee> map = new HashMap<Integer, Employee>();

        map.put(1, new MapSort.Employee("x"));
        map.put(2, new MapSort.Employee("a"));
        map.put(3, new MapSort.Employee("f"));

        List<Map.Entry<Integer, Employee>> entryList = new ArrayList<Map.Entry<Integer, Employee>>(map.entrySet());

            Collections.sort(
                    entryList, new Comparator<Map.Entry<Integer, Employee>>() {
                @Override
                public int compare(Map.Entry<Integer, Employee> integerEmployeeEntry,
                                   Map.Entry<Integer, Employee> integerEmployeeEntry2) {
                    return integerEmployeeEntry.getValue().name
                            .compareTo(integerEmployeeEntry2.getValue().name);
                }
            }
        );

        System.out.println(entryList);
    }
} 
```

排序后，您可以将条目放回支持排序的地图中，例如[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)。

这取决于您的用例：如果您需要始终对地图进行排序，则使用`TreeMap`带有额外开销的 a 会更简单。如果你只需要一次排序，你可以使用`HashMap`上面的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T11:07:44.240

Michaël 建议了一个链接，即[Sort a Map<Key, Value> by values (Java)](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)。我对它做了一些改变。它对我有用

```
class ValueComparator implements Comparator<Integer> {

    Map<Integer, Employee> base;
    public ValueComparator(Map<Integer, Employee> base) {
        this.base = base;
    }

    // Note: this comparator imposes orderings that are inconsistent with equals.    
    public int compare(Integer a, Integer b) {
        return ((Employee)base.get(a)).compareTo(base.get(b));
    }

}

class Employee implements Comparable {
    public String name;
    public int id;

    Employee(int id, String name) {
        this.id = id;
        this.name = name;
    }

    @Override
    public int compareTo(Object obj) {
        return this.name.compareTo(((Employee)obj).name);
    }

    public String toString() {
        return name;
    }
} 
```

有关解决方案，请参阅上面的链接。

感谢所有有回复的人。

# ruby-on-rails - git push heroku 挂起

> ID：15541779
> 
> 赞同：2
> 
> 时间：2013-03-21T07:31:22.367
> 
> 标签：ruby-on-rails, git, heroku, github

免责声明：我是菜鸟。

我正在使用[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)学习 ruby ​​，直到两天前一切正常。

我不确定到底出了什么问题，但我无法再推送到 heroku，它开始正常但随后挂在以下行（这些是控制台上的最后一行）：

```
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker 
```

事实： Git remove -v 工作正常。该应用程序在我的电脑上运行良好。我的系统：最新的 Mac OS、RoR 应用程序。我的应用在这里：[https ://github.com/eladsof/sample_app](https://github.com/eladsof/sample_app)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:46:51.267

您的 git 存储库中有大约 50MB 的数据文件。当您删除它们时，事情似乎起作用了。

尝试用这样的东西删除它们（如果你不需要它们）

```
git rm ./db/pg_xlog/000000010000000000000001
git rm ./db/pg_xlog/000000010000000000000002
git rm ./db/pg_xlog/000000010000000000000003
git rm db/pg_clog/0000
git commit -m 'removing big files' 
```

然后再次尝试推动。

（当然，假设您不需要它们）

# java - JAVA：使用同一个套接字在多个线程上管理 DataInputStream

> ID：15541786
> 
> 赞同：1
> 
> 时间：2013-03-21T07:31:54.873
> 
> 标签：java, multithreading, sockets, inputstream

所以基本上我有一个主线程，它将接受一个套接字并创建一个 DataInputStream 对象来接收数据，然后将此 Input 对象传递给不同的子线程，在那里他们将使用它来接收数据并执行不同的任务。但这是行不通的，因为两个线程都使用同一个对象来监听，所以当用户发送一些我不知道谁会读它的东西时。我的想法到目前为止：

1-创建某种组织者来接收传入的请求并将它们重定向到负责的线程（我不太确定该怎么做）。

2-当一个线程期待一系列传入请求（基于时间）时，它必须让另一个线程休眠，以便它可以接管输入流（我不确定它是否可以完成）。

任何其他想法或如何实现其中任何一个？谢谢！

（在最坏的情况下，我必须将两个线程合二为一……）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:40:08.407

我建议你使用`ReadWriteLock`，深入了解它的 api 和示例。对于这种连接线​​程的情况，您可以使用`CiclycBarier`

[CiclycBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)和[ReadWriteLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html)

希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T07:54:53.127

我宁愿选择选项 1。但是您不应该将数据输入流传递给其他对象。相反，我建议由一个对象负责从数据输入流中提取数据。然后可以将提取的数据传递给另一个负责处理它的对象。要处理数据，您应该查看策略模式。

此外，我认为您对线程的使用通过使每个线程负责一件事来强制进行过多的耦合。你不应该担心这个。相反，您应该有一个[Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)。对于每个接受的套接字，您创建一个传递给执行程序的任务。任务本身通过数据输入流从套接字中提取数据，并创建另一个任务来处理数据。然后这个任务再次被分派给执行者。通过这种方式，您可以使您的应用程序更具可测试性，因为您不必依赖多个线程。

# paypal-sandbox - 沙盒中的贝宝自适应付款失败并出现错误“收款人位于无法接收付款的国家/地区”

> ID：15541789
> 
> 赞同：2
> 
> 时间：2013-03-21T07:32:01.183
> 
> 标签：paypal-sandbox, paypal-adaptive-payments

我正在使用贝宝自适应付款进行自动充值。早些时候，它曾经在沙盒模式下正常工作。我的沙盒测试帐户在澳大利亚，现在自适应支付失败并显示错误消息“接收方位于无法接收付款的国家/地区”。澳大利亚不再支持贝宝自适应付款吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:17:52.220

我在澳大利亚也有同样的问题，和维杰一样，我没有解决方案。

根据[https://www.x.com/developers/paypal/documentation-tools](https://www.x.com/developers/paypal/documentation-tools)的说法，关于自适应支付是否属于经典 API 的不确定性。

从页面： *我们正在弃用 x.com 上的 PayPal 内容。PayPal 经典 API（例如 PayPal Payments Standard、Express Checkout 和 Adaptive Payments）的文档尚未移至新站点，但我们将继续在此处更新内容，直到移走为止。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:00:31.720

似乎他们（PP）切换了美国的所有沙盒帐户，因此您现在需要将所有测试帐户电子邮件更新回您的国家/地区。

这是来自[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

“使用您之前在沙盒中使用的电子邮件地址和密码导入您现有的沙盒测试帐户。确保导入到您要用于开发的 PayPal 帐户。您只能导入一次。导入数据”

此外，来自[https://developer.paypal.com/webapps/developer/support/faq#non-US-dev](https://developer.paypal.com/webapps/developer/support/faq#non-US-dev)

“我是非美国开发人员。网站重新设计对我有何影响？您可以使用我们的经典 API（如 Checkout 和 PayPal Payments Standard）进行新的集成。如果您没有 PayPal 帐户，您可以创建一个您所在国家/地区的新企业帐户。

如果您之前使用过我们的经典 API，您可以继续使用它们。您可以使用旧的 Sandbox 电子邮件地址和密码在 Sandbox Accounts 页面上导入现有的 Sandbox 帐户。

我们的 REST API 和 PayPal 移动 SDK 目前仅针对美国市场。但是，我们将在今年剩余时间内将它们推广到其他国家。”

这听起来不太好，我知道...

# java - 为什么 FindBugs 在显式抛出 NPE 时会发出严重警告？

> ID：15541795
> 
> 赞同：2
> 
> 时间：2013-03-21T07:32:34.770
> 
> 标签：java, null, nullpointerexception, static-analysis, findbugs

[从FindBugs 错误描述](http://findbugs.sourceforge.net/bugDescriptions.html#NP_GUARANTEED_DEREF)中考虑以下内容

> **NP：保证取消引用空值（NP_GUARANTEED_DEREF）**
> 
> 有一个语句或分支，如果执行，则保证此时的值为 null，并且保证取消引用该值（涉及运行时异常的正向路径除外）。
> 
> 请注意，诸如 if (x == null) 之类的检查 throw new NullPointerException(); 被视为 x 的取消引用。

*涉及运行时异常的正向路径上*的 except 是什么意思？

还有为什么要`if (x == null) throw new NullPointerException();`发出警告之类的支票？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:24:17.617

考虑一下这个可怕的人为代码：

```
String value = null;
if (5 > 8) {
    value = "foo";
}
doSomething();
if (value.equals("foo")) {
    System.out.println("value is foo");
} 
```

静态分析可以证明`value`will be `null`when`equals`被调用，导致 a`NullPointerException`被抛出。但是，如果调用`doSomething()`导致抛出运行时异常，则调用`equals`将永远无法到达。这就是“在涉及运行时异常的正向路径上除外”的含义。

至于您的第二个问题，FindBugs 对此代码发出警告

```
if (value == null) {
    throw new NullPointerException();
} 
```

`null`因为效果与取消引用值时发生的效果相同。由于取消引用值得警告，因此任何模仿该取消引用的代码也是如此。

# ios - 检索 NSDictionary 对象

> ID：15541796
> 
> 赞同：0
> 
> 时间：2013-03-21T07:32:50.427
> 
> 标签：ios, nsdictionary, nsxmlparser

我有以下从 XML Parser 中提取的字典。使用 github 库从以下链接解析 XML 文件。

[XML 到 NSDictionary 解析器库](https://github.com/Insert-Witty-Name/XML-to-NSDictionary)

```
 Quiz = { 
questions = (
    {
    "@id" = 1;
    answer = D;
    A = "Under the rock";
    B = "Trees";
    C = "Mountain";
    D = Water;
    question = "Where does the fish live?";
    },
    {
    "@id" = 2;
    answer = D;
    A = "Four";
    B = "Two";
    C = "Six";
    D = Three;
    question = "How many legs for a rabbit?";
    },......
    }; 
```

我正在尝试检索关键问题、答案、选项 1-4 的对象。但是有些我无法传递价值。

```
for (NSString * key in xmlDictionary) {
        NSDictionary * subDict = [xmlDictionary objectForKey:@"questions"];
        NSLog(@"Correct Answers \n\n%@", [subDict objectForKey:@"answer"]);
        // all your other code here.
    } 
```

不要认为任何价值正在返回。实际上我在那个 xml 中有 10 个元素，在解析过程中它显示我有 10 个计数。但是，当我尝试计算 xmlDictionary 并返回 1 时。不确定这里出了什么问题？

另外，我将如何提取所有值取决于@id？

使困惑！​​！！

更新：我在 XML 文件中将 ... 标签更改为 ...

```
NSDictionary *currentObject;
    if (rowIndex < countXML)
    {
        currentObject=[muteArr objectAtIndex:rowIndex];
    }
    else
    {
        [self performSegueWithIdentifier:@"simple" sender:self];
    }

    NSString *questionLbl = [currentObject objectForKey:@"question"];
    NSString *op1Lbl = [currentObject objectForKey:@"A"];
    NSString *op2Lbl = [currentObject objectForKey:@"B"];
    NSString *op3Lbl = [currentObject objectForKey:@"C"];
    NSString *op4Lbl = [currentObject objectForKey:@"D"];
    NSString *answer = [currentObject objectForKey:@"answer"];
    NSString *questNoLbl = [currentObject objectForKey:@"@ID"];

questionID.text = [@"Question # " stringByAppendingString:questNoLbl];
    question.text = questionLbl;

    [answer1 setTitle:op1Lbl forState:UIControlStateNormal];
    [answer2 setTitle:op2Lbl forState:UIControlStateNormal];
    [answer3 setTitle:op3Lbl forState:UIControlStateNormal];
    [answer4 setTitle:op4Lbl forState:UIControlStateNormal]; 
```

现在我有了这段代码，可以检索每个问题并将其显示在 QuizViewController 中。当用户按下按钮时，它应该 Segue 到一个新的 Controller 并显示答案是否正确，并在单击 ResultViewController 中的“继续”按钮后返回 QuizViewController。现在我已经完成了所有这些设置。

现在想在 ResultViewController 中显示答案是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:42:33.817

有了这条线

```
NSDictionary * subDict = [xmlDictionary objectForKey:@"questions"]; 
```

你得到相同的字典，你已经有了。

尝试这个：

```
for (NSString * key in xmlDictionary) {
    NSDictionary * subDict = [xmlDictionary objectForKey:key];
    NSLog(@"Correct Answers \n\n%@", [subDict objectForKey:@"answer"]);
    // all your other code here.
} 
```

使用您编辑的 XML 结构，您应该这样做：

```
NSDictionary * rootDict = [xmlDictionary objectForKey:@"questions"];
for (NSString * key in rootDict) {
        NSDictionary * subDict = [rootDict objectForKey:key];
        NSLog(@"Correct Answers \n\n%@", [subDict objectForKey:@"answer"]);
        // all your other code here.
    } 
```

# .htaccess - .htaccess 用于静态到 wordpress 的转换

> ID：15541797
> 
> 赞同：0
> 
> 时间：2013-03-21T07:32:53.180
> 
> 标签：.htaccess

这是我用于 wordpress 博客的 .htaccess 文件 -

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

我将 html 网站转换为 Wordpress 博客。我想将我的静态 html 和 htm 页面重定向到 wordpress 帖子。

htaccess 格式的方式和内容。

IE

```
Old URl: http://mywebsite.com/saarclaw/pakistan/companies_act.htm 
New URL: http://mywebsite.com/saarclaw/pakistan/the-companies-ordinance-1984.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:01:21.773

在您的 wordpress 规则之前，为您的每个页面添加这些：

```
RewriteRule ^aarclaw/pakistan/companies_act.htm$ /saarclaw/pakistan/the-companies-ordinance-1984.html [L,R=301] 
```

# oracle - 在 oracle 中选择查询

> ID：15541799
> 
> 赞同：0
> 
> 时间：2013-03-21T07:32:59.033
> 
> 标签：oracle

我有这样的数据库设计......

```
 dated       ref       weight  no.  address

21-03-2013  ABCD/EDFG     1234   A45   A1 
20-03-2013  ABCD/EDFG     789    A56   A2
25-03-2013  ABCD/EDFG     6981   A99   A5 
23-03-2013  GAJHS/ASDH     72    A82   GV 
```

我在查询结果中想要的是这样的......
根据**否搜索。**
但是，它必须查看该行的**引用**是否存在更多次，如果存在，则必须添加所有此类行的权重，记住所有此类记录的**日期**应小于所选**编号的日期。**.

例子 -

```
no. = A56
three rows exist with same ref(ABCD/EDFG)
but dated of A56 is lower among all so results should be 

     ref ------ weight --------  no. -------- address
ABCD/EDFG ------ 789 ----------- A56 -------- A2 
```

但在没有的情况下。= A99 结果应该是这样的——

```
ref ----------- weight --------  no. -------- address
ABCD/EDFG --- (789+6981+1234) ----------- A99 -------- A5 

as dated of A99 is greater than other two records. 
```

请在此查询中帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:42:08.140

```
select 
   ref, 
   sum(weight) over (partition by ref order by dated) as weight,
   no,
   address
from
   ... 
```

# java - Hadoop 程序找不到已安装的二进制文件

> ID：15541802
> 
> 赞同：1
> 
> 时间：2013-03-21T07:33:06.190
> 
> 标签：java, hadoop, hdfs

我已经在我的机器上安装并运行了 hadoop，我正在尝试运行 PEGASUS peta 规模的挖掘程序，但是当我做 make 时，有很多警告，以下是其中的一部分：

```
13/03/21 12:58:42 WARN hdfs.DFSClient: DataStreamer Exception: org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /user/hadoop/hadi_edge/catepillar_star.edge could only be replicated to 0 nodes, instead of 1
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

    at org.apache.hadoop.ipc.Client.call(Client.java:1066)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.addBlock(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at $Proxy1.addBlock(Unknown Source)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3507)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3370)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2700(DFSClient.java:2586)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2826)

13/03/21 12:58:42 WARN hdfs.DFSClient: Error Recovery for block null bad datanode[0] nodes =
= null
13/03/21 12:58:42 WARN hdfs.DFSClient: Could not get block locations. Source file "/user/hadoop/hadi_edge/catepillar_star.edge" - Aborting...
put: java.io.IOException: File /user/hadoop/hadi_edge/catepillar_star.edge could only be replicated to 0 nodes, instead of 1
13/03/21 12:58:42 ERROR hdfs.DFSClient: Exception closing file /user/hadoop/hadi_edge/catepillar_star.edge : org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /user/hadoop/hadi_edge/catepillar_star.edge could only be replicated to 0 nodes, instead of 1
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

org.apache.hadoop.ipc.RemoteException: java.io.IOException: File /user/hadoop/hadi_edge/catepillar_star.edge could only be replicated to 0 nodes, instead of 1
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:1558)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.addBlock(NameNode.java:696)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382)

    at org.apache.hadoop.ipc.Client.call(Client.java:1066)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy1.addBlock(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:82)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:59)
    at $Proxy1.addBlock(Unknown Source)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.locateFollowingBlock(DFSClient.java:3507)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.nextBlockOutputStream(DFSClient.java:3370)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream.access$2700(DFSClient.java:2586)
    at org.apache.hadoop.hdfs.DFSClient$DFSOutputStream$DataStreamer.run(DFSClient.java:2826) 
```

我认为这是一个权限问题然后我尝试了 sudo make 然后我得到了以下错误：

```
Hadoop is not installed in the system.
Please install Hadoop and make sure the hadoop binary is accessible.
make: *** [demo_hadi] Error 127 
```

当我打印我的 jps 时，Hadoop 已经安装：

```
hadoop@polaris:~/PEGASUS$ jps
7814 JobTracker
8061 TaskTracker
3799 FsShell
7718 SecondaryNameNode
9155 FsShell
8881 RunJar
7235 NameNode
6339 RunJar
9236 Jps 
```

感谢您的时间，我真的很想知道出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:46:44.190

可见，Datanode 未在您的系统上启动（“只能复制到 0 个节点，而不是 1 个”的可能原因是相同的）

它有时会发生。

解决方案：停止所有 hadoop 守护程序并重新启动它们。查看是否所有 5 个守护进程都在运行（namenode、Secondary namenode、datanode、jobtracker、tasktracker）。

尝试运行一些示例代码来测试该框架是否运行良好。

如果上述解决方案不起作用，请重新启动机器。

如果问题仍然存在，请重新格式化 namenode（虽然不是一个很好的建议；应该保留为最后的解决方案）。

# java - 在单独的线程中创建 ServerSocket？

> ID：15541804
> 
> 赞同：26
> 
> 时间：2013-03-21T07:33:18.060
> 
> 标签：java, multithreading, serversocket

`ServerSocket`在我的应用程序中使用 a 时遇到问题。

我正在`ServerSocket`我的应用程序的构造函数中创建。套接字的构造函数调用该`accept()`方法等待客户端连接。

问题是该`accept()`方法冻结了我的整个应用程序，直到客户端连接。所以我想问是否有一种替代方法可以`ServerSocket`在单独的线程中创建整体，在我的主应用程序旁边调用 the 的构造函数`ServerSocket`及其`accept()`方法？

编辑：

感谢 Olivier 的建议，将 .accept 放入可运行文件并创建线程池来处理客户端连接。

这就是我现在的代码：

```
 public void start(){

      final ExecutorService clientProcessingPool = Executors.newFixedThreadPool(10);

      Runnable serverTask = new Runnable() {
          @Override
          public void run() {

              try {
                  serverSocket = new ServerSocket(port);

                  while (true) {
                      Socket clientSocket = serverSocket.accept();
                      objectout = new ObjectOutputStream(clientSocket.getOutputStream());
                      clientProcessingPool.submit(new ClientTask(clientSocket,objectout)); 
                  }
              } catch (IOException e) {
                  System.err.println("Accept failed.");
              }

          }
      }; 
```

一切运行良好！谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-21T07:37:56.633

通常，我为此使用 N+1 个线程：一个用于 ServerSocket，以避免阻塞整个应用程序等待客户端连接；和 N 个线程来处理客户端的请求，N 是线程池的大小（我建议使用线程池而不是为每个客户端创建一个新线程）。

这是一个示例（只是对其进行了编码，您可能希望有更好的异常管理等，但这是一个最小的工作示例）

```
public class Server {

    public static void main(String[] args) {
        new Server().startServer();
    }

    public void startServer() {
        final ExecutorService clientProcessingPool = Executors.newFixedThreadPool(10);

        Runnable serverTask = new Runnable() {
            @Override
            public void run() {
                try {
                    ServerSocket serverSocket = new ServerSocket(8000);
                    System.out.println("Waiting for clients to connect...");
                    while (true) {
                        Socket clientSocket = serverSocket.accept();
                        clientProcessingPool.submit(new ClientTask(clientSocket));
                    }
                } catch (IOException e) {
                    System.err.println("Unable to process client request");
                    e.printStackTrace();
                }
            }
        };
        Thread serverThread = new Thread(serverTask);
        serverThread.start();

    }

    private class ClientTask implements Runnable {
        private final Socket clientSocket;

        private ClientTask(Socket clientSocket) {
            this.clientSocket = clientSocket;
        }

        @Override
        public void run() {
            System.out.println("Got a client !");

            // Do whatever required to process the client's request

            try {
                clientSocket.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

} 
```

# sql - 如何在以下场景中应用枢轴

> ID：15541806
> 
> 赞同：0
> 
> 时间：2013-03-21T07:33:35.023
> 
> 标签：sql, sql-server, tsql, pivot

我有下表

```
Name    Month   Year    Count
----------------------------
xxx     12      2012    24
xxx     1       2013    42
xxx     2       2013    23
yyy     12      2012    34
yyy     1       2013    12
yyy     2       2013    54 
```

我想把它转换成下面的格式，

```
Name    Dec-12  Jan-13  Feb-13
--------------------------------
xxx     24      42      23
yyy     34      12      54 
```

如何应用支点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:10:52.867

由于您使用的是 SQL Server，因此您可以通过多种方式将数据从行转换为列。

如果您的值是有限的或者您有已知数量的值，那么您可以使用静态枢轴对值进行硬编码：

```
select name, [Dec_12], [Jan_13], [Feb_13]
from
(
  select name,
    left(datename(month, dateadd(month, month, 0) -1), 3) +'_'+right(cast(year as varchar(4)), 2) MY,
    [count]
  from yourtable
) src
pivot
(
  sum(count)
  for my in ([Dec_12], [Jan_13], [Feb_13])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/5c7bb/16)。

现在，如果您有未知数量的值，那么您将需要实现动态 SQL 来生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(my) 
                    from 
                    (
                      select left(datename(month, dateadd(month, month, 0) -1), 3) +'_'+right(cast(year as varchar(4)), 2) my,
                         CAST(
                            CAST(year AS VARCHAR(4)) +
                            RIGHT('0' + CAST(month AS VARCHAR(2)), 2) +
                            '01'
                         AS DATETIME) fulldate
                      from yourtable
                    ) t
                    group by my, fulldate
                    order by fulldate 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name, ' + @cols + ' 
              from 
             (
                select name,
                  left(datename(month, dateadd(month, month, 0) -1), 3) +''_''+right(cast(year as varchar(4)), 2) MY,
                  [count]
                from yourtable
            ) x
            pivot 
            (
                sum(count)
                for my in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8d98b/1)。

与此版本和静态版本的区别在于，如果您需要未知数量的日期，或者希望在新日期可用时自动更新，这将在不更改代码的情况下返回新数据。

两个查询的结果是：

```
| NAME | DEC_12 | JAN_13 | FEB_13 |
-----------------------------------
|  xxx |     24 |     42 |     23 |
|  yyy |     34 |     12 |     54 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:39:05.600

尝试这个：

```
WITH CTE
AS
(
  SELECT
    Name, 
    CAST(Month AS VARCHAR(2)) + '-' + CAST(Year AS VARCHAR(4)) AS MonthYear,
    [Count]
  FROM tablename
)
SELECT 
  Name,
  [12-2012] AS 'Dec-12', 
  [1-2013]  AS 'Jan-13', 
  [2-2013]  AS 'Feb-13'
FROM CTE
PIVOT
(  
   MAX([Count])
   FOR MonthYear IN([12-2012], 
                    [1-2013], 
                    [2-2013])
) AS p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/41db5/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:44:38.480

```
 SELECT t.name
         , MAX(CASE
                 WHEN t.month=12 AND t.year = 2012
                   THEN count
                 ELSE NULL
               END) AS "Dec_12"
         , MAX(CASE
                 WHEN t.month=1 AND t.year = 2013
                   THEN count
                 ELSE NULL
               END) AS "Jan_13"
         , MAX(CASE
                 WHEN t.month=2 AND t.year = 2013
                   THEN count
                 ELSE NULL
               END) AS "Feb_13"
    FROM table t
GROUP BY t.name
; 
```

# vba - vba 命令在 PowerPoint 中粘贴特殊的 KeepSourceFormatting(K)

> ID：15541809
> 
> 赞同：0
> 
> 时间：2013-03-21T07:33:45.163
> 
> 标签：vba, powerpoint, paste

我正在尝试从 excel 中获取一个单元格范围并将其复制到 powerpoint2010。但是我不想使用嵌入式格式，而是使用 KeepSourceFormatting 格式。我尝试了以下命令

ActiveWindow.View.PasteSpecial 数据类型：=ppPasteOLEObject，链接：=msoFalse

但这仍然会创建一个启动 excel 来编辑内容的对象。

基本上我想将格式化数据表从 excel 粘贴到 powerpoint 并保持其外观，但仍然能够编辑 powerpoint 中的内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:03:05.293

有以下选项`DataType`：

`ppPasteEnhancedMetafile`允许编辑表的每个单独字段（相当纯的解决方案）

`ppPasteMetafilePicture`类似的选项

`ppPasteOLEObject`你知道的

我看不到任何其他选择。

# card.io - 有没有办法自定义card.io SDK？

> ID：15541810
> 
> 赞同：2
> 
> 时间：2013-03-21T07:33:47.867
> 
> 标签：card.io

首先让我感谢您的辛勤工作和出色的信用卡处理智能 sdk。

我到了一个点，想根据我的客户需求对其进行定制。有什么方法可以自定义吗？说例如，我想检测持卡人姓名，卡上，添加企业标志等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T22:03:41.847

所有可用的定制都可以在 SDK 附带的文档齐全的头文件中找到。我们不会在集成页面中记录所有可用的选项，以避免不堪重负。

如果您想要的某些内容无法通过记录的标头获得，请随时将您的功能请求发送到 support@card.io。

# python - 为什么我不能导入 nltk？

> ID：15541814
> 
> 赞同：5
> 
> 时间：2013-03-21T07:34:00.403
> 
> 标签：python, windows, 64-bit, nltk

在具有 64 位操作系统的 Windows 中，一旦我从[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装了 nltk-2.0.4.win-amd64-py2.7.exe ，对于我的 64 位python，我运行'import nltk'得到以下错误！

```
Traceback (most recent call last):
  File "<pyshell#25>", line 1, in <module>
    import nltk
  File "C:\Python27\lib\site-packages\nltk\__init__.py", line 131, in <module>
    from inference import *
  File "C:\Python27\lib\site-packages\nltk\inference\__init__.py", line 19, in <module>
    from discourse import (ReadingCommand, CfgReadingCommand,
  File "C:\Python27\lib\site-packages\nltk\inference\discourse.py", line 54, in <module>
    from nltk.sem.glue import DrtGlue
  File "C:\Python27\lib\site-packages\nltk\sem\glue.py", line 13, in <module>
    from nltk.corpus import brown
  File "C:\Python27\lib\site-packages\nltk\corpus\__init__.py", line 70, in <module>
    from reader import *
  File "C:\Python27\lib\site-packages\nltk\corpus\reader\__init__.py", line 85, in <module>
    from nltk.corpus.reader.pl196x import *
  File "C:\Python27\lib\site-packages\nltk\corpus\reader\pl196x.py", line 11, in <module>
    from nltk import tokenize, tree
ImportError: cannot import name tokenize 
```

有关如何解决此问题的建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T03:29:55.997

我按照以下参考链接解决了这个问题。在 Win7 环境下，Python 安装程序有时无法创建正确的注册表项，用户需要手动创建它们。

参考链接：[http ://www.fbagirov.com/2012/10/13/installing-nltk-for-python/](http://www.fbagirov.com/2012/10/13/installing-nltk-for-python/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T00:34:10.830

我通过使用我的 python 安装路径的值创建一个环境变量“PYTHONPATH”来解决这个问题。

# javascript - 通过传递另一个属性作为键，使用 struts 标签从地图中获取值

> ID：15541816
> 
> 赞同：2
> 
> 时间：2013-03-21T07:34:02.290
> 
> 标签：javascript, jsp, struts2

```
<s:property value="currentStep" />
<s:set var="nextURL" value="%{campaignStepsMap.get(currentStep).nextUrl}" scope="page" />
<s:property value="nextURL" /> 
```

这`currentStep`是一个来自动作类的具有整数值的属性。并且`campaignStepMap`是一个linkedHashMap。我想用下面的代码在java中得到完全相同的值

```
campaignStepsMap.get(currentStep).nextUrl(); 
```

但是在 Jsp 页面中，我没有得到与索引相对应的值。似乎`value="%{campaignStepsMap.get(currentStep).nextUrl}"`没有读取`currentStep`为整数。我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:01:25.937

您可以像这样从地图中获取价值：

```
<s:property value="campaignStepsMap[currentStep].nextUrl"/> 
```

如果你想使用`<s:set>`标签，`scope="page"`那么你需要使用`#attr`来获取价值。

```
<s:set var="nextURL" value="campaignStepsMap[currentStep].nextUrl" scope="page"/>
<s:property value="#attr.nextURL"/> 
```

# iphone - 无法从我的班级执行 segue

> ID：15541817
> 
> 赞同：0
> 
> 时间：2013-03-21T07:34:14.757
> 
> 标签：iphone, ios, objective-c, uistoryboardsegue

我正在使用图书馆 KYCircleMenu。你可以在[这里](https://github.com/Kjuly/KYCircleMenu)找到它。我也在使用故事板。我制作了一个派生自 KYCircleMenu 的类 MenuViewController

```
@interface MenuViewController : KYCircleMenu 
```

接下来我已经像这样实现了我的 initWithCoder。

```
- (id)initWithCoder:(NSCoder*)aDecoder
{
    NSLog(@"called");
    if(self = [self initWithButtonCount:kKYCCircleMenuButtonsCount
                              menuSize:kKYCircleMenuSize
                            buttonSize:kKYCircleMenuButtonSize
                 buttonImageNameFormat:kKYICircleMenuButtonImageNameFormat
                      centerButtonSize:kKYCircleMenuCenterButtonSize
                 centerButtonImageName:kKYICircleMenuCenterButton
       centerButtonBackgroundImageName:kKYICircleMenuCenterButtonBackground]) 
    { 

    } 
    return self;
} 
```

最后我从 KyCicrleMenu 实现了一个方法`RunButtonActions`。此方法告诉我在菜单中按下了哪个按钮。因此，在这种方法中，我试图对另一个视图控制器进行 segue。我正在这样做。

```
 NSLog(@"tag is %d",[sender tag]);
    [self performSegueWithIdentifier:@"showNews" sender:self]; 
```

（日志给了我按下按钮的按钮标签）。出于某种原因，我不断收到此错误。

```
Receiver (<MenuViewController: 0x1cd7cf50>) has no segue with identifier 'showNews'' 
```

这是我的故事板的屏幕截图。

![在此处输入图像描述](../Images/0e881f70f2d4d2339dcad02059745896.png)

有人可以帮我解决这个烦人的问题吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:46:49.543

```
- (id)initWithCoder:(NSCoder*)aDecoder
{
    NSLog(@"called");
    if(self = [self initWithButtonCount:kKYCCircleMenuButtonsCount
                              menuSize:kKYCircleMenuSize
                            buttonSize:kKYCircleMenuButtonSize
                 buttonImageNameFormat:kKYICircleMenuButtonImageNameFormat
                      centerButtonSize:kKYCircleMenuCenterButtonSize
                 centerButtonImageName:kKYICircleMenuCenterButton
       centerButtonBackgroundImageName:kKYICircleMenuCenterButtonBackground]) 
    { 

    } 
    return self;
} 
```

在这里，您没有对`aDecoder`对象做任何事情 - 它包含来自情节提要的所有信息（包括 segue）。相反，您正在创建一个全新的对象，忽略您在情节提要中设置的任何内容。

我快速浏览了存储库，它似乎并没有为在故事板中使用而量身定制——它实现了自己的 loadView 方法，它有一个指定的初始化程序等等。在调用 之后，您必须使用它来设置这些属性`[super initWithCoder:aDecoder];`，可能是通过从指定的初始化程序中提取设置代码并将其放入单独的方法中。

# ruby-on-rails - Ember.js 中的非 crud rails 动作

> ID：15541820
> 
> 赞同：2
> 
> 时间：2013-03-21T07:34:32.620
> 
> 标签：ruby-on-rails, ember.js, crud

如何在 Ember.js 中使用我的 rails 控制器中的非粗略操作？

即在我的控制器中，除了索引、显示、创建之外，我还有其他一些操作......就像 makeMoreFun 操作，我想在 ember 中使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:35:22.150

您可以使用直接的 JQuery ajax 调用：

```
$.ajax({
  url: '/projects/' + project_id + '.json',
  type: 'GET',
  success: function(data, textStatus, xhr) {
    result.setProperties(data.project);
    result.set('isLoaded', true);
  },
  error: function(xhr, textStatus, errorThrown) {
    alert('not found');
  } 
```

# extjs - 更改 extjs4 中的 tabpanels 选项卡会触发哪个事件？

> ID：15541821
> 
> 赞同：0
> 
> 时间：2013-03-21T07:34:38.137
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我正在extjs4 mvc.i工作，当时我想处理事件，当标签面板选项卡要更改时。我正在使用ExtJS4中的MVC结构。我正在尝试使用TAB更改事件，但是当Tab更改时，它永远不会被触发。请给我一些建议如何处理此类条件...

这是我的一些代码：--- 1）我的视图文件：---

```
Ext.define('am.view.center.centerTab',{
    extend:'Ext.tab.Panel',
    id:'centerTabId',
    frame:true,
    flex:1,
    alias:'widget.CenterTab',
    minTabWidth: 200,
    border: 0,
    style: {
        borderColor: 'white',
        //borderStyle: 'solid'
    },
    items:[
           {
               title:'Tab1',

           },
           {
               title:'Tab2',

           },
           {
               title:'Tab3'
           }
           ]//end of items
});// End of login class 
```

2）这是我的控制器文件一些代码：---

```
 ------     
      'CenterTab':
                  {
                      tabchange:this.tabChaged1
                  }   
              }); //end of control
  },//end of init function

  tabChanged1:function()
  {
      console.log("tab changed");
  }, 
```

我的要求是，每当搅动选项卡时，TabChange事件都会被处理并称为特定功能...请给我一些建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:52:00.550

您在控制器中拼错了函数名称。

`tabchange: this.tabChaged1`应该`tabchange: this.tabChanged1`

# regex - 以可读格式转换列和行

> ID：15541823
> 
> 赞同：1
> 
> 时间：2013-03-21T07:34:48.003
> 
> 标签：regex, shell

我有一个文件，其条目如下：

> 时间;实例;数据库;状态;sheapthres;bp_heap;fcm_heap;other_heap;sessions;sessions_in_exec;locks_held;lock_escal;log_reads;log_writes;死锁;l_reads;p_reads;hit_ratio;pct_async_reads;d_writes;a_writes;lock_waiting;sortheap;sort_overflows;pct_sort_overflows; AvgPoolReadTime;AvgDirReadTime;AvgPoolWriteTime;AvgDirWriteTim

02:07:49;SAN33;SAMPLE;Active;0;10688;832;72064;8;0;0%;0;0;0;0;0;0;0%;0%;0;0;0 ;0;0;0%;0;0;0;0 02:08:09;SAN33;SAMPLE;活动;0;10688;832;72064;8;0;0%;0;0;0;0; 0;0;0%;0%;0;0;0;0;0;0%;0;0;0;0 02:08:29;SAN33;SAMPLE;活动;0;10688;832;72064; 8;0;0%;0;0;0;0;0;0;0%;0%;0;0;0;0;0;0%;0;0;0;0

并希望将其转换为可读格式，例如：

```
Time           Instance        Database
02:07:49        SAN33       SAMPLE
02:08:09        SAN33       SAMPLE
02:08:29        SAN33       SAMPLE 

  and so on.. 
```

我已经尝试过`tr -s ";" "\t"`，但没有得到任何好的结果。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:50:24.280

您可能希望`column`按如下方式使用：

```
column -s\; -t your_file 
```

where`-s\;`表示您的列分隔符是分号（用反斜杠保护以避免被 shell 解释）。另请参阅[命令行 CSV 查看器？](https://stackoverflow.com/questions/1875305/command-line-csv-viewer).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T14:32:44.753

更多的 unix 感知变体怎么样：

```
cat <your file> | sed 's/;/\t/g' 
```

***Solaris***和***HP-UX***用户注意：不要使用`\t`字符输入，而是使用`Ctrl+V`然后`TAB`键序列。

# perl - 为什么 require("filename") 不起作用？

> ID：15541825
> 
> 赞同：0
> 
> 时间：2013-03-21T07:34:49.757
> 
> 标签：perl, require

我继承了一些在 Linux 服务器上运行良好的 Perl 代码。我正在让它在 Windows XP、ActiveState Perl 5.16.2 和 BitNami WAMP 堆栈上运行。（注意：这个设置已经在运行我的 Perl .cgi 程序，所以这是一个工作设置。）

无论如何，“main” Perl 程序——我们称之为 main.cgi——有这样的声明：

```
require("extra/stuff_1.cgi"); 
```

main.cgi 运行时出现错误：

```
C:/BitNami/apache2/cgi-bin/extra/stuff_1.cgi did not return a true value at C:/BitNami/apache2/cgi-bin/main.cgi line XX. 
```

现在奇怪的是： stuff_1.cgi 以 1 结尾；（即，它是文件中的最后一行）！

我什至注释掉了 stuff_1.cgi 中函数中的代码——这些函数主要是 Here Documents 的函数，例如

```
sub func {

return <<EOF;
...
EOF
} 
```

让它只包含

```
sub func {
#
#return <<EOF;
#...
#EOF
} 
```

等等

然而“没有返回真实值”仍然发生！

但是，如果我删除所有代码，那么 stuff_1.cgi 包含

```
1; 
```

错误消失了（应该如此）。

stuff_1.cgi 通过`perl -c`，即使使用`use strict`and`use warnings`

ETA：如果我复制 stuff_1.cgi 的内容并将其粘贴到 main.cgi 中（替换`require`语句），代码就可以正常工作。

我以前从未见过这样的事情；可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:54:36.243

## 为什么调试器不工作（Windows 下的 ActiveState 或 Strawberry Perl）？

[为什么调试器不工作 [Windows 下的 ActiveState 或 Strawberry Perl]？](http://www.epic-ide.org/faq.php#debug)

> 不幸的是，最近发布的 PathTools（Perl 发行版的一部分，文件 Cwd.pm）包含一个破坏 EPIC 调试器前端的错误。具体症状是错误信息“perl5db.pl 没有返回真值”。- 要查看此消息，您应该在 EPIC 首选项中启用“调试器控制台”。此外，如果你有这个问题，调试根本不起作用。要修复它，您必须编辑 Perl 发行版的 Cwd.pm 并从一行中删除有问题的“eval”关键字，如本错误报告中所述。不要试图通过将 Perl 的“lib”目录添加到项目的包含路径来修复它，因为这将导致所有断点被忽略！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:43:10.437

也许我遇到的是 ActiveState 的 Perl 版本中的一个缺陷。

无论如何——在这上面花了太多时间之后——我能让它工作的唯一方法就是更换

```
require 'extra\stuff_1.cgi'; 
```

和

```
eval { require 'extra\stuff_1.cgi' }; 
```

我不喜欢这样做，但现在是时候继续前进了！

# javascript - 使用 Javascript 进行表单验证 - 字段值必须介于 2 个特定数字之间

> ID：15541827
> 
> 赞同：0
> 
> 时间：2013-03-21T07:34:51.323
> 
> 标签：javascript, forms, numbers, background-color

我在页面上有一个表格。在表单上有一个名为 Birthyear 的字段。我需要在javascript中弄清楚以下内容：

当在字段中输入 1900-2012 之间的值时，表格被接受。如果值不在 1900-2012 之间，则生日文本框背景颜色变为黄色。

有谁知道如何实现这一目标？

我的HTML如下：

```
</head><body>

<div id="div1">
<form name="myForm" action="demo_form.php" onsubmit="return validateForm()" method="post">
Username:   <input type="text" id="username" name="username"><br>         
Birth Year: <input type="text" id="birthYear" name="birthYear"><br><br>
<input type="submit"  value="Submit">
</form>

</div>

<div id="div2">
<img src="cat.jpg"    id="im1" name="image1"/>
<img src="dog.jpg"    id="im2" name="image2"/>
<img src="fish.jpg"   id="im3" name="image3" class='double'/>
</div>

</body></html> 
```

我的JS如下：

```
document.getElementById("username").focus();
function validateForm(){
var x=document.forms["myForm"]["username"].value;

if (x==""){
alert("Username Required!");
document.getElementById("username").focus();
}

var dob = document.forms["myForm"]["birthYear"];
var y = dob.value;

if(isNaN(dob)){
    alert('must be a number');
    dob.select();
    return false;

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:52:26.847

```
function validateForm(){
var x=document.forms["myForm"]["username"].value;

if (x==""){
alert("Username Required!");
document.getElementById("username").focus();
}

var dob = document.forms["myForm"]["birthYear"];
var y = dob.value;

if(!isNaN(y)){

if(y>=1900 && y<=2012) {
    //Correct
 } else {
     //Wrong
     document.getElementById("birthYear").style.background= "yellow";
     document.getElementById("birthYear").focus();
     return false;
 }
} else {
  alert('must be a number');
}
} 
```

# android - Android google drive 快速启动示例上传图片失败

> ID：15541833
> 
> 赞同：4
> 
> 时间：2013-03-21T07:35:32.387
> 
> 标签：android, google-drive-api

我使用这个快速入门示例[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

Logcat 显示

```
03-21 14:44:36.213: E/AndroidRuntime(26394): FATAL EXCEPTION: Thread-1867
03-21 14:44:36.213: E/AndroidRuntime(26394): java.lang.NullPointerException
03-21 14:44:36.213: E/AndroidRuntime(26394):    at java.net.URI.parseURI(URI.java:353)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at java.net.URI.<init>(URI.java:204)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at com.mysample.google.GoogleDrive$1.run(GoogleDrive.java:161)
03-21 14:44:36.213: E/AndroidRuntime(26394):    at java.lang.Thread.run(Thread.java:856) 
```

GoogleDrive.java:161 是

```
File file = service.files().insert(body, mediaContent).execute(); 
```

我已经在 Google API 控制台上打开了 Drive API 和 Drive SDK。我还在 AndroidManifest.xml 添加了这些行

```
<meta-data android:name="com.google.android.apps.drive.APP_ID" android:value="id=MY_APP_ID" />
<intent-filter>
    <action android:name="android.intent.action.GoogleDrive" />
    <data android:mimeType="image/png" />
    <data android:mimeType="image/jpeg" />
    <data android:mimeType="image/jpg" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

感谢您的帮助。

# asp.net - 注册用户后向用户发送哈希密码

> ID：15541835
> 
> 赞同：0
> 
> 时间：2013-03-21T07:35:35.520
> 
> 标签：asp.net, asp.net-membership

我用我的自定义字段修改了注册用户控件。在此控件中，它没有密码字段。我正在使用`Membership.GeneratePassowrd()`方法随机生成密码。我在使用方法注册后向用户发送电子邮件。当我保留web.config 文件`Membership.Getuser(username).GetPassword()`时，一切都很好。`PassowrdFormat=Clear`现在我想更改为`passwordFormat=Hashed`. 但是，如果我使用密码格式`Hased`，则无法检索密码。底线是我想将密码发送给经过哈希处理的用户。这个解决方法是什么。我在谷歌搜索，但没有找到合适的答案。如果有人伸出援助之手，那就太好了。我遵循了这些[link1](http://www.communitymx.com/content/source/35F1B/)，[link2](https://stackoverflow.com/questions/2741917/asp-net-membership-retrieve-password-and-passwordsalt-from-membership-table)但没有给出任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:04:47.233

据我所知，不可能从存储在数据库中的散列密码中导出纯文本密码。如果您需要通过电子邮件发送纯文本密码，则需要单独跟踪它。

根据您的代码的编写方式，它可能就像将[Membership.GeneratePassword()](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)的结果保存到字符串变量并确保您在电子邮件中发送它而不是从数据库中检索到任何密码值一样简单。

# typescript - 没有完整命名空间的类型引用

> ID：15541843
> 
> 赞同：9
> 
> 时间：2013-03-21T07:36:18.600
> 
> 标签：typescript

有两个打字稿文件：

```
A.ts:

export class Person {
    public name:string;
    constructor(){}
} 
```

和

```
B.ts:

import A = module("A");
var p: A.Person; 
```

到目前为止一切正常。

但是，当我尝试为从 A.ts 导入的类型名称创建快捷方式时：

```
var Person = A.Person;
var pp: Person; 
```

编译器抱怨（在线：“var pp：Person”）：

> > 当前范围内不存在名称“Person”

我怎样才能实现这种或类似的语法，以避免长名称空间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:05:56.147

在 TypeScript 中，类型注释必须与编译器已知的类型相关。您不能只使用变量作为类型。您给模块的别名是您在`import`语句中指定的别名 - 因此您可以在此处从长命名空间别名为短别名：

```
import alias = module("My/Long/Module/Path"); 
```

但是你*必须*使用别名。

要获得您正在寻找的结果，您将不得不使用扩展模块类方法的稍微疯狂的本地类：

```
import myModule = module("MyModule");

class Person extends myModule.Person {
}

var x: Person; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T05:09:14.520

我认为您***应该***得到的错误是“类型未定义”但是目前的错误是“当前范围内不存在该名称”。这是因为变量和类型的单独声明空间。不能在类型名称部分中引用变量。

您可以在此处以简单的单个文件案例看到它：

```
module M
{
    export interface P {}
}

import im = M; 
var foo1:im.P; // Okay 

var vm = M;
var foo2:vm.P; // Error 
```

然而，减少字母数量的解决方案是史蒂夫提到的继承。

# opengl - 生成一个纹理使着色器不起作用

> ID：15541847
> 
> 赞同：0
> 
> 时间：2013-03-21T07:36:39.100
> 
> 标签：opengl, shader, openframeworks

**着色器代码：**

```
#extension GL_ARB_texture_rectangle : enable

uniform sampler2D tex0;
uniform sampler2DRect tex1;
uniform int sampler_type;

void main(void){

    vec4 col;

    if ( sampler_type == 0 ){
        // comment this line - works
        col = texture2D(tex0, gl_TexCoord[0].st);
        //col = texture2D(tex0, gl_TexCoord[0].st/vec2(400, 300));

    }
    else{
        col = texture2DRect(tex1, gl_TexCoord[0].st);
    }
    gl_FragColor = col;
} 
```

**主要代码：**

```
void drawQuad(int x, int y, int w, int h, float s, float t)
{

    glBegin(GL_QUADS);
    glTexCoord2f(0, 0);     glVertex2f(x, y);
    glTexCoord2f(s, 0);     glVertex2f(x+w, y);
    glTexCoord2f(s, t);     glVertex2f(x+w, y+h);
    glTexCoord2f(0, t);     glVertex2f(x, y+h);
    glEnd();

}

//--------------------------------------------------------------
void setup(){
    shader.setupShaderFromFile(GL_FRAGMENT_SHADER, "test.frag");
    shader.linkProgram();

    img.loadImage("1.jpg");  // DEFAULT loaded in GL_TEXTURE_RECTANGLE

    GLuint tid;
    glGenTextures(1, &tid);

    glEnable(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, tid);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_LUMINANCE_ALPHA, 16*16, 16*16, 0, GL_LUMINANCE_ALPHA, GL_UNSIGNED_BYTE, 0);  // init to black...

    // if i comment this 2 line everything work
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

    glDisable(GL_TEXTURE_2D);

}

//--------------------------------------------------------------
void draw(){

    shader.begin();
    shader.setUniform1i("sampler_type", 1);// use GL_TEXTURE_RECTANGLE
    //shader.setUniformTexture("tex1", img.getTextureReference(), 0);

    //glActiveTexture(GL_TEXTURE0);
    //glEnable(GL_TEXTURE_RECTANGLE_ARB);
    glBindTexture(GL_TEXTURE_RECTANGLE_ARB, img.getTextureReference().texData.textureID);
    //glDisable(GL_TEXTURE_RECTANGLE_ARB);
    shader.setUniform1i("tex1", 0);
    //glActiveTexture(GL_TEXTURE0);
    drawQuad(0, 0, ScrWidth, ScrHeight, ScrWidth, ScrHeight);
    shader.end();

} 
```

我不知道为什么我创建另一个纹理会使这个着色器不起作用。

有两种方法可以使这个着色器工作。

1.  只需在我的着色器中使用 sampler2DRect 即可。（评论sampler2D）
2.  评论

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR); glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

希望我已经把这个问题描述清楚了:(我的平台是WIN7，VS2012，使用openFrameWorks 0.7.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T20:44:39.727

对不起，但这是一团糟。

*   您正在声明绘制四边形的函数，但不在任何地方使用它。
*   一切都在 setup() 中绘制。我不太确定 OpenGL 是如何在 openFrameworks 中实现的，但是出于这个原因，有专门的 draw() 函数。
*   正如 genpfault 所说，缺少#version
*   没有理由直接使用 OpenGL 函数，因为它们包含在非常易于使用的函数中。

我不想刻薄或其他任何东西，而不是直接回答，我推荐[这个详细的教程](http://www.openframeworks.cc/tutorials/graphics/shaders.html)，直接来自 OF 家伙。

# mysql - 如何在 mysql 数据库中创建 TINYINT(1) 数据类型？

> ID：15541848
> 
> 赞同：0
> 
> 时间：2013-03-21T07:36:39.577
> 
> 标签：mysql

我正在mysql数据库中创建表，但它给出了错误......

```
 CREATE  TABLE IF NOT EXISTS `EC_TIMETABLE` (
  `S_ID` VARCHAR(30) NOT NULL PRIMARY KEY,
  `SKILLSET_ID` VARCHAR(30) NULL ,
    START_DT DATETIME NULL,
    END_DT DATETIME NULL,
    REPEAT TINYINT(1) NULL,
    ALL_DAY TINYINT(1) NULL,
    CLASS_DURATION INT NULL,
    COURSE_DURATION INT NULL,
    REPEAT_TYPE VARCHAR(30) NULL,
    REPEAT_EVERY INT NULL,
    REPEAT_DAYS VARCHAR(100) NULL,
    REPEAT_FROM DATE NULL,
    REPEAT_TO DATE NULL,
    COURSE_FEE INT NULL,
    ATTENDEE_MIN INT NULL,
    ATTENDEE_MAX INT NULL,
    SEARCH_KEY TINYTEXT NULL,
    FOREIGN KEY (`SKILLSET_ID` )
    REFERENCES `EC_SKILLSET` (`S_ID` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

但它给出了错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“REPEAT TINYINT(1) NULL, ALL_DAY TINYINT(1) NULL, CLASS_DURATION INT NULL”附近使用正确的语法

这个怎么解决。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:40:48.477

`REPEAT`是保留关键字。你仍然可以使用它，但你需要用反引号包裹它。

```
`REPEAT` TINYINT(1) NULL, 
```

*   [MySQL 保留关键字列表](https://dev.mysql.com/doc/refman/8.0/en/keywords.html)

建议大家不要在后备名单上使用这样的关键词，以免以后脖子疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:40:34.017

我相信 REPEAT 是 MySQL 中的一个关键字。尝试重命名您的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T07:42:10.620

First you shouldn't use REPEAT because this is reserved by mysql and secondly take a look at [MySql Error 150 - Foreign keys](https://stackoverflow.com/questions/825362/mysql-error-150-foreign-keys) because you have another error concerning foreign keys.

# objective-c - 如何从 UIView 导航到 UIViewController

> ID：15541851
> 
> 赞同：3
> 
> 时间：2013-03-21T07:36:52.990
> 
> 标签：objective-c

我知道 uiview 没有导航控制。因此，我无法从 uiview 推送到下一个 uiviewcontroller。

这是我的方法的代码。请帮忙。谢谢！

```
 - (void)scrollViewDoubleTapped:(UITapGestureRecognizer*)recognizer {
    CGPoint pointInView = [recognizer locationInView:self];
    NSLog(@"%f , %f",pointInView.x,pointInView.y);

    if ((pointInView.x >= (231.0) && pointInView.x <=(293) && pointInView.y >= (193)  && pointInView.y <=(218)) )
    {

        // how to push to next viewcontroller here?

        UIView *view = [UIGestureRecognizer view]; //what should i do for this code?

        [self viewController];
    }
}

-(TestViewViewController*)viewController
{
    for (UIView *next = [self superview]; next; next = next.superview)
    {
        UIResponder *nextResponder = [next nextResponder];

        if([nextResponder isKindOfClass:[TestViewViewController class]])
        {

            return (TestViewViewController*)nextResponder;
        }
    }

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:41:06.793

如果你想让 viewcontroller 有一个视图，那么你可以使用`nextResponder`方法

所以首先你从gestureRecognizer获得视图：

```
UIView *view = [gestureRecognizer view]; 
```

而不是搜索包含视图的视图控制器

[看这里](https://stackoverflow.com/questions/2309569/how-to-get-uiviewcontroller-of-a-uiviews-superview-in-iphone-sdk)

***编辑：***

```
 if ((pointInView.x >= (231.0) && pointInView.x <=(293) && pointInView.y >= (193)  && pointInView.y <=(218)) )
    {

        // how to push to next viewcontroller here?

        UIView *view = [recognizer view]; //what should i do for this code?

       UIViewController *viewController = [self getViewControllerFromView:view];

       if(viewController) {
          // do whatever you want...
         UIViewController *newViewController = ...
         [viewController.navigationController pushViewController:newViewController animated:YES];
       }

    } 
```

...我将方法 get ViewController 重写为您的案例。从某种角度来看：

```
-(UIViewController*)getViewControllerFromView:(UIView*) view
{
    if([[view nextResponder] isKindOfClass:[UIViewController class]])
    {
        return (UIViewController*)[view nextResponder];
    }
    else {

        for (UIView *next = [view superview]; next; next = next.superview)
        {
            UIResponder *nextResponder = [next nextResponder];

            if([nextResponder isKindOfClass:[UIViewController class]])
            {
                return (UIViewController*)nextResponder;
            }
        }
    }

    return nil;
} 
```

**新编辑::**

您`EAGLView`已`@property (nonatomic, retain) UIViewController *viewController;` 添加`@synthesize viewController = _viewController;`到 .m 文件。

CoreMotionAppDelegate::

```
MainViewController * itemsViewController = [[MainViewController alloc]init];

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:itemsViewController];
    glView.viewController = itemsViewController;  

    [glView startAnimation];
    [[self window]setRootViewController:navController]; 
```

而不是在你的`scrollViewDoubleTapped`方法中

```
EAGLView *v = (EAGLView*)[recognizer view];  
UIViewController *viewController =  v.viewController; 
```

# xml - XML 转换

> ID：15541852
> 
> 赞同：0
> 
> 时间：2013-03-21T07:36:56.040
> 
> 标签：xml, transform

我有以下 xml 表：

```
<?xml version='1.0' encoding='windows-1256'?>
<tc>
<tt>
    <sd>112</sd>
    <sN>Good Day</sN>
    <id>468629</id>
   </tt>
   </tc> 
```

我想转换为如下：

```
<Tada schemaVersion="2" xmlns:ge="ST" xmlns:gl="TS" xmlns:ga="SG">
<ge:test internalID="90566" dateAdded="2013-03-19T11:49:28" lastEdited="2013-03-    20T16:26:49" >
   <ge:TN="World" internalID="161634" />

  </ge:test>
</Tada> 
```

我把它们都剪短了，因为它们是很长的文件。但这里的想法是从第一个 xml 转换为第二个 xml。现在我如何将这一行：schemaVersion 放入我的最终输出中，其余的项目应该很容易翻译/匹配。我会尝试使用 XPath 命令。我尝试使用 XSLT，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <Tada schemaVersion="2" xmlns:ge="ST" xmlns:gl="TS" xmlns:ga="SG">
    <xsl:template match="/">

 <Title>
            <xsl:value-of select="//tt/sd"> </xsl:value-of>

      </Title>

    </xsl:template>
     </tada>
</xsl:stylesheet> 
```

但是在我上面的测试中，它没有写出：模式版本行，而是按如下方式键入整个文件：

```
112
Good Day
468629 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:11:19.107

解决方案：

这似乎在这里工作是我所做的：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
      <xsl:template match="/">
 <Tada schemaVersion="2" xmlns:ge="ST" xmlns:gl="TS" xmlns:ga="SG">
 <Title>
          <xsl:value-of select="//tt/sd"> </xsl:value-of>

   </Title>
</tada>

</xsl:template>
 </xsl:stylesheet> 
```

我正在使用氧气，为什么它没有显示在左侧。相反，它在一行中为我提供了全部输出。如何解决这个问题。

编辑：

通过添加以下内容解决：

```
<xsl:text>&#10;</xsl:text> 
```

这给了我一条新线

# javascript - 动态缩放级别设置，因此整个多边形可以在地图区域中可见

> ID：15541854
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:37:01.640
> 
> 标签：javascript, google-maps

我有以下输入来实现谷歌地图上不同点的多边形。

1.  中心点：例如：伦敦新 google.maps.LatLng(51.8100844,-0.02911359999995966)

2.  纬度：例如：51.8100844

3.  液化天然气：例如：-0.02911359999995966

4.  距离（英里）：例如：10 英里

像这样输出。 ![在此处输入图像描述](../Images/26e03cbf52f7b1b9b490a37cd8707b5a.png)

地图应动态缩小/缩小，以便整个多边形在地图区域内可见。

如果距离变高，那么它会像这样显示。假设距离我已经进入了 100 英里

![在此处输入图像描述](../Images/8737c359b0bac3cde1df6520bb1da90f.png)

即使距离改变，最终缩放级别也不会重置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:53:39.010

创建一个`LatLngBounds`多边形对象`path`，并将其作为参数传递`fitBounds`给`map`.

# spring - 如何保护 applicationContext-security

> ID：15541855
> 
> 赞同：0
> 
> 时间：2013-03-21T07:37:11.803
> 
> 标签：spring, spring-security

有没有办法阻止用户更改 Spring Security 框架中的 applicationContext-security.xml 以便他无法更改应用程序定义的拦截 URL。

```
<intercept-url access="hasRole('ROLE_ADMIN')" pattern="/choices/**"/>
<intercept-url access="hasAnyRole('ROLE_SYSADMIN')" pattern="/departments/**"/>
<intercept-url access="hasAnyRole('ROLE_SYSADMIN')" pattern="/employees/**"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:22:30.227

我还没有这样做，但你可以通过签署你的 jar 并在启动时以编程方式验证它来做到这一点。

[验证 Jar 签名](https://stackoverflow.com/questions/5587656/verifying-jar-signature)

通过启动您的应用程序，您必须触发验证 JARfile 的代码，并在签名不可用或无法操作时执行一些操作以使启动失败。

另请参阅：[http ://docs.oracle.com/javase/tutorial/deployment/jar/signindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/signindex.html)

这不会阻止“攻击者”解包 jar，修改代码并在没有签名清单的情况下打包它，但工作量会高得多（根据您的验证和预防机制）。

至少你可以使用 yGuard 来混淆和缩小你的类文件。

# c# - Wp7从代码创建路径元素并设置数据元素

> ID：15541856
> 
> 赞同：1
> 
> 时间：2013-03-21T07:37:14.533
> 
> 标签：c#, windows-phone-7, geometry

我在 xaml 中有这条路径：

```
<Path Data="M 16,12 16,0 0,12" Fill="{StaticResource PhoneAccentBrush}" /> 
```

我想通过代码动态生成它。问题是我不知道如何设置数据元素。我读过一些关于 Geometry.Parse() 的内容，结果证明它只能用于 WPF 项目而不是 WP7。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:20:08.890

要在代码中指定路径，您需要创建一个`Geometry`对象并将其设置为`Data`属性的值。
例如：

```
myPath.Data = new EllipseGeometry 
                  {
                      Centre = new Point(50, 50),
                      RadiusX = 25,
                      RadiusY = 25
                  }; 
```

后面的代码不能使用缩写语法（例如`"M 16,12 16,0 0,12"`）。这仅受 XAML 解析器支持。

[在http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.shapes.path.data(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.shapes.path.data(v=vs.105).aspx)查看更多信息

# android-listview - 当我单击列表视图的操作项时，将文本从列表视图传递到另一个活动

> ID：15541861
> 
> 赞同：0
> 
> 时间：2013-03-21T07:37:31.647
> 
> 标签：android-listview

我的主要活动中有一个列表视图。在每一行中我都有一个图像视图，当我单击该图像视图时，会出现快速操作（如 ios 中的弹出窗口）。我的要求是，我想将列表视图中的文本设置为另一个活动的文本当我单击快速操作中的操作项时编辑文本。请帮助..

这是我的主要活动

公共类 ExampleActivity 扩展 Activity {

```
private static final int ID_UP = 1;
private static final int ID_DOWN = 2;
private static final int ID_SEARCH = 3;
private static final int ID_INFO = 4;

private QuickAction quickAction;
private ActionItem nextItem;
private ActionItem prevItem;
private ActionItem searchItem;

private ListView view;
private ContactsAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    view = (ListView) findViewById(R.id.listView1);
    final Weather weather_data[] = new Weather[] { new Weather(R.drawable.icon, "Cloudy"),
            new Weather(R.drawable.icon, "Showers"),
            new Weather(R.drawable.icon, "Snow"),
            new Weather(R.drawable.icon, "Storm"),
            new Weather(R.drawable.icon, "Sunny")

    };
    adapter = new ContactsAdapter(this, R.layout.main1,
            weather_data);          
}

void functiontorun(View view1) {
     quickAction = new QuickAction(this,QuickAction.HORIZONTAL);
    nextItem = new ActionItem(ID_DOWN, "Next", getResources().getDrawable(
            R.drawable.menu_down_arrow));
    prevItem = new ActionItem(ID_UP, "Prev", getResources().getDrawable(
            R.drawable.menu_up_arrow));
    searchItem = new ActionItem(ID_SEARCH, "Find", getResources()
            .getDrawable(R.drawable.menu_search));

    // use setSticky(true) to disable QuickAction dialog being dismissed
    // after an item is clicked
    prevItem.setSticky(true);
    nextItem.setSticky(true);

    // add action items into QuickAction
    quickAction.addActionItem(nextItem);
    quickAction.addActionItem(prevItem);
    quickAction.addActionItem(searchItem);
    // Set listener for action item clicked
     final int position1 = view.getPositionForView(view1);

    quickAction
            .setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
                @Override
                public void onItemClick(QuickAction source, int pos,
                        int actionId) {
                    ActionItem actionItem = quickAction.getActionItem(pos);

                    if (actionId == ID_SEARCH) {
            Intent i=new Intent(ExampleActivity.this,Second.class);
                        i.putExtra("position",position1 );
                        Log.v("position","po" +position1);
                        startActivity(i);

                    } else if (actionId == ID_INFO) {
                        Toast.makeText(getApplicationContext(),
                                "I have no info this time",
                                Toast.LENGTH_SHORT).show();

                    } else {
                        Toast.makeText(getApplicationContext(),
                                actionItem.getTitle() + " selected",
                                Toast.LENGTH_SHORT).show();
                    }
                }
            });

     quickAction.show(view1);

} 
```

}

还有我的另一项活动

公共类第二扩展活动{

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    EditText d1=(EditText) findViewById(R.id.editText1);
    Bundle bundle = getIntent().getExtras();
    if (bundle != null) {
        final int position = (Integer) bundle.get("position");
        Log.v("position","po1  " +position);
        ArrayList<Weather> array = new ArrayList<Weather>();
        Log.v("position","po1  " +array);

    }
} 
```

}

联系人适配器：

公共类 ContactsAdapter 扩展 ArrayAdapter{

```
 Context context; 
    int layoutResourceId;    
    Weather data[] = null;
    public ContactsAdapter(Context context, int layoutResourceId, Weather[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        WeatherHolder holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imageView1);
            holder.imgIcon.findViewById(R.id.imageView1).setOnClickListener(mBuyButtonClickListener);
            holder.txtTitle = (TextView)row.findViewById(R.id.textView1);
            //((ImageView) row.findViewById(R.id.im)).setOnClickListener(mBuyButtonClickListener);
            row.setTag(holder);
        }
        else
        {
            holder = (WeatherHolder)row.getTag();
        }

        Weather weather = data[position];
        holder.txtTitle.setText(weather.title);
        holder.imgIcon.setImageResource(weather.icon);
        return row;
    }

    static class WeatherHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
    }
    private OnClickListener mBuyButtonClickListener = new OnClickListener() {
        @Override
        public void onClick(View v) {
            ((ExampleActivity) context).functiontorun(v);
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T08:13:51.570

```
 private OnClickListener mBuyButtonClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
          WeatherHolder  holder = (WeatherHolder) v.getTag;
          String string =  holder.txtTitle .getText();

        ((ExampleActivity) context).functiontorun(string);
    }
}; 
```

只需将字符串传递给您的活动并将函数的参数更改为字符串即可运行

# .net - 构建没有源的 DataGridView 表？

> ID：15541868
> 
> 赞同：1
> 
> 时间：2013-03-21T07:38:07.437
> 
> 标签：.net, c#-4.0, data-binding, datagridview, datasource

我从来没有设法让 DataGridView 按我的需要工作，但我又回来了，希望我能弄明白。我目前有一个类，我在其中存储有关进入我们软件的每个支持票证的大量数据，但我只想在 DataGridView 上显示其中的一些数据。

该类如下所示...

```
public class Ticket
{
    public string ID { get; set; }
    public string TicketID { get; set; }
    public string DeptID { get; set; }
    public string UserID { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public string CC { get; set; }
    public string Subject { get; set; }
    public string Message { get; set; }
    public string Status { get; set; }
    public string Priority { get; set; }
    public DateTime Date { get; set; }
    public DateTime LastResponse { get; set; }
    public IPAddress IP { get; set; }
} 
```

我想构建一个显示名称/消息/优先级或这些值的某种组合的表，但绝对不是全部。有什么方法可以简单地从头开始构建表数据，而不必为其提供数据源？

这是我实现以下建议的测试代码，但我得到“No Row can be added to DataGridView control that without columns”。

```
 WHMCS x = new WHMCS();
                List<WHMCS.Ticket> Tickets = new List<WHMCS.Ticket>();
                Tickets = x.Get_Tickets();

                KryptonDataGridView dgv = new KryptonDataGridView();
                content1.Controls.Add(dgv);

                foreach (var tix in Tickets)
                {
                    var objArr = new object[] {tix.Priority, tix.Subject};
                    dgv.Rows.Add(objArr);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:42:54.037

您可以通过将 Ticket 类转换为对象数组来手动添加行，使用您感兴趣的字段，然后将该数组添加到 dataGrid。就像是

```
foreach(var ticket in AllTickets){
    var objArr = new object[]{ticket.Id, ticket.DeptId...};
    dataGrid.Rows.Add(objArr);
} 
```

确保数组中的类型与每列期望的类型相对应，如果用户可编辑值，您还必须手动将值传播回数据源。

回应您的评论：在添加行之前，用列填充 dataGrid：

```
_colId = new DataGridViewTextBoxColumn
        {
           Name = "Id",
           HeaderText = Id.CreationDate,
           AutoSizeMode = DataGridViewAutoSizeColumnMode.None,
           Width = 150,
           ReadOnly = true,
        };
//...

dataGrid.Columns.Add(_colId);
dataGrid.Columns.Add( other columns... ); 
```

在每列上使用您需要的任何属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:43:02.610

如果您不使用数据源，我相信您必须先明确添加列。如您所知，在您使用 foreach 循环之前要显示的列：

```
dgv.Columns.Add([Column Info]); 
```

此方法将允许您在添加行信息时显式创建要添加的列。

# r - 如何使用 getSymbols 下载一组价格并按请求的顺序存储它们？

> ID：15541873
> 
> 赞同：4
> 
> 时间：2013-03-21T07:38:19.853
> 
> 标签：r, quantmod

我使用 quantmod 的`getSymbols`函数下载多个代码的历史价格，并使用以下代码将它们转换为列表或多变量 XTS：

```
library(quantmod)

myenv <- new.env()
tickers <- c("^GSPC", "AAPL", "MSFT", "GOOG", "^RUT")
getSymbols(tickers, env=myenv)
ll <- eapply(myenv, function(x) x)        # Convert to list
ts <- do.call(merge, (eapply(myenv, Ad))) # Convert to multivariate XTS and extract only the adjusted price 
```

我用这种方法遇到的问题是列表中代码的顺序和 XTS 与我在中指定的不同`tickers`：

```
> names(ll)
[1] "AAPL" "GSPC" "GOOG" "RUT"  "MSFT"
> names(ts)
[1] "AAPL.Adjusted" "GSPC.Adjusted" "GOOG.Adjusted" "RUT.Adjusted" 
[5] "MSFT.Adjusted" 
```

我认为这是因为`eapply`以随机顺序执行操作，如帮助页面中所述`eapply`：

`Note that the order of the components is arbitrary for hashed environments.`

如何执行上述相同的操作，但输出的顺序与`tickers`向量中指定的顺序相同？即列表的第一项/XTS 的第一列应该对应于`tickers`向量的第一个元素，依此类推。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T12:37:04.103

您可以将结果子集`eapply`化为您想要的顺序。

```
library(quantmod)
tickers <- c("^GSPC", "AAPL", "MSFT", "GOOG", "^RUT")
myenv <- new.env()
symnames <- getSymbols(tickers, env=myenv)  # getSymbols returns adjusted names
ts <- do.call(merge, eapply(myenv, Ad)[symnames]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T08:05:29.437

尝试`mget`代替`eapply`. 注意：需要使用从股票名称中删除`gsub`以获取.`^``object``myenv`

```
library(quantmod)

myenv <- new.env()
tickers <- c("^GSPC", "AAPL", "MSFT", "GOOG", "^RUT")
getSymbols(tickers, env = myenv)
## [1] "GSPC" "AAPL" "MSFT" "GOOG" "RUT" 

test <- mget(gsub("\\^", "", tickers), envir = myenv)
ts <- do.call(merge, lapply(test, Ad))
names(ts)
## [1] "GSPC.Adjusted" "AAPL.Adjusted" "MSFT.Adjusted" "GOOG.Adjusted" "RUT.Adjusted" 

tickers
## [1] "^GSPC" "AAPL"  "MSFT"  "GOOG"  "^RUT" 
```

# wpf - Visual Studio 2010 插件“Edit.Copy”命令

> ID：15541874
> 
> 赞同：2
> 
> 时间：2013-03-21T07:38:20.430
> 
> 标签：wpf, visual-studio-2010, ide, add-in

我为 VS2010 创建了一些插件，它提供了一些带有一些 WPF 应用程序的工具窗口。我的 WPF 应用程序中有一些命令，例如复制、粘贴等，我想将其绑定到 VS 命令。到目前为止，我成功地“收听”了 VS 的复制命令，但我的问题是当显示我的工具窗口时，VS 的复制命令被禁用。如何启用复制命令？是否与我使用 NoToolWindow 配置有关？

我应该尝试挂钩键盘事件吗？

任何人？？

谢谢你，莱昂

# bash - SCRIPT_PATH="${BASH_SOURCE[0]}" 错误替换

> ID：15541876
> 
> 赞同：16
> 
> 时间：2013-03-21T07:38:25.127
> 
> 标签：bash, variables

在 Centos 上，我的脚本工作正常。但是当我运行脚本时，在 Debian Squeeze 上，我得到了：

```
cpfailover.sh: 30: Bad substitution 
```

脚本行说：

```
SCRIPT_PATH="${BASH_SOURCE[0]}"; 
```

我在很多例子中看到过，即使在这里，这是一个正确的行号。哪里有问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-21T08:05:52.923

你在用`/bin/sh`吗？在 Debian Squeeze 上，`/bin/sh`是一个`/bin/dash`不支持`${array[0]}`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-23T23:44:18.867

将您的代码更改为

```
SCRIPT_PATH=$0; 
```

代替

```
SCRIPT_PATH="${BASH_SOURCE[0]}"; 
```

# .htaccess - 我的网站在使用 htaccess 暂时隐藏然后上线后会像往常一样被索引吗？

> ID：15541877
> 
> 赞同：0
> 
> 时间：2013-03-21T07:38:27.967
> 
> 标签：.htaccess, web

我会使用 htaccess 对网站进行密码保护/隐藏以禁止机器人。那么如果我在几周后将其上线，索引会照常工作还是应该使用谷歌网站管理员工具通知？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:42:44.603

机器人不止一次抓取你的页面，所以我认为它会在几周后重新索引

# c# - 基于外键连接两个查询

> ID：15541880
> 
> 赞同：3
> 
> 时间：2013-03-21T07:38:41.427
> 
> 标签：c#, linq, linq-to-sql

我（至少正在尝试）`Repository pattern`在我的 .NET C# 项目中实现，所以当我需要与数据库通信时，我会这样做：

```
IList<Sole> soles = SoleService.All().ToList(); 
```

作为从服务调用的方法的名称，上面的查询建议我得到所有记录`Sole`表格。我不想，我认为这是实现这种模式的正确方法，在我的服务中保留太多自定义逻辑。我的意思是我只想保留`All()`方法和对结果的每次修改都在服务方法之外进行。

当前的问题是这样的。我有实体`Sole`和实体`SoleColor`。`SoleColor`有一个外键列`SoleID`建立两个表之间的关系。现在对于这两个实体，我只能调用`All()`方法：

```
var soleColors = SoleColorService.All();
var soles = SoleService.All(); 
```

但是在这里，我需要以仅选择与实体`Sole`相关的那些行的形式进行一些自定义。`SoleColor`换句话说，最终只会得到一个列表，`Sole`其中仅包含 Sole.ID 可以作为`SoleColor`SoleID 外键中的外键找到的那些行。

现在我有点困惑——自从我上次使用纯 SQL 合成器以来已经有一段时间了。我认为这很容易使用 SQL 和 JOIN 实现。但是当涉及到 LINQ 并且到目前为止我的经验告诉我我需要这两个查询时：

```
var soleColors = SoleColorService.All();
var soles = SoleService.All(); 
```

然后进行某种 JOIN/UNION 以仅过滤我需要的结果。

那么在这种情况下我需要使用哪些工具，因为这不是我需要这个的唯一地方，我想学习自己做，当然是在目前的情况下做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:23:09.880

在您的最后评论之后，我认为这就是您要寻找的内容：

```
from s in SoleService.All()
join sc in SoleColorService.All() on s.ID equals sc.SoleID
select s 
```

但这仅在两个存储库具有相同的上下文实例时才有效。如果没有，您必须分两步进行：

```
var ids = SoleColorService.All().Select(sc => sc.SoleID).ToArray();
var soles = SoleService.All().Where(s => ids.Contains(s.ID)); 
```

我对静态`All()`方法有点怀疑。他们建议您使用静态上下文，这被认为是不好的做法。此外，我想知道这些关联。从我希望`Sole`有一个单词的声音来看`SoleColor`，即 Sole 有一个 SoleColorId FK。

# c# - C# 线程中使用的 Win32 COM 对象

> ID：15541889
> 
> 赞同：1
> 
> 时间：2013-03-21T07:39:33.300
> 
> 标签：c#, multithreading, delphi, winapi, com

我们有一个在 Delphi XE 中开发的 Win32 COM 对象。从我们在 Delphi 中开发的测试程序中，我们能够在线程中启动 COM 对象。调试时，我们可以看到正在运行的 COM 对象位于调用例程创建的线程内。

在我们的 C# 应用程序中，这是一个使用与 Delphi 测试应用程序中相同的线程执行配方开发的服务，我们看不到相同的行为。COM 对象不在执行它的 C# 线程内运行。我们使用 Kernel32.dll`GetCurrentThreadID()`来获取 Windows 句柄。从我们的 COM 对象观察 Windows 线程句柄时，它始终是同一个句柄。这不是执行线程的句柄。

是否可以在 C# 线程中运行 COM 对象并让它存在于线程中？基本上，我们如何从 COM 对象中的 C# 线程获取相同的 Windows 线程处理程序？

我们的 C# 线程是 MTA。

/布莱恩

# c# - C# 为什么我不能为我的班级编写自定义 IEnumerator

> ID：15541892
> 
> 赞同：0
> 
> 时间：2013-03-21T07:39:47.533
> 
> 标签：c#, ienumerable

我有一个简单的类，它表示图中很可能是一棵树的顶点。因此，这个类看起来像这样：

```
class Vertex {
  public Vertex parent;
  public List<Vertex> children;
} 
```

在不太可能出现循环的情况下，我可以多次链接到与子节点相同的顶点。

现在，我制作了一个枚举器，它将给出图中的每个顶点。这样你就可以做到

```
foreach (Vertex item in rootVertex) 
```

并获取图中的每个顶点。为此，我必须创建我的类 IEnumerable{Vertex} 并编写 GetEnumerator 方法，以递归方式生成所有顶点。

现在，为了绘制图形，我还想在同一个类中有另一个枚举器，它将返回图形中的每条边。所以我可以做类似的事情

```
foreach (Point[] item in rootVertex.GetEdges()) 
```

并获得所有优势。为此，为了避免混淆，我从我的类中删除了 IEnumerable 并实现了两个这样的方法

```
public IEnumerator<Vertex> GetVertexes() { ...code... }
public IEnumerator<Point[]> GetEdges() { ...code... } 
```

但是，当我尝试做

```
foreach (Point[] item in rootVertex.GetEdges()) 
```

它吐出错误 - foreach 无法枚举 rootVertex 因为 Vertex 类不包含 GetEnumerator 方法。

我尝试使用谷歌搜索，但没有发现我是否可以或不能在同一个班级上创建多个枚举器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T07:46:51.940

首先很明显，你不应该`IEnumerable`作为`IEnumerator`返回结果：

```
public IEnumerable<Point[]> GetEdges() { ...code... } 
```

# login - janrain 社交媒体登录集成

> ID：15541893
> 
> 赞同：0
> 
> 时间：2013-03-21T07:39:51.770
> 
> 标签：login, janrain, social-media

我正在尝试使用 janrain 社交媒体登录，但我仍然不明白我应该做什么以及如何将用户信息添加到我的表并打开他的会话，现在我配置了小部件和所有内容，我得到了如下代码：

```
 <script type="text/javascript">
(function() {
    if (typeof window.janrain !== 'object') window.janrain = {};
    if (typeof window.janrain.settings !== 'object') window.janrain.settings = {};

    janrain.settings.tokenUrl = '__REPLACE_WITH_YOUR_TOKEN_URL__';

    function isReady() { janrain.ready = true; };
    if (document.addEventListener) {
      document.addEventListener("DOMContentLoaded", isReady, false);
    } else {
      window.attachEvent('onload', isReady);
    }

    var e = document.createElement('script');
    e.type = 'text/javascript';
    e.id = 'janrainAuthWidget';

    if (document.location.protocol === 'https:') {
      e.src = 'https://rpxnow.com/js/lib/coacharabia/engage.js';
    } else {
      e.src = 'http://widget-cdn.rpxnow.com/js/lib/coacharabia/engage.js';
    }

    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(e, s);
})();
</script> 
```

然后嵌入 div ：

```
<div id="janrainEngageEmbed"></div> 
```

**现在下一步我迷路了？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:24:21.043

有两种选择。第一个是用您选择的服务器端编码语言开发您自己的令牌 URL，并编写一些功能来验证您的用户到您的系统。然后，您将使用该令牌 URL 的路径更新 janrain.settings.tokenUrl 值。

> janrain.settings.tokenUrl = ' **REPLACE_WITH_YOUR_TOKEN_URL** ';

第二个更容易的选择是使用为您的内容管理系统或框架编写的 Janrain Engage 插件或小部件，它将为您处理大部分实施。看起来您正在使用 web2py，它应该已经内置了 Janrain Engage（它的旧名称 RPX）支持。请查看您的文档以获取更多信息。

# php - 寻找moodle以外的基于开源的多租户LMS（学习管理系统）

> ID：15541894
> 
> 赞同：0
> 
> 时间：2013-03-21T07:39:55.360
> 
> 标签：php, open-source, moodle

我们正在寻找一种 LMS，我们可以将其用作我们正在推出的新产品的基础。

由于它主要是基于内容的东西，我们需要将一切都基于 LMS，但我们需要一些东西：

由于我们支持数十到数百名用户，理想情况下，我们需要一个多租户 LMS（单一共享代码库），它可以支持每个站点的不同设计当我们销售功能时，我们需要一些可以让我们部署新的“模块”并在每个站点上打开/关闭它 我们更喜欢开源 (PHP) 的东西 在我考虑构建一些东西之前，有什么好的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T07:47:32.147

Here are a few opensource LMS alternatives:
[http://www.dotlrn.org/](http://www.dotlrn.org/)
[http://www.efrontlearning.net/](http://www.efrontlearning.net/)
[http://www.dokeos.com/](http://www.dokeos.com/)
[http://www.sakaiproject.org/](http://www.sakaiproject.org/)
[http://atutor.ca/](http://atutor.ca/)

You can also look at SCORM Cloud that takes away a lot of headaches for deploying content. All you need is a frontend like Wordpress or Joomla.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T10:59:52.007

作为一个免费的开源 lms，我建议使用 Moodle - [http://www.moodle.org](http://www.moodle.org)。在我尝试过的商业电子学习解决方案中，我会选择 JoomlaLMS - [http://www.joomlalms.com](http://www.joomlalms.com) - 它还有一个开源版本并且易于设置。

# ios - 导航控制器未将数据从 tableview 传递到 viewcontroller

> ID：15541895
> 
> 赞同：0
> 
> 时间：2013-03-21T07:39:57.173
> 
> 标签：ios, uitableview, ios5, ios6, uinavigationcontroller

Tableview 的代码：

```
-(void)tableView:(UITableView *)tableView didselectRowAtIndexPath:(NSIndexPath *)indexPath{

    ViewControllerDisplayMsg *detail = [self.storyboard instantiateViewControllerWithIdentifier:@"viewController3"];

    cellvalue=[array objectAtIndex:indexPath.row];
    detail.DisplayMsgString = cellvalue;
    [self.navigationController pushViewController:detail animated:YES];

    } 
```

viewController3 中的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.DisplayMsgLabel.text= self.DisplayMsgString;

} 
```

打开viewcontroller3时，上面的代码没有传递数据，它是空白的。为什么数据没有传递。缺少什么代码？

请帮帮我。非常感谢您的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:43:56.060

你用过

```
 -(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath{

       } 
```

这是

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

       } 
```

我希望你打错了如果不是这个，请分享你的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:12:24.197

由于我从情节提要中进行了 segue，所以没有调用 didselect 方法-

```
(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // test segue.identifier if needed
    ViewControllerDisplayMsg *viewController = segue.destinationViewController;
    NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
    // set properties of viewController based on selection indexPath

    cellvalue=[array objectAtIndex:indexPath.row];

    NSLog(@"str :  %@",cellvalue);
    viewController.DisplayMsgtext = cellvalue; 
```

}

这工作得很好。我必须检查它是否是正确的实施方式，否则它现在工作正常。

# hadoop - 为什么最后一个reducer在合并步骤中停止并出现java堆错误

> ID：15541900
> 
> 赞同：1
> 
> 时间：2013-03-21T07:40:28.033
> 
> 标签：hadoop, mapreduce, hdfs, cloudera

我不断增加减速器的数量，我发现虽然除了一个减速器之外的所有减速器都快速运行并完成它们的工作，但最后一个减速器只是挂在合并步骤，并在其 tasktracker 日志中显示以下消息：

```
Down to the last merge-pass, with 3 segments left of total size: 171207264 bytes 
```

...并且在这个语句停留了很长时间之后，它抛出了一个 java 堆错误并开始了一些没有完成的清理。

我将 child.opts 内存增加到 3.5GB（无法超出此限制）并压缩地图输出。

可能是什么原因？

下面是驱动代码：

```
public static void main(String[] args) throws Exception {
    Configuration conf = new Configuration();
    conf.set("mapred.task.timeout", "6000000");
    conf.set("mapred.compress.map.output", "true");
    Job job = new Job(conf, "FreebasePreprocess_Phase2");
    job.setNumReduceTasks(6);
    job.setJarByClass(FreebasePreprocess.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(Text.class);
    job.setMapOutputKeyClass(Text.class);
    job.setMapOutputValueClass(Text.class);

    job.setMapperClass(Map.class);
    job.setReducerClass(Reduce.class);

    job.setInputFormatClass(TextInputFormat.class);
    job.setOutputFormatClass(TextOutputFormat.class);

    FileInputFormat.addInputPath(job, new Path("/user/watsonuser/freebase_data100m120m_output"));
    FileOutputFormat.setOutputPath(job, new Path("/user/watsonuser/freebase_data100m120m_output_2"));

    job.waitForCompletion(true);
} 
```

这是映射器：

```
import java.io.IOException;
import java.util.Arrays;
import java.util.List;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.lib.input.FileSplit;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Mapper.Context;

public class Map extends Mapper<LongWritable, Text, Text, Text>{

public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException 
{
    String[] entities = value.toString().split("\\t");
    String[] strings = {"/type/object/type", "/common/topic/notable_for", "/type/user/usergroup"};
    List<String> filteredPredicates = Arrays.asList(strings);

    FileSplit fileSplit = (FileSplit)context.getInputSplit();
    String filename = fileSplit.getPath().getName();
    //      System.out.println("File name "+filename);

    if(filename.startsWith("part-r")) {
        //      if(filename.equalsIgnoreCase("quad.tsv")) {
        //this is a quad dump file
        String name = null;
        String predicate = null;
        String oid = null;
        String outVal = null;
        String outKey = null;
        if(entities.length==3) {
            oid = entities[0].trim();
            predicate = entities[1].trim();
            name = entities[2].trim();

            /*if(predicate.contains("/type/object/name/lang"))
            {
                if(predicate.endsWith("/en")) 
                {*/
                /*outKey = sid;
                outVal = oid+"#-#-#-#"+"topic_name";
                context.write(new Text(outKey), new Text(outVal));*/
            /*  }
            }*/
                outKey = oid;
                outVal = predicate+"#-#-#-#"+name;
                context.write(new Text(outKey), new Text(outVal));

        }
    }

    else if(filename.equalsIgnoreCase("freebase-simple-topic-dump.tsv")) {
        //this is a simple topic dump file
        String sid = null;
        String name = null;
        String outKey = null;
        String outVal = null;
        if(entities.length>1) {
            sid = entities[0];
            name = entities[1];
            outKey = sid;
            outVal = name+"#-#-#-#"+"topic_name";
            context.write(new Text(outKey), new Text(outVal));
        }
    }
}

} 
```

这是减速机

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;

import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Reducer;

public class Reduce extends Reducer<Text, Text, Text, Text> 
{

public void reduce(Text key, Iterable<Text> values, Context context) 
        throws IOException, InterruptedException 
        {
            String name = null; 
            String sid = null;
            String predicate = null;
            String oid = null;
            String id = null;
            String outKey = null;
            String outVal = null;

            ArrayList<Text> valuesList = new ArrayList<Text>();
            Iterator<Text> ite = values.iterator();
            while(ite.hasNext()) {
                Text t = ite.next();
                Text txt = new Text();
                txt.set(t.toString());
                valuesList.add(txt);
                String[] entities = t.toString().split("#-#-#-#");
                if(entities[entities.length-1].equalsIgnoreCase("topic_name"))
                {
                    name = entities[0];
                }
            }

            for(int i=0; i<valuesList.size(); i++) { 
{ 

                Text t2 = valuesList.get(i);
                String[] entities = t2.toString().split("#-#-#-#");
                if(!entities[entities.length-1].contains("topic_name"))
                {
                    if(name!=null) {
                        outKey = entities[1]+"\t"+entities[0]+"\t"+name;
                    }
                    else {
                        outKey = entities[1]+"\t"+entities[0]+"\t"+key.toString();
                    }
                    context.write(new Text(outKey), null);
                }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:24:28.030

我的猜测是，您有一个具有大量值的键，并且减速器中的以下行会导致您出现问题：

```
valuesList.add(txt); 
```

假设您有一个具有 100m 值的键，您正在尝试构建一个大小为 100m 的数组列表 - 在某个阶段您的减速器 JVM 将耗尽内存。

您可以通过进行一些调试并检查永不结束的减速器的日志来确认这一点：

```
valuesList.add(txt);
if (valuesList.size() % 10000 == 0) {
  System.err.println(key + "\t" + valueList.size());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:12:02.363

我已经有一段时间没有写原始 MR 了，但我会以类似于以下的方式来处理它：

将键的所有值保存在内存中总是很危险的。相反，我会在您的工作中添加另一个 MR 阶段。在第一阶段，当 value 包含“topic-name”时发出 newkey = (key, 0), newValue = value，当 value 不包含“topic-name”时发出 newkey = (key, 1), newValue = value。这将需要编写一个可以处理一对的自定义 writablecomparable，并且知道如何对其进行排序。

对于下一阶段的化简器，编写一个分区器，在新键的第一个元素上进行分区。现在由于最后一个 reducer 的按键排序输出，您可以保证在获得每个键的其他 k,v 对之前获得带有 'name' 的 k,v 对。现在您可以访问与键对应的每个值的“名称”。

# c# - 获取列表视图子项的值

> ID：15541901
> 
> 赞同：4
> 
> 时间：2013-03-21T07:40:31.287
> 
> 标签：c#

我有一个 C# 代码。我有一个列表视图，然后我想要的是获取子项的值，特别是包含订单小计价格的小计子项。我想总结这些值并以相同的形式显示到文本框。我怎样才能做到这一点？这是我的代码：

```
AddOrderForm add = new AddOrderForm();
        foreach (DataRow drow in dt.Rows)
        {
            add.nametb.Text = drow["Menu"].ToString();
            add.Pricetb.Text = drow["MenuPrice"].ToString();
            add.listBox1.Items.Add(drow["MenuDesc"].ToString());
            add.orderqtytb.Focus();
            add.ShowDialog();                
        }
        if (add.isAddOrder)
        {

            ListViewItem item = new ListViewItem();
            item.Text = add.nametb.Text;
            item.SubItems.Add(add.orderqtytb.Text);
            item.SubItems.Add(add.Pricetb.Text);              

            double total = 0;
            try
            {
                total = double.Parse(add.Pricetb.Text) * double.Parse(add.orderqtytb.Text);
            }
            catch
            {
                total = 0;
            }
            item.SubItems.Add(total.ToString("0.00"));
            Listview.Items.Add(item); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:03:15.903

您的代码已经正确地将项目添加到 Listview，假设您想在 SelectedIndexChanged 事件中检索“total”列的值，您可以执行 -

```
ListView.Items[SelectedItemIndex].SubItem[2].Text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:55:54.407

我更愿意构建一个这样的类

```
class MyClass
{
    public string PropertyA { get; set; }
    public string PropertyB { get; set; }
    public string PropertyC { get; set; }
    public string PropertyD { get; set; }
} 
```

在构建 Listview 时，您生成此类填充属性并将类的对象添加到 ListViewItem 的 Tag

```
MyClass myClass = new MyClass();
myClass.PropertyA = "A";
myClass.PropertyB = "B";
myClass.PropertyC = "C";
myClass.PropertyD = "D";

ListViewItem item = new ListViewItem();
item.Text = myClass.PropertyA;
item.SubItems.Add(myClass.PropertyB);
item.SubItems.Add(myClass.PropertyC);
item.Tag = myClass; 
```

现在您可以从标签中获取对象并获得您的值

```
MyClass myClassForLaterUse = (MyClass)item.Tag;
MessageBox.Show(myClassForLaterUse.PropertyA); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:02:08.427

您可以通过以下方式检索一个`Item`值或它`SubItems`的值`ListView`：

假设您的 ListView 是这样的：

```
public void AddDataToLvw(){
            ListViewItem item1 = new ListViewItem("item1", 0);
            item1.SubItems.Add("1");
            item1.SubItems.Add("3");

            ListViewItem item2 = new ListViewItem("item2", 1);
            item2.SubItems.Add("4");
            item2.SubItems.Add("6");

            ListViewItem item3 = new ListViewItem("item3", 0);
            item3.SubItems.Add("7");
            item3.SubItems.Add("9");

            // Create columns for the items and subitems.
            listView1.Columns.Add("Item Column", -2, HorizontalAlignment.Left);
            listView1.Columns.Add("Column 2", -2, HorizontalAlignment.Left);
            listView1.Columns.Add("Column 3", -2, HorizontalAlignment.Left);

            listView1.Items.AddRange(new ListViewItem[] { item1, item2, item3 });

} 
```

然后你可以像这样访问它的子项：

```
 private void GetSubItems()
    {
        int total = 0;
        foreach (ListViewItem item in listView1.Items)
        {
            total += Convert.ToInt32(item.SubItems[1].Text);

        }
        MessageBox.Show(total.ToString());
    } 
```

注意我传入的索引`item.SubItems`。您应该传递要汇总的子项索引

# php - 如何使用codeigniter在帖子中发送数组

> ID：15541903
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:40:35.967
> 
> 标签：php, javascript, codeigniter

我根据以下内容在codeigniter框架中发送了数组：

```
for (var i=1; i<=selected; i++) {
           <div style="float: left; padding-left: 13px; padding-right: 12px; padding-top: 7px; margin-top: 0px;">'+i+'
</div>
<input type="text" name="unitName[]" id="unitName'+i+'" style="width:189px;" required />
<input type="text" name="ownerName[]" id="ownerName'+i+'" style="width:241px;" />
<input type="text" name="salutation[]" id="salutation'+i+'" style="width:137px;" /><br />
       } 
```

当我尝试使用以下内容发布它时：

```
$ownerNames = $this->input->post('ownerName');
if (is_array($ownerNames)) {
    foreach( $ownerNames as $ownerName ) {
    echo "Owner Name is : " . $ownerName;
    }
} else {echo "Owner is not array";} 
```

这是我的整个控制器，所有帖子：

```
if ($this->form_validation->run() == FALSE) {
                    $this->load->view('newblock');
                } else {
                    $registrarName = $this->input->post('registrarName');
                    $blockName = $this->input->post('blockName');
                    $serviceType = $this->input->post('serviceType');
                    $number = $this->input->post('number');
                    $email = $this->input->post('email');
                    $address1 = $this->input->post('address1');
                    $address2 = $this->input->post('address2');
                    $address3 = $this->input->post('address3[]');
                    $town = $this->input->post('town');
                    $postCode = $this->input->post('postCode');
                    $blockUnits = $this->input->post('blockUnits');

                    echo print_r($_POST);

                    $unitNames = $this->input->post('unitName', TRUE);
                    echo $unitNames[0].'<br />';
                    if (is_array($unitNames)) {
                        foreach( $unitNames as $unitName ) {
                        echo "unit Name is : " . $unitName;
                        }
                    } else {
                        echo "unit is not array";
                    }

                    $ownerNames = $this->input->post('ownerName', TRUE);
                    echo $ownerNames[0].'<br />';
                    if (is_array($ownerNames)) {
                        foreach( $ownerNames as $ownerName ) {
                        echo "Owner Name is : " . $ownerName;
                        }
                    } else {
                        echo "Owner  is not array";
                    }

                    $salutations = $this->input->post('salutation', TRUE);
                    echo $salutations[0].'<br />';
                    if (is_array($salutations)) {
                        foreach( $salutations as $salutation ) {
                        echo "salutation is : " . $salutation;
                        }
                    } else {
                        echo "salutation  is not array";
                    } 
```

它显示“所有者不是数组”；这表明数组是空的，经过调试我发现使用print_r，该数组确实是空的，没有发布任何内容......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T07:47:40.523

尝试这个

测试控制器

```
 $ownerNames = $this->input->post('ownerName');
  if (is_array($ownerNames)) {
    foreach ($ownerNames as $ownerName => $k) {
      echo "Owner Name is : " . $k . "<br/>";
    }
  } else {
    echo "Owner is not array";
  } 
```

和测试视图

```
<form method="post">
  <input type="text" name="ownerName[]" />
  <input type="text" name="ownerName[]" />
  <input type="text" name="ownerName[]" />
  <input type="submit" value="ownerName" />
</form> 
```

// 输出

```
Owner Name is : name1
Owner Name is : name2
Owner Name is : name3 
```

# zepto - Zeptojs on() 没有触发

> ID：15541904
> 
> 赞同：0
> 
> 时间：2013-03-21T07:40:36.383
> 
> 标签：zepto

我已经`(pluginA)`基于这个插件构建了一个插件，`zeptojs`并且在这个插件内部我使用 ajax 获取数据并附加一个列表`<a href=""></a>`

如何将事件绑定到这些锚点？我打算在全球范围内使用类似的东西`<a href="..." data-key="ABC123"></a>`，然后使用`$('[data-key]').pluginB()`，然后在里面`pluginB()`有类似的东西

`$(this).on('click', function (e) { e.preventDefault(); ... });`但我无法将点击事件绑定到动态创建的锚点。

`$('a').on('click', ...)`我在打电话之前尝试添加，`pluginA()`但它没有触发。

我真正想要的是使用这种`bind()` `trigger()`方法来解耦这两个插件，但是我很难找到一个好的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T00:46:02.647

使用委托形式`on`绑定特定区域中的所有所需链接（在本例中为整个正文）：

```
$(body).on('click', 'a[data-key]', function(e) {e.preventDefault();...}); 
```

现在所有链接`data-key`都将触发您的功能，无论它们在您调用时是否存在`on`；随后添加的链接将自动获得该行为，并且删除的链接不会因持有悬空的处理程序引用而泄漏内存。

# windows - 不能覆盖 Meteor absoluteUrl？

> ID：15541918
> 
> 赞同：5
> 
> 时间：2013-03-21T07:41:38.470
> 
> 标签：windows, meteor

我正在尝试结合 Windows 服务器上的部署覆盖 absoluteUrl。

在 Meteor.startup 的服务器上，我正在这样做：

```
Meteor.absoluteUrl({rootUrl: "http://example.com"}); 
```

在控制台中调用 Meteor.absoluteUrl() 返回：`http://localhost:3000`。

任何建议都非常受欢迎。这样做 Meteor.absoluteUrl({replaceLocalhost:true}); 也根本没有任何作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:18:06.790

尝试：

```
Meteor.absoluteUrl.defaultOptions.rootUrl = "http://mydomain.com" 
```

在你的 Meteor.startup 中。如果它不是用于个性化设置，您还可以使用环境变量`ROOT_URL`

# php - 如何将标签和属性解析为多维数组？

> ID：15541928
> 
> 赞同：0
> 
> 时间：2013-03-21T07:42:23.040
> 
> 标签：php

如何解析以下内容

```
{menu id="123"}
  Random text.
  {menu-item id="123"/}
  Random text.
  {menu-item id="123"/}
{/menu} 
```

成一个数组，像这样

```
Array(
  [menu] => Array(
    [id] => 123
    [children] => Array(
      [menu-item] = Array(
        [id] => 123
      )
      [menu-item] = Array(
        [id] => 123
      )
    )
  )
) 
```

它类似于 HTML。没有结束标签的标签是自闭合的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:56:37.250

嗯 - 如果这就像 html 您可以尝试将其视为 XML 并使用[simplexml](http://www.php.net/manual/en/book.simplexml.php)。

试一试吧：

```
$xmlData = str_replace( array( '{', '}' ), array( '<', '>' ), $sourceData );
$xmlObj = simplexml_load_string( $xmlData );

var_dump( $xmlObj ); 
```

生成的对象可能不是您尝试形成的 100% 的结构，但现在实现起来已经容易多了。

期待您的反馈，玩得开心！

# node.js - NodeJs循环遍历表现奇怪的对象变量

> ID：15541935
> 
> 赞同：0
> 
> 时间：2013-03-21T07:43:16.053
> 
> 标签：node.js

我正在循环中运行 mysql 选择，由于某种原因，我的变量被覆盖了..

我的代码如下：

```
setInterval(function () {

    for (var s in _bots) {
        if (_bots.hasOwnProperty(s)) {
            var obj = _bots[s];
            for (var prop in obj) {

                console.log(' ----- ' + _bots[s][prop].channel + ' ----- ');
                channel = _bots[s][prop].channel;
                cc = s;
                dd = prop;

                var sql = 'SELECT * FROM `usrs` WHERE cID = ' + connection.escape(_bots[s][prop].channel) + ' LIMIT 1';
                connection.query(sql, function(err, results) {                  

                    if(results.length != 0) {

                        console.log('NAME ---> ' + cc);
                        console.log('MSG_TO ---> ' + dd);
                        console.log('ID ---> ' + channel);

                    } else {
                        //....
                    }
                });

            }
        }   
    }

}, 15000) 
```

问题是`NAME --> MSG_TO --> variables (cc, dd and channel)`始终保存对象的最后一个值。`s`出于某种原因，它们被覆盖了。奇怪的是，例如，我不允许`prop`在 mysql select 函数中使用它们。

我需要一种能够在 mysql select from loop中使用`s`and的方法`prop`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:27:07.520

这是预期的行为。for..in 循环的每次传递都定义了一个闭包，并且所有闭包都在其作用域链中引用相同的函数作用域。虽然`cc`、`dd`和`channel`都是此范围内的变量，但您当然会得到相同的输出。

如果您想要不同的输出，则必须在更改它们的值之前将这些变量绑定到函数。尝试：

```
 connection.query(sql, function(cc, dd, channel, err, results) {                  
                if(results.length != 0) {
                    console.log('NAME ---> ' + cc);
                    console.log('MSG_TO ---> ' + dd);
                    console.log('ID ---> ' + channel);

                } else {
                    //....
                }
            }.bind(null, cc, dd, channel)); // bind the values here 
```

# asp.net-mvc - 使用 ActionFilters 检查对象访问

> ID：15541938
> 
> 赞同：1
> 
> 时间：2013-03-21T07:43:46.583
> 
> 标签：asp.net-mvc, action-filter

我一直很高兴地使用带有自定义 ActionFilterAtribute 的 BaseController 类，覆盖 OnActionExecuting()。我将这个 BaseController 类用于我的所有控制器，以便在将 id 路由值传递给控制器​​时检查它。

这工作得很好......我检查一个 id 值，如果它存在，我检查控制器名称，它确定 id 所属的对象类型。

但是后来...我开始收到在 ControllerB 中调用 PartialView 并在用于父 Controller/View 的 FilterContext 中显示相同 ID 时创建的错误。例如，假设我有一个 localhost/Project/Details/5 的 url，其中 Project 是控制器，Details 是 id=5 的操作。由于 PartialView 而调用了控制器“Notes”，并且这次为控制器“Notes”和原始“Project”id 触发了我的 ActionFilter。允许用户访问 ProjectId=5 但不允许访问 NoteId=5

我希望这是有道理的——我正在努力解释。我现在需要找到某种方法来忽略 PartialView，或者处理它，或者完全使用不同的方法。我的最终目标是能够根据对象的 id 检查我的应用程序中的对象访问。这类问题有“最佳方法”吗？也许我需要为每个控制器编写一个过滤器？或者也可能检查操作名称，以便我知道何时忽略“id”？

我的基础控制器...

```
public class AccessCheckAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        int id;

        if (filterContext.RouteData.Values["id"] != null)
        {
            if (int.TryParse(filterContext.RouteData.Values["id"].ToString(), out id))
            {
                SPTdb db = new SPTdb();

                switch (filterContext.RouteData.Values["Controller"].ToString().ToLower())
                {
                    case "project":
                        project = db.Projects.Find(id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-11T07:52:18.403

我认为这个问题可以通过使用 SQL 查询来解决。您传递表名以及对象身份的 [key/value]。

# c# - IAP 在真正的 WP8 商店中不起作用

> ID：15541941
> 
> 赞同：1
> 
> 时间：2013-03-21T07:43:59.293
> 
> 标签：c#, in-app-purchase, windows-phone-8

我在我的 windows phone 8 项目中有这段代码，用于测试是否有带有产品 ID 键的产品。当我使用 MockIAP 时，一切都在开发中，但在我的应用程序发布后，我无法在在线商店购买。游戏崩溃。

我的应用程序使用 phonegap 2.3.0 并通过 iframe 加载。它使用cordova插件执行buy()。

这是其他人为他们的 WP8 应用程序实施 IAP 的方式吗（即首先下载所有列表信息）？

```
 private async void buy()
        {
            ListingInformation li = await Store.CurrentApp.LoadListingInformationAsync();

            if (li.ProductListings.ContainsKey(package_id))
            {
                string pID = li.ProductListings[package_id].ProductId;
                var receipt = await Store.CurrentApp.RequestProductPurchaseAsync(pID, true);
                parseXML(receipt);
                prepData();
                httpPostData();
                Store.CurrentApp.ReportProductFulfillment(pID);
            }
        } 
```

这是在应用商店中输入的内容：

*   应用内商品 ID：pack1
*   类型：消耗品
*   应用内产品别名：1000 积分
*   基础价格：0.99 美元
*   状态：已发布
*   标签：无可用信息或未提供任何信息
*   关键词：无可用信息或未提供任何信息
*   默认语言：英语
*   标题：100 学分
*   应用内产品描述：无可用信息或未提供任何信息

更多详情：

这是执行 buy() 的步骤

1.  邮件从 iframe 内的 Web 应用程序发送到执行 cordova 插件的包装器

    pm.bind('purchase', function(e){ cordova.exec(app.purchase_success, app.purchase_failure, "InAppPurchase", "purchase", [e.package_id, e.user_id]) }, rooturl);

2.  然后我将 json 对象反序列化为 package_id 和 user_id 变量

3.  然后我执行 buy();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T10:35:36.327

尝试确保您从 UI 线程调用 Buy。如果不调用 Store.CurrentApp.RequestProductPurchaseAsync，它会为我们崩溃。

# css - 网站在移动视口中时如何不显示 div（侧边栏）

> ID：15541942
> 
> 赞同：1
> 
> 时间：2013-03-21T07:44:00.010
> 
> 标签：css, viewport

我想在我的网站上有 2 个侧边栏。我有一个使用视口的响应式 CSS。但我不想在移动浏览器中打开网站时显示侧边栏。标签会做得很好。有什么办法可以做到吗？

例如：堆栈溢出。当您在移动设备中打开它时，您看不到侧边栏。我想要类似的东西。

提前致谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T07:49:41.790

您可以对此移动设备使用**媒体查询，仅定义：**

```
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
} 
```

阅读更多信息[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:46:03.220

您可以使用媒体查询并有选择地显示/隐藏侧边栏（在下面的代码中更改侧边栏类），例如：

```
@media only screen and (max-width: 480px) {
    .sidebar {
        display: none;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:49:32.177

Stack Overflow 有一个用于移动页面的自定义 HTML。

但是你可以试试[Bootstrap](http://twitter.github.com/bootstrap/)

# jquery - 根据 URL 模式更改 UI 选项卡

> ID：15541944
> 
> 赞同：0
> 
> 时间：2013-03-21T07:44:24.820
> 
> 标签：jquery, html, jquery-ui, tabs, jquery-tabs

我正在使用 Jquery Ui 选项卡框架。我想根据浏览器中的 URL 模式更改选定的选项卡，例如 www.xyz.com/#tab1 或 www.xyz.com/#tab2。

我找到了一种解决方法

```
$("#tabs").bind('tabsselect', function(event, ui) {
                window.location.href=ui.tab; 
```

但是，它使选项卡锚被选中，但实际上并没有更改选项卡，我必须按 Enter 键才能实际更改选项卡。有人可以指出我错的地方并可以提示更改，以便选项卡根据 URL 模式更改。

我正在使用以下代码来实现这一点

```
 $(document).ready(function() {

   $( "#tabs" ).tabs({
         beforeLoad: function( event, ui )
          {        
          ui.jqXHR.error(function() { 
                   ui.panel.html(            "Couldn't load this tab. We'll try to fix this as soon as possible. "  ); 
                          }); 
                               }    
                               });

            $("#tabs").bind('tabsselect', function(event, ui) {
            window.location.href=ui.tab;

        });

 }); 
```

HTML 代码

```
<div id="tabs">
<ul>
    <li><strong class="first">
    <a href="#tabs1" id="tab1">Tab-1</a>
    </strong></li>
<li>
<strong>
<a href="xyz.do" id="tab2">Tab-2</a>
</strong>
</li>

</ul>

<div id="tabs1">
tab -1 content
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:26:48.743

我认为您可能想通过激活处理程序进行绑定。 [http://api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

```
$( ".selector" ).on( "tabsactivate", function( event, ui ) { changeColor(ui); } ); 
```

ui.tab 将包含有关单击的选项卡的详细信息。

在你的情况下，我想你会想说

```
 var changeColor(ui) = function(
    if (ui.index == 1) { 
       $("#selector").addClass("tab2Active"); 
    }); 
```

# magento - 使用 Oauth 和 curl 创建产品

> ID：15541952
> 
> 赞同：0
> 
> 时间：2013-03-21T07:45:05.837
> 
> 标签：magento, oauth, restful-authentication

我正在尝试使用 RESTful Api 创建产品。使用 RESTCLIENT firefox 插件实现了此功能，但使用脚本失败。我可以列出产品但我无法使用脚本创建产品。获取拒绝访问错误。谁能帮我？

这是我的脚本。

```
$url = 'http://magento.com/api/rest/products';
$method = 'POST';

# headers and data (this is API dependent, some uses XML)
$headers = array(
'Accept: application/json',
'Content-Type: application/json',
'oauth_signature_method : HMAC-SHA1', 
'oauth_nonce : ilJuravy9KVYm6R', 
'oauth_timestamp : 1363848967', 
'oauth_consumer_key : xxx',
'oauth_consumer_secret : yyy',
'oauth_token : zzz',
'oauth_token_secret : xyz',
'oauth_signature : 4admodOkAj2pKwhO5Tk6TEjc7Rg%3D',
'oauth_verifier: mrr1350pp0j8hiyv31kzxhko97hyyuwx',
'oauth_version : 1.0',
);
$data = json_encode(
array(
    'type_id'           => 'simple',
    'attribute_set_id'  => 4,
    'sku'               => 'simple' . uniqid(),
    'weight'            => 1,
    'status'            => 1,
    'visibility'        => 4,
    'name'              => 'Simple Product',
    'description'       => 'Simple Description',
    'short_description' => 'Simple Short Description',
    'price'             => 99.95,
    'tax_class_id'      => 0,
)
);

$handle = curl_init();
curl_setopt($handle, CURLOPT_URL, $url);
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);

switch($method) {
case 'GET':
break;
case 'POST':
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
break;
case 'PUT':
curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'PUT');
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
break;
case 'DELETE':
curl_setopt($handle, CURLOPT_CUSTOMREQUEST, 'DELETE');
break;
}

echo $response = curl_exec($handle);
echo $code = curl_getinfo($handle, CURLINFO_HTTP_CODE); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:18:57.073

你必须生成下面提到的 3 个东西，其他东西是静态的，比如 oauth_consumer_key、oauth_token 等。

1.timestmap 2.signature 3.nonce

我已经生成了所有东西，见下面的代码。

```
$nonce = substr(md5(uniqid('nonce_', true)),0,16);
$temprealm="http://magentohost/api/rest/products";
$realm=urlencode($temprealm);
$oauth_version="1.0";
$oauth_signature_method="HMAC-SHA1";
$oauth_consumer_key="lro2hnoh3c8luvhcr49j6qgygmyvw7e3";
$oauth_access_token="xbqe4wnu3zv357gimpdnuejvcbtk51ni";
$oauth_method="GET";
$oauth_timestamp=time();
$algo="sha1";
$key="sb88hfdihyg25ipt1by559yzbj2m3861&s7uhaheu8nrx961oxg6uc3os4zgyc2tm"; //consumer secret & token secret //Both are used in generate signature
$data="oauth_consumer_key=".$oauth_consumer_key."&oauth_nonce=".$nonce."&oauth_signature_method=".$oauth_signature_method."&oauth_timestamp=".$oauth_timestamp."&oauth_token=".$oauth_access_token."&oauth_version=".$oauth_version;

$send_data=$oauth_method."&".$realm."&".urlencode($data);
$sign=hash_hmac($algo,$send_data,$key,1); // consumer key and token secrat used here
$fin_sign=base64_encode($sign);
$curl = curl_init();

curl_setopt($curl,CURLOPT_HTTPHEADER,array('Authorization : OAuth realm='.$realm.', oauth_version="1.0", oauth_signature_method="HMAC-SHA1", oauth_nonce="'.$nonce.'", oauth_timestamp="'.$oauth_timestamp.'", oauth_consumer_key='.$oauth_consumer_key.', oauth_token='.$oauth_access_token.', oauth_signature="'.$fin_sign.'"'));

curl_setopt ($curl, CURLOPT_URL,$temprealm);
$xml=curl_exec($curl); 
```

# java - java中文件处理的可重试模式

> ID：15541954
> 
> 赞同：1
> 
> 时间：2013-03-21T07:45:28.343
> 
> 标签：java, design-patterns

我需要处理一个大文件（具有列和相同格式的行）。由于我需要考虑程序在处理过程中崩溃的情况，我需要这个处理程序是可重试的，这意味着它崩溃后我再次启动程序，它可以继续处理从它失败的行开始的文件。

有什么我可以遵循的模式或我可以使用的库吗？谢谢！

* * *

更新：

关于崩溃案例，不仅仅是OOM或一些内部问题。这也可能是由于其他部件超时或机器崩溃造成的。所以 try/catch 无法处理这个问题。

* * *

另一个更新：

关于分块文件，在我的情况下是可行的，但并不像听起来那么简单。正如我所说，该文件被格式化为几列，我可以根据其中一列将其拆分为数百个文件，然后一一处理这些文件。但不是这样做，我想了解更多关于处理支持重试的大文件/数据的常见解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:56:24.990

我会怎么做（虽然不是专业人士）

1.  创建一个[LineProcessor](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/LineProcessor.html)在文件的每一行上调用

    类处理器实现 LineProcessor> {

    ```
     private List<String> lines = Lists.newLinkedList();
            private int startFrom = 0;
            private int lineNumber = 0;

            public Processor(int startFrom) {
                this.startFrom = startFrom;
            }

            @Override
            public List<String> getResult() {
                return lines;
            }

            @Override
            public boolean processLine(String arg0) throws IOException {
                lineNumber++;
                if (lineNumber < startFrom) {
                    // do nothing
                } else {
                    if (new Random().nextInt() % 50000 == 0) {
                        throw new IOException("Randomly thrown Exception " + lineNumber);
                    }
                     //Do the hardwork here
                    lines.add(arg0);
                    startFrom++;
                }
                return true;
            }
        } 
    ```

2.  创建一个使用我的[LineProcessor来读取文件的](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/LineProcessor.html)[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)

    ```
    class Reader implements Callable<List<String>> {

        private int startFrom;

        public Reader(int startFrom) {
            this.startFrom = startFrom;
        }

        @Override
        public List<String> call() throws Exception {
            return Files.readLines(new File("/etc/dictionaries-common/words"),
                Charsets.UTF_8, new Processor(startFrom));
        }
    } 
    ```

3.  将[Callable](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)包装在 Retryer 中并使用[Executor调用它](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)

    ```
    public static void main(String[] args) throws InterruptedException, ExecutionException {
    BasicConfigurator.configure();

    ExecutorService executor = Executors.newSingleThreadExecutor();

    Future<List<String>> lines = executor.submit(RetryerBuilder
            .<List<String>> newBuilder()
            .retryIfExceptionOfType(IOException.class)
            .withStopStrategy(StopStrategies.stopAfterAttempt(100)).build()
            .wrap(new Reader(100)));

    logger.debug(lines.get().size());
    executor.shutdown();
    logger.debug("Happily Ever After"); 
    ```

    }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:52:11.673

您可以在代码中维护检查点/提交样式逻辑。因此，当程序再次运行时，它会从同一个检查点开始。

您可以使用 RandomAccessFile 读取文件并使用 getFilePointer() 作为您保存的检查点。当您再次执行该程序时，您会通过调用 seek(offset) 从此检查点开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T07:53:41.510

尝试从 OOM 错误中捕获将不会保存。您应该分块处理文件并在每次成功分块后将位置存储到文件系统/数据库/即使您的程序崩溃也保持持久性的任何地方。然后，您可以在重新启动软件时从存储位置读取上一点。您还必须在处理整个文件时清除此信息。

# iphone - iphone iCloud - 我们如何将图片从我们的应用程序上传到 iCloud。

> ID：15541958
> 
> 赞同：3
> 
> 时间：2013-03-21T07:45:43.373
> 
> 标签：iphone, icloud, icloud-api

我是 icloud 的新手。我正在开发一个应用程序。在我的应用程序中，我想将图片备份到 iCloud 服务器。但我不想让这些图像回到我的 iPhone。

这可能吗。怎么可能呢。我是 iCloud 新手。请帮我。任何好的教程或演示代码。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:32:04.110

这是相同的教程的链接。

[通过 iCloud 上传图像](http://www.touch-code-magazine.com/add-an-icloud-photo-gallery-to-your-app-with-mticloudphotogallery-library/)

我希望你能从中得到好主意

# jquery - 为什么 example.swf 的启动器在 chrome 调试器网络选项卡中是 jquery-1.7.2.min

> ID：15541960
> 
> 赞同：1
> 
> 时间：2013-03-21T07:45:49.880
> 
> 标签：jquery, google-chrome

创建一个html页面，加载它，代码是：

```
<html>
<body>
<embed src='http://www.tizag.com/pics/example.swf'></embed>
</body>
</html> 
```

见下图。
![在此处输入图像描述](../Images/112de22c7038d084faec8d5b15f3d2ab.png) 为什么 example.swf 的启动器在 chrome 调试器网络选项卡中是 jquery-1.7.2.min

# java - 将 Objective-c 的枚举转换为 Android 的枚举

> ID：15541961
> 
> 赞同：3
> 
> 时间：2013-03-21T07:45:51.347
> 
> 标签：java, android, objective-c, enums

请任何人帮助我。我想将 Objective-c 枚举转换为 android 枚举，如下所示：

```
// Objective-c enum
===================
typedef enum{
  ab = 0,
  bc = 1,
  ca = 2
}PieceType;

// just print using android Logcat:
=================
Log("ab = ", ab+"");
Log("bc = ", bc+"");
Log("ca = ", ca+"");
================

Result: 
ab = 0;
bc = 1;
ca = 2; 
```

想要将上面的枚举转换为 android 枚举但在打印时保持相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:54:16.287

将来，请在询问之前尝试阅读参考资料[`Enum Types`](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

这是示例：

```
public enum Example {
   AB(0), BC(1), CA(2);

   private int val;

   private Example(int c) {
       val = c;
   }

   public int getData() {
       return val;
   }
} 
```

用法：

```
int value = Example.AB.getData(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:56:41.710

也许这有帮助

```
public enum PieceType{
    AB(0), BC(1), CA(2);
    private int value;

    private Currency(int value) {
            this.value = value;
    }
}; 
```

在这里给你一个链接：

[http://javarevisited.blogspot.de/2011/08/enum-in-java-example-tutorial.html](http://javarevisited.blogspot.de/2011/08/enum-in-java-example-tutorial.html)

# php - 如何在 yii 中使用参数名称重写 url 格式

> ID：15541962
> 
> 赞同：1
> 
> 时间：2013-03-21T07:45:54.407
> 
> 标签：php, parameters, yii, rewrite

我对 Yii 很陌生，通常 yii 像这种 url 格式提供服务

```
baseurl/app_dir/conroller/action/parametername/vaule 
```

但我想这样表现出来

```
baseurl/app_dir/conroller/action/vaule 
```

表示没有参数名称。

我阅读了很多解决方案，但找不到，有人知道怎么做，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:22:42.563

它在文档中的某个地方，这里是示例：

```
'/user/<id:\w+>/' => 'user/view/' 
```

这意味着，该请求`/user/someUserName`将被定向到`view`控制器中的操作，`user`其参数`id`为 value `someUserName`。这样你就有了只有值的 url，但在应用程序中它可以作为命名`$_GET`参数使用。

**注意**：`\w+`只是这里支持的正则表达式，例如，您可以使用`\d+`将值限制为数字等。

# java - SelectionSort 和 BubbleSort - 如何计算比较次数和数字交换？

> ID：15541963
> 
> 赞同：3
> 
> 时间：2013-03-21T07:45:58.103
> 
> 标签：java, sorting, bubble-sort

首先，我看到了一个与 C++ 相关的类似问题，但我不太明白 - 加上我的问题是关于 Java 的。

基本上，我编写了两种可以在解析的数组上使用 SelectionSort 和 BubbleSort 的方法。虽然我相信这些方法可以正常工作（我已经运行测试并且它们都按升序对数字进行了排序），但我不确定我是否我正在正确计算比较次数和交换次数。如果有人能够在下面测试我的代码并提供一些反馈，我将非常感激。

注意：如果需要，我可以压缩我的 Java 项目文件并将它们发送给任何人。

**冒泡排序方法：**

```
public String bubbleSort(int[] numbers)
    {
        System.out.println("******|Bubble Sort|******");
        StringBuilder originalArray = new StringBuilder();

        for(int i = 0; i <= numbers.length - 1; i++)
        {
            originalArray.append(numbers[i] + " ");
        }
        System.out.println("Original array: " + originalArray);
        int temp; // temporary variable

        //Set boolean variable to true, 
        //to allow the first pass.
        boolean pass = true;

        int comparisons = 0;
        int swaps = 0;

        //While a pass can be made, 
        while(pass)
        {
            //Set the boolean value to false, 
            //indicating a number swap could 
            //be made.
            pass = false;

            for(int i = 0; i < numbers.length - 1; i++)
            {
                //increment the number of comparisons by 1.
                comparisons++;
                if(numbers[i] > numbers[i+1])
                {
                    temp = numbers[i];
                    numbers[i] = numbers[i + 1];
                    numbers[i+1] = temp;

                    //increment the amount of swaps made by 1, 
                    //to put numbers in correct order.
                    swaps++;
                    pass = true;
                }
            }
        }

        //Create a StringBuilder object - to hold 
        //the output of sorted numbers.
        StringBuilder sb = new StringBuilder();

        //Loop through the now sorted array - appending 
        //each subsequent number in the array to the 
        //StringBuilder object.
        for(int i = 0; i < numbers.length; i++)
        {
            sb.append(numbers[i] + " ");
        }

        //Return the final results of the sorted array.
        return "Sorted Array (asc): " + sb.toString() + "\nComparisons made: " + comparisons 
                + "\nSwaps made: " + swaps;
    } 
```

**选择排序方法**

```
public String selectionSort(int[] numbers)
    {
        System.out.println("******|Selection Sort|******");
        StringBuilder originalArray = new StringBuilder();

        int comparisons = 0;
        int swaps = 0;

        for(int i = 0; i <= numbers.length - 1; i++)
        {
            originalArray.append(numbers[i] + " ");
        }
        System.out.println("Original array: " + originalArray);

        //Declare variable to hold first element
        int first;

        //declare temporary variable, to be used in 
        //swapping integers.
        int temp;

        for(int x = numbers.length - 1; x > 0; x--)
        {
            first = 0;
            comparisons++;
            for(int y = 1; y <= x; y++)
            {
                //comparisons++;
                if(numbers[y] > numbers[first])
                {
                    first = y;
                    //comparisons++;
                    swaps++;
                }
                temp = numbers[first];
                numbers[first] = numbers[x];
                numbers[x] = temp;
                //swaps++;
            }
        }

        //Create a StringBuilder object - to hold 
        //the output of sorted numbers.
        StringBuilder sb = new StringBuilder();

        //Loop through the now sorted array - appending 
        //each subsequent number in the array to the 
        //StringBuilder object.
        for(int i = 0; i < numbers.length; i++)
        {
            sb.append(numbers[i] + " ");
        }

        //Return the final results of the sorted array.
        return "Sorted Array (asc): " + sb.toString() + "\nComparisons made: " + comparisons 
                + "\nSwaps made: " + swaps;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-05T17:37:56.970

对于冒泡排序：

*主要比较 ->* **(n*(n-1))/2**

*项目分配（交换）->* **3*(n-1)**

对于选择排序：

*主要比较 ->* **(n*(n-1))/2**（与气泡相同）

*项目分配（交换）->* **(n*(n-1))/4**

（请注意，**n**是您的数组大小的数量）

# ajax - 仪表板时间线

> ID：15541974
> 
> 赞同：1
> 
> 时间：2013-03-21T07:46:51.773
> 
> 标签：ajax, cakephp, pagination, timeline, dashboard

我正在尝试在 cakephp 中实现类似于 facebook 的仪表板（获取帖子并将它们发布到时间线，当你按下`see more`它时，它会不断从以前的偏移量中检索帖子），但我仍然对逻辑和工具感到困惑，我应该使用 cakephp 分页我的实现中的类。

```
$this->paginate(); 
```

根据某些性能方面的考虑，它应该以某种方式通过 ajax 调用

任何帮助或建议从哪里开始？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:18:14.360

## 不要使用分页

如果您对要添加数据的内容进行分页-您将获得重叠的数据，因此您要求第2页-并就当前用户而言，结束前一页。

## 使用时间戳

无休止的数据流的常规技术是使用如下查询：

```
SELECT *
FROM foos 
WHERE created >= $previousLastTimestamp 
ORDER BY created DESC 
LIMIT 20 
```

请注意，虽然我`created`在此示例中使用 - 它可以是任何伪唯一字段。

当您第一次呈现页面时，将最后一个条目的时间戳存储在 javascript 变量中，那么您的“获取更多帖子”逻辑应该是：

*   发出 ajax (get) 请求，传递最后一个时间戳
*   执行上述 sql 查询（作为`$this->Foo->find`调用）
*   在你的 js 中更新最后一个时间戳，这样你就知道下次用户点击“获取更多帖子”时你在哪里

使用`>=`条件的原因是，除非您正在测试的字段具有唯一值，否则可能会有多行具有您正在测试的值。如果您有一个按 (id) 排序的自然唯一字段，那么您不需要使用大于或等于，您可以简单地使用大于，并且避免需要考虑重复行。

这是[一个参考](https://coderwall.com/p/lkcaag)，它更详细地解释了为什么你应该处理这样的系统，避免传统的分页。

# windows-phone-7 - wp7 childbrowser 错误 - uri 字符串太长

> ID：15541977
> 
> 赞同：1
> 
> 时间：2013-03-21T07:47:05.143
> 
> 标签：windows-phone-7, cordova, base64, childbrowser

我在 WP7/Cordova 2.2 应用程序中使用 ChildBrowser 组件，我需要在浏览器中显示 Base64 PDF 内容。

`Invalid URI: The Uri string is too long.`使用 base64 数据 url 打开子浏览器时引发以下错误。

我对 .NET 不太擅长，因此我们将不胜感激。

# php - 检查 1000 个 url 是否存在，有没有快速的方法？

> ID：15541980
> 
> 赞同：1
> 
> 时间：2013-03-21T07:47:12.590
> 
> 标签：php

我有一个 url 数组（其中有大约 1000 个 url），我想检查它们是否存在。这是我当前的代码：

```
$south_east_png_endings = array();
for($x=1;$x<=25;$x++) {
    for($y=1;$y<=48;$y++) {
        $south_east_png_endings[] ="${x}s${y}e.png";
    }
}

foreach ($south_east_png_endings as $se){
    $url = 'http://imgs.xkcd.com/clickdrag/'.$se;
    $file_headers = @get_headers($url);
    if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
        // echo 'Does not exist';
    }
    else
    {
        echo $url;
    }
} 
```

该脚本有效，它回显了所有工作 url，但过程太长（需要几分钟才能完成）。有没有办法更快地做到这一点，或者这是否尽可能快？也许我可以使用 curl_timeout 函数来缩短时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:51:38.423

1) get_headers() 实际上使用 GET 请求，如果您只想知道文件是否存在，则不需要这些请求。改用 HEAD，[手册中的示例](http://php.net/get_headers)：

```
<?php
// By default get_headers uses a GET request to fetch the headers. If you
// want to send a HEAD request instead, you can do so using a stream context:
stream_context_set_default(
    array(
        'http' => array(
            'method' => 'HEAD'
        )
    )
);
$headers = get_headers('http://example.com');
?> 
```

2) 由于这些检查可以很容易地并行运行，因此您应该使用单独的线程/进程进行检查。但是，如果您在家中执行此操作，您的路由器可能会一次阻塞 1000 个请求，因此您可能需要使用 5-20 个并发线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:20:39.417

对于并行检查，您可以使用[multi_curl](http://www.php.net/manual/en/function.curl-multi-exec.php)。它可能非常快。这里有一些[例子](http://www.somacon.com/p537.php)。因为它比@eis 的例子更复杂。

PS 同样使用 curl 您可以使用 HEAD 方法的技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T11:26:01.033

```
function _isUrlexist($url) {
    $flag = false;
    if ($url) {
        $ch = curl_init();
        curl_setopt_array($ch, array(
            CURLOPT_URL => $url,
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_NOBODY => true,
            CURLOPT_HEADER => true
            ));
        curl_exec($ch);
        $info = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        curl_close($ch);

        $flag = ($info == 200) ? true : false;
    }
    return $flag;
} 
```

# magento - Magento如何更新购物车中的产品价格

> ID：15541983
> 
> 赞同：0
> 
> 时间：2013-03-21T07:47:33.073
> 
> 标签：magento, cart

我想根据选择的不同尺寸和输入的数量来更新产品价格（我正在使用不同尺寸的自定义选项）。

例如：我有一种产品有两种不同的尺码选择 尺码 1：S 尺码 2：M

其中尺寸 2 需要额外支付 2 美元。因此，如果产品价格是 14 美元并且用户选择了这个尺寸，那么对于输入的每个 M 尺寸数量，这将向用户额外收取 2 美元。

另一个例子： 小码数量：5 中码数量：1

那么产品价格将为 5 * 14 = $70 1 * 16 = $16 总价：$86

但是根据magento这个效果整体价格：

```
6 * 16 = $96 
```

所以产品成本是 96 美元而不是 86 美元。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:43:39.870

产品有哪些类型？可配置产品应该存在于一组单独可见或不可见的简单产品中。

由于可配置产品只是将所有产品组合在一起的外壳，因此您仍然可以更改单个产品的价格。

有关可配置产品、属性和简单产品的更多信息，请查看： http: [//www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/)

祝你好运！

# android - 如何从 sdcard 读取现有的 xml 文件并将新数据添加到其中

> ID：15541984
> 
> 赞同：0
> 
> 时间：2013-03-21T07:47:36.437
> 
> 标签：android, xml, xml-parsing, xml-serialization

我只想从 sdcard 中读取 xml 文件，并想在其中添加一些新数据。然后我必须将它写入sdcard。我该如何实现它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:00:31.503

[此处](https://stackoverflow.com/a/13631894/720176)给出了读取和写入 XML 文件的示例。[你可以使用google](http://www.google.co.in/search?q=reading%20and%20writing%20xml%20files%20in%20android&aq=0&oq=reading%20and%20writing%20xml%20files%20in%20a&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=reading%20and%20write%20xml%20file%20in%20android%20example&oq=reading%20and%20writing%20xml%20files%20in%20android%20e&gs_l=serp.3.0.33i29i30l2.67786.68155.0.69548.2.2.0.0.0.0.253.409.0j1j1.2.0...0.0...1c.1.7.psy-ab.38YUgYFpTIg&pbx=1&bav=on.2,or.r_qf.&bvm=bv.44158598,d.bmk&fp=1f6c09e049400626&biw=1366&bih=656)获得很多。然而，两个重要的类是`XmlSerializer`和`XmlPullParser`。一个简单的 XmlSerializer 示例是：-

```
public static String CreateXMLString() throws IllegalArgumentException, IllegalStateException, IOException
{
    XmlSerializer xmlSerializer = Xml.newSerializer();
        StringWriter writer = new StringWriter();

    xmlSerializer.setOutput(writer);

    //Start Document
    xmlSerializer.startDocument("UTF-8", true); 
    xmlSerializer.setFeature("http://xmlpull.org/v1/doc/features.html#indent-output", true);
    //Open Tag <file>
    xmlSerializer.startTag("", "file");

    XmlSerializer tempXml = Xml.newSerializer();
    StringWriter tempWriter =  new StringWriter();

    xmlSerializer.startTag("", "something");
    xmlSerializer.attribute("", "ID", "000001");

    xmlSerializer.startTag("", "name");
    xmlSerializer.text("CO");
    xmlSerializer.endTag("", "name");

    xmlSerializer.endTag("", "something");

    //end tag <file>
    xmlSerializer.endTag("", "file");
    xmlSerializer.endDocument();

    return writer.toString();
} 
```

同样，您也可以为 XmlPullParser 找到一个。由于您要在 sdCard 中读取/写入文件，请不要忘记调用`Environment.getExternalStorageDirectory().getAbsolutePath()`以获取外部存储目录的路径。[在这里](https://stackoverflow.com/a/5453753/720176)看一个简单的例子。

不要忘记将以下行添加到您的清单文件中，否则不会有任何效果。

如果你不让那个工作。用具体问题更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:05:06.923

你只是为了得到文件使用

```
File file = new File(Environment.getExternalStorageDirectory()
                + "your_path/your_xml.xml"); 
```

在您可以进行 xml 解析以读取该文件之后。

# oracle - sqlplus 如何查找当前连接的数据库会话的详细信息

> ID：15541990
> 
> 赞同：18
> 
> 时间：2013-03-21T07:48:04.697
> 
> 标签：oracle, sqlplus

我最近开始研究 oracle 数据库。通常我有许多 sqlplus 窗口打开到不同的 oracle 数据库。从一个 sqlplus 会话切换到另一个时，如何查看每个 sqlplus 会话的当前会话详细信息？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T07:55:53.147

```
show user 
```

获得连接的用户

```
 select instance_name from v$instance 
```

在 sqlplus 中获取实例或设置

```
set sqlprompt "_USER'@'_CONNECT_IDENTIFIER> " 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-25T09:24:35.410

我知道这是一个老问题，但我确实尝试了上述所有答案，但在我的情况下没有用。最终帮助我的是

> `SHOW PARAMETER instance_name`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-08T14:52:46.737

```
select sys_context('USERENV','INSTANCE_NAME') from dual; 
```

&

```
select instance_name from v$instance; 
```

会给你实例名称。您还可以使用`select * from global_name;`来查看实例的全局名称。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-21T10:30:41.987

看看这个[`(c) Tanel Poder`](http://blog.tanelpoder.com/contact/)。您可以从您的 glogin.sql 运行它（因此这些设置将在您每次连接时更新，或者只是手动运行它。注意`host title`命令 - 它使用会话信息更改您的 sql*plus 控制台窗口标题 - 对于同时打开的多个窗口非常有用.

```
-- the Who am I script

def   mysid="NA"
def _i_spid="NA"
def _i_cpid="NA"
def _i_opid="NA"
def _i_serial="NA"
def _i_inst="NA"
def _i_host="NA"
def _i_user="&_user"
def _i_conn="&_connect_identifier"

col i_username head USERNAME for a20
col i_sid head SID for a5 new_value mysid
col i_serial head SERIAL# for a8 new_value _i_serial
col i_cpid head CPID for a15 new_value _i_cpid
col i_spid head SPID for a15 new_value _i_spid
col i_opid head OPID for a5 new_value _i_opid
col i_host_name head HOST_NAME for a25 new_value _i_host
col i_instance_name head INST_NAME for a12 new_value _i_inst
col i_ver head VERSION for a10
col i_startup_day head STARTED for a8
col _i_user noprint new_value _i_user
col _i_conn noprint new_value _i_conn
col i_myoraver noprint new_value myoraver

select 
    s.username          i_username, 
    i.instance_name i_instance_name, 
    i.host_name         i_host_name, 
    to_char(s.sid)          i_sid, 
    to_char(s.serial#)      i_serial, 
    (select substr(banner, instr(banner, 'Release ')+8,10) from v$version where rownum = 1) i_ver,
    (select  substr(substr(banner, instr(banner, 'Release ')+8),
            1,
            instr(substr(banner, instr(banner, 'Release ')+8),'.')-1)
     from v$version 
     where rownum = 1) i_myoraver,
    to_char(startup_time, 'YYYYMMDD') i_startup_day, 
    p.spid              i_spid, 
    trim(to_char(p.pid))        i_opid, 
    s.process           i_cpid, 
    s.saddr             saddr, 
    p.addr              paddr,
    lower(s.username) "_i_user",
    upper('&_connect_identifier') "_i_conn"
from 
    v$session s, 
    v$instance i, 
    v$process p
where 
    s.paddr = p.addr
and 
    sid = (select sid from v$mystat where rownum = 1);

-- Windows CMD.exe specific stuff

-- host title %CP% &_i_user@&_i_conn [sid=&mysid ser#=&_i_serial spid=&_i_spid inst=&_i_inst host=&_i_host cpid=&_i_cpid opid=&_i_opid]
   host title %CP% &_i_user@&_i_conn [sid=&mysid #=&_i_serial]
-- host doskey /exename=sqlplus.exe desc=set lines 80 sqlprompt ""$Tdescribe $*$Tset lines 299 sqlprompt "SQL> "

-- short xterm title
-- host echo -ne "\033]0;&_i_user@&_i_inst &mysid[&_i_spid]\007"
-- long xterm title
--host echo -ne "\033]0;host=&_i_host inst=&_i_inst sid=&mysid ser#=&_i_serial spid=&_i_spid cpid=&_i_cpid opid=&_i_opid\007"

def myopid=&_i_opid
def myspid=&_i_spid
def mycpid=&_i_cpid

-- undef _i_spid _i_inst _i_host _i_user _i_conn _i_cpid 
```

样本输出：

```
17:39:35 SYSTEM@saz-dev> @sandbox
Connected.
18:29:02 SYSTEM@sandbox> @me

USERNAME             INST_NAME    HOST_NAME                 SID   SERIAL#  VERSION    STARTED  SPID            OPID  CPID            SADDR    PADDR
-------------------- ------------ ------------------------- ----- -------- ---------- -------- --------------- ----- --------------- -------- --------
SYSTEM               xe           OARS-SANDBOX              34    175      11.2.0.2.0 20130318 3348            30    6108:7776       6F549590 6FF51020

1 row selected.

Elapsed: 00:00:00.04 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-21T07:56:05.413

尝试：

```
select * from v$session where sid = SYS_CONTEXT('USERENV','SID'); 
```

[您可能也对此 AskTom 帖子](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:446220075876#5821366700346599437)感兴趣

看到您的评论后，您可以：

```
SELECT * FROM global_name; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T07:51:26.863

```
select * from v$session
where sid = to_number(substr(dbms_session.unique_session_id,1,4),'XXXX') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-16T16:00:06.620

我们可以从以下查询中获取[会话的详细信息和状态：](https://ora-data.blogspot.in/2016/11/query-session-details.html)

```
select ' Sid, Serial#, Aud sid : '|| s.sid||' , '||s.serial#||' , '||
       s.audsid||chr(10)|| '     DB User / OS User : '||s.username||
       '   /   '||s.osuser||chr(10)|| '    Machine - Terminal : '||
       s.machine||'  -  '|| s.terminal||chr(10)||
       '        OS Process Ids : '||
       s.process||' (Client)  '||p.spid||' (Server)'|| chr(10)||
       '   Client Program Name : '||s.program "Session Info"
  from v$process p,v$session s
 where p.addr = s.paddr
   and s.sid = nvl('&SID',s.sid)
   and nvl(s.terminal,' ') = nvl('&Terminal',nvl(s.terminal,' '))
   and s.process = nvl('&Process',s.process)
   and p.spid = nvl('&spid',p.spid)
   and s.username = nvl('&username',s.username)
   and nvl(s.osuser,' ') = nvl('&OSUser',nvl(s.osuser,' '))
   and nvl(s.machine,' ') = nvl('&machine',nvl(s.machine,' '))
   and nvl('&SID',nvl('&TERMINAL',nvl('&PROCESS',nvl('&SPID',nvl('&USERNAME',
       nvl('&OSUSER',nvl('&MACHINE','NO VALUES'))))))) <> 'NO VALUES'
/ 
```

更多详情： [https ://ora-data.blogspot.in/2016/11/query-session-details.html](https://ora-data.blogspot.in/2016/11/query-session-details.html)

谢谢，

# javascript - Internet Explorer 中的 JavaScript 调试（页面上的所有脚本）

> ID：15541999
> 
> 赞同：0
> 
> 时间：2013-03-21T07:48:55.067
> 
> 标签：javascript, debugging, internet-explorer-8, internet-explorer-7

我是成熟阶段项目的新手。其中一页有很多 JS 脚本和库，jQuery 被密集使用。仅在 IE7/8 中存在一个奇怪的错误：在页面脚本执行的中间某处 jQuery 对象变得未定义，因此其他一切都停止工作。

在 HTML 中间指定了两个脚本，比如说，像这样：

```
<script src="script1.js"></script>
<script src="script2.js"></script> 
```

在`script1`一个变量调用的末尾`jQuery`包含一个预期的对象，但在`script2`变量的开头`jQuery`已经是未定义的。中间会发生什么？

请，任何想法在哪里寻找以及如何调试！

有没有办法控制脚本执行的后果并在一页上调试整个后果js（包括所有js包括）？

谢谢！:)

**更新**。我做了一个补丁：最后`script1`我备份了变量：

```
var jQueryBackup = jQuery; 
```

在`script2`我恢复它的开头：

```
if (!jQuery && jQueryBackup) jQuery = jQueryBackup; 
```

它使脚本工作，但没有解释变量如何在两个脚本之间变得未定义（我认为它实际上是在两行代码之间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:04:47.963

你`<script>`在 HTML 中间吗？尝试将它们放入`<head>`

```
<head>
    <script src="script1.js"></script>
    <script src="script2.js"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:21:58.317

如果你想调试，我会这样做：

```
$.getScript("script1.js").done(function(script, textStatus) {
  console.log('script1 is loaded');
  $.getScript("script2.js").done(function(s,t){
     console.log('script1.js is loaded');
  });
})
.fail(function(jqxhr, settings, exception) {
  console.log( "Triggered ajaxError handler." );
}); 
```

现在你可以调试它了，你也可以使用原生 javascript 和使用 onload。
如果您需要示例，请告诉我。

示例：（此解决方案适用于 IE8+、firefox、chrome）

```
function handleOnLoad() {
    // do the same here for the script.2 file
}
function IEhandleOnLoad() {
     if (this.readyState === 'complete' || this.readyState === 'loaded') {
           handleOnLoad();
        }
}
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.onreadystatechange = IEhandleOnLoad;
s.onload = handleOnLoad;
s.src = 'script1.js'; 
```