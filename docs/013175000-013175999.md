# StackOverflow 问答 13175000-13175999

# objective-c - 在 IOS xcode 程序中的字符数组中搜索字符串？

> ID：13175003
> 
> 赞同：0
> 
> 时间：2012-11-01T10:20:14.097
> 
> 标签：objective-c, ios, xcode

字符信息[256]="Apple,iPhone,iPad";

我想在这个char数组中搜索，例如在上面的数组中搜索“iPhone”，返回TRUE，因为它包含这个字符串。

如何在 iOS xcode 程序中做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:29:21.397

这里是：

```
BOOL stringInString(char *s1, char *s2)
{
    return (strstr(s1, s2) != NULL);
} 
```

# python - 使用 python 从 Firewire 获取音频数据

> ID：13175005
> 
> 赞同：2
> 
> 时间：2012-11-01T10:20:22.230
> 
> 标签：python, firewire

我有一个 M-Audio Profire 2626 多声道声音采集硬件，我想用我的笔记本电脑控制它。m-Audio 设备带有火线接口。我想知道我是否可以通过 Firewire 接口使用 Python 控制这个设备

# workflow-foundation-4 - 在自定义 WorkflowViewElement 中，如何支持 WF4.5 Annotations？

> ID：13175008
> 
> 赞同：1
> 
> 时间：2012-11-01T10:20:29.913
> 
> 标签：workflow-foundation-4, workflow-foundation

我创建了一个自定义活动设计器，但我想控制“标题”部分（默认情况下显示 ModelItem.DisplayName），据我所知，实现这一点的唯一方法是从WorkflowViewElement 而不是 ActivityDesigner。所以，这似乎有效，一切都很好。除了，我想支持 WF4.5 的新注释功能。
鉴于当您向设计图面上的工作流元素添加注释时，它会向您正在注释的元素 + 实际注释元素添加一个图标，显然任何自定义 WorkflowViewElement 都必须在其中包含一些额外的东西来支持这种行为. 任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T20:25:43.420

正如我所想，注释作为附加属性保存在工作流定义中。以下是工作流 xaml 中注释的样子：

```
<Sequence
  xmlns:derp="http://schemas.microsoft.com/netfx/2010/xaml/activities/presentation"
  derp:Annotation.AnnotationText="This is an annotation!"> 
```

看，就像任何其他附属财产一样。除非它不是。它是附加的*工作流*属性，而不是附加的*DependencyProperty*。这意味着它通过附加的属性服务以及[Annotation 类](http://msdn.microsoft.com/en-us/library/system.activities.presentation.annotations.annotation.aspx)工作。获取和设置 ModelItem 上的注释文本很简单（如下所述）。

支持注解其实并不难。只要你不介意你的 UI 看起来像垃圾。这是一个快速而肮脏的实现。

在 UI 中，添加一些用于保存和编辑注释文本的控件

```
<sap:WorkflowViewElement
    x:Class="AnnotationSupport.MyActivityDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:ann="clr-namespace:System.Activities.Presentation.Annotations;assembly=System.Activities.Presentation"
    xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
    x:Name="root"
    MinWidth="100"
    MinHeight="100">
    <Grid Background="red">
        <Grid.RowDefinitions>
            <RowDefinition
                Height="auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Expander
            IsExpanded="False">          
            <!-- HERE SHE BLOWS -->
            <TextBox
                Text="{Binding ModelItem.AnnotationText}" />
        </Expander>
            <TextBox
            Grid.Row="1"
            Text="{Binding ModelItem.Text}"
            Margin="10" />
    </Grid>
</sap:WorkflowViewElement> 
```

每当 Annotation 文本更改时，ModelItem 的 PropertyChanged 事件就会触发，就像任何其他属性一样。如果您想从代码中获取它，最简单的方法是将 ModelItem 转换为`dynamic`：

```
private void SetAnnotationLol(string newValue)
{
    if(ModelItem != null)
        ((dynamic)ModelItem).AnnotationText = newValue;
} 
```

现在，如果你想创建一个像 Fx 活动这样的漂亮用户界面......好吧......

我将由您来创建自定义[Adorner](http://msdn.microsoft.com/en-us/library/ms743737.aspx)来处理注释的显示和编辑。这实际上并不像最初看起来那么难。如果你还没有做，这是你的机会。

# android - 我可以构建一个兼容所有手机的 Web 应用程序吗？

> ID：13175010
> 
> 赞同：1
> 
> 时间：2012-11-01T10:20:38.683
> 
> 标签：android, iphone, ios, css, html

我想做一个网络应用程序。另外，我想让所有使用 IOS 和 Android 的手机都可以使用此应用程序，并将其图标放在主屏幕上，据我所知，我可以为 Iphone 这样做，我很困惑的是我是否必须做同样的事情以不同的方式为Android？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:31:49.983

如果您正在构建一个 Web 应用程序，那么假设您不将它作为本机应用程序移植，那么您会很好。

只需查看响应式网站设计即可考虑不同的屏幕尺寸和资源，例如：

[用于移动浏览器](https://stackoverflow.com/questions/6886970/browser-specific-css-for-mobile-browsers)和 [iOS 开发站点的特定于浏览器的 CSS](http://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/OptimizingforSafarioniPhone/OptimizingforSafarioniPhone.html)

帮助了解移动浏览器中的 CSS 差异。

一个好的起点是为网站使用 Twitter Bootstrap 框架，该框架响应速度非常快，并且在所有移动平台上看起来都很棒。

**编辑**

用于建议用户将站点添加到主屏幕的 JQuery 插件：

[http://code.google.com/p/mobile-bookmark-bubble/](http://code.google.com/p/mobile-bookmark-bubble/)或[http://cubiq.org/add-to-home-screen](http://cubiq.org/add-to-home-screen)

# java - 有没有办法在java中查询windows系统的特定程序窗口？

> ID：13175014
> 
> 赞同：1
> 
> 时间：2012-11-01T10:20:45.423
> 
> 标签：java, windows

我正在着手一个项目，我需要使用 java.awt.Robot 类与 Windows 操作系统上的程序进行交互。

是否可以查询系统以获取“记事本”的运行实例并让它返回窗口尺寸？我只是以“记事本”为例。我无法讨论我正在尝试与之交互的实际程序。

我希望这个问题不会太模糊。如果任务管理器能够保留正在发生的事情的运行列表，那么我不应该也能找到我的特定程序吗？

**编辑：**根据我到目前为止收到的答案，我已经检查了[从 java 中调用 win32 api 方法的](https://stackoverflow.com/questions/2389156/calling-win32-api-method-from-java?lq=1)建议。但我对如何让win32解决我的问题仍然含糊不清。该线程正在询问如何使用dll。

据我所知，我的问题只是获取“记事本”的运行实例，然后使用 win32 api 的 GetWindowRect 方法返回一个维度，然后我可以使用 Robot 告诉我去哪里。不幸的是，我不知道如何做到这一点，当谈到 Java 时，我还是相当新的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:27:25.007

这取决于你想要做什么。

如果您想获取窗口尺寸，您应该认识到[win32 api](http://msdn.microsoft.com/en-us/library/ff468919(v=vs.85).aspx)可以提供该信息。

而且，如果 win32 api 提供该信息，[您如何从 java 调用 win32 api 函数](https://stackoverflow.com/q/2389156/1273830)？是你应该问的问题。

# java - 从 Java 对象到 JSON 对象的自定义转换

> ID：13175019
> 
> 赞同：2
> 
> 时间：2012-11-01T10:20:51.023
> 
> 标签：java, json, hibernate, gson

我有以下代码

```
Gson gson = new Gson();
String json = gson.toJson(criteria.list()); // list is passed by Hibernate 
```

结果将是这样的：

```
{creationTime:0, enabled:true, id:1, loginDuration:0, online:false, userName:someone} 
```

我想在 JSON 响应中添加新属性（与 id 具有相同值的 DT_RowId）。最终结果应该是这样的：

```
{creationTime:0, enabled:true, id:1, loginDuration:0, online:false, userName:someone, DT_RowId=1} 
```

**更新**

为了解决这个问题，我在实体上创建了一个带有 @Transient 注释的字段。

```
 ...
    @Transient
    private long DT_RowId;

    public void setId(long id) {
            this.id = id;
            this.DT_RowId=id;
        }
    ... 
```

但是从未调用过 setId 函数。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:54:57.317

GSON 不会调用您的 getter 和 setter。它通过反射直接访问成员变量。要完成您尝试做的事情，您需要使用 GSON 自定义序列化器/解串器。[自定义序列化器/反序列化器上的 GSON 文档](https://sites.google.com/site/gson/gson-user-guide#TOC-Custom-Serialization-and-Deserialization)提供了一些示例来说明如何执行此操作。

这是一个通过 JUnit 测试的工作示例，演示了如何执行此操作：

## 实体.java

```
public class Entity {
    protected long creationTime;
    protected boolean enabled;
    protected long id;
    protected long loginDuration;
    protected boolean online;
    protected String userName;
    protected long DT_RowId;
} 
```

## EntityJsonSerializer.java

```
import java.lang.reflect.Type;
import com.google.gson.*;

public class EntityJsonSerializer implements JsonSerializer<Entity> {
    @Override
    public JsonElement serialize(Entity entity, Type typeOfSrc, JsonSerializationContext context) {
       entity.DT_RowId = entity.id;
       Gson gson = new Gson();
       return gson.toJsonTree(entity);
    }
} 
```

## JSONTest.java

```
import static org.junit.Assert.*;
import org.junit.Test;
import com.google.gson.*;

public class JSONTest {
    @Test
    public final void testSerializeWithDTRowId() {
        Entity entity = new Entity();
        entity.creationTime = 0;
        entity.enabled = true;
        entity.id = 1;
        entity.loginDuration = 0;
        entity.online = false;
        entity.userName = "someone";

        GsonBuilder builder = new GsonBuilder();
        builder.registerTypeAdapter(Entity.class, new EntityJsonSerializer());
        Gson gson = builder.create();
        String json = gson.toJson(entity);
        String expectedJson = "{\"creationTime\":0,\"enabled\":true,\"id\":1,\"loginDuration\":0,\"online\":false,\"userName\":\"someone\",\"DT_RowId\":1}";
        assertEquals(expectedJson, json);
    }
} 
```

# vba - 禁用 MS Access 表单的“详细信息”部分中的所有控件

> ID：13175021
> 
> 赞同：2
> 
> 时间：2012-11-01T10:21:00.043
> 
> 标签：vba, ms-access, ms-access-2010

我正在寻找一些命令，它将禁用 MS Access 表单的“详细信息”部分中存在的所有控件。一种方法是单独禁用每个控件。我正在寻找一种独立于控件的方式，该方式将禁用 MS Access Form 的详细信息部分中存在的所有控件。

如果要根据一些登录凭据启用表单并且用于输入凭据的字段位于表单的标题部分，则此功能可能很有用。因此，一旦用户登录，该表单中的所有控件都会启用。Uplon注销，它们将被禁用。

我尝试搜索它，但似乎不支持它。或者以前没有人有这样的要求。

如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:22:11.503

表单具有符合此要求的各种属性：允许编辑、允许添加和允许删除。允许编辑适用于未绑定的控件，甚至适用于未绑定的表单。

如果您需要禁用某些控件，可以将这些控件的 tab 属性设置为字符串，然后遍历表单的控件集合以禁用这些控件。

```
Dim frm As Form
Dim ctl As Control

Set frm = Forms!MyOpenForm

For Each ctl In frm.Controls

    If ctl.ControlType <> acLabel And ctl.ControlType <> acTabCtl Then
        If ctl.Tag = "AdminHide" Then
            If varWho = "Authorized" Then
                ctl.Visible = True
            Else
                ctl.Visible = False
            End If
        End If

    End If

Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-21T18:25:27.850

您可以直接禁用详细信息部分中的所有控件，而无需使用标签：

```
Dim ctrl As Control
For Each ctrl In Detail.Controls
    If (TypeOf ctrl Is TextBox Or TypeOf ctrl Is ComboBox)
        ctrl.Enabled = False
    End If
Next 
```

同样，您可以使用`FormHeader.Controls`和访问页眉和页脚中的控件`FormFooter.Controls`。

我通常更喜欢使用`ctrl.Locked = True`而不是`ctrl.Enabled = False`因为用户仍然可以从锁定的控件中复制文本并在它们上使用文本过滤器，但这取决于你。

# build - 仅构建更改的项目或构建全部，这是持续集成中的首选？

> ID：13175022
> 
> 赞同：1
> 
> 时间：2012-11-01T10:21:04.627
> 
> 标签：build, msbuild, continuous-integration, build-process, teamcity

我们的软件分为多个组件。

Msbuild 脚本自动化我们的构建和批处理脚本来调用它。即使我们有微小的变化，我们也会每天构建我们的组件。我们希望转向持续集成，以便每当签入发生时都会触发构建。

我们的 msbuild 脚本是这样编写的，它将为组件构建所有 sln 文件。在持续集成中，我是否只需要构建修改后的 sln？

如果我只构建更改的项目，我是否必须为每个 sln 编写一个 msbuild？

我可以简单地使用 teamcity 中现有的 msbuild 脚本吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:49:28.573

我都做过，两者都有优点和缺点：

## 增量构建（仅更改的内容）

这是 MSBuild 的默认行为。即使您在 Visual Studio 中构建，它也只会构建已更改的内容（除非您选择“全部重建”）。

### 优点

*   **更快**你的反馈循环越快越好。
*   **减少构建服务器磁盘和网络的负载，**因为您不必每次都检查所有内容，使其脱离源代码控制。这在高负载构建集群中可能很重要。

### 缺点

*   **可能的源代码控制**问题 我们遇到了复杂的源代码树重命名或重组导致检出失败的问题。我们使用的是颠覆，所以更新失败了。如果我们一直在进行干净的结帐，就不会发生这种情况（当然，干净的结帐意味着我们必须进行完全重建）。
*   **误报的机会。**我们有一个案例，我们没有完全擦除构建代理的源文件并从源代码中签出新副本。有人更改了构建文件，因此它在测试之前没有正确复制二进制文件，但由于旧的二进制文件仍然存在于磁盘上，它正在从它们运行测试。构建被破坏了，但它正在运行旧的二进制测试，所以直到一周后我发现问题之前，我们才意识到我们引入了错误。

## 完整结帐和重建

### 优点

*   **更强大**您排除了源代码控制更新问题和误报的可能性，因为您每次都从一个干净的状态开始。这消除了先前构建可能影响此构建的可能性。

### 缺点

*   **慢得多**这涉及等待从源代码进行完整的结帐，如果项目很大，这可能需要很长时间。此外，它需要从头开始构建整个源代码树。
*   **构建代理、磁盘和网络上的更高负载**因为您要检查和重建所有内容，所以您将对构建代理的 CPU 和磁盘以及网络（以及您的源代码控制系统）产生更多的负担。

## 第三种选择：增量签出和重建

在这种情况下，您仅从源代码管理中提取增量更改，但执行完全重建。

### 优点

*   **比完全结帐更快**，实际上只比增量构建慢一点。与进行完整检出或运行测试所需的时间相比，构建时间通常很短。
*   **由于您重建了所有源，因此更加强大**，但误报仍然可以潜入。

### 缺点

*   **可能的源代码控制**问题 请参阅我对增量构建的评论。
*   **误报的机会**请参阅我对增量构建的评论。

## 哪个最好？

这取决于您对快速反馈（速度）的需求与网络和构建代理的资源限制之间的平衡。如果您有大量资源并且想要快速反馈和完整重建的稳健性，您可以构建两次。也许在签入时，进行增量构建，但每晚执行完整的签出和重建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T14:54:09.213

两者，有点。我们每天进行计划的完整构建，并在白天进行增量构建（门控签入）。

一切都取决于您的构建实际上有多大和多复杂，但是如果您要选择其中一个，则应该朝着完整的方向发展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T14:50:11.723

无论您的构建粒度是什么，我的偏好都是对整个组件进行完整、干净的构建。如果 CI 循环的构建时间过长，请考虑将该组件分解为依赖于彼此二进制文件的较小部分。在这种情况下，您将构建更改的内容以及依赖于更改的组件的任何其他组件。在 .Net 世界中，我听说 Nuget 在管理这些二进制依赖项方面越来越受欢迎。

[在我的CI 疼痛缓解系列](http://www.urbancode.com/html/resources/articles/build-pain-relief/)的练习 2 中，我更多地谈论了这个策略。

# exchangewebservices - 应该如何设计 SQL 语句来计算设备数量？

> ID：13175024
> 
> 赞同：0
> 
> 时间：2012-11-01T10:21:08.560
> 
> 标签：exchangewebservices, logparser

我应该如何设计 sql 语句来计算每个 User-Agent ID 中的设备数量？

我在 MS Log Parser Studio (LOGPARSER) 工作，致力于编写不同的查询交换日志 (IIS W3C LOG) 以编译移动设备的统计信息。

这是查询：

```
SELECT TO_STRING(To_timestamp(date, time), 'MM-dd-yyyy') as Day, cs(user-agent) as
UserAgent /* Count(MyDeviceId as DeviceId) as NrOfSameDevice 
USING
EXTRACT_VALUE(cs-uri-query,'DeviceId') as MyDeviceId */
FROM '[LOGFILEPATH]' 
WHERE cs-uri-stem LIKE '%Microsoft-Server-ActiveSync%'
GROUP BY Day, UserAgent
ORDER BY Day 
```

此查询的结果是：

![在此处输入图像描述](../Images/0a98914e375d2f1c48b4a85d24c9112c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:58:43.837

我假设您要计算每天*不同*设备的数量*，UserAgent*对。

这通常使用 COUNT(DISTINCT) 或嵌套查询来完成，但由于 LogParser 都不支持（GROUP BY 不支持 COUNT(DISTINCT)），因此您必须将查询分成两部分：

1.  第一个查询选择 Day、UserAgent 和 DeviceId 的不同组合：

    SELECT DISTINCT TO_STRING(To_timestamp(date, time), 'MM-dd-yyyy') as Day, cs(user-agent) as UserAgent, EXTRACT_VALUE(cs-uri-query,'DeviceId') as MyDeviceId INTO TmpOutput.csv FROM '[日志文件路径]'

2.  第二个查询解析第一个按前两个字段分组的结果：

    SELECT Day, UserAgent, COUNT(*) FROM TmpOutput.csv GROUP BY Day, UserAgent ORDER BY Day

确保将第一个命令配置为还将标头输出到 TmpOutput.csv。

# c# - 使用 async/await 时，Task 中的线程池线程上会放什么？

> ID：13175027
> 
> 赞同：3
> 
> 时间：2012-11-01T10:21:19.450
> 
> 标签：c#, multithreading, threadpool

请考虑以下代码

```
 public static async Task<int> Answer()
    {
        await Task.Delay(1000);
        return 42;
    }

    static void Main(string[] args)
    {
        for (int j = 0; j < 20; j++)
        {
            Console.WriteLine(j +" " + Thread.CurrentThread.IsThreadPoolThread);
            if (j == 1)
            {
                new Task( async ()=>
                    {
                        int answer = await Answer();
                        Console.WriteLine(answer + " " + Thread.CurrentThread.IsThreadPoolThread);
                    }).Start();
            }

            Thread.Sleep(200);
        }

        return; 
```

你能猜出`CurrentThread.IsThreadPoolThread`打印时的答案是什么吗？

似乎`Task.Delay(..)`正在这样做，因为如果我删除 await，那么答案是`False`. 但是，我似乎找不到`Delay`实际上将东西放在文档中的线程池中。

这让我想到了一个更普遍的问题。Task 中的什么*实际上*启动了一个线程池线程`Run(..)`？

**编辑：**
替换`new Task(...)`为`Ask()`

```
 public static async void Ask()
    {
        int answer = await Answer();
        Console.WriteLine(answer + " " + Thread.CurrentThread.IsThreadPoolThread);
    } 
```

产生相同的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:23:58.880

正如我在我的[`async`/ `await`intro](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)帖子中所描述的，默认情况下`await`将捕获当前的“上下文”并使用它来执行继续（后面的代码`await`）。这个“上下文”是`SynchronizationContext.Current`除非它是`null`，在这种情况下它是`TaskScheduler.Current`。

我还在我的博客上描述[了在控制台应用程序上的](http://nitoprograms.blogspot.com/2012/02/async-console-programs.html)[使用。`async`](http://nitoprograms.blogspot.com/2012/02/async-console-programs.html)控制台应用程序不提供`SynchronizationContext`，因此“上下文”回退到`TaskScheduler.Current`. 由于当前执行`Task`的是在线程池上运行，`TaskScheduler.Current`所以和 一样`TaskScheduler.Default`，都是线程池任务调度器。

这就是您的代码在线程池线程上恢复的原因。这是正确的行为。

# jquery - 如何在每个循环的jquery模板中添加按钮

> ID：13175030
> 
> 赞同：0
> 
> 时间：2012-11-01T10:21:32.203
> 
> 标签：jquery

```
 var markup = "<tr><td colspan='2'><h1>${hotelname}</h1></td></tr> 
<tr><td><input type=button value=MoreInformation id=btncabinmoreinfo1></td></tr>";
    $.template("cabinTemplate", markup); 
```

此动态按钮 ID 不起作用。这是在 jquery 模板中创建动态按钮的正确方法吗？

按钮点击代码：

```
$("#btncabinmoreinfo1").click(function () {
    alert("more info");
}); 
```

当我单击此更多信息按钮时，我没有收到任何警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:28:06.517

你做错了。你没有使用引号来表示输入按钮的 ID 和值。

```
var markup = '<tr><td colspan="2"><h1>${hotelname}</h1></td></tr> <tr><td><input type="button" value="MoreInformation" id="btncabinmoreinfo1"></td></tr>'; 
```

然后为按钮编写点击事件：

```
$("#btncabinmoreinfo1").click(function () {
 alert("//something");
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:25:04.077

ID 必须是唯一的，因此如果您在循环中多次使用它会导致问题。它应该是一个类。

如果将其更改为 class=btncabinmoreinfo1 然后单击事件

$(".btncabinmoreinfo1").click(function () { alert("更多信息");

你可能会有更多的运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:38:27.107

我认为你正在这样做

```
var markup = "<tr><td colspan='2'><h1>${hotelname}</h1></td></tr> 
<tr><td><input type=button value=MoreInformation id=btncabinmoreinfo1></td></tr>";
    $.template("cabinTemplate", markup); 
```

并附加它是一些容器，如

```
$.tmpl( "cabinTemplate", data).appendTo( "#elementid" ); 
```

接着

```
$("#btncabinmoreinfo1").click(function () {
    alert("more info");
}); 
```

所以，你可以做一些改变，比如

1.  用引号将您的属性值括起来
2.  并且因为您是在循环中执行此操作，所以在您的按钮上添加了一个类。
3.  在您的模板父级上附加事件，例如

* * *

```
var markup = "<tr><td colspan='2'><h1>${hotelname}</h1></td></tr> 
<tr><td><input type='button' value='MoreInformation' class='btncabinmoreinfo1'></td></tr>";
$.template("cabinTemplate", markup);

$("#elementid").on('click' , '.btncabinmoreinfo1',(function () {
    alert("more info");
}); 
```

您可以在此处查看[.on](http://api.jquery.com/on/)的使用情况。

委托事件方法仅将事件处理程序附加到一个元素，`#elementid`，并且事件只需要冒泡（从 clicked`.btncabinmoreinfo1`到`#elementid`）：

因此，事件将`#elementid`通过单击将附加到元素`.btncabinmoreinfo1`会冒泡，因此新的动态元素也可以响应事件。

我希望，它会有所帮助:)

# python - Python sage：如何计算化学计量矩阵的零空间（内核）？

> ID：13175031
> 
> 赞同：4
> 
> 时间：2012-11-01T10:21:37.653
> 
> 标签：python, matlab, matrix, sage

在从 Matlab 切换到 python 的绝望尝试中，我遇到了以下问题：

在 Matlab 中，我可以定义一个矩阵，如：

```
N = [1  0  0  0 -1 -1 -1  0  0  0;% A
     0  1  0  0  1  0  0 -1 -1  0;% B
     0  0  0  0  0  1  0  1  0 -1;% C
     0  0  0  0  0  0  1  0  0 -1;% D
     0  0  0 -1  0  0  0  0  0  1;% E
     0  0 -1  0  0  0  0  0  1  1]% F 
```

然后可以通过以下方式计算有理基础零空间（内核）：

```
K_nur= null(N,'r') 
```

标准正交基如下：

```
K_nuo= null(N) 
```

这将输出以下内容：

```
N =

 1     0     0     0    -1    -1    -1     0     0     0
 0     1     0     0     1     0     0    -1    -1     0
 0     0     0     0     0     1     0     1     0    -1
 0     0     0     0     0     0     1     0     0    -1
 0     0     0    -1     0     0     0     0     0     1
 0     0    -1     0     0     0     0     0     1     1

K_nur =

 1    -1     0     2
-1     1     1     0
 0     0     1     1
 0     0     0     1
 1     0     0     0
 0    -1     0     1
 0     0     0     1
 0     1     0     0
 0     0     1     0
 0     0     0     1

K_nuo =

 0.5933    0.1332    0.3070   -0.3218
-0.0930    0.0433    0.2029    0.7120
 0.1415    0.0084    0.5719    0.2220
 0.3589    0.1682   -0.0620    0.1682
-0.1628    0.4518    0.3389   -0.4617
 0.3972   -0.4867    0.0301   -0.0283
 0.3589    0.1682   -0.0620    0.1682
-0.0383    0.6549   -0.0921    0.1965
-0.2174   -0.1598    0.6339    0.0538
 0.3589    0.1682   -0.0620    0.1682 
```

我一直试图在 Python SAGE 中复制它，但到目前为止，我还没有成功。我的代码如下所示：

```
st1= matrix([
[ 1, 0, 0, 0,-1,-1,-1, 0, 0, 0],
[ 0, 1, 0, 0, 1, 0, 0,-1,-1, 0],
[ 0, 0, 0, 0, 0, 1, 0, 1, 0,-1],
[ 0, 0, 0, 0, 0, 0, 1, 0, 0,-1],
[ 0, 0, 0,-1, 0, 0, 0, 0, 0, 1],
[ 0, 0,-1, 0, 0, 0, 0, 0, 1, 1]])

print st1

null2_or= transpose(st1).kernel()
null2_ra= transpose(st1).kernel().basis()

print "nullr2_or"
print null2_or
print "nullr2_ra"
print null2_ra 
```

注意：转置是在阅读了一些关于此的教程后介绍的，它与 SAGE 自动从左侧计算内核的性质有关（在这种情况下根本不会产生任何结果）。

现在的问题是：它确实打印了一些东西......但不是正确的东西。

输出如下：

```
sage: load stochiometric.py
[ 1  0  0  0 -1 -1 -1  0  0  0]
[ 0  1  0  0  1  0  0 -1 -1  0]
[ 0  0  0  0  0  1  0  1  0 -1]
[ 0  0  0  0  0  0  1  0  0 -1]
[ 0  0  0 -1  0  0  0  0  0  1]
[ 0  0 -1  0  0  0  0  0  1  1]
nullr2_or
Free module of degree 10 and rank 4 over Integer Ring
Echelon basis matrix:
[ 1  0  0  1  0  0  1  1 -1  1]
[ 0  1  0  1  0 -1  1  2 -1  1]
[ 0  0  1 -1  0  1 -1 -2  2 -1]
[ 0  0  0  0  1 -1  0  1  0  0]
nullr2_ra
[
(1, 0, 0, 1, 0, 0, 1, 1, -1, 1),
(0, 1, 0, 1, 0, -1, 1, 2, -1, 1),
(0, 0, 1, -1, 0, 1, -1, -2, 2, -1),
(0, 0, 0, 0, 1, -1, 0, 1, 0, 0)
] 
```

仔细检查后，您可以看到生成的内核矩阵（零空间）看起来相似，但并不相同。

有谁知道我需要做什么才能获得与 Matlab 中相同的结果，如果可能的话，如何获得正交结果（在 Matlab 中称为 K_nuo）。

我试图浏览教程、文档等，但到目前为止，还没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:23:49.277

使用 SAGE 内置函数可能有办法做到这一点；我不确定。

但是，如果可以使用基于 numpy/python 的解决方案，那么：

```
import numpy as np

def null(A, eps=1e-15):
    """   
    http://mail.scipy.org/pipermail/scipy-user/2005-June/004650.html
    """
    u, s, vh = np.linalg.svd(A)
    n = A.shape[1]   # the number of columns of A
    if len(s)<n:
        expanded_s = np.zeros(n, dtype = s.dtype)
        expanded_s[:len(s)] = s
        s = expanded_s
    null_mask = (s <= eps)
    null_space = np.compress(null_mask, vh, axis=0)
    return np.transpose(null_space)

st1 = np.matrix([
    [ 1, 0, 0, 0,-1,-1,-1, 0, 0, 0],
    [ 0, 1, 0, 0, 1, 0, 0,-1,-1, 0],
    [ 0, 0, 0, 0, 0, 1, 0, 1, 0,-1],
    [ 0, 0, 0, 0, 0, 0, 1, 0, 0,-1],
    [ 0, 0, 0,-1, 0, 0, 0, 0, 0, 1],
    [ 0, 0,-1, 0, 0, 0, 0, 0, 1, 1]])

K = null(st1)
print(K) 
```

产生正交零空间：

```
[[ 0.59330559  0.13320203  0.30701044 -0.32180406]
 [-0.09297005  0.04333798  0.20286425  0.71195719]
 [ 0.14147329  0.00837169  0.5718718   0.22197807]
 [ 0.35886225  0.16816832 -0.06199711  0.16817506]
 [-0.16275558  0.45177747  0.33887617 -0.46165922]
 [ 0.39719892 -0.48674377  0.03013138 -0.0283199 ]
 [ 0.35886225  0.16816832 -0.06199711  0.16817506]
 [-0.03833668  0.65491209 -0.09212849  0.19649496]
 [-0.21738895 -0.15979664  0.63386891  0.05380301]
 [ 0.35886225  0.16816832 -0.06199711  0.16817506]] 
```

这确认列具有空空间属性：

```
print(np.allclose(st1*K, 0))
# True 
```

这证实了这`K`是正交的：

```
print(np.allclose(K.T*K, np.eye(4)))
# True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T16:22:38.060

为了扩展约翰的出色答案，我认为您对于同一个向量空间只有两个不同的基数。注意他使用`right_kernel`.

```
sage: st1= matrix([
....: [ 1, 0, 0, 0,-1,-1,-1, 0, 0, 0],
....: [ 0, 1, 0, 0, 1, 0, 0,-1,-1, 0],
....: [ 0, 0, 0, 0, 0, 1, 0, 1, 0,-1],
....: [ 0, 0, 0, 0, 0, 0, 1, 0, 0,-1],
....: [ 0, 0, 0,-1, 0, 0, 0, 0, 0, 1],
....: [ 0, 0,-1, 0, 0, 0, 0, 0, 1, 1]])
sage: st2 = matrix([[1,-1, 0, 2],
....: [-1, 1, 1, 0],
....: [ 0, 0, 1, 1],
....: [ 0, 0, 0, 1],
....: [ 1, 0, 0, 0],
....: [ 0,-1, 0, 1],
....: [ 0, 0, 0, 1],
....: [ 0, 1, 0, 0],
....: [ 0, 0, 1, 0],
....: [ 0, 0, 0, 1]])
sage: st2 = st2.transpose()
sage: st2
[ 1 -1  0  0  1  0  0  0  0  0]
[-1  1  0  0  0 -1  0  1  0  0]
[ 0  1  1  0  0  0  0  0  1  0]
[ 2  0  1  1  0  1  1  0  0  1]
sage: st1.right_kernel()
Free module of degree 10 and rank 4 over Integer Ring
Echelon basis matrix:
[ 1  0  0  1  0  0  1  1 -1  1]
[ 0  1  0  1  0 -1  1  2 -1  1]
[ 0  0  1 -1  0  1 -1 -2  2 -1]
[ 0  0  0  0  1 -1  0  1  0  0]
sage: st2.row_space()
Free module of degree 10 and rank 4 over Integer Ring
Echelon basis matrix:
[ 1  0  0  1  0  0  1  1 -1  1]
[ 0  1  0  1  0 -1  1  2 -1  1]
[ 0  0  1 -1  0  1 -1 -2  2 -1]
[ 0  0  0  0  1 -1  0  1  0  0] 
```

您的空间是相同的，只是 Sage 和 Matlab 中的基础不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T15:58:28.757

像这样的东西应该工作：

```
sage: st1= matrix([
[ 1, 0, 0, 0,-1,-1,-1, 0, 0, 0],
[ 0, 1, 0, 0, 1, 0, 0,-1,-1, 0],
[ 0, 0, 0, 0, 0, 1, 0, 1, 0,-1],
[ 0, 0, 0, 0, 0, 0, 1, 0, 0,-1],
[ 0, 0, 0,-1, 0, 0, 0, 0, 0, 1],
[ 0, 0,-1, 0, 0, 0, 0, 0, 1, 1]])
sage: K = st1.right_kernel(); K
Free module of degree 10 and rank 4 over Integer Ring
Echelon basis matrix:
[ 1  0  0  1  0  0  1  1 -1  1]
[ 0  1  0  1  0 -1  1  2 -1  1]
[ 0  0  1 -1  0  1 -1 -2  2 -1]
[ 0  0  0  0  1 -1  0  1  0  0]
sage: M = K.basis_matrix() 
```

该`gram_schmidt`方法给出了一对矩阵。键入`M.gram_schmidt?`以查看文档。

```
sage: M.gram_schmidt() # rows are orthogonal, not orthonormal
(
[     1      0      0      1      0      0      1      1     -1      1]
[    -1      1      0      0      0     -1      0      1      0      0]
[  5/12    3/4      1    1/6      0    1/4    1/6  -1/12    5/6    1/6]
[ 12/31 -25/62   4/31  -9/62      1 -29/62  -9/62  10/31  17/62  -9/62],

[    1     0     0     0]
[    1     1     0     0]
[ -7/6  -3/4     1     0]
[  1/6   1/2 -4/31     1]
)
sage: M.gram_schmidt()[0] # rows are orthogonal, not orthonormal
[     1      0      0      1      0      0      1      1     -1      1]
[    -1      1      0      0      0     -1      0      1      0      0]
[  5/12    3/4      1    1/6      0    1/4    1/6  -1/12    5/6    1/6]
[ 12/31 -25/62   4/31  -9/62      1 -29/62  -9/62  10/31  17/62  -9/62]
sage: M.change_ring(RDF).gram_schmidt()[0] # orthonormal
[  0.408248290464              0.0              0.0   0.408248290464              0.0              0.0   0.408248290464   0.408248290464  -0.408248290464   0.408248290464]
[            -0.5              0.5              0.0              0.0              0.0             -0.5              0.0              0.5              0.0              0.0]
[  0.259237923683   0.466628262629   0.622171016838   0.103695169473              0.0    0.15554275421   0.103695169473 -0.0518475847365   0.518475847365   0.103695169473]
[  0.289303646409   -0.30135796501  0.0964345488031  -0.108488867403   0.747367753224  -0.349575239411  -0.108488867403   0.241086372008   0.204923416206  -0.108488867403] 
```

该矩阵`st1`具有整数项，因此 Sage 将其视为整数矩阵，并尝试尽可能多地使用整数算术，如果失败，则使用有理算术。因此，Gram-Schmidt 正交归一化将失败，因为它涉及取平方根。这就是该方法`change_ring(RDF)`存在的原因：`RDF`代表真正的双场。您可以改为将`st1`from的一个条目更改`1`为`1.0`，然后它将`st1`从一开始就将其视为 RDF 上的矩阵，您无需在`change_ring`任何地方执行此操作。

# c# - 如何使用 c# 从 ASP.NET 中的 JSON 中提取数据

> ID：13175037
> 
> 赞同：0
> 
> 时间：2012-11-01T10:21:53.523
> 
> 标签：c#, asp.net, json

```
{"pometek.net":{"status":"available","classkey":"dotnet"},"pometek.com":{"status":"available","classkey":"domcno"}} 
```

我想以表格形式分配这个。需要帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:24:09.990

您可以使用[Json.NET](http://james.newtonking.com/pages/json-net.aspx)将 json 对象反序列化为 C# 类，然后将该类映射到 asp.net 中的表格格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:34:37.327

你不应该需要第三方库；开箱即用[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)可以处理这个问题。

```
class Item {
    public string status { get; set; }
    public string classkey { get; set; }
}

var jss = new System.Web.Script.Serialization.JavaScriptSerializer();
var input = "{\"pometek.net\":{\"status\":\"available\",\"classkey\":\"dotnet\"},\"pometek.com\":{\"status\":\"available\",\"classkey\":\"domcno\"}}";
var results = jss.Deserialize<Dictionary<string, Item>(input);
var query = results["pometek.net"].status; // = "available" 
```

将其显示为表格是一个单独的步骤。

# asp.net-mvc - 如何动态绑定kendo mvc ui下拉列表

> ID：13175040
> 
> 赞同：4
> 
> 时间：2012-11-01T10:22:01.790
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用 Kendo UI mvc 开发 asp.net mvc。我有两个剑道下拉列表。一个用于诊所列表，另一个用于选定诊所的患者列表。但是使用级联下拉列表在诊所和患者之间没有直接关系。为此，我在下拉列表更改事件中使用了 ajax 调用并获取患者列表。这是我列出诊所的第一个下拉列表

```
 @(
  Html.Kendo().DropDownList()
  .Name("ddlClinics")
  .Events(e=>e.Change("ChangeClinic"))
  .BindTo(new SelectList((List<Account.Entities.Clinic>)ViewBag.lstClinic,
 "ClinicID", "ClinicName"))) 
```

这是我的第二个列表患者下拉列表

```
@(
 Html.Kendo().DropDownList()
.Name("ddlPatients")
.BindTo(new SelectList((List<Patient>)ViewBag.Patients, 
"PatId", "PatName")))) 
```

我想在第一个下拉列表更改时将患者列表动态绑定到第二个下拉列表，

```
function ChangeClinic()
{
$.ajax({
url: '/Messages/GetPatient',
 type: 'Post',
 data: { email: '@User.Identity.Name' },
 cache: false,
 success: function (result) {
 var ddlPatients = $('#ddlPatients').data('kendoDropDownList');
 var main = [];
 $.each(result, function (k, v) {
 main.push({ "PatId": v.PatId, "PatName": v.PatName });
  });
  ddlPatients.dataTextField = "PatName";
  ddlPatients.dataValueField = "PatId";
  ddlPatients.dataSource.data(main);
  ddlPatients.reload();
 }
 });
} 
```

我可以将列表绑定到下拉列表，但所有项目都显示为**“未定义”**。所以请指导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T21:38:14.033

据我所知，诊所和患者之间存在关系，因此您应该能够使用包装器中提供的**[CascadeFrom](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/DropDownListBuilder) ("DropDownList1")**。我们以类似的方式使用级联下拉列表来处理学区和学校之间的关系：

```
@(Html.Kendo().DropDownList()
            .Name("District")
            .HtmlAttributes(new { style = "width:300px;" })
            .BindTo(ViewBag.districts)
            .DataTextField("DistrictName")
            .DataValueField("DistrictID")
            .OptionLabel("Select District")
)
@(Html.Kendo().DropDownList()
            .Name("School")
            .HtmlAttributes(new { style = "width:300px;" })
            .CascadeFrom("District")
            .BindTo(ViewBag.schools)
            .DataTextField("SchoolName")
            .DataValueField("SchoolID")
            .OptionLabel("Select School")
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T20:14:28.873

而不是创建这样对数据源无用的数组：

```
success: function (result) {
 var ddlPatients = $('#ddlPatients').data('kendoDropDownList');
 var main = [];
 $.each(result, function (k, v) {
 main.push({ "text": v.PatId, "value": v.PatName });
  });

  ddlPatients.dataSource.data(main);
 }
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:27:17.160

如果要根据第一个 DropDown 值填充第二个 DropDown。Telerik 提供，

```
.CascadeTo("DropDownList2") 
```

有关详细信息，请参阅以下链接。

[Telerik 下拉列表中下拉的级联](http://demos.telerik.com/aspnet-mvc/razor/combobox/cascadingcombobox)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-10T08:10:26.950

如果您不使用

```
.DataSource(source =>
                        {
                            source.Read(read =>
                            {
                                read.Action        ("FunctionName", "ControllerName").Data("filterDropdown1");
                            }).ServerFiltering(true);
                        })
.CascadeFrom("Dropdown1") 
```

第二个下拉列表定义中的属性，并且您正在使用上面提到的定义。IE：-

```
@(
 Html.Kendo().DropDownList()
.Name("ddlPatients")
.BindTo(new SelectList((List<Patient>)ViewBag.Patients,"PatId", "PatName"))
) 
```

然后您可以直接在ajax post的成功功能中将数据绑定到第二个下拉列表。

```
 function ChangeClinic()
        {
        $.ajax({
        url: '/Messages/GetPatient',
         type: 'Post',
         data: { email: '@User.Identity.Name' },
         cache: false,
         success: function (result) {
         $('#ddlPatients').data('kendoDropDownList').dataSource.data(result);
             //ddlPatients.reload();

  }
         });
        } 
```

@注意：- 1）结果值应该包含新患者的列表，其属性为“PatId”和“PatName”，基于传递给GetPatient控制器中的“Messages”函数的参数email，并且不需要ddlpatients。 reload()，实际上不支持**.reload()**，它会破坏执行，所以不要使用.reload()。

# ajax - 如何通过 ajax 调用在 struts 2 动作类中获取 json？

> ID：13175042
> 
> 赞同：0
> 
> 时间：2012-11-01T10:22:06.153
> 
> 标签：ajax, json, struts2

我有一个带有 struts 2 的应用程序，我想使用 ajax 调用操作类来感知 json。我的 ajax 看起来像这样：

```
var data = {{userName:"userName",password:"password",userId:"userId"},
{userName:"userName",password:"password",userId:"userId"},
{userName:"userName",password:"password",userId:"userId"}
}
 var users= JSON.stringify(data);
                            $.ajax({
                                data: users,
                                type: "POST", 
                                url: "http://localhost:8080/Example_Project/Example.action",
                                contentType: "application/json",
                                dataType: "json" 

                                 })
Action.class

public class ExampleAction extends ActionSupport
                {
                private List<User> users;

                 public List<User> getUsers() {
                return users;
            }
             public void setUsers(List<User> users) {
                this.users = users;
            }

            public String addUsers(){

            //code to inser user list
            return "success";
            }
                }

User.java       

 public class User{

                private String ;//getters and setters for it
                private String password;//getters and setters for it
                private Integer userId;//getters and setters for it

                }

struts.xml

   <struts>
        <package name="default" extends="struts-default,json-default" >
            <action name="Example" class="com.json.action.ExampleAction" method="addUsers">
                    <result name="success">/success.jsp</result>
            </action>

        </package>
    </struts> 
```

我正在使用 struts2-core 2.3.1.2、struts2-json-plugin 2.3.1.2 和 json-rpc 1.0。如何在操作类中获取用户数据。使用上面的代码，我在操作类中的用户变量中得到了 null 。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:23:42.923

您需要在 struts.xml 中定义结果类型，如下所示。

```
 <result type="json" /> 
```

如果您仍然遇到任何问题，请告诉我

# attributes - 删除 Magento 1.7 默认属性集中的礼物选项属性

> ID：13175045
> 
> 赞同：0
> 
> 时间：2012-11-01T10:22:19.683
> 
> 标签：attributes, magento

创建产品时，我不想看到“礼物选项”和“重复配置文件”。
编辑默认属性集时，我可以将这些组移动到未分配的属性。但保存和编辑后，它们又出现了。

是否可以 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:10:25.423

如果您不想看到“礼物选项”和“重复配置文件”，您可以做一件事。
你可以删除它。
第 1 步：首先将内部属性移动到另一个组（拖放）。
第 2 步：然后您可以通过单击“删除选定组”将其删除（即礼物选项和重复配置文件）。

# php - 在应该更改不同数据库中表中的值的数据库中触发？

> ID：13175046
> 
> 赞同：1
> 
> 时间：2012-11-01T10:22:20.327
> 
> 标签：php, mysql

如何创建由数据库中的更改激活的触发器，该更改会更改不同数据库中表中的值？

一个数据库包含具有登录信息（用户名、密码）的表。当用户登录时，另一个数据库中的表中的值将被更新。

这怎么可能实现？

**[编辑]**

对不起，是的，两个不同的数据库在同一个数据库服务器上。

**[更新]**

我有`mainDB.users`桌子：

```
username | password | NumberLogins
---------|----------|--------------
         |          | 
```

和一张`otherDB.history`桌子：

```
username | points
---------|---------
         | 
```

`points`用户登录后如何增加相应的值？

```
USE `mainDB`;

DROP TRIGGER IF EXISTS `updateUserInfo`;

DELIMITER ||

CREATE TRIGGER `updateUserInfo` 
    BEFORE UPDATE ON `users` 
    FOR EACH ROW

    BEGIN
        IF NEW.`NumberLogins`=5 THEN

            UPDATE `otherDB`.`history`
            SET `points` = `points` + 1,
            WHERE 
              `username`=NEW.`username`;

        END IF;

    END || 
```

我不断收到此错误。

```
 #1442 - Can't update table 'history' in stored function/trigger because it is already used by statement which invoked this stored function/trigger. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:26:28.973

我假设两个数据库都在同一台服务器上。

```
USE name_of_db_trigger_to_be_in;
delimiter ||
create trigger.......

   UPDATE other_db.other_table
   SET other_guys = 'hohoho';

end|| 
```

# php - PHP * RAND() 限制 x,y

> ID：13175047
> 
> 赞同：-2
> 
> 时间：2012-11-01T10:22:21.757
> 
> 标签：php, mysql, mysqli

1）我有以下（包括）显示来自我的数据库（phprealty）的随机记录，带有两个联合表（phprealty_propert + phprealty_prop_img）。代码工作没有任何问题。但是，当我将限制设置为 3 时，我得到 2 条记录，这就是为什么我将限制设置为 4，所以我得到 3 条记录。我应该保持原样吗？

2) 由于我是 PHP 新手，你认为这段代码容易受到攻击，因此需要某种保护吗？如果是这样，请告知在使用 PHP 显示数据时如何保护网页。

先感谢您。

```
<?php
$pid = 3;
$myConnection = new mysqli("localhost", "root", "", "phprealty");
$sqlCommand = "SELECT phprealty_property.*, phprealty_prop_img.p_id, phprealty_prop_img.fn FROM phprealty_property INNER JOIN phprealty_prop_img ON phprealty_property.id = phprealty_prop_img.p_id WHERE phprealty_prop_img.def='1' AND phprealty_property.type = $pid"; 
$query = mysqli_query($myConnection, $sqlCommand) or die (mysqli_error());

$sqlCommand .= " ORDER BY RAND() LIMIT 0,4";
$result = mysqli_query($myConnection, $sqlCommand);

$Displayproperty = '';
$row = mysqli_fetch_array($result);
$id = $row["id"];
$title = $row["title"];
while ($row2 = mysqli_fetch_array($result)){
$img = $row2["fn"];
$thumb = 'th_' . $img;
$Displayproperty .= '
<div class="random">
<a href="display.php?id=' . $id . '"><img src="../falcon/listImgs/' . $thumb . '" />   </a></div>';
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:29:11.457

只需删除

```
$row = mysqli_fetch_array($result); 
```

然后改变这两行

```
$id = $row["id"];
$title = $row["title"]; 
```

进入

```
$id = $row2["id"];
$title = $row2["title"]; 
```

并将两行都放在*while*语句之后。

现在，在您的代码中，display.php 将始终显示相同的代码，因为**$id**不会改变。

你的代码工作正常吗？mysqli_query 的第一个参数应该是**$sqlCommand**，而不是**$myConnection**。

如果可以，尽量不要在 Mysql 上使用 root/empty_password。

希望能帮助到你，

# jquery - 是 :focus 返回总是假的

> ID：13175048
> 
> 赞同：0
> 
> 时间：2012-11-01T10:22:26.903
> 
> 标签：jquery

我创建了一个脚本，我想知道使用以下代码是否关注某个特定领域：

```
console.log($('#element_title').is(':focus')); 
```

问题是无论该领域是否是焦点，我总是得到“错误”的结果。我做错了什么吗？

我尝试检查的元素是一个文本字段。

* * *

问题解决了，推荐了“adeneo”。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:25:12.897

我相信这就是你想要的：

```
$('#element_title').focus(function()
{
console.log('I have the focus now!');
}); 
```

# iphone - 这种情况适合单身人士吗？

> ID：13175049
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:22:44.720
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

快速提问，我已经编写objective-c 大约2 个月了，但是我精通许多其他语言。

我想知道以下情况是否适合单例，如果是，是否有比我当前的代码更合适的方式来处理单例的初始化？

我有许多其他类可以访问的单例、敌人数组。这是在我的敌人类中，敌人是许多敌人特定类的直接父级。每个特定于敌人的类在它自己的初始化期间访问 initWithSpriteFile，这反过来又将敌人添加到enemysArray 单例中。

```
// Singletons
static NSMutableArray *enemiesArray;

// Methods
+(NSMutableArray *) sharedEnemies
{
    if (!enemiesArray) { enemiesArray = [[NSMutableArray alloc] init]; }
    return enemiesArray;
}

+(id) initWithSpriteFile:(NSString *) spriteFile;
{
    if (!enemiesArray) { enemiesArray = [[NSMutableArray alloc] init]; }

    if ((self = [super spriteWithFile:spriteFile])) {
        [enemiesArray addObject:self];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:36:38.293

敌人是 CCNode 对象（如 CCSprite）吗？然后将这些存储在单例中会带来非常真实的内存泄漏危险，因为在更改场景时您可能仍然持有对场景节点的引用。这将使之前的场景留在记忆中。您应该将该代码放在场景的类中。这里不需要使用单例。

# redis - 如何使用 Redis 实现速率限制

> ID：13175050
> 
> 赞同：24
> 
> 时间：2012-11-01T10:22:49.277
> 
> 标签：redis, rate-limiting

我使用`INCR`并`EXPIRE`实现速率限制，例如每分钟 5 个请求：

```
if EXISTS counter
    count = INCR counter
else
    EXPIRE counter 60
    count = INCR counter

if count > 5
    print "Exceeded the limit" 
```

但是，在第一分钟的最后一秒可以发送 5 个请求，在第二分钟的第一秒可以再发送 5 个请求，即两秒内发送 10 个请求。

如何避免这个问题？

* * *

更新：我想出了这个列表实现。这是一个好方法吗？

```
times = LLEN counter
if times < 5
    LPUSH counter now()
else
    time = LINDEX counter -1
    if now() - time < 60
        print "Exceeded the limit"
    else
        LPUSH counter now()
LTRIM counter 5 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T11:35:51.833

您可以从“最后一分钟的 5 个请求”切换到“第 x 分钟的 5 个请求”。这样就可以做到：

```
counter = current_time # for example 15:03
count = INCR counter
EXPIRE counter 60 # just to make sure redis doesn't store it forever

if count > 5
  print "Exceeded the limit" 
```

如果您想继续使用“最后一分钟的 5 个请求”，那么您可以这样做

```
counter = Time.now.to_i # this is Ruby and it returns the number of milliseconds since 1/1/1970
key = "counter:" + counter
INCR key
EXPIRE key 60

number_of_requests = KEYS "counter"*"
if number_of_requests > 5
  print "Exceeded the limit" 
```

如果您有生产限制（尤其是性能），[不建议](http://redis.io/commands/keys)使用`KEYS`关键字。我们可以使用*集合*来代替：

```
counter = Time.now.to_i # this is Ruby and it returns the number of milliseconds since 1/1/1970
set = "my_set"
SADD set counter 1

members = SMEMBERS set

# remove all set members which are older than 1 minute
members {|member| SREM member if member[key] < (Time.now.to_i - 60000) }

if (SMEMBERS set).size > 5
  print "Exceeded the limit" 
```

这都是伪 Ruby 代码，但应该给你的想法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-10T17:28:58.893

进行速率限制的规范方法是通过[漏桶算法](https://en.wikipedia.org/wiki/Leaky_bucket)。使用计数器的缺点是用户可以在计数器重置后立即执行一堆请求，即针对您的情况在下一分钟的第一秒执行 5 次操作。漏桶算法解决了这个问题。简而言之，您可以使用有序集合来存储您的“漏桶”，使用操作时间戳作为填充它的键。

查看这篇文章以获得确切的实现： [使用 Redis 排序集实现更好的速率限制](https://engineering.classdojo.com/blog/2015/02/06/rolling-rate-limiter/)

**更新：**

还有另一种算法，相比漏桶有一些优势。它被称为[通用信元速率算法](https://en.wikipedia.org/wiki/Generic_cell_rate_algorithm)。这是它在更高级别的工作方式，如[速率限制、单元和 GCRA 中所述](https://brandur.org/rate-limiting)：

> GCRA 的工作原理是通过称为“理论到达时间”（TAT）的时间跟踪剩余限制，该时间通过将表示其成本的持续时间添加到当前时间来在第一个请求上播种。成本计算为我们的“排放间隔”（T）的乘数，它是从我们希望桶重新装满的速率得出的。当任何后续请求进来时，我们取现有的 TAT，从中减去一个表示限制的总突发容量的固定缓冲区 (τ + T)，并将结果与​​当前时间进行比较。此结果表示下一次允许请求。如果是过去，我们允许传入的请求，如果是在未来，我们不允许。请求成功后，通过添加 T 来计算新的 TAT。

GitHub上有一个实现此算法的redis模块：[https ://github.com/brandur/redis-cell](https://github.com/brandur/redis-cell)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-11T08:22:38.913

这是一个已经回答的老问题，但这是我从这里获得一些灵感的实现。我正在为 Node.js使用[ioredis](https://github.com/luin/ioredis)

这是滚动窗口时间限制器的所有异步但无竞争条件（我希望）的荣耀：

```
var Ioredis = require('ioredis');
var redis = new Ioredis();

// Rolling window rate limiter
//
// key is a unique identifier for the process or function call being limited
// exp is the expiry in milliseconds
// maxnum is the number of function calls allowed before expiry
var redis_limiter_rolling = function(key, maxnum, exp, next) {
  redis.multi([
    ['incr', 'limiter:num:' + key],
    ['time']
  ]).exec(function(err, results) {
    if (err) {
      next(err);
    } else {
      // unique incremented list number for this key
      var listnum = results[0][1];
      // current time
      var tcur = (parseInt(results[1][1][0], 10) * 1000) + Math.floor(parseInt(results[1][1][1], 10) / 1000);
      // absolute time of expiry
      var texpiry = tcur - exp;
      // get number of transacation in the last expiry time
      var listkey = 'limiter:list:' + key;
      redis.multi([
        ['zadd', listkey, tcur.toString(), listnum],
        ['zremrangebyscore', listkey, '-inf', texpiry.toString()],
        ['zcard', listkey]
      ]).exec(function(err, results) {
        if (err) {
          next(err);
        } else {
          // num is the number of calls in the last expiry time window
          var num = parseInt(results[2][1], 10);
          if (num <= maxnum) {
            // does not reach limit
            next(null, false, num, exp);
          } else {
            // limit surpassed
            next(null, true, num, exp);
          }
        }
      });
    }
  });
}; 
```

这是一种锁定式速率限制器：

```
// Lockout window rate limiter
//
// key is a unique identifier for the process or function call being limited
// exp is the expiry in milliseconds
// maxnum is the number of function calls allowed within expiry time
var util_limiter_lockout = function(key, maxnum, exp, next) {
  // lockout rate limiter
  var idkey = 'limiter:lock:' + key;
  redis.incr(idkey, function(err, result) {
    if (err) {
      next(err);
    } else {
      if (result <= maxnum) {
        // still within number of allowable calls
        // - reset expiry and allow next function call
        redis.expire(idkey, exp, function(err) {
          if (err) {
            next(err);
          } else {
            next(null, false, result);
          }
        });
      } else {
        // too many calls, user must wait for expiry of idkey
        next(null, true, result);
      }
    }
  });
}; 
```

[这是功能的要点](https://gist.github.com/ChisholmKyle/b44fa64d5252eee59041)。如果您发现任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-25T14:21:46.673

这是我[`leaky bucket`](https://en.wikipedia.org/wiki/Leaky_bucket)使用 Redis 实现的速率限制[`Lists`](https://redis.io/commands#list)。

**注意：**以下代码是 中的示例实现`php`，您可以用自己的语言实现。

```
$list = $redis->lRange($key, 0, -1); // get whole list
$noOfRequests = count($list);
if ($noOfRequests > 5) {
    $expired = 0;
    foreach ($list as $timestamp) {
        if ((time() - $timestamp) > 60) { // Time difference more than 1 min == expired
            $expired++;
        }
    }
    if ($expired > 0) {
        $redis->lTrim($key, $expired, -1); // Remove expired requests
        if (($noOfRequests - $expired) > 5) { // If still no of requests greater than 5, means fresh limit exceeded.
            die("Request limit exceeded");
        }
    } else { // No expired == all fresh.
        die("Request limit exceeded");
    }
}
$redis->rPush($key, time()); // Add this request as a genuine one to the list, and proceed. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-02T18:28:12.710

注意：以下代码是 Java 中的示例实现。

```
private final String COUNT = "count";

@Autowired
private StringRedisTemplate stringRedisTemplate;
private HashOperations hashOperations;

@PostConstruct
private void init() {
    hashOperations = stringRedisTemplate.opsForHash();
}

@Override
public boolean isRequestAllowed(String key, long limit, long timeout, TimeUnit timeUnit) {
    Boolean hasKey = stringRedisTemplate.hasKey(key);
    if (hasKey) {
        Long value = hashOperations.increment(key, COUNT, -1l);
        return value > 0;
    } else {
        hashOperations.put(key, COUNT, String.valueOf(limit));
        stringRedisTemplate.expire(key, timeout, timeUnit);
    }
    return true;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-28T23:27:40.060

您的更新是一个非常好的算法，尽管我做了一些更改：

```
times = LLEN counter
if times < 5
    LPUSH counter now()
else
    time = LINDEX counter -1
    if now() - time <= 60
        print "Exceeded the limit"
    else
        LPUSH counter now()
        RPOP counter 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-29T19:20:46.487

与其他 Java 答案类似，但往返 Redis 的次数更少：

```
 @Autowired
    private StringRedisTemplate stringRedisTemplate;
    private HashOperations hashOperations;

    @PostConstruct
    private void init() {
        hashOperations = stringRedisTemplate.opsForHash();
    }

    @Override
    public boolean isRequestAllowed(String key, long limit, long timeout, TimeUnit timeUnit) {
        Long value = hashOperations.increment(key, COUNT, 1l);
        if (value == 1) {
            stringRedisTemplate.expire(key, timeout, timeUnit);
        }
        return value > limit;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-07T02:20:49.687

这是另一种方法。如果目标是将请求数限制为每 Y 秒的 X 个请求，并且计时器在收到第一个请求时开始计时，那么您可以为要跟踪的每个用户创建 2 个键：一个用于第一个请求的时间已收到，另一个用于请求的数量。

```
key = "123"
key_count = "ct:#{key}"
key_timestamp = "ts:#{key}"

if (not redis[key_timestamp].nil?) && (not redis[key_count].nil?) && (redis[key_count].to_i > 3)
    puts "limit reached"
else
    if redis[key_timestamp].nil?
        redis.multi do
            redis.set(key_count, 1)
            redis.set(key_timestamp, 1)
            redis.expire(key_timestamp,30)
        end
    else
        redis.incr(key_count)
    end
    puts redis[key_count].to_s + " : " + redis[key_timestamp].to_s + " : " + redis.ttl(key_timestamp).to_s
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-28T15:16:58.493

> 最后间隔/滑动窗口中的请求

间隔 == 接受请求数（吞吐量）的时间量
吞吐量 == 每个间隔的请求数
RequestTimeList == 每个请求时间添加到此列表

```
// Remove older request entries
while (!RequestTimeList.isEmpty() && (now() - RequestTimeList.get(0)) > interval) {

    RequestTimeList.remove(0)
}

if (RequestTimeList.length < throughput) {

    RequestTimeList.add(now())

} else {

    throw err;
} 
```

> 间隔/固定窗口中的请求

我尝试过使用 LIST、EXPIRE 和 PTTL

如果 tps 为每秒 5 次，则
吞吐量 = 5
rampup = 1000 (1000ms = 1sec)
间隔 = 200ms

```
local tpsKey = KEYS[1]
local throughput = tonumber(ARGV[1])
local rampUp = tonumber(ARGV[2])
-- Minimum interval to accept the next request.
local interval = rampUp / throughput
local currentTime = redis.call('PTTL', tpsKey)

--  -2 if the key does not exist, so set an year expiry
if currentTime == -2 then
    currentTime = 31536000000 - interval
    redis.call('SET', tpsKey, 31536000000, "PX", currentTime)
end

local previousTime = redis.call('GET', tpsKey)

if (previousTime - currentTime) >=  interval then
       redis.call('SET', tpsKey, currentTime, "PX", currentTime)
       return true
else
       redis.call('ECHO',"0\. ERR - MAX PERMIT REACHED IN THIS INTERVAL")
       return false
end 
```

List 的另一种方式

```
local counter = KEYS[1]
local throughput = tonumber(ARGV[1]) 
local rampUp = tonumber(ARGV[2])
local interval = rampUp / throughput
local times = redis.call('LLEN', counter)

if times == 0 then
    redis.call('LPUSH', counter, rampUp)
    redis.call('PEXPIRE', counter, rampUp)
    return true
elseif times < throughput then
    local lastElemTTL = tonumber(redis.call('LINDEX', counter, 0))
    local currentTTL = redis.call('PTTL', counter)
    if  (lastElemTTL-currentTTL) < interval then
        return false
    else
        redis.call('LPUSH', counter, currentTTL)
        return true
     end
else
    return false
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-01T00:52:19.497

这足够小，您可能会逃脱不散列它。

```
local f,k,a,b f=redis.call k=KEYS[1] a=f('incrby',k,ARGV[1]) b=f('pttl',k) if b<0 then f('pexpire',k,ARGV[2]) end return a 
```

参数是：

`KEYS[1]`= 键名，可以是速率限制的动作，例如
`ARGV[1]`= 增加量，通常为 1，但您可以在客户端上每 10 或 100 毫秒间隔进行批处理
`ARGV[2]`= 窗口，以毫秒为单位，以限制速率
`Returns`：新的增量值，然后可以将其与代码中的值进行比较，以查看它是否超过了速率限制。

使用此方法不会将 ttl 设置回基值，它将继续向下滑动，直到密钥过期，此时它将`ARGV[2]`在下一次调用时使用 ttl 重新开始。

# iphone - 使用 Storyboard Tabbar 应用程序在 iPhone 中动态更改选项卡

> ID：13175053
> 
> 赞同：0
> 
> 时间：2012-11-01T10:22:53.530
> 
> 标签：iphone, objective-c, uitabbarcontroller, storyboard, tabbarcontroller

> **可能重复：**
> [在 Xcode 中以编程方式按下 UITabBar 按钮](https://stackoverflow.com/questions/1795407/programmatically-pressing-a-uitabbar-button-in-xcode)

我在主标签栏控制器中有四个标签。在第一个选项卡上，当用户使用设备 ID 注册时显示“仪表板”页面。

对于不存在的用户，它会提示注册消息。通过单击“确定”按钮，我想跳转到用于设置模块的第 4 个选项卡。

那么，如何设置 Tabbar 索引，就像使用旧的早期版本和 Tabbar 中的导航一样？

请告诉我任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:44:09.613

执行以下代码行以获取 tabBar 以显示时选择的第 4 个选项卡开始

```
 [tabBarController setSelectedIndex:3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:09:45.107

如果您在 Storyboard 中使用基于 Tabbar 的应用程序，则必须先实现此代码。

```
UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController; 
```

然后，

```
[tabBar setSelectedIndex:3]; 
```

正如你所说：AppleDelegate

# c++ - 不能 push_back 进入类型为 std::vector 数组的静态成员

> ID：13175060
> 
> 赞同：0
> 
> 时间：2012-11-01T10:23:36.820
> 
> 标签：c++, stl, static-members

我有以下设置：

具有**静态成员**的类，如下所示：
`static std::vector<int> m_Some[3];`

**问题是**，我不能`m_Some[0].push_back(x)`用它。它在's
中触发错误，然后在. 但不知何故，调用堆栈对于进一步的操作是错误的，所以我看不到真正发生的事情。`<vector>``insert()``operator-`

**如果我** `m_Some[0].reserve(1);` **以前** `push_back`做过，
那么我可以做1 `push_back`，但在第二个中失败了`push_back`。

我完全不知道为什么它不能`push_back`而且必须`reserve`首先......
而且我的活动不能`push_back`超过我的大小`reserve`。

我尝试了一个具有相同类型数组的**局部变量**`push_back`，它在.

我正在使用 VS2008 进行编译。

有谁知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:17:39.730

你是**从另一个 static 的构造函数调用 push_back**吗？在哪种情况下，您的向量可能尚未构建？可能不是，但这个问题没有太多要说的。– **J99** 44 分钟前

也许他正在经历一场**静态初始化订单惨败**。– **akappa** 43 分钟前

@J99，是的，**我在全局变量的构造函数中调用它**......！（在 .cpp 中声明）（但不是静态的）。我认为这是问题所在，我将尝试修改代码并查看结果！– Marson Mao 33 分钟前

@J99 和 akappa：确切的问题是，**向量初始化是在我调用构造函数之后**......我会尝试解决这个问题。谢谢！！（如何将评论标记为答案？！） – Marson Mao 27 分钟前

@MarsonMao你不能。只需回答您自己的问题并将其标记为已接受 – 又名 8 分钟前

以上就是答案！谢谢您的帮助 ：）

# php - 从 skrill 服务器获取 SESSION_ID

> ID：13175062
> 
> 赞同：2
> 
> 时间：2012-11-01T10:23:42.430
> 
> 标签：php, session, curl, payment-gateway

请帮助我，我遇到了一些麻烦。我想做的是将moneybooker 集成到我的网站中。我研究了 2.3.2 主题中的“商家集成手册 6.17 版”，我必须通过邮寄支付参数来创建和获取 SESSION_ID 表单 skrill 服务器并获取 SESSION_ID，此会话将保存我的交易信息，如金额和我的帐户。

通过使用下面的代码，我无法从他们的服务器检索 SESSION_ID。

```
$url = "https:www.moneybookers.com/app/payment.pl";

$post_data = array (  
        "prepare_only" => 1,  
        "amount" => 10,
        "currency" => 'USD',
        "detail1_description" => "Description",
        "detail1_text" => "Text",
        "pay_to_email" => "****my**accoutn@yahoo.com" 
    );  

$head = get_web_page($url, $post_data);
echo "<pre>";
print_r($head);
echo "</pre>";

function get_web_page( $url, $post_data )
{
    $options = array(
        CURLOPT_RETURNTRANSFER => true,     // return web page
        CURLOPT_HEADER         => false,    // don't return headers
        CURLOPT_FOLLOWLOCATION => true,     // follow redirects
        CURLOPT_ENCODING       => "",       // handle all encodings
        CURLOPT_USERAGENT      => "spider", // who am i
        CURLOPT_AUTOREFERER    => true,     // set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
        CURLOPT_TIMEOUT        => 120,      // timeout on response
        CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
    );

    $ch      = curl_init( $url );
    curl_setopt_array( $ch, $options );
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
     //we are doing a POST request  
    curl_setopt($ch, CURLOPT_POST, 1);  
     //adding the post variables to the request  
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;
    $header['content'] = $content;
    return $header;
} 
```

上面的代码适用于其他网站，但不适用于 Moneybooker。但是当我提交简单的 html 表单时，会创建并显示会话 ID，但我没有被重定向到我的网站！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:52:09.453

尝试添加 cookie 支持

```
$fh = fopen("cookies.txt", "a+") or die("Can't open file!");
fclose($fh);

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:09:30.557

当您使用数组设置[CURLOPT_POSTFIELDS](http://lt1.php.net/manual/en/function.curl-setopt.php)时，请求将作为 multipart/form-data 发送，请尝试将该行更改为：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post_data)); 
```

# winforms - 防止列表框从列表背景闪烁

> ID：13175064
> 
> 赞同：1
> 
> 时间：2012-11-01T10:23:51.973
> 
> 标签：winforms, listbox

我有一个 DrawMode = OwnerDraw 的列表框。

我注意到在调用我的自定义 DrawItem 之前绘制列表框背景导致的闪烁。因此，即使我使用单个 e.Graphics.FillRectangle 调用它仍然会导致闪烁。

有什么办法可以防止这种闪烁，可能会阻止绘制列表框背景色？

# vba - 根据当前周打开文件

> ID：13175066
> 
> 赞同：1
> 
> 时间：2012-11-01T10:23:55.517
> 
> 标签：vba, excel, automation, excel-2007

我有一个工作簿，例如，我们将称之为 Monthly Dashboard，其中的信息完全由一个名为 Trial Balance 的单独工作簿创建，除了一个单元格。这些数据将从名为 Project Control 的每周工作簿中收集。项目控制文件以 YYYYWProjectControl.xlsx 格式保存，其中 YYYY 指的是当年，W 指的是周。

需要填写的单元格是每周表格上迄今为止所有项目的总销售额。我需要做的是以编程方式打开最后创建的项目控件并计算出这个销售数字并关闭/保存。

关闭和保存都作为以前项目的一部分完成，但我需要知道如何检查当前周数是什么以及检查最后创建的文件是哪个。有谁知道如何做到这一点？如果是这样，还请记住，随着年底临近 1 月，您需要搜索最后创建的 2013 年项目控制，如果没有，则需要搜索 2012 年。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:48:15.187

根据您是指实际周还是财政（财务）周，您可以使用这两个函数中的任何一个来为您计算：

财政周：

```
Function FiscalWeek(dtDate As Variant)

Dim dtFiscal    As Date
Dim dtFstMon    As Date
Dim i           As Integer

    'Ensure we are working with a valid date
    If Not IsDate(dtDate) Then
        FiscalWeek = "Invalid Date"
        Exit Function
    End If

    'Strip out any timestamps
    dtFiscal = DateSerial(Year(dtDate), Month(dtDate), Day(dtDate))

    'Determine first Monday of April for given year
    i = 1
    Do Until Weekday(DateSerial(Year(dtFiscal), 4, i), 2) = 1
        i = i + 1
    Loop

    dtFstMon = DateSerial(Year(dtFiscal), 4, i)

    'Work out the difference in weeks from April for the relevant year
    Select Case dtFiscal
        Case Is < dtFstMon
            FiscalWeek = DateDiff("WW", DateSerial(Year(dtFiscal) - 1, 4, 1), dtFiscal, 2)
        Case Else
            FiscalWeek = DateDiff("WW", DateSerial(Year(dtFiscal), 4, 1), dtFiscal, 2) + IIf(i = 1, 1, 0)
    End Select

End Function 
```

或实际周：

```
Function ActualWeek(dtDate As Variant)

Dim dtActual    As Date
Dim dtFstMon    As Date
Dim i           As Integer

    'Ensure we are working with a valid date
    If Not IsDate(dtDate) Then
        ActualWeek = "Invalid Date"
        Exit Function
    End If

    'Strip out any timestamps
    dtActual = DateSerial(Year(dtDate), Month(dtDate), Day(dtDate))

    'Determine first Monday of January for given year
    i = 1
    Do Until Weekday(DateSerial(Year(dtActual), 1, i), 2) = 1
        i = i + 1
    Loop

    dtFstMon = DateSerial(Year(dtActual), 1, i)

    'Work out the difference in weeks from January for the relevant year
    Select Case dtActual
        Case Is < dtFstMon
            ActualWeek = DateDiff("WW", DateSerial(Year(dtActual) - 1, 1, 1), dtActual, 2)
        Case Else
            ActualWeek = DateDiff("WW", DateSerial(Year(dtActual), 1, 1), dtActual, 2) + IIf(i = 1, 1, 0)
    End Select

End Function 
```

# asp.net-mvc-3 - 在控制器中从 MVC3 部分视图访问模型数据，而不在视图中显式传递它

> ID：13175067
> 
> 赞同：2
> 
> 时间：2012-11-01T10:23:57.090
> 
> 标签：asp.net-mvc-3, view, model, controller, httprequest

我有一个用模型调用的 MVC3 局部视图。

```
@model SomeModel 
```

该模型有一个 Id 参数。

在我调用的视图中`@Html.Action("SomeMethod", "SomeController")`

有什么方法可以访问 SomeMethod ActionResult 中的 Id 参数而不像这样显式传递它：

```
@Html.Action("SomeMethod", "SomeController", new {"Id" = Model.Id}) 
```

问题是我无法更改部分视图的源代码。我需要 Id 值。Id 未在局部视图中使用，因此我无法通过 JavaScript 访问它。模型是否传递给了 HttpContext，有什么方法可以传递吗？

**编辑：**问题是我正在为[nopCommerce开发一个插件，就像](http://nopcommerce.com/)[nop-templates](http://www.nop-templates.com/)提供的插件一样。[nopCommerce](http://nopcommerce.com/)是开源软件，我可以更改代码，但是插件会单独发货，所以不建议在[nopCommerce](http://nopcommerce.com/)视图中进行更改，我所指的视图就是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:33:49.107

当您无法更改局部视图的源代码时，就无法获取控制器中的 id 值。它完全解耦，这是 MVC 模式的一个主要点。您必须明确地将其作为参数传递给您的操作。一个肮脏的解决方法可能是将该 id 存储在`Session`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:24:36.727

在我的项目中，我像这样按国家 ID 填写我的状态下拉列表

在我看来

我像这样将国家/地区 ID 传递给我的控制器 ActionResult

```
<script type="text/javascript">
    function cascadingdropdown() {          
        var countryID = $('#countryID').val();
        $.ajax({
            url: "@Url.Content("~/City/State")",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                alert(data);
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        });
    } 
</script> 
```

在我的控制器中我有行动

```
public JsonResult State(int countryId)
{                
 var stateList = CityRepository.GetList(countryId);
 return Json(stateList, JsonRequestBehavior.AllowGet);
} 
```

我想这会对你有所帮助....

# javascript - javascript 中的 2 个或更多异步请求以加载图像或执行其他任何操作

> ID：13175068
> 
> 赞同：0
> 
> 时间：2012-11-01T10:24:04.453
> 
> 标签：javascript, jquery, ajax, multithreading, asynchronous

一次单一的请求和响应模型没有利用完整的网络/互联网带宽，从而导致性能低下。（基准是半速利用率）

**如何使此代码使用 2 个或 3 个或更多异步请求而不是一个。（ajax）** 还是我需要多线程？有可能在javascript中吗？

（**这是为了从 ip 制作视频**）每次图像根据请求更改时。是的，我需要与多个获取请求异步（不是我上面解释的单个），或者你推荐线程？

```
<html>
<head>  <script language="JavaScript">
    // Global vars
    img = 'http://pastebin.com/i/t.gif';
    timeout = 1000;
    next = 0;

    function onLoad( ) {
        setTimeout( 'reloadImage( )', timeout );
    }

    // Reloader
    function reloadImage( ) {
        next = ( new Date( ) ).getTime( ) + timeout;
        document.images.dv.src = img + "?" + next;
    }
    </script>
    </head> 

    <body>
    <img src="img" name="dv" onLoad="onLoad( )">
    </body>
</html> 
```

和

```
<html>
<head>

</head>
<body>

<div id="container"></div>

<script language="JavaScript">
var canLoad = true;
var container = document.getElementById("container");
var image = document.createElement("img");
image.onload = function() {
    canLoad = true;
    console.log("Image reloaded.");
}
var imageUrl = "http://url/snapshot.jpg";
var fps = 2;

container.appendChild(image);

function loadImage() {
    if (canLoad) {
    canLoad = false;
    var str = new Date().getTime();
    image.setAttribute("src", imageUrl + "?" + str);
    console.log("Reloaded now.");
    } else {
    console.log("Can't reload now.");
    }
}

setInterval(loadImage, fps); // 30 fps

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:32:27.963

**没有实际测试过**，我认为它最终很可能导致“堆栈溢出”（如果你直接实现它），但你仍然可以看看：

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
    (function(){
        var img="/*url*/";
        var interval=50;
        var pointer=0;
        function showImg(image,idx)
        {
            if(idx<=pointer) return;
            document.body.replaceChild(image,document.getElementsByTagName("img")[0]);
            pointer=idx;
            preload();
        }
        function preload()
        {
            var cache=null,idx=0;;
            for(var i=0;i<5;i++)
            {
                idx=Date.now()+interval*(i+1);
                cache=new Image();
                cache.onload=(function(ele,idx){return function(){showImg(ele,idx);};})(cache,idx);
                cache.src=img+"?"+idx;
            }
        }
        window.onload=function(){
            document.getElementsByTagName("img")[0].onload=preload;
            document.getElementsByTagName("img")[0].src="/*initial url*/";
        };
    })();
    </script>
  </head>
  <body>
    <img  />
  </body>
</html> 
```

它能做什么：

1.  当初始图像加载时，`preload()`被调用；

2.  当`preload()`被调用时，它会创建 5 个图像缓存，每个都将其`onload`事件附加到`showImg()`;

3.  当`showImg()`被调用时，它检查当前索引是否在 current 之后`pointer`，如果是，则用这个新的图像替换当前图像，然后调用`preload()`;

4.  回到 2。

如果你真的要实现这个，增加`interval`和减少`i<5`。此外，在加载下一个队列之前检查缓存/队列中有多少图像的缓存/排队机制会很好。

另外，请注意我没有使用`getElementById`来获取图像，因为不会有稳定的 ID。

# ruby - ruby --dump 中显示的信息在运行时是否可用？

> ID：13175070
> 
> 赞同：4
> 
> 时间：2012-11-01T10:24:07.753
> 
> 标签：ruby, reflection, yarv

在[你不知道 Ruby 可以做的 10 件事](https://speakerdeck.com/jeg2/10-things-you-didnt-know-ruby-could-do)中，幻灯片 30，James Edward Gray II 提到

```
ruby -e 'puts { is_this_a_block }' --dump parsetree 
```

产生

```
###########################################################
## Do NOT use this node dump for any purpose other than  ##
## debug and research.  Compatibility is not guaranteed. ##
###########################################################

# @ NODE_SCOPE (line: 1)
# +- nd_tbl: (empty)
# +- nd_args:
# |   (null node)
# +- nd_body:
#     @ NODE_ITER (line: 1)
#     +- nd_iter:
#     |   @ NODE_FCALL (line: 1)
#     |   +- nd_mid: :puts
#     |   +- nd_args:
#     |       (null node)
#     +- nd_body:
#         @ NODE_SCOPE (line: 1)
#         +- nd_tbl: (empty)
#         +- nd_args:
#         |   (null node)
#         +- nd_body:
#             @ NODE_VCALL (line: 1)
#             +- nd_mid: :is_this_a_block 
```

这里输出的信息在运行时可用吗？如果是这样，这些信息是否仅代表已写下的代码，还是包含已完成的任何元编程的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T04:51:15.470

是的。您可以使用[Ripper](http://rubygems.org/gems/ripper) gem（在 MRI 1.9 中开箱即用）为给定的代码字符串（通过）生成 AST（抽象语法树`Ripper.sexp`）。但是，由于 MRI 1.9 中的架构更改，一旦您的代码被解析并转换为 YARV 字节码，原始源代码和 AST 都将被删除，您将无法再获得此信息。但是，如果您将通过元编程生成的任何代码投入其中，`Ripper.sexp`您可以获得结果的 AST。您还可以使用 JEG2 演讲中显示的其他一些技巧来解析源文件并为其生成 AST（尽管任何元编程代码都不会被解析，因为它还不存在）。

# php - 从 cUrl 读取 PHP 中的 POST 数据

> ID：13175072
> 
> 赞同：8
> 
> 时间：2012-11-01T10:24:10.007
> 
> 标签：php, curl, http-post

我在 PHP 中使用 cUrl 从一些外部服务请求。

有趣的是，服务器响应原始“multipart/form-data”而不是二进制文件数据。

我的网站使用共享主机，因此 PECL HTTP 不是一个选项。

有没有办法用 PHP 解析这些数据？

示例代码：

```
$response = curl_exec($cUrl);

/* $response is raw "multipart/form-data" string

   --MIMEBoundaryurn_uuid_DDF2A2C71485B8C94C135176149950475371
   Content-Type: application/xop+xml; charset=utf-8; type="text/xml"
   Content-Transfer-Encoding: binary

   (xml data goes here)

   --MIMEBoundaryurn_uuid_DDF2A2C71485B8C94C135176149950475371
   Content-Type: application/zip
   Content-Transfer-Encoding: binary

   (binary file data goes here)

*/ 
```

编辑：我尝试将响应传送到 localhost HTTP 请求，但响应数据可能超过 PHP 进程中允许的内存大小。扩展内存限制不是很实用，这个动作也大大降低了服务器性能。

如果对原始问题没有其他选择，您可以建议一种方法来处理非常大的 POST 请求以及 XML 解析，就PHP中的*流而言。*

我知道这会很难，请发表评论。我愿意讨论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T13:32:18.747

如果您需要响应中的 zip 文件，我想您可以编写一个 tmp 文件来保存 curl 响应，并将其作为解决方法流式传输：从未尝试过使用多部分 curls，但我想它应该可以工作。

```
$fh = fopen('/tmp/foo', 'w'); 
$cUrl = curl_init('http://example.com/foo'); 
curl_setopt($cUrl, CURLOPT_FILE, $fh); // redirect output to filehandle
curl_exec($cUrl); 
curl_close($cUrl);
fclose($fh); // close filehandle or the file will be corrupted 
```

如果您不需要响应的 xml 部分以外的任何内容，则可能需要禁用标头

```
curl_setopt($cUrl, CURLOPT_HEADER, FALSE); 
```

并添加选项以仅接受 xml 作为响应

```
curl_setopt($cUrl, CURLOPT_HTTPHEADER, array('Accept: application/xml'));
//That's a workaround since there is no available curl option to do so but http allows that 
```

# [编辑]

黑暗中的一枪...您可以使用这些 curlopt 设置进行测试，看看修改这些设置是否有帮助

```
$headers = array (
    'Content-Type: multipart/form-data; boundary=' . $boundary,
    'Content-Length: ' . strlen($requestBody),
    'X-EBAY-API-COMPATIBILITY-LEVEL: ' . $compatLevel,  // API version
    'X-EBAY-API-DEV-NAME: ' . $devID,
    'X-EBAY-API-APP-NAME: ' . $appID,
    'X-EBAY-API-CERT-NAME: ' . $certID,
    'X-EBAY-API-CALL-NAME: ' . $verb,
    'X-EBAY-API-SITEID: ' . $siteID, 
    );

$cUrl = curl_init();
curl_setopt($cUrl, CURLOPT_URL, $serverUrl);
curl_setopt($cUrl, CURLOPT_TIMEOUT, 30 );
curl_setopt($cUrl, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($cUrl, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($cUrl, CURLOPT_HTTPHEADER, $headers);
curl_setopt($cUrl, CURLOPT_POST, 1);
curl_setopt($cUrl, CURLOPT_POSTFIELDS, $requestBody);
curl_setopt($cUrl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($cUrl, CURLOPT_FAILONERROR, 0 );
curl_setopt($cUrl, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt($cUrl, CURLOPT_HEADER, 0 );
curl_setopt($cUrl, CURLOPT_USERAGENT, 'ebatns;xmlstyle;1.0' );
curl_setopt($cUrl, CURLOPT_HTTP_VERSION, 1 );      // HTTP version must be 1.0
$response = curl_exec($cUrl);

if ( !$response ) {
    print "curl error " . curl_errno($cUrl ) . PHP_EOL;
}
curl_close($cUrl); 
```

# [编辑二]

这只是一次尝试，如前所述，我无法让我的卷曲页面响应多部分表单数据。所以在这里对我温柔一点；）

```
$content_type = ""; //use last know content-type as a trigger
$tmp_cnt_file = "tmp/tmpfile";
$xml_response = ""; // this will hold the "usable" curl response
$hidx = 0; //header index.. counting the number of different headers received

function read_header($cUrl, $string)// this will be called once for every line of each header received
{ 
    global $content_type, $hidx;
    $length = strlen($string);
    if (preg_match('/Content-Type:(.*)/', $string, $match))
    {
        $content_type = $match[1];
        $hidx++;
    }
    /* 
    should set  $content_type to 'application/xop+xml; charset=utf-8; type="text/xml"' for the first 
    and to 'application/zip' for the second response body   

    echo "Header: $string<br />\n";
    */
    return $length;
}

function read_body($cUrl, $string)
{
    global $content_header, $xml_response, $tmp_cnt_file, $hidx;
    $length = strlen($string);
    if(stripos ( $content_type , "xml") !== false)
        $xml_response .= $string;
    elseif(stripos ($content_type, "zip") !== false)
    {
        $handle = fopen($tmp_cnt_file."-".$hidx.".zip", "a");
        fwrite($handle, $string);
        fclose($handle);
    }
    /*
    elseif {...} else{...}
    depending on your needs

    echo "Received $length bytes<br />\n";
    */
    return $length;
} 
```

当然设置正确的 curlopts

```
// Set callback function for header
curl_setopt($cUrl, CURLOPT_HEADERFUNCTION, 'read_header');
// Set callback function for body
curl_setopt($cUrl, CURLOPT_WRITEFUNCTION, 'read_body'); 
```

由于内存问题，不要忘记不将 curl 响应保存到变量中，希望您所需要的一切都在上面的 $xml_response 中。

```
//$response = curl_exec($cUrl);
curl_exec($cUrl); 
```

为了解析您的代码，您可以参考您在此场景中`$xml_response`创建的临时文件。`tmp/tmpfile-2`同样，我无法以任何方式测试上面的代码。所以这可能行不通（但它应该恕我直言；））

# [编辑三]

假设我们希望 curl 将所有传入数据直接写入另一个（传出）流，在本例中为套接字连接

我不确定它是否像这样简单：

```
$fs = fsockopen($host, $port, $errno, $errstr);
$cUrl = curl_init('http://example.com/foo'); 
curl_setopt($cUrl, CURLOPT_FILE, $fs); // redirect output to sockethandle
curl_exec($cUrl); 
curl_close($cUrl);
fclose($fs); // close handle 
```

否则我们将不得不使用我们已知的 write 和 header 函数，只需要一点小技巧

```
//first open the socket (before initiating curl)
$fs = fsockopen($host, $port, $errno, $errstr);
// now for the new callback function
function socket_pipe($cUrl, $string)
{ 
    global $fs;
    $length = strlen($string);
    fputs($fs, $string); // add NOTHING to the received line just send it to $fs; that was easy wasn't it?
    return $length;
}
// and of course for the CURLOPT part
// Set callback function for header
curl_setopt($cUrl, CURLOPT_HEADERFUNCTION, 'socket_pipe');
// Set the same callback function for body
curl_setopt($cUrl, CURLOPT_WRITEFUNCTION, 'socket_pipe');

// do not forget to 
fclose($fs); //when we're done 
```

问题是，不编辑结果并简单地将其传输到`$fs`将使得 apache 有必要监听某个端口，然后您将脚本分配给该端口。或者您需要在之后直接添加一个标题行`fsockopen`

```
fputs($fp, "POST $path HTTP/1.0\n"); //where path is your script of course 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:48:19.540

I'm sorry i can't help much because you did not put much code but i remember i was having a similar issue when i was playing with curl_setopt options.

Did you use **CURLOPT_BINARYTRANSFER**?

From php documentation -> **CURLOPT_BINARYTRANSFER**-> TRUE to return the raw output when CURLOPT_RETURNTRANSFER is used.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:07:07.737

你可以重新组装你的二进制数据做这样的事情，我希望它有所帮助。

```
$file_array = explode("\n\r", $file, 2);
$header_array = explode("\n", $file_array[0]);
foreach($header_array as $header_value) {
  $header_pieces = explode(':', $header_value);
  if(count($header_pieces) == 2) {
    $headers[$header_pieces[0]] = trim($header_pieces[1]);
  }
}
header('Content-type: ' . $headers['Content-Type']);
header('Content-Disposition: ' . $headers['Content-Disposition']);
echo substr($file_array[1], 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:56:53.970

只需设置 CURLOPT_RETURNTRANSFER CURLOPT_POST

```
 $c = curl_init($url);
        curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($c, CURLOPT_CONNECTTIMEOUT, 1);
        curl_setopt($c, CURLOPT_TIMEOUT, 1);
        curl_setopt($c, CURLOPT_POST, 1);
        curl_setopt($c, CURLOPT_POSTFIELDS,
                    array());
        $rst_str = curl_exec($c);
        curl_close($c); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T00:01:21.973

如果您不需要二进制数据，您是否尝试过以下操作？

```
curl_setopt($c, CURLOPT_NOBODY, true); 
```

# php - 如何在 Doctrine 中“注释掉”注释条目

> ID：13175078
> 
> 赞同：11
> 
> 时间：2012-11-01T10:24:39.213
> 
> 标签：php, doctrine-orm

给定以下带有 PHPDoc 注释的属性，其中包含 Doctrine 的注释：

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id; 
```

“注释掉”其中一条注释行的最佳方法是什么？例如这样的：

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * //Comment out please// @ORM\GeneratedValue(strategy="AUTO")
 */
private $id; 
```

是否有支持的方式或执行此操作的一般约定？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-04-22T09:28:42.073

只需删除用于注释识别的@。

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * ORM\GeneratedValue(strategy="AUTO")
 */
private $id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-25T12:40:10.813

只需将 替换`@`为`#`

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * #ORM\GeneratedValue(strategy="AUTO")
 */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T15:30:50.013

我通常添加`@foo`注释（此类不会发出任何问题）以便在停靠块内部注释掉。您可以为忽略注册一个全局注释：

```
AnnotationReader::addGlobalIgnoredName('foo'); 
```

这将被应用为：

```
/**
 * @Column(type="string", nullable=false, name="body")
 * @foo type="string", nullable=false, name="body2" 
 */
protected $body; 
```

您可以在[学说 2.1 文档](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html)中对其进行验证：

> @Foo 注释。它不是文档注释，也没有列入黑名单。对于 Doctrine Annotations，如何处理这个注释并不完全清楚。根据配置，解析此注解时将抛出异常（未知注解）

根据下面的引用，该示例不应引发任何异常，因为该`@foo`注释是先前注册的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-09T18:17:10.230

只需在 @ 和指令的其余部分之间放置一个空格。

```
/**
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ ORM\GeneratedValue(strategy="AUTO")
 */ 
```

# php - 在 php 中爆炸来自 mysql 的值

> ID：13175079
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:24:39.090
> 
> 标签：php, mysql, explode

我有 3 列 id 的 mysql 表 | 姓名 | 数字。在数字列中，我有数字示例：1、4、5 现在我从行中回显值：

```
$id = $row['id'];
$name = $row['name'];
$numbers = $row['numbers'];
echo "$id | $name | $numbers "; 
```

此代码向我显示：1 | 姓名 | 1,4,5

我想分解字段编号并像这样显示：1 | 姓名 | 1 4 5.所以这些数字我想单独​​显示。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:26:32.440

利用

```
$numbers = str_replace(',',' ',$row['numbers']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:26:44.173

你是这个意思吗？

```
$id = $row['id'];
$name = $row['name'];
$numbers = $row['numbers'];
echo "$id | $name | ";
foreach (explode(',', $numbers) as $n) {
    echo "{$n} ";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T07:15:10.803

你需要使用爆炸功能

```
$date="23-02-2014";

$date1=explode("-"$date);

$fdate=("$date1[2]"."-"."$date1[1]"."-"."$date[0]");

echo  $fdate;

result is 2014-02-23 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:30:29.060

您需要`$numbers`使用`,`作为分隔符进行爆炸，然后使用 foreach 打印它

```
foreach (explode(',', $numbers) as $num) {
echo $num;
} 
```

打印 ID 和 Name 后添加上面的代码

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-05T07:18:25.033

list() 用于在一个操作中分配变量列表，它是一种将数组项分配给变量的好方法。

例子 ;

```
$id = $row['id'];
$name = $row['name'];
$numbers = array( $row['numbers']);

list($fnum, $snum, $tnum) = $numbers;

echo $fnum . $snum . $tnum ; 
```

[http://php.net/manual/en/function.list.php](http://php.net/manual/en/function.list.php)

# arrays - 如何在perl中识别变量是否属于一个数组或另一个数组

> ID：13175086
> 
> 赞同：0
> 
> 时间：2012-11-01T10:25:15.520
> 
> 标签：arrays, perl

> **可能重复：**
> [如何检查 Perl 数组是否包含特定值？](https://stackoverflow.com/questions/2860226/how-can-i-check-if-a-perl-array-contains-a-particular-value)

我有两个数组`@array1 = (1..26);`和`@array2 = ('a'..'z');`一个变量`$x`。假设`$x=5`那么我如何将此值与两个数组和该变量所属的输出状态进行比较`@array1`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:40:46.837

Perl 5.10 和更高版本有一个新的智能匹配运算符，可以轻松完成这项任务：

```
if ($x ~~ @array1) {
  say '$x is in @array1';
}
elsif ($x ~~ @array2) {
  say '$x is in @array2';
}
else {
  say '$x is not in either array.';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:37:16.657

您可以使用智能匹配：

```
say   $x ~~ \@array1 ? 'first'
    : $x ~~ \@array2 ? 'second'
    : 'none'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T10:53:36.880

如果您想避免有争议的智能匹配运算符，您可以使用`grep`.

```
say   grep { $x eq $_ } @array1 ? "first"
    : grep { $x eq $_ } @array2 ? "second"
    : "none"; 
```

如果您重复执行此操作，您应该在此处使用哈希。

```
my %array1 = map { $_ => 1 } @array1;
my %array2 = map { $_ => 1 } @array2;

say   $array1{$x} ? "first"
    : $array2{$x} ? "second"
    : "none"; 
```

# javascript - 手动推进轨道滑块

> ID：13175099
> 
> 赞同：1
> 
> 时间：2012-11-01T10:25:58.203
> 
> 标签：javascript, jquery, orbit

我正在使用 Zurb 'Orbit' Javascript 滑块[http://www.zurb.com/playground/orbit-jquery-image-slider](http://www.zurb.com/playground/orbit-jquery-image-slider)，我想触发我自己的 javascript 以手动向左推进滑块或对。

基本上，我想用我的内容填充它，然后根据用户与整个页面的交互，让该内容“滑动”在视野之外，而不仅仅是计时器功能或点击导航图像图书馆提供。

因此，如果我有一个名为“myLink”的链接，那么像这样......

```
$('#myLink').click(function() {
   ... code to advance javascript slider...
   $('#content').orbit(?????);
}); 
```

如果做不到这一点，我的“内容”将是一个 html 表单和其他类似的东西，有人知道一个很好的免费库，它已经可以满足我的需求了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:00:20.693

使用 "afterLoadComplete" 获取对轨道对象的引用：

```
var myOrbit;

$(".orbitSlides").orbit({
        afterLoadComplete: function() {
            myOrbit = this;
        }
}); 
```

然后使用'shift'功能来改变幻灯片：

```
myOrbit.shift(1); 
```

或者

```
myOrbit.shift('prev'); 
```

或者

```
myOrbit.shift('next'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T12:22:20.020

最简单的方法是

```
$(".slider-nav .right").click(); 
```

模拟被点击的箭头。如有必要，请更改以考虑使用项目符号导航选项。

我不认为你会得到比这更优雅的东西，因为插件不公开任何类型的 API - 它都在插件中私下封闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:41:03.017

我用这个

```
$('#next').click(function(){
$('#rotator').trigger("orbit.next"); 
})
$('#prev').click(function(){
    $('#rotator').trigger("orbit.prev"); 
}) 
```

假设 div #rotator 是轨道滑块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T20:45:09.050

我无法得到其他一些答案。我知道这有点老套，但我发现这个最简单：

HTML：

```
<p id='back'>Back</p>
<p id='next'>Next</p> 
```

CSS：（如果你使用内置的`navigation_arrows: false;`，导航箭头会被移除并且不能再被操作，所以`visibility: hidden;`来救援！）

```
.orbit-prev, .orbit-next {
    visibility: hidden;
} 
```

jQuery：

```
$('#back').on('click', function() {
    $('.orbit-next').click();
});

$('#next').on('click', function() {
    $('.orbit-prev').click();
}); 
```

# openstreetmap - 如何使用传单 Api 获取点击位置的纬度、经度

> ID：13175101
> 
> 赞同：8
> 
> 时间：2012-11-01T10:26:01.920
> 
> 标签：openstreetmap, leaflet

我正在使用带有传单 API 的 OSM。现在我想获得点击位置的纬度和经度。我的意思与此类似：

> [http://openlayers.org/dev/examples/click.html](http://openlayers.org/dev/examples/click.html)

```
map.events.register("click", map, function(e) {
            var position = map.getLonLatFromPixel(e.xy);
                alert("Lat, Lon : "+position.lon.toFixed(3),position.lat.toFixed(3));

        }); 
```

开放层中的此代码有助于获取经纬度值 - 使用传单寻找类似的东西。

任何帮助都会非常棒。提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T16:05:27.423

```
map.on('click', function(e) {
    alert(e.latlng);
}); 
```

[文档](https://leafletjs.com/reference.html#mouseevent-latlng)

# file - 如何在golang中通知TCP客户端文件的结尾？

> ID：13175102
> 
> 赞同：3
> 
> 时间：2012-11-01T10:26:05.643
> 
> 标签：file, networking, tcp, go

我想在 golang 中通过 TCP 发送文件。这是我的服务器代码：

```
 c is connected *net.TCPConn

    file, _ := os.Open(fn)
    defer file.Close()
    io.Copy(c, file)
    // c.CloseWrite() 
```

和客户：

```
 as above, c is connected *net.TCPConn

    file, _ := os.Create("file.txt")
    defer file.Close()
    io.Copy(file, c) 
```

我的问题是：这样，客户端无法接收到文件的EOF

所以，`io.Copy`被屏蔽了。我必须打电话`c.CloseWrite`通知客户文件已经结束。

如果我想发送文件，这将不起作用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T10:54:01.353

如果你使用的是 TCP 连接，那么 os.EOF 错误意味着连接被另一端关闭。

我认为可靠发送文件的唯一方法是实现多状态协议。

例如。在传输的第一个状态，告诉客户端要读取多少字节并进入状态 2。在状态 2，如果读取了所有字节，那么我们知道它读取了整个文件。如果在读取所有字节之前检测到 os.EOF，则丢弃并重新开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-01T16:59:36.583

在正常的 C 中，一个人会关闭（fd，SHUT_WR）TCP 连接以向另一端指示 EOF。你也可以这样做：

```
func shutdownWrite(conn net.Conn) {
     // anonymous interface. Could explicitly use TCP instead.
     if  v, ok := conn.(interface{ CloseWrite() error }); ok {
         v.CloseWrite()
     }
 } 
```

见[https://golang.org/src/net/tcpsock_posix.go?s=2073:2109#L75](https://golang.org/src/net/tcpsock_posix.go?s=2073:2109#L75)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-04T23:34:01.893

如果您从发送方关闭连接，一切正常。
我现在做了同样的事情——通过 TCP 传输文件。如果您添加，一切正常

```
defer conn.Close() 
```

打开连接后。
例如：

```
conn, err := net.Dial("tcp", client)
defer conn.Close() 
```

# jquery - Webstorm 没有在 jquery 中显示 ids 和 classes

> ID：13175103
> 
> 赞同：4
> 
> 时间：2012-11-01T10:26:08.067
> 
> 标签：jquery, class, intellisense, identifier, webstorm

当我尝试编写 jquery 时，Webstorm 没有在 jquery 标识符部分显示标识符和类。请帮助我是编程新手，需要良好的智能感知才能工作。它没有显示图像中的 id 和类。我有最新版本。

[http://blog.jetbrains.com/webide/2012/08/tips-on-jquery-development-in-webstorm/](http://blog.jetbrains.com/webide/2012/08/tips-on-jquery-development-in-webstorm/)

这是我的代码

它没有像应有的那样在 # 符号之后显示 ID。

```
<!DOCTYPE html>
<html>
<head>
    <script>
    $("#")
    </script>
</head>

<body>
<p id="test1">This is a paragraph.</p>
<button id="btn1">Set Text</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T14:01:20.153

确保在此处启用 jQuery 库：

![图书馆](../Images/fe533abb715bb09dc7ce5ce2044948ae.png)

另请注意，您需要按`Ctrl`+ `Space`，此完成类型是明确的：

![使用 ctrl+space](../Images/1010f5bfa28c2731df6bdb38dcd3adde.png)

# c#-4.0 - 如何在 app.config 文件 windows 应用程序中授予读写权限

> ID：13175112
> 
> 赞同：0
> 
> 时间：2012-11-01T10:26:34.083
> 
> 标签：c#-4.0

在我的 Windows 应用程序中，我附加了数据库，我创建了设置文件，当我在安装设置文件后运行应用程序时，它工作得很好，但是数据没有保存到数据库中，它显示错误，访问被拒绝。所以请告诉我如何在 app.config 文件中授予对数据库的读写访问权限。

```
 <add name="StockEntities" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Stock.mdf;Integrated Security=True;User Instance=True;" providerName="System.Data.EntityClient" /> 
```

# php - 检查登录表单的问题

> ID：13175120
> 
> 赞同：0
> 
> 时间：2012-11-01T10:26:58.930
> 
> 标签：php, sql, login-script

我不知道为什么 php 忽略 if 语句并且它不执行检查，

```
 <?php
   require 'default.php';
   if(isset($_POST['submit'])){
      $username = $_POST['username'];
      $password = $_POST['password'];
      $username = stripslashes($username);
      $password = stripslashes($password);
      $username = mysql_real_escape_string($username);
      $password = mysql_real_escape_string($password);
      if (mysql_num_rows(mysql_query("SELECT `username` FROM `users` WHERE `username`='$username'"))==1
         && mysql_num_rows(mysql_query("SELECT `password` FROM `users` WHERE `password`='$password'"))==1){
          echo 'you Have logged in successfully';
         }else{
             echo 'Incorrect username or password had been entered!';
            }
   }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:29:28.463

### 如果一个用户有提供的用户名而另一个用户提供了密码怎么办？它登录？

请以这种方式更改您的代码：

```
if (mysql_num_rows(mysql_query("SELECT `username` FROM `users` WHERE `username`='$username' AND `password`='$password'"))==1) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T10:35:20.200

mysql_num_rows() 的返回值可能大于 1，可能是？

```
<?php
require 'default.php';
if(isset($_POST['submit'])) {
  $username = $_POST['username'];
  $password = $_POST['password'];
  $username = stripslashes($username);
  $password = stripslashes($password);
  $username = mysql_real_escape_string($username);
  $password = mysql_real_escape_string($password);
  if (
    mysql_num_rows(mysql_query("SELECT `username` FROM `users` WHERE `username`='$username' LIMIT 0,1"))==1
    &&
    mysql_num_rows(mysql_query("SELECT `password` FROM `users` WHERE `password`='$password' LIMIT 0,1"))==1
  ) {
    echo 'you Have logged in successfully';
  }
  else {
    echo 'Incorrect username or password had been entered!';
  }
}

?> 
```

或使用 > 0 代替。

```
<?php
require 'default.php';
if(isset($_POST['submit'])) {
  $username = $_POST['username'];
  $password = $_POST['password'];
  $username = stripslashes($username);
  $password = stripslashes($password);
  $username = mysql_real_escape_string($username);
  $password = mysql_real_escape_string($password);
  if (
  mysql_num_rows(mysql_query("SELECT `username` FROM `users` WHERE `username`='$username'")) > 0
  &&
  mysql_num_rows(mysql_query("SELECT `password` FROM `users` WHERE `password`='$password'")) > 0
  ) {
    echo 'you Have logged in successfully';
  }
  else {
    echo 'Incorrect username or password had been entered!';
  }
}

?> 
```

或者用这种方式简单...

```
<?php
require 'default.php';
if(isset($_POST['submit'])) {
  $username = $_POST['username'];
  $password = $_POST['password'];
  $username = stripslashes($username);
  $password = stripslashes($password);
  $username = mysql_real_escape_string($username);
  $password = mysql_real_escape_string($password);
  if (intval(mysql_result(mysql_query(sprintf("SELECT COUNT(*) AS found FROM `users` WHERE `username`='%s' AND `password`='%s'",$username,$password)),0)) > 0 ) {
    echo 'you Have logged in successfully';
  }
  else {
    echo 'Incorrect username or password had been entered!';
  }
}
?> 
```

# java - 在 webapp 中使用 JExcel Api 时，Tomcat 7 在启动时崩溃

> ID：13175121
> 
> 赞同：1
> 
> 时间：2012-11-01T10:26:59.433
> 
> 标签：java, excel, tomcat

当调用特定的 servlet 时，我正在尝试使用[JExcel Api](http://jexcelapi.sourceforge.net/)将数据库中的数据导出到 Excelsheet 中，但是在启动 Tomcat 时出现多个异常。这是eclipse给出的错误消息：

```
Nov 01, 2012 10:57:14 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/web]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/web]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
Caused by: java.lang.NoClassDefFoundError: jxl/write/WriteException
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Unknown Source)
    at java.lang.Class.getDeclaredFields(Unknown Source)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:140)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:67)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: java.lang.ClassNotFoundException: jxl.write.WriteException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
... 21 more

Nov 01, 2012 10:57:14 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
    at java.util.concurrent.FutureTask.get(Unknown Source)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
 Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more

Nov 01, 2012 10:57:14 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more 
```

这是servlet代码：

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import jxl.write.WriteException;

/**
 * Servlet implementation class Test
 */
@WebServlet(description = "A simple test.", urlPatterns = { "/test" })

public class Test extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Test() {
        super();
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        try {
            WriteExcel.writeTestFile();
        } catch (WriteException e) {
            e.printStackTrace();
        }

        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Test!</title>");
        out.println("</head>");
        out.println("<body>");
        out.println("I've written an Excel file!");
        out.println("</body>");
        out.println("</html>");

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        doGet(request, response);
    }

} 
```

这是 WriteExcel 类的代码：

```
import java.io.File;
import java.io.IOException;
import java.util.Locale;

import jxl.CellView;
import jxl.Workbook;
import jxl.WorkbookSettings;
import jxl.format.UnderlineStyle;
import jxl.write.Formula;
import jxl.write.Label;
import jxl.write.Number;
import jxl.write.WritableCellFormat;
import jxl.write.WritableFont;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;
import jxl.write.WriteException;
import jxl.write.biff.RowsExceededException;

//tomcat hat probleme mit der jxl library
public class WriteExcel {

  private WritableCellFormat timesBoldUnderline;
  private WritableCellFormat times;
  private String inputFile;

public void setOutputFile(String inputFile) {
  this.inputFile = inputFile;
  }

  public void write() throws IOException, WriteException {
    File file = new File(inputFile);
    WorkbookSettings wbSettings = new WorkbookSettings();

    wbSettings.setLocale(new Locale("en", "EN"));

    WritableWorkbook workbook = Workbook.createWorkbook(file, wbSettings);
    workbook.createSheet("Report", 0);
    WritableSheet excelSheet = workbook.getSheet(0);
    createLabel(excelSheet);
    createContent(excelSheet);

    workbook.write();
    workbook.close();
  }

  private void createLabel(WritableSheet sheet)
      throws WriteException {
    // Lets create a times font
    WritableFont times10pt = new WritableFont(WritableFont.TIMES, 10);
    // Define the cell format
    times = new WritableCellFormat(times10pt);
    // Lets automatically wrap the cells
    times.setWrap(true);

    // Create create a bold font with unterlines
    WritableFont times10ptBoldUnderline = new WritableFont(WritableFont.TIMES, 10, WritableFont.BOLD, false,
        UnderlineStyle.SINGLE);
    timesBoldUnderline = new WritableCellFormat(times10ptBoldUnderline);
    // Lets automatically wrap the cells
    timesBoldUnderline.setWrap(true);

    CellView cv = new CellView();
    cv.setFormat(times);
    cv.setFormat(timesBoldUnderline);
    cv.setAutosize(true);

    // Write a few headers
    addCaption(sheet, 0, 0, "Header 1");
    addCaption(sheet, 1, 0, "This is another header");

  }

  private void createContent(WritableSheet sheet) throws WriteException,
      RowsExceededException {
    // Write a few number
    for (int i = 1; i < 10; i++) {
      // First column
      addNumber(sheet, 0, i, i + 10);
      // Second column
      addNumber(sheet, 1, i, i * i);
    }
    // Lets calculate the sum of it
    StringBuffer buf = new StringBuffer();
    buf.append("SUM(A2:A10)");
    Formula f = new Formula(0, 10, buf.toString());
    sheet.addCell(f);
    buf = new StringBuffer();
    buf.append("SUM(B2:B10)");
    f = new Formula(1, 10, buf.toString());
    sheet.addCell(f);

    // Now a bit of text
    for (int i = 12; i < 20; i++) {
      // First column
      addLabel(sheet, 0, i, "Boring text " + i);
      // Second column
      addLabel(sheet, 1, i, "Another text");
    }
  }

  private void addCaption(WritableSheet sheet, int column, int row, String s)
      throws RowsExceededException, WriteException {
    Label label;
    label = new Label(column, row, s, timesBoldUnderline);
    sheet.addCell(label);
  }

  private void addNumber(WritableSheet sheet, int column, int row,
      Integer integer) throws WriteException, RowsExceededException {
    Number number;
    number = new Number(column, row, integer, times);
    sheet.addCell(number);
  }

  private void addLabel(WritableSheet sheet, int column, int row, String s)
      throws WriteException, RowsExceededException {
    Label label;
    label = new Label(column, row, s, times);
    sheet.addCell(label);
  }

  public static void writeTestFile() throws WriteException, IOException {
    WriteExcel test = new WriteExcel();
    test.setOutputFile("d:/test.xls");
    test.write();
    System.out.println("Please check the result file under d:/test.xls");
  }

} 
```

在本地独立项目中进行测试时，WriteExcel 类中的 writeTestFile() 方法可以正常工作。
当未调用方法 writeTestFile() 时，servlet 本身也可以工作。

有人可以澄清为什么我会得到例外吗？
还有修复或解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:08:32.900

试试这个：双击服务器，单击“打开启动配置”，转到 Classpath 选项卡并在 User Entries 下添加 jar。

# firefox - 从谷歌翻译复制和粘贴

> ID：13175125
> 
> 赞同：0
> 
> 时间：2012-11-01T10:27:17.597
> 
> 标签：firefox, google-chrome, google-translate

从今天早上开始，我不能再复制/粘贴谷歌翻译的文本了。
我尝试了几种浏览器，唯一有效的是 chrome & chromuim

在另一个浏览器上复制/粘贴翻译的唯一解决方案是禁用 javascript 浏览器。

有人有其他信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T09:40:46.673

如果按住 1 或 2 秒，“Ctrl + C”会起作用。

# iframe - iFrame 高度调整大小

> ID：13175128
> 
> 赞同：0
> 
> 时间：2012-11-01T10:27:29.500
> 
> 标签：iframe, resize, autoscroll

需要将框架高度更改为页面内容。在框架中将是一个注释块。抱歉 4 我的英语：P 问题在[这里](http://salat-production.ru/g_random.html)。

```
<script>
$(document).ready(function(){
$(".group1").colorbox({rel:'group1'});
$(".group2").colorbox({rel:'group2', transition:"fade"});
$(".group3").colorbox({rel:'group3', transition:"none", width:"800px", height:"75%"});
$(".group4").colorbox({rel:'group4', slideshow:true});
$(".iframe").colorbox({iframe:true, width:"1057px", height:"750px"});
$("#click").click(function(){ 
$('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text;
return false;
});
});
</script>

<a class='iframe' href="Gallery/complete/photo0001489_61132.html"><img src="Gallery/complete/min/1.jpg" width="200px"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:33:56.503

不太确定您要的是什么，但是如果您使用的是 jQuery，这应该可以解决问题：

```
 $('.element').height($('.other-element').height()); 
```

你也可以

```
 $('.element').css({
'height':$('.other-element').height()
}); 
```

# java - 拆分（“\\”）和错误

> ID：13175129
> 
> 赞同：22
> 
> 时间：2012-11-01T10:27:29.827
> 
> 标签：java

```
String str = "\u0054\u0068\u0069\u006e\u006b\u0050\u0061\u0064";

String[] strArray = str.split("\\"); 
```

但是发生了这个错误。

> 线程“主”java.util.regex.PatternSyntaxException 中的异常：索引 1 附近出现意外内部错误

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-01T10:28:32.460

它应该是

```
String[] strArray = str.split("\\\\"); 
```

之所以会这样，是因为 in `Regex`,`\`有特殊含义，所以需要将它转义成`\\`。

在java中，`\\`应该等于`"\\\\"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T10:29:38.587

`String.split(String regex)`方法作为参数 a `RegEx`。

正则表达式`\`是`\\\\`

尝试

```
String[] strArray = str.split("\\\\"); 
```

我们使用的原因`"\\\\"`，

正则表达式`\`是`\\`

现在`\\`被视为`\`应用转义字符逻辑（`\n`= new line ，`\\`= `\`）

所以让`"\\"`我们使用`"\\\\"`

希望它不会令人困惑.. :D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:33:10.560

这没有多大意义。您的原始字符串使用 unicode 字符并且等于`ThinkPad`. 所以无论如何都没有斜线可以删除。

换句话说，下面的代码打印`ThinkPad`了两次：

```
public static void main(String args[]) {
    String str = "\u0054\u0068\u0069\u006e\u006b\u0050\u0061\u0064";
    System.out.println(str);
    String[] strArray = str.split("\\\\");
    System.out.println(Arrays.toString(strArray));
} 
```

或者更清楚的是，下面的代码打印为 true：

```
public static void main(String args[]) {
    String str = "\u0054\u0068\u0069\u006e\u006b\u0050\u0061\u0064";
    String str2 = "ThinkPad";
    System.out.println(str == str2);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T10:38:16.273

关于转义的一般解决方案：http: [//commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)

```
String str = "\u0054\u0068\u0069\u006e\u006b\u0050\u0061\u0064";
String[] strArray = str.split(StringEscapeUtils.escapeJava("\\")); 
```

# c# - 仅允许使用 C#.Net 在文本框中拖放文本文件

> ID：13175133
> 
> 赞同：6
> 
> 时间：2012-11-01T10:27:37.830
> 
> 标签：c#, winforms, drag-and-drop

我正在开发一个 Windows 窗体应用程序。

在对控件进行拖放操作期间`TextBox`，我想限制用户仅提供文本文件。

```
// drag drop module for input text file in textbox starts here
private void textBoxInputTextFile_DragEnter(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
        e.Effect = DragDropEffects.Copy;
    else
        e.Effect = DragDropEffects.None;
}

private void textBoxInputTextFile_DragDrop(object sender, DragEventArgs e)
{
    if(e.Data.GetData(DataFormats.FileDrop, true))
    {
    // Check if it is a text file
    // Okay if it is a text file or else give an error message
    }
} 
```

此代码只是我之前的文件夹删除操作中的一个示例，但现在我想将其限制为仅一个文件，并且它也必须是一个文本文件。因此，当放置动作发生时，它应该首先检查它是否是文本文件，然后再做其他事情。

我怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T10:40:02.053

写在我的头上（未经测试）：

```
var files = (string[])e.Data.GetData(DataFormats.FileDrop);

foreach(var file in files)
{
    if(System.IO.Path.GetExtension(file).Equals(".txt", StringComparison.InvariantCultureIgnoreCase))
    {
        //file has correct extension, do something with file
    }
    else
    {
        MessageBox.Show("Not a text file");
    }
} 
```

在将这种东西投入生产之前，我可能会添加更多的空检查（例如，如果文件没有扩展名怎么办？）但这应该会给你基本的想法。

如果您想要某种更严格的测试来查看被删除的文件是否是文本文件，而不仅仅是检查它的扩展名，我建议您阅读[这个 SO question](https://stackoverflow.com/questions/4744890/c-sharp-check-if-file-is-text-based)。

# driver - 将音频驱动程序列入黑名单会杀死 ALSA

> ID：13175134
> 
> 赞同：1
> 
> 时间：2012-11-01T10:27:40.697
> 
> 标签：driver, alsa

我正在尝试为我的 PCI 声卡创建一个简单的驱动程序，我将在其中使用 ALSA api。当然我也面临一个问题：我不能让我的司机工作。

所以这里有一些细节：

1.  正如我提到的，我的声卡是 PCI 设备。为了启动我的驱动程序，我不得不停止最初运行的 snd_intel8x0 驱动程序，因为它已经占用了设备并且无法访问（我的驱动程序的探测功能从未执行过）。所以我将 snd_intel8x0 驱动程序列入了黑名单（在 /etc/modporbe.d/blacklist.conf 中添加了一行）。从这一刻起，我的驱动程序就可以启动了——探测功能启动了。

2.  不幸的是，当 snd_intel8x0 驱动程序被列入黑名单时，ALSA api 似乎也消失了。我观察到以下几点：

    *   当我启动我的驱动程序时，我在 dmesg 中收到这些错误：

[...] alsa：未知符号 snd_card_register（错误 0）

[...] alsa：未知符号 snd_card_create（错误 0）

[...] alsa：未知符号 snd_card_free（错误 0）

[...] alsa：未知符号 snd_device_new（错误 0）

*   在文件 /proc/kallsyms 中没有 snd* 符号（如果原始驱动程序 snd_intel8x0 正在运行所有上述 snd* 函数在 /proc/kallsyms 中可用）

*   有文件夹 /proc/asound （如果 snd_intel8x0 正在运行，则存在 asound 文件夹）

所以我的问题：

1.  如何让我的 PCI 声卡使用我的驱动程序而不是 snd_intel8x0？

2.  如何为我的司机提供 ALSA？

3.  一般来说：当 snd_intel8x0 被列入黑名单时，为什么 ALSA 会消失？

提前谢谢你 Grts，内德林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:54:43.657

该驱动程序`snd-intel8x0`适用于 Intel 和兼容的 AC'97 控制器。如果你有这样的控制器，`snd-intel8x0`是正确的驱动程序使用。

如果您的设备确实需要新的东西，请扩展`snd-intel8x0`驱动程序。

如果你真的想写一个替代品`snd-intel8x0`，把后者放进去`blacklist.conf`是正确的方法。

* * *

当当前加载的模块与您尝试加载的模块不兼容时，您会收到“未知符号”错误。重新编译 ALSA 时，应先卸载所有`snd*`模块，然后再加载新模块。

# .net - 未绘制内存中的元文件

> ID：13175138
> 
> 赞同：0
> 
> 时间：2012-11-01T10:27:58.827
> 
> 标签：.net, gdi+, metafile

我需要创建一些内存中（不是基于文件的）元文件并显示它们。在`OnPaint`我的表单面板的处理程序中，我调用此代码：

```
Metafile metafile;
using( Graphics offScreenGraphics = Graphics.FromHwndInternal( IntPtr.Zero ) )
{
    IntPtr hDC = offScreenGraphics.GetHdc();
    metafile = new Metafile( hDC, EmfType.EmfPlusDual );
    offScreenGraphics.ReleaseHdc();
}

Graphics graphics = Graphics.FromImage( metafile );
graphics.FillRectangle( Brushes.LightYellow, 0, 0, 100, 100 );
graphics.DrawLine( Pens.Red, 50, 50, 100, 100 );

e.Graphics.DrawImage( metafile, 50, 50 ); 
```

但是，没有显示任何内容，无论我尝试在 中绘制什么`metafile`，它`PhysicalDimension`总是像 35x35 一样，考虑到单位是百分之一毫米，这太小了！

**注意：**当然这是一个人为的例子，我不会创建一个元文件只是为了用相同的方法绘制一些图形。我需要在我的应用程序中传递元文件。这只是一个简单的测试，以确保我能够使用该`DrawImage`方法绘制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:23:24.420

好的，这很容易。在我最初的示例中，我省略了我认为不必要的细节，例如*处理我使用的 GDI 对象*。但在元文件的情况下，处置你正在绘制它的对象似乎是**至关重要的。**`Graphics`只有在您这样做之后，元文件才“完成”并且您可以绘制它（顺便说一下，它还报告了一个正确`PhysicalDimension`的 ）。

所以上面的代码应该这样调整：

```
using( Graphics graphics = Graphics.FromImage( metafile ) )
{
    graphics.FillRectangle( Brushes.LightYellow, 0, 0, 100, 100 );
    graphics.DrawLine( Pens.Red, 50, 50, 100, 100 );
} 
```

# ios-simulator - XCODE 4.5 的 iOS 模拟器中用户数据文件的位置？

> ID：13175142
> 
> 赞同：4
> 
> 时间：2012-11-01T10:28:07.063
> 
> 标签：ios-simulator, osx-mountain-lion, xcode4.5

使用 XCODE 4.5 / Mountain Lion，iOS 模拟器的用户数据文件存储在哪里？

以前它们位于 ~/Library/Application Support/iPhone Simulator/[OS version]/Applications/[appGUID]/ 中，但没有更多。

我有 XCODE 4.5.1。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T04:33:41.787

好吧，笑话在我身上！在此版本的操作系统中，文件夹 ~/Library 是隐藏的。数据文件一直都在那里。

要永久取消隐藏它，请在终端中输入以下命令：

```
chflags nohidden ~/Library 
```

# java - Java Cipher DES 奇怪的结果

> ID：13175147
> 
> 赞同：0
> 
> 时间：2012-11-01T10:28:21.147
> 
> 标签：java, encryption, des

我有一个问题，我在过去三天一直试图解决。我必须使用 DES 加密字节数组以获得特定结果。然而，Java 中 DES 的默认实现（Javax.crypto.cipher、JDK 7、提供者 SunJCE 版本 1.7）似乎不起作用。当我有以下代码时：

```
 private void testDES() throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
        Cipher cipher = Cipher.getInstance("DES/ECB/NoPadding");
        byte[] keyByte = convertStringToBytes("00 00 00 00 00 00 00 00");
        byte[] data = convertStringToBytes("00 00 00 00 00 00 00 00");
        Key key = new SecretKeySpec(keyByte, "DES");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        System.out.println(hexadecimalString(cipher.doFinal(data)));
    } 

```

它打印 F4 DA 4D 97 BF CF 23 D9 而不是正确的结果 8C A6 4D E9 C1 B1 23 A7 （根据测试向量：[http ://common-lisp.net/project/clbuild/mirror/ironclad/test- vectors/des.testvec](http://common-lisp.net/project/clbuild/mirror/ironclad/test-vectors/des.testvec) ) hexadecimalString 和 convertStringToBytes 方法只是将字节转换为十六进制，反之亦然。有人可以帮我吗？找了好久，就是不知道怎么办。提前致谢。乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:57:22.217

我认为问题出在 convertStringToBytes 或 hexadecimalString 上。

您可以更换：

```
byte[] keyByte = convertStringToBytes("00 00 00 00 00 00 00 00");
byte[] data = convertStringToBytes("00 00 00 00 00 00 00 00"); 
```

和：

```
byte[] keyByte = new byte[8];
byte[] data = new byte[8]; 
```

...因为在 Java 中，数组被初始化为零。

当我运行相同的代码，但使用上述代码（而不是 convertStringToBytes）时，我得到了预期的结果（8C A6 ...）

**编辑：** 由于您仍然遇到问题，这是一个完整的程序。我的输出是：

```
8c a6 4d e9 c1 b1 23 a7 
```

下面的代码：

```
public class Main {
    public static void main(String[] args) throws GeneralSecurityException {
        Cipher cipher = Cipher.getInstance("DES/ECB/NoPadding");
        byte[] keyByte = new byte[8];
        byte[] data = new byte[8];
        Key key = new SecretKeySpec(keyByte, "DES");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] result = cipher.doFinal(data);
        StringBuilder str = new StringBuilder();
        for (byte b : result) {
             str.append(Integer.toHexString(0xff & b)).append(' ');
        }
        System.out.println(str);
    }
} 
```

# scheme - 方案获取列表中的最后一个元素

> ID：13175152
> 
> 赞同：8
> 
> 时间：2012-11-01T10:28:33.057
> 
> 标签：scheme, racket, r5rs

我试图编写一个简单的方案函数来返回列表的最后一个元素。我的功能看起来应该可以工作，但我设法在某些事情上失败了：

```
(define (last_element l)(
  (cond (null? (cdr l)) (car l))
  (last_element (cdr l))
))

(last_element '(1 2 3)) should return 3 
```

DrRacket 不断给我错误：

```
mcdr: contract violation
  expected: mpair?
  given: () 
```

既然`(null? '())`是真的，我不明白为什么这不起作用。

这是一个我认为我需要完成作业的函数（编写函数`last-element`不是赋值），并且说明说我不能使用内置函数`reverse`，所以我不能只做`(car (reverse l))`

如何修复此功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T10:40:08.900

你的语法完全错误。您在函数体周围有一组额外的括号，在子句周围还不够`cond`，而且您的递归案例甚至不在 内`cond`，因此无论测试成功还是失败都可以完成。以下程序应该有效：

```
(define (last_element l)
  (cond ((null? (cdr l)) (car l))
        (else (last_element (cdr l))))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T23:00:35.887

补充一点：在专业级的球拍中，[最后一个](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket/list..rkt%29._last%29%29)函数是[球拍/列表](http://docs.racket-lang.org/reference/pairs.html#%28mod-path._racket/list%29)库的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-06T02:32:35.740

您可以通过调用检索列表的最后一个元素

`(define (lastElem list) (car (reverse list)))`

或者，递归使用 if 内置

`(define (last list) (if (zero? (length (cdr list))) (car list) (last (cdr list))))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T14:19:13.377

您也可以这样做。首先通过 cdring 找到列表的长度。然后使用 list-ref x 给出列表的 x 元素。例如 list-ref yourlistsname 0 给出第一个元素（基本上是列表的汽车。）和 (list-ref yourlistsname (-length 1)) 给出列表的最后一个元素。

# c# - Excel 2007 COM 无法与 MVC 网站一起部署？

> ID：13175154
> 
> 赞同：0
> 
> 时间：2012-11-01T10:28:35.687
> 
> 标签：c#, asp.net-mvc, iis, windows-7, excel-interop

我有一个由 MVC C# (Visual Studio 2010) 编写的网站。我使用 Microsoft Excel 2007 COM 将一些数据导出到 excel 文件，然后将其发送到 Web 客户端。（因为excel文件有点复杂所以我没有使用OpenXML）

当我在本地计算机上运行调试代码时，一切都很好。但是当我尝试将网站部署到 IIS 服务器时（服务器已经安装了 Office 2007 和 Visual 2010），导出功能根本不起作用。当来自客户的请求到来时，即使是 excel 进程也不会启动。其他其他功能运行得非常好，但与 Excel 相关。

请帮助我找出问题所在，以及如何解决这个问题。提前致谢！

在我的本地 PC 上调试时，服务器上的 PS 本地调试成功完成，结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:22:35.080

您不应该从 asp.net 应用程序自动化 Office 应用程序：

[http://support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

“微软目前不推荐也不支持任何无人值守、非交互式客户端应用程序或组件（包括 ASP、ASP.NET、DCOM 和 NT 服务）的 Microsoft Office 应用程序自动化，因为 Office 可能表现出不稳定的行为和/或在此环境中运行 Office 时出现死锁。”

# c - 哪个是表示负值力量的最佳方式

> ID：13175157
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:28:43.693
> 
> 标签：c

我想用 C 程序计算一些材料的介电常数。计算介电常数的公式是

```
E= Cx/Co;
Co= 15.88pF = 15.88*10^-12;
Cx=1/W.C;
W= 2*pi*f=2*pi*250000;
C= Cs/(1+tan^2(theta));
Cs=1;
theta=0 degree; 
```

我试图用下面的代码在 C 中实现上述公式。

```
float E, Cx, Co= 15.88*10^-12;, Cs=1.0; f=250*10^3,Pi=3.14,theta=0.0;

angle= theta/180*pi;  // to convert degree to radians
W= 2*pi*f;
C= Cs/(1+tan^2(angle));
Cx=1/W.C;
E= Cx/Co;

printf("permitivity value: %.10f",E); 
```

我对功率值的表示感到困惑，例如

> 10^-12，tan^2（角度）。

我代表的方式正确吗？我没有得到我手动计算的确切值。有没有更好的方法来表示功率值？我想在点后显示 10 位数的浮点值，例如 0.0000000000。但我只能在点之后显示六位数字。

任何人都可以帮助我计算介电常数的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:32:31.227

仅当您阅读过 C 运算符时...

运算符执行按位异或，这`^`不是您想要的。您需要使用标准库函数`pow()`from`<math.h>`来计算幂，或者使用科学记数法：

```
Co = 15.88E-12;

C = Cs / (1 + pow(tan(angle), 2)); 
```

另请注意，这不是数学，这是 C，你**不能**写`tan ^ 2(argument)`，你只能调用一个函数而不是数学符号中的“函数平方”......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:37:01.910

您的问题是您认为数学表达式可以用 C 语言以相同的方式编写，这是不正确的。即使是相同的符号也有完全不同的含义。首先学习一点 C 语法。

# android - 一个viewpager页面中的两个片段

> ID：13175160
> 
> 赞同：8
> 
> 时间：2012-11-01T10:29:08.857
> 
> 标签：android, android-fragments, android-viewpager

目前，我通过 FragmentPagerAdapter 很好地为每个 viewpager 的页面使用一个片段。但现在我想在平板电脑的一个 viewpager 页面内使用两个面板视图。例如，左侧是列表视图，右侧是网格视图。有谁知道我怎样才能做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T02:30:57.150

最后我在一个片段中使用两个视图并自己控制数据。但我注意到支持包和框架中有一个新功能，因此我可以在片段中添加片段。在此处查看答案：[片段内部的片段](https://stackoverflow.com/questions/6672066/fragment-inside-fragment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T09:12:12.347

如果你想拥有像谷歌市场这样的东西，你可以独立创建两个片段，然后在 adater 中添加代码

```
@Override
public float getPageWidth(int position) {
if (position == 0) {
return(0.5f);
} else {
return (1.0f);       
}
} 
```

# javascript - 什么是 JavaScript 中 REST API 客户端库的好例子

> ID：13175161
> 
> 赞同：21
> 
> 时间：2012-11-01T10:29:08.727
> 
> 标签：javascript, api, rest

我正在寻找将 REST API 包装在轻量级 JavaScript 客户端中的最佳实践样式。

在过去，我见过以如下风格实现的库：

```
var request = new SearchRequest(apikey);
request.query = "search term";
request.send(function(results) {
    console.log(results);
}); 
```

或者更明确地包含 HTTP，例如：

```
api.get("search", "search term", function(results) {
    console.log(results);
});
api.post("comment", comment, function(results) {
    console.log(results);
}); 
```

或者以更高的层次包装：

```
api.search("search term", function(results) {
    console.log(results);
});
api.createComment(comment, function(results) {
    console.log(results);
}); 
```

您最近看到了哪些包装 REST API 的现代 JavaScript 客户端库的好例子。不关心实现细节，只关心 API 设计。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-01T10:51:02.830

我观看了一个关于良好 API 设计的非常好的视频。绝对值得一看。

[RESTful API 设计 - 第二版](https://www.youtube.com/watch?v=QpAhXa12xvU)

除了上述视频之外，您还可以通过访问[http://bit.ly/M28lOu](http://bit.ly/M28lOu)获得免费书籍**Web API 设计 - 开发人员喜爱的制作接口**

关于包装器，可能值得考虑以下几点：

1.  **使你的包装一致。**

采用您正在使用的编程语言或社区的标准、命名约定等，以使包装器对使用它的人来说尽可能自然。

2.  **包装还是抽象？就是那个问题。**

通过***Wrapping***，您可以尽可能地模仿 REST API 方法和结构，但只是让一些困难的事情变得更容易。这种方法的最大优点之一是它可以在目标 REST API 升级时更容易升级。

*当目标 REST API 很复杂或行为和外观非标准时，***抽象很有用。***在这种情况下，您的包装器方法和调用可能根本不像您的目标 REST API 方法，但最终会简化那些使用您的包装器的人的生活（希望如此）。*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-10T14:45:01.723

检查这些：

*   [Restangular](https://github.com/mgonto/restangular)（需要角度）
*   [Resful.js](https://github.com/marmelab/restful.js)（类似于 Restangular，但没有 angular）
*   [cujojs/休息](https://github.com/cujojs/rest)

StackOverflow 上还有其他类似的讨论，比如 [JavaScript REST 客户端库](https://stackoverflow.com/questions/921942/javascript-rest-client)*

# jquery - Autocomplete.js 不适用于键盘向上和向下箭头键

> ID：13175168
> 
> 赞同：7
> 
> 时间：2012-11-01T10:29:32.757
> 
> 标签：jquery, jquery-autocomplete

我正在使用以下 jquery ui 自动完成功能。这与鼠标完美配合，但通过键盘，我无法选择任何值。看看代码。

```
$("#"+textBoxId).autocomplete("../common
   /autoSuggestValues.php?index="+index+"&
  randValue="+Math.random(), {
    selectFirst: false,
    width:textBoxWidth,
    minChars: 2,
    autoFill: false,
    scroll: true,
    scrollHeight: 120,
    formatItem: function (rowdata) {
        var details = rowdata[0].split('@#@');
        return details[0];
    }
});

$('#'+textBoxId).result(function (event, data, formatted) { 
    var det   =  data[0].split("@#@");
    if(det[0] != 'No Match Found') {
        $('#'+textBoxId).val($.trim(det[0])).css('border','');  
        $('#'+hiddenId).val(det[1]);
        processAutoSuggOptFunc(optionalFunction); //process the optional  
     function using the another built function "processAutoSuggOptFunc"
    } else {
        $('#'+textBoxId).val('');   
        $('#'+hiddenId).val('');    
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T11:04:59.643

对我来说，提供焦点方法可以解决： `searchField.autocomplete({ ... focus: function (event, ui) { event.preventDefault(); jQuery(this).val(ui.item.suggestion); }, ... });`

参见这里：http: [//yuji.wordpress.com/2011/09/22/jquery-ui-autocomplete-focus-event-via-keyboard-clears-input-content/](http://yuji.wordpress.com/2011/09/22/jquery-ui-autocomplete-focus-event-via-keyboard-clears-input-content/)

# jquery - 谷歌分析与 JQuery 代码冲突

> ID：13175169
> 
> 赞同：0
> 
> 时间：2012-11-01T10:29:35.267
> 
> 标签：jquery, jquery-mobile, google-analytics, google-analytics-api

我遇到了 Google 分析与我的代码冲突的问题。我正在使用的系统将 Google 分析作为第一个脚本加载。这无法更改，因此我需要在不重新排序脚本的情况下找到解决此冲突的方法。

代码在这里。[http://jsfiddle.net/2j6Zd/](http://jsfiddle.net/2j6Zd/)

拆除时

```
 $("#slide-right").pageSlide({
        width: "210px",
        direction: "right"
    }); 
```

有用。所以不知何故，我需要以不同的方式或其他方式来称呼它。

请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:38:11.123

听起来您粘贴/修改 _gaq 代码段的方式有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:26:32.180

我有解决办法。这是行 $("body").contents().wrapAll(psBodyWrap);

这也将 _gaq 片段包装在里面。所以它开了两次。

解决方案是。

$("body").contents().not("footer").wrapAll(psBodyWrap);.

_gaq 片段位于页脚中。因此，从包装中排除它可以让一切正确执行。这表明它与谷歌分析代码直接相关。它可能不是代码冲突，但仍然是冲突。

# php - PHP对数组中的重复元素进行分组

> ID：13175174
> 
> 赞同：0
> 
> 时间：2012-11-01T10:29:50.557
> 
> 标签：php, arrays, repeat

如何将数组分成相同元素的组（连接字符）。例如，我有这个数组：

```
Array(
    [0] => 1
    [1] => 1
    [2] => 1
    [3] => 2
    [4] => 2
    [5] => 1
) 
```

并希望将所有相同的数字组合在一个元素中，将它们与串联在一起以获得如下结果：

```
Array(
    [0] => 111
    [1] => 22
    [2] => 1
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:46:10.843

通过将所有相同的元素连接在一起来对它们进行分组（不适用于仅连接相邻的相同元素）

```
$arr = array (1,1,1,2,2,1);
$sum = array_count_values($arr);
array_walk($sum, function(&$count, $value) { 
  $count = str_repeat($value, $count); 
});
print_r($sum); 
```

输出

> 数组（ [1] => 1111 [2] => 22 ）

或仅连接相邻的相同元素

```
$prev=null; 
$key=0; 
foreach ( $arr as $value ) { 
  if ($prev == $value){ 
    $res[$key] .= $value;
  } else { 
    $key++; 
    $res[$key] = $value; 
    $prev=$value; 
  } 
}
print_r($res); 
```

输出

> 数组（ [1] => 111 [2] => 22 [3] => 1 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:42:06.373

这里有两个函数 1 将返回

```
Array
(
    [1] => Array
        (
            [0] => 1
            [1] => 1
            [2] => 1
            [3] => 1
        )

    [2] => Array
        (
            [0] => 2
            [1] => 2
        )

) 
```

作为输出，第二个将返回

```
Array
(
    [1] => 1111
    [2] => 22
) 
```

作为输出

```
$array = array(
    1,1,1,2,2,1
);

print_r(groupArray($array));

print_r(groupSame($array));

function groupArray($array){
    $temp = array();
    foreach($array as $value){
        if(!isset($temp[$value])){
            $temp[$value] = array();
        }
        array_push($temp[$value],$value);
    }
    return $temp;
}

function groupSame($array){
    $temp = array();
    foreach($array as $value){
        if(!isset($temp[$value])){
            $temp[$value] = "";
        }
        $temp[$value] .= $value;
    }
    return $temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:39:44.053

```
$newarray = array_unique($oldarray);
$count = array_count_values($oldarray);
foreach($newarray as &$val){ 
 $val = str_repeat($val,$count[$val]);
} 
```

[http://codepad.org/FUf0n8sz](http://codepad.org/FUf0n8sz)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:40:28.527

```
<?php
$i=0;
foreach($Arrays as $key=>$val) {
    if (!isset($array[$i]))
       $array[$i]=$val;
    else if (!isset($mem) || $val==$mem)
       $array[$i]=10*$array[$i]+$mem;
   else
     $i++;
   $mem=$val;
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T10:55:01.430

```
$array = array(1,1,1,2,2,1);
$start = "";
$new_array = array();
foreach($array as $v){
    $v = (string)$v; 
    if($start==$v){
        $count = count($new_array) - 1;
        $val = $new_array[$count].$v;
        $new_array[$count] = $val;
    } else{
        $new_array[] = $v;
    }
    $start = $v;    
}
var_dump($new_array); 
```

测试和它的工作..

输出 >`array(3) { [0]=> string(3) "111" [1]=> string(2) "22" [2]=> string(1) "1" }`

# python - 设置控制台宽度（Windows、Python）

> ID：13175175
> 
> 赞同：5
> 
> 时间：2012-11-01T10:29:54.190
> 
> 标签：python, console, height, width, set

我正在使用 Python 开发一个基于文本的小型控制台游戏。因为我使用了一些 ASCII 艺术，所以我必须确保在我的游戏启动后每个人的控制台宽度都是相同的。谁能告诉我如何设置控制台的宽度和高度？:)

格雷茨

弗洛

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-10-28T11:18:44.137

a) 检查终端窗口的大小

```
import os

x = os.get_terminal_size().lines
y = os.get_terminal_size().columns

print(x)
print(y) 
```

b) 更改终端窗口的大小

```
import os

cmd = 'mode 50,20'
os.system(cmd) 
```

c) 更改终端窗口的颜色

```
import os

cmd = 'color 5E'     
os.system(cmd) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T10:43:00.010

最简单的方法是执行*mode*命令。

例如对于 80x25 窗口：

```
C:\> mode con: cols=25 lines=80 
```

或者在 Python 中：

```
subprocess.Popen(["mode", "con:", "cols=25", "lines=80"]) 
```

# java - 在 Java 应用程序中执行 Neo4j 的密码查询时出现异常

> ID：13175176
> 
> 赞同：0
> 
> 时间：2012-11-01T10:30:02.667
> 
> 标签：java, neo4j, graph-databases

我是 Neo4j 图形数据库的新手，我想从 java Application 创建 CyperQueries 。我正在使用上面的 neo4j 手册

```
http://docs.neo4j.org/chunked/milestone/query-create.html 
```

我正在从 java 应用程序创建节点，如下所示

```
public class CreateQuery
{
    public static final String DBPATH="D:/Neo4j/CQL";

    public static void main(String args[])
    {
        GraphDatabaseService path=new EmbeddedGraphDatabase(DBPATH);
        Transaction tx=path.beginTx();
        try
        {
        Map<String, Object> props  = new HashMap<String, Object>();
        props .put( "Firstnamename", "Sharon" );
        props .put( "lastname", "Eunis" );

        Map<String, Object> params = new HashMap<String, Object>();
        params.put( "props", props  );

        ExecutionEngine engine=new ExecutionEngine(path);
        ExecutionResult result=engine.execute( "create ({props})", params );
        System.out.println(result);
        tx.success();
        } 
        finally
        {
             tx.finish();
             path.shutdown();

        }
    }
} 
```

我收到上述错误。我不知道这个错误，请任何 1 帮助尽快解决。

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/googlecode/concurrentlinkedhashmap/ConcurrentLinkedHashMap$Builder
    at org.neo4j.cypher.internal.LRUCache.<init>(LRUCache.scala:30)
    at org.neo4j.cypher.ExecutionEngine$$anon$1.<init>(ExecutionEngine.scala:84)
    at org.neo4j.cypher.ExecutionEngine.<init>(ExecutionEngine.scala:84)
    at com.neo4j.CreateQuery.main(CretaeQuery.java:33)
Caused by: java.lang.ClassNotFoundException: com.googlecode.concurrentlinkedhashmap.ConcurrentLinkedHashMap$Builder
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:13:23.450

您可能需要添加此库的最新版本（Java 的 ConcurrentLinkedHashMap）：

[http://concurrentlinkedhashmap.googlecode.com/files/concurrentlinkedhashmap-lru-1.3.1.jar](http://concurrentlinkedhashmap.googlecode.com/files/concurrentlinkedhashmap-lru-1.3.1.jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:33:42.967

您共享的代码工作正常。我认为问题在于您的导入语句。它们应该是这样的：

```
import java.util.HashMap;
import java.util.Map;
import org.neo4j.cypher.javacompat.ExecutionEngine;
import org.neo4j.cypher.javacompat.ExecutionResult;
import org.neo4j.graphdb.GraphDatabaseService;
import org.neo4j.graphdb.Transaction;
import org.neo4j.kernel.EmbeddedGraphDatabase; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-28T10:49:04.527

它看起来像一个库错误。也许您导入了错误的版本？

以防万一，我应该指出您打算使用 GDB 工厂来构建嵌入式实例：

```
graphDb = new GraphDatabaseFactory().newEmbeddedDatabase(DB_PATH); 
```

不确定它会有所作为。

# ruby-on-rails - 在rails中动态创建数据库表

> ID：13175178
> 
> 赞同：0
> 
> 时间：2012-11-01T10:30:11.897
> 
> 标签：ruby-on-rails, activerecord

目前我通过`ActiveRecord`. 我会提前知道表名，然后创建表`rails generate model modelname column1:string ...`。

但是现在，我得到了这个要求，即表名是未知的，以及将有多少个表。

例如： 在 directory`Projects`中，有许多子目录，例如 : `Projects_A`, `Project_B`, `Project_C`... 我需要为每个项目创建单独的表。但你不知道会有多少项目。我需要在我的代码中动态创建这些表。如何在我的代码中实现这一点？我是否使用 ActiveRecord 来实现这一目标或任何其他方法？

像这样的代码：

```
list = maintain_a_dir_list()

Dir.entries( dir ).each { |e|
  if e is not in list
    create_a_table_after_e_name
  end
} 
```

**在这里，我将解释为什么要创建这样的表：**

我上面提到的目录名及其子文件夹名是不真实的。所以让我们把这个故事重新讲一遍。

我是负载测试员。我为我们公司的一个项目做负载测试。假设项目的名称是`Project_A`. `Project_A`有很多版本，比如1.0、2.0等等。所以在每个版本中我都会做多轮负载测试来保证产品的质量。

所以项目、版本和负载测试报告之间的关系很简单：项目包含许多版本。每个版本都包含许多在不同日期执行的负载测试报告。

loadtest 报告中的信息如下：

交易名称 | 最短时间 | 平均响应时间 | 最大时间

交易_01 | 1.0s | 2.0s | 3.0s

交易_02 | 0.5s | 1.5s | 4.0s

...

为了将报告信息存储在数据库中，我创建了一个名为`transactions_table`. 表是这样的：

报告名称 | 交易名称 | 分钟 | 平均 | 最大限度

20121001_100users_4hours | 交易_01 | 1.0 | 2.0 | 3.0

20121001_100users_4hours | 交易_02 | 1.0 | 2.0 | 3.0

...

20121002_100users_2 小时 | 交易_01 | 1.5 | 2.1 | 2.5

20121002_100users_2 小时 | 交易_02 | 1.1 | 2.1 | 2.7

...

...

然后我想获取所涉及的版本信息。所以我创建了另一个名为`reports_table`. 表是这样的：

版本 | 报告名称

项目_a_1.0 | 20121001_100users_4hours

项目_a_1.0 | 20121002_100users_2hours

...

项目_a_2.0 | 20121101_50users_1hours

项目_a_2.0 | 20121102_50users_2hours

...

...

当然，我公司的项目不止一个。会有`Project_B`,`Project_C`和`D`... 所以版本表又出现了，由项目名称及其版本组成。

这是我第一次设计数据库表的关系。所以我不知道我组织表格的方式是否正确。

首先，我只是觉得我可以把所有的交易数据——不管它属于哪个项目或版本——放在`transactions_table`. 然后我意识到来自不同项目或版本的报告名称可能相同。然后它不能分开`transactions_table`使用`select * from transactions_table where report_name = "xxxx"`。并且`transactions_table`'s 的大小将比其他两个表增长得更快。

所以这就是为什么我正在考虑将不同项目中的报告存储到不同的表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:45:02.833

最好在项目表中使用文件夹名称字段？

# excel - 如何在 Excel 中其值始终在变化的单元格中找到最小值？

> ID：13175179
> 
> 赞同：0
> 
> 时间：2012-11-01T10:30:15.283
> 
> 标签：excel

在单元格 a1 中，值总是在变化。我想跟踪 a2 中 a1 的最小值。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:32:28.453

1.  将 A1 的值存储在 A2 中。
2.  实现一个响应 A1 变化的事件。
3.  触发事件时，将 A1 与 A2 进行比较，如果 A1 较小，则存储新值。

* * *

这假设 A2 中已经有一个值：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$A$1" Then
        Dim a2val As Variant
        Dim a1val As Variant
        a2val = Range("$A$2").Value2
        a1val = Range("$A$1").Value2
        If a1val < a2val Then
            Range("$A$2").Value2 = a1val
        End If
    End If
End Sub 
```

# python - 是否可以使用 Python 编写 Windows 服务？

> ID：13175185
> 
> 赞同：5
> 
> 时间：2012-11-01T10:30:42.403
> 
> 标签：python, windows

Python 有一个`win32service`似乎允许创建 Windows 服务的包。我已经仔细检查了可用的谷歌示例，例如这个： [Is it possible to run a Python script as a service in Windows? 如果可能，怎么做？](https://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how)

我已将代码放入`~/Documents/test.py`并在提升的命令提示符下执行以下命令：

```
> python test.py install
> python test.py debug 
```

不幸的是，我尝试的每个示例都失败并出现错误：

```
Debugging service TestService - press Ctrl+C to stop.
Error 0xC0000005 - Python could find the service class in the module

AttributeError: 'module' object has no attribute 'AppServerSvc'

(null): (null) 
```

我已经在 Windows 7 64 位和 Windows 8 64 位上使用最新版本的 ActivePython（2.7.2.5 32 位）对其进行了测试。当然，如果服务是通过服务管理器手动启动的，它也不会启动。

我做错了什么还是 Python 不打算用于现代操作系统上的服务创建？也许我需要特定版本的 windows/python/pywin32？当然，我可以从 Windows XP 开始手动测试所有组合，但这需要很多时间:(。也许有人已经有 Python 和 Windows 服务的经验，可以提示我我做错了什么？

**更新**

在 Windows XP 32 位虚拟机上测试（相同的代码，相同的 activepython 发行版） - 相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:15:48.657

PyWin32 的 ActiveState 构建中似乎存在错误。安装 ActiveState python 2.7.2.5 并运行上面链接的示例代码，我得到了与您报告的相同的错误。

但是如果我下载[Python 2.7.3](http://python.org/download/)（2.7.2.5 似乎无法下载）并添加[PyWin32 build 214](http://sourceforge.net/projects/pywin32/files/pywin32/)（ActiveState 似乎使用的是 PyWin32 的 214 版本）。然后一切似乎都很好。我还尝试了最新版本的 PyWin32 (218)，它也可以正常工作。

所以我想你可以尝试向 ActiveState 报告问题（我没有与他们签订支持合同），除非你有使用 ActiveState 的要求，否则你可以切换到标准的 Python 版本。

多年来，我一直在使用标准 Python 构建的服务，在从 Windows 2000 到 Server 2008 和 Windows 7 的所有设备上运行，没有任何问题。所以我有充分的理由相信它也对你有用。

如果您想使用 ActiveState 来解决问题，那么该错误似乎出现在 LoadPythonServiceInstance 函数中的 PythonService.cpp 构建中。我查看了创建的注册表项，它们看起来很好，是 PythonService.exe 无法加载您的类。根据错误消息，它似乎已经正确加载了模块，只是找不到类。

# wpf - 如何在 WPF 应用程序中使用 sqlite（实体框架）

> ID：13175188
> 
> 赞同：1
> 
> 时间：2012-11-01T10:30:50.150
> 
> 标签：wpf, entity-framework-4, system.data.sqlite

我在我的 WPF 项目中使用 sqlite 数据库而不是 sql server 2008。

我正在使用实体框架来执行 CRUD 操作。

在我的机器上工作得很好。

但是当我发布并在其他机器上运行时应用程序不起作用

问题是应用程序试图连接到该机器上不存在的数据库。

```
<add name="PersonalExpenseDBEntities" connectionString="metadata=res://*/Model1.csdl|res://*/Model1.ssdl|res://*/Model1.msl;provider=System.Data.SQLite;provider connection string=&quot;data source=E:\sqlLite\db\PersonalExpenseDB.s3db&quot;" providerName="System.Data.EntityClient" /> 
```

如您所见，数据源指的是数据库文件

```
data source=E:\sqlLite\db\PersonalExpenseDB.s3db 
```

它出现在我的机器上，但不在其他机器上。

所以，自然它不会在其他机器上找到数据库文件并给我错误

我的问题是：如何使数据库成为应用程序的本地数据库？即，当我发布应用程序时，应将数据库文件复制到应用程序本地。

我得到的错误是

```
System.Data.EntityException: The underlying provider failed on Open. ---> System.Data.SQLite.SQLiteException: Unable to open the database file at System.Data.SQLite.SQLite3.Open(String strFilename, SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) at System.Data.SQLite.SQLiteConnection.Open() at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) --- End of inner exception stack trace --- at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) at System.Data.EntityClient.EntityConnection.Open() at System.Data.Objects.ObjectContext.EnsureConnection() at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) at System.Data.Objects.ObjectQuery`1.Execute(MergeOption mergeOption) at SqlLiteDatabase.List.Window_Loaded(Object sender, RoutedEventArgs e) at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs) at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e) at System.Windows.BroadcastEventHelper.BroadcastEvent(DependencyObject root, RoutedEvent routedEvent) at System.Windows.BroadcastEventHelper.BroadcastLoadedEvent(Object root) at MS.Internal.LoadedOrUnloadedOperation.DoWork() at System.Windows.Media.MediaContext.FireLoadedPendingCallbacks() at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks() at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget) at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget) at System.Windows.Media.MediaContext.Resize(ICompositionTarget resizedCompositionTarget) at System.Windows.Interop.HwndTarget.OnResize() at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg, IntPtr wparam, IntPtr lparam) at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled) at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled) at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o) at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs) at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs) at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam) at MS.Win32.UnsafeNativeMethods.ShowWindow(HandleRef hWnd, Int32 nCmdShow) at System.Windows.Window.ShowHelper(Object booleanBox) at System.Windows.Window.Show() at System.Windows.Window.ShowDialog() at SqlLiteDatabase.MainWindow.button1_Click(Object sender, RoutedEventArgs e) 
```

# youtube-api - 如果您使用 pagetokens，youtube 数据 api 分页是否一致？（v3 数据 API）

> ID：13175190
> 
> 赞同：4
> 
> 时间：2012-11-01T10:31:10.623
> 
> 标签：youtube-api

YouTube V3 数据 API 为来自搜索端点的分页结果集提供“页面令牌”。

如果您使用页面标记，则查看的数据集是否一致？

例如，如果对视图计数有一个排序，它可能会随着时间而变化，那么在多个查询中保证对总结果集的排序，因此保证第一页上最低结果的排序大于最高结果在下一页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T14:57:51.153

使用页面令牌时不保证排序。（在 v1/v2 中使用 start-index 时也不能保证。）如果在获取一页和下一页之间后端数据源的顺序发生了变化，那么检索下一页将反映更新的顺序。

# sql - ms sql 将字符串转换为日期，将顺序从 yyyy-mm-dd 更改为 dd.mm.yyyy

> ID：13175192
> 
> 赞同：1
> 
> 时间：2012-11-01T10:31:21.167
> 
> 标签：sql

我有一个名为type`VALUE`的字段`VARCHAR2`

字符串采用这种格式：`yyyy-mm-dd` 是否可以将其更改为：`dd-mm-yyyy`

然后（如果可能，再次）以这种格式将其转换为日期？

我尝试过的是：

```
SELECT convert(varchar, getdate(), 110) 
```

但这仅适用于当前时间。有没有办法做到这一点？

编辑：这里我的代码是：

```
select
p1.VALUE as Sdate
from Process p 
LEFT JOIN PARAMETER p1 on p1.WP_ID=p.ID AND p1.NAME = 'Sdate'
WHERE p.TYPE = 'Marketing' and convert(varchar, convert(date,p1.value), 103) ='22.08.2012' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:33:16.593

`104`将转换为`dd.mm.yyyy`格式

```
SELECT CONVERT(VARCHAR, GETDATE(), 104) 
```

您的查询应该是：

```
SELECT p1.VALUE AS Sdate
FROM Process p 
LEFT JOIN PARAMETER p1 
       ON p1.WP_ID = p.ID 
      AND p1.NAME = 'Sdate'
WHERE p.TYPE = 'Marketing' 
  AND CONVERT(VARCHAR, CONVERT(DATE, p1.value), 104) = '22.08.2012' 
```

### 请参阅[此 SQLFiddle](http://www.sqlfiddle.com/#!3/b685e/22)中的示例。

请注意，您应该将列类型保留为`DATE`要存储日期的位置。此外，总是更喜欢`yyyyMMdd`格式。

看看[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:34:19.950

```
 SELECT convert(varchar, columnname, 103) from tablename
        or
        SELECT convert(varchar, convert(date,'2012/11/01'), 103)
        or
       SELECT convert(varchar, convert(date,columnname), 103) from tablename
=================================
select
p1.VALUE as Sdate
from Process p 
LEFT JOIN PARAMETER p1 on p1.WP_ID=p.ID AND p1.NAME = 'Sdate'
WHERE p.TYPE = 'Marketing' and convert(varchar, convert(date,p1.value), 103) ='22/08/2012' 
```

# java - Java 数组约定：String[] args 与 String args[]

> ID：13175193
> 
> 赞同：22
> 
> 时间：2012-11-01T10:31:23.757
> 
> 标签：java, coding-style, conventions

我目前正在以导师的身份教授学生编程约定。我告诉他们，他们可以在[Oracle 代码](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)约定中找到大多数约定。

在我的上一个教程中，一个学生问：

```
public static void main(String args[]) 
```

或者

```
public static void main(String[] args) 
```

是按惯例写的，或者如果有区别。我以前从未见过第一个版本，所以我很确定第二个是约定。但我没有那个来源。

**你能给我一个来源（最好来自oracle，就像我上面链接的页面），它可以清楚地说明两者中的哪一个是约定？**

## 两个表达式的等价

我知道这两个表达式是等价的：

[JLS 7](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)，页。292 条状态：

```
An array type is written as the name of an element type followed 
by some number of empty pairs of square brackets []. 
```

但也在第。293：

```
The [] may appear as part of the type at the beginning of the declaration, 
or as part of the declarator for a particular variable, or both.

For example:
    byte[] rowvector, colvector, matrix[];
This declaration is equivalent to:
    byte rowvector[], colvector[], matrix[][]; 
```

但这对约定问题没有帮助。

所以它们是相同的（不是规格，但这里有一个[来源](https://stackoverflow.com/a/5997297/562769)）。它们在一个小例子中产生相同的字节码，所以我很确定它们在实践中也是相同的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T10:35:49.280

这不是来自 Oracle，但我认为它会有所帮助。

它来自 Kathy Sierra 的书**SCJP Sun Certified Programmer for Java 6**

```
int[] key;
int key []; 
```

*声明数组引用时，应始终将数组方括号紧跟在声明的类型之后，而不是在标识符（变量名）之后。这样，任何阅读代码的人都可以很容易地看出，例如，key 是对 int 数组对象的引用，而不是 int 原语。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:40:26.533

[Oracle 的代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)没有明确说明它，但在所有示例中，它们在声明的类型之后立即使用括号。

在他们的示例代码（在这种情况下应该被认为是权威的）中，他们使用：

`private Object[] instanceVar3;`

同样在[详细说明变量初始化的页面](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141270.html#18761)上，他们有这个示例，该示例演示了将括号放在变量名后面可能出现的问题：

`int foo, fooarray[]; //WRONG!`

有人可能会想这样做，并认为自己声明了几个数组。尽管这在语法上是正确的（正如 brimborium 在评论中指出的那样），但甲骨文并没有将大写字母放在那里。通过将括号放在类型后面以清楚地显示您想要声明的内容，最好是安全，清晰并且减少类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:41:56.857

后期括号有一个晦涩的用例：

```
int x, xs[], xxs[][]; 
```

这有多大用处，我让读者来评判。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:01:52.520

在数组类型之后立即使用 [] 的一个优点是：如果要声明多个数组，则可以这样编写： int[] a,b,c; 但是如果你在数组名之后使用 []，那么我们必须在每个数组变量之后使用 []，例如： int a[],b[],c[];

# database - Oracle 右连接 3 个表，但只需要匹配 1 个

> ID：13175194
> 
> 赞同：0
> 
> 时间：2012-11-01T10:31:24.850
> 
> 标签：database, oracle, plsql

我不确定标题是否与问题相关，但我没有找到更好的。这是问题所在 - 我有 4 张桌子，比方说：

产品（ID，产品名称），
价格A（产品ID，价格），价格B（
产品ID，价格），价格C（产品
ID，价格）。

我需要做的是编写一个选择，它将仅显示价格为 priceA 或 priceB 或 priceC 或 a、b、c 的任意组合的产品

我怎么能这样做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:49:35.540

您可以尝试使用 UNION 来组合结果：

```
select p.id,
   p.name,
   a.price
FROM products p INNER JOIN pricea a ON p.id = a.product_id
UNION
select p.id,
   p.name,
   b.price
FROM products p INNER JOIN priceb b ON p.id = b.product_id
UNION
select p.id,
   p.name,
   c.price
FROM products p INNER JOIN pricec c ON p.id = c.product_id 
```

请参阅 SQLFiddle：[http ://sqlfiddle.com/#!4/85519/15](http://sqlfiddle.com/#!4/85519/15)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:35:40.867

你有没有尝试过这样的事情：

```
select p.id,
  p.name,
  a.price Price_A,
  b.price Price_B,
  c.price Price_C
from products p
left join pricea a
  on p.id = a.product_id
left join priceb b
  on p.id = b.product_id
left join pricec c
  on p.id = c.product_id
where a.price is not null
  or b.price is not null
  or c.price is not null 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/85519/8)

# asp.net - ASP.NET 或 ASP.NET MVC

> ID：13175200
> 
> 赞同：0
> 
> 时间：2012-11-01T10:31:50.620
> 
> 标签：asp.net, asp.net-mvc

我有一个一般性问题。我想为业务流程建模开发一个 Web 应用程序。该应用程序是使用 c# 和 WPF 作为桌面应用程序软件构建的，现在我想将它开发为 Web 应用程序。我应该选择什么技术？

我试图自己找到它，但关于这个话题有很多不同的看法。是否有任何一般规则或方法可以帮助我做出决定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:45:05.937

你的问题不是很有建设性。您需要与一些架构师交谈以了解您的业务以及填补选择技术空白的要求。回答您的问题是选择**ASP.NET webforms/MVC**还是选择与 .NET 不同的平台来满足您的需求是非常模糊的。

一般来说，如果您打算使用 WPF 移植在桌面上开发的整个应用程序，您可以考虑移植到 Silverlight，这*可能会将*您的成本降低到 90%（可能），您将能够重用您编写的所有代码至今。但这完全是您的电话和您的业务需求。

# webview - UIWebView，启用触摸保存图像，

> ID：13175204
> 
> 赞同：1
> 
> 时间：2012-11-01T10:31:56.030
> 
> 标签：webview, touch

这是我的代码，但不工作

```
 `- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPress:)];
    longPress.minimumPressDuration = 2;

```
[self.webview addGestureRecognizer:longPress];
[longPress release]; 
```

} 
```

*   `(void)longPress:(UILongPressGestureRecognizer*)gesture { if ( gesture.state == UIGestureRecognizerStateEnded ) { NSLog(@"Long Press");

    //do something`

} }`

# c# - 各种用户控件上的调用方法

> ID：13175208
> 
> 赞同：0
> 
> 时间：2012-11-01T10:32:07.270
> 
> 标签：c#, winforms, user-controls

我在我的应用程序中创建了许多自定义用户控件。它们是使用 Validates() 方法验证自己的内容的控件。当我单击表单上的按钮时，我想在任何具有该方法的控件上调用此方法。实现这一目标的最佳方法是什么？

我能够识别控件并检查它们是否具有该方法，但目前不确定如何调用它。（所有控件都以“cc”开头）

```
 foreach (Control c in this.Controls)
        {
            if (c.Name.Length > 2 && c.Name.Substring(0, 2).Equals("cc"))
            {
                var type = c.GetType();
                if (type.GetMethod("Validates") != null)
                {
                    // Call method here
                }
            }
        } 
```

谁能指出我正确的方向，或者我可以用更好的方法来做到这一点。我希望这些控件将出现在很多表单上，所以我想从父表单中尽可能简单地进行分组验证。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:38:56.727

也许尝试使用接口

```
public interface IValidateMyData
{
    bool Validate();
}

public class ValidationControl : Control, IValidateMyData
{
    // code here
    public bool Validate()
    {
        return true;
    }
} 
```

在您的表单中遍历所有控件，但不要检查名称，而是确定控件是否实现了 IValidateMyData 接口：

```
foreach (Control c in this.Controls)
{
    if ( c is IValidateMyData )
    {
        var validationResult = (c as IValidateMyData).Validate();
    }
} 
```

使用这种方法，您的控件不必具有特定的名称前缀。

此外，您可以将所有控件上的迭代移动到表单继承的基类中，然后在表单中调用“ValidateAllControls()”方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:39:39.510

在 WinForms 中执行此操作的常用方法是使用[表单验证](http://msdn.microsoft.com/en-us/library/ms229603.aspx)事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:34:30.387

您应该创建一个`interface`具有方法的每个控件都`Validate`应该实现该接口。

```
public interface IValidatable
{
    void Validates();
} 
```

并检查循环中的接口。

```
foreach (Control c in this.Controls)
{
  IValidatable validateControl = c as IValidatable;
  if(validateControl != null)
  {

       // do the validation.
       validateControl.Validates();
  } 
```

# jquery - 上传jpg方向

> ID：13175213
> 
> 赞同：3
> 
> 时间：2012-11-01T10:32:24.317
> 
> 标签：jquery, upload, orientation, jpeg, plupload

我在使用 plupload 上传 jpeg 时遇到问题。它不会保留我的初始图像的方向，并且每次都将其设置为横向。

我也尝试过使用 png，在这种情况下它工作正常。

这是我的代码：

```
 $files = new Array();

    //return number of file authorized for selected city
    $.ajax({
        type: "GET",
        //dataType: "jsonp",
        cache: false,
        url: "/fileauthorized",
        data: {
            cityid : $cityid
        },
        success: function(data) {

            $nbfile = data; 
            $nbfileauthorized = 5 - $nbfile;

            uploader = new plupload.Uploader({
                runtimes : 'html5,flash',
                browse_button : 'pickfiles',
                container : 'container',
                max_file_size : '10mb',
                chunk_size : '1mb',
                url : '/addphototemptorep',
                flash_swf_url : '/plupload/js/plupload.flash.swf',
                unique_names : true,
                filters : [
                {
                    title : "Image files", 
                    extensions : "jpg,gif,png"
                }
                ],
                resize : {
                    width : 700, 
                    height : 700, 
                    quality : 100
                },
                init : {
                    StateChanged: function(up) {
                        // Called when the state of the queue is changed
                        if(plupload.STOPPED){
                        }
                    }
                }
            });

            $('#uploadfiles').click(function(e) {

                $countfile = $('#filelist li').size();
                if($countfile > $nbfileauthorized){
                    alert("vous avez depassé la limite de fichiers autorisé : " + $countfile + " / " + $nbfileauthorized);
                }else{
                    uploader.start();

                }

                e.preventDefault();
            });

            uploader.init();

            uploader.bind('FilesAdded', function(up, files) {
                $.each(files, function(i, file) {
                    $('#filelist').append(
                        '<li class="clearfix plupload_delete" id="' + file.id + '">' +
                        "<div class='filename'>" + file.name + '</div><div class="filesize">' + plupload.formatSize(file.size) + '</div><div class="filestatus"></div>' +
                        '<div class="deletefile"><a id="deletefile" class="tooltip" title="supprimer la photo" href="#"><i class="icon-remove"></i></a></div></li>');
                });

                up.refresh(); // Reposition Flash/Silverlight
            });

            uploader.bind('UploadProgress', function(up, file) {
                $('#' + file.id).find('.filestatus').html(file.percent + "%");
            });

            uploader.bind('Error', function(up, err) {
                $('#filelist').append("<li class='clearfix'>Error: " + err.code +
                    ", Message: " + err.message +
                    (err.file ? ", File: " + err.file.name : "") +
                    "</li>"
                    );

                up.refresh(); // Reposition Flash/Silverlight
            });

            uploader.bind('FileUploaded', function(up, file) {
                $('#' + file.id).find('#deletefile').replaceWith("<i class='icon-ok'></i>");
            });
            uploader.bind('UploadComplete', function(up, files) {

                i = 0;
                for(var file in files){
                    $files.push(files[i].target_name);
                    i++;
                }

                $.ajax({
                    type: "GET",
                    dataType: "html",
                    cache: false,
                    data: {
                        files : $files,
                        cityid : $cityid
                    },
                    url: "/addphototemptodb",
                    success: function($photoid) {
                        $("#loader").hide(); 
                        if($photoid > 0){
                            openpopinedit($photoid, "newphoto");
                        }
                    }
                });
            });

        }
    });

} 
```

# php - 如何使用 memcache 唯一键进行多个查询

> ID：13175218
> 
> 赞同：0
> 
> 时间：2012-11-01T10:32:30.570
> 
> 标签：php, memcached

我在我的 php 代码中触发了多个查询：

前任 ：

```
$query1 = $db->fetchAll("SELECT * FROM `table` WHERE 1);
$query2 = $db->fetchAll("SELECT * FROM `table` WHERE 1);
$query3 = $db->fetchAll("SELECT * FROM `table` WHERE 1); 
```

我想要所有查询的 memcache 实现。如何使用单个唯一键实现此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:37:23.010

我认为您混淆了 memcache 和 sql。以下是我注意到的一些问题：

*   您将 sql 语句作为这些函数的参数。这是不正确的。Memcache 使用键查找方案。
*   特定方法 fetchAll() 不带参数。请看[这里的例子](http://php.net/manual/en/memcached.fetchall.php)
*   键在 memcache 中不能有空格。因此，要么选择没有空格的键空间，要么在查找​​或保存之前通过 md5() 运行它们。
*   为什么要对三个单独的变量运行完全相同的查询。您是否期望这三个`$query`变量不同？

# jquery - 返回同一页面后显示相同的下拉列表值

> ID：13175223
> 
> 赞同：0
> 
> 时间：2012-11-01T10:32:51.903
> 
> 标签：jquery

嗨，我有一个包含以下`select`列表的页面

```
<select class="othdebt" id="othdebt" name="othdebt">
    <option value="Cate" >Categorical</option>
    <option value="Cont">Continuous</option>
    <option value="Data">Date</option>
</select> 
```

当我转到其他页面并返回`select`列表页面时，我希望看到相同的选定选项。

我使用以下 jQuery 来执行此操作。

```
<script type="text/javascript">
    $(".othdebt").each(function(){
        var $titleId = $(this).attr('id');
        var $cookieValue = $.cookies.get($titleId);
        if ($cookieValue) {
            $(this).val($cookieValue);
        }                       
    });
</script> 
```

但它没有任何其他建议来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:35:53.957

你得到的`id`不正确。试试这个：

```
var titleId = $(this).attr('id'); 
```

或者：

```
var titleId = this.id; 
```

请注意，我还`$`从变量名的开头删除了 。这个约定是为包含 jQuery 对象的变量保留的——这不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:36:06.427

将所有代码保存在 document.ready() 中

**编辑：**设置 cookie

```
$(".othdebt").​change(function(){
    $.cookies('titleId',$(this).val());
});​ 
```

在加载页面时获取 cookie

```
document.ready(function(){
$(".othdebt").each(function() {
    //var titleId = $(this).attr('id');
    var $cookieValue = $.cookies.get('titleId');
    if ($cookieValue) {
        $(this).val($cookieValue);
    }
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:50:56.497

首先，使用本机 javascript 函数设置 cookie。

```
document.cookie = 'othdebt=Data'; 
```

然后用这个获取cookie

```
var objId = $('.othdebt').attr('id');
var cookieValue = document.cookie.match( '(^|;) ?' + objId + '=([^;]*)(;|$)' );
 if ( cookieValue )
    cv = ( unescape ( cookieValue[2] ) );
else
    cv = null; 
```

cv 保存 cookie 值

```
 $(".othdebt option").each(function(){
  if (cv == $(this).val())
  {
    $('.othdebt').val(cv);
  }
}); 
```

我已经对此进行了测试，它对我有用；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:33:54.087

最后我找到了自己的解决方案

这是 [**演示**](http://jsfiddle.net/PnJ9Y/)

```
/* Here's the actual code. */

if($.cookie('remember_select') != null) {

    $('.select_class option[value="' + $.cookie('remember_select') + '"]').attr('selected', 'selected');

}

$('.select_class').change(function() {

    $.cookie('remember_select', $('.select_class option:selected').val(), { expires: 90, path: '/'});

});​ 
```

# java - JAXB, XJC -> 创建多个类文件

> ID：13175224
> 
> 赞同：27
> 
> 时间：2012-11-01T10:32:59.467
> 
> 标签：java, xml, jaxb, xjc

我第一次使用 JAXB 和 XJC。

我想从 XML 文件生成 Java 类，所以我使用[这个在线帮助](http://www.xmlforasp.net/CodeBank/System_Xml_Schema/BuildSchema/BuildXMLSchema.aspx)程序从 XML 文件生成模式。

之后我只使用这个命令行来生成 Java 类：

```
xjc myschema.xsd 
```

它可以工作，但我只收到一个 Java 文件和其中的许多静态类。请问这是否可以生成许多每个文件只包含一个类的java文件？

谢谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-01T10:46:24.780

默认情况下[**，JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)将为嵌套的复杂类型创建静态内部类，以防止类名冲突。您可以使用外部绑定文件来禁用此行为。

**绑定.xml**

绑定文件允许您自定义如何从 XML 模式生成 Java 类。

```
<jaxb:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">
    <jaxb:globalBindings localScoping="toplevel"/>
</jaxb:bindings> 
```

**XJC 呼叫**

该`-b`选项与 XJC 命令一起使用以指定绑定文件。

```
xjc -b binding.xml myschema.xsd 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/07/jaxb-xjc-and-nested-classes.html](http://blog.bdoughan.com/2011/07/jaxb-xjc-and-nested-classes.html)

# java - 用 JSTL 格式化数字，不四舍五入

> ID：13175225
> 
> 赞同：0
> 
> 时间：2012-11-01T10:33:04.537
> 
> 标签：java, jstl, number-formatting

我需要使用`<fmt:formatNumber/>`jstl 标签格式化数字。输出应限制在小数点后 3 位，但不允许四舍五入，因此使用该属性`maxFractionDigits="3"`不合适，因为它会将数字四舍五入。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T16:08:00.750

您可以在格式化之前从数字中减去 0.0005。这样四舍五入就相当于将原始数字截断到小数点后 3 位。

```
<fmt:formatNumber value="${myNumber - 0.0005}" maxFractionDigits="3"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:47:38.323

设计您自己的标签或 EL 函数，在格式化之前截断数字。或者只是设计一个截断数字的标签或函数，并将结果传递给`<fmt:formatNumber/>`. 就像是

```
<fmt:formatNumber value="${myFn:truncate(theNumber, 3)"/> 
```

# paypal - PayPal 发送多个 IPN

> ID：13175231
> 
> 赞同：0
> 
> 时间：2012-11-01T10:33:22.350
> 
> 标签：paypal, paypal-ipn, http-1.1

我有这个代码，一切正常。只是[PayPal](http://en.wikipedia.org/wiki/PayPal)不断重新发送多个[IPN](http://en.wikipedia.org/wiki/Instant_payment_notification)。我已经阅读了 PayPal 的论坛，他们说 PayPal 没有从我这里获得 HTTP/1.1 200 OK，所以它一直在重新发送 IPN。我该怎么办？

```
function sql_execute($sql){
    $sql_connect = @mysql_connect($_SERVER['HTTP_HOST'].':3306','root', '****') or
       die('Could not connect: ' . mysql_error());
    mysql_select_db('4bkk');
    mysql_query($sql);
    $rows = mysql_affected_rows($sql_connect);  //mysql_insert_id();
    mysql_close();
    return $rows;
}

function sql_query($sql){
    // echo $sql;
    $sql_connect = @mysql_connect($_SERVER['HTTP_HOST'].':3306','****', 'zzz111') or
        die('Could not connect: ' . mysql_error());
    mysql_select_db('4bkk');
    $rs = mysql_query($sql) or die(mysql_error());
    mysql_close();
    return $rs;
}

function logtrace($o){
    $q = "INSERT INTO log (trace, trace_time) VALUES ('$o', NOW() )";
    sql_query($q);
}

function send_email($t,$s,$m,$h){
    //mail($t, $s, $m, $h);

    $fh = fopen('result_ipn_test.txt', 'w');
    fwrite($fh, $t.' '.$s.' '.$m.' '.$h);
    fclose($fh);

    logtrace('Mail is sent and exit called');

    exit();
}

logtrace('__________NEW SESSION__________');

$url = 'https://www.sandbox.paypal.com/cgi-bin/webscr';

$postFields = 'cmd=_notify-validate';

foreach($_POST as $key => $value)
{
    $postFields .= "&$key=".urlencode($value);
}

$ch = curl_init();

curl_setopt_array($ch, array(
    CURLOPT_URL => $url,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_SSL_VERIFYPEER => false,
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => $postFields
));

$result = curl_exec($ch);
$info = curl_getinfo($ch);

logtrace($info['url']);

curl_close($ch);

//get buyers information from PAYPAL checkout
$email = $_POST['payer_email'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$amount = $_POST['amount3'];
$plan = $_POST['option_selection1'];

logtrace($email.' -- '.$active);

$q = "SELECT * FROM users WHERE email='$email' AND user_level='' AND active='unverified'"; //Unprocessed record = no user_level and active = 'unverified'

$ex = sql_execute($q);
//logtrace("THIS ".$q."  =>  ".$ex);

if(sql_execute($q)){
    logtrace('IT IS TRUE');
    $flag = TRUE;
}
else{
    logtrace('FALSE');
    $flag = FALSE;
}

logtrace($result.' RESPONSE FROM PAYPAL');
if(($result=='VERIFIED') && $flag){ //Checks first if PayPal is valid, email address exists in
                                    //records and checks if user_level='' and active='unverified',
                                    //if not enters.
    logtrace('USER IS READY FOR VERIFICATION');

    $q = "SELECT * FROM users WHERE email='$email'";
    $data = sql_query($q);

    $con = mysql_fetch_array($data);

    //Get buyers information from the database
    $email2 = $con['email'];
    $first_name = $con['first_name'];
    $last_name = $con['last_name'];
    $active = $con['active'];
    $user_level = $con['user_level'];

    logtrace('Emails match');

    $u = "UPDATE users SET active='verified', user_level='$plan' WHERE email='$email' LIMIT 1";

    if (sql_query($u)) { //Successful verification
        logtrace('|| Update was sucessful');
    }
    else{ // Unsuccessful verification.
        logtrace('|| Something went wrong with update.');
    }
}
else{ // The user doesn't have any record in the database.
    $q = "SELECT * FROM users WHERE email='$email' AND (user_level='Monthly' OR user_level='Quarterly' OR user_level='Yearly')";

    if(sql_execute($q)){ // The user is already verified
        logtrace('THE USER IS ALREADY VERIFIED');
    }
    else{ // The user does not exist.
        logtrace('THE USER HAS NO RECORD ON DATABASE');

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:10:01.417

请参考示例代码[https://www.x.com/instant-payment-notification-4](https://www.x.com/instant-payment-notification-4)

根据上面的代码，您可以尝试设置 curl 选项

CURLOPT_HTTP_VERSION，CURL_HTTP_VERSION_1_1 CURLOPT_HTTPHEADER，数组（'连接：关闭'）

在您设置为 curl_setopt_array 的上述代码中...

我认为这应该可以解决您的 HTTP/1.1 200 OK 问题。

# php - 为什么 HTML 标签在 Symfony 1.4 中不能正确呈现？

> ID：13175234
> 
> 赞同：0
> 
> 时间：2012-11-01T10:33:31.217
> 
> 标签：php, html, symfony1, escaping

我在这个模型中有以下方法，它读取文件并返回其内容

```
public function getTest() {
  return file_get_contents($filePath);
} 
```

在模板中，我只是输出这样的结果（在此调用之前我不对 $obj 实例执行任何其他操作）

```
<?php echo $obj->getTest() ?> 
```

但内容不会呈现为推进 HTML。它显示 BR 标签而不是创建一个空行。

以下是关于转义的 settings.yml：

```
all:
  .settings:
    escaping_strategy: false           
    escaping_method:   ESC_SPECIALCHARS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:08:47.183

我有几个问题：

*   更改 settings.yml 后是否清理了缓存？
*   `escaping_strategy`您的 settings.yml 中是否只有一个定义？没有其他环境的规范（如 dev:、prod:) ？（向我们展示您的完整 settings.yml）

另一方面，完全不建议禁用转义。我通常做的是启用它，但在某些时候，当我确定 100% 的内容来自安全的地方（用户无法更改的文件或数据库内容）时，我通过禁用显示它本地逃生策略：

```
<?php echo sfOutputEscaper::unescape($obj->getTest()) ?> 
```

# matlab - 在 Matlab 中创建小波

> ID：13175235
> 
> 赞同：0
> 
> 时间：2012-11-01T10:33:33.303
> 
> 标签：matlab, wavelet

我有一些反射率数据，我将用 Ricker/墨西哥帽子小波对这些数据进行卷积以获得地震轨迹。我的问题是由于创建了小波。我希望小波的主频率约为 70Hz，时间步长为 0.19 ms，这与我的反射率数据中的时间步长相同。我曾尝试在 MatLab 中使用 mexihat 函数并调整 lb、ub 和 n 参数来解决我的问题，但我无法弄清楚。有没有更简单的方法来解决我的问题？有谁知道出现主频率的 Ricker 小波的公式？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:56:08.670

从[MATLAB 中的大数据：地震数据处理案例研究](http://www.mathworks.com/matlabcentral/fileexchange/30585-large-data-in-matlab-a-seismic-data-processing-case-study/content/migration/ricker.m)：

```
% N : number of points you want to plot
[rw,t] = ricker(70,N,0.019);
plot(t,rw), xlabel('Time'), ylabel('Amplitude') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T22:25:25.157

```
% using the equation below
% https://wiki.seg.org/wiki/Dictionary:Ricker_wavelet
ric = @(t,fm)(1-2*pi()^2*fm^2*t.^2)*exp(-1*pi()^2*fm^2*t.^2); % Ricker equation
t = 0:001:2;
plot(ric(t,20));
hold on;
plot(ric(t,5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-15T10:03:07.313

请注意，我尝试了链接到的函数 lucasg，并在计算小波的公式中发现了一个错字：

`s = (1-tau.*tau*f^2*pi^2).*exp(-tau.^2*pi^2*f^2);`
应替换为：
`s = (1-2*tau.*tau*f^2*pi^2).*exp(-tau.^2*pi^2*f^2);`

否则，你会得到一个小脚变种人

# nginx - 多个域的位置重写

> ID：13175237
> 
> 赞同：2
> 
> 时间：2012-11-01T10:33:43.040
> 
> 标签：nginx, location, rewrite, query-string, winginx

我正在处理多个项目，所以我有多个域：

```
1\. domain1
2\. domani2 
```

例如如何重写

`domain1/user to domain1/?page=user`,

```
domain2/user to domain2/clientArea/userMain 
```

现在我正在使用：

```
 location /user {
     rewrite ^/user$ /?page=user;
   } 
```

但它重写了我所有的域。

PS：我是 nginx 新手，我使用的是**[Winginx](http://winginx.com)**本地服务器；

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T20:25:48.450

有 2 种方法可以做到这一点，具体取决于您是 1 还是 2`server`块（如果您期望 2 个域之间有很多配置差异，则使用 2，如果 2 个域具有大部分相同的内容，则使用 1）

在 2 `server`-blocks 配置的情况下，如下所示：

```
server {
  server_name domain1;      
  location /user/ { rewrite ^ $scheme://$host/?page=user; }
  # add in rest of domain 1 config
}

server {
  server_name domain2;
  location /user/ { rewrite ^ $scheme://$host/clientArea/userMain; }
  # add in the rest of your domain 2 config 
```

}

在单个`server`块的情况下，它看起来像这样：

```
server {
  server_name domain1 domain2;
  location /user/ {
    if ($host = domain1) { rewrite ^ $scheme://$host/?page=user; }
    if ($host = domain2) { rewrite ^ $scheme://$host/clientArea/userMain; }
  }
} 
```

注意：您可以使用 ^ 正则表达式作为重写条件，因为`location /user/`它所在的块已经选择了您要重写的 url。由于正则表达式的匹配速度会更快，因此它的效率会更高一些。

# c#-4.0 - IsolrQueryResults 不适用于 solrNet 4.0

> ID：13175240
> 
> 赞同：1
> 
> 时间：2012-11-01T10:33:49.560
> 
> 标签：c#-4.0, solrnet

IsolrQueryResults 正在使用 solrNet 3.0

就像我的 solrNet 3.0 代码是

```
 ISolrOperations<ProductTest2> solr = ServiceLocator.Current.GetInstance<ISolrOperations<ProductTest2>>();
       ISolrQueryResults<ProductTest2> powerArticles  = solr.Query(new SolrQuery("is_OneCategoryActive:true") , new QueryOptions
        {
            FilterQueries = new[] { new SolrQueryByRange<Int32>("bestsellercurrent",1, 5) },
            Start = 0,
            Rows = 5
        }
         ); 
```

现在它停止使用 solrNet 4.0。请建议我需要更改的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:57:54.460

`ISolrQueryResults`SolrNet 0.4.0 Beta1 版本删除了该接口。您可以将其替换为`SolrQueryResults`. [请参阅发行说明](http://bugsquash.blogspot.com/2011/12/solrnet-040-beta-1-released.html)的重大更改部分。

所以以下现在可以工作：

```
 ISolrOperations<ProductTest2> solr = ServiceLocator.Current.GetInstance<ISolrOperations<ProductTest2>>();
 SolrQueryResults<ProductTest2> powerArticles  = solr.Query(new SolrQuery("is_OneCategoryActive:true") , new QueryOptions
    {
        FilterQueries = new[] { new SolrQueryByRange<Int32>("bestsellercurrent",1, 5) },
        Start = 0,
        Rows = 5
    }
     ); 
```

# django - Django Grappelli 已安装但未应用

> ID：13175242
> 
> 赞同：0
> 
> 时间：2012-11-01T10:34:06.300
> 
> 标签：django, django-grappelli

我已经完成了安装，这里：

[http://django-grappelli.readthedocs.org/en/latest/quickstart.html#installation](http://django-grappelli.readthedocs.org/en/latest/quickstart.html#installation)

但我无法让它工作。查看故障排除指南，

[http://django-grappelli.readthedocs.org/en/latest/troubleshooting.html#troubleshooting](http://django-grappelli.readthedocs.org/en/latest/troubleshooting.html#troubleshooting)

它说我需要检查静态文件是否正确提供。我怎样才能做到这一点？

# java - 如何为 jquery 自动完成文本字段添加硒测试覆盖率

> ID：13175246
> 
> 赞同：1
> 
> 时间：2012-11-01T10:34:26.503
> 
> 标签：java, jquery, testing, selenium

我有一个文本字段，并且 jquery 自动完成器绑定到它。

html

```
<div id="autoCompleter">
   <input type="text" name="symbol" />
</div> 
```

javascript

```
 $('#autoCompleter').delegate("input", "focus", AutoCompleter); 
   var AutoCompleter = function(event) {    
    $(this).autocomplete({
        source: function(request, response) {
            jQuery.extAjax({
                url: url,
                data: data,
                success: response
            });
        },
        select: function(event, ui) {
            if (ui.item.value.match(/^Enter more characters...$/)) {
                return false;
            }
        },          
        focus: function(event, ui) {
            if (ui.item.value.match(/^Enter more characters...$/)) {
                return false;
            }
        },
        minLength: 2
    }); 
    $(this).autocomplete("search", $(this).val()); 
}; 
```

我尝试过以下方式

```
@Test
public void autoCompleter() {       
    driver.findElementByName("symbol").sendKeys("22");      
    common.patientlyFindElement(By.xpath("//ul[contains(@class, 'ui-autocomplete')]//a[contains(.,'Enter more characters...')]")).click();      
    assertEquals(driver.findElementByName("symbol").getAttribute("value"), "22");       
} 
```

# python - 计算 Pandas 中每个组内第一个事件的第 n 天

> ID：13175251
> 
> 赞同：3
> 
> 时间：2012-11-01T10:34:50.417
> 
> 标签：python, pandas

[这是我的另一个问题](https://stackoverflow.com/questions/13156660/compute-the-nth-day-from-the-first-event-in-pandas)的后续问题：

我有以下数据框，从我的原始数据框中子集，包含*ob*、*event*、*unixtime*和*day*列，我想添加另一列*arbday*，这是自第一个事件以来的第 n 天（第一次访问是第 1 天) 按*ob*分组：

```
import numpy as np  
import datetime as dt  

>>> newdf = pd.DataFrame({'ob': ['a','a','b','b','c', 'd', 'e', 'e', 'e', 'f', 'f', 'f'],'event': [1, 2, 1, 2, 1, 1, 1, 2, 3, 1, 2, 3], 'unixtime': [1346682124716, 1346682188598, 1346745432765, 1347080641650, 1346676710509, 1346702995184, 1346530405978, 1346530421609, 1346530570952, 1346617885925, 1346961625305,1347214217566]},index=[343340, 343341, 343342, 343343, 343344, 343345, 343349, 343350, 343351, 343352,343353,343354])
>>> newdf['day'] = newdf['unixtime'].apply(lambda x: dt.datetime.utcfromtimestamp(x/1000).date())

        ob  event        unixtime          day  arbday
343340   a      1   1346682124716   2012-09-03       1
343341   a      2   1346682188598   2012-09-03       1
343342   b      1   1346745432765   2012-09-04       1
343343   b      2   1347080641650   2012-09-08       5
343344   c      1   1346676710509   2012-09-03       1
343345   d      1   1346702995184   2012-09-03       1
343349   e      1   1346530405978   2012-09-01       1
343350   e      2   1346530421609   2012-09-01       1
343351   e      3   1346530570952   2012-09-01       1
343352   f      1   1346617885925   2012-09-02       1
343353   f      2   1346961625305   2012-09-06       5
343354   f      3   1347214217566   2012-09-09       8 
```

在一个*ob*中，这将起作用：

```
newdf['arbday'] = newdf['day'].map(lambda x: (x-testdf.get_value(newdf[newdf.event == 1].first_valid_index(), 'day')).days+1) 
```

或者

```
newdf['arbday'] = newdf['day'].map(lambda x: (x-newdf.get_value(int(newdf[newdf.event == 1].index), 'day')).days+1) 
```

我尝试了以下代码并且它有效：

```
>>> newdf['arbday'] = newdf.groupby('ob')['day'].transform(lambda x: (x-x.min()).apply(lambda y: y.days)+1)

        event ob       unixtime         day arbday
343340      1  a  1346682124716  2012-09-03      1
343341      2  a  1346682188598  2012-09-03      1
343342      1  b  1346745432765  2012-09-04      1
343343      2  b  1347080641650  2012-09-08      5
343344      1  c  1346676710509  2012-09-03      1
343345      1  d  1346702995184  2012-09-03      1
343349      1  e  1346530405978  2012-09-01      1
343350      2  e  1346530421609  2012-09-01      1
343351      3  e  1346530570952  2012-09-01      1
343352      1  f  1346617885925  2012-09-02      1
343353      2  f  1346961625305  2012-09-06      5
343354      3  f  1347214217566  2012-09-09      8 
```

但这显然不是最优雅的方式。另外，为什么*event*和*ob*的顺序发生了变化？

任何指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:45:19.577

```
In [46]: firstdays = df.groupby('ob').day.first()

In [47]: firstdays
Out[47]: 
ob
a     2012-09-03
b     2012-09-04
c     2012-09-03
d     2012-09-03
e     2012-09-01
f     2012-09-02
Name: day

In [48]: df.apply(lambda row: (row['day'] - firstdays[row['ob']]).days + 1, axis=1)
Out[48]: 
343340    1
343341    1
343342    1
343343    5
343344    1
343345    1
343349    1
343350    1
343351    1
343352    1
343353    5
343354    8 
```

# post - Python 错误：类型错误：POST 数据应该是字节；也是用户代理问题

> ID：13175253
> 
> 赞同：12
> 
> 时间：2012-11-01T10:34:55.893
> 
> 标签：post, python-3.x

使用以下代码我收到一个错误：

```
TypeError: POST data should be bytes or an iterable of bytes. It cannot be str 
```

第二个问题，我不确定我是否正确指定了我的用户代理，这是我的整个用户代理：`Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4`. 当我在脚本中定义用户代理时，我尽了最大努力。

```
import urllib.parse
import urllib.request

url = 'http://getliberty.org/contact-us/'
user_agent = 'Mozilla/5.0 (compatible; Chrome/22.0.1229.94; Windows NT)'
values = {'Your Name' : 'Horatio',
          'Your Email' : '6765Minus4181@gmail.com',
          'Subject' : 'Hello',
          'Your Message' : 'Cheers'}

headers = {'User-Agent': user_agent }

data = urllib.parse.urlencode(values)
req = urllib.request.Request(url, data)
response = urllib.request.urlopen(req)
the_page = response.read() 
```

我知道这个类似的问题，[TypeError: POST data should be bytes or an iterable of bytes。它不能是 str](https://stackoverflow.com/questions/5440485/typeerror-post-data-should-be-bytes-or-an-iterable-of-bytes-it-cannot-be-str)，但对于答案来说太新了，没有太大帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T21:02:37.640

```
data = urllib.parse.urlencode(values)
type(data) #this returns <class 'str'>. it's a string 
```

urllib 文档说`urllib.request.Request(url, data ...)`：

> urllib.parse.urlencode() 函数采用 2 元组的映射或序列，并以这种格式返回一个字符串。**在用作数据参数之前，应将其编码为字节。**等等等等

（强调我的）

所以你有一个看起来正确的字符串，你需要的是编码成字节的字符串。然后你选择编码。

```
binary_data = data.encode(encoding) 
```

在上面的行中：编码可以是“utf-8”或“ascii”或一堆其他东西。选择服务器期望的任何一个。

所以你最终得到的东西看起来像：

```
data = urllib.parse.urlencode(values)
binary_data = data.encode(encoding) 
req = urllib.request.Request(url, binary_data) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T15:21:48.677

您可以尝试使用 requests 模块作为替代解决方案

```
import json
import requests

url = 'http://getliberty.org/contact-us/'
user_agent = 'Mozilla/5.0 (compatible; Chrome/22.0.1229.94; Windows NT)'
values = {
      'Your Name' : 'Horatio',
      'Your Email' : '6765Minus4181@gmail.com',
      'Subject' : 'Hello',
      'Your Message' : 'Cheers'
       }

headers = {'User-Agent': user_agent, 'Content-Type':'application/json' }

data = json.dumps(values)
request = requests.post(url, data=data, headers=headers)

response = request.json() 
```

# php - 创建较大集合的固定长度非重复排列

> ID：13175257
> 
> 赞同：2
> 
> 时间：2012-11-01T10:35:26.063
> 
> 标签：php, permutation

我知道这个话题被讨论了很多，但我似乎找不到任何适合我需要的实现。

我有以下一组字符：

> abcdefgh

我想获得所有可能的排列或组合（不重复），**但在有限（可变）字符集上**，这意味着如果我输入字符和数字`2`，结果应该看起来像

```
ab ba ac ca ad da ae ea af fa ag ga ah ha
bc cb bd db be eb bf fb bg gb bh hb
cd dc ce ec cf fc cg gc ch hc
de ed df fd dg gd dh hd
ef fe eg ge eh he
fg gf fh hf
gh hg 
```

我希望你明白我的意思。**我目前有一个实现，它给了我所有**字符的排列，但我无法理解如何为这些排列实现**有限的空间：**

```
public function getPermutations($letters) {
    if (strlen($letters) < 2) {
        return array($letters);
    }

    $permutations = array();
    $tail = substr($letters, 1);

    foreach ($this->getPermutations($tail) as $permutation) {
        $length = strlen($permutation);

        for ($i = 0; $i <= $length; $i++) {
            $permutations[] = substr($permutation, 0, $i) . $letters[0] . substr($permutation, $i);
        }
    }

    return $permutations;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T11:29:24.417

如果一次只需要一个元素，则可以通过单独生成每个元素来节省内存。

如果我们想在您的预期输出集中生成一个随机字符串，我们可以使用这个算法：

```
Given a set of characters S, and a desired output length K:
  While the output has less than K characters:
    Pick a random number P between 1 and |S|.
    Append the P'th character to the output.
    Remove the P'th character from S. 
```

其中`|S|`是 S 中的当前元素数。

我们实际上可以将这个选择序列编码为一个整数。一种方法是这样更改算法：

```
Given a set of characters S, and a desired output length K:
  Let I = 0.
  While the output has less than K characters:
    I = I * (|S| + 1).
    Pick a random number P between 1 and the number of elements in S.
    I = I + P.
    Append the P'th character to the output.
    Remove the P'th character from S. 
```

运行此算法后，该值`I`将对这个特定的选择序列进行唯一编码。它基本上将其编码为[混合基数](http://en.wikipedia.org/wiki/Mixed_radix)；一个数字使用基数 N，下一个数字使用 N-1，依此类推，直到最后一个数字是基数 N-K+1（N 是输入中的字母数）。

当然，我们也可以再次解码，在 PHP 中，会是这样的：

```
// Returns the total number of $count-length strings generatable from $letters.
function getPermCount($letters, $count)
{
  $result = 1;
  // k characters from a set of n has n!/(n-k)! possible combinations
  for($i = strlen($letters) - $count + 1; $i <= strlen($letters); $i++) {
    $result *= $i;
  }
  return $result;
}

// Decodes $index to a $count-length string from $letters, no repeat chars.
function getPerm($letters, $count, $index)
{
  $result = '';
  for($i = 0; $i < $count; $i++)
  {
    $pos = $index % strlen($letters);
    $result .= $letters[$pos];
    $index = ($index-$pos)/strlen($letters);
    $letters = substr($letters, 0, $pos) . substr($letters, $pos+1);
  }
  return $result;
} 
```

（请注意，为简单起见，这个特定的解码算法并不完全对应于我之前描述的编码算法，但保持了给定`$index`映射到唯一结果的理想属性。）

要使用此代码，您将执行以下操作：

```
$letters = 'abcd';
echo '2 letters from 4:<br>';
for($i = 0; $i < getPermCount($letters, 2); $i++)
  echo getPerm($letters, 2, $i).'<br>';

echo '<br>3 letters from 4:<br>';
for($i = 0; $i < getPermCount($letters, 3); $i++)
  echo getPerm($letters, 3, $i).'<br>';
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:01:39.587

```
$strings = get_perm( range('a', 'h'), 4 );

function get_perm( $a, $c, $step = 0, $ch = array(), $result = array() ){
    if( $c == 1 ){ //if we have last symbol in chain
        for( $k = 0; $k < count( $a ); $k++ ){
            if( @in_array( $k, $ch ) ) continue; // if $k exist in array we already have such symbol in string
            $tmp = '';

            foreach( $ch as $c ) $tmp .= $a[$c]; // concat chain of previous symbols
            $result[] = $tmp . $a[$k]; // and adding current + saving to our array to return
        }
    }else{
        for( $i = 0; $i < count( $a ); $i++ ){
            if( @in_array( $i, $ch ) ) continue;
            $ch[$step] = $i; // saving current symbol for 2 things: check if that this symbol don't duplicate later and to know what symbols and in what order need to be saved
            get_perm( $a, $c-1, $step+1, $ch, &$result ); 
            // recursion, 
            // decrementing amount of symbols left to create string, 
            // incrementing step to correctly save array or already used symbols, 
            // $ch - array of already used symbols, 
            // &$result - pointer to result array
        }
    }

    return $result;
} 
```

**注意**

啊，有 6 个符号 = 数组中有 20k 个值
az 有 4 个符号 = 数组中有 358799 个值
所以 10 个符号的 az 肯定会死掉 =) 它需要太多的内存。
如果需要大量值，则需要尝试将输出保存到文件或数据库。或者将内存限制扩展到 php 但不确定这是否是最好的方法。

# ajax - jQuery UI 工具提示小部件中的 AJAX 内容

> ID：13175268
> 
> 赞同：31
> 
> 时间：2012-11-01T10:36:08.667
> 
> 标签：ajax, jquery-ui, jquery

jQuery UI 1.9 中有一个新的 Tooltip Widget，其[API 文档](http://api.jqueryui.com/tooltip/)提示可以在其中显示 AJAX 内容，但没有任何进一步的细节。我想我可以通过同步和阻塞请求来完成类似的事情，但这不是我想要的。

如何让它显示通过异步 AJAX 请求检索到的任何内容？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-24T07:41:42.807

这是[我博客](http://html5beta.com/jquery-2/a-little-guide-about-jqueryui-tooltip-ajax-callback/)中的jqueryui Tootip 小部件的 ajax 示例。希望对您有所帮助。

```
$(document).tooltip({
    items:'.tooltip',
    tooltipClass:'preview-tip',
    position: { my: "left+15 top", at: "right center" },
    content:function(callback) {
        $.get('preview.php', {
            id:id
        }, function(data) {
            callback(data); //**call the callback function to return the value**
        });
    },
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-05T03:21:29.537

这显然不是一个完整的解决方案，但它展示了在`open`事件期间动态获取数据的基本技术：

```
$('#tippy').tooltip({
    content: '... waiting on ajax ...',
    open: function(evt, ui) {
        var elem = $(this);
        $.ajax('/echo/html').always(function() {
            elem.tooltip('option', 'content', 'Ajax call complete');
         });
    }
}); 
```

见**[小提琴](http://jsfiddle.net/tvHT3/)**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T02:58:06.127

使用工具提示“内容”选项将文本“AJAX”放入工具提示时要注意的一件事是，文本检索会在工具提示初始化中引入延迟。

如果鼠标在带有工具提示的 dom 节点上快速移动，则可能会在初始化完成之前发生 mouse-out 事件，在这种情况下，工具提示尚未侦听该事件。

结果是显示工具提示并且在鼠标移回节点上并再次移出之前不会关闭。

虽然它会产生一些可能不需要的网络开销，但请考虑在配置工具提示之前检索工具提示文本。

在我的应用程序中，我使用自己的 jquery 扩展来进行 AJAX 调用、解析结果并初始化所有工具提示，显然您可以使用 jquery 和/或您自己的扩展，但它的要点是：

使用图像标签作为工具提示锚点，要检索的文本由名称属性标识：

```
<img class="tooltipclassname" name="tooltipIdentifier" /> 
```

使用调用扩展方法配置所有工具提示：

```
$(".tooltipclassname").extension("tooltip"); 
```

在扩展的 tooltip 方法内部：

```
 var ids = "";
    var nodes = this;

    // Collect all tooltip identifiers into a comma separated string
    this.each(function() {
        ids = ids + $(this).attr("name") + ",";
    });

    // Use extension method to call server
    $().extension("invoke", 
    {
        // Model and method identify a server class/method to retrieve the tip texts
        "model": "ToolTips", 
        "method": "Get",

        // Send tooltipIds parameter 
        "parms":  [ new myParmClass("tipIds", ids ) ],

        // Function to call on success. data is a JSON object that my extension builds
        // from the server's response
        "successFn": function(msg, data) {

            $(nodes).each(function(){

                // Configure each tooltip:
                // - set image source
                // - set image title (getstring is my extension method to pull a string from the JSON object, remember that the image's name attribute identifies the text)
                // - initialise the tooltip
                $(this).attr("src", "images/tooltip.png")
                    .prop("title", $(data).extension("getstring", $(this).attr("name"))) 
                    .tooltip();
            });
        },
        "errorFn": function(msg, data) { 
            // Do stuff
        }
    }); 

    // Return the jquery object
    return this; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-06T18:22:37.300

这是一个使用带有 jQ​​uery UI 工具提示的 jsfiddle "/echo/html/" AJAX 调用的示例。

HTML：

```
<body>
<input id="tooltip" title="tooltip here" value="place mouse here">
</body> 
```

JavaScript：

```
// (1) Define HTML string to be echo'ed by dummy AJAX API
var html_data = "<b>I am a tooltip</b>";

// (2) Attach tooltip functionality to element with id == tooltip
// (3) Bind results of AJAX call to the tooltip
// (4) Specify items: "*" because only the element with id == tooltip will be matched
$( "#tooltip" ).tooltip({
    content: function( response ) {
        $.ajax({ 
        url: "/echo/html/",
        data: {
                'html': html_data
            },
        type: "POST"
        })
          .then(function( data ) {
             response( data );
          });
    },
    items: "*"
}); 
```

[这是jsfiddle](http://jsfiddle.net/jsheth7/3n838abk/3/)上的这个例子：

# drupal - Drupal 与 nginx：500 内部服务器错误

> ID：13175270
> 
> 赞同：0
> 
> 时间：2012-11-01T10:36:14.693
> 
> 标签：drupal, nginx, centos

我在centos上安装了nginx。当我尝试打开一个网站时，我收到此错误：

`500 Internal Server Error`

错误日志：

```
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 open() "/var/www/mywebsite.com/web/error/404.html" failed (2: No such file or directory), client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com"
2012/11/01 14:10:38 [error] 4552#0: *32 rewrite or internal redirection cycle while internally redirecting to "/error/404.html", client: xx.xxx.xx.xxx, server: mywebsite.com, request: "GET /favicon.ico HTTP/1.1", host: "mywebsite.com" 
```

nginx.conf (/etc/nginx/nginx.conf)

```
#######################################################################
#
# This is the main Nginx configuration file.  
#
# More information about the configuration options is available on 
#   * the English wiki - http://wiki.nginx.org/Main
#   * the Russian documentation - http://sysoev.ru/nginx/
#
#######################################################################

#----------------------------------------------------------------------
# Main Module - directives that cover basic functionality
#
#   http://wiki.nginx.org/NginxHttpMainModule
#
#----------------------------------------------------------------------

user              nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log;
#error_log  /var/log/nginx/error.log  notice;
#error_log  /var/log/nginx/error.log  info;

pid        /var/run/nginx.pid;

#----------------------------------------------------------------------
# Events Module 
#
#   http://wiki.nginx.org/NginxHttpEventsModule
#
#----------------------------------------------------------------------

events {
    worker_connections  1024;
}

#----------------------------------------------------------------------
# HTTP Core Module
#
#   http://wiki.nginx.org/NginxHttpCoreModule 
#
#----------------------------------------------------------------------

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    # Load config files from the /etc/nginx/conf.d directory
    # The default server is in conf.d/default.conf
    include /etc/nginx/conf.d/*.conf;

    ## Detect when HTTPS is used
    map $scheme $fastcgi_https {
      default off;
      https on;
    }

} 
```

/etc/nginx/sites-enabled/100-mysite.vhost

```
server {
        listen *:80;

        server_name mywebsite.com www.mywebsite.com www.mywebsite2.com mywebsite2.com;

        root   /var/www/mywebsite.com/web;

        index index.html index.htm index.php index.cgi index.pl index.xhtml;

        error_page 400 /error/400.html;
        error_page 401 /error/401.html;
        error_page 403 /error/403.html;
        error_page 404 /error/404.html;
        error_page 405 /error/405.html;
        error_page 500 /error/500.html;
        error_page 502 /error/502.html;
        error_page 503 /error/503.html;
        recursive_error_pages on;
        location = /error/400.html {
            internal;
        }
        location = /error/401.html {
            internal;
        }
        location = /error/403.html {
            internal;
        }
        location = /error/404.html {
            internal;
        }
        location = /error/405.html {
            internal;
        }
        location = /error/500.html {
            internal;
        }
        location = /error/502.html {
            internal;
        }
        location = /error/503.html {
            internal;
        }

        error_log /var/log/ispconfig/httpd/mywebsite.com/error.log;
        access_log /var/log/ispconfig/httpd/mywebsite.com/access.log combined;

        ## Disable .htaccess and other hidden files
        location ~ /\. {
            deny all;
            access_log off;
            log_not_found off;
        }

        location = /favicon.ico {
            log_not_found off;
            access_log off;
        }

        location = /robots.txt {
            allow all;
            log_not_found off;
            access_log off;
        }

        location /stats {
            index index.html index.php;
            auth_basic "Members Only";
            auth_basic_user_file /var/www/clients/client2/web3/.htpasswd_stats;
        }

        location ^~ /awstats-icon {
            alias /usr/share/awstats/icon;
        }

        location ~ \.php$ {
            ##try_files $uri =404;
            include /etc/nginx/fastcgi_params;
            fastcgi_pass 127.0.0.1:9012;
            fastcgi_index index.php;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PATH_INFO $fastcgi_script_name;
            fastcgi_intercept_errors on;
        }

} 
```

我用替换内容测试了php，`index.php`没有`<?php phpinfo();`问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:56:37.577

您指定了一个不存在的 404 错误页面。尝试创建一个`/var/www/mywebsite.com/web/error/404.html`，看看它是否开始工作。

# xaml - 在 XAML 中更改 gridview 的项目包装顺序

> ID：13175272
> 
> 赞同：1
> 
> 时间：2012-11-01T10:36:20.060
> 
> 标签：xaml, gridview, windows-8, microsoft-metro

我有 Windows 8 Metro 应用程序，该应用程序具有包含项目和组的网格视图。

我希望我的 gridview 的包装顺序是从左到右而不是自上而下，如屏幕截图所示。

![在此处输入图像描述](../Images/2e1733cfea995c5f259bc143bb440111.png)

有可能吗？怎么做？

**更新：**这是我正在使用的相关代码；

*网格视图 xaml*

```
 <!-- Horizontal scrolling grid used in most view states -->
    <local:MyGridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"
        Grid.RowSpan="2"
        Padding="116,137,40,46"
        ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
        ItemTemplate="{StaticResource VariableSizedTileItem}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick">

        <GridView.ItemsPanel>
            <ItemsPanelTemplate>                        
                <VirtualizingStackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        <GridView.GroupStyle>
            <GroupStyle>
                <GroupStyle.HeaderTemplate>
                    <DataTemplate>
                        <Grid Margin="1,0,0,6">
                            <Button
                                AutomationProperties.Name="Group Title"
                                Click="Header_Click"
                                Style="{StaticResource TextPrimaryButtonStyle}" >
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding Title}" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                    <TextBlock Text="{StaticResource ChevronGlyph}" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </GroupStyle.HeaderTemplate>
                <GroupStyle.Panel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid ItemWidth="75" ItemHeight="150" Orientation="Vertical" Margin="0,0,80,0" MaximumRowsOrColumns="3"/>
                    </ItemsPanelTemplate>
                </GroupStyle.Panel>
            </GroupStyle>
        </GridView.GroupStyle>
    </local:MyGridView>

        <DataTemplate x:Key="VariableSizedTileItem">
        <Grid>
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                <Image Source="{Binding Image}" Stretch="UniformToFill"/>
            </Border>
            <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" Style="{StaticResource TitleTextStyle}" Height="20" Margin="15,0,15,0"/>
                <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryForegroundThemeBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

*自定义可变大小的网格视图*

```
public class MyGridView : GridView
{
    private List<Size> _sequence;

    public MyGridView()
    {
        _sequence = new List<Size>
            {
                LayoutSizes.PrimaryItem,
                LayoutSizes.SecondarySmallItem,
                LayoutSizes.SecondarySmallItem,
                LayoutSizes.OtherSmallItem,
                LayoutSizes.OtherSmallItem, // 5 
                LayoutSizes.OtherSmallItem,
                LayoutSizes.SecondaryTallItem, // 7
                LayoutSizes.OtherSmallItem,
                LayoutSizes.SecondarySmallItem, // 9
                LayoutSizes.OtherSmallItem,
                LayoutSizes.SecondarySmallItem, // 11
                LayoutSizes.SecondarySmallItem,
                LayoutSizes.OtherSmallItem,
                LayoutSizes.OtherSmallItem
            };

    }

    protected override void PrepareContainerForItemOverride(Windows.UI.Xaml.DependencyObject element, object item)
    {
            var dataItem = item as SyndicatedDataItem;
            int index = -1;

            if(dataItem != null)
            {
                index = dataItem.Group.Items.IndexOf(dataItem);
            }

            int colVal;
            int rowVal;

            if (index >= 0 && index < _sequence.Count)
            {
                colVal = (int)_sequence[index].Width;
                rowVal = (int)_sequence[index].Height;
            }
            else
            {
                colVal = (int)LayoutSizes.OtherSmallItem.Width;
                rowVal = (int)LayoutSizes.OtherSmallItem.Height;
            }

            VariableSizedWrapGrid.SetRowSpan(element as UIElement, rowVal);
            VariableSizedWrapGrid.SetColumnSpan(element as UIElement, colVal);

            base.PrepareContainerForItemOverride(element, item);
    }

    /* 14 items style */
    public static class LayoutSizes
    {
        public static Size PrimaryItem = new Size(6, 2);
        public static Size SecondarySmallItem = new Size(3, 1);
        public static Size SecondaryTallItem = new Size(2, 2);
        public static Size OtherSmallItem = new Size(2, 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:49:41.667

`VariableSizedWrapGrid`用以下代码替换您的。我想它可能会对你有所帮助。

```
<VariableSizedWrapGrid ItemWidth="75" ItemHeight="150" 
                       Orientation="Vertical" Margin="0,0,80,0" 
                       MaximumRowsOrColumns="3"/> 
```

我希望它能解决你的问题。

谢谢你。

# jfreechart - 将矩形注释与 JFreeChart 中的另一个注释连接起来？

> ID：13175274
> 
> 赞同：0
> 
> 时间：2012-11-01T10:36:25.707
> 
> 标签：jfreechart

我已经使用`XYAnnotation`并绘制了一个矩形`xylinechart`。现在我怎样才能将它与另一个矩形annonation 连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:48:04.477

一种方法是使用`XYLineAnnotation`

```
plot.addAnnotation(new XYBoxAnnotation( 0.5,0.5,1.5,1.5));
plot.addAnnotation(new XYBoxAnnotation( 4.5,3.5,5.5,4.5));
plot.addAnnotation(new XYLineAnnotation( 1.5,1.5,4.5,3.5)); 
```

![连接的 XYBoxAnnotation](../Images/78c96047c81178b1e53b98e32817e347.png)

# forms - 查询 URI 服务并返回值到表单字段

> ID：13175279
> 
> 赞同：3
> 
> 时间：2012-11-01T10:36:49.850
> 
> 标签：forms, uri

我想要一个表单字段，填写后返回特定公司名称是否可用于注册的信息。我检查了公司网站，他们有他们的 URI 服务，但看起来应该通过公司编号而不是名称进行查询：http: [//business.data.gov.uk/id/company/](http://business.data.gov.uk/id/company/) {companynumber}

[公司大楼](http://www.companieshouse.gov.uk/about/miscellaneous/URI.shtml)

我是新手，所以如果有任何答案，您可以为我提供任何很棒的代码示例，在此先感谢。

# c# - WPF 正确处理视图和视图模型

> ID：13175280
> 
> 赞同：3
> 
> 时间：2012-11-01T10:36:53.163
> 
> 标签：c#, wpf, mvvm

我编写了一个 Outlook 加载项 (OL2010)。它在功能区栏上有一个带有各种图标的菜单，这些图标可以打开可以执行某些操作的新窗口（希望这不是太深入；））。下面是其中一个图标`Click`处理程序的示例。

```
public void OnViewMyTracksClick(Office.IRibbonControl control)
{
    try {
    MyTracksViewModel viewModel = new MyTracksViewModel();
    MyTracksView view = new MyTracksView();
    view.DataContext = viewModel;
    view.Show();
    }
    catch (Exception ex)
    {
        Log.Error("xxxxx", "Error on button click: " + ex.Message + Environment.NewLine + ex.InnerException);
    }
} 
```

在 Outlook 中，如果单击按钮打开此视图，我会看到内存使用量`Outlook.exe`增加了 10mb（窗口及其随附数据）。当我关闭视图时，没有任何内存被回收。如果我再次单击该按钮，则会添加另外 10mb，并且在我关闭视图时再次释放任何内容。

我认为这是因为我每次都在创建一个新的视图模型，所以我添加了一些代码来检查它是否已经实例化（视图和视图模型现在在类级别注册，而不是在方法中，所以我不'不要每次都创建一个新的） -`_allTracksVM`是`AllTracksViewModel`. `_allTracksV`是视图。

```
public void OnViewAllTracksClick(Office.IRibbonControl control)
{
    try {
        if (_allTracksVM == null)
        {
            _allTracksVM = new AllTracksViewModel();

        }
        _allTracksV = new AllTracksView();
        _allTracksV.DataContext = _allTracksVM;
        _allTracksV.Show();
    }
    catch (Exception ex)
    {
        Log.Error("xxxxx", "Error on button click: " + ex.Message + Environment.NewLine + ex.InnerException);
    }
} 
```

这似乎没有任何区别。然后我添加了一个`EventHandler`在视图关闭时会触发的内容：

```
_allTracksV.Closing += new System.ComponentModel.CancelEventHandler(this.view_RequestClose); 
```

这将两个对象都设置为 null （您可能会告诉我此时我正在抓住稻草）：

```
void view_RequestClose(object sender, EventArgs e)
{
    _allTracksVM = null;
    _allTracksV = null;
} 
```

内存仍然分配。如何正确处理对象（或者我应该以不同的方式实例化它们），以便它们每次打开时都不会消耗另一块内存？

谢谢

米克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:50:34.610

Checking the VM for Null was a good idea but by setting it to null in the close handler, it is rendered useless :) You could try to make the view a field in the containing class rather than a local variable. That way you don't need to create a new view each time.

As for the memory usage, it seems to me that you're doing it right. Since the GC only collects when necessary, it will take some time until the memoryusage declines.

# java - 当我打开任何 Android 应用程序时，如何显示我的布局（xml 文件）？

> ID：13175289
> 
> 赞同：0
> 
> 时间：2012-11-01T10:37:37.590
> 
> 标签：java, android, android-layout, android-intent, android-contentprovider

我是新来的 > 我需要一些帮助来构建一些代码，但我找不到任何代码 ..> 我有一些项目我必须完成 > 所以我听说这个网站正在为我们提供专业开发人员和程序员的帮助.我的问题：当我打开任何 android 应用程序时如何显示我的布局（xml 文件）？>> 我的意思是当我打开任何 android 应用程序或替换我的应用程序和 android 设备中的任何应用程序之间的活动时我如何调用我的活动....所以当我在我的设备中打开任何 android 应用程序时，结果将显示我的布局（ xml 文件）...那我该怎么做呢？

我希望有人回答我....我会很感激我被称为：（amjad）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:42:57.277

实际上假设您在 Eclipse 的 src 文件夹中有 1 个活动名称作为 MainActivity，并且在 res->layout 中有 xml 文件名作为 main

那么你必须在你的活动中添加以下代码

```
setContentView(R.layout.main); 
```

通过这个你可以使用包含在 xml 文件中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T12:56:59.237

dude check this guy :) he has a beginners tutorial series with index, so you can check any certain topic ,or follow one after another to save you time in learning best of luck ;) [http://www.vogella.com/articles/Android/article.html](http://www.vogella.com/articles/Android/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:18:52.013

Please refer to below link (basic tutorial for Android from Android/Google team): [http://developer.android.com/training/basics/firstapp/building-ui.html](http://developer.android.com/training/basics/firstapp/building-ui.html)

Update: I see that you have edited the question with more details. But, I am not sure if there is a way to call your app automatically when some one starts another App in the device unless it's a system level app. What you can do is provide one public intent to be called by any other apps and then at load time, the app calls your intent and hence can display your layout/xml.

# jquery - 通过遍历 div 动态地向子级添加类

> ID：13175290
> 
> 赞同：6
> 
> 时间：2012-11-01T10:37:43.220
> 
> 标签：jquery, css

我需要一个 jquery 脚本来动态地将类添加到类行中的“div”中。该类用于设置边距。如果类行中有两个 div，则仅将类添加到第一个，如果有三个“div”，则将类添加到两个避免第三个。

所以实际需要的是计算“行”上的 div 并将类添加到除最后一个以外的 div。这是我的html：-

```
 <div class="row">
                    <div class="two-col">
                        <h3>Header 2/3 Column</h3>
                        <p>Kidney Cancer Canada is a charitable patient-led support organization established to improve the quality of life for patients and their 
                        families living with kidney cancer. <a href="#">Kidney Cancer Canada</a> advocates for access to netreatments, provides support and information to patients, 
                        funds much-needed research, and works to increase awareness of kidney cancer as a significant health issue. Our goal is to help patients navigate
                        through information about their disease and ensure they have access to new treatment options available to them.</p>
                    </div>
                    <div class="one-col">
                        <h3>Header 1/3 Column</h3>
                        <p>KCC hosts patient and caregiver education meetings and webcasts from locations all across canada. Atttending meetings in-person provides an 
                        excellent oppurtunity to meet other kidney cancer patients, caregivers, and healthcare professionals</p>
                    </div>
                    <div class="clear"></div>
                </div>
                <div class="row">
                    <div class="one-col">
                        <h3>Header 1/3 Column</h3>
                        <p>KCC hosts patient and caregiver education meetings and webcasts from locations all across canada. Atttending meetings in-person provides an 
                        excellent oppurtunity to meet other kidney cancer patients, caregivers, and healthcare professionals</p>
                    </div>
                    <div class="one-col">
                        <h3>Header 1/3 Column</h3>
                        <p>KCC hosts patient and caregiver education meetings and webcasts from locations all across canada. Atttending meetings in-person provides an 
                        excellent oppurtunity to meet other kidney cancer patients, caregivers, and healthcare professionals</p>
                    </div>
                    <div class="one-col">
                        <h3>Header 1/3 Column</h3>
                        <p>KCC hosts patient and caregiver education meetings and webcasts from locations all across canada. Atttending meetings in-person provides an 
                        excellent oppurtunity to meet other kidney cancer patients, caregivers, and healthcare professionals</p>
                    </div>
                    <div class="clear"></div>
                </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:42:52.463

如果您不想将该课程应用于您`divs`的课程，`clear`那么您可以使用它

```
$('div.row').find('div').addClass('yourclass').not(':last-child,.clear'); 
```

或者

```
$('div.row').find('div').addClass('yourclass').not(':last-child'); 
```

**[现场样品](http://jsfiddle.net/VSM3w/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:40:12.377

这是执行此任务的脚本：

```
 $.each($(".row"),function () {

      var length = $(this).find('.two-col').length+$(this).find('.one-col').length+$(this).find('.three-col').length;
          for(i=1;i<length;i++)
          {
             $(this).find(":nth-child("+i+")").addClass('margin-right');
          }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:47:48.190

```
$("div.row").each(function(){

 len = $(this).find("div").length ;
 if ($(this).find("div.clear").length > 0){
   len = len-1;
 }
 var i=0;
 $(this).find("div").each(function(){
 if($(this).attr("class") != "clear"){
 if (i < len-1 ){
     $(this).addClass("margin_class");
  }  
 }
 i++;

 });

}); 
```

# perl - Mojo::Log - 是否可以在消息中添加行号？

> ID：13175293
> 
> 赞同：1
> 
> 时间：2012-11-01T10:37:50.380
> 
> 标签：perl, logging, line-numbers, mojolicious

是否可以以某种方式配置[Mojo::Log](http://search.cpan.org/perldoc?Mojo%3A%3ALog)以便将行号添加到日志消息中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:00:01.650

看起来不像，但您可以自己在其中使用[特殊文字](http://perldoc.perl.org/perldata.html#Special-Literals)：

```
$log->debug(__LINE__ . ': Some debug message.'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:58:25.037

没有。这不是受支持的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T01:57:21.973

你必须使用 Mojo::Log 吗？如果您可以使用 MojoX::Log::Log4perl，那么您就可以自由自在了。

```
use MojoX::Log::Log4perl;

sub startup {
    ...
    my $logconfig =<<EOF;
    ...
    log4perl.appender.FILE.layout.ConversionPattern = [%d] %P %p %C,%L - %m%n
    ...
EOF

    my $mojox_logger = MojoX::Log::Log4perl->new( \$logconfig );
    $self->log($mojox_logger);
} 
```

ConversionPattern 中的 %L 用于行号。

# javascript - 智能感知可以在没有 TypeScript 定义文件的情况下获取定义吗？

> ID：13175297
> 
> 赞同：1
> 
> 时间：2012-11-01T10:38:08.273
> 
> 标签：javascript, typescript

我仍然对智能感知如何找到我的文件的定义感到困惑。例如，如果我有一个名为 file1.ts 的文件：

```
///<reference path="../typescript/jquery.d.ts" />  
function x() {
    $.fn.y = function()
    {
    };
} 
```

和另一个文件file2.ts：

```
///<reference path="../typescript/jquery.d.ts" />  

$('a').y(); 
```

我是否可以在我的 file2.ts 中包含对 file1.ts 的引用以使智能感知工作并向我展示 .y() 可以在 $('a') 之后添加，还是您必须在接口或定义中明确声明文件然后添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:51:48.723

TypeScript 遍历依赖项 - 所以你只需要 jQuery 定义`file1.ts`：

这可能在一个例子中得到最好的解释：

*文件1.ts*

```
///<reference path="../typescript/jquery.d.ts" />

interface JQuery {
    y: () => void;
}

function x() {
    $.fn.y = function()
    {
    };
} 
```

*文件2.ts*

```
///<reference path="../typescript/file1.ts" />  

$('a').y(); 
```

# perl - perl 在单个字符上拆分字符串，而不是在重复的字符上

> ID：13175299
> 
> 赞同：1
> 
> 时间：2012-11-01T10:38:11.073
> 
> 标签：perl, split, char

我正在使用现有的 perl 脚本来处理来自我无法控制的数据库查询的文本文件输出。

数据包含由“|”分隔的字段，但某些字段包含“||”。没有空字段。字段分隔符的两侧可能有空格，我也想删除这些空格。

除了更改“||”之外，我找不到一种简单的方法来实现这一点 到别的东西，并在分裂后将其破解，这似乎有点沉重。

该文件很大（通常高达约 100M）。

使用`split(/ *\| */, $line)`除 '||' 之外的作品 特点。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:48:45.400

```
split /\s*(?<!\|)\|(?!\|)\s*/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:49:40.687

您可以使用否定的后视和前瞻来确保您要拆分的`|`周围没有符号：`|`

```
split / \s* (?<!\|) \| (?!\|) \s* /x 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:50:53.493

查看使用[Text::CSV](http://search.cpan.org/~makamaka/Text-CSV/lib/Text/CSV.pm)或[Tie::Handle::CSV](http://search.cpan.org/~danboo/Tie-Handle-CSV/lib/Tie/Handle/CSV.pm)运行文件。如果文本文件已正确完成包含*||的字段* 将被引用。

# ruby-on-rails-3 - 维护与复选框的多对多关系（例如，帖子所在的每个类别的复选框）

> ID：13175301
> 
> 赞同：2
> 
> 时间：2012-11-01T10:38:25.290
> 
> 标签：ruby-on-rails-3, ruby-datamapper

我们有一个包含唯一类别的类别表。我们的帖子应该链接到这些类别中的任何一个。我尝试通过以下方式添加用于选择类别的复选框：

1.  在名为“post[categoriesss][]”的字段中添加包含类别的复选框，其中包含类别的值`:id`。
2.  更新`new`and`update`方法以获取这些 id 并收集与之关联的类别，然后按照[文档](http://datamapper.org/docs/associations.html)`<<`中的说明通过运算符将每个类别添加到类别属性中。

我们将代码添加到`new`并`update`确保不必在多个控制器中执行此操作。

但是，我们收到以下错误：

> 类别上未定义的属性或关系“<<”

我们在这里做错了什么？有没有其他方法可以实现我们的目标？我们的代码如下。

```
class Post
  include DataMapper::Resource  

  property :id,               Serial

  has n, :categories, :through => Resource

  def self.new(hash={})

    if hash.key? :categoriesss
      hash[:categoriesss].each do |category|
        categories << Category.get(category)
      end
      hash.delete! :categoriesss
    end    

    super hash
  end

end

class Category
  include DataMapper::Resource  

  property :id,       Serial
  property :name,     String,   :required => true

  has n, :rekenservices, :through => Resource
end 
```

```
 <% Category.all.each do |category| %>
    <label>
      <input type="checkbox" name="post[categoriesss][]" value="<%= category.id %>" />
      <%= category.name %>
    </label>
  <% end %> 
```

**更新**：我现在将复选框的名称改回并将and方法`categories`更新为：`new``update`

```
 def self.new(hash={})
      if hash.key? :categories
        hash[:categories].map! {|id| Category.get id}
      end    
      super hash
  end

  def update(hash={})
    if hash.key? :categories
      hash[:categories].map! {|id| Category.get id}
    end    
    super hash
  end 
```

第一次添加类别有效。更新时检查一个额外的类别也很有效。但是，取消选中类别会产生错误消息：

> 列 category_id、post_id 不是唯一的

# c++ - 如何找到派生类的直接父类

> ID：13175303
> 
> 赞同：0
> 
> 时间：2012-11-01T10:38:34.523
> 
> 标签：c++

假设我有一个基类B，派生类D，派生派生类DD。如何获取当前对象的直接父级实例？

例如

```
DD dd;
if (condition )
  dd->myfunction();
else
  d = getcurrentparent(); // this should give the current parent, here D d; 
```

编辑：

好的，我正在添加我的场景。

它就像一个菜单。每个菜单都是不同的类别。

主菜单-基类子菜单-派生类子子菜单-派生派生类。

现在当我在子子菜单中遍历时，我需要知道当前 obj 的直接父级（比如从子子菜单返回到子菜单）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:47:44.023

如果你有`DD dd;`，你总是可以通过分配一个引用来获得对它的任何基类的引用：

```
DD dd;
D& d = dd; 
```

我不确定您为什么要这样做，因为派生对象可以做基础对象可以做的所有事情（以及更多）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:04:07.657

试试这样的，

```
class D : public B
{
   virtual const char * GetParent()
   {
       return "B";
   }

    // other stuff....
}

class DD : public D
{
   virtual const char * GetParent()
   {
       return "D";
   }

   // other stuff....
} 
```

我希望这是你想要的。你为什么需要这样的东西？您是否正在创建类似具有层次结构的对象注册表或类似的东西？

- 编辑 -

`D * d = &dd;` 或者如果你真的想要，创建一个复制函数，将 DD 对象复制到 D 对象。但我猜是你没有正确地问你的问题。

ps对不起，我第一次读错了这个问题。

- 编辑 -

好的，您需要的是复合设计模式。如 UML 图所示，它不是很复杂。一旦你实现了它，就很容易编写你的其他东西。谈到设计模式时，我喜欢《傻瓜设计模式》这本书。它很好地解释了设计模式，并且很好地解释了复合设计模式。如果您需要帮助，请发表评论询问。但首先尝试自己做。：） 请享用。维基百科链接：[http ://en.wikipedia.org/wiki/Composite_pattern](http://en.wikipedia.org/wiki/Composite_pattern)

--EDIT-- Composite DP是这样的， ![复合设计模式](../Images/c35cf2d9b8df0b8523b45e231cdcaef1.png)

假设您的场景是控制台上的一个非常简单的菜单，我会这样做，

*   `Leaf`==>`MenuItem`类
*   `Composite`==>`Menu`类
*   `+operation()`==>`Select()`两个类的功能。这个函数应该是虚拟的，并且在`Menu`类和`MenuItem`类中被覆盖，以分别*显示/展开*和*选择项目*。
*   `Menu`类将具有`GoBack()`到父菜单的功能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:07:22.460

不是一个好主意。您可以执行上面的建议，但这不是一个好的设计选择。此外，在多重继承（或多个接口）的情况下，您想要什么父级？

# php - 使用shopify PHP api在shopify api中实现更新产品

> ID：13175304
> 
> 赞同：1
> 
> 时间：2012-11-01T10:38:37.327
> 
> 标签：php

我正在实施*@sandeep shetty shopify api*将记录插入我的shopify 商店。我已经完全实现了插入，并且在我的商店中运行良好。我在更新过程中遇到问题。我无法更新正在插入商店的记录。我正在根据插入后由 api 生成的 id 更新记录。
这是我为更新产品编写的代码。

将在 shopify api 调用中作为参数传递的数组。

```
$product = array
    (

        "product" => array
        (
            "variants" => array
                (
                    "price" =>  $cat['selling_price'],
                    "inventory_quantity"=>($cat['original_qty']!="") ? $cat['original_qty'] : 'Null',
                )
        )
    ); 
```

更新产品的代码。

```
$update = $shopify('PUT', "/admin/products/#{id}.json", $product); 
```

# ios - 显示滚动视图范围之外的内容

> ID：13175309
> 
> 赞同：1
> 
> 时间：2012-11-01T10:39:02.163
> 
> 标签：ios, scrollview, paging

如何显示滚动视图范围之外的内容？

我创建了一个具有特定边界的滚动视图，在 y 轴上将内容大小设置为大几倍，启用了分页，但想在上面显示一页，在下面显示一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:52:31.987

您需要为您的滚动视图实例设置`@property(nonatomic) BOOL clipsToBounds`为。`NO`

# c++ - How to minimize the times that list constructor (either copy-constructor ) is called?

> ID：13175312
> 
> 赞同：0
> 
> 时间：2012-11-01T10:39:16.120
> 
> 标签：c++

I have the following compare method. The method compare and return diff result.

I want to minimize the times that the result list is copied (to temporal and to assignment).

One way to do this is to add additional reference argument for the result, but i love that utils function are closed (they dont change values), so i prefer to avoid this.

One copy can be avoid by using the const& in the assignment

```
const& list<uint32> diff = getDiffNewElements (...) 
```

, can be a way to also avoid the local copy to temporal ?

The diff method:

```
list<uint32> getDiffNewElements(const list<Row>& src ,const list<Row>& dst) {
    list<uint32> result;

        ... Do Some compare

        return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:02:06.267

There are potentially two copies in the code that you present. One inside the function, from the variable `result` to the returned object. NRVO will take care of that if the complexity of the function allows for it. If as it seems, you have a single return statement, then the compiler will elide that copy (assuming that you are not disabling it with compiler flags and that you have *some* optimization level enabled).

The second potential copy is in the caller, from the returned value to the final storage. That copy is almost always elided by the compiler, and it is even simpler to do here than in the NRVO case: the calling convention (all calling conventions I know of) determines that the caller reserves the space for the returned object, and that it passes a hidden pointer to that location to the function. The function in turn uses that pointer as the destination of the first copy.

A function `T f()` is transformed into `void f( uninitialized<T>* __ret )` (there is no such thing as `uninitialized<>`, but bear with me) and the implementation of the function uses that pointer as the destination when copying in the `return` statement. On the caller site, if you have `T a = f();` the compiler will transform it into `T a/*no construction here*/; f(&a);`

There is an interesting bit of code in the question that seems to indicate that you have been mislead in the past: `const list<uint32>& diff = getDiffNewElements(...)`. Using a reference rather than storing the value directly (as in `list<uint32> diff = getDiffNewElements(...)`) has no impact at all in the number of copies that are made. The `getDiffNewElements` still needs to *copy* (or elide the copy) to the returned object and that object lives in the scope of the caller. By taking a const reference you are telling the compiler that you don't want to directly name that object, but rather keep it as an unnamed object in the scope and that you only want to use a reference to it. Semantically it can be transformed into:

```
T __unnamed = getDiffNewElements(...);  // this copy can be elided
T const& diff = __unnamed; 
```

The compiler is free, and will probably, optimize the reference away, using the identifier `diff` as an alias to `__unnamed` without requiring extra space, so in general it will not be worse than the alternative, but the code is slightly more complex and there is no advantage at all.

Long time ago, when I had time, I started a blog and wrote a couple of articles on value semantics, (N)RVO and copy elision. You might want to take a look.

*   [NRVO](http://definedbehavior.blogspot.com/2011/08/value-semantics-nrvo.html)
*   [Copy elision](http://definedbehavior.blogspot.com/2011/08/value-semantics-copy-elision.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:18:57.647

You are looking in the wrong direction. Your `getDiffNewElements` method does not create unnecessary copies, because modern compilers do [RVO](http://en.wikipedia.org/wiki/Return_value_optimization) (which was pointed in the comments, although if your compiler doesn't do RVO, there is nothing you can do about it, your `const&` won't help). The way you can optimize this function is to return `vector` instead of `list`, since you can call `reserve` on `vector` and avoid memory allocations every time you `push_back` a new element. `list` does not preallocate memory with default allocator and it has no `reserve` method to do that.

# regex - 如何获得强大的电子邮件验证正则表达式

> ID：13175323
> 
> 赞同：0
> 
> 时间：2012-11-01T10:40:03.150
> 
> 标签：regex

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

我在我的代码中使用**电子邮件地址验证**，为此我使用的是正则表达式。谁能建议我一个不接受电子邮件地址的正则表达式，例如。abc@def.commmmmm 或 abc@xyz.com.com.com 或 abc@gmail.c。

请帮我。

谢谢任何信息对我都很有价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:44:33.577

正则表达式 =

```
 /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, 
```

我已经在验证引擎以及自定义 js 文件中使用过。

# mysql - MySQL - 查询 3 个表

> ID：13175327
> 
> 赞同：-4
> 
> 时间：2012-11-01T10:40:18.407
> 
> 标签：mysql, sql, database

假设我有 3 个表，每个表都有一个 field `foo`。我如何获得以下记录：

1.  所有 3 个表中都存在 foo 值的所有记录？
2.  任意 2 个表中存在 foo 值的所有记录？
3.  foo 的值仅存在于 1 个表中的所有记录？

`foo`是独特的。

**我对#1的尝试：**

```
SELECT a.foo
FROM   a
WHERE  a.foo IN (SELECT b.foo
                 FROM   b
                 WHERE  b.foo IN (SELECT c.foo
                                  FROM   c)) 
```

对于#2，我认为我需要做一些类似于#1 的事情，但是一次对 2 个表 {a,b}, {b,c}, {a,c} - 然后 UNION 呢？没有把握。

对于＃3，没有线索。

**更新：示例数据**

```
Table1
 - foo-a
 - foo-b
 - foo-c

Table2
 - foo-a
 - foo-b

Table3
 - foo-a
 - foo-c
 - foo-d 
```

对于 #1 问题，所有 3 个表中都存在 1 条记录：foo-a。对于#2 问题，2 个表中存在 2 条记录：foo-b（在 Table1 和 Table2 中）和 foo-c（在 Table1 和 Table3 中）。对于 #3 问题，只有 1 个表中存在 1 条记录：foo-d。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:45:29.300

既然`FOO`是独一无二的，

**对于 1 号，**

```
SELECT Foo
FROM
    (
        SELECT Foo FROM table1
        UNION ALL
        SELECT Foo FROM table2
        UNION ALL
        SELECT Foo FROM table3
    ) a
GROUP BY Foo
HAVING COUNT(*) = 3 
```

**对于 2 号，**

```
SELECT Foo
FROM
    (
        SELECT Foo FROM table1
        UNION ALL
        SELECT Foo FROM table2
        UNION ALL
        SELECT Foo FROM table3
    ) a
GROUP BY Foo
HAVING COUNT(*) = 2 
```

**对于 3 号，**

```
SELECT Foo
FROM
    (
        SELECT Foo FROM table1
        UNION ALL
        SELECT Foo FROM table2
        UNION ALL
        SELECT Foo FROM table3
    ) a
GROUP BY Foo
HAVING COUNT(*) = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:44:35.183

试试这个：如果值为`Cont`1 则该值仅存在于一个表中，如果值为 2 则它存在于两个表中，依此类推。

```
SELECT foo, COUNT(1) Cont
  FROM 
  (
  SELECT foo
    FROM  a
    UNION
  SELECT foo
    FROM  b
    UNION
 SELECT foo
    FROM  c 
  ) a
  GROUP BY foo
  --   HAVING COUNT(1) = 1 -- 2 FOR EXISTING IN TWO TABLES, 3 FOR EXISTING IN ALL TABLES 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:23:08.223

对于可以获取具有计数的所有项目的单个 SQL，或者（使用 HAVING 子句）如果需要任何单独的项目：-

```
SELECT a.foo, COUNT(*)
FROM (SELECT foo
FROM  a
UNION
SELECT foo
FROM  b
UNION
SELECT foo
FROM  c) AS z
LEFT OUTER JOIN a ON a.foo = z.foo
LEFT OUTER JOIN b ON b.foo = z.foo
LEFT OUTER JOIN c ON c.foo = z.foo
GROUP BY z.foo 
```

# python - 在代理后面使用 Tweepy API

> ID：13175328
> 
> 赞同：0
> 
> 时间：2012-11-01T10:40:18.623
> 
> 标签：python, oauth, proxy, tweepy

我有一个使用**Tweepy**，一个用于 Twitter 的 python 包装器。我正在用 Python 编写一个小的 GUI 应用程序来更新我的 Twitter 帐户。

目前，我只是在测试我是否可以连接到 Twitter，因此使用了 test() 调用。我在 Squid 代理服务器后面。我应该对代码片段进行哪些更改，以便完成我的工作。

在 bash shell 中设置**http_proxy**对我没有帮助。

```
def printTweet(self):
    #extract tweet string
    tweet_str = str(self.ui.tweet_txt.toPlainText()) ;
    #tweet string extracted.
    self.ui.tweet_txt.clear()  ;

    self.tweet_on_twitter(str);

def tweet_on_twitter(self,my_tweet) :
    auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET);
    auth.set_access_token(ACCESS_KEY, ACCESS_SECRET) ;
    api = tweepy.API(auth) ;

    if api.test() :
        print 'Test successful' ;
    else :
        print 'Test unsuccessful'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-01T22:53:57.770

我猜你应该设置'https_proxy'。

在我的 linux 上，我使用这个：

```
> export HTTPS_PROXY="http://xxxx:8888" 
```

在运行我的 Tweepy 脚本之前。

Tweep 使用“请求”包发送请求，请阅读[http://docs.python-requests.org/en/master/user/advanced/#proxies](http://docs.python-requests.org/en/master/user/advanced/#proxies)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:53:06.977

tweepy 中的代理支持严重不足；有一个[补丁可以](https://github.com/tweepy/tweepy/pull/152)解决这个问题。

该补丁将 Tweepy 从`httplib`直接使用切换到使用`urllib2`，这意味着它会尊重`http_proxy`环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:50:11.533

**编辑：原来这不是一个可行的答案，但我把它留在这里供参考**

* * *

由于快速浏览代码表明 tweepy 正在使用 urllib2.urlopen & co.，因此最简单的方法可能是覆盖默认的开启程序......

```
# 'x.x.x.x' = IP of squid server
your_squid_server = urllib2.ProxyHandler({'http': 'x.x.x.x', 'https': 'x.x.x.x'})
new_opener = urllib2.build_opener(your_squid_server)
urllib2.install_opener(new_opener) 
```

不过目前还没有环境可以检查...

**在导入 tweepy 之前执行上述操作，以确保新的开启器生效**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T17:02:01.180

这是一个老问题，但希望这会有所帮助。

[https://bitbucket.org/sakito/tweepy](https://bitbucket.org/sakito/tweepy)为 tweepy 提供了 urllib 并入其中；代理设置运行良好。流有一点问题（至少在我的情况下），但稍作调整即可使用。

# linux - 在linux ec2上安装monit失败

> ID：13175331
> 
> 赞同：6
> 
> 时间：2012-11-01T10:40:27.930
> 
> 标签：linux, monit

我正在尝试在 linux 上安装 monit。我运行了以下命令：

```
wget http://mmonit.com/monit/dist/monit-5.5.tar.gz
tar zxvf monit-5.5.tar.gz
cd monit-5.5
./configure 
```

当我尝试时：

```
make && make install 
```

我得到：

```
make: *** No targets specified and no makefile found.  Stop. 
```

monit-5.5 目录包含以下内容：

```
$ ls
CHANGES      Makefile.in  bootstrap   configure     doc       monitrc
COPYING      README       config      configure.ac  libmonit  src
Makefile.am  aclocal.m4   config.log  contrib       monit.1 
```

不知道是什么问题。感谢您的帮助。

```
[ec2-user@...~]$ sudo tar zxvf monit-5.5.tar.gz.1 monit-5.5/
monit-5.5/src/
monit-5.5/src/http/
monit-5.5/src/http/base64.h
monit-5.5/src/http/processor.h
monit-5.5/src/http/base64.c
monit-5.5/src/http/cervlet.c
monit-5.5/src/http/cervlet.h
monit-5.5/src/http/engine.h
monit-5.5/src/http/engine.c
monit-5.5/src/http/processor.c
monit-5.5/src/http/httpstatus.h
monit-5.5/src/p.y
monit-5.5/src/collector.c
monit-5.5/src/util.h
monit-5.5/src/ssl.c
monit-5.5/src/status.c
monit-5.5/src/monit.h
monit-5.5/src/log.c
monit-5.5/src/net.c
monit-5.5/src/y.tab.c
monit-5.5/src/file.h
monit-5.5/src/socket.h
monit-5.5/src/md5_crypt.c
monit-5.5/src/event.c
monit-5.5/src/md5.c
monit-5.5/src/daemonize.c
monit-5.5/src/signal.c
monit-5.5/src/process.h
monit-5.5/src/sha1.c
monit-5.5/src/lex.yy.c
monit-5.5/src/md5_crypt.h
monit-5.5/src/socket.c
monit-5.5/src/control.c
monit-5.5/src/config.h.in
monit-5.5/src/net.h
monit-5.5/src/env.c
monit-5.5/src/util.c
monit-5.5/src/alert.c
monit-5.5/src/l.l
monit-5.5/src/state.c
monit-5.5/src/alert.h
monit-5.5/src/md5.h
monit-5.5/src/http.c
monit-5.5/src/validate.c
monit-5.5/src/process.c
monit-5.5/src/gc.c
monit-5.5/src/device/
monit-5.5/src/device/device_sysdep.h
monit-5.5/src/device/sysdep_LINUX.c
monit-5.5/src/device/sysdep_NETBSD.c
monit-5.5/src/device/device.h
monit-5.5/src/device/sysdep_DARWIN.c
monit-5.5/src/device/sysdep_OPENBSD.c
monit-5.5/src/device/sysdep_UNKNOWN.c
monit-5.5/src/device/sysdep_SOLARIS.c
monit-5.5/src/device/device_common.c
monit-5.5/src/device/sysdep_AIX.c
monit-5.5/src/device/sysdep_FREEBSD.c
monit-5.5/src/device/sysdep_HPUX.c
monit-5.5/src/tokens.h
monit-5.5/src/state.h
monit-5.5/src/file.c
monit-5.5/src/spawn.c
monit-5.5/src/protocols/
monit-5.5/src/protocols/rsync.c
monit-5.5/src/protocols/pgsql.c
monit-5.5/src/protocols/mysql.c
monit-5.5/src/protocols/ftp.c
monit-5.5/src/protocols/protocol.c
monit-5.5/src/protocols/apache_status.c
monit-5.5/src/protocols/lmtp.c
monit-5.5/src/protocols/dns.c
monit-5.5/src/protocols/ntp3.c
monit-5.5/src/protocols/sip.c
monit-5.5/src/protocols/nntp.c
monit-5.5/src/protocols/tns.c
monit-5.5/src/protocols/ldap2.c
monit-5.5/src/protocols/smtp.c
monit-5.5/src/protocols/ldap3.c
monit-5.5/src/protocols/radius.c
monit-5.5/src/protocols/http.c
monit-5.5/src/protocols/dwp.c
monit-5.5/src/protocols/imap.c
monit-5.5/src/protocols/default.c
monit-5.5/src/protocols/gps.c
monit-5.5/src/protocols/protocol.h
monit-5.5/src/protocols/pop.c
monit-5.5/src/protocols/generic.c
monit-5.5/src/protocols/ssh.c
monit-5.5/src/protocols/memcache.c
monit-5.5/src/protocols/clamav.c
monit-5.5/src/protocols/postfix_policy.c
monit-5.5/src/protocols/rdate.c
monit-5.5/src/event.h
monit-5.5/src/xml.c
monit-5.5/src/ssl.h
monit-5.5/src/sha1.h
monit-5.5/src/process/
monit-5.5/src/process/sysdep_LINUX.c
monit-5.5/src/process/sysdep_NETBSD.c
monit-5.5/src/process/sysdep_DARWIN.c
monit-5.5/src/process/sysdep_OPENBSD.c
monit-5.5/src/process/sysdep_UNKNOWN.c
monit-5.5/src/process/process_sysdep.h
monit-5.5/src/process/process_common.c
monit-5.5/src/process/sysdep_SOLARIS.c
monit-5.5/src/process/sysdep_AIX.c
monit-5.5/src/process/sysdep_FREEBSD.c
monit-5.5/src/process/sysdep_HPUX.c
monit-5.5/src/sendmail.c
monit-5.5/src/monit.c
monit-5.5/monitrc
monit-5.5/CHANGES
monit-5.5/monit.1
monit-5.5/configure.ac
monit-5.5/configure
monit-5.5/aclocal.m4
monit-5.5/Makefile.in
monit-5.5/bootstrap
monit-5.5/libmonit/
monit-5.5/libmonit/src/
monit-5.5/libmonit/src/thread/
monit-5.5/libmonit/src/thread/Thread.h
monit-5.5/libmonit/src/thread/Thread.c
monit-5.5/libmonit/src/system/
monit-5.5/libmonit/src/system/Time.h
monit-5.5/libmonit/src/system/Net.h
monit-5.5/libmonit/src/system/Mem.c
monit-5.5/libmonit/src/system/Mem.h
monit-5.5/libmonit/src/system/Net.c
monit-5.5/libmonit/src/system/System.h
monit-5.5/libmonit/src/system/Command.h
monit-5.5/libmonit/src/system/Time.c
monit-5.5/libmonit/src/system/System.c
monit-5.5/libmonit/src/system/Process.h
monit-5.5/libmonit/src/system/Command.c
monit-5.5/libmonit/src/io/
monit-5.5/libmonit/src/io/File.h
monit-5.5/libmonit/src/io/Dir.h
monit-5.5/libmonit/src/io/InputStream.h
monit-5.5/libmonit/src/io/InputStream.c
monit-5.5/libmonit/src/io/OutputStream.h
monit-5.5/libmonit/src/io/OutputStream.c
monit-5.5/libmonit/src/io/File.c
monit-5.5/libmonit/src/io/Dir.c
monit-5.5/libmonit/src/util/
monit-5.5/libmonit/src/util/Str.h
monit-5.5/libmonit/src/util/Str.c
monit-5.5/libmonit/src/util/StringBuffer.h
monit-5.5/libmonit/src/util/StringBuffer.c
monit-5.5/libmonit/src/util/List.h
monit-5.5/libmonit/src/util/List.c
monit-5.5/libmonit/src/xconfig.h.in
monit-5.5/libmonit/src/Bootstrap.h
monit-5.5/libmonit/src/Bootstrap.c
monit-5.5/libmonit/src/exceptions/
monit-5.5/libmonit/src/exceptions/MemoryException.h
monit-5.5/libmonit/src/exceptions/AssertException.h
monit-5.5/libmonit/src/exceptions/Exception.h
monit-5.5/libmonit/src/exceptions/NumberFormatException.h
monit-5.5/libmonit/src/exceptions/IOException.h
monit-5.5/libmonit/src/exceptions/assert.c
monit-5.5/libmonit/src/exceptions/Exception.c
monit-5.5/libmonit/src/exceptions/assert.h
monit-5.5/libmonit/src/Config.h
monit-5.5/libmonit/libtool
monit-5.5/libmonit/Makefile
monit-5.5/libmonit/configure.ac
monit-5.5/libmonit/test/
monit-5.5/libmonit/test/OutputStreamTest.c
monit-5.5/libmonit/test/Makefile
monit-5.5/libmonit/test/FileTest.c
monit-5.5/libmonit/test/StrTest.c
monit-5.5/libmonit/test/TimeTest.c
monit-5.5/libmonit/test/CommandTest.c
monit-5.5/libmonit/test/Makefile.in
monit-5.5/libmonit/test/ListTest.c
monit-5.5/libmonit/test/DirTest.c
monit-5.5/libmonit/test/NetTest.c
monit-5.5/libmonit/test/test.sh
monit-5.5/libmonit/test/StringBufferTest.c
monit-5.5/libmonit/test/ExceptionTest.c
monit-5.5/libmonit/test/Makefile.am
monit-5.5/libmonit/test/SystemTest.c
monit-5.5/libmonit/test/InputStreamTest.c
monit-5.5/libmonit/test/data/
monit-5.5/libmonit/test/data/stream.data
monit-5.5/libmonit/configure
monit-5.5/libmonit/aclocal.m4
monit-5.5/libmonit/Makefile.in
monit-5.5/libmonit/bootstrap
monit-5.5/libmonit/config/
monit-5.5/libmonit/config/config.guess
monit-5.5/libmonit/config/missing
monit-5.5/libmonit/config/ltmain.sh
monit-5.5/libmonit/config/install-sh
monit-5.5/libmonit/config/config.sub
monit-5.5/libmonit/COPYING
monit-5.5/libmonit/README
monit-5.5/libmonit/Makefile.am
monit-5.5/libmonit/m4/
monit-5.5/libmonit/m4/libtool.m4
monit-5.5/libmonit/m4/lt~obsolete.m4
monit-5.5/libmonit/m4/ltsugar.m4
monit-5.5/libmonit/m4/ltoptions.m4
monit-5.5/libmonit/m4/ltversion.m4
monit-5.5/contrib/
monit-5.5/contrib/monitrc-gentoo
monit-5.5/contrib/rc.monit
monit-5.5/contrib/packages/
monit-5.5/contrib/packages/freebsd/
monit-5.5/contrib/packages/freebsd/pkg-message
monit-5.5/contrib/packages/freebsd/distinfo
monit-5.5/contrib/packages/freebsd/Makefile
monit-5.5/contrib/packages/freebsd/files/
monit-5.5/contrib/packages/freebsd/files/monit.sh
monit-5.5/contrib/packages/freebsd/pkg-descr
monit-5.5/contrib/packages/freebsd/README.porter
monit-5.5/contrib/packages/redhat/
monit-5.5/contrib/packages/redhat/monit.spec
monit-5.5/contrib/packages/solaris/
monit-5.5/contrib/packages/solaris/README.solaris
monit-5.5/contrib/packages/solaris/init.monit
monit-5.5/contrib/packages/solaris/makesolpkg.sh
monit-5.5/contrib/monit.upstart.in
monit-5.5/contrib/monit.service.in
monit-5.5/contrib/monit.service
monit-5.5/contrib/monit.upstart
monit-5.5/config/
monit-5.5/config/config.guess
monit-5.5/config/missing
monit-5.5/config/ltmain.sh
monit-5.5/config/install-sh
monit-5.5/config/config.sub
monit-5.5/COPYING
monit-5.5/README
monit-5.5/doc/
monit-5.5/doc/monit.pod
monit-5.5/doc/PLATFORMS
monit-5.5/Makefile.am
[ec2-user@domU-12-31-39-03-28-A1 ~]$ ls
crawller                    monit-5.5           node-v0.8.14         tmp
m_2.2.0.tgz                 monit-5.5.tar.gz    node-v0.8.14.tar.gz
mongodb-linux-x86_64-2.2.0  monit-5.5.tar.gz.1  nodejs
[ec2-user@domU-12-31-39-03-28-A1 ~]$ cd monit-5.5
[ec2-user@domU-12-31-39-03-28-A1 monit-5.5]$ sudo ./configure
checking for a BSD-compatible install... /usr/bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for style of include used by make... GNU
checking dependency style of gcc... none
checking whether make sets $(MAKE)... (cached) yes
checking for bison... bison -y
checking for flex... /usr/bin/flex
checking for pod2man... /usr/bin/pod2man
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking for a sed that does not truncate output... /bin/sed
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for fgrep... /bin/grep -F
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
checking the name lister (/usr/bin/nm -B) interface... BSD nm
checking whether ln -s works... yes
checking the maximum length of command line arguments... 1572864
checking whether the shell understands some XSI constructs... yes
checking whether the shell understands "+="... yes
checking for /usr/bin/ld option to reload object files... -r
checking for objdump... objdump
checking how to recognize dependent libraries... pass_all
checking for ar... ar
checking for strip... strip
checking for ranlib... ranlib
checking command to parse /usr/bin/nm -B output from gcc object... ok
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking for dlfcn.h... yes
checking for objdir... .libs
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fPIC -DPIC
checking if gcc PIC flag -fPIC -DPIC works... yes
checking if gcc static flag -static works... no
checking if gcc supports -c -o file.o... yes
checking if gcc supports -c -o file.o... (cached) yes
checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
checking for socket in -lsocket... no
checking for socket in -linet... no
checking for inet_addr in -lnsl... yes
checking for inet_aton in -lresolv... yes
checking for crypt in -lc... no
checking for crypt in -lcrypt... yes
checking for pthread_create in -lpthread... yes
checking for ANSI C header files... (cached) yes
checking for sys/wait.h that is POSIX.1 compatible... yes
checking whether stat file-mode macros are broken... no
checking whether time.h and sys/time.h may both be included... yes
checking alloca.h usability... yes
checking alloca.h presence... yes
checking for alloca.h... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking asm/page.h usability... no
checking asm/page.h presence... no
checking for asm/page.h... no
checking asm/param.h usability... yes
checking asm/param.h presence... yes
checking for asm/param.h... yes
checking cf.h usability... no
checking cf.h presence... no
checking for cf.h... no
checking crt_externs.h usability... no
checking crt_externs.h presence... no
checking for crt_externs.h... no
checking ctype.h usability... yes
checking ctype.h presence... yes
checking for ctype.h... yes
checking crypt.h usability... yes
checking crypt.h presence... yes
checking for crypt.h... yes
checking dirent.h usability... yes
checking dirent.h presence... yes
checking for dirent.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking execinfo.h usability... yes
checking execinfo.h presence... yes
checking for execinfo.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking getopt.h usability... yes
checking getopt.h presence... yes
checking for getopt.h... yes
checking glob.h usability... yes
checking glob.h presence... yes
checking for glob.h... yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking kvm.h usability... no
checking kvm.h presence... no
checking for kvm.h... no
checking paths.h usability... yes
checking paths.h presence... yes
checking for paths.h... yes
checking kstat.h usability... no
checking kstat.h presence... no
checking for kstat.h... no
checking sys/protosw.h usability... no
checking sys/protosw.h presence... no
checking for sys/protosw.h... no
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking loadavg.h usability... no
checking loadavg.h presence... no
checking for loadavg.h... no
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking mach/host_info.h usability... no
checking mach/host_info.h presence... no
checking for mach/host_info.h... no
checking mach/mach.h usability... no
checking mach/mach.h presence... no
checking for mach/mach.h... no
checking mach/mach_host.h usability... no
checking mach/mach_host.h presence... no
checking for mach/mach_host.h... no
checking for memory.h... (cached) yes
checking mntent.h usability... yes
checking mntent.h presence... yes
checking for mntent.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking netinet/in_systm.h usability... yes
checking netinet/in_systm.h presence... yes
checking for netinet/in_systm.h... yes
checking pam/pam_appl.h usability... no
checking pam/pam_appl.h presence... no
checking for pam/pam_appl.h... no
checking security/pam_appl.h usability... no
checking security/pam_appl.h presence... no
checking for security/pam_appl.h... no
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking procfs.h usability... no
checking procfs.h presence... no
checking for procfs.h... no
checking sys/procfs.h usability... yes
checking sys/procfs.h presence... yes
checking for sys/procfs.h... yes
checking procinfo.h usability... no
checking procinfo.h presence... no
checking for procinfo.h... no
checking pthread.h usability... yes
checking pthread.h presence... yes
checking for pthread.h... yes
checking pwd.h usability... yes
checking pwd.h presence... yes
checking for pwd.h... yes
checking regex.h usability... yes
checking regex.h presence... yes
checking for regex.h... yes
checking setjmp.h usability... yes
checking setjmp.h presence... yes
checking for setjmp.h... yes
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking stdio.h usability... yes
checking stdio.h presence... yes
checking for stdio.h... yes
checking for string.h... (cached) yes
checking for strings.h... (cached) yes
checking stropts.h usability... no
checking stropts.h presence... no
checking for stropts.h... no
checking sys/cfgodm.h usability... no
checking sys/cfgodm.h presence... no
checking for sys/cfgodm.h... no
checking sys/cfgdb.h usability... no
checking sys/cfgdb.h presence... no
checking for sys/cfgdb.h... no
checking sys/dk.h usability... no
checking sys/dk.h presence... no
checking for sys/dk.h... no
checking sys/dkstat.h usability... no
checking sys/dkstat.h presence... no
checking for sys/dkstat.h... no
checking sys/filio.h usability... no
checking sys/filio.h presence... no
checking for sys/filio.h... no
checking sys/ioctl.h usability... yes
checking sys/ioctl.h presence... yes
checking for sys/ioctl.h... yes
checking sys/loadavg.h usability... no
checking sys/loadavg.h presence... no
checking for sys/loadavg.h... no
checking sys/lock.h usability... no
checking sys/lock.h presence... no
checking for sys/lock.h... no
checking sys/mnttab.h usability... no
checking sys/mnttab.h presence... no
checking for sys/mnttab.h... no
checking sys/mutex.h usability... no
checking sys/mutex.h presence... no
checking for sys/mutex.h... no
checking sys/nlist.h usability... no
checking sys/nlist.h presence... no
checking for sys/nlist.h... no
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/pstat.h usability... no
checking sys/pstat.h presence... no
checking for sys/pstat.h... no
checking sys/queue.h usability... yes
checking sys/queue.h presence... yes
checking for sys/queue.h... yes
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking sys/statfs.h usability... yes
checking sys/statfs.h presence... yes
checking for sys/statfs.h... yes
checking sys/statvfs.h usability... yes
checking sys/statvfs.h presence... yes
checking for sys/statvfs.h... yes
checking sys/sysinfo.h usability... yes
checking sys/sysinfo.h presence... yes
checking for sys/sysinfo.h... yes
checking sys/systemcfg.h usability... no
checking sys/systemcfg.h presence... no
checking for sys/systemcfg.h... no
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/tree.h usability... no
checking sys/tree.h presence... no
checking for sys/tree.h... no
checking for sys/types.h... (cached) yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking sys/vmmeter.h usability... no
checking sys/vmmeter.h presence... no
checking for sys/vmmeter.h... no
checking sys/vfs.h usability... yes
checking sys/vfs.h presence... yes
checking for sys/vfs.h... yes
checking syslog.h usability... yes
checking syslog.h presence... yes
checking for syslog.h... yes
checking for unistd.h... (cached) yes
checking uvm/uvm.h usability... no
checking uvm/uvm.h presence... no
checking for uvm/uvm.h... no
checking uvm/uvm_extern.h usability... no
checking uvm/uvm_extern.h presence... no
checking for uvm/uvm_extern.h... no
checking vm/vm.h usability... no
checking vm/vm.h presence... no
checking for vm/vm.h... no
checking for libperfstat.h... no
checking for netinet/ip.h... yes
checking for net/if.h... yes
checking for netinet/ip_icmp.h... yes
checking for sys/sysctl.h... yes
checking for sys/mount.h... yes
checking for sys/proc.h... no
checking for sys/swap.h... yes
checking for sys/ucred.h... no
checking for sys/user.h... yes
checking for machine/vmparam.h... no
checking for vm/pmap.h... no
checking for machine/pmap.h... no
checking for vm/vm_map.h... no
checking for vm/vm_object.h... no
checking for sys/resourcevar.h... no
checking for uvm/uvm_map.h... no
checking for uvm/uvm_pmap.h... no
checking for uvm/uvm_object.h... no
checking for mode_t... yes
checking for pid_t... yes
checking for size_t... yes
checking for pid_t... (cached) yes
checking return type of signal handlers... void
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_gmtoff... no
checking for error_at_line... yes
checking vfork.h usability... no
checking vfork.h presence... no
checking for vfork.h... no
checking for fork... yes
checking for vfork... yes
checking for working fork... yes
checking for working vfork... (cached) yes
checking whether lstat correctly handles trailing slash... yes
checking whether stat accepts an empty string... no
checking for strftime... yes
checking for statfs... yes
checking for statvfs... yes
checking for setlocale... yes
checking for getaddrinfo... yes
checking for syslog... yes
checking for vsyslog... yes
checking for backtrace... yes
checking for getloadavg... yes
checking for SOL_IP... yes
checking for va_copy... yes
checking for an ANSI C-conforming const... yes
checking whether byte ordering is bigendian... no
checking pid file location... /var/run
checking for large files support... enabled
checking for special C compiler options needed for large files... no
checking for _FILE_OFFSET_BITS value needed for large files... no
checking for PAM support... enabled
checking for pam_start in -lpam... no
configure: error: PAM enabled but headers or library not found, install the PAM development support or run configure --without-pam
[ec2-user@... monit-5.5]$ make && make install
make: *** No targets specified and no makefile found.  Stop. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-02T18:23:34.027

非常感谢，你是对的，问题是我没有安装 pam 和 ssl 头文件所以我做了什么解决了问题：

```
sudo -s
sudo yum install pam-devel
sudo yum install openssl-devel
sudo yum update (probably not necessary but to be on the sife side) 
```

然后，我的 monitrc 文件有问题，所以我将它复制到 ~ 和

```
chmod 0700 ~/.monitrc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-31T06:28:13.957

我最终遇到了这个问题，试图在 Debian 上找出同样的问题。所以这是我需要做的才能让它在 Debian 上运行。

```
#Install dependencies and required tools
sudo apt-get install libssl-dev libpam0g-dev gcc make 

# CHECK LATEST MONIT VERSION http://mmonit.com/monit/dist/
wget http://mmonit.com/monit/dist/monit-5.12.2.tar.gz
tar xzvf monit-5.12.2.tar.gz
cd monit-5.12.2/
sudo ./configure --prefix=/usr/sbin --bindir=/usr/sbin --sysconfdir=/etc/monit/
sudo make
sudo make install 
```

我需要安装 libssl-dev 和 libpam0g-dev 以使其工作。我还添加了一些配置选项以使其与通常的位置相匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T10:56:05.747

确保您已安装构建 Monit 所需的所有依赖项。经过一些研究，我无法找到它们是什么，但它们可能在文档中。当然，在你弄清楚之后，重新提取 tar 存档以刷新目录的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-14T23:54:39.577

您应该为 pam 和 readline 安装正确的库：PAM 插件需要 PAM 库。

在 Centos 和 RHEL -build 虚拟机上，安装 pam-devel 软件包：

```
sudo yum install pam-devel 
```

在所有 Debian/Ubuntu -build 虚拟机上，安装 libpam0g-dev：

```
sudo apt-get install libpam0g-dev 
```

在 debian6/maverick/natty 上，安装 libreadline5-dev（替换已经存在的任何 libreadline6-dev）：

```
sudo apt-get install libreadline5-dev 
```

在 oneiric（以及任何更新版本，例如 Debian 7 或 Ubuntu 12.04）上，该软件包称为 libreadline-gplv2-dev：

```
sudo apt-get install libreadline-gplv2-dev 
```

# junit - 如何编写 JUnit 测试用例来检查值的范围？

> ID：13175333
> 
> 赞同：1
> 
> 时间：2012-11-01T10:40:38.890
> 
> 标签：junit

我想检查给定的输入是否在 1 到 100（整数）的范围内。

如何 为此任务编写**JUnit 测试用例？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:47:49.300

```
 Assert.assertTrue(value >= 1 && value <= 100); 
```

# javascript - 如何从jsp获取西里尔文字？

> ID：13175339
> 
> 赞同：0
> 
> 时间：2012-11-01T10:41:04.623
> 
> 标签：javascript, jsp, extjs

我将内容从 jsp 渲染到我的 Ext.Window：

```
 var x = new Ext.Window({
id: 'myWindow', 
title:'Аттрибуты',
layout: 'fit',
autoScroll:false,
width:600,
autoLoad : {  
    url : url_servlet+'form.jsp',  
    scripts: true  
}
})
x.show(); 
```

得到这个：

![在此处输入图像描述](../Images/28750d1c447e73241454b89575f96656.png)

当我在 jsp 中设置 UTF8 时：

```
 <%@ page language="java" contentType="text/xml; charset=UTF-8" pageEncoding="UTF-8"%> 
```

我明白了：

![在此处输入图像描述](../Images/572ce7989c80eb7bba463b70699710b2.png)

当我设置`cp1251`我得到这个：

![在此处输入图像描述](../Images/47f94301cf52543f100d9bc6379370ec.png)

如何以正确的编码获取文本？

# jquery - 如何在网格中同时进行客户端过滤和服务器端搜索？

> ID：13175341
> 
> 赞同：1
> 
> 时间：2012-11-01T10:41:13.180
> 
> 标签：jquery, jqgrid

在这里，我遇到了一种情况，即我必须对当前加载到网格中的数据进行工具栏过滤（客户端过滤），同时，我应该能够在服务器上进行多次搜索边。这可能吗？有什么解决办法吗？这是我的网格定义。

```
grid_on_facilities.jqGrid({
    url: 'OffOnFacilitiesDataJson',
    datatype: "json",
    colNames: ["id", "Orig Loc-CLLIA", "Term Loc-CLLIZ", "Fac,Equip or Cbl Name",
        "Fac or Cbl Type\/Relay Rack", "Unit/Pair", "SUBD or Cbl BP", "Frame/MDF"],
    colModel: [
        {name: 'id', index: 'id', width: 1, hidden: true, hidedlg: true, key: true,
            searchoptions: {sopt: ['eq', 'ne']}},
        {name: 'orig_loc_cllia', index: 'orig_loc_cllia', width: 350,
            hidedlg: true, editable: true, fixed: true},
        {name: 'term_loc_clliz', index: 'term_loc_clliz', align: "right",
            editable: true, width: 180, fixed: true},
        {name: 'fac_equip_or_cbl_name', index: 'fac_equip_or_cbl_name',
            align: "right", editable: true, width: 100, fixed: true}
    ],
    sortable: true,
    rowNum: 10,
    rowList: [2, 5, 10, 20],
    pager: '#pager_on_facilities',
    gridview: true,
    sortname: 'orig_loc_cllia',
    viewrecords: true,
    sortorder: 'desc',
    caption: 'OffOn facilities',
    autowidth: true,
    editurl: 'OffOnFacilitiesDataJson',
    jsonReader: {
        repeatitems: false,
        root: function (obj) { return obj; },
        page: function (obj) { return 1; },
        total: function (obj) { return 1; },
        records: function (obj) { return obj.length; }
    }
}).jqGrid('navGrid', '#pager',
    {edit: true, add: true, del: true, refresh: true, view: false},
    editSettings, addSettings, delSettings,
    {multipleSearch: true, jqModal: false, //overlay: false,
        onClose: function (/*$form*/) {
            // if we close the search dialog during the datapicker are opened
            // the datepicker will stay opened. To fix this we have to hide
            // the div used by datepicker
            $("div#ui-datepicker-div.ui-datepicker").hide();
        }}, {closeOnEscape: true});
grid_on_facilities.jqGrid('filterToolbar'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:34:40.397

我对此有点困惑：是否需要在单个输入上同时过滤服务器端和客户端的数据？老实说，一个好的解决方案意味着该设计有助于针对一个请求执行一系列操作。客户端和服务器端过滤/搜索对我来说似乎有点迷失方向。

您可以提供客户端过滤，并在“onmouseover”加载更多结果的地方提供类似按钮的谷歌图像搜索。

但为了简单起见，我什至可能会寻找放置一个按钮/链接，要求用户在需要更多结果时点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T12:18:44.887

**要做到这一点，首先我们要在[客户端排序和服务端分页实现Oleg给出的解决方案](https://stackoverflow.com/questions/9030302/jqgrid-client-side-sorting-with-server-side-paging-data-disappears)**

检查它是否成功运行后，继续执行以下代码，

启用 filterToolbar

`grid.jqGrid('filterToolbar',{searchOnEnter:false,beforeClear:function(){return true;}});`

并在导航栏中启用多重搜索，事件定义如下

`onSearch:function(){$(this).setGridParam({datatype: 'json'}); return true; } onReset:function(){$(this).setGridParam({datatype: 'json'}); return true; }`

`onPaging`用下面的代码 替换事件

```
onPaging:function(){

/*this code  is to fix the issue when we click on next page with some data in filter tool bar
 * along with this in grid definition( in filterToolbar ) we have to return true in "beforeClear "event 
 * */
var data = $(this).jqGrid("getGridParam", "postData");
data._search = false;
data.filters=null;
data.page=$(this).jqGrid("getGridParam","page");
$(this)[0].clearToolbar();
//Here making _search alone false will not solve problem, we have to make search also false. like in below.
$(this).jqGrid('setGridParam', { search: false, postData:data });
var data = $(this).jqGrid("getGridParam", "postData");

/*this is to fix the issue when we go to last page(say there are only 3 records and page size is 5) and click 
 * on sorting the grid fetches previously loaded data (may be from its buffer) and displays 5 records  
 * where in i am expecting only 3 records to be sorted out.along with this in source code comment the line $t.p.records = 0;$t.p.page=1;$t.p.lastpage=0;
 */ 

$(this).jqGrid("clearGridData");

/* this is to make the grid to fetch data from server on page click*/

$(this).setGridParam({datatype: 'json'}).triggerHandler("reloadGrid"); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:35:20.223

我不确定你为什么需要这样的行为，因为如果你在服务器服务器端实现了高级搜索，那么你可以使用`stringResult: true`选项来使网格过滤 ( `filterToolbar`) 产生对服务器的兼容请求。在这种情况下，服务器将“不知道”它是否为高级搜索对话框或搜索过滤器生成过滤数据。

所以我的建议是换行

```
grid_on_facilities.jqGrid('filterToolbar'); 
```

到

```
grid_on_facilities.jqGrid('filterToolbar', {stringResult: true, defaultSearch: 'cn'}); 
```

我包含的最后一个选项`defaultSearch: 'cn'`并不是真正需要的。我个人使用该设置使默认搜索操作像“包含”而不是默认的“开始于”操作一样工作。

# postgresql - 在 CREATE 中，带有参数的 init 确实填充了所有属性

> ID：13175342
> 
> 赞同：0
> 
> 时间：2012-11-01T10:41:16.500
> 
> 标签：postgresql, ruby-on-rails-3.1

我在 MacOSX 上使用 RoR 3.1 + Postgres

在我的创建函数中，我有这个：

```
def create
    @power_plant_substrate = PowerPlantSubstrate.new(params[:power_plant_substrate]) <= 1

    @trade = params[:power_plant_substrate][:trade] 

    respond_to do |format|
      if @power_plant_substrate.save

    ...
end 
```

(1) 应该用 params[:power_plant_substrate] 实例化一个新对象

问题：

在创建我的新对象@power_plant_substrate 之后，一些属性可用。

如果我检查 params[:power_plant_substrate] 值（跟踪到控制台），我可以验证所有字段是否已正确传递：

```
{"power_plant_id"=>"161", "substrate_id"=>"213", "quantity"=>"1", "periodicity"=>"yearly", "trade"=>"wanted", "price_per_unit"=>"0.00", "total_price"=>"0.00", "currency"=>"USD", "address"=>", Reserved", "transport"=>"pickup_only", "description"=>"afewrqe", "latitude"=>"", "longitude"=>""} 
```

但是我在保存后立即检查了我的对象（@power_plant_substrate.save）。不再分配“贸易”属性。

我尝试在我称为 after_create 的方法中访问模型中的相同属性，但同样的问题。

但是，该记录在数据库中正确分配的所有字段都可用。

为什么@power_plant_substrate 对象在保存后没有出现“完全”分配？

希望你能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:48:27.723

我的猜测是 PowerPlantSubstrate 模型中有一个 attr_accessible 列表。检查该列表中是否添加了货币和贸易。如果没有，那么添加这些。

```
attr_accessible :currency, :trade, . . . 
```

将一些属性单独设置为 attr_accessible 将无法批量分配其他变量。这就是为什么个人任务有效的原因

如果没有列表，请尝试添加

```
attr_accessible nil 
```

看看这是否有效

# visual-studio-2010 - 在 VS 2010 中使用 TFS 进行分支会丢失 NuGet 包引用

> ID：13175343
> 
> 赞同：2
> 
> 时间：2012-11-01T10:41:17.313
> 
> 标签：visual-studio-2010, nuget, branching-and-merging

我将 Visual Studio 2010 与 Team Foundation Server 2010 一起使用。我为使用 AutoMapper 和 EntityFramework 的项目创建了一个根目录，我使用 NuGet 包管理器为解决方案安装了该根目录。

当我从根分支时，生成的分支在 AutoMapper 和 EntityFramework 的参考部分中有一个黄色警告三角形。我已经尝试卸载软件包然后重新安装，但没有任何东西可以让我包含这些引用并构建解决方案。我得到的唯一消息是包区域存在。

收到所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:46:36.077

我已经解决了这个问题。根解决方案是从另一个来源的现有项目创建的，并且项目文件夹中的 packages.config 文件中有一些 NuGet 包引用。步骤是：

*   从解决方案的根目录中删除 packages 文件夹（如果已被复制）
*   从解决方案文件 (.sln) 中删除对包的所有 NuGet 引用
*   从 packages.config 文件中删除所有 NuGet 引用
*   使用管理 NuGet 包的解决方案来卸载任何包
*   从解决方案级别重新安装

然后一切都很好。

# r - 从 R 中的单独 DAY OF YEAR、Year 和 Time 列创建单个时间戳

> ID：13175345
> 
> 赞同：2
> 
> 时间：2012-11-01T10:41:19.607
> 
> 标签：r, timestamp, gregorian-calendar

我有几个气象变量的时间序列数据集。时间数据记录在三个单独的列中：

1.  年份（例如 2012 年）
2.  一年中的某一天（例如 261 表示闰年的 9 月 17 日）
3.  小时：分钟（例如 1610）

有没有办法可以合并三列以在 R 中创建单个时间戳？我不太熟悉 R 如何处理 Day of Year 变量。

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:46:52.383

您应该使用`ISOdatetime`. 此函数将 、 、 和 的向量`year`作为`day`输入`hour`，`minute`并输出一个`POSIXct`表示时间的对象。您只需将第三列拆分为两个单独的`hour` `minute`列，即可使用该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T12:13:42.650

看起来这个`timeDate`包可以处理公历时间框架。我没有亲自使用过它，但它看起来很简单。某些方法中有一个`shift`参数允许您设置数据的偏移量。

[http://cran.r-project.org/web/packages/timeDate/timeDate.pdf](http://cran.r-project.org/web/packages/timeDate/timeDate.pdf)

因为您提到了它，所以我想我会展示将单独的列合并在一起的实际代码。当您在单独的列中拥有所需的值时，您可以使用`paste`它们将它们组合在一起并`lubridate::mdy`解析它们。

```
library(lubridate)

col.month <- "Jan"
col.year <- "2012"
col.day <- "23"

date <- mdy(paste(col.month, col.day, col.year, sep = "-")) 
```

Lubridate 是一个很棒的包，这里是官方页面：[https ://github.com/hadley/lubridate](https://github.com/hadley/lubridate)

这是一组很好的例子：[http ://www.r-statistics.com/2012/03/do-more-with-dates-and-times-in-r-with-lubridate-1-1-0 /](http://www.r-statistics.com/2012/03/do-more-with-dates-and-times-in-r-with-lubridate-1-1-0/)

# php - 如何从 WordPress 数据库中提取到 MS Excel？

> ID：13175348
> 
> 赞同：0
> 
> 时间：2012-11-01T10:41:30.807
> 
> 标签：php, database, wordpress, export-to-excel

我正在尝试将数据添加到从 wordpress 数据库中提取的 excel 文件中，实际上我正在尝试将数据库中的数据（标签）导出到 excel 文件中。我写下一个代码，但是当我点击生成按钮时。这会生成空文件。

请大家检查我做错了什么。

**代码如下：**

```
if (check_admin_referer('tag-export')) 
{
    $blogname = str_replace(" ", "", get_option('blogname'));
    $date = date("m-d-Y");
    $xls_file_name = $blogname."-exported-tags-".$date;

    $tags = get_terms( 'post_tag' , 'hide_empty=0' );
    $count = count($tags);

    if ( $count > 0 )
    {
        echo 'name' . "\t" . 'slug' . "\n";

        foreach ( $tags as $tag ) 
        {
            echo $tag->name . "\t" . $tag->slug . "\n";
        }
    }

    ob_clean();
    echo $xls_file;

    header( "Content-Type: application/vnd.ms-excel" );
    header( "Content-disposition: attachment; filename=$xls_file_name.xls" );
    exit();
} 
```

以上代码没有将数据写入excel文件。请检查并让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:45:05.603

一个更一般的建议，而不是解决您的编码问题：从代码创建一个 HTML 表格文件，然后在 Excel 中打开它进行转换。这样做可以让您更好地了解您的代码发生了什么：您可以添加 var_dumps 或像普通网页一样简单地调试它。

拥有一个 html 表也很有用，因为 excel 在将其转换为 XLS 文件时效果很好。

在您的 HTML 文件运行良好后，您可以对代码应用必要的格式/标题，以便从头开始创建 xls 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:03:10.203

仅基于您现有的代码：

```
if (check_admin_referer('tag-export')) 
{
    $blogname = str_replace(" ", "", get_option('blogname'));
    $date = date("m-d-Y");
    $xls_file_name = $blogname."-exported-tags-".$date;

    $tags = get_terms( 'post_tag' , 'hide_empty=0' );
    $count = count($tags);

    $xls_file = '';
    if ( $count > 0 )
    {
        $xls_file .= 'name' . "\t" . 'slug' . "\n";

        foreach ( $tags as $tag ) 
        {
            $xls_file .= $tag->name . "\t" . $tag->slug . "\n";
        }
    }

    ob_clean();
    header( "Content-Type: application/vnd.ms-excel" );
    header( "Content-disposition: attachment; filename=$xls_file_name.xls" );

    echo $xls_file;

    exit();
} 
```

# apache - 如何密码保护外部观众的虚拟主机？

> ID：13175353
> 
> 赞同：1
> 
> 时间：2012-11-01T10:42:28.080
> 
> 标签：apache, apache2

我已经为这个问题苦苦挣扎了一段时间了。让我分解一下：

我们有一个托管我们公司大部分网站的 apache2 服务器。每个网站都是一个单独的虚拟主机。我们的内部 UI 设计师使用其中一个虚拟主机向内部用户和第 3 方客户展示他的最新草稿和项目。目前，此 VHost 使用以下指令受到 Vhost 配置文件的密码保护：

```
<Directory /var/www/>
   Options Indexes FollowSymLinks MultiViews
   AllowOverride all
   Order allow,deny
   Allow from all
   AuthUserFile /home/secure/passwords
   AuthName "Username and password required"
   AuthType Basic
   Require valid-user
</Directory> 
```

我需要的是让我们的内部用户可以使用这个网站（所以没有密码提示），这意味着一个特定的 IP 范围。我尝试使用`Allow from 192.168.xxx.xxx`上述指令集中的选项。然而，这并没有让内部 IP 通过（仍然要求输入密码）。所以我尝试使用我们公司的外部 IP 地址（您可以在任何“我的 IP 网站”上找到）。也没有运气。

因此，对于我的最后一次尝试，我创建了第二个虚拟主机，它显然使用了不同的服务器名称。另外，为了不在配置文件中出现任何冲突，我创建了一个指向 /var/www 的符号链接并将其命名为 www2。因此，第二个 vhost 文件中的 Directory 指令如下所示：

```
<Directory /var/www2/>
   Options Indexes FollowSymLinks MultiViews
   AllowOverride none
   Order allow,deny
   Allow from all
</Directory> 
```

但是，配置文件显然是冲突的，因为在当前配置下，我在两台主机上都获得了密码保护。如果我在第一个 Vhost 中禁用它，我会在两者上都丢失它。

任何目录中都没有 .htaccess 文件，因此没有任何内容可以覆盖配置。apache2.conf 文件没有定义与 Auth 相关的任何内容。

我不确定您是否需要更多详细信息，但请随时问我任何问题。

感谢您的帮助！

----edit---- 我只是想说明我不能说100% 我的方法是正确的。也许设置 2 个 VHosts 并不能解决我的问题。如果有人想到更好的方法，我愿意接受建议。底线是，我需要一个网站可供内部用户使用，并为其他任何人提供密码保护。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:58:11.853

您是否尝试过使用Apache 的**满足指令来解决这个问题？**例如：

```
 <Directory /var/www/>
   Options Indexes FollowSymLinks MultiViews
   AllowOverride all
   Order allow,deny
   Allow from all
   AuthUserFile /home/secure/passwords
   AuthName "Username and password required"
   AuthType Basic
   Require valid-user

   Allow from 192.168.1
   Satisfy Any 
  </Directory> 
```

更多信息可以在[这里找到](https://httpd.apache.org/docs/2.0/mod/core.html#satisfy)

# .net - 是否有适用于 MVC4 的 AD SimpleMemberShip 提供程序？

> ID：13175355
> 
> 赞同：0
> 
> 时间：2012-11-01T10:42:42.703
> 
> 标签：.net, asp.net-mvc-4

是否有适用于 MVC4 的 AD SimpleMemberShip 提供程序？还是我可以从某个地方下载的优秀第三方？所有的文档似乎都集中在 SQL 服务器上。

还是我必须自己写？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:44:16.467

对于 Active Directory，没有等效的 SimpleMembershipProvider。你必须自己写。如果您使用完整的会员资格，则可以使用`ActiveDirectoryMembershipProvider`专门为与 AD 一起使用而设计的会员资格。

# string - .BAT - 将字符串变量中的数字转换为以 10 为底的整数变量

> ID：13175357
> 
> 赞同：2
> 
> 时间：2012-11-01T10:42:48.507
> 
> 标签：string, variables, batch-file, integer

```
@echo off
rem ffmpeg -i test.ts 2>&1 | find "Duration" > duration.txt
rem set /p duration=<duration.txt

set duration=  Duration: 01:09:52.59, start: 0.136811, bitrate: 10740 kb/s

set /a Hours=%duration:~12,2%
set /a Mins=%duration:~15,2%
set /a Secs=%duration:~18,2%

set /a Duration_In_Seconds=(hours*3600)+(mins*60)+secs

echo %duration_In_seconds% 
```

当我尝试将“09”设置为一个名为 mins 的整数变量时，它失败了。

无效号码。数字常量可以是十进制 (17)、十六进制 (0x11) 或八进制 (021)。

我需要将字符串转换为整数，这样我就可以使用一些基本的数学来计算以秒为单位的持续时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:19:30.300

阅读 SET 帮助（`HELP SET`从命令提示符键入），您会看到 SET 总是将零前缀数字解释为八进制。没有设置会强制以 10 为基数。相反，您必须操纵字符串，使其不以零开头。

无需写入临时文件。您可以使用 FOR /F 来解析输出，它还可以将输出分解为小时、分钟和秒标记。

我知道有两种简单的方法可以绕过前导 0。

一种方法是在值前面加上 1，然后使用 mod（余数）运算符提取所需的数字。在您的情况下，小时数将被限制为最大值 99。如果您需要支持最多 999，那么您可以前缀 10 并采用 1000 的 mod。请注意，可以使用单个 SET / 执行多个分配使用`,`分隔每个赋值的语句。SET /A 遵循正确的优先顺序，因此不需要括号。

```
@echo off
for /f "tokens=2-4 delims=:. " %%A in ('ffmpeg -i test.ts 2^>^&1 ^| find "Duration"') do (
  set /a Hours=1%%A%%100, Mins=1%%B%%100, Secs=1%%C%%100, Duration_In_Seconds=Hours*3600+Mins*60+Secs
) 
```

另一种方法是使用 FOR /F 循环去除前导零。我附加一个 1，然后除以 10，这样仍然会处理一个只有零的字符串。

```
@echo off
for /f "tokens=2-4 delims=:. " %%A in ('ffmpeg -i test.ts 2^>^&1 ^| find "Duration"') do (
  for /f "delims=0" %%N in ("%%A1") do set /a Hours=%%N/10
  for /f "delims=0" %%N in ("%%B1") do set /a Mins=%%N/10
  for /f "delims=0" %%N in ("%%C1") do set /a Secs=%%N/10
  set /a Duration_In_Seconds=Hours*3600+Mins*60+Secs
) 
```

如果您愿意，如果小数秒大于或等于 0.5，则可以轻松扩展代码以将秒数向上舍入。只需添加`,`作为分隔符来解析额外的标记，然后使用一些数学技巧来进行舍入。

```
@echo off
for /f "tokens=2-5 delims=:., " %%A in ('ffmpeg -i test.ts 2^>^&1 ^| find "Duration"') do (
  for /f "delims=0" %%N in ("%%A1") do set /a Hours=%%N/10
  for /f "delims=0" %%N in ("%%B1") do set /a Mins=%%N/10
  for /f "delims=0" %%N in ("%%C%%D1") do set /a Secs=(%%N+500)/1000
  set /a Duration_In_Seconds=Hours*3600+Mins*60+Secs
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-20T09:42:54.420

使用十六进制到十进制转换，以下代码适用于 [0..39999] 范围内的数字：

```
set str=000039999
set /a dgt=0x!str!
set /a "dgt=(10000*(dgt&983040)>>16)+(1000*(dgt&61440)>>12)+(100*(dgt&3840)>>8)+(10*(dgt&240)>>4)+(dgt&15)"
echo str="!str!"
echo dgt="!dgt!" 
```

# matlab - 如何在Matlab中迭代一个不断变化的向量，而不是连续的数字？

> ID：13175361
> 
> 赞同：1
> 
> 时间：2012-11-01T10:42:54.527
> 
> 标签：matlab, vector, literate-programming

我真的是matlab的初学者。现在我想要一个循环，以便它遍历一个向量（不是连续的数字），该向量通过迭代包含减少的元素数量。

例如，我有`[1; 2 ;3; 4]`（将其视为人 1、2、3、4）然后我想做一些事情，例如人 1 和 4 得到食物，人 2 和 3 没有食物。

在下一轮中，我希望人 2 和 3（那些未分配的人）再次完成分配过程，而不是 1 和 4。所以我创建了一个向量 [2;3] 来跟踪那些没有食物的人。

但是，`for i=1:length(vector)`给了我一系列连续的数字，我想要的是

`for i in vector do something; end`

如何实施？

当我刚刚放

```
i=vector, 
```

Matlab 说索引超过矩阵维度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T15:54:41.060

如果要遍历任意向量，只需在 for 循环中直接使用该向量即可。例如：

```
vector = [3, 4, 7, 1, 1]

for i = vector
    disp(i)
end 
```

将输出`3 4 7 1 1`. 这相当于“for i in vector do something”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:38:41.013

`for i=1:length(vector)`为您提供向量的索引 - 它始终是连续的，因为它代表`first..last`向量的位置。

听起来您想*从*向量中获取标识符。您可以在现有循环中执行此操作：`id=vector[i]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:15:31.953

您是否考虑过使用 Matlab 结构？

```
s = struct(field1,value1,...,fieldN,valueN) 
```

您可以拥有一个结构数组“人”（类型为人），您可以循环访问...

```
for i=1:length(people)
    if people(i).HasBeenFeed = False
        % feed this person...
    end
end 
```

# java - 在文件夹中创建文件

> ID：13175363
> 
> 赞同：0
> 
> 时间：2012-11-01T10:42:57.690
> 
> 标签：java, io

在 Java 中，我有一个`File`代表文件夹的对象：

```
String folderName = "/home/vektor/folder";
File folder = new File(folderName); 
```

现在我想`File`在这个文件夹中创建另一个代表一个文件。我想避免像这样进行字符串连接：

```
String fileName = "test.txt";
File file = new File(folderName + "/" + fileName); 
```

因为如果我更深入地创建这个结构，我会想出这样的东西：

```
File deepFile = new File(folderName + "/" + anotherFolderName + ... + "/" + fileName); 
```

相反，我想做类似的事情

```
File betterFile = folder.createUnder(fileName); 
```

甚至：

```
File otherFile = SomeFileUtils.createFileInFolder(folder, fileName); 
```

你知道这样的解决方案吗？

> 注意：使用“/”是完全可以的，因为 Java 会将它转换为 Windows 的“\”，但它并不干净——我应该使用类似`"file.separator"`from 的东西`System.getProperties()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:45:03.117

我会用

```
String folderName = 
String fileName = 

File under = new File(folderName, fileName); 
```

或者

```
File folderFile = 
String fileName = 

File under = new File(folderFile, fileName); 
```

就那么简单 ;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:52:44.897

查看[File 的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)，您将看到构造函数将`File`对象作为父对象。

使用以下表格：

```
File deepFile = new File(folder, fileName); 
```

# javascript - 如何在打印时覆盖 IE 页面设置

> ID：13175365
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:43:02.047
> 
> 标签：javascript, html, css

在打印 JSP 网页时，它会按照 IE 中指定的页面设置进行打印。

我想覆盖 IE（6 或 7）页面设置（尤其是边距设置）。

我尝试了几种 CSS 格式，但都没有成功。请让我知道如何在打印时覆盖 IE 页面设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:54:27.383

我没有对您的问题发表评论的声誉，但是如果您注意到您尝试过的内容，那将很方便。

例如，您是否尝试过以下操作？

```
<link rel="stylesheet" href="print.css" media="print" type="text/css"> 
```

或者，如果您要在内部进行：

```
@media print {
    #menu, #logo, #sidebar {display: none; }
} 
```

**编辑**

[关于 IE 表达式的这个网站](http://www.456bereastreet.com/archive/200611/ie_expressions_ignore_css_media_types/)提供了更多关于它的信息。

它使用以下条件格式：

```
<style type="text/css" media="screen,projection">
@import 'main.css';
</style>
<!--[if IE]>
<link rel="stylesheet" href="ie.css" type="text/css" media="screen">
<link rel="stylesheet" href="ie-print.css" type="text/css" media="print">
<![endif]-->
<link rel="stylesheet" href="print.css" media="print" type="text/css"> 
```

所以它有 2 个用于常见浏览器的 css，然后是 2 个 IE 细节，包括一个用于 Internet Explorer 的特殊打印 css。

你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:51:45.180

IE 6 和 7 中对打印样式表的支持非常有问题。您最好打开一个包含您想要打印的内容的新页面，然后通过 javascript 调用打印对话框。

# java - 在 PreferenceScreen 中投放广告

> ID：13175368
> 
> 赞同：0
> 
> 时间：2012-11-01T10:43:35.410
> 
> 标签：java, android, xml, admob, preferencescreen

我试图将 admob 广告放在我的偏好屏幕中。我环顾四周，发现了一些关于此的线索。虽然我不能让我工作。例如这个：

[PreferenceActivity 中的 Android Admob 广告](https://stackoverflow.com/questions/5019834/android-admob-advert-in-preferenceactivity?lq=1)

您有一个应该是启动器活动的活动？该活动不应该以任何方式与 ad_layout.xml 文件相关联吗？

在我自己的应用程序中，我有一个扩展 PreferenceActivity 的类，这样我就可以用这一行启动我的preferencescreen：

```
addPreferencesFromResource(R.xml.prefs); 
```

在上面链接的“PreferenceActivity 中的 Admob”示例中，我应该在哪里执行此操作？

很抱歉，如果它有点不清楚，在这种情况下，请询问！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:05:38.010

啊，我弄清楚了它们是如何连接的。使用此示例来理解：[如何使用 EditTextPreference 和 Togglebutton 创建一个首选项？](https://stackoverflow.com/questions/9738658/how-do-i-create-one-preference-with-an-edittextpreference-and-a-togglebutton)

# java - eclipse中的servlet执行错误

> ID：13175370
> 
> 赞同：-2
> 
> 时间：2012-11-01T10:43:39.530
> 
> 标签：java

HTTP 状态 404 - /项目/

* * *

类型状态报告

留言/项目/

描述 请求的资源 (/Project/) 不可用。

* * *

Apache Tomcat/7.0.16

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
<display-name>Project</display-name>
<welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**这是 eclipse 中自动生成的 web.xml**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:03:35.813

您尚未在 web.xml 中定义 servlet 及其映射，以便服务器可以在您的 servlet 收到任何请求时调用其`doGet`或方法。`doPost`在你的 web.xml 中添加这个注释描述了每个标签的用法。您可以`<!-- ..... -->`从每个标签中删除部分

```
<servlet>
<servlet-name>myservlet</servlet-name>  <!-- You can give any name -->
<servlet-class>com.abu.MyFirstServlet</servlet-class> Your servlet class's fully qualified name
</servlet>

<servlet-mapping>
<servlet-name>myservlet</servlet-name> the name that you mentioned in the above tag
<url-pattern>/index.html</url-pattern> the url for which the request must be sent to the servlet.
</servlet-mapping> 
```

这意味着无论何时您键入`http://localhost:8080/YourPorject/index.html`，conatiner 都会调用您的 servlet`doGet`或`doPost`方法。您应该查看此[wiki 页面以获取有关 servlet 的基本知识](https://stackoverflow.com/tags/servlets/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:04:06.330

您需要从上面的列表中将一个文件放在根目录中。

# android - Android如何调用SmsReceiver类中MainActivity的方法

> ID：13175372
> 
> 赞同：0
> 
> 时间：2012-11-01T10:43:48.200
> 
> 标签：android

我对 Android 编程很陌生，如果有人能在这方面帮助我，那就太好了。我的项目包含两个 JAVA 文件。

> MainActivity.java 扩展了 Activity
> SMSReceiver.java 扩展了 Broadcastreceiver

SMSreceiver.java 具有显示任何传入`SMS`toast 的代码。你能告诉我在`MainActivity`收到特定短信时如何调用函数吗？例如：当我收到称为 starttemp 的短信时，它应该调用一个函数 starttemp。

我搜索了很多，发现意图是一种方法，我们不能直接调用这些方法。请问有人可以帮我吗？如果有人可以将工作代码发送给我，那就太好了。

**这将是我的 MainActivity.Java**

```
package com.wissen.sms;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.EditText;  
import android.widget.Button;
import android.widget.ToggleButton;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Set;
import java.util.UUID;

@SuppressLint({ "NewApi", "NewApi", "NewApi", "NewApi", "NewApi", "NewApi", "NewApi", "NewApi", "NewApi", "NewApi" }) public class MainActivity extends Activity 
{
    TextView myLabel;
    EditText myTextbox;
    ToggleButton switch1;

    BluetoothAdapter mBluetoothAdapter;
    BluetoothSocket mmSocket;
    BluetoothDevice mmDevice;
    OutputStream mmOutputStream;
    InputStream mmInputStream;
    Thread workerThread;
    byte[] readBuffer;
    int readBufferPosition;
    int counter;
    String status;
    volatile boolean stopWorker;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button openButton = (Button)findViewById(R.id.open);
        Button sendButton = (Button)findViewById(R.id.send);
        Button closeButton = (Button)findViewById(R.id.close);
        myLabel = (TextView)findViewById(R.id.label);
        myTextbox = (EditText)findViewById(R.id.entry);

      //switch1
        switch1 = (ToggleButton) findViewById(R.id.switch1);
        switch1.setOnClickListener(new OnClickListener()
            {
            public void onClick(View v)
            {
                if(switch1.isChecked()){
                    try 
                {
                    String msg = "01ON";
                    msg += "\n\r";
                    mmOutputStream.write(msg.getBytes());
                    myLabel.setText("Data Sent");
                }
                catch (IOException ex) { }

                }else{
                    try 
                {
                    String msg = "01OF";
                    msg += "\n\r";
                    mmOutputStream.write(msg.getBytes());
                    myLabel.setText("Data Sent");

                }
                catch (IOException ex) { }
                }
             }

             });

        //Open Button
        openButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    findBT();
                    openBT();
                }
                catch (IOException ex) { }
            }
        });

        //Send Button
        sendButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    sendData();
                }
                catch (IOException ex) { }
            }
        });

        //Close button
        closeButton.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                try 
                {
                    closeBT();
                }
                catch (IOException ex) { }
            }
        });

    }

    void findBT()
    {
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if(mBluetoothAdapter == null)
        {
            myLabel.setText("No bluetooth adapter available");
        }

        if(!mBluetoothAdapter.isEnabled())
        {
            Intent enableBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
            startActivityForResult(enableBluetooth, 0);
        }

        Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
        if(pairedDevices.size() > 0)
        {
            for(BluetoothDevice device : pairedDevices)
            {
                if(device.getName().equals("HomeAutomation")) 
                {
                    mmDevice = device;
                    break;
                }
            }
        }
        myLabel.setText("Bluetooth Device Found");
    }

    void openBT() throws IOException
    {
        UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb"); //Standard SerialPortService ID
        mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);        
        mmSocket.connect();
        mmOutputStream = mmSocket.getOutputStream();
        mmInputStream = mmSocket.getInputStream();

        beginListenForData();

        myLabel.setText("Bluetooth Opened");
    }

    void beginListenForData()
    {   
        final Handler handler = new Handler(); 
        final byte delimiter = 10; //This is the ASCII code for a newline character

        stopWorker = false;
        readBufferPosition = 0;
        readBuffer = new byte[1024];
        workerThread = new Thread(new Runnable()
        {
            public void run()
            {               
               while(!Thread.currentThread().isInterrupted() && !stopWorker)
               {
                    try 
                    {

                        int bytesAvailable = mmInputStream.available();                        
                        if(bytesAvailable > 0)
                        {
                            byte[] packetBytes = new byte[bytesAvailable];
                            mmInputStream.read(packetBytes);
                            for(int i=0;i<bytesAvailable;i++)
                            {
                                byte b = packetBytes[i];
                                if(b == delimiter)
                                {
                                    byte[] encodedBytes = new byte[readBufferPosition];
                                    System.arraycopy(readBuffer, 0, encodedBytes, 0, encodedBytes.length);
                                    final String data = new String(encodedBytes, "US-ASCII");
                                    readBufferPosition = 0;

                                    handler.post(new Runnable()
                                    {
                                        public void run()
                                        {   
                                            status=data;
                                            myLabel.setText(data);
                                        }
                                    });
                                }
                                else
                                {
                                    readBuffer[readBufferPosition++] = b;
                                }
                            }
                        }
                    } 
                    catch (IOException ex) 
                    {
                        stopWorker = true;
                    }
               }
            }
        });

        workerThread.start();
    }

    void sendData() throws IOException
    {
        String msg = myTextbox.getText().toString();
        msg += "\n\r";
        mmOutputStream.write(msg.getBytes());
        myLabel.setText("Data Sent");
    }

    void closeBT() throws IOException
    {
        stopWorker = true;
        mmOutputStream.close();
        mmInputStream.close();
        mmSocket.close();
        myLabel.setText("Bluetooth Closed");
    }
} 
```

**这将是我的 SMSReceiver.Java**

```
package com.wissen.sms.receiver;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.gsm.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();

        Object messages[] = (Object[]) bundle.get("pdus");
        SmsMessage smsMessage[] = new SmsMessage[messages.length];
        for (int n = 0; n < messages.length; n++) {
            smsMessage[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
        }

        Toast toast = Toast.makeText(context, "Received SMS: " + smsMessage[0].getMessageBody(), Toast.LENGTH_LONG);
        toast.show();
    }
} 
```

现在我想在收到新消息时调用 MainActivity.java 的方法

```
void somemethod()
{

try 
{
            String msg = "01ON";
                msg += "\n\r";
                mmOutputStream.write(msg.getBytes());
                myLabel.setText("Data Sent");
}
catch (IOException ex) { }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:50:40.533

从广播接收器类中使用 MainActivity 方法的一种最佳方法是

将您的方法定义为静态方法，然后您可以使用以下代码使用该方法

```
Activityname.methodname() 
```

我试过这个，它对我来说很好。

例如

```
public class SMSBroadcastReceiver extends BroadcastReceiver {

    private static final String SMS_RECEIVED = "android.provider.Telephony.SMS_RECEIVED";
    private static final String TAG = "SMSBroadcastReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
         Log.i(TAG, "Intent recieved: " + intent.getAction());

            if (intent.getAction() == SMS_RECEIVED) {
                Bundle bundle = intent.getExtras();
                if (bundle != null) {
                    Object[] pdus = (Object[])bundle.get("pdus");

                     abc.methodtocall();

                }
            }
       }
} 
```

和你这样的活动代码

```
public class abc extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

public static void methodtocall(){

    //Your code here...

} 
```

}

# python - 套接字编程无法连接到另一个网络

> ID：13175374
> 
> 赞同：0
> 
> 时间：2012-11-01T10:43:51.333
> 
> 标签：python, sockets, ip-address, portforwarding

我最近使用套接字在 python 中编写了一个客户端/服务器对，但问题是客户端没有连接到另一个网络上的服务器。我尝试过端口转发并使内部 IP 地址静态，一个真正困扰我的问题是我需要外部/公共 IP 地址才能使客户端连接，如果是这种情况，当 ISP 更改我的外部 IP 地址时该怎么办。请给一些建议，谢谢。

```
code:

PORT=8888
srvsock = socket.socket( socket.AF_INET, socket.SOCK_STREAM )
srvsock.setsockopt( socket.SOL_SOCKET, socket.SO_REUSEADDR, 1 )
srvsock.bind( ('', PORT) )
srvsock.listen( 10 )
print 'server now listening on PORT '+str(PORT)

while 1:

  clisock, (remhost, remport) = srvsock.accept()
  dl_information_file="server.txt"
  if os.path.exists(dl_information_file):
      f=open('server.txt','rb')
      read=f.read()
      clisock.send( read )
      f.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:50:28.313

首先，尝试从同一台计算机运行服务器和客户端（连接到本地主机）

如果可行，您的问题与端口转发有关。请参阅：[如何移植](http://portforward.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:58:09.030

客户端和服务器是在本地网络上，还是客户端和服务器被 Internet 分开？

如果服务器在 NAT 后面的机器上运行，则必须对其进行端口转发，并确保机器的 IP 是静态的，或者使用更新的 IP 更新客户端。

如果服务器在您自己的网络中，您可以使用`socket.gethostbyname(socket.getfqdn())`获取接口的 IP（注意，您可能有多个）并使用该 IP 绑定套接字。

您还可以使用 WireShark 对连接进行故障排除 - 您可以查看哪些数据包正在离开您的客户端以及哪些数据包正在进入您的服务器。

没有更多的代码和网络上的更多信息，真的很难说 - 它可能是防火墙，它可能是 NAT，它可能是一个配置错误的接口。

**编辑：**您似乎将套接字绑定到`''`，这意味着它应该绑定到本地主机端口，这意味着服务器侦听本地环回（127.0.0.1）上的连接。运行服务器的任何其他机器都无法访问此接口。您应该在脚本的变量中使用静态配置的 IP，或者使用`socket.gethostbyname(socket.getfqdn()))`.

# android - 使用 LayoutInflater 创建的视图的硬件后退按钮

> ID：13175376
> 
> 赞同：0
> 
> 时间：2012-11-01T10:44:01.583
> 
> 标签：android

我`onKeyDown`在活动中实现关闭活动。然后在布局中添加一个按钮并实现`setOnClickListener`。我设法使用`LayoutInflater`.I为按钮单击显示另一个布局。我`setOnKeyListner`为使用此视图创建的视图实现了该视图`Inflater`的硬件后退按钮。

但是当我在显示第二个布局时单击硬件后退按钮时，里面的东西`setOnKeyListner`不会执行。例如下面显示“1”而不是“2”。有人可以显示我的错误吗？

提前致谢。

```
public class TestActivity extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {

    button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
        LayoutInflater inflater = (LayoutInflater) getApplicationContext()
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View view = inflater.inflate(R.layout.layout_2, null);

            addContentView(view, new ViewGroup.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            initGUI(view); //initialize layout views 

            view.setOnKeyListener(new View.OnKeyListener() {

                @Override
                public boolean onKey(View dialog, int keyCode,  KeyEvent event) {
                    if (keyCode == KeyEvent.KEYCODE_BACK) {
                        Log.i("tag","2");       

                    }
                    return true;
                 }
           });      
        }
        });

}
//Hardware key pressing event
@Override
       public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.i("tag","1");
        }

        return super.onKeyDown(keyCode, event);
       }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:20:29.497

它是

> 标签 1

因为您的活动实例是comman。在按钮单击时，您仅向此活动添加内容，但在后按时，活动的上下文或引用是通用的，因此它始终调用活动的覆盖方法。

只有您的内容会添加到此活动布局中，但活动的主要上下文是单一的，这样就会发生这种情况。

# java - 如何从句子中获取特定数据

> ID：13175378
> 
> 赞同：-3
> 
> 时间：2012-11-01T10:44:07.213
> 
> 标签：java, regex, scrape

```
public class newsidlink{
    public static void main (String[] args) throws Exception{

       String msg="ABCD NEWSBULLETIN01 Issued at HHSSIST NT=2147IST 28Oct2012  Name";
       //to do code 
    }
} 
```

嗨，我是java初学者....请帮助我如何从上面的字符串中获取所需的参数？我对`NEWSBULLETIN01`将 NewsTime NT 转换为 SQL 原生格式感兴趣吗？

请建议我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:53:09.313

使用`substring()`. [在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)阅读

```
 String msg="ABCD NEWSBULLETIN01 Issued at HHSSIST NT=2147IST 28Oct2012  Name";
           //to do code 
    System.out.pritnln(msg.subString(5,19)); 
```

通过使用 String.split();

```
String[] arr = msg.split("\\s");

System.out.println(arr[1]); 
```

# c++-cli - 如何从 const 通用对象复制？

> ID：13175384
> 
> 赞同：0
> 
> 时间：2012-11-01T10:44:23.500
> 
> 标签：c++-cli, constants, copy-constructor, deep-copy

我正在研究一个通用的循环缓冲区，但是在涉及到复制构造函数时遇到了一个绊脚石（请参见下面的代码示例）。

```
using namespace System;

/// A generic circular buffer with a fixed-size internal buffer which allows the caller to push data onto the buffer, pop data back off again and provides direct indexed access to any element.
generic<typename T>
public ref class CircularBuffer
{
protected:
    array<T, 1>^ m_buffer; /// The internal buffer used to store the data.
    unsigned int m_resultsInBuffer; /// A counter which records the number of results currently held in the buffer
    T m_nullValue; /// The value used to represent a null value within the buffer

public:
    CircularBuffer(unsigned int size, T nullValue):
      m_buffer(gcnew array<T, 1>(size)),
      m_nullValue(nullValue),
      m_resultsInBuffer(0)
    {

    }

    /// <summary>
    /// Copy constructor
    /// </summary>
    CircularBuffer(const CircularBuffer^& rhs)
    {
        CopyObject(rhs);
    }

    /// <summary>
    /// Assignment operator.
    /// </summary>
    /// <param name="objectToCopy"> The Zph2CsvConverter object to assign from. </param>
    /// <returns> This Zph2CsvConverter object following the assignment. </returns>
    CircularBuffer% operator=(const CircularBuffer^& objectToCopy)
    {
        CopyObject(objectToCopy);
        return *this;
    }

protected:
    /// <summary>
    /// Copies the member variables from a Zph2CsvConverter object to this object.
    /// </summary>
    /// <param name="objectToBeCopied"> The Zph2CsvConverter to be copied. </param>
    void CopyObject(const CircularBuffer^& objectToBeCopied)
    {
        m_buffer = safe_cast<array<T, 1>^>(objectToBeCopied->m_buffer->Clone());
        m_nullValue = objectToBeCopied->m_nullValue; // <-- "error C2440: '=' : cannot convert from 'const T' to 'T'"
        m_resultsInBuffer = objectToBeCopied->m_resultsInBuffer;
    }
}; 
```

编译这个给了我`error C2440: '=' : cannot convert from 'const T' to 'T'`

通常，我会将它与我自己的 ref 类一起使用，其中包括指向托管和非托管内存的指针，因此如果复制整个缓冲区，则需要深度复制缓冲区的内容。

我在这里想念什么？为什么我不能从某种类型的东西复制到某种类型`const T`的东西`T`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:08:38.627

“C++/CLI 并不*真正*支持 const”的持续传奇中的另一个条目。

C++/CLI 中的复制构造函数是 T(T%)。赋值运算符是 T% operator=(T%)。没有 const 也没有 ref。

看到它们使用的一个好地方是 vc/include/cliext，它是 STL/CLR 实现类的所在地。不要使用它们。

# matlab - MATLAB：绘制矩阵的多列

> ID：13175385
> 
> 赞同：0
> 
> 时间：2012-11-01T10:44:27.693
> 
> 标签：matlab, matrix, plot, figure

在 MATLAB 函数中，我构建了一个矩阵 A，其维度 M 和 N 设置为函数的参数。我想绘制这个矩阵的所有列，给定一个长度为 M 的索引向量 B。因此，我使用这些行：

```
figure
plot(B,A) 
```

我指定`figure`MATLAB 函数返回更多不同的图。

我的问题是程序只绘制了具有不同颜色（蓝色和紫色）​​的矩阵的两列。我的错误在哪里？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:53:17.377

去做

```
plot(repmat(B,1,N),A); 
```

或者

```
plot(repmat(B,N,1),A); 
```

（取决于您的行/列）。您需要在图中具有相同大小的矩阵。

此外，如果`B`只是连续索引，您可能需要考虑`Plot(A)`（或`Plot(A')`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:17:44.887

我注意到有一个错误导致不同曲线重叠，所以我用来绘制矩阵列的方式是有效的。但是，Acorbe 提出的方法也是一种可能。

# vector - Ray.direction 相机（物体）正在看的地方

> ID：13175390
> 
> 赞同：1
> 
> 时间：2012-11-01T10:44:38.567
> 
> 标签：vector, camera, three.js, collision, direction

我正在做简单的碰撞检测，虽然我可以使用 THREE.ray 轻松检测上/下物体，但是当它们旋转时，我很难找到相机（或任何物体）的前/后的物体？我尝试用投影仪投射光线，并使用辅助箭头显示该光线是如何射出的。一旦我开始围绕 Y 轴旋转相机，光线会指向相反的方向，或者只是表现得很奇怪......

```
ray = new THREE.Ray();
projector = new THREE.Projector();
vector = projector.projectVector( coll.getObject().matrix.getPosition().clone(), camera );
ray.direction = vector.normalize();
ray.origin = coll.getObject().matrix.getPosition().clone();
helper.setDirection(ray.direction.clone());
helper.position = ray.origin.clone(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:05:29.917

我最终在连接到相机的对象周围设置了一个立方体，并通过添加的顶点拍摄光线，如下所示：

```
vertices = coll.getObject().geometry.vertices;
        rad = coll.getObject().boundRadius+1;
        var directions = {
            "up": [4,1],
            "down": [6,2],
            "front": [3,4],
            "back": [7,0],
            "left": [5,6],
            "right": [1,2],
        };
        var collisions = {
            "up": {},
            "down": {},
            "front": {},
            "back": {},
            "left": {},
            "right": {},
        };
        for (key in directions){
            (directions[key].length > 1) ? localVertex =  vertices[directions[key][0]].clone().addSelf(vertices[directions[key][1]].clone()) : localVertex = vertices[directions[key][0]].clone();  
            globalVertex = coll.getObject().matrix.multiplyVector3(localVertex);
            directionVector = globalVertex.subSelf( coll.getObject().position );
            ray = new THREE.Ray( coll.getObject().position.clone(), directionVector.clone().normalize(), 0, 1000 );
            intersects = ray.intersectObjects(obj, true);
            if (intersects.length > 0) {
                distance = intersects[ 0 ].distance;
                if (distance >= 0 && distance <= rad) {
                    collisions[key] = intersects[ 0 ];              
                } else {                        
                    collisions[key] = false;
                }
            } else {
                collisions[key] = false;
                ++falseCount;
            }       
        }                   
    }
    return (falseCount !== 6) ? collisions : false; 
```

# dependency-injection - Guice - 如何使用绑定注释来构建对象列表

> ID：13175391
> 
> 赞同：0
> 
> 时间：2012-11-01T10:44:37.610
> 
> 标签：dependency-injection, guice

我创建了 Guice 绑定注释，允许我根据注释绑定类的两个不同实例，例如：

```
bind(Animal.class).withAnnotation(Cat.class).toInstance(new Animal("Meow"));
bind(Animal.class).withAnnotation(Dog.class).toInstance(new Animal("Woof")); 
```

我希望能够创建一个提供者方法，该方法提供一个列表，该列表是我的一个类的依赖项，但无法弄清楚如何为此使用注释：

```
@Provider
List<Animal> provideAnimalList() {
    List<Animal> animals = new ArrayList<Animal>();
    animals.add(@Cat Animal.class); // No, but this is what I want
    animals.add(@Dog Animal.class); // No, but this is what I want
    return animals;
} 
```

所以我假设我只能使用`add()`List 方法的参数中的注释......但没有。

我应该如何处理这个？在我看来，简单地`new`使用 Animal 类的两个实例会更简单，也许这不是绑定注释的使用方式。

我很感激在这种情况下最好地使用绑定注释的评论。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:32:52.480

如果它真的是你想要的，这里有一个可行的解决方案：

```
public class AnimalModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(Animal.class).annotatedWith(Cat.class).toInstance(new Animal("Meow"));
        bind(Animal.class).annotatedWith(Dog.class).toInstance(new Animal("Woof"));
    }

    @Provides
    List<Animal> provideAnimalList(@Cat Animal cat, @Dog Animal dog) {
        List<Animal> animals = new ArrayList<Animal>();
        animals.add(cat);
        animals.add(dog);
        return animals;
    }

    public static void main(String[] args) {
        List<Animal> animals = Guice.createInjector(new AnimalModule()).getInstance(Key.get(new TypeLiteral<List<Animal>>() {
        }));
        for (Animal animal : animals) {
            System.out.println(animal);
        }
    }
} 
```

注释：

```
@Retention(value = RetentionPolicy.RUNTIME)
@BindingAnnotation
public @interface Cat {
} 
```

输出 ：

```
Animal{sound='Meow'}
Animal{sound='Woof'} 
```

**但是**：

*   不要创建特定的注释，在这种情况下似乎没有必要。改用[@Named](http://code.google.com/p/google-guice/wiki/BindingAnnotations)，
*   您可以考虑[使用多重绑定](http://code.google.com/p/google-guice/wiki/Multibindings)来解决该问题。

# apache2 - apache2-mod_fcgid-1.10-15 通过 rpm 安装但在 apache 中不可用

> ID：13175406
> 
> 赞同：0
> 
> 时间：2012-11-01T10:45:30.340
> 
> 标签：apache2, mod-fcgid

我已经在 sles 10.2 上安装了 apache2-mod_fcgid-1.10-15.rpm，之前安装了 apache。

rpm -i apache2-mod_fcgid-1.10-15.rpm 没有错误。

加载了以下模块。（有没有我错过的名字？）

```
Loaded Modules:
 core_module (static)
 mpm_prefork_module (static)
 http_module (static)
 so_module (static)
 actions_module (shared)
 alias_module (shared)
 auth_basic_module (shared)
 authn_file_module (shared)
 authz_host_module (shared)
 authz_groupfile_module (shared)
 authz_default_module (shared)
 authz_user_module (shared)
 authn_dbm_module (shared)
 autoindex_module (shared)
 cgi_module (shared)
 dir_module (shared)
 env_module (shared)
 expires_module (shared)
 include_module (shared)
 log_config_module (shared)
 mime_module (shared)
 negotiation_module (shared)
 setenvif_module (shared)
 ssl_module (shared)
 suexec_module (shared)
 userdir_module (shared)
 php5_module (shared)
 rewrite_module (shared)
 python_module (shared)
Syntax OK
selnc211:/tmp/a # httpd2 -l
Compiled in modules:
  core.c
  prefork.c
  http_core.c
  mod_so.c
selnc211:/tmp/a # 
```

# c# - 在 Winforms 中带有标签的 C# 下拉菜单

> ID：13175407
> 
> 赞同：1
> 
> 时间：2012-11-01T10:45:32.430
> 
> 标签：c#, winforms

我想在 C# 中的 Winforms 中有一个下拉菜单，菜单项之间有文本标签。它将与分隔符非常相似。所以基本上我正在寻找对菜单项进行分组的选项。

知道我们如何实现它吗？附件是我希望拥有的下拉菜单。 ![在此处输入图像描述](../Images/f9fa97eb009b6b76f61412e989b283b6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:30:50.360

希望你使用的是 VS2010

在菜单设计器中，右键单击需要分隔栏的位置，然后选择转换为 -> 分隔符。

![在此处输入图像描述](../Images/c3715e51986f513b46d24d88b9442564.png)

[有关菜单增强的 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa983550%28v=vs.71%29.aspx)

您可能还想看看这个（它关于**表单**分隔符，但版本是 VS2003！）—— [Windows 表单分隔符控件](https://stackoverflow.com/questions/6022137/windows-forms-separator-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:15:12.983

我确信有很多复杂的方法可以做到这一点，但我找到了一种可以通过 3 个步骤满足您的需求的方法：

1.您制作自己的 ToolStripItem：

```
[ToolStripItemDesignerAvailability(ToolStripItemDesignerAvailability.All)]
public sealed class CustomToolStripMenuItem : ToolStripMenuItem
{

    public CustomToolStripMenuItem()
    {
        DisplayStyle = ToolStripItemDisplayStyle.Text;
        BackColor = Color.LightSteelBlue;
        ForeColor = Color.MidnightBlue;
        Font = new Font(Font, FontStyle.Bold);
       // Or other options to your liking
     }
} 
```

2.您制作自己的渲染器：

```
public class CustomeRenderer : ToolStripProfessionalRenderer
{

    protected override void OnRenderMenuItemBackground(ToolStripItemRenderEventArgs e)
    {
        if(e.Item is CustomToolStripMenuItem)
        {
            e.Graphics.FillRectangle(Brushes.LightSteelBlue, e.Item.ContentRectangle);
        }
        else
        {
            base.OnRenderMenuItemBackground(e);
        }
    }
} 
```

3.使用您的项目：对于您的上下文菜单，您需要设置渲染器：

```
 RenderMode = ToolStripRenderMode.Professional;
 Renderer = new CustomeRenderer(); 
```

在您的上下文菜单中，您现在可以使用您的 CustomToolStripMenuItem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:50:12.017

可能下面的链接可以帮助你：

[分隔符组合列表 Vox](http://www.codeproject.com/Articles/18971/A-Separator-Combo-List-Box)

# xml-serialization - RestSharp - 序列化没有父元素的列表

> ID：13175410
> 
> 赞同：2
> 
> 时间：2012-11-01T10:45:36.210
> 
> 标签：xml-serialization, restsharp

我在 SO 上看到过类似的问题，但这是专门关于 RestSharp XmlSerializer 的。

我要这个：

```
<Item>
    ...
</Item>
<Item>
    ...
</Item>
<Item>
    ...
</Item>
<Item>
    ...
</Item> 
```

我有这个：

```
public class MyPoco
{
    [SerializeAs( Name = "Item")
    public List<Item> Items { get; set; }
}

public class Item
{
    ...
} 
```

我得到的是：

```
<Item>
    <Item>
        ...
    </Item>
    <Item>
        ...
    </Item>
    <Item>
        ...
    </Item>
</Item> 
```

使用 RestSharp 时如何摆脱父元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-09T23:57:41.600

将 SerializeAs 更改为 XmlElement：

```
[XmlElement("Item")]
public List<Item> Items { get; set; } 
```

然后告诉 RestSharp 使用 .NET 序列化程序：

```
 var request = new RestRequest
 {              
     XmlSerializer = new RestSharp.Serializers.DotNetXmlSerializer(),
 }; 
```

这将输出没有父项目节点的项目列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:53:08.600

这将有助于：

```
public class MyPoco : List<Item> {}

public class Item { ... } 
```

# javascript - 数组中的函数时的Javascript范围问题

> ID：13175411
> 
> 赞同：0
> 
> 时间：2012-11-01T10:45:39.670
> 
> 标签：javascript, scope, call, apply

作为我正在构建的 Web 应用程序的一部分，可以同时从服务器输入多个命令。

处理这些命令时，数据将趋于更新，然后可能会发生相当大量的页面 HTML 生成。

在多个类似命令进来的那一刻，程序会对数据进行处理，然后每次都重新生成部分页面。这会导致大量浪费的处理时间。

因此，我正在尝试创建一个调用堆栈，因此在处理命令时，它会查看命令触发的函数是否在堆栈中，如果未找到，则添加它。

* * *

我的问题是将调用堆栈中的被调用函数保持在正确的范围内，同时还能够消除重复项。

基本代码：

```
var tools = {
  functions:{
    function1: function(){
      return this;
    },
    function2: function(){
    }
  },
  unique: function(arr){
    var returnArr=[],
        x, i;

    for (x=0; x<arr.length; x++){
      for (i=(x+1); i<arr.length; i++){
        if (arr[x]===arr[i]){
          arr.splice(i, 1);
        }
      }
      returnArr.push(arr[x]);
    }

    return returnArr;
  }
} 
```

* * *

示例 1：

```
var callstack=[tools.functions.function1, tools.functions.function1];

callstack = tools.unique(callstack);

for (var x=0; x<callstack.length; x++){
  console.log(callstack[x](), "should equal tools.functions");
} 
```

这失败了，因为“this”将返回 [function()]

* * *

示例 2：

```
var callstack=[
  (function(){return tools.functions.function1()}),
  (function(){return tools.functions.function1()})
];

callstack = tools.unique(callstack);

for (var x=0; x<callstack.length; x++){
  console.log(callstack[x](), "should equal tools.functions");
} 
```

这会失败，因为您无法确保函数是唯一的，因此它仍会运行该函数两次。

* * *

这可以通过使用两个数组（一个跟踪函数名称，一个保存封装函数）并使它们保持同步来解决，但我不禁觉得必须有一种更清洁的方式使用 .打电话，但我看不到。

JSFiddle：http: [//jsfiddle.net/Kj6E8/](http://jsfiddle.net/Kj6E8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:54:43.150

在 JavaScript 中，`this`是从外部调用者定义的，所以当你这样做时：

```
callstack[x]() 
```

您正在将`window`范围纳入功能。如果要引入`tools.functions`对象，则需要执行以下操作：

```
callstack[x].call(tools.functions); 
```

[http://jsfiddle.net/Yv4sM/](http://jsfiddle.net/Yv4sM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:14:12.600

一般而言，不可能以`this`您需要的方式保留价值。一旦将这些函数推送到数组中，这些函数曾经驻留的对象就会丢失。

如果您只在单个对象上调用函数，则需要以某种方式将函数绑定到该对象。有很多方法可以做到这一点，例如，您可以传递对象以将这些函数绑定到您的唯一函数中。

[http://jsfiddle.net/8WAZb/1/](http://jsfiddle.net/8WAZb/1/)

```
var tools = {
  functions:{
    function1: function(){
      return this;
    },
    function2: function(){
    }
  },
  unique: function(arr, o){
    var returnArr=[],
        x, i;

    for (x=0; x<arr.length; x++){
      for (i=(x+1); i<arr.length; i++){
        if (arr[x]===arr[i]){
          arr.splice(i, 1);
        }
      }
        returnArr.push(this.bind(arr[x], o));
    }

    return returnArr;
  },
  bind: function(f, o) {
      return function () {
          return f.apply(o, arguments);
      }
  }
}

console.info("Example 1:");
var callstack=[tools.functions.function1, tools.functions.function1];
callstack = tools.unique(callstack, tools.functions);
console.log("Callstack:",callstack);
for (var x=0; x<callstack.length; x++){
  console.log(callstack[x](), "should equal tools.functions");
} 
```

您如何以及何时推断 的值`this`实际上取决于您何时将该对象包含在范围内。假设您更有可能在调用堆栈创建阶段将该对象放在范围内，并且可能不一定在您希望调用调用堆栈中的函数的时候。如果是这样的话，尽早绑定（即在减少到一个唯一的调用堆栈期间）似乎是一个明智的选择。

# sql-server-2008 - 使用连接返回具有特定值的行周围的行

> ID：13175412
> 
> 赞同：2
> 
> 时间：2012-11-01T10:45:54.150
> 
> 标签：sql-server-2008, tsql, join, row-number

我有相当复杂的连接查询，我想从中选择具有特定 id 的结果周围的几行。

查询当前看起来像这样：

```
WITH results AS 
  (
    SELECT t1.id,  t1.position, t1.points, t2.name
      ROW_NUMBER() OVER(ORDER BY t1.position ASC, t1.points DESC) AS rn
      FROM Table1 t1
      JOIN Table2 t2 ON t1.id = t2.Table1id
      /* Several more joins here, some of which limit the result set */
  )
SELECT * FROM results
WHERE rn < ( SELECT rn+3 FROM results WHERE  id = @someid ) 
AND rn > ( SELECT rn-3 FROM results WHERE id = @someid ) 
```

有没有更好的方法来解决这个问题？最重要的是，我担心这些对可能巨大的 CTE 的多次调用的性能。

该查询在**SQL 2008**服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:35:05.493

也许将连接从 CTE 中拉出来。
这样，查询优化器就有机会在处理连接之前过滤掉行。

```
WITH results AS 
  (
    SELECT t1.id,  t1.position, t1.points
         , ROW_NUMBER() OVER(ORDER BY t1.position ASC, t1.points DESC) AS rn
      FROM Table1 t1     
  )
SELECT results.id,  results.position, results.points, t2.name
FROM results
JOIN Table2 t2 ON t2.id = results.Table1id
      /* Several more joins here */
WHERE rn < ( SELECT rn+3 FROM results WHERE id = @someid ) 
  AND rn > ( SELECT rn-3 FROM results WHERE id = @someid ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T03:48:25.250

您可以使用另一个 cte 来帮助形成过滤器：

```
WITH results AS (
    SELECT
        t1.id
      , t1.position
      , t1.points
      , t2.name
      , ROW_NUMBER() OVER (ORDER BY t1.POSITION ASC, t1.points DESC) AS rn
    FROM Table1 t1
    JOIN Table2 t2
        ON t1.id = t2.Table1id
    /* Several more joins here, some of which limit the result set */
    ),
filter AS (
    SELECT
        rn
    FROM results
    WHERE id = @someid
    )
SELECT
    *
FROM results
WHERE rn < ( SELECT rn + 3 FROM filter )
AND rn > ( SELECT rn - 3 FROM filter ) 
```

# c# - 如何从库中加载在 c# 启动项目中定义的 XML

> ID：13175413
> 
> 赞同：1
> 
> 时间：2012-11-01T10:45:57.150
> 
> 标签：c#, xml, dll

我试图四处寻找从 C# 解决方案中的启动项目加载 XML 文件的最佳实践。

我正在构建一个库，它应该能够从使用该库的启动项目中加载以下 XML。如果可能，最终用户不应看到 XML。XML 文件使用 DTD，所以我不确定是否可以使用 app.config 来执行此操作。这是这样一个 XML 文件的示例

```
<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<!DOCTYPE filter SYSTEM "filters.dtd">

<filter>
    <controltype-criteria type="Button">
        <event>TouchDown</event>
    </controltype-criteria>
</filter> 
```

有没有人建议如何做到这一点？

感谢你的回复！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:47:27.570

将其作为嵌入式资源添加到您的程序集（启动项目）并从那里读取。谷歌知道细节。

# linux - Makefile 将 .o 文件导出到与 .cpp 不同的路径

> ID：13175414
> 
> 赞同：0
> 
> 时间：2012-11-01T10:45:58.853
> 
> 标签：linux, ubuntu, makefile

所以我的任务很简单，我创建了 makefile（使用 makefile 新建），我想将我的 .o 文件保存在不同的文件夹中，以便拥有一个更干净的目录并允许其他人使用 .o 文件。

我搜索并发现许多解决方案指向使用 -o $< $@

但是，它给了我`g++: cannot specify -o with -c or -S with multiple files`

这就是我想要做的：

```
$(OBJECT_PATH)/file1.o: $(SOURCE_PATH)/file2.cpp $(SOURCE_PATH)/file1.cpp
        $(CC) $(CFLAGS) $(SOURCE_PATH)/file2.cpp $(SOURCE_PATH)/file1.cpp -o $@ 
```

file1.cpp 有#include "file1.h"，所以从我读到的内容中，我应该在依赖项中包含 file1.cpp。但是，现在我无法导出到其他目录。

有解决办法吗？还是我的概念错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:55:44.317

使用`make -d`甚至更好地[重新制作](http://bashdb.sourceforge.net/remake/) `-x`来了解调用了哪些命令。

还可以运行`make -p` 以了解使用了哪些内置规则。

我们无法为您提供更多帮助，因为我们不知道您是否重新定义了`CFLAGS`.

并且 C++ 编译最好用`g++`is`CXX`和来完成`CXXFLAGS`，例如用（我从我的`make -p`输出中提取这个）

```
LINK.cc = $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH)
COMPILE.cc = $(CXX) $(CXXFLAGS) $(CPPFLAGS) $(TARGET_ARCH) -c
CXX = g++
%.o: %.cc
      $(COMPILE.cc) $(OUTPUT_OPTION) $< 
```

我强烈建议`CXXFLAGS= -Wall -g`至少在开发阶段拥有。还学习使用`gdb`and `valgrind`。

你可以在你的`Makefile`

```
 CXXFLAGS= -g -Wall
 SOURCES=f1.cc f2.cc
 SOURCE_PATH=yoursourcedir/
 OBJECT_PATH=yourobjectdir/
 SRCFILES=$(patsubst %.cc,$(SOURCE_PATH)/%.cc,$(SOURCES))
 OBJFILES=$(patsubst %.cc,$(OBJECT_PATH)/%.o,$(SOURCES))
 PROGFILE=$(OBJECT_PATH)
 .PHONY: all clean
 all: $(PROGFILE)
 $(PROGFILE): $(OBJFILES)
         $(LINK.cc) $^ $(LOADLIBES) $(LDLIBS) -o $@
 $(OBJECT_PATH)/%.o: $(SOURCE_PATH)/%.cc
         $(COMPILE.cc)  $(OUTPUT_OPTION) $<
 clean:
         $(RM) $(OBJECT_PATH)/*.o $(PROGFILE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:57:07.173

尝试

```
$(OBJECT_PATH)/file1.o: $(SOURCE_PATH)/file2.cpp $(SOURCE_PATH)/file1.cpp
    $(CC) $(CFLAGS) $^ -c $@ 
```

并检查 CFLAGS 不包含 -o -c 或 -s 标志

还阅读了隐含规则。它可能会帮助您组织您的 makefile

# jquery - 无法修复未捕获的类型错误：无法在第 562 行调用未定义的方法“jQuery”

> ID：13175418
> 
> 赞同：0
> 
> 时间：2012-11-01T10:46:19.923
> 
> 标签：jquery, methods, call, undefined, typeerror

var nn=oTable.jQuery('input:checked').serialize() 即使在使用 noConflict 时也会不断抛出错误。在 jsfiddle 上它显示我的代码是正确的，但问题仍然存在。我在 google 中搜索了足够多但没有运气。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="hu" dir="ltr">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="Content-Language" content="hu"/>    
    <meta http-equiv="ImageToolbar" content="False" />
    <meta name="MSSmartTagsPreventParsing" content="True" />
    <script type="text/javascript" charset="utf-8" src="jquery-1.8.2.js"></script>
    <script type="text/javascript" charset="utf-8" src="media/js/jquery.dataTables.js"></script>
    <script type="text/javascript" charset="utf-8" src="extras/TableTools/media/js/TableTools.js"></script>
    <script type="text/javascript" src="../res/x5engine.js"></script>
    <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
    <script type="text/javascript" src="js/jquery.md5.js"></script>
    <link rel="stylesheet" type="text/css" href="template.css" media="screen" />
        <style type="text/css" title="currentStyle">
            @import "media/css/demo_table_jui.css";
            @import "jquery-ui-1.8.4.custom.css";
            @import "extras/TableTools/media/css/TableTools_JUI.css";
        </style>
  <title>Adminisztráció</title>
</head>
<body>
        <div id="imNavBar">
            <a href="kereso.php">Kereső</a>
<a href="munka.php">Munka</a>
<a href="ujd.php">Újdonságok</a>
<a href="pass.php">Jelszó</a>
<span>
    <a href="login.php?logout">Kilépés</a>
</span>     </div>

<div id='imAdminPage'>
    <div id='imBody'>
        <div class='imSectionTitle'>Kereső</div>
        <div class='imContent' style='width:auto;margin-left: auto ;margin-right: auto ;text-align: center;'>

<form name='osszes' id='osszes' method='post' action='mentes.php' enctype='multipart/form-data'>
<table class='display' id='table_id' border='0' style='width: 100%;' align='center'>
<thead>
<tr class='vami'>
<th>ID:</th>
<td>Sezonier, Operator la bandă, Industria auto, IT</td>
<td>Akarhol</td>
<td><span><input class='codes' type='checkbox' id='31' name='kodok[]' value='31' />
&nbsp;Lementeni</span>
</td>
<td>
<a target='_blank' href='mentes2.php?kod=31'>Megnéz</a>
</td>  
</tr>
</tbody>
</table>
<div id='inputok'></div>
</form>
        </div>
    </div>
</div><script>
var oTable,oTable2,oTable3;
jQuery.noConflict();
jQuery(document).ready(function(){
jQuery(':checkbox').live('click',function(){
    var nn=oTable.jQuery('input:checked').serialize()
Uncaught TypeError: Cannot call method 'jQuery' of undefined
    ;var n=nn.length;
    if (n!='0'){
        $('#imObjectForm').attr('disabled',false);
        }
    else {
        $('#imObjectForm').attr('disabled',true);
        }
});    
    jQuery('#osszes').submit(function(){
        $("input:hidden").remove();
        var fields = oTable.$('input').serializeArray();
        $.each(fields, function(i, field){
            $('<input type="hidden" id="imSpProt" name="imSpProt[]" value="' + field.value + '" />').appendTo('#inputok');
            });
    });
Table = jQuery('#table_id').dataTable({
        "sScrollY": '400px',
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bSort": false,
        "sScrollX": "100%",
        "bScrollCollapse": true,
        "bAutoWidth": false,
        "sDom": '<"H"lfrT>t<"F"ip>',
        "oTableTools": {
            "aButtons": [
                {
                    "sExtends":    "text",
                    "sButtonText": "<input id='imObjectForm' name='submit' type='submit' value='Kiválasztottak lementése' disabled='disabled' />"
                }
            ]
        },
       "oLanguage":  {
    "sProcessing":   "Feldolgozás...",
    "sLengthMenu":   "_MENU_ találat oldalanként",
    "sZeroRecords":  "Nincs a keresésnek megfelelő találat",
    "sInfo":         "Találatok: _START_ - _END_ Összesen: _TOTAL_",
    "sInfoEmpty":    "Nulla találat",
    "sInfoFiltered": "(_MAX_ összes rekord közül szűrve)",
    "sInfoPostFix":  "",
    "sSearch":       "Keresés:",
    "sUrl":          "",
    "oPaginate": {
        "sFirst":    "Első",
        "sPrevious": "Előző",
        "sNext":     "Következő",
        "sLast":     "Utolsó"
    }
}
    });
    oTable2 = jQuery('#kepek').dataTable({
        "sScrollY": '500px',
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bSort": false,
        "bAutoWidth": true,
       "oLanguage":  {
    "sProcessing":   "Feldolgozás...",
    "sLengthMenu":   "_MENU_ találat oldalanként",
    "sZeroRecords":  "Nincs a keresésnek megfelelő találat",
    "sInfo":         "Találatok: _START_ - _END_ Összesen: _TOTAL_",
    "sInfoEmpty":    "Nulla találat",
    "sInfoFiltered": "(_MAX_ összes rekord közül szűrve)",
    "sInfoPostFix":  "",
    "sSearch":       "Keresés:",
    "sUrl":          "",
    "oPaginate": {
        "sFirst":    "Első",
        "sPrevious": "Előző",
        "sNext":     "Következő",
        "sLast":     "Utolsó"
    }
}
    });
    oTable3 = jQuery('#adatok').dataTable({
        "sScrollY": '473px',
        "bJQueryUI": true,
        "bAutoWidth": false,
        "sScrollX": "100%",
        "bScrollCollapse": true,
        "sPaginationType": "full_numbers",
        "bSort": false,
       "oLanguage":  {
    "sProcessing":   "Feldolgozás...",
    "sLengthMenu":   "_MENU_ találat oldalanként",
    "sZeroRecords":  "Nincs a keresésnek megfelelő találat",
    "sInfo":         "Találatok: _START_ - _END_ Összesen: _TOTAL_",
    "sInfoEmpty":    "Nulla találat",
    "sInfoFiltered": "(_MAX_ összes rekord közül szűrve)",
    "sInfoPostFix":  "",
    "sSearch":       "Keresés:",
    "sUrl":          "",
    "oPaginate": {
        "sFirst":    "Első",
        "sPrevious": "Előző",
        "sNext":     "Következő",
        "sLast":     "Utolsó"
    }
}
    });
    oTable4 = jQuery('#adatok2').dataTable({
        "sScrollY": '350px',
        "bJQueryUI": true,
        "bAutoWidth": false,
        "sScrollX": "100%",
        "bScrollCollapse": true,        
        "sPaginationType": "full_numbers",
        "bSort": false,
       "oLanguage":  {
    "sProcessing":   "Feldolgozás...",
    "sLengthMenu":   "_MENU_ találat oldalanként",
    "sZeroRecords":  "Nincs a keresésnek megfelelő találat",
    "sInfo":         "Találatok: _START_ - _END_ Összesen: _TOTAL_",
    "sInfoEmpty":    "Nulla találat",
    "sInfoFiltered": "(_MAX_ összes rekord közül szűrve)",
    "sInfoPostFix":  "",
    "sSearch":       "Keresés:",
    "sUrl":          "",
    "oPaginate": {
        "sFirst":    "Első",
        "sPrevious": "Előző",
        "sNext":     "Következő",
        "sLast":     "Utolsó"
    }
}
    });
jQuery('form#urlapocska').submit(function(){
    $(".error").hide();
    var hasError = false;
    var pasw = $("#regipass").val();
    var passwordVal2 = $.md5(pasw);
    var checkVal2 = $("#jelszo").val();
    var passwordVal = $("#ujpass").val();
    var checkVal = $("#ujpass2").val();
    if (passwordVal2 === '') {
        $("#egyes").after('<span class="error">Nem írtad be a régi jelszót.</span>');hasError = true;
        }
    else if (passwordVal2 != checkVal2 ) {
        $("#egyes").after('<span class="error">Nem talál a régi jelszó.</span>');
        hasError = true;
        }
    if (passwordVal === '') {
        $("#kettes").after('<span class="error">Nem írtál jelszót.</span>');
        hasError = true;
    }
    else if (checkVal === '') {
        $("#harmas").after('<span class="error">Jelszó megismétlése szükséges.</span>');
        hasError = true;
        }
    else if (passwordVal != checkVal){
        $("#harmas").after('<span class="error">A jelszók nem találnak.</span>');
        hasError = true;
    }
    if(hasError === true) {
        return false;
        }
});    
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:50:24.140

我假设您正在尝试从您的代码中查找`input:checked`元素中的`oTable`元素。如果是这种情况，试试这个：

```
var nn = jQuery('input:checked', oTable).serialize() 
```

# java - Jackson 使用自定义反序列化器进行反序列化会导致大量 GC 调用并花费更长的时间

> ID：13175420
> 
> 赞同：8
> 
> 时间：2012-11-01T10:46:28.190
> 
> 标签：java, android, json, jackson

[为了解决我在这个线程中](https://stackoverflow.com/questions/12684808/jackson-parser-ignore-deserializing-for-type-mismatch/)讨论的类型不匹配问题，我创建了自定义`Deserializers`并将它们添加到`ObjectMapper`. 但是，性能会因此而显着下降。

使用默认反序列化器时，我会收到 1-2 次垃圾收集调用，`logcat`而使用自定义反序列化器时，至少有 7-8 次 GC 调用，因此处理时间也显着增加。

我的反序列化器：

```
public class Deserializer<T> {

public JsonDeserializer<T> getDeserializer(final Class<T> cls) {
  return new JsonDeserializer<T> (){

     @Override
     public T deserialize(JsonParser jp, DeserializationContext arg1) throws IOException, JsonProcessingException {
        JsonNode node = jp.readValueAsTree();
        if (node.isObject()) {
          return new ObjectMapper().convertValue(node, cls);
        }
        return null;
     }
 };
}
} 
```

我正在使用它来添加到 Mapper

```
public class DeserializerAttachedMapper<T> {

   public ObjectMapper getMapperAttachedWith(final Class<T> cls , JsonDeserializer<T> deserializer) {
      ObjectMapper mapper = new ObjectMapper();
      SimpleModule module = new SimpleModule(deserializer.toString(), new Version(1, 0, 0, null, null, null));
      module.addDeserializer(cls, deserializer);
      mapper.registerModule(module);
      return mapper;
   }
} 
```

**编辑：**添加了额外的数据

我的 JSON 相当大，但不是很大：我已将其粘贴[在这里](http://pastie.org/5170282)

如果我使用以下代码，现在解析相同的 JSON：

```
 String response = ConnectionManager.doGet(mAuthType, url, authToken);
    FLog.d("location object response" + response);
  //        SimpleModule module = new SimpleModule("UserModule", new Version(1, 0, 0, null, null, null));
  //        JsonDeserializer<User> userDeserializer = new Deserializer<User>().getDeserializer(User.class);     
  //        module.addDeserializer(User.class, userDeserializer);

    ObjectMapper mapper = new ObjectMapper();
  //        mapper.registerModule(module);
    JsonNode tree = mapper.readTree(response);
    Integer code = Integer.parseInt(tree.get("code").asText().trim());

    if(Constants.API_RESPONSE_SUCCESS_CODE == code) {
        ExploreLocationObject locationObject = mapper.convertValue(tree.path("response").get("locationObject"), ExploreLocationObject.class);
        FLog.d("locationObject" + locationObject);
        FLog.d("locationObject events" + locationObject.getEvents().size());
        return locationObject;
    }       
    return null; 
```

然后我的logcat是[这样的](http://pastie.org/5170336)

但是如果我将此代码用于相同的 JSON

```
 String response = ConnectionManager.doGet(mAuthType, url, authToken);
    FLog.d("location object response" + response);
    SimpleModule module = new SimpleModule("UserModule", new Version(1, 0, 0, null, null, null));
    JsonDeserializer<User> userDeserializer = new Deserializer<User>().getDeserializer(User.class);

    module.addDeserializer(User.class, userDeserializer);
    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(module);
    JsonNode tree = mapper.readTree(response);
    Integer code = Integer.parseInt(tree.get("code").asText().trim());

    if(Constants.API_RESPONSE_SUCCESS_CODE == code) {
        ExploreLocationObject locationObject = mapper.convertValue(tree.path("response").get("locationObject"), ExploreLocationObject.class);
        FLog.d("locationObject" + locationObject);
        FLog.d("locationObject events" + locationObject.getEvents().size());
        return locationObject;
    }       
    return null; 
```

然后我的logcat是[这样的](http://pastie.org/5170352)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:52:46.980

物体有多大？代码基本上构建了一个树模型（某种 dom 树），这将占用原始文档的 3 到 5 倍的内存。所以我假设你的输入是一个巨大的 JSON 文档。

您绝对可以使用 Streaming API 编写更高效的版本。就像是：

```
JsonParser jp = mapper.getJsonFactory().createJsonParser(input);
JsonToken t = jp.nextToken();
if (t == JsonToken.START_OBJECT) {
   return mapper.readValue(jp, classToBindTo);
}
return null; 
```

也可以使用数据绑定（as `JsonDeserializer`）来实现这一点，但是仅仅因为您想委托给“默认”反序列化器，它就会变得有点复杂。为此，您需要实现`BeanDeserializerModifier`并在调用“modifyDeserializer”时替换标准反序列化器：您自己的代码可以保留对原始反序列化器的引用并委托给它，而不是使用中间树模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:06:15.430

如果您不依赖杰克逊，您也可以尝试 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)。在您的情况下，有两个主要优点：您不会失去性能，它应该更容易实现。如果属性事件不以大写字母开头，则使用 @JsonProperty("Event") 对其进行注释（其他以大写字母开头的属性也是如此）。使用以下代码，您应该完成：

```
Genson genson = new Genson.Builder()
            .withDeserializerFactory(new EventDeserializerFactory()).create();

YourRootClass[] bean = genson.deserialize(json, YourRootClass[].class);

class EventDeserializerFactory implements Factory<Deserializer<Event>> {

    public Deserializer<Event> create(Type type, Genson genson) {
        return new EventDeserializer(genson.getBeanDescriptorFactory().provide(Event.class,
                genson));
    }

}

class EventDeserializer implements Deserializer<Event> {
    private final Deserializer<Event> standardEventDeserializer;

    public EventDeserializer(Deserializer<Event> standardEventDeserializer) {
        this.standardEventDeserializer = standardEventDeserializer;
    }

    public Event deserialize(ObjectReader reader, Context ctx) throws TransformationException,
            IOException {
        if (ValueType.ARRAY == reader.getValueType()) {
            reader.beginArray().endArray();
            return null;
        }
        return standardEventDeserializer.deserialize(reader, ctx);
    }
} 
```

# php - 在字符串中搜索以查找带有 preg 匹配所有和正则表达式的单词

> ID：13175422
> 
> 赞同：1
> 
> 时间：2012-11-01T10:46:30.453
> 
> 标签：php, search, preg-match-all

我正在尝试编写一个搜索函数来搜索字符串并找到单词

例如像 php + mysql

```
Select * From Column Where ID Like %Word% 
```

我试图用 Preg match all 和 regex 编写相同的想法

这是我的代码

```
$strings = '
( monstername 205 "Devil Troop of Desire")
( monstername 206 "  Devil Troop of Pain     "  )
( monstername 207       "Devil Troop of Greed")
( monstername 208   "       Devil Troop of Jealousy  ")
( monstername 207 "Mask Troop of Greed"  )';

preg_match_all('/monstername\s*(.*?)\s*\"\s*\\b(Jealousy)\b\s*\"\s*\)/i', $strings, $matches, PREG_SET_ORDER);
foreach ($matches as $match){list (, $MonsterNumber) = $match;
echo "$MonsterNumber";
} 
```

输出应该是

```
208 
```

但它没有正确显示输出

当我用嫉妒**的恶魔部队替换****嫉妒**时它会显示它

 **我只想对php + mysql做同样的想法

其中 ID Like %Word%

没有给出完整的字符串来查找怪物的数量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:53:25.573

该部分`"\s*\\b(Jea`不允许在引号和单词开头之间使用空格以外的其他字符。您可能想要它们之间的任何字符（甚至没有？），就像`".*\\b(Jea`单词后面的相同问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:56:35.327

您必须更好地定义要搜索的内容：在 Jealousy 之前和之后，您可能有空格/非空格、非引号字符。

```
preg_match_all('/\( monstername\s*(\d+)\s*"\s*([^"]*\bJealousy\b[^"]*)\s*"\s*\)/i',
$strings, $matches, PREG_SET_ORDER); 
```

或者在搜索脚本中使用，

```
preg_match_all('/\( monstername\s*(\d+)\s*"\s*([^"]*(Jealousy)[^"]*)\s*"\s*\)/i',
$strings, $matches, PREG_SET_ORDER); 
```

对于每个匹配的怪物，它将返回匹配的行、怪物编号、怪物名称和匹配的模式：

```
Array
(
    [0] => Array
        (
            [0] => ( monstername 208   "       Devil Troop of Jealousy  ")
            [1] => 208
            [2] => Devil Troop of Jealousy
            [3] => Jealousy
        )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:04:37.220

好吧，如果您只想将怪物编号作为输出，则此正则表达式仅匹配该编号，并且由于前瞻和后视，它周围没有任何内容：

```
/(?<=monstername\s)\d+(?=.*Jealousy.*)/i 
```

但是这样一来，“怪物名”和数字之间只能有一个空格字符。**

# c++ - 当我使用 C++ win32 API 单击确定按钮时，如何隐藏当前窗口？

> ID：13175424
> 
> 赞同：0
> 
> 时间：2012-11-01T10:46:46.713
> 
> 标签：c++, windows, winapi, dialog

我正在使用 C++ win32 API ...

我有一个窗口（对话框），那个窗口有一些按钮......

如果，我输入其中一个确定按钮，将出现一个消息框...

那时，我想隐藏背景窗口（对话框）......

我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:04:01.240

您可以使用`ShowWindow(handle, SW_HIDE);`- 请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:04:01.273

您需要将 SW_HIDE 传递给您的对话框

# ruby-on-rails - 无论何时：找不到命令

> ID：13175425
> 
> 赞同：4
> 
> 时间：2012-11-01T10:46:49.337
> 
> 标签：ruby-on-rails, ruby, rubygems

我在我的机器上设置了 RVM，并在我的机器上安装了“whenever” gem 来运行 cron 作业。当我尝试执行命令时：

```
 whenever --update-crontab store 
```

我收到此错误：

```
-bash: whenever: command not found 
```

我认为存在路径问题。请帮帮我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-25T12:23:45.480

如果 gemfile 已经完成 gem 和 bundle install ，则使用 bundle exec 作为正确的上下文。

```
bundle exec gem list whenever
bundle exec whenever <command> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:12:33.047

command not found 只是告诉您 gem 不存在。所以最好打印出所有当前安装的 gem。

```
gem list | grep whenever 
```

如果结果中没有它，请确保您在正确的 gemset 中（也许您在其他 gemset 中安装了 gem）。

```
rvm gemset list 
```

如果您发现另一个宝石组应该是正确的，那么

```
rvm gemset use [gemset_name] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-15T18:16:38.897

现在是 2019 年，但我今天遇到了同样的错误。这就是为我解决的问题：

```
gem update --system 
```

# cakephp - 在 CakePHP 的存在注册表中添加换行符

> ID：13175426
> 
> 赞同：0
> 
> 时间：2012-11-01T10:46:50.593
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我不知道这个问题是不是很愚蠢，但是......

如何将换行符添加到数据库注册表？我只想在编辑或添加表单中向用户显示的输入之后添加一个换行符。

例如：

```
//edit view
echo $this->Form->input('reply_above'); 
```

我想发送一封包含一些信息的邮件，这个字符串应该在顶部与邮件的其余部分分开，并用换行符分隔。

我在控制器中的编辑操作中尝试过这个：

```
$this->request->data['Setting']['reply_separator'].= '<br />'; 
```

但是，当我使用邮件功能时，它会显示`<br />`而不是打印它。（我真的不想以 HTML 格式发送邮件）

存储在数据库中的文本不使用`<br />`换行符。他们用什么代替？我也尝试过`\n`，但它也不起作用。

谢谢。

# 更新

在保存数据之前，我可以在编辑控制器中添加一个新行：

```
$this->request->data['Setting']['reply_separator'].="               
"; 
```

但它看起来确实不是一个好的解决方案，而且我不能用这种方法添加多个换行符。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:51:00.443

这是你的换行符：`"\n"`.

编辑：一定要使用双引号而不是单引号。

# html - 有时上传文件会失败 - 检查此用户代理字符串

> ID：13175437
> 
> 赞同：1
> 
> 时间：2012-11-01T10:47:42.283
> 
> 标签：html, http, file-upload, user-agent

我正在开发一个允许用户上传文档的网络应用程序。对于大多数用户来说它运行良好，但对于少数 (2-5%) 用户来说，上传不起作用。我听到的是上传并没有完成，它会一直上传——即使对于像 100Kb 这样的小文件也是如此。

实际的上传页面可以在此处的第 2 步下看到： [我的上传页面示例](https://www.jobmatchprofile.com/backend/login.aspx?auto_login=TST4A4&language=ENU)

我自己从未见过这个问题，也无法重新创建它（在 IE、Chrome、FF 和 Safari 的许多版本中进行了测试）。不确定它甚至与浏览器版本有关。我所拥有的是一位遇到问题的用户

```
(Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; FunWebProducts; BTRS31753; GTB7.4; .NET CLR 1.1.4322)) 
```

我如何解释这一点，猜测它是 IE7，但我还能抽出什么，并且这里的任何内容都表明存在问题。

# r - 具有 2 个值的定性调色板的 ggplot2 和 RcolorBrewer

> ID：13175440
> 
> 赞同：2
> 
> 时间：2012-11-01T10:47:45.987
> 
> 标签：r, colors, ggplot2

我使用 RColorBrewer 在 ggplot2 中设置颜色。我写了一个函数，并在同一张图表上叠加了 1 到 4 行。为了设置我使用的颜色：

```
scale_color_brewer(type="qual", palette="Set1") 
```

根据手册“对于定性调色板，可用的不同值的最低数量始终为 3”，因此当行数等于 1 或 2 时，我会收到警告消息。有什么 claver 技巧可以应付吗？

罗伯特

@Ben Bolker：您绝对正确，在许多情况下必须提交一个可重现的示例，尽管这里没有必要。因为我的原始函数很长，所以我准备了简单的例子来说明问题。

```
library("datasets")
library("ggplot2")

set.seed(1367)
y <- log10(lynx)
y.estim <- y + rnorm(length(y), sd=0.2)
mydf <- data.frame(time=1:length(y), y, y.estim) 
mydf <- melt(mydf, id="time")

p <- ggplot(mydf, aes(x=time, y=value, color=variable))
p + geom_line() + geom_point(size=2) + theme_bw() +
   scale_color_brewer(type="qual", palette="Set1") #here is a problem 
```

也许我可以直接指定颜色。我知道

```
library("RColorBrewer")
> brewer.pal(4, "Set1")
[1] "#E41A1C" "#377EB8" "#4DAF4A" "#984EA3" 
```

是否可以使用例如“#E41A1C”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:31:14.163

正如@mnel 建议的那样，将语句包装在显式`print`语句中似乎可行：

```
suppressWarnings(print(p + geom_line() + geom_point(size=2) + theme_bw() +
     scale_color_brewer(type="qual", palette="Set1"))) 
```

会话信息：

```
> sessionInfo()
R Under development (unstable) (2012-10-14 r60940)
Platform: i686-pc-linux-gnu (32-bit)

[snip]

other attached packages:
[1] reshape2_1.2.1  ggplot2_0.9.2.1 
```

* * *

编辑 - @mnel

您可以重新定义`print.ggplot`以自动执行此操作。我不知道这是否会导致环境（`parent.frame`问题）

```
print.ggplot <- function(..., warnings = getOption('ggplot_warning', default = TRUE)){
  if(warnings){
    ggplot2:::print.ggplot(...))} else { 
     suppressWarnings(ggplot2:::print.ggplot(...))
   }
  } 
```

因此，如果您想将 ggplot 打印的所有警告设置为关闭，您只需设置

```
options(ggplot_warning = FALSE) 
```

否则它应该正常运行。

# c# - 如何以pdf格式通过电子邮件发送水晶报告

> ID：13175444
> 
> 赞同：2
> 
> 时间：2012-11-01T10:47:50.543
> 
> 标签：c#, crystal-reports

我是新来的，这是我的第一篇文章，如果有任何错误请原谅我，请告诉我，我会纠正它。我的问题是我需要通过电子邮件将水晶报告发送到特定收件人的电子邮件地址，该电子邮件地址也将包含在水晶报告中，并且水晶报告需要为 PDF 格式，这可能吗，如果可以，请详细说明如何做。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:51:47.797

```
string pdfFile = "c:\\CrytalReport.pdf";

protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            ExportOptions CrExportOptions;
            DiskFileDestinationOptions CrDiskFileDestinationOptions = new DiskFileDestinationOptions();
            PdfRtfWordFormatOptions CrFormatTypeOptions = new PdfRtfWordFormatOptions();
            CrDiskFileDestinationOptions.DiskFileName = pdfFile;
            CrExportOptions = ReportDocument .ExportOptions;//Report document  object has to be given here
            CrExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
            CrExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;
            CrExportOptions.DestinationOptions = CrDiskFileDestinationOptions;
            CrExportOptions.FormatOptions = CrFormatTypeOptions;
            ReportDocument .Export();

            sendmail();
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.ToString());
        }

    }
    private void sendmail()
    {
        try
        {

            MailMessage Msg = new MailMessage();
            Msg.To = "to Address";
            Msg.From = "From Address";
            Msg.Subject = "Crystal Report Attachment ";
            Msg.Body = "Crystal Report Attachment ";
            Msg.Attachments.Add(new MailAttachment(pdfFile));
           // System.Web.Mail.SmtpMail.Send(Msg);

            SmtpMail.SmtpServer = "you mail domain";
            //SmtpMail.SmtpServer.Insert(0,"127.0.0.1");

            SmtpMail.Send(Msg);
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.ToString());
        }
    } 
```

不要忘记添加这些 DLL

```
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:56:31.430

```
private void SetReportDataSource(string sCarrierID)
    {
        try
        {
            CrystalReport objCrystalReport = new CrystalReport();

            //ReportDocument objReportDoc = new ReportDocument();

            ConnectionInfo objConnInfo = new ConnectionInfo();

            //string strConn = System.Configuration.ConfigurationSettings.AppSettings[Campaign];

            string[] strArray = objCrystalReport.GetCampaignConn();

            CrystalDecisions.Shared.TableLogOnInfo logOnInfo = new CrystalDecisions.Shared.TableLogOnInfo();

            objConnInfo.DatabaseName = strArray[1].ToString();
            objConnInfo.UserID = strArray[2].ToString();
            objConnInfo.Password = strArray[3].ToString();
            objConnInfo.ServerName = strArray[0].ToString();

            String ReportPath = (Server.MapPath("Report") + @"\rptInvoice.rpt");

            //String ReportPath = Server.MapPath("~//Report//VendorRegistration.rpt");

            //objReportDoc = objCrystalReport.CrystalLogon(ReportPath, objConnInfo, ref logOnInfo);

            //// for displaying Crystal report

            //crVendorRegistration.ReportSource = objReportDoc;

            //crVendorRegistration.ParameterFieldInfo[0].CurrentValues.Clear();

            ParameterDiscreteValue pdvalue = new ParameterDiscreteValue();

            pdvalue.Value = Convert.ToInt32(sCarrierID);

            //crVendorRegistration.ParameterFieldInfo[0].CurrentValues.Add(pdvalue);

            //crVendorRegistration.DataBind();

            //// for Exporitng in PDF
            ReportDocument repDoc = objCrystalReport.CrystalLogon(ReportPath, objConnInfo, ref logOnInfo);

            repDoc.ParameterFields[0].CurrentValues.Add(pdvalue);

            // Stop buffering the response
            HttpContext.Current.Response.Buffer = false;
            // Clear the response content and headers
            HttpContext.Current.Response.ClearContent();
            HttpContext.Current.Response.ClearHeaders();

            // Export the Report to Response stream in PDF format and file name Customers
            //repDoc.ExportToHttpResponse(ExportFormatType.PortableDocFormat, HttpContext.Current.Response, true, "Truck Invoice " + sCarrierID + "");
            //repDoc.GenerateReport

            String ReportGenerated = (Server.MapPath("GenerateReport") + @"\rptInvoice" + sCarrierID + ".pdf");
            // There are other format options available such as Word, Excel, CVS, and HTML in the ExportFormatType Enum given by crystal reports

            ExportOptions CrExportOptions = new ExportOptions();

            DiskFileDestinationOptions CrDiskFileDestinationOptions = new DiskFileDestinationOptions();

            PdfRtfWordFormatOptions CrFormatTypeOptions = new PdfRtfWordFormatOptions();

            CrDiskFileDestinationOptions.DiskFileName = ReportGenerated;

            CrExportOptions = repDoc.ExportOptions;

            CrExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;

            CrExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;

            CrExportOptions.DestinationOptions = CrDiskFileDestinationOptions;

            CrExportOptions.FormatOptions = CrFormatTypeOptions;

            repDoc.Export(CrExportOptions);

            //pdvalue = new ParameterDiscreteValue();

            //pdvalue.Value = QC_By;

            //crSalesRpt.ParameterFieldInfo[1].CurrentValues.Add(pdvalue);

            //objReportDoc.VerifyDatabase();
            //objReportDoc.Refresh();
        }
        catch (Exception ex)
        {
            //bool rethrow = ExceptionPolicy.HandleException(ex, "");

            //if (rethrow)
            //    throw;

            //Redirecting to error message page
            //Server.Transfer(ConstantClass.StrErrorPageURL);
        }
    } 
```

通过上面你使用水晶报告创建pdf通过使用邮件概念你将发送邮件就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:52:51.010

```
using System;
using System.Data;
using System.Configuration;

using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;

using CrystalDecisions.Shared;
using CrystalDecisions.CrystalReports.Engine;

/// <summary>
/// Summary description for CrystalReport
/// </summary>
'public class CrystalReport
{

    private void SetDBLogOnInfo(ConnectionInfo connectionInfo, ReportDocument objectReportDocument, TableLogOnInfo tableLogonInfo)
    {

        Tables Tbl = objectReportDocument.Database.Tables;

        foreach (CrystalDecisions.CrystalReports.Engine.Table TmpTbl in Tbl)
        {

            tableLogonInfo = TmpTbl.LogOnInfo;

            tableLogonInfo.ConnectionInfo = connectionInfo;

            TmpTbl.ApplyLogOnInfo(tableLogonInfo);
        }
    }

    public ReportDocument CrystalLogon(String pReportPath, ConnectionInfo objConnInfo, ref TableLogOnInfo tableLogonInfo)
    {

        ReportDocument objReportDoc = new ReportDocument();

        objReportDoc.Load(pReportPath);

        SetDBLogOnInfo(objConnInfo, objReportDoc, tableLogonInfo);

        return objReportDoc;

    }

    public string[] GetCampaignConn()
    {
        //string server, database, userid, password;
        string strConn = System.Configuration.ConfigurationSettings.AppSettings["Connection String"];
        string[] strArray = strConn.Split(';');

        string[] strOutput = new string[4];

        for (int i = 0; i < strArray.Length; i++)
        {
            string[] strObject = strArray[i].Split('=');

            if (strObject[0] == "Data Source")
            {
                strOutput[0] = strObject[1];
            }
            else if (strObject[0] == "Initial Catalog")
            {
                strOutput[1] = strObject[1];
            }
            else if (strObject[0] == "User ID")
            {
                strOutput[2] = strObject[1];
            }
            else if (strObject[0] == "Password")
            {
                strOutput[3] = strObject[1];
            }
        }

        return strOutput;
    }
}` 
```

使用上面的方法你会解决问题

# search - 谷歌从抓取的页面中提取了哪些信息？

> ID：13175445
> 
> 赞同：0
> 
> 时间：2012-11-01T10:48:00.407
> 
> 标签：search, search-engine, scrape, web-crawler

谷歌通过抓取下载整个页面，然后抓取一些数据来创建索引，如标题、元标记？

谷歌从页面中提取的其他数据点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:40:16.953

从谷歌创始人的[这篇](http://infolab.stanford.edu/~backrub/google.html)古老而经典的论文中：

系统功能包括：

*   超链接（用于计算 pagerank）
*   锚文本
*   视觉呈现细节，例如单词的字体大小
*   存储库中提供了页面的完整原始 HTML

有关信息检索目的处理的更多信息，另请参阅[此内容。](http://www.prodigalwebmaster.com/2011/10/how-does-google-detect-duplicate-content/)

# c# - 如果接口在不同的程序集中，SimpleIoc.Default.Register 在 IsInDesignModeStatic 失败

> ID：13175446
> 
> 赞同：3
> 
> 时间：2012-11-01T10:48:03.763
> 
> 标签：c#, mvvm-light

如果接口在不同的项目中，则在`ViewModelLocator`类的静态构造函数中`SimpleIoc.Default.Register<T>();`失败模式。`IsInDesignModeStatic`结果，`MainWindow.xaml`设计器在设计时是空的。

我做了一个简单的解决方案来测试它。我所做的唯一更改是将`DataItem`类和`IDataService`接口移动到域项目中。

[在这里下载](https://docs.google.com/open?id=0Bwuu6nkfIcBHdUxEYmpWQ1RxWTg)

**我找到了一个解决方法：**在 ClientWpf 项目中添加指向 IDataService.cs 的链接。

```
public class ViewModelLocator {
    static ViewModelLocator() {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        if (ViewModelBase.IsInDesignModeStatic) {

            // It fails if the IDataService is in different assembly
            // Delete the link of IDataService.cs from the ViewModel folder...
            SimpleIoc.Default.Register<IDataService, Design.DesignDataService>();
        }
        else {
            SimpleIoc.Default.Register<IDataService, DataService>();
        }

        SimpleIoc.Default.Register<MainViewModel>();
    }
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:04:57.743

```
 if (ViewModelBase.IsInDesignModeStatic) {

        // put these lines here:
        if (SimpleIoc.Default.IsRegistered<IDataService>()) {
            SimpleIoc.Default.Unregister<IDataService>();
        }

        SimpleIoc.Default.Register<IDataService, Design.DesignDataService>();
    }
    else {
        SimpleIoc.Default.Register<IDataService, DataService>();
    } 
```

# android - 从 HTML 数据中检测标签的点击？

> ID：13175456
> 
> 赞同：0
> 
> 时间：2012-11-01T10:48:56.767
> 
> 标签：android, android-webview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:52:44.883

# jquery - 尝试使用 jQuery 获取 css 左悬停属性

> ID：13175457
> 
> 赞同：0
> 
> 时间：2012-11-01T10:49:01.673
> 
> 标签：jquery, css, properties, hover

我试图使用 jQuery 获取 left 属性，其中 css 写为

```
#sldn_mnu li:hover ul ul {left:-6000;} 
```

下面是我的警报，它输出（-7000），它是左道具。这种风格：#sldn_mnu ul ul {left:-7000;}。有任何想法吗？谢谢。

```
alert($('#sldn_mnu li').hover().find('ul ul').css('left')); 
```

**相关 html：** 我正在尝试与辅助 <ul> 项目 1.1.1 下拉列表交谈。

```
<div id="sldn_mnu">
    <ul>
    <li><a href="#">HELLO</a></li>
    <li class="sldn_mnu-drop"><a href="#" ><span class="sldn_mnu-label">WORK</span></a>
        <ul>
          <li class="sldn_mnu-subDrop"><a href="#">Item 1.1</a>
            <ul>
              <li><a href="#" >Item 1.1.1</a></li>
              <li><a href="#" >Item 1.1.2</a></li>
            </ul>
          </li>
          <li><a href="#" >Item 1.2</a></li>
          <li><a href="#" >Item 1.3</a></li>
        </ul>
      </li>
      <li><a href="#" >Item 2</a>
        <ul>
          <li><a href="#" >Item 2.1</a></li>
          <li><a href="#" >Item 2.2</a></li>
          <li><a href="#" >Item 2.3</a></li>
        </ul>
      </li>
      <li><a href="#">Item 3</a></li>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:07:19.423

如果 CSS 来自样式表（并且伪类总是这样做，因为您不能将它们内联添加），则不能使用纯 jQuery 来检索它。

相反，您需要查看`document.styleSheets`.

以下代码改编自此[答案](https://stackoverflow.com/a/324533/206614)。它遍历所有样式表并寻找匹配的 CSS 规则。

[工作演示在这里。](http://jsfiddle.net/jfrej/dYH84/1/)

```
function getStyle(selector) {
    for(var y=0;y<document.styleSheets.length;y++){
        var classes = document.styleSheets[y].rules || document.styleSheets[y].cssRules
        for(var x=0;x<classes.length;x++) {
            if(classes[x].selectorText.match(selector)) {
                    (classes[x].cssText) ? alert(classes[x].cssText) : alert(classes[x].style.cssText);
            }
        }
    }
}

getStyle(/sldn_mnu.*hover/); 
```

请注意，我调整了函数以使用正则表达式匹配而不是简单的字符串比较。

而不是警报，您可能希望在第一次匹配后返回，或者可能返回所有匹配的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:11:43.793

您可以做的是覆盖“悬停”事件并在那里执行您的操作，例如：

JS：

```
$('#sldn_mnu li').bind('hover',function(e){
  //console.log($(this).find('ul ul').css('left'));
  alert($(this).find('ul ul').css('left'));
});​ 
```

但是，如果您向`<ul>`要询问的CSS 类添加一个 CSS 类会更简单`left`，那么您可以只写：

```
console.log($(this).find('ul.<your_ul_css_class>').css('left')); 
```

另一个简化是添加一个 css 类来`<li>`触发计算，那么所有这些都可能是这样的：

```
$('li.<your_li_css_class>').bind('hover',function(e){
  console.log($(this).find('ul.<your_ul_css_class>').css('left'));
});​ 
```

# android - 在 android 上使用 twitter4j 客户端推多张图片

> ID：13175458
> 
> 赞同：2
> 
> 时间：2012-11-01T10:49:11.023
> 
> 标签：android, twitter, twitter4j

我可以使用 twitter4j lib for android 推单个图片，但无法一次推多个图片。这是我的代码，它适用于上传单个图片，但对于多次上传显示此错误 -

```
11-01 16:23:41.250: W/System.err(12682): upload.twitter.comRelevant discussions can be     on the Internet at:
11-01 16:23:41.250: W/System.err(12682):    http://www.google.co.jp/search?q=b2b52c28 or
11-01 16:23:41.250: W/System.err(12682):    http://www.google.co.jp/search?q=19d05107
11-01 16:23:41.250: W/System.err(12682): TwitterException{exceptionCode=[b2b52c28-19d05107 b2b52c28-19d050b8], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.6-SNAPSHOT(build: 2a63ef13662e7cd135321926d315f91681d90ced)}
11-01 16:23:41.250: W/System.err(12682):    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:200)
 11-01 16:23:41.250: W/System.err(12682):   at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
 11-01 16:23:41.250: W/System.err(12682):   at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
 11-01 16:23:41.250: W/System.err(12682):   at twitter4j.TwitterImpl.post(TwitterImpl.java:1762)
11-01 16:23:41.250: W/System.err(12682):    at twitter4j.TwitterImpl.updateStatus(TwitterImpl.java:412)
 11-01 16:23:41.250: W/System.err(12682):   at com.app.cakemaker2.TwitterWebViewActivity.loginAuthorisedUser(TwitterWebViewActivity.java:118)
 11-01 16:23:41.250: W/System.err(12682):   at com.app.cakemaker2.TwitterWebViewActivity.twt_works(TwitterWebViewActivity.java:80)
11-01 16:23:41.250: W/System.err(12682):    at com.app.cakemaker2.TwitterWebViewActivity.onCreate(TwitterWebViewActivity.java:73)
 11-01 16:23:41.250: W/System.err(12682):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 11-01 16:23:41.250: W/System.err(12682):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
 11-01 16:23:41.250: W/System.err(12682):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-01 16:23:41.250: W/System.err(12682):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
 11-01 16:23:41.250: W/System.err(12682):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
 11-01 16:23:41.250: W/System.err(12682):   at android.os.Handler.dispatchMessage(Handler.java:99)
 11-01 16:23:41.250: W/System.err(12682):   at android.os.Looper.loop(Looper.java:130)
 11-01 16:23:41.250: W/System.err(12682):   at android.app.ActivityThread.main(ActivityThread.java:3691)
 11-01 16:23:41.250: W/System.err(12682):   at java.lang.reflect.Method.invokeNative(Native Method)
11-01 16:23:41.250: W/System.err(12682):    at java.lang.reflect.Method.invoke(Method.java:507)
11-01 16:23:41.250: W/System.err(12682):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
 11-01 16:23:41.250: W/System.err(12682):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
 11-01 16:23:41.250: W/System.err(12682):   at dalvik.system.NativeStart.main(Native Method)
 11-01 16:23:41.250: W/System.err(12682): Caused by: java.net.UnknownHostException: upload.twitter.com
  11-01 16:23:41.260: W/System.err(12682):  at java.net.InetAddress.lookupHostByName(InetAddress.java:497)
 11-01 16:23:41.260: W/System.err(12682):   at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
11-01 16:23:41.260: W/System.err(12682):    at java.net.InetAddress.getAllByName(InetAddress.java:256)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
 11-01 16:23:41.260: W/System.err(12682):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
 11-01 16:23:41.260: W/System.err(12682):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
11-01 16:23:41.260: W/System.err(12682):    at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:614)
11-01 16:23:41.260: W/System.err(12682):    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:121)
11-01 16:23:41.260: W/System.err(12682):    ... 20 more 
```

我的代码

```
/**
 * here is uploading works
 */
private void loginAuthorisedUser() {
    count = 0;

    for (i = 0; i < images_to_handle.size(); i++) {

        String token = mPrefs.getString(PREF_ACCESS_TOKEN, null);
        String secret = mPrefs.getString(PREF_ACCESS_TOKEN_SECRET, null);

        AccessToken at = new AccessToken(token, secret);

        mTwitter.setOAuthAccessToken(at);

        StatusUpdate status = new StatusUpdate(""+getResources().getString(R.string.mail_subject));
        String FILENAME = "cake buffet" + count;

        Bitmap bitmap = BitmapFactory.decodeFile(db_cake.fetchImagePath(images_to_handle.get(i)));
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 0, stream);
        byte[] imageInByte = stream.toByteArray();

        ByteArrayInputStream bis = new ByteArrayInputStream(imageInByte);

        status.setMedia(FILENAME, bis);

        try {

            mTwitter.updateStatus(status);
            Toast.makeText(this, "Tweet Successful!", Toast.LENGTH_SHORT)
                    .show();

            count++;

            Log.i("count", ""+count);

        } 
        catch (TwitterException e) {
            e.printStackTrace();
            Toast.makeText(this, "oh no!! twit error" + e.getMessage(), Toast.LENGTH_SHORT)
                    .show();

        }
    }

} 
```

好吧...知道是什么问题...

# javascript - 数据数组中的特定元素

> ID：13175459
> 
> 赞同：0
> 
> 时间：2012-11-01T10:49:26.293
> 
> 标签：javascript, arrays, mouseevent, d3.js, attr

所以我的问题有两个。让我说我对 d3 和 javascript 很陌生，如果我的问题看起来很简单，请原谅我。

首先，我用我的数据创建一个数组，如下所示：

```
 var data=[
{
    "atomic_number": "1",
    "name": "H",
    "en": "2.2",
    "type": "non-metal"
},
{
    "atomic_number": "3",
    "name": "Li",
    "en": "1",
    "type": "metal"
}
  ] 
```

我还创建了一个 svg 画布：

<svg id =“画布”xmlns =“链接”版本=“1.1”>

所以我对 d3 执行以下操作：

```
 var selection=canvas.selectAll("circle")
                .data(data_var)

            selection.enter().append("circle")

             selection
                .transition().duration(800)
                    .attr("id", d.name) 
```

我的第一个问题是，通过 attr("id", d.name") 给我的数据数组中的每个元素一个 id 是否合法/可以？如果不是，我将如何给每个元素元素自己的ID？

我的第二个问题有两个部分：

a-假设我正确地为每个元素应用了一个 id，我以后如何访问所述元素？我可以只做 var my_var = d3.select("#id") 吗？因为我试过这样做，但似乎没有用。我是否必须以某种方式将其从我的数据数组中取出？

b-假设我的数据数组中的所有元素在屏幕上显示为圆圈。我该如何做到这一点，以便如果我单击其中一个，将调用一个将在该特定元素/圆上运行的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:10:24.280

第一个问题：您正在做的事情几乎没有问题，但是您提出问题的方式似乎表明您需要对正在发生的事情进行一些澄清。

首先，您需要区分数据元素和元素的图形表示。当您进行选择（并使用 data() 调用将其绑定到数据）时，您实际上选择了绑定数据的*图形*表示，在您的情况下是 svg:circle 元素。

这里有点奇怪的是您对选择的过渡调用。这是错误的，而且很奇怪。这很奇怪，因为您正在更改非可视属性并为此使用过渡，我不明白您为什么要这样做。其次，要访问绑定到元素的数据是错误的，您需要传入这样的函数：

```
 .attr("id", function(d) { return d.name;} ) 
```

我会重写你的代码如下：

```
var data = ...;
var selection = canvas.selectAll("circle").data(data);
selection.enter()
  .append("circle")
  ... // Don't forget the attributes that actually set the size/pos of the circle
  .attr("id", function(d) { return d.name; } ) 
```

第二个问题：

a) 是的，您确实可以通过 id 访问喜欢的元素，但由于我在上一节中指出的错误，它对您不起作用。但是，在许多情况下，不需要访问单个元素。我不确定你想对单个元素做什么，所以如果你能详细说明的话。

b）您必须安装事件处理程序：

```
selection.enter()
  .append("circle")
  ....
  .on("click", function() { console.log("I was clicked"); }); 
```

# ios - 将 UISearchBar 锁定到 UITableView 的顶部

> ID：13175462
> 
> 赞同：4
> 
> 时间：2012-11-01T10:49:36.623
> 
> 标签：ios, uitableview, ios6, uisearchbar, tableheader

我想得到这样的行为：我有一个 UISearchBar，它是我的 tableview 的表头视图。滚动表格时，搜索栏确实会移动，但如果您在表格边界上方滚动，搜索栏将永远不会停止接触导航栏。

我在这里找到了一个很好的答案 -[将 UISearchBar 锁定到像 Game Center 这样的 UITableView 的顶部](https://stackoverflow.com/questions/4870085/locking-a-uisearchbar-to-the-top-of-a-uitableview-like-game-center) 但它不适用于 iOS 6 - 使用表格视图标题框架进行操作不起作用

这可能是什么原因？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:24:15.570

我找到了一个适用于 iOS 6 及更低版本的解决方案

创建 UITableView 的子类并覆盖**`layoutSubviews`**方法

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    CGRect rect = self.tableHeaderView.frame;
    rect.origin.y = MIN(0, self.contentOffset.y);
    self.tableHeaderView.frame = rect;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:16:02.110

如果您使用以下内容：

```
[_tableView setTableHeaderView:_searchBar]; 
```

当您将表格视图滚动到第一行之外时，搜索栏也应该消失而不是停留在视图的顶部。

在没有看到您的代码的情况下，我只能假设您添加了`UISearchBar`作为节标题而不是表标题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T14:12:13.703

那是因为iOS6 sdk在滚动时没有更新，也许同样优化。所以滚动时需要调用tableview layoutSubviews。

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView 
{
    UISearchBar *searchBar = searchDisplayController.searchBar;
    CGRect rect = searchBar.frame;
    rect.origin.y = MIN(0, scrollView.contentOffset.y);
    [scrollView layoutSubviews];
    searchBar.frame = rect;
} 
```

# if-statement - 将 awk 的标准输出设置为“if”的输入

> ID：13175464
> 
> 赞同：1
> 
> 时间：2012-11-01T10:49:41.550
> 
> 标签：if-statement, stdout

作为我脚本的一部分，我需要搜索一些文件，并检查某个列的值是否等于或大于给定数字。

在这个简化的示例中，我想查看第一行第 3 列中的值是否大于 10：

```
head -1 examplefile | awk '{print $3}' | if [?? > 10 ]; then print "YES"; fi 
```

问题是从 awk 调用 stdout（这是我想要的数字）作为 if 命令（??）的输入。

应该很简单，但我想我只是愚蠢......;）

干杯，马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:53:37.487

为什么不将输出设置`awk`为变量？

```
myVar=$(head ... awk '{print $3}') 
```

并在`if`语句中进行测试。

```
if [ $myVar -gt 10 ]; then
    print "YES"
fi 
```

（我认为您将需要`-gt` [操作员](http://tldp.org/LDP/abs/html/comparison-ops.html)）。

或者为什么不使用[awk 的条件语句](http://www.thegeekstuff.com/2010/02/awk-conditional-statements/)并完全避免这种情况？

# html - 最大“src”属性大小的 HTML/XML 限制

> ID：13175467
> 
> 赞同：2
> 
> 时间：2012-11-01T10:49:51.323
> 
> 标签：html, xml, xhtml

> **可能重复：**
> [URL 的最大长度是多少？](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)

HTML/XML 中说 img“src”路径的最大限制是多少？我可以查看的任何规范中都提到了这一点吗？例如，以下 img 标签是我特别关心的：

img class="frame-1" **src="image/Blue%20hills12345678012345678.jpg"** alt="Blue%20hills123456780123456789012345678901234567891111aa.jpg"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:54:01.700

根据 HTML 规范，该`src`属性包含一个 URI（通常是 URL）。AFAIK 对 URI 的大小没有标准的最大限制，但请参阅[此答案](https://stackoverflow.com/a/417184/166749)以了解一些实际限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:58:15.897

规范不限制 URL 的大小，但浏览器会。

旧版本的 Internet Explorer 的限制最短，约为 2048 个字符。

# php - 如何在选择标签的 onchange 事件上更改选择标签的值。html

> ID：13175469
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:49:58.697
> 
> 标签：php, javascript, html

我需要检查选择标签的值何时更改，如果它等于说“NA”，如果是这样，它需要将另一个选择标签的值更改为不同的值并或禁用它？

我正在使用 php。如果php中有办法让我知道。请

```
<html>
<center>
<title>Testing</title>
<head>
<script>
function closeWin()
{
alert('Posted');
window.open('', '_self', '');
    window.close();
}
//Function to test value and change value
function value()
{
if (Question4DDL == 'NA')
{
Question5DDL == 'NA'
}
{

}
</script>
</head>
<form name="input" action="index.php" method="post" >

<body>
<div id="Questions">
<table>
<tr><td>
<div id="Q1">Subscribed to service provider?</div>
</td>
<td>
<select Name="Question1DDL">
   <option value = 'BLANK'></option> 
<option value = 'YES'>YES</option>
    <option value ='NO'>NO</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q2">Which provider are you currently with?</div>
</td>
<td>
<select Name="Question2DDL">
<option value = 'BLANK'></option> 
    <option>t1</option>
    <option>t2</option>
    <option>t3</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q3">Type of dwelling/premisis?</div>
</td>
<td>
<select Name="Question3DDL">
<option value = 'BLANK'></option> 
    <option>CLUSTER</option>
    <option>FLAT</option>
    <option>PLOT</option>
    <option>TOWNHOUSE</option>
    <option>FARM</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q4">Alarm in working order?</div>
</td>
<td>

//select tag in question.
<select Name="Question4DDL" onchange="value()">
<option value = 'BLANK'></option> 
    <option>YES</option>
    <option>NO</option>
    <option value = 'NA'>(N/A) - No Alarm</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q5">Age of alarm?</div>
</td>
<td>
<select Name="Question5DDL">
<option value = 'BLANK'></option> 
    <option>-1</option>
    <option>-3</option>
    <option>+3</option>
</select>

</td>
</tr>
<tr>
<td>
<div id="Q6">Paying more than R350 per month?</div>
</td>
<td>
<select Name="Question6DDL"><option value = 'BLANK'></option> 
    <option>YES</option>
    <option>NO</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q7">Is the prospect in a known response area? (Have they seen sign boards in their area?)</div>
</td>
<td>
<select Name="Question7DDL">
<option value = 'BLANK'></option> 
    <option>YES</option>
    <option>NO</option>
</select>
</td>
</tr>
<tr>
<td>
<div id="Q8">Request site visit from agent?</div>
</td>
<td>
<select Name="Question8DDL">
<option value = 'BLANK'></option> 
    <option>YES</option>
    <option>NO</option>
</select>
</td>
</tr>
<tr>
<td>
</td>
<td>
<textarea name="comments"  rows="5">
</textarea>
</td>
</tr>
<tr>
<td>
</td>
<td>
<input name="sb1" type="submit" value="Submit" onClick="closeWin()">
</td>
</tr>

</table>
</div>
</body>
</form>
</center>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:48:58.833

首先，您会获得用户选择的用户输入。
之后使用该输入，您将使用 if 条件，例如服务提供商是否为是，然后执行 if 循环并显示您要显示的其他选项，否则请按照您将提供的进一步程序。我不知道 PHP，所以在这里我给出描述，否则我会编写首先获取用户输入然后继续的代码。

# join - 连接多个相关表

> ID：13175470
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:02.830
> 
> 标签：join, inner-join, correlation, correlated-subquery

我有 3 个表客户（customerid，name），customerbooking（bookingid，customerid），transact（transacted，bookingid，typeoftransaction）

我想获取具有最大 typeoftransact='current' 的'客户名称'的名称。客户表通过customerid链接到customerbooking，customerbooking通过bookingid链接到transact。使用 join 我可以获取单个记录，但无法获取最大值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:04:14.010

请试试这个来满足你的场景

```
SELECT 
  C.Name
, Count(BookingID) 
FROM Customer C 
INNER JOIN customerbooking CB ON CB.CustomerID = C.customerId
INNER JOIN transact T ON T.bookingid  = CB.BookingId
WHERE T.Typeoftransaction='current'
GROUP BY C.Name 
```

希望这可以帮助

# django - 'Tareas' 对象没有属性 '__fields__'

> ID：13175472
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:05.667
> 
> 标签：django, admin, field

当我尝试访问“tareas”时，应用程序会返回给我，如下所示：

```
 'Tareas' object has no attribute '__fields__'
  Request Method:   GET
  Request URL:  http://localhost:8000/tareas/
  Django Version:   1.4
  Exception Type:   AttributeError
  Exception Value:  
  'Tareas' object has no attribute '__fields__'
  Exception Location:   /Users/Tone/Documents/Proyectos/macrotelecom/common/generic.py in      view_list, line 240 
```

问题出在这一行：

```
if not fields:
    fields=queryset.__dict__['model']().__fields__(profile) 
```

我认为这很奇怪，因为在 admin.py 我为我的对象“Tareas”设置了属性字段：

```
 from tareas.models import Tareas
  from django.contrib import admin

  class TareasAdmin(admin.ModelAdmin):
     fields = ['idtarea','idtipotarea','idagente','fechatarea']
     list_display = ('idtarea','idagente','fechatarea')

admin.site.register(Tareas,TareasAdmin) 
```

该行在此函数“def_view”中定义：

```
 def view_list(request, get_template, **kwargs):
        '''
        Generic list view with validation included and object transfering support
        '''

        # Config
        default_rows_per_page=100

        # Get arguments from the function
        object_id=keyarg('object_id',kwargs,None)
        action=keyarg('action',kwargs,None)
        extra_context=keyarg('extra_context',kwargs,{})
        queryset=keyarg('queryset',kwargs,None)
        restrictions=keyarg('restrictions',kwargs,None)
        permission=keyarg('permission',kwargs,None)
        fields=keyarg('fields',kwargs,None)
        default_ordering=keyarg('default_ordering',kwargs,None)
        compact_rows=keyarg('compact_rows',kwargs,None)

        # Get template and profile
        namesp=str(queryset.__dict__['model']).replace("class ","").replace(">","").replace("<","").replace("'","").split(".")
        appname=namesp[-3].lower()
        modelname=namesp[-1].lower()
        (profile,template_name)=get_template(keyarg('template_name',kwargs,"%s/%s_list.html" % (appname,modelname)))

        # Check permissions
        if (permission is not None) and (not request.user.has_perm(permission)):
            return HttpResponseRedirect('/not_authorized/')

        # Get extra arguments
        extra={}
        for arg in kwargs:
            if arg not in ['object_id','action','template_name','extra_context','queryset','restrictions']:
                extra[arg]=kwargs[arg]

        # Inicialization
        new_extra_context={}
        new_extra_context['now']=epochdate(time.time())
    #    new_extra_context['msglog']=msglog()
        # Restrictions fields
        new_extra_context['filters']=[]
        if restrictions:
            for restriction in restrictions:
                f={}
                f['name']=restriction
                f['value']=extra[restriction]
                new_extra_context['filters'].append(f)

        # Process the filter
        new_extra_context['filters_obj']={}
        new_extra_context['header_loop']=1
        if restrictions:
            queryset_obj={}
            for rname in restrictions:
                # Get name of the field and object
                (rfield,robject)=restrictions[rname]
                # Get the ID
                rid=extra[rname]
                # Save the id in extra_context
                new_extra_context[rname]=rid
                # Save the object in queryset_obj
                queryset_obj[rname]=robject(id=rid)
                # Filter the queryset
                queryset=queryset.filter(eval("Q(%s=queryset_obj['%s'])" % (rfield,rname)))
                new_extra_context['filters_obj'][rname]=get_object_or_404(robject,pk=rid)

        # Get field list
        if not fields:
            fields=queryset.__dict__['model']().__fields__(profile)

        # Save action if we got one
        if action:
            new_extra_context['action']=action
        # Try to convert object_id to a numeric id
        try:
            object_id=int(object_id)
        except:
            pass

        # Save GET values
        new_extra_context['get']=[]
        new_extra_context['getval']={}
        for name in request.GET:
            if name not in ['filtername','filtervalue']:
                struct={}
                struct['name']=name
                if name=='rowsperpage':
                    struct['value']=default_rows_per_page
                elif name=='page':
                    struct['value']=1
                else:
                    struct['value']=request.GET[name]
                new_extra_context['get'].append(struct)
                new_extra_context['getval'][name]=struct['value']

        # Filter on limits
        limits=queryset.__dict__['model']().__limitQ__(profile,request)
        qobjects=None
        for name in limits:
            if qobjects:
                qobjects&=limits[name]
            else:
                qobjects=limits[name]
        if qobjects:
            queryset=queryset.filter(qobjects)

        # Filters on fields
        try:
            filters_by_json=request.GET.get('filters','{}')
            filters_by_struct=json_decode(str(filters_by_json))
        except Exception:
            filters_by_struct=[]
        filtername=request.GET.get('filtername',None)
        filtervalue=request.GET.get('filtervalue',None)
        listfilters=queryset.__dict__['model']().__searchF__(profile)

        # Process the search
        filters_struct={}
        for key in filters_by_struct:
            # Get the value of the original filter
            value=filters_by_struct[key]
            # If there is something to filter, filter is not being changed and filter is known by the class
            if (key!=filtername) and (key in listfilters) and (value>0):
                # Add the filter to the queryset
                f=listfilters[key]
                fv=f[2][value-1][0]
                queryset=queryset.filter(f[1](fv))
                # Save it in the struct as a valid filter
                filters_struct[key]=value

        # Add the requested filter if any
        if (filtername in listfilters) and (int(filtervalue)>0):
            f=listfilters[filtername]
            fv=f[2][int(filtervalue)-1][0]
            queryset=queryset.filter(f[1](fv))
            filters_struct[filtername]=int(filtervalue)

        # Rewrite filters_json updated
        filters_json=json_encode(filters_struct)

        # Build the clean get for filters
        get=new_extra_context['get']
        filters_get=[]
        for element in get:
            if element['name'] not in ['filters']:
                struct={}
                struct['name']=element['name']
                struct['value']=element['value']
                filters_get.append(struct)

        # Add filter_json
        struct={}
        struct['name']='filters'
        struct['value']=filters_json
        filters_get.append(struct)
        new_extra_context['filters_get']=filters_get

        # Get the list of filters allowed by this class
        filters=[]
        for key in listfilters:
            choice=[_('All')]
            for value in listfilters[key][2]:
                choice.append(value[1])

            # Decide the choosen field
            if key in filters_struct.keys():
                choose=int(filters_struct[key])
            else:
                choose=0

            filters.append((key,listfilters[key][0],choice,choose))
        new_extra_context['filters']=filters

        # Search text in all fields
        search=request.GET.get('search','')
        new_extra_context['search']=search
        datetimeQ=None
        if len(search)>0:
            searchs=queryset.__dict__['model']().__searchQ__(search,profile)
            qobjects=None
            for name in searchs:
                if (searchs[name]=='datetime'):
                    datetimeQ=name
                    continue
                else:
                    if qobjects:
                        qobjects|=searchs[name]
                    else:
                        qobjects=searchs[name]
            if qobjects:
                queryset=queryset.filter(qobjects)
        else:
            # Look for datetimeQ field
            searchs=queryset.__dict__['model']().__searchQ__(search,profile)
            for name in searchs:
                if (searchs[name]=='datetime'):
                    datetimeQ=name
                    continue

        # Datetime Q
        new_extra_context['datetimeQ']=datetimeQ
        if datetimeQ:
            # Inicialization
            f={}
            f['year']=(1900,2100,False)
            f['month']=(1,12,False)
            f['day']=(1,31,False)
            f['hour']=(0,23,False)
            f['minute']=(0,59,False)
            f['second']=(0,59,False)
            date_elements=[None,'year','month','day','hour','minute','second']
            # Get configuration of dates and set limits to the queryset
            for element in date_elements[1:]:
                value=request.GET.get(element,None)
                if value:
                    f[element]=(int(value),int(value),True)
            if f['year'][2] and f['month'][2] and not f['day'][2]:
                (g,lastday)=calendar.monthrange(f['year'][1],f['month'][1])
                f['day']=(f['day'][0],lastday,f['day'][2])
            # Limits
            date_min=datetime.datetime(f['year'][0], f['month'][0], f['day'][0], f['hour'][0], f['minute'][0], f['second'][0])
            date_max=datetime.datetime(f['year'][1], f['month'][1], f['day'][1], f['hour'][1], f['minute'][1], f['second'][1])
            queryset=queryset.filter(eval("( Q(%s__gte=date_min) & Q(%s__lte=date_max) ) | Q(%s=None)" % (datetimeQ,datetimeQ,datetimeQ)))

            # Find actual deepness
            deepness_index=0
            for element in date_elements[1:]:
                if f[element][2]:
                    deepness_index+=1
                else:
                    break

            # Get results from dates to set the new order
            date_results=queryset.values_list(datetimeQ, flat=True) #.dates(datetimeQ,'day')
            if f['day'][0]!=f['day'][1]:
                if f['month'][0]==f['month'][1]:
                    date_results=date_results.dates(datetimeQ,'day')
                elif f['year'][0]==f['year'][1]:
                    date_results=date_results.dates(datetimeQ,'month')
                else:
                    date_results=date_results.dates(datetimeQ,'year')

            get=new_extra_context['get']
            new_extra_context['datefilter']={}
            # Save the deepness
            if (deepness_index+1==len(date_elements)):
                new_extra_context['datefilter']['deepness']=None
            else:
                new_extra_context['datefilter']['deepness']=date_elements[deepness_index+1]
            new_extra_context['datefilter']['deepnessback']=[]
            new_extra_context['datefilter']['deepnessinit']=[]
            for element in get:
                if (not element['name'] in date_elements):
                    struct={}
                    struct['name']=element['name']
                    struct['value']=element['value']
                    new_extra_context['datefilter']['deepnessinit'].append(struct)
                    new_extra_context['datefilter']['deepnessback'].append(struct)
                elif (element['name']!=date_elements[deepness_index] and f[element['name']][2]):
                    struct={}
                    struct['name']=element['name']
                    struct['value']=element['value']
                    new_extra_context['datefilter']['deepnessback'].append(struct)
            # Build the list of elements
            new_extra_context['datefilter']['data']=[]
            for element in date_results:
                # Save the data
                new_extra_context['datefilter']['data'].append(element.timetuple()[deepness_index])
            new_extra_context['datefilter']['data']=list(set(new_extra_context['datefilter']['data']))
            new_extra_context['datefilter']['data'].sort()

            # Prepare the rightnow result
            if f['month'][2]:
                month=_(month_name(f['month'][0]))
            else:
                month='__'
            if f['hour'][2]:
                rightnow="%s/%s/%s %s:%s:%s" % (grv(f,'day'),month,grv(f,'year'),grv(f,'hour'),grv(f,'minute'),grv(f,'second'))
            else:
                rightnow="%s/%s/%s" % (grv(f,'day'),month,grv(f,'year'))
            new_extra_context['datefilter']['rightnow']=rightnow

        # Distinct
        queryset=queryset.distinct()

        # Ordering field autofill
        try:
            order_by_json=request.GET.get('ordering','[]')
            order_by_struct=json_decode(str(order_by_json))
        except Exception:
            order_by_struct=[]
        order_by=[]
        position={}
        counter=1
        for order in order_by_struct:
            name=order.keys()[0]
            direction=order[name]
            if direction=='asc':
                order_by.append("%s" % (name))
            elif direction=='desc':
                order_by.append("-%s" % (name))
            position[name]=counter
            counter+=1
        if order_by:
            queryset=queryset.order_by(*order_by)
        elif default_ordering:
            queryset=queryset.order_by(default_ordering)
        else:
            queryset=queryset.order_by("pk")
        # Check the total count of registers
        total_registers=queryset.count()

        # Ordering field autofill
        sort={}
        for value in fields:
            # Get values
            name=value[0]
            publicname=value[1]
            if len(value)>2:
                size=value[2]
            else:
                size=None
            if len(value)>3:
                align=value[3]
            else:
                align=None
            # Process ordering
            ordering=[]
            found=False
            for order in order_by_struct:
                subname=order.keys()[0]
                direction=order[subname]
                if name==subname:
                    if direction == 'desc':
                        direction = ''
                        sort_class='headerSortUp'
                    elif direction == 'asc':
                        direction = 'desc'
                        sort_class='headerSortDown'
                    else:
                        sort_class=''
                        direction = 'asc'
                    found=True
                if direction == 'asc' or direction=='desc':
                    ordering.append({subname:direction})
            if not found:
                ordering.append({name:'asc'})
                sort_class=''
            # Save the ordering method
            sort[name]={}
            sort[name]['id']=name
            sort[name]['name']=publicname
            sort[name]['class']=sort_class
            sort[name]['size']=size
            sort[name]['align']=align
            if name:
                sort[name]['ordering']=json_encode(ordering).replace('"','\\"')
            if name in position:
                sort[name]['position']=position[name]

        # Pagination
        # IMPORTANT: This part is commented because I don't manage to control rowsperpage from urls.py file, it is remembering last query instead
        # vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
        #if 'rowsperpage' in extra_context:
        #    rowsperpage=extra_context['rowsperpage']
        #else:
        #    rowsperpage=default_rows_per_page
        #total_rows_per_page=request.GET.get('rowsperpage',rowsperpage)
        # ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        total_rows_per_page=request.GET.get('rowsperpage',default_rows_per_page)
        if total_rows_per_page:
            try:
                total_rows_per_page = int(total_rows_per_page)
            except Exception:
                total_rows_per_page = 'All'
        else:
            # IMPORTANT: Commented as before coded
            # total_rows_per_page = rowsperpage
            total_rows_per_page = default_rows_per_page
        if total_rows_per_page == 'All':
            page_number=1
            total_rows_per_page = total_registers
            total_rows_per_page_out = _('All')
            total_pages=1
        else:
            total_rows_per_page = int(total_rows_per_page) # By default 10 rows per page
            total_rows_per_page_out = total_rows_per_page
            total_pages=total_registers/total_rows_per_page
            if total_registers%total_rows_per_page:
                total_pages+=1
            page_number=request.GET.get('page',1)                  # If no page specified use first page
            if page_number=='last':
                page_number=total_pages
            else:
                try:
                    page_number=int(page_number)
                except:
                    page_number=1
                if page_number>total_pages:
                    page_number=total_pages

        # Build the list of page counters allowed
        choice=[]
        c=default_rows_per_page
        chk=1
        while total_registers>=c:
            choice.append(c)
            if chk==1:
                # From 5 to 10
                c=c*2
                # Next level
                chk=2
            elif chk==2:
                # From 10 to 25 (10*2+10/2)
                c=c*2+c/2
                # Next level
                chk=3
            elif chk==3:
                # From 25 to 50
                c*=2
                chk=1
        # Add all choice in any case
        choice.append(_('All'))
        # Save the pagination in the structure
        new_extra_context['rowsperpageallowed']=choice
        new_extra_context['rowsperpage']=total_rows_per_page_out
        new_extra_context['pagenumber']=page_number

        if type(object_id)==type(u'abc'):
            # If object_id is a string, we have a name not an object
            new_extra_context['object_name']=object_id
            object_obj = None
        else:
            # If is not an string
            if object_id:
                # If we got one, load the object
                obj=extra_context['obj']
                object_obj = get_object_or_404(obj, pk=object_id)
            else:
                # There is no object
                object_obj = None
            new_extra_context['object_obj']=object_obj

        # Build the columns structure
        new_extra_context['columns']=[]
        for value in fields:
            field=value[0]
            new_extra_context['columns'].append(sort[field])

        # Get the full number of registers and save it to extra_context
        new_extra_context['total_registers']=total_registers
        if total_rows_per_page=='All':
            # Remove total_rows_per_page if is all
            total_rows_per_page=None
            new_extra_context['page_before']=None
            new_extra_context['page_after']=None
            new_extra_context['start_register']=1
            new_extra_context['showing_registers']=total_registers
        else:
            # Page before
            if page_number<=1:
                new_extra_context['page_before']=None
            else:
                new_extra_context['page_before']=page_number-1
            # Page after
            if page_number>=total_pages:
                new_extra_context['page_after']=None
            else:
                new_extra_context['page_after']=page_number+1
            # Starting on register number
            new_extra_context['start_register']=(page_number-1)*total_rows_per_page+1
            new_extra_context['showing_registers']=total_rows_per_page

        # Calculate end
        new_extra_context['end_register']=min(new_extra_context['start_register']+new_extra_context['showing_registers']-1,total_registers)

        # If compact rows
        hide_head=[]
        hide_tail=[]
        hide_subhead=[]
        hide_subtail=[]
        if compact_rows:
            (compact_field,compact_subelements)=compact_rows
            lastvalue=None
            lastrow=None
            total_subelements=0
            for row in queryset:
                value=eval("row.%s" % (compact_field))
                # Count the subelements from this row
                if compact_subelements:
                    count_subelements=eval("row.%s.count()" % (compact_subelements))
                else:
                    count_subelements=1
                # If the new row belongs to the same group than the row before
                if value==lastvalue:
                    # Hide the head from this row
                    hide_head.append(row.id)
                    # Hide the tail from the last row
                    hide_tail.append(lastrow.id)
                    # If there were elements in the group (somebody already opened the subhead, hide the head of the subgroup) or if this row has no elements (no need to open this subhead)
                    if total_subelements>0 or count_subelements==0:
                        # Hid the subhead
                        hide_subhead.append(row.id)
                    # Hide the tail of the last row, since we want to connect both groups
                    hide_subtail.append(lastrow.id)
                    # Add the total count of elements
                    total_subelements+=count_subelements

                # This row doesn't belong to the opened group
                else:
                    # If there was some row already and there are no elements in the group (nobody opened the group, so we don't have to close it either)
                    if lastrow and total_subelements==0:
                        # Hide the tail from the group
                        hide_subtail.append(lastrow.id)
                    # Startup a new count of elements (Reset the total count of subelements)
                    total_subelements=0
                    total_subelements+=count_subelements
                    # If the new group doesn't have element (we don't think about opening the group)
                    if total_subelements==0:
                        # Hide the head from this group
                        hide_subhead.append(row.id)
                # Remember
                lastvalue=value
                lastrow=row

            # Proper closing the group after the bucle if there was some row opened
            if lastrow and total_subelements==0:
                # Hide the tail from the group if was no element in the group (nobody opened the group)
                hide_subtail.append(lastrow.id)

        # Save it in the public structure
        new_extra_context['hide_head']=hide_head
        new_extra_context['hide_tail']=hide_tail
        new_extra_context['hide_subhead']=hide_subhead
        new_extra_context['hide_subtail']=hide_subtail

        # Save extra context
        extra_context.update(new_extra_context)

        # Empty results are empty
        if page_number==0:
            total_rows_per_page=0

        # Return results
        return object_list(request, queryset=queryset, template_name=template_name, extra_context=extra_context, paginate_by=total_rows_per_page, page=page_number) 
```

它在 'Tareas' 的 urls.py 中调用的内容：

```
 from django.conf.urls import patterns, include, url
    from tareas.models import Tareacobro, Tipotarea, Agentes, Perfil, Tareas
    from django.conf import settings
    from common.generic import view_list

    # Uncomment the next two lines to enable the admin:

    info_tasks = {'queryset': Tareas.objects.all()}

    urlpatterns = patterns('tareas.views',
        # =====TASKS======
        # url(r'^$','tareas'),
        (r'^', view_list, dict( info_tasks, extra_context={'obj':Tareas} ),'admin/tareas/tareas'),
        # (r'^$',view_list, dict(info_tasks),'admin/tareas/tareas'),
        #url(r'^$',view_list, dict(info_tasks, extra_context={'obj':Tareas} ),'tareas'),
        ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:18:03.543

`fields=queryset.__dict__['model']()`实例化一个模型实例。顺便说一句，您可以使用`queryset.model`而不是查看`__dict__`.

Django 模型实例没有属性`__fields__`，因此您会收到属性错误。

如果您想访问您在模型管理中定义的字段，您可以从注册表中获取模型管理类。

```
from django.contrib.admin import site
model_admin = site._registry[Model]
fields = model_admin.fields 
```

# android - 如何克服android中Listview中位置的变化

> ID：13175476
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:18.863
> 
> 标签：android, listview, scroll, adapter, base

在基本适配器中，包含多个视图以及复选框，

如果我选择复选框，一个位置正在获取，如果我滚动并取消选择相同的复选框，则另一个位置正在获取，但我需要相同的位置..如何获得这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:55:40.267

这是因为您的适配器正在回收视图，而您没有正确处理它。确保您正在使用`setChoiceMode(ListView.CHOICE_MODE_MULTIPLE)`或`setChoiceMode(ListView.CHOICE_MODE_SINGLE)`

如果您使用自定义列表项，请参考我的教程：[CUSTOM LISTVIEW WITH ABILITY TO CHECK Items](http://blog.marvinlabs.com/2010/10/29/custom-listview-ability-check-items/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:57:09.590

在您的适配器类中

```
 public View getView(final int position, final View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
if (row == null) 
{
    LayoutInflater inflater = (LayoutInflater) activity
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    row = inflater.inflate(R.layout.reports_list, null);
}

CheckBox cBox=(CheckBox)row.findViewById(R.id.cb1);

cBox.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    if(cBox.isChecked())
    {
       System.out.println("position "+reportslistview.getPositionForView(cBox));
    }
}
}); 
```

# jquery - 在 jQuery UI Slider 上禁用 click 或 mousedown 事件

> ID：13175480
> 
> 赞同：1
> 
> 时间：2012-11-01T10:50:27.733
> 
> 标签：jquery, jquery-ui

我正在尝试禁用 Slider 区域上的单击或 mousedown 事件。我希望滑块只能通过拖动手柄来移动。我尝试添加 preventDefault() 并将 false 返回到滑块但没有用。它仍然触发跳跃。

示例：http: [//jsbin.com/iguruh/1/edit](http://jsbin.com/iguruh/1/edit)

我知道这类似于此[jQuery UI Slider - Disable click on slider track](https://stackoverflow.com/questions/8330854/jquery-ui-slider-disable-click-on-slider-track) 但那里提供的解决方案不起作用，因为我将范围选项设置为 false。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:58:47.657

你试过这个吗？：

```
$(element).bind('click',function(){
return false;

}); 
```

# c# - 如何在 MVC 3 视图中捕获 ajax 下拉列表值？

> ID：13175481
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:32.120
> 
> 标签：c#, ajax, asp.net-mvc, drop-down-menu

我有以下具有两个下拉菜单和一个按钮的视图：

```
@model RoomReservation.Webb.Models.HomeViewModel

@{
    ViewBag.Title = "";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>

<fieldset>
    <legend>Select a city and a hotel</legend>
    <br />
    <br />
    <br />
    @Html.DropDownListFor(x=>x.City_DDL_ID, new SelectList(Model.AllCities, "Value", "Text"),"...pick a city..." )
    <br />
    <br />
    @Html.DropDownListFor(x => x.Hotel_DDL_ID, Enumerable.Empty<SelectListItem>(), "...pick a hotel...", new { disabled = "disabled"})
    <br />
    <br />
    <input id="SearchButton" type="submit"  onclick="window.location.href='/Home/SearchForRooms'" disabled="disabled"/> 
</fieldset>

<script type="text/javascript" language="javascript">
    $('#City_DDL_ID').change(function () {
        var selectedCity = $(this).val();
        if (selectedCity != null && selectedCity != '-1') {
            $.getJSON('@Url.Action("GetHotels")', { id: selectedCity }, function (hotels) {
                var hotelsSelect = $('#Hotel_DDL_ID');
                hotelsSelect.empty();
                $.each(hotels, function (index, hotel) {
                    hotelsSelect.append($('<option/>',
                    {
                        value: hotel.Value,
                        text: hotel.Text
                    }));
                });
                $('#Hotel_DDL_ID').attr('disabled', false);
                $('#SearchButton').attr('disabled', false);

            });
        }
    });
</script>

<script type="text/javascript" language="javascript">
 function onsubmitclcik() {
    var SecondDrpId = $('#Hotel_DDL_ID').val();
    window.location.href = '/Home/SearchForRooms?parameter=' + SecondDrpId; 
```

}

我想从第二个下拉列表中获取一个值，以便我可以将它作为参数提供给从按钮属性“onclick”中获得的方法。它现在正在工作（在脚本上方）。但我的动作仍然得到空参数。这是代码：

```
public ActionResult SearchForRooms(int SecondDrpId) 
    {
        if (SecondDrpId > -1)
            return View(); //Here goes some model, not important
        else
            return RedirectToRoute("Home/Index");
    } 
```

这是 Chrome 参数：请求 URL：http://localhost:22191/Home/SearchForRooms?parameter=3 请求方法：GET 谢谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:18:39.563

您可以使用以下代码来解决您的问题。

```
<input id="SearchButton" type="submit" onclick="onsubmitclcik();"  disabled="disabled"/> 
```

编写一个javascript函数来调用你的下一个网址，

```
function onsubmitclcik() {
        var SecondDrpId = $('#Hotel_DDL_ID').val();
        window.location.href = '/Home/SearchForRooms?parameter=' + SecondDrpId;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:11:58.917

为什么通过设置`window.location.href`您的操作网址来调用您的操作？这样，不会向您的操作发送单个参数。将参数添加到 url 并将其命名为您的操作参数的命名。在您的示例中，必须调用参数`SecondDrpId`：

```
onclick="window.location.href='/Home/SearchForRooms?SecondDrpId=' + $('#Hotel_DDL_ID').val()" 
```

或者将您的下拉菜单嵌入到表单中并将其发布到您的操作方法中。

# html - 使用 CSS 移除标签的效果

> ID：13175482
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:35.613
> 
> 标签：html, css

我的 Drupal 主题生成：

```
<div class="field1">
  Field 1
</div>
<div class="field2">
  <h3>Field 2</h3>
</div> 
```

结果是`Field 2`另一种风格。

如何消除`h3`使用 CSS 的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:07:30.090

更好的方法 - 删除 h3 标签。但有时，当您需要重置父元素的所有样式时 - 使用全局属性，例如“font-size”的“font”、“font-style”等...继承填充、边距、边框和背景样式的警告- 这可能看起来很难看。例如，当您的元素具有填充和边框时，每个元素都会重复:)

```
.someclass * {
    font: inherit;
    color: inherit;

    /* optional reset */
    background: transparent;
    border: none;
    margin: 0;
    padding: 0;
} 
```

[http://jsfiddle.net/iegik/q72EM/](http://jsfiddle.net/iegik/q72EM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:53:40.423

您可以按如下方式访问 h3：

```
.field2 h3{ //style here } 
```

这将更改具有 field2 类的元素内任何 h3 的样式。如果您想更加具体：

```
div.field2 > h3 { //style here } 
```

这只会更改 h3 元素的样式，该元素是具有 field2 类的 div 的第一级后代。我建议您查看 CSS 选择器。

要删除任何现有效果，您必须覆盖它们。这可以通过将值设置回元素的默认值来完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T10:53:53.257

您只能通过将属性设置为它们在`<h3>`应用样式之前具有的任何值来“删除”效果。例如，您可以使用重置字体大小

```
.field > h3 {
    font-size: medium;
} 
```

您需要对所有由您的 CSS 或浏览器的内部样式表修改的属性执行此操作，但有一些帮助：现代开发工具（例如 Chrome 的）将允许您检查一个元素并向您显示它具有哪些属性和它们来自哪里（所以你可以看到它`font-size`已经被修改了）。查看适当的 CSS 标准将向您展示这些属性中的每一个的默认值是什么（例如`font-size`is [here](http://www.w3.org/TR/CSS21/fonts.html#font-size-props)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T10:53:15.707

习惯了这个

像这样

```
.field2 h3{
color:black;
font-size:20px;
} 
```

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T10:54:24.413

您可以像这样轻松编辑：-

**CSS**

```
.field2 h3 {
color:red;
  font-size:12px;
  font-family:arial;
} 
```

[演示](http://tinkerbin.com/hZvu2RIk)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T11:17:19.207

You cannot remove the effects of tags in CSS, except by writing CSS code that overrides stylistic settings that elements have due to browser defaults or other settings.

For an `h3` element, the properties that are probably set in browser default style sheets are `display`, `unicode-bidi`, `font-size`, `font-weight`, `margin`, and `page-break-after`. (Cf. to Appendix D of the CSS 2.1 spec, [Default style sheet for HTML 4](http://www.w3.org/TR/CSS21/sample.html).) You can set these to the desired values, and even a simple selector will suffice, e.g.

```
h3 { font-size: 120%; font-weight: normal; margin: 0; } 
```

However, other style sheets that affect your document may have other settings on `h3`. And there is really no law against browser default style sheets using e.g. colors for headings or setting a specific font family.

To override other CSS settings in general, you need to use CSS rules with a sufficiently specific selector.

# c# - 需要有关会话变量的帮助

> ID：13175484
> 
> 赞同：1
> 
> 时间：2012-11-01T10:50:40.683
> 
> 标签：c#, asp.net, session-variables, webmethod

如何在 Web 方法中返回用户 ID 并在网站 ASP.NET 中使用返回的结果，使其成为会话变量以便在 ASP.NET 中的不同网页上使用它？

[WebMethod] public bool UserLogin(string EmailAdd, string Password) {

```
 SqlConnection myConnection = new SqlConnection(@"user id=BankUser;password=Computer1;server=(local)\sql2008;database=BillionBank;");
        myConnection.Open();
        SqlCommand myCommand = new SqlCommand("SELECT * FROM [BillionBank].[dbo].[tblCustomerProfile] WHERE EmailAdd='" + EmailAdd + "' AND Password ='" + Password + "'", myConnection);
        SqlDataReader myreader;
        myreader = myCommand.ExecuteReader();
        if (myreader.Read())
        {
            return true;
        }
        else
            return false;
    } 
```

这是我的代码，当我在我的网站中调用 web 方法时，我想返回一个 Userid 作为结果并在网站中使用它作为会话变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:54:10.173

在 web 方法中设置会话变量，如：

```
Session["userId"] = 1234; 
```

然后在您的应用程序中，您可以再次调用会话。请注意，您需要再次将会话解析为 int

```
int userId
if(int.TryParse(Session["userId"].toString(), out userId)
{
     //do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:59:42.523

在 A webmethod 上保留一个`[WebMethod(EnableSession = true)]`然后您可以返回会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:16:39.253

```
 public string GetUserID(string EmailAdd, string Password)
    {
        SqlConnection myConnection = new SqlConnection(@"user id=BankUser;password=Computer1;server=(local)\sql2008;database=BillionBank;");
        myConnection.Open();
        SqlCommand myCommand = new SqlCommand("SELECT * FROM [BillionBank].[dbo].[tblCustomerProfile] WHERE EmailAdd='" + EmailAdd + "' AND Password ='" + Password + "'", myConnection);
        SqlDataReader myreader;
        string result = "";

        myreader = myCommand.ExecuteReader();
        if (myreader.Read())
        {
            result = Convert.ToString(myreader["UserID"]);
        }

        return result;

    }

protected void btnLogin_Click(object sender, EventArgs e)
{
    Session["UserID"] = GetUserID(YOUR_EMAILID, YOUR_PASSWORD);
} 
```

# r - 从一个大的形状文件创建许多形状文件。

> ID：13175489
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:50:58.300
> 
> 标签：r

我有一个带有两个不同区域的形状文件，每个区域有 12 个子区域。我想要从该形状文件中分离出这 24 个子区域的形状文件。我也尝试过使用包 maptools 和 rgeos 但无法计算出来。任何对数都是非常感谢。谢谢。

谢里夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:59:10.523

您可以根据感兴趣列中的唯一值循环拆分数据并写出子集数据。我在 maptools 的 leu 中使用 rgdal，但您可以轻松更改代码以使用 maptools 函数来读取/写入 shapefile。

```
require(sp)
require(rgdal)

# READ SHAPEFILE
dat <- readOGR("C:/DATA", "dat")

# CREATE VECTOR OF UNIQUE SUBREGION VALUES
y <- unique(dat@data$SUBREGIONS)

# CREATE SHAPEFILE FOR EACH SUBREGION AND WRITE OUT 
  for (i in 1:length(y) ) {
    temp <- dat[dat$SUBREGIONS == y[i], ]   
  writeOGR(temp, dsn=getwd(), y[i], driver="ESRI Shapefile", 
           overwrite_layer=TRUE)
   } 
```

# jquery - 在 jquery 模型弹出窗口中单击按钮时提交表单

> ID：13175490
> 
> 赞同：0
> 
> 时间：2012-11-01T10:50:59.280
> 
> 标签：jquery, asp.net-mvc-3, razor, popup, form-submit

在我的`MVC3 (Razor)`应用程序中，我有一个包含表单的页面。

```
 @using (Html.BeginForm("SaveReceipt", "ClinicInvoiceReceipt", FormMethod.Post, new { id = "form1" }))
   { } 
```

如上。在我拥有的同一页面中`Jquery model popup`，它包含一个按钮。我想`submit the form form1`在弹出窗口中单击按钮。

我试过

```
 $("#ReceiptSave").click(function (e) {
        e.preventDefault();
        $('#ConfirmationDiv').dialog('close');// for closing popup
        $("#form1").submit();
    }); 
```

但它不起作用。如果有人知道原因，请帮助我。我坚持这一点。

在错误控制台中，它显示以下错误 ![在此处输入图像描述](../Images/6d951263cedb044eb27e1c924e47c33f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:14:16.217

```
@using (Html.BeginForm("SaveReceipt", "ClinicInvoiceReceipt", FormMethod.Post, new { id = "form1" }))
{ 
    <input type="image" id="ReceiptSave" src="..." />
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T03:28:55.387

```
@using (Html.BeginForm("SaveReceipt", "ClinicInvoiceReceipt", FormMethod.Post, new { id = "form1" }))
{ 
    <p>main page form </p>
    <input type="button" id="ShowConfirmDiv" value="Submit" />
}

<div id="ConfirmationDiv">
    <p>Are you sure you want to submit this form?</p>
    <input type="button" id="ReceiptSave" value="Ok"/>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        $("#ConfirmationDiv").dialog({
            autoOpen: false,
        });

        $("#ShowConfirmDiv").click(function () {
            $("#ConfirmationDiv").dialog("open");
        });

        $("#ReceiptSave").click(function (e) {
            e.preventDefault();
            $('#ConfirmationDiv').dialog('close'); // for closing popup
            $("#form1").submit();
        });
    });
</script> 
```

![在此处输入图像描述](../Images/54da748da583041d93a60240d0e760cf.png)

![在此处输入图像描述](../Images/db34677f2017ade2f08a8abeb7b9854e.png)

# bash - OpenWRT ASH 脚本

> ID：13175493
> 
> 赞同：1
> 
> 时间：2012-11-01T10:51:17.063
> 
> 标签：bash, openwrt, ash

我正在尝试编写一个 ASH 脚本以在我的 OpenWRT 路由器上运行。

我已经安装了 nodogsplash，当你第一次尝试通过路由器进行身份验证时，它会显示一个登录页面。

nodogsplash 带有一个命令行实用程序，可让您更改密码：

```
ndsctl password newpassword 
```

因此，我正在尝试编写一个脚本，我可以将其设置为每天运行一次的 cron 作业以将密码更改为新的密码，但是我正在努力让它正确输出。我的脚本自动取款机：

```
#!/bin/ash
local randompassLength
local pass
randompassLength=8
pass=</dev/urandom tr -dc A-Za-z0-9 | head -c $randompassLength
ndsctl password "$pass" 
```

当我运行它时，我得到输出：

```
miqM2Ah6Password set to . 
```

这似乎在回声开始时放弃了密码并将密码设置为空白。

有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:06:04.990

您缺少命令替换：

```
pass=$(</dev/urandom tr -dc A-Za-z0-9 | head -c $randompassLength) 
```

或使用反引号：

```
pass=`</dev/urandom tr -dc A-Za-z0-9 | head -c $randompassLength` 
```

# javascript - 如何知道 ngClick 何时触发元素？

> ID：13175497
> 
> 赞同：0
> 
> 时间：2012-11-01T10:51:42.290
> 
> 标签：javascript, angularjs

我有以下元素，

```
<button test-directive>value</button> 
```

我知道我可以使用`ng-click directive`，但是我必须从控制器调用一个函数。当用户单击时，我想触发示例中调用的指令`test-directive`

```
testModule.directive('testDirective', function(){
return {
    restrict: 'A',
    link: function(scope, element, attrs) {      }
  }
}) 
```

如何在该指令中实现 ng-click？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:46:17.540

不知道我是否明白你的想法。

这是[plunker](http://plnkr.co/edit/tQLESC?p=preview)

```
directive('testDirective', function(){
return {
    restrict: 'A',
    replace:true,
    template:'<button ng-click="fire()">test</button>',
    controller:function($scope, $element, $attrs){
        $scope.fire = function (){
            console.log("fire !");
        };
    }
  };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T16:22:19.333

maxisam 的答案是正确的，但是

你可以用 它`<span test-directive>value</span>`代替`<button test-directive>value</button>`它仍然会显示按钮。

[普朗克](http://plnkr.co/edit/WpeglMrDgFOheSVtroeX?p=preview)

# triggers - “需要一个积极的重复频率”谷歌应用程序时钟触发器

> ID：13175501
> 
> 赞同：1
> 
> 时间：2012-11-01T10:51:48.123
> 
> 标签：triggers, google-apps-script, builder, clock

我在尝试创建基于时钟的触发器时遇到问题。这是用于谷歌应用程序脚本。该脚本应该调用一个函数，该函数将在凌晨 5 点从电子表格中通过电子邮件发送信息。我知道该功能有效，因为我已将它与 5 am 到 6 am 内置触发器一起使用，但他们希望它恰好在 5 am 而不是该小时范围内的任何时间。这是我的代码：

```
var SOD_Briefing_Trigger = ScriptApp.newTrigger("sendBriefingByEmail")
.timeBased().
atHour(5)
.create(); 
```

每次我尝试运行或调试它时，我都会收到以下错误消息：

```
Needs a positive frequency of recurrence 
```

抱歉，这似乎是一个新手问题。我花了几天时间在这里和谷歌上搜索类似的问题。我什么也找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:35:29.363

该错误消息*有点*神秘。如果你只说“atHour”，系统知道“时间”但不知道“频率”。

以下应该工作。

```
var SOD_Briefing_Trigger = ScriptApp.newTrigger("sendBriefingByEmail")
.timeBased()
.atHour(5)
.everyDays(1)
.create(); 
```

注意“everyDays”调用。这意味着每 X 天运行一次 - 在本次通话中的每一天。您可以根据[此处](https://developers.google.com/apps-script/class_clocktriggerbuilder)记录的调用将其更改为其他频率。其他一些示例 - “atDate”（如果您只想在今天或明天运行）和“onWeekDay”（如果您希望它每周一运行，例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:53:21.343

通过使用一个简单的功能，我能够让它工作一次，该功能只是向我发送了一封带有短消息的电子邮件。从那以后，我无法让它根据电子表格向我发送更长的电子邮件。

这是我试图运行的整个代码，今天 0500 没有给我发送任何东西。

```
function createTimeTrigger3() {

  try{

  var SOD_Briefing_TriggerMonday = ScriptApp.newTrigger("sendBriefingByEmail2")
      .timeBased()
      .atHour(5)
      .nearMinute(15)
      .onWeekDay(ScriptApp.WeekDay.MONDAY)
      .create();

    var SOD_Briefing_TriggerTuesday = ScriptApp.newTrigger("sendBriefingByEmail2")
      .timeBased()
      .atHour(5)
        .nearMinute(15)
      .onWeekDay(ScriptApp.WeekDay.TUESDAY)
        .create();

    var SOD_Briefing_TriggerWednesday = ScriptApp.newTrigger("sendBriefingByEmail2")
      .timeBased()
      .atHour(5)
        .nearMinute(15)
      .onWeekDay(ScriptApp.WeekDay.WEDNESDAY)
        .create();

    var SOD_Briefing_TriggerThursday = ScriptApp.newTrigger("sendBriefingByEmail2")
      .timeBased()
      .atHour(5)
        .nearMinute(15)
      .onWeekDay(ScriptApp.WeekDay.THURSDAY)
        .create();

    var SOD_Briefing_TriggerFriday = ScriptApp.newTrigger("sendBriefingByEmail2")
      .timeBased()
      .atHour(5)
        .nearMinute(15)
      .onWeekDay(ScriptApp.WeekDay.FRIDAY)
        .create();

  }
  catch(err)
  {
     MailApp.sendEmail("************.gov", "there was a problem with the SOD trigger", err.message);

}

   Logger.log("Unique ID of SOD_Briefing_TriggerMonday: " + SOD_Briefing_TriggerMonday.getUniqueId());
    Logger.log("Unique ID of SOD_Briefing_TriggerTuesday: " + SOD_Briefing_TriggerTuesday.getUniqueId());
    Logger.log("Unique ID of SOD_Briefing_TriggerWednesday: " + SOD_Briefing_TriggerWednesday.getUniqueId());
    Logger.log("Unique ID of SOD_Briefing_TriggerThursday: " + SOD_Briefing_TriggerThursday.getUniqueId());
    Logger.log("Unique ID of SOD_Briefing_TriggerFriday: " + SOD_Briefing_TriggerFriday.getUniqueId());
      Logger.log("Unique ID of SOD_Briefing_TriggerToday: " + SOD_Briefing_TriggerToday.getUniqueId());

}

function sendBriefingByEmail2() {

  var email = SpreadsheetApp.openById("***********").getSheetByName("Email Roster").getRange(4, 3).getValue()
      +SpreadsheetApp.openById("***************").getSheetByName("Email Roster").getRange(5, 3).getValue()
      +SpreadsheetApp.openById("***************").getSheetByName("Email Roster").getRange(6, 3).getValue()
      +SpreadsheetApp.openById("***************").getSheetByName("Email Roster").getRange(7, 3).getValue()
      +SpreadsheetApp.openById("*************").getSheetByName("Email Roster").getRange(8, 3).getValue()
      +SpreadsheetApp.openById("*********************").getSheetByName("Email Roster").getRange(9, 3).getValue()
      +SpreadsheetApp.openById("**********************").getSheetByName("Email Roster").getRange(10, 3).getValue()
      +SpreadsheetApp.openById("**************").getSheetByName("Email Roster").getRange(11, 3).getValue()
      +SpreadsheetApp.openById("**********************").getSheetByName("Email Roster").getRange(12, 3).getValue();

      if (SpreadsheetApp.openById("**********************").getSheetByName("Previous_24_Hours").getRange(2, 1).isBlank()){

        try {

      MailApp.sendEmail(email, "No SOD Daily Briefing to Report Today", "There were no daily briefing entries submitted for SOD in the previous 24 hours.");

        }

        catch(err){ 
  MailApp.sendEmail("*************.gov", "there was a problem sending the SOD BLANK briefing in the AM", err.message);
}

        }

    else {

      try {

  var subject = "Special Operations Bureau Daily Briefing";

  var row = 2;

      var email24sheet = SpreadsheetApp.openById("*********************").getSheetByName("Previous_24_Hours");

  var LastRow = SpreadsheetApp.openById("******************").getSheetByName("Previous_24_Hours").getLastRow();

  var msgHtml = ""

      do {
      msgHtml = msgHtml + "<br><hr><br>"

      +"<p>"+"<b>"+"Unit: "+"</b>"+email24sheet.getRange(row, 11).getValue()+"</p>"
      +"<p>"+"<b>"+"Incident: "+"</b>"+email24sheet.getRange(row, 1).getValue()+"</p>"
      +"<p>"+"<b>"+"Date / Time: "+"</b>"+email24sheet.getRange(row, 2).getValue()+ " @ " + email24sheet.getRange(row, 3).getValue()+ " hours"+"</p>"
      +"<p>"+"<b>"+"Location: " + "</b>" +email24sheet.getRange(row, 4).getValue()+"</p>"      
        +"<p>"+"<b>"+"Trooper: "+"</b>"+email24sheet.getRange(row, 5).getValue()+"</p>"
        +"<p>"+"<b>"+"Assisting Trooper(s): "+"</b>"+email24sheet.getRange(row, 6).getValue()+"</p>"
     +"<p>"+"<b>"+"Suspect: "+"</b>"+email24sheet.getRange(row, 7).getValue()+"</p>"
       +"<p>"+"<b>"+"Charges: "+"</b>"+email24sheet.getRange(row, 8).getValue()+"</p>"
      +"<p>"+"<b>"+"Yield: "+"</b>"+email24sheet.getRange(row, 9).getValue()+"</p>"
          +"<p>"+"<b>"+"Synopsis: "+"</b>"+email24sheet.getRange(row, 10).getValue()+"</p>";
row = row + 1;

} while(row < LastRow+1);

  var msgHeader = "<p>"+"<H1>"+"<P ALIGN=Center>"+"Special Operations Bureau Daily Briefing"+"</H1>"+"</p>"
        +"<p>"+"<H2>"+"<P ALIGN=Center>"+"Created: " + new Date().toLocaleDateString()+"</H2>"+"</p>";

  var msgFooter = "<p>"+"<i>"+"<P ALIGN=Center>"+"This message was automatically generated using data submitted electronically from the Spec Ops Bureau website and / or form.  For errors or suggestions for improvements, email **************.gov "+"</i>"+"</p>";

    var msgPlain = msgHtml.replace(/(<([^>]+)>)/ig, ""); // clear html tags for plain mail

  MailApp.sendEmail(email, subject, msgPlain, { htmlBody: msgHeader + msgHtml + msgFooter });

    SpreadsheetApp.openById("*************").getSheetByName("Previous_24_Hours").getRange("Previous_24_Data").clearContent(); //clears the incidents that were just sent

  }

catch(err){ 
  MailApp.sendEmail("**************.gov", "there was a problem sending the SOD briefing in the AM", err.message);
}

}

  } 
```

我在 0500 什么也没得到。然后我尝试制作更多触发器，只是为了测试触发器构建器并尝试不同的东西来看看我能做什么。

我使用从谷歌脚本站点（[https://developers.google.com/apps-script/managing_triggers_programmatically](https://developers.google.com/apps-script/managing_triggers_programmatically)）找到的命令删除触发器：

```
// Delete a trigger with the given unique ID
function deleteTrigger(triggerId) {
  // Locate a trigger by unique ID
  var allTriggers = ScriptApp.getScriptTriggers();
  // Loop over all triggers
  for(var i=0; i < allTriggers.length; i++) {
    if (allTriggers[i].getUniqueId() == triggerId) {
      // Found the trigger and now delete it
      ScriptApp.deleteTrigger(allTriggers[i]);
      break;
    }
  }
} 
```

但现在我得到：

> 此脚本有太多触发器。必须先从脚本中删除触发器，然后才能添加更多触发器。

和

> 已经设置了循环时钟触发器。

当我尝试运行任何东西时通过电子邮件发送给我的错误消息。

我应该为一周中的每一天的触发器执行不同的功能吗？

# bash - 如何使用 Unix shell 任意重新排序文本文件中的行？

> ID：13175502
> 
> 赞同：1
> 
> 时间：2012-11-01T10:51:53.100
> 
> 标签：bash, shell, text, ksh

我有一个包含任意行数的文本文件，例如：

```
one line
some other line
an additional line
one more here 
```

我想编写一个脚本来根据给定的顺序重新排列这些行。例如

*   输入 2 1 3 4 将交换第一行和第二行。
*   输入 3 1 2 4 会将第 3 行放在首位，将第 1 行放在第 2 行，将第 2 行放在第 3 行，将第 4 行放在第 4 行。

我可以一起破解一些东西，但我想知道是否有一个优雅的解决方案？

我可以使用 bash 或 ksh。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T10:58:45.977

您可以使用`sed`：

```
for num in $input ; do
    sed $num'!d' file
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:23:07.133

这是一个perl解决方案：

```
#!/usr/bin/perl -w
my @lines = <STDIN>; # Read stdin into an array
foreach my $linenum (@ARGV) { # Get the new order from argument list
  print $lines[$linenum-1];
} 
```

将脚本运行为：

```
./scriptname 2 1 3 4 < inputfile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:33:00.227

In awk:

```
for num in "$@"; do
    awk "NF==$num" file
done 
```

Bash-only (don't need to reset IFS if you are putting this in a script):

```
IFS=$'\n'
lines=( $(<file) )
for num in "$@"; do
    echo lines[num-1]
done 
```

# c# - 如何从输出文本中删除“System.Windows.Forms.TextBox”？

> ID：13175504
> 
> 赞同：0
> 
> 时间：2012-11-01T10:51:59.233
> 
> 标签：c#, winforms

```
text2 = string.Format("[B](No Change)[/B]"); 
```

输出如下：

```
System.Windows.Forms.TextBox, Text: (No Change) 
```

如何`System.Windows.Forms.TextBox, Text:`从我的输出中删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:58:48.393

一个疯狂的猜测，但我认为**您要打印的不是文本框的[Text](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)属性，而是整个 textbox**。

假设你有：

```
TextBox1.Text = string.Format("[B](No Change)[/B]");;
Console.Write(TextBox1); 
```

然后你会得到输出。

```
System.Windows.Forms.TextBox, Text: [B](No Change)[/B] 
```

您可能需要做的是使用[Text](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)属性。

```
Console.Write(TextBox1.Text); 
```

这将为您提供分配的文本并将排除。`System.Windows.Forms.TextBox, Text:`部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:02:38.847

我在这里猜测，但您是否想让“无更改”显示为粗体文本？在这种情况下，您可以修改文本框字体本身，而不是尝试格式化您的字符串。

```
text2.text = "No change";
text2.Font = new Font(text2.Font, FontStyle.Bold); 
```

如果这不是你想要做的，那么对不起！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-21T04:25:07.757

不要忘记添加文本 text2.Text = string.Format("[B](No Change)[/B]");

# c# - JSON.Stringify 数据包括布尔值

> ID：13175505
> 
> 赞同：0
> 
> 时间：2012-11-01T10:52:02.703
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4

我想要做的是将 JSON 对象传递给 WebAPI ajax 调用并映射到服务器端的强类型对象。字符串值被完美地发布，但是当涉及到布尔值时，它们根本没有被传递。下面是我的代码：

```
 var gsGasolineField = $('.gsGasoline').val();
 blData = { Gasoline: gsGasolineField  };

 var json = JSON.stringify(blData);
 $.ajax({
         type: "POST",
         url: url,
         data: json,
         contentType: "application/json",
         dataType: "json",
         statusCode: {
                      201 /*Created"*/: function (data) {
                            $("#BusinessLayerDialog").dialog("close");
                            ClearForm("#BusinessLayerForm");
                        },
                        400: /*Bad request - validation error*/ function (data) {
                            $("#BusinessLayerForm").validate().form();

                        },
                        500: function (data) {
                            alert('err');
                        }
                    },
         beforeSend: setHeader
                }); 
```

Gasoline 属性在服务器端是布尔类型。

**编辑：**

如上所述，Gasoline 是布尔值，作为 MVC，我的 HTML 标记如下

```
<div style="float: left">@Html.CheckBoxFor(x => x.GasStation.Gasoline, new { @class = "gsGasoline" })</div> 
```

所以我只是把这个复选框的值传递给 JSON 对象

**编辑**

也试过直接发送true

```
blData = { Gasoline: true  }; 
```

还是假服务器端！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:08:05.657

更改`$('.gsGasoline').val()`为`$('.gsGasoline').is(':checked')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:04:38.833

问题原来是由于我的服务器端架构的继承方面。父类中的所有属性都被正确反序列化，子类中的所有内容都保持不变。与传递给 JSON.Stringify 函数的类型无关。

谢谢大家的帮助。

# jquery-mobile - JSF 2 与 jQuery Mobile 兼容吗？

> ID：13175507
> 
> 赞同：0
> 
> 时间：2012-11-01T10:52:11.000
> 
> 标签：jquery-mobile, jsf-2

所以我的任务是找出现有的 JSF 项目是否可以合并 jQuery Mobile。我两个月前才完成大学，所以我的经验有限，这就是我向你们寻求帮助的原因。

该项目使用 Eclipse 和 JSF、Maven 和 Spring。目前我相信只有 jQuery mobile 1.0 完全可以与 JSF 一起使用。然而，该项目的先决条件之一是必须使用最新版本的 jQuery Mobile。

所以我的问题是，jQuery 1.2 完全可以与 JSF 一起使用吗？或者它是否有不兼容的部分。

如果是这样，是否有人有任何好的教程可以链接到如何使用它？

提前感谢您提供的任何帮助，任何需要清理的信息或任何需要澄清的信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:21:59.720

我过去曾将 jQuery Mobile 1.0 与 JSF2 结合使用，并且效果很好。不确定 1.2 版本，但我不知道为什么它不起作用。

正如Chaney 的评论中提到的，将数据绑定和检索到jQuery 控件有时会很麻烦。您可能想查看[PrimeFaces Mobile](http://www.primefaces.org/showcase-labs/mobile/index.jsf)，它可以减轻您的大部分负担，并且应该让您快速入门（如果它不与您正在使用的任何其他组件库冲突）。PrimeFaces Mobile 的最新版本似乎使用了 jQuery 1.8.2 和 jQuery Mobile 1.1.0。

# javascript - 从 JavaScript 代码调用 Python 函数

> ID：13175510
> 
> 赞同：100
> 
> 时间：2012-11-01T10:52:29.217
> 
> 标签：javascript, python, function, integration

我想从 JavaScript 代码调用 Python 函数，因为在 JavaScript 中没有替代方法可以做我想做的事。这可能吗？你能调整下面的代码片段来工作吗？

JavaScript 代码：

```
var tag = document.getElementsByTagName("p")[0];
text = tag.innerHTML;
// Here I would like to call the Python interpreter with Python function
arrOfStrings = openSomehowPythonInterpreter("~/pythoncode.py", "processParagraph(text)"); 
```

`~/pythoncode.py`包含使用高级库的函数，这些库在 JavaScript 中没有易于编写的等效函数：

```
import nltk # is not in JavaScript
def processParagraph(text):
  ...
  nltk calls
  ...
  return lst # returns a list of strings (will be converted to JavaScript array) 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-01T11:01:48.030

您所需要的只是向您的 pythoncode 发出 ajax 请求。您可以使用 jquery [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)执行此操作，或仅使用 javascript

```
$.ajax({
  type: "POST",
  url: "~/pythoncode.py",
  data: { param: text}
}).done(function( o ) {
   // do something
}); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-01T10:56:25.967

从`document.getElementsByTagName`我猜你正在浏览器中运行javascript。

向浏览器中运行的 javascript 公开功能的传统方式是使用 AJAX 调用远程 URL。AJAX 中的 X 代表 XML，但现在每个人都使用 JSON 而不是 XML。

例如，使用 jQuery，您可以执行以下操作：

```
$.getJSON('http://example.com/your/webservice?param1=x&param2=y', 
    function(data, textStatus, jqXHR) {
        alert(data);
    }
) 
```

您将需要在服务器端实现 python web 服务。对于简单的网络服务，我喜欢使用[Flask](http://flask.pocoo.org/)。

一个典型的实现如下所示：

```
@app.route("/your/webservice")
def my_webservice():
    return jsonify(result=some_function(**request.args)) 
```

[您可以使用silverlight](http://www.voidspace.org.uk/ironpython/silverlight/index.shtml#ironpython-silverlight)在浏览器中运行 IronPython（一种 Python.Net），但我不知道 NLTK 是否可用于 IronPython。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-01T11:00:57.437

通常，您将使用看起来像的 ajax 请求来完成此操作

```
var xhr = new XMLHttpRequest();
xhr.open("GET", "pythoncode.py?text=" + text, true);
xhr.responseType = "JSON";
xhr.onload = function(e) {
  var arrOfStrings = JSON.parse(xhr.response);
}
xhr.send(); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-12-01T12:25:15.430

**通过流程进行沟通**

例子：

**Python：**这个 Python 代码块应该返回随机温度。

```
# sensor.py

import random, time
while True:
    time.sleep(random.random() * 5)  # wait 0 to 5 seconds
    temperature = (random.random() * 20) - 5  # -5 to 15
    print(temperature, flush=True, end='') 
```

**Javascript (Nodejs)：**在这里，我们需要生成一个新的子进程来运行我们的 python 代码，然后获取打印输出。

```
// temperature-listener.js

const { spawn } = require('child_process');
const temperatures = []; // Store readings

const sensor = spawn('python', ['sensor.py']);
sensor.stdout.on('data', function(data) {

    // convert Buffer object to Float
    temperatures.push(parseFloat(data));
    console.log(temperatures);
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-08-30T14:19:41.117

没有 Python 程序就无法从 JavaScript 运行 .py 文件，就像没有文本编辑器就无法打开 .txt 文件一样。但是在 Web API 服务器（下例中的 IIS）的帮助下，整个事情变得轻而易举。

1.  安装python并创建示例文件test.py

    ```
    import sys
    # print sys.argv[0] prints test.py
    # print sys.argv[1] prints your_var_1

    def hello():
        print "Hi" + " " + sys.argv[1]

    if __name__ == "__main__":
        hello() 
    ```

2.  在您的 Web API 服务器中创建一个方法

    ```
    [HttpGet]
    public string SayHi(string id)
    {
        string fileName = HostingEnvironment.MapPath("~/Pyphon") + "\\" + "test.py";          

        Process p = new Process();
        p.StartInfo = new ProcessStartInfo(@"C:\Python27\python.exe", fileName + " " + id)
        {
            RedirectStandardOutput = true,
            UseShellExecute = false,
            CreateNoWindow = true
        };
        p.Start();

        return p.StandardOutput.ReadToEnd();                  
    } 
    ```

3.  现在对于您的 JavaScript：

    ```
    function processSayingHi() {          
       var your_param = 'abc';
       $.ajax({
           url: '/api/your_controller_name/SayHi/' + your_param,
           type: 'GET',
           success: function (response) {
               console.log(response);
           },
           error: function (error) {
               console.log(error);
           }
        });
    } 
    ```

请记住，您的 .py 文件不会在用户的计算机上运行，​​而是在服务器上运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-07-22T08:14:28.613

尽管有一些回复和评论建议，有[很多方法](https://blog.bitsrc.io/using-python-for-frontend-f90a0f8d51ae)可以在前端使用 Python。特别是对于您的问题，请参阅[此回复](https://stackoverflow.com/a/38494875)。

# jsf - 如何通过 clientId 访问复合组件的兄弟

> ID：13175512
> 
> 赞同：3
> 
> 时间：2012-11-01T10:52:32.673
> 
> 标签：jsf, composite-component, clientid, naming-containers

我有一个捆绑了一些输入字段的复合组件。该组件将在一个页面上多次使用，并包含一个按钮来复制这些组件中另一个的值。为此，我需要通过其 clientId 访问其中一个兄弟姐妹作为

`<f:ajax execute=":XXX:siblingId" render="...">`

我的问题在于构建这个ID。我有兄弟姐妹的名字，我可以确保它与包含复制按钮的组件位于同一个命名容器中，但我无法控制完整的嵌套层次结构，所以它可能是`:form:foo:bar:parent:child`或只是`form:parent:child`. 所以基本上我想获取当前复合组件的前缀，但*没有*组件自己的 ID，然后附加要从中复制的组件的 ID。

这类似于以下问题：

*   [如何在jsf中寻址周围的命名容器](https://stackoverflow.com/q/12088654/840977)
*   [如何访问复合的父命名容器](https://stackoverflow.com/q/12090950/840977)

但是，这两个答案都使用了 PrimeFaces 特定的功能，例如`@parent`和`widgetVar`，这不适用于我的项目。

在尝试 EL 的隐式对象时，我基本上尝试了与第二个问题的海报相同的东西——结果相同：`cc.parent.clientId`总是空的。我也尝试`cc.namingContainer.clientId`了两者的一些组合，唉 - 没有成功。`parent`特别是不能按预期工作的事实让我感到困惑......

那么：是否有一种与组件库无关的方式来访问包含复合组件命名容器的“路径”？对象应该如何`parent`工作，尤其是：我们什么时候可以使用它，什么时候不可以？

PS：我正在考虑使用组合的完整 clientId，然后用 修剪其实际 ID `fn:split`，但是，如果有更直接的方式，我会很乐意使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:10:25.997

`#{cc.parent}`解析返回最近的[`UIComponent#getCompositeComponentParent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getCompositeComponentParent%28javax.faces.component.UIComponent%29)父复合组件。换句话说，仅`null`当复合组件本身嵌套在另一个复合组件中时，它才返回非。

`#{cc.namingContainer}`简单地引用自身，完全符合以下`#{cc}`规定[`UIComponent#getNamingContainer()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getNamingContainer%28%29)：

> **从 "this" 开始**，返回祖先中最接近的组件，`NamingContainer`如果`null`没有，则返回。

复合组件即隐式实现`NamingContainer`自己。

因此，不幸的是，您的尝试不会奏效。我也没有看到任何“标准 API”方法来实现具体的功能要求。无法解决的`CompositeComponentAttributesELResolver`原因是您最终想要的。`#{cc.parent}`[`UIComponent#getParent()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getParent%28%29)

但是，您可以`UIComponent`为组合提供一个自定义实现，它添加一个具有唯一名称的额外 getter，该名称反过来又正确地委托给`UIComponent#getParent()`.

这是一个启动示例：

```
@FacesComponent("myComposite")
public class MyComposite extends UINamingContainer {

    public UIComponent getParentComponent() {
        return super.getParent();
    }

} 
```

如果在复合界面注册如下：

```
<cc:interface componentType="myComposite"> 
```

那么你就可以使用

```
#{cc.parentComponent.clientId} 
```

to get the client ID of the *real* parent `UIComponent`.

Ultimately you should be able to use the following construct to refer the sibling:

```
process=":#{cc.parentComponent.clientId}:siblingId" 
```

# java - 解析具有相同父子标签的 XML，然后最好使用 SAX 解析器将父标签的值链接到子标签

> ID：13175513
> 
> 赞同：0
> 
> 时间：2012-11-01T10:52:41.297
> 
> 标签：java, xml-parsing

我想解析具有相同父子标签的 XML，然后最好使用 SAX 解析器将父标签的值链接到子标签。

这是 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- Protocol header -->
<Protocol id="Diameter customer, country" spec="RFC3588" 
          name="Diameter" version="1.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:noNamespaceSchemaLocation="file:/$CLASSES/cmg/stdapp/diameter/validation/Diameter_addon_schema.xsd">
 <!-- ACR declaration: Start -->
  <Request name="Start">
    <Condition key="Accounting-Record-Type" value="2"/>
    <AVP name="Node-Id" defaultValue="MTAS"/>
    <AVP name="Session-Id"/>
    <AVP name="Origin-Host"/>

        <AVP name="Subscription-Id">
            <AVP name="Subscription-Id-Type"/>
            <AVP name="Subscription-Id-Data"/>
        </AVP>
        <AVP name="IMS-Information">
            <AVP name="Event-Type">
                <AVP name="SIP-Method"/>
            </AVP>
            <AVP name="Role-of-Node"/>
         </AVP> 

  </Request>
<!---->

</Protocol> 
```

在此示例中，带有 name 的`AVP`标签具有具有相同 name 的子标签`AVP`。我想获取属性名称的值，然后将父项的值与子项的值相关联。我为此使用 SAX 解析器，但我无法区分父子标签，但没有区分父子标签。

Java 代码是

```
public void startElement(String s, String s1, String elementName, Attributes attributes) throws SAXException
{
    if (elementName.equalsIgnoreCase("AVP")) 
    {
        AVP_Tmp = new AVP();
        String nameValue = attributes.getValue("name");
         if (nameValue == null)
         {
             nameValue =attributes.getValue("value");
         }
         if (nameValue != null)
         {
             AVP_Tmp.set(nameValue,elementName,attributes);
         }
    }
}

@Override
public void endElement(String s, String s1, String element) throws SAXException 
{
    if (element.equals("AVP")) 
    {
        Object key = AVP_Tmp.tmpValue;
        Object value = AVP_Tmp.tmpValue;
        AVPL.put(key, value);                       
    }
} 
```

是一个类，其`AVP_Tmp`set方法如下：

```
public void set(String nameValue, String qName, Attributes attrs)//, int k)
{
    int len = attrs.getLength();
    tmpValue=qName + "-->" + nameValue;
    List list = new ArrayList();
    for (int i = 0; i < len; i++)
    {
        list.add(attrs.getQName(i));
    }
    Collections.sort(list);
    for (int i = 0; i < len; i++)
    {
         name1[i]= (Object)list.get(i);
         value1[i]=(attrs.getValue((String) list.get(i)));
        tmpValue=tmpValue+ "\n" +name1[i]+"="+value1[i];
    }
} 
```

我目前的输出为：

```
Node-Id
..
..
Subscription-Id
Subscription-Id-Type
IMS-Information
Event-Type
SIP-Method
.. 
```

我希望输出格式如下：

```
Node-Id
..
..
..
Subscription-Id#Subscription-Id-Type
IMS-Information#Event-Type#SIP-Method
.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:36:15.647

当我的目标正确时，我会这样做，即您构建“AVP-Structure”，然后提取所需的输出。

所以当一个新的 AVP 启动时，它看起来像这样（只是在伪代码中）：

```
if (parent == null){
   avpTemp = new AVP();
   parent = avpTemp;
} else {avpTemp = new AVP(parent); } 
```

解析后，您获得了层次结构并根据需要构建结构/结果。

# ruby - Ruby 中的继承和模块

> ID：13175519
> 
> 赞同：0
> 
> 时间：2012-11-01T10:53:14.700
> 
> 标签：ruby

我有这个结构：

```
class1 < class2 
```

一个简单的子<父关系。

我有一个模块，module1。

文件 CLASS_1.rb：

```
class1 < class2

end 
```

文件 CLASS_2.rb：

```
class2
  include module1
end 
```

文件 MODULE_1.rb：

```
module module1

end 
```

为什么我会得到这个：

```
'<class:class2>': uninitialized constant class2::module1 (NameError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:55:34.783

类/模块名称应该是常量（即以大写字母开头）。

```
class Class1 < Class2
  include Module1
end 
```

并且不要忘记要求相应的文件。

```
# class1.rb
require_relative 'class2'
require_relative 'module1'

class Class1 < Class2
  include Module1
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T10:55:48.577

`module1`必须在它被包含时创建。如果`class2`在 CLASS_2.rb 中定义/创建之前尚未加载或需要 MODULE_1.rb，则`module1`在包含到`class2`.

# css - 导轨视图 link_to

> ID：13175523
> 
> 赞同：0
> 
> 时间：2012-11-01T10:53:21.997
> 
> 标签：css, ruby-on-rails, link-to

谢谢你的时间！

我有一个代码：

```
<link href="/stylesheets/show.css" media="screen" rel="stylesheet" type="text/css">

<div id="body-container">
        <div id="left-column">
                <ul id="report-list">
                        <% for report in @reports %>
                            <li><%= link_to( report, {:controller => 'loadreport',
                                                      :action => 'get_report_content',
                                                      :test_name => report} )%></li>
                        <% end %>
                </ul>
        </div>
        <div id="right-column">

    </div>
</div> 
```

该`link_to`方法将生成这样的html标签：

```
<a href="/loadreport/get_report_content?name=Test1">Test1</a> 
```

我想在上面做些装饰`tag a`。所以在 CSS 文件中，我得到了这个代码：

```
a:link { text-decoration: none;}

a:hover {text-decoration-color: #adff2f;} 
```

未能将这些装饰添加到`tag a`. 我认为它`tag a`是由 rails`link_to`方法生成的。我们没有`tag a`提前的时间。我对吗？那我该如何实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:01:54.833

你可以试试这个：

```
a { text-decoration: none; }
a:hover { color: #adff2f; } 
```

# apache-flex - 数据适配器错误

> ID：13175527
> 
> 赞同：0
> 
> 时间：2012-11-01T10:53:33.917
> 
> 标签：apache-flex

不知道为什么 RPCDataServiceAdapter 会弹出错误。有一部分脚本与错误相关。

```
 public function normalusercontactdatagrid_creationCompleteHandler(event:FlexEvent):void
        {
            getAllNormaluserResult.token = normaluserService.getAllNormaluser();
        }

        protected function addUSER(event:MouseEvent):void
        {
            var win:IFlexDisplayObject =PopUpManager.createPopUp(this, addUser, true) as IFlexDisplayObject;

            PopUpManager.centerPopUp(win);

            var e:FlexEvent;
            normalusercontactdatagrid_creationCompleteHandler(e);
        } 
```

但显示以下数据适配器错误

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at mx.data::RPCDataServiceAdapter/processDataMessage()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\RPCDataServiceAdapter.as:987]
    at RPCDataServiceRequest/invoke()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\RPCDataServiceAdapter.as:1786]
    at mx.data::DataStore/http://www.adobe.com/2006/flex/mx/internal::invoke()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\DataStore.as:3497]
    at Function/<anonymous>()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\DataStore.as:1716]
    at Function/<anonymous>()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\DataStore.as:1584]
    at mx.data::DataStore/http://www.adobe.com/2006/flex/mx/internal::fill()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\DataStore.as:1771]
    at mx.data::ConcreteDataService/internalFill()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\ConcreteDataService.as:7504]
    at Function/<anonymous>()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\ConcreteDataService.as:1306]
    at mx.data::ConcreteDataService/fill()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\ConcreteDataService.as:1325]
    at mx.data::ConcreteDataService/executeQuery()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\ConcreteDataService.as:1607]
    at mx.data::DataManager/executeQuery()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\DataManager.as:1493]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.data::ManagedOperation/queryProxy()[C:\depot\DataServices\branches\milestone\lcds45_fb45\frameworks\projects\data\src\mx\data\ManagedOperation.as:519]
    at mx.rpc.remoting::Operation/send()[E:\dev\4.y\frameworks\projects\rpc\src\mx\rpc\remoting\Operation.as:212]
    at _Super_NormaluserService/getAllNormaluser()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\services\normaluserservice\_Super_NormaluserService.as:244]
    at normalUserDetailComp/normalusercontactdatagrid_creationCompleteHandler()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\normalUserDetailComp.mxml:80]
    at normalUserDetailComp/addUSER()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\normalUserDetailComp.mxml:93]
    at normalUserDetailComp/___normalUserDetailComp_LinkButton1_click()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\normalUserDetailComp.mxml:172] 
```

第 80 行、第 93 行和第 172 行的错误

是

```
line 80 getAllNormaluserResult.token = normaluserService.getAllNormaluser();
line 93 normalusercontactdatagrid_creationCompleteHandler(e);
line 172 <mx:LinkButton label="Add" click="addUSER(event);"/> 
```

如果我正确理解错误堆，我认为这些行会触发 dataService 中的错误，即

```
at _Super_NormaluserService/getAllNormaluser()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\services\normaluserservice\_Super_NormaluserService.as:244] 
```

这怎么可能发生？我该怎么办？

我发现如果我不在弹出窗口中调用 adduser.mxml ，错误将不会再次显示。adduser.mxml 如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx"
         xmlns:valueObjects="valueObjects.*"
         xmlns:userservice="services.userservice.*"
         xmlns:normaluserservice="services.normaluserservice.*"
         xmlns:specialcareuserservice="services.specialcareuserservice.*"
         width="522" height="732">
    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;
            import services.*;

            protected function button_clickHandler(event:MouseEvent):void
            {
                var userService:UserService = new UserService();
                var user2:User = new User();
                user2.idUser = parseInt(idUserTextInput.text);
                user2.userName = userNameTextInput.text;
                user2.password = passwordTextInput.text;

                createUserResult.token = userService.createUser(user2);
                userService.commit();

                var normaluserService:NormaluserService = new NormaluserService();
                var normaluser2:Normaluser = new Normaluser();
                normaluser2.user_idUser = parseInt(idUserTextInput.text);
                normaluser2.userFristName = userFristNameTextInput.text;
                normaluser2.userSecondName = userSecondNameTextInput.text;
                normaluser2.userAddress_Flat = userAddress_FlatTextInput.text;
                normaluser2.userAddress_Floor = userAddress_FloorTextInput.text;
                normaluser2.userAddress_Bulding = userAddress_BuldingTextInput.text;
                normaluser2.userAddress_Street = userAddress_StreetTextInput.text;
                normaluser2.userAddress_Dist = userAddress_DistTextInput.text;
                normaluser2.userAddress_Country = userAddress_CountryTextInput.text;

                createNormaluserResult.token = normaluserService.createNormaluser(normaluser2);
                normaluserService.commit();

                var specialcareuserService:SpecialcareuserService = new SpecialcareuserService();
                var specialcareuser2:Specialcareuser = new Specialcareuser();
                specialcareuser2.specialCareRequirement_idspecialCareRequirement = parseInt(specialCareRequirement_idspecialCareRequirementTextInput.text);
                specialcareuser2.user_idUser = parseInt(idUserTextInput.text);

                createSpecialcareuserResult.token = specialcareuserService.createSpecialcareuser(specialcareuser2);
                specialcareuserService.commit();
            }

        ]]>
    </fx:Script>

    <fx:Declarations>
        <valueObjects:User id="user"/>
        <userservice:UserService id="userService" 
                                 fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                 showBusyCursor="true"/>
        <s:CallResponder id="createUserResult"/>
        <valueObjects:Normaluser id="normaluser"/>
        <normaluserservice:NormaluserService id="normaluserService"
                                             fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                             showBusyCursor="true"/>
        <s:CallResponder id="createNormaluserResult"/>
        <valueObjects:Specialcareuser id="specialcareuser"/>
        <specialcareuserservice:SpecialcareuserService id="specialcareuserService"
                                                       fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)"
                                                       showBusyCursor="true"/>
        <s:CallResponder id="createSpecialcareuserResult"/>

    </fx:Declarations>

    <s:Form x="43" y="10" width="445" height="727" >
        <s:FormItem label="IdUser">
            <s:TextInput id="idUserTextInput" text="{user.idUser}"/>
        </s:FormItem>
        <s:FormItem label="UserName">
            <s:TextInput id="userNameTextInput" text="{user.userName}"/>
        </s:FormItem>
        <s:FormItem label="Password">
            <s:TextInput id="passwordTextInput" text="{user.password}"/>
        </s:FormItem>
        <s:FormHeading width="266" label="User Detail (Name, address...)"/>
        <s:FormItem label="Frist Name">
            <s:TextInput id="userFristNameTextInput" text="{normaluser.userFristName}"/>
        </s:FormItem>
        <s:FormItem label="Second Name">
            <s:TextInput id="userSecondNameTextInput" text="{normaluser.userSecondName}"/>
        </s:FormItem>
        <s:FormItem label="Flat">
            <s:TextInput id="userAddress_FlatTextInput" text="{normaluser.userAddress_Flat}"/>
        </s:FormItem>
        <s:FormItem label="Floor">
            <s:TextInput id="userAddress_FloorTextInput" text="{normaluser.userAddress_Floor}"/>
        </s:FormItem>
        <s:FormItem label="UserAddress_Bulding">
            <s:TextInput id="userAddress_BuldingTextInput" text="{normaluser.userAddress_Bulding}"/>
        </s:FormItem>
        <s:FormItem label="Street">
            <s:TextInput id="userAddress_StreetTextInput" text="{normaluser.userAddress_Street}"/>
        </s:FormItem>
        <s:FormItem label="Dist">
            <s:TextInput id="userAddress_DistTextInput" text="{normaluser.userAddress_Dist}"/>
        </s:FormItem>
        <s:FormItem label="Country">
            <s:TextInput id="userAddress_CountryTextInput" text="{normaluser.userAddress_Country}"/>
        </s:FormItem>
        <s:FormHeading label="Special Requirement"/>

        <s:FormItem label="Care Requirement">
            <s:helpContent>
                <s:VGroup>
                    <s:Label text="Special Requirement?"></s:Label>
                </s:VGroup>
            </s:helpContent>
            <s:TextInput id="specialCareRequirement_idspecialCareRequirementTextInput"
                         text="{specialcareuser.specialCareRequirement_idspecialCareRequirement}"/>
        </s:FormItem>
            <s:Button id="button" label="CreateUser" click="button_clickHandler(event)"/>
    </s:Form>
</s:Group> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:38:09.677

无论出于何种原因，调用 CreationComplete() 时您的 RPC 连接都不可用。您可以延迟调用它（一个短的计时器？）或从 CreationComplete 调用其他一些延迟直到建立 RPC 连接的函数。或许同时显示一个“工作...”对话框。

无论哪种方式，您都应该在此时测试 null 并捕获错误。

# scrollbar - 在php中创建自动滚动条

> ID：13175531
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:53:41.170
> 
> 标签：scrollbar

我正在我的网页中进行图像裁剪。我的问题是，当我裁剪大于容纳图像的容器的大图像时，滚动条不会自动出现。所以我无法裁剪剩余部分在下方的大图像对用户不可见的容器。所以有什么方法可以创建自动滚动条。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:56:34.697

您想使用 css 溢出属性

```
<div style='overflow:auto;width:300px;height:300px;'>
    <img src='image.png' width='1000' height='1000' />
</div> 
```

它将加载 1000x1000 像素的图像，但可滚动区域仅为 300 x 300 像素。

其他可能的溢出值是：可见、隐藏、滚动、自动、继承

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

# android - 在 Kindle Fire 上发送 html 电子邮件

> ID：13175540
> 
> 赞同：4
> 
> 时间：2012-11-01T10:54:06.773
> 
> 标签：android, email-client, kindle-fire

在我们的应用程序中，我们发送带有一些 html 的电子邮件。这在每个“普通”Android 设备上都可以正常工作，但是当我从 Kindle Fire 发送这些电子邮件时，似乎当电子邮件到达收件人时，mime 编码已从 text/html 更改为 text/plain。

首次在 Kindle 上的电子邮件客户端中创建电子邮件时，您可以看到已设置 href，因为链接的文本是蓝色而不是正常的黑色。

我已经为 Fire 尝试了 K-9 电子邮件客户端，看看这是否有任何区别，但没有任何变化。以下是我们通过电子邮件分享应用程序的示例代码（我使用设备制造商来确定是使用 Google Play 还是亚马逊应用市场链接）：

```
 Shareable shareable = new ShareableApp(Build.MANUFACTURER);

  final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
  emailIntent.setType("text/html");
  emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, getString(R.string.share_app_email_subject));
  emailIntent.putExtra(
          android.content.Intent.EXTRA_TEXT,
          Html.fromHtml(getString(R.string.share_email_content, "<a href=\"" + NetworkQuery.HTTP + shareable.getShareHost() + "/" + shareable.getSharePath() + "\">" + shareable.getShareTitle() + "<//a>") + "<br><br>"
              + this.getString(R.string.share_email_description)));
  final PackageManager pm = getActivity().getPackageManager();
  final List<ResolveInfo> emailers = pm.queryIntentActivities(emailIntent, PackageManager.GET_RESOLVED_FILTER);
  if (emailers.size() > 0) {
     startActivity(Intent.createChooser(emailIntent, "Email:"));
  } else {
     displayMessage(R.string.dialog_message_no_email_client);
  } 
```

有什么方法可以从 Kindle Fire 正确发送 html 电子邮件？

## 编辑

> 如果我将 HTML 电子邮件发送到 Kindle Fire，我可以将其发送到其他地方，并且保持 Mime 编码。似乎只是在 Kindle 上实际创建电子邮件时 setType("text/html") 没有持久化。

# java - WEBSERVICES：如何在 Web 服务中存储格式错误的 XML？

> ID：13175549
> 
> 赞同：2
> 
> 时间：2012-11-01T10:54:31.960
> 
> 标签：java, xml, web-services

我正在托管一个网络服务。我想处理这种情况，以防客户端发送格式错误的 XML

这是我创建的处理程序

```
public boolean handleMessage(SOAPMessageContext smc)
{
    Boolean outboundProperty =
        (Boolean)smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    SOAPMessage message = null;
    try
    {
               // This handling iss required in case a mal-formed XML is sent.    
               message = smc.getMessage();    
    }
    catch(Throwable t ) 
    { 
          // I want to log the XML in the database
          // But the problem is I don't know how to get the XML
          // as message is null.
    }

} 
```

我进入了 catch(Throwable t) 块，在那里我没有关于发送的 XML 的信息。我可以登录到错误日志表中的只是客户端发送了格式错误的 XML。

实际要求：

记录和存储格式错误的 XML 以进行跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:00:15.733

请使用以下代码获取肥皂消息中的确切行号和异常以进行日志记录：

```
public boolean handleMessage(SOAPMessageContext mc) {
    try {
        final SOAPMessage message = mc.getMessage();

        String i = convertToString(message);

        System.out.println(i);

        return true;
    } catch (Exception e) {
        System.out.println(e.getMessage());
//            e.printStackTrace();
        return false;
    }
} 
```

此代码将处理任何格式错误的 SOAP 消息

# mysql - MySQL 数据库查询返回空结果

> ID：13175550
> 
> 赞同：2
> 
> 时间：2012-11-01T10:54:31.857
> 
> 标签：mysql, sql, select, join

我正在进行数据迁移，并通过一个连接获得简单查询的空结果。以下是查询

```
Select * from users u INNER JOIN temp_users tu ON tu.uid = u.uid 
```

两个表中有数百条具有相同 uid 的记录，但此查询仅返回一条记录。

以下是表的结构

```
users table
uid:  varchar(50)   utf8_general_ci         Yes     NULL 

temp_users table
uid: varchar(50)    utf8_general_ci         Yes     NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:59:20.997

尝试这个..

```
Select * from users u INNER JOIN temp_users tu ON trim(upper(tu.uid)) = trim(upper(u.uid)); 
```

可能没有匹配的 id b/w 表格.. 确认使用..

```
Select u.id,tu.id from users u LEFT JOIN temp_users tu ON trim(upper(tu.uid)) = trim(upper(u.uid)); 
```

# url - 如何使用机器学习对网址进行分类？

> ID：13175555
> 
> 赞同：5
> 
> 时间：2012-11-01T10:54:45.010
> 
> 标签：url, machine-learning

我正在为网站的内容编制索引，并且我想仅基于 url 实现一些分类。

我想从导航页面告诉 appart 内容视图页面。“内容查看页面”是指通常可以查看产品或书面文章详细信息的网页。“导航页面”是指（通常）由指向内容页面或其他更具体列表页面的链接列表组成的页面。

尽管有些站点使用站点范围的密钥系统来映射其内容，但大多数站点都会一点一点地进行并确定其密钥映射的范围，因此这应该是可能的。

在实践中，我想要做的是从站点中获取 url 列表并按相似度对它们进行分组。我相信这可以通过机器学习来完成，但我不知道怎么做。机器学习似乎是一个广泛的话题，我应该特别开始阅读什么？哪些概念，哪些算法，哪些工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:32:49.790

如果你想自动发现这些组，我建议你自己找一个聚类算法的实现（[K-Means](http://en.wikipedia.org/wiki/K-means_clustering)可能是最流行的，你不要说你想用什么语言来做）。您知道有两个类别，因此允许您先验地指定类别数量的东西将使问题更容易。

之后，为您的网页定义一堆特征，并通过 k-means 运行它们以查看生成了哪些类型的组。调整你使用的功能，直到你得到看起来令人满意的东西。如果您可以访问网页本身，我强烈建议您使用在整个页面上定义的功能，而不仅仅是 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T18:32:51.597

您首先需要收集导航/内容页面的数据集并标记它们。在那之后，它非常直截了当。

您将使用什么语言？我建议你试试[Weka](http://www.cs.waikato.ac.nz/ml/weka/)，它是一个基于 java 的工具，你可以简单地按下一个按钮并从中获取 50 多种算法的性能度量。之后，您将知道哪个是最准确的并且可以部署它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T23:02:01.503

我觉得您正在尝试在[HITS](http://en.wikipedia.org/wiki/HITS_algorithm)算法中对`Authority`and进行分类。`Hub`

*   `Hub`是您的导航页面；
*   `Authority`是您的内容查看页面。

通过对每个网页进行链接分析，您应该能够通过对域中的所有网页执行 HITS 来找出页面的类型。如下图所示，左图显示了网页之间的链接关系。右图显示了运行 HITS 后相对于集线器/权限的评分。HITS 不需要任何标签即可启动。更新规则很简单：基本上只是一次更新权威分数，另一次更新中心分数。

![在此处输入图像描述](../Images/6b125d39a496c9675079b62a92bf7d1e.png) ![在此处输入图像描述](../Images/017dd8bded98b1f2087c1ef4ac42ba7e.png)

[这](http://www.cis.hut.fi/Opinnot/T-61.6020/2008/pagerank_hits.pdf)是一个讨论pagerank / HITS的教程，我借用了上面的两个图表。

[这](http://delab.csd.auth.gr/~dimitris/courses/ir_spring06/page_rank_computing/p527-li.pdf)是 HITS 的扩展版本，用于结合 HITS 和信息检索方法（TF-IDF、向量空间模型等）。这看起来更有希望，但肯定需要更多的工作。我建议你从 naive HITS 开始，看看它有多好。最重要的是，尝试[BHITS](http://delab.csd.auth.gr/~dimitris/courses/ir_spring06/page_rank_computing/p527-li.pdf)中提到的一些技巧来提高你的表现。

# r - par(mfcol=c(2,1)) 和空白的第二行

> ID：13175556
> 
> 赞同：2
> 
> 时间：2012-11-01T10:54:48.967
> 
> 标签：r

我想知道为什么下面的代码不会产生一个在另一个之下的两个图。

```
data(mtcars)
library(randomForest)

mtcars.rf <- randomForest(mpg ~ ., data=mtcars, ntree=1000, keep.forest=FALSE,
                          importance=TRUE)
png("rf1.png", width=6, height=6, units="in", res=100)
par(mfcol=c(2,1))
varImpPlot(mtcars.rf)
plot(mtcars.rf, log="y")
dev.off() 
```

这只会产生

![在此处输入图像描述](../Images/f92baa1223061424d276c38bedb9c409.png)

第二行空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:28:15.197

问题是 varImpPlot 重新定义了绘图区域，然后将其重置为以前的值。这意味着它的行为就像您在线路`par(mfcol=c(2,1))` *之后调用一样。*`varImpPlot`如果您提取 varImpPlot 绘图数据，您可以自己绘制两个点图（您可以使用`layout`而不是`par`将绘图区域分成不同形状的区域）：

```
data(mtcars)
library(randomForest)

mtcars.rf <- randomForest(mpg ~ ., data=mtcars, ntree=1000, keep.forest=FALSE,
                          importance=TRUE)
varImpData <- varImpPlot(mtcars.rf) # calculate this outside the plot

png("rf1.png", width=6, height=6, units="in", res=100)
layout(matrix(c(1,2,3,3), 2, 2, byrow = TRUE))
dotchart(varImpData[,c(1)])
dotchart(varImpData[,c(2)])
plot(mtcars.rf, log="y")
dev.off() 
```

# editor - Visual Studio 2012 编辑器的破折号行未正确显示

> ID：13175569
> 
> 赞同：3
> 
> 时间：2012-11-01T10:55:47.370
> 
> 标签：editor, visual-studio-2012

尝试在 Visual Studio 2012 编辑器中输入以下破折号行：

//--------------------------------------------

在 90 个破折号之后，编辑器似乎插入了 2 个空格。但事实并非如此！如果您将该行复制并粘贴到记事本，它会显示破折号行是完整的。

功能还是错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:03:01.417

绝对是一个错误，我也看到了这个，并认为我的安装有问题。他们发布了一个反馈工具，可用于提交错误。试试看：http: [//visualstudiogallery.msdn.microsoft.com/f8a5aac8-0418-4f88-9d34-bdbe2c4cfe72](http://visualstudiogallery.msdn.microsoft.com/f8a5aac8-0418-4f88-9d34-bdbe2c4cfe72)

# php - 同时保存数据和链接的按钮 INPUT

> ID：13175572
> 
> 赞同：-2
> 
> 时间：2012-11-01T10:55:56.283
> 
> 标签：php, html, post, button

我正在做一份问卷（表格），我需要放置一个提交按钮来做两件事：

1.  成为按钮类型 INPUT（因为我需要在我的 PHP 代码上使用这种按钮，我已经`if(@$_POST['Next'])`将表单的日期保存在我的数据库中）。

2.  该按钮将有一个链接，用于转到调查问卷的下一个屏幕。我试过了

    ```
    <a href="demo2.html" target="_blank">
        <input class="buttonNext" name="submit" type="submit" value="NEXT &#8592">
    </a> 
    ```

此代码不起作用，但使用 IE 浏览器，页面上会在我的按钮旁边出现一个圆圈，即链接。所以按钮不起作用；它只保存数据，但不链接到下一页。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:02:26.380

表单的操作决定了表单发送到的 URL，这对您有好处（它被发送到处理此步骤的 PHP）。它可以保存数据和/或再次返回表单以显示验证错误。一旦您决定进行下一步，您可以将用户重定向到该 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:05:55.647

使用`if(isset($_POST['Next'])){`而不是`@`

# c++ - 为什么使用（私有）gettimeoftheday（）即纪元重复微秒时间戳

> ID：13175573
> 
> 赞同：2
> 
> 时间：2012-11-01T10:55:58.370
> 
> 标签：c++, performance, time, timestamp, epoch

我正在使用 gettimeofday() 连续打印微秒。正如程序输出中给出的那样，您可以看到时间不是更新的微秒间隔，而是某些样本的重复时间，然后增量不是以微秒为单位，而是以毫秒为单位。

```
while(1)
{
  gettimeofday(&capture_time, NULL);
  printf(".%ld\n", capture_time.tv_usec);
} 
```

程序输出：

```
.414719
.414719
.414719
.414719
.430344
.430344
.430344
.430344

 e.t.c 
```

我希望输出按顺序递增，例如，

```
.414719
.414720
.414721
.414722
.414723 
```

或者

```
.414723, .414723+x, .414723+2x, .414723 +3x + ...+ .414723+nx 
```

当我从 capture_time.tv_usec 获取微秒时，它似乎没有刷新。

===================================//完整程序

```
#include <iostream>
#include <windows.h>
#include <conio.h>
#include <time.h>
#include <stdio.h>

#if defined(_MSC_VER) || defined(_MSC_EXTENSIONS)
  #define DELTA_EPOCH_IN_MICROSECS  11644473600000000Ui64
#else
  #define DELTA_EPOCH_IN_MICROSECS  11644473600000000ULL
#endif

struct timezone 
{
  int  tz_minuteswest; /* minutes W of Greenwich */
  int  tz_dsttime;     /* type of dst correction */
};

timeval capture_time;  // structure

int gettimeofday(struct timeval *tv, struct timezone *tz)
{
  FILETIME ft;
  unsigned __int64 tmpres = 0;
  static int tzflag;

  if (NULL != tv)
  {
    GetSystemTimeAsFileTime(&ft);

    tmpres |= ft.dwHighDateTime;
    tmpres <<= 32;
    tmpres |= ft.dwLowDateTime;

    /*converting file time to unix epoch*/
    tmpres -= DELTA_EPOCH_IN_MICROSECS; 
    tmpres /= 10;  /*convert into microseconds*/
    tv->tv_sec = (long)(tmpres / 1000000UL);
    tv->tv_usec = (long)(tmpres % 1000000UL);
  }

  if (NULL != tz)
  {
    if (!tzflag)
    {
      _tzset();
      tzflag++;
    }

    tz->tz_minuteswest = _timezone / 60;
    tz->tz_dsttime = _daylight;
  }

  return 0;
}

int main()
{
   while(1)
  {     
    gettimeofday(&capture_time, NULL);     
    printf(".%ld\n", capture_time.tv_usec);// JUST PRINTING MICROSECONDS    
   }    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:42:59.020

您观察到的时间变化是 0.414719 秒到 0.430344 秒。差异为 15.615 毫秒。数字的表示是微秒这一事实**并不**意味着它增加了 1 微秒。事实上，我预计 15.625 毫秒。这是标准硬件上的系统时间增量。我在[这里](https://stackoverflow.com/a/11743614/1504523)和[这里](http://www.windowstimestamp.com/description)仔细看了看。这称为系统时间的*粒度*。

**视窗：**

但是，有一种方法可以改善这一点，一种降低粒度的方法：[多媒体计时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)。特别是[获取和设置定时器分辨率](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743626%28v=vs.85%29.aspx)将揭示一种增加系统中断频率的方法。

编码：

```
#define TARGET_PERIOD 1         // 1-millisecond target interrupt period

TIMECAPS tc;
UINT     wTimerRes;

if (timeGetDevCaps(&tc, sizeof(TIMECAPS)) != TIMERR_NOERROR) 
// this call queries the systems timer hardware capabilities
// it returns the wPeriodMin and wPeriodMax with the TIMECAPS structure
{
  // Error; application can't continue.
}

// finding the minimum possible interrupt period:

wTimerRes = min(max(tc.wPeriodMin, TARGET_PERIOD ), tc.wPeriodMax);
// and setting the minimum period:

timeBeginPeriod(wTimerRes); 
```

这将强制系统以最大中断频率运行。结果，系统时间的更新也将更频繁地发生，并且系统时间增量的粒度将`close to 1 milisecond`在大多数系统上。

当您应该得到超出此范围的分辨率/粒度时，您必须查看[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)。但是，在较长时间内使用它时要小心使用。这个计数器的频率可以通过调用[QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx)来获得。操作系统将此频率视为常数，并将始终给出相同的值。但是，某些硬件会产生此频率，并且真实频率与给定值不同。它有一个偏移量，并显示出热漂移。因此，应假定误差在几微秒到几微秒/秒的范围内。可以在上面的第二个“此处”链接中找到有关此内容的更多详细信息。

**Linux：**

Linux 的情况看起来有些不同。看到[这个](http://wwwagss.informatik.uni-kl.de/Projekte/Squirrel/da/node5.html)得到一个想法。[Linux 使用函数getnstimeofday](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c#L294) （自纪元以来的秒数）混合 CMOS 时钟信息和使用函数[timekeeping_get_ns](http://lxr.free-electrons.com/source/kernel/time/timekeeping.c#L206)来自高频计数器的信息（微秒）。这不是微不足道的，并且在准确性方面值得怀疑，因为这两个来源都由不同的硬件支持。这两个源不是锁相的，因此每秒可以获得**多于/少于一百万微秒。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:46:52.830

Windows 系统时钟每隔几毫秒就会滴答一次——在你的情况下是每秒 64 次，所以当它滴答作响时，它会将系统时间增加 15.625 毫秒。

解决方案是使用比系统时间 ( ) 更高分辨率的计时器`QueryPerformanceCounter`。

但是，您仍然看不到 .414723、.414723+x、.414723+2x、.414723 +3x + ...+ .414723+nx，因为您的代码不会每`x`微秒运行一次。它会尽可能快地运行，但没有特别的理由应该始终保持恒定速度，或者如果是这样，那么它就是整数微秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T14:15:12.017

我建议您查看 C++11[`<chrono>`](http://en.cppreference.com/w/cpp/chrono)标头。

> `high_resolution_clock`(C++11) 可用的最短滴答周期的时钟

这里提到的*滴答周期*是时钟更新的频率。如果我们查看[更多细节](http://en.cppreference.com/w/cpp/chrono/duration)：

> ```
> template<
>      class Rep,
>      class Period = std::ratio<1>
> > class duration; 
> ```
> 
> 类模板`std::chrono::duration`代表一个时间间隔。
> 
> **它由 Rep 类型的滴答计数和滴答周期组成**，其中滴答周期是编译时有理常数，表示从一个滴答到下一个滴答的秒数。

以前，像这样的函数`gettimeofday`会给你一个以微秒表示的时间，但是它们完全无法告诉你刷新这个时间表达式的时间间隔。

在 C++11 标准中，此信息现在是明确的，以明确*表示时间的单位与滴答周期之间没有关系*。因此，您绝对需要将两者都考虑在内。

当您想要测量接近它的持续时间时，*滴答期非常重要。*如果您希望测量的持续时间低于滴答周期，那么您将像观察到的那样“离散”测量它：0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, ...我建议在这一点上谨慎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:04:07.477

这是因为运行代码的进程并不总是计划执行。

虽然它确实如此，但它会快速循环，每微秒打印多个值 - 这在现代 CPU 上是一个相对较长的时间段。

然后有一些时间段，系统没有安排它执行，因此无法打印值。

如果您想要做的是每微秒执行一次，那么这可以通过在高性能硬件上运行的一些实时操作系统来实现。

# c# - 运行单元测试时测试类的范围是什么？

> ID：13175576
> 
> 赞同：4
> 
> 时间：2012-11-01T10:56:13.397
> 
> 标签：c#, visual-studio, unit-testing, scope, mstest

当 Visual Studio 运行单元测试时，它会同时运行许多测试。这些运行时测试类的范围到底是什么。它们都是在不同的应用程序域中运行还是完全共享数据？

例如，如果我有以下测试类：

```
[TestClass]
public class FooTests
{
    Mock<ISomeInterface1> _complexMock1;
    Mock<ISomeInterface2> _complexMock2;

    public void CreateComplexMocks()
    {
        //set up _complexMock1 & _complexMock2
    }

    [TestMethod]
    public void Test1()
    {
        CreateComplexMocks();

        //use _complexMock1 & _complexMock2 in test
    }

    [TestMethod]
    public void Test2()
    {
        CreateComplexMocks();

        //use _complexMock1 & _complexMock2 in test
    }
} 
```

测试利用`CreateComplexMocks()`助手来构建一些模拟。这些作为成员公开，而不是被传递回测试（在现实世界的例子中可能会有更多）

我的问题是，如果两个测试同时运行，它们会共享`_complexMock1`and的状态`_complexMock2`吗？

如果 complexMocks 是静态的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:30:36.700

找到[这个博客](http://blogs.msdn.com/b/nnaderi/archive/2007/02/17/explaining-execution-order.aspx)后，似乎每个测试都在不同的线程上实例化了一个单独的测试类。

所以实例成员不会被共享，但静态成员会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:20:28.877

在您的示例中，您应该在 [TestInitialize] 方法中创建模拟。
每次运行测试时，您的模拟都会再次创建。

```
[TestInitialize]
public void TestInit()
{
    CreateComplexMocks();
} 
```

# android - 如何使用 VideoView 将视频放在背景图像上方？

> ID：13175578
> 
> 赞同：2
> 
> 时间：2012-11-01T10:56:16.927
> 
> 标签：android

有没有办法在`VideoView`图像（这是我的应用程序的背景）上方放置一个（播放 MP4 文件）？

换句话说，有没有办法在我的 VideoView 上设置一些透明度，以使图像通过 VideoView 可见？

每次我尝试在 上放置`VideoView`时`ImageView`，都会`VideoView`隐藏其中的一部分`ImageView`（我试图在我的 alpha 上放置一个 alpha`VideoView`但它不起作用）。

# reporting-services - 是否可以将分组字段放在 SSRS 的表格顶部？

> ID：13175589
> 
> 赞同：1
> 
> 时间：2012-11-01T10:56:53.760
> 
> 标签：reporting-services

是否可以在 SSRS 中进行这种布局？

```
2012/11/01
-----------------------------
| Order # | Product   | Qty |
-----------------------------
|         | Mouse     | 3   |
|    1    | Keyboard  | 2   |
|         | CPU       | 5   |
-----------------------------
|         | Mouse     | 1   |
|    2    | Keyboard  | 7   |
|         | Lan Cable | 7   |
-----------------------------

2012/11/02
-----------------------------
| Order # | Product   | Qty |
-----------------------------
|         | Mouse     | 2   |
|         | Keyboard  | 8   |
|    3    | Memory    | 4   |
|         | CPU       | 2   |
|         | Battery   | 1   |
----------------------------- 
```

我尝试找到可以做到这一点的属性，也尝试将字段拖到顶部但无济于事:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:37:11.090

是的，您可以这样做，如果您嵌套两个 tablix（列表中的一个表），这是最简单的。制作一个按日期字段分组的列表。在列表内放置按订单 ID 对行进行分组的表格。这看起来像这样：

```
 ----
2012/11/01                                 |
-----------------------------              | 
| Order # | Product   | Qty |              |
-----------------------------              |
|         | Mouse     | 3   |              |
|    1    | Keyboard  | 2   |              | --- List item 1
|         | CPU       | 5   |              |
-----------------------------              |
|         | Mouse     | 1   |              |
|    2    | Keyboard  | 7   |              |
|         | Lan Cable | 7   |              |
-----------------------------              |
                                       ----
                                       ----
2012/11/02                                 |
-----------------------------              |
| Order # | Product   | Qty |              |
-----------------------------              |
|         | Mouse     | 2   |              | --- List item 2
|         | Keyboard  | 8   |              |
|    3    | Memory    | 4   |              |
|         | CPU       | 2   |              |
|         | Battery   | 1   |              |
-----------------------------              |
                                       ---- 
```

或者，您可以制作一张大桌子：

*   按日期分组行
*   在此之下，按订单 ID 对行进行分组
*   为最顶层的组创建组标题，合并标题中的单元格，并在那里显示日期

在这种方法中，我不能 100% 确定您是否可以轻松地重复日期组中每个项目的标题。

# r - R中的按列聚类

> ID：13175596
> 
> 赞同：0
> 
> 时间：2012-11-01T10:57:15.403
> 
> 标签：r

我有以下方式的数据矩阵：

```
ID_REF GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
244901 5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
244902 5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
244903 5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
244904 5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
244905 5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
244906 5.786557533 5.242403911 5.060605782 5.458148567 5.890061836 
```

我想按列对它进行聚类以找出相似的启动子（列代表启动子，行代表基因）。我之前使用 pv clust 来完成它，但希望有更详细的聚类（可能是分层类型？）。我想知道这些列聚集在一起的距离。我总共有 20 列和 22810 个基因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:01:05.160

谷歌搜索`R clustering`会产生许多有趣的结果。一个选项可能是`hclust`. [这个链接](http://rdatamining.wordpress.com/2011/08/26/examples-on-clustering-with-r/)也可能很有趣。

# webkit - ipad 对象滚动条

> ID：13175597
> 
> 赞同：1
> 
> 时间：2012-11-01T10:57:15.457
> 
> 标签：webkit, overflow

这里的第一个计时器。我帮助管理一个 WordPress 网站，该网站在溢出的 div 中嵌入了一个 html 对象。滚动条功能在 PC 上运行良好；但是，在 ipad（我假设是 iphone 和 android 设备）上，滚动条不会出现。我拥有的html是：

```
#wrapper {
width:100%;
height:360px;
overflow:scroll;
-webkit-overflow-scrolling:touch;
}

#wrapper object {
width: 100%;
height: 100%;
}

<div id="wrapper">
<object id="object" type="text/html" data="[link to html page with lots of <tr> rows]"
</object>
</div> 
```

我想知道 webkit 溢出属性是否应该在对象而不是 div 上才能使其正常工作？

# delphi-xe2 - 如何控制 TeeChart 的系列标记位置？

> ID：13175599
> 
> 赞同：0
> 
> 时间：2012-11-01T10:57:22.883
> 
> 标签：delphi-xe2, firemonkey, teechart

我想在自定义位置绘制标记，但最好的事件或程序是什么？因为如果我在 OnAfterDraw 事件中处理它们，我的图表将被渲染两次等等。是否可以在绘制图表之前设置位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:43:51.520

您需要至少绘制一次系列（因此已填充其标记的位置）才能修改这些位置。

# arrays - 如何在perl中快速比较数组

> ID：13175603
> 
> 赞同：3
> 
> 时间：2012-11-01T10:57:30.467
> 
> 标签：arrays, perl

> **可能重复：**
> [在 Perl 中，是否有内置方法来比较两个数组是否相等？](https://stackoverflow.com/questions/1609467/in-perl-is-there-a-built-in-way-to-compare-two-arrays-for-equality)

我需要将数组与应该返回的函数进行比较：

*   如果在成对比较时所有元素都相等，则为 true
*   如果所有元素都相等或成对比较时**第一个数组中的元素未定义，则为 true**
*   在所有其他情况下为假

换句话说，如果子被称为“comp”：

```
@a = ('a', 'b', undef, 'c');
@b = ('a', 'b', 'f', 'c');
comp(@a, @b); # should return true
comp(@b, @a); # should return false

@a = ('a', 'b');
@b = ('a', 'b', 'f', 'c');
comp(@a, @b); # should return true 
```

显而易见的解决方案是在两个数组之间进行成对比较，但我希望它比这更快，因为比较在一大组数组上运行多次，并且数组可能有很多元素。

另一方面，要比较的数组的内容（即：所有可能的@b）是预先确定的并且不会改变。数组的元素没有固定的长度，并且不能保证它们可能包含哪些字符（制表符、逗号，你可以命名它）。

有比成对比较更快的方法吗？智能匹配不会削减它，因为如果*所有*元素都相等，它会返回 true（因此如果一个是 undef，则不是）。

打包和进行按位比较可以成为一种策略吗？当我浏览 pack/unpack 和 vec 的文档时，它看起来很有希望，但我在那里有点超出了我的深度。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T18:00:04.860

Perl 可以在我的 Macbook 上在大约 100 毫秒内比较 10,000 个成对元素的列表，所以我要说的第一件事是[分析你的代码](https://metacpan.org/module/Devel%3a%3aNYTProf)以确保这确实是问题所在。

做一些基准测试，你可以做一些事情来加快速度。

*   确保在第一次匹配失败时保释。

假设您有很多不匹配的比较，这将节省大量时间。

*   预先检查数组的长度是否相同。

如果它们的数组长度不同，则它们永远不会匹配。比较它们的尺寸，如果它们不同，请尽早返回。这避免了需要在循环内一遍又一遍地检查这种情况。

*   使用迭代器而不是 C 风格的 for 循环。

成对迭代你通常会做类似的事情，`for( my $idx = 0; $idx <= $#a; $idx += 2 )`但迭代数组比使用 C 风格的 for 循环更快。这是 Perl 的一个优化技巧，在优化的 C 中在 perl 中执行工作比在 Perl 代码中执行更有效。这会为您带来大约 20%-30% 的收益，具体取决于您如何对其进行微优化。

```
for my $mark (0..$#{$a}/2) {
    my $idx = $mark * 2;
    next if !defined $a->[$idx] || !defined $b->[$idx];
    return 0 if $a->[$idx] ne $b->[$idx] || $a->[$idx+1] ne $b->[$idx+1];
}
return 1; 
```

*   预先计算有趣的索引。

由于一组对是固定的，您可以生成定义了哪些对的索引。这使得迭代器更加简单和快速。

```
state $indexes = precompute_indexes($b);

for my $idx ( @$indexes ) {
    next if !defined $a->[$idx];
    return 0 if $a->[$idx] ne $b->[$idx] || $a->[$idx+1] ne $b->[$idx+1];
}

return 1; 
```

没有空值，这是 40% 的性能提升。你得到的越多，固定集中的空值就越多。

```
use strict;
use warnings;
use v5.10;  # for state

# Compute the indexes of a list of pairs which are interesting for
# comparison: those with defined keys.
sub precompute_indexes {
    my $pairs = shift;

    die "Unbalanced pairs" if @$pairs % 2 != 0;

    my @indexes;
    for( my $idx = 0; $idx <= $#$pairs; $idx += 2 ) {
         push @indexes, $idx if defined $pairs->[$idx];
     }

    return \@indexes;
}

sub cmp_pairs_ignore_null_keys {
    my($a, $b) = @_;

    # state is like my but it will only evaluate once ever.
    # It acts like a cache which initializes the first time the
    # program is run.
    state $indexes = precompute_indexes($b);

    # If they don't have the same # of elements, they can never match.
    return 0 if @$a != @$b;

    for my $idx ( @$indexes ) {
        next if !defined $a->[$idx];
        return 0 if $a->[$idx] ne $b->[$idx] || $a->[$idx+1] ne $b->[$idx+1];
    }

    return 1;
} 
```

我仍然相信在 SQL 中使用自连接会更好，但还没有解决。

# google-apps-script - GmailApp 需要脚本以用户身份运行，而 SpreadsheetApp 需要所有者授权？

> ID：13175606
> 
> 赞同：2
> 
> 时间：2012-11-01T10:57:43.960
> 
> 标签：google-apps-script

我编写了一个谷歌应用程序脚本，该脚本从我的员工那里获取信息，并将其写入只有我可以访问的电子表格中。它还会向员工邮寄他们填写的信息。脚本嵌入在我的谷歌网站中。**问题**是，我必须以所有者身份运行脚本才能编辑电子表格并发送电子邮件，脚本必须以“运行脚本的用户”身份运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:51:02.253

鉴于您的情况，您希望您的脚本在两种模式下运行 - “用户执行应用程序”和您自己，这显然是不可能的。但是，您可以使用一些解决方法。

1.  将脚本设置为以访问应用程序的用户身份运行，并更改电子表格的权限以提供对“知道链接的任何人”的访问权限。这样一来，除非他们以某种方式知道电子表格 ID，否则没有其他员工可以访问或发现电子表格。

2.  另一种选择是将脚本设置为以您自己的身份运行，将电子表格保密并利用高级参数的 replyTo 和 name 选项（[https://developers.google.com/apps-script/class_mailapp#sendEmail](https://developers.google.com/apps-script/class_mailapp#sendEmail)）。对于收件人来说，这封电子邮件将“看起来”来自其他人。请注意，使用选项 2，您将遇到[问题 2004](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2004)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:07:56.313

可能的解决方案是上述问题是设置脚本的触发器`onChnage`，即在任何记录/任何行上更改电子表格时，将发送与该行邮件上的电子邮件地址相关的电子邮件。

希望这可以帮助

# asp.net-mvc-3 - 用户关闭浏览器而不注销

> ID：13175614
> 
> 赞同：0
> 
> 时间：2012-11-01T10:58:24.323
> 
> 标签：asp.net-mvc-3, session, social-networking

我正在用 ASP.NET MVC 3 开发一个社交网络。每个用户都必须有能力看到连接的人。

做这个的最好方式是什么？

`Contact`我在我的数据库的表中添加了一个标志，并将其设置`true`为用户登录时并设置为`false`他注销时。

但是这个解决方案的问题是当用户关闭浏览器而不注销时，他仍然会保持连接状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T12:23:35.103

真正知道用户当前已连接的唯一方法是在用户和服务器之间保持某种连接。立即想到两个选项：

1.  使用 javascript 使用 ajax 定期调用您的服务器。您将在您的服务器上有一个特殊的端点，用于更新“上次连接时间”状态，并且您将有第二个端点供用户轮询以查看谁在线。
2.  使用[websocket](http://en.wikipedia.org/wiki/WebSockets)保持与服务器的持久连接

选项 1 应该很容易实现。要记住的主要事情是，这将增加进入服务器的请求数量，并且您必须相应地进行计划以处理可能产生的流量。您可以通过配置 javascript 计时器回调服务器的频率来控制服务器上的负载量。

如果您在没有库支持的情况下执行此操作，则选项 2 可能会涉及更多。当然，有一些库，比如[SignalR](https://github.com/SignalR/SignalR)，可以很容易地做到这一点。这也会影响您网站的性能，因为每个用户都将保持持久连接。这种方法的优点是它减少了像选项 1 那样的轮询需求。如果您使用这种方法，也很容易向用户 A 推送用户 B 已离线的消息。

我想我还应该提到一个非常简单的第三个选项。如果您觉得您的网站互动性很强，您可以跟踪他们上次向您的网站发出请求的时间。当然，这可能无法为您提供足够的准确性来确定用户是否“已连接”。

# c# - 如何为过期或不适当的页面实施登录墙？

> ID：13175615
> 
> 赞同：0
> 
> 时间：2012-11-01T10:58:28.440
> 
> 标签：c#, asp.net

我正在编写一个非常明确地需要登录墙的网站。

访问者在被允许查看页面之前应该被要求登录。

正在构建的页面很大程度上取决于用户的“ID”。我不确定如何或在哪里存储用户的登录信息。

我不确定是否应该使用会话变量（例如`Session["userId"]`）或其他方法。我看到的会话变量的问题是很难让会话*超时*。

*注意：我在 Visual Studio 2008 中使用 C# 3.5 和 ASP.NET。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:01:12.070

其中一个想法是使用表单身份验证。

```
FormsAuthentication.SetAuthCookie(txtUserName.Text, true);
Response.Redirect("pagename.aspx"); 
```

真正的部分是用户密码被保存到浏览器cookie中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:04:48.810

实现表单身份验证是您的答案：

[如何实现表单认证](http://support.microsoft.com/kb/301240)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:06:23.127

我猜你应该是微软的内置会员和角色功能。

这是非常安全的，并通过登录、创建用户、更改密码、忘记密码为您提供最大的安全性。

还具有像盐一样的密码安全功能，

链接在这里

[http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider](http://www.codeproject.com/Articles/281573/ASP-NET-Membership-and-Role-Provider)

# php - 比较 3 个数组并产生 1 个数组

> ID：13175618
> 
> 赞同：3
> 
> 时间：2012-11-01T10:58:41.297
> 
> 标签：php

我有 3 个数组，我想将这 3 个数组的结果合二为一，但是如何在数组中删除相同的答案？

这是我的例子：

```
<?php
$array1 = array("a" => "green", "red", "blue");
$array2 = array("b" => "green", "yellow", "red");
$array3 = array("c" => "white", "blue", "black");
$result = ??? ($array1, $array2, $array3);
print_r($result);
?>

Array
(
    [0] => green
    [1] => red
    [2] => blue
    [3] => yellow
    [4] => red
    [5] => white
    [6] => black
) 
```

请帮帮我。。谢谢。。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:02:54.947

```
$result = array_unique(array_merge($array1, $array2, $array3)); 
```

# java - 如何在准备好的语句中将列表对象转换为 bigdecimal？

> ID：13175623
> 
> 赞同：-1
> 
> 时间：2012-11-01T10:58:53.587
> 
> 标签：java, mysql, prepared-statement

我正在使用准备好的语句来批量插入记录。我正在迭代一个包含值且它们的数据类型不同的列表。其中一种数据类型是 BigDecimal，当我尝试设置调用preparedstatement 时，它会抛出空指针异常。

我的代码

```
 int count = 1;
                for (int j = 0; j < list.size(); j++) {                     
                    if(list.get(j) instanceof Timestamp) {
                        ps.setTimestamp(count,  (Timestamp) list.get(j));       
                    } else if(list.get(j) instanceof java.lang.Character) {
                        ps.setString(count, String.valueOf(list.get(j)));
                    }
                    else if(list.get(j) instanceof java.math.BigDecimal) {
                        ps.setBigDecimal(count, (java.math.BigDecimal)list.get(j));
                    } else {
                        ps.setObject(count, list.get(j));   
                    }                           
                    count++;
                } 
```

我尝试了 2 种转换方法，转换对象并尝试创建一个 BigDecimal 类型的新对象

```
ps.setBigDecimal(count, new BigDecimal(list.get(j).toString)); 
```

两者都不能解决我的问题。它抛出空指针异常。

帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:12:50.967

这是我找到的一个解决方案，它似乎对所有类型的 Object 到原始类型都很有用。

```
public static BigDecimal getBigDecimal( Object value ) {
    BigDecimal ret = null;
    if( value != null ) {
        if( value instanceof BigDecimal ) {
            ret = (BigDecimal) value;
        } else if( value instanceof String ) {
            ret = new BigDecimal( (String) value );
        } else if( value instanceof BigInteger ) {
            ret = new BigDecimal( (BigInteger) value );
        } else if( value instanceof Number ) {
            ret = new BigDecimal( ((Number)value).doubleValue() );
        } else {
            throw new ClassCastException("Not possible to coerce ["+value+"] from class "+value.getClass()+" into a BigDecimal.");
        }
    }
    return ret;
} 
```

这是链接： [http ://www.java2s.com/Code/Java/Data-Type/ConvertObjecttoBigDecimal.htm](http://www.java2s.com/Code/Java/Data-Type/ConvertObjecttoBigDecimal.htm)

# oracle - 如何使用 FETCH 获取游标中的列？

> ID：13175628
> 
> 赞同：0
> 
> 时间：2012-11-01T10:59:06.037
> 
> 标签：oracle, plsql, oracle10g, cursor, oracle11g

```
create or replace PROCEDURE newprocedur(outname OUT VARCHAR2,outroll OUT NUMBER) AS
  CURSOR c1 IS 
    select Name,Rollno,Section 
      from emp;
BEGIN
  Open c1;
  fetch c1 into outname,outroll; 
```

在游标中的 3 列中，是否可以像我上面那样使用 FETCH 仅获取两列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:15:09.650

你是11g。您不需要定义变量或游标。让 Oracle 为您完成繁重的工作。

```
create or replace PROCEDURE newprocedur(outname OUT VARCHAR2,outroll OUT NUMBER) 
AS
BEGIN
   select Name,Rollno
   into outname,outroll
   from emp;
END; 
```

如果 EMP 有不止一行，这将引发错误。有多种解决方法。例如，使用 ROWNUM 人为地限制结果集。或者将 EMP_ID 作为输入参数来选择所需的记录。这取决于这是一个玩具示例还是真实世界 API 的开始。

* * *

> “如何在上面使用 ROWNUM 例如？”

ROWNUM 是一个伪列，并[在文档中进行了介绍](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns009.htm#i1006297)。但是，为了完整起见，我们可以使用它来限制这样的结果集：

```
select Name,Rollno
from emp
where rownum <= 1; 
```

# c# - 在 .net 中为餐厅作业设计类和对象

> ID：13175630
> 
> 赞同：-3
> 
> 时间：2012-11-01T10:59:07.780
> 
> 标签：c#, .net, oop

我在学校接到了创建餐厅网站的任务。我必须为我的作业使用对象和类 (OOP)。我在 .net 中有 OOP 的基础，但我不知道如何将这个任务设计为面向对象。我不知道如何开始。

要求是这样的：

菜单必须保存在数据库中并从中检索。菜单分为开胃菜、沙拉、主餐、意大利面、葡萄酒、饮料、附加服务、

如果你有一个关于如何设计我的课程的好例子，那就太好了。多谢。我正在等待一些帮助。请

**编辑 1**

所以我们有不同的菜单：`Italian, French, Greek, Turkish, Azian etc`. 每个菜单都有菜肴、饮料、甜点：`Appetizers, Pastas, Salads, wine, etc`

每道菜都由食材制成

一顿饭就像一天的一部分：早餐，午餐，晚餐。每天吃不同的饭菜。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:01:36.690

不，我认为您需要回顾面向对象设计的概念。

菜单**由**不同种类的餐点组成。

开胃菜**是一种**餐食。

沙拉**是另一种**膳食。

# php - 从 MySQL 查询中检索 id

> ID：13175631
> 
> 赞同：0
> 
> 时间：2012-11-01T10:59:08.810
> 
> 标签：php, mysql

我无法从我正在使用的 foreach 循环中访问“model_id”和“brand_id”。

它们是正确的字段名称，因为我已经成功地回显了它们，并且我还“var_dumped”了数组，并且 ID 就在那里。这只是在每个列表部分上实现相关链接的情况。下面是我的代码。

```
<?
$output = mysqli_query("SELECT * FROM bikes, bikeTypes WHERE bikes.model_id = bikeTypes.model_id");
$result = array();
while($row = mysqli_fetch_array($output))
 {
   $result[$row['model']][] = $row;
 }

foreach ($result as $category => $values) {
  echo "<li><a href='test.php?id=" . $row['model_id'] . "'>".$category.'</a><ul>';
    foreach ($values as $value) 
      {
      echo "<li><a href='details.php?id=" . $row['brand_id'] . "'>" . $value['bikeName'] . "</a></li>";
      }
  echo '</ul>';   
  echo '</li>';
 }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:03:03.627

在 foreach 循环中使用 $value 而不是 $row

```
foreach ($values as $value) 
      {
      echo "<li><a href='details.php?id=" . $value['brand_id'] . "'>" . $value['bikeName'] . "</a></li>";
      } 
```

试试这个

```
while($row = mysql_fetch_array($output))
 {
   $result[] = $row;
 }
//var_dump($result);
foreach ($result as $key => $val) {
  echo "<li><a href='test.php?id=" . $val['model_id'] . "'>".$key.'</a><ul>';
  echo "<li><a href='details.php?id=" . $val['brand_id'] . "'>" . $val['bikeName'] . "</a></li>";
  echo '</ul>';   
  echo '</li>';
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:01:19.183

在您的 foreach 中，您定义了 $category 和 $values，并且在该循环中您使用了 $row。你不应该使用`$values['brand_id']`吗？

# mysql - LOAD DATA INFILE 在 mariadb 中不起作用

> ID：13175636
> 
> 赞同：0
> 
> 时间：2012-11-01T10:59:19.980
> 
> 标签：mysql, load-data-infile, mariadb

我正在尝试从 mysql 迁移到 mariadb。在这个时候，我可能会遇到 mariadb 的问题。

当我可以尝试将数据文件加载到表中时，它会显示如下错误：

**SQL 错误 (29): 找不到文件'C:/Documents and Settings/Administrator/Local Settings/Temp/SAMPLE/DATA_TEMP1351761841668/SampleFile0' (Errcode: 2)**

但是该文件已经存在于路径中......

另一点是相同的命令成功地适用于 MySQL。MariaDB 有权限问题吗？

*请参阅下面我的查询：*

```
load data infile "'C:/Documents and Settings/Administrator/Local Settings/Temp/SAMPLE/DATA_TEMP1351761841668/SampleFile0" into table SAMPLETABLE; 
```

当改变路径时，就像`"C:/SampleFile0",`它正常工作一样。文件夹中的路径`Administrator`不起作用。

任何人都可以在这方面帮助我吗？？？我是 MariaDB 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:19:26.623

您可以尝试添加“本地”吗？

```
load data local infile "'C:/Documents and Settings/Administrator/Local Settings/Temp/SAMPLE/DATA_TEMP1351761841668/SampleFile0" into table SAMPLETABLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-16T14:36:18.837

您的命令中有一个不需要的单引号。

# ajax - CollapsiblePanelExtender 不适用于 CollapsedSize="0"

> ID：13175638
> 
> 赞同：1
> 
> 时间：2012-11-01T10:59:31.247
> 
> 标签：ajax, asp.net-ajax, collapsiblepanelextender

这个“CollapsiblePanelExtender”只有在我使用 CollapsedSize="1" 时才能正常工作。使用 CollapsedSize="0" 时，它会折叠但在单击时不显示...有什么想法吗？

```
 <asp:CollapsiblePanelExtender 
            ID="CollapsiblePanelExtender1" 
            runat="server" 
                TargetControlID="pBody"         
                CollapseControlID="pHeader" 
                ExpandControlID="pHeader"   
                Collapsed="false" 
                TextLabelID="lblText" 
                CollapsedText="Click to Show Content..." 
                ExpandedText="Click to Hide Content..." 
                CollapsedSize="1"
                AutoCollapse="False"
                AutoExpand="False"
                ScrollContents="True"
                ExpandDirection="Vertical"
                SuppressPostBack="true" >
        </asp:CollapsiblePanelExtender> 
```

# c - 删除二叉搜索树的叶节点 - 分段错误

> ID：13175649
> 
> 赞同：1
> 
> 时间：2012-11-01T11:00:47.373
> 
> 标签：c, binary-search-tree, nodes

我正在尝试删除我以非递归方式创建的 BST 中的叶节点。问题是当我试图删除叶节点时，我遇到了分段错误，我不知道它为什么会发生。我相信我评论的代码导致了问题。删除该节点的想法是错误的，还是有其他方法可以从 BST 中删除任何节点？

```
 #include <stdio.h>
     #include <stdlib.h>

      struct BSTnode
    {
     int data;
     struct BSTnode *left,*right,*parent;

    };

     typedef struct BSTnode node;

     void insert(node **root,int val)
    {
     node *ptr,*newptr;

     newptr=(node *)malloc(sizeof(node));
     newptr->left=NULL;
     newptr->right=NULL;
     newptr->parent=NULL;
     newptr->data=val;

     if((*root)==NULL)
    {
     (*root)=newptr;
     return;
    } 

     ptr=(*root);  

     while(ptr!=NULL && ptr->data!=val)
    {
      if(ptr->data >val )
     {
       if(ptr->left!=NULL)
        ptr=ptr->left;
       else
      {
       ptr->left=newptr;
       newptr->parent=ptr;
       break;
      }
    } 
     else
    {
      if(ptr->right!=NULL)
       ptr=ptr->right;
      else
     {
       ptr->right=newptr;
       newptr->parent=ptr;
       break;
      }
    }
   }

  }

    void deleteLeaf(node **root)
  {

      node *leafParent=NULL;

      if((*root)->left!=NULL)
       deleteLeaf(&((*root)->left));

      if((*root)->right!=NULL)
       deleteLeaf(&((*root)->right));

      if((*root)->left==NULL && (*root)->right==NULL)
     {

      /*  leafParent=(*root)->parent;

          if(leafParent->left==(*root))
           leafParent->left=NULL;
          else
           leafParent->right=NULL;
      */

          free(*root);
        }
      }

 void inorder(node *root)
{
  if(root->left!=NULL)
   inorder(root->left);

  printf(" %d ", root->data);

  if(root->right!=NULL)
   inorder(root->right);
}

 main()
{
 node *root=NULL;
 int i,n,val;

 printf("\n How many elements ?");
 scanf("%d",&n);

 for(i=0;i<n;++i)
{
 scanf("%d",&val);
 insert(&root,val);

}

 printf("\n Inorder traversal : ");
 inorder(root);

 deleteLeaf(&root);
 printf("\n Inorder traversal : ");
 inorder(root);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:53:32.423

我相信您并没有真正删除叶子-您正在递归地删除整个树：对于每个节点，您首先删除叶子，然后检查它是否是叶子`((left == NULL) && (right == NULL))`-这显然是因为您刚刚删除了它的后代-然后删除它。

第一个问题是，正如 Chris 很快指出的，您没有检查leafParent 是否可以变为NULL。要么检查它，要么将根节点的 parent 设置为自身，这样你就不会取消引用 NULL。另一个（恕我直言）问题是，一旦释放内存，您就不会使指针无效 - 好习惯是在释放指针后立即将指针设置为 NULL。如果您稍后不进行检查，则可以在稍后可能由其他结构分配内存块时使用指针进行段错误但不会静默破坏内存。您甚至可以编写一个包装器来为您执行此操作（它还可以检查释放 NULL 指针的尝试，这实际上是一个有效的操作，只是默默地什么都不做 - 至少在某些平台上）。在这种特殊情况下，

作为一个吹毛求疵的旁注，在代码中它要么是要么`int main(void) { ... }`不`int main(int argc, int **argv) { ... }`只是`main()`. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:01:23.617

在函数 deleteLeaf 中确实存在（注释掉的）leafParent 为 NULL 的情况，然后一旦您使用 leafParent->left 取消引用它，它就会出现段错误。因此，您需要在其中进行检查，如下所示：

```
 leafParent=(*root)->parent;
    if (leafParent)
    {
        if(leafParent->left==(*root))
        {
            leafParent->left=NULL;
        }
        else
        {
            leafParent->right=NULL;
        }
    } 
```

这将防止段错误，但我不清楚该函数是否最终会执行您希望它执行的操作...换句话说，您的逻辑可能仍需要一些调整才能使其仅删除叶节点（如果是你试图做的）。

# c# - JSON postback to c# webmethod 添加文字控制

> ID：13175652
> 
> 赞同：3
> 
> 时间：2012-11-01T11:00:59.077
> 
> 标签：c#, asp.net, json, webmethod

我正在学习 webmethods 并使用 JSON 发回给他们，我有以下内容，但它说它找不到 webmethod (404)。看不到哪里出错了，谢谢。

在页面javascript中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
       <script type="text/javascript">
           $(document).ready(function () {
               $(".FilterResults").click(function () {
                   var topic = $(".DropDownList1").val();
                   var number = $(".DropDownList2").val();
                   var month = $(".DropDownList3").val();
                   $.ajax({
                       type: "POST",
                       url: "filterresultshold.asmx/filterresults",
                       data: "{'args': '" + topic + "'}",
                       contentType: "application/json; charset=utf-8",
                       dataType: "json",
                       success: function (msg) {
                           // If you return something from the method, it can be accessed via msg.d                
                       }
                   });

                   // To prevent the postback
                   return false;
               });
           });
</script> 
```

在 ascx 中：

```
<form id="form1" runat="server">
 <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" />
    <div>
        <asp:PlaceHolder ID="PlaceHolder1" runat="server"><asp:Literal ID="Literal1" Text="Text to display" mode="PassThrough" runat="server" /></asp:PlaceHolder>
        <asp:DropDownList ID="DropDownList1" class="DropDownList1" runat="server"></asp:DropDownList>
        <asp:DropDownList ID="DropDownList2" class="DropDownList2" runat="server"></asp:DropDownList>
        <asp:DropDownList ID="DropDownList3" class="DropDownList3" runat="server"></asp:DropDownList>
        <asp:Button ID="FilterResults" class="FilterResults" runat="server" Text="Fill DropDownList" />
    </div>
</form> 
```

在后面的代码中：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

/// <summary>
/// Summary description for filterresults
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
[System.Web.Script.Services.ScriptService]
public class filterresultshold : System.Web.Services.WebService {

    [System.Web.Services.WebMethod]
    public void filterresults(string args)
    {
        string[] data = args.Trim().Split(',');
        string topic = data[0];
        string number = data[1];
        string month = data[2];
        string control = "<umbraco:Macro alias='pdfarchivelist' runat='server' topic='" + topic + "' number='" + number + "' month='" + month + "'></umbraco:Macro>";
        //LiteralControl literal = new LiteralControl(control);
        //PlaceHolder PlaceHolder1 = new PlaceHolder();
        //PlaceHolder1.Controls.Add(literal);
    }

} 
```

然后在后面的.ascx代码中：

```
public partial class usercontrols_pdfarea : System.Web.UI.UserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {      
        if (!Page.IsPostBack)
        {
            // Populate Drops
            var rootNode = uQuery.GetRootNode();
            DropDownList1.Items.Add(new ListItem("SELEZIONA NUMERO"));
            DropDownList2.Items.Add(new ListItem("SELEZIONA MESE"));
            DropDownList3.Items.Add(new ListItem("SELEZIONA ARGOMENTO"));

            //display the password on the Gallery Folder in the media area
            var startMedia = uQuery.GetMediaByName("pdfs").FirstOrDefault();
            var DropList = rootNode.GetDescendantNodes().Where(x => x.NodeTypeAlias == "File");

            foreach (var item in startMedia.Children)
            {
                DropDownList1.Items.Add(new ListItem(item.getProperty("number").Value.ToString())); //NUMBER
                DropDownList2.Items.Add(new ListItem(item.getProperty("month").Value.ToString())); //MONTH
            }

            foreach (var item in startMedia.Children.Select(p => p.GetPropertyAsString("topic")).Distinct().ToList())
            {
                DropDownList3.Items.Add(new ListItem(item.ToString()));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:03:31.827

```
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
// [System.Web.Script.Services.ScriptService]
public class filterresultshold : System.Web.Services.WebService { 
```

只需按照评论中的建议执行即可

顺便说一句，`filterresults`不应该是静态的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:41:03.830

要获取您的网络方法，您可以使用此代码

```
$.ajax({
                   type: "POST",
                   url: "Default.aspx/filterresults",
                   data: "{'args': '" + topic + "'}",
                   contentType: "application/json; charset=utf-8",
                   dataType: "json",
                   success: function (msg) {
                       // If you return something from the method, it can be accessed via msg.d                
                   }
               }); 
```

我认为您应该像这样进行一些更改

```
$.ajax({
                   type: "POST",
                   url: "Default.aspx/filterresults",
                   data: '{args:"' + topic + '"}',
                   contentType: "application/json; charset=utf-8",
                   dataType: 'json',
                   success: function (msg) {
                       // If you return something from the method, it can be accessed via msg.d                
                   } 
```

我认为这会对你有所帮助.....});

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:07:40.660

如果您的脚本位于子文件夹中，则需要使用绝对路径：

```
url: "/filterresults.asmx/filterresults", 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:26:26.400

如果您的脚本文件与 filterresults.asmx 文件位于同一文件夹中，那么您的 url 是可以的，但如果不是，您需要编写正确的路径，例如如下所示的绝对路径：

```
url: "/services/filterresults.asmx/filterresults", 
```

您还需要将您的 web 服务定义为脚本服务以允许 ajax 调用，如下所示：

```
[System.Web.Script.Services.ScriptService]
public class filterresultshold : System.Web.Services.WebService 
```

并从您的网络方法中删除`static`关键字。然后在您的网络方法中添加以下内容：

```
[WebMethod]
[System.Web.Script.Services.ScriptMethod(ResponseFormat = 
    System.Web.Script.Services.ResponseFormat.Json)]
public string filterresults(string args) 
```

**最后**确保你的 web.config 中有以下元素告诉 webservices 监听 Http Post 调用：

```
<system.web>
<webServices>
  <protocols>
    <add name="HttpPost"/>
    <add name="HttpGet"/>
  </protocols>
</webServices>
</system.web> 
```

祝你好运！

# postgresql - 使用 Korma (Clojure) 连接到 Heroku 上的 postgresql DB 时出现问题

> ID：13175655
> 
> 赞同：8
> 
> 时间：2012-11-01T11:01:15.220
> 
> 标签：postgresql, heroku, clojure, korma

我在 Heroku 的配置设置中解析 postgresql uri。但我似乎无法让它工作。任何帮助将不胜感激，我可能会直接遗漏一些东西。

这是使用的代码。

```
(def dev-db-info
  {:db "dbname"
   :user "username"})

(defn parse-db-uri
  [uri]
  (drop 1 (split uri #"://|:|@|/")))

(defn create-map-from-uri
  [uri]
  (let [parsed (parse-db-uri uri)]
  (zipmap [:user :password :host :port :db] parsed)))

(defn db-info
  []
  (if production?
    (create-map-from-uri (System/getenv "DATABASE_URL"))
    dev-db-info))

(defdb connected-db
   (postgres (db-info))) 
```

我从 uri 中检索到的地图如下所示：

```
{:db "dbname"
 :port "5662"
 :host "ec2-url.compute-1.amazonaws.com"
 :password "pwd"
 :user "username"} 
```

我收到以下错误：

```
Connections could not be acquired from the underlying database! 
```

编辑：

我已经放弃了使用 Korma，转而使用 Clojure.JDBC 0.2.3，它支持“connection-uri”，因此支持到 db 的 ssl 连接。Korma 目前不支持此功能。我将在 Github 上提交一个问题以允许这种连接方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T04:21:47.950

编辑：没有理由再使用`[org.clojars.ccfontes/korma "0.3.0-beta12-pgssl"]`了。阅读[本文](https://github.com/korma/Korma/issues/101)以了解更多信息。另外，请忽略以下说明。

添加了[postgres SSL](http://jdbc.postgresql.org/documentation/head/ds-ds.html)支持。

在`project.clj`插入： `[org.clojars.ccfontes/korma "0.3.0-beta12-pgssl"]`

在 heroku 上定义与 postgres 数据库的连接：

```
(ns app.db
    (:require [clojure.java.jdbc :as sql]
              [korma.db :as db]
              [clojure.string :as string])
    (:import (java.net URI)))

    (defn set-app-pg-db! [mode]
      (let [db-uri (java.net.URI. (System/getenv "DATABASE_URL"))]
        (->> (string/split (.getUserInfo db-uri) #":")
          (#(identity {:db (last (string/split (System/getenv "DATABASE_URL") #"\/"))
                       :host (.getHost db-uri)
                       :port (.getPort db-uri)
                       :user (% 0)
                       :password (% 1)
                       :ssl true
                       :sslfactory (when (= mode :dev) "org.postgresql.ssl.NonValidatingFactory")}))
          (db/postgres)
          (db/defdb app-pg-db)))) 
```

该修复使用[Tomcat JDBC 连接池](http://people.apache.org/~fhanik/jdbc-pool/jdbc-pool.html)及其连接池的配置示例，因此它可能不太适合每个人的需求，而且这只是一个 hack。理想情况下，原始 Korma 项目应该集成这些更改或其他可能的解决方案。

感谢其他人的一些反馈，因为它只在我自己的项目中进行了测试。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:31:49.333

实际上解决方案非常简单，只在本地工作：

```
(defn- convert-db-uri [db-uri]
  (let [[_ user password host port db] (re-matches #"postgres://(?:(.+):(.*)@)?([^:]+)(?::(\d+))?/(.+)" db-uri)]
    {
      :user user
      :password password
      :host host
      :port (or port 80)
      :db db
    }))

(def db-spec (postgres
               (convert-db-uri
                (config/get "DATABASE_URL")))) 
```

其中 DATABASE_URL 是“postgres://user:pw@host:port/dbname?ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory”

似乎数据库名称将 SSL 参数转发到底层驱动程序并且它可以正常工作。

这是与：

```
[korma "0.3.0-beta9"]
[org.clojure/java.jdbc "0.1.3"]
[postgresql/postgresql "9.1-901.jdbc4"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T22:35:02.367

在您的编辑中，您提到切换到 clojure.java.jdbc 因为它允许您使用连接 URI 启用 SSL。您可以使用函数 korma.db/defdb 对 Korma 使用相同的技术，该函数允许您提供自己的连接 URL 并使用如下查询字符串启用 SSL：

```
(defdb korma-db {:classname "org.postgresql.Driver"
                 :subprotocol "postgresql"
                 :subname "//localhost:5432/test?ssl=true"
                 :user "my-username"
                 :password "my-password"}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T15:07:04.673

FWIW，这是我用来从 Heroku 的`DATABASE_URL`.

```
(def db-uri (java.net.URI. (System/getenv "DATABASE_URL")))

(def user-and-password (clojure.string/split (.getUserInfo db-uri) #":"))

(def db
  {:classname "org.postgresql.Driver"
   :subprotocol "postgresql"
   :user (get user-and-password 0)
   :password (get user-and-password 1) ; may be nil
   :subname (if (= -1 (.getPort db-uri))
              (format "//%s%s" (.getHost db-uri) (.getPath db-uri))
              (format "//%s:%s%s" (.getHost db-uri) (.getPort db-uri) (.getPath db-uri)))}) 
```

# java - 试图在java中将一个类中的信息刷新到另一个类

> ID：13175656
> 
> 赞同：0
> 
> 时间：2012-11-01T11:01:15.850
> 
> 标签：java, swing, file-io, java.util.scanner

我有一个名为 A 的类和一个名为 T 的类。当 A 单击一个按钮时，我希望它更新 T 的内容。我在执行此操作时遇到了问题……谢谢任何建议。

A类：

```
 FileWriter fstream = new FileWriter("open.txt", true);
    BufferedWriter out = new BufferedWriter(fstream);
    out.write("\n" +number1);
    jLabel1.setText(number1);
    out.close();
    T t = new T();
    t.refresh(); 
```

refresh 是我要调用来更新类 T 的函数

电话：

```
public void refresh() {
            File file = new File("open.txt");
    try {

        Scanner sc = new Scanner(file);

        if (sc.hasNext()) {
            jTextField2.setText(sc.next());

        } else {
            jTextField2.setText("Nothing to see here");
        }
    } catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

这就是我希望它调用的函数。它只是不更新​​文本。我认为这与我如何使用文本文件有关。任何想法谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:06:06.170

您正在附加到您的文件：

```
FileWriter fstream = new FileWriter("open.txt", true); 
```

但读取第一个值：

```
Scanner sc = new Scanner(file);
if (sc.hasNext()) {
   jTextField2.setText(sc.next()); 
```

这永远不会改变。我怀疑这就是你没有看到变化的原因。

您需要写入该文件吗？你不能`refresh()`用刚刚写入文件的数据调用你的方法（或重载的变体）吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:04:27.780

试试看

```
TSO t = new TSO();
t.refresh(); 
```

以上

```
out.write("\n" +number1);
jLabel1.setText(number1);
out.close(); 
```

它可能有效但尚未确认...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T13:11:20.190

你为什么不把它作为参数传递

```
t.refresh(number1); 
```

进而

```
public void refresh(String number1) {
 if(number1!=null){        
 jTextField2.setText(sc.next());
        } else {
            jTextField2.setText("Nothing to see here");
        }
    } 
```

不是更好吗

# java - 声纳 java.lang.OutOfMemoryError：PermGen 空间

> ID：13175668
> 
> 赞同：1
> 
> 时间：2012-11-01T11:01:53.957
> 
> 标签：java, sonarqube, heap-memory, bamboo, permgen

在 ant 中运行构建时出现以下错误

```
buildcallbacks.xml:39: org.sonar.runner.RunnerException: java.lang.OutOfMemoryError: PermGen space 
```

这是声纳在我们的代码上运行的构建部分。

有没有办法让我确切地知道这个错误来自哪里，即它是声纳服务器还是客户端等？

这是我的 buildcallbanks.xml 的第 39 行

```
<sonar:sonar /> 
```

编辑：我已经尝试从 Sonar 中的 wrapper.conf 中增加 permsize，无论我设置多高，我仍然遇到同样的问题。我一定还缺少什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T13:57:35.740

我实际上在你之后回去看看这个 - 它仍然失败。你快到了，但我发现了两件事：

1.  您使用了 JAVA_OPTS 而不是 ANT_OPTS
2.  CMSClassUnloadingEnabled 仅在您还使用 UseConcMarkSweepGC 时使用。请参见此处：[CMSPermGenSweepingEnabled 与 CMSClassUnloadingEnabled](https://stackoverflow.com/questions/3717937/cmspermgensweepingenabled-vs-cmsclassunloadingenabled/3720052#3720052)

所以现在看起来很有效的设置是：

```
ANT_OPTS="-Xmx1024m -XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC -XX:MaxPermSize=512m" 
```

**更新：** 多年后，由于问题再次发生，我实际上再次访问了这个。您实际上不需要弄乱 GC 设置，只需要弄乱内存即可。正确使用的选项实际上是：

```
ANT_OPTS="-Xmx2G -XX:MaxPermSize=1G" 
```

显然，您可以调整内存值以适合您的机器。

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:05:47.610

此错误不是由任何特定的代码行引起的，因此尝试定位它是没有意义的。您只需要重新配置 ant 使用的 Java 运行时，以便增加 PermGen 空间的限制。[这个 wiki 页面](http://wiki.apache.org/ant/TheElementsOfAntStyle)记录了如何实现这一点。基本上，您设置`ANT_OPTS`环境变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T12:03:23.497

尝试增加 permgen 大小，而不是增加堆大小。你可以这样做

```
ANT_OPTS=-XX:MaxPermSize=128m 
```

默认大小为 64 MB，因此此设置应该是最大可用内存的两倍。

PermGen 内存用于在运行 JVM 时不经常更改的内容，例如类定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:14:49.790

增加声纳服务器上的永久空间似乎没有任何效果。

这个问题似乎是由于在 Bamboo 的“组装”阶段运行了太多的 ant 目标造成的。我现在正在运行“清理所有生产”，然后调用 ant sonar 插件 .jar。

似乎应该卸载的类也没有卸载。这已通过以下 JVM 参数修复：-XX:+CMSClassUnloadingEnabled

# windows-8 - 使用 HTML/Javascript 和 XAML/C# 开发的 Windows 8 Store App 有什么区别

> ID：13175670
> 
> 赞同：2
> 
> 时间：2012-11-01T11:01:55.000
> 
> 标签：windows-8, microsoft-metro

这两种编程选择有什么区别

我知道只有 HTML/Javascript 支持以下功能 1\. Flyout 控件 2\. Header Menu 3\. Rating Control

它们在控制、集成、连接、部署方面是否还有其他区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:10:40.237

**html/javascript**

html5 和 js 是开放的网络标准。这就是为什么它们在几乎所有浏览器中都以相同的方式工作（和行动）的原因。这就是为什么您可以为 Mac OS 开发 html5 应用程序并将其移植到 Windows 上而无需许多额外编码的原因。然而，微软希望在市场上拥有尽可能多的应用程序，这就是为什么他们向 Web 开发人员坦白并实现了对 html 和 Javascript 的原生支持。但是有很多 Javascript 函数，只有 IE10 才支持（事实上，几乎每个函数都可以在 WinJS-File 中找到）。如果您想将 Win 8 应用程序移植到任何其他操作系统，您必须检查您的代码。一个很好的例子是 WinJS 中的 click-eventhandler，它有一个 event.pointerId 来识别多点触控。这是一个很好的简单方法，但不是标准的。

**XAML/C# 或 VB**

XAML 是 .NET，因此它固定在此框架中。您不能轻松地将 XAML 应用程序移植到 mac os。因此 XAML 和 C# 在 Visual Studio（Intellisense、Blend 和 Design-Views）中实现得非常好，并且具有一些不错的功能，例如[LINQ](http://www.codeproject.com/Articles/19154/Understanding-LINQ-C)和[DataBinding](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758320.aspx)。此外，[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)模式允许拆分设计人员和程序员。在我看来，msdn 上的文档对于 XAML 和 C# 比对于 Html5 和 JS 更好。对于游戏，还有一个 DirectX 实现，它是更好的选择，因为它具有更高的性能。

**选择什么？**

决定采用哪种编程方式真的很难。以下问题应该会有所帮助：您更熟悉哪种编程语言？

*   IF OOP -> C# 和 XAML
*   如果基于 Web 和原型的语言 -> HTML 和 JS

您将编写哪种类型的应用程序？

*   如果它固定为 Win 8 -> XAML 和 C#
*   如果它应该在多个平台上运行 -> HTML 和 JS

你喜欢 Visual Studio 吗？

*   如果是 -> 使用 XAML 和 C#
*   如果没有 -> 使用 HTML 和 JS，您可以先使用通用 IDE 开发应用程序，然后将其导入 Visual Studio 以创建应用程序。

# c# - 通用/可重用表单打开/关闭事件

> ID：13175673
> 
> 赞同：1
> 
> 时间：2012-11-01T11:02:34.460
> 
> 标签：c#, .net, winforms, event-handling

在开发包含许多 WinForms 的当前项目时，我发现自己变得杂乱无章，只是为了处理表单的打开/关闭事件。目前我正在像这样处理它们..

```
//Declare forms
myForm mForm1;
myForm2 mForm2;

private void btnSomething_Click(object sender, EventArgs e)
{
    if (mForm1 == null)
    {
        mForm1 = new myForm();
        mForm1.FormClosed += new FormClosedEventHandler(mForm1_FormClosed);
        mForm1.Show();
    }
    else
        if (mForm1.WindowState == FormWindowState.Minimized)
            mForm1.WindowState = FormWindowState.Normal;
    mForm1.Focus();
}

void mForm1_FormClosed(object sender, FormClosedEventArgs e)
{
    mForm1 = null;
} 
```

然后另一组空位来处理每个表单的打开/关闭。现在想象一下，我有 5 个表格，而不是 2 个表格。现在我更乱了。有没有一种方法可以概括这一点，让所有表单都具有相同的事件处理程序？

我想过也许在“as”语句中使用对象发送者，但我不确定如何从那里找到相关的声明表单实例。

```
sender as (form) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:05:57.640

让你`Forms`实施一些`IFormWithMyEvents`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:15:37.437

您可以轻松地概括该代码：

```
//Declare forms
myForm mForm1;
myForm mForm2;

private void btnSomething_Click(object sender, EventArgs e)
{
    ShowOrUpdateForm<myForm>(ref mForm1);
}

void ShowOrUpdateForm<T>(ref Form form) where T : Form
{
    if (form == null)
    {
        form = new T();
        form.FormClosed += new FormClosedEventHandler(mForm1_FormClosed);
        form.Show();
    }
    else if (form.WindowState == FormWindowState.Minimized)
        form.WindowState = FormWindowState.Normal;

    form.Focus();
}

void mForm1_FormClosed(object sender, FormClosedEventArgs e)
{
    // you cannot refactor this easily
    if (sender == mForm1)
        mForm1 = null;
    else if (sender == mForm2)
        mForm2 = null;
} 
```

如果您想进一步概括关闭的事件处理程序，您应该考虑将表单的声明移动到某种数组，字典列表。这样您就可以轻松地概括该方法。

编辑：将 ShowOrUpdateForm 函数转换为通用函数。

# c# - Parallel.For 带光栅图像处理

> ID：13175676
> 
> 赞同：1
> 
> 时间：2012-11-01T11:02:55.800
> 
> 标签：c#, parallel-processing, parallel-for

我想加快我的代码速度。我希望该片段能够更快地工作。我试图创建自己`Parallel.For`的循环实现，但失败了。没有错误，但`tifDS`似乎是空的：/ any1 可以帮助我吗？提前致谢！

原始循环：

```
for (int iY = 0; iY < srcDS.RasterYSize; iY++)
{
    byte[] srcData = new byte[srcDS.RasterXSize * 1];
    srcBand.ReadRaster(0, iY, srcDS.RasterXSize, 1, srcData, srcDS.RasterXSize, 1, 0, 0);

    for (int iBand = 0; iBand < _outBands; iBand++)
    {
        int[] bandLookup = lookup[iBand];

        int[] dstData = new int[srcData.Count()];
        for (int index = 0; index < srcData.Count(); index++)
        {
            byte b = srcData[index];
            dstData[index] = bandLookup[b];
        }

        tifDS.GetRasterBand(iBand + 1).WriteRaster(0, iY, srcDS.RasterXSize, 1, dstData,
                                                   srcDS.RasterXSize, 1, 0, 0);
    }
} 
```

我的尝试：

```
for (int iY = 0; iY < srcDS.RasterYSize; iY++)
{
    byte[] srcData = new byte[srcDS.RasterXSize * 1];
    srcBand.ReadRaster(0, iY, srcDS.RasterXSize, 1, srcData, srcDS.RasterXSize, 1, 0, 0);

    Parallel.For<object>((long) 0, _outBands, () => 0,
                         (iBand, state, subtotal) =>
                             {
                                 int[] bandLookup = lookup[iBand];

                                 int[] dstData = new int[srcData.Count()];
                                 for (int index = 0; index < srcData.Count(); index++)
                                 {
                                     byte b = srcData[index];
                                     dstData[index] = bandLookup[b];
                                 }

                                 return new object[] {iBand, dstData};
                             },
                         o =>
                             {
                                 int iBand = (int) (o as object[])[0];
                                 int[] dstData = (o as object[])[1] as int[];
                                 lock (_getRasterBandLock)
                                 {
                                     tifDS.GetRasterBand(iBand + 1).WriteRaster(0, iY, srcDS.RasterXSize, 1, dstData,
                                                   srcDS.RasterXSize, 1, 0, 0);
                                 }
                             });
} 
```

# bash - awk 解析文件名并将结果添加到每行的末尾

> ID：13175683
> 
> 赞同：2
> 
> 时间：2012-11-01T11:03:26.283
> 
> 标签：bash, awk

我有许多具有相似名称的文件，例如

```
DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out
DWH_Export_AUSTA_20120701_20120731_v1_2.csv.397.dat.2012-10-02 04-03-12.out
DWH_Export_AUSTA_20120801_20120831_v1_1.csv.397.dat.2012-10-02 04-04-16.out 
```

等等

我需要从文件名中获取 .csv(1 或 2) 之前的数字，并将其放入带有 TAB 分隔符的文件每一行的末尾。

我已经编写了这段代码，它找到了我需要的号码，但我不知道如何将这个号码放入文件中。文件名中有空格，我的脚本因此而中断。

我也不确定，如何发送到文件的脚本列表。现在我只使用一个文件。

我的代码：

```
#!/bin/sh
string="DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out" 
out=$(echo $string | awk 'BEGIN {FS="_"};{print substr ($7,0,1)}')
awk ' { print $0"\t$out" } ' $string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:36:52.073

```
for file in *
do
   sfx=$(echo "$file" | sed 's/.*_\(.*\).csv.*/\1/')
   sed -i "s/$/\t$sfx/" "$file"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:46:13.147

未经测试，但这应该可以满足您的要求（提取 .csv 之前的数字并将该数字附加到 .out 文件中每一行的末尾）

```
awk 'FNR==1 { split(FILENAME, field, /[_.]/) } 
     { print $0"\t"field[7] > FILENAME"_aaaa" }' *.out

for file in *_aaaa; do mv "$file" "${file/_aaaa}"; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:08:00.697

使用 sed：

```
$ sed 's/.*_\(.*\).csv.*/&\t\1/' file
DWH_Export_AUSTA_20120701_20120731_v1_1.csv.397.dat.2012-10-02 04-01-46.out     1
DWH_Export_AUSTA_20120701_20120731_v1_2.csv.397.dat.2012-10-02 04-03-12.out     2
DWH_Export_AUSTA_20120801_20120831_v1_1.csv.397.dat.2012-10-02 04-04-16.out     1 
```

要对许多文件进行此操作：

```
sed 's/.*_\(.*\).csv.*/&\t\1/' file1 file2 file3 
```

或者

```
sed 's/.*_\(.*\).csv.*/&\t\1/' file* 
```

要使此更改保存在同一个文件中（如果您有 GNU sed）：

```
sed -i 's/.*\(.\).csv.*/&\t\1/' file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T12:46:36.997

您可能想要使用 sed 或 coreutils 而不是 awk。

从文件名中获取数字，使用 grep 表示多样性：

```
num=$(<<<filename grep -Eo '[^_]+\.csv' | cut -d. -f1) 
```

`<<<filename`相当于`echo filename`。

### 用 sed

使用 GNU sed附加`num`到每一行：

```
sed "s/\$/\t$num" filename 
```

使用`-i`开关`filename`就地修改。

### 带糊

您还需要知道此方法的文件长度：

```
len=$(<filename wc -l) 
```

结合`filename`和`num`粘贴：

```
paste filename <(seq $len | while read; do echo $num; done) 
```

### 完整示例

```
for filename in DWH_Export*; do 
  num=$(echo $filename | grep -Eo '[^_]+\.csv' | cut -d. -f1)
  sed -i "s/\$/\t$num" $filename
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:47:30.103

如果我理解正确，您想将文件名中的数字附加到该文件中的每一行 - 这应该这样做：

```
#!/bin/bash
while [[ 0 < $# ]]; do
    num=$(echo "$1" | sed -r 's/.*_([0-9]+).csv.*/\t\1/' )
    #awk -e "{ print \$0\"\t${num}\"; }" < "$1" > "$1.new"
    #sed -r "s/$/\t$num/" < "$1" > "$1.mew"
    #sed -ri "s/$/\t$num/" "$1"
    shift
done 
```

运行脚本并为其指定要处理的文件的名称。$# 是脚本的命令行参数的数量，在循环结束时递减`shift`，这会删除第一个参数，并移动其他参数。从文件名中提取数字并选择三个注释行之一进行附加：awk 为您提供更大的灵活性，第一个 sed 创建新文件，第二个 sed 就地处理它们（如果您正在运行 GNU sed，即） .

# android - 直接链接到 Google Play 上的应用

> ID：13175689
> 
> 赞同：2
> 
> 时间：2012-11-01T11:03:56.007
> 
> 标签：android, google-play

我注意到，现在当我单击应用程序链接时，浏览器不会直接转到 Google Play 应用程序，而是会打开一个窗口，其中包含以下选项：浏览器、Google Play...

该链接是在浏览器而不是应用程序中使用的，因此 market:// 不相关。

我使用标准格式：

```
http://play.google.com/store/apps/details?id=<package_name> 
```

这是最近的变化吗？我认为以前链接是直接在 Google Play 中打开的，没有中间窗口？

今天是否可以在没有此选择窗口的情况下直接在 Google Play 中打开应用程序？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:14:36.437

尝试使用以下代码直接打开play store

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=<package_name>"))); 
```

请记住，只有在目标设备上安装了 Play 商店应用程序时，此解决方案才有效。在未安装的情况下，`android.content.ActivityNotFoundException`将被解雇。所以处理这个异常并打开 http:// url 而不是 market:// 一个。

```
try {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=<package_name>")));
} catch (android.content.ActivityNotFoundException anfe) {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id="<package_name>")));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:16:04.280

答案是不。Google 通过设计添加了中间窗口，以允许用户选择在浏览器中查看页面、保持浏览器体验或在 Play 应用程序中。你唯一能做的就是向谷歌请求改变，但他们不太可能接受这样的请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:13:05.480

如果您在谈论使用 android OS 时，那么这应该可以解决它

设置 -> 管理应用程序 -> 您的浏览器 -> 清除默认值

# sockets - 重启socket连接不成功

> ID：13175693
> 
> 赞同：2
> 
> 时间：2012-11-01T11:04:03.677
> 
> 标签：sockets, serversocket, asyncsocket, socketexception

下面是重新启动套接字连接服务器的代码，因此当它们受到一些干扰时，它能够重新连接，但在某些时候或情况下它无法重新连接/连接下面代码问题中可能存在的问题

```
/***   restarting the server by capturing the SIGHUP signal ***/

int isfirst;`enter code here`
char **command_args;

void sig_hangup(int signum)
{
    if ( isfirst )
    {
        isfirst = 0;
        fprintf(stderr, "Parent died\n");
    }`enter code here`
    else                /* Restart! */
    {
        fprintf(stderr, "Restarting...\n");
        /*** Kill all existing child processes ***/
        execv(command_args[0], command_args);
        fprintf(stderr, "Could not restart!!!\n");
        abort();
    }
}

void child(void)
{   struct sigaction act;

    bzero(&act, sizeof(act));
    act.sa_handler = sig_hangup;
    act.sa_flags = SA_RESTART;
/*  if ( sigaction(SIGHUP, &act, 0) != 0 )
        perror("Can't capture SIGHUP");*/
    for (;;)
    {
        fprintf(stderr, "[pid=%d] I'm still here\n", getpid());
        sleep(1);
    }
    exit(0);
}

int main(int count, char *strings[])
{
    isfirst = 1;
    command_args = strings;
    if ( fork() == 0 )
        child();
    sleep(1);
    return 0;
} 
```

# php - 如何使用php在gridfs中插入大文件

> ID：13175699
> 
> 赞同：1
> 
> 时间：2012-11-01T11:04:12.537
> 
> 标签：php, mongodb, gridfs

我正在使用 mongodb 在 php 中编写一个 Web 应用程序，我想用 gridfs 存储非常大的文件（1gb）。

我有 2 个问题，首先我遇到了超时，我不知道如何设置 MongoGridFS 类的光标超时。

```
 <?php
  //[...]
  $con = new Mongo();
  $db = $con->selectDB($conf['base']);
  $grid = $db->getGridFS();

  $file_id = $grid->storeFile($_POST['projectfile'], 
                  array('metadata' => array('type' => 'release', 
                  'version' => $query['files'][$time]['version'], 
                  'mime' => mime_content_type($_POST['projectfile']),
                  'filename' => file_name($projectname).'-'.file_name($query['files'][$time]['version']).'.'
                  .getvalue(pathinfo($_POST['projectfile']), 'extension'))), array( 'safe' => false ));
  //[...]
  ?> 
```

其次，我想知道是否可以在后台执行请求？当我使用此查询存储文件时，执行被阻止，并且由于超时而出现错误 500

> PHP 致命错误：未捕获的异常 'MongoGridFSException' 带有消息“无法存储文件：光标超时（超时：30000，剩余时间：0:0，状态：0）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:53:09.393

默认情况下，Gridfs 查询不是“安全的”，但它们不是驱动程序中的单个查询。此函数必须在驱动程序中运行多个查询（一个用于存储`fs.files`行，一个用于拆分`fs.chunks`）。这意味着超时很可能发生在`find`需要处理更多批次的信息时，它甚至可能与 PHP tiemout 而不是 MongoDB 相关。

在后台使用它的最简单方法是通过调用 cronjob 或使用消息队列到另一个服务来创建“作业”。

至于超时；不幸的是，gridfs 函数（在您这边）无法直接访问正在使用的光标（除了设置安全），您可以在连接上设置超时，但我认为这不是一个明智的主意。

但是，如果您的光标超时，则意味着（如我所说）`find`查询可能花费的时间太长，在这种情况下，您可能想要监视 MongoDB 日志以找出超时的原因，这可能只是需要更好的简单情况索引或更高性能的设置。

正如@Anton 所说，您也可以考虑在 MongoDB 之外存放大文件，但是，没有要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:11:05.560

将文件存储在某个目录中，并将该文件的唯一位置放入数据库中可能会更好吗？它会相当快。

# xcode - 需要语法帮助（使用字符串变量）

> ID：13175701
> 
> 赞同：0
> 
> 时间：2012-11-01T11:04:18.350
> 
> 标签：xcode, string, stringwithformat

我正在做一些轻微或严重错误的事情。

我想将 UIColour 换成可编程变量，例如：

```
NSString *DataColourTitle = @"greenColor";
[[UINavigationBar appearance] setTintColor: [UIColor [NSString stringWithFormat: @"%@", DataColourTitle]]]; 
```

我在 NSString 部分收到一个 Expected Identifier 错误，并且没有制定完成此操作所需的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:44:24.100

调用 UIColor 的类方法的语法是`[UIColor <#some selector#>]`其中 <#some selector#> 是标识符，例如`greenColor`，而不是字符串。它所期望的选择器是对可以返回 UIColor 对象的代码的引用，而`@"greenColor"`只是一个静态的、被包装为 NSString 对象的字面字符串。

尝试类似：

```
SEL green = NSSelectorFromString(@"greenColor");
UIColor *color = [UIColor performSelector:green];
[[UINavigationBar appearance] setTintColor: color]; 
```

# sql - SQL：如何删除行；当使用 Multiply Returns 从另一个表中保护“WHERE”时

> ID：13175703
> 
> 赞同：2
> 
> 时间：2012-11-01T11:04:22.880
> 
> 标签：sql, sql-server

## 询问

```
 DELETE FROM TEMPSchedules 
           WHERE StudentID = ( Select StudentID 
                               From Students 
                               Where Ref = 'H1007') 
```

## 错误信息

> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

## 问题

现在的问题是每个“参考组”都有超过 1 个学生附属于它。那么我应该如何处理这个问题。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:05:25.647

```
 DELETE FROM TEMPSchedules 
           WHERE StudentID  in ( Select distinct StudentID 
                               From Students 
                               Where Ref = 'H1007') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:43:46.143

```
DELETE TEMPSchedules
From Students 
Where Students.Ref = 'H1007' and Students.StudentID=TEMPSchedules.StudentID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-21T11:51:43.423

以下 SQL 语句仅从“Students”表的“StudentID”列中选择 DISTINCT 值，其中 Ref = 'H1007'： `SELECT DISTINCT StudentID FROM Students;`

# java - 使用哪个地图/集合？

> ID：13175704
> 
> 赞同：0
> 
> 时间：2012-11-01T11:04:24.223
> 
> 标签：java, collections, hash

在下面的键/值列表中，“val3”针对不同的键重复。哪张地图最适合这种类型的列表。

我希望“val3”应该只存储一次，多个键指向它。

key1---->val1
key2---->val3
key3---->val3
key5---->val5
key6---->val3
key7---->val6
key8---->val3
key9 ---->val3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:07:31.150

任何`Map`实现都可以。每个 Java 集合只包含引用，而不是实际对象，因此如果您将同一个对象多次放入映射中，所有值都将指向同一个对象。换句话说，`val3`通过`key2`查找所做的更改将在通过任何其他指向 的键进行查找时反映出来`val3`。

考虑简化示例：

```
VeryLarge v = new VeryLarge();
Map<Integer, VeryLarge> map = new HashMap<>();
map.put(1, v);
map.put(2, v);
map.put(3, v); 
```

单个`VeryLarge`实例由 all和`1`键引用。`2``3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:20:35.870

只要您确保您不会通过`clone`操作获取值或值不是**不可变**对象（除了`String`文字或`Integer.valueOf()`（从-128 到 127 的值正在缓存并从缓存返回）这是异常），您将结束多个键指向相同的相关参考。

因此，您可以使用`HashMap`例如@Tomasz Nurkiewicz 所建议的。

# shell - 将 IFS 值传递给动态数组

> ID：13175705
> 
> 赞同：2
> 
> 时间：2012-11-01T11:04:26.237
> 
> 标签：shell, scripting, scripting-language

我有一个 Oracle 输出（选择输出）作为 cand1 cand2 cand3 cand62 现在我需要通过 shell 脚本将这些值存储在一个数组中。

```
#!/bin/bash
instant_client="/root/ora_client/instantclient_11_2"
output=`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000

select count (1) from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);

EOF
exit

query=`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000

select o.candidateid from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);
EOF
exit

i=0
echo "Throwing individual arrays:"
while [ $i -le $output ]
do
a=${query[$i]}
echo Candidate[$i]=$a
i=$(($i+1))
done 
```

输出是

```
Throwing individual arrays:

    Candidate[0]= cand1 cand2 cand3 cand62
    Candidate[1]=
    Candidate[2]=
    Candidate[3]=
    Candidate[4]= 
```

所需输出

```
Throwing individual arrays:

    Candidate[0]= cand1   
    Candidate[1]= cand2
    Candidate[2]= cand3
    Candidate[3]= cand62 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:14:39.590

像这样的东西：

```
$ query="cand1 cand2 cand3 cand62"
$ read -a Candidate <<<$query
$ echo ${Candidate[0]}
cand1
$ echo ${Candidate[1]}
cand2 
```

当您离开 sqlplus 时，您的“查询”变量包含类似上面的内容。通过简单地将整个事物读入一个数组，如上所示，您可以访问这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:24:09.833

问题是它`query`是一个字符串，而不是一个数组，所以`${query[$i]}`不能像你期望的那样工作。

通常，要将字符串转换为数组，您可以这样做：

```
$ string="foo bar"
$ array=($string)
$ echo ${array[0]}
foo
$ echo ${array[1]}
bar 
```

在您的情况下，如果您`sqlplus`用括号括住命令，则输出将存储在一个数组中。像这样：

```
query=(`$instant_client/sqlplus -s HRUSER/HRUSER@TOMLWF <<EOF
set heading off
set feedback off
set lines 10000
set pagesize 10000

select o.candidateid from onboardingcandidates o, candidatedetails c where o.candidateid=c.candidateid and o.JOININGSTATUS='0091' and to_date(o.joiningdate)=to_date(sysdate+5);
EOF) 
```

`query`然后您可以使用索引访问数组中的元素：`${query[$i]}`

# android - 我收到错误“方法显示（FragmentManager，字符串）”

> ID：13175713
> 
> 赞同：34
> 
> 时间：2012-11-01T11:04:50.060
> 
> 标签：android

我收到一个错误

> `show(FragmentManager, String)`类型中的方法`DialogFragment`不适用于参数`(FragmentManager, String)`

```
package com.example.test1;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void click(View view) {
        DialogFragment newFragment = new FireMissilesDialogFragment();
        newFragment.show(getFragmentManager(), "missiles");
    }

    public boolean onCreateOtionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-01T11:07:28.000

当你使用`android.support.v4.app.DialogFragment`时，你应该传递给一个可以使用调用来查询`show()`的实例。希望这可以帮助。`android.support.v4.app.FragmentManager``getSupportFragmentManager()`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-01T11:09:28.273

问题是因为您需要使用支持包的 FragmentManager，但在调用 getFragmentManager() 时使用的是本机 FragmentManager。初始化变量 fm 时尝试调用 getSupportFragmentManager()

您还必须确保从 Support 包中包含 DialogFragment，而不是从本机包中包含。

您可以通过导入来做到这一点，

```
import android.support.v4.app.DialogFragment; 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-28T05:33:53.357

即使我在姜饼中运行代码时也遇到了同样的问题。但适用于 ICS。解决办法是，

而不是这个：

```
public class MainActivity extends Activity {
} 
```

使用扩展 FragmentActivty

```
public class MainActivity extends FragmentActivity {
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-01T11:08:43.443

您应该使用`android.support.v4.app.FragmentManager`而不是`android.app.FragmentManager`.

那么你应该打电话`getSupportFragmentManager()`但不是`getFragmentManager()`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-04T07:40:03.940

我在打开 a 时得到了这个，`DialogFragment`即使我没有使用`android.support.v4.app.DialogFragment`. 我不得不打电话`getActivity().getFragmentManager()`，因为`getSupportFragmentManager()`没有工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-07T13:03:29.133

```
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btnselectDate:
         DialogFragment newFragment = new DatePickerFragment();
         newFragment.show(this.getFragmentManager(), "datePicker");
         break;

         default:
         break;
     }
} 
```

# javascript - 正则表达式 - 获取文件名？

> ID：13175714
> 
> 赞同：0
> 
> 时间：2012-11-01T11:04:54.337
> 
> 标签：javascript, regex

我有这个网址：

```
C:\Projects\Ensure_Solution\GD_EServices_Web\App_WebReferences\GD_Eservices_Web_Service\GD_Eservices_Web_Service.wsdl
C:\Projects\Ensure_Solution\GD_EServices_Web\App_WebReferences\GD_Eservices_Web_Service\GD_Eservices_Web_Service.wsdl 
```

我想获取 wsdl 文件名（没有前导斜杠）

我已经成功使用了 2 个解决方案：

```
\\[^\\]+$

\\(.(?!\\))+$ 
```

但这会返回前导斜杠：[http ://regexr.com?32lvi](http://regexr.com?32lvi)

![在此处输入图像描述](../Images/7e31a0a511791d0a17f0b4274be2fc12.png)

如何*增强*我的正则表达式**仅**返回文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:09:39.233

这应该可行`[^\\]+$` 但是对于您的情况，我更喜欢`string.split('/').pop()`（javascript）或`array_pop(split('/', string))`（对于php，我不知道您使用的语言）而不是正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:10:36.887

尝试使用负前瞻`(?!\\)(.(?!\\))+$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:13:03.830

您只需要排除正则表达式中的前导斜杠。

```
var path = 'C:\\Projects\\Ensure_Solution\\GD_EServices_Web\\App_WebReferences\\GD_Eservices_Web_Service\\GD_Eservices_Web_Service.wsdl';
console.log(path.match(/[^\\]+$/)); 
```

你可以在没有正则表达式的情况下获得它，使用`split`，并使用 获得最后一个元素`pop`：

```
console.log(path.split('\\').pop()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:08:15.063

试试这个

```
\\[^\\]+$ 
```

注意：这意味着尝试只使用*一个*前导反斜杠

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:10:41.257

这应该这样做：

```
([\w\d_-]*)\.?[^\\\/]*$ 
```

[这个线程](https://stackoverflow.com/questions/3671522/regex-capture-filename-from-url-without-file-extention)有一些javascript的例子。

或者，您可以在“\”上拆分字符串以创建一个数组并获取数组中的最后一个。

# r - 组合逻辑运算符

> ID：13175719
> 
> 赞同：0
> 
> 时间：2012-11-01T11:05:32.337
> 
> 标签：r, logical-operators

我对 R 很陌生，我有一个简单的问题，我就是想不出一个简单的问题。我想组合两个逻辑语句，即我想从分析中排除两列要仅排除一个值，代码可以正常工作，如下所示：

`df[ colnames(df) != "Total.Population", function(x){ x/df$Total.Population *1000 }`

因此，除了人口之外，我还想从我的分析中排除 Geocodes 列。我尝试了很多不同的东西，比如

`df[ colnames(df) != "Total.Population"&&"Geocodes", function(x){ x/df$Total.Population *1000 }`

但我只是无法完成它为我工作......所以任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:39:19.290

你没有关闭`]`。请编辑。至于逻辑运算符：您想选择某些列索引，但您已经“锁定”了比较。做这个：

```
 Rgames> foo
   one two three four five
1   1   5     9   13   17
2   2   6    10   14   18
3   3   7    11   15   19
4   4   8    12   16   20

Rgames> foo[ (colnames(foo) != "three")&(colnames(foo)!='two')]
one four five
1   1   13   17
2   2   14   18
3   3   15   19
4   4   16   20 
```

# jquery - jQuery：将 CSS 应用于创建的节点

> ID：13175720
> 
> 赞同：0
> 
> 时间：2012-11-01T11:05:43.583
> 
> 标签：jquery, css

我想创建 HTML 节点，然后应用 CSS 样式。使用简单的元素很容易：

```
$('<div>').css("color","red") 
```

就我而言，我想插入一个更复杂的元素，例如：

```
<div id="foo">
  <span class="bar"> foo </span>
  <span class="baz"> bar </span>
</div> 
```

使用 CSS：

```
#foo {                                                                       
  ...                                                                        
}                                                                            

#foo .bar {                                                                  
  ...                                                                        
}                                                                            

#foo .baz {                                                                  
  ...                                                                        
} 
```

我不想为每个节点分别编写 HTML 代码和样式。我只想将 HTML 和整个 CSS 存储在两个字符串中，并使用这些字符串创建节点。理想情况下，是这样的：

```
html_blob = '<div> id="foo"> ... </div>'
css_blob = '#foo {... } ... #foo .baz {...}'

new_element = $(html_blob).apply_css_from_string(css_blob) 
```

我使用[Crossrider](http://crossrider.com/)构建了一个扩展，我需要动态创建一个弹出窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:09:25.580

怎么样：

```
$(someelement).append(html_blob);
$('head').append('<style id="tempstyle">' + css_blob + '</style>'); 
```

如果您想稍后删除它：

```
$('#tempstyle').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:11:07.493

这是我所理解的答案：

```
 $("#top_element").append(html_blob); 
```

现在，如果 css 在样式表中出现在其自身之前会更好，或者您可以像下面这样动态附加：

```
$("head").append("<style>"+css_blog+"</style>") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:16:09.583

为什么您要这样做，或者我没有得到您想要实现的目标。

但是，如果您需要控制呈现重复的 html 控件。看看 jQuery 模板。

[jQuery 模板](http://api.jquery.com/jQuery.template/)对重复的 html 内容提供了出色的控制。

```
// Convert the markup string into a named template
// you can declare your string template like this
$.template( "summaryTemplate", "<li>${Name}</li>" );

function renderList() {
    // Render the movies data using the named template: "summaryTemplate"
    $.tmpl( "summaryTemplate", movies ).appendTo( "#moviesList" );
} 
```

# bash - 如何将字符串作为 bash 脚本的命令行参数传递？

> ID：13175727
> 
> 赞同：5
> 
> 时间：2012-11-01T11:06:09.247
> 
> 标签：bash

我想将一个字符串作为命令行参数传递给 bash 脚本；简单地说，我的 bash 脚本是：

```
>cat test_script.sh

for i in $*
do 
echo $i
done 
```

我打了

> bash test_script.sh test1 test2 "test3 test4"

输出 ：

```
test1
test2
test3
test4 
```

我期待的输出：

```
test1
test2
test3 test4 
```

我尝试使用反斜杠 (test1 test2 "test3\ test4") 和单引号，但没有得到预期的结果。

如何获得预期的输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T11:10:26.330

你需要使用：

```
for i in "$@"
do echo $i
done 
```

甚至：

```
for i in "$@"
do echo "$i"
done 
```

第一个会在参数中丢失多个空格（但会将参数的单词保持在一起）。第二个保留参数中的空格。

您也可以省略该`in "$@"`子句；如果您写，则暗示它`for i`（但就个人而言，我从不使用速记）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T11:08:17.657

尝试使用 printf

```
for i in $* do $(printf '%q' $i) done 
```

# contextmenu - EnCase EnScript 编辑上下文菜单

> ID：13175728
> 
> 赞同：0
> 
> 时间：2012-11-01T11:06:16.703
> 
> 标签：contextmenu

是否可以将新项目添加到上下文菜单（例如，添加到证据窗口）？我必须编写一个脚本，它将在上下文菜单中创建一个新项目。这个新项目将运行另一个脚本。

# android - 未捕获的 ReferenceError：cordova 未定义

> ID：13175729
> 
> 赞同：10
> 
> 时间：2012-11-01T11:06:19.370
> 
> 标签：android, cordova

这是我的 HelloPlugin.js 文件。

```
var HelloPlugin = { 
  callNativeFunction: function(success,fail,resultType) { 
    return cordova.exec(success, fail, "HelloPlugin", "nativeAction", [resultType]); 
  } 
}; 
```

我收到以下异常：

```
: Uncaught ReferenceError: cordova is not defined at file:///android_asset/www/HelloPlugin.js:3 
```

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T22:05:53.107

请确保在 HTML 文件中的*HelloPlugin.js*`<script ...`标记之前有*cordova.js*标记。*`<script ...`*

 **它应该在`<head>`标签中都有这样的：

```
<script src="cordova.js"></script>
<script src="HelloPlugin.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T15:23:44.403

我在 iOS 中遇到了类似的问题。解决方案是安装[`cordova-plugin-file-transfer2`](https://www.npmjs.com/package/cordova-plugin-file-transfer2#sample)：

```
cordova plugin add cordova-plugin-file-transfer 
```**

# hbase - HBase：行键组合

> ID：13175733
> 
> 赞同：2
> 
> 时间：2012-11-01T11:06:42.880
> 
> 标签：hbase

为简单起见，假设我有一个表，其中主键在逻辑上应该是长的。
目前，从我做的一个项目（使用关系数据库）继承，我有一个 IDMaker 类，它返回我使用（在那个项目中）作为主键的 long。

我说可以是因为据我了解，由于此 ID 是基于时间戳且单调递增的，因此它不是 HBase 行键的良好候选者。

现在，阅读

[http://ikaisays.com/2011/01/25/app-engine-datastore-tip-monotonically-increasing-values-are-bad/](http://ikaisays.com/2011/01/25/app-engine-datastore-tip-monotonically-increasing-values-are-bad/) [http://hbase.apache.org/book/rowkey.design.html](http://hbase.apache.org/book/rowkey.design.html)
和Lars George 的《HBase：权威指南》第 9 章，

我看到“腌制”策略可以满足我的需要。这基本上为我的键添加了一个前缀，因此打破了单调系列。
现在的问题是：使用这样的策略，从这个 ids 开始：

1
2
3
4

假设这些密钥转到一个区域服务器，并像这样转换这些 id（前缀当然是一个例子）

0:1
7:2
9:3
a:4

我如何确定这四行仍然不会转到同一个区域服务器？换句话说，我怎么能确定我的前缀足以避免这里很好地描述了[http://ikaisays.com/2011/01/25/app-engine-datastore-tip-monotonically-increasing-values-are -坏/](http://ikaisays.com/2011/01/25/app-engine-datastore-tip-monotonically-increasing-values-are-bad/)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T07:45:27.803

> 我如何确定这四行仍然不会转到同一个区域服务器？换句话说，我如何确定我的前缀足以避免这里很好地描述的内容

您是否阅读了第 2.5.2.7 节。[已在重要配置](http://hbase.apache.org/book.html#important_configurations)中进行托管拆分？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T06:32:31.000

> 我如何确定这四行仍然不会转到同一个区域服务器？

您应该根据散列模式预先拆分表。

例如，如果您将使用 0-1-2-3-4-5-6-7-8-9-ABCDEF 进行腌制。您可以为该 hbase 表创建 16 个拆分。每个拆分应该有 0 作为开始 - 1 作为结束行，1 作为开始 - 2 作为结束行 .. 像这样。您可以从 hbase shell 或 java 代码执行此操作。我更喜欢 java，因为我可以使用 for 循环来创建许多拆分 :)

至于过早的优化，过多的拆分会影响您的性能。

# c# - 当前状态对象 - C#

> ID：13175735
> 
> 赞同：0
> 
> 时间：2012-11-01T11:06:52.210
> 
> 标签：c#, error-handling, try-catch

对于我目前的“试水”项目，我试图不使用任何 Try-Catch 块，而是以其他方式捕获每个错误（致命错误除外）。

现在，当我说捕获错误时，我非常做作的程序会犯一个很容易避免的错误；它试图除以`0`，这可以通过 If 语句来防止。为了简单起见，我只有 1 个 C# 文件，有 1 个类和两种方法。我想这就像一个模板，构造函数在其中启动一个过程：

```
public class myObject
{
    public myObject()
    {
       Object objOne = methodOne();
       methodThree(objOne);
    }

    public object methodOne()
    {
        //logic to create a return object

        int x = 0;  

        //I've added a condition to ensure the maths is possible to avoid raising an exception when, for this example, it fails
        if (x > 0)
            int y = 5 / x;

        return object;
    }

    public void procesObjects(Object objOne)
    { 
        //logic  
    }    
} 
```

因此，正如您在中看到的那样，`methodOne()`我添加了`if`语句以确保它检查数学不是除以`0`. 但是，由于我已经抓住了它，我的申请会继续，这是不希望的。我需要一种方法来停止应用程序并记录调试失败。

所以，这就是我认为可行的方法：

创建一个名为`Tracking`which 对于这个例子来说非常简单的类（或者结构会更好吗？）。

```
public class Tracking
    {
        StringBuilder logMessage = new StringBuilder();
        bool readonly hasFailed;
    } 
```

然后我可以将我的代码更新为：

```
public class myObject
{
    Tracking tracking = new Tracking();
    public myObject()
    {
       Object objOne = methodOne();
       if (!tracking.hasFailed)
           methodThree(objOne);
       if (tracking.hasFailed)
           ExteranlCallToLog(tracking);
    }
    public object methodOne()
    {
        //logic
        int x = 0;  
        //I've added a condition to ensure the maths is possible to avoid raising an exception when, for this example, it fails
        if (x > 0)
            int y = 5 / x;
        else
        {
            tracking.hasFailed = true;
            tracking.logMessage.AppendLine("Cannot divide by 0");
        }
         //may also need to check that the object is OK to return
        return object;
    }
    public void procesObjects(Object objOne)
    { 
        //logic  
    }    
} 
```

所以，我希望你能看到我想要达到的目标，但我有 3 个问题。

1.  我的跟踪对象（如本例所示）应该是类还是结构？
2.  我担心我的代码会变得非常嘈杂。我想知道当系统发生故障时，它是否会在`Tracking`对象中引发一个事件，该事件记录然后以某种方式关闭程序会更好？
3.  任何其他想法都非常受欢迎。

同样，我很欣赏使用 Try-Catch 块可能更简单、更容易，但我故意避免使用它们来进行自己的教育。

**编辑**

上面的原因是由于阅读了这篇博客：[Vexing exceptions - Fabulous Adventures In Coding - Site Home - MSDN Blogs](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:16:55.423

说真的，戴夫——try catch 块的存在是有原因的。使用它们。

从字里行间看，您似乎想在出现问题时跟踪自定义信息。您是否考虑过扩展 System.Exception 以创建适合您需求的定制实现？

类似于以下内容：-

```
public class TrackingException : System.Exception 
{
   // put custom properties here.
} 
```

这样，当您检测到出现问题时，您仍然可以使用 try/catch 处理，但会抛出一个包含您需要的相关信息的异常。

# r - 为什么 ggplot2 中的 PDF 绘图不显示标题或标签？

> ID：13175736
> 
> 赞同：1
> 
> 时间：2012-11-01T11:06:52.070
> 
> 标签：r, ggplot2

我正在使用 ggplot2 创建一个简单的阶梯图。如果我将文件类型从 PNG 切换为 PDF，则绘图不会显示标签、刻度、标题或图例。我做错了什么？

数据：

```
plotData <- structure(list(iteration = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), time = c(0L, 10L, 
20L, 30L, 40L, 50L, 60L, 70L, 80L, 90L, 100L, 0L, 10L, 20L, 30L, 
40L, 50L, 60L, 70L), routes = c(6L, 6L, 5L, 3L, 3L, 3L, 3L, 3L, 
2L, 1L, 0L, 5L, 5L, 5L, 5L, 1L, 1L, 1L, 0L)), .Names = c("iteration", 
"time", "routes"), class = "data.frame", row.names = c(NA, -19L
)) 
```

代码：

```
 library(ggplot2)
    x_axis_breaks <- seq(10, 100, by = 10)

    png(file="plot.png",width=1280, height=1280)
    ## pdf(file="plot.pdf",width=6,height=6)
    plot <- ggplot(plotData) + geom_step(data=plotData, size = 5, 
         mapping=aes(x=time,    
         y=routes, group=iteration, colour=factor(iteration)), direction="vh")
    plot <- plot + scale_x_discrete(breaks=x_axis_breaks, name="time") + 
                   scale_y_discrete(name="#routes");
    plot <- plot + opts(axis.text.x=theme_text(size=36,face="bold"), 
                        axis.text.y=theme_text(size=36,face="bold")) +
                        scale_colour_hue(name="iteration")
    plot <- plot + opts(legend.title=theme_text(size=36,face="bold"), 
                        legend.text=theme_text(size=36,face="bold"))
    plot <- plot + opts(axis.title.x=theme_text(size=36,face="bold"),
                        axis.title.y=theme_text(size=36,face="bold"))
    plot <- plot + opts(title="network lifetime", 
             plot.title=theme_text(size=36, face="bold"))
    print(plot)
    dev.off() 
```

如果我从“png...”切换到“pdf”，就会出现问题。数据本身绘制得很好。也许我只是错过了一些关于在 ggplot2 中生成 PDF 绘图的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-01-22T16:22:45.780

这很可能是由于字体嵌入。

R 默认情况下不嵌入字体，这会导致您在某些 PDF 阅读器上描述的问题。通常，您对带有大量字体的 Adob​​e Reader 上的此类数字不会有任何问题，而其他阅读器可能没有很多字体（尤其是商业字体），并且通常他们会尝试用最接近的字体替换丢失的字体. 有时这会失败并且您看不到任何字体。我经常在 Ubuntu 上遇到 Evince 这个问题，不仅是 R 绘图，还有任何其他没有嵌入字体的 PDF。

在 Ubuntu 上，您可以使用`pdffonts file.pdf`.

一些解决方案：
- 在 R 中生成 pdf 时使用`cairo_pdf`设备，通常这可以解决问题
- 使用`extrafont`包嵌入所需的字体（字体必须在您的操作系统上可用），请参阅[此处](https://github.com/wch/extrafont)了解详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:07:34.517

结合 ggplot 您应该`ggsave()`用于保存图像：

```
ggsave( "plot.png", plot )
ggsave( "plot.pdf", plot )
... 
```

# java - 如何使用fft检测环境

> ID：13175737
> 
> 赞同：0
> 
> 时间：2012-11-01T11:06:56.047
> 
> 标签：java, android, audio, fft

伙计们。我目前正在做一个项目，根据在那个环境中记录的音频来检测你在哪个环境（例如在汽车上、公共汽车上、火车上、街道上、食堂里）。

基本上我会先录一个wav，然后做FFT，然后在频域上分析。该软件应开发为 Android 应用程序。

我已经阅读了有关 HMM、MFCC 的论文，但我认为它们对于仅检测一些环境来说太复杂了。

欢迎任何想法或建议！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:33:45.610

几年前我一直在从事一个类似的项目，并试图从加速度计、陀螺仪和 GPS 等多个传感器收集的信息中了解用户当前的车辆。

在那个项目中，我使用了 FFT、决策树和 HMM。我认为只有音频+FFT是远远不够的，FFT可以从音频数据中提取频域上的几个特征，但只有这些不能区分环境。

我的建议是在数据挖掘中选择合适的算法来训练强模型，并使用 HMM 或其他方法进行时间序列分析。

# algorithm - Boyer-Moore 字符串搜索算法的移位规则是什么？

> ID：13175739
> 
> 赞同：8
> 
> 时间：2012-11-01T11:06:58.483
> 
> 标签：algorithm, string-search, boyer-moore

我一直试图理解*Boyer–Moore 字符串搜索算法*中的移位规则，但还没有理解它们。[我在维基百科](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)上读到这里，但这太复杂了！

如果有人以简单的方式列出规则，那将有很大帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T12:09:54.817

在 Boyer-Moore 算法中，您从模式末尾开始将模式字符与文本字符进行比较。如果您发现不匹配，则您的配置类型为

```
....xyzabc....      <-text
  ....uabc          <- pattern
      ^
    mismatch 
```

现在，*坏字符移位*意味着移动模式，以便不匹配的文本字符与模式初始部分中该字符的最后一次出现对齐（模式减去最后一个模式字符），如果有这样的出现，或者如果不匹配的字符根本没有出现在模式的初始部分中，则在模式之前的一个位置。

如果情况是这样，那可能会向左移动

```
 v
...xyzazc...
 ....uazc
 ..uazc 
```

因此，仅此一项并不能保证取得进展。

另一个移位，*良好的后缀移位*，将匹配的文本部分对齐`m`，与该字符序列在模式中最右边出现的不同字符（包括无，如果匹配的后缀也是模式）而不是模式的匹配后缀`m`- 如果出现这种情况。

所以例如

```
 v
....abcdabceabcfabc...
    ...xabcfabcfabc
        ...xabcfabcfabc 
```

将导致四个位置的良好后缀移位，因为匹配的部分`m = abcfabc`出现在其后缀出现左侧四个位置的模式中，并且前面有一个与后缀位置不同的字符（`x`而不是`f`）。

如果模式中的匹配部分没有完全出现，其前面有一个与后缀不同的字符，则良好的后缀移位将文本匹配部分的后缀与模式的前缀对齐，选择最大重叠，例如

```
 v
...robocab....
    abacab
        abacab 
```

好的后缀移位总是将模式向右移动，因此可以保证进度。

然后，在每次不匹配时，比较坏字符移位和好后缀移位的进展，并选择较大的。Christian Charras 和 Thierry Lecroq[在这里](http://www-igm.univ-mlv.fr/~lecroq/string/node14.html#SECTION00140)更深入地解释了它，以及许多其他字符串搜索算法。

* * *

对于您在评论中提到的示例，

```
SSIMPLE EXAMPLE
EXAMPLE
  ^ 
```

匹配的后缀是`MPLE`，不匹配的文本字符是`I`。因此，坏字符移位会`I`在模式的初始部分查找最后一次出现的 。没有，因此错误的字符移位会改变模式，因此不匹配`I`的位置在模式开始之前

```
SSIMPLE EXAMPLE
   EXAMPLE 
```

`MPLE`并且良好的后缀移位在模式中寻找最右边的出现，而*不是*前面的`A`，或者最长的后缀`MPLE`是模式的前缀。模式中匹配部分在后缀之前没有完全出现，所以匹配部分的最长后缀同时也是模式的前缀决定了好的后缀移位。在这种情况下，作为模式前缀的匹配部分的两个后缀是单字符字符串`E`和空字符串。最长的显然是非空字符串，所以好的后缀移位将`E`文本匹配部分中的单字符后缀与模式的单字符前缀对齐

```
SSIMPLE EXAMPLE
      EXAMPLE 
```

好的后缀移位将模式向右移动，所以这是选择的移位。

然后在最后一个模式位置立即出现不匹配，然后坏字符移位将`P`文本`P`中的 与模式中的对齐（如果不匹配发生在最后一个模式字符，则根本不需要考虑好的后缀移位，因为在这种情况下，它永远不会产生比坏字符偏移更大的偏移）。

然后我们就有了完整的比赛。

在带有模式的变体中`TXAMPLE`，good后缀移位发现没有匹配部分的非空后缀是模式的前缀（并且没有出现完全匹配的部分在前面*没有*`A`的模式中），所以good后缀移位将文本匹配部分的空后缀（the`E`和空格之间的边界）与模式的空前缀（the 之前的空字符串`T`）对齐，从而导致

```
SSIMPLE EXAMPLE
       TXAMPLE 
```

（然后在下一步中，坏字符移位将两个`L`s 对齐，之后该步骤中的下一个不匹配发生在`T`模式的初始位置）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-01T12:08:49.177

这里有一个很好的可视化[。](http://www.cs.utexas.edu/~moore/best-ideas/string-searching/fstrpos-example.html)

（编辑：这两个示例和如何在[此处](http://www.iti.fh-flensburg.de/lang/algorithmen/pattern/bmen.htm)实现预处理步骤的示例也有很好的解释。）

一般规则：

*   我们正在寻找如何*将*模式与文本对齐，以便对齐的部分匹配。如果不存在这样的对齐方式，则在文本中找不到该模式。
*   从右到左检查每个对齐方式——也就是说，首先检查模式的最后一个字符是否与其当前对齐方式匹配。
*   当你碰到一个不对齐的字符时，增加偏移量（移动模式），以便模式中*最后一次*出现的文本侧字母与我们当前正在查看的文本侧字母的出现对齐. 这需要预先构建（或每次搜索，但效率较低）每个字母在模式中的位置的索引。
*   如果文本中考虑的字符没有出现在模式中，则向前跳过模式的全长。
*   如果图案的结尾超出文本的结尾（偏移量 + 长度（图案）> 长度（文本）），则图案不会出现在文本中。

我刚才描述的是“坏性格”规则。“好后缀”规则为移位提供了另一种选择；无论哪个更远，你应该采取的那个。*完全有可能在没有*好的后缀规则的情况下实现该算法，但是一旦建立了索引，它的效率就会降低。

good-suffix 规则要求您还知道在哪里可以找到模式的每个多字符子字符串。当您遇到不匹配时（检查，一如既往，从右到左），好的后缀移位将模式移动到已经匹配的字母将再次匹配的*位置*。或者，如果匹配的部分在模式中是唯一的，您知道您可以一直跳过它，因为如果它在与唯一匹配项对齐时不匹配，则在与任何匹配项对齐时可能无法匹配图案的其他部分。

例如，让我们考虑以下情况：

*   我的模式以“一条狗”结尾。
*   我目前将它与以“s dog”结尾的部分文本对齐。
*   因此，坏字母是“s”（它们停止匹配的地方），好后缀是“狗”（匹配的部分）。

我在这里有两个选择：

1.  移动以使模式中的第一个“s”（从右到左）与文本中的“s”对齐。如果模式中没有“s”，则将模式的开头移到刚刚过去的“s”。
2.  Shift 使下一个“dog”与文本中的“dog”对齐。如果模式中没有另一个“狗”，则将模式的开头移到“狗”的结尾。

我应该选择让我移动更远的那个。

如果您仍然感到困惑，请尝试提出更具体的问题；当我们不知道你被困在哪里时，很难说清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T12:17:13.240

有两种启发式：蝙蝠符号启发式和良好模式启发式。

首先，你知道，针比较从它的末端开始。因此，如果字符不匹配针移位，那么至少在 haystack 中比较的字符将匹配针。例如。needle 是“ABRACADABRA”，而 haystack 中的当前字符是“B”，它不匹配最后一个“A”，也不匹配前面的“R”，因此移位一个是没有意义的，不会匹配。但是“B”匹配针中末尾字符的第 2 个字符。因此，我们将针至少移动 2 个位置。如果 haystack 中的当前字符与 needle 中的任何字符都不匹配，则必须将 needle 移到当前字符之外。换句话说，我们移动模式直到 haystack 中的当前字符匹配针中的字符，或者整个针被移动。

计算移位量并将其存储在数组中，因此对于“ABRACADABRA”，它将是：['R'] = 1、['B'] = 2、['D'] = 4 等。

```
haystack: XYABRACADABRA...
                    |
needle:   ABRACADABRA
           ABRACADABRA <-- pointless shift: R will not match B
            ABRACADABRA 
```

其次，如果在 haystack 中找到至少“ABRA”的匹配项（但没有完全匹配），可以移动针，以便下一个“ABRA”将匹配。

匹配部分的偏移量也已预先计算：例如 ['A'] = 3, ['RA'] = 11, ['BRA'] = 11, ['ABRA'] = 7, ['DABRA'] = 7 ...

```
haystack: XYZYXADABRACADABRA...
needle:   ABRACADABRA           (shift to ABRA from matched ADABRA)
          ~~~~   ~~~~
                 ABRACADABRA 
```

这不是对所有极端情况的完整解释，而是算法的主要思想。

# eclipse - 使用 maven 编译时无法找到 Javac 编译器 - 无法在以下位置找到 Javac 编译器：

> ID：13175740
> 
> 赞同：5
> 
> 时间：2012-11-01T11:07:01.760
> 
> 标签：eclipse, maven, compiler-errors

使用 maven 编译时出现编译错误。

```
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Unable to locate the Javac Compiler in:
  C:\Program Files\Java\jre1.6.0_05\..\lib\tools.jar 
```

所以我设置`JAVA_HOME`了环境变量但没有优势。该错误似乎是**在 jre 路径中搜索 java 编译器，而不是在`JAVA_HOME`.**

*   `JAVA_HOME`是`C:\Program Files\Java\jdk1.6.0_05`。

*   安装的 JRE 是`C:\Program Files\Java\jre1.6.0_05`.

*   我的`PATH`变量是：

> `C:\Program Files\PC Connectivity Solution\;D:\alfrescoplatform\ImageMagick;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\system32\Wbem;C:\Program Files\ImageMagick-6.7.3-Q16;C:\Program Files\Java\jdk1.6.0_05\bin`

这是我的详细日志

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building SpringMVC Maven Webapp 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ SpringMVC ---
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ SpringMVC ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 2 source files to D:\Learning\spring-workspace\SpringMVC2.5.6\target\classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] Unable to locate the Javac Compiler in:
  C:\Program Files\Java\jre1.6.0_05\..\lib\tools.jar
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required).
In most cases you can change the location of your Java
installation by setting the JAVA_HOME environment variable.
[INFO] 1 error
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.719s
[INFO] Finished at: Thu Nov 01 17:22:43 MMT 2012
[INFO] Final Memory: 4M/8M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project SpringMVC: Compilation failure
[ERROR] Unable to locate the Javac Compiler in:
[ERROR] C:\Program Files\Java\jre1.6.0_05\..\lib\tools.jar
[ERROR] Please ensure you are using JDK 1.4 or above and
[ERROR] not a JRE (the com.sun.tools.javac.Main class is required).
[ERROR] In most cases you can change the location of your Java
[ERROR] installation by setting the JAVA_HOME environment variable.
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

如果您对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T12:04:27.913

您的 JAVA_HOME 是 C:\Program Files\Java\jdk1.6.0_05

**方式 1**：以下步骤适用于 Eclipse：

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE

2.  将现有 JRE 位置编辑为：设置 JRE Home = JAVA_HOME 或 JAVA_HOME\jre（在您的情况下，路径应为 C:\Program Files\Java\jdk1.6.0_05 或 C:\Program Files\Java\jdk1.6.0_05\ jre)

3.  单击完成和确定按钮

**方式2**：另一种设置JRE系统库的方式：

1.  打开 Eclipse 并右键单击 Eclipse 项目属性

2.  Java 构建路径 -> 库

3.  选择 JRE 系统库 -> 单击编辑按钮

4.  单击“已安装的 JRE...”按钮

5.  将 JRE 编辑为：设置 JRE Home = JAVA_HOME 或 JAVA_HOME\jre

**方式3**：以下步骤也应该很好用：

1.  转到窗口 -> 首选项 -> Java -> 已安装的 JRE
2.  选择您正在使用的 JRE
3.  按编辑-> 添加外部 JAR...
4.  浏览到 Java\jdk1.6.0_05\lib 并选择 tools.jar 并按 Enter
5.  单击完成和确定按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:48:45.450

尝试向您的文件添加`vm`参数。`eclipse.ini`

```
-vm
C:\Program Files\Java\jdk1.6.0_05\bin\javaw.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T22:15:53.687

我有完全相同的问题，尝试了这些解决方案但没有成功：

*   [Maven 无法在以下位置找到 Javac 编译器：](https://stackoverflow.com/questions/12585380/maven-unable-to-locate-the-javac-compiler-in)

*   [maven 构建失败：无法在以下位置找到 Javac 编译器：jre 或 jdk 问题](https://stackoverflow.com/questions/2222560/build-failed-question-maven-jre-or-jdk-problem)

**什么对我有用：**

*   单击绿色运行按钮旁边的小向下箭头![点击](../Images/e324485ac94bd7533ba7f576c7252425.png)
*   选择*运行配置*
*   在*JRE*选项卡上，选择*Alternate JRE*，然后选择所需的目标（如果它不在列表中，请单击*Installed JREs*将其添加）。

# javascript - 原生 iPhone 应用程序：在 enterForeground 事件中从 Objective-C 运行 JavaScript 代码

> ID：13175743
> 
> 赞同：0
> 
> 时间：2012-11-01T11:07:16.480
> 
> 标签：javascript, iphone, objective-c

当我的 iPhone 应用程序进入前台时，我想运行一些 JavaScript 代码。所以我这样做了：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    NSLog(@"1");

    [self.viewController.webView stringByEvaluatingJavaScriptFromString:@"window.alert('ok');"];

    NSLog(@"2");    
} 
```

当我运行它并将应用程序从后台切换到前台时，日志只显示“1”而不是“2”，并且我没有收到任何警报消息。

这是怎么回事？

ps.：我用的是Phonegap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:55:57.270

我找到了问题的原因。AppDelegate.m 中的 self.viewController.webView 似乎是错误的参考。我猜这是Phonegap的问题。

因此，我通过简单地使用 Phonegap 的 onResume 事件来解决这个问题。[http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#resume](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#resume)

那成功了。

# java - 在 Java 应用程序中与 oracle 连接

> ID：13175744
> 
> 赞同：4
> 
> 时间：2012-11-01T11:07:21.493
> 
> 标签：java, oracle, connection

我已经下载了 oracle express 11g 版本并安装了它。现在我想从 java 应用程序连接它。这是我的连接代码：-

```
Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:example", "example","password123"); 
```

但是当我尝试连接它时，它显示我出现以下异常。

```
java.sql.SQLException: Listener refused the connection with the following error:  
ORA-12505, TNS:listener does not currently know of SID given in connect descriptor

at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:419)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:536)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:228)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
at java.sql.DriverManager.getConnection(DriverManager.java:582)
at java.sql.DriverManager.getConnection(DriverManager.java:185)
at javaapplication3.JavaApplication3.main(JavaApplication3.java:40) 
```

但是当我试图连接“xe”数据库时，它就被连接了。

```
Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();   
Connection conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "example","password123"); 
```

我不知道为什么会这样？请给我一些参考或提示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T11:31:03.917

我认为，您在`database schema`和数据库类型之间存在误解。中`Oracle`，`XE`表示`Express Edition`oracle数据库。`ORCL`意味着`Oracle Corp`。

在mysql中

```
DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "example","password123");

`test` is a database schema. 
```

在 Oracle XE 中

```
DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:xe", "example","password123");
DriverManager.getConnection("jdbc:oracle:thin:scott/tiger@myhost:1521:orcl","example", "password123");

`example`: database schema name and DB user name are the same. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-01T11:30:25.823

Oracle 的连接 URL 采用以下格式：

jdbc:oracle:thin:@HOST:PORT:SID

SID 是站点标识符。在完整的 oracle 安装中，您可以有多个 SID，但对于 Oracle Express，这将始终是`XE`.

您所说的“数据库”等同于 Oracle 中的“用户”（上面代码中的“示例”）。表等...是在该用户下创建的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-29T10:38:59.897

在 URL 模式中，XE 和 orcl 是 Oracle 的服务 ID。对于 Oracle 表达版，使用“xe”，对于 Oracle 企业版，使用“orcl”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:28:52.687

通过执行以下命令检查侦听器已知哪些实例：**lsnrctl services**

检查您的 tnsnames.ora

检查您的 SID 参数是否存在拼写错误和无效参数值

# c# - 制定枚举掩码 c#

> ID：13175750
> 
> 赞同：2
> 
> 时间：2012-11-01T11:07:38.343
> 
> 标签：c#, enums

我想知道以下枚举掩码是如何工作的

如果我有一个枚举结构

```
public enum DelMask
{
        pass = 1,       
        fail = 2,       
        abandoned = 4,        
        distinction = 8,             
        merit = 16,        
        defer = 32,        
} 
```

我看过下面的代码

```
int pass = 48;
if ((pass & (int)DelMask.defer) > 0)
   //Do something
else if ((pass & (int)DelMask.merit ) > 0)
   //Do something else 
```

我想知道谁能帮我弄清楚哪个块将如何执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:15:31.707

在这里工作的基本位逻辑。整数 48 以二进制结尾：

```
0011 0000 
```

32 岁的延迟是：

```
0010 0000 
```

16岁的优点是：

```
0001 0000 
```

现在，当您执行逻辑与 (&) 时，结果位将设置在它们都在输入中的位置：

```
pass & (int)DelMask.defer

0011 0000 
0010 0000
========= & 
0010 0000 
```

结果将是 16，因此`((pass & (int)DelMask.defer) > 0)`将评估为真。在您的示例中，两者`if`都将评估为 true，因为输入中都存在两个标志。第二个不会被评估，因为它是一个`else if`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:13:41.183

两者都是正确的，因此第一个将被执行。

16 是 10000

32 是 100000

48 是 16+32 所以是 110000

10000 & 110000 是 10000

100000 & 110000 是 100000

两者都大于零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:14:34.517

48 = 16（优异）+ 32（延期）。

因此`pass & (int)DelMask.defer`评估为 32，因此第一个块运行。

如果不是这种情况，则`pass & (int)DelMask.merit`计算结果为 16，因此如果达到那么远，第二个块将运行。

这只有效，因为枚举中的值都是 2 的不同幂，因此对应于底层的独立位`int`。这就是所谓的位标志枚举。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:15:09.977

首先，它应该是`int pass = 48;` 基本上这段代码检查是否在数字的二进制表示中设置了一个位。每个 & 操作都应该在掩码中的位置产生一个全为零和一个的结果。例如：

```
48:         110000
defer = 32: 100000
            ______
          & 100000 
```

所以你可以使用这个代码：

```
int pass = 48;
if ((pass & (int)DelMask.defer) == (int)DelMask.defer)
   //Do something
else if ((pass & (int)DelMask.merit ) == (int)DelMask.merit)
   //Do something else 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T11:22:35.350

好吧，您需要将这些数字视为二进制。我将使用 d 后缀来显示十进制表示法，使用 b 后缀表示二进制表示法。

枚举值：

*   01d = 000001b
*   02d = 000010b
*   04d = 000100b
*   08d = 001000b
*   16d = 010000b
*   32d = 100000b

传递值：

48d = 110000b

现在`&`是按位与运算符。这意味着如果 c = a&b，当且仅当 a 和 b 中的第 n 位为 1 时，c 中的第 n 位将为 1。

所以：

*   16d & 48d = 010000b = 16d > 0
*   32d & 48d = 100000b = 32d > 0

如您所见，您的数字 48d 与 16d 和 32d “匹配”。这就是为什么这种枚举通常被描述为“标志”枚举的原因：您可以用一个整数获得多个“标志”的值。

至于您的代码，`if`将验证第一个运算符，这意味着您将输入它并“做某事”。你不会“做其他事情”。

通常在 C# 中，我们将[[Flags] 属性](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)用于标志枚举，它允许实际上不为枚举成员写入十进制值。像往常一样，MSDN 中的示例没用，所以我将参考这个[SO question](https://stackoverflow.com/questions/8447/enum-flags-attribute)以了解有关如何使用它的更多详细信息（请注意，要知道值 x 是否设置了标志 f，您可以执行`x & f == f`or `x | f == x`，但是用法似乎是一般使用后一种）。

# javascript - 不同域中两个应用程序的浏览器之间的通信

> ID：13175751
> 
> 赞同：1
> 
> 时间：2012-11-01T11:07:40.133
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, silverlight

我在 www.abc.com 上托管了一个 silverlight 应用程序

我在 www.xyz.com 上托管了一个 Web 应用程序

我想在 Silverlight 应用程序的按钮单击时调用 Web 应用程序页面并向其传递一些参数，现在 Silverlight 应用程序将显示繁忙指示器，直到 Web 应用程序页面的事务未完成。现在，如果用户在页面中成功完成了交易，或者如果他关闭了 Web 应用程序的页面，我希望将一些参数传递给 silverlight 应用程序，以便它可以知道停止忙碌指示器并进一步处理。我知道在 jquery 或 ajax 中会有一些东西在跨域中进行这种通信，但我没有得到它。

如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:12:25.237

您可以使用以下替代方法：

**用于 ajax 跨域的**YQL ：**[带有插件](http://james.padolsey.com/javascript/cross-domain-requests-with-jquery/)
**Access-Control-Allow-Origin 的**示例：[示例 1](http://enable-cors.org/#how-iis7) [示例 2](https://stackoverflow.com/questions/6290053/setting-access-control-allow-origin-in-asp-net-mvc-simplest-possible-method) [示例 3](https://stackoverflow.com/questions/10765725/adding-headers-in-asp-net-mvc-3)
**jsonp 在 asp.net mvc 中的实现**：[示例](http://www.integratedwebsystems.com/2010/07/cross-domain-jsonp-using-asp-net-mvc-and-jquery/)** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:12:11.693

使用 JSONP 进行跨域 ajax 通信。

使用 jQuery 的示例：

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)**

# c# - 在 MVC 4 中设置自定义模型 ID（主键）

> ID：13175756
> 
> 赞同：1
> 
> 时间：2012-11-01T11:08:11.867
> 
> 标签：c#, sql, entity-framework, asp.net-mvc-4

我想知道是否可以使用自定义 ID 整数作为主键？

因此，而不是默认 ID 1,2,3,4,5,... 我想使用固定 ID，例如 1422,1424,1426,...

我从提要中获取这些 ID，并将使用基于这些值的关系。在我当前的设置中，我有一个通用 ID（自动生成）和第二个 FeedId 列。我不能只替换为自动生成的 ID 以便它使用 FeedId 吗？

# android - Android：单个片段在同一张桌子上显示列表和按钮

> ID：13175757
> 
> 赞同：0
> 
> 时间：2012-11-01T11:08:12.027
> 
> 标签：android, fragment

我已经下载了一个示例应用程序，上面有两个片段。左侧片段显示项目，右侧片段显示基于选择的项目的联系。

我想要做的是在左侧片段上还有一个按钮，可用于更新显示的列表。因此，为什么我想要一个列表和一个按钮同时出现在同一个片段上。

这可以做到吗。我的示例代码是： -

布局xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <fragment android:name="com.example.android.fragments.HeadlinesFragment"
              android:id="@+id/headlines_fragment"
              android:layout_weight="1"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

    <fragment android:name="com.example.android.fragments.ArticleFragment"
              android:id="@+id/article_fragment"
              android:layout_weight="2"
              android:layout_width="0dp"
              android:layout_height="match_parent" />

</LinearLayout> 
```

主要活动代码是： -

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.news_articles);

    // Check whether the activity is using the layout version with
    // the fragment_container FrameLayout. If so, we must add the first
    // fragment
    if (findViewById(R.id.fragment_container) != null) {

        // However, if we're being restored from a previous state,
        // then we don't need to do anything and should return or else
        // we could end up with overlapping fragments.
        if (savedInstanceState != null) {
            return;
        }

        // Create an instance of ExampleFragment
        HeadlinesFragment firstFragment = new HeadlinesFragment();

        // In case this activity was started with special instructions from
        // an Intent,
        // pass the Intent's extras to the fragment as arguments
        firstFragment.setArguments(getIntent().getExtras());

        FragmentManager fragmentManager = getFragmentManager();

        FragmentTransaction transaction = getSupportFragmentManager()
                .beginTransaction();

        transaction.add(R.id.fragment_container, firstFragment);

        transaction.commit();

    }
} 
```

R.id.fragment_container 完成后是否还可以出现一个按钮。

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:42:08.060

有很多方法可以做到这一点。最简单的方法是让activity保持对fragment的引用，并在listfragment中创建一个方法，该方法可以通过activity中的方法被其他fragment调用。

另一种方法是通过广播。

第三种方法是使用 RoboGuice 并在两个片段中注入一个类，以建立片段之间的通信。

# java - 为什么这种使用反射的方法会抛出 npe？

> ID：13175761
> 
> 赞同：2
> 
> 时间：2012-11-01T11:08:25.657
> 
> 标签：java, reflection

我有一些`static final String`字段，我想使用反射来获取它们的值，所以我做了一个这样的方法：

```
public String getLogoSrc(final String provider) {
    if (provider.equals(StringUtils.EMPTY)) {
        return StringUtils.EMPTY;
    }

    logger.info("---provider is: "+provider);

    for (Field f : ConstantsBean.class.getDeclaredFields()) {
        f.setAccessible(true);
        if (f.getName().contains(provider.toUpperCase().replace(" ", "_"))) {
            try {
                return f.get(null) != null?  f.get(null).toString() : "";
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    return StringUtils.EMPTY;
} 
```

我根本不明白为什么我在尝试返回值时总是收到 NPE：

`return f.get(null) != null? f.get(null).toString() : "";`

例外是：

```
 java.lang.NullPointerException
        at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl
.java:36)
        at sun.reflect.UnsafeObjectFieldAccessorImpl.get(UnsafeObjectFieldAccess
orImpl.java:18)
        at java.lang.reflect.Field.get(Field.java:358)
        at com.gravitant.cloud.common.jsf.core.beans.ConstantsBean.getLogoSrc(Co
nstantsBean.java:195) 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:12:26.173

在访问之前打印该字段。我怀疑您正在尝试访问非静态字段，`field.get()`因此将 null 传递给是不可接受的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:12:46.483

看[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Field.html#get%28java.lang.Object%29)

`get(Object obj)`

> 如果指定的 obj 参数为 null，则该方法将引发 NullPointerException。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:13:03.997

您将 null 作为指定对象传递。即你这样做：

```
null.fieldname 
```

您需要传入对您想要的字段的对象的*引用。*该字段对象表示通用字段，而不是特定对象上的字段。

这同样适用于通过反射的方法。您必须传入要应用该方法的对象的*引用*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:14:31.610

当您调用 field.get(obj) 时

**参数：** obj - 要从中提取表示字段值的对象

**返回：** 对象 obj 中表示的字段的值；原始值在返回之前被包装在适当的对象中

**抛出：** `IllegalAccessException` - 如果基础字段不可访问。

`IllegalArgumentException`- 如果指定的对象不是声明底层字段（或其子类或实现者）的类或接口的实例。

`NullPointerException`- 如果指定的对象为空并且该字段是实例字段。

`ExceptionInInitializerError`- 如果此方法引发的初始化失败。

# windows-phone-7 - 带有异步 CTP 的 WP 7.1 应用程序不适用于 WP 8

> ID：13175763
> 
> 赞同：1
> 
> 时间：2012-11-01T11:08:41.917
> 
> 标签：windows-phone-7, async-ctp, windows-phone-8

我刚刚安装完 WP8 的 SDK 并想尝试我的应用程序现在与 WP 7.1 兼容，所以我打开了项目并编译，但只在使用“异步”和“等待”的部分给我错误。我使用了 Async CTP，但不太喜欢 WP8。我该如何解决，最重要的是，如何才能使应用程序在 WP 和 WP 8 7.1 上都运行？非常感谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T13:41:22.060

你需要安装这个： [https ://nuget.org/packages/Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)

关于定位包的博客：http: [//blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)

> 今天，我们很自豪地宣布对我们之前发布的 Async Targeting Pack 进行更新。以前的目标包允许您在面向 .NET Framework 4.0 和 Silverlight 5 时使用 await。我们更新的目标包允许您在面向以下任何平台（或更高版本）时在 Visual Studio 2012 中使用 await：
> 
> .NET Framework 4.0（带有 KB2468871） Silverlight 4 Windows Phone 7.5 和针对这些平台的可移植类库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:23:57.153

如果不升级项目，就无法在 Windows Phone 8 SDK 上构建 Windows Phone 7.1 应用程序。

如果您想使用 async/await 功能维护您的应用程序的 WP7.1 版本，您将必须拥有适用于 WP7.1 的 Visual Studio Express 2010 + Async CTP 3 以及适用于 Windows Phone 的 VS2012 Express。

更新：有一种方法可以使用这个漂亮的[NuGet 包](https://nuget.org/packages/Microsoft.Bcl.Async)在 Visual Studio 2012 Express for Windows Phone 上编译 WP7 应用程序。但是，请注意，它目前处于预发布版本。

# razor - @html.partial 模型未找到

> ID：13175765
> 
> 赞同：-1
> 
> 时间：2012-11-01T11:08:49.053
> 
> 标签：razor, model, asp.net-mvc-4, partial-views, renderpartial

**~/Views/PlanBuilder/PlanBuilder.cshtml**

```
@{
ViewBag.Title = "PlanBuilder";
Layout = "~/Views/Shared/_LayoutPlanBuilder.cshtml";
}

<div id="tabs-1">

<div id="wrap" class="left">
<ul>
@Html.Partial("~/Views/Hall/Index.cshtml");
</ul>
</div>

</div> 
```

* * *

**~/Views/Hall/Index.cshtml**

```
@model IEnumerable<ShaadiPlanner.Models.Hall>

@{
     ViewBag.Title = "Index";
     Layout = "~/Views/Shared/_LayoutPlanBuilder.cshtml";
    }

@foreach (var item in Model)  <!-- ERROR LINE -->
{
     <li id="@Html.DisplayFor(modelItem => item.ID)" class="options left">
          <div class="box-header">
               <h4 class="left"><span class="name">@Html.DisplayFor(modelItem => item.Name)</span> (@Html.DisplayFor(modelItem => item.Area))</h4>
               <h4 class="right">Rs. <span class="price">@Html.DisplayFor(modelItem => item.EstCost)</span></h4>
          </div>
     </li>
} 
```

* * *

你调用的对象是空的。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

注意：当我像这样在@Html.Partial 代码中定义模型时，@Html.Partial("~/Views/Hall/Index.cshtml", model); 它给出以下错误。

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0103：当前上下文中不存在名称“模型”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:13:34.110

尝试大写模型，即

```
@Html.Partial("~/Views/Hall/Index.cshtml", Model); 
```

正如@webdeveloper 评论的那样，您的视图中没有声明模型！

# linux - 在linux上反编译一个win32-virus-executable

> ID：13175772
> 
> 赞同：0
> 
> 时间：2012-11-01T11:09:06.543
> 
> 标签：linux, exe, decompiling, virus

如何使用 ubuntu linux 32 位反编译 win32 x68 可执行文件？

我使用 IDA Pro 在 Windows 上工作，但由于这是一种 Windows 病毒，我无法在我的 Windows 机器上执行此操作。

编辑：请为我命名一个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:44:17.007

IDA[在 Linux 上可用](http://www.hex-rays.com/products/ida/index.shtml)，并且可以很好地反汇编 Windows 文件。

# vb.net - 将字符串转换为 int16

> ID：13175773
> 
> 赞同：5
> 
> 时间：2012-11-01T11:09:06.997
> 
> 标签：vb.net, type-conversion

我遇到了一个“荒谬”的问题。
我试图将字符串转换为 int16（我被迫在 int16 中而不是在 int32/integer 中执行此操作）。
我的第一个想法是尝试：

```
convertedVal = Convert.ToInt16(newVal) 
```

这引发了异常：*对于 UInt16，值太大或太小。*
但我的字符串是“10”，所以它在 minValue 和 maxValue 之间。
我使用以下方法解决了我的问题：

```
convertedVal = Int16.Parse(newVal) 'TryParse works also 
```

虽然我解决了我的问题，但我不明白我做错了什么。
有人可以向我解释为什么会这样吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:12:15.573

如果字符串上有额外的空间，通常会发生这种情况，所以`Trim`更好

```
convertedVal = Convert.ToInt16(newVal.Trim()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:23:18.300

根据[MSDN 页面，这两种方法应该是相同的](http://msdn.microsoft.com/en-us/library/basyfs27.aspx)

> 使用该`ToInt16(String)`方法相当于将值传递给该`Int16.Parse(String)`方法。value 是通过使用当前线程区域性的格式约定来解释的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:26:09.877

你从哪里得到这个字符串？
如果它来自用户输入，我不太相信他/她输入了正确的 int16 值来使用 Convert 或 Parse 方法。

使用 TryParse 会产生更健壮的代码。

```
Dim result as Short
Dim newVal as String = "10 sadaas"
if Int16.TryParse(newVal, result) = False then
    result = 0
end if 
```

# android - 如何创建确切数量的文本视图并将字符串值放入文本视图？

> ID：13175778
> 
> 赞同：-2
> 
> 时间：2012-11-01T11:09:32.410
> 
> 标签：android, android-tablelayout

```
String hallo = "blabla " + "jojo " + "\n" + "doj " + "drasl " +"\n";
InputStream is = new ByteArrayInputStream(hallo.getBytes());
BufferedReader in = new BufferedReader(new InputStreamReader(is));

String reader;
    while ((reader = in.readLine()) != null) {
    String[] RowData = reader.split(" ");
    String eitt = RowData[0];
    String tvo = RowData[1]; 
```

我有一个与字符串格式相同的`hallo`字符串，只是我不知道有多少行。我正在尝试将信息放在表格布局中（或者最方便的方式）。

如何`textview`根据需要在表格布局中自动创建确切数量的窗口，并自动输入我的字符串值？

顺便说一句，如果重要的话，`textview`它在布局内。`scrollview`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:37:19.737

使用以下代码

```
String hallo = "blabla " + "jojo " + "\n" + "doj " + "drasl " + "\n";
InputStream is = new ByteArrayInputStream(hallo.getBytes());
BufferedReader in = new BufferedReader(new InputStreamReader(is));
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linearLayout);

String line;
try {
    while ((line = in.readLine()) != null) {
        String[] RowData = line.split(" ");
        String eitt = RowData[0];
        String tvo = RowData[1];

        TextView textView = new TextView(this);
        textView.setText(line);

        linearLayout.addView(textView);
    }
} catch (IOException e1) {
    e1.printStackTrace();
} 
```

使用这个 xml 布局

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView> 
```

# java - 创建简单 DataGrid 的问题

> ID：13175781
> 
> 赞同：0
> 
> 时间：2012-11-01T11:09:43.473
> 
> 标签：java, gwt

我只是想让自己熟悉 GWT DataGrid，我还阅读了**javadoc**中给出的示例。奇怪的是**在 DataGrid 示例中他们正在使用 CellTable** 这只是一个错字还是故意的？

此外，我从 javadoc 复制了以下代码，在 CellTable 的情况下可以正常工作，但是一旦我用 DataGrid 替换 CellTable，它就会停止工作。

任何建议都受到高度赞赏。

```
public class DataGridPOC implements EntryPoint {

  DataGrid<Contact> table = new DataGrid<Contact>();

  /**
   * A simple data type that represents a contact.
   */
  private static class Contact {
    private final String address;
    private final Date birthday;
    private final String name;

    public Contact(String name, Date birthday, String address) {
      this.name = name;
      this.birthday = birthday;
      this.address = address;
    }
  }

  /**
   * The list of data to display.
   */
  private static final List<Contact> CONTACTS = Arrays.asList(
      new Contact("John", new Date(80, 4, 12), "123 Fourth Avenue"),
      new Contact("Joe", new Date(85, 2, 22), "22 Lance Ln"),
      new Contact("George", new Date(46, 6, 6), "1600 Pennsylvania Avenue"));

  public void onModuleLoad() {

 // Add a text column to show the name.
    TextColumn<Contact> nameColumn = new TextColumn<Contact>() {
      @Override
      public String getValue(Contact object) {
        return object.name;
      }
    };
    table.addColumn(nameColumn, "Name");

    table.addColumn(nameColumn, "Birthday");

    table.addColumn(nameColumn, "Address");

    // Set the total row count. This isn't strictly necessary, but it affects
    // paging calculations, so its good habit to keep the row count up to date.
    table.setRowCount(CONTACTS.size(), true);

    // Push the data into the widget.
    table.setRowData(0, CONTACTS);

    // Add it to the root panel.
    RootPanel.get().add(table);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:36:55.623

我认为，这种行为的原因是我们需要明确指定网格的高度。

```
 table.setHeight("300px"); 
```

这显示了我的桌子。[javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/DataGrid.html)中的任何地方都没有提到它。此外，该示例使用了 DataGrid 的 CellTable。:)

请随时进行更正，它可能会对某人有所帮助。

谢谢

# c# - 将数据从 Excel 工作表传输到 SQL Server 数据库

> ID：13175784
> 
> 赞同：1
> 
> 时间：2012-11-01T11:09:55.763
> 
> 标签：c#, asp.net, .net, sql-server

我有一个包含一些数据的 Excel 表。我想将该数据从该 aspx 页面存储到 SQL Server 数据库中。

我正在尝试存储数据，但出现如下错误：

> *Microsoft Office Access 数据库引擎无法打开或写入文件。它已被其他用户独占打开，或者您需要权限才能查看和写入其数据。*

这是我的代码：

```
string excelConnectionString = @"provider=Microsoft.ACE.OLEDB.12.0;data source=" + path + ";extended properties='Excel 12.0;HDR=YES;'";

//Create Connection to Excel work book
OleDbConnection excelConnection =new OleDbConnection(excelConnectionString);
//Create OleDbCommand to fetch data from Excel
OleDbCommand cmd = new OleDbCommand("Select [ID],[Name],[Designation] from [Sheet1$]",excelConnection);
excelConnection.Open();
OleDbDataReader dReader;
dReader = cmd.ExecuteReader();
SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
//Give your Destination table name
sqlBulk.DestinationTableName = "Excel_table";
sqlBulk.WriteToServer(dReader);
excelConnection.Close(); 
```

并提前感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:15:12.757

您需要关闭 Access 数据库数据库文件，然后您的代码才能访问数据/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:24:29.777

您好，请检查以下事项：

1.您正在使用的Access文件不应打开。

2.它不应该是只读的。

3.您应该对放置要访问的文件的文件夹具有读/写权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:27:23.830

相应的用户帐户（默认为网络服务）需要对 Excel 文件所在的文件夹具有修改权限。将权限添加到 Excel 文件所在的文件夹。

# java - Java Spring 友好的 URL 映射问题

> ID：13175786
> 
> 赞同：0
> 
> 时间：2012-11-01T11:10:20.177
> 
> 标签：java, spring, mapping, friendly-url

我一直在尝试在我的第一个 Java spring 站点中实现友好的 url 映射。我一直在关注这个教程。[http://outbottle.com/spring-3-web-mvc-friendly-url-using-requestmapping-variable-uri/](http://outbottle.com/spring-3-web-mvc-friendly-url-using-requestmapping-variable-uri/)

我当前的映射在以 id 作为参数的情况下效果很好。本地主机：8080/user?id=1312321321

```
/*
 * User
*/
@RequestMapping(method=RequestMethod.GET, value={"/user","/user/{id}"})
public ModelAndView profileDisplay(
        HttpServletRequest request,
        HttpServletResponse response,
        @RequestParam(value="id", required=false) String id
) throws UnknownHostException, MongoException {
    ServiceSerlvet.appendSesssion(request);
    //get search ALL users
    BasicDBObject searchQuery = new BasicDBObject();
        searchQuery.put("_id", new ObjectId(id));
    List<DBObject> searchResponse = PersonController.searchUsers(searchQuery);

    //System.out.println("response from search user method: "+searchResponse);

    return new ModelAndView("user", "people", searchResponse);
} 
```

我的 web xml 目前看起来像这样......它可以工作，但是这样写出各种 url 映射是否正确？我认为 * 是允许说 /user/22222 的通配符？

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>Spring3MVC</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
              </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.html</url-pattern>

    <url-pattern>/gallery/*</url-pattern>
    <url-pattern>/galleryupload/*</url-pattern>

    <url-pattern>/delete/*</url-pattern>
    <url-pattern>/edit/*</url-pattern>

    <url-pattern>/search/*</url-pattern>
    <url-pattern>/members/*</url-pattern>
    <url-pattern>/profile/*</url-pattern>
    <url-pattern>/messages/*</url-pattern>

    <url-pattern>/index/*</url-pattern>
    <url-pattern>/login/*</url-pattern>
    <url-pattern>/logout/*</url-pattern>
    <url-pattern>/register/*</url-pattern>
    <url-pattern>/user/*</url-pattern>
    <url-pattern>/jsoninterests/*</url-pattern>
    <url-pattern>/jsonlocations/*</url-pattern>
    <url-pattern>/jsonmembers/*</url-pattern>
    <url-pattern>/jsonuniqueuser/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

当我尝试调整我的代码以仅使用这样的名称时 localhost:8080/user/john

它坏了 - 但我不确定如何在 web.xml 中设置映射，我是否在 web.xml 中设置这样的映射？

```
@RequestMapping(value="/user/{id}", method= RequestMethod.GET)
        public ModelAndView profileDisplay(
                @PathVariable(value="id") String id,
                HttpServletRequest request,
                HttpServletResponse response
        ) throws UnknownHostException, MongoException {

    ServiceSerlvet.appendSesssion(request);
            //get search ALL users
            BasicDBObject searchQuery = new BasicDBObject();
                searchQuery.put("_id", new ObjectId(id));
            List<DBObject> searchResponse = PersonController.searchUsers(searchQuery);

            //System.out.println("response from search user method: "+searchResponse);

            return new ModelAndView("user", "people", searchResponse);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:16:31.943

通常我将每个请求映射到 web.xml 中的调度程序 servlet。

```
 <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
                  org.springframework.web.servlet.DispatcherServlet
              </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping> 
```

然后在您的控制器中使用 @RequestMapping 注释来定义更精细的映射：

```
 @RequestMapping("/user/{id}")
    public ModelAndView profileDisplay(
            HttpServletRequest request,
            HttpServletResponse response,
            @RequestParam(value="id", required=false) String id
    ) throws UnknownHostException, MongoException {
        ...
    } 
```

# jquery - 删除最近的空同级

> ID：13175796
> 
> 赞同：4
> 
> 时间：2012-11-01T11:10:46.453
> 
> 标签：jquery, string, siblings, closest

假设我有以下标记：

```
<p></p>
<p>not empty</p>
<p>not empty</p>
<p></p>
<div class="wrapper">
    // more content inside
</div>
<p>  </p> <-- whitespace, also removed
<p></p>
<p>not empty</p> 
```

如何删除`<p>`最接近的空标签`.wrapper`？我想要这样的结果：

```
<p></p>
<p>not empty</p>
<p>not empty</p>
<div class="wrapper">
    // more content inside
</div>
<p>not empty</p> 
```

所以我不想删除所有空的兄弟姐妹，只是旁边的空兄弟姐妹，`.wrapper`即使有多个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T11:14:03.253

您可以将`.prevUntil`/`.nextUntil`与`:not(:empty)`选择器结合使用：http: [//jsfiddle.net/vEtv8/5/](http://jsfiddle.net/vEtv8/5/)。

```
$("div.wrapper")
    .​​​​​​​​​​nextUntil(":not(p), :not(:empty)").remove().end()
    .prevUntil(":not(p), :not(:empty)").remove(); 
```

`:empty`但是，不会将空白元素视为空的。您可以为此使用一个函数：http: [//jsfiddle.net/vEtv8/4/](http://jsfiddle.net/vEtv8/4/)。

```
var stopPredicate = function() {
    var $this = $(this);
    return !$this.is("p") || $.trim($this.text()) !== "";
};

$("div.wrapper")
    .nextUntil(stopPredicate).remove().end()
    .prevUntil(stopPredicate).remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:23:37.130

```
$('.wrapper').prevAll('p:empty').nextAll('p:empty').remove(); 
```

# iphone - CocosDenshion - CDAudioManager 的加载方法失败

> ID：13175799
> 
> 赞同：1
> 
> 时间：2012-11-01T11:11:10.540
> 
> 标签：iphone, ios, cocos2d-iphone, avaudioplayer

我正在尝试为我正在使用 Cocos2d 2.0 开发的游戏场景播放背景音乐

但执行停止在

在 CDAudioManager.m 中：

```
-(void) load:(NSString*) filePath {
    ........
    .........
    [[audioSourcePlayer prepareToPlay]; //This is where the execution stops!! 
```

它没有提供有关异常的详细信息！，它只是打破了！

这就是我演奏音乐的方式：

```
NSString *soundFile = [[NSBundle mainBundle] pathForResource:@"background_music" ofType:@"mp3"];
NSLog(@"soundFile: %@", soundFile); //The path is correct
SimpleAudioEngine *sae = [SimpleAudioEngine sharedEngine];
if (sae != nil) {
    [sae preloadBackgroundMusic:soundFile];
    if (sae.willPlayBackgroundMusic) {
        sae.backgroundMusicVolume = 0.5f;
    }
} 
```

我正在使用 Cocos2d 2.0、Xcode 4.5.1、iOS SDK 6.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:54:25.307

检查文件是否通过存在测试：

```
NSLog(@"soundFile: %@, exists: %u", 
      soundFile, [[NSFileManager defaultManager] fileExistsAtPath:soundFile]); 
```

如果文件存在，exists 将为 1。

如果确实存在，请进入 preloadBackgroundMusic 并查看是否有任何返回 nil 的内容。我可以想象 mp3 使用 CD 不支持的格式。如果是这样，请使用 Audacity 或类似的音频工具打开并重新保存 mp3 文件。

您还应该[在 Xcode 中添加添加全局异常断点](https://stackoverflow.com/questions/4961770/run-stop-on-objective-c-exception-in-xcode-4)。这样，Xcode 不仅会在发生异常时停止，还会跳到有问题的行。

# android - 亚马逊 GameCircle 集成

> ID：13175800
> 
> 赞同：2
> 
> 时间：2012-11-01T11:11:13.257
> 
> 标签：android, amazon, kindle-fire

我正在尝试集成 Amazon GameCircle，并且我已经能够在我的应用程序中成功初始化 GameCircle，但问题是当我单击显示成就的按钮时，出现 GameCircle 成就列表但它显示“您已解锁 0 个0 项成就”。排行榜也是如此，即这个应用程序没有排行榜。我在亚马逊的在线开发者门户上创建了一个排行榜和一些成就，但由于某种原因它们没有显示。有人可以帮我弄这个吗。任何有助于集成 GameCircle 的链接/资源将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:37:27.353

我有同样的问题。要解决它，请按照以下步骤操作：

1.  转到您的亚马逊开发者门户 (https://developer.amazon.com)
2.  转到“我的应用程序”
3.  将鼠标悬停在相关应用右侧的设置图标上，然后转到 GameCircle 设置（也称为游戏服务）
4.  点击“沙盒”
5.  输入您用于测试应用程序的 Amazon GameCircle 配置文件的名称

应该是这样！只需片刻即可更新，因此下次打开应用时，您应该会同时看到排行榜和成就。

# excel - 在 Microsoft Excel 2007 中查找和排序相同的月份名称

> ID：13175801
> 
> 赞同：2
> 
> 时间：2012-11-01T11:11:14.330
> 
> 标签：excel, excel-formula

![在此处输入图像描述](../Images/e4dd164035a22af4272dd9da0417c328.png)

我正在使用 Microsoft excel 2010。我有不同的日期，例如 E1:E19 列，它们不在特定的时间间隔内。我想要帮助查找仅开始月份的日期并将它们粘贴到 G 列中，如图所示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:12:44.997

首先，就是说 - K_B 和*Ibrahim Odeh*都有有效且良好的尝试。我只想添加另一个选项，因为这些选项使用额外的行或手动工具。

这是我想出的解决此问题的公式，如您的屏幕截图所示 - 只有一列，只有带有开始日期的行：

```
G1=SUBTOTAL(5,E$1:E$19)

G2=SUBTOTAL(5,OFFSET(E$1:E$19,MATCH(EOMONTH(G1,0),E$1:E$19,1),0,ROWS(E$1:E$19)-MATCH(EOMONTH(G1,0),E$1:E$19,1))) 
```

可以将它用于整个列，如下所示：

```
G1=SUBTOTAL(5,E:E)

G2=SUBTOTAL(5,OFFSET(E:E,MATCH(EOMONTH(G1,0),E:E,1),0,ROWS(E:E)-MATCH(EOMONTH(G1,0),E:E,1))) 
```

现在，一些解释：

*首先，您需要G1*中的起点- 因此我们使用（即 5）`SUBTOTAL`获取 E 列中的最早日期。`MIN`

现在我们从这里开始工作，通过偏移我们用来计算的范围`SUBTOTAL`，仍然使用`MIN`(5)，得到每个月的开始。

诀窍是`OFFSET`。第一个参数是超出基本范围，我们将偏移，然后我们必须确定要偏移多少行，为了不出错，我们使用`ROWS(basicRange)`-rowOffset 始终保持在超出范围内。

`MATCH`用于确定必要的偏移量，方法是 使用. 从*G1*`EOMONTH`中查找该月最后列出的日期所在的行。

希望这可以解决任何问题。

*编辑：*

因为我必须翻译这个，这里是原文：

```
=TEILERGEBNIS(5;E:E)

=TEILERGEBNIS(5;BEREICH.VERSCHIEBEN(E:E;VERGLEICH(MONATSENDE(G1;0);E:E;1);0;ZEILEN(E:E)-VERGLEICH(MONATSENDE(G1;0);E:E;1))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:52:53.340

只要您的日期列按照示例中的样子进行排序，然后执行以下操作：

在第 1 行上方插入一行（用于使用公式）在表格所有行的 A 列中输入公式。公式如下：

`=If(NOT(YEAR($E2)&MONTH($E2)=YEAR($E1)&MONTH($E1), MAX($F$1:$F1)+1, "")`

这会将增加的数字从 1 添加到仅在该月表中的第一个日期旁边所涉及的月数。

然后在 G 列的表格中输入：

`=VLOOKUP(ROW(), A:E, 5)`

您可以根据需要将此公式向下拖动。该公式在 A:E 中找到与 G 中的行号匹配的第一条记录（`ROW()`在 G1 中返回 1），然后`VLOOKUP()`将返回 A:E 中第 5 列中的值（即 E 列与日期）。

A 列中的公式应位于日期的左侧，以使`VLOOKUP()`公式生效。

或者，您可以将其放在右侧的列中，然后使用另一个公式代替`VLOOKUP()`G 列：

`=SUMIF(F:F,ROW(),E:E)`

这会将 E 中的所有值相加，其中 F 中的值与 G 中单元格的行号匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:54:04.500

我认为您需要使用 analysis-toolpak 插件来执行此任务：

如果您需要知道如何加载它，请查看以下 URL：

[http://office.microsoft.com/en-us/excel-help/load-the-analysis-toolpak-HP001127724.aspx](http://office.microsoft.com/en-us/excel-help/load-the-analysis-toolpak-HP001127724.aspx)

问候

# php - SOAP 错误；尽管给定了参数，但缺少参数

> ID：13175803
> 
> 赞同：0
> 
> 时间：2012-11-01T11:11:17.963
> 
> 标签：php, soap

以下肥皂请求

```
$response = $this->client->__soapCall('Match', array('word' => 'test', 'strategy' => 'exact')); 
```

产生错误

```
Uncaught SoapFault exception: [soap:Client] Parameter not specified (null)
Parameter name: word 
```

怎么会这样？我在请求中指定了`word`参数，不是吗？为什么服务器无法识别它？

我要使用的服务是[在线词典 webservive](http://services.aonaware.com/DictService/DictService.asmx?WSDL)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:22:58.477

通常，您需要将参数包装在双数组中：

```
$response = $this->client->__soapCall('Match', array(array('word' => 'test', 'strategy' => 'exact'))); 
```

如果你读起来会更好

```
$aParams  = array('word' => 'test', 'strategy' => 'exact');
$response = $this->client->__soapCall('Match', array($aParams)); 
```

或者你可以直接调用 Match 函数

```
$aParams  = array('word' => 'test', 'strategy' => 'exact');
$response = $this->client->Match($aParams); 
```

或者，作为最后的手段，使用 HTTP GET 选项：[http ://services.aonaware.com/DictService/DictService.asmx?op=Match](http://services.aonaware.com/DictService/DictService.asmx?op=Match)

应该让你再次上路。

# jquery - 是否有我可以与 jquery 一起使用的会话类型变量？

> ID：13175806
> 
> 赞同：0
> 
> 时间：2012-11-01T11:11:34.620
> 
> 标签：jquery

我正在写一个通用列表，其中每个项目都包含两个值，我正在将变量 name 和 valCount 写入列表。

我必须在我的页面加载中发布，我认为这就是我只返回值 0 的原因。

我遇到问题的值是帖子中的 valCount，`$.post("Dashboard/UserValuationGet"`val 计数在该方法之前声明并设置为 0。

即使我在 post 方法中将代码设置为 valCount = 5，该值仍然丢失，我该如何保留该值？有没有办法在 jQuery 中使用会话？

```
$(document).ready(function () 
    {
        $.post("Dashboard/UsersGet", {}, function (dataSet) 
        {
            var obj = jQuery.parseJSON(dataSet);
            var table = obj.Table;
            var countUsers = 0;
            lis = '';
            for (var i = 0, len = table.length; i < len; i++) 
            {
                var array = table[i];
                if (array.Active == 1) 
                {
                    var name = array.Name;
                    valCount = 0;
                    $.post("Dashboard/UserValuationGet", {}, function (dataSet1) 
                    {
                        var obj1 = jQuery.parseJSON(dataSet1);
                        var table1 = obj1.Table;
                        for (var i = 0, len = table1.length; i < len; i++) 
                        {
                            valCount += 1;
                        }
                    });
                    lis += '<li class="subitem1"><a href="#">' + name + '<span>' + valCount + '</span></a></li>';                    
                    countUsers = countUsers + 1;
                }
            }
            $("#UserList").empty().html(lis);
            $('#userCount').html(countUsers.toString());

        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:47:04.173

Archer 成功了。

如果您坚持使用服务器存储，则可以进行服务器往返调用并在会话中保存变量并在需要时检索。使用 $.ajax() 设置或获取数据

# spotify - Spotify API - Player EVENT.CHANGE 触发两次

> ID：13175807
> 
> 赞同：0
> 
> 时间：2012-11-01T11:11:39.263
> 
> 标签：spotify

它总是以不同的值触发两次......

这是我的代码：

```
window.onload = function init() {
  console.log('subscribing')
  player.observe(models.EVENT.CHANGE, function (e) {
    console.log('e.data.curtrack %d', e.data.curtrack)
    console.log('e.data.playstate %d', e.data.playstate)
    console.log('---')
    console.log(player.playing)
  })
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:42:14.290

刚刚从 irc 的开发团队直接确认它是一个**Spotify 客户端错误。**这是一个**修复**+其他糖果之类的**通用事件界面**。

**https://gist.github.com/bc1a7e1c06c1077f238d**（*发射器来自组件仓库[https://github.com/component/emitter](https://github.com/component/emitter)*）

使用我的补丁，我们可以做这样的事情：

```
var sp = getSpotifyApi(1)
var models = sp.require('sp://import/scripts/api/models')
var player = sp.require('player-fix').player

window.onload = function init() {
  console.log('subscribing')

  player.on('play', function () {
    console.log('play')
  }).on('pause', function () {
    console.log('pause')
  }).on('trackChange', function (track) {
    console.log('trackChange', track.data.name)
  }).on('shuffleChange', function (shuffle) {
    console.log('shuffleChange', shuffle)
  }).on('repeatChange', function (repeat) {
    console.log('repeatChange', repeat)
  }).on('volumeChange', function (volume) {
    console.log('volumeChange', volume)
  }).on('contextChange', function () {
    console.log('contextChange')
  })
} 
```

# iphone - 如何将 NSArray 发送到 Web 服务

> ID：13175811
> 
> 赞同：0
> 
> 时间：2012-11-01T11:11:48.810
> 
> 标签：iphone, objective-c, ios, asmx, nsurl

我没有成功将 NSArray 发送到 Web 服务。
不调用服务方法。但其他服务方法调用有效。
Web服务方法是：

```
[WebMethod]
        public int Method(IList items){... 
```

我的数组充满了对象项目：

```
@interface Item : NSObject
{
    double prop1;
    double prop2;
    double prop3;
}
@property double prop1;
@property double prop2;
@property double prop3; 
```

从目标 c 我尝试发送这样的数据：

```
NSString *soapMsg =
    [NSString stringWithFormat:
     @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
     "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
     "<soap:Body>"
     "<Method xmlns=\"http://www.mysite.com/\">"
     "<items>"
     "%@"
     "</items>"
     "</Method>"
     "</soap:Body>"
     "</soap:Envelope>", myArray
     ];

    NSURL *url = [NSURL URLWithString: @"http://...."];

    NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMsg length]];

    [req addValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [req addValue:@"http://www.mysite.com/Method" forHTTPHeaderField:@"SOAPAction"];
    [req addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [req setHTTPMethod:@"POST"];
    [req setHTTPBody: [soapMsg dataUsingEncoding:NSUTF8StringEncoding]];

    conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];

    if (conn)
    {
        webData = [NSMutableData data];
    } 
```

**更新**

当我像这样制作数组时：

```
NSArray  * myArrDate = [NSArray arrayWithObjects:@"foo",@"bar",@"baz",nil]; 
```

和做：

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:myArrDate
                                                       options:0
                                                         error:nil]; 
```

有用。但是我有一个包含`User`具有属性的对象的数组：`UserId, FirstName, LastName, Email, Username, DisplayName, Country, City`等。当我尝试上面的代码时，该行的**用户**应用程序崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-20T10:02:35.823

您可以发送`NSArray`至`webservice`

```
NSData *jsonData2 = [NSJSONSerialization dataWithJSONObject:yourArray options:NSJSONWritingPrettyPrinted error:nil];
         NSString *jsonString = [[NSString alloc] initWithData:jsonData2 encoding:NSUTF8StringEncoding];
         NSLog(@"FemaleFriendList:\n%@", jsonString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:59:00.830

您不能将 NSArray 发送到 Web 服务，但如果您想这样做，请先将该 NSArray 转换为 NSString，如下所示

```
NSString *stringDelete = [YourNSArray componentsJoinedByString:@","]; 
```

然后将该 NSString 传递给 webservice。让我知道它是否工作！！！！！！快乐编码...！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-21T04:27:15.530

一种选择是`NSJSONSerialization`将数组转换为字符串，反之亦然，这可从 iOS 5 获得

```
NSArray *myArrDate = any Data ....
NSError *error;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:myArrDate
                                                   options:0
                                                     error:nil];
if (!jsonData) {
   NSLog(@"error");
 } else {
  NSString *JSONString = [[NSString alloc] initWithBytes:[jsonData bytes] length:[jsonData length] encoding:NSUTF8StringEncoding];
  NSLog(@"%@",JSONString);
} 
```

有关更多信息，请参阅[convert-nsdictionary-or-nsarray-to-json-nsstring-and-vice-versa](http://www.codetuition.com/ios-tutorials/convert-nsdictionary-or-nsarray-to-json-nsstring-and-vice-versa/)链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:37:44.620

您正在发送一个 NSString (%@ , myArray) 作为参数，并且 web 服务需要一个 IList 对象。为什么在发送之前不序列化 NSArray？例如，您可以使用 JSON。

# yii - 通过输入验证保持 CMultiFileUpload 选择

> ID：13175814
> 
> 赞同：1
> 
> 时间：2012-11-01T11:12:15.803
> 
> 标签：yii

我在我的一种形式中使用 CMultiFileUpload 控件，如下所示：

```
$this->widget('CMultiFileUpload', array(
  'name' => 'neueAnhaenge',
)); 
```

当某个其他表单元素的输入验证失败并且再次呈现输入表单时，此控件中的先前选择将消失（如预期的那样）。

我如何重新填充这个控件，我必须在我的控制器中做什么，有没有办法预先填充这个？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:53:23.550

对于文件字段，在将其发送到服务器后重置分配给它的值是相当不可能的。

解决此问题的一种方法是获取上传的文件，将它们临时存储在服务器上并修改表单，以便发送对服务器上文件的引用。

更好的方法是使用表单字段的 Ajax 或客户端验证，以确保在发送表单时不会发生验证错误。`CActiveForm`您可以为:`$enableClientValidation`和启用这些选项`$enableAjaxValidation`。

# objective-c - 使用 iOS 6 Auto Layout 相对于 superview 的大小定位视图

> ID：13175815
> 
> 赞同：4
> 
> 时间：2012-11-01T11:12:23.773
> 
> 标签：objective-c, xcode, interface-builder, autolayout

我希望相对于超级视图的大小而不是绝对定位对象。

例如，我不想说一个元素是“距离顶部 50px”，我想说它是“向下的 1/3”。

有没有办法使用自动布局来做到这一点？如果没有，最好的方法是什么？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T18:13:44.407

在 superivew 的高度约束中添加一个 Outlet，在顶部空间中添加一个 outlet 约束。在代码中，将 topspace 约束的常量设置为等于 0.33 * superview 的高度约束的值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T08:14:41.867

如果您使用 IB，只需将元素放置在您想要的位置，并将其设置为将其 Top Space 保持为 Superview。对于 4 英寸和 3.5 英寸设备，这将使元件与顶部保持该距离。

# c# - 带有 InlineUIContainer 的 RichTextBlock 流

> ID：13175824
> 
> 赞同：3
> 
> 时间：2012-11-01T11:12:42.740
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我`RichTextBlock`在默认的 VS2012 模板中`RichTextColumns`有一个。`ItemDetailPage`My`RichTextBlock`由排列整齐并分成列的文本段落组成。

我想在所有文本段落之后插入一个`Image`到`RichTextBlock`结尾。如果我使用此代码插入图像

```
<Paragraph LineStackingStrategy="MaxHeight">
    <InlineUIContainer>
       <Image Height=".." Width=".." />
  </InlineUIContainer>
</Paragraph> 
```

问题是，如果最后一列没有足够的位置，图像不会完整显示，它会在底部被剪切。如何`RichTextBlock`生成另一列并将图像移到那里以完整显示？

我尝试更改`LineStackingStrategy`段落的内容，但没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T00:16:04.603

我在 gridview 模板中建模了我额外的 InlineUIContainers。但是，我必须添加与我的控件高度匹配的 LineHeight 属性。这出于某种原因。

```
<Paragraph x:Name="rectPara" LineStackingStrategy="MaxHeight" LineHeight="400">
    <InlineUIContainer x:Name="rectUICont" >
          <Canvas x:Name="d3dCanvas" MaxHeight="400" Margin="0,20,0,10" RenderTransformOrigin="0.5,0.5" UseLayoutRounding="True" d:LayoutRounding="Auto">
                <Rectangle x:Name="d3dRectangle" Fill="{Binding RectangleFill}"  Stroke="Red" Height="400" Width="400"  />
          </Canvas>
     </InlineUIContainer>
</Paragraph> 
```

# javascript - 如何从对象中删除条目

> ID：13175825
> 
> 赞同：1
> 
> 时间：2012-11-01T11:12:44.297
> 
> 标签：javascript

如何从下面删除条目，例如 [2]？

```
var object = {};
object[0] = true;
object[1] = true;
object[2] = true; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:17:25.703

这将起作用：

```
delete object["2"] 
```

我建议您不要使用“对象”作为变量名。~~“对象”是保留字。~~

另外，请参阅这个问题：[how-to-remove-a-property-from-a-javascript-object](https://stackoverflow.com/questions/208105/how-to-remove-a-property-from-a-javascript-object)

**编辑：**

实际上“对象”不在[保留字列表中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)。但是“Object”（大写“O”）[在 JavaScript 中确实有意义](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)。所以我无论如何都不鼓励使用这个名字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:17:47.613

要删除对象属性，请使用`delete`，如下所示：

```
delete object[2]; 
```

# java - 在项目eclipse中创建一个新文件作为IResource

> ID：13175829
> 
> 赞同：0
> 
> 时间：2012-11-01T11:12:59.840
> 
> 标签：java, eclipse, resources, rcp

这可能很简单，但是您如何以编程方式在 Eclipse RCP 应用程序中的自定义项目下创建文件？

我尝试了各种方法，但该文件不被识别为 Eclipse 资源，例如，如果我只是通过新的文件输出流创建一个文件。

有没有一种简单的方法可以在项目中将文件创建为 IResource？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:40:14.627

例子：

```
IFile file = project.getFile(new Path("path/of/your/file"));    
IFolder folder = project.getFolder(new Path("path/of/your/folder")); 
```

之后，您可以创建它们：

```
file.create(InputStream stream, boolean force, IProgressMonitor monitor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T12:01:46.427

我猜您使用的是通用导航器框架，并且由 outputstream 创建的文件在导航器中不可见，是吗？如果是这样，我想原因是你没有使用相应的平台方式，所以你可以使用 Timo 提供的方式。如果您自己实现了导航器，那么我想您也需要自己重建和刷新导航器。我正在自己实现一个导航器，这样我就可以在 myway 中通过输出流创建文件。持有它有帮助。:)

# java - 计算原始运算符

> ID：13175832
> 
> 赞同：2
> 
> 时间：2012-11-01T11:13:03.893
> 
> 标签：java, operators, primitive

我有以下伪代码：

```
Algorithm 4.1\. PrefixAverages1(X)
Input: X, a 1-D numerical array of size n
1) Let A = an empty 1-D numerical array of size n
2) For i = 0 to n-1 
3)    Let s = X[0]  
4)    For j = 1 to I 
5)       Let s = s + X[j] 
6)    End For
7)   Let A[i] = s /(i+1) 
8) End For
Output: An n-element array A of numbers such that A[i]
    is the average of elements X[0],X[1], … ,X[i] 
```

这是我计算原始运算符的尝试：

```
1) -
2) n-1
3) 2
4) n
5) 4
6) -
7) 5
8) - 
```

这是我的 T(n)：4n^2+5n-9

如果我的任何步骤有误，有人可以告诉我吗？谢谢您的帮助！

编辑：我认为第 2 行可能是 n 而不是 n-1 ......谁能证实这一点？

# github - 在 GitHub 上创建一个分支（无命令行）

> ID：13175835
> 
> 赞同：1
> 
> 时间：2012-11-01T11:13:17.483
> 
> 标签：github

是否可以使用基于 GitHub Web 的工具（即不是命令行）创建存储库的分支。

我是存储库的管理员，但找不到执行此操作的任何选项。

查看 GitHub 页面，它仅提供了如何使用命令行执行此操作的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T07:23:38.150

您可以通过 GitHub 客户端创建分支。

下载并安装

Windows 的 GitHub 客户端：http: [//windows.github.com/](http://windows.github.com/) Mac 的 GitHub 客户端：http: [//mac.github.com/](http://mac.github.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:36:57.103

**更新**（2013 年 11 月 15 日）：在 github.com 上创建分支已经有一段时间了

[https://help.github.com/articles/creating-and-deleting-branches-within-your-repository](https://help.github.com/articles/creating-and-deleting-branches-within-your-repository)

* * *

（*这不再是真的*）不，目前仅使用 github.com webapp 是不可能的。

# php - Wordpress PHP 安全模式

> ID：13175836
> 
> 赞同：0
> 
> 时间：2012-11-01T11:13:20.910
> 
> 标签：php, wordpress, 777

> **可能重复：**
> [设置上传文件夹 777 权限是否安全？](https://stackoverflow.com/questions/1577514/is-setting-the-uploads-folder-777-permision-secure)

我在我的新主机上使用[WordPress](http://en.wikipedia.org/wiki/WordPress)，当我尝试安装插件时，我得到了这个；

```
Warning: touch() [function.touch]: SAFE MODE Restriction in effect. The script whose uid is 10026 is not allowed to access /tmp owned by uid 0 in /var/www/vhosts/vanillalooks.net/httpdocs/wp-admin/includes/file.php on line 177

Warning: unlink() [function.unlink]: SAFE MODE Restriction in effect. The script whose uid is 10026 is not allowed to access /tmp owned by uid 0 in /var/www/vhosts/vanillalooks.net/httpdocs/wp-admin/includes/file.php on line 489 
```

我问我的托管服务提供商是否可以修复它，他们说他们会禁用 PHP 安全模式，所以我猜他们做到了，但它仍然无法正常工作。他们现在不知道如何修复它，我仍然收到此错误。

为什么 WordPress 仍然认为它处于安全模式？我如何检查它是否仍处于安全模式？我正在使用 Plex。我需要重新安装 WordPress 还是什么？

另外，我的上传文件夹有问题；WordPress 无法访问它。所以我将文件夹权限设置为[777](http://en.wikipedia.org/wiki/Filesystem_permissions#Octal_notation)，现在它可以工作了，但这是一种安全的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:19:27.773

创建一个[PHP](http://en.wikipedia.org/wiki/PHP)脚本并访问它，其内容应该是

```
<?php phpinfo(); ?> 
```

查找有关安全模式的信息。另外，请注意，安全模式已从 PHP 5.4+ 中删除。

WordPress 也可能认为它处于安全模式，因为它仍处于安全模式或被拒绝所需的权限，并且将其归结为处于安全模式。此外，该错误消息看起来像是由 PHP 而不是 WordPress 生成的消息，在这种情况下，安全模式仍然可能仍然处于启用状态。您可以在*[安全模式](http://php.net/manual/en/features.safe-mode.php)*（PHP 手册）中阅读更多内容。

至于权限，777 不是一个好主意，因为可以上传和执行脚本。我认为 WordPress 一开始就应该擅长防止脚本被上传——但你永远不知道，这就是为什么通常最好设置最严格的权限。通常你只需要读写权限。要了解更多信息，请参阅*[了解 FTP (CHMOD) 中的文件权限](http://www.whoishostingthis.com/blog/2011/05/25/understanding-file-permissions-ftp-chmod/)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:23:22.580

777太宽泛了，试试755。

[Wordpress.org：更改文件权限](http://codex.wordpress.org/Changing_File_Permissions)

# actionscript-3 - AS3。EventListener.Click 取决于位置

> ID：13175837
> 
> 赞同：0
> 
> 时间：2012-11-01T11:13:24.340
> 
> 标签：actionscript-3, events, click, event-listener

我正在做一个由精灵组成的 AS3 按钮（只是一个简单的正方形）。当我添加事件侦听器使其充当按钮时，它可以工作但取决于 button.x，因此当我将按钮放在我希望按钮停止工作的位置时。

谢谢

```
 public function pintaInterficieTrad(){

        while(numChildren != 0) removeChildAt(0);

        var idioma = new TextField();

        idioma.text=traductor.*[numTrad].*;
        idioma.width=200;
        idioma.selectable=false;
        idioma.setTextFormat(format);
        idioma.x=20;
        idioma.y=20;
        addChild(idioma);

        var trad = new Sprite();
        trad.graphics.lineStyle(5,0x00ff00);
        trad.graphics.beginFill(0x000000);
        trad.graphics.drawRect(300,20,150,70);
        addChild(trad);

        var textTrad = new TextField();

        if(numTrad==0) {
            textTrad.text="Traduir";
        }else{
            textTrad.text="Traducir";
        }

        textTrad.width=200;
        textTrad.selectable=false;
        textTrad.setTextFormat(format);
        textTrad.x=270;
        textTrad.y=40;
        addChild(textTrad);

        var getBack = new Sprite();
        getBack.graphics.lineStyle(5,0x00ff00);
        getBack.graphics.beginFill(0x000000);
        getBack.graphics.drawRect(500,20,150,70);
        addChild(getBack);

        var textgetBack = new TextField();
        if(numTrad==0) {
            textgetBack.text="Tornar";
        }else{
            textgetBack.text="Volver";
        }

        textgetBack.width=200;
        textgetBack.selectable=false;
        textgetBack.setTextFormat(format);
        textgetBack.x=470;
        textgetBack.y=40;
        addChild(textgetBack);

        trad.addEventListener(MouseEvent.CLICK,traduirBtn);
        getBack.addEventListener(MouseEvent.CLICK,tornarBtn);

        var userBox = new Sprite();
        userBox.graphics.lineStyle(2,0x00ff00);
        userBox.graphics.beginFill(0xffffff);
        userBox.graphics.drawRect(40,130,610,160);
        addChild(userBox);

        var tradBox = new Sprite();
        tradBox.graphics.lineStyle(2,0x00ff00);
        tradBox.graphics.beginFill(0xffffff);
        tradBox.graphics.drawRect(40,320,610,160);
        addChild(tradBox);      

        var formatTxt = new TextFormat();
        formatTxt.color=0x000000;
        formatTxt.size=14;

        var textUser = new TextField();
        var textTraduit = new TextField();

        textUser.defaultTextFormat=formatTxt;
        textUser.text = textUsuari;
        textUser.width = 600;
        textUser.height = 150;
        textUser.x=45;
        textUser.y=130;
        addChild(textUser);

        textTraduit.text = traduccio;
        textTraduit.setTextFormat(formatTxt);
        textTraduit.width = 600;
        textTraduit.height = 150;
        textTraduit.x=45;
        textTraduit.y=325;
        addChild(textTraduit);

    }

    public function traduirBtn(e){
        while(numChildren != 0) removeChildAt(0);
        tradueix();
        pintaInterficieTrad();
    }
    public function tornarBtn(e){
        while(numChildren != 0) removeChildAt(0);
        pintaMenu();
    }

} 
```

如果我把正方形放在 x=0 上，它们会做他们应该做的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:04:19.873

似乎您正在谈论的按钮是`trad`. 您`addChild`在代码中很早就使用了它，这意味着另一个显示对象可以在同一位置超过它。当您单击该位置时，单击事件只会发送到最顶部的元素，因此请尝试添加您希望人们与之交互的元素作为最后一个（按钮、文本字段输入等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:13:12.093

您的问题在于您在按钮上添加文本并且正在单击文本，而不是按钮。

将文本添加到按钮本身，您的点击事件将起作用。

还要确认没有其他组件覆盖按钮。即使是透明的，就像一个文本框。

# php - phpunit 合并两个或多个 clover.xml 报告

> ID：13175846
> 
> 赞同：5
> 
> 时间：2012-11-01T11:14:08.930
> 
> 标签：php, phpunit, code-coverage, clover

我有几个项目不同扩展的 clover.xml 报告。我想将它们组合成一个 clover.xml，然后将其创建成一个 clover html。但我认为 phpunit 类没有办法`PHP_CodeCoverage`，，，`PHP_CodeCoverage_Report_HTML`。`PHP_CodeCoverage_Report_Clover`

这些类都不接受现有的 clover.xml。我想我也许可以使用 append 和 merge 的方法`PHP_CodeCoverage`。但这不接受文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:41:24.367

[如果您正在运行 jenkins 或类似工具，请在您的 Ant 构建文件中包含一个 php 脚本，以使用SimpleXML](http://php.net/manual/en/book.simplexml.php)合并文件

一个例子在这里 [http://kuttler.eu/post/merging-and-splitting-xml-files-with-simplexml/](http://kuttler.eu/post/merging-and-splitting-xml-files-with-simplexml/)

然后在您的后期构建操作中，jenkins 将使用 clover.xml 生成您的代码覆盖率

![在此处输入图像描述](../Images/ef63b2a305eaba1ce93a9d89369f3c85.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T05:11:13.357

正如上面 jkrnak 评论的那样，您不能简单地合并 XML 文件，因为在输出时计算了诸如覆盖的行等计算值。您需要在使用原生 PHP 代码的同时“合并”。在我的例子中，我想捕获由 newman 执行的一系列 Web 服务调用的覆盖范围。为此，我在执行开始时设置了一个标志，该标志在调用中持续存在（使用缓存），然后还将 PHP_CodeCoverage 对象也保存在缓存中。我的实现（在 Laravel 中）看起来像这样：

```
if ( isset($_GET['initCoverage']) )
{
    Cache::put( 'recordCoverage', true, 1440 );
}

if ( Cache::has('recordCoverage') )
{
    if ( Cache::has('coverage') )
    {
        $coverage = Cache::get('coverage');
    }
    else
    {
        $filter = new PHP_CodeCoverage_Filter;
        $filter->addDirectoryToBlacklist( base_path() . '/vendor' );

        $coverage = new PHP_CodeCoverage( null, $filter );
    }

    $coverage->start( Request::method() . " " . Request::path() );

    if ( isset($_GET['dumpCoverage']) )
    {
        if ( Cache::has('coverage') ) 
        {
            // Prevent timeout as writing coverage reports takes a long time
            set_time_limit( 0 );

            $coverage = Cache::get( 'coverage' );
            $writer = new PHP_CodeCoverage_Report_Clover;
            $writer->process($coverage, 'results/coverage/clover.xml');
        }

        Cache::forget('recordCoverage');
        Cache::forget('coverage');
    }
    else
    {
        register_shutdown_function( function($coverage) 
        {
            $coverage->stop();

            Cache::put( 'coverage', $coverage, 1440);
        }, $coverage);
    }
} 
```

这会在单个覆盖对象中捕获一系列测试，然后在我使用“dumpCoverage”标志进行调用时输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T14:14:21.367

多年后，这个问题仍然部分未解决。[SB](https://github.com/sebastianbergmann/phpcov#merging-exported-php_codecoverage-objects-stored-in-cov-files)有一个项目可以合并三叶草文件，但它需要 php 5.6。

上述答案都不够好。[这是合并的要点](https://gist.github.com/YarekTyshchenko/4092308fc5fa87ad1791)。欢迎建设性批评。

用法：

```
php clover-merge.php -o merged.xml -f clover-phpunit.xml -f clover-phpspec.xml 
```

也将其发布在这里以供后代使用：

```
<?php
$options = getopt("f:o:");
if (! isset($options['f'])) {
    echo "Files have to be specified with -f\n";
    exit(1);
}
if (! isset($options['o'])) {
    echo "Output has to be specified with -o\n";
    exit(1);
}

$files = $options['f'];
if (! is_array($files)) {
    $files = array($files);
}
$output = $options['o'];

$buffer = '';
foreach ($files as $file) {
    if (! file_exists($file)) {
        echo "File '$file' doesn't exist\n";
        exit(2);
    }
    $report = simplexml_load_file($file);
    $buffer .= $report->project->asXML();
}

$fh = fopen($output ,'w');
if (! $fh) {
    echo "Cannot open '$output' for writing\n";
    exit(2);
}
fwrite($fh, sprintf('<?xml version="1.0" encoding="UTF-8"?><coverage>%s</coverage>', $buffer));
fclose($fh); 
```

# c# - 我可以让 ninject 实例化后期锐化方面吗？

> ID：13175850
> 
> 赞同：1
> 
> 时间：2012-11-01T11:14:25.420
> 
> 标签：c#, asp.net, ninject, aop, postsharp

我有一个 asp.net webapi 项目，我能够对控制器中的方法进行一些面向方面的编程

```
[Audit("Getting all foos")]
public IEnumerable<Foo> GetAll()
{
    return _fooService.GetAll();
} 
```

我创建的方面/属性称为审计。我正在使用 ninject 来创建对象，但在其他地方，这些方面只是自己创建的。

这会导致两个问题，首先我无法将属性注入方面，因此必须在方面中手动创建对象。

其次，它破坏了我的单元测试，因为我无法覆盖创建审计方面的创建行为，因此在测试期间创建了一个真实的而不是模拟的。

我在 IOC 或 ninject 方面没有太多经验，所以说实话，我有点搞混了。

**有没有办法通过ninject强制创建这些方面？**

* * *

如果有帮助，我将使用所有库的最新版本。

我也遇到了[Ninject Intercept](https://github.com/ninject/ninject.extensions.interception/wiki)但这似乎更像是 postsharp 的替代品，尽管我可能对此非常错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T12:25:52.220

Postsharp 修改您的代码后编译。Ninject 无法使用这种方法传递依赖关系。但是你可以做一些事情：

1.  对需要依赖的方面使用 Ninject 拦截。这有不同的工作方式。Ninject 将动态创建一个装饰器类并在调用前后调用你的方面。这样它就可以传递一些依赖关系。

2.  方面通常用于横切关注点。在这些情况下，为依赖项创建环境上下文是完全合理的。这是一个仅提供一种依赖关系的静态类，例如 IAudiLog。

.

```
public static class AuditLogProvider
{
    public static AuditLog 
    {
        get { return autitLog; }
        set {
                if (this.auditLog != null) throw new InvlaidOperationExcpetion("Audit is already configured"); 
                this.auditLog = value; 
            }
    }
} 
```

在您的引导程序中，您现在可以初始化该环境上下文：

```
AuditLogProvider.AutitLog = kernel.Get<IAuditLog>(); 
```

# parsing - 使用 awk 解析 /proc/net/dev 的输出并忽略前两行

> ID：13175854
> 
> 赞同：2
> 
> 时间：2012-11-01T11:14:30.930
> 
> 标签：parsing, awk

此命令为我提供以下输出：

```
 cat /proc/net/dev | awk '{print $1}'
 Inter-|
 face
 eth0:
 lo:
 wlan0: 
```

有没有办法解除 inter-|, face 这样的行，所以我只能得到接口的名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:18:35.860

稍微调整一下你的 awk：

```
awk 'NR>2{print $1}' /proc/net/dev 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T11:16:13.920

```
tail -n +3 /proc/net/dev | awk... 
```

`tail -n {+whatever}`（注意加号）可用于从第 n 行开始转储文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:17:58.513

有很多方法可以做到这一点。如果您只需要它适用于特定情况，我会做一些简单的事情：

```
cat /proc/net/dev | awk '{print $1}' | sed -e '1,2d' 
```

sed '1,2d' 只是意味着删除第 1 行和第 2 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T21:38:02.993

除了其他答案：

万一你不想使用`awk`with `tail`，你也可以这样做：

```
tail -n +3 /proc/net/dev | cut -d':' -f1 
```

# c# - BroadcastBlock 未按预期工作

> ID：13175860
> 
> 赞同：4
> 
> 时间：2012-11-01T11:14:48.527
> 
> 标签：c#, concurrency, task-parallel-library, tpl-dataflow

我使用`BroadcastBlock`其中`TPL Dataflow`链接到`ActionBlocks`. 但是，我在我的代码中找不到错误。我将项目发布到`BroadcastBlock`via `SendAsync`，当我在其中打印项目时，`ActionBlocks`我发现有些项目丢失了，而神秘的是其他项目是重复的。我跟踪处理项目的顺序，因此发现只是在一个项目丢失之前或后续项目的情况下被复制（通过 馈送到相同的项目`Actionblock`）`LinkTo`。我不知道发生了什么。以下是我的一些相关代码片段：

这里的实例化`BroadCastBlock`：

```
buffer = new BroadcastBlock<Quote>(quote => quote); 
```

这是我链接到操作块的方式：

```
//Filter for incoming quotes
Predicate<Quote> quoteBroadCastFilter = new Predicate<Quote>(newQuote =>
{
    if (symbol.symbolID == newQuote.symbol.symbolID)
    {
        return true;
    }
    else
    {
        return false;
    }
});

//Link Strategy up to BroadCastBlocks
buffer.LinkTo<Quote>(newStrategy.GetStrategyQuoteBuffer(), new DataflowLinkOptions { PropagateCompletion = true }, quoteBroadCastFilter); 
```

这就是我将项目（报价）提交给`BroadCastBlock`：

```
buffer.SendAsync(quote); 
```

问题是，当我在发送之前打印出跟踪信息时，`SendAsync`一切看起来都很好。`ActionBlock`当我在该链接中打印相同的信息时，`BroadCastBlock`我观察到不常见的错误。我注意到当物品被`BroadCastBlock`快速送入（通过`EventHandler`API）时，会发生丢失/重复的物品

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:12:47.523

当我发现问题时，我回答了我自己的问题：

在将项目发送到 之前`BroadCastBlock`，从并发集合中读取项目（ref 类型），更新，然后发送。因此，有时下一个项目已经从集合中读取并更新，而前一个项目仍然指向同一个对象，该对象现在正在更新过程中。简而言之，这导致了`BroadCastBlock`. 克隆后没有问题，`BroadCastBlock`但在输入队列中的项目之前。

`SendAsync`在通过 Post 或广播块发送 Quote 对象之前，我必须对其执行深层复制。

# sql - 相同的 LIKE 条件应用于许多列

> ID：13175861
> 
> 赞同：3
> 
> 时间：2012-11-01T11:14:51.103
> 
> 标签：sql, sql-server, sql-like

我有一个连接几个表的 SQL 查询，我想对结果集的许多列使用相同的 LIKE 条件过滤记录。例如，我的查询中有列 t1.Name、t1.FullName、t1.Comment、t2.Name、t3.Description 等（t1、t2 和 t3 是连接表名称），我想检查 t1.Name 是否或 t1.FullName 或 t1.Comment 或 t2.Name 或 t3.Description 是 LIKE '%sometext%'。我只是感兴趣什么 SQL 会更快？

```
WHERE t1.FullName LIKE '%sometext%' OR t1.Comment LIKE '%sometext%' OR
      t2.Name LIKE '%sometext%' OR t3.Description  LIKE '%sometext%' 
```

或者

```
WHERE ISNULL(t1.Name,'') + '|' + ISNULL(t1.FullName,'') + '|' + ISNULL(t1.Comment,'') + '|' + ISNULL(t2.Name,'') + '|' + ISNULL(t3.Description,'') LIKE '%sometext%' 
```

或者可能有一些更快的方法？我正在使用 MS SQL Server 2008 R2。

**UPD：**我已经编辑了我的第二个查询来处理某些字段为 NULL 并且连接可能包含模式但单独的字段不包含的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:36:16.687

它取决于列的大小和数量以及搜索字符串的频率。可能还有其他事情。

请注意，这两个查询*不会*产生相同的结果。连接查询处理 NULL 值的方式与第一个查询不同。

想象一下以“%some”结尾的名称和以“text%”开头的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:18:21.733

最好的方法是使用**[`FULL-TEXT SEARCH`](http://msdn.microsoft.com/en-us/library/ms142571.aspx)**.

using`WHERE t1.FullName LIKE '%sometext%'`例如，停止服务器在该列上使用索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:26:46.017

我会这样写：

```
WHERE t1.FullName LIKE '%sometext%' OR t1.Comment LIKE '%sometext%' OR
      t2.Name LIKE '%sometext%' OR t3.Description  LIKE '%sometext%' 
```

不使用后者的几个原因，其中**更快**甚至没有发挥作用：

1.  [字符串摘要统计信息](http://madhuottapalam.blogspot.co.nz/2009/08/faq-what-is-string-summary-statistics.html)可用于为查询提供服务，并且在特殊情况下它可以组合不同列上的不同索引。这对于连接的文本是不可能的
2.  `t1.FullName + ....`可能导致 NULL - 你必须处理这个
3.  `t1.FullName + ....`可能会导致在 t1.Comment 和 t2.Name 之间找到 Text，例如
    *   t1.Comment 欢迎来到集线器
    *   t2.Name = 布伦海姆
    *   sometext = '哈勃'
    *   .. t1.Comment + t2.Name ... = ... **hubBle** nheim `matches` **hubble**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:31:32.343

```
"WHERE t1.FullName LIKE '%sometext%' OR t1.Comment LIKE '%sometext%' OR
      t2.Name LIKE '%sometext%' OR t3.Description  LIKE '%sometext%'"
or

"WHERE t1.Name + t1.FullName + t1.Comment + t2.Name + t3.Description LIKE '%sometext%'"

=============
Here Both are take same time bacause each condition is checked by separatly one by one.
No way to differnce in both condition. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T11:20:44.597

我认为第二种方法更好：

```
WHERE t1.Name + t1.FullName + t1.Comment + t2.Name + t3.Description LIKE '%sometext%' 
```

然而，这两种查询都有优点和缺点。如果这些字段包含非常大（长）的数据，则查询 #1 可以更快地工作。

# c++ - (;;) {} 或 while(true) {} 哪个更好？

> ID：13175862
> 
> 赞同：0
> 
> 时间：2012-11-01T11:14:53.670
> 
> 标签：c++, c

> **可能重复：**
> [“for(;;)”是否比“while (TRUE)”快？如果不是，人们为什么要使用它？](https://stackoverflow.com/questions/2611246/is-for-faster-than-while-true-if-not-why-do-people-use-it)

我想知道哪个无限循环更可取：

```
for(;;) {
    // Do some stuff
} 
```

或者

```
#define TRUE 1

while(TRUE) {
    // Do some stuff
} 
```

从性能的角度来看，它们之间有什么区别吗？

从编码标准的角度来看，什么更可取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:18:05.477

从性能的角度来看，这并不重要。编译器会将两者优化为相同的汇编代码。从“编码标准”的角度来看， for(;;) 更简洁，这很好。虽然 while(TRUE) 更清晰一些，但 for(;;) 如此常见，以至于在这种情况下清晰并不是什么大问题（事实上，for(;;) 的普遍性可能使它比 while 版本更清晰）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:19:45.117

这是品味问题，尤其是使用的编码约定问题。最好在同一个项目中的任何地方都使用一种风格，或者在混合风格时使用相同的规则。许多 C++ 框架也提供永久宏，在我看来，在使用该框架的代码中应该优先使用它。生成的代码应该没有区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:16:30.863

没有不同。`while (true)`对某些人来说可能看起来更明显。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T11:16:47.327

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T11:17:18.940

The difference between the two is not big. You usually use for when you know how many elements to traverse. You use while if instead a condition needs to be satisfied

# c# - 如何从文件名中获取完整的文件路径？

> ID：13175868
> 
> 赞同：12
> 
> 时间：2012-11-01T11:15:30.587
> 
> 标签：c#, winforms

如何获取给定文件的完整路径？

例如，我提供：

```
string filename = @"test.txt"; 
```

结果应该是：

```
Full File Path = C:\Windows\ABC\Test\test.txt 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T11:19:31.893

尝试

```
string fileName = "test.txt";
FileInfo f = new FileInfo(fileName);
string fullname = f.FullName; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-01T12:31:22.703

使用 Path.GetFullPath()：

[http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)

这应该返回完整的路径信息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-12-20T05:43:04.103

您可以使用：

```
string path = Path.GetFullPath(FileName); 
```

它将返回该文件的完整路径。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-01T11:17:56.213

**[Directory.GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)**

```
string dirpath = Directory.GetCurrentDirectory(); 
```

**将此**目录路径添加到文件名以获取完整路径。

正如@Dan Puzey 在评论中指出的那样，最好使用**[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)**

```
Path.Combine(Directory.GetCurrentDirectory(), filename) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-10T05:29:06.340

我知道我的回答为时已晚，但它可能对其他人的
尝试有所帮助，

```
Void Main()
{
string filename = @"test.txt";
string filePath= AppDomain.CurrentDomain.BaseDirectory + filename ;
Console.WriteLine(filePath);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-01T11:17:16.127

try..

```
Server.MapPath(FileUpload1.FileName); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-03-17T13:50:11.373

```
private const string BulkSetPriceFile = "test.txt";
...
var fullname = Path.GetFullPath(BulkSetPriceFile); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-03T09:57:43.640

尝试：

```
string fileName = @"test.txt";
    string currentDirectory = Directory.GetCurrentDirectory();
    string[] fullFilePath = Directory.GetFiles(currentDirectory, filename, SearchOption.AllDirectories); 
```

它将当前目录及其子目录中所有此类文件的完整路径返回到字符串数组 fullFilePath。如果只存在一个文件，它将位于“fullFileName[0]”中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-01T16:45:47.500

您可以获取当前路径：

```
string AssemblyPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location).ToString(); 
```

祝你好运！

# c++ - 禁用系统（“mkdir /a/b”）调用输出

> ID：13175871
> 
> 赞同：2
> 
> 时间：2012-11-01T11:15:43.440
> 
> 标签：c++, linux, system

一个简单的问题：我正在使用

```
system("mkdir /some/dest/"); 
```

在我的节目中。运行我的程序时如何禁用其在屏幕上的输出，因为如果目录存在，我会得到“mkdir：无法创建目录`/some/dest/'：文件存在”

试图跑

```
system("mkdir /some/dest/ > /dev/null"); 
```

但它没有用

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:21:47.837

考虑到它`mkdir (1)`本身只是`mkdir (2)`系统调用的包装器，从 C 代码创建目录是一种奇怪的方式。

我建议使用`mkdir (2)`.

Ps`(2)`我的意思`man`是文档的类别（`$ man 2 mkdir`），这是系统调用的类别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:20:31.790

有两个流，stdout 和 stderr。您只重定向strout，而不是stderr。

您还需要将 stderr 重定向到 /dev/null ；阅读您的外壳手册。在 bash 我认为你可以这样做：

```
mkdir /some/dest/ &> /dev/null 
```

这回答了您关于在调用 system() 时如何隐藏错误消息的问题，但来自其他答案的建议（使用本机 C 函数 mkdir）更符合 C/C++ 习惯。

# android - 检查 Android MediaRecorder 是否正在录制

> ID：13175876
> 
> 赞同：2
> 
> 时间：2012-11-01T11:16:01.563
> 
> 标签：android, audio-recording, android-mediaplayer, android-mediarecorder

我为 Android 2.2 编写了一些使用 Android MediaPlayer 播放音频文件的代码。没有深入了解代码的细节，我注意到存在一个名为

```
isPlaying() 
```

这允许您检查 MediaPlayer 当前是否正在播放音频文件。因此，例如，当以下代码片段运行时

```
Toast.makeText(getApplicationContext(), "Sound playing is: " +
        mediaPlayer.isPlaying(), Toast.LENGTH_SHORT).show(); 
```

它显示以下消息

```
Sound playing is: true / false 
```

取决于是否有声音播放。

然而，当我编写一些代码来使用 Android MediaRecorder 从麦克风录制声音时，我注意到看起来*并不*存在一个名为

```
isRecording() 
```

检查是否正在进行录制。

所以，我想知道程序员是否有责任通过将一些逻辑嵌入到他们的代码中来确定录制是否正在进行 - 或者是否确实存在这样做的方法（检查录制是否正在进行中）通过使用 Android API 提供的另一个内置函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T06:04:06.957

毕竟好像没有这样的功能。我认为尝试在代码中嵌入一些逻辑以干净利落地执行此操作是有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-26T16:47:27.810

## 重要的

我找到了一个很好的解决方法来处理这个问题，你可以立即阅读解决方法，但我强烈建议你先阅读整个解释。

## 场景

我试图找到一种方法来确定 mediarecorder 是否已经开始录制，我认为在`start()`方法之后调用记录器上的`prepare()`方法就足够了，但事实证明，事实并非如此。

在你被我刚才说的话冒犯之前，让我解释一下这个场景......

我正在从头开始构建一个简单的录音应用程序，没有库，复制粘贴，所有的努力。所以我确切地知道我的代码的每个部分在做什么。或者至少我认为我做到了。

直到我决定尝试通过单击按钮来破坏我的应用程序来开始和停止录音，就像我在弹钢琴一样。是的，在调用 mediarecorder 的`start()`方法之前，我的停止按钮甚至都没有出现。

所以我受到了崩溃的欢迎，logcat 欢迎我

```
java.lang.RuntimeException: stop failed.
    at android.media.MediaRecorder.stop(Native Method) 
```

随着

```
E/MediaRecorder(15709): stop failed: -1007 
```

因此，我在网上阅读并发现在on`stop()`之后立即调用会导致此问题。`start()``MediaRecorder`

所以最大的问题是，**我如何检测现在是否可以安全地启用录音机上的 STOP 按钮？**

## 解决方法（一点也不完美，但它有效）

```
MediaRecorder.getMaxAmplitude() // The maximum absolute amplitude measured since the last call, or 0 when called for the first time 
```

如您所见，该`MediaRecorder.getMaxAmplitude()`方法或`MediaRecorder.maxAmplitude`属性在第一次调用时返回 0，之后返回幅度。

因此，我现在不是允许用户在调用后立即停止录制，而是`MediaRecorder.start()`等待该`MediaRecorder.maxAmplitude`值大于零，此时我可以确定**MediaRecorder 已初始化、启动和录制，并且处于以下状态`stop()`允许调用。**您可以通过使用**持续检查直到幅度大于 0 的可运行程序**来完成此操作。我已经在使用一个可运行的计时器，所以我执行了检查。

## 请注意

在**emulator 上工作时**，返回的值`MediaRecorder.maxAmplitude`始终为 0。因此，您应该使用 Android 设备检查一切是否按预期工作。

现在，当我第一次开始录制时，我的按钮保持禁用状态不到一秒钟。但是，如果我停止和启动太快，它们会保持禁用一段时间，并且我会向用户显示“**请稍候，录制开始**”消息。

我希望这个答案对某人有所帮助。

问候！

# extjs - 在 extjs 4 中刷新组合框数据

> ID：13175878
> 
> 赞同：3
> 
> 时间：2012-11-01T11:16:02.347
> 
> 标签：extjs

卡在 Extjs 4 中的组合框刷新数据上，单击按钮尝试通过重新加载存储重新加载组合数据 -

```
Ext.StoreManager.lookup('test').load(); 
```

商店正在重新加载，但数据未反映在组合框上。

有什么办法吗？

```
 {
    xtype         : 'combo'
   ,fieldLabel    : 'Default Role'
   ,name          : 'org_default_role'
   ,store         : Ext.create('ASA.store.Roles')
   ,displayField  : 'role_rolename'
   ,valueField    : 'role_id'
   ,queryMode     : 'local'
   ,labelWidth    : 100
   ,width         : 241
   ,triggerAction : 'all'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:18:57.353

我也有类似的情况。此行为的原因是在过滤存储之后执行加载存储事件，并且 ComboBox 具有旧数据。我在 My combo 的商店中添加了加载事件处理程序，然后应用过滤器。

```
 my_combo.store.on({
            load: function(store, records, successful, eOpts) {
                store.filterBy(function(record) {
                    return record.get('id') != 1 && record.get('id') != 12 && record.get('id') != 777;
                });
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:24:55.707

我会尝试
`your_combo.store.load();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:07:36.163

您的商店似乎属于类型`ASA.store.Roles`，但您的 store.load() 正在尝试查找名为“test”的商店。

如果您将查找/加载调用更改为此：

```
Ext.StoreManager.lookup('ASA.store.Roles').load(); 
```

它有帮助吗？

# bash - Bash echo在连接字符串的中间输出文本

> ID：13175886
> 
> 赞同：2
> 
> 时间：2012-11-01T11:16:22.750
> 
> 标签：bash, echo, kubuntu

序言：所以我有一个项目，我需要在一堆文件上运行转换工具。转换有多个步骤，可能需要一段时间。由于这些文件不一定在同一个目录中，因此我创建了一个带有要转换的文件名的文本文件：

```
<filenames.txt>

/home/me/Documents/file1.txt
/home/me/Documents/file2.txt
/home/me/Documents/file3.txt 
```

问题：然后我有一个 bash 脚本来运行这些文件，并执行转换步骤。但是，我尝试回显相位和文件名，在这种情况下，回显将回显文本粘贴在文件名的中间：

```
<script.sh>

cat filenames.txt | while read some_file
do
    echo
    echo "Begin FORMAT_A to FORMAT_B conversion..."
    echo "FORMAT_A Filename:"
    echo $some_file
    formatb_dir= dirname $some_file | tr '\n' "/"
    formatb_file= basename $some_file ".xml" | tr '\n' "_"
    formatb=$formatb_dir$formatb_file"form_b.xml\n"

    echo "FORMAT_B Filename:"
    echo $formatb
done 
```

产生如下输出：

```
Begin FORMAT_A to FORMAT_B conversion...
FORMAT_A Filename:
/home/me/Documents/file1.txt
/home/me/Documents/file1.txt_FORMAT_B Filename:
form_b.xml

Begin FORMAT_A to FORMAT_B conversion...
FORMAT_A Filename:
/home/me/Documents/file2.txt
/home/me/Documents/file2.txt_FORMAT_B Filename:
form_b.xml

Begin FORMAT_A to FORMAT_B conversion...
FORMAT_A Filename:
/home/me/Documents/file3.txt
/home/me/Documents/file3.txt_FORMAT_B Filename:
form_b.xml 
```

“FORMAT_B 文件名”，即回显文本，出现在附加文本“form_b.xml”之前。

我查看了 dirname、basename、echo 和 tr 的手册页，但没有发现任何看起来会导致我所看到的内容的内容。我试着在谷歌上环顾四周，但我不确定我问的是正确的问题（“变量前的 bash 回显文本”？）。

问题：**为什么我的回声将回声文本放在我的变量中间？**

（可能的相关问题：“我是否正在以完全错误的方式做我正在做的事情？”）

**编辑：**我接受了 fortea 的回答，因为它让我了解了我对变量的不了解并从命令中获取输出。也就是说，dogbane 和 Jonathan Leffler 展示了更好的方法来做我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:29:51.467

问题在于变量的声明：

```
formatb_dir= dirname $some_file | tr '\n' "/"
formatb_file= basename $some_file ".xml" | tr '\n' "_"
formatb=$formatb_dir$formatb_file"form_b.xml\n" 
```

尝试换行：：`echo $formatb_dir`它不包含任何内容，因为在“=”之后有一个空格。然后 bash 读取`dirname $somefile |tr '\n' "/"`并执行此命令。创建 formatb_file 时也是如此，但这次命令是 basename。（这是出现在“FORMAT_B 文件名：”之前的内容）。然后 formatb 被正确创建，但是 $formatb_dir 和 $formatb_file 是空的，所以 $formatb 将只包含`"form_b.xml\n"`. 然后你回显“FORMAT_B 文件名：”。然后你回显 $formatb，它将输出“form_b.xml”。

所以，你应该使用这样的东西：

```
formatb_dir=$(dirname $some_file | tr '\n' "/")
formatb_file=$(basename $some_file ".xml" | tr '\n' "_")
formatb=$formatb_dir$formatb_file"form_b.xml\n" 
```

[在这里](http://tldp.org/LDP/abs/html/varassignment.html)阅读

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:44:44.957

问题是您正在以奇怪的方式运行类似环境设置的命令`dirname`，`basename`而不是捕获输出。也就是说，如果你运行：

```
env_var=some_value commandname arg1 arg2 
```

该程序`commandname`在环境变量`$env_var`设置为`some_value`（仅适用于该命令）的情况下运行。在您的代码中，您写道：

```
formatb_dir= dirname $some_file | tr '\n' "/" 
```

这与我给出的示例同构。它运行将`dirname`环境变量`formatb_dir`设置为空字符串的命令（并`dirname`完全忽略它），然后将to 的输出和`dirname`to`tr`的输出发送`tr`到标准输出。

*   shell中的分配周围没有空格
*   用于`$(...)`捕获输出。
*   不要在文件名中嵌入换行符；它会让生活变得地狱！

我不会费心将`dirname`输出末尾的换行符映射为斜杠，或者将输出末尾的换行符映射`basename`为下划线。您可以在生成的名称中添加斜杠和下划线。

固定的：

```
cat filenames.txt |
while read some_file
do
    echo
    echo "Begin FORMAT_A to FORMAT_B conversion..."
    echo "FORMAT_A Filename:"
    echo $some_file
    formatb_dir=$(dirname "$some_file")
    formatb_file=$(basename "$some_file" ".xml")
    formatb="${formatb_dir}/${formatb_file}_form_b.xml"
    echo "FORMAT_B Filename:"
    echo $formatb
done 
```

分配`formatb`使用`${varname}`两次以保持一致性；大括号仅在`${formatb_file}`扩展周围是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:33:33.620

这是因为您正在使用`tr`和删除`\n`角色。

而不是使用`tr`，为什么不简单地将字符串连接在一起呢？

```
formatb_dir="$(dirname ${some_file})"
formatb_file="$(basename ${some_file})"
formatb="${formatb_dir}/${formatb_file}_form_b.xml"
echo "FORMAT_B Filename: $formatb" 
```

# html - HTML Jquery.ajax 将 HTML 文档内容发布到另一个页面

> ID：13175891
> 
> 赞同：0
> 
> 时间：2012-11-01T11:16:34.247
> 
> 标签：html, jquery

我正在为客户构建一个自助式电子邮件活动应用程序。我希望客户下载他们想要的模板，并将数据发送到另一个页面。

我正在使用`Jquery.Ajax`发布数据，尽管我需要它来选择客户端选择的 html 模板的内容：

获取模板

```
function getTemplate(id){
$.ajax({
    type: 'get',
    url: 'ay/templates/Postcard_Template.html,
    data: 'EmailTemplate_id=' + id,
    success: function(data) {
     $('#shadow').fadeIn('slow');
     $('#popupContact').fadeIn('slow');
     $('#content').html(data);
}

}); 
```

发布到新页面...

```
$.ajax({
    type: 'Post',
    url: 'wwww.Test.co.uk/test.html,
    data: 'EmailTemplate_id=' + id,
    success: function(data) {
        $('#shadow').fadeIn('slow');
        $('#popupContact').fadeIn('slow');
        $('#content').html(data);

}); 
```

然后我会将它绑定到一个表单，如果这看起来正确，有什么建议吗？

谢谢，汤姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:43:10.720

我能看到的只是gettemplate中缺少一个单引号：

```
function getTemplate(id){
$.ajax({
    type: 'get',
    url: 'ay/templates/Postcard_Template.html',
    data: 'EmailTemplate_id=' + id,
    success: function(data) {
     $('#shadow').fadeIn('slow');
     $('#popupContact').fadeIn('slow');
     $('#content').html(data);
}

}); 
```

以及帖子模板上的单引号+括号：

```
$.ajax({
    type: 'Post',
    url: 'wwww.Test.co.uk/test.html',
    data: 'EmailTemplate_id=' + id,
    success: function(data) {
        $('#shadow').fadeIn('slow');
        $('#popupContact').fadeIn('slow');
        $('#content').html(data);
    }

}); 
```

我的建议是，如果您要将其绑定到表单，您应该序列化表单并将其传递给 data 参数。简短的例子：

```
<form id="menu">
    <select name="daymenu" size="3" multiple>

            <option value="1">maple</option>

            <option value="2">hickory</option>

            <option value="3">birch</option>

    </select>
</form> 
```

然后调整你的ajax数据：

```
data: $("#menu").serialize(), 
```

祝汤姆好运：）

# php - 如何在 php 脚本中循环 html 内容

> ID：13175892
> 
> 赞同：0
> 
> 时间：2012-11-01T11:16:36.797
> 
> 标签：php, database, loops, mysqli

我正在尝试循环此代码，以便当 php 代码上的 while 语句启动时，数据库输出将有一个单独`<li>`的输出

```
 <li class="bar<?php echo $id; ?>">
    <div align="left" class="post_box">
    <span style="padding:10px"><?php echo $msg; ?> </span>
    <span class="delete_button"><a href="#" id="<?php echo $id; ?>" class="delete_update">X</a></span>
    <span class='feed_link'><a href="#" class="comment" id="<?php echo $id; ?>">comment</a></span>
    </div>
    <div id='expand_box'>
    <div id='expand_url'></div>
    </div>
    <div id="fullbox" class="fullbox<?php echo $id; ?>">
    <div id="commentload<?php echo $id; ?>" >
    </li> 
```

这是我的 php 代码

```
 </div>
    <div class="comment_box" id="c<?php echo $id; ?>">
    <form method="post" action="" name="<?php echo $id; ?>">
    <textarea class="text_area" name="comment_value" id="textarea<?php echo $id; ?>">
    </textarea><br />
    <input type="submit" value=" Comment " class="comment_submit" id="<?php echo $id; ?>"/>
    </form>
    </div>
    </div>

<?php
if($_POST['submit'] == "submit"){
   $username="xxx_admin";
   $password="xxx";
   $database="xxx_database";

//connect to mysql server
                $mysqli = new mysqli("localhost", $username, $password, $database);

                                        //check if any connection error was encountered
                                        if(mysqli_connect_errno()) {
                                            printf("Connect failed: %s\n", mysqli_connect_error());
                                            exit;
                                        }   
   $client_id = $_POST['client_id'];
   echo $client_id;
  $query="select * from messages where client_id='$client_id'";
  $result = $mysqli->query( $query );
  $row = $result->fetch_assoc();
                                        while ($row = $result->fetch_object())
                                        {
                                                // set up a row for each record
                                                echo "<li>";
                                                $mes = $row->message;
                                                $mes = nl2br($mes);

                                                $msg ="{$mes} <br> . {$row->date_post;}";

?>
<li class="bar<?php echo $id; ?>">
<div align="left" class="post_box">
<span style="padding:10px"><?php echo $msg; ?> </span>
<span class="delete_button"><a href="#" id="<?php echo $id; ?>" class="delete_update">X</a></span>
<span class='feed_link'><a href="#" class="comment" id="<?php echo $id; ?>">comment</a></span>
</div>
<div id='expand_box'>
<div id='expand_url'></div>
</div>
<div id="fullbox" class="fullbox<?php echo $id; ?>">
<div id="commentload<?php echo $id; ?>" >

</div>
<div class="comment_box" id="c<?php echo $id; ?>">
<form method="post" action="" name="<?php echo $id; ?>">
<textarea class="text_area" name="comment_value" id="textarea<?php echo $id; ?>">
</textarea><br />
<input type="submit" value=" Comment " class="comment_submit" id="<?php echo $id; ?>"/>
</form>
</div>
</div>
</li>
<?php                                   }

     $mysqli->close();
}
?> 
```

我正在尝试循环 html 代码，因为它将被放入`<ol></ol>`

数据库中的所有行都应该有一个单独的`<li></li>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:25:15.733

在[官方 PHP 站点](http://www.php.net/manual/en/control-structures.foreach.php)中存在相同的循环示例。

```
<?php
$arr = array("one", "two", "three");
reset($arr);
while (list(, $value) = each($arr)) {
    echo "Value: $value<br />\n";
}

foreach ($arr as $value) {
    echo "Value: $value<br />\n";
}
?> 
```

你应该，而不是首先渲染 html，将消息加载到一个数组中，然后，迭代这个数组进行 html 渲染

祝你好运！

# sql - Display List of Dates from Start and End Date in SQL

> ID：13175898
> 
> 赞同：-1
> 
> 时间：2012-11-01T11:16:58.007
> 
> 标签：sql

I need display a list of dates in SQL. Already I have an input with single row for n number codes.

Present Table Structure (dates in day/month/year format):

```
Code FromDate   ToDate     Total Days

1    01/03/2012 04/03/2012   4
2    01/04/2012 05/04/2012   5 
```

I need output as:

```
Code FromDate

1    01/03/2012
1    02/03/2012
1    03/03/2012
1    04/03/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:22:40.240

```
WITH date_range (calc_date) AS (
    SELECT DATEADD(DAY, DATEDIFF(DAY, 0, '2010-01-13') - DATEDIFF(DAY, '2010-01-01', '2010-01-13'), 0)
        UNION ALL SELECT DATEADD(DAY, 1, calc_date)
            FROM date_range
            WHERE DATEADD(DAY, 1, calc_date) <= '2010-01-13')
SELECT calc_date
FROM date_range; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T11:36:09.823

虽然您*可以*编写推断日期的代码*（例如[VikramJain](https://stackoverflow.com/users/1395209/vikram-jain)的SQL Server[递归 CTE](https://stackoverflow.com/questions/13175898/display-list-of-dates-from-start-and-end-date-in-sql/13175994#13175994)* ） ，但它的 CPU 很重。如果您有大量记录，并且在很长一段时间内，您正在迭代地构建大量数据。每次查询数据时都会这样做。到目前为止，最有效的 CPU 方法就是拥有另一个表。

如果您根据 Dimension 表和 Fact 表来考虑您的数据库，那么您的开始和结束日期只是隐含 Dimension 的关键`Time`。不要隐含，要明确，并创建一个`Calendar`表。然后就很琐碎了...

```
SELECT
  yourTable.code,
  calendar.calendar_date
FROM
  yourTable
INNER JOIN
  calendar
    ON  calendar.calendar_date >= yourTable.fromDate
    AND calendar.calendar_date <  yourTable.toDate 
```

这可能会节省大量 CPU 负载，并大大简化您的查询。

一旦你有了表格，预先填充了涵盖你所需要的一切的日期，许多混乱的日期操作就变成了简单的可索引查找。

您甚至可以将元数据添加到该表中，例如...

*   start_of_week
*   start_of_month
*   财政年
*   等等等等

有人批评这种做法不雅。我个人的感觉恰恰相反：
- 它缓存了基于日期的混乱计算
- 它明确地创建了一个维度表

它甚至被 TeraData 使用，效果非常好：`sys_calendar.calendar`.

# css - 如何使用@document 规则排除某些网站应用规则？

> ID：13175899
> 
> 赞同：1
> 
> 时间：2012-11-01T11:16:57.417
> 
> 标签：css

我想这样做，以便我的规则默认适用于除我列出的站点/页面之外的所有站点/页面。

有点像相反的`@document domain(mozilla.org)`

[https://developer.mozilla.org/en-US/docs/CSS/@document](https://developer.mozilla.org/en-US/docs/CSS/@document)

编辑：[后续正则表达式](https://stackoverflow.com/questions/13177138/regexp-to-exclude-websites)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:20:33.280

目前没有一种简单的方法可以做到这一点，如[本 CSS 条件规则草案](http://www.w3.org/TR/2012/WD-css3-conditional-20120911/#at-document)中所述，其中包含指向 Mozilla 错误报告的链接：

> 此语法不提供任何否定功能，[Mozilla 错误 349813](https://bugzilla.mozilla.org/show_bug.cgi?id=349813)中已要求这样做。人们想要否定的用例包括：
> 
> *   一般需要特定规则的用户样式表，但知道该规则在特定站点上弊大于利。
>     
>     
> *   作者希望将规则应用于他们的大部分页面，但希望对其进行一些例外处理。

希望他们能尽快提出并实施这样的功能。

与此同时，您可能能够实现一些`regexp()`接受带有某些标志的 JavaScript 正则表达式的东西——详细信息包含在规范中——但我不能做出任何保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-01T13:00:56.710

```
@document regexp('.+mydomain\\.com\/(?!nope|nah).+') {
    .someClass{}
} 
```

这将匹配`mydomain.com`同时排除`mydomain.com/nope`和`mydomain.com/nah`

`regexp('https?://(?!domain1|domain2|domain3).+')`也许在你的情况下。

* * *

[https://www.w3.org/TR/2012/WD-css3-conditional-20120911/#at-document](https://www.w3.org/TR/2012/WD-css3-conditional-20120911/#at-document)

> **请注意，正则表达式必须匹配整个 URL，而不仅仅是它的一部分。**
> 
> 例如，这条规则：
> 
> `@document regexp("http://www.w3.org/TR/\\d{4}/[^/]*-CSS2-\\d{8}/") { body { font-size: 20px ! important } }`
> 
> 更改页面的正文元素的字体大小，例如[http://www.w3.org/TR/2011/PR-CSS2-20110412/](http://www.w3.org/TR/2011/PR-CSS2-20110412/)。
> 
> 请注意，正则表达式中的反斜杠需要 CSS 转义为`\\`.

* * *

[https://developer.mozilla.org/en-US/docs/Web/CSS/@document](https://developer.mozilla.org/en-US/docs/Web/CSS/@document)

> [最初](http://www.w3.org/TR/2012/WD-css3-conditional-20120911/#at-document)在[CSS 条件规则模块 Level 3](https://drafts.csswg.org/css-conditional-3/)中，@document 已被 [推迟](http://www.w3.org/TR/2012/WD-css3-conditional-20121213/#changes)到 Level 4。

# python - 不能腌制 : 使用多线程模块时属性查找 cStringIO.StringO 失败错误

> ID：13175900
> 
> 赞同：0
> 
> 时间：2012-11-01T11:17:06.307
> 
> 标签：python, python-2.7

```
def execute_on_host((hostname, command), username=config['username'], keyfile=config['keyfile']):

    print hostname
    ssh_client = paramiko.SSHClient()
    ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh_client.connect(hostname=hostname, username=username, key_filename=keyfile)
    stdin, stdout, stderr = ssh_client.exec_command(command)
    print stdout.read()
    ssh_client.close()
    return stdout 
```

因此，在打印`hostname`and之后`stdout.read()`，我会收到这样的错误

```
Process PoolWorker-1:
Traceback (most recent call last):
  File "/usr/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/usr/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/lib/python2.7/multiprocessing/pool.py", line 99, in worker
    put((job, i, result))
  File "/usr/lib/python2.7/multiprocessing/queues.py", line 390, in put
    return send(obj)
PicklingError: Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed 
```

我正在使用以下代码来执行命令。

```
from multiprocessing import Pool
pool = Pool(len(host_cmds_list))
pool.map(execute_on_host, host_cmds_list)
pool.close()
pool.join() 
```

我不知道如何解决这个问题。

```
print host_cmds_list
[('hostname1', '/bin/date'), ('hostname2', '/bin/date')] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T11:41:33.443

你`stdout`是一个`cStringIO`不能腌制的对象。尝试返回它的内容而不是对象本身。

# java - 如何从属性文件初始化 ORB？

> ID：13175907
> 
> 赞同：2
> 
> 时间：2012-11-01T11:17:17.467
> 
> 标签：java, initialization, corba, orb

我想从属性文件初始化我的 ORB（通常我这样初始化它，同时运行我的示例 `./app -ORBInitRef NameService=corbaloc::localhost:2809/NameService`：）

我写了一个简单的代码：

```
private static String[] readConfigFile()
{
    Properties prop = new Properties();
    String arg[] = new String[1];
    try 
    {
        prop.load(new FileInputStream("config.properties"));
    } catch (IOException ex) {}
    arg[0] = prop.getProperty("ORBInitRef");
    return arg;
} 
```

然后尝试初始化我的球体：

```
clientsORB = org.omg.CORBA.ORB.init(readConfigFile(), null); 
```

但有一些错误：

```
2012-11-01 12:15:36 com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl <init>
WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType: IIOP_CLEAR_TEXT; hostname: 127.0.1.1; port: 900"
org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2172)
        at com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2193)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:223)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:236)
        at com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.createConnection(SocketOrChannelContactInfoImpl.java:119)
        at com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(CorbaClientRequestDispatcherImpl.java:168)
        at com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(CorbaClientDelegateImpl.java:136)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.invoke(BootstrapResolverImpl.java:99)
        at com.sun.corba.se.impl.resolver.BootstrapResolverImpl.resolve(BootstrapResolverImpl.java:132)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
        at com.sun.corba.se.impl.resolver.CompositeResolverImpl.resolve(CompositeResolverImpl.java:47)
        at com.sun.corba.se.impl.orb.ORBImpl.resolve_initial_references(ORBImpl.java:1174)
        at ClientConnection.connect(ClientConnection.java:68)
        at Client.main(Client.java:303)
Caused by: java.net.ConnectException: Connection refused
        at sun.nio.ch.Net.connect(Native Method)
        at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:525)
        at java.nio.channels.SocketChannel.open(SocketChannel.java:164)
        at com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket(DefaultSocketFactoryImpl.java:78)
        at com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>(SocketOrChannelConnectionImpl.java:206)
        ... 12 more 
```

我的 config.properties 文件：

`ORBInitRef NameService=corbaloc::localhost:2809/NameService`

我做错了什么？**当我正常初始化我的 ORB 时，一切都很好，所以它不是代码问题，它绝对是从文件初始化的问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:49:45.610

您还必须添加`-ORBInitRef`到 ORB 参数。将其与您通常使用的命令行进行比较。所有参数都必须传递给`ORB.init()`

配置属性：

```
ORBInitRef NameService=corbaloc::localhost:2809/NameService 
```

使用它的 Java 代码 (ReadProps.java)

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;

import org.omg.CORBA.ORB;

public class ReadProps {
    public static void main(String[] args) {
        ORB clientsORB = org.omg.CORBA.ORB.init(readConfigFile(), null);
    }

    static String[] readConfigFile() {
        Properties prop = new Properties();
        String[] orbarg = new String[2];

        try {
            // load a properties file
            prop.load(new FileInputStream("config.properties"));
            // get the property value and print it out  
            orbarg[0] = "-ORBInitRef"; // <---- NEEDED
            orbarg[1] = prop.getProperty("ORBInitRef");

        } catch (IOException ex) {
            ex.printStackTrace();
        }
        return orbarg;
    }

} 
```

# wordpress - wordpress 重写规则

> ID：13175913
> 
> 赞同：0
> 
> 时间：2012-11-01T11:17:45.917
> 
> 标签：wordpress, plugins, rewrite

我一直在制作一个处理获取参数的插件。现在我想尝试使用 wordpress 重写功能以友好的形式重写我的变量，但我的规则不起作用。我真的不知道如何扩展我的重写规则以使其适用于我的第二个和第三个变量。首先是被解雇

```
function drivers_rewrite_rules( $rules ) {
    global $wp_rewrite; 
    $newrules = array(
                        'drivers/([^/]+)/?$' =>   'index.php?pagename=drivers&cat_name=$matches[1]&group=$matches[2]'

                      );
    $finalrules = $newrules + $rules;
    return $finalrules;
}
add_filter( 'rewrite_rules_array','drivers_rewrite_rules' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T12:58:28.177

您是否将自定义变量传递给 $wp_query？您可能需要先执行此操作，然后才能使用它们。

```
function drivers_query_vars( $query_vars )
{
  $query_vars[] = 'cat_name';
  $query_vars[] = 'group';
  return $query_vars;
}
add_filter('query_vars', 'drivers_query_vars'); 
```

然后你可以使用：

```
get_query_var('cat_name');
get_query_var('group'); 
```

# android - 在 android 中使用 WebView 获取最新的 webkit 版本

> ID：13175915
> 
> 赞同：2
> 
> 时间：2012-11-01T11:17:52.817
> 
> 标签：android, webkit, android-webview, cordova

正如您在[此页面](http://jimbergman.net/webkit-version-in-android-version/)上看到的，Android 4.1.1 的 webkit 版本**是 534.30**。有没有办法在我的应用程序中嵌入最新的 webkit 版本，例如**537.4，它带有**我使用[cordova](http://incubator.apache.org/cordova/)创建的 chrome 22 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T15:09:57.070

我们考虑为 Cordova Android 执行此操作，但这意味着每个应用程序都需要包含 40 mb 的已编译 webkit。这对我们来说似乎是不可能的。我们热切地等待 SDK 让我们能够访问 ChromeWebView，与标准 WebView 相比，它会更新。

# c# - 位置 0 处没有行。

> ID：13175923
> 
> 赞同：0
> 
> 时间：2012-11-01T11:18:18.520
> 
> 标签：c#, asp.net

我正在创建一个网页，用户可以在其中编辑信息，`DataGrid`但我不断收到此错误：

> 异常详细信息：System.IndexOutOfRangeException：位置 0 处没有行。

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Label lblProj = this.Master.FindControl("lblProj") as Label;
    Label lblStr = this.Master.FindControl("lblStruct") as Label;
    if (Session["projCode"] == null && Session["structCode"] == null)
    {
        Response.Redirect("frmSignIn.aspx");
    }
    else
    {
        FillGrid();
        lblProj.Text = cbal.getField("Project_View", "@PrjM_id_int", Session["projCode"].ToString(), "NameByCode");
        string[,] paramVal = new string[2, 2];
        paramVal[0, 0] = "@sd_Code_var";
        paramVal[0, 1] = Session["structCode"].ToString();
        paramVal[1, 0] = "@Sd_ProjectCode_var";
        paramVal[1, 1] = Session["projCode"].ToString();
        DataSet ds = cbal.fillGrid_with_param("Structure_Definition_GetStrctureName", paramVal);
        lblStr.Text = ds.Tables[0].Rows[0]["STRUCTURE NAME"].ToString();
    }
    if (!IsPostBack)
    {
        FillContQuot();
        FillContractor();
    }
  // drpContractorName.SelectedIndexChanged += new EventHandler(drpContractorName_SelectedIndexChanged);
} 

protected void drpContractorName_SelectedIndexChanged(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["CQRA"].ConnectionString);
    SqlCommand cmd = new SqlCommand("select * from tbl_Contractor_Master where CNT_Code_var =' " + drpContractorName.SelectedValue.ToString() + " '", conn);
    conn.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    int count = 0;
    Label1.Visible = true;
    while (dr.Read())
    {
        count++;
    }
    if (count > 0)
    {
        Label1.Text = "This Contractor Not Available";
    }
    else
    {
        Label1.Text = "This Contractor Already Exist";
    }
    //Label1.Visible = false;
}

private void FillContractor()
{
    string[,] paramVal2 = new string[1, 2];
    paramVal2[0, 0] = "@CNT_Id_int";
    paramVal2[0, 1] = "-1";
    DataSet ds = cbal.fillGrid_with_param("Contractor_Master_view", paramVal2);
    Dictionary<string, string> dct = new Dictionary<string, string>();
    dct.Add("0", "Select");
    {
        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            dct.Add(ds.Tables[0].Rows[i]["CONTRACTOR CODE"].ToString(), ds.Tables[0].Rows[i]["CONTRACTOR NAME"].ToString());
        }
    }
    drpContractorName.DataSource = dct;
    drpContractorName.DataValueField = "Key";
    drpContractorName.DataTextField = "Value";
    drpContractorName.DataBind();
}   

private void FillContQuot()
{
    string[,] paramVal2 = new string[1, 2];
    paramVal2[0, 0] = "@CQ_ID_int";
    paramVal2[0, 1] = "-1";
    DataSet ds = cbal.fillGrid_with_param("contract_Quotaionapply", paramVal2);
    Dictionary<string, string> dct = new Dictionary<string, string>();
    dct.Add("0", "Select");
    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
    {
        dct.Add(ds.Tables[0].Rows[i][0].ToString(), ds.Tables[0].Rows[i][0].ToString());
    }
    drpConQuot.DataSource = dct;
    drpConQuot.DataValueField = "Key";
    drpConQuot.DataTextField = "Value";
    drpConQuot.DataBind();
}    
protected void DrpConQuotSelectedIndexChanged(object sender, EventArgs e)
{
    lblMsg.Text = "";
    if (drpConQuot.SelectedIndex != 0)
    {
        FillGrid();
        btnsave.Visible = true;
    }
    else
    {
        grdQuotation.DataSource = null;
        grdQuotation.DataBind();
    }
}

protected void DrpContractorNameSelectedIndexChanged(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["dbCQRA@12Sept2012TGConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("select * from tbl_Contractor_Master where CNT_Code_var =' " + drpContractorName.SelectedValue.ToString() + " '", conn);
    conn.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    int count = 0;
    Label1.Visible = true;
    while (dr.Read())
    {
        count++;
    }
    if (count > 0)
    {
        Label1.Text = "Not Available";
    }
    else
    {
        Label1.Text = "Available";
    }
}

private void FillGrid()
{
    string[,] param = new string[1,2];
    Dictionary<string, string> key = new Dictionary<string, string>();
    //item.Clear();
    key.Add("0", "--Select--");
    param[0, 0] = "@Quotation_code_Var";
    try
    {
        param[0, 1] = drpConQuot.SelectedItem.Value;
    }
    catch
    {
        param[0, 1] = "";
    }
    dsQuot = cbal.fillGrid_with_param("Quotation_Comparision", param);
    if (dsQuot.Tables.Count <= 0)
        return;
    DataTable tab = new DataTable();
    tab.Columns.Add("ITEM NAME");
    for (int i = 0; i < dsQuot.Tables.Count; i++)
    {
        try
        {
            tab.Columns.Add(dsQuot.Tables[i].Rows[0]["Contractor"].ToString().Split('/')[0]);
        }
        catch (Exception ex)
        {
            lblMsg.Text = ex.Message.ToString();
        }
    }
    foreach (DataRow r1 in dsQuot.Tables[0].Rows)
    {
         DataRow r = tab.NewRow();
         //for (int i = 0; i < r1.ItemArray.Length - 1; i++)
         r[0] = r1[0].ToString();
         tab.Rows.Add(r);
    }
    for (int i = 0; i < dsQuot.Tables.Count; i++)
    {
        int c = 0;
        foreach (DataRow r1 in dsQuot.Tables[i].Rows)
        {
            tab.Rows[c][i+1] = r1[1].ToString();
            c++;
        }
    }
    grdQuotation.DataSource = tab;       
    grdQuotation.DataBind();
}

protected void Btnsaveclick(object sender, EventArgs e)
{
    try
    {
                string cotationno = drpConQuot.SelectedValue;
                string quot_AwardedTo = drpContractorName.SelectedValue;//(r.Cells[r.Cells.Count - 2].FindControl("ddlName") as DropDownList).SelectedValue;
                string[,] para = new string[2, 2];
                para[0, 0] = "@quot_no_int";
                para[1, 0] = "@quot_AwardedTo";
                para[0, 1] = cotationno;
                para[1, 1] = quot_AwardedTo;
                cbal.fillGrid_with_param("Contract_AwardedTo", para);
                lblMsg.Text = "Records Saved!";
    }
    catch(Exception e1)
    {
        lblMsg.Text = e1.Message;
    }
}

protected void GridView1RowCreated(object sender, GridViewRowEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:41:12.423

检查您的数据集是否有行。

```
if(DataSet.Tables[0].rows.Count > 0 )
{
// your Code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:31:27.560

当您使用时，`DataSet`您需要检查`ds.table[0].rows.count > 0`而不是编写所需的代码

```
DataSet ds = cbal.fillGrid_with_param("Contractor_Master_view", paramVal2); 
```

# ide - 只需点击几下即可创建图表的 UML 工具

> ID：13175938
> 
> 赞同：2
> 
> 时间：2012-11-01T11:19:09.530
> 
> 标签：ide, uml

请建议足够简单的 UML 图表工具。

我不想被迫在页面上右键单击，然后选择“创建类/实体”，然后使用类对话框，然后右键单击以添加每个属性并使用 GUI 进行设置...

类符号只是一个矩形，它的内容只是一个文本。所以我想把它编辑得像文本编辑一样简单。

因此，例如，我想输入类似

```
BankAccount<ENTER><ENTER>
owner : String<ENTER>
balance : Dollars=0<ENTER><ENTER>
deposit(amount : Dollars)<ENTER>
withdrawl( amount : Dollars )<ENTER> 
```

得到下面的图片

![在此处输入图像描述](../Images/a62be80449b1b818374648bb35800864.png)

所以没有多余的点击和按键，只有绝对必要的。没有强制对话框和上下文菜单。

这种能力不应该只是初始的，即一旦创建类应该保持可编辑。例如，要添加属性，需要放置光标和上一个属性，然后按 ENTER 或一些简单的插入命令。

当然，如果我愿意，我应该能够调用对话框和属性列表来微调我的数据。

Visual Studio 的数据库编辑器可以算是很好的原型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:22:45.303

你可以试试这个网络工具，很好用，用户友好：http: [//yuml.me/diagram/scruffy/class/draw](http://yuml.me/diagram/scruffy/class/draw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T18:42:13.577

有很多[文本 UML 建模工具](http://modeling-languages.com/uml-tools/#textual)可供选择。其中一些只渲染模型，而其他一些像[textUML](http://sourceforge.net/apps/mediawiki/textuml/index.php?title=TextUML_Toolkit)生成完全兼容的 Ecore/XMI UML 模型，然后您可以使用常用的图形工具打开和编辑

# php - 在php中使用each（）时如何遍历数组的内容，而不循环

> ID：13175940
> 
> 赞同：0
> 
> 时间：2012-11-01T11:19:13.737
> 
> 标签：php, arrays, list, each

```
$foo1 = array("bob", "fred", "jussi", "jouni", "egon", "marliese");

$bar1 = each($foo1);
print '<pre>';
print_r($bar1);
print '</pre>'; 
```

上面的代码给出了以下输出：

```
Array
(
    [1] => bob
    [value] => bob
    [0] => 0
    [key] => 0
) 
```

如何打印 $bar1 包含的其他数组？像 fred 的数组（在 $foo1 中）？

* 我知道可以使用 while、list 和 each 来完成
* 我也知道 foreach 使这项任务变得更容易

我想知道是否有任何句柄可以抓住并获得类似以下输出：

```
Array
(
    [1] => fred
    [value] => fred
    [0] => 0
    [key] => 0
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:23:58.013

```
$foo1 = array("bob", "fred", "jussi", "jouni", "egon", "marliese");

next($foo1);
$bar1 = each($foo1);
print '<pre>';
print_r($bar1);
print '</pre>'; 
```

通常，只需将数组指针移动到所需位置并调用`each`.

输出：

```
Array
(
    [1] => fred
    [value] => fred
    [0] => 0
    [key] => 0
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:40:26.157

每次调用 时`each()`，它都会返回有关输入数组的下一个元素的信息。所以第一次它会返回关于“bob”的信息，下一次它会返回“fred”，以此类推。如果要到达特定元素，则必须继续调用`each()`或`next()`将数组的内部指针推进到该点。

# android - 如何将图像设置为单个主屏幕上的壁纸

> ID：13175947
> 
> 赞同：0
> 
> 时间：2012-11-01T11:19:45.057
> 
> 标签：android, wallpaper

众所周知，android 带有 3 个或 5 个或 7 个主屏幕。我想以编程方式在单个主屏幕上设置壁纸图像，并为所有其他主屏幕修复它。

我使用了以下代码：

```
 Display display = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
 Bitmap bmp = Bitmap.createScaledBitmap(wallpaperImage,display.getWidth(),display.getHeight(), true);
 setWallpaper(bmp); 
```

并且设置了壁纸图像，但它跨越了所有 3 个主屏幕。如何将其修复到一个屏幕上，以便在用户切换主屏幕时显示单个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T03:30:00.233

通过使用以下代码，您可以设置

```
 Uri sendUri = Uri.fromFile(externalFile)
    Intent intent = new Intent(Intent.ACTION_ATTACH_DATA);
    intent.setDataAndType(sendUri, "image/jpg");
    intent.putExtra("mimeType", "image/jpg");
    startActivityForResult(Intent.createChooser(intent, "Set As"), 200); 
```

并在 androidmanifest.xml 中添加权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:27:27.770

```
File f = new File(Environment.getExternalStorageDirectory(), "1.jpg");
String path = f.getAbsolutePath();
File f1 = new File(path);

if(f1.exists()) {
    Bitmap bmp = BitmapFactory.decodeFile(path);
    BitmapDrawable bitmapDrawable = new BitmapDrawable(bmp);
    WallpaperManager m=WallpaperManager.getInstance(this);

    try {
        m.setBitmap(bmp);
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

打开 Androidmanifest.xml 文件，添加使用权限作为

```
'uses-permission android:name="android.permission.SET_WALLPAPER" /' 
```

试试这个，让我知道会发生什么..

# django - django 管理界面中的自定义功能

> ID：13175950
> 
> 赞同：0
> 
> 时间：2012-11-01T11:19:51.787
> 
> 标签：django, django-admin

我正在尝试在管理界面中调整显示。我需要其中一个字段来显示为我正在创建的照片共享网站提交的名称和日期，但我不断收到以下错误：

```
global name 'datetimeConvertToHumanReadable' is not defined 
```

这是完整的追溯：[http ://dpaste.com/822073/](http://dpaste.com/822073/)

我的代码

模型：

```
class Design(models.Model):
    designer_id = models.ForeignKey(User)
    date_submitted = models.DateTimeField()
    title = models.CharField(max_length=70)
    description = models.TextField()
    photo = models.FileField(upload_to='design_photos')

    def image_thumb(self):
        return '<img src="/media/%s" width="100" height="100" />' % (self.photo)
    image_thumb.allow_tags = True

    def datetimeConvertToHumanReadable(dt):

        # convert passed datetime to timestamp
        dt_stamp = dt.strftime("%s")

        # convert current datetime to timestamp
        now = datetime.datetime.now()
        now_stamp = now.strftime("%s")

        # find difference between the two
        delta = int(now_stamp) - int(dt_stamp)

        # convert to (seconds ago, minutes ago, hours ago, etc...)
        if (delta < 60):
            return str(delta) + " seconds ago"
        elif (delta < 3600):
            return str(delta/60) + " minutes ago"
        elif (delta < 86400):
            return str(delta/3600) + " hours ago"
        elif (delta < 31536000):
            return str(delta/86400) + " days ago"
        else:
            return str(delta/31536000) + " years ago"

    def name_and_submitted(self):
        date_submitted = datetimeConvertToHumanReadable(date_submitted) 
        return '<div>%s<br />submitted %s ago</div>' % (self.designer_id, self.date_submitted)

    def __unicode__(self):
        return self.title 
```

管理员.py：

```
class DesignAdmin(admin.ModelAdmin):

    list_display = ('image_thumb', 'title', 'description', 'name_and_submitted') 
```

image_thumb 方法可以很好地在字段中显示缩略图，但 name_and_submitted 方法会引发错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:21:41.193

只是通过`self`论据。那应该可以解决问题

```
def datetimeConvertToHumanReadable(self):
    dt = self.date_submitted
    # rest of your code goes here 
```

问题是，当您不传递`self`参数时，该函数不会附加到类并且不能通过模型​​对象调用。list_admin_display 实际访问模型实例并调用该函数。在您的情况下，它类似于`design_object.datetimeConvertToHumanReadable`design_object 是管理页面中显示的每个模型实例。该参数`dt`不作为参数传递，因此您需要在函数中提取它。

希望这可以帮助

# java - 同步方法中的并发修改异常

> ID：13175951
> 
> 赞同：5
> 
> 时间：2012-11-01T11:19:53.043
> 
> 标签：java, multithreading, synchronization

我对我的多线程程序进行了一些修改，并开始`ConcurrentModificationException`在对象的 s 处获取 s `HashTable`，因此我将对它的所有访问都设置`HashTable`为`synchronised`方法以避免对我的对象的并发访问，与我的预期不同，它没有解决问题。以下是使用的设计大纲：

首先，我有一个`JTable`显示 USB 设备的一些数据的对象，这`JTable`需要一个通信核心对象，该对象通过对象实现`Observer`（读取和写入数据到我的设备的`Observable`对象）它想要的数据，它想要的数据取决于显示哪些行，以便在用户滚动表格时更新它，而不是此通信核心对象通过`synchronized update`调用其他`synchronized`方法的方法获取此通知，该方法更新 a`HashTable`保存最后读取的值以供使用后使用（此通信类通知我的`JTable`类和其他对象，当它通过其他`Observable`对象读取值时）。在更新`HashTable`. 这是代码的简化：

以下方法是通信核心对象

```
public synchronized void update(Observable o, Object arg)
{
    // do some other work
    // calls the second synchronized method
    updateMonitorList();
}

private synchronized void updateMonitorList()
{
    // updates a list of monitoring addresses (no problem here)
    // m_lastValues is the HashTable that is giving me headaches
    Iterator<Parameter> itr = m_lastValues.keySet().iterator();
    while (itr.hasNext())
    {
        // removes the currently not used parameters from the HashTable
        Parameter p = itr.next(); // concurrent exception here WHY? :/
        boolean contains = false;
        for (int i = 0; i < m_monitorList.size(); i++)
        {
            if (p.equals(m_monitorList.get(i)))
            {
                contains = true;
                break;
            }
        }
        if (!contains)
        {
            m_lastValues.remove(p);
        }
    }
    // more operations with the HashTable
    for (int i = 0; i < m_monitorList.size(); i++)
    {
        // adds newly added parameters to the hashtable
        boolean contains = false;
        for (Observer key : m_requestedParameters.keySet())
        {
            if (key.equals(m_monitorList.get(i)))
            {
                contains = true;
                break;
            }
        }
        if (!contains)
        {
            m_lastValues.put(m_monitorList.getAt(i), m_monitorList.getAt(i).m_intUserSetting);
        }
    }
}

// this method is used to know if a value has changed
private synchronized boolean getParameterChanged(Parameter currentParamer)
{
    Integer v = m_lastValues.get(currentParamer);
    return v == null || v != currentParamer.m_intUserSetting;
} 
```

`HashTable`我需要这种方法，因为我有多个窗口从 USB 设备请求值，并且这个通信对象负责处理它，在我添加最后一个值之前并发没有问题。这`m_lastValues` `HashTable`不用于上面未列出的任何其他方法。

有什么建议么？提前致谢。

**[ 编辑 ]**

其实那不是多线程问题，只是被误解的异常含义。正如@Tudor 指出的那样，问题在于循环`remove()`内的方法。`while`这是我解决它的方法：

这段代码进入`updateMonitorList()`方法，请注意`no Iterator was needed`（第一个问题是`for`这样的循环），实际上`Iterator`没有区别：

```
 ArrayList<Parameter> remove = new ArrayList<Parameter>();
    for (Parameter p : m_lastValues.keySet())
    {
        boolean contains = false;
        for (int i = 0; i < m_monitorList.size(); i++)
        {
            if (p.equals(m_monitorList.get(i)))
            {
                contains = true;
                break;
            }
        }
        if (!contains)
        {
            remove.add(p);
        }
    }
    for (int i = 0; i < remove.size(); i++)
    {
        m_lastValues.remove(remove.get(i));
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T11:22:13.197

```
for (Parameter key : m_lastValues.keySet()) // exception this line
{
    // removes the currently not used parameters from the HashTable
} 
```

The problem is here. You can't change the collection while iterating over it, regardless of synchronization. It is a single-threaded issue actually.

What you can do is either switch to an [explicit iterator](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html) and use `remove()` or save the items to remove in a separate collection and remove them afterwards.

```
Iterator<Parameter> iter = m_lastValues.keySet().iterator();
while (iter.hasNext()) {
    Parameter current = iter.next();
    for (int i = 0; i < m_monitorList.size(); i++) {
        if(current.equals(m_monitorList.get(i)) {
            iter.remove();
            break;
        }
    }
} 
```

# c# - 限制用户上传大文件

> ID：13175953
> 
> 赞同：2
> 
> 时间：2012-11-01T11:19:58.263
> 
> 标签：c#, asp.net

请在下面找到我的代码。我试图限制用户上传小于 4 MB 的文件，但是当我选择 830 KB 的文件时，我得到的内容长度为 80 MB。
此代码`flSignature.PostedFile.ContentLength`不起作用。请帮忙。

TIA

```
string uploadMsg = "";
string appPath = Server.MapPath("~");
string parentpath = appPath + "\\app\\Pictures\\";
//To Upload Multiple Files on Single Click 
HttpFileCollection hfc = Request.Files;
for (int i = 0; i < hfc.Count; i++)
{
    HttpPostedFile hpf = hfc[i];

    if (hpf.ContentLength > 0)
    {
        //if (hpf.ContentLength > 4096)
        //{
        //   uploadMsg = "Collective file size is more than 4 MB.";
        //}
        //else
        //{
        if (hfc.AllKeys[i].Contains("flSignature"))
        {
            if (flSignature.PostedFile.ContentLength > 4096)
            { 
                uploadMsg = "Collective file size is more than 4 MB.";
                break;
            }
            else
            {
                if (Path.GetFileName(hpf.FileName).ToLower().Contains("xls") || Path.GetFileName(hpf.FileName).ToLower().Contains("doc"))
                {
                    showalert("Only Image can be uploaded.");
                }
                else
                {
                    hpf.SaveAs(parentpath + lblUniqueNo.Text + "_signature_" + Path.GetFileName(hpf.FileName));
                }
            }
        }
        else if (hfc.AllKeys[i].Contains("flPhoto"))
        {
            if (flPhoto.PostedFile.ContentLength > 4096)
            {
                uploadMsg = "Collective file size is more than 4 MB.";
                break;
            }
            else
            {
                if (Path.GetFileName(hpf.FileName).ToLower().Contains("xls") || Path.GetFileName(hpf.FileName).ToLower().Contains("doc"))
                {
                    showalert("Only Image can be uploaded.");
                }
                else
                {
                    hpf.SaveAs(parentpath + lblUniqueNo.Text + "_passport_" + Path.GetFileName(hpf.FileName));

                }
            }
        }
        else if (hfc.AllKeys[i].Contains("flIdentDoc"))
        {
            if (flIdentDoc.PostedFile.ContentLength > 4096)
            {
                uploadMsg = "Collective file size is more than 4 MB.";
                break;
            }
            else
            {
                hpf.SaveAs(parentpath + lblUniqueNo.Text + "_doc_" + Path.GetFileName(hpf.FileName));
            }
        }

        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:43:19.740

[ContentLength](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.contentlength.aspx)属性携带的值以字节而不是千字节表示。

因此，当您发出 时`flSignature.PostedFile.ContentLength > 4096`，您实际上是在检查上传文件的大小是否大于四千字节，而不是四兆字节。

尝试类似：

```
if (flSignature.PostedFile.ContentLength > 4096 * 1024)  // 4194304 bytes
{ 
    uploadMsg = "Collective file size is more than 4 MB.";
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:26:03.083

`PostedFile.ContentLength`必须工作，当您浏览的文件大小超过文件中需要的`maxrequest`最大长度时`web.config`

# c# - 将 2012 年 11 月 1 日凌晨 3:42:09 转换为 2012 年 11 月 1 日

> ID：13175954
> 
> 赞同：1
> 
> 时间：2012-11-01T11:20:01.337
> 
> 标签：c#, datetime

我有一个代表日期的字符串（mysql数据库日期时间）我想将它转换为自定义格式，如**MMMM d ,YYYY**

例如。将 2012 年 11 月 1 日凌晨 3:42:09 转换为 **2012 年 11 月 1 日**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T11:23:08.680

由于您希望将 11 月作为月份，您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)并稍后使用格式化日期`.ToString`

```
string str = "11/1/2012 3:42:09 AM";
DateTime dt = DateTime.ParseExact(str, "MM/d/yyyy h:mm:ss tt",CultureInfo.InvariantCulture);
string formattedDateStr = dt.ToString("MMMMM d, yyyy"); 
```

编辑：（来自[@Martin Liversage的评论](https://stackoverflow.com/users/98607/martin-liversage)

```
//To ignore regional settings. 
string formattedDateStr = dt.ToString("MMMMM d, yyyy",CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:29:36.513

试试这个 SELECT DATENAME(MM, GETDATE()) + RIGHT(CONVERT(VARCHAR(12), GETDATE(), 107), 9) AS [Month DD, YYYY]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T11:23:04.753

`Parse`它变成一个`DateTime`对象，然后调用`ToString`：

```
string myDate = "11/1/2012 3:42:09 AM";
string formatted = DateTime.Parse(myDate).ToString("MMMM d ,yyyy"); 
```

* * *

请注意，如果您所在的机器与`myDate`（例如，您有将日期放在首位的欧洲日期格式）的文化不同，您也可以使用以下命令指定输入格式`ParseExact`：

```
string formatted = DateTime.ParseExact(myDate, "M/d/yyyy h:mm:ss tt", CultureInfo.InvariantCulture).ToString("MMMM d ,yyyy"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T11:23:12.823

据我了解，您已经具有`DateTime`价值。要将其转换为所需的字符串，您可以使用以下格式：

```
dateTime.ToString("MMMM d, yyyy", CultureInfo.InvariantCulture) 
```

注意使用`CultureInfo.InvariantCulture`. 这确保使用英文月份名称，因为不变的文化基于美国文化。否则，将使用当前区域性，并且可能具有不同的月份名称。

如果日期是从数据库中检索的 a`String`而不是 a`DateTime`那么您需要先解析字符串：

```
var dateTime = DateTime.ParseExact(
  str,
  "MM/d/yyyy h:mm:ss tt", 
  CultureInfo.InvariantCulture
); 
```

# php - Satis - 在本地存储 Packagist 存储库，其中包含不供公众使用的本地更改

> ID：13175956
> 
> 赞同：2
> 
> 时间：2012-11-01T11:20:06.960
> 
> 标签：php, svn, composer-php, packagist, satis

我想知道我是否将[http://packagist.org](http://packagist.org)上的现有 Bundle 存储在我公司的 svn 存储库中，我是否还需要存储所需的软件包/存储库？

例如，MonologBu​​ndle：

*   [https://packagist.org/packages/symfony/monolog-bundle](https://packagist.org/packages/symfony/monolog-bundle) (Packagist)
*   [https://github.com/symfony/MonologBu](https://github.com/symfony/MonologBundle) ​​ndle（GIT 回购）
*   [https://github.com/symfony/MonologBu](https://github.com/symfony/MonologBundle/blob/master/composer.json) ​​ndle/blob/master/composer.json（显示需要的JSON）

JSON 要求简介：

```
"require": {
    "php": ">=5.3.2",
    "symfony/monolog-bridge": ">=2.1.0,<2.3-dev",
    "symfony/dependency-injection": ">=2.1.0,<2.3-dev",
    "symfony/config": ">=2.1.0,<2.3-dev",
    "monolog/monolog": "1.*"
}, 
```

我的公司将对这个捆绑包进行本地更改，这些更改不会供公众使用。由于它将被添加到我们的仓库中，我想知道我们是否还必须添加所需的供应商/捆绑包/仓库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:42:48.383

您不必这样做，如果您不想覆盖这些依赖项，则可以简单地从 packagist 下载依赖项。

也就是说，我不明白您为什么需要修改捆绑包本身。如果需要，覆盖这个或那个服务就足够了。

# java - 如何在 Java 中解压缩 RPM 文件？

> ID：13175957
> 
> 赞同：0
> 
> 时间：2012-11-01T11:20:06.353
> 
> 标签：java, rpm, compression

最近，我刚刚编写了一个 eclipse 插件来自动将一个特定的 Java EE 应用程序部署到我的 tomcat 服务器。在此过程中，有一个步骤需要解压从构建服务器下载的 RPM 文件。当我从谷歌搜索解决方案时，什么也没找到。我只知道有一个commons compress lib来解压各种归档文件，例如gzip/cpio/ar/tar等。但是对于RPM文件，它不起作用。其他人可以知道如何使用 Java 解压缩 RPM 文件吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:36:08.130

我实际上并没有尝试过这个，但它保证了您正在寻找的功能：

```
http://code.google.com/p/redline-rpm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:26:04.443

正如上面的评论，我只是尝试了使用 7-zip 命令行方法的方法，它有效！！！关于 7-zip 命令行的使用，您可以访问 7-zip 官网或安装目录下的手册。温馨提示：一定要使用 32 位版本的操作系统兼容性。

# c# - 使用 XML 模式定义导出数据

> ID：13175958
> 
> 赞同：1
> 
> 时间：2012-11-01T11:20:18.013
> 
> 标签：c#, visual-studio, xsd

从我们的一位合作伙伴那里，我得到了一些 XML 模式定义文件 (*.xsd)。

有没有关于如何使用 Visual Studio 使用 xsd 文件和我们数据库中的数据生成 XML 文件的好的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:31:24.540

您将需要从架构中生成一些 c# 类，然后执行某种数据映射操作以从您的数据库中提取数据并映射到这些类中。

要生成类，您可以使用[XML 架构定义工具 (Xsd.exe)](https://docs.microsoft.com/en-us/dotnet/standard/serialization/xml-schema-definition-tool-xsd-exe)。这方面的一个例子可能很简单：

```
xsd /classes Schema.xsd 
```

有关更多示例用法，请参阅[XML 模式定义工具示例](https://docs.microsoft.com/en-us/dotnet/standard/serialization/xml-schema-definition-tool-xsd-exe#examples)。

一旦你有了这些类，你就可以从你的数据库中提取数据，映射到这些类，然后使用类似下面的方法序列化为 xml：

```
 XmlSerializer ser = new XmlSerializer(typeof(MyObject));

 using(StringWriter sw = new StringWriter())
 using(XmlWriter writer = XmlWriter.Create(sw))
 {
     ser.Serialize(writer, myObject);
     string xml = sw.ToString();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:31:26.540

您可以使用 Microsoft 的[XML 架构定义工具 (xsd.exe)](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.80%29.aspx)生成 C# 类，填充类，然后使用[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)该类将对象序列化为 XML。

有很多关于使用 xsd.exe 和`XmlSerializer`. 去谷歌上查询 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:32:20.103

您可以使用 xsd.exe 为 xsd 文件生成类，然后将这些类序列化为 xml 文件：

[http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.110).aspx)

“从 XSD 架构文件生成运行时类。生成的类可以与 System.Xml.Serialization.XmlSerializer 结合使用，以读取和编写遵循架构的 XML 代码。”

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# arrays - 不同文件的字节到 -127 到 127

> ID：13175959
> 
> 赞同：1
> 
> 时间：2012-11-01T11:20:19.133
> 
> 标签：arrays, delphi, service, web, byte

我要去一个Web服务一个字节数组，问题是字节的值从0到255，而Web服务只接受-127到127的值，有人可以帮我吗？

代码片段是这样的：

```
BytesFile : array [1..66000] of Byte;

AssignFile(fileB,'C:\img.jpg');
Reset(fileB,1);
BlockRead(fileB, BytesFile , SizeOf(BytesFile ), NumRead); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:26:31.947

-127-127 基本上是一个有符号字节。

在 Delphi 中，您可以使用 ShortInt，请参见此处：

[http://www.delphibasics.co.uk/RTL.asp?Name=ShortInt](http://www.delphibasics.co.uk/RTL.asp?Name=ShortInt)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:27:04.763

字节就是字节，这是一个解释的问题

```
var
 s:ShortInt;
 b:Byte;
begin
   s := -1;
   b := s;
   Showmessage(IntToStr(b));
   s := -127;
   b := s;
   Showmessage(IntToStr(b));

end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:27:50.420

这似乎是有符号或无符号数据类型的问题。
如果可能，请尝试转换为带符号的字节类型，即 ShortInt: [Link](http://www.delphibasics.co.uk/RTL.asp?Name=ShortInt)
或尝试从头开始使用 ShortInt。

# c# - 列出针对某个特定查询抛出 InvalidOperationException 的 lambda 表达式

> ID：13175965
> 
> 赞同：0
> 
> 时间：2012-11-01T11:20:38.727
> 
> 标签：c#, linq-to-objects

我有这个片段。

```
List<Frames> FrameList; 
```

其中 Frames 是一个仅包含原语的类，包括字符串字段“ExerciseID”。

```
...

void GetFramesForExercise(string exerciseID)

    ....

    if (exerciseID == "3.2.2") { 
       Console.Write(""); }  // quick and dirty to add a breakpoint

    if (FramesList[115].ExerciseID.Equals(exerciseID)) { 
       Console.Write(""); } // quick and dirty to add a breakpoint

    frames = (Frames)FramesList.Single(r => r.ExerciseID.Equals(exerciseID)); 
```

通过在console.write 语句上设置断点，我可以看到exerciseID 确实等于“3.2.2”，并且FramesList[115] 指向ID 等于“3.2.2”的Exercise 实例。指向的实例已正确初始化。

为什么我的查询会引发 InvalidOperationException？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:24:31.907

如果有*多个*匹配元素，`Single`将抛出一个`InvalidOperationException`. （正如您检查过*至少有*一个匹配，这是我可以看到您会得到此异常的唯一原因。）

[请参阅本页](http://msdn.microsoft.com/en-us/library/bb535118.aspx)的例外部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:25:53.937

FrameList 可能没有与搜索条件匹配的单个实例。这会导致异常。

根据**[Enumerable.Single的 msdn 文档](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)**

> Single 返回序列的唯一元素，如果序列中不完全有一个元素，则抛出异常”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T11:31:12.520

除了查询单个项目，您还可以调用 FirstOrDefault。当您依赖第三方 xml 文件中的值时，该调用不会在您面前抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:31:20.783

你应该`First`,`Single`是在你期望只返回一个元素的地方使用。

```
frames = (Frames)FramesList.First(r => r.ExerciseID.Equals(exerciseID)); 
```

# drupal - 如何将视图暴露过滤器分成多个块。即在一个块中打破几个过滤器并在另一个块中休息？

> ID：13175969
> 
> 赞同：1
> 
> 时间：2012-11-01T11:20:55.283
> 
> 标签：drupal, drupal-7, views, drupal-modules

我在一个视图中有四个暴露的过滤器。我想创建 2 块暴露的过滤器。我想要一个块中有 2 个过滤器，第二个块中有 2 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T12:26:50.037

最后我在这个网址找到了这个问题的答案： [http ://www.undpaul.de/en/blog/2013/06/17/split-views-exposed-form](http://www.undpaul.de/en/blog/2013/06/17/split-views-exposed-form)

解决方案:: 在 Views 中，您可以克隆现有的显示，这仅意味着创建它的普通副本。在我们的例子中，我克隆了包含暴露表单的页面显示以仅拆分和修改一些过滤器设置。

其他选项（尤其是页面路径）没有改变。

如果您现在查看块列表，则两个视图显示都有一个块，其中包含相应的公开表单。这些块可以显示在不同的页面和不同的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:59:49.787

然后你可以创建一个自定义模块并实现[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) () 来改变过滤形式。

为了能够做到这一点，您必须更改`weight of your custom module`表格的形式`system`。让它大于 10（因为它是视图模块的重量）

你可以实现[hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7) () 来改变表单过滤器的行为。

您可以在过滤器之后/之前添加任何 HTML，使用`$form['ANY_ELEMENT']['#prefix']`和`$form['ANY_ELEMENT']['#suffix']`OR 使用`fieldsets`. 然后让 CSS 发挥作用。

$form_id 通常采用 [views_form_ `the id of the view`_ ``the id of the display`] 的格式。例如：**views_form_my_view_page**

PS这是我目前能找到的唯一解决方案。

真的希望这行得通……穆罕默德。

# windows - 使用 Eclipse CDT 创建凭据提供程序

> ID：13175975
> 
> 赞同：1
> 
> 时间：2012-11-01T11:21:32.497
> 
> 标签：windows, visual-c++, winapi, credential-providers

我目前正在尝试为 Windows 7 32Bit 开发凭据提供程序。我目前正在使用 Eclipse CDT 来实现这一点。在安装 Windows SDK 并正确设置 CDT 之后，我能够编译和链接必要的 dll（这很麻烦，我不是 100% 肯定它按预期工作，但至少他没有抛出错误）。当我现在尝试安装凭据提供程序时，它会抛出一个 msvcr90.dll 丢失错误。我通过在网上找到正确版本的 dll 解决了这个问题（请注意，它所需的 msvcr90.dll 版本未在任何可再发行版本中提供，因此无需指出它们，我已经经历过已经）。现在我安装了它并将 msvcr90.dll 复制到 system32 文件夹中，我开始收到 R6034 运行时错误（“...尝试加载 C 运行时库 incorecctly..

直到现在都无法解决。我通过创建静态 dll 而不是共享 dll 来尝试另一种方式。当我尝试使用它时发生的所有事情都是凭据提供程序在系统启动期间甚至没有加载。

有没有人遇到过类似的问题或知道如何解决这个问题？我最后的手段是以某种方式获得 VS，但我现在想留在 CDT，因为我不确定这与问题有关。

作为记录，我目前只是试图让标准 SampleCredentialProvider 教程工作。没有使用我自己编写的代码，所以这不应该是问题的原因。

**编辑：** 为了更新，我放弃了让 CDT 编译工作凭据提供程序的承诺。因为我是一名学生，我正在为一篇论文做这个，所以我刚刚下载了 VS，它就像一个魅力，没有太多麻烦等。浪费时间去尝试让它工作而没有得到任何输出出了什么问题等等。如果有人愿意让它发挥作用，我将把这个问题留给讨论。现在我没有时间处理它。对于记录，用于链接的最重要的库是：advapi32.lib、ole32.lib、user32.lib、secur32.lib 和 shlwapi.lib（必须通过反复试验才能找到这个...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:34:45.907

你基本上有两个选择：

1.  [并排](http://support.microsoft.com/kb/326922)安装Visual Studio 2008运行时，基本运行`Vcredist_x86.exe`。
2.  使静态构建工作。

这两个选项都有其[优点和缺点](http://www.codeproject.com/Articles/22642/What-Every-Computer-Programmer-Should-Know-About-W#CodeReuse)，但由于必须由管理员安装凭据提供程序，并且考虑到您已经遇到的麻烦，我会继续使用选项 1。

我不确定 vcredist 是否包含在平台 sdk 中。这是一个[直接链接](http://www.microsoft.com/en-us/download/details.aspx?id=29)。

# php - 命名空间类的自动加载，php

> ID：13175978
> 
> 赞同：0
> 
> 时间：2012-11-01T11:21:42.817
> 
> 标签：php, namespaces, autoload

我有一个自定义算法来加载类。有`$sourcePaths`-es，自动加载器会在其中查找所有 .php 文件，并从文件中收集类、接口。然后它存储在一个关联数组中`$classes[class name] => absoule path`。稍后，当自动加载发生时，它会查看该类是否在数组中，如果不是，则该类不存在。到目前为止还可以。但是这里是命名空间。让我们看看命名空间`Doctrine\ORM\Query;`和类`Parameter { .... }`案例。首先我简单地处理它，因为它是 Doctrine\ORM\Query\Parameter ... 所以命名空间+类名。但后来`new Query\Parameter`还是找不到这个。在命名空间中查找类的正确算法是什么？

收集的类：

```
foreach ($sourcePaths as $dir)
{
    foreach (new DirectoryIterator($dir) as $fileinfo)
    {
        if (substr($fileinfo->getFilename(), -4) == '.php')
        {
            $absPath = str_replace('\\', '/', $dir.'/'.$fileinfo->getFilename());
            foreach (getPhpClasses($absPath) as $item)
            {
                $autoloadClassPaths[$item] = $absPath;
            }
        }
    }
} 
```

此函数从 php 代码中获取内容：

```
function getPhpClasses ($filename)
{
    $output = array();
    $namespace = '';
    $tokens = token_get_all(file_get_contents($filename));
    for ($i = 2; $i < sizeof($tokens); $i++)
    {
        if (($tokens[$i - 2][0] == T_NAMESPACE) && $tokens[$i - 1][0] == T_WHITESPACE && $tokens[$i][0] == T_STRING)
        {
            $j = 0;
            do
            {
                $namespace .= $tokens[$i + $j][1];
                $j++;
            } while ($tokens[$i + $j] != ';');
            $namespace .= '\\';
        }

        if (($tokens[$i - 2][0] == T_CLASS || $tokens[$i - 2][0] == T_INTERFACE) && $tokens[$i - 1][0] == T_WHITESPACE && $tokens[$i][0] == T_STRING)
        {
            $output[] = $namespace.$tokens[$i][1];
        }
    }
    return $output;
} 
```

# java - Java usb输入平台独立

> ID：13175981
> 
> 赞同：4
> 
> 时间：2012-11-01T11:21:56.790
> 
> 标签：java, input, usb, platform, joystick

我正在努力寻找能够获取通过 USB 连接的任何设备的输入的 Java API。我找到了 jUsb，但它似乎已被弃用且陈旧。

我想要的是：

*   独立于平台的 API（适用于 Unix、Windows、Mac）
*   可以从任何设备获取输入的 API（实际上我想将操纵杆连接到我的 USB 端口）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:57:53.523

我们的 USB 传感器也有同样的问题：没有 100% Java 解决方案。您将始终需要使用另一种语言编写的特定于操作系统的代码（并且可以访问本机 API）。

我们发现的最便携的解决方案是实现一种网关，它将通过 localhost TCP 套接字封装 USB 数据。我们有 3 个网关实现（OSX、UNIX 和 Windows），它们将调用本机 API 来与 USB 设备交互。Java 代码将通过 TCP 网关发送/接收 USB 流量。我们已经做了一些[基准测试](http://www.yoctopuce.com/EN/article/api-update-and-new-performance-measures)，我们测量到纯 C++ 代码和 Java 实现之间的总体差异小于 10 毫秒（对于 45 毫秒的大型事务），而一旦你有一个开放的通道，延迟可以忽略不计（没有影响）。

我们在[这里写了一篇文章来解释我们的解决方案](http://www.yoctopuce.com/EN/article/using-our-usb-modules-with-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:30:16.273

过去我使用过[libusb。](http://www.libusb.org/) 不简单，但如果你足够扎根，你可以获得多个操作系统和 Java 绑定的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T14:42:16.690

您需要先安装可以检测到您的设备的设备驱动程序。

在设备管理器 -> 端口（COM 和 LPT）中，您可以看到您的设备连接到的端口。例如 COM1/COM2/COM3

您可以编写代码以添加侦听器事件以从这些端口读取数据。有许多库可用于处理 COM 端口。此[链接](http://sourceforge.net/apps/trac/jmri/wiki/Java%20Comm%20Library)可能对您有用。

我使用 comm.jar 从手持扫描仪设备读取输入。

# opencv - 训练错误并预测我的opencv程序

> ID：13175983
> 
> 赞同：1
> 
> 时间：2012-11-01T11:22:01.303
> 
> 标签：opencv, computer-vision, face-recognition

> OpenCV 错误：错误参数（给出了空的训练数据。您需要多个样本来学习模型。）在训练中，文件 C:/slave/WinInstallerMegaPack/src/opencv/modules/contrib/src/facerec.cpp ，第 316 行

当我尝试运行以下程序时出现上述错误。我的意图是提供一些输入图像并检查opencv的`train()`和`predict()`功能。下面的代码片段有什么问题吗？

```
int main(int argc, char* argv[]) {

    const char * trainImage[6] = { "c:\\train\\00000000.jpg", "c:\\train\\00000001.jpg", "c:\\train\\00000002.jpg", "c:\\train\\00000003.jpg", "c:\\train\\00000004.jpg", "c:\\train\\00000005.jpg" };

    int imglabel[6] = {1, 2, 3, 4, 5, 6};        
    vector<Mat> img = vector<Mat>();
    vector<int> label = vector<int>();

    for (int i = 0; i >= 5; i++) {
        img.push_back(imread(trainImage[i], 0));
        label.push_back(imglabel[i]);
    }

    Ptr<FaceRecognizer> model = createEigenFaceRecognizer();
    model->train(img, label);
    model->save("c:\\train\\file.yaml");

    // Testing...
    model->load("c:\\train\\file.yaml");
    Mat testsample = imread("c:\\test\\00000000.jpg", -1);

    int PredictLabel = -1;
    double confidence = 0.0;

    model->predict(testsample, PredictLabel, confidence);
    cout << PredictLabel;
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:35:44.117

为每个标签提供更多的训练样本。

[请参阅文档](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#void%20FaceRecognizer%3a%3atrain%28InputArrayOfArrays%20src,%20InputArray%20labels%29%20=%200)中的代码示例：

```
// images for first person
images.push_back(imread("person0/0.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(0);
images.push_back(imread("person0/1.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(0);
images.push_back(imread("person0/2.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(0);
// images for second person
images.push_back(imread("person1/0.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(1);
images.push_back(imread("person1/1.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(1);
images.push_back(imread("person1/2.jpg", CV_LOAD_IMAGE_GRAYSCALE)); labels.push_back(1); 
```

你的`for`循环条件也是错误的：

```
for (int i = 0; i <= 5; i++) 
```

并且测试图像应该加载灰度：

```
Mat testsample = imread("test.jpg", CV_LOAD_IMAGE_GRAYSCALE); 
```

# javascript - Sencha Touch 2 TabPanel 活动项点击

> ID：13175984
> 
> 赞同：2
> 
> 时间：2012-11-01T11:22:07.013
> 
> 标签：javascript, sencha-touch-2

我们如何将点击监听器添加到 Tabbar 中的 activeitem，当我搜索时，我发现只有可用的事件是 activeitemchange，所以只有当我点击另一个项目然后点击 myitem 时才会执行该操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:12:45.097

添加侦听器时使用该`delegate`属性将侦听器直接添加到选项卡本身：

```
var tabPanel = Ext.Viewport.add({
    xtype: 'tabpanel',

    items: [
        {
            title: 'one',
            html: 'one'
        },
        {
            title: 'two',
            html: 'two'
        }
    ]
});

tabPanel.on({
    delegate: 'tab',
    tap: function(tab) {
        console.log(tab.getText());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:55:19.847

更简单：

正常添加按钮，因为它将是一个选项卡......然后，在 tabpanel 配置元素中，添加：

```
listeners: {
    activeitemchange: function(source, value, oldValue, eOpts) {
        if(value.id == 'chiama') {
                            // do actions...
            // for example open a link: 
                            // document.location = 'www.google.it';

            source.setActiveItem(oldValue); //avoid tab switching
            return false; // avoid tab switching
        }
    }
} 
```

# java - 向后兼容的 LinearLayout 构造函数

> ID：13175988
> 
> 赞同：2
> 
> 时间：2012-11-01T11:22:28.180
> 
> 标签：java, android, android-linearlayout, backwards-compatibility, super

我正在编写一个需要在 Android 2.3.3 上运行的 Android 应用程序（是的，碎片化！）。由于那个版本，`LinearLayout`引入了一个额外的构造函数，所以我希望能够做这样的事情：

```
public class ActionMenuTextItemView extends LinearLayout
{
    public ActionMenuTextItemView(Context context, AttributeSet attrs, int defStyle)
    {
        if (android.os.Build.VERSION.SDK_INT >= 11)
            super(context, attrs, defStyle);
        else
            super(context, attrs);
    } 
```

它不起作用，因为`super`必须是第一行。有没有办法解决这个问题（除了构建两个版本的 APK）？显然我最终可能会一直使用双参数版本，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T09:33:07.317

您可以有两个构造函数，如下所示。在姜饼中使用一种，在蜂窝及更高版本中使用另一种。

```
public class ActionMenuTextItemView extends LinearLayout
{
    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    public ActionMenuTextItemView(Context context, AttributeSet attrs, int defStyle)
    {
        super(context, attrs, defStyle);
    }

    public ActionMenuTextItemView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
    }
} 
```

# jquery - 序列化不再像它应该的那样工作

> ID：13175990
> 
> 赞同：0
> 
> 时间：2012-11-01T11:22:34.680
> 
> 标签：jquery, serialization, input, checkbox

序列化不再像它应该那样工作了。它只选择那些在 DataTables oTable 中可见的已检查输入。

```
jQuery(':checkbox').live('click',function(){
    var nn = jQuery('input:checked', oTable).serialize();
    var n=nn.length;
    if (n!='0'){
        jQuery('#imObjectForm').attr('disabled',false);
        }
    else {
        jQuery('#imObjectForm').attr('disabled',true);
        }
});    
    jQuery('#osszes').submit(function(){
        jQuery("input:hidden").remove();
        var fields = jQuery('input', oTable).serializeArray();
        jQuery.each(fields, function(i, field){
            jQuery('<input type="hidden" id="imSpProt" name="imSpProt[]" value="' + field.value + '" />').appendTo('#inputok');
            });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:25:52.873

您正在检查返回的字符串的长度，`.serialize()`没有必要使用`.seialize()`。

如果您只想检查是否有选中的复选框，您只需要执行以下操作：

```
$('#imObjectForm').prop('disabled', $('input:checked', oTable).length == 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:28:06.317

试试这个：

```
jQuery(':checkbox').on('click',function(){
var nn = jQuery('input:checked', oTable).serialize();
var n=nn.length;
if (n!='0'){
    jQuery('#imObjectForm').attr('disabled',false);
    }
else {
    jQuery('#imObjectForm').attr('disabled',true);
    }
});    

jQuery('#osszes').submit(function(){
    jQuery("input:hidden").remove();
    var fields = jQuery('input', oTable).serializeArray();
    jQuery.each(fields, function(i, field){
        jQuery('<input type="hidden" id="imSpProt" name="imSpProt[]" value="' + field.value + '" />').appendTo('#inputok');
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T20:58:22.473

它再次起作用。感谢 4 您对此的快速回复。好吧，这里最大的问题是失踪

> ○

在 ：`oTable = jQuery('#table_id').dataTable({`

```
jQuery(':checkbox').on('click',function(){
    var nn = jQuery('input:checked', oTable.fnGetNodes()).serialize();
    var n=nn.length;
    if (n!='0'){
        jQuery('#imObjectForm').attr('disabled',false);
        }
    else {
        jQuery('#imObjectForm').attr('disabled',true);
        }
});    
    jQuery('#osszes').submit(function(){
        jQuery("input:hidden").remove();
        var fields = jQuery('input', oTable.fnGetNodes()).serializeArray();
        jQuery.each(fields, function(i, field){
            jQuery('<input type="hidden" id="imSpProt" name="imSpProt[]" value="' + field.value + '" />').appendTo('#inputok');
            });
    });
oTable = jQuery('#table_id').dataTable({ 
```

# jquery - 如何从通过 jQuery .load() 加载的内容中获取数据属性值

> ID：13175993
> 
> 赞同：1
> 
> 时间：2012-11-01T11:22:35.850
> 
> 标签：jquery

我正在使用 jQuery .load() 加载内容，在添加的内容中是一些数据属性，我想从中获取值以传递给另一个函数。

.load() 代码是：

```
url += ' #post';    

$("#modal_base #modal_inner").load(url , function(response, status, xhr) {
    if (status == "error") {
        var msg = "Sorry but there was an error: ";
        $('#error').appendTo( '#modal_inner' );
        $("#error").html(msg + xhr.status + " " + xhr.statusText);
    }
}); 
```

加载内容后，数据属性就在`#modal_base #modal_inner #post`其中。我认为该元素没有事件，我需要以某种方式将委托的事件处理程序附加到文档元素。

对我来说获得`data-pag-next`和`data-pag-next`价值的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:27:32.007

一旦检索到的`complete`页面的元素已加载到目标元素中并且 DOM 更新后，回调将触发，因此您只需查找它：

```
$("#modal_base #modal_inner").load(url , function(response, status, xhr) {
    if (status == "error") {
        var msg = "Sorry but there was an error: ";
        $('#error').appendTo( '#modal_inner' );
        $("#error").html(msg + xhr.status + " " + xhr.statusText);
    } else {
        alert( $(this).find('#post').attr('data-pag-next');
        alert( $(this).find('#post').data('pag-next') ); //If using jQuery 1.4.3+
        //examples of getting the data out
        window.yourvar = $(this).find('#post').data('pag-next'); //you can access window.yourvar anywhere in your code outside .load()
        some_function_of_your( $(this).find('#post').data('pag-next') );//pass the value to some function defined by you in the global scope
    }
}); 
```