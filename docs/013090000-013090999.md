# StackOverflow 问答 13090000-13090999

# html - 仅将 CSS 水平下拉菜单中的顶部索引菜单项居中

> ID：13090000
> 
> 赞同：0
> 
> 时间：2012-10-26T15:36:08.653
> 
> 标签：html, css

如何修改 css 以使只有顶部项目（索引项目）居中，子项目很好（因为它们已经位于左侧）？

```
<div id="menu">
<ul>
<li><a href="#nogo">File</a>
<ul>
<li><a href="#nogo">Save</a></li>
<li><a href="#nogo">Link 1-2</a></li>
<li><a href="#nogo">Link 1-3</a></li>
</ul>
</li>
<li><a href="#nogo">Edit</a>
<ul>
<li><a href="#nogo">Link 2-1</a></li>
<li><a href="#nogo">Link 2-2</a></li>
<li><a href="#nogo">Link 2-3</a></li>
</ul>
</li>
<li><a href="#nogo">View</a>
<ul>
<li><a href="#nogo">Link 3-1</a></li>
<li><a href="#nogo">Link 3-2</a></li>
<li><a href="#nogo">Link 3-3</a></li>
</ul>
</li>
</ul>
</div>

/*HORIZONTAL DROP-DOWN MENU */
#menu{
padding:0;
margin:0;
position: fixed;
top: 33px;
left: 0px;
font-size: 8pt;
}
#menu ul{
padding:0;
margin:0;
}
#menu li{
position: relative;
float: left;
list-style: none;
margin: 0;
padding:0;
} 

#menu li a{
width:120px;
height: 20px;
display: block;
text-decoration:none;
line-height: 20px;
background-color: #A9BBD3;
color: #FFF;
} 

#menu li a:hover{
background-color: #446087;
} 

#menu ul ul{
position: absolute;
top: 20px;
visibility: hidden;
}

#menu ul li:hover ul{
visibility:visible;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:40:10.747

`>` [最简单的方法是专门使用CSS 子组合](http://www.w3.org/TR/selectors/#child-combinators)器来定位顶层。

**[jsFiddle 示例](http://jsfiddle.net/j08691/ywWg5/)**

```
#menu > ul > li > a{
    text-align:center;
} 
```

添加此规则将使顶级文本居中，同时使子菜单文本左对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:46:02.883

例如[http://jsfiddle.net/zhprP/](http://jsfiddle.net/zhprP/) 添加一个类到顶部元素和其他类到子项，如

```
<li class='top'>File</li>
    <li class='sub'>...</li> 
```

并在 css 中应用：

```
.top{
     text-align:center;
  }
 .sub{text-align:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:42:30.630

您可以只添加一个新类，然后将该类添加到您的顶级项目.. 例如

```
#menu li.top_item{
    text-align: center;
} 
```

然后对于html：

```
<div id="menu">
<ul>
<li class="top_item"><a href="#nogo">File</a>
<ul>
<li class="top_item"><a href="#nogo">Save</a></li>
<li><a href="#nogo">Link 1-2</a></li>
<li><a href="#nogo">Link 1-3</a></li>
</ul>
</li>
<li class="top_item"><a href="#nogo">Edit</a>
<ul>
<li><a href="#nogo">Link 2-1</a></li>
<li><a href="#nogo">Link 2-2</a></li>
<li><a href="#nogo">Link 2-3</a></li>
... 
```

# google-chrome - Chrome DevTools 在删除断点后保留断点

> ID：13090007
> 
> 赞同：1
> 
> 时间：2012-10-26T15:36:27.107
> 
> 标签：google-chrome, google-chrome-devtools

我无法清除我的开发工具中的所有站点。即使在取出所有停止器之后，即使没有断点，我的所有脚本也会继续在不同的 jquery 数组中停止。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:10:52.763

猜猜你可能已经设置了“暂停例外”。您可以使用屏幕左下角的图标更改行为。有关“暂停 JavaScript 异常”的更多信息，请[点击此处](https://google-developers.appspot.com/chrome-developer-tools/docs/scripts-exceptions_b087719962c10f94f95b29bffb37906e.frame#pause_on_exceptions)。

瓦伦库马尔·纳加拉扬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T23:42:03.150

确保 Sources 选项卡左下方的暂停图标为灰色。你可以点击它来改变它的状态。

# python - django登录索引页面

> ID：13090012
> 
> 赞同：1
> 
> 时间：2012-10-26T15:36:42.930
> 
> 标签：python, django, django-login

我正在尝试实现一个用户永远不会离开首页的登录系统。到目前为止，我有以下内容：

表格：

```
<form action="" method="post">
    {% csrf_token %}
    <input type="text" name="username" value="" id="username">
    <input type="password" name="password" value="" id="password">
    <input type="submit" value="login" />
    <input type="hidden" name="next" value="{{ next|escape }}" />
</form> 
```

风景：

```
def login_user(request):
    state = "Please log in below..."
    username = password = ''
    if request.POST:
        username = request.POST.get('username')
        password = request.POST.get('password')

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
            else:
                state = "Your account is not active, please contact the site admin."
        else:
            state = "Your username and/or password were incorrect."

    return render_to_response('index.html',{'state':state, 'username': username}) 
```

当我使用已知用户提交表单时，我收到错误：

CSRF 令牌丢失或不正确。

我究竟做错了什么？我在表格中得到了令牌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:47:37.760

您发布的示例代码使用没有 context_instance 的 render_to_response。

使用[django.contrib.shortcuts.render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)而不是 render_to_response，它是你*所有*的视图。否则，{% csrf_token %} 将为空。

# javascript - 为什么 jQuery 扩展方法不复制我的 javascript 对象？

> ID：13090022
> 
> 赞同：3
> 
> 时间：2012-10-26T15:37:15.813
> 
> 标签：javascript, jquery, ajax, json, object

我在这里查看了许多关于克隆和复制 javascript 对象的帖子，特别是这两个主题：

*   [如何正确克隆 JavaScript 对象？](https://stackoverflow.com/questions/728360/copying-an-object-in-javascript)
*   [在 JavaScript 中深度克隆对象的最有效方法是什么？](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

不过，它似乎对我不起作用。

这是我正在使用的代码片段：

```
var copiedObject = {};

$.getJSON(URL, null, function (data) {
     copiedObject = jQuery.extend(true, {}, data);
});

console.log(JSON.stringify(copiedObject)); 
```

如果我在 JSON 调用中有我的控制台日志函数，它会输出正确的值，但在函数之后，它会被清空，并输出`{}`.

我试过使用`copiedObject = JSON.parse(JSON.stringify(data))`，以及`clone(obj)`“在 Javascript 中复制对象”帖子中的函数，但都无济于事。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T15:40:12.397

`$.getJSON`触发*Ajax 请求*，默认情况下运行*异步*。您的`console.log`遗嘱在请求完成之前触发。*通过将控制台输出*移动到回调中来修复它。

```
$.getJSON(URL, null, function (data) {
     copiedObject = jQuery.extend(true, {}, data);
     console.log(JSON.stringify(copiedObject));
}); 
```

# android - 如何使用合并适配器将 Pull To Refreash 功能添加到视图中？

> ID：13090023
> 
> 赞同：2
> 
> 时间：2012-10-26T15:37:16.110
> 
> 标签：android, commonsware-cwac

我正在尝试将 Pull To Refresh 功能添加到已经使用 Mark Myrphy aka @commonsware 制作的 Merge Adapter 的 Activity 中。

这是我们的代码：

```
 //get container PTR listview
                    PullToRefreshListView ptrLvContainer = (PullToRefreshListView) findViewById(R.id.lv_merge_fragment);                        

                    //create adapter for bottom list view
                    lvAdapter = new ListViewAdapter(this, R.layout.adapter_row, alResults);

                    mMergeAdapter = new MergeAdapter();

                    //Create 2 rows of custom views, that will be set above the lvAdapter
                    LinearLayout llRow1 = new LinearLayout(this);
                    //here we add picture to llRow1
                    LinearLayout llRow2 = new LinearLayout(this);
                    //here we add 2 pictures to llRow2

                    //Add everything to mergeAdapter
                    mergeAdapter.addView(llRow1);
                    mergeAdapter.addView(llRow2);
                    mergeAdapter.addAdapter(lvAdapter);

                    //set mergeAdapter to Pull To Refresh ListView
                    ptrLvContainer.setAdapter(mergeAdapter); 
```

这里是 lv_merge_fragment.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<com.handmark.pulltorefresh.library.PullToRefreshListView 
    xmlns:ptr="http://schemas.android.com/apk/res-auto"
    xmlns:android="http://schemas.android.com/apk/res/android"
    ptr:ptrMode="pullDownFromTop"
    ptr:ptrDrawable="@drawable/cell_home_top" 
    android:id="@+id/lv__merge_fragment"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:cacheColorHint="#00000000"
    android:scrollbars="none"
    android:fadingEdge="none"
    android:divider="@android:color/transparent"

    android:listSelector="@android:color/transparent" >

</com.handmark.pulltorefresh.library.PullToRefreshListView> 
```

我正在尝试一起工作[https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)和[https://github.com/commonsguy/cwac-merge](https://github.com/commonsguy/cwac-merge)。

不幸的是，有一个问题。MergeAdapter 将整个 PullToRefresh 列表视图视为从下到上显示的内容，这使得标题（用作 PTR 指示器）始终可见（不仅在拖动后）。我无法让它工作，重写其中一个库是解决这个问题的困难方法。有没有人成功使用 CommonsWare MergeAdapter 和 Pull to Refresh android 中的库？附上屏幕截图，以便更好地理解我想要实现的目标。基本上 PTR 动作应该重新加载所有视图。

这就是我希望它看起来/工作的样子： ![在此处输入图像描述](../Images/5e732b2f74467cea6fea5b1a9ab98fec.png)

在此先感谢您的帮助。

# php - 如果等于 PHP 和 MySQL 中输入的值，则显示内容

> ID：13090026
> 
> 赞同：0
> 
> 时间：2012-10-26T15:37:19.740
> 
> 标签：php, mysql, html

好的，所以基本上我要做的是显示一个 div，如果 MySQL 行数据等于输入的值，例如如果用户类型列显示 admin-full 它需要显示一些内容。

我对 PHP 很陌生，所以非常感谢您对此的帮助，我的代码如下。

```
<?php

$row_user['type'] = $user_type;

if ($user_type == admin_full)
{
    <!-- START DIV DROPDOWN BOX--> 
  <div class="dropbox">
            <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
  </div>   
  <div class="newboxes" id="newboxes1">Div #1</div>
  <!-- END DIV DROPDOWN BOX-->
}
  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:42:59.007

```
<?php 
```

像这样

```
<?php
    // you probably have this line wrong. 
    //$row_user['type'] = $user_type; 
    // and you want
    $user_type = $row_user['type'];

    // I am assuming admin_full is not a constant, otherwise remove the single quotes 
    if ($user_type === 'admin_full') 
    {
    ?>
        <!-- START DIV DROPDOWN BOX--> 
            <div class="dropbox">
                <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
            </div>   
            <div class="newboxes" id="newboxes1">Div #1</div>
        <!-- END DIV DROPDOWN BOX-->
    <?php
    }
    else {
        ?>

        Oops, what the duce are you doing dude!

        <?php
    }
    ?> 
```

我假设 admin_full 不是常量，并且您想要一个字符串，否则将该行替换为

`if ($user_type == admin_full)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:43:00.267

您需要在使用 HTML 代码之前关闭 php 标签或回显那些 HTML 代码。

两种方式

```
<?php
$row_user['type'] = $user_type;

if ($user_type == admin_full)
{
?>
<!-- START DIV DROPDOWN BOX--> 
    <div class="dropbox">
    <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
    </div>   
    <div class="newboxes" id="newboxes1">Div #1</div>
    <!-- END DIV DROPDOWN BOX-->
<?php
}
?> 
```

或者：

```
<?php

$row_user['type'] = $user_type;

if ($user_type == admin_full)
{
echo "
    <!-- START DIV DROPDOWN BOX--> 
    <div class=\"dropbox\">
        <a id=\"myHeader1\" href=\"javascript:showonlyone('newboxes1');\" >show this one only</a>
    </div>   
    <div class=\"newboxes\" id=\"newboxes1\">Div #1</div>
    <!-- END DIV DROPDOWN BOX-->";
  }
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:42:23.887

您无法在 PHP 中嵌入 html。就 PHP 而言，html 只是文本。它不是可执行代码。要么切换到使用 echo/print 结构来输出 html，要么打破 PHP 模式，例如

使用[HEREDOC](http://php.net/heredoc)回显/打印：

```
if ($user_type == admin_full) {
   echo <<<EOL
your html here

EOL;
} 
```

跳出php模式：

```
if ($user_type == admin_full) { ?>

html goes here

<? } 
```

# ruby-on-rails - 与 Rails 兼容的 Ruby 1.9.3 内存分析工具

> ID：13090029
> 
> 赞同：14
> 
> 时间：2012-10-26T15:37:29.450
> 
> 标签：ruby-on-rails, ruby, profiling

我正在寻找一些与 1.9.3 兼容的工具，它们可以在开发中使用 rails 程序所占用的内存上提供一些真实世界的使用数字。在一个完美的世界中，它将能够按类分解内存使用情况，或者以某种方式告诉我们可以调整的内容。请仅在您使用过并认可该工具的情况下推荐该工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T22:23:29.650

我在[ruby​​-prof](https://github.com/ruby-prof/ruby-prof)上取得了成功。

它有多种获取配置文件数据的方式，并提供大量信息，最初可能会有点不知所措。它确实为我解决了一个问题，并帮助我消除了我正在处理的事情的一个主要瓶颈（我`require`从一个方法内部调用，该方法在一个紧密循环中被调用......紧缩！）。

# javascript - 在javascript中设置背景颜色

> ID：13090035
> 
> 赞同：0
> 
> 时间：2012-10-26T15:37:58.090
> 
> 标签：javascript, jquery, colors, background

我一直试图弄清楚这一点，但似乎无论我多么努力，我似乎​​都无法做到正确。我有一个带有星形坐标的地图视图。星星在悬停时会改变颜色，并在点击时打开一个链接。你如何设置背景颜色？（不是悬停颜色，我明白了。只是主要的。代码：

```
for (var country in onestar) {
    var obj = r.path(onestar[country].path);

    obj.attr(attributes);

    arr[obj.id] = country;

    obj
    .hover(function(){

    this.animate({
            fill: '#41464e'
        }, 300);
    }, function(){
        this.animate({
            fill: attributes.fill
        }, 300);
    })
    .click(function(){

    window.open('http://www.yahoo.com/')

    });

    $('.point').find('.close').live('click', function(){
        var t = $(this),
            parent = t.parent('.point');

        parent.fadeOut(function(){
            parent.remove();
        });
        return false;
    });

} 
```

我尝试的一切都会出错。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:47:50.147

如果您使用的是[jquery ui 1.9+](http://jqueryui.com/animate/) ，请尝试使用`backgroundColor`而不是`fill`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:40:56.077

```
$('your selector').css('background-color','your color'); 
```

应该这样做。

[http://api.jquery.com/css/](http://api.jquery.com/css/)

# sql-server - T-SQL CTE 物化技术不适用于 SQL Server 2012

> ID：13090037
> 
> 赞同：7
> 
> 时间：2012-10-26T15:38:20.210
> 
> 标签：sql-server, tsql, sql-server-2012, common-table-expression, materialized

我必须使用以下技术来实现我的 CTE 并提高视图性能：

```
WITH CTE AS(
    SELECT TOP 100 PERCENT
    ORDER BY ...
)

WITH CTE AS(
    SELECT TOP 2147483647
    ORDER BY ...
) 
```

现在，这两种方式都不起作用。有没有人面临同样的问题或知道在 SQL Server 2012 中这些东西是否无效？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T09:01:54.270

您**可以尝试**使用多步表值函数。这样，服务器被迫将 TVF 的结果具体化为一个表变量。此外，您**可以在声明此表类型（PRIMARY KEY、UNIQUE、CHECK）时尝试**使用声明性约束来提高最终查询的性能：

```
CREATE FUNCTION CocoJamboSchema.CocoJamboFunction(@parameters ...)
RETURNS @Results TABLE (
    Col1 INT NOT NULL,
    Col2 VARCHAR(10) NULL,
    ...
    PRIMARY KEY(Col1)
)
AS
BEGIN
    WITH MyCTE (...)
    AS
    (
        ...
    )
    INSERT @Results (...)
        FROM MyCTE;

    RETURN;
END;

SELECT ...
FROM CocoJamboSchema.CocoJamboFunction(param values) f
INNER JOIN MySchema.MyTable t ON f.Col1=t.Col1
ORDER BY t.Col1; 
```

不要忘记将`ORDER BY`子句添加到最终查询中。

最近，我使用这个解决方案来优化另一个视图 (ViewB) 使用的视图 (ViewA, DISTINCT + LEFT JOIN + GETDATE())。在这种情况下（ViewA）不可能创建索引视图（因为 DISTINCT + LEFT JOIN + GETDATE()）。相反，我创建了一个多语句 TVF，它通过减少最终查询的逻辑读取（在某些情况下急剧增加）来提高性能。

注意：当然，您**可以尝试**使用[索引视图](http://technet.microsoft.com/en-us/library/cc917715.aspx)。

# dynamics-crm-2011 - CRM 2011 未知条件运算符：NotOn

> ID：13090038
> 
> 赞同：3
> 
> 时间：2012-10-26T15:38:25.593
> 
> 标签：dynamics-crm-2011

我在插件中做这个简单的查询：

```
QueryExpression query = new QueryExpression(hb_aula.EntityLogicalName);
query.ColumnSet = new ColumnSet(true);

query.Criteria = new FilterExpression(LogicalOperator.And);
query.Criteria.Conditions.Add(new ConditionExpression("hb_datafim", ConditionOperator.NotOn, DateTime.Now));

EntityCollection ent = service.RetrieveMultiple(query); 
```

我试图检索日期字段不在今天（或其他特定日期，只是一个例子）的所有`hb_aula`记录。`hb_datafim``DateTime.Now`

当我执行这个我得到错误

> 未知条件运算符：NotOn。

我做错了什么还是这是未完成的 CRM 2011 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T22:11:34.987

我围绕您的用例做了一些测试，得到了相同的结果。看起来这可能在 SDK 中未完成。我建议使用以下解决方法 -

```
DateTime today = DateTime.Now;
DateTime yesterday = today.AddDays(-1);
DateTime tomorrow = today.AddDays(1);
FilterExpression filter = new FilterExpression(LogicalOperator.Or);
filter.AddCondition("createdon", ConditionOperator.OnOrBefore, yesterday);
filter.AddCondition("createdon", ConditionOperator.OnOrAfter, tomorrow);
QueryExpression query = new QueryExpression("contact")
    {
        ColumnSet = new ColumnSet(true),
        Criteria = filter
    };

EntityCollection ent = service.RetrieveMultiple(query); 
```

# sql - 在表值旁边选择 XML 节点

> ID：13090043
> 
> 赞同：0
> 
> 时间：2012-10-26T15:39:08.260
> 
> 标签：sql, xml, tsql

我们有一个表，其中包含描述由远程函数发送的一组订单的 XML。每行还包含订单列表到达我们系统时的 ID、时间戳等。

为了显示：

```
id | date                     | XML 
1    2012-10-20 06:51:13.683   <customer name="Bill"><order oId="1">...</order><order oId="2>...</customer>
2    2012-10-20 07:30:32.833   <customer name="Ben"><order oId="23">...</order></customer> 
```

我想选择所有订单，但我也希望每个订单都与它的 ID 和日期一起被选择。一些假设结果：

```
 id   |  date                  |  Customer | OrderId
 1      2012-10-20 06:51:13.683    Bill       1
 1      2012-10-20 06:51:13.683    Bill       2
 2      2012-10-20 06:51:13.683    Ben        23 
```

环顾四周，我找到了很多答案，例如[使用 TSQL 选择 XML 节点，](https://stackoverflow.com/questions/5796408/select-xml-nodes-using-tsql)但这些仅涉及选择节点的第一个实例。我想选择每个订单节点以及与之关联的其他表信息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:17:37.477

您必须更新列的名称，但这是我使用的方法：

```
SELECT xmlviewId, myDate
   , myXml.value('(customer[1]/@name)', 'varchar(10)') AS CustomerName
   , orders.value('@oId', 'VARCHAR(10)') AS OrderId
   , orders.value('../@name', 'VARCHAR(10)') AS AlternateWayToGEtCustomerName
FROM xmlView
CROSS APPLY myXml.nodes('//order') AS c(orders); 
```

[**SQL 小提琴**](http://sqlfiddle.com/#!3/57a2b/18/0)示例

这是 xquery[**值的一个很好的例子**](http://www.jasonstrate.com/2010/11/xquery-for-the-non-expert-value/)

我添加了第二种获取客户名称的方法，具体取决于您的偏好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:21:54.820

[**SQL 小提琴示例**](http://sqlfiddle.com/#!3/ed45b/7)

我认为在两个应用中这样做更合乎逻辑

```
select
    tt.id,
    tt.date,
    cust.col.value('@name', 'nvarchar(128)') as Customer,
    ord.col.value('@oId', 'int') as OrderId
from tt as tt
    outer apply tt.[xml].nodes('/customer') as cust(col)
    outer apply cust.col.nodes('order') as ord(col) 
```

但你也可以一次申请

[**SQL 小提琴示例**](http://sqlfiddle.com/#!3/ed45b/13)

```
select
    tt.id,
    tt.date,
    ord.col.value('../@name', 'nvarchar(128)') as Customer,
    ord.col.value('@oId', 'int') as OrderId
from tt as tt
    outer apply tt.[xml].nodes('/customer/order') as ord(col) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:10:06.893

我想[这](https://janosch.woschitz.org/parse-xml-in-t-sql-via-xquery/)就是你要找的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:30:05.073

您可以使用`@`来指定一个属性，因此您的查询将是这样的：

```
DECLARE @T TABLE (ID INT, [Date] DATETIME, [XML] XML);
INSERT @T VALUES 
    (1, '20121020 06:51:13.683', '<customer name="Bill"><order oId="1"></order><order oId="2"></order></customer>'),
    (2, '20121020 07:30:32.833', '<customer name="Ben"><order oId="23"></order></customer>');

SELECT  ID,
        [Date],
        [Customer] = [XML].value('(customer/@name)[1]', 'nvarchar(200)'),
        [OrderID] = t.Orders.value('(@oId)[1]', 'int')
FROM    @T
        CROSS APPLY [XML].nodes('/customer/order') t (Orders) 
```

# facebook - 如何捕获 NSSharingService 关闭事件

> ID：13090045
> 
> 赞同：0
> 
> 时间：2012-10-26T15:39:27.293
> 
> 标签：facebook, cocoa, twitter, sharing

使用 NSSharingService 弹窗时，搜索解决方案以了解取消操作时 NSSharingService 何时关闭。如果在发布时弹出窗口关闭（NSSharingServiceNamePostOnFacebook 上的按钮发布或 NSSharingServiceNamePostOnTwitter 上的推文），您可以使用委托：

```
- (void)sharingService:(NSSharingService *)sharingService didShareItems:(NSArray *)items 
```

或将分享项目一：

```
- (void)sharingService:(NSSharingService *)sharingService willShareItems:(NSArray *)items 
```

但是如何知道何时使用关闭按钮关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T21:07:52.280

它应该触发

```
- (void)sharingService:(NSSharingService *)sharingService didFailToShareItems:(NSArray *)items error:(NSError *)error 
```

带有指示用户取消的错误值。

# android - 如何在Android中基于POJO类的类项在CustomListView中实现搜索？

> ID：13090046
> 
> 赞同：0
> 
> 时间：2012-10-26T15:39:32.207
> 
> 标签：android, android-listview

我有一个自定义列表视图。我必须显示来自网络服务器的数据。我需要根据来自 EditText 的输入来实现搜索。ListView 中的每一行都包含图像、标题和消息。基于来自 WebServer 的响应的图像更改。看看代码。

```
class CustomListView extends ArrayAdapter {

Context context;
LayoutInflater mInflater;
ArrayList<PostData> mPostingData = null;
private Bitmap mIcon1;
private Bitmap mIcon2;
private Bitmap mIcon3;
PostData mp ;

public  CustomListView(Context c)
{
     super(c, 0);
    mInflater = (LayoutInflater)c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mIcon1 = BitmapFactory.decodeResource(c.getResources(), R.drawable.text_icon);
    mIcon2 = BitmapFactory.decodeResource(c.getResources(), R.drawable.image_icon);
    mIcon3 = BitmapFactory.decodeResource(c.getResources(), R.drawable.video_icon);
}   

public int getCount() {
    // TODO Auto-generated method stub
    if(mPostingData!=null){
        return mPostingData.size();
    }else{
        return 0;
    }
}

 public void setData(ArrayList<PostData> mPpst) {

    mPostingData = mPpst;
}

public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

public View getView(int position, View convertView, ViewGroup parent) {
     ViewHolder holder;
    ///int type = getItemViewType(arg0);
     Log.i("Aru","get View");
    if(mPostingData == null ){

        return null;
    }

            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.listviewimg, null);
                convertView.setLayoutParams(new AbsListView.LayoutParams(LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
                // Creates a ViewHolder and store references to the two children views
                // we want to bind data to.
                holder = new ViewHolder();
                holder.ll=(LinearLayout) convertView.findViewById(R.id.lvid);
                holder.text = (TextView) convertView.findViewById(R.id.texttitle);
                holder.text2 = (TextView) convertView.findViewById(R.id.tvst);
                holder.icon = (ImageView) convertView.findViewById(R.id.llimage);

                convertView.setTag(holder);
            } else {

                holder = (ViewHolder) convertView.getTag();
            }

            mp = mPostingData.get(position);

            String title = mp.mType;

            if(mp.mTitle!=null && Name.equals(mp.mPostedBy )){
                title = mp.mTitle+" "+title;
                //holder.text.setBackgroundColor(Color.WHITE);
                holder.ll.setBackgroundResource(R.drawable.listbkgme);
                holder.text.setText(title);
            }
            else if(mp.mTitle!=null && Name!=mp.mPostedBy)
            {
                title = mp.mTitle+" "+title;
           holder.text.setText(title);
            }

            if(mp.mMessage!=null && Name.equals(mp.mPostedBy )){

                holder.ll.setBackgroundResource(R.drawable.listbkgme);
                holder.text2.setText(mp.mMessage);

            }
            else if(mp.mMessage!=null && Name!=(mp.mPostedBy))
            {
                holder.text2.setText(mp.mMessage);
            }

            if(mp.mImageUrl!=null ){

                holder.icon.setImageBitmap(mIcon2);
            }else if(mp.mVideoUrl!=null){
                holder.icon.setImageBitmap(mIcon3);
            }else{
                holder.icon.setImageBitmap(mIcon1);
            }
       return convertView;
}
 class ViewHolder {
    TextView text;
    TextView text2;
    ImageView icon;
    LinearLayout ll;
}
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

} 
```

发布数据类

```
 class PostData {
String mID; 
String mPostedBy;
String mTitle;
String mMessage;
String mImageUrl;
String mVideoUrl;
String mType ;
boolean me=false; 
```

}

根据标题排序。如何根据标题搜索列表视图？

```
 search= (EditText) findViewById(R.id.searchbox);
     search.addTextChangedListener(new TextWatcher() {

         public void onTextChanged(CharSequence s, int start, int before, int count) {
             final String searchString=search.getText().toString();
               int textLength=searchString.length();

               Collections.sort(
                       mTempPost, 
                       new Comparator<PostData>() 
                       {

                        public int compare(PostData lhs, PostData rhs) {

                             System.out.println("........................"+lhs.mTitle+" "+rhs.mTitle);

                              return lhs.mTitle.compareTo(rhs.mTitle);
                        }

                       }
                     );

                         mCustomListView.notifyDataSetChanged();

         }

         public void beforeTextChanged(CharSequence s, int start, int count,
             int after) {

           }

           public void afterTextChanged(Editable s) {

              // mCustomListView.notifyDataSetChanged();
           }
          }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:59:58.153

您希望您的适配器实现[Filterable](http://developer.android.com/reference/android/widget/Filterable.html)。然后覆盖 getFilter 执行搜索

```
@Override
public Filter getFilter() {
    return new Filter() {
        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            if (results != null && results.count >= 0) {
                setData(results.values);
            } else {
                setData(mPostingData);
            }

            notifyDataSetInvalidated();
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults result = new FilterResults();
            if (!TextUtils.isEmpty(constraint)) {
                constraint = constraint.toString().toLowerCase();
                ArrayList<PostData> currentItems = new ArrayList<PostData>();
                ArrayList<PostData> foundItems = new ArrayList<PostData>();

                currentItems.addAll(mPostingData);

                for (PostData post: currentItems){
                    // Search for the items here. If we get a match, add to the list
                    if (post.mType.toLowerCase().contains(constraint)) {
                        foundItems.add(m);
                    } else if .... {
                    }
                }

                result.count = foundItems.size();
                result.values = foundItems;
            } else {
                result.count = -1;
            }

            return result;
        }
    };
} 
```

然后，您可以使用 adapter.getFilter().filter("Search Query") 从活动中调用搜索。

这也将用搜索结果替换列表视图中的项目列表。

# vba - 如何使用 VS 宏访问 SolutionFolders 中的项目？

> ID：13090048
> 
> 赞同：1
> 
> 时间：2012-10-26T15:39:31.940
> 
> 标签：vba, visual-studio

我知道我可以使用宏（[或多或少](https://stackoverflow.com/questions/13090013/how-could-i-modify-vs-variables-with-a-macro)）迭代解决方案的项目。

但我的 SLN 的顶层包含五个解决方案文件夹。我只获得这五个文件夹，但没有获得它们的条目。

我猜`Kind`一个`Project`对象的 可以告诉我它是一个真正的项目还是一个文件夹。但我找不到任何参考如何找出这一点。

* * *

**编辑：**
我知道只有一个解决方案。“解决方案文件夹”是指使用**解决方案资源管理器→右键单击解决方案→添加→新解决方案文件夹在解决方案中创建的那些文件夹**。这将创建一个新的逻辑文件夹，让您有机会在子文件夹中组织解决方案的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T23:18:48.243

这会给你一个想法

```
Sub ListSolutionFolders()
        Dim solutionFolder As Project
        Dim solutionFolders As Projects
        Dim name As String
        Dim type As String
        Dim projects As ProjectItems
        Dim project As ProjectItem

        solutionFolders = DTE.Solution.Projects
        For Each solutionFolder In solutionFolders
            name = solutionFolder.Name
            projects = solutionFolder.ProjectItems

            For Each project In projects
                If Not project.SubProject.Kind Is Nothing Then
                    'this is a real project
                    type = project.SubProject.Kind
                Else
                    'Not a project
                End If
            Next
        Next
    End Sub 
```

记下类型，它是一个 GUID，您可以查看此链接以了解其含义 [http://msdn.microsoft.com/en-us/library/hb23x61k%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/hb23x61k%28v=vs.80%29.aspx) 其他项目类型像 SSRS 未在此处列出，但也输出 GUID

# php - 使用带有敏捷身份验证的 MYDBR 登录表

> ID：13090049
> 
> 赞同：1
> 
> 时间：2012-10-26T15:39:35.020
> 
> 标签：php, login, agile, atk4

我目前正在使用敏捷工具包来创建我的网站，并且在这个网站中，我们包含了由 MYDBR 处理的报告。MYDBR 包括它自己的登录表，我希望我可以集成敏捷来使用这个登录表而不是我的自定义表，这样用户就不需要记住两个不同的登录。但是，我不完全确定如何集成这两个系统以使用相同的用户登录数据库。有人对这个有经验么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T13:54:56.210

最简单的方法是使用 myDBR 的单点登录功能。它允许您使用外部系统进行用户身份验证。只需查看如何设置它的文档：[myDBR Single Sign-On](http://mydbr.com/doc/?prefs.sso.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:20:10.613

我没有使用 MYDBR 的经验，但我相信您可以以某种方式在 ATK4 中创建新模型，该模型将使用与 MYDBR 及其用户表的连接。如果你能做到这一点，那么你可以在 Auth 类中使用这个模型进行授权。

# regex - 2 位或 5 位数字的正则表达式

> ID：13090052
> 
> 赞同：6
> 
> 时间：2012-10-26T15:40:09.473
> 
> 标签：regex

如何编写只能匹配 2 位或 5 位数字的正则表达式？

到目前为止我有这个，但它匹配任何 2 到 5 位数的数字。

```
 ^\d{2,5}$ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T15:41:08.943

使用 3 个可选数字：

```
^\d{2}\d{3}?$ 
```

请注意，某些正则表达式引擎会将`?`after any 重复修饰符（甚至是固定修饰符）解释为不贪婪的修饰符，这似乎会导致两位数的情况出现问题。如果您遇到这种情况，请使用：

```
^\d{2}(?:\d{3})?$ 
```

您可以在[这个很棒的教程](http://www.regular-expressions.info/tutorial.html)中阅读一些正则表达式基础知识。

顺便说一句，上面的内容实际上等效于（但效率略高），使用交替：

```
^(?:\d{2}|\d{5})$ 
```

（只是为了向您展示另一个正则表达式概念。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T13:54:55.753

```
/^\A\d{2}\z$|^\A\d{5}\z$/ 
```

`A`意思是输入的开始，`z`意思是输入的结束。

这适用于 PHP 和 JAVA；不确定js或perl。

# flash - SWF 文件是用 真的 但 Flash 播放器中的调试菜单项是灰色的

> ID：13090054
> 
> 赞同：0
> 
> 时间：2012-10-26T15:40:10.927
> 
> 标签：flash, debugging, intellij-idea

问题在主题中进行了解释。我有 Flash 播放器的调试版本。我用intellij想法构建它。我想调试它，但我不能。它没有连接到 IDEA，菜单项是灰色的。帮我找人。测试了一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:30:06.087

这是你[的](http://youtrack.jetbrains.com/issue/IDEA-93759)吗？让我们在 YouTrack 中继续讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:16:01.080

这是 Debug Flash Player for Chrome 的一个错误。它不会让您调试从网络交付的 swf。仅从文件系统...

# file-upload - 使用 RIDC 将带有 ADF 输入文件的文件上传到 UCM 文件夹

> ID：13090067
> 
> 赞同：3
> 
> 时间：2012-10-26T15:41:07.887
> 
> 标签：file-upload, oracle-adf, oracle-ucm

我正在使用 JDeveloper。在 ADF Fusion Web 应用程序中，我有一个 Input File 控件和一个 Send 按钮，它调用 bean 方法将文件上传到 UCM。如果我的文件位于我的机器上，比如说“/home/user/myfile.txt”，它就像一个魅力。如果我尝试使用输入文件，我看不到如何将文件上传到 UCM，而无需先将此文件保存到磁盘然后上传此文件。在我看来，不推荐这种做事方式。

这是我到目前为止能够上传来自服务器工作站的文件的代码：

```
// RETRIEVE THE DESTINATION PATH
DataBinder binder = idcClient.createBinder();
binder.putLocal("IdcService", "COLLECTION_INFO");
binder.putLocal("hasCollectionPath", "true");
binder.putLocal("dCollectionPath", "/Contribution Folders/PDD"); // The path you are looking for
DataBinder searchFolder = idcClient.sendRequest(idcContext, binder).getResponseAsBinder();

binder = idcClient.createBinder();
binder.putLocal ("IdcService", "CHECKIN_NEW");
binder.putLocal ("dDocAuthor", "weblogic");
binder.putLocal ("dDocTitle", "myimage2.jpg");
binder.putLocal ("dDocName", "myimage2.jpg");
binder.putLocal ("dDocType", "Document");
binder.putLocal("xCollectionID", searchFolder.getLocal("dCollectionID"));
binder.putLocal ("dSecurityGroup", "Public");
binder.putLocal ("dDocAccount:", "");
binder.putLocal ("xComments", "My comment");
binder.addFile ("primaryFile", new File("/home/oracle/myimage.jpg"));

// check in the file
ServiceResponse response = idcClient.sendRequest (idcContext, binder); 
```

如果您有任何建议，我将不胜感激。多谢你们！

* * *

这是解决方案：

```
 UploadedFile uf = (UploadedFile) inputFile1.getValue();

        DataBinder binder = idcClient.createBinder();
        binder.putLocal ("IdcService", "CHECKIN_NEW");
        binder.putLocal ("dDocAuthor", "weblogic"); // if user is admin, can specify other user
        binder.putLocal ("dDocTitle", uf.getFilename());
        binder.putLocal ("dDocName", uf.getFilename());
        binder.putLocal ("dDocType", "DigitalMedia");
        binder.putLocal("xCollectionID", getFolderCollectionId("/Contribution Folders/PDD")); // parent's folder
        binder.putLocal ("dSecurityGroup", "Public");
        binder.putLocal ("dDocAccount:", "");
        binder.putLocal ("xComments", "Montreal comment");
        binder.putLocal ("xWCTags", "Montreal");

        binder.addFile ("primaryFile", new TransferFile(uf.getInputStream(), uf.getFilename(), getByteLenght(uf.getInputStream())));

        ServiceResponse response = idcClient.sendRequest (idcContext, binder); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T17:09:13.027

您已经自己找到了解决方案，所以我只想提一下，这里应该使用其他方便的 UploadFile 方法。

```
getFilename(); //you've got this
getLength(); //instead of getting byte length from stream
getContentType(); //available MIME 
```

你的`getFolderCollectionId("/Contribution Folders/PDD"))`工作是否符合预期？

还要记住，文件仅在其大小小于 100KB 时才存储在内存中，如果大于则写入磁盘。每个请求限制为 2000KB。这些是默认值，可以在 servlet 上下文初始化参数中更改。

```
<context-param>
    <!-- Maximum memory per request (in bytes) -->
    <param-name>oracle.adf.view.faces.UPLOAD_MAX_MEMORY</param-name>
    <param-value>512000</param-value>
</context-param>
<context-param>
    <!-- Maximum disk space per request (in bytes) -->
    <param-name>oracle.adf.view.faces.UPLOAD_MAX_DISK_SPACE</param-name>
    <param-value>5120000</param-value>
</context-param>
<context-param>
    <!-- directory to store temporary files -->
    <param-name>oracle.adf.view.faces.UPLOAD_TEMP_DIR</param-name>
    <param-value>/tmp/ADFUploads/</param-value>
</context-param>

<!-- This filter is always required by ADF;  one of its functions is file upload. -->
<filter>
    <filter-name>adfFaces</filter-name>
    <filter-class>oracle.adf.view.faces.webapp.AdfFacesFilter</filter-class>
</filter> 
```

# c# - 从 Payload Id 获取许可证

> ID：13090070
> 
> 赞同：2
> 
> 时间：2012-10-26T15:41:19.663
> 
> 标签：c#, wix, wix3.6, burn

有没有办法从自定义 BootstrapperApplication 中的有效负载获取许可证文件。引擎似乎有版本和字符串变量，但无法查看有效负载中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:04:06.843

您的所有有效负载文件都将被提取给 `Path.GetDirectoryName(this.GetType().Assembly.Location);`您，您可以从该位置选择您的许可证文件。

# android - Sencha Touch 2.0 支持的最低 Android API 级别是多少？

> ID：13090072
> 
> 赞同：2
> 
> 时间：2012-10-26T15:41:30.477
> 
> 标签：android, sencha-touch, cordova, google-play

有人知道Sencha Touch 2 支持的*最低Android API 级别吗？*

我在 Sencha 论坛上找到了这个帖子，但那里出现的答案并不确定：

[http://www.sencha.com/forum/showthread.php?188298-Sencha-Touch-2.x-application-is-not-working-on-Android-2.1-Emulator%28API-Level-7%29](http://www.sencha.com/forum/showthread.php?188298-Sencha-Touch-2.x-application-is-not-working-on-Android-2.1-Emulator%28API-Level-7%29)

我有一个 PhoneGap 1.4.1 (Cordova) Android 项目，并试图仅针对 Google Play 市场中 ST2.0 支持的设备。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:52:48.380

*我可能错了*，但我猜**Android 4+**完全支持 Sencha Touch 2.x。

因此，您应该在项目中指定的**最低 API为****API 级别 14**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:37:40.433

Honeycomb 不支持它。在 2.2、2.3 和 4 上对我来说似乎没问题

# yii - PHPUnit 和 Yii 错误需要 *.php 文件

> ID：13090075
> 
> 赞同：4
> 
> 时间：2012-10-26T15:41:41.920
> 
> 标签：yii, phpunit

我在让我的 PHPUnit 正常工作时遇到了问题。我遇到了很多问题，但现在我遇到了这个问题……

所以我在我的应用程序文件夹中受保护/测试......在我的控制台中我写道：

```
phpunit unit/DbTest.php 
```

并得到回复（抱歉有很多信件）：PS Using Wamp and Win8

```
PHP Warning:  require_once(PHPUnit/Extensions/SeleniumTestCase.php): failed to o
pen stream: No such file or directory in C:\wamp\www\framework\test\CWebTestCase
.php on line 12
PHP Stack trace:
PHP   1\. {main}() C:\wamp\bin\php\php5.3.13\phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() C:\wamp\bin\php\php5.3.13\phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Te
xtUI\Command.php:129
PHP   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp\bin\php\php5.3.13\pea
r\PHPUnit\TextUI\Command.php:138
PHP   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp\bin\php\php5.3.13\pea
r\PHPUnit\TextUI\Command.php:606
PHP   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp\bin\php\php5.3.13\pear\
PHPUnit\TextUI\Command.php:778
PHP   7\. PHPUnit_Util_Fileloader::load() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\
Util\Fileloader.php:76
PHP   8\. include_once() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Util\Fileloader.p
hp:92
PHP   9\. require_once() C:\wamp\www\test\protected\tests\bootstrap.php:8
PHP  10\. YiiBase::autoload() C:\wamp\www\test\protected\tests\bootstrap.php:0

PHP  11\. include() C:\wamp\www\framework\YiiBase.php:397

Warning: require_once(PHPUnit/Extensions/SeleniumTestCase.php): failed to open s
tream: No such file or directory in C:\wamp\www\framework\test\CWebTestCase.php
on line 12

Call Stack:
    0.0003     325320   1\. {main}() C:\wamp\bin\php\php5.3.13\phpunit:0
    0.0081     684192   2\. PHPUnit_TextUI_Command::main() C:\wamp\bin\php\php5.3
.13\phpunit:46
    0.0081     684608   3\. PHPUnit_TextUI_Command->run() C:\wamp\bin\php\php5.3.
13\pear\PHPUnit\TextUI\Command.php:129
    0.0081     684608   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp\bin
\php\php5.3.13\pear\PHPUnit\TextUI\Command.php:138
    0.0152    1197056   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp\bin
\php\php5.3.13\pear\PHPUnit\TextUI\Command.php:606
    0.0157    1209440   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp\bin\p
hp\php5.3.13\pear\PHPUnit\TextUI\Command.php:778
    0.0164    1209536   7\. PHPUnit_Util_Fileloader::load() C:\wamp\bin\php\php5.
3.13\pear\PHPUnit\Util\Fileloader.php:76
    0.0167    1214200   8\. include_once('C:\wamp\www\test\protected\tests\boo
tstrap.php') C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Util\Fileloader.php:92
    0.0212    1495872   9\. require_once('C:\wamp\www\test\protected\tests\Web
TestCase.php') C:\wamp\www\test\protected\tests\bootstrap.php:8
    0.0213    1496136  10\. YiiBase::autoload() C:\wamp\www\test\protected\tes
ts\bootstrap.php:0
    0.0220    1519520  11\. include('C:\wamp\www\framework\test\CWebTestCase.php'
) C:\wamp\www\framework\YiiBase.php:397

PHP Fatal error:  require_once(): Failed opening required 'PHPUnit/Extensions/Se
leniumTestCase.php' (include_path='.;C:\wamp\bin\php\php5.3.13\pear') in C:\wamp
\www\framework\test\CWebTestCase.php on line 12
PHP Stack trace:
PHP   1\. {main}() C:\wamp\bin\php\php5.3.13\phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() C:\wamp\bin\php\php5.3.13\phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Te
xtUI\Command.php:129
PHP   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp\bin\php\php5.3.13\pea
r\PHPUnit\TextUI\Command.php:138
PHP   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp\bin\php\php5.3.13\pea
r\PHPUnit\TextUI\Command.php:606
PHP   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp\bin\php\php5.3.13\pear\
PHPUnit\TextUI\Command.php:778
PHP   7\. PHPUnit_Util_Fileloader::load() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\
Util\Fileloader.php:76
PHP   8\. include_once() C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Util\Fileloader.p
hp:92
PHP   9\. require_once() C:\wamp\www\test\protected\tests\bootstrap.php:8
PHP  10\. YiiBase::autoload() C:\wamp\www\test\protected\tests\bootstrap.php:0

PHP  11\. include() C:\wamp\www\framework\YiiBase.php:397

Fatal error: require_once(): Failed opening required 'PHPUnit/Extensions/Seleniu
mTestCase.php' (include_path='.;C:\wamp\bin\php\php5.3.13\pear') in C:\wamp\www\
framework\test\CWebTestCase.php on line 12

Call Stack:
    0.0003     325320   1\. {main}() C:\wamp\bin\php\php5.3.13\phpunit:0
    0.0081     684192   2\. PHPUnit_TextUI_Command::main() C:\wamp\bin\php\php5.3
.13\phpunit:46
    0.0081     684608   3\. PHPUnit_TextUI_Command->run() C:\wamp\bin\php\php5.3.
13\pear\PHPUnit\TextUI\Command.php:129
    0.0081     684608   4\. PHPUnit_TextUI_Command->handleArguments() C:\wamp\bin
\php\php5.3.13\pear\PHPUnit\TextUI\Command.php:138
    0.0152    1197056   5\. PHPUnit_TextUI_Command->handleBootstrap() C:\wamp\bin
\php\php5.3.13\pear\PHPUnit\TextUI\Command.php:606
    0.0157    1209440   6\. PHPUnit_Util_Fileloader::checkAndLoad() C:\wamp\bin\p
hp\php5.3.13\pear\PHPUnit\TextUI\Command.php:778
    0.0164    1209536   7\. PHPUnit_Util_Fileloader::load() C:\wamp\bin\php\php5.
3.13\pear\PHPUnit\Util\Fileloader.php:76
    0.0167    1214200   8\. include_once('C:\wamp\www\test\protected\tests\boo
tstrap.php') C:\wamp\bin\php\php5.3.13\pear\PHPUnit\Util\Fileloader.php:92
    0.0212    1495872   9\. require_once('C:\wamp\www\test\protected\tests\Web
TestCase.php') C:\wamp\www\test\protected\tests\bootstrap.php:8
    0.0213    1496136  10\. YiiBase::autoload() C:\wamp\www\test\protected\tes
ts\bootstrap.php:0
    0.0220    1519520  11\. include('C:\wamp\www\framework\test\CWebTestCase.php'
) C:\wamp\www\framework\YiiBase.php:397 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T09:56:43.907

首先你需要安装 Selenium

```
pear install phpunit/PHPUnit_Selenium 
```

然后你需要更改第 11-14 行

```
/framework/test/CTestCase.php 
```

如下

```
require_once('PHPUnit/Runner/Version.php');
require_once('PHPUnit/Util/Filesystem.php'); // workaround for PHPUnit <= 3.6.11
require_once('PHPUnit/Autoload.php');
if (in_array('phpunit_autoload', spl_autoload_functions())) { // PHPUnit >= 3.7    'phpunit_alutoload' was obsoleted
    spl_autoload_unregister('phpunit_autoload');
    Yii::registerAutoloader('phpunit_autoload');
} 
```

# testing - 有没有办法自动化网页的“外观和感觉”测试？

> ID：13090076
> 
> 赞同：8
> 
> 时间：2012-10-26T15:41:46.430
> 
> 标签：testing, user-interface, web, ui-automation, web-testing

我没有多少资源可以对包含数百个不同网页的许多项目进行测试，最乏味的部分是验证网站的外观是否正常。特别是 HTML 元素的布局没有被破坏。

有没有办法通过不开发高度复杂的人工智能工具来自动化这样的测试？:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-12-23T13:05:05.337

尽管这个问题已有两年之久，但我认为该领域已经有了**巨大**的飞跃，这证明了更新答案的合理性。

有许多工具可让您对 Web/移动应用程序执行自动化可视化测试，从而节省宝贵的时间。这些工具在几个方面有所不同：

1.  视觉比较的类型：无论是像素到像素、基于阈值还是更复杂的算法。
2.  自动化：其中一些工具与现有的自动化框架集成，例如[Selenium/Webdriver](http://www.seleniumhq.org/)，其他工具使用他们自己的专有自动化框架。
3.  开源/商业。

以下是工具的部分列表及其描述：

1.  [Applitools Eyes](https://applitools.com/) - My personal favourite, and IMHO the best and most advanced tool out there by far. It's a commercial tool, but it also has a free plan. Since this tool is aimed to visual testing as a human would, its comparison engine does all the work for you and does not require you to define any thresholds or mark parts of the screen or anything like that. Test maintenance is done via a web application, and provides very powerful maintenance features (automatic identification of similar changes across different steps etc.) which I haven't encountered in any other tool. It has SDKs for Selenium (Java/Python/Ruby/Javascript), Appium, Protractor, and more, and even [an Extension](https://chrome.google.com/webstore/detail/applitools-eyes/ofhaaccocoghamklkjfliehhdhmibdbh?hl=en) which allows you to perform tests without any coding at all.
2.  [WebdriverCSS](https://github.com/webdriverio/webdrivercss) - An open source tool which is based on WebdriverIO (A Selenium wrapper written in Javascript). It uses GraphicsMagick for comparing images, and you can define a threshold from which images are considered different. If you're already using WebDriverIO it's super easy to add visual checkpoints to your tests.
3.  [Sikuli](http://www.sikuli.org/) - An open source tool with a proprietary automation framework based on the visual elements in the screen.

There are actually quite a few more tools, such as [PhantomCSS](https://github.com/Huddle/PhantomCSS), [Huxley](https://github.com/facebookarchive/huxley), [dpxdt](https://github.com/bslatkin/dpxdt) and more.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T19:53:45.040

我将在 Arran 的评论中加入我的投票，即虽然您/可以/这样做，但您可能应该/不/将宝贵的时间花在这上面。我基于多年来在许多不同工具中围绕 UI 自动化工作，包括 Watir、WebDriver、Selenium RC、Visual Studio 和 Telerik 的 Test Studio。

当您只是尝试进行功能测试时，UI 自动化既困难又脆弱。尝试自动化外观和感觉来验证 CSS、布局定位、图像外观等是非常脆弱的——即使是浏览器之间的最小差异和 UI 的最小更改也会让您花费大量时间来更新失败的测试。

是的，这是可能的。但是，通过将自动化工作集中在功能上来保持理智。将视觉检查留给最快、最简单的工具：人眼。

**更新：**请务必阅读 dcoder 的回复。他/她是绝对正确的。该领域已经取得了一些重大（早该！）的进步。您需要评估这些工具是否适合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-04T02:12:43.420

有一个 YouTube 视频可以很好地解决这个问题：来自 Google Developers Live[的安全持续部署的秘密。](http://www.youtube.com/watch?v=UMnZiTL0tUc)在视频中， [Breett Slatkin](http://www.onebigfluke.com/2013/06/gdl-secret-to-safe-continuous-deployment.html)教我们如何使用视觉差异进行“外观和感觉”测试。

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T15:46:50.807

你可以这样做，虽然它的麻烦多于它的价值：

编写一个脚本来测试每个元素的宽度/高度/xy 位置是否等于元素的某些定义值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T10:03:19.150

我也支持布局图像外观徽标的 UI 自动化的观点，例如。我有很多这样的情况，其中基于登录类型等显示特定的 ui 元素，但投资是乏味的，改变可能会适得其反

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T15:45:35.717

嗨，要自动化网络浏览器，您可以使用 selenium (http://seleniumhq.org/) 例如查看用户单击的位置等...要验证 html，您可以找到一个接受一批页面并通过验证运行它们的验证器... 像[http://www.htmlhelp.com/tools/validator/](http://www.htmlhelp.com/tools/validator/)或类似的东西

希望有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T16:26:21.577

Selenium 可用于检查网站的外观。

使用验证，断言命令来测试这个

此外，QTP 也可以用于相同的目的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-03T20:34:54.703

您为什么不尝试图像比较，尝试捕获屏幕截图并将其与存档图像进行比较。 [C# - 捕获活动窗口的屏幕截图](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)

# apache-flex - 如何使此代码从 url 下载文件数组

> ID：13090081
> 
> 赞同：0
> 
> 时间：2012-10-26T15:41:59.820
> 
> 标签：apache-flex, air, download, mp3, resume-download

我正在尝试使此代码可恢复并再次下载一系列 URL，但我很挣扎。该代码似乎只下载了最后一个文件，但忽略了第一个文件。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" applicationComplete="init(event)" viewSourceURL="srcview/index.html">
    <mx:Script>
        <![CDATA[

            import flash.events.Event;
            import flash.events.ProgressEvent;
            import flash.net.URLRequest;
            import flash.net.URLStream;
            import flash.utils.ByteArray;
            import mx.controls.Alert;
            import mx.events.FlexEvent;

            //Declear variables
            private var urlStream:URLStream;
            private var fData:ByteArray;
            private var bytesLoaded:Number = 0;
            private var totalBytesLoaded:Number = 0;
            private var bytesTotal:Number = 0;
            private var fileName:String = "";
            private var file:File;
            private var fileStream:FileStream = new FileStream;

            //initialize even listeners
            protected function init(event:FlexEvent):void{
                urlStream = new URLStream;
                urlStream.addEventListener(ProgressEvent.PROGRESS, onProgress);
                urlStream.addEventListener(Event.COMPLETE, onComplete);

                var letters:Array = ["http://www.khanhvanweb.com/Music/Spanish Guitar Toni Braxton.mp3","http://dropthebeat.tv/audio/ToniBraxton-Please.mp3"];

                for (var i:int = 0; i < letters.length; i++) {
                    trace("Element " + i + ": " + letters[i]);
                    fileInput.text = letters[i];

                startDownload();
                }

            }

            //Start Downloaing

        //  if (fileInput.text = ""){

            public function startDownload():void{
                bytesLoaded = 0;
                bytesTotal = 0;
                totalBytesLoaded = 0;

                var url:String = fileInput.text;
                var index:int = url.lastIndexOf('/');
                fileName = url.substring(index+1, url.length);

                var str1:String = "/Music/ClassicalShop.Net/";

            //  file = File.documentsDirectory.resolvePath(fileName);
                //'Save to classical muic directory
                file = File.userDirectory.resolvePath(String(File.userDirectory.url + str1 + fileName));

                status = file.url;

                if(file.exists) {
                    btn.label = 'Download';
                    mx.controls.Alert.show('Please remove "'+fileName+'" from your disk', 'File with the same name already exists');
                    return;
                }

                output.text += 'Downloading\n';

                urlStream.load( new URLRequest(url) );
                fData = new ByteArray;
                fileInput.enabled = false;

                fileStream.open(file, file.exists ? FileMode.APPEND:FileMode.WRITE); }

        //  }

            private function pauseDownload():void {
                output.text += 'Downloading is paused\n';
                if(urlStream.connected) {
                    fData.clear();
                    urlStream.readBytes(fData, fData.length);
                    urlStream.close();
                    fileStream.writeBytes(fData);

                    }

                fileStream.close();

                totalBytesLoaded += bytesLoaded;
                trace( "pause size:"+ totalBytesLoaded);

                }

            //Resume the Download
            private function resumeDownload():void {
                output.text += 'Downloading \n';
                output.text +='bytes='+totalBytesLoaded+'-'+bytesTotal + '\n';
                var header0:URLRequestHeader = new URLRequestHeader('range', 'bytes='+totalBytesLoaded+'-'+bytesTotal);

                var request:URLRequest = new URLRequest(fileInput.text);
                request.requestHeaders.push(header0);

                urlStream.load( request );

                fileStream.open(file, file.exists ? FileMode.APPEND:FileMode.WRITE);
                }

            //Set progress of the file download
            private function onProgress(event:ProgressEvent):void {
                bytesLoaded = event.bytesLoaded;
                if(bytesTotal == 0)
                    bytesTotal = event.bytesTotal;

                trace( "size:"+ bytesLoaded);

                progressBar.setProgress( (totalBytesLoaded + event.bytesLoaded) / bytesTotal, progressBar.maximum);

                if(urlStream.bytesAvailable == 0) return;
                if(urlStream.connected)
                    {
                    fData.clear();
                    urlStream.readBytes(fData, fData.length);
                    fileStream.writeBytes(fData);

                    }
                }

            //Action to take when the file has completed downloading
            private function onComplete(event:Event):void
                {
                output.text += 'Download complete\n';
                bytesLoaded = 0;
                bytesTotal = 0;
                totalBytesLoaded = 0;
                progressBar.setProgress(0, 1);

                if(urlStream.connected)
                    {
                    fData.clear();
                    urlStream.readBytes(fData, fData.length);
                    urlStream.close();
                    fileStream.writeBytes(fData);
                    }

                fileInput.enabled = true;
                btn.label = 'Download';
                fData = null;

                fileStream.close();

                System.gc();
                }

            //write the file to disk
            private function writeFile():void
                {

                output.text += 'Saving File\n';
                var fileStream:FileStream = new FileStream;
                fileStream.open(file, file.exists ? FileMode.APPEND:FileMode.WRITE);
                fileStream.writeBytes(fData);
                fileStream.close();
                output.text += 'File Saved\n';

                }

            private function btnClickHandler():void
                {

                if(bytesLoaded == 0)
                    {
                    btn.label = 'Pause';

                    startDownload();
                    }
                    else
                        {
                        if(urlStream.connected)
                            {
                            btn.label = 'Resume';
                            pauseDownload();
                            }
                            else
                                {
                                btn.label = 'Pause';
        resumeDownload();
    }}}
        ]]>
    </mx:Script>
    <mx:TextInput id="fileInput" y="15" left="67" right="10"/>
    <mx:Button id="btn" x="286" y="65" label="Download" click="btnClickHandler()"/>
    <mx:ProgressBar id="progressBar" x="67" y="65" 
                    mode="manual" minimum="0" maximum="1" label="Downloading %3%%"/>
    <mx:Label x="10" y="20" text="File URL"/>
    <mx:TextArea id="output" left="10" right="10" top="107" bottom="10"/>
    <mx:Button y="65" label="Clear Input" right="10" 
               enabled="{fileInput.text.length==0 ? false:fileInput.enabled}"
               click="fileInput.text = ''"/>
    <mx:Label x="67" y="46" 
              text="http://www.example.com/downloads/episode77.mp3" 
              color="#878787"/>
</mx:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T05:36:27.320

我不确定您是否在移动平台上尝试，但我们刚刚在 Android 上发布了我们新的 air 原生扩展，它是一个可恢复的多部分下载管理器。在这里查看：http: [//myappsnippet.com/download-manager-air-native-extension/](http://myappsnippet.com/download-manager-air-native-extension/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:09:36.740

这是因为您使用的是全局变量。当您启动一个新的 URLLoader/URLStream 时，它会关闭任何先前的请求并从新的请求开始。解决方案很简单。

```
public function startDownload( urlRequest:URLRequest ):void{
    var loader:URLLoader = new URLLoader();
    loader.load( urlRequest );
} 
```

显然，这只是基础知识，您需要添加其余代码，但您明白了。对于每个单独的文件，您需要一个完全独立的 URLRequest 和 URLLoader/URLStream，因此您必须在函数范围内创建它们，而不是在全局范围内。

如果您需要在 COMPLETE 或 PROGRESS 事件中获取 URLLoader，请查看 event.currentTarget 和 event.Target。

如果您不希望它们同时运行，您可以在 COMPLETE 处理程序中手动增加一个“计数”变量，并使用该计数属性来获取数组中的下一项。

# java - 为不同的 Web 应用程序绕过负载均衡器到特定服务器

> ID：13090082
> 
> 赞同：2
> 
> 时间：2012-10-26T15:42:02.587
> 
> 标签：java, http, tomcat, http-headers, load-balancing

我在负载平衡环境中有 2 个网络服务器，并且两个网络服务器都在它们的 tomcat 服务器中部署了 2 个网络应用程序。使用两个不同的域名来访问这两个 Web 应用程序。

我遇到了一种情况，我必须分别在两个 Web 服务器中为两个 Web 应用程序重新加载一些东西。所以我必须向每个网络服务器和每个网络应用程序发送 http 请求以重新加载（基本上我想绕过负载平衡器）。

有没有办法添加 HTTP 标头，以便我可以在运行时将请求发送到特定的网络服务器以获取特定的域名？或者有没有其他方法可以实现这一目标？

注意：这个 HTTP 请求可以从部署在任何一个网络服务器中的 java 代码发送。所以基本上我们可以假设它是本地网络中网络服务器之间的通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:06:19.000

这是我要尝试的解决方案。它似乎适用于一个小的概念证明，我将在实际应用中尝试。

解决方案：

1.  URL 应该是网络服务器的 IP 地址或服务器主机名。
    例如：http:///

2.  对于 HTTP 请求，将“Host”标头设置为您要访问的实际域名。就我而言，这是我在我的 tomcat 中部署的第二个 webapp (test.myapp2.com)。

3.  发送 HTTP 请求。

首先，当我在 Firefox 中尝试使用“海报”插件时它起作用了，但它在我的 Java 代码中不起作用。它也没有显示任何错误。它只是忽略了我设置的“主机”标题。Java 库限制覆盖某些请求标头值，“主机”就是其中之一。所以我必须明确地设置它来接受受限制的标头。

我的初始代码是：

```
URL url = new URL("http://<IP-ADDRESS>/");
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestProperty("Host", "test.myapp2.com");
BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream())); 
```

新修复：

```
String allowRestrictedHeader = System.getProperty("sun.net.http.allowRestrictedHeaders");
System.setProperty("sun.net.http.allowRestrictedHeaders", "true");
try {
    URL url = new URL("http://<IP-ADDRESS>/");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestProperty("Host", "test.myapp2.com");
    // use connection
    .
    .
    .
}
finally {
    if (allowRestrictedHeader == null) {
        System.clearProperty("sun.net.http.allowRestrictedHeaders");
    } else {
        System.setProperty("sun.net.http.allowRestrictedHeaders",
                allowRestrictedHeader);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T20:06:58.033

IMO这个问题很奇怪。
如果您有一个负载均衡器，这意味着您在 2 个后端服务器之间分配负载，即部署相同的应用程序并且必须保持**一致**，这意味着两个部分必须具有完全相同的数据库（因为可以从一台服务器为同一个客户端提供服务在一个连接或另一个连接中的下一个请求中，也取决于负载平衡器的配置）。
因此，在这种情况下，由于这两个部分*应该*是同步的，并且如果您发送具有某种解释的特定请求，则数据库本质上是*镜像*的，因此哪个服务器接收它并不重要。另一台服务器也应该明白，这个请求是因为数据被镜像而发出的。
即，只需在数据库中进行特定更新，并在数据库更新在其他服务器中可见时让服务器重新加载。
除非你没有使用负载均衡器或者你没有正确使用它......

并回答您的问题如何绕过负载均衡器。当您使用负载均衡器时，您可以使用“指向”负载均衡器的虚拟 IP 或特定域名，并且负载均衡器会重定向到可用服务器。因此，如果您直接使用服务器的 IP 而不是负载均衡器的 IP，则可以绕过负载均衡器。

# sockets - 用于听和读的不同端口

> ID：13090085
> 
> 赞同：0
> 
> 时间：2012-10-26T15:42:16.420
> 
> 标签：sockets, network-programming, p2p

我应该使用不同的端口在对等应用程序中进行监听和阅读吗？如果是这样，为什么不使用一个端口来听和读呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:52:04.283

如果您在谈论 TCP，则没有选择：接受的套接字使用与侦听端口相同的本地端口（如果需要，出站端口必须使用不同的端口）。如果您在谈论 UDP，则没有理由使用多个套接字，因此没有必要使用多个端口。所以两种情况的答案都是一样的：使用一个端口。

# hibernate - org.hibernate.type.TextType 和 Oracle

> ID：13090089
> 
> 赞同：7
> 
> 时间：2012-10-26T15:42:28.557
> 
> 标签：hibernate, postgresql, jpa, oracle11g

我们使用 Hibernate 作为 JPA 提供者，并且我们有一个带有标记为大对象字段的类

```
@Lob
@Type( type = "org.hibernate.type.TextType" )
private String someString; 
```

该列创建为

```
SOMESTRING            LONG() 
```

这与 PostgreSQL 和 MySQL 完美配合。持久化对象时使用 Oracle

```
entityManager.persist( object ); 
```

我们得到一个`org.hibernate.exception.GenericJDBCException: Could not execute JDBC batch update`例外。

删除`@Type( type = "org.hibernate.type.TextType" )`注释将解决 Oracle 的问题，但会引入 PostgreSQL 的编码问题，如[使用 Hibernate/PostgreSQL 无法将欧洲符号存储到 LOB 字符串属性中所述](https://stackoverflow.com/questions/9993701/cannot-store-euro-sign-into-lob-string-property-with-hibernate-postgresql)

我想知道如何定义一个大文本字段，以便 out 程序在 PostgreSQL 和 Oracle 上都可以工作。纯 JPA 解决方案将是最佳解决方案，但特定于 Hibernate 的解决方案也可以。

编辑：

真正的例外：

```
java.sql.BatchUpdateException: ORA-22295: cannot bind more than 4000 bytes data to LOB and LONG columns in 1 statement 
```

现在，我错过的异常解释了问题，实际上我坚持的对象比大字符串（至少一个长 DBID）还要多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-13T07:35:25.443

这对我有用。像这样扩展 PostgreSQL81Dialect：

```
public class MyPostgreSQL81Dialect extends PostgreSQL81Dialect
{

  @Override
  public SqlTypeDescriptor getSqlTypeDescriptorOverride(int sqlCode)
  {
    SqlTypeDescriptor descriptor;
    switch (sqlCode)
    {
      case Types.CLOB:
      {
        descriptor = LongVarcharTypeDescriptor.INSTANCE;
        break;
      }
      default:
      {
        descriptor = super.getSqlTypeDescriptorOverride(sqlCode);
        break;
      }
    }  
    return descriptor;
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-10T10:05:59.400

学分应该去其他地方（给用户称为：@liecno），但基于（他的）评论之一：[Postgres UTF-8 clob with JDBC](https://stackoverflow.com/questions/5043992/postgres-utf-8-clobs-with-jdbc)，可以通过以下方式简单地实现与 Oracle 和 Postgres 的兼容性：

```
@Lob
@Type(type="org.hibernate.type.StringClobType")
private String someString; 
```

**更新：**

好的，经过一些测试，我找到了更新的解决方案，适用于我的所有场景。由于`org.hibernate.type.StringClobType`已弃用（hibernate 4.2.x），我去了它的替代品：`org.hibernate.type.MaterializedClobType`.

```
@Lob
@Type(type="org.hibernate.type.MaterializedClobType")
private String someString; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:15:14.053

该错误意味着，Oracle 无法在一次更新中处理两列超过 4000 字节的列。在过去，Oracle 已经遇到过这个问题——我记得每个表只允许一个 LONG 列的版本。我想知道他们没有删除这个问题。（我不知道该表中是否真的有第二个 LONG 或 LOB 列，但我想会有一个。）

我认为删除`@Type`注释通常不能解决问题。在您的测试中，效果可能是只有不到 4000 个字节，但是对于其他数据，也可能会出现错误。

解决方案：我认为你已经将更新语句分成两个语句，就像我在这里画的那样（批量更新仍然是可能的）：

```
for (many rows) {
  object.setFirstLongColumn(...);
  persist(object);
  session.flush();
  object.setSecondLongColumn(...);
  persist(object);
  session.flush();
}
commit(); 
```

这`session.flush()`对于防止 Hibernate 更改可能干扰您的逻辑的数据库语句的顺序是必要的。

还有一件事：[LONG](http://docs.oracle.com/cd/A91202_01/901_doc/server.901/a90120/ch4_dep.htm#6690)在 Oracle 中已被弃用。如果你运气好，那么在数据库中用 LOB 替换 LONG 可以解决你的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T10:21:41.430

我遇到了[类似的问题](https://stackoverflow.com/questions/3719905/why-has-hibernate-switched-to-use-long-over-clob)，唯一的方法是扩展/自定义 Oracle 方言。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T14:45:23.263

```
@Lob
private String someString; 
```

告诉 Hibernate 将其视为“物化 CLOB”。由于 @Lob 注释而导致的 CLOB，因为我们必须从 CLOB 定位器中提取字符串/字符而具体化。

当我在这里说 CLOB 时，我的意思是 java.sql.Types.CLOB。所以JDBC类型代码。然而，Hibernate 在这里有另一个层次的间接性：方言。方言能够定义类型代码如何映射到物理数据库类型（用于模式导出、转换调用等）以及如何对 PreparedStatement/ResultSet 执行绑定/提取操作。PostgreSQL 方言将 Types.CLOB 映射到物理“文本”数据类型；Oracle 方言将其映射到物理 CLOB 数据类型；MySQL 方言将其映射到物理“longtext”数据类型。

# xcode - numberOfRowsInTableView 没有被调用

> ID：13090091
> 
> 赞同：1
> 
> 时间：2012-10-26T15:42:31.463
> 
> 标签：xcode, methods, nstableview

我正在设置一个基于视图的 NSTableView，但是没有调用方法 numberOfRowsInTableView。当我检查它是否被调用时，日志返回 nil。

我已经将我的 AppDelegate 设置为符合数据源和委托协议，并通过 IB 将它们连接到 AppDelegate。当应用程序完成加载时，将初始化我将提供表格的数组。

我的代码如下：

界面

```
#import <Cocoa/Cocoa.h>

@interface RLTAppDelegate : NSObject <NSApplicationDelegate, NSTableViewDataSource, NSTableViewDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet NSTableView *tableView;
@property (copy) NSArray *nameArray;

@end 
```

执行

```
#import "RLTAppDelegate.h"

@implementation RLTAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
  self.nameArray = [[NSArray alloc] initWithObjects:@"Ryan", nil];
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {

  return [self.nameArray count];
  NSLog(@"%lu", self.nameArray.count);
}

- (NSView *)tableView:(NSTableView *)tableView
   viewForTableColumn:(NSTableColumn *)tableColumn
              row:(NSInteger)row {

NSTextField *result = [tableView makeViewWithIdentifier:@"name" owner:self];
result.stringValue = [self.nameArray objectAtIndex:row];
return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:00:59.823

我刚刚做了一个测试项目，看看发生了什么。

如果你在`applicationDidFinishLaunching`和 上放置一个断点，`numberOfRowsInTableView`你会看到在收到通知`numberOfRowsInTableView`之前调用了该方法。`applicationDidFinishLaunching`

因此，您在填充数组之前要求它。

Normally, you'd have a separate class where this happens and you set up the array when that class in initialised, so this doesn't happen.

# c# - BeginInvoke 声称控件的窗口句柄尚未创建，即使我认为它是

> ID：13090097
> 
> 赞同：3
> 
> 时间：2012-10-26T15:43:12.987
> 
> 标签：c#, winforms, begininvoke

在我的表单构造函数中，我调用：

```
InitializeComponent(); // boilerplate placed by VS, initializing controls
label1.BeginInvoke(new InvokeDelegate(RefreshLabelDelegate)); 
```

然而，我得到了可怕的异常消息：

> “在创建窗口句柄之前，不能在控件上调用 Invoke 或 BeginInvoke”

AFAIK，都是同一个线程，为什么会出现异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T15:46:56.883

`label1.BeginInvoke`从构造函数移动到`Form_Load`事件处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T15:52:57.507

本机窗口句柄不会*在*构造函数中创建。直到稍后，在调用表单的 Show() 方法之后才会发生这种情况。以典型的 .NET 懒惰方式。Load 事件是创建后运行的第一个标准事件。还有 HandleCreated 事件，但它可能会运行不止一次。

您实际上不太可能在此处使用 BeginInvoke，它旨在用于让代码在创建 Label1 控件的线程上运行。构造函数应该已经在该线程上运行，如果不是，它是非常不健康的。如果打算绘制标签，则改用表单的 Shown 事件，在表单之后运行的第一个事件实际上对用户可见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T15:53:36.563

句柄还没有创建（你为什么说它是）。句柄不是在构造时创建的——它是延迟的。您可以通过访问控件的`.Handle`属性来强制创建句柄来解决此问题。

以下内容可能会有所帮助：

*   [http://ikriv.com/en/prog/info/dotnet/MysteriousHang.html](http://ikriv.com/en/prog/info/dotnet/MysteriousHang.html)
*   [跨线程操作无效，即使使用 InvokeRequired](https://stackoverflow.com/questions/4463871/cross-thread-operation-not-valid-even-if-using-invokerequired)
*   [在创建窗口句柄之前，不能对控件调用 Invoke 或 BeginInvoke](https://stackoverflow.com/questions/808867/invoke-or-begininvoke-cannot-be-called-on-a-control-until-the-window-handle-has)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:55:29.403

不要调用 BeginInvoke，没有理由。在控件的构造函数中，您最好已经在适当的 UI 线程上。

# javascript - 遍历文件夹

> ID：13090098
> 
> 赞同：4
> 
> 时间：2012-10-26T15:43:13.047
> 
> 标签：javascript, html, iteration

我有一个项目列表，所有项目都用 div 包装，每个项目都在一个`<p>`标签内。我需要添加一个

```
<a href="../Filepath/Followed by, in numerical order, 7.html ---> all the way through infinity. 
```

因此，例如，如果我有 100 件物品都带有

```
<p> 
```

标签，那么我想要一个匹配的数量

```
<a href> 
```

要生成的标签。

我认为循环将是一个不错的解决方案，但无法提出使其工作的方案。

我确实从代码开始，这就是我迄今为止想出的。请记住，我将所有 html 文件存储在我通过脚本访问的文件夹中。所有这些都从 7 ++ ...

**HTML**

```
<div class="container">
<p>Textual description of item</p> 
...
</div> 
```

**Javascript**

```
$(document).ready(function() {
var files = {'.html':100};
var pageName = "";
var html = "", src;
for (var ext in files){
for (var i = 0; i < files[ext]; i++){
     src = "../Filepath/[i]/" + pageName + "-" + (i+1) + "." + ext;
     html += '<a href="'+src+'"></a>';
}

$("container").prepend(html);
}}); 
```

（脚本未完成，如果您有更好的方法，请随时完全更改它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:45:01.667

这条线

```
src = "../Filepath/[i]/" + pageName + "-" + (i+1) + "." + ext; 
```

应该是

```
src = "../Filepath/[" +i + "]/" + pageName + "-" + (i+1) + "." + ext; 
```

# php - notify_url 未达到或可能是沙盒贝宝中的错误响应

> ID：13090099
> 
> 赞同：0
> 
> 时间：2012-10-26T15:43:14.280
> 
> 标签：php, paypal, paypal-ipn

我正在我的网站中应用贝宝结帐流程。我想在成功付款后更新数据库。我提供了正确的 notify_url 但从未调用过此 url，但我已在 Sandbox Paypal 中成功付款。我已经放一个电子邮件地址，用于检查函数 updatePayments() 是否被调用，但在贝宝响应后没有收到邮件。

我正在使用的代码如下：-

索引.html

```
<form class="paypal" action="payments.php" method="post" id="paypal_form" target="_blank">    
    <input type="hidden" name="cmd" value="_xclick" /> 
    <input type="hidden" name="no_note" value="1" />
    <input type="hidden" name="lc" value="UK" />
    <input type="hidden" name="currency_code" value="GBP" />
    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynow_LG.gif:NonHostedGuest" />
    <input type="hidden" name="first_name" value="Ankush"  />
    <input type="hidden" name="last_name" value="Kalia"  />
    <input type="hidden" name="payer_email" value="a1p_ramesh@yahoo.com"  />
    <input type="hidden" name="item_number" value="6789" / >
    <input type="submit"  value="Submit Payment"/>
</form> 
```

付款.php

```
<?php
// Database variables
$host = "localhost"; //database location
$user = "amarhost_mypay"; //database username
$pass = "problem_12345"; //database password
$db_name = "amarhost_paypal_ipn"; //database name

// PayPal settings
$paypal_email = 'akaash_1351258109_biz@gmail.com';
$return_url = 'http://50.116.97.120/~amarhost/paypal2/payment-successful.htm';
$cancel_url = 'http://50.116.97.120/~amarhost/paypal2/payment-cancelled.htm';
$notify_url = 'http://50.116.97.120/~amarhost/paypal2/payments.php';

$item_name = 'Test Item';
$item_amount = 5.00;

// Include Functions
include("functions.php");

//Database Connection
$link = mysql_connect($host, $user, $pass);
mysql_select_db($db_name);

// Check if paypal request or response
if (!isset($_POST["txn_id"]) && !isset($_POST["txn_type"])){

    // Firstly Append paypal account to querystring
        $querystring .= "?notify_url=".urlencode($notify_url)."&";
    $querystring .= "business=".urlencode($paypal_email)."&";

    // Append amount& currency (£) to quersytring so it cannot be edited in html

    //The item name and amount can be brought in dynamically by querying the $_POST['item_number'] variable.
    $querystring .= "item_name=".urlencode($item_name)."&";
    $querystring .= "amount=".urlencode($item_amount)."&";

    //loop for posted values and append to querystring
    foreach($_POST as $key => $value){
        $value = urlencode(stripslashes($value));
        $querystring .= "$key=$value&";
    }

    // Append paypal return addresses
    $querystring .= "return=".urlencode(stripslashes($return_url))."&";
    $querystring .= "cancel_return=".urlencode(stripslashes($cancel_url));

    // Append querystring with custom field
    //$querystring .= "&custom=".'123';

    // Redirect to paypal IPN
    header('location:https://www.sandbox.paypal.com/cgi-bin/webscr'.$querystring);
    exit();

}else{

    // Response from Paypal

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $value = preg_replace('/(.*[^%^0^D])(%0A)(.*)/i','${1}%0D%0A${3}',$value);// IPN fix
        $req .= "&$key=$value";
    }

    // assign posted variables to local variables
    $data['item_name']          = $_POST['item_name'];
    $data['item_number']        = $_POST['item_number'];
    $data['payment_status']     = $_POST['payment_status'];
    $data['payment_amount']     = $_POST['mc_gross'];
    $data['payment_currency']   = $_POST['mc_currency'];
    $data['txn_id']             = $_POST['txn_id'];
    $data['receiver_email']     = $_POST['receiver_email'];
    $data['payer_email']        = $_POST['payer_email'];
    $data['custom']             = $_POST['custom'];

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    $fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 

    if (!$fp) {
        // HTTP ERROR
    } else {    

        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            if (strcmp($res, "VERIFIED") == 0) {

                // Used for debugging
                //@mail("you@youremail.com", "PAYPAL DEBUGGING", "Verified Response<br />data = <pre>".print_r($post, true)."</pre>");

                // Validate payment (Check unique txnid & correct price)
                $valid_txnid = check_txnid($data['txn_id']);
                $valid_price = check_price($data['payment_amount'], $data['item_number']);
                // PAYMENT VALIDATED & VERIFIED!
                if($valid_txnid && $valid_price){
                                        $to = "a1p_ramesh@yahoo.com";
$subject = "Test mail";
$message = "Hello! This is a simple email message.";
$from = "someonelse@example.com";
$headers = "From:" . $from;
mail($to,$subject,$message,$headers);               
                    $orderid = updatePayments($data);       
                    if($orderid){                   
                        // Payment has been made & successfully inserted into the Database                              
                    }else{                              
                        // Error inserting into DB
                        // E-mail admin or alert user
                    }
                }else{                  
                    // Payment made but data has been changed
                    // E-mail admin or alert user
                }                       

            }else if (strcmp ($res, "INVALID") == 0) {

                // PAYMENT INVALID & INVESTIGATE MANUALY! 
                // E-mail admin or alert user

                // Used for debugging
                //@mail("you@youremail.com", "PAYPAL DEBUGGING", "Invalid Response<br />data = <pre>".print_r($post, true)."</pre>");
            }       
        }       
    fclose ($fp);
    }   
}
?> 
```

函数.php

```
<?php
// functions.php
function check_txnid($tnxid){
    global $link;
    return true;
    $valid_txnid = true;
    //get result set
    $sql = mysql_query("SELECT * FROM `payments` WHERE txnid = '$tnxid'", $link);       
    if($row = mysql_fetch_array($sql)) {
        $valid_txnid = false;
    }
    return $valid_txnid;
}

function check_price($price, $id){
    $valid_price = false;
    //you could use the below to check whether the correct price has been paid for the product

    /* 
    $sql = mysql_query("SELECT amount FROM `products` WHERE id = '$id'");       
    if (mysql_numrows($sql) != 0) {
        while ($row = mysql_fetch_array($sql)) {
            $num = (float)$row['amount'];
            if($num == $price){
                $valid_price = true;
            }
        }
    }
    return $valid_price;
    */
    return true;
}

function updatePayments($data){ 
    global $link;
    if(is_array($data)){                
        $sql = mysql_query("INSERT INTO `payments` (txnid, payment_amount, payment_status, itemid, createdtime) VALUES (
                '".$data['txn_id']."' ,
                '".$data['payment_amount']."' ,
                '".$data['payment_status']."' ,
                '".$data['item_number']."' ,
                '".date("Y-m-d H:i:s")."' 
                )", $link);
    return mysql_insert_id($link);
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:50:46.410

您必须登录 akaash_1351258109_biz@gmail.com 帐户（在 www.sandbox.paypal.com 下），转到帐户设置、个人资料、即时付款通知设置

（https://www.sandbox.paypal.com/us/cgi-bin/webscr?cmd=_profile-ipn-notify）

并确保已启用此功能。

PayPal 会在多次失败后自动将其关闭，并禁用该帐户的*所有*IPN，无论您是否在 API 调用中指定了它。

# python - 在python中用另一个可重用的方法和参数模拟一个方法

> ID：13090104
> 
> 赞同：1
> 
> 时间：2012-10-26T15:43:35.520
> 
> 标签：python, django, mocking

我有一个要使用模拟测试的实例方法。我试图用另一个带参数的方法替换这个实例类中的一个方法。

要测试的类：

```
class ClassToTest():
    def compute(self):
        result = self._get_xml()
        return result

    def _get_xml(self):
        #get xml here
        return xml 
```

测试文件：

```
from mock import patch
class ClassTest():

    @patch('classToTest._get_xml', _get_fake_xml)
    def computetest(self):
        test = ClassToTest()
        toassert = test.compute()

        #assert whatever
        #self.assert(...)

    def _get_fake_xml(self, objects, filename):
        py_file = os.path.abspath(__file__)
        py_dir = os.path.dirname(py_file)
        xml_file = os.path.join(py_dir, filename)
        xml_tree = objectify.parse(xml_file)
        return xml_tree.getroot()
        return xml 
```

现在如何在补丁中添加 _get_fake_xml 方法的参数

我试过了 ：

```
@patch('classToTest._get_xml', _get_fake_xml(mock.Mock(), 'filenam.xml')) 
```

但这没有用。然后我尝试将文件名设为全局变量，但出现以下错误：

ClassToTest 实例中不存在 self.filename。

基本上我希望能够将 _get_fake_xml 与任何其他文件名重用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:15:53.313

所以，经过一番思考，我决定使用mock .return_value。

```
@patch('classToTest._get_xml')
    def computetest(self, get_xml):
        get_xml.return_value = _get_fake_xml('filenam.xml')
        test = ClassToTest()
        toassert = test.compute() 
```

我想知道是否有办法在补丁装饰器中添加参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:29:21.500

你能把它放在一个闭包里吗？您可以从您的`_get_fake_xml`方法中返回一个仍然可以访问`_get_fake_xml`' 范围的函数，如下所示：

```
from mock import patch
class ClassTest():

    @patch('classToTest._get_xml', _get_fake_xml(mock.Mock(), 'filenam.xml'))
    def computetest(self):
        test = ClassToTest()
        toassert = test.compute()

        #assert whatever
        #self.assert(...)

    def _get_fake_xml(self, objects, filename):
        py_file = os.path.abspath(__file__)
        py_dir = os.path.dirname(py_file)
        xml_file = os.path.join(py_dir, filename)
        xml_tree = objectify.parse(xml_file)
        # don't know much about mock, but I include *a in case this is passed self
        return lambda *a: xml_tree.getroot() 
```

# android - 奇怪的行为 ScaleAnimation setFillAfter(true) / false

> ID：13090116
> 
> 赞同：2
> 
> 时间：2012-10-26T15:43:56.277
> 
> 标签：android, animation, matrix, touch, imageview

我们正在使用 TouchImageView 并希望实现 onDoubleTap 缩放......到目前为止一切顺利。

问题是：

如果我们应用**缩放动画**并设置**setFillAfter(false)**，在 AnimationListener.onAnimationEnd 中，我们将**正确的矩阵**应用到图像视图，**一切都按预期工作**（滚动、其他缩放手势等）。-> 但是 - 你会在屏幕上看到一个小的闪烁（这是可以理解的 - 因为动画会跳回到开头，然后会应用矩阵更改）

**另一方面**，如果**setFillEnabled(true)**，动画看起来很棒，没有闪烁，但不知何故，**视图完全搞砸了**，起初一切看起来都很好，但**最大和最小缩放级别完全搞砸了**- 你不能缩小不再进行初始缩放，并且**移动图片**也无法按预期工作-边框是错误的吗？类似的东西）

**所以我们的问题;)？** - 带有 setFillAfter(true) 的 ScaleAnimation 实际上做了什么？
- 它会改变（完整）图像视图的大小吗？
- 出了什么问题：/？

一如既往，非常感谢您的帮助:=) 干杯，

//顺便说一句：这发生在所有**android 版本 <= 4**中，在 4.1 上，所描述的问题不会发生并且everyhting 按预期工作。

**---------------**
**更新：**
所以当前代码是这样的，可以工作，（缩放不再有问题）但在设置矩阵和清除动画之间有一个小的“闪烁”（虽然）代码显示，它应该在动画被清理之前应用矩阵**，**所以我希望无缝过渡......
**谢谢你的回复！** 

```
 Log.v("TouchImageView", "Zoom in");
            ScaleAnimation zoomIn = new ScaleAnimation(saveScale, SCALE_DOUBLE_TAP, saveScale, SCALE_DOUBLE_TAP, width / 2, height / 2);
            zoomIn.setDuration(200);
            zoomIn.setFillAfter(true);
            zoomIn.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    isAnimating = true;
                    saveScale = SCALE_DOUBLE_TAP;
                    right = width * saveScale - width - (2 * redundantXSpace * saveScale);
                    bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
                }

                @Override
                public void onAnimationRepeat(Animation animation) {

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    isAnimating = false;
                    matrix.postScale(SCALE_DOUBLE_TAP, SCALE_DOUBLE_TAP, width / 2, height / 2);
                    matrix.getValues(matrixValues);
                    setImageMatrix(matrix);
                    clearAnimation();
                }
            });

            startAnimation(zoomIn); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T15:54:36.523

`setFillAfter(true)`会假装它实际上是缩放的，我建议将它与矩阵缩放结合使用。在动画结束时应用矩阵并调用应用`clearAnimation()`了`View`动画的 。这应该可以解决闪烁问题。

# jquery - 需要 Google Map InfoWindow 超链接以在 Overlay 中打开内容（Fusion Table Usage）

> ID：13090122
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:44:38.360
> 
> 标签：jquery, google-maps, fancybox, google-fusion-tables, fancybox-2

我建立了以下代码来在我的站点中呈现地图。在任何区域单击地图时，会弹出一个信息窗口，其中包含一些内容，包括用于打开包含表单的网站的超链接。我想利用fancybox在叠加层中打开这个链接“表单”。我没有成功让 Fancybox 工作（版本 1.3.4），并且读到它不支持从 iframe 中调用该函数。我想知道这是否是问题所在，以及是否有其他方法可以利用fancybox（或其他叠加选项）？也许是一个事件监听器或回调 - 任何提示将不胜感激！

```
<style>
    #map-canvas { width:850px; height:600px; }
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

<script src="http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/src/fusiontips.js" type="text/javascript"></script>

<script type="text/javascript">
    var map;
        var tableid = "1nDFsxuYxr54viD_fuH7fGm1QRZRdcxFKbSwwRjk";
    var layer;
    var initialLocation;
    var browserSupportFlag =  new Boolean();
    var uscenter = new google.maps.LatLng(37.6970, -91.8096);

    function initialize() {
        map = new google.maps.Map(document.getElementById('map-canvas'), {
            zoom: 4,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });
        layer = new google.maps.FusionTablesLayer({
            query: {
                select: "'Geometry'",
                from: tableid
            },
            map: map
        });

                //http://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/docs/reference.html
                layer.enableMapTips({
                    select: "'Contact Name','Contact Title','Contact Location','Contact Phone'", 
                    from: tableid,
                    geometryColumn: 'Geometry',
                    suppressMapTips: false,
                    delay: 500,
                    tolerance: 8
                });
            ;
        // Try W3C Geolocation (Preferred) 
        if(navigator.geolocation) {
            browserSupportFlag = true;
            navigator.geolocation.getCurrentPosition(function(position) {
                initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                map.setCenter(initialLocation);

                                //Custom Marker
                                var pinColor = "A83C0A";
                    var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
                        new google.maps.Size(21, 34),
                        new google.maps.Point(0,0),
                        new google.maps.Point(10, 34));
                                var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
                        new google.maps.Size(40, 37),
                        new google.maps.Point(0, 0),
                        new google.maps.Point(12, 35));

                new google.maps.Marker({
                    position: initialLocation,
                    map: map,
                                        icon: pinImage,
                                        shadow: pinShadow
                });
            }, function() {
                handleNoGeolocation(browserSupportFlag);
            });
        }
        // Browser doesn't support Geolocation
        else {
            browserSupportFlag = false;
            handleNoGeolocation(browserSupportFlag);
        }

        function handleNoGeolocation(errorFlag) {
            if (errorFlag == true) {
                //Geolocation service failed
                initialLocation = uscenter;
            } else {
                //Browser doesn't support geolocation
                initialLocation = uscenter;
            }
            map.setCenter(initialLocation);
        } 
    }

google.maps.event.addDomListener(window, 'load', initialize);

</script> 
```

通过升级到 Fancybox 版本 2 解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:57:31.443

查看您的[演示站点](https://sitepreview.na14.force.com/?previewAuth=1kgEiTlvE4rLDhjw7T4IuzA_DM1XVQ0hA67fExiaFsCyLQKnyabcFnTr.0HmpBZlZ4MDmiA%3D%3DA)，我认为您需要解决一些问题。

**首先**，此代码应该适用于您的方案

```
$(document).ready(function(){
  $("a.form-modal").fancybox({
 // I would suggested to set some dimensions to the iframe (try without them first if you want)
    width: 640, // or whatever
    height: 320, 
    type : "iframe"
  });
}); // ready 
```

*请注意*，我无视*Dr.Molle*`.on()`建议的使用，因为您似乎正在使用 Fancybox v2.x，它使用了该方法。*`live`*

 ***第二**：根据您使用的版本链接正确的 Fancybox 的 CSS 样式表...当前，当您使用 fancybox v2.1.3 时，您正在链接到一个[fancybox v1.3.4 CSS 样式表](https://sitepreview.na14.force.com/jquery.fancybox-1.3.4.css?v=38&SiteID=0DMd0000000PLRT)

**第三**：使用 jQuery 的单个实例（最好是最新版本）。目前您正在加载两个，[v1.5.2](https://sitepreview.na14.force.com/sfsites/assets/Scripts/jquery/jquery.js?r=1.201210231947310162)和[v1.7](https://sitepreview.na14.force.com/jquery-1.7.js?v=1&r=1.201210231947310162)

...还要确保在任何其他 js 插件之前加载 jQuery，这样您就可以避免这种类型的 js 错误

```
Timestamp: 26/10/2012 11:54:49 AM
Error: TypeError: jQuery("ul.sf-menu").superfish is not a function
Source File: https://sitepreview.na14.force.com/contact-us
Line: 756 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:57:56.093

这对我有用（使用 fancybox2 ）

```
jQuery(function($){
 $('#map-canvas')
  .on('click',
      'a.video-modal',
      function(e){
        e.preventDefault();
        $(this).data('fancybox-type','iframe');
        $.fancybox(this);
     });
  }); 
```

所有链接都具有相同的类（视频模式），因此您只需：

1.  观察点击这些链接以及何时发生：
2.  将`data-fancybox-type`链接设置为“iframe”
3.  通过提供链接对象作为参数打开fancybox*

# ruby-on-rails - 如何在 RoR 上调试 Web 服务器？

> ID：13090124
> 
> 赞同：1
> 
> 时间：2012-10-26T15:44:57.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3, debugging, thin, webrick

我目前有一个项目的问题。

它在显示“Started GET ....”之前冻结，似乎遇到了无限循环。

现在我对 ROR 中的调试器并没有太多经验，任何人都可以推荐任何我可以用来追踪问题的确切根源的东西。如果我能在某处得到错误代码，那么我可能能够修复它。

目前我正在使用 webrick，我尝试过瘦，它给出了完全相同的错误。但我愿意使用任何东西来找到这个错误的确切来源。

它似乎与该项目有关，因为所有其他项目在我的环境中都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:50:43.933

查看[Rails 调试指南](http://guides.rubyonrails.org/debugging_rails_applications.html)。

也尝试运行 Rails 控制台（“rails c”）；如果您完全可以进入命令提示符，这意味着问题不在于加载 Rails 环境（例如 application.rb 中的问题），而在于发出 Web 请求的过程中的某个地方。如果出现故障，它可能会为您提供更好的错误消息。

# php - wordpress 帖子中的 the_excerpt 和 the_content 导致错误

> ID：13090126
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:45:01.007
> 
> 标签：php, wordpress, content-management-system

我正在使用**wordpress 最新版本**，即使我对包含 href 链接的帖子有问题，它是调用 the_excerpt 时的文本（链接不起作用）但是当我替换 the_content 时它的工作原理？为什么以及从摘录到内容的原因是什么......'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:48:56.210

这是因为 the_excerpt 函数不保留 HTML 标签。尝试以下解决方案

[http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-preserve-html-tags-in-wordpress-excerpt-without-a-plugin/](http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-preserve-html-tags-in-wordpress-excerpt-without-a-plugin/)

[http://aaronrussell.co.uk/legacy/improving-wordpress-the_excerpt/](http://aaronrussell.co.uk/legacy/improving-wordpress-the_excerpt/)

或使用插件

[http://wordpress.org/extend/plugins/advanced-excerpt/](http://wordpress.org/extend/plugins/advanced-excerpt/)

# php - 更改相关对象的保存顺序

> ID：13090132
> 
> 赞同：0
> 
> 时间：2012-10-26T15:45:19.160
> 
> 标签：php, symfony-1.4, propel

我有一个表，它*以一对多的*关系`product`链接到一个`product_image`表。在同一张桌子上，我也有 i18n 行为。这意味着另一个表 product_i18n 具有相同类型的关系，*一对多*。我正在使用 PropelORMPlugin (Propel 1.6)。默认情况下，它会在我的文件中生成以下方法。**`doSave``BaseProduct.php`**

 **```
protected function doSave(PropelPDO $con)
{
    $affectedRows = 0; // initialize var to track total num of affected rows
    if (!$this->alreadyInSave) {
        $this->alreadyInSave = true;

        // We call the save method on the following object(s) if they
        // were passed to this object by their coresponding set
        // method.  This object relates to these object(s) by a
        // foreign key reference.

        if ($this->aCategory !== null) {
            if ($this->aCategory->isModified() || $this->aCategory->isNew()) {
                $affectedRows += $this->aCategory->save($con);
            }
            $this->setCategory($this->aCategory);
        }

        if ($this->isNew() || $this->isModified()) {
            // persist changes
            if ($this->isNew()) {
                $this->doInsert($con);
            } else {
                $this->doUpdate($con);
            }
            $affectedRows += 1;
            $this->resetModified();
        }

        if ($this->productImagesScheduledForDeletion !== null) {
            if (!$this->productImagesScheduledForDeletion->isEmpty()) {
                ProductImageQuery::create()
                    ->filterByPrimaryKeys($this->productImagesScheduledForDeletion->getPrimaryKeys(false))
                    ->delete($con);
                $this->productImagesScheduledForDeletion = null;
            }
        }

        if ($this->collProductImages !== null) {
            foreach ($this->collProductImages as $referrerFK) {
                if (!$referrerFK->isDeleted()) {
                    $affectedRows += $referrerFK->save($con);
                }
            }
        }

        if ($this->productI18nsScheduledForDeletion !== null) {
            if (!$this->productI18nsScheduledForDeletion->isEmpty()) {
                ProductI18nQuery::create()
                    ->filterByPrimaryKeys($this->productI18nsScheduledForDeletion->getPrimaryKeys(false))
                    ->delete($con);
                $this->productI18nsScheduledForDeletion = null;
            }
        }

        if ($this->collProductI18ns !== null) {
            foreach ($this->collProductI18ns as $referrerFK) {
                if (!$referrerFK->isDeleted()) {
                    $affectedRows += $referrerFK->save($con);
                }
            }
        }

        $this->alreadyInSave = false;

    }

    return $affectedRows;
} 
```

`ProductI18n`保存 in `ProductImage`objects 表时（保存 a 时） ，我需要访问对象的属性`Product`。问题是对象是在对象**之后**`ProductI18n`保存的。这意味着当它是新的时属性为空（因为在保存基于其他一些属性的对象时填充了该属性）。有什么办法可以改变 Propel 生成相关对象的保存顺序吗？有没有其他方法可以在不重写方法的情况下完成这项工作？**`ProductImage``Product``ProductI18n``doSave`**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:14:24.040

虽然通过重新排序`foreign-key`架构文件中的条目可能有一个技巧来使其工作，但这可能是脆弱的（如果有人再次重新排序，您的代码会中断）。`postInsert`在类上使用钩子`ProductImage`并访问它的相关`ProductI18n`条目以获取 slug （如果它还没有）然后再次保存可能会更简单（如果效率不高）`ProductImage`。

```
class ProductImage extends BaseProductImage {
  ...
  public function postInsert(PropelPDO $con = null) {
    if (!$this->getSlug()) {
      // get the slug from ProductI18n and update $this, then call ->save();
    }
  }
  ...
} 
```****

# r - 在 R 或 gnuplot 中绘制具有相似比例的不同等高线图

> ID：13090133
> 
> 赞同：2
> 
> 时间：2012-10-26T15:45:25.007
> 
> 标签：r, gnuplot, contour

我是 R 绘图的新手，我希望为多个文件绘制等高线图。这就是我到目前为止所得到的。我的文件有 3 列，X、Y、Z，并带有一些 nan 值。由于 lattice 不允许 Inf/NaN 值，因此我必须事先删除它们，并进行一些插值。

```
data <- read.table("file", sep=",", header=T)
mydata <- na.omit(data)
library(akima)
library(lattice)
s = interp(mydata$X, mydata$Y, mydata$Z)
filled.contour(s, xlim= c(5,25), ylim=c(40,180)) 
```

这确实给出了一些结果，但有些事情我无法做到：

1.  获取图形上的等高线。
2.  还有像 3 个具有不同 z 范围的文件，例如 (0-18)、(0-20)、(0-25) 中的一个。我希望调整和重新缩放它们以在图形上提供相似的色标，例如，'15' 值应该在所有三个上都是相似的颜色。

我对 gnuplot 更熟悉，但问题也在于范围，因为范围总是自动缩放到颜色，而且似乎很难控制范围。对此的任何帮助也深表感谢。
我可能做错了什么，所以如果有人可以帮助我，并提供正确的方向或正确的软件，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:22:19.930

[这里](http://www.gnuplot.info/demo/contours.html)有关于如何在 gnuplot 中制作轮廓的演示。您是否有麻烦，因为您有代码可以制作等高线图但它不起作用？

要回答您的第二个问题，在 gnuplot 中您可能想要的命令是

```
set cbrange [CB_MIN:CB_MAX] 
```

这设置了将根据当前调色板着色的值范围。您只需`set cbrange`为您正在制作的所有三个地块发出相同的命令。如果要自动将所有文件的 cbrange 设置为 min/max，可以使用`stats`命令（在 4.6 或更高版本中，否则更棘手）：

```
stats 'datafile1' using 3 name 'd1'
stats 'datafile2' using 3 name 'd2'
stats 'datafile3' using 3 name 'd3'
datamin_z = (d1_min<d2_min&&d1_min<d3_min?d1_min:d2_min<d3_min?d2_min:d3_min)
datamax_z = (d1_max>d2_max&&d1_max>d3_max?d1_max:d2_max>d3_max?d2_max:d3_max)
set cbrange [datamin_z:datamax_z] 
```

# javascript - 用JS做cookie，IE麻烦

> ID：13090135
> 
> 赞同：0
> 
> 时间：2012-10-26T15:45:31.550
> 
> 标签：javascript, internet-explorer, cookies

我在使用 javascript 在 IE (8) 中制作 cookie 时遇到问题。当然，它适用于 IE 以外的任何其他浏览器。cookie 不会在 IE 中创建。

它看起来像这样：

```
document.cookie = 'my_name=my_value;expires=0;path=/my_project/;domain=localhost'; 
```

我希望过期为 0，我希望在用户关闭浏览器时将其删除。

谁能告诉我这里有什么问题？

# ios - 在 TransitionTo 上的 KineticJS 生涩旋转

> ID：13090137
> 
> 赞同：1
> 
> 时间：2012-10-26T15:45:36.220
> 
> 标签：ios, html, kineticjs

我正在使用 KineticJS 来旋转轮子，使其降落在特定点上。似乎发生在 iOS 上，每 1 秒转换一次。有没有办法提高渲染的性能？

```
var dir = 1;
if(direction == "left"){
     dir = -1;
}
var PI = Math.PI;
wheel.transitionTo({    
    rotation: ((degrees*PI/6) + (dir *10*PI)),
    duration:7,
    easing:"ease-out"
}) 
```

这是当前项目的链接：http: [//dev.hitpointstudios.com/sessionm_wheelspin/trunk/](http://dev.hitpointstudios.com/sessionm_wheelspin/trunk/)

笔记： - 这只是发生了。我在 Droid 2、HTC Inspire 和 Galaxy S2 上进行了测试，性能很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:22:40.520

调查这个。这是 requestAnimationFrame 方法的副作用，在该方法中浏览器控制动态帧速率。我目前正在研究实现一个可能更好控制的自定义 requestAnimationFrame 方法。

# youtube-api - 在 Win8 应用程序中销毁 iframe 播放器

> ID：13090139
> 
> 赞同：2
> 
> 时间：2012-10-26T15:45:38.983
> 
> 标签：youtube-api

我将 iframe 播放器嵌入到 Win8 Metro 应用程序中，并希望在未播放视频时删除播放器。

我目前用来执行此操作的代码是：

```
player.stopVideo();
player.destroy();
player = null; 
```

而且我继续收到一个错误，这使得脚本之后似乎仍在播放器上运行。

此外，我收到一个错误，即 Javascript 数组标识符和 isNaN 标识符未定义。

我是否正确使用了destroy API，是否有任何可能的原因导致这个奇怪的错误发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:03:18.127

Looks like is needed a trick to resolve this problem:

[http://markmail.org/message/cluuupb5nf34rooi](http://markmail.org/message/cluuupb5nf34rooi)

# php - MYSQL查询不改变，从同一列中的值更新值

> ID：13090142
> 
> 赞同：0
> 
> 时间：2012-10-26T15:45:51.867
> 
> 标签：php, mysql

我在另一篇文章中问了这个问题，该文章有一个基本查询，但在执行以下操作时仍然无法正常工作，没有任何想法？

```
UPDATE mage_catalog_product_entity_varchar 
  SET value = (SELECT value WHERE attribute_id = 703) 
  WHERE attribute_id = 106; 
```

因此，如果attribute_id 列= 106，我将更新值列中的值，但仅从attribute_id 列= 703 的值列更新

以下查询还更新了对应于attribute_id 106 的值字段中的0

```
UPDATE mage_catalog_product_entity_varchar 
  SET value = (SELECT value from mage_catalog_product_entity_varchar 
  WHERE attribute_id = 703) WHERE attribute_id = 106; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:48:07.433

您在子查询中缺少 From 子句。你能重新检查一次吗

```
UPDATE mage_catalog_product_entity_varchar 
  SET value = (SELECT value WHERE attribute_id = 703) 
  WHERE attribute_id = 106; 
```

应该是（如果直接在内部查询中使用，MYSQL不会更新表）

```
UPDATE mage_catalog_product_entity_varchar a, 
   mage_catalog_product_entity_varchar b
    SET a.value = b.value WHERE a.attribute_id = 106
     AND b.attribute_id = 703; 
```

您还可以在[SQL Fiddle 1上找到解决方案](http://sqlfiddle.com/#!2/4b3e4)

MySQL 报错“ **You can't specify target table 'table_name' for update in FROM Clause** ” 要了解更多关于这个错误的信息，你可以访问主题

[MySQL #1093 - 您不能在 FROM 子句中指定目标表“赠品”进行更新](https://stackoverflow.com/questions/8333376/you-cant-specify-target-table-table-name-for-update-in-from-clause)

如果您在讨论的表中有多个条目对应于属性 id 703，则查询将从插入的第一条记录中获取值，而另一个将被忽略。

你可以在这里看到这个条件[SQL Fiddle 2](http://sqlfiddle.com/#!2/745ce/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:14:57.667

您也可以在没有子选择的情况下将其作为相关更新来执行，例如

```
UPDATE mage_catalog_product_entity_varchar, 
       mage_catalog_product_entity_varchar WantFromHere
   SET value = WantFromHere.value
   WHERE attribute_id = 106
     AND WantFromHere.attribute_id = 703; 
```

但是，由于您的“其他”表是针对特定属性的，因此并不是真正的“JOIN”，因此我刚刚应用了您想要它的特定属性 ID 的 where 子句（即：703）。我不知道涉及多少条记录，但它确实阻止了要处理的每条记录的“子查询”。

# c++ - 我可以使用纯原生 C++ 为 Windows 8 Metro 编写应用程序吗？

> ID：13090147
> 
> 赞同：6
> 
> 时间：2012-10-26T15:46:23.477
> 
> 标签：c++, windows, windows-8, microsoft-metro

使用本机 c++，我的意思是，不是托管 c++，不是 cli，不是来自微软的任何特殊东西，我可以：

1) 获得高性能 2) 使用现有的 c++ 代码库和引擎 3) 编写跨平台代码（例如，用于 ios 和 android）

它不需要完全是原生 c++，我可以使用托管代码来做 ui 的事情，比如 ios 中的 object-c 和 android 中的 java，但是除了接口，我可以使用原生 c++ 代码吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T15:57:12.497

我建议您看一下这里的演示文稿：[使用 C++ 中的 Windows 运行时](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-532T#c634517976543836549)，尤其是 Herb Sutter 的评论。我引用：

> 请回答这个问题：如果我决定以 Metro 风格编写 C++ GUI 应用程序，我是否被迫对 GUI 组件使用所有这些专有的 ref、sealed、^、Platform::String^ 扩展？
> 
> @Tomas：不，您不会被迫使用它们。我们提供两种支持的方式：
> 
> 1) 这些语言扩展 (C++/CX)。
> 
> 2) C++ 模板库 (WRL)，请参阅 Yannick 提到的 Windows Kits\8.0\Include\winrt\wrl。WRL 是一种类似于 ATL 的基于 C++ 库的解决方案，它提供了我认为您正在寻找的东西——模板包装器/便利类和显式智能指针等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T09:37:51.690

是的，您绝对可以，完全支持真正的原生 C++。

但是，您确实必须使用新的 WinRT 库来执行用户界面或系统调用，尽管它们是本机代码并且可以直接从 C++ 完全调用，但它们的接口确实让这样做非常痛苦，因为一切都是引用计数COM 对象，此外，创建它们的实例并不像调用“new”那么容易，因此您必须编写*很多*丑陋的代码才能做到这一点。

正如前面的回答所说，微软提供了两种方法来帮助解决这个问题。一种是通过对 c++ 的语言扩展，另一种是 c++ 模板库。就我个人而言，我认为这两者对于做像调用 API 这样简单的事情都是相当丑陋的，但这只是我 :)

但是要回答您的问题，完全可以用真正的原生 C++ 编写您的应用程序。您根本不需要为任何事情使用托管代码。但是您可能希望使用语言扩展或模板库来更轻松地调用 API。

就我个人而言，我希望有人为 WinRT 编写一个包装器，将最必要的功能公开为一个更可用的 c++ 本机库，然后每个人都可以从 c++ 中使用它......

# javascript - 通过 PhoneGap 构建游戏

> ID：13090149
> 
> 赞同：0
> 
> 时间：2012-10-26T15:46:33.207
> 
> 标签：javascript, html, cordova, nui

我是整个 PhoneGap 的新手（在 Trigger.io 等其他解决方案中）。我对制作游戏很感兴趣，并且 NUI 与这些软件交互，但我不知道从哪里开始。有没有人有使用 PhoneGap 或类似产品制作此类产品的经验，如果有，是如何完成的？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:51:02.550

你像往常一样制作一个 HTML5/JavaScript 游戏，然后用 PhoneGap 包装它。

使用[Impact](http://impactjs.com/)或[CocoonJS](http://ludei.com/tech/cocoonjs)等框架可以帮助完成第一部分。

# javascript - jQuery插件在最后一个选定元素之后执行函数

> ID：13090155
> 
> 赞同：1
> 
> 时间：2012-10-26T15:47:05.167
> 
> 标签：javascript, jquery, html, plugins

我想做的是制作一个不需要 html 包装器的 jQuery 插件来查找我需要的元素，然后执行一个函数。

的HTML：

```
<div class="tscroll someotherbg"></div>
<div class="tscroll somebg"></div>
<div class="tscroll dia-left"></div>
​ 
```

的JavaScript：

```
$(".tscroll").tScroll(); 
```

并使用“tscroll”类收集所有元素，然后用它做一些事情。现在它的“构造函数”（由于缺乏更好的词，我有 AS3 背景）运行了 3 次。

也许这个小提琴会给你更多启发：http: [//jsfiddle.net/summer/kN9nb/6/](http://jsfiddle.net/summer/kN9nb/6/) （警告三个警报即将出现）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:15:37.930

您的插件按元素工作，因此当您运行`$(".tscroll").tScroll();`init 时，将为每个具有“tscroll”类的元素运行。更改插件的逻辑，使其像函数：

```
$.tScroll("tscroll"); 
```

所以这个函数将运行一次，你将有一个类来帮助你找到需要的元素。然后在 init 你会做

```
$(".tscroll").each(function (i, object){
    //your code per element here
}); 
```

# ios - simultor上的XCode编译时错误

> ID：13090156
> 
> 赞同：0
> 
> 时间：2012-10-26T15:47:05.463
> 
> 标签：ios, xcode

我正在尝试构建我的 XCode 项目，这就是我得到的。该项目在设备上运行良好，但无法在模拟器上运行。

![构建错误](../Images/47787e50c38377040a589d653c33cd8f.png)

有人可以解释一下为什么会这样。我已经尝试从项目中删除这个库并再次添加它。它仍然无法在模拟器上运行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:58:46.847

i386 是对您的开发机器使用的 Intel 处理器架构的引用（实际的 iOS 设备使用 ARM 处理器）。

该错误表明该库尚未构建为包含对 Intel 架构的支持。由于模拟器在桌面上运行，它需要英特尔支持才能运行。

您应该获取包含 i386 的库的副本，或者自己构建它。

这是可以完成的一种方法（对于需要添加 i386 支持的另一个库）

[http://www.federicocappelli.net/2012/10/05/zbar-library-for-iphone-5-armv7s/](http://www.federicocappelli.net/2012/10/05/zbar-library-for-iphone-5-armv7s/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:49:46.040

您需要找到 CkoCrypt2 在代码中的定义位置，并确保它是为模拟器构建的。

如果“CkoCrypt”是库或框架的一部分，那么您还需要编译该库以在模拟器下工作。

# jquery - 单击链接时注入提交按钮并提交表单

> ID：13090157
> 
> 赞同：-3
> 
> 时间：2012-10-26T15:47:09.913
> 
> 标签：jquery, html, forms

我有一个带有 id 和名称的表单。我想做的是当我点击一个链接时，在表单中注入一个 html 提交按钮，然后提交表单。这可以使用 jQuery 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T15:50:50.287

有很多方法可以做某事，但这里没有看到您的任何代码，这是 jQuery 中的一个通用示例，展示了如何通过单击`submit`带有.`id` `myForm``id` `myLink`

```
$(document).ready(function() {
    $('#myLink').click(function(e) {
        e.preventDefault();
        $('#myForm').submit();
    });
}); 
```

HTML：

```
<a href="#" id="myLink">submit the form</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:56:48.277

看看使用`.add()`or`.append()`方法。

[http://api.jquery.com/add/](http://api.jquery.com/add/)

[http://api.jquery.com/append/](http://api.jquery.com/append/)

您可以设置一个侦听器来处理添加按钮时的事件。

```
$(document).on('#btnSubmit', 'click', function() {
    // do something
}); 
```

如果需要，您还可以向`onclick`属性添加方法调用。

# jquery - Jquery在同一页面上的许多自动完成

> ID：13090159
> 
> 赞同：1
> 
> 时间：2012-10-26T15:47:14.707
> 
> 标签：jquery, html, jquery-ui, autocomplete

我正在尝试在 jsp 上制作的公式上实现 Jquery 的自动完成功能。

我对一个 textarea 没有任何问题，但对其中的许多都无法做到这一点。

这是我页面的代码：我使用推送来创建列表，因为数据是从 Java bean 导入的。此代码是运行应用程序后创建页面并使用 CTRL-U 捕获的结果。

```
 <script>
        $(function()
        {
            var TagsEntis = new Array();

                TagsEntis.push("MAIRIE");

                TagsEntis.push("COMMUNAUTE URBAINE");

                <!--Others pushs here-->

            $( "#tagsentis" ).autocomplete({source: TagsEntis});
        });
        </script>
        <script>
        $(function()
        {
            var TagsNames = new Array();

                TagsNames.push("CAPILLON");

                TagsNames.push("DUFOUR");

                TagsNames.push("STARON");

                <!--Others pushs here-->

            $( "#tagsnames" ).autocomplete({source: TagsNames});
        });
        </script> 
```

在使用这些标签定义 textareas 之后：

```
 <form method="post" action="form.htm" name="formulary">
                <table id="formulary">
                   <tr>
                        <td>
                            Entity
                        </td>
                        <td>
                            <spring:bind path="PersonForm.entity">
                                <input id="tagsentis" type="text" name="entity"
                                       value=""/>
                            </spring:bind>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            LastName
                        </td>
                        <td>
                            <spring:bind path="PersonForm.lastname">
                                <input id="tagsnames" type="text" name="lastname"
                                       value=""/>
                            </spring:bind>
                        </td>
                    </tr> 
```

此代码有效，但仅适用于姓氏文本区域。

你能帮我吗？

非常感谢你;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:22:43.607

您可以在此处找到[2 个自动完成输入字段](http://jsfiddle.net/d4tjZ/) （不是 textarea）的演示。您能否给 es 更多数据说明它是如何不工作的。[您是否在java-script 控制台](http://paulirish.com/2011/a-re-introduction-to-the-chrome-developer-tools/)中遇到任何错误

```
$(function() {
    var availFirstNames = [
        "Adam", "Anna", "Anita",
        "Bert", "Bob", "Chuck", "Claudia", "Douche", "Ernie",
        "Gib", "Henry", "Jesus", "John", "Lisp", "Perl",
        "PHP", "Python", "Ruby", "Scala", "Scheme"
    ];
    var availLastNames = availFirstNames;
    $( "#FirstName" ).autocomplete({
        source: availFirstNames
    });
    $( "#LastName" ).autocomplete({
        source: availLastNames
    });        
}); 
```

和 HTML

```
<div class="ui-widget">
    <label for="tags">Names: </label>
    <input id="FirstName" />
    <input id="LastName" />
</div>​ 
```

# c# - 使用 ASP.Net MVC 显示上传的图像并显示存储在数据库中的许多图像

> ID：13090161
> 
> 赞同：-3
> 
> 时间：2012-10-26T15:47:29.180
> 
> 标签：c#, asp.net-mvc, image-uploading

我正在使用 asp.net MVC 和 sql 服务器。我创建了一个页面，该页面从用户那里获取一些信息，例如名称、价格……以及一张图片，并且该页面重复了 30 次。这意味着每次用户提交公司所有信息保存到数据库和字段变得清晰，用户必须提交下一个信息。现在我希望每次用户提交表单时，页面都会在其旁边显示以前上传的图像。但我不知道如何显示上传的图像。而且我想知道如何显示所有以前的图像。请帮帮我，给我看一些代码！非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:57:20.393

如果您将图像作为图像数据类型存储在 SQL 中，我将使用自定义 http 处理程序在页面上显示图像。我使用类似的东西

```
public class ImageHandler : IHttpHandler
{
    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

    public void ProcessRequest(HttpContext context)
    {
        string imageid = context.Request.QueryString["ImID"];

        using (DataContext data = new DataContext())
        {
            var image = data.Products.Where(p => p.ID.ToString() == imageid).Select(p => p.Image).Single();
            context.Response.BinaryWrite((byte[])image.ToArray());
            context.Response.End();
        }
    }
} 
```

要显示图像，只需将图像 url 设置为

```
ImageHandler.ashx?ImID={Id of the database entry} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:23:30.440

chead23 的答案是完美的图像部分。如果您想从 mvc 控制器中执行此操作，请查看以下问题： [Write binary data as a response in an ASP.NET MVC web control](https://stackoverflow.com/questions/2732434/write-binary-data-as-a-response-in-an-asp-net-mvc-web-control)

Freyday 的回答完成了 cheads23 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:42:13.873

设置表单的方式非常繁琐且不切实际，我建议您实现类似[Flickr](http://flickr.com)的图像上传/编辑功能。

例如，有一个输入框，允许使用`SHIFT`/`CTRL`键选择多个图像，然后上传这些图像。在下一页上，您将拥有所有图像作为缩略图，并且要设置名称/价格，用户可以单击编辑，两个字段会出现一个提交按钮，您可以异步提交更改。

或者，您可以在每张照片下放置两个表单并使用一个提交按钮。

PS 首先，您需要向我们展示您的尝试，然后我们才能为您提供帮助。

# ruby-on-rails-3 - link_to 重定向到错误的控制器

> ID：13090165
> 
> 赞同：0
> 
> 时间：2012-10-26T15:47:37.367
> 
> 标签：ruby-on-rails-3

我的管理区域有一个名为 'layout_admin' 的布局。在'layout_admin'中，我有：

```
<li><%= link_to 'Contenu', :action=>'index', :controller=>'contents' %></li>
<li><%= link_to 'Petitions', :controller => 'petitions', :action => 'index' %></li> 
```

Contenu 的第一个链接工作正常，但第二个链接（用于请愿）让我遇到一个奇怪的错误：

> 路由错误没有路由匹配{:controller=>"admin/ **edito** "}

在地址栏中我有： localhost:3000/admin/petitions

在 routes.rb 我有：

```
namespace :admin do resources :petitions 
end 
```

我还必须指出，“edito”是管理区域之外的另一个控制器，它有一个操作“索引”。在 routes.rb 我有`get "edito/index"`关于edito_controller。

有人知道问题的根源吗？谢谢。

全耙路线：

```
 temoignages GET    /temoignages(.:format)              temoignages#index

                POST   /temoignages(.:format)              temoignages#create
 new_temoignage GET    /temoignages/new(.:format)          temoignages#new
edit_temoignage GET    /temoignages/:id/edit(.:format)     temoignages#edit
     temoignage GET    /temoignages/:id(.:format)          temoignages#show
                PUT    /temoignages/:id(.:format)          temoignages#update
                DELETE /temoignages/:id(.:format)          temoignages#destroy
admin_petitions GET    /admin/petitions(.:format)          admin/petitions#index
                POST   /admin/petitions(.:format)          admin/petitions#create
new_admin_petition GET    /admin/petitions/new(.:format)      admin/petitions#new
edit_admin_petition GET    /admin/petitions/:id/edit(.:format) admin/petitions#edit
 admin_petition GET    /admin/petitions/:id(.:format)      admin/petitions#show
                PUT    /admin/petitions/:id(.:format)      admin/petitions#update
                DELETE /admin/petitions/:id(.:format)      admin/petitions#destroy
 admin_contents GET    /admin/contents(.:format)           admin/contents#index
                POST   /admin/contents(.:format)           admin/contents#create
new_admin_content GET    /admin/contents/new(.:format)       admin/contents#new
edit_admin_content GET    /admin/contents/:id/edit(.:format)  admin/contents#edit
  admin_content GET    /admin/contents/:id(.:format)       admin/contents#show
                PUT    /admin/contents/:id(.:format)       admin/contents#update
                DELETE /admin/contents/:id(.:format)       admin/contents#destroy
    admin_posts GET    /admin/posts(.:format)              admin/posts#index

                POST   /admin/posts(.:format)              admin/posts#create
  new_admin_post GET    /admin/posts/new(.:format)          admin/posts#new
  edit_admin_post GET    /admin/posts/:id/edit(.:format)     admin/posts#edit
     admin_post GET    /admin/posts/:id(.:format)          admin/posts#show
                PUT    /admin/posts/:id(.:format)          admin/posts#update
                DELETE /admin/posts/:id(.:format)          admin/posts#destroy
                GET    /admin/posts(.:format)              admin/posts#index

                POST   /admin/posts(.:format)              admin/posts#create
                GET    /admin/posts/new(.:format)          admin/posts#new
                GET    /admin/posts/:id/edit(.:format)     admin/posts#edit
                GET    /admin/posts/:id(.:format)          admin/posts#show
                PUT    /admin/posts/:id(.:format)          admin/posts#update
                DELETE /admin/posts/:id(.:format)          admin/posts#destroy
  admin_backend_index GET    /admin/backend(.:format)            admin/backend#index
                POST   /admin/backend(.:format)            admin/backend#create
  new_admin_backend GET    /admin/backend/new(.:format)        admin/backend#new

  edit_admin_backend GET    /admin/backend/:id/edit(.:format)   admin/backend#edit
  admin_backend GET    /admin/backend/:id(.:format)        admin/backend#show
                PUT    /admin/backend/:id(.:format)        admin/backend#update
                DELETE /admin/backend/:id(.:format)        admin/backend#destroy
     lois_index GET    /lois/index(.:format)               lois#index
      lois_show GET    /lois/show(.:format)                lois#show
    edito_index GET    /edito/index(.:format)              edito#index
  reponses_index GET    /reponses/index(.:format)           reponses#index
  reponses_show GET    /reponses/show(.:format)            reponses#show
  lettres_index GET    /lettres/index(.:format)            lettres#index
   lettres_show GET    /lettres/show(.:format)             lettres#show
       accueils POST   /accueils(.:format)                 accueils#create
   new_accueils GET    /accueils/new(.:format)             accueils#new
  edit_accueils GET    /accueils/edit(.:format)            accueils#edit
                GET    /accueils(.:format)                 accueils#show
                PUT    /accueils(.:format)                 accueils#update
                DELETE /accueils(.:format)                 accueils#destroy
           root        /                                   accueil#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:39:26.737

查看您的左栏中的路线名称`rake routes`？使用该信息来构建对不同路径助手的调用：

```
<li><%= link_to 'Contenu', admin_contents_path %></li>
<li><%= link_to 'Petitions', admin_petitions_path %></li> 
```

一般来说，这就是您应该在 Rails 3+ 应用程序中构建 URL 的方式。

通读[Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html)了解更多信息（特别是[*2.3：路径和 URL*](http://guides.rubyonrails.org/routing.html#paths-and-urls)）。

**更新：**

您应该考虑`_path`在访问`/admin/petitions`.

我敢打赌，您在页面上有一个类似于此的链接：

```
<%= link_to "Link Text", :controller => "edito", :action => "index" %> 
```

它试图`edito`在`admin`命名空间中查找，因为这是您访问时在应用程序中的位置`/admin/petitions`。

要修复，您需要将其更新为如下所示：

```
<%= link_to "Link Text", edito_index_path %> 
```

`url_for`对应用程序中的所有链接、表单和引用进行清洗、冲洗和重复操作。

# iphone - 使用 RKObjectMapping 发送图像时出现 RestKit 映射错误

> ID：13090169
> 
> 赞同：1
> 
> 时间：2012-10-26T15:47:52.580
> 
> 标签：iphone, objective-c, ios, ipad, restkit

这是对象 RestKit 映射：-

```
 RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[ImageModel class]];

[mapping mapKeyPath:@"Description" toAttribute:@"description"];
[mapping mapKeyPath:@"Photo1"  toAttribute:@"photo1"];

[objectManager.mappingProvider addObjectMapping:mapping];

RKObjectMapping* serializeMapping = [mapping inverseMapping];
[objectManager.mappingProvider setSerializationMapping:serializeMapping forClass:[ImageModel class]];
[objectManager.router routeClass:[ImageModel class] toResourcePath:@"/image" forMethod:RKRequestMethodPOST];

[objectManager.mappingProvider setObjectMapping:mapping forResourcePathPattern:@"/image"]; 
```

这是 ImageModel 对象：-

```
@property  (strong,nonatomic) NSString *description; 
@property  (strong,nonatomic) UIImage *photo1; 
```

以下是我尝试过的三种不同方法，但都有错误：-

方法1。

只需使用以下代码发布对象。

```
obj.description = self.descriptionText.text;
obj.photo1 = selectedImage;
[[RKObjectManager sharedManager] postObject:obj delegate:self]; 
```

结果：- 对象被发布到服务器，服务器脚本返回相同的对象。客户端收到响应，但发生以下映射相关异常。

```
2012-10-26 20:16:39.015 APP[4548:7407] W restkit.object_mapping:RKObjectMappingOperation.m:244 Failed transformation of value at keyPath 'Photo1'. No strategy for transforming from '__NSCFString' to 'UIImage' 
```

日志确实显示返回对象的 Photo1 字段确实有照片数据，但是映射中遗漏的内容是无法理解的。RestKit 大师的任何想法都会非常有帮助！

方法 2 - 调用 sendObject:toResourcePath:usingBlock

```
[[RKObjectManager sharedManager] sendObject:self.obj toResourcePath:@"/image" usingBlock:^(RKObjectLoader *loader) {
    loader.targetObject = nil;
    loader.delegate = self;
    loader.method = RKRequestMethodPOST;

    if([obj photo1]){
        RKObjectMapping* serializationMapping = [[[RKObjectManager sharedManager] mappingProvider] serializationMappingForClass:[ImageModel class]];
        NSError* error = nil;
        NSDictionary* dictionary = [[RKObjectSerializer serializerWithObject:obj mapping:serializationMapping] serializedObject:&error];
        NSLog(@"%@", dictionary);
        RKParams* params = [RKParams paramsWithDictionary:dictionary];
        NSData* imageData =  UIImagePNGRepresentation([obj photo1]);
        [params setData:imageData MIMEType:@"image/png" forParam:@"Photo1"];
        loader.params = params;
    }
}]; 
```

结果：日志窗口中出现以下错误。

```
2012-10-26 20:32:15.327 APP[4627:c07] response code: 500
2012-10-26 20:32:22.388 APP[4627:c07] Loaded payload: {"Message":"An error has occurred."}
2012-10-26 20:32:27.878 APP[4627:c07] W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: ''
2012-10-26 20:32:27.878 APP[4627:c07] E restkit.network:RKObjectLoader.m:231 Encountered errors during mapping: Could not find an object mapping for keyPath: '' 
```

方法三

调用 postObject:usingBlock

```
[[RKObjectManager sharedManager] postObject:obj usingBlock:^(RKObjectLoader *loader){

    loader.delegate = self;

    RKParams* params = [RKParams params];
    [params setValue:obj.description forParam:@"Description"];
    [params setData:[app convertImageToNSData: [app photo1]] MIMEType:@"image/png" forParam:@"Photo1"];        
    loader.params = params;
}]; 
```

结果：- 日志窗口中出现以下异常。

```
2012-10-26 20:42:07.735 APP[4670:c07] response code: 500
2012-10-26 20:42:10.726 APP[4670:c07] Loaded payload: {"Message":"An error has occurred."}
2012-10-26 20:42:16.569 APP[4670:c07] W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: ''
2012-10-26 20:42:16.570 APP[4670:c07] E restkit.network:RKObjectLoader.m:231 Encountered errors during mapping: Could not find an object mapping for keyPath: ''
2012-10-26 20:42:16.570 APP[4670:c07] E restkit.network:RKObjectLoader.m:360 Encountered an error while attempting to map server side errors from payload: Could not find an object mapping for keyPath: '' 
```

显然我在映射中没有遗漏任何东西，但我可能是 . RestKit 专家可以帮助我使用这 3 种方法中的任何一种，以帮助我将在其中一个字段中具有图像的对象发送到服务器。

# c++ - UNICODE、UTF-8 和 Windows 混乱

> ID：13090175
> 
> 赞同：11
> 
> 时间：2012-10-26T15:48:17.623
> 
> 标签：c++, c, windows, unicode, utf-8

我正在尝试在 Windows 中实现文本支持，以便以后也迁移到 Linux 平台。以统一的方式支持国际语言是理想的，但在考虑到所讨论的两个平台时，这似乎并不容易实现。我花了相当多的时间阅读 UNICODE、UTF-8（和其他编码）、widechars 等，这是我到目前为止所理解的：

UNICODE 作为标准，描述了可映射的字符集及其出现的顺序。我将其称为“什么”：UNICODE 指定*可用*的内容。

UTF-8（和其他编码）指定*如何*：每个字符将如何以二进制格式表示。

现在，在windows上，他们最初选择了UCS-2编码，但不符合要求，所以他们有UTF-16，必要时也是多字符。

所以这是两难境地：

1.  Windows 内部仅支持 UTF-16，因此如果您想支持国际字符，则必须转换为它们的 Widechar 版本以相应地使用操作系统调用。似乎不支持使用多字节 UTF-8 字符串调用 CreateFileA() 之类的东西，并让它看起来正确。这个对吗？
2.  在 C 中，有一些支持多字节的函数（_mbscat、_mbscpy 等），但是在 Windows 上，这些函数的字符类型定义为 unsigned char*。鉴于 _mbs 系列函数不是一个完整的集合（例如，没有 _mbstol 将多字节字符串转换为长字符串），您被迫使用一些 char* 版本的运行时函数，由于这些函数之间的有符号/无符号类型差异，这会导致编译器问题。有人甚至使用这些吗？你只是做一大堆铸造来绕过错误吗？
3.  在 C++ 中，std::string 具有迭代器，但这些迭代器基于 char_type，而不是基于代码点。因此，如果我在 std::string::iterator 上执行 ++，我会得到下一个 char_type，而不是下一个代码点。类似地，如果你调用 std::string::operator[]，你会得到一个对 char_type 的引用，它很有可能不是一个完整的代码点。那么如何按代码点迭代 std::string 呢？（C 有 _mbsinc() 函数）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T16:07:09.807

只做UTF-8

每个平台都有很多 UTF-8 支持库，也有一些是多平台的。正如您已经注意到的那样，Win32 中的 UTF-16 API 是有限且不一致的，因此最好将所有内容保留在 UTF-8 中并在最后一刻转换为 UTF-16。Windows API 也有一些方便的 UTF-8 包装。

此外，在应用程序级别的文档中，UTF-8 越来越被接受为标准。每个文本处理应用程序要么接受 UTF-8，要么在最坏的情况下将其显示为“带有一些 dingbats 的 ASCII”，而只有少数应用程序支持 UTF-16 文档，而那些不支持的应用程序则显示为“很多很多”的空白！”

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T16:05:38.013

1.  正确的。您将为 Windows API 调用将 UTF-8 转换为 UTF-16。

2.  大多数情况下，您将使用 UTF-8 的常规字符串函数 -- `strlen`, `strcpy`(ick), `snprintf`, `strtol`. 它们适用于 UTF-8 字符。要么`char *`用于 UTF-8，要么你必须转换所有内容。

    请注意，下划线版本 like`_mbstowcs`不是标准的，它们通常不带下划线命名，例如`mbstowcs`.

3.  很难想出你真正想`operator[]`在 Unicode 字符串上使用的例子，我的建议是远离它。同样，遍历字符串的用途也很少：

    *   如果您正在解析一个字符串（例如，该字符串是 C 或 JavaScript 代码，也许您需要语法高亮），那么您可以逐字节完成大部分工作而忽略多字节方面。

    *   如果您正在搜索，您也将逐字节执行此操作（但请记住首先进行规范化）。

    *   如果您正在寻找断词或字素簇边界，您将需要使用像 ICU 这样的库。算法并不简单。

    *   最后，您始终可以将一大段文本转换为 UTF-32 并以这种方式使用它。我认为如果您要实现任何 Unicode 算法（如排序规则或中断），这是最明智的选择。

    请参阅：[C++ 将 UTF-8 字符串迭代或拆分为符号数组？](https://stackoverflow.com/questions/2852895/c-iterate-or-split-utf-8-string-into-array-of-symbols)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T16:04:49.607

> 1.  Windows 内部仅支持 UTF-16，因此如果您想支持国际字符，则必须转换为它们的 Widechar 版本以相应地使用操作系统调用。似乎不支持使用多字节 UTF-8 字符串调用 CreateFileA() 之类的东西，并让它看起来正确。这个对吗？

对，那是正确的。函数变体根据`*A`当前活动的代码页（在美国和西欧的大多数计算机上是 Windows-1252，但通常可以是其他代码页）解释字符串参数，并将它们转换为 UTF-16。有一个 UTF-8 代码页，但是 AFAIK 没有办法以编程方式设置活动代码页（[`GetACP`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318070%28v=vs.85%29.aspx)可以获取活动代码页，但不对应`SetACP`）。

> 1.  在 C 中，有一些支持多字节的函数（_mbscat、_mbscpy 等），但是在 Windows 上，这些函数的字符类型定义为 unsigned char*。鉴于 _mbs 系列函数不是一个完整的集合（例如，没有 _mbstol 将多字节字符串转换为长字符串），您被迫使用一些 char* 版本的运行时函数，由于这些函数之间的有符号/无符号类型差异，这会导致编译器问题。有人甚至使用这些吗？你只是做一大堆铸造来绕过错误吗？

根据`mbs*`我的经验，几乎从未使用过函数系列。除了`mbstowcs`、`mbsrtowcs`和之外`mbsinit`，这些函数都不是标准 C。

> 1.  在 C++ 中，std::string 具有迭代器，但这些迭代器基于 char_type，而不是基于代码点。因此，如果我在 std::string::iterator 上执行 ++，我会得到下一个 char_type，而不是下一个代码点。类似地，如果你调用 std::string::operator[]，你会得到一个对 char_type 的引用，它很有可能不是一个完整的代码点。那么如何按代码点迭代 std::string 呢？（C 有 _mbsinc() 函数）。

我认为这[`mbrtowc(3)`](http://linux.die.net/man/3/mbrtowc)将是解码多字节字符串的单个代码点的最佳选择。

总的来说，我认为跨平台 Unicode 兼容性的最佳策略是在内部使用单字节字符在 UTF-8 中执行所有操作。当您需要调用 Windows API 函数时，将其转换为 UTF-16 并始终调用`*W`变体。大多数非 Windows 平台已经使用 UTF-8，因此使用起来很容易。

# c - Microsoft Crypto API 禁用 RSAES-OAEP 密钥传输算法

> ID：13090176
> 
> 赞同：71
> 
> 时间：2012-10-26T15:48:17.900
> 
> 标签：c, windows, encryption, cryptography, mscapi

我`CryptEncryptMessage`用来生成一个`PKCS#7`封装的消息。我正在`szOID_NIST_AES256_CBC`用作加密算法。

生成的消息似乎是有效的，但它`RSAES-OAEP`适用于在野外支持有限的密钥传输算法（Thunderbird、OpenSSL SMIME 模块等许多不支持它）。

我希望 CAPI 恢复到旧`RSAencryption`的密钥传输。

有没有可能的方法来做到这一点，如果有办法而不是使用，我可以恢复到低级消息传递功能，`CryptEncryptMessage`但即使使用低级功能我也找不到这样做的方法。

代码：

```
CRYPT_ENCRYPT_MESSAGE_PARA EncryptMessageParams;
EncryptMessageParams.cbSize = sizeof(CMSG_ENVELOPED_ENCODE_INFO);

EncryptMessageParams.dwMsgEncodingType = PKCS_7_ASN_ENCODING;

EncryptMessageParams.ContentEncryptionAlgorithm.pszObjId = szOID_NIST_AES256_CBC;
EncryptMessageParams.ContentEncryptionAlgorithm.Parameters.cbData = 0;
EncryptMessageParams.ContentEncryptionAlgorithm.Parameters.pbData = 0;

EncryptMessageParams.hCryptProv = NULL;
EncryptMessageParams.pvEncryptionAuxInfo = NULL;
EncryptMessageParams.dwFlags = 0;
EncryptMessageParams.dwInnerContentType = 0;

BYTE pbEncryptedBlob[640000];
DWORD pcbEncryptedBlob = 640000;

BOOL retval =  CryptEncryptMessage(&EncryptMessageParams, cRecipientCert, pRecipCertContextArray, pbMsgText, dwMsgTextSize, pbEncryptedBlob, &pcbEncryptedBlob); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-27T23:23:40.770

密钥传输算法处理起来有点棘手，并且可能无法达到其目的（我看到您提到您希望 CAPI 支持`RSAencryption`；相信我，我也会）。看起来您已经发现了大部分问题 -**生成的消息似乎是有效的，但是您的方法需要使用`CryptEncryptMessage`，从长远来看，这将无法正常工作/根本无法正常工作。**

# 第 1 步 - 检查代码

```
CRYPT_ENCRYPT_MESSAGE_PARA EncryptMessageParams;
EncryptMessageParams.cbSize = sizeof(CMSG_ENVELOPED_ENCODE_INFO);

EncryptMessageParams.dwMsgEncodingType = PKCS_7_ASN_ENCODING;

EncryptMessageParams.ContentEncryptionAlgorithm.pszObjId = szOID_NIST_AES256_CBC;
EncryptMessageParams.ContentEncryptionAlgorithm.Parameters.cbData = 0;
EncryptMessageParams.ContentEncryptionAlgorithm.Parameters.pbData = 0;

EncryptMessageParams.hCryptProv = NULL;
EncryptMessageParams.pvEncryptionAuxInfo = NULL;
EncryptMessageParams.dwFlags = 0;
EncryptMessageParams.dwInnerContentType = 0;

BYTE pbEncryptedBlob[640000];
DWORD pcbEncryptedBlob = 640000;

BOOL retval =  CryptEncryptMessage(&EncryptMessageParams, cRecipientCert, pRecipCertContextArray, pbMsgText, dwMsgTextSize, pbEncryptedBlob, &pcbEncryptedBlob); 
```

很基本，不是吗？虽然效率很高，但它并没有真正解决问题。如果你看这个：

```
EncryptMessageParams.dwFlags = 0;
EncryptMessageParams.dwInnerContentType = 0; 
```

您会看到它是预定义的，但仅用于`retval`. 但是，我绝对可以将其视为微优化，如果我们要重新编写代码，它并没有真正的用处。但是，我已经概述了在不完全重做代码的情况下集成它的基本步骤（因此您可以继续使用相同的参数）：

# 第 2 步 - 编辑参数

正如@owlstead 在他的评论中提到的那样，Crypto API 对用户不是很友好。但是，您在资源有限的情况下做得很好。您要添加的是[加密枚举提供程序](http://msdn.microsoft.com/en-us/library/aa379929%28v=vs.85%29.aspx)，以帮助缩小密钥范围。确保您拥有 Microsoft Base Cryptographic Provider 1.0 版或 Microsoft Enhanced Cryptographic Provider 1.0 版以有效地使用它们。否则，您需要像这样添加函数：

```
DWORD cbName;
DWORD dwType;
DWORD dwIndex;
CHAR *pszName = NULL;
(regular crypt calls here) 
```

这主要用于防止`NTE_BAD_FLAGS`错误，尽管从技术上讲，您可以通过更底层的声明来避免这种情况。如果您愿意，您还可以创建一个全新的哈希（尽管只有在上述实现无法扩展到必要的时间/速度因素时才需要这样做）：

```
DWORD dwBufferLen = strlen((char *)pbBuffer)+1*(0+5);
HCRYPTHASH hHash;
HCRYPTKEY hKey;
HCRYPTKEY hPubKey;
BYTE *pbKeyBlob;
BYTE *pbSignature;
DWORD dwSigLen;
DWORD dwBlobLen;
(use hash as normal w/ crypt calls and the pbKeyBlobs/Signatures) 
```

在继续之前，请确保验证此代码段。您可以像这样轻松地做到这一点：

```
if(CryptAcquireContext(&hProv, NULL, NULL, PROV_RSA_FULL, 0)) {
     printf("CSP context acquired.\n");
} 
```

如果您正在记录或发布，可能需要添加一个`void MyHandleError(char *s)`来捕获错误，以便编辑但失败的人可以快速捕获它。

顺便说一句，第一次运行它时，您必须创建一个新集，因为没有默认值。下面是一个可以弹出的漂亮单行`if`：

```
CryptAcquireContext(&hCryptProv, NULL, NULL, PROV_RSA_FULL, CRYPT_NEWKEYSET) 
```

请记住，同步服务器资源**不会**像我在第一步中建议的那样有效。这就是我将在下面解释的内容：

# 第 3 步 - 重新编码并重新启动

作为一名程序员，重新编码似乎是在浪费时间，但从长远来看，它绝对可以帮助你。请记住，在编码/同步时，您仍然需要在自定义参数中进行编码；我不会像婴儿一样亲手喂你所有的代码。向您展示基本轮廓就足够了。

我肯定假设您正在尝试处理**特定 CSP**中当前用户的密钥容器；否则，我真的看不到它的用途。如果没有，您可以进行一些基本的编辑以满足您的需求。

请记住，我们将`CryptEncryptMessage`通过 using绕过`CryptReleaseContext`，它直接释放函数获取的句柄`CryptAcquireContext`。微软关于 CAC 的标准如下：

```
BOOL WINAPI CryptAcquireContext(
  _Out_  HCRYPTPROV *phProv,
  _In_   LPCTSTR pszContainer,
  _In_   LPCTSTR pszProvider,
  _In_   DWORD dwProvType,
  _In_   DWORD dwFlags
); 
```

请注意，如果您使用的是用户界面，微软会责骂您：

> 如果 CSP 必须显示 UI 才能操作，则调用失败，并将 NTE_SILENT_CONTEXT 错误代码设置为最后一个错误。此外，如果调用带有 CRYPT_USER_PROTECTED 标志的 CryptGenKey 并带有已使用 CRYPT_SILENT 标志获取的上下文，则调用失败并且 CSP 设置 NTE_SILENT_CONTEXT。

这主要是服务器代码，`ERROR_BUSY`当有多个连接时，肯定会显示给新用户，尤其是那些具有高延迟的连接。超过 300ms 只会导致 a`NTE_BAD_KEYSET_PARAM`或类似的调用，因为超时甚至没有收到适当的错误。（传输问题，有人和我在一起吗？）

除非您担心多个 DLL（由于`NTE_PROVIDER_DLL_FAIL`错误不支持），否则获取 crypt 服务客户端的基本设置如下（直接从 Microsoft 的示例中复制）：

```
if (GetLastError() == NTE_BAD_KEYSET)
 {
   if(CryptAcquireContext(
      &hCryptProv, 
      UserName, 
      NULL, 
      PROV_RSA_FULL, 
      CRYPT_NEWKEYSET)) 
    {
      printf("A new key container has been created.\n");
    }
    else
    {
      printf("Could not create a new key container.\n");
      exit(1);
    }
  }
  else
  {
      printf("A cryptographic service handle could not be "
          "acquired.\n");
      exit(1);
   } 
```

无论这看起来多么简单，您绝对不想将其传递给密钥交换算法（或您处理过的任何其他算法）。除非您使用对称会话密钥 (Diffie-Hellman/KEA)，否则交换密钥对可用于加密会话密钥，以便它们可以安全地存储并与其他用户交换。

名叫 John Howard 的人编写了一个不错的 Hyper-V 远程管理配置实用程序 (HVRemote)，它是这里讨论的技术的大型汇编。除了使用基本的密码和密钥对之外，它们还可以用于允许`ANONYMOUS LOGON`远程`DCOM`访问（`cscript hvremote.wsf`具体来说是 ）。您可以在他的博客上看到他最新的 crypts 中的许多功能和技术（您必须缩小查询范围）：

[http://blogs.technet.com/b/jhoward/](http://blogs.technet.com/b/jhoward/)

如果您在基础知识方面需要更多帮助，请发表评论或请求私人聊天。

# 结论

尽管一旦您了解了用于散列的基本服务器端方法以及客户端如何获取“crypts”，这将非常简单，但您会质疑为什么您甚至在传输过程中尝试加密。然而，如果没有加密客户端，加密肯定是传输已经散列的内容的唯一安全方式。

尽管您可能会争辩说数据包可以被解密并从盐中散列，但请考虑必须以重新散列客户端所需的正确时间*和顺序来处理和存储传入传出的数据。*

# node.js - 快速更新 cookie 会话未向浏览器注册

> ID：13090177
> 
> 赞同：5
> 
> 时间：2012-10-26T15:48:20.243
> 
> 标签：node.js, express, passport.js, node-redis, cookie-session

我已经设置了一个有效的登录测试，如下所示：

```
var express = require('express');
var fs = require('fs');
var http = require('http');
var path = require('path');
var routes = require('./routes/index.coffee');
var passport = require('passport');

var LocalStrategy = require('passport-local').Strategy;
var User = require('./userdb.coffee');
var app = express();
var RedisStore = require('connect-redis')(express);

passport.use(new LocalStrategy(function(username, password, done) {
  return User.findOne({
    username: username
  }, function(err, user) {
    if (err) {
      return done(null, false, message: error);
    }
    if (!user) {
      return done(null, false, {
        message: 'Unknown user'
      });
    }
    if (!user.validPassword(password)) {
      return done(null, false, {
        message: 'Invalid password'
      });
    } else {
      return done(null, user);
    }
  });
}));

passport.serializeUser(function(user, done) {
  return done(null, user);
});

passport.deserializeUser(function(user, done) {
  return done(null, user);
});

app.configure(function() {
  app.set('port', process.env.PORT || 5003);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.enable('trust proxy');
  app.use(express["static"](path.join(__dirname, 'public')));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('SOMESECRET'));
  app.use(express.session({
    cookie: {
      maxAge: 10 * 60 * 1000
    },
    key: 'express.sid',
    secret: 'SOMESECRET',
    store: new RedisStore({
      port: 6379,
      host: 'localhost'
    })
  }));
  app.use(passport.initialize());
  app.use(passport.session());
  return app.use(app.router);
});

var check_auth = function(req, res, next) {
  if (req.isAuthenticated()) {
    console.log(req.session.cookie.expires);
    return next();
  }
  return res.redirect('/login');
};

app.get('/', check_auth, routes.index);
app.get('/login', routes.login);
app.get('/logout', routes.logout);
app.post('/authenticate', passport.authenticate('local', {
  successRedirect: '/',
  failureRedirect: '/login'
}));

app.listen(app.get('port'), '0.0.0.0'); 
```

路由和用户逻辑被省略，因为我认为它们与我的问题无关，但如果需要，我会很乐意分享它们（它们非常小，这只是为了获得一个小的概念证明并运行） .

*登录工作，阅读会话工作，基于会话值呈现模板工作。* **我的问题是 maxAge/expires**。我不确定问题出在哪里，但我会尝试描述它：

当我登录时，会话保存`passport.js`，正确存储在 my`RedisStore`中，指向会话的 cookie 返回到浏览器。在后续请求中，cookie 被成功找到并指向来自 my 的正确会话`SessionStore`。`req.session.cookie`显示更新`expires`，在我的`redis`服务器中，TTL 重置为 10 分钟 (600)。

**我的问题**是 cookie 在浏览器（Chrome、Windows 和 Mac）中保持相同的过期时间。

**所以我的问题是**：如何进一步调试？随着 req.session 的更新（由`express`和内部/自动），我想知道问题出在哪里，以及我应该做些什么来解决这个问题：`passport`Cookie*保持在初始 maxAges/expires*。`connect-redis`

 *非常感谢任何提示、指示或想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-22T19:39:14.087

Express-session 支持滚动 cookie 到期日期。不幸的是，它只是最近才被记录下来。

为您的会话使用“滚动”选项。这“强制在每个响应上设置 cookie”并“重置过期日期”。您想将滚动设置为 true。

还要注意“重新保存”选项。“即使在未修改的情况下也强制保存会话......”您可能也希望将该选项设置为 true。请注意，即使此选项的默认值为 true，您也应显式设置该值。现在不推荐使用此选项的默认值，而不是显式设置它。

尝试类似：

```
app.use( session( { secret: 'keyboard cat',
                    cookie: { maxAge: 60000 },
                    rolling: true,
                    resave: true, 
                    saveUninitialized: false
                  }
         )
); 
```

这是文档。查看“选项”和“options.resave”：[https](https://github.com/expressjs/session) ://github.com/expressjs/session 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T23:58:30.017

经过一番挖掘，事实证明 Express 不支持这种滚动，并留给程序员实施作为练习。

如果浏览器的到期时间可以可靠地读取到 ，这将有所帮助`express`，因此您只能在会话接近到期时触发会话，但我将其用作解决方法（效率低下），直到我想出更聪明的方法：

```
check_auth = function(req, res, next) {
  console.log(req.isAuthenticated());
  if (req.isAuthenticated()) {
    if (req.session.roll) {
      req.session.roll = 0;
    } else {
      req.session.roll = 1;
    }
    return next();
  }
  return res.redirect('/login');
}; 
```

哪里`roll`可能是任何东西，会话的点被改变了（在每个经过身份验证的请求*上）。

*) 这也意味着它的效率非常低，但现在可以了。

一种替代方法是查找会话 ID 的 TTL。这必须以如下方式进行检查：如果 ttl < 10% * maxAge（由应用程序定义），因为 TTL 实际上在每个请求上都正确更新，只是没有发送 Set-Cookie。因此，假设用户停留在 maxAge 的 90% 以内，他的浏览器 cookie 最终会过期，所以即使这种方法也不够。不过，这可能是一个很好的中间地带。

我将不接受这个问题，以鼓励其他人提出更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-02T07:00:39.800

万一有人在谷歌浏览器中遇到这个问题，解决方案很简单：

```
app.use(cors({
   allowedHeaders: ['Content-Type','Authorization'],
   origin: '.dev.loc', <- your domain here, but it requires to have a dot infront
   methods:['GET','POST','PUT','DELETE'],
   preflightContinue: true
})); 
```*

# c# - 未处理的安全异常

> ID：13090179
> 
> 赞同：1
> 
> 时间：2012-10-26T15:48:27.367
> 
> 标签：c#, silverlight, exception

我正在使用以下方法从网站获取响应流 -

```
HttpWebRequest request;
WebResponse response;

private void button1_Click(object sender, RoutedEventArgs e)
    {

        string url = textBox1.Text;
        request = WebRequest.Create(url) as HttpWebRequest;
        request.BeginGetResponse(AfterRequest, null);

    }

    public void AfterRequest(IAsyncResult result)
    {

            response = request.EndGetResponse(result);
            using (StreamReader sd = new StreamReader(response.GetResponseStream()))
            {
                string resultString = sd.ReadToEnd();
            }
            response.Close();

    } 
```

但是，代码在到达时会中断-

```
response = request.EndGetResponse(result); 
```

带有错误消息 -

```
SecurityException was unhandled by user code 
```

是什么导致了这个问题？

听到是完全例外 -

```
System.Security.SecurityException ---> System.Security.SecurityException: Security error.
at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult     asyncResult)
at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.    <EndGetResponse>b__9(Object sendState)
at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__1(Object sendState)
--- End of inner exception stack trace ---
at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object     state)
at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
at System.Net.WebClient.GetWebResponse(WebRequest request, IAsyncResult result)
at System.Net.WebClient.DownloadBitsResponseCallback(IAsyncResult result) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:04:17.517

如果您需要在 Silverlight 中从不同的网站/域提供内容，请查看以下指南：

[http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc197955(v=vs.95).aspx)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:47:04.827

我通过创建一个 Web 方法解决了这个问题，该方法与前端代码在后端 Web 服务中所做的完全一样，然后在前端调用它，我已经通过之前添加这些文件实现了跨域访问策略。

# perl - LWP::UserAgent 是否进行任何缓存

> ID：13090182
> 
> 赞同：1
> 
> 时间：2012-10-26T15:48:37.390
> 
> 标签：perl, lwp, lwp-useragent

我正在尝试在 Perl 中编写一个监视脚本，它应该检查 URL 列表。我正在使用[`LWP::UserAgent`](https://metacpan.org/module/LWP%3a%3aUserAgent),[`HTTP::Response`](https://metacpan.org/module/HTTP%3a%3aResponse)和[`Time::HiRes`](https://metacpan.org/module/Time%3a%3aHiRes)模块。

这是我的代码：

```
use strict;
use warnings;

use LWP::UserAgent;
use HTTP::Response;
use Time::HiRes qw( gettimeofday );

while (1) {

    my $start = gettimeofday();

    my $ua = LWP::UserAgent->new();
    $ua->agent('lb-healthcheck.pl/0.1');
    $ua->timeout(10);

    # download the tile locally
    my $response = $ua->get("myurl");
    my $content  = $response->content;

    my $end = gettimeofday();

    print "$start - $end = ".(($end-$start)*1000)."\n";
} 
```

在没有 while 循环的情况下手动运行脚本，我平均得到大约 70 毫秒的响应时间，但是有了 while 循环，我得到了大约 5 毫秒的响应时间，这是不真实的。

是否`LWP::UserAgent`进行任何缓存？如果是，是否可以禁用它以及如何禁用它？如果不是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:57:36.443

`LWP`除非您告诉它，否则它自己不会做任何缓存，但是 LWP 和主机站点之间有很多。例如，您是否通过代理工作？如果是这样，那么它将缓存它获取的页面，以防第二次需要它们。云中还有许多其他缓存可能会加快您的响应速度，但 7 毫秒的时间意味着合理的本地缓存。

您还应该使用`tv_interval`子程序 from`Time::HiRes`来计算间隔。它希望您将结果对存储`gettimeofday`在数组中，并将计算其中两个对之间的差异。你的代码看起来像这样

```
use Time::HiRes qw( gettimeofday  tv_interval );

while () {

    my $start = [ gettimeofday() ];

    # download the tile locally

    my $end = [ gettimeofday() ];

    print tv_interval($start, $end), "\n";
} 
```

对于它的价值，对于一个普通的国家网站，我的初始提取大约需要 500 毫秒，随后的提取大约需要 300 毫秒。因此，正在进行一些缓存，但影响远小于您报告的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:03:50.380

尝试使用设置为丢弃所有连接`conn_cache`的[LWP::ConnCache](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/ConnCache.pm)对象进行设置（参见其`total_capacity`子例程，例如）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T08:58:12.867

LWP 不进行缓存，但操作系统可能会缓存数据，例如 DNS 查找的结果，因此这些数据只会在第一次查找和操作系统缓存过期后花费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:21:46.093

看起来您没有正确估计经过的时间。gettimeof day 返回一个数组，其中包含：经过的秒数和微秒，因此为了计算经过的时间，您需要进行一些转换。就像是：

```
my ($init_sec, $init_usec) = gettimeofday
# SOME CODE HERE
my ($stop_sec, $stop_usec) = gettimeofday

if ( $init_usec > $stop_usec ) {
   $stop_usec += 1_000_000;
   $stop_sec--;
}

#convert seconds into mseconds
my $tsec  = ( $stop_sec  - $init_sec ) * 1_000; 

# convert usecs into msecs
my $tusec = ( $stop_usec - $init_usec) / 1_000;

# elapsed time is $tsec + $tusec 
```

# tomcat - tomcat怎么知道在哪里可以找到tnsnames.ora

> ID：13090186
> 
> 赞同：1
> 
> 时间：2012-10-26T15:48:52.723
> 
> 标签：tomcat, tomcat6, tnsnames

我在 tomcat 连接的服务器上有一个 oracle 数据库。

所以我在 server.xml 中进行了配置：

```
<Resource auth="Container" driverClassName="oracle.jdbc.OracleDriver"  maxWait="-1" name="jdbc/test" password="test" type="javax.sql.DataSource" url="jdbc:oracle:thin:@test:1111:testdb" username="test"/> 
```

tnsnames.ora 位于我的计算机本地，但我想知道它是如何被 tomcat 注册的？我在指向 tnsnames.ora 的 tomcat xml 配置文件中看不到任何内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-23T14:41:46.427

检查 bin 目录中的 setenv.sh 文件。您可以在 JVM 参数中指定文件 tnsnames.ora 所在的目录：

-Doracle.net.tns_admin=/tomcat/conf/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:53:31.857

tnsnames.ora 文件根本没有被查阅，因为您使用的是瘦驱动程序。如果您希望它使用它，则需要切换到 Oracle OCI 驱动程序。您已在连接字符串中指定主机：端口：SID。执行此操作时，Tomcat 不需要 tnsnames 文件。

# java - 使用 Java 访问 Unix 中的目录

> ID：13090187
> 
> 赞同：0
> 
> 时间：2012-10-26T15:48:57.203
> 
> 标签：java, unix, directory

我尝试了谷歌搜索，但无法得出任何结果。我正在寻找的是关于如何使用 Java 导航 Unix 服务器的基本解释或教程。

我有几个 Java 程序，我想直接在我的服务器上运行，但是我不知道如何让这些程序进入某些目录，或扫描某些文件等。

我如何在 Unix 中使用 Java？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:51:07.510

使用[文件](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)。指定路径，看是不是目录，打开，读取，删除等等等等等等。

[listFile](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)将给出目录中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:54:48.400

为了让您的生活更轻松，请使用 Apache commons-io FileUtils -> [http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)

这是项目主页-> [http://commons.apache.org/io/](http://commons.apache.org/io/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:56:49.187

在这里您可以找到最简单的指南：

1.  [http://docs.oracle.com/javase/tutorial/essential/io/](http://docs.oracle.com/javase/tutorial/essential/io/)

2.  [http://www.tutorialspoint.com/java/java_files_io.htm](http://www.tutorialspoint.com/java/java_files_io.htm)

3.  [http://home.cogeco.ca/~ve3ll/jatutor9.htm](http://home.cogeco.ca/~ve3ll/jatutor9.htm)

# emacs - Emacs：如何在同一窗口中打开 dired 书签

> ID：13090190
> 
> 赞同：5
> 
> 时间：2012-10-26T15:49:09.477
> 
> 标签：emacs, elisp, bookmarks, dired

当我浏览文件系统时，我设法在一个窗口中完成了繁琐的工作。

改善人体工程学，我决定为我最常用的目录创建书签，其短名称如：'lwt'、'eve' 等。但每次打开书签时，都会创建新的目录缓冲区，即使旧缓冲区存在。

如何让它在现有的 dired 缓冲区中打开书签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:49:03.680

## 编辑：

最初的答案实际上是一个非答案。我为没有正确测试它而道歉。我会把它留在这里，这样其他潜在的回答者就不会像我一样被误导。

同时，我仔细查看了源代码，[`bookmark.el`](http://bzr.savannah.gnu.org/lh/emacs/trunk/annotate/head:/lisp/bookmark.el)修改`dired+`对其没有任何影响。默认情况下，该[`bookmark-jump`](http://bzr.savannah.gnu.org/lh/emacs/trunk/annotate/head:/lisp/bookmark.el#L1015)函数使用该`switch-to-buffer`函数作为其显示函数。[`bookmark-jump`](http://bzr.savannah.gnu.org/lh/emacs/trunk/annotate/head:/lisp/bookmark.el#L1015)然而有一个可选`display-func`参数，所以一个可能的解决方案（涉及一些 elisp hacking）是创建一个函数，重用当前的 dired 缓冲区（基于`dired+`源代码）并`bookmark-jump`用它调用，如果这个概念有效，然后绑定那是一个键盘快捷键。

## 原答案：

您观察到的行为只是*dired的一般**“导航时创建新缓冲区”*行为的副作用。这一事实使这个问题几乎与[如何阻止 emacs dired 模式打开这么多缓冲区？](https://stackoverflow.com/questions/1839313/how-do-i-stop-emacs-dired-mode-from-opening-so-many-buffers).

 *在那里和[Dired Reuse Directory Buffer](http://emacswiki.org/emacs/DiredReuseDirectoryBuffer) Emacs Wiki 页面提出的解决方案中，可能最简单的一个是安装[Dired+](http://www.emacswiki.org/emacs/DiredPlus)包并切换目录缓冲区重用：

```
(toggle-diredp-find-file-reuse-dir 1) 
```

在你的`.emacs`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T19:09:45.797

如果这可以帮助 - 这就是我用来在同一个缓冲区中打开我的书签的方法。

```
(defun my-bookmarks-list-same-buffer ()
  "Open *Bookmarks* in current buffer."
  (interactive)
  (bookmark-bmenu-list)
  (switch-to-buffer "*Bookmark List*"))
(global-set-key (kbd "s-b") 'my-bookmarks-list-same-buffer) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T20:20:31.697

使用[Bookmark+](http://www.emacswiki.org/cgi-bin/wiki/BookmarkPlus)，至少`bookmark-jump`( `C-x j j`) 到 Dired 书签确实会重用 Dired 缓冲区（如果它已经存在）。*

# vector - 运行时调试错误消息 - 迭代器不可递增

> ID：13090192
> 
> 赞同：1
> 
> 时间：2012-10-26T15:49:18.193
> 
> 标签：vector, iterator

这是我的代码，每当我运行时都会在运行时引发“迭代器不可递增”错误。如果我注释掉 sp++ 行或 asteroids.push_back(*sp); 线然后它运行良好。所以它与这些行有关...我在上一篇文章中看到 sp->getSize() 行也增加了指针，这可能是问题的原因？谢谢您的帮助！

```
 while(sp != asteroids.end()){ 
                if(sp->getSize() == .5 || sp->getSize() == 0.25){
                    glPushMatrix();
                    glScalef(.1, .1, .1);
                    glTranslatef(3,3,0);
                    sp->display_asteriod(sp->getSize(), random, randomTwo);
                    glPopMatrix();

                    asteroidCount++;
                    spawn.setSize(sp->getSize());
                    //spawn.setLife(it->getLife());

                    random = ((double) rand() / (RAND_MAX+1));
                    randomTwo = ((double) rand() / (RAND_MAX+1)) * 7;
                    spawn = createAsteroid(spawn);

                    x_speed_asteriod = (spawn.getXDirection())*(spawn.getRandomVelocity());// + x_speed_asteriod;
                    y_speed_asteriod = (spawn.getYDirection())*(spawn.getRandomVelocity());// + y_speed_asteriod;
                    spawn.setXSpeed(x_speed_asteriod);
                    spawn.setYSpeed(y_speed_asteriod);

                    if(spawn.getRandomAxis() == 0){
                        glRotatef(spawn.getAngleRotation(), 1, 0, 0);
                    }else if(spawn.getRandomAxis() == 1){
                        glRotatef(spawn.getAngleRotation(), 0, 1, 0);
                    }else if(spawn.getRandomAxis() == 2){
                        glRotatef(spawn.getAngleRotation(), 0, 0, 1);
                    }

                    //it = asteroids.begin() + asteroidCount;
                    //asteroids.insert(it, spawn);
                    //asteroids.resize(asteroidCount);
                    asteroids.push_back(*sp);

                    glPushMatrix();
                    glScalef(.1,.1,.1);
                    glTranslatef(spawn.getXPosition()-3, spawn.getYPosition()-3, 0);
                    spawn.display_asteriod(spawn.getSize(), random, randomTwo);
                    glPopMatrix();
                }else{
                    sp++;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:17:02.480

您的迭代器`sp`因调用而失效`push_back`。您正在修改小行星矢量，但您仍在使用修改前获得的旧迭代器。

[这篇文章](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)包含了迭代器失效时的规则摘要。

跟踪要处理的新项目通常使用队列（或双端队列）以安全的方式完成，如下所示：

```
#include<deque>   

vector<Asteroid> asteroids;

deque<Asteroid> asteroid_queue;
//add all current asteroids into the queue
asteroid_queue.assign(asteroids.begin(), asteroids.end());

while(!asteroid_queue.empty())
 {
   //grab the next asteroid to process
   Asteroid asteroid = asteroid_queue.front();
   //remove it from the queue
   asteroid_queue.pop_front();

   do_some_work()

   //if necessary add a new asteroid .. be careful not to end in an infinite loop
   asteroid_queue.push_back(..);
 } 
```

# c# - 转换物理 URL 中的 TreeView 选定节点

> ID：13090198
> 
> 赞同：0
> 
> 时间：2012-10-26T15:49:53.397
> 
> 标签：c#, asp.net, treeview

当我在 TreeView 中选择一个节点时，是否有可能作为回报，我将获得从父节点到选定子节点的物理路径？像'~/ParentNode1/ParentNOde2/SelectedChildNode'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:54:12.840

对于 ASP.net，使用[`ValuePath`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.valuepath%28v=vs.80%29.aspx)SelectedNode 的属性

对于 Windows 窗体，[`FullPath`](http://msdn.microsoft.com/en-us/library/system.windows.forms.treenode.fullpath.aspx)使用`SelectedNode`

注意：FullPath 属性将使用 TreeView.PathSeparator 属性来决定用什么来分隔节点。默认字符是'\'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:14:24.797

我明白了，TreeView1.SelectedNode.ValuePath.ToString()

# php - 如何最好地每小时重新排序 100k 数据库行？

> ID：13090200
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:49:56.353
> 
> 标签：php, mysql

Mysql - 我想每小时重新排序一个 100k 行的数据库。我有一个名为“订单”的字段，我按此排序。我怎样才能最好地重新排序？

我目前这样做（伪）：

```
mainpage.php : select * from table order by `order` desc limit 100; 
```

每小时：

```
cronjob.php  : select * from table order by rand(); 
$i=0;
foreach($row) {
$i++;
update table set order = $i where id = $row['id']
} 
```

但这需要很长时间。

如果我只是执行 'update table set order = rand()' 会有重复，我不想`order`有重复（但它没有设置为 UNIQUE 索引，因为它在更新时会有重复。

这样做的最佳方法是什么？

（我这样做是因为仅执行“select * from table order by rand() limit 100”真的很慢，但是将它放在索引上要快得多。重新排序只需要很长时间）

(mysql 5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:00:08.573

为什么不使用自动增量字段，然后生成随机值列表（在存储的最小值和最大值之间）以在选择时使用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:00:32.330

无论如何，MySQL 都不是磁盘上的顺序存储。这不会给你任何东西。这样做可能会使行以特定顺序显示在您的管理客户端中，但实际上不会增加​​任何速度。请在`ORDER BY`您的选择语句中添加一个子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:57:04.020

如何创建另一个表 - my_wierd_sort_table。

然后将其完全删除，并插入 PK 和您的 rand() 列 - 并使用它在您的选择中排序...

# ruby-on-rails - Rails 存储来自 AR 结果的值

> ID：13090203
> 
> 赞同：0
> 
> 时间：2012-10-26T15:50:03.980
> 
> 标签：ruby-on-rails, activerecord, opayo

我在控制器中存储查询结果时遇到问题：

```
payments = Payment.select("SecurityKey").where("VendorTxCode = '%#{params[:VendorTxCode]}%'").limit(1)

payments.each do |payment|
    security_key = payment.SecurityKey
end 
```

稍后当我使用 时`security_key`，我收到一个未定义的错误。但是，当我在`rails console`as 中运行它时：

```
payments.each do |payment|
    puts payment.SecurityKey
end
#=> df4g5ds6 
```

由于我的方法不起作用，如何将此结果存储在变量中以供以后使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:55:14.583

看起来您需要在每个 do 块之前定义变量。尝试将键存储到数组中，如下所示：

```
payments = Payment.select("SecurityKey").where("VendorTxCode = '%#
{params[:VendorTxCode]}%'").limit(1)

security_key = []
payments.each do |payment|
    security_key << payment.SecurityKey
end 
```

然后您可以访问诸如 security_key[0] 等密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:00:14.363

首先，由于您将搜索限制为 1，因此您实际上不需要使用循环。做就是了：

```
security_key = payments.first.SecurityKey 
```

除此之外，“稍后当我使用 security_key 时，我收到一个未定义的错误”是什么意思。你在哪里使用它？您是否在该方法中使用它？那么它应该在那里。它可能不是的唯一原因是您的查询没有返回任何内容。如果您的查询返回一个空集合，那么循环将永远不会发生，并且永远不会创建或设置变量。

试试这个：

```
payments = Payment.select("SecurityKey").where("VendorTxCode = '%#{params[:VendorTxCode]}%'").limit(1)

p payments.first # Will output nil if it's not there 
```

如果你输出 nil，那么你知道这就是正在发生的事情。然后，您必须修改代码以检查 nil 并做出相应的响应/行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:21:40.727

如果“稍后”是指从帮助程序或视图访问它，则需要将变量设为实例变量而不是 local: `@security_key`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:26:27.370

您将 security_key 定义为`do...end`您传递给每个语句的块范围内的局部变量。换句话说，它在该块之外不可用。这是 Pry 控制台中的一个示例。

```
[4] pry(main)> (1..10).each {|number| result = number}
=> 1..10
[5] pry(main)> result
NameError: undefined local variable or method `result' for main:Object 
```

块内定义的结果在块外未定义或可见。

```
[6] pry(main)> result = 0
=> 0
[7] pry(main)> (1..10).each {|number| result = number}
=> 1..10
[8] pry(main)> result
=> 10 
```

在这里，通过首先在控制台会话范围内定义结果，我现在可以在块中看到对其所做的更改。

那有意义吗？

# php - 如何将“key => value”对存储为字符串以供将来解析？

> ID：13090204
> 
> 赞同：2
> 
> 时间：2012-10-26T15:50:11.210
> 
> 标签：php, mysql, string, api, key-value

我使用 API，并根据通过该 API 传入的预期参数提供数据库表。

但是，API 经常更改，因此我在 MySQL 中为来自 API 的任何意外项目（例如，在 API 更新中引入的新项目名称和值对）调用了一个“包罗万象”`TEXT`列，所以我不`unexpectedParameters`不要失去他们。

我应该如何存储这些意外`key => value`的对，以便在将来，如有必要，我可以快速提取`unexpectedParameters`列并对其进行解析，以使用这些新参数的新引入列重新填充更新的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:52:20.300

好吧，如果我现在遇到这个问题，我会使用一个填充了 JSON 的文本字段。这维护了 key => value 连接，占用空间小，并且易于解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:55:25.477

一种快速的方法是使用[serialize](http://php.net/manual/en/function.serialize.php)。尝试这个

```
<?php
 $expected_params = array('user', 'dog', 'cat');
 if(isset($_POST) && count($_POST) > 0) {
  $unexpected_params = array();
  foreach($_POST as $key => $value) {
   if(!in_array($key, $expected_params)) {
    $unexpected_params[$key] = $value;
   }
  }
 }
 $up_serial = serialize($unexpected_params);

 // Pseudo DB functions
 $this->db->set('unexpected_params', $up_serial);
 $this->db->save();
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:58:47.510

您应该将这些值标准化到额外的表中。这应该可以帮助您保持较小的数据，方便意外参数的名称，并且您可以稍后根据每个参数进行处理。

```
[api-table] -- 1:n -- [unexpected values] -- n:1 -- [parameter names] 
```

如果您想通过数据库服务器本身将过去批量处理为当前，这将特别有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-03T19:37:25.653

如果您不需要将其存储在 SQL 数据库中，则更快的解决方案是使用文件系统。

我写了一小段代码来做到这一点。它具有惊人的多功能性和快速性。你可以在这里找到它：[ [https://github.com/paragi/rocket-store]](https://github.com/paragi/rocket-store])

她的优点是“值”可以是数组。因此，您可以将任何复杂信息存储在一个键下：

```
require "rocket-store.php";
$rs = new Paragi\RocketStore();

// Store a value, in the configuration collection
$rs->post("configuration", $key, $value);

// Retrieve a value from the configuration collection
$value = $rs->get("configuration", $key); 
```

# ios - NSInternalInconsistencyException（无效更新：第 0 节中的行数无效）

> ID：13090211
> 
> 赞同：2
> 
> 时间：2012-10-26T15:51:00.063
> 
> 标签：ios, core-data, uitableview

我设计的过程是这样的：

1.  通过 Model Segue 进入 CourseAddViewController(UITableViewController)；
2.  右栏按钮显示“Done”（在此状态下，tableview 显示每一行的所有数据用“-”显示，但底部的附加行用“+”显示）；
3.  按“完成”按钮，保存数据。

**当我添加语句“self.editing = YES;” 在 - (void)viewDidLoad 方法中，它会崩溃。**

**我发现它没有执行“tableView:cellForRowAtIndexPath:”方法。但是，实际上我相信通过 NSLog() 的结果在第 0 节中有 1 行。**

如果我不添加“self.editing = YES;”，它会正常运行。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
    self.editing = YES;     // here: adding it cause crash
} 
```

执行“insertRowsAtIndexPaths:withRowAnimation:”后，它崩溃了。两种说法：

```
[self.tableView beginUpdates];
[self.tableView endUpdates]; 
```

添加与否，都会导致崩溃。

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    [self.tableView beginUpdates];

    NSInteger booksCount = self.course.books.count;

    NSArray *booksInsertIndexPath = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:booksCount inSection:0]];

    if (editing) {
        [self.tableView insertRowsAtIndexPaths:booksInsertIndexPath 
                              withRowAnimation:UITableViewRowAnimationBottom];  // then, it crashes
    } else {
        [self.tableView deleteRowsAtIndexPaths:booksInsertIndexPath 
                              withRowAnimation:UITableViewRowAnimationBottom];
    }

    [self.tableView endUpdates];

    // ...

} 
```

其他方法，

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"%d", self.fetchedResultsController.sections.count);     // the result is always 1;

    return self.fetchedResultsController.sections.count;
} 
```

其他方法，

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController.sections objectAtIndex:section];
    NSInteger rows = [sectionInfo numberOfObjects];
    if (self.editing)
        rows++; 

    NSLog(@"%d", rows);     // the result is always 1;

    return rows;
} 
```

其他方法，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) 
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    id <NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController.sections objectAtIndex:indexPath.section];
    NSInteger rows = [sectionInfo numberOfObjects];
    if (self.editing && rows == indexPath.row) {
        return  cell;
    }
    [self configureCell:cell atIndexPath:indexPath];

//    NSLog(@"%d-%d-%d-%d", self.editing, rows, indexPath.section, indexPath.row);

    return cell;
} 
```

新编辑：

```
2012-10-27 08:44:29.934 Course Table[306:fb03] *** Assertion failure in
 -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/
UIKit-914.84/UITableView.m:1037
2012-10-27 08:44:29.935 Course Table[306:fb03] CRASH: Invalid update: 
invalid number of rows in section 0\.  The number of rows contained in 
an existing section after the update (1) must be equal to the number 
of rows contained in that section before the update (1), plus or 
minus the number of rows inserted or deleted from that section 
(1 inserted, 0 deleted) and plus or minus the number of rows moved
into or out of that section (0 moved in, 0 moved out).
2012-10-27 08:44:29.942 Course Table[306:fb03] Stack Trace: (
    0   CoreFoundation                      0x016cf03e __exceptionPreprocess + 206
    1   libobjc.A.dylib                     0x01860cd6 objc_exception_throw + 44
    2   CoreFoundation                      0x01677a48 +[NSException raise:format:arguments:] + 136
    3   Foundation                          0x009d12cb -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 116
    4   UIKit                               0x000bf3d7 -[UITableView(_UITableViewPrivate) _endCellAnimationsWithContext:] + 12439
    5   UIKit                               0x000ca6d2 -[UITableView _updateRowsAtIndexPaths:updateAction:withRowAnimation:] + 295
    6   UIKit                               0x000ca711 -[UITableView insertRowsAtIndexPaths:withRowAnimation:] + 55
    7   Course Table                        0x0000ef42 -[CTXCourseAddViewController setEditing:animated:] + 434
    8   UIKit                               0x0010de4c -[UIViewController(UINavigationControllerItem) setEditing:] + 49
    9   Course Table                        0x0000ec1f -[CTXCourseAddViewController viewDidLoad] + 655
    10  UIKit                               0x00101a1e -[UIViewController view] + 184
    11  UIKit                               0x00100fec -[UIViewController nextResponder] + 34
    12  UIKit                               0x00127f1d -[UIResponder _containsResponder:] + 40
    13  UIKit                               0x001121cb -[UINavigationController defaultFirstResponder] + 83
    14  UIKit                               0x00128df1 -[UIResponder(Internal) _deepestDefaultFirstResponder] + 36
    15  UIKit                               0x00128ea9 -[UIResponder(Internal) _promoteDeepestDefaultFirstResponder] + 36
    16  UIKit                               0x00322508 -[UIWindowController transitionViewDidStart:] + 89
    17  UIKit                               0x000df401 -[UITransitionView _didStartTransition] + 93
    18  UIKit                               0x000e008b -[UITransitionView transition:fromView:toView:] + 1169
    19  UIKit                               0x00321d6c -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] + 6114
    20  UIKit                               0x00108857 -[UIViewController presentViewController:withTransition:completion:] + 3579
    21  UIKit                               0x001089bc -[UIViewController presentViewController:animated:completion:] + 112
    22  UIKit                               0x001089fc -[UIViewController presentModalViewController:animated:] + 56
    23  UIKit                               0x00470f4a -[UIStoryboardModalSegue perform] + 250
    24  UIKit                               0x004654d0 -[UIStoryboardSegueTemplate perform:] + 174
    25  CoreFoundation                      0x016d0e99 -[NSObject performSelector:withObject:withObject:] + 73
    26  UIKit                               0x0003d14e -[UIApplication sendAction:to:from:forEvent:] + 96
    27  UIKit                               0x0027ba0e -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 145
    28  CoreFoundation                      0x016d0e99 -[NSObject performSelector:withObject:withObject:] + 73
    29  UIKit                               0x0003d14e -[UIApplication sendAction:to:from:forEvent:] + 96
    30  UIKit                               0x0003d0e6 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
    31  UIKit                               0x000e3ade -[UIControl sendAction:to:forEvent:] + 66
    32  UIKit                               0x000e3fa7 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
    33  UIKit                               0x000e3266 -[UIControl touchesEnded:withEvent:] + 549
    34  UIKit                               0x000623c0 -[UIWindow _sendTouchesForEvent:] + 513
    35  UIKit                               0x000625e6 -[UIWindow sendEvent:] + 273
    36  UIKit                               0x00048dc4 -[UIApplication sendEvent:] + 464
    37  UIKit                               0x0003c634 _UIApplicationHandleEvent + 8196
    38  GraphicsServices                    0x015b9ef5 PurpleEventCallback + 1274
    39  CoreFoundation                      0x016a3195 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    40  CoreFoundation                      0x01607ff2 __CFRunLoopDoSource1 + 146
    41  CoreFoundation                      0x016068da __CFRunLoopRun + 2218
    42  CoreFoundation                      0x01605d84 CFRunLoopRunSpecific + 212
    43  CoreFoundation                      0x01605c9b CFRunLoopRunInMode + 123
    44  GraphicsServices                    0x015b87d8 GSEventRunModal + 190
    45  GraphicsServices                    0x015b888a GSEventRun + 103
    46  UIKit                               0x0003a626 UIApplicationMain + 1163
    47  Course Table                        0x000020dd main + 141
    48  Course Table                        0x00002045 start + 53
)
2012-10-27 08:44:29.945 Course Table[306:fb03] *** Terminating app due to 
uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid 
update: invalid number of rows in section 0\.  The number of rows contained
in an existing section after the update (1) must be equal to the number 
of rows contained in that section before the update (1), plus or minus
the number of rows inserted or deleted from that section (1 inserted,
0 deleted) and plus or minus the number of rows moved into or out of that 
section (0 moved in, 0 moved out).
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T12:05:00.533

只需添加

```
[self.tableView reloadData]; 
```

前

```
self.editing = YES; 
```

这是必需的，因为表视图最初没有关于其数据源和委托的信息；如果您创建一个表视图，它总是需要在`reloadData`其初始化过程中发送一条消息。

# asp.net-mvc-4 - Elmah.MVC 2.0.1 - 保护 elmah 日志

> ID：13090213
> 
> 赞同：8
> 
> 时间：2012-10-26T15:51:05.123
> 
> 标签：asp.net-mvc-4, elmah, elmah.mvc

## 设置：

对于 ASP.NET MVC 4 应用程序，我使用 Elmah.MVC 2.0.1 来记录错误。

我使用 NuGet 安装了 Elmah.MVC。它工作正常。

## 问题：

Elmah.MVC 包没有安装控制器或区域，所以我看不到通过 Authorize 属性应用安全性的明显方法，正如 ASP.NET MVC 所推荐的那样。

## 问题：

我只希望管理员角色的用户能够查看 Elmah 页面。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-26T16:03:03.923

哎哟!

刚刚找到答案；

Elmah MVC 2.0.1 NuGet 包将以下内容添加到`<appSettings>`（在 web.config 中）：

```
<add key="elmah.mvc.requiresAuthentication" value="false" />
<add key="elmah.mvc.allowedRoles" value="*" /> 
```

为了实现我想要的简单：

```
<add key="elmah.mvc.requiresAuthentication" value="true" />
<add key="elmah.mvc.allowedRoles" value="Admin" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T15:30:04.210

我相信你也可以像这样使用 URL 访问控制：

```
 <location path="elmah.axd">
  <system.web>
    <httpHandlers>
      <add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
    </httpHandlers>
    <authorization>
      <allow roles="YourRole" />
      <deny users="*" />
    </authorization>
  </system.web>
  <system.webServer>
    <handlers>
      <add name="ELMAH" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
    </handlers>
  </system.webServer>
</location> 
```

# java - 在单个 TestNG 测试套件中按顺序运行参数化和非参数化测试

> ID：13090215
> 
> 赞同：0
> 
> 时间：2012-10-26T15:51:19.070
> 
> 标签：java, webdriver, testng

我在不同的类中有 webdriver 测试，有些是参数化的，有些是非参数化的。我在运行带有参数化和非参数化测试的测试套件时遇到问题。尽管我已将并行属性设置为 false，但参数化测试在非参数化完成之前开始。首先，我尝试在套件中创建不同的测试，在不同的测试中使用参数化和非参数化测试，但这不起作用。其次，我创建了不同的套件文件并将它们链接起来。但是，这仅在参数化套件首先启动时才有效，反之则无效。

```
<suite-files>
   <suite-file path="./ParameterizedTest.xml" />
 </suite-files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:30:25.507

您是否尝试在套件文件下为不同的 XML 组创建非参数化测试，例如：

```
<suite-files>
   <suite-file path="./ParameterizedTest.xml" />
   <suite-file path="./NoNParameterizedTest.xml" />
</suite-files> 
```

# javascript - 弧形文本中字符串字符之间的间距不太正确。（HTML 画布）

> ID：13090218
> 
> 赞同：1
> 
> 时间：2012-10-26T15:51:29.943
> 
> 标签：javascript, html, text, canvas, kerning

见这里 - [http://schnell.dreamhosters.com/nysbc/test6.php](http://schnell.dreamhosters.com/nysbc/test6.php)
JSFiddle - [http://jsfiddle.net/VauFH/](http://jsfiddle.net/VauFH/)

绘制文本的部分...

```
function draw_arc_text(ctx, str, radius){
            ctx.save();
            str = str.toUpperCase();
            var radians_per_letter = 8 * Math.PI/180;                                
            ctx.rotate((105 - (radius/60)) * Math.PI/180);
            for (var n = 0; n < str.length; n++) {
                ctx.save();
                ctx.rotate(n * radians_per_letter);
                ctx.fillText(str[n], 0, -radius);
                ctx.restore();
            }
            ctx.restore();
        } 
```

正如您可能知道的那样，彩色光盘顶部的文本之间的间距有点偏离。我尝试过为每个字母设置一定数量的弧度/度数，但是半径越远，间距就越大，因此最外面的文本开始快速分离。我还尝试制定某种公式，将半径纳入每个字母的间距，但我似乎也不能完全正确。有人有想法么？

此外，效率方面的任何调整也将受到赞赏。我喜欢尽可能优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:23:52.930

**[现场演示](http://jsfiddle.net/loktar/MdME7/)**

可能是数学家最糟糕的噩梦：P。以下工作虽然。基本上我只是将结果除以半径/100。它给人的印象是间距相等。

我所做的另一个更改是使用[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)而不是间隔。`setTimeout`与画布相比，尤其是与画布相比，间隔的性能不是很好`requestAnimationFrame`。当您离开标签并返回它时，您会注意到您不再遇到令人讨厌的挂断。

我还摆脱了对 jQuery 的依赖，因为你使用的只是`document.ready`它似乎不需要。

```
function draw_arc_text(ctx, str, radius){
                ctx.save();
                str = str.toUpperCase();

                var textWidth = Math.round(ctx.measureText(str).width);
                var radians_per_letter = (((textWidth/str.length)) * Math.PI/180)/(radius*.01);  

                ctx.rotate(95 * Math.PI/180);

                for (var n = 0; n < str.length; n++) {
                    ctx.save();
                    ctx.rotate(n * radians_per_letter);
                    ctx.fillText(str[n], 0, -radius);
                    ctx.restore();
                }
                ctx.restore();
            } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-26T16:00:56.063

我对画布元素没有太多经验，但是有什么方法可以`letter-spacing`在文本上使用 CSS 属性吗？

# jquery - 在jquery mobile中更改输入元素的值

> ID：13090221
> 
> 赞同：0
> 
> 时间：2012-10-26T15:51:34.703
> 
> 标签：jquery, mobile, rhomobile

当用户单击它时，我需要更改输入元素的文本。

我的js：

```
$('#list-add-contact').bind('click', function(){

    alert($('#list-add-contact').val())   //alerts "Add To Contacts"
    $("#list-add-contact").val("other val")
    alert($('#list-add-contact').val()) //alerts "other val"

}); 
```

但是，移动浏览器显示“添加到联系人”。它不显示“其他值”我必须调用一些特定的函数吗？我知道值发生了变化，因为我可以在警报中看到新值，但它不会在 UI 中显示

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:29:02.610

尝试焦点事件

```
$('#list-add-contact').bind('focus', function(){ 
```

看看[api参考](http://jquerymobile.com/test/docs/forms/textinputs/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:49:07.307

如果您要做的是在输入获得焦点后删除文本，则`placeholder`大多数移动浏览器都支持该属性（正是这样做的）。

```
<input id="list-add-contact" placeholder="Add To Contacts"> 
```

[http://www.w3schools.com/html5/att_input_placeholder.asp](http://www.w3schools.com/html5/att_input_placeholder.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:44:17.817

我变了：

```
$('#list-add-contact').bind('click', function(){ /* some function */ }) 
```

至：

```
$('#list-add-contact').click( function(){ /* some function */ }) 
```

它奏效了……

# python - 生成 UI 设置视图的最佳实践

> ID：13090222
> 
> 赞同：1
> 
> 时间：2012-10-26T15:51:54.903
> 
> 标签：python, user-interface, pyqt4

我的问题并非特定于 Python/PyQt4，而是我目前使用的语言和 api。我想知道是否有一个库可以从对象的公共参数自动生成 GUI 表单。这对于自动设置生成非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:03:16.140

无需搜索完全适合的库。另外，我认为，这是不必要的和浪费时间。有很多令人沮丧的问题，例如本地化设置、数字格式设置、验证问题等。

我建议，使用 Qt 设计器表单布局来快速创建表单。然后使用 pyqt4/QValidation，你可以使用一些正则表达式（python 新的正则表达式模块比 QRegExp 更好）。

同时，通过 jsonpickle 或仅 python pickle 管理自定义对象。

# python - 如何提高 PyQt4 QListWidget 的效率

> ID：13090223
> 
> 赞同：1
> 
> 时间：2012-10-26T15:52:03.533
> 
> 标签：python, pyqt4, qlistwidget

我有以下代码，想知道是否有办法让它更有效。setCurrentItem() 和 scrollToItem() 函数似乎大大减慢了进程。另外，我希望看到这些项目显示在列表中，因为它们是在循环完成后添加的，而不是一次全部添加。任何帮助或讨论将不胜感激。

```
import sys
from math import *
#from PyQt4 import QtCore, QtGui
from PyQt4.QtCore import (Qt, SIGNAL, QSize)
from PyQt4.QtGui import (QApplication, QDialog, QLabel, QListWidget, QListWidgetItem,     QPushButton, QScrollArea, QTextDocument, QVBoxLayout)
from time import localtime, strftime
import time

class LogDlg(QDialog):

  def __init__(self, parent=None):
    super(LogDlg, self).__init__(parent)
    self.resize(450, 380)

    self.log1 = QListWidget()
    self.log2 = QListWidget()
    lbl = QLabel()
    lbl_2 = QLabel()
    lbl.setText("Communications Log")
    lbl_2.setText("Command/Data Log")
    self.pushButton = QPushButton()
    self.pushButton.setMaximumSize(QSize(110, 24))
    self.pushButton.setObjectName("pushButton")

    self.pushbutton = QPushButton
    self.pushButton.setText("Start Log Loop")
    layout = QVBoxLayout()
    layout.addWidget(self.pushButton)
    layout.addWidget(lbl)
    layout.addWidget(self.log1)
    layout.addWidget(lbl_2)
    layout.addWidget(self.log2)
    self.setLayout(layout)
    self.setWindowTitle("Transaction Logs")
    self.connect(self.pushButton,SIGNAL("clicked()"),self.logLoop) 
    self.time = time.time()

  def logLoop(self):
    for i in range(1000):
        print i
        self.addLog("This is a test","c",True)      

  def timeStamp(self):
    now = time.time()
    localtime = time.localtime(now)
    milliseconds = '%02d' % int((now - int(now)) * 100)
    val = time.strftime('%H:%M:%S.', localtime) + milliseconds
    return val

  def clearUi(self):
    self.log1.clear()
    self.log2.clear()

  def addLog(self, data, type="c", ts=False):
#        pass
    t = self.timeStamp()
    if ts == True:
        data = t + " " + data
    if type == "c":
        self.listItem1 = QListWidgetItem()
        self.listItem1.setText(data)
        self.log1.addItem(self.listItem1)
#        self.log1.scrollToItem(self.listItem1)
        self.log1.setCurrentItem(self.listItem1)

    elif type == "d":
        self.listItem2 = QListWidgetItem()
        self.listItem2.setText(data)
        self.log2.addItem(self.listItem2)
#        self.log2.scrollToItem(self.listItem2)
        self.log2.setCurrentItem(self.listItem2)

app = QApplication(sys.argv)
form = LogDlg()
form.open()
app.exec_() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:55:55.867

`.scrollToItem`您的问题与or没有任何关系`.setCurrentItem`。方法中的循环`logLoop`不会给 Qt 事件循环任何更新事物的机会。解决它的一种方法是，让 Qt 有机会使用`QApplication.processEvents()`. 因此，如果您修改`logLoop`如下，您应该会看到添加的项目：

```
 def logLoop(self):
    for i in range(1000):
        print i
        self.addLog("This is a test","c",True)
        QApplication.processEvents() 
```

这在某种程度上是有用的。如果两者之间的时间`processEvents`足够小，您将获得响应式 UI。但是一旦事情变得更加复杂并且完成每个段的任务的时间增加了，您需要将该段代码委托给单独的线程 ( `QThread`) 以保持 GUI 响应。

另一个问题是，一旦您在`QListWidget`. 您可能会注意到添加第 25 项比添加第 925 项要快。那是因为`QListWidget`（或`QTableWidget`/ `QTreeWidget`）不能很好地扩展。如果您要拥有大量项目，模型/视图框架（// `QListView`）应该是您的选择。`QTableView``QTreeView`

# ajax - CURL 和 PHP 将用户与 Facebook 应用程序连接起来

> ID：13090225
> 
> 赞同：-5
> 
> 时间：2012-10-26T15:52:13.453
> 
> 标签：ajax, facebook, curl, firebug

通过 SMS 接收我们用户的 Facebook 用户名和密码，我们希望仅使用 PHP 和 CURL 将他们与我们的 Facebook 应用程序连接起来。

我让 CURL 可以登录用户并导航到 Facebook 应用中心。

但是现在，任何人都可以帮助我使用 cURL 进行 ajax url 调用并将变量设置为正确的值吗？

提前谢谢了！

我使用 Firebug 来获取 http 请求标头（示例）：

```
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Connection  keep-alive
Cookie  datr=uwFOULplg04OUafUhiZ0HuH3;
fr=01N5ffPgbtXUfTSbp.AWXd1IvmHVuGxr9GDRK9hpoYg
7g.BQTgHg.-8.AWXCZ9aq; lu=Rg6On5bhniBKFnROJOb7OApg; locale=en_GB;
c_user=100002533085804; csm=2; s=Aa5wBFIhYob4hVne.BQiowf;
xs=61%3AaaoKTpJSVJO6PA%3A2%3A1351257119; act=1351265044404%2F0%3A2; p=6;
presence=EM351265035EuserFA21B02533085804A2EstateFDsb2F0Et2F_5b_5dElm2
FnullEuct2F1351256551BEtrFA2loadA2EtwF1590615573EatF1351264924097G3512
65035755CEchFDp_5f1B02533085804F1CC; sub=34605056
Host    apps.facebook.com
Referer https://apps.facebook.com/thefind/?fb_source=search&fb_appcenter=1
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1
X-SVN-Rev   656775 
```

以及变量及其值： __a 1 __user 100002533085804 filter[0] app filter[1] page filter[2] group filter[3]friendlist lazy 1 token v7 viewer 100002533085804

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:06:48.660

您不应该收集您的用户密码来登录！这是[违反 TOS 的行为](https://developers.facebook.com/policy/)，是一种糟糕的做法。

相反，如果您想在 PHP 中执行此操作，您应该使用[服务器端登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)方法来验证您的用户。完成此过程后，他们将验证您的应用程序。

# python - 使用 ttk notebook 的两个选项卡，但两者的功能不同？

> ID：13090227
> 
> 赞同：4
> 
> 时间：2012-10-26T15:52:23.017
> 
> 标签：python, user-interface, tkinter, ttk

我目前正在使用 tk 制作一个 GUI，我已经实现了一个 ttk 笔记本，它有两个单独的选项卡，每个选项卡都保存数据，但调用相同的函数来与这些数据交互，这是一种理智的方法吗？还是我应该制作更多功能来单独调用它们？他们需要知道当前选择了哪个选项卡。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:03:26.210

这是一个向您展示如何执行此操作的链接，希望对您有所帮助=]

[Tkinter 笔记本演示](http://www.pyinmyeye.com/2012/08/tkinter-notebook-demo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:56:34.803

好的，这可能不是最好的方法，但是对于选项卡中的每个小部件，传递函数中的一个变量，然后在 if 语句中使用该变量来检查当前选择了哪个选项卡，因为您只使用两个 this可能是布尔值？如果需要更多，则需要更复杂的步骤，但这是一种简单的方法，但并不漂亮：p
xx

# c# - 在两个列表中查找计数

> ID：13090229
> 
> 赞同：0
> 
> 时间：2012-10-26T15:52:36.947
> 
> 标签：c#, linq, list, foreach, count

我有两个从数据库中获取的列表，如下所示：

```
List<myobject1> frstList = ClientManager.Get_FirstList( PostCode.Text, PhoneNumber.Text);
                List<myobject2> secondList = new List<myobject2>;

                foreach (var c in frstList )
                {
                    secondList.Add( ClaimManager.GetSecondList(c.ID));
                } 
```

现在我的列表将包含如下数据：

```
frstList: id = 1, id = 2
secondList: id=1 parentid = 1, id=2 parentid=1 and id = 3 parentid = 2 
```

我想单独计算这些并返回最重要的那个？在上面的例子中，它应该从 frsList 返回 id=1，从 secondList 返回 id1 和 id2 ...

试过这个但不工作

```
var numbers = (from c in frstList where c.Parent.ID == secondList.Select(cl=> cl.ID) select c).Count(); 
```

有人可以在 linq 或普通的 foreach 中帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:06:43.423

查看问题，您似乎想要确定哪个父节点具有最多的子节点，并且您希望输出是该父节点及其所有子节点。

查询相当简单：

```
var largestGroup = secondList.GroupBy(item => item.ParentID)
  .MaxBy(group => group.Count());  

var mostFrequentParent = largestGroup.Key;
var childrenOfMostFrequentParent = largestGroup.AsEnumerable(); 
```

我们只需要这个辅助函数`MaxBy`：

```
public static TSource MaxBy<TSource, TKey>(this IEnumerable<TSource> source
    , Func<TSource, TKey> selector
    , IComparer<TKey> comparer = null)
{
    if (comparer == null)
    {
        comparer = Comparer<TKey>.Default;
    }
    using (IEnumerator<TSource> iterator = source.GetEnumerator())
    {
        if (!iterator.MoveNext())
        {
            throw new ArgumentException("Source was empty");
        }

        TSource maxItem = iterator.Current;
        TKey maxValue = selector(maxItem);

        while (iterator.MoveNext())
        {
            TKey nextValue = selector(iterator.Current);
            if (comparer.Compare(nextValue, maxValue) > 0)
            {
                maxValue = nextValue;
                maxItem = iterator.Current;
            }
        }
        return maxItem;
    }
} 
```

# regex - 犯了一个错误| （或）在正则表达式中

> ID：13090230
> 
> 赞同：0
> 
> 时间：2012-10-26T15:52:40.067
> 
> 标签：regex, bash, grep

我确定我在这里做的事情很明显是错误的，但我不知道是什么。使用 bash shell 中的 grep，我有一个文件 test.txt：

```
ABC123
ABC456
ABC789
DEF123
DEF456
DEF789 
```

现在在命令行：

```
$ grep ABC test2.txt
ABC123
ABC456
ABC789

$ grep DEF test2.txt
DEF123
DEF456
DEF789 
```

所以那些工作很好。现在，我希望以下命令打印整个文件，但是：

```
$ grep ABC\|DEF test2.txt

$ grep (ABC)\|(DEF) test2.txt
-bash: syntax error near unexpected token `ABC'

$ grep \(ABC\)\|\(DEF\) test2.txt

$ grep 'ABC|DEF' test2.txt 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T15:55:16.227

使用 -E 打开扩展的正则表达式：

```
grep -E "ABC|DEF" test2.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:12:42.810

正如其他人指出的那样，标准`grep`命令不支持*or*语法。不幸的是，从那里开始，事情就变得混乱了。

*   某些系统具有`egrep`提供的*或*语法。
*   一些系统可以使用`-E`or `-P`（对于 Perl）标志来扩展 grep 语法。
*   有些系统同时具有 the`-E`和`egrep`that 做同样的事情。这意味着有一些系统在哪里`grep -E`并且`egrep`不一样。（悲伤但真实）。
*   `grep`一些系统现在在其标准命令中使用扩展的正则表达式。显然，您的系统没有。

阅读您的联机帮助页以了解您的系统支持什么。有些系统有一个手册页，用于`re_format`解释它们支持和不支持的扩展格式。

再说一次，你总是可以只使用 Perl 单行：

```
$ perl -ne "print if /(ABC)|(DEF)/" test.txt 
```

至少你知道所有支持的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T15:54:58.100

我认为标准语法不支持它。如果可用，您可以使用`-P`switch：

```
grep -P "(ABC|DEF)" test2.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T15:57:06.863

改为使用[`egrep`](http://unixhelp.ed.ac.uk/CGI/man-cgi?egrep)，这与使用相同`grep -E`：

```
egrep 'ABC|DEF' test2.txt 
```

# java - Java 日期解析器在时区 UT 和 UTC 上失败

> ID：13090233
> 
> 赞同：0
> 
> 时间：2012-10-26T15:52:51.647
> 
> 标签：java, date, simpledateformat, date-parsing

我想知道是否`SimpleDateFormat`可以挽救 Java 来解析时区 UCT 和 UT？例如

```
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy H:m:s Z");

String date1 = "Wed, 10 Oct 2012 11:21:22 UT"; //fails to parse
String date2 = "Wed, 10 Oct 2012 11:21:22 UTC"; //succeeds
String date3 = "Wed, 10 Oct 2012 11:21:22 EDT"; //succeeds 
```

可以拿`SimpleDateFormat`这个吗？或者是否有必要使用正则表达式进行预清理，或者是否建议派生或扩展日期解析器类，或者是否有另一个库具有足够相似的接口，可以在更多情况下使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:09:11.453

因为`UT`不是 java 中的有效时区。这是打印所有支持的时区的快速程序

```
for (String str : TimeZone.getAvailableIDs()) {
        System.out.println(str);
} 
```

输出：

```
Etc/GMT+12
Etc/GMT+11
MIT
Pacific/Apia
Pacific/Midway
Pacific/Niue
Pacific/Pago_Pago
Pacific/Samoa
US/Samoa
America/Adak
America/Atka
Etc/GMT+10
HST
Pacific/Fakaofo
Pacific/Honolulu
Pacific/Johnston
Pacific/Rarotonga
Pacific/Tahiti
SystemV/HST10
US/Aleutian
US/Hawaii
Pacific/Marquesas
AST
America/Anchorage
America/Juneau
America/Nome
America/Sitka
America/Yakutat
Etc/GMT+9
Pacific/Gambier
SystemV/YST9
SystemV/YST9YDT
US/Alaska
America/Dawson
America/Ensenada
America/Los_Angeles
America/Metlakatla
America/Santa_Isabel
America/Tijuana
America/Vancouver
America/Whitehorse
Canada/Pacific
Canada/Yukon
Etc/GMT+8
Mexico/BajaNorte
PST
PST8PDT
Pacific/Pitcairn
SystemV/PST8
SystemV/PST8PDT
US/Pacific
US/Pacific-New
America/Boise
America/Cambridge_Bay
America/Chihuahua
America/Dawson_Creek
America/Denver
America/Edmonton
America/Hermosillo
America/Inuvik
America/Mazatlan
America/Ojinaga
America/Phoenix
America/Shiprock
America/Yellowknife
Canada/Mountain
Etc/GMT+7
MST
MST7MDT
Mexico/BajaSur
Navajo
PNT
SystemV/MST7
SystemV/MST7MDT
US/Arizona
US/Mountain
America/Bahia_Banderas
America/Belize
America/Cancun
America/Chicago
America/Costa_Rica
America/El_Salvador
America/Guatemala
America/Indiana/Knox
America/Indiana/Tell_City
America/Knox_IN
America/Managua
America/Matamoros
America/Menominee
America/Merida
America/Mexico_City
America/Monterrey
America/North_Dakota/Beulah
America/North_Dakota/Center
America/North_Dakota/New_Salem
America/Rainy_River
America/Rankin_Inlet
America/Regina
America/Swift_Current
America/Tegucigalpa
America/Winnipeg
CST
CST6CDT
Canada/Central
Canada/East-Saskatchewan
Canada/Saskatchewan
Chile/EasterIsland
Etc/GMT+6
Mexico/General
Pacific/Easter
Pacific/Galapagos
SystemV/CST6
SystemV/CST6CDT
US/Central
US/Indiana-Starke
America/Atikokan
America/Bogota
America/Cayman
America/Coral_Harbour
America/Detroit
America/Fort_Wayne
America/Grand_Turk
America/Guayaquil
America/Havana
America/Indiana/Indianapolis
America/Indiana/Marengo
America/Indiana/Petersburg
America/Indiana/Vevay
America/Indiana/Vincennes
America/Indiana/Winamac
America/Indianapolis
America/Iqaluit
America/Jamaica
America/Kentucky/Louisville
America/Kentucky/Monticello
America/Lima
America/Louisville
America/Montreal
America/Nassau
America/New_York
America/Nipigon
America/Panama
America/Pangnirtung
America/Port-au-Prince
America/Resolute
America/Thunder_Bay
America/Toronto
Canada/Eastern
Cuba
EST
EST5EDT
Etc/GMT+5
IET
Jamaica
SystemV/EST5
SystemV/EST5EDT
US/East-Indiana
US/Eastern
US/Michigan
America/Caracas
America/Anguilla
America/Antigua
America/Argentina/San_Luis
America/Aruba
America/Asuncion
America/Barbados
America/Blanc-Sablon
America/Boa_Vista
America/Campo_Grande
America/Cuiaba
America/Curacao
America/Dominica
America/Eirunepe
America/Glace_Bay
America/Goose_Bay
America/Grenada
America/Guadeloupe
America/Guyana
America/Halifax
America/La_Paz
America/Manaus
America/Marigot
America/Martinique
America/Moncton
America/Montserrat
America/Port_of_Spain
America/Porto_Acre
America/Porto_Velho
America/Puerto_Rico
America/Rio_Branco
America/Santiago
America/Santo_Domingo
America/St_Barthelemy
America/St_Kitts
America/St_Lucia
America/St_Thomas
America/St_Vincent
America/Thule
America/Tortola
America/Virgin
Antarctica/Palmer
Atlantic/Bermuda
Atlantic/Stanley
Brazil/Acre
Brazil/West
Canada/Atlantic
Chile/Continental
Etc/GMT+4
PRT
SystemV/AST4
SystemV/AST4ADT
America/St_Johns
CNT
Canada/Newfoundland
AGT
America/Araguaina
America/Argentina/Buenos_Aires
America/Argentina/Catamarca
America/Argentina/ComodRivadavia
America/Argentina/Cordoba
America/Argentina/Jujuy
America/Argentina/La_Rioja
America/Argentina/Mendoza
America/Argentina/Rio_Gallegos
America/Argentina/Salta
America/Argentina/San_Juan
America/Argentina/Tucuman
America/Argentina/Ushuaia
America/Bahia
America/Belem
America/Buenos_Aires
America/Catamarca
America/Cayenne
America/Cordoba
America/Fortaleza
America/Godthab
America/Jujuy
America/Maceio
America/Mendoza
America/Miquelon
America/Montevideo
America/Paramaribo
America/Recife
America/Rosario
America/Santarem
America/Sao_Paulo
Antarctica/Rothera
BET
Brazil/East
Etc/GMT+3
America/Noronha
Atlantic/South_Georgia
Brazil/DeNoronha
Etc/GMT+2
America/Scoresbysund
Atlantic/Azores
Atlantic/Cape_Verde
Etc/GMT+1
Africa/Abidjan
Africa/Accra
Africa/Bamako
Africa/Banjul
Africa/Bissau
Africa/Casablanca
Africa/Conakry
Africa/Dakar
Africa/El_Aaiun
Africa/Freetown
Africa/Lome
Africa/Monrovia
Africa/Nouakchott
Africa/Ouagadougou
Africa/Sao_Tome
Africa/Timbuktu
America/Danmarkshavn
Atlantic/Canary
Atlantic/Faeroe
Atlantic/Faroe
Atlantic/Madeira
Atlantic/Reykjavik
Atlantic/St_Helena
Eire
Etc/GMT
Etc/GMT+0
Etc/GMT-0
Etc/GMT0
Etc/Greenwich
Etc/UCT
Etc/UTC
Etc/Universal
Etc/Zulu
Europe/Belfast
Europe/Dublin
Europe/Guernsey
Europe/Isle_of_Man
Europe/Jersey
Europe/Lisbon
Europe/London
GB
GB-Eire
GMT
GMT0
Greenwich
Iceland
Portugal
UCT
UTC
Universal
WET
Zulu
Africa/Algiers
Africa/Bangui
Africa/Brazzaville
Africa/Ceuta
Africa/Douala
Africa/Kinshasa
Africa/Lagos
Africa/Libreville
Africa/Luanda
Africa/Malabo
Africa/Ndjamena
Africa/Niamey
Africa/Porto-Novo
Africa/Tunis
Africa/Windhoek
Arctic/Longyearbyen
Atlantic/Jan_Mayen
CET
ECT
Etc/GMT-1
Europe/Amsterdam
Europe/Andorra
Europe/Belgrade
Europe/Berlin
Europe/Bratislava
Europe/Brussels
Europe/Budapest
Europe/Copenhagen
Europe/Gibraltar
Europe/Ljubljana
Europe/Luxembourg
Europe/Madrid
Europe/Malta
Europe/Monaco
Europe/Oslo
Europe/Paris
Europe/Podgorica
Europe/Prague
Europe/Rome
Europe/San_Marino
Europe/Sarajevo
Europe/Skopje
Europe/Stockholm
Europe/Tirane
Europe/Vaduz
Europe/Vatican
Europe/Vienna
Europe/Warsaw
Europe/Zagreb
Europe/Zurich
MET
Poland
ART
Africa/Blantyre
Africa/Bujumbura
Africa/Cairo
Africa/Gaborone
Africa/Harare
Africa/Johannesburg
Africa/Kigali
Africa/Lubumbashi
Africa/Lusaka
Africa/Maputo
Africa/Maseru
Africa/Mbabane
Africa/Tripoli
Asia/Amman
Asia/Beirut
Asia/Damascus
Asia/Gaza
Asia/Istanbul
Asia/Jerusalem
Asia/Nicosia
Asia/Tel_Aviv
CAT
EET
Egypt
Etc/GMT-2
Europe/Athens
Europe/Bucharest
Europe/Chisinau
Europe/Helsinki
Europe/Istanbul
Europe/Kaliningrad
Europe/Kiev
Europe/Mariehamn
Europe/Minsk
Europe/Nicosia
Europe/Riga
Europe/Simferopol
Europe/Sofia
Europe/Tallinn
Europe/Tiraspol
Europe/Uzhgorod
Europe/Vilnius
Europe/Zaporozhye
Israel
Libya
Turkey
Africa/Addis_Ababa
Africa/Asmara
Africa/Asmera
Africa/Dar_es_Salaam
Africa/Djibouti
Africa/Kampala
Africa/Khartoum
Africa/Mogadishu
Africa/Nairobi
Antarctica/Syowa
Asia/Aden
Asia/Baghdad
Asia/Bahrain
Asia/Kuwait
Asia/Qatar
Asia/Riyadh
EAT
Etc/GMT-3
Europe/Moscow
Europe/Samara
Europe/Volgograd
Indian/Antananarivo
Indian/Comoro
Indian/Mayotte
W-SU
Asia/Riyadh87
Asia/Riyadh88
Asia/Riyadh89
Mideast/Riyadh87
Mideast/Riyadh88
Mideast/Riyadh89
Asia/Tehran
Iran
Asia/Baku
Asia/Dubai
Asia/Muscat
Asia/Tbilisi
Asia/Yerevan
Etc/GMT-4
Indian/Mahe
Indian/Mauritius
Indian/Reunion
NET
Asia/Kabul
Antarctica/Mawson
Asia/Aqtau
Asia/Aqtobe
Asia/Ashgabat
Asia/Ashkhabad
Asia/Dushanbe
Asia/Karachi
Asia/Oral
Asia/Samarkand
Asia/Tashkent
Asia/Yekaterinburg
Etc/GMT-5
Indian/Kerguelen
Indian/Maldives
PLT
Asia/Calcutta
Asia/Colombo
Asia/Kolkata
IST
Asia/Kathmandu
Asia/Katmandu
Antarctica/Vostok
Asia/Almaty
Asia/Bishkek
Asia/Dacca
Asia/Dhaka
Asia/Novokuznetsk
Asia/Novosibirsk
Asia/Omsk
Asia/Qyzylorda
Asia/Thimbu
Asia/Thimphu
BST
Etc/GMT-6
Indian/Chagos
Asia/Rangoon
Indian/Cocos
Antarctica/Davis
Asia/Bangkok
Asia/Ho_Chi_Minh
Asia/Hovd
Asia/Jakarta
Asia/Krasnoyarsk
Asia/Phnom_Penh
Asia/Pontianak
Asia/Saigon
Asia/Vientiane
Etc/GMT-7
Indian/Christmas
VST
Antarctica/Casey
Asia/Brunei
Asia/Choibalsan
Asia/Chongqing
Asia/Chungking
Asia/Harbin
Asia/Hong_Kong
Asia/Irkutsk
Asia/Kashgar
Asia/Kuala_Lumpur
Asia/Kuching
Asia/Macao
Asia/Macau
Asia/Makassar
Asia/Manila
Asia/Shanghai
Asia/Singapore
Asia/Taipei
Asia/Ujung_Pandang
Asia/Ulaanbaatar
Asia/Ulan_Bator
Asia/Urumqi
Australia/Perth
Australia/West
CTT
Etc/GMT-8
Hongkong
PRC
Singapore
Australia/Eucla
Asia/Dili
Asia/Jayapura
Asia/Pyongyang
Asia/Seoul
Asia/Tokyo
Asia/Yakutsk
Etc/GMT-9
JST
Japan
Pacific/Palau
ROK
ACT
Australia/Adelaide
Australia/Broken_Hill
Australia/Darwin
Australia/North
Australia/South
Australia/Yancowinna
AET
Antarctica/DumontDUrville
Asia/Sakhalin
Asia/Vladivostok
Australia/ACT
Australia/Brisbane
Australia/Canberra
Australia/Currie
Australia/Hobart
Australia/Lindeman
Australia/Melbourne
Australia/NSW
Australia/Queensland
Australia/Sydney
Australia/Tasmania
Australia/Victoria
Etc/GMT-10
Pacific/Chuuk
Pacific/Guam
Pacific/Port_Moresby
Pacific/Saipan
Pacific/Truk
Pacific/Yap
Australia/LHI
Australia/Lord_Howe
Antarctica/Macquarie
Asia/Anadyr
Asia/Kamchatka
Asia/Magadan
Etc/GMT-11
Pacific/Efate
Pacific/Guadalcanal
Pacific/Kosrae
Pacific/Noumea
Pacific/Pohnpei
Pacific/Ponape
SST
Pacific/Norfolk
Antarctica/McMurdo
Antarctica/South_Pole
Etc/GMT-12
Kwajalein
NST
NZ
Pacific/Auckland
Pacific/Fiji
Pacific/Funafuti
Pacific/Kwajalein
Pacific/Majuro
Pacific/Nauru
Pacific/Tarawa
Pacific/Wake
Pacific/Wallis
NZ-CHAT
Pacific/Chatham
Etc/GMT-13
Pacific/Enderbury
Pacific/Tongatapu
Etc/GMT-14
Pacific/Kiritimati 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:23:50.567

这是一个错误，[**`6609397 : [Fmt-Da] RFE: SimpleDateFormat does not accept UT as a timezone`**](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=57f187b1d756f8ffffffffb7496c6f380d23b?bug_id=6609397)其中提到：-

> SimpleDateFormat 表示它将采用任何 RFC822 格式的“z”时区，定义如下。但是，“UT”不解析。

```
zone        =  "UT"  / "GMT"                ; Universal Time
                                                 ; North American : UT
                 /  "EST" / "EDT"                ;  Eastern:  - 5/ - 4
                 /  "CST" / "CDT"                ;  Central:  - 6/ - 5
                 /  "MST" / "MDT"                ;  Mountain: - 7/ - 6
                 /  "PST" / "PDT"                ;  Pacific:  - 8/ - 7
                 /  1ALPHA                       ; Military: Z = UT;
                                                 ;  A:-1; (J not used)
                                                 ;  M:-12; N:+1; Y:+12
                 / ( ("+" / "-") 4DIGIT )        ; Local differential
                                                 ;  hours+min. (HHMM) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:11:58.707

不，恐怕不能。我找不到 UT 时区，怀疑 java 也找不到。我的消息来源：

*   [http://en.wikipedia.org/wiki/List_of_tz_database_time_zones](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)
*   [http://joda-time.sourceforge.net/timezones.html](http://joda-time.sourceforge.net/timezones.html)

我认为您唯一的选择是预处理您的输入，将 UT 变成某种标准时区。

Joda time 将是另一个在更多情况下具有类似界面的库。

# bash - applescript 和终端（在一个终端窗口中运行多个 do shell 脚本）

> ID：13090235
> 
> 赞同：3
> 
> 时间：2012-10-26T15:53:10.580
> 
> 标签：bash, shell, applescript

我确实有几个 shell 脚本被激活并没有真正相互支持。

但我想留在同一个终端窗口中。

为了简化问题，让我们说作为例子

第一个脚本。- cd 到第二个工作目录。- 做一些事情并从第三个目录中获取文件。- 在该目录中的新文件/文件夹上做更多的事情。第四。- ....

如何让脚本 2 和 3（因此所有脚本）在脚本 1 期间打开的同一个目录和窗口中运行？

我如何避免为每个文件使用该文件夹的完整路径。

编辑：在 adayzdone 的回答之后，我意识到我忘了提到我还需要其中一个脚本的管理员权限

EDIT2：现在我用这个

```
tell application "Terminal"
    set newTab to do script
    set current settings of newTab to settings set "Grass"
    do script "bin/sh/ echo 'xx' | su;" in newTab
    do script "cd " & quoted form of realParentPath in newTab
    do script shellscript1 in newTab
    do script shellscript..n in newTab
    activate
end tell 
```

但仍然没有骰子的特权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:55:14.093

尝试：

```
tell application "Terminal"
    do script "cd ~/" in window 1
    do script "ls -a" in window 1
end tell 
```

或者

```
property usr : "username"
property pswd : "password"

set xxx to do shell script "cd ~/ ; ls -a " user name usr password pswd with administrator privileges 
```

# memcached - 安装 pecl memcache .. gcc 编译器不起作用

> ID：13090246
> 
> 赞同：0
> 
> 时间：2012-10-26T15:54:00.253
> 
> 标签：memcached, mamp, pecl

我正在尝试使用以下命令安装带有 MAMP 的 memcache：

**pecl 我的内存缓存**

但我得到了错误：

**检查 gcc... gcc
检查 C 编译器是否工作... 否**

我正在使用 MAMP 2.1.1 和 PHP 5.4.4 运行 OS X Mountain Lion。我安装了 XCode 4.5。似乎根本无法弄清楚这一点。

这是我的输出：

```
new-host-2:bin dwight$ sudo ./pecl i memcache
downloading memcache-2.2.7.tgz ...
Starting to download memcache-2.2.7.tgz (36,459 bytes)
..........done: 36,459 bytes
11 source files, building
WARNING: php_bin /Applications/MAMP/bin/php/php5.4.4/bin/php appears to have a suffix /php5.4.4/bin/php, but config variable php_suffix does not match
running: phpize
Configuring for:
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:3: warning: prefer named diversions
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3556: AC_LIBTOOL_LINKER_OPTION is expanded from...
aclocal.m4:5568: _LT_AC_LANG_C_CONFIG is expanded from...
aclocal.m4:5463: AC_LIBTOOL_LANG_C_CONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_pic_works, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3519: AC_LIBTOOL_COMPILER_OPTION is expanded from...
aclocal.m4:8090: AC_LIBTOOL_PROG_COMPILER_PIC is expanded from...
aclocal.m4:5568: _LT_AC_LANG_C_CONFIG is expanded from...
aclocal.m4:5463: AC_LIBTOOL_LANG_C_CONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_pic_works_CXX, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3519: AC_LIBTOOL_COMPILER_OPTION is expanded from...
aclocal.m4:8090: AC_LIBTOOL_PROG_COMPILER_PIC is expanded from...
aclocal.m4:6520: _LT_AC_LANG_CXX_CONFIG is expanded from...
aclocal.m4:5576: AC_LIBTOOL_LANG_CXX_CONFIG is expanded from...
aclocal.m4:4708: _LT_AC_TAGCONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
configure.in:3: warning: prefer named diversions
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_static_works, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3556: AC_LIBTOOL_LINKER_OPTION is expanded from...
aclocal.m4:5568: _LT_AC_LANG_C_CONFIG is expanded from...
aclocal.m4:5463: AC_LIBTOOL_LANG_C_CONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_pic_works, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3519: AC_LIBTOOL_COMPILER_OPTION is expanded from...
aclocal.m4:8090: AC_LIBTOOL_PROG_COMPILER_PIC is expanded from...
aclocal.m4:5568: _LT_AC_LANG_C_CONFIG is expanded from...
aclocal.m4:5463: AC_LIBTOOL_LANG_C_CONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
configure.in:77: warning: AC_CACHE_VAL(lt_prog_compiler_pic_works_CXX, ...): suspicious cache-id, must contain _cv_ to be cached
../../lib/autoconf/general.m4:2046: AC_CACHE_VAL is expanded from...
../../lib/autoconf/general.m4:2059: AC_CACHE_CHECK is expanded from...
aclocal.m4:3519: AC_LIBTOOL_COMPILER_OPTION is expanded from...
aclocal.m4:8090: AC_LIBTOOL_PROG_COMPILER_PIC is expanded from...
aclocal.m4:6520: _LT_AC_LANG_CXX_CONFIG is expanded from...
aclocal.m4:5576: AC_LIBTOOL_LANG_CXX_CONFIG is expanded from...
aclocal.m4:4708: _LT_AC_TAGCONFIG is expanded from...
aclocal.m4:3080: AC_LIBTOOL_SETUP is expanded from...
aclocal.m4:2938: _AC_PROG_LIBTOOL is expanded from...
aclocal.m4:2918: AC_PROG_LIBTOOL is expanded from...
configure.in:77: the top level
Enable memcache session handler support? [yes] : yes
building in /usr/local/temp/pear-build-root6g1r2w/memcache-2.2.7
running: /usr/local/temp/memcache/configure --enable-memcache-session=yes
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for a sed that does not truncate output... /usr/bin/sed
checking for gcc... gcc
checking whether the C compiler works... no
configure: error: in `/usr/local/temp/pear-build-root6g1r2w/memcache-2.2.7':
configure: error: C compiler cannot create executables
See `config.log' for more details
ERROR: `/usr/local/temp/memcache/configure --enable-memcache-session=yes' failed
new-host-2:bin dwight$ 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:46:20.203

想通了。它在错误的地方寻找 XCode。使用此命令修复：

```
sudo xcode-select -switch /Developer/Applications/Xcode.app/Contents/Developer 
```

（而不仅仅是 /Applications/Xcode.app/Contents/Developer 我认为它可能会默认安装）

# sql-server-2008 - IIS SQL 连接在重负载下失败；暂时重置 IIS 修复

> ID：13090256
> 
> 赞同：4
> 
> 时间：2012-10-26T15:54:45.627
> 
> 标签：sql-server-2008, iis, connection

服务器 1：SQL Server 2008 标准版服务器 2：Windows 2008 Server R2、IIS 7.0

服务器 2 上的网站需要服务器 1 上的 SQL Server 中的数据。

一段时间内一切正常（有时数周）。然后，在重负载下，服务器 2 报告它无法连接服务器 1 上的 SQL Server。一旦服务器 2 上的 IIS 报告它无法连接到服务器 1 上的 SQL，它不会好转，直到服务器 2 上的 IIS 重新启动。也许重新启动应用程序池与完全重置 IIS 一样有效。我不确定。

我尝试更改连接字符串以将连接池大小增加到不合理的大值（1,000）。失败仍然发生。

该网站是用 C# 编写的。数据访问层是 NHibernate。

这是异常的开始：

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)]
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +428
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +65
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +117
   System.Data.SqlClient.SqlConnection.Open() +122
   NHibernate.Connection.DriverConnectionProvider.GetConnection() +60
   NHibernate.Impl.SessionFactoryImpl.OpenConnection() +39 
```

任何想法为什么会发生这种情况？如何诊断/修复它？我很沮丧并考虑淘汰 NHibernate，这将需要几个月的时间，并且可能会导致许多其他类型的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:53:04.033

我认为您还必须增加连接超时值和连接池。这样它就不会在重负载时释放与 SQL Server 的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T01:53:57.367

对我来说，解决方法是将 SQL 服务器配置为允许无限数量的连接（设置为“0”值）。如原始帖子中所述，我仍然遇到一些连接问题，但远没有那么严重。因此，我还通过每个服务器上的辅助以太网端口（Webserver 到 SQL Server）设置了与 SQL 服务器的直接连接，并使用服务器之间的 196.168.1.x 保持连接私有，并使用它自己的未连接到的以太网交换机公共开关。

# jquery - 什么是悬停图像按钮以获得最快结果的最佳方式 - CSS，jQuery

> ID：13090258
> 
> 赞同：1
> 
> 时间：2012-10-26T15:54:47.550
> 
> 标签：jquery, css, hover, head

我提前为这个可能含糊的一般问题道歉，但最近我一直在想这个问题。

目前，我使用了几个按钮，这些按钮在悬停图像时会发生变化（在几个站点中）。有些是微妙的，背景颜色会发生变化，有些是 CSS 伪类悬停整个图像，有些使用 jQuery 悬停方法。似乎某些事情需要不同的策略。但是在将这些作为一个整体进行检查后，似乎我并没有真正使用一致的方法。

我的问题是，一般来说，最好的方法是什么，以使页面最快并保持一致？尽管它工作正常，但在我的 CSS 文件中多次调用图像似乎不是最佳做法。也许我错了。

但是，如果我有很多 jQuery 脚本正在运行，那似乎也有矛盾之处。我查看了其他站点，它们似乎有更多`*.js`文件，而不是在`<head>`. 例如，目前，我有一个包含大部分 jQuery 脚本的头文件。我这样做是因为我总是被教导将这些脚本保留在`<head>`标签中。例如，将脚本添加到更接近 HTML 代码以提高可读性会更好吗？

我应该将 JavaScript 移出到他们自己的文件中，并且只将它们包含在`<head>`? 我的页面工作得比较好，但是我还没有成功地说我有一个针对这种现象的框架。在我去重构这些页面之前，我正在尝试改进我的这种工作策略。

提前感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:01:58.063

不要在 head 中包含 js 文件，使用[RequireJS](http://requirejs.org/)或 head.js 异步加载你的 js 文件。

hoover 仅使用 CSS 并将所有图像合并到一个精灵中，这样您将获得更快的页面加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:58:54.583

您应该将常用功能放在单独`.js`的文件中，因为浏览器可以缓存它们。如果您将相同的 js 函数剪切并粘贴到每个 HTML 文件中，浏览器将需要在每个页面中下载它（至少在第一次加载时）。此外，它显然会*更*容易维护！

而且我倾向于尽可能使用`css`，因为至少当用户禁用 JavaScript 时它会起作用（假设他们的浏览器实际上实现了所有最新的 css 功能，他们可能不会！）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:04:31.740

您也可以使用 css 创建淡入淡出效果。如果您使用不同背景颜色的图像，则不要。您可以使用 CSS 获得良好的背景颜色和悬停效果。

```
<ul class="nav-fade">
   <li>Home</li>
   <li>Tutorials</li>
   <li>Articles</li>
</ul> 
```

CSS 淡化这个菜单

```
.nav-fade li {
   background: #fff;
   padding: 3px 8px;
   display: inline-block;
   transition: background .25s ease-in-out;
   -moz-transition: background .25s ease-in-out;
   -webkit-transition: background .25s ease-in-out;
   }

   .nav-fade li:hover {
      background: #ddd;
      } 
```

来源：http : [//bavotasan.com/2011/a-simple-fade-with-css3/](http://bavotasan.com/2011/a-simple-fade-with-css3/)

# java - 如何从子类的静态方法中获取类？

> ID：13090264
> 
> 赞同：-1
> 
> 时间：2012-10-26T15:54:57.997
> 
> 标签：java

```
/**
 * this is my class, yadayada. Needs to be subclassed to be useful.
 */
public abstract class MyClass {
  ...
  public static void myMethod() {
    // What is the name of the subclass that's using this?
    System.out.println("Called from class " + this.getClass().class.getName());
    // Doesn't work because there's no "this" in a static method.
  }
} 
```

编辑：这就是我想要发生的事情：

```
public class FooClass extends MyClass {
  ...
}

FooClass.myMethod();   // I would like this to print "Called from class FooClass" 
```

我完全没主意了。

编辑：对于那些想知道我为什么这样做的人来说，这实际上是一个 Android 问题。

Android 定义了一个名为 BroadcastReceiver 的类。您将其子类化并向系统注册您的子类。当发送适当的广播时，系统会创建您的子类的实例并调用其方法之一。

我想创建自己的 BroadcastReceiver 子类，其中包含一个用于注册自身的静态方法。但我也希望它是可子类化的。它看起来像这样：

```
/**
 * My special-purpose BroadcastReceiver.  Subclass this to use it.
 */
public class MyClass extends BroadcastReceiver {
  public static scheduleAnAlarm(long when) {
    // do some class-specific stuff
    AlarmManager.scheduleBroadcast(MyClass.class, when);
  }

  public void onBroadcast() {
    System.out.println("You should subclass MyClass for it to be useful");
  }
} 
```

我的问题是我想注册要实例化的子类，而不是 MyClass。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T15:58:43.220

你不能。也就是说，您无法`class`从方法中获取子类的`static`。

当 Java 调用一个`static`类（甚至是`abstract`）上的方法时，不需要子类，因此类加载器不会加载任何子类。因此，不一定要获得任何子类。即使有，也可能有多个子类，那么 Java 怎么决定你想要哪一个呢？

编辑，即使您进行了编辑，您也无法获得子类。您可以使用一个技巧来获取调用类。您可以抛出/捕获异常，然后沿着堆栈跟踪一层来获取调用方法/类。不建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:58:26.340

我猜你想要类名，那么下面的东西可能会起作用：

```
 System.out.println("Called from class " + MyClass.class.getName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:58:36.350

`this`将无法在静态上下文中工作您可以访问的类实例是`MyClass.class`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T15:59:29.700

MyClass.class.getName() 怎么样？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T16:08:04.680

```
public class Foo extends MyClass{

    public static void main(String[] args) {
        myMethod();
    }
} 
```

和

```
public abstract class MyClass{

    public static void myMethod() {

        System.out.println("Called from class " + MyClass.class.getName());

    }
} 
```

# java - 从 Byte[] 中读取一个数字

> ID：13090265
> 
> 赞同：0
> 
> 时间：2012-10-26T15:55:04.230
> 
> 标签：java, byte

> **可能重复：**
> [在 Byte[] 中创建后检索我的号码](https://stackoverflow.com/questions/13089764/retreive-my-number-after-make-it-in-byte)

我想在 Byte[] 中创建一个基本数字后检索它

```
 public static void main(String[] args) throws IOException {
       LinkedList<Byte> s1 = new LinkedList<Byte>();
       String a = "0.111112345";
       for (byte bb : a.getBytes()) {
            s1.add(bb);
            }
 //how to retrieve "0.111112345"; from s1 ?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T15:57:58.777

首先，*不要在*没有`getBytes()`指定编码的情况下使用——它将使用平台默认编码，这几乎不是你想要的。

鉴于您有字节是数字*文本*表示的二进制表示，听起来您基本上应该将其转换回字符串，然后使用`Double.parseDouble(...)`or `new BigDecimal(...)`。

如果你有一些数字的“真正二进制”表示，那将是另一回事 - 但这是一个文本表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:01:51.040

如果您想要将`s1`集合转换为数字的表示形式，请执行以下操作：

```
String number = "";
for(byte b : s1)
    number += (char) b;
System.out.println("The number is:" + number); 
```

如果你想要一个数字类型：

```
double dbl = Double.parseDouble(number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:08:11.427

双数 = Double.parseDouble(new String(s1.toArray(new Byte[s1.size])))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:30:00.793

你没有得到它。事情没那么简单。您的代码中的问题是您正在转换`String to bytes`. 只是给你一个例子

```
 System.out.println(Arrays.toString("10".getBytes())); 
```

将打印`[49, 48]`这是因为编码所以没有直接映射`String to Bytes`

下面是来自[FloatingDecimal](http://www.docjar.com/html/api/sun/misc/FloatingDecimal.java.html)的代码，正如您所见，它完成的工作比您现在所做的要困难得多。

```
 999       public static FloatingDecimal
     1000       readJavaFormatString( String in ) throws NumberFormatException {
     1001           boolean isNegative = false;
     1002           boolean signSeen   = false;
     1003           int     decExp;
     1004           char    c;
     1005   
     1006       parseNumber:
     1007           try{
     1008               in = in.trim(); // don't fool around with white space.
     1009                               // throws NullPointerException if null
     1010               int l = in.length();
     1011               if ( l == 0 ) throw new NumberFormatException("empty String");
     1012               int i = 0;
     1013               switch ( c = in.charAt( i ) ){
     1014               case '-':
     1015                   isNegative = true;
     1016                   //FALLTHROUGH
     1017               case '+':
     1018                   i++;
     1019                   signSeen = true;
     1020               }
     1021   
     1022               // Check for NaN and Infinity strings
     1023               c = in.charAt(i);
     1024               if(c == 'N' || c == 'I') { // possible NaN or infinity
     1025                   boolean potentialNaN = false;
     1026                   char targetChars[] = null;  // char array of "NaN" or "Infinity"
     1027   
     1028                   if(c == 'N') {
     1029                       targetChars = notANumber;
     1030                       potentialNaN = true;
     1031                   } else {
     1032                       targetChars = infinity;
     1033                   }
     1034   
     1035                   // compare Input string to "NaN" or "Infinity"
     1036                   int j = 0;
     1037                   while(i < l && j < targetChars.length) {
     1038                       if(in.charAt(i) == targetChars[j]) {
     1039                           i++; j++;
     1040                       }
     1041                       else // something is amiss, throw exception
     1042                           break parseNumber;
     1043                   }
     1044   
     1045                   // For the candidate string to be a NaN or infinity,
     1046                   // all characters in input string and target char[]
     1047                   // must be matched ==> j must equal targetChars.length
     1048                   // and i must equal l
     1049                   if( (j == targetChars.length) && (i == l) ) { // return NaN or infinity
     1050                       return (potentialNaN ? new FloatingDecimal(Double.NaN) // NaN has no sign
     1051                               : new FloatingDecimal(isNegative?
     1052                                                     Double.NEGATIVE_INFINITY:
     1053                                                     Double.POSITIVE_INFINITY)) ;
     1054                   }
     1055                   else { // something went wrong, throw exception
     1056                       break parseNumber;
     1057                   }
     1058   
     1059               } else if (c == '0')  { // check for hexadecimal floating-point number
     1060                   if (l > i+1 ) {
     1061                       char ch = in.charAt(i+1);
     1062                       if (ch == 'x' || ch == 'X' ) // possible hex string
     1063                           return parseHexString(in);
     1064                   }
     1065               }  // look for and process decimal floating-point string
     1066   
     1067               char[] digits = new char[ l ];
     1068               int    nDigits= 0;
     1069               boolean decSeen = false;
     1070               int decPt = 0;
     1071               int nLeadZero = 0;
     1072               int nTrailZero= 0;
     1073           digitLoop:
     1074               while ( i < l ){
     1075                   switch ( c = in.charAt( i ) ){
     1076                   case '0':
     1077                       if ( nDigits > 0 ){
     1078                           nTrailZero += 1;
     1079                       } else {
     1080                           nLeadZero += 1;
     1081                       }
     1082                       break; // out of switch.
     1083                   case '1':
     1084                   case '2':
     1085                   case '3':
     1086                   case '4':
     1087                   case '5':
     1088                   case '6':
     1089                   case '7':
     1090                   case '8':
     1091                   case '9':
     1092                       while ( nTrailZero > 0 ){
     1093                           digits[nDigits++] = '0';
     1094                           nTrailZero -= 1;
     1095                       }
     1096                       digits[nDigits++] = c;
     1097                       break; // out of switch.
     1098                   case '.':
     1099                       if ( decSeen ){
     1100                           // already saw one ., this is the 2nd.
     1101                           throw new NumberFormatException("multiple points");
     1102                       }
     1103                       decPt = i;
     1104                       if ( signSeen ){
     1105                           decPt -= 1;
     1106                       }
     1107                       decSeen = true;
     1108                       break; // out of switch.
     1109                   default:
     1110                       break digitLoop;
     1111                   }
     1112                   i++;
     1113               }
     1114               /*
     1115                * At this point, we've scanned all the digits and decimal
     1116                * point we're going to see. Trim off leading and trailing
     1117                * zeros, which will just confuse us later, and adjust
     1118                * our initial decimal exponent accordingly.
     1119                * To review:
     1120                * we have seen i total characters.
     1121                * nLeadZero of them were zeros before any other digits.
     1122                * nTrailZero of them were zeros after any other digits.
     1123                * if ( decSeen ), then a . was seen after decPt characters
     1124                * ( including leading zeros which have been discarded )
     1125                * nDigits characters were neither lead nor trailing
     1126                * zeros, nor point
     1127                */
     1128               /*
     1129                * special hack: if we saw no non-zero digits, then the
     1130                * answer is zero!
     1131                * Unfortunately, we feel honor-bound to keep parsing!
     1132                */
     1133               if ( nDigits == 0 ){
     1134                   digits = zero;
     1135                   nDigits = 1;
     1136                   if ( nLeadZero == 0 ){
     1137                       // we saw NO DIGITS AT ALL,
     1138                       // not even a crummy 0!
     1139                       // this is not allowed.
     1140                       break parseNumber; // go throw exception
     1141                   }
     1142   
     1143               }
     1144   
     1145               /* Our initial exponent is decPt, adjusted by the number of
     1146                * discarded zeros. Or, if there was no decPt,
     1147                * then its just nDigits adjusted by discarded trailing zeros.
     1148                */
     1149               if ( decSeen ){
     1150                   decExp = decPt - nLeadZero;
     1151               } else {
     1152                   decExp = nDigits+nTrailZero;
     1153               }
     1154   
     1155               /*
     1156                * Look for 'e' or 'E' and an optionally signed integer.
     1157                */
     1158               if ( (i < l) &&  (((c = in.charAt(i) )=='e') || (c == 'E') ) ){
     1159                   int expSign = 1;
     1160                   int expVal  = 0;
     1161                   int reallyBig = Integer.MAX_VALUE / 10;
     1162                   boolean expOverflow = false;
     1163                   switch( in.charAt(++i) ){
     1164                   case '-':
     1165                       expSign = -1;
     1166                       //FALLTHROUGH
     1167                   case '+':
     1168                       i++;
     1169                   }
     1170                   int expAt = i;
     1171               expLoop:
     1172                   while ( i < l  ){
     1173                       if ( expVal >= reallyBig ){
     1174                           // the next character will cause integer
     1175                           // overflow.
     1176                           expOverflow = true;
     1177                       }
     1178                       switch ( c = in.charAt(i++) ){
     1179                       case '0':
     1180                       case '1':
     1181                       case '2':
     1182                       case '3':
     1183                       case '4':
     1184                       case '5':
     1185                       case '6':
     1186                       case '7':
     1187                       case '8':
     1188                       case '9':
     1189                           expVal = expVal*10 + ( (int)c - (int)'0' );
     1190                           continue;
     1191                       default:
     1192                           i--;           // back up.
     1193                           break expLoop; // stop parsing exponent.
     1194                       }
     1195                   }
     1196                   int expLimit = bigDecimalExponent+nDigits+nTrailZero;
     1197                   if ( expOverflow || ( expVal > expLimit ) ){
     1198                       //
     1199                       // The intent here is to end up with
     1200                       // infinity or zero, as appropriate.
     1201                       // The reason for yielding such a small decExponent,
     1202                       // rather than something intuitive such as
     1203                       // expSign*Integer.MAX_VALUE, is that this value
     1204                       // is subject to further manipulation in
     1205                       // doubleValue() and floatValue(), and I don't want
     1206                       // it to be able to cause overflow there!
     1207                       // (The only way we can get into trouble here is for
     1208                       // really outrageous nDigits+nTrailZero, such as 2 billion. )
     1209                       //
     1210                       decExp = expSign*expLimit;
     1211                   } else {
     1212                       // this should not overflow, since we tested
     1213                       // for expVal > (MAX+N), where N >= abs(decExp)
     1214                       decExp = decExp + expSign*expVal;
     1215                   }
     1216   
     1217                   // if we saw something not a digit ( or end of string )
     1218                   // after the [Ee][+-], without seeing any digits at all
     1219                   // this is certainly an error. If we saw some digits,
     1220                   // but then some trailing garbage, that might be ok.
     1221                   // so we just fall through in that case.
     1222                   // HUMBUG
     1223                   if ( i == expAt )
     1224                       break parseNumber; // certainly bad
     1225               }
     1226               /*
     1227                * We parsed everything we could.
     1228                * If there are leftovers, then this is not good input!
     1229                */
     1230               if ( i < l &&
     1231                   ((i != l - 1) ||
     1232                   (in.charAt(i) != 'f' &&
     1233                    in.charAt(i) != 'F' &&
     1234                    in.charAt(i) != 'd' &&
     1235                    in.charAt(i) != 'D'))) {
     1236                   break parseNumber; // go throw exception
     1237               }
     1238   
     1239               return new FloatingDecimal( isNegative, decExp, digits, nDigits,  false );
     1240           } catch ( StringIndexOutOfBoundsException e ){ }
     1241           throw new NumberFormatException("For input string: \"" + in + "\"");
     1242       } 
```

# mysql - MySQL 可以强制执行全局 WHERE 子句和/或它们是否存在？

> ID：13090268
> 
> 赞同：0
> 
> 时间：2012-10-26T15:55:19.180
> 
> 标签：mysql

我想我知道这个问题的答案，但我还是想问问社区。

想象两个表：

表A

```
ID    |    Col1    |    isActive
1       "Some Data1"     1
2       "Some Data2"     1
3       "Some Data3"     0
4       "Some Data4"     1 
```

表B

```
ID    |    TableA_ID    |    isActive
1          1                 1
4          1                 1
7          3                 1
8          4                 1 
```

以及以下查询：

```
SELECT A.COL1
FROM TableB as B
JOIN TableA as A
  ON A.ID = B.TableA_ID
WHERE b.ID in (1,4,7); 
```

这将返回以下结果：

```
 Col1
"Some Data1"
"Some Data1"
"Some Data3" 
```

但我想要的是：

```
 Col1
"Some Data1"
"Some Data1" 
```

我不想在每个联接和每个 where 子句中添加“WHERE isActive = 1”条件。像许多其他人一样，我们不喜欢删除记录的想法。但是，在每个查询中添加“WHERE isActive = 1”是非常乏味和重复的。

所以问题是：

我可以对对我的数据库进行的所有查询强制执行这种“全局条件”吗？有没有人想过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:57:32.553

您可以通过创建一个来模拟“全局条件” [`VIEW`](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)，但除此之外...... MySQL 中没有这样的东西。

# jquery - jquery 1.8.2 $(document).ready 函数调用失败

> ID：13090272
> 
> 赞同：0
> 
> 时间：2012-10-26T15:55:27.400
> 
> 标签：jquery

我遇到了 document.ready 调用中的代码未执行的问题。

```
$(document).ready(function () {
initializeControls();
}); 
```

我确定 jquery-1.8.2 脚本正在加载，如果将 1.8.2 切换为 1.4.4 脚本，一切正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:02:53.153

尝试将 替换`$`为`jQuery`。您正在使用的插件可能调用了[noConflict](http://api.jquery.com/jQuery.noConflict/)函数并释放了`$`变量。

尝试

```
jQuery(document).ready(function () {
  initializeControls();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T15:59:00.163

您可能想检查 1.4.4 和 1.8.2 之间已弃用的内容。这是一个文件加载和 1.8.2 工作[http://jsfiddle.net/aRVtC/](http://jsfiddle.net/aRVtC/)的小提琴。

我在 1.8.2 中遇到了 Promise 的问题，不再接受一系列回调。谁知道还能`initializeControls()`做什么。

# php - 正则表达式的异常行为

> ID：13090279
> 
> 赞同：1
> 
> 时间：2012-10-26T15:55:54.520
> 
> 标签：php, regex, preg-match

### 我的设置：

**索引.php：**

```
<?php
$page = file_get_contents('a.html');
$arr = array();
preg_match('/<td class=\"myclass\">(.*)\<\/td>/s',$page,$arr);
print_r($arr);
?> 
```

**一个.html：**

```
...other content
<td class="myclass"> 
    THE 
  CONTENT 
</td>
other content... 
```

* * *

### 输出：

```
Array
(
    [0] => Array
        (
        )
) 
```

* * *

### 如果我将 index.php 的第 4 行更改为：

```
preg_match('/<td class=\"myclass\">(.*)\<\/t/s',$page,$arr); 
```

### 输出是：

```
Array
(
    [0] => <td class="myclass">
     THE 
   CONTENT
</t
    [1] => 
     THE 
   CONTENT
) 
```

* * *

### 我不知道出了什么问题。请帮我匹配和之间的`<td class="myclass">`内容`</td>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:30:51.003

您的代码似乎有效。我编辑了正则表达式以使用不同的分隔符并获得更清晰的视图。如果您的 HTML 中有多个 myclass TD，您可能需要使用 ungreedy 修饰符。

我无法重现您注意到的“数组数组”行为，除非我操纵代码添加错误——见底部。

```
<?php
        $page = <<<PAGE
        ...other content
        <td class="myclass">
            THE
          CONTENT
        </td>
        other content...
PAGE;

        preg_match('#<td class="myclass">(.*)</td>#s',$page,$arr);
        print_r($arr);
?> 
```

按预期返回：

```
Array
(
    [0] => <td class="myclass">
            THE
          CONTENT
        </td>
    [1] =>
            THE
          CONTENT

) 
```

下面的代码与您的代码相似，但已被修改为导致相同的错误。不过，您似乎不太可能这样做。修改正则表达式以使其**不**匹配，并将生成的空数组存储到**$arr[0]**而不是`$arr`.

```
preg_match('#<td class="myclass">(.*)</ td>#s',$page,$arr[0]); 
```

返回您观察到的相同错误：

```
Array
(
    [0] => Array
        (
        )

) 
```

如果我使用您的正则表达式，我可以复制您观察到的相同行为（适用于`</t`，不适用于`</td>`），但将 HTML 修改为`</t d>`. 如果我也想获得相同的输出，我仍然需要写信`$arr[0]`。`$arr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:56:44.943

您是否了解第三个参数`preg_match`是匹配项，它将包含匹配项，然后其他元素将显示捕获的模式。

[http://ca3.php.net/manual/en/function.preg-match.php](http://ca3.php.net/manual/en/function.preg-match.php)

> > 如果提供了匹配项，则将其填充为搜索结果。$matches[0] 将包含与完整模式匹配的文本，$matches[1] 将包含与第一个捕获的带括号的子模式匹配的文本，依此类推。

这段代码 `preg_match('/<td class=\"myclass\">(.*)\<\/t/s',$page,$arr);`

应用时

```
...other content
<td class="myclass"> 
    THE 
  CONTENT 
</td>
other content... 
```

将在 $arr[0] 中返回匹配项，在 $arr[1] 中返回 (.*) 的结果。这个结果是正确的：[1]中有你的内容

```
Array
(
    [0] => <td class="myclass">
    THE
  CONTENT
</t
    [1] => 
    THE
  CONTENT 
```

## 示例二

```
<?php
header('Content-Type: text/plain');
$page = 'A B C D E F';
$arr = array();
preg_match('/C (D) E/', $page, $arr);
print_r($arr); 
```

## 示例输出

```
Array
(
    [0] => C D E  // This is the string found
    [1] => D      // this is what I wanted to look for and extracted out of [0], the matched parenthesis
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:10:06.743

您的正则表达式似乎是正确的。preg_match 的语法不是如下吗？

```
preg_match('/<td class=\"myclass\">(.*)\<\/td>/s',$page,$arr); 
```

正`|`则表达式中的`or`

# perl - Perl 模块相当于 openssl asn1parse

> ID：13090280
> 
> 赞同：0
> 
> 时间：2012-10-26T15:55:57.257
> 
> 标签：perl, parsing, asn.1, der

使用 OpenSSL 可以解析和转储 ASN.1 DER 文件，输出如下所示：

```
 100:d=5  hl=2 l=   3 prim: OBJECT            :organizationalUnitName
  105:d=5  hl=2 l=  11 prim: PRINTABLESTRING   :Big Number Services
  118:d=3  hl=2 l=  20 cons: SET
  120:d=4  hl=2 l=  18 cons: SEQUENCE
  122:d=5  hl=2 l=   3 prim: OBJECT            :commonName
  127:d=5  hl=2 l=  11 prim: PRINTABLESTRING   :example.com
  140:d=2  hl=4 l= 290 cons: SEQUENCE
  144:d=3  hl=2 l=  13 cons: SEQUENCE 
```

我想使用 Perl 生成类似的输出。当然，一种方法是`openssl ans1parse`从 Perl 内部调用，但我正在寻找一种方法*不*依赖于调用外部可执行文件的方法。

我查看了 Perl 模块`Convert::ASN1`，但似乎要使用它，您需要我没有的 ASN.1 描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:05:42.540

尝试查看[cpan](http://search.cpan.org/search?query=crypt%3A%3Aopenssl&mode=all)上的 Crypt::OpenSSL::* 模块。大多数人会使用 libcrypto 来访问 OpenSSL 提供的函数，因此如果您可以在模块中找到类似的方法/子程序，您应该会获得类似的信息。

# javascript - touchstart 和 touchend 模拟悬停或 mouseup 和 mousedown

> ID：13090285
> 
> 赞同：2
> 
> 时间：2012-10-26T15:56:12.760
> 
> 标签：javascript, jquery, html, toggleclass, touchstart

我需要在 iphone 菜单中模拟悬停或 mouseup/down，我给出了两个示例。

```
<ul id="main_nav">
    <li><a href="http://google.com">google</a></li>
    <li><a href="http://yahoo.com">yahoo</a></li>
    <li><a href="#">Three</a>
      <ul>
        <li><a href="#">sub One</a></li>
        <li><a href="#">sub Two</a></li>
      </ul>
</li>
<li><a href="#">Four</a></li>
</ul>

//bind the touchstart event to the link element
$('li').live('touchstart touchend', function(e){
    $(this).toggleClass('btn-sign-up-hover');
    //alert('alert');
});

a {
    display:block;
    line-height:30px;

}

li{
    background:#096;
}

.btn-sign-up-hover {
    background: #F3F;
} 
```

这在iphone中不起作用，

但以下是工作

```
//bind the touchstart event to the link element
$('li').live('touchstart', function(e){
    $(this).css('background','red');
    //alert('alert');
});

$('li').live('touchend', function(e){
    $('li').css('background','#096');
    //alert('alert');
}); 
```

问题是我需要使用toggleClass。

小提琴示例[http://jsfiddle.net/UcyAb/](http://jsfiddle.net/UcyAb/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T09:52:59.693

```
//bind the touchstart event to the link element
$('li').live('touchstart', function(e){
    $(this).addClass('btn-sign-up-hover');
    //alert('alert');
});

$('li').live('touchend', function(e){
    $('li').removeClass('btn-sign-up-hover');
    //alert('alert');
}); 
```

希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T18:26:54.293

我一直在使用类似于@Sameera Thilakasiri 的答案的解决方案，但是我遇到了 iPad 触发 2 个单击事件的问题 - 一个用于单击的菜单项，一个用于菜单下方的任何内容（z-index 明智） . 对我有用的解决方案是触发 touchend 事件的轻微延迟。希望这对某人有帮助！

```
$('.touchHover').bind('touchstart',function(){
     $(this).addClass('hovered');
     }).bind('touchend',function(){
     $t=setTimeout(function(){$(this).removeClass('hovered');},10);
}); 
```

# android - 设置启动图标，但仅显示 android 默认值

> ID：13090289
> 
> 赞同：1
> 
> 时间：2012-10-26T15:56:24.627
> 
> 标签：android

我已经在标签应用程序上的 AndroidManifest 上设置了属性 android:icon，但它不起作用。我在文件夹 drawable-hdpi、drawable-ldpi、drawable-mdpi 上添加了一个名为 icon.png 的图像，但它坚持显示默认的 android 图标。

我究竟做错了什么？

谢谢

我的 AndroidManifest 是这样的：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="..." android:versionCode="1" android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
    android:icon="@drawable/icon"
    android:label="My App Name"
    android:theme="@style/notitle"
    android:persistent="true" > 
```

我还添加了一个外部库，它的 AndroidManifest 是：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="....lib" android:versionCode="1" android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="8" />
    <application android:icon="@drawable/icon">
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:25:29.447

您需要更改具有启动器意图过滤器的活动标签中的 android:icon 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:28:32.377

检查您的 res 中是否有一个仅命名为 drawable 的文件夹。它们可能是一个名为 icon.png 的图标，与您放置在 drawable-hdpi、drawable-ldpi、drawable-mdpi 文件夹中的图标不同。

# sql - SQL - 按字符串的一部分分组

> ID：13090295
> 
> 赞同：0
> 
> 时间：2012-10-26T15:56:43.760
> 
> 标签：sql, oracle

我有一列，它的值类似于 `Mozilla/5.0 (Linux; U; Android 2.3.6; en-us; SGH-T989 Build/GINGERBREAD)` 和`Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_2 like Mac OS X; en-us)`以及其他一些变体

如何通过仅考虑前几个字符说`Mozilla/5.0 (Linux; U; Android`和`Mozilla/5.0 (iPhone; U; CPU iPhone`

有人可以建议吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:03:23.100

您可以使用像 * 之类的元字符。它们的工作方式与 shell 脚本中的元字符相同。你可以在这里获得更多信息。

[http://docs.oracle.com/cd/B12037_01/appdev.101/b10795/adfns_re.htm](http://docs.oracle.com/cd/B12037_01/appdev.101/b10795/adfns_re.htm)

还

[http://docs.oracle.com/cd/B12037_01/server.101/b10759/conditions018.htm#SQLRF00501](http://docs.oracle.com/cd/B12037_01/server.101/b10759/conditions018.htm#SQLRF00501)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:08:33.950

您可以使用与您的表相同的列创建新的临时表，然后从该字符串中插入您想要的字符（子字符串），然后在您创建的临时表中进行分组（不要忘记最后删除临时表):

```
CREATE TABLE #temp (
....more variables, same as in original table  
somevar varchar
)

insert into #temp
select substr(originaltable.somevar,0,5) from originaltable

select somevar from #temp
group by somevar

drop table #temp 
```

# r - 如何使用两个不同的标准对 data.table 执行两次聚合函数

> ID：13090299
> 
> 赞同：2
> 
> 时间：2012-10-26T15:56:50.123
> 
> 标签：r, data.table, igraph

由于交换机出现问题，我喜欢使用 igraph 来显示 Switch 和受影响的网络之间的关系。由于有很多事件，我想展示前 10 个交换机是最有问题的，因此影响了网络。

df

```
Incident    Date        Switch ImpactedNetwork
123        1/1/2012       A     Wireless
455        1/2/2012       B     LocalLan
460        1/3/2012       A     LocalLan
465        1/4/2012       A     Production 
```

ETC

每次使用 swithc 发生事件时评估 1：

```
df$count<-c(1) 
```

想出前 10 个最有问题的开关：

```
library(data.table)
df<-df[, total := sum(count), by = Switch] 
```

df

```
Incident    Date        Switch ImpactedNetwork  count   Total
123        1/1/2012       A     Wireless         1        3
455        1/2/2012       B     LocalLan         1        1
460        1/3/2012       A     LocalLan         1        3
465        1/4/2012       A     Production       1        3 
```

从这个df中，我如何获得基于Total的前10个最高事件？

一旦我确定了前十个交换机，我需要对最有问题的交换机进行 ImpactedNetwork 的总计数。

```
t<-aggregate(count~ImpactedNetwork+Switch, df, sum) 
```

吨

```
ImpactedNework   Switch   count
Production       A         1
Wireless         A         1

plot(t, layout = layout.kamada.kawai,  vertex.label = V(g)$name,  vertex.label.color= "darkblue",  edge.arrow.size=0.9,  edge.curved=T, edge.label=t$count, edge.label.color="#F900F9", edge.label.font=10,vertex.shape="rectangle",edge.color="darkgreen", main="Top 10 Problematic Switches and Impacted Network")) 
```

想法是这样的：

1.  计算最多事件生成的开关
2.  计算受影响网络的数量给 Switch 3.Igraph 结果。

我是否应该在两个单独的数据帧中执行此操作，以首先计算最事件生成的开关？并且，anth 数据框来计算受影响网络的数量？任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:13:29.283

```
df[,Total:=sum(count),by=Switch][head(order(-Total),10)][ ... etc ... ] 
```

# java - Java - 读取旧对象的新对象定义

> ID：13090302
> 
> 赞同：0
> 
> 时间：2012-10-26T15:57:04.250
> 
> 标签：java, class, object

不确定标题是否合适，但这是我的问题

我写了一个类，例如，

**版本 1**

```
class SomeClass
{
    public method1()
    {
        ...
        ...
    }

    public method2()
    {
        ...
        ...
    }
} 
```

SomeClass 的对象被不同的模块推送到消息队列中说

```
module1
module2
module3 
```

然后正在处理`module4`

现在，`module3`需要一些额外的功能 method3() 所以我向 SomeClass 添加了额外的功能

**第 2 版**

```
class SomeClass
{
    public method1()
    {
        ...
        ...
    }

    public method2()
    {
        ...
        ...
    }

    public method3()
    {
        ...
        ...
    }
} 
```

并更新`module3`并`module 4`使用这个新类，但是 module1 和 module2 不是

`module3`将`SomeClass`（版本 2）的对象发布到消息队列，但是`module1`仍然`module2`发布`SomeClass`（版本 1）的对象

`module 4`具有版本 2 定义的读取版本 1 定义的对象会有任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:03:56.597

Theoretically it could work because when you push object to message queue (using `ObjectMessage`) it is serialized using standard java serialization mechanism. Serialization does not care about methods. It uses fields only. It means that you can serialize object v1 and then deserialze it using class version 2\. But I believe you will have to add special field `private static long serialVersionUID` to your class and manage its value manually.

So, your v1 and v2 that have identical number and order of field and differ by methods only will have the same `serialVersionUID`.

# android - 通过长按一个键在应用程序中启动一个活动

> ID：13090305
> 
> 赞同：0
> 
> 时间：2012-10-26T15:57:13.927
> 
> 标签：android

我正在android中开发一个应用程序，它需要通过长按手机上的一个键来启动一个活动，例如一个搜索按钮，然后在后台执行。我想知道如何有效地做到这一点或任何其他替代方法，在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:02:06.560

如果您的应用程序在前台，欢迎您观看长按某个键并尝试响应它。

如果您的应用程序不在前台，则您无法找到任何按键上的长按。后台代码可以响应的唯一用户输入是按下`CAMERA`按钮或`MEDIA`耳机上的按钮，这些都存在。

# wordpress - 多个类别的帖子的 Wordpress 提要

> ID：13090307
> 
> 赞同：1
> 
> 时间：2012-10-26T15:57:20.817
> 
> 标签：wordpress, feed, rss2

我正在尝试找出包含多个类别帖子的 Wordpress 类别提要的正确 URL。我的意思是我有类别 28 和 31。我想要 28 和 31 中的帖子提要，而不是 28 或 31。

我能找到的是这种格式：[http://mydomain.ca/?cat=28+31&feed=rss2](http://mydomain.ca/?cat=28+31&feed=rss2)。`+`应该是 AND 运算符。我可以改用逗号，但那是 OR 运算符。

当我使用逗号时，提要加载正常。当我使用 时`+`，我什么也得不到。甚至没有空白页——浏览器只是拒绝去任何地方，并且 URL 栏被重置为我之前在那里的任何 URL。

我正在使用最新的 Wordpress 3.4.2 版本。

另外仅供参考 - 我没有使用漂亮的永久链接，因为 Wordpress 决定在昨天 2:00 左右无法正常运行 - 所以我正试图从中恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:33:29.093

据我所知，这是标准类别分类的一种错误。事实上，如果您尝试将该语法与任何其他分类法一起使用，它就可以工作。因此，一种解决方法可能是将标准类别分类法转换为自定义分类法，并将其作为具有`'hierarchical' => true`. 然后你将能够使用类似的东西：

> ?custom-taxonomy=slug1+slug2。

不是很优雅，但它可能是您的解决方案。

[编辑：随着 WordPress 的发展，我们可以说标准类别和标签成为分类](http://codex.wordpress.org/Taxonomies)概念的特例。它们中的每一个都是帖子的默认分类法。自 2.3 版以来，WordPress 引入了自定义分类法。使用自定义分类法，您可以创建任何类型的特殊分类法，并进行一些可能的自定义，使它们更像一个标签或更像一个类别。也就是说，它们都使用相同的语法，比如说：

> yoursite.com/?taxonomy-name=taxonomy-item

该网址将列出所有归类为 的帖子`taxonomy-item`。出于某种原因（我猜是一个错误），标准 ?cat=1+2 不能正常工作，但实际上所有其他分类法都可以。为了清楚起见，您可以替换

> yoursite.com/?cat=dogs+cats

和

> yoursite.com/?pets=dogs+cats

通过创建一个名为“宠物”的自定义分类。这将完成这项工作。

如果您创建自定义分类，并将其用作标准类别的替代品，则无需进一步开发即可完成这项工作。如果您不熟悉自定义分类法，请尝试使用[自定义帖子类型 UI](http://wordpress.org/extend/plugins/custom-post-type-ui/)插件，它会为您完成繁琐的工作。为了使自定义分类法充当默认类别，最重要的设置是将其设置为分层。

假设您创建了一个名为“new-cats”的自定义分类法。之后，您将能够使用 yoursite.com/?my-cats=cat1+cat2 并列出分类为 cat1 和 cat2 的帖子。顺便说一句，这可以提供一些开箱即用的 SEO 好处。当然，您需要使用新分类法对所有帖子进行分类。这样的事情可以帮助[http://themespotter.com/how-to-convert-post-tags-to-custom-taxonomies-in-wordpress/](http://themespotter.com/how-to-convert-post-tags-to-custom-taxonomies-in-wordpress/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T15:22:37.607

[http://wordpress.org/support/topic/how-to-create-rss-feed-that-includes-multiple-categories](http://wordpress.org/support/topic/how-to-create-rss-feed-that-includes-multiple-categories)

试试这个：

[http://www.yourdomain.com/?feed=rss&cat=15,16](http://www.yourdomain.com/?feed=rss&cat=15,16)

会将类别 15 和 16 添加到您的提要中。没有必要的功能。

希望能帮助到你。

# c# - 使用c#根据他们访问网站的物理机器为某些用户提供不同的访问权限

> ID：13090309
> 
> 赞同：1
> 
> 时间：2012-10-26T15:57:29.280
> 
> 标签：c#, asp.net

简而言之，我们有一个用 asp.net c# 构建的网站，我们正在添加一个登录区域，供人们查看一些付费内容。会有不同级别的帐户，一个登录后每天可以下载10个文档，另一个可以下载20个等等......

客户现在还要求的是，他们能否向客户出售对该设施的无限制访问权限，而该客户只有在使用某些特定计算机时才能获得这种无限制访问权限。

真的不知道是否有一个优雅的解决方案？我在想 MAC 地址一定是关键，但据我所知，c# 代码不能直接访问它？已经读过JavaSript 在获取MAC 地址时太不可靠了……而编写Java 小程序可能是唯一的方法。

还有人有比这更好的建议吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:02:21.380

您正在寻找设备指纹识别的想法。由于这是一个 Web 应用程序，因此您需要设备指纹的子字段，称为浏览器指纹。

要在 80% 的时间内正确地进行浏览器指纹识别非常容易，而要在 100% 的时间里正确地进行浏览器指纹识别则非常困难。

查看[Panopticlick](https://panopticlick.eff.org/)（来自 EFF）以了解其工作原理。

有几个商业软件提供商提供可靠的浏览器指纹作为服务。

虽然一般情况并不容易，但您的具体情况可能更容易。例如，如果您将访问权出售给一家大到足以通过一个或几个知名 IP 地址路由所有流量的公司，您可以只使用该 IP 来验证用户身份。

或者，或者特别是如果您只需要允许设施内的某些计算机，您可以创建一个浏览器插件来检查硬件（如 MAC 地址）并将该信息提供给您的身份验证代码。

正确编写这种代码（因为它既不会显示误报也不会显示误报，并且可以容忍硬件的变化，例如 NIC 升级）是非常困难的。使用商业浏览器指纹识别公司可能是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:17:27.230

有没有办法可以依赖静态 IP 地址？我知道，根据站点的不同，这些可能会发生变化，但网卡也会发生变化（尽管这种情况不太常见）。

另一个问题：您希望限制在单个机器上，还是只是确保只使用该地址上的“N”个许可证？如果是这种情况，您可以跟踪您身边的 N 条许可证记录，并在机器上使用相应的 cookie（可能是 IP 地址和使用您的私钥签名的许可证密钥的串联/散列），该 cookie 在一周后到期或你有什么。

您有自己的 IP 地址、许可证密钥和到期日期的数据库/列表，因此如果计算机使用无效 cookie 登录（IP 地址与您的数据库中与其许可证关联的内容不匹配，以防止复制 cookie跨），如果您的数据库中有可用的许可证（由于一对已过期/从未使用过），请给他们新的许可证（以及怀疑的好处）。如果它不可用，请给出礼貌的“没有更多可用的许可证，这是我们的销售编号”消息。这意味着您数据库中的 IP 地址更多的是参考，但它也会减慢“计算机跳跃”的速度，因为这些记录在“一周或你有什么”过去之前不会过期。如果计算机使用“有效 IP”（在您的数据库中）但没有 cookie/无效 cookie 登录，使用与以前相同的许可证重新颁发该 cookie，并具有新的到期日期。也许。可能是同一个保质期。

如果客户站点的 IP 地址变化缓慢，这应该可行。如果它们在每个时间范围内每台计算机更改不止一次，这可能会带来问题。

这些许可证的初始分发可能是“先到先得”，并且依赖于网络地址范围和登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:33:56.007

已经提供了更性感的答案。好的旧/无聊的[数字证书](http://support.microsoft.com/kb/315588)就足够了吗？

# c# - 在组合框 vb.net 中键入箭头时捕获键码

> ID：13090312
> 
> 赞同：0
> 
> 时间：2012-10-26T15:57:37.370
> 
> 标签：c#, vb.net, visual-studio-2010

如果您是组合框中的箭头键项目，vb.net 只会触发 selectedindexchanged 事件。我想知道他们是在向上还是向下键，或者他们实际上是用鼠标点击了该项目。

原因是如果他们用鼠标选择了项目，那么我会将焦点放回主面板滚动条，这样他们就可以在选择项目后立即使用滚轮。

如果他们通过组合框中的项目使用箭头键，则不要关注主面板。

我尝试捕获组合框的 keyup 事件，但如果您在组合框中使用箭头键控项目，则它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:53:33.943

您实际上可以将 PreviewKeyDown 事件与组合框的 MouseUp 事件一起使用。

```
 Dim UsePanelScroll As Boolean = False

    Private Sub ComboBox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
        'some code

        If UsePanelScroll = True Then
            Panel1.Focus()
        End If

    End Sub

    Private Sub ComboBox_PreviewKeyDown(sender As Object, e As System.Windows.Forms.PreviewKeyDownEventArgs)
        Select Case e.KeyCode
            Case Keys.Tab, Keys.Up, Keys.Down
                UsePanelScroll = False
            Case Else
                UsePanelScroll = True
        End Select
    End Sub

    Private Sub ComboBox_MouseUp(sender As System.Object, e As System.Windows.Forms.MouseEventArgs)
        If e.Button = Windows.Forms.MouseButtons.Left Then
            UsePanelScroll = True
        End If
    End Sub 
```

# java - 如何在 Java 中的 Excel 工作簿之间复制工作表

> ID：13090313
> 
> 赞同：17
> 
> 时间：2012-10-26T15:57:43.743
> 
> 标签：java, excel, apache-poi

如何在 Apache poi 中的两个不同工作簿之间复制工作表？

该方法缺少引用[此](http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another)线程。没有这样的解决方案。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-26T15:57:43.743

经过研究和尝试，这是我的解决方案。我使用 java 1.6 和 apache-poi 3.8 进行了测试

在这里我不想提供对我有用的解决方案，特别是在这种情况下，我传递了一个工作表和一个输入流列表（我想要合并的不同工作簿）。

我的解决方案是一个合并的解决方案，我已经从[这里](http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another)合并了整个源代码，我想与大家分享这段代码，但遇到了同样的问题。

```
/**
* Original version available from:
* http://www.coderanch.com/t/420958/open-source/Copying-sheet-excel-file-another
**/
import java.io.FileInputStream;
import java.io.IOException;
import java.util.List;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;

import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.CellStyle;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.apache.poi.ss.util.CellRangeAddress;

public class CopySheets {

public Workbook mergeExcelFiles(Workbook book, List<InputStream> inList) throws IOException {

    for (InputStream fin : inList) {
        Workbook b = WorkbookFactory.create(fin);
        for (int i = 0; i < b.getNumberOfSheets(); i++) {
            // not entering sheet name, because of duplicated names
            copySheets(book.createSheet(),b.getSheetAt(i));
        }
    }
    return book;
}

/** 
 * @param newSheet the sheet to create from the copy. 
 * @param sheet the sheet to copy. 
 */  
public static void copySheets(Sheet newSheet, Sheet sheet){     
    copySheets(newSheet, sheet, true);     
}     

/** 
 * @param newSheet the sheet to create from the copy. 
 * @param sheet the sheet to copy. 
 * @param copyStyle true copy the style. 
 */  
public static void copySheets(Sheet newSheet, Sheet sheet, boolean copyStyle){     
    int maxColumnNum = 0;     
    Map<Integer, CellStyle> styleMap = (copyStyle) ? new HashMap<Integer, CellStyle>() : null;     
    for (int i = sheet.getFirstRowNum(); i <= sheet.getLastRowNum(); i++) {     
        Row srcRow = sheet.getRow(i);     
        Row destRow = newSheet.createRow(i);     
        if (srcRow != null) {     
            copyRow(sheet, newSheet, srcRow, destRow, styleMap);     
            if (srcRow.getLastCellNum() > maxColumnNum) {     
                maxColumnNum = srcRow.getLastCellNum();     
            }     
        }     
    }     
    for (int i = 0; i <= maxColumnNum; i++) {     
        newSheet.setColumnWidth(i, sheet.getColumnWidth(i));     
    }     
}     

/** 
 * @param srcSheet the sheet to copy. 
 * @param destSheet the sheet to create. 
 * @param srcRow the row to copy. 
 * @param destRow the row to create. 
 * @param styleMap - 
 */  
public static void copyRow(Sheet srcSheet, Sheet destSheet, Row srcRow, Row destRow, Map<Integer, CellStyle> styleMap) {     
    // manage a list of merged zone in order to not insert two times a merged zone  
  Set<CellRangeAddressWrapper> mergedRegions = new TreeSet<CellRangeAddressWrapper>();     
    destRow.setHeight(srcRow.getHeight());     
    // reckoning delta rows  
    int deltaRows = destRow.getRowNum()-srcRow.getRowNum();  
    // pour chaque row  
    for (int j = srcRow.getFirstCellNum(); j <= srcRow.getLastCellNum(); j++) {     
        Cell oldCell = srcRow.getCell(j);   // ancienne cell  
        Cell newCell = destRow.getCell(j);  // new cell   
        if (oldCell != null) {     
            if (newCell == null) {     
                newCell = destRow.createCell(j);     
            }     
            // copy chaque cell  
            copyCell(oldCell, newCell, styleMap);     
            // copy les informations de fusion entre les cellules  
            //System.out.println("row num: " + srcRow.getRowNum() + " , col: " + (short)oldCell.getColumnIndex());  
            CellRangeAddress mergedRegion = getMergedRegion(srcSheet, srcRow.getRowNum(), (short)oldCell.getColumnIndex());     

            if (mergedRegion != null) {   
              //System.out.println("Selected merged region: " + mergedRegion.toString());  
              CellRangeAddress newMergedRegion = new CellRangeAddress(mergedRegion.getFirstRow()+deltaRows, mergedRegion.getLastRow()+deltaRows, mergedRegion.getFirstColumn(),  mergedRegion.getLastColumn());  
                //System.out.println("New merged region: " + newMergedRegion.toString());  
                CellRangeAddressWrapper wrapper = new CellRangeAddressWrapper(newMergedRegion);  
                if (isNewMergedRegion(wrapper, mergedRegions)) {  
                    mergedRegions.add(wrapper);  
                    destSheet.addMergedRegion(wrapper.range);     
                }     
            }     
        }     
    }                
}    

/** 
 * @param oldCell 
 * @param newCell 
 * @param styleMap 
 */  
public static void copyCell(Cell oldCell, Cell newCell, Map<Integer, CellStyle> styleMap) {     
    if(styleMap != null) {     
        if(oldCell.getSheet().getWorkbook() == newCell.getSheet().getWorkbook()){     
            newCell.setCellStyle(oldCell.getCellStyle());     
        } else{     
            int stHashCode = oldCell.getCellStyle().hashCode();     
            CellStyle newCellStyle = styleMap.get(stHashCode);     
            if(newCellStyle == null){     
                newCellStyle = newCell.getSheet().getWorkbook().createCellStyle();     
                newCellStyle.cloneStyleFrom(oldCell.getCellStyle());     
                styleMap.put(stHashCode, newCellStyle);     
            }     
            newCell.setCellStyle(newCellStyle);     
        }     
    }     
    switch(oldCell.getCellType()) {     
        case Cell.CELL_TYPE_STRING:     
            newCell.setCellValue(oldCell.getStringCellValue());     
            break;     
      case Cell.CELL_TYPE_NUMERIC:     
            newCell.setCellValue(oldCell.getNumericCellValue());     
            break;     
      case Cell.CELL_TYPE_BLANK:     
            newCell.setCellType(HSSFCell.CELL_TYPE_BLANK);     
            break;     
      case Cell.CELL_TYPE_BOOLEAN:     
            newCell.setCellValue(oldCell.getBooleanCellValue());     
            break;     
      case Cell.CELL_TYPE_ERROR:     
            newCell.setCellErrorValue(oldCell.getErrorCellValue());     
            break;     
      case Cell.CELL_TYPE_FORMULA:     
            newCell.setCellFormula(oldCell.getCellFormula());     
            break;     
      default:     
            break;     
    }     

}     

/** 
 * Récupère les informations de fusion des cellules dans la sheet source pour les appliquer 
 * à la sheet destination... 
 * Récupère toutes les zones merged dans la sheet source et regarde pour chacune d'elle si 
 * elle se trouve dans la current row que nous traitons. 
 * Si oui, retourne l'objet CellRangeAddress. 
 *  
 * @param sheet the sheet containing the data. 
 * @param rowNum the num of the row to copy. 
 * @param cellNum the num of the cell to copy. 
 * @return the CellRangeAddress created. 
 */  
public static CellRangeAddress getMergedRegion(Sheet sheet, int rowNum, short cellNum) {     
    for (int i = 0; i < sheet.getNumMergedRegions(); i++) {   
        CellRangeAddress merged = sheet.getMergedRegion(i);     
        if (merged.isInRange(rowNum, cellNum)) {     
            return merged;     
        }     
    }     
    return null;     
}     

/** 
 * Check that the merged region has been created in the destination sheet. 
 * @param newMergedRegion the merged region to copy or not in the destination sheet. 
 * @param mergedRegions the list containing all the merged region. 
 * @return true if the merged region is already in the list or not. 
 */  
private static boolean isNewMergedRegion(CellRangeAddressWrapper newMergedRegion, Set<CellRangeAddressWrapper> mergedRegions) {  
  return !mergedRegions.contains(newMergedRegion);     
}     

}
class CellRangeAddressWrapper implements Comparable<CellRangeAddressWrapper> {  

public CellRangeAddress range;  

/** 
 * @param theRange the CellRangeAddress object to wrap. 
 */  
public CellRangeAddressWrapper(CellRangeAddress theRange) {  
      this.range = theRange;  
}  

/** 
 * @param o the object to compare. 
 * @return -1 the current instance is prior to the object in parameter, 0: equal, 1: after... 
 */  
public int compareTo(CellRangeAddressWrapper o) {  

            if (range.getFirstColumn() < o.range.getFirstColumn()  
                        && range.getFirstRow() < o.range.getFirstRow()) {  
                  return -1;  
            } else if (range.getFirstColumn() == o.range.getFirstColumn()  
                        && range.getFirstRow() == o.range.getFirstRow()) {  
                  return 0;  
            } else {  
                  return 1;  
            }  

}  

} 
```

# git - 我从上游/主更新了拉取请求的分支。如果我再次将分支推送到 github 会污染拉取请求吗？

> ID：13090314
> 
> 赞同：2
> 
> 时间：2012-10-26T15:57:45.807
> 
> 标签：git, github, branch, push, pull-request

我分叉了一个项目，创建了一个特性分支，实现了这个特性并发送了一个拉取请求。在等待答案的同时，我从上游更新了本地代码，现在我想知道以后是否必须向我的功能分支添加更多内容并将其再次推送到 github，拉入的上游更改是否也会出现在拉取请求中？或者 github 足够聪明，不会在拉取请求提交中显示这些更改，因为这些更改已经存在于上游？

我问是因为现在拉取请求中的提交是干净的，如果其中也出现不相关的更改，它会使拉取请求更难阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:11:31.433

如果您合并来自目标存储库的更改，则将显示合并提交本身，但不会显示已经在目标存储库中的提交。

这是一个[示例拉取请求](https://github.com/aschrab/lsm/pull/1)，它是在仅显示第一个提交的情况下创建的。

# android - android中的Smaato测试模式

> ID：13090317
> 
> 赞同：3
> 
> 时间：2012-10-26T15:57:56.423
> 
> 标签：android, smaato

我已将`Smaato`API 连接到我的 Android 应用程序。此应用尚未出现在 Play 商店中。我想先测试一下。但我根本没有看到任何横幅。我提供了正确的 Publisher ID 和 Adspace ID 但什么也没提供。

如何运行`Smaato`测试模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T04:38:03.613

设置您的 Publisher ID = 0 和 Adspace ID = 0

# c# - 无法加载文件或程序集 'Microsoft.SqlServer.Smo，版本 = 10.0.0

> ID：13090319
> 
> 赞同：2
> 
> 时间：2012-10-26T15:58:03.057
> 
> 标签：c#, sql-server, winforms, tsql, smo

*   操作系统：Microsoft Windows NT 5.2.3790 Service Pack 2 版本：2.0.50727.42

正在做：创建表格...

> 建议：system.m.FileNotFoundexception：无法加载文件或程序集'microsoft.sqlserver.smo，版本=10.0.0.0，文化=中性文件名：'microsoft.sqlserver.smo，版本=10.0.0.0，文化=中性， PublicKeyToken=89845dcd8080cc91' at claimure.Forml.Runsqlscript(string connstring, streamReader sr) at myapp.Forml.bw_Dowork(object sender, DoworkeventArgs e) 'MN：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 (NKLm\software\microsoft\Fusion!enableLog] (DwoRD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 (NKLm\software\microsoft\Fusion!enableLog)。

在带有 SQL Server 2005 的 Windows 2003 服务器上运行我的应用程序时出现上述错误。

我知道有一个解决方案可以从[http://www.microsoft.com/en-us/download/details.aspx?id=24793下载 SQLServer2005_XMO](http://www.microsoft.com/en-us/download/details.aspx?id=24793)

我已经这样做了，但是安装后需要重新启动服务器，这暂时不可行。

我需要使用服务器对象。

```
 using Microsoft.SqlServer.Management.Smo;
 using Microsoft.SqlServer.Management.Common;  

        using (SqlConnection connection = new SqlConnection(connString))
        {
            Server server = new Server(new ServerConnection(connection));
            server.ConnectionContext.StatementTimeout = 2400;
            server.ConnectionContext.ExecuteNonQuery(sqlString);

        } 
```

是否可以将 dll 加载到与我的应用程序相同的目录中并从代码中引用它？

谢谢。

编辑：添加完整错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:23:26.997

Resolved this by building an MSI installer and including all the DLL's required. Thanks for the pointers.

# asp.net - 将属性设置回“NotSet”

> ID：13090320
> 
> 赞同：0
> 
> 时间：2012-10-26T15:58:04.897
> 
> 标签：asp.net, web-controls

我注意到 BorderStlye 有一个明确的 None 用于“不显示边框”和一个 NotSet，这会导致控件恢复到其默认或 CSS 样式。

在某些情况下，我想将面板的高度设置为 0，但随后能够将其返回到样式表中指定的任何高度，类似于使用 BorderStyle 可以完成的操作。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:04:09.860

您可以使用[Unit.Empty](http://msdn.microsoft.com/de-de/library/system.web.ui.webcontrols.unit.empty.aspx)：

```
myPanel.Height = Unit.Empty; 
```

这将重置您之前设置的隐式值。

但是如果你想隐藏一个控件，有比将高度设置为 0 更好的方法。

```
myPanel.Visible = false; 
```

# javascript - d3 和 svg 中的自定义上下文菜单

> ID：13090321
> 
> 赞同：6
> 
> 时间：2012-10-26T15:58:05.427
> 
> 标签：javascript, svg, contextmenu, d3.js, right-click

当我右键单击 svg 圆圈时，我希望出现自定义上下文菜单。现在我找到[了这个](https://stackoverflow.com/a/7855120/1041692)答案，它可以帮助我使用以下代码处理右键单击：

```
.on("contextmenu", function(data, index) {
   //handle right click

   //stop showing browser menu
   d3.event.preventDefault()
}); 
```

现在我想知道如何显示一个包含一些 HTML 的框。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T17:36:18.797

```
d3.select('#stock_details .sym').on("contextmenu", function(data, index) {
    var position = d3.mouse(this);
    d3.select('#my_custom_menu')
      .style('position', 'absolute')
      .style('left', position[0] + "px")
      .style('top', position[1] + "px")
      .style('display', 'block');

    d3.event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T14:18:57.257

只是对已接受答案的评论（没有足够的分数直接评论）。但似乎最新版本的 d3 需要 d3.event.pageX 和 d3.event.pageY 而不仅仅是 x 和 y。[根据此处](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_event)的文档。

[所以我的代码是（在这个站点](http://www.neowin.net/forum/topic/718052-pagex-and-pagey-for-ie/)的一些 IE 帮助下）：

```
.on('contextmenu', function(data, index) {
      if (d3.event.pageX || d3.event.pageY) {
          var x = d3.event.pageX;
          var y = d3.event.pageY;
      } else if (d3.event.clientX || d3.event.clientY) {
          var x = d3.event.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
          var y = d3.event.clientY + document.body.scrollTop + document.documentElement.scrollTop;
      }

      d3.select('#action_div')
        .style('position', 'absolute')
        .style('left', x + 'px')
        .style('top', y + 'px')
        .style('display', 'block');

      d3.event.preventDefault();
  }) 
```

# php - 如何通过路径访问多维数组元素？

> ID：13090322
> 
> 赞同：3
> 
> 时间：2012-10-26T15:58:04.977
> 
> 标签：php, arrays, multidimensional-array

> **可能重复：**
> [PHP：使用字符串作为数组索引路径来检索值](https://stackoverflow.com/questions/1677099/php-use-a-string-as-an-array-index-path-to-retreive-a-value)

我有一个像这样的数组：

```
$array['image']['comment'] = 'something';
$array['image']['tag'] = 'happy';
$array['image']['colors']['blue'] = '12345'; 
```

如果我有字符串中每个元素的路径，我该如何设置或获取数组值？

例如`$path = 'image/colors/blue';`下面的函数应该返回的地方`12345`

```
function get_array($array, $path)
{
//what goes here?
}

function set_array($array, $path, $value)
{
//what goes here?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:24:50.830

尝试这个：

```
$arr = array('a' => 'A', 'b' => array('c' => 'C', 'd' => array('e'=>'E')));

function read_array($array, $path)
{
  if($pos = strpos($path, '/') !== false){
    $key = substr($path, 0, $pos);
    $restOfKey = substr($path, $pos + 1); 
    return read_array($array[$key], $restOfKey);
  } else {
    $key = $path;
    return $array[$key];
  }
}

echo read_array($arr, 'a');      //A
echo read_array($arr, 'b/c');    //C
echo read_array($arr, 'b/d/e');  //E 
```

您当然应该添加错误检查和所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:00:43.880

尝试这个。非常基本，但它可能会为您提供一个起点：

```
$array['image']['comment'] = 'something';
$array['image']['tag'] = 'happy';
$array['image']['colors']['blue'] = '12345';

function get_array($array, $path) {
 if(strpos('/', $path) > 0) {
   list($first, $second, $third) = explode('/', $path);
   return $array[$first][$second][$third];
 }
}

get_array($array, 'image/colours/blue'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:00:04.863

您可以在路径字符串上调用 split 或 explode 并将各个值插入每个维度。这不是无限的，但我假设您对这个可以达到的深度示例有一个粗略的想法。

```
function getPathVal($array, $path) { 
    $path_array = explode("/", $path);
    $cnt = count($path_array);
    if ($cnt == 3) {
         return $array[$path_array[0]][$path_array[1]][$path_array[2]];
    } else if ($cnt == 2) {
          return $array[$path_array[0]][$path_array[1]];
    } else if ($cnt == 1) {
           return $array[$path_array[0]];
    } else {
            return "";
    }
} 
```

# php - Codeigniter 2.1 - 字符替换

> ID：13090329
> 
> 赞同：1
> 
> 时间：2012-10-26T15:58:26.400
> 
> 标签：php, codeigniter, codeigniter-2

我有一种感觉，有什么东西在欺骗我。我有这两个功能。目的是替换字符，但有些东西不起作用。文件名已更改，但只有**空格**(" ") 更改为**_**字符（不再有 str_replace 函数）。怎么了？

**编辑** **char_replace** 位于未扩展控制器的单独库文件中。我正在使用**char_replace**函数来替换来自**输入 type=text**的数据并且它正在工作（正在从不同的控制器调用函数）。

```
function img_upload($folder) {
        $this->path = './public/img/' . $folder;
        $imgs = array();
        $config = array(
            'allowed_types' => 'jpg|jpeg|png|gif',
            'upload_path' => $this->path
        );

        $this->CI->load->library('upload', $config);

        foreach ($_FILES as $key => $value) {
            $img_name = $this->char_replace($key->name, '_');
            $config['file_name'] = $img_name;
          if($key != 'logo') :
              if (!$this->CI->upload->do_upload($key)) {
            } else {
                $q = $this->CI->upload->data();
                $config['image_library'] = 'gd2';
                $config['source_image'] = $this->path . '/' . $q['file_name'];
                $config['new_image'] = $this->path . '/thumbs';
                $config['create_thumb'] = FALSE;
                $config['maintain_ratio'] = TRUE;
                $config['width'] = 128;
                $config['height'] = 128;

                $this->CI->load->library('image_lib');
                $this->CI->image_lib->clear();
                $this->CI->image_lib->initialize($config);
                $this->CI->image_lib->resize();
                array_push($imgs, $q['file_name']);
            }
          endif;
        }

        if(empty($imgs)){
            return FALSE;
        } else {
            return implode(',', $imgs);
        }
    } 
```

和这个：

```
function char_replace($text, $rep_simbol = " ")
    {
        $char = array('!', '&', '?', '/', '/\/', ':', ';', '#', '<', '>', '=', '^', '@', '~', '`', '[', ']', '{', '}');
        return $name = str_replace($char, $rep_simbol, $text);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:29:05.607

```
foreach ($_FILES as $key => $value) {
  $img_name = $this->char_replace($key->name, '_');
  ... 
```

这里`$key->name`将是未定义的，因此`char_replace`将返回一个空字符串。由于`file_name`是空的，Codeigniter Upload 库将回退到它的`_prep_filename`方法。

使用`$value['name']`而不是`$key->name`.

如果您要上传多个文件，其中的`file`字段具有相同的名称

```
$count = 0;
foreach ($_FILES as $filename => $values) {
  $img_name = is_array($values['name']) ? $values['name'][$count] : $values['name'];
  $img_name = $this->char_replace($img_name, '_');
  $count++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:04:43.953

我认为替换必须至少具有与搜索一样多的元素：

```
function char_replace($text, $rep = " ")
{
    $char = array('!', '&', '?', '/', '/\/', ':', ';', '#', '<', '>', '=', '^', '@', '~', '`', '[', ']', '{', '}');
    $replace = array($rep, $rep, $rep, $rep, %rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep, $rep);
    return $name = str_replace($char, $replace, $text);
} 
```

# javascript - 查找和替换链接中的特定部分

> ID：13090332
> 
> 赞同：0
> 
> 时间：2012-10-26T15:58:39.613
> 
> 标签：javascript, jquery, regex

我对整个 RegEx 类型的代码很陌生，我需要一些帮助。

我正在开发一个动态图表系统并参考最多 6 年前的月度数据。我有链接可以在年份和月份之间切换。单击该链接时，它会更新图表（完美运行）并更新下面的表格数据（完美运行）。

**问题：**
更新表格数据后，我需要将所有行业钻取链接更新到正确的年份和月份，最好使用 jQuery。

**HTML：**

```
<td><a href="ind.jsp?year=2012&amp;industrycode=01&amp;month=01">Power</a></td> 
```

该链接位于表格的第一列，有 12 行包含需要更新年份和月份的链接。

**期望的结果：**
用户点击 2010
年 5 月。链接来自：

```
<td><a href="ind.jsp?year=2012&amp;industrycode=01&amp;month=01">Power</a></td><br> 
```

对此：

```
<td><a href="ind.jsp?year=2010&amp;industrycode=01&amp;month=05">Power</a></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:20:20.627

这应该用新的年份和月份替换所有`<a>`s 的第一个`<td>`s内的所有 s 的 href 属性：`<tr>`

```
function getCSV(newYear, newMonth) {
    $("#stat_table tbody td a").each(function() {
        $(this).attr("href", $(this).attr("href").replace(/year=/[0-9]{4},"year="+newYear).replace(/month=/[0-9]{2},"month="+newMonth));
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:18:15.073

```
$('a','td:first').attr('href',$('a','td:first').attr('href').replace('year=2012','year=2010').replace('month=01','month=05')) 
```

​</p>

# c++ - 调用 SetupDiEnumDeviceInfo 会导致后续 CreateFile 返回 ERROR_SHARING_VIOLATION

> ID：13090333
> 
> 赞同：1
> 
> 时间：2012-10-26T15:58:42.477
> 
> 标签：c++, windows, createfile

在下面的代码中，调用会`SetupDiEnumDeviceInfo()`导致后续`CreateFile`返回`ERROR_SHARING_VIOLATION`而不是打开文件。我能够通过注释掉其他代码段来查明该行，直到我遇到会导致`CreateFile`失败的一行。

```
String SerialATDT::getComPortId() 
{
#if 1
  HDEVINFO hDevInfo;
  SP_DEVINFO_DATA DeviceInfoData;
  LPTSTR buffer = NULL;
  DWORD buffersize = 0;
  String comPort = "";

  // Create a HDEVINFO with all present devices.
  hDevInfo = SetupDiGetClassDevs(&GUID_DEVCLASS_MODEM,
    0, // Enumerator
    0,
    DIGCF_PRESENT );

  if (hDevInfo == INVALID_HANDLE_VALUE)
  {
    // Insert error handling here.
    return "";
  }

  // Enumerate through all devices in Set.
  DeviceInfoData.cbSize = sizeof(SP_DEVINFO_DATA);
  int offset = 0;

  while ( SetupDiEnumDeviceInfo(hDevInfo, offset++, &DeviceInfoData) )
  {
    DWORD DataT;

#if 1
    //
    // Call function with null to begin with, 
    // then use the returned buffer size (doubled)
    // to Alloc the buffer. Keep calling until
    // success or an unknown failure.
    //
    //  Double the returned buffersize to correct
    //  for underlying legacy CM functions that 
    //  return an incorrect buffersize value on 
    //  DBCS/MBCS systems.
    // 
    while (!SetupDiGetDeviceRegistryProperty(
      hDevInfo,
      &DeviceInfoData,
      SPDRP_FRIENDLYNAME,
      &DataT,
      (PBYTE)buffer,
      buffersize,
      &buffersize))
    {
      if (GetLastError() == 
        ERROR_INSUFFICIENT_BUFFER)
      {
        // Change the buffer size.
        if (buffer) LocalFree(buffer);
        // Double the size to avoid problems on 
        // W2k MBCS systems per KB 888609\. 
        buffer = (LPTSTR)LocalAlloc(LPTR,buffersize * 2);
      }
      else
      {
        // Insert error handling here.
        break;
      }
    }

    // Look for identifying info in the name
    if ( mComPortIdentifier.size() > 0 ) {
      const char *temp = strstr(buffer, mComPortIdentifier.c_str());

      if ( temp == 0 ) {
        continue;
      }
    }
    // Now find out the port number
    DWORD nSize=0 ;
    TCHAR buf[MAX_PATH];
    if ( SetupDiGetDeviceInstanceId(hDevInfo, &DeviceInfoData, buf, MAX_PATH, &nSize) ) 
    {
      HKEY devKey = SetupDiOpenDevRegKey(hDevInfo, &DeviceInfoData, DICS_FLAG_GLOBAL, 0, DIREG_DEV, KEY_READ);

      DWORD size = 0;
      DWORD type;
      RegQueryValueEx(devKey, TEXT("PortName"), NULL, NULL, NULL, & size);
      BYTE* buff = new BYTE[size];
      String result;
      if( RegQueryValueEx(devKey, TEXT("PortName"), NULL, &type, buff, & size) == ERROR_SUCCESS ) {
        comPort = (char*)buff;

        if ( comPort.size() > 0 ) {
          RegCloseKey(devKey);
          break;
        } 
      }
      RegCloseKey(devKey);
      delete [] buff;
    }
#else
    comPort = "COM44";
#endif
  }

  //  Cleanup
  SetupDiDestroyDeviceInfoList (hDevInfo);

  if (buffer)  {
    LocalFree(buffer);
  }

  if ( GetLastError()!=NO_ERROR &&
    GetLastError()!=ERROR_NO_MORE_ITEMS &&
    GetLastError() != ERROR_INVALID_HANDLE )
  {
    TRACE_L("ATDT error after free %ld", GetLastError() );
    // Insert error handling here.
    return "";
  }

  return comPort;
#else
return "COM44";
#endif
}

bool SerialATDT::getComPort(HANDLE *hFile)
{
  String comPort = getComPortId();

  *hFile = INVALID_HANDLE_VALUE;

  if ( comPort.size() > 0 ) {
    String comPortStr;

    comPortStr.Format("\\\\.\\%s", comPort.c_str());

    *hFile = ::CreateFile( comPortStr.c_str(),
      GENERIC_READ | GENERIC_WRITE,
      0,
      NULL,
      OPEN_EXISTING,
      0,
      NULL );

    if ( *hFile == INVALID_HANDLE_VALUE ) {
      TRACE_L("AT file open error %ld", GetLastError());
    }
  }

  return *hFile != INVALID_HANDLE_VALUE;
} 
```

我一直在寻找，但没有找到`DeviceInfoData`需要清除的原因（也没有找到方法）。有没有人遇到过这个？

# ios - 在情节提要中设置 UITableViewCell 的 backroundView 属性的运行时错误

> ID：13090338
> 
> 赞同：4
> 
> 时间：2012-10-26T15:58:49.340
> 
> 标签：ios

在使用静态内容表视图的情节提要中。我添加了一个表格视图单元格。在其中我添加了一个视图和一个标签。当我将视图分配为单元格的背景视图（按 ctrl+单击并从单元格拖动到视图）时，加载 tableview 后运行时出现以下错误。

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 -layoutSubviews 后仍需要自动布局。UITableViewCell 的-layoutSubviews 实现需要调用super。

如果我删除关联，它运行没有问题。

有没有人有过这个错误的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T03:41:59.267

我将猜测这是一个罕见的情况，其中一个视图被视为在视图层次结构中包含两次。执行布局时，它会通过普通视图继承并布局视图，但随后（或之前）它也会布局背景视图层次结构。这将导致布局错误。

解决方案？对着苹果咆哮并忽略它。断开视图与 backgroundView 属性的连接，并将其作为视图处理。这对我有用。我认为连接它没有任何很大的优势。

# c++ - 使用 C++ 指针的最佳方法？

> ID：13090345
> 
> 赞同：0
> 
> 时间：2012-10-26T15:59:06.857
> 
> 标签：c++, optimization, pointers, recursion

我的c++知识有限，希望你能帮助我:)

我有一个这样的递归方法：

```
std::string content;
std::string pathDir;

void Recurcive(std::string &url)
{

    content = getContent(url);
    url = findOneUrl(content);
    pathDir = getPathDir(url);
    //etc..

    Recurcive(url);

} 
```

对方法代码中使用的参数进行良好优化的最佳实践是什么？我应该对内容、newUrl、pathDir 使用指针吗？有或没有指针有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:11:42.927

传递参数有三种方式：**按值**、**使用指针**和**按引用**。

**按值**：将创建参数的新副本。对于像这样的大物体`std::string`可能很昂贵。对于诸如 之类的小事`int`，没关系。

```
void myFunc(std::string str) { ... }
std::string mySuperLongString = getSuperLongString()
myFunc(mySuperLongString) // will make a copy of the long string. Expensive. 
```

**使用指针**：传递指针时，您只是传递了一段数据的地址。实际上，指针是按值传递的，但是因为您只是传递一个地址，所以这是一个轻量级的操作。

```
void myFunc(std::string *str) { ... }
std::string mySuperLongString = getSuperLongString()
myFunc(&mySuperLongString) // Pass the address of the string. Light operation 
```

**使用引用**：它与使用指针非常相似，只是需要进行一些额外的安全检查。例如，您不能在分配一次后重新分配引用，并且您可以将引用视为您正在使用的事物的另一个名称（即您不需要使用取消引用运算符`*`，并且`->`喜欢使用指针） . 使用引用*与使用指针一样轻量级*，但更安全。这是传递参数 C++ 的首选方式。

```
void myFunc(std::string& str) { ... }
std::string mySuperLongString = getSuperLongString()
myFunc(mySuperLongString) // Pass a reference to the string. Light operation 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-26T16:07:22.097

这里的第一点是包含 std 命名空间，如下所示。

```
using namespace std; 
```

在此之后，您可以直接使用字符串而不是 std::string 在将参数/参数传递给函数时提出您的问题，使用引用变量，因为没有参数的副本发生，因此它会更快并且引用是也比指针更安全

# jsf-2 - 将 p:fileUpload 与 AJAX 一起使用

> ID：13090347
> 
> 赞同：2
> 
> 时间：2012-10-26T15:59:12.460
> 
> 标签：jsf-2, primefaces

我正在使用 PrimeFaces **p:fileUpload**按照手册将图像传输到支持 bean，如下所示：

```
 <h:outputLabel value="Select Files:" />
                <p:fileUpload fileUploadListener="#{uploadImage.doUpload}"
                                  multiple="true"
                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                                  description="Select Images"                                      
                                  update="@form"
                                  /> 
```

该组件允许用户选择多个文件批量上传，非常方便。然而，在将它们存储到数据库之前，我希望用户输入更多信息（即图像标题），因此**doUpload()**方法获取上传的文件并将它们保存到名为**work**的属性中，该属性是对象列表。

在页面的后面（在同一个**h:form**内）我有一个数据表，显示需要处理的上传文件。

```
 <p:dataTable
                    value="#{uploadImage.work}"
                    var="unit"
                    resizableColumns="true"
                    rendered="#{not empty uploadImage.work}"> 
```

问题是数据表只重绘一次，无论上传多少文件。doUpload **()**方法被调用每个文件。因此，当我单击组件上的**Upload**按钮时，**p:dataTable**会出现，但无论如何只有一行。如果我刷新屏幕，所有行都会出现。

每次**doUpload()**退出时，有什么方法可以重新渲染**p:dataTable吗？**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T03:52:58.540

使用 primefaces RequestContext[组件](http://www.primefaces.org/showcase/ui/requestContext.jsf)在服务器端更新您的数据表。例如

```
 public void myFileUploadListener(FileUploadEvent event){
   //All your processing goes here
   RequestContext reqContext = RequestContext.getCurrentInstance();  //get your hands on request context
   reqContext.update(":form:myDatatable"); //update the datatable for each execution

  } 
```**

# iphone - 为 iPhone 创建 Magento 移动主题

> ID：13090348
> 
> 赞同：1
> 
> 时间：2012-10-26T15:59:17.990
> 
> 标签：iphone, magento

我是 Magento 的新手，我想为我的 Magento 商店创建移动主题（iPhone）。

谁能给我简单介绍一下 Magento Store 中的移动主题集成？

我已尝试按照以下参考网址实现移动主题：http: [//smarttheme.cryozonic.com/installation](http://smarttheme.cryozonic.com/installation) 但主题并未反映在移动浏览器中。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T09:20:22.393

披露：我是您在[http://smarttheme.cryozonic.com/installation](http://smarttheme.cryozonic.com/installation)中提到的 magento 移动主题的作者。

只是为了避免混淆，Magento 附带了一个您可以配置的股票移动主题，然后您有许多开发人员编写具有不同特性、设计和功能集的商业移动主题。如果您想知道如何启用默认的 magento 移动主题，您可以按照[http://support.createhosting.co.nz/knowledgebase.php?action=displayarticle&id=51](http://support.createhosting.co.nz/knowledgebase.php?action=displayarticle&id=51)上的说明进行操作。默认主题的设计与您提到的不同，您可以在这里试用：http: [//smarttheme.cryozonic.com/demo](http://smarttheme.cryozonic.com/demo)

# mysql - MySQL 查询以查找朋友和共同朋友的数量

> ID：13090353
> 
> 赞同：9
> 
> 时间：2012-10-26T15:59:37.457
> 
> 标签：mysql

我已经浏览了这些问题，但我找不到任何能完全满足我需要的东西，而且我自己也不知道该怎么做。

我有 2 个表，一个用户表和一个朋友链接表。用户表是我所有用户的表：

```
 +---------+------------+---------+---------------+
    | user_id | first_name | surname |     email     |
    +---------+------------+---------+---------------+
          1         joe       bloggs    joe@test.com
          2         bill      bloggs    bill@test.com
          3         john      bloggs    john@test.com
          4         karl      bloggs    karl@test.com 
```

我的朋友链接表然后显示用户之间的所有关系，例如：

```
 +--------=+---------+-----------+--------+
    | link_id | user_id | friend_id | status |
    +---------+---------+-----------+--------+
       1         1          3           a
       2         3          1           a
       3         4          3           a
       4         3          4           a
       5         2          3           a
       6         3          2           a 
```

注意，状态栏中的 a 表示已批准，也可能有 r（请求）和 d（拒绝）。

我想要做的是有一个查询，如果用户进行搜索，它将返回一个他们目前还不是朋友的用户列表，以及每个用户与他们有多少共同朋友。

我设法查询了当前不是他们朋友的所有用户。因此，如果进行搜索的用户的用户 ID 为 1：

```
SELECT u.user_id,u.first_name,u.surname
FROM users u
    LEFT JOIN friend_links fl
        ON u.user_id = fl.user_id AND 1 IN (fl.friend_id)
WHERE fl.friend_id IS NULL
AND u.user_id != 1
AND surname LIKE 'bloggs' 
```

那么我如何计算每个返回用户的共同朋友的数量呢？

**编辑：**

就像编辑一样，我认为我的问题并不是特别清楚。

我目前在上面的查询将产生以下一组结果：

```
 +---------+------------+---------+
    | user_id | first_name | surname |
    +---------+------------+---------+
          2         bill      bloggs
          4         karl      bloggs 
```

这些是与姓氏 bloggs 匹配的用户，这些用户当前不是 joe bloggs 的朋友（用户 ID 1）。

然后，我希望每个用户与执行搜索的用户有多少共同朋友，因此返回的结果如下所示：

```
 +---------+------------+---------+--------+
    | user_id | first_name | surname | mutual |
    +---------+------------+---------+--------+
          2         bill      bloggs     1
          4         karl      bloggs     1 
```

这些返回的用户中的每一个都有 1 个共同的朋友，因为 joe bloggs（用户 ID 1）是 john bloggs 的朋友，而 john bloggs 是两个返回用户的朋友。

我希望这更清楚一点。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:40:58.670

可以通过在friend_id 字段上将friend_links 表连接到自身来找到共同的朋友，如下所示：

```
SELECT *
FROM friend_links f1 INNER JOIN friend_links f2
  ON f1.friend_id = f2.friend_id
WHERE f1.user_id = $person1
  AND f2.user_id = $person2 
```

但是请记住，在最坏的情况下，这实际上是对friend_links 表中的行数进行平方，并且一旦您拥有非平凡的行数，就可以很容易地提升您的服务器*。*更好的选择是为每个用户使用 2 个子查询，然后加入这些子查询的结果。

```
SELECT *
FROM (
  SELECT *
  FROM friend_links
  WHERE user_id = $person1
) p1 INNER JOIN (
  SELECT *
  FROM friend_links
  WHERE user_id = $person1
) p2
  ON p1.friend_id = p2.friend_id 
```

此外，您可以通过删除代理键`link_id`并仅创建`(user_id,friend_id)`主键来简化您的friend_links 表，因为它们无论如何都必须是唯一的。

* * *

## 编辑：

> 这将如何应用于搜索尚未成为朋友的用户的原始查询，如果可能的话，我想在一个查询中进行这两项操作？

```
SELECT f2.user_id, COUNT(*) 'friends_in_common'
FROM friend_links f1 LEFT JOIN friend_links f2
  ON f1.friend_id = f2.friend_id
WHERE f1.user_id = $person
GROUP BY f2.user_id
ORDER BY friends_in_common DESC
LIMIT $number 
```

我还认为可以将`user_id`约束从`WHERE`子句移到`JOIN`条件中，以减少自连接创建的数据集的大小，并防止像在我的第二个示例中那样使用子查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T10:51:06.160

此查询列出了不是用户 1 的朋友且姓氏匹配的任何人`'%bloggs%'`：

```
SELECT
  users.user_id,
  users.first_name,
  users.surname,
  Sum(IF(users.user_id = friend_links_1.friend_id, 1, 0)) As mutual
FROM
  users inner join
    (friend_links INNER JOIN friend_links friend_links_1
     ON friend_links.friend_id = friend_links_1.user_id)
  ON friend_links.user_id=1 AND users.user_id<>1
WHERE
  users.surname LIKE '%bloggs%'
GROUP BY
  users.user_id, users.first_name, users.surname
HAVING
  Sum(IF(users.user_id = friend_links.friend_id, 1, 0))=0 
```

只需更改 ON 子句上的用户 ID 和 WHERE 子句上的姓氏。我认为它现在应该可以正常工作了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:26:11.623

如果A是B的朋友，那么B也是A的朋友吗？只使用一个链接而不是两个链接（而不是friends_links 中的两行）不是更好吗？然后你必须使用两个状态列，status1 和 status2，并且只有当 status1 = status2 = "a" 时 A 才是 B 的朋友。

有很多方法可以显示共同的朋友，例如：

```
SELECT friend_id
FROM friend_links
WHERE friend_links.user_id = $user1 or friend_links.user_id = $user2
  AND NOT (friend_links.friend_id = $user1 or friend_links.friend_id = $user2)
GROUP BY friend_id
HAVING Count(*)>1 
```

此查询显示每个用户和不是他/她朋友的任何人：

```
SELECT
  users.user_id,
  users.first_name,
  users_1.user_id,
  users_1.first_name
FROM
  users INNER JOIN users users_1 ON users.user_id <> users_1.user_id
WHERE
  NOT EXISTS (SELECT *
              FROM friend_links
              WHERE
                friend_links.user_id = users.user_id
                AND friend_links.friend_id = users_1.user_id) 
```

（我唯一认为我没有检查的是友谊状态，但添加该检查很容易）。

我仍在努力，但是将这两个查询很好地结合在一起并不容易。所以这不完全是一个答案，我只是展示一些我尝试过的想法。

但是你到底需要什么？一个查询返回每个用户以及不是他/她的朋友的任何人以及共同朋友的数量，还是已经给出了 user_id？

使用一些代码，回答您的问题不是问题......但必须有一个很好的方法，只需使用 SQL！:)

**编辑：**

我仍然想知道是否有更好的解决方案，特别是下一个查询可能非常慢，但看起来这可能有效：

```
SELECT
  users_1.user_id,
  users_2.user_id,
  Sum(IF(users_1.user_id = friend_links.user_id AND users_2.user_id = friend_links_1.friend_id, 1, 0)) As CommonFriend
FROM
  users users_1 INNER JOIN users users_2
    ON users_1.user_id <> users_2.user_id,
  (friend_links INNER JOIN friend_links friend_links_1
    ON friend_links.friend_id = friend_links_1.user_id)
GROUP BY
  users_1.user_id,
  users_2.user_id
HAVING
  Sum(IF(users_1.user_id = friend_links.user_id AND users_2.user_id = friend_links.friend_id, 1, 0))=0 
```

（和以前一样，我没有检查友谊状态）

如果给定了用户，您可以放置`WHERE users_1.user_id=$user1`​​，但最好只留下一个用户表，然后过滤该用户的下一个 INNER JOIN。

# javascript - 发送具有 1 个不同字段的相同表单 n 次

> ID：13090355
> 
> 赞同：1
> 
> 时间：2012-10-26T15:59:47.197
> 
> 标签：javascript

现在，我有 3 部分代码在工作：

*   我有一个表格，我想添加 n 个名字。
*   这些名称被放入一个数组中。
*   循环以延迟方式遍历数组

但我想在每次迭代时提交带有新名称的表单。

表单始终使用姓氏提交（目标是 iframe），但您可以从我的调试注释代码中看到，将为数组中的每个名称弹出警报（延迟）。

```
<script>
function getUsers() 
{
    var separateUsers = document.getElementById("Requestors").value.split("\n");
    //document.write(separateUsers[1]);
    for (var i=0;i<separateUsers.length;i++)
    {
        sleep(400);
        document.sendForm.userName.value = (separateUsers[i]);
        //alert("Loop iteration "+separateUsers[i]+ " " +i+ " out of"+ i);
        document.getElementById("sendForm").submit();
        //document.write(sendForm.userName.value);
    }
}

function sleep(ms)
{
    var dt = new Date();
    dt.setTime(dt.getTime() + ms);
    while (new Date().getTime() < dt.getTime());
}   

</script>

<form name ="sendForm" id="sendForm" action="form.php" method="post" enctype="multipart/form-data" target="theTarget">
    <input type="hidden"  name="userName" id="userName" value="" />
</form>

<form name ="initialForm">
    <textarea name="Requestors" cols="10" rows="10" value= ""></textarea>
    <input type="button" onclick="getUsers()" value="Submit" />
</form>
<iframe id="theTarget" name ="theTarget" ></iframe> 
```

# php - MySQL 选择语句无法正常工作

> ID：13090359
> 
> 赞同：2
> 
> 时间：2012-10-26T15:59:54.237
> 
> 标签：php, mysql

我正在使用以下在 中运行良好的语句`HeidiSQL`，但在我的 PHP 代码中使用时它不返回任何数据：

```
$query="Select Left(SiteName, 4) from sites order by SiteName"; 
```

当我删除该`Left`功能时它可以工作：

```
$query="Select SiteName from sites order by SiteName"; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T16:02:41.477

它可能正确返回数据，但列（在您可能使用的 php 关联数组中）被命名`Left(SiteName, 4)`，尝试使用：

```
$query="Select Left(SiteName, 4) AS `SiteName` from sites order by SiteName"; 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:06:39.410

您需要为`Left(SiteName, 4)`将向 PHP 返回数据的列设置别名，

```
$query="Select Left(SiteName, 4) AS SOME_NAME from sites order by SiteName";
                                 ^^   ^^^^^ 
```

# ajax - LINQ to Entities 不支持指定的类型成员。使用 JSON、KendoUI、AJAX

> ID：13090371
> 
> 赞同：1
> 
> 时间：2012-10-26T16:00:10.883
> 
> 标签：ajax, json, linq, asp.net-mvc-4, kendo-ui

大家好，感谢您抽出时间帮助我。

我正在测试 KendoUI，我正在尝试使用 AJAX 绑定网格，但我收到错误

```
The specified type member 'getFullName' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported. 
```

我的模型看起来像这样

**项目模型**

```
public class Proyecto
{

    [Required]
    [Key]
    [Display(Name = "Num. Proyecto")]
    public virtual String ProyectoID { get; set; }

    [Required]
    [Display(Name = "ID Usuario")]
    public virtual int UserID { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [Display(Name = "Fecha De Inicio")]
    public virtual DateTime FechaInicio { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    [Display(Name = "Fecha de Fin")]
    public virtual DateTime FechaFin { get; set; }

    [Display(Name = "Descripcion")]
    public virtual String Descripcion { get; set; }

    [Required]
    [Display(Name = "Status")]
    public virtual int StatusID { get; set; }

    public virtual ICollection<Comentario> Comentarios { get; set; }
    public virtual ICollection<Abono> Abonos{ get; set; }
    public virtual ICollection<Cargo> Cargos{ get; set; }
    public virtual ICollection<Status> Status { get; set; }
    public virtual Usuario Usuario { get; set; }

} 
```

**乌苏里奥模型**

```
 public class Usuario
{
    [Required]
    [Key]
    [Display(Name = "Id")]
    public virtual int UserID { get; set; }

    [Required]
    [Display(Name = "Usuario")]
    public virtual String UserName { get; set; }

    [Required]
    [Display(Name = "Password")]
    public virtual String Password{ get; set; }

    [Required]
    [Display(Name = "Nombre")]
    public virtual String Nombre { get; set; }

    [Display(Name = "Apellidos")]
    public virtual String Apellidos{ get; set; }

    [Display(Name = "Email")]
    public virtual String Email { get; set; }

    [Required]
    [Display(Name = "Nivel")]
    public virtual int Nivel { get; set; }

    public virtual ICollection<Proyecto> Proyectos { get; set; }
    public virtual ICollection<Comentario> Comentarios { get; set; }

    [Display (Name="Responsable")]
    public virtual string getFullName
    {
        get {
            return Nombre + " " + Apellidos;
        }

    }

} 
```

在 Proyecto 控制器中我有这个方法（发生错误的地方）

```
 public ActionResult Proyectos_Read([DataSourceRequest]DataSourceRequest request)
    {
        db.Configuration.ProxyCreationEnabled = false;
        var proyectos = from e in db.Proyectos.Include(c => c.Usuario) select e;

        DataSourceResult result = proyectos.ToDataSourceResult(request, o => new
        {
            ProyectoID = o.ProyectoID,
            OCCliente = o.OCCliente,
            FullName = o.Usuario.getFullName,
            Descripcion = o.Descripcion
        });

        return Json(result, JsonRequestBehavior.AllowGet);
    } 
```

最后这是我的观点

```
 @(Html.Kendo().Grid<NTSMvc.Models.Proyecto>()
                         .Name("Grid")
                         .Columns(columns =>
                             {
                                 columns.Bound(p => p.ProyectoID).Filterable(true).Groupable(true);
                                 columns.Bound(p => p.OCCliente);
                                 columns.Bound(p => p.Usuario.getFullName);
                                 columns.Bound(p => p.Descripcion);
                             })
                             .DataSource( datasource => datasource
                                 .Ajax()
                                 .Read(read => read.Action("Proyectos_Read","Proyectos"))
                                 .PageSize(5)
                             )
                             .Filterable() 
                             .Groupable()                               
                             .Pageable()                                   
                     ) 
```

我需要如何更改我的 linq 查询或模型以在网格中获取全名

再次感谢您的时间。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-02T01:52:00.490

您可以尝试将“结果”定义更改为以下

```
DataSourceResult result = proyectos.AsEnumerable().Select(x => x).ToDataSourceResult(request, o => new
        {
            ProyectoID = o.ProyectoID,
            OCCliente = o.OCCliente,
            FullName = o.Usuario.getFullName,
            Descripcion = o.Descripcion
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T15:58:20.777

**ViewModel 的名为getFullName**的虚拟字符串属性中的自定义逻辑无法转换为 SQL 语法。

我建议您删除该属性并再次使用两个常规属性**Nombre**和**Apellidos**。我假设您要创建一个列，该列是这些属性的串联。如果是这样，您可以创建一个模板列和以下模板：

```
Html.Kendo().Grid...
...
Columns(cols=>{
    cols.Template(@<text></text>).Title("Full Name").ClientTemplate("#: Nombre # #: Apellidos #")
}) 
```

我希望这有帮助 ;）

# javascript - 侦听窗口事件或将对象附加到窗口

> ID：13090380
> 
> 赞同：0
> 
> 时间：2012-10-26T16:00:41.450
> 
> 标签：javascript, function, events, coffeescript

我有一个对象，我需要从另一个对象控制它。

什么是更好的做法，为什么？

通过在它的构造函数中引用对象`window.object = this`，然后`window.object.method()`从另一个调用

或者

开始监听`$(window).on 'objectEvent'`并从其他对象触发事件，例如`$(window).trigger('objectEvent')`？

我目前正在使用第二种方法，但我想知道它是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:25:56.927

第二种方法是最不坏的。您想避免污染全局命名空间，即：将属性添加到`window`.

在第二种情况下，您正在向它添加侦听器，如果您命名事件名称，这还不错，但最好的选择是使用*中间*对象并实现**Pub/Sub**模式，因此两个对象自己交互通过这。

# php - 搜索 RSS 提要

> ID：13090384
> 
> 赞同：0
> 
> 时间：2012-10-26T16:00:55.877
> 
> 标签：php, javascript, rss, simplexml

我有一个包含 5000 多个项目的 RSS 提要。在用户界面中，我试图让搜索功能能够根据不同的类别进行自定义搜索。首先，当页面加载时，我只显示前 10 个提要加载速度非常快，但是当我们输入一个字符串以选择一个类别进行搜索时，处理速度非常慢。我想知道是否有一种方法可以比每次都检查每个提要项更有效。

我没有在这里添加任何代码，因为我正在寻找处理/搜索如此大的 rss 提要的想法。到目前为止，我一直在使用 PHP（简单 XML）和 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:05:01.400

RSS（和一般的 XML）是很好的数据传输格式。它们不是通过随机访问访问该数据的好格式。

将提要导入数据库（正确地，不要只是在其中转储原始 XML），例如 Postgresql 或 MySQL，并使用数据库服务器提供的全文搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:05:16.313

不要为此使用 SimpleXML。（事实上​​，它真的根本不应该使用）。而是使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)类来解析您的 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:04:42.953

您可以使用会话变量来存储所有提要。在后台也有一个轮询脚本来检查新的提要。如果你得到一个，将它添加到会话中。使用会话变量来搜索提要。

# objective-c - GameKit 发送不同的分数类型

> ID：13090390
> 
> 赞同：5
> 
> 时间：2012-10-26T16:01:14.527
> 
> 标签：objective-c, ios, game-center, gamekit

我有一个具有 5 种不同游戏模式的应用程序，其中 3 种具有整数分数，其中 2 种具有基于时间的分数（他们完成游戏的速度）。

如何设置我的`reportScore:`方法，以便我在 iTunes Connect 中设置的排行榜（以最低到最高的**时间格式**显示最高分到*百分之一秒*）将以时间格式接收我的用户分数？

我想把它作为`NSTimeInterval`.

Apple Docs 指定的方法只接受一个整数作为分数：

```
- (void) reportScore: (int64_t) score forCategory: (NSString*) category
{
    GKScore *scoreReporter = [[GKScore alloc] initWithCategory:category];
    scoreReporter.value = score;

    [scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
        if (error != nil)
        {
            //handle the score to submit again later
        }
    }];
} 
```

**更新**

我对此进行了一些研究，我知道您只能将分数发送到 Game Center 排行榜作为`int64_t`. 那么如何格式化这个整数，以便我的排行榜将其格式化为百分之一秒的时间呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:09:57.277

来自[苹果的文档](https://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKScore_Ref/Reference/Reference.html)：

> 分数对象提供的值仅在格式化显示时由 Game Center 解释。当您在 iTunes Connect 上定义排行榜时，您可以确定分数的格式。

即，您需要将时间转换为整数并发送。如果您想要 1/100 秒的精度，您可以将浮点数乘以`NSTimeInterval`100 并将其四舍五入为整数（例如，1.567s -> 157），然后发送它并相应地选择排行榜格式（“经过时间 - 到百分之一一秒钟”，如果我没记错的话）。

# java - 访问 Java 堆栈帧

> ID：13090391
> 
> 赞同：0
> 
> 时间：2012-10-26T16:01:14.647
> 
> 标签：java, logging, parameters, stack

是否可以通过堆栈帧访问方法参数？

由于我一直在从事的一个项目，我遇到了这种需求。如果发生异常，我想做一些日志记录。如果可能的话，我想递归地记录一个方法的名称和参数，直到我到达“上层”。

这是一个小例子：

```
class Parent{

    public int parentMethod(int param1) {
        String param2;
        Child child = new Child();
        (...)some Work(...)
        int ret = child.childMethod(param1, param2);
        (...)some More Work(...)
        return ret;
    }
}

class Child{
    public int childMethod(int param1, String param2) {
        (...) do more stuff (...)
        try {
            (...) this might generate an exception(...)
        }catch(Exception e) {
            (...) log method name and parameters value(...)
        }
    }
} 
```

因此，在这种情况下，我想记录以下内容：-childMethod: param1 value, param2 value- -parentMethod: param1 value-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:04:59.037

我认为你有一个根本问题。对于除原语以外的任何东西，都传递参数*引用。*因此，*方法可以更改传递给它的参数值*。简单的堆栈遍历并不能解决这个问题。

我注意到您上面的示例使用了原语和不可变对象。但是我怀疑你需要一个更通用的解决方案。也许某种 AOP 解决方案可能会奏效，但您仍然必须在调用方法时复制对象（以便记录它们），我预见到一个悲伤的世界。

# c# - 在新的 Itextsharp 中替换 Itexthandler.parse

> ID：13090393
> 
> 赞同：2
> 
> 时间：2012-10-26T16:01:16.430
> 
> 标签：c#, itextsharp

我正在尝试使用该`itextsharp itexthandler.parse`方法将 XML 转换为 PDF，但现在我将 DLL 更新为`itextsharp`新的。

这是要转换的 XML

```
<?xml version="1.0" encoding="utf-16"?>
<itext xmlns:cs="urn:cs">
<ignore />
<chapter numberdepth="0" depth="0" indent="0" leading="18.0">
<title leading="15.0" align="Default" font="Helvetica, Arial" size="18.0" fontstyle="normal" red="140" green="43" blue="120">
  <chunk font="Helvetica, Arial" fontstyle="normal">Statistics Report</chunk>
  <chunk red="140" green="43" blue="120" fontstyle="italic">
            Main
          </chunk>
</title>
<section numberdepth="1" depth="1" indent="0">
  <title leading="25.0" align="Default" font="Helvetica, Arial" size="17.0" fontstyle="normal" red="85" green="85" blue="85">
    <chunk font="Helvetica, Arial" fontstyle="normal">General Statistics</chunk>
  </title>
  <table columns="3" width="80%" align="Center" cellpadding="5.0" cellspacing="5.0" widths="33.33333;33.33333;33.33333">
    <row>
      <cell horizontalalign="center" verticalalign="center" leading="18.0" bgred="140" bggreen="43" bgblue="120">
        <paragraph leading="18.0" font="Georgia, Arial" red="255" green="255" blue="255" bgred="140" bggreen="43" bgblue="120">
          Registered Users<newline />15</paragraph>
      </cell>
      <cell horizontalalign="center" verticalalign="center" leading="18.0" bgred="140" bggreen="43" bgblue="120">
        <paragraph leading="18.0" font="Georgia, Arial" red="255" green="255" blue="255">
          All Hotels<newline />78</paragraph>
      </cell>
      <cell horizontalalign="center" verticalalign="center" leading="18.0" bgred="140" bggreen="43" bgblue="120">
        <paragraph leading="18.0" font="Georgia, Arial" red="255" green="255" blue="255">
          All Departments<newline />9</paragraph>
      </cell>
    </row>
  </table>
</section>
</chapter>
</itext> 
```

我也使用了这段代码，但这也失败了：

```
using (StringReader sr = new StringReader(xmlTransformed))
                    {
                        PdfWriter writer = PdfWriter.GetInstance(document, myMemoryStream);
                        document.Open();
                        XMLWorkerHelper.GetInstance().ParseXHtml(
                          writer, document, sr
                        );
                    } 
```

# php - Mysql 使用 JOIN 时为每个表设置不同的选择集

> ID：13090394
> 
> 赞同：0
> 
> 时间：2012-10-26T16:01:28.113
> 
> 标签：php, mysql

我有这个 JOIN 声明

```
$data = mysql_query("SELECT * FROM table a  JOIN db.table2 b ON a.e_id = b.e_id WHERE amount='5' "); 
```

从“table”中选择所有列，但我需要做的是保留“table”的全选，并且只在结果中包含“table2”中的两列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:04:04.547

```
"SELECT a.*,b.column1,b.column2 FROM table1 a JOIN table2 b ON a.e_id = b.e_id WHERE amount='5'" 
```

只需将“column1”和“column2”替换为您需要拉入的字段

# javascript - 使用 Javascript 获取最后一个字符串标记

> ID：13090395
> 
> 赞同：3
> 
> 时间：2012-10-26T16:01:31.240
> 
> 标签：javascript

如何实现字符串标记器并`","`使用 javascript 获取用逗号分隔的字符串的最后一个标记？

要标记化的字符串可能会变得非常大，并且它需要具有内存效率，这样浏览器就不会挂起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:05:29.583

您可能可以在分隔符上拆分字符串，然后引用结果数组中的最后一项：

```
var tokenstring = "token1,token2,token3,token4",
    arr = tokenstring.split( ',' ),
    lastToken = arr.pop();  // .pop() removes and returns the last item of the array

alert( lastToken ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:04:11.760

```
function reverse(s){
    return s.split("").reverse().join("");
}

function getLast(s)
{
  var reversed = reverse(s);
  return reversed.substring(0, reversed.indexOf(',')).reverse();
} 
```

# c# - 避免数据集中的重复名称

> ID：13090398
> 
> 赞同：0
> 
> 时间：2012-10-26T16:01:46.263
> 
> 标签：c#, asp.net, sql-server

我正在从表中获取数据并绑定到标签并在网格视图中下拉，但我想过滤表中的重复名称并将相应的日期分配给 DDL 怎么做？或者还有其他选择吗？

```
 private DataSet get()
    {
        string sql = "select Id,Name,RunDate from Historytable";
        SqlDataAdapter da=new SqlDataAdapter(sql,con);
        DataSet ds=new DataSet();
        da.Fill(ds);
        return ds;
    } 
```

![在此处输入图像描述](../Images/518f963f3614910c436cfd1d82e695b6.png)

```
 protected void GridView1_RowDataBound1(object sender, GridViewRowEventArgs e)
    { 

        //what to code here?

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:05:41.410

如果您只想从 HistoryTable 中获取唯一名称，则应使用关键字 DISTINCT

```
string sql = "select DISTINCT Name from Historytable"; 
```

但是，看到您的更新，我认为您应该将查询更改为类似于@dasblinkenlight 的建议答案，如果您想要每个名称的第一个日期

```
string sql = "select Min(ID), Name, Min(RunDate) from Historytable group by Name"; 
```

或（如果您想要每个名称的最后日期）

```
string sql = "select Max(ID), Name, Max(RunDate) from Historytable group by Name"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:04:41.910

删除重复项的快速而肮脏的方法如下：

```
string sql = "select min(Id),Name,min(RunDate) from Historytable group by Name"; 
```

`Name`这将消除存在具有数字较小 ID的重复项的所有行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:40:40.883

如果您不需要任何 ID，您可以在其选定事件中将 gridview 的 objectdatasource 设置为字典，使用一点 LINQ 进行分组：

```
Gridview1_ObjectDataSource_Selected(object sender, ObjectDataSourceStatusEventArgs e) {
   DataSet ds = get();

   Dictionary<string, List<DateTime>> dict = new Dictionary<string, List<DateTime>>(); 

   var rows = ds.Tables[0].AsEnumerable()
                          .Select(row => new { name = row.Field<string>("name"), RunDate = row.Field<DateTime>("RunDate") })
                          .GroupBy(r => r.name)
   foreach (var group in rows) {
      dict.Add(group.Key, group.ToList());
   }
   e.ReturnValue = dict;
} 
```

# javascript - 使用 XSL 将 XML 属性作为 id 传递到 HTML

> ID：13090401
> 
> 赞同：1
> 
> 时间：2012-10-26T16:01:50.237
> 
> 标签：javascript, html, xml, xslt

希望你能帮助我指出这个问题的正确方向......

我正在尝试做的事情：我有一个 XML 文件，我正在使用 XSLT 将其转换为 HTML。其中一部分包括添加“隐藏”按钮。我想使用隐藏按钮从XML中删除节点，我的想法是给按钮与相关XML元素中的myId属性相同的id，这样可以很容易地将按钮的onClick与XML匹配要隐藏的元素。

下面是一些 XML：

```
<sectionStatement myId="1">Awesome statement</sectionStatement>
<sectionStatement myId="2">I am a statement</sectionStatement>
<sectionStatement myId="3">I am another statement</sectionStatement> 
```

这是我卡住的XSL：

```
<xsl:for-each select="sectionStatement">
  <p><xsl:value-of select="."/><a class='showHideBtn' href='#'>Hide</a></p>
</xsl:for-each> 
```

...所以我想以 3 段 html 结尾，每段都有一个“隐藏”按钮，并且我希望该按钮具有相关的 id（1,2 或 3）。这相当于添加`id="<xsl:value-of select='@myId'/>"`到标签中......但我已经尝试过了，它不起作用！

谢谢你的建议:-) 马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:16:09.663

使用属性值模板`<a id="{@myId}" class="showHideBtn" href="#">Hide</a>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:15:03.563

您可以使用[xsl:attribute](http://www.w3schools.com/xsl/el_attribute.asp)添加动态的条件属性并将模板应用于元素。

```
<p>
   <xsl:attribute name="id">
    optionalText<xsl:value-of select="@myId"/>
   </xsl:attribute>
</p> 
```

如果您已经知道该值，则转换语法会更简单。

```
<xsl:for-each select="sectionStatement">
  <p><xsl:value-of select="."/>
    <a class='showHideBtn' href='#' id='{@myId}'>
    Hide
    </a>
  </p>
</xsl:for-each> 
```

# html - MP4 视频在 IE9 中仅播放没有视频的声音

> ID：13090406
> 
> 赞同：0
> 
> 时间：2012-10-26T16:02:19.100
> 
> 标签：html, internet-explorer-9, html5-video

我尝试在具有 237 Mo 大小的 IE9 中播放 mp4 视频，我可以听到声音但没有显示视频，我的文件符合 html5 doctype ( `<!DOCTYPE html>`)，以下是我如何实现视频标签（一切正常在铬）：

```
<video id="video" src="videos/myVideo.mp4" type='video/mp4' preload controls>
      Your brwoser doesn't seems to support video
    </video> 
```

我得到一个有声音的白屏，但​​没有视频。 ![在此处输入图像描述](../Images/757c834a34624e02a38f1bad231ed5b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:41:42.507

我在某处读到需要使用 IE 中的 H.264 编解码器对 mp4 进行编码。我还没有确认这一点，因为我在 IE9 中播放视频时也遇到了问题。至少在 Mac 上，您可以使用 MPEG Streamclip 转换您的视频文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:07:20.863

Internet Explorer 9 在运行 HTML5 视频播放器时遇到了一些问题（就像它处理很多东西一样）。参考[W3Schools](http://www.w3schools.com/html/html5_video.asp)，我认为对所有文件类型的视频文件进行编码以允许最大程度地支持跨浏览器是明智的。如果可以，请尝试使用 YouTube 或 Vimeo 等视频服务，因为它们会为您处理所有编码，但如果您需要自己完成，请查看 HTML5 文档，了解如何使用多个编码文件。

# eclipse - 64 位 Windows 7 上的 32 位 Java，用于在 Eclipse Juno 中运行 JBoss JSP 编辑器

> ID：13090409
> 
> 赞同：1
> 
> 时间：2012-10-26T16:02:21.990
> 
> 标签：eclipse, jsp, jboss, java

我在我的 Eclipse Juno 上安装了 JBoss Tools。它起作用了，然后当我单击选项卡设计/视图/除了我的 JSP 窗口上的源之外的任何内容时，它说用于 JSP 编辑器的 JBoss 工具无法在我的 64 位 Eclipse、JRE7 和 Windows 7 上运行。

我一直在到处浏览，有些论坛说您必须将 JRE 更改为 32 位。之后我安装了 JRE7 32 位，重新启动并尝试在控制面板上查看 Java。

当我单击控制面板上的 Java 选项卡时，它说

> 无法打开 \lib\i386\jvm.cfg。

我试图检查CMD，我输入`java -version`然后它显示

> 无法加载本机库：无法在 AMD 64 位平台上加载 IA 32-bit.dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:11:24.477

我建议您卸载所有 Java 实例，然后重新开始。

先安装 64 位 JDK，设置好你的正常开发工具即可使用。然后安装 32 位 JDK 但*不要安装公共 JRE*。然后配置一个单独的 Eclipse 实例以使用 32 位 JDK。（我会保留一个单独的、普通的 64 位 Eclipse，因为 32 位意味着 Java 的堆被限制在 1.5Gb 左右）

# hadoop - handoop 与 put/copyFromLocal 连接错误

> ID：13090416
> 
> 赞同：5
> 
> 时间：2012-10-26T16:02:34.157
> 
> 标签：hadoop, connection, localhost, connect

我正在按照教程安装 hadoop： http: [//www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/) 现在我被困在“复制本地示例数据”到 HDFS”步骤。

我得到的连接错误：

```
<12/10/26 17:29:16 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 0 time(s).
12/10/26 17:29:17 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 1 time(s).
12/10/26 17:29:18 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 2 time(s).
12/10/26 17:29:19 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 3 time(s).
12/10/26 17:29:20 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 4 time(s).
12/10/26 17:29:21 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 5 time(s).
12/10/26 17:29:22 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 6 time(s).
12/10/26 17:29:23 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 7 time(s).
12/10/26 17:29:24 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 8 time(s).
12/10/26 17:29:25 INFO ipc.Client: Retrying connect to server: localhost/127.0.0.1:54310\. Already tried 9 time(s).
Bad connection to FS. command aborted. exception: Call to localhost/127.0.0.1:54310 failed on connection exception: java.net.ConnectException: Connection refused 
```

这已经和这个问题差不多了： [Errors while running hadoop](https://stackoverflow.com/questions/8501781/errors-while-running-hadoop)

现在的重点是，我已经禁用了 ivp6，如那里和上面的教程中所述，但它没有帮助。有什么我一直想念的吗？

编辑：

我在第二台机器上用新安装的 ubuntu 重复了该教程，并逐步进行了比较。事实证明，在 hduser 的 bashrc 配置中存在一些错误。后来效果很好...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:59:14.063

如果我`Hadoop fs <anything>`在 DataNode/NameNode 未运行时尝试这样做，我会收到确切的错误消息，所以我猜你也会发生同样的情况。

输入`jps`您的终端。如果一切都在运行，它应该如下所示：

```
16022 DataNode
16524 Jps
15434 TaskTracker
15223 JobTracker
15810 NameNode
16229 SecondaryNameNode 
```

我敢打赌你是 DataNode 或 NameNode 没有运行。如果 jps 的打印输出缺少任何内容，请重新启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T08:38:53.750

在整个配置之后给出这个命令

hadoop 名称节点 -formate

并通过此命令启动所有服务

全部启动.sh

这将解决您的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T09:09:01.900

1.  转到您的 etc/hadoop/core-site.xml。检查 fs.default.name 的值应该如下图所示。{ fs.default.name hdfs://localhost:54310 }
2.  在整个配置之后给出这个命令

hadoop 名称节点格式

3.  通过此命令启动所有服务

全部启动.sh

这将解决您的问题。

您的名称节点可能处于安全模式，运行 bin/hdfs dfsadmin -safemode leave 或 bin/hadoop dsfadmin -safemode leave 然后按照步骤 - 2 和步骤 -3

# php - 使用 Paypal 自动发送发票

> ID：13090422
> 
> 赞同：3
> 
> 时间：2012-10-26T16:02:56.160
> 
> 标签：php, api, paypal, billing

我以前见过很多次，在使用“PayPal express checkout”付款后会自动通过邮件发送账单（含税，......）。

现在我查看了用于快速结账的 PHP API（x.com、paypal.com）——但我只能找到手动请求付款的账单。如何实现此功能？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:11:13.070

可以使用“ [DoAuthorization](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_DoAuthorization) ”方法然后使用“ [DoCapture](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_soap_r_DoCapture) ”来确保自动请求资金。一旦完成，它应该向买家发送电子邮件。

# ruby - 为什么 Rails 演示应用程序会给出“未初始化的常量 ExecJS::RubyRacerRuntime::Context::V8”？

> ID：13090425
> 
> 赞同：1
> 
> 时间：2012-10-26T16:03:16.280
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

作为 Rails 的新手，我正在尝试启动并运行一个基本的“hello world”应用程序。特别是[Agile Web Development with Rails](http://pragprog.com/book/rails4/agile-web-development-with-rails)第 2 章中的应用程序。加载 hello world 页面会导致标题中给出的错误。

* * *

到目前为止，我已经完成了以下工作：

```
rails new demo
cd demo 
```

添加`gem 'therubyracer'`到抱怨没有可用的 JavaScript 运行时`Gemfile`之后。`ExecJS`

```
bundle install
rake about         # (see below)
rails generate controller Say hello goodbye
rails server 
```

此时 WEBrick 启动，我加载了`http://localhost:3000/say/hello`. WEBrick 记录以下错误（也出现在浏览器中）：

```
Started GET "/say/hello" for 127.0.0.1 at 2012-10-26 11:45:10 -0400
Connecting to database specified by database.yml
Processing by SayController#hello as HTML
  Rendered say/hello.html.erb within layouts/application (80.9ms)
Completed 500 Internal Server Error in 167ms

ActionView::Template::Error (uninitialized constant ExecJS::RubyRacerRuntime::Context::V8
  (in /home/error/work/demo/app/assets/javascripts/say.js.coffee)):
    3: <head>
    4:   <title>Demo</title>
    5:   <%= stylesheet_link_tag    "application", :media => "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8: </head>
    9: <body>
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___1746644185114933585_70069037653480'

  Rendered /home/error/.gem/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /home/error/.gem/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /home/error/.gem/ruby/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (18.7ms)
[2012-10-26 11:45:12] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

`rake about`返回：

```
About your application's environment
Ruby version              1.9.3 (x86_64-linux)
RubyGems version          1.8.24
Rack version              1.4
Rails version             3.2.8
JavaScript Runtime        therubyracer (V8)
Active Record version     3.2.8
Action Pack version       3.2.8
Active Resource version   3.2.8
Action Mailer version     3.2.8
Active Support version    3.2.8
Middleware                ActionDispatch::Static, Rack::Lock, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x0000000276b298>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::Head, Rack::ConditionalGet, Rack::ETag, ActionDispatch::BestStandardsSupport
Application root          /home/error/work/demo
Environment               development
Database adapter          sqlite3
Database schema version   0 
```

* * *

工作站运行 Fedora 17 x86_64。尽管如此，我几乎忽略了 yum 存储库中的 ruby​​ gems（我认为）并`gem install`在我的主目录中使用来获取我需要的一切。（再次，我认为。）

作为 Ruby 和 Rails 的新手，我很确定我错过了一些我还不知道的明显约定。我也不太确定我可能需要提供哪些额外信息，所以也请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:31:22.157

请试试这个：

```
sudo apt-get install nodejs 
```

rubytheracer 和 nodejs 都是 javascript 库。这些天大多数人都在使用 nodejs。

# python - 如何在 __init__.py 中将包模块作为 __main__ 别名导入？

> ID：13090427
> 
> 赞同：2
> 
> 时间：2012-10-26T16:03:23.797
> 
> 标签：python

我想使用 __init__.py 将包中的所有模块作为别名导入 __main__ 中，以便可以简单地从交互模式调用它们。例如，这是一个示例文件树：

```
foobar/
    __init__.py
    foo.py
    bar.py 
```

从python解释器我希望能够导入包并使用定义的别名访问所有模块，如下所示：

```
>>> import foobar
>>> <module 'foobar' from 'C:\...'>
>>> f.func()
>>> b.func() 
```

这将要求 __init__.py 包含以下内容：

```
# __init__.py

from . import foo as f
from . import bar as b

# these will not work
__main__.f = f
__main__.b = b 
```

我怎样才能使这项工作？

**编辑**

我不想使用`from foobar import *`，因为它不允许我使用别名。

`from foobar import foo as f`每次我启动交互模式时，为每个模块都打字效率不高，因为可能有数百个模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:18:28.790

在您的 __init__.py 文件中包含以下内容：

```
import foo
import bar as b 
```

然后在交互式会话中使用：

```
>>> from foobar import *
>>> value = foo.some_func()
>>> instance = b.SomeClass() 
```

我还应该提到，`from foobar import *`大多数 python 程序员都认为这是不好的风格，虽然这在交互式会话中并不重要，但如果你想在模块或脚本中完成同样的事情，首选的方式是：

```
from foobar import b, foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:58:35.417

如果一个模块在没有被明确告知这样做的情况下将内容添加到单独的模块的命名空间中，那将是非常糟糕的行为。正如他们所说，[显式优于隐式。](http://www.python.org/dev/peps/pep-0020/)

我建议您避免使用任何复杂的内容`__init__.py`，只需在主模块（或命令行）中执行此操作：

```
import foobar.foo as f, foobar.bar as b 
```

**编辑：**

如果您确实需要，可以弄乱主模块。虽然这可能不是一个好主意，但方法如下：

```
import sys

import foo, bar

main = sys.modules["__main__"]
main.f = foo
main.b = bar 
```

现在，正如一些人所说，让导入模块产生这样的副作用通常不是一个好主意。至少，任何读过你的代码的人都会非常困惑。“等等，这个`f`变量是从哪里来的？”

我建议不要让你的模块将东西插入到你的全局命名空间中，而是让它在它自己的命名空间中做你想要的别名，然后在它上面使用`from module import *`它来获取你的命名空间中的别名。

Make`foobar`的`__init__.py`文件如下所示：

```
from . import foo as f
from . import bar as b 
```

然后在您的主模块中，只需执行以下操作：

```
from foobar import *
# now you can use f and b 
```

如果您有数百个导入要做，请将它们全部放入`__init__.py`. 或者，如果它们与该包无关，请使用单独的模块来处理别名内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:25:39.373

根本没有指定 Python 模块像那样突破其命名空间，并且因为 Python 有效地倾向于限制通常不是一个好主意的所有内容，所以这是不可能的。交互式控制台可能有启动钩子之类的东西，谁知道呢。

另一个可以让您的生活更轻松的想法：在模块中写入：

```
foo = "foo!"
bar = "bar!"

def add_to(obj):
    obj['f'] = foo
    obj['b'] = bar 
```

在您的交互式控制台中：

```
>>> from stuff import add_to
>>> add_to(globals()) 
```

# javascript - 循环并将javascript添加到html

> ID：13090430
> 
> 赞同：0
> 
> 时间：2012-10-26T16:03:37.490
> 
> 标签：javascript, html

我将不得不重新发布我之前的问题，因为我需要重新制定我需要的内容。

所以，就这样吧。

我有一个包含一些列表项的网页，

**HTML**

```
<div class="container">
<p>Items are ordered Alphabetically and I want the text to be untouched</p>
</div> 
```

所有这些列表项都包含在我计算机上的一个文件夹中。我想要做的不是手动输入 ../Html/1.html , ../Html/2.html, ... 相反，我希望找到一个脚本来为我完成这项工作。

所有项目都按数字顺序编号，从 1 一直到 100。所以我知道使用 i++ 进行迭代可能会在循环中派上用场。但我真的不知道更多！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:43:43.670

用这个：

```
<div id="theContainer" class="container">
  <p>Items are ordered Alphabetically and I want the text to be untouched</p>
</div>

<script>
window.addEventListener('DOMContentLoaded', function() {
  var container = document.getElementById('theContainer'), i, p, s;
  var numStart = 1, numEnd = 100;
  var path = '../Html/*.html'; //use "*" to substitute the number
  for (i = numStart; i <= numEnd; i++) {
    p = path.replace(/\*/,i);
    s += '<li><a href="' + encodeURI(p) + '">' + p + '</a></li>';
  }
  container.innerHTML = container.innerHTML + '<ol>' + s + '</ol>';
}, false);
</script> 
```

# javascript - 为什么这个 JavaScript 有效？

> ID：13090434
> 
> 赞同：19
> 
> 时间：2012-10-26T16:03:55.560
> 
> 标签：javascript, uglifyjs

我正在查看来自 UglifyJS 的一些东西的输出，并且发生在一些代码中，如下所示：

```
var a = 0;
var b = function () {
    return function () {
        a++;
    }(), 'Hello, World'
}(); 
```

运行该代码后`a`是字符串。`1``b``Hello, World!`

乍一看，这似乎`b`是`undefined`因为它看起来像一个没有返回值的函数的结果被返回，但后面跟着一个逗号和一个字符串文字。

为什么这行得通？
为什么 UglifyJS 不只是执行匿名函数然后`Hello, World!`作为下一条语句返回？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T16:07:44.213

由于逗号运算符，它可以工作。从 MDN 规范：

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

这两个函数都是IFFY，它们是立即执行的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T16:08:00.820

使用逗号运算符的表达式的结果是[逗号运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)的右侧。

你有：

```
return a_function_call(), a_string 
```

……所以你被`a_string`分配了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-26T16:09:40.000

首先让我[在逗号运算符上引用 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)：

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

话虽如此，很明显，您的代码如何评估：

在立即执行的函数中，您返回以逗号分隔的 2 个值：

```
function () { a++; }() 
```

和

```
'Hello World' 
```

所以两个操作数都被评估了。这会增加您的变量`a`并导致创建函数的返回值的以下表达式`b`：

```
undefined, 'Hello World' 
```

最后，右操作数作为外部函数的值返回，从而给出`b`value `'Hello World'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:10:06.807

查看[JavaScript 中的逗号运算符](http://javascriptweblog.wordpress.com/2011/04/04/the-javascript-comma-operator/)。

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。

# java - 如何使用 XAdES4j 信任 Windows 密钥库的锚点？

> ID：13090442
> 
> 赞同：0
> 
> 时间：2012-10-26T16:04:24.433
> 
> 标签：java, encryption, xades4j

我正在开发（java）一个需要连接到 Windows 密钥库的 xml 验证应用程序。目前我遇到以下消息：**CannotBuildCertificationPathExecption：信任锚密钥库未初始化。**

现在我可以使用以下示例从商店获取我的密钥：http://stackoverflow.com/questions/5476974/java-access-to-intermediate-cas-from-windows-keystores 效果很好。并给了我使用 XAdES4J 的希望。

我正在使用的代码如下：

```
trustAnchors = KeyStore.getInstance("Windows-MY");  
certValidator = new PKIXCertificateValidationProvider(trustAnchors, false); 
p = new XadesVerificationProfile(certValidator); 
v = p.newVerifier();

Element sigElem = (Element) signature.item(0); //Which contains the complete signature segment from the xml

XAdESVerificationResult r;  
SignatureSpecificVerificationOptions options = new SignatureSpecificVerificationOptions().useBaseUri("http://www.ietf.org/rfc/");

r = v.verify(sigElem, options); 
```

证书是 x509。加密方法 XAdES-t。

有人知道如何与 Windows 密钥库建立受信任的连接吗？是否有任何关于 SignatureSpecificVerificationOptions 的信息。我发现很难根据我需要使用的实际设置来理解手册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:35:22.917

即使它是一个 Wndows 密钥库，您仍然需要加载它：

```
trustAnchors.load(null); 
```

*PKIXCertificateValidationProvider*不能这样做，因为可能需要保护参数。

此外，您可能希望使用“Windows-ROOT”而不是“Windows-MY”来访问受信任的证书颁发机构。

# symfony - access_control security.yml

> ID：13090444
> 
> 赞同：2
> 
> 时间：2012-10-26T16:04:32.127
> 
> 标签：symfony

您好，如果有人可以帮助我，请具体详细说明问题。我对 secirity.yml access_control 部分的权限有疑问，如果我把 security.yml 这个：

问题是登录表单没有捕捉到javascript

```
security:

firewalls:
    frontend:
        pattern:  ^/
        anonymous: ~
        form_login:
            login_path: /login
            check_path: /login_check
            default_target_path: /index
            success_handler: authentication_handler
        logout:
            path: /logout
            target: /login
            success_handler: authentication_handler
        security: true
        remember_me:
            key:      sitio123
            lifetime: 604800        # 7 * 24 * 3600 = 604.800 = 1 semana
        access_denied_handler: accessdenied_handler
      #primero deben de ir los usuarios anonimos si no se entra en loop redirect
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_U }
    - { path: ^/admin, roles: ROLE_A }

providers:
    chain_provider:
        providers: [in_memory, user_db]
    in_memory:
        users:
            foo: { password: test, roles: 'ROLE_A' }
            foo1: { password: test1, roles: 'ROLE_U' }
    user_db:
        entity: { class: mio\mioBundle\Entity\Empleado, property: username }

role_hierarchy:
    ROLE_A:       ROLE_U

encoders:
    mio\mioBundle\Entity\Empleado: { algorithm: sha1 }
    Symfony\Component\Security\Core\User\User: plaintext 
```

删除线

```
- { path: ^/, roles: ROLE_U } 
```

好好工作。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T15:55:52.307

尝试添加另一行：

```
access_control:
    ...
    - { path: ^/js/*, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    ... 
```

现在没有角色 ROLE_U 的用户被授权访问 JS ！

我认为您也需要为图像和 css 执行此操作！

# sql - 仅使用连接的 sql 查询

> ID：13090452
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:04:55.450
> 
> 标签：sql, oracle

列出与 MILLER 相同或大于 ALLEN 的`emp`s 。`job``job``sal``sal`

以上问题是oracle sql的常见问题。使用子查询的答案已经解决。但是只使用 join 来解决这个问题会是什么？

```
select *  from emp  where job =  (select  job from emp where ename =
'MILLER' ) or  sal>(select sal from emp where ename = 'ALLEN'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:59:39.220

```
Select * from emp e1 join emp e2
where (e2.Ename = 'Miller' and e1.job = e2.job) 
or (e2.Ename = 'Allen' and e1.sal > e2.sal) 
```

# objective-c - iCloud，在“addPersistentStoreWithType”上崩溃

> ID：13090453
> 
> 赞同：0
> 
> 时间：2012-10-26T16:04:56.977
> 
> 标签：objective-c, core-data, ios6, icloud

尝试在我的应用程序中从*WWDC 2012的**SharedCoreData*示例代码中实现 iCloud 同步，

 *`addPersistentStoreWithType`并在方法上崩溃。

```
- (BOOL)loadiCloudStore:(NSError * __autoreleasing *)error {
    BOOL success = YES;
    NSError *localError = nil;

    NSFileManager *fm = [[NSFileManager alloc] init];
    _ubiquityURL = [fm URLForUbiquityContainerIdentifier:nil];

    NSURL *iCloudStoreURL = [self iCloudStoreURL];
    NSURL *iCloudDataURL = [self.ubiquityURL URLByAppendingPathComponent:@"iCloudData"];
    NSDictionary *options = @{ NSPersistentStoreUbiquitousContentNameKey : @"iCloudStore",
                                NSPersistentStoreUbiquitousContentURLKey : iCloudDataURL };
    _iCloudStore = [self.psc addPersistentStoreWithType:NSSQLiteStoreType
                                          configuration:nil
                                                    URL:iCloudStoreURL
                                                options:options
                                                  error:&localError];
    success = (_iCloudStore != nil);
    if (success) {
        //set up the file presenter
        _presentedItemURL = iCloudDataURL;
        [NSFileCoordinator addFilePresenter:self];
    } else {
        if (localError  && (error != NULL)) {
            *error = localError;
        }
    }

    return success;
} 
```

**更新：**崩溃日志：

```
Last Exception Backtrace:
0   CoreFoundation                  0x369f029e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3b40697a objc_exception_throw + 26
2   CoreData                        0x37e0a35c -[NSPersistentStoreCoordinator initWithManagedObjectModel:] + 368
3   Dossier                         0x001541aa 0xd9000 + 504234
4   Dossier                         0x000db420 0xd9000 + 9248
5   UIKit                           0x353fcad4 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
6   UIKit                           0x353fc65e -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1186
7   UIKit                           0x353f4846 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
8   UIKit                           0x3539cc3c -[UIApplication handleEvent:withNewEvent:] + 1000
9   UIKit                           0x3539c6d0 -[UIApplication sendEvent:] + 68
10  UIKit                           0x3539c11e _UIApplicationHandleEvent + 6150
11  GraphicsServices                0x3686559e _PurpleEventCallback + 586
12  CoreFoundation                  0x369c567e __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 10
13  CoreFoundation                  0x369c4ee4 __CFRunLoopDoSources0 + 208
14  CoreFoundation                  0x369c3cb2 __CFRunLoopRun + 642
15  CoreFoundation                  0x36936eb8 CFRunLoopRunSpecific + 352
16  CoreFoundation                  0x36936d44 CFRunLoopRunInMode + 100
17  UIKit                           0x353f3480 -[UIApplication _run] + 664
18  UIKit                           0x353f02fc UIApplicationMain + 1116
19  Dossier                         0x000db05c 0xd9000 + 8284
20  libdyld.dylib                   0x36a65b1c start + 0 
```*

# ios - 点击时为 UIButton 着色？

> ID：13090459
> 
> 赞同：0
> 
> 时间：2012-10-26T16:05:06.700
> 
> 标签：ios, cocoa-touch

有没有办法使用图像在 UIButton 上设置色调颜色，所以当手指在按钮上时，色调会覆盖图像？在点击按钮时有这样的高亮效果会很好，而不是使按钮图像的数量增加一倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:09:55.763

您可以使用 setHighlightImage:forState 或 setImage:forState: 使用状态 UIControlStateHighlighted

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T00:19:35.643

如果您实际上只是想减少项目中的资产数量，您可能会创建一个子类`UIButton`并覆盖`setImage:forState:`

```
- (void)setImage:(UIImage *)image forState:(UIControlState)state;
{
  [super setImage:image forState:state];

  UIImage *processImage = // Process the image to add tint
  [self setHighlightImage:processedImage forState:state];
} 
```

# c++ - 相交三角形的面积

> ID：13090460
> 
> 赞同：-5
> 
> 时间：2012-10-26T16:05:15.840
> 
> 标签：c++, c, algorithm, math

我想解决一个问题，但这有点难，我需要一些帮助。问题是：

> 我们有 2 个三角形，我们有顶点的坐标，例如 (x1, y1), (x2, y2), (x3, y3), (a1, b1), (a2, b2), (a3, b3)。我们想测量两个三角形相互重叠的面积。它可以是 0 或更多。

例如，如果我们有第一个三角形 (0,0) (3,0) (0,3) 和第二个 (0,0) (3,3) (3,0)，则公共面积将为 2.25。

我应该如何编写一个程序来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:10:29.017

相交三角形（以及一般的**凸多边形**）的问题比看起来要困难得多，特别是如果你想在线性时间内解决它**涉及****的**边数。

您可以考虑[这个页面](http://www.iro.umontreal.ca/~plante/compGeom/algorithm.html)来了解一般凸多边形的工作算法（该算法基于[**旋转卡尺**](http://en.wikipedia.org/wiki/Rotating_calipers)。确实，背后有一些抽象几何，特别是[几何 Hanh-Banach 定理](http://www.cse.chalmers.se/~coquand/hahn1.pdf)）。

考虑一下，一旦有了凸面的交叉多边形，评估该[区域](http://www.mathwords.com/a/area_convex_polygon.htm)就变得微不足道了。

* * *

因此，您有两个选择：

1.  *您将问题保持抽象*（不知何故，您将三角形视为凸多边形，仅此而已），并且可以通过[GPC 库](http://www.cs.man.ac.uk/~toby/gpc/)（用 C 编写）或例如通过[boost 来实现 C/C++ 中的快速解决方案： : 几何](http://www.boost.org/doc/libs/1_51_0/libs/geometry/doc/html/index.html)。

2.  *您只专注于三角形*：在这种情况下，我的建议是考虑这篇**[精彩的论文](http://www.mat.unisi.it/personalpages/sampoli/lavori/rapporto465/triangle.pdf)** ，它在拓扑上详细说明了所涉及的相交的可能方式，并给出了解决方案的有效实现。

我还有一件事要说：当您考虑*玩具三角形*的问题（即低偏度，尺寸远大于机器精度）时，您仍然可以考虑实现自己的算法并使用它。但是，当您必须每秒与数百万个可能*病态的三角形相交时，您最好依靠一个良好且快速的库。*

# c# - 有没有现成的带分页/过滤/排序的数据表视图库？

> ID：13090465
> 
> 赞同：3
> 
> 时间：2012-10-26T16:05:32.140
> 
> 标签：c#, asp.net-mvc, razor, mvccontrib

我正在 MVC 中构建一个系统，该系统要显示大量异构数据：客户、日志等。

我发现我以不同的形式一遍又一遍地构建相同的视图：

*   标题行（带有排序链接）
*   过滤行（下拉菜单、日期选择器等）
*   数据
*   分页行

自然地，我的抽象主义者在喊“建立一个通用的数据视图工厂！”，它也应该如此。然而，在我消失在自己抽象的底部之前，这项工作是否已经在其他地方完成了？

我目前能找到的唯一选项是[MVCContrib.Grid](http://mvccontrib.codeplex.com/wikipage?title=Grid&referringTitle=Documentation)，它似乎不能处理过滤器的渲染（尽管它允许扩展渲染器）。这是唯一的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:23:07.617

是的，我可以推荐这个 jQuery 插件

[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:40:39.200

正如人们可能期望的那样，类似于您的问题已经完成......几年前。所以在这里：[ASP.NET MVC 的网格控件？](https://stackoverflow.com/questions/177275/grid-controls-for-asp-net-mvc)您可以找到多年来已更新的可用数据网格列表。我建议您一劳永逸地查看所有这些，以便在未来您可以选择更适合您需求的。没有更好的网格，但它们每个都有优点和缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T09:39:51.253

我的选择介于

*   datatables.net（已经提到）

*   jqGrid (http://www.trirand.net/demoaspnetmvc.aspx)

起初我发现数据表更容易使用，但最后我使用了 jqGrid，因为我发现它更强大。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T01:12:57.993

我已经成功使用了 KendoUI 和 jqGrid。如果您要寻找的只是一个网格，jqGrid 是一种轻量级且成本较低的解决方案。我喜欢 jqGrid 的一件事，除了它与淘汰赛的轻松集成之外，它能够编辑表格单元格中的数据以及创建“编辑视图”，其中数据在表单类型视图中编辑，并在编辑小部件旁边带有标签.

也就是说，听起来您可能需要的不仅仅是网格，如果是这样，您还应该考虑使用 Html 助手来生成组成部分（带过滤器的标题、数据行、分页等）。这将为您在页面上呈现不同部分的位置提供最大的灵活性。也许你想在页面的顶部和底部放置两次分页控件；也许您想将过滤器放入模态对话框中。简单地去的能力：

```
@Html.FilterControlsFor(Model.PhoneBookUsers) 
```

页面上的某个地方（或某个地方）并让助手处理所有细节是非常强大的juju。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T19:33:26.183

[Flexigrid](http://flexigrid.info/) - 不错的表格插件，但它只是 ui 表格，您应该为选择和过滤数据提供适当的服务器端处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T11:43:56.340

[KendoUI](http://demos.kendoui.com/web/grid/index.html)任何一天。有一个 ASP.NET 包装器，但它非常昂贵。但是 jQuery 库绝对是最好的。

# html - safari 浏览器上的 html5 视频播放器大小

> ID：13090466
> 
> 赞同：0
> 
> 时间：2012-10-26T16:05:37.273
> 
> 标签：html, safari, html5-video

我在带有 HTML5`video`播放器元素的 Safari 浏览器 (PC/MAC) 上遇到问题。

问题是播放的视频并不能反映视频`source`元素的真实视频，用`width`和`height`属性指定的大小也不能。

这是演示网址：

[http://actisku.videohosting.fr/test.html](http://actisku.videohosting.fr/test.html)

```
<video id="homepage_videoplayer" poster="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.png" loop="loop"  autoplay="autoplay" width="979" height="365">
     <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.mp4" type="video/mp4" />
     <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.ogv" type='video/ogg; codecs="theora, vorbis"' />
</video> 
```

`mp4`源文件为 979x365 。同样大小的播放器`video`元素也是如此。但它应该以相同的大小读取。

也许这是一个元数据问题，但我不知道如何编辑这个元数据。

编辑：

使用 JavaScript ，我可以看到视频`width`在 Safari 上是 649，在 Chrome 上是 979，很奇怪。所以我打算用它`-webkit-transform` `scaleX()`来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:40:45.233

您在线收到 javascript 错误：39

```
vid.css("video","scaleX(1.5)"); 
```

我认为您要做的是添加属性

```
scaleX="1.5" 
```

到`<video>`标签，是这样吗？尝试手动添加它，看看这是否是你要找的，所以你最终会得到这个：

```
<video id="homepage_videoplayer" scaleX="1.5" poster="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.png" loop="loop"  autoplay="autoplay" width="979" height="365">
    <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.mp4" type="video/mp4" />
    <source src="http://actisku.videohosting.fr/medias/videos/v_actisku_visualproject_sephora_61.ogv" type='video/ogg; codecs="theora, vorbis"' />    
</video> 
```

# android - 选择 Drawable 以编程方式显示在图像视图上

> ID：13090468
> 
> 赞同：0
> 
> 时间：2012-10-26T16:05:38.160
> 
> 标签：android, view, imageview

我已经说了 N 个我想包含在我的 android 项目资源中的图像，比如 image0 到 imageN-1，当我只在运行时知道时，如何设置图像视图以显示其中一个可绘制对象说 imagei？

类似的东西：

```
imageView.setImageDrawable(getResources().getDrawable("R.drawable.image"+i)); 
```

显然这行不通，但你知道我的意思......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:09:01.477

您可以`Resources.getIdentifier()`按照此博客中的[说明使用](http://steven.bitsetters.com/2007/11/27/accessing-android-resources-by-name-at-runtime/)

# c# - WebMatrix Helper 控制的表在密码更改日期字段中显示错误的时间

> ID：13090475
> 
> 赞同：2
> 
> 时间：2012-10-26T16:06:23.793
> 
> 标签：c#, database, date, passwords, webmatrix

每个人，

我有一个快速的问题。谁能告诉我为什么助手控制表“webpages_Membership”中的字段“PasswordChangeDate”（我很确定，使用 Web.Security Helper 自动填充）记录的日期/时间是 5 小时？我刚刚更改了密码并查看了该字段，发现虽然我在上午 10:50 更改了密码，但它显示为下午 3:50。我需要在 Web.Security 帮助程序中调整某个设置（可能是时区等）吗？我知道的一件事是，当我转到 WebMatrix 中的“站点”部分时，在“请求”选项卡中，它实际上显示了我的请求的正确时间戳。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:55:59.840

SimpleMembership Provider 使用 UTC DateTimes，因此您的时区可能是 UTC - 5（或美国东部的某个地方）。您可以实现自己的 Membership Provider 并覆盖所有将 DateTime 值插入成员数据库的方法，或者使用[TimeZoneInfo.ConvertTimeFromUtc](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.converttimefromutc.aspx)方法将存储的时间转换为首选时区之一。

如果显示用户注册或更改密码的当地时间对您很重要，您可以做的是询问他们注册时所在的时区。然后，您可以将 UTC 偏移量存储为他们的配置文件的一部分，并将其与 DateTime.AddHours 方法一起使用来计算他们时区的时间。

# google-app-engine - 压缩包和内存存储策略

> ID：13090476
> 
> 赞同：1
> 
> 时间：2012-10-26T16:06:24.097
> 
> 标签：google-app-engine, memory-management, python-2.7, multi-tenant

我有一个多租户应用程序，每个租户/客户端都有一个压缩包，其中包含每个租户/客户端的公共站点的模板和处理程序。现在我有不到 50 个租户，并且在第一次请求特定客户端域后将导入的应用程序保留在内存中是很好的。

这种方法效果很好，但是每次我进行更改和/或添加新客户端时，我都必须使用新客户端压缩包重新部署应用程序。

现在我正在努力使通过网络上传上传这些包并将它们存储到 blobstore 成为可能。

我现在担心的是：

*   从 blobstore 获取包当然比在文件系统中导入压缩包要慢。但这不是最大的问题。

*   如何加载/导入不在文件系统中且没有路径的模块？

*   如果每个客户包都在 1mb 左右，只要客户群低，这不是问题，但如果它增加到 1k 甚至更多怎么办？显然我没有足够的内存在内存中存储几 GB 的数据。处理这个问题的最佳方法是什么？

*   如果我使用实例内存将以前的租户包存储在内存中，如果有新上传的包，如何使内存中的数据无效？

我会很感激一些关于如何处理这种情况的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:46:15.010

我同意尼克的观点。租户特定的 zip 中应该没有 python 代码。为了解决内存问题，我将缓存数据存储中的大部分页面。要为他们提供服务，您不需要在您的实例中加载所有租户。您可能还想在保存时而不是在请求时查看预生成的 html 视图。

# android - 弹出消息，如 Dialog

> ID：13090478
> 
> 赞同：0
> 
> 时间：2012-10-26T16:06:28.397
> 
> 标签：android, android-layout, android-dialog

我实际上正在为 Android 编写一个应用程序，我需要一些帮助来做某事。我需要用这张图片做一种弹出消息：http: [//img716.imageshack.us/img716/9331/postitz.png](http://img716.imageshack.us/img716/9331/postitz.png)。此图像必须有 2 个 TextView，其中一个是标题，另一个是消息。

我尝试了一些选项，例如具有自己的布局、自己的样式的对话框，但图像填充了整个屏幕，而不是包装 TextViews 的内容。我也尝试过使用新的 Activity 并发生相同的情况，图像填满了整个屏幕。

我的实际布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:gravity="center_vertical"
        android:background="@android:color/white">
    <LinearLayout
        android:id="@+id/img_postit"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/postit"
        android:orientation="vertical">
        <TextView 
            android:id="@+id/note_titulo"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:padding="30dp"/>

        <TextView 
            android:id="@+id/note_descr"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:padding="30dp"/>
    </LinearLayout>
    </LinearLayout> 
```

但是我尝试了很多不同的组合，RelativeLayout、FrameLayout，但我找不到解决方案。

任何想法如何解决它？

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:10:24.460

创建您自己的类扩展对话框。并使用如下布局。我在我的一个应用程序中使用它，对话框窗口环绕在按钮周围：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:background="@drawable/background"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/ll2"
    android:layout_width="fill_parent"
    android:layout_height="70dp"
    android:layout_below="@+id/ll1"
    android:gravity="left"
    android:orientation="horizontal"
    android:paddingBottom="5dp" >

    <RadioButton
        android:id="@+id/start"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_toLeftOf="@+id/stop"
        android:background="@drawable/start_on"
        android:button="@android:color/transparent"
        android:checked="true" />

    <RadioButton
        android:id="@+id/stop"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_centerInParent="true"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:background="@drawable/stop_off"
        android:button="@android:color/transparent" />

    <RadioButton
        android:id="@+id/restart"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/stop"
        android:background="@drawable/restart_on"
        android:button="@android:color/transparent" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/lltext"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/detail_credit"
    android:layout_below="@+id/ll2"
    android:layout_marginBottom="15dp"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/startText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/stopText"
        android:text="@string/start_server_icon"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:textSize="12sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/stopText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginLeft="40dp"
        android:layout_marginRight="40dp"
        android:text="@string/stop_server_icon"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:textSize="12sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/restartText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/stopText"
        android:text="@string/restart_server_icon"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@android:color/white"
        android:textSize="12sp"
        android:textStyle="bold" />
</RelativeLayout>

<Button
    android:id="@+id/dialogButtonOK"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_below="@+id/lltext"
    android:layout_centerHorizontal="true"
    android:text="OK" />
 </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:41:07.610

你说你用作一个新的活动。你 `android:theme="@android:style/Theme.Dialog`在清单文件中使用了吗？

并确保图像稍微小一点，以便它适合充当弹出窗口。如果您使用对话框，问题究竟是什么？您没有弹出对话框吗？（我认为图像更大，因此它可能会填满整个屏幕）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T10:12:15.803

```
final Dialog dialog_my = new Dialog(FIRST.this,
                    android.R.style.Theme_Translucent_NoTitleBar_Fullscreen);
            dialog_my.setContentView(R.layout.about_us); //<PUT YOUR LAYOUT ID HERE>
            TextView date = (TextView) dialog_my.findViewById(R.id.date);

            TextView thought = (TextView) dialog_my.findViewById(R.id.thought);

            TextView ok = (TextView) dialog_my.findViewById(R.id.ok);
            TextView link = (TextView) dialog_my.findViewById(R.id.link);
            TextView contact = (TextView) dialog_my.findViewById(R.id.contact);
            WindowManager.LayoutParams lp = dialog_my.getWindow().getAttributes();
            lp.dimAmount = 0.0f;
            dialog_my.getWindow().setAttributes(lp);
            dialog_my.getWindow().addFlags(
                    WindowManager.LayoutParams.FLAG_DIM_BEHIND);
            dialog_my.show(); 
```

# python - Django 管理中的多对多：选择无

> ID：13090479
> 
> 赞同：3
> 
> 时间：2012-10-26T16:06:29.860
> 
> 标签：python, django, django-admin

有了`A = ManyToManyField(B, null=True, blank=True)`，当我进入 A 的管理页面时，似乎在单击 B 元素后我无法取消选择 ManyToMany 框中的每个条目。
即使我不点击任何条目，保存后也会选择一个相关的 B 元素（我猜是第一个 B 元素）。

但我想添加 A 元素而不必将它们与 B 中的任何一个相关联...

有什么办法可以让 Django 管理员不选择任何元素吗？（除了为这些情况创建一个虚拟 B 元素）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T16:10:53.107

这听起来像是浏览器问题而不是 Django 问题。

要取消选择多选中的元素，请在单击它时按**Ctrl**键 (linux / windows) 或**Command**键 (mac)。

# ruby-on-rails - .js.erb 文件可用于所有其他视图？

> ID：13090480
> 
> 赞同：0
> 
> 时间：2012-10-26T16:06:36.627
> 
> 标签：ruby-on-rails, ajax, error-handling

因此，在我的 rails 应用程序中，我在我的一个页面上显示了错误消息。这个过程是（所以每个人都明白）首先，在我的“编辑”中，`link_to`我`:remote => true`在它的末尾添加了它，因此它发送了一个 ajax 请求。`format.js`然后我在我的`respond_to do |format|`块中添加了该行。然后，我使用以下代码行创建了一个 edit.js.erb 文件，该文件`$('#error').html("<%= flash[:error] %>");` 基本上找到了当前页面中的错误 div 并将该 div 中的 html 替换为错误 flash 消息。这很酷吧？发生错误时不再烦人的页面刷新。

问题是，我想对我的所有编辑和销毁页面执行此操作，但是如何不为每个视图文件夹创建 edit.js.erb 和 destroy.js.erb 文件？看起来很简单，也许我只是因为筋疲力尽而错过了一个明显的答案，但我无法弄清楚......所以......帮助？？？？？？

编辑！

这是我的编辑控制器

```
def edit
user = User.find(session[:id])
@table = Table.find(params[:id])

if user.id != @table.created_by

  flash[:error] = "ERROR"
  respond_to do |format|
    format.js {render :template => 'shared/show_error'}
    format.html
  end
else
  flash[:error] = ""
  respond_to do |format|
    format.js {render :template => 'table/edit', :formats => :html}
    format.html
  end

end
end 
```

现在的问题是，它可以很好地显示错误，但是如果没有错误，它就不会呈现编辑页面...在服务器窗口中它显示它确实如此，但它实际上并没有显示在屏幕上...有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:09:04.743

我建议您然后制作一个通用的 JS.erb 文件，例如：

```
# app/views/shared/show_errors.js.erb
('#error').html("<%= flash[:error] %>"); 
```

然后在您的控制器操作中，或从另一个 JS.erb 文件中，输入：

```
render :template => "shared/show_errors" 
```

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:48:38.513

我实际上是偶然解决了自己的问题...我`{render :template => 'table/edit', :formats => :html}`从`else`块中删除了该行。

# c# - 如何让控制台应用程序无限期地每月（而不是更多）运行一次功能？

> ID：13090481
> 
> 赞同：-2
> 
> 时间：2012-10-26T16:06:37.193
> 
> 标签：c#, .net-4.0, console-application

编写一个C#应用程序来运行一些计划任务，我真正需要的是持续监控日期和时间，并在每个月的28号调用一次函数，然后回到耐心等待下一个28号一个月左右。

我猜它会以某种方式使用 System.Threading.Thread.Sleep()，但至于它应该运行的具体条件，以及如何防止它在相关日期运行多次，我不是当然...

非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:14:41.520

您可以设置 Windows 计划任务以在每月 28 日运行您的控制台应用程序。
由于您的应用程序在运行之间不会占用任何资源，因此它对服务器资源非常简单、容易和轻量。

如果 PC 出现故障，您还可以勾选选项：“错过预定启动后尽快运行任务”。

有大量选项供您自定义任务的运行方式，例如：

1.  仅在用户登录时运行。
2.  指定程序参数。
3.  仅当计算机使用交流电源时才启动任务。
4.  仅当以下网络连接可用时才启动任务。

并非所有选项都适用于所有版本的 Windows。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-10-26T16:14:12.083

您可以使用每秒运行并检查日期的循环，并在指定日期执行并等待下个月。您将使用 System.Threading.Thread.Sleep() 让它等待 1 秒。

您可以通过跟踪最后一个日期并通过添加 1 个月来计算下一个日期来等待下一个日期。

```
 DateTime? counter = null;

            while (1 = 1)
            {
                if (DateTime.Now.Day == 28 && (!counter.HasValue || counter.Value.Date < DateTime.Now.Date ))
                {
                    counter = DateTime.Now;

                    DoSomething();
                }

                Thread.Sleep(1000);
            }; 
```

# jakarta-ee - 如何正确使用 EAR 和 EJB 的 SNAPSHOTS 依赖项

> ID：13090487
> 
> 赞同：3
> 
> 时间：2012-10-26T16:06:56.303
> 
> 标签：jakarta-ee, maven, ejb, ear, manifest.mf

我正在尝试在 EAR 中构建 EJB。我的 EJB 依赖于 SNAPSHOTS。因此，当我构建 EAR 时，我的结构如下所示：

```
my-ear-1.0.0-SNAPSHOT.ear
 + META-INF  
  - application.xml
  - MANIFEST.MF
 - my-ejb-1.0.0-SNAPSHOT.jar
 - third-party-lib-1.0.0-SNAPSHOT.jar 
```

但是，当使用 maven-ejb-plugin 生成其 MANIFEST.MF 时：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-ejb-plugin</artifactId>
  <version>2.3</version>
  <configuration>
    <archive>
      <manifest>
        <addClasspath>true</addClasspath>
      </manifest>
    </archive>
  </configuration>
</plugin> 
```

我遇到的问题是 MANIFEST.MF 将 SNAPSHOT 列为它在 Nexus 中的显示方式，而不是 maven-ear-plugin 在构建耳朵时对其命名的方式。

```
Manifest-Version: 1.0
Build-Jdk: 1.6.0_25
Class-Path: third-party-lib-1.0.0-20121026.140152-21.jar 
```

所以我当然会得到*ClassNotFoundException*，因为 EJB 类路径正在寻找一个不存在的 jar 文件。

基本上我需要知道：

1.  在没有 -SNAPSHOT 格式的情况下，如何让 maven-ear-plugin 将罐子拉入耳朵？
2.  如何让 maven-ejb-plugin 在 MANIFEST.MF 中使用 -SNAPSHOT 格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T16:53:27.433

[通过查看Maven Archiver -Handling Snapshots](http://maven.apache.org/shared/maven-archiver/examples/classpath.html#aSnapshot)上的 maven 归档器文档，我找到了解决问题的方法。

我只需要配置我的 maven-ejb-plugin 以便它不使用“唯一版本”：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>                           
                        <useUniqueVersions>false</useUniqueVersions>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

下次我猜 RTFM 更近了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T08:11:03.110

使用 Maven 版本 3.6.2。

下面的**maven-ear-plugin**配置解决了我的问题。

```
<plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-ear-plugin</artifactId>
      <version>3.0.1</version>
      <configuration>
        <outputFileNameMapping>@{artifactId}@-@{baseVersion}@@{dashClassifier?}@.@{extension}@</outputFileNameMapping>
        <generateApplicationXml>true</generateApplicationXml>
        <version>7</version>
      </configuration>
    </plugin> 
```

如果需要，您还可以更改`outputFileNameMapping`但用于`baseVersion`解决此时间戳问题的格式。

# python - 扭曲的循环调用不调用 errback

> ID：13090492
> 
> 赞同：3
> 
> 时间：2012-10-26T16:07:23.160
> 
> 标签：python, asynchronous, twisted

我一直在编写一些 Twisted 服务器，并创建了一个定期运行的 WatchDog 计时器。它的默认行为是检查它是否在其时间表的某个时间增量内被调用，这有助于报告程序是否被过度阻塞。它还为 WatchDog 的用户定义回调函数提供了一种方法，可用于检查系统其他部分的健康状况。WatchDog 计时器是使用 twisted.internet.task.LoopingCall 实现的。我担心用户定义的函数是否会创建异常，WatchDog 计时器将停止被调用。我在代码中有异常处理，但是如果 WatchDog 计时器仍然应该崩溃，我想有办法重新启动它。但是，我不明白如何使用 LoopingCall().start() 方法返回的延迟。这里'

```
import sys
from twisted.internet import reactor, defer, task
from twisted.python import log

def periodic_task():
    log.msg("periodic task running")
    x = 10 / 0

def periodic_task_crashed():
    log.msg("periodic_task broken")

log.startLogging(sys.stdout)

my_task = task.LoopingCall(periodic_task)
d = my_task.start(1)
d.addErrback(periodic_task_crashed)
reactor.run() 
```

当我运行此代码时，我从 period_task() 函数中收到一条“正在运行的定期任务”消息，仅此而已。my_task.start(1) 返回的 deferred 永远不会被调用 errback，通过我阅读文档，这是应该发生的。

有人可以帮助我并指出我做错了什么吗？

提前致谢！道格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:06:33.490

的签名`periodic_task_crashed`是错误的。它是 a 上的错误回调`Deferred`，因此将使用参数调用它，`Failure`表示得到的错误结果`Deferred`。由于它被定义为不带参数，因此调用它会产生 a `TypeError`，这将成为`Deferred`.

像这样重新定义它：

```
def periodic_task_crashed(reason):
    log.err(reason, "periodic_task broken") 
```

# foursquare - Foursquare API 速率限制重置

> ID：13090494
> 
> 赞同：0
> 
> 时间：2012-10-26T16:07:29.553
> 
> 标签：foursquare

如果我在下午 12:00 进行 Foursquare API（场地详细信息 API）调用，并在下午 12:15 之前消耗所有小时费率限制，那么 Foursquare 什么时候会再次刷新费率限制，以便我可以在下一次调用称呼 ？

换句话说，如果我的 API 调用限制在下午 12:00 是 500，那么它会在下午 1:00 再次重置。

FourSquare 如何维护 API 的每小时限制。窗口是固定的，即 12.00 pm 到 1.00 PM 然后 1.00 PM 到 2.00 pm 左右还是保持第一次 API 调用的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T22:21:04.430

速率限制窗口正在滚动（即它不使用固定的每小时存储桶）

# java - 在 Eclipse 中进入 Java EE 代码

> ID：13090495
> 
> 赞同：7
> 
> 时间：2012-10-26T16:07:32.877
> 
> 标签：java, eclipse, debugging, jakarta-ee

在 Eclipse 和 Java EE 代码中调试会话很痛苦，我希望有人有比我更好的方法。

这是 2 个 EJB 无状态 bean 方法（使用 TomEE 1.0）之间的典型调用堆栈：

```
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
NativeMethodAccessorImpl.invoke(Object, Object[]) line: 39  
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  
Method.invoke(Object, Object...) line: 597  
ReflectionInvocationContext$BeanInvocation(ReflectionInvocationContext$Invocation).invoke() line: 181   
ReflectionInvocationContext.proceed() line: 163 
StatsInterceptor.record(InvocationContext, Method) line: 176    
StatsInterceptor.invoke(InvocationContext) line: 95 
GeneratedMethodAccessor35.invoke(Object, Object[]) line: not available  
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  
Method.invoke(Object, Object...) line: 597  
ReflectionInvocationContext$InterceptorInvocation(ReflectionInvocationContext$Invocation).invoke() line: 181    
ReflectionInvocationContext.proceed() line: 163 
CdiInterceptor.invoke(InvocationContext) line: 129  
CdiInterceptor.access$000(CdiInterceptor, InvocationContext) line: 45   
CdiInterceptor$1.call() line: 66    
CdiInterceptor.aroundInvoke(InvocationContext) line: 72 
GeneratedMethodAccessor34.invoke(Object, Object[]) line: not available  
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: 25  
Method.invoke(Object, Object...) line: 597  
ReflectionInvocationContext$InterceptorInvocation(ReflectionInvocationContext$Invocation).invoke() line: 181    
ReflectionInvocationContext.proceed() line: 163 
InterceptorStack.invoke(Object...) line: 138    
StatelessContainer._invoke(Method, Method, Object[], Instance, ThreadContext, InterfaceType) line: 226  
StatelessContainer.invoke(Object, InterfaceType, Class, Method, Object[], Object) line: 178 
StatelessEjbObjectHandler(EjbObjectProxyHandler).synchronizedBusinessMethod(Class<?>, Method, Object[], Object) line: 260   
StatelessEjbObjectHandler(EjbObjectProxyHandler).businessMethod(Class<?>, Method, Object[], Object) line: 240   
StatelessEjbObjectHandler(EjbObjectProxyHandler)._invoke(Object, Class, Method, Object[]) line: 91  
StatelessEjbObjectHandler(BaseEjbProxyHandler).invoke(Object, Method, Object[]) line: 284   
MyService$LocalBeanProxy.removeScheduledEvent(ScheduledEvent) line: not available 
```

那是我不想检查的 30 行 Java EE 管道方法调用！

我在进入方法时跳过所有这些的唯一可靠方法是在下一个方法调用中放置一个断点，然后点击“Step Over”而不是“Step Into”。然而，与简单的“Step Into”相比，像这样一直设置断点是一个很大的麻烦。当我需要退出我正在检查的方法时，我必须重复同样的事情。

我知道 Eclipse 中的步骤过滤器并尝试使用这些过滤器，但是一些自动生成的代理类被注入到我自己的包中，所以我不能轻易使用它。

有人对此有很好的解决方案吗？

### 更新

使用以下步骤过滤器暂时跳过所有不需要的步骤：

```
*$$*  // for CGLib proxies
*$LocalBeanProxy  // for other EJB proxies
java.*
net.sf.*
sun.* 
```

### 编辑 2

这是 MyService 类的一个示例：

```
public void removeScheduledEvent(ScheduledEvent event) {
    // ...
    otherEJB.doStuff(event);
} 
```

由于 otherEJB 是在无状态容器中运行的 EJB bean，因此上面的 30 个调用是通过代理自动插入的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:49:31.003

有关 Eclipse 步骤过滤器的一些信息：

[Eclipse 调试/步入跳过 AOP 接线的方法](https://stackoverflow.com/questions/1575129/eclipse-debugging-step-into-method-skipping-aop-wiring)

[如何在调试视图中过滤动态生成的类？](https://stackoverflow.com/questions/8066155/how-to-filter-dynamically-generated-classes-in-debug-view)

我在 TomEE 中使用的实际步骤过滤器：

```
*$LocalBeanProxy
*$CGLibInterceptor
net.sf.*
org.apache.geronimo.*
org.apache.naming.*
org.apache.openejb.*
org.apache.tomee.*
org.apache.webbeans.* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:57:04.803

调试时，只需按住`Ctrl``Alt`，再次将鼠标悬停在要停止的方法名称上，直到变成超链接，然后单击方法名称。该功能称为[Step into Selection](http://blog.deepakazad.com/2012/07/eclipse-tip-stepping-into-selection-and.html)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T16:40:41.593

代码+测试（只是运行，而不是设置断点）增量。异常堆栈在 EE 中通常是无用的。

# java - 确定 XML 实例在验证期间失败的 XSD

> ID：13090500
> 
> 赞同：0
> 
> 时间：2012-10-26T16:07:57.317
> 
> 标签：java, validation, xsd

我正在针对多个 XSD 模式验证 xml 实例。如果验证失败，我想确定 xml 实例失败的架构。`SAXParseException`不包含足够的信息来确定这一点。

```
SchemaFactory factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
Source[] sources = getXsdSources();
Schema schema = factory.newSchema(sources);
Validator validator = schema.newValidator();

try {
  validator.validate(input);
} catch (SAXParseException e) {
  // Error handling.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:38:00.013

Xerces J 提供对所有（或可能只是*几乎*所有？）后模式验证信息集 (PSVI) 的访问，其中包括有关验证元素或属性的类型以及任何无效性质的信息。有关详细信息，请参阅[http://xerces.apache.org/xerces2-j/faq-xs.html#faq-8](http://xerces.apache.org/xerces2-j/faq-xs.html#faq-8)。

如果您使用的验证器是 Xerces J，那么您需要的信息是可用的（可能在您正在处理的 SAXParseException 包装的异常中？）；如果您正在使用另一个验证器，您可以进一步探索它的 API，也可以使用 Xerces J。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:19:45.670

@Joe，以下链接可能会对您有所帮助。您可以在之前的 Stackoverflow 中找到相同的问题。 [针对多个模式定义验证 XML 文件](https://stackoverflow.com/questions/1094893/validate-an-xml-file-against-multiple-schema-definitions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:23:36.973

您将需要单独验证每个模式，而不是将它们全部加载到“模式”中。然后它是一个简单的迭代“源”列表的简单问题，将“验证器”设置为每个，这样您就可以跟踪在失败时加载了哪些。

这未经测试，但应该是正确的：

```
SchemaFactory factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
    Source[] sources = getXsdSources();
    foreach( Source s : sources){
    Schema schema = factory.newSchema(s);
    Validator validator = schema.newValidator();
    try {
      validator.validate(input);
    } catch (SAXParseException e) {
      // Error handling.
      System.out.println("failed on " + s.getSystemID)
    }
} 
```

# python - 渲染默认图像，Django

> ID：13090505
> 
> 赞同：2
> 
> 时间：2012-10-26T16:08:10.360
> 
> 标签：python, django, django-models

我在我的 models.py 中定义了一个带有默认图像的 ImageField。每次我创建一个新用户时，我都可以在管理员中看到默认图像与我想要的用户相关联。

问题是，当我尝试在我的模板中渲染它时，类似于：

```
{{user.userprofile.profilpic.url}} 
```

这没用。不显示图像。

但是，如果我进入我的管理员并手动更改它，即使使用完全相同的图像，它也可以工作。当我创建用户时，看起来图像没有保存到数据库中。

这是我的models.py：

```
 class UserProfile(FacebookProfileModel):
       user = models.OneToOneField(User)
       profilpic = models.ImageField(upload_to="profilpics/", default="/my/picture.jpeg") 
```

我想知道如何解决这个问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:12:41.970

您可以使用[默认的模板过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#default)：

```
{% with default_image=STATIC_URL|add:"default_image.jpg" %}
     {{ user.userprofile.profilpic.url|default:default_image }}
{% endwith %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:15:16.403

您可以向模型添加方法：

```
class UserProfile(FacebookProfileModel):
    ... 
    profilepic = ...

    def profilepic_or_default(self, default_path="/images/..."):
        if self.profilepic:
            return self.profilepic
        return default_path 
```

并在你的模板中使用它：

```
{{ myuser.profilepic_or_default }} 
```

# wso2 - 关于在 ESB 4.5.0 中使用动态序列的问题

> ID：13090508
> 
> 赞同：0
> 
> 时间：2012-10-26T16:08:18.253
> 
> 标签：wso2, wso2esb, wso2bam

在我使用带有 WSO2 产品的 BAM 2.0.1 在 ESB 4.5.0 中监视我的代理服务的场景中，我如何定义此代理服务中使用的动态端点和序列具有它们的统计功能？所以我可以在 BAM 中看到他们的统计数据。

我可以在突触配置中定义序列中启用序列统计，但我不能在链接场景中使用它们，我可以在链接场景中使用动态序列但我不能启用它们的统计信息。

这是因为在 Send Mediator 中，我只能指定注册表中存在的动态端点或序列，而不是突触配置中的。

我可以做些什么来使我的场景工作？

在与实现服务链的代理服务相同的场景中，当我使用 SOAPUI 使用服务时，我可以看到正确的响应，但在 BAM 2.0.1 中始终显示为失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:10:17.967

您可以通过以下方式启用动态端点和动态序列的统计信息： 1\. 转到注册表资源，例如：- /_system/config/Hello 2\. 内容 -> 编辑为文本 3\. 添加统计信息=“启用”到地址元素 ![在此处输入图像描述](../Images/c51031974e88339e4298a07d989fa714.png)

然后，如果您使用了该端点，统计信息将被发送到 BAM，如果安装了中介统计信息工具箱，您可以看到这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T11:03:22.293

我在 WSO2 ESB 中对 Chaining 服务进行了测试，并通过 WSO2 BAM 2.0.1 对其进行了监控。它似乎工作正常，没有遇到任何统计不匹配。统计信息与 esb 调用相匹配。

ESB 统计： ![在此处输入图像描述](../Images/08a328a677ec164d5675c910638f7ba4.png)

BAM 调解统计： ![在此处输入图像描述](../Images/95a3b884a2e0610440eebe749cec5c00.png)

# php - 需要从 MYSQL FETCH ARRAY 中求和？

> ID：13090510
> 
> 赞同：1
> 
> 时间：2012-10-26T16:08:23.473
> 
> 标签：php

我正在尝试从 MYSQL_FETCH_ARRAY 中添加总计，但由于我使用 JOINS 来获取乘法定价，因此我无法在 SELECT 语句中使用 SUM。

我的代码如下以及我想要完成的截图。

```
 $qt2 = mysql_query("SELECT
   customer_specs.type, 
   customer_specs.stone, 
   customer_specs.sf,
   customer_specs.bs_ht,
   customer_specs.edge_1_lf,
   customer_specs.tearout_1_price, 
   customer_specs.tearout_1_sf, 
   customer_specs.cooktop_cutout_qty, 
   customer_specs.cooktop_cutout_price, 
   customer_specs.elect_outlet_qty, 
   customer_specs.elect_outlet_price, 
   customer_specs.sink_1_cutout, 
   customer_specs.sink_2_cutout,  
   stones.price AS stprice, 
   edging.price AS edprice, 
   s1.name AS s1name, 
   s2.name AS s2name, 
   s1.price AS s1price, 
   s2.price AS s2price  

   FROM customer_specs 
    INNER JOIN items 
    ON customer_specs.type=items.id
    INNER JOIN stones 
    ON customer_specs.stone=stones.id
    INNER JOIN edging 
    ON customer_specs.edge_1=edging.id
    INNER JOIN sinks AS s1 
    ON customer_specs.sink_1=s1.id
    INNER JOIN sinks AS s2 
    ON customer_specs.sink_2=s2.id

    WHERE quote = '$qte' AND c_id='$cid'");         
    while($qts2 = mysql_fetch_array( $qt2 )) 
    { 
    $edgep = $qts2['edprice'] * $qts2['edge_1_lf'];
    $stonep = $qts2['stprice'] * $qts2['sf'];
    $tearp = $qts2['tearout_1_sf'] * $qts2['tearout_1_price'];
    $cookp = $qts2['cooktop_cutout_price'] * $qts2['cooktop_cutout_qty'];
    $elecp = $qts2['elect_outlet_price'] * $qts2['elect_outlet_qty'];
    $sink1cp = $qts2['sink_1_cutout'];
    $sink2cp = $qts2['sink_2_cutout'];
    $sink1p = $qts2['s1price'];
    $sink2p = $qts2['s2price'];

    $total = $edgep + $stonep + $tearp + $cookp + $elecp + $sink1cp + $sink2cp+$sink1p + $sink2p;
    $money=$total;
    $formatted = number_format($money,2);
    Print "<td>$".$formatted."</td>"; 
```

截图可见：[http ://www.quarrygranite.com/ss.jpg](http://www.quarrygranite.com/ss.jpg)

提前感谢您的任何帮助。

# ios - 本机 Web 中的 iOS 键盘

> ID：13090511
> 
> 赞同：3
> 
> 时间：2012-10-26T16:08:36.880
> 
> 标签：ios, html, web, keyboard, native

我正在使用 HTML5、CSS、jQuerymobile + Phonegap 创建一个应用程序。

我想删除具有默认值的键盘顶部 - 上一个/下一个自动填充，完成

示例：http: [//i.msdn.microsoft.com/dynimg/IC587100.png](http://i.msdn.microsoft.com/dynimg/IC587100.png)

我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:16:57.790

可以在phonegap中做一个插件，`UITextField`在指定位置创建native。

# mongodb - mongodb 更改 $group 输出格式

> ID：13090513
> 
> 赞同：2
> 
> 时间：2012-10-26T16:08:50.027
> 
> 标签：mongodb, nosql

我有以下文档结构

```
{
  "timestamp" : 13512493603565120,<br>
  "value" : 1,<br>
  "y" : 42,<br>
  "M" : 513,<br>
  "w" : 2234,<br>
  "d" : 15639,<br>
  "S" : 46918,<br>
  "h" : 375347,<br>
  "m" : 22520822,<br>
  "s" : 1351249360,<br>
  "_id" : ObjectId("508aa61100b5457c04000001"),<br>
  "__v" : 0<br>
} 
```

我有一个如下的 mongodb 聚合来总结按字段 y 分组的值：

`aggregate({ $group : {_id : "$y", value:{$sum:4}} })`

这会给我

`[ { "_id": 42, "value": 16 } ]`

我现在想要的是格式化这个输出，使它看起来像这样：

`[ [13512493603565100, 2], [13512493605167900, 1] ]`

IE：

`[ [<timestamp>,<sum of value grouped by field y>], [<timestamp>,<sum of value grouped by field y>] ]`

我查看了 $project 但我仍然无法弄清楚如何使用它来获得所需的输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:29:25.477

目前显然不可能（使用 mapreduce 或聚合）。希望这将很快添加。

# xml - WSO2 4.5.0 "&" 字符变成 "&"

> ID：13090514
> 
> 赞同：1
> 
> 时间：2012-10-26T16:08:59.853
> 
> 标签：xml, wso2, wso2esb

我正在阅读**WSO2 4.5.0**中的**.txt**

 **```
<parameter name="transport.vfs.ContentType">text/plain; charset=windows-1252</parameter> 
```

包含“&”字符。

在我将消息转换为 XML 后，`&`字符变成了`&amp;`，我怎样才能通过文件并将所有现有的替换`&amp;`回`&`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:20:10.877

使用您首选的 XML 库打开 XML 文件。

使用库的 API 访问文本节点的属性值或文本值（取决于数据出现的位置）。

在 XML 文件中更改`&amp;`为`&`将使 XML 无效并导致解析拒绝它。（因为`&amp;`这就是您`&`在 XML 中表达的方式）。**

# core-data - 核心数据：“存储在外部记录文件中”与“允许外部存储”

> ID：13090515
> 
> 赞同：18
> 
> 时间：2012-10-26T16:09:00.453
> 
> 标签：core-data

我实际上有几个与 iOS 上的 Core Data 实体属性设置相关的问题：

1.  “存储在外部记录文件中”是否仅用于 Spotlight 集成？
2.  “存储在外部记录文件中”是否仅适用于 Mac OS？
3.  在 iOS 模拟器上，“外部记录文件”究竟存储在哪里？

不要将这些问题与二进制数据属性设置“允许外部存储”相混淆。我知道该设置会将> 1MB的数据放在商店之外。

1.  在 iOS 模拟器上，“允许外部存储”存储在哪里？

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T23:15:33.500

这在[Core Data Spotlight 集成编程指南的](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/SpotlightCoreData/Articles/recordLevel.html)**配置模型**部分中有详细描述：

> 要启用 Spotlight 索引，您需要指定应该索引哪些实体的哪些属性，以及哪些属性（如果有）应该添加到外部记录中。
> 
> 在配置检查器中，对于要编制索引的每个属性，选择：
> 
> Spotlight 中的索引（可选）存储在外部记录文件中 如果实体的至少一个属性设置了“Spotlight 中的索引”标志，那么每当对该实体实例的更改提交到持久存储时，相应的外部记录文件已更新（至少上次修改日期已更改）。这意味着 Spotlight 导入器将运行，因此 Spotlight 索引将使用新数据进行更新。
> 
> 如果您只选择“Spotlight 中的索引”，Core Data 只会为相应的记录创建一个长度为零的文件。如果您还选择“存储在外部记录中”，则该属性将添加到外部记录的内容中。字符串、日期、数字等简单类型直接导出；关系存储为 UUID。

AFAICT：

1.  是的
2.  是的
3.  真的不适用

# java - 用任何符号分割字符串

> ID：13090519
> 
> 赞同：1
> 
> 时间：2012-10-26T16:09:03.353
> 
> 标签：java, regex, symbols, string-split

`String.split()`为了按任何**符号**拆分字符串，我应该传递什么正则表达式？

现在，任何**符号**都是指以下任何一种：

```
`~`, `!`, `@`, `#`, ... 
```

基本上任何非字母和非数字的可打印字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:11:55.190

你应该使用一个非单词，即`\W`

`\W`是相反的`\w`

`\W`类似于`[^a-zA-Z0-9_]`，因此将匹配任何非单词字符，除了`_`

**或者**

你可以简单地使用`[^a-zA-Z0-9]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:12:54.840

你可以尝试使用这个： -

```
str.split("[^a-zA-Z0-9]"); 
```

这将不包括`underscore`.

`\W`相当于： -`"[a-zA-Z0-9_]"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:12:38.990

您可以具体喜欢`Spring.split("[~!@$]")`或列出您不想拆分的值`Spring.split("[^\\w]")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T16:14:31.903

您可能想要使用`\W`或`^\w`。您可以在此处找到更多详细信息：正则[**表达式：字符类**](http://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html)

```
 String str = "a@v$d!e";
    String[] splitted = str.split("\\W");
    System.out.println(splitted.length); //<--print 4 
```

或者

```
 String str = "a@v$d!e";
    String[] splitted = str.split("[^\\w]");
    System.out.println(splitted.length); //<--print 4 
```

# objective-c - 从运行中取消完成处理程序块

> ID：13090522
> 
> 赞同：1
> 
> 时间：2012-10-26T16:09:10.190
> 
> 标签：objective-c, objective-c-blocks, nsoperation

我正在使用一个在后台执行一些工作然后调用完成处理程序的库。一切都很标准。

```
[[LastFm sharedInstance] getInfoForArtist:@"Pink Floyd" successHandler:^(NSDictionary *result) {
    // Do stuff...
} failureHandler:nil]; 
```

我实际上在 tableview 中使用它：在每个单元格（子类）中，我获取有关艺术家的信息并显示它。这也是问题所在：当单元格被移出屏幕并为另一个艺术家重用时，前一个艺术家的成功处理程序仍然可以执行，导致标签和图像快速连续多次更改。

我的想法是创建一个 NSOperationQueue，在其中添加 getInfoForArtist 调用，并确保可以取消它：

```
NSBlockOperation *operation = [[NSBlockOperation alloc] init];
__weak NSBlockOperation *weakOperation = operation;

[operation addExecutionBlock:^{
    [[LastFm sharedInstance] getInfoForArtist:mediaItem.artist successHandler:^(NSDictionary *result) {
        if (weakOperation.isCancelled) {
            return;
        }
        // Do stuff...
    } failureHandler:nil];
}];

[self.queue addOperation:operation]; 
```

问题是`weakOperation`在successHandler 中总是为null。如果我将其更改`__block`为`__weak`,`weakOperation`是正确的实例，但其`isCancelled`状态始终为`NO`.

`[self.queue cancelAllOperations];`当单元格移出屏幕时，我在正确的时间打电话。

所以我的问题是，如何防止successHandler 在单元格被另一位艺术家重用后运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:52:24.783

问题是您正在调用异步 API。操作的生命周期是对 的调用`getInfoForArtist:successHandler:`，它可能会立即返回。到异步回调执行的时候，操作已经被释放了，这就是为什么在回调块中引用为 nil 的原因。

当successHandler被执行时，取消操作已经没有意义了——你不会节省网络资源，你还不如将查找结果保存在本地。UI 问题是您不应该直接引用单元格（或其子视图，如果您重用它们）。您可以考虑将结果存储在本地`NSDictionary`键入`NSIndexPath`的行或艺术家 ID 中。然后，在您的 中`cellForRowAtIndexPath:`，首先检查该字典，然后再进行 LastFM 调用。在 successHandler 回调中，您可以遍历 tableView`visibleCells`并尝试从字典中加载数据。

# jquery - jQuery Nivo Slider 和 Prestashop 1.5 的问题

> ID：13090529
> 
> 赞同：0
> 
> 时间：2012-10-26T16:09:40.840
> 
> 标签：jquery, prestashop, nivo-slider

Prestashop 1.5 中的 jQuery 实现有一些问题。当我安装 NivoSlider 模块时，它一开始可以工作，但一旦我将它重新挂在其他地方，它就会全部损坏，并且 NivoSlider（以及产品滑块）停止工作。

谁能指出我正确的方向？

这是链接：[http ://daniel-klose.com/prestatest](http://daniel-klose.com/prestatest)

我也收到此错误：`Uncaught TypeError: Object [object Object] has no method 'nivoSlider' in line 195`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:16:32.610

确保页面上加载了 nivoSlider 库（例如 jquery.nivo.slider.pack.js）

# css - 在 CSS 中缩放图像

> ID：13090530
> 
> 赞同：0
> 
> 时间：2012-10-26T16:09:45.280
> 
> 标签：css, mobile

我是 CSS 新手，想知道如何缩放 iPhone WebApp 标题的背景图像。

```
 div#header {
        background: rgb(2,100,161) url(../images/header-logo.jpg) repeat-x top; 
        border-top: 1px solid rgb(205,213,223);
        border-bottom: 1px solid rgb(46,55,68);
        padding: 10px;
        margin: 0 0 0 -10px;
        min-height: 85px;
        -webkit-box-sizing: border-box; 
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:11:05.737

这是一个很好的资源： [http ://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

CSS3 有 background-size 属性。

您可以使用它将图像缩放到您想要的大小。:-)

# algorithm - 对双值列表进行排序

> ID：13090540
> 
> 赞同：1
> 
> 时间：2012-10-26T16:10:07.443
> 
> 标签：algorithm, list, sorting, binary

如果我有一个仅包含 0 和 1 的二进制值列表，如下面的 000111010110 并且我想将其排序为以下 000000111111 如果您还知道列表大小，那么执行此操作的最有效方法是什么？现在我想有一个计数器，当我从头到尾遍历列表时，我只计算 0 的数量。然后，如果我将 listSize 除以 numberOfZeros，我得到 numberOfOnes。然后我在想，不是从零开始重新排序列表，而是创建一个新列表。你同意这是最有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:11:35.877

[*您的算法实现了经典桶排序*](http://en.wikipedia.org/wiki/Bucket_sort)算法（其[*计数排序*](http://en.wikipedia.org/wiki/Counting_sort)实现）的最原始版本。当数字的范围已知并且（相对）较小时，这是对数字进行排序的最快方法。由于您只有零和一，因此您不需要存储桶排序中存在的计数器数组：单个计数器就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:38:45.377

如果你有数值，你可以使用汇编指令bitscan（x86汇编中的BSF）来计算位数。要创建“排序”值，您将设置 n+1 位，然后减去 1。这会将所有位设置到 n+1 位的右侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T03:10:42.587

桶排序看起来是一种排序算法。

我认为不需要这样的操作。我们知道没有比 N*logN 更快的排序算法。所以默认情况下是错误的。

所有这一切，因为你要做的就是你一开始所说的。只需遍历列表并计算零或一，这会给你 O(n) 复杂度。然后只需创建一个新数组，其中包含计数的零开头后面是一个。然后你总共有 N+N 复杂度，给你 O(n) 复杂度。

那只是因为你只有两个值。所以快速排序或任何其他排序都不能更快地做到这一点。没有比 NLog(n) 更快的排序

# java - 在java中创建水平直方图

> ID：13090542
> 
> 赞同：-3
> 
> 时间：2012-10-26T16:10:13.493
> 
> 标签：java

所以我有一个带有点的数据文件来制作直方图。我不知道我会怎么做。我在第一年的Java课程中，应该制作“垃圾箱”并计算每个点中有多少落入每个垃圾箱。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:14:02.880

我不清楚你的真正目标是什么。您是否必须编写图形直方图或基于文本的直方图（对于水平直方图来说很容易），或者使用现有的库。

您可以使用开源 JFreechart[创建直方图](http://www.roseindia.net/tutorial/java/jfreechart/createhistogram.html)。

# python - virtualenv 警告：“与系统相同的位置......”

> ID：13090546
> 
> 赞同：2
> 
> 时间：2012-10-26T16:10:22.947
> 
> 标签：python, virtualenv

当我尝试导入 distutils 或使用 mercurial 或各种其他 python 代码时，我收到以下警告：

```
$ ~/virtual-python/bin/python -c "import distutils; print distutils.__file__"
/Users/adam/virtual-python/lib/python2.7/distutils/__init__.py:13: UserWarning: The virtualenv distutils package at %s appears to be in the same location as the system distutils?
  "The virtualenv distutils package at %s appears to be in the same location as the system distutils?")
/Users/adam/virtual-python/lib/python2.7/distutils/__init__.pyc 
```

这是什么意思？我希望系统 distutils 不在我的 virtualenv 目录中，但这*似乎*是警告的意思。

~~系统~~用户安装的 python 包含在我的`sys.path`:
`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7`（和子目录）中，我怀疑这是问题的原因，但我不确定。

警告不会阻止任何工作，但我宁愿有一个真正的解决方案，而不是每次都用 -W 标志调用 python（[“将电工胶带放在警告灯上”](https://stackoverflow.com/a/4595844/814354)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:45:49.403

这是一个愚蠢的答案，也是错误的方法，但我收到了这个错误：

`/Users/adam/virtual-python/lib/python2.7/distutils/__init__.py:13: UserWarning: The virtualenv distutils package at %s appears to be in the same location as the system distutils? "The virtualenv distutils package at %s appears to be in the same location as the system distutils?")`

所以我刚刚从该文件中删除了第 13 行。愚蠢，但有效。警告灯已移除。不过，我更愿意接受一个真实的答案。

# excel - 将文本文件导入 excel - 每次遇到一个单词时开始一个新行

> ID：13090549
> 
> 赞同：0
> 
> 时间：2012-10-26T16:10:24.147
> 
> 标签：excel, vba

我有许多文本文件要导入到 excel 中。我希望我的宏打开一个文件，当它遇到“价格”这个词时，它会将该行放在 A1 中。之后的每一行都将放置在 b1、c1 等中。当再次找到单词 PRICE 时，将开始一个新行并将该行放置在 a2 中，然后是 b2、c2 等中的行。我想我应该使用 Instr。下面的代码似乎将带有 PRiCE 的行放在新行中，但文本文件中的以下行似乎没有跟随。我想我只需要在 DO 中进行细微调整，而不是循环。任何帮助都会很棒！

```
x = 1 'to offset rows for each file

' Loop thru all files in the folder
For Each file In folder.Files

' set the starting point to write the data to
Set cl = ActiveSheet.Cells(x, 1)

' Open the file
Set FileText = file.OpenAsTextStream(ForReading)

i = 0 'to offset columsn for each line
' Read the file one line at a time
Do While Not FileText.AtEndOfStream

    TextLine = FileText.ReadLine 'read line

    If InStr(TextLine, "FINEX") > 0 Then 'find text

    x = x + 1
    Set cl = ActiveSheet.Cells(x, 1)
    cl.Offset(, 0).Value = TextLine
    'i = i + 1
    'cl.Value = TextLine

    'MsgBox ("yes")
    Else
     cl.Offset(, i).Value = TextLine 'fill cell
    i = i + 1
    End If
Loop

' Clean up
FileText.Close

x = x + 1

Next file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:24:26.023

由于我昨天帮助您编写了这段代码并且碰巧看到了，所以我想我会采取行动：

看看下面的代码是否适合你。如果没有，请告诉我，我可以对其进行调整：

```
 x = 1 'to offset rows for each file and at price

' Loop thru all files in the folder
For Each file In folder.Files

    ' set the starting point to write the data to
    Set cl = ActiveSheet.Cells(x, 1)

    ' Open the file
    Set FileText = file.OpenAsTextStream(ForReading)

    i = 1 'to offset columsn for each line

    ' Read the file one line at a time
    Do While Not FileText.AtEndOfStream

        TextLine = FileText.ReadLine 'read line

        If InStr(TextLine, "PRICE") > 0 Then 'find text

            cl.Offset(x - 1, 0).Value = TextLine
            x = x + 1

        Else

            cl.Offset(x - 1, i).Value = TextLine 'fill cell
            i = i + 1

        End If

    Loop

Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:58.447

我的 2 美分

```
Dim f As File, fileStream As TextStream, filetext As String, NewLines() As String, Offset As Long

Offset = 1

Set fileStream = f.OpenAsTextStream(ForReading)
filetext = fileStream.ReadAll

filetext = Replace(filetext, vbCrLf, " ") 'make everything one line
NewLines = Split(filetext, "PRICE") 'make a new set of lines based on PRICE

For l = LBound(NewLines) To UBound(NewLines)

    ActiveSheet.Cells(l + Offset, 1) = NewLines(l)
Next l

fileStream.Close
Set fileStream = Nothing 
```

# objective-c - 使用 UITabBarController 设计从 AppDelegate 呈现 viewController

> ID：13090554
> 
> 赞同：3
> 
> 时间：2012-10-26T16:10:38.263
> 
> 标签：objective-c, ios

我的应用程序是使用 a 设计的`UITabBarController`，我试图在应用程序委托的顶部显示一个视图（登录屏幕）。当我使用以下代码时：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
tabBarController = [[UITabBarController alloc] initWithNibName:@"Main_TabBarController" bundle:nil];
self.window.rootViewController = tabBarController;
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
Login_ViewController *lvc = [storyboard instantiateViewControllerWithIdentifier:@"Login_ViewController"];

[self.window.rootViewController presentViewController:lvc animated:YES completion:nil]; 
```

我收到错误消息`Warning: Attempt to present <Login_ViewController: 0x716fac0> on <UITabBarController: 0x7165240> whose view is not in the window hierarchy!`，屏幕只是黑屏。如何添加`Login_ViewController`到窗口层次结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:51:22.047

您始终可以获取当前的根视图控制器并使用它来显示您的登录控制器。

```
UIViewController *presentingController = [[[[UIApplication sharedApplication] delegate] window] rootViewController];
[presentingController presentViewController:viewController animated:YES completion:nil]; 
```

此外，根据我希望登录屏幕的外观，我将使用 UIModalPresentationFormSheet 推送登录控制器。

```
viewController.modalPresentationStyle = UIModalPresentationFormSheet; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:20:25.243

您正在使用两种不同的机制来创建 UI。您应该将标签栏控制器移动到情节提要中。当您实例化情节提要时，它会用新实例和第一个控制器作为根控制器覆盖您的窗口。

错误消息告诉您标签栏控制器的视图不在视图层次结构中，而不是相反。

我将创建一个控制器，其视图仅包含您的应用程序徽标，并在此控制器内部确定您是否需要进入登录屏幕（如果您有持久登录）。然后从登录屏幕过渡到标签栏控制器。

除非您正在加载的故事板不是主故事板，否则您不需要手动加载它。您应该能够将故事板设置为应用程序的主要部分，iOS 将自动加载它。

# jquery - 每个循环中的 ajax 执行不正确

> ID：13090561
> 
> 赞同：3
> 
> 时间：2012-10-26T16:11:08.817
> 
> 标签：jquery, ajax, each

我有以下js片段：

```
cat_images = $(".category-description").next().find("img");
cat_images.each(function () {
    url = $(this).parent().attr("href");
    id = url.split("id=");
    id = id[1];
    url = "cat_url.php?i="+id;
    this_image = this;

    $.get (url, function (data) {
        $(this_image).attr("src", data);
    });
 }); 
```

目前，只有每个循环迭代的最后一个元素被 ajax.get 部分更新。我认为这与 ajax 与循环交互不佳有关，因为`this`在 ajax 函数中使用会使其完全失败。

无论如何，在等待 ajax 在 Jquery 中完成时是否有延迟循环？（不希望在其中混合常规 js）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:13:14.937

试着把它包在一个闭包里，

```
cat_images.each(function () {
    url = $(this).parent().attr("href");
    id = url.split("id=");
    id = id[1];
    url = "cat_url.php?i="+id;
    this_image = this;

    (function (this_image) {
      $.get (url, function (data) {
        $(this_image).attr("src", data);
      });
    })(this_image);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:40:57.563

尽管 Vega 的解决方案似乎可以正常工作，但我建议您稍微改变一下逻辑。

问题是，如果您有 10 个 cat_images，您将提出 10 个不同的请求，这不是很优雅。

您应该考虑创建一个新的 cat_url.php，它将接收一个或多个 id 并一次返回所有 URL。您还可以将 html 中的图像标识为 cat_image，因此当您将 URL 作为 JSON 返回时，您可以设置每个 src。

您的 HTML 片段应该是这样的：

```
<a href="url?id=1">
  <img src="..." id="cat_image1" rel="1" />
</a> 
```

那将是您的最终 js 片段：

```
var ids = [];
cat_images.each(function () {
  ids.push($(this).attr("rel"));
});

var data = "ids=" + ids;
$.get ({
  url: url,
  data: data,
  dataType: 'json',
  success: function (data) {
    for (var img in data.images) {
      $("#cat_image" + img.id).attr("src", img.url);
    };
  }
}); 
```

您的 cat_images.php 应返回如下 JSON：

```
{
  images: [
    {id: 1, url: 'url1.jpg'},
    {id: 2, url: 'url2.jpg'},
    {id: 3, url: 'url3.jpg'}
  ]
} 
```

# ajax - JSF Ajax addClientBehavior 给出 null.pointer.exception

> ID：13090567
> 
> 赞同：1
> 
> 时间：2012-10-26T16:11:38.623
> 
> 标签：ajax, jsf-2, custom-component

我正在尝试以编程方式将 Ajax 客户端行为添加到自定义组件，但是当我这样做时，如果我在 .xhtml它工作正常，但我真的需要以编程方式添加它们（实际上组件将从顶部组件动态呈现（仪表板 - > N列 - >每列N个小部件都来自数据库）

我已经测试了这个创建一个简单的 DataList 组件

这是相关的代码...

数据列表渲染器

```
@Override
    public void encodeEnd(FacesContext context, UIComponent component) throws IOException{
        DataList datalist = (DataList)component;
        ResponseWriter writer = context.getResponseWriter();

        .. bunch of rendering options....

        // If sortable then we add the sortable script.
        // This basically ends up generating a call to jsf.ajax.request(source,event,params);
        if (sortable != null && sortable.equalsIgnoreCase("true")) {
            ScriptUtils.startScript(writer, clientId);
            writer.write("$(function() {");

            writer.write("$(EasyFaces.escapeId('" + clientId + "')).sortable({");
            writer.write("update: function (event, ui) { ");

            writer.write(new AjaxRequest().addEvent(StringUtils.addSingleQuotes("update"))
                                .addExecute(StringUtils.addSingleQuotes(datalist.getClientId()))
                      .addSource(StringUtils.addSingleQuotes(datalist.getClientId()))
                      .addOther("sourceId", "ui.item.attr('id')")
                      .addOther("dataValue", "ui.item.attr('data-value')")
                      .addOther("dropedPosition", "ui.item.index()")
                      .getAjaxCall());

            writer.write(" } ");
            encodeClientBehaviors(context, datalist);
            writer.write("});");
            writer.write("});");
            ScriptUtils.endScript(writer);

        }

         // This is where I add the behavior
        AjaxBehavior ajaxBehavior = (AjaxBehavior) FacesContext.getCurrentInstance().getApplication().createBehavior(AjaxBehavior.BEHAVIOR_ID);
        ajaxBehavior.setRender(Arrays.asList("@form"));
        ajaxBehavior.setExecute(Arrays.asList("@form"));
        MethodExpression listener = FacesContext.getCurrentInstance().getApplication()
                .getExpressionFactory().createMethodExpression(context.getELContext(),"#{dataListManager.updateModel}", null,
                        new Class[] { AjaxBehaviorEvent.class });
        ajaxBehavior.addAjaxBehaviorListener(new AjaxBehaviorListenerImpl(listener));
        datalist.addClientBehavior(datalist.getDefaultEventName(), ajaxBehavior);

    }

    ... rest of the code 
```

现在.xhtml如下：

```
...

    h:form>
      <et:dataList id="dl" value="#{easyfacesBean.data}" itemValue="foo" var="xx" sortable="true">
        <h:outputText id="txt" value="#{xx}" />
      </et:dataList>
    </h:form>
... 
```

这会呈现代码 好的，列表实际上可以排序，但是当重新排序时，它会给我 null.pointer.exception 错误

这是从服务器返回的：

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class java.lang.NullPointerException</error-name><error-message><![CDATA[]]></error-message></error></partial-response> 
```

现在，如果我评论这一行

```
datalist.addClientBehavior(datalist.getDefaultEventName(), ajaxBehavior); 
```

只需像这样添加标签：

```
<h:form>
      <et:dataList id="dl" value="#{easyfacesBean.data}" itemValue="foo" var="xx" sortable="true">
      <f:ajax />
        <h:outputText id="txt" value="#{xx}" />
      </et:dataList>
    </h:form> 
```

一切正常..有什么想法吗？我会找到一种方法来真正知道 null.point.exception 在哪里..

顺便说一句，如果我不评论实际添加的行为并添加 < f:ajax > 标记，错误将更改为 java.lang.IndexOutOfBoundsException

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class java.lang.IndexOutOfBoundsException</error-name><error-message><![CDATA[Index: 1, Size: 1]]></error-message> 
```

问候！

# entity-framework-4.1 - Code First 模型在一台 PC 上工作，但在另一台 PC 上失败

> ID：13090572
> 
> 赞同：0
> 
> 时间：2012-10-26T16:11:58.297
> 
> 标签：entity-framework-4.1, ef-code-first

## 背景

使用 ef4.1 的代码优先模型。数据库是 Oracle，所以我们也在使用 Devart dotConnect。

## 问题

将应用程序部署到服务器后，看到 sql 语句和无效列名的错误。在我的开发 PC 上一切正常。

创建了一个小型测试控制台应用程序并复制了该行为。在我的电脑上，不是调试而是运行应用程序，它工作正常并正确选择数据。在服务器上，select 语句有两个额外的外键列名。

## 实体

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using System.Reflection;
using System.ServiceModel.DomainServices.Server;
using log4net;

namespace Cul2.Model
{
    [Table("LAB_REQUISITION")]
    public class LabRequisition : EntityBase
    {
        public LabRequisition()
        {
            Attributes = new Collection<LabRequisitionAttribute>();
            Samples = new Collection<LabSample>();
        }

        [Key]
        [Column("REQUISITION_ID")]
        public long? RequisitionId { get; set; }

        [Column("MATERIAL_ID")]
        public long? MaterialId { get; set; }

        [Include]
        [Association("Material", "MaterialId", "MaterialId", IsForeignKey = true)]
        public virtual LabMaterial Material { get; set; }

        [Column("LAB_NUMBER")]
        public int? LabNumber { get; set; }

        [Column("COLLECTOR_ID")]
        public long? CollectorId { get; set; }

        [Include]
        [Association("Collector", "CollectorId", "UserId")]
        [ForeignKey("CollectorId")]
        public virtual ComUser Collector { get; set; }

        [Column("RECEIVER_ID")]
        public long? ReceiverId { get; set; }

        [Include]
        [Association("Receiver", "ReceiverId", "UserId")]
        [ForeignKey("ReceiverId")]
        public virtual ComUser Receiver { get; set; }

        [Column("COLLECTION_DATE")]
        public DateTime? CollectionDate { get; set; }

        [Column("STATUS_ID")]
        public long? StatusId { get; set; }

        [Include]
        [Association("Status", "StatusId", "StatusId", IsForeignKey = true)]
        public virtual LabStatus Status { get; set; }

        [Column("IS_ACTIVE")]
        public bool IsActive { get; set; }

        [Column("TEMPLATE_ID")]
        public long? TemplateId { get; set; }

        [Include]
        [Association("Template", "TemplateId", "TemplateId", IsForeignKey = true)]
        public virtual LabTemplate Template { get; set; }

        [Column("REASON_ID")]
        public long? ReasonId { get; set; }

        [Include]
        [Association("Reason", "ReasonId", "ReasonId", IsForeignKey = true)]
        public virtual LabReason Reason { get; set; }

        [Column("RECEIVED_DATE")]
        public DateTime? ReceivedDate { get; set; }

        [Include]
        [Association("Samples", "RequisitionId", "RequisitionId")]
        [ForeignKey("RequisitionId")]
        public ICollection<LabSample> Samples { get; set; }

        [Include]
        [Association("Attributes", "RequisitionId", "RequisitionId")]
        public ICollection<LabRequisitionAttribute> Attributes { get; set; }

        public override string ToString()
        {
            return LabNumber == null ? "New" : LabNumber.ToString();
        }
    }
} 
```

在我的 PC 上，这是为该实体生成的模式 sql：

```
-- Table LAB_REQUISITION
CREATE TABLE LAB_REQUISITION ( 
  REQUISITION_ID NUMBER(18) NOT NULL,
  MATERIAL_ID NUMBER(18) NULL,
  LAB_NUMBER NUMBER(10) NULL,
  COLLECTOR_ID NUMBER(18) NULL,
  RECEIVER_ID NUMBER(18) NULL,
  COLLECTION_DATE TIMESTAMP(7) NULL,
  STATUS_ID NUMBER(18) NULL,
  IS_ACTIVE NUMBER(1) NOT NULL,
  TEMPLATE_ID NUMBER(18) NULL,
  REASON_ID NUMBER(18) NULL,
  RECEIVED_DATE TIMESTAMP(7) NULL,
  ROW_VERSION NUMBER(18,2) NULL,
  CREATED TIMESTAMP(7) NULL,
  CREATED_BY_ID NUMBER(18) NULL,
  LAST_UPDATED TIMESTAMP(7) NULL,
  LAST_UPDATED_BY_ID NUMBER(18) NULL,
  PRIMARY KEY (REQUISITION_ID)
)
/ 
```

在服务器上，这是生成的架构：

```
-- Table LAB_REQUISITION
CREATE TABLE LAB_REQUISITION ( 
  REQUISITION_ID NUMBER(18) NOT NULL,
  MATERIAL_ID NUMBER(18) NULL,
  LAB_NUMBER NUMBER(10) NULL,
  COLLECTOR_ID NUMBER(18) NULL,
  RECEIVER_ID NUMBER(18) NULL,
  COLLECTION_DATE TIMESTAMP(7) NULL,
  STATUS_ID NUMBER(18) NULL,
  IS_ACTIVE NUMBER(1) NOT NULL,
  TEMPLATE_ID NUMBER(18) NULL,
  REASON_ID NUMBER(18) NULL,
  RECEIVED_DATE TIMESTAMP(7) NULL,
  ROW_VERSION NUMBER(18,2) NULL,
  CREATED TIMESTAMP(7) NULL,
  CREATED_BY_ID NUMBER(18) NULL,
  LAST_UPDATED TIMESTAMP(7) NULL,
  LAST_UPDATED_BY_ID NUMBER(18) NULL,
  "Collector_UserId" NUMBER(18) NULL,
  "Receiver_UserId" NUMBER(18) NULL,
  PRIMARY KEY (REQUISITION_ID)
)
/ 
```

**Collector_UserId**和**Receiver_UserId**列不正确，它们导致 SQL 选择错误。

*   我无法弄清楚为什么该模型会在我的 Dev PC 上生成正确的 SQL，但在服务器上它会生成虚假的额外列。

*   该应用程序在 Dev PC 和服务器上完全相同，除了在服务器上我必须将 DbProviderFactories 部分添加到 app.config 中——在我的 PC 上，我猜因为安装了 Devart，它已经注册。否则完全一样。

*   在我的 Dev PC 上，Devart 库是从 GAC 加载的，而在服务器上，它们是从 bin 文件夹加载的。据我所知，版本是相同的。

## 更新 1 - 版本：

这些是 EF 和 devart 程序集的版本和路径。

**服务器**

程序集：EntityFramework EntityFramework，版本=4.1.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089 file:///C:/apps/Cultivate.TestConsole/EntityFramework.DLL

程序集：Devart.Data.Oracle.Entity Devart.Data.Oracle.Entity，版本=7.2.96.0，Culture=neutral，PublicKeyToken=09af7300eec23701 file:///C:/apps/Cultivate.TestConsole/Devart.Data.Oracle。实体.DLL

程序集： Devart.Data.Oracle Devart.Data.Oracle，版本=7.2.96.0，Culture=neutral，PublicKeyToken=09af7300eec23701 file:///C:/apps/Cultivate.TestConsole/Devart.Data.Oracle.DLL

程序集： Devart.Data Devart.Data，版本=5.0.555.0，Culture=neutral，PublicKeyToken=09af7300eec23701 file:///C:/apps/Cultivate.TestConsole/Devart.Data.DLL

**开发电脑**

程序集：EntityFramework EntityFramework，版本=4.1.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089 file:///C:/dev/tfs/cul2/source/Cul2.Actions.Lab.TestConsole/bin/Debug/EntityFramework.DLL

程序集：Devart.Data.Oracle.Entity Devart.Data.Oracle.Entity，版本=7.2.96.0，Culture=neutral，PublicKeyToken=09af7300eec23701 文件：///C:/Windows/Microsoft.Net/assembly/GAC_MSIL/Devart。 Data.Oracle.Entity/v4.0_7.2.96.0__09af7300eec23701/Devart.Data.Oracle.Entity.dll

程序集：Devart.Data.Oracle Devart.Data.Oracle，版本=7.2.96.0，Culture=neutral，PublicKeyToken=09af7300eec23701 file:///C:/Windows/assembly/GAC_MSIL/Devart.Data.Oracle/7.2.96.0__09af7300eec23701 /Devart.Data.Oracle.dll

程序集： Devart.Data Devart.Data，版本=5.0.555.0，Culture=neutral，PublicKeyToken=09af7300eec23701 file:///C:/Windows/assembly/GAC_MSIL/Devart.Data/5.0.555.0__09af7300eec23701/Devart.Data.dll

# spring - 选择性 AOP 调用

> ID：13090574
> 
> 赞同：1
> 
> 时间：2012-10-26T16:12:04.827
> 
> 标签：spring, aop

我有一个有几个方法的类，该类的接口看起来像这样

一些主程序调用doSomeOperation方法，该方法又根据业务规则调用类中的其他方法。我有一种情况，在调用此类中的某些方法后，我必须填充一些统计信息。

例如，在调用 doSomeOperation 之后又调用 doOps1，在数据库中填充一些统计表，指示在特定表中插入/更新/删除了多少记录等，以及通过 doOps1 方法花费了多少时间等。我正在尝试为此目的使用 Spring AOP。但是，我面临的问题是没有调用预期的代码。

**这是完整的代码（仅供示例）**

```
 package spring.aop.exp;

public interface Business {
    void doSomeOperation();        
    void doOps1();
} 
```

* * *

```
package spring.aop.exp;

public class BusinessImpl implements Business {

    public void doSomeOperation() {
            System.out.println("I am within doSomeOperation");
            try {
                    Thread.sleep(200);
            } catch (InterruptedException e) {
                    System.out.println("Thread interrupted");
            }
            System.out.println("Done with sleeping.");
            doOps1();
    }

    public void doOps1() {
        System.out.println("within Ops1");
    }               

} 
```

* * *

**方面类**

```
package spring.aop.exp;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class BusinessProfiler {

        @Pointcut("execution(* doOps1*(..))")
        public void businessMethods1() { }

        @After("businessMethods1()")
         public void profile1() throws Throwable {
            //this method is supposed to populate the db stats and other statistics

            System.out.println("populating stats");

        }

} 
```

**-- 主类**

```
package spring.aop.exp;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class SpringAOPDemo {

        /**
         * @param args
         */
        public static void main(String[] args) {
                ApplicationContext context = new ClassPathXmlApplicationContext(
                                "ExpAOP.xml");
                Business bc = (Business) context.getBean("myBusinessClass");
                bc.doSomeOperation();                   
        }

} 
```

*****和配置文件*******

 **```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

        <!-- Enable the @AspectJ support -->
        <aop:aspectj-autoproxy />

        <bean id="businessProfiler" class="spring.aop.exp.BusinessProfiler" />
        <bean id="myBusinessClass" class="spring.aop.exp.BusinessImpl" />
</beans> 
```

在运行主程序时，我得到了输出（它没有从 Aspect 类 - BusinessProfiler 调用 profile1）。但是，如果我直接从主类调用 doOps1，则会调用方面方法。我想知道如果仅从主方法调用方面是否应该工作，而不是其他方法。

> 2012 年 10 月 26 日上午 11:56:19 org.springframework.context.support.AbstractApplicationContext prepareRefresh 信息：刷新 org.springframework.context.support.ClassPathXmlApplicationContext@be2358：显示名称 [org.springframework.context.support.ClassPathXmlApplicationContext@be2358] ; 启动日期 [2012 年 10 月 26 日星期五 11:56:19 EDT]；上下文层次结构的根 2012 年 10 月 26 日上午 11:56:19 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions INFO：从类路径资源 [ExpAOP.xml] 加载 XML bean 定义 2012 年 10 月 26 日 11:56:19 AM org.springframework.context.support.AbstractApplicationContext 获得FreshBeanFactory 信息：应用程序上下文的 Bean 工厂 [org.springframework.context.support.ClassPathXmlApplicationContext@be2358]：org.springframework.beans.factory.support。DefaultListableBeanFactory@1006d75 Oct 26, 2012 11:56:19 AM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons 信息：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@1006d75 中预实例化单例：定义 bean [org .springframework.aop.config.internalAutoProxyCreator,businessProfiler,myBusinessClass]; 工厂层次结构的根

*****我在 doSomeOperation 内** **完成了睡眠。** **在 Ops1 内*******

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:52:18.470

`Spring AOP`默认情况下`proxy-based`，当您从该类的另一个方法中调用同一类的方法时，您的调用不会通过方面代理，而是直接到该方法 - 这就是不调用方面代码的原因。要更好地理解它，请阅读Spring 文档中有关[了解 AOP 代理的](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)[这一章](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-understanding-aop-proxies)。****

# php - 一次 PHP 调用添加多个文件？

> ID：13090575
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:12:17.543
> 
> 标签：php

所以我试图在一个文件中添加 2 个不同的（html-header.php 和 header.php）文件。我不了解 PHP，大多数搜索都会导致我不知道的高级代码。

这是我正在使用的代码：

```
<?php include 'header.php'; ?> 
```

这包括我的一个头文件，我将如何添加另一个与头文件一起使用的文件。提前谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:13:37.480

包括它，就像你包括第一个一样。[包含的文档](http://php.net/manual/en/function.include.php)。

```
<?php
    include 'header.php';
    include 'html-header.php';
?> 
```

Include 将只取文件中的任何内容并将其替换为该`include 'file.php'`行。因此，包含文件的顺序很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:15:16.413

只需多次使用 include 语句。

```
<?php
    include 'html-header.php';
    include 'header.php';
?> 
```

或者，如果 html-header 总是与 header 一起使用，请在 html-header.php 的 header 中包含一个 include 行。

# expressionengine - 在 ExpressionEngine 中重复事件或自动将输入日期向前推

> ID：13090584
> 
> 赞同：1
> 
> 时间：2012-10-26T16:12:46.183
> 
> 标签：expressionengine

我在客户端站点上设置了一个事件频道，一切正常。然而，他们现在有一个每周日举行的活动。由于使用 start_on 参数仅显示从当前月份开始的事件，此重复事件现在显示空白页。

有没有一种简单的方法可以让条目发布日期自动更新为当月或以某种方式正确显示重复事件。客户不愿意在 Solspace 日历等新模块上花钱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:04:41.960

是的，肖恩，我看到了您的困境-将事件与其月份和年份（尤其是年份）分开，以使一个事件甚至多次显示...如何使用 MX Clone 来简单地允许他们创建同一条目的多个实例（已授予，他们也必须调整每个日期，但如果您使用的是本机日期字段之一而不是自定义日期字段，则可以从批量编辑屏幕整体完成）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:37:34.217

您可以在服务器上设置一个 cron 作业来运行 PHP 脚本，该脚本将修改您的重复条目的条目日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:51:07.390

你能把条目粘起来吗？不确定这是否会覆盖 start_on 参数。

# .htaccess - 添加了 URL 参数的重定向

> ID：13090585
> 
> 赞同：1
> 
> 时间：2012-10-26T16:12:49.070
> 
> 标签：.htaccess, google-analytics, http-status-code-301

为了在 Google Analytics 中查看从 olddomain.com 到 newdomain.com 发生了多少 301 转发，我知道我可以[添加一个 url 参数](https://webmasters.stackexchange.com/a/27459)

但是，以下内容似乎不适用于主页，只有子页面：

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^olddomain.com$ [OR]
  RewriteCond %{HTTP_HOST} ^www.olddomain.com$
  RewriteRule (.*)$ http://newdomain.com/$1?utm_source=olddomain.com&utm_medium=redirect [R=301,L]
</IfModule> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:36:36.047

广告系列跟踪需要 3 个参数：`utm_source, utm_medium, and utm_campaign`

目前，您只包括在内`utm_source`，`utm_medium`这可能就是您看到不一致结果的原因。

有关此示例，请参阅[使用 Google Analytics 跟踪 301 重定向：](http://www.lanevance.com/web/web-development/tracking-301-redirects-with-google-analytics/)

`RewriteRule ^$ http://www.lanevance.com/?utm_source=redirects&utm_medium=lanevance.me&utm_campaign=301_Redirects [R=301,L]`

Google的[URL Builder](http://support.google.com/analytics/bin/answer.py?hl=en&topic=1007028&answer=1033867)也很有帮助。

# amazon-ec2 - EC2 上的 BigCouch ID 和备份数据

> ID：13090590
> 
> 赞同：0
> 
> 时间：2012-10-26T16:13:14.167
> 
> 标签：amazon-ec2, backup, bigcouch

我有几个关于 BigCouch 的问题，我很高兴在开始使用它之前得到答案。

*   我需要仔细选择我的分片键还是可以只使用自动生成的 GUID？我从具有 1 个复制的单个服务器开始，但我希望在需要添加另一个分片时做好准备

*   任何用于管理集群的 GUI（如 CouchBase）都有，类似于管理数据库

*   在 EC2 上托管 BigCouch 时如何备份数据（即快照）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:02:28.103

由于您还没有开始使用 BigCouch，而且看起来您需要一些 Couchbase 中开箱即用的功能（自动分片、管理控制台......）

为什么不去 Couchbase 呢？

# android - 通过 USB 进行通信

> ID：13090592
> 
> 赞同：2
> 
> 时间：2012-10-26T16:13:16.043
> 
> 标签：android, usb

在许多帖子中，我看到自 Android 3.1 以来，可以将设备用作 USB 主机。虽然这很好，但实际上并不是我需要的功能。我只需要通过设备的 USB 端口进行通信，这意味着发送和接收命令。在这种情况下谁充当主机对我来说并不重要，PC 可以是主机，我的设备可以是客户端。android 是否有允许我通过 USB 端口发送命令并从另一端接收答案的功能（在当前情况下，我的计算机和一个在 USB 端口上侦听设备的应用程序）。

我已经尝试使用清单中的 uses-feature 将我的设备作为主机（它是 Asus Transformer Pad）的方法，但是无论连接到设备（扩展坞、PC、另一个安卓设备）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:10:10.093

我知道我们亚行的一些计划

因此，这可能是您的一个选择，具体取决于您想做什么。

在这里检查：[http ://android-dls.com/wiki/index.php?title=ADB](http://android-dls.com/wiki/index.php?title=ADB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T22:07:13.507

您需要有支持 API 或 SDK 的 USB 数据传输线（也称为 USB 数据连接线），然后使用以下代码。通信速度比使用 USB 上的 WinSock(TCP/IP) 或 USB 上的串行端口快得多。USB2.0通信速度为480Mbps，有效数据通信速度大于100Mbps，可隔离病毒和网络攻击。

```
void CU2uDlg::OnOK() 
{
BYTE        buf[65530];
LPU2URET    pU2uRet;
BOOL        bRet;
int         ret;
CString     msgstr;

ret = u2u_open();
if (ret == -1){
    AfxMessageBox("Open U2U device Success.");
}else{
    msgstr.Format("Open U2U device fail，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//send data
bRet = u2u_SendData(buf, 65530, ret);
if(!bRet)
{
    msgstr.Format("Send data error，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//receive data
while (1){
    bRet = u2u_RecvData(recvData, dataLen, ret);
    if( !bRet )
    {
        msgstr.Format("Receive data error，return：%d", ret);
        AfxMessageBox(msgstr);
        u2u_close();
        return;
    }else{
        break;
    }
}
u2u_close();

} 
```

请参阅： [参考 1](http://www.cnblogs.com/LiuKaiFa/p/USB_data_link_cable_API.html)、[参考 2](http://blog.csdn.net/zzkjliu/article/details/12838383)

# html - HTML/CSS 演示文稿的光栅图形缺点

> ID：13090594
> 
> 赞同：0
> 
> 时间：2012-10-26T16:13:19.073
> 
> 标签：html, css, graphics, presentation, impress.js

许多程序员更喜欢仅借助文本编辑器而不是使用 GUI 工具来构建演示文稿的想法。

借助 impress.js 提供的 JavaScript 代码，可以使用 HTML/CSS 创建动画演示文稿。该项目提供了一个“令人印象深刻”的例子，许多人对此发表了热情洋溢的评论。

但是，我有点担心这种方法的固有局限性：HTML/CSS 中的长度是在光栅图形模型中指定的。因此，必须知道投影仪（屏幕或其他显示设备）的分辨率才能以适当的方式设计演示文稿。之后缩放演示文稿（并移植到不同的设备）似乎很困难。

使用 LaTeX Beamer 类或 Inkscape 插件 JessyInk 或 Sozi 等矢量图形工具是否更有意义，它们可以实现更好的缩放？

任何评论和意见表示赞赏。

# objective-c - 递归块保留周期

> ID：13090598
> 
> 赞同：20
> 
> 时间：2012-10-26T16:13:34.383
> 
> 标签：objective-c, recursion, automatic-ref-counting, objective-c-blocks

这会导致任何类型的保留周期吗？使用安全吗？

```
__block void (^myBlock)(int) = [^void (int i)
{
    if (i == 0)
        return;

    NSLog(@"%d", i);
    myBlock(i - 1);
} copy];
myBlock(10);

myBlock = nil; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-26T17:17:43.860

您的代码**确实**包含一个保留周期，但您可以通过在递归基本案例 ( )中设置`myBlock`为 nil 在递归结束时打破保留周期。`i == 0`

证明这一点的最好方法是尝试它，在 Allocations 工具下运行，关闭“Discard unrecorded data on stop”，打开“Record reference counts”，关闭“Only track active allocations”。

我使用 OS X 命令行工具模板创建了一个新的 Xcode 项目。这是整个程序：

```
#import <Foundation/Foundation.h>

void test() {
    __block void (^myBlock)(int) = [^void (int i){
        if (i == 0) {
//            myBlock = nil;
            return;
        }
        NSLog(@"myBlock=%p %d", myBlock, i);
        myBlock(i - 1);
    } copy];
    myBlock(10);
}

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        test();
    }
    sleep(1);
    return 0;
} 
```

然后我在 Allocations 工具下运行它，使用上面描述的设置。然后我在 Instruments 中将“Statistics”更改为“Console”，查看程序输出：

```
2012-10-26 12:04:31.391 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 10
2012-10-26 12:04:31.395 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 9
2012-10-26 12:04:31.396 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 8
2012-10-26 12:04:31.397 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 7
2012-10-26 12:04:31.397 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 6
2012-10-26 12:04:31.398 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 5
2012-10-26 12:04:31.398 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 4
2012-10-26 12:04:31.399 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 3
2012-10-26 12:04:31.400 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 2
2012-10-26 12:04:31.401 recursiveBlockTest[71789:303] myBlock=0x7ff142c24700 1
<End of Run> 
```

我复制了块地址（`0x7ff142c24700`），将“控制台”更改为“对象列表”，并将地址粘贴到搜索框中。Instruments 只向我展示了该块的分配：

![块泄露](../Images/9f5398dfff65a8a7808de2aafeafa502.png)

Live 列下的点表示程序退出时该块仍被分配。它被泄露了。我点击了地址旁边的箭头来查看区块分配的完整历史：

![阻止泄露的细节](../Images/9258d5e1e603d637a650f9bf956f297b.png)

这种分配只发生过一件事：它被分配了。

接下来我取消注释语句`myBlock = nil`中的行。`if (i == 0)`然后我再次在分析器下运行它。为了安全起见，系统会随机分配内存地址，因此我清除了搜索栏，然后再次检查控制台以获取本次运行的块地址。正是`0x7fc7a1424700`这个时候。我再次切换到“对象列表”视图并粘贴到新地址中`0x7fc7a1424700`。这是我看到的：

![块释放](../Images/06e69572d140809962d5fa0cd42edde2.png)

这次 Live 列下没有点，这意味着程序退出时该块已被释放。然后我点击地址旁边的箭头查看完整的历史记录：

![块释放细节](../Images/d2ed629bd07aa25a6948992d66d5685a.png)

这一次，块被分配、释放和释放。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-03T19:30:24.153

有一个简单的解决方案可以避免循环和过早复制的潜在需要：

```
void (^myBlock)(id,int) = ^(id thisblock, int i) {
    if (i == 0)
      return;

    NSLog(@"%d", i);
    void(^block)(id,int) = thisblock;
    block(thisblock, i - 1);
  };

myBlock(myBlock, 10); 
```

您可以添加一个包装器来获取原始类型签名：

```
void (^myBlockWrapper)(int) = ^(int i){ return myBlock(myBlock,i); }

myBlockWrapper(10); 
```

如果您想扩展它以进行相互递归，这将变得乏味，但我想不出一个好的理由首先这样做（一个类不会更清楚吗？）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T19:17:56.517

如果您使用 ARC，则有一个保留循环，因为`__block`对象变量由块保留。所以块保留自己。您可以通过将两者声明`myBlock`为`__block`and来避免它`__weak`。

如果您使用的是 MRC，`__block`则不会保留对象变量，您应该没有问题。只记得`myBlock`最后释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T16:35:10.683

不，这不会导致保留周期。`__block`关键字告诉块不要复制，这`myBlock`会在分配之前发生，导致应用程序崩溃。如果这不是 ARC，那么您唯一需要做的就是`myBlock`在调用后释放`myBlock(10)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-10T15:05:15.057

我想要一个没有警告的解决方案，在这个线程中[https://stackoverflow.com/a/17235341/259521](https://stackoverflow.com/a/17235341/259521) Tammo Freese 给出了最好的解决方案：

```
__block void (__weak ^blockSelf)(void);
void (^block)(void) = [^{
        // Use blockSelf here
} copy];
blockSelf = block;
    // Use block here 
```

他的解释很有道理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-14T01:56:16.877

这是该问题的现代解决方案：

```
void (^myBlock)();
__block __weak typeof(myBlock) weakMyBlock;
weakMyBlock = myBlock = ^void(int i) {
    void (^strongMyBlock)() = weakMyBlock; // prevents the block being delloced after this line. If we were only using it on the first line then we could just use the weakMyBlock.
    if (i == 0)
        return;

    NSLog(@"%d", i);
    strongMyBlock(i - 1);
};
myBlock(10); 
```

# java - 如何将当前位置与地址列表进行比较，并得出 5 英里/10 英里/20 英里内的附近地址？

> ID：13090599
> 
> 赞同：1
> 
> 时间：2012-10-26T16:13:34.893
> 
> 标签：java, android, geolocation, geocoding

yelp 和 gasbuddy 等移动应用如何查找附近餐馆/加油站的列表？我正在创建一个 Android 应用程序，并在我的数据库中有一个位置列表。我想根据用户的当前位置从我的数据库中为用户提供所有附近的位置。最好的方法是什么？我正在使用 Java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:33:10.853

当您获得距离时，此链接可能会有所帮助[http://www.dreamincode.net/forums/topic/92885-distance-between-2-points/](http://www.dreamincode.net/forums/topic/92885-distance-between-2-points/) 只需将其与您想要的任何内容进行比较，然后显示或保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:16:27.587

一些数据库实际上内置了这个；例如，[这是](https://stackoverflow.com/questions/3944880/postgres-spatial-indexing)关于 Postgres 中空间查询的 StackOverflow 问题，它应该让您走上正确的道路。您的应用程序会将坐标发送到服务器，服务器将使用这些坐标直接查询 postgres 数据库。

# mongodb - 如何确定 MongoDB 服务器类型

> ID：13090601
> 
> 赞同：1
> 
> 时间：2012-10-26T16:13:54.003
> 
> 标签：mongodb

一个 MongoDB 实例可以有不同的角色：

*   配置服务器
*   路由器（mongos）
*   数据服务器
*   仲裁服务器（用于副本集）

我知道`db.serverStatus()`可以用来查看一个实例是否是路由器，`process`值为`mongos`. 但对于配置服务器、仲裁器和数据节点，该`process`值为`mongod`.

有没有一种简单的方法来区分这些实例类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:44:40.713

我想提请注意这个问题的一个特别重要的问题：分片是和水平维度（数据分布到的几个副本集），副本集是一种高可用性解决方案，由不同的 mongod 节点组成！

所以你实际上想要弄清楚的是：

*   ReplicaSet 节点角色
*   分片节点成员

对于副本集，您可能有兴趣了解每个节点角色。无需连接副本集的所有节点即可轻松获取信息，只需运行以下命令：

```
db.isMaster() 
```

这样，您将获得每个成员的节点成员和角色。

首先，对于分片节点成员，您永远不应该尝试直接连接到配置服务器。它们用于管理块的分布、块拆分和其他配置数据，仅与分片集群功能相关。避免使用这些 ip 从您的应用程序连接。

因此，如果您想清楚地了解哪些成员组成了您的分片集群、您拥有多少个分片等，您需要运行命令：

```
db.printShardStatus() 
```

或者

```
sh.status() 
```

[请在此处](http://docs.mongodb.org/manual/administration/sharding/#view-cluster-details)查看文档

干杯，N.

# entity-framework - SQL Server Profiler - 为什么有些调用 RPC:Completed 和一些调用 SQL:BatchCompleted

> ID：13090602
> 
> 赞同：8
> 
> 时间：2012-10-26T16:13:55.373
> 
> 标签：entity-framework, asp.net-mvc-4, sql-server-profiler

我将首先承认我在使用 SQL Server Profiler 时经常会感到困惑。

话虽如此，我决定启动它以查看通过试验数据库集的 Include 方法生成的 SQL。我正在浏览有专辑、艺术家和流派的音乐商店示例。

我注意到的一件事是，一些调用具有**SQL:BatchCompleted**事件类，而其他调用具有**RPC:Completed**事件类。似乎在 RPC 事件类下跟踪延迟加载调用。

这两个事件类之间有什么区别，为什么延迟加载会导致事件类为 RPC:Completed？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:18:27.040

BatchCompleted 表示 TSQL 代码（例如选择）已完成。RPC:Completed 表示存储过程已完成。可能是 EF 使用 sp_executesql 动态执行 SQL 代码，因此您获得 RPC:Completed。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-10T16:29:20.013

这都是关于参数化的。它在没有动态参数时作为 SQL Batch 运行，在有动态参数时作为 RPC 运行。此设置允许查询计划的最佳重用。

请参阅：[https ://blogs.msdn.microsoft.com/bindeshv/2010/07/12/ef-query-execution-pattern-usage-of-sp_executesql-vs-direct-execution-of-sql-statement/](https://blogs.msdn.microsoft.com/bindeshv/2010/07/12/ef-query-execution-pattern-usage-of-sp_executesql-vs-direct-execution-of-sql-statement/)

# oracle - 在 Mac 上编译 Pro*C 代码

> ID：13090605
> 
> 赞同：2
> 
> 时间：2012-10-26T16:14:08.957
> 
> 标签：oracle, oracle-pro-c

我修改了一个用 Pro*C 语言编写的代码，但我不知道如何编译它并检查是否有任何编译错误。如何在 Mac 系统上编译文件 xyzcode.pc 并制作可执行文件。请注意，我使用的是 Mac 系统。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-14T14:27:08.330

您无法在 Mac OSX 下编译 Pro*C 代码，因为 Pro*C 可执行文件 ( `proc`) 不适用于 Mac OSX。

Pro*C 是 Oracle 数据库标准/企业版的一部分。

Oracle 不提供适用于 Mac OSX 的 Oracle 11g 或 12c 下载。

不过，它似乎[已经为 Mac OSX 提供了 10g 版本](http://www.oracle.com/technetwork/topics/macos/whatsnew/index.html)- 但它不再可用。

# java - 还有一个 mediaPlayer IllegalStateException: screen timeout

> ID：13090608
> 
> 赞同：2
> 
> 时间：2012-10-26T16:14:12.410
> 
> 标签：java, android, media-player, illegalstateexception

我已经为 Android 制作/下载了一个运行良好的 Java 媒体播放器类，除了在屏幕超时或手动关闭它时，在恢复时，我在尝试`mediaPlayer.isPlaying()`.

谷歌搜索我发现这可能是媒体播放器处于错误状态。然后我尝试`try {...} catch(IllegalStateException...`了事情，但我添加了太多，事情变得一团糟，失控（并且没有成功）。

然后我尝试了类似的东西：

```
mediaPlayer.setOnErrorListener(new OnErrorListener() {
            public boolean onError(MediaPlayer mp, int what, int extra) {
                mp.release();
                return false;
            } 
```

但它不起作用，仍然收到 IllegalStateException 错误。（编辑：顺便说一句，[这里](https://stackoverflow.com/questions/11860046/android-mediaplayer-audiofocus-loss-setonerrorlistener-issue)说“IllegalStateExceptions 不会触发 OnErrorListener 调用”。这是正确的吗？？）

所以，我的问题：

1) 屏幕超时导致媒体播放器进入错误状态时发生了什么？2）我怎样才能防止这种情况发生？3) 我需要在 mediaPlayer.setOnErrorListener 中放入什么？4）我是否错过了错误侦听器的某些内容，需要以某种方式处理它？

抱歉……这里是新手。

编辑：我被要求添加调用，所以这里是整个类：

```
package com.floritfoto.apps.ave;

import java.io.FileDescriptor;
import java.io.IOException;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.media.MediaPlayer.OnErrorListener;

public class Music implements OnCompletionListener{
    MediaPlayer mediaPlayer;
    boolean isPrepared = false;

    public Music(FileDescriptor fileDescriptor){
        mediaPlayer = new MediaPlayer();
        try{
            mediaPlayer.setDataSource(fileDescriptor);
            mediaPlayer.prepare();
            isPrepared = true;
            mediaPlayer.setOnCompletionListener(this);
            mediaPlayer.setOnErrorListener(new OnErrorListener() {
                public boolean onError(MediaPlayer mp, int what, int extra) {
                    mp.release();
                    return false;
                }
            });
        } catch(Exception ex){
            throw new RuntimeException("Couldn't load music, uh oh!");
        }
    }

    public void onCompletion(MediaPlayer mediaPlayer) {
        synchronized(this){
            isPrepared = false;
        }       
    }               

    public void play() {
        if(mediaPlayer.isPlaying()){
            return;
        }   
        try{
            synchronized(this){
                if(!isPrepared){
                    mediaPlayer.prepare();
                }
                mediaPlayer.seekTo(0);
                mediaPlayer.start();
            }
        } catch(IllegalStateException ex){
            ex.printStackTrace();
        } catch(IOException ex){
            ex.printStackTrace();
        }   
    }   

    public void stop() {
        mediaPlayer.stop();
        synchronized(this){
            isPrepared = false;
        }       
    }       

    public void switchTracks(){
        mediaPlayer.seekTo(0);
        mediaPlayer.pause();
    }   

    public void pause() {
        mediaPlayer.pause();
    }

    public boolean isPlaying() {
        return mediaPlayer.isPlaying();
    }

    public boolean isLooping() {
        return mediaPlayer.isLooping();
    }

    public void setLooping(boolean isLooping) {
        mediaPlayer.setLooping(isLooping);
    }

    public void setVolume(float volumeLeft, float volumeRight) {
        mediaPlayer.setVolume(volumeLeft, volumeRight);
    }

    public String getDuration() {
        return String.valueOf((int)(mediaPlayer.getDuration()/1000));
    }
    public void dispose() {
        if(mediaPlayer.isPlaying()){
            stop();
        }
        mediaPlayer.release();
    }
} 
```

这是错误：

```
E/AndroidRuntime(21110): FATAL EXCEPTION: main
E/AndroidRuntime(21110): java.lang.RuntimeException: Unable to pause activity {com.floritfoto.apps.ave/com.floritfoto.apps.ave.OpenBird}: java.lang.IllegalStateException
E/AndroidRuntime(21110):        at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2718)
E/AndroidRuntime(21110):        at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2674)
E/AndroidRuntime(21110):        at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2652)
E/AndroidRuntime(21110):        at android.app.ActivityThread.access$800(ActivityThread.java:127)
E/AndroidRuntime(21110):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1170)
E/AndroidRuntime(21110):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(21110):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(21110):        at android.app.ActivityThread.main(ActivityThread.java:4507)
E/AndroidRuntime(21110):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(21110):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(21110):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
E/AndroidRuntime(21110):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
E/AndroidRuntime(21110):        at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(21110): Caused by: java.lang.IllegalStateException
E/AndroidRuntime(21110):        at android.media.MediaPlayer.isPlaying(Native Method)
E/AndroidRuntime(21110):        at com.floritfoto.apps.ave.Music.dispose(Music.java:101)
E/AndroidRuntime(21110):        at com.floritfoto.apps.ave.OpenBird.onPause(OpenBird.java:211)
E/AndroidRuntime(21110):        at android.app.Activity.performPause(Activity.java:4563)
E/AndroidRuntime(21110):        at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1198)
E/AndroidRuntime(21110):        at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2705)
E/AndroidRuntime(21110):        ... 12 more
W/ActivityManager( 1864):   Force finishing activity r.intent.getComponent().flattenToShortString() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:08:45.330

在调用 isPlaying() 之前尝试检查 mediaPlayer 是否为 null 将 isPlaying() 方法替换为：

```
@Override
public boolean isPlaying()
{
    super.isPlaying();
if ( mediaPlayer != null && mediaPlayer.isPlaying() )
    return true;
else
    return false;   
} 
```

# java - .bat 文件用于编译和运行 java 的东西

> ID：13090609
> 
> 赞同：2
> 
> 时间：2012-10-26T16:14:23.567
> 
> 标签：java, batch-file, cmd

我正在尝试创建两个 bat 文件。一个是 c.bat，另一个是 r.bat

c.bat 仅包含：

```
cls
javac *.java 
```

这将编译所有 .java 文件。

在 r.bat 我有：

```
cls
java * 
```

它不会运行类文件。我认为这是因为“java *”行中的 * 转换为“java Class1.class”、“java Class2.class”等等，当它应该是“java Class1”和“java Class2”时。（没有扩展）我该怎么做？我刚开始学习这些东西，我在任何地方都找不到正确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:19:45.033

以下循环遍历`.java`找到的所有文件`C:\java\stuff`并一个接一个地运行它们。`%%~nf`正在格式化文件名以不显示文件扩展名，即*java 类名*。如果您更改`java %%~nf`为，`echo java %%~nf`您可以确切地看到发生了什么。

```
cls
for "C:\java\stuff" %%f in (*.java) do (
    java %%~nf
) 
```

[对于](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds.mspx?mfr=true)：以下选项可用：

```
Variable with modifier  Description

%~I                     Expands %I which removes any surrounding 
                        quotation marks ("").
%~fI                    Expands %I to a fully qualified path name.
%~dI                    Expands %I to a drive letter only.
%~pI                    Expands %I to a path only.
%~nI                    Expands %I to a file name only.
%~xI                    Expands %I to a file extension only.
%~sI                    Expands path to contain short names only.
%~aI                    Expands %I to the file attributes of file.
%~tI                    Expands %I to the date and time of file.
%~zI                    Expands %I to the size of file.
%~$PATH:I               Searches the directories listed in the PATH environment 
                        variable and expands %I to the fully qualified name of 
                        the first one found. If the environment variable name is 
                        not defined or the file is not found by the search,
                        this modifier expands to the empty string. 
```

# mongodb - 查找参考教义-mongodb

> ID：13090612
> 
> 赞同：1
> 
> 时间：2012-10-26T16:14:35.283
> 
> 标签：mongodb, symfony, doctrine-orm, symfony-2.1, doctrine-mongodb

我有用户和帖子的集合。

用户看起来像

```
{ "_id" : ObjectId("5089cc4c7b03b9902b000000"), "facebook_id" : "522128874" } 
```

帖子看起来像

```
{ "_id" : ObjectId("508aa21b7b03b9780800000f"), "facebook_id" : "10150709375878875", "user" : DBRef("User", ObjectId("5089cc4c7b03b9902b000000")), "message" : " Julia dream, dreamboat queen, queen of all my dreams", "updated_time" : 1333502938 } 
```

我想查找特定用户的所有帖子。

```
$user = $userRepo->findOneByFacebookId('522128874');
$posts = $postRepo->findOneByUser($user) 
```

它不起作用。我也试过

```
$posts = $postRepo->findOneBy(array('user' => $user)) 
```

和

```
$posts = $postRepo->findOneBy(array('user' => $user->getId())) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-08T05:18:51.920

**砰！**

```
$posts = $postRepo->findOneBy(array('user.id' => $user->getId())) 
```

试试看，对我有用。您必须查询所有元素似乎有点愚蠢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T12:09:25.707

如果您正确映射了文档关系，您需要做的只是

```
$user = $userRepo->findOneByFacebookId($fbid);
$posts = $user->getPosts(); 
```

您可能想查看[双向引用学说文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/bidirectional-references.html)

如果要手动查找用户的帖子（更繁琐的方式），则必须在 Post 存储库中创建名为 findOneByUser($user) 的方法。然后，您必须将用户 ID 转换为 MongoId，然后使用 querybuilder 将 user.$id 字段匹配到将返回游标的 MongoId。

请记住，当您创建引用另一个文档的文档（在本例中为帖子）时，它会通过其 MongoId 存储引用，因此您不能简单地执行 findOneByUser($user) ，除非您自己创建了此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T13:05:19.997

您必须为*@ReferenceOne*使用Query Builder的***references()***方法，例如[https://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/query-builder-api.html](https://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/query-builder-api.html)

 *```
$qb = $postRepo->createQueryBuilder('u')
               ->field('user')->references($user); 
```

**PS**：使用***includesReferenceTo()***一个*@ReferenceMany**

# c - 是否可以使用仅在运行时才知道参数数量和类型的函数指针调用函数

> ID：13090626
> 
> 赞同：0
> 
> 时间：2012-10-26T16:15:50.677
> 
> 标签：c, function-pointers

背景：我正在创建一个库以允许进程使用 IPC 从另一个进程调用另一个函数。

每个进程都需要注册其功能：

```
void register_function(char* function_name, 
                       void(*func)(), 
                       int nb_parameters, 
                       const int parameters_type[]) 
```

我的问题是当我需要在通过 IPC 请求后实际调用该函数时，我无法调用该函数，因为参数的数量和类型仅在运行时才知道。

我正在考虑使用动态创建的结构来调用该函数，但我不确定我应该使用的参数的顺序，或者即使这是一个好主意。

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:30:20.780

我建议你使用两个论点：

第一个参数类型：（int）。含义 -> 参数数量

第二个参数类型：(void*) -> 列表，其中包含第一个参数所指示的那么多参数。

就像 main 中的 argc 和 argv 一样。

此致。

# android - Android View 在同一个 OnClick 方法中设置为 Visible 和 Gone，View 从不显示 Visible

> ID：13090630
> 
> 赞同：3
> 
> 时间：2012-10-26T16:15:59.643
> 
> 标签：android, view, visible

嗨 stackoverflow 社区，

我在 droid 4.0.3 设备上使用 Android API 14。

在 Activity 中，我设置了一个 Button 以在执行操作时在页面上显示 TextView。执行操作后，我希望 TextView 再次消失。

```
button1.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        // make textview visible 
        textView1.setVisibility(View.VISIBLE);      

        // perform action
        System.out.println("perform action");

        // make textview disappear
        textView1.setVisibility(View.GONE);
    }
}); 
```

如果我删除使 TextView 消失的部分，TextView 会按预期出现在窗口顶部，但我希望 TextView 出现 1-2 秒然后消失。

起初我想知道我是否需要做更多的工作而不仅仅是执行一个小动作，所以我尝试添加一个等待并打印出文本，但都没有奏效。等待总是调用异常，结束活动，当我打印出数字 1-1000 时，视图仍然永久消失。

有没有更好的方法让 TextView 在 OnClick 动作上出现和消失？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:19:24.073

这些命令是背靠背执行的。所以从技术上讲，它可能是可见的，但只有一两毫秒。您需要区分何时使视图可见以及何时隐藏它......

* * *

您说您希望 TextView 在某种意义上“闪烁”，所以让我们使用作为每个 View 的一部分的 Handler 来调用 Runnable。这个 Runnable 稍后会简单地隐藏 TextView：

1）设置类变量：

```
Runnable hide = new Runnable() {
    @Override
    public void run() {
        textView1.setVisibility(View.GONE);
    }
}; 
```

2）稍后调用runnable：

```
button1.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        // make textview visible for 1 second (1000 milliseconds)
        textView1.setVisibility(View.VISIBLE);      
        textView1.postDelayed(hide, 1000);
    }
}); 
```

（Handler 和 Runnable 不会阻塞 UI 线程。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:31:22.703

这是处理程序的示例（我还没有编译它！）

```
Handler handler = new Handler();

button1.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v) {
        // make textview visible 
        textView1.setVisibility(View.VISIBLE);      

        // perform action
        System.out.println("perform action");

        // make textview disappear
        handler.postDelayed(new Runnable() {
          @Override
          public void run() {
              textView1.setVisibility(View.GONE);
         }} , 2000);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:20:42.247

使用动画

```
public class MainActivity extends Activity {
     TextView txt;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button b = (Button) findViewById(R.id.btn_animation);

        txt = (TextView) findViewById(R.id.textviewtest);

        b.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(final View v) {
                txt.clearAnimation();

                Animation fadeIn = new AlphaAnimation(0, 1);
                fadeIn.setInterpolator(new DecelerateInterpolator()); //add this
                fadeIn.setDuration(1000);

                Animation fadeOut = new AlphaAnimation(1, 0);
                fadeOut.setInterpolator(new AccelerateInterpolator()); //and this
                fadeOut.setStartOffset(1000);
                fadeOut.setDuration(1000);

                AnimationSet animation = new AnimationSet(false); //change to false
                animation.addAnimation(fadeIn);
                animation.addAnimation(fadeOut);

                animation.setAnimationListener( new AnimationListener() {

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        // TODO Auto-generated method stub
                        txt.setVisibility(View.GONE);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationStart(Animation animation) {
                        // TODO Auto-generated method stub
                        txt.setVisibility(View.VISIBLE);
                    }

                });
                txt.setAnimation(animation);
            }
        });
    } 
```

活动主.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/btn_animation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Animation" />

<TextView
    android:id="@+id/textviewtest"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="gone"
    android:text="HelloWorld" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:22:06.777

您应该使用处理程序来运行将 Visibility 设置为 GONE 的代码。也许[使用 postDelayed 在特定时间运行任务](https://stackoverflow.com/questions/6728861/running-a-task-at-a-specific-time-using-postdelayed)可能会有所帮助。

# python - 诊断python内存使用情况

> ID：13090635
> 
> 赞同：0
> 
> 时间：2012-10-26T16:16:17.490
> 
> 标签：python, linux

我正在将一个项目从 python 2.5 迁移到 python 2.7，一个进程使用的内存量大约是以前的 4 倍。我使用 pmap 来查看进程，我看到一个部分似乎使用了最多的内存：

```
10011000 245208K rwx--    [ anon ] 
```

首先，从网上看，anon部分是malloc分配的？有什么方法可以让我获得更具体的信息，说明为什么与 python 2.5 相比分配了这么多内存？我应该注意，它不仅仅是 python 版本的变化，它在嵌入式系统上运行，我已经升级了所有的库和用户空间工具，但内核版本是相同的。不确定这是否会产生影响。

# cryptography - 在我的应用程序中使用加密技术会限制其可用性吗？

> ID：13090638
> 
> 赞同：2
> 
> 时间：2012-10-26T16:16:35.607
> 
> 标签：cryptography, windows-store-apps

我看到[Windows 应用商店提交过程](http://www.sharpgis.net/post/2012/09/08/The-Windows-Store-Submission-Process.aspx)询问您的应用是否使用加密。我正计划这样做。他们为什么要问这个？加密是否会限制应用程序可用的国家/地区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:21:36.850

[Microsoft 在此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh694069.aspx)提供有关此问题的信息。结果似乎是您可以将其放在商店中，但您需要通过[ECCN](http://www.bis.doc.gov/licensing/do_i_needaneccn.html)（出口商品分类号）向他们提供有关其使用的加密货币的信息。然后他们自动处理这些问题（即，他们不会非法出售）。你应该没问题（加密货币出口禁令已经解除或很长时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:32:25.243

密码学在导入时存在问题。许多国家都适用[瓦森纳安排](http://en.wikipedia.org/wiki/Wassenaar_Arrangement)，该安排限制进口密码学以保护通信

第 5 类 - 第 2 部分 [http://www.wassenaar.org/controllists/index.html](http://www.wassenaar.org/controllists/index.html)

还有这篇文章：[密码学的进口限制 - 维基百科](http://en.wikipedia.org/wiki/Restrictions_on_the_import_of_cryptography)

# winforms - 如何在 Windows 窗体中的所有按钮上应用相同的样式

> ID：13090639
> 
> 赞同：2
> 
> 时间：2012-10-26T16:16:47.323
> 
> 标签：winforms, windows-forms-designer

我的 Windows 窗体应用程序中有多个按钮，我想像这样应用一些`btnhover`样式

```
private void button1_MouseEnter(object sender, EventArgs e) {
  button1.UseVisualStyleBackColor = false;
  button1.BackColor = Color.GhostWhite;
}
private void button1_MouseLeave(object sender, EventArgs e) {
  button1.UseVisualStyleBackColor = true;
} 
```

我想把这种风格放在一个地方，我希望它自动应用于我表单中的所有按钮。我该怎么做，请帮助我并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:27:30.087

如果你真的想把它放在一个地方并拥有自动样式的表单，那将是它自己的类：

```
class ButtonStyledForm : Form
{
    protected override void OnControlAdded(ControlEventArgs e)
    {
        base.OnControlAdded(e);

        if (e.Control.GetType() == typeof(Button))
        {
            e.Control.MouseEnter += button_MouseEnter;
            e.Control.MouseLeave += button_MouseLeave;
        }
    }    

    protected override void OnControlRemoved(ControlEventArgs e)
    {
        base.OnControlRemoved(e);

        if (e.Control.GetType() == typeof(Button))
        {
            e.Control.MouseEnter -= button_MouseEnter;
            e.Control.MouseLeave -= button_MouseLeave;
        }
    }

    private void button_MouseEnter(object sender, EventArgs e) {
        var c = (Button)sender;
        c.UseVisualStyleBackColor = false;
        c.BackColor = Color.GhostWhite;
    }

    private void button_MouseLeave(object sender, EventArgs e) {
        var c = (Button)sender;
        c.UseVisualStyleBackColor = true;
    }
} 
```

然后从这个类继承而不是`Form`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:22:15.553

这不会*自动*将其应用于添加到表单的新按钮，但会将其应用于所有现有按钮，因为我怀疑这是您真正想要做的：

```
partial class MyForm
{
    foreach(var b in this.Controls.OfType<Button>())
    {
        b.MouseEnter += button1_MouseEnter;
        b.MouseLeave += button1_MouseLeave;
    }
} 
```

请注意，您必须将事件处理程序更改为使用`sender`而不是直接使用`button1`，例如：

```
private void button1_MouseEnter(object sender, EventArgs e) {
    var c = (Button)sender;
    c.UseVisualStyleBackColor = false;
    c.BackColor = Color.GhostWhite;
}

private void button1_MouseLeave(object sender, EventArgs e) {
    var c = (Button)sender;
    c.UseVisualStyleBackColor = true;
} 
```

# c - C指针未设置

> ID：13090646
> 
> 赞同：13
> 
> 时间：2012-10-26T16:17:11.020
> 
> 标签：c, operating-system, paging

我正在创建一种玩具操作系统，并且正在尝试设置分页。引导加载程序首先将内核映射到上半部分，然后我尝试设置一个新的页面目录。

我有一些这样定义的结构：

```
typedef struct pd_entry pd_entry_t;
struct pd_entry
{
    uint32_t present    : 1;
    uint32_t writable   : 1;
    uint32_t user       : 1;
    uint32_t writethru  : 1;
    uint32_t nocache    : 1;
    uint32_t accessed   : 1;
    uint32_t _reserved  : 1;
    uint32_t size_4mb   : 1;
    uint32_t global     : 1;
    uint32_t available  : 3;
    uint32_t frame      : 20;
}__attribute__((packed));

typedef struct pt_entry pt_entry_t;
struct pt_entry
{
    uint32_t present    : 1;
    uint32_t writable   : 1;
    uint32_t user       : 1;
    uint32_t writethru  : 1;
    uint32_t nocache    : 1;
    uint32_t accessed   : 1;
    uint32_t dirty      : 1;
    uint32_t attr_index : 1;
    uint32_t global     : 1;
    uint32_t available  : 3;
    uint32_t frame      : 20;
} __attribute__((packed));

typedef struct page_dir page_dir_t;
struct page_dir
{
    pd_entry_t entries[TABLES_PER_DIR];
};

typedef struct page_table page_table_t;
struct page_table
{
    pt_entry_t entries[PAGES_PER_TABLE];
}; 
```

我使用这段代码来设置条目：

```
// I store the page directory pointer in the last directory entry
uint32_t map_quick(uint32_t addr)
{
    GET_PTE(QUICKMAP_ADDR)->frame = PAGE_ALIGN(addr) >> 12; // QUICKMAP_ADDR is 0xC0000000
    paging_flush_tlb_entry(QUICKMAP_ADDR); // asm volatile ("invlpg (%0)" :: "r"(addr));
    return QUICKMAP_ADDR;
}

pd_entry_t* get_dir_entry(page_dir_t *dir, uint32_t virt)
{
    dir = (page_dir_t *)map_quick((uint32_t)dir);
    return &dir->entries[PAGE_DIR_INDEX(virt)];
}

void set_dir_entry(page_dir_t *dir, uint32_t virt, page_table_t *pt)
{
    pd_entry_t *pde = get_dir_entry(dir, virt);

    pde->present   = 1;
    pde->writable  = 1;
    pde->user      = 0;
    pde->writethru = 0;
    pde->nocache   = 0;
    pde->accessed  = 0;
    pde->size_4mb  = 0;
    pde->global    = 0;
    pde->frame     = (uint32_t)pt >> 12;
    kprintf("0x%x:0x%x ", (uint32_t)pt >> 12, pde->frame); // Just a 'printf' clone
} 
```

但是，当`set_dir_entry`被调用时，`kprintf`打印`0xA0:0x0`. 我不明白为什么`pde->frame`没有设置？我没有收到任何页面错误或异常，目录条目总是等于`0`无论我将其设置为什么。

编辑：这是代码`kprintf`：

```
size_t kprintf(const char *str, ...)
{
    if (!str) return 0;

    va_list args;
    va_start(args, str);

    unsigned int i;
    for (i = 0; i < strlen(str); i++)
    {
        if (str[i] == '%')
        {
            switch (str[i+1])
            {
                case 'c':
                {
                    char c = va_arg(args, char);
                    kputc(c);
                    i++;
                    break;
                }
                case 's':
                {
                    char *s = va_arg(args, char*);
                    kputs(s);
                    i++;
                    break;
                }
                case 'd':
                case 'i':
                {
                    int c = va_arg(args, int);
                    char s[32] = {0};
                    itoa_s(c, s, 10);
                    kputs(s);
                    i++;
                    break;
                }
                case 'X':
                case 'x':
                {
                    int c = va_arg(args, int);
                    char s[32] = {0};
                    itoa_s(c, s, 16);
                    kputs(s);
                    i++;
                    break;
                }
            }
        }
        else
        {
            kputc(str[i]);
        }
    }

    va_end(args);
    return (size_t)i;
}

void kputc(unsigned char c)
{
    uint16_t attr = color << 8;

    if (c == 0x8 && posx)
        posx--;
    else if (c == 0x9)
        posx = (posx + 8) & ~(8-1);
    else if (c == '\r')
        posx = 0;
    else if (c == '\n')
    {
        posx = 0;
        posy++;
    }
    else if (c >= ' ')
    {
        uint16_t *loc = videomem + (posy*80 + posx);
        *loc = c | attr;
        posx++;
    }

    if (posx >= 80)
    {
        posx = 0;
        posy++;
    }
    if (posy >= 25)
        kscroll();
}

void kputs(const char *str)
{
    if (!str) return;

    unsigned int i;
    for (i = 0; i < strlen(str); i++)
        kputc(str[i]);
} 
```

编辑 2：我不知道这是否有用，而且我真的不喜欢只是转储大量代码供人们阅读，但这是整个分页代码。不属于此代码的所有函数调用都可以独立运行。

虚拟.h

```
#ifndef _VIRTUAL_H_
#define _VIRTUAL_H_

#include <x86/paging.h>
#include <stdbool.h>

#define VIRTUAL_TO_PHYSICAL(x) ((uint32_t)(x) - 0xC0001000 + 0x00101000)
#define PHYSICAL_TO_VIRTUAL(x) ((uint32_t)(x) + 0xC0001000 - 0x00101000)

#define KERNEL_CODE_VADDRESS 0xC0001000
#define KERNEL_HEAP_VADDRESS 0xD0000000

void virtual_init();

void virtual_create_dir(page_dir_t **dir);
void virtual_destroy_dir(page_dir_t *dir);
void virtual_set_dir(page_dir_t *dir);

void virtual_map_page(page_dir_t *dir, uint32_t phys, uint32_t virt, bool present);
void virtual_map_kernel(page_dir_t *dir);

#endif 
```

虚拟的.c

```
#include <system/memory/physical.h>
#include <x86/idt.h>
#include <utils/kernio.h>
#include <utils/kernpanic.h>
#include <string.h>
#include "virtual.h"

#define QUICKMAP_ADDR 0xC0000000

#define GET_PDE(x) ((pd_entry_t *)(0xFFFFF000 + ((x) >> 22) * 4))
#define GET_PTE(x) ((pt_entry_t *)(0xFFC00000 + ((x) >> 12) * 4))

extern uint32_t __kernel_start, __kernel_end;

page_dir_t *kern_dir;

pd_entry_t* get_dir_entry(page_dir_t *dir, uint32_t virt);
void set_dir_entry(page_dir_t *dir, uint32_t virt, page_table_t *pt);
pt_entry_t* get_table_entry(page_dir_t *dir, uint32_t virt);
void set_table_entry(page_dir_t *dir, uint32_t phys, uint32_t virt, bool present);

uint32_t map_quick(uint32_t addr);

void interrupt page_fault(registers_t *regs);

void virtual_init()
{
    int_enable(14, page_fault);

    virtual_create_dir(&kern_dir);

    uint32_t phys, virt;
    for (phys = 0; phys < 0x400000; phys += PAGE_SIZE)
        virtual_map_page(kern_dir, phys, phys, true);

    phys = VIRTUAL_TO_PHYSICAL(&__kernel_start);
    virt = (uint32_t)&__kernel_start;

    uint32_t end = VIRTUAL_TO_PHYSICAL(&__kernel_end) + physical_get_bitmap_size();
    for (; phys < end; phys += PAGE_SIZE, virt += PAGE_SIZE)
        virtual_map_page(kern_dir, phys, virt, true);

    virtual_map_page(kern_dir, 0x0, QUICKMAP_ADDR, true);

    virtual_set_dir(kern_dir);
}

void virtual_create_dir(page_dir_t **dir)
{
    *dir = (page_dir_t *)physical_alloc_block();
    page_dir_t *virt_dir = (page_dir_t *)map_quick((uint32_t)*dir);
    memset(virt_dir, 0, sizeof(page_dir_t));

    pd_entry_t *last_pde = &virt_dir->entries[TABLES_PER_DIR - 1];
    last_pde->present = 1;
    last_pde->writable = 1;
    last_pde->frame = (uint32_t)*dir >> 12;
}

void virtual_destroy_dir(page_dir_t *dir)
{
    page_dir_t *virt_dir = (page_dir_t *)map_quick((uint32_t)dir);

    unsigned int i, j;
    for (i = 1; i < KERNEL_CODE_VADDRESS / (PAGE_SIZE * TABLES_PER_DIR); i++)
    {
        pd_entry_t *pde = &virt_dir->entries[i];
        page_table_t *table = (page_table_t *)(pde->frame << 12);

        if (table != NULL && pde->present)
        {
            page_table_t *virt_table = (page_table_t *)map_quick((uint32_t)table);
            for (j = 0; j < PAGES_PER_TABLE; j++)
            {
                pt_entry_t *pte = &virt_table->entries[j];
                uint32_t phys = pte->frame << 12;
                if (phys != NULL && pte->present)
                    physical_free_block((void *)phys);
            }

            physical_free_block(table);
        }
    }

    physical_free_block(dir);
}

void virtual_set_dir(page_dir_t *dir)
{
    paging_load_pdbr((uint32_t)dir);
    paging_enable(true);
}

void virtual_map_page(page_dir_t *dir, uint32_t phys, uint32_t virt, bool present)
{
    set_table_entry(dir, phys, virt, present);
}

void virtual_map_kernel(page_dir_t *dir)
{
    pd_entry_t *pde;

    pde = get_dir_entry(kern_dir, 0x0);
    set_dir_entry(dir, 0x0, (page_table_t *)(pde->frame << 12));

    pde = get_dir_entry(kern_dir, KERNEL_CODE_VADDRESS);
    set_dir_entry(dir, KERNEL_CODE_VADDRESS, (page_table_t *)(pde->frame << 12));
}

pd_entry_t* get_dir_entry(page_dir_t *dir, uint32_t virt)
{
    dir = (page_dir_t *)map_quick((uint32_t)dir);
    pd_entry_t *e = &dir->entries[PAGE_DIR_INDEX(virt)];
    return &dir->entries[PAGE_DIR_INDEX(virt)];
}

void set_dir_entry(page_dir_t *dir, uint32_t virt, page_table_t *pt)
{
    pd_entry_t *pde = get_dir_entry(dir, virt);

    pde->present = 1;
    pde->writable = 1;
    pde->user = 0;
    pde->writethru = 0;
    pde->nocache = 0;
    pde->accessed = 0;
    pde->size_4mb = 0;
    pde->global = 0;
    pde->frame = (uint32_t)pt >> 12;
}

pt_entry_t* get_table_entry(page_dir_t *dir, uint32_t virt)
{
    pd_entry_t *pde = get_dir_entry(dir, virt);
    page_table_t *table = (page_table_t *)(pde->frame << 12);

    if (table == NULL)
    {
        table = (page_table_t *)physical_alloc_block();
        set_dir_entry(dir, virt, table);

        unsigned int i;
        for (i = 0; i < PAGES_PER_TABLE; i++)
            set_table_entry(dir, 0x0, virt + (i * PAGE_SIZE), false);
    }

    table = (page_table_t *)map_quick((uint32_t)table);
    return (pt_entry_t *)&table->entries[PAGE_TABLE_INDEX(virt)];
}

void set_table_entry(page_dir_t *dir, uint32_t phys, uint32_t virt, bool present)
{
    pt_entry_t *pte = get_table_entry(dir, PAGE_ALIGN(virt));

    pte->present = present;
    pte->writable = 1;
    pte->user = 0;
    pte->writethru = 0;
    pte->nocache = 0;
    pte->dirty = 0;
    pte->attr_index = 0;
    pte->global = 0;
    pte->frame = PAGE_ALIGN(phys) >> 12;
}

uint32_t map_quick(uint32_t addr)
{
    GET_PTE(QUICKMAP_ADDR)->frame = PAGE_ALIGN(addr) >> 12;
    paging_flush_tlb_entry(QUICKMAP_ADDR);
    return QUICKMAP_ADDR;
}

void interrupt page_fault(registers_t *regs)
{
    uint32_t virt;
    asm volatile ("movl %%cr2, %0" : "=r" (virt));
    kprintf("\nError accessing address 0x%x", virt);
    kpanic("Page Fault");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T10:32:49.450

请参阅此问题重新 引用：[`__attribute__(packed)`](https://stackoverflow.com/questions/8568432/is-gccs-attribute-packed-pragma-pack-unsafe)

`... __attribute__((packed)) is potentially unsafe on some systems ... There have also been systems where a misaligned access quietly ignores the low-order bits of the address, causing it to access the wrong chunk of memory.`

尝试使用[`pragma (pack)`](http://www.cplusplus.com/forum/general/14659/)( [and here](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/topic/com.ibm.vacpp7a.doc/compiler/ref/rnpgpack.htm) ) 代替：

```
#pragma pack(1) // exact fit - no padding; placed at top of pragma pack stack
    struct pd_entry
    {
        ...
    };
    struct pt_entry
    {
        ...
    };
#pragma pack(pop) //restore previous pragma pack stack 
```

[编辑]
根据您对使用 a 的评论`uint32_t`，如果您想保留访问各个位的能力，您可以使结构成为联合的一部分`uint31_t`：

```
#pragma pack(1) // exact fit - no padding; placed at top of pragma pack stack
union
{
    uint32_t ui32;
    struct pd_entry
    {
        ...
    };
 }
    ...
#pragma pack(pop) //restore previous pragma pack stack 
```

并使用`or`and`and`来`uint32_t`设置，并使用结构的成员检查值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T09:49:41.263

pt 是一个指针，这意味着它保存了它所指向的 page_table_t 变量的地址。为什么要将地址右移 12 位？这是故意的吗？

# c++ - 对强制转换枚举的引用返回错误值

> ID：13090647
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:17:18.117
> 
> 标签：c++, visual-studio-2010

考虑以下代码：

```
enum TestEnum
{
   TEST_ENUM_5 = 5
};

class Test
{
public:
   Test() { mType = TEST_ENUM_5; mVal = 1; }
   TestEnum& type() { return (TestEnum&)mType; }

private:
   uint16_t mType;
   uint16_t mVal;
};

int main( int argc, const char* argv[] )
{
   Test test;
   assert( test.type() == TEST_ENUM_5 );
} 
```

该程序使用 MSVC 2010 编译良好 - 没有错误或警告。但断言失败 - 返回的值不是 5，而是 0x00010005。

换句话说，返回的枚举值被解释为一个 4 字节的值 - 包括以下短的内容。我可以看到编译器为什么要这样做，引用是对 mType 地址的引用，并且正在加载接下来的 4 个字节的寄存器。

但这对编译器来说是正确的行为吗？

它不应该知道 TestEnum& 是对 16 位数量的引用吗？或者如果它不想这样做，它不应该发出警告吗？

除此之外，我想做的是将一个简短的枚举存储到一个 16 位值中，并具有返回对它的引用的方法，该方法被键入为 typedef。从逻辑上讲，我想要的是一个允许我执行以下操作的界面：

```
test.type() = TEST_ENUM_5; 
```

并让它在编译时知道只有来自 TestEnum 的值是预期的。就此而言，我希望该类的用户在阅读它时知道此处需要 TestEnum 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:32:23.980

你说枚举必须是两个字节，并且返回类型`type()`必须是枚举引用。

C++11 有一个特性，你可以指定枚举的底层类型：

```
enum TestEnum : unsigned short
{
   TEST_ENUM_5 = 5
};

   TestEnum& type() { return mType; }
private:
   TestEnum mType; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:24:41.263

好吧，如果您需要这样的用法`test.type() = TEST_ENUM_5;`，只需正确实现它：

```
 Test() { mType = TEST_ENUM_5; mVal = 1; }
   TestEnum& type() { return mType; }

private:
   TestEnum mType; 
```

**更新：** “2 字节”版本：

```
 Test() { mType = TEST_ENUM_5; mVal = 1; }
   uint16_t& type() { return mType; }

private:
   uint16_t mType; 
```

# .net - Visual Studio 2010 .Net 启动条件

> ID：13090651
> 
> 赞同：0
> 
> 时间：2012-10-26T16:17:35.713
> 
> 标签：.net, visual-studio-2010, outlook, add-in

我的设置在 Visual Studio 中的 .Net Launch Condition 版本设置为 .NET Framework 4 Client Profile。但是当我编译我的 .msi 并在 windows 7 x64 上运行它时，它会抱怨“无法加载 Microsoft Office 解决方案，因为未安装兼容版本的 .Net Framework。”

解决方案是为 MS Outlook 2010 x64 创建一个插件。

我已经在机器上安装了 .NET Framework 4 客户端配置文件，但它仍然抱怨它。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:25:11.587

Applciation 部署部分中有对完整版本 4 的引用。更正了它，它没有安装好。

# html - 为什么这个png有白色边框

> ID：13090652
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:17:35.417
> 
> 标签：html, css, png

这张 png-24 图像看起来它的颜色完全延伸到其 302 × 354 尺寸的边缘： ![PNG](../Images/20d1c39cc4aead29d4eda5aef2a0112a.png) 但是，当我将其放入 td 并通过电子邮件发送时，我会得到如下信息： ![电子邮件中的png](../Images/2e4b4b5d617f650f1994204fd7fe35d0.png)

html表：

```
 <td rowspan="3" style="vertical-align:top; border:1px solid #e6e6e6; background-color:#f0f1f2;">
        <img src="email_img.png" height="177px" alt="Sample image" />
    </td> 
```

屏幕截图来自 gmail。虽然没有看过其他电子邮件客户端。知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:21:56.183

这是因为每个电子邮件客户端都有自己的渲染引擎，即 Outlook 与其他桌面电子邮件客户端。为了解决这个问题，您需要进行大量跨客户端测试，并且只使用他们都“喜欢”的内联样式

或者

如果您在 ie gmail 中看到这一点，那么您可能有 gmails 样式表级联并影响您的 DOM 元素。为了解决这个问题，您需要为表格定义一个样式（内联，因为它是电子邮件或引用服务器上的样式表，尽管基于 Web 的客户端可能会剥离正文之外的所有内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:36:56.383

```
 <td rowspan="3" style="vertical-align:top; border:1px solid #e6e6e6; background-color:#f0f1f2;" cellpadding="0">
    <img src="email_img.png" height="177px" alt="Sample image" />
</td> 
```

尝试调整单元格填充。您确实也想在该图像上设置一个高度，在我看来，电子邮件是一个巨大的痛苦，但是如果您指定所有内容并且不将任何内容留给各个 HTML 渲染引擎，您会发现麻烦少得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:21:32.707

您需要对`img`.

将 CSS 设置为`display:block`或`vertical-align:top`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:19:53.950

对于电子邮件，请始终使用`<img src="[img url]"height="[img height]" width="[img width]" style="display:inline-block;" border="0">`没有那个，某些电子邮件客户端会添加边框

# css - 创建特殊的 CSS 形状

> ID：13090654
> 
> 赞同：0
> 
> 时间：2012-10-26T16:17:38.707
> 
> 标签：css, shape, css-shapes

我想为我的标题创建一个特殊的 CSS 形状。必须看起来像这个网站[http://nicolasgallagher.com/pure-css-speech-bubbles/demo/](http://nicolasgallagher.com/pure-css-speech-bubbles/demo/)上的第一个语音气泡，但是，箭头必须是半圈，半圈必须始终在中间。这是我的标题，所以即使形状是浏览器长度的 100%，圆圈也必须保持在浏览器的中间，当我调整浏览器窗口大小时也是如此。

所以我的问题是，这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:14:49.307

Use `border-radius: 50%` for the semi-circle, then set the `bottom` to 1/2 of the circle's height, `left: 50%` to center it mostly, and then `margin-left` to negative 1/2 the width:

```
.half-circle {
  background: orange;
  padding: 1em;
  position: relative;
  text-align: center;
}
.half-circle::after {
  background: orange;
  border-radius: 50%;
  bottom: -10px;
  content: '';
  display: block;
  height: 20px;
  left: 50%;
  margin-left: -10px;
  position: absolute;
  width: 20px;
}​ 
```

[Here's the fiddle](http://jsfiddle.net/scrimothy/a2gPm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:36:56.893

代码就在页面上。一种叫做椭圆形语音：

HTML：

```
 <div class="oval-speech">test</div> 
```

CSS

```
.oval-speech {
position:relative;
width:270px;
padding:50px 40px;
margin:1em auto 50px;
text-align:center;
color:#fff;
background:#5a8f00;
/* css3 */
background:-webkit-gradient(linear, 0 0, 0 100%, from(#b8db29), to(#5a8f00));
background:-moz-linear-gradient(#b8db29, #5a8f00);
background:-o-linear-gradient(#b8db29, #5a8f00);
background:linear-gradient(#b8db29, #5a8f00);
/*
NOTES:
-webkit-border-radius:220px 120px; // produces oval in safari 4 and chrome 4
-webkit-border-radius:220px / 120px; // produces oval in chrome 4 (again!) but not supported in safari 4
Not correct application of the current spec, therefore, using longhand to avoid future problems with webkit corrects this

-webkit-border-top-left-radius:220px 120px;
-webkit-border-top-right-radius:220px 120px;
-webkit-border-bottom-right-radius:220px 120px;
-webkit-border-bottom-left-radius:220px 120px;
-moz-border-radius:220px / 120px;
border-radius:220px / 120px;*/
}

.oval-speech p {font-size:1.25em;}

/* creates part of the curve */
.oval-speech:before {
content:"";
position:absolute;
z-index:-1;
bottom:-30px;
right:50%;
height:30px;
border-right:60px solid #5a8f00;
background:#5a8f00; /* need this for webkit - bug in handling of border-radius */
/* css3 */
-webkit-border-bottom-right-radius:80px 50px;
-moz-border-radius-bottomright:80px 50px;
border-bottom-right-radius:80px 50px;
/* using translate to avoid undesired appearance in CSS2.1-capabable but CSS3-incapable browsers */
-webkit-transform:translate(0, -2px);
-moz-transform:translate(0, -2px);
-ms-transform:translate(0, -2px);
-o-transform:translate(0, -2px);
transform:translate(0, -2px);
}

/* creates part of the curved pointy bit */
.oval-speech:after {
content:"";
position:absolute;
z-index:-1;
bottom:-30px;
right:50%;
width:60px;
height:30px;
background:#fff;
/* css3 */
-webkit-border-bottom-right-radius:40px 50px;
-moz-border-radius-bottomright:40px 50px;
border-bottom-right-radius:40px 50px;
/* using translate to avoid undesired appearance in CSS2.1-capabable but CSS3-incapable browsers */
-webkit-transform:translate(-30px, -2px);
-moz-transform:translate(-30px, -2px);
-ms-transform:translate(-30px, -2px);
-o-transform:translate(-30px, -2px);
transform:translate(-30px, -2px);
} 
```

# php - php mysql查询没有在for循环中更新数据库

> ID：13090655
> 
> 赞同：1
> 
> 时间：2012-10-26T16:18:03.480
> 
> 标签：php, mysql, for-loop, screen-scraping

我正在屏幕上抓取一个页面，其中包含我想在 mysql 数据库中写入的数据。

```
$url = "http://example.com/index.jsp";

$raw = file_get_contents($url);

$newlines = array("\t","\n","\r","\x20\x20","\0","\x0B");

$content = str_replace($newlines, "", $raw);

$start = strpos($content,'<table border="0" cellspacing="0" cellpadding="0" width="100%">"');

$end = strpos($content,'</table>',$start) + 8;

$table = substr($content,$start,$end-$start); 
```

数据处理效果很好，所有的 html 标签、空格和 html 特殊字符等都已从数据中删除。在处理页面中回显时，这些值看起来很好。

```
function cleanSiteVal($siteval){
    $repl = array('value=', '"');
    $siteval = strip_tags($siteval);
    $siteval = str_replace($repl, '', $siteval);
    $siteval = html_entity_decode($siteval);

    return $siteval;
}

foreach ($rows[0] as $row){

    if ((strpos($row,'<td align')==true)){
                //echo $row;
                preg_match_all( '@value="([^"]*)"@', $row, $cells ) ;             
        $fln = cleanSiteVal($cells[0][0]);
        $flf = cleanSiteVal($cells[0][1]);
        $sch = cleanSiteVal($cells[0][2]);
        $est = cleanSiteVal($cells[0][3]);
        $trm = cleanSiteVal($cells[0][4]);
        $sts = cleanSiteVal($cells[0][5]);
        echo 'flnr: '.$fln.', from: '.$flf.', scheduled: '.$sch.', estimated: '.$est.', terminal: '.$trm.', status: '.$sts.'<br />';

        $fliarr[] = array(
                    0 => $fln,
                    1 => $flf,
                    2 => $sch,
                    3 => $est,
                    4 => $trm,
                    5 => $sts 
                    );
    }
} 
```

我“回显”了我从这个处理过的数据中构建的查询，并且在 phpmyadmin 中执行的这个查询工作正常，尽管我在我的 for 循环中执行的查询不是。

```
for ($i = 0; $i < count($fliarr); $i++) {

    $nrfli = $fliarr[$i][0];

    $stat = $fliarr[$i][5];
    $term = $fliarr[$i][4];
    if ($fliarr[$i][3]!='' || !empty($fliarr[$i][3])) { $abr = $today.' '.$fliarr[$i][3].':00'; } else { $abr = $today.' '.$fliarr[$i][2].':00'; }

    //echo 'estimated/sched. time: '.$abr.', flugnr: '.$fliarr[$i][0].', status: '.$stat.'<br />';

    $sql = "UPDATE `some_table` SET `val1`='$stat', `val2`='$term', `val3`='$abr' WHERE (`datetime_field` BETWEEN '$sfrom' AND '$till') AND `val4`='$nrfli'";
    echo $sql.'<br />';
    $res = mysql_query($sql);

    if(!$res) {
        echo mysql_error().' Fehler bei der Update Abfrage';
    } else {
        //echo 'Ok, Update Buchungen'.$nrfli.'<br />';
    }
} 
```

如何管理此查询以在我的 for 循环中工作？我知道，这是不好的做法，我也尝试使用 PDO 层并准备我的查询，但这也不起作用。

同样，从 for 循环中的 echo 复制的查询在 phpmyadmin 中工作。为什么不在我的 for 循环中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T12:07:04.137

原来是 的问题 空白。html_entity_decode 并没有因为这个解释而摆脱它：

> 你可能想知道为什么 trim(html_entity_decode(' ')); 不会将字符串缩减为空字符串，这是因为 '& nbsp;' entity 不是 ASCII 码 32（由 trim() 去除），而是默认 ISO 8859-1 编码中的 ASCII 码 160 (0xa0)。

*来源：[php docs htmlentitydecode](http://www.php.net/manual/en/function.html-entity-decode.php)*

这是我为找出答案所做的：

1.  我制作了一个带有 doctype 声明和 charset 元标记的完整 html 页面。
2.  我选择 mysql_encoding 为 utf-8
3.  我在有效的 html 段落中回显了查询 这表明它们是查询值空格内的奇数字符
4.  我`return utf8_encode($siteval);`在 cleanSiteVal 函数中添加了
5.  我添加了`$siteval = str_replace('&nbsp;', ' ', $siteval);`

所有这些步骤最终清理了来自抓取站点的值，并触发了我的循环中的查询。欢呼！！！！这对我来说是一个很大的教训。我将始终为我的连接设置 mysql_encoding，这样可以在动态生成的 html 代码中围绕回显值节省大量 utf8_encode。它显示了 html & nbsp ; 数据中留下的空白。

所以最后这里是完整的 cleanSiteVal() 函数：

```
 function cleanSiteVal($siteval){
    $repl = array('value=', '"', '&nbsp;');
    $siteval = strip_tags($siteval);
    $siteval = str_replace($repl, '', $siteval);
    $siteval = html_entity_decode($siteval);
    $siteval = str_replace('&auml;', 'ä', $siteval);
    $siteval = mysql_real_escape_string($siteval);
    return utf8_encode($siteval);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:39:37.447

你的 sql 中的变量在引号之间，试试这个

```
 $sql = "UPDATE some_table SET val1='".$stat."', val2='".$term."', val3='".$abr."' WHERE (`datetime_field` BETWEEN '".$sfrom."' AND '".$till."') AND val4='".$nrfli."'"; 
```

# expressionengine - 在 Zoo 触发器列表中输出自定义类别字段

> ID：13090660
> 
> 赞同：3
> 
> 时间：2012-10-26T16:18:34.543
> 
> 标签：expressionengine

我有一个带有类别列表页面的基于结构的网站。例如：[http](http://www.mysite.com/products/category/tools/hammers) ://www.mysite.com/products/category/tools/hammers 。自然，我使用[Zoo Triggers](http://devot-ee.com/add-ons/zoo-triggers)来输出条目列表。

我的问题是每个类别列表页面都需要唯一的 SEO 元数据，因此我为标题、关键字和描述设置了自定义字段。不幸的是，Zoo Triggers 没有用于自定义类别字段的变量，并且该`{exp:channel:category_heading}`标签不适用于 Zoo Triggers URL。

我以为我可以使用神奇的[GWCode 类别插件](http://devot-ee.com/add-ons/gwcode-categories)，但我不知道如何仅显示当前类别的数据。

有人对我如何做到这一点有任何建议吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:52:41.113

这可能需要自定义查询。由于 EE 将其核心和自定义类别数据存储在单独的表中，这对于本机查询模块来说有点笨拙，所以我倾向于使用 Rob Sanchez 的[ActiveRecord 插件](http://devot-ee.com/add-ons/activerecord)。我没有对此进行广泛测试，但以下代码段应该在球场上：

```
{exp:activerecord
    select="d.field_id_1 as seo_field_one, d.field_id_2 as seo_field_two"
    from="category_field_data as d"
    join="categories as c"
    on="c.cat_id = d.cat_id"
    where[a]="c.cat_url_title = '{triggers:last_segment}'"
    where[b]="c.group_id = '1'"
}
    <p>Field one: {seo_field_one}</p>
    <p>Field two: {seo_field_two}</p>
{/exp:activerecord} 
```

如果你对 CodeIgniter 的 Active Record 类不是特别熟悉，可以这样做：

*   根据列名选择您的自定义类别字段，例如`field_id_1`，并创建在您的模板中使用的别名，例如`{seo_field_one}`。
*   `categories`在和表之间创建连接，`category_field_data`以便我们可以根据类别表中的值检索 field_data 表中的数据。
*   将结果集限制为 URL 标题与最后一个 URL 段匹配且属于类别组 1 的类别。

为了在您的模板中实现这一点，您需要调整 select 语句，以便它从正确的列中检索数据并调整它`group_id`以匹配您的类别组。我假设您想要检索最后一个 URL 段的数据，但如果需要，您也可以轻松调整它。

# exc-bad-access - 带有触摸事件的 Objective C 块和 self 给出 BAD_ACCESS

> ID：13090662
> 
> 赞同：1
> 
> 时间：2012-10-26T16:18:54.760
> 
> 标签：exc-bad-access, objective-c-blocks, self

我想尝试使用块来相对于某些输入事件更新实例变量。

在我的 UIViewController 类中：

```
@interface ViewController : UIViewController{
    CGPoint touchPoint;
    void (^touchCallback)(NSSet* touches);
}
@property(readwrite) CGPoint touchPoint;
@end 
```

在实现文件中：

```
-(id) init{
if (self = [super init]){
    touchCallback = ^(NSSet* set){
        UITouch * touch= [set anyObject];
       self.touchPoint = [touch locationInView:self.view];
         };
   }
   return self;
} 
```

在回调函数中，我使用了块：

```
-(void)touchesBegin:(NSSet *)touches withEvent:(UIEvent *)event{
    touchCallback(touches);
}

 -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    touchCallback(touches);  
} 
```

我尝试了几件事，但是当我使用 self 实例时我有一个 BAD_ACCESS 。我不明白问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:21:11.003

您需要复制块：

```
- (id)init {
    if (self = [super init]) {
        touchCallback = [^(NSSet* set){
            UITouch * touch= [set anyObject];
            self.touchPoint = [touch locationInView:self.view];
        } copy];
    }
    return self;
} 
```

这是因为该块是在堆栈上创建的，如果您想稍后使用它，您需要制作一个副本以将其复制到堆中。（该块将在 if 语句范围的末尾“消失”）

# asp.net-mvc - 服务/存储库模式的 MvcScaffolding？

> ID：13090663
> 
> 赞同：3
> 
> 时间：2012-10-26T16:19:00.767
> 
> 标签：asp.net-mvc, t4, asp.net-mvc-scaffolding

有人知道用于构建服务/存储库模式的 MvcScaffolding T4 模板的任何示例吗？

我知道 MvcScaffolding 内置了一个 Repository 脚手架，但我想让它同时构建一个服务层。我花了一个小时左右环顾四周，但还没有看到我要找的东西。

建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:35:14.657

服务层是特定于您的域的东西，而不是您的数据库。这是自动化工具无法创建的，因为服务层不仅仅依赖于数据库。它可能取决于许多其他外部因素。服务层是您应该自己构建的东西，然后您可以引用在此服务层中为您创建的存储库。

但是您需要问自己的主要问题是您是否需要服务层。您是否有一些复杂的业务操作，这些操作不是对数据实体的简单 CRUD 操作，而是由存储库直接处理。

# python - 类/函数全局变量未在 Python 中返回？

> ID：13090667
> 
> 赞同：2
> 
> 时间：2012-10-26T16:19:19.910
> 
> 标签：python, class, function, variables, return-value

我正在尝试从 Python 中的函数内部提取变量的值，但遇到了一些麻烦。

```
uri = None
clientHostname = None
clientIP = None
...
# Handles requests
class DataHandler(BaseHTTPServer.BaseHTTPRequestHandler):
    def do_HEAD(dServe):
        dServe.send_response(200)
        dServe.send_header("connection-type", "text/html")
        dServe.end_headers()
    def do_GET(dServe):
        global uri
        dServe.send_response(200)
        dServe.send_header("connection-type", "text/html")
        uri = dServe.path
        dServe.end_headers()
        clientHostname = dServe.address_string()
        clientIP = dServe.connection.getsockname()[0]
    print(uri)
    print(clientHostname)
    print(clientIP) 
```

当我尝试执行此操作时，它们仅返回值“无”。任何指针？这是我对 Python(2.7) 的第一次尝试，我仍在攀登它的钟形曲线。

我的完整脚本目前是：

```
import time
import BaseHTTPServer
import StringIO
import csv
import sqlite3 as sql
import SimpleHTTPServer
import SocketServer
import multiprocessing
import os

# Initial Variables
appsTable = "Apps"
groupsTable = "Groups"
hostName = 'localhost'
dataPort = 277
filePort = 438
dbFile = "Get-App.db"
uri = None
    clientHostname = None
    clientIP = None
if os.name == "nt":
    dbPath = "Dependencies\sqlite3"
else:
    dbPath = "Dependencies/sqlite3"

# Checks for DB and creates if not found
if os.path.exists(dbFile):
    print("Database found!")
else:
    print("Creating New Database...")
    os.system("echo .tables | " + dbPath + " " + dbFile)
    sqlConnect = None
    try:
        sqlConnect = sql.connect(dbFile)
        sqlCursor = sqlConnect.cursor()
        sqlCursor.execute('CREATE TABLE ' + appsTable + '(ID INTEGER PRIMARY KEY ASC, Name TEXT, InstallGroup TEXT, Version TEXT, Arch TEXT, Executable TEXT, Path TEXT, Command TEXT, Latest BOOL, Enabled BOOL)')
        sqlCursor.execute('CREATE TABLE ' + groupsTable + '(ID INTEGER PRIMARY KEY ASC, Name TEXT, AppList TEXT, Version TEXT, Arch TEXT, Latest BOOL, Enabled BOOL)')
    finally:
        if sqlConnect:
            sqlConnect.close

# Serves files
def file_serve():
    if not os.path.exists(dbFile):
        os.makedirs(appsTable)
    os.chdir(appsTable)
    FileHandler = SimpleHTTPServer.SimpleHTTPRequestHandler
    fileServer = SocketServer.TCPServer(("", filePort), FileHandler)
    fileServer.serve_forever()

# Handles requests
class DataHandler(BaseHTTPServer.BaseHTTPRequestHandler):
    def do_HEAD(dServe):
        dServe.send_response(200)
        dServe.send_header("connection-type", "text/html")
        dServe.end_headers()
    def do_GET(dServe):
        global uri
        dServe.send_response(200)
        dServe.send_header("connection-type", "text/html")
        uri = dServe.path
        dServe.end_headers()
        clientHostname = dServe.address_string()
        clientIP = dServe.connection.getsockname()[0]
        dServe.wfile.write(uri)
    print(uri)
    print(clientHostname)
    print(clientIP)

    # This is what's written to the page:
    uriPar = csv.reader(uri, delimiter='?')
    uriEnt = csv.reader(uriPar[0], delimiter='/')
    sqlConnect = sql.connect(dbFile)
    for entity in uriEnt:
        with sqlConnect:    
            sqlCursor = sqlConnect.cursor()
                if entity[1] == "app":
                    if len(entity) == 3:
                        print clientHostname + " made request for app " + entity[2]
                        sqlCursor.execute("SELECT Executable,Path,Command FROM " + appsTable + " WHERE Latest='true' AND Enabled='true' AND Name='" + entity[2] + "'")
                    else:
                        print clientHostname + " made request for app " + entity[2] + ", specifically version " + entity[3]
                        sqlCursor.execute("SELECT Executable,Path,Command FROM " + appsTable + " WHERE Enabled='true' AND Version='" + entity[3] + "' AND Name='" + entity[2] + "'")
                elif entity[1] == "group":
                    if len(entity) == 3:
                        print clientHostname + " made request for group " + entity[2]
                        sqlCursor.execute("SELECT AppList FROM " + groupsTable + " WHERE Latest='true' AND Enabled='true' AND Name='" + entity[2] + "'")
                    else:
                        print clientHostname + " made request for group " + entity[2] + ", specifically version " + entity[3]
                        sqlCursor.execute("SELECT AppList FROM " + groupsTable + " WHERE Enabled='true' AND Version='" + entity[3] + "' AND Name='" + entity[2] + "'")
    rows = sqlCursor.fetchall()
    for place in rows:
        for position in place:
            dServe.wfile.write(position)
            dServe.wfile.write(",")

# Serves http
if __name__ == '__main__':
    dataServer_class = BaseHTTPServer.HTTPServer
    dataServer = dataServer_class((hostName, dataPort), DataHandler)
    print time.asctime(), "Data Service Starts - %s:%s" % (hostName, dataPort)
    print time.asctime(), "File Service Starts - %s:%s" % (hostName, filePort)
    try:
    fileServerThread = multiprocessing.Process(target=file_serve) 
    fileServerThread.start()  # Starts File Server
        dataServer.serve_forever()  # Starts HTTP Server
    except KeyboardInterrupt:
        pass
    dataServer.server_close()
    fileServer.server_close()
    print time.asctime(), "Server Stops - %s:%s" % (hostName, dataPort) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:31:06.103

首先，代码中的所有`print`语句都是在加载类定义时执行的，可能不是您真正想要的。

其次，如果这是完整的代码，您永远不会构建和启动您的 HTTP 服务器实例。您需要或多或少这样的代码，它实例化并启动服务器对象：

```
if __name__ == '__main__':
    httpd = BaseHTTPServer.HTTPServer((HOST_NAME, PORT_NUMBER), DataHandler)
    try:
        httpd.serve_forever()
    except KeyboardInterrupt:
        pass
    httpd.server_close() 
```

此外，以这种方式使用全局变量也不是一个好主意——例如，如果您的服务器同时接受多个连接怎么办？

如果您是 Python 新手，我建议您开始使用现有的工作代码，例如 [这个示例](http://wiki.python.org/moin/BaseHttpServer)。

**编辑**：似乎您的部分代码缩进不正确。看下面的例子：

```
class Test(object):

    def run(self):
        print 1
    print 2

# By this time, '2' is already printed!
print 3
t = Test()
t.run() 
```

它打印出来：

```
2
3
1 
```

在您的代码中也是如此 -`print`语句及其后面的代码缩进 4 个空格，因此它会在解析类时运行（嗯，不完全是，简化一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:22:14.497

你永远不会调用这个`do_GET`函数，所以`uri`它仍然是最初设置的。在您调用`do_GET`某个地方后，您应该会看到`uri`更新，因为您使用了 global 关键字，但您可能希望在类的定义之外执行此调用和值检查。

# html - 向 CSS 水平下拉菜单中的子菜单项添加填充

> ID：13090669
> 
> 赞同：0
> 
> 时间：2012-10-26T16:19:23.637
> 
> 标签：html, css

如何添加一些 padding-left: 5px; 到我所有的子菜单项。如何在下面修改 CSS 编码以达到目的？

```
/*HORIZONTAL DROP-DOWN MENU */   
#menu{
padding:0;
margin:0;
position: fixed;
top: 30px;
left: 0px;
font-size: 8pt;
}
#menu ul{
padding:0;
margin:0;
}
#menu li{
position: relative;
float: left;
list-style: none;
margin: 0;
padding:0;
} 

#menu li a{
width:120px;
height: 20px;
display: block;
text-decoration:none;
line-height: 20px;
background-color: #A9BBD3;
color: #FFF;
} 

#menu li a:hover{
background-color: #446087;
} 

#menu ul ul{
position: absolute;
top: 20px;
visibility: hidden;
}

#menu ul li:hover ul{
visibility:visible;
}
#menu > ul > li > a{
    text-align:center;
}

<div id="menu">
<ul>
<li><a href="#nogo">File</a>
<ul>
<li><a href="#nogo">Save</a></li>
<li><a href="#nogo">Link 1-2</a></li>
<li><a href="#nogo">Link 1-3</a></li>
</ul>
</li>
<li><a href="#nogo">Edit</a>
<ul>
<li><a href="#nogo">Link 2-1</a></li>
<li><a href="#nogo">Link 2-2</a></li>
<li><a href="#nogo">Link 2-3</a></li>
</ul>
</li>
<li><a href="#nogo">View</a>
<ul>
<li><a href="#nogo">Link 3-1</a></li>
<li><a href="#nogo">Link 3-2</a></li>
<li><a href="#nogo">Link 3-3</a></li>
</ul>
</li>
</ul>
<ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:22:52.170

这是你想要的？

jsfiddle.net/MP5km/2/

刚刚添加了这个CSS：

```
#menu li li a { padding-left: 5px; width:115px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:24:44.853

您可以将其添加到您的 CSS 中：

```
#menu ul ul li a {
    width: 115px;
    padding-left: 5px;
} 
```

见[演示](http://jsfiddle.net/JQsf6/1/)。

# css - 在 Modernizr 完成将类名应用于“Body”之后，重新应用所有 css 样式（外部样式表和内联）

> ID：13090670
> 
> 赞同：0
> 
> 时间：2012-10-26T16:19:40.843
> 
> 标签：css, repaint, modernizr

我想使用[Modernizer](http://modernizr.com/)在主体上设置的类名来应用外部样式表中定义的 css 样式。

例如在触摸设备上 Modernizr 会：

```
<body class="touch other stuff here">
..
</body> 
```

不在我可能拥有的外部样式表中（人为）：

```
.touch .somediv{
  background: green; 
} 
```

在页面加载时，不会应用此样式，因为在 Modernizr 有机会应用`touch`类名之前检查了 CSS。

那么如何以跨浏览器的方式告诉浏览器重新应用所有样式呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:49:24.290

客户端较少的编译器受到干扰..它只是在没有的情况下工作

# css - 一行中的两个元素，但不居中

> ID：13090674
> 
> 赞同：0
> 
> 时间：2012-10-26T16:19:45.337
> 
> 标签：css

当试图同时放置一个`<input>`和一个`<select>`盒子并在它们之间用一条灰线分隔它们时，它显示了我想要的方式。

问题是这两个元素不像其他元素那样居中。他们一直在左边。不`text-align:center;`申请这些吗？

**CSS**

```
li{
float: left;
border-left: 2px solid #999999;
padding: 0 10px;
list-style-type: none;
}
li.f{
border: 0;
padding: 0 10px 0 0;
} 
```

**HTML**

```
<li class="f">
<select><option value="things">things</option></select>
</li>
<li>
<input type="checkbox">Check me
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:27:33.873

来吧：http: [//jsfiddle.net/YPyRF/36/](http://jsfiddle.net/YPyRF/35/)

你在浮动你的 LI 的左边，所以我把它换成
`display:inline-block;`了`text-align:center;`UL。

CSS

```
li{
    display:inline-block;
    border-left: 2px solid #999999;
    padding: 0 10px;
    list-style-type: none;
}
li.f{
    border: 0;
    padding: 0 10px 0 0;
}
ul {
    text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:29:09.550

你可以给`margin-left: 40%;`你的`li.f`，这个值你可以根据两个**li 的**宽度来调整它，这样它就可以居中，这`40%`对你的小提琴来说似乎很好。

这里是[**演示**](https://tinker.io/49e9a)

# r - 从单个矩阵创建多个单独的热图

> ID：13090675
> 
> 赞同：1
> 
> 时间：2012-10-26T16:19:51.177
> 
> 标签：r, graphics, matrix, data-visualization, heatmap

我想将 42x42 矩阵可视化为 28 个单独的热图，每个热图都是 6x6 矩阵，其值绘制在颜色的顶部。我只需要矩阵的下半部分，我不想绘制任何被排除的东西。随后的 6x6 矩阵不应重叠，如下例所示：

```
d = as.matrix(read.table("http://dl.dropbox.com/u/2505196/matrix_posthoc_tukey.dat"))
d[upper.tri(d)] <- NA
d1 <- d[1:6, 1:6]
d2 <- d[1:6, 7:12]
d3 <- d[1:6, 13:18]
d4 <- d[1:6, 18:24]
#...etc, up to d28 <- d[37:42,37:42] 
```

我用来创建单个热图的代码如下所示：

```
#baseline to create a separated space for all 28 plots
par(mfrow=c(4,7), mar=c(2,2,4,1), oma=c(2,4,2,2))

#using `image` to create heatmap, with color breaks defined by specific values
#the code below create just single heatmap
image(x=1:6, y=1:6, axes = FALSE, ylab="", xlab="", d1, 
  breaks=c(min(d1,na.rm=TRUE), -5.45, -4.65, 4.65, 5.45, max(d1,na.rm=TRUE)),
  col=c("red","orange","white","orange","red"))
axis(2, 1:6, cex.axis = 0.7, las=1, tick=F)
axis(3, 1:6, cex.axis = 0.7, tick=F)
#create vertical and forizontal lines
abline(h=seq(0.5,6.5,1), v=seq(0.5,6.5,1))
#plot values from the specific matrix subset
for (i in 1:6)
   {
     for (j in 1:6)
       {
         txt <- sprintf("%0.1f", d1[i,j])
         text(i, j, txt, cex=0.7)
        }
   } 
```

三个这样的热图如下所示：

![在此处输入图像描述](../Images/59ba87b70f19efbfaa2ef6240fb45b7d.png)

这就是我卡住的地方。`d`每次将另一个图像添加到我的单页多热图集合时，我都必须手动更改值。我不知道如何使用上面的代码创建一个很好的循环来同时绘制这些特定的矩阵子集。

ggplot2，lattice 的替代解决方案也受到欢迎，尽管我相信这里的主要问题是制作这一系列热图的一个很好的循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T08:29:03.150

这是一个相当复杂的绘图，但它可以很容易地由 R 中的标准图形库生成。这或多或少只是跟踪哪些索引进入哪个面板的问题。提取`d1`到`d28`矩阵的方式可以自动化，因此您不必写出每一行。

```
# Get the submatrices
I <- unlist(lapply(0:6, function(a) a:6))
J <- rep(0:6, 7:1)
d2 <- mapply(function(i,j) d[1:6+6*i, 1:6+6*j], I, J, SIMPLIFY=FALSE)

# Setup the layout and add an outer margin for the title and axis labels
layout(matrix(c(1:28, 0, 0), 5, 6))
par(oma=c(3,3,3,1), mar=c(2,2,1,1))

# Plot all the matrices oriented the same way they appear in text
# i.e. the first (vertical) dimension is plotted along the Y-axis
for(k in 1:length(d2)){
    x <- 1:6+6*J[k]
    y <- 1:6+6*I[k]

    # Heatmap & grid
    image(x, y, t(d2[[k]][nrow(d2[[k]]):1,]), las=1, axes=FALSE,
          breaks=c(-1e10, -5.45, -4.65, 4.65, 5.45, 1e10),
          col=c("red","orange","white","orange","red"))
    xg <- apply(!is.na(d2[[k]]), 2, sum)
    yg <- rev(apply(!is.na(d2[[k]]), 1, sum))
    segments(c(x[1]-1, x)+.5, min(y)-.5,
             c(x[1]-1, x)+.5, min(y)+c(6, yg)-.5, xpd=TRUE)
    segments(min(x)-.5,         c(y[1]-1, y)+.5,
             min(x)+c(6,xg)-.5, c(y[1]-1, y)+.5, xpd=TRUE)

    # X & Y-axis values
    mtext(x, 1, .1, at=x, cex=.5)
    mtext(rev(y), 2, .2, at=y, las=1, cex=.5)

    # Values of each cell
    text(rep(x, each=6), rep(rev(y), 6),
     sub("NA", "", sprintf("%.2f", d2[[k]])), cex=.3)
}

# Add title and axis labels
title("All 28 submatrices", outer=TRUE)
mtext("Columns", outer=TRUE, 1, 1)
mtext("Rows", outer=TRUE, 2, 1) 
```

每个单元格中的数字可能很小，但如果您将其绘制为 pdf 并放大它们可以读取。函数的`xpd`参数`segments`抑制 R 将线条剪裁到绘图区域（否则外部线条会显得稍细）。

![在此处输入图像描述](../Images/bb3e8059cc1e2331674094c06e4bb4a7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T00:19:07.607

要拥有原始矩阵的 6x6 子数组，您可以执行以下操作：

```
for (i in seq(1, 42, 6))
    for (j in seq(i, 42, 6)) {
        dsub = d[i:(i+5), j:(j+5)]
        ...
    } 
```

但是我建议使用更好的方法来创建热图 - 而不是重新发明它。虽然我最喜欢的用于制作普通热图的包 - 正如你想要的单元格内的数字 - 是`pheatmap`（=漂亮的热图），但它不支持同一页面中的多个小热图。这只是一个输出示例，您可以在安装并加载包后`pheatmap()`运行该函数来查看该函数的帮助。`?pheatmap`

![在此处输入图像描述](../Images/ac9437959cc283fb96d1dcc8277b1e59.png)

要在同一页面中有多个热图，您可以使用`ggplot2`package. 以下是关于[如何制作 ggplot2 热图](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)以及[在同一页面上有多个绘图的好手册。](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20%28ggplot2%29/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:33:28.173

我认为您只需要一个嵌套循环，并且您的 d# 必须是一个数组（我将其称为子矩阵的 subs）。请原谅我的代码，因为我并不真正了解 R，但类似以下内容：

```
for (row in 1:7)
  {
    for (col in 1:7)
      {
        subs[((row-1)*6)+j] <- d[ ((row-1)*6) + 1) : (row*6), (((col-1)*6) + 1) : (col*6)] 
      }
  } 
```

这将为您提供所有 49 个子矩阵。如果您只想要前 4 列子矩阵，则可以在循环中将 col 范围从 1:4 。

# git - 我可以在与活动不同的分支中打开文件吗？

> ID：13090678
> 
> 赞同：6
> 
> 时间：2012-10-26T16:19:54.337
> 
> 标签：git

假设我的 git 存储库中有一个分支“工作”和一个分支“想法”。

我通常在“工作”分支中处理我的 marvelous_file.cpp，但有时我想同时打开我的“想法”分支中的 marvelous_file.cpp。

我不想看看这两个文件之间有什么区别，而是从“ideas”分支中获取代码片段，然后将它们复制并粘贴到“work”分支的文件中。

这可能吗？如果没有，我可以将“ideas”中的文件签入“work”，但名称不同吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T16:25:08.220

你可以用它`git show`来做到这一点：

```
git show ideas:marvelous_file.cpp 
```

这将在终端中正确显示。如果您希望将其作为文件，只需将其通过管道传输到文件中，例如：

```
git show ideas:marvelous_file.cpp > ideas.cpp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:24:03.503

如果您首先在本地提交更改，这些步骤将正常工作：

```
git checkout ideas -- path/to/your/file.txt 
```

将获取您想要的文件并替换您在工作文件夹中的文件。您可以对整个目录或整个工作树执行此操作：

```
git checkout ideas -- . 
```

将抓取整个工作树

```
git checkou ideas -- dir/with/cool/stuff 
```

将抓取目录的所有内容。

现在你可以

```
git reset -p 
```

系统地丢弃您不想要的更改。如果它们已经放入您将要处理的文件中，这可能更容易获取您想要的片段。

# ruby-on-rails-3 - Cucumber + Capybara 不执行 AJAX 请求

> ID：13090680
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:04.313
> 
> 标签：ruby-on-rails-3, cucumber, capybara

我的 Cucumber + Capybara 测试当前没有执行 AJAX 请求。测试日志不包含 AJAX [POST] 请求，这使我相信该请求从未发送过。有谁知道问题可能是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:59:30.720

我将首先查看您的测试日志文件。您将看到是否发出了请求，以及它是否在服务器上失败。

# asp.net-mvc - 如何在 ASP.NET MVC 中动态创建和管理新的控制器？

> ID：13090689
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:39.097
> 
> 标签：asp.net-mvc, visual-studio, .net-3.5, url-rewriting

从我用 ASP.NET MVC 开发的网站的私有区域，我想创建带有 URL 段的新页面（或更准确地说是控制器），如“www.mysite.com/newpage/”（而不是“www.mysite.com/”我的控制器/新页面/");

我不想在设计/开发时创建控制器，我希望能够在运行时创建控制器并将它们的名称（url 段）存储在数据库中，因此当请求页面时，应用程序会检查它是否存在于数据库并呈现页面（视图）。

任何人都知道 Internet 上的一个示例，该示例解释了实现此类选项的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:11:54.587

最好的解决方案是为单个控制器创建多个路由并根据路由名称执行代码。这些路由名称也可以由数据库管理。

**例子 ：**

*全球.asax*

```
public static void RegisterRoutes(RouteCollection routes)
{
    // The collection of route can be manage via DB
    foreach (string route in new[] { "route1", "route2", "route3" })
    {
        routes.MapRoute(
                route,
                route + "/{*args}",
                new { controller = "MyController", action = "MyAction", args = UrlParameter.Optional, routeName = route }
        );
    }
} 
```

*我的控制器*

```
public ActionRestult MyAction(string args)
{
    switch(RouteData.Values["routeName"].ToString()){
        case "route1" :
            // do your code
        break;
        case "route2" :
            // do your code
        break;
        case "route3" :
            // do your code
        break;
    }
} 
```

希望这会有所帮助！

# sql - MS SQL REPLACE 不显示结果

> ID：13090690
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:40.380
> 
> 标签：sql, sql-server, sql-server-2008

嘿，我有以下查询：

```
SELECT REPLACE(REPLACE(REPLACE(REPLACE(tmpTable.Caller_Number,'-',''),'(',''),')',''),' ','') 
FROM tmpTable 
WHERE EXISTS 
(SELECT REPLACE(REPLACE(REPLACE(REPLACE(OnlineAppDetails.addPhone,'-',''),'(',''),')',''),' ','') 
FROM OnlineAppDetails 
WHERE OnlineAppDetails.addPhone = tmpTable.Caller_Number)
ORDER BY GroupsBy ASC; 
```

它不返回任何记录...但是，当我执行此查询时：

```
SELECT * 
FROM tmpTable 
WHERE EXISTS 
(SELECT * FROM OnlineAppDetails 
WHERE SUBSTRING(OnlineAppDetails.addPhone,2,3)+'-'+SUBSTRING(OnlineAppDetails.addPhone,7,4)+SUBSTRING(OnlineAppDetails.addPhone,11,4) = tmpTable.Caller_Number)
ORDER BY GroupsBy ASC; 
```

它返回记录..

电话号码的格式如下：

```
for OnlineAppDetails: (xxx) xxx-xxxx
for         tmpTable: xxx-xxx-xxxx 
```

我所做的只是去掉电话号码中的**- ( ) 和 [空格]**，以确保我得到了我应该得到的所有记录。我知道两个表中都有匹配项，因此取出**- ( ) 和 [space]**仍应导致返回记录。

**更新**

呃....知道这很简单。

```
SELECT * 
FROM tmpTable 
WHERE EXISTS 
(SELECT * 
FROM OnlineAppDetails 
WHERE  REPLACE(REPLACE(REPLACE(REPLACE(OnlineAppDetails.addPhone,'-',''),'(',''),')',''),' ','') = REPLACE(REPLACE(REPLACE(REPLACE(tmpTable.Caller_Number,'-',''),'(',''),')',''),' ',''))
ORDER BY GroupsBy ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:36:39.733

确保第一个查询不会返回任何行：
这是因为`WHERE OnlineAppDetails.addPhone = tmpTable.Caller_Number`内部查询的部分将产生零行（给定相应字段的预期格式），因此 EXISTS 将始终为 false。请注意，在此（实际上是*任何*） EXISTS 子查询的*SELECT*
部分中 完成的字符串操作不会对 EXISTS 谓词的结果产生任何影响；这就是为什么使用的成语通常是： .**`... WHERE EXISTS * FROM ...`**

 **第二个查询查询有效，因为在 WHERE 子句中应用了字符串转换。此转换使 OnlineAppDetails.addPhone 值与 tmpTable.Caller_Number 的格式具有相同的格式，因此提供了查找匹配项的机会。**

# ruby-on-rails - 两个对等模型都没有出现在 JSON 中

> ID：13090692
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:49.600
> 
> 标签：ruby-on-rails, json

这是这个问题的后续：[JSON is not nested in rails view](https://stackoverflow.com/questions/13078461/json-is-not-nested-in-rails-view/13078589#13078589)

我有一个具有模型层次结构的应用程序，每个模型下降时都是 1:many。倒数第二个是一个名为**LessonLayout**的模型，它有两个孩子，可能有 0:many 的关系。孩子被称为**LayoutField**和**LayoutTable**。

到目前为止，我在下面列出了这段代码（在 SO 用户**meagar**的帮助下）。

```
def show
  @course = Course.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json do
      render :json => @course.to_json(:include => { :units => { :include => {:lessons => {:include => { :lesson_layouts => { :include => :layout_fields, :include => :layout_tables}}}}}})
    end
  end
end 
```

具有**:layout_fields**或**:layout_tables**对象的课程布局。目前它产生**:layout_tables**数据，但不显示**:layout_fields**。如果我反转 ruby​​ 代码中的对象，则会发生相反的情况。我希望看到两者都在 JSON 中返回。

我尝试过使用代码，但没有得到任何结果。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:37:55.697

我解决了。在数组中传递两个对等对象，如下所示：

```
def show
  @course = Course.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json do
      render :json => @course.to_json(:include => { :units => { :include => {:lessons => {:include => { :lesson_layouts => { :include => [:layout_fields, :layout_tables]}}}}})
    end
  end
end 
```

# javascript - 将输入文本另存为 .vcf

> ID：13090693
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:58.783
> 
> 标签：javascript

只是更多地检查这在 JavaScript 中是否可行，因为这是我最喜欢的语言。我将有一个收集某些数据的表单，我想知道我是否可以将该输入保存到一个文本文件中，但将其命名为 .vcf 以可视化输入，如下所示：

```
BEGIN:VCARD
VERSION:3.0
N;LANGUAGE=en-us:Clause;Santa
FN:[]
TITLE:Big Daddy Clause
CATEGORIES:Presents, Santa, Holiday, Christmas
TEL;CELL;VOICE: (999) 555-1212
ADR;TYPE=dom,work,postal,parcel:;;[INPUT]
URL:[INPUT]
EMAIL;PREF;INTERNET:[INPUT]
NOTE:[INPUT]
REV:[TODAYS DATE]
END:VCARD 
```

我只是尝试创建一个 vcard 并将其从输入表单发送给某人，以便可以在 Outlook 中打开它。我会想办法在下一阶段将它实际发送到一个电子邮件地址。有人可以告诉我这是否可行，以便我可以在周末开始建造它吗？:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:38:20.657

您不能使用 JavaScript 编写文件。这将是向客户端写入文件的主要安全问题。

但是您可以使用 Data URI 做一些类似的事情：

[用文件名保存文件 Javascript](https://stackoverflow.com/questions/7717851/save-file-javascript-with-file-name)

# asp.net - 在 Windows 8 上的 IIS 8 上安装 asp.net 4.5

> ID：13090694
> 
> 赞同：0
> 
> 时间：2012-10-26T16:20:59.930
> 
> 标签：asp.net, iis, windows-8, iis-8

我刚刚安装了 windows 8 企业版，我试图在安装 VS 之前安装 IIS，我能够在没有 asp.net 的情况下安装 IIS，但是当我选择安装 ASP.NET 4.5 和 ASP.NET 3.5 时，我收到以下消息：

```
Windows needs files from windows update to finish installing some features. 
```

首先，我想知道为什么安装程序会要求这个，在以前的版本中，IIS 的安装不需要互联网连接。

其次，我没有下载软件包的选项，是否有任何资源可供下载以将其安装在没有互联网连接的计算机上？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T00:19:32.187

问题是当你选择同时安装asp.net 4.5和asp.net 3.5时，第一个安装没有问题。

如果你想同时安装两者，那么你必须先安装 framework 3.5。这些都是说明。

1.  在 c: 中创建一个名为 net35 的文件夹。
2.  从安装盘:\sources\sxs 将所有文件复制到步骤1中的文件夹。
3.  记得禁用防火墙。
4.  以管理权限运行命令提示符。
5.  键入以下 Dism.exe /online /enable-feature /featurename:NetFX3 /Source:c:\net35 /LimitAccess

在您的 Windows 8 中享受 3.5，在此之后安装两个 asp.net。

# postgresql - 数据建模：具有许多属性的表

> ID：13090697
> 
> 赞同：3
> 
> 时间：2012-10-26T16:21:03.137
> 
> 标签：postgresql, data-modeling, hstore

我有一个名为 Project 的实体。每个项目都有分配给它的一组成员。我从每个成员那里收集一些信息，例如年龄、身高等。其中一些是数字类型，一些是文本类型，一些是逻辑类型（布尔值）。有几十个信息，可以收集。

这个，我在特定项目中收集的信息，定义了项目本身。在单个项目中，我曾经收集几个信息，例如 3-5 个信息。在某些项目中，我可以收集相同或相似的信息集。我感兴趣的是对所有项目进行统计，其中我收集了特定信息。

问题是：包含这些信息的表的架构应该是什么？拥有一个包含几十列且每行中有许多空值的大表听起来并不好，尤其是因为我的数据库中将有数千甚至数百万个这样的数据。但是每个项目都有一个表（以及尽可能多的表，尽可能多的项目），其中我只收集信息，听起来也不好，因为从所有项目中进行统计需要使用动态 SQL（变量表名 - 取决于项目）并迭代数百个。每个选项也有一个表格，甚至选项类型（逻辑、文本、布尔值）似乎都不是正确的方法。

我正在使用 PostgreSQL 数据库。我知道，有些数据库有类似 ANYTYPE 的东西（例如 Microsoft SQL Server 中的 sql_variant 或 Oracle 中的 ANYDATA），但 PostgreSQL 没有，这让我有点困惑。

我很确定对此有更好的解决方案，但我无法弄清楚。请你帮我找到它好吗？

预先感谢您的每一个回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:51:00.490

将您已经可以定义的所有属性以及“常量”（并且对所有成员都通用）放入表的实际列中。对于任何动态的内容，您都可以使用 hstore 数据类型。

[http://www.postgresql.org/docs/current/static/hstore.html](http://www.postgresql.org/docs/current/static/hstore.html)

它比 Oracle 的 ANYDATA 更​​好（更灵活、更快）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:26:04.730

根据我对所提供信息的理解，数据不是关系型的。我觉得你应该在这里查看 NoSql 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T13:09:17.273

postgresql 中内置了一个表继承功能，可让您在表层次结构上运行查询。

[在 postgresql 文档中到处](http://www.postgresql.org/docs/8.4/static/ddl-inherit.html)寻找[一个](http://www.postgresql.org/docs/8.4/static/tutorial-inheritance.html)好的教程。

These explain how to build tables inheriting from one table: all the fields in the parent table are automatically included in the child tables, and all queries run on a parent table are run on child tables (but not the opposit, or on sibling tables) and results are concatenated, unless the special keyword ALONE is used to qualify the query (or clause maybe) as restricted to a single table. You should be careful with constraints, because they do not cross table boundaries. In other words, if a constraint is set on a parent table, it will be restrained to that table alone, and child or sibling tables might contain duplicate of rows in the constrained table.

# c++ - for循环中的指针运算

> ID：13090705
> 
> 赞同：1
> 
> 时间：2012-10-26T16:21:25.287
> 
> 标签：c++, for-loop, pointer-arithmetic

我试图理解一些以我不习惯的方式使用指针算术的代码。在代码中的某一时刻，我遇到了这个：

```
complex<double> **P, *p_row, result=complex<double>(0,0);
P=new complex<double>*[n];
for(i=0;i<n;i++) P[i]=new complex<double>[n];

for(i=0,p_row=*P;i<n;i++,p_row+=n) result+=log(*(p_row+i)); 
```

如果 P 是一个矩阵，这在我看来就像添加 P 的对角线元素的对数。但事实证明，上面的最后一行*不*等于

```
for(i=0;i<n;i++) result+=log(P[i][i]); 
```

我一直在寻找关于这里发生了什么的解释，但我找不到。此外，有问题的代码最终显然给出了正确的结果（它是蒙特卡洛的一部分）。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:30:38.033

您发布的代码是错误的；它确实调用了未定义的行为。

例如。在第二次迭代中，`p_row`是`(*P)+n`。`*P`指向一个大小为 的数组`n`，因此，当代码读取 时`*(p_row+i)`，它会读取到数组的末尾。

最后一行似乎假设矩阵存储在单个连续数组中（例如，主要行）。但是，这意味着`P`将由`complex<double>*`初始化`P = new complex<double>[n*n];`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:31:01.203

具有未定义行为的循环`p_row+=n`，因为它假定循环在第三行完成的分配是连续的，但在几乎所有实现中它们都不是。

您的代码`P[i][i]`检索正确的结果。`n*n`您可以通过一次性分配元素，然后将它们打包成`p`一个循环来修复其他代码。

# jquery-datatables - 当表为空时，DataTables 给出错误

> ID：13090707
> 
> 赞同：1
> 
> 时间：2012-10-26T16:21:30.067
> 
> 标签：jquery-datatables

将 Datatables 1.9.4 用于 Rails 3.2.6 应用程序。

我正在使用 DataTable，它工作得很好，但我注意到每当我的表没有数据时，它都会给出以下错误：

DataTables 警告（表 id = 'resource-index-listing-table'）：从第 0 行的数据源请求未知参数“1”。

有人可以帮忙吗。

# php - 遍历 MySQL 关联数组以构建新的 MySQL 结果集

> ID：13090711
> 
> 赞同：0
> 
> 时间：2012-10-26T16:21:38.007
> 
> 标签：php, mysql, database, associative-array

我希望标题有意义，如果没有，我会在这里尝试澄清。首先，就像我处理的许多代码一样，我继承了这个或只是监督它，并且没有被允许使用 mysqli 重新编写，所以请不要写“你现在做错了”的帖子。提前致谢。

table_1 有这样的布局

```
+----+-----------+------------+
| id | from_name | from_email |
+----+-----------+------------+
| 1  |   John    | john@a.com |
| 2  |   Juan    | juan@a.com |
| 3  |   Mark    | mark@a.com |
| 4  |   John    | john@a.com |
+----+-----------+------------+ 
```

我像这样查询它以获得我需要的结果。

```
<?php

    $q = "SELECT `id` FROM `table_1` WHERE `from_email` = 'john@a.com'";
    $r = mysql_query($q) or die(mysql_error()); // mysql_error is removed in production
    $ids = mysql_fetch_assoc($r);

 ?> 
```

现在，当我遍历它并将 id 打印到屏幕上时，我得到了预期的结果，

```
1
4 
```

现在我需要获取这些 ID 并在包含大小信息的 Table_2 中的 WHERE 子句中使用它们，以便我可以计算所有消息的总大小。Table_2 看起来像这样。

```
+----+---------+------------+
| id | table_1 |    size    |
+----+---------+------------+
| 1  |    1    |   44023    |
| 2  |    2    |     372    |
| 3  |    3    |   13243    |
| 4  |    4    |  423115    |
+----+---------+------------+ 
```

根据我想要的解决方案，我应该能够构建一个 while 或 foreach 循环来获取大小并让我正确添加它们？我尝试了以下方法：

```
<?php

    $total_size = 0;
    while($ids = mysql_fetch_assoc($r)){
         $q2 = "SELECT `size` FROM `table_2` WHERE `table_1` = '".$ids['id']."'";
         $r2 = mysql_query($q2) or die mysql_error()); // removed in production
         $add = mysql_fetch_assoc($r2);

         $total_size = $total_size + $add['size'];
    }

 ?> 
```

但是当我去 echo $total_size 时，我什么也看不到，屏幕上什至没有 0 并且 MySQL 没有抛出任何错误。如果我最初设计了这个表，所有这些数据都将在同一个表中，但由于我没有，我别无选择，只能“让它工作”。从它的外观来看，它应该可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:59:53.683

@Michael Berkowski - 感谢您的 INNER JOIN 和 SUM() SELECT 语句。完美运行。

“在一个查询中，您可以使用简单的子查询方式：SELECT size FROM table_2 WHERE table_1 IN (SELECT id FROM table_1 WHERE email = 'john@a.com') 或可能更快的连接方法：SELECT size FROM table_2 INNER JOIN table_1 ON table_2.table_1 = table_1.id WHERE table1.email = 'john@a.com'" – Michael Berkowski

“然后你只需要一个 fetch 循环。实际上你甚至可以在一个查询中执行聚合 COUNT() 并跳过几乎所有的 PHP。SELECT SUM(size) FROM table_2 INNER JOIN table_1 ....” – Michael Berkowski

# php - php脚本不会运行只是在浏览器中显示页面后面的代码

> ID：13090715
> 
> 赞同：0
> 
> 时间：2012-10-26T16:21:46.723
> 
> 标签：php, browser

当我`localhost/filename.php`在 chrome Web 浏览器中运行时，它不会显示使用该文件名的代码输出，而是显示底层代码。我试图消除尽可能多的可能因素，所以我知道在使用相同的文件时可以在不同的 mac 上工作`localhost/filename.php`。我也尝试在 safari 网络浏览器上使用它——同样的问题。

我已经没有如何解决或缩小问题的想法了，所以我只是问有没有可能有人遇到过同样的情况并且知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:15:17.750

我假设你有一个 mac 并且你在最新版本（Mac OS X Mountain Lion）上运行，假设这样，你很可能必须安装/启用 php 这比以前版本的 Mac OS X 稍微困难一些苹果做了一些改变，但是下面的链接显示的非常详细，它还允许您在本地环境中设置 phpmyadmin 和 mysql，这是我以前设置的。

[http://coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion](http://coolestguyplanettech.com/downtown/install-and-configure-apache-mysql-php-and-phpmyadmin-osx-108-mountain-lion)

您还可以做一些更简单的事情，并使用 MAMP 或 XAMPP 等服务器软件，它们只是一个简单的安装程序，但是它们没有提供像手动安装那样多的自由度（也不确定它们是否有山狮支持）.. .

MAMP： http: [//www.mamp.info/de/mamp/index.html](http://www.mamp.info/de/mamp/index.html)

XAMPP： http: [//www.apachefriends.org/en/xampp-macosx.html](http://www.apachefriends.org/en/xampp-macosx.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:26:12.770

您的主机没有执行 php，因此这不是代码的问题，而是 PHP 的问题。确保您的本地主机设置为执行 PHP，否则它将显示为文本。

# javascript - 早于 9 的 IE 版本引发错误“预期标识符、字符串或数字”

> ID：13090719
> 
> 赞同：6
> 
> 时间：2012-10-26T16:21:57.550
> 
> 标签：javascript, knockout.js

这个淘汰赛 2.1 绑定表达式在 Firefox 和 IE9 下工作正常，但在 IE9 兼容模式下崩溃并出现错误“*预期标识符、字符串或数字*”：

```
<div data-bind="template: {
    if: myDataModel, 
    data: myDataModel, 
    afterRender: setup(myDataModel) }"> 
```

我在调试器下找到了实际位置，就是这行代码（knockout-2.1.0.debug.js）：

```
return new Function("sc", functionBody) 
```

`functionBody`是一个字符串，等于上面的表达式。我尝试使用空格和回车符 - 没有任何帮助，结果相同：它可以在 IE9 兼容模式以外的任何浏览器中正常工作

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T16:25:49.523

我认为问题在于旧版本的 IE 不喜欢“if”或类似的保留字作为属性名称出现。尝试在属性名称周围加上单引号。

```
<div data-bind="template: {
'if': myDataModel, 
data: myDataModel, 
afterRender: setup(myDataModel) }"> 
```

当你有一个“类”绑定时，你会发生这种情况的另一个常见时间。相同的修复：

```
<tr data-bind="attr: { 'class': packageSelected() ? 'success' : '' }"> 
```

JS 中的保留字列表：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)

# debugging - GDB 中的键映射

> ID：13090720
> 
> 赞同：3
> 
> 时间：2012-10-26T16:22:06.050
> 
> 标签：debugging, gcc, gdb, binutils

是否可以在 GDB 中为命令定义任意组合键？我想知道是否有类似 vim map 命令的东西。例如，我想映射到下一个，到一步，等等..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-25T21:53:40.563

在 gdb 中映射键（在 gdb/cygwin/win7 上测试）

```
1\. Start gdb
2\. Find the key generated by F7, Press C-v F7
   (gdb) ^[[18~
3\. vi ~/.inputrc
   # Map F7 to next
   "\e[18~": "n\n" 
4\. Restart gdb, and now F7 will be mapped to "next\n" 
```

更多信息在这里[https://sourceware.org/gdb/onlinedocs/gdb/Readline-Init-File-Syntax.html](https://sourceware.org/gdb/onlinedocs/gdb/Readline-Init-File-Syntax.html)

```
# Sample ~/.inputrc
$if Gdb
"\e[23~": "next\n # [F7] next.\n"  
"\e[A":  "# Up key\n"
"\e[B":  "next\n # [Down]  next line.\n"
"\e[C":  "step\n # [Right] step into func.\n"
"\e[D":  "finish\n # [Left] to finish.\n"
$endif 
```

gdb 具有内置的基于文本的 gui 称为 TUI 模式，甚至可以在 cygwin/win7 中工作，示例用法：

```
> g++ -Wall -g -lm -std=c++14 hello.cpp
> gdb -tui a.exe 
```

按 Cx s .. 进入单键模式

```
 q - quit, exit SingleKey mode.  
    c - continue
    d - down
    f - finish
    n - next
    r - run 
    s - step 
    u - up 
    v - info locals 
    w - where 
```

更多信息[https://volse.anduin.net/rabalder/2015/06/01/gdb-tricks-text-based-ui.html](https://volse.anduin.net/rabalder/2015/06/01/gdb-tricks-text-based-ui.html)和这里[https://ftp.gnu.org/old-gnu/Manuals/gdb /html_chapter/gdb_19.html](https://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_19.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:06:07.433

GDB 使用 GNU readline 来读取输入。[此处的](http://linux.die.net/man/3/readline)文档（或仅键入`man readline`）。

特别要注意如何绑定F1插入文本的例子`Function key 1`。

# java - 如何转换 Java Web 应用程序以部署在 Google App Engine 上

> ID：13090722
> 
> 赞同：0
> 
> 时间：2012-10-26T16:22:08.433
> 
> 标签：java, google-app-engine, web-applications

我在eclipse的tomcat服务器中使用struts2创建了java web应用程序。我想在创建它之后将它部署在 Google App Engine 中。所以我为 Eclipse 安装了谷歌应用引擎插件，并使用下面的方法将项目转换为在谷歌应用引擎上部署

右键单击项目

谷歌 -> 应用引擎设置

勾选“使用 Google App Engine”框

之后，当我尝试部署它时。它迫使我输入应用程序 ID。当我输入使用 www.appengine.google.com 网站创建的应用程序 ID 时，eclipse 说

```
Cannot set application ID (appengine-web.xml is missing) 
```

错误。我应该手动创建那个 xml 还是可以自动创建它？如果我应该手动创建它，执行它的步骤是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:49:41.200

Struts 2 与 Google App Engine 兼容，但您需要应用一些变通方法。有关详细信息，请查看[Java 技术与 App Engine 的兼容性列表](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)。检查为使 Struts 2 在 GAE 中工作而提供的信息。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T09:30:37.450

Hi Better check for appengine-web.xml file in the WEB-INF folder. If it is existing there then try changing you appengine deploy id. i.e., Create a New ID and deploy into that. If it works fine OK.

Else

Create a new web application project . Better Select it from Google toolbar and copy your files to that new created one. Because in the new created one there will be defaulted appengine-web.xml and try to deploy. Hope it works. Like if it works .

Thank You.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T06:34:42.443

尽管您使用了 struts，但可以通过在其 war 文件中提供一个应用引擎 xml 来部署它，并且您应该将 appengine sdk 添加到这个 struts 项目中。然后尝试将其部署在 localost 中。

如果它确实成功，您可以通过在应用引擎 xml 中提供应用程序 ID 来将其部署到应用引擎中。

参考：[Java 应用程序配置](https://developers.google.com/appengine/docs/java/config/appconfig)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-21T13:12:29.803

它对我有用。首先，我创建了一个 HelloWord GAE 项目，复制了 appengine-web.xml 的内容并将其粘贴到我缺少该文件的项目中。您需要更改应用程序 ID。

另外，检查 WEB-INF 文件夹下是否有 web.xml 文件。您将在此处声明将应用程序部署到 GAE 后将加载的文件。

# sharepoint-2010 - 无法展开列表视图选择器

> ID：13090726
> 
> 赞同：0
> 
> 时间：2012-10-26T16:22:18.470
> 
> 标签：sharepoint-2010, backup, restore

我已在新服务器上恢复了**SharePoint - 80 应用程序**备份，并将现有域名映射到此服务器。默认列表视图选择器不显示可用的预定义视图/页面，而是返回`500 Internal Server Error - http://SERVER_NAME/SUB_SITE/_layouts/vsmenu.aspx?List=LIST_NAME...`错误（通过 Firebug 捕获）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T21:30:25.513

此问题似乎是由将现有公共域名与还原的 SharePoint - 80 应用程序相关联引起的。

通过该地址访问所有 SharePoint 页面（以及有问题的功能元素）时`http://HOSTNAME_HERE/`，一切正常。

通过该地址访问所有 SharePoint 页面（以及有问题的功能元素）`http://PUBLIC_DOMATIN_DAME/`时，会出现此问题。

我将单独研究这个问题。

# c# - 了解为什么，C# 文件创建选项会发生冲突

> ID：13090729
> 
> 赞同：2
> 
> 时间：2012-10-26T16:22:20.497
> 
> 标签：c#, file, creation

在探索创建文本文件的选项时，我偶然发现了这种我无法解释的行为

两个按钮都会创建一个文件

但是当我使用 button1 button2 创建文件时会产生错误。

这仅在实际创建文件时发生。

创建文件后，按钮 1 和 2 按预期运行

一个简单的 GUI 程序的示例代码 2 个按钮和一个包含多行文本框

```
 string logFile;

    public Form1()
    {
        InitializeComponent();

        logFile = "test.txt";

    }

    private void button1_Click(object sender, EventArgs e)
    {

        if (!System.IO.File.Exists(logFile))
        {
            System.IO.File.Create(logFile);
            textBox1.AppendText("File Created\r\n");
        }
        else
        {
            textBox1.AppendText("File Already Exists\r\n");
        }

        System.IO.File.AppendText("aaa");

    }

    private void button2_Click(object sender, EventArgs e)
    {

        // 7 overloads for creation of the Stream Writer

        bool appendtofile = true;

        System.IO.StreamWriter sw;

        try
        {
            sw = new System.IO.StreamWriter(logFile, appendtofile, System.Text.Encoding.ASCII);
            sw.WriteLine("test");
            textBox1.AppendText("Added To File Created if Needed\r\n");
            sw.Close();

        }
        catch (Exception ex)
        {
            textBox1.AppendText("Failed to Create or Add\r\n");

            // note this happens if button 1 is pushed creating the file 
            // before button 2 is pushed 
            // eventually this appears to resolve itself

            textBox1.AppendText("\r\n");
            textBox1.AppendText(ex.ToString());
            textBox1.AppendText("\r\n");
            textBox1.AppendText(ex.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:28:36.980

您可能会收到错误消息，因为文件资源正在被前一个进程使用。在使用文件之类的资源（并使用 IDisposable 的 StreamWriter 对象）时，建议使用“Using”指令。一旦代码执行完成，这将关闭资源。

```
 using (StreamWriter sw = File.CreateText(path)) 
            {
                sw.WriteLine("Hello");
                sw.WriteLine("And");
                sw.WriteLine("Welcome");
            } 
```

一旦你写了第三行，文件将自动关闭并释放资源。

# oauth - 保留 OAuth 访问令牌的指南

> ID：13090730
> 
> 赞同：0
> 
> 时间：2012-10-26T16:22:43.500
> 
> 标签：oauth, token

我目前正在使用 DevDefined OAuth。据我所知，访问令牌永远不会从开箱即用的内存存储中删除，因此它们唯一被清理的时间是它们超时并被删除或应用程序重新启动。我很好奇其他人是如何使用这个的？我似乎很多应用程序只允许身份验证令牌继续存在，直到用户说删除它（假设通过注销），人们是否设置了一些超时时间？或者也许是更新？似乎无限期地保留它们对于社交应用程序或我正在建立业务线的东西可能是有意义的，但这似乎并不正确。

任何人都可以肯定的想法或经验会很有帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:53:29.490

通常，您应该保留访问令牌，直到它被服务撤销（用户撤销它，或者它过期）。在这种情况下，您可以使用您的请求令牌来获取另一个访问令牌。有些服务有一个 API，你也可以用它来检查你的访问令牌的有效性。

OAuth 并没有真正为您提供解决您的问题的规定 - 例如，如果您的应用程序已被用户授权，您始终可以从请求令牌中获取访问令牌。

如果您关心业务线应用程序，那么也许您可以在应用程序层处理它。例如，我使用的许多应用程序都需要我登录，但一旦我登录，它就会连接到各种 OAuth 服务（即，它重新使用访问令牌）而无需我进一步许可。

# c# - 使用外键将数据插入表中

> ID：13090735
> 
> 赞同：0
> 
> 时间：2012-10-26T16:22:55.620
> 
> 标签：c#, sql-server, entity-framework, foreign-keys

我在 ms sql server 2008 R2 中有 2 个表，其中一个与另一个有外键关系

很简单：

```
tableA
prefix nchar(10)
value  nchar(50)

tableB
prefix nchar(10)
value  nchar(50)

ALTER TABLE [dbo].[tableB]  
WITH CHECK ADD  CONSTRAINT [FK_TableA_TableB] FOREIGN KEY([prefix])
REFERENCES [dbo].[TableA] ([prefix]) 
```

我使用管理工作室编辑表在表中填写数据。确保 in`tableB`中的每个前缀在`tableA`.

然后我将表导入 Visual Studio C# 以创建实体框架模型。一切似乎都很好，直到我开始使用导航句柄引用数据`tableA`，`tableB`它空手而归。

即`tableB.tableA`s 出来为空。

是否需要执行一个步骤来更新实体框架和/或 ms sql server 中的外键关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:00:26.413

为了帮助其他有类似问题的人，我发布了我认为是解决方案的内容。结果我假设引用是在实体框架中自动加载的。为了得到更新，引用需要像这样显式加载

```
if (!tableB.tableAs.IsLoaded)
    tableB.tableAs.Load(); 
```

# c# - C# 文件名 + 文本框的文件路径

> ID：13090737
> 
> 赞同：0
> 
> 时间：2012-10-26T16:23:05.113
> 
> 标签：c#, winforms

我写了一个可以打开文件对话框的函数，但它不会返回文件路径+文件名。

我错过了什么？

```
private void browseButton_Click(object sender, EventArgs e)
    {
        browseDatabase(accessDatabaseTextbox.Text, "mdb bestanden|*.mdb");
    }

    private void browsebutton2_Click(object sender, EventArgs e)
    {
        browseDatabase(klantenDatabaseTextbox.Text, "accdb bestanden|*.accdb");
    }

private void browseDatabase(string textbox, string filter)
    {
        openFileDialogDB.Filter = filter;

        if (openFileDialogDB.ShowDialog() == DialogResult.OK)
        {
            string DBfile = openFileDialogDB.FileName;
            if (System.IO.File.Exists(DBfile))
            {
                textbox = DBfile;
            }
            else
            {
                MessageBox.Show("Selected file doesn't exist.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        else
        {
            MessageBox.Show("No file selected.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:30:09.553

我猜你需要选择的文件最终出现在你的`accessDatabaseTextbox`. 在这种情况下，您做错了，字符串是按值传递的。试试这个

```
private void browsebutton2_Click(object sender, EventArgs e)
{
    klantenDatabaseTextbox.Text=browseDatabase( "accdb bestanden|*.accdb");
}

private string browseDatabase(string filter)
{
    openFileDialogDB.Filter = filter;

    if (openFileDialogDB.ShowDialog() == DialogResult.OK)
    {
        string DBfile = openFileDialogDB.FileName;
        if (System.IO.File.Exists(DBfile))
        {
            return DBfile;
        }
        else
        {
            MessageBox.Show("Selected file doesn't exist.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
    }
    else
    {
        MessageBox.Show("No file selected.", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
 return "";
} 
```

# javascript - 如何使用 Canvas 变换重新创建此 CSS 变换？

> ID：13090739
> 
> 赞同：2
> 
> 时间：2012-10-26T16:23:17.550
> 
> 标签：javascript, canvas, matrix

我正在尝试使用呈现在 HTML5 画布上的文本重新创建 CSS 转换的输出。

这是我要重新创建的实际 CSS 转换：

```
transform : skew(-22deg, -8deg); 
```

我一直在玩 HTML5 画布 API 中的 context.transform() 和 context.setTransform 方法，但无法接近上述转换？

如何在画布元素中匹配上述 css 转换？

此外，是否有任何在线工具可用于帮助可视化矩阵转换？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:26:12.790

**[现场演示](http://jsfiddle.net/loktar/LVDFW/)**

就像你想的那样使用变换，关键是知道值应该去哪里。

```
var canvas = document.getElementsByTagName("canvas")[0],
    ctx = canvas.getContext("2d");

canvas.width = canvas.height = 100;

ctx.font = "20px arial";
var rad1= -8 * Math.PI / 180;
var rad2= -22 * Math.PI / 180;

ctx.setTransform(1, rad1, rad2, 1, 0, 0);
ctx.fillText("test",30,80); 
```

# java - 如果脏了，休眠保存新的

> ID：13090747
> 
> 赞同：0
> 
> 时间：2012-10-26T16:23:50.553
> 
> 标签：java, hibernate

当对象脏（已修改）时，有没有办法强制休眠在 saveOrUpdate 上保存对象的新实例（新标识符）？这可以通过配置或拦截器实现吗？我有三个实体：

```
Entity A (has B)
Entity B
Entity C (has B)
Entity B can only be updated through A 
```

基本上，我希望 C 在创建和保存 (C) 时始终保存 B 的快照，而不是直接引用 A 引用的 B 的实例。

B 应该是可修改的，A 应该指向 B 的最新版本。

我可以通过实现 equals 方法手动执行此操作，在调用 saveOrUpdate() 之前检查是否相等并在必要时取消 B 的 id 字段。Hibernate 中是否有内置方式或更简单的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:27:57.223

您可能想快速阅读一下 Hibernate Interceptors。

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T06:11:22.307

尝试给 Hibernate [DefaultSaveOrUpdateListener](https://forum.hibernate.org/viewtopic.php?f=1&t=977720)一个读取，这个监听器（当配置时）将被调用来完成保存对象的所有繁重工作，它的这个监听器确定一个对象需要被保存或更新。

您决定为脏对象保存/更新/创建新对象的逻辑可以在这里完成。

# java - Java 的 main 函数中的 String 数组参数有什么作用？

> ID：13090751
> 
> 赞同：-2
> 
> 时间：2012-10-26T16:24:05.693
> 
> 标签：java, string, main

```
public class Test{
    public static void main(String[] args) {
        System.out.println("What that String do in main function argument");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:24:54.730

为代码提供命令行参数。

这里有一些参考：[Hello World 教程](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:25:19.547

如果你在命令行上运行它，你可以传入参数。

`java myprogram a b c d "e f g"`

会产生`args = ["a", "b", "c", "d", "e f g"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:25:05.537

这些是指命令行参数：[http ://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)

# google-chrome-devtools - 如何在 Chrome 开发工具中创建元素？

> ID：13090754
> 
> 赞同：13
> 
> 时间：2012-10-26T16:24:10.313
> 
> 标签：google-chrome-devtools

我想在 Chrome 开发工具的页面中添加一个新元素。这似乎是相当明显的功能，但我似乎找不到它。

Chrome 是否允许我在 DOM 选项卡中创建元素？我意识到我可以从 JS 控制台制作一些东西，但更愿意在 DOM 选项卡上制作一些东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T16:27:42.543

只需右键单击父元素，更改为“编辑为 HTML”，然后添加您想要的任何元素...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-28T15:27:39.873

根据文档， F2 键应将所选元素切换进和退出编辑模式，以便您可以在其中添加元素。

不幸的是，我使用的是没有 F2 键的 Chromebook。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-26T23:36:29.593

或者您可以启动控制台并附加一个元素。例如，如果我要在这个特定的 stackoverflow.com 帖子上执行以下操作：

```
$('.postcell').append('<code>Testing Element Insertion via Chrome</code>'); 
```

然后我会在 Elements 选项卡中立即看到新添加的元素： ![在此处输入图像描述](../Images/0c4b74e6e404e0ff126d39e613115900.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-25T23:23:50.037

在`Elements`面板中按住 Control 单击并选择`Edit as HTML`可能是最好的方法，但您也可以在控制台中（出于好奇，不需要 jQuery）：

```
var child = document.createElement('div');
var parent = document.getElementByClassName('parent');
parent.appendChild(child); 
```

干杯!

# java - 无法在 NetBeans 上使用 JQuery ajax 调用调试 Java Servlet

> ID：13090768
> 
> 赞同：2
> 
> 时间：2012-10-26T16:25:22.887
> 
> 标签：java, jquery, ajax, jsp, servlets

我正在尝试调试我的 JAVA 项目。在此期间，我尝试使用 JQuery 的 ajax 函数调用 JAVA servlet（在 Apache Tomcat 上运行）。然而，虽然我在调试模式下运行了 JAVA 项目，但我无法在调试模式下访问 servlet 的 ProcessRequest 函数。我检查了 javascript 代码，我似乎确实到达了进行 AJAX 调用的那一行，所以我猜想在 IDE 方面我缺少一些东西。

JSP 和 IDE 端的 JAVA Servlet 本身都没有发生任何事情（使用 Netbeans 7.2）。

调试 AJAX 调用时，我需要启用什么特殊功能吗？

我需要在 Tomcat 端设置什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:48:39.833

您必须在接收 AJAX 请求的侦听器中进行调试。

JSP 或 servlet 不知道也不关心 AJAX；就它而言，这只是另一个 HTTP 请求。

因此，如果您确定正在拨打电话，我会说您需要查看您的调试安排。

# php - Thinkup 插件的自定义 DAO

> ID：13090770
> 
> 赞同：2
> 
> 时间：2012-10-26T16:25:31.810
> 
> 标签：php, thinkup

在为 ThinkUp 框架创建插件时，我“应该”如何创建新的数据模型？

也就是说，我想要/需要我的插件从数据库中读取和写入数据，所以我的直觉是创建一个新的 DAO，这样我可以说

```
DAOFactory::getDAO('MycustomDAO') 
```

但是，由于类名是硬连接到 DAOFactory 中的，因此上述结果会引发“未定义 DAO 映射”异常。在我的插件中执行以下操作是否合适？

```
DAOFactory::dao_mapping['MycustomDAO']['mysql'] = 'MycustomMysqlDAO'; 
```

如果是这样，这个接线代码应该在哪里？如果不是，在 Thinkup 插件中设置数据模型的“正确”方法是什么？需要明确的是，我可以想到六种方法可以做到这一点，但我正在寻找“正确”/“预期”的方式。我查看了文档和运输代码，找不到任何我正在尝试做的事情的例子。

# ruby-on-rails - Rails ActionMailer Content-Type" => "text/Calendar' for iCalendar

> ID：13090774
> 
> 赞同：0
> 
> 时间：2012-10-26T16:25:51.293
> 
> 标签：ruby-on-rails, ruby, actionmailer, icalendar

在 webapps 中，我正在生成一个 ics 字符串，用于通过邮件发送邀请。

我正在使用 icalendar gem 生成 ics 字符串，但我需要使用 Content-Type 发送：文本/日历。

我如何设置 ActionMailer 来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:39:41.710

您可以在文档中查看如何执行此操作：

[ActionMailer](http://apidock.com/rails/ActionMailer/Base)在 Default Hash 部分

喜欢

```
class Notifier < ActionMailer::Base
  def some_message(recipient)
    content-type "your type"
  end
end 
```

# sql - 优化这个插入 SQL Query

> ID：13090775
> 
> 赞同：0
> 
> 时间：2012-10-26T16:25:51.380
> 
> 标签：sql, performance, sqlite, select, insert

我一直试图找出为什么我的 SQLite 数据库执行速度相对较慢（插入 1500 条记录需要 4 秒），我认为我已经将其范围缩小到这个查询。有没有办法优化这个？

```
 "INSERT OR REPLACE INTO MainFrame(WID,PName,PAlias,PModel,FriendID, UniverseID, GalaxyID) VALUES
  ((SELECT WID FROM Worlds WHERE WName= ?),
  @pname,
  @palias,
  @pmodel,
  (SELECT FriendID FROM Friend WHERE FriendName = @eFriend),
  (SELECT UniverseID FROM Universes WHERE UniverseName = @eUniverse),
  (SELECT GalaxyID FROM Galaxies WHERE GalaxyName = @eGalaxy ))"; 
```

如您所见，`Selects`插入查询中使用了一些。这样做的原因是因为循环将数据插入到其他表（`WID`, `FriendID`, `UniverseID`, `GalaxyID`）中，所以在插入之前我没有该数据。我需要将这些数据插入`MainFrame`表中，但这感觉像是一种蛮力方法。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:34:03.553

如果您的 ID 字段是自动递增的，您可以在插入相应记录后立即通过调用[`sqlite3_last_insert_rowid()`](http://www.sqlite.org/c3ref/last_insert_rowid.html)C API 或您的语言中的相应函数来获取它们的值。

（也为所有插入使用一个事务。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:21:12.657

您是否已将问题范围缩小到查询的哪一部分？即，您是否自行运行选择以查看它返回的速度。如果选择很慢，也许看看索引。如果 select 很快，可能它在 MainFrame 表上的索引会减慢插入速度。

# html - 如何创建具有 100% 宽度图像的基于网格的网站？

> ID：13090776
> 
> 赞同：0
> 
> 时间：2012-10-26T16:25:51.187
> 
> 标签：html, css, grid

我想创建基于 1140 网格系统的网站，其“登陆”图像填充整个浏览器，因此您必须滚动查看内容。所以，基本上，当你打开它时，你会看到这个图像（高度和宽度填充了 100% 的浏览器，没有任何限制），当你滚动时，你会看到页面的其余部分，它位于中心和列中. 请不要说我希望“着陆”图像也可以扩展——它也适合智能手机或平板电脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:22:03.923

听起来您正在寻找这样的[东西](http://jsfiddle.net/Aey6S/)。这是一个非常基本的布局，但你应该能够从那个小提琴中得到这个想法。

基本上，您只需创建一个`<div>`100% 的高度和宽度。它将占用浏览器的任何大小，然后您可以在其下方添加另一个块元素来容纳您的其他内容。

```
<div style="height:100%;width:100%;">
    <img src="http://0.tqn.com/d/cats/1/0/c/i/3/iStock_AngryCat425x282.jpg"
                 style="height:100%;width:100%;"/>
</div>
<div>

    here is some other stuff</br>
    here is some other stuff</br>       

</div>​ 
```

# xcode - 是什么让 NIB 可以从 XCode 中的 NIB 名称下拉列表中选择

> ID：13090784
> 
> 赞同：0
> 
> 时间：2012-10-26T16:26:21.050
> 
> 标签：xcode, ios

我想知道是什么让 NIB ( xib ) 可以从 NIB Name 菜单中选择。

我创建了一个名为 Login.xib 的新 UIViewController 子类，它带有 XBI、实现和头文件，但它没有显示在该列表中。我只是想了解是什么使笔尖从该下拉菜单中可用..

谢谢

![笔尖名称](../Images/5e8a0722d6b68e0b16edc25d2777c9f8.png)

# c++ - make_heap() 编译问题

> ID：13090788
> 
> 赞同：0
> 
> 时间：2012-10-26T16:26:58.407
> 
> 标签：c++, linux, stl

编译如下：

```
class Compare
{
   bool cmp(const int& a, const int& b){return a>b;}
};

int main()
{
   vector<int, Compare> v;
   make_heap(v.begin(), v.end(), Compare());
} 
```

导致编译错误 - “类比较”中没有名为“重新绑定”的类模板。可能是什么原因？我将 RedHat Linux 与 gcc 一起使用。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:30:20.403

您在*begin()*和*end()*附近缺少括号，并且以错误的方式定义比较器。这可能应该是这样的：

```
#include <vector>
#include <algorithm>
#include <functional>

struct Compare: std::binary_function<int const&, int const&, bool>
{
   public:
   bool operator()(const int& a, const int& b){return a>b;}
};

int main()
{
   std::vector<int> v;
   std::make_heap(v.begin(), v.end(), Compare());
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:29:44.727

std::vector<> 没有比较器模板参数；它的第二个参数有一个*分配器*。

您将比较器用作向量模板参数列表中的分配器。

```
class Compare
{
   public:
   bool operator()(const int& a, const int& b){return a>b;}
};

int main()
{
   vector<int> v;
   make_heap(v.begin(), v.end(), Compare());
} 
```

# ios - 如何直接生成 SKProduct

> ID：13090791
> 
> 赞同：7
> 
> 时间：2012-10-26T16:27:02.343
> 
> 标签：ios, in-app-purchase, app-store-connect

最近我在工作`IAP`。如您所知，当您想发送付款请求时，您应该致电

```
+ (id)paymentWithProduct:(SKProduct *)product 
```

但我发现获取产品的唯一方法是使用`SKProductsRequest`，有没有办法`SKProduct`直接生成？就像被弃用的一样，

```
+ (id)paymentWithProductIdentifier:(NSString *)identifier 
```

事实是我想要一个`SKProduct`直接使用产品 ID 的新对象。

BR，罗杰

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-18T12:34:56.593

我用它来购买产品而不从 iTunes 获取所有产品：

```
 - (void)buyProductIdentifier:(NSString *)productIdentifier 
{
    SKMutablePayment *payment = [[SKMutablePayment alloc] init] ;
    payment.productIdentifier = productIdentifier;
    [[SKPaymentQueue defaultQueue] addPayment:payment];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-09-06T21:00:11.787

如果您想创建一个`SKProduct`用于单元测试的目的，您可以扩展该类并设置标识符：

```
extension SKProduct {
    convenience init(identifier: String, price: String, priceLocale: Locale) {
        self.init()
        self.setValue(identifier, forKey: "productIdentifier")
        self.setValue(NSDecimalNumber(string: price), forKey: "price")
        self.setValue(priceLocale, forKey: "priceLocale")
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T16:28:49.163

没有这样的机制。您必须让 Apple 批准您的应用内购买并使用 SKProductsRequest API 来检索定价信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-29T20:12:18.403

您可以创建`SKMutablePayment`而不是`SKPayment`：

```
let payment = SKMutablePayment()
payment.productIdentifier = <#ProductIdentifier#>
SKPaymentQueue.default().add(payment) 
```

# intellij-idea - 用于远程桌面使用的 IntelliJ 键盘映射

> ID：13090792
> 
> 赞同：1
> 
> 时间：2012-10-26T16:27:06.887
> 
> 标签：intellij-idea, remote-desktop, keymapping

我注意到当我通过远程桌面使用 IntelliJ 时，我无法在 IntelliJ 中键入 Ctrl-Alt-B（转到实现）。有没有一种方法可以让我通过远程桌面获得 IntelliJ 的键盘映射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:17:28.987

这可能特定于您的桌面和设置，没有针对此环境的特定键盘映射，因为大多数键都可以正常工作。

解决方案是使用`Settings`| `Keymap`并将**Go To Implementation**操作的快捷方式更改为有效的快捷方式。

# c# - 如何在 C# 中使用 WebRequest 和 HttpWebResponse 导航到身份验证 url 并登录到网站？

> ID：13090793
> 
> 赞同：2
> 
> 时间：2012-10-26T16:27:15.587
> 
> 标签：c#, api, rest, authentication, mindmapping

我正在尝试使用 MindMeister API（如此处所述：http: [//www.mindmeister.com/developers/authentication](http://www.mindmeister.com/developers/authentication)）来制作桌面应用程序。到目前为止，我能够生成一个身份验证 url，如他们的开发人员指南中所记录的那样，使用 api 密钥和共享密钥，最终看起来像这样：[http ://www.mindmeister.com/services/auth/?api_key= abc123&perms=删除&api_sig=zxy987](http://www.mindmeister.com/services/auth/?api_key=abc123&perms=delete&api_sig=zxy987)

如果我将该网址复制并粘贴到我的浏览器中，它会将我带到他们的登录页面。一旦我登录，它就会说我的应用程序已经过身份验证，我可以继续我的应用程序，然后我就可以开始使用不同的 REST API 方法。我想导航到该身份验证 URL 并以编程方式登录 MindMeister，而无需将身份验证 URL 复制并粘贴到浏览器中。

到目前为止，我已经尝试过这样的事情

```
 string authenticate 
          = @"http://www.mindmeister.com/services/auth/?" 
               + api_key=abc123&perms=delete&api_sig=zxy987";
        WebRequest request = WebRequest.Create(authenticate);
        @"https://www.mindmeister.com/account/login");
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        //response.ResponseURI == @"https://www.mindmeister.com/account/login"

        WebRequest request2 = WebRequest.Create(response.ResponseUri);
        request2.Credentials = new NetworkCredential("username", "password");
        HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse(); 
```

但这不起作用。

我能得到一些关于如何完成我想要的指导吗？我几乎没有使用 WebRequest 或 HttpWebResponse 的经验，因为我基本上只是在 StackOverflow 上复制并粘贴了其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:50:59.933

从文档看来，官方不支持以这种方式登录。请记住，如果使用 API 密钥运行的大多数服务不喜欢它的使用方式，它们可以并且将会撤销该密钥。

但是，每次用户启动您的应用程序时可能都不需要登录。

看来，如果您`frob`使用该`mm.auth.getFrob`方法获得 a 并将其作为参数与登录名一起传递，则您可以`frob`在该`mm.auth.getToken`方法上使用相同的参数。然后，您可以将此令牌存储在用户桌面上的某个位置，并可以在将来使用它来使用方法。

这应该一直有效，直到用户主动撤销对您的应用程序的权限。

# javascript - 包括空格作为可接受的输出字符

> ID：13090795
> 
> 赞同：0
> 
> 时间：2012-10-26T16:27:19.697
> 
> 标签：javascript, events, char, space

我有一个 id 为“可编辑”的 contenteditable div，我在其中模拟了更改与关键事件关联的字符。你可以在这里看到它的作用：http: [//jsfiddle.net/Ukkmu/66/](http://jsfiddle.net/Ukkmu/66/)

如您所见，无论用户按什么字母数字键，都会输出“Singinme”字符串。在 div 中输入。我的 var 列表中单词之间的空格被忽略。我希望输出包含空格，并阅读“Sing in me”。因为它目前写在我的 javascript 代码的第一行。我得到了帮助，至少可以确定我的问题出在 insertTextAtCursor 函数中，但是如何更改该函数以包含空格作为可接受的输出字符？或者，我是否可以重新编写我的 var 列表，将其键入为“Sing in me”。在 div 中？

为方便起见，我还粘贴了下面的 javascript。

PS：我刚刚发现这是一个浏览器问题。在 Chrome 中，正如我所描述的那样。在 IE 中，它按我的意愿工作——“在我里面唱歌”。带空格。任何想法如何在 Chrome 中进行这项工作？我不知道它是否适用于Firefox。

```
var list = "Sing in me.".split('');
function transformTypedCharacter(charStr) {
    return (/[a-zA-Z]/).test(charStr) ? list.shift()||" " : charStr;
}

function insertTextAtCursor(text) {
    var sel, range, textNode;
    if (window.getSelection) {
        sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            range = sel.getRangeAt(0).cloneRange();
            range.deleteContents();
            textNode = document.createTextNode(text);
            range.insertNode(textNode);

            // Move caret to the end of the newly inserted text node
            range.setStart(textNode, textNode.length);
            range.setEnd(textNode, textNode.length);
            sel.removeAllRanges();
            sel.addRange(range);
        }
    } else if (document.selection && document.selection.createRange) {
        range = document.selection.createRange();
        range.pasteHTML(text);
    }
}

$("#editable").keypress(function(evt) {
    if (evt.which) {
        var charStr = String.fromCharCode(evt.which);
        var transformedChar = transformTypedCharacter(charStr);
        if (transformedChar != charStr) {
            insertTextAtCursor(transformedChar);
            return false;
        }
    }
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:55:11.600

Chrome 吞下空白节点。我无法判断这是否是一个错误，因为似乎多个浏览器对空白和空节点的处理方式不同。

在您的情况下，一个简单的解决方案是使用不间断空格。那是：

```
var list = "Sign\xA0in\xA0me.".split(""); 
```

或者

```
var list = "Sign in me.".replace(/\s/g, "\xA0").split("") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:47:56.100

这与空间无关，为了解决这个问题，请检查[@Alexander's great response](https://stackoverflow.com/a/13091952/78639)。这是关于您的代码中的其他问题。

首先，您只匹配`a-z`和`A-Z`输入字符。如中，您不会替换诸如`periods`, `space`, `numbers`,`non-ascii`字母等的击键。其次，您应该在输入中的位置查找字符，而不是移动数组。使用您的代码，您可以删除文本，然后不会再次替换它。

```
function transformTypedCharacter(charStr) {
    var position = $("#editable").text().length;
    if (position >= list.length) return '';
    else return list[position];
} 
```

将其与亚历山大的答案配对，[您就可以自由回家了](http://jsfiddle.net/vRXph/)！

# air - Adobe Flash CS6 - AIR 导出错误“CreateWinProces 失败”

> ID：13090805
> 
> 赞同：1
> 
> 时间：2012-10-26T16:27:52.810
> 
> 标签：air, flash-cs6

通过尝试在 Flash CS6 (Windows XP) 中调试 AIR 项目，会发生此错误并且 Flash 不再响应：

> CreateWinProcess 失败，错误 2。系统找不到指定的文件。

这个错误甚至会出现一个新的空项目 .fla 文件。我已经将 Air 运行时和 Flash 更新到了最新版本。

如何解决这个问题？

谢谢你。

# python - 干净的标点符号并分成单词 python

> ID：13090806
> 
> 赞同：6
> 
> 时间：2012-10-26T16:27:55.663
> 
> 标签：python, word, line, strip, punctuation

目前正在学习python并且遇到了一些问题。我正在尝试从另一个子程序中取出一行并将其转换为单独的单词，这些单词除了一些标点符号之外已经被剥离。这个程序的输出应该是它显示的单词和行号。应该看起来像这样 -> 单词：[1]

输入文件：

```
please. let! this3 work.
I: hope. it works
and don't shut up 
```

代码：

```
 def createWordList(line):
        wordList2 =[]
        wordList1 = line.split()
        cleanWord = ""
        for word in wordList1: 
            if word != " ":
                for char in word:
                    if char in '!,.?":;0123456789':
                        char = ""
                    cleanWord += char
                    print(cleanWord," cleaned")
                wordList2.append(cleanWord)
         return wordList2 
```

输出：

```
anddon't:[3]
anddon'tshut:[3]
anddon'tshutup:[3]
ihope:[2]
ihopeit:[2]
ihopeitworks:[2]
pleaselet:[1]
pleaseletthis3:[1]
pleaseletthis3work:[1] 
```

我不确定这是什么原因造成的，但我学会了 Ada 并在短时间内过渡到 python。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T16:36:31.643

当然，你也可以使用正则表达式：

```
>>> import re
>>> s = """please. let! this3 work.
... I: hope. it works
... and don't shut up"""
>>> re.findall(r'[^\s!,.?":;0-9]+', s)
['please', 'let', 'this', 'work', 'I', 'hope', 'it', 'works', 'and', "don't", 
 'shut', 'up'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T16:32:08.117

您应该`cleanWord`在外循环的每次迭代的顶部设置回一个空字符串：

```
def createWordList(line):
    wordList2 =[]
    wordList1 = line.split()
    for word in wordList1:
        cleanWord = ""
        for char in word:
            if char in '!,.?":;0123456789':
                char = ""
            cleanWord += char
        wordList2.append(cleanWord)
    return wordList2 
```

请注意，我还删除了`if word != " "`, 因为之后`line.split()`您将永远不会有空格。

```
>>> createWordList('please. let! this3 work.')
['please', 'let', 'this', 'work'] 
```

# eclipse - Eclipse PTP：启用上传规则时出现 NullPointerException

> ID：13090810
> 
> 赞同：1
> 
> 时间：2012-10-26T16:28:23.047
> 
> 标签：eclipse, eclipse-plugin

我正在开发一个 MPI 应用程序，我想在我的应用程序启动之前上传输入数据文件。[我完成了Eclipse Parallel Tools Platform User Guide](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.ptp.doc.user%2Fhtml%2F03pLaunchConfig.html)中指定的 Synchronize 选项卡。

然后我运行我的应用程序并得到一个错误：`An internal error occurred during: "Launching myapp".java.lang.NullPointerException`. 我尝试了不同的设置，但仍然无法正常工作。

有没有人遇到同样的问题？我该如何解决？

我在 Ubuntu 12.04 上使用带有 PTP v1.5.1 的 Eclipse Juno。我安装了 ssh/ssh-server。

谢谢！

# python - 解析可选部分的正则表达式

> ID：13090811
> 
> 赞同：0
> 
> 时间：2012-10-26T16:28:28.757
> 
> 标签：python, regex

与[这个问题](https://stackoverflow.com/questions/1876217/regex-parsing-multiple-elements-with-the-first-one-being-optional)类似，但差异足够微妙，我仍然需要一些帮助。

目前我有：

```
'(.*)\[(\d+\-\d+)\]' 
```

作为我的正则表达式，它匹配任意数量的字符，后跟方括号 []，其中包含用破折号分隔的两位小数。我的问题是，我希望它也只匹配方括号之间的一个十进制数字，甚至方括号之间可能没有任何内容。所以：

```
word[1-5] = match
word[5] = match
word[] = match (not essential) 
```

并确保

```
word[-5] = no match 
```

谁能指出我下一步的方向。我目前发现正则表达式有点像猜谜游戏，尽管我想和它们一起变得更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:30:45.490

和你一起去，让最后一部分可选

```
(.*)\[(\d+(-\d+)?)\] 
```

使用`?`.

为了完成其他任务，好吧，再去`?`一次

```
(.*)\[(\d+(-\d+)?)?\]
                  ^here 
```

一个工作示例[http://rubular.com/r/t0MaHyHfeS](http://rubular.com/r/t0MaHyHfeS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:31:13.043

用于`?`匹配 0 或 1 匹配

所以使用`?`for`-\d+`和 用于分隔的两个数字`-`

```
(.*)\[(\d+(-\d+)?)?\] 
```

无需转义`-`..只有在字符类之间才有特殊含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:32:51.653

`(.*)\[((\d+(?:\-\d+)?)?)\]`

这将匹配所有内容，即使其中有 0 个数字，并且会反向引用您（在匹配 [1-5] 中）：

1- 比赛 2- 1-5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:33:24.680

并非每个正则表达式解释器都支持这一点，但您可以为括号内的部分尝试“或”运算符：

```
'(.*)\[(\d+\-\d+|\d+)\]' 
```

# c#-4.0 - 关于在 windows 7 桌面应用程序中添加注册表项的安全问题

> ID：13090822
> 
> 赞同：0
> 
> 时间：2012-10-26T16:29:34.210
> 
> 标签：c#-4.0, windows-7-x64, windows-applications

为了安全起见，我曾经添加`registry key`过我的。`windows application`它**在 XP 操作系统中运行良好**但是当我在**Windows 7 OS 系统（64 位）**上安装我的应用程序时，4-5 天后我的应用程序在`HKEY_LOCAL_MACHINE\SOFTWARE`.

我的应用程序再次要求在系统中添加注册表项。我不知道如何`HKEY_LOCAL_MACHINE\SOFTWARE`在 Windows 7 OS 64 位中删除或删除我的软件的 reg 密钥。

要在 C#.Net App 中添加 reg 键，我使用了以下代码：

```
// Create an instance of HKEY_LOCAL_MACHINE registry key
RegistryKey parentKey = Registry.LocalMachine;
// Open the SOFTWARE registry sub key under the HKEY_LOCAL_MACHINE parent key
  RegistryKey softwareKey = parentKey.OpenSubKey("SOFTWARE", true);
  // Create a DaveOnC# registry sub key under the SOFTWARE key
  RegistryKey subKey = softwareKey.CreateSubKey("MySoftWareRegKey");
  subKey.SetValue("Name", encryptedMac, RegistryValueKind.String);

     subKey.Close();
     softwareKey.Close();
     parentKey.Close(); 
```

我想再次提一下`no error has been generated in application at running time`，但是在 Windows 7 64 位系统中的位置几天（可能是 4-5 天）`my application couldn't find reg key`后，我不得不再次添加它以执行我的应用程序。

所以直接我的问题是如何在 Windows 7 操作系统中永久添加 Reg Key `HKEY_LOCAL_MACHINE\SOFTWARE`。

任何建议或答案都非常感谢。提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:44:44.433

我怀疑这与[注册表虚拟化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884%28v=vs.85%29.aspx)有关。您的 32 位交互式进程（注册表虚拟化不适用于服务或 64 位进程）可能没有权限在 Windows 7 上创建此注册表设置，因此系统将其转移到每个用户设置中，如中所述那个链接。如该链接中所述，您可以使用带有 FLAGS 选项的 Reg.exe 命令行实用程序来查询任何注册表项的虚拟化标志的状态。

我不确定为什么它会在一段时间后消失 - 也许它正在检查不同的用户或应用了不同的虚拟化策略？但真正的解决方法是在可行的情况下以管理员权限运行程序，以便正确编写密钥。

**编辑**：针对您的评论，[HKEY_LOCAL_MACHINE\Software\Wow6432Node](http://msdn.microsoft.com/en-us/library/ms724072%28VS.85%29.aspx)是 HKEY_LOCAL_MACHINE\Software 的 32 位等效项（尽管 32 位应用程序不知道此重定向）。所以这是 32 位程序的正常行为。您使用什么工具来检查注册表项 - 我怀疑它没有显示重定向？

# objective-c - 查找类对于给定键是否符合键值

> ID：13090825
> 
> 赞同：4
> 
> 时间：2012-10-26T16:29:48.680
> 
> 标签：objective-c, cocoa-touch, cocoa, key-value-observing, key-value-coding

有没有一种方法可以确定一个类是否符合给定键的键值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T21:41:54.883

您可以询问它是否响应选择器，或者询问 key 的值

```
//will check for the getter
[anObj respondsToSelector:@selector(someKey)]

//will check in a way that doesn't throw an exception for a value
[andObj valueForKey:@"someKey"]

//keypath of a nested value
[anObj valueForKeypath:@"child.property"] 
```

但是，如果您收到一条消息表明某些内容不符合 KVC，这通常意味着您设置了不正确的内容，例如使用错误的键或类的绑定。

# c# - 将 C# 参数传递给存储过程报告

> ID：13090831
> 
> 赞同：0
> 
> 时间：2012-10-26T16:30:09.500
> 
> 标签：c#, report

我正在尝试触发报告运行，并检查字段 FiscalYearId 的“全选”，这是一个字符串类型。我可以成功传递一个字符串，例如“2”，报告会找到它。但是，当我尝试通过“全选”或“2,3,4”时，多重检查字段不会对此进行处理。

以下是报告中存储过程的一部分：

```
ALTER PROCEDURE [dbo].[...]
@FiscalYearId varchar (100) = null ,
...
select ...
where ...
and (@FiscalYearID IS NULL OR p.FiscalYearId IN (SELECT * FROM SPLIT(@FiscalYearID, ','))) 
```

触发报告在 radwindow 中弹出的我的 c# 代码是：

```
`string years = "2,3,4";
newWindow.NavigateUrl = "../Reporting/SingleReport.aspx?Report=AdHocSourcingReport&VendorID=" 
+ vendorId + "&VendorReport=true" + "&FiscalYearId="+years;` 
```

目前，vendorId 字符串和 VendorReport 布尔值拉取成功，它是由逗号分隔的字符串，在运行报表时不会填充。我最初尝试发送“全选”，这就是我想要的。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:47:58.437

这就是我过去处理拆分逗号分隔字符串的方式：

```
创建函数
    [dbo].[GetItemTable]
    (
    @Items VARCHAR(1000)
    )
回报
    @ItemTable 表
    (
    RowID INT IDENTITY(1,1) 主键，
    项目 VARCHAR(30)
    )
作为
开始

    声明 @ProcessItems VARCHAR(1000)
    声明 @CurrentItem VARCHAR(30)

    SET @ProcessItems = REPLACE(@Items, '''', '')

    IF SUBSTRING(@ProcessItems, LEN(@ProcessItems), 1) ','
        SET @ProcessItems = @ProcessItems + ','

        WHILE CHARINDEX(',', @ProcessItems) > 0
        开始

            SET @CurrentItem = LTRIM(CAST(SUBSTRING(@ProcessItems, 0, CHARINDEX(',', @ProcessItems)) AS VARCHAR(30)))

            插入
                @ItemTable
                (
                物品
                )
            价值观
                (
                @CurrentItem
                )

            SET @ProcessItems = SUBSTRING(@ProcessItems, CHARINDEX(',', @ProcessItems) + 1, LEN(@ProcessItems))

        END -- 计划时   

    返回
结尾
```

显然，您可以将当前项目大小更改为您碰巧需要的大小。

然后像这样使用它：

```
WHERE (p.FiscalYearId IN(SELECT item FROM dbo.GetItemTable(@FiscalYearID)))
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:39:05.357

我记得几年前做过类似的事情，并且在列表中遇到了同样的问题。

你能试试这个吗...

```
ALTER PROCEDURE [dbo].[...] @FiscalYearId varchar (100) = null ,
...选择...在哪里...和
（@FiscalYearID 为 NULL 或 p.FiscalYearId IN (@FiscalYearID)）

```

此外，如果您发送“全选”字符串，您可能需要在您的过程中有一个条件来检查它并将查询更改为“从会计年度表中选择 id”

# sitecore - 安装了 .NET 4.5 的 Sitecore Workbox 引发 Cryptography.Purpose 异常

> ID：13090832
> 
> 赞同：0
> 
> 时间：2012-10-26T16:30:13.593
> 
> 标签：sitecore, .net-4.5, sitecore6

安装 .NET 4.5 后，任何访问 Workbox 的用户现在都会收到异常：

> “System.Int32”类型的对象无法转换为“System.Web.Security.Cryptography.Purpose”类型。

经过一些基本的谷歌搜索，似乎这个问题曾经在登录时发生，并在 6.5 中解决了登录问题。我登录 Sitecore 没有任何问题。到目前为止，我只在工作流框中看到了这个问题。

在安装 .NET 4.5 之前，我们在 .NET 4.0 上运行没有任何问题。

有没有人找到一种解决方法来让安装了 .NET 4.5 的 Workbox 运行？

**注意：**我目前使用的是 Sitecore 6.5 Update 5

**全栈跟踪：**

> [ArgumentException：“System.Int32”类型的对象无法转换为“System.Web.Security.Cryptography.Purpose”类型。] System.RuntimeType.TryChangeType（对象值，Binder binder，CultureInfoculture，Boolean needsSpecialCast）+185 System .Reflection.MethodBase.CheckArguments(Object[] 参数, Binder binder, BindingFlags invokeAttr, CultureInfoculture, Signature sig) +122 System.Reflection.RuntimeMethodInfo.InvokeArgumentsCheck(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfoculture ) +206 System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] 参数, CultureInfo 文化) +126 Sitecore.SecurityModel.Cryptography.CookieProtectionHelperWrapper.Encode(CookieProtection cookieProtection,Byte[] buf，Int32 计数）+175 Sitecore.Shell.Feeds.FeedUrlOptions.ToString() +192 Sitecore.Shell.Applications.Workbox.WorkboxForm.DisplayWorkflow（IWorkflow 工作流）+496 Sitecore.Shell.Applications.Workbox.WorkboxForm。 OnLoad(EventArgs e) +545
> 
> [TargetInvocationException：调用目标已引发异常。] System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) +0 System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[ ] 参数，Object[] 参数）+76 System.Reflection.RuntimeMethodInfo.Invoke（Object obj，BindingFlags invokeAttr，Binder binder，Object[] 参数，CultureInfo 文化）+193 System.Reflection.MethodBase.Invoke（Object obj，Object[ ] 参数) +35 Sitecore.Web.UI.Sheer.ClientPage.OnLoad(EventArgs e) +337 System.Web.UI.Control.LoadRecursive() +116 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint ) +2910

**更新：** 我们已经更改了 web.config 条目，这就是 Login 正常工作的原因：

```
<setting name=”Login.RememberLastLoggedInUserName” value=”false” /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:56:26.150

作为一种解决方法，只需在您的 web.config 中更改此设置。

`<setting name=”Login.RememberLastLoggedInUserName” value=”false” />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:07:23.283

感谢 Mark 和 Stephen 的帮助，不幸的是，这两个选项都不适用于此特定场景。（但是，我赞成，因为他们可能会帮助其他人遇到这个问题）。

经过进一步挖掘，在这种情况下发生的情况似乎是一些 Sitecore 6.5 Update 5 DLL 尚未部署，而是在版本 6.5 Update 4 上。

重新部署正确的 Update 5 DLL（并保留我们之前的 web.config 更改）后，该站点现在在 .NET 4.5 上运行，并且工作箱现在加载，没有抛出任何异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:12:06.160

This [blog post](http://kamranicus.com/Blog/Posts/45/sitecore-and-net-framework-45)似乎有一个解决方案，其中涉及卸载.NET 4.5并重新安装4.0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T12:45:31.853

如果您运行的是 6.5 update 5 之前的版本，则需要覆盖工作箱方法：

```
DisplayStates
DisplayWorkflow 
```

并像这样设置提要选项：

```
var feedUrlOptions = new FeedUrlOptions("/sitecore/shell/~/feed/workflowstate.aspx")
   {
      // HACK: This is to make workbox work on machines with .NET 4.5 installed
      UseUrlAuthentication = false
   }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T01:13:45.900

我知道这已经解决了，但是当我遇到这个错误并以不同的方式解决时，我的想法仍然会有所帮助。

查看以下链接：

1.  [http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/09/Object-of-type-System-Int32-cannot-be-converted-to-type-系统-Web-安全-密码学-Purpose.aspx](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/09/Object-of-type-System-Int32-cannot-be-converted-to-type-System-Web-Security-Cryptography-Purpose.aspx)

2.  [阅读 Kevin Obee 在http://kamranicus.com/Blog/Posts/45/sitecore-and-net-framework-45](http://kamranicus.com/Blog/Posts/45/sitecore-and-net-framework-45)底部的评论

3.  [http://truncatedcodr.wordpress.com/2012/06/20/fix-sitecore-and-net-framework-4-5/](http://truncatedcodr.wordpress.com/2012/06/20/fix-sitecore-and-net-framework-4-5/)

阅读本文解决了我的问题，并且 Sitecore 工作正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-13T12:55:54.470

除此之外，我遇到了这个问题，但只是在启动工作箱时。此链接[http://www.daveleigh.co.uk/sitecore-workbox-object-of-type-system-int32-cannot-be-converted-to-type-system-web-security-cryptography-purpose/](http://www.daveleigh.co.uk/sitecore-workbox-object-of-type-system-int32-cannot-be-converted-to-type-system-web-security-cryptography-purpose/)提供了一个sitecore 提供的修复程序解决了我的问题。

# ruby-on-rails - dk.rb:86:in 'rename': 权限被拒绝

> ID：13090835
> 
> 赞同：0
> 
> 时间：2012-10-26T16:30:22.860
> 
> 标签：ruby-on-rails

DevKit 安装错误：

```
C:\DevKit>ruby dk.rb 安装
[INFO] 更新“C:/Ruby193new”的便利通知 gem 覆盖
dk.rb:86:in `rename': Permission denied - (C:/Ruby193new/lib/ruby/site_ruby/1.9.
1/rubygems/defaults/operating_system.rb, C:/Ruby193new/lib/ruby/site_ruby/1.9.1/
rubygems/defaults/operating_system.rb.20121026214615) (Errno::EACCES)
        来自 dk.rb:86:in `update_gem_override'
        来自 dk.rb:260:in `block (2 levels) in install'
        来自 dk.rb:246:in `each'
        来自 dk.rb:246:in `block in install'
        来自 dk.rb:219:in `each'
        来自 dk.rb:219:in `install'
        来自 dk.rb:313:in `run'
        来自 dk.rb:332:in `'

C:\开发工具包>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:02:55.803

我遇到了这个问题，并且能够通过以管理员身份运行命令行来解决它。

右键单击命令行-> 以管理员身份运行。这是在 Windows 7 64 位上

# javascript - getElementById 返回 null

> ID：13090837
> 
> 赞同：0
> 
> 时间：2012-10-26T16:30:40.773
> 
> 标签：javascript, csv

我正在尝试在我的以下表格中使用此表单读取文件：

```
<form name="UploadForm" method="post">
    <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
    Choose a CSV file to upload: <input name="upload_file" type="file" /><br />
    <input type="submit" value="Upload" onClick="uploadFile()" />
</form> 
```

但是当我去读取这个函数中的值时，我收到一个“cannon find”元素”的空错误：

```
function uploadFile() {
        var file = document.getElementById('UploadForm').elements['upload_file'].value;
        var allTextLines = file.split(/\r\n|\n/);
        var headers = allTextLines[0].split(',');
        var lines = [];

        for (var i=1; i<allTextLines.length; i++) {
            var data = allTextLines[i].split(',');
            if (data.length == headers.length) {

                var tarr = [];
                for (var j=0; j<headers.length; j++) {
                    tarr.push(headers[j]+":"+data[j]);
                }
                lines.push(tarr);
            }
        }
        alert(lines);
    }; 
```

有人对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:32:53.540

`getElementById`返回具有指定 id 的元素，但表单根本没有`id`。您正在使用 obsolete属性（在 1998 年发布 HTML 4 时已`name`被取代）。`id`

将其更改为：

```
<form id="UploadForm" method="post"> 
```

（NB在表单*控件*`name`上并*没有*过时，例如and ）*`input``select`*

 ** * *

请注意，您的事件处理程序不会取消提交按钮的默认行为。因此，除了运行 JS，您将立即提交表单、离开页面并取消 JS（如果它执行任何异步操作，顾名思义就是这样）。

如果您要使用内部事件属性，那么您需要`return false`在 JavaScript 成功的情况下使用。

我建议放弃它们以支持它们[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:40:00.207

将您的输入标签更改为：

```
 <input name="upload_file" id="upload_file" type="file" /> 
```

还将这一行从：

document.getElementById('UploadForm').elements['upload_file'].value

更改为

document.getElementById('upload_file').value*

# r - R - Markdown 避免包加载消息

> ID：13090838
> 
> 赞同：226
> 
> 时间：2012-10-26T16:30:43.150
> 
> 标签：r, markdown, knitr, rstudio, r-markdown

我一直在通过 R-Studio 使用 Knitr，并且认为它非常简洁。不过我有一个小问题。当我在 R-Chunk 中获取文件时，knitr 输出包括如下外部注释：

```
+ FALSE Loading required package: ggplot2
+ FALSE Loading required package: gridExtra
+ FALSE Loading required package: grid
+ FALSE Loading required package: VGAM
+ FALSE Loading required package: splines
+ FALSE Loading required package: stats4
+ FALSE Attaching package: 'VGAM'
+ FALSE The following object(s) are masked from 'package:stats4': 
```

我试图以各种方式设置 R-chunk 选项，但似乎仍然没有避免这个问题：

```
```{r echo=FALSE, cache=FALSE, results=FALSE, warning=FALSE, comment=FALSE, warning=FALSE} 
source("C:/Rscripts/source.R");

``` 
```

有没有办法评论这些消息？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2012-10-26T16:35:57.137

您可以使用`include=FALSE`排除块中的所有内容。

```
```{r include=FALSE}
source("C:/Rscripts/source.R")
``` 
```

如果您只想抑制消息，请`message=FALSE`改用：

```
```{r message=FALSE}
source("C:/Rscripts/source.R")
``` 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-10-26T16:35:46.637

```
```{r results='hide', message=FALSE, warning=FALSE}
library(RJSONIO)
library(AnotherPackage)
``` 
```

请参阅Knitr 文档中的[块选项](http://yihui.name/knitr/options)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-31T01:25:57.923

我对 R Markdown 的最佳解决方案是创建一个代码块，仅用于加载库并排除块中的所有内容。

```
{r results='asis', echo=FALSE, include=FALSE,}
knitr::opts_chunk$set(echo = TRUE, warning=FALSE)
#formating tables
library(xtable)

#data wrangling
library(dplyr)

#text processing
library(stringi) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-08-21T14:11:09.207

这是一个老问题，但这是另一种方法。

`source`您可以通过将调用包装在`suppressPackageStartupMessages()`、`suppressMessages()`和/或中来修改 R 代码本身而不是块选项`suppressWarnings()`。例如：

```
```{r echo=FALSE}
suppressWarnings(suppressMessages(suppressPackageStartupMessages({
source("C:/Rscripts/source.R")
})
``` 
```

您还可以将这些函数放在脚本中的`library()`调用周围。`"source.R"`

# ios - Cocoa/Objective-C - 验证 NSDictionary 上是否存在键

> ID：13090843
> 
> 赞同：14
> 
> 时间：2012-10-26T16:30:53.653
> 
> 标签：ios, objective-c, cocoa, nsdictionary

如何验证密钥是否存在于`NSDictionary`?

我知道如何验证它是否有一些内容，但我很想验证它是否存在，因为它是动态的，我必须阻止它。就像在某些情况下，它可能碰巧有一个带有“名称”的键并且是值，但在另一种情况下，这对值可能不存在。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-26T19:57:38.960

最简单的方法是：

```
[dictionary objectForKey:@"key"] != nil 
```

由于字典返回`nil`不存在的键（因此您不能将 nil 存储在字典中，因为您使用`NSNull`）。

**编辑：回答评论布拉德利的回答**

你进一步问：

> 有没有办法验证： [[[contactDetailsDictionary objectForKey:@"professional"] objectForKey:@"CurrentJob"] objectForKey:@"Role"] 是否存在？没有一个键，因为它是一个非常大的字典，所以它可能存在于另一个类别中。

在Objective-C中你可以向 发送消息`nil`，它不是错误并返回`nil`，所以扩展上面的简单方法你只需编写：

```
[[[contactDetailsDictionary objectForKey:@"professional"] 
                              objectForKey:@"CurrentJob"] 
                                objectForKey:@"Role"] != nil 
```

好像键序列的任何部分都不存在 LHS 返回`nil`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-26T16:34:35.070

`NSDictionary`将所有键作为 an 返回`NSArray`，然后`containsObject`在数组上使用。

```
NSDictionary* dictionary = [NSDictionary dictionaryWithObjectsAndKeys:@"object", @"key"];
if ([[dictionary allKeys] containsObject:@"key"]) {
  NSLog(@"'key' exists.");
} 
```

# titanium - 如何判断我的 Titanium 应用程序是否在模拟器上运行？

> ID：13090844
> 
> 赞同：0
> 
> 时间：2012-10-26T16:30:58.363
> 
> 标签：titanium

我需要模拟测试数据，而不是在使用模拟器进行调试时尝试使用相机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:37:41.657

您应该能够为此使用 的值`Titanium.Platform.model`。IIRC，它`x86_64`在模拟器上返回。

# ruby-on-rails - 我可以通过 activerecord 关系创建 activerecord 关联（使用祖先 gem 时）吗？

> ID：13090848
> 
> 赞同：4
> 
> 时间：2012-10-26T16:31:08.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, ancestry

我在我的 rails 项目中使用[祖先 gem](https://github.com/stefankroes/ancestry "祖传宝石")来创建组层次结构。一个组可以属于一个父组，并且可以有许多子组。每个组可以有许多属于一个组的用户。该模型如下所示：

```
class Group < ActiveRecord::Base
  has_ancestry

  has_many :users
end 
```

我希望能够为一个组的后代获取所有用户，如下所示：

```
class Group < ActiveRecord::Base
  has_ancestry

  has_many :users
  has_many :descendants_users, through: :descendants
end 
```

当然，这是行不通的。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:22:07.927

在您的 Group 模型中定义这样的方法。

```
def descendants_users
    User.joins(:groups).where(:group_id => self.subtree_ids) # Use descendant ids if you dont't want 'self' users
end 
```

这将执行**1**次查询来获取 subtree_ids 和**1**次查询来获取用户，结果已经是不同的用户集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:14:29.093

可能您只需要定义返回所有后代用户的方法。所以你的模型可能看起来像这样：

```
 class Group < ActiveRecord::Base
    has_ancestry

    has_many :users

    def descendants_users
      self.subtree.map(&:users).flatten.compact.uniq
    end
  end 
```

# javascript - 覆盖 jquery 菜单的外部 CSS 规则

> ID：13090849
> 
> 赞同：0
> 
> 时间：2012-10-26T16:31:12.577
> 
> 标签：javascript, jquery, css

我有一个工作正常的页面布局，它是我不想弄乱的（除非我必须这样做）。我不擅长javascript，所以我在网上找到了一个例子。我遇到的问题是，当使用手风琴菜单时，子菜单向右偏移。我在 html 本身中使用了一些内联 CSS，并使用`!important`命令覆盖列表元素上的自动填充。这似乎没有任何效果。JS[在这里](http://jsfiddle.net/aqeFd/1/)摆弄。那里有大量自动生成的注释代码，所以会很混乱，我只需要所有这些代码来展示手风琴子菜单的示例。为什么内联 CSS 不覆盖外部 CSS 文件？为什么`!important`关键字不起作用？

我以为有一些填充，但 `ul { padding: 0; margin: 0; }` 在我的外部 CSS 文件中，并且填充显然设置为 0。

这是使手风琴工作的CSS。

```
<style type="text/css">
#accordionNav {
    float: left;
    width: 560px;
    list-style:none;

    padding:none;
}
#accordionNav li a {
    display: block;
    padding:5px;
    background: #ccc;
    border-top: 1px solid #eee;
    border-bottom: 1px solid #999;
    text-decoration: none;
    color: #000;
    list-style:none;
    padding:none !important;

    width: 560px;
}
#accordionNav li a:hover, #accordionNav li a.active {
    background: #999;
    color: #fff;
}
#accordionNav li ul {
    display: none; 
    list-style:none;
    padding:none !important;

}
#accordionNav li ul li a {
    padding:0 0 0;
    background: #ececec;
    list-style:none;
    padding:none !important;

} 
```

知道是什么导致子菜单无法正确对齐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:38:07.183

你用过：

```
padding: none !important; 
```

代替

```
padding: 0 !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:38:56.483

尝试更改`padding: none;`为`padding: 0`.

# c# - WinForm 调整面板 onFocus 的大小

> ID：13090854
> 
> 赞同：0
> 
> 时间：2012-10-26T16:31:27.817
> 
> 标签：c#, winforms

> **可能重复：**
> [面板没有获得焦点](https://stackoverflow.com/questions/3562235/panel-not-getting-focus)

我在winform中测试面板控件，我遇到了一个问题。

我将这 2 个事件添加到面板中，但没有一个事件触发：

```
 private void panel_onFocus(object sender, EventArgs e)
    {
        panel1.Size = new Size(panel1.Size.Width, panel1.Size.Height * panel1.Size.Height);
    }

    private void panel_lostFocus(object sender, EventArgs e)
    {
        panel1.Size = new Size(panel1.Size.Width, panel1.Size.Height / panel1.Size.Height);
    } 
```

我在表单上有另一个控件来测试焦点（一个按钮）。

为什么 onFocus 和 lostFocus 不火？

（对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:18:36.023

以下是一个可选面板（继承自常规面板）

从[面板获得焦点没有得到关注](https://stackoverflow.com/questions/3562235/panel-not-getting-focus/3562449#3562449)

尝试这个。在您的项目中添加此类。只是改变`namespace yourApplicaionName`。编译你的项目。然后你会`selectablePanel`在你的工具箱中看到。您可以使用它代替普通面板。希望您能够专注于这个面板

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace yourApplicaionName
{
    class selectablePanel : Panel
    {
        public selectablePanel()
        {
            this.SetStyle(ControlStyles.Selectable, true);            
            ResizeRedraw = true;
            this.TabStop = true;
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            this.Focus();
            base.OnMouseDown(e);
        }

        protected override bool IsInputKey(Keys keyData)
        {
            if (keyData == Keys.Up || keyData == Keys.Down) return true;
            if (keyData == Keys.Left || keyData == Keys.Right) return true;
            return base.IsInputKey(keyData);
        }

        protected override void OnEnter(EventArgs e)
        {
            this.Invalidate();
            base.OnEnter(e);
        }

        protected override void OnLeave(EventArgs e)
        {
            this.Invalidate();
            base.OnLeave(e);
        }

        protected override void OnPaint(PaintEventArgs pe)
        {
            base.OnPaint(pe);
            if (this.Focused)
            {
                var rc = this.ClientRectangle;
                rc.Inflate(-2, -2);
                ControlPaint.DrawFocusRectangle(pe.Graphics, rc);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:40:33.003

首先 lostFocus 将高度设置为 1，onGotFocus 将乘以 1*1，即 1 实际上不会改变任何内容。

# vba - Join() 上的 ByRef 参数类型不匹配错误

> ID：13090857
> 
> 赞同：1
> 
> 时间：2012-10-26T16:31:38.290
> 
> 标签：vba, excel, byref

我查看了这里报告的 ByRef 错误，但仍然找不到我的方式的错误。

我有这个，其中 OrderedCaseList() 是 Variant 类型的函数。它被正确调用并按预期返回一个数组。

但是，当我尝试编译时，我在`Join(arr...`命令中得到“ByRef 参数类型不匹配”。我不知道为什么...

```
Private Sub worksheet_Activate()
Dim s As String
Dim arr() As String
Dim var As Variant
Dim i As Long, j As Long

var = OrderedCaseList(True)
ReDim arr(0 To UBound(var))

j = UBound(var)

For i = 0 To j
  arr(i) = var(i)
Next

s = Join(arr, ",")
Range("c16").Validation.Add Type:=xlValidateCustom, Formula1:=s

End Sub 
```

注释掉最后两行代码时的变量 watch 输出为：

```
OrderedCaseList, Type: Variant/Variant
Expression:OrderedCaseList(0), Value:"Case 1", Type:Variant/String
etc.

Var, Type@ Variant/Variant
Expression: Var(0), Value:"Case 1", Type:Variant/String
etc.

arr, Type:String(0 to 3)
Expression:arr(0), Value:"Case 1", Type:String 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:46:17.800

您的代码看起来不错，无论我如何设置**OrderedCaseList**函数（我*认为*这不是问题），我都无法破解它。

您是否有可能引用了包含 JOIN 函数的第 3 方 dll？

您可以通过更改此行来验证您正在调用 VBA 函数：

```
s = Join(arr, ",") 
```

对此：

```
s = VBA.Strings.Join(arr, ",") 
```

看看它是否编译

# python-2.7 - 使用 Homebrew 和 PIP 让 Fabric 在 Mountain Lion 上工作

> ID：13090859
> 
> 赞同：3
> 
> 时间：2012-10-26T16:31:56.633
> 
> 标签：python-2.7, pip, osx-mountain-lion, homebrew, fabric

我似乎无法让 Fabric 正确运行。我发现这篇文章并没有解决我的问题[让 Fabric Python 库正常工作](https://stackoverflow.com/questions/5749596/getting-fabric-python-library-to-work)

我使用 Homebrew 安装了 Python `brew install python`（这也安装了 PIP）：

运行`which python`我得到：

```
/usr/local/Cellar/python/2.7.3/bin/python 
```

然后我安装了织物`pip install fabric`

```
Requirement already satisfied (use --upgrade to upgrade): fabric in /usr/local/lib/python2.7/site-packages
Requirement already satisfied (use --upgrade to upgrade): ssh>=1.7.14 in /usr/local/lib/python2.7/site-packages (from fabric)
Requirement already satisfied (use --upgrade to upgrade): pycrypto>=2.1,!=2.4 in /usr/local/lib/python2.7/site-packages (from ssh>=1.7.14->fabric) 
```

另一篇文章建议织物将位于`/usr/local/Cellar/python/2.7.1/bin/fab`

在上面做一个`ls`（但在我的例子中是 2.7.3）得到以下（没有织物）。

```
lrwxr-xr-x   1 darron  staff   80 Oct 26 17:37 2to3 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/2to3
lrwxr-xr-x   1 darron  staff   82 Oct 26 17:37 2to3-2 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/2to3-2
lrwxr-xr-x   1 darron  staff   84 Oct 26 17:37 2to3-2.7 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/2to3-2.7
-r-xr-xr-x   1 darron  staff  422 Oct 26 17:37 easy_install
-r-xr-xr-x   1 darron  staff  430 Oct 26 17:37 easy_install-2.7
lrwxr-xr-x   1 darron  staff   80 Oct 26 17:37 idle -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/idle
lrwxr-xr-x   1 darron  staff   81 Oct 26 17:37 idle2 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/idle2
lrwxr-xr-x   1 darron  staff   83 Oct 26 17:37 idle2.7 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/idle2.7
-r-xr-xr-x   1 darron  staff  380 Oct 26 17:37 pip
-r-xr-xr-x   1 darron  staff  388 Oct 26 17:37 pip-2.7
lrwxr-xr-x   1 darron  staff   81 Oct 26 17:37 pydoc -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pydoc
lrwxr-xr-x   1 darron  staff   82 Oct 26 17:37 pydoc2 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pydoc2
lrwxr-xr-x   1 darron  staff   84 Oct 26 17:37 pydoc2.7 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pydoc2.7
lrwxr-xr-x   1 darron  staff   82 Oct 26 17:37 python -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python
lrwxr-xr-x   1 darron  staff   89 Oct 26 17:37 python-config -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python-config
lrwxr-xr-x   1 darron  staff   83 Oct 26 17:37 python2 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2
lrwxr-xr-x   1 darron  staff   90 Oct 26 17:37 python2-config -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2-config
lrwxr-xr-x   1 darron  staff   85 Oct 26 17:37 python2.7 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2.7
lrwxr-xr-x   1 darron  staff   92 Oct 26 17:37 python2.7-config -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/python2.7-config
lrwxr-xr-x   1 darron  staff   83 Oct 26 17:37 pythonw -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pythonw
lrwxr-xr-x   1 darron  staff   84 Oct 26 17:37 pythonw2 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pythonw2
lrwxr-xr-x   1 darron  staff   86 Oct 26 17:37 pythonw2.7 -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/pythonw2.7
lrwxr-xr-x   1 darron  staff   84 Oct 26 17:37 smtpd.py -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/smtpd.py
lrwxr-xr-x   1 darron  staff   87 Oct 26 17:37 smtpd2.7.py -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/smtpd2.7.py
lrwxr-xr-x   1 darron  staff   85 Oct 26 17:37 smtpd2.py -> /usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/bin/smtpd2.py 
```

我已将实际安装定位在`/usr/local/lib/python2.7/site-packages`

```
drwxr-xr-x  14 darron  staff   476 Oct 26 17:41 Crypto
drwxr-xr-x   9 darron  staff   306 Oct 26 17:41 Fabric-1.4.3-py2.7.egg-info
drwxr-xr-x  10 darron  staff   340 Oct 26 17:37 distribute-0.6.28-py2.7.egg
-rw-r--r--   1 darron  staff   237 Oct 26 17:37 easy-install.pth
drwxr-xr-x  10 darron  staff   340 Oct 26 17:41 fabfile
drwxr-xr-x  41 darron  staff  1394 Oct 26 17:41 fabric
drwxr-xr-x   7 darron  staff   238 Oct 22 08:13 git_remote_helpers
lrwxr-xr-x   1 darron  staff    93 Oct 22 08:13 git_remote_helpers-0.1.0-py2.7.egg-info -> ../../../Cellar/git/1.8.0/lib/python2.7/site-packages/git_remote_helpers-0.1.0-py2.7.egg-info
drwxr-xr-x   4 darron  staff   136 Oct 26 17:37 pip-1.2.1-py2.7.egg
drwxr-xr-x   7 darron  staff   238 Oct 26 17:41 pycrypto-2.6-py2.7.egg-info
-rw-r--r--   1 darron  staff   144 Oct 26 17:37 setuptools-0.6c11-py2.7.egg-info
-rw-r--r--   1 darron  staff    34 Oct 26 17:37 setuptools.pth
-rw-r--r--   1 darron  staff  1224 Oct 26 17:37 sitecustomize.py
-rw-r--r--   1 darron  staff   600 Oct 26 17:37 sitecustomize.pyc
drwxr-xr-x  72 darron  staff  2448 Oct 26 17:41 ssh
drwxr-xr-x   8 darron  staff   272 Oct 26 17:41 ssh-1.7.14-py2.7.egg-info 
```

我的问题是如何让它工作？`fab`在提示下运行让我：

```
-bash: fab: command not found 
```

注意 - 我的路径设置`/etc/paths`如下：

```
/usr/local/bin
/usr/local/sbin
/usr/bin
/bin
/usr/sbin
/sbin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:10:26.117

您发布的链接已过时。`fab`应该位于`/usr/local/share/python`目录中——Homebrew 的 Python 将已安装模块中的脚本放在该目录中。添加`/usr/local/share/python`到您的`PATH`.

# java - 为什么我不能使用 toString().length() 作为 hashCode() 返回？

> ID：13090865
> 
> 赞同：1
> 
> 时间：2012-10-26T16:32:45.790
> 
> 标签：java, string, collections, scjp, ocpjp

```
public class Dog
{
    int collarID;
    String name;
    public static void main(String[] args){
       Dog d = new Dog();  
       d.name="hose";  
       System.out.print(d.hashCode());            
    }

    public boolean equals(Object arg0)
    {
        if (arg0 instanceof Dog)
        {
            Dog new_name = (Dog) arg0;
            return collarID==new_name.collarID && new_name.name.equals(name);
        }
        return false;
    }

    public int hashCode()
    {
        return toString().length();//StackOverflow
    }
} 
```

我错过了什么？由于默认的 toString() 方法，是否会经常调用 hashCode() 方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T16:36:26.307

如果你看到类`toString`方法的源代码`Object`，它看起来像： -

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

因此，它在内部调用`hashCode()`方法。现在，由于您已经覆盖了该`hashCode`方法，它将调用`hashCode`您的类的方法，该方法再次调用类的`toString`方法`Object`。

这肯定会导致`StackOverFlowError`

您宁愿重写`toString`类中的方法，以使其工作。

**PS： -**

但是，您的`hashCode`实现应该被设计，考虑到您在`equals`方法中使用的属性，以维护`contract`中间`hashCode`和`equals`方法。只使用那些你用来比较你的方法的`attributes`计算。`hashCode``instances``equals`

`hashCode`有关方法的更多详细信息，请参阅这些链接`equals`：-

*   [`Effective Java - Item # 8 - Obey the general contract when overriding equals`](http://my.safaribooksonline.com/book/programming/java/9780137150021/methods-common-to-all-objects/ch03lev1sec1)
*   [`Effective Java - Item # 9 - Always override hashCode when you override equals`](http://my.safaribooksonline.com/book/programming/java/9780137150021/methods-common-to-all-objects/ch03lev1sec1#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODAxMzcxNTAwMjElMkZjaDAzbGV2MXNlYzI=)

# iphone - TableView drawRect 和 UIButtons

> ID：13090867
> 
> 赞同：0
> 
> 时间：2012-10-26T16:32:49.190
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个`TableViewCell`带有大量标签、图像和按钮的复合体。我使用`UILabel`,`UIImageView`和让一切正常工作`UIButton`，但为了提高性能，我正在尽可能多地将其移植到`drawRect`.

我知道很多人用它`drawRect`来优化 TableViews，但我还没有找到任何关于如何将按钮与`drawRect`.

那么我如何将一个按钮（正常和突出显示的单独图像）合并到`drawRect`？

# c - 将浮点数和整数转换为 char*

> ID：13090868
> 
> 赞同：0
> 
> 时间：2012-10-26T16:32:51.393
> 
> 标签：c, embedded

我是 C 的新手，有点想进入这个使用 C 进行嵌入式处理的世界。我需要将`char*`整数和浮点数（仅 0.01 分辨率）转换并输出到具有 8 位接口的 LCD 屏幕。我一直在阅读一些帖子，我看到了所有这些转换`int`和`float`转换的好主意，`char*`但我不确定它们发生了什么。

有人可以为我的两个查询和一点解释提供一种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:37:46.653

它实际上取决于标准库，并且在某些嵌入式系统中，该库已部分实现，甚至不存在。使用完全[标准的 C99](http://en.wikipedia.org/wiki/C99)实现，您可能会执行类似的操作

```
char buf[40];
int i;
double x;
// compute i & x, then make a string from them with::
snprintf(buf, sizeof(buf), "i=%2d x=%.2f", i, x); 
```

然后你可以将它发送`buf`到你的 LCD 端口，或者`strdup`它以供以后使用。（如果你使用`strdup`你需要`free`的结果）。

[有关详细信息，请阅读snprintf](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)的文档。您可能应该测试`int`.`snprintf`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:06:25.487

由于您正在从事嵌入式编程，因此您应该意识到标准转换通常使用对任何处理器都非常繁重的划分。

由于整数是使用除以十来转换的，因此您可以使用乘以不变整数来实现除法。此方法应允许您在使用除法转换值中的单个数字所需的时间内转换大多数值。

对于浮点使用以下步骤：

1.  如果符号为负，则保存符号并取绝对值
2.  乘以 10.0 提高到您需要的小数位数
3.  添加 0.5 并转换为整数
4.  使用之前建议的除法方法将整数转换为字符串
5.  确保字符串至少为小数位数 + 1，必要时在开头插入 ascii 0
6.  根据需要在开头插入减号
7.  在适当的位置插入小数点

这是一个需要两位小数的示例

```
3758.3125
375831.25    (multiply by 10^2)
375831.75    (add 0.5)
375831       (convert to integer)
"375831"     (convert to string)
"3758.31"    (insert decimal point => final result) 
```

一个更困难的案例

```
-0.0625
0.0625       (keep sign)
6.25         (multiply by 10^2)
6.75         (add 0.5)
6            (convert to integer)
"6"          (convert to string)
"006         (insert ascii 0 as required)
"-006"       (insert minus sign)
"-0.06"      (insert decimal point => final result) 
```

# com - FT232R USB IC，带直接访问 IO（无 UART）

> ID：13090872
> 
> 赞同：0
> 
> 时间：2012-10-26T16:32:56.947
> 
> 标签：com, serial-port, usb, uart

我想创建一个使用 FT232R 通过 USB 直接访问 IO 的场景。更详细地说，场景如下：我想通过 FT232R USB 设备为 LIN 收发器 IC 供电。但是，FT232R 作为 USB 串行转换器输出 UART 信号，其中包括一个起始位和一个停止位。对我来说，要求没有这些开始和停止位，即使它们在 UART 协议中是标准化的。

我的问题：是否可以使用此设备的 bang 模式来避免开始/停止位并传输原始数据？那么，如何编写代码来做到这一点呢？如果没有，是否有任何 USB 收发器，必须通过 COM/驱动程序访问来满足我的要求？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:39:14.353

是的，该芯片提供 4 个可用于通用位敲击的引脚。这是一个[应用笔记](http://www.ftdichip.com/Support/Documents/AppNotes/AN_232R-01_Bit_Bang_Mode_Available_For_FT232R_and_Ft245R.pdf)，描述了如何使用 bit banging 模式。

# c# - 文本框更改未保存到 DataTable

> ID：13090873
> 
> 赞同：2
> 
> 时间：2012-10-26T16:33:01.923
> 
> 标签：c#, winforms, data-binding

我在 WinForms 应用程序中进行简单的表格编辑时遇到问题。我一定是错过了一步。

我有一个`DataSet`包含一个`DataTable`连接到一个数据库的`SqlDataAdapter`. `SqlCommandBuilder`上有一个`SqlDataAdapter`。在表单上，​​有`TextBoxes`哪些绑定到`DataTable`. 绑定是在 Designer 中完成的，其机器生成的语句如下所示：

```
this.tbLast.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.belkData, "belk_mem.last", true)); 
```

当我在 中填充行时，`DataTable`数据库中的值出现在文本框中，但是当我更改 的内容时`TextBox`，更改显然不会出现在`DataTable`. 当我尝试保存更改时，以下两个都返回 null：

```
DataTable dtChanges = dtMem.GetChanges();
DataSet dsChanges = belkData.GetChanges(); 
```

我忘记了什么？

* * *

**编辑 - 对[mrlucmorin](https://stackoverflow.com/users/172769/)的回应：**

保存在一个按钮下。代码是：

```
 BindingContext[belkData, "belk_mem"].EndCurrentEdit();

    try
    {
        DataSet dsChanges = belkData.GetChanges();
        if (dsChanges != null)
        {
            int nRows = sdaMem.Update(dsChanges);
            MessageBox.Show("Row(s) Updated: " + nRows.ToString());
            belkData.AcceptChanges();
        }
        else { MessageBox.Show("Nothing to save.", "No changes"); }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Error: " + ex.Message);
    } 
```

我尝试在不改变行为的情况下放入这些语句：

```
dtMem.AcceptChanges();
belkData.AcceptChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:45:27.877

*如果您也使用 BindingSource：只需执行一个简单的 BindingSource.EndEdit()，您的 TextBox 数据就会发送到 DataTable。例子：-

```
_bsHeader.EndEdit();
if (_dsHeader.HasChanges())
{
    DataTable dsInsert = _dsHeader.GetChanges(DataRowState.Added).Copy();
    _objDal.Insert(dsInsert);
} 
```

希望这可以帮助任何在这里绊倒的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:51:25.723

创建[Binding](http://msdn.microsoft.com/en-us/library/system.windows.forms.binding.aspx)实例时缺少[DataSourceUpdateMode.OnPropertyChanged 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.datasourceupdatemode%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T19:12:05.400

您的问题只是缺少 5 个字母....您在财产上失踪`.last`了`dataMember`。

```
BindingContext[belkData, "belk_mem"].EndCurrentEdit(); 
```

本来应该

```
BindingContext[belkData, "belk_mem.last"].EndCurrentEdit(); 
```

* * *

另一种解决方法是使用中介`BindingSource`并`EndEdit()`在调用之前调用它`GetChanges()`。

将您的绑定更改为：

```
BindingSource bs = new BindingSource();
bs.DataSource = belkData;
tbLast.DataBindings.Add("Text", bs, "belk_mem.last", true); 
```

将您的保存按钮代码更改为

```
try
{
    bs.EndEdit(); // needs to be called before getting changes.
    DataSet dsChanges = belkData.GetChanges();
    if (dsChanges != null)
    {
        int nRows = sdaMem.Update(dsChanges);
        MessageBox.Show("Row(s) Updated: " + nRows.ToString());
        belkData.AcceptChanges();
    }
    else { MessageBox.Show("Nothing to save.", "No changes"); }
}
catch (Exception ex)
{
    MessageBox.Show("Error: " + ex.Message);
} 
```

* * *

`EndEdit()`如果您想避免使用中介，也可以只调用各个行`BindingSource`。

```
belkData.Rows[0].EndEdit(); 
```

或者如果您要处理不止一排

```
foreach( DataRow row in belkData.Rows )
    row.EndEdit(); 
```

* * *

对于那些努力理解为什么`EndEdit()`或`EndCurrentEdit()`需要首先被调用的人。查看有关[Row States and Row Versions](https://msdn.microsoft.com/en-us/library/ww3k31w0(v=vs.110).aspx)和[BindingSource.EndEdit Method](https://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.endedit(v=vs.110).aspx)的文档。在您调用 之前`EndEdit()`，绑定保持在编辑状态，并且更改仅`Proposed`在`DataTable`. 调用`EndEdit()`将更改移动到`Current`版本。只有这样，`DataTable`“有变化”。`DbDataAdapter`的不看`Proposed`版本。

# java - 为通过 jnlp 启动的小程序增加内存

> ID：13090874
> 
> 赞同：0
> 
> 时间：2012-10-26T16:33:09.660
> 
> 标签：java, memory-management, applet, java-web-start

我正在开发一个需要进行一些计算并且需要在线可用的 java 应用程序。

我从 2005 年开始使用 Java 进行开发，但从来不需要将任何东西放到网上，我一直使用 RMI。

我研究了如何创建小程序并成功地将我的桌面应用程序转换为小程序（应用程序生命周期，将 JFrame 转换为 JApplet 等）

我注意到性能确实变慢了，所以我尝试了其他方法。我阅读了 Java Web Start，并开始思考它。

找到这篇文章： [http](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html) ://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/runAppletFunction.html并按照它我做了以下事情（写下来供将来的读者参考）：

*   制作了我的应用程序的罐子并签名（显然名称已更改）
*   编写了以下 JNLP：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <jnlp href="appJNLP.jnlp">
        <information>
            <title>Software title</title>
            <vendor>Society name</vendor>
            <offline-allowed />
        </information>
        <resources>
            <j2se version ="1.6+" initial-heap-size="256m" max-heap-size="1024m"
           href="http://java.sun.com/products/autodl/j2se" />
            <jar href="app.jar" main="true" />
            <jar href="mysql-connector-java-5.1.20-bin.jar"/>
            <jar href="poi-3.8-20120326.jar"/>
            <jar href="forms-1.3.0.jar"/>
        </resources>
        <applet-desc name="Name" main-class="mainClass" width="1024" height="700"/>
    </jnlp> 
    ```

*   编写了以下 HTML 页面：

    ```
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"         "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
            <title>Titolo</title>
        </head>
        <body>
            <script src="http://www.java.com/js/deployJava.js"></script>
            <script> 
                var attributes = {code:'mainClass.class', 
                            archive:'app.jar,mysql-connector-java-5.1.20-bin.jar,poi-3.8-20120326.jar,forms-1.3.0.jar', 
                            width:1024, height:700} ;
                var parameters = {jnlp_href:'appJNLP.jnlp'} ; 
                var version = '1.6' ;
                deployJava.runApplet(attributes, parameters, version);  
             </script>
             <noscript>This page requires JavaScript.</noscript>
        </body>
    </html> 
    ```

*   将以下文件结构放在我的 Tomcat webapp 文件夹中：

    ```
    webapps\app
        app.jar
        appJNLP.jnlp
        page.html
        mysql-connector-java-5.1.20-bin.jar
        poi-3.8-20120326.jar
        forms-1.3.0.jar 
    ```

如您所见，我选择了混合部署方式（在此方法使小程序能够在旧的和下一代 Java 插件软件上运行之前发布的链接中说明）。我想我做的一切都很好。小程序在网页中加载，但速度很慢......我在 jnlp 部分中添加了内存参数，在此响应之后：[如何启动具有更多内存的 Java 小程序？](https://stackoverflow.com/questions/102003/how-can-i-start-an-java-applet-with-more-memory)(initial-heap-size="256m" max-heap-size="1024m") 但它们似乎被忽略了。我还尝试在我的 2gb RAM 机器上放置错误值，例如 initial-heap-size="5000m"，但小程序仍然加载并且仍然很慢。控制台在 jnlp 文件的运行结束后显示此内容，但小程序仍在运行：

```
Match: selecting maxHeap: 8388608000
Match: selecting InitHeap: 5242880000
Match: digesting vmargs: null
Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
Match: digest LaunchDesc: http://localhost:8090/TestServer/gestioneoneri.jnlp
Match: digest properties: []
Match: JVM args: [JVMParameters: isSecure: true, args: ]
Match: endTraversal ..
security:  --- parseCommandLine converted : -Xms5000m
into:
[-Xms5000m]
Match: JVM args final: -Xmx8000m -Xms5000m 
```

它不应该抛出异常吗？

现在我的问题是：

*   如何确定代码是在 JNLP 环境中而不是在 applet 环境中执行的？我看不到 Java Web Start 徽标。正常吗？
*   如何将初始和最大内存大小增加到更多的人类值？
*   我需要将这个软件嵌入到网页中。由于我不知道我使用的是 applet 还是 java web start 应用程序，我该如何改善我的用户体验？例如，我正在谈论扩展 JApplet 或 JFrame。如果我无法增加内存，我应该如何将我的小程序转换为 jws 应用程序？

我愿意接受建议。感谢您的时间！

安德烈亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T02:03:13.827

emm...很多抽象的问题

我会试着回答一点

所以...

*   如何确定代码是在 JNLP 环境中而不是在 applet 环境中执行的？我看不到 Java Web Start 徽标。正常吗？

如果您使用 JNLP 启动它并且启动成功，则可以确定它是由 JAWS 启动的；我也没有看到 JAWS 徽标……但这很正常。我不记得因为什么 JRE 升级它消失了，但是看到你的小程序已经被 JRE 运行，你可以简单地观察临时 Internet 文件缓存（查看它的 jnlp 文件）

*   如何将初始和最大内存大小增加到更多的人类值？

我记得，有一个 jnlp 参数使这个......它就像

> ```
> <j2se version="1.3" initial-heap-size="64m" max-heap-size="128m"/> 
> ```

有关更多详细信息，请参阅[jnlp 语法](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html#resources)...

*   我需要将这个软件嵌入到网页中。由于我不知道我使用的是 applet 还是 java web start 应用程序，我该如何改善我的用户体验？例如，我说的是扩展 JApplet 或 JFrame。如果我无法增加内存，我应该如何将我的小程序转换为 jws 应用程序

在 JAWS 应用程序的情况下，我记得，在应用程序启动期间应该显示一个 JAWS 徽标。所以你可以轻松地将小程序与应用程序分开我猜......使用应用程序或小程序完全取决于您的项目要求......

# linux - 如何在 linux 中使用管道或重定向按照我想要的顺序将文件附加到另一个文件？

> ID：13090875
> 
> 赞同：1
> 
> 时间：2012-10-26T16:33:12.183
> 
> 标签：linux, bash, shell, unix, awk

假设我在包含同一天数据的文件夹中有不同的文件，例如：

```
ThisFile_2012-10-01.txt
ThatFile_2012-10-01.txt
AnotherSilly_2012-10-01.txt
InnovativeFilesEH_2012-10-01.txt 
```

我如何以任何首选顺序将它们附加到彼此？下面是我需要输入我的 shellscript 的确切方式吗？该文件夹每天获取相同的文件，但日期不同。旧日期消失了，所以每天都有这 4 个文件。

```
InnovativeFilesEH_*.txt >> ThatFile_*.txt
ThisFile_*.txt >> ThatFile_*.txt
AnotherSilly_*.txt >> ThatFile_*.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:14:20.950

最后，按预期使用“猫”:-)：

```
cat InnovativeFilesEH_*.txt ThisFile_*.txt AnotherSilly_*.txt >> ThatFile_*.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:42:40.690

假设：

*   想要保留附加这些文件的特定顺序。

使用您提供的示例：

```
#!/bin/sh

# First find the actual files we want to operate on
# and save them into shell variables:

final_output_file="Desired_File_Name.txt"

that_file=$(find -name ThatFile_*.txt)
inno_file=$(find -name InnovativeFilesEH_*.txt)
this_file=$(find -name ThisFile_*.txt)
another_silly_file=$(find -name AnotherSilly_*.txt)

# Now append the 4 files to Desired_File_Name.txt in the specific order:

cat $that_file > $final_output_file
cat $inno_file >> $final_output_file
cat $this_file >> $final_output_file
cat $another_silly_file >> $final_output_file 
```

`cat`通过重新排序/修改语句来调整您希望附加文件的顺序

# javascript - 如何在另一个窗口中打开画布，然后在 javascript 中在其上绘制一些东西

> ID：13090879
> 
> 赞同：1
> 
> 时间：2012-10-26T16:33:21.593
> 
> 标签：javascript, image, html, canvas, window

我想单击一个按钮以打开另一个带有画布的窗口，然后我可以在其上绘制一些图像。我怎样才能做到这一点？以下代码给出了 [object HTMLCanvasElement]，但没有显示任何内容。它应该已经是一个图像绘图了。

```
 var currentcanvas = document.getElementById(theCanvas);
 var popup = window.open("");
 popup.document.write(currentcanvas); 
```

以下代码显示了正确的图像，但我无法使用 Canvas2Image 将画布转换为图像然后显示在新窗口中，因为我需要在其上绘制一些东西。

```
 var renderedImg = Canvas2Image.saveAsJPEG(theCanvas, true, width, height, "");
 var dataURL = renderedImg.src;
 var popup = window.open("");
 popup.document.write('<img src="' + dataURL + '" />'); 
```

谢谢您的帮助！

# jquery - jquery 不选择 jquery 添加的元素

> ID：13090887
> 
> 赞同：0
> 
> 时间：2012-10-26T16:34:01.107
> 
> 标签：jquery

所以我有一个 jquery 函数，当点击类 'ajaxsubnote' 时它会做一些事情

```
$('.ajaxsubnote').click(function(){
     //do something....
}) 
```

但是用户可以通过 jquery 动态添加具有类 'ajaxsubnote' 的元素。我的问题是这些动态添加的元素，当点击时，似乎没有调用上述函数，而最初在 DOM 上的元素却......

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:35:08.530

您应该使用委托事件方法来处理动态元素。见下文，

```
// v--- replace document with closest parent container that exist in DOM
$(document).on('click', '.ajaxsubnote', function(){
     //do something....
}) 
```

对于旧版本使用委托，

```
// v--- replace document with closest parent container that exist in DOM
$(document).delegate('.ajaxsubnote', 'click', function(){
     //do something....
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:39:49.097

绑定/单击事件和委托事件之间的区别非常重要。

当你使用 bind 或 click 等快捷方式时，它会将指定的事件绑定到当时匹配特定选择器的所有元素。此选择器是及时的快照，在添加新元素时不会更新。

当您使用事件委托时，您提供了一个静态父选择器，然后是您的动态元素选择器。现在，当您单击父选择器中的任意位置时，jQuery 会检查目标是否与父选择器匹配。如果目标与第二个选择器匹配，则触发事件。这意味着您可以向父内容部分添加和删除符合事件触发条件的元素，而无需每次都绑定事件。

[http://api.jquery.com/on/](http://api.jquery.com/on/)

所以你需要的是这样的：

```
$(parentElement).on( "click", ".ajaxsubnode", function(){
     //do something....
}); 
```

parentElement 尽可能具体，同时仍然是所有可能的 ajaxsubnode 类的父级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:35:03.703

您需要使用该`on()`函数来委托点击事件

```
$("dynamicContainerElement").on("click", "dynamicallyAddedElement", 
     function () 
     { 
        /* Your code here */
     }); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

# network-programming - 在写入之前我需要加入多播组吗？

> ID：13090891
> 
> 赞同：1
> 
> 时间：2012-10-26T16:34:22.390
> 
> 标签：network-programming, multicast

假设我有一个只产生消息的进程，它对接收来自其他组成员的消息不感兴趣。在写入之前真的需要加入多播组吗？

*我可以想象它取决于所使用的多播路由协议的场景......但如果你有细节会很棒。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:49:17.783

不，你没有。加入群只需要阅读。

# c++ - 类上的 C++ 结构

> ID：13090894
> 
> 赞同：0
> 
> 时间：2012-10-26T16:34:36.860
> 
> 标签：c++

这里需要一些指导

我有一个代码是

```
struct Point
{
   int x;
   int y;
}; 
```

然后在我的课上我得到了一个函数

```
class MyClass
{
   private:
      Point myPoint[4];
   public:
     void setPoint();
};

void MyClass::setPoint()
{
   int xData,yData;

   for (int i=0;i<4;i++)
   {
      cout << "Please enter x-ordinate:";
      cin >> xData;

      cout << "Please enter y-ordinate:";
      cin >> yData;

      //at this part the code throw a segmentation core dump.
      myPoint[i].x = xData;
      myPoint[i].y = yData;
   }

} 
```

在第一次运行时没有任何反应，但在第二次循环中，发生分段核心转储。我的代码有什么问题？

main.cpp 上的附加代码

```
#include "MyClass.h"

int main()
{
MyClass *mClass;

mclass->setPoint();
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:47:47.970

您必须在使用指针之前分配内存：

```
int main()
{
    MyClass *mClass = new MyClass ();
    mclass->setPoint();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:48:01.137

```
MyClass *mClass;

mclass->setPoint(); 
```

你的问题就在那里。你从来没有分配过一个对象，只是一个指针。

```
int main () 
{
  MyClass mclass;
  mclass.setPoint();
} 
```

作为替代方案，如果您需要一个生命周期超出变量范围的对象，您可以使用`new`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:59:50.313

你需要为你的对象分配内存

```
MyClass *obj = new MyClass();
                ^ 
```

**new**是一种动态分配内存的语言结构

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:00:29.640

与对象的构造有关。

```
MyClass *mClass; 
```

意味着你得到一个Myclass指针，这个指针有能力处理一个Myclass类型的对象，只是有能力。但是您没有“真实对象”，“真实对象”意味着您在系统堆上申请并获得一块内存。然后

```
mclass->setPoint(); 
```

这个调用意味着调用 Myclass-type**对象**的函数，而不是调用**Myclass-class**的函数。

因此，代码可能是正确的：

```
MyClass *mClass = new MyClass ();
mclass->setPoint(); 
```

new 关键字意味着为 Myclass 类型的对象应用一块内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T16:50:47.013

问题在于创建对象。更准确地说，在您的代码中，您没有创建一个对象。它只是一个发生内存分配的指针。应该是这样的：

```
MyClass *mClass = new MyClass();
mClass->setPoint(); 
```

# python - 无法删除链表中的第一个节点

> ID：13090896
> 
> 赞同：0
> 
> 时间：2012-10-26T16:34:38.250
> 
> 标签：python, oop, linked-list

我正在尝试在python中创建一个链表类（我知道毫无意义，但这是一个学习练习），如果我尝试删除链表的第一个元素，我编写的删除节点的方法不起作用. 如果要删除的节点位于链表中的任何其他位置，则该方法可以正常工作。有人可以给我一些关于我哪里出错的见解吗？

到目前为止，这是我的代码：

```
class Node:

    def __init__(self, data=None, next=None):
        self.data = data
        self.next = next

    def __repr__(self):
      return repr(self.data)

    def printNodes(self):
        while self:
            print self.data
            self = self.next

    def removeNode(self, datum):
        """removes node from linked list"""
        if self.data == datum:
            return self.next
        while self.next:
            if self.next.data == datum:
                self.next = self.next.next
                return self
            self = self.next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:51:34.423

修改`removeNode`使其始终返回链表的头部，然后将结果分配回您的头节点。像这样：

```
def removeNode(self, datum):
    """removes node from linked list and returns head node"""
    head = self
    curr_node = self
    if curr_node.data == datum:
        head = curr_node.next
    else:
        while curr_node.next:
            if curr_node.next.data == datum:
                curr_node.next = self.next.next
                break
            curr_node = curr_node.next
    return head 
```

或者，如果您想避免将结果分配`removeNode`回头：

```
def removeNode(self, datum):
    """removes node from linked list"""
    curr_node = self
    if curr_node.data == datum:
        # steals the the data from the second node
        curr_node.data = curr_node.next.data
        curr_node.next = curr_node.next.next
    else:
        while curr_node.next:
            if curr_node.next.data == datum:
                curr_node.next = curr_node.next.next
                break
            curr_node = curr_node.next 
```

**注意：** 我分配`self`给`curr_node`是因为感觉修改`self`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:40:36.810

如您的代码所示，`removeNode`方法返回链接列表的新第一个节点。您应该使用`head = head.removeNode(1)`而不是仅仅调用该方法。

# javascript - 正则表达式用于负十进制值客户端和服务器端c#jquery

> ID：13090900
> 
> 赞同：0
> 
> 时间：2012-10-26T16:35:05.863
> 
> 标签：javascript, jquery

我有一个绑定到元素的按键功能，该元素只需要允许正负十进制字符。即 0-9, '.' , '-'

我需要防止输入字符的任何其他字符

有没有办法在当前的按键功能中实现这一点

```
 $('.test').keyup(function (event) {

     //if character is NOT ok i.e. 0-9, '.' , '-'
     //STOP
     ..ELSE
    //continue to do something

}); 
```

PS我正在使用jquery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:54:40.827

另一种方法是在键入时替换所有非法字符：

```
$("selector").keyup(function (e) {
        this.value = this.value.replace(/[^0-9\.-]/g, '');
    }); 
```

当用户不输入文本而是粘贴它时，可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:51:14.043

密钥是在 keydown 上插入的，因此您应该改用该事件。那么这应该工作：

```
$('.test').on('keyup', function(e){
  e.preventDefault();
  if(e.keyCode >= 48 && e.keyCode <= 57 // regular numbers
     || e.keyCode >= 96 && e.keyCode <= 106 // Numpad
     || e.keyCode === 189 // Minus
  ){
    try{
      parseInt($(this).val());
      // Continue, this is a valid numeric value.
    }catch(ex){
       // Stop
    }
  }else {
    // Stop
  }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T16:46:28.500

希望这可以帮助：

```
var string = '-10.56',
    illegal = /[^0-9.-]/.test(string); // return true if illegal character found 
```

# java - 如何只允许在同一个包中实现接口

> ID：13090906
> 
> 赞同：4
> 
> 时间：2012-10-26T16:35:14.817
> 
> 标签：java, interface, package, visibility, multiple-inheritance

我有一个`P`包裹

*   `public interface I`
*   `public class S1 extends Foo implements I`
*   `public class S2 extends Bar implements I`.

现在我想禁止`I`外部的实现`P`，但`I`应该公开，因为我将它用于`public method(I parameter)`.

如何才能做到这一点？

是否有一些“包装最终模式”？

你有过这样的情况吗？

* * *

细节：

我知道使用仅包私有构造函数而不是 interface 的抽象类的可能性`I`，但是`S1`并`S2`扩展不同的类，所以我需要多重继承（因为模拟多重继承（参见例如 Effective Java item 18）在这里不起作用）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T18:10:47.283

您也可以尝试以下尝试：

使用虚拟包私有接口并在您的公共接口中创建一个返回它的方法。像这样：

```
public interface I {
  Dummy getDummy(); // this can only be used and implemented inside of the 
                    // current package, because Dummy is package private
  String methodToUseOutsideOfPackage();
}

interface Dummy {} 
```

多亏了这一点，只有当前包中的类才能实现 interface `I`。来自外部的所有类将永远无法实现该方法`Dummy getDummy()`。同时，包外部的类将能够使用接口的所有其他方法，这些方法在其签名中`I`没有接口。`Dummy`

这个解决方案并不漂亮，因为你的界面中有一个无用的方法`I`，但你应该能够实现你想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T16:38:58.753

做不到。如果你的接口是`public`它可以由任何人实现。您的两个实现是否可以扩展一个抽象类并封装它们当前正在扩展的那些？

更好的问题是你真的需要执行这条规则吗？接口的重点是您应该能够接受和实现该接口。如果您确实需要，您可以在使用接口时通过检查实例的类是否是您允许的两个类之一来进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:39:06.347

如果你做了接口声明

```
interface I 
```

它应该使它只能从包和类中访问

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# sql - DBI：bind_param 将字符串转换为 ntext -> nvarchar(max) 和 ntext 不兼容

> ID：13090907
> 
> 赞同：4
> 
> 时间：2012-10-26T16:35:25.420
> 
> 标签：sql, perl, dbi, sqlbindparameter, ntext

我有一个关于 perl DBI 的 bind_param 的问题。以下 SQL 有效：

```
my $sth = $dbh->prepare("SELECT id FROM table WHERE id = 'string'");
$sth->execute(); 
```

虽然以下没有：

```
my $sth = $dbh->prepare("SELECT id FROM table WHERE id = ?");
$sth->execute('string'); 
```

最后一个查询导致的错误是`[ODBC SQL Server Driver][SQL Server]The data types nvarchar(max) and ntext are incompatible in the equal to operator. (SQL-42000)`.

看起来`bind_param`，它被 调用`execute`，将“字符串”转换为 ntext。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T07:54:20.227

考虑在 SQL 调用之前绑定值类型：

```
use DBI qw(:sql_types);

my $sth = $dbh->prepare( "SELECT id FROM table WHERE id = ?" );

my $key = 'string';
my $sth->bind_param( 1, $key, SQL_VARCHAR );

$sth->execute(); 
```

# ios - 如何实现 3D 翻转转场？

> ID：13090909
> 
> 赞同：1
> 
> 时间：2012-10-26T16:35:37.890
> 
> 标签：ios, animation

我可以使用 CATransition 自定义一个 segue，如下代码 ![在此处输入图像描述](../Images/bd4b026d7b20f7af09bb45480f9c5dbc.png)

我想在两个 viewController 之间实现 3D 翻转过渡，而不是推送样式。有什么办法吗？

# javascript - 可以在回调中设置 javascript 函数参数的值吗？

> ID：13090914
> 
> 赞同：0
> 
> 时间：2012-10-26T16:35:58.563
> 
> 标签：javascript, jquery, ajax, callback

这个标题是满口的。这是我在下面的代码中尝试做的事情。本例中的回调在 jQuery $.get 函数中。

```
 function getMapMarkup(loadUrl, myVar) {
        me = myVar;
        $.get(
            loadUrl,
            { var1: "hello", var2: "world" },
            function(responseText) {
              me = responseText;
              myVar = me; //doesn't work.  
            },
            "html"
         );     
        } 
```

有没有办法改变回调`myVar`中的值`function(responseText)`，以便我以后可以在我的程序中使用它？还是有另一种（更好的）方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:38:30.273

如果*`later on`*你的意思是在`$.get`调用之后立即没有，那么没有办法，因为 AJAX 是异步的，并且`$.get`立即返回并且成功回调可以在很久以后执行。知道何时发生这种情况的唯一可靠方法是将取决于其结果的代码放入**回调**`success`中。您还可以在成功回调中调用其他函数，将 AJAX 调用的结果传递给它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:40:03.547

您很可能`myVar`在执行回调之前访问。

`$.get`进行异步 AJAX 调用，因此稍后将在您的服务器响应后调用回调函数，因此任何立即访问`myVar`都不会具有更新的值。

# sqlite - SQLite 视图功能？

> ID：13090919
> 
> 赞同：0
> 
> 时间：2012-10-26T16:36:13.007
> 
> 标签：sqlite, sql-view, fts3

因此，假设我有一个 FTS[34] 表`data`和一个常规表`info`，它们由 a 绑定在一起`info.ID = data.rowid`。我有一个`master`代表这个连接的视图，我用它来查询整体信息。以下是`CREATE TABLE`声明：

```
CREATE VIRTUAL TABLE data USING fts4(
    Name,
    Keywords,
    Aliases
    Description);

CREATE TABLE info (
    ID INTEGER PRIMARY KEY,
    -- A bunch of other columns...
    );

CREATE VIEW master AS SELECT
    info.ID AS ID
    data.Name AS Name,
    data.Keywords AS Keywords,
    data.Aliases AS Aliases,
    data.Description AS Description,
    -- A bunch of other columns...
FROM info JOIN data ON info.ID = data.rowid; 
```

现在我要做的是创建另一个视图，而不是从表中选择整个单元格，而是选择在表的每一列上执行`data`的 SQLite[片段](http://www.sqlite.org/fts3.html#section_4_2)`data`函数的结果：

```
CREATE VIEW search AS SELECT
    master.*,
    snippet(data '<b>', '</b>', '...', 0) AS sn_Name,
    snippet(data '<b>', '</b>', '...', 1) AS sn_Keywords,
    snippet(data '<b>', '</b>', '...', 2) AS sn_Aliases,
    snippet(data '<b>', '</b>', '...', 3) AS sn_Description
FROM master JOIN data ON master.ID = data.rowid; 
```

但是，当我从 Python 中执行该语句时，我得到以下信息：

```
sqlite3.OperationalError: near "'<b>'": syntax error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:18:26.150

`data`和`'<b>'`参数值之间缺少逗号。

# java - 获取 Java 进程的 CPU 使用率

> ID：13090920
> 
> 赞同：1
> 
> 时间：2012-10-26T16:36:14.677
> 
> 标签：java, linux, jboss

我需要从 LINUX 中的 java 代码中获取特定进程的 CPU 使用率。

我试过了

> 进程 p = Runtime.getRuntime().exec("top");

或者

> 进程 p = Runtime.getRuntime().exec("top | grep java");

但它没有返回任何东西。其实我想得到几个JBOSS节点的CPU使用率。如果我可以在 java 代码中“置顶”或其他内容，那么我可以处理输出并找到我想要的详细信息。

但如果我尝试

> 进程 p = Runtime.getRuntime().exec("ls -l");

它正确地返回了输出。

我可以这样做还是有其他选择可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:46:51.857

如果您知道进程 ID，并且您是启动它们的用户（或者您有足够的权限），您总是可以通过读取伪文件 /proc/ **PID** /stat 来获取详细信息。在回答这个问题时，有一个很好的描述如何做到这一点：[如何从 C 中通过 PID 在 Linux 中计算进程的 CPU 使用率？](https://stackoverflow.com/questions/1420426/calculating-cpu-usage-of-a-process-in-linux).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:41:42.277

我相信这应该有效......

```
Runtime.getRuntime().exec("ps -ao pcpu,args | grep java"); 
```

或者`top -b | grep java`如果你坚持使用`top`

# batch-file - 从批处理脚本设置 P4 视图

> ID：13090921
> 
> 赞同：1
> 
> 时间：2012-10-26T16:36:15.540
> 
> 标签：batch-file, perforce

我希望能够从批处理脚本以编程方式设置 p4 客户端的视图（如在“p4 客户端 -o”的输出中）。

我敢肯定这在 unix 中会很容易（一行）[参见更新 2]，但是如何在不安装 3rd 方软件（例如 grep / sed）或编写 C# 程序的情况下在 Windows 中做到这一点（这似乎有点矫枉过正为了简单起见，我想做的事）。

更新 ：

上面的命令输出注释以及这样的设置；

```
#  View:        Lines to map depot files into the client workspace.

View: Path_to_depot Path_to_local 
```

我想应用的逻辑是

```
For each line in output
if line.substring(0,5) equals "View:"
replace line with %newviewsetting% 
```

或者如果它更容易

```
split output with space as delimiter
if the node equals "View:" and previous node not equal to #
set the next node to %myPathToDepotSetting% 
```

更新 2：

在 Unix 中，命令是

```
p4 client -o | sed 's/^View:.*/View: New view/' | p4 client -i 
```

这实际上是在说；将文本输出到命令行 用我的新视图替换以 View 开头的行 将其输入回 p4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:54:55.700

我有点不清楚你到底想要做什么。我对 perforce 一无所知，但对批处理文件却知之甚少。

如果您需要以编程方式处理的输出，`p4 client -o`那么您需要 FOR /F 命令。`help for`您可以通过键入或`for /?`从 Windows 命令提示符获取 FOR 文档。

例如，以下将简单地将命令的输出回显到屏幕上，而忽略空白行和以默认 EOL 字符 ( `;`) 开头的行。但显然可以做的还有很多。

```
for /f "delims=" %%A in ('p4 client -o') do (
  echo %%A
) 
```

FOR 命令有点像野兽，它的许多怪癖有很多非直观的解决方案。如果您对您需要做什么提供更清晰的解释，那么我可能能够提供更好的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T02:37:18.130

如果您可以使用其中一种 Perforce API，这会容易得多。这样你就不会批量进行这么多的文本解析。您对 perl、python、ruby 或 .net 感到满意吗？

# c++ - 如何在 C++ 中每分钟检查一次套接字连接

> ID：13090924
> 
> 赞同：0
> 
> 时间：2012-10-26T16:36:22.983
> 
> 标签：c++, multithreading, visual-studio, sockets, visual-c++

我已经用 C++ 实现了一个设计，即： - 我解析一个 XML 文件，其中包含多个服务器的 ip 和端口，对于每个 ip 和端口，我首先调用连接到服务器函数，在该函数中我与服务器建立 TCP 套接字连接无论连接是否建立，我为每个 ip 和端口创建一个线程，如果连接未建立，我发送服务器的状态，即连接未建立，如果连接建立，我然后向服务器发出请求并接收响应来自线程中的服务器。这是在每个线程的每分钟后完成的。现在我面临的问题是，如果连接终止或服务器断电，如何再次建立连接，我的意思是每一分钟发送请求并接收来自服务器的响应之前，我必须检查连接是否仍然存在或不。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:44:28.137

您可以拥有任何检查连接状态的东西，也可以为您的其他类进行所有通信。其他类将函数指针传递给它，并在该方法中测试连接，如果成功，则运行已传递的函数。如果不将其粘贴在重新建立连接后运行的队列上。

# msbuild - 未找到 AssemblyInfo 并安装了 msbuild 扩展包

> ID：13090933
> 
> 赞同：1
> 
> 时间：2012-10-26T16:36:49.130
> 
> 标签：msbuild, msbuildextensionpack

我正在尝试使用 AssemblyInfo 任务，我刚刚为 MSBuild 扩展包运行了 .net 4.0 的 msi。安装后，我仍然收到此错误

"C:\AAROOT\csharpprojects\toolbar\project.build" (默认目标) (1) -> (编译目标) -> C:\AAROOT\csharpprojects\toolbar\project.build(15,5): 错误 MSB4036:未找到“Ass emblyInfo”任务。检查以下内容： 1.) 项目文件中的任务名称与任务类的名称相同。2.) 任务类是“公共的”并且实现了 Microsoft.Build.Framework.ITask 接口。3.)

我在安装说明中没有看到我必须做的任何事情。我安装到默认位置（事实上，它从来没有要求我提供位置）。

文档位于 [http://msbuildextensionpack.codeplex.com/wikipage?title=Prereqs&referringTitle=Documentation](http://msbuildextensionpack.codeplex.com/wikipage?title=Prereqs&referringTitle=Documentation)

谢谢，院长

# mysql - Wordpress 自定义 wp_users，wp_usermeta 加入未正确排序

> ID：13090934
> 
> 赞同：1
> 
> 时间：2012-10-26T16:36:51.660
> 
> 标签：mysql, wordpress

我有一个自定义查询，可以使用他们的 user_meta 为我编写的统计插件拉用户。我可以根据日期范围选择 (WHERE) 以及 ORDER BY 任何元字段，但是，我不能同时执行这两项操作。我快疯了！！这是我的查询（下面有默认变量供参考）...

```
$getUserData = $wpdb->get_results("SELECT
ID, user_email, user_registered,
first_name.meta_value as first_name,
last_name.meta_value as last_name,
telephone.meta_value as telephone,
country.meta_value as country,
company.meta_value as company,
address.meta_value as address,
city.meta_value as city,
professional_title.meta_value as professional_title,
state.meta_value as state,
areas_of_interest.meta_value as areas_of_interest
FROM wp_users
LEFT JOIN wp_usermeta AS first_name ON first_name.user_id=ID
    AND first_name.meta_key='first_name'
LEFT JOIN wp_usermeta AS last_name ON last_name.user_id=ID
    AND last_name.meta_key='last_name'
LEFT JOIN wp_usermeta AS telephone ON telephone.user_id=ID
    AND telephone.meta_key='telephone'
LEFT JOIN wp_usermeta AS country ON country.user_id=ID
    AND country.meta_key='country'
LEFT JOIN wp_usermeta AS company ON company.user_id=ID
    AND company.meta_key='company'
LEFT JOIN wp_usermeta AS address ON address.user_id=ID
    AND address.meta_key='address'
LEFT JOIN wp_usermeta AS city ON city.user_id=ID
    AND city.meta_key='city'
LEFT JOIN wp_usermeta AS professional_title ON professional_title.user_id=ID
    AND professional_title.meta_key='professional_title'
LEFT JOIN wp_usermeta AS state ON state.user_id=ID
    AND state.meta_key='state'
LEFT JOIN wp_usermeta AS areas_of_interest ON areas_of_interest.user_id=ID
    AND areas_of_interest.meta_key='areas_of_interest'
" . $where . " 
ORDER BY " . $orderBy . " " . $sortOrder . " LIMIT 0, " . $page_limit);

 $where = "WHERE (user_registered >= '" . $_REQUEST['from'] . " 00:00:00' and  user_registered <= '" . $_REQUEST['to'] . " 00:00:00') ";

$orderBy = "user_registered";

$sortOrder = "ASC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:17:42.240

提示 - [mysql_error()](http://php.net/manual/en/function.mysql-error.php)告诉我们，如果您将变量正确放置，您仍然忘记在那里设置**$page_limit**

# sql-server - 在单个查询 MS SQL 中更新多条记录

> ID：13090935
> 
> 赞同：2
> 
> 时间：2012-10-26T16:36:53.700
> 
> 标签：sql-server

我正在尝试使用以下查询使用临时表更新表中的多条记录，但不起作用。请告诉我更新多条记录的正确方法。

```
UPDATE sarufoo 
SET sarufoo.mobile = (SELECT mobile_no FROM logan) 
WHERE sarufoo.homep IN (SELECT homep FROM logan); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:39:11.227

实现这一目标的一种更简洁的方法是连接两个表：

```
UPDATE sf
SET sf.mobile = l.mobile_no
From
    sarufoo sf
    JOIN logan l ON sf.homep = l.homep 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:38:59.293

您必须将您正在更新的行与您从中选择的行关联起来。否则，您的子选择（SET 之一）将返回它拥有的每一行。

```
UPDATE sarufoo 
SET sarufoo.mobile = (SELECT mobile_no FROM logan WHERE sarufoo.homep = logan.homep) 
WHERE sarufoo.homep IN (SELECT homep FROM logan); 
```

# nhibernate - NoSetter 和 ReadOnly 有什么区别？

> ID：13090938
> 
> 赞同：3
> 
> 时间：2012-10-26T16:37:17.253
> 
> 标签：nhibernate, readonly

NoSetter 和 ReadOnly 有什么区别？

NHibernate 定义了以下枚举：

```
namespace NHibernate.Mapping.ByCode
{
    public enum Accessor
    {
        Property = 0,
        Field = 1,
        NoSetter = 2,
        ReadOnly = 3,
        None = 4,
    }
} 
```

文档是这样说 NoSetter 的，但没有提到 ReadOnly：

*NHibernate 在设置值时会直接访问该字段，在获取值时会使用 Property。这可以在属性仅公开 get 访问器时使用，因为您的 API 的使用者无法直接更改值。需要一个命名策略，因为 NHibernate 使用 name 属性的值作为属性名称，并且需要告知该字段的名称是什么。*

[http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-property](http://nhibernate.info/doc/nh/en/index.html#mapping-declaration-property)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:29:10.073

只读属性访问器，用于持久化不提供 set 方法或支持字段的计算属性。然后可以将计算的值用于查询目的，但不会将其读回域中。

来源：[链接](https://nhibernate.jira.com/browse/NH-1621)

# java - 使用 v4l4j 的外部 jar 的 javac 编译器问题

> ID：13090940
> 
> 赞同：0
> 
> 时间：2012-10-26T16:37:22.950
> 
> 标签：java, javac, v4l

我试图在我的 Raspberry Pi 上用 java 编译一个程序，但我无法让 javac（或 java）程序链接一个外部库，特别是 v4l4j 库。我可以编译和执行一个简单的java程序，没问题，但现在我试图链接v4l4j下载的/lib文件夹中的.jar文件。

我正在使用**make**编译和运行我的代码，这就是我的**Makefile**的样子......

```
all:  
   /home/pi/java/jdk1.7.0_06/bin/javac -classpath /home/pi/java/v4l4j-0.9.0/lib/junit-4.1.jar SimpleViewer.java  
   /home/pi/java/jdk1.7.0_06/bin/java SimpleViewer 
```

这基本上是两行，一是编译，一是执行。请注意，我没有更改我的类路径，这就是为什么每行的第一部分链接到我的 java 编译器的直接位置。

当我在命令行中运行**make**时，我收到错误消息

```
SimpleViewer.java:10: error: package au.edu/jcu/v4l4j does not exist import au.edu/jcu.v4l4j.FrameGrabber; 
```

我实际上得到了很多这样的错误。有任何想法吗？谢谢你。

这是 SimpleViewer 类

```
package v4l4jTest;

import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

import au.edu.jcu.v4l4j.FrameGrabber;
import au.edu.jcu.v4l4j.CaptureCallback;
import au.edu.jcu.v4l4j.V4L4JConstants;
import au.edu.jcu.v4l4j.VideoDevice;
import au.edu.jcu.v4l4j.VideoFrame;
import au.edu.jcu.v4l4j.exceptions.StateException;
import au.edu.jcu.v4l4j.exceptions.V4L4JException;

/**
 * This class demonstrates how to perform a simple push-mode capture.
 * It starts the capture and display the video stream in a JLabel
 * @author gilles
 *
 */
public class SimpleViewer extends WindowAdapter implements CaptureCallback{
        private static int      width = 640, height = 480, std = V4L4JConstants.STANDARD_WEBCAM, channel = 0;
        private static String   device = "/dev/video0";

        private VideoDevice     videoDevice;
        private FrameGrabber    frameGrabber;

        private JLabel          label;
        private JFrame          frame;

        public static void main(String args[]){

                SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                                new SimpleViewer();
                        }
                });
        }

        /**
         * Builds a WebcamViewer object
         * @throws V4L4JException if any parameter if invalid
         */
        public SimpleViewer(){
                // Initialise video device and frame grabber
                try {
                        initFrameGrabber();
                } catch (V4L4JException e1) {
                        System.err.println("Error setting up capture");
                        e1.printStackTrace();

                        // cleanup and exit
                        cleanupCapture();
                        return;
                }

                // create and initialise UI
                initGUI();

                // start capture
                try {
                        frameGrabber.startCapture();
                } catch (V4L4JException e){
                        System.err.println("Error starting the capture");
                        e.printStackTrace();
                }
        }

        /**
         * Initialises the FrameGrabber object
         * @throws V4L4JException if any parameter if invalid
         */
        private void initFrameGrabber() throws V4L4JException{
                videoDevice = new VideoDevice(device);
                frameGrabber = videoDevice.getJPEGFrameGrabber(width, height, channel, std, 80);
                frameGrabber.setCaptureCallback(this);
                width = frameGrabber.getWidth();
                height = frameGrabber.getHeight();
                System.out.println("Starting capture at "+width+"x"+height);
        }

        /** 
         * Creates the UI components and initialises them
         */
        private void initGUI(){
                frame = new JFrame();
                label = new JLabel();
                frame.getContentPane().add(label);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.addWindowListener(this);
                frame.setVisible(true);
                frame.setSize(width, height);       
        }

        /**
         * this method stops the capture and releases the frame grabber and video device
         */
        private void cleanupCapture() {
                try {
                        frameGrabber.stopCapture();
                } catch (StateException ex) {
                        // the frame grabber may be already stopped, so we just ignore
                        // any exception and simply continue.
                }

                // release the frame grabber and video device
                videoDevice.releaseFrameGrabber();
                videoDevice.release();
        }

        /**
         * Catch window closing event so we can free up resources before exiting
         * @param e
         */
        public void windowClosing(WindowEvent e) {
                cleanupCapture();

                // close window
                frame.dispose();            
        }

        @Override
        public void exceptionReceived(V4L4JException e) {
                // This method is called by v4l4j if an exception
                // occurs while waiting for a new frame to be ready.
                // The exception is available through e.getCause()
                e.printStackTrace();
        }

        @Override
        public void nextFrame(VideoFrame frame) {
                // This method is called when a new frame is ready.
                // Don't forget to recycle it when done dealing with the frame.

                // draw the new frame onto the JLabel
                label.getGraphics().drawImage(frame.getBufferedImage(), 0, 0, width, height, null);

                // recycle the frame
                frame.recycle();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:50:57.717

您的课程路径只有

```
/home/pi/java/v4l4j-0.9.0/lib/junit-4.1.jar 
```

您必须将其他依赖项 jar 文件添加到您的类路径中。

# shell - 使用 openssl 通过 shell 脚本获取电子邮件

> ID：13090943
> 
> 赞同：1
> 
> 时间：2012-10-26T16:37:31.760
> 
> 标签：shell, unix, openssl, expect

如何在一个命令（shell 脚本）中使用 openssl 打印电子邮件列表？我可以打开连接：

```
openssl s_client -crlf -connect pop.gmail.com:995 
```

下一步是传递用户名和密码：

```
USER myuser
PASS mypass 
```

下一步是调用 LIST 命令

```
LIST 
```

但是我怎样才能为此编写 shell 脚本呢？我想在我的 c 示例程序中将它与**popen函数一起使用。**您能否发布示例我应该如何在 shell 脚本中使用**期望**和**发送**命令来做到这一点？

感谢和抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:02:34.540

我认为这应该可行（您可能需要稍微更改一下）：

```
#!/usr/bin/expect -f
spawn -console openssl blah blah blah blah
send "USER myuser\r"
send "PASS mypass\r"
send "LIST\r" 
```

就如此容易。如果你想使用 popen，它可能不起作用，因为 openssl 需要交互式终端，你需要以某种方式伪造它。期望可以做到这一点。阅读手册页！

# jquery - Jquery从json中选择添加值

> ID：13090944
> 
> 赞同：2
> 
> 时间：2012-10-26T16:37:36.970
> 
> 标签：jquery, html, ruby-on-rails, json

我有这样的json：

```
[
{
    "MOD_AXL": 0,
    "MOD_CDS_ID": 110000168,
    "MOD_CV": 0,
    "MOD_CV_CTM": null,
    "MOD_ID": 168,
    "MOD_MFA_ID": 514,
    "MOD_PC": 1,
    "MOD_PCON_END": 199007,
    "MOD_PCON_START": 196303,
    "MOD_PC_CTM": null,
    "Name": "2 CV"},
{
    "MOD_AXL": 0,
    "MOD_CDS_ID": 110004500,
    "MOD_CV": 0,
    "MOD_CV_CTM": null,
    "MOD_ID": 4500,
    "MOD_MFA_ID": 514,
    "MOD_PC": 1,
    "MOD_PCON_END": 198810,
    "MOD_PCON_START": 197808,
    "MOD_PC_CTM": null,
    "Name": "ACADIANE"},
{
    "MOD_AXL": 0,
    "MOD_CDS_ID": 110001660,
    "MOD_CV": 0,
    "MOD_CV_CTM": null,
    "MOD_ID": 1660,
    "MOD_MFA_ID": 514,
    "MOD_PC": 1,
    "MOD_PCON_END": 197712,
    "MOD_PCON_START": 196301,
    "MOD_PC_CTM": null,
    "Name": "AMI"}
// etc..etc..
]​ 
```

但是如何设置为选择值 MOD_ID，以及选择选项的文本：名称？

我在文本中有这些数据：

```
$(".man-select").change(function(){
    var mfa_id = $(".man-select").val();
    console.log(mfa_id);
    $.ajax({ 
      url: "/get_models_for_mfa/mfa_id="+mfa_id+".json",
      type: "GET", 
      data: {},
      success: function(text)   //here is object
      {
        console.log("getted");
        $('.mod-select')
         .append($("<option></option>")
         .attr("value",text)
         .text(text)); 
      },
      error: function(){
        //alert('Ошибка javascript');
      },
      dataType : "html"
    });      
  }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:48:50.230

您可以将字符串解析为 JSON 格式，然后对其进行迭代：

```
success: function(text){
    var your_object = JSON.parse(text);
    $.each(your_object , function(k, item) { 
       $('.mod-select')
             .append($("<option></option>")
             .attr("value", item.MOD_ID)
             .text(item.Name));
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:49:26.393

更改`dataType : "html"` 为`dataType : "json"`

接下来在成功函数中进行以下更改

```
success: function(text){
    console.log("getted");
    vat html = '' ; 
    $.each(text , function(i){
        html += '<option value="' + text[i]["MOD_ID"] + '">'
                           + text[i]["name"] + '</option>' ;
    }
    $('.mod-select').empty().append(html);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:49:32.303

如果我正确理解您的问题，您想将返回的 json 列表中的值添加到`select`列表中吗？
如果是这样，这就是我通常的做法：

```
var myData = json.d;
var h = [];

$.each(myData, function(i, val) {
    h.push('<option value="' + val.MOD_ID+ '">' + val.Name + '</option>');
});
$('#yourSelect').empty().append(h.join('')); 
```

我首先将值推送到数组，因为它比搜索 DOM 以附加到每个项目的选择要快得多。

# java - 以编程方式休眠`缓存使用`参数

> ID：13090948
> 
> 赞同：0
> 
> 时间：2012-10-26T16:37:48.577
> 
> 标签：java, spring, hibernate, ehcache

我目前正在将休眠配置为使用 ehcache 并以`CacheManager`编程方式提供。我们不使用 hibernate.xml 或 ehcache.xml，因为我们有自己的配置服务来提供此类信息。

现在我面临一个问题：必须在哪里`cache usage`以编程方式定义配置？

如果可能，我想在创建时激活它，`CacheConfiguration`但我找不到允许设置属性的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T06:09:00.340

[这个论坛](http://forum.springsource.org/showthread.php?14968-Share-cache-manager-with-hibernate)帖子可以在这里提供帮助。

通过“F.Degenaar”编写代码后，您需要做的就是在创建会话工厂时，创建一个`java.util.Properties`对象，添加属性（键）`hibernate.cache.provider_class`并使用`EhCacheProvider`.

- 编辑

您可以手动将对象添加到缓存，就以编程方式设置是否要缓存的内容而言，由于注释在编译时会非常困难，我建议您使用注释并以编程方式缓存/避免缓存查询和结果。

# backbone.js - 主干/下划线链方法与 where 方法

> ID：13090949
> 
> 赞同：14
> 
> 时间：2012-10-26T16:37:54.910
> 
> 标签：backbone.js, underscore.js, lodash

我必须在这里缺少一些简单的东西。

[http://jsfiddle.net/v9mdZ/](http://jsfiddle.net/v9mdZ/)

我只是在学习 Backbone 和 Underscore/loDash，并试图熟悉`chain`.

我有以下代码，它按预期工作：

```
var ids = _.pluck(collection.where({'is_checked':true}), 'id'); 
```

我试图重构它，使用`chain`如下：

```
var ids = collection.chain().where({'is_checked':true}).pluck('id').value(); 
```

为什么重构的代码不起作用？我用`chain`错了吗？

**解决方案（详情如下）**

不要`where`与`chain`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T18:09:45.943

将[一些 Underscore 方法](http://backbonejs.org/#Collection-Underscore-Methods)合并到集合中有点不完美。当你说`collection.some_mixed_in_underscore_method()`时，集合会在你背后解开一些 Backbone 东西，以便将 Underscore 方法应用于集合模型内的属性；它的工作原理是这样的：

```
var ary = _(this.models).map(function(m) { return m.attributes });
return _(ary).some_mixed_in_underscore_method(); 
```

但`collection.chain()`不是那样工作的，`chain`只是[`models`](http://backbonejs.org/#Collection-models)直接包装集合，所以如果你这样做：

```
console.log(collection.chain()); 
```

您会看到它`chain`为您提供了一个包装模型数组的对象。您的模型将没有`is_checked`属性（即没有`model.is_checked`），但它们将具有`is_checked`属性（即会有`model.get('is_checked')`and `model.attributes.is_checked`）。

现在我们可以看到哪里出了问题：

```
collection.chain().where({'is_checked':true}) 
```

模型没有`is_checked`属性。特别是，不会有任何模型 where `is_checked`is`true`以及之后的所有内容都在`where`使用空数组。

既然我们知道事情的发展方向，我们该如何解决呢？好吧，您可以使用[`filter`](http://underscorejs.org/#filter)而不是[`where`](http://underscorejs.org/#where)这样您就可以轻松地解压模型：

```
collection.chain()
          .filter(function(m) { return m.get('is_checked') })
          .pluck('id')
          .value(); 
```

但是，您的模型还没有`id`s，因为您没有使用`id`s 创建它们，并且您还没有与服务器交谈以获取`id`s，因此您将得到一个`undefined`s 数组。如果添加一些`id`s：

```
var collection = new App.OptionCollection([
    {id: 1, 'is_checked': true},
    {id: 2, 'is_checked': true},
    {id: 3, 'is_checked': false}
]); 
```

然后你会得到`[1,2]`你正在寻找的。

演示：http: [//jsfiddle.net/ambiguous/kRmaD/](http://jsfiddle.net/ambiguous/kRmaD/)

# ios - 使用 iOS6 解除/重新呈现 MFMessageComposeViewController 的问题，但在 iOS5 上很好

> ID：13090953
> 
> 赞同：3
> 
> 时间：2012-10-26T16:38:08.257
> 
> 标签：ios

我正在展示一个 MFMessageComposeViewController，它适用于 iOS4 和 iOS 5，但适用于 iOS6。

视图显示正常，但如果将其关闭然后表示它不能正确显示 - 仅显示 To: 行，则缺少正文和键盘。（抱歉，我现在无法发布屏幕截图，因为我在拍摄时 XCode 崩溃了，我正在下载旧版本的 XCode，因为我正在输入）。

单步调试调试器中的代码，我注意到问题可能比重新呈现更早出现 - 我注意到比调用dismissViewControllerAnimated: 时整个视图不会立即被解除，而是消息正文和键盘被解除离开在 To: 后面，与重新呈现视图时显示的内容相同。

用截图描述可能更容易，我会尽快发布一些。

我正在使用 presentViewController: 和 dismissViewControllerAnimated: 来展示/关闭 MFMessageComposeViewController。

+++ 更新 +++ 我发现如果不是使用相同的 MFMessageComposeViewController 对象来重新呈现视图，我首先删除它然后创建一个新视图，可以解决问题。虽然这似乎有点低效，但我应该没有必要，就像我提到它在 iOS5 上工作一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:28:14.627

在 iOS 6 苹果引入了一个新特性“远程视图控制器”。一些外部视图控制器不再是您的应用程序的一部分，而消息传递控制器就是其中之一。

我想这就是你的问题。

你可以在那里阅读更多关于它的信息：http: [//oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/](http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/)

# c# - 反序列化异常：找不到程序集

> ID：13090955
> 
> 赞同：11
> 
> 时间：2012-10-26T16:38:19.153
> 
> 标签：c#, sockets, serialization, deserialization

我正在序列化一些数据，如字段和自定义类以创建二进制数据（字节数组）。

然后我想将`Deserialize`它从二进制数据返回到字段和类。

但我有一个例外。如果这两种方法发生在同一个程序集中，一切都会正常工作——但事实并非如此。

我在一个组件中进行序列化，并在另一个组件中进行反序列化。这也是excaption说的： `Unable to find assembly 'MyAssamblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.`

注意 1：我对取回字段没有任何问题，只有类会导致它们。

注意 2：我在两个程序集中都有这个相同的类。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T16:47:25.223

> 注意 2：我在两个程序集中都有这个相同的类

不，你没有。至少，就运行时而言，不是这样。您有两种碰巧具有相同名称的不同类型。类型由其程序集**定义。**因此，“ `SomeType`in AssemblyA”与“in AssemblyB”完全不同`SomeType`，即使它们碰巧是从同一个源文件编译的。

BinaryFormatter 使用类型信息，所以这不起作用。一种选择是将类型移动到其他项目都引用的库 dll - 然后它只定义一次，它会很高兴。

另一种选择是使用基于合同的序列化程序（而不是基于类型的序列化程序）。这意味着“看起来足够相似的类”很好，即使它们在不同的程序集中（并且可能有不同的来源，只要它“足够相似”）。如果您想要密集的原始二进制文件，适合的序列化器示例包括（以及其他一些）XmlSerializer、DataContractSerializer（但不是 NetDataContractSerializer）、JavaScriptSerializer 或 protobuf-net。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:41:45.390

包含您正在反序列化的对象的类层次结构中的类的所有程序集必须存在于您正在执行此反序列化的应用程序中。它们可以被显式引用（如果您需要这些类的编译时安全性）或仅放置在`bin`应用程序的文件夹中，以便可以在运行时解析它们。如果没有明确引用它们，则必须使用反射才能从反序列化实例中读取值。

# algorithm - 找到从一个城市到另一个城市的路径，然后在没有重访城市的情况下反向

> ID：13090958
> 
> 赞同：2
> 
> 时间：2012-10-26T16:38:40.353
> 
> 标签：algorithm, data-structures

[我在usaco](http://ace.delos.com/)上的算法上发现了一个问题，我无法链接到真正的问题，因为它需要身份验证，所以粘贴它。

> 你刚刚赢得了一场比赛，奖品是在加拿大的一次免费假期。您必须乘飞机旅行，并且城市从东到西排列。此外，根据规则，您必须从较远的城市西部开始，仅向东行驶，直到您到达最东边的城市，然后仅向西飞行，直到您到达起始位置。此外，您不能多次访问任何城市（当然，起始城市除外）。
> 
> 给定城市的顺序，加上可以做的航班（你只能在某些城市之间飞行，仅仅因为你可以从A城市飞到B城市并不意味着你可以飞另一个方向），计算最大数量您可以访问的城市。

这是关于动态规划的教程文本的一部分。教程中还给出了解决方案的建议。

> 想象一下有两个旅行者从最西部的城市开始。旅行者轮流向东旅行，下一个要移动的旅行者总是最西端，但旅行者可能永远不会在同一个城市，除非它是第一个或最后一个城市。但是，其中一名旅客只允许进行“反向飞行”，即当且仅当有从 B 市到 A 市的航班时，他才能从 A 市前往 B 市。
> 
> 不难看出，两个旅行者的路径可以组合成一个往返，先走正常旅行者的路径到最东边的城市，然后再走另一个旅行者的相反路径回到西部。 - 大多数城市。此外，当旅客 x 移动时，您知道旅客 y 尚未访问旅客 x 以东的任何城市，但旅客 y 当前所在的城市除外，否则旅客 y 必须在 x 在 y 以西时移动过一次。

据我了解的解决方案，我认为可以通过保持一个正向的去向城市的一维表和一个反向的去向城市的表来完成该解决方案。例如。如果我有 5 个城市，A，B...E 以所需方向定向，城市之间的有向图是 A 是起始城市，E 是目的地。

```
 A | B | C | D | E
A  0 | 1 | 0 | 0 | 0
B  0 | 0 | 1 | 1 | 0
C  1 | 0 | 0 | 0 | 1
D  0 | 0 | 0 | 0 | 1
E  0 | 0 | 1 | 0 | 0 
```

我为即将离任的城市保留了两张表，我将通过将第一个城市初始化为 1 来填充它。访问的最大城市数量，然后为每个下一个条目扫描所有先前存在的路径到当前城市的城市，然后选择最大值，对反向旅行者做同样的事情。

```
table[i] = Max(j=i to 0) (table[j]) 
```

我将在目的地城市获得最大值，但这并不能保证任何城市都不会重复。如果我在数组字段中再保留一个条目以及最大数量，我将无法将其从正向切换到反向。我正在学习动态编程，所以可能我没有得到正确的想法。这是我为图表构建的表格

```
A | B | C | D | E
1 | 2 | 3 | 3 | 4
1 | 1 | 2 | 1 | 3 
```

所以将从两者中获得最大收益。请提供方向/提示，以便我可以朝着正确的方向前进。

PS。这不是作业问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:10:32.117

您使用这两个表格的方法独立地模拟了每个旅行者的状态，作为已经访问过的城市数量，以及该旅行者当前停留的位置。正如您自己发现的那样，这不会阻止您两次访问一个城市。

相反，我将使用三个元素来模拟状态：一位旅行者当前所在的城市，另一位旅行者所在的城市，以及他们总共访问过的城市数量，即他们个人计数的总和。所以你会有一个 2d 表，而不是你的两个 1d 表。*当前向旅行者在城市f*并且反向旅行者在城市*r*时，单元格 ( *f* , *r* ) 将包含已知的总访问城市数。

 **您可能会按照它们的最小元素的顺序遍历这些状态。这意味着您接下来将扩展一个尚未扩展的状态，并且这两个数字中较小的一个在所有未扩展的状态中最小。如果处于该状态，*f* < *r* ，那么如果有从*f*到*f'*的航班，您将使用它来使用*f'* > *r更新状态（* *f'*，*r*）。另一方面，如果*r* < *f*你更新 ( *f* , *r'* ) 与*r'* > *f*和来自*r'的航班*

 ***在伪代码中：

```
first = (f: 0, r: 0)  # tuple with two members, called f and r
todo = set { first }  # a set with a tuple as its only element
visited = a map from tuples to integers, unset values defaulting to 0
visited[first] = 1
while todo is not empty:
  best = ∞
  cur = null
  for t in todo:
    if min(t.f, t.r) < best:
      best = min(t.f, t.r)
      cur = t
  todo.remove(cur)
  if (cur.f < cur.r):
    for f' in cities where flights from f arrive:
      next = (f: f', r: cur.r)  # keep r but use f' as the new f
      todo.add(next)            # will do nothing if it already is in the set
      visited[next] = max(visited[next], visited[cur] + 1)
  else:
    for r' in cities where flights to r depart:
      next = (f: cur.f, r: r')
      todo.add(next)
      visited[next] = max(visited[next], visited[cur] + 1)
best = 0
for cur in keys of visited:
  if best < visited[cur]:
    if there is a flight from cur.f to cur.r: # can close the tour
      best = visited[cur]
return best 
```*****

# jquery-ui - jQuery UI - 可选小部件 - 如何禁用多选？

> ID：13090963
> 
> 赞同：4
> 
> 时间：2012-10-26T16:38:57.563
> 
> 标签：jquery-ui, jquery-ui-selectable

在 jquery ui selectable 小部件中，我注意到您可以通过按住 ctrl （或通过拖动框）选择多个项目，但是如何禁用多选。我只想一次只能选择 1 个。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T19:05:33.960

这是一个相当粗略的实现：http: [//jsfiddle.net/rtRjK/](http://jsfiddle.net/rtRjK/)

基本上，当一个元素被选中时，首先取消选中它所有被选中的兄弟元素——这会处理 ctrl-clicks。接下来，遍历正在选择和取消选择它们的兄弟姐妹 - 这处理拖动。因此，拖动总是采用具有最大 y 坐标的元素。

您还可以滚动您自己的可选小部件。我从以下位置删除了 ctrl 键引用和`_mouseDrag`函数：http `$.ui.selectable`: [//jsfiddle.net/zFFXc/](http://jsfiddle.net/zFFXc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T10:58:27.843

```
$("#myList li").click(function() {
  $(this).addClass("selected").siblings().removeClass("selected");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T06:01:33.560

可选, 单选, 带键盘

```
//after load
$(function() {

    // make <ol id=lista> selectable (jquery UI)
    $("#lista").selectable();
    $("#lista").children(":first-child").addClass("selected"); //select first

    $(document).keydown(function(ev) { //con keyboard

        var actual = $(".selected");
        switch (ev.keyCode) {

            case 13: // User pressed "enter" key
                actual.dblclick();
                ev.preventDefault();
                break;

            case 38: // User pressed "up" arrow
                actual.prev().click();
                ev.preventDefault();
                break;

            case 40: // User pressed "down" arrow
                actual.next().click();
                ev.preventDefault();
                break;
        }
    }); //end keydown

    //single select
    $("#lista li").click(function() {
        $(this).addClass("selected").siblings().removeClass("selected");
    });

}); // end $(fn... 
```

# screwturn - 更改默认命名空间

> ID：13090968
> 
> 赞同：0
> 
> 时间：2012-10-26T16:39:08.830
> 
> 标签：screwturn

我们正在使用ScrewTurn Wiki 来进行LMS 的培训。我们的 LMS 提供商正在将软件 om 版本 x 更新为 y，因此我们需要更新 wiki 中的培训材料以匹配新版本。我认为最简单的方法是： 1\. 创建一个新的命名空间 v10 2\. 将新命名空间更改为默认（根）

我找不到使用管理页面为 wiki 选择或更改默认命名空间的方法。甚至可能吗？

如果需要以编程方式完成，该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T07:57:07.237

不幸的是，这是不可能通过配置实现的。您可以重命名命名空间，但 root 是内置的并且没有名称。

但是，您可以使用简单的重定向标签从旧名称空间重定向到新名称空间。

# javascript - 永久禁用地址栏 Blackberry Jquery Mobile

> ID：13090971
> 
> 赞同：0
> 
> 时间：2012-10-26T16:39:14.520
> 
> 标签：javascript, jquery-mobile

如何通过我的应用程序永久禁用或隐藏移动浏览器的地址栏。jquery mobile 有选项还是有其他方法？这是我用来最初加载我的页面的事件。它只是一个单页应用程序，只能在黑莓本机浏览器中看到（没有其他移动设备）

```
<script type="text/javascript">
    $(document).bind('pageinit', function (event) {
       //loads the applications html into the DOM
        loadHomePage();   
    });
</script> 
```

# php - 按行显示数据库中的项目

> ID：13090972
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:39:15.980
> 
> 标签：php, mysql, database

这张图片显示了我网站的主页。

![在此处输入图像描述](../Images/735b84ae44435d29999778f55523ce13.png)

[http://i163.photobucket.com/albums/t315/smc22_2007/Website.png](http://i163.photobucket.com/albums/t315/smc22_2007/Website.png)

我想要 4 行，而不是 5 行。

这是我的php代码：

```
<?php

$query = "SELECT * FROM UFPProducts";
$results = mysql_query ($query, $connect);

while ($row = @ mysql_fetch_array($results))
{

print

"<div id= 'item'>" .

"<p>Product id ".$row["ProductID"]."</p>".
"<p><img src=".$row["Image"]."></p>".
"<p>&pound".$row["Price"]."</p>".
"<p>".$row["Description"]."</p>".

"</div>";
} 
```

这是上面的CSS：

```
#item {
    width:100px;
    text-align:center;
    border: 1px solid #D9D9D9;
    padding: 0px;
    list-style: none;
    width: 150px;
    float: left;    
    margin-right: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
    -moz-border-radius: 10px; /* firefox rounded corners */
    -webkit-border-radius: 10px; /* Safari rounded corners */
    min-height: 220px;
}

#item li h1 {
text-align:center:
}

#item li#white{
    min-height: 220px;
} 
```

如何显示 4 行而不是 5 行？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:45:23.677

从查看代码来看，似乎没有任何东西可以“强制”五行，您可以简单地将其更改为四行。父元素的宽度很可能自然导致项目以五行出现。如果是这种情况，您有几个选择。您可以添加左边距和/或右边距或更改项目的宽度以使其更宽并强制它们更快地溢出到下一行。或者，您可以在 PHP 中实现一个计数器，`<br>`在每四个项目之后添加一个标签（或类似标签）。您也可以缩小父元素，尽管这可能不是一个选项。CSS 选项很简单，在 中`#item`，增加宽度：

```
#item {
    width:100px;
    /*... other css ...*/
} 
```

在 PHP 中：

```
<?php
//rest of code
$counter=0;
while ($row = @ mysql_fetch_array($results))
{

print

"<div id= 'item'>" .

"<p>Product id ".$row["ProductID"]."</p>".
"<p><img src=".$row["Image"]."></p>".
"<p>&pound".$row["Price"]."</p>".
"<p>".$row["Description"]."</p>".

"</div>";
$counter++;
if ($counter==3) {
    $counter=0;
    print "<br>";
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:48:01.167

您的产品当前设置为浮动，宽度为 150 像素。由于您处于浮动状态，它将继续添加项目，直到它们不适合（即，如果您的项目在 75 像素宽的容器中为 10 像素宽并且您添加 8，您将在一个“行”上看到 7，而在下一个）。您可以简单地增加宽度以适合您的产品所在的容器，直到每“行”有 4 个项目。您的边距和任何填充也会增加这一点，因此请记住这一点。

```
#item {
    ...
    width: 200px;
    ...
} 
```

如果您不想增加产品单元格的宽度，请增加边距以增加元素的有效宽度。

```
#item {
    ...
    margin-right: 20px;
    ...
} 
```

您还应该更新您的项目以使用类而不是 ID，因为 ID 在页面上应该是唯一的。

```
.item {
    ...
}

<div class='item'>...</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:05:53.503

据我所知，while 循环不会强制执行任何限制。那么我的建议是这样的：

```
$i = 1;
$cssClass = 'item';
$columns = 4;
while ($row = @ mysql_fetch_array($results))
{
    $class = $cssClass;
    if (($i % $columns) == 0) {
        $class .= ' clear';
    }
    print "<div id='{$class}'>" .
        "<p>Product id " . $row["ProductID"] . "</p>" .
        "<p><img src=" . $row[" Image"] . "></p>" .
        "<p>&pound" . $row["Price"] . "</p>" .
        "<p>" . $row["Description"] . "</p>" .
        "</div>";
    $i++;
} 
```

然后在css中定义：

```
.clear { clear:both; } 
```

# php - 用 PHP 参数替换 URL /gallery/art/paris？

> ID：13090984
> 
> 赞同：0
> 
> 时间：2012-10-26T16:39:56.753
> 
> 标签：php, apache, rewrite

> **可能重复：**
> [重写任意数量的路径段以查询参数](https://stackoverflow.com/questions/3655893/rewriting-an-arbitrary-number-of-path-segments-to-query-parameters)

我敢肯定这已经被问过很多次了，但我实际上并不知道我在寻找什么，所以如果有人能指出我正确的地方，那就太好了。

基本上，我有一个页面“gallery.php”，它目前从目录加载图像（第一部分是硬编码的），然后在 url 中输入 ?a=art/paris，所以完整的 URL 是`gallery.php?a=art/gallery`.

有没有办法可以修改 apache 和/或我的 php 代码，以便用户可以输入`/gallery/art/paris/`或`/gallery/art/paris`获得相同的结果？（/gallery/ 之后的任何内容都是我需要的一个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:46:35.710

试着把它放在你的 .htaccess 中：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-F

RewriteRule ^gallery/([a-z-A-Z0-9\/]+)$ /gallery.php?a=$1 [NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:48:41.703

是的，有办法做到这一点。您需要`mod_rewrite`在 Apache 服务器上安装和激活。然后创建一个`.htaccess`文件，您可以在其中“告诉”Apache 要重写哪些 URL，并指定如何完成的规则​​。所以基本上你需要这样的东西

```
RewriteEngine On
RewriteBase /
RewriteRule ^gallery/([^/\.]+)/([^/\.]+)$ gallery.php?a=$1/$2 [L,NC] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:45:34.103

这是你要找的吗？

```
RewriteEngine on
RewriteRule ^gallery/([^/\.]+) gallery.php?a=$1 [L] 
```

或者你可以更具体：

```
RewriteEngine on
RewriteRule ^gallery/([^/\.]+)/([^/\.]+) gallery.php?a=$1&b=$2 [L] 
```

# php - 使用Passenger 和PHP 应用程序运行Rails 应用程序

> ID：13090988
> 
> 赞同：5
> 
> 时间：2012-10-26T16:40:29.467
> 
> 标签：php, ruby-on-rails, ruby, apache, passenger

我正在设置一个服务器，我需要在其中运行 Ruby On Rails 3 应用程序以及一些 PHP 网站。服务器是运行 Apache 2.4.3 的 CentOS 5.8 机器。该服务器用于测试和预生产，因此性能不是问题。

我正在为 Rails 应用程序使用 Phusion Passenger，并且我创建了一堆虚拟主机（带有关联的文件夹和数据库帐户）。然后，我打算为 PHP 使用其他 v-hosts。

是否可以？我应该如何进行？

非常感谢你

* * *

详细信息：
httpd.conf：

```
LoadModule passenger_module /app/auser/.rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17/ext/apache2/mod_passenger.so  
PassengerRoot /app/auser/.rvm/gems/ruby-1.9.3-p286/gems/passenger-3.0.17  
PassengerRuby /app/auser/.rvm/wrappers/ruby-1.9.3-p286/ruby 
```

(...)

```
##
## Virtual hosts
Include conf/extra/httpd-vhosts-phpmyadmin.conf
Include conf/extra/httpd-vhosts-rails01.conf
Include conf/extra/httpd-vhosts-rails02.conf
Include conf/extra/httpd-vhosts-php01.conf
Include conf/extra/httpd-vhosts-php02.conf
.... 
```

* * *

乘客管理的 v-hosts 将类似于：
包括 conf/extra/httpd-vhosts-rails01.conf

```
<VirtualHost *:80>
   ServerName rails01.lcl
   DocumentRoot "/app/auser/apps/rails01/public"
   <Directory "/app/auser/apps/rails01/public">
      AllowOverride all
      Options -MultiViews
   </Directory>
</VirtualHost> 
```

基于 PHP 的 v-hosts 将类似于：包含 conf/extra/httpd-vhosts-php01.conf

```
<VirtualHost *:80>
    ServerName php01.lcl
    DocumentRoot "/app/auser/apps/php01/public"
    <Directory "/app/auser/apps/php01/public">
        Options FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:33:17.907

是的，与 PHP 一起运行 Rack/Rails 绝对有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T22:48:10.083

有一个非常酷的宝石，叫做[rack-legacy](https://github.com/eric1234/rack-legacy)，它可能就是你正在寻找的东西。它允许您通过 php-cgi 执行托管在 Rails 应用程序服务器上的 PHP 代码。

> Rack Legacy 尝试提供与 PHP 和 CGI​​ 等遗留环境的交互，同时仍然获得 Rack 的可移植性，因此您不需要完整的 Apache/lighttpd 堆栈。

我已经进行了一些实验，似乎可以运行一个 wordpress 并与 Rails 应用程序服务器一起提供服务，而不必弄乱 apache/ngix 文件。

# c++ - C++：如何创建函子

> ID：13090990
> 
> 赞同：0
> 
> 时间：2012-10-26T16:40:33.797
> 
> 标签：c++, eclipse, eclipse-cdt, functor

我正在尝试像这样创建一个仿函数：

```
struct STFRandomTreeFunction
{
    typedef double (*function_ptr)(const TrainingDataPoint& data, boost::unordered_map<std::string, cv::Mat>& preloaded_images);
};

struct STFRandomTreeFunctor
{
private:
    boost::unordered_map<std::string, cv::Mat> *image_cache;
    STFRandomTreeFunction::function_ptr function;
    std::string function_id;

public:
    STFRandomTreeFunctor(boost::unordered_map<std::string, cv::Mat>& cache, STFRandomTreeFunction::function_ptr function_ptr, std::string function_id){
        image_cache = &cache;
        this->function = function;
        this->function_id = function_id;
    }

    std::string get_function_id(){
        return function_id;
    }

    double operator()(const TrainingDataPoint& data_point){
        return function(data_point, *image_cache);
    }
}; 
```

我正在尝试运行以下代码：

```
double something(const TrainingDataPoint& a, unordered_map<string, Mat>& cache){
    return 5;
}

int main(int argc, char* argv[]) {

    unordered_map<string, Mat> cache;

    STFRandomTreeFunctor functor = STFRandomTreeFunctor(cache, something, "id");

    TrainingDataPoint d = TrainingDataPoint(1,2,"", ImagePoint(1,2), ImagePoint(1,2), "");

    double value  = functor(d);

    cout << "Value is " << value << endl;
} 
```

但是，我没有得到任何输出。似乎抛出了一些异常，但是 eclipse 并没有向我显示一个，而只是显示该程序已终止。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:46:40.077

在构造函数中`STFRandomTreeFunctor`

```
this->function = function; 
```

那是自我分配。我假设您打算这样做：

```
this->function = function_ptr; 
```

# javascript - ajax 在 IE 8 中非常慢，但在 Firefox 和 chrome 中非常快

> ID：13090993
> 
> 赞同：3
> 
> 时间：2012-10-26T16:40:40.990
> 
> 标签：javascript, ajax

有很多类似的帖子，但没有什么很适合我的需要。所以我被迫创建一个帖子。

名称列表显示在 jsp 页面上。当您将鼠标悬停在名称上时，我会执行 ajax 调用以在工具提示弹出窗口中显示该名称的详细信息。

用户将使用 IE8。在 IE8 中完成这个简单的事情大约需要 5 秒，而在 Firefox 和 chrome 中它会立即发生。

我还注意到，随着显示的名称数量增加或减少，响应时间在 IE8 中也是如此。

如何在 IE8 中让它更快？

jsp页面

```
<td onmouseover ="showDetails('${origin }')">
    <a href="#"><c:out value="${origin}"></c:out><span id="info"></span></a> 
</td> 
```

javascript函数

```
function showDetails(stop){
    var xmlHttpRequest; 
    if(window.XMLHttpRequest){
        xmlHttpRequest = new XMLHttpRequest();
    }else{
        xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttpRequest.onreadystatechange=function(){
        if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
            document.getElementById("info").innerHTML = xmlHttpRequest.responseText;
        }
    }
    xmlHttpRequest.open("GET", "showStopsInfoPopup.do?stop="+stop, true);
    xmlHttpRequest.send();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:02:42.973

尝试这个。

```
function showDetails(stop){
    var t1 = new Date().getTime();
    var xmlHttpRequest; 
    if(window.XMLHttpRequest){
        xmlHttpRequest = new XMLHttpRequest();
    }else{
        xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlHttpRequest.onreadystatechange=function(){
        if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
            alert("Call took " + (new Date().getTime() - t1) + " milliseconds");
            document.getElementById("info").innerHTML = xmlHttpRequest.responseText;
        }
    }
    xmlHttpRequest.open("GET", "showStopsInfoPopup.do?stop="+stop, true);
    xmlHttpRequest.send();
} 
```

您可能会看到调用同样快，但在 IE8 中响应的后续呈现速度较慢。

如果您确认这一点，那么问题就是关于 responseText 中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:20:00.420

反而：

```
xmlHttpRequest.onreadystatechange=function(){
    if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        alert("Call took " + new Date().getTime() - t1 + " milliseconds");
        document.getElementById("info").innerHTML = xmlHttpRequest.responseText;
    }
}
xmlHttpRequest.open("GET", "showStopsInfoPopup.do?stop="+stop, true);
xmlHttpRequest.send(); 
```

尝试这个：

```
xmlHttpRequest.open("GET", "showStopsInfoPopup.do?stop="+stop, true);
xmlHttpRequest.onreadystatechange=function(){
    if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        alert("Call took " + new Date().getTime() - t1 + " milliseconds");
        document.getElementById("info").innerHTML = xmlHttpRequest.responseText;
    }
}
xmlHttpRequest.send(null); 
```

**修复新日期**

在您的代码中缺少括号（请记住分开`Mathematics`）`Strings`。尝试：

```
xmlHttpRequest.open("GET", "showStopsInfoPopup.do?stop="+stop, true);
xmlHttpRequest.onreadystatechange=function(){
    if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
        alert("Call took " + (new Date().getTime() - t1) + " milliseconds");
        document.getElementById("info").innerHTML = xmlHttpRequest.responseText;
    }
}
xmlHttpRequest.send(null); 
```

* * *

**测试** Ajax 请求：

```
<div id="info"></div>
<script>var xhr, t1;
if(window.ActiveXObject){
    try { xhr=new ActiveXObject("Msxml2.XMLHTTP"); }catch(e){
        try { xhr=new ActiveXObject("Microsoft.XMLHTTP"); }catch(e){}
    }
} else if(window.XMLHttpRequest){
    xhr=new XMLHttpRequest();
}

xhr.open("GET", "teste.php", true);

t1 = new Date().getTime();//I start the timer that point to prevent the previous functions affect the end result

xhr.onreadystatechange=function(){
    if(xhr.readyState == 4 && xhr.status == 200){
        document.getElementById("info").innerHTML = "Call took " + (new Date().getTime() - t1) + " milliseconds";
    }
}
xhr.send(null);
</script> 
```

**php (teste.php):**

```
<?php
sleep(5);
echo 'ok';
?> 
```

**结果：**

*   IE8：5004 毫秒

*   Chorme：5005 毫秒

*   火狐：5014 毫秒

*   IE7：5023 毫秒

*   IE6：5053 毫秒

经过测试，得出的结论可能是服务器端的某些东西，更准确地说是在您的 PHP 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:03:57.363

如果你想使用 jquery：

```
function showDetails(stop) {
  $('#info').load("showStopsInfoPopup.do?stop=" + stop);
} 
```

# java - 不能使用 AJAX 响应作为文件名（不是内容）

> ID：13090995
> 
> 赞同：0
> 
> 时间：2012-10-26T16:40:44.000
> 
> 标签：java, jquery, ajax, servlets

我正在向`$.post`servlet 发送请求，发送一些需要保存在文件中的数据。servlet 保存数据，然后发回文件的**路径**。我正在尝试导航到`response`方法回调中所持有的路径，但这是发生了什么：

```
function saveData(){
    var path;

    $.post("SaveFileServlet", {data : JSON.stringify(jsonPieces)}, function(response) {
        path = response; // setting the path like this does NOT WORK - nothing happens           
        //path="storing/csv_uploads/test.csv"; // setting the path like this WORKS        

        alert (path); // shows: storing/csv_uploads/filename.csv - e.g. WHAT IT SHOULD

        $("body").append("<iframe src='" + path + "' style='display: none;' ></iframe>");       
    });        
} 
```

如何使它工作，为什么它不工作？谢谢。

**更新的编辑**

明白了！！！！！！...这是servlet：它可能没有创建文件：真正的路径不是`filename.csv`a `System.currentTimeMillis()+".csv"`，然后我将它写入服务器。但我只是在创建文件后才发送响应（或者我是吗？）......

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");
    String filename = "storing/csv_uploads/"+System.currentTimeMillis()+".csv";
    //String filename = "storing/csv_uploads/filename.csv"; //this works since it was previously there
    PrintWriter out = response.getWriter();

    try {
        Type type = new TypeToken<List<PieceFeeder>>(){}.getType();
        ArrayList<PieceFeeder> pieceFeeders = new Gson().fromJson(request.getParameter("data"), type);            

        DataManager dm = new DataManager();
        if (dm.exportPieces(pieceFeeders, filename)) {
            System.out.println("in SaveFileServlet: after exportPieces");
            File f = new File(filename);
            while (!f.exists()) {
                //waiting...I NEVER GET IN HERE
                System.out.println("in SaveFileServlet: waiting for file to exist");
            }
            out.write(filename);
        } else {
            out.write("error at creating file");
        }
    }...
} 
```

和`DataManager.exportPieces`：

```
public void exportPieces(ArrayList<PieceFeeder> pieceFeeders, String filename) {
    BufferedWriter bufferedWriter = null;
    try {
        bufferedWriter = new BufferedWriter(new FileWriter(filename));

        //write first line without "\n"
        if (pieceFeeders.size() > 0) {
            PieceFeeder pf = pieceFeeders.get(0);
            Piece p = pf.getPiece();
            bufferedWriter.write(p.getDescription() + ","
                    + pf.getStock() + ","
                    + p.getLength() + ","
                    + p.getWidth() + ","
                    + p.getLengthEdges() + ","
                    + p.getWidthEdges());
        }
        for (int i = 1; i < pieceFeeders.size(); i++) {
            PieceFeeder pf = pieceFeeders.get(i);
            Piece p = pf.getPiece();
            bufferedWriter.write("\n" + p.getDescription() + ","
                    + pf.getStock() + ","
                    + p.getLength() + ","
                    + p.getWidth() + ","
                    + p.getLengthEdges() + ","
                    + p.getWidthEdges());
        }
        return true;
    } catch (Exception ex) {
        Logger.getLogger(DataManager.class.getName()).log(Level.SEVERE, null, ex);
        return false;
    } finally {
        //Close the BufferedWriter
        try {
            if (bufferedWriter != null) {
                bufferedWriter.flush();
                bufferedWriter.close();
                System.out.println("in exportPieces: finally"); 
            }
        } catch (IOException ex) {
            Logger.getLogger(DataManager.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

我总是得到

`"in exportPieces: finally"`

`"in SaveFileServlet: after exportPieces"`

并且`"in SaveFileServlet: waiting for file to exist"`永远不会被调用，因此文件在发送响应之前就存在

但是如果我发送一个旧文件*一个尚未创建的文件），它就可以工作

**较新的编辑**

只是为了说清楚：如果我这样做：

*   `window.location = path`
*   `$("body").append("<iframe src='" + path + "' ></iframe>");`删除`display:none` 它给出一个`404 error`：`The requested resource () is not available.`但标题显示我正在尝试访问：`http://localhost:8080/optimizerwithservlet/storing/csv_uploads/filename.csv`所以它就在那里

**编辑**

正如用户所言，我安装了 Firebug，这就是我得到的：

```
<iframe style="display: none;" src="storing/csv_uploads/filename.csv"> 
```

意思是它有效！但是为什么不显示...？

**旧编辑：**

万一这可能很重要，尽管我对此表示怀疑：这是来自servlet的相关代码：

```
 response.setContentType("text/plain");
    response.setCharacterEncoding("UTF-8");
    String filename = "storing/csv_uploads/filename.csv";
    PrintWriter out = response.getWriter();
    out.write(filename); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:42:02.400

`$.post`是异步的。您正试图在值存在之前对其进行警报，仅此而已。

来自[jQuery API 文档](http://api.jquery.com/jQuery.ajax/)

> Ajax 中的第一个字母代表“异步”，这意味着操作是并行发生的，并且不保证完成的顺序。$.ajax() 的 async 选项默认为 true，表示在发出请求后可以继续执行代码。强烈建议不要将此选项设置为 false（从而使调用不再是异步的），因为它可能导致浏览器无响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:11:12.227

克劳迪娅：

您绝对确定您从 servlet 获得的响应是​​带有路径的简单字符串吗？它周围没有任何空白或类似的东西吗？如果不确定，请尝试将您的设置`dataType`为`text`.

我对您的建议是`<iframe>`在您的页面中放置一个`src`属性设置为您的文件下载路径的属性。确保您甚至可以访问该文件。这至少可以排除它是否是相对路径问题。

而不是使用`alert()`，使用`console.log()`- 作为`console.log()`将保留数据结构并让您正确查看它。

**编辑**

```
function saveData(){
    var path;

    $.post("SaveFileServlet", {dataType: 'text', data : JSON.stringify(jsonPieces)}, function(response) {
        path = response; // setting the path like this does NOT WORK - nothing happens           

        console.log (path); 

        $("body").append("<iframe src='" + path + "' style='display: none;' ></iframe>");       
    });        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:46:28.737

**编辑：**您可能需要将数据类型指定为“文本”以确保返回字符串。

在回调中，假设`response`是一个字符串，您可以简单地执行以下操作：

```
window.location = response; 
```

这会将浏览器重定向到响应指示的路径，假设它是绝对 url 或根相对路径（即以 / 开头）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T16:46:19.923

问题是执行顺序。正如climage 所指出的，ajax 调用是异步的，所以浏览器在等待结果时会继续做一些事情。

最基本的：

```
function doSomething() {
    $.post("SaveFileServlet", {data : JSON.stringify(jsonPieces)}, function(response) {
      alert('post done');
    }
    alert('doSomething done');
} 
```

几乎 100% 的时间，您将收到的第一个警报将是“doSomething done”而不是“post done”。

这是因为 JavaScript 不会等待 ajax 调用完成以继续进行下一步。

# git - Git 工作流程：选择要从 QA 发布到 PROD 的功能

> ID：13090996
> 
> 赞同：1
> 
> 时间：2012-10-26T16:40:47.867
> 
> 标签：git, version-control, workflow, build-process

我是 Git 的新手，我想知道使用这样的 SCM 是否可以实现这个想法。

我的想法是让 DEV 团队在本地处理功能，然后将这些功能推送给 QA。此时，当 QA 测试和验证故事时，业务可以决定将在 prod 中安装哪些故事。

例如，DEV 正在处理故事 A、B、C 和 D。然后这 4 个在 QA 中进行了测试，但企业决定仅在生产中实际安装 B 和 D。

基本上，QA 将拥有 PROD 中的所有故事，可能还有更多。

甚至可以使用 git 做这样的事情吗？您是否看到使用这种方法的问题（故事之间的依赖关系可能是其中之一）？

谢谢！罗伯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:10:40.587

是的！我写了一篇关于这个工作流程的整篇文章：http: [//dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

这种方法的关键是所有功能或任务都从同一点开始。这使任何人——甚至非程序员——都可以在特定环境或阶段选择他们想要的功能。您可以为其中的每一个指定一个分支。

如果您希望能够让任何人发布具有临时混合和匹配功能的版本，强烈建议从存储库中的 .git 目录共享您的 rr-cache 目录。这样，一旦解决了冲突，当有人抓取一些特性并将它们合并到一个新分支上时，就不需要重新解决它。这被称为`rerere`，我在文章中解释它。此外，为了自动化共享，您需要编写脚本的基本命令如下所示：[共享 rerere 缓存](https://stackoverflow.com/questions/12566023/sharing-rerere-cache)这样您就可以让任何非开发人员也利用这一点。

这并非没有争议。去年（大约一年半前）与一些编程重量级人物就这个问题进行了激烈的讨论。我记录了长时间的讨论并将其包含在内，以便您自己判断： http: [//dymitruk.com/old-comments-about-branch-per-feature.html](http://dymitruk.com/old-comments-about-branch-per-feature.html)

总之，本学科将允许您在任何时间点部署任何完整的功能集 - 无论它们的编码顺序如何。