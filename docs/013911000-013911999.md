# StackOverflow 问答 13911000-13911999

# jquery - 带有 jQ uery 的幻灯片在重新加载时显示所有内容

> ID：13911005
> 
> 赞同：0
> 
> 时间：2012-12-17T08:56:57.097
> 
> 标签：jquery, slideshow

我正在尝试制作一个简单的幻灯片来显示数据库中包含的一些信息。

我遇到的问题是，当页面重新加载时，会显示滑块中的所有内容。我不知道如何解决这个问题。这是我实现的 jQuery 代码：

```
$("#filmer > div:gt(0)").hide();
setInterval(function() { 
    $('#filmer > div:first')
        .fadeOut(0)
        .next()
        .fadeIn(1000)
        .end()
        .appendTo('#filmer');
},  5000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:15:49.173

```
$(document).ready(function() {
  $("#filmer > div:gt(0)").hide();

  setInterval(function() {
    $('#filmer > div:first')
     .fadeOut(0)
     .next()
     .fadeIn(1000)
     .end()
     .appendTo('#filmer');
    },  5000);
}); 
```

# c - 使用 APR 创建线程池

> ID：13911009
> 
> 赞同：0
> 
> 时间：2012-12-17T08:57:08.773
> 
> 标签：c, multithreading, apache, threadpool

```
gcc 4.7.2
Apache Portable Runtime 
```

你好，

我开始使用线程进行 apr。我的程序将使用很多线程，我想使用线程池以便更好地控制它们。

但是，apr 并没有太多关于创建线程池的文档。我看过以下api

```
/* Create the threading pool */
apr_thread_pool_create

/* Would I still need to do this, as the below api will create new thread? */
apr_thread_create

/* Or would this be better */
apr_procattr_create

/* When all finished */
apr_thread_pool_destroy 
```

APR 的文档似乎非常有限。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:29:43.260

我相信 APR 线程池存在于较早的时候，当时这些 API 在常规 Java 运行时中并不流行。这些天，你应该看看 java.util.concurrent...

我正在将您链接到告诉您如何使用它的东西。

编辑：对不起，我需要为此去第三方托管的 Java 教程。 [http://www.math.uni-hamburg.de/doc/java/tutorial/essential/threads/group.html](http://www.math.uni-hamburg.de/doc/java/tutorial/essential/threads/group.html)

# css - 上边距在 IE 8 中不起作用

> ID：13911010
> 
> 赞同：0
> 
> 时间：2012-12-17T08:57:20.933
> 
> 标签：css, internet-explorer, margin

```
<div class="btns" id="btnHome">HOME</div>
<div class="btns" id="btnCon">CONTACT</div>
<div style="clear:both;"></div>
<div id="gall"></div> 
```

CSS

```
.btns{
    float:left;
    padding: 2px 10px 2px 10px;
}
#gall{
    margin:25px 0 15px;  // this top margin doesn't work in IE8
    height:70px;
    border:thin solid red;
} 
```

[这是jsFiddle](http://jsfiddle.net/Bonaca/68myJ/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:13:17.670

[这是IE8 中](http://www.inventpartners.com/ie8_margin_top_bug)的一个已知错误。有几种方法可以修复它。

您可以尝试添加`overflow:auto`到清算`<div>`

检查这个[小提琴](http://jsfiddle.net/68myJ/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:02:27.147

尝试添加 display:inline-block; 和宽度你想要多少希望它能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:05:47.680

```
<div class="btns" id="btnHome">HOME</div>
<div class="btns" id="btnCon">CONTACT</div>
<div style="clear:both;"></div>
&nbsp; <!-- Adding &nbsp; will solve problem -->
<div id="gall"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T09:08:16.413

为我工作。

[http://jsfiddle.net/68myJ/13/](http://jsfiddle.net/68myJ/13/)

```
<div class="btns" id="btnHome">HOME</div>
<div class="btns" id="btnCon">CONTACT</div>
<div style="clear:both;"></div>
<div id="gall"></div>

.btns{
    float:left;
    padding:2px 10px 2px 10px;
}

#gall{
    margin:25px 0 15px !important;
    height:70px;
    width:100%;
    display:block; /* can revert inline block when long list for IE8*/
    border:thin solid red;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T09:14:25.483

试试这个：

```
<div id="wrapper">
  <div class="btns" id="btnHome">HOME</div>
  <div class="btns" id="btnCon">CONTACT</div>
</div>

<div id="gall"></div>
​

#wrapper{
  overflow:hidden;
}
.btns{
    float:left;
    padding:2px 10px 2px 10px;
}

#gall{
    margin:25px 0 15px !important;
    height:70px;
    width:100%;
    display:block; /* can revert inline block when long list for IE8*/
    border:thin solid red;
} 
```

见小提琴：http: [//jsfiddle.net/68myJ/17/](http://jsfiddle.net/68myJ/17/)

# javascript - 如何将值从一个下拉列表存储到另一个下拉列表

> ID：13911011
> 
> 赞同：2
> 
> 时间：2012-12-17T08:57:21.267
> 
> 标签：javascript, drop-down-menu

我有 2 个下拉列表，在第一个下拉列表中我有一些数据，如果我选择数据，它必须存储到第二个下拉列表中。这是代码：-

这是第一个下拉列表，

```
<select name="weekId" id="weekId" onchange="getSelected(value)">
   <option value="Select">Select</option>
   <option value="Weekly">Weekly</option>
   <option value="Monthly">Monthly</option>
   <option value="Both">Both</option>
</select> 
```

这是第二个名单，

```
<select id="selectedWeek" name="selectedWeek" size="5" multiple="multiple"> 
```

如果我在第一个下拉列表中选择每周，则该值必须存储在第二个下拉列表中。我该如何实施呢？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:16:10.867

```
var weekId = document.getElementById('weekId')
  , selectedWeek = document.getElementById('selectedWeek')
  , option;

weekId.onchange = function() { 
  option = document.createElement('option');
  option.value = this.value;
  option.text = this.options[this.selectedIndex].text;
  selectedWeek.appendChild(option);
  weekId.removeChild(this.options[this.selectedIndex]);  
};​ 
```

在这里查看工作小提琴：http: [//jsfiddle.net/bKrFK/1/](http://jsfiddle.net/bKrFK/1/)

事件处理程序中的最后一行将从 weekId 选择框中删除选定的选项（如果不需要，请删除该行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:09:20.640

尝试这个..

```
<html>
<body>
<select name="weekId" id="weekId" onchange="document.getElementById('selectedWeek').value=this.value">
   <option value="Select">Select</option>
   <option value="Weekly">Weekly</option>
   <option value="Monthly">Monthly</option>
   <option value="Both">Both</option>
</select>
<select id="selectedWeek" name="selectedWeek" size="5" multiple="multiple">

<option value="Select">Select</option>
   <option value="Weekly">Weekly</option>
   <option value="Monthly">Monthly</option>
   <option value="Both">Both</option>
 </select>
</body>
</html> 
```

注意：第二个下拉列表在第一个选择框中提供所有值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:10:19.890

首先，在**onChange**事件中调用 javascript 函数时，将**getSelected(value)**替换为**getSelected(this.value)**。

现在在那之后，

您的 javascript 函数**getSelected(value)**应如下所示

```
function getSelected(value)
{
     document.getElementById("selectedWeek").innerHTML = '<option value="'+value+'">'+value+'</option>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:03:49.540

您可以使用 Javascript 执行此操作：

```
function listbox_moveacross(sourceID, destID) {
    var src = document.getElementById(sourceID);
    var dest = document.getElementById(destID);

    for(var count=0; count < src.options.length; count++) {

        if(src.options[count].selected == true) {
                var option = src.options[count];

                var newOption = document.createElement("option");
                newOption.value = option.value;
                newOption.text = option.text;
                newOption.selected = true;
                try {
                         dest.add(newOption, null); //Standard
                         src.remove(count, null);
                 }catch(error) {
                         dest.add(newOption); // IE only
                         src.remove(count);
                 }
                count--;
        }
    }
} 
```

使用您的选择框的 ID 传递此函数。

For Demo: [Listbox move left-right options JavaScript](http://viralpatel.net/blogs/listbox-select-all-move-left-right-up-down-javascript/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-17T09:13:50.177

您可以使用以下内容，而无需任何 jQuery 依赖项。我添加了一些评论来解释发生了什么。

```
<script>
    function handleSelection(weekDropDown) {
            // Get selected value
        var selection = weekDropDown.options[weekDropDown.selectedIndex].value;

        var selectedWeekDropDown = document.getElementById("selectedWeek");

        var opt;
        if(selectedWeekDropDown.options[0]) {
            // Replace
            opt = selectedWeekDropDown.options[0];
        } else {
            // Add an option
            opt = document.createElement("option");
        }

        if(!selectedWeekDropDown.options[0]) {
            selectedWeekDropDown.options.add(opt);
        }

        // Set the option text and value
        opt.text = selection;
        opt.value = selection;

    }
</script>

<select name="weekId" id="weekId" onchange="handleSelection(this)">
     <option value="Select">Select</option>
     <option value="Weekly">Weekly</option>
     <option value="Monthly">Monthly</option>
     <option value="Both">Both</option>
</select>

<select id="selectedWeek" name="selectedWeek" size="5" multiple="multiple"> 
```

# html - html5media 提取的代码不起作用

> ID：13911021
> 
> 赞同：1
> 
> 时间：2012-12-17T08:58:30.293
> 
> 标签：html, javascript, html5-audio

我正在使用 java 脚本库`html5media.min.js`在. 我的问题是，当我将脚本链接添加到我的页面时：`mp3``Firefox`

```
<script src = "http://api.html5media.info/1.1.5/html5media.min.js" type="text/javascript"></script> 
```

它工作正常。但是如果我得到代码并将其保存在本地文件中，它就不起作用了！！
IE

```
<script src="Scripts/html5media.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:44:49.813

只需将此代码添加到您的页面中的脚本标记之后

```
html5media.flowplayerSwf = "/path/to/your/flowplayer.swf";
html5media.flowplayerAudioSwf = "/path/to/your/flowplayer.audio.swf";
html5media.flowplayerControlsSwf = "/path/to/your/flowplayer.controls.swf"; 
```

你可以看到[这个](http://code.google.com/p/html5media/wiki/HostingYourOwn)

# iphone - 如何提取按字符分隔的子字符串？

> ID：13911029
> 
> 赞同：-1
> 
> 时间：2012-12-17T08:58:58.460
> 
> 标签：iphone

请告诉我如何从由某个字符分隔的单个字符串中提取子字符串？

**/ 2132321321/34 3/0 /**

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:07:05.277

您可以通过执行将字符串分隔为数组...

```
NSString *myString = @"/ 2132321321/34 3/0 /";

NSArray *strings = [myString componentsSeparatedByString:@"/"]; 
```

这将有一个包含所有字符串的数组，例如...

```
[@" 2132321321",
 @"34 3",
 @"0 "]; 
```

然后你可以做...

```
for (NSString *string in strings) {
    NSLog(@"%i", [string length]);
    // You can do what you want in here.
} 
```

这将打印所有长度。

# c - 为什么这些指针显示不同的地址？

> ID：13911031
> 
> 赞同：-4
> 
> 时间：2012-12-17T08:59:16.053
> 
> 标签：c, pointers

对于以下代码片段：

```
 unsigned int *ptr[10];
 int a[10]={0,1,2,3,4,5,6,7,8,9};
 *ptr=a;
 printf("%u %u",ptr,a); 
```

我检查了 codepad.org 和 ideone.com。在这两个编译器上，它显示 ptr 和 a 的不同值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:02:04.223

警告：

```
pointer targets in assignment differ in signedness
format ‘%u’ expects type ‘unsigned int’, but argument 2 has type ‘unsigned int **’
format ‘%u’ expects type ‘unsigned int’, but argument 3 has type ‘int *’ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:04:43.447

这是一个指针数组

```
*ptr[10] 
```

如果你想为此分配一个去：

```
(*ptr)[10] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:05:12.020

`uint *ptr[10]`等效于`uint **ptr`并且分配与分配给数组内的第一个偏移量`*ptr = a`相同，它不会触及自身的值...`ptr[0] = a``a``ptr``ptr`

您可能想使用其中之一：

```
ptr = &a;

// Or
printf("%u %u",ptr[0],a);

// Or
unsigned int *ptr;
ptr = a; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:03:00.463

在指针上下文中使用时，指向数组`ptr`的开头`ptr`，而`a`指向`a`数组的开头。这是两个不同的数组，它们在内存中占据完全不同的位置。为什么它们会一样？

当然，打印指针值`%u`是一种犯罪行为。使用`%p`. 这`%p`就是为了。

# jax-rs - JAXRS 资源可以用于不同的请求吗？

> ID：13911035
> 
> 赞同：0
> 
> 时间：2012-12-17T08:59:38.907
> 
> 标签：jax-rs

我正在使用 JAXRS 在使用 http 请求的两个应用程序之间进行通信。在实施过程中，我与我的大学发生了争执，他们说我不能将相同的资源（org.apache.wink.client.Resource）用于不同的请求，因为它可能会导致冲突。

我认为这样的事情不可能发生，并且通过对所有请求使用相同的资源，我正在提高性能。

Bellow是一个代码片段，请帮助解决我们的争议

```
public class jaxrsDeliveryService{

    private Resource queryResource;

    public void init(){
        servletPath = url + REMOVE_COUNT_SUFFIX_URL;
        queryResource = restClient.resource(servletPath);
        queryResource.contentType(APPLICATION_XML).accept(APPLICATION_XML);`
    }

    public QueryResponse getqueryResult(QueryInfoRequest qir){
        ClientResponse response = resource.put(qir);
        return response.getEntity(QueryResponse.class);          
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:45:01.980

[`Resource`](http://incubator.apache.org/wink/1.0/api/org/apache/wink/client/Resource.html)是一个与线程安全无关的接口。因此，我们应该假设它的实现可能是不安全的。如果你想让你的类线程安全，你 1) 不应该使用相同的`Resource`，或者 2) 将它的使用放入`synchronized`块中。

如果您不担心线程安全，请重用`resource`. 您将获得一点性能。

# vb.net - 使用 ExecuteQuery VB 动态地将 Linq 转换为 sql 表

> ID：13911036
> 
> 赞同：1
> 
> 时间：2012-12-17T08:59:42.907
> 
> 标签：vb.net, linq, executequery

我正在使用 VB Framework 4.0 和 Linq to sql。

我想动态选择表的名称。我已经使用了库 namedtable.dll 并且我已经映射了数据库的所有表，这没关系。

我的问题是当我尝试执行 executequery 时。这是我的代码。

```
Imports Microsoft.VisualBasic
Imports System.Data.Linq
Imports Prototype.NamedTable.Data
Imports Prototype.NamedTable.Utility

    Public Class tipos

        Private _conexion As String = "conexion"

        Public Sub New()

        End Sub

        ...........

        Public Function getConsulta(byval tableName as String) As IList(Of TIPOS)

            Dim context As New DataContext(_conexion)

            sql = " select COD, NAME from " & tableName

            Dim a = context.ExecuteQuery(Of TIPOS)(sql)

            Return sql.ToList

        End Function
    End Class 
```

但我有一个错误：“El Tipo 'TIPOS' debe declarar un constructor predeterminado (sin parametros) para que pueda contruirse durante la asignación。” 英文是：

“类型 'Type TIPOS' 必须声明默认（无参数）构造函数才能在映射期间构造”

我在其他文件中定义了“TIPOS”：

```
Public Interface TIPOS
    <Column(CanBeNull:=False)> Property COD Integer
    <Column(CanBeNull:=False)> Property NAME As String
End Interface

Public Class ITIPO : Implements TIPO
    Private _cod As Integer
    Private _name As String

    Public Property COD As Integer Implements TIPO.COD
        Get
            Return _cod
        End Get
        Set(ByVal value As Integer)
            _cod = value
        End Set
    End Property

    Public Property NAME As String Implements TIPO.NAME
        Get
            Return _name
        End Get
        Set(ByVal value As String)
            _name = value
        End Set
    End Property

End Class 
```

我需要帮助！

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T04:07:29.697

该解决方案可在 codeproject.com 上的文章“LINQ-to-SQL 的动态表映射”中找到。下面是您可以使用的静态类。请参阅文章以获取有关使用 4 种不同通用方法必须执行的操作的说明。这是一个调用示例：

```
public interface IResult
{
    [Column(IsPrimaryKey = true)]
    int Id { get; set; }

    [Column]
    string Name { get; set; }

    [Column]
    double Value { get; set; }
}

public void TestThis()
{
    var connectionString = "Data Source=.\SQLEXPRESS;Initial Catalog=YourDatabaseName;Integrated Security=True;Pooling=False";
    var context = new DataContext(connectionString);
    var table = context.GetTable<IResult>("YourTableName");
    var query = from r in table where r.Id == 108 select r;
    var list = query.ToList();
} 
```

班级代码：

```
namespace Prototype.NamedTable
{
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data.Linq;
using System.Data.Linq.Mapping;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;
using System.Reflection.Emit;

/// <summary>
/// The utility.
/// </summary>
public static class Utility
{
    #region Constants and Fields

    /// <summary>
    /// The named types.
    /// </summary>
    private static readonly Dictionary<string, Type> NamedTypes = new Dictionary<string, Type>();

    /// <summary>
    /// The _assembly builder.
    /// </summary>
    private static AssemblyBuilder _assemblyBuilder;

    /// <summary>
    /// The _module builder.
    /// </summary>
    private static ModuleBuilder _moduleBuilder;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets a value indicating whether Verbose.
    /// </summary>
    public static bool Verbose { get; set; }

    #endregion

    #region Public Methods

    /// <summary>
    /// The clear.
    /// </summary>
    public static void Clear()
    {
        _assemblyBuilder = null;
        NamedTypes.Clear();
    }

    /// <summary>
    /// Retrieve a table from the data context which implements ITable&lt;TEntity&gt; by T and use ITable&lt;TBack&gt;
    /// </summary>
    /// <typeparam name="TEntity">
    /// Entity Type
    /// </typeparam>
    /// <typeparam name="TBack">
    /// Backing Type
    /// </typeparam>
    /// <param name="context">
    /// Data Context
    /// </param>
    /// <returns>
    /// </returns>
    public static ATable<TEntity> GetTable<TEntity, TBack>(this DataContext context) where TEntity : class
        where TBack : class
    {
        // Create the backup table
        Table<TBack> refer = context.GetTable<TBack>();

        // Prepare the cloning method
        Delegate cloneFrom = CompileCloning(typeof(TEntity), typeof(TBack));

        // Construct the table wrapper
        return new ATable<TEntity>(refer, cloneFrom);
    }

    /// <summary>
    /// Retrieve a table from the data context which implements ITable&lt;TEntity&gt; uses specific backing table
    /// </summary>
    /// <typeparam name="TEntity">
    /// Entity Type
    /// </typeparam>
    /// <param name="context">
    /// Data context
    /// </param>
    /// <param name="name">
    /// Table name
    /// </param>
    /// <returns>
    /// </returns>
    public static ATable<TEntity> GetTable<TEntity>(this DataContext context, string name) where TEntity : class
    {
        // Create/Retrieve a type definition for the table using the TEntity type
        Type type = DefineEntityType(typeof(TEntity), name);

        // Create the backup table using the new type
        ITable refer = context.GetTable(type);

        // Prepare the cloning method
        Delegate cloneFrom = CompileCloning(typeof(TEntity), type);

        // Construct the table wrapper
        return new ATable<TEntity>(refer, cloneFrom);
    }

    /*
    /// <summary>
    /// The log.
    /// </summary>
    /// <param name="format">
    /// The format.
    /// </param>
    /// <param name="args">
    /// The args.
    /// </param>
    public static void Log(string format, params object[] args)
    {
        if (!Verbose)
        {
            return;
        }

        Console.Write("*** ");

        if ((args == null) || (args.Length == 0))
        {
            Console.WriteLine(format);
        }
        else
        {
            Console.WriteLine(format, args);
        }
    }*/

    #endregion

    #region Methods

    /// <summary>
    /// Clone an attribute
    /// </summary>
    /// <param name="attr">
    /// </param>
    /// <returns>
    /// </returns>
    private static CustomAttributeBuilder CloneColumn(object attr)
    {
        Type source = attr.GetType();
        Type target = typeof(ColumnAttribute);

        var props = new List<PropertyInfo>();
        var values = new List<object>();

        // Extract properties and their values
        foreach (PropertyInfo prop in source.GetProperties())
        {
            if (!prop.CanRead || !prop.CanWrite)
            {
                continue;
            }

            props.Add(target.GetProperty(prop.Name));
            values.Add(prop.GetValue(attr, null));
        }

        // Create a new attribute using the properties and values
        return new CustomAttributeBuilder(
            target.GetConstructor(Type.EmptyTypes), new object[0], props.ToArray(), values.ToArray());
    }

    /// <summary>
    /// Make a delegate that copy content from "source" to "dest"
    /// </summary>
    /// <param name="source">
    /// Source Type
    /// </param>
    /// <param name="dest">
    /// Destination Type
    /// </param>
    /// <returns>
    /// Executable delegate
    /// </returns>
    private static Delegate CompileCloning(Type source, Type dest)
    {
        // Input parameter
        ParameterExpression input = Expression.Parameter(source);

        // For every property, create a member binding
        List<MemberBinding> binds =
            source.GetProperties().Select(
                prop =>
                Expression.Bind(
                    dest.GetProperty(
                        prop.Name, BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly), 
                    Expression.MakeMemberAccess(input, prop))).Cast<MemberBinding>().ToList();

        // Expression of creating the new object
        MemberInitExpression body = Expression.MemberInit(
            Expression.New(dest.GetConstructor(Type.EmptyTypes)), binds);

        // The final lambda
        LambdaExpression lambda = Expression.Lambda(body, input);

        // MJE
        //Log("{0}", lambda.ToString());

        // Return the executable delegate
        return lambda.Compile();
    }

    /// <summary>
    /// Create a class based on the template interface
    /// </summary>
    /// <param name="template">
    /// </param>
    /// <param name="name">
    /// </param>
    /// <returns>
    /// </returns>
    private static Type DefineEntityType(Type template, string name)
    {
        // Prepare the builders if not done
        if (_assemblyBuilder == null)
        {
            _assemblyBuilder =
                AppDomain.CurrentDomain.DefineDynamicAssembly(
                    new AssemblyName(Guid.NewGuid().ToString()), AssemblyBuilderAccess.Run);

            _moduleBuilder = _assemblyBuilder.DefineDynamicModule("Types");
        }

        // Check if there is already a type created for that table
        if (NamedTypes.ContainsKey(name))
        {
            return NamedTypes[name];
        }

        // Create the new type
        TypeBuilder tbuilder = null;
        if (template.IsInterface)
        {
            tbuilder = DefineInterfaceChild(name, template);
        }
        else
        {
            tbuilder = DefineOverriddenChild(name, template);
        }

        Type final = tbuilder.CreateType();

        NamedTypes[name] = final;

        return final;
    }

    /// <summary>
    /// The define interface child.
    /// </summary>
    /// <param name="name">
    /// The name.
    /// </param>
    /// <param name="template">
    /// The template.
    /// </param>
    /// <returns>
    /// </returns>
    private static TypeBuilder DefineInterfaceChild(string name, Type template)
    {
        TypeBuilder tbuilder = _moduleBuilder.DefineType(
            name, TypeAttributes.Public, typeof(Object), new[] { template });

        // Default constructor
        tbuilder.DefineDefaultConstructor(MethodAttributes.Public);

        // Attach Table attribute
        var abuilder = new CustomAttributeBuilder(
            typeof(TableAttribute).GetConstructor(Type.EmptyTypes), 
            new object[0], 
            new[] { typeof(TableAttribute).GetProperty("Name") }, 
            new object[] { name });
        tbuilder.SetCustomAttribute(abuilder);

        List<PropertyInfo> properties = template.GetProperties().ToList(); // May require sorting

        // Implement all properties));
        foreach (PropertyInfo prop in properties)
        {
            // Define backing field
            FieldBuilder fbuilder = tbuilder.DefineField(
                "_" + prop.Name, prop.PropertyType, FieldAttributes.Private);

            // Define get method
            MethodBuilder pgbuilder = tbuilder.DefineMethod(
                "get_" + prop.Name, 
                MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig
                | MethodAttributes.Virtual | MethodAttributes.Final, 
                prop.PropertyType, 
                Type.EmptyTypes);

            // Define get method body { return _field; }
            ILGenerator ilg = pgbuilder.GetILGenerator();
            ilg.Emit(OpCodes.Ldarg_0);
            ilg.Emit(OpCodes.Ldfld, fbuilder);
            ilg.Emit(OpCodes.Ret);

            // Define set method
            MethodBuilder psbuilder = tbuilder.DefineMethod(
                "set_" + prop.Name, 
                MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig
                | MethodAttributes.Virtual | MethodAttributes.Final, 
                null, 
                new[] { prop.PropertyType });

            // Define set method body { _field = value; }
            ILGenerator ils = psbuilder.GetILGenerator();
            ils.Emit(OpCodes.Ldarg_0);
            ils.Emit(OpCodes.Ldarg_1);
            ils.Emit(OpCodes.Stfld, fbuilder);
            ils.Emit(OpCodes.Ret);

            // Define the property
            PropertyBuilder pbuilder = tbuilder.DefineProperty(
                prop.Name, PropertyAttributes.None, CallingConventions.Standard, prop.PropertyType, null);

            // Set get/set method
            pbuilder.SetGetMethod(pgbuilder);
            pbuilder.SetSetMethod(psbuilder);

            // Attach Column attribute
            foreach (object attr in prop.GetCustomAttributes(false))
            {
                if (attr is ColumnAttribute || attr is AlterColumnAttribute)
                {
                    // MJE
                    //Log("Create column attribute for {0}", prop.Name);
                    pbuilder.SetCustomAttribute(CloneColumn(attr));
                    break;
                }
            }
        }

        return tbuilder;
    }

    /// <summary>
    /// The define overridden child.
    /// </summary>
    /// <param name="name">
    /// The name.
    /// </param>
    /// <param name="template">
    /// The template.
    /// </param>
    /// <returns>
    /// </returns>
    private static TypeBuilder DefineOverriddenChild(string name, Type template)
    {
        TypeBuilder tbuilder = _moduleBuilder.DefineType(name, TypeAttributes.Public, template);

        // Default constructor
        tbuilder.DefineDefaultConstructor(MethodAttributes.Public);

        // Attach Table attribute
        var abuilder = new CustomAttributeBuilder(
            typeof(TableAttribute).GetConstructor(Type.EmptyTypes), 
            new object[0], 
            new[] { typeof(TableAttribute).GetProperty("Name") }, 
            new object[] { name });
        tbuilder.SetCustomAttribute(abuilder);

        List<PropertyInfo> properties = template.GetProperties().ToList(); // May require sorting

        // Implement all properties));
        foreach (PropertyInfo prop in properties)
        {
            // Define get method
            MethodBuilder pgbuilder = tbuilder.DefineMethod(
                "get_" + prop.Name, 
                MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig
                | MethodAttributes.Virtual | MethodAttributes.Final, 
                prop.PropertyType, 
                Type.EmptyTypes);

            // Define get method body { return _field; }
            ILGenerator ilg = pgbuilder.GetILGenerator();
            ilg.Emit(OpCodes.Ldarg_0);
            ilg.Emit(OpCodes.Call, template.GetMethod("get_" + prop.Name));
            ilg.Emit(OpCodes.Ret);

            // Define set method
            MethodBuilder psbuilder = tbuilder.DefineMethod(
                "set_" + prop.Name, 
                MethodAttributes.Public | MethodAttributes.SpecialName | MethodAttributes.HideBySig
                | MethodAttributes.Virtual | MethodAttributes.Final, 
                null, 
                new[] { prop.PropertyType });

            // Define set method body { _field = value; }
            ILGenerator ils = psbuilder.GetILGenerator();
            ils.Emit(OpCodes.Ldarg_0);
            ils.Emit(OpCodes.Ldarg_1);
            ils.Emit(OpCodes.Call, template.GetMethod("set_" + prop.Name));
            ils.Emit(OpCodes.Ret);

            // Define the property
            PropertyBuilder pbuilder = tbuilder.DefineProperty(
                prop.Name, PropertyAttributes.None, CallingConventions.Standard, prop.PropertyType, null);

            // Set get/set method
            pbuilder.SetGetMethod(pgbuilder);
            pbuilder.SetSetMethod(psbuilder);

            // Attach Column attribute
            foreach (object attr in prop.GetCustomAttributes(false))
            {
                if (attr is ColumnAttribute || attr is AlterColumnAttribute)
                {
                    // MJE
                    //Log("Create column attribute for {0}", prop.Name);
                    pbuilder.SetCustomAttribute(CloneColumn(attr));
                    break;
                }
            }
        }

        return tbuilder;
    }

    #endregion

    /// <summary>
    /// A table wrapper implements ITable&lt;TEntity&gt; backed by other ITable object
    /// </summary>
    /// <typeparam name="TEntity">
    /// </typeparam>
    public class ATable<TEntity> : ITable<TEntity>
        where TEntity : class
    {
        #region Constants and Fields

        /// <summary>
        /// Cloning method
        /// </summary>
        private readonly Delegate _clone;

        /// <summary>
        /// Backing table
        /// </summary>
        private readonly ITable _internal;

        #endregion

        #region Constructors and Destructors

        /// <summary>
        /// Initializes a new instance of the <see cref="ATable{TEntity}"/> class. 
        /// Construct from backing table
        /// </summary>
        /// <param name="inter">
        /// </param>
        /// <param name="from">
        /// </param>
        public ATable(ITable inter, Delegate from)
        {
            this._internal = inter;
            this._clone = from;
        }

        #endregion

        #region Properties

        /// <summary>
        /// Gets ElementType.
        /// </summary>
        public Type ElementType
        {
            get
            {
                // Use the backing table element
                return this._internal.ElementType;
            }
        }

        /// <summary>
        /// Gets Expression.
        /// </summary>
        public Expression Expression
        {
            get
            {
                // Use the backing table expression
                return this._internal.Expression;
            }
        }

        /// <summary>
        /// Gets Provider.
        /// </summary>
        public IQueryProvider Provider
        {
            get
            {
                // Use the backing table provider
                return this._internal.Provider;
            }
        }

        #endregion

        #region Implemented Interfaces

        #region IEnumerable

        /// <summary>
        /// The get enumerator.
        /// </summary>
        /// <returns>
        /// </returns>
        /// <exception cref="NotImplementedException">
        /// </exception>
        IEnumerator IEnumerable.GetEnumerator()
        {
            throw new NotImplementedException();
        }

        #endregion

        #region IEnumerable<TEntity>

        /// <summary>
        /// The get enumerator.
        /// </summary>
        /// <returns>
        /// </returns>
        /// <exception cref="NotImplementedException">
        /// </exception>
        public IEnumerator<TEntity> GetEnumerator()
        {
            throw new NotImplementedException();
        }

        #endregion

        #region ITable<TEntity>

        /// <summary>
        /// The attach.
        /// </summary>
        /// <param name="entity">
        /// The entity.
        /// </param>
        /// <exception cref="NotImplementedException">
        /// </exception>
        public void Attach(TEntity entity)
        {
            throw new NotImplementedException();
        }

        /// <summary>
        /// The delete on submit.
        /// </summary>
        /// <param name="entity">
        /// The entity.
        /// </param>
        public void DeleteOnSubmit(TEntity entity)
        {
            // Directly invoke the backing table
            this._internal.DeleteOnSubmit(entity);
        }

        /// <summary>
        /// The insert on submit.
        /// </summary>
        /// <param name="entity">
        /// The entity.
        /// </param>
        public void InsertOnSubmit(TEntity entity)
        {
            // Input entity must be changed to backing type
            object v = this._clone.DynamicInvoke(entity);

            // Invoke the backing table
            this._internal.InsertOnSubmit(v);
        }

        #endregion

        #endregion
    }

    /// <summary>
    /// The alter column attribute.
    /// </summary>
    public class AlterColumnAttribute : Attribute
    {
        #region Constants and Fields

        /// <summary>
        /// The _can be null.
        /// </summary>
        private bool _canBeNull = true;

        /// <summary>
        /// The _update check.
        /// </summary>
        private UpdateCheck _updateCheck = UpdateCheck.Always;

        #endregion

        #region Properties

        /// <summary>
        /// Gets or sets AutoSync.
        /// </summary>
        public AutoSync AutoSync { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether CanBeNull.
        /// </summary>
        public bool CanBeNull
        {
            get
            {
                return this._canBeNull;
            }

            set
            {
                this._canBeNull = value;
            }
        }

        /// <summary>
        /// Gets or sets DbType.
        /// </summary>
        public string DbType { get; set; }

        /// <summary>
        /// Gets or sets Expression.
        /// </summary>
        public string Expression { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether IsDbGenerated.
        /// </summary>
        public bool IsDbGenerated { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether IsDiscriminator.
        /// </summary>
        public bool IsDiscriminator { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether IsPrimaryKey.
        /// </summary>
        public bool IsPrimaryKey { get; set; }

        /// <summary>
        /// Gets or sets a value indicating whether IsVersion.
        /// </summary>
        public bool IsVersion { get; set; }

        /// <summary>
        /// Gets or sets UpdateCheck.
        /// </summary>
        public UpdateCheck UpdateCheck
        {
            get
            {
                return this._updateCheck;
            }

            set
            {
                this._updateCheck = value;
            }
        }

        #endregion
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:45:57.263

Linq-to-Sql 无法实现接口。它需要一个类规范来知道它应该从查询中创建哪些实例。至少可以说，异常消息难以捉摸。我不知道为什么它不是更重要的。

请注意，您要实现的类必须已经映射，或者：它必须在 dbml.xml 中。我这样说是因为你的`ITIPO`类不是部分的，这让我想知道如何让它实现一个接口（好吧，也许你只是精简了代码）。

旁注：类名不要全部大写，接口规范前面要加上“I”，而不是类。

# antlr - ANTLR：为什么无效输入可以匹配语法定义

> ID：13911049
> 
> 赞同：1
> 
> 时间：2012-12-17T09:01:16.380
> 
> 标签：antlr, antlr3

我为计算表达式编写了一个非常简单的语法定义：

```
grammar SimpleCalc;

options {
    output=AST;
}

tokens {
    PLUS  = '+' ;
    MINUS = '-' ;
    MULT = '*' ;
    DIV = '/' ;
}

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

ID  : ('a'..'z' | 'A' .. 'Z' | '0' .. '9')+ ;

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { Skip(); } ;

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

start: expr EOF;

expr : multExpr ((PLUS | MINUS)^ multExpr)*;

multExpr : atom ((MULT | DIV)^ atom )*;

atom : ID
     | '(' expr ')' -> expr; 
```

我已经尝试了无效的表达式`ABC &* DEF`，`start`但它通过了。看起来该`&`字符被忽略了。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:36:06.713

实际上您的无效表达式`ABC &= DEF`尚未通过；它导致`NoViableAltException`.

![在此处输入图像描述](../Images/a9d249e0d5d693971bdc75cf7854301f.png)

# javascript - 以任何顺序匹配查询中的所有单词的正则表达式

> ID：13911053
> 
> 赞同：38
> 
> 时间：2012-12-17T09:01:37.333
> 
> 标签：javascript, jquery, regex

我正在尝试为一个项目构建一个搜索功能，该功能根据用户搜索输入缩小项目范围，以及它是否与项目列出的关键字匹配。为此，我将项目关键字保存在`data`属性中，并使用 RegExp 模式将查询与这些关键字进行匹配。

我目前正在使用这个表达式，我知道这是不正确的，需要你的帮助：

`new RegExp('\\b(' + query + ')', 'gi')))`其中 query 是`|`用户输入的查询的分隔值（例如`\\b(meat|pasta|dinner)`）。即使只有 1 个匹配项，这也会返回给我一个匹配项，例如 -`meat`

只是为了抛出一些上下文，这里有一个小例子：

如果用户键入：`meat pasta dinner`它应该列出所有具有针对它们列出的所有 3 个关键字的项目，即`meat` `pasta`和`dinner`。这些与输入的顺序无关。

你能帮我用一个表达式来匹配查询中的所有单词，以任何顺序吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-17T09:51:38.363

你可以实现这将前瞻断言

```
^(?=.*\bmeat\b)(?=.*\bpasta\b)(?=.*\bdinner\b).+ 
```

[在 Regexr 上](http://regexr.com?335fm)查看

`(?=.*\bmeat\b)`是一个[积极的前瞻断言](http://www.regular-expressions.info/lookaround.html)，确保它`\bmeat\b`位于字符串中的某个位置。其他关键字相同，`.+`然后实际匹配整个字符串，但前提是断言为真。

但它也适用于“晚餐肉 Foobar 意大利面”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T09:11:19.987

你的正则表达式看起来不错：

```
\b(meat|pasta|dinner)\b 
```

检查匹配的长度是否等于关键字的数量（在本例中为三个）：

```
string.match(re).length === numberOfKeywords 
```

哪里`re`是带有`g`标志的正则表达式，`string`是数据，`numberOfKeywords`是关键字的数量

这假设没有重复的关键字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-31T07:34:38.867

根据接受的答案，我编写了一个简单的 Java 方法，该方法从一组关键字构建正则表达式

```
public static String regexIfAllKeywordsExists(String[] keywords) {
    StringBuilder sb = new StringBuilder("^");

    for (String keyword : keywords) {
        sb.append("(?=.*\\b");
        sb.append(keyword);
        sb.append("\\b)");
    }

    sb.append(".+");

    return sb.toString();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-12-26T05:36:47.820

stema 的答案在技术上是正确的，但它根本没有考虑性能。前瞻非常慢（在正则表达式的上下文中，它快如闪电）。即使使用当前的逻辑，正则表达式也不是最优的。

所以这里有一些测量值，是在包含所有三个单词的较大字符串上计算的，运行搜索 1000 次并使用四种不同的方法：

**stema 的正则表达式**

`/^(?=.*\bmeat\b)(?=.*\bpasta\b)(?=.*\bdinner\b).+/`

结果：605ms

**优化的正则表达式**

`/^(?=.*?\bmeat\b)(?=.*?\bpasta\b)(?=.*?\bdinner\b)/`

使用惰性匹配并且不需要 end all 选择器

结果：291ms

**置换正则表达式**

`/(\bmeat\b.*?(\bpasta\b.*?\bdinner\b|\bdinner\b.*?\bpasta\b)|\bpasta\b.*?(\bmeat\b.*?\bdinner\b|\bdinner\b.*?\bmeat\b)|\bdinner\b.*?(\bpasta\b.*?\bmeat\b|\bmeat\b.*?\bpasta\b))/`

结果：56ms

这很快，因为第一个模式正在匹配，如果最后一个模式匹配，它会比前瞻模式（300 毫秒）更慢

**正则表达式数组**

```
var regs=[/\bmeat\b/,/\bpasta\b/,/\bdinner\b/];
var result = regs.every(reg=>reg.test(text)); 
```

结果：26ms

请注意，如果字符串被设计为不匹配，则结果为：

*   521毫秒
*   220毫秒
*   161ms - 慢得多，因为它必须经过所有分支
*   14毫秒

如您所见，在所有情况下，仅使用循环都会快一个数量级，更不用说更容易阅读了。

最初的问题是要求一个正则表达式，所以我的答案是排列正则表达式，但我不会使用它，因为它的大小会随着搜索词的数量呈指数增长。

此外，在大多数情况下，这个性能问题是学术性的，但有必要强调一下。

# python-3.x - 在给定静态桶数的情况下寻找哈希函数

> ID：13911054
> 
> 赞同：0
> 
> 时间：2012-12-17T09:01:46.863
> 
> 标签：python-3.x

我有固定数量的存储桶和 N 个输入。我希望 N 的前 n 个值进入同一个桶，例如

如果我有 6 个存储桶和 16 个条目，我希望前 3 个值 (0,1,2) 进入存储桶 1，

(3,4,5) 桶 2 等。条目按升序排序。

我可以使用哪个散列函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:06:29.597

那为什么不直接使用整数除法呢？

```
for i, entry in enumerate(entries):
    bucket = i // 3
    # insert into choosen bucket number 
```

对于 0、1 和 2，这将导致 bucket `0`，对于 3、4 和 5，它将是`1`等等。

# android - 即使 GPS 开启但 Wifi 关闭，我有时也无法获取当前位置，为什么？

> ID：13911055
> 
> 赞同：0
> 
> 时间：2012-12-17T09:01:59.373
> 
> 标签：android, google-maps, location

我有一个使用谷歌地图并具有显示当前位置的功能的 android 应用程序。我收到的评论很少，说“即使 GPS 开启，当前位置也不会出现”。我用几个设备尝试过，但我看不到这个问题，但昨天我在手机上也遇到了这个问题，之前它工作正常。

我想出的解决方案是，如果当前位置没有出现，则关闭 wi-fi 并使用移动互联网获取当前位置并开始显示。我知道这似乎有点奇怪，但它对我有用。如果我遗漏了什么，请建议我对我的代码进行所需的更改。我无法为我的应用用户建议上述解决方法。

```
locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
boolean enabled = locMgr.isProviderEnabled(LocationManager.GPS_PROVIDER);
cEnabled = getIntent().getExtras().getBoolean("cEnabled");

if (!enabled && !cEnabled) {
    AlertDialog.Builder alt_bld = new AlertDialog.Builder(this);
    alt_bld.setMessage("Would you like to activate GPS?\n(recommended- Yes)")
        .setCancelable(false)
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(intent);
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                 dialog.cancel();
            }
        });

    AlertDialog alert = alt_bld.create();
    // Title for AlertDialog
    alert.setTitle("Activate GPS?");
    // Icon for AlertDialog
    alert.setIcon(R.drawable.location1);
    alert.show();       
}  

ImageButton clocButton = (ImageButton) findViewById(R.id.cLoc);
clocButton.setOnTouchListener(new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
    getToMyLocation();
        return false;
    }
});

private void getToMyLocation() {
    mapView.invalidate();
    Criteria criteria = new Criteria();
    String provider = locMgr.getBestProvider(criteria, false);
    Location lastLoc = locMgr.getLastKnownLocation(provider);
    if(lastLoc != null) {
        GeoPoint lastPoint = new GeoPoint((int)(lastLoc.getLatitude()*1E6), (int)(lastLoc.getLongitude()*1E6));
        center = lastPoint;
        showLocation(lastPoint);
    }
    else
    {
        Toast.makeText(mContext, "Waiting for current location", Toast.LENGTH_SHORT).show();
    }

    myLocOverlay.enableMyLocation();
    myLocOverlay.runOnFirstFix(new Runnable() {
        public void run() {
            GeoPoint loc = myLocOverlay.getMyLocation();
            mapView.getController().setCenter(loc);
            center = loc;
        }
    });
}

private void showLocation(GeoPoint location) {
    if (location != null) {
        myLocOverlay.enableMyLocation();
        mapView.getController().animateTo(location);
    }
} 
```

我在清单文件中添加了以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:11:52.953

我之前使用过 Android Developers' [Making Your App Location-Aware](http://developer.android.com/training/basics/location/index.html)教程，对我来说效果很好。您是否查看过此内容并将其与您自己的代码进行了比较？

您可能会看到缺少的东西，或者实现部分功能的更好方法，这可能会解决这些问题。

# c - 如何从符号表中获取全局变量定义？

> ID：13911069
> 
> 赞同：0
> 
> 时间：2012-12-17T09:02:57.520
> 
> 标签：c, visual-studio, data-structures, global, symbol-table

我正在使用 C/C++ 语言的 Visual Studio 2005 或 2010 进行开发。我想从二进制或执行文件中的符号表中获取全局结构定义信息。下面举个例子。一个名为“TD”的全局结构和结构中的三个成员。代码编译后，信息将在符号表、PDB 符号文件或 DBG 文件中。是否有任何一组函数可以从符号表中提取信息？我可以得到一个成员的大小和这个成员的类型吗？

```
typedef struct {
void * pointer;
int    b;
char c;
}TD; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:16:39.600

您必须使用[ISymbolReader](http://msdn.microsoft.com/en-us/library/system.diagnostics.symbolstore.isymbolreader%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)接口。我在这里有 C# 示例：

```
 // Create the Metadata dispenser.
        IMetaDataDispenserEx pDispenser = new IMetaDataDispenserEx();

        // Open the Metadata importer for the given file.
        Guid importerIID = new Guid(RCWHelper.IID_IMetaDataImport);
        IntPtr pImporter = IntPtr.Zero;
        pDispenser.OpenScope(filepath, COR_OPEN_FLAGS.ofRead, ref importerIID, out pImporter);

        SymBinder binder = new SymBinder();
        ISymbolReader symReader = binder.GetReader(pImporter, filepath); 
```

然后，您可以使用此接口的 GetGlobalVariables 和 GetVariables 方法来获取有关变量的完整信息。

# architecture - 遥测设计模式 - 设备和服务器之间的互操作性（SMS、GPRS 等）

> ID：13911076
> 
> 赞同：3
> 
> 时间：2012-12-17T09:03:09.147
> 
> 标签：architecture, gsm, gprs, telemetry

我现在正在从事与远程汽车管理相关的项目。

我们有一些设备能够启动/停止汽车引擎，提供 GPS 坐标，检查门锁状态等。此设备已安装 SIM 卡。

第二个方面是一个服务器，它应该与设备通信，并允许消费者通过 iPhone、Android 和 WM7 手机管理他们的汽车。

我现在的主要问题是应该为设备和服务器之间的通信定义哪些技术要求。

有人知道有没有关于这种数据传输的标准设计模式的书籍或文章？

下面是一个让我烦恼的问题的例子

我们需要向设备发送一些请求（例如“启动汽车”或“给我里程”）。为了提供它，服务器应该有一个地址，它应该发送这个请求。

如果我理解正确，有以下方法可以做到：

*   组织 VPN（昂贵）
*   使用 SMS 传输（昂贵）
*   使用 TCP 套接字组织设备和服务器之间的持久会话（我不知道它是否适用于俄罗斯 GSM 网络现实）

也许这里有人有类似的专业知识，可以给我应该搬到哪里的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:46:37.583

### 资源

*   根据这些[原则设计服务层](http://msdn.microsoft.com/en-us/library/ee658090.aspx)

*   您可以保持 TCP 连接处于活动状态以降低连接成本。那么长轮询成本是最小的。

*   您可以检查[ZeroMQ](https://stackoverflow.com/a/10621799/201142)，它似乎是适合您项目的发布/订阅服务器

### 费用

*   请求待处理命令的消息和来自服务器的空响应（这将超过 99.9% 的对话）可以减少到每个请求一个字节，每个响应另一个字节。所以每十秒进行一次轮询，我们有：

    (20byte TCP 帧) + 1 byte/message * (1 request + 1 response) * 6messages/1min * 60min/hour * 720hour/month = 每月**10.8Mb**需要使用长轮询

*   现在，您添加从服务器向设备发送用户命令的成本（与长轮询消息相比，它们相对较少）：

    1 kbyte/message * (1 request + 1 response) * 20messages/day * 30day/month = 每月**1.2Mb**需要支持用户命令

*   最后，您必须决定要收集哪些数据 - GPS、门传感器等 - 以及 -1 分钟、10 分钟、每小时等的频率 -**这将总计长轮询成本**= 假设**12MB**

### 总成本：每月大约 24Mb

# jquery - 为 Cloud Foundry 部署添加 .js 脚本文件

> ID：13911078
> 
> 赞同：0
> 
> 时间：2012-12-17T09:03:14.560
> 
> 标签：jquery, node.js, npm, cloud-foundry, jsdom

我有一些 node.js 代码正在使用`jsdom`，我需要`jquery.min.js`后端 css 选择器的文件。事情在本地运行良好，但如果我使用`vmc push`on部署`api.cloudfoundry.com`，它给了我**502 Bad Gateway nginx**

我假设我必须在 package.json 中声明所有依赖项，就像这里[http://blog.nodejitsu.com/package-dependencies-done-right](http://blog.nodejitsu.com/package-dependencies-done-right)

但是，我不知道如何包含`jquery.min.js`. 现在它在`/lib`文件夹而不是`/node_modules`文件夹中（因为它不是节点模块）。

有人可以帮助我了解如何为 Cloud Foundry 包含正确的依赖项和其他额外的 .js 文件吗？

**更新 1：**

这是我删除一堆东西后的代码。如果我注释掉`jsdom.env`，则没有错误。

```
var port = (process.env.VMC_APP_PORT || 3000);
var host = (process.env.VCAP_APP_HOST || 'localhost');
var http = require('http');

var request = require('request'),
    jsdom = require('jsdom');

http.createServer(function (req, res) {
  request({ uri:'http://www.google.com' }, function (error, response, body) {
    if (error && response.statusCode !== 200) {
      console.log('Error when contacting the url')
    }

    jsdom.env({
      html: body,
      scripts: [
        'lib/jquery.min.js'
      ]
    }, function (err, window) {
    });

    res.writeHead(200, {'Content-Type': 'text/plain'});
    res.write(body);
    res.end('\n');

  });

}).listen(port, host); 
```

这是我在使用时看到的`vmc logs hp-myapp`

```
Using manifest file manifest.yml

Getting logs for hp-myapp #0... OK

Reading logs/staging.log... OK
[2012-12-18 03:06:27] Setting up temporary directories
[2012-12-18 03:06:27] Downloading application
[2012-12-18 03:06:27] Unpacking application
[2012-12-18 03:06:27] Staging application
[2012-12-18 03:06:28] # Logfile created on 2012-12-18 03:06:28 +0000 by logger.r
b/25413
[2012-12-18 03:06:28] Skipping npm support: npm-shrinkwrap.json is not provided
[2012-12-18 03:06:28] Creating droplet
[2012-12-18 03:06:29] Uploading droplet
[2012-12-18 03:06:30] Done!

Reading logs/stderr.log... OK

/var/vcap/data/dea/apps/hp-myapp-0-5bda6049e33af03b32b79777356c8d63/app/node_mod
ules/jsdom/lib/jsdom.js:178
    features   = JSON.parse(JSON.stringify(window.document.implementation._fea
                                                          ^
TypeError: Cannot read property 'implementation' of undefined
    at exports.env.exports.jsdom.env.processHTML (/var/vcap/data/dea/apps/hp-myapp-0-5bda6049e33af03b32b79777356c8d63/app/node_modules/jsdom/lib/jsdom.js:178:59
)
    at Object.exports.env.exports.jsdom.env (/var/vcap/data/dea/apps/hp-myapp-0-
5bda6049e33af03b32b79777356c8d63/app/node_modules/jsdom/lib/jsdom.js:269:5)
    at Request._callback (/var/vcap/data/dea/apps/hp-myapp-0-5bda6049e33af03b32b
79777356c8d63/app/app.js:23:9)
    at Request.init.self.callback (/var/vcap/data/dea/apps/hp-myapp-0-5bda6049e3
3af03b32b79777356c8d63/app/node_modules/request/main.js:122:22)
    at Request.EventEmitter.emit (events.js:91:17)
    at Request.<anonymous> (/var/vcap/data/dea/apps/hp-myapp-0-5bda6049e33af03b3
2b79777356c8d63/app/node_modules/request/main.js:661:16)
    at Request.EventEmitter.emit (events.js:115:20)
    at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/v
ar/vcap/data/dea/apps/hp-myapp-0-5bda6049e33af03b32b79777356c8d63/app/node_modul
es/request/main.js:623:14)
    at IncomingMessage.EventEmitter.emit (events.js:115:20)
    at IncomingMessage._emitEnd (http.js:366:10)

Reading logs/stdout.log... OK 
```

它不能被上下文化，因为我`localhost:3000`跑得很好[https://github.com/tmpvar/jsdom/issues/436](https://github.com/tmpvar/jsdom/issues/436)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:20:30.947

window.document 将在 Cloud Foundry 中返回 null，因为它依赖于服务器上存在的实际浏览器 dom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:58:29.200

我决定和[Cheerio一起去](https://github.com/MatthewMueller/cheerio)

那个很好用。

# exception - 连接失败；嵌套异常是：javax.net.ssl.SSLHandshakeException：

> ID：13911079
> 
> 赞同：0
> 
> 时间：2012-12-17T09:03:20.523
> 
> 标签：exception, jakarta-mail, sslhandshakeexception

尝试连接雅虎时出现以下错误

```
pop3s. plus.mail.pop.yahoo.com:995

error while connecting to pop3 mail server javax.mail.MessagingException: Connect failed;
nested exception is:
    javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

我已经尝试将证书添加到`JAVA_Home/jre/lib/security`. 此外，当我尝试使用它直接使用相同的代码`Java/javac Cmd`时。但是从tomcat它不起作用。

另外：我使用的代码自去年两年以来一直在同一台服务器上运行。最近我们已经从专用服务器迁移到基于云的服务器。Backspace 是我们部署代码的供应商。

提前致谢！维韦克阿格拉瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:29:51.110

最可能的原因是系统无法找到有效的证书，因为在您的迁移中，与密钥库相关的某些内容未正确设置。

查看您的配置文件 $CATALINA_BASE/conf/server.xml 并查看是否在连接器标记下设置了正确密钥库的路径。如果您使用的是 JSSL，请在该文件中查找

```
<-- Define a SSL Coyote HTTP/1.1 Connector on port 8443 -->
<Connector 
           port="8443" maxThreads="200"
           scheme="https" secure="true" SSLEnabled="true"
           keystoreFile="${user.home}/.keystore" keystorePass="changeit"
           clientAuth="false" sslProtocol="TLS"/> 
```

您的 keystoreFile 必须设置为正确的路径，以便您的应用程序可以验证并解析请求中的证书路径（实际上，keystorepass 也必须正确）。

如果您有其他配置（APR 或其他），请查看[http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html中的文档](http://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html)

希望这有帮助，干杯！

# iphone - 如何在横向启动应用程序？（沮丧的）

> ID：13911080
> 
> 赞同：2
> 
> 时间：2012-12-17T09:03:31.580
> 
> 标签：iphone, objective-c, cocoa-touch, landscape, uiinterfaceorientation

这个问题应该是一个简单的问题......我已经搜索了很多关于它的内容，并且我已经尝试了我项目中的所有设置。问题是我正在做一个不属于我的项目。该应用程序从应用程序委托启动，然后我添加了一个`UIViewController`（没有 XIB 文件）所有由代码完成的操作。ViewController 实际上是在横向上，但问题是应用程序在纵向上运行（当我拉动通知视图时，它会像在纵向模式下一样向下）。

这是在 AppDelegate.m 文件中实现的：

```
- (NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationLandscapeRight;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
 }

- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{                                                                                                     

 return UIInterfaceOrientationMaskLandscapeRight|UIInterfaceOrientationMaskLandscapeLeft|UIInterfaceOrientationMaskPortrait; 

 //if i am writing only the landscape right orientation the app crashes!

} 
```

***终止应用程序由于未捕获的异常“UIApplicationInvalidInterfaceOrientation”，理由是：“支持方向已与应用程序中没有共同的方向，并shouldAutorotate将返回YES” ***第一掷调用堆栈：（0x3bfef2a3 0x35ede97f 0x3bfef1c5 0x3518988f 0x3532e579 0x3520dd3d 0x3520cfc7 0x3532f257 0xa5bc1 0x35188319 0x351a4f0f 0x351a4e97 0x3512aa33 0x3bfc46cd 0x3bfc29c1 0x3bfc2d17 0x3bf35ebd 0x3bf35d49 0x3a3032eb 0x351752f9 0x9803b 0x97fe0) libc++abi.dylib：终止调用抛出异常

如果我用应用程序启动的纵向模式编写它。我还尝试在其中添加行`info.plist`并将初始界面方向值的键设置为横向（右主页按钮）。还将支持的界面方向也放在 lanscape 中。这并没有改变任何东西，我只想知道如何获得该行为以在横向模式下从上方获取通知

任何人，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:11:07.350

> **在您的应用委托 .m 文件中尝试这种方式...**

```
 #define IOS_OLDER_THAN_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
    #define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 )

        - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
        {

            self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

            [NSThread sleepForTimeInterval:0.1]; // simulate waiting for server response

            // Override point for customization after application launch.

            self.viewController = [[[ViewController alloc] init] autorelease];

            // Initialise the navigation controller with the first view controller as its root view controller

            UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];

            // This is where we hide the navigation bar! :)

            [navigationController setNavigationBarHidden:NO];

            // Navigation controller has copy of view controller, so release our copy

               [self.viewController release];

            // Add the navigation controller as a subview of our window

            if ([[UIDevice currentDevice].systemVersion floatValue] < 6.0)
            {
                // how the view was configured before IOS6
                [self.window addSubview: navigationController.view];
               // [self.window makeKeyAndVisible];
            }
            else
            {
                // this is the code that will start the interface to rotate once again
        //        [self.window setRootViewController: self.navigationController];
                [self.window setRootViewController:navigationController];
            }

        //    [self.window setRootViewController:navigationController];
            [_window makeKeyAndVisible];
            return YES;
        }

    #ifdef IOS_OLDER_THAN_6
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
       // [image_signature setImage:[self resizeImage:image_signature.image]];
        return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft | toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
    #endif

    #ifdef IOS_NEWER_OR_EQUAL_TO_6
    -(BOOL)shouldAutorotate {
        return YES;
    }
    - (NSUInteger)supportedInterfaceOrientations {
       // [image_signature setImage:[self resizeImage:image_signature.image]];
        //return UIInterfaceOrientationMaskLandscapeLeft;
        return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
    }
    #endif

    - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
    } 
```

**`

> 并在您的所有视图控制器 .m 文件中写下此代码

`**

```
#define IOS_OLDER_THAN_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 )

#ifdef IOS_OLDER_THAN_6
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
   // [image_signature setImage:[self resizeImage:image_signature.image]];
    //return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft | toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
    if(toInterfaceOrientation ==UIInterfaceOrientationLandscapeLeft){
        NSLog(@"Changed Orientation To Landscape left");

        return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);

    }else{
        NSLog(@"Changed Orientation To Landscape right");
        return (toInterfaceOrientation == UIInterfaceOrientationLandscapeRight);
    }
}
#endif

#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
  //  [image_signature setImage:[self resizeImage:image_signature.image]];
    //return UIInterfaceOrientationMaskLandscapeLeft;
    return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;
}
#endif 
```

# c++ - C/C++ 中的非保留字符

> ID：13911095
> 
> 赞同：0
> 
> 时间：2012-12-17T09:04:48.400
> 
> 标签：c++, c, parsing

我需要`<`在 C/C++ 代码文件中编码所有出现的字符。为防止冲突，我需要知道 C/C++ 标准中未保留哪些字符。例如，如果`$`没有保留，我可以暂时编码`<`并`$`在以后恢复原始 C/C++ 代码。

我需要使用类似 XML 的中间语言对我的 C/C++ 代码进行这种编码。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:08:08.660

而不是列出未保留的字符（有无限），这里是标准 2.3.1 中的保留字符：

```
空格、水平制表符、垂直制表符、换页、换行
a 到 z
A 到 Z
0 到 9
_ { } [ ] # ( ) % : ; . ? * + - / ^ & | ~ ！= , \" '

```

![](../Images/b6756d303e1f4e52ddd66408ad8c3275.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T09:08:59.527

如果将所有`<`字符转换为`$`，您将如何保留`$`原始文件中的任何实例？

既然你说你的目标是一种类似 XML 的中间语言，为什么不使用 XML 转义和转换`<`为`&lt`呢？（在这种情况下，您还需要进行转换`&`，比如说`&amp`。）有很多开源库可以帮助您做到这一点。如果您找不到任何独立模块，[这里是我编写的代码](https://github.com/openhome/ohNet/blob/master/OpenHome/Converter.cpp)，可以提取其 XML（非）转义功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:54:44.843

这取决于您所说的“保留”是什么意思。一个实现只需要理解输入中非常有限数量的字符，所有其他字符都是通过通用字符名称输入的。允许（我什至会说鼓励）实现更多支持，请参见第 2.2 节，第 1 点。实际上，注释中以及字符串和字符文字（至少*宽*字符形式，在 C++11 中为 Unicode 形式）。您最好的选择可能是引用的可打印内容。

# frameworks - 基础框架 | 粘性分区？

> ID：13911098
> 
> 赞同：2
> 
> 时间：2012-12-17T09:05:07.790
> 
> 标签：frameworks, zurb-foundation, sticky

是否可以使用[Foundation Framework](http://foundation.zurb.com/docs/)制作像这样的可滚动粘性 div [(StyckyScroll)](https://github.com/rickharris/StickyScroll)？

例如：

```
<div class="row">
  <div class="eight columns">
    Very long content here
  </div>
  <div class="four columns">
    Small but SCROLLABLE CONTENT here
  </div>
</div> 
```

**问题是粘性 div 脱离了父容器。**

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T16:35:34.167

Foundation 支持几种类型的粘性导航。如果您正在寻找导航栏类型的实现，请查看其顶部栏模块上的文档（文档和示例位于： http: [//foundation.zurb.com/docs/components/topbar.html](http://foundation.zurb.com/docs/components/topbar.html)）

您可以通过包装普通的顶部栏模块来在基础中实现一个粘性导航栏，如下所示：

```
<div class="contain-to-grid sticky">
    <nav class="top-bar" data-topbar>
        YOUR NAVBAR MARKUP HERE
    </nav>
</div> 
```

如果您正在寻找比顶部栏不那么普遍的粘性导航，您还可以使用他们的 Magellan 插件（文档和示例位于： http: [//foundation.zurb.com/docs/components/magellan.html](http://foundation.zurb.com/docs/components/magellan.html)）

# php - Facebook 照片上传 - 必须使用活动访问令牌来查询有关当前用户的信息

> ID：13911100
> 
> 赞同：0
> 
> 时间：2012-12-17T09:05:10.193
> 
> 标签：php, facebook, api

我的代码有这个问题，我正在尝试将图像上传到用户墙上，但它给了我以下错误：

> 致命错误：未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息。在第 1238 行扔进 /var/www/parkourjams.dk/emilaagaard/customers/fbgen/core/facebook/base_facebook.php

我的代码是：

```
<?php
session_start();
require 'facebook/facebook.php';
$app_id = "438648619527874";
$app_secret = "HIDDEN";
$facebook = new Facebook(array(
  'appId'  => $app_id,
  'secret' => $app_secret,
  'fileUpload' => true,
  'cookie' => true
));

$post_login_url = "http://emilaagaard.dk/customers/fbgen/core/test.php";
$code = $_REQUEST["code"];
if (empty($code)) {
    $dialog_url= "http://www.facebook.com/dialog/oauth?"
       . "client_id=" .  $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       .  "&scope=publish_stream";
      echo("<script>top.location.href='" . $dialog_url 
      . "'</script>");
} else {
    $token_url="https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       . "&client_secret=" . $app_secret
       . "&code=" . $code;

       // curl
       $ch = curl_init();
       curl_setopt($ch, CURLOPT_URL, $token_url);
       curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
       $response = curl_exec($ch); 
       curl_close($ch);

      $params = null;
      parse_str($response, $params);
      $access_token = $params['access_token'];
      echo "Token: " . $access_token . "<br /><br />";

    $graph_url= "https://graph.facebook.com/me/photos?"
        . "access_token=" .$access_token;

    // Post it!
    $user = $facebook->getUser();

    $args = array(
      'message' => 'Photo Caption', 
      'image' => '@'.realpath("ac.png")
    );

    $user = $facebook->getUser();
    $user_profile = $facebook->api('/me');

    if ($user) {
        print_r($user);
        echo "Username: " . $user_profile['username'];
        try {
            // We have a valid FB session, so we can use 'me'
            $data = $facebook->api('/me/photos', 'post', $args);
            echo $data;
        } catch (FacebookApiException $e) {
            print $e;
        }
    } else {
        echo "Dead user";
        $loginUrl = $facebook->getLoginUrl();
        print ', try <a href="' . $loginUrl . '">login</a></script>';
    }

    echo '</body></html>';
}
?> 
```

我真的希望那里有人可以帮助我，我很累，并且可能因为在聚会结束后熬夜而对自己进行了代码盲化。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:44:13.133

如果你在本地服务器上测试它

插入

`curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`

后`curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);`

* * *

插入

`Facebook::$CURL_OPTS[CURLOPT_SSL_VERIFYPEER] = false;`

`$facebook->setAccessToken($access_token);`

前`$user = $facebook->getUser();`

# java - 如何在javascript中使用struts标签

> ID：13911108
> 
> 赞同：1
> 
> 时间：2012-12-17T09:05:48.603
> 
> 标签：java, javascript, struts2, struts

我正在尝试使用 Ajax 请求从 Action 中获取价值，但是在使用 javascript 中的 struts 标记来显示该值时遇到了问题。

**Javascript代码：**

```
 dojo.xhrPost({
            url: "dashboard"
            ,content: myParameterscomp
            , handle: function(response, ioargs) {

               if (ioargs.xhr.status == 200)
               {
                   var data = "<s:property value='#request.consumptionData'/>"
                   console.log(data);
               }

             }

            ,error: function (data) {
                handleError(data.description);
            }           
        }); 
```

**Java代码：**

```
Map request = (Map)context.get("request");
 request.put("consumptionData",  43); 
```

我`<s:property value='#request.consumptionData'/>` 在控制台而不是**43**上获得 data 的值。我正在使用struts2。我的 javascript 代码在 JSP 文件中。谁能告诉我如何显示价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:00:47.010

您似乎正在从您的主页通过 Ajax 调用 /dashboard 页面。并期望它向您发送请求属性消费数据。这不起作用，因为您的 JSP 不包含所需的数据。您需要将数据放入 JSP 中，然后在 Ajax 中获取相同的数据。将您的响应转换为 JSON。执行此操作的最简单方法是在您的 Ajax 响应 JSP 中添加以下类似代码。

仪表板.jsp

```
{"consumptionData": < "<s:property value='#request.consumptionData'/>"} 
```

当您通过 ajax 加载此 JSP 时，在主页中，您可以解析此 JSON 输出并使用 Javascript 中的数据。

```
var json = JSON.parse(response);
var data = eval(json.consumptionData); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:09:41.173

浏览器中的代码接受 JSON。您可以将您的请求序列化为 JSON 并嵌入到您的 JavaScript 文件中。例如：

```
var data = <%= toJson(request.get("consumptionData")) %> 
```

如果数据是简单的`Integer`值，你甚至可以直接将值放入代码中：

```
var data = <%= request.get("consumptionData") %> 
```

语法可能会有所不同（我不熟悉 struts 标签），但想法是一样的。

# javascript - 在 Blueimp/jQuery-File-Upload 中过滤文件

> ID：13911109
> 
> 赞同：1
> 
> 时间：2012-12-17T09:05:54.370
> 
> 标签：javascript, jquery, blueimp

我正在尝试使用 Blueimp / jQuery-File-Upload 我的项目，我想测试文件扩展名，因为我只想下载照片，有人告诉我应该在哪里以及如何配置 blueimp / jQuery-File-Upload 所以我可以这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:13:59.093

如文档中所述，您可以简单地将选项设置为文件类型的正则表达式，如下所示：

```
$('#fileupload').fileupload('option', {
            url: '//localhost/',
            maxFileSize: 5000000,
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            process: [
                {
                    action: 'load',
                    fileTypes: /^image\/(gif|jpeg|png)$/,
                    maxFileSize: 20000000 // 20MB
                },
                {
                    action: 'resize',
                    maxWidth: 1440,
                    maxHeight: 900
                },
                {
                    action: 'save'
                }
            ]
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T13:49:38.637

我找到了这个[添加方法](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin#how-to-tie-a-file-to-an-element-node-during-the-life-cycle-of-an-upload)

所以，这是我的 .gpx 文件代码：

```
$('#fileupload').fileupload({
  // your fileupload options 
  add:function(e,data){
      data.files.map(function(i){
        if(i.type!='application/gpx+xml'){
          alert('please upload only .gpx files');
        }else{
          data.submit();
        }
    }),
    process: function(e,data){/* your process actions here */}
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-03T19:12:10.940

您可以使用`add`过滤文件的方法：

```
var $input = $('#upload_input');
$input.fileupload({
  fileInput: $input,
  url: 'YOU_URL',
  // Other options...

  start: function(e, data) {
    // Before start upload... Please wait...
  },
  add: function(e, data) {
    types = /(\.|\/)(gif|jpe?g|png)$/i;
    file = data.files[0]
    if (types.test(file.type) || types.test(file.name)) {
      data.submit();
    } else {
      // alert('Unfortunately, we don’t support that file type. Try again with a PNG, GIF, JPG');
      return;
    }
  },
  done: function(e, data) {
    // After upload... alert('Done');
  },
  fail: function(e, data) {
    // Error. Please try again later...
  }
}); 
```

# html - Footer 总是在底部，和容器一起拉伸吗？

> ID：13911111
> 
> 赞同：1
> 
> 时间：2012-12-17T09:06:15.230
> 
> 标签：html, css

我试图让我的页脚始终位于我的网站底部，并且当没有足够的数据填充以填充整个浏览网站时，容器会随之拉伸，并且当数据被添加到菜单或信息块时，容器将与他们一起拉伸，将页脚向下移动。

HTML 代码

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>البوابة الإلكترونية للنظام الأكاديمي || جامعة نجران ||</title>
<link href="int_styles_en.css" rel="stylesheet" type="text/css">
<script src="jquery-1.7.1.min.js" type="text/javascript"></script>
<style type="text/css"></style>
</head>

<body>  

<div id="main">

    <div id="header">
        <div id="header-content">
        <div id="logo">
            <img src="images/en/logo.gif">
        </div>
        <div id="header-menu">
            <ul align="center" class="nav_ul">
                <li><a href="index_en.html" class="navegator1"><span style="opacity: 0;"></span></a></li>
                <li><img src="images/colore-chng.png"></li>
                <li><a href="#" class="navegator3"><span style="opacity: 0;"></span></a></li>
                <li><img src="images/font-size-icn.png"></li>
                <li><a href="index.html" class="navegator5"><span style="opacity: 0;"></span></a></li>
            </ul>
            <div id="text-size">
                <ul align="center" class="font-size">
                    <li><a href="#" class="font-size1"><span style="opacity: 0;"></span></a></li>
                    <li class="font-last"><a href="#" class="font-size2"><span style="opacity: 0;"></span></a></li>
                </ul>
            </div>
            <div id="Colore-change">
                <ul align="center" class="colore-butoons">
                    <li><a href="#" class="colore-butoons1"><span style="opacity: 0;"></span></a></li>
                    <li class="color-last"><a href="#" class="colore-butoons2"><span style="opacity: 0;"></span></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="container">
    <div id="right-elements">
        <div id="main-menu">
            <div id="main-menu-title">
                <img src="images/en/main-menu-title.png">
            </div>
            <div id="menu-text">
                <ul>
                    <li>  
                        <a href=""><span id="menuForm:t10"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;التقويم الجامعي</span></a>
                    </li>
                    <li>   
                        <a href=""><span id="menuForm:t12"><img src="images/en/arw.png" border="none" class="menu-text-first">&nbsp;&nbsp;المقررات المطروحة</span></a>
                    </li>
                    <li> 
                        <a href=""><span id="menuForm:t14"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;الخطط الدراسية</span></a>
                    </li>
                    <li>  
                        <a href=""><span id="menuForm:t10"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;التقويم الجامعي</span></a>
                    </li>
                    <li>   
                        <a href=""><span id="menuForm:t12"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;المقررات المطروحة</span></a>
                    </li>
                    <li> 
                        <a href=""><span id="menuForm:t14"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;الخطط الدراسية</span></a>
                    </li>
                    <li> 
                        <a href=""><span id="menuForm:t14"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;الخطط الدراسية</span></a>
                    </li>
                    <li> 
                        <a href=""><span id="menuForm:t14"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;الخطط الدراسية</span></a>
                    </li>
                    <li> 
                        <a href=""><span id="menuForm:t14"><img src="images/en/arw.png" border="none">&nbsp;&nbsp;الخطط الدراسية</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div id="left-elements">
        <div id="content-block">
            <div id="content-title">
                <img src="images/en/news-title.png">
            </div>
        </div>
    </div>
    <div style="clear: both"></div>
</div>
<div id="footer">
    <div id="footer-content">
        <div id="footer-logo">
            <img src="images/en/footer-logo.png">
        </div>
        <div id="footer-text">
            <div id="copyrights">
                <img src="images/en/copyrights.png">
            </div>
            <div id="visits">
                <h6>Portal Visits: 246781</h6>
            </div>
            <div id="design">
                <h1>Designed And Developed By <a href="http://www.ats-ware.com">ATS-Ware.Com</a></h1>
            </div>
        </div>
    </div>
</div> 
```

CSS 代码

```
@charset "utf-8";
/* CSS Document */

* {
    margin:0;
    padding:0;
}

html {
    margin: 0 auto;
    height: 100%;
    width: 100%;
}

body {
    margin: 0 auto;
    height: 100%;
    width: 100%;
    background-image: url(images/egg_shell.png);
}

/* ----------> FONTS Ids Start <---------- */

h1
{
    font-family: Tahoma, Geneva, sans-serif;  
    font-size:10pt; 
    font-weight: normal;
}

h2
{
    font-family:Tahoma, Geneva, sans-serif; 
    font-size:10pt; 
    direction:ltr;
}

h3 { 
    font-family: Tahoma, Geneva, sans-serif; 
    font-weight:lighter; 
    font-size:11pt;
}

h4 {    
    font-family: Tahoma, Geneva, sans-serif;
    font-weight:bolder;  
    font-size:11pt;
}

h5 { 
    font-family: Tahoma, Geneva, sans-serif; 
    font-weight:lighter;
    font-size:10pt;
}

h6 {    
    font-family: Tahoma, Geneva, sans-serif;
    font-weight:bold;  
    font-size:10pt;
}

/* ----------> FONTS Ids End <---------- */

/* ---------> Body Starts Here <--------- */

/* ---------> Body Ends Here <--------- */

/* ---------> Header Starts Here <--------- */

#header {
    width:100%;
    height:127px; 
    margin:0 auto;
    background:#e5e6e7 url('images/header_bg.gif') repeat-x; 
}

#header-content {
    width:1000px;
    height:127px; 
    margin:0 auto;
}

#logo {
    float: left;
    padding-left: 8px;
    padding-top: 11px;
    height: 94px;
    width: 396px;
}

#header-menu {
    float: right;
    width: 379px;
    padding-right: 7px;
    padding-top: 26px;
    height: 72px;
}

.nav_ul {  
    width:500px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.nav_ul li{
    margin-right:21px;
    float: left;
    display:block;
    height:62px;
}

.nav_ul li a {
    background:url('images/en/nav.png') no-repeat scroll top left;
    width:59px;
    display: block;
    height: 62px;
    position: relative;
}

.nav_ul li a.navegator1 {
    width:59px;
}

.nav_ul li a.navegator2 {
    width:59px;
    background-position:-80px 0px;
}

.nav_ul li a.navegator3 {
    width:59px;
    background-position: -155px 0px;
}

.nav_ul li a.navegator4 {
    width:59px;
    background-position:-238px 0px;
}

.nav_ul li a.navegator5 {
    width:59px;
    background-position:-316px 0px;
}

.nav_ul a span {
    background:url('images/en/nav.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.nav_ul li a.navegator1 span {
    background-position:0px -73px;
}

.nav_ul li a.navegator2 span {
    background-position:-80px -73px;
}

.nav_ul li a.navegator3 span {
    background-position:-155px -73px;
}

.nav_ul li a.navegator4 span {
    background-position:-238px -73px;
}

.nav_ul li a.navegator5 span {
    background-position:-316px -73px;
}

#text-size {
    height: 0;
    padding-left: 244px;
    position: absolute;
    top: 73px;
}

.font-size {  
    width:56px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.font-last {
    margin-left:17px;
}

.font-size li{
    float: left;
    display:block;
    height:11px;
}

.font-size li a {
    background:url('images/font-size.png') no-repeat scroll top left;
    width:15px;
    display: block;
    height: 11px;
    position: relative;
}

.font-size li a.font-size1 {
    width:15px;
}

.font-size li a.font-size2 {
    width:19px;
    background-position:-37px 0px;
}

.font-size a span {
    background:url('images/font-size.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.font-size li a.font-size1 span {
    background-position:0px -14px;
}

.font-size li a.font-size2 span {
    background-position:-37px -14px;
}

#Colore-change {
    height: 0;
    padding-left: 82px;
    position: absolute;
    top: 72px;
}

.colore-butoons {  
    width:56px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.color-last {
    margin-left:23px;
}

.colore-butoons li{
    float: left;
    display:block;
    height:11px;
}

.colore-butoons li a {
    background:url('images/colore-buttons.png') no-repeat scroll top left;
    width:16px;
    display: block;
    height: 18px;
    position: relative;
}

.colore-butoons li a.colore-butoons1 {
    width:16px;
}

.colore-butoons li a.colore-butoons2 {
    width:16px;
    background-position:-40px 0px;
}

.colore-butoons a span {
    background:url('images/colore-buttons.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.colore-butoons li a.colore-butoons1 span {
    background-position:0px -18px;
}

.colore-butoons li a.colore-butoons2 span {
    background-position:-40px -18px;
}

/* ----------> Header Ends Here <---------- */

/* ---------> Contaner Starts Here <--------- */

#main {
    height:auto;    
}

#container {
    height: 100%;
    min-height: 450px;
    width: 1032px;
    margin: 0 auto;
    background-color: white;
    background: url('images/bg.png') repeat-y;
}

#right-elements {
    padding-top: 10px;
    padding-left: 25px;
    padding-bottom: 10px;
    width: 209px;
    float: left;
}

#main-menu {
    float: left;
    min-height:240px;
    height:100%;
    width:202px;
    background: #f5f5f5 url('images/block-head.png') repeat-x;
    -moz-border-radius: 0px 15px 0px 15px;
    -webkit-border-radius: 0px 15px 0px 15px;
    border-radius: 0px 15px 0px 15px;
    -moz-box-shadow: 0px 0px 10px #aca9b3;
    -webkit-box-shadow: 0px 0px 10px #aca9b3;
    box-shadow: 0px 0px 10px #aca9b3;
}

#main-menu-title {
    padding-top: 3px;
    padding-left: 5px;
    width: 137px;
    height: 23px;
    float: left;
}

#menu-text {
    float: left;
    direction: ltr;
    padding-top: 9px;
    position: relative;
    width: 100%;
    height: auto;
}

#menu-text ul {
    list-style-type:none; 
    margin:0px; 
    padding:0px;
}

#menu-text ul li { 
    line-height:1.9em;
    border-top:dashed 1px #c6c6c6; 
    padding:0px;
}

#menu-text ul li a {
    color: #0e3670;
    padding-left: 5px;
    display: block;
    font-size:10pt; 
    font-family:tahoma, arial;
    text-decoration: none;
}

#menu-text ul li a:hover {
    color:#ffffff;
    padding-right:5px;
    background:url('images/en/menu-hover.png') no-repeat top left #31b6e5; 
}

#menu-text ul li.menu-text-first {
    border-top:none;
}

#left-elements {
    float: right;
    width: 798px;
}

#content-block {
    float: right;
    height: 100%;
    width: 774px;
    min-height: 240px;
    margin-right: 23px;
    margin-top: 10px;
    background: #f5f5f5 url('images/block-head.png') repeat-x;
    -moz-border-radius: 0px 15px 0px 15px;
    -webkit-border-radius: 0px 15px 0px 15px;
    border-radius: 0px 15px 0px 15px;
    -moz-box-shadow: 0px 0px 10px #aca9b3;
    -webkit-box-shadow: 0px 0px 10px #aca9b3;
    box-shadow: 0px 0px 10px #aca9b3;
}

#content-title {
    direction: ltr;
    padding-top: 2px;
    padding-left: 5px;
    width: 700px;
    height: 33px;
    float: left;
}

#content_text {
    margin-top: 3px;
    margin-left: 9px;
    float: left;
    direction: ltr;
}

/* ---------> Contaner Ends Here <--------- */

/* ---------> Fotter Stars Here <--------- */

#footer {
    width: 100%;
    height: 90px; 
    margin: 0 auto;
    background: #e5e6e7 url('images/footer-img.png') repeat-x; 
} 

#footer-content {
    width: 1000px;
    height: 90px; 
    margin: 0 auto;
}

#footer-logo {
    float: left;
    padding-left: 9px;
    padding-top: 27px;
    height: 51px;
    width: 224px;
}

#footer-text {
    width: 333px;
    float: right;
}

#copyrights {
    float: right;
    padding-right: 7px;
    width: 333px;
    height: 17px;
    padding-top: 21px;
}

#visits {
    float: right;
    color: #FFFFFF;
    padding-top: 4px;
    padding-right: 7px;
}

#design {
    float: right;
    color:#b3b1b1;
    padding-top: 4px;
    padding-right: 7px;
}

#design a {
    color: #FFFFFF;
    text-decoration: none;
}

/* ---------> Fotter Ends Here <--------- */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:04:12.567

The js code sounds like this, I'm not sure is the best solution:

```
<script type="text/css">
    function myFunction(){
    var height = window.innerHeight;
        var height = window.innerHeight;
$("body").css("min-height", window.innerHeight);
}
</script>

    <body onresize="myFunction()">
      <div id="main" >
         test
      </div>
    </body> 
```

This script will resize your main div, every time the window is resized, i think filling the space and letting your footer where it is.

I forgot to add some edits that you need on your css, that are rhe height values of your content, and of your left content, you need to remove those, of your content will eixt the div.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:20:01.357

我想我误解了你的问题，js不是你想要实现的正确答案，你可以尝试使用这个css吗？除了 2 或 3 个部分外，与您的非常相似。使用属性 height 时需要更加小心，因为这会阻止 div 拉伸。

```
<style type="text/css">
@charset "utf-8";
/* CSS Document */

* {
    margin:0;
    padding:0;
}

html {
    margin: 0 auto;
    height: 100%;
    width: 100%;
}

body {
    margin: 0 auto;
    height: 100%;
    width: 100%;
    background-image: url(images/egg_shell.png);
}

/* ----------> FONTS Ids Start <---------- */

h1
{
    font-family: Tahoma, Geneva, sans-serif;  
    font-size:10pt; 
    font-weight: normal;
}

h2
{
    font-family:Tahoma, Geneva, sans-serif; 
    font-size:10pt; 
    direction:ltr;
}

h3 { 
    font-family: Tahoma, Geneva, sans-serif; 
    font-weight:lighter; 
    font-size:11pt;
}

h4 {    
    font-family: Tahoma, Geneva, sans-serif;
    font-weight:bolder;  
    font-size:11pt;
}

h5 { 
    font-family: Tahoma, Geneva, sans-serif; 
    font-weight:lighter;
    font-size:10pt;
}

h6 {    
    font-family: Tahoma, Geneva, sans-serif;
    font-weight:bold;  
    font-size:10pt;
}

/* ----------> FONTS Ids End <---------- */

/* ---------> Body Starts Here <--------- */

/* ---------> Body Ends Here <--------- */

/* ---------> Header Starts Here <--------- */

#header {
    width:100%;
    height:127px; 
    margin:0 auto;
    background:#e5e6e7 url('images/header_bg.gif') repeat-x; 
}

#header-content {
    width:1000px;
    height:127px; 
    margin:0 auto;
}

#logo {
    float: left;
    padding-left: 8px;
    padding-top: 11px;
    height: 94px;
    width: 396px;
}

#header-menu {
    float: right;
    width: 379px;
    padding-right: 7px;
    padding-top: 26px;
    height: 72px;
}

.nav_ul {  
    width:500px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.nav_ul li{
    margin-right:21px;
    float: left;
    display:block;
    height:62px;
}

.nav_ul li a {
    background:url('images/en/nav.png') no-repeat scroll top left;
    width:59px;
    display: block;
    height: 62px;
    position: relative;
}

.nav_ul li a.navegator1 {
    width:59px;
}

.nav_ul li a.navegator2 {
    width:59px;
    background-position:-80px 0px;
}

.nav_ul li a.navegator3 {
    width:59px;
    background-position: -155px 0px;
}

.nav_ul li a.navegator4 {
    width:59px;
    background-position:-238px 0px;
}

.nav_ul li a.navegator5 {
    width:59px;
    background-position:-316px 0px;
}

.nav_ul a span {
    background:url('images/en/nav.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.nav_ul li a.navegator1 span {
    background-position:0px -73px;
}

.nav_ul li a.navegator2 span {
    background-position:-80px -73px;
}

.nav_ul li a.navegator3 span {
    background-position:-155px -73px;
}

.nav_ul li a.navegator4 span {
    background-position:-238px -73px;
}

.nav_ul li a.navegator5 span {
    background-position:-316px -73px;
}

#text-size {
    height: 0;
    padding-left: 244px;
    position: absolute;
    top: 73px;
}

.font-size {  
    width:56px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.font-last {
    margin-left:17px;
}

.font-size li{
    float: left;
    display:block;
    height:11px;
}

.font-size li a {
    background:url('images/font-size.png') no-repeat scroll top left;
    width:15px;
    display: block;
    height: 11px;
    position: relative;
}

.font-size li a.font-size1 {
    width:15px;
}

.font-size li a.font-size2 {
    width:19px;
    background-position:-37px 0px;
}

.font-size a span {
    background:url('images/font-size.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.font-size li a.font-size1 span {
    background-position:0px -14px;
}

.font-size li a.font-size2 span {
    background-position:-37px -14px;
}

#Colore-change {
    height: 0;
    padding-left: 82px;
    position: absolute;
    top: 72px;
}

.colore-butoons {  
    width:56px;  
    margin:0 auto;  
    list-style-type:none;  
}  

.color-last {
    margin-left:23px;
}

.colore-butoons li{
    float: left;
    display:block;
    height:11px;
}

.colore-butoons li a {
    background:url('images/colore-buttons.png') no-repeat scroll top left;
    width:16px;
    display: block;
    height: 18px;
    position: relative;
}

.colore-butoons li a.colore-butoons1 {
    width:16px;
}

.colore-butoons li a.colore-butoons2 {
    width:16px;
    background-position:-40px 0px;
}

.colore-butoons a span {
    background:url('images/colore-buttons.png') no-repeat scroll bottom left;
    display:block;
    top:0;
    float:left;
    height:100%;
    width:100%;
}

.colore-butoons li a.colore-butoons1 span {
    background-position:0px -18px;
}

.colore-butoons li a.colore-butoons2 span {
    background-position:-40px -18px;
}

/* ----------> Header Ends Here <---------- */

/* ---------> Contaner Starts Here <--------- */

#main {
    height:auto;    
}

#container {
    min-height: 20%;
    //height:60%;
    width: 1032px;
    margin: 0 auto 400px auto;
    background-color: white;
    background: url('images/bg.png') repeat-y;
}

#right-elements {
    padding-top: 10px;
    padding-left: 25px;
    padding-bottom: 10px;
    width: 209px;
    float: left;
}

#main-menu {
    float: left;
    min-height:240px;
    height:100%;
    width:202px;
    background: #f5f5f5 url('images/block-head.png') repeat-x;
    -moz-border-radius: 0px 15px 0px 15px;
    -webkit-border-radius: 0px 15px 0px 15px;
    border-radius: 0px 15px 0px 15px;
    -moz-box-shadow: 0px 0px 10px #aca9b3;
    -webkit-box-shadow: 0px 0px 10px #aca9b3;
    box-shadow: 0px 0px 10px #aca9b3;
}

#main-menu-title {
    padding-top: 3px;
    padding-left: 5px;
    width: 137px;
    height: 23px;
    float: left;
}

#menu-text {
    float: left;
    direction: ltr;
    padding-top: 9px;
    position: relative;
    width: 100%;
    height: auto;
}

#menu-text ul {
    list-style-type:none; 
    margin:0px; 
    padding:0px;
}

#menu-text ul li { 
    line-height:1.9em;
    border-top:dashed 1px #c6c6c6; 
    padding:0px;
}

#menu-text ul li a {
    color: #0e3670;
    padding-left: 5px;
    display: block;
    font-size:10pt; 
    font-family:tahoma, arial;
    text-decoration: none;
}

#menu-text ul li a:hover {
    color:#ffffff;
    padding-right:5px;
    background:url('images/en/menu-hover.png') no-repeat top left #31b6e5; 
}

#menu-text ul li.menu-text-first {
    border-top:none;
}

#left-elements {
    float: right;
    --width: 798px;
}

#content-block {
    float: right;
    min-height:60%;
    --height: 100%;
    width: 774px;
    min-height: 240px;
    margin-right: 23px;
    margin-top: 10px;
    background: #f5f5f5 url('images/block-head.png') repeat-x;
    -moz-border-radius: 0px 15px 0px 15px;
    -webkit-border-radius: 0px 15px 0px 15px;
    border-radius: 0px 15px 0px 15px;
    -moz-box-shadow: 0px 0px 10px #aca9b3;
    -webkit-box-shadow: 0px 0px 10px #aca9b3;
    box-shadow: 0px 0px 10px #aca9b3;
}

#content-title {
    direction: ltr;
    padding-top: 2px;
    padding-left: 5px;
    width: 700px;
    --height: 33px;
    float: left;
}

#content_text {
    margin-top: 3px;
    margin-left: 9px;
    float: left;
    direction: ltr;
}

/* ---------> Contaner Ends Here <--------- */

/* ---------> Fotter Stars Here <--------- */

#footer {
    width: 100%;
    height: 90px; 
    margin: 0 auto;
    background: #e5e6e7 url('images/footer-img.png') repeat-x; 
    position:fixed;bottom:0;right:0;
} 

#footer-content {
    width: 1000px;
    height: 90px; 
    margin: 0 auto;
}

#footer-logo {
    float: left;
    padding-left: 9px;
    padding-top: 27px;
    height: 51px;
    width: 224px;
}

#footer-text {
    width: 333px;
    float: right;
}

#copyrights {
    float: right;
    padding-right: 7px;
    width: 333px;
    height: 17px;
    padding-top: 21px;
}

#visits {
    float: right;
    color: #FFFFFF;
    padding-top: 4px;
    padding-right: 7px;
}

#design {
    float: right;
    color:#b3b1b1;
    padding-top: 4px;
    padding-right: 7px;
}

#design a {
    color: #FFFFFF;
    text-decoration: none;
}

/* ---------> Fotter Ends Here <--------- */

</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:14:51.253

尝试这个

HTML

```
<div class="header">
</div>
<div id="Content">
<div class="con"></div>
</div>
<div class="header">
</div> 
```

风格

```
<style type="text/css">
    html, body
    {
        height: 99%;
        background-color:Black;
    }
    .header
    {
        width: 960px;
        height: 15%;
        background-color:Gray;
    }
    #Content
    {
        min-height: 85%;
        width: 960px;
        background-color:Navy;
    }
    .con
    {
        min-height:900px;
        width:960px;
        background-color:Aqua;
    }
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:47:51.663

```
#footer{
position: fixed;
clear:both;
} 
```

这是为了将页脚放在底部的固定位置，当您滚动网页时不会移动。我还注意到您在页脚 div 中使用了其他 div。建议尽可能不要嵌套太多 div。我认为页脚的 1 个 div 就足够了，并且要为页脚中的其他元素设置样式，您应该使用类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T09:23:10.853

尝试添加这个来锁定页面底部的页脚：

```
 #footer{
 position: absolute;bottom: 0px;
 } 
```

# android-ndk - Android DNK 开发了so文件。如何在Linux中直接调用它？

> ID：13911114
> 
> 赞同：0
> 
> 时间：2012-12-17T09:06:34.450
> 
> 标签：android-ndk

现在我有一个由 DNK 开发的 so 文件。我想在Linux中调用so文件使用C。但它总是提示：

```
[root@PCGiter Code]# gcc SoTest2.c -o SoTest2.exe -ldl
[root@PCGiter Code]# ./SoTest2.exe
Open Error:libcom_wuba_aes_ExecV3_1_0.so: cannot open shared object file: No such file or directory. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:41:08.383

这个答案是用于为 Android 创建可执行文件并像在 Linux 中一样在 shell 中执行它们，而不是如何在 Linux 中执行 Android 可执行文件。

使用 Android-ndk 构建源文件，然后您可以直接复制到模拟器并在 adb shell 中执行。

用于为 android 创建可执行文件的 make 文件示例

```
# For building the Test executable
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

# Linker flags
LOCAL_LDLIBS += -llog
LOCAL_LDLIBS += -lOpenSLES
LOCAL_LDLIBS += -landroid

# Include paths
LOCAL_C_INCLUDES := \
$(LOCAL_PATH) 

# Local C Flags if any
LOCAL_CFLAGS := 

# Source Files to compile
LOCAL_SRC_FILES := \

# Shared libraries to be used while linking
LOCAL_SHARED_LIBRARIES := 

# Local module name
LOCAL_MODULE := 

include $(BUILD_EXECUTABLE) 
```

您可以通过启动模拟器然后在命令提示符 "adb shell" 中执行命令来进入模拟器外壳。

通常我观察到的是，当仅复制到 /data/ 文件夹时，我能够执行。/mnt/sdcard 等其他文件夹我无法执行可执行文件。

# sql - SQL：选择不同的 - 没有大写/小写重复

> ID：13911121
> 
> 赞同：1
> 
> 时间：2012-12-17T09:07:07.233
> 
> 标签：sql, sql-server, distinct, case-sensitive

我的查询：

```
SELECT distinct [ID], [IDGROUP], [DESCRIPTION]
FROM table 
```

我的结果问题：

1, 1, 你好
1, 1, 你好

如何设置一个过滤器，其中我不选择重复项，差异仅是高/小写字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:46:09.520

尝试运行此查询。

`SELECT distinct [ID], [IDGROUP], [DESCRIPTION] COLLATE SQL_Latin1_General_CP1_CI_AS FROM table`

在这里，您基本上是在说明列上忽略大小写

CI = 不区分大小写 AS = 区分重音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:16:41.270

我猜mysql引擎默认不会根据字母大小写重复。也就是说，Hello 和 hello 都被认为是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:45:15.510

不确定这是否是最好的方法，但这对我有用：

```
SELECT distinct [ID], [IDGROUP], Upper([DESCRIPTION]) as [DESCRIPTION]
FROM table 
```

# javascript - 选择子菜单时水平菜单保持打开功能

> ID：13911124
> 
> 赞同：1
> 
> 时间：2012-12-17T09:07:22.763
> 
> 标签：javascript, html, css

当主父菜单项悬停时，它将在遍历该项的子菜单时保持活动状态，即使在子元素上方也是如此。但这不会发生，为什么？

[**jsFiddle 演示**](http://jsfiddle.net/kh2vm/)

**JS**

```
var mastertabvar = new Object()
mastertabvar.baseopacity = 0
mastertabvar.browserdetect = ""

function showsubmenu(masterid, id) {
    submenuobject = document.getElementById(id)
    mastertabvar.browserdetect = submenuobject.filters ? "ie" : typeof submenuobject.style.MozOpacity == "string" ? "mozilla" : ""
    hidesubmenus(mastertabvar[masterid])
    submenuobject.style.display = "block"
    instantset(mastertabvar.baseopacity)
    highlighting = setInterval("gradualfade(submenuobject)", 0)
}

function hidesubmenus(submenuarray) {
    for (var i = 0; i < submenuarray.length; i++)
    document.getElementById(submenuarray[i]).style.display = "none"
}

function instantset(degree) {
    if (mastertabvar.browserdetect == "mozilla") submenuobject.style.MozOpacity = degree / 100
    else if (mastertabvar.browserdetect == "ie") submenuobject.filters.alpha.opacity = degree
}

function gradualfade(cur2) {
    if (mastertabvar.browserdetect == "mozilla" && cur2.style.MozOpacity < 1) cur2.style.MozOpacity = Math.min(parseFloat(cur2.style.MozOpacity) + 0.1, 0.99)
    else if (mastertabvar.browserdetect == "ie" && cur2.filters.alpha.opacity < 100) cur2.filters.alpha.opacity += 10
    else if (typeof highlighting != "undefined") //fading animation over
    clearInterval(highlighting)
}

function initalizetab(tabid) {
    mastertabvar[tabid] = new Array()
    var menuitems = document.getElementById(tabid).getElementsByTagName("li")
    for (var i = 0; i < menuitems.length; i++) {
        if (menuitems[i].getAttribute("rel")) {
            menuitems[i].setAttribute("rev", tabid) //associate this submenu with main tab
            mastertabvar[tabid][mastertabvar[tabid].length] = menuitems[i].getAttribute("rel") //store ids of submenus of tab menu
            if (menuitems[i].className == "selected") showsubmenu(tabid, menuitems[i].getAttribute("rel")) menuitems[i].getElementsByTagName("a")[0].onmouseover = function() {
                showsubmenu(this.parentNode.getAttribute("rev"), this.parentNode.getAttribute("rel"))
            }
        }
    }
} 
```

**CSS**

```
.basictab{
    margin-left: 0px;
    list-style-type: none;
    margin-bottom: 0;
    text-align: center;
    border-bottom-width: 0px;
    border-bottom-style: solid;
    border-bottom-color: gray;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 16px;
    font-weight: bold;
    padding-right: 0px;
    padding-left: 0px;
    background-repeat: repeat-x;
    padding-top: 0px;
    padding-bottom: 7px;
    border-radius: 10px 10px 0px 0px;
}

.basictab li{
    display: inline;
    margin: 0px;
    background-image: url(../images/mainbar.png);
    background-repeat: repeat-x;
    background-color: rgba(0,51,0,1);
    background-position: left;
    border-radius: 50px 50px 0px 0px;
}

.basictab li a{
    margin-left: 0;
    background-color: rgba(0,0,0,1);
    color: rgba(255,255,255,1);
    padding-top: 10px;
    padding-right: 30px;
    padding-bottom: 10px;
    padding-left: 30px;
    border-top-style: solid;
    border-right-style: solid;
    border-bottom-style: solid;
    border-left-style: solid;
    border-top-color: gray;
    border-right-color: gray;
    border-bottom-color: gray;
    border-left-color: gray;
    text-decoration: none;
    background-image: url(../images/mainbar.png);
    border-radius: 15px 15px 0px 0px;
}

.basictab li a:visited{
    color: rgba(255,255,255,1);
}

.basictab li a:hover{
    background-color: #FFFFFF;
    color: rgba(255,255,255,1);
    background-image: url(../images/behindbar.png);
    background-repeat: repeat;
    padding-top: 10px;
    padding-right: 30px;
    padding-bottom: 10px;
    padding-left: 30px;
}

.basictab li a:active{
    color: rgba(255,255,255,1);
    background-image: url(../images/behindbar.png);
    background-repeat: repeat;
}

.basictab li.selected a{ /*selected tab effect*/
    position: relative;
    padding-top: 10px;
    background-color: #dbffff;
    color: rgba(255,255,255,1);
    padding-right: 30px;
    padding-bottom: 10px;
    padding-left: 30px;
    background-image: url(../images/behindbar.png);
    background-repeat: repeat;
}

.submenustyle{
    border-top-width: 0;
    width: auto;
    display: none;
    filter: alpha(opacity=0);
    -moz-opacity: 0;
    background-image: url(../images/behindbar.png);
    background-repeat: repeat;
    color: rgba(255,255,255,1);
    font-size: 12px;
    background-position: left;
    letter-spacing: .2em;
    word-spacing: 4em;
    padding-top: 2px;
    padding-right: 5px;
    padding-bottom: 2px;
    padding-left: 5px;
    margin-left: 15px;
    margin-right: 15px;
}

* html .submenustyle{ /*IE only width definition*/
width: 100%;
}

.submenustyle a{

    padding: 1px 5px;
    text-decoration: none;
    color: rgba(255,255,255,1);
}

.submenustyle a:hover{
    font-size: 12px;
    color: rgba(255,153,0,1);
}#navMenu {
} 
```

**HTML**

```
<div class="grid_12">
    <ul id="maintab" class="basictab">
        <li class="active" rel="cyst"><a href="cyphm.htm">1</a></li>
        <li rel="cylim"><a href="cylim.htm">2</a></li>
        <li rel="cynic"><a href="cynic.htm">3</a></li>
        <li><a href="cypfo.htm">4</a></li>
        <li><a href="cyplca.htm">5</a></li>
        <li><a href="cyfam.htm">6</a></li>

    </ul>

    <div id="cyst" class="submenustyle">
        <a href="cyfd.htm">1</a>
        <a href="cycl.htm">2</a>
        <a href="cybr.htm">3</a>
        <a href="cylm.htm">4</a>
        <a href="cyth.htm">5</a>
        <a href="cycin.htm">6</a>
    </div>

    <div id="cynic" class="submenustyle">
        <a href="nicfd.htm">1</a>
        <a href="niccl.htm">2</a>
        <a href="nicbr.htm">3</a>
        <a href="niclm.htm">4</a>
        <a href="nicth.htm">5</a>
        <a href="niccin.htm">6</a>
    </div>

    <div id="cylim" class="submenustyle">
        <a href="limfd.htm">1</a>
        <a href="limcl.htm">2</a>
        <a href="limbr.htm">3</a>
        <a href="limlm.htm">4</a>
        <a href="limth.htm">5</a>
        <a href="limcin.htm">6</a>
    </div>

  <script type="text/javascript">
//initialize tab menu, by passing in ID of UL
initalizetab("maintab")
</script>
  </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:13:49.240

这是“经典”方式，但效果很好。

**HTML：**

```
<ul id="navigation">
    <li>
        parent
        <ul>
            <li>child</li>
            <li>child</li>
            <li>child</li>
        </ul>
    </li>
    <li>
        parent
        <ul>
            <li>child</li>
            <li>child</li>
            <li>child</li>
        </ul>
    </li>
<ul> 
```

**CSS：**

```
 ul#navigation > li > ul { display: none; }
  ul#navigation > li:hover > ul { display: block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:27:16.293

我不确定您的确切含义，但是如果您希望父项的背景在悬停子菜单项时保持突出显示，那么您可以这样做：

```
ul li {
    background: #CCC;
}

ul li:hover {
    background: #0CF;
}​ 
```

父母和孩子 li 都会使用它。 [http://jsfiddle.net/zEkXu/](http://jsfiddle.net/zEkXu/)

* * *

但是你也可以用 jQuery 来做到这一点：

```
$(".submenustyle").hover(function() {
    $(".basictab").css({"background-color":"#0CF"});
}, function() {
    $(".basictab").css({"background-color":"#CCC"});
}); 
```

这意味着：悬停子菜单时做一些事情（在这种情况下更改背景颜色）。

# c++ - 如何让png具有透明属性

> ID：13911126
> 
> 赞同：1
> 
> 时间：2012-12-17T09:07:42.250
> 
> 标签：c++, png, transparent, libpng

我已经使用 libpng 生成 png 文件。对于RGB png，没有问题。但我想给 png 一个透明的属性。

我引用了一些代码，并将使用 * 的地方添加到标记

**行++ = 230;* *PNG_COLOR_TYPE_RGBA,*

使其具有透明属性，代码运行成功，但我没有看到透明效果。

任何熟悉 libpng 或 png 操作的人都可以帮助我吗？

在这段代码中，pixel_t,& bitmap_t 是一些带有 rgb 数据的数据。

```
/* A colored pixel. */
typedef struct {
    uint8_t red;
    uint8_t green;
    uint8_t blue;
} pixel_t;

/* A picture. */
typedef struct  {
    pixel_t *pixels;
    size_t width;
    size_t height;
} bitmap_t;

static int save_png_to_file (bitmap_t *bitmap, const char *path)
{
    FILE * fp;
    png_structp png_ptr = NULL;
    png_infop info_ptr = NULL;
    size_t x, y;
    png_byte ** row_pointers = NULL;
    /* "status" contains the return value of this function. At first
       it is set to a value which means 'failure'. When the routine
       has finished its work, it is set to a value which means
       'success'. */
    int status = -1;
    /* The following number is set by trial and error only. I cannot
       see where it it is documented in the libpng manual.
    */
    int pixel_size = 3;
    int depth = 8;

    fp = fopen (path, "wb");
    if (! fp) {
        goto fopen_failed;
    }

    png_ptr = png_create_write_struct (PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
    if (png_ptr == NULL) {
        goto png_create_write_struct_failed;
    }

    info_ptr = png_create_info_struct (png_ptr);
    if (info_ptr == NULL) {
        goto png_create_info_struct_failed;
    }

   // png_set_invert_alpha(png_ptr);

    /* Set up error handling. */

    if (setjmp (png_jmpbuf (png_ptr))) {
        goto png_failure;
    }

    /* Set image attributes. */

    png_set_IHDR (png_ptr,
                  info_ptr,
                  bitmap->width,
                  bitmap->height,
                  depth,
                  *PNG_COLOR_TYPE_RGBA,*
                  PNG_INTERLACE_NONE,
                  PNG_COMPRESSION_TYPE_DEFAULT,
                  PNG_FILTER_TYPE_DEFAULT);

    /* Initialize rows of PNG. */
    //(png_byte **) added by li
    row_pointers = (png_byte **)png_malloc (png_ptr, bitmap->height * sizeof (png_byte *));

    for (y = 0; y < bitmap->height; ++y) {
        //png_byte * added by li
//         png_byte *row = (png_byte *)
//             png_malloc (png_ptr, sizeof (uint8_t) * bitmap->width * pixel_size);
        png_byte *row = (png_byte *)
            png_malloc (png_ptr, sizeof (uint8_t) * bitmap->width * 4);

        row_pointers[y] = row;
        for (x = 0; x < bitmap->width; ++x) {
            pixel_t * pixel = pixel_at (bitmap, x, y);
            *row++ = pixel->red;
            *row++ = pixel->green;
            *row++ = pixel->blue;
            **row++ = 230;*

        }
    }

    /* Write the image data to "fp". */

    png_init_io (png_ptr, fp);
    png_set_rows (png_ptr, info_ptr, row_pointers);
    png_write_png (png_ptr, info_ptr, PNG_TRANSFORM_IDENTITY, NULL);

    /* The routine has successfully written the file, so we set
       "status" to a value which indicates success. */

    status = 0;

    for (y = 0; y < bitmap->height; y++) {
        png_free (png_ptr, row_pointers[y]);
    }
    png_free (png_ptr, row_pointers);

 png_failure:
 png_create_info_struct_failed:
    png_destroy_write_struct (&png_ptr, &info_ptr);
 png_create_write_struct_failed:
    fclose (fp);
 fopen_failed:
    return status;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:28:27.350

具有 alpha 且 bitdepth=8 的真彩色 PNG 图像以 RGBA 顺序将透明度存储为额外通道，范围为 0-255（0=完全透明；255=完全不透明）。

你在做什么在我看来是正确的。只有值 230 表示“几乎不透明”，可能难以从视觉上检测到透明度。尝试使用其他值。

顺便说一句，请记住还有其他方法可以为 PNG 图像添加透明度，请[在此处](https://stackoverflow.com/questions/13569887/libpng-palette-png-with-alpha-or-not/13570973#13570973)查看我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-25T13:51:41.030

由于这个问题似乎是“libpng 添加透明度”的最佳答案，所以我在这个答案中添加了一个可编译的源代码

```
// gcc -g -Wall -o png2 png2.c -lpng

#include <stdio.h>
#include <stdlib.h>
#include <png.h>

#define uint8_t unsigned char

typedef struct {
    uint8_t red;
    uint8_t green;
    uint8_t blue;
} pixel_t;

typedef struct  {
    pixel_t *pixels;
    size_t width;
    size_t height;
} bitmap_t;

pixel_t *pixel_at(bitmap_t *bitmap, int x, int y)
{return &bitmap->pixels[(bitmap->width * y) + x];}

static int save_png_to_file (bitmap_t *bitmap, const char *path)
{
FILE * fp;
png_structp png_ptr = NULL;
png_infop info_ptr = NULL;
size_t x, y;
png_byte ** row_pointers = NULL;
pixel_t *pixel;

int status = -1;
int depth = 8;

if((fp = fopen(path, "wb")) == NULL)
  goto fopen_failed;

if((png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL)) == NULL)
  goto png_create_write_struct_failed;

if((info_ptr = png_create_info_struct (png_ptr)) == NULL)
        goto png_create_info_struct_failed;

if(setjmp (png_jmpbuf (png_ptr)))
  goto png_failure;

png_set_IHDR (png_ptr,
              info_ptr,
              bitmap->width,
              bitmap->height,
              depth,
              PNG_COLOR_TYPE_RGBA,
              PNG_INTERLACE_NONE,
              PNG_COMPRESSION_TYPE_DEFAULT,
              PNG_FILTER_TYPE_DEFAULT);

row_pointers = (png_byte **)png_malloc (png_ptr, bitmap->height * sizeof (png_byte *));

for(y = 0; y < bitmap->height; y++)
  {
  png_byte *row = (png_byte *)
  png_malloc (png_ptr, sizeof (uint8_t) * bitmap->width * 4);

  row_pointers[y] = row;
  for (x = 0; x < bitmap->width; ++x)
    {
    pixel = pixel_at (bitmap, x, y);
    *row++ = pixel->red;
    *row++ = pixel->green;
    *row++ = pixel->blue;
    *row++ = x;                   // 0 - completely transparent  255 - completely opaque
    }
  }

png_init_io (png_ptr, fp);
png_set_rows (png_ptr, info_ptr, row_pointers);
png_write_png (png_ptr, info_ptr, PNG_TRANSFORM_IDENTITY, NULL);

status = 0;
for(y = 0; y < bitmap->height; y++)
  png_free (png_ptr, row_pointers[y]);
png_free (png_ptr, row_pointers);

png_failure:
png_create_info_struct_failed:
  png_destroy_write_struct (&png_ptr, &info_ptr);
png_create_write_struct_failed:
  fclose (fp);
fopen_failed:
  return status;
}

int main(void)
{
bitmap_t pic;
unsigned char pixels[255*255*3];
int t;

pic.width = 255;
pic.height = 255;

for(t=0; t<255 * 255 * 3; t=t+3)    // Just a red square
  {
  pixels[t+0] = 255;
  pixels[t+1] = 0;
  pixels[t+2] = 0;
  }

pic.pixels = (pixel_t *) &pixels;

save_png_to_file(&pic, "test.png");

return 0;
} 
```

# android - 如何在不超过固定大小的情况下将布局包装到其视图中？

> ID：13911128
> 
> 赞同：1
> 
> 时间：2012-12-17T09:07:53.787
> 
> 标签：android, xml, android-linearlayout

我使用此布局是为了获得三个固定视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="2"
        android:textColor="#372c24" 
        android:paddingLeft="10dp"/>

    <View
        android:id="@+id/space"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:background="@android:color/transparent" />

    <LinearLayout
        android:id="@+id/ratingLayout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="4"
        android:orientation="horizontal" 
        android:background="@drawable/shape_popup">
        <TextView
            android:id="@+id/rateNumber"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:gravity="center_horizontal"
            android:paddingTop="2dp" 
          />
        <ImageView
            android:contentDescription="@string/app_name"
            android:id="@+id/rateStar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:layout_gravity="center_horizontal"
            android:src="@drawable/rate_star"/>
    </LinearLayout>

</LinearLayout> 
```

我希望我`ratingLayout`包装它的内容但不超过它的固定大小。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:16:32.567

例如

```
 convertView = inflator.inflate(R.layout.item_grid, null);

                LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                        imageSize, imageSize);
                convertView.setLayoutParams(new GridView.LayoutParams(params)); 
```

或（例如）

```
android:layout_height="20dp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:21:31.537

移除 ratingLayout 的权重，并将 rateNumber 和 rateStar 视图的 layout_width 属性设置为“wrap_content”而不是“match_parent”。

# iphone - OpenGL ES 2\. 具有 3 个相邻点参数的着色器生成 2 个点？

> ID：13911132
> 
> 赞同：0
> 
> 时间：2012-12-17T09:08:05.930
> 
> 标签：iphone, ios, opengl-es-2.0, shader, vertex-shader

我有一组折线点（x，y）。每次我应该处理 3 个相邻点并生成 2 个输出点。

例如，像这样：

```
void someFunc(float x0, float y0, float x1, float y1, float x2, float y2, float *pXout1, float *pYout1, float *pXout2, float *pYout2)
{
  *xout1 = x1 - 1;
  *xout2 = x1 + 1;
  *yout1 = MIN(y0, y2);
  *yout2 = MAX(y0, y2);
} 
```

所以我有两个问题应该在我的顶点着色器中实现：

1)如何一次输入多个相邻点？2）如何一次输出多个点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:07:07.067

> 1)如何一次输入多个相邻点？

顶点着色器无法输入相邻顶点数据。如果你真的需要这个，那么你可以通过提供相邻顶点数据来通过冗余顶点属性来实现它（就像你提供颜色、法线等一样）。

> 2）如何一次输出多个点？

您是说将多个顶点数据传递给片段着色器吗？如果是这样，那么与问题 #1 相同的规则适用，只有您应该使用冗余变量。

# sharepoint - 无法使用 SPTool.Library 收回共享点解决方案

> ID：13911139
> 
> 赞同：0
> 
> 时间：2012-12-17T09:08:59.110
> 
> 标签：sharepoint, sharepoint-2010

我正在使用 SPTool.Library 并试图收回全局部署的 wsp，但它给了我以下错误：Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)

代码：SPTReturn returnObj = farm.RetractSolution(wspName);

当我尝试收回部署到 Web 应用程序的 wsp 时，它会毫无问题地收回它。这可能是与全球部署的解决方案相关的问题，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T12:52:23.710

查看错误消息，该`RetractSolution`方法似乎需要*解决方案 ID*而不是解决方案名称。它是按照消息建议的格式格式化的[GUID 。](http://msdn.microsoft.com/en-us/library/system.guid.aspx)例如，您可以通过 PowerShell cmdlet 将解决方案部署到您的场，包括其 ID [`Get-SPSolutions`](http://technet.microsoft.com/en-us/library/ff607754.aspx)。

# r - 按日期间隔索引数据帧

> ID：13911141
> 
> 赞同：4
> 
> 时间：2012-12-17T09:09:16.350
> 
> 标签：r, date, indexing

我有一个数据框，其中一列包含数百个日期格式的日期，例如：

```
as.Date(c("2011-08-13","2011-09-13","2010-06-12","2012-09-13","2010-09-13","2012-05-26","2012-07-20")) 
```

现在我只想选择 15.03 < date < 15.8 的行（所有日期在 3 月 15 日到 10 月 15 日之间，不考虑年份）。有没有一种简单的方法来选择（索引）？

* * *

我稍微修改了我接受的答案，如下：

```
a <- as.Date(c("2011-08-13","2011-09-13","2010-06-12","2012-09-13","2010-09-13","2012-05-26","2012-07-20"))
lower <- as.Date("03-15",format="%m-%d")
upper <- as.Date("08-15",format="%m-%d")
a[format(a,"%m-%d") < format(upper,"%m-%d") & format(a,"%m-%d") > format(lower,"%m-%d")]
[1] "2011-08-13" "2010-06-12" "2012-05-26" "2012-07-20" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:23:14.240

在`base`中，想法是使用函数`format`：

```
a <- as.Date(c("2011-08-13","2011-09-13","2010-06-12","2012-09-13","2010-09-13","2012-05-26","2012-07-20"))
lower <- as.Date("2012-03-15")
upper <- as.Date("2012-08-15")
a[format(a,"%m-%d") < format(upper,"%m-%d") & format(a,"%m-%d") > format(lower,"%m-%d")]
[1] "2011-08-13" "2010-06-12" "2012-05-26" "2012-07-20" 
```

# java - ASM 中的 Java 方法参数值

> ID：13911142
> 
> 赞同：10
> 
> 时间：2012-12-17T09:09:18.690
> 
> 标签：java, jvm, bytecode, java-bytecode-asm, bytecode-manipulation

我正在尝试获取 Java 程序方法参数的值。我正在使用 ASM 来检测字节码并获取这些值。但是，我遇到了一些麻烦。

这是用于检测代码的 visitCode() 方法。它正在做的是：

1.  创建一个空数组来存储收集到的参数。
2.  对于每个参数，将其值加载到数组中。
3.  将此数组发送到我的代理的 OnMethodEntry 方法（将在其中使用值）。

.

```
@Override
public void visitCode() {
    int paramLength = paramTypes.length;

    // Create array with length equal to number of parameters
    mv.visitIntInsn(Opcodes.BIPUSH, paramLength);
    mv.visitTypeInsn(Opcodes.ANEWARRAY, "java/lang/Object");
    mv.visitVarInsn(Opcodes.ASTORE, paramLength);

    // Fill the created array with method parameters
    int i = 0;
    for (Type tp : paramTypes) {
        mv.visitVarInsn(Opcodes.ALOAD, paramLength);
        mv.visitIntInsn(Opcodes.BIPUSH, i);

        if (tp.equals(Type.BOOLEAN_TYPE) || tp.equals(Type.BYTE_TYPE) || tp.equals(Type.CHAR_TYPE) || tp.equals(Type.SHORT_TYPE) || tp.equals(Type.INT_TYPE))
            mv.visitVarInsn(Opcodes.ILOAD, i);
        else if (tp.equals(Type.LONG_TYPE)) {
            mv.visitVarInsn(Opcodes.LLOAD, i);
            i++;
        }
        else if (tp.equals(Type.FLOAT_TYPE))
            mv.visitVarInsn(Opcodes.FLOAD, i);
        else if (tp.equals(Type.DOUBLE_TYPE)) {
            mv.visitVarInsn(Opcodes.DLOAD, i);
            i++;
        }
        else
            mv.visitVarInsn(Opcodes.ALOAD, i);

        mv.visitInsn(Opcodes.AASTORE);
        i++;
    }

    // Load id, class name and method name
    this.visitLdcInsn(new Integer(this.methodID));
    this.visitLdcInsn(this.className);
    this.visitLdcInsn(this.methodName);

    // Load the array of parameters that we created
    this.visitVarInsn(Opcodes.ALOAD, paramLength);

    mv.visitMethodInsn(Opcodes.INVOKESTATIC,
            "jalen/MethodStats",
            "onMethodEntry",
            "(ILjava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V");
    super.visitCode();
} 
```

但是，当该方法显然具有多个参数时，这不起作用。

获得的类文件显示如下：

```
static void moveDisk(char arg0, char arg1, PrintStream arg2) {
Object[] arrayOfObject = new Object[3]; arrayOfObject[0] = ???; arrayOfObject[1] = ???;
Object localObject;
arrayOfObject[2] = localObject; MethodStats.onMethodEntry(5, "hanoi/TowersOfHanoi", "moveDisk", arrayOfObject); 
```

其中创建了 2 个本地对象而不是加载参数。

字节码没有显示任何奇怪的东西：

```
static void moveDisk(char, char, java.io.PrintStream);
Code:
   0: bipush        3
   2: anewarray     #4                  // class java/lang/Object
   5: astore_3      
   6: aload_3       
   7: bipush        0
   9: iload_0       
  10: aastore       
  11: aload_3       
  12: bipush        1
  14: iload_1       
  15: aastore       
  16: aload_3       
  17: bipush        2
  19: aload_2       
  20: aastore       
  21: ldc           #118                // int 5
  23: ldc           #12                 // String hanoi/TowersOfHanoi
  25: ldc           #119                // String moveDisk
  27: aload_3       
  28: invokestatic  #19                 // Method jalen/MethodStats.onMethodEntry:(ILjava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V 
```

最后，显示的错误是（使用 -noverify 时）：

```
param: [Ljava.lang.String;@420e54f3
Exception in thread "Jalen Agent" java.lang.NullPointerException
at hanoi.TowersOfHanoi.solveHanoi(TowersOfHanoi.java)
at hanoi.TowersOfHanoi.main(TowersOfHanoi.java:29) 
```

否则，它是：

```
Exception in thread "Jalen Agent" java.lang.VerifyError: (class: hanoi/TowersOfHanoi, method: moveDisk signature: (CCLjava/io/PrintStream;)V) Expecting to find object/array on stack
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2442)
    at java.lang.Class.getMethod0(Class.java:2685)
    at java.lang.Class.getMethod(Class.java:1620)
    at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:492)
    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:484) 
```

通常，这应该更有效，因为我只是从堆栈帧中加载信息。我还尝试检查静态和非静态方法（截至此处解释的堆栈：[http](http://www.artima.com/insidejvm/ed2/jvm8.html) ://www.artima.com/insidejvm/ed2/jvm8.html ），但仍然没有成功。

关于为什么会发生这种情况的任何想法，或者可能是解决方案的想法？

谢谢 ：）

**编辑：**

它现在可以在打包原始类型时工作（感谢下面 int3 的建议 :)）。这是 visitCode() 方法的工作代码：

```
@Override
public void visitCode() {
    int paramLength = paramTypes.length;

    // Create array with length equal to number of parameters
    mv.visitIntInsn(Opcodes.BIPUSH, paramLength);
    mv.visitTypeInsn(Opcodes.ANEWARRAY, "java/lang/Object");
    mv.visitVarInsn(Opcodes.ASTORE, paramLength);

    // Fill the created array with method parameters
    int i = 0;
    for (Type tp : paramTypes) {
        mv.visitVarInsn(Opcodes.ALOAD, paramLength);
        mv.visitIntInsn(Opcodes.BIPUSH, i);

        if (tp.equals(Type.BOOLEAN_TYPE)) {
            mv.visitVarInsn(Opcodes.ILOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Boolean", "valueOf", "(Z)Ljava/lang/Boolean;");
        }
        else if (tp.equals(Type.BYTE_TYPE)) {
            mv.visitVarInsn(Opcodes.ILOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Byte", "valueOf", "(B)Ljava/lang/Byte;");
        }
        else if (tp.equals(Type.CHAR_TYPE)) {
            mv.visitVarInsn(Opcodes.ILOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Character", "valueOf", "(C)Ljava/lang/Character;");
        }
        else if (tp.equals(Type.SHORT_TYPE)) {
            mv.visitVarInsn(Opcodes.ILOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Short", "valueOf", "(S)Ljava/lang/Short;");
        }
        else if (tp.equals(Type.INT_TYPE)) {
            mv.visitVarInsn(Opcodes.ILOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Integer", "valueOf", "(I)Ljava/lang/Integer;");
        }
        else if (tp.equals(Type.LONG_TYPE)) {
            mv.visitVarInsn(Opcodes.LLOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Long", "valueOf", "(J)Ljava/lang/Long;");
            i++;
        }
        else if (tp.equals(Type.FLOAT_TYPE)) {
            mv.visitVarInsn(Opcodes.FLOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Float", "valueOf", "(F)Ljava/lang/Float;");
        }
        else if (tp.equals(Type.DOUBLE_TYPE)) {
            mv.visitVarInsn(Opcodes.DLOAD, i);
            mv.visitMethodInsn(Opcodes.INVOKESTATIC, "java/lang/Double", "valueOf", "(D)Ljava/lang/Double;");
            i++;
        }
        else
            mv.visitVarInsn(Opcodes.ALOAD, i);

        mv.visitInsn(Opcodes.AASTORE);
        i++;
    }

    // Load id, class name and method name
    this.visitLdcInsn(new Integer(this.methodID));
    this.visitLdcInsn(this.className);
    this.visitLdcInsn(this.methodName);

    // Load the array of parameters that we created
    this.visitVarInsn(Opcodes.ALOAD, paramLength);

    mv.visitMethodInsn(Opcodes.INVOKESTATIC,
            "jalen/MethodStats",
            "onMethodEntry",
            "(ILjava/lang/String;Ljava/lang/String;[Ljava/lang/Object;)V");
    super.visitCode();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T10:01:01.973

您正在使用`aastore`将 a 存储`char`到对象数组中，这是一个类型错误。`aastore`应该只用于存储对象和数组，这可能就是错误显示“预期的对象/数组在堆栈上”的原因。字符应使用 . 存储在 char 数组中`castore`。但是，由于您希望它适用于任意签名，因此您可能希望将原始类型打包成可以使用`aastore`的对象——例如`char`，应该打包在一个`java.lang.Character`对象中。

# tfs - 如何在 TFS 中复制工作项 ID？

> ID：13911149
> 
> 赞同：4
> 
> 时间：2012-12-17T09:09:49.643
> 
> 标签：tfs

我经常只需要复制工作项的 id，但是在 VS2010 中，我找不到一个简单的方法来做到这一点。我发现最近的事情是我可以在查询结果网格中选择一个项目，然后按`Ctrl`+`C`复制信息，然后只提取工作项目 ID。还有其他更简单的方法吗？这样做的扩展会很可爱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:47:55.030

如果您打开了工作项，您应该能够通过制作一个将 DTE.ActiveDocument.Name 复制到剪贴板的宏来获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T17:39:58.077

在查询上，右键单击工作项，复制工作项快捷方式。您将能够复制和粘贴工作项 ID 和标题。

# mysql - 使已经存在的表中的唯一属性不是唯一的 - MYSQL

> ID：13911156
> 
> 赞同：3
> 
> 时间：2012-12-17T09:10:04.170
> 
> 标签：mysql

查询可以使表的非唯一属性唯一：

```
ALTER TABLE mytbl ADD UNIQUE (columnName); 
```

我需要设置一个表非唯一的已经唯一的属性。谁能帮我查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:13:03.417

```
alter table mytbl drop index columnName; 
```

使用上面的命令相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:12:03.477

放下它，像这样：

```
 ALTER TABLE yourTable DROP INDEX ItsName; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b54373/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:12:42.450

您可以使用以下语句删除唯一索引：

更改表`mytbl`删除索引`columnName`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:16:55.720

首先你想得到索引的名称，你可以通过 来做到这一点[`SHOW INDEX IN mytbl`](http://dev.mysql.com/doc/refman/5.0/en/show-index.html)，然后你可以[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)：

```
ALTER TABLE mytbl DROP INDEX auto_index_name; 
```

# ruby-on-rails - 有什么方法可以在 Rails 控制台中测试 HAML 输出吗？

> ID：13911157
> 
> 赞同：2
> 
> 时间：2012-12-17T09:10:12.230
> 
> 标签：ruby-on-rails, csv, heroku, haml

我想做这样的事情`console`：

```
= raw CSV.generate_line(array) 
```

看看输出的样子。

Heroku 上的 CSV 输出的原因是在生成的每个 CSV 文件中添加了额外的换行符，我无法在开发中复制它。尝试通过部署来解决问题的随机尝试不是很好的做法=）

如果有人提示可能导致换行符的原因，也请不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T09:15:59.867

你可以这样做

```
engine = Haml::Engine.new("%p Haml code!")
engine.render #=> "<p>Haml code!</p>\n" 
```

当然，您的应用程序中需要有 haml gem，但我假设您有这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:17:05.517

你也可以拥有

```
 include ActionView::Helpers 
```

在您的控制台中。并有 raw、link_to 和其他方便的助手。

# javascript - JavaScriptInterface() 在 JellyBean 中不起作用

> ID：13911160
> 
> 赞同：1
> 
> 时间：2012-12-17T09:10:31.807
> 
> 标签：javascript, android, android-webview, dom-events

我刚刚将我的 Galaxy Tab2 软件从 ICS 更新到 Jelly Bean。我正在开发一个应用程序，我正在加载一些带有一些 js 文件的 Html，调用一些用 Javascript 文件自己编写的函数，一切正常，在 Android 设备（手机和平板电脑（4.0.1））上完全测试，但在在平板电脑上更新，它停止工作。

使用 调用 js 函数`JavaScriptInterface()`时，我没有得到任何响应。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:31:37.850

这一定是问题所在：

> 对于针对 API 级别 JELLY_BEAN_MR1 及更高级别的应用程序，只能从 JavaScript 访问使用 JavascriptInterface 注释的公共方法。

文档更新[在这里](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String)。我也看到有人报告说他们不得不[摆弄 proguard](https://stackoverflow.com/questions/13641540/javascriptinterface-not-working-with-proguard-on-android-4-2)，但我自己并没有偶然发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:43:39.467

刚刚遇到完全相同的问题，Vytautas 是正确的。这真的很令人沮丧。我项目中的所有内容在 Jelly Bean API16 上都运行良好，然后我在 API17 上进行了尝试，但它已经瘫痪了。只需添加

**@Javascript接口**

```
public void showToast(String toast)  {
    // show toast ...
} 
```

在也支持以前 API 版本的项目中包含此内容将要求您在项目设置中选择 API 17（或更高版本）的构建目标。

*   从项目菜单中单击属性
*   单击左侧列表中的 Android。
*   检查 API 级别 17（我点击了 GOOGLE APIs 4.2）

# iphone - 更改 UISlider iPhone 时模糊 UIImage

> ID：13911165
> 
> 赞同：0
> 
> 时间：2012-12-17T09:10:51.593
> 
> 标签：iphone, ios, image-processing

我已经尝试了高斯模糊并检查了stackoverflow上的所有问题，但没有一个解决了我的崩溃问题。请帮助除了高斯模糊算法之外还有其他方法可以模糊图像。我的图像大小为 768x1024，循环迭代 2*1024*768 次，这是不可行的。

```
CGContextRef NYXImageCreateARGBBitmapContext(const size_t width, const size_t height, const size_t bytesPerRow)
{
    /// Use the generic RGB color space
    /// We avoid the NULL check because CGColorSpaceRelease() NULL check the value anyway, and worst case scenario = fail to create context
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    /// Create the bitmap context, we want pre-multiplied ARGB, 8-bits per component
    CGContextRef bmContext = CGBitmapContextCreate(NULL, width, height, 8/*Bits per component*/, bytesPerRow, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);

    CGColorSpaceRelease(colorSpace);

    return bmContext;
}

 -(UIImage*)blurredImageUsingGaussFactor:(NSUInteger)gaussFactor andPixelRadius:(NSUInteger)pixelRadius
{
    CGImageRef cgImage = self.CGImage;
    const size_t originalWidth = CGImageGetWidth(cgImage);
    const size_t originalHeight = CGImageGetHeight(cgImage);
    const size_t bytesPerRow = originalWidth * 4;
    CGContextRef context = NYXImageCreateARGBBitmapContext(originalWidth, originalHeight, bytesPerRow);
    if (!context) 
        return nil;

    unsigned char *srcData, *destData, *finalData;

    size_t width = CGBitmapContextGetWidth(context);
    size_t height = CGBitmapContextGetHeight(context);
    size_t bpr = CGBitmapContextGetBytesPerRow(context);
    size_t bpp = CGBitmapContextGetBitsPerPixel(context) / 8;
    CGRect rect = {{0.0f, 0.0f}, {width, height}}; 

    CGContextDrawImage(context, rect, cgImage); 

    // Now we can get a pointer to the image data associated with the bitmap
    // context.
    srcData = (unsigned char*)CGBitmapContextGetData(context);
    if (srcData != NULL)
    {
        size_t dataSize = bpr * height;
        finalData = malloc(dataSize);
        destData = malloc(dataSize);
        memcpy(finalData, srcData, dataSize);
        memcpy(destData, srcData, dataSize);

        int sums[gaussFactor];
        size_t i, /*x, y,*/ k;
        int gauss_sum = 0;
        size_t radius = pixelRadius * 2 + 1;
        int *gauss_fact = malloc(radius * sizeof(int));

        for (i = 0; i < pixelRadius; i++)
        {
            gauss_fact[i] = 1 + (gaussFactor * i);
            gauss_fact[radius - (i + 1)] = 1 + (gaussFactor * i);
            gauss_sum += (gauss_fact[i] + gauss_fact[radius - (i + 1)]);
        }
        gauss_fact[(radius - 1) / 2] = 1 + (gaussFactor*pixelRadius);
        gauss_sum += gauss_fact[(radius - 1) / 2];

        unsigned char *p1, *p2, *p3;

        for (size_t y = 0; y < height; y++) 
        {
            for (size_t x = 0; x < width; x++) 
            {
                p1 = srcData + bpp * (y * width + x); 
                p2 = destData + bpp * (y * width + x);

                for (i = 0; i < gaussFactor; i++)
                    sums[i] = 0;

                for (k = 0; k < radius ; k++)
                {
                    if ((y - ((radius - 1) >> 1) + k) < height)
                        p1 = srcData + bpp * ((y - ((radius - 1) >> 1) + k) * width + x); 
                    else
                        p1 = srcData + bpp * (y * width + x);

                    for (i = 0; i < bpp; i++)
                        sums[i] += p1[i] * gauss_fact[k];

                }
                for (i = 0; i < bpp; i++)
                    p2[i] = sums[i] / gauss_sum;
            }
        }
        for (size_t y = 0; y < height; y++) 
        {
            for (size_t x = 0; x < width; x++) 
            {
                p2 = destData + bpp * (y * width + x);
                p3 = finalData + bpp * (y * width + x);

                for (i = 0; i < gaussFactor; i++)
                    sums[i] = 0;

                for(k = 0; k < radius ; k++)
                {
                    if ((x - ((radius - 1) >> 1) + k) < width)
                        p1 = srcData + bpp * ( y * width + (x - ((radius - 1) >> 1) + k));
                    else
                        p1 = srcData + bpp * (y * width + x);

                    for (i = 0; i < bpp; i++)
                        sums[i] += p2[i] * gauss_fact[k];

                }
                for (i = 0; i < bpp; i++)
                {
                    p3[i] = sums[i] / gauss_sum;
                }
            }
        }
    }

    size_t bitmapByteCount = bpr * height;

    ///////Here was the problem.. you had given srcData instead of destData.. Rest all 
    //were perfect...
   CGDataProviderRef dataProvider = CGDataProviderCreateWithData(NULL, destData, bitmapByteCount, NULL);

    CGImageRef blurredImageRef = CGImageCreate(width, height, CGBitmapContextGetBitsPerComponent(context), CGBitmapContextGetBitsPerPixel(context), CGBitmapContextGetBytesPerRow(context), CGBitmapContextGetColorSpace(context), CGBitmapContextGetBitmapInfo(context), dataProvider, NULL, true, kCGRenderingIntentDefault);

    CGDataProviderRelease(dataProvider);
    CGContextRelease(context); 
    if (destData)
        free(destData);
    if (finalData)
        free(finalData);

    UIImage* retUIImage = [UIImage imageWithCGImage:blurredImageRef];

    CGImageRelease(blurredImageRef);

    return retUIImage;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:15:12.307

查看来自 WWDC 2012 的视频。

高斯模糊是 CoreImage 中的内置过滤器。

会议 510。

也看看这里...

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)

（你想要的部分是处理图像）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:14:14.587

此示例适用于 UIImage 的小型 StackBlur 扩展。StackBlur 接近 GaussianBlur 但要快得多。

检查它：[https ://github.com/tomsoft1/StackBluriOS](https://github.com/tomsoft1/StackBluriOS)

# asp.net-mvc-4 - Asp.net MVC4 网站启动时缺少类型

> ID：13911167
> 
> 赞同：1
> 
> 时间：2012-12-17T09:10:58.347
> 
> 标签：asp.net-mvc-4

当我在 Visual Studio 2012 中启动 Asp.net MVC4 网站时，我遇到了一个例外：

```
Could not load type 'System.Net.Http.Formatting.DefaultContentNegotiator' 
from assembly 'System.Net.Http.Formatting, Version=4.0.0.0, Culture=neutral,
PublicKeyToken=31bf3856ad364e35'. 
```

在代码上：

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = System.Web.Http.RouteParameter.Optional }
            ); 
```

整个代码看起来像：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;
using System.Web.Http;

namespace Accela.Apps.Diagnostics.Portal
{
    public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = System.Web.Http.RouteParameter.Optional }
            );

            routes.MapRoute(
               name: "Default",
               url: "{controller}/{action}/{id}",
               defaults: new { controller = "Login", action = "Login", id = UrlParameter.Optional }
           );
        }
    }
} 
```

请帮我离开那里。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:30:31.733

看起来您使用的是旧版本的 DLL。您可以做的是，从您的项目中删除对“System.Net.Http.Formatting”的现有引用并尝试安装[它](http://nuget.org/packages/System.Net.Http.Formatting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:26:52.493

该可选参数是否应该不仅仅是

```
UrlParameter.Optional 
```

如在

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = UrlParameter.Optional  }
            ); 
```

代替`System.Web.Http.RouteParameter.Optional`

# c# - 如何使用c#检测windows的保存操作

> ID：13911170
> 
> 赞同：1
> 
> 时间：2012-12-17T09:11:08.257
> 
> 标签：c#, .net

我正在 C# dot net 中构建一个项目，我想在其中检测 Windows 的任何保存操作以运行我的项目。这意味着当用户进行任何保存操作时，项目也会创建该保存文件的副本。所以请帮助检测Windows中的任何保存操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:18:48.787

您可以使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类检测文件的修改。

如果要在 Visual Studio 中检测文件修改，则可能需要编写 VS 扩展。

听起来你只需要一个源代码控制软件，比如**Subversion**、**Mercurial**或**Git**。

# puppet - puppet 错误安装 tomcat6 模块

> ID：13911173
> 
> 赞同：0
> 
> 时间：2012-12-17T09:11:15.990
> 
> 标签：puppet

我正在尝试将 tomcat6 模块安装到代理中。我已经从 puppetlab 下载了模块。并尝试连接到服务器我收到以下错误。

```
Error: Could not retrieve catalog from remote server: Error 400 on
 SERVER: No matching value for selector param 'undef' at
/etc/puppet/modules/yum_priorities/manifests/init.pp:19.. 
```

init.pp 文件包含 yum_priorities

> ```
> 14    class yum_priorities {
> 15    
> 16        $yum_priorities = $lsbmajdistrelease ? {
> 17          /4|6/ => 'yum-plugin-priorities',
> 18          '5'       => 'yum-priorities',
> 19        }
> 20    
> 21        package {$yum_priorities :
> 22          ensure    => installed,
> 23        } 
> ```

我在清单中的 site.pp 文件

> ```
>  27   node 'puppet_client'
>  28   {
>  29       include tomcat6
>  30   } 
> ```

tomcat 依赖于 yum_priorities

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T18:26:12.763

我无法添加评论，所以我必须“回答”:)。无论如何，正如 Ger Apeldoorn 回答的那样，事实不能得到`lsbmajdistrelease`.

在 Redhat/CentOS 上找到您缺少的软件包：

```
yum whatprovides lsb_release 
```

或者简单地安装它：

```
yum install redhat-lsb-core 
```

这将解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T05:50:39.090

好像`$lsbmajdistrelease`没有定义。

尝试添加适当的范围（全局）：`$::lsbmajdistrelease`

Factor 应该给你那个全局变量，你可以手动运行 facter 看看是否有错误。

```
facter lsbmajdistrelease 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:00:55.440

在 yum_priorities 类中的第 20 行打印出通知语句。就像是 ：

```
notify {"I AM SEEING THIS ... ${yum_priorities}" :} 
```

以及模块tomcat6内部的某个地方。

并检查运行 puppet 代理时得到的结果。如果它是空的，则意味着它没有被正确传播。

另一个评论是，为类和变量使用相同的名称（即 yum_priorities）可能不是一个好的编码示例。

# c# - 你如何欺骗一个窗口，让它相信它有焦点？

> ID：13911178
> 
> 赞同：4
> 
> 时间：2012-12-17T09:11:21.060
> 
> 标签：c#, focus, mouseevent, postmessage

我一直在尝试使用 将鼠标点击发送到表单内的 WebBrowser 控件`PostMessage()`，但遇到了一个相当重要的问题。我想要实现的是在我的表单最小化时模拟此 WebBrowser 上的鼠标点击。通常`PostMessage()`这样做会很好，但它似乎只在我的表单有焦点时才有效。这让我相信，在处理鼠标事件之前，我正在执行一些检查以查看我加载到 WebBrowser 控件中的特定网站是否处于焦点位置。

这就是我使用程序发送点击的方式：

```
private void SendClick(Point location)
    {            
        resetHandle = true;
        StringBuilder className = new StringBuilder(100);
        while (className.ToString() != "Internet Explorer_Server") 
        {
            handle = GetWindow(handle, 5); // 5 == child
            GetClassName(handle, className, className.Capacity);
            //MessageBox.Show(className.ToString());
        }
        IntPtr lParam = (IntPtr)((location.Y << 16) | location.X); 
        IntPtr wParam = IntPtr.Zero; 
        const uint downCode = 0x201; 
        const uint upCode = 0x202;
        const uint moveCode = 0x200;
        PostMessage(handle, moveCode, wParam, lParam); //move mouse
        PostMessage(handle, downCode, wParam, lParam); // mousedown
        PostMessage(handle, upCode, wParam, lParam); // mouseup
    } 
```

这就是 resetHandle 的作用：

```
private void timer3_Tick(object sender, EventArgs e)
    {
        if (resetHandle == true)
        {
            handle = webBrowser1.Handle;
            resetHandle = false;
        }
    } 
```

我不确定是否有更好的方法将鼠标事件发送到背景窗口，我愿意接受任何想法。我真正要问的是，当它实际上仍然被最小化时，是否有可能让一个窗口相信它是焦点？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:42:01.810

与其保持窗口最小化，不如保持其正常（恢复），但设置其 X 或 Y 坐标，使其位于屏幕外。

如果您想让用户产生最小化和恢复它的错觉，请使用[HwndSource.AddHook](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndsource.addhook.aspx)来观察[SC_MINIMIZE](http://msdn.microsoft.com/en-us/library/ms646360%28VS.85%29.aspx)。在您的`HwndSourceHook`处理程序中，根据伪最小化状态将窗口移到或移出屏幕，并设置`handled`为 true。

# java - 整数幂的乘法 vs ^ 运算符 vs Math.pow()

> ID：13911180
> 
> 赞同：0
> 
> 时间：2012-12-17T09:11:23.373
> 
> 标签：java, pow

我对 Java 中进行功率计算的方式以及可用方法的性能感到好奇。所以我写了一个简单的测试来检查`Math.pow()`,`*`和`^`操作。

```
public static void main(String[] args) {

    int SIZE = 100000000;

    int[] arr1 = new int[SIZE];
    long st1, end1, st2, end2, st3, end3;

    st1 = System.currentTimeMillis();
    for (int i = 0; i < SIZE; i++) {
        arr1[i] = (int) Math.pow(i, 4);
    }
    end1 = System.currentTimeMillis();
    System.out.println("pow: " + (end1 - st1));

    arr1 = new int[SIZE];
    st2 = System.currentTimeMillis();
    for (int i = 0; i < SIZE; i++) {
        arr1[i] = i * i * i * i;
    }
    end2 = System.currentTimeMillis();
    System.out.println("mul: " + (end2 - st2));

    arr1 = new int[SIZE];
    st3 = System.currentTimeMillis();
    for (int i = 0; i < SIZE; i++) {
        arr1[i] = i^4;
    }
    end3 = System.currentTimeMillis();
    System.out.println("  ^: " + (end3 - st3));

    //to prevent optimizations form skipping the calculations
    for (int i = 0; i < SIZE; i++) {
        if (arr1[i] == 1){
            System.out.println(1);
        }
    }
    System.out.println("done");
} 
```

如果前两个结果在意料之中：

```
pow: 19253 19128 19205 19145 19185 19130 19162 19177 19191 19157 | 19173
mul: 91 86 91 85 98 90 90 105 87 95 | 92
  ^: 80 85 80 70 60 65 75 60 70 60  | 71 
```

第三个有点混乱。为什么`^`总是比简单的乘法快一点，应该使用哪一个？

所有测试均在类似条件下使用 JRE 1.7 运行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T09:15:07.143

运算符不执行求幂 - 它是按位“`^`异或”（又名“异或”）。

对 100000000 的四次方使用整数数学运算会得到不正确的结果 - 32 位整数不能存储那么大的数字。

`Math.pow()`将使用浮点运算。由于精度问题，答案可能不是 100% 准确，但应该能够代表所需的结果范围。

要为这么大的数字获得 100% 准确的值，您应该使用`BigInteger`该类。但是，它不会特别快。在考虑准确性与性能时，这是您必须做出的权衡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T09:15:37.870

`^`Java 中的运算符是*按位异或*，并且绝对与幂函数不同。

**参考**

*   [http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

# vb.net - vb.net：VolumeSerialNumber 与 vb6 GetVolumeInformation

> ID：13911181
> 
> 赞同：1
> 
> 时间：2012-12-17T09:11:23.857
> 
> 标签：vb.net

在 VB6 中，我得到这样的卷的序列号：

```
Temp1 = String$(255, Chr$(0))
Temp2 = String$(255, Chr$(0))
r = GetVolumeInformation(uDrive, Temp1, StrLen(Temp1), lSerialNumber, 0, 0, Temp2, StrLen(Temp2))

GetPartitionSerialNumber = lSerialNumber 
```

在 VB.NET 我使用

```
 Dim disk As System.Management.ManagementObject = New System.Management.ManagementObject("win32_logicaldisk.deviceid=""" + uDrive + ":""")
    disk.Get()
    Dim SerialNumber As String = disk("VolumeSerialNumber").ToString() 
```

VB6 返回 -1870518177，但 VB.NET 返回 9082285F。

有人可以告诉我我需要做什么才能在 .NET 中获得结果 -1870518177 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:00:10.130

While `Val("&H" & ...)` will work, it's the old VB6 way of doing things which isn't optimal. The better way to do it would be:

```
Dim iSerial As Integer = Convert.ToInt32(sSerialNumber, 16) 
```

The `16` parameter specifies the base (hexidecimal is base 16).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:03:21.253

Dim iSerial As Integer = Val("&H" & sSerialNumber)

# graph - 谷歌图表工具堆积图

> ID：13911182
> 
> 赞同：0
> 
> 时间：2012-12-17T09:11:25.207
> 
> 标签：graph, charts

我是谷歌图表工具的新手，我想知道我做错了什么。我想通过添加 'isStacked':true 来堆叠 BarChart（或 ColumnChart），但是图表给了我错误的数据。

[您可以使用此代码在 Google Playground 上自己尝试一下](http://code.google.com/apis/ajax/playground/?type=visualization#bar_chart)

（只需在选项中添加 'isStacked':true 即可查看错误结果）

```
function drawVisualization() {
// Create and populate the data table.
var  data = new  google.visualization.DataTable({"cols":[{"id":"","label":"Date","type":"string"},
                                                     {"id":"","label":"Complaints","type":"number"},
                                                     {"id":"","label":"Compliments","type":"number"},
                                                     {"id":"","label":"Questions","type":"number"},
                                                     {"id":"","label":"Suggestions","type":"number"}],
                                             "rows":[{"c":[{"v":"12\/2011"},{"v":30},{"v":0},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"1\/2012"},{"v":93},{"v":"5"},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"2\/2012"},{"v":82},{"v":"5"},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"3\/2012"},{"v":72},{"v":"10"},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"4\/2012"},{"v":68},{"v":"8"},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"5\/2012"},{"v":59},{"v":"7"},{"v":0},{"v":0}]},
                                                     {"c":[{"v":"6\/2012"},{"v":30},{"v":"3"},{"v":"3"},{"v":0}]},
                                                     {"c":[{"v":"7\/2012"},{"v":37},{"v":"3"},{"v":"4"},{"v":"3"}]},
                                                     {"c":[{"v":"8\/2012"},{"v":31},{"v":"2"},{"v":"5"},{"v":0}]},
                                                     {"c":[{"v":"9\/2012"},{"v":47},{"v":"2"},{"v":"1"},{"v":"1"}]},
                                                     {"c":[{"v":"10\/2012"},{"v":67},{"v":0},{"v":"5"},{"v":"1"}]},
                                                     {"c":[{"v":"11\/2012"},{"v":38},{"v":"1"},{"v":"4"},{"v":0}]},
                                                     {"c":[{"v":"12\/2012"},{"v":14},{"v":"1"},{"v":"1"},{"v":"1"}]}
                                                    ]});       

// Create and draw the visualization.
new google.visualization.BarChart(document.getElementById('visualization')).
  draw(data,
       {title:"Yearly Coffee Consumption by Country",
        width:1000, height:400,
        vAxis: {title: "Year"},
        hAxis: {title: "Cups"}}
  );
} 
```

我希望有人可以帮助我...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:38:08.023

我只是遇到了同样的问题。解决方法是，数值不能在引号之间，否则“3”+“4”会变成 34 而不是 7。

如果那里有数字值，只需删除 " 标记。干杯，格雷格

更新：如果您也使用 'f:' 值，您将需要再次使用引号，否则鼠标悬停可能无法在图表上使用。

```
{"c":[{"v":"12\/2012"},{"v":14, "f":"14"},{"v":1, "f":"1"},{"v":1, "f":"1"},{"v":1, "f":"1"}]} 
```

# c++ - DirectX - 每次调用 D3DXCreateTextureFromFile() 的新设备参考？

> ID：13911183
> 
> 赞同：0
> 
> 时间：2012-12-17T09:11:29.147
> 
> 标签：c++, winapi, interface, directx, iunknown

我正在编写一个带有directX api的程序。我开始使用 DXUT。我在尝试控制 directX 设备的引用计数时遇到问题。似乎每次我调用 D3DXCreateMesh()、D3DXCreateTextureFromFile() 或 IDirect3DDevice9::CreateVertexBuffer() 时都会向设备添加一个引用。我尝试使用“SYSTEMMEM”标志将新创建的对象（网格、纹理或顶点缓冲区）存储在系统内存中，而不是将其存储在设备的分配中。这是一个添加了对设备的引用的调用示例...

```
DWORD dwNumFaces = 1, dwNumVertices = 3, dwOptions |= D3DXMESH_SYSTEMMEM;

D3DVERTEXELEMENT9 mesh_decl
{
...
}

ID3DXMESH *pMesh = NULL;
D3DXCreateMesh(dwNumFaces, dwNumVertices, dwOptions, mesh_decl, m_pd3dDevice, &pMesh); 
```

有关此问题的任何想法或信息链接？这是可以预料的吗？到目前为止的解决方案是在每次调用上述函数后直接释放设备 (m_pd3dDevice->Release())。当 DXUT 尝试释放设备时，会抛出一个错误，指出设备的引用计数大于零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:07:18.797

每个网格都与一个设备相关联。该设备必须至少与 Mesh 一样长。

当您使用 释放网格时`pMesh->Release()`，在最终发布时，网格将被破坏。发生这种情况时，Mesh 将依次调用`Release()`设备。这样可以保证只要有Mesh，设备就依然存在。

无论是使用系统内存还是设备内存，它都应该是这样工作的。

网格不仅仅是一堆三角形 - 它是一组经过预先计算、调整、缓存和优化*以在特定设备上显示*的三角形。这就是他们引用设备的原因 - 这是他们优化的设备。您不能只是将它们移动到另一台设备上。

**底线：**引用计数必须是**正确**的引用计数 - 它应该是对对象的引用计数。由于每个 Mesh 都有对对象的引用，因此在创建网格时引用计数应该增加，而在销毁网格时减少引用计数是正确的。

如果您“控制”引用计数，结果将是*不正确*的，并且会发生坏事。

# .net - 我们如何在 Workflow 中实现以下场景？

> ID：13911185
> 
> 赞同：0
> 
> 时间：2012-12-17T09:11:36.630
> 
> 标签：.net, workflow, workflow-foundation

以下是我的应用程序中的确切场景

![在此处输入图像描述](../Images/8af8a4978266195c877e38c1d487b5b8.png)

这可能是一个非常基本的问题..但我在工作流程中相对较新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:06:12.080

这可能有点太晚了，但是您可以在工作流中使用**SendActivity**来调用 WCF 服务，以及使用**IfElseActivity**来根据用户 ID 决定要做什么。

此外，在这种类型的场景中使用 WF 将是矫枉过正，除非您的问题描述了更多内容。

# java - Java 泛型算术

> ID：13911188
> 
> 赞同：5
> 
> 时间：2012-12-17T09:11:49.423
> 
> 标签：java, generics, primitive

我正在尝试创建一些 Java 类，它们应该可以使用浮点数或双精度数（出于模拟目的，我需要同时支持两者）。这些类需要做一些基本的算术，还需要使用三角函数（sin、cos、atan2）。

我试图做一个通用的方法。由于 Java 不允许泛型中的原始类型并且`MyClass<T extends Number>`确实允许 Double 和 Float，但使基本算术成为不可能，我围绕 Double 和 Float 构建了一个包装类。但是，一旦我需要在一个泛型类中实例化一个值，这种方法就会失败。

是否有任何干净的方法来支持浮点和双精度，而无需复制每种类型的所有代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:32:26.417

也许这就是你要找的？

```
class MyClass<T extends Number> {
    T add(T t1, T t2) {
        if (t1 instanceof Double) {
            return (T) Double.valueOf((t1.doubleValue() + t2.doubleValue()));
        } else if (t1 instanceof Float) {
            return (T) Float.valueOf(((t1.floatValue() + t2.floatValue())));
        } else if (t1 instanceof Integer) {
            return (T) Integer.valueOf(((t1.intValue() + t2.intValue())));
        }
        // you can add all types or throw an exception
        throw new IllegalArgumentException();
    }

    public static void main(String[] args) {
        MyClass<Double> mc = new MyClass<Double>();
        mc.add(1.0, 1.1);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T09:16:24.410

根据经验，如果您在 Java 中进行核心数值工作，最好坚持使用原始类型。这意味着泛型对于这种类型的工作是不可行的（但对于许多其他用途来说当然是完全可以的）。

> 是否有任何干净的方法来支持浮点和双精度，而无需复制每种类型的所有代码？

您可以根据高精度方法实现低精度方法：

```
public static double calc(double x, double y) {
   // do the calculation and return double
}

public static float calc(float x, float y) {
   return (float)calc((double)x, (double)y);
} 
```

# git - 无法在 bitbucket 上使用 git 添加文件夹

> ID：13911195
> 
> 赞同：1
> 
> 时间：2012-12-17T09:12:20.527
> 
> 标签：git, bitbucket

我从 github 克隆了几个 repo 到我当前的工作目录中。我忘了删除他们文件夹中的 .git 文件夹，我提交了更改。

然后我删除其中的 .git 文件夹并再次点击提交。

现在在我的 bitbucket 帐户中，它们以灰色的形式出现，就像这样。我无法点击它们

```
demo_test1 → 3608f1e44d[36044c82d]
demo_test2 → 8cc44a089[8cc4a089] 
```

所有文件仍在我的本地文件夹中，但不在 bitbucket 中。

如果我点击提交，它说没有更改，但文件仍然存在。

我该怎么办

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:25:29.630

您可以在添加嵌套存储库之前将 HEAD 和索引重置为：

```
git reset SHA1_before_first_commit_with_nest_git_repos
git add . 
git commit -m "nested repos clones"
git push -f 
```

这`git reset`不会影响您当前的工作目录（因此您的文件保持不变，并且您的嵌套存储库（没有您刚刚删除的 .git 文件夹）仍然存在）。
重置后，您可以再次添加所有这些文件，并将新提交强制推送回 BitBucket。

如果您在该 BitBucket 存储库上没有很多合作者，则强制推送（即，用新的历史记录替换已发布的历史记录）不会有问题。

# sql - 检测模式以在 MySQL 中显示具有多个数字的字段

> ID：13911196
> 
> 赞同：0
> 
> 时间：2012-12-17T09:12:22.543
> 
> 标签：sql, mysqli, pattern-matching, design-patterns

想象一下，您有一个包含这样数据的字段（每行代表该字段中不同行的数据）：

```
28746: Porto Alegre
28302: Osasco
28797: Praia Grande 
```

但有时该领域的数字不止一个：

```
26755: Floriano Peixoto,26754: Floriano 25582: Bela Vista
25579: Bela Vista 25581: Bela Vista De Goiás,26867: Goiás 
```

我知道这些数据没有标准化，但这不是我想要解决的问题。

我想知道是否可以进行仅显示该字段中具有多个数字的行的查询。

关于如何实现这一目标的任何建议？

**更新**

从 Dark_a 答案我试过这个：

```
SELECT data_c1
  FROM test_data
  WHERE INSTR(data_c1,':',1,2) <> 0; 
```

但似乎 INSTR 只接受参数：

[http://dev.mysql.com/doc/refman/5.5/en/string-functions.html](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)

但是，如果我使用这个其他查询：

```
SELECT data_c1
  FROM test_data
  WHERE INSTR(data_c1,',') <> 0; 
```

它似乎工作正常，因为字段中的数据不止一个数字，它用逗号分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:44:31.700

你可以试试这个：

```
SELECT data_c1
  FROM test_data
 WHERE INSTR(data_c1,':',1,2) <> 0; 
```

如果在文本中使用逗号。如果不是，那么最好检查逗号：

```
SELECT data_c1
  FROM test_data
 WHERE INSTR(data_c1,',',1,2) <> 0; 
```

# weka - Weka：训练集和测试集不兼容

> ID：13911199
> 
> 赞同：3
> 
> 时间：2012-12-17T09:12:26.917
> 
> 标签：weka

我正在尝试使用 weka 和朴素贝叶斯分类器对一些网络帖子进行分类。

首先，我手动分类了许多帖子（大约 100 个负数和 100 个正数），并使用以下形式创建了一个 .arff 文件：

```
@relation classtest
@attribute 'post' string
@attribute 'class' {positive,negative}
@data
'RT @burnreporter: Google has now indexed over 30 trillion URLs. Wow. #LeWeb',positive
'A special one for me  Soundcloud at #LeWeb ',positive
'RT @dianaurban: Lost Internet for 1/2 hour at a conference called #LeWeb. Ironic, yes?',negative
   .
   .
   . 
```

然后我打开*Weka Explorer*加载该文件并应用`StringToWordVector`过滤器将帖子拆分为单个单词属性。

然后，在对我的数据集执行相同操作后，选择（在 weka 的分类选项卡中）`naive bayes`分类器并选择选择测试集，它返回`Train and test set are not compatible`. 我能做些什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:55:00.047

训练集和测试集的属性排序可能不同。

您可以使用[http://weka.wikispaces.com/Batch+filtering中所述的批量过滤](http://weka.wikispaces.com/Batch+filtering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-15T19:01:10.647

我使用了批处理过滤器，但仍然有问题。这是我所做的：

java -cp /usr/share/java/weka.jar weka.filters.unsupervised.attribute.NumericToNominal -R last -b -i trainData.arff -o trainDataProcessed.csv.arff -r testData.arff -s testDataProcessed.csv。阿尔夫

然后我收到以下错误：

输入文件格式不同。

后来，我想出了两种方法让训练好的模型在提供的测试集上工作。

方法 1\. 使用知识流。例如如下所示：CSVLoader(for train set) -> classAssigner -> TrainingSetMaker -->(您选择的分类器) -> ClassfierPerformanceEvaluator - TextViewer。CSVLoader（用于测试集）-> classAssigner -> TestgSetMaker -->（与上面相同的分类器实例）-> PredictionAppender -> CSVSaver。然后从 CSVLoader 或 arffLoder 为训练集加载数据。该模型将被训练。之后从测试集的加载器加载数据。它将在提供的测试集上评估模型（例如分类器），您可以从 textviewer（连接到 ClassifierPerformanceEvaluator）查看结果，并从连接到 PredictionAppender 的 CSVSaver 或 arffSaver 获取保存的结果。附加列， “归类为” 将被添加到输出文件中。就我而言，我使用了“？” 如果类标签不可用，则用于提供的测试集中的类列。

方法 2\. 将训练集和测试集合并到一个文件中。然后可以将完全相同的过滤器应用于训练集和测试集。然后，您可以通过应用实例过滤器来分离训练集和测试集。因为我使用“？” 作为测试集中的类标签。它在实例过滤器索引中不可见。因此，只需选择在应用实例过滤器时可以在要删除的属性值中看到的那些索引。您将只剩下测试数据。保存它并将其加载到分类器页面的供应测试集中。这一次它将起作用。我猜这是导致不兼容的训练和测试集问题的类属性。由于许多分类器需要标称类属性。其中的值被转换为类属性的可用值的索引，根据[http://weka.wikispaces.com/Why+do+I+get+the+error+message+%27training+and+test+set+are+not+compatible%27%3F](http://weka.wikispaces.com/Why+do+I+get+the+error+message+%27training+and+test+set+are+not+compatible%27%3F)

# google-maps - 从 KML 导出坐标

> ID：13911205
> 
> 赞同：2
> 
> 时间：2012-12-17T09:13:01.500
> 
> 标签：google-maps, kml

我需要从 KML 导出线坐标。我使用一些 KML2CSV 导出工具。但是这个程序无法读取我的 kml。错误：读取错误。

为什么我需要坐标：I`v kml，其中有区域的管道。我必须在没有 KML 的情况下在谷歌地图上显示这个坐标。

我希望我能向你解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:40:57.120

**一种解决方案：Google Fusion Tables**

从您的 KML 中提取坐标的一种方法是将您的 KML 上传到[Google 的 Fusion Tables](http://support.google.com/fusiontables)。如果 Google 地球解析您的数据，那么您很可能能够将数据导入 Fusion Table。

创建“Fusion Table”的快捷方式只需从[此处](https://support.google.com/fusiontables/answer/2571232)单击“Create a Fusion Table”并选择您的 KML 文件。创建 Fusion Table 的直接方法是登录 Google Drive（又名 Google Docs），然后单击“创建”并在“更多”下选择“Fusion Table”并导入您的 KML 文件。

导入后，您可以在线尝试许多可视化选项。

您还可以选择文件菜单下的“下载”，然后将数据导出为 CSV 或 KML 文件。 [http://support.google.com/fusiontables/answer/2548807/](http://support.google.com/fusiontables/answer/2548807/)

但是，Fusion Tables 中 KML 导入的 CSV 导出会导出 KML 几何（不是单独的纬度/经度字段），因此您可以在文本编辑器中进一步编辑生成的文件并去除 KML 标记。

```
1,"<Point><coordinates>-122.536226,37.86047,0.0</coordinates></Point>" 
```

[Google Fusion Tables 还允许通过带有类似 SQL 的查询的 RESTful API](https://developers.google.com/fusiontables/)进行编程访问，以插入、更新或删除数据行。

更新：Google Fusion 表将于 2019 年 12 月 3 日停用，之后将不再工作。

**验证 KML**

如果您无法使用其他 KML2CSV 转换器，那么您的 KML 可能有一些无效元素阻止它。Google 地球仍然可以呈现格式错误的 KML，因此当您需要在其他地方使用该 KML 时，您需要验证 KML 数据。

您可以使用[Galdos KML 验证器](http://kmlvalidator.com/home.htm)。还建议一些[提示来验证您的 KML](http://kml4earth.appspot.com/kmlBestPractice.html#KML_Validation_Tools)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T15:05:31.377

[这在这里](http://www.landviser.net/content/extracting-geographical-lat-long-data-google-earth-kml-kmz-files-excel)应该有所帮助，您必须对您的 kml 文件进行一些小改动：将其保存为 xml 文件，然后使用 excel 来获取您想要的内容。

# php - 为什么在数据库中保存会话很好保存？

> ID：13911210
> 
> 赞同：54
> 
> 时间：2012-12-17T09:13:18.880
> 
> 标签：php, performance, codeigniter, session, security

我已经看到 codeigniter 可以将会话值保存在数据库中。
它说在数据库中保存会话是良好的安全实践。

但我认为将会话信息保存在数据库中有助于提高性能。
它们只保存会话的几个元素，例如：

```
CREATE TABLE IF NOT EXISTS  'ci_sessions' (
  session_id varchar(40) DEFAULT '0' NOT NULL,
  ip_address varchar(16) DEFAULT '0' NOT NULL,
  user_agent varchar(50) NOT NULL,
  last_activity int(10) unsigned DEFAULT 0 NOT NULL,
  user_data text NOT NULL,
  PRIMARY KEY (session_id)
); 
```

但是如果一个站点使用更多的会话变量，例如用户名、上次登录时间等，我可以将它们保存在数据库中并在程序中使用它们。

我必须将这些列添加到同一个表中吗？我认为将会话信息保存在数据库中只会有助于减少 Web 服务器的内存使用 (RAM)。任何人都可以解释它在什么意义上提高了安全性。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-12-17T09:16:25.030

它不会以任何方式提高安全性。

在数据库中存储会话最常见和最合理的模式是当您有多个前端服务器时，您需要为它们共享会话存储。

对于downvoters：文件系统中的文件的安全性不亚于数据库中的记录。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-17T09:18:09.273

这个想法是会话不能被劫持。

会话 ID 存储在 cookie 中。如果黑客可以窃取该 ID，他就可以伪装成其他人，因为会话是由...标识的 ID。

通过保存用户的会话 ID、IP 和代理服务器端（例如您的数据库），您可以将保存在数据库中的数据与客户端进行比较。如果黑客窃取了某人的会话 ID，黑客可能只是没有匹配的 IP 和/或用户代理，使用户不匹配，从而允许您显示或隐藏某些内容。

您必须手动比较数据。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-17T09:20:24.017

基于文件的会话的一个常见安全错误是将它们存储在`/tmp`或另一个共享目录中，其中数据可能可供第 3 方访问；特别是在共享主机上，这可能是一个问题。不过，这可以通过适当的文件权限来防止。

将它们存储在数据库中意味着您拥有数据库的所有访问限制，但这也意味着您需要正确配置它们并安全地设置数据库的物理存储。

它提高了性能，因为数据库服务器有更多的层来通过缓存和内存存储来提高性能，而基于文件的会话总是会导致磁盘访问。可以改进并发访问，因为您可以选择文件锁定以外的其他并发机制。但是，如果您的数据库服务器已经忙于常规的数据库工作，那么另外对其​​进行会话处理可能不是一个好主意。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-17T09:44:15.130

这是为了回答：我可以将它们保存在数据库中并在程序中使用它们吗？

是的，您可以将它们保存在数据库中，但无需为此创建单独的列。它进入用户数据列。

您可以设置用户名 `$this->session->set_userdata('sessionname',session value);`

你可以用 `$var=$this->session->userdata('sessionname');`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-10-27T20:24:05.847

您没有提到您使用的是 PHP 还是 MYSQL，但是将会话保存在数据库中并不会给您带来更好的性能，实际上恰恰相反。

PHP 中基于文件的默认会话比从数据库中检索会话值要快得多，但是在每秒处理数百个查询之前，您不会真正注意到差异。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-11T12:34:06.480

*   应用程序需要能够在没有服务器关联的多个服务器上运行（将请求从同一客户端定向到同一服务器的方法）。确保会话继续正常工作的一种简单方法是将会话存储在所有服务器通用的中央数据库中。

*   应用程序需要能够在共享主机上运行，​​在共享主机上存在与在文件系统中存储会话数据相关的重大安全问题。

*   应用程序的性能需求非常苛刻，需要更复杂的会话数据存储解决方案。有许多解决数据库性能问题的现有想法和方法，当会话存储在数据库中时可以使用这些想法和方法。

**参考**

克里斯，S（2004 年，12 月 14 日）。*在数据库中存储会话。*克里斯·希夫莱特博客。[https://shiflett.org/articles/storing-sessions-in-a-database](https://shiflett.org/articles/storing-sessions-in-a-database)

# python - 测试支付处理功能

> ID：13911219
> 
> 赞同：0
> 
> 时间：2012-12-17T09:13:58.987
> 
> 标签：python, database, web, payment-processing

我相信这个问题可能超出了 SO 的范围，但我想知道测试支付处理功能的最佳实践是什么？

对于开发的任何功能，测试都相对容易，如果不是通过单元测试而不是通过前端演练，但是有了这个，我有点不知所措，因为我以前没有这样做过。

这里有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:48:04.363

大多数支付处理器都有一个沙盒/开发者帐户，您可以在其中以测试模式处理交易，因此您可以像在真实环境中一样对它们进行全面测试。

# database - 配置 Spring 事务管理器后，数据库连接何时建立？

> ID：13911220
> 
> 赞同：3
> 
> 时间：2012-12-17T09:14:03.253
> 
> 标签：database, spring, transactions, connection

假设`getAssignedTasks`在一个名为的类中有一个方法，`TaskService`该方法实际上从两个数据源中检索信息，`dao1.getInfo()`并且`dao2.getMoreInfo()`. 问题是实际建立数据库连接的时间是什么时候？

我认为调用时已建立与 datasource1 的连接`dao1.getInfo()`，此时（`dao2.getMoreInfo()`尚未调用）未建立与 datasource2 的连接。我对吗？立即调用该方法时是否会建立连接`getAssignedTasks`？

弹簧配置如下

```
<tx:advice id="txAdvice" transaction-manager="txManager">
    <tx:attributes>
        <tx:method name="get*" read-only="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T11:27:17.713

我不知道这是否是规范定义的行为（如果不是 - 这可能在不同的 JTA 实现中有所不同），但是对于 Artomikos jdbc JTA 实现，似乎只有在需要时和事务开始时才进行连接。

这似乎是合乎逻辑的，因为在某些方法中，可能不使用第二个（或第三个或）DataSource 的连接形式，并且从池中获取它只是无用的开销。

我写了一个小测试来调查这个可以在[github](https://github.com/isopov/multiple-ds-tx-test/commit/730bdc2d820c95813062eb250e7c00fe224d444b)上找到的。您可以通过它进行调试以进行自己的调查。

# jsp - 如何从Struts 2的动作类中获取变量的值到Jsp的文本字段中？

> ID：13911227
> 
> 赞同：0
> 
> 时间：2012-12-17T09:14:44.377
> 
> 标签：jsp, struts2

我的动作课看起来像这样

```
class My action class {

  public String getvariable() {
    return variable;
  }

  public void setvariable(String variable) {
    this.variable = variable;
  }

  public dosubmit(){
    variable=service.getvariable();
    return "success";
  }
} 
```

通过使用 struts 的这个属性标记，我能够在 JSP 中获取变量的值。

但我想要 JSP 的文本字段中的值。我怎样才能做到这一点？

如何在下一个 jsp 文件中的 jsp 变量中获取此变量值，以便我可以操纵此值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:47:30.747

为变量创建 Getter 和 Setter，并在 JSP 中赋予相同的名称。U 将获得变量的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:35:03.740

您可以使用标签的`value`属性来预设值。`<s:textfield>`

```
<s:textfield name="some_name" value="%{variable}"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T13:34:09.460

在 Struts UI 标签中，`name`attribute 用于在提交值时匹配 Setter 对象，而`value`attribute 用于为对象预设任意值，可以（但不是必须）是您的变量值。

这个

```
<s:textfield name="variable" value="%{variable}"/> 
```

表示您预设了变量的值，发布时将设置为新的变量值。

请注意，您的操作在语法上是错误的；您必须将 CamelCase 用于 getter 和 setter（以及方法和变量名称等），如下所示：

```
public class MyAction class {

  private String variable;

  public String getVariable() { 
    return variable;
  }

  public void setVariable(String variable) {
    this.variable = variable;
  }

  public doSubmit(){
    variable=service.getVariable();
    return "success";
  }
} 
```

否则您将无法从 OGNL 获取值。

# iframe - 从 iframe 中的 bean 类获取 src 值（对话框未更新）

> ID：13911228
> 
> 赞同：0
> 
> 时间：2012-12-17T09:14:48.133
> 
> 标签：iframe, primefaces

我的代码如下：

```
<p:commandButton value="test" action="#{myProgram1.test1}" oncomplete="ex2.show()"/>

<p:dialog id="dialog2"  widgetVar="ex2"   onShow="jQuery('#someId').show();">
            <iframe frameborder="0" align="left"
                    src="#{myProgram1.url}"
                    name="someName" id="someId" scrolling="auto" width="750"
                    height="500">
            </iframe>
</p:dialog> 
```

我在 test1 方法中设置了 url 的值。但它不是从 bean 类加载 url。但是，如果我指定特定的 url，那么它正在打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:14:35.073

添加`update="dialog2"`到您的`<p:commandButton`

所以它看起来像这样：

```
<p:commandButton value="test" update="dialog2" 
     action="#{myProgram1.test1}" oncomplete="ex2.show()"/> 
```

# symfony - Symfony 2 在集合字段实体上设置默认值

> ID：13911230
> 
> 赞同：1
> 
> 时间：2012-12-17T09:15:00.833
> 
> 标签：symfony, symfony-2.1, symfony-forms

我有这两种形式：

编辑匹配实体的阵容字段的阵容表单

```
<?php

namespace Acme\MatchBundle\Form\Type;

use Acme\UserBundle\Entity\UserRepository;
use Acme\TeamBundle\Entity\TeamRepository;
use Acme\ApiBundle\Listener\PatchSubscriber;
use Acme\CoreBundle\Form\DataTransformer\TimestampToDateTimeTransformer;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class LineupsType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('lineups', 'collection', array(
                'type'         => new LineupType(),
                'allow_add'    => true,
                'allow_delete' => false
            ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'        => 'Acme\MatchBundle\Entity\Match',
            'csrf_protection'   => false
        ));
    }

    public function getName()
    {
        return 'match';
    }
} 
```

创建/编辑阵容实体的阵容表格

```
<?php

namespace Acme\MatchBundle\Form\Type;

use Acme\PlayerBundle\Entity\PlayerRepository;
use Acme\ApiBundle\Listener\PatchSubscriber;
use Acme\CoreBundle\Form\DataTransformer\TimestampToDateTimeTransformer;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class LineupType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('player', 'entity', array(
                'class' => 'AcmePlayerBundle:Player',
                'property' => 'id',
                'query_builder' => function(PlayerRepository $er) {
                        $query = $er->createQueryBuilder('p');
                        return $query;
                    }
                ))
                ->add('status', 'text')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class'        => 'Acme\MatchBundle\Entity\Lineup',
            'csrf_protection'   => false
        ));
    }

    public function getName()
    {
        return 'match';
    }
} 
```

阵容实体字段

```
/**
 * @var Match $match
 *
 * @ORM\ManyToOne(targetEntity="Match", inversedBy="lineups")
 * @Assert\NotBlank()
 */
private $match;

/**
 * @var \Acme\PlayerBundle\Entity\Player $player
 *
 * @ORM\ManyToOne(targetEntity="Acme\PlayerBundle\Entity\Player", inversedBy="lineups")
 * @Assert\NotBlank()
 */
private $player;

/**
 * @var string
 *
 * @ORM\Column(name="status", type="string", length=16)
 * @Assert\NotBlank()
 */
private $status; 
```

现在我已经成功地将 Lineup 实体添加/删除到 lineups 字段，我想要将 lineup 实体的 $match 字段设置为使用 lineups 表单编辑的匹配。

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:23:56.097

我自己发现绑定到 BIND 表单事件让我可以做我需要的事情：

```
$builder->addEventListener(
    FormEvents::BIND,
    function (FormEvent $event) {
        $data = $event->getData();
        $lineups = $data->getLineups();
        foreach ($lineups as &$lineup) {
            $lineup->setMatch($data);
        }
        $event->setData($data);
    }
); 
```

哪个工作正常；）

# qt - 如何在 Qmenu 中添加关闭按钮？

> ID：13911234
> 
> 赞同：-2
> 
> 时间：2012-12-17T09:15:12.537
> 
> 标签：qt, qt4, qt-creator

如何在下面的菜单顶部添加关闭按钮？

我想要一个像 windows 一样的关闭按钮，在它下面我需要下面提到的 A 到 D 设置菜单。这个怎么做 ？

```
void MyMenu::cppSlot()
    {
        xmenumain = new QMenu;
        xmenumain->
        xmenumain->addAction ( "A -> Setup" , this , SLOT (call_a()) );
        xmenumain->addAction ( "B -> Setup" , this , SLOT (call_b()) );
        xmenumain->addAction ( "C -> Setup" , this , SLOT (call_c()) );
        xmenumain->addAction ( "D -> Setup" , this , SLOT (call_d()) );
        xmenumain->popup( QCursor::pos() );
        //Change font and width
        xmenumain->setFont(QFont ("Courier", 10));
        xmenumain->setFixedWidth(250);
        //Colour setting
        QPalette palette=xmenumain->palette();
        palette.setColor(QPalette::Background, Qt::darkGray);
        xmenumain->setPalette(palette);

        //xmenumain->setAutoFillBackground(true);

        // Align the menu coordinates
        xmenumain->move(900,300);
        xmenumain->show();
        /*if(!(xmenumain->isEnabled()))
        {
            xmenumain->show();
        }*/
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:08:31.593

首先，创建一个`QWidgetAction`. 然后创建一个按钮，按照您想要的方式进行设置，然后将其添加到`QWidgetAction`with 中`QWidgetAction::setDefaultWidget()`。最后，将 QWidgetAction 添加到您的菜单中（采用;`QMenu::AddAction()`的重载派生自。）`QAction``QWidgetAction``QAction`

# java - 如何使用谷歌应用引擎（JAVA）中的复选框删除多个数据

> ID：13911239
> 
> 赞同：1
> 
> 时间：2012-12-17T09:15:43.563
> 
> 标签：java, google-app-engine

在 Google 应用引擎中，如何删除复选框中选中的多个数据。对于一个样本，我附上了下面的图片。在这里，我选择了多个复选框，显示的数据存储在 Google 应用引擎中。

![示例复选框](../Images/3d73bc8cd57e5fbf33be7774e4c8fc19.png)

我有这样的复选框的jsp代码，

```
<input name="delete" type="checkbox"/> 
```

谁能建议我如何选择数据并将其从 Google 应用引擎中删除。

**编辑：** 为了存储我使用的数据，

```
 DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
 Entity employee = new Entity("Employee");
 employee.setProperty("First Name", fname);
 datastore.put(employee); 
```

为了检索我使用的数据，

```
 Query query = new Query("Employee");
 List<Entity> emp = datastore.prepare(query).asList(FetchOptions.Builder.withLimit(20));
 for (Entity user : emp){
 // inside the table 
  user.getProperty("File Name")} 
```

通过这个我可以检索数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T16:09:58.003

首先，我建议你使用两个框架来让你的生活更轻松：

*   [条纹](http://www.stripesframework.org/display/stripes/Home)
*   [客观化](http://code.google.com/p/objectify-appengine/)

好的，你去吧：我不确定你的问题在多大程度上是基本的 JSP/Servlet 问题或特定的 Appengine 问题。但是，您必须执行以下操作：

*   在您的 JSP 页面上有一个复选框列表，如下所示：（`<stripes:checkbox name="employees[${loop.index}].id" value="${employee.id}"/>`参见： http: [//www.stripesframework.org/display/stripes/Indexed+Properties](http://www.stripesframework.org/display/stripes/Indexed+Properties)）
*   将 ID 列表（应删除的实体）传递给 Servlet。
*   根据这些 ID 删除实体。
*   这里有一个问题：Appengine 可以在删除所有实体之前终止请求。如果请求花费的时间太长，就会发生这种情况。因此，您应该使用数据块异步删除实体。有关更多信息，请参阅[此答案](https://stackoverflow.com/a/1882697/1277252)。

# linux - 替换每个文件中的许可证通知

> ID：13911240
> 
> 赞同：0
> 
> 时间：2012-12-17T09:15:48.293
> 
> 标签：linux, unix, sed, awk, replace

我想在一个相对较大的项目的每个文件的顶部替换多行许可通知（从[GNU GPL](http://www.gnu.org/licenses/gpl-3.0.txt)到[Apache 2.0 ）。](http://www.apache.org/licenses/LICENSE-2.0.txt)许可通知由几段组成。另一个要求是目标许可证通知中有一个取决于当前文件名的占位符，因此简单的查找和替换是不够的。

我熟悉这样做：

```
find . -name "*.java" -exec sed -i 's/find/replace/g' {} \; 
```

但我看不出如何使它适用于这个用例。

更新：

目标 Apache 2.0 许可证的占位符如下所示：

```
Copyright [yyyy] [name of copyright owner]
[filename.java] <br/><br/>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at<br/><br/>

http://www.apache.org/licenses/LICENSE-2.0<br/><br/>

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:23:09.530

我知道 clicki-buntis 并不总是更好，但对于这种情况，我使用“kfilereplace”。它是为此目的而设计的 kde 工具。它允许您设置正则表达式并运行模拟通行证。这样，您可以首先测试您的设置，然后进行“实时”替换。

对于占位符：

*   进行两次更换，分别更换占位符之前和之后的部分。这样你只需要替换两个静态字符串，没有动态的。
*   使用许多正则表达式替换函数提供的占位符替换策略来接管要替换的文本的动态占位符部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:28:27.270

使用以下`sed`命令删除以 开头`start_pattern`和结尾的行`end_pattern`：

```
sed -n '/start_pattern/{:a;N;/end_pattern/!ba;N;s/.*\n//};p' file 
```

例如，要删除 GNU GPL 许可证，您可以使用：

```
sed -n '/GNU GENERAL PUBLIC LICENSE/{:a;N;/why-not-lgpl.html\>./!ba;N;s/.*\n//};p' file 
```

要在多个文件上运行它，请使用`find`with `xargs`：

```
find . -name "*.java" -print0 | xargs -0 sed -i -n '/GNU GENERAL PUBLIC LICENSE/{:a;N;/why-not-lgpl.html\>./!ba;N;s/.*\n//};p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:42:38.753

珀尔：

```
# First, get the text for the Apache license, stick it in a shell variable:
export APACHE="$(curl -s http://www.apache.org/licenses/LICENSE-2.0.txt)"

# For a single file:
perl -p -i -e 'BEGIN{undef $/} 
  s#GNU GENERAL PUBLIC LICENSE.*<http://www.gnu.org/philosophy/why-not-lgpl.html>.# Copyright... [$ARGV] <br/> ... $ENV{APACHE}#smg' A.java 
```

注意事项：

1.  在 Perl 中，`$ARGV`包含文件名（当前正在处理的输入文件的）

我想您可以使用`find`with`xargs`递归地执行此操作。

```
find . -name "*.java" | xargs -l1 perl .... 
```

# javascript - 我如何能够比较 JS 中的未定义？

> ID：13911245
> 
> 赞同：2
> 
> 时间：2012-12-17T09:16:02.270
> 
> 标签：javascript

嗨，我对 JS 很陌生。

假设我有一个名为的对象`test`，它没有属性`missing`。但我尝试访问相同的：

```
test.missing //getting undefined as output 
```

现在我正在尝试访问`missing`属性（像这样`test.missing.404`），这会给我一个`TypeError`. 但是我的书说我们可以这样摆脱`TypeError`它：

```
test.missing && test.missing.404 
```

现在我的大问题是如何`&&`针对`undefined`类型和`TypeError`类型进行操作。无法猜测 Js 在这里做什么。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:19:36.020

`undefined`在 js 中被视为`false`，如果某物具有价值，则被视为`true`，因此：

```
//if test.missing is NOT undefined and test.missing.404 is also NOT undefined
if (test.missing && test.missing.404) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:29:10.337

首先你应该知道，JS 像许多其他编程语言一样在比较过程中使用短路技术。因此，在这种情况下，如果第一个条件为假，则无需检查下一个条件。这是因为`0 && X` 总是会导致 0 。

话虽如此，`test.missing && test.missing.404`可以理解为“如果测试对象缺少属性并且（测试对象的）缺少属性具有 404 属性”然后继续。如果测试对象首先没有缺失属性，那么 JS 解释器将完全忽略对缺失属性的 404 属性检查。

所以重点是上面的代码不是 && undefined 和 TypeError 的比较，而是首先检查缺少的属性，如果第一个属性存在，则检查 404 属性。我希望这是有道理的，广告可以很好地解释它。

# javascript - 如何从 yyyymmddhhiiss 创建 JavaScript 日期对象？

> ID：13911247
> 
> 赞同：0
> 
> 时间：2012-12-17T09:16:16.207
> 
> 标签：javascript, parsing, date, coffeescript

我有一个这样的字符串

```
date = '20121217030810' 
```

我需要创建一个`Date`对象。

到目前为止，我正在尝试这个

```
# coffeescript
if (m = /^(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})$/.exec date)
  date = new Date("#{m[1]}-#{m[2]}-#{m[3]} #{m[4]}:#{m[5]}:#{m[6]}")
  #=> Mon Dec 17 2012 03:08:10 GMT-0600 (CST) 
```

我只是觉得有更好的方法！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:57:17.137

比正则表达式更好的方法？不，也许除了手动字符串拆分。

但是对于 Date 创建，您应该使用

```
new Date(Date.UTC(+m[1], m[2]-1, +m[3], +m[4], +m[5], +m[6])) 
```

加点咖啡糖，你也可以

```
m[2] -= 1
new Date(Date.UTC(m.slice(1)...)) 
```

# java - Watir-webdriver 结合 java

> ID：13911252
> 
> 赞同：4
> 
> 时间：2012-12-17T09:16:25.823
> 
> 标签：java, ruby, jruby, watir, watir-webdriver

是否可以在 jUnit 测试用例中将 watir-webdriver 与 java 结合使用？我必须执行一些 java 方法来处理 DB 中的数据，以便模拟不同的情况并使用 watir-webdriver 测试网站 UI？

我已经编写了 jUnit 测试用例，我想在其中为 UI 测试的场景实现 watir-webdriver。

我已经阅读了 jruby ，它允许在 java 代码中实现 ruby​​ 方法，反之亦然，但找不到任何现实生活中的示例如何将 watir webdriver 实现到 junit 测试用例中。

请分享您的经验！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:57:40.817

而不是搜索 Watir 是否适用于 JRuby，您可以像我一样尝试一下：

```
$ ruby -v
jruby 1.7.1 (1.9.3p327) 2012-12-03 30a153b on Java HotSpot(TM) 64-Bit Server VM 1.6.0_37-b06-434-11M3909 [darwin-x86_64]

$ gem install watir
...
Successfully installed watir-4.0.2

$ irb

> require "watir"
=> true

> browser = Watir::Browser.new :firefox
=> #<Watir::Browser:0x4fcd5906 url="about:blank" title="">

> browser.goto "google.com"
=> "http://www.google.hr/" 
```

如果不清楚，Watir 在 JRuby 上工作得很好。

# microsoft-metro - 在 Metro 应用程序中提供 Google 登录，避免重复授予权限（Oauth2/Google OpenID）

> ID：13911255
> 
> 赞同：0
> 
> 时间：2012-12-17T09:16:38.217
> 
> 标签：microsoft-metro, openid, google-openid, google-oauth

我有以下情况：

我目前正在尝试编写一个 Metro 风格的应用程序，它能够让用户使用他的 Google 帐户登录，并且应用程序请求多个权限，如 Userinfo.profile 和 Userinfo.email。

为此，我目前正在使用 OAuthv2，并且请求细节效果很好（经过相当多的努力和研究）。

***使用的网址：***

```
const string url = "https://accounts.google.com/o/oauth2/auth?" +
                   "client_id=" + clientId +
                   "&redirect_uri=" + "urn:ietf:wg:oauth:2.0:oob" +
                   "&response_type=code" +
                   "&scope=https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/userinfo.email" +
                   "&access_type=offline"; 
```

现在的问题是，如果我希望用户保持身份验证，我要么必须通过用户在客户端保存令牌来做到这一点，要么找到使用谷歌登录的某种方式，保持会话并检查是否他已通过身份验证。

问题是，我不知道如何执行后者，也不知道如何使用它。目前，每次我打开应用程序时，用户都会被重定向到谷歌授权页面，整个过程在每次重新启动时一遍又一遍地开始。

我想要完成的是，如果用户登录，我有某种方式来识别他，而不是总是通过重新请求给定详细信息的权限来给他带来负担。

我调查了[OpenID](https://developers.google.com/accounts/docs/OpenID?hl=nl)，但我总是得到

```
<?xml version="1.0" encoding="UTF-8"?>
<xrds:XRDS xmlns:xrds="xri://$xrds" xmlns="xri://$xrd*($v*2.0)">
<XRD>
<Service priority="0">
<Type>http://specs.openid.net/auth/2.0/server</Type>
<Type>http://openid.net/srv/ax/1.0</Type>
<Type>http://specs.openid.net/extensions/ui/1.0/mode/popup</Type>
<Type>http://specs.openid.net/extensions/ui/1.0/icon</Type>
<Type>http://specs.openid.net/extensions/pape/1.0</Type>
<URI>https://www.google.com/accounts/o8/ud</URI>
</Service>
</XRD>
</xrds:XRDS> 
```

作为对此网址的回应：

```
https://www.google.com/accounts/o8/id?openid.mode=checkid_setup&openid.ns=http://specs.openid.net/auth/2.0&openid.return_to=urn:ietf:wg:oauth:2.0:oob&openid.ns.ui=http://specs.openid.net/extensions/ui/1.0&openid.ns.ax=http://openid.net/srv/ax/1.0&openid.ax.mode=fetch_request&openid.ax.required=email,firstname,language,lastname,country&openid.ns.ext=http://specs.openid.net/extensions/oauth/1.0&openid.ext2.consumer=https://www.google.com/accounts/o8/ud?openid.mode=checkid_setup&openid.ns=http://specs.openid.net/auth/2.0&openid.return_to=urn:ietf:wg:oauth:2.0:oob&openid.ext2.scope=https://www.googleapis.com/auth/userinfo.profile+https://www.googleapis.com/auth/userinfo.email 
```

我建错了吗？

如果有任何建议，关于如何“正确”执行此操作，我正在尝试完成什么（与谷歌集成，允许用户使用谷歌电子邮件登录，并且***只有***在他**没有**授权应用程序的情况下，请他这样做，再加上在第二次以上登录时找到他是谁的方式），或者我如何做到这一点，请随意。

此外，通过使用 .Net 4.5 框架的精简版本，我似乎无法使用 OpenID 库，因为它们依赖于完整的 4.5 。

****编辑****看看[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/jj856915.aspx)这会出现：

```
To support SSO, the online provider must allow you to register a redirect URI in the form ms-app://appSID, where appSID is the SID for your app. 
```

这是否意味着不可能？因为在谷歌我只能请求一个域的密钥`http(s)://`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:46:16.760

你看过这个吗？[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

看起来您正在使用 Webserver 流程​​并请求离线访问。交换代码后，这应该会给您一个刷新令牌。在您的应用程序中保留此令牌。如果您也进行了登录授权，您将获得一个令牌，您可以使用它来获取 Google 用户的用户 ID

如果您有特定用户的有效刷新令牌，您的应用程序应该跟踪。然后使用该令牌获取当前凭据。您可以使用 tokeninfo enpoint 来验证令牌。如果您有用户的有效令牌，则无需通过代码流向他们发送以获取另一个刷新令牌。

如果您使用 tokeninfo 端点，则仅当访问令牌请求中存在[https://www.googleapis.com/auth/userinfo.profile范围时，才会出现 userid 字段。](https://www.googleapis.com/auth/userinfo.profile)此字段的值是登录用户的不可变标识符。存储这个，你应该有一个持久的用户标识符。

# facebook - Facebook 提要对话框 - 如何自动放置状态

> ID：13911259
> 
> 赞同：1
> 
> 时间：2012-12-17T09:16:47.150
> 
> 标签：facebook, dialog, feed, status

我已经使用 javascript 代码来开发 facebook feed 对话框并且它工作得很好。

但我也想自动填写“在这里说点什么..”字段，该字段出现在弹出窗口中。

我不知道该怎么做。我已经检查了 facebook 提要对话框文档，但还没有找到任何相关的东西。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:55:11.853

*   （不再）填写消息字段是不可能的，至少在 JavaScript SDK 中是不可能的。任何消息参数都将被忽略。
*   如果您使用 PHP SDK（请参阅 Facebook 条款），则消息字段必须始终填写用户 100% 生成的内容。

> [https://developers.facebook.com/policy/](https://developers.facebook.com/policy/)（见 IV.2）

请记住，这是“个人信息”，而不是您将/应该使用应用程序创建的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T09:09:40.417

您通过自动预填充消息字段违反了 facebook 政策。•你应该检查这个链接。 [https://developers.facebook.com/docs/apps/review/prefill](https://developers.facebook.com/docs/apps/review/prefill)

# php - MySQL 将 3 个表合并为 1 个

> ID：13911260
> 
> 赞同：0
> 
> 时间：2012-12-17T09:16:50.603
> 
> 标签：php, mysql, search, join

我在 PHP 中创建了一个搜索框并使用 MySQL 作为数据库，但是在搜索时有 3 个表，颜色、产品和类别，它们都有一个 ID 号并且可以链接。我曾尝试在任何地方使用 INNER JOIN、LEFT、RIGHT，但没有运气，查询有时会起作用，吐出多个项目。因此，我正在考虑创建一个通用的场景，其中所有表字段名称都将在一个表中，我可以轻松地查询该表。我已经手动创建了表，但是无论如何将 3 个表中的数据处理到那个主表中？如果它是一个只处理一个表的查询，我不介意单独执行它，但我希望不必手动输入所有数据，因为有 600 多行。

这是我目前正在尝试使用的代码：

```
SELECT
    categories.Product_Type, items_colors.ColourImageurl,
    items_list.description,  items_list.Description2,
    items_list.title, items_list.id, categories.title AS title2,
    items_colors.itemID, Colour Name
FROM items_list
    LEFT JOIN categories ON categories.Product_Type = items_list.CatID
    LEFT JOIN items_colors ON items_list.id = items_colors.itemID
WHERE items_list.visible = 1 AND
    Colour Name LIKE '%".$search."%' 
```

类别定义您选择的产品类型，items_list 包含所有子类别名称的列表，item_colors 包含链接到 items_list 产品的所有颜色名称的列表。当我使用这个查询时，它会输出一个项目的 4 个副本，我不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:23:41.053

如果您从查询中获取数据，您可以使用“create table as select”语句来创建新表，其中包含旧表中的数据。

```
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    [(create_definition,...)]
    [table_options]
    [partition_options]
    select_statement 
```

在这里查看更多信息：[http ://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

# android - 如何在 XML 布局中添加片段

> ID：13911261
> 
> 赞同：75
> 
> 时间：2012-12-17T09:16:50.823
> 
> 标签：android, fragment

我有一个包含如下片段的布局：

```
<fragment
        android:id="@+id/mainImagesList"
        android:name="com.guc.project.ImagesList"
        android:layout_width="match_parent"
        android:layout_height="62dp"
        android:layout_below="@+id/addimagebutton"
        android:layout_weight="1"
        android:paddingTop="55dp" /> 
```

现在，我需要获取这个片段并投射它，以便我可以操纵它并显示更新。我怎么能这样做？！

编辑：我想我已经设法得到了片段，但是当我改变一些变量时，改变不会出现！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2014-05-11T13:06:47.313

您可以按如下方式获取片段实例：

```
getSupportFragmentManager().findFragmentById(R.id.yourFragmentId) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-14T03:03:10.400

如果片段嵌入在另一个片段中，则需要`getChildFragmentManager()`但不需要`getFragmentManager()`. 例如，在布局 xml 中定义片段如下：

```
<fragment 
    android:name="com.aventlabs.ChatFragment"
    android:id="@+id/chatfragment"
    android:background="#ffffff"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:layout_marginTop="50dp"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp" /> 
```

在代码中，您可以像这样获取片段实例：

```
FragmentManager f = getChildFragmentManager();
FragmentTransaction transaction = f.beginTransaction();
chatFragment = f.findFragmentById(R.id.chatfragment);

if (chatFragment != null) {
   transaction.hide(chatFragment);
}
transaction.commit(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T09:44:05.803

我在 android 中做了完全相同的事情，并且在使用接口时最简单的方法是这样做的。我有一个包含 6 个片段的活动，我只需要更新其中的 3 个。

我用这个

```
 final Integer numeroFragments = ((PagerAdapterOfe) mViewPager.getAdapter()).getCount();

    for (int i=0; i<numeroFragments; i++) {
        Object fragment = ((PagerAdapterOfe) mViewPager.getAdapter()).getItem(i);

        // If the fragment implement my interface, update the list
        if (fragment instanceof IOfertaFragment){
        ((IOfertaFragment) fragment).actualizaListaOfertas();
        }
    } 
```

其中，PageAdapterOfe 是我的活动片段适配器。我循环所有片段并搜索那些实现我的接口的片段，当我找到一个时，我执行我的接口定义的方法，那就是！

我在包含所有片段的活动中使用此代码，作为对广播信号的响应，您可以将其放在您需要的地方。

界面：

```
public interface IOfertaFragment {

    public void actualizaListaOfertas();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T09:27:07.107

您可以使用 findFragmentById （如果您知道它包含的组件）或 findFragmentByTag （如果您知道它的标签）找到片段

我不知道您要更新哪些变量，但您可以使用 FragmentTransaction API 将片段替换为另一个片段。

有关示例，请参见[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-15T09:28:42.000

If Fragment is included inside the layout file of **Activity** then it can be referenced by SupportFragmentManager like...

```
MyFragment myFragment= (MyFragment)getSupportFragmentManager().findFragmentById(R.id.FRAGMENTID) 
```

If Fragment is included inside the layout file of another **Fragment** then it can be referenced by ChildFragmentManager like...

```
 MyFragment myFragment= (MyFragment)getChildFragmentManager().findFragmentById(R.id.FRAGMENTID) 
```

# ruby - 对于使用 Redis 的 Ruby on rails 应用程序，我们是否需要任何 database.yml 文件

> ID：13911263
> 
> 赞同：4
> 
> 时间：2012-12-17T09:16:57.030
> 
> 标签：ruby, ruby-on-rails-3.2, redis

我创建了一个没有活动记录的 Ruby on Rails 应用程序：-

```
$ rails new rails_using_redis_demo_app --skip-active-record 
```

现在为了执行数据库操作，我必须包含 database.yml 文件，其中包含有关数据库适配器的必要详细信息。

我的 gemfile 中还包含以下内容：-

```
gem 'redis' 
```

我还发现 redis 实际上将数据存储在带有键值对的 .rdb 文件中，可以借助存在的键来访问该文件。我是否以正确的方式做事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:31:00.413

您是否在 Rails 配置文件中删除了所有 ActiveRecord 事件？

也许你应该检查你的 application.rb 文件。

一个典型的 application.rb 文件包括

```
require 'rails/all' 
```

那是您应该编写的内容以完全删除 ActiveRecord

```
# Pick the frameworks you want:
# require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
# require "rails/test_unit/railtie" 
```

希望有帮助...

# java - 关于可见性的 Java 并发问题

> ID：13911264
> 
> 赞同：1
> 
> 时间：2012-12-17T09:16:58.150
> 
> 标签：java, multithreading

我读到该`synchronized`方法或块提供了两个功能：“互斥”和“可见性”。我想知道两件事。

```
public class A{

  private final Object lock = new Object();
  private C obj = new C();

  public void methodA(){

      synchronized(lock){
        obj.x = 1;
        obj.y=3;
       }
    }

public void methodB(C obj2){

          synchronized(lock){
           obj2.x = obj.x;
           }

}

} 
```

假设我们有 2 个线程调用`methodA`类型为 的全局共享对象`A`，并且 由`lock`获取`thread1`，现在在`thread1`释放`lock`. 现在可见性是所有其他线程将读取更改`obj`？即块内的每一个变化`synchronized`都是可见的吗？或者我应该更改 C 对象以`volatile`使其更改对其他人可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:19:14.363

Making`obj` `volatile`将*引用*C 对象`volatile`。即在同步块之外可见。它不会影响该对象的成员。

即对 obj 的重新分配将对另一个线程可见。不会对其成员进行重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:19:21.393

> 同步块内的所有变化都是可见的吗？

是的，就是这样。[JLS 17.45](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5)定义发生在关系之前。尤其是：

> *监视器上的解锁发生在该监视器上的每个后续锁定之前。*

因此，当 thread2 获得锁时，您可以保证它会在持有相同锁的同时看到 thread1 所做的更改。

> 我应该将 C 对象更改为 volatile 以使其对其他人可见吗？

volatile 保证如果你在`obj = new C();`某处写： 后续读取`obj`将看到它现在指的是一个新对象。但是，它不提供关于 obj 的“内容”的任何此类保证。因此，如果您编写: `obj.x = someValue;`，并且 obj 是易失的，您不能保证更改将对另一个线程可见。除非你也变得`x`易变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:21:48.390

> now the visibility is that all other thread will read the changes to obj ?

Only threads inside a synchronized block for that lock.

> is every thing change inside the synchronized block will be visibile ?

Only probably. For guarenteed visibility the thread has to be inside a synchronized block.

> or i should change C object to volatile ?

It will not help if you didn't have synchronized and will not make any difference here. `volatile` will only changes the behaviour of the `obj` reference, not it's fields.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:20:38.370

No, accessing to `obj` fields is still not thread-safe. Synchronization on the lock object only allows you thread-safe operations for writing values to `obj`'s fields in this block.

**UPD**: `volatile` for `obj` will not help you, because you don't change this field's own reference value.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T09:23:38.777

要回答您的问题，另一种方法可以简单地让您访问变量 obj，而无需锁定。您必须确保对 obj 的所有访问都必须通过锁小心地保护，以便 obj 不会处于不一致的状态（如程序员所定义的那样）。

在您的特定示例中，它对我来说看起来足够一致。

# transformation - 模型的知名示例有哪些？

> ID：13911265
> 
> 赞同：1
> 
> 时间：2012-12-17T09:16:58.963
> 
> 标签：transformation, modeling

我目前正在写一篇关于模型 2 模型转换的博客文章。我想在这篇文章中简要解释一下什么是模型 2 模型转换。因此，我想提出两个模型的简单示例，其中第一个被转换为第二个的实例。这两种模型应该是开发者所熟知的，所以我不需要解释它们。

但是我想不出一些示例模型。[ATL在](http://www.eclipse.org/atl/)[他们的一个教程](http://wiki.eclipse.org/ATL/Tutorials_-_Create_a_simple_ATL_transformation)中使用了家庭和个人模型，但我认为它们也需要额外的解释。

那么你知道我可以使用的一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:37:51.410

如果您想向开发人员解释 m2m，您可以使用从 petri 网到 uml 活动图的 M2M-trafo。因为活动图是基于 Petri 网的，所以它不应该太复杂。我认为开发人员应该知道这两种模型。当然，它们并不容易，但开发人员应该了解它们。

*   [http://en.wikipedia.org/wiki/Petri_net](http://en.wikipedia.org/wiki/Petri_net)
*   [http://en.wikipedia.org/wiki/Activity_diagram](http://en.wikipedia.org/wiki/Activity_diagram)

当然，您应该尽可能简单。这意味着您应该只描述建模可能性子集的转换。对于 petri 网，我只会使用简单的状态和转换作为元模型的子集。对于活动图，我只会使用动作和转换。

应该已经有这种转换的现有示例，因此您也可以使用现有知识。

我想指出的另一件事是，学习 M2M-trafo 的人了解 M2M-trafos 的用途。因为上面描述的这种情况可以在实践中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:58:57.147

我在我的博文中选择了对象关系映射 (ORM) 作为示例。ORM 可以看作是从关系数据库模型到内存模型中的面向对象的双向转换。

大多数（每个）开发人员都应该了解 ORM。但问题可能在于，这可能会导致开发人员从 Hibernate、JPA 等方面考虑 m2m，但事实并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T08:34:21.010

例如，您可以考虑从一种语言翻译成另一种语言。有一个从[UML 到 OWL](http://www.eclipse.org/atl/usecases/ODMImplementation/)的翻译示例。

# android - 在 Android 中设置数据库

> ID：13911268
> 
> 赞同：1
> 
> 时间：2012-12-17T09:17:13.057
> 
> 标签：android, sqlite

Android 官方开发者网站首先提到我们必须首先“定义架构和契约”，它是这样的：

```
public static abstract class FeedEntry implements BaseColumns {
public static final String TABLE_NAME = "entry";
public static final String COLUMN_NAME_ENTRY_ID = "entryid";
public static final String COLUMN_NAME_TITLE = "title";
public static final String COLUMN_NAME_SUBTITLE = "subtitle";
... 
```

}

提到的第二步是“使用 SQL 助手创建数据库”。

但是我在网上看到的所有教程都直接使用'helper'创建了一个类；例如. [_](http://www.codeproject.com/Articles/119293/Using-SQLite-Database-with-Android) **哪个是正确的方法？两个都？**

另外，**我应该在主 Activity 中定义和创建我的数据库还是为数据库创建一个单独的 Activity？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:29:32.760

在 SQLite 浏览器（如 SQLite Maestro）中创建数据库，将数据库复制到项目的 assets 文件夹中。在您的 MainActivity 中调用`createDatabase()`方法（这是您的应用程序中的第一个，启动器活动）。

```
private void createDataBase(){
    DataBaseHelper db = new DataBaseHelper(this);
    try {
        db.createDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }finally{
        db.close();
    }
} 
```

和助手类：

```
public class DataBaseHelper extends SQLiteOpenHelper{   

    private static String DB_PATH = "/data/data/your.package/databases/";   
    private static String DB_NAME = "YourDataBaseName.sqlite";
    private static int DB_VERSION = 1;

    private static short WRITE_BUFFER_SIZE = 8192;

    private Context context;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context Current application context
     */
    public DataBaseHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);

        this.context = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public synchronized void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }
        else
        {
            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getWritableDatabase();

            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }

        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;

            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        }catch(SQLException e){
            e.printStackTrace();
            //database does't exist yet.
        }catch(Exception e){
            e.printStackTrace();
        }

        if(checkDB != null){
            if(checkDB.getVersion() < DB_VERSION){
                checkDB.close();
                return false;
            }else{ 
                checkDB.close();
                return true;
            }
        }

        return false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     */
    private void copyDataBase() throws IOException{     
        //Open your local db as the input stream    
        InputStream myInput = context.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[WRITE_BUFFER_SIZE];
        int length;
        while ((length = myInput.read(buffer)) > 0){
            myOutput.write(buffer, 0, length);
        }
        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
        this.getWritableDatabase().close();
    }

    @Override
    public synchronized void close() {
            super.close();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

    @Override
    public void onCreate(SQLiteDatabase db) {   
    }

    /**
     * Delete database and create new one or copy from assets if exists.
     */
    public void clearDatabase(){      
        context.deleteDatabase(DB_NAME);
        try {
            createDataBase();
        } catch (IOException e) {
            e.printStackTrace();
        }

        this.getWritableDatabase().close();
    }
} 
```

# connection - Socket.io 客户端在第一次尝试后无法连接

> ID：13911269
> 
> 赞同：4
> 
> 时间：2012-12-17T09:17:16.360
> 
> 标签：connection, client, socket.io

Socket.io 连接到 Java Netty 服务器。如果 socket.io 在服务器关闭时尝试连接服务器，则会出现 404。所以Javascript控制台说：

```
http://mylocalhost.com/socket.io/1/?t=1354790544338 - Failed to load resource 
```

在此之后，socket.io 连接完全断开。由于 404，它不会尝试再次连接...

我该如何处理？我尝试设置一个间隔，尝试每五秒连接一次，使服务器联机，但由于该错误，它不会尝试连接。

页面重新加载后，它可以正常工作。socket.io 中有没有办法观察服务器何时再次在线然后连接到它？什么可能是适当的解决方案？

我已确保正确加载了 socket.io.js 客户端 javscript，并且我对正在发生的事情的理解是这样的：

1.  socket.io 开始握手，socket.socket.connecting 设置为 true
2.  [对http://mylocalhost.com/socket.io/1/?t=1354790544338](http://mylocalhost.com/socket.io/1/?t=1354790544338)的请求会导致 404，因为服务器已关闭
3.  这是一个错误，但 socket.socket.connecting 保持为真，这会导致下一次重新连接尝试失败，因为如果它认为它已经在尝试重新连接，它将不会尝试重新连接

我在`disconnect()`尝试重新连接之前尝试过调用，它将重新连接设置为 false，但是当没有连接的套接字并且我调用`disconnect()`时，它会抛出`"Cannot call method 'close' of undefined"`.

什么可能是一个正确的解决方案，让重新连接为假，有点“重置”socket.io 为下一次连接尝试做好准备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:55:48.223

为所有可能的`socket.io`客户端错误设置处理程序*似乎*为我解决了这个问题*。那包含着：

```
'connect_error'
'connect_timeout'
'reconnect_error'
'reconnect_failed'
'error' 
```

经过一番试验，“错误”处理程序似乎是防止 404 停止其他一切的重要处理程序。

*似乎已修复，因为我无法在本地测试设置中可靠地重现它。很高兴知道添加这些处理程序是否可以解决其他任何人的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T14:37:22.650

它尝试请求的 socket.io 文件包含要在 JS 中使用的实际脚本。此文件由您的 Java 服务器提供。因此，当您请求此文件时 - 它将无法加载，这就是您看到 404 错误的原因。

由于未加载文件，因此来自该文件的与套接字相关的任何内容都将不可用。因此，您想要尝试做的是在未加载脚本文件时捕捉场景。在这里检查：[异步加载脚本](https://stackoverflow.com/questions/7718935/load-scripts-asynchronously)

所以你必须尝试异步加载这个脚本，并在加载后检查状态。如果失败或没有及时响应 - 刷新请求句柄，并在延迟一段时间后再次请求。

文件加载成功后，就可以开始使用 JS 函数调用 connect 等了。

# oracle - MSMQ 与 Oracle 数据库集成

> ID：13911272
> 
> 赞同：2
> 
> 时间：2012-12-17T09:17:22.453
> 
> 标签：oracle, oracle11g

我有一个 WCF MSMQ 服务客户端应用程序。客户端将通过 MSMQ 通过 WCF 向服务发送数据。我尝试将应用程序与 oracle 数据库集成。当服务从客户端获取数据时，我希望服务立即将数据插入到 oracle 数据库中。有的数据可以插入成功，有的则失败并报错：

> ORA-24434: 在 OCIStmtPrepare2 之前调用 OCIStmtRelease。

我已经在谷歌上搜索了错误通知关键字，但我找不到解决我问题的解决方案。

# sql - JOIN 问题：更正 SQL 语句以解决：ORA-01799：列可能未外连接到子查询

> ID：13911273
> 
> 赞同：1
> 
> 时间：2012-12-17T09:17:23.657
> 
> 标签：sql, oracle, join, left-join

如下所示；我怎样才能实现 fx.ftf_validitystartdate= ... 这条线的价值，因为 oracle 不允许我在下面这样做。

```
 select * from  acc_accounts acc
    join kp_paramcore p on
    acc.account_no = p.accountnum
    acc.suffix = p.suffixc
         LEFT JOIN ftf_rates fx
              ON p.maturestart = fx.ftf_vadealtsinir
             AND p.maturefinish = fx.ftf_vadeustsinir
             AND fx.statusrec = 'A'
             AND fx.currencycode = acc.currencsw_kod
             AND fx.status= 'A' 
  and  fx.ftf_validitystartdate= (SELECT MAX(ff.ftf_validitystartdate)
                                               FROM ftf_rates ff
                                              WHERE ff.status = 'A'
                                                AND ff.statusrec = 'A'
                                                AND v_CurrentDate BETWEEN ff.systemstartdate AND ff.systemfinishdate                                            AND ff.currencycode = acc.currencsw_kod
    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T14:39:38.030

如果将其切换为`where`子句，它应该可以工作：

```
select *
from acc_accounts acc join
     kp_paramcore p
     on acc.account_no = p.accountnum and
        acc.suffix = p.suffixc LEFT JOIN
     ftf_rates fx
     ON p.maturestart = fx.ftf_vadealtsinir and
        p.maturefinish = fx.ftf_vadeustsinir and
        fx.statusrec = 'A' and
        fx.currencycode = acc.currencsw_kod and
        fx.status= 'A'
 where fx.ftf_validitystartdate= (SELECT MAX(ff.ftf_validitystartdate)
                                 FROM ftf_rates ff
                                 WHERE ff.status = 'A' and
                                       ff.statusrec = 'A'
                                       p.v_CurrentDate BETWEEN ff.systemstartdate AND ff.systemfinishdate                                            AND ff.currencycode = acc.currencsw_kod
                                ) 
```

但是，您失去了“左外连接”特征，因此您还需要添加： `or fx.ftf_validitystartdate is null`。我猜 v_CurrentDate 来自“p”。在列名之前使用表别名总是一个好主意。

但是，我质疑是否真的需要子查询。只有当子查询内部有多个满足条件的记录时才需要。否则，我认为您可以将`on`条款更改为：

```
 ON p.maturestart = fx.ftf_vadealtsinir and
       p.maturefinish = fx.ftf_vadeustsinir and
       fx.statusrec = 'A' and
       fx.currencycode = acc.currencsw_kod and
       fx.status= 'A'and
       p.v_CurrentDate BETWEEN fx.systemstartdate AND fx.systemfinishdate 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T20:34:57.570

我使用 CTE 发布了解决方法，并且仅在 Oracle 11g 中进行了测试。

[为了进行测试，我创建了这个模式](http://sqlfiddle.com/#!4/bd9cb/9/0)：

```
create table t_a ( a int );
create table t_b ( a int);
create table t_c ( a int);

insert into t_a values (1);
insert into t_a values (2);
insert into t_a values (3);

insert into t_b values (1);
insert into t_b values (2);
insert into t_b values (3);

insert into t_c values (1);
insert into t_c values (2);
insert into t_c values (3); 
```

此时我强制此查询出错：

```
select * 
from t_a
left outer join t_b
  on t_a.a = t_b.a and
     t_b.a = ( select max( a )
             from t_c); 
```

现在我用 CTE 重写查询：

```
with cte (a ) as (
   select a
   from t_b
   where t_b.a = ( select min( a )
             from t_c)
)
select * 
from t_a
left outer join cte
  on t_a.a = cte.a; 
```

第二个查询返回正确的结果。

我用 CTE 重写了您的查询：

```
with CTE as (
   select * from ftf_rates 
   where ftf_validitystartdate= (SELECT MAX(ff.ftf_validitystartdate)
                                 FROM ftf_rates ff
                                 WHERE ff.status = 'A'
                                      AND ff.statusrec = 'A'
                                      AND v_CurrentDate BETWEEN ff.systemstartdate 
                                      AND ff.systemfinishdate                   
                                      AND ff.currencycode = acc.currencsw_kod )

)
    select * from  acc_accounts acc
    join kp_paramcore p on
    acc.account_no = p.accountnum
    acc.suffix = p.suffixc
         LEFT JOIN CTE fx
              ON p.maturestart = fx.ftf_vadealtsinir
             AND p.maturefinish = fx.ftf_vadeustsinir
             AND fx.statusrec = 'A'
             AND fx.currencycode = acc.currencsw_kod
             AND fx.status= 'A' 
```

注意，仅在 Oracle 11g 中测试。见@a_horse_with_no_name 评论：

> @danihp：CTE 早在 Oracle 11g 之前就已经可用（我认为它们可能更早在 9.1 中引入 - 但它们肯定在 10.x 中可用）。11.2 引入了在这种情况下不需要的递归 CTE。——</p>

# css - 可以一个 标签中的标签？

> ID：13911274
> 
> 赞同：4
> 
> 时间：2012-12-17T09:17:32.943
> 
> 标签：css, html

> **可能重复：** [将 div 放入锚点是否正确？](https://stackoverflow.com/questions/1827965/is-putting-a-div-inside-an-anchor-ever-correct)

当我们编写某种“产品列表”时，您只需要一个链接，但它应该包含产品图像、产品名称、产品标题等。我们可以使用包含 p 或其他标签吗？有没有跨浏览器的问题？

听说在html5中，一个标签可以包含p标签，但是还是没有信心使用它。

一些像这样的代码：

```
<ul class="xxx_list">  
<li class="hproduct">  
    <a href="#" class="url" title="" target="_blank">  
        <img class="photo" src="shoujike.jpg" alt="手机壳">  
        <p>  
            <span class="price_wrap">&yen;<span class="price">88.00</span</span>  
            <span class="fav">收藏</span>  
        </p>  
        <p><a class="fn" href="">基本商品单元的商品名称&lt;/a></p>  
    </a>  
</li>  
</ul> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T09:21:46.737

In HTML 4.x (and earlier) and XHTML 1.x — No. `<a>` elements may not contain `<p>` elements.

In HTML 5 — `<a>` elements may contain `<p>` elements, but browsers are a bit flaky about it and you may find you have to explicitly set the `<a>` to `display: block` in your stylesheet.

The code in the question also includes an `<a>` inside that `<p>`. This is not allowed. An `<a>` element may not be a descendant of another `<a>` element.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T09:41:10.703

内部`a`标签可以是带有 default`display: inline`或的标签`inline-block`。`span`,`em`等标签`strong`。

你可以用一些类来改变你`p`的，`span`并用 CSS 为这个类编写一些样式。

PS：你不能`a`在里面使用`a`。

更新：

```
<ul class="xxx_list">  
    <li class="hproduct">  
        <a href="#" class="url" title="" target="_blank">  
            <img class="photo" src="shoujike.jpg" alt="手机壳">  
            <span class="some-class-name">  
                <span class="price_wrap">&yen;<span class="price">88.00</span</span>  
                <span class="fav">收藏</span>  
            </span>  
            <span class="fn">基本商品单元的商品名称&lt;/span>  
        </a>  
    </li>  
</ul> 
```

# php - TCPDF 字体切换

> ID：13911276
> 
> 赞同：0
> 
> 时间：2012-12-17T09:17:40.540
> 
> 标签：php, tcpdf

我一直在查看 TCPDF 文档（[http://www.tcpdf.org/doc/code/classTCPDF.html](http://www.tcpdf.org/doc/code/classTCPDF.html)），但在任何地方都找不到解决此问题的方法。

如何在 PDF 上输出混合字体的字符串？IE。假设我想输出“hello world”，但要使用一种字体输出“hello”，而“world”输出另一种字体。

我知道如何在 2 次不同的尝试中做到这一点，即。选择一种字体，回显 1 个单词，选择其他字体，回显其他单词。但是有没有办法以某种方式一次完成这一切？

我的问题是回显居中的 HTML 跨度。我使用`writeHTMLCell`函数输出了 2 个跨度，其中一个跨度应该使用一种字体输出，第二个跨度使用另一种字体输出。

我可以使用 TCPDF CSS 做到这一点吗？

基本上，我正在寻找一种在具有不可见边框的框中放置居中文本的方法，并且使用 1 种字体/颜色输出文本的 1 个单词，使用其他字体/颜色输出另一个单词。

谢谢！

编辑：顺便说一句：我正在使用通过`addTTFfont`函数导入的自定义字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:13:11.337

在 stackoverflow.com 上找到的这个 anwser 解决了我的问题 => [TCPDF Codeigniter 使用多种字体](https://stackoverflow.com/questions/12246244/tcpdf-codeigniter-use-multiple-fonts)

可以通过 CSS 定义自定义字体。

# php - 通过 curl 匿名从 twitter 或 facebook 获取页面

> ID：13911277
> 
> 赞同：2
> 
> 时间：2012-12-17T09:17:45.847
> 
> 标签：php, facebook, curl, twitter, anonymous

我正在尝试制作某种页面解析器（更具体 - 突出显示页面上的一些单词），但我遇到了一些问题。我正在使用 curl 从 url 获取整个页面数据，并且大多数页面都很好地合作，而其他页面则没有。

我的目标是像浏览器一样获取所有页面 html，并且我正在尝试匿名使用它 - 就像浏览器一样。我的意思是-如果某些页面需要登录以显示我不感兴趣的浏览器的数据。问题是我无法访问可以从常规浏览器匿名访问的 Twitter 或 Facebook 页面，即使我设置了所有标题，就像它们通常从 Firefox 或 Chrome 发送一样。

有没有办法简单地模拟浏览器从这些方面获取页面，或者我必须使用 OAuth（有人可以解释为什么浏览器不需要使用它）？

**编辑** 我得到了解决方案！如果有人对此有疑问，您应该：
-> 尝试将协议从 https 切换到 http
-> 如果 url 中有一个 /#!/ 元素，请去掉
-> 对于我的 curl 元素“Accept-Encoding: gzip,放气”也引起了问题..不知道为什么，但现在一切都好

我的代码：

```
if (substr($this->url,0,5) == 'https')
        $this->url = str_replace('https://', 'http://', $this->url);

    $this->url = str_replace('/#!/', '/', $this->url);

    //check, if a valid url is provided
    if(!filter_var($this->url, FILTER_VALIDATE_URL))
        return false;

    $curl = curl_init();

    $header = array();
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    // -> gives an error: $header[] = "Accept-Encoding: gzip, deflate";
    $header[] = "Accept-Language: pl,en-us;q=0.7,en;q=0.3";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Pragma: "; // browsers keep this blank. 
    curl_setopt($curl, CURLOPT_HTTPHEADER,$header);
    curl_setopt($curl, CURLOPT_HEADER, false);

    curl_setopt($curl, CURLOPT_URL, $this->url);

    curl_setopt($curl, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($curl, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT,10);
    curl_setopt($curl, CURLOPT_COOKIESESSION,true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7 (.NET CLR 3.5.30729)');
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);

    $response = curl_exec($curl);
    curl_close($curl);

    if ($response) return $response;

    return false; 
```

一切都在课堂上，但您可以非常轻松地提取代码。对我来说，（推特和脸书）都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:52:49.990

是的，这可以模拟浏览器：但是您需要仔细观察浏览器发送的所有 http 标头（包括 cookie），并且还要处理重定向。其中一些可以通过 cUrl 函数“自动化”，其余的则需要手动处理。

注意：我不是在谈论代码中的 HTML 标头；这些是浏览器发送和接收的 HTTP 标头。

发现这些的最简单方法是让用户[提琴手](http://www.fiddler2.com/fiddler2/)来监控流量。选择一个 URL 并在右侧查找“检查元素”，您将看到发送的标头和接收的标头。

Facebook 使用大量 iFrame 使这变得更加复杂，所以我建议您从更简单的网站开始！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:40:14.803

我得到了解决方案！如果有人对此有疑问，您应该：
-> 尝试将协议从 https 切换到 http
-> 如果 url 中有一个 /#!/ 元素，请去掉
-> 对于我的 curl 元素“Accept-Encoding: gzip,放气”也引起了问题..不知道为什么，但现在一切都好

我的代码：

```
if (substr($this->url,0,5) == 'https')
        $this->url = str_replace('https://', 'http://', $this->url);

    $this->url = str_replace('/#!/', '/', $this->url);

    //check, if a valid url is provided
    if(!filter_var($this->url, FILTER_VALIDATE_URL))
        return false;

    $curl = curl_init();

    $header = array();
    $header[0] = "Accept: text/xml,application/xml,application/xhtml+xml,";
    $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
    // -> gives an error: $header[] = "Accept-Encoding: gzip, deflate";
    $header[] = "Accept-Language: pl,en-us;q=0.7,en;q=0.3";
    $header[] = "Cache-Control: max-age=0";
    $header[] = "Connection: keep-alive";
    $header[] = "Keep-Alive: 300";
    $header[] = "Pragma: "; // browsers keep this blank. 
    curl_setopt($curl, CURLOPT_HTTPHEADER,$header);
    curl_setopt($curl, CURLOPT_HEADER, false);

    curl_setopt($curl, CURLOPT_URL, $this->url);

    curl_setopt($curl, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($curl, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT,10);
    curl_setopt($curl, CURLOPT_COOKIESESSION,true);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; pl; rv:1.9.0.7) Gecko/2009021910 Firefox/3.0.7 (.NET CLR 3.5.30729)');
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);

    $response = curl_exec($curl);
    curl_close($curl);

    if ($response) return $response;

    return false; 
```

一切都在课堂上，但您可以非常轻松地提取代码。对我来说，（推特和脸书）都很好。

# android - 在地图视图上绘制路线的最简单方法

> ID：13911279
> 
> 赞同：1
> 
> 时间：2012-12-17T09:17:49.933
> 
> 标签：android, android-mapview

我想显示用户当前位置和他在搜索视图中输入的位置之间的路线。这是我的 onQueryTextSubmit 方法的代码

```
@Override
    public boolean onQueryTextSubmit(String query) {
        // TODO Auto-generated method stub
        try
        {
            if(direction.isChecked() == false)
            {
                gc = new Geocoder(this);

                addresses = gc.getFromLocationName(query,5);
                String add = "";
                if (addresses.size() > 0) 
                {
                    p = new GeoPoint(
                            (int) (addresses.get(0).getLatitude() * 1E6), 
                            (int) (addresses.get(0).getLongitude() * 1E6));
                    mc.animateTo(p);
                    mc.setZoom(9);
                    mapView.invalidate();

                    searchView.clearFocus();
                }   
                else
                {
                     Toast.makeText(this, " Location not found.",
                                Toast.LENGTH_LONG).show();
                }
                return true;
            }
            else
            {
            // draw a route between the locations                    
                 return true;
            }
        }
        catch(IOException ex)
        {

        }

        return false;
    } 
```

最简单的方法是什么？（示例将帮助我了解更多）

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:42:29.847

获得目的地 GeoPoint 后，您可以在此地址向 google 发出 http 请求：

```
String url = "http://maps.google.com/maps?f=d&hl=es&saddr="+ origin +"&daddr=" + destination + "&ie=UTF8&om=0&output=dragdir"; 
```

是起点和终点（纬度，经度）点。

例如，[这个](http://maps.google.com/maps?f=d&hl=es&saddr=40.44874150080537,-3.6708699214507217&daddr=40.000000092792945,-3.0000001564621925&ie=UTF8&om=0&output=dragdir)请求给你这个 json：

```
{tooltipHtml:" (86,4 km / 55 minutos)",polylines:[{id:"route0",points:"wa{uFt|kUoAkE??jDyE??uFuLqFaH??mAl@gAZ??q@[Yg@KwCBkATq@X[bCu@??tMsBrIuBrDoA~J}EbC{@pCy@dIeA`JBrDThd@nFpDRnTkAdBGVFhRyC`McA|KkAzCK|CP??lA~@NZHn@I~@Q`@c@\\[Hu@KYWUe@Gc@D{BnG}a@`Kcb@|A}JvAkOXmHDgFKcMMmDkBgW??SaCEoFBaCb@mH`AwGdE_Qh@sCf@}Db@yGFcFIqE]iGcAkLUyGB{K^aHf@_EfC_PtAqOlB}X|AiNrCyTnE{WjDqOtCqK~DoMhHoSvX}u@~KeYpI}VrSkk@zBiJ`@_Ct@oG`@mGPoGCcLMoDq@wHiCaSe@qE_BgTMuEEoIDsJxA_`@DcHGoCw@iJkAoHsCwN_AcHk@mG]wGOcLLeJZiG\\gEr@kGhBeKpB{H~@uCvB{F~CuGbBuCdE_GlE}ElBgBfQeNpCsCtCmDtCoEnBsD~BmFdBqFz@_DdByIt@iGb@iFZeJBiYJ{GRkGf@{HpAaMdDwRzB{IrCsIrCoGbHiMzGmJnEaFjCeCdCwBfE}CdC_BzHiErNyG~NsFdN}DnQuDzK}A~KcAxKm@hJQhLAfhAhA~HQnFm@xGsAtFqBdCoAdEgC|GaGtEiF~GwIfGsGdD{CtEcDpQwKvCwBdFeE|HmIxEoGtCwElLiVfDeGxDkFvNsOvDaFbDqFnI{PtBwDfDiF`FkG~UeVfC{ClD{EpMyRzDyEdE_EvHwFpGiDfDsA|DmAhE_AdEk@hGa@jHCpLJlEIrDUnDa@fFaArF_BnGmCpHiEbVgPzBmBhBoB|B_D|AqCdAaCtGaRvAuC~EeI??jSk[zBcEnAuCnD}Jd@iBlBwJ`AgIPuBF_GKaHEeAq@mGs@gE?Ue@_Bi@mAaCwEeCgEw@qBcB}G_@gDKsB?kEJuCR}Bn@sDt@qCxAqDtCmEtAwAfCuB|AcAvCsAhBm@bDo@xGq@~Ci@fEsAvDuBdDsCrBgChBsCtEqJnC{DfDuC`EmBzCq@bDM`DNdBZxFzAlBPxCBrKaAvCCfMhA~A@vCKpCg@vD}ArA{@xBmBlBcC~A{Cx@uB|@oD^}BlAkKl@iDl@{BzAwDzBsDpBaCnBiBlB_CnFoIfD_ExAoAfEgC`CaAnDgAnCi@rAKfHLfCCzAQfDmApBuAjBmBtFgKfAyAbCwBnEsCzAoAlBaCfD{FhByDtBsFZcBPiBTqIRiB\\eBTm@t@uA`AeApBqAtB]xBExS`@bEIz@OnAe@lAy@v@y@hAkBp@qBv@}CjEwT~@uCpEwIbK{QlE}FnFeF`CeBrDsB`EaBlDaApE{@zgAqPhFiAbAc@bC{Az@{@hHwIdOqRnA{Bx@oBbRoe@fBmFzAcGtA{I`@yEzEiv@X_Cz@aEpBaGtB{DvRmW`BaC`AoBbAsCl@eCf@iDn@}G`@mC`AwD~AuDhJ{OdCuGfA{Ej@eEZwDzEgu@x@sJ^qBj@kBdD}HbAkDhEaX^gDJgC?iCKiCw@iIK_EL}Db@qDbAqD|@uBjOuVxIgQ~DsK|AuFpAaHt@_F`AqK^gL@yG_@u\\HeHNwEv@oKx@eHbDgPzDuNlAuD~F{O~BoF`AiBnBoCzFwF~CoDlBcEfAaD|Kc_@r@yBtAgD`AaBbHsJ|CsCrP_LpBwB`BqChAgDr@yDR}BhBs\\VuBx@kDlAyCdBkCdDqClQcHlC_B|CuDlJcQbA{AlAqA~_Ags@lSiSrBaCfOiWtVs]z`@_s@zMiVvAuBzPyTfRg[rBuD`B_EtCkIvKs]nCaHlEuIfHaMbMoRv[kd@lEqFfo@qp@|C{Cf@[bQsHrBoA~AsAbAqA|GsMtBiC|B_BlHwD`Au@vA{AnAmB|@wB|@eDbEmThAsEh@_BzAcDnKmP~z@}kA|AcBbDcCvFyBvSgGnBa@~TiGnNmC|DkB??xCoApDU|@UtAeAZm@\\gARkBQeK@i@^cC??pBkHvFy]Pm@ZCHQVuAAc@hAyC~@m@dBYzPq@??Jd@NJR?VSBi@pBq@l@e@d@e@jAoB\\_A\\_BnBePTCN[A[SWtIsr@Aq@VCLSAg@OQpDwX^kE??rAJrB]p@[tAuA",levels:"BBBBB?BB?BB???@??BB??????@???@???????BB??@???@????@???@????BB???@????@??????@??????@??@????@??A???@????@????@?????@????A?????@?????@???@???@?????@???A?@???@????@???@???@???A?????@????@??????????@??????@????@?????@???@???@?????BB??@???@??????@????@??@???@??A???@?????@????@?@??????????@???A???@?????@?????@???@?????@???????@??@???@???@????@???@????@???@???@??@????A????@????@????@?????@???@???@?????@??????@???@???@?????@??@???@????@???@?????@??????A???@???@??@??????@????@??@?@@???@???@???@??????@?@??@????BB????@????BB???????@??BB??????@???@????????????BB???B",numLevels:4,zoomFactor:16}]} 
```

带有名称的字符串`points`是您必须在地图上绘制的折线。但在绘图之前，您必须对其进行解码。看看[这里](http://jeffreysambells.com/2010/05/27/decoding-polylines-from-google-maps-direction-api-with-java)的职责。

获得 GeoPoint 列表后，您可以将其绘制在地图上。为此，如果您使用的是 google api v1 ，则需要[覆盖。](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Overlay)我建议你看看[api v2](https://developers.google.com/maps/documentation/android/)。通过 GoogleMap 类和 PolylineOptions 中的 addPolyline 方法可以更轻松地为地图对象添加折线。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:44:40.390

通过两种方式，我们可以在地图上绘制路线。

1.在 android 中使用 Map OverLay 概念 2.使用这个 url [http://maps.google.com/maps?&saddr=](http://maps.google.com/maps?&saddr=from)从纬度值，从经度值 &daddr= 到纬度值，到经度值

# javascript - Backbone 和 Express 路由器可以在 Express 应用程序中一起工作吗？

> ID：13911280
> 
> 赞同：6
> 
> 时间：2012-12-17T09:17:55.077
> 
> 标签：javascript, node.js, backbone.js, express

我已经构建了几个 Backbone 应用程序，并欣赏客户端代码结构和组织。我正在使用 Express 进行 Node 开发，但我不确定 Express 和 Backbone 如何在处理路由时协同工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:28:37.477

您需要了解 Node 和 Backbone 是相互独立的。

*   **节点**用于服务器端（例如使用数据库、api 服务等）。
*   **Backbone**是一个客户端 Javascript MVC 框架，它为您提供组织客户端 Javascript 应用程序的结构。（浏览器中的应用程序）

您可以在客户端拥有一个 Backbone 应用程序，它可以连接到任何后端，无论是 Node、Rails、PHP 等......

有关更多信息，请查看客户端的 MVVM 模式和 Javascript 框架。

[http://backbonetutorials.com/why-would-you-use-backbone/](http://backbonetutorials.com/why-would-you-use-backbone/)

[http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T20:12:18.133

一位朋友给了我答案：

骨干网使用哈希路由。例如[http://yoursite.com/#foo](http://yoursite.com/#foo)

Express 将使用传统的[http://yoursite.com/foo](http://yoursite.com/foo)

您可以使用彼此独立的路由器，该路由器基于您的路径 - 用于客户端功能的哈希路由和用于服务器端功能的传统路由。

两个路由器可以共存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T03:59:38.190

您关于 Backbone 和 Express 如何协同工作的问题无法真正准确地回答，因为它们可以协同工作的方式实在数不胜数。希望下面的一些信息可以帮助你做你想做的事。

首先，您*可以*在客户端 (Backbone) 上使用 www.example.com/foo (no #) 路由 - 请参阅[Backbone.history.start()](http://backbonejs.org/#History-start)文档`pushState`中的选项。可以在客户端和服务器端集成路由。但是，要找到确切的方法并不容易。

这些链接下的一些信息可能会对您有所帮助：

*   [https://github.com/developmentseed/bones](https://github.com/developmentseed/bones)
*   [https://github.com/SC5/backbone-serverside](https://github.com/SC5/backbone-serverside)
*   [https://github.com/tysoncadenhead/backbone-on-express](https://github.com/tysoncadenhead/backbone-on-express)
*   [http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product](http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product)
*   [http://blog.andyet.com/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/](http://blog.andyet.com/2011/feb/15/re-using-backbonejs-models-on-the-server-with-node/)

您写道您有使用 Backbone 的经验，但您最近正在迁移到 Node，所以我假设您对其他框架开放，而不仅仅是 Express。您可以考虑使用例如。[restify](http://mcavage.me/node-restify/)（除了 Express）来创建一个可以与 Backbone 集成的 RESTful 服务。

还有像[Derby](http://derbyjs.com/)或[Meteor](http://www.meteor.com/)这样的完整框架，它们使用一个代码库同时覆盖客户端和服务器端，您可以共享的不仅仅是路由器。

（另外，我刚刚发现今年的（2013 年）HTML5DevConf 演讲：[Surviving Robots and Old Browsers by Server-side Backbone](http://www.youtube.com/watch?v=sfXneZ89FY0)。我还没有看过，但它似乎与您的问题非常相关。）

# objective-c - UItableView 搜索韩文

> ID：13911282
> 
> 赞同：0
> 
> 时间：2012-12-17T09:18:02.883
> 
> 标签：objective-c, ios, uitableview, search

在我们的 UItableView 搜索中，我们使用以下代码在单元格内容中搜索键入的文本

```
NSComparisonResult result = [eachCellContent compare:searchText options:NSDiacriticInsensitiveSearch|NSCaseInsensitiveSearch range:NSMakeRange(0, [searchText length])]; 
```

这工作正常。但这不适用于韩文。

例如：假设其中一个单元格文本是“소”。//我们通过输入这两个字母 ㅅ 和 ㅗ 得到这个组合 如果我们只输入 ㅅ ，我们的比较方法不起作用，因此没有列出“소”。（如果我们同时输入ㅅ和ㅗ，它就可以工作）

但是上面的例子在 AddressBook 应用程序中运行良好。

有没有其他比较方法来支持这一点？（我们还需要这个 NSDiacriticInsensitiveSearch|NSCaseInsensitiveSearch ）

感谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:52:30.443

您可以尝试使用规范化字符串

```
NSString *normalizedContent = [eachCellContent decomposedStringWithCanonicalMapping];
NSString *normalizedSearch = [searchText decomposedStringWithCanonicalMapping]; 
```

然后比较这些。

* * *

**更新：**以下算法在我的测试项目中有效：

```
NSString *eachCellContent = @"소";
NSString *searchText = @"ㅅ";

NSString *normalizedContent = [eachCellContent decomposedStringWithCanonicalMapping];
NSString *normalizedSearch = [searchText decomposedStringWithCanonicalMapping];

NSComparisonResult result = [normalizedContent compare:normalizedSearch
                                               options:NSDiacriticInsensitiveSearch|NSCaseInsensitiveSearch
                                                 range:NSMakeRange(0, [normalizedSearch length])
                                                locale:[NSLocale currentLocale]];
if (result == NSOrderedSame) {
    NSLog(@"same");
}
// Output: same 
```

除了分解 Unicode 字符之外，“技巧”是使用本地化比较。

# html - 使用 CSS 缩放时 IE 中的文本区域

> ID：13911286
> 
> 赞同：1
> 
> 时间：2012-12-17T09:18:25.900
> 
> 标签：html, css, internet-explorer, textarea, zooming

我在 IE 中遇到了一些奇怪的情况，令人惊讶 ;) 当 CSS 缩放应用于 textarea 时，IE 似乎有点困惑。使用某些缩放级别时，文本插入符会“卡在”某些行上，并且无法转到上面的行，但是使用鼠标仍然有效。我做了一个简单的例子来说明这个问题。在示例中，carret 卡在最后一行 (Testing5)，但是将缩放级别更改为 78%，carret 现在将卡在倒数第二行 (Testing4)。

示例代码：

```
<HTML>
  <HEAD>
    <STYLE>.textboxML { ZOOM: 75%; }</STYLE>
  </HEAD>
  <BODY>
    <FORM>
      <TEXTAREA rows="8" class="textboxML" rows=8 cols=15>Testing1
Testing2
Testing3
Testing4
Testing5</TEXTAREA>
    </FORM>
  </BODY>
</HTML> 
```

在 jsfiddle 上也一样：

[http://jsfiddle.net/Y55v5/](http://jsfiddle.net/Y55v5/)

有人见过这个吗？

干杯，

迈克尔

# iphone - 如何向 SneakyButtonSkinnedBase 添加动作？(COCOS2d)

> ID：13911290
> 
> 赞同：0
> 
> 时间：2012-12-17T09:18:37.507
> 
> 标签：iphone, cocos2d-iphone

在我的一层中，我有这个按钮。现在我怎样才能在这个按钮上添加动作，比如跳跃、跑步等？

```
SneakyButtonSkinnedBase *jumpbuttonBase=[SneakyButtonSkinnedBase new];    

jumpbuttonBase.position=jumpButtonPosition;

jumpbuttonBase.defaultSprite=[CCSprite spriteWithFile:@"jumpUp.png"];

jumpbuttonBase.activatedSprite=[CCSprite spriteWithFile:@"jumpDown.png"];

jumpbuttonBase.pressSprite=[CCSprite spriteWithFile:@"jumpDown.png"];

jumpbuttonBase.button=[[SneakyButton alloc]initWithRect:jumpButtonDimensions]; 

jumpButton=[jumpbuttonBase.button retain];

jumpButton.isToggleable=NO;    

[self addChild:jumpbuttonBase]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T10:37:40.540

在您添加按钮的图层中，安排更新。

```
[self scheduleUpdate]; 
```

在更新方法中，您检查按钮是否已被按下，然后您决定要执行的操作。

```
-(void) update:(ccTime) delta
{
   if (jumpButton.active)
   {
      // do something here
   }
} 
```

# mule - 如何使用 Mule ESB、Mule Studio 读取 CSV 文件并将数据插入 PostgreSQL

> ID：13911296
> 
> 赞同：12
> 
> 时间：2012-12-17T09:19:15.463
> 
> 标签：mule, mule-studio

我对 Mule Studio 很陌生。

我面临一个问题。我有一个要求，我需要使用 Mule Studio 将 CSV 文件中的数据插入 PostgreSQL 数据库。

我正在使用 Mule Studio CE（版本：1.3.1）。我在 Google 中查看了 ed，发现我们可以使用 Data-mapper 来执行此操作。但它仅适用于 EE。所以我不能使用它。

另外我在网上查了一篇文章[Using Mule Studio to read Data from PostgreSQL(Inbound) and write it to File (Outbound) - Step by Step approach](http://www.dotnetfunda.com/articles/article2068-using-mule-studio-to-read-data-from-postgresqlinbound-and-write-it-to-fil.aspx)。

这似乎可行，但我的要求与给出的文章正好相反。我需要文件作为入站数据，而数据库作为出站组件。

这样做的方法是什么？

任何分步帮助（例如要使用的组件）和指导将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T00:08:00.057

这是一个插入两列 CSV 文件的示例：

```
<configuration>
    <expression-language autoResolveVariables="true">
        <import class="org.mule.util.StringUtils" />
        <import class="org.mule.util.ArrayUtils" />
    </expression-language>
</configuration>

<spring:beans>
    <spring:bean id="jdbcDataSource" class=" ... your data source ... " />
</spring:beans>

<jdbc:connector name="jdbcConnector" dataSource-ref="jdbcDataSource">
    <jdbc:query key="insertRow"
        value="insert into my_table(col1, col2) values(#[message.payload[0]],#[message.payload[1]])" />
</jdbc:connector>

<flow name="csvFileToDatabase">
    <file:inbound-endpoint path="/tmp/mule/inbox"
        pollingFrequency="5000" moveToDirectory="/tmp/mule/processed">
         <file:filename-wildcard-filter pattern="*.csv" />
    </file:inbound-endpoint>

    <!-- Load all file in RAM - won't work for big files! -->
    <file:file-to-string-transformer />
    <!-- Split each row, dropping the first one (header) -->
    <splitter
        expression="#[rows=StringUtils.split(message.payload, '\n\r');ArrayUtils.subarray(rows,1,rows.size())]" />
    <!-- Transform CSV row in array -->
    <expression-transformer expression="#[StringUtils.split(message.payload, ',')]" />
    <jdbc:outbound-endpoint queryKey="insertRow" />
</flow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-30T19:51:59.980

为了使用***Mule****读取CSV*文件并将数据插入**PostgreSQL** ，您需要遵循以下步骤： 您需要具备以下条件作为先决条件

 **   PostgreSQL
*   PostgreSQL JDBC 驱动程序
*   Anypoint Studio IDE 和
*   要在 PostgreSQL 中创建的数据库

然后在 Studio 的 Global Element Properties 中配置 Postgre SQL JDBC Driver 在 Anypoint Studio 中创建 Mule Flow，如下所示：

*   第 1 步：在 File 组件中包装 CSV 文件源
*   第 2 步：在对象数组和字符串之间进行转换
*   第 3 步：拆分每一行
*   第 4 步：在数组中转换 CSV 行
*   第 5 步：转储到目标数据库

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-07T04:51:36.760

我想推荐Dataweave。

脚步

1.  使用 FTP 连接器/端点读取文件。

2.  使用数据编织进行转换。

3.  使用数据库连接器，将数据存储在数据库中。*

# html - 按下导航返回后，HTML5 本地存储恢复

> ID：13911297
> 
> 赞同：2
> 
> 时间：2012-12-17T09:19:16.113
> 
> 标签：html, local-storage

我今天遇到了这个问题。我正在为网站制作一个迷你购物车，它将显示在每个页面上，除了实际的购物车。

现场性能很重要，因此我决定将购物车中的当前项目临时缓存在本地存储中，以避免不必要的服务器端请求在每个页面加载时获取相同的项目。

由于迷你购物车实际上并未显示在购物车上，因此它仍会监听回调，例如在移除商品时。关键是重置缓存或仅从缓存副本中删除该项目。

* * *

我面临的问题：

用户最终进入购物车页面，如果我通过单击链接导航到其他页面，它可能会清除缓存（如果用户在最后一步），它工作正常 - 缓存被清除。

问题是，如果我使用后退按钮（浏览器后退按钮、鼠标后退按钮等），用户会返回上一页，并且我在购物车页面（清除缓存）中所做的更改会被还原！（即使我重新加载页面）

**所以问题是：**

如果我回去，如何清除本地存储并避免它被恢复？同时在其他浏览器中具有一致的行为。

* * *

这`cache`只不过是一个项目是本地存储，它会在添加或删除新项目时更新。清除缓存只会删除它（使用 localStorage.removeItem）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:28:14.093

鉴于在 IE8 中尝试此操作时已删除该项目，可以肯定地说您正在执行正确的代码来删除该项目。然后我不得不说这看起来像是一个与浏览器相关的问题，当您返回以保持一致的用户体验时，浏览器会保留信息。直接导航到同一链接不会恢复已删除的对象这一事实似乎支持了这一点。

如果您正在经历诸如填充购物车之类的过程，这可能无关紧要，只要您留下访问页面的回溯，缓存就会正确更新。（即缓存中的第 1 项在页面 B 上被删除，返回页面 A 时返回，但导航到页面 D 时消失）。

您拥有的另一个选择是简单地使用服务器端会话存储机制。到目前为止，这是我会做的。我看到程序员，尤其是在 SO 上犯的最大错误之一是他们认为操作 X 会影响性能并试图避免它。**如果没有基准测试，您就无法对性能做出任何具体陈述。**在返回几个会话对象时，您的服务器端很可能比您的客户端代码更快。服务器端会话是网络上几乎每个站点都使用的出色工具，很遗憾忽略它，因为对它如何影响性能的错误假设。

# javascript - logout when the browser close, onunload javascript

> ID：13911307
> 
> 赞同：0
> 
> 时间：2012-12-17T09:19:50.803
> 
> 标签：javascript

> **Possible Duplicate:**
> [How we call logout servlet on browser close event](https://stackoverflow.com/questions/3986430/how-we-call-logout-servlet-on-browser-close-event)

I want my site to automatically logout user when the browser closes. I use onunload in javascript. Now, my problem is it always logout the user everytime the user navigates to other page. What I want is just to logout when the browser closes.

Here's my code:

```
<script type="text/javascript">

window.onbeforeunload = confirmExit;
window.onunload = logout;

function confirmExit() {
    return "Are you sure you want to leave?";
}

function logout() {
    window.location = '<?php echo WEBSITE_URL ?>?logout=true';
}

</script> 
```

Hope someone will help me ASAP!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:23:26.177

在您的情况下，最好发送**ajax 请求**来完成任务，而不是将用户重定向到注销。

也发过去`onbeforeunload`

或者一个更好的主意是添加一个`cookie`with **user last activity**。并检查每个页面加载是否最后一个活动大于所需的限制服务器重定向到清除会话的登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:23:33.943

我认为关闭窗口时无法在javascript中检测到。正如您发现的那样，`onunload`事件没有页面卸载*原因*的信息：如果用户关闭窗口或导航到不同的页面。

更重要的是，用户可以通过在地址栏中输入 url 导航到不同的页面——在这种情况下，您可能也想“将他注销”。

实现它的最佳方法是在会话中设置超时。如果浏览器崩溃，这将起作用。

# java - 无法在jsp页面中找到图像文件的确切位置

> ID：13911308
> 
> 赞同：2
> 
> 时间：2012-12-17T09:19:56.747
> 
> 标签：java, jsp, file-upload, struts2

我通过java编码将我的图像保存在一个名为“文件”的文件夹中。在我的 jsp 页面中，我尝试使用 `<img alt="" src="${pageContext.request.contextPath}/files/IMG168.jpg">` 但图像未显示来显示该图像！可能是什么原因。

请查看下面的图片并建议我解决我的问题。

![在此处输入图像描述](../Images/6d78dff0ba2de698cd9a4b1482824eec.png)

![在此处输入图像描述](../Images/f7f11530c14c103e6faf2ad01edc8882.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:22:22.587

您应该将`files`文件夹放在`WebContent`目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:28:44.947

网页包含如下

```
Web pages 
|______page1.jsp 
|______index.jsp 
|______page2.jsp 
|______WEB-INF 
|______images
|______css
| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:37:54.877

试试这个看看

```
<img alt="" src="../../files/IMG168.jpg"> 
```

更新，

我认为您必须获取文件夹的物理位置并将其放入 src。例如，如果您在 C:\visionbook\files 中的文件夹

```
src="C:\visionbook\files\IMG168.jpg" 
```

# iphone - iphone image gets rotate while downloading from sever

> ID：13911309
> 
> 赞同：1
> 
> 时间：2012-12-17T09:20:00.713
> 
> 标签：iphone, objective-c, ios, xcode, exif

I am trying to upload camera images from iPhone to my web server but some how the images change it's orientation when i download them from server.This only happens with camera images and not simple images uploaded to device from my machine.Plz help me.

i have use this condition to rotate image on server side:

//obj will be Orientation passed while uploading image on server its value will be either 1 or 3or 6 or 8

```
switch ((ushort)obj)
               {
                   case 1: //up
                       return 0;
                   case 3: //down
                       return 180;
                   case 6: //left
                       return 90;
                   case 8: //right
                       return 270;
                   default:
                       return 0;
               } 
```

But still i am getting the same problem

Here is my code for Upload image:

```
-(void)uploadSingleFile
{
    if(!self.objWebServices.bSyncWasOn)
    {
        NSLog(@"STOP upload Single File RETURN");
        [self Call_SaveSyncedImageID];
        return;
    }
    SyncItem* item = [arrSelSyncItemIDS objectAtIndex:nSyncItemIndex];

    if(item.nType == SYNC_STATUS_NOT_SELECTED || item.nType == SYNC_STATUS_SYNC_DONE)
    {
        nSyncItemIndex = nSyncItemIndex + 1;
        if([arrSelSyncItemIDS count] > nSyncItemIndex)
        {
            NSLog(@"Called uploadSingleFile");
            [self uploadSingleFile];
            return;
        }
        else
        {
            //[self LoadImages:!bShowHideSyncImages];
            [SVProgressHUD dismiss];
            [BtnStopSync setTitle:@"Start sync" forState:UIControlStateNormal];
            self.objWebServices.bSyncWasOn = NO;
            self.objWebServices.isFileUpload = NO;

            if( [[NSUserDefaults standardUserDefaults] boolForKey:@"Notification_State"] ) // Setting Switch Bool
            {
                UIAlertView *Alert = [[UIAlertView alloc] initWithTitle:@"winkflash" message:@"*** Sync completed successfully." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [Alert show];
            }
        }
    }
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *srtprefSessionId = [NSString stringWithFormat:@"%@",[prefs objectForKey:@"prefSessionId"]];

    BOOL isTrash = FALSE;   
    NSString *StrPath = @"/Pictures/";      //Change 
    ALAsset* temp = item.itemAsset;
    NSDate* assetDate = (NSDate*)[temp valueForProperty:@"ALAssetPropertyDate"];

    NSString* strID = @"";
    strID = [[temp valueForProperty:@"ALAssetPropertyURLs"] description];
    strID = [strID stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSString* strImageType = @"";
    if ([strID rangeOfString:@"jpg"].location != NSNotFound || [strID rangeOfString:@"JPG"].location != NSNotFound ){
        strImageType = @"jpg";
    }
    else if ([strID rangeOfString:@"png"].location != NSNotFound || [strID rangeOfString:@"PNG"].location != NSNotFound )
        strImageType = @"png";

    NSDateFormatter* df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"MM/dd/yyyy"];
    NSString *result = [df stringFromDate:assetDate];

    NSTimeInterval timeInterval = [assetDate timeIntervalSince1970];
    ALAssetRepresentation *rep = [temp defaultRepresentation];

    //------------------ metadata -------------------------------------------------------
    NSDictionary *imageMetadata = [rep metadata];
    NSString *strOrt=[NSString stringWithFormat:@"%@",[imageMetadata valueForKey:@"Orientation"]];
    NSString *strOrientation;

    if([strOrt isEqualToString:@"6"])
    {
        strOrientation=@"1";
    }
    if([strOrt isEqualToString:@"8"])
    {
        strOrientation=@"3";
    }
    if([strOrt isEqualToString:@"3"])
    {
        strOrientation=@"6";
    }
    if([strOrt isEqualToString:@"1"])
    {
        strOrientation=@"8";
    }
    NSLog(@"print strOrientation:%@",strOrientation);
    //-----------------------------------------------------------------------------------

    StrPath = [StrPath stringByAppendingFormat:@"%d.%@",(int)timeInterval,strImageType];
    UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
    NSData *dataObj = nil;
    dataObj = UIImagePNGRepresentation(image);
    NSString* StrFileData = [Base64 encode:dataObj];
    NSString* strFileHash = [dataObj md5Test];

    //----------------------------------------------------
    NSMutableDictionary *DictRequest = [[NSMutableDictionary alloc]init];
    [DictRequest setObject:srtprefSessionId forKey:@"SessionId"];
    [DictRequest setObject:StrPath forKey:@"Path"];
    [DictRequest setValue:[NSNumber numberWithBool:isTrash] forKey:@"UploadDirectlyToTrashbin"];
    [DictRequest setObject:StrFileData forKey:@"FileData"];
    [DictRequest setObject:strFileHash forKey:@"FileHash"];
    [DictRequest setObject:result forKey:@"DateCreated"];

    BOOL isNULL = [self stringIsEmpty:strOrientation];
    if(!isNULL)
    {
        [DictRequest setObject:strOrientation forKey:@"Orientation"];
    }

    NSString *jsonString = [DictRequest JSONRepresentation];
    NSString *strUrl=[NSString stringWithFormat:@"%@",FileUpload_URL];
    NSURL *url1=[NSURL URLWithString:strUrl];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url1];
    [request setTimeoutInterval:60.0];
    [request setHTTPMethod:@"POST"];
    NSData *postData = [jsonString dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
    [request setHTTPBody:postData];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    if(theConnection)
        [self Set2Defaults];

    theConnection = [[NSURLConnection alloc]initWithRequest:request delegate:self];

    [SVProgressHUD dismiss];

    if(theConnection)
        webData = [NSMutableData data];
    else
        NSLog(@"Connection Failed !!!");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T09:34:09.397

这是由于 UIImage 中存储方向的方式。

我在 UIImage 的一个类别中使用这个函数。

```
- (UIImage *)fixOrientation {

    // No-op if the orientation is already correct
    if (self.imageOrientation == UIImageOrientationUp) return self;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (self.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, self.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (self.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, self.size.width, self.size.height,
                                             CGImageGetBitsPerComponent(self.CGImage), 0,
                                             CGImageGetColorSpace(self.CGImage),
                                             CGImageGetBitmapInfo(self.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (self.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.height,self.size.width), self.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,self.size.width,self.size.height), self.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
} 
```

从 imagePicker 获取图像时只需运行此命令。

然后，当您上传和下载时，它将保持方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:36:18.280

尝试这个：

```
UIImage *sourceImage = ... // Our image
CGRect selectionRect = CGRectMake(100.0, 100.0, 300.0, 400.0);
CGImageRef resultImageRef = CGImageCreateWithImageInRect(sourceImage.CGImage,
selectionRect);
UIImage *resultImage = [[UIImage alloc] initWithCGImage:resultImageRef]; 
```

和

```
CGRect TransformCGRectForUIImageOrientation(CGRect source, UIImageOrientation orientation, CGSize imageSize) {
switch (orientation) {
case UIImageOrientationLeft: { // EXIF #8
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI_2);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationDown: { // EXIF #3
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationRight: { // EXIF #6
  CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(0.0, imageSize.width);
  CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI + M_PI_2);
  return CGRectApplyAffineTransform(source, txCompound);
}
case UIImageOrientationUp: // EXIF #1 - do nothing
  default: // EXIF 2,4,5,7 - ignore
  return source;
}
}
  ...
UIImage *sourceImage = ... // Our image
 CGRect selectionRect = CGRectMake(100.0, 100.0, 300.0, 400.0);
CGRect transformedRect = TransformCGRectForUIImageOrientation(selectionRect,  sourceImage.imageOrientation, sourceImage.size);
CGImageRef resultImageRef = CGImageCreateWithImageInRect(sourceImage.CGImage, transformedRect);
UIImage *resultImage = [[UIImage alloc] initWithCGImage:resultImageRef]; 
```

# django - django-compressor creates javascript with syntax errors

> ID：13911310
> 
> 赞同：2
> 
> 时间：2012-12-17T09:20:02.010
> 
> 标签：django, django-compressor, jsmin

A bit of background... I'm setting up my new site's base template and I'm including some popular javascript libraries, such as AngularJS, Bootstrap's javascript files, and Underscore.js. Of course I wrap these files in {% compress js %}. Example code below:

```
{% compress js %}
    <script src="{{ STATIC_URL }}new_js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    <script>window.jQuery || document.write('<script src="{{ STATIC_URL }}new_js/vendor/jquery-1.8.3.min.js"><\/script>');</script>
    <script src="{{ STATIC_URL }}new_js/vendor/bootstrap.js"></script>

    <!-- Angular -->
    <script src="{{ STATIC_URL }}new_js/vendor/angular.min.js"></script>
    <script src="{{ STATIC_URL }}new_js/angular/directives.js"></script>
    <script src="{{ STATIC_URL }}new_js/angular/services.js"></script>
    <script src="{{ STATIC_URL }}new_js/vendor/underscore-1.4.3.min.js"></script>

    {% block extra_js %}{% endblock %}
{% endcompress %} 
```

I know django-compressor only runs the minification filters, so it's probably the minifiers not generating the correct Javascript output.

Here is the JS error I get with JSMin:

```
SyntaxError: invalid increment operand
http://localhost:8000/site_media/static/cache/js/0f5eb5fb3b24.js
Line 448 
```

And the error from the file generated by SlimIt:

```
SyntaxError: missing ; after for-loop initializer
http://localhost:8000/site_media/static/cache/js/7fbdf61f5abb.js
Line 1 
```

I'm not entirely sure what's going on here, it seems hard to believe the minifiers would generate incorrect files on these common js libraries.

Has anyone run into problems with django-compressor's Javascript filters messing up common libraries?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:30:46.093

我去了 IRC，有人给了我一个很好的提示。他们告诉我使用 Javascript 文件的非缩小版本。这样，您就可以在开发环境中进行调试。这解决了我的大部分问题。

最新版本的 Underscore.js 1.4.3 仍然存在问题，但已在他们的开发分支中修复。

[https://github.com/jonthornton/jquery-timepicker](https://github.com/jonthornton/jquery-timepicker)也存在问题。所以我现在只是把它放在 {% nocompress js %} 中。

# javascript - Check whether white spaces exist without using trim

> ID：13911311
> 
> 赞同：0
> 
> 时间：2012-12-17T09:20:03.103
> 
> 标签：javascript, jquery

I have following code that checks whether date is valid. [http://jsfiddle.net/uzSU6/36/](http://jsfiddle.net/uzSU6/36/)

If there is blank spaces in date part, month part or year part the date should be considered invalid. For this, currently I am checking the length of string before and after `trim` operation. It works fine. However is there a better method to check for white spaces? (For example, using `===` operator)

```
function isValidDate(s) 
{
var bits = s.split('/');

//Javascript month starts at zero
var d = new Date(bits[2], bits[0] - 1, bits[1]);

if ( isNaN( Number(bits[2]) ) ) 
{
    //Year is not valid number
    return false;
}

if ( Number(bits[2]) < 1 ) 
{
    //Year should be greater than zero
    return false;
}

//If there is unwanted blank space, return false
if  ( ( bits[2].length != $.trim(bits[2]).length ) ||
      ( bits[1].length != $.trim(bits[1]).length ) ||
      ( bits[0].length != $.trim(bits[0]).length ) )
{
    return false;
}

//1\. Check whether the year is a Number
//2\. Check whether the date parts are eqaul to original date components
//3\. Check whether d is valid

return d && ( (d.getMonth() + 1) == bits[0]) && (d.getDate() == Number(bits[1]) );

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:22:07.717

You can use [**indexOf()**](http://www.w3schools.com/jsref/jsref_indexof.asp) function if there is space in the `date` string.

```
if(s.indexOf(' ') != -1)
{
    //space exists
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:25:25.033

您可以测试任何空格，例如

```
 if( /\s/g.test(s) ) 
```

它将测试任何空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:25:18.450

您可能需要考虑使用正则表达式来测试字符串的有效性：

```
function isValidDate(s) {
    var re = /^(\d{1,2})\/(\d{1,2})\/(\d{4})$/;
    var mdy = s.match(re);
    if (!mdy) {
        return false;   // string syntax invalid;
    }

    var d = new Date(mdy[3], mdy[1] - 1, mdy[2]);
    return (d.getFullYear() == mdy[3]) &&
           (d.getMonth() == mdy[1] - 1) &&
           (d.getDate() == mdy[2]);
} 
```

正则表达式一次性完成所有这些：

*   检查是否存在由斜线分隔的三个字段
*   要求字段为数字
*   允许日期和月份为 1 或 2 位数字，但年份需要 4
*   确保字符串中没有其他内容是合法的

见[http://jsfiddle.net/alnitak/pk4wU/](http://jsfiddle.net/alnitak/pk4wU/)

# c# - Visual Studio C# 2010 Express references are invalid after compiling the project

> ID：13911313
> 
> 赞同：0
> 
> 时间：2012-12-17T09:20:07.543
> 
> 标签：c#, visual-studio-2010, reference, .net-assembly

I have two projekts in my c# solution explorer. The first project contains helper classes like a login to the database with NHibernate and some other stuff. My second project contains the main files for my programm like the GUI, their controllers etc.

The second project references on the first project because I want to use functions of my helper classes in the second project. I am able to compile the helper project with all its references (NHibernate.dll, Log4Net.dll etc.).

In the second project I face the following problem. There I also use some references that are already in the first project like the Log4Net.dll and of course I added a reference to my helper project because I want to use its functions. When I newly make all references everything is fine but when I compile the second project all references are away. Better to say they are still in the reference folder but in the class files the references are red underlined and VS 2010 Express tells me that the types / namespaces could not be found (missing using directive or assembly reference).

When I delete the references and make new references it works but again when I compile the project the same happens again.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:44:20.390

我要检查的第一件事是 Target Farmework，您是否将第一个项目定位到比第二个项目更高版本的框架？然后尝试将第二个项目设置为与第一个项目相同的目标框架，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:51:06.847

我认为您的第一个项目是针对 .net 4.0（完整）框架，第二个项目是针对 .net 4.0 客户端框架。

更改您的第二个项目，使其也以 .net 4.0（完整）框架为目标。

# java - In Java code conventions, the instance variables should be placed before the methods or after the methods?

> ID：13911316
> 
> 赞同：0
> 
> 时间：2012-12-17T09:20:23.907
> 
> 标签：java, coding-style

In Java code conventions, the instance variables should be placed before the methods or after the methods? I know, in the code convention of Oracle or Apache, they recommend the instance variables should be placed before the methods. However, in the book of Core Java, the authors place the instance variables after the methods. Hmm...maybe because of my C++ background, during my learning C++, I am educated that public functions should be placed before private members, because people care more about the functionality your code provide. Therefore, I want to know which is preferred way? If you can explain your reasons using your experiences of practical projects, that's better.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:22:21.370

正常的 Java 约定是首先放置静态变量，实例变量，然后是构造函数，最后是方法。

> 然而，在 Core Java 的书中，作者将实例变量放在方法之后。

你总能找到不遵循正常惯例的人/书。

> 因此，我想知道哪种方式是首选方式？

看上面。

> 如果你能用实际项目的经验来解释你的原因，那就更好了。

没有理由，除了这是*公认*的正常做法之外，编写违反正常约定的代码*往往*会使它的可读性降低......对于遵循正常约定的人来说。

有人可能已经对代码可读性进行了一些实证研究，在这些研究中他们测量了相对可读性。但我从来没有费心去搜索它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:32:48.173

使用您正在处理的项目的风格。大多数编码约定都在那里，因此人们可以避免不断地考虑小的代码格式问题（以及源代码控制以非建设性的方式踩到其他人的源代码）。因此，如果您在一个项目中工作，并且该项目已经使用了约定，请坚持下去。

[Oracle/Sun](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-137946.html#182)使用“属性优先”。[Android 指南](http://source.android.com/source/code-style.html#define-fields-in-standard-places)在开始时或在使用它们的方法之前提出建议。我倾向于在我自己的项目中使用 Oracle/Sun 指南，因为 JDK 源代码始终只需单击 1 次。

# apache-camel - sftp using camel

> ID：13911318
> 
> 赞同：1
> 
> 时间：2012-12-17T09:20:30.700
> 
> 标签：apache-camel

I am trying to use sftp using camel, and getting jsch esception. The route that I created for the SFTP -

```
<camelContext xmlns="http://activemq.apache.org/camel/schema/spring">
    <package>myGroupId</package>
    <route>
      <from uri="file:src/srcData?noop=true"/>
      <choice>
        <when>
          <xpath>/person/city = 'London'</xpath>
          <to uri="file:src/targetData/UK"/>
        </when>
        <when>
          <xpath>/person/city = 'Chicago'</xpath>
          <to uri="file:src/targetData/US"/>
        </when>
        <when>
          <xpath>/person/city = 'Tokyo'</xpath>
          <to uri="sftp://XXXserverXXX:22/dir1/subdir?username=testUser?password=testPwd&amp;binary=true"/>
        </when>
        <otherwise>
          <to uri="file:src/targetData/OT"/>
        </otherwise>
      </choice>
    </route>
  </camelContext> 
```

But with this configuration I am facing the following exception - **com.jcraft.jsch.JSchException: reject HostKey:**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T14:20:34.997

您可能应该定义一个主机文件：“knownHostsFile”选项应该指向一个 ssh 已知主机文件，其中包含您要连接的主机的公钥。

它实际上记录在这里：[http ://camel.apache.org/ftp2.html](http://camel.apache.org/ftp2.html)

# wpf - Measuring time for WPF Databinding processing

> ID：13911320
> 
> 赞同：3
> 
> 时间：2012-12-17T09:20:42.540
> 
> 标签：wpf, data-binding, mvvm, performance

I am to evaluate several competing frameworks for WPF components which process large amounts of data (100000 entries and up). Thus, I need to time the real performance. As all our software is strictly MVVM/Data binding driven, that is the test environment I use. What I need is to find a way to measure time between my view model sets some value and the end of rendering by the view. Visually it takes several seconds, but I'd like to have exact measurements.

I can of course start a stopwatch when setting the property, but how do I find out that the rendering is ready? Is there an event or something for this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T10:53:53.190

也许它不会给你确切的措施，但一个简单的方法是使用 Dispatcher

```
var sw = new StopWatch();
sw.Start();
//Set value and raise property changed
Dispatcher.CurrentDispatcher.BeginInvoke((Action)(() =>
{
   sw.Stop();

}), System.Windows.Threading.DispatcherPriority.Loaded); 
```

Loaded 优先级略低于 Render 优先级，因此秒表将在视图渲染后停止。

# c++ - 此作业是否创建副本？

> ID：13911322
> 
> 赞同：2
> 
> 时间：2012-12-17T09:21:04.510
> 
> 标签：c++

创建这个新对象 会产生`v`一个全新的对象还是只是引用相同的对象空间`*this`？

`Vector2 v = *this;`

我不希望它实际上是在创建一个新对象，但是我在一个示例应用程序中看到了这段代码，该应用程序随后操纵了这个新对象，即使这段代码位于一个设置为`const`. 因此，我希望这个对象 ,`v`实际上完全是一个单独的内存空间，而不是`*this`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:21:39.263

它正在创建一个新对象，是的 - 但通过初始化，而不是赋值。

但是，您可以通过使用引用来绕过它`Vector2& v = *this;`，在这种情况下，它是（或者，如果方法是）`v`的别名。`*this``const Vector& v = *this``const`

造成这种情况的原因正是您所说的-因为发生这种情况的方法是`const`，无法变异`*this`-因此您需要`const`它的非副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:24:51.377

假设你在一个`Vector2`方法中，`=`你正在使用的这个操作符被称为*复制赋值*是有原因的。现在，无论是深拷贝、浅拷贝（复制指针，但不复制指针指向的对象）还是取决于操作符的实际实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:22:24.330

是的，`v`是一个全新的对象`*this`。

# vb.net - vb.net 检查函数是否不返回任何内容

> ID：13911323
> 
> 赞同：0
> 
> 时间：2012-12-17T09:21:10.233
> 
> 标签：vb.net

我有一个 vb.net 函数，我正在做一些事情，它返回一个 gridview 以在电子邮件中发送它。问题是当我在电子邮件中调用该函数时，即使函数没有返回任何内容，也会发送电子邮件。我根本不发送空白电子邮件。我想当函数什么都不返回时，它不应该发送电子邮件。这是我的功能

```
Public Function emaildata(ByVal grdv As GridView, ByVal chk As String, ByVal celpos As Integer) As GridView
        Dim comm As OleDbCommand = New OleDbCommand()
        Dim bpv As String = ""
        Dim gv As New GridView
        For Each gvrow As GridViewRow In grdv.Rows
            Try
                Dim rdobtn As RadioButtonList = CType(gvrow.FindControl(chk), RadioButtonList)
                If rdobtn.SelectedValue.Equals("5") Or rdobtn.SelectedValue.Equals("1") Or rdobtn.SelectedValue.Equals("6") Or rdobtn.SelectedValue.Equals("4") Or rdobtn.SelectedValue.Equals("2") Then
                    If bpv <> "" Then
                        bpv += ","
                    End If
                    bpv += gvrow.Cells(celpos).Text
                    comm.CommandText = "SELECT row_number() over(order by rownum) Sr, to_char(chq_num) Cheque#,to_char(bpv_amt,'9,999,999,999') Amount,vch_nar Narration,bnf_nam PartyName,acc_des Bank from  CHECK_DATA where bpv_num in(" & bpv.ToString() & ") and BPV_DTE=to_date('" & TreeView2.SelectedValue & "') union all SELECT null,'Total :',to_char(sum(bpv_amt),'9,999,999,999') Amount,null,null,null from  CHECK_DATA where bpv_num in(" & bpv.ToString() & ") and BPV_DTE=to_date('" & TreeView2.SelectedValue & "')"
                    comm.CommandType = CommandType.Text
                    comm.Connection = con
                    Dim da As New OleDbDataAdapter(comm)
                    Dim ds As New DataSet
                    da.Fill(ds)
                    gv.DataSource = ds
                    gv.DataBind()
                End If
            Catch ex As Exception
                Response.Write("There is Problem In Cheque Approval System Please Contact With IT")
            End Try
        Next
        Return gv
    End Function 
```

我在电子邮件功能中将其称为这样的主题

```
email("malik.adeel@shakarganj.com.pk", "[Cheque Approval] GM Finance Reviewed (" & TreeView2.SelectedValue & ")" & subsmcnt(GridView5, "chkStatusGM", 4), gridhtm(emaildata(GridView5, "chkStatusGM", 4))) 
```

`emaildata(GridView5, "chkStatusGM", 4)`如果不返回任何电子邮件，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:32:31.857

可能最简单的方法是检查`GridView`包含属性：`GridViewRows`[`Count`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewrowcollection.count.aspx)

```
Dim grdEmail = emaildata(GridView5, "chkStatusGM", 4)
If grdEmail.Rows.Count > 0
    email("malik.adeel@shakarganj.com.pk", 
          "[Cheque Approval] GM Finance Reviewed (" & TreeView2.SelectedValue & ")" & subsmcnt(GridView5, "chkStatusGM", 4), 
          gridhtm(grdEmail))
End If 
```

# java - Modifying methods across classes

> ID：13911324
> 
> 赞同：-1
> 
> 时间：2012-12-17T09:21:13.723
> 
> 标签：java, hook

I am rather sure that this is impossible, but I think I might as well try. I have some existing code which I do not own, and I want to keep my code completely seperate, say this was the original class

```
public class myClass
{
    public static void doStuffs()
        {
             x = x + 1;
        }
} 
```

and the other class had:

```
public static void setData()
       {
             //Set the data
       } 
```

Is it possible to call doStuffs() when setData() is called without modifying the the actual setData() method? If so how?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:37:16.243

可以通过字节码检测： [ByteCodeInstrumentation](http://www.informit.com/guides/content.aspx?g=java&seqNum=585)

有几个库可以提供帮助，例如[ASM](http://asm.ow2.org/)、[Javassist](http://www.jboss.org/javassist)等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:24:04.597

是的，可以使用[Javaassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)。
您可以使用此库在运行时修改字节码

# sql - SQL One result per match

> ID：13911325
> 
> 赞同：0
> 
> 时间：2012-12-17T09:21:14.760
> 
> 标签：sql, oracle11g

I've created a query that gives prices for every product ordered by creation date.

What I now need is to only return **one** row per product, i.e. one price per product.

```
SELECT p.product_id, p.price, p.creation_date
FROM PRICE p
INNER JOIN PRODUCT pr
ON p.product_id = pr.product_id 
AND p.filter_id = 3 
AND (p.store_id IN (1,2,3,4) OR p.price_type = 'A')
ORDER BY p.creation_date DESC 
```

Currently this query returns several prices per product, since several match, but I only want the newest one of those. The ORDER BY p.creation_date DESC gives the price I want as the first in the list, I want that first entry to be the only result for that product.

I've tried rownum = 1, but that only gives one result for the whole query. Please note that this is an **Oracle Database**, so as far as I know TOP does **not** work, same goes for LIMIT.

I've treid googling it, but I can't find examples showing exactly this issue.

**I forgot to mention: There are some prices which have the same creation date for the same product, so there has to be a limit of only giving the first entry for those too**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:32:45.947

使用 row_numer() 窗口函数仅获取最新行：

```
select * from (
  SELECT 
    p.product_id, 
    p.price, 
    row_number() over (partition by product_id order by p.creation_date desc) rn,
    p.creation_date
  FROM PRICE p
  INNER JOIN PRODUCT pr
    ON p.product_id = pr.product_id 
    AND p.filter_id = 3 
    AND (p.store_id IN (1,2,3,4) OR p.price_type = 'A') 
) where rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:28:41.553

你可以试试这个来获取产品的价目表

```
SELECT p.product_id, p.price ,first_value(p.price) over (partition by product_id
                                            order by  p.creation_date desc) new_price, p.creation_date
    FROM PRICE p
    INNER JOIN PRODUCT pr
    ON p.product_id = pr.product_id 
    AND p.filter_id = 3 
    AND (p.store_id IN (1,2,3,4) OR p.price_type = 'A') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:30:22.787

我不明白为什么您需要加入产品，因为...您在返回的行中没有使用任何产品行...

您可以尝试：

```
SELECT p.product_id, MAX(p.price),  p.creation_date
FROM PRICE p
INNER JOIN 
   (SELECT pm.product_id, MAX(pm.creation_date)
    FROM PRICE pm
    GROUP BY pm.product_id) most_recent_price
    ON most_recent_price.product_id = p.product_id
WHERE p.filter_id = 3 
AND (p.store_id IN (1,2,3,4) OR p.price_type = 'A')
GROUP BY p.product_id, p.creation_date 
```

# c# - Bypassing null return from data access methods with tuple?

> ID：13911326
> 
> 赞同：0
> 
> 时间：2012-12-17T09:21:16.783
> 
> 标签：c#, tuples, return-value, data-access-layer

I have this data access method that return the availability of a lot in our ERP:

```
public JDEItemLotAvailability GetLotAvailabilityF41021(string _lot)
        {
            JDEItemLotAvailability _retValue = new JDEItemLotAvailability();
            _retValue.Lot = _lot;
            using (OleDbConnection con = new OleDbConnection(_ERPConfig.ConnectionString))
            {
                OleDbCommand cmd = new OleDbCommand();
                cmd.CommandText =
                    "select max(lilotn) lilotn,max(trim(limcu)) limcu,max(lilocn) lilocn," +
                    "max(lipqoh/100) lipqoh,max(liitm) liitm,max(imlitm) imlitm," +
                    "max(concat(imdsc1,imdsc2)) as imdsc,max(imuom1 ) imuom1 " +
                    "from "+ _ERPConfig .AS400Library +".f41021" + " left outer join proddta.f4101 on liitm=imitm " +
                    "where lilotn = ?";
                cmd.Parameters.AddWithValue("@lilotn", _lot);
                cmd.Connection = con;
                con.Open();
                OleDbDataReader rdr = cmd.ExecuteReader();
                if (rdr.HasRows)
                {
                    rdr.Read();
                    if (rdr["lilotn"] != DBNull.Value)
                    {
                        _retValue.Code = rdr.GetString(rdr.GetOrdinal("imlitm"));
                        _retValue.ShortCode = (int)rdr.GetDecimal(rdr.GetOrdinal("liitm"));
                        _retValue.Description = rdr.GetString(rdr.GetOrdinal("imdsc"));
                        _retValue.PrimaryUnitCode = rdr.GetString(rdr.GetOrdinal("imuom1"));
                        _retValue.AvailableQuantity = (int)rdr.GetDecimal(rdr.GetOrdinal("lipqoh"));
                        _retValue.BranchPlant = rdr.GetString(rdr.GetOrdinal("limcu"));
                        _retValue.Location = rdr.GetString(rdr.GetOrdinal("lilocn"));
                    }
                }
            }
            return _retValue;
        } 
```

In case the method doesnt have rows the lot that will be returned has only one data field filled. Thats the way i am checking on above bussiness layer if it was successfull or not.

I dont like it. Someone mentioned tuple as a solution.

I guess i will have my method return a `tuple<MyObject, bool>` for example ?

**Added info:** I would like to be able to return also an answer to "why the object is null?". I am thinking of returning a tuple of object and an ENUM specifying the reason.

**UPDATE:**

I think i am gonna go this route:

Return a NULL object reference from data access method and have the BLL method return a `tuple<Myobject,ENUMreason>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:24:29.370

只返回 null 并检查数据层中是否有任何数据怎么样，以便在您使用它的任何地方，行为都是相同的。

# javascript - 如何在客户端代码中使用 JQuery 实现缓存？

> ID：13911328
> 
> 赞同：0
> 
> 时间：2012-12-17T09:21:20.433
> 
> 标签：javascript, jquery, caching

我想使用缓存在另一页中使用一个页面的值。谁能建议我如何使用 jQuery 使用缓存？

在几个网站上搜索后，我找到了这个链接： http: [//markdaggett.com/blog/2012/03/28/client-side-request-caching-with-javascript/](http://markdaggett.com/blog/2012/03/28/client-side-request-caching-with-javascript/)。它使用一种`$.Cache.add(key,value);`方法。

当我在我的 aspx 页面中使用它时，它会引发错误。我需要添加任何文件来实现缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:24:02.653

如果您想在一个网页中存储一个值，您可以在另一个页面（在同一域上）中检索该值，您可以将其存储在 cookie 或本地存储中。

浏览器缓存整个 Web 资源（页面、图像、脚本等），而不是单个数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:30:55.793

+1 使用本地存储。

这是一个不错的小插件，用于将 localStorage 与 jQuery（包括文档）一起使用：http: [//upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/](http://upstatement.com/blog/2012/01/jquery-local-storage-done-right-and-easy/)

此插件使用 cookie 作为不支持 localStorage 功能的浏览器的后备

# css - 需要边距左/右帮助

> ID：13911335
> 
> 赞同：-3
> 
> 时间：2012-12-17T09:21:58.663
> 
> 标签：css, canvas

我在水平居中画布时遇到问题。显示：添加表格以使其垂直居中。很奇怪。

```
html, body {
    width:  100%;
    height: 100%;
    margin: 0px;
}

#container {
    border: solid 1px #000;
    height: 100%;
    width: 85%;
    position: absolute;
    right: 0;
    display:table;
}

#container2 {
    display:table-cell;
    vertical-align:middle;
}

#container img {
    max-width: 100%;
    max-height: 100%;   
}​

<div id="container">
    <div id="container2">
    <img src="http://cultureandcommunication.org/tdm/nmrs/fa1/files/2010/10/lolcats4.jpg" />
    </div>
</div>​ 
```

jsfiddle.net/tGtDv/1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:24:38.787

块元素可以通过设置 margin left 和 right 来居中`auto`。

```
div.container2 {
    margin-left: auto;
    margin-right: auto;
} 
```

如果你想水平和垂直对齐中心，你需要一种不同的方法来设置宽度和高度。

```
div.container2 {
    height: 200px;
    left: 50%;
    margin-left: -100px;
    margin-top: -100px;
    /* position: absolute; */
    position: fixed;
    top: 50%;
    width: 200px;
} 
```

在这种情况下，您将元素定位在其父元素左侧 50% 和右侧 50% 的位置。因为 HTML 元素的原点位于左上角，所以您必须稍微移动一下。这就是利润的用途。

# ruby-on-rails - Passing has value from view to controller in rails

> ID：13911337
> 
> 赞同：1
> 
> 时间：2012-12-17T09:22:07.133
> 
> 标签：ruby-on-rails, hash, will-paginate

Hey guyz I want to pass a value from view with will_paginate and want to access this value in controller as params[:user][:id]. How will I do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:36:50.273

好的，所以你想做：

```
<%= will_paginate @user_rep, params: { start_date: @start_date, end_date: @end_date, user: @user.attributes.to_hash } %> 
```

或者如果你想手工完成

```
<%= will_paginate @user_rep, params: { start_date: @start_date, end_date: @end_date, user: { id: @user_id } } %> 
```

# java - 网络服务设计

> ID：13911342
> 
> 赞同：0
> 
> 时间：2012-12-17T09:22:26.730
> 
> 标签：java, servlets

我有一个用户要求有一个网页，他们可以在其中对存储在数据库中的用户列表执行 CRUD 操作。它将托管在 Tomcat 上。
我将一个快速的 Servlet 放在一起，它从请求中获取 5 个参数，并使用这些数据在数据库中创建一个用户名。现在我想让用户能够输入用户名并单击一个按钮，如果该用户名存在于数据库中，那么它将被返回并填充页面以允许用户对数据执行一些编辑。我的问题是，我应该为这个数据查找服务创建一个新的 Servlet，还是以某种方式将所需的功能硬塞到在数据库中创建用户名的现有 servlet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:38:38.930

您应该遵循的 MVC 模式。

```
 JSP
              |
              |
            SERVLET
              |
              |
      ---------------------------------
      |       |         |              |
      |       |         |              |
SERVLET       |        DATABASE       JAVA LOGIC
             JSP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:25:29.073

我不认为将这个功能放在同一个 servlet 中是不合理的。您在相同的资源 (db) 上进行操作，并且功能是相互关联的，因此将其放在相同的功能组件中是有意义的。

当您在做一些根本不同的事情时，例如在不同的数据库上操作，或者需要单独部署该功能（例如预订销售与浏览信息），或者您需要应用 servlet，我会开始将功能拉入不同的 servlet针对不同的组件进行不同的过滤。

要在下面回答您的问题，您需要以某种方式区分不同的操作。选项包括：

1.  修改 URL 路径，例如[http://example.com/entity/update](http://example.com/entity/update)与[http://example.com/entity/delete](http://example.com/entity/delete)。您可以检查 servlet 中的请求路径
2.  提供操作参数，例如[http://example.com/entity?operation=delete&](http://example.com/entity?operation=delete&) ...

第一个示例可以通过提供映射到不同路径的不同 servlet 来轻松处理。但是，我认为提供这些 servlet 和映射的开销超过了简单检查请求路径的难度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:03:26.333

在这种情况下，MVC 设计模式最适合！有一个单独的`Model`类用于查找操作。在这种情况下，servlet 成为一个控制器。

# ruby-on-rails - Rails 序列化给出了错误的字符

> ID：13911349
> 
> 赞同：0
> 
> 时间：2012-12-17T09:23:09.357
> 
> 标签：ruby-on-rails, postgresql, encoding, character-encoding

我有一个使用序列化字段的类，但发现我的一些文本在输入普通文本后会出现奇怪的字符。这与编码有关吗？我该如何解决？

我将 Heroku 与他们的 postgresql 数据库一起使用。在 SQLite 中执行此操作时，它就像一个魅力。

SQLite：

```
Ik zeg wat ik voel.   Doe ik ... 
```

Postgres：

```
Ik zeg wat ik voel.â¨â¨ Doe ik ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:27:27.493

首先检查你的 postgresql 和你的系统编码它的 UTF-8（最安全），另外，检查**config/database.yml**你是否为 postgres 连接设置了编码 UTF-8。

如果这不能解决问题，则将 yaml 引擎更改为 syck，在您的文件**config/boot.rb 上**写入

```
require 'yaml'
YAML::ENGINE.yamler = 'syck' 
```

那应该可以解决奇怪的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T12:34:11.610

在 postgres 中，您正在解释 ISO-8859-1 中的 UTF-8 字节。鉴于在您的帖子中，有 2x [U+2028 行分隔符](http://www.fileformat.info/info/unicode/char/2028/index.htm)，其 UTF-8`0xE2 0x80 0xA8`表示为邮政。`â¨``0x80`

因此，无论您查看结果是什么，问题都是为 UTF-8 获取正确的字节，但将它们解释为 ISO-8859-1。

# c# - 在 C# 应用程序和 Matlab 之间建立连接

> ID：13911355
> 
> 赞同：-1
> 
> 时间：2012-12-17T09:23:28.727
> 
> 标签：c#, matlab

我想制作一个 C# 应用程序，它接受 matlab 输入，然后从 matlab 获取值（输出）并最后保存输出......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:42:01.377

基本上，您可以使用以下策略（更多信息在这里： http: [//www.mathworks.nl/help/matlab/external-interfaces.html](http://www.mathworks.nl/help/matlab/external-interfaces.html)）：

1）使用.Net库中的Matlab [http://www.mathworks.nl/help/matlab/using-net-libraries-in-matlab.html](http://www.mathworks.nl/help/matlab/using-net-libraries-in-matlab.html)

2）使用Matlab提供的COM接口[http://www.mathworks.nl/help/matlab/com-interface.html](http://www.mathworks.nl/help/matlab/com-interface.html)

3）使用Matlab引擎（即作为计算服务器）[http://www.mathworks.nl/help/matlab/calling-matlab-engine-from-cc-and-fortran-programs.html](http://www.mathworks.nl/help/matlab/calling-matlab-engine-from-c-c-and-fortran-programs.html)

# eclipse - 从 Eclipse 市场下载 Eclipse 插件后，如何开始使用它？

> ID：13911368
> 
> 赞同：2
> 
> 时间：2012-12-17T09:24:24.870
> 
> 标签：eclipse, plugins, zest

在这种情况下，插件是 Zest。我已经下载了“Java 开发者的 Eclipse（Juno）”。我知道这与`manifest.mf`依赖关系有关。但我不知道它们是什么。我是 Eclipse 和 Java 编程的新手。Zest 教程提到了 Eclipse 用于 RCP 开发。其他版本不能用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T10:17:39.590

可从 Eclipse Marketplace 下载两种插件：为 Eclipse 贡献新功能的插件和提供可编程框架的插件。热情是后者之一。

要使用这样的框架（类似于其他 Java 库），您必须有一个 Java 项目，该项目的类路径上有相应的 jar（以及它们的依赖项！）。

实现这一点的最简单方法是在 Eclipse 中创建一个插件项目，并添加 Zest jar 作为直接依赖项，还添加 SWT 和可能的 JFace 作为间接依赖项）。在这种情况下，您可以在项目中使用 Zest API 并创建相应的图形可视化。

在 Zest 的情况下，也可以创建一个简单的 Java 项目（与 Eclipse 无关），因为代码库不使用任何 Eclipse 特定的功能，另一方面，它依赖于 SWT 和 JFace，所以你必须也添加相应的依赖项。有关详细信息，请参阅[JFace 的 wiki 条目](http://wiki.eclipse.org/JFace#Deploying_a_Java_Program_That_Uses_SWT_and_JFace)以了解如何管理它。如果您想使用 Zest，请按照相同的步骤操作，但也要复制 Zest 和 Draw2d jar。

我希望这个解决方案足够清楚 - 如果没有，请随时提出更多问题。

# android - OpenGL ES 线程上的垃圾收集

> ID：13911374
> 
> 赞同：1
> 
> 时间：2012-12-17T09:25:03.630
> 
> 标签：android, opengl-es, garbage-collection

我的最后一个问题没有得到解答，所以我正在尝试不同的方法。我将许多纹理（256x256 RGBA888）动态加载到内存中，并在需要时丢弃它们。问题是有时当我将纹理上传到`OpenGL`ES 时需要 40-80 毫秒，很少更多。我发现，这个缓慢的时间是在垃圾收集之后。问题是，这`GC`有时会阻塞`GL`线程（FPS 下降），有时会阻塞纹理加载器线程（OK）。有没有一种好方法可以不允许`GC`在`GL`线程上发生？

`System.gc()`我尝试在每 1、2、3...n 个纹理被解码后调用纹理加载器线程，并且这`GC-ing`在`GL`线程上有效地删除了，但现在纹理加载速度要慢得多，因为该线程必须等待 GC 完成。使“n”更大可以使加载更快，但`GC`在`GL`线程上更有可能，因此动画不连贯。

对于在不同线程中解码的位图，是否有某种方法可以`GC-ing`在线程上删除？`GL`我不在`GL`线程上解码/分配任何位图，并且`GC-ing`仅在加载新纹理时发生。

编辑：应用程序的目标是 android 3.2 和更新版本，还有手机。这发生在手机（HTC One S - 4.0.3）和平板电脑（Nexus 7 - 4.1、Galaxy Tab 2 10.1 - 3.2 和 4.0、Acer Icona A200 - 4.0）上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:35:30.813

您不能完全禁用垃圾收集，它将由 Dalvik VM 启动，而不会受到您的干扰。

您可以通过使用一些自定义加载纹理来最小化内存分配和释放，例如使用预分配数组来存储源纹理数据等。正如您所提到的，所有纹理都具有相同的尺寸和颜色深度，因此您将需要一个临时缓冲区任何图像的大小相同（256x256x4 = 262144 字节）。

最终，您可以将 OpenGL 代码移动到 JNI C/C++ 代码，以按照您想要的方式管理内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:16:35.660

感谢这个[视频](http://www.youtube.com/watch?v=rsQet4nBVi8)，有一个简单的解决方案，适用于相同大小的图块并针对 Android 3.0 及更高版本。

[BitmapOptions.inBitmap](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap)将为每个新图块重用一个`Bitmap`，因此不再有 furios GC-ing。

# jquery - 加载内容ajax jquery时如何指定元素

> ID：13911375
> 
> 赞同：1
> 
> 时间：2012-12-17T09:25:06.197
> 
> 标签：jquery, ajax, load

如何在下面的代码中指定要从 pageurl 中检索内容的元素？

```
 $(function () {
     $("a[rel='sort']").click(function (e) {
         //e.preventDefault(); 
         /*  
    if uncomment the above line, html5 nonsupported browers won't change the url but will display the ajax content;
    if commented, html5 nonsupported browers will reload the page to the specified link. 
    */

         //get the link location that was clicked
         pageurl = $(this).attr('href');

         //to get the ajax content and display in div with id 'content'
         $.ajax({
             url: pageurl + '?rel=sort',
             success: function (data) {
                 $('#content1').html(data);
             }
         });

         //to change the browser URL to 'pageurl'
         if (pageurl != window.location) {
             window.history.pushState({
                 path: pageurl
             }, '', pageurl);
         }
         return false;
     });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:29:05.093

使用 jQuery.load()] 事件

详情：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

```
$(function(){
    $("a[rel='sort']").click(function(e){
     pageurl = $(this).attr('href')+"?rel=sort #elementToBeLoadedIn";
    $('#content1').load(pageurl);
    .
    .
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:32:29.920

您必须在变量中获取响应，然后找到您想要的内容

试试这个

```
$.ajax({url:pageurl+'?rel=sort',success: function(data){
    var content = $(data).find("#IDofYouContent");
    $('#content1').html(content);
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:29:54.657

您将使用该`load()`功能，如下所示：

```
$('#content1').load(pageurl + '?rel=sort #elementToBeLoadedIn'); 
```

查看文档以获取更多信息：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

# ruby-on-rails - Rails 关系模型错误

> ID：13911378
> 
> 赞同：2
> 
> 时间：2012-12-17T09:25:13.193
> 
> 标签：ruby-on-rails, activerecord

我`has_many`在某些模型中有关系，并接受它的嵌套属性。在未通过此关系的验证后，属于某个属性的所有错误都存储在错误哈希的同一键中。

部分请求：

```
"values_attributes":[{"value":"","attribute_id":1,"id":1,"auction_id":1},{"value":"6.6","attribute_id":3,"id":7,"auction_id":1}] 
```

回复：

```
"values.value":["can't be blank","must be an integer"] 
```

这里，`can't be blank`error 属于第一个属性，属于`must be an integer`第二个。所以我需要在控制器中写这样的东西：

```
errors = @auction.errors.to_hash
errors['values'] = Hash[@auction.values.reject{ |v| v.valid? }.collect{ |v| [v.attribute_id, v.errors.to_hash]}] 
```

了解错误属于哪个模型。

是否存在更干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:56:34.710

如果您需要访问子记录中的确切错误，则不得通过父错误集合进行访问。子记录本身有一个错误收集，您可以在其中获得详细的访问权限。父级上的聚合错误仅说明该记录无法保存，因为存在无效的子记录。

如果您需要所有错误，则需要自己汇总它们。（就像你对你的`collect`电话所做的那样）。如果多次使用此代码，请考虑将其移入方法中`Auction`

```
class Auction
  def aggregated_errors
    errors = self.errors.to_hash
    errors['values'] = Hash[values.reject{ |v| v.valid? }.collect{ |v| [v.attribute_id, v.errors.to_hash]}]
    errors
  end
end 
```

如果您需要聚合不同模型和关联的错误，您可以进一步抽象`collect`调用以跨模型重用它。

# c++ - C++ 是否将类返回到 const 引用？

> ID：13911380
> 
> 赞同：3
> 
> 时间：2012-12-17T09:25:23.343
> 
> 标签：c++

假设有一个返回 a 的方法`std::set`：

```
std::set<string> MyClass::myMethod() const
{
   std::set<string> result;
   // ... some code to fill result ...
   return result;
} 
```

在调用方，我们可以通过`myMethod`两种方式存储结果：

```
void MyClass::test()
{
const std::set<string>  s1 = myMethod();  // 1
const std::set<string>& s2 = myMethod();  // 2 (using reference)
// ... some code to use s1 or s2 ...
} 
```

我的问题是：

*   它们之间有什么区别吗？
*   哪种方式更好更高效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:27:20.023

```
const std::set<string>  s1 = myMethod();  // 1 
```

的返回`myMethod`被复制到 s1 中。根据大小，这可能需要很长时间。

```
const std::set<string>& s2 = myMethod();  // 2 (using reference) 
```

存储对返回的临时对象的引用`myMethod`。这比上述方法少了一个副本，所以它要快一点（假设没有优化）。

这是一个[特殊情况功能](https://stackoverflow.com/questions/2784262/does-a-const-reference-prolong-the-life-of-a-temporary)，用于引用一个变量，否则该变量将不再存在`;`。仅当它是`const&`（在您的示例中为）或 Rvalue 引用时才有效 - `&&`（感谢@Kos）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T09:26:36.233

从理论上讲，第二个版本更好，因为它不需要额外的副本。

在实践中，RVO 可能会发挥作用，因此它们应该大致相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T09:27:29.820

是的，这些是不同的：

1.  `const std::set<string> s1 = myMethod(); // 1`: 复制临时对象

2.  `const std::set<string>& s2 = myMethod(); // 2 (using reference)`: 临时文件的生命周期被延长，它避免了一份副本

请参阅[第 88 周的 Guru](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)。请注意，编译器可以通过使其具有相同的效率来优化它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T09:35:02.143

在实践中不太可能有任何差异。我已经测试了以下内容`g++ 4.7.2`：

```
#include <string>

extern std::string f();
extern void g(const std::string&, const std::string&);

int main() {
  std::string        x = f();
  const std::string& y = f();
  g(x, y);
} 
```

它为两个调用生成相同的代码`f()`：

```
LEHB0:
        call    __Z1fv
LEHE0:
        leaq    16(%rsp), %rdi
LEHB1:
        call    __Z1fv
LEHE1:
        leaq    16(%rsp), %rsi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T09:27:48.993

1.  第一个版本将创建`std::set`对象，并将其移动到这一行

    `const std::set<string> s1 = myMethod();`

2.  这将延长`std::set`方法中创建的对象的生命周期：

    `const std::set<string>& s2 = myMethod();`

因此，在性能方面两者都在做同样的事情。

# c# - C# 线程参数无效

> ID：13911384
> 
> 赞同：-4
> 
> 时间：2012-12-17T09:25:37.930
> 
> 标签：c#

我从旧帖子中获得了此代码

```
public delegate void Worker();
private static Thread worker;

public static void Init(Worker work)
{
    worker = new Thread(new ThreadStart(work));
    worker.Start();
}

public static void Work()
{
    string result = testing;
} 
```

我通过添加参数来修改代码，当我尝试调用 Init("AA") 时出现错误“最佳重载方法有一些无效参数”

以下是编辑后的代码

```
 public delegate void Worker();
private static Thread worker;

public static void Init(Worker work)
{
    worker = new Thread(new ThreadStart(work));
    worker.Start();
}

public static void Work(string testing)
{
    string result = testing;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:29:03.697

您的`Init`方法需要一个委托并且您正在传递一个字符串，这就是没有重载的原因。

你想做：`Init(Work)`

PS：您的问题与线程无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:31:10.183

如果您想将一些数据传递给线程，您可以使用[ParametrizedThreadStart](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)或匿名方法：

```
private static Thread worker;

public static void Init(string testing)
{
    // passing anonymous method, which will capture parameter
    worker = new Thread(() => Work(testing));
    worker.Start();
}

public static void Work(string testing)
{
    string result = testing;
} 
```

* * *

```
private static Thread worker;

public static void Init(string testing)
{
    // passing PrametrizedThreadStart delegate
    worker = new Thread(Work);
    worker.Start(testing); // passing parameter
}

// PrametrizedThreadStart delegate accepts object as parameter
public static void Work(object testing)
{
    string result = (string)testing;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:33:25.910

问题是您的`Worker`代表期望接受一个`string`参数。您需要更新它，*然后*传入参数，例如

```
public delegate void Worker(string str);
private static Thread worker;
public static void Init(Worker work)
{
    worker = new Thread(work);
    worker.Start("AA");
}
public static void Work(string testing)
{
    string result = testing;
} 
```

# objective-c - AFNetworking 中的 registerHTTPOperationClass 实际上是做什么的？

> ID：13911385
> 
> 赞同：6
> 
> 时间：2012-12-17T09:25:37.850
> 
> 标签：objective-c, ios, http, afnetworking

我试图了解`AFNetworking`框架是如何工作的。但是有一点细节我不明白。

我写了一个`AFHTTPclient`比使其成为单例类的子类，并添加了一个初始化器，它执行以下操作：

```
- (id)initWithBaseURL:(NSURL *)url {
    self = [super initWithBaseURL:url];
    if (self) {
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
    }
    return self;
} 
```

我从网上找到的教程中得到了这段代码，但我不明白为什么`JSONRequestOperation`如果我想取回 JSON 数据，我为什么必须注册我的课程？如果我这样做，幕后究竟会发生什么？`registerHTTPOperation`类究竟是做什么 的？

`AFNetworking`PS：是否有很好的文档，其中包含互联网上某个地方的示例和深入解释？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T09:29:08.493

使用 getPath 和 postPath 方法时，[`registerHTTPOperationClass:`](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/registerHTTPOperationClass%3a)on[`AFHTTPclient`](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#overview)将使用类集来处理您的请求。

在您给定的示例中， HTTPRequestOperation 设置为[`AFJSONRequestOperation`](http://afnetworking.github.com/AFNetworking/Classes/AFJSONRequestOperation.html)，这意味着对服务器的所有请求都将使用[`AFJSONRequestOperation`](http://afnetworking.github.com/AFNetworking/Classes/AFJSONRequestOperation.html). 将[`AFJSONRequestOperation`](http://afnetworking.github.com/AFNetworking/Classes/AFJSONRequestOperation.html)尝试使用[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)类解析来自服务器的结果。

如果您的服务器使用 XML 响应，您应该将 HTTPRequestOperation 设置[`AFXMLRequestOperation`](http://afnetworking.github.com/AFNetworking/Classes/AFXMLRequestOperation.html)为例如。

# wordpress - 使用 Wordpress 3.5 媒体管理器的 NHP 主题选项框架

> ID：13911386
> 
> 赞同：0
> 
> 时间：2012-12-17T09:25:39.043
> 
> 标签：wordpress, frameworks, media

谁能帮我根据“上传”类型为 NHP 主题选项框架创建一个新的字段类型，以便它使用 Wordpress 自 3.5 以来使用的新“媒体管理器”而不是媒体上传器。这对于与滑块一起使用将非常有用。

也许[这篇文章](https://stackoverflow.com/questions/13847714/wordpress-3-5-custom-media-upload-for-your-theme-options)会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:56:37.140

你很幸运，我需要同样的功能。我设法通过查看代码并应用与旧媒体管理器相同的覆盖技术来做到这一点。

事实上，我在[这里](http://japaalekhin.llemos.com/how-to-use-wp3-5-media-manager-in-your-plugin-or-theme)写了一篇关于它的教程。

这是javascript代码：

```
(function($){
    var doc = {
        ready: function(){
            // initialize only if our button is in the page
            if($('#btn_browse_files').length > 0){
                slider.init();
            }
        }
    },
    slider = {
        // the following 2 objects would be our backup containers
        // as we will be replacing the default media handlers
        media_send_attachment: null,
        media_close_window: null,
        init: function(){
            // bind the button's click the browse_clicked handler
            $('#btn_browse_files').click(slider.browse_clicked);
        },
        browse_clicked: function(event){
            // cancel the event so we won't be navigated to href="#"
            event.preventDefault();

            // backup editor objects first
            slider.media_send_attachment = wp.media.editor.send.attachment;
            slider.media_close_window = wp.media.editor.remove;

            // override the objects with our own
            wp.media.editor.send.attachment = slider.media_accept;
            wp.media.editor.remove = slider.media_close;

            // open up the media manager window
            wp.media.editor.open();
        },
        media_accept: function(props, attachment){
            // this function is called when the media manager sends in media info
            // when the user clicks the "Insert into Post" button
            // this may be called multiple times (one for each selected file) 
            // you might be interested in the following:
            // alert(attachment.id); // this stands for the id of the media attachment passed
            // alert(attachment.url); // this is the url of the media attachment passed
            // for now let's log it the console
            // not you can do anything Javascript-ly possible here
            console.log(props);
            console.log(attachment);
        },
        media_close: function(id){
            // this function is called when the media manager wants to close
            // (either close button or after sending the selected items)

            // restore editor objects from backup
            wp.media.editor.send.attachment = slider.media_send_attachment;
            wp.media.editor.remove = slider.media_close_window;

            // nullify the backup objects to free up some memory
            slider.media_send_attachment= null;
            slider.media_close_window= null;

            // trigger the actual remove
            wp.media.editor.remove(id);
        }
    };
    $(document).ready(doc.ready);
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T04:38:58.493

NHP 刚刚与 Redux Framework 合并，Redux 3.0 已经发布。它可以作为 Wordpress 插件运行或嵌入在主题中。你真的应该试试新版本。

[http://wordpress.org/plugins/redux-framework/](http://wordpress.org/plugins/redux-framework/)

它有完整的 Wordpress 媒体 3.5 支持，然后是一些。它不仅存储媒体 URL，还存储 ID 和全维度大小。

认真的，检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T08:34:29.410

fyi...http://reduxframework.com/ 是 NHP 的一个分支，并添加了 3.5 媒体加载器并修复了 NHP 的其他区域。

我刚刚切换到并且到目前为止还不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T11:31:21.520

请参阅我们的[vafpress 主题框架](http://vafpress.com/vafpress-framework)github 代码片段中的用法：

[WP < 3.5 后备的媒体管理器](https://github.com/vafour/vafpress-framework/blob/v1.1/vafpress/public/js/shared.js#L198-L263)

在代码中，还有这个变量 ( `vp_wp.use_new_media_upload`)，您需要通过 将其“公开”到您的 JS 代码中`wp_localize_script`，该变量需要说明您正在运行的 Wordpress 是否低于 3.5，如果低于 3.5 那么它是不应该使用新的媒体管理器，而是使用使用thickbox media-upload.php iframe的旧方法。

# c++ - Q_DECL_EXPORT 关键字含义

> ID：13911387
> 
> 赞同：20
> 
> 时间：2012-12-17T09:25:52.633
> 
> 标签：c++, blackberry-10

`Q_DECL_EXPORT int main(int argc, char **argv)`

这`Q_DECL_EXPORT`之前是什么`int main(...)`意思？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T09:35:45.013

摘自[QT 文档](https://doc.qt.io/qt-5/sharedlibrary.html)：

> 根据您的目标平台，Qt 提供包含必要定义的特殊宏：
> 
> *   Q_DECL_EXPORT 必须添加到编译共享库时使用的符号声明中。
> *   Q_DECL_IMPORT 必须添加到编译使用共享库的客户端时使用的符号声明。

我没有检查 QT 代码，但这个宏很可能会执行以下操作：

```
#ifdef _WIN32 || _WIN64
    #define Q_DECL_EXPORT __declspec(dllexport)
    #define Q_DECL_IMPORT __declspec(dllimport)
#else
    #define Q_DECL_EXPORT
    #define Q_DECL_IMPORT
#endif 
```

`__declspec(dllimport)`并`__declspec(dllexport)`告诉链接器从 DLL 中导入和导出（分别）符号。这是特定于 Windows 的。

在您的特定情况下，这个宏可能会被删除，因为`main()`很可能不是库的一部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T09:28:44.187

它不是关键字，它是一个宏，用于封装不同的编译器特定关键字以将函数声明为`exported`.

另请参阅[`Q_DECL_EXPORT`](http://qt-project.org/doc/qt-4.8/qtglobal.html#Q_DECL_EXPORT)和[创建共享库](http://qt-project.org/doc/qt-4.8/sharedlibrary.html)。

它通常与库一起使用来定义那些需要从库中导出的函数，以便被其他库或可执行文件导入（“使用”）。

到目前为止，我还没有看到这个`main`功能，但这可能是黑莓特有的东西。另一方面，本[教程](http://hecgeek.blogspot.co.uk/2011/10/qt-for-blackberry-playbook.html)也没有将宏与`main()`函数一起使用，因此可能可以将其删除。

# api - 如何使用 API 向 campfire 发送系统消息？

> ID：13911388
> 
> 赞同：1
> 
> 时间：2012-12-17T09:25:51.337
> 
> 标签：api, campfire

我在 GitHub 博客中看到过类似的内容：

![在此处输入图像描述](../Images/ef2805a071c44d958e0bfcd5066a6a64.png)

问题是：如何发送系统消息（带有绿色背景的消息）？我真的很想以这种方式发送部署消息，它真的会帮助我们的团队聊天。还是都是用户脚本？:(

# android - 如何在android 2.2的textarea中打开类型#的组合框

> ID：13911391
> 
> 赞同：0
> 
> 时间：2012-12-17T09:25:57.200
> 
> 标签：android, textchanged

我正在使用 android 2.2。我想要以下功能，我该如何实现。

我有一个文本区域，我正在其中写入文本，但是当我键入 # 时，它将打开组合框以从组合框中选择值。

喜欢

![在此处输入图像描述](../Images/2000da2087b73a25f3a749f311748c7a.png)

谁能知道这个我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:29:56.047

这是 PopupWindow 的自定义设计的[链接](http://android-er.blogspot.com/2012/03/example-of-using-popupwindow.html)。android.widget.PopupWindow 可用于显示任意视图。弹出窗口是一个浮动容器，出现在当前活动的顶部。这里还有一些[popWindow](https://stackoverflow.com/questions/13899062/focus-on-edittext-in-a-popup-window-goes-the-activity-to-sleep/13899205#13899205) 用法的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:33:41.447

请在这里查看[http://developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)，我想你想要这个：

![你在找这个吗？](../Images/5c4535b3c4512ceb0b83ad645d425d18.png)

无论如何，如果你想定制它，你可以做到。谢谢

# netbeans - Netbeans GUI 编辑器：如何使用 JScrollPane 顶级组件创建表单？

> ID：13911392
> 
> 赞同：1
> 
> 时间：2012-12-17T09:26:08.280
> 
> 标签：netbeans

Netbeans GUI 编辑器提供“新建 -> JPanel 表单...”，但是如何将 JScrollPane 作为顶级组件而不是 JPanel？

当然，JScrollPane 可以直接放在 JPanel 之下，但为什么要使用这种不必要的级别呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:58:46.547

**是的**！如果您可以按照以下简单步骤操作：

*   让我们进入 Tools->Templates->Swing GUI Forms

*   复制模板“JPanel Form”

![步骤1](../Images/00af0d33fe0db44f0487b8a48237cbca.png)

*   将副本重命名为“JScrollPane Form”

![第2步](../Images/96d37d79323d6ba6f826a33a65cb3fea.png)

*   在编辑器中打开副本

![第三步](../Images/2321b4f7ac1217a172edab7129032e07.png)

*   在“javax.swing.JScrollPane”中更改了“javax.swing.JPanel”...保存文件

![第4步](../Images/a8cb34341f611ac73f420e1a3d0dc56b.png)

*   向项目中添加一个新的 Swing 组件
    （哇！现在列表上出现了我们的新模板文件）

    ![第五步](../Images/9b248853dc1535e50150d361c55ba20c.png)

    *   选择此模板并享受！

    ![在此处输入图像描述](../Images/046b35a446ef34075c8d0390fa6b3cc4.png)

# trigger.io - 如何下载和存储图像以后不会被设备清除？

> ID：13911398
> 
> 赞同：1
> 
> 时间：2012-12-17T09:26:43.953
> 
> 标签：trigger.io

我有一个应用程序，它从服务器下载其产品数据（描述和图像）并将它们存储在本地以供离线使用。对于产品图像，我使用 forge.file.cacheURL 效果很好，但在我的 iPAD 上，当我使用其他应用程序时，这个缓存会在白天被清除。这导致我的应用程序只有描述文本可用，没有图像，用户必须连接到互联网并再次同步，这很烦人。有没有更好的方法来实现这个场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:20:59.287

您是否尝试过`forge.prefs`为此目的使用该模块？它允许您在本地持久保存键值对（很像 HTML5 本地存储）。[在 Trigger.io 的官方 API 文档](http://docs.trigger.io/en/latest/modules/prefs.html)中阅读有关确切语法的更多信息。

我不太确定是否可以使用此方法保存图像，但您可以轻松地将图像转换为字符串，反之亦然。查看 Robert Nyman 的这篇文章的第二章，了解如何[在 localStorage 中保存图像](https://hacks.mozilla.org/2012/02/saving-images-and-files-in-localstorage/)。

# c# - LINQ to XML - VB.NET to c#

> ID：13911401
> 
> 赞同：1
> 
> 时间：2012-12-17T09:27:11.650
> 
> 标签：c#, vb.net, linq-to-xml

在我的项目中有以下内容，用 VB.NET 编写：

```
 Dim items = From item In rssFeed.Elements("forecast").Elements("tabular").Elements("time") _
                    Select New WetherItem With {.time=item.Element("windDirection").Attribute("code").Value } 
```

这是如何用 C# 编写的？

我尝试了以下...

```
XElement rssFeed = XElement.Load(@"http://www.yr.no/sted/Norge/Rogaland/Karm%C3%B8y/Torvastad/varsel.xml");
var items = from item in rssFeed.Elements("forecast").Elements("tabular").Elements("time")
select new WetherItem { .time=item.Element("windDirection").Attribute("code").Value }; 
```

但我收到错误消息

> rssFeed.Elements("预测").Elements("表格").Elements("时间")
> 
> 错误 5 找不到源类型“System.Collections.Generic.IEnumerable”的查询模式的实现。未找到“选择”。您是否缺少“System.Linq”的引用或使用指令？c:\users\\documents\visual studio 2012\Projects\Database1\Database1\SqlStoredProcedure1.cs 32 30 Database1

我参考了 System.XML.Linq 和 System.Data.Linq

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:33:09.873

在顶部的 C# 代码文件中，您将看到 using 语句，在其中添加：

```
using System.Linq;
using System.Xml.Linq; 
```

如果属性名称`.`为`.time``time`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:36:01.537

请记住在文件顶部添加 using 语句，并在 c# 中添加查询：

```
var items = from item in rssFeed.Elements("forecast".Elements("tablular").Elements("time")
            select new WetherItem { 
                           time = item.Element("windDirection").Attribute("code").Value
                       }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-14T09:36:10.883

这是一个非常不寻常的问题，即使我在开发应用程序时也遇到过，因为 VS 既没有明确说明问题是什么，也没有适当的答案来解决这个问题。一个答案，我认为可能是：-

为您的项目添加另一个引用：- **使用 System.Linq；** *除了* **使用 System.Xml.Linq；**

```
using System.Linq;
using System.Xml.Linq; 
```

错误可能会消失，项目将建立。

* * *

如需更多帮助，请参考本文：-

[使用对 System.Xml.Linq 的引用的问题](https://social.msdn.microsoft.com/forums/vstudio/en-US/23a2e0b1-63e5-4aa7-ba46-0fca173bf348/query-xdocument-using-linq)

# ruby-on-rails - 如何在回形针中使用原始图像网址

> ID：13911406
> 
> 赞同：8
> 
> 时间：2012-12-17T09:27:24.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

回形针上传的图片的原始路径是什么。

```
has_attached_file :attachment,
  :url  =>           ":rails_root/public/photos/images/:id/:style/:basename.:extension",
  :default =>        ":rails_root/public/images/no-image-available.png",
  :styles =>          style_options,
  :default_style =>   :gallery 
```

和 style_options 是

```
 style_options = {  :thumbnail => {:geometry => '100x100'},
                     :profile_gallery =>  {:geometry => '184x247'}
                  } 
```

在我的公共文件夹中创建 3 个文件夹，同时上传一张图片 1\. 缩略图，2\. profile_gallary 3\. 原始。

在我的视图文件中，我调用

```
<%= photo.thumbnail_url %> 
```

我的问题是我想使用上传图片的原始路径。我不想对任何特定的 url 使用缩略图。如何使用原始路径。

感谢提前

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T09:34:17.423

```
<%= photo.attachment.url(:original) %> 
```

这将为您提供原始文件的路径，如果需要，您还可以获得其他样式：

```
<%= photo.attachment.url(:thumbnail) %>
<%= photo.attachment.url(:profile_gallery) %> 
```

# java - 在数据表primefaces中看不到行

> ID：13911409
> 
> 赞同：0
> 
> 时间：2012-12-17T09:27:31.950
> 
> 标签：java, jsf, primefaces

我对 java primefaces 有疑问，

我的 xhtml 如下；

```
<p:layoutUnit position="center">
            <h:form>
                <p:dataTable id="dataTable" var="car" value="#{myProjects.projects}" sortMode="multiple" rows="25" paginator="true">
                    <f:facet name="header">
                        Dahil Olduğum Projeler
                    </f:facet>

                    <p:column id="modelHeader" sortBy="#{projectsList.sector}">
                        <f:facet name="header">
                            <h:outputText value="Sektör" />
                        </f:facet>
                        <h:outputText value="#{projectsList.sector}" />
                    </p:column>

                    <p:column sortBy="#{projectsList.projectName}">
                        <f:facet name="header">
                            <h:outputText value="İşin Adı" />
                        </f:facet>
                        <h:outputText value="#{projectsList.projectName}" />
                    </p:column>

                    <p:column sortBy="#{projectsList.startDate}">
                        <f:facet name="header">
                            <h:outputText value="Başlangıç Tarihi" />
                        </f:facet>
                        <h:outputText value="#{projectsList.startDate}" />
                    </p:column>

                    <p:column sortBy="#{projectsList.endDate}">
                        <f:facet name="header">
                            <h:outputText value="Bitiş Tarihi" />
                        </f:facet>
                        <h:outputText value="#{projectsList.endDate}" />
                    </p:column>
                    <p:column>
                        <f:facet name="header">
                            <h:outputText value="Son Durum" />
                        </f:facet>
                        <h:outputText value="#{projectsList.lastStats}" />
                    </p:column>
                </p:dataTable>

            </h:form>

        </p:layoutUnit> 
```

而且我还有我的 MyProjects java 文件：

```
@ManagedBean(name="MyProjects")
@SessionScoped
public class MyProjects implements Serializable {

    private List<ProjectsList> projects;

    public MyProjects(){
        projects=new ArrayList<ProjectsList>();
    projects.add(new ProjectsList("asd","asd","asd","asd","asd"));
    projects.add(new ProjectsList("asd","asd","123","123","123"));
    projects.add(new ProjectsList("asd","asd","123","123","123"));
    projects.add(new ProjectsList("asd","asd","123","123","123"));
} 

public List<ProjectsList> getProjects(){
    projects.get(0);

       return projects;
    }

} 
```

当我想查看数据表 I 中的行时（例如，在这里我添加了 4 个条目），我只看到 4 行没有文本。

如何使条目可见？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:33:09.077

`<h:outputText value="#{projectsList.sector}" />`应该是`<h:outputText value="#{car.sector}" />`（并且对于表中的所有 EL 表达式都类似。如数据表的“var”属性中所定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:56:53.893

`var="car"`列中未使用数据表变量。一定是

```
<p:column sortBy="#{car.projectName}">
  <f:facet name="header">
   <h:outputText value="İşin Adı" />
  </f:facet>
  <h:outputText value="#{car.projectName}" />
</p:column> 
```

`car`这里也不是一个适当的变量。把它命名为
`var='project' value="#{myProjects.projects}"`

# delphi - 德尔福 5 的 Win7 小工具？

> ID：13911410
> 
> 赞同：0
> 
> 时间：2012-12-17T09:27:32.053
> 
> 标签：delphi, delphi-5, windows-desktop-gadgets

我有一些我正在考虑升级的复杂 Delphi5 项目。谁能告诉我：

1.  我必须升级到最早的 Delphi 版本才能`gadget`为 Windows7 开发一个，还是可以使用现有的 ActiveX 功能达到一个良好的标准？
2.  在哪个版本的 Delphi 中，它是为目的而构建的，或者对于新手来说更容易做到？

# mysql - 使用FIND_IN_SET时如何获取邮件在哪个字段？

> ID：13911414
> 
> 赞同：0
> 
> 时间：2012-12-17T09:28:00.540
> 
> 标签：mysql

我在 mysql 查询中使用 FIND_IN_SET 此查询将给出电子邮件 ID 在 from_email 或 to_email 中的输出。此查询运行良好。但问题是我无法检测到它最终在 to_email 或 from_email 中找到。我希望它最终只给我这封电子邮件所携带的领域。以下是我的电子邮件 ID

```
SELECT mail_id, from_firstname, from_lastname, from_email, to_firstname, to_lastname, to_email
FROM support_mail sm WHERE
( 

( FIND_IN_SET ('".$email_id."', sm.to_email) ) AND ( (sm.to_firstname <> '') AND (sm.to_firstname <> 'None') )

OR 

( FIND_IN_SET ('".$email_id."', sm.from_email) ) AND ( (sm.from_firstname <> '') AND (sm.from_firstname <> 'None') )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:58:10.017

尝试在下面使用，它可能会解决您的问题：

```
SELECT mail_id, from_firstname, from_lastname, from_email, to_firstname, to_lastname, to_email
(IF( FIND_IN_SET ('".$email_id."', sm.to_email) ) AND ( (sm.to_firstname <> '') AND (sm.to_firstname <> 'None') ),"yes","no") AS MailTo,
(IF(FIND_IN_SET ('".$email_id."', sm.from_email) ) AND ( (sm.from_firstname <> '') AND (sm.from_firstname <> 'None')),"yes","no") AS MailFrom
FROM support_mail sm WHERE
( 
OR 

( FIND_IN_SET ('".$email_id."', sm.to_email) ) AND ( (sm.to_firstname <> '') AND (sm.to_firstname <> 'None') )

OR 

( FIND_IN_SET ('".$email_id."', sm.from_email) ) AND ( (sm.from_firstname <> '') AND (sm.from_firstname <> 'None') )
) 
```

# ruby-on-rails - 在 Ruby 中转义撇号

> ID：13911419
> 
> 赞同：1
> 
> 时间：2012-12-17T09:28:31.887
> 
> 标签：ruby-on-rails, ruby, postgresql-9.1

我试图转义红宝石字符串中的单引号。我使用这个字符串作为插入查询将数据推送到 postgresql 中。

将生成的查询如下所示：-

```
str = insert into table field1,field2 values 'Gaurav's', 'Scooter' 
```

我试着用

```
str.gsub("/'/",\\\\') 
```

但这没有用。

我总是得到的错误是： **Syntax Error Near s：**

我想我需要一个正则表达式来转义两个单引号内的单引号，但不确定。

我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:31:40.080

您应该使用[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)。准备好的语句有助于提高您的速度。查询由数据库解析一次。它们还可以帮助您避免在尝试时进行手动转义。

```
f1_val = "Gaurav's"
f2_val = "Scooter"

# conn is your connection object
conn.prepare('givethisqueryaname', "INSERT INTO table field1,field2 VALUES ($1,$2)")
conn.exec_prepared('givethisqueryaname',[f1_val, f2_val]) 
```

如果给定字段名称和字段值作为字符串，则可以执行此操作。

```
fieldStr = "field1,field2"
valuesStr = "Gaurav's, Scooter"
arr = valuesStr.split(",")
conn.prepare('insert_x', "INSERT INTO table #{fieldStr} VALUES ($1,$2)")
conn.exec_prepared('insert_x', arr) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:34:58.943

如果您要转义的单引号始终位于“s”前面，则此方法有效

```
1.9.3p125 :020 > str = "insert into table field1,field2 values 'Gaurav's', 'Scooter'"
 => "insert into table field1,field2 values 'Gaurav's', 'Scooter'" 
1.9.3p125 :021 > str.gsub("'s","-s")
 => "insert into table field1,field2 values 'Gaurav-s', 'Scooter'" 
```

您可以使用单引号（'）和双引号（“）之间的区别。

# jquery - 在新对话框 jqGrid (navGrid) 中添加后的消息

> ID：13911424
> 
> 赞同：0
> 
> 时间：2012-12-17T09:28:53.793
> 
> 标签：jquery, jqgrid, return, message

嗨，我`navGrid`在添加操作中有这个定义。

```
Grid.id >> $("#<%=Me.Id & "_" %>lstPreciosSUD")

{ width: 350, resize: false, closeAfterAdd: false, recreateForm: true,
    clearAfterAdd:false, viewPagerButtons: true, afterComplete: estadoReplicado,
    ,afterSubmit: function(response) { 
                if (response.responseText == "OK") {

                    alert("we are inside");

                    var myInfo = '<div class="ui-state-highlight ui-corner-all">' +
                        '<span class="ui-icon ui-icon-info" ' +
                        'style="float: left; margin-right: .3em;"></span>' +
                        '<span>Registro insertado correctamente!</span></div>',
                    $infoTr,
                    $infoTd;
                    $infoTr = $("#TblGrid" + "<%=Me.Id & "_" %>lstPreciosSUD" + ">tbody>tr.tinfo");
                    $infoTd = $infoTr.children("td.topinfo");
                    $infoTd.html(myInfo);
                    $infoTr.show();

                    setTimeout(function () {
                        $infoTd.children("div")
                            .fadeOut("slow", function () {
                                  $infoTr.hide();
                            });
                    }, 6000);

                        //alert("Registro creado.");
                        return [true,''];
                } 
                else { 
                        return [false, "Error creando precio de suplemento!"];
                } 
            },
    beforeSubmit: function(postdata){ 
        if ((postdata.tpb_importe == "") || (postdata.fini == "") || (postdata.ffin=="")) {
            return[false,"Importe y fechas es obligatorio!"]; 
        } else { return [true,""] }
    }
}} 
```

在第二个或日期的输入中，如果为空，则此 return ( `return [false,"Importe y fechas es obligatorio!"] "`) 在对话框中向我返回一条红色消息，`beforeSubmit`如下所示[http://i.imgbox.com/ackwIZvQ.jpg](http://i.imgbox.com/ackwIZvQ.jpg)

在这种情况下，我必须使用`closeAfterAdd:false`and `clearAfterAdd:false`，但我想知道并且我认为使用`afterSubmit`显示绿色（例如）消息，如果一切正常，使用一点功能来执行此操作，但如果我使用上述`afterSubmit`功能，以及它的好的，不要显示任何消息，如错误消息，是否可以显示任何 OK 消息？如果有错误，它会以红色显示我无法在后台看到它如何添加新记录，但在对话框中不显示任何消息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:06:33.720

[如果我理解你是正确的，你会在答案](https://stackoverflow.com/a/6803206/315935)中找到这种实现的例子（参见[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithMsgInEditForm.htm)）。它显示了如何以与添加标准错误消息相同的方式使用添加自定义文本。在演示中，我`errorTextFormat`仅用于*模拟*加载。您应该将显示成功消息的代码移动到`afterSubmit`.

**更新**：代码`afterSubmit`可能看起来像（我没有测试代码）

```
afterSubmit: function (jqXHR) {
    var myInfo = '<div class="ui-state-highlight ui-corner-all">' +
            '<span class="ui-icon ui-icon-info" ' +
            'style="float: left; margin-right: .3em;"></span>' +
            '<span>The row is successfully added</span></div>',
        $infoTr,
        $infoTd;

    if (jqXHR.responseText !== "OK") {
        return [false, jqXHR.responseText];
    }

    $infoTr = $("#TblGrid_" + $.jgrid.jqID(this.id) + ">tbody>tr.tinfo"),
    $infoTd = $infoTr.children("td.topinfo");
    $infoTd.html(myInfo);
    $infoTr.show();

    // hide the info after 3 sec timeout
    setTimeout(function () {
        $infoTd.children("div")
            .fadeOut("slow", function () {
                // Animation complete.
                  $infoTr.hide();
            });
    }, 3000);
} 
```

# solr - 什么是编辑标记工厂。？

> ID：13911431
> 
> 赞同：0
> 
> 时间：2012-12-17T09:29:14.347
> 
> 标签：solr, document, config

solr.中的***EditorialMarkerFactory***是什么？它是如何在***DocumentTransformer*** ... 中使用的？对于什么**场景** ***我们必须***在我们的应用程序中使用EditorialMarkerFactory...？.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:11:00.947

我尝试使用带有 solr 4.0 final 的EditorialMarkerFactory，但它不起作用。错误是找不到类。

我在 solrconfig.xml 文件中将类更改为 ElevatedMarkerFactory 并开始工作。Solr 需要更新 wiki 和默认的 solrconfig.xml 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:52:34.070

如果您查看[Wiki](http://wiki.apache.org/solr/DocTransformers)，您可以阅读为什么以及如何使用它。它说

> 编辑标记工厂用于标记已由 QueryElevationComponent 编辑提升的项目，以便应用程序可以选择特殊处理它们

# jquery - Bootstrap 是否会自动将活动类添加到单选按钮？

> ID：13911433
> 
> 赞同：0
> 
> 时间：2012-12-17T09:29:23.267
> 
> 标签：jquery, twitter-bootstrap

我在使用 bootstrap 单选按钮时遇到了一些问题，我只是想快速检查 Bootstrap 是否应该将活动类附加到我拥有的一组单选按钮上，因为如果应该这样做，那么它不是，我可以弄清楚为什么.

这是我的 HTML

```
<div class="span12 btn-group pageSelector" data-toggle="buttons-radio">
        <button type="button" class="btn btn-primary">Settings</button>
        <button type="button" class="btn btn-primary">Fields</button>
        <button type="button" class="btn btn-primary">Layout</button>
</div> 
```

还有我的 JS

```
$('.pageSelector').button(); 
```

我也使用 jQuery UI 运行，但删除了按钮小部件以避免冲突。

谢谢，我很感激你的帮助。

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:32:34.647

您可以使用 Firebug 或 Chrome Dev Tool 或其他工具自行检查。

但是，是的，一旦单击它，它就会添加一个活动类。

# java-me - 在 Eclipse 中为 j2me 应用程序添加模拟器

> ID：13911434
> 
> 赞同：0
> 
> 时间：2012-12-17T09:29:28.340
> 
> 标签：java-me

嗨，我正在 android 中开发应用程序。但是我是开发 J2ME 应用程序的新手。我怀疑在哪里可以使用模拟器来运行应用程序。我的意思是我可以在哪里下载模拟器以及在哪里安装。请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T15:52:50.570

要在 android 中构建应用程序，您不需要 J2ME，而是需要 Android SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T12:49:05.023

您必须下载[WTK](http://www.oracle.com/technetwork/java/download-135801.html)并安装它。然后您可以将 WTK Emulator 设置为 Eclipse 中的外部工具来运行您的应用程序。但是有一个用于移动应用程序开发的 Eclipse 版本：[Eclipse Pulsar](http://www.eclipse.org/pulsar/)。使用 Pulasr 而不是设置普通版本的 Eclipse 会容易得多。

# excel - 检查excel中的单元格是否为空或空白

> ID：13911436
> 
> 赞同：0
> 
> 时间：2012-12-17T09:29:41.187
> 
> 标签：excel, vba, cell, is-empty

我有一个关于在 Excel VBA 中检查单元格是否为空的问题。我用 0 做到了，但不知道如何用空白或空来做。

代码：

```
 ActiveCell.FormulaR1C1 = "=1000/(IF( RC[-2] = 0,100000000,RC[-2]))" 
```

我想要什么，如果 RC[-2] = 0 或为空，则 RC[-2]= 100000000，如果不是，则 RC[-2]

类似的东西：`"=1000/(IF( OR(RC[-2] = 0, RC[-2]= Empty),100000000,RC[-2]))"`但这段代码不这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:39:07.823

编辑：可以在 TEXT 中使用单元格格式

满足您的要求：

```
 ActiveCell.FormulaR1C1 = "=IF(NOT(ISBLANK(RC[-2])),IF(AND(ISNUMBER(VALUE(RC[-2])),VALUE(RC[-2])<>0),1000/VALUE(RC[-2]),0.000001),0.000001)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:38:03.720

尝试使用 IsEmpty 而不是 IsBlank。

# android - 选项菜单和溢出菜单问题

> ID：13911442
> 
> 赞同：0
> 
> 时间：2012-12-17T09:29:59.737
> 
> 标签：android

我正在开发一个应用程序，其中我`Sherlock Actionbar`在低端设备中使用库来实现 4.0 效果，在这个应用程序中，菜单中有 5 个项目，它出现在选项菜单中。当我在操作栏中按下菜单时，它会正确显示项目列表，但是当我单击溢出菜单按钮（硬件菜单）时，它没有给我任何选项。我需要两个菜单中的所有项目。

我试过了`android:showAsAction="never"`，它出现在溢出菜单中，但没有出现在`actionbar`. 如果我这样做`android:showAsAction="ifRoom|withText"`了，它只会出现在操作栏中的选项菜单中，而不是出现在溢出菜单中，所以你能找到解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:50:20.567

你有没有覆盖你的`OnCreateOptionsMenu()`？您需要它来支持菜单按钮。这是我的：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater mi = getMenuInflater();
    mi.inflate(R.menu.activity_main, ((MenuWrapper) menu).unwrap());
    return true;
} 
```

编辑：而且`onOptionsItemSelected()`，也是？

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_logout:
        logout();
        return true;
    case R.id.menu_settings:
        openSettings();
        return true;
    case android.R.id.home:
        getSlidingMenu().toggle();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

# c++ - 从VS2008升级后，在VS2012中构建项目显示错误

> ID：13911443
> 
> 赞同：0
> 
> 时间：2012-12-17T09:30:09.477
> 
> 标签：c++, visual-studio-2012, upgrade

我们的团队正在将整个基线从 VS2008 迁移到 VS2012。有超过 400 个 C++ 项目。有 6 个 C++ 项目显示连线错误，例如：

```
1>------ Rebuild All started: Project: SSLT, Configuration: Release Win32 ------
1> stdafx.cpp
1> ???
1>c1xx : fatal error C1083: Cannot open source file: '???': No such file or directory
1> ??????????????????????????????
1>c1xx : fatal error C1083: Cannot open source file: '??????????????????????????????': No such file or directory
All files which are the parameters of cl.exe seems in wrong encoding, and cl.exe can't find them.
Firstly, i think it must be encode issues of .vcxproj, so i save as other encoding style. But still happens.
Then i re-upgrade these projects with such issue, but always build error. 
```

最后我把项目平台工具集改回VS2008，然后build pass。所以我认为这不是因为项目文件编码格式。我不知道他们在使用 2012 编译器时有什么问题。这些项目使用 2008 编译器构建没有错误。我从 VS2010 了解到，项目格式发生了很大变化，所以我找不到任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:01:38.323

顺便说一句，还有另一个原因导致这样的问题。升级后，*.vcxproj 文件中有一个属性出现了不正确的换行符，例如：/Zm300 /bigobj %(AdditionalOptions) 如果我将其改回：/Zm300 /bigobj %(AdditionalOptions) 然后运行良好，构建通过。

有此类问题的项目，80%都是因为此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:35:17.293

Thanks for your reply, i automatically upgrade our projects using: devenv.exe /upgrade *.vcproj in script. Today i find the root cause is precompile header file: stdafx.h. It is because that wrong precompiling head file reference. It will cause mess file name issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:41:19.250

*   创建一个新的示例项目以查看 VS 期望的编码，然后将您的文件转换为它。
*   或者，[How to: Upgrade Visual C++ Projects to Visual Studio 2012](http://msdn.microsoft.com/en-us/library/hh690665.aspx)说您必须在 VS2012 中打开 VS2008 项目时升级它。

我没有安装 VS2012 来检查这一点，但可能有一个函数可以在其 DLL 中以编程方式转换项目 - 尝试使用基于 - 的脚本进行搜索，或者在转换示例项目时`dumpbin`检查堆栈跟踪。`procmon`

# android - 从外壳禁用 DeviceAdmin？

> ID：13911444
> 
> 赞同：8
> 
> 时间：2012-12-17T09:30:17.207
> 
> 标签：android, shell, adb, uninstallation, administrator

我正在尝试从 shell 卸载应用程序，但是该应用程序以设备管理员身份运行，因此`shell> adb uninstall com.example.test`无法正常工作。

如何从 shell 禁用设备管理员？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-03-17T07:19:15.867

通常，通过设备管理员屏幕撤销管理访问权限，然后卸载应用程序。在随后的示例中，我将假设 airdroid ( `com.sand.airdroid`) 已被配置为设备管理员，并且将被卸载。因此，要定制此示例，请将实例替换为`com.sand.airdroid`您自己的应用名称。

## 清洁方法

要访问*设备管理员*，请导航：**设置**→**安全**→**设备管理员**。然后，取消选中要取消设置管理访问权限的应用程序。

也可以使用 shell 打开这个活动：

```
adb shell am start -S "com.android.settings/.Settings\$DeviceAdminSettingsActivity" 
```

完成此操作后，即可正常卸载活动：

```
adb uninstall com.sand.airdroid 
```

## 蛮力方法（需要root）

蛮力方法确实存在。它涉及搜索 /system 和 /data 文件系统中的所有文件，并删除每个找到的项目。*免责声明：谨慎使用（首先在模拟器上测试）。*

```
adb shell

# Switch to root
su -

# Search for all installed files using the fully-qualified app name
find /system /data -name \*com.sand.airdroid\* 
```

...出现文件列表（包括目录） - 对于每个文件，通过在其前面加上前缀来删除它`rm -f`：

```
rm -r /data/media/0/Android/data/com.sand.airdroid
rm -r /data/data/com.sand.airdroid
rm -r /data/app-lib/com.sand.airdroid-1
rm -r /data/app/com.sand.airdroid-1.apk
rm -r /data/dalvik-cache/data@app@com.sand.airdroid-1.apk@classes.dex

# Run the find command again to ensure nothing was missed
find /system /data -name \*com.sand.airdroid\* 

# exit root
exit
# exit Android shell
exit 
```

要允许 Android 清理其文件，请重新启动设备。

```
adb reboot 
```

设备重新启动后，可以使用`uninstall`命令卸载应用程序以完成清理。

```
adb uninstall com.sand.airdroid 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-12T11:18:50.797

`adb shell pm disable-user (package name)`将停用 DeviceAdmin 并禁用该应用程序。即使您再次启用该应用程序，它也不会被激活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-29T07:36:58.440

You can not uninstall app directly if it is set as Admin .first you have to disable the admin mode then you will be able to uninstall app. to remove active admin first you run this command

```
adb shell dpm remove-active-admin com.kiosk.example/com.kiosk.example.MyDeviceAdminReceiver 
```

(com.kiosk.example) is package name replace it with your own and MyDeviceAdminReceiver is receiver name. when this command give success then you can uninstall app. or run this command to uninstall

`adb uninstall com.kiosk.example`.

# c# - 如何遍历具有多个分支的树

> ID：13911450
> 
> 赞同：3
> 
> 时间：2012-12-17T09:30:40.527
> 
> 标签：c#, .net, sql, wpf, algorithm

我正在研究一个实验性的 TreeView，其中每个 TreeViewItem 可以表示一个条件，也可以表示一个带有运算符的分支。这将被解析为 SQL。

例如，树可能有一个带有“AND”或“OR”运算符的分支，其子节点将成为条件。这被用来作为能够生成`WHERE`一个 SQL 语句的段，例如`((Name = 'Matt' AND AGE > 20) OR (Name = 'John' AND Age = 15)) AND Job = 'Student'`。

我该怎么做呢？到目前为止，我所做的是将一`string,list<Condition>`对放在 a 中`Tuple<>`，其中字符串表示分支运算符 (AND/OR)，列表表示该分支中包含的条件。

但是，由于每个分支都可以拆分为多个运算符分支或条件，因此它很快就会变得极其复杂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:49:45.227

您可以使用递归函数`treeview`从顶部解析，因此树视图的每个根注释都是一个 SQL 语句：

例如：

![在此处输入图像描述](../Images/a190465b884415ffc8d9ecbab772bf80.png)

功能代码：  

```
string getHead(TreeViewItem t)
            {
                string s = "";
                if (t.Items.Count == 0) //get the condition
                {
                    return s=t.Header.ToString(); //change this to your real getCondition function.
                }
                else
                {
                    for (int i = 0; i < t.Items.Count; i++ )
                    {
                        if(t.Items[i] is TreeViewItem) //Edit: only use treeviewitems not the button...
                        {
                          if (i == 0) // first note doesn't need the operator 
                          {
                            s += getHead(t.Items[0] as TreeViewItem);
                          }
                          else // only needs operator in between
                          {
                             s += (string.IsNullOrEmpty(getHead(t.Items[i] as TreeViewItem).Trim()) ? "" : (" " + t.Header + " " + getHead(t.Items[i] as TreeViewItem))); // only get real treeviewitem, not the one with two buttons and an empty header; change t.Header to your real getOperator function.

                          }
                        }                    
                    }
                    return string.Format("({0})",s); //group sub conditions
                }
            } 
```

用法：

```
MessageBox.Show(getHead((treeView1.Items[0] as TreeViewItem))); 
```

结果：

![在此处输入图像描述](../Images/0184c65c083e473deb89a85b7f3574db.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:50:48.303

在您的树形视图中，最后一个 AND 和 OR 不应该互换吗？我无法使用该视图获得您在下面指定的相同解析字符串。

```
AND
    AND
         Job='Student'
         Age > 20
    AND
         OR
            Name='John'
            Name='Matt'
         Sex='Male' 
```

最后一个 AND 与另一个 OR 条件和单个语句。

不确定这是否有帮助，但野牛会生成 C 代码以进行自下而上的解析。你可以试一试。

```
e: conditional statement|
   e AND e|
   e OR e
; 
```

# wordpress - 在 Wordpress 中以编程方式更改用户头像

> ID：13911452
> 
> 赞同：6
> 
> 时间：2012-12-17T09:30:43.453
> 
> 标签：wordpress

是否可以以编程方式更改 WordPress 中的用户头像？我之所以问，是因为我现在在 WordPress 多站点中显示用户头像时遇到问题：头像未显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-12T01:12:07.087

我必须做三件事才能以编程方式将用户头像插入到我的 WordPress 中，从托管在远程 URL 上的头像开始。

1.  安装[WP 用户头像](https://wordpress.org/plugins/wp-user-avatar/)插件。
2.  从 WooCommerce 借用上传功能。见下文。
3.  从类似的[支持帖子中改编一些代码](https://wordpress.org/support/topic/setting-users-avatar-programmatically)

假设您有一个用户，其头像是`$avatar_url = 'http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon@2.png?v=73d79a89bded&a';`

我使用`upload_product_image()`来自 WooCommerce 的`class-wc-api-products.php`将头像放入我的本地服务器。

然后，使用此[支持帖子](https://wordpress.org/support/topic/setting-users-avatar-programmatically)中的一些代码，创建一个附件。然后将附件与用户关联。

这仅适用于 WP User Avatar 插件。

```
function se13911452_set_avatar_url($avatar_url, $user_id) {
        global $wpdb;
        $file = upload_product_image($avatar_url);
        $wp_filetype = wp_check_filetype($file['file']);
        $attachment = array(
            'guid' => $file['url'],
            'post_mime_type' => $wp_filetype['type'],
            'post_title' => preg_replace('/\.[^.]+$/', '', basename($file['file'])),
            'post_content' => '',
            'post_status' => 'inherit'
        );
        $attach_id = wp_insert_attachment($attachment, $file['file']);
        $attach_data = wp_generate_attachment_metadata($attach_id, $file['file']);
        wp_update_attachment_metadata($attach_id, $attach_data);
        update_user_meta($user_id, $wpdb->get_blog_prefix() . 'user_avatar', $attach_id);
    } 
```

来自[WooCommerce 的](http://www.woothemes.com/woocommerce/) [class-wc-api-products.php](https://github.com/justinshreve/woocommerce/blob/master/includes/api/class-wc-api-products.php)

```
/**
 * WooCommerce class-wc-api-products.php
 * See https://github.com/justinshreve/woocommerce/blob/master/includes/api/class-wc-api-products.php
 * Upload image from URL
 *
 * @since 2.2
 * @param string $image_url
 * @return int|WP_Error attachment id
 */
function upload_product_image($image_url) {
    $file_name = basename(current(explode('?', $image_url)));
    $wp_filetype = wp_check_filetype($file_name, null);
    $parsed_url = @parse_url($image_url);

    // Check parsed URL
    if(!$parsed_url || !is_array($parsed_url)) {
        throw new WC_API_Exception('woocommerce_api_invalid_product_image', sprintf(__('Invalid URL %s', 'woocommerce'), $image_url), 400);
    }

    // Ensure url is valid
    $image_url = str_replace(' ', '%20', $image_url);

    // Get the file
    $response = wp_safe_remote_get($image_url, array(
        'timeout' => 10
    ));

    if(is_wp_error($response) || 200 !== wp_remote_retrieve_response_code($response)) {
        throw new WC_API_Exception('woocommerce_api_invalid_remote_product_image', sprintf(__('Error getting remote image %s', 'woocommerce'), $image_url), 400);
    }

    // Ensure we have a file name and type
    if(!$wp_filetype['type']) {
        $headers = wp_remote_retrieve_headers($response);
        if(isset($headers['content-disposition']) && strstr($headers['content-disposition'], 'filename=')) {
            $disposition = end(explode('filename=', $headers['content-disposition']));
            $disposition = sanitize_file_name($disposition);
            $file_name = $disposition;
        }
        elseif(isset($headers['content-type']) && strstr($headers['content-type'], 'image/')) {
            $file_name = 'image.' . str_replace('image/', '', $headers['content-type']);
        }
        unset($headers);
    }

    // Upload the file
    $upload = wp_upload_bits($file_name, '', wp_remote_retrieve_body($response));

    if($upload['error']) {
        throw new WC_API_Exception('woocommerce_api_product_image_upload_error', $upload['error'], 400);
    }

    // Get filesize
    $filesize = filesize($upload['file']);

    if(0 == $filesize) {
        @unlink($upload['file']);
        unset($upload);
        throw new WC_API_Exception('woocommerce_api_product_image_upload_file_error', __('Zero size file downloaded', 'woocommerce'), 400);
    }

    unset($response);

    return $upload;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:56:08.140

很可能某个地方`get_avatar`正在调用过滤器并执行某些操作。我建议搜索您的插件和主题，`get_avatar`并查看如下内容：`add_filter ('get_avatar', .....`

否则，您可以使用下面的代码编写自己的行为。

```
<?php // in a plugin file or in a theme functions.php
function SO13911452_override_avatar ($avatar_html, $id_or_email, $size, $default, $alt) {
    // check all values

    return $avatar_html
}
add_filter ('get_avatar', 'SO13911452_override_avatar', 10, 5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T13:18:01.010

这将有效：

```
add_filter('get_avatar_data', 'ht1_change_avatar', 100, 2);

function ht1_change_avatar($args, $id_or_email) {
    if($id_or_email == 1) {
        $args['url'] = 'https://uinames.com/api/photos/female/1.jpg';
    }

    if($id_or_email == 2) {
        $args['url'] = 'https://uinames.com/api/photos/male/19.jpg';
    }

    return $args;
} // end of function 
```

如果您有用户的头像目录位置元数据，则将其用于所有用户：

```
add_filter('get_avatar_data', 'ht1_change_avatar', 100, 2);

function ht1_change_avatar($args, $id_or_email) {
    $avatar_url = get_user_meta($id_or_email, 'avatar', true);

    $args['url'] = $avatar_url;

    return $args;
} // end of function 
```

希望你明白这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-14T05:40:26.020

first add author_pic meta to user profile:

```
update_usermeta( $user_id, 'author_pic', trim($_POST['author_pic']) ); 
```

and add this filter to template function:

```
add_filter('get_avatar_data', 'ow_change_avatar', 100, 2);
function ow_change_avatar($args, $user_data) {
    if(is_object($user_data)){
        $user_id = $user_data->user_id;
    } else{
        $user_id = $user_data;  
    }
    if($user_id){
        $author_pic = get_user_meta($user_id, 'author_pic', true);
        if($author_pic){
            $args['url'] = $author_pic;
        } else {
            $args['url'] = 'registerd user default img url';
        }
    } else {
        $args['url'] = 'guast user img url';
    }
    return $args;
} 
```

# android - Android Grow heap (frag case) to 7.827MB for 1228816-byte allocation

> ID：13911453
> 
> 赞同：0
> 
> 时间：2012-12-17T09:30:43.433
> 
> 标签：android, opencv, camera

我正在使用 opencv 库（面部检测示例）开发一个 android 图像捕获应用程序。我的目标是捕获 5 张图像并将其发送到我的网络服务。抓取图像后，将Bitmap图像转换为base64字符串并存储到string[]中。最后，我将此字符串 [] 发送到 Web 服务。这个应用程序在我的模拟器中工作。但是当我检查我的 android 平板电脑时，它会抛出“Grow heap (frag case) to 7.827MB for 1228816-byte allocation”异常并退出应用程序。在互联网上搜索后，我找到了一些与此相关的链接。

链接1：[Android增长堆碎片案例](https://stackoverflow.com/questions/7247049/android-grow-heap-frag-case)

链接 2：[如何清除增长堆？](https://stackoverflow.com/questions/9390805/how-can-i-clear-growing-heap)

但他们没有告诉我如果问题存在我会怎么做。看到一些链接后，我认为这可能是因为内存泄漏。但我不知道该怎么办。由于我是android新手，你能给我一些关于这方面的建议会很棒。

我已在以下链接中附加了我的日志文件。 [http://pastebin.com/82VxhBmz](http://pastebin.com/82VxhBmz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T16:44:18.573

使用相机时臀部的增长很可能是由于预览相机的大小。命中可能会帮助您解决问题（在实现 SurfaceHolder.Callback 时）：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

    Camera.Parameters parameters = camera.getParameters();
    //get all supported sizes for the camera
    List<Camera.Size> sizes = parameters.getSupportedPreviewSizes();
    //make sure you select the smallest size (resolution), which is first in the list
    Camera.Size selected = sizes.get(0);
    //add the selected size
    parameters.setPreviewSize(selected.width, selected.height);
    //set the parameters
    camera.setParameters(parameters);
    camera.startPreview();

}` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:13:57.737

您面临的问题主要是因为 base64 将图像转换为字符串。
当图像具有大尺寸@时，例如当您从相机单击图像时，它总是以 MB 为单位，当转换为字符串时将使用更多内存。因此，当您单击许多图像时，字符串大小会增加您的内存大小并迫使 android 销毁您的应用程序，因为 Android 会破坏应用程序，当它缺乏内存时会使用更多内存。

因此，要将多个图像上传到服务器，请使用不同的方法示例，请参考以下问题，其中我给出了用户如何将图像上传到服务器的答案。
[Android将图片从图库上传到服务器](https://stackoverflow.com/questions/9770122/android-upload-image-from-gallery-to-server/9770378#9770378)

# javascript - chrome中的自定义协议处理程序

> ID：13911454
> 
> 赞同：4
> 
> 时间：2012-12-17T09:30:48.060
> 
> 标签：javascript, google-chrome, windows-8, google-chrome-extension, protocol-handler

我想通过 Chrome 中的链接打开我的 win 8 应用程序。不幸的是，我可以看到链接，但点击它什么也没做。

我阅读了有关 navigator.registerProtocolHandler 的内容并为我做了一些事情。

[Chrome 中的自定义协议处理程序](https://stackoverflow.com/questions/7374793/custom-protocol-handlers-in-chrome)

我尝试了我在 IE 中制作的内容，它可以正确打开链接。在 chrome 中做不到，链接也打不开？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T23:54:58.420

之前已经部署了这个，我们可以让它可靠地工作的唯一方法是使用 NPAPI 插件，Windows / Mac / Linux 各一个。这很快变成了一场无法维持的噩梦。你也可以使用 JNLP 之类的东西，但这更糟。我们最终放弃了小用户体验（“请打开我们的应用程序”而不是“单击以打开应用程序”），以支持极大简化的部署。

# java - 如何使用JMeter“断言”和“如果”？

> ID：13911456
> 
> 赞同：0
> 
> 时间：2012-12-17T09:30:53.643
> 
> 标签：java, testing, jmeter

我在 JMeter 中编写了一个 HTTP 请求，它创建了一个具有新配置文件 ID 的配置文件（我将其作为 URL 中的参数传递）

如果给定的 ProfileID 已经存在，我想生成一个新的 profileID。我怎样才能在 JMeter 中做到这一点？

当前测试运行并通过，结果显示“配置文件 ID 已存在”消息，以防已存在 ID。

不知道如何解决这个问题。如果我使用“如果控制器”，它将检查执行前条件，而我有一个测试运行的执行后条件，并且在页面上收到此消息“已经存在”之后应该生成一个新的 ID。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:53:14.127

您可以执行以下操作：

```
While Controller with condition: ${IdExisted} != "Profile ID is already existed"
  HTTP Request generating random profile Id
    Regular Expression Extractor with reference name IdExisted, regex like "Profile ID is already existed", default value NOT_FOUND 
```

您可以对用户定义的变量执行“配置文件 ID 已存在”来干燥此测试。

但我认为，你真的不需要 While 控制器和正则表达式提取器。也许，您可以让 HTTP 请求生成更多随机 Id。

要生成随机 id，您可以使用函数：

*   如果它应该是一个整数，则[随机，例如](http://jmeter.apache.org/usermanual/functions.html#__Random)`${__Random(1, 100000000)}`
*   [RandomString](http://jmeter.apache.org/usermanual/functions.html#__RandomString)如果它应该是一个字符串，例如`${__RandomString(10)}`

# coldfusion - 创建一个 Ascii 检查和计数

> ID：13911459
> 
> 赞同：0
> 
> 时间：2012-12-17T09:30:57.843
> 
> 标签：coldfusion, ascii

基本上我已经在我的网站上创建了一个搜索页面，我需要显示每个乐队名称/曲目/位置 AZ。我已经成功地按字母顺序列出了每个乐队，但是我希望页面的一半有 0-9，AL 在它上面，而另一个有 MZ。有没有办法使用 Ascii 检查 + 计数来检查每个波段的第一个字母并将它们调用到正确的字母组？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:07:06.973

听起来您想根据字符串的第一个字母将查询拆分为多个集合。在 CF 10 或 Railo 4 中，您可以使用Underscore.cfc[的](http://russplaysguitar.github.com/UnderscoreCF/) [groupBy 函数](http://russplaysguitar.github.com/UnderscoreCF/#groupBy)来完成此操作，如下所示：

```
_ = new Underscore();

bands_by_name = _.groupBy(bands, function(band) {
   var first_letter = left(band.name, 1);

   if (isNumeric(first_letter))
      return '0-9';
   else if (first_letter <= 'L')
      return 'A-L';
   else
      return 'M-Z';
}); 
```

`groupBy(collection, callback)`遍历一个集合，将回调函数应用于每个项目，并使用返回值将集合项目分组到一个新结构中。

在这种情况下，`bands_by_name`结构将具有键`0-9`、`A-L`和`M-Z`，每个键都包含一个包含相关结果的结构数组。例子：

```
{
   '0-9': [{name: '1 Band', track: 5, location: 'CA'}, {name: '2Cool', track: 1, location: 'NM'}],
   'A-L': [{name: 'Good Band', track: 2, location: 'NY'}],
   'M-Z': [{name: 'Some Band', track: 3, location: 'PA'}, {name: 'What a Band', track: 2, location: 'NV'}]
} 
```

注意：我编写了 Underscore.cfc 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:51:43.190

它有点冗长，但它允许通过向 list 添加/更改 ascii 值来快速更改列`bandGroups`。 **它假设每一列都有数据。**

```
<!--- syntax may very depending on database --->
<cfquery ...>
  Select
      bandName
    , trackName
    , location
    , upper(left(bandName,1)) as firstLetter
  from
    someTable
  order by
    bandName
</cfquery>
<!--- 
  create a list of ascii values used to break up your columns
  this will allow you to easily change the number of columns
  End first group at L , end next group at [ (first char after "Z") 
--->
<cfset bandGroups = asc("M") & ',' & asc("[")>
<cfset thisGroup = 1>
<cfset header = '<div style = "float: left; width: #int(100/listLen(bandGroups))#%"><table>'>
<cfoutput>#header#</cfoutput>
    <cfoutput query = "query" group = "firstLetter">
        <tr>
            <td colspan="3">
              #query.firstLetter# 
            </td>
        </tr>
    <cfoutput>
        <tr>
          <td>#query.bandName#</td>
          <td>#query.trackName#</td>
          <td>#query.location#</td>
        </tr>
    </cfoutput>
    <cfif query.recordCount eq query.currentRow or asc(query.firstLetter) gte listGetAt(bandGroups, thisGroup)>
        <cfset thisGroup++>
        </table>
        </div>
        <cfif query.currentRow neq query.recordCount>
            #header#
        </cfif>
    </cfif>
</cfoutput> 
```

# regex - 在 Google Analytics 过滤器中过滤部分但不是所有子域

> ID：13911461
> 
> 赞同：0
> 
> 时间：2012-12-17T09:31:04.437
> 
> 标签：regex, google-analytics

我要跟踪的域有多​​种子域，例如：

*   sanfrancisco.domain.com
*   维也纳域名.com
*   madrid.domain.com
*   等等

我还有一个“主”域，其中包含我希望包含在一个配置文件中的几个子域：

*   域名.com
*   city.domain.com
*   country.domain.com

我可以设置什么样的正则表达式过滤器来排除个别城市，但包括主域和选定的广泛类别子域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:21:58.253

此正则表达式将仅匹配“主”域，并且带有前缀“城市”。或“国家”。：

```
^(?:(?:cities|countries)\.)?domain.com$ 
```

一些解释：

`^`从...开始

`?:`非捕获组（即您不想捕获该组但只检查全局匹配）

`cities|countries`“城市”或“国家”

`\.`一个点

`?`0 或 1 次

`domain.com`明确...

`$`以

`cities|countries`您可以在like之后添加任何带有管道的单词`cities|countries|continents`。

# sql - SQL 基于 2 个不同的值有条件地更新

> ID：13911464
> 
> 赞同：0
> 
> 时间：2012-12-17T09:31:12.317
> 
> 标签：sql, sql-server

我想根据一个`where IN ()`子句更新一个字段，但我也希望使用 .. 更新其余的值，`WHERE NOT IN()`例如：

```
UPDATE TABLE SET COLUMN1 = X WHERE COLUMN2 IN (1,2,3)
UPDATE TABLE SET COLUMN1 = Y WHERE COLUMN2 NOT IN (1,2,3) 
```

简单地说，有没有办法将这两个查询结合起来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T09:32:53.593

```
UPDATE 
  TABLE
SET 
  COLUMN1 = CASE WHEN COLUMN2 IN (1,2,3) THEN X ELSE Y END 
```

# javascript - 继续显示一个 div 标签，直到所有复选框都像 gmail 一样被取消标记

> ID：13911467
> 
> 赞同：0
> 
> 时间：2012-12-17T09:31:16.900
> 
> 标签：javascript

我的问题是我最初想隐藏我的删除按钮，当用户在复选框上标记时，删除按钮会继续显示，直到所有复选框都没有被取消标记

这就是我尝试这样做的方式，当我取消标记一个复选框时我遇到的问题我的删除按钮消失了，尽管我的其余复选框被标记了

```
 <%@page import="java.util.List"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%>
<%@page
    import="com.nousinfo.tutorial.employee.service.model.bo.EmployeeBO"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<link rel="stylesheet" href="css/style.css" type="text/css"></link>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>Home</title>

<script type="text/javascript">
    function windowLoadByName(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;

        newWindow = window.open(
                'PopUp.jsp',
                'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight,
                "status=1").divHiding(1);
        newWindow.focus();

    }
    function windowLoadById(windowHeight, windowWidth) {
        var centerWidth = (window.screen.width - windowWidth) / 2;
        var centerHeight = (window.screen.height - windowHeight) / 2;
        newWindow = window.open(
                'PopUp.jsp',
                'mywindow',
                'resizable=0,width=' + windowWidth + ',height=' + windowHeight
                        + ',left=' + centerWidth + ',top=' + centerHeight)
                .divHiding(2);

        newWindow.focus();
        return newWindow.name;
    }

    function loadName(name) {

        this.firstName = name;
        window.location = 'http://localhost:8080/EmployeeWeb/GetEmployee?key1='
                + encodeURIComponent(firstName);

    }
    function loadId(id) {

        this.id = id;

        window.location = 'http://localhost:8080/EmployeeWeb/GetEmployee?key2='
                + encodeURIComponent(id);

    }

    function showMe (it, box) { 
      var vis = (box.checked) ? "block" : "none"; 
      document.getElementById(it).style.display = vis;
    } 

</script>

</head>

<body background="transparent">

    <table width="951" height="116" border="0" align="center">
        <tr>
            <td width="661" height="112" bgcolor="#D1D1FF"><font size="6">EmployeeManagement</font>
            </td>
            <td width="266" height="112" align="center" bgcolor="#FFFFFF"><img
                src="image/nous.jpg" alt="1" width="266" height="84" /></td>
        </tr>
    </table>
    <p>&nbsp;</p>

    <table width="949" height="183" border="0" align="center">
        <tr>
            <td height="42" align="center" bgcolor="#3366FF"><strong>Find
                    Employee </strong></td>
        </tr>

        <tr>
            <td width="943" height="43"><input id="findid" name="button"
                type="submit" value="Find_Employee_By_ID"
                onClick="windowLoadById(250,500)" /></td>
        </tr>
        <tr>

            <td height="43"><input id="findname" name="submit2"
                type="button" value="Find_Employee_By_Name"
                onClick="windowLoadByName(250,500)" /></td>
        </tr>
        <tr>
            <td><form id="form2" action="GetEmployee">
                    <input type="submit" name="submit3" value="Get_All_Employee" />
                </form></td>
        </tr>
        <tr>
            <td><form id="form2" action="CreateEmployee.jsp">
                    <input type="submit" name="create" value="CreateEmployee" />
                </form></td>
        </tr>

    </table>

    <p>&nbsp;</p>
    <br>
    <br>
    <div id="div12">
        <form action="UpdateEmployeeServlet">
            <table width="725" border="1" align="center" cellpadding="5"
                cellspacing="5">
                <tr>
                    <th width="118">check</th>
                    <th width="118">EmployeeNumber</th>
                    <th width="118">First Name</th>
                    <th width="118">Last Name</th>
                    <th width="118">Title</th>
                    <th width="118">Address1</th>
                    <th width="118">Address2</th>
                    <th width="118">City</th>
                    <th width="118">Detail
                    <th>
                </tr>
                <c:forEach var="employeeBO" items="${listemployeeBo}">
                    <tr>
                        <td><input type="checkbox" value='${employeeBO.empNumber}'
                            name="checked" onclick="showMe('div1',this)"></td>
                        <td>${employeeBO.empNumber}</td>

                        <td>${employeeBO.firstName}</td>

                        <td>${employeeBO.lastName}</td>

                        <td>${employeeBO.title}</td>

                        <td>${employeeBO.address1}</td>

                        <td>${employeeBO.address2}</td>

                        <td>${employeeBO.city}</td>

                        <td><a href="javascript:loadId(${employeeBO.empNumber})">Details</a></td>

                    </tr>
                </c:forEach>

            </table>
            <div id="div1" style="display:none;">
                <table>

                    <tr>

                        <td><input type="hidden" name="updateStatusDelete" value="D" />
                            <input type="submit" name="delete" value="Delete" /></td>
                    </tr>
                </table>
            </div>
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:54:03.820

用这个替换你的`showMe`函数：

```
// box is not needed now, it checks all checkboxes to see
// if any one of them is checked
function showMe(it, box) {
    var hasChecked = false;
    var chks = document.getElementsByName('checked');
    var vis = '';

    for ( var i = 0; i < chks.length; i++ ) {
        if ( chks[ i ].checked ) {
            hasChecked = true;
            break;
        }
    }

    if ( hasChecked == false ) {
        vis = "none";
    } else {
        vis = "block";
    }

    document.getElementById( it ).style.display = vis;
} 
```

希望能帮助到你。

# android - 如何以编程方式打开蓝牙设置活动？

> ID：13911468
> 
> 赞同：31
> 
> 时间：2012-12-17T09:31:17.963
> 
> 标签：android, android-intent, settings

我想在按钮单击时打开蓝牙设置，如图所示![蓝牙图像](../Images/9b98c9f52413efa2845f6383739f04aa.png)

**HomeActivity.java**

```
button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                final Intent intent = new Intent(Intent.ACTION_MAIN, null);
                intent.addCategory(Intent.CATEGORY_LAUNCHER);
                final ComponentName cn = new ComponentName("com.android.settings", "com.android.settings.bluetoothSettings");
                intent.setComponent(cn);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity( intent);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-11-18T10:59:55.937

也许我错过了一些东西，但这不是更简单的未来证明解决方案吗？

```
Intent intentOpenBluetoothSettings = new Intent();
intentOpenBluetoothSettings.setAction(android.provider.Settings.ACTION_BLUETOOTH_SETTINGS); 
startActivity(intentOpenBluetoothSettings); 
```

绝对不可能“删除”其他设置。在手机上只显示一类设置。在平板电脑上，由于有一些额外的空间，设置显示在主从布局中，因此平板电脑屏幕的一半以上没有空白空间。这就是 Android 的设计方式，只需编写一个无法更改的应用程序即可。

正如@zelanix 所建议的，清单中的`BLUETOOTH_ADMIN`权限是必需的。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-03-27T12:30:11.737

我认为你应该尝试这个更简单的：

```
startActivity(new Intent(android.provider.Settings.ACTION_BLUETOOTH_SETTINGS)); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-17T09:37:06.750

利用

```
ComponentName cn = new ComponentName("com.android.settings", 
                   "com.android.settings.bluetooth.BluetoothSettings"); 
```

代替

```
final ComponentName cn = new ComponentName("com.android.settings", 
                              "com.android.settings.bluetoothSettings"); 
```

启动 BluetoothSettings 设置

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-22T06:56:47.003

adb shell am start -a android.settings.BLUETOOTH_SETTINGS

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-28T02:34:52.007

如果您想打开扫描对话框（不离开您的应用程序）。

```
 Intent bluetoothPicker = new Intent("android.bluetooth.devicepicker.action.LAUNCH");
    startActivity(bluetoothPicker); 
```

[![蓝牙扫描对话框](../Images/a4d27df6d06b8840ae5d4bad12d77fa7.png)](https://i.stack.imgur.com/ha5SN.png)

# c# - 多线程 C# GUI ping 示例

> ID：13911473
> 
> 赞同：-3
> 
> 时间：2012-12-17T09:32:13.930
> 
> 标签：c#, .net, multithreading, user-interface

我想创建一个多线程 ping 应用程序，我可以在其中单击开始，创建`n`线程以同时 ping 多个主机，从 GUI 中的线程获取结果并在用户单击取消按钮时取消所有线程。

我已经看到（很多）多线程方法可以做到这一点，但我想要一个代码示例。

有人知道我在哪里可以找到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T09:42:07.973

此示例仅使用 2 个线程，而不是创建多个线程。一个用于发送 ICMP 数据包，一个用于接收回复。您可以在几秒钟内 ping 数千台机器。

```
//from 1.2.3.1 to  1.2.3.254
var hosts = StackOverflow.Pinger.PingAll("1.2.3.1-254");

 //from 1.2.3.1 to  1.2.3.254 and   from 1.2.5.1 to  1.2.5.254
var hosts = StackOverflow.Pinger.PingAll("1.2.3,5.1-254"); 
```

也可以使用`async/await`不阻塞 UI 线程

```
var hosts = await StackOverflow.Pinger.PingAllAsync(.......); 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using System.Threading.Tasks;

namespace StackOverflow
{
    public static class Pinger
    {
        static byte ICMP_ECHO = 8;
        static byte ICMP_ECHOREPLY = 0;
        static int OFFSET_ID = 4;
        static int OFFSET_CHECKSUM = 2;
        static int IP_HEADER_LEN = 20;
        static int ICMP_HEADER_LEN = 8;

        /**************************************************************
         *  Example Usages:
         *  
         *  PingAll("1.2.3.4")       => 1.2.3.4
         *  PingAll("1.2.3.1-255")   => 1.2.3.X
         *  PingAll("1.2.3,7.1-255") => 1.2.3.X and 1.2.7.X
         *  PingAll("1.2.3-5.1-255") => 1.2.3.X and 1.2.4.X and 1.2.5.X
         **************************************************************/
        public static IEnumerable<Host> PingAll(string subNets, int timeOut = 1500)
        {
            ushort PACKET_ID = (ushort)new Random().Next(0, ushort.MaxValue);

            //Init
            Socket rawSock = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.Icmp);
            rawSock.Bind(new IPEndPoint(IPAddress.Any, 0));

            rawSock.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.IpTimeToLive, 255);
            rawSock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.SendTimeout, Int32.MaxValue);
            rawSock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, Int32.MaxValue);
            rawSock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ExclusiveAddressUse, false);

            HashSet<Host> aliveIPs = new HashSet<Host>();

            //** Receiver **
            Task receiver = Task.Factory.StartNew(() =>
            {
                byte[] bytesRecv = new byte[0x10000];
                EndPoint remoteAddr = new IPEndPoint(IPAddress.Any, 0);

                while (true)
                {
                    try
                    {
                        rawSock.ReceiveFrom(bytesRecv, ref remoteAddr);
                    }
                    catch { return; };

                    ushort replyId = BitConverter.ToUInt16(bytesRecv, IP_HEADER_LEN + OFFSET_ID);
                    if (bytesRecv[IP_HEADER_LEN] == ICMP_ECHOREPLY && replyId == PACKET_ID)
                    {
                        long ticksInPong = BitConverter.ToInt64(bytesRecv, IP_HEADER_LEN + ICMP_HEADER_LEN);
                        int duration = (int)((DateTime.Now.Ticks - ticksInPong) / TimeSpan.TicksPerMillisecond);
                        var host = new Host(((IPEndPoint)remoteAddr).Address.ToString(), duration);

                        //Console.WriteLine(host.IP + "\t:\t" + host.Duration);

                        lock (aliveIPs)
                        {
                            aliveIPs.Add(host);
                        }
                    }
                }
            }, TaskCreationOptions.LongRunning);

            Task.Yield(); //Give a chance to listener task to start.

            //** Sender **
            for (int j = 0; j < 2; j++)//Send Ping packets twice
            {
                foreach (var ip in GetIPAddresses(subNets))
                {
                    byte[] packet = CreatePacket(PACKET_ID, BitConverter.GetBytes(DateTime.Now.Ticks));
                    IPEndPoint dest = new IPEndPoint(IPAddress.Parse(ip), 0);
                    try
                    {
                        rawSock.SendTo(packet, dest);
                    }
                    catch (Exception ex)
                    {
                        //Console.WriteLine(ex.Message + "\n==>" + ip);
                    }
                }
                Task.Delay(timeOut / 3).Wait();
            }

            Task.WaitAny(receiver, Task.Delay(timeOut));

            rawSock.Close();

            return aliveIPs;
        }

        public static Task<IEnumerable<Host>> PingAllAsync(string subNets, int TimeOut = 1500)
        {
            return Task.Run(() => PingAll(subNets, TimeOut));
        }

        static byte[] CreatePacket(ushort id, byte[] data)
        {
            byte[] packet = new byte[ICMP_HEADER_LEN + data.Length];
            packet[0] = ICMP_ECHO;

            Array.Copy(BitConverter.GetBytes(id), 0, packet, OFFSET_ID, 2); //copy id
            Array.Copy(data, 0, packet, ICMP_HEADER_LEN, data.Length); //copy data

            Array.Copy(BitConverter.GetBytes(GetChecksum(packet)), 0, packet, OFFSET_CHECKSUM, 2); //copy checksum

            return packet;
        }

        static ushort GetChecksum(byte[] bytes)
        {
            ulong sum = 0;
            int i;

            for (i = 0; i < bytes.Length - 1; i += 2)
            {
                sum += BitConverter.ToUInt16(bytes, i);
            }
            if (i != bytes.Length)
                sum += bytes[i];

            sum = (sum >> 16) + (sum & 0xFFFF);
            sum += (sum >> 16);
            return (ushort)(~sum);
        }

        static IEnumerable<string> GetIPAddresses(string ip)
        {
            string[] parts = ip.Split('.');
            if (parts.Length != 4) throw new FormatException("Invalid format");
            return
                from p1 in GetRange(parts[0])
                from p2 in GetRange(parts[1])
                from p3 in GetRange(parts[2])
                from p4 in GetRange(parts[3])
                select String.Format("{0}.{1}.{2}.{3}", p1, p2, p3, p4);
        }

        static IEnumerable<int> GetRange(string s)
        {
            foreach (var part in s.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                var range = part.Split(new char[] { '-' }, StringSplitOptions.RemoveEmptyEntries);
                if (range.Length > 2) throw new FormatException(String.Format("Invalid Format \"{0}\"", range));
                if (range.Length == 1) yield return int.Parse(range[0]);
                else
                {
                    for (int i = int.Parse(range[0]); i <= int.Parse(range[1]); i++)
                    {
                        yield return i;
                    }
                }
            }
        }

        public class Host
        {
            public string IP { get; private set; }
            public int Duration { get; private set; }

            public Host(string IP, int duration)
            {
                this.IP = IP;
                this.Duration = duration;
            }

            public override bool Equals(object obj)
            {
                return IP.Equals((obj as Host).IP);
            }

            public override int GetHashCode()
            {
                return IP.GetHashCode();
            }

            public override string ToString()
            {
                return IP;
            }
        }
    }
} 
```

# algorithm - 根据Groovy中的模式混合groovy中的两个列表？

> ID：13911475
> 
> 赞同：4
> 
> 时间：2012-12-17T09:32:17.410
> 
> 标签：algorithm, collections, groovy

我有两个列表可以说：

```
def list1 = [a,b,c,d,e...]
def list2 = [1,2,3,4,5... ] 
```

我希望它们以某种模式混合，以便最终列表如下所示： `[a,b,c,d,1,2,e,f,g,h,3,4,i,j,k,l,5,6...]`

基本上在`n`list1 中的每个元素之后，我`m`从 list2 中获取元素。

编辑：如果一个列表中的元素用完，则剩余列表中的项目应该简单地添加到最终列表中。

EDIT2：两个列表都可以将对象作为元素。

我想找到解决这个问题的最有效方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:57:13.317

这是在 Groovy 中执行此操作的一种方法：

所以我有一个方法`mix`，它采用整数键（所需元素的数量）和列表作为值的映射：

```
List mix( Map<Integer,List> amounts ) {
  amounts.collect { k, v ->
    v.collate( k )
  }.transpose().flatten()
} 
```

然后，给定：

```
// The letters a to z
def list1 = 'a'..'z'

// The numbers 1 to 10
def list2 = 1..10

// Call, and ask for 4 of list1 followed by 2 of list2
mix( [ 4:list1, 2:list2 ] ) 
```

返回：

```
[ 'a', 'b', 'c', 'd', 1, 2,
  'e', 'f', 'g', 'h', 3, 4,
  'i', 'j', 'k', 'l', 5, 6,
  'm', 'n', 'o', 'p', 7, 8,
  'q', 'r', 's', 't', 9, 10 ] 
```

（格式化为在这里更好看）

如您所见，它首先用完数字，当它用完时，列表结束。这是因为当一个列表用完元素时转置停止。

### 编辑：

用迭代器解决了另一种方法（所以它很懒，不会占用比其他需要更多的内存）：

```
class MixingIterator<T> implements Iterator<T> {
  private int idx = 0
  private List<Iterator> iter
  private List<Integer>  amts

  MixingIterator( List<List> lists, List<Integer> amounts ) {
    iter = lists*.iterator()
    int i = 0
    amts = amounts.collectMany { [ i++ ] * it }
    // OR FOR GROOVY 1.7.8
    // amts = amounts.collect { [ i++ ] * it }.flatten()
  }

  private void moveIdx() {
    idx = ++idx % amts.size()
  }

  @Override boolean hasNext() {
    iter*.hasNext().any()
  }

  @Override T next() {
    if( !hasNext() ) { throw new NoSuchElementException() }
    while( !iter[ amts[ idx ] ].hasNext() ) { moveIdx() }
    T ret = iter[ amts[ idx ] ].next()
    moveIdx()
    ret
  }

  @Override void remove() {
    throw new UnsupportedOperationException()
  }
} 
```

您通过以下方式调用它：

```
def list1 = 'a'..'z'
def list2 = 1..10

def ret = new MixingIterator( [ list1, list2 ], [ 4, 2 ] ).collect()
// OR FOR GROOVY 1.7.8
// def ret = new MixingIterator( [ list1, list2 ], [ 4, 2 ] ).collect { it } 
```

然后 ret 将等于：

```
['a', 'b', 'c', 'd', 1, 2,
 'e', 'f', 'g', 'h', 3, 4,
 'i', 'j', 'k', 'l', 5, 6,
 'm', 'n', 'o', 'p', 7, 8,
 'q', 'r', 's', 't', 9, 10,
 'u', 'v', 'w', 'x', 'y', 'z'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T22:42:31.837

我有一个基于主要答案保留剩余元素的功能解决方案。

```
List mix( Map<Integer,List> amounts ) {
    def maxItems = amounts.collect { k, v -> v.size() }.max()
    amounts.collect { k, v ->
        def padding = maxItems - v.size()
        it.addAll((1..padding).collect { null })
        v.collate( k )
    }.transpose().flatten().grep { it }
} 
```

我在一个简化版本中对其进行了测试，以混合三个列表，一次取一个项目。这个想法只是用空对象添加填充以使所有对象的长度相同。

# javascript - 根据条件提交表格。jQuery

> ID：13911484
> 
> 赞同：2
> 
> 时间：2012-12-17T09:32:45.847
> 
> 标签：javascript, jquery, html

我有一个表单和一个提交按钮。我想在这个提交按钮上用 jquery 设置一个条件。我不希望它仅在用户输入有效的电子邮件地址时才发布表单。

**HTML 代码：**

```
<form  method="post" action="{% url sportdub.views.login %}">
    <input type="text" name="email" value="" class="span8"/>
    <input type="submit"></button>
</form> 
```

**Javascript代码：**

```
function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
}; 
```

我想要做的是在我的提交按钮上设置一个条件：

```
if( !isValidEmailAddress( emailaddress ) ) { 
    /* don't submit the form and raise an error */ 
} else { 
    /* submit the form */
} 
```

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:34:24.080

您需要将`onsubmit`事件处理程序添加到您的表单中，`return false`如果它没有通过验证。

例如根据您的代码：

```
 <form  method="post" action="{% url sportdub.views.login %}" onsubmit="return validateForm();">
    <input type="text" id="formEmail" name="email" value="" class="span8"/>
    <input type="submit"></button>
  </form> 
```

在 JS 中：

```
function validateForm() {
    if( !isValidEmailAddress( document.getElementById( 'formEmail' ).value ) ) { 
        // also before return you can add alert( 'your e-mail is invalid' ); 
        // or display message in form, etc...
        return false;
     } else { 
        return true;
     }    
} 
```

顺便说一句，我不建议使用内联 JS 属性，只需添加到所有元素并形成唯一的 id 属性，如果您使用 jQuery，您可以在**[.submit()](http://api.jquery.com/submit/)**方法中进行所有验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T09:40:21.903

排队：

```
 <form  method="post" action="{% url sportdub.views.login %}"
   onsubmit="return isValidEmailAddress(this.email.value)">
    <input type="text" name="email" value="" class="span8"/>
    <input type="submit"></button>
  </form> 
```

更好（纯 JS） - 注意我需要一个表单的 ID：

```
window.onload=function() {
  document.getElementById("form1").onsubmit=function() {
    if (!isValidEmailAddress(this.email.value)) {
      alert('Please enter a valid address');
      return false; // cancel submit
    }
    return true; // allow submit
  }
} 
```

jQuery版本：

```
$(function() {
  $("#form1").on("submit",function(e) {
    if (!isValidEmailAddress($("#email").val())) {
      alert('Please enter a valid address');
      return false; // cancel submit
    }
    return true; // allow submit
  });
}); 
```

最后两个假设

```
<form  id="form1" method="post" action="{% url sportdub.views.login %}">
  <input type="text" name="email" id="email" value="" class="span8"/>
  <input type="submit"></button>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:36:38.900

在您的提交按钮中使用一个 onclick 调用并**返回**...您的代码应该是，

```
<form  method="post" action="{% url sportdub.views.login %}">
    <input type="text" id="email" name="email" value="" class="span8"/>
    <input type="submit" onclick = "return isValidEmailAddress();"></button>
  </form>

function isValidEmailAddress() {
     var emailAddress = $('#email').val();
     var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
     return pattern.test(emailAddress);
  }; 
```

# r - R 中的 diff() 函数有什么作用？

> ID：13911486
> 
> 赞同：34
> 
> 时间：2012-12-17T09:32:50.920
> 
> 标签：r

我不明白`diff()`R 中的函数是做什么的。看这个例子：

```
 temp = c(10,1,1,1,1,1,1,2,1,1,1,1,1,1,1,3,10)
 diff(temp) 
```

上面的代码产生以下输出：

```
 [1] -9  0  0  0  0  0  1 -1  0  0  0  0  0  0  2  7 
```

这个函数的定义是什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-17T09:48:02.907

该函数计算向量的所有连续值之间的差异。对于您的示例向量，区别在于：

```
 1 - 10 = -9
 1 -  1 =  0
 1 -  1 =  0
.
.
.
 3 -  1 =  2
10 -  3 =  7 
```

* * *

该参数`differences`允许您指定差异的顺序。

例如，命令

```
diff(temp, differences = 2) 
[1]  9  0  0  0  0  1 -2  1  0  0  0  0  0  2  5 
```

产生与

```
diff(diff(temp))
[1]  9  0  0  0  0  1 -2  1  0  0  0  0  0  2  5 
```

因此，它返回差异的差异。

* * *

该参数`lag`允许您指定延迟。

例如，如果`lag = 2`，则计算第三和第一值之间、第四和第二值之间、第五和第三值之间的差等。

```
diff(temp, lag = 2)
[1] -9  0  0  0  0  1  0 -1  0  0  0  0  0  2  9 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-17T09:52:56.043

它计算连续元素对之间的差异。

假设`temp`是对某些变量的观察，例如每小时的温度读数。然后`diff(temp)`会告诉你每小时温度变化了多少。

的反义词`diff()`是`cumsum()`（累计）：

```
> temp
 [1] 10  1  1  1  1  1  1  2  1  1  1  1  1  1  1  3 10
> cumsum(c(10, diff(temp)))
 [1] 10  1  1  1  1  1  1  2  1  1  1  1  1  1  1  3 10 
```

# jquery - 悬停在 IE 中无法正常工作

> ID：13911487
> 
> 赞同：0
> 
> 时间：2012-12-17T09:32:51.347
> 
> 标签：jquery, html, css

我有一个如下列表：

```
<li class="top" style="position: relative;" >
<a href="#">parent</a>
<ul class="toshow" style="display:none;position :absolute; " >
<li><a  href="#">child1</a></li>
<li><a  href="#">child2</a></li>
<li><a  href="#">child3</a></li>
<li><a  href="#">child4</a></li>
</ul>
</li> 
```

然后我有这个 jquery 代码来处理悬停并显示子项目：

```
$(document).on({mouseenter: function () {$(this).find('.toshow:first').show("slide", { direction: "left" }, 600,function(){});},
    mouseleave: function () {$(this).find('.toshow:first').hide("slide", { direction: "right" }, 400);}
    }, '.top'); 
```

它在每个浏览器上都可以正常工作，但 IE（我的是 IE8）问题是当鼠标光标进入子项之间的空间时。它的行为就像它在父节点之外。

**似乎即使在父级的大小发生更改后，IE 也不考虑大小更改并根据先前的大小折叠父级。**

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:54:32.970

您可以尝试在 head 部分设置 IE8 特定的 CSS。

```
<!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8.css" />
<![endif]--> 
```

然后给子元素一个负的“顶部”值，这样它们就会向上移动并且不留空隙。

```
ul.toshow > li {
    position: relative;
    top: -1px;
} 
```

# mysql - 添加 GROUP BY 或 DISTINCT 如何给出相同的结果集？

> ID：13911489
> 
> 赞同：0
> 
> 时间：2012-12-17T09:33:00.567
> 
> 标签：mysql, sql, join, group-by, distinct

```
SELECT unit.id,
       unit.unit_name,
       unit.description,
       unit.category_id,
       city.name,
       mealbase.name AS mealbase_name,
       unit.province_id,
       unit.rooms,
       unit.max_people,
       unit.thumblocation,
       prices.normal_price,
       prices.holiday_price
FROM   jos_units AS unit,
       jos_prices AS prices,
       jos_cities AS city,
       jos_meal_basis AS mealbase
WHERE  prices.unit_id = unit.id
       AND city.id = unit.city_id
       AND unit.published = 1
       AND unit.mealbasis_id = mealbase.id 
```

当我运行这个查询时，它给了我冗余的结果集，如下所示。

![在此处输入图像描述](../Images/7b4d8ce3a6453eea3d366464aa95bfa1.png)

但是如果我添加

`SELECT DISTINCT unit.id`而不是`SELECT unit.id`在开头***或*** `GROUP BY unit.unit.id`结尾。它给了我正确的结果集，如下所示。

![在此处输入图像描述](../Images/6eb9550f49c91bbddb76145ba5fc4827.png)

我的问题是我的查询出了什么问题（即使我已更正加入它们，上面的加入也会产生多余的结果）？为什么这里的查询（解决问题）的添加`SELECT DISTINCT unit.id`或相同？`GROUP BY unit.unit.id`（DISTINCT 和 GROUP BY 是不同的功能）

鉴于我知道添加 `SELECT DISTINCT unit.id 将删除冗余结果，但是添加两个片段中的一个如何给出相同的结果集？显然 SELECT DISTINCT unit.id 应该通过 GROUP BY 如何删除冗余行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:37:11.990

基本上，您在不使用聚合函数的情况下对结果进行分组（例如使用 a`COUNT`或 a `MAX`），因此您获得聚合行的方式与通过选择`DISTINCT`对象获得聚合行的方式相同。如果您不需要聚合它们，`DISTINCT`是正确的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T09:50:44.513

> 即使我已更正加入它们，上面的加入也会产生多余的结果，这是为什么？

那是因为您的表格如何：

*   `jos_units`.
*   `jos_prices`.
*   `jos_cities`.
*   `jos_meal_basis`.

彼此相关。

这些表之间似乎有一对多或多对多的关系。例如，对于 中的每条记录`jos_meal_basis`，每餐都有一个单位，因此可能会以同一个单位来衡量多餐，然后在连接两个表时，您将因此得到多余的单位。与其他表相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:42:44.947

您在第一个查询中的组合，即

```
(unit.id,
       unit.unit_name,
       unit.description,
       unit.category_id,
       city.name,
       mealbase.name AS mealbase_name,
       unit.province_id,
       unit.rooms,
       unit.max_people,
       unit.thumblocation,
       prices.normal_price,
       prices.holiday_price) has duplicates and so you are getting more than 1 rows for the same combination. 
```

当您使用`distinct clause or group by`它时，它会删除上述组合中的重复项。希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T09:43:38.240

`GROUP BY`如果您想使用聚合或分组函数，则主要使用它。例如，如果您想查找匹配的行数，您可以这样做

```
SELECT
  id
, COUNT(id) num_rows
FROM
...
GROUP BY id 
```

因为这`COUNT`是一个聚合函数，您需要按其他列分组。如果您没有执行任何聚合函数，`GROUP BY`则本质上只是将行聚合起来（如果这是您编写的方式），仅导致一行 - 与`DISTINCT`.

# mysql - 在 CI 中获取数据库列作为字符串

> ID：13911490
> 
> 赞同：1
> 
> 时间：2012-12-17T09:33:02.293
> 
> 标签：mysql, sql, codeigniter

```
group     number
-------  -------------
grp1    01714586236
grp2    01924586236
grp1    01682659834
grp1    018823453468
grp2    01985345098 
```

* * *

我想要='grp1'`number`的所有列数`group`

```
(01714586236,01682659834,018823453468,......) 
```

在代码点火器中，请通过发布所有控制器、模型和视图来分享答案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:37:06.437

您可以使用该[**`GROUP_CONCAT`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat) 功能，如下所示：

```
SELECT
  `group`,
  GROUP_CONCAT(`number` SEPARATOR ',')
FROM Table
WHERE `group` = 'grp1' 
GROUP BY `group`; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/86722/2)

这会给你：

```
| GROUP |                          THEGROUP |
---------------------------------------------
|  grp1 | 1714586236,1682659834,18823453468 | 
```

# python - gevent pool.wait_available() 方法含义

> ID：13911497
> 
> 赞同：0
> 
> 时间：2012-12-17T09:33:22.033
> 
> 标签：python, gevent, eventlet, greenlets

看，人们。我们有一个关于 gevent.pool 类和 pool.wait_available() 方法的问题，两个代码片段

**1.**

```
def fetch(url):
    print 'start fetching...', url
    data = urllib2.urlopen(url)
    print url,':',data.code

urls = ['http://www.google.ru', 'http://www.s-str.ru', 'http://www.vk.com', 'http://www.yandex.ru', 'http://www.xxx.com']

pool = Pool(2)

def producer():
    for url in urls:
        pool.spawn(fetch, url)
    pool.join()

p = gevent.spawn(producer)
p.join() 
```

**2.**

```
def fetch(url):
    print 'start fetching...', url
    data = urllib2.urlopen(url)
    print url,':',data.code

urls = ['http://www.google.ru', 'http://www.s-str.ru', 'http://www.vk.com', 'http://www.yandex.ru', 'http://www.xxx.com']

pool = Pool(2)

def producer():
    for url in urls:
        pool.wait_available()
        pool.spawn(fetch, url)
    pool.join()

p = gevent.spawn(producer)
p.join() 
```

给我们类似的结果：

```
start fetching... http://www.google.ru
start fetching... http://www.s-str.ru
http://www.google.ru : 200
start fetching... http://www.vk.com
http://www.s-str.ru : 200
start fetching... http://www.yandex.ru
http://www.yandex.ru : 200
start fetching... http://www.xxx.com
http://www.vk.com : 200
http://www.xxx.com : 200 
```

谁能解释 wait_available() 方法的含义？以及可能的使用情况。

=======update======== 我已经对它进行了修改，它可以正常工作，我只想知道这两个代码片段之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-17T21:00:42.100

**TL;DR**：`wait_available`如果您使用 spawn 则没有必要，因为在两种方法中都运行相同的检查。但是，如果您正在使用`apply_async`并且不想提交超过池上限的线程，那么您应该`wait_available`首先调用。

* * *

对于可能稍微更清楚的解释.. 有几种方法可以用 gevent 的`Pool`类来实现同样的事情。在池上使用`spawn`将阻塞，直到有空间可`Pool`用于运行新的 greenlet。这是一个简单的例子：

```
import gevent.monkey
gevent.monkey.patch_all()
import gevent.pool
import time

def my_slow_function():
    time.sleep(5)

def log(text):
    print '%d : %s' % (int(time.time()), text)

if __name__ == '__main__':
    thread_pool = gevent.pool.Pool(5)
    for i in xrange(20):
        log('Submitting slow func %d' % i)
        thread_pool.spawn(my_slow_function)
    thread_pool.join()
    log('Exiting') 
```

其输出表明它将以 5 个为一组生成这些，因为池中包含 5 个 greenlets 的空间：

> 1403037287：提交慢FUNC 0
> 1403037287：提交慢FUNC 1
> 1403037287：提交慢FUNC 2
> 1403037287：提交慢FUNC 3
> 1403037287：提交慢FUNC 4
> 1403037292：提交慢FUNC 5
> 1403037292：提交慢FUNC 6
> 1403037292：提交慢FUNC 7
> 1403037292：提交慢FUNC 8
> 1403037292：提交慢FUNC 9
> 1403037297：提交慢FUNC 10
> 1403037297：提交慢FUNC 11
> 1403037297：提交慢FUNC 12
> 1403037297：提交慢FUNC 13
> 1403037297：提交慢FUNC 14
> 1403037302：提交慢FUNC 15
> 1403037302：提交慢功能 16
> 1403037302：提交慢功能 17
> 1403037302：提交慢功能 18
> 1403037302：提交慢功能 19
> 1403037307：退出

如您所见，它们以 5 组的形式生成，间隔大约 5 秒。如果您深入研究 gevent 代码并查看 Pool 对象，您会看到调用`spawn`将要求锁定`Pool`s 内部信号量，该信号量用于跟踪正在运行的 greenlets。

`apply_async`相反，如果您使用而不是尝试相同的代码`spawn`，它将强制所有调用同时运行：

> 1403037313：提交慢FUNC 0
> 1403037313：提交慢FUNC 1
> 1403037313：提交慢FUNC 2
> 1403037313：提交慢FUNC 3
> 1403037313：提交慢FUNC 4
> 1403037313：提交慢FUNC 5
> 1403037313：提交慢FUNC 6
> 1403037313：提交慢FUNC 7
> 1403037313：提交缓慢的功能8
> 1403037313：提交缓慢的功能9
> 1403037313：提交慢速功能10
> 1403037313：提交慢速功能11
> 1403037313：提交慢速Func 12
> 1403037313：提交慢速Func 13
> 1403037313：提交慢速
> 速合
> 1403037313：提交慢功能 16
> 1403037313：提交慢功能 17
> 1403037313：提交慢功能 18
> 1403037313：提交慢功能 19
> 1403037318：退出

您可以在这里看到没有阻塞或等待，它们都是同时被推入的。但是，如果你在`wait_available()`for 循环的开头加入 a，你会回到与`spawn`.

> 1403038292：提交慢FUNC 0
> 1403038292：提交慢FUNC 1
> 1403038292：提交慢FUNC 2
> 1403038292：提交慢FUNC 3
> 1403038292：提交慢FUNC 4
> 1403038297：提交慢FUNC 5
> 1403038297：提交慢FUNC 6
> 1403038297：提交慢FUNC 7
> 1403038297：提交慢FUNC 8
> 1403038297：提交慢FUNC 9
> 1403038302：提交慢FUNC 10
> 1403038302：提交慢FUNC 11
> 1403038302：提交慢FUNC 12
> 1403038302：提交慢FUNC 13
> 1403038302：提交慢FUNC 14
> 1403038307：提交慢FUNC 15
> 1403038307：提交慢功能 16
> 1403038307：提交慢功能 17
> 1403038307：提交慢功能 18
> 1403038307：提交慢功能 19
> 1403038312：退出

再一次，查看 gevent 中的源代码，`wait_available`执行与调用结果相同的检查，`spawn`即检查信号量以查看池中是否真的有空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:47:18.690

与`gevent`您合作之前需要修补标准模块。

```
>>> import gevent.monkey
>>> gevent.monkey.patch_all()
>>> ...
>>> p = gevent.spawn(producer)
>>> p.join()
start fetching... http://www.google.ru
start fetching... http://www.s-str.ru
http://www.google.ru : 200
start fetching... http://www.vk.com
http://www.vk.com : 200
start fetching... http://www.yandex.ru
http://www.yandex.ru : 200
start fetching... http://www.xxx.com
http://www.xxx.com : 200
http://www.s-str.ru : 200 
```

你可以看到，这是`pool.wait_available()`可以预测的。

**更新**

`Pool`仅对`spawn`功能以相同的方式工作（它将等待池中可用的“插槽”）。如果您需要提供基于`Pool`状态的其他功能（日志记录、跟踪、监控） - 您肯定会使用 等功能`wait_available`。`free_count`如果您只需要`spawn`新的绿色线程 - 您可以依赖`Pool`实现。

# hadoop - 何时使用 Hadoop、HBase、Hive 和 Pig？

> ID：13911501
> 
> 赞同：196
> 
> 时间：2012-12-17T09:33:35.580
> 
> 标签：hadoop, hbase, hive, apache-pig

使用**Hadoop**或**HBase**或**Hive**有什么好处？

据我了解，**HBase**避免使用 map-reduce，并且在 HDFS 之上具有面向列的存储。**Hive**是**Hadoop**和**HBase**的类似 sql 的接口。

我也想知道**Hive**与**Pig**的比较。

* * *

## 回答 #1

> 赞同：361
> 
> 时间：2012-12-17T12:56:57.163

MapReduce 只是一个**计算框架**。HBase 与它无关。也就是说，您可以通过编写 MapReduce 作业有效地将数据放入 HBase 或从 HBase 获取数据。或者，您可以使用其他 HBase API（例如 Java）编写顺序程序来放置或获取数据。但是我们使用 Hadoop、HBase 等来处理大量数据，所以这没有多大意义。当您的数据太大时，使用普通的顺序程序将非常低效。

回到问题的第一部分，Hadoop 基本上是两件事：**分布式文件系统 (HDFS)** +**计算或处理框架 (MapReduce)**。与所有其他 FS 一样，HDFS 也为我们提供存储，但以容错方式具有高吞吐量和较低的数据丢失风险（由于复制）。但是，作为 FS，HDFS 缺乏**随机读写访问**。这就是 HBase 发挥作用的地方。它是一个**分布式、可扩展的大数据存储**，以 Google 的 BigTable 为蓝本。它将数据存储为键/值对。

来到蜂巢。它在现有的 Hadoop 集群之上为我们提供了数据**仓库设施。**除此之外，它还提供了一个**类似 SQL 的**界面，如果您来自 SQL 背景，它可以让您的工作更轻松。您可以在 Hive 中创建表并在其中存储数据。除此之外，您甚至可以将现有的 HBase 表映射到 Hive 并对其进行操作。

而 Pig 基本上是一种**数据流语言**，它使我们能够非常轻松快速地处理大量数据。Pig 基本上有两部分：Pig **Interpreter**和语言**PigLatin**。您在 PigLatin 中编写 Pig 脚本并使用 Pig 解释器处理它们。Pig 让我们的生活轻松了很多，否则写 MapReduce 总是不容易。事实上，在某些情况下，它真的会成为一种痛苦。

不久前，我写了[一篇文章，对 Hadoop 生态系统的不同工具进行了简短的比较](http://cloudfront.blogspot.com/2013/04/hadoop-herd-when-to-use-what.html)。这不是深度比较，而是对这些工具的简短介绍，可以帮助您入门。（只是为了补充我的答案。无意自我推销）

**Hive 和 Pig 查询都在后台转换为 MapReduce 作业。**

高温高压

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-07-29T23:56:32.573

我最近在我的公司实施了一个 Hive Data 平台，因为我是一个单人团队，所以我可以用第一人称与它交谈。

# 客观的

1.  每天从 350 多台服务器收集的每日 Web 日志文件可通过类似**SQL**的语言进行查询
2.  用 Hive替换通过*MySQL生成的每日聚合数据*
3.  *通过Hive*中的查询构建自定义报告

 *# 架构选项

我对以下选项进行了基准测试：

1.  **蜂巢+HDFS**
2.  **Hive+HBase** - 查询太慢所以我放弃了这个选项

# 设计

1.  每日日志文件被传输到*HDFS*
2.  *MR 作业在HDFS*中解析这些日志文件和输出文件
**   创建具有指向*HDFS*位置的分区和位置的 Hive 表*   创建 Hive 查询脚本（如果您喜欢与*SQL的差异，则将其称为**HQL*），然后在后台运行 MR 作业并生成聚合数据**   将所有这些步骤放入*Oozie*工作流程 - 由 Daily *Oozie* Coordinator安排**

 **# 概括

*HBase*就像一个地图。如果您知道密钥，您可以立即获得价值。但是如果你想知道 Hbase 中有多少个整数键在 1000000 到 2000000 之间，那是不适合单独使用*Hbase*的。

如果您有需要跨行聚合、汇总、分析的数据，请考虑*Hive*。

希望这会有所帮助。

*Hive*实际上很摇滚……我知道，我已经住了 12 个月了…… *HBase*也是如此……

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-10-30T10:14:28.743

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-12-17T20:47:26.577

考虑到您使用 RDBMS 并且必须选择要使用的内容 - 全表扫描或索引访问 - 但只能选择其中一种。
如果您选择全表扫描 - 使用 hive。如果索引访问 - HBase。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-11-29T19:08:39.663

**深入了解**

**Hadoop**

`Hadoop``Apache`是基金会的一个开源项目。它是一个用 编写的框架`Java`，最初由 Doug Cutting 在 2005 年开发。创建它是为了支持`Nutch`文本搜索引擎的分发。`Hadoop`使用 Google`Map Reduce`和 Google 文件系统技术作为其基础。

**Hadoop的特点**

1.  它经过优化，可以使用商用硬件处理大量结构化、半结构化和非结构化数据。
2.  它没有共享任何架构。
3.  它将其数据复制到多台计算机中，因此如果一台计算机出现故障，仍可以从另一台存储其副本的计算机上处​​理数据。
4.  `Hadoop`是为了高吞吐量而不是低延迟。它是处理海量数据的批处理操作；因此响应时间不是即时的。
5.  它补充了在线交易处理和在线分析处理。但是，它不能替代`RDBMS`.
6.  当工作无法并行化或数据中存在依赖关系时，这是不好的。
7.  它不适合处理小文件。它最适用于巨大的数据文件和数据集。

**Hadoop 的版本**

有两个版本`Hadoop`可用：

1.  Hadoop 1.0
2.  Hadoop 2.0

**Hadoop 1.0**

它有两个主要部分：

**1\. 数据存储框架**

它是一种通用文件系统，称为 Hadoop 分布式文件系统 ( `HDFS`)。

`HDFS`是无模式的

它只是存储数据文件，这些数据文件可以是几乎任何格式。

这个想法是尽可能接近其原始形式存储文件。

这反过来又为业务部门和组织提供了急需的灵活性和敏捷性，而不必过度担心它可以实施什么。

**2\. 数据处理框架**

这是一个简单的函数式编程模型，最初由 Google 推广为`MapReduce`.

它本质上使用两个功能：`MAP`和`REDUCE`处理数据。

“映射器”接收一组键值对并生成中间数据（这是另一个键值对列表）。

“Reducers”然后作用于这个输入以产生输出数据。

这两个功能似乎彼此隔离工作，从而使处理能够以高度并行、容错和可扩展的方式高度分布。

**Hadoop 1.0 的局限性**

1.  第一个限制是对`MapReduce`编程专业知识的要求。

2.  它只支持批处理，虽然适用于日志分析、大规模数据挖掘项目等任务，但几乎不适合其他类型的项目。

3.  一个主要限制是`Hadoop 1.0`在计算上与 紧密耦合`MapReduce`，这意味着已建立的数据管理供应商留下了两种意见：

    1.  要么重写它们的功能，`MapReduce`以便它可以执行，`Hadoop`要么

    2.  从. `HDFS`_`Hadoop`

这些选项都不可行，因为它会导致数据移入和移出`Hadoop`集群导致流程效率低下。

**Hadoop 2.0**

在`Hadoop 2.0`，`HDFS`继续是数据存储框架。

但是，添加了一个新的独立资源管理框架，称为**Y** et **A** **other** Resource **N** egotiater ( **YARN** )。

 **YARN 支持任何能够将自身划分为并行任务的应用程序。

YARN 协调提交应用程序的子任务分配，从而进一步提高应用程序的灵活性、可扩展性和效率。

它的工作原理是使用**Application Master**代替**Job Tracker ，在新****节点管理器管理**的资源上运行应用程序。

ApplicationMaster 能够运行任何应用程序，而不仅仅是`MapReduce`.

这意味着它不仅支持批处理，还支持实时处理。`MapReduce`不再是唯一的数据处理选项。

**Hadoop的优势**

它将数据存储在其本机中。在键入数据或存储数据时没有强加结构。`HDFS`少模式。只有稍后需要处理数据时，才会将结构强加于原始数据。

它是可扩展的。`Hadoop`可以在数百台并行运行的廉价服务器上存储和分发非常大的数据集。

它对失败具有弹性。`Hadoop`是容错。它勤奋地实践数据的复制，这意味着每当数据发送到任何节点时，相同的数据也会被复制到集群中的其他节点，从而确保在节点发生故障时，总会有另一个数据副本可供使用。

它是灵活的。其主要优势之一`Hadoop`是它可以处理任何类型的数据：结构化、非结构化或半结构化。`Hadoop`此外，由于“将代码移动到数据”范例，处理速度非常快。

**Hadoop生态系统**

以下是`Hadoop`生态系统的组成部分：

**HDFS**：`Hadoop`分布式文件系统。它只是尽可能接近原始形式存储数据文件。

**HBase**：它是 Hadoop 的数据库，与`RDBMS`. 它支持大表的结构化数据存储。

**Hive**：它可以使用与 standard 非常相似的语言来分析大型数据集`ANSI SQL`，这意味着任何熟悉该语言的人都`SQL`应该能够访问`Hadoop`集群上的数据。

**Pig**：它是一种易于理解的数据流语言。它有助于分析大型数据集，这与`Hadoop`. `Pig`解释器会自动将脚本转换为`MapReduce`作业`Pig`。

**ZooKeeper**：它是分布式应用程序的协调服务。

**Oozie**：这是一个`schedular`管理 Apache`Hadoop`作业的工作流系统。

**Mahout**：它是一个可扩展的机器学习和数据挖掘库。

**Chukwa**：它是用于管理大型分布式系统的数据收集系统。

**Sqoop**：用于在`Hadoop`关系数据库等结构化数据存储之间传输批量数据。

**Ambari**：它是一个基于 Web 的工具，用于配置、管理和监控`Hadoop`集群。

**蜂巢**

`Hive`是一种数据仓库基础设施工具，用于处理`Hadoop`. 它位于总结大数据的基础之上，`Hadoop`使查询和分析变得容易。

**蜂巢不是**

1.  关系数据库

2.  在线事务处理设计 ( `OLTP`)。

3.  一种用于实时查询和行级更新的语言。

**蜂巢的特点**

1.  它将模式存储在数据库中，并将处理后的数据存储到`HDFS`.

2.  它专为`OLAP`.

3.  它提供`SQL`类型语言用于查询称为`HiveQL`or `HQL`。

4.  它更熟悉、快速、可扩展和可扩展。

**蜂巢架构**

Hive 架构中包含以下组件：

1.  **用户界面**：`Hive`是一种`data warehouse`可以在用户和`HDFS`. 支持的用户界面`Hive`是 Hive Web UI、Hive 命令行和 Hive HD Insight（在 Windows Server 中）。

2.  **MetaStore**：`Hive`选择各自`database` `servers`存储`Metadata`表、数据库、表中的列、它们的数据类型和`HDFS`映射的模式。

3.  **HiveQL 流程引擎**：`HiveQL`类似于`SQL`在`Metastore`. 它是传统`MapReduce`程序方法的替代方法之一。我们可以编写查询并处理它，而不是写`MapReduce`in 。`Java``MapReduce`

4.  **执行引擎**`HiveQL`：流程引擎的结合部分，`MapReduce`是`Hive`执行引擎。执行引擎处理查询并生成与 相同的结果`MapReduce results`。它使用`MapReduce`.

5.  **HDFS 或 HBase**：`Hadoop`分布式文件系统，或者`HBase`是将数据存储到文件系统中的数据存储技术。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-17T10:27:32.923

有关 Hadoop 与 Cassandra/HBase 之间的比较，请阅读这篇[文章](http://shazsterblog.blogspot.com/2012/11/hadoop-vs-cassandra-and-hbase.html)。

基本上，HBase 可以实现真正快速的读写和可扩展性。速度和可扩展性如何？[Facebook](https://www.facebook.com/UsingHbase)使用它来管理其用户状态、照片、聊天消息等。HBase 是如此之快，有时 Facebook 开发了堆栈以使用 HBase 作为 Hive 本身的数据存储。

哪里 As Hive 更像是一个数据仓库解决方案。您可以使用类似于 SQL 的语法来查询 Hive 内容，从而生成 Map Reduce 作业。不适合快速的事务性系统。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-01-16T07:31:43.317

我从事 Lambda 架构处理实时和批量加载。如果需要在传感器发送火灾警报或在银行交易的情况下检测欺诈时需要做出快速决策，则需要实时处理。需要批处理来汇总可以输入 BI 系统的数据。

我们将**Hadoop**生态系统技术用于上述应用程序。

**实时处理**

Apache Storm：流数据处理，规则应用

HBase：用于服务实时仪表板的数据存储

**批处理** Hadoop：处理大量数据。360 度概览或为事件添加上下文。Pig、MR、Spark、Hive、Shark 等接口或框架有助于计算。这一层需要调度程序，Oozie 是个不错的选择。

**事件处理层**

Apache Kafka 是从传感器消耗高速事件的第一层。Kafka 通过 Linkedin 连接器提供实时和批量分析数据流。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-07-26T13:45:04.413

首先，我们应该清楚**Hadoop**是作为**RDBMS**的更快替代品而创建的。以非常快的速度处理大量数据，这在 RDBMS 中花费了很多时间。

现在应该知道这两个术语：

1.  **结构化数据**：这是我们在传统 RDBMS 中使用的数据，被划分为定义良好的结构。

2.  **非结构化数据**：理解这一点很重要，世界上大约 80% 的数据是非结构化或半结构化的。这些是原始形式的数据，无法使用 RDMS 进行处理。示例：facebook、twitter 数据。（[http://www.dummies.com/how-to/content/unstructured-data-in-a-big-data-environment.html](http://www.dummies.com/how-to/content/unstructured-data-in-a-big-data-environment.html)）。

*因此，过去几年产生了大量数据，并且数据大多是非结构化的，这催生了 HADOOP。它主要用于使用 RDBMS 花费大量时间的大量数据。它有很多缺点，它不能实时用于相对较小的数据，但他们已经设法在较新的版本中消除了它的缺点。*

*在继续之前，我想告诉他们，当他们看到以前的工具出现故障时，会创建一个新的大数据工具。因此，您将看到创建的任何工具都已完成以克服先前工具的问题。*

**Hadoop**可以简单地说成两件事：**Mapreduce**和**HDFS**。Mapreduce 是进行处理的地方，而 HDFS 是存储数据的数据库。这种结构遵循**WORM**原则，即一次写入多次读取。因此，一旦我们将数据存储在 HDFS 中，我们就无法进行更改。这导致了**HBASE**的创建，这是一个 NOSQL 产品，我们可以在写入一次后对数据进行更改。

*但随着时间的推移，我们发现 Hadoop 有很多错误，为此我们在 Hadoop 结构上创建了不同的环境。PIG 和 HIVE 是两个流行的例子。*

**HIVE**是为具有**SQL**背景的人创建的。编写的查询类似于名为**HIVEQL**的 SQL 。HIVE 被开发用于处理完全**结构化的数据**。它不用于非结构化数据。

**另一方面，**PIG有自己的查询语言，即****PIG LATIN**。它既可用于**结构化**数据，也可用于**非结构化数据**。**

 **谈到何时使用 HIVE 和何时使用 PIG 的区别，我认为除了 PIG 的架构师之外的任何人都不能说。点击链接： [https ://developer.yahoo.com/blogs/hadoop/comparing-pig-latin-sql-constructing-data-processing-pipelines-444.html](https://developer.yahoo.com/blogs/hadoop/comparing-pig-latin-sql-constructing-data-processing-pipelines-444.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-25T12:54:50.793

> Hadoop：

HDFS 代表 Hadoop 分布式文件系统，它使用计算处理模型 Map-Reduce。

> HBase：

HBase 是 Key-Value 存储，适合近乎实时的读写。

> 蜂巢：

Hive 用于使用类似 SQL 的语法从 HDFS 中提取数据。Hive 使用 HQL 语言。

> 猪：

Pig 是一种用于创建 ETL 的数据流语言。它是一种脚本语言。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-31T06:48:41.093

让我试着用几句话来回答。

Hadoop 是一个包含所有其他工具的生态系统。因此，您无法比较 Hadoop，但可以比较 MapReduce。

这是我的几分钱：

1.  **Hive：**如果您的需求非常 SQL 意味着您的问题陈述可以由 SQL 满足，那么最简单的事情就是使用 Hive。另一种情况，当您使用 hive 时，您希望服务器具有特定的数据结构。
2.  **Pig：**如果您对 Pig Latin 感到满意，并且您需要更多的数据管道。此外，您的数据缺乏结构。在这些情况下，您可以使用 Pig。老实说，Hive 和 Pig 在用例方面没有太大区别。
3.  **MapReduce：**如果你的问题不能直接使用 SQL 解决，你首先应该尝试为 Hive & Pig 创建 UDF，然后如果 UDF 不能解决问题，那么通过 MapReduce 完成它是有意义的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-10T09:07:02.287

Pig：最好处理文件和清理数据示例：删除空值，字符串处理，不必要的值 Hive：用于查询已清理的数据

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-07T04:23:21.927

1.我们使用 Hadoop 存储大数据（即结构、非结构和半结构数据），格式为 txt、csv 等格式文件。

2.如果我们想要在我们的数据中进行列更新，那么我们正在使用 Hbase 工具

3.在 Hive 的情况下，我们以结构化格式存储大数据，除此之外，我们还提供对该数据的分析。

4.Pig是使用Pig拉丁语言分析任何格式（结构、半结构和非结构）数据的工具。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-12T04:09:04.703

在 Pig 中清理数据非常简单，一个合适的方法是通过 pig 清理数据，然后通过 hive 处理数据，然后将其上传到 hdfs。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-02T04:06:36.870

根据我在不同项目中的实时经验，我使用 Hive、Hbase 和 Pig。

Hive 主要用于：

*   需要对历史数据进行分析的分析目的

*   根据某些列生成业务报告

*   有效地管理数据和元数据信息

*   使用分桶概念在某些经常使用的列上连接表

*   使用分区概念进行高效存储和查询

*   对于更新、删除等事务/行级操作无用。

猪主要用于：

*   海量数据的频繁数据分析

*   在海量数据上生成聚合值/计数

*   非常频繁地生成企业级关键绩效指标

Hbase主要用于：

*   用于实时处理数据

*   用于有效管理复杂和嵌套模式

*   实时查询和更快的结果

*   使用列轻松扩展

*   对于更新、删除等事务/行级操作很有用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-06-24T15:43:45.800

这个问题的简短回答是——

Hadoop - 是促进分布式文件系统和编程模型的框架，与传统方法相比，它允许我们以分布式方式非常有效地存储大量数据和处理数据，并且处理时间非常短。

(HDFS - Hadoop 分布式文件系统) (Map Reduce - 分布式处理的编程模型)

Hive - 是一种查询语言，它允许以非常流行的类似 SQL 的方式从 Hadoop 分布式文件系统读取/写入数据。这使许多非编程背景的人的生活更轻松，因为他们不再需要编写 Map-Reduce 程序，除非是不支持 Hive 的非常复杂的场景。

Hbase - 是列式 NoSQL 数据库。Hbase 的底层存储层还是 HDFS。该数据库最重要的用例是能够存储数十亿行和数百万列。Hbase 的低延迟特性有助于更快、更随机地访问分布式数据上的记录，这是使其对推荐引擎等复杂项目有用的非常重要的特性。此外，它的记录级别版本控制功能允许用户非常有效地存储事务数据（这解决了我们使用 HDFS 和 Hive 更新记录的问题）

希望这有助于快速理解以上 3 个特性。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-08-11T19:43:08.110

我相信这个线程对 HBase 和 Pig 并没有特别公正。虽然我认为 Hadoop 是用于大数据湖实施的分布式、弹性文件系统的选择，但 HBase 和 Hive 之间的选择尤其是隔离良好的。

例如，许多用例对类似 SQL 或类似非 SQL 的接口有特殊要求。Phoenix 在 HBase 之上，虽然可以实现类似 SQL 的功能，但是性能、第三方集成、仪表板更新是一种痛苦的体验。但是，对于需要水平扩展的数据库来说，它是一个很好的选择。

Pig 特别适用于非递归批处理，如计算或 ETL 流水线（在某处，它的性能优于 Spark）。此外，它的高级数据流实现是批量查询和脚本的绝佳选择。Pig 和 Hive 之间的选择还取决于客户端或服务器端脚本的需要、所需的文件格式等。Pig 支持 Avro 文件格式，而 Hive 则不支持。“过程数据流语言”与“声明性数据流语言”的选择也是猪和蜂巢之间选择的有力论据。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-28T20:22:00.950

在 Cloudera 在 CDP 中摆脱它之后，Pig 基本上已经死了。Apache 上的最后一个版本也是 2017 年 6 月 19 日：发布 0.17.0，所以基本上没有提交者在积极工作了。使用比 Pig 更强大的 Spark 或 Python 方式。*******

# xslt - 如何向 XML CDATA 标签添加属性？

> ID：13911502
> 
> 赞同：0
> 
> 时间：2012-12-17T09:33:38.423
> 
> 标签：xslt

XML:

```
<?xml version="1.0" encoding="UTF-9" ?>
<mailAndMessageSettings>
    <settings>
        <add key="Url" value=""/>
        <add key="UserName" value=""/>
        <add key="Password" value=""/>
    </settings>
    <mail>
        <subject>
            Mp3 Submission
        </subject>
        <body>
            <![CDATA[
                <meta http-equiv="Content-Type" content="text/html; charset="utf-8""/>
                <head></head>

                <body>
                <p>Hi,</p>

                <p>Please find the attached mp3... :-)</p>

                <p><a href="mymp3.mp33">here</a></p>

                <p>Regards,</br>
                Pete</p>

                </body>
                </html> 
            ]]>
        </body>
    </mail>    
</mailAndMessageSettings> 
```

XSLT：

```
 <xsl:template match="/">
 <xsl:value-of select="/mailAndMessageSettings/mail" disable-output-escaping="yes"/>
 </xsl:template> 
```

预期输出：

```
 <mail>
            <subject>
                Mp3 Submission
            </subject>
            <body>
                <![CDATA[
                    <meta http-equiv="Content-Type" content="text/html; charset="utf-8""/>
                    <head></head>

                    <body>
                    <p>Hi,</p>

                    <p>Please find the attached mp3... :-)</p>

                    <p><a href="mymp3.mp3" onclick="myfunction();">here</a></p>

                    <p>Regards,</br>
                    Pete</p>

                    </body>
                    </html> 
                ]]>
            </body>
        </mail> 
```

我想在 CDATA 的“这里”上添加一个属性“onclick”并获取整个“邮件”节点？真的有可能吗？谁能帮我解决这个问题？提前致谢。您的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:50:55.017

CDATA 部分内没有节点或标签。CDATA 表示“字符数据”。将内容放入 CDATA 的唯一原因是说“这里的内容可能看起来像标记，但我不希望将其视为标记；将其视为文本”。所以如果你想把它当作标记，不要把它放在CDATA中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:56:19.183

您将不得不求助于字符串操作，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">
  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="body[contains(.,'>here&lt;/a>')]">
    <xsl:value-of disable-output-escaping="yes" select="concat(
        '&lt;![CDATA[',
        substring-before(.,'>here&lt;/a>'),
        ' onclick=&quot;myfunction();&quot;>here&lt;/a>',
        substring-after(.,'>here&lt;/a>'),
        ']]>'
      )"/>
  </xsl:template>
</xsl:stylesheet> 
```

但是邮件正文首先必须是 CDATA 有什么原因吗？

# android - adView 横幅错误

> ID：13911503
> 
> 赞同：0
> 
> 时间：2012-12-17T09:33:42.787
> 
> 标签：android, request, adview, banner-ads

我在我的应用程序中使用了 adMob 横幅，但是当我运行它时，出现如下错误：

```
12-17 12:32:19.098: E/Trace(1244): error opening trace file: No such file or directory (2)
12-17 12:32:19.727: D/dalvikvm(1244): GC_FOR_ALLOC freed 55K, 3% free 8039K/8259K, paused 60ms, total 63ms
12-17 12:32:19.907: I/dalvikvm-heap(1244): Grow heap (frag case) to 19.900MB for 12582928-byte allocation
12-17 12:32:20.008: D/dalvikvm(1244): GC_CONCURRENT freed 1K, 2% free 20326K/20615K, paused 30ms+19ms, total 97ms
12-17 12:32:21.677: W/Ads(1244): No Google Analytics: Library Incompatible.
12-17 12:32:21.697: D/AndroidRuntime(1244): Shutting down VM
12-17 12:32:21.697: W/dalvikvm(1244): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
12-17 12:32:21.727: E/AndroidRuntime(1244): FATAL EXCEPTION: main
12-17 12:32:21.727: E/AndroidRuntime(1244): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.app.antiwal7amel/com.app.antiwal7amel.MenuActivity}: java.lang.NullPointerException
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.os.Looper.loop(Looper.java:137)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at java.lang.reflect.Method.invoke(Method.java:511)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at dalvik.system.NativeStart.main(Native Method)
12-17 12:32:21.727: E/AndroidRuntime(1244): Caused by: java.lang.NullPointerException
12-17 12:32:21.727: E/AndroidRuntime(1244):     at com.app.antiwal7amel.MenuActivity.onCreate(MenuActivity.java:44)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.Activity.performCreate(Activity.java:5008)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-17 12:32:21.727: E/AndroidRuntime(1244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-17 12:32:21.727: E/AndroidRuntime(1244):     ... 11 more 
```

我使用它如下：

```
public class MenuActivity extends Activity   {
    AdView  adView ;
    @Override   

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);

        AdView ad = (AdView) findViewById(R.id.adView);
 AdRequest request = new AdRequest();
 ad.loadAd(request); 
```

在我的清单里面还有：

```
 <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"></activity> 
```

但是不知道问题出在哪里！我用谷歌搜索了很多没有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:44:28.970

如果问题出在`ad.loadAd(request);`这可能是您的布局`adView`中不存在id 的问题。`activity_main`

或者 . 的初始化可能有问题`AdRequest`。也许您可以检查为什么这些元素之一是`null`. 因为当您知道它们中的哪一个时，`null`您可以尝试解决问题。

# iphone - iPhone：NavigationBar BackNaviItem onClick 事件？

> ID：13911504
> 
> 赞同：2
> 
> 时间：2012-12-17T09:33:43.393
> 
> 标签：iphone, objective-c, ios, storyboard, uinavigationbar

在 Storyboards 之间的过渡中生成 NavigationBar。如何为 BackNaviItem 分配 onClick 功能？

谢谢

* * *

导航栏已自动生成。

我是这样写的。

```
[[self.navigationItem backBarButtonItem] action:@selector(backNaviItemSenderEvent) forControlEvents:UiControlEvenTouchUpInside]; 
```

不工作。(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:39:43.010

您可以将需要执行的任何代码放在`viewWillDisappear`正在关闭的视图控制器的后退操作中。

或者，您可以`navigationItem.leftBarButtonItem`使用例如保存按钮设置 ，并将其链接到您的`VC`. 后退按钮仅在`leftBarButtonItem`为时显示`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:45:06.143

只需在 上添加此自定义按钮`UINavigationBar`，只需在 BackButton 上覆盖此按钮，您就可以通过点击事件执行任何操作，只需尝试一下..

```
- (void)viewDidLoad
{
        ///write your code

        UIImage *backButtonImage = [UIImage imageNamed:@"backbutton.png"];
        UIButton *backbutton = [UIButton buttonWithType:UIButtonTypeCustom];
        //[backbutton setImage:backButtonImage forState:UIControlStateNormal];//this line for set only image on button
        [backbutton setBackgroundImage:backButtonImage forState:UIControlStateNormal];
        [backbutton setTitle:@"Back" forState:UIControlStateNormal];
        backbutton.frame = CGRectMake(0, 0, backButtonImage.size.width, backButtonImage.size.height);
        UIBarButtonItem * back = [[UIBarButtonItem alloc] initWithCustomView:backbutton];
        [backbutton addTarget:self action:@selector(yourButton_Clicked) forControlEvents:UIControlEventTouchUpInside];
        self.navigationItem.leftBarButtonItem = back;
} 
```

当您单击此左侧按钮时，下面的方法称为...

```
-(void)yourButton_Clicked{
      ///Write your code here...
} 
```

# javascript - 实例化多个对象

> ID：13911506
> 
> 赞同：0
> 
> 时间：2012-12-17T09:33:56.793
> 
> 标签：javascript, object

在 Javascript 中，我正在创建一个像这样的对象：

```
var testObject = {
    value: "this is my initial value",
    setup: function() {
        value: "foo"
    }
}; 
```

现在，我希望能够实例化这个对象，所以我正在尝试这个：

```
var myFirstObject  = new testObject();
var mySecondObject = new testObject(); 
```

这样当我调用`.setup()`它时，它只会更改引用的新创建对象的值。我怎样才能做到这一点？此代码似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:37:08.620

你不实例化对象，你实例化函数。

```
var testObject = function() {
  this.value = "this is my initial value";
  this.setup = function() {
    this.value = "foo";
  }
}

var myFirstObject = new testObject();
var mySecondObject = new testObject(); 
```

编辑：根据您的评论，这是使用此对象上的函数绑定到 DOM 的方式：

```
document.getElementById('idOfElem').addEventListener(
    'click', myFirstObject.clickHandler); 
```

请记住，您无法保证单击处理程序将在您的对象的上下文中执行（即在您的单击处理程序中，`this`可能不是您的`testObject`实例）。如果您`clickHandler`打算以任何方式修改对象的实例变量，最好确保上下文如下：

```
document.getElementById('el').addEventListener('click', 
    function() { 
        myObj.handleClick.apply(myObj, arguments);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:37:20.853

您的代码有很多问题。首先，您试图通过调用构造函数来实例化某些东西。你`testObject`不是一个函数，所以你会导致一个类型错误。您需要`testObject`按照以下方式进行更改：

```
var TestObject = function () {
    this.value = "this is my initial value";
};
TestObject.prototype.setup = function () {
    this.value = "foo";
}; 
```

请注意，我`T`在该标识符中使用了大写字母……这只是构造函数的最佳实践。还要注意我是如何`setup`在`prototype`. 这比将其定义为实例的属性（使用 ）要高效得多，`this.setup`因为内存中只需要存在一个函数副本。

现在这`TestObject`是一个函数，可以通过使用运算符调用它来实例化它`new`：

```
var myFirstObject = new TestObject();
var mySecondObject = new TestObject(); 
```

当您`setup`在 的实例上调用该方法时`TestObject`，它将应用于该实例。换句话说，方法`this`内部的值`setup`将引用调用该方法的实例：

```
myFirstObject.setup();
console.log(myFirstObject.value); // 'foo'
console.log(mySecondObject.value); // 'this is my initial value' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T09:38:33.063

您错误地定义了构造函数。尝试这个：

```
function testObject() {
    this.value = "this is my initial value";
    this.setup = function() {
        this.value = "foo"
    }
}; 
```

然后您可以调用`new testObject()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:37:08.267

您使用的对象表示法可以与静态类进行比较。这是您要实现的目标的代码：

```
var testObject = function(val) {
    this.value = "This is my initial value",

    if (arguments[0]) {
        this.value = val;
    }
};

var first = new testObject(); //uses initial value
var second = new testObject("hi"); //value = hi 
```

如果您想使用这种表示法编写类，请查看：[http ://ejohn.org/blog/simple-javascript-inheritance/](http://ejohn.org/blog/simple-javascript-inheritance/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T09:37:39.463

```
function yourObject(value, setup) {
        return {
            value: value,
            setup: setup
        };
}

var myFirstObject = new yourObject('a', function(){});
var mySecond = new yourObject('b', function(){}); 
```

# firefox - 渐变在 Firefox 中不起作用——我需要特定的颜色顺序吗？

> ID：13911509
> 
> 赞同：0
> 
> 时间：2012-12-17T09:34:11.800
> 
> 标签：firefox, css

如果您查看[http://jsfiddle.net/q2cFb/1/](http://jsfiddle.net/q2cFb/1/)，您可以看到两者`#b`都`#a`不能在 Firefox (13.0.1) 上运行。这是为什么？它适用于 Chrome（语法不同，但颜色相同）。

我是否需要一些特定的颜色才能使渐变起作用？两者`#a`都`#c`使用两种颜色，但`#a`不起作用。

HTML：

```
<div id='c'></div>
<div id='b'></div>
<div id='a'></div> 
```

CSS：

```
#c {
    background-image: -moz-linear-gradient(center bottom , #131315 37%, #272727 75%);
}

#b {
    background-image: -moz-linear-gradient(center bottom , #242424 80%, #1E1E1E 58%, #191919 20%);
}

#a {
    background-image: -moz-linear-gradient(center bottom , #242424 80%, #191919 20%);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:37:25.390

试试[colorzilla](http://www.colorzilla.com/gradient-editor/)它会自动为你做 css 渐变编码。

多浏览器渐变的示例格式

`background: #1e5799; /* Old browsers */ background: -moz-linear-gradient(top, #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */ background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */ background: -webkit-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */ background: -o-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */ background: -ms-linear-gradient(top, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */ background: linear-gradient(to bottom, #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* W3C */ filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:38:53.293

问题是您的百分比不是按递增顺序排列的。请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient)：

> 必须按顺序指定色标。

# c# - 从 xml 中获取值（4 个级别）

> ID：13911516
> 
> 赞同：3
> 
> 时间：2012-12-17T09:34:36.440
> 
> 标签：c#, xml, windows-phone-7, xml-serialization

帮助在不同级别的 xml 中的值。

这是xml：

```
<widgets>
    <id>95</id>

    <widget type="1" name="accventas" caption="Ofertas ventas" flags="4">
        <service name="pm_venofer_total00001" caption="Pendientes de aceptar" desc="" type="3" detail="1">
            <xvalue>20</xvalue>
            <xcolor>1</xcolor>
        </service>
    </widget>

    <widget type="3" name="today_state" caption="Estado de ventas" flags="4">
        <service name="pd_today_orders00001" caption="Pedidos" desc="Nº pedidos del día" type="3" detail="1">
            <xvalue>0</xvalue>
            <xcolor>2</xcolor>
            <xalert>No se está vendiendo nada</xalert>
        </service>

        <service name="pd_today_sales00001" caption="Importe" desc="Importe ventas del día" type="3" detail="1">
            <xvalue>0,00</xvalue>
            <xcolor>2</xcolor>
            <xalert>No estamos recaudando nada</xalert>
        </service>
    </widget>
</widgets> 
```

加载了 xml 并准备好试用，但我无法获得您需要的所有字段

我需要：

*   ID，
*   小部件的标题属性，
*   每个小部件的服务，
*   服务的标题属性，
*   x值，
*   xcolor 和 xalert，
*   每项服务

我得到所有的小部件，像这样：（我认为有两种：`Employees`和`Employee`）

```
[XmlRoot("widgets")]
public class Employees
{
    [XmlElement("widget")]
    public ObservableCollection <Employee> Coleccion { get; set; }
}

 public class Employee
 {
    [XmlAttribute("caption")]
    public string nombreWidget { get; set; }
 } 
```

但不像进入每个小部件各自的服务（服务属性），以及在这些 xValue、xcolor 和 xalert

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:21:14.267

你应该使用 XPATH

```
using System.Xml.XPath; 
```

然后做这样的事情：

```
XPathNavigator nav;
XPathDocument docNav;
XPathNodeIterator NodeIter;
String strExpression;

// Open the XML.
docNav = new XPathDocument(@"c:\books.xml");

// Create a navigator to query with XPath.
nav = docNav.CreateNavigator();

// Find the average cost of a book.
// This expression uses standard XPath syntax.
strExpression = "sum(/bookstore/book/price) div count(/bookstore/book/price)"; 
```

有关使用 XPATH 可以实现的所有内容的更多信息，请考虑： [https ://developer.mozilla.org/en/docs/XPath](https://developer.mozilla.org/en/docs/XPath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:10:20.103

**LinqToXml 解决方案：**

```
var xml = XDocument.Parse(Resource1.XMLFile1).Root;
var parsed = new {
                     Id = xml.Element("id").Value,
                     Widgets = xml.Elements("widget")
                                  .Select(w => new
                                  {
                                      Caption = w.Attribute("caption").Value,
                                      Services = w.Elements("service").Select(s => new
                                      {
                                          Caption = s.Attribute("caption").Value,
                                          XColor = s.Element("xcolor").Value,
                                          XValue = s.Element("xvalue").Value,
                                          XAlert = s.Element("xalert") != null ? s.Element("xalert").Value : null
                                      }).ToList()
                                  }).ToList()
                 }; 
```

它将创建代表您的输入 XML 的匿名对象。您可以轻松地将我的代码中的匿名对象替换为您的真实域对象（`Employees`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-06T15:52:45.467

95

```
<widget type="1" name="accventas" caption="Ofertas ventas" flags="4">
    <service name="pm_venofer_total00001" caption="Pendientes de aceptar" desc="" type="3" detail="1">
        <xvalue>20</xvalue>
        <xcolor>1</xcolor>
    </service>
</widget>

<widget type="3" name="today_state" caption="Estado de ventas" flags="4">
    <service name="pd_today_orders00001" caption="Pedidos" desc="Nº pedidos del día" type="3" detail="1">
        <xvalue>0</xvalue>
        <xcolor>2</xcolor>
        <xalert>No se está vendiendo nada</xalert>
    </service>

    <service name="pd_today_sales00001" caption="Importe" desc="Importe ventas del día" type="3" detail="1">
        <xvalue>0,00</xvalue>
        <xcolor>2</xcolor>
        <xalert>No estamos recaudando nada</xalert>
    </service>
</widget> 
```

# c++ - SFML 主循环以获得最佳 fps

> ID：13911520
> 
> 赞同：0
> 
> 时间：2012-12-17T09:34:58.960
> 
> 标签：c++, sfml, frame-rate

我需要在短时间内用 sfml 和 c+ 为大学项目创建一个游戏。我的问题是 sfml2.0 有多快？

我的意思是，如果我在主循环的每个步骤中重新创建所有背景、精灵，会导致低帧率吗？那么，我可以只制作一个包含所有元素的位图并绘制它吗？

或者我必须只重绘更改，逐个像素然后刷新屏幕。

我问的原因，因为在过去，当我用 sdl 选择第一个版本（真实地逐像素重绘所有内容）时，它非常慢，而上面描述的第二个选项似乎需要更多的工作，而我只有像 3 天来做。

我希望你理解让我困惑的话题，你可以给我一个很好的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:14:56.447

在每一帧中，您必须：

1）清屏

2）画你的精灵

3) 显示画面

显然，您不必在每一步都重新创建所有精灵。

# c++ - 为什么这个函数中没有指定返回类型明确返回？

> ID：13911526
> 
> 赞同：6
> 
> 时间：2012-12-17T09:35:13.617
> 
> 标签：c++

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

我在一段示例代码中看到了这一点：

```
operator Vector2<float>() const    {       
  return Vector2<float>(x, y);    } 
```

我对此有两个问题：

1) 函数明确返回，但没有指定返回类型？

2）目前尚不清楚这里究竟是什么重载，哪个运算符。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T09:36:27.337

它是一个转换运算符，返回类型是`Vector2<float>`.

# css - CSS3 歪斜变换

> ID：13911528
> 
> 赞同：0
> 
> 时间：2012-12-17T09:35:18.873
> 
> 标签：css, transform, css-transitions

### 问题 #1

在[这首小提琴](http://jsfiddle.net/_Sud/YMw3v/1/)中，旗帜在杆子上方升起

**当前过渡**

![在此处输入图像描述](../Images/648f5c31d9c057dc57f57e7ba163d47a.png)

**预期过渡**

![在此处输入图像描述](../Images/84520376df76b965c3fa600b89dfd7dd.png)

并在过渡完成后恢复到预期位置，但我正在寻找一个平稳的过渡，因为旗帜是如何自然升起的，请问有什么建议吗？我错过了什么吗？

### 问题2：

为什么下面的代码不起作用

```
#flag:hover{
    top:50px;
    left:100px;
    -webkit-transform:rotate(0deg);
}​ 
```

虽然以下代码有效

```
#container:hover #flag{
    top:50px;
    left:100px;
    -webkit-transform:rotate(0deg);
}​ 
```

我不应该将鼠标悬停在`<image>`标签上吗？CSS不支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:45:08.733

看看[`-webkit-transform-origin`](http://css-infos.net/property/-webkit-transform-origin)。

我稍微更改了您的 CSS 以说明更改：

```
#flag{
    position:relative;
    top: 43px;
    left: 120px;

    -webkit-transform-origin: -10px 0px;
    -webkit-transform:rotate(90deg);
    -webkit-transition-duration:0.5s;
    -webkit-transition-timing:ease-in;

}
#post{
    position:absolute;
    top:50px;
    left:50px;

}
#container:hover #flag{
    top: 54px;
    left: 104px;
    -webkit-transform:rotate(0deg);
}​ 
```

**演示：http: [//jsfiddle.net/YMw3v/6/](http://jsfiddle.net/YMw3v/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:47:03.673

回答问题 #2

您的悬停不起作用的原因是该标志位于民意调查的后面，因此它忽略了光标。

将以下内容添加到#post

```
pointer-events: none; 
```

[http://jsfiddle.net/YMw3v/7/](http://jsfiddle.net/YMw3v/7/)

# android - Titan ios 和 Android 中的自动完成文本字段

> ID：13911536
> 
> 赞同：3
> 
> 时间：2012-12-17T09:35:50.867
> 
> 标签：android, ios, titanium, appcelerator-mobile, autocompletebox

我想要自动完成文本框，比如如果我按 a 它应该显示相关的词，如苹果、飞机等，我想做类似的谷歌搜索。在钛上的 ios 和 android 中是否有类似此操作的控件。帮助示例代码或它的钛不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-06T14:37:43.893

很酷，我可以用 android 自动地址建议栏为你举一些例子

```
var search = Titanium.UI.createTextField({
 height : '40sp',
        hintText : 'Search',
        top : '3sp',
        right : '0%',
        width : '73%',
        textAlign : 'left',
        font : {

            fontFamily : 'Verdana',
            fontSize : '13sp',

        },
    }); 
```

您的结果显示为表格行

```
var resulttable = Ti.UI.createTableView({
        top : '0%',
        left : '0%',
        width : '100%',
        height : '100%',
        separatorColor : '#000000',

    }); 
```

并添加事件监听器作为更改和任何更改调用函数与您的值，如果值为空，则从您的视图中删除表

```
search.addEventListener("change", function(event, type) {
        Titanium.API.info("in change event listener");
        if ('' != search.value) {
            tabgroupContentView.add(resulttable);
            if (resulttable.data.length > 0) {
                for (var i = resulttable.data[0].rows.length - 1; i >= 0; i--) {
                    resulttable.deleteRow(i);
                }
            }
            auto_complete(search.value);
        } else {
            tabgroupContentView.remove(resulttable);
        }
    }); 
```

调用以下函数自动完成

```
function auto_complete(search_term) {

        loader.open("GET", "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" + search_term + "&types=geocode&language=en&sensor=true&key=bar blar blar this is my key use ur one");

        loader.onload = function() {

            var histryresult = eval('(' + this.responseText + ')');
            jsonArry = histryresult.predictions;
            jsonArryterms = histryresult.terms;
            for (var i = 0; i < jsonArry.length; i++) {

                var service_row = Ti.UI.createTableViewRow({
                    height : '70sp',
                    width : '100%',
                    backgroundColor : '#ffffff',
                    backgroundFocusedColor : '#FF8F2F',
                    backgroundSelectedColor : '#FF8F2F',
                    hasChild : false
                });

                var lbl_oderid = Ti.UI.createLabel({
                    left : '3%',
                    top : '10%',
                    text : jsonArry[i].terms[1].value,
                    color : '#A70CAF',
                    font : {
                        fontSize : '17sp',
                        fontWeight : 'bold'
                    },
                    height : 'auto',
                    width : 'auto'
                });

                var descriptiontext;
                if (jsonArry[i].description == undefined) {
                    descriptiontext = 'Not Valable';
                } else {
                    descriptiontext = jsonArry[i].description;
                }

                var lbl_description = Ti.UI.createLabel({
                    left : '5%',
                    top : '50%',
                    text : descriptiontext,
                    color : '#000000',
                    font : {
                        fontSize : '12sp',

                    },
                    height : 'auto',
                    width : 'auto'
                });

                service_row.add(lbl_oderid);
                service_row.add(lbl_description);
                service_row.addEventListener('click', function(e) {

                    var locaName = jsonArry[e.index].description;

                    if (jsonArry[e.index].description == undefined) {

                    } else {
                        reversGeoloader.open("GET", "http://maps.googleapis.com/maps/api/geocode/json?address=" + locaName + "&sensor=false");

                        reversGeoloader.onload = function() {

                            var geoResult = eval('(' + this.responseText + ')');
                            jsonArry = geoResult.results;

                            var newlat = jsonArry[0].geometry.location.lat;
                            var newlng = jsonArry[0].geometry.location.lng;

                            curentlatitude = newlat;
                            curentlongitude = newlng;

                            getReversGeo(curentlatitude, curentlongitude, 'str');
                            usercurentlocation.setText('Set by serch');
                            tabTestWindow.close();

                        };
                        reversGeoloader.send();
                    }

                });

                resulttable.appendRow(service_row);

            }

        };
        loader.send();

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:07:59.630

以下代码将为您工作。尝试并根据您的需要进行修改。在这里，我使用数组（searchArray）作为数据存储（您可以根据需要将其替换为数据库字段或源）。

```
//Table view showing your autocomplete values
var tblvAutoComplete = Ti.UI.createTableView({
    width           : '100%',
    backgroundColor : '#EFEFEF',
    height          : 0,
    maxRowHeight    : 35,
    minRowHeight    : 35,
    allowSelection  : true
});
//Starts auto complete
txtAutoComplete.addEventListener('change', function(e){ 
    var pattern = e.source.value;
    var tempArray = PatternMatch(searchArray, pattern);
    CreateAutoCompleteList(tempArray);
});
//You got the required value and you clicks the word
tblvAutoComplete.addEventListener('click', function(e){
    txtAutoComplete.value = e.rowData.result; 
});

//Returns the array which contains a match with the pattern
function PatternMatch(arrayToSearch, pattern){
    var searchLen = pattern.length;
    arrayToSearch.sort();
    var tempArray = [];
    for(var index = 0, len = arrayToSearch.length; index< len; index++){
        if(arrayToSearch[index].substring(0,searchLen).toUpperCase() === pattern.toUpperCase()){
            tempArray.push(arrayToSearch[index]);
        }
    }
    return tempArray;
}
//setting the tableview values
function CreateAutoCompleteList(searchResults){
    var tableData = [];
    for(var index=0, len = searchResults.length; index < len; index++){

            var lblSearchResult = Ti.UI.createLabel({
                top            : 2,
                width          : '40%',
                height         : 34,
                left           : '5%',
                font           : { fontSize : 14 },
                color          : '#000000',
                text           : searchResults[index]
            });

            //Creating the table view row
            var row = Ti.UI.createTableViewRow({
               backgroundColor : 'transparent',
               focusable       : true,
               height          : 50,
               result          : searchResults[index]
            });

            row.add(lblSearchResult);
            tableData.push(row);
    }
    tblvAutoComplete.setData(tableData);
    tblvAutoComplete.height = tableData.length * 35;
} 
```

这段代码在 ios 和 android 中都适用于我。希望你的问题得到解决:D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T10:00:24.717

```
textField.addEventListener('change', function(e) {
    // you can fill a tableView in this event with the suggested data
}); 
```

或者这个教程链接可能会解决你的问题 [AutoCompleteTextField](http://www.redsunsoft.com/2011/02/remote-table-search-with-titanium-appcelerator/)

# excel - VBA 检查返回的数组是二维还是一维？

> ID：13911538
> 
> 赞同：0
> 
> 时间：2012-12-17T09:36:00.167
> 
> 标签：excel, vba

> **可能重复：**
> [如何返回在 VBA 中传递给它的（变体）变量的维数](https://stackoverflow.com/questions/6901991/how-to-return-the-number-of-dimensions-of-a-variant-variable-passed-to-it-in-v)

有什么方法可以检查 VBA 数组是 2D 还是 1D？我不能使用`isnumeric`on`lbound(x,2)`因为我得到一个下标超出范围的异常。

编辑我也不能使用`iserror(lbound(x,2))`

# .net - 在 OpenCart 1.5.3.1 中自动删除选项值

> ID：13911540
> 
> 赞同：0
> 
> 时间：2012-12-17T09:36:15.137
> 
> 标签：.net, mysql, c#-4.0, opencart

我创建了一个用于网站解析的爬虫。它从网站获取信息并将其存储在 OpenCart 数据库中。发生的情况是我无法在 opencart 的产品描述页面中查看某些选项。但是在管理面板中，当我编辑并保存这些选项而不更改任何内容时。然后我可以在产品描述页面中查看这些选项。

还有另一个问题。在我执行上述步骤后，一些选项值会随机从数据库中删除，并且无法在与选项关联的产品描述页面中查看选项值。

我正在使用 OpenCart 版本 1.5.3.1。
我在 C#.NET 4.0 中创建了这个解析器，后端数据库是 MYSQL。

这是一个错误吗？

我在这里张贴了一张图片。

[http://s11.postimage.org/lab58b4ip/Option_Value_Bug.jpg](http://s11.postimage.org/lab58b4ip/Option_Value_Bug.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:06:53.983

如果您没有任何商品可供选择，则选项可能看起来不存在。我相信这是有意隐藏不可用的选项。检查您是否已在产品编辑器的“选项”选项卡中为每个选项设置库存值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:51:53.707

这将起作用。它是由 OC 人修复的.. :)

[https://github.com/opencart/opencart/commit/7ba1837c93645994063a6df67638924d86b0c672](https://github.com/opencart/opencart/commit/7ba1837c93645994063a6df67638924d86b0c672)

或者您也可以编辑：“upload/admin/model/catalog/product.php”

```
 @@ -38,10 +38,12 @@ public function addProduct($data) {
38   38 

39   39 
           $product_option_id = $this->db->getLastId();
40   40 

41      
-          if (isset($product_option['product_option_value'])) {
     41 
+          if (isset($product_option['product_option_value']) && count($product_option['product_option_value']) > 0 ) {
42   42 
             foreach ($product_option['product_option_value'] as $product_option_value) {
43   43 
               $this->db->query("INSERT INTO " . DB_PREFIX . "product_option_value SET product_option_id = '" . (int)$product_option_id . "', product_id = '" . (int)$product_id . "', option_id = '" . (int)$product_option['option_id'] . "', option_value_id = '" . (int)$product_option_value['option_value_id'] . "', quantity = '" . (int)$product_option_value['quantity'] . "', subtract = '" . (int)$product_option_value['subtract'] . "', price = '" . (float)$product_option_value['price'] . "', price_prefix = '" . $this->db->escape($product_option_value['price_prefix']) . "', points = '" . (int)$product_option_value['points'] . "', points_prefix = '" . $this->db->escape($product_option_value['points_prefix']) . "', weight = '" . (float)$product_option_value['weight'] . "', weight_prefix = '" . $this->db->escape($product_option_value['weight_prefix']) . "'");
44   44 
             } 
     45 
+          }else{
     46 
+            $this->db->query("DELETE FROM " . DB_PREFIX . "product_option WHERE product_option_id = '".$product_option_id."'");
45   47 
           }
46   48 
         } else { 
47   49 
           $this->db->query("INSERT INTO " . DB_PREFIX . "product_option SET product_id = '" . (int)$product_id . "', option_id = '" . (int)$product_option['option_id'] . "', option_value = '" . $this->db->escape($product_option['option_value']) . "', required = '" . (int)$product_option['required'] . "'");
...  ...    
@@ -160,10 +162,12 @@ public function editProduct($product_id, $data) {
160  162    

161  163    
           $product_option_id = $this->db->getLastId();
162  164    

163     
-          if (isset($product_option['product_option_value'])) {
     165    
+          if (isset($product_option['product_option_value'])  && count($product_option['product_option_value']) > 0 ) {
164  166    
             foreach ($product_option['product_option_value'] as $product_option_value) {
165  167    
               $this->db->query("INSERT INTO " . DB_PREFIX . "product_option_value SET product_option_value_id = '" . (int)$product_option_value['product_option_value_id'] . "', product_option_id = '" . (int)$product_option_id . "', product_id = '" . (int)$product_id . "', option_id = '" . (int)$product_option['option_id'] . "', option_value_id = '" . (int)$product_option_value['option_value_id'] . "', quantity = '" . (int)$product_option_value['quantity'] . "', subtract = '" . (int)$product_option_value['subtract'] . "', price = '" . (float)$product_option_value['price'] . "', price_prefix = '" . $this->db->escape($product_option_value['price_prefix']) . "', points = '" . (int)$product_option_value['points'] . "', points_prefix = '" . $this->db->escape($product_option_value['points_prefix']) . "', weight = '" . (float)$product_option_value['weight'] . "', weight_prefix = '" . $this->db->escape($product_option_value['weight_prefix']) . "'");
166  168    
             }
     169    
+          }else{
     170    
+            $this->db->query("DELETE FROM " . DB_PREFIX . "product_option WHERE product_option_id = '".$product_option_id."'");
167  171    
           }
168  172    
         } else { 
169  173    
           $this->db->query("INSERT INTO " . DB_PREFIX . "product_option SET product_option_id = '" . (int)$product_option['product_option_id'] . "', product_id = '" . (int)$product_id . "', option_id = '" . (int)$product_option['option_id'] . "', option_value = '" . $this->db->escape($product_option['option_value']) . "', required = '" . (int)$product_option['required'] . "'"); 
```

# jfreechart - 带有截断数据点的 JFreeChart

> ID：13911545
> 
> 赞同：0
> 
> 时间：2012-12-17T09:36:38.913
> 
> 标签：jfreechart

我用下面的代码创建了一个 JFreeChart，但是 Y 轴标记被截断。即使数据点在 Y 轴上重叠，我应该如何显示图表？基本上，我希望从我的文件中生成 Y 轴点，填充适当的范围并显示在图表中。

```
private static JFreeChart buildChart(TimeSeriesCollection dataset,
    String title, boolean endPoints) throws IOException {

// Create the chart

    JFreeChart chart0 = ChartFactory.createTimeSeriesChart(
        title, "Hour", "Count", dataset, true, true, false);

// Setup the appearance of the chart
    chart0.setBackgroundPaint(Color.white);
    XYPlot plot = (XYPlot) chart0.getXYPlot();
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.setAxisOffset(new RectangleInsets(10.0, 10.0, 10.0, 10.0));
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);

// Display data points or just the lines?

    if (endPoints) {
        XYItemRenderer renderer = plot.getRenderer();
        if (renderer instanceof StandardXYItemRenderer) {
            StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;

            rr.setBaseShapesVisible(true);
            rr.setBaseShapesFilled(true);
            rr.setDrawSeriesLineAsPath(true);
            rr.setSeriesPaint(0, Color.blue.brighter());
            rr.setSeriesVisible(0, true); // default
            rr.setSeriesVisibleInLegend(0, true);  // default

            NumberAxis domainAxis = new NumberAxis();
            domainAxis.setUpperMargin(0.15);
            domainAxis.setStandardTickUnits(NumberAxis.createIntegerTickUnits());
            domainAxis = (NumberAxis) plot.getDomainAxis();
            domainAxis = (NumberAxis) plot.getRangeAxis();
            domainAxis.setAutoRangeIncludesZero(false);
        }
    }

 // Tell the chart how we would like dates to read
    DateAxis axis = (DateAxis) plot.getDomainAxis();
    axis.setAutoRange(true);

 //axis.getDefaultAutoRange();
    axis.setDateFormatOverride(new SimpleDateFormat("HH:mm"));

    try {

        ChartUtilities.saveChartAsJPEG(new File("suc.jpg"), 1.0f, chart0, 990, 700);
    } catch (IOException e) {
        e.printStackTrace();
    }

    return chart0;
} 
```

下面是创建的图像，您可以清楚地看到 Y 轴有重叠显示。

![在此处输入图像描述](../Images/fb9ddafd2f661fc54c4c749f8beb42fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:26:41.523

> 我设法通过读取数据点，找到最大数量，然后在 xyplot setRange() 方法下插入最大值来解决这个问题。

你不应该这样做。在下面的摘录中，为什么要获取域轴，参考范围轴替换它，然后更改范围轴？你的意思是改变域轴吗？请参阅此相关[示例](https://stackoverflow.com/a/12481509/230513)。

```
domainAxis = (NumberAxis) plot.getDomainAxis();
domainAxis = (NumberAxis) plot.getRangeAxis();
domainAxis.setAutoRangeIncludesZero(false); 
```

附录：显示随机数据自动范围的最小[sscce 。](http://sscce.org/)

![图片](../Images/a062b970dbe047cd19c6fddba77cbee0.png)

```
import java.awt.EventQueue;
import java.util.Random;
import javax.swing.JFrame;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.time.Day;
import org.jfree.data.time.Hour;
import org.jfree.data.time.TimeSeries;
import org.jfree.data.time.TimeSeriesCollection;

/** @see https://stackoverflow.com/a/14198851/230513 */
public class Test {

    private static final int N = 10;
    private static final Random random = new Random();

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().display();
            }
        });
    }

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new ChartPanel(buildChart(createDataset(), "Title")));
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static TimeSeriesCollection createDataset() {

        final TimeSeries series = new TimeSeries("Data");
        Hour current = new Hour(0, new Day());
        for (int i = 0; i < N; i++) {
            series.add(current, random.nextGaussian());
            current = (Hour) current.next();
        }
        return new TimeSeriesCollection(series);
    }

    private static JFreeChart buildChart(
        TimeSeriesCollection dataset, String title) {
        JFreeChart chart = ChartFactory.createTimeSeriesChart(
            title, "Hour", "Count", dataset, true, true, false);
        XYPlot plot = chart.getXYPlot();
        plot.setDomainCrosshairVisible(true);
        plot.setRangeCrosshairVisible(true);
        return chart;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:11:11.700

这是我目前在图表上如何呈现数据的方法......

```
private static JFreeChart buildChart(TimeSeriesCollection dataset,
    String title, boolean endPoints) throws IOException {
// Create the chart
    JFreeChart chart0 = ChartFactory.createTimeSeriesChart(
        title,
        "Hour", "Count",
        dataset,
        true,
        true,
        false);

// Setup the appearance of the chart

    chart0.setBackgroundPaint(Color.white);
    XYPlot plot = (XYPlot) chart0.getXYPlot();
    plot.getDomainAxis().setAutoRange(true);
    plot.getRangeAxis().setRange(1.0, SucMaxi);
    plot.setBackgroundPaint(Color.lightGray);
    plot.setDomainGridlinePaint(Color.white);
    plot.setRangeGridlinePaint(Color.white);
    plot.getAxisOffset();
    plot.setAxisOffset(new RectangleInsets(10.0, 10.0, 10.0, 10.0));
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);

// Display data points or just the lines?

    if (endPoints) {
        XYItemRenderer renderer = plot.getRenderer();
        if (renderer instanceof StandardXYItemRenderer) {
            StandardXYItemRenderer rr = (StandardXYItemRenderer) renderer;
            rr.setBaseShapesVisible(true);
            rr.setBaseShapesFilled(true);
            rr.setDrawSeriesLineAsPath(true);
            rr.setSeriesPaint(0, Color.blue.brighter());
            rr.setSeriesVisible(0, true); // default
            rr.setSeriesVisibleInLegend(0, true);  // default      
        }
    }

// Tell the chart how we would like dates to read

    DateAxis axis = (DateAxis) plot.getDomainAxis();

// Tick the X Axis by unit tick 1 hour
    axis.setTickUnit(new DateTickUnit(DateTickUnitType.HOUR, 1));
    axis.setDateFormatOverride(new SimpleDateFormat("HH:mm"));

    try {
        ChartUtilities.saveChartAsJPEG(
            new File("suc.jpg"), 1.0f, chart0, 1000, 700);
    } catch (IOException e) {
        e.printStackTrace();
    }

    return chart0;
} 
```

![在此处输入图像描述](../Images/d36a2d77be0b35f005c09197350b327c.png)

# c# - 另一个进程使用的空文件内容

> ID：13911550
> 
> 赞同：0
> 
> 时间：2012-12-17T09:36:52.440
> 
> 标签：c#, file-io, streamwriter

我有我的应用程序的日志文件，我通过侧面应用程序对日志文件进行了一些操作。在操作结束时，我想删除文件——这是不可能的，因为使用了文件，所以我只想清空它——删除内容。

我试过了：

```
 using (FileStream stream = File.Open(query.FileName, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
        {
            using (StreamWriter writer = new StreamWriter(stream, true))
            {
                writer.Write("");
                reader.Close();
            }
        } 
```

和：

```
using (FileStream stream = File.Open(query.FileName, FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite))
    {
        stream.SetLength(0);
        stream.Close();
    } 
```

和：

```
System.IO.File.WriteAllText(@"path", string.Empty); 
```

Notihg 工作。

如何覆盖文件内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:51:17.313

> 一点也不。它会崩溃，因为文件正在被另一个进程使用

好吧，它可能不是另一个过程，它可能是你的。您必须在关闭日志文件后执行此操作。但是有一个更通用的解决方法。返回到创建日志文件的代码并添加 FileShare.Delete 选项。

此选项允许删除正在使用的文件。您现在可以在代码中简单地使用 File.Delete()，即使日志文件仍处于打开状态。这将使文件处于“删除挂起”状态，任何试图打开它的人都将被拒绝访问错误。当文件的最后一个句柄关闭时，磁盘上的文件将自动消失。

另一个有用的选项是 FileOptions.DeleteOnClose。现在它是完全自动的，文件会自动删除，您无需做任何事情。我不知道哪一个最适合您的情况，您可能希望在程序崩溃时避免删除日志文件，因此 FileShare.Delete 是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:09:12.737

您也可以使用以下代码

```
System.IO.File.WriteAllText(@"Path of your file",string.Empty); 
```

# kendo-ui - Kendo UI TreeView 中的问题 expand icon

> ID：13911551
> 
> 赞同：0
> 
> 时间：2012-12-17T09:36:55.203
> 
> 标签：kendo-ui, kendo-treeview

我正在使用 Kendo UI 树视图来动态显示某些数据。我对加载的数据没有任何问题。但发现一种情况如下

当我单击节点左侧的展开图标（有一个子节点）时，展开图标和折叠图标与节点的重叠。当焦点移出具有树视图数据的标签条时，展开/折叠图标不会重叠，它位于节点的左侧。当我将鼠标悬停在包含数据的选项卡条上时，两个图标都与节点的图标重叠。

以下是窗格和选项卡条声明

```
<div id="inner-1"   class="configuration k-widget k-header" style="height: 100%; border: 0;background-   color:#E1E5E7;"></div>

var leftTabStip=null;
leftTabStip = $("#inner-1").kendoTabStrip().data("kendoTabStrip");
leftTabStip.append({
            animation:  {
                open: {
                    effects: "fadeIn"
                }
            },
            text: "Sample",
            content: '<div id="treeSample" style="overflow:auto;position:relative;border:1px solid #B0B0B0;">  </div><ul class="options"> ',
            encoded: false
 }); 
```

finalPath 是包含树层次结构数据的数组，我正在使用这 3 个属性 id、text 和 encoded..

```
var localDataSource = new kendo.data.HierarchicalDataSource({
    data:finalPath
});

var groupTree1 = $("#treeSample").kendoTreeView({
    dataSource: localDataSource
}).data("kendoTreeView"); 
```

有什么方法可以确保图标和节点不重叠，即使我将鼠标悬停/移出标签条或单击图标，数据也应该正确显示，就像展开/折叠图标应该在左侧节点而不重叠。请指导我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:48:45.360

在兼容性视图设置中运行 IE 8（即 IE 7 文档模式）时，我遇到了同样的问题

发现[这个链接](http://www.kendoui.com/forums/ui/treeview/treeview-display-issues-in-ie7.aspx) 非常有用：

...问题可能与 IE 7 中的 hasLayout 相关，因此我建议您尝试使用 zoom:1 样式触发特定元素的布局是否可以解决问题...

我应用于树视图的这个 css，在我的情况下解决了同样的问题：

```
 li
    {
       zoom: 1;
    } 
```

# c# - 在 .NET C# 中获取 DSLR 的驱动器信息

> ID：13911552
> 
> 赞同：3
> 
> 时间：2012-12-17T09:36:55.753
> 
> 标签：c#, .net

我正在尝试获取我连接的 DSLR 的驱动器信息，以便我可以访问 SD 卡内的照片。由于项目要求，我无法直接从 SD 卡中读取数据。

我尝试使用 .NET `DriveInfo`，但它无法注册我连接的 DSLR。我做错什么了吗？

代码：

```
DriveInfo[] drives = DriveInfo.GetDrives();
foreach(DriveInfo d in drives)
{
   if(d.Name == "D5100")
      Console.WriteLine("Camera found");
} 
```

编辑：以下代码的结果是仅找到“C://”。未检测到其他驱动器。

Edit2：连接的 DSLR 似乎不在任何驱动器下。 ![DSLR 驱动器信息](../Images/5c0c5e7854ca8d70ac8497c089585bff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:56:34.707

[`DriveInfo.GetDrives()`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)方法仅获取计算机上的逻辑驱动器。

> 检索计算机上所有逻辑驱动器的驱动器名称。

在我的电脑中，它只返回`C:/`,`D:/`和`E:/`. 正因为如此，才`d.Name`给出这些类型的信息，而不是像`D5100`. 有一个名为 Wia (Windows Image Acquisition) 的平台可以访问相机、网络摄像头等中的图像。Loot at [`this link`](http://itsmikebender.com/2009/08/using-c-sharp-and-wia-2-0-to-connect-to-an-imaging-device/).

# html - 位置：可以重叠继承吗？

> ID：13911554
> 
> 赞同：0
> 
> 时间：2012-12-17T09:37:01.377
> 
> 标签：html, css

我试图让两个正方形在父 div 中相互重叠。方块使用位置：继承。请注意，正方形的数量是动态的。另请注意，父 div 正在使用 margin-left: 30%。这可能吗？

```
<div style="border: 1px solid Black; width: 300px; height:300px; margin-left:30%;">
    <div style="height:40px; width:40px; border: 1px solid Black; position:inherit; left:0px; top: 0px;"></div>
    <div style="height:40px; width:40px; border: 1px solid Black; position:inherit; left:0px; top: 0px;"></div>
</div>​ 
```

[http://jsfiddle.net/AzYUn/1/](http://jsfiddle.net/AzYUn/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:40:17.237

摆脱`position: inherit;`并使用`position: relative;`.

使用`top`、和属性`right`，您可以移动元素并使其重叠。`bottom``left`

**CSS**

```
div.parent {
    border: 1px solid black;
    margin-left: 30%;
    height: 300px;
    width: 300px;
}

div.parent > div.box {
    height:40px;
    width:40px;
    border: 1px solid black;
}

div.parent > div.box.overlap {
    position: relative;
    top: -40px;
} 
```

**HTML**

```
<div class="parent">
    <div class="box"></div>
    <div class="box overlap"></div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:41:38.427

我能想到的唯一方法是使用其他位置值 - 相对甚至绝对来达到该目标。

# windows-8 - 尝试获取 Windows 8 开发人员许可证，但出现错误 0x80004005

> ID：13911571
> 
> 赞同：6
> 
> 时间：2012-12-17T09:37:50.107
> 
> 标签：windows-8, microsoft-metro

我成功地在我的笔记本电脑上检索了 Windows 8 开发人员许可证。但是当我试图从位于 VirtualBox 的另一个窗口中检索另一个窗口时，我收到一条错误消息说

[内容] 错误 0x80004005：未指定的错误

此 Windows 8 虚拟机的一些不同之处：

1.  它作为虚拟机运行。

2.  它通过我的主机（Windows 7）上的 CNTLM 与互联网通信。但我已经设置了 IE 代理、devenv.exe.config 代理以及 PowerShell 代理。

3.  当我的笔记本电脑作为我的 Windows 帐户登录时，我使用本地帐户登录了这个 Windows 8。

谁能给我一些建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T18:27:28.617

在代理下工作我偶然发现了同样的错误。我通过执行以下操作成功激活了 VS 开发人员许可证：

1 - 在 Windows 8 上开始搜索服务（在设置下）

2 - 之后停止网络位置感知

3 - 再次尝试激活，系统将提示您进行实时 ID 请求。

我从以下网址获得了解决方案：[http ://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/112c6b04-9eda-49f2-95d8-62e0a169f99e/](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/112c6b04-9eda-49f2-95d8-62e0a169f99e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T20:32:09.933

当我在不在代理后面的网络上时，我通常会更改网络并且代理的自动检测选项不起作用。当我手动关闭代理设置时，我可以获得实时登录的提示。

# ios - 使用 SQLite 保存地图数据

> ID：13911576
> 
> 赞同：2
> 
> 时间：2012-12-17T09:38:20.667
> 
> 标签：ios, objective-c, sqlite

我的应用程序跟踪用户的移动。现在想把它保存到 sqlite 等以后我可以追踪从源到目的地的道路

有谁知道如何使用 Xcode 将地图数据保存到 sqlite？我的地图跟踪用户从源到目的地的移动，现在在这里将其保存到数据库。因此用户可以保存方向以备将来使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:55:44.053

使用`CLLocationManager`可以得到起点和终点坐标，同时也可以得到中间点，所以你可以尝试保存这些坐标并再次使用它们来绘制相同的路线。

# c# - 无法保存word文件

> ID：13911577
> 
> 赞同：0
> 
> 时间：2012-12-17T09:38:30.430
> 
> 标签：c#, ms-word

我有一个应用程序，它从具有合并字段的数据集中构建一个 word 文档文件。

一切正常，但程序无法在我们的终端服务器上运行。但是，它在我的本地机器上运行良好。

我`"Command failed"`在终端服务器上收到错误。我的代码运行，但我无法保存文档后记。

```
word.AddTemplate(strFQDN, ref objDoc, ref objWord);
word.ParagraphsInList(ref objDoc, ref objWord, ref parags);
word.PrintParagraphsPerRecord(ref objWord, ref objDoc, ref parags, ds, PKref);
word.WordInvullen(ref objDoc, ref objWord, PKref, ds); 
```

以上所有与子代码一起工作。当我来到保存部分时，我得到命令失败。

```
//objWord.Documents.Save(ref missing, ref missing);
//objWord.Documents.Save(false, true);
//objDoc.Save();
objDoc.SaveAs2("c:\\Template\\offerte 1001", WdSaveFormat.wdFormatDocument, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

有谁知道为什么保存的部分`word.interop`不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:52:55.837

显然这是问题所在：

![在此处输入图像描述](../Images/abb6a97b03c832d64c8523ad2f193f31.png)

在文件块设置中禁用了保存。

# excel - 如何使用 Excel VBA 确定文件编码类型

> ID：13911580
> 
> 赞同：3
> 
> 时间：2012-12-17T09:38:33.057
> 
> 标签：excel, vba

我已经构建了一个 Excel/VBA 工具来验证 csv 文件，以确保它们包含的数据是有效的。它们的 csv 可以来自任何地方（来自完整的 unix 系统或从 Excel 中保存数据的桌面用户）。Excel 工具被发送给企业，因此他们可以在自己的环境中验证他们的 csv 文件，而无需冒数据离开系统的风险。因此，解决方案需要在本机 VBA 中，而不是链接到外部库。

因此，使用 VBA，我需要能够自动检测 UTF-8（带或不带 BOM）或 ANSI 文件编码，并在这些不是用于 csv 的文件编码时警告用户。

我认为这可能涉及从文件开头读取几个字节并根据字节顺序标记的存在确定编码。

你能帮我让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:49:14.863

假设您可以自由要求用户选择正确的文件类型，让他们对他们选择的文件负责；）

这意味着，您可以创建一个表单，用户可以在其中选择文件名和编码类型，就像我们在`file open`向导中所做的那样。

别的，

我建议你使用`FileSystemObject`. 它返回一个`TextStream`可用于确定编码的值。我怀疑 VBA 是否支持其他类型的编码，如果支持，请纠正我 :) 并很高兴听到。:)

*   [如何检测编码类型](http://www.vbaexpress.com/forum/showthread.php?t=25095)
*   [msdn 对象库模型](http://msdn.microsoft.com/en-us/library/314cz14s%28v=VS.85%29.aspx)

这是进一步考虑的链接：-

*   [更改编码类型](http://www.tek-tips.com/viewthread.cfm?qid=1392917)

# android - 提高 Canvas.drawBitmap() 在 android 上的性能

> ID：13911587
> 
> 赞同：3
> 
> 时间：2012-12-17T09:39:06.527
> 
> 标签：android, algorithm, optimization, canvas, bitmap

随着时间的推移，我尝试在基于图块的游戏中实现视图寻呼机 - 并且刷卡很笨拙。我按照@romangui 的建议执行了必要的性能测量，发现重绘我的 gaem 字段大约需要 48 毫秒（太长了）——而且我已经扁平化了布局，消除了过度绘制以及我的自定义布局管理器等。

我发现在 GN 上绘制一个图块大约需要 0.600 毫秒 - 对于所有 81 个图块来说太长了。时间其实是花在`Canvas.drawBitmap(...)`

任何想法如何提高性能？我只有 6 个不同的位图，它们被加载一次并重复使用。ARGB_8888。当然，它们不一定与实际显示的尺寸相匹配。

如果在测量布局后将它们预渲染为实际显示尺寸，我会获得更好的性能吗？

还是我应该硬着头皮用我的游戏状态预渲染一个大位图，只是为了滚动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:59:02.660

您应该确保不要让 Android 在绘图时使用图像缩放。

尝试使用以前缩放的图像，如在[画布上绘制缩放位图？](https://stackoverflow.com/questions/10407089/draw-a-scaled-bitmap-to-the-canvas)

# c# - SelectedItem 仅更新 WPF 中数据库中的第一行

> ID：13911590
> 
> 赞同：3
> 
> 时间：2012-12-17T09:39:10.330
> 
> 标签：c#, wpf, entity-framework, data-binding

我正在开发一个应用程序，允许用户将他们公司的员工详细信息输入数据库。到目前为止，我正在尝试使用 WPF 并尝试在使用实体框架的同时在我的应用程序中实现 MVVM。

我正在创建一个 Master-Detail 应用程序，并且一直在研究如何使用 MVVM 来实现这一点，因为我对这一切都很陌生。

我尝试过的一种方法是在我的`View-Model`被调用中创建一个属性`SelectedEmployee`，然后将其绑定到`List View`我的 xaml 中的 a ，就像这样；

```
public Employee _SelectedEmployee;
public Employee SelectedEmployee
{
    get
    {
        return _SelectedEmployee;
    }
    set
    {
        if (_SelectedEmployee == value)
            return;

        _SelectedEmployee = value;
        OnPropertyChanged("SelectedEmployee");
    }
} 
```

```
<ListView HorizontalAlignment="Left" Name="listview" VerticalAlignment="Bottom" ScrollViewer.HorizontalScrollBarVisibility="Visible"
IsSynchronizedWithCurrentItem="True"
ItemsSource="{Binding LoadEmployee}" SelectionMode="Single" SelectedItem="{Binding SelectedEmployee, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  Height="150" Grid.Row="1"> 
```

然后我有一个方法允许用户`SelectedItem`在`List View`. 但这就是问题发生的地方。当我从 中选择一个项目时`List View`，它只更新数据库中的第一行，而不是我想要选择的行。

这是方法；

```
 public void UpdateEmployee(Employee emp)
    {
        using (DBEntities context = new DBEntities())
        {
                emp = context.Employees.Where(e => e.EmployeeID == SelectedEmployee.EmployeeID).FirstOrDefault();

                emp.Title = Title;
                emp.FirstName = FirstName;
                emp.Surname = Surname;
                emp.Position = Position;
                emp.DateOfBirth = DateOfBirth;
                emp.Address = Address;
                emp.Country = Country;
                emp.Postcode = Postcode;
                emp.PhoneNumber = PhoneNumber;
                emp.MobileNumber = MobileNumber;
                emp.FaxNumber = FaxNumber;
                emp.Email = Email;
                emp.NINumber = NINumber;
                emp.ChargableResource = ChargableResource;
                emp.ChargeOutRate = ChargeOutRate;
                emp.TimeSheetRequired = TimeSheetRequired;
                emp.WorkShift = WorkShift;
                emp.BenefitsProvided = BenefitsProvided;

                context.Employees.ApplyCurrentValues(emp);
                context.SaveChanges();
        }
    } 
```

我已将我的属性绑定`view model`到`text-boxes`我的 xaml 中，然后实现`OnPropertyChanged`. 我还使用命令来限制数量，`code-behind`因为它对可测试性和可维护性很重要。

这是更新的命令方法；

```
 private ICommand showUpdateCommand;
    public ICommand ShowUpdateCommand
    {
        get
        {
            if (showUpdateCommand == null)
            {
                showUpdateCommand = new RelayCommand(this.UpdateFormExecute, this.UpdateFormCanExecute);
            }
            return showUpdateCommand;
        }
    }

    private bool UpdateFormCanExecute()
    {
        return !string.IsNullOrEmpty(FirstName) ...
     }

    private void UpdateFormExecute()
    {
        UpdateOrganisationTypeDetail();
    } 
```

因为我是 MVVM 的新手，所以我不太确定我做错了什么，所以请提供一些输入：)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:37:14.527

那么问题可能出在您的更新上。我真的不明白你想用listview做什么，但由于它不能在简单的数据网格中工作，这可能会有所帮助。这与其说是一个答案，不如说是我写的东西来发现你的错误恰好不包含你的错误。如果有任何问题，请发表评论。

```
public partial class MainWindow : Window
{
    private static MainViewModel _mainViewModel = new MainViewModel();
    public static ObservableCollection<Employee> staff = new ObservableCollection<Employee>();

    public MainWindow()
    {
        InitializeComponent();
        this.DataContext = _mainViewModel;
        dataGrid1.DataContext = staff;
        listview.DataContext = staff;

        Employee Employee1 = new Employee();
        Employee1.name = "Jeff";
        staff.Add(Employee1);
        Employee Employee2 = new Employee();
        Employee2.name = "Jefferson";
        staff.Add(Employee2);
        Employee2.name = "Tim";

    }
}

public class Employee
{
    public string name { get; set; }
}

public class MainViewModel : INotifyPropertyChanged
{
    private string _SelectedEmployee;
    public string SelectedEmployee
    {
        get { return _SelectedEmployee; }
        set
        {
            _SelectedEmployee = value;
            NotifyPropertyChanged("SelectedEmployee");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

# macos - NPAPI 插件可以在 mac10.8 上工作，但不能在 mac10.6 上工作

> ID：13911591
> 
> 赞同：0
> 
> 时间：2012-12-17T09:39:09.917
> 
> 标签：macos, npapi, browser-plugin

我在 mac10.8 上使用 xcode4.5 开发了一个 npapi 插件，Gecko SDK 是 Gecko 17.0(mac i386)。该插件可以在mac10.8上运行，但不能在mac10.6上运行，我不知道它有什么问题。有人可以告诉我我该怎么办以及如何解决问题。mac10.6上的插件只有safari才能找到MIME类型和其他浏览器找不到 MIME 类型，但插件无法在 safari 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:09:14.847

您的问题很可能是您使用 Mac OS 10.8 sdk 构建的；理想情况下，要以 10.6 为目标，您希望使用 10.6 SDK（您可能必须去寻找）构建它，但您可以尝试将部署目标设置为 10.6，它*可能会*起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:17:38.473

那是 64 位还是 32 位版本？在 Mac 10.6 中，一些浏览器正在寻找 64 位版本，而另一些浏览器则需要 32 位版本。如果您将这两个版本都包含在您的捆绑包中，这可能会有所帮助。

# python - 在 Django 中实现站点地图

> ID：13911594
> 
> 赞同：8
> 
> 时间：2012-12-17T09:39:15.683
> 
> 标签：python, django, sitemap

我在我的应用程序中实现站点地图时遇到问题。我正在使用 Virtualenv、django 1.4 和 Python 2.7。如果您能帮我解决这个问题，我将不胜感激。

这就是我所做的：

1.  在我的 urls.py

    ```
    from sitemap import JobPostSitemap
    sitemaps = { 
        'jobs': JobPostSitemap, 
    }
    ... # Removed other urls
    url(r'^sitemap\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}), 
    ```

2.  然后在我的 sitemap.py 文件中

    ```
    from django.contrib.sitemaps import Sitemap
    from jobs.models import JobPost

    class JobPostSitemap(Sitemap):
        changefreq = "never"
        priority = 0.5

        def items(self):
            return JobPost.objects.filter(approved=True)

        def lastmod(self, obj):
            return obj.pub_date 
    ```

3.  我的 settings.py 文件如下：

    ```
    TEMPLATE_LOADERS = (
        'django.template.loaders.filesystem.Loader',
        'django.template.loaders.app_directories.Loader',
    )
    ...
    INSTALLED_APPS = ( 
        'django.contrib.auth', 
        'django.contrib.contenttypes', 
        'django.contrib.sessions', 
        'django.contrib.sites', 
        'django.contrib.messages', 
        'django.contrib.staticfiles', 
        'django.contrib.sitemaps', 
        'jobs', 
    )
    ... 
    ```

现在，当我打开浏览器并导航到 时`http://localhost:8000/sitemap.xml`，出现以下错误：

```
ImportError at /sitemap.xml

No module named django.contrib.sitemaps
Request Method: GET
Request URL:    http://localhost:8000/sitemap.xml
Django Version: 1.4.2
Exception Type: ImportError
Exception Value:    
No module named django.contrib.sitemaps
Exception Location: /home/frank/Projects/python/django/techjobsea.com/baseline27/local/lib/python2.7/site-packages/Django-1.4.2-py2.7.egg/django/utils/importlib.py in import_module, line 35
Python Executable:  /home/frank/Projects/python/django/techjobsea.com/baseline27/bin/python
Python Version: 2.7.3 
```

我无法弄清楚我错过了什么或做错了什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-24T07:35:03.057

我有类似的错误。我像这样更改了 urls.py 定义：

```
from sitemap import JobPostSitemap
from django.contrib.sitemaps.views import sitemap
sitemaps = { 
    'jobs': JobPostSitemap, 
}
... # Removed other urls
url(r'^sitemap\.xml$', sitemap, {'sitemaps': sitemaps}), 
```

它对我有用。我不知道为什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:23:23.283

这可能是个`PYTHONPATH`问题。运行`python manage.py shell`并尝试`import django.contrib.sitemaps`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:28:41.233

问题可能在于您尚未完全提交的 url.py 配置。在我的情况下，我无意中留下了表单的前缀：`urlpatterns = patterns('...')`这阻止了 Django 找到正确的路径。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-17T10:14:29.270

要在您的 Django 站点上激活站点地图生成，请将此行添加到您的 URLconf：

```
(r'^sitemap\.xml$', 'django.contrib.sitemaps.views.sitemap', {'sitemaps': sitemaps}) 
```

这告诉 Django 在客户端访问 /sitemap.xml 时构建站点地图。

# objective-c - 如果我使用“registerDefaults”注册默认值，我无法删除我注册的默认值

> ID：13911595
> 
> 赞同：2
> 
> 时间：2012-12-17T09:39:20.170
> 
> 标签：objective-c, nsuserdefaults

```
NSDictionary *dictionnary = [[NSDictionary alloc] initWithObjectsAndKeys:@"content", @"myKey", nil];
[[NSUserDefaults standardUserDefaults] registerDefaults:dictionnary];
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"myKey"];
[[NSUserDefaults standardUserDefaults] synchronize];
NSLog(@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"myKey"]); 
```

日志 ：

```
2012-12-17 17:09:05.062 browserHD[4075:c07] content 
```

为什么结果值“内容”？我想要结果值“nil”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:04:10.817

是的，你是对的...

这可能不是完美的解决方案。但稍作调整即可解决问题。

如果您使用这种方式，它会起作用！

```
- (IBAction)set:(id)sender {
    NSMutableDictionary *aDict=[NSMutableDictionary new];
    [aDict setObject:_myText.stringValue forKey:@"key"];

    [[NSUserDefaults standardUserDefaults] registerDefaults:aDict];
}

- (IBAction)remove:(id)sender {
    NSMutableDictionary *aDict=[NSMutableDictionary new];
    [aDict setObject:@"null" forKey:@"key"];
    [[NSUserDefaults standardUserDefaults] registerDefaults:aDict];
}

- (IBAction)get:(id)sender {
    NSLog(@"-> %@",[[NSUserDefaults standardUserDefaults]objectForKey:@"key"]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:51:36.900

registerDefaults 影响用户默认值的不同“级别”，而不是 setObject:forKey: 或 removeObjectForKey。它进入高于标准用户默认值的级别的全局用户默认值。“全球”是一个用词不当，因为它仍然是您的应用程序的本地。

您无法使用此方法从全局用户默认值中删除值。

`Global Defaults (NSGlobalDomain) -> User Defaults (NSRegistrationDomain)`

如果一个值在用户值中，那么它会覆盖全局值。如果不是，则采用 Global Defaults 中的值。添加和删​​除值仅影响用户默认值级别。

显然，您无法摆脱全局默认值，因为如果您删除用户默认值，全局默认值将始终“闪耀”。但是您可以将要“替换为 nil”的对象值设置为`[NSNull null]`. 然后在您的代码中检查这种情况：默认值为 nil 或者它`[NSNull null]`会告诉您该值未设置。

# wordpress - 如果直接访问，Wordpress网站显示文件夹+图像的404页面？

> ID：13911602
> 
> 赞同：1
> 
> 时间：2012-12-17T09:39:54.700
> 
> 标签：wordpress, .htaccess

大家好，请问这是什么原因：

我在同一个虚拟主机和里面的图像中有一个与我的网站（Wordpress）无关的文件夹“壁纸”。如果我想访问它们，我会去 website.com/wallpapers/myimage.jpg 并且它有效！

但我注意到它不再起作用了，现在我在网站内看到我的 wordpress 网站 + 错误 404。

我试图修复这个禁用的几个插件等......但是我应该去哪里看？可能是什么原因？也许是htaccess？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:05:56.450

是的，我认为您对 .htaccess 的猜测是完全正确的。如果您在 Wordpress 中启用永久链接，它会自动创建或尝试创建（取决于权限）以下 .htaccess 文件；

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

与您相关的两行是；

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

他们所做的基本上是确保每个 url 请求都通过根目录中的 index.php 运行，*除了*任何文件或目录实际上作为单独的文件和目录存在于 Wordpress 安装之外（即你的壁纸目录）。所以首先我会确保你的 .htaccess 看起来像这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T12:10:13.673

过去我需要做同样的事情，这让我发疯了，所以如果这可以帮助这就是我所做的。激活永久链接选项时，我在我的 wordpress 文件夹中创建了默认的 .htaccess wordpress，如下：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

由于某些原因...

我可以很好地访问[http://example.com/phpinfo.php ，但是](http://example.com/phpinfo.php)[http://example.com/myfolder](http://example.com/myfolder)返回了 404，尽管（如果我是正确的）这行 RewriteCond %{REQUEST_FILENAME} !-d 应该允许我显示该文件夹中的内容，因为它存在并且具有正确的权限（用户：用户 chmoded 755）

在尝试了有关该主题的所有内容之后，我最终在我的文件夹“ **/myfolder** ”中创建了一个**.htaccess**

 **其中包含独特的以下行：

```
Options +Indexes 
```

我终于得到了[http://example.com/myfolder](http://example.com/myfolder)来回答响应 200 OK

I suppose this is not the best ever solution but it's the only one that worked for me and as I just need this to work for one or two folders, it did not need to be more adaptive / flexible**

# x11 - 在 Ubuntu 12.04.1 LTS 上启动 Pentaho Kettle spoon 的问题

> ID：13911603
> 
> 赞同：0
> 
> 时间：2012-12-17T09:39:59.613
> 
> 标签：x11, ubuntu-12.04, kettle

我已经解压了最新的kettle 稳定版本pdi-ce-4.3.0-stable.tar.gz，然后尝试通过在命令提示符下键入spoon.sh 来启动spoon。但它失败了，但有以下例外

```
**org.eclipse.swt.SWTError: No more handles [gtk_init_check() failed]**
    **at org.eclipse.swt.SWT.error(Unknown Source)** 
```

到目前为止，我花了很多时间寻找解决方案和所有这些指针都徒劳无功。

我根据几个论坛上的说明安装了以下内容：

*   Xorg，X11
*   gtk
*   辛尼特
*   Xulrunner
*   火狐
*   侏儒
*   ubuntu-桌面

但这些都没有帮助。考虑到spoon 可能依赖于X-Windows 服务器，我尝试检查它是否正在运行并使用Xinit 上的命令startx 来启动X 服务器。但不幸的是，它失败了，错误如下

```
Fatal server error:
no screens found

xinit: giving up
xinit: unable to connect to X server: No such file or directory
xinit: server error 
```

我现在一无所知。你能指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:19:43.057

似乎您正试图从真正的控制台启动水壶勺。这是行不通的。你需要一个真正的 X 会话。**Spoon 是一个 GUI**，所以在你的 X 环境（通常是 GDM）下登录。

```
sudo apt-get install gdm 
```

之后，打开一个 gnome 控制台并执行 ./spoon.sh 。也许您正在尝试执行 pan.sh 或 kitchen.sh？这些将在没有图形环境的控制台下正常运行。

# axapta - 在 AX 2012 向导控件中初始化值....

> ID：13911609
> 
> 赞同：1
> 
> 时间：2012-12-17T09:40:24.320
> 
> 标签：axapta, dynamics-ax-2012, ax

我已经使用wizard>wizard在Ax 2012中创建了一个向导，我从Custtablelistpage表单中调用了这个向导......现在，我已经在这个向导中放置了一些控件，比如CustAccount，我需要在这个控件中从选定的记录中初始化值Custtablelistpage 表单..我正在尝试使用 Args 类执行此操作，但它不起作用，请提出一些解决方案..

请使用工具>向导>向导在 AX 2012 中创建一个向导，然后，请将此向导的菜单项放在 custtablelistpage 的某个位置。之后，请在向导的欢迎选项卡上放置一个名为客户帐户的字段。现在，如果您有任何以 custtablelistpage 形式显示的记录，请选择它。我的任务是当我单击放在 custtablelistpage 上的菜单项按钮时，向我的向导显示所选记录的帐户编号。

实际上，我已经编写了一些代码，这对于正常形式来说工作得非常好。但它不适用于向导，我没有在我的向导控件中获得初始化的价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T14:01:25.750

好的，我花了一些时间来尝试这个，我有两个可能的解决方案给你。

*   您可以通过使用未绑定的控件并传入选定的记录来完成
*   或者您可以在向导表单上使用数据源并过滤所选值

首先让我们尝试使用一个简单的未绑定控件来完成它。首先将 CustTable 成员变量和参数方法添加到您的向导类。

```
public class MyTestWizardWizard extends SysWizard
{
    CustTable   mySelectedCustomer;
}

public CustTable parmMySelectedCustomer(CustTable _mySelectedCustomer = mySelectedCustomer)
{
    ;
    mySelectedCustomer = _mySelectedCustomer;
    return mySelectedCustomer;
} 
```

然后在您的表单中，您可以覆盖 init 方法并执行以下操作：

```
void init()
{
    int                 controlid;
    FormStringControl   fsControl;
    ;

    super();

    if (element.Args().caller())
    {
        sysWizard = element.Args().caller();

        // Get the control id of the CustomerId control 
        controlid = element.controlId(formControlStr(MyTestWizardWizard, CustomerId));  

        // Check if we actually have a form string control
        if(element.control(controlid) is FormStringControl)
        {
            // Cast to the FormStringControl type
            fsControl = element.control(controlid) as FormStringControl;

            // Now fill in the field value
            fsControl.text(sysWizard.parmMySelectedCustomer().AccountNum);
        }
    }
    else
    {
        MyTestWizardWizard::main(new args());
        element.closeCancel();
    }
} 
```

因此，您实际上在这里所做的只是获取存储在您的向导类中的选定记录。然后我们检查我们要为其赋值的控件是否真的是正确的控件来放置值。

虽然这是可行的，但我更喜欢第二种方法。那将是在表单上使用数据源并像这样在所选记录上放置一个范围。只需将 CustTable 作为数据源放在表单上，​​然后像往常一样放置控件即可。

然后，确保 init 方法在底部执行 super() 调用，以确保在调用数据源方法之前完成初始化：

```
void init()
{
    ;

    // make sure the sysWizard is already initialized before the super to make sure the init on the datasource has an instance of sysWizard
    if (element.Args().caller())
    {
        sysWizard = element.Args().caller();
    }
    else
    {
        MyTestWizardWizard::main(new args());
        element.closeCancel();
    }

    super();
} 
```

然后覆盖数据源上的 init 方法，在 custTable 的 recId 字段上放置一个范围。请注意，您可以在 ExecuteQuery 方法中分配范围的值，但对于这种情况，我只是在这里执行。

```
public void init()
{
    ;
    super();

    SysQuery::findOrCreateRange(this.query().dataSourceTable(tableNum(CustTable)), fieldNum(CustTable, RecId)).value(queryValue(SysWizard.parmMySelectedCustomer().RecId));
} 
```

现在，当您的向导运行时，args 将记录传递给您的向导类，表单在数据源的 init 中获取它，并在您选择的记录上放置一个范围。所有其余的魔法都是具有绑定数据控件的正常 Ax 行为。

所以我希望这是你需要的。如果您还有其他问题，请告诉我。

# sql - 我正在尝试将两张表（主表和子表）合并为一张。我只需要存储过程中的一条子表记录

> ID：13911610
> 
> 赞同：1
> 
> 时间：2012-12-17T09:40:25.430
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我正在尝试为主表中的子表的一条记录编写存储过程

我有两张桌子。

*   大师“财产”
*   孩子“PropertyImage”

`Property`我只需要一张图片的所有细节。

在子表中，一个属性可能有许多图像。

```
Property (propertyId, title)

propertyImage (imageId, FK_propertyId, imageFile) 
```

例如

```
property (1, smallbuilding)
property (2, largebuilding)

propertyImage(1, 1, 1.jpg)
propertyImage(2, 1, 2.jpg)
propertyImage(3, 1, 3.jpg)
propertyImage(4, 1, 4.jpg)
propertyImage(5, 2, 7.jpg)
propertyImage(6, 2, 8.jpg) 
```

我的要求是：

```
MyProperty(propertyId, title, imageFile)
Myproperty(1, smallbuilding, 1.jpg)
Myproperty(2, bigbuilding, 2.jpg) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:05:32.067

你的问题不是很清楚。我认为你需要的是`Merge two tables(propery,propertyImage) into a single table (myProperty)`. 这听起来像是一次性工作，那么为什么需要存储过程呢？以下查询可以完成这项工作。如果需要，请[查看此 MSDN 链接](http://msdn.microsoft.com/en-us/library/ms187926.aspx)以获取存储过程语法。另请注意，您的新 MyProperty 表应该有一个主键列。

```
INSERT INTO MyProperty (propertyId,title,imageFile)
SELECT propertyId, title, imageFile FROM (
    SELECT p.propertyId,p.title,i.imageFile, 
           RANK() OVER (ORDER BY i.FK_propertyId, i.ImageId) RN
    FROM Property p JOIN propertyImage i 
     ON p.propertyId = i.FK_propertyId
) A
WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:48:32.417

听起来你需要这个

```
;WITH cte AS
 (
  SELECT ROW_NUMBER() OVER (PARTITION BY propertyId ORDER BY imageId) AS rn,
         propertyId, title, imageFile
  FROM Property p JOIN propertyImage pr ON p.propertyId = pr.FK_propertyId
  )
  SELECT propertyId, title, imageFile
  FROM cte
  WHERE rn = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:17:07.120

根据您选择的方式`propertyImage`，您可以为 CTE 中的每个属性选择一个并加入：

```
WITH FirstImagePerProperty
AS
(
    SELECT FK_propertyId,
           MIN(imageId) As FirstImageId
    FROM PropertyImage
    GROUP BY FK_propertyId
)
SELECT
   p.propertyId,
   p.title,
   i.imageId, 
   i.imageFile
FROM Property p
INNER JOIN FirstImagePerProperty fipp ON p.propertyId=fipp.FK_propertyId
INNER JOIN PropertyImage i ON fipp.FK_propertyId=i.FK_propertyId 
```

# c# - 以最低的开销使用 SOAP Web 服务

> ID：13911611
> 
> 赞同：0
> 
> 时间：2012-12-17T09:40:29.513
> 
> 标签：c#, .net, web-services, soap, dataset

我正在实现一个 SOAP Web 服务，用于发送数千封电子邮件并将数千个 XML 响应记录存储在本地数据库中。（c#.net，视觉工作室 2012）

我想让我的服务消费者尽可能快速和轻量级。我需要知道一些注意事项。我总有一种感觉，我的代码应该运行得比现在快。

例如

1.  我读过使用数据集会增加开销。那么我应该改用对象列表吗？
2.  使用 ORM 是否会在我的代码中引入缓慢？
3.  控制台应用程序是否比 Winform 更快？因为用户不需要GUI来处理。只是向应用程序发送了一些参数来调用一些方法。

处理 SOAP Web 服务最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:01:03.707

让它工作，然后担心让它变快。如果你试图猜测瓶颈在哪里，你可能会猜错。优化某些东西的最好方法是测量前后的真实代码。

数据集和 ORM 和 win 表单应用程序以及控制台应用程序都可以运行得非常快。使用适合您的技术，然后在您确实需要时调整速度。

最后，如果您确实遇到性能问题，那么更改您对算法的选择以更好地适应您的问题可能会比更改您提到的任何技术产生更大的性能影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:12:58.790

考虑到我个人使用肥皂的经验，在这种情况下，我想说您主要关心的是如何从数据库中检索这些信息（过程、视图、触发器、索引等）。

控制台、winform 和 webapp 之间的区别并不重要。

应用程序完成后，您应该对其进行巨大的压力测试，以便能够查看性能问题所在的位置（如果存在）。

# javascript - 不能让第二个 javascript 函数工作？

> ID：13911612
> 
> 赞同：1
> 
> 时间：2012-12-17T09:40:39.567
> 
> 标签：javascript, jquery, html, function, url

我无法让第二个 javascript 函数工作。当我单击“发送邮件”按钮时，它应该调用第二个函数并将这两个值传递给它。href 行（第一个函数中的倒数第二行）未正确呈现。

```
<script>
function getvals(first,second) {
    alert(''+first+'');
    alert(''+second+'');
    mywindow=window.open('','Send Mail','height=200,width=400');
    mywindow.document.write("<FORM NAME='test'>");
    mywindow.document.write("<table align='center'><tr><td>User/Group: </td><td><input type='text' id='newfirst' name='iuser'></td></tr>");
    mywindow.document.test.iuser.value = ''+first+'';
    mywindow.document.write("<tr><td>Issue Key: </td><td><input type='text' id='newsecond' name='ikey'></td></tr>");
    mywindow.document.test.ikey.value = ''+second+'';
    mywindow.document.write("<tr><td><a href='javascript:popitup(document.getElementById('newuser').value,document.getElementById('newkey').value);'>Send Mail</a></td></tr></table>");
    mywindow.document.write("</FORM>");
}
function popitup(user,key) {
    alert(''+user+'');
    alert(''+key+'');
    var url = 'http:\/\/localhost:8080/plugins/servlet/mailservlet?receiver=' + user + '&issue=' + key;
    newwindow=window.open(url,'name','height=400,width=400');
    if (window.focus) {newwindow.focus()}
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:44:27.173

该函数`popitup`不会被调用，因为它是写在父窗口中的，而不是在打开的窗口中`window.open`。试试`window.opener`你的函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:44:37.533

嵌套引号问题，您应该正确地逃避它：

```
 mywindow.document.write("<tr><td><a href='javascript:popitup(document.getElementById(\"newuser\").value,document.getElementById(\"newkey\").value);'>Send Mail</a></td></tr></table>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:58:40.780

[看到它工作](http://jsbin.com/ufomox/2/watch)

```
 function getvals(first,second) {
      alert(''+first+'');
      alert(''+second+'');
      mywindow=window.open('','Send Mail','height=200,width=400');
      mywindow.document.write("<FORM NAME='test'>");
      mywindow.document.write("<table align='center'><tr><td>User/Group: </td><td><input type='text' id='newfirst' name='iuser'></td></tr>");
      mywindow.document.test.iuser.value = ''+first+'';
      mywindow.document.write("<tr><td>Issue Key: </td><td><input type='text' id='newsecond' name='ikey'></td></tr>");
      mywindow.document.test.ikey.value = ''+second+'';
      mywindow.document.write("<tr><td><a href=\"javascript:opener.popitup(document.getElementById('newfirst').value,document.getElementById('newsecond').value);\">Send Mail</a></td></tr></table>");
      mywindow.document.write("</FORM>");
  }

  function popitup(user,key) {
      alert(''+user+'');
      alert(''+key+'');
      var url = 'http:\/\/localhost:8080/plugins/servlet/mailservlet?receiver=' + user + '&issue=' + key;
      newwindow=window.open(url,'name','height=400,width=400');
      if (window.focus) {newwindow.focus()}
  } 
```

已修复的问题：
1) window.open 中的转义问题
2) 函数调用应该是 opener.popitup
3) 用户和密钥的 ID 名称不正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:59:44.303

请不要这样做（文件写）

使用 appendChild，并在此处附加 onclick-handler

# java - 显示次要矩阵 3 x 3

> ID：13911614
> 
> 赞同：0
> 
> 时间：2012-12-17T09:41:08.847
> 
> 标签：java, matrix

我想显示矩阵的次要。首先，我有一个 3 x 3 的矩阵。

> 1 2 3
> 
> 4 5 6
> 
> 7 8 9

我想显示 M11（删除第 1 行和第 1 列），就像

> 1 3
> 
> 7 9

但是通过我的程序，我得到了这样的东西

> 1 2
> 
> 4 0

这是我的代码：

```
 public static double [][] Minor (double [][] M, int bar, int kol, int maxidx){
        double [][] minor = new double [2][2];
        int mini=0, minj=0;
        for (int i=0; i<2;i++){
            for (int j=0;j<2;j++){
                if (i!=bar | j!=kol){
                    minor[mini][minj]=M[i][j];
                    minj++;
                    if (minj==(maxidx-1)){
                        mini++;
                        minj=0;
                    }
                }
            }
        }
        return minor;
    } 
```

为了显示未成年人，我使用了以下代码：

```
for (int i=0;i<2;i++){
    for (int j=0;j<2;j++){
        System.out.print(Minor(M,1,1,3)[i][j]+" ");
    }
        System.out.println();
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:09:57.190

正如评论中所说，循环遍历 3x3 矩阵只是为了将数字选择为 2x2 听起来有点过头了。

```
/** ?skip : which is the first row/column we should keep (0/1)
 ** ?last : shall we skip the last item of the row/column.
 **/

public static double [][] MyMinor (double [][] M, int vskip, int vlast, int hskip, int hlast){
    double [][] minor = new double [2][2];
    int mini=0, minj=0;
    minor[0][0]=M[vskip][hskip];
    minor[0][1]=M[vskip][2-hlast];
    minor[1][0]=M[2-vlast][hskip];
    minor[1][1]=M[2-vlast][2-hlast];

    return minor;
}

// to remove any bar/kol combo:
MyMinor(input,bar==0?1:0,bar==2?1:0,kol==0?1:0,kol==2?1:0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:01:32.083

您`OR`在应该使用逻辑的地方使用按位`AND`：

```
 if (i!=bar && j!=kol){
                       ^^ 
```

现在，您只跳过 和 的交点处的`bar`元素`kol`。相反，您希望跳过整`bar`行和整`kol`列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:44:09.750

我认为这`if (i!=bar | j!=kol){`是一个问题。你应该使用 || （逻辑或）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:46:27.850

```
 if (i!=bar | j!=kol) 
```

这个 | 是按位运算符而不是逻辑运算符，但是，您的整个逻辑是错误的

做这个

```
for (int i=0; i<=2;i++){
         if(i!=bar)
         {
            for (int j=0;j<=2;j++){
                if (j!=kol){
                    minor[mini][minj]=M[i][j];
                    minj++;
                    }
                }
            mini++;
         }
       }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:19:18.667

首先，如果我们试图删除中间行和列，我认为您的预期结果是：

1 3

7 9

那么我会说这是您正在寻找的代码：

```
public static double [][] Minor (double [][] M, int bar, int kol, int maxidx){
    double [][] minor = new double [2][2];
    int mini=0, minj=0;
    for (int i=0; i<3;i++){
        for (int j=0;j<3;j++){
            if (i!=bar && j!=kol){
                minor[mini][minj]=M[i][j];
                minj++;
                if (minj==(maxidx-1)){
                    mini++;
                    minj=0;
                }
            }
        }
    }
    return minor;
} 
```

问题在于 for 循环：for (int i=0; i<2;i++) 和 for (int j=0;j<2;j++)。如您所见，它永远不会到达 M 中的第 3 行和第 3 列，因此您将无法获得预期的结果。而且在你的代码中

如果 (i!=bar | j!=kol)

应该替换为

if (i!=bar && j!=kol) 因为您不需要“bar”行和“kol”列中的任何元素。

# mysql - Grails Projections 未返回所有属性且未分组

> ID：13911615
> 
> 赞同：3
> 
> 时间：2012-12-17T09:41:09.423
> 
> 标签：mysql, json, grails, grails-orm, createcriteria

如何得到它，所以我从下面返回所有的预测

```
def c = Company.createCriteria()
def a = c.list(params){
    projections{
        property 'id', property 'name'
    }
 }

 if(a.size() == 0)
     render "404"
 else {
     render (contentType: 'text/json'){
          totalCount = a.totalCount
          data = a
     }
  } 
```

结果是这样的：

{"totalCount":2,"data":["company1","company2"]}

我需要它在哪里：

{"totalCount":2,"data":[{"class":"org.example.Company","id":1,"name":"company1"},{"class":"org.example.公司","id":2,"name":"company2"}]}

在公司域中，我有很多关系（一对一、一对多等），我的域如下所示：

包 org.example

导入 java.sql.Timestamp

```
class Company {

String name
String abn
String cname
String email
String phone
String position
String address
String city
String postcode
int style
int openbookings;

Date date;

int tokenTotal = 0

int totaltokens
int totalboosts
int totalposts
Timestamp tokenstamp

static hasMany = [users: User, broadcast: Broadcast, bookings: Booking, locations: Location,vimsurvey:VimSurvey,rewards: Reward, tokens: CompanyToken]

static constraints = {
    abn nullable: true
    date nullable: true
    style nullable: true
}
} 
```

任何帮助都会很棒:) ????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:01:16.360

[http://grails.org/doc/1.1/ref/Domain%20Classes/createCriteria.html](http://grails.org/doc/1.1/ref/Domain%20Classes/createCriteria.html)

请参阅预测下的属性部分：“属性在返回的结果中返回给定的属性”。我真的不明白你对“所有预测”的要求。

您只是想为您的域查找所有内容吗？为什么要使用投影？

```
def a = c.list(params){
projections{
    property 'id', property 'name'
}
} 
```

应该

```
def a = c.list(params){
projections{
    property 'id'
    property 'name'
}
} 
```

事实上，当我尝试按照您的方式进行操作时，会出现编译错误。我仍然觉得简单地获取整个域本身更有意义，除非有非常具体的理由不这样做。

# ruby-on-rails - 如何在线程的rails中使用模型

> ID：13911618
> 
> 赞同：1
> 
> 时间：2012-12-17T09:41:18.563
> 
> 标签：ruby-on-rails, multithreading

```
class Auction::User < ActiveRecord::Base
  set_table_name "auction_users"
end

class Auction::Product < ActiveRecord::Base
  set_table_name "auction_products"

  def insert_data
      Thread.start{
        Auction::User.create(:product_id => self.id)
      }
  end
end 
```

像这样的东西。当我在模型中使用 Thread 并同时在 Thread 中使用另一个模型时，未初始化的常量 Auction::Product::Auction (NameError) 出现。为什么以及如何解决它？

完全毁了。帮助！！！

# c# - 如何在 MasterPage.Master 中声明函数而不是代码隐藏？

> ID：13911622
> 
> 赞同：0
> 
> 时间：2012-12-17T09:41:37.287
> 
> 标签：c#, asp.net

在我的 MasterPage.Master 我有这个代码：

```
<% if (Convert.ToBoolean(Session["FullVersion"])) { %>
    <asp:LinkButton ID="LinkButton1" Text="Gå til mobilversjon"     OnClick="GoToMobileVersion" runat="server" />
<% } %> 
```

而不是像这样在 MasterPage.master.cs 中声明这个函数：

```
protected void GoToMobileVersion(object sender, EventArgs e)
{
    PageBase page = (PageBase)Page;
    page.Session["FullVersion"] = false;
    Response.Redirect(Server.UrlPathEncode(page.CurrentPage.LinkURL));
} 
```

我想在 MasterPage.Master 中声明函数。我会使用什么语法来做到这一点？

这是我想做的事情：

```
 <% 
protected void GoToMobileVersion ()
{
Session["FullVersion"] = false;
Server.TransferRequest(Request.Url.AbsolutePath, false);
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:47:31.773

您可以使用 script runat="server" 块定义函数，

```
<script runat="server">
 protected void GoToMobileVersion ()
 {
  Session["FullVersion"] = false;
  Server.TransferRequest(Request.Url.AbsolutePath, false);
 }
</script> 
```

[http://msdn.microsoft.com/en-us/library/f0111sbh(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f0111sbh(v=vs.100).aspx)

# javascript - 实现搜索过滤器的逻辑 - IOS

> ID：13911623
> 
> 赞同：-1
> 
> 时间：2012-12-17T09:41:47.037
> 
> 标签：javascript, ios, cocoa-touch, logic

因此，我在视图中显示了一个数组中的书籍列表。我在视图顶部有 3 个过滤器，如下所示：

（全部 | 阅读 1 级 | 阅读 2 级 | 阅读 3 级）（全部 | 信息 | 文学）（全部 | 2000-2005 年出版 | 2005-2010 年出版）

如何使过滤器相互关联，以便如果用户选择了阅读级别 1 和信息性和 2000-2005，那么用户将只查看阅读级别 1 和信息性且在 2000-2005 年出版的书籍。

我在**iOS**中这样做是为了获取信息，我看不出能够想出一个干净的代码逻辑来组合这 3 个过滤器以获得结果数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:48:34.043

你必须使用[NSCompoundPredicate](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/Reference/Reference.html)

[你可以在这里](http://appworks.radeeccles.com/programming/convert-sql-nspredicate-core-data/)获得更多信息

# eclipse - Eclipse Tomcat 远程调试：来自 Eclipse 的源是否缓存在某处？

> ID：13911625
> 
> 赞同：0
> 
> 时间：2012-12-17T09:41:51.687
> 
> 标签：eclipse, tomcat, remote-debugging

在调试 tomcat 6 时，我们发现 Tomcat 和 Eclipse 中的部署有两个不同的类。Tomcat 中的部署会创建 NullPOinterException，而 Eclipse 源不会。问题是，如果我们用`startup.sh`它启动 Tomcat 会产生错误……每次！如果我们以 启动`catalina jpda start`，将 Eclipse 连接到它，它会产生错误，因为我们没有更改某个属性的值，这会导致此错误。更改此值后，即使我们删除部署文件夹和工作目录并在调试模式下重新启动，错误也消失了。没有例外。但是，如果我们再次重新启动，`startup.sh`错误又会出现。

所以，我的问题是，Tomcat 或 Eclipse 是否缓存/存储来自 Eclipse 的源代码以供远程调试器使用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:49:27.433

当您调试应用程序时，Eclipse（我相信像 IDEA 和 Netbeans 之类的其他工具）会在“保存”时替换服务器上正在运行的代码。这意味着当在 Eclipse 中改变一个类时，保存它，它会在服务器上改变它。也称为代码替换。我也相信 tomcat 会在 catalina.out 中记录更改
但是，当您重新启动服务器时，它会获取之前部署的类，因此您会在 Eclipse 中获取更改之前的类。

# javascript - 为什么我的 JS/JQuery 代码只能在 Web 浏览器的控制台中运行？

> ID：13911629
> 
> 赞同：0
> 
> 时间：2012-12-17T09:41:55.333
> 
> 标签：javascript, jquery, html, pagination, scroll

$(element).scroll(function(){}); 当我将它放入 js 文件时，该功能对我不起作用，但是当我将其输入控制台（只是滚动功能）时，它工作得很好。

我正在尝试进行滚动分页。

我查看了我的其他 js 文件，我认为唯一可能发生冲突的是另一个文件有 $(document).ready(function(){}) 但我很确定这不是问题. 我也在使用 Dropkick 来制作漂亮的下拉菜单，但我怀疑就是这样。

这是代码，几乎是逐字记录。在我弄清楚如何加载它之前，它是基本的。

```
$('#main').scroll(function(){
    if(($('#main').prop('scrollHeight'))==
        ($('#main').scrollTop()+$(document).height()-10)){
        //^there's a strange 10px empty space that needs to be accounted for
        $('#loading').show();
        $('#main').css('overflow','hidden');
        addMore();
    }
});
$(document).ready(function(){
    addMore();
});
addmore.counter=0;
function addMore(){
    $.ajax({
    async: 'true',
    url: 'http://mywebsite.com/bc/get',
    type: 'post',
    data: ({'offset':(addmore.counter)}),
    success: function(data) {
        $('#scrollingpagination').append(data);
        $('#loading').hide();
        $('#main').css('overflow','scroll');
        addmore.counter++;
    }
    });
} 
```

这是 HTML（不是逐字记录，而是相同的想法）

```
<!--I'm only including the "main" div that shows the content.-->
<div id='main'>
    <div id='scrollingpagination'></div>
    <div id='loading'></div>
</div> 
```

谢谢大家，我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:52:55.083

试着保持

```
$('#main').scroll(function(){
            ......
}) 
```

里面`document.ready`。我认为它是在 dom 准备好之前调用的

# php - date() 返回 0000-00-00

> ID：13911635
> 
> 赞同：-2
> 
> 时间：2012-12-17T09:42:10.470
> 
> 标签：php, mysql

我正在尝试编写一个代码，在 mysql 表中注册用户的访问数据。该代码在一周左右的时间内运行良好（打印 2012-07-12 即），但随后它开始在日期列中生成 0000-00-00。

```
$date_now = date("m.d.y"); // gets date

if (empty($username)) {} else (mysql_query ("INSERT INTO new_visit_data    (user_id, date, exercise, lesson, username ) VALUES ('$user_id','$date_now', '' , 'yes', '$username' ) ON DUPLICATE KEY UPDATE lesson='yes'; ")); 
```

我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T09:43:51.000

如果日期确实是“日期”类型的列，它应该是

```
$date_now = date("Y-m-d"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T09:46:51.410

如果列`exercise`具有数据类型`DATETIME`，则使用：

```
INSERT INTO new_visit_data    (user_id, date, exercise, lesson, username ) VALUES ('$user_id', NOW(), '' , 'yes', '$username' ) ON DUPLICATE KEY UPDATE lesson='yes'; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T09:56:12.863

这是日期格式

```
 $today = date("F j, Y, g:i a");                 // March 10, 2001, 5:16 pm
    $today = date("m.d.y");                         // 03.10.01
    $today = date("j, n, Y");                       // 10, 3, 2001
    $today = date("Ymd");                           // 20010310
    $today = date('h-i-s, j-m-y, it is w Day');     // 05-16-18, 10-03-01, 1631 1618 6Satpm01
    $today = date('\i\t \i\s \t\h\e jS \d\a\y.');   // it is the 10th day.
    $today = date("D M j G:i:s T Y");               // Sat Mar 10 17:16:18 MST 2001
    $today = date('H:m:s \m \i\s\ \m\o\n\t\h');     // 17:03:18 m is month
    $today = date("H:i:s");                         // 17:16:18
    $today = date("Y-m-d H:i:s");                   // 2001-03-10 17:16:18 (the MySQL DATETIME format) 
```

[日期手册](http://php.net/manual/en/function.date.php)

# sql - 如何在 SSIS 中同步两个表

> ID：13911637
> 
> 赞同：3
> 
> 时间：2012-12-17T09:42:14.570
> 
> 标签：sql, database, ssis

我有一个场景，我需要在 SSIS 中同步两个表

`Table A`位于 DATABASE A 和`TABLE B`DATABASE B 中。两个表具有相同的架构。我需要有一个 SSIS 包，它以这样的方式将表 A 与表 B 同步

`1\. It inserts all the records That Exist in Table A into Table B`

和

```
2\. Update TABLE B if Same "Key" exsit in Both but Updated records in Table A 
```

例如，表 A 和 B 都包含键 = 123，表 A 中的几列都已更新。

我正在考虑使用合并连接，但这仅有助于插入新记录。我如何设法实现 UPDATE 的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:56:11.557

```
1.It inserts all the records That Exist in Table A into Table B 
```

使用[查找转换](http://sqlblog.com/blogs/andy_leonard/archive/2010/02/09/ssis-snack-configuring-an-ssis-2005-lookup-transformation-for-a-left-outer-join.aspx)。源将是`Table A`，查找将是。映射`Table B`表中的公共列并选择您需要插入的那些列。查找使用`OLEDB destination`后映射来自查找的列并将其插入`Table B`

```
2.Update TABLE B if Same "Key" exsit in Both but Updated records in Table A 
```

与上面相同的逻辑。使用查找而不是`OLEDB Destination`使用`OLEDB Command`然后编写更新sql。

```
Update TableB
Set col1=?,col2=?.... 
```

在列映射图中，列来自`lookup`

查看这篇文章 [检查记录是否存在，如果存在则更新，否则插入](http://consultingblogs.emc.com/jamiethomson/archive/2006/09/12/SSIS_3A00_-Checking-if-a-row-exists-and-if-it-does_2C00_-has-it-changed.aspx)

使用合并：

```
MERGE TableB b
USING TableA a
ON b.Key = a.Key
WHEN MATCHED AND b.Col1<>a.Col1 THEN
UPDATE
SET b.Col1 =  a.Col1 
WHEN NOT MATCHED BY TARGET THEN
INSERT (Col1, Col2, col3)
VALUES (a.Col1, a.Col2,a.Col3); 
```

`Execute SQL Task`您可以在中执行 Merge SQL`Control Flow`

更新 ：`The Lookup transformation tries to perform an equi-join between values in the transformation input and values in the reference dataset.`

您可能只需要一个 Data Flow Task 。

图表

![在此处输入图像描述](../Images/79f44fcce38811a4d9e984b9d653ed0e.png)

当目标表数据在源表中没有匹配值时，查找会将目标行重定向到 oledb 目标，该目标将数据插入源表（`Lookup No Match Output`）

当目标表的行与源表的业务键匹配时，匹配的行将被发送到`Oledb Command`并使用更新 SQL，查找中的所有目标行将在源表中更新。

这只是一个概述。上述设计存在一个问题，因为当行匹配时，无论列中的任何更改如何，源表都会被更新。所以请参考上面的文章或尝试在 ssis 中搜索 SCD 组件

```
Update 2:

MERGE TableB b
USING TableA a
ON b.Key = a.Key
WHEN MATCHED  THEN
UPDATE
SET b.Col1 =  a.Col1 
WHEN NOT MATCHED BY TARGET AND a.IsReady=1 THEN  --isReady bit data type
INSERT (Col1, Col2, col3)
VALUES (a.Col1, a.Col2,a.Col3); 
```

# android - 难以理解回栈和任务

> ID：13911638
> 
> 赞同：0
> 
> 时间：2012-12-17T09:42:20.017
> 
> 标签：android, task, back-stack

我阅读了有关任务和回栈的信息（http://developer.android.com/guide/components/tasks-and-back-stack.html），但仍然有一些困惑。我只是在一个案例上尝试不同的东西和stcuk。举个例子：我们有两个应用程序 A1 和 A2。A1 有一个活动，比如 A1_first（也是主要活动），A2 有两个活动 A2_first（主要活动）和 A2_second。A2_second 是一个 singleTask 活动。A1_frist 在按钮按下时调用 A2_second，A2_first 也在按钮按下时调用 A2_second。

如果我启动 A2 我可以看到 A2_first 屏幕，按下按钮后我转到 A2_second（如预期的那样）但假设我首先启动 A1 并在按下按钮后 A2_second ，现在按下主页按钮并再次从启动器中的 A2 图标，我到达 A2_second 但是我希望达到 A2_first。

我不明白我错过了什么。有人可以解释按 A2 A1_first ----- > A2_second ----> home -----> A2_second （为什么不是 A2_first ?? A2_first 是 A2 的主要活动）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:53:22.493

如果您从主屏幕启动应用程序，它不一定会将您带到该应用程序的第一个活动。如果应用程序已经在运行，它只会将您返回到您在应用程序中中断的位置。这就是你所看到的。此外，您使用“singleTask”启动模式使事情变得更加复杂。一般来说，您不应该使用“singleTask”或“singleInstance”启动模式。这些是非常特殊的启动模式，主要用于创建主屏幕替换。在任何情况下，如果您需要使用其中一种特殊启动模式，您需要确保使用这些启动模式的活动具有不同的应用程序图标。如果 A2_first 和 A2_second 有不同的应用程序图标，那么发生的事情会更明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:54:22.057

如果您从活动 A 启动（成功）活动 B，然后按“返回”，您将返回活动 A。这些活动属于哪些应用程序。

抱歉，Android 中没有用于返回的标准“home”命令。例如，在我的手机上，“主页”将返回到开始屏幕，所有活动都置于后台。显然，你不是这个意思。

我这还不够，把代码放在这里，包含活动调用和返回处理。很难说一些不知道的事情，你的呼叫按钮和返回过程到底做了什么。

在了解任务和后台堆栈之前，我建议先了解活动开始/返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:01:53.683

当您按下主页按钮时，A2_second 就会进入后台。它没有结束（完成）。因此，当您单击 A2 图标时，系统将从 A2 中查找上次访问的活动（如果有）。由于 A2_second 可用并且处于后台状态 - 系统将简单地将其调用回前台。

这就是android建立多任务的方式。整个应用程序（所有活动）永远不会一次加载到内存中。相反，一个应用程序被分解成可以在需要时加载的功能块（活动）。因此，当您从另一个应用程序调用一个活动（从 A1_first 调用 A2_second），然后按主页时，此活动（A2_second）将进入后台。当您单击 A2 图标时，由于系统知道 A2_second 在后台，因此它被带到前台，因为用户最后访问了它，并且可能是他/她正在寻找的部分。

但是，如果您按“返回”，则 A2_second 将完成。在此之后，如果您单击 A2 图标，则会启动 A2_first。

这样，来自不同应用程序的不同部分（活动）可以在内存中共存，并为用户提供无缝体验，同时保持系统快速和快速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:51:57.413

如果我理解正确，您并没有退出应用程序，而只是按下主页按钮。如果应用程序状态未更改，它将从缓存中返回，并打开与您在按 home 之前离开它时相同的活动。

尝试[如何在按下 Home 按钮时完成（）一个 Activity，](https://stackoverflow.com/questions/6388351/how-to-finish-an-activity-when-home-button-pressed)以获取有关如何在按下 Home 按钮时完成应用程序的更多详细信息

# delphi - 如何以编程方式为驱动器启用系统还原监控？

> ID：13911643
> 
> 赞同：-1
> 
> 时间：2012-12-17T09:42:54.087
> 
> 标签：delphi, wmi, delphi-7

我找到了一个[启用系统还原监控的代码](https://stackoverflow.com/a/8101233/960757)，但它适用于 C#，我需要将其转换为 Delphi。这是代码：

```
ManagementScope scope = new ManagementScope("\\\\localhost\\root\\default");
ManagementPath path = new ManagementPath("SystemRestore");
ObjectGetOptions options = new ObjectGetOptions();
ManagementClass process = new ManagementClass(scope, path, options);
ManagementBaseObject inParams = process.GetMethodParameters("Enable");
inParams["WaitTillEnabled"] = true;
inParams["Drive"] = osDrive;
ManagementBaseObject outParams = process.InvokeMethod("Enable", inParams, null); 
```

谁能帮我将上面的代码转换为 Delphi ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:36:29.770

[`System Restore`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd408121%28v=vs.85%29.aspx)如果已启用对指定驱动器的监视，则以下函数返回 True ，否则返回 False。作为输入`ADrive`参数，指定要监控的完整驱动器路径。当此参数为系统驱动器或空字符串时，将监控所有驱动器。此函数在返回之前不会等待监控完全启用。相反，它会在启动系统还原服务和过滤器驱动程序后立即返回：

```
function EnableSystemRestore(const ADrive: string): Boolean;
var
  WbemObject: OleVariant;
  WbemService: OleVariant;
  WbemLocator: OleVariant;
begin;
  Result := False;
  try
    WbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
    WbemService := WbemLocator.ConnectServer('localhost', 'root\DEFAULT');
    WbemObject := WbemService.Get('SystemRestore');
    Result := WbemObject.Enable(ADrive) = S_OK;
  except
    on E: EOleException do
      ShowMessage(Format('EOleException %s %x', [E.Message, E.ErrorCode]));
    on E: Exception do
      ShowMessage(E.Classname + ':' + E.Message);
  end;
end; 
```

以及用法：

```
procedure TForm1.Button1Click(Sender: TObject);
begin;
  if not EnableSystemRestore('D:\') then
    ShowMessage('Failed!')
  else
    ShowMessage('Succeeded!');
end; 
```

# c# - 如何在c#中将文件保存在同一网络中的另一台机器中？

> ID：13911647
> 
> 赞同：3
> 
> 时间：2012-12-17T09:43:31.650
> 
> 标签：c#, .net, impersonation, remote-desktop

我必须将上传的文档保存到另一台本地机器中。但我不清楚如何在我的代码中使用模拟。

我使用了以下代码。

```
protected void btnSave_Click(object sender, EventArgs e)
{
        int result = 0,result1=0;
        string attachmentpath = "C:\\Documents and Settings\\pr84528\\My Documents\\PRABU\\Tech\\Dot Net\\DocumentManager\\Attachments\\";
....................................................................................
....................................................................................
if(fuDocument.HasFile)
    fuDocument.SaveAs(attachmentpath + fuDocument.FileName);
....................................................................................
....................................................................................
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:48:00.420

您可以使用 UNC 路径指向您具有写入权限的公共共享。

（例如 \\computerName\PublicShareFolder）

您可以通过 ACL 检查您是否具有权限（为该路径创建一个 DirectoryInfo 对象并为其获取 ACL 以检查您是否具有写入权限），然后您可以写入该路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:50:33.500

我认为这是您的解决方案。 [http://bytes.com/topic/net/answers/853352-create-text-file-network-path-using-c](http://bytes.com/topic/net/answers/853352-create-text-file-network-path-using-c)

# android - 重新打开活动时如何显示用户后台服务状态

> ID：13911649
> 
> 赞同：0
> 
> 时间：2012-12-17T09:43:36.740
> 
> 标签：android, android-service

我在点击方法的活动按钮中使用服务调用

单击开始按钮时，活动和服务正常运行，显示活动已启动的消息，现在用户可以切换到其他活动。

但是当用户再次打开相同的活动时，如何显示服务状态，即服务在后台正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:13:54.000

我认为更简单的方法是在您的服务中使用一个静态布尔变量来指示其当前状态。您可以在服务开始运行时将其设置为 true，在服务停止时将其设置为 false，然后从您的活动中检索它以向用户显示正确的消息。

但是，如果您不喜欢这种方法，您也可以告诉我们您是如何启动服务的，以及何时应该停止/启动它以查看其他解决方案。

# chocolatey - 更新 Chocolatey 时出现 RuntimeException

> ID：13911650
> 
> 赞同：2
> 
> 时间：2012-12-17T09:43:42.243
> 
> 标签：chocolatey

我一直有这个问题。我安装的版本是0.9.8.11。

```
PS C:\Chocolatey\lib> cver
The most recent version of chocolatey available from (https://go.microsoft.com/f
wlink/?LinkID=206669) is 0.9.8.20\. On your machine you have 0.9.8.11 installed.

Name                           Value
----                           -----
found                          0.9.8.11
foundCompare                   00000.00009.00008.00011
latest                         0.9.8.20
latestCompare                  00000.00009.00008.00020 
```

每次我运行命令`cup`或`cup all`时，我都会收到以下错误：

```
The expression after '&' in a pipeline element produced a object that was not valid. It     must result in a command name, script block or CommandInfo object. At     C:\Nuget\chocolateyInstall\helpers\chocolateyInstaller.psm1:446 char:4
+        & $oc @PSBoundParameters
+         
     + CategoryInfo           : InvalidOperation: (:) [], RuntimeException 
     + FullyQualifiedErrorId: BadExpression 
```

这是运行时的输出`cup`：

```
PS C:\Chocolatey\lib> cup
The most recent version of chocolatey available from (https://go.microsoft.com/f
wlink/?LinkID=206669) is 0.9.8.20\. On your machine you have 0.9.8.11 installed.
=====================================================
Chocolatey (0.9.8.11) is installing chocolatey (from https://go.microsoft.com/fw
link/?LinkID=206669) to "C:\NuGet\lib"
=====================================================
Package License Acceptance Terms
-------------------------
Please run chocolatey /? for full license acceptance verbage. By installing you
accept the license for the package you are installing...
-------------------------
-------------------------
NuGet
-------------------------
'chocolatey 0.9.8.20' already installed.

-------------------------
-------------------------
Chocolatey Runner (CHOCOLATEY)
-------------------------
-------------------------
Chocolatey Installation (chocolateyinstall.ps1)
-------------------------
Looking for chocolateyinstall.ps1 in folder C:\NuGet\lib\chocolatey.0.9.8.20
If chocolateyInstall.ps1 is found, it will be run.
-------------------------
Running powershell -NoProfile -ExecutionPolicy unrestricted -Command "& import-m
odule -name  'C:\NuGet\chocolateyInstall\helpers\chocolateyInstaller.psm1'; & 'C
:\NuGet\lib\chocolatey.0.9.8.20\tools\chocolateyInstall.ps1'". This may take awh
ile and permissions may need to be elevated, depending on the package.
-------------------------
Executable Batch Links
-------------------------
Looking for executables in folder: C:\NuGet\lib\chocolatey.0.9.8.20
Adding batch files for any executables found to a location on PATH. In other wor
ds the executable will be available from ANY command line/powershell prompt.
-------------------------
Adding C:\NuGet\bin\NuGet.bat and pointing to C:\NuGet\lib\chocolatey.0.9.8.20\t
ools\chocolateyInstall\NuGet.exe
-------------------------
=====================================================
Chocolatey has finished installing chocolatey
===================================================== 
```

我尝试删除巧克力并再次安装。还是一样的。

我也试过删除里面的巧克力目录`C:\Chocolatey\lib\`并`cup`再次运行，仍然是同样的错误。

我的powershell版本是3.0

```
PS C:\Chocolatey\lib> get-host

Name             : ConsoleHost
Version          : 3.0
InstanceId       : 934a43a4-0ccf-47e3-a59a-650f1cf4c6d0
UI               : System.Management.Automation.Internal.Host.InternalHostUserI
                   nterface
CurrentCulture   : en-MY
CurrentUICulture : en-US
PrivateData      : Microsoft.PowerShell.ConsoleHost+ConsoleColorProxy
IsRunspacePushed : False
Runspace         : System.Management.Automation.Runspaces.LocalRunspace 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:05:20.887

如果一切都出错了，最好的解决方案是删除并重新安装。这就是我之前所做的。但是那个时候我没有删除的是`C:\NuGet`文件夹。删除`C:\Chocolatey`和`C:\NuGet`文件夹后，我再次安装了 Chocolatey，这次运行时没有错误`cup`，Chocolatey 现在是最新版本 - 0.9.8.20。

# objective-c - 在 ARC 中，我们需要显式发送 removeObserver: 吗？

> ID：13911651
> 
> 赞同：16
> 
> 时间：2012-12-17T09:43:42.233
> 
> 标签：objective-c, cocoa, automatic-ref-counting, nsnotificationcenter

我们是否必须`removeObserver:`显式发送已作为观察者添加到`NSNotificationCenter`之前的对象？

我有点困惑，无法找到确切的答案。

请详细告诉我，包括为什么我们需要显式删除观察者，以及为什么编译器不将它隐式地放在类/应用程序中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T09:46:15.213

是的，您需要调用`removeObserver:`，如果您不这样做，被观察的类可以调用观察者的所有已释放实例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-01T14:04:51.170

从 10.11 开始，观察者不需要在他们的释放方法中取消注册。

> NSNotificationCenter 和 NSDistributedNotificationCenter 不再向可能被释放的注册观察者发送通知。如果观察者能够存储为调零弱引用，则底层存储将观察者存储为调零弱引用。或者，如果对象不能被弱存储（因为它有一个自定义的保留/释放机制会阻止运行时能够弱存储该对象），则该对象被存储为非弱归零引用。这意味着观察者不需要在他们的释放方法中取消注册。[[1]](https://developer.apple.com/library/prerelease/mac/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_11.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T09:46:55.350

移除观察者总是一个聪明的主意。如果你不移除观察者，消息仍然会被发送，即使对象被释放。甚至可能附着在另一个物体上，这肯定会导致严重的麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T09:54:58.960

您总是需要删除 KVO 和通知的观察者。

# wpf - 如何在多个位置渲染路径？

> ID：13911653
> 
> 赞同：0
> 
> 时间：2012-12-17T09:43:43.490
> 
> 标签：wpf, path, multiple-instances, onrender

我们定义了一个路径，我们希望在 OnRender 覆盖期间在数百个不同的位置进行渲染。我们知道 DC 上的 PushTransform 方法，但这似乎需要为每个渲染一个新的 TranslateTransform 实例，这意味着我们最终也会有数百个 TranslateTransform。这似乎效率不高。

我们还尝试了单个 TranslateTransform，然后只是在每次渲染时更改它的 X 和 Y 位置，但是由于 WPF 实际上缓存了绘图指令而不是实际的绘图，所以当最终要渲染时，它们都渲染在同一个位置，因为它们使用其最后设置的偏移量共享相同的 TranslateTransform。

那么实现这一目标的最佳方法是什么？

# c# - 无法将日历选择的日期放入日期时间 C#

> ID：13911654
> 
> 赞同：1
> 
> 时间：2012-12-17T09:43:45.367
> 
> 标签：c#, winforms, datetime

我在为我的一个更大的项目创建表单时遇到了麻烦。我需要将日历的选定日期保存到 datetime 变量中，但是当我尝试使用时：

```
DateTime valtdatum = calKalender.SelectedDate(); 
```

我面临语法错误。我不知道 SelectedDate 方法是否是 ASP.NET 独有的，或者是否可以将它与普通 C# 一起使用，但是我不知道有任何与此方法等效的方法。

我只是使用了错误的方法吗？是否有我需要启用的命名空间？

问候，乔纳森

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T09:45:16.457

> 我只是使用了错误的方法吗？是否有我需要启用的命名空间？

在 ASP.Net [Calendar.SelectedDate](http://msdn.microsoft.com/en-us/library/system.windows.controls.calendar.selecteddate.aspx)是**属性而不是方法**。你可以像这样使用它：

```
DateTime valtdatum = calKalender.SelectedDate; 
```

您需要删除，`()`因为它不是一种方法。

**编辑：**

由于在您的评论中您指定了它，`System.Windows.Forms.MonthCalender`那么您需要执行以下操作来获取选定日期。

将属性设置[`MaxSelectionCount`](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.maxselectioncount.aspx)为`1`，以便只能进行单个选择，然后您可以使用[SelectionRange.Start](http://msdn.microsoft.com/en-us/library/system.windows.forms.selectionrange.start.aspx)属性：

```
DateTime valtdatum = calKalender.SelectionRange.Start; 
```

或者直接使用[SelectionStart](http://msdn.microsoft.com/en-us/library/system.windows.forms.monthcalendar.selectionstart.aspx)属性。

```
DateTime valdatum = calKalender.SelectionStart; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:49:54.263

```
DateTime valtdatum = calKalender.SelectedDate; 
```

会为你工作

# python - Python迭代一个返回json的子进程？

> ID：13911655
> 
> 赞同：3
> 
> 时间：2012-12-17T09:43:46.753
> 
> 标签：python, linux, json

我有一个子进程正在执行：

```
lshw -json -C network 
```

如果我收到以下回复：

```
 {
    "id" : "network",
    "class" : "network",
    "claimed" : true,
    "handle" : "PCI:0000:00:05.0",
    "description" : "Ethernet interface",
    "product" : "82545EM Gigabit Ethernet Controller (Copper)",
    "vendor" : "Intel Corporation",
    "physid" : "5",
    "businfo" : "pci@0000:00:05.0",
    "logicalname" : "eth0",
    "version" : "00",
    "serial" : "00:8c:42:77:58:49",
    "units" : "bit/s",
    "size" : 1000000000,
    "capacity" : 1000000000,
    "width" : 32,
    "clock" : 66000000,
    "configuration" : {
      "autonegotiation" : "on",
      "broadcast" : "yes",
      "driver" : "e1000",
      "driverversion" : "7.3.21-k8-NAPI",
      "duplex" : "full",
      "firmware" : "N/A",
      "ip" : "10.211.55.10",
      "latency" : "0",
      "link" : "yes",
      "multicast" : "yes",
      "port" : "twisted pair",
      "speed" : "1Gbit/s"
    },
    "capabilities" : {
      "msi" : "Message Signalled Interrupts",
      "bus_master" : "bus mastering",
      "cap_list" : "PCI capabilities listing",
      "ethernet" : true,
      "physical" : "Physical interface",
      "logical" : "Logical interface",
      "tp" : "twisted pair",
      "10bt" : "10Mbit/s",
      "10bt-fd" : "10Mbit/s (full duplex)",
      "100bt" : "100Mbit/s",
      "100bt-fd" : "100Mbit/s (full duplex)",
      "1000bt-fd" : "1Gbit/s (full duplex)",
      "autonegotiation" : "Auto-negotiation"
    }
  }, 
```

我是否可以对此进行迭代以确保我捕获所有网络接口（如果有多个网络接口），而我的系统并非如此。另外，我如何从这个输出中选择 1 或 2 个，我不需要全部数据。

我想到了以下几点：

```
 def get_nic_data():
        lshw_cmd = "lshw -json -C network"
        proc = subprocess.Popen(lshw_cmd, shell=True, stdout=subprocess.PIPE,
                                                      stdin=subprocess.PIPE)
        return proc.stdout

 def read_data(proc_output):
        import simplejason as json
        json_obj = json

        json_obj.loads(proc_output)

        #Obtain Vendor,Description,Product
        #...
        #...

        json_obj.dumps(obtained_data_here)

        #Not sure if this would work this way.

  read_data(get_nic_data()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T09:51:31.900

不幸的是，您不能将`-C`类过滤与`-json`输出结合起来。即使在最新版本中，JSON 输出也严重损坏。相反，请自行过滤*完整*的JSON 输出。请注意，使用时应避免使用`shell=True`，`subprocess`而是传入一个列表；也不需要管道标准输入，但要捕获（静音）标准错误。

然后我们可以递归“子”结构，挑选出任何具有匹配`'class'`键的东西：

```
def get_nic_data():
    lshw_cmd = ['lshw', '-json']
    proc = subprocess.Popen(lshw_cmd, stdout=subprocess.PIPE,
                                      stderr=subprocess.PIPE)
    return proc.communicate()[0]

def find_class(data, class_):
    for entry in data.get('children', []):
        if entry.get('class') == class_:
            yield entry

        for child in find_class(entry, class_):
            yield child

def read_data(proc_output, class_='network'):
    import json

    for entry in find_class(json.loads(proc_output), class_):
        yield entry['vendor'], entry['description'], entry['product'] 
```

然后循环`read_data(get_nic_data())`：

```
for vendor, description, product in read_data(get_nic_data()):
    print vendor, description, product 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:18:55.363

如果有多个网卡`lshw`不返回有效的 json 文本。可以通过在输出之前/之后添加`[`/并在对象之间添加来修复它：`]``,`

```
import json
import re
from subprocess import STDOUT, check_output as qx

# get command output
output = qx("lshw -json -C network".split(), stderr=STDOUT)

# get json parts
_, sep, json_parts = output.rpartition(b"\r")
if not sep: # no \r in the output
    json_parts = output

# convert it to valid json list
jbytes = b"[" + re.sub(b"}( *){", b"}, {", json_parts) + b"]"
L = json.loads(jbytes.decode())

# pretty print
import sys
json.dump(L, sys.stdout, indent=4) 
```

一个更清洁的解决方案将使用`lshw -xml`产生的输出，通过将其包装在根元素中，可以轻松地将其转换为格式良好的 xml：`'<root>'`+ output + `'</root>'`。

# python - 在 python 和 linux shell 中处理（二进制？）文件

> ID：13911665
> 
> 赞同：1
> 
> 时间：2012-12-17T09:44:26.490
> 
> 标签：python, file, text, character-encoding, utf-16

我最近在 python 中编写了一个脚本，它处理 Microsoft Windows DHCP 服务器转储文件并使用电子表格 XML 格式生成当前保留的 XML 文件。

该脚本基本上使用 python **open()**命令打开一个文件，然后遍历每一行*（对于文件中的行）*并查找关键字*reservedip*。如果找到关键字，则使用 shlex **split()**命令将该行分成多个字段。

但是，当我使用 microsoft DHCP 服务器的默认转储文件运行此脚本时，我没有得到任何结果。*另请注意，我无法使用 Linux 的 grep 命令在文件中进行搜索*

然后我尝试在 gedit 中打开文件并将其保存为 unix 文本文件。完成此操作后，我得到了结果并能够在文件中进行 grep。然而，这种方法破坏了编写脚本来自动化我的工作的全部意义。

我一直在谷歌上搜索，但没有找到我想要的东西。我也尝试以二进制模式打开文件，但这也无济于事。

我希望有人可以帮助我解决这个问题。

根据请求，以下是脚本的作用（至少是循环部分）和 DHCP 服务器输出的示例：

**脚本**

```
# Setup an empty dictionary to store the extracted records
records = {}

# Open dhcp dump file
f = open(dhcp.txt, "r")

# Iterate file line by line
for line in f:

  # Only use line with the word "reservedip" in it
  if "reservedip" in line:

    # Split line into fields by spaces (excluding quoted substrings)
    field = shlex.split(line)

    # Add new entry for each record using the 32bit IP address int as it's key
    records[addr_to_int(field[7])] = [field[7], field[8], field[9], field[10]] 
```

*注意：addr_to_int 是我编写的将点分 IPv4 地址转换为整数的函数*

**DHCP 转储**

不幸的是，由于公司政策，我无法包含真正的 DHCP 服务器转储。但是我试图从文件中删除的行如下所示：

> Dhcp Server \\servername.company.local Scope 172.16.104.0 添加reservedip 172.16.104.207 003386dd00gg "hostname.company.local" "Host Description" "BOTH"

在此先感谢，帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:28:16.510

消除结束行字符问题的一种方法是使用 re 将结束行字符设置为 Unix 样式：

```
import re

dhcp_file = open( path_to_dhcp_file, 'r' )
for line in dhcp_file:
    # Change en line char to UNIX style
    line = re.sub( "\r\n", r"\n", line )

    # now do your things on line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:14:25.023

基于这两行，您作为 DHCP 转储文件内容的示例，我制作了以下测试用例（为了在此示例中清晰起见，我在开头添加了 l1、l2、l3、...每行，指的是行号）

所以这是我在 Linux Fedora Core 17 (x86_64) data.txt 上创建的转储文件：

```
l1: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
l2: 003386dd00gg "hostname.company.local" "Host Description" "BOTH"
l3: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
l4: 003386dd00gg "hostname.company.local" "Host Description" "BOTH"
l5: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add  172.16.104.207 
l6: 003386dd00gg "hostname.company.local" "Host Description" "BOTH"
l7: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add  172.16.104.207 
l8: 003386dd00gg "hostname.company.local" "Host Description" "BOTH"
l9: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
l10: 003386dd00gg "hostname.company.local" "Host Description" "BOTH" 
```

你之前这么说：

> 另请注意，我无法使用 Linux 的 grep 命令在文件中进行搜索

这是我使用上述示例文件运行 grep 时得到的结果

```
$ cat data.txt | grep reservedip
l1: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
l3: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
l9: Dhcp Server \\servername.company.local Scope 172.16.104.0 Add reservedip 172.16.104.207 
$ 
```

这也是我使用 python 脚本进行的测试，以检查脚本是否能够在示例文件中找到关键字“reservedip”：

```
lineNumber = 0
with open("./data.txt") as dhcpDumpFile:
    for line in dhcpDumpFile:
        lineNumber += 1
        if "reservedip" in line:
            print("Found 'reservedip' at the line: ", lineNumber) 
```

我得到的结果是：

```
$ python -tt myscript.py
("Found 'reservedip' at the line: ", 1)
("Found 'reservedip' at the line: ", 3)
("Found 'reservedip' at the line: ", 9)
$ 
```

所以，它对我有用。

问候，

达里约什

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T12:42:15.767

文件中这些字符串的编码可能不是 ASCII 兼容的字符编码。UTF-8 和 latin 应该兼容，因为它们对 ASCII 字符只使用一个字节。[UTF-16](http://en.wikipedia.org/wiki/UTF-16)和 UTF-32 不兼容，它们总是使用每个字符超过一个字节。UTF-16 在 MS 文件中并不少见，有时文件甚至是混合的。

转储可能使用 2 个字节，即使是 ASCII 字符也是如此。然后你会`r~e~s~e~r~v~e~d~i~p`在文件中有`~`一些其他字节（也可以是`~r`甚`~~`至仍然编码为`r`.

Just a wild guess, since you are not allowed to post the actual file and I don't know anything about MS DHCP server dumps.

What does

```
file file.txt 
```

give you?

What about

```
file --mime-type --mime-encoding 
```

That won't necessarily tell you the encoding if it is a "mixed" binary/strings file, but if it is plain UTF/ASCII text, it should tell you.

# mod-proxy - APACHE 使用 MOD_PROXY 重定向到 TOMCAT

> ID：13911669
> 
> 赞同：0
> 
> 时间：2012-12-17T09:44:32.293
> 
> 标签：mod-proxy

我正在尝试为 apache2 t tomcat 实现重定向。我想要一个这样的 url：`share.com`打开到 alfresco 登录页面，但目前我必须使用这样的 url：

```
share.com/share/  . 
```

我已经完成了研究，我取得的成果是从 url 中删除了 8080 端口：

```
share.com:8080/share/ 
```

只剩下 /share；我怎样才能删除 /share 部分呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:40:08.683

我相信您想要做的事情可以通过 ProxyPass 来实现。以下条目将导致所有内容都转到 Tomcat/share。

```
ProxyPass / http://localhost:8080/share
ProxyPassReverse / http://localhost:8080/share 
```

要使上述工作正常进行，需要安装并加载 mod_proxy_http。这可以通过 conf 文件中的动态加载配置行来完成：

```
LoadModule  proxy_http_module    modules/mod_proxy_http.so 
```

或者编译成 Apache：

```
./httpd -l | grep proxy
mod_proxy.c
mod_proxy_connect.c
mod_proxy_ftp.c
mod_proxy_http.c
mod_proxy_scgi.c
mod_proxy_ajp.c
mod_proxy_balancer.c 
```

# oracle - 为什么 Informatica 会话不继续删除数据？

> ID：13911671
> 
> 赞同：1
> 
> 时间：2012-12-17T09:44:39.550
> 
> 标签：oracle, etl, informatica-powercenter

我有一个平面文件源，其中第一列用于标记插入、删除或更新的记录。删除/更新是根据目标表中的 PK 完成的。

所以我们让记录从源流到路由器，在那里它被重定向到更新策略转换——插入、更新和删除操作各一个。

我已经对删除和更新目标实例进行了更新覆盖。

> *在工作流程中，我将会话属性设置如下：*
> 
> 1.  对于处理插入的目标，我在目标的会话属性中检查了“插入”。
> 2.  对于处理更新的目标，我在目标的会话属性中选中了“更新为更新”。
> 3.  对于处理删除的目标，我在目标的会话属性中选中了“删除”。

现在，当所有行都插入时，会话可以正常工作。但是，当只有一次更新或删除时，会话在获取源数据后就不会继续..

不确定是什么导致了这种行为..关于如何解决或进一步调试的任何想法..？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:36:31.020

确保您已将工作流会话设置为将源行视为“数据驱动”。当您从已经有“更新策略”的映射创建会话时，这会自动设置，但如果您在创建会话后将“更新策略”添加到映射中，您必须自己更改此设置。

# javascript - 进行位图操作时有关 html 画布、上下文和 imageData 的性能注意事项

> ID：13911673
> 
> 赞同：0
> 
> 时间：2012-12-17T09:44:41.400
> 
> 标签：javascript, html, canvas

由于没有找到，我正在尝试编写一个轻量级库来使用 JavaScript 操作位图。首先，我至少需要三个函数：`newImage(w,h)`, `getPixel(img,x,y)`, `setPixel(img,x,y)`. 问题是，HTML 没有可编辑的“图像”类型，而是具有不同用途的三种不同的东西（画布、上下文和图像数据）。究竟应该`getImage`返回哪个，`getPixel`and`setPixel`函数应该如何工作？

# inheritance - 如何将 TPH 模型连接到详细信息页面

> ID：13911676
> 
> 赞同：1
> 
> 时间：2012-12-17T09:44:42.280
> 
> 标签：inheritance, webforms, subclass, detailsview, tph

我有一个模型如下：

```
 public abstract class Product
{
    public int ProductID { get; set; }
    public string ProductName { get; set; }
}
public class ProductA :Product
{
    public string DetailA1 { get; set; }
    public string DetailA2 { get; set; }
}
public class ProductB :Product
{
    public string DetailB1 { get; set; }
    public string DetailB2 { get; set; }
    public string DetailB3 { get; set; }
} 
```

我需要设置一个对 ProductA 和 ProductB 都有效的 details.aspx 页面。所以我打算用这种方法来做。

```
//First Modify the Product Class
  public abstract class Product
{
    public int ProductID { get; set; }
    public string ProductName { get; set; }
    public int NrofDetails {get;Set;}
    public <list>string DetailValue
         { 
             // I need a function that gets the details from subclasses and make a list
               Return List;
          }
 } 
```

我相信应该有一种简单的方法可以从子类中获取 Detailvalue 列表。如果你能在这个案子上提供帮助，我将不胜感激。

然后我将使用中继器并使用 Product.DetailValue 作为 itemType 并希望将它放在 aspx 上。

注意：我只是一个初学者，我阅读了很多关于 TPH 的内容，但无法了解如何从产品对象中访问子类的字段。

亲切的问候，

# json - flex4.6中的arraycollection错误

> ID：13911677
> 
> 赞同：2
> 
> 时间：2012-12-17T09:44:54.447
> 
> 标签：json, actionscript-3, apache-flex, flex4, arraycollection

我很难将 json 传递给数据网格。我收到以下错误：

```
TypeError: Error #1034: Type Coercion failed: cannot convert mx.collections::ArrayCollection@bc292a9 to Array.
    at Function/<anonymous>()[C:\Users\Birger\Dropbox\Rich Media Applications\P006_Project\src\FULLTEST.mxml:10]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.binding::Binding/wrapFunctionCall()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Binding.as:395]
    at mx.binding::Binding/innerExecute()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Binding.as:469]
    at Function/http://adobe.com/AS3/2006/builtin::apply()
    at mx.binding::Binding/wrapFunctionCall()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Binding.as:395]
    at mx.binding::Binding/execute()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\Binding.as:333]
    at mx.binding::BindingManager$/executeBindings()[E:\dev\4.y\frameworks\projects\framework\src\mx\binding\BindingManager.as:153]
    at FULLTEST/_FULLTEST_ArrayCollection1_i()[C:\Users\Birger\Dropbox\Rich Media Applications\P006_Project\src\FULLTEST.mxml:4]
    at FULLTEST()[C:\Users\Birger\Dropbox\Rich Media Applications\P006_Project\src\FULLTEST.mxml:4] 
```

我的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:components="components.*" initialize="getData.send();">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <mx:HTTPService id="getData" url="http://localhost/P006_Project/Query.php" 
                        useProxy="false" method="POST" resultFormat="text" result="getPHPData(event)">  
        </mx:HTTPService>
        <s:ArrayCollection id="acItems" source="{dataArray}" />
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;
            import mx.rpc.events.ResultEvent;

            [Bindable]private var dataArray:ArrayCollection = new ArrayCollection();

            private function initDataGrid():void
            {
                getData.send();
            }

            private function getPHPData(event:ResultEvent):void
            {
                var rawArray:Array;
                var rawData:String = String(event.result);
                rawArray = JSON.parse(rawData) as Array;
                dataArray = new ArrayCollection(rawArray);
            }

        ]]>
    </fx:Script>

    <mx:Accordion id="accItems" creationPolicy="auto">
        <s:NavigatorContent label="Frisdranken">
            <components:FULLTESTCOMP acItems="{acItems}" creationComplete="{initDataGrid()}"/>
        </s:NavigatorContent>
    </mx:Accordion>
</s:Application> 
```

所以我试图通过将数据库中的内容转换为 JSON 来填充我的数据网格。我正在使用一个自定义组件（在这个组件中只是一个普通的数据网格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:55:23.700

这是问题所在：

```
 <s:ArrayCollection id="acItems" source="{dataArray}" /> 
```

source 需要是“Array”类型，但您将源分配给 ArrayCollection 对象。

你应该做：

```
 <s:ArrayCollection id="acItems" source="{dataArray.source}" /> 
```

希望这可以帮助。

# html - 水平和垂直拟合 UIWebView 内容

> ID：13911678
> 
> 赞同：1
> 
> 时间：2012-12-17T09:44:56.193
> 
> 标签：html, css, uiwebview, xcode4.3

我有一个加载简单图片的 UIWebview。用户需要查看整个图片而不需要垂直滚动。使用 setSalesPageToFit:YES ，用户加载了图像但需要垂直滚动才能看到整个图片，我如何强制图片完全显示而无需滚动可以使用？
这是我的代码片段：

```
NSString *pathImg = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"1"] ofType:@"png"];
    NSString* webViewContent = [NSString stringWithFormat:
                                @"<html>"
                                "<body style='background-color: transparent' >"
                                "<div align='center'>"
                                "<img src=\"file://%@\"/ style='align:center;'>"
                                "</div>"
                                "</body></html>", pathImg];
      webView.backgroundColor =[UIColor clearColor];
    [self->webView loadHTMLString:webViewContent baseURL:nil];
    [webView setScalesPageToFit:YES]; 
```

任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:51:03.333

试试这个..希望它会帮助你

```
 NSString *htmlString = [NSString stringWithFormat:
              @"<html>"
              "<head>"
              "<script type=\"text/javascript\" >"
              "function display(img){"
              "var imgOrigH = document.getElementById('image').offsetHeight;"
              "var imgOrigW = document.getElementById('image').offsetWidth;"
              "var bodyH = window.innerHeight;"
              "var bodyW = window.innerWidth;"
              "if((imgOrigW/imgOrigH) > (bodyW/bodyH))"
              "{"
              "document.getElementById('image').style.width = bodyW + 'px';"
              "document.getElementById('image').style.top = (bodyH - document.getElementById('image').offsetHeight)/2  + 'px';"
              "}"
              "else"
              "{"
              "document.getElementById('image').style.height = bodyH + 'px';"
              "document.getElementById('image').style.marginLeft = (bodyW - document.getElementById('image').offsetWidth)/2  + 'px';"
              "}"
              "}"
              "</script>"
              "</head>"
              "<body style=\"margin:0;width:100%;height:100%;\" >"
              "<img id=\"image\" src=\"%@\" onload=\"display()\" style=\"position:relative\" />"
              "</body>"
              "</html>",image path];

     [webView setClipsToBounds:YES];
    webView.opaque=NO;
    webView.backgroundColor=[UIColor clearColor];
    [webView setUserInteractionEnabled:NO];
    [webView sizeToFit];
    [webView setScalesPageToFit:YES];
    [webView loadHTMLString:htmlString baseURL:nil]; 
```

# javascript - 从 javascript 字符串中删除 HTML 标记

> ID：13911681
> 
> 赞同：30
> 
> 时间：2012-12-17T09:45:07.457
> 
> 标签：javascript, jquery

我有这个代码：

```
var content = "<p>Dear sms,</p><p>This is a test notification for push message from center II.</p>"; 
```

我想从上面的字符串中删除所有`<p>`和`</p>`标签。只想显示没有 html 标签的字符串值，例如：

```
"Dear sms, This is a test notification for push message from center II." 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-17T09:51:15.697

为什么不让 jQuery 来做呢？

```
var content = "<p>Dear sms,</p><p>This is a test notification for push message from center II.</p>";

var text = $(content).text(); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-01-24T13:07:38.433

这是我的解决方案，

```
function removeTags(){
    var txt = document.getElementById('myString').value;
    var rex = /(<([^>]+)>)/ig;
    alert(txt.replace(rex , ""));

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-17T09:48:54.980

使用纯 javascript ：

```
content = content.replace(/(<p>|<\/p>)/g, ""); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-17T09:46:13.010

您可以使用 jQuery [**text()**](http://api.jquery.com/text/)获取纯文本`without`html 标签。

**[现场演示](http://jsfiddle.net/VgHr3/)**

```
withoutP = $(content).text() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-09T15:11:00.530

```
var content = "a<br />";
var withoutP = $(content).text()
alert(withoutP ) 
```

这不适用于 .text() 解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-07-12T11:52:15.983

`myString.replace(/<[^>]*>?/gm, '');`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-01T18:57:06.723

这个正在检查特殊字符

```
var $string = '&lt;a href=&quot;link&quot;&gt;aaa&lt;/a&gt;';
var $string2 = '<a href="link">aaa</a>';
var $string3 = 'BBBBB';
var $string4 = 'partial<script';
var $string5 = 'has    spaces';

function StripTags(string) {

  var decoded_string = $("<div/>").html(string).text();
  return $("<div/>").html(decoded_string).text();

}

console.log(StripTags($string));
console.log(StripTags($string2));
console.log(StripTags($string3));
console.log(StripTags($string4));
console.log(StripTags($string5));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-25T08:58:31.920

放置`hidden element`在标记中，或从 jQuery 创建。使用此代码获取纯文本，而不会出现标签不完整`&lt;`等问题。

```
content = $(hiddenElement).html($(hiddenElement).html(content).text()).text(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-06T14:28:09.873

使用正则表达式：

`var cleanContent = content.replace(/(<([^>]+)>)/ig,"");`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-10T09:18:09.833

以上方法对我不起作用。所以我有一个替代解决方案来解决这个问题`

```
var regex = "/<(.|\n)*?>/";
var originaltext = "1\. Males and females were compared in terms of time    management ability. <br><br>The independent variables were the people in the   study.<br><br> Is this statement correct";
var resultText = body.replace(regex, "");
console.log(result); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-01-08T06:44:42.317

您可以使用[striptags](https://www.npmjs.com/package/striptags)模块删除 HTML 并获取文本。这是一个非常简单直接的解决方案。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-02-16T17:14:29.297

```
function htmlTagremove(text) {

   var cont = document.createElement('div'),
   cont.innerHTML=text;

   return $(cont).text();

}

htmlTagremove('<p><html>test'); 
```

# asp.net - 是否可以通过 CSS 使网格视图中的某些有界字段不可见？

> ID：13911684
> 
> 赞同：0
> 
> 时间：2012-12-17T09:45:14.633
> 
> 标签：asp.net, css, gridview

我有一个标准的网格视图，其中包含许多有界字段和模板字段，其中我想让 4 列不可见。

我知道这个 css 是，`visibility:hidden;`但我不知道如何将它应用到这 4 列，我尝试使用该`ControlStyle-CssClass`属性，但它似乎将 css 应用到整个表。

有没有办法将此 CSS 仅应用到这 4 列，还有计划是在我管理之后为按钮编写一些 Javascript 来打开和关闭可见性，所以如果你可以请使用一些 CSS/标签等可以轻松更改客户端，这将是一个巨大的优势。

一个例子：

```
<asp:GridView ID="gwFoo" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"
                        Width="631px" OnRowDataBound="gwFoo_RowDataBound"
                        CssClass="customerDataTable" AllowSorting="True">
                        <Columns>
                            <asp:BoundField DataField="type" HeaderText="Type" SortExpression="type" />
                            <asp:TemplateField HeaderText="Number" SortExpression="id">
                                <ItemTemplate>
                                    <asp:HyperLink ID="hlNumber" runat="server">[hlNumber]</asp:HyperLink>
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:BoundField DataField="product" HeaderText="Product" SortExpression="product" />
                            <asp:BoundField DataField="startDate" HeaderText="Start Date" SortExpression="startDate" />
                            <asp:BoundField DataField="endDate" HeaderText="End Date" SortExpression="endDate" />
                            <asp:BoundField DataField="isActive" HeaderText="Is Active ?" SortExpression="isActive" />
                            <asp:BoundField DataField="markedForActivation" HeaderText="Marked for Activation ?" SortExpression="markedForActivation" />
                            <asp:BoundField DataField="status" HeaderText="Status" SortExpression="status" />

                            <asp:TemplateField HeaderText="Parent Order" SortExpression="Foo">
                                <ItemTemplate>
                                    <asp:HyperLink ID="hlFoo" runat="server">[hlFoo]</asp:HyperLink>
                                </ItemTemplate>
                            </asp:TemplateField>

                            <asp:TemplateField HeaderText="Parent Document" SortExpression="Foo">
                                <ItemTemplate>
                                    <asp:HyperLink ID="hlFoo" runat="server">[hlFoo]</asp:HyperLink>
                                </ItemTemplate>
                            </asp:TemplateField>

                            <asp:BoundField DataField="createdDate" HeaderText="Created Date" <itemstyle  Visible="false"></itemstyle> SortExpression="createdDate" />
                            <asp:BoundField DataField="createdBy" HeaderText="Created By"  SortExpression="createdBy" />
                            <asp:BoundField DataField="lastUpdated" HeaderText="Last Updated"  SortExpression="lastUpdated" />
                            <asp:BoundField DataField="lastUpdatedBy" HeaderText="Last Updated By" SortExpression="lastUpdatedBy" />                

                        </Columns>
                    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:57:12.547

给列一个类并将css类设置为可见性：隐藏；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:09:08.913

使用`Visible="false"`will 有效，即

```
<asp:BoundField Visible="false" DataField="status" HeaderText="Status" SortExpression="status"  /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:45:12.253

我解决了这个问题，我还可以通过按钮打开和关闭隐形。

首先，我重构了我想以这种方式隐藏的有界字段：

```
<asp:BoundField DataField="createdBy" HeaderText="Created By"  SortExpression="createdBy" >
  <ItemStyle CssClass="fooClass"></ItemStyle>
</asp:BoundField> 
```

类 fooClass 是一个空的 css 类，我使用它只是为了让`<td> </td>`有界字段生成的所有元素共享一个公共类，从而允许`jquery`我在下面编写的脚本隐藏或显示它们。

```
<script> $(".fooClass").hide(); </script>
// or 
<script> $(".fooClass").show(); </script> 
```

# components - XMPP 组件存在

> ID：13911686
> 
> 赞同：1
> 
> 时间：2012-12-17T09:45:23.293
> 
> 标签：components, xmpp

我刚刚发现 XMPP 有多棒，我正在尝试将多人游戏开发为 XMPP 组件 (XEP-0114)。

但是，我无法指示组件的存在。组件是否需要响应 <presence> 节本身？

当然它可以做到这一点，但如果它因维护而停机则不能。此外，组件在备份时通知谁？它当然可以在数据库中注册所有感兴趣的用户，但如果它停机五分钟，那么该列表肯定会改变。以前不感兴趣的用户现在会感兴趣，感兴趣的用户将不再感兴趣。

此外，如果它崩溃（可能发生），它不能发送“不可用”存在指示。

不能以某种方式将这项工作卸载到服务器上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:19:33.363

1.  当您的组件收到`<presence type='probe'/>`时，它应该回复您的组件当前的存在。

2.  当您的组件收到`<presence type='subscribe'/>`时，它应该将`from`地址保存在某种存储机制中，然后回复`<presence type='subscribed'/>`。

3.  当您的组件上线时，它应该向步骤 2 中保存的每个订阅者发送出席信息。

始终确保在您的组件发送的所有节中都放置一个`to`地址和一个地址。`from`如果您习惯于编写客户端，您可能会在第 3 步中忘记这一点。

# visual-studio-2010 - 将 Visual Web Developer 中的解决方案文件保存到我的首选位置

> ID：13911687
> 
> 赞同：0
> 
> 时间：2012-12-17T09:45:24.477
> 
> 标签：visual-studio-2010

我正在使用 Visual web developer Express，今天我开始了我的第一个教程。当我创建一个新网站时，即使我选择了保存我的网站的路径，解决方案文件将始终保存在“Visual studio2010/projects”中。在C#或C中，解决方案文件会保存到我选择的路径吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:54:45.187

2 选项。

1) 文件 -> 将“[解决方案名称].sln”另存为...

2）自己创建解决方案文件，将其保存到您选择的文件路径，然后将项目添加到解决方案中。

希望这可以帮助

# matlab - 如何删除重复的行而不在matlab中重新排序

> ID：13911689
> 
> 赞同：4
> 
> 时间：2012-12-17T09:45:28.457
> 
> 标签：matlab, rows

我有这个单元格数组：

```
levelx=
      'GO:0016787'    'GO:0006412'    'GO:0030533'
      'GO:0008150'    'GO:0006412'    'GO:0030533'
      'GO:0006810'    'GO:0006412'    'GO:0030533'
      'GO:0016787'    'GO:0006412'    'GO:0030533'
      'GO:0008150'    'GO:0006412'    'GO:0030533'
      'GO:0006810'    'GO:0006412'    'GO:0030533'
      'GO:0016787'    'GO:0006412'    'GO:0030533'
      'GO:0008150'    'GO:0006412'    'GO:0030533'
      'GO:0006810'    'GO:0006412'    'GO:0030533'
      'GO:0016787'    'GO:0006412'    'GO:0030533' 
```

我需要删除重复的行，但不更改整行的顺序...请注意，我使用代码查找唯一行，但它更改了行的顺序：

```
[~,idx]=unique(cell2mat(levelx),'rows');
unique_levelx =  levelx(idx,:); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:03:32.923

尝试

```
unique(levelx,'rows','stable') 
```

请注意，在此语句中，我假设这`levelx`是一个数组，因为这就是我设置您的测试数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:08:10.900

我有一个黑客！

```
for li=1:size(levelx,1)
    fn = regexprep( [levelx{li,:}], ':', '' );
    s.(fn) = 1;
end
levelx = {};
fn = fieldnames( s );
for li=1:numel(fn)
    t = regexp( rexexprep( fn{li}, 'GO', 'GO:' ), '(GO:\d+)', 'tokens' );
    levelx(li, 1:3 ) = cellfun( @(x) x{1}, t, 'uni', false );
end 
```

# javascript - 即时将字节数组转换为整数数组

> ID：13911690
> 
> 赞同：1
> 
> 时间：2012-12-17T09:45:28.967
> 
> 标签：javascript, arrays

从网络服务器我收到一个由 N 个整数（有符号 16 位，小端序）组成的大字节数组，我想在 javascript 中构建一个整数数组。

当然，我可以遍历传入的数组并按每两个字节推入。这样做没有问题。

我想知道是否有更方便的方法来填充数组。例如，在 C 语言中，我可以设置一个指向第一个字节的整数指针，然后访问所有其他字节。或者更好的是，我可以将缓冲区 malloc 和 memcpy 到保留空间。在这两种情况下，我都不必迭代源数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:38:19.363

这会将两个字节（每个 8 位）转换为整数

```
function Two8bitBytestoOneInteger(byteHighBits,byteLowBits){
   return  ( byteHighBits.charCodeAt(0) << 8 ) | ( byteLowBits.charCodeAt(0) & 0xFF ) ;
} 
```

*提示：* 如果您尝试打印字节（即`console.log(byteHighBits)`），您会收到一个错误`NaN`（不是数字），因此要查看字节整数值，请执行此操作`( console.log(byteHighBits.charCodeAt(0) )`

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:24:20.950

在支持 Typed Arrays 的较新浏览器中，您可以发出 XHR 请求，并将`responseType`请求参数[设置为`"arraybuffer"`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data#Receiving_binary_data_using_JavaScript_typed_arrays). 然后响应将是一个`ArrayBuffer`对象，您可以将其传递给[`Int32Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Int32Array?redirectlocale=en-US&redirectslug=JavaScript_typed_arrays%2FInt32Array)构造函数。

# android - 如何将sqlite表的值与android中的json标签值进行比较

> ID：13911692
> 
> 赞同：1
> 
> 时间：2012-12-17T09:45:54.230
> 
> 标签：android, json, sqlite

我想将 id`sqlite`的值与`TAG_ID`来自 json webservice 的值进行比较。我只是坚持这样做..

到目前为止我尝试过的是

```
class LoadAll extends AsyncTask<String, String, String> 
    {

            protected String doInBackground(String... args) 
            {
                Log.i("url ",url_all_products);

                    List<NameValuePair> params = new ArrayList<NameValuePair>();
                    JSONObject json = jParser.makeHttpRequest(url_all_products, "GET",params);
                    Log.w("All book: ", json.toString());
                    Log.i(url_all_products, url_all_products);                     
                    try 
                    {
                        System.err.println("json array "+json.getJSONArray(TAG_PRODUCTS));
                        bookProduct = json.getJSONArray(TAG_PRODUCTS);

                    } 
                    catch (JSONException e) 
                    {
                            e.printStackTrace();

                    } 
                    if(data_exist!=bookProduct.length()){
                        Log.i("in update","m here");
                         Cursor cursors = getRawEvents("select id from bcuk_book");

                             try{

                             for (int i = 0; i < bookProduct.length(); i++) {
                                 JSONObject c = bookProduct.getJSONObject(i);

                                 String Bid = c.getString(TAG_ID);

                                 ArrayList<String> mapId = new ArrayList<String>();

                                    mapId.add(TAG_ID);

                                    Log.e(Bid,Bid);

                                    while(cursors.moveToNext())
                                    {
                                     System.err.println("update coded STEON"+cursors.getString(0));
                                     Log.e(Bid,c.getString(TAG_ID));

                                    }
                             }

                         }
                             catch(JSONException e){
                                 e.printStackTrace();
                             }
                    }
                    else{
                        Log.i("Done good","m here");
                    }
                    return null;               
            } 
```

背后的原因

```
 if(data_exist!=bookProduct.length()){ 
```

这个语句是变量`data_exist=cursor.getCount();`

并且`bookProduct.length`是jsonarray的长度如果长度不同我想比较它们然后我想将新值更新到sqlite中。任何人都可以建议我这样做的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:57:47.623

> 如果长度不同，那么我想将新值更新到 sqlite。

不是更新数据库的好方法。
假设服务器数据库字段发生了一些变化。数量相同，但内容不同。
这就是我的做法：

```
 String sql = "select * from " + DB_TABLE + " where " + TAG_ID + "='" + id + "'";
 Cursor c = database.rawQuery(sql, null);
 c.moveToFirst();
 if( c.getCount() > 0){ // already in the database
      // update entry with TAG_ID = id
  }
  else{ // new entry
      // add new entry
  } 
```

# objective-c - 核心数据 - 实例变量更新中的 NSManagedObjects

> ID：13911694
> 
> 赞同：1
> 
> 时间：2012-12-17T09:46:03.710
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobject

假设我`Employee`通过执行以下操作来获取所有实体对象：`NSArray *employees = [context executeFetchRequest:request error:&error];`

然后我通过执行以下操作在我的类中设置一个实例变量：`self.allEmployees = employees;`

然后稍后在我的应用程序中，我将对我的员工对象进行一些修改，但不是通过访问`self.allEmployees`. 我正在从另一个班级修改它们。

我的`self.allEmployees`数组是否会更新为我从另一个类对员工对象所做的更改？或者我的`self.allEmployees`数组是否会处于我第一次执行提取时员工对象的状态？（我怀疑是后者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:50:34.287

如果您更改从获取中收到的对象，并且不复制它们，那么可以。这些都是指针。所以你不应该需要做另一个 fetch 请求。

如果您更改员工的值，则指针不会更改。唯一改变的是实例变量或属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:58:47.350

您从 fetch 请求中返回的数组包含对实时托管对象的引用。除非您更改不同的 fetchLimit 或 batchSize，否则您将获得一个包含与查询返回对象一样多的故障对象的数组。

当您访问这些故障对象之一的属性时，CoreData 会透明地检索所有属性的实际数据并将这些数据返回给您。

一个托管对象总是有它自己最近一次调用保存的最新值。因此，如果您对 self.allEmployees 进行修改，您需要在 MOC 上调用 save ，这会将更改广播到所有其他员工对象。

这也是 KVO 对 NSManagedObject 属性起作用的原因，因为它们会收到所有影响它们的已保存更改的通知。

# sql-server - SQL 查询从数据库表中获取与特定句子最匹配的单词的列记录。微软 SQL 服务器 2012

> ID：13911699
> 
> 赞同：0
> 
> 时间：2012-12-17T09:46:23.513
> 
> 标签：sql-server, sql-server-2012

我有这句话：

```
I want to say hi for everybody here. 
```

我想根据匹配单词的数量检查表中的特定列是否包含一些相似的句子。

表格行

1.  大家好你们好
2.  在这里打个招呼
3.  在这里为大家打个招呼

我需要得到第三行，因为它包含最多的匹配词。

感谢您的友好反馈。它是如此紧急。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:57:21.853

您应该在列上设置全文索引，并使用~~[CONTAINS](http://msdn.microsoft.com/en-us/library/ms187787.aspx)~~ [FREETEXTTABLE](http://msdn.microsoft.com/en-us/library/ms177652.aspx)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:16:54.420

完整的代码答案有点长，但我用于处理人名的类似问题的解决方案是除了包含完整句子的表之外还有一个 Word 表。创建一个相交表以在句子和单词之间进行多对多映射。当您添加一个句子时，您还将它拆分为单词并更新 Words 表和 intersect 表。

给定一个要搜索的句子，您可以构造一个带有 where 子句（如`word in ("I", "want", "to"`...etc.）的查询，将其连接到 intersect 表，并根据 intersect 表中的 Sentence table id 分组。通过分组，您可以返回每个 Sentence 行匹配的单词的计数，其中每个 Sentence 行具有一个或多个匹配的单词。按该计数排序，您将获得最匹配的句子。

这种方法不考虑顺序，拼写必须准确。您还必须考虑如何处理一个句子，就像`"All for one and one for all"`单词重复的地方一样。

# android - Android SDK 工具：与其他不兼容

> ID：13911703
> 
> 赞同：1
> 
> 时间：2012-12-17T09:46:51.233
> 
> 标签：android

只需从 Android 开发者网站下载最新的 Android SDK 版本，运行 ./android 工具（我使用 Mac OS X 10.7.5），我得到下一个错误：

*Android SDK 工具：与其他不兼容*

[http://qblx.co/ZCrpcI](http://qblx.co/ZCrpcI)

那么，这意味着什么？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:58:32.677

从来没有见过。最好卸载并重新安装所有内容。清理（​​rm -rf）android sdk 文件夹并重新安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:45:34.740

我解决了这个问题，它是 Java 1.7 首选项，刚刚删除了 Java 1.7，这里有 2 个关于这个问题的链接：

[http://dhruba.name/2012/08/20/adding-a-jdk-and-sources-to-eclipse-on-a-mac/](http://dhruba.name/2012/08/20/adding-a-jdk-and-sources-to-eclipse-on-a-mac/) [http://emmanuelbernard.com/blog/2012/10/31/不再为您提供 java 首选项/](http://emmanuelbernard.com/blog/2012/10/31/no-more-java-preferences-for-you/)

# excel - 如何将excel范围作为图片添加到Outlook邮件正文

> ID：13911708
> 
> 赞同：3
> 
> 时间：2012-12-17T09:47:09.817
> 
> 标签：excel, vba, image, outlook, sendmail

我想在 Excel 中构建\编辑邮件签名：

```
第一单元：|问候，|
第二单元（姓名）：|Asaf Gilad |
第三单元（标题）：|PMO |
第 4 格（邮件）：|Asaf@mail.com |

```

这样当我单击发送时，消息的正文将如下所示：

```
尊敬的先生
...................................
....... 留言内容 ........
...................................
...................................

问候，
阿萨夫·吉拉德    
项目办           
asaf@mail.com

```

签名也包含图片。

我设法将范围保存为图片并将该图片作为附件发送，但图片在正文中是空的，尽管它已作为附件正确发送。

这是我使用的代码：

```
公共子导出电子邮件（收件人名称为字符串）
    在错误转到错误时：
    Dim olApp 作为 Outlook.Application
    将 olN 变暗为 Outlook.Namespace
    将 olMail 暗淡为 Outlook.MailItem
    暗淡 strEmailTo 作为字符串，strEmailCC 作为字符串，strEmailBCC 作为字符串
    将 FNAME 调暗为字符串
    将橙色调暗为范围
    Dim oChart 作为图表
    暗淡为图片
    strEmailTo = ""
    strEmailCC = ""
    strEmailBCC = ""
    strEmailTo = "a@a.com"
    strEmailCC = "b@b.com
    如果 strEmailTo "" 那么
        设置 olApp = 新 Outlook.Application
        设置 olNs = olApp.GetNamespace("MAPI")
        olNs.登录
        设置 olMail = olApp.CreateItem(olMailItem)
        olMail.To = strEmailTo
        olMail.CC = strEmailCC
        olMail.BCC = strEmailBCC
        olMail.Subject = "我的主题"
        设置 oRange = Sheets(1).Range("A1:Z100")
        设置oChart = Charts.Add
        oRange.CopyPicture xlScreen, xlPicture
        oChart.Paste
        FNAME = Environ$("temp") & "\testPic.gif"
        oChart.Export Filename:=FNAME, FilterName:="GIF"
        olMail.Attachments.Add FNAME
        olMail.HTMLBody = "" & _
            “”
        olMail.Attachments.Add FNAME
        olMail.Send
    万一
    Application.StatusBar = False
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
    杀死 FNAME
    设置 olApp = 无
    设置 olNs = 无
    设置 oRange = 无
    设置 oChart = 无
    设置 oImg = 无
    退出子
呃：
    MsgBox err.Description
结束子

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:07:41.207

这是个好问题，阿萨夫。当我建立自动化电子邮件解决方案时，我发现很难输入签名行。这是可能的，但并不容易。也许它在 2010 年更新，但我还没有检查。

我所做的是将整个正文放入驱动器上的文本文件中，并附上我想要格式化的任何 html 标签。这给了我很大的灵活性，可以制作格式精美的电子邮件，我也可以在其中分配变量。

然后我通过`Microsoft Scripting Runtime`库访问这些文件。

请参见下面的代码片段：

```
Option Explicit

Const strEmailBoiler As String = "\\server\path\folder\subfolder\email_text\"

Sub PrepMessage()

Dim strBody As String, strMon As String

strMon = range("Mon").Value
strFY = range("FY").Value
strBody = FileToString(strEmailBoiler, "reports_email_body.txt")

strBody = Replace(strBody, "[MONTH]", strMon)
strBody = Replace(strBody, "[YEAR]", Right(strFY, 2))
strBody = Replace(strBody, "[FILE PATH]", strFileName)

SendMail "firstname.lastname@xyz.com", "Subject Goes Here " & strMon & " YTD", strBody

End Sub

Function FileToString(ByVal strPath As String, ByVal strFile As String) As String
'requires reference to Microsoft Scripting Runtime Object Library (or late binding)

    Dim ts As TextStream

    Set fso = New FileSystemObject
    Set ts = fso.OpenTextFile(strPath & strFile, ForReading, False, TristateUseDefault)

    FileToString = ts.ReadAll
    ts.Close

    Set ts = Nothing
    Set fso = Nothing

End Function

Sub SendMail(strTo As String, strSubject As String, strHTMLBody As String, Optional strAttach As String, Optional strCC As String)
'requires reference to Microsoft Outlook X.X Object Library (or late binding)

Dim olApp As Outlook.Application
Dim olMI As Outlook.MailItem

Set olApp = CreateObject("Outlook.Application")
Set olMI = olApp.CreateItem(olMailItem)

With olMI

    .To = strTo
    .Subject = strSubject
    .HTMLBody = strHTMLBody
    If strAttach <> vbNullString Then .Attachments.Add strAttach
    .Display 'using this because of security access to Outlook
    '.Send

End With

End Sub 
```

然后我的`reports_email_body.txt`文件将如下所示：

```
<p>Hello Person,</p> 
<p>The Reports file for [MONTH] FY[YEAR] has been saved in the following location:</p>
<p><a href="[FILE PATH]">[FILE PATH]</a></p>
<p>Best,</p>
<br>
Scott Holtzman
<br>My Address
<br>my title
<br>whatever else... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T20:58:46.143

在 Excel 2010（可能还有 2007）中，您可以将 .HTMLBody 添加到正文字符串的末尾。例如，使用这样的东西：

```
 .HTMLBody = "<br>" & strbody & .HTMLBody
                ' <br> is an HTML tag to turn the text into HTML
                ' strbody is your text from cell C9 on the mail tab
                ' .HTMLBody inserts your email signature 
```

这至少可以解决您的签名行问题。

我正在寻找相同问题的解决方案：将范围作为图片插入。

# jquery - Jquery Mobile - 在上一页中获取元素值

> ID：13911711
> 
> 赞同：0
> 
> 时间：2012-12-17T09:47:26.390
> 
> 标签：jquery, jquery-mobile

我有第 1 页：

```
<div data-role="page" id="home-page" >
    <div data-role="content">
            ...
        <input id="el1" type="text" />
            ...
    </div>
</div> 
```

Page1 包含将加载 page2 的链接（通过 ajax）：

如果 page2 已加载，如何访问 page1 中的元素？可能吗？

```
$('#page2').die('pageinit');
$('#page2').live('pageinit', function(event, data){
    //?
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T16:47:54.047

看看我之前的帖子：[https](https://stackoverflow.com/a/13797984/1848600) ://stackoverflow.com/a/13797984/1848600 。它将向您展示如何访问上一页数据。

您可以使用此代码访问它：

```
$('#second').on('pagebeforeshow', function (e, data) {
    alert(data.prevPage.find('div[data-role="content"]').attr('id'));
}); 
```

我还为您创建了一个新示例：http: [//jsfiddle.net/Gajotres/Y5DuV/](http://jsfiddle.net/Gajotres/Y5DuV/)。如果您有更多问题，请给我评论。

# css - NavBar jQuery mobile：没有正确的定位

> ID：13911715
> 
> 赞同：0
> 
> 时间：2012-12-17T09:47:37.093
> 
> 标签：css, jquery-mobile, navbar

我正在设置一个 jQuery 移动网页。我们在标题中设置了一个 NavBar。

现在发生的问题是导航栏向右填充（我猜）1px。

因此，在移动屏幕上，导航栏向右排列，并且不完全适合标题栏下方..

您可以看到我的意思的链接：http: [//lc.gorillaspots.nl/test/l/web/test/test.php](http://lc.gorillaspots.nl/test/l/web/test/test.php)

例如，我将导航栏作为独立的页面放在页面中（在标题导航栏下方），然后您可以看到它右侧缺少 1px ..

WI 似乎无法在样式表中找到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:38:50.883

如果您有另一个 css 文件并且它位于 jquery mobile css 文件下方，请将其添加到其中：

```
.ui-navbar li .ui-btn {
    margin: 0 -1px !important;
} 
```

原始样式附加到标签 (div[data-role="navbar"] ul li a)

# maven - 使用 Maven 运行 JUnit 测试套件

> ID：13911716
> 
> 赞同：11
> 
> 时间：2012-12-17T09:47:38.963
> 
> 标签：maven, junit

我编写了一个用于运行多个测试用例的 JUnit 测试套件。

现在我想立即运行我的测试套件类（AllTest.java），以便所有测试都由一个类触发、承载和管理。我知道 maven-failsafe-plugin 可用，但是还有其他更简单的方法可以从 Maven 调用 JUnit 测试套件吗？

我不想为此使用另一个插件。

这是我当前的 maven-failsafe-plugin 配置：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-failsafe-plugin</artifactId>
  <version>2.9</version>
  <configuration>
    <includes>
      <include>**/AllTests.java</include>
    </includes>
  </configuration>
  <executions>
    <execution>
      <id>integration-test</id>
      <goals>
        <goal>integration-test</goal>
      </goals>
    </execution>
    <execution>
      <id>verify</id>
      <goals>
        <goal>verify</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T13:21:41.273

您可以使用`-Dit.test=[package].AllTest`( `-Dtest`with surefire) 运行它，或者在 pom 中配置包含的测试：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.22.1</version>
    <configuration>
      <includes>
        <include>AllTest.java</include>
      </includes>
    </configuration>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-14T07:16:25.217

您可以使用以下 maven 命令运行测试套件：

```
 mvn test -Dtest=x.y.z.MyTestSuite 
```

注意：xyz 是包名。

# c++ - 获取闪存驱动器的读写速度

> ID：13911728
> 
> 赞同：0
> 
> 时间：2012-12-17T09:48:33.050
> 
> 标签：c++, file-transfer, usb-drive, rate, measure

如何查看 USB 闪存驱动器的读写传输速率？我想知道是否有办法在不复制大文件和测量时间的情况下获得这个。即使我必须这样做，什么文件大小和内容会给我一个可表示的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:16:58.887

您可能需要为此使用已有的工具。这是我发现的一些 [http://www.makeuseof.com/tag/5-lightweight-tools-to-check-the-speed-of-your-usb-flash-drive-windows/](http://www.makeuseof.com/tag/5-lightweight-tools-to-check-the-speed-of-your-usb-flash-drive-windows/)

# ios - 在 ios6 中使用 skpsmtpmessage 通过电子邮件发送超过 2 张图像

> ID：13911731
> 
> 赞同：3
> 
> 时间：2012-12-17T09:48:38.250
> 
> 标签：ios, email, ios6, smtp

我正在尝试将图像附加到电子邮件并将电子邮件发送到我的电子邮件地址。问题是，当我发送一封附有 4 或 5 张图片的电子邮件时，该应用程序会一直处理并最终被挂起并崩溃并且不发送电子邮件。它适用于一张图片。我正在使用 skpsmtp 发送邮件。同一个应用程序在 iOS5 中运行良好，但是当我在 iOS6 上运行它时它挂起，我无法在它挂起时发送邮件。

代码如下所示：

```
- (IBAction)    SendEmail {
    //supports multiple emails
    BOOL bIsEmailValid = NO;
    if ([txtTO.text rangeOfString:@","].location != NSNotFound) {
        NSArray *arrEmails = [txtTO.text componentsSeparatedByString:@","];
        DLog(@"Emails: %@", arrEmails);
        if ([arrEmails count] > 0) {
            for (int ctr = 0; ctr < [arrEmails count] ; ctr++) {
                NSString *strEmail = [(NSString*)[arrEmails objectAtIndex:ctr] stringByReplacingOccurrencesOfString:@" " withString:@""];
                if ([self IsValidEmail:strEmail]) {
                    bIsEmailValid = YES;
                } else {
                    bIsEmailValid = NO;
                    break;
                }
            }
        }
    } else {    // only 1 email entered
        if ([self IsValidEmail:txtTO.text]) {
            bIsEmailValid = YES;
        } else {
            bIsEmailValid = NO;
        }
    }

    if (bIsEmailValid) {
        [NSThread detachNewThreadSelector:@selector(ActivityViewLoading) toTarget:self withObject:nil];
        SKPSMTPMessage *testMsg = [[SKPSMTPMessage alloc] init];
        testMsg.fromEmail       = FROM_EMAIL;
        testMsg.toEmail         = txtTO.text;
        testMsg.relayHost       = RELAY_HOST;
        testMsg.requiresAuth    = YES;
        testMsg.login           = EMAIL_LOGIN;
        testMsg.pass            = PASSWORD;
        testMsg.subject         = txtSubj.text;
        testMsg.wantsSecure     = YES;
        testMsg.delegate        = self;
        testMsg.bccEmail        = BCC_EMAIL;

        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

        NSString *defStrName     = [defaults stringForKey:@"keyEName"]; 
        NSString *defStrContact  = [defaults stringForKey:@"keyEContNo"];
        NSString *defStrEmail    = [defaults stringForKey:@"keyEEmailAdd"]; 
        NSString *defStrDescr    = [defaults stringForKey:@"keyEShortMessage"];
        DLog(@"%@ %@ %@ %@",defStrName, defStrContact, defStrEmail, defStrDescr);

        NSMutableArray* parts = [[NSMutableArray alloc] init];

        NSString *strhtml = [NSString stringWithFormat:@"<div>%@</div>",[txtDesc.text stringWithNewLinesAsBRs]];

        NSString *defStrWebLinks        = [defaults stringForKey:@"keyEwebLinks"];
        NSArray *array     = [defStrWebLinks componentsSeparatedByString:@"|"];
        NSString *strTemp1 = [[array objectAtIndex:0] stringByReplacingOccurrencesOfString:@" " withString:@""];
        NSString *strTemp2 = [[array objectAtIndex:1] stringByReplacingOccurrencesOfString:@" " withString:@""];

        NSString *strFormat1 = [NSString stringWithFormat:@"<a href=\"\%@\"\>%@</a>",
                                strTemp1,strTemp1];

        NSString *strFormat12 = [NSString stringWithFormat:@"<a href=\"\%@\"\>%@</a>",
                                strTemp2,strTemp2];

        NSString *strComb = [NSString stringWithFormat:@"%@ | %@",strFormat1,strFormat12];

        strhtml = [strhtml stringByReplacingOccurrencesOfString:defStrWebLinks withString:strComb];
        //DLog(@"%@",strhtml);

        NSDictionary *plainPart = [NSDictionary dictionaryWithObjectsAndKeys:@"text/html",kSKPSMTPPartContentTypeKey,
                                   strhtml,kSKPSMTPPartMessageKey,@"8bit",kSKPSMTPPartContentTransferEncodingKey,nil];

        [parts addObject:plainPart];

        for (int nCtr = 0; nCtr < [arrPix count]; nCtr++) {
            UIImageView *imageV = [arrPix objectAtIndex:nCtr];
            if (imageV.image) {
                NSData *imageData = UIImagePNGRepresentation(imageV.image);
                NSString *strFileName = [NSString stringWithFormat:@"MyPicture-%d.jpeg",nCtr];

                NSString *strFormat = [NSString stringWithFormat:@"image/jpeg;\r\n\tx-unix-mode=0644;\r\n\tname=\"%@\"",strFileName];
                NSString *strFormat2 = [NSString stringWithFormat:@"attachment;\r\n\tfilename=\"%@\"",strFileName];
                NSDictionary *vcfPart = [NSDictionary dictionaryWithObjectsAndKeys:strFormat,kSKPSMTPPartContentTypeKey,
                                         strFormat2,kSKPSMTPPartContentDispositionKey,[imageData encodeBase64ForData],kSKPSMTPPartMessageKey,@"base64",kSKPSMTPPartContentTransferEncodingKey,nil];

                [parts addObject:vcfPart];
            }
        }

        testMsg.parts = parts;
        [testMsg send];

} 
```

需要一些指导。谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:02:46.737

将图像格式从 PNG 更改为 JPEG。

因此改变这一行

NSData *imageData = UIImagePNGRepresentation(imageV.image);

至

NSData *imageData = UIImageJPEGRepresentation(imageV.image,0.9);

它会解决问题...

# api - 检查 Instagram 图像是否是私有的

> ID：13911733
> 
> 赞同：1
> 
> 时间：2012-12-17T09:49:01.700
> 
> 标签：api, privacy, instagram

假设我有图像的 URL，[http://instagr.am/p/xxxxxxxx/](http://instagr.am/p/xxxxxxxx/)，我如何检查图像是否设置为私人网页？有一些我可以使用的 API 吗？

我需要这个，因为我在我的页面上显示了一堆 Instagram 图片，但如果它们变为私有，我想删除它们的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:07:36.383

我没有找到查看特定图像是否为私有的方法，因此我保存了图像的 AuthorID。如果此作者有私人资料，我在尝试获取用户信息时会遇到异常，如果我遇到异常，那么我知道我可以删除指向图像的链接。

这是我使用的powershell代码：

```
try
{
    Invoke-WebRequest "https://api.instagram.com/v1/users/<InsertAuthorID>/?client_id=xxxx";
}
catch [Exception]
{
    # Remove Image
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T17:35:12.220

使用 GET 关系端点。

```
https://api.instagram.com/v1/users/user-id/relationship 
```

此端点返回一个 BOOL 值“target_user_is_private”。

# ruby-on-rails-3 - Rails3 连接不包括连接列

> ID：13911735
> 
> 赞同：0
> 
> 时间：2012-12-17T09:49:09.983
> 
> 标签：ruby-on-rails-3, activerecord

我有两个相关的`ActiveObject`模型：

```
class Product < ActiveRecord::Base
 belongs_to :product_type

 #contains a field called name
end

class ProductType < ActiveRecord::Base
  has_many :products

  # contains a field called name
end 
```

如果我使用它们的关系加入两个模型，那么一切正常：

```
Product.joins(:product_type) 
```

> "SELECT \"products\".* FROM \"products\" INNER JOIN \"product_types\" ON \"product_types\".\"id\" = \"products\".\"product_type_id\""

但是现在我需要获取具有特定 的 Products `ProductType`，而我所知道的是产品类型是它的名称（每个产品类型的名称都是唯一的），所以我尝试在连接表中使用条件，正如 Rails 指南所建议的那样：

```
Product.joins(:product_type).where(:product_type => {:name => "MyProductTypeUniqueName"}) 
```

这会产生以下 SQL：

```
"SELECT \"products\".* FROM \"products\" INNER JOIN \"product_types\" ON \"product_types\".\"id\" = \"products\".\"product_type_id\" WHERE \"product_type\".\"name\" = 'MyProductTypeUniqueName'" 
```

不幸的是，它失败并出现以下错误：

> ActiveRecord::StatementInvalid: PG::Error: ERROR: missing FROM-clause entry for table "product_type"

错误似乎是因为生成 SQL 时 FROM 子句中不包含 product_type 列（至少“product_type.name”列不包含）

使用 PostgreSQL 和 Rails 3.2.3 SQL 结果使用返回的对象实例的`to_sql`方法提供`ActiveRecord::Relation`

我知道我可以直接提供 sql 字符串进行连接，但这应该可以工作，因为它是一个几乎等于 rails 指南中的示例。我究竟做错了什么？

编辑：两个模型都包含一个名为“名称”的字段。包括以防这是 ​​SQL 未正确构建的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:08:15.413

尝试这个，

```
Product.joins(:product_type).where(:table_name => {:name => "MyProductTypeUniqueName"}) 
```

其中 :table_name 是数据库中 :product_type 的表名

# javascript - RadioButtonList 用 javascript 检查

> ID：13911738
> 
> 赞同：0
> 
> 时间：2012-12-17T09:49:23.290
> 
> 标签：javascript, asp.net, html

我正在尝试一个由 RadioButtonList 组成的简单验证`rblstPallet`。我尝试了以下代码：

**javascript**

```
var rblstPallet = document.getElementById('rblstPallet');
var counter = 0;
for (var intCount = 0; intCount < rblstPallet.length; intCount++) {
    if (rblstPallet[intCount].checked) {  //this step is not working
        console.log(intCount); //I checked using this step
        counter++;
    }
}
if (counter == 0) {        
    //MSG: please select any item
}
else {
    // Redirect to next page function
} 
```

**.aspx**

```
<asp:RadioButtonList ID="rblstPallet" runat="server" RepeatDirection="Horizontal">
     <asp:ListItem>Wood</asp:ListItem>
     <asp:ListItem>Plastic</asp:ListItem>
     <asp:ListItem>None</asp:ListItem>
</asp:RadioButtonList> 
```

问题是，如果我什至选择了一个单选按钮，那么该`counter`值也保持不变。当我调试代码时，我知道那行

> if (rblstPallet[intCount].checked) {

甚至没有执行，甚至没有在控制台中显示任何错误。我正在通过这个[链接](http://www.codeproject.com/Tips/204244/JavaScript-RadioButtonList-get-and-set-values)。我试过这个[链接](https://stackoverflow.com/a/9359309/1577396)（不工作）。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:06:21.997

RadioButtonList 被转换为具有类似于 radiobuttonlist id 的 id 的单选按钮，您需要`iterate`通过 DOM 来查找`matching`元素。

```
function getRadioButtonListSelections(radioButtonListName)
{
     int selectionCount = 0;
     for(i=0;i<document.forms[0].length;i++)
     {
            e=document.forms[0].elements[i];
            if (e.id.indexOf(radioButtonListName) != -1 && e.checked)
                selectionCount++;
     }  
     return selectionCount; 
}       

alert(getRadioButtonListSelections('rblstPallet')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:53:18.177

代替

```
var rblstPallet = document.getElementById('rblstPallet'); 
```

经过

```
var rblstPallet = document.getElementById('<%= rblstPallet.ClientID %>'); 
```

如果您想验证您的单选按钮列表，为什么不使用验证器控件？

```
<asp:RequiredFieldValidator ID="rfvPallet" runat="server"
      ControlToValidate="rblstPallet" ErrorMessage="RequiredFieldValidator">
 </asp:RequiredFieldValidator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:51:50.443

要么使用：

```
var rblstPallet = document.getElementById('<%=rblstPallet.ClientID=>'); 
```

或者

将客户端 ID 模式设置为静态：

```
<asp:RadioButtonList ID="rblstPallet" runat="server" RepeatDirection="Horizontal" ClientIDMode="static"> 
```

并找到并循环遍历每个单选按钮：

```
var rblstPallet = document.getElementById('rblstPallet');
rblstPallet  = rblstPallet.querySelectorAll('input[type="radio"]') 
```

# linux - 用于 IPV6 IP 地址比较的 Linux 命令

> ID：13911741
> 
> 赞同：0
> 
> 时间：2012-12-17T09:49:36.790
> 
> 标签：linux, command, ip-address, ipv6

我正在尝试在 Linux 系统上获取 IPV6 IP 地址。我正在使用以下命令

```
ifconfig eth0 | grep "inet6 addr" | awk '{print $3}' 
```

如果需要任何改进，请提出建议。我还想检查 IPV6 IP 地址是否不等于 0:0:0:0:0:0:0:1

那怎么办？

谢谢。德尼亚内什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:26:49.367

IPv6 地址可以用多种方式表示；根据几个规则缩写（压缩）。我建议使用命令行`ipv6calc`工具让它解释地址并使用该输出。例如：

```
ifconfig eth0 | grep "inet6 addr" | awk '{print $3}' | \
   ipv6calc --addr_to_fulluncompressed
fe80:0000:0000:0000:dead:beaf:dead:beef/64 
```

我发现此`--addr_to_fulluncompressed`选项对于非常可靠地比较地址非常有用。

另一方面，您可以使用`--out ipv6addrtype`grep for直接检查 IPv6 地址类型`loopback`，但在我的安装中，由于某种原因它无法正常工作。

# java - 为什么在 Graphics 对象上调用 dispose() 会导致 JPanel 不呈现任何组件

> ID：13911743
> 
> 赞同：9
> 
> 时间：2012-12-17T09:49:39.017
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

在了解`dispose()`应该在使用后调用`Graphics`/`Graphics2D`对象之后，我开始改变我的游戏以合并它。

当我添加`g2d.dispose()`覆盖`paintComponent(Graphics g)`时`JPanel`，我添加的组件（类的扩展`JLabel`）未渲染时，我仍然能够单击它们等，但它们不会被*绘制*。

我用正常`JLabel`和`JButton`相同的效果进行了测试（尽管`JButton`在鼠标悬停时呈现）。

所以我的问题是为什么会发生这种情况？

这是一个 SSCCE 来演示：

![在此处输入图像描述](../Images/9a8cce8dbded3267d99761a3ca7c5381.png)

`dispose()`在取消注释对课堂的调用`paintComponent`后`MainMenuPanel`：

![在此处输入图像描述](../Images/972371d0a8c1d926460d2eda9ca326f0.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        try {
            initComponents();
        } catch (Exception ex) {
            Logger.getLogger(Test.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void initComponents() throws Exception {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        MainMenuPanel mmp = new MainMenuPanel();
        frame.add(mmp);

        frame.pack();
        frame.setVisible(true);
    }
}

class MainMenuPanel extends JPanel {

    //create labels for Main Menu
    private PopUpJLabel versusesModeLabel;
    private PopUpJLabel singlePlayerModeLabel;
    private PopUpJLabel optionsLabel;
    private PopUpJLabel helpLabel;
    private PopUpJLabel aboutLabel;
    //create variable to hold background
    private Image background;
    private Dimension preferredDimensions;
    public static String gameType;
    public static final String SINGLE_PLAYER = "Single Player", VERSUS_MODE = "VS Mode";

    /**
     * Default constructor to initialize double buffered JPanel with
     * GridBagLayout
     */
    public MainMenuPanel() {
        super(new GridBagLayout(), true);
        try {
            initComponents();
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, "Could not load main menu background!", "Main Menu Error: 0x004", JOptionPane.ERROR_MESSAGE);
            System.exit(4);
        }
    }

    /*
     * Create JPanel and its components
     */
    private void initComponents() throws Exception {

        //set prefered size of JPanel
        preferredDimensions = new Dimension(800, 600);

        background = scaleImage(800, 600, ImageIO.read(new URL("http://photos.appleinsider.com/12.08.30-Java.jpg")));

        //create label instances
        singlePlayerModeLabel = new PopUpJLabel("Single Player Mode");
        singlePlayerModeLabel.setEnabled(false);

        versusesModeLabel = new PopUpJLabel("Versus Mode");
        optionsLabel = new PopUpJLabel("Options");
        helpLabel = new PopUpJLabel("Help");
        aboutLabel = new PopUpJLabel("About");

        //create new constraints for gridbag
        GridBagConstraints gc = new GridBagConstraints();
        gc.fill = GridBagConstraints.HORIZONTAL;
        gc.ipady = 50;//vertical spacing 

        //add newGameLabel to panel with constraints
        gc.gridx = 0;
        gc.gridy = 0;
        add(singlePlayerModeLabel, gc);

        gc.gridy = 1;
        add(versusesModeLabel, gc);
        //add optionsLabel to panel with constraints (x is the same)
        gc.gridy = 2;
        add(optionsLabel, gc);
        //add helpLabel to panel with constraints (x is the same)
        gc.gridy = 3;
        add(helpLabel, gc);
        //add aboutLabel to panel with constraints (x is the same)
        gc.gridy = 4;
        add(aboutLabel, gc);
    }

    public static BufferedImage scaleImage(int w, int h, BufferedImage img) throws Exception {
        BufferedImage bi;
        //bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
        bi = new BufferedImage(w, h, img.getType());
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(img, 0, 0, w, h, null);
        g2d.dispose();
        return bi;
    }

    /*
     * Will return the preffered size of JPanel
     */
    @Override
    public Dimension getPreferredSize() {
        return preferredDimensions;
    }

    /*
     * Will draw the background to JPanel with anti-aliasing on and quality rendering
     */
    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);

        //convert graphics object to graphics2d object
        Graphics2D g2d = (Graphics2D) grphcs;

        //set anti-aliasing on and rendering etc
        //GamePanel.applyRenderHints(g2d);

        //draw the image as the background
        g2d.drawImage(background, 0, 0, null);

        //g2d.dispose();//if I uncomment this no LAbels will be shown
    }
}

class PopUpJLabel extends JLabel {

    public final static Font defaultFont = new Font("Arial", Font.PLAIN, 50);
    public final static Font hoverFont = new Font("Arial", Font.BOLD, 70);

    PopUpJLabel(String text) {
        super(text);
        setHorizontalAlignment(JLabel.CENTER);
        setForeground(Color.ORANGE);
        setFont(defaultFont);

        //allow component to be focusable
        setFocusable(true);

        //add focus adapter to change fints when focus is gained or lost (used for transversing labels with keys)
        addFocusListener(new FocusAdapter() {
            @Override
            public void focusGained(FocusEvent fe) {
                super.focusGained(fe);
                if (isEnabled()) {
                    setFont(getHoverFont());
                }
            }

            @Override
            public void focusLost(FocusEvent fe) {
                super.focusLost(fe);
                setFont(getDefaultFont());
            }
        });

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseEntered(MouseEvent me) {
                super.mouseEntered(me);
                if (isEnabled()) {
                    setFont(getHoverFont());
                }
                //call for focus mouse is over this component
                requestFocusInWindow();
            }
        });

    }

    Font getDefaultFont() {
        return defaultFont;
    }

    Font getHoverFont() {
        return hoverFont;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T09:52:25.447

问题是`Graphics`您使用的上下文`paintComponent`是由调用者（框架）创建和提供的，它也负责处理它。

您只需要`Graphics`在您自己实际创建它时进行处理（例如通过调用`Component.getGraphics()`）。在你的情况下，你不是在创建它，你只是在投射它，所以在这种情况下*不要调用 dispose 。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T09:52:38.157

因为`.dispose()`释放你的资源。是的，一切。

# javascript - Google geocoder API 结果保存到数组 -> 问题

> ID：13911746
> 
> 赞同：2
> 
> 时间：2012-12-17T09:50:12.360
> 
> 标签：javascript, arrays, google-geocoder

我在将地理编码器结果保存到数组时遇到了问题。我有三个文本输入字段，并且必须获取放入其中的位置的坐标。到目前为止这工作正常，但我不知道如何将这些结果保存到数组中以供以后处理。它似乎无法正常工作。到目前为止，这是我的代码：

```
var addresses = [];
        var count = 0;
        var address;
        var results = [];
        var geocoderResults = [];

function startQuery() {
            while (count <= 2) {
                var address = document.getElementById("query_input" + count).value;
                addresses[count] = address; 
                alert (address); 
                getCoordsFromAddress(addresses[count]);
                count ++;
            }       

            alert(results[0] + ", " + results[1] + ", " + results[2]);
            count = 0;

        }

        function getCoordsFromAddress(addressString){
            var geocoder = new google.maps.Geocoder();
            var addressObj = {address:addressString};

            geocoder.geocode(addressObj, onGeocoderReady);
        }

        function onGeocoderReady(geocoderResults, status){

            var lat = geocoderResults[0].geometry.location.lat();
            var lng = geocoderResults[0].geometry.location.lng();
            var formattedAddress = geocoderResults[0].formatted_address;
            var location =  lat+","+lng;
            alert(location);
            results[count] = location;

        } 
```

所以像这样，我将收到三个警报，首先显示位置名称，然后在工作流程结束时，我将收到三个警报，依次显示三个坐标，而不是位置/坐标/位置/坐标...无法像我尝试的那样将“位置”保存到数组中。但是我做错了什么？感谢帮助

# c - sscanf 也可以接受空格

> ID：13911753
> 
> 赞同：4
> 
> 时间：2012-12-17T09:50:35.933
> 
> 标签：c, scanf

有没有办法强制 sscanf 不允许额外的空格。

以下代码接受`"N_ 234"`，即使它应该只接受`"N_234"`：

```
int r;
unsigned b;
r = sscanf("N_ 234", "N_%u", &b); /* Returns 1 */ 
```

用 IAR 编译器测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:49:00.640

试试这个：

```
int r;
unsigned b;
char c[20];
r = sscanf("N_ 234", "N_%[0-9]", c); /* Returns 0 */
r = sscanf("N_-234", "N_%[0-9]", c); /* Returns 0 */
r = sscanf("N_1234", "N_%[0-9]", c); /* Returns 1 */
b = atoi(c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:17:42.923

可能是我的代码对你有帮助：

```
# define SIZE 100
int main(){
    int r;
    unsigned b = 0u;
    char s[SIZE] = {0};
    sscanf("N_234", "%[N_0-9]", s);
    r = sscanf(s,"N_%u",&b);
    printf("%u\n",b);

} 
```

`printf("%u\n",b);`如果没有空格且`r`为 1，则输出正确的值，否则`b`= 0 且`r`为 -1 (EOF)。

试试看！！

* * *

**编辑：** 存在 e 缓冲区溢出的可能性，但可以使用动态分配进行纠正。

# css - 我可以将用于边框宽度和颜色的 CSS 合二为一吗？

> ID：13911754
> 
> 赞同：0
> 
> 时间：2012-12-17T09:50:43.153
> 
> 标签：css

我想指定一个宽度为 1px 的顶部边框是红色的。我正在尝试这样，它似乎工作：

```
border-width: 1px 0px 0px;
border: 1px solid #ff0000; 
```

但是，有没有一种方法可以只使用一个 CSS 语句并将这两者结合起来？

请注意，我需要覆盖之前的边框宽度设置，所以我不能只使用border-top :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:55:06.953

根据[CSS3 规范](http://www.w3.org/TR/css3-background/#the-border-shorthands)：

> 'border' 属性是一个简写属性，用于为框的所有四个边框设置相同的宽度、颜色和样式。与简写的 'margin' 和 'padding' 属性不同，**'border' 属性不能在四个边框上设置不同的值。为此，必须使用一个或多个其他边框属性。**

但是，在您的情况下，设置只会`border-top`将其他边框保留为默认值，即`none`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:51:54.630

这应该有效：

```
border-top: 1px solid #f00; 
```

# c# - 从 DataGridView 中删除行（物理上）

> ID：13911758
> 
> 赞同：0
> 
> 时间：2012-12-17T09:50:51.937
> 
> 标签：c#, datagridview, delete-row

问题是，当您点击删除时，即使这些行已从视图中删除，如果您选中`Rows.Count`.

`DataTables`' '也会发生同样的情况`Delete(DataRow)`，这是我使用 Remove/RemoveAt 跳过的。

因此，在我从 a 中删除行之后`DataGridView`，如果我使用`DataSource`as`DataTable`并尝试将其导出（在这种情况下为 csv），则会抛出一条消息，指出它无法获取已删除行的信息（释义 - 抱歉，调试器抛出了母语）。

我可以想出一些棘手的方法来处理`DataGridViewRowCollection`,`DataGridViewSelectedRowCollection`和`DataTables`，但我真的需要一些更可靠、更简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:38:00.117

好的，解决方案在 DataRowState 上。为了摆脱所有手动删除的行，您必须执行以下操作：

```
DataTable t = (DataTable)dataGridView1.DataSource;

for (int i = t.Rows.Count - 1; i >= 0; i--)
{
    if (t.Rows[i].RowState == DataRowState.Deleted)
           t.Rows.RemoveAt(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T22:14:14.437

我在这里玩游戏有点晚了，但这非常容易。

首先，使用 WithEvents 关键字创建 DataTable：

```
Dim WithEvents theDataTable As New DataTable 
```

或者您可以使用 AddHandler 方法：

```
AddHandler theDataTable.RowDeleted, AddressOf theDataTable_RowDeleted 
```

然后处理 RowDeleted 事件：

```
Private Sub theDataTable_RowDeleted(sender As Object, e As DataRowChangeEventArgs) Handles theDataTable.RowDeleted
        theDataTable.Rows.Remove(e.Row)
End Sub 
```

希望有帮助。

# css - 放置在另一个 div 底部的 div 上，相对

> ID：13911762
> 
> 赞同：1
> 
> 时间：2012-12-17T09:51:00.993
> 
> 标签：css

我有 2 个 div，我希望其中一个相对地出现在另一个的底部。

```
<div class="div1">
 <div class="div2">
 </div>
</div> 
```

CSS 代码：

```
.div1
{
 position: relative; 
}
.div2
{
 position: relative; 
 bottom: 0;
} 
```

由于某种原因，div2 出现在 div1 的顶部。（改变绝对没有帮助，因为我希望 div2 在调整整个页面大小时用 div1 调整大小）。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:06:45.440

您需要将内部 div 上的 position:relative 更改为 position:absolute 并在 div 上添加一些宽度/高度：http: [//jsfiddle.net/H7kq6/1/](http://jsfiddle.net/H7kq6/1/)

```
.div1
{
 position: relative;
    background:pink;
    height:100px;
    width:200px;
}
.div2
{
    background:#ccc;
 position: absolute;
 bottom: 0;
    height:10px;
    width:200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:56:59.810

你是对的，但是根据你的 CSS 有一个错误，HTML 应该是这样的：

```
<div id="div1">
    first div
    <br /> 
    <br />
 <div id="div2">
     second div
 </div>
</div> 
```

[http://jsfiddle.net/saidbakr/3uRuM/](http://jsfiddle.net/saidbakr/3uRuM/)

# android - android twitter 与 twitter 客户端的集成

> ID：13911767
> 
> 赞同：0
> 
> 时间：2012-12-17T09:51:08.000
> 
> 标签：android, twitter, twitter4j

我使用[twitter4j](http://twitter4j.org/en/index.html)将我的 Android 应用程序与 Twitter 集成。一切顺利，但客户需要通过本地 Twitter 客户端（如果已安装）而不是浏览器进行操作。如您所知，与 Facebook 的集成具有这样的功能。

我几乎不能不说这是不可能的……而且我希望有人确认这一点（或解释如何与客户集成）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:35:46.277

我认为您的解决方案是正确的，但让我们看看其他选择（您也可以向您的客户解释）：

您可以发起发布一些文本（您的推文）并让用户处理客户端的意图。问题是您不能限制要启动的应用程序，因此用户可以选择，例如 Facebook、Whatsapp 等。选择此选项意味着您的分享按钮不会是“通过 Twitter 分享”或类似的东西，因为您'让用户在任何他想要的地方分享文本按钮应该简单地说'分享'（我认为这是最好的选择）。

如果您不想朝那个方向发展，我建议您向您的客户解释（如果可以的话）Android 有太多 twitter 应用程序，如果用户有多个应用程序，您不知道他会使用哪个.

我希望这能解决你的问题（对不起我的英语不好）。

# sql-server - 如何在表格上查找有效日期

> ID：13911770
> 
> 赞同：0
> 
> 时间：2012-12-17T09:51:20.613
> 
> 标签：sql-server, tsql

如何查找天气列包含有效日期或不喜欢

`'00-jan-00'`***无效***且 ***有效***_`'01-jan-1900'`

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T09:53:29.773

```
Select * from Table where IsDate(Column)=1 
```*

# c# - 反转表达式 >

> ID：13911775
> 
> 赞同：5
> 
> 时间：2012-12-17T09:51:36.847
> 
> 标签：c#, lambda, expression

我正在编写表达式扩展方法，该方法必须反转`bool`-typed lambda 表达式。

这是我正在做的事情：

```
public static Expression<Func<T, bool>> Inverse<T>(this Expression<Func<T, bool>> e)
{
    return Expression.Lambda<Func<T, bool>>(Expression.Not(e));
} 
```

但这引发了一个例外，即`unary operator is NOT not defined for the type Func<int,bool>`. 我也试过这个：

```
public static Expression<Func<T, bool>> Inverse<T>(this Expression<Func<T, bool>> e)
{
    return Expression.Lambda<Func<T, bool>>(Expression.Not(e.Body));
} 
```

但是得到这个：`Incorrent number of parameters supplied for lambda declaration`.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T09:51:36.847

幸运的是，这是通过这种方式解决的：

```
public static Expression<Func<T, bool>> Inverse<T>(this Expression<Func<T, bool>> e)
{
    return Expression.Lambda<Func<T, bool>>(Expression.Not(e.Body), e.Parameters[0]);
} 
```

这表明该`.Lambda<>`方法需要一个参数，我们需要从源表达式中传递它。

# iphone - 如何在状态栏上添加按钮或视图

> ID：13911782
> 
> 赞同：1
> 
> 时间：2012-12-17T09:52:07.657
> 
> 标签：iphone, objective-c, ios, statusbar

我想在 iPhone 的状态栏上添加一个按钮或自定义视图，

如果苹果不允许自定义状态栏，则可以添加任何按钮或查看状态栏...

有没有人对此有想法，请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T09:57:48.370

哟可以获得模仿 Reeders 状态栏覆盖的静态库，你可以在这里找到它

[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)

`UIWindow`或者只需使用以下覆盖创建一个简单的子类`initWithFrame`：

```
@interface ACStatusBarOverlayWindow : UIWindow {
}
@end

@implementation ACStatusBarOverlayWindow
- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Place the window on the correct level and position
        self.windowLevel = UIWindowLevelStatusBar+1.0f;
        self.frame = [[UIApplication sharedApplication] statusBarFrame];

        // Create an image view with an image to make it look like a status bar.
        UIImageView *backgroundImageView = [[UIImageView alloc] initWithFrame:self.frame];
        backgroundImageView.image = [[UIImage imageNamed:@"statusBarBackgroundGrey.png"] stretchableImageWithLeftCapWidth:2.0f topCapHeight:0.0f];
        [self addSubview:backgroundImageView];
        [backgroundImageView release];

        // TODO: Insert subviews (labels, imageViews, etc...)
    }
    return self;
}
@end 
```

有关更多信息，请参阅此链接...

[在 iphone 中添加查看状态栏](https://stackoverflow.com/questions/2833724/adding-view-on-statusbar-in-iphone)

我希望这可以帮助你...

# javascript - javascript 包含的文件在 AJAX 重新加载后消失了

> ID：13911784
> 
> 赞同：1
> 
> 时间：2012-12-17T09:52:26.077
> 
> 标签：javascript, jquery

我有一个`DIV`通过`JQUERY`Ajax 调用刷新的页面，但随后我丢失了`javascript`包含在“head”页面中的所有代码。我需要将它们包括两次吗？在我看来，这对性能不利，因为您必须`javascript`在它已经在客户端页面上时再次加载它。如何包含文件以便在 Ajax 刷新后它们也可用

```
$(document).ready( function() {
    $("#prijzen_huidige_jaar").submit(function(event) {    
    /* stop form from submitting normally */    
    event.preventDefault();      
    $.ajax({
    type:"POST",
    url:"prijzen_huidige_jaar_test.php",
    cache: false,                   
    data: $("#prijzen_huidige_jaar").serialize(),
    success:function(data){
        $("#test").replaceWith(data);
    }       
});
});
}); 
```

包含在主页中：

```
<script type="text/javascript" src="https://localhost/include_bestanden/javascript/prijzen.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:52:39.830

您应该使用类标识符，而不是`click`在您的 JS 中使用`on`，因为这将适用于稍后通过 AJAX 添加的元素。

所以而不是：

```
$("input[name$='vraag_afwijkende_prijzen']").click(function(){          
    if($(this).val() == 1){
        $("#instructie_afw_prijzen_tekst").html(vraag4_ja);
        $("#afwijkende_prijzen_vak").show('slow');
        $("#afwijkend_1").show('slow');
    }
    //etc 
```

尝试类似：

```
$(document).on("click", ".vragen-radio", function() {
     if ($(this).attr("name") == 'vraag_afwijkende_prijzen' && $(this).val() == 1) {
        $("#instructie_afw_prijzen_tekst").html(vraag4_ja);
        $("#afwijkende_prijzen_vak").show('slow');
        $("#afwijkend_1").show('slow');
     }
     //etc 
```

你可以在这个问题中阅读它：[Why use jQuery on() instead of click()](https://stackoverflow.com/questions/10082031/why-use-jquery-on-instead-of-click)

# css - 什么是设备像素比？

> ID：13911786
> 
> 赞同：3
> 
> 时间：2012-12-17T09:52:43.680
> 
> 标签：css

据我所知，它是“抽象”分辨率与设备物理分辨率之间的比率。所以我测试它（在HTC Desire上），物理分辨率是`480x800`，它的注销比率是`1.5`。我加入了一些元素，但它仍然需要精确`480px`的宽度来填充我天真的认为它需要“320px”的视口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:00:30.940

来自[http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html](http://www.quirksmode.org/blog/archives/2012/07/more_about_devi.html)，作者讨论了不同移动设备的 devicePixelRatio 差异：

> 在 iOS Retina 设备上，screen.width 给出了 dips 的宽度。因此，视网膜和非视网膜 iPad 都在纵向模式下报告 768。在三款 Android 设备上，screen.width 以物理像素为单位给出宽度；分别为 480、720 和 800。设备上的所有浏览器都使用相同的值。（想象一下，如果同一设备上的某些浏览器使用 dips 和其他物理像素！）

这导致作者得出以下结论：

> *   在 iOS 设备上，将 devicePixelRatio 乘以 screen.width 以获得物理像素数。
> *   在 Android 和 Windows Phone 设备上，将 screen.width 除以 devicePixelRatio 以获得下降次数。

在您的情况下，重要的是屏幕宽度，简单明了。DIP 的计算是由设备负责的，而不是您作为开发人员。如果设备想要补偿不同的像素比率，它将为您提供 DIP 宽度并给出比率。如果它认为页面应该以未修改的原生像素分辨率显示，它将为您提供该宽度。这篇文章的作者还得出了以下我觉得有趣的结论：

> Apple 添加像素是因为它想让显示更清晰、更流畅，而 Android 供应商添加像素是为了在屏幕上塞进更多的东西。

无论如何，请使用浏览器为您提供的宽度并将其留给设备进行补偿。

# abap - 如何通过 Native SQL 插入和查看日期值？

> ID：13911792
> 
> 赞同：1
> 
> 时间：2012-12-17T09:52:59.773
> 
> 标签：abap, native-sql

我使用以下 ABAP 代码插入订单：

```
EXEC SQL.
    INSERT INTO order VALUES('1','17/12/2012') //order id,order date
ENDEXEC. 
```

但是我遇到了运行时错误。我尝试将日期更改为`SYSDATE`

```
EXEC SQL.
    INSERT INTO order VALUES('1',SYSDATE)
ENDEXEC. 
```

错误已修复，但当我尝试从订单表中选择订单日期时无法获得任何值。

```
DATA: oID(255).
DATA: oDate(255).
//select a order details where order id='1', and assign to oID,oDate
Write: /1 'Order date: ',oDate.
Write: /1 'Order ID: ',oID. 
```

输出：

```
Order date: 
Order ID: 1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T11:23:47.860

如果要使用 Native SQL 操作数据，则必须使用底层 DBMS 的原生 SQL 方言。如果您不知道这一点，则根本不应该使用 Native SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T15:44:08.563

在变量前面放置一个冒号 (:)：

```
EXEC SQL.
  INSERT INTO order VALUES('1', :sy-datum)
ENDEXEC. 
```

# puppet - Puppet - 如何将模块应用于 puppet 客户端节点？

> ID：13911798
> 
> 赞同：15
> 
> 时间：2012-12-17T09:53:41.977
> 
> 标签：puppet

刚刚从 Puppet 开始，对这个世界来说真的很陌生。

我有

*   CentOS 6 傀儡大师
*   CentOS 6 木偶客户端

在 Master 中有一个模块：

```
 puppet module list
/etc/puppet/modules
âââ mstanislav-yum (v1.0.0) 
```

所以我想将相同的模块应用于我的 puppet 客户端，但我不能或者我不知道为什么

```
root@puppetclient: puppet agent --test
Info: Retrieving plugin
Info: Caching catalog for puppetclient
Info: Applying configuration version '1355737643'
Finished catalog run in 0.10 seconds 
```

但是客户端没有任何更改：-/

任何的想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T22:10:31.387

您尚未声明模块（将其分配给您的节点）...

将此添加到 site.pp：

```
node 'fqdn of client' {
  include yum
} 
```

然后，您可以运行`puppet agent -t`以查看它的运行情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T10:02:41.760

您可以使用以下命令查看详细信息输出

> 傀儡代理 --test --trace

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-10T19:37:52.497

尝试使用 Hiera 和 yaml 文件，我认为它更灵活，更有条理。

编辑 site.pp 文件：

```
node "default" {
    hiera_include('classes')
} 
```

之后，您可以简单地调用每个特定 node.yaml 文件中的类：

```
classes:
  -class1
  -class2 
```

我在Ubuntu上使用它，工作正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T18:53:16.650

您可以尝试 --noop 模式（试运行模式）。

```
puppet agent --server=YOUR_PUPPET_SERVER_NAME --onetime --no-daemonize --verbose --noop 
```

这将显示它应该做的改变，但实际上不会改变任何东西。删除 --noop 将完成所有这些更改。

检查文档以了解上述命令中其他选项的说明。 [http://docs.puppetlabs.com/man/agent.html](http://docs.puppetlabs.com/man/agent.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-11T16:51:38.600

将模块应用于节点的两种主要方法是将以下之一添加到`site.pp`

```
node 'node <certname> (normally the fqdn)' {
    require <module name>
} 
```

或者

```
node 'node's <certname>' {
    include <module name>
} 
```

然后在节点中运行`puppet agent --test`

`require`类似于 include 但它创建依赖关系并允许多次声明相同的类，如果您想要重叠的角色类，这很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-08T11:50:05.020

1.  首先从 puppet forge 安装模块
2.  打开 site.pp 并添加以下行

> ```
> node default {
>        # include module_name
>          include apache
> } 
> ```

然后在你的傀儡代理上运行以下命令。

> sudo puppet agent --test

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-04T16:44:05.617

如果您在另一个不是 site.pp 的位置添加了节点声明（这是推荐的方法），那么请记住将“导入”配置添加到 site.pp，这将引用节点清单。

这就是我的配置的样子。带有节点 DIR 和 site.pp 文件的主清单 DIR：

```
drwxr-xr-x. 3 root root 4096 May 19 07:23 nodes
-rw-r--r--. 1 root root   62 Jun  4 16:31 site.pp 
```

这是我的节点 DIR 中的节点声明：

```
node 'fqdn of client' {
  include yum
} 
```

最后，主清单 DIR 中的 site.pp 将按如下方式导入节点：

```
import 'nodes/*.pp'

node default { } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-22T20:58:01.443

您必须创建一个包含要应用的类的“包含”的节点定义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-08T21:49:31.887

跑

```
puppet apply -e "include mstanislav-yum" 
```

如果您想自己运行该模块，尽管在您的 site.pp 清单中包含节点定义更为常见。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-09-23T09:14:06.273

我的作品中的活生生的例子：

```
node 'client.io' {

class { '::selinux':
mode => 'disabled',
type => 'targeted',
}

class { 'zabbix::agent':
server => '192.168.245.11',
serveractive => '192.168.245.11',
}

include firewall
include mysql::server

} 
```

# asp.net-mvc - 处理的果园异常仍在冒泡

> ID：13911799
> 
> 赞同：2
> 
> 时间：2012-12-17T09:53:47.627
> 
> 标签：asp.net-mvc, error-handling, orchardcms

在我的自定义 Orchard 模块中，我在控制器操作中编写了一些 ftp 客户端代码，该操作在登录期间碰巧抛出了自定义 FtpException。我已将登录代码包装在 try-catch 中，如果出现错误，我会向视图发送通知消息。问题是错误仍在冒泡并显示标准的“糟糕。出了点问题......对不起”Orchard 错误消息。这是我要包装的代码：

```
 try
        {
            ftpClient.Login();
            ftpClient.Upload(fileName);
        }
        catch (FtpException ex)
        {
            services.Notifier.Error(T("There was an error sending the file - {0}.", ex.Message));
            return RedirectToAction("Edit", "Project");
        }
        finally
        {
            ftpClient.Close();
        }

        services.Notifier.Information(T("File uploaded successfully."));
        return RedirectToAction("Edit", "Project"); 
```

如果我查看 Orchard 日志，我会看到从`ftpClient.Login()`. catch块中的代码被执行了，所以我知道异常已经被处理了。麻烦的是，Orchard 仍然显示未处理的异常行为。如何阻止异常冒泡，以便我的 RedirectToAction 会触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:58:06.587

正如评论中所讨论的，可能会发生以下情况：

1.  执行进入`try`, 并调用`Login()`, 并抛出异常。
2.  执行跳转到你的 catch 块，它试图调用`Close()`你的`ftpClient`对象。
3.  我不确定 的确切类型，但调用一个可能不一定打开的实例（首先通过）会引发另一个异常，这是`ftpClient`有道理的，它是由 Orchard 的异常处理程序捕获的.`Close()``Login`

我会首先在 FTP 客户端类中查找（或添加）某种`IsOpen`属性，或者将调用包装`Login`在单独的 try/catch 中，以便区分登录失败和其他失败。或者，如果您可以访问源代码，`Login`则如果失败，您可能会抛出不同类型的异常。

# android - 位图转换小 jpg 图像而不是重图像

> ID：13911804
> 
> 赞同：-2
> 
> 时间：2012-12-17T09:54:09.060
> 
> 标签：android

嗨，我终于得到了问题，这是我之前发布的代码[https://stackoverflow.com/questions/13910206/sqllite-database-work-in-emulator-but-not-work-in-real-device](https://stackoverflow.com/questions/13910206/sqllite-database-work-in-emulator-but-not-work-in-real-device) 当我运行时我在模拟器中的应用程序工作正常并加载像 30 kb 40 kb 50 kb 一样小的图像保存和检索工作正常但是当我在读取设备图像中运行我的应用程序时像 700 kb 800 kb 这样很重所以不是保存和检索应用程序停止没想到我该怎么办？？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:10:34.957

我认为您一定是遇到了**Out of Memory Error**。这是因为您正在渲染超过 500 KB 的图像。每当将此类图像渲染为位图时，它们在堆中占用 2 到 5 MB 大小。因此，您必须创建一个样本大小，以便根据您的屏幕分辨率显示图像。

Android 开发者有**Loading Large Bitmaps Efficiently**一文。

*参考*

1) [http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#read-bitmap](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html#read-bitmap)

# javascript - asp.net 中的 JavaScript 图表控件

> ID：13911806
> 
> 赞同：0
> 
> 时间：2012-12-17T09:54:11.777
> 
> 标签：javascript, asp.net, database

需要你的帮助。如何在 javascript 中从 asp.net 中的 sql 传递值。

就像我用 java 脚本开发的几个条形图一样。但是 X 和 Y 轴的值是以编程方式编写的，但我想要来自数据库（SQL）的值。

我怎样才能做到这一点。

# forms - 谷歌表格：单独的调查答案和受访者的联系信息

> ID：13911809
> 
> 赞同：0
> 
> 时间：2012-12-17T09:54:28.587
> 
> 标签：forms, google-sheets, survey

我想做一个调查并让人们回答我会提供奖品。我需要将调查的答案和受访者的联系方式分开，以便可以匿名回答调查。

我曾想过自己用 php 编写整个代码，但认为使用 Google 表单会更容易。这些选项中的任何一个是否可以在 Google 表单中使用：

1.  将所有调查答案收集到一个电子表格中，并将联系数据（最后一个表单页面上的单独问题）收集到另一个电子表格中？

2.  像往常一样将表格答案收集到电子表格中，最后在“感谢信”上将受访者引导到另一个电子表格？我不知道如何在谷歌表单中放置一个 url 链接。是否可以？

3.  在“感谢信”上有一个电子邮件链接，告诉他们给我发一封电子邮件以获得奖品？

感谢您提供给我的任何提示或答案:-)

（Ps 我试图将我的问题标记为 google-form，但该标记不可用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:28:45.127

选项 1 无法完成 - 所有表单响应都保存在同一张纸上。

选项 2 很简单——在编辑表单时，选择更多操作 > 编辑确认并输入类似“您的回复已被记录。访问[http://www.example.com/](http://www.example.com/)进入抽奖”之类的内容。该 URL 可在确认对话框中单击。链接也可以放在表单的前导段落中——它是表单标题字段之后的多行文本框。

选项 3 同上。

您可能还想查看 Bryan 的 FORMS+ 模板 (https://plus.google.com/u/2/107003645867482308046/about)。

干杯——海德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T05:51:56.027

我知道，这个线程不是最新的，但它也描述了我的问题。

问题是，正如我在感谢信箱中提供的新表格链接一样，新电子表格将收集带有新时间戳的名称，该时间戳与“匿名”数据相距不远，因此绝对不是匿名的...

有没有办法过滤或跳过调查中的时间戳？

# .net - 调用实体框架时 System.Timers.Timer 未触发

> ID：13911814
> 
> 赞同：1
> 
> 时间：2012-12-17T09:54:45.767
> 
> 标签：.net, vb.net, entity-framework, windows-services

我有一个用 VB.NET 编写的 Windows 服务，它使用 System.Timers.Timer 实例来执行一些周期性任务。我刚刚使用实体框架 4.3.1 从 .NET 迁移到 .NET 4.5。只要不使用实体框架，计时器的“已用”事件处理程序就会正常启动。使用实体框架时，事件处理程序不会触发。它只是，不火。没有抛出异常，没有事件日志消息，什么都没有。使用 .NET 4 版本时不会发生这种情况。有人对此有什么建议吗？

```
Dim testTimer As New System.Timers.Timer

Protected Overrides Sub OnStart(ByVal args() As String)
    Try
        testTimer.Interval = 2 * 1000 * 60
        AddHandler testTimer.Elapsed, New System.Timers.ElapsedEventHandler(AddressOf TestTimerMethod)
        testTimer.Enabled = True
  Catch ex As Exception
        'A method logging the respective exception
        LogException(ex)
    End Try
End Sub

Protected Sub TestTimerMethod()
    Try
        testTimer.Enabled = False
        UtilitiesProvider.GetUtilitiesProvider.LogWriter.Write("Start of method")

        'If I remove the next line, the event handler is fired as it should be...
        Dim dbContext As New DASTADbContext

        'mock some time consuming tasks
        Dim i = 0
    Catch ex As Exception
        'Log the exception
        UtilitiesProvider.GetUtilitiesProvider.LogException(ex)
    Finally
        testTimer.Enabled = True
    End Try

End Sub 
```

请注意以下几点： 1\. 我在 x86 模式下构建整个解决方案。我不知道这是否相关。2\. 我使用 VS2012 构建 3\. 我使用日志消息确认了上述场景，还通过调试附加到相应进程的整个服务 4\. 我引用了为运行时版本 .NET 4 构建的实体框架 4.3.1

提前谢谢你，潘泰利斯·纳齐亚瓦斯

编辑：虽然这仍然是一个问题，但我想我找到了该怪谁。由于某些无法解释的原因，用于创建 Windows 服务设置项目的 Installshield Limited Edition 没有按预期工作。当我使用 Windows 服务的主要输出来创建安装项目时，由于某些无法解释的原因，Installshield LE 添加了对使用 Entity Framework 4 的旧且现在未使用的 DLL 的引用。我认为该错误是由于引用 Entify Framework 4 和同时使用实体框架 4.3。我已同时切换到 VS2012、.NET 4.5 和 InstallShield LE。因此，我错误地认为 .NET 4.5 是罪魁祸首。我认为这仍然应该被视为一个错误，因为我从未遇到过异常或表明我做错了什么的事情。计时器，

# javascript - 使用 PHPStorm 压缩 CSS 和 JS 代码？

> ID：13911815
> 
> 赞同：17
> 
> 时间：2012-12-17T09:54:46.797
> 
> 标签：javascript, css, phpstorm

我正在使用 PHPStorm。对于 Web 开发人员来说，这是一款非常棒的软件。

当我想在 PHPStorm 中压缩我的 CSS 和 JS 文件时，我在 PHPStorm 中找不到任何选项。

所以，请告诉我如何在 PHPStorm 中压缩 CSS 和 JS 代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-17T10:00:20.520

找到[Assets Compressor](https://plugins.jetbrains.com/plugin/6740?pr=)插件。看看有没有帮助。

编辑 - 更改为@spade 指出的新链接

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-15T09:15:21.383

PHPStorm 支持[File Watchers](https://www.jetbrains.com/help/phpstorm/2016.3/minifying-css.html)的缩小。它支持与“开箱即用”的 YUI 压缩器集成，但它有一些问题，例如，[与 calc() 函数](https://github.com/yui/yuicompressor/issues/59)。我的解决方案是使用[minifier](https://www.npmjs.com/package/minifier)：

1.  重复安装[JetBrains 手册中的 Node.js 和 npm 的步骤](https://www.jetbrains.com/help/phpstorm/2016.3/minifying-css.html)
2.  在手册中安装像 YUI Compressor 这样的 minifier ( `npm install minifier`)
3.  缩小器文档说：“通过 npm 安装将在通常的位置创建一个二进制文件（缩小）”，但我没有找到它（也许它不是在 Windows 上创建的）。`Index.js`文件可以通过`node index.js`命令执行，但 PHPStorm 不保持这种方式（“请设置程序运行！”将抛出错误）。所以我创建了具有以下内容的 .bat 文件：

.

```
echo off
node path\to\minifier\index.js %* 
```

4.  然后在输入字段的 PHPStorm 观察程序设置中，`Program`我们设置 .bat 文件的路径。请注意，Minifier 使用不同的方法来设置输出路径，因此我们必须更改`Arguments`字段：`$FileName$ --output $FileNameWithoutExtension$.min.css`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:02:56.333

请参阅相关的功能请求：

*   [WEB-2138](http://youtrack.jetbrains.com/issue/WEB-2138)支持自动 JavaScript 和 CSS 缩小
*   [WEB-2125](http://youtrack.jetbrains.com/issue/WEB-2125)部署前和部署后命令

目前，您可以使用@Pushpesh 建议的第三方工具/插件。

# objective-c - 表单模式视图控制器不会在 iOS6 中关闭

> ID：13911818
> 
> 赞同：0
> 
> 时间：2012-12-17T09:54:57.853
> 
> 标签：objective-c, ios, uiviewcontroller, ios6

我试图在 iOS6 中关闭表单模式视图。它在 iOS5 中完全正常，但在 6 中失败。（项目在两者中都使用 ARC）。

这是失败时的堆栈：

```
#0  0x0175a267 in objc_msgSend_stret ()
#1  0x006d55bd in -[UIView(Geometry) bounds] ()
#2  0x006cc707 in -[UIWindow _updateCurrentTintView] ()
#3  0x0075117b in -[UITransitionView transition:fromView:toView:removeFromView:] ()
#4  0x0097df44 in __91-[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]_block_invoke_0236 ()
#5  0x0097d4eb in -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:] ()
#6  0x0077ba11 in -[UIViewController _dismissViewControllerWithTransition:from:completion:] ()
#7  0x0077aecd in -[UIViewController dismissViewControllerWithTransition:completion:] ()
#8  0x0077bbdb in -[UIViewController dismissViewControllerAnimated:completion:] ()
#9  0x00056a50 in -[HandDeviceToAssessorViewController dismiss:] at <directory of file> 
```

视图控制器是这样创建的：

```
+ (HandDeviceToAssessorViewController *)handDeviceToAssessorWithWellDoneView
{
    static dispatch_once_t pred;
    static HandDeviceToAssessorViewController *viewController = nil;

    dispatch_once(&pred, ^(void)
                  {
                      viewController = [[HandDeviceToAssessorViewController alloc] initWithNibName:@"WellDoneHandDeviceToAssessorView" bundle:[NSBundle mainBundle]];
                  });

    viewController.modalPresentationStyle = UIModalPresentationFormSheet;
    return viewController;
} 
```

并用代码显示：

```
HandDeviceToAssessorViewController *handBackModal = [HandDeviceToAssessorViewController handDeviceToAssessorWithWellDoneView];
    handBackModal.delegate = self;
    [self presentViewController:handBackModal animated:YES completion:nil]; 
```

视图控制器被解雇了。

```
- (IBAction)dismiss:(id)sender
{
    if ([self.delegate respondsToSelector:@selector(viewWillClose)])
    {
        [self.delegate viewWillClose];
    }

    [self.presentingViewController dismissViewControllerAnimated:YES completion:^(void)
    {
        if ([self.delegate respondsToSelector:@selector(viewDidClose)])
        {
            [self.delegate viewDidClose];
            self.delegate = nil;
        }
    }];
} 
```

我怀疑/希望这不是 iOS6 中的错误。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:02:59.480

尝试将`dismissViewController`消息发送到`self`而不是`self.presentingViewController`. 它将被转发到正确的视图控制器。

希望这可以帮助！

# php - 从数据库中按顺序显示带有标题的图像

> ID：13911820
> 
> 赞同：0
> 
> 时间：2012-12-17T09:55:01.463
> 
> 标签：php, css, image, alignment

我想要的只是以一种非常简单的方式显示我的图像，就像谷歌搜索图像一样。我有图像，`width:71px; height:59px`......在图像下我想要图像`center`的标题，并以这种方式在一行中显示多个图像，然后在第二行中显示下一个。

如何为`CSS`这一切做好准备？

这是我到目前为止所拥有的，用于显示来自数据库的图像，但此时，它将我的图像和我的标题显示在“一列”中，而不是并排显示。

PHP代码：

```
<div class="thumb">

        <?php
        $sql_res=mysql_query("SELECT * FROM content WHERE category =      
                    'thumb'   ORDER BY uid ASC LIMIT 25");
        while($row=mysql_fetch_array($sql_res)){
        $fname=$row['link'];
        $lname=$row['title'];
        $img=$row['img'];
        $categorie=$row['category'];
        $str = '<a href="' . $row['link'] . '.php">' . substr($row  
['title'],0,11)  . '</a>';?>
        <a href="<?php echo $fname ?>.php"><img src="http://www.website.ro/
images/<?php echo $img; ?>.jpg"/><?php echo $str; ?></a><?php } ?>

</div> 
```

代码：

```
.thumb{
width:71px;
float:left;
margin: 0px 0px 0px 5px;
text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:02:58.300

为了在一行上显示多个图像并使其看起来不错，您需要确保所有图像及其标题的宽度和高度都相等。

因此，您需要一个容器（div）来保存单个图像（图像和标题）的内容，然后将该 div 向左浮动，并在右侧留有边距。

```
<div class='container'>
  <img src='..' alt='image' />
  <div>Image title</div>
</div> 
```

风格：

```
.container { width:81px; text-align:center; float:left; margin:0px 10px 10px 0px; padding:5px 0 5px 0; }
.container img { width:71px; height:51px; display:block }
.container div { overflow:hidden; width:100%; height:20px; } 
```

现在您可以将每个图像放在这样的块中，它将填充每个图像+标题具有相同宽度和高度的页面，因此它将以漂亮的行和列显示

# datetime - 用户无法删除旧 Infragistics UltraGrid 中的 DateTime

> ID：13911822
> 
> 赞同：0
> 
> 时间：2012-12-17T09:55:08.930
> 
> 标签：datetime, infragistics, dbnull, ultrawingrid

我现在正在开发一个使用 Infragistics UltraGrid v3.1 的旧应用程序。

在 UltraGrid 中，用户可以输入日期（带有掩码 ____/____/_____）。如果单元格中已经有日期并且用户想要清除它，则当他离开单元格时会出现错误（“无法更新数据值：编辑器中的值无效”）。当数据库中有 DBNull 值时，UltraGrid 只显示一个空单元格。如果我单击一个空的日期单元格，则会出现掩码，当我离开此单元格时就没有问题（即使我选择了整个掩码并将其删除）。一旦我输入了一些值（或者已经放置了一个值），问题就开始了。

我希望用户能够清除日期，以便单元格再次为空。

我试图将 ultragrid_Error 事件中活动单元格的值设置为 DBNull.Value 。但后来我得到了这个例外：

内部错误：无法获得屏蔽的编辑器值。

内部异常：输入与掩码不匹配。

有什么想法可以解决这个问题吗？

# javascript - 在 iphone/ipad 网络浏览器 safari 中选择和突出显示文本不起作用

> ID：13911823
> 
> 赞同：1
> 
> 时间：2012-12-17T09:55:09.717
> 
> 标签：javascript, html, ipad, highlighting, mobile-browser

可能重复：[使用 Javascript 更改所选文本的 CSS](https://stackoverflow.com/questions/3223682/change-css-of-selected-text-using-javascript)

我尝试了上面链接中的代码，但没有得到 iPad 浏览器突出显示所选文本的结果。

```
function makeEditableAndHighlight(colour) {
    var range, sel = window.getSelection();
    if (sel.rangeCount && sel.getRangeAt) {
        range = sel.getRangeAt(0);
    }
    document.designMode = "on";
    if (range) {
        sel.removeAllRanges();
        sel.addRange(range);
    }
    // Use HiliteColor since some browsers apply BackColor to the whole block
    if (!document.execCommand("HiliteColor", false, colour)) {
        document.execCommand("BackColor", false, colour);
    }
    document.designMode = "off";
}

function highlight(colour) {
    var range, sel;
    if (window.getSelection) {
        // IE9 and non-IE
        try {
            if (!document.execCommand("BackColor", false, colour)) {
                makeEditableAndHighlight(colour);
            }
        } catch (ex) {
            makeEditableAndHighlight(colour)
        }
    } else if (document.selection && document.selection.createRange) {
        // IE <= 8 case
        range = document.selection.createRange();
        range.execCommand("BackColor", false, colour);
    }
} 
```

它可以在 safari、chrome 等桌面浏览器中完美运行。但是在 iPad Safari 浏览器中，选择的方式与任何桌面浏览器中的文本选择都不相似，而且我没有得到突出显示文本的结果。

![在此处输入图像描述](../Images/aa76ad5374b05a4140df1831bf122343.png)

我的简单 HTML 代码是：

```
 <div><h1>Introduction </h1></div>

     <div>          
            <p>This is an example: </p>
            <p>in other paragraph.</p> 
            <p>one more paragraph  </p>

            <button type="button" onclick="highlight('yellow')">Click Me!</button>
     </div> 
```

请建议是否需要进行任何更改或需要包含任何其他 api。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:00:59.637

您必须`highlight`通过-event 触发`touchend`-function（和 +`click`用于桌面支持）：

**jQuery**

```
$('button').on('click touchend', function() {
    highlight('yellow');
}); 
```

**[小提琴](http://jsfiddle.net/qnu6a/)**

# php - $this->id 和 $id 有什么区别

> ID：13911826
> 
> 赞同：0
> 
> 时间：2012-12-17T09:55:14.247
> 
> 标签：php, this

$this->id 和 $id 有什么区别。

```
class Test{
 public $id;

 function Test(){
  $this->id = 1;
 }
} 
```

===

```
class Test{
 public $id;

 function test(){
  $id = 1;
 }
} 
```

如何从其他类中获取变量？

```
class TestA{
 public $test;

 function TestA(){
  $this->test = new Test();
  echo $this->test->id;
 }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T09:57:19.203

`php`在某种程度上不起作用`C++`，`Java`并且`C#`起作用。

在 php 中，您应该**始终**使用`$this`引用和`->`运算符来访问实例变量。

所以第一个代码分配`1`给实例`id`属性，第二个代码分配`1`给一个局部`$id`变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T09:57:13.537

您的示例没有区别，但是`$this->variable_name`当您的方法中有同名的内部变量时， using 会很有用：

```
class test{
 public $id;

 function test($id){
  $id = 1;        // method parameter
  $this->id = 2;  // object member
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:57:46.653

在您的样本中，确实没有区别。您也可以通过使用 限定成员变量来访问成员变量，因为`$this`所有成员变量都属于`$this`. 正如 MarinJuraszek 所说，考虑范围很重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T09:58:22.540

`$this->id`指的是一个类属性，它可以在类方法中访问，也可以通过它的对象访问。

`$id`只是一个可以在创建它的本地范围内访问的变量。

# java - 为 Maven Google App Engine 项目寻找原型

> ID：13911829
> 
> 赞同：3
> 
> 时间：2012-12-17T09:55:42.323
> 
> 标签：java, google-app-engine, maven, maven-archetype

我正在使用 Eclipse 和 m2eclipse 插件为 Google App Engine 创建一个新的 Java 项目。创建新的 Maven 项目时，Eclipse 找不到原型

> com.google.appengine.archetypes：留言簿原型。

我可能应该添加一个新目录，但是哪个？（谷歌搜索没有帮助）。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:33:48.150

尝试搜索留言簿原型而不是完整路径。您应该在 Eclipse 显示的列表中看到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T10:01:13.467

查看以下链接：
1\. [how-do-i-perform-an-archetype-create-from-eclipse](http://www.avajava.com/tutorials/lessons/how-do-i-perform-an-archetype-create-from-eclipse.html)
2\. [Eclipse 根本找不到 playn 原型](https://groups.google.com/forum/?fromgroups=#!topic/playn/D-wgU5f1ZzU)

# http - 哈希文件服务于静态内容 Web 服务器

> ID：13911839
> 
> 赞同：0
> 
> 时间：2012-12-17T09:56:14.253
> 
> 标签：http, caching, static, cdn

我正在编写自己的静态 Web 内容交付例程。对于缓存，我计划在 URL 中包含哈希值，例如

/static/file.MD5HASH.png

我正在使用静态的编译语言进行开发。我读了 [https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#cachedstaticfilesstorage](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#cachedstaticfilesstorage) 和 [https://gist.github.com/3207357](https://gist.github.com/3207357)

现在我的心理问题是如何有效地确定文件的哈希值？我不会在每次向服务器请求时计算哈希值。所以我需要一些缓存。

我可以编写一个帮助程序，它采用静态内容的路径，递归计算哈希并将结果存储为

文件名.png 哈希

在一个名为 .cache.hash.lookup 的文件中。该文件在 Web 服务器启动时加载并在每个请求上声明，因此当即将提供静态文件时，它将在缓存中查找它，如果缓存已过时，则重新加载缓存。

这可行吗？请我不需要建议如何使用框架 X 来完成它，因为我想理解它并编写自己的例程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:48:46.080

阅读您的链接，想法是存储同一资源的多个版本，因此在插入新文件时会向文件名添加哈希。

您的 HTTP 服务器可能很笨，只按名称查找文件。（我看到的另一个优点是您可以盲目地用“304 Not changed”响应任何条件请求，因为文件名中的哈希值充当 etag。）

还是我错过了什么？

# objective-c - UIScrollview 里面的 UIScrollview 并且都可以垂直滚动

> ID：13911842
> 
> 赞同：2
> 
> 时间：2012-12-17T09:56:20.540
> 
> 标签：objective-c, uiscrollview, io, uikit

是的，我知道苹果不推荐这样做，但谁能给我一些建议如何实现以下行为：

*   1 个滚动是全屏 + 200px 内容高度，fe
*   2 滚动嵌套在父级中，内容大小也大于框架

首先，滚动第一个滚动条，当它到达它的边界时，第二个滚动条开始滚动。

感谢任何代码片段和任何想法（甚至是可怕的想法），谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:10:53.310

[这](https://github.com/stuartjmoore/SMHeadedList)是可能的解决方案之一

# java - Java，dom4j：如何在文本中间添加内联元素（b，i，u）

> ID：13911847
> 
> 赞同：0
> 
> 时间：2012-12-17T09:56:52.867
> 
> 标签：java, xml, dom4j

这件事我已经想得够多了。我应该能够做这种 XML：

```
 <root>
     <text>I am <b>text</b>, alright?</text>
    </root> 
```

我的问题很简单：在制作这种内联元素时，我如何能够通过使用 dom4j 在文本中间执行该内联元素（b，i，u），或者我应该使用另一种方式？

对我来说很明显，这不起作用：

```
 Element e = rootelem.addElement("text");
    e.addElement("b").setText("text"); 
```

任何人？请告诉我怎么... 这让我发疯。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:17:26.830

这很简单。只是不要使用`setText`.

“设置节点的*文本值*”（消除节点将拥有的所有其他内容）和“将*文本节点*添加到节点”（允许将文本节点与其他节点类型混合）之间存在差异。

用于`addText`后者。

```
Element text = rootelem.addElement("text");

text.addText("I am ");
text.addElement("b").addText("text");
text.addText(", alright?"); 
```

Interface `Element`, method `addText`:[将具有给定文本的新 Text 节点添加到此元素。](http://dom4j.sourceforge.net/dom4j-1.6.1/apidocs/org/dom4j/Element.html#addText%28java.lang.String%29)

* * *

顺便说一句，当一个元素`<text>`实际上根本不包含文本（但标记）时命名它有点不幸。也许类似的东西`<html>`会是一个更明智的选择。

# javascript - JavaScript/HTML5 吉他，为每个字符串播放不同的声音

> ID：13911851
> 
> 赞同：1
> 
> 时间：2012-12-17T09:57:09.543
> 
> 标签：javascript, html

这是我的代码的链接：http: [//jsbin.com/ebadic/9/edit](http://jsbin.com/ebadic/9/edit)

它来自我在这里找到的一个演示（这个链接解释了它是如何工作的，我正在使用的部分在底部）：

[http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-interaction/](http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-interaction/)

它创建了 6 个吉他弦。我想要做的是在 6 个字符串中的一个被鼠标悬停时播放声音 - 每个字符串都有不同的声音，或者每个字符串都向上/向下倾斜的单个声音（可能使用 PlaybackRate 属性）

当我将鼠标悬停在单个字符串上时，我的代码已经播放了声音，但问题是它为每个字符串播放相同的声音。如何让它为每个字符串播放不同的声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:19:45.640

你在这里打电话`strum()`：

```
Stage.prototype.checkPoint = function(x, y, zone) {
    if(zone.inside(x, y)) {
        zone.string.strum();
    }
}; 
```

为什么不在此处添加`<audio>`标识符？我想你想播放的声音取决于 x 和 y 坐标？

```
Stage.prototype.checkPoint = function(x, y, zone) {
    if(zone.inside(x, y)) {
        zone.string.strum(getAudioID(x, y));
    }
}; 
```

你如何填写`getAudioID(x, y)`取决于你（我不是音乐家，所以我真的不知道:)）

当然，您还需要将`strum()`方法更改为如下所示：

```
GuitarString.prototype.strum = function(audioID) {
    this._strumForce = 5;
    document.getElementById(audioID).play();
}; 
```

（到这里为止非常适合您当前的设计。）

* * *

更好的方法是在实例化吉他弦对象时添加`audioID`到您的类中。`GuitarString`所以每个吉他弦（对象）都使用自己的音轨。

尽管这需要对您的代码进行一些更大的修改，但我建议您这样做，因为它会产生非常清晰易懂的代码！

* * *

还可以查看[JavaScript / HTML5 中的音效，](https://stackoverflow.com/questions/1933969/sound-effects-in-javascript-html5#1934325)`<audio>`它展示了如何在不使用-tag的情况下播放音轨。当您有许多音频片段时，这特别有用！

# c# - DNS Lookups 1 / TCP Connects 1 while loop is 100 httpWebRequest

> ID：13911855
> 
> 赞同：0
> 
> 时间：2012-12-17T09:57:12.757
> 
> 标签：c#, tcp, dns, httpwebrequest

您好，我有一个 httpwebrequest（C# 可视化脚本）正在访问一个 Url，并使用 http 嗅探器对其进行分析。我正在运行脚本 100 次，但只有 1 次 DNS 查找和 TCP 连接？

我试图在设置循环时多次连接它，我怎样才能实现这一点，我需要在标题部分更改内容吗？

提前谢谢。

```
(HttpWebRequest)WebRequest.Create("http://example.com");

                request.Method = "GET";
                request.ProtocolVersion = HttpVersion.Version10;
                request.Timeout = 10000;
                request.ReadWriteTimeout = 10000; 
```

我没有收到错误，它确实运行了 100 次，但根据我的分析器，它只连接了 DNS 和 TCP 1 次。我想让它连接整个循环，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:03:18.820

您出现此行为的原因是连接重用和 DNS 主机名缓存。为了查看重复的 DNS 请求，您必须为每个请求使用不同的主机，或者只是等待 DNS TTL（生存时间）超时，以便 DNS 缓存条目过期。TCP连接更容易处理，因为如果你设置request.KeepAlive = false，每次都会发生。这应该在请求完成后关闭连接。

# javascript - Jquery 函数适用于 Chrome，但不适用于 Firefox 和 Safari

> ID：13911859
> 
> 赞同：0
> 
> 时间：2012-12-17T09:57:23.987
> 
> 标签：javascript, jquery, google-chrome, firefox, safari

目前我正在研究调整大小功能，它在 chrome 上完美运行，但在 ff 或 safari 上都不能。（书的位置比正常的向右和底部移动） 那些浏览器有什么不支持的功能吗？请看一下，谢谢。

**调整大小时调用函数：**

```
$(window).resize(function() {

if (!isiPhone()) {
    Book.book_position();
    Book.zoom_auto();
    //Book.dragdrop_init();
}
    //calculate_zoom_factor();

}); 
```

**book_position()**

```
book_position: function() {
    book_height = $('#page').height();
    book_width  = $('#page').width();

    half_height = (book_height/2)+30;
    half_width  = book_width/2;
    $('#page').css({ left: '50%', top: '50%', margin: '-'+half_height+'px auto 0 -'+half_width+'px' });
}, 
```

**缩放自动（）**

```
zoom_auto: function() {

    dbl_clicked = false;
    current_zoom_step = 0;
    //calculate_zoom_factor(true);

    screen_height   = $(window).height();
    book_width      = $('#book').width();

    screen_width    = $(window).width()-100;
    book_height     = $('#book').height();

    if (isiPhone()) {

        var new_height      = screen_height - 100;
        var ratio           = new_height / book_height;         
        var new_width       = book_width * ratio;

        $('#page').css({ width: new_width, height: new_height });
        $('#book').turn('size', new_width, new_height);

    } else {

        Book.scaleStart();

        current_window_width = $(window).width();
        current_window_height = $(window).height();

        if (current_window_width != window_width) {
            if( $('#page').height() < ($(window).height() - 96) ) {
                Book.scaleVertical();
            }
            if( $('#page').width() > ($(window).width() - 100) ) {
                Book.scaleHorizontal();
            } 
        }

        if (current_window_height != window_height) {
            if( $('#page').width() < ($(window).width() - 100) ) {
                Book.scaleVertical();
            }

            if( $('#page').height() > ($(window).height() - 96) ) {
                Book.scaleVertical();
            }
        }

        deltaW= $('#page').width()-current_window_width;
        deltaH= $('#page').height()-current_window_height;

        if(deltaW>deltaH){
            Book.scaleHorizontal();
        }else{
            Book.scaleVertical();
        }

        if (( $(window).width() > default_book_width ) && ( $(window).height() > (default_book_height+100) )) {

            $('#page').css({ width: default_page_width, height: default_page_height });
            $('#book').turn('size',default_book_width,default_book_height);
        }

    }
}, 
```

**scaleVertical（在 zoom_auto 中调用）**

```
scaleVertical: function() {
    new_height      = $(window).height() - 116;
    ratio           = new_height / $('#page').height();         
    new_width       = $('#page').width() * ratio;
    $('#page').css({ width: new_width, height: new_height });
    $('#book').turn('size', new_width, new_height);
}, 
```

**scaleHoriztional（在 zoom_auto 中调用）**

```
scaleHorizontal: function() {
    new_width   = $(window).width()-100;
    ratio       = new_width / $('#page').width();
    new_height  = $('#page').height() * ratio;
    $('#page').css({ width: new_width, height: new_height });
    $('#book').turn('size', new_width, new_height);
}, 
```

# c++ - 在不同的语言环境中格式化双精度值

> ID：13911865
> 
> 赞同：1
> 
> 时间：2012-12-17T09:57:55.553
> 
> 标签：c++, localization

在我的 C++ 项目中，我使用如下字符串格式 -

```
sprintf(tag, "%g", "100.88"); 
```

如果我在英语语言环境中运行它，它会很好地映射。我想对其进行更改以在不同的语言环境中工作。就像在德国语言环境中一样，标签应该被分配为 100,88。

我怎样才能做到这一点？

我正在寻找类似的东西

```
system.convert.tostring(100.88 , 
                        system.globalization.culturalinfo.invariantculture) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:02:59.367

使用`ostringstream`您想要的语言环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:04:03.470

如果您使用的是[iostreams](http://en.cppreference.com/w/cpp/io)，您可以通过在流中添加您想要使用的[语言环境来做到这](http://en.cppreference.com/w/cpp/locale/locale)[一点。](http://en.cppreference.com/w/cpp/io/basic_ios/imbue)

# javascript - Rails 在 JQuery 对话框中显示信息

> ID：13911868
> 
> 赞同：0
> 
> 时间：2012-12-17T09:58:03.260
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我已经解决了这个问题，检查下面的修改后的代码。问题在于使用 Jquery 对话框构建单个页面的创建、更新和删除功能。完整的工作代码可以在这里找到。 [https://github.com/frozzie/ModalCrud](https://github.com/frozzie/ModalCrud)

我正在处理单页杂物。

目前，我正在尝试让显示按钮单击以在对话框的同一页面上而不是在另一个页面上显示用户信息。

我可以让对话框正常工作，但在显示数据时遇到问题。对话框弹出，但信息丢失。

我认为这可能是由于我的引用，因为我仍然不能说我熟悉在 Rails 上跨不同文件格式的引用，但我不确定我应该引用哪些变量名。

本质上，我的问题是在 .html.erb 中获得相当于 $('#<%= dom_id @user%>') 的 javascript

以下是相关代码。

这是我在对话框中渲染的部分。@user 似乎没有引用任何内容。我试过 $('#<%= dom_id @user%>') 但我不太确定如何正确使用它。

```
 <p>
   <b>User name:</b>
   <%= @user.user_name %>
 </p>

<p>
  <b>Email:</b>
  <%= @user.email %>
</p>

<p>
  <b>Password:</b>
  <%= @user.password %>
</p>

<p>
  <b>Account type:</b>
  <%= @user.account_type %>
</p> 
```

这是我的 show.js.erb

```
$( "#show-form" ).dialog( "open" ); 
```

这是我的对话代码：

```
 $( "#show-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 350,
        modal: true,
        closeOnEscape: true,
        resizable:false,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    }) 
```

这是我的表单，点击显示时将显示为对话框。

```
<div id="show-form" title="User Information"><%= render :partial => "userinfo"%></div> 
```

任何有关如何更改它以在对话框中显示信息的帮助将不胜感激。

* * *

更正的代码：我没有将其呈现为部分，而是将对话框表单包含在其中。为每个用户呈现对话框的想法。

```
 <tr id = "<%= dom_id user%>">
    <td><%= user.user_name %></td>
    <td><%= user.email %></td>
    <td><%= user.password %></td>
    <td><%= user.account_type %></td>
    <td><%= link_to 'Show', user, :remote=>true%></td>
    <td><%= link_to 'Edit', edit_user_path(user), :remote => true %></td>
    <td><%= link_to 'Destroy', user, :remote => true, method: :delete, data: { confirm: 'Are you sure?' } %>
    </td> 
    <div id = "show-form">
    <p>
    <b>User name:</b>
      <%= user.user_name %>
    </p>

    <p>
    <b>Email:</b>
      <%= user.email %>
    </p>

    <p>
    <b>Password:</b>
      <%= user.password %>
    </p>

    <p>
    <b>Account type:</b>
      <%= user.account_type %>
    </p></div>
    </tr> 
```

这是对话框的javascript。

```
 $( "#show-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 350,
        modal: true,
        closeOnEscape: true,
        resizable:false,
        buttons: {
            Cancel: function() {
                //$("#new_user")[0].reset();
                $( this ).dialog( "close" );
            }
        }
    }) 
```

这发生在点击时。

```
$("#show-form").dialog( "open" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:14:06.240

你打电话时

```
$( "#show-form" ).dialog( "open" ); 
```

您的“#show-form”必须已经在页面中呈现。它可能是不可见的（“display: none;”），但它应该被浏览器知道。

因此，在用户列表中：

```
<% users.each do |user| %>
   <div id="<%= dom_id(user) %>" title="User Information" style="display: none;"><%= render :partial => "userinfo", :user => user %></div>
<% end %> 
```

在“用户信息”中将“@user”更改为“用户”。

在任何 Javascript 助手中创建通用对话框调用函数：

```
function show_as_dialog(dom_id) {
  $(dom_id).dialog( "open" );
} 
```

并链接“显示”（对于每个“用户”）：

```
<%= link_to_function "Show", raw("show_as_dialog('#{dom_id(user)}')") %> 
```

# java - 如何在flex中制作类似于命令提示符的窗口弹出？

> ID：13911870
> 
> 赞同：0
> 
> 时间：2012-12-17T09:58:16.327
> 
> 标签：java, eclipse, apache-flex, command-prompt

我是 eclipse 和 Java 的新手，我在项目中使用 flex 作为客户端。我需要做的是创建一个类似于命令提示符窗口的弹出窗口，该窗口在按钮单击时弹出。我创建了按钮：

```
<mx:Button id="ping" label="Ping a Device" click="CallingWindow()"> 
```

CallingWindow() 必须使窗口类似于命令提示符弹出窗口。任何人都可以帮助我吗？提前致谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:06:37.440

使用它来创建弹出窗口：

```
Alert.show("hello world!"); 
```

不要忘记导入

```
import mx.controls.Alert; 
```

给它一些风格：

```
<mx:Style>
      Alert {
         borderColor: #666666;
         background-color: #ffffff;
         color: #999999;
      }
   </mx:Style> 
```

我希望这有帮助！

# php - ajax提交表单信息

> ID：13911873
> 
> 赞同：1
> 
> 时间：2012-12-17T09:58:24.270
> 
> 标签：php, jquery

```
<form action="" method="post">
<input type="text" name="name" />
<input type="text" name="email" />
<input type="text" name=qty" />
<textarea name="message"></textarea>
<input type="submit" class="submit" onclick="formSubmit(event)" />
</form> 
```

现在，我使用 ajax 将信息提交到`http://example.com/test.php`. 如何访问 test.php 中的`inputname`,`email`​​ , `phone`,`message`值，我知道，如果不使用 ajax，我可以使用 $_POST['email'].. 来访问传递的值。

如果我也想使用 $_POST['email']。我该怎么做？在有人指示后，我做了以下操作，但在 test.php 中。它无法访问 vaule，它有什么问题？

```
var dataString =  '&name=' + jQuery('input[name=name]').val() +                 
                         '&email=' + jQuery('input[name=email]').val() +
                         '&qty=' + jQuery('input[name=qty]').val() +
                         '&message=' + jQuery('textarea[name=message]').val() +
       jQuery.ajax({
            type: "POST",
            url: "http://www.example.com/test.php",
            data: dataString, 
```

然后在 test.php 我使用。$_POST['email'],$_POST['qty']...它不起作用。

最后一个代码：我添加了 class="ajax-submit" 到

```
jQuery('form.ajax-submit').submit(function(e) {
    var $this = jQuery(this);
    e.preventDefault();

    if ($this.find('input[name="email"]').val() == '' || $this.find('input[name="qty"]').val() == ''|| $this.find('input[name="message"]').val()=='')) {
    alert("please fill out the required fields");
    return false;
}

    jQuery.ajax({
         type: "POST",
         url: "http://example.com/test.php",
         data: $this.serialize(),
        success: function(response) {
            alert(response);
        },
        error: function() {
                alert('There was an error submitting the form');
            } 
    })
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:02:08.940

不要手动构造查询字符串。你现在所拥有的并没有逃避这些值，这很容易破坏。

相反，只需让 jQuery 为您序列化表单：

```
$('form.ajax-submit').submit(function(e) {
    var $this = $(this);
    e.preventDefault();

    $.ajax({
        url: $this.attr('action') || window.location,
        type: $this.attr('method') || 'post',
        data: $this.serialize(),
        success: function(response) {
            alert(response);
        }
    })
}); 
```

此代码使所有具有该类的表单都`ajax-submit`通过 AJAX 提交。

要修复您现在拥有的内容，只需更改`data`密钥的值：

```
var $form = $('#your_form');

if ($form.find('input[name="email"]').val() == '' || $form.find('input[name="name"]').val() == '') {
    return false;
}

jQuery.ajax({
    type: "POST",
    url: "http://www.example.com/test.php",
    data: $form.serialize(),
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:03:02.410

就这样使用它：

```
jQuery('form').submit(function(e){
   e.preventDefault();
    jQuery.ajax({
        type: "POST",
        url: "http://www.example.com/test.php",
        data: $('form').serialize(),
        success: function(data){
          alert(data);
        },
        error:function(){
          alert('error');
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:06:03.433

有 jQuery 插件可以完成这项工作： http:
[//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

它只是为您完成所有 AJAX 工作，因为您只是以前一种方式提交表单。

# php - 循环while for php上的数组

> ID：13911879
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:09.173
> 
> 标签：php, sql, arrays, while-loop

为什么这个循环不起作用？当我检查 `echo vardump($tablesliders);` 数组表滑块时，只插入了一个元素，即查询的最后一个元素。查询是正确的。

```
while($row_Slider=mysql_fetch_array($Query_Sliders)){   
    $QuestionID=$row_Slider['QuestionIDFK'] ;
    $AnswerID=$row_Slider['AnswerIDPK'] ;
    $AnswerValue=$row_Slider['AnswerValue'] ;
    $tablesliders = array (
            "QuestionID"  => array($k => $QuestionID),
            "$AnswerID" => array($k => $AnswerID),
            "$AnswerValue"   => array($k => $AnswerValue)
             );
        $k=k+1;
} 
```

`foreach`我如何使用循环重写代码？我对此感到非常厌倦，因为`mysql_fetch_array($Query_Sliders)`语法不让我跑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:01:19.690

您正在重置每个循环上的 $tablesliders 变量。

尝试将其制成一个数组并在每个循环中递增它。

```
$tablesliders = array();

while($row_Slider=mysql_fetch_array($Query_Sliders)){
    $QuestionID=$row_Slider['QuestionIDFK'] ;
    $AnswerID=$row_Slider['AnswerIDPK'] ;
    $AnswerValue=$row_Slider['AnswerValue'] ;

    $tablesliders[] = array (
        "QuestionID"  => array([$k] => $QuestionID),
        "$AnswerID" => array([$k] => $AnswerID),
        "$AnswerValue"   => array([$k] => $AnswerValue)
    );
    $k=k+1;
} 
```

尽管实际上在查看您的脚本，但我无法想象您希望它如何工作（每个数组只有一个问题、答案和值，而不是所有这些的数组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:01:50.580

您在每次迭代时都覆盖它，您需要附加到它：

```
$tablesliders[] = array ( 
```

`[]`附加到数组中，您也可以使用`array_push()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:03:37.860

您想像这样推送数组中的每个元素：

```
$tablesliders = array();

while($row_Slider=mysql_fetch_array($Query_Sliders)){

    $QuestionID=$row_Slider['QuestionIDFK'] ;
    $AnswerID=$row_Slider['AnswerIDPK'] ;
    $AnswerValue=$row_Slider['AnswerValue'] ;

        $tablesliders[] = array (
        "QuestionID"  => $QuestionID,
        "AnswerID" => $AnswerID,
        "AnswerValue"   => $AnswerValue
                 );
        $k=k+1;
} 
```

那就是对您希望您的键和值成为什么做出一些假设。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:08:09.773

不确定这是否是您要找的，我不明白`$k`它的用途是什么？但这就是我使用 foreach 构建数组的方式。

```
foreach($row_Slider as $key => $value){
    array_push($tablesliders, $key => $value);
}
print_r($tablesliders);
//should print 
/* ARRAY( 'QuestionIDFK' => 'value',
          'AnswerIDPK' => 'value',
          'AnswerValues => 'value'
        ); 
```

但显然这会将每个条目输入到数组中。

# windows - 在 Vim for Windows 上设置 Cygwin shell 路径

> ID：13911881
> 
> 赞同：6
> 
> 时间：2012-12-17T09:59:26.583
> 
> 标签：windows, vim, cygwin, git-bash

我正在尝试在 Windows 上设置 Vim，使用 Git bash (Cygwin) 作为 shell 环境。我收到一个关于临时文件的错误，我 99% 确信这与无法加载 shell 的事实有关（即“！”命令不起作用）。

在我的`_vimrc`文件中，我尝试将`shell`选项设置为各种东西，但都不起作用。我的 cygwin/git bash 命令路径是*C:\Program Files\Git\bin\sh.exe*，空间似乎引起了问题。我尝试了以下方法，但没有成功：

```
:set shell=C:\Program Files\Git\bin\sh.exe    " Error = Unknown options: Files/Git/bin/sh.exe

:set shell=C:/Program Files/Git/bin/sh.exe    " Error = Unknown options: Files/Git/bin/sh.exe

:set shell="C:/Program Files/Git/bin/sh.exe"  " Error when running a command: shell option is empty

:set shell=C:/Program\ Files/Git/bin/sh.exe   " Error when running a command: 'C:/Program' is not recognized as an internal or external command... 
```

有谁知道我如何设置包含空格的 shell 路径？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T15:50:28.133

你几乎做对了。您需要转义每个周围的 "。w​​indows 要求您将字符串括在引号中，而不是转义一个空格。但是 vim 将引号解释为注释。因此您需要转义双引号。您还需要一个反斜杠来转义空间。

请参阅中的示例`:h 'shell'` （请注意 shell 周围的单引号对于获得有关 shell 选项的帮助是必需的。否则，您将获得有关 shell ex 命令的帮助。）

```
:set shell=\"C:\Program\ Files\Git\bin\sh.exe\" 
```

您可以通过键入以下内容来检查该值：

```
:echo &shell 
```

不过附带说明一下 - 我建议不要在 win32 gvim 中使用 bash/sh。许多插件测试`has("win32")`和构造 shell 命令`cmd.exe`而不是 &shell 值。因此，如果 shell 不是，这些插件将失败`cmd.exe`。理想情况下，这些插件会测试`&shell`值而不是使用`has("win32")`. 所以即使我从 cygwin 内部调用 win32 gvim，我总是在我的 vimrc 中使用这个片段将 shell 设置回`cmd.exe`或更好。`$COMSPEC`

```
if has("win32") || has("win64") || has("win16")
  "I do other stuff in here...

  "Then only inside this if block for windows, I test the shell value
  "On windows, if called from cygwin or msys, the shell needs to be changed to cmd.exe
  if &shell=~#'bash$'
    set shell=$COMSPEC " sets shell to correct path for cmd.exe
  endif
endif 
```

编辑：正如@LucHermitte 在评论中提到的那样，当 shell 设置为 bash 或 sh 时，在 win32 gvim 上不起作用的插件应该被修复。我同意......但根据我的经验，这并不总是可行的。所以我总是将 shell 设置回 $COMSPEC（通常是 cmd.exe）。如果您的插件没有任何问题，那很好，请忽略我的旁注。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T12:58:13.853

我正在使用以下定义从 win32-gvim 运行外部 cygwin 相关可执行文件：[https](https://github.com/LucHermitte/vim-system-tools/blob/master/plugin/system_utils.vim#L467) ://github.com/LucHermitte/vim-system-tools/blob/master/plugin/system_utils.vim#L467 （其他 shell 选项也很重要）

但是，我建议您将 cygwin 入口点放入 %PATH%。这将是最简单的方法。

# python - Django Forms：尝试验证 felid 时出现 KeyError

> ID：13911882
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:27.883
> 
> 标签：python, django, django-forms

在我的 form.py 中，我收到以下错误（如下）有什么我错过的可以向我解释的吗？我正在尝试清理/验证确认密码字段

这是错误：

```
KeyError at /member/registration/
'passwordConfirm'

response = callback(request, *callback_args, **callback_kwargs)

Users/user/Documents/workspace/project/member/forms.py in clean_password, line 27 
```

表格.py

```
def clean_password(self):
    password = self.cleaned_data['password']
    passwordConfirm = self.cleaned_data['passwordConfirm']
    if password != passwordConfirm:
        raise forms.ValidationError("Password does not match, try again.")
    return password
    strong text 
```

模型.py

```
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User

class Member (models.Model):
    user =  models.OneToOneField(User)
    name = models.CharField(max_length=100)

    def __unicode__(self):
        return self.name

def createUserCallBacks(sender, instance, **kwargs):
    member, new = Member.objects.get_or_create(user=instance)
post_save.connect(createUserCallBacks, User) 
```

视图.py

```
def registration(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/error')
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'],email=form.cleaned_data['email'], password=form.changed_data['password'])
            user.save()
            member = User.get_profile()
            member.name = form.cleaned_data['name']
            member.save()
            return HttpResponseRedirect('/profile')
        else:
            return render_to_response('pageRegistration.html', {'form':form},context_instance=RequestContext(request))

    else: 
        form = RegistrationForm 
        context = {'form':form}
        return render_to_response('pageRegistration.html', context, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:04:15.153

如果您想检查两个字段的表单，您应该在`clean()`方法中而不是单个字段的清理方法中执行此操作。

您看到的问题是，当您使用`clean_password`方法时，`cleaned_data`不包含`'passwordConfirm'`. 即它的干净方法 -`clean_passwordConfirm()`尚未调用。

[清理和验证相互依赖的字段中的](https://docs.djangoproject.com/en/dev/ref/forms/validation/#cleaning-and-validating-fields-that-depend-on-each-other)文档

示例代码：

```
def clean(self):
    try:
        cleaned_data = super(RegistrationForm, self).clean()
        password = cleaned_data['password']
        passwordConfirm = cleaned_data['passwordConfirm']
        if password != passwordConfirm:
            raise forms.ValidationError("Password does not match, try again.")
        return cleaned_data
    except:
        raise forms.ValidationError("Password does not match, try again.") 
```

# android - 如何在 Android 中逐帧处理视频？

> ID：13911883
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:31.680
> 
> 标签：android, video-processing

我需要在 Android 中逐帧处理视频。我需要的是输出一个`Bitmap`（或将所有内容复制到内存缓冲区）的东西。起初我尝试`MediaMetadataRetriever`使用该方法`getFrameAtTime`，但我注意到即使我对时间非常小心，它也会跳过帧。有没有更靠谱的？

# java - 为什么 com.sun.management.ThreadMXBean 在 Ant 上不起作用？

> ID：13911885
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:37.343
> 
> 标签：java, ant, junit

我有一个需要 com.sun.management.ThreadMXBean 的测试用例来检索线程信息。当我在 Eclipse 上运行这个测试用例时，它可以工作，但是当我从 ant - junit 任务运行时。它抛出以下..

这是我的代码片段，如何让它在 ant 中工作？谢谢。 `ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean(); com.sun.management.ThreadMXBean comSunThreadMXBean = (com.sun.management.ThreadMXBean)threadMXBean;`

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:52:09.097

通过添加 fork=true 修复它`

# linux - 获取脚本并在 KornShell 上执行时的行为差异

> ID：13911886
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:38.243
> 
> 标签：linux, bash, shell, scripting, ksh

我知道，采购脚本和执行脚本的唯一区别是在后一种情况下，父环境不受影响。

**考虑这个示例脚本：**

```
SETUP_DIR=`dirname $0`
echo $SETUP_DIR
echo $0
echo $1 
```

上面的脚本只是获取正在运行的脚本的目录名。在尝试获取它时，上述脚本失败并出现以下错误

```
$ . test.sh foo
dirname: invalid option -- k
Try `dirname --help' for more information.

-ksh
foo 
```

在我看来的原因是，在采购它时，当脚本在父环境 shell 中运行时，shell 名称作为第一个参数传递，在这种情况下它的`-ksh`.

并且`dirname -ksh`因为 而失败`-k`，这是一个无效的选项`dirname`

奇怪的是，在 sh 或 bash 中运行时不存在这个问题

```
$ sh
sh-3.2$ . test.sh foo
.
sh
foo
sh-3.2$ bash
bash-3.2$ . test.sh foo
.
bash
foo
bash-3.2$ 
```

*   所以我想知道，这是 KornShell (ksh) 中已知的记录行为吗？如何解决这个问题？
*   我的第二个通用问题是，为什么`dirname 'sh'`返回当前目录`.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:11:31.057

回答您的第二个问题，来自`man dirname`：

> 打印 NAME 并删除其尾随 / 组件；如果 NAME 不包含 /，则输出 '.' （表示当前目录）。

这就是为什么你`.`在跑步时得到的原因`dirname sh`。

我无法在 中重现您的错误`ksh`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:17:47.037

> 所以我想知道，这是玉米壳中已知的记录行为吗？如何解决这个问题？

当 ksh 作为登录 shell 由 启动时`/bin/login`，它的`$0`前缀将是`-`，因此`$0`将是`-ksh`而不是只是`ksh`or `/bin/ksh`。[Login 这样做是为了向 shell 表明它正在作为登录 shell 启动](http://docstore.mik.ua/orelly/unix/upt/ch51_09.htm)，因为这通常会影响配置文件加载。

ksh 手册记录了它对这个约定的遵守：

> 如果 shell 由 exec(2) 调用，并且参数零 ($0) 的第一个字符是 -，则假定 shell 是登录 shell，并且从 [...]

连字符前缀不会在 bash 中显示给我，我假设 bash 正在编辑命令行以阻止它在进程列表中可见。

结果，`dirname $0`is`dirname -ksh`和 dirname 尝试将其解析为传递`k`,`s`和`h`选项

您可以通过显式终止`dirname`使用 with解析的选项来解决此问题`--`，即

```
dirname -- "$0" 
```

> 我的第二个通用问题是，为什么 dirname 'sh' 返回当前目录。

`dirname`试图提供帮助并返回可用路径，即使您提供的路径没有目录部分。由于您的 "$0" 只有一个部分，它假定它是相对于当前工作目录的，即`sh`== `./sh`，并返回`.`

这是根据dogbane的回答记录的

# java - SocketChannel：中断关闭所有打开的通道

> ID：13911887
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:38.010
> 
> 标签：java, socketchannel

我有以下情况：

*   服务器打开一个 ServerSocketChannel 并接受客户端连接。
*   每个连接（socketA）都在一个新线程中处理。
*   在线程内部，我打开一个新的 SocketChannel (socketB)，它连接另一台服务器。
*   原来的客户端连接（socketA）此时处于空闲状态。
*   新的 SocketChannel 从服务器读取数据（阻塞）。

现在我中断线程。我预计 socketB 将被中断并关闭，而 socketA 将继续工作。不幸的是socketA也会被中断。

知道可能是什么问题吗？

我使用以下测试方法来重现该行为：

```
private void testServerSocket() throws IOException, InterruptedException
{
    final InetSocketAddress     address         = new InetSocketAddress( "localhost", 12345 );
    final ServerSocketChannel   serverChannel   = ServerSocketChannel.open();
    serverChannel.socket().bind( address );

    final SocketChannel socketChannel   = serverChannel.accept();

    // start communication in new thread
    final Thread    thread  = new Thread( new Runnable() { @Override public void run() { testWrite( socketChannel ); } } );

    thread.start();

    // wait a little bit
    Thread.sleep( 5000 );

    // interrupt thread, will interrupt the socketChannel.read in testRead()
    thread.interrupt();
    thread.join();

    socketChannel.close();
    serverChannel.close();
}

void testWrite( SocketChannel socketA )
{
    try
    {
        // write to client
        socketA.write( ByteBuffer.wrap( "0123456789".getBytes() ) );

        // open new socket to another server
        testRead();

        // throws ClosedByInterruptException
        socketA.write( ByteBuffer.wrap( "0123456789".getBytes() ) );
    }
    catch( final IOException e )
    {
        e.printStackTrace();
    }
}

void testRead()
{
    try
    {
        final InetSocketAddress address   = new InetSocketAddress( "localhost", 12346 );
        final SocketChannel     socketB   = SocketChannel.open( address );

        // server doesn't send, so this call will block and interrupted 
        socketB.read( ByteBuffer.wrap( new byte[10] ) );

        socketB.close();
    }
    catch( final IOException e )
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:13:47.877

您需要通过在in`Thread.interrupted()`之后调用来清除线程的中断状态。实际上，您应该在那里抓到并做。否则，这种情况仍然存在并且也会中断写入。`IOException``testRead()``ClosedByInterruptException`

# c# - 尝试在 Telerik 对话框控件上设置父级以使用行为

> ID：13911888
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:41.850
> 
> 标签：c#, silverlight, xaml, mvvm, telerik

我正在尝试设置当前没有对话框的父级。使用`this.Parent = ...`给我以下错误：

> 无法将属性或索引器“System.Windows.FrameworkElement.Parent”分配给 - 它是只读的。

问题是我需要设置父级才能使行为（在本例中是屏幕键盘）起作用。

关于我应该如何设置此属性的任何建议？

更新（来自评论）：

代码被 a 调用，`ICommand ChangePasswordCommand`它再次从 xaml 中的绑定调用：

```
void ChangePasswordLink(string t = "") 
{ ChangePasswordControl control = new ChangePasswordControl(Control_Closed); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:29:35.097

通过带上一个参数（持有父级 - 或任何父级，只要它是父级）一直从代码隐藏文件到 ViewModel 和行为类来解决这个问题。

谢谢你的帮助。

# facebook - 不同类型的 facebook 访问令牌

> ID：13911891
> 
> 赞同：2
> 
> 时间：2012-12-17T09:59:45.843
> 
> 标签：facebook, facebook-graph-api, oauth-2.0, facebook-oauth, facebook-access-token

我有点困惑。如果有人可以向我澄清，我会很高兴 -

我通过以下方式获得的令牌之间有什么区别：

1.  以这种方式获取令牌：`https://graph.facebook.com/oauth/access_token? client_id=YOUR_APP_ID &client_secret=YOUR_APP_SECRET &grant_type=client_credentials`
2.  与使用 Javascript SDK 获取令牌相比 -`FB.getAuthResponse()['accessToken']`

它们看起来都不一样，我不明白我应该使用哪个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:49:34.240

第一种方法记录在 facebook 文档中[的 Login as an App下：](http://developers.facebook.com/docs/howtos/login/login-as-app/)

> 作为应用程序登录允许您获取访问令牌，该令牌允许您代表应用程序而不是用户向 Facebook API 发出请求。这很有用，例如修改应用程序的参数、创建和管理测试用户，或阅读应用程序的见解。应用程序访问令牌还可用于代表已授予您应用程序发布权限的用户向 Facebook 发布内容。

如文档中所述，您应该只在服务器端编码中使用此方法，在这种情况下，您的代码对恶意攻击者的攻击更加安全（与客户端代码相比）。请记住：**您的 App Secret 永远不会与任何人共享，这一点很重要**。将应用程序机密视为您的应用程序帐户密码。如果其他人获得了您的应用程序机密，则您的应用程序可能会受到损害。此方法对应于 OAuth 2.0 中的[Client Credential Grant 。](https://www.rfc-editor.org/rfc/rfc6749#section-4.4)

第二种方法适用于可能没有服务器端编码的客户端应用程序。这允许您的应用代表授权用户进行 API 调用。在 SDK 的覆盖下，此方法对应于 OAuth 2.0中的[隐式授权。](https://www.rfc-editor.org/rfc/rfc6749#section-4.2)

到现在你应该知道，这两种方式的存在是因为facebook采用了OAuth 2.0。

为了充分了解这两种方法的用法和区别，我强烈建议您阅读[RFC 6749 - The OAuth 2.0 Authorization Framework](https://www.rfc-editor.org/rfc/rfc6749)。如果您发现文本难以阅读，您可以使用一些易于阅读的应用程序，例如[Google Chrome 上的 Evernote Clearly](https://chrome.google.com/webstore/detail/clearly/iooicodkiihhpojmmeghjclgihfjdjhj)。对于 OAuth 2.0 的简化、更易于理解的版本，您可以阅读Aaron Parecki 的[OAuth 2 Simplified](http://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified)。

# c# - 动态创建超链接以调用 ac# 函数

> ID：13911892
> 
> 赞同：0
> 
> 时间：2012-12-17T09:59:50.400
> 
> 标签：c#, asp.net, hyperlink

我有一个连接到 mssql 数据库并返回故事列表的函数——这些故事放在超链接中。这是我的代码：

```
public void getSocialStories()
{
    string user = getSelectedUser();
    List<SocialStory> stories = new List<SocialStory>();
    stories = functions.getSocialStories(user);

    foreach (SocialStory story in stories)
    {
        HyperLink storyLink = new HyperLink();
        storyLink.NavigateUrl = "http://google.com";

        storyLink.Text = story.Social_story_name;
        ph.Controls.Add(new LiteralControl("<br />"));
        ph.Controls.Add(storyLink);
    }
} 
```

到目前为止一切顺利，但现在我想在单击超链接时调用一个函数，该函数要求数据库返回该故事的相应图片。我需要做的就是调用`function(story_id)`. My`List<SocialStory>`包含具有`story_id`参数的 SocialStory 对象。如何调用`story_id`作为参数的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:12:39.020

您可以使用动态处理程序 (ashx) 在标签内显示图像。所以你需要像这样编写文字控制：

```
<a href="yourStoryLink"><img src="StoryImageHandler.ashx?storyId=yourStoryId" /></a> 
```

检查[ASP.NET ASHX 处理](http://www.dotnetperls.com/ashx)程序以获取创建 StoryImageHandler.ashx 的基本说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:12:12.783

客户端没有 C#，因此您需要进行 AJAX 调用或以其他方式查询服务器。

[如何通过传递参数从客户端调用服务器端函数？：Microsoft ASP.NET 官方论坛](http://forums.asp.net/t/1790155.aspx/1)列出了一些可能的解决方案：

*   [ScriptManager 的 EnablePageMethods](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/) ,
*   [实现 ICallBackEventHandler](http://www.intstrings.com/ramivemula/asp-net/jumpstart-8-making-client-callbacks-by-implementing-icallbackeventhandler-interface/)，
*   一个[单独的 WebMethod 脚本](http://dotnetplace.com/post/Fill-ASPNETDropdownlist-through-JSON-data-using-jQuery.aspx)。

它们都基于相同的原则：客户端发送第二个请求，该请求调用一段独立的代码。它们也被认为是 ASMX 的更轻的替代品。

*   [Gregor Primar 建议的 ASHX 处理程序](https://stackoverflow.com/questions/13911892/dynamically-created-hyperlinks-to-call-a-c-sharp-function#answer-13912085)与 WebMethod 选项没有主要区别。

# jquery - 使后端的 Wordpress 父级下拉菜单不可点击

> ID：13911894
> 
> 赞同：1
> 
> 时间：2012-12-17T10:00:04.080
> 
> 标签：jquery, wordpress, drop-down-menu

我使用自定义字段和 Wordpress 分类法在 wordpress 上为产品系统提取产品子类别和子类别。但是，我正在使用的下拉框拉入我的类别时遇到问题。

结构是这样的：

```
 1 Main Category
 ..2 Sub Category
 ....3 Sub-Sub Category
 .......4 Product
 ....3 Sub-Sub Category
 ....3 Sub-Sub Category
 ..2 Sub Category
 ....3 Sub-Sub Category
 ..2 Sub Category
 ....3 Sub-Sub Category 
```

“1 Main Category”是我的分类法，只是为了对产品进行分组 “2 Sub Category”是为了进一步对产品进行分组 “3 Sub-Sub Category”是实际的类别产品将被放入

为 CMS 上的下拉框呈现的 HTML 如下所示：

```
<select name="fields[field_50cb3df056694][]" id="fields[field_50cb3df056694]" class="taxonomy-field">
  <option value="12">Cooking Wine</option>
  <option value="16">&nbsp;&nbsp;&nbsp;Red Wine</option>
  <option value="17">&nbsp;&nbsp;&nbsp;White Wine</option>
  <option value="11">Milk</option>
  <option value="20">&nbsp;&nbsp;&nbsp;Full Fat</option> 
  <option value="19">&nbsp;&nbsp;&nbsp;Fully Skimmed</option>
  <option value="18">&nbsp;&nbsp;&nbsp;Semi Skimmed</option>
  <option value="9">Oils</option>
  <option value="21">&nbsp;&nbsp;&nbsp;Olive</option>
  <option value="23">&nbsp;&nbsp;&nbsp;Rapeseed</option>
  <option value="22">&nbsp;&nbsp;&nbsp;Sunflower</option>
  <option value="8">Sauces</option>
  <option value="14">&nbsp;&nbsp;&nbsp;Cheese Sauces</option>
  <option value="15">&nbsp;&nbsp;&nbsp;Pasta Bakes</option>
  <option value="13">&nbsp;&nbsp;&nbsp;Tomato Sauces</option>
  <option value="10">Tinned</option>
  <option value="24">&nbsp;&nbsp;&nbsp;Beans</option>
</select> 
```

我想知道如何才能使此下拉框中的子类别不可点击。我只希望用户能够将产品放在“子子类别”下。

我正在努力区分这两个级别（我唯一能想到的是一个 JQuery IF 语句，它说如果下拉框选项没有“ ”，那么就让它让用户无法选择。

我对 JQuery 的理解还不够先进（据我所知，JQuery 是实现我想要的最明显的方式）来做到这一点。我很感激任何帮助，因为我在这一点上有点卡住了，我不希望用户在不正确的区域对产品进行分组。

[编辑] 在 functions.php 中加载 JQuery 的脚本：

```
<?php
add_action('admin_enqueue_scripts','load_dropdown_script');
function load_dropdown_script( $hook ){
    wp_enqueue_script( 
        'dropdown', //unique handle
        get_template_directory_uri().'/js/dropdown.js', //location
        array('jquery')  //dependencies
     );
}
?> 
```

查询：

```
http://jsfiddle.net/Pp7Ey/ 
```

铬错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL
â€‹     <--this 
```

试过这个摆脱无济于事：

```
http://jsfiddle.net/djfdc/ 
```

-谢谢，马特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:55:45.387

我认为，您不需要在这里使用 jQuery。在 html 中有“optgroup”标签 - [http://www.w3schools.com/tags/tag_optgroup.asp](http://www.w3schools.com/tags/tag_optgroup.asp)

因此，如果您通过 wp_dropdown_categories 函数获取下拉列表，则可以执行以下操作：

```
$select = wp_dropdown_categories('hide_empty=0&hierarchical=1&echo=0'); 
$select = preg_replace("#<option class=\"level-[01]\"([^>]*)>(.*)</option>#", "<optgroup label=\"$2\"></optgroup>", $select);
echo $select; 
```

Wordpress 增加了 class "level-1"/"level-2" 等等，你可以在正则表达式中改变它。

**更新。**如果你想使用 jQuery，你可以这样做：

```
$('select.taxonomy-field option').each(function() {

   var optionText = $(this).html();

   //if there are 3 spaces (&nbsp;), then it is our product. 
   //otherwise replace option tag with optgroup
   var m = optionText.match(/(&nbsp;){3}(.*)/g);

   if (!m)
       $(this).replaceWith('<optgroup label="'+optionText+'"></optgroup>');

});​ 
```

[http://jsfiddle.net/Pp7Ey/](http://jsfiddle.net/Pp7Ey/)

# c# - XNA Sprite - 未找到文件

> ID：13911897
> 
> 赞同：1
> 
> 时间：2012-12-17T10:00:19.867
> 
> 标签：c#, exception, xna, sprite

我正在尝试通过使用 Microsoft 的教程来学习 XNA，但我一直坚持将精灵添加到我的内容文件夹中。起初我找不到我的“内容”目录。

![解决方案资源管理器](../Images/932ba3eb40c2777421de135d56906522.png)

如上图所示，我设法将精灵添加到 IC2013-2Content。到目前为止这是正确的吗？我还设法给它命名为“megaman”，我读取它会创建一个 .xnb 文件并将其添加到解决方案目录中的内容文件夹中，如下图所示。

![XNA 项目目录](../Images/0ebe4571bc4382b90380c50a1a17a403.png)

我认为这是 .xnb 文件应该位于的正确目录？当我尝试运行我的程序时，我得到了这个错误。

![编码错误](../Images/a9da577812a77ca9dd086a59cc439958.png)

抱歉图片过多。有谁知道为什么我不断收到文件未找到错误？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:23:57.720

没关系，我认为因为 .xnb 文件位于名为 Images 的文件夹中，所以我更改了 Content.Load 以合并子目录，它现在可以工作了！

# excel - 自动修改 Excel VBA

> ID：13911903
> 
> 赞同：0
> 
> 时间：2012-12-17T10:00:43.003
> 
> 标签：excel, vba, automation

对于客户端，我需要修改数百个 Excel 电子表格中包含的 VBA 代码——一些 dll 调用需要替换为对另一个库的调用。

有没有办法编写一个程序（VB、.NET、java...）来打开电子表格，查看包含的 VBA，应用必要的修改并保存它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:08:43.627

您可以编写一个 VBA 程序来自动化代码更改过程

在工具-->参考

添加：Microsoft Visual Basic For Applications Extensibility XY

下面是我编写的一些代码，用于将代码添加到 ThisWorkbook 模块中的关键功能是

插入线

线条

删除线

外部参考：[http ://www.vbaexpress.com/kb/getarticle.php?kb_id=250](http://www.vbaexpress.com/kb/getarticle.php?kb_id=250)

```
 Dim wsName As String
    Dim row As Long
    Dim col As Long
    Dim VBCM As CodeModule
    Dim VBP As VBProject
    Dim VBC As VBComponent
    Dim line As String
    Dim insertStr As String
    Dim clearCode As Boolean
    Dim line2 As String
    Dim i As Long, j As Long
    clearCode = False
    If formula = "" Then
        Exit Sub
    End If

    If formula = "DEL" Then
        clearCode = True
    End If
    On Error GoTo Err:
    If Selection.count = 1 Then
        wsName = ActiveSheet.Name
        row = Selection.row
        col = Selection.column
        Set VBP = Application.VBE.ActiveVBProject
        For Each VBC In VBP.VBComponents
            If VBC.Name = "ThisWorkbook" Then
                Set VBCM = VBC.CodeModule
                Start = False
                endLine = False
                For i = 1 To VBCM.CountOfLines
                    line = VBCM.Lines(i, 1)
                    line = Trim(line) 'remove the leading and trailing spaces
                    If line = "Private Sub Workbook_Open()" Then
                        Start = True
                    End If
                    If Start Then

                        If clearCode Then
                            For j = i + 1 To VBCM.CountOfLines
                                line = VBCM.Lines(j, 1)
                                line = Trim(line) 'remove the leading and trailing spaces
                                If line = "With Worksheets(""" & wsName & """)" Then
                                    line2 = VBCM.Lines(j + 2, 1)
                                    line2 = Trim(line2)
                                    If line2 = "height = .Cells(" & row & ", " & col & ").End(xlDown).row" Then

                                        VBCM.DeleteLines j, 8
                                        MsgBox "Delete Code Done"
                                        Exit Sub

                                    End If
                                End If
                            Next j

                        End If
                        If line = "End Sub" Then
                            endLine = True
                            Exit For
                        End If
                    End If
                Next i
                Worksheets(wsName).Cells(row, col).formula = formula
                formula = Replace(formula, """", """""") 'replace the single doublequote into double doublequotes

                insertStr = "With Worksheets(""" & wsName & """)"
                insertStr = insertStr & vbCrLf & "    .Activate"
                insertStr = insertStr & vbCrLf & "    height = .Cells(" & row & ", " & col & ").End(xldown).row"
                insertStr = insertStr & vbCrLf & "    If height > row Then"
                insertStr = insertStr & vbCrLf & "        .Range(.Cells(" & row & "," & col & "), .Cells(height," & col & ")).ClearContents"
                insertStr = insertStr & vbCrLf & "    End If"
                insertStr = insertStr & vbCrLf & "    .Cells(" & row & "," & col & ").formula = """ & formula & """"
                insertStr = insertStr & vbCrLf & "End With"
                VBCM.InsertLines i - 1, insertStr

                'Debug.Print "FOUND"
            End If

        Next VBC
    End If 
```

# ruby-on-rails - 在 Ruby on Rails 中跳过测试单元不起作用

> ID：13911907
> 
> 赞同：2
> 
> 时间：2012-12-17T10:00:56.400
> 
> 标签：ruby-on-rails, unit-testing

我是 Ruby on Rails 的新手，我正在通过[http://ruby.railstutorial.org/chapters/static-pages#top](http://ruby.railstutorial.org/chapters/static-pages#top)本教程学习它。

本教程中给出的一个命令对我不起作用

```
rails new sample_app --skip-test-unit 
```

错误文本是

> 无效的选项 --skip-test-unit

知道为什么它不起作用以及如何解决它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:04:33.797

请试试

```
rails new sample_app -T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:26:57.423

为了完整起见，将答案从评论转移到这里：

`rails -v`表明该应用程序正在运行`rails 2.3`版本而不是预期`rails 3.2.9`版本。 `--skip-test-unit`不是`rails 2.3`版本中的有效选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T05:40:53.283

只需使用 创建您的应用程序`rails new my_app`，然后添加下面的代码。

```
# config/application.rb
config.generators do |g|
  g.test_framework nil
end 
```

然后，当您使用时`rails g controller home`，它不会自动生成测试单元。

# iphone - 自定义标签栏背景图片太大

> ID：13911908
> 
> 赞同：5
> 
> 时间：2012-12-17T10:00:57.210
> 
> 标签：iphone, objective-c, ios, uitabbar

我正在尝试在我的标签栏上设置自定义背景图像。我有名为“tabbarBack.png”的图像，大小为 640x92。在我的代码中，我是这样设置的。

```
[[[self tabBarController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbarBack.png"]]; 
```

当我在设备上测试它时，标签栏比它应该大两倍？有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-07T22:02:02.117

调整图像大小可能会导致其分辨率丢失，因为它是基于像素的。与其使用 setBackgroundImage（它不允许您调整图像大小）并在 Xcode 之外更改图像，为什么不将背景图像作为标签栏的子视图插入呢？这样您就可以在 XCode 中调整图像框架的大小并保持图像文件不变！

```
/* TAB BACKGROUND IMAGE */
UIImageView *tabBackground = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 49)];
tabBackground.image = [UIImage imageNamed:@"BackgroundImage.png"];
tabBackground.contentMode = UIViewContentModeScaleAspectFill;
[self.tabBar insertSubview:tabBackground atIndex:0]; 
```

默认选项卡尺寸为 320x49 - 如果您的选项卡栏尺寸是自定义的，请在上面调整 initWithFrame:CGRectMake。最后，如果您将其他图像作为子视图添加到选项卡栏，请确保在添加背景图像之前添加这些图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T10:09:19.430

试试下面两行

```
self.tabBarController.tabBar.autoresizesSubviews = NO;
self.tabBarController.tabBar.clipsToBounds = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T10:05:15.500

NSAddict 的评论：将您的图像重命名为 tabbarBack@2x.png。这称为 Retina 显示器的像素加倍。

如果没有@2x，iOS 不知道它应该应用一个比例因子，它会按原样使用，尽管它应该减半。

所以一个黑客是：

```
[[[self tabBarController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbarBack@2x.png"]]; 
```

* * *

现实中应该有

*   tabbarBack png (45 px 左右)
*   tabbarBack@2x.png

所以你只说

```
[[[self tabBarController] tabBar] setBackgroundImage:[UIImage imageNamed:@"tabbarBack.png"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-14T22:41:47.457

检查您是否有此行：

```
 [[UITabBar appearance] setShadowImage:image]; 
```

您必须将其删除或设置为零。

# html - 将 nobr html 标记应用于 django 表单字段

> ID：13911911
> 
> 赞同：0
> 
> 时间：2012-12-17T10:01:06.493
> 
> 标签：html, css, django, django-templates

我正在用这个[参考](https://docs.djangoproject.com/en/1.3/topics/forms/#customizing-the-form-template)设计 django 表单字段。

形式：

```
class contact(forms.Form):
    first_name = forms.CharField()
    middle_name = forms.CharField()
    last_name = forms.CharField() 
```

模板：

```
<form action="/contact/" method="post">
    {% include "form_snippet.html" %}
    <p><input type="submit" value="Send message" /></p>
</form> 
```

在 form_snippet.html 中：

```
{% for field in form %}
    <div class="fieldWrapper">
        {{ field.errors }}
        {{ field.label_tag }}: {{ field }}
    </div>
{% endfor %} 
```

在 CSS 中：

```
.fieldWrapper{
    font-size; 10px;
    color: #f00;
    font-family: verdana, tahoma, serif;
    white-space:nowrap;
} 
```

当我运行服务器时，每个表单字段都显示在新行中。

我想将这三个表单字段放在同一行中，而不是每个都放在新行中。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:20:43.187

像这样更新css代码，

```
 .fieldWrapper{
   font-size; 10px;
   color: #f00;
   font-family: verdana, tahoma, serif;
   white-space:nowrap;
   display:inline;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:06:41.823

您将每个字段包装在一个`div`标记中，一个块元素。

给`.fieldWrapper`类一个非块定位..比如`inline`,,`float:left`等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:25:20.903

由于 div 是一个块元素，因此将 div 标签放在“for”循环之外：

```
 <div class="fieldWrapper"> 
 {% for field in form %}
         {{ field.errors }}
         {{ field.label_tag }}: {{ field }}
 {% endfor %} 
 </div> 
```

或不添加外部 css 类：

```
 {% for field in form %}
        {{ field.errors }}
        <nobr> {{ field.label_tag }}: {{ field }}</nobr>
 {% endfor %} 
```

# java - 如何右键单击/复制 JLabel 中的图像

> ID：13911913
> 
> 赞同：1
> 
> 时间：2012-12-17T10:01:10.663
> 
> 标签：java, copy, jlabel

我想知道是否可以允许用户从 JLabel 复制图像？

如果是这样，请告诉我我需要在 java 文档中搜索什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:06:59.277

努力：是的。您需要在该标签上定义一个操作，以便如果用户单击它，则将图像复制到剪贴板中。

**延伸阅读**

*   [如何编写鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)
*   [将 BufferedImage 复制到剪贴板](https://stackoverflow.com/questions/4552045/copy-bufferedimage-to-clipboard)

# asp.net - 在网页中进行更改时要上传哪些文件？

> ID：13911916
> 
> 赞同：3
> 
> 时间：2012-12-17T10:01:19.180
> 
> 标签：asp.net, visual-studio-2010

我的网站位于 ISP 的异地。

我记得我上次在 2005 年编写 ASP.NET 时，如果您进行页面更改，您必须上传页面文件和 BIN 文件夹中的内容。

Visual Studio 2010 仍然是这种情况吗？

敬茶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:50:25.907

仅更改生产环境中的特定文件绝不是一个好主意。您应该考虑使用 VS 解决方案资源管理器中的发布选项（即使发布到临时文件夹然后手动复制到生产中）。这样，您将确保您的开发/测试版本与生产相匹配，并避免任何潜在的意外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:03:29.167

是的，无论您的开发环境如何，情况仍然如此。

克里斯

# magento - 从 1.3x 升级到 1.7.0.2 后，magento 产品 getName() 无法正常工作

> ID：13911917
> 
> 赞同：1
> 
> 时间：2012-12-17T10:01:26.827
> 
> 标签：magento

[通过本教程](http://turnkeye.com/blog/magento-upgrade-guide/)将 magento 商店从 1.3x 升级到 1.7.0.2 后，我遇到了很多问题，我解决了大部分问题，但我无法解决这个奇怪的问题。

在后端，产品列表运行良好，但如果我进入任何产品的编辑页面，名称/描述和许多字段为空（但类别/库存有效），这意味着这里无法加载所有产品属性。

然后我尝试了：

```
$product = Mage::getModel("catalog/product")->load(some_id);
var_dump($product->getData()); 
```

我在那里也找不到任何属性值，如果我直接写 $product->getName()，我得到 NULL。

有人可以帮忙吗？至少为我指出解决这个问题的方向。我试图查看代码，但很难找到 magento 的 load() 函数实际上是如何工作的。

# jakarta-ee - 部署axis2 Web服务时出现空指针异常

> ID：13911920
> 
> 赞同：0
> 
> 时间：2012-12-17T10:01:46.297
> 
> 标签：jakarta-ee, axis2, tomcat7

我目前正在开始开发 Web 服务，在本地 tomcat 7.0 服务器上使用 eclipse IDE 和轴 2。

当我尝试部署服务时，我得到：

```
[ERROR] The encoSendInterface service, which is not valid, caused The following error occurred during schema generation: null org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: null
at  org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:432)
at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:178)
at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:377)
at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
at org.apache.axis2.deployment.DeploymentEngine.loadServices(DeploymentEngine.java:142)
at org.apache.axis2.deployment.WarBasedAxisConfigurator.loadServices(WarBasedAxisConfigurator.java:283)
at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:95)
at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5015)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
 Caused by: org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: null
at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:396)
... 27 more
Caused by: java.lang.NullPointerException
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:606)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaTypeforNameCommon(DefaultSchemaGenerator.java:1092)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchemaForType(DefaultSchemaGenerator.java:996)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.processMethods(DefaultSchemaGenerator.java:385)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.generateSchema(DefaultSchemaGenerator.java:273)
at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:468)
at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:388)
... 27 more
[INFO] org.apache.axis2.deployment.DeploymentException: The following error occurred during schema generation: null 
```

有没有办法找出导致此异常的原因？

我的 WS 的当前版本不读取任何配置文件。在构建 Web 服务时，是否有任何我不能使用的库，这可能会导致整个节目崩溃？

问候， 路易吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T22:20:51.547

`@WebMethod(exclude = true)`如果这对任何人都有帮助，我通过添加我在服务类上的一些设置器（用于依赖注入）来解决这个问题。

根据[JAX-WS 指南](http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html "JAX-WS 指南")

> 如果未指定 @WebMethod 注释，则公开所有公共方法，包括继承的方法，但从 java.lang.Object 继承的方法除外。@WebMethod 注解的 exclude 参数可用于控制公开哪些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T10:34:15.847

我已经解决了这个问题。Ws 的公共方法之一有一个参数，其名称与类属性之一完全相同。虽然这适用于常规（javaSE）开发，但它似乎确实会在 Web 服务中造成麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T10:02:34.777

从axis2 1.5.1升级到1.6.2后，我遇到了相同（或非常相似）的问题。

将 '@WebMethod(exclude = true)' 添加到非 webmethod 公共方法为我修复了它。

# javascript - Javascript原型函数返回函数抛出错误

> ID：13911921
> 
> 赞同：0
> 
> 时间：2012-12-17T10:01:48.277
> 
> 标签：javascript, jquery

我添加了一个函数以通过相反的顺序返回我的函数，稍后当我调用它时，我无法得到结果。而是抛出错误。

有人告诉我我的做法是错的吗？

```
String.prototype.reverse = function(st){
    return st.split('').reverse().join('');
}

var myString = "sample string to reverse";

var reversed = myString.reverse(); 
```

我明白我的方式是错误的。任何人都可以帮助我纠正我的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:03:41.927

用这个'。因为您没有传递任何参数来反转。

```
 String.prototype.reverse = function(){
      return this.split('').reverse().join('');
  }

  var myString = "sample string to reverse";

  var reversed = myString.reverse(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:07:10.373

问题是您将函数配置为在此处接受参数实际上不需要参数，只需将其更改为：

```
 String.prototype.reverse = function(){
      return this.split('').reverse().join('');
  }

  var myString = "sample string to reverse";

  var reversed = myString.reverse(); 
```

# javascript - 在悬停 jquery 卷轴上停止/播放

> ID：13911925
> 
> 赞同：4
> 
> 时间：2012-12-17T10:02:00.267
> 
> 标签：javascript, jquery, jquery-reel

嗨，我是使用 jquery reel 的新手。我想了解当您将鼠标悬停在 jquery reel [http://test.vostrel.cz/jquery.reel/docs/jquery.reel.html](http://test.vostrel.cz/jquery.reel/docs/jquery.reel.html)上时如何停止和播放。我看到有一个停止、启动和暂停事件，但我不确定如何在悬停时激活它。

谢谢！

```
<img id="image360" src='1.jpg' width="610" height="480" />

<script>
$(function(){ 

//pause on hover (This does not work although hover is registered)
        $('#image360').hover(function() {

        ('#image360').pause();
},

function() {
        ('#image360').play();
});

//360 settings

        $('#image360').reel({
        indicator:   5,
        cw:          true,
        frame:       36,
        speed:       -0.3,
        velocity:    2,
        brake:       .2,
        images:      'cmopen/#.jpg' 
        });

        });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T11:52:32.153

我遇到了完全相同的问题，并用两个 JS 函数解决了它：

```
function reel_pause() {
    $('#your_reel_id').trigger("stop"); //stoppe le défilement automatique.
}
function reel_play() {
    if ($('#your_reel_id').data("backwards")) { //teste le sens de défilement.
        $('#your_reel_id').trigger('play'); //relance le défilement à la même frame où on l'a arrêté. Attention, il relance dans son sens naturel (droite à gauche).
        $('#your_reel_id').data("backwards", true) //inverse le sens de défilement
    } else {
        $('#your_reel_id').trigger('play'); //si le sens où l'on a arrêté le défilement est le sens naturel, on n'a pas besoin d'inverser comme au dessus.
    }
} 
```

**这仅在您不希望卷轴循环时才重要：** 如果您不会说法语，则“if”语句用于在卷轴播放时检查方向。

```
$('#your_reel_id').data("backwards")
$('#your_reel_id').data("backwards", true) 
```

第一个返回真或假。False-> 从右到左播放。第二个改变自然方向 -> 从左到右。我这样做是因为当您播放卷轴时，它会按自然方向播放。即使你在它以另一种方式播放时停止它。

html 看起来像这样：

```
<div id="container" onmouseover="reel_pause()" onmouseout="reel_play()">
    <img src="../Images/image.jpg" id="your_reel_id" width="900" height="500" />
</div> 
```

我将它包裹在一个 div 中，因为我使用卷轴内的链接。如果您将鼠标悬停在一个链接上，就好像您将鼠标悬停在卷轴上并重新开始播放。希望能帮助到你！

我绝不是 JS 专家，所以如果有人有更好的方法，请发布！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:04:22.113

你必须使用方法：pause()、play()。

```
$(<your_element>).hover(function() {
    <your_reel>.pause();
},function() {
    <your_reel>.play();
}); 
```

# javascript - JavaScript 全局变量赋值

> ID：13911930
> 
> 赞同：0
> 
> 时间：2012-12-17T10:02:19.807
> 
> 标签：javascript

如图所示，我编写了一个代码，其中我为全局变量分配了一个值，这暂停了我进一步的代码执行。

resultCollection 是全局变量。我的程序也在严格模式下运行。

```
"use strict";
var View = Backbone.View.extend({
     initialize : function(options){
         this.el = options.el;
         resultCollection = options.resultCollection;
         console.log('resultCollection',resultCollection);
         this.render();
     } 
```

console.log 从未打印过，执行也不会停止，只是在为全局变量赋值时暂停或仍在执行。

为什么会这样？谁能给我一些见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:10:02.987

在严格模式下，您应该已经在控制台中看到了错误。

所以在你的变量名前面加上`window.`它就可以了。

PS：见[http://jsfiddle.net/zerkms/6M3HM/](http://jsfiddle.net/zerkms/6M3HM/)

在控制台中你会得到`Uncaught ReferenceError: b is not defined`，而 global`a`定义得很好。

# java - 将 ByteInputStream 分配给 InputStream 保持绑定到终端模拟器

> ID：13911931
> 
> 赞同：1
> 
> 时间：2012-12-17T10:02:22.793
> 
> 标签：java, android, stream, inputstream

我正在尝试使用 android 中的库连接到终端仿真器，这将连接到串行设备并应该向我显示发送/接收的数据。要附加到终端会话，我需要提供`inputStream`to`setTermIn(InputStream)`和`outputStream`to `setTermOut(OutputStream)`。

我像这样初始化并附加了一些流`onCreate()`，这些只是初始流，并没有附加到我想要发送/接收的数据上。

```
private OutputStream bos;
private InputStream bis;

...

byte[] a = new byte[4096];
bis = new ByteArrayInputStream(a);
bos = new ByteArrayOutputStream();
session.setTermIn(bis);
session.setTermOut(bos);
/* Attach the TermSession to the EmulatorView. */
mEmulatorView.attachSession(session); 
```

我现在想在发送和接收数据时将流分配给数据。在每次按 Enter 时调用的 sendData() 方法中，我有：

```
public void sendData(byte[] data)
{
        bos = new ByteArrayOutputStream(data.length);         
} 
```

在 onReceiveData() 方法中，每次通过串行接收数据时调用：

```
public void onDataReceived(int id, byte[] data)
{
        bis = new ByteArrayInputStream(data);           
} 
```

但是，a`ByteArrayInputStream`只能拥有给它的数据，因此在发送和接收数据时需要不断地创建它。现在的问题是，我希望这些数据出现在终端上，但是当我将 bis 分配给数据时，它不再像我打电话时那样附加`mEmulatorView.attachSession(session);`

有没有办法在不破坏 bis 对终端的绑定的情况下更新 bis 指向的内容？

编辑：另外，如果我尝试再次调用附加，我会收到错误，尽管理想情况下我不想再次调用它等等。

```
 SerialTerminalActivity.this.runOnUiThread(new Runnable() {
            public void run() {

                mSession.setTermIn(bis);
                mSession.setTermOut(bos);
                mEmulatorView.attachSession(mSession);
            }
          }); 
```

虽然那可能是我在那里的编码。 [http://i.imgur.com/de8D5.png](http://i.imgur.com/de8D5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:18:16.080

包装 ByteArrayInputStream 添加您需要的功能。

举个例子：

```
public class MyBAIsWrapper implements InputStream {

   private ByteArrayInputStream wrapped;

   public MyBAIsWrapper(byte[] data) {
       wrapped=new ByteArrayInputStream(data);
   }

   //added method to refresh with new data
   public void renew(byte[] newData) {
       wrapped=new ByteArrayInpurStream(newData);
   }

   //implement the InputStreamMethods calling the corresponding methos on wrapped
   public int read() throws IOException {
      return wrapped.read();
   }

   public int read(byte[] b) throws IOException {
       return wrapped.read(b);
   }

   //and so on

} 
```

然后，更改您的初始化代码：

```
byte[] a = new byte[4096];
bis = new MyBAIsWrapper(a);
session.setTermIn(bis);
//here, you could do somethin similar for OoutpuStream if needed, or keep the same initialization...
bos = new ByteArrayOutputStream();
session.setTermOut(bos);
/* Attach the TermSession to the EmulatorView. */
mEmulatorView.attachSession(session); 
```

并更改 onDataReceived 方法以更新输入流数据：

```
public void onDataReceived(int id, byte[] data)
{
    //cast added to keep original code structure 
    //I recomend define the bis attribute as the MyBAIsWrapper type in this case
    ((MyBAIsWrapper)bis).renew(data);
} 
```

# iphone - 获取纬度和经度的另一种方法

> ID：13911932
> 
> 赞同：0
> 
> 时间：2012-12-17T10:02:23.807
> 
> 标签：iphone, objective-c, ios, latitude-longitude

我正在做一个应用程序。我想在单独的线程中找出当前位置的纬度和经度值。但是在单独的线程中 CLLocationManager 委托方法不会被触发。所以请告诉我是否有任何其他方法可以获取该信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:26:18.380

你问错问题了。
你不需要那个！

只需使用 Cllocatiomanager 委托的标准方式（didUpdatFromLocation ...）。这就是您所需要的，也可以在后台运行。获取该信息的速度很快，现在这将影响主线程的性能。

**如果在获得纬度/经度位置后**进行耗时的计算，则可以将坐标发送到执行该计算的另一个线程。但这由您负责，并且不会干扰苹果框架。

并且：没有其他方法可以获取当前的纬度/经度，只有 didUpdateFromLocation...

# python - 使用 call_command 时 collectstatic 命令的异常行为

> ID：13911933
> 
> 赞同：2
> 
> 时间：2012-12-17T10:02:28.290
> 
> 标签：python, django, encoding, non-ascii-characters

使用时

```
python manage.py collectstatic 
```

它执行正确但是当我做类似的事情时

```
call_command('collectstatic', interactive=False) 
```

来自 django 外壳。它抛出一个异常

```
'ascii' codec can't decode byte 0xc2 in position 10: ordinal not in range(128) 
```

DATA USED：静态文件夹，其中包含名称字符不在 ascii 范围内的图像

# flash - 网络上的 SWF 文件的最大文件大小是多少？

> ID：13911935
> 
> 赞同：0
> 
> 时间：2012-12-17T10:02:44.703
> 
> 标签：flash, filesize

这样的问题一定被反复回答过很多次了。但由于我在 stackoverflow 上找不到它回答她的问题，所以我再问一次：

通过 Web 发送到客户端的 SWF 文件的文件大小是否有合理的上限？

编辑：这将是一个类似于杂志的 SWF，源自 PDF。用户期望大量的文本和图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:16:48.897

我认为这条评论回答了这个问题：

> 我不认为有一个硬的最大值，我已经看到一些游戏占用超过 GB 的内存。我认为真正的问题是下载时间比其他任何事情都重要。– lc。

# salesforce - 检查是否在 Salesforce 中安装了某个扩展

> ID：13911946
> 
> 赞同：3
> 
> 时间：2012-12-17T10:03:04.407
> 
> 标签：salesforce, apex-code, visualforce

我正在开发 Salesforce 应用程序。该应用程序包含一些自定义对象，其中之一是 Project。我创建了一个 Visualforce 页面来管理这些项目。我们也在开发一个扩展。在扩展中，一个新的自定义字段被添加到 Project 对象中。在原始包中，我想更改visualforce页面以显示该字段的值（如果安装了扩展）。所以我需要检查扩展是否已安装，如果是，则显示该扩展中的一个字段。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T08:25:54.753

我最终使用的解决方案是在基类中创建一个接口，它的默认实现并没有做太多的事情。然后我创建了一个自定义设置，其中应该输入另一个实现该接口的类名。同样在基类中，我创建了一个工厂，可用于获取接口的实现。我以[本指南](http://blogs.developerforce.com/developer-relations/2012/05/dynamic-apex-class-instantiation-in-summer-12.html)为基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T15:53:12.540

您最好在[Salesforce 专用的 Stack 站点](https://salesforce.stackexchange.com/)上问同样的问题。似乎有很多成员构建托管包。

我会尝试一些动态 Apex（如[describe methods](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#StartTopic=Content/apex_dynamic_describe_objects_understanding.htm)）来检查对象和字段是否存在。

例如，如果您从 AppExchange 安装了 Chatter Unfollow 应用程序并希望依赖其对象：

```
String objectName = 'chttrunfollow__UnfollowRule__c';
String fieldName = 'chttrunfollow__Active__c';

Map<String, Schema.SObjectType> gd = Schema.getGlobalDescribe();
Schema.SObjectType t = gd.get(objectName);
if(t != null) {
    Schema.DescribeSObjectResult sobjectDescribe = t.getDescribe();
    System.debug(sobjectDescribe.isAccessible());

    Map<String, Schema.SObjectField> fields = sobjectDescribe.fields.getMap();
    if(fields != null && fields.get(fieldName) != null && fields.get(fieldName).getDescribe().isAccessible()) {
        System.debug('Show it!');
    }
} else {
    System.debug(LoggingLevel.ERROR, 'Not found');
} 
```

这可能是一项非常昂贵的操作，因此您可能希望将结果缓存在某处（自定义设置？）。

有一个`System.requestVersion()`电话，但我认为它只返回“你的”当前版本（不能用它来询问给定组织中还安装了什么）。如果您使用许可证 -`UserInfo.isCurrentUserLicensed('namespace')`可能值得检查？

# ssh - 通过 putty 连接到远程主机

> ID：13911947
> 
> 赞同：0
> 
> 时间：2012-12-17T10:03:06.630
> 
> 标签：ssh, x11, putty, xming

当我尝试连接到远程主机时出现以下错误。

```
Can't connect to X11 Windows server using "0:0" as the value of the display variable. 
```

我如何克服它？

其他信息： 1\. 我正在运行一台 windows 机器，主机是基于 unix 的。2.我安装了Xming。3\. 我已将显示命令设为 export DISPLAY=0:0 4\. 我已检查 SSH 中的 X11 选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:48:15.710

这里有几个问题：

1.  显示格式为：。所以您可能被告知将其设置为“：0.0”，但这是错误的，因为这是本地计算机上的默认服务器。

2.  当您使用 ssh 连接（启用 X11 转发）时， DISPLAY 变量将由 ssh 设置为类似 localhost:10.0 的内容，因此您不必设置 DISPLAY 变量（除非您的 .bashrc 更改它）。

# c++ - 方法 removeElement() 自己的 Vector 类实现

> ID：13911950
> 
> 赞同：-4
> 
> 时间：2012-12-17T10:03:22.707
> 
> 标签：c++, vector

我必须实现删除向量中指定元素的方法。有人知道这种方法的算法吗？

我需要它，因为 brew 平台不支持 STL。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:05:59.193

该算法相当简单：

```
for each element in vector
    if element = elemToRemove
        delete it 
```

然后，它使用按索引删除。您的数组分解为：

```
n+1 is the size of the array
i is the cell to delete

[0][1][2]...[i-1][i][i+1]...[n]
-----------------   -----------
part1               part 2 
```

您必须将每个元素从`[i+1]`到`[n]`移向数组的开头（=`part 2`移向数组的开头）以使数组仍然连续。

# ruby-on-rails - Rails 3 - 使用 json 上传图片

> ID：13911954
> 
> 赞同：8
> 
> 时间：2012-12-17T10:03:32.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, paperclip, binary-data

在我的 Rails 3 应用程序中，我有多个模型，每个模型都与另一个模型相关联。

`User`模型

```
has_many :departments
accepts_nested_attributes_for :departments 
```

`Department`模型

```
has_many :projects
accepts_nested_attributes_for :projects 
```

我正在尝试使用 JSON通过[邮递员 REST 客户端插入数据。](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)我发现了一些格式，除了`User`模型中有一个图像上传字段，我将使用`PaperClip`gem 处理。

通过我的 Rails 视图它工作正常，但是如何使用邮递员上传图像？

为了通过 REST 客户端上传，我需要与我的图像等效的 JSON 格式。

有什么方法可以将图像嵌入到 json 中，以便我可以使用邮递员休息客户端？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T11:42:18.493

## - **使用 Base64**

> **什么是 Base64**
> 当您有一些二进制数据要通过网络传送时，通常不会通过以原始格式通过网络传输位和字节来实现。为什么？因为某些媒体是为流式传输文本而制作的。你永远不知道——一些协议可能会将你的二进制数据解释为控制字符（如调制解调器），或者你的二进制数据可能会被搞砸，因为底层协议可能认为你输入了特殊的字符组合（如 FTP 如何转换行结局）。
> 
> 因此，为了解决这个问题，人们将二进制数据编码为字符。Base64 是这些类型的编码之一。为什么是64？因为您通常可以依赖许多字符集中存在的相同 64 个字符，并且您可以有理由相信您的数据最终会完好无损地传输到线路的另一端。

-- 摘自[What is base 64 encoding used for？](https://stackoverflow.com/questions/201479/what-is-the-use-of-base-64-encoding)

* * *

因此，一种方法是将 Base64 字符串放入您的 json 请求中并让您的应用程序对其进行解码。

```
 # Your request
 {
    'user':{
     # .... 
         'picture':'GIF89a\xB4\x00\x1F\x00\xE7\xFD....'
     }
 } 
```

这是您的模型可以执行的操作

```
 class User < ActiveRecord::Base
   def convert_from_base64(image_data)
     data = StringIO.new(Base64.decode64(image_data))
     data.class.class_eval { attr_accessor :original_filename, :content_type }

     tmp = Tempfile.new("base64")
     tmp.write(data.read)
     tmp.close

     # only on *nix
     data.content_type = IO.popen(["file", "--brief", "--mime-type",tmp.path], 
        in: :close, err: :close).read.chomp
     data.original_filename = "picture." + data.content_type.split("/").last

     data
   end
 end

 # in your controller
 def create
   image_data = JSON.parse(params[:json])['user']['picture'] #or which ever field it is
   params[:user][:picture] = @user.convert_from_base64(image_data)
   # ....  
 end 
```

但是快速浏览一下 POSTMAN 会告诉我你必须自己进行编码。

* * *

**或者**
，您可以只传递 url 而不是数据 - 如果 url 指向网络上可用的资源。

```
require "open-uri"

class User < ActiveRecord::Base
  def picture_from_url(url)
    self.picture = open(url)
  end
end
# then just do 
user.picture_from_url params[:user][:photo_url] 
```

**Update**
Postman 实际上允许您构建一个附有图像的发布请求。这不是你要找的吗？

# jquery - 在 jqgrid 中按下 tab 键时无法触发 oncellselect？

> ID：13911957
> 
> 赞同：0
> 
> 时间：2012-12-17T10:03:39.757
> 
> 标签：jquery, jqgrid

我想在按下 tab 键时触发 oncellselect 事件。只要使用鼠标单击选择单元格，它就可以正常工作。但是我注意到当按下选项卡时，只会触发 aftercelledit 的事件！有什么建议可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:23:08.997

您应该更清楚地描述您使用的场景。jqGrid 支持通过键盘选择行（请参阅 参考资料`bindKeys`），但不支持选择单元格。

可能您使用单元格编辑，它使用内部`GridNav`方法来激活键导航。在单元格编辑的情况下，该`Tab`键激活下一个可编辑单元格的编辑。所以你应该使用[单元格编辑的回调，](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#events)比如`beforeEditCell`, `afterEditCell`，`onSelectCell`而不是`onCellSelect`用作`click`事件的句柄。

# assembly - 汇编位移

> ID：13911961
> 
> 赞同：1
> 
> 时间：2012-12-17T10:03:53.730
> 
> 标签：assembly, x86, bit-manipulation

`%ecx`给定and中的 32 位十进制数，当尝试使用然后 将进位（刚刚被剪切的位）移动到 8 位寄存器并比较是否相等`%edx`时，尝试左移和右移原始数的每个副本时，我写道：`shl``shr``ah``al`

```
movl    $32, %esi   #counter
xor     %eax, %eax
.LOOP:
shl     %ecx
setb    %ah
shr     %edx
setb    %al
cmp     %ah, %al
jnz     .np
decl    %esi
jnz     .LOOP 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:43:10.323

您正在比较来自相反两侧的 2 个数字。您的程序继续循环 while `ecx[i] == edx[32-i]`。所以你实际上在做的是检查是否`ecx`包含`edx`. 例如，它会返回 true for `ecx`with value`0x200000`和`edx`with value `0x400`。

# c++ - 三次贝塞尔曲线到二次曲线

> ID：13911963
> 
> 赞同：1
> 
> 时间：2012-12-17T10:03:58.883
> 
> 标签：c++, actionscript-3, opengl, bezier, spline

我必须编写一个函数，将三次贝塞尔曲线（开始、结束、cp1、cp2）转换为简单的二次（开始、结束、cp1）实例（一个三次可以变成 2 个或更多二次）。

任何编码语言都可以接受，我只需要算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T10:12:15.800

有某些形状，比如圆形，可以用三次方来近似，*但不能*用二次贝塞尔曲线来近似。所以从纯数学的角度来看，这个任务是无法解决的。

然而，当然可以用一组分段二次贝塞尔曲线来近似单个三次贝塞尔曲线。每个二次方的点将位于三次方的精确点上。您可以通过某种优化方法（最小二乘或类似方法）找到控制点，在这些控制点中，您尝试最小化三次贝塞尔曲线和二次贝塞尔曲线之间的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:37:23.640

最后我决定自己实现它，使用 lineto 循环，类似于： http: [//www.paultondeur.com/2008/03/09/drawing-a-cubic-bezier-curve-using-actionscript -3/](http://www.paultondeur.com/2008/03/09/drawing-a-cubic-bezier-curve-using-actionscript-3/)

# facebook - Facebook 通过带有图形 api 的 Fb 应用程序在墙上发布消息

> ID：13911968
> 
> 赞同：2
> 
> 时间：2012-12-17T10:04:13.767
> 
> 标签：facebook, facebook-graph-api, cordova, oauth

我在使用 Facebook 时遇到了一个奇怪的问题，我目前正在使用 Phonegap 开发一个应用程序。

我遵循了这个博客的非常酷的教程[http://www.drewdahlman.com/meusLabs/?p=88](http://www.drewdahlman.com/meusLabs/?p=88)并对其进行了改进，使其能够使用新的 API 并允许我发布消息。

所以我使用 oAuth 与 Facebook 连接，一切正常。然后我就可以通过具有相同令牌的图形 api 发布消息。

因此，当我使用我的 Facebook 帐户（我是 Facebook 应用程序的管理员）时，我有这个完美的方法

```
share:function(url, success){
    var req = new XMLHttpRequest();
    req.open('POST', url, true);
    var _interval = setTimeout(function(){
        success.call(this, false);
    }, 31000);
    req.onreadystatechange = function() {if (req.readyState==4 && req.status==200){clearTimeout(_interval); success.call(this, true);}}
    req.send(null);
    return req;
},

post:function(_fbType,params, success){
    var url = 'https://graph.facebook.com/me/'+_fbType+'?'+localStorage.getItem(facebook_token);

    for(var key in params){
        if(key == "message"){
            url = url+"&"+key+"="+escape(params[key]);
        }
        else {
            url = url+"&"+key+"="+encodeURIComponent(params[key]);
        }
    }
    var req = Facebook.share(url, success);
}, 
```

但是，如果使用我的应用程序的不是应用程序的管理员，则连接将正常工作，但如果尝试发布机智将无法正常工作。

在我的 Facebook 应用程序中，沙盒模式被禁用。应用中心还没有审核，可能是这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:54:03.783

看看这个 FaceBook [Doc](https://developers.facebook.com/docs/feed-gaming/)。`method: 'feed'` **feed**是wallpost 的关键字。这不仅适用于游戏。我们可以用于应用程序和所有。

# javascript - 使用 TypeScript 声明 Sammy js 设置

> ID：13911971
> 
> 赞同：4
> 
> 时间：2012-12-17T10:04:18.947
> 
> 标签：javascript, knockout.js, typescript, sammy.js

我刚刚浏览了 KnockOut.js 教程，但用 TS 替换了 JS 代码。添加 SammyJS 时，我遇到了以下代码。任何人都可以建议 TS 中的 Sammy 功能代码如何？

```
function WebmailViewModel() {
// Data
var self = this;
self.folders = ['Inbox', 'Archive', 'Sent', 'Spam'];
self.chosenFolderId = ko.observable();
self.chosenFolderData = ko.observable();
self.chosenMailData = ko.observable();

// Behaviours    
self.goToFolder = function(folder) { location.hash = folder };
self.goToMail = function(mail) { location.hash = mail.folder + '/' + mail.id };

// Client-side routes    
Sammy(function() {
    this.get('#:folder', function() {
        self.chosenFolderId(this.params.folder);
        self.chosenMailData(null);
        $.get("/mail", { folder: this.params.folder }, self.chosenFolderData);
    });

    this.get('#:folder/:mailId', function() {
        self.chosenFolderId(this.params.folder);
        self.chosenFolderData(null);
        $.get("/mail", { mailId: this.params.mailId }, self.chosenMailData);
    });

    this.get('', function() { this.app.runRoute('get', '#Inbox') });
}).run();    
};

ko.applyBindings(new WebmailViewModel()); 
```

我正在关注的教程在这里[http://learn.knockoutjs.com/#/?tutorial=webmail](http://learn.knockoutjs.com/#/?tutorial=webmail)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T04:11:46.377

我不确定这是否能回答您的问题，但您可以利用此处描述 Sammy 的 TypeScript 定义文件[https://github.com/borisyankov/DefinitelyTyped/blob/master/sammyjs/sammyjs.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/sammyjs/sammyjs.d.ts)这应该有足够的 sammy api 供您继续您的教程。

下载定义文件并使用类似于下面的特殊注释进行引用。

```
///<reference path="sammyjs/sammyjs.d.ts" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-20T07:07:55.633

我知道这是一个老问题，但这确实给我带来了足够的痛苦，值得向未来的访客推荐。

我已经用 TypeScript 重写了上面的示例代码。

```
/// <reference path="../Scripts/typings/jquery/jquery.d.ts" />
/// <reference path="../Scripts/typings/Sammy/Sammy.d.ts" />
import sammy = require("sammy");
class WebmailViewModel
{
    // Data
    public folders: Array<string> = ['Inbox', 'Archive', 'Sent', 'Spam'];
    public chosenFolderId: KnockoutObservable<any> = ko.observable();
    public chosenFolderData: KnockoutObservable<any> = ko.observable();
    public chosenMailData: KnockoutObservable<any> = ko.observable();

    // Behaviours    
    public goToFolder = function (folder) { window.location.hash = folder };
    public goToMail = function (mail) { window.location.hash = mail.folder + '/' + mail.id };

    // Client-side routes    
    public SammyApp: sammy.Application =
    Sammy().get('#:folder', context =>
    {
        this.chosenFolderId(context.params.folder);
        this.chosenMailData(null);
        $.get("/mail", { folder: context.params.folder }, this.chosenFolderData);
    }).get('#:folder/:mailId', context =>
    {
        this.chosenFolderId(context.params.folder);
        this.chosenFolderData(null);
        $.get("/mail", { mailId: context.params.mailId }, this.chosenMailData);
    }).get('', context =>
    {
        context.app.runRoute('get', '#Inbox');
    }).run();
}; 
```

然后，在 $(document).ready()

```
var viewModel = new WebmailViewModel;
ko.applyBindings(viewModel); 
```

非常感谢@Vladimir，他的回答[堆栈溢出问题 19395335](https://stackoverflow.com/questions/19395335/declare-routes-in-sammy-js-in-typescript) 让我找到了解决方案。

干杯。

# c# - 如何在 Asp.net 中生成动态 asp 菜单的面包屑？

> ID：13911975
> 
> 赞同：0
> 
> 时间：2012-12-17T10:04:25.577
> 
> 标签：c#, asp.net, dynamic, breadcrumbs, aspmenu

我有一个动态生成的菜单（C#），如下所示：

```
MenuItem(string text, string value, string imageUrl, string navigateUrl, string target)

MenuItem AdminLevel1 = new MenuItem("Admin", "Admin");
MenuItem AdminPedidosRegisto = new MenuItem("Questions", "AdminQ");

NavigationMenu.Items.Add(new MenuItem("Messages Received", "AdminMessagesR", "", "./Admin/Messages.ascx", "ContainerIframe"));

AdminPedidosRegisto.ChildItems.Add(new MenuItem("Pending", "AdminPending", "", "./Admin/Pedidos.ascx", "ContainerIframe"));` 
```

`ContainerIframe`iframe 的 ID 和`NavigationMenu`(asp:Menu) 的ID在哪里。

我想在我的页面上添加面包屑，但菜单并不总是相同的。

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:51:49.237

正如我所看到的，您手动管理菜单项，您应该对面包屑项执行相同的操作。

只需在母版页上创建一个 List breadCrumbItems 并在每个页面中添加相应的面包屑。

如果您的菜单项是动态生成的，请使用相同的结构来生成面包屑。

# iphone - 如何用分页加载我的表格视图？

> ID：13911977
> 
> 赞同：15
> 
> 时间：2012-12-17T10:04:53.290
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我的应用程序中有一个表格视图，我正在向其中加载不同类型的单元格。这很好，工作得很好。但现在我需要进行分页。我需要将页码作为一、二等传递给服务，并在第一页结束时加载。对于第一个我加载的计数是 5，之后滚动结束时我需要加载下一个。我是这个分页的新手。任何人都可以给我遵循的方向吗？我试过这样但它会变成一个无限循环`

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *) cell     forRowAtIndexPath:(NSIndexPath *)indexPath
{
    int count1 = [array count];
    NSLog(@"%d",count1);
     NSLog(@"%d",indexPath.section);
    NSLog(@"%d",max);
    NSLog(@"%d",min);

    if(indexPath.section == count1 - 1) // If going to display last row available in your source
    {

        NSLog(@"%d",max);
          NSLog(@"%d",min);

        if(min <= max) 
        {

            [self getmessages:min];
        }
        else
        {
            self.mtableview.tableFooterView = nil; //You can add an activity indicator in tableview's footer in viewDidLoad to show a loading status to user.
        }

    }
} 
```

`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T10:13:09.200

UITableView 可以支持浏览多行数据，但是获取大量远程数据会降低您的应用程序的速度，占用过多的内存，并使您的 Web 服务器陷入困境。如果用户永远不会向下滚动那么远，这一切都是浪费。在这一集中，您将学习如何使用一种简单的技术来执行自动 UITableView 分页。

**初始化**

```
- (void)viewDidLoad {
    [super viewDidLoad];

    self.beers = [NSMutableArray array];
    _currentPage = 0;
} 
```

**为当前页面发出 HTTP 请求**

```
- (void)fetchBeers {
    NSString *urlString = [NSString 
      stringWithFormat:@"http://localhost:3000/beers.json?page=%d", 
      _currentPage];
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = 
      [[AFJSONRequestOperation alloc] initWithRequest:request];
    [operation setCompletionBlockWithSuccess:
      ^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"responseObject %@", responseObject);

        _totalPages = [[responseObject 
          objectForKey:@"total_pages"] intValue];

        for (id beerDictionary in [responseObject 
                                    objectForKey:@"beers"]) {
            Beer *beer = [[Beer alloc] 
              initWithDictionary:beerDictionary];
            if (![self.beers containsObject:beer]) {
                [self.beers addObject:beer];
            }

            [beer release];
        }

        [self.tableView reloadData];

    } failure:
      ^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", [error localizedDescription]);
        [[[[UIAlertView alloc] 
          initWithTitle:@"Error fetching beers!"
                message:@"Please try again later"
               delegate:nil
          cancelButtonTitle:@"OK"
          otherButtonTitles:nil] autorelease] show];
    }];

    [operation start];
    [operation release];
} 
```

**偏移行数**

```
- (NSInteger)tableView:(UITableView *)tableView 
 numberOfRowsInSection:(NSInteger)section {
    if (_currentPage == 0) {
        return 1;
    }

    if (_currentPage < _totalPages) {
        return self.beers.count + 1;
    }
    return self.beers.count;
} 
```

**渲染单元格**

```
- (UITableViewCell *)beerCellForIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"cell";
    UITableViewCell *cell = [self.tableView 
dequeueReusableCellWithIdentifier:cellIdentifier];
    if (!cell) {
        cell = [[[UITableViewCell alloc] 
            initWithStyle:UITableViewCellStyleSubtitle
          reuseIdentifier:cellIdentifier] autorelease];
    }

    Beer *beer = [self.beers objectAtIndex:indexPath.row];
    cell.textLabel.text = beer.name;
    cell.detailTextLabel.text = beer.brewery;

    return cell;
}

- (UITableViewCell *)loadingCell {
    UITableViewCell *cell = [[[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleDefault
               reuseIdentifier:nil] autorelease];

    UIActivityIndicatorView *activityIndicator = 
      [[UIActivityIndicatorView alloc] 
      initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    activityIndicator.center = cell.center;
    [cell addSubview:activityIndicator];
    [activityIndicator release];

    [activityIndicator startAnimating];

    cell.tag = kLoadingCellTag;

    return cell;
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row < self.beers.count) {
        return [self beerCellForIndexPath:indexPath];
    } else {
        return [self loadingCell];
    }
} 
```

**获取下一页**

```
- (void)tableView:(UITableView *)tableView 
  willDisplayCell:(UITableViewCell *)cell 
forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (cell.tag == kLoadingCellTag) {
        _currentPage++;
        [self fetchBeers];
    }
} 
```

这个例子来自[NSScreencast Episode 8 - Automatic UITableViewPaging](http://nsscreencast.com/episodes/8-automatic-uitableview-paging)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:05:56.163

从您发布的代码中：您确定需要 indexPath.section 吗？如果您使用的是部分，那么请确保该 `- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`方法应该返回您的数据源的计数，而不是 `- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`.

如果问题仍然存在，请发布上述方法代码。

# cognos - 如何在特定日期为特定客户在 Report Studio 中突发报表

> ID：13911980
> 
> 赞同：0
> 
> 时间：2012-12-17T10:05:00.747
> 
> 标签：cognos

客户的姓名和电子邮件地址存储在我的数据库中的一个突发表中。

爆表：

![在此处输入图像描述](../Images/08eb8aa2c67edde95814b8a5986be7a2.png)

我希望 joe 的报告在星期五上午 10 点被爆出..

如何在 cognos Report Studio 中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:10:27.713

报告突发和调度是完全不同的概念。

您不能在单个突发计划中组合不同的计划。如果您需要在不同的时间突发报告，那么您将使用不同的时间表，而不是将它们组合成单个突发。

您可以使用计划信息维护突发表并根据计划对其进行过滤。例如。假设客户 joe 想要在上午 10 点报告；将上午 10 点作为日程安排信息，并在上午 10 点存储所有用户并一次性运行它们。您可能需要根据用户的要求制定不同的时间表。

# tcp - OSI 模型：SSH 与 HTTP

> ID：13911981
> 
> 赞同：2
> 
> 时间：2012-12-17T10:05:07.747
> 
> 标签：tcp, ssh, communication, osi

我想知道，为什么 SSH 在 Model OSI 的会话层，而 HTTP 在应用层？
如我所见，两者都通过 TCP/IP 通信工作，那么为什么要将这两种协议区分为两个不同的层呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T10:12:24.097

HTTP 不关心它是以什么方式发送的，它只是由文本组成，然后可以由“说”HTTP 的应用程序解析，而 SSH 在现有网络上创建“虚拟连接”（会话）并允许更高级别的协议（如 HTTP）更安全地传递

# php - 不清除 Ajax 调用的现有记录 - DataTables

> ID：13911982
> 
> 赞同：0
> 
> 时间：2012-12-17T10:05:14.350
> 
> 标签：php, jquery, ajax, datatables

我正在使用 DataTables 插件从 mysql 表中检索数据并显示它们。为此，我使用他们的服务器端处理代码来检索所有数据。到目前为止，它工作正常。现在，我每分钟检查一次数据库是否插入了新记录。如果在数据库中插入了新记录，我将调用数据表函数。当时它清除整个记录并显示带有新插入记录的记录，因此它看起来像整个页面加载。我们可以不清除现有数据吗？或者我们可以在不清除记录的情况下将新插入的记录附加到现有记录中吗？或者我该如何处理这个？

这是我的代码

```
$('#example').dataTable({
                    "bProcessing": false,
                    "bServerSide": true,
                    "sPaginationType": "full_numbers",
                    "iDisplayLength":10,
                    "bDeferRender": true,
                    "bFilter": false,
                    "bSort": false,
                    "bInfo": true,
                    "sAjaxSource": #PHP_PATH#/json_data"
                   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:26:24.090

对于您要实现的目标，我还建议您调查 SignalR - 太棒了！

你用`bServerSide`处理做什么？

第一次生成页面并将其发送到客户端时，数据表将使用当时的最新数据呈现。之后，在每个后续的 ajax 调用中，如果您的服务器只向您发送新数据，您所要做的就是在成功/完成回调中调用以下方法。

```
function AddRow(row) {
    $('#example').dataTable().fnAddData([
        row[0],
        row[1],
        row[2]]);
} 
```

* * *

```
$.ajax({
    //...
    success: function(data) {
        //assuming data = ["COL.1", "COL.2", "COL.3"]
        AddRow(data);
    }
    //...
});​ 
```

# wcf - WCF 和 Silverlight 中的 Thread.Sleep

> ID：13911984
> 
> 赞同：0
> 
> 时间：2012-12-17T10:05:30.923
> 
> 标签：wcf, silverlight, task-parallel-library, duplex

我正在设计一款 Silverlight 游戏，但我坚持使用游戏结束功能。这是一款回合制纸牌游戏，我使用的是 WCF Duplex。但是当我调用 finalize 函数时，回调在 OnFinalized 消息之前接收 OnEndGame 消息。在开始新游戏之前，我需要在客户端播放一些动画。我尝试了很多东西，包括 Thread.Sleep 和 Task.Wait 等，但我无法找出问题所在。我应该怎么做才能让 EndGame 方法返回一些时间？

```
 private void FinalizeGame()
    {
        this.GameState = Enums.GameState.Finalize;

        Task.Factory.StartNew(()=>{
            CalculateWinners();
            GameSubscriptionManager.Publish(SubscriptionType.GameStream, cb => cb.OnFinalize(this));
        }).ContinueWith((antecedent)=>{
            EndGame();
        });
    }

    private void EndGame()
    {
        this.GameState = Enums.GameState.None;

        Thread.Sleep(5000);

        GameSubscriptionManager.Publish(cb => cb.OnEndGame(this));
        RemovePlayersAndGetWaitingPlayers();

        if (PlayingPlayers.Count > 1)
        {
            ResetGame();
            StartGame();
        }
        else
        {
            GameState = GameState.None;
            GameSubscriptionManager.Publish(cb => cb.OnWaitingForNewPlayers(this));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:40:06.333

我从未使用过 WCF，但如果您希望消息按顺序到达，我相信您需要启用 WS-ReliableMessaging。试试看[这个](http://msdn.microsoft.com/en-us/library/aa480191.aspx)。祝你好运。

TaskEx.Delay 比 Thread.Sleep 好得多，但是对于（几乎）任何问题的解决方案，任何一个都非常可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:10:19.010

您可以尝试以异步方式等待。使用 VS2012或[VS2010](http://nuget.org/packages/AsyncCTP)获取 Silverlight的[异步目标包](http://nuget.org/packages/Microsoft.Bcl.Async)。然后，您可以使用 TaskEx.Delay 作为 Thread.Sleep 的替换：

```
 private async Task EndGame()
    {
        this.GameState = Enums.GameState.None;

        await TaskEx.Delay(5000);

        GameSubscriptionManager.Publish(cb => cb.OnEndGame(this));
        RemovePlayersAndGetWaitingPlayers();

        if (PlayingPlayers.Count > 1)
        {
            ResetGame();
            StartGame();
        }
        else
        {
            GameState = GameState.None;
            GameSubscriptionManager.Publish(cb => cb.OnWaitingForNewPlayers(this));
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:47:28.270

好的。由于我的情况没有线程或任务处理，我决定做一个小技巧并使用动画来占用 UI 线程并使用其完成的事件处理程序来为我的应用程序制作延迟功能。

我首先为调度员做了以下扩展，

```
public static class Extensions
{
    public static event EventHandler OnCompleted;

    public static void WaitForFakeAnimation(this Dispatcher dispatcher, TimeSpan timeToWait, EventHandler onCompleted)
    {
        Storyboard sb = new Storyboard();
        sb.Duration = timeToWait;
        OnCompleted += onCompleted;
        sb.Completed += (s,e) => 
        {
            OnCompleted(sb, null);
            OnCompleted -= onCompleted;

        };
        sb.Begin();
    }

} 
```

我从我的 GameManager 类中调用它（可以被视为 ViewModel）

```
 EventHandler aferAnimation = (s,e) => {
            lock (syncServiceUpdate)
            {
                AddNotification(notification);
                // MessageBox.Show("after wait");

            };
        };
        this.gamePage.Dispatcher.WaitForFakeAnimation(TimeSpan.FromSeconds(15), aferAnimation ); 
```

我可能也会向扩展发送一个 ref Action，但目前这解决了我的问题。

我希望这对其他人也有帮助。

# python - 如何干净地关闭 PyQt 应用程序

> ID：13911985
> 
> 赞同：2
> 
> 时间：2012-12-17T10:05:30.373
> 
> 标签：python, user-interface, pyqt4, signals-slots

我开发了一个应用程序，它将有一个带有上下文菜单的 PyQt trayIcon。当它运行时，它被放置在系统托盘中。除了组织中的选定名称外，此应用程序将没有退出按钮。

这个应用程序是在系统启动时配置和放置的，所以当每个员工登录到他/她的系统时，它会跟踪他的登录并将数据库中的员工可用性更新为“在线”。

到目前为止，一切正常。主要问题是他/她何时注销或关闭系统并离开办公室。此时我需要在数据库中将员工可用性更新为“离线”。我不知道如何跟踪这些系统事件。

我尝试了以下信号

1.  最后一个窗口关闭（）
2.  aboutToQuit()
3.  销毁（）
4.  重载closeEvent()

当我启动注销/关闭时，我的关闭定义永远不会在这些信号中执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:34:21.143

有一个为这个任务设计的[QSessionManager](https://qt-project.org/doc/qt-4.8/qsessionmanager.html)类，虽然它在某些平台上似乎比其他平台上工作得更好。有关更多详细信息，请参阅[会话管理概述](https://qt-project.org/doc/qt-4.8/session.html)。

# java - 具有前导零输出的长变量

> ID：13911989
> 
> 赞同：3
> 
> 时间：2012-12-17T10:05:56.270
> 
> 标签：java

我无法理解为什么当 long 变量带有**前导零时**这样的输出。

```
public class Test{
        public static void main(String[] args) {
             long var1=00123l;
             long var2=123l;
             System.out.println("Variable 1--->"+var1);
             System.out.println("Variable 2--->"+var2);
             System.out.println(var1==var2);
        }
    } 
```

**输出：**

```
Variable 1--->83
Variable 2--->123
false 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T10:07:08.107

当文字以 0 为前缀时；java将其视为八进制数。当您打印相同的数字时，默认情况下它以 base(10) 格式打印。因此`00123l`打印为`83`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T10:07:17.503

前导零变成`00123l`八[进制](http://en.wikipedia.org/wiki/Octal)文字，并且 123 [8] =83 [10]。

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)：

> 八进制数字由一个 ASCII 数字 0 后跟一个或多个 ASCII 数字 0 到 7 和下划线组成，可以表示正整数、零整数或负整数。

当您打印该值时，它会以 10 为基数打印，因此您会看到`83`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T10:07:56.177

当您将前导零添加到值时，它将被解释为八进制值。

整数不能存储任何前导零。当您需要这些时，将数字存储为字符串。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T10:08:21.370

当您编写带有前导零的整数文字时，它被解释为[八进制](http://en.wikipedia.org/wiki/Octal)数。`00123`八进制是`83`十进制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:39:12.663

`00123`对于 Java，或`0123`或`0123l`全部相同。你可以测试一下。它们是八进制数。如果你转换它们，你会发现`(1X8^2)+(1X8^1)(1X8^0)=64+16+3=83`. 如果您愿意，可以将它们存储为字符串。

# sql - 将 YYMDD 转换为普通日期

> ID：13911992
> 
> 赞同：1
> 
> 时间：2012-12-17T10:06:04.303
> 
> 标签：sql, sql-server

我有`'12B17T'`准确表示的字符串`YYMDDA`（`A`是一个不相关的属性）。月份，`1-9`用于一月至九月；`A-C`用于 10 月、11 月和 12 月

它的大小`string`是固定的（例如，如果日期是 2012 年 1 月 1 日，它将看起来像`'12101T'`）

我如何`17.11.2012`使用 SQL 从中得到类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:16:31.927

这可能是一种丑陋的方法，但我会创建一个函数，您可以在查询中调用它来转换数据：

```
create function TransformDate(@myString varchar(6))
returns datetime
as
begin

  return cast('20'+left(@myString, 2) +'-'
    + case substring(@mystring, 3, 1)
        when '1' then '01'
        when '2' then '02'
        when '3' then '03'
        when '4' then '04'
        when '5' then '05'
        when '6' then '06'
        when '7' then '07'
        when '8' then '09'
        when '9' then '09'
        when 'A' then '10'
        when 'B' then '11'
        when 'C' then '12' end +'-'
    + substring(@mystring, 4, 2) as datetime)

end 
```

然后你可以这样使用它：

```
declare @value varchar(6) = '12B17T'

select dbo.transformdate(@value) as dt 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5f0b0/4)

这将导致：

```
|         DT |
--------------
| 2012-11-17 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T10:17:11.170

试试这个;

```
DECLARE @x varchar(50)= '12B17T' 
SELECT  SUBSTRING(@x,4,2) +'-'+ 
   RIGHT( '0' + CASE SUBSTRING(@x,3,1) WHEN 'A' THEN '10'
                          WHEN 'B' THEN '11'
                          WHEN 'C' THEN '12' 
   ELSE SUBSTRING(@x,3,1) END, 2) +'-'+ 
   '20' + SUBSTRING(@x,1,2) 
```

[SQL演示小提琴在这里](http://www.sqlfiddle.com/#!3/d41d8/7186)

```
--Results 17-11-2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T10:37:32.340

如果您的服务器以这种格式识别月份，您可以尝试：

```
SELECT TO_CHAR(t_date,'YYYY.MM.DD') FROM (SELECT TO_DATE(some_date,'YYMMDD') AS t_date FROM some_date_table); 
```

如果没有，那么您必须使用 CASE 或 DECODE：

```
SELECT dt_year||'.'||dt_month||'.'||dt_day AS date_ FROM
  (SELECT 
     CASE 
      WHEN SUBSTR(some_date,1,2) BETWEEN 0 AND 12 THEN 20||SUBSTR(some_date,1,2)
      WHEN SUBSTR(some_date,1,2) BETWEEN 13 AND 99 THEN 19||SUBSTR(some_date,1,2)
     END AS dt_year,
     CASE 
      WHEN SUBSTR(some_date,3,1) IN('1','2','3','4','5','6','7','8','9') THEN 0||SUBSTR(some_date,3,1)
      WHEN SUBSTR(some_date,3,1) = 'A' THEN '10'
      WHEN SUBSTR(some_date,3,1) = 'B' THEN '11' 
      WHEN SUBSTR(some_date,3,1) = 'C' THEN '12'
     END AS dt_month,
     SUBSTR(some_date,4,2) AS dt_day FROM some_date_table); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T10:46:36.017

**col**是包含字符串的表**tb3的列**

```
create table tb3(col varchar(max))
insert into tb3 values('120617T')

declare @tmp varchar(max) 
select @tmp=case 
when substring(col,3,1)='A' then replace(col,'A','10')
when substring(col,3,1)='B' then replace(col,'B','11')
when substring(col,3,1)='C' then replace(col,'C','12') 
when substring(col,3,1)!='0' then replace(col,substring(col,3,1),'0'+substring(col,3,1))
else col end 
from tb3

SELECT CONVERT(VARCHAR(10), convert(datetime,substring(@tmp,1,len(@tmp)-1),109), 104) 
```

**输出**

**`17.06.2012`**

# java - 从 Android 发送 JSON HTTP POST 请求

> ID：13911993
> 
> 赞同：44
> 
> 时间：2012-12-17T10:06:09.000
> 
> 标签：java, android, json, wcf, httpurlconnection

我正在使用下面的代码发送一个 http POST 请求，该请求将一个对象发送到 WCF 服务。这工作正常，但如果我的 WCF 服务还需要其他参数会怎样？如何从我的 Android 客户端发送它们？

这是我到目前为止写的代码：

```
StringBuilder sb = new StringBuilder();  

String http = "http://android.schoolportal.gr/Service.svc/SaveValues";  

HttpURLConnection urlConnection=null;  
try {  
    URL url = new URL(http);  
    urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setDoOutput(true);   
    urlConnection.setRequestMethod("POST");  
    urlConnection.setUseCaches(false);  
    urlConnection.setConnectTimeout(10000);  
    urlConnection.setReadTimeout(10000);  
    urlConnection.setRequestProperty("Content-Type","application/json");   

    urlConnection.setRequestProperty("Host", "android.schoolportal.gr");
    urlConnection.connect();  

    //Create JSONObject here
    JSONObject jsonParam = new JSONObject();
    jsonParam.put("ID", "25");
    jsonParam.put("description", "Real");
    jsonParam.put("enable", "true");
    OutputStreamWriter out = new   OutputStreamWriter(urlConnection.getOutputStream());
    out.write(jsonParam.toString());
    out.close();  

    int HttpResult =urlConnection.getResponseCode();  
    if(HttpResult ==HttpURLConnection.HTTP_OK){  
        BufferedReader br = new BufferedReader(new InputStreamReader(  
            urlConnection.getInputStream(),"utf-8"));  
        String line = null;  
        while ((line = br.readLine()) != null) {  
            sb.append(line + "\n");  
        }  
        br.close();  

        System.out.println(""+sb.toString());  

    }else{  
            System.out.println(urlConnection.getResponseMessage());  
    }  
} catch (MalformedURLException e) {  

         e.printStackTrace();  
}  
catch (IOException e) {  

    e.printStackTrace();  
    } catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}finally{  
    if(urlConnection!=null)  
    urlConnection.disconnect();  
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-21T10:52:53.097

使用 POST 发布参数：-

```
URL url;
URLConnection urlConn;
DataOutputStream printout;
DataInputStream  input;
url = new URL (getCodeBase().toString() + "env.tcgi");
urlConn = url.openConnection();
urlConn.setDoInput (true);
urlConn.setDoOutput (true);
urlConn.setUseCaches (false);
urlConn.setRequestProperty("Content-Type","application/json");   
urlConn.setRequestProperty("Host", "android.schoolportal.gr");
urlConn.connect();  
//Create JSONObject here
JSONObject jsonParam = new JSONObject();
jsonParam.put("ID", "25");
jsonParam.put("description", "Real");
jsonParam.put("enable", "true"); 
```

您错过的部分在以下......即如下......

```
// Send POST output.
printout = new DataOutputStream(urlConn.getOutputStream ());
printout.writeBytes(URLEncoder.encode(jsonParam.toString(),"UTF-8"));
printout.flush ();
printout.close (); 
```

剩下的事情你可以做。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-17T10:21:22.817

尝试一些类似打击的事情：

```
SString otherParametersUrServiceNeed =  "Company=acompany&Lng=test&MainPeriod=test&UserID=123&CourseDate=8:10:10";
String request = "http://android.schoolportal.gr/Service.svc/SaveValues";

URL url = new URL(request); 
HttpURLConnection connection = (HttpURLConnection) url.openConnection();   
connection.setDoOutput(true);
connection.setDoInput(true);
connection.setInstanceFollowRedirects(false); 
connection.setRequestMethod("POST"); 
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
connection.setRequestProperty("charset", "utf-8");
connection.setRequestProperty("Content-Length", "" + Integer.toString(otherParametersUrServiceNeed.getBytes().length));
connection.setUseCaches (false);

DataOutputStream wr = new DataOutputStream(connection.getOutputStream ());
wr.writeBytes(otherParametersUrServiceNeed);

   JSONObject jsonParam = new JSONObject();
jsonParam.put("ID", "25");
jsonParam.put("description", "Real");
jsonParam.put("enable", "true");

wr.writeBytes(jsonParam.toString());

wr.flush();
wr.close(); 
```

参考 ：

1.  [http://www.xyzws.com/Javafaq/how-to-use-httpurlconnection-post-data-to-web-server/139](http://www.xyzws.com/Javafaq/how-to-use-httpurlconnection-post-data-to-web-server/139)
2.  [Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)