# StackOverflow 问答 14655000-14655999

# python - 尝试打开并创建一个新文件，然后将所有 4 个字母单词更改为“xxxxxx”

> ID：14655003
> 
> 赞同：0
> 
> 时间：2013-02-01T21:03:27.350
> 
> 标签：python

> **可能重复：**
> [在python中替换四个字母的单词](https://stackoverflow.com/questions/13284291/replace-four-letter-word-in-python)

对于作业，我需要打开一个文件，将所有四个字母的单词替换为“xxxxxx”，然后将文本写入一个新文件。

这是给出的原始文件中的文件文本：

```
The 3 lines in this file end with the new line character.

There is a blank line above this line. 
```

这是我到目前为止所拥有的：

```
def censor(filename):

    infile=open(filename,"r")

    content=infile.read()infile.close()

    outfile = open("censored.txt","w")

    content=content.replace("this","xxxxxx")

    content=content.replace("file","xxxxxx")

    content=content.replace("with","xxxxxx")

    content=content.replace("line","xxxxxx")

    outfile.write(content)

    outfile.close() 
```

这是结果：

```
The 3 xxxxxxs in xxxxxx xxxxxx end xxxxxx the new xxxxxx character.

There is a blank xxxxxx above xxxxxx xxxxxx. 
```

我很难让“line”而不是“lines”改变，因为此刻“lines”正在变为“xxxxxxs”。

有谁知道这样做的特定方法？是否需要 if 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:11:58.093

这会让你开始。这未经测试，但它应该解决单词有标点符号的情况。它也更健壮，因为它迭代容纳长度超过 3 行的文件，并且它还删除任何 4 个字母的单词，而不仅仅是你知道的那些。

```
def censor(filename):
   infile = open(filename,"r")
   outfile = open("censored.txt","w")
   for line in infile:
       wordArr=line.split(" ");
       for word in wordArr:
           word = ''.join(c for c in string if c.isalnum())
           if len(word)==4:
               line=line.replace(word,"XXXXX")
       outfile.write(line)
   outfile.close()
   infile.close() 
```

其他人建议使用正则表达式，但我不得不说这个问题很容易解决，所以正则表达式增加了相当多的复杂性。特别是对于编程的新手。然而，正则表达式可能非常有用且学习起来非常强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:14:44.987

首先，导入重新：

```
import re 
```

然后用 xxxx 替换所有 4 个连续的非空格字符串：

```
content = re.sub(r"(\b)\w{4}(\b)", r"\1xxxxx\2", content) 
```

在 REPL 中测试它：

```
>>> import re
>>> re.sub(r"(\b)\w{4}(\b)", r"\1xxxxx\2", "Thes 3 lines in this file end with the new line character.")
'xxxxx 3 lines in xxxxx file end xxxxx the new xxxxx character.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:09:02.130

```
content=content.replace("\\bline\\b","xxxxxx") 
```

但是很可能您的老师不希望您对片段中的每个四个字母单词进行硬编码 - 他可能希望该代码适用于任何文本文件中的所有四个字母单词。这将需要一种不同的方法，我鼓励您考虑（-=

# xml - 在 xsl 中使用正则表达式从 url 解析 mp3 文件名

> ID：14655007
> 
> 赞同：1
> 
> 时间：2013-02-01T21:03:43.907
> 
> 标签：xml, regex, xslt, xml-parsing

我有一个 rss 提要，需要将其转换为不同的 XML 模式。同时，将 mp3 文件名解析成一个新的字段。我有一个似乎适用于其余转换（为我编写）的 xsl，但我不知道如何做到这一点：

```
 <enclosure url="http://www.fffff.com/pts/redirect.mp3/audio.xxyy.org/musiccheck/musiccheck20130118pod.mp3" length="0" type="audio/mpeg"></enclosure> 
```

变成这样：

```
 <fileIdentifier source="Theme">musiccheck20130118pod</fileIdentifier> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:17:16.917

对您的 URL 格式进行一些假设，即文件名是最后一个包含 .mp3 的内容：

```
/[\S\s]*?url="[\S\s]*?\/([\w]+?\.mp3)".*?/$1/ 
```

只需注意您想要获得的第二部分，将是：

```
/[\S\s]*?url="[\S\s]*?\/([\w]+?\.mp3)".*?/<fileIdentifier source="Theme">$1</fileIdentifier>/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:04:58.390

**这是 XSLT 1.0 中不使用正则表达式的完整解决方案：**

```
<xsl:template match="enclosure">
<xsl:variable name="url" select="./@url"/>
<xsl:variable name="name">
  <xsl:call-template name="last-substring-after">
    <xsl:with-param name="string" select="$url"/>
    <xsl:with-param name="separator" select="'/'"/>
  </xsl:call-template>
</xsl:variable>
<fileIdentifier source="Theme">
<xsl:value-of select="substring-before($name, '.')"/>
</fileIdentifier>
</xsl:template>

<xsl:template name="last-substring-after">
  <xsl:param name="string"/>
  <xsl:param name="separator"/>
  <xsl:choose>
    <xsl:when test="contains($string, $separator)">
      <xsl:call-template name="last-substring-after">
        <xsl:with-param name="string"
                        select="substring-after($string, $separator)"/>
        <xsl:with-param name="separator"
                        select="$separator"/>
      </xsl:call-template>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$string"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

**输出将是 -**

```
<fileIdentifier source="Theme">musiccheck20130118pod</fileIdentifier> 
```

[来源](https://stackoverflow.com/questions/1500067/xsl-mediacontent-trimming-strings-in-xslt)

# android - 不断变化的列表的最佳视图/活动类型？

> ID：14655010
> 
> 赞同：1
> 
> 时间：2013-02-01T21:03:58.760
> 
> 标签：android, android-layout

我正在寻找需要不断修改的最佳视图或活动性能。想象某种基于“对话”的列表，其中新元素一直添加到对话中。

游标在这里合适吗？ListActivity 呢？

选择还重要吗？在性能方面有什么明显的区别吗？我相信你（现在）明白我是 Android 开发的新手。我希望你明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:18:49.667

我查看了内置 SMS Android 应用程序的源代码，这是 Layout

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"  >

    <ListView android:id="@android:id/list"
        style="?android:attr/listViewWhiteStyle"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:drawSelectorOnTop="false"
        android:scrollbarStyle="insideOverlay"
        android:background="@android:color/white"
        android:cacheColorHint="@android:color/white"
        android:fadingEdgeLength="16dip" />

    <TextView android:id="@+id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:text="@string/loading_conversations"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</RelativeLayout> 
```

因此，如果您正在制作“对话”应用程序，则可以安全地使用`ListView`没有性能问题的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:11:30.500

你真的是在倒着想事情。提出有效显示信息的 UI 设计。然后弄清楚如何实现该设计。在那之前不要考虑单独的课程。

顺便说一句，如果您的主视图几乎只是一个 ListView，那么您只会使用 ListActivity。并且只有在发出 db 请求时才使用游标。您不会考虑两者的类型 - 您将为每个应用程序（通常不止一个）编写自己的自定义活动，并且您根本不选择游标类型 - 您正在使用的数据源将如果合适，给你一份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:16:31.633

这取决于您的要求。在大多数情况下，您可以使用许多不同类型的视图，但假设您将其打开很长时间，如果您所做的只是添加（与删除）它，它将消耗越来越多的内存。这通常意味着您需要一种策略来删除一些项目并在适用时重新加载（例如，从“对话”的早期删除并在您向上滚动时添加回来）。我很少实际使用`ListActivity`，但倾向于只`ListView`在常规 a 中使用 s ，但本身`Activity`并没有错。`ListActivity`根据您的描述，我肯定会考虑某种形式`ListView`。还要了解适配器是如何工作的，因为它们是`ListView`s 的对应物。

# ruby-on-rails - 我想我在 rails 3.2.11 中发现了一个错误

> ID：14655011
> 
> 赞同：0
> 
> 时间：2013-02-01T21:04:02.157
> 
> 标签：ruby-on-rails, rails-activerecord

每个人！

我不确定这是一个错误，或者我不知道的东西，但是如果我尝试在 Rails 中使用不同的数据库在 AR 测试中测试 joins()，它就不会工作。它似乎适用于开发模式、控制台，但不适用于测试。所以我的测试失败了。:(

如果我在这里遗漏了什么，请告诉我吗？或者也许可以帮助我测试并确保这是一个错误？

好的，所以想法是这样的：我有 2 个数据库。对于每个数据库，我都有不同的模型集。在我的示例中，假设我在两个数据库上都有用户和办公室。所以我的 YML 文件是这样的：

```
common: &common
  username: root
  password: 
  host: 127.0.0.1
  encoding: utf8
  adapter: mysql2

development:
  <<: *common
  database: scopetest_devel

test: &test
  <<: *common
  database: scopetest_test

other_development:
  <<: *common
  database: othertest_devel

other_test: &other_test
  <<: *common
  database: othertest_test 
```

这是我的测试课程

```
class User < ActiveRecord::Base

  attr_accessible :name, :office_id, :office
  belongs_to :office

end

class Office < ActiveRecord::Base

  attr_accessible :name
  has_many :users

end

class AnotherUser < ActiveRecord::Base

  establish_connection "other_#{Rails.env}"
  self.table_name = "users"

  attr_accessible :name, :office_id, :office
  belongs_to :office, class_name: "AnotherOffice"

end

class AnotherOffice < ActiveRecord::Base

  establish_connection "other_#{Rails.env}"
  self.table_name = "offices"

  attr_accessible :name
  has_many :users, class_name: "AnotherUser"

end 
```

如您所见，它们是相同的。除了它们所属的表和数据库连接。

现在，这是我的测试文件：

```
require 'test_helper'

class UserTest < ActiveSupport::TestCase
  test "scoping works" do
    office = Office.create!(name: 'My Office')
    user = User.create!(office: office, name: 'John Doe')
    assert_equal 1, User.joins(:office).count
  end

  test "another db scoping doesnt" do 
    office = AnotherOffice.create!(name: 'My Office 2')
    user = AnotherUser.create!(office: office, name: 'John Doe')
    assert_equal 1, AnotherUser.joins(:office).count
  end
end 
```

现在，令人惊讶的是（也许对你来说不是），第一个测试将通过。第二个会失败。但是，在控制台上，如果我创建这些模型并执行 joins()，它将起作用。基本上，在测试模式下，在不同数据库上使用连接的任何范围都将返回 0 计数。现在，这是一个错误吗？:(欢迎任何愿意测试它的人！

这是：

导轨 3.2.11 Ruby 1.9.3-p194

Gemfile.lock:

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.11)
      actionpack (= 3.2.11)
      mail (~> 2.4.4)
    actionpack (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.11)
      activesupport (= 3.2.11)
      builder (~> 3.0.0)
    activerecord (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.11)
      activemodel (= 3.2.11)
      activesupport (= 3.2.11)
    activesupport (3.2.11)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    builder (3.0.4)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    erubis (2.7.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    hike (1.2.1)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.2.0)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    json (1.7.6)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.5.0)
    mysql2 (0.3.11)
    polyglot (0.3.3)
    rack (1.4.4)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.11)
      actionmailer (= 3.2.11)
      actionpack (= 3.2.11)
      activerecord (= 3.2.11)
      activeresource (= 3.2.11)
      activesupport (= 3.2.11)
      bundler (~> 1.0)
      railties (= 3.2.11)
    railties (3.2.11)
      actionpack (= 3.2.11)
      activesupport (= 3.2.11)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.3)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.2.5)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sprockets (2.2.2)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thor (0.17.0)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)

PLATFORMS
  ruby

DEPENDENCIES
  coffee-rails (~> 3.2.1)
  jquery-rails
  mysql2
  rails (= 3.2.11)
  sass-rails (~> 3.2.3)
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:35:03.797

检查您的测试配置。我相信默认测试是在回滚的 SQL 事务中执行的。在提交之前，这些事务将是数据库连接的本地事务。

为什么这会导致您的问题？您在一个数据库中（在事务中）添加了一条记录，然后尝试从另一个连接（通过您的第二个数据库适配器）读取该数据，但是由于尚未提交事务，因此该数据尚不可见。

当您在控制台中执行相同的代码时，它不会包装在事务中，而是立即提交并可用。

您可以通过编辑您的测试来尝试禁用此测试的事务：

```
class UserTest < ActiveSupport::TestCase
  self.use_transactional_fixtures = false

  ... 
```

# jsp - JSP 错误：包含无效的表达式。解析表达式失败

> ID：14655014
> 
> 赞同：14
> 
> 时间：2013-02-01T21:04:18.970
> 
> 标签：jsp, tomcat7

我正在尝试调试一个旧的 jsp 站点，因此我在运行 Windows 7 的本地计算机上安装了 tomcat 7 和 Netbeans IDE 7.2.1 并进行了所有设置。但是当我运行它时，我收到一个错误：

> 严重：servlet jsp 的 Servlet.service() 抛出异常 org.apache.jasper.JasperException：/pages/caselisting.jsp（行：133，列：35）“${case.patientmaxdate}”包含无效表达式： javax.el.E​​LException：无法解析表达式 [${case.patientmaxdate}]

该行的代码是：

```
<td><c:out default="&nbsp;" escapeXml="false" value="${case.patientmaxdate}"/></td> 
```

我对 jsp 很陌生，正在尝试对这个旧站点进行一些更改。我做了一些研究并读到 Tomcat 7 对此错误进行了一些更改。如果有人能引导我朝着正确的方向前进，我将不胜感激。

谢谢。

完整的堆栈跟踪：

> 严重：servlet jsp 的 Servlet.service() 抛出异常 org.apache.jasper.JasperException：/pages/caselisting.jsp（行：133，列：35）“${case.patientmaxdate}”包含无效表达式： javax.el.E​​LException：无法在 org.apache.jasper.compiler.ErrorDispatcher.dispatch 的 org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42) 解析表达式 [${case.patientmaxdate}] (ErrorDispatcher.java:408) 在 org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1223) 在 org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:199) 在 org. org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539) 中的 org.apache.jasper.compiler 中的 apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:875)。Node$Nodes.visit(Node.java:2376) at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428) at org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator. java:894) at org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1539) at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376) at org.apache .jasper.compiler.Node$Visitor.visitBody(Node.java:2428) at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434) at org.apache.jasper.compiler.Node$Root .accept(Node.java:475) at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376) at org.apache.jasper.compiler.Validator.validateExDirectives(Validator.java:1795) at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:217) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:373) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:353) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:340) 在 org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java: 646) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390) 在 org.apache.jasper.servlet.JspServlet .service(JspServlet.java:334) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache。 catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749) 在 org.apache.catalina。core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487) at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412) at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)在 org.apache.struts.action.RequestProcessor.doForward(RequestProcessor.java:1056) 在 org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:261) 在 org.apache.struts.action.RequestProcessor.processForwardConfig (RequestProcessor.java:388) 在 org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:316) 在 org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:231) 在 org.apache。 struts.action.ActionServlet.process(ActionServlet.java:1164) 在 org.apache.struts。action.ActionServlet.doGet(ActionServlet.java:397) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 在 org.apache .catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 filter.SecureFilter.doFilter(SecureFilter.java:38) 在 org. apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve. java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org.apache。catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java: 99）在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter .service(CoyoteAdapter.java:407) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) at org. java.util.concurrent.ThreadPoolExecutor 上的 apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822)。runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

错误行周围的完整代码是：

```
 <c:forEach items="${caselist}" var="case">
   <tr onMouseOver="this.bgColor='#EEEEEE';" onMouseOut="this.bgColor='';">
    <td><c:out default="&nbsp;" escapeXml="false" value="${case.patientmaxdate}"/></td> 
```

这里 caselist 是一个数组列表。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-09T13:55:08.773

不确定你是否最终解决了这个问题，但刚刚遇到了类似的问题并解决了它，我想我会参与进来。

Tomcat 7 中的表达式解析器显然比以前的版本更宽松。它不喜欢 EL 表达式中的属性名称与 Java 中的保留关键字发生冲突。

在您的示例中，解析器可能会抱怨您在 forEach 循环中使用了变量名“case”。名称“case”显然是保留的 Java 关键字。

您应该将变量名称更改为未保留的名称（可能是“aCase”）：

```
<c:forEach items="${caselist}" var="aCase">
   <tr onMouseOver="this.bgColor='#EEEEEE';" onMouseOut="this.bgColor='';">
    <td><c:out default="&nbsp;" escapeXml="false" value="${aCase.patientmaxdate}"/> 
```

或者，您可以设置一个系统属性，使 Tomcat 7 更加宽松：

```
-Dorg.apache.el.parser.SKIP_IDENTIFIER_CHECK=true 
```

您需要将其添加到 Tomcat 7 属性窗口（运行 Tomcat7w.exe）的 Java 选项框中的属性列表的末尾。

![在此处输入图像描述](../Images/419a3f3010f9c87287b3e869d3f9f631.png)

然后，这将应用于您在 Tomcat 7 中运行的所有应用程序中的所有页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-15T20:09:28.660

Java 关键字（如`case`, `instanceof`, `if`, `while`, `class`, `return`,`static`等）不能用作 EL 中的变量/函数名称。更喜欢使用不同的名称，例如：

```
<c:forEach items="${caselist}" var="cs">
   <tr onMouseOver="this.bgColor='#EEEEEE';" onMouseOut="this.bgColor='';">
    <td><c:out default="&nbsp;" escapeXml="false" value="${cs.patientmaxdate}"/></td>
</c:forEach> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-18T15:39:23.307

由于我们广泛使用此模式，我遇到了同样的问题： `<c:if test="${actionVar.class.name == 'MyClass'}"> <c:import url="${actionVar.cellRender}" /></c:if>` 通过添加解决问题： `org.apache.el.parser.SKIP_IDENTIFIER_CHECK=true` 到`/etc/tomcat7/catalina.properties`

正如@will-keeling 所建议的那样

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T21:13:47.453

Tomcat 7 默认不包含 JSTL，您必须单独添加才能使用 EL 表达式。如果第 133 行是第一次在页面上使用 EL 表达式，那么您应该验证 JSTL 库是否包含在 $CATALINA_HOME/lib 或您的 WEB-INF/lib 目录中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-16T06:32:42.000

1：**不要忘记结束的 "}"**。

看起来很简单，但是当表达式变得有点复杂时，我已经这样做了几次。

2：**使用“.”时，设置属性静默失败：**

```
<% pageContext.setAttribute("my_namespace.MY_VAR", MY_VAR); %>
${my_namespace.MY_VAR} 
```

该属性设置为单个字符串。但是解析时会分裂。{$my_namesapce.MY_VAR} 假设 my_namespace 是带有键“MY_VAR”的映射或带有属性“MY_VAR”的对象

# c# - 拆分包含空格的字符串，除非它们包含在“引号”中？

> ID：14655023
> 
> 赞同：54
> 
> 时间：2013-02-01T21:05:02.027
> 
> 标签：c#, split

为了简单起见：

```
string streamR = sr.ReadLine();  // sr.Readline results in:
                                 //                         one "two two" 
```

我希望能够将它们保存为两个不同的字符串，删除所有空格，除了引号之间的空格。因此，我需要的是：

```
string 1 = one
string 2 = two two 
```

到目前为止，我发现有效的是以下代码，但它删除了引号内的空格。

```
//streamR.ReadLine only has two strings
  string[] splitter = streamR.Split(' ');
    str1 = splitter[0];
    // Only set str2 if the length is >1
    str2 = splitter.Length > 1 ? splitter[1] : string.Empty; 
```

这个的输出变成

```
one
two 
```

我已经研究了[正则表达式以拆分空格，除非在引号](https://stackoverflow.com/questions/554013/regular-expression-to-split-on-spaces-unless-in-quotes)中但是我似乎无法让正则表达式工作/理解代码，特别是如何拆分它们，使它们成为两个不同的字符串。那里的所有代码都给我一个编译错误（我正在使用`System.Text.RegularExpressions`）

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-01T21:15:17.670

```
string input = "one \"two two\" three \"four four\" five six";
var parts = Regex.Matches(input, @"[\""].+?[\""]|[^ ]+")
                .Cast<Match>()
                .Select(m => m.Value)
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-01T21:18:55.703

你甚至可以在没有 Regex 的情况下做到这一点：一个 LINQ 表达式`String.Split`可以完成这项工作。

您可以在之前拆分字符串，`"`然后仅将结果数组中索引为偶数的元素拆分为 `.`

 ````
var result = myString.Split('"')
                     .Select((element, index) => index % 2 == 0  // If even index
                                           ? element.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)  // Split the item
                                           : new string[] { element })  // Keep the entire item
                     .SelectMany(element => element).ToList(); 
```

对于字符串：

```
This is a test for "Splitting a string" that has white spaces, unless they are "enclosed within quotes" 
```

它给出了结果：

```
This
is
a
test
for
Splitting a string
that
has
white
spaces,
unless
they
are
enclosed within quotes 
```

### 更新

```
string myString = "WordOne \"Word Two\"";
var result = myString.Split('"')
                     .Select((element, index) => index % 2 == 0  // If even index
                                           ? element.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)  // Split the item
                                           : new string[] { element })  // Keep the entire item
                     .SelectMany(element => element).ToList();

Console.WriteLine(result[0]);
Console.WriteLine(result[1]);
Console.ReadKey(); 
```

### 更新 2

你如何定义字符串的引号部分？

我们将假设第一个字符串之前的字符串`"`没有被引用。

然后，放在第一个`"`和第二个之前的字符串`"`被引用。第二个`"`和第三个之间的字符串`"`不加引号。第三个和第四个之间的字符串被引用，...

一般规则是：第 (2*n-1) 个（奇数）`"`和第 (2*n) 个（偶数）之间的每个字符串`"`都被引用。`(1)`

有什么关系`String.Split`？

String.Split 使用默认的 StringSplitOption（定义为 StringSplitOption.None）创建一个包含 1 个字符串的列表，然后在列表中为找到的每个拆分字符添加一个新字符串。

因此，在 first 之前`"`，字符串位于拆分数组中的索引 0 处，介于 first 和 second 之间`"`，字符串位于数组中的索引 1 处，位于第三个和第四个之间，索引 2，...

一般规则是：第 n 个和第 (n+1) 个之间的字符串位于`"`数组中的索引 n 处。`(2)`

给定`(1)`and `(2)`，我们可以得出结论： 引用部分在拆分数组中的奇数索引处。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-01T21:17:36.097

因为自定义解析器可能更适合这个。

这是我曾经写过的东西，当时我有一个涉及括号和空格的特定（并且非常奇怪）的解析要求，但它足够通用，几乎可以与任何分隔符和文本限定符一起使用。

```
public static IEnumerable<String> ParseText(String line, Char delimiter, Char textQualifier)
{

    if (line == null)
        yield break;

    else
    {
        Char prevChar = '\0';
        Char nextChar = '\0';
        Char currentChar = '\0';

        Boolean inString = false;

        StringBuilder token = new StringBuilder();

        for (int i = 0; i < line.Length; i++)
        {
            currentChar = line[i];

            if (i > 0)
                prevChar = line[i - 1];
            else
                prevChar = '\0';

            if (i + 1 < line.Length)
                nextChar = line[i + 1];
            else
                nextChar = '\0';

            if (currentChar == textQualifier && (prevChar == '\0' || prevChar == delimiter) && !inString)
            {
                inString = true;
                continue;
            }

            if (currentChar == textQualifier && (nextChar == '\0' || nextChar == delimiter) && inString)
            {
                inString = false;
                continue;
            }

            if (currentChar == delimiter && !inString)
            {
                yield return token.ToString();
                token = token.Remove(0, token.Length);
                continue;
            }

            token = token.Append(currentChar);

        }

        yield return token.ToString();

    } 
} 
```

用法是：

```
var parsedText = ParseText(streamR, ' ', '"'); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-02-01T21:18:58.807

您可以使用属于命名空间的[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类`Microsoft.VisualBasic.FileIO`。（您需要添加对`Microsoft.VisualBasic`项目的引用。）：

```
string inputString = "This is \"a test\" of the parser.";

using (MemoryStream ms = new MemoryStream(Encoding.ASCII.GetBytes(inputString)))
{
    using (Microsoft.VisualBasic.FileIO.TextFieldParser tfp = new TextFieldParser(ms))
    {
        tfp.Delimiters = new string[] { " " };
        tfp.HasFieldsEnclosedInQuotes = true;
        string[] output = tfp.ReadFields();

        for (int i = 0; i < output.Length; i++)
        {
            Console.WriteLine("{0}:{1}", i, output[i]);
        }
    }
} 
```

生成输出：

```
0:This
1:is
2:a test
3:of
4:the
5:parser. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-11T11:06:01.820

支持双引号。

细绳：

```
a "b b" "c ""c"" c" 
```

结果：

```
a 
"b b"
"c ""c"" c" 
```

代码：

```
var list=Regex.Matches(value, @"\""(\""\""|[^\""])+\""|[^ ]+", 
    RegexOptions.ExplicitCapture)
            .Cast<Match>()
            .Select(m => m.Value)
            .ToList(); 
```

可选删除双引号：

```
Select(m => m.StartsWith("\"") ? m.Substring(1, m.Length - 2).Replace("\"\"", "\"") : m) 
```

结果

```
a 
b b
c "c" c 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-16T13:34:15.757

Squazz 的回答只是一个小问题.. 它适用于他的字符串，但如果你添加更多项目则不行。例如

```
string myString = "WordOne \"Word Two\" Three" 
```

在这种情况下，删除最后一个引号会得到 4 个结果，而不是 3 个。

不过，这很容易解决..只需计算转义字符的数量，如果不均匀，则去掉最后一个（根据您的要求进行调整..）

```
 public static List<String> Split(this string myString, char separator, char escapeCharacter)
    {
        int nbEscapeCharactoers = myString.Count(c => c == escapeCharacter);
        if (nbEscapeCharactoers % 2 != 0) // uneven number of escape characters
        {
            int lastIndex = myString.LastIndexOf("" + escapeCharacter, StringComparison.Ordinal);
            myString = myString.Remove(lastIndex, 1); // remove the last escape character
        }
        var result = myString.Split(escapeCharacter)
                             .Select((element, index) => index % 2 == 0  // If even index
                                                   ? element.Split(new[] { separator }, StringSplitOptions.RemoveEmptyEntries)  // Split the item
                                                   : new string[] { element })  // Keep the entire item
                             .SelectMany(element => element).ToList();
        return result;
    } 
```

我还将它变成了一种扩展方法，并使分隔符和转义符可配置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T09:25:20.013

OP想要

> ...删除所有空格，引号***之间的空格除外***

Cédric Bignon 的解决方案几乎做到了这一点，但没有考虑到引号可能是奇数。首先检查这一点，然后删除多余的，确保我们只有在元素真的被引号封装时才停止拆分。

```
string myString = "WordOne \"Word Two";
int placement = myString.LastIndexOf("\"", StringComparison.Ordinal);
if (placement >= 0)
myString = myString.Remove(placement, 1);

var result = myString.Split('"')
                     .Select((element, index) => index % 2 == 0  // If even index
                                           ? element.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries)  // Split the item
                                           : new string[] { element })  // Keep the entire item
                     .SelectMany(element => element).ToList();

Console.WriteLine(result[0]);
Console.WriteLine(result[1]);
Console.ReadKey(); 
```

逻辑归功于 Cédric Bignon，我只添加了一个保护措施。`

# mysql - Ubuntu Server MySQL - 无法使用 root 用户访问

> ID：14655024
> 
> 赞同：3
> 
> 时间：2013-02-01T21:05:07.130
> 
> 标签：mysql, linux, ubuntu

我是新手`Ubuntu Server`，我做了命令：

```
sudo apt-get install mysql-server mysql-common mysql-client 
```

一切顺利，我被带回命令行。当我输入：

```
mysql -u root 
```

我有一个错误说`Access denied for user 'root'@'localhost' (using password: NO)`。任何想法我做错了什么？我尝试删除所有 3 个软件包并重新安装它们无济于事。谷歌证明没有帮助:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T19:23:32.007

打开终端并运行`sudo dpkg-reconfigure mysql-server`给mysql的新密码

`mysql -uroot -p`, 给出新创建的密码

注意：您可能必须在第一个命令中添加 mysql 版本 例如：dpkg-reconfigure mysqlserver-4.3

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-04T14:34:41.573

对于较新版本的 MySQL（对于 MariaDB < 10.2，请使用底部的查询，因为它不支持更改用户但仍使用 auth_socket）

> 如果您安装 5.7 并且不向`root`用户提供密码，它将使用该`auth_socket`插件。该插件不在乎，也不需要密码。它只是检查用户是否使用 UNIX 套接字进行连接，然后比较用户名。

取自[使用“插件：auth_socket”](https://dzone.com/articles/change-user-password-in-mysql-57-with-plugin-auth)和[https://askubuntu.com/a/801950/395418在 MySQL 5.7 中更改用户密码](https://askubuntu.com/a/801950/395418)

所以为了把`plugin`后面改成`mysql_native_password`：

1.  使用 sudo 登录：

    ```
    sudo mysql -u root 
    ```

2.  `plugin`使用单个命令更改和设置密码：

    ```
    ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'test'; 
    ```

当然你也可以使用上面的命令设置一个空密码。

只是为了记录，还有另一种方法可以只更改`plugin`而不提供密码（将其留空）：

```
 update mysql.user set plugin = 'mysql_native_password' where User='root';
    FLUSH PRIVILEGES; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-03T12:08:31.590

一种方法是

```
/etc/init.d/mysql stop
mysqld_safe --skip-grant-tables &
mysql 
```

然后你将登录到mysql，输入以下内容：

```
use mysql;
update user set password='*6C8989366EAF75BB670AD8EA7A7FC1176A95CEF4' where User='root';
flush privileges; 
```

之后，停止mysql，启动正常

```
/etc/init.d/mysql stop
/etc/init.d/mysql start
mysql -u root -p 
```

您的密码应该是：**mypass**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T21:14:36.750

在重置密码之前，请尝试以下操作：

```
mysql -u root -p 
```

在此之后，您必须输入您的密码（如果您没有看到任何 *，请不要担心，这是正常的），然后按返回按钮。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T21:09:05.343

你需要设置 MySQL

```
$ mysqladmin -u root password NEWPASSWORD 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-14T10:00:29.247

在**mysql 5.7.12上测试**

```
/etc/init.d/mysql stop
/usr/local/mysql/bin/mysqld_safe --skip-grant-tables &
/usr/local/mysql/bin/mysql 
```

然后从打开的 sql 控制台键入以下命令：

```
UPDATE mysql.user 
    SET authentication_string = PASSWORD('MyNewPass'), password_expired = 'N'
    WHERE User = 'root' AND Host = 'localhost';
FLUSH PRIVILEGES;
exit; 
```

停止当前进程并重新启动它。然后测试新密码（应该是**MyNewPass**）。

```
/etc/init.d/mysql stop
/etc/init.d/mysql start
/usr/local/mysql/bin/mysql -u root -p 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T22:13:44.300

要设置忘记的密码，您需要停止 mysql 守护程序，使用该`--skip-grant-tables`选项启动它，然后使用 更改当前密码`mysqladmin -u root password NEWPASSWORD`。

[您可以在此处](http://www.cyberciti.biz/tips/recover-mysql-root-password.html)找到完整的密码重置程序。

# android - 在 linux 中如何使用手机作为蓝牙适配器？

> ID：14655030
> 
> 赞同：0
> 
> 时间：2013-02-01T21:05:32.570
> 
> 标签：android, bluetooth, raspberry-pi

我可以使用运行 Raspbian Wheezy 的 Raspberry Pi，并且由于该板没有蓝牙，我想将我的 Android 手机用作蓝牙适配器，而不是单独购买一个。为了清楚起见，我想使用手机的蓝牙连接将其他蓝牙设备连接到 RasPi，而不是通过我的手机将 Pi 连接到互联网。

# php - 为什么我不能在 stdClass 上调用 property_exists？

> ID：14655036
> 
> 赞同：7
> 
> 时间：2013-02-01T21:06:03.713
> 
> 标签：php, object, field, stdclass

这是我的代码：

```
<?php

$madeUpObject = new \stdClass();
$madeUpObject->madeUpProperty = "abc";

echo $madeUpObject->madeUpProperty;
echo "<br />";

if (property_exists('stdClass', 'madeUpProperty')) {
    echo "exists";
} else {
    echo "does not exist";
}
?> 
```

输出是：

**abc 不存在**

那么为什么这不起作用呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T21:09:23.537

尝试：

```
if( property_exists($madeUpObject, 'madeUpProperty')) { 
```

指定类名（而不是像我所做的那样的对象）意味着在`stdClass`定义中，您需要定义属性。

您可以从[这个演示](http://viper-7.com/Jd9vXp)中看到它打印：

```
abc
exists 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T21:09:53.067

因为`stdClass`没有任何属性。你需要传入`$madeUpObject`：

```
property_exists($madeUpObject, 'madeUpProperty'); 
```

该[函数的原型](http://php.net/property_exists)如下：

```
bool property_exists ( mixed $class, string $property ) 
```

`$class`参数必须是“类名或类的**对象**”。`$property`必须是属性的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:11:07.017

除非您担心 NULL 值，否则您可以使用[`isset`](http://php.net/isset).

# r - 使用 R -“逆”拼写检查器在字符向量中搜索单词的拼写错误

> ID：14655040
> 
> 赞同：8
> 
> 时间：2013-02-01T21:06:25.973
> 
> 标签：r, spell-checking, text-mining, tm

我正在对一个大型数据库进行文本挖掘，以创建指示变量，这些变量指示观察的评论字段中某些短语的出现。注释由技术人员输入，因此使用的术语始终一致。

但是，在某些情况下，技术人员拼错了一个单词，因此我的 grepl() 函数无法捕捉到该短语（尽管拼写错误）出现在观察中。理想情况下，我希望能够将短语中的每个单词提交给一个函数，该函数将返回该单词的几个常见拼写错误或拼写错误。这样的R函数存在吗？

有了这个，我可以在评论字段中搜索这些短语拼写错误的所有可能组合，并将其输出到另一个数据框。这样，我可以逐个查看每个事件，以确定我感兴趣的现象是否真的由技术人员描述。

我在谷歌上搜索过，但只找到了对 R 的实际拼写检查包的引用。我正在寻找的是一个“反向”拼写检查器。由于我要查找的短语数量相对较少，我实际上可以手动检查拼写错误；我只是认为将这种能力内置到 R 包中以用于未来的文本挖掘工作会很好。

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T20:11:04.247

正如 Gavin Simpson 建议的那样，您可以使用 aspell。我想要让这个工作你需要安装 aspell。在许多 linux 发行版中，它是默认的；我不知道其他系统或它是否与 R 一起安装。

有关使用示例，请参见以下函数。这取决于您的输入数据以及您想要对您未指定的结果做什么（例如，第一个建议的正确拼写错误）：

```
check_spelling <- function(text) {
  # Create a file with on each line one of the words we want to check
  text <- gsub("[,.]", "", text)
  text <- strsplit(text, " ", fixed=TRUE)[[1]]
  filename <- tempfile()
  writeLines(text, con = filename);
  # Check spelling of file using aspell
  result <- aspell(filename)
  # Extract list of suggestions from result
  suggestions <- result$Suggestions
  names(suggestions) <- result$Original
  unlink(filename)
  suggestions
}

> text <- "I am text mining a large database to create indicator variables which indicate the occurence of certain phrases in a comments field of an observation. The comments were entered by technicians, so the terms used are always consistent. "
> check_spelling(text)
$occurence
[1] "occurrence"   "occurrences"  "occurrence's" 
```

# c# - 在 C# 中使用 LibUsbDotNet 与 HID 设备交互

> ID：14655045
> 
> 赞同：1
> 
> 时间：2013-02-01T21:06:48.923
> 
> 标签：c#, usb, libusb

简单地说：**我想知道是否可以使用 LibUsbDotNet 来读取和写入 HID 功能报告。**

首先，我尝试使用带有以下示例代码的 vid/pid 找到我的设备

```
class Program
    {
        public static UsbDevice MyUsbDevice;
        public static UsbDeviceFinder uFind = new UsbDeviceFinder(1234,4321);

        static void Main(string[] args)
        {
            ErrorCode ec = ErrorCode.None;

            try
            {
                // Find and open the usb device.
                MyUsbDevice = UsbDevice.OpenUsbDevice(uFind);

                // If the device is open and ready
                if (MyUsbDevice == null) throw new Exception("Device Not Found."); 
```

但我总是会得到**未找到设备。**

我已经在“设备管理器 > 人机接口设备”下检查了我的设备是否存在。

如果有人可以建议在 c# 中实现相同目标的*正确方法是什么，那将会很有帮助。*

以前我试图在 python（使用 PyUsb ）中实现相同的目标，但缺乏示例和文档让我绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T10:40:46.793

在 libUsbDotNet 的安装文件夹中有一个名为“inf-wizard.exe”的文件，运行该应用程序并安装 libUsbDotNet 使用的“假驱动程序”来查找驱动程序。

> 如果找不到“inf-wizard.exe”，请尝试从此处下载 libUsbDotNet：http: [//sourceforge.net/projects/libusbdotnet/](http://sourceforge.net/projects/libusbdotnet/)

您可能必须使用设备管理器查找特定驱动程序的 Pid 和 Vid（即使没有找到驱动程序，也应显示 Vid 和 Pid）

安装将 Pid 和 Vid 转换为整数后，此站点可能会有所帮助[http://www.mathsisfun.com/binary-decimal-hexadecimal-converter.html](http://www.mathsisfun.com/binary-decimal-hexadecimal-converter.html)

在代码 ex 中使用转换后的整数：

```
//Hex Values: Pid = 4D9; Vid = 1605; 

public static UsbDeviceFinder uFind = new UsbDeviceFinder(1241, 5637); 
```

Windows 需要一个驱动程序才能与任何类型的硬件通信，这个过程在 linux 中要简单得多，请参阅[链接 (connect hack)](http://learn.adafruit.com/hacking-the-kinect/overview)以很好地简化 USB 通信的工作原理。（这是基于 linux 的，但核心保持不变）

# javascript - 在我的网站上设置文件上传按钮的样式（输入类型 =“文件”），它似乎运行良好，但在 iOS 上转换

> ID：14655046
> 
> 赞同：1
> 
> 时间：2013-02-01T21:06:50.370
> 
> 标签：javascript, jquery, html, css

可在此处参考：[http ://web.cs.dal.ca/~selig/serverside/assignment2/](http://web.cs.dal.ca/~selig/serverside/assignment2/)

我正在尝试创建一个外观更漂亮的文件上传按钮。它在普通的桌面浏览器上运行良好，但在 iOS 上，单击它会更改按钮的边框半径，并基本上使其成为不同的按钮。

我的自定义实现非常简单，我将在下面包含代码。基本上，原始框是用绝对位置覆盖自定义框，设置宽度和高度以及不透明度设置为0。然后我使用一些jQuery来自定义点击状态。

HTML：

```
 <div class="upload">
        <input type="file" class="file-input">
        <input type="button" value="Browse">
        <span class="filename">No file selected</span>
    </div> 
```

CSS：

```
.upload {
    position: relative;
    margin: 0 auto 15px auto;

    width: 400px;
    height: 50px;

    background: #fffbed;
    border: 1px solid #efdec4;
    border-radius: 5px;

    -webkit-box-shadow: 0px 2px 4px rgba(236, 229, 199, 0.3), inset 0px 0px 3px 1px rgba(236, 229, 199, 0.5);
    box-shadow: 0px 2px 4px rgba(236, 229, 199, 0.3), inset 0px 0px 3px 1px rgba(236, 229, 199, 0.5);
}

input[type="file"] {
    position: absolute;
    width: 100%;
    height: 100%;

    cursor: pointer;
    moz-opacity: 0;
    opacity: 0;
}

input[type="button"] {
    width: 120px;
    height: 50px;
    float: right;

    border: 1px solid #4b2218;
    border-radius: 5px;
    color: #ffecf7;
    font-size: 1em;
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);

    background: #a35a47; /* Old browsers */
    background: -moz-linear-gradient(top,  #a35a47 0%, #a04731 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#a35a47), color-stop(100%,#a04731)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #a35a47 0%,#a04731 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #a35a47 0%,#a04731 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #a35a47 0%,#a04731 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #a35a47 0%,#a04731 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#a35a47', endColorstr='#a04731',GradientType=0 ); /* IE6-8 */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:25:00.867

After trying this out in jsFiddle I figured out that the jQuery code for the hover and click events is what is causing the broder-radius to change. I came up with a solution which just disables the hover/click events if you are using an iPhone/iPod touch. Here is the javascript:

```
 $(document).ready(function() {
    $(".upload").hover(
        function() {
            $("input[type='button']").css("background", "#843c2b");
        },
        function() {
            $("input[type='button']").css({
                "background": "#a35a47"
            });
        }
    );

    $(".upload").click(function() {
        $("input[type='button']").css("background", "#683022");
    });
    if(isiPhone()){
     $(".upload").unbind("click").unbind("hover");   
    }
});
function isiPhone(){
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
   return true;
}
    return false;
} 
```

and the jsFiddle: [http://jsfiddle.net/SEexe/36/](http://jsfiddle.net/SEexe/36/)

# jsf - 如何在加载 PF 图表时显示“正在加载”

> ID：14655048
> 
> 赞同：0
> 
> 时间：2013-02-01T21:06:58.187
> 
> 标签：jsf, jsf-2, primefaces

我已经使用 SQL 查询实现了 PrimeFaces[图表。](http://www.primefaces.org/showcase-labs/ui/barChart.jsf)

当我打开带有图表的 JSF 页面时，我注意到了一个性能问题。我很感兴趣是否可以在图表准备好显示时在图表中心显示“正在加载..”？

***编辑***

我添加了图表 div 层的这一见解：

```
<div id="powerchart" style="position: absolute; left: 420px; top: 40px; width: 700px; height: 330px" rendered="#{not DCProfileTabGeneralController.editable}">
    <!-- Live update
    <p:poll interval="3" update="dcpower" />
    -->

    <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>

    <p:dialog modal="true" widgetVar="statusDialog" header="Status"
              draggable="false" closable="false">

    </p:dialog>

    <p:barChart id="dcpower" value="#{DCProfileTabGeneralController.dcPower}" rendered="#{not DCProfileTabGeneralController.editable}"
                title="Datacenter Power Usage Statistics" min="0" style="height:330px; top: 10px;"
                shadow="true" barMargin="50" seriesColors="F8F8F8, 888888, 005CE6, 0047B2" extender="dcchartConfig"
                yaxisLabel="Size" zoom="true" stacked="false" >
        <p:ajax event="itemSelect" listener="#{DCProfileTabGeneralController.itemSelectDCPower}" update="growl" rendered="#{not DCProfileTabGeneralController.editable}"/>
    </p:barChart>

</div> 
```

但我注意到，当我单击图表时，整个 JSF 页面都会显示消息。我如何只能显示消息只洞察 div 层？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T14:37:52.153

您可以试验图表[`BlockUI`](http://www.primefaces.org/showcase/ui/blockUI.jsf)的`preRenderComponent`事件。

1.  将事件添加到图表。您可以使用事件侦听器来初始化图表

    ```
     <p:barChart id="dcpower" value="#{DCProfileTabGeneralController.dcPower}" rendered="#{not DCProfileTabGeneralController.editable}"
            title="Datacenter Power Usage Statistics" min="0" style="height:330px; top: 10px;"
            shadow="true" barMargin="50" seriesColors="F8F8F8, 888888, 005CE6, 0047B2" extender="dcchartConfig"
            yaxisLabel="Size" zoom="true" stacked="false" >
          <f:event id="chartBlocker" type="preRenderComponent" listener="#{DCProfileTabGeneralController.initChart}"/>
          <p:ajax event="itemSelect" listener="#{DCProfileTabGeneralController.itemSelectDCPower}" update="growl" rendered="#{not DCProfileTabGeneralController.editable}"/>
       </p:barChart> 
    ```

2.  `<p:blockUI/>`在目标面板之外定义一个

    ```
     <p:blockUI block="powerchart" trigger="chartBlocker" /> 
    ```

我没有对此进行测试，但我相信它的理论是合理的。如果事件没有触发blockUI，尝试在`trigger`blockUI的属性中使用图表本身

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:40:04.980

好吧，您可以添加一些自定义 jquery 代码，例如：将动画图像插入图表 div onstart 并将其隐藏 oncomplete ，

开始：`$('#dcpower').prepend('<img id="theImg" src="theImg.png" />')`

oncomplete : `$("#theImg").hide();`<---- 像这样的东西

或者添加一些这样的文字

开始：`$('#dcpower').prepend('<span id="theText">Loading...</span>')`

oncomplete : `$("#theText").hide();`<---- 像这样的东西

# mysql - 使用默认值更新 Sequel 模型

> ID：14655049
> 
> 赞同：1
> 
> 时间：2013-02-01T21:06:58.530
> 
> 标签：mysql, ruby, sequel

我想用 Sequel 做一些事情，效果如下：

```
UPDATE my_table SET my_field = DEFAULT WHERE some_condition; 
```

也就是说，我想将数据库上已存在的对象的字段重置为我为该列设置的默认值。也许像`my_object.my_field = :default`（这不起作用）

有没有办法做到这一点？

（我正在使用 MySQL）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:23:45.943

由于使用类型转换的列设置器，使用一个不会很好地工作。您可以解决它`my_object.values[:my_field] = Sequel.lit('DEFAULT')`然后保存，但除非作为最后的手段（如果您这样做，请在更新后刷新），否则不建议这样做。

假设 Sequel 可以从数据库中解析默认值，您可能想尝试这样做：`my_object.my_field = YourModelClass.db_schema[:my_field][:ruby_default]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:11:15.870

您可以参考[MySQL 更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html) ，您会注意到您可以将列值设置为 NULL，如果该列设置为“NOT NULL”，它将被设置为其默认值。该值不是您分配的值；相反，它是列类型的默认值（请参阅[MySQL 的数据类型默认值](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:23:52.483

这行得通吗？

```
DB[:my_table].where(...).update(:my_field => 'DEFAULT'.lit) 
```

该`lit`方法将其作为文字 SQL 元素放入而不转义。据我所知`:default`，转入表格参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:27:46.680

[Jeremay 有点快](https://stackoverflow.com/a/14655267/676874)，我可以提供一个更长的例子：

建立测试数据：

```
require 'sequel'
DB = Sequel.sqlite

DB.create_table(:test){
  column :test, :nvarchar, :size => 5, :default => 'aaaa'
}

DB[:test].insert()
DB[:test].insert( 11 )
DB[:test].each{|data|
  p data
} 
```

`schema`您可以确定默认值：

```
DEFAULTS = {}
DB.schema(:test).each{| key, options|
  DEFAULTS[key] = options[:ruby_default]
}

p DEFAULTS 
```

现在您可以使用默认值进行更新：

```
DB[:test].update( :test => DEFAULTS[:test] )

DB[:test].each{|data|
  p data
} 
```

# python - 使用 Vulcan 为 Heroku 构建 NumPy

> ID：14655061
> 
> 赞同：0
> 
> 时间：2013-02-01T21:08:33.360
> 
> 标签：python, heroku, numpy

有没有人使用 vulcan 构建工具为 Heroku 成功构建了 NumPy？

尝试这样做时，我收到以下错误：

```
Packaging local directory... done
Uploading source package... done
Building with: ./configure --prefix /app/vendor/numpy-1.6 && make install
sh: ./configure: not found
bin/vulcan-make:69:in `chdir': No such file or directory - /app/vendor/numpy-1.6 (Errno::ENOENT)
from bin/vulcan-make:69:in `block (2 levels) in <main>'
from bin/vulcan-make:18:in `chdir'
from bin/vulcan-make:18:in `block in <main>'
from /usr/local/lib/ruby/1.9.1/tmpdir.rb:83:in `mktmpdir'
from bin/vulcan-make:17:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:06:19.323

您能否发布您正在调用的命令以及来自哪个目录（相对于 make 脚本所在的位置）。

请注意，NumPy 已经[是 Heroku 的可安装依赖项](https://twitter.com/poweredbyaltnet/status/206153713633607680)。更多资源[在这里](https://stackoverflow.com/questions/9819968/running-scipy-on-heroku)和[这里](https://stackoverflow.com/questions/11635857/how-to-install-scikit-learn-on-heroku-cedar)和[这里](https://gist.github.com/3680810)。

您可能还想看看[Anvil ，](https://github.com/ddollar/heroku-anvil)[这里](https://groups.google.com/forum/?fromgroups=#!topic/buildpack-developers/Z-ZZVSx61eY)是公告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:41:14.913

只需将“numpy”添加到 requirements.txt，就像任何其他依赖项一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T13:50:25.627

我相信您需要指定您希望 vulcan 用来构建 numpy 的命令。这是通过 -c 标志完成的。

```
vulcan build -s ./numpy-1.6 -c "python setup.py install --prefix=/tmp/numpy-1.6" -p /tmp/numpy-1.6 
```

至少这类似于我运行使其成功的命令。

# java - 如何在 Java Android 中为客户端请求设置 HttpPost 标头

> ID：14655062
> 
> 赞同：3
> 
> 时间：2013-02-01T21:08:33.773
> 
> 标签：java, android, oauth, http-headers, http-post

我无法让 Apache HttpClient 正确发送 HttpPost 标头。

我发送名称值对之类的没有问题，但是每当我设置或添加 POST 标头时，它会在发出请求时消失。

我已经尝试了 setHeader 和 addHeader，并且同时尝试了两者。

这是我的代码：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("https://posttestserver.com/post.php");
    httppost.setHeader("Authorization: Bearer", accessToken);
    httppost.addHeader("Authorization: Bearer", accessToken);
    Log.d("DEBUG", "HEADERS: " + httppost.getFirstHeader("Authorization: Bearer"));

    ResponseHandler<String> responseHandler = new BasicResponseHandler();
    String responseBody = httpclient.execute(httppost, responseHandler);

    Log.d("DEBUG", "RESPONSE: " + responseBody); 
```

此外，执行请求之前的调试语句会打印出正确的标头，所以我知道它正在被添加，然后稍后才删除。

任何帮助将非常感激！

**编辑：**如果这很重要，这一切都在 AsyncTask 内部运行。我认为它不会，因为否则会抛出 NetworkOnMainThread 异常，但我认为它可能值得一提。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T21:16:26.190

您的代码中至少有一个错误。试试这个：

```
httppost.setHeader("Authorization", "Bearer "+accessToken); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:32:32.430

尝试连接[告诉您的 HTTP 标头](http://www.reliply.org/tools/requestheaders.php)并捕获（仅打印纯 HTML）输出的服务。至少您会知道您的标题是否真的在途中丢失了，或者可能是其他什么东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-08T18:32:40.027

您说标题不在您的一个答复中的响应中，只是为了澄清，标题不会返回响应，它们只是在请求中发送到服务器。网络跟踪或提琴手会话可以显示请求和响应，这应该可以为您提供有关它们是否被丢弃的明确答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:41:47.860

尝试使用`java.net.URLConnection.addRequestProperty(String field, String newValue)`

[http://developer.android.com/reference/java/net/URLConnection.html#addRequestProperty%28java.lang.String,%20java.lang.String%29](http://developer.android.com/reference/java/net/URLConnection.html#addRequestProperty%28java.lang.String,%20java.lang.String%29)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T21:17:14.177

我个人更喜欢使用其他方法来正确设置 http 授权：

```
httpClient.getCredentialsProvider().setCredentials(
  new AuthScope(hostname, port), 
  new UsernamePasswordCredentials(user, pass)); 
```

# iphone - 通过wifi在iOS设备之间同步核心数据？

> ID：14655064
> 
> 赞同：3
> 
> 时间：2013-02-01T21:08:40.680
> 
> 标签：iphone, ios, objective-c, core-data, asyncsocket

我想通过 wifi 在 iOS 设备之间同步 Core Data。我知道如何与 ASyncSockets 建立连接，但我不确定下一步 - 同步核心数据。

我知道用于在 iOS 和 Mac 之间同步的 ZSync 项目，但我想知道是否有人知道是否可以在 iOS 设备之间做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:42:46.360

您可以通过多种方式解决此问题，但我会考虑以下两种方式之一：

1.  获取`NSManagedObject`子类的属性，将它们转换为`NSData`，然后使用 AsyncSocket 传输它们。然后，当接收应用程序收到所有属性时，它会在自己的数据库中重新创建对象。

2.  一次传输整个数据库。无需重新创建任何东西。

第一个选项的优点是它只发送它需要的东西。如果您有数千个对象，而您更改了一个对象，那么您只会转移那个对象。另一方面，如果您在一个对象上有多个关系，事情会变得非常复杂，因为您还必须发送相关对象。

第二个选项对您来说最简单，但效率不高。如果您更改一个对象，您将发送整个数据库。如果您的数据库大小为几兆字节，则可能需要一段时间，而且您每次进行更改时都会这样做。

理想情况下，您可以按照 iCloud 的方式进行操作。仅推/拉已更改的内容。我不知道 iCloud 如何确定这一点的实现，但我敢打赌这不是一件小事。哪种方法最适合您取决于您​​的数据库有多大以及对象的修改频率。方法 2 最适用于修改很少的大型复杂数据库，方法 1 如果您的数据库相对简单（没有关系或关系很少）并且经历了很多更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T13:30:45.027

如果您可以通过网络浏览，我肯定会使用 iCloud，它可以有效地为您处理这个问题。如果您的应用应该只能在 wifi 上运行，也许您可​​以重新实现 iCloud 的相同行为。它的工作方式在文档[*Using Core Data with iCloud Programming Notes*](http://developer.apple.com/library/ios/#releasenotes/DataManagement/RN-iCloudCoreData/index.html#//apple_ref/doc/uid/TP40011298)中有描述：

> 在 iOS 5 中，Core Data 包括增强功能以​​支持 SQLite 存储与 iCloud 的有效集成。主要的新功能是您提交到持久存储的每个更改都记录在存储在 iCloud 中的离散事务日志文件中，而不是将持久存储文件直接保存在云中。这意味着通过 iCloud 传播更改是有效的（替代方法是为每次更改推送整个 SQLite 文件）。

# apache-flex - 移植移动 Flex/ActionScript 应用程序以在桌面上运行

> ID：14655069
> 
> 赞同：1
> 
> 时间：2013-02-01T21:09:07.740
> 
> 标签：apache-flex, mobile, actionscript

有没有人尝试过将他们的移动 ActionScript/Flex 应用程序移植到 PC/Mac 上运行？问题是 Flex 有一些仅限移动设备的课程和其他不推荐用于移动设备的课程。

我还没有尝试过这样做，我想知道其他人是否愿意分享他们在这个问题上的经验。似乎有几种可能的方法可以做到这一点。

1) 它可能会在应用程序的桌面版本中包含仅限移动设备的库，以便使用尽可能多的通用代码。

2) 将每个视图组件重构为移动设备的容器部分、桌面的容器部分和包含所有控件的内部部分可能会起作用，这些控件可用于移动设备和桌面设备。

3) 从应用程序中写出 Flex 并拥有一个纯 ActionScript 应用程序可能会起作用。这需要我自己编写 ActionScript 中的 View、ViewNavigator 和 TabbedViewNavigator 的替代品，并将所有 spark.components 替换为 fl.controls。（出于性能原因，我已经从移动应用程序中消除了数据绑定和状态）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:30:46.140

> 有没有人尝试过将他们的移动 ActionScript/Flex 应用程序移植到 PC/Mac 上运行？

是的，我用我的手机游戏做到了。同样在[移动 Flextras 组件](https://www.flextras.com/index.cfm?event=ProductHome&productID=21)的演示中。

> 在应用程序的桌面版本中包含仅限移动设备的库可能会起作用，以便使用尽可能多的通用代码。

如果您想在非移动项目中使用移动组件；这就是方法。将仅限移动设备的 SWC 添加到您的库路径中。您可能还需要将移动主题添加到您的库路径中。但是，这可能很乏味，因为您将有两个主题，并且可能会引入共享组件的问题；例如需要指定完整主题的列表或滚动条。

> 将每个视图组件重构为移动设备的容器部分、桌面的容器部分和包含所有控件的内部部分（用于移动设备和桌面设备）可能会起作用。

对于我的手机游戏的主屏幕；我使视图内容扩展了一个组。然后我将它们包装在移动设备上的“视图”或浏览器组中。

我不清楚你的第三个建议会解决什么问题。

我还建议将尽可能多的代码移动到库项目中，以便它们可以在您的桌面、浏览器和移动项目之间共享。

在我的手机游戏中，我有一个用于游戏板的“无 Flex”库。然后我有一个用于视图内容的 Flex 库项目。这个库“包装”了游戏板。然后我在一个移动项目和一个将所有部分放在一起的 Web 项目中使用 Flex 库。

关卡数据的加载方式存在差异（在移动设备上使用文件类，在网页上使用 URLLoader）。我在视图上设置属性来控制各个方面。例如，基于浏览器的游戏版本隐藏了屏幕控件，因为我假设人们会使用箭头键。

# sql - SQL 使用经度/纬度和转换 Int 计算距离。到十进制

> ID：14655073
> 
> 赞同：1
> 
> 时间：2013-02-01T21:09:19.070
> 
> 标签：sql, floating-point, sql-server-2008-r2, latitude-longitude

原始帖子：[将整数更改为浮点并添加小数点](https://stackoverflow.com/questions/14653875/changing-integer-to-floating-point-and-adding-decimal-point)

所以这是背景故事：我正在使用一个从车辆接收 GPS 坐标的数据库，我需要根据经度和纬度值计算出这些车辆的里程。但是，在数据库中，经度/纬度两列都是“Int/Not null”并且没有小数位。所以它们看起来像这样：

```
Latitude Longitude 
36158500 115949833
36340000 115914667
36153488 115944875 
```

我需要它看起来像这样：

```
Latitude Longitude 
36.158500 115.949833  
36.340000 115.914667 
36.153488 115.944875 
```

在 Tim Lehner 的帮助下，我们弄清楚了如何获得小数点，但我无法使用我已经创建的公式来计算里程。我必须能够根据 radio_name 搜索 long/lat 值，以便我可以单独查看每辆车的里程，这就是我创建一个名为 CTE 和 CTE2 的临时表的原因。但是，如果我调用临时表，代码将不起作用，因为它说它是一个无效对象。现在，如果我插入“AVL”（原始表的名称）而不是在下面的最后一条语句中使用 CTE2，则代码可以正常工作。但是，里程不是使用新的纬度/经度值计算的。

回顾一下：这些列是纬度，经度。我们需要将这些列转换为在纬度 2 个字符后和经度 3 个字符后放置一个小数点。然后我们需要一个名为 Miles 的列，它计算给定的纬度和经度值之间的里程。

任何提示，帮助，指针等都非常感谢！谢谢！

```
USE [system]
GO
With CTE as 
(SELECT * FROM AVL 
WHERE (DATE_TIME between '01/30/2013 00:00:00' AND 
'01/30/2013 23:59:59') AND radio_name = 'MAS7'),
CTE2 as 
(select *,row_number() over(partition by Vehicle_ID order by Date_Time) as RN
FROM CTE)

SELECT *, sqrt((69.1*(previous.Latitude - next.Latitude))*
     (69.1*(previous.Latitude-next.Latitude)) +
     (69.1*(previous.Longitude-next.Longitude)) *
     cos(next.Latitude/57.3) * (69.1*(previous.longitude-next.Longitude)) *
     cos(next.Latitude/57.3)) as Miles
From CTE2 as Previous
Join CTE2 as Next
On previous.Vehicle_ID = Next.Vehicle_ID
AND Previous.RN = 
Next.RN - 1
select cast(Latitude / 1000000.0 as decimal(10, 6)) as Latitude
  , cast(Longitude / 1000000.0 as decimal(10, 6)) as Longitude
from cte2 
```

******EDIT******
期望的结果看起来与此类似：

```
Latitude Longitude  Mileage Radio_Name
36.158500 115.949833 3.444  MAS7
36.340000 115.914667 3.443  MAS7
36.153488 115.944875 4.544  MAS7 
```

（这不是正确的里程，但这只是我正在寻找的结果的一个例子。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:35:46.180

请注意[tamp 表、表变量和 CTE 之间的区别](http://www.sqlservercentral.com/Forums/FindPost415849.aspx)。

您当前正在使用更类似于[派生表的](http://www.4guysfromrolla.com/webtech/112098-1.shtml)[Common Table Expressions](http://msdn.microsoft.com/en-us/library/ms190766.aspx)或 CTE，因为它们只能用于直接跟随它们的一个选择（或插入、更新等）语句（尽管您可以声明多个声明的 CTE，正如您所做的那样）。

因此，当您到达第二个 select 语句时，您的 CTE 已经超出范围，您不能再引用它们（或者您必须再次声明它们）。在这种情况下，您可能需要使用[表变量](http://odetocode.com/articles/365.aspx)或[临时表。](http://www.codeproject.com/Articles/42553/Quick-Overview-Temporary-Tables-in-SQL-Server-2005)

您可以通过转换您的 CTE 定义来轻松创建临时表，如下所示：

```
-- Make a temp table
SELECT *
INTO #TempTableName -- Create a new temp table
FROM AVL 
WHERE DATE_TIME between '01/30/2013 00:00:00' AND '01/30/2013 23:59:59'
    AND radio_name = 'MAS7'

-- Check out our new temp table
SELECT * FROM #TempTableName

-- Clean up our temp table, though this will automatically happen once the connection is dropped
DROP TABLE #TempTableName 
```

此外，在使用临时表时，我会经常在我的过程的开头和结尾检查并删除它们，如下所示：

```
if object_id('tempdb..#TempTableName') is not null begin
    drop table #TempTableName
end 
```

在您的代码中使用这些内容，如果您在执行实际距离计算时遇到困难，请告诉我们。

# git - Git推送“权限被拒绝”

> ID：14655079
> 
> 赞同：0
> 
> 时间：2013-02-01T21:09:53.797
> 
> 标签：git, github, push, public-key

我正在尝试将我的代码推送到我的 github 帐户，但是每当我尝试时，我都会得到这个

```
Pushing to git@github.com:AlphaModder/Space-Dimension-Mod.git
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

问题：如何避免“权限被拒绝”？GitHub 远程地址是否有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:45:14.443

我建议您使用 https 地址作为您的远程“来源”：

```
https://github.com/AlphaModder/Space-Dimension-Mod.git 
```

这将避免必须处理 ssh 设置的所有复杂性。
另外，您也可以[缓存您的凭据](https://stackoverflow.com/questions/6191985/git-http-securely-remember-credentials/12938677#12938677)。

如果你确实需要一个 ssh 地址...然后查看例如“ [ssh,github,it doesn't work](https://stackoverflow.com/questions/13781035/ssh-github-it-doesnot-work/13781873#13781873) ”。

# c# - c#虚拟机下打开Powerpoint Presentation

> ID：14655081
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:10:08.103
> 
> 标签：c#, virtual-machine, powerpoint-2007

我尝试使用以下代码

```
PowerPoint.Application objPPt = new PowerPoint.Application();
objPPt.Presentations.Open2007(strFileName, Core.MsoTriState.msoFalse, Core.MsoTriState.msoFalse, Core.MsoTriState.msoTrue, Core.MsoTriState.msoFalse); 
```

或者

```
objPPt.Presentations.Open(strFileName, Core.MsoTriState.msoFalse, Core.MsoTriState.msoFalse, Core.MsoTriState.msoTrue); 
```

在Virutal PC下打开PowerPoint文件，一直失败，但是在本地PC下，没问题。

我使用 VS 2010，添加了 Powerpoint 库 12.0 作为参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:20:39.383

也许您应该将 PowerPoint 程序集安装到 Virtual PC 中的 GAC 中。

# html - MyFaces 2.0.4 无法呈现 h:form 标签

> ID：14655082
> 
> 赞同：0
> 
> 时间：2013-02-01T21:10:08.793
> 
> 标签：html, jsf-2, primefaces, myfaces, omnifaces

我有一个简单的 JSF 2.0 xhtml 页面，当我插入 h:form 标记时它不会呈现。我可以使用普通的标签，一切都很好。

这是我的规格： - Java 1.6 - WebSphere 8.0.0.5 及其内置的 Apache MyFaces 2.0.4 - PrimeFaces 3.4.2 - OmniFaces 1.3 - 我必须支持 HTML 5 标签，所以我正在使用

这是简单的测试页面：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>This is a test page</title>
</h:head>
<h:body>

    <h:form></h:form>
</h:body>
</html> 
```

我还使用 NetBeans 和 Tomcat 7 测试了这个测试页面，其中 MyFaces 2.0.4 被列为依赖项，PrimeFaces 和 OmniFaces 依赖项从我的 pom 中取出，以确保两者都不会导致问题。该页面仍然不会呈现。

请注意，将 DOCTYPE 更改为典型值：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

也不工作。

这是错误：

> javax.faces.FacesException: java.lang.NullPointerException: org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241) 的 serialFactory 在 org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl .java:156) 在 org.apache.catalina.core 的 javax.faces.webapp.FacesServlet.service(FacesServlet.java:191) 的 org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:258)。 ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) at org .apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org.apache。catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java: 99) 在 org.apache.catalina.valve.AccessLogValve.invoke(AccessLogValve.java:929) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter .service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 在 org. java.util.concurrent.ThreadPoolExecutor 上的 apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1813)。runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:722) 原因：java.lang.NullPointerException ： org.apache.myfaces.shared_impl.util.StateUtils.construct(StateUtils.java:235) 的 org.apache.myfaces.shared_impl.util.StateUtils.construct(StateUtils.java:235) 的 serialFactory .renderkit.html.HtmlResponseStateManager.writeViewStateField(HtmlResponseStateManager.java:120) at org.apache.myfaces.renderkit.html.HtmlResponseStateManager.writeState(HtmlResponseStateManager.java:111) at javax.faces.render.ResponseStateManager.writeState(ResponseStateManager.java :67) 在 org.apache.myfaces.application.jsp.JspStateManagerImpl.writeState(JspStateManagerImpl.java:598) 在 javax.faces.application.ViewHandlerWrapper.writeState(ViewHandlerWrapper) 在 org.apache.myfaces.application.ViewHandlerImpl.writeState(ViewHandlerImpl.java:302) 在 javax.faces.application.StateManager.writeState(StateManager.java:200) .java:65) 在 javax.faces 的 javax.faces.application.ViewHandlerWrapper.writeState(ViewHandlerWrapper.java:65) 在 org.apache.myfaces.shared_impl.renderkit.html.HtmlFormRendererBase.encodeEnd(HtmlFormRendererBase.java:179) 在 javax.faces。 component.UIComponentBase.encodeEnd(UIComponentBase.java:519) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:626) 在 javax.faces.component.UIComponent.encodeAll(UIComponent.java:622) 在 javax.faces .component.UIComponent.encodeAll(UIComponent.java:622) 在 org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage。renderView(FaceletViewDeclarationLanguage.java:1320) at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:263) at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59) at javax.faces.application .ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:59) at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85) at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)。 .. 还有 17 个59) 在 org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85) 在 org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239) ... 还有 17 个59) 在 org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:85) 在 org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239) ... 还有 17 个

我注意到这个问题在 MyFaces 2.0.6 中得到了修复。问题是我被束缚在 WAS v8 的 MyFaces 2.0.4 上。我需要使用 WAS v8 的内置 CDI，所以我可以将它与 EJB 3.1 结合使用。您只能将内置 CDI 与内置 MyFaces 一起使用（在 WAS v8 手册中是这样说的）。

任何解决方法的建议？我可以改用简单的`<form>`标签吗？`<form>`使用标签时，我没有看到任何 MyFaces 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:18:30.650

事实证明，OmniFaces 1.3 是罪魁祸首。BalusC 在[OmniFaces 已知问题 wiki 页面](https://github.com/omnifaces/omnifaces/wiki/Known-Issues-%28general%29#myfaces-200-207--210-211)上包含了该错误。

真可惜。我正在使用 OmniFaces 为 IE6-8 有条件地加载 html5.js 脚本。看起来我要等到四月才能看到 WAS v8.0.0.6。

# dart - 有没有办法检查脚本是否在 dart vm 或 dart2js 中运行？

> ID：14655084
> 
> 赞同：8
> 
> 时间：2013-02-01T21:10:15.453
> 
> 标签：dart, dart2js

有没有办法检查脚本是否在 dart vm 或 dart2js 中运行？也许使用镜像 API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-02T10:04:31.070

据我所知，没有*官方的方法。*其目的是出于所有实际目的，您不必知道您是在运行本机还是编译为 JavaScript。

也就是说，您可以使用的技巧很少。最简单的可能是利用了 Dart 有*两种*数字类型`int`和`double`，而 JavaScript 只有一种，相当于 Dart 的`double`，而 dart2js 还没有特殊的实现`int`。因此，`identical(1, 1.0)`在`false`Dart 中，VM 正确地实现了它，但是当编译为 JS 时，它是`true`.

请注意，在使用这样的 hack 之前，您应该*好好思考一下。*在大多数情况下，*您不必这样做*，只需编写 Dart 并且不要尝试识别您是否在运行 JS。此外，没有人能保证它会永远有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-18T00:04:12.257

基于在[路径库](http://api.dartlang.org/docs/releases/latest/path.html)(Dart v0.7.2) 中找到的代码片段：

```
import 'dart:mirrors';

/// Value indicating that the VM is Dart on server-side.
const int DART_SERVER=1;

/// Value indicating that the VM is Dart on client-side.
const int DART_CLIENT=2;

/// Value indicating that the VM is JavaScript on client-side (e.g. dart2js).
const int JS_CLIENT=3;

/// Returns the type of the current virtual machine.
int vmType() {
  Map<Uri, LibraryMirror> libraries=currentMirrorSystem().libraries;
  if(libraries[Uri.parse('dart:io')]!=null) return DART_SERVER;
  if(libraries[Uri.parse('dart:html')]!=null) return DART_CLIENT;
  return JS_CLIENT;
}

/// Application entry point.
void main() {
  print(vmType());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-02T11:12:03.580

让脚本判断是在服务器端 VM 还是在客户端运行的另一种非常老套的方法是使用`Options`该类。

以下应用程序（名为 的文件`myapp.dart`）在命令行 VM 或浏览器中运行时会打印不同的输出：

```
void main() {
  var options = new Options();
  print(options.arguments);
  print(options.executable);
  print(options.script);
} 
```

命令行输出：

```
[]
C:\work\dart\editor\dart\dart-sdk\bin\dart.exe
myapp.dart 
```

浏览器内输出：

```
[]
     <-- empty string
     <-- empty string 
```

不过，无论是在 Dart 浏览器 VM 中运行还是作为 JS 运行，浏览器内的输出都是相同的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-12T21:25:17.683

由于 dart.js 将脚本 .dart 转换为 .dart.js，因此可以：

```
bool _isDart() => document.getElementsByTagName("script").where((s) => s.src.endsWith(".dart.js")).isEmpty; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-02T16:10:30.017

*我一直*在考虑这个问题，实际上，有一种方法可以发现浏览器是否支持使用`navigator.webkitStartDart`. 这是引导 Dart 使用的 dart.js 文件，在确定浏览器是否原生支持 dart 时，我们可以使用 JavaScript 互操作来做同样的事情。

`true`如果在**Dartium**中运行，但`false`如果在**Chrome**或**Firefox**中运行，则以下应用程序返回：

```
import 'dart:html';
import 'package:js/js.dart' as js;

void main() {
  print("Is Dart? = ${isDart()}");
}

bool isDart() => js.scoped(() {
  try {
    // will throw exception if it doesn't exist
    var dartExists = js.context.navigator.webkitStartDart;
    return true;
  }
  on NoSuchMethodError {
    return false;
  }
}); 
```

您的 pubspec 将需要如下所示：

```
name: webkitstart
description: A sample web application
dependencies:
  browser: any
  js: any 
```

@Ladicek 对另一个答案的警告仍然有效：

> 在大多数情况下，您不必这样做，只需编写 Dart 并且不要尝试识别您是否正在运行 JS。

**更新**- 这个解决方案实际上并没有告诉脚本是否在基于浏览器的 dartvm 中运行，只是 dartvm 在浏览器中可用。但是，如果您使用包括`packages/browser/dart.js`- 在内的标准脚本标签部署您的应用程序，那么这将确保如果浏览器*具有*dart-vm，它将在 dart-vm 中启动应用程序。如果您仅显式链接应用程序的 .dart.js 版本并删除对 dart.js 脚本的引用，您只会让应用程序在 javascript 中运行

即，这：

```
<!-- will use dart-vm if available, fallback to JS if not -->
<script type="application/dart" src="example.dart"></script>
<script src="packages/browser/dart.js"></script> 
```

与此相比：

```
<!-- will only use JS, even if dart vm is available -->
<script type="application/dart" src="example.dart.js"></script> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-02-21T10:18:29.297

我不建议您尝试弄清楚您是在“在 VM 上”运行还是编译为 JavaScript。未来，运行 Dart 的方法可能不止这些。

您应该检测您实际想要使用的功能。

要检查 JavaScript*集成*是否可用，您可以检查它是否可用`const bool.fromEnvironment("dart.library.js")`。这意味着该`dart:js`库可用。您可以使用*条件导入*来导入仅取决于`dart:js`可用时的库：

```
import "feature_default.dart"
  if (dart.library.js) import "feature_js.dart"; 
```

`feature_js.dart`仅当库可用时才会导入`dart:js`，否则将导入`feature_default.dart`. （这两个库应该足够相似，无论导入哪个库，导入库都是正确的）。

*目前*有许多库仅在浏览器中运行时可用：`dart:js`以及`dart:html`其他 DOM 库。同样，目前只有 VM 具有`dart:cli`和`dart:ffi`。这些库`dart:mirror`仅在*某些*VM 上可用（它不在 Flutter 中，也不在提前编译的代码中）。

当前的组合没有任何内在的东西。可以将 Dart 和 VM 编译为 WASM，然后在浏览器中运行它*并*使其`dart:js`可用于集成。或者构建一个基于 VM 的应用程序，该应用程序嵌入浏览器视图并`dart:html`在 VM 上运行时仍可使用。

这就是为什么你应该测试你需要的库的可用性，而不是试图从中推断出一个“平台”。平台是开放式的，如果不假设只有两个平台，您的代码将是面向未来的（尽可能多的事情是可能的）。

对于整数，您只需通过对它们进行操作来检查它们是 64 位整数还是浮点数。例如`bool integersAreFloats = (9007199254740992 == (9007199254740992 + 1));`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-21T07:54:23.407

我认为现在最好的方法是：[https](https://dart.dev/guides/libraries/create-library-packages#conditionally-importing-and-exporting-library-files) ://dart.dev/guides/libraries/create-library-packages#conditionally-importing-and-exporting-library-files （[stackoverflow](https://stackoverflow.com/a/60321255/2868318)上的示例）。

规范：[https ://github.com/munificent/dep-interface-libraries/blob/master/Proposal.md](https://github.com/munificent/dep-interface-libraries/blob/master/Proposal.md)

* * *

我认为它是依赖于实现的黑客：

```
const _isJs = (1 << 32) == 0 || (1 << 32) == 1; 
```

dartpad 上的示例：[这里](https://dartpad.dev/2605a25cbfd3e2c929b59034a7c45189)。

表达式的第一部分依赖于`dart2js`（见[#1](https://stackoverflow.com/a/17434110/2868318)，[#2](https://github.com/dart-lang/sdk/issues/8298)）的当前实现。

表达式的第二部分依赖于 JS 规范：[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers)。

```
console.log(1 << 32); // 1
```

# ftp - ncftpget 在被动和主动模式下均失败

> ID：14655090
> 
> 赞同：3
> 
> 时间：2013-02-01T21:10:33.040
> 
> 标签：ftp

我有一个脚本作为 cron 作业在服务器上运行，以使用`ncftpget`. 它失败。

我试图调查并发现以下命令不起作用：

```
ncftpget -v -E ftp://ftp.anexample.org/d1/d2/list 
```

它说（非常相似）：

```
ncftp : Server said : Cannot connect to port XXXX : Connection timed out. 
```

由于活动模式不起作用，我尝试了带有 -F 选项的 PASV 模式，但立即失败了。因此，主动模式和被动模式都不适用于 ftp 站点。而对于其他 ftp 站点，事情进展顺利。请让我知道可能是什么原因以及可以采取哪些措施来解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-19T09:03:28.173

命令应该是 ncftpget -v -E ftp.anexample.org/d1/d2/list

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T10:25:37.460

您是否能够与 ncftp 客户端本身（而不是自动 ncftpget）建立手动连接？您是否检查了明显的内容 - 例如确保 ftp.anexample.org 在线，并且您可以连接到适当的 TCP 端口？（试试“telnet ftp.anexample.org 21”）？

闻起来像防火墙问题 - 也许远程服务器管理员需要配置他们的防火墙接受来自您的 IP 地址的连接？供应商（尤其是通过 FTP 交换专有信息的供应商）收紧他们的防火墙/服务器以仅允许来自特定服务器的连接并不是什么不寻常的事情。

因此，在您尝试自动化之前，请执行手动步骤以确保存在连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-25T19:11:36.610

我知道这篇文章很旧，但我在谷歌搜索时发现了它，所以我要添加我的评论。我有一个类似的问题，它显然与我自己的防火墙有关。将其关闭并尝试命令修复它。现在我只需要找到一个更好的解决方案。

有趣的阅​​读： [https ://www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html](https://www.ncftp.com/ncftpd/doc/misc/ftp_and_firewalls.html)

# php - 比较 UTF-8 字符串

> ID：14655092
> 
> 赞同：16
> 
> 时间：2013-02-01T21:10:51.523
> 
> 标签：php, string, utf-8, comparison

我正在尝试比较两个字符串，比如说 Émilie 和 Zoey。好吧，'E' 出现在 'Z' 之前，但在 ASCII 图表上，Z 出现在 É 之前，所以正常`if ( str1 > str2 )`不会工作。

我试过了`if (strcmp(str1,str2) > 0)`还是不行。所以我正在寻找一种将字符串与 UTF-8 字符进行比较的本地方法。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T21:19:49.893

**重要的**

此答案适用于无法运行/安装 'intl' 扩展的情况，并且仅通过*将重音字符替换为非重音字符来对*字符串进行排序。***要根据特定语言环境对重音字符进行排序，使用[Collat​​or](http://www.php.net/manual/en/class.collator.php)是一种更好的方法***——有关更多信息，请参阅此问题的其他答案。

**在 PHP 5.2 中按非重音字符排序**

您可以尝试使用 iconv() 和 //TRANSLIT 选项将两个字符串都转换为 ASCII 以消除重音字符；

```
$str1 = iconv('utf-8', 'ascii//TRANSLIT', $str1); 
```

然后做对比

请参阅此处的文档：

[http://www.php.net/manual/en/function.iconv.php](http://www.php.net/manual/en/function.iconv.php)

[更新，回应@Esailija 的评论] 我忽略了 //TRANSLIT 以意想不到的方式翻译重音字符的问题。这个问题中提到了这个问题：[php iconv translit for remove 重音： not working as excepted?](https://stackoverflow.com/questions/4910627/php-iconv-translit-for-removing-accents-not-working-as-excepted)

为了使 'iconv()' 方法起作用，我在下面添加了一个代码示例，它使用 preg_replace() 从结果字符串中删除所有非单词字符。

```
<?php

setLocale(LC_ALL, 'fr_FR');

$names = array(
   'Zoey and another (word) ',
   'Émilie and another word',
   'Amber',
);

$converted = array();

foreach($names as $name) {
    $converted[] = preg_replace('#[^\w\s]+#', '', iconv('UTF-8', 'ASCII//TRANSLIT', $name));
}

sort($converted);

echo '<pre>'; print_r($converted);

// Array
// (
//     [0] => Amber
//     [1] => Emilie and another word
//     [2] => Zoey and another word 
// ) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-01T21:17:12.990

没有本地方法可以做到这一点，但是 PECL 扩展：[http ://php.net/manual/de/class.collat​​or.php](http://php.net/manual/de/class.collator.php)

```
$c = new Collator('fr_FR');
if ($c->compare('Émily', 'Zoey') < 0) { echo 'Émily < Zoey'; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-29T10:58:04.317

我建议使用该`usort`函数，以避免修改值，并且仍然正确比较它们。

例子：

```
<?php

setLocale(LC_ALL, 'fr_FR');

$names = [
   'Zoey and another (word) ',
   'Émilie and another word',
   'Amber'
];

function compare(string $a, string $b) {
    $a = preg_replace('#[^\w\s]+#', '', iconv('utf-8', 'ascii//TRANSLIT', $a));
    $b = preg_replace('#[^\w\s]+#', '', iconv('utf-8', 'ascii//TRANSLIT', $b));

    return strcmp($a, $b);
}

usort($names, 'compare');

echo '<pre>';
print_r($names);
echo '</pre>'; 
```

结果：

```
Array
(
    [0] => Amber
    [1] => Émilie and another word
    [2] => Zoey and another (word) 
) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-12-15T12:09:38.320

这里有一些对我有用的东西，虽然我不确定它是否可以用来比较其他语言的特殊字符。

我只是在使用该`mb_strpos`功能并查看结果。我想这将尽可能接近 UTF8 字符串的原生比较：

```
if (mb_strpos(mb_strtolower($search_in), $search_for) !== false) {
    //do stuff
} 
```

# jquery - 如何为粘性菜单添加一定的高度？

> ID：14655095
> 
> 赞同：0
> 
> 时间：2013-02-01T21:11:13.513
> 
> 标签：jquery, html, css

[http://www.mysecretathens.gr/kulte_test/docrads.html](http://www.mysecretathens.gr/kulte_test/docrads.html)

我想在#nav 菜单的特定高度实现粘性菜单效果。类似的东西：[http](http://www.snogglemedia.com/-) ://www.snogglemedia.com/-侧边栏菜单固定在某个高度。我可以用css做到这一点吗？怎么做？还是只有 jquery 才有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:18:00.677

如果菜单根本不需要滚动，则可以使用纯 CSS 实现效果。您将向元素添加以下 CSS：

```
<div id="vertMenu">
    <ul>
        <li>First Item</li>
        <li>Second Item</li>
        <li>Third Item</li>
    </ul>
</div>

div#vertMenu {
    position: absolute;
    top: 150px;
    left: 25px;
} 
```

当然，您需要根据您想要的位置使用自己的顶部和左侧值；但是，绝对定位将使您的 DIV 保持原位。

# gsm - gsm：手机用什么协议给smsc发短信？

> ID：14655103
> 
> 赞同：4
> 
> 时间：2013-02-01T21:12:00.333
> 
> 标签：gsm, smpp

我想知道我的非常低级电话诺基亚 1110 在哪种协议中能够将我的一条短信感应到我的提供商的短信服务中心。

我的“最终目标”是接收从我的手机发送到能够理解协议的“通用设备”的短信。

所以。哪种协议用于现实世界的手机？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:35:05.183

在 GSM 网络中，短消息通过移动应用部分 ( [MAP](http://en.wikipedia.org/wiki/Mobile_Application_Part) ) 传输，该部分是 SS7 协议族的一部分。在 GSM 中，一种设计原则是将信令和有效载荷传输分开，即信令在带外完成。MAP 是一种信令协议，其主要职责是建立和拆除有效载荷通信通道。与带外原则相反，MAP 内联传输短消息。这实际上是短消息限制为 140 字符的原因，它是消息可以在协议信息旁边打包的最大值。

MAP 是一种应用层协议。根据物理传输通道（无线电、铜线、光纤、IP），MAP 通过各种协议栈进行传输。

为了实现您的目标“接收从我的手机发送到'通用设备'的短信”，您需要确定要将设备连接到移动网络的位置。如果要使用无线电接口，则需要构建自己的所谓基带芯片。

# c# - SQL：客户端到服务器端和返回

> ID：14655106
> 
> 赞同：-3
> 
> 时间：2013-02-01T21:12:07.487
> 
> 标签：c#, javascript, asp.net, sql

我有一个 javascript 变量 - 类型：var。

如何将其从客户端传递到服务器端...然后使用存储在变量中的值在 C# (asp.net) 中执行 SQL 查询

（到目前为止，我只在服务器端使用变量进行了 SQL 查询。）

然后在执行查询后，错误检查；如何将结果返回到客户端（javascript）并提取有用信息并将其应用于我的客户端功能？

算法：- 1）在客户端接受 var 2）向服务器发送请求 3）在服务器端接受 4）使用查询值（比如名字）并执行 SQL 查询 5）检查结果 6）如果错误然后发布错误消息 else返回结果 7) 在客户端接受结果 8) 解析结果并提取有用的信息 9) 将此信息用于客户端功能。

有任何想法吗？带有示例代码的链接？这个过程的正式名称是什么？（可能是 REST Web 服务或其他正式名称？）

请帮忙。

谢谢。

```
Var mem_ID = document.getElementById('<%=TextBox3.ClientID%>').value; 
```

现在我如何将它传递到服务器端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:16:11.027

可行的是对服务器端 aspx.net 文件的 AJAX 调用。让它返回你喜欢的文本值，然后在客户端 JavaScript 可以接收它并用它做你喜欢的事情。

这可能是一个复杂的过程。但这将是您开始研究的地方。

[这是一个开始的链接](http://www.w3schools.com/ajax/default.ASP)。

# vba - 根据另一个范围的行号向范围添加值

> ID：14655111
> 
> 赞同：0
> 
> 时间：2013-02-01T21:12:20.027
> 
> 标签：vba, excel

我正在研究一种基于给定列 (G) 中每一行的值生成列表的方法。目前该列表可以复制整行并完美运行。如果 G 列包含所需的文本（“卡片”），它将拉出所有行，并将它们放在另一个电子表格的列表中，没有间隙。

**问题是我希望列表只包含来自每行中包含“卡”的几列的信息，而不是整行。**

有没有办法让我的宏只从“A”、“G”和“ET”列中提取信息？

我目前使用的代码如下：

```
'----Alonso Approved List Generator----'
Sub AlonsoApprovedList()
  Dim cell As Range
  Dim NewRange As Range
  Dim MyCount As Long
  Dim ExistCount As Long
  ExistCount = 0
  MyCount = 1
'----For every cell in row G on the ESI Project Data sheet----'
  For Each cell In Worksheets("ESI Project Data").Range("G6:G5000")
  If cell.Value = "Card" Then
      ExistCount = ExistCount + 1
      If MyCount = 1 Then Set NewRange = cell.Offset(0, -1)
      '----Sets up a new range to copy all data from the row if column G in that row contains the value in question----'
      Set NewRange = Application.Union(NewRange, cell.EntireRow)
      MyCount = MyCount + 1
  End If
  Next cell
  If ExistCount > 0 Then
      NewRange.Copy Destination:=Worksheets("Alonso Approved List").Range("A3")
  End If
End Sub 
```

**所以简而言之，我想修改上面的代码以从一个工作表中获取数据，并在给定“单元格”范围和特定列的行号的情况下在另一个工作表中生成一个列表。**

G 列下拉数据验证列表，其中包含以下项目之一：

> 卡抵押 汽车零售 商业投资顾问 收款 运营 信息技术 社区事务 人力资源营销 物业执行 财务 风险 征信 员工 管理 RCC

那可能吗？

如果我可以使用 match 函数之类的东西来确定标题使用的列，那就太好了。

**澄清一下，这个电子表格由多个不同的用户定期更新，因此信息不是静态的。行添加和更改频繁，偶尔删除。因此，我不能只将原始工作表中的单元格值复制到新列表中。**

问题回复：

1.  G 列下拉数据验证列表，其中包含一项。完整列表位于不同的工作表中。用户进入每个行项目并从特定类别中进行选择。
2.  有问题的其他列包含行项目的名称、类别（与 G 列相同）、货币价值和日期。
3.  我对上传数据犹豫不决，因为其中大部分是公司信息。我的目标是让宏自动将多个单元格从同一行复制到另一张表。正确行的循环和检测已经存在。基本上，有没有办法用该单元格中的几个选择行替换“cell.EntireRow”（复制整行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T19:53:41.407

我想回来并用答案更新这个问题。它有点延迟，但回答的问题比永久开放的问题要好......

```
Sub ApprovedList()

Dim cell As Range
Dim rngDest As Range
Dim i As Long
Dim arrColsToCopy

    arrColsToCopy = Array(1, 3, 4, 5)
    '----For every cell in row G on the ESI Project Data sheet----'
    Set rngDest = Worksheets("Alonso Approved List").Range("A3")

    Application.ScreenUpdating = False

    For Each cell In Worksheets("ESI Project Data").Range("G6:G5000").Cells

        If cell.Value = "Card" Then

            For i = LBound(arrColsToCopy) To UBound(arrColsToCopy)
                With cell.EntireRow
                    .Cells(arrColsToCopy(i)).Copy rngDest.Offset(0, i)
                End With
            Next i

            Set rngDest = rngDest.Offset(1, 0) 'next destination row

        End If

    Next cell

    Application.ScreenUpdating = True

End Sub 
```

# linux - 如何在 shell 中启动作业，即使启动它的 shell 终止，它也会持续存在

> ID：14655114
> 
> 赞同：3
> 
> 时间：2013-02-01T21:12:36.417
> 
> 标签：linux, shell, background-process

如何在 Linux shell 中启动作业，以便即使启动它的 shell 终止，该作业仍将持续存在？

更具体地说，我正在尝试在一个进程上运行 strace。如果我在终端中执行它，它会完美运行。但是，我想在远程 shell 中执行此操作，一旦所有命令执行完毕，该 shell 就会停止。`"strace -p pid &"`没有任何影响，因为当 shell 停止时，后台作业也会被杀死。

我该怎么做？

`nohup`似乎是我正在寻找的东西。但是，`ssh user@remote_machine script_name`似乎也没有任何效果。在我的脚本中`"nohup strace -p pid"`

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:18:25.950

`Nohup``Screen`即使会话断开或用户注销，也可用于运行命令。我都使用它们，但“屏幕”更好。

```
nohup ./<script_name> & 
```

如何使用屏幕？

创建一个任务：

```
$ screen -S task 
```

在任务窗口执行命令，如果你的任务没有完成，使用

```
$ Ctrl+a+d
to save the task. It will show the following info:
[detached] 
```

如果您的任务已经完成，请使用“exit”退出屏幕：

```
 $ exit

[screen is terminating] 
```

您可以使用它`screen -ls`来查找任何屏幕信息：

```
$ screen -ls
There is a screen on:
10000.task (Detached) 
```

使用“screen -r”恢复任务：

```
$ screen -r 10000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:19:47.457

你可以使用“屏幕”！用法：

```
screen [Enter]
enter your command
[Ctrl] + [A] + [D(Detach)] 
```

您的任务继续运行。如果您想返回它，只需输入：

```
screen -r 
```

或者

```
screen -r -d (to detach old sessions) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T05:57:16.257

除了其他答案之外，您可能还想使用[batch(1)](http://linux.about.com/library/cmd/blcmdl1_batch.htm)命令（可能是远程 thru `ssh`），例如

```
 batch << ENDBATCH
    strace -p 1234 -o /tmp/trace.file
  ENDBATCH 
```

# php - 将 arduino 读取的变量发送到 php 脚本（电子收费系统）

> ID：14655122
> 
> 赞同：0
> 
> 时间：2013-02-01T21:13:10.450
> 
> 标签：php, arduino

我正在使用基于 rfid 的 arduino 构建电子收费系统；我想将标签的“唯一 ID”（由 arduino 读取）发送到 php 脚本（存储在本地 apache 服务器根文件夹中）。我已经编写了代码，请指出找出错误并查看以太网设置在程序中是否正确..

```
#include <SPI.h>
#include <Ethernet.h>
EthernetServer server(80);
byte mac[] = { 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
IPAddress gateway(192,168,1,1);
IPAddress subnet(255,255,255,0);
IPAddress ip(192,168,1,4);
EthernetClient client;
int  val = 0; 
char code[10]; 
int bytesread = 0; 
void setup() 
{ 
Ethernet.begin(mac, ip, gateway, subnet);
Serial.begin(9600); 
pinMode(2,OUTPUT);   
digitalWrite(2, HIGH);                 
}  

 void loop() <br>
{ 
 if(Serial.available() > 0) {          
    if((val = Serial.read()) == 10) {   
      bytesread = 0; 
      while(bytesread<10) {             
        if( Serial.available() > 0) { 
          val = Serial.read();
          if((val == 10)||(val == 13)) {  
            break;                       
          } 
          code[bytesread] = val;               
          bytesread++;                   
        }
      } 
      if(bytesread == 10) {             
       client.print("GET try.php?code=");
      client.print(code);

client.println(" HTTP/1.1");
client.println("Host: localhost");  
client.println();        
      } 
      bytesread = 0; <br>
      digitalWrite(2, LOW);                  
           delay(1500);                       
           digitalWrite(2, HIGH);                  // Activate the RFID reader
    } 
  } 
}
the php script:

<?php   
$variable = $_GET['code']
echo  "code is  $variable ";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:27:57.867

您忘记将 EthernetClient 连接到服务器！看看 Arduino[文档](http://arduino.cc/en/Reference/EthernetClient)。

```
if (client.connect(server, 80)) {
    Serial.println("connected");
    client.println("GET /search?q=arduino HTTP/1.0");
    client.println();
} else {
    Serial.println("connection failed");
} 
```

在您的示例中，您必须编写：

```
Serial.println("connected");
client.print("GET /try?code=");
client.print(code);
client.print(" HTTP/1.0");
client.println(); 
```

* * *

编辑：这是一个完整的例子：

代替

```
client.print("GET try.php?code=");
client.print(code);
client.println(" HTTP/1.1");
client.println("Host: localhost");
client.println(); 
```

和

```
if (client.connect(serverIP, 80)) {
    Serial.println("connected");
    client.print("GET /try?code=");
    client.print(code);
    client.print(" HTTP/1.0");
    client.println();
} else {
    Serial.println("connection failed");
} 
```

并将其添加到声明中

```
byte serverIP[] = { 127, 0, 0, 1 }; //That's localhost. Change it to whatever you need! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:18:46.087

在发送 HTTP 请求之前，您似乎缺少一个“client.connect(...)”来连接到您的 PHP 服务器：

[http://arduino.cc/en/Reference/EthernetClient](http://arduino.cc/en/Reference/EthernetClient)

# xml - CAMed/XSD：定义属于许多父元素的元素

> ID：14655132
> 
> 赞同：0
> 
> 时间：2013-02-01T21:14:17.493
> 
> 标签：xml, xsd, schema

我正在创建一个 XSD/CAM 原型来模拟磁盘文件系统。我正在使用免费的 CAMed 软件和 Windows 记事本（当我在 CAMed 软件中遇到错误时）。在我的原型中，我有一个名为“Hold”的元素。Hold 告诉文件系统保留（而不是删除）目录、文件等，因为应用程序需要它。（将 Hold 想象成一个硬链接。）在原型中，Hold 元素可以是多个元素的子元素，而不仅仅是一个元素，而且在所有情况下都是相同的。通常，我只需将 Hold 元素复制并粘贴到它所属的每个父级（例如目录、文件等）中，但是 CAMed 软件没有该功能，我不想手动复制和粘贴记事本中的 XML（然后我会有很多副本要更新和管理。）

是否可以指定一个元素可以属于多个父级，而不复制原始元素定义？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:46:54.080

当然。定义一个名为 Hold 的顶级元素。（“顶级”意味着声明作为 xs:schema 的子项出现，并且不是特定复杂类型的本地。）然后从 Hold 应该出现的复杂类型中引用该元素声明。

因此，您的 Hold 声明将如下所示：

```
<xs:element name="Hold" type="HoldType"/>
<!--* HoldType left as exercise for the reader ... *--> 
```

并且您对目录、文件等类型的声明将引用 Hold，使用 xs:element 元素上的 ref 属性，而不是使用 name 属性声明本地 Hold 元素：

```
<xs:type name="DirectoryType">
  <xs:choice minOccurs="0" maxOccurs="unbounded">
    <xs:element name="blort" type="xs:gYear"/>
    <xs:element name="farble" type="Farble"/>
    <xs:element ref="cadwallader"/>
    <xs:element ref="Hold"/>
  </xs:choice>
<xs:complexType> 
```

在这里，元素 'blort' 和 'farble' 是本地声明，而 'Hold' 和 'cadwallader' 是对其他地方提供的顶级声明的引用。

# php - gearman 正在返回旧工人的结果

> ID：14655135
> 
> 赞同：0
> 
> 时间：2013-02-01T21:14:38.170
> 
> 标签：php, ubuntu, gearman, worker, supervisord

我有一个 PHP gearman 客户端和工作者。我正在用非常少的输出测试我的工人，以确保一切都按预期工作。奇怪的是，我从以前的工人那里得到了旧的结果，我不知道为什么。似乎它们以创造的顺序循环，所以就好像它们仍然存在于某个地方，不知何故。

我已经杀死了所有使用的 Gearman 进程`killall gearmand`，然后验证`netstat -plnt`终端中没有运行任何连接。我什至重新启动了整个盒子，但似乎没有什么能杀死这些老工人。

作为旁注，我正在使用`Supervisord`通过终端加载工作程序并通过删除套接字（`unlink /tmp/supervisor.sock`）来终止该进程。

有人有提示吗？我不知道还能去哪里看。

# c# - 我无法将数据放入我的 dataGridView

> ID：14655139
> 
> 赞同：0
> 
> 时间：2013-02-01T21:14:45.767
> 
> 标签：c#, sql-server, winforms, datagridview, datatable

我在 SQL Server Management Studio 中运行了 SQL Query，它工作正常。

这是我的代码

```
 private void buttonRunQuery_Click(object sender, EventArgs e)
     {
         if (connection == null)
         {
             connection = ConnectionStateToSQLServer();
             SqlCommand command = new SqlCommand(null, connection);
             command = createSQLQuery(command);
             dataGridView1.DataSource = GetData(command);
         }
         else
         {
             SqlCommand command = new SqlCommand(null, connection);
             command = createSQLQuery(command);
             dataGridView1.DataSource = GetData(command);
         }
     }

    private SqlCommand createSQLQuery(SqlCommand command)
     {
         string[] allTheseWords;
         if (textBoxAllTheseWords.Text.Length > 0)
         {
             allTheseWords = textBoxAllTheseWords.Text.Split(' ');
             string SQLQuery = "SELECT distinct [database].[dbo].[customerTable].[name], [database].[dbo].[customerTable].[dos], [database].[dbo].[customerTable].[accountID], [database].[dbo].[reportTable].[customerID], [database].[dbo].[reportTable].[accountID], [database].[dbo].[reportTable].[fullreport] FROM [database].[dbo].[reportTable], [database].[dbo].[customerTable] WHERE ";
             int i = 1;
             foreach (string word in allTheseWords)
             {
                 var name = "@word" + (i++).ToString();
                 command.Parameters.AddWithValue(name, "'%" + word "%'");
                 SQLQuery = SQLQuery + String.Format(" [database].[dbo].[reportTable].[fullreport] LIKE {0} AND ", name);
             }
             SQLQuery = SQLQuery + " [database].[dbo].[customerTable].[accountID] = [database].[dbo].[reportTable].[accountID]";
             command.CommandText = SQLQuery;
         }
         MessageBox.Show(command.CommandText.ToString());
         return command;
     }

    public DataTable GetData(SqlCommand cmd)
     {
         //SqlConnection con = new SqlConnection(connString);
         //SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
         SqlDataAdapter da = new SqlDataAdapter(cmd);
         connection.Open();
         DataTable dt = new DataTable();
         da.Fill(dt);
         connection.Close();
         return dt;
     } 
```

VS2012 没有给出错误，并且我的 DataGridView 中没有数据

有什么建议么？

我看到了这个网站，它并没有真正帮助

```
http://bytes.com/topic/c-sharp/answers/530616-datagridview-combobox-column-databound-item-list 
```

我正在使用 SQL Server 2012

更新后的查询在 SQL Server Management Studio 中带来了 1 个结果（这是预期的）。相同的查询不会在我的数据网格中产生任何行。

我想不通是怎么回事？我需要使用 VS2012 的 GUI 绑定任何东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:49:07.350

我注意到您正在进行 LIKE 搜索，但是当您添加参数时，您没有使用“%”。尝试添加这个：

```
command.Parameters.AddWithValue(name, "%" + word +"%"); 
```

希望这可以帮助。

顺便说一句——该`DataBind`方法不用于 gridviews 的 win 表单，仅用于 web 表单。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:20:13.577

您应该在 DataGrid 上调用方法 DataBind() 以将数据从数据源实际绑定到网格。

```
dataGridView1.DataBind(); 
```

# python - 将字典限制为具有值的元素的更多pythonic方法是什么？

> ID：14655141
> 
> 赞同：3
> 
> 时间：2013-02-01T21:14:59.870
> 
> 标签：python

给定项目的字典

```
sample = { 'a':1 , 'b':2 , 'c':3 , 'd':None , 'e':None } 
```

我想创建一个新的字典，它只包含具有值的项目。

这有效..

```
a = dict([ i for i in testing.iteritems() if i[1]]) 
```

但我想知道是否有更多的pythonic/可读性。

我希望我能做类似的事情

```
a = dict([ i for i in testing.____() if i.value() ]) 
```

但是没有像这样工作的标准迭代器。

出于可读性目的，我对此感到好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:19:27.387

你可以使用`dict comprehension`： -

```
>>> {key: value for key, value in sample.iteritems() if value}
0: {'a': 1, 'b': 2, 'c': 3} 
```

注意：如果使用 python 3，那么只需使用 sample.items() 因为这是 2.7 和 3 不同的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:18:56.683

使用元组解包（将每个键和值分配给单独的变量，`k`在`v`以下示例中）和字典理解：

```
a = {k: v for k, v in sample.iteritems() if v} 
```

或显式测试`None`而不是所有虚假值（数字 0、空序列等）：

```
a = {k: v for k, v in sample.iteritems() if v is not None} 
```

在 Python 3 中，您只需要使用`items()`：

```
a = {k: v for k, v in sample.items() if v} 
```

对于您的样本，上述所有变化都会导致：

```
>>> sample = { 'a':1 , 'b':2 , 'c':3 , 'd':None , 'e':None }
>>> {k: v for k, v in sample.iteritems() if v}
{'a': 1, 'c': 3, 'b': 2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:22:54.743

蟒蛇 3：

```
sample =  {'a': 1, 'e': 0, 'd': None}
k = {k: v for k, v in sample.items() if v is not None}

>>> k
{'a': 1, 'e': 0} 
```

# spring - 使用带有子对象的休眠插入不返回完整对象

> ID：14655142
> 
> 赞同：0
> 
> 时间：2013-02-01T21:15:01.900
> 
> 标签：spring, hibernate, jpa, foreign-keys, parent-child

我正在使用 Spring 3.2 和 hibernate-core 4.1.4 和 hibernate-jpa-2.0.1。应用程序资源文件具有所有正确的对象。

我有一个子对象 RoleEntity，它有两个父对象：User 和 Award，因此 userId 和 AwardId 是已经存在的外键，并且必须存在才能创建角色实体。

```
public class RoleEntity implements Serializable
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "role_id")
    private long roleId;

    @Column(name = "role_description")
    private String roleDescription;

    @Column(name = "role_name")
    private String roleName;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "user_id")
    private UserEntity user;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "award_id")
    private AwardEntity award;

     ... getters/setters
     ... hash/equals/toString
} 
```

我的 DAO 插入看起来很简单：

```
@Override
public RoleEntity saveRoleEntity(RoleEntity role)
{
     logger.debug("saveRoleEntity: role=" + role);
     return role;
} 
```

我已经对该代码进行了单元测试，并且可以确认，当我选择现有的 roleId 时，我可以完全取回加载的对象，并且完全填充了 User 和 Award。

但是，当我插入新角色时，我会执行以下操作：

1.  将 roleId 设置为 0，并将角色描述...
2.  创建一个userEntity并只设置id，这个id已经存在并且不是新的
3.  创建一个awardEntity并只设置id，这个id已经存在并且不是新的

我可以成功保存，这太棒了！！！！为我工作。而在新的对象返回中，我可以清楚的看到新的roleId返回给我了！！！RoleEntity 的所有其他字段，例如描述，都在那里。

但是，我还想要完全填充 RoleEntity 的 User 和 Award 字段，就好像我在插入后进行了选择一样。这甚至可能吗？

我宁愿不对用户和奖励表进行选择以获取这些对象，然后将它们分配给该对象，但如果我必须这样做，那很好。

如果我需要提供更多信息，请告诉我。感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:55:52.050

试试这个方法：
 `sess.save(role);
sess.flush(); //force the SQL INSERT
sess.refresh(role);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T11:28:15.683

这里有两件事。首先，您不应仅仅为了使用此 ID 而创建具有已知 ID 的**新实体。**这种方法是一个等待发生的意外：具有此 ID 的实体已经存在，您将遇到一个`ConstraintViolationException`or`NonUniqueObjectException`因为这个重复的键。

如果您想使用具有已知 ID 的实体但不想从数据库中选择完整的实体，则可以使用 Hibernate 使用**代理。**

```
UserEntity user = session.load(UserEntity.class, userId);
AwardEntity award = session.load(AwardEntity.class, awardId); 
```

这不会命中数据库来选择实体，但会返回一个代理（包装已知 id）。在同一个会话中，您可以像使用完整实体一样使用代理并创建新的`RoleEntity`

```
RoleEntity role = new RoleEntity();
role.setUser(user);
role.setAward(award);
session.save(role); 
```

第二件事是：Hibernate 应该如何在不访问数据库的情况下*知道*实体的非 id 属性！？Hibernate 可以做到这一点的唯一方法是使用[二级缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-cache)（L2C），但根据您的问题，我假设没有 L2C。

即使您的`@ManyToOne`关联是预先*获取*的，Hibernate 也必须访问数据库以填充相应的实体。因此，您可以使用@Bogdan 回答中的方法，并在插入后重新加载角色以及关联的用户和奖励实体

```
session.save(role);
session.refresh(role); 
```

但这与首先选择相应的实体以将它们分配给新角色相比没有性能优势

```
UserEntity user = session.get(UserEntity.class, userId);
AwardEntity award = session.get(AwardEntity.class, awardId); 
```

这将立即访问数据库并填充您的实体（如果不存在具有给定 ID 的行，则返回 null）。

请注意，当您使用代理时，您可以在同一会话中*按需填充您的实体。*一旦访问了非 id 属性，就会从数据库中选择相应的实体。

也就是说，我建议您查看 Hibernate[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch11.html)以获得更好的理解。如果您想在生产级别上使用 Hibernate，您还应该阅读一本很好的 Hibernate 书籍，例如[Java Persistence with Hibernate](https://rads.stackoverflow.com/amzn/click/com/1932394885)。

希望这可以帮助。

# xcode - Mac OS X Lion 没有 /usr/include 文件夹？

> ID：14655154
> 
> 赞同：4
> 
> 时间：2013-02-01T21:15:55.113
> 
> 标签：xcode, macos

我一直在尝试在 C++ 程序中使用 SQLite API，但我找不到 SQLite 包含文件。[在这篇文章Mac OSX sqlite api for C++](https://stackoverflow.com/questions/14205366/mac-osx-sqlite-api-for-c)中有人告诉我，sqlite 已经出现在 Mac OS X 上，并且可以在 /usr/include 中找到标头。

我最近购买了带有 Mac OS X Lion、Xcode 4.3.2 的 MacBook Pro，并且 /usr 文件夹中没有包含文件夹。/usr 包含

```
 X11
  X11R6
  bin
  clang-ide
  lib
  libexec
  local
  sbin
  share
  standalone 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T21:19:42.563

您需要[下载并安装 Xcode 命令行工具](http://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html#//apple_ref/doc/uid/1006-SW2)。该链接向您展示了如何在 Xcode 中执行此操作。

# asp.net-mvc-4 - 在 Application_Start ASP.NET MVC 4.0 中访问 HttpContext

> ID：14655155
> 
> 赞同：1
> 
> 时间：2013-02-01T21:15:55.363
> 
> 标签：asp.net-mvc-4, httpcontext, application-start

我想访问我的主机并构建我的捆绑包。我知道在 Application_start 中访问 httpcontext 并不直接。

您能否建议任何其他解决方法以找到`Request.url.host`in`RegisterBundles`方法

**全球.asax**

```
 protected void Application_Start()
        {
          BundleConfig.RegisterBundles(BundleTable.Bundles);
        } 
```

**BundleConfig.asax**

```
public static string host { get; set; }
        public static string siteCssFileName { get; set;  }
        public static void RegisterBundles(BundleCollection bundles)
        {
host = "~";
            if (System.Web.HttpContext.Current.Request.Url.Host.Contains("local"))
                host = "http://localhost:xxx";
                else
                host=Request.url.host;
                bundles.Add(new StyleBundle("~/Content/jQuery/ui/css")
                  .Include(host+"/css/jQuery/hro-0079c1/jquery-ui-1.8.11.custom.css"));
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:20:44.103

编辑：建议替代方法。

这里有几种方法可以做到这一点：

*   创建两个版本的捆绑包
*   添加一个局部视图，用于检查`Request.IsLocal`和呈现适当的捆绑包集
*   从布局中调用局部视图

另一种方法是创建一个 HtmlHelper 方法来为您解析路径。

另一种方法是创建多个布局，并确定要在 viewstart 中使用的正确布局。

有很多方法可以实现这一点，只有少数几种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T15:27:27.597

由于我无法在**应用程序启动事件**中获取我的 Request 对象，因此我选择了以下方法来完成我的任务。我只想知道我在应用程序启动活动中的主持人。

1.  创建 Web.Config 转换
2.  在每个环境中添加一个应用程序密钥，例如 `<add key="cdnReference" value="http://localhost:xxxx/" />`
3.  将您的应用启动事件中的密钥读取为`cdnHost = ConfigurationManager.AppSettings["cdnReference"];`

# sockets - 如何像真正的连接失败一样停止接受？

> ID：14655156
> 
> 赞同：2
> 
> 时间：2013-02-01T21:15:57.843
> 
> 标签：sockets

我正在使用 select() 进行非阻塞 TCP 套接字编程。

正常设置后，

```
socket()
make socket non-blocking
bind()
listen()
FD_ZERO
FD_SET
  ...
select()

FD_ISSET
  ...
  s = accept() 
```

出于某种原因，在 FD_ISSET 之后服务器做了一些准备但随后选择不接受。简单的方法就是在 accept() 之后关闭 s。但是在accept()之前，有没有办法告诉客户端这个连接应该失败呢？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:27:15.917

不，如果你得到一个传入连接并且你根本不想要它，你将不得不立即这样`accept()`做`close()`。这不是 TCP（或其他网络协议）工作方式的结果，而是套接字 API*中*固有的。

假设我们正在谈论 TCP/IP，请注意，当`select()`（`poll()`或其他）通知您侦听套接字已准备好读取时，不接受连接已经为时已晚：内核已经接受代表您的连接。也就是说，它已经发出了一个`SYN|ACK`响应传入的`SYN`数据包。这实际上是`listen()`系统调用的效果。之后，调用`accept()`只是一种形式：它为接受的连接分配一个新的文件描述符。

可能利用不同的做事方式的最值得注意的软件是[TCP 包装器](http://www.freebsd.org/doc/handbook/tcpwrappers.html)。TCP 包装器通常仅根据远程 IP 地址来决定是否接受传入连接。如果它有机会做出这个决定并在连接被接受之前拒绝连接，那么它将使 TCP 包装器拒绝连接的客户端能够获得真正的“连接被拒绝”响应（`RST`对数据包的响应`SYN`，只是就像没有在端口上监听一样）。但是对于套接字接口，它没有办法做到这一点。而是打开客户端的连接，然后立即关闭。

并非所有操作系统都以这种方式相同。例如，在 Cisco IOS 上，当您在 vty 端口上配置访问列表以允许来自某些 IP 地址的传入连接并拒绝来自其他地址的传入连接时，被拒绝的连接会得到真正的“连接被拒绝”。但它不是使用套接字实现的。（它可能是使用非常专有的东西实现的。）

# parsing - 解析 Haskell 自定义数据类型

> ID：14655157
> 
> 赞同：2
> 
> 时间：2013-02-01T21:15:58.153
> 
> 标签：parsing, haskell, parsec, attoparsec

我已经完成了这里提供的 Haskell Koans： [https ://github.com/roman/HaskellKoans](https://github.com/roman/HaskellKoans)

我被困在最后两个 Koans 上，都涉及解析自定义代数数据类型。这是第一个：

```
data Atom = AInt Int | ASym Text deriving (Eq, Show)

testAtomParser :: Test
testAtomParser = testCase "atom parser" $ do
    -- Change parser with the correct parser to use
    --
    let parser = <PARSER HERE> :: P.Parser Atom
    assertParse (ASym "ab") $ P.parseOnly parser "ab"
    assertParse (ASym "a/b") $ P.parseOnly parser "a/b"
    assertParse (ASym "a/b") $ P.parseOnly parser "a/b c"
    assertParse (AInt 54321) $ P.parseOnly parser "54321" 
```

如何定义变量解析器以便它可以解析代数数据类型`Atom`以传递断言？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T22:40:51.057

## 一世。

ADT 的解析器倾向于反映 ADT 的形状。您的 ADT 由两个不相交的部分组成，因此您的解析器可能也有两个不相交的部分

```
atom = _ <|> _ 
```

## 二、

假设我们知道如何解析单个数字（让我们称之为基本解析器`digit`）然后我们通过重复它来解析一个（非负）整数。

```
natural = let loop = digit >> loop in loop 
```

这成功地解析了无限的数字流并将它们丢弃。我们能做得更好吗？不幸的是，不仅仅是一个 monad 实例，我们还需要另一个基本组合`many`器 ，它修改一些其他解析器以消耗输入 0 次或更多次，将结果累积到一个列表中。我们实际上会稍微调整一下，因为空解析不是有效数字

```
many1 p = do x  <- p
             xs <- many p
             return (x:xs)

natural' = many1 digit 
```

## 三、

原子呢？要通过测试用例，似乎原子必须是一对多的字母数字字符*或*反斜杠。同样，这种不相交的结构可以立即在我们的解析器中表达

```
sym = many1 (_ <|> _) 
```

我们将再次使用一些内置的简单解析器组合器来构建我们想要的东西，比如`satisfy :: (Char -> Bool) -> Parser Char`匹配任何满足某个谓词的字符。我们可以立即构建另一个有用的组合器，`char c = satisfy (==c) :: Char -> Parser Char`然后我们就完成了。

```
sym = many1 (char '/' <|> satisfy isAlpha) 
```

where `isAlpha`is a predicate 很像 regex `[a-zA-Z]`。

## 四。

所以现在我们有了解析器的核心

```
natural <|> sym :: Parser String 
```

`many1`组合器将我们的字符解析器提升为字符*列表*( `String`s!) 的解析器。这种提升动作也是构建 ADT 解析器的基本思想。我们想把我们`Parser String`提升到`Parser Atom`. 一种方法是使用一个函数`toAtom :: String -> Atom`，然后我们可以将其`fmap`放入`Parser`

```
atom' :: Parser Atom
atom' = fmap toAtom (natural <|> sym) 
```

但是具有类型的函数`String -> Atom`首先破坏了构建解析器的目的。

如 I. 中所述，重要的部分是 ADT 的形状反映在我们的`atom`解析器的形状中。我们需要利用它来构建我们的最终解析器。

## 五。

我们需要利用`atom`解析器结构中的信息。让我们构建两个函数

```
liftInt :: String -> Atom  -- creates `AInt`s
liftSym :: String -> Atom  -- creates `ASym`s

liftInt = AInt . read
liftSym = ASym 
```

每个都说明了将`String`s 转换为`Atom`s 的方法，还说明了我们正在处理的*类型。*`Atom`值得注意的是，`liftInt`如果我们将一个无法解析为`Int`. 幸运的是，这正是我们所知道的。

```
atomInt :: Parser Atom
atomInt = liftInt <$> natural

atomSym :: Parser Sym
atomSym = liftSym <$> sym

atom'' = atomInt <|> atomSym 
```

现在，我们的`atom''`解析器利用了`natural`只返回对自然有效解析的字符串的保证——我们的调用`read`不会失败！——我们尝试按顺序构建两者`AInt`，`ASym`在不相交的情况下一个接一个地尝试结构就像我们的 ADT 的结构一样。

## 六、

整个shebang是这样的

```
atom''' =     AInt . read <$> many1 digit
          <|> ASym <$> many1 (    char '/' 
                              <|> satisfy isAlpha) 
```

这显示了解析器组合器的乐趣。整个东西是用微小的、可组合的、简单的部件从地面上建立起来的。每个人都做了一个非常小的工作，但它们一起跨越了很大的解析器空间。

您还可以轻松地在 ADT 中使用更多分支、更彻底指定的符号类型解析器或失败修饰来扩充此语法，`<?>`以便在解析失败时获得大量错误消息。

# google-apps-script - 在谷歌电子表格中设置背景颜色时的权限问题

> ID：14655159
> 
> 赞同：0
> 
> 时间：2013-02-01T21:16:00.010
> 
> 标签：google-apps-script, google-sheets

我在 Google Docs 中有一个脚本，如果 Status 列包含某个值，它会设置行的背景颜色。问题是工作表具有某些受保护的列，因此当受限制的用户在其部分触发脚本时，它会运行，但他们会收到令人讨厌的权限错误消息（因为脚本会为受保护列的部分着色）。因此，我需要创建 2 个脚本，以块的形式为行着色，因此当受限用户触发个性化状态消息时，只有其未受保护的列着色。这是为整行着色的代码（由可安装的 onedit 触发器触发）：

```
function setBackLogColor() {

 var range = SpreadsheetApp.getActiveSheet().getDataRange();
 var statusColumnOffset = getStatusColumnOffset();

for (var i = range.getRow(); i < range.getLastRow(); i++) { 
 rowRange = range.offset(i, 0, 1);
 status = rowRange.offset(0, statusColumnOffset).getValue();

if (status == 'TO LD') 
{
  rowRange.setBackgroundColor("#cfe2f3");
} 
else if (status == 'TO GB' ) 
{
  rowRange.setBackgroundColor("#d9ead3");
} 
else if (status == 'TO OUTSIDE PARTY - WILL COME BACK' ) 
{
  rowRange.setBackgroundColor("#f4cccc");
} 
 else if (status == 'Hand Delivery 2' ) 
{
  rowRange.setBackgroundColor("#d9ead3");
} 
 else if (status == 'Hand Delivery' ) 
{
  rowRange.setBackgroundColor("#cfe2f3");
} 
else 
{
  rowRange.setBackgroundColor("#FFFFFF");
}
 }
}

//Returns the offset value of the column titled "Status"
//(eg, if the 7th column is labeled "Status", this function returns 6)
function getStatusColumnOffset() {
lastColumn = SpreadsheetApp.getActiveSheet().getLastColumn();
var range = SpreadsheetApp.getActiveSheet().getRange(1,1,1,lastColumn);

for (var i = 0; i < range.getLastColumn(); i++) {
if (range.offset(0, i, 1, 1).getValue() == "Status") {
  return i;
}  
}
} 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T15:42:49.163

[这将是Try..Catch 块](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)的一个很好的应用。

```
var statusColor = "#FFFFFF"; // default value
switch (status) {
  case 'TO LD':
  case 'Hand Delivery':
    statusColor = "#cfe2f3";
    break;
  case 'TO GB':
  case 'Hand Delivery 2':
    statusColor = "#d9ead3";
    break;
  case 'TO OUTSIDE PARTY - WILL COME BACK':
    statusColor = "#f4cccc";
    break;
  default:
    // do nothing, default already set
    break;
}

try {
  // try coloring whole range
  // If non-privileged user, this will throw an exception.
  rowRange.setBackgroundColor(statusColor);
}
catch (err) {
  // You could validate that the error is indeed a permission error.
  // Let's assume that's the case, and color only the unprotected columns.
  var unprotRowRange = someSubsetOf(rowRange);  // <<<<< Adjust as needed.
  unprotRowRange.setBackgroundColor(statusColor);
} 
```

# session - WSO2 Identity Server SOAP API 和集群

> ID：14655160
> 
> 赞同：2
> 
> 时间：2013-02-01T21:16:04.547
> 
> 标签：session, wso2, identity, wso2is

`RemoteUMClient`代码示例表明 WSO2 IS（身份服务器）可能正在使用会话管理，因为`authCookie`正在返回 an。

我的问题是这将如何在集群环境中工作？WSO2 IS 实例是否以某种方式共享会话信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T09:32:54.673

WSO2 Identity Server 会话复制在 Axis2 级别进行。

使用 Axis2 集群功能对 WSO2 产品进行集群。因此，如果会话需要跨集群共享，则需要启用会话复制，`axis2.xml`如下所示。

第 1 步：打开`axis2.xml`并`<IS_HOME>/repository/conf/axis2/axis2.xml`找到聚类部分

第 2 步：通过以下方式启用集群，`<clustering class="org.apache.axis2.clustering.tribes.TribesClusteringAgent" enable="true">`

第 3 步：通过以下方式启用会话复制，`<stateManager class="org.apache.axis2.clustering.state.DefaultStateManager" enable="true">`

谢谢！

# android - 构建版本与 MinSdk 与 targetSdk

> ID：14655167
> 
> 赞同：1
> 
> 时间：2013-02-01T21:16:38.227
> 
> 标签：android

每次我对此感到困惑并进行搜索时，我“认为”我理解它，但我似乎也没有。

有人可以向我解释您正在构建的 API 与您在清单中指定的 Min SDK 和您指定的目标 SDK 之间的区别。

例如：我有一个应用程序，其 minSDK 为 8，targetSDK 为 15，我针对 SDK 12 构建。有什么区别？它在什么设备上运行？我从这些差异中得到了什么！有人请解释！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:26:27.847

> 有什么不同？

差值是两个数字相减的结果。但这在这里并不重要。:-)

> 它在什么设备上运行？

这取决于你的代码和其他任何东西。但是，它*不会*在 API 级别 7 及更低级别上运行，因为它们低于您的`minSdkVersion`. Android 设备（和市场）不允许您的应用在 API 级别 7 及更低的设备上运行。

> 我从这些差异中得到了什么！

通过将构建目标设置为 12，您对编译器和构建工具说：“我想使用比 API 级别 8 更新的 API，直到 API 级别 12，但我保证这样做的方式是避免在旧设备上使用那些较新的 API”。当您尝试在没有适当保护（例如，检查`android.os.Build.SDK_INT`）的情况下使用较新的 API 时，构建工具，尤其是 Lint 会对您大喊大叫。

通过设置`android:targetSdkVersion`为 15，您对编译器和构建工具说：“当我编写此代码时，我正在考虑 API 级别 15”。*比您的目标更新*的设备可能会选择以不同的方式做事，以尝试更好地模拟 API 级别 15 的生活。

后者最好的例子是`AsyncTask`。传统上，任务可以并行运行。但是，*如果*您已`android:targetSdkVersion`设置为 13 或更高，*并且*您在 API 级别 13 或更高的设备上运行，*则*默认情况下任务将串行执行。如果您在 API 级别 13 或更高级别的设备上运行，但您的设备级别`android:targetSdkVersion`为 12 或更低，则设备将回退到旧行为，以保持兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:27:46.850

您用于构建自己的应用程序的 SDK 将定义所有可用的类。没有理由不使用最高可用的（目前为 17）

正如 JoxTraex 所提到的，minSDK 是：“您的应用程序工作所需的最小 android 操作系统 API 集”

targetSDK 是您测试过您的应用程序的最高版本。这将启用一些功能（全息、再见菜单按钮）。在新的 Android 版本中默认引入了这些更改，但您应该在清单中写明这些新功能已经过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:21:02.570

Min SDK 是您的应用运行所需的最小 android 操作系统 API 集

Target SDK 是您的主要平台目标版本，通常始终高于 Min。

它不决定设备，因为设备的平台版本可以更改。

# css - 页面加载时悬停颜色不会持续存在

> ID：14655170
> 
> 赞同：0
> 
> 时间：2013-02-01T21:16:44.703
> 
> 标签：css

一旦用户选择的页面加载，我一直无法编写 CSS 以使左侧导航保持悬停状态。这是网站：

[http://dev.triptocollege.org/eductor/Things-I-Should-Be-Doing-Now.aspx](http://dev.triptocollege.org/educator/Things-I-Should-Be-Doing-Now.aspx)

这是二级导航的 CSS：

/ ***** ** *** ** *** ** *** ******第二级垂直导航****** ** *** ** *** ** *** ** *** **** /*

 *```
.second-level-menu-vertical {
    float: left;
    font-family: 'vERDANA',sans-serif;
    font-size: 110%;
    font-weight: bold;
    margin-left: -10px;
    margin-top: 57px;
    text-transform: lowercase;
    width: 155px;
    z-index: 200;
    position:absolute;
}

.second-level-menu-vertical ul {
    padding-bottom: 10px;
}
.second-level-menu-vertical li {
    background: none repeat scroll 0 0 transparent;
    margin: 0;
    padding: 0 0.75em;
}
.second-level-menu-vertical li a {
    border-bottom: 1.75px dashed #C9C9C9;
    color: #666;
    display: block;
    padding: 1em 0;
    text-decoration: none;
}
.second-level-menu-vertical li a:hover {
    background-color: #FDCC00;
    border-radius: 7px 7px 7px 7px;
    color: #000;
    text-decoration: none;
}
.second-level-menu-vertical li.selected {
    background-color: #FDCC00;
    border-radius: 7px 7px 7px 7px;
    color: #000;
    text-decoration: underline;
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:22:04.267

您需要做一些事情来将“当前”类添加到与您已加载的页面对应的列表项中，然后您可以使用您拥有的 CSS 执行以下操作：

```
.second-level-menu-vertical li a:hover, .second-level-menu-vertical li.current a {
    background-color: #FDCC00;
    border-radius: 7px;
    color: #000;
    text-decoration: none;
} 
```

您可以使用 Javascript（在客户端）或在生成菜单的 ASP.NET 代码（通过代码隐藏）中添加该类...我无法建议您哪个更适合您，因为您只包括的CSS。

*已编辑*

鉴于此标记：

```
<div class="second-level-menu-vertical">
    <ul class="top-level">
        <li><a href="K-5th-Grades.aspx">K-5th Grades</a></li>
        <li><a href="6th-grade.aspx">6th Grade</a></li>
        <li><a href="7th-grade.aspx">7th Grade</a></li>
        <li><a href="8th-grade.aspx">8th Grade</a></li>
        <li><a href="9th-grade.aspx" class="selected">9th Grade</a></li>
        <li><a href="10th-grade.aspx">10 Grade</a></li>
        <li><a href="11th-grade.aspx">11th Grade</a></li>
        <li><a href="12th-grade.aspx">12th Grade</a></li>
        <li><a href="college-checklist.aspx">College Checklist</a></li>
        <li><a href="savings-growth-calculator.aspx">Savings Growth Calculator</a></li>
    </ul>
</div> 
```

（注意，我在其中放置了一个选定的类来说明......如果您采用 jQuery 或 Javascript 方法，那么它不应该出现在您的标记生成器中。如果您可以将它放入您的标记生成器中，那么它将删除需要Javascript方法！）

这是修改后的CSS：

```
.second-level-menu-vertical {
    float: left;
    font:bold 110% 'verdana', sans-serif;
    margin-left: -10px;
    margin-top: 57px;
    text-transform: lowercase;
    width: 155px;
    z-index: 200;
    position: absolute;
}
.second-level-menu-vertical ul {
    padding-bottom: 10px;
}
.second-level-menu-vertical li {
    background: none;
    margin: 0;
    padding: 0 0.75em;
}

/* Don't forget LoVe-HAte to set the default styles for non-hover states */
.second-level-menu-vertical li a,
.second-level-menu-vertical li a:link,
.second-level-menu-vertical li a:visited,
.second-level-menu-vertical li a:hover,
.second-level-menu-vertical li a:active {
    border-bottom: 1.75px dashed #C9C9C9;
    color: #666;
    display: block;
    padding: 1em 0;
    text-decoration: none;
}

.second-level-menu-vertical li a:hover,
.second-level-menu-vertical li a.selected,
.second-level-menu-vertical li a.selected:link,
.second-level-menu-vertical li a.selected:visited,
.second-level-menu-vertical li a.selected:hover,
.second-level-menu-vertical li a.selected:active {
    background-color: #FDCC00;
    border-radius: 7px;
    color: #000;
    text-decoration: underline;
} 
```

这是您需要的非常简单的 jQuery。它根据您当前在网站上使用的 URL 做出了几个假设，其中一个是您在任何这些 URL 中都没有查询字符串，并且您将始终以与给定匹配的页面名称结尾菜单中的href。

```
// you want the path of the location, 
// as that should not include the querystring, 
// if you have one
var pathGroup = location.pathname.split("/");
// split it by the / character
// then get the last element... this should be your
// current page name
var currentPage = pathGroup[pathGroup.length - 1];
// This selector finds the a tag that 
// has an href matching your currentPage
// variable. It then adds a selected class
// to that a tag
var menuItems = $(".second-level-menu-vertical li a[href~='" + currentPage + "']").addClass("selected"); 
```

请注意，使用常规 javascript 来实现这一点要复杂一些。上面的示例可以在 jsFiddle ( [http://jsfiddle.net/mori57/dDsjf/](http://jsfiddle.net/mori57/dDsjf/) ) 上看到，但显然它不会在那里工作（虽然可能更容易阅读），因为它无法链接到您的网站正确。

非 jQuery Javascript 方法（[http://jsfiddle.net/mori57/rQXBV/2/](http://jsfiddle.net/mori57/rQXBV/2/)）：

```
// you want the path of the location, 
// as that should not include the querystring, 
// if you have one
var pathGroup = location.pathname.split("/");
// split it by the / character
// then get the last element... this should be your
// current page name
var currentPage = pathGroup[pathGroup.length - 1];
// get the top level element, and get the first
// element returned, as getElementsByClassName 
// returns an array
var sideMenu = document.getElementsByClassName("second-level-menu-vertical")[0];
// get all the li items from that item
var sideLinks = sideMenu.getElementsByTagName("li");
// loop through the list returned
for(var link in sideLinks){
    // make sure that you're dealing with an object
    if(typeof sideLinks[link] == "object"){
        // get the <a/> tag from inside the li
        var aTag = sideLinks[link].getElementsByTagName("a")[0];
        // get the <a/> tag's href
        var href = aTag.getAttribute("href");

        if(href == currentPage){
            // if the href matches your currentPage
            // value, set the class to 'selected'
            aTag.setAttribute("class","selected");
        }
    }
} 
```*

# python - 如何有效地将 Pandas 中的相似数据框组合成一个巨大的数据框

> ID：14655172
> 
> 赞同：4
> 
> 时间：2013-02-01T21:16:52.160
> 
> 标签：python, pandas, time-series

我有 7000 个带列的数据框

```
Date, X_1
Date, X_2
... 
```

每个数据框有大约 2500 行。

日期有时会重叠，但不保证会重叠。

我想将它们组合成表单的数据框

```
Date  X_1  X_2 etc. 
```

我尝试应用`combine_first`7000 次，但速度真的很慢，因为它必须创建 7000 个新对象，每个都比上一个稍大。

有没有更有效的方法来组合多个数据帧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:03:17.147

假设 Date 是索引而不是列，那么您可以执行“outer” [`join`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.join.html)：

```
df1.join([df2, df3, ..., df7000], how='outer') 
```

*注意：传入 DataFrames 的生成器而不是列表可能更有效。*

例如：

```
df1 = pd.DataFrame([[1, 2]], columns=['a', 'b'])
df2 = pd.DataFrame([[3, 4]], index=[1], columns=['c', 'd'])
df3 = pd.DataFrame([[5, 6], [7, 8]], columns=['e', 'f'])

In [4]: df1.join([df2, df3], how='outer')
Out[4]: 
    a   b   c   d  e  f
0   1   2 NaN NaN  5  6
1 NaN NaN   3   4  7  8 
```

.

如果`'Date'`是列，您可以[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)先使用：

```
df1.set_index('Date', inplace=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:34:35.123

这个怎么样。

```
list_of_dfs = os.listdir(dir_with_data)
df = concat(list_of_dfs)
df.set_index('Date')
df = df.unstack() 
```

# php - HTML 下拉菜单，强制 URL 在 iframe 之外打开

> ID：14655178
> 
> 赞同：0
> 
> 时间：2013-02-01T21:17:16.627
> 
> 标签：php, html, drop-down-menu, menu, navigation

```
<html>
<head>
<script>
 function goToPage(url)
 {
 if (url != "")
 {
 .open(url);
 }
 }
</script>
</head>
<center>
<h2>This feature is coming soon</h2>
<form name="jump">
<p align="center">
<select name="menu">
<option value="URL">*New Offers*</option>
<option value="URL">100% Free Surveys</option>
<option value="URL">*CPM*</option>
<option value="URL">*CPC*</option>
<option value="URL">UK Offers</option>
<option value="URL">AU Offers</option>
<option value="URL">CA Offers</option>
<option value="URL">International Offers</option>
<option value="URL">GPT/PTS/PTC</option>
<option value="URL">1st Page/Email Submits</option>
<option value="URL">1ClickFamily</option>
<option value="URL">Registration Offers</option>
<option value="URL">Downloads</option>
<option value="URL">Purchases/Trials</option>
<option value="URL">Daily Surveys</option>
<option value="URL">Absolute Rewards</option>
<option value="URL">Weekly Surveys</option>
<option value="URL">Survey Panels</option>
<option value="URL">Mobile/Pin Submits</option>
<option value="URL">WinningSurveys</option>
<option value="URL">Monthly Surveys</option>
<option value="URL">Insurance Quotes</option>
<option value="URL">ZZZQuiz</option>
<option value="URL">*Content Unlocker</option>

</select>
<input type="button" onClick="location=document.jump.menu.options[document.jump.menu.selectedIndex].value;" value="GO">
</p>
</form>
</center>
</html> 
```

您好，我创建了一个下拉菜单，它将位于我网站每个页面的 iframe 中。如何使链接在主窗口而不是 iframe 中打开？例如，在一个普通的文本链接中，你会使用 target='_parent'... 我可以在这个脚本中使用什么类似的函数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:42:04.117

只是为了扩展之前的答案......

我有一个具有多个 iframe 的应用程序，这些 iframe 需要对另一个 iframe 中发生的操作做出反应，包括单击一个 iframe 导致另一个 iframe 加载不同的页面，就像您需要的那样。

就我而言，我有一个包含 2 个 iframe 的父文档。在一个 iframe 中，我将 onclick 设置为调用父页面上的函数，然后父页面上的该函数将更改目标 iframe 的内容。

如果您只处理一个页面和一个 iframe，那么您只需将 GoToURL 函数移动到主页面（父页面），然后从 iframe 调用该函数（parent.GoToURL(whatever);）。这样，您就可以根据该 iframe 中的操作导航到其他页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:21:30.983

你不能。如果可以，它将违反 iFrame 规范。由于 IFrame 可以是跨域的，因此在这种情况下允许 IFrame 控制其他窗口（主窗口）很简单 - 跨站点...如果有人发现你是 hack。我想知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:23:20.353

你会使用 Javascript

```
function goToPage(url) {
    document.location=url;
} 
```

祝你好运！

让我解释。您在“父”页面中创建此函数并从 iFrame 调用它。这有意义吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:34:48.783

```
<script>
 function openInParent(url)
 {
  window.parent.parent.window.location = url;
 }
</script>

<input type="button" onClick="openInParent(document.jump.menu.options[document.jump.menu.selectedIndex].value);" value="GO"> 
```

# c - 如何在 C 代码中获取传递给 Autotools 配置脚本的 --prefix 值？

> ID：14655180
> 
> 赞同：3
> 
> 时间：2013-02-01T21:17:24.580
> 
> 标签：c, linux, autotools, anjuta

我想知道如何在我的 c 源代码中获取传递给配置脚本（autotools）的 --prefix 和 --exec-prefix 值？

例如，如果我使用 autotools 在 linux 中构建一个包，我会这样做：

```
./configure --prefix=/usr/local/apps --exec-prefix=/usr/local/apps &&
make &&
make install 
```

并且应用程序使用的所有文件都根据该值安装。

因此，例如，在我的打开文件的应用程序中，我需要知道该值才能知道图像的安装位置然后打开它。

我可以对该值进行硬编码，但我不想这样做，因为我只能在那里安装应用程序。

我怎么知道这些值？

我正在使用安朱塔。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:25:51.493

通常的做法是为预处理器定义一个值，或者在`config.h`via`AC_DEFINE`中，或者作为一个标志 in `AM_CPPFLAGS`。例如，在 Makefile.am 中：

```
AM_CPPFLAGS = -DPREFIX="\"$(prefix)\"" 
```

这允许代码包含类似的内容，`printf( "prefix = %s\n", PREFIX )` 请记住源代码中的字符串值不会反映 的任何值`DESTDIR`，因此如果用户进行分阶段安装，则可能无法正常工作。

# java - 来自 java 类或方法的 Java 网页

> ID：14655183
> 
> 赞同：0
> 
> 时间：2013-02-01T21:17:28.133
> 
> 标签：java, javascript

假设我有一个 java 类，该类中有一个返回整数的方法。现在我想要一个网页（例如 HTML 页面）来访问这个类，然后方法并显示结果。

我该怎么做呢？我要学什么？首先这叫什么？小服务程序？小程序？什么？

对不起。我知道基本的java ..但是对这件事很陌生...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:21:49.667

Web 表示 HTTP；HTTP 表示 servlet。您需要一个 servlet 和一个像 Tomcat 这样的 servlet/JSP 引擎。

您需要一个 Web 存档 (WAR) 来打包您的应用程序并将其部署到 servlet/JSP 引擎。

您的 .class 将与 servlet .class 文件一起进入 WAR 的 WEB-INF/classes 文件夹。一定要把所有东西都放在一个包里。

您的 WAR 中需要一个 web.xml。

看看[这个](http://tomcat.apache.org/tomcat-7.0-doc/appdev/index.html)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:43:27.510

好的，就这样开始

*   什么是 HTML？
*   什么是 HTTP？
*   什么是网络服务器？
*   浏览器如何与网络服务器通信 [比如说 google.com]？
*   什么是 Tomcat 以及如何在我的机器上安装 apache tomcat？
*   什么是 Servlet，我如何创建一个？[下载所需的 jars，如 servlet.jar]
*   什么是罐子，战争？
*   如何制造战争。
*   什么是日食？
*   如何在 Eclipse 中创建 web 项目？
*   使用互联网教程创建一个 Web 项目[搜索“simple servet example java”]
*   什么是 web.xml？
*   什么是构建脚本？
*   如何将 java servlet 代码部署到 tomcat 服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:23:16.897

听起来您正在寻找 Java 平台企业版。

来自甲骨文

> Java Platform, Enterprise Edition (Java EE) 6 是企业 Java 计算的行业标准。利用新的轻量级 Java EE 6 Web Profile 创建下一代 Web 应用程序，以及 Java EE 6 平台的全部功能用于企业应用程序。开发人员将受益于更多注释、更多 POJO、简化打包和更少 XML 配置的生产力改进。

[http://www.oracle.com/technetwork/java/javaee/overview/index.html](http://www.oracle.com/technetwork/java/javaee/overview/index.html)

# java - 使用 localhost 时的网站隐式身份验证 (SSO)

> ID：14655186
> 
> 赞同：2
> 
> 时间：2013-02-01T21:17:49.747
> 
> 标签：java, ssh, single-sign-on, authorized-keys

这可能是一个模糊的问题（抱歉），但我希望能够在没有用户名/密码的情况下验证我的 Web 应用程序。理想情况下，它类似于使用私钥和公钥组合的 SSH“无密码登录”。

为了澄清这是我的用例

1.  我有一个标准的 Java EE webapp，它在 Tomcat 上运行“表单”登录。身份验证遵循操作系统。因此，如果 webapp 中的 user1 通过 ssh-ed 进入主机，则他们与 user1 的用户相同。
2.  我有一个类似于 SSH 的命令行界面（即“cli user@host”，然后要求输入密码）
3.  如果我可以显示用户是受信任的，我希望 CLI 自动登录。

我该怎么做呢？

我的一个想法是使用 ssh-keygen 方法（即无密码 ssh）。我不确定确切的细节，但我猜它会像这样工作。

*   在 CLI 登录中，我将使用本地私钥（即 ~/.ssh/id_dsa）来加密一些已知字符串。
*   用登录名发布
*   服务器通过它的每个“authorized_keys”（可能不是 ~/.ssh/ 中的那个，而是我的应用程序中的一个）并尝试解密字符串。如果它等于预期的字符串，那么 SUCCESS

注释？

# jquery - JQuery：没有选择器被忽略？

> ID：14655203
> 
> 赞同：0
> 
> 时间：2013-02-01T21:19:17.603
> 
> 标签：jquery

不知道我是否错误地使用了非选择器，但我希望点击的所有内容都可以做除了非选择器中的 id 之外的事情。

这些都不起作用，单击徽标时我会收到警报：

```
$('body').not('#logo').click(function(){ 
alert('hi');
});

$('body:not(#logo)').click(function(){ 
alert('hi');
}); 
```

和html：

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Untitled Document</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type='text/javascript'>
    $(document).ready(function(){

    $('body').not('#logo').click(function(){ 
    alert('hi');
    });

    });
    </script>
    </head>

    <body>
    <div style='width:900px; margin:0 auto; background-color:red; height:600px;'>
    <div id='logo' style='background-color:black; width:200px; height:200px;'>
    </div>
    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:30:13.977

@Alexander 对您的代码在做什么的描述是正确的。您正在匹配`<body>`没有`id`of 的元素`logo`。由于您只有一个 body 标签并且它没有 logo 的 id，因此您的选择器会选择您的 body 标签。

做你想做的事情的一种方法是将处理程序附加到正文，然后防止徽标上的事件冒泡。看起来像这样：

```
$('body').click(function(){ 
  alert('hi');
});

$("#logo").click(function(e){
    e.stopPropagation();
}); 
```

[http://jsfiddle.net/jJyaA/1/](http://jsfiddle.net/jJyaA/1/)

# smartgwt - UncaughtExceptionHandler 是 SmartGWT 定制的吗？

> ID：14655205
> 
> 赞同：0
> 
> 时间：2013-02-01T21:19:25.590
> 
> 标签：smartgwt

我看到 JavaScript 异常没有被抛出到示例 SmartGWT 应用程序的浏览器。但是普通的 GWT 应用程序也会抛出同样的问题。

我所做的只是创建了一个 GWT 测试应用程序并制作了一个引发空指针异常的场景。Firefox/Chrome/IE 在浏览器控制台中抛出异常。

例如，

```
Label testLabel = null;
testLabel.setText("Welcome") 
```

使用同一个应用程序，我创建了 SmartGWT 小部件并创建了一个引发空指针异常的场景，但该异常并未引发到浏览器控制台。

例如，

```
com.smartgwt.client.widgets.Window testWindow = null;
testWindow.setTitle("Welcome...."); 
```

我的假设是任何未捕获的异常都应该交给浏览器。想知道是否有人知道有关它的更多详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:36:26.643

如果您使用的是 2.4 以下的版本。它在 2.4 中已修复

是的 .. 这种 woohaa 行为存在但已修复。

```
This has been resolved for a while now on mainline. Please try the latest nighty build from http://smartclient.com/builds

The fix will be in the soon to be released Smart GWT 2.4. 
```

参考

[http://code.google.com/p/smartgwt/issues/detail?id=533](http://code.google.com/p/smartgwt/issues/detail?id=533)

# css - Twitter Bootstrap - 最小宽度：980px 响应式

> ID：14655207
> 
> 赞同：1
> 
> 时间：2013-02-01T21:19:27.547
> 
> 标签：css, twitter-bootstrap, responsive-design

实际上，我还没有在 Twitter bootsrap 中找到 980px - 1199px 的任何响应选项。我在哪里可以得到它，或者我可以在哪里设置它的属性？

我只能看到最小宽度：1200px 和最小宽度：768 - 979 的属性，但它们之间的属性在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:32:42.340

假设我正确理解了您的问题，您正在寻找 1200 像素到 980 像素之间的媒体查询？

默认情况下应该有一个，但如果没有，您可以使用以下代码自己轻松创建一个：

```
@media (min-width: 980px) and (max-width: 1199px) {
     /* content goes here */
} 
```

# c# - 用于日期操作的 DSL

> ID：14655211
> 
> 赞同：3
> 
> 时间：2013-02-01T21:19:40.070
> 
> 标签：c#, .net, dsl

我有一个现有的 asp.net (c#) 应用程序。我需要为用户提供一种创建灵活规则的方法，以计算给定雇用日期和注册日期的生效日期。

可能使用的一些规则示例：

1.  雇用日期或入学日期中的较晚者
2.  雇用日期 + 90 天
3.  注册日期后的第一个月的第一天
4.  如果注册日期在当月 15 日之前，则生效日期为下个月 1 日。如果是 15 日或之后，则为之后的一个月 1 日。

我从一些偏移字段（日偏移、月偏移等）开始，但是当我遇到新的需求时，我开始意识到当前的方法不够灵活。

我想做的是允许最终用户定义一个函数，该函数返回给定两个参数（hiredate、enrollmentdate）的日期，并将该函数存储在数据库中。当我需要计算有效日期时，我会将此函数从数据库中拉出，执行它并传入参数以获取我的有效日期。

我需要（我认为）是允许创建此功能的领域特定语言（DSL）。它的语法必须允许轻松操作日期。

我正在寻找符合我要求的 DSL 建议。如果我的 DSL 策略不正确，请推荐另一条路径。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:11:22.390

我还没有见过这样的 DSL（而且我花了很多时间研究相关主题）。

允许用户指定日期/时间表达式是一个*非常*困难的问题。我自己的[自然语言引擎](http://nlp.abodit.com)可能是一个合适的起点或获得一些想法的好地方。

在那个引擎中，我有一个`TemporalExpression`. NLP 引擎可以解析像*“去年五月下午 5 点之后的星期五”*这样复杂的字符串，并为此创建一个准确的表达式树。如果你`Abodit`从 Nuget 中提取各种包，你可以探索围绕这个想法的类和方法。还有一些计量单位类，包括可能有帮助的时间间隔（`TimeSpan`例如，无法处理“1 个月零 2 天”）。

您可以扩展引擎以解析您自己的令牌（无论是简单的，如“雇用日期”，还是复杂的，如通过名称识别给定假期以创建新的`TemporalExpression`）。

您可能还想查看 DAML 和[OWL-Time](http://www.isi.edu/~hobbs/time/owl-time-july04.txt) ，以了解有关在语义 Web 中表示时间表达式的想法。

*免责声明：这是我写的，这是一个指向我网站的链接，它仍在进行中，即将推出一个带有“生产规则”和性能大幅提升的新版本，很高兴离线讨论，等等等等……*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:32:13.963

我目前正在使用逃逸表达式解析器来实现我的解决[方案](http://flee.codeplex.com/)。这允许我使用 .NET DateTime 结构提供给我的大部分方法和属性。通过重新发布我的问题，我被指出了这个方向，如下所示：

[https://stackoverflow.com/a/14730487/21155](https://stackoverflow.com/a/14730487/21155)

# c# - 如何修复 C# 中的不可访问性错误？

> ID：14655217
> 
> 赞同：0
> 
> 时间：2013-02-01T21:19:52.050
> 
> 标签：c#

当我运行我的 C# 应用程序时，它显示以下错误

> *可访问性不一致：参数类型“timesheet.libs.DbObject”比方法“timesheet.model.usertimesheet.usertimesheet(timesheet.libs.DbObject)”更难访问 C:\Users\user\Desktop\Interface+code\Interface+code\时间表\模型\usertimesheet.cs*
> 
> *可访问性不一致：参数类型“timesheet.libs.DbObject”比方法“timesheet.MainFormMDI.setdbobject(timesheet.libs.DbObject)”更难访问 C:\Users\user\Desktop\Interface+code\Interface+code\timesheet\ MainFormMDI.cs*
> 
> *可访问性不一致：参数类型“timesheet.libs.DbObject”比方法“timesheet.model.user.user(timesheet.libs.DbObject)”更难访问 C:\Users\user\Desktop\Interface+code\Interface+code\时间表\模型\user.cs*
> 
> *可访问性不一致：参数类型“timesheet.libs.DbObject”的可访问性低于方法“timesheet.model.project.project(timesheet.libs.DbObject)”C:\Users\user\Desktop\Interface+code\Interface+code\时间表\模型\project.cs*

我有一段 login.cs 作为

```
MainFormMDI mainform = new MainFormMDI();
mainform.setdbobject(dbobject);
mainform.setuserobject(userobj);
mainform.Show(); 
```

`MainFormMDI.cs`：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using timesheet.model;
using timesheet.libs;

namespace timesheet
{
    public partial class MainFormMDI : Form
    {
        private DbObject dbobject;
        private  user userobj;

        public MainFormMDI( )
        {
            InitializeComponent();
        }

        public void setdbobject(DbObject dbobject) 
        {
            this.dbobject = dbobject;
        }

        public void setuserobject(user userobj) 
        {
            this.userobj = userobj;
        }

        private void MainFormMDI_Load(object sender, EventArgs e)
        {
        }

        private void adminPanelToolStripMenuItem_Click(object sender, EventArgs e)
        {
        }
    }
} 
```

我尝试了其他解决方案，例如将 dbobject 和 user 类更改为 public，但没有任何改变。我想将 userobject 和 dbobject 传递给 MainFormMDI 类，以便能够对这些对象执行进一步的操作。我会很高兴听到你的修复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:24:11.633

您需要公开 timesheet.libs.DbObject。然后，您需要重新编译库（假设 libs 表明它在库中），然后重建使用它的项目。

问题是 DbObject 要么是私有的，要么是内部的，它被作为参数传递给公共方法。如果方法是公共的，那么它的所有参数类型也必须是公共的。

# eclipse - 使用 JNI 依赖项、应用程序和 Eclipse 插件构建 Gradle

> ID：14655220
> 
> 赞同：2
> 
> 时间：2013-02-01T21:20:20.807
> 
> 标签：eclipse, java-native-interface, native, gradle, lwjgl

我正在尝试获取与 Gradle 一起使用的示例 LWJGL 应用程序。LWJGL 在 jar lwjgl-platform-2.8.5-natives-windows.jar 等中具有 OpenGL 和 OpenAL 的本机绑定，但是，Gradle 似乎没有认识到这一事实。

应用程序插件的 distZip 任务将所有 jar 文件正确复制到 zip 中的 lib 目录中，但是，在 .bat 文件中，它仅将上述本地 jar 放在类路径中，它不会将其作为显式本地传递给 java。

同样，Eclipse 项目生成也无法设置给定依赖项的“本机库位置”。

是否有任何官方解决方案可以将本机库正确添加到生成的应用程序或 Eclipse 项目中，如果没有，是否有任何针对此限制的不错的破解？

我的 gradle.build：

```
apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'eclipse'

sourceCompatibility = 1.7

mainClassName = 'org.lwjgl.examples.Game'

repositories {
    mavenCentral();
}

dependencies {
    compile group: 'com.google.guava', name: 'guava', version: 'latest.release'
    compile group: 'org.apache.commons', name: 'commons-lang3', version: 'latest.release'
    compile group: 'org.lwjgl.lwjgl', name: 'lwjgl', version: 'latest.release'

    testCompile group: 'com.jayway.awaitility', name: 'awaitility', version: 'latest.release'
    testCompile group: 'junit', name: 'junit', version: 'latest.release'
    testCompile group: 'org.hamcrest', name: 'hamcrest-all', version: 'latest.release'
    testCompile group: 'org.mockito', name: 'mockito-core', version: 'latest.release'
}

jar {
    baseName = rootProject.name
    version = System.env['BUILD_NUMBER']
    version = version == null ? 0 : version
    manifest {
        attributes("Implementation-Title": baseName, "Implementation-Version": version)
    }
} 
```

生成的 zip 分发的内容：

```
/lib//bin/tyle
/lib//bin/tyle.bat
/lib/commons-lang3-3.1.jar
/lib/guava-14.0-rc2.jar
/lib/jinput-2.0.5.jar
/lib/jinput-platform-2.0.5-natives-linux.jar
/lib/jinput-platform-2.0.5-natives-osx.jar
/lib/jinput-platform-2.0.5-natives-windows.jar
/lib/jutils-1.0.0.jar
/lib/lwjgl-2.8.5.jar
/lib/lwjgl-platform-2.8.5-natives-linux.jar
/lib/lwjgl-platform-2.8.5-natives-osx.jar
/lib/lwjgl-platform-2.8.5-natives-windows.jar
/lib/tyle-0.jar 
```

lwjgl-platform-2.8.5-natives-windows.jar 的内容：

```
META-INF/MANIFEST.MF
lwjgl.dll
lwjgl64.dll
OpenAL32.dll
OpenAL64.dll 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-19T17:07:43.023

我一直在解决类似的问题，并启动了一个[Gradle Natives Plugin](https://github.com/cjstehno/gradle-natives)来管理 Java 库的本机依赖项。另请参阅博客文章“ [Going Native with Gradle](https://github.com/cjstehno/coffeaelectronica/wiki/Going-Native-with-Gradle) ”，我将在其中详细介绍。

基本上，它将提供的本机库解压缩到“本机”构建目录中以供使用和进一步打包。

# angularjs - 带有过滤器和 $http 服务的 Angularjs 计时

> ID：14655223
> 
> 赞同：5
> 
> 时间：2013-02-01T21:20:50.560
> 
> 标签：angularjs

当我的应用程序加载时，我注册了一个过滤器和一个带有角度的服务。但是过滤器试图在服务返回数据之前执行，所以我的项目集合在过滤器中咆哮。我有一个小提琴，但我不知道你是否可以在小提琴中使用 $http，因为它是一个外部资源。这是我的[小提琴](http://jsfiddle.net/Vbahole22/GU7tL/) 抱歉，它实际上不起作用。它经历了很多。我认为我的问题是时机。我需要过滤器来等待 http 响应，或者只是不“强制”本身。

我现在得到的错误是“项目未定义”，因为这是应用过滤器的地方。在我尝试将 http 调用混入服务之前，我确实有这个工作。但我觉得这是有角度的方式，我“只是想遵守”。

当我的控制器触发时，它会调用获取数据：

```
eventApi.async().then(function () {
    $scope.eventCollection = eventApi.data();
}); 
```

但在它回来之前，过滤器应用在 html 中：

```
 <tr ng:repeat="event in events  | myEventFilter:ddlFilter |
       orderBy:sort.column:sort.descending"> 
```

[小提琴](http://jsfiddle.net/Vbahole22/GU7tL/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:46:50.190

这是您更新的小提琴的一个分支，它修复了几个缺失的依赖项（`eventApi`未注入控制器，`$timeout`未注入`eventApi`服务）。我的评论将基于此代码：http: [//jsfiddle.net/BinaryMuse/zww7e/1/](http://jsfiddle.net/BinaryMuse/zww7e/1/)

这个小提琴成功地让我们解决了您发布的问题：“无法读取未定义的属性'长度'”在您的过滤器中。一般来说，过滤器应该能够默认处理空值/未定义值。我只需修改过滤器以读取如下内容：

```
return function (items, eventFilterType) {
  var arrayToReturn = [];
  if (items === undefined) return arrayToReturn;
  // ...
} 
```

那应该解决您的根本问题；小提琴现在运行没有错误，尽管它似乎不能正常工作；据我所知，这是因为您正在设置`$scope.eventCollection`而不是`$scope.events`在`if (live)`控制器的部分中。进行此更改会导致数据实际显示在视图中。

但是，您可能对 Angular 的另一个属性感兴趣：当您使用用 构建的 Promise 时`$q`，您可以将视图直接绑定到该 Promise，并且该视图会将*其*视为您将其绑定到该Promise 的已*解析值*。因此，例如，您可以执行以下操作：

```
// in the service
$timeout(function () {
  deffered.resolve(fakeEvents); // <-- resolve with the data
}, 2000);
return deffered.promise;

// in the controller
if (live) {
  $scope.events = eventApi.async();
} 
```

这是演示此技术的小提琴的更新版本：http: [//jsfiddle.net/BinaryMuse/zww7e/2/](http://jsfiddle.net/BinaryMuse/zww7e/2/)

**[更新]**

正如 Jeff 在评论中指出的那样，Angular 正在弃用自动承诺展开；你可以[在这里看到提交](https://github.com/angular/angular.js/commit/5dc35b527b3c99f6544b8cb52e93c6510d3ac577)，但这里是消息：

> **fix($parse): 弃用 promise unwrapping 并使其成为可选**
> 
> 此提交禁用承诺展开并添加 $parseProvider.unwrapPromises() getter/setter api，允许开发人员在需要时重新打开该功能。Promise unwrapping 支持将在未来从 Angular 中移除，并且此设置仅允许在过渡期间启用它。
> 
> 如果启用了展开，Angular 将记录一个关于展开承诺的每个表达式的警告（为了减少噪音，每个表达式只记录一次）。要禁用此日志记录，请使用 `$parseProvider.logPromiseWarnings(false)`.
> 
> 以前在表达式求值期间在表达式中的任何位置找到的承诺在未解决时将评估为未定义，如果已实现则评估为履行值。
> 
> 这是一个没有被证明非常有用或流行的功能，主要是因为模板中的数据访问（作为原始值访问）和控制器代码（作为承诺访问）之间的二分法。
> 
> 在大多数代码中，我们最终在控制器中手动解析 Promise，或者通过路由自动解析并以这种方式统一模型访问。
> 
> 自动承诺解包的其他缺点：
> 
> *   在构建组件时，通常希望收到原始承诺
> *   增加了复杂性并减慢了表达式评估
> *   由于需要生成的代码量很大，使得表达式代码预生成没有吸引力
> *   使 IDE 自动完成和工具支持变得困难
> *   增加了太多的魔法
> 
> 重大变化： $parse 和模板一般将不再自动解包承诺。此功能已被弃用，如果绝对需要，可以在过渡期间通过 `$parseProvider.unwrapPromises(true)`api 重新启用它。

# html - 如何添加具有自定义背景和边框的html文本

> ID：14655242
> 
> 赞同：0
> 
> 时间：2013-02-01T21:22:07.877
> 
> 标签：html, css, wordpress

我有一个 wordpress 网站。我刚刚为其购买了一个默认不支持 custom.css 的主题。我不想弄乱默认文件，因为我不是技术人员。我以前通过简单地制作自定义块引用来完成此操作。

所以我想做的是在我的页面上的文本中添加一个带有边框的自定义背景：

*   我希望背景是纯黑色，透明度为 60%
*   我想要一个图像作为边框，只在左侧，重复。
*   在所有侧面保留一点填充，以使文本不会到达角落。
*   文本应为白色，任何字体和大小。

我一直在网上寻找并尝试了很长一段时间，但没有任何结果。**如何创建此自定义边框/背景？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:38:38.153

为什么不创建自定义 css 文件，然后将其导入默认文件？

@import url(你的自定义css的url)

编辑自埃里克邮报：

```
.example {
  /* Set Background Black 60% opacity */
  background-color:rgba(0,0,0,0.6);
  /*Text Color */
  color: "#FFF";
  /* Text-padding */
  padding: 5px;
  /*Border creation */
  border-left: 12px solid transparent;
  -moz-border-image:url("border-image") 12 repeat;
  -webkit-border-image:url("border-image") 12 repeat ;
  border-image:url("border-image") 12 repeat ; 
```

}

如果您只是想在包含其他元素的页面一侧设置边框，您应该查看位置或浮动 div。另请注意，如果 IE 对您来说是重要的浏览器，则这些设置将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:47:48.520

以下是如何设置自定义边框和背景样式的先机：

```
#example {
    border-width: 12px;
    -moz-border-image:url("border-image") 12 repeat;
    -webkit-border-image:url("border-image") 12 repeat ;
    border-image:url("border-image") 12 repeat ;
} 
```

示例：http: [//jsfiddle.net/HBzQm/](http://jsfiddle.net/HBzQm/)

# html - 有没有办法让 div 元素的宽度与 html 中其子元素的最大宽度相同？

> ID：14655243
> 
> 赞同：3
> 
> 时间：2013-02-01T21:22:14.287
> 
> 标签：html, css

我的代码如下：

```
<div id="latest-text">
    <p id="text-wrapper">
      <span style="display: inline-block;" id="title">ABFDFDFJEKJRKEREJRKE</span>
      <span style="display: inline-block;" id="subtitle">GJKJGKEJKEJFKAJKEJRE</span>
    </p>
</div> 
```

我想让元素的宽度为or`#text-wrapper`的较大宽度，但似乎它的宽度总是与元素相同。有什么方法可以实现我的目标吗？`#title``#subtitle element``#latest-text`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:37:48.633

是的，你可以这么做。将其中一个 span 设置为 block，并将父 p 标签设置为 inline-block。让第二个跨度内联。

```
<div id="latest-text">
  <p id="text-wrapper">
    <span id="title">ABFDFDFJEKJRKEREJRKE long, very long, very long</span>
    <span id="subtitle">GJKJGKEJKEJFKAJKEJRE</span>
  </p>
</div> 
```

CSS：

```
#text-wrapper {
  display: inline-block;
}

span#title {
  display: block;
} 
```

见 Dabblet：[http ://dabblet.com/gist/4694336](http://dabblet.com/gist/4694336)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:27:49.563

您可以使用 JavaScript 设置“text-wrapper”的宽度。首先对“title”和“subtitle”的宽度进行测试，找出哪个更大，然后将较大的宽度分配给“text-wrapper”

您可以使用 JavaScript 动态获取宽度。更改示例中标题和副标题的文本，并观察文本包装器变大或变小。

```
<html>
<head>
<title>Test</title>
<script language="javascript">

function setwidth()
{
    var wrapper=document.getElementById('text-wrapper').clientWidth;
    var title=document.getElementById('title').clientWidth;
    var subtitle=document.getElementById('subtitle').clientWidth;

    if (title>subtitle)
        document.getElementById('text-wrapper').style.width=title;
    else
        document.getElementById('text-wrapper').style.width=subtitle;
}

</script>
</head>
<body onload="setwidth()">

<div id="latest-text">
<p style="border:1px solid red;" id="text-wrapper">
This is the text-wrapper text 
<p>
  <span style="display: inline-block; border: 1px solid yellow;float:none;" id="title">ABFDFDFJEK</span>
  <p>
  <span style="display: inline-block; border: 1px solid blue;" id="subtitle">GEGJKJGKEJKEJFKAJKEJRE</span>
</p>
</div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:28:38.040

这里回答了一个非常相似的问题，用户试图通过其中的跨度设置 div 的宽度。看看这是否对您有帮助。

[如何设置 DIV 的宽度以跨越其中的文本（所以不固定）](https://stackoverflow.com/questions/11013520/how-to-set-width-of-div-to-span-with-text-inside-it-so-not-fixed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T22:00:41.187

如果将`block`元素放在元素内，`inline-block`则内联块将扩展以适应其中最宽的块。

```
<h1>Original Structure</h1>
<div id="latest-text1">
    <p id="text-wrapper1">
      <span style="display: inline-block;" id="title1">ABFDFDFJEKJRKEREJRKE</span>
      <span style="display: inline-block;" id="subtitle1">GJKJGKEJKEJFKAJKEJRE</span>
    </p>
</div>

<h1>Same, but using <code>block</code></h1>
<div id="latest-text2">
    <p id="text-wrapper2">
      <span style="display: block;" id="title2">ABFDF DFJEKJ RKER EJRKE</span>
      <span style="display: block;" id="subtitle2">GJKJ GKEJKEJF KAJKEJRE</span>
    </p>
</div>

<h1>Restructured as HTML5</h1>
<p>This also gets rid of inline styles, which are a leading cause of nightmares.</p>
<section id="latest-text3">
    <header>
        <hgroup>
            <h1>ABFDF DFJEKJ RKER EJRKE</h1>
            <h2>GJKJ GKEJKEJF KAJKEJRE</h2>
        </hgroup>
    </header>
    <article>
        <p> ... the ... first ... paragraph ... </p>
        <p> ... the ... second ... paragraph ... </p>
    </article>
</section> 
```

不是绝对必要的`<hgroup>`，但它确实具有最大的语义意义。

和 CSS

```
#latest-text1, #latest-text2, section#latest-text3 {
    margin: 1em;
    padding: 1em;
    border: 1px solid black;
}
#latest-text1 {
    background-color: #f0f0ff;
}
#latest-text2 {
    background-color: #f0fff0;
}
section#latest-text3 {
    background-color: #fff0f0;
}
#latest-text3  {
    display: inline-block; /* THE IMPORTANT ONE */
} 
```

大多数 CSS 只是为了帮助可视化整个事情，在[http://jsfiddle.net/J3NzC/](http://jsfiddle.net/J3NzC/)

通过使用适当的类，可以将 HTML5 重做为 HTML4 `<div>`，例如使用`<div class="section">`和`<div class="hgroup">`

# quickbooks - 计费解决方案：发票“稍后通过 QuickBooks 邮寄”复选框：默认为选中

> ID：14655247
> 
> 赞同：0
> 
> 时间：2013-02-01T21:22:32.843
> 
> 标签：quickbooks, intuit-partner-platform, invoices

如何将“稍后通过 QuickBooks 发送邮件”复选框设置为默认选中？我还没有弄清楚这一点，所以我不得不转到“发送/发货”选项卡并手动检查每张发票。请告诉我有更好的方法。默认情况下，我希望它始终检查每张新发票。

编辑：我还希望能够通过 QBXML 以编程方式选中该框，但根据我在 Intuit 开发人员网络论坛上的问题，这是不可能的。 [https://idnforums.intuit.com/messageview.aspx?catid=56&threadid=19064&enterthread=y](https://idnforums.intuit.com/messageview.aspx?catid=56&threadid=19064&enterthread=y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:15:10.947

该字段不通过 SDK 或 IDS 公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T15:56:07.480

如果发票是重复的，您可以将其保存在记忆交易中。创建新发票时，如果在记忆交易中选择它，它将自动选择它。

# c# - 在私有字段中使用 Bcl ImmutableDictionary

> ID：14655248
> 
> 赞同：6
> 
> 时间：2013-02-01T21:22:36.350
> 
> 标签：c#, multithreading, thread-safety, immutability, base-class-library

假设我有一个将从多个线程调用的类，并且将在该类的私有字段中的[ImmutableDictionary中存储一些数据](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)

```
public class Something {
    private ImmutableDictionary<string,string> _dict;
    public Something() {
       _dict = ImmutableDictionary<string,string>.Empty;
    }

    public void Add(string key, string value) {

       if(!_dict.ContainsKey(key)) {
          _dict = _dict.Add(key,value);
       }
    }
} 
```

是否可以通过多个线程以这样的方式调用它，以至于您会收到关于字典中已经存在的键的错误？

Thread1 检查字典是否为假 Thread2 检查字典是否为假 Thread1 添加值并更新对 _dict 的引用 Thread2 添加值，但它已添加，因为它使用相同的引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:58:07.990

在使用不可变字典时，您绝对可以是线程安全的。数据结构本身是完全线程安全的，但是您在多线程环境中对其应用更改必须仔细编写以避免在您自己的代码中丢失数据。

这是我经常用于这种情况的一种模式。它不需要锁，因为我们所做的唯一突变是单个内存分配。如果必须设置多个字段，则需要使用锁。

```
using System.Threading;

public class Something {
    private ImmutableDictionary<string, string> dict = ImmutableDictionary<string, string>.Empty;

    public void Add(string key, string value) {
       // It is important that the contents of this loop have no side-effects
       // since they can be repeated when a race condition is detected.
       do {
          var original = _dict;
          if (local.ContainsKey(key)) {
             return;
          }

          var changed = original.Add(key,value);
          // The while loop condition will try assigning the changed dictionary
          // back to the field. If it hasn't changed by another thread in the
          // meantime, we assign the field and break out of the loop. But if another
          // thread won the race (by changing the field while we were in an 
          // iteration of this loop), we'll loop and try again.
       } while (Interlocked.CompareExchange(ref this.dict, changed, original) != original);
    }
} 
```

事实上，我经常使用这种模式，为此我定义了一个静态方法：

```
/// <summary>
/// Optimistically performs some value transformation based on some field and tries to apply it back to the field,
/// retrying as many times as necessary until no other thread is manipulating the same field.
/// </summary>
/// <typeparam name="T">The type of data.</typeparam>
/// <param name="hotLocation">The field that may be manipulated by multiple threads.</param>
/// <param name="applyChange">A function that receives the unchanged value and returns the changed value.</param>
public static bool ApplyChangeOptimistically<T>(ref T hotLocation, Func<T, T> applyChange) where T : class
{
    Requires.NotNull(applyChange, "applyChange");

    bool successful;
    do
    {
        Thread.MemoryBarrier();
        T oldValue = hotLocation;
        T newValue = applyChange(oldValue);
        if (Object.ReferenceEquals(oldValue, newValue))
        {
            // No change was actually required.
            return false;
        }

        T actualOldValue = Interlocked.CompareExchange<T>(ref hotLocation, newValue, oldValue);
        successful = Object.ReferenceEquals(oldValue, actualOldValue);
    }
    while (!successful);

    Thread.MemoryBarrier();
    return true;
} 
```

然后，您的 Add 方法会变得更加简单：

```
public class Something {
    private ImmutableDictionary<string, string> dict = ImmutableDictionary<string, string>.Empty;

    public void Add(string key, string value) {
       ApplyChangeOptimistically(
          ref this.dict,
          d => d.ContainsKey(key) ? d : d.Add(key, value));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-03T10:11:20.667

**是**的，与往常一样适用相同的比赛（两个线程都读取，什么也没找到，然后两个线程都写入）。**线程安全不是数据结构的属性，而是整个系统的属性。**

还有另一个问题：对不同键的并发写入只会**丢失 writes**。

你需要的是一个`ConcurrentDictionary`. 如果没有额外的锁或 CAS 循环，您无法使用不可变的方法来实现这一点。

**更新：**这些评论让我相信，`ImmutableDictionary`如果写入不频繁，使用 CAS 循环进行写入实际上是一个非常好的主意。读取性能将非常好，并且写入与同步数据结构一样便宜。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-01T15:00:35.560

现在 BCL 中有[一个类可](https://docs.microsoft.com/en-us/dotnet/api/system.collections.immutable.immutableinterlocked?view=netcore-2.1)用于执行相同的 CAS 循环。这些与 Andrew Arnott 回答中的扩展方法非常相似。

代码如下所示：

```
ImmutableInterlocked.AddOrUpdate(ref _dict, key, value, (k, v) => v); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:10:54.530

访问实例变量会使 Add() 方法不可重入。复制/重新分配给实例变量不会改变不可重入性（它仍然容易出现竞争条件）。在这种情况下，ConcurrentDictionary 将允许访问没有完全一致性，但也没有锁定。如果需要跨线程 100% 的一致性（不太可能），那么字典上的某种锁定是必要的。了解*可见性*和*范围*是两个不同的东西非常重要。实例变量是否是私有的与其作用域无关，因此也与其线程安全无关。

# linux - rsync 所有以特定数字开头的目录

> ID：14655250
> 
> 赞同：2
> 
> 时间：2013-02-01T21:22:42.217
> 
> 标签：linux, unix, rsync

我的目录加载了数千个子目录：

```
/home/tmp/
          1
          12
          123
          1234
          2345
          234
          3456
          345
          34 
```

每个子目录依次有数百个子目录，如果第一级子目录匹配，我想 rsync ......

我需要的是一种仅复制/rsync 以给定数字 [1-9] 开头的目录的方法...

我想我想要的基本上是可以让我使用通配符来匹配的东西

```
rsync -rzvvhP remotehost:/home/tmp/1* /home/tmp/ 
```

我希望 rsync 同步

```
/home/tmp/1/
/home/tmp/12/
/home/tmp/123/
/home/tmp/1234/ 
```

目录和他们拥有的任何子子目录，但不是任何以不同数字开头的第一级目录...

```
/home/tmp/234/
/home/tmp/2345/
........./3*/
........./4*/ etc.. 
```

**我试过的：**

```
rsync -rzvvhP --exclude='*' --include-from=1.txt remotehost:/home/tmp/ /home/tmp/ 
```

其中 1.txt 包含：

```
1
12
123
1234 
```

当我使用 2.txt 执行此操作时，尽管 rsync 似乎仍然遍历所有以 1 和 3 等开头的目录...

**我刚试过：**

```
rsync -rzvvhP --include-from=2.txt remoteaccount@remotehost:/home/tmp/ /home/tmp/
first I get....
[sender] showing directory 2758 because of pattern 2758 
```

......这看起来不错，但后来我得到......

```
1014/135954/T33-2.JPG is uptodate
1014/135956/456309.jpg is uptodate 
```

......这很糟糕

**根据我尝试的建议：**

```
rsync -rzvvhP --size-only --filter='+ /2*/ - /*' remoteuser@remotehost:/home/tmp/ /home/tmp/ 
```

当它运行时，我得到的第一件事是一堆“最新”的文件，这些文件不应该是这个 rsync 的一部分：

```
1001/149984/T3201-2.JPG is uptodate 
```

我怎样才能做到这一点，以便我可以使用一个命令来仅同步以任何给定数字开头的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:00:19.857

创建过滤器文件，如下所示：

/my/dir/include.txt

```
+ /1*/
+ /3*/

# Skip everything else
- /* 
```

现在将其添加到 rsync

```
rsync -rzvvhP \
    --filter='merge /my/dir/include.txt' \
    remotehost:/home/tmp/ /home/tmp/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:21:27.023

我很确定我错过了什么，因为你说

> 我想我想要的基本上是可以让我使用通配符来匹配的东西
> 
> ```
> rsync -rzvvhP remotehost:/home/tmp/1* /home/tmp/ 
> ```

但这只是简单的工作。

让我们看看远程主机上有什么。

```
$ ssh remotehost find /tmp/a -type f
/tmp/a/123/x/a
/tmp/a/123/x/c
/tmp/a/123/y/b
/tmp/a/12/x/a
/tmp/a/12/x/c
/tmp/a/12/y/b
/tmp/a/1/x/a
/tmp/a/1/x/c
/tmp/a/1/y/b
/tmp/a/23456/x/a
/tmp/a/23456/x/c
/tmp/a/23456/y/b
/tmp/a/234/x/a
/tmp/a/234/x/c
/tmp/a/234/y/b
/tmp/a/34567/x/a
/tmp/a/34567/x/c
/tmp/a/34567/y/b
/tmp/a/3456/x/a
/tmp/a/3456/x/c
/tmp/a/3456/y/b
/tmp/a/345/x/a
/tmp/a/345/x/c
/tmp/a/345/y/b
/tmp/a/34/x/a
/tmp/a/34/x/c
/tmp/a/34/y/b
/tmp/a/3/x/a
/tmp/a/3/x/c
/tmp/a/3/y/b 
```

现在 rsync 仅以 2 开头的目录。根据您的 shell，您可能需要引用通配符，就像我在这里所做的那样，或者不需要这样做。在 bash 下，这应该是不必要的。

```
$ rsync -rzvvhP 'remotehost:/tmp/a/2*' .
opening connection using: ssh remotehost rsync --server --sender -vvrze.iLsf . "/tmp/a/2*"
receiving incremental file list
delta-transmission enabled
234/
234/x/
234/x/a
       8 100%    7.81kB/s    0:00:00 (xfer#1, to-check=7/12)
234/x/c
       8 100%    7.81kB/s    0:00:00 (xfer#2, to-check=6/12)
234/y/
234/y/b
       8 100%    7.81kB/s    0:00:00 (xfer#3, to-check=5/12)
23456/
23456/x/
23456/x/a
       8 100%    7.81kB/s    0:00:00 (xfer#4, to-check=2/12)
23456/x/c
       8 100%    7.81kB/s    0:00:00 (xfer#5, to-check=1/12)
23456/y/
23456/y/b
       8 100%    7.81kB/s    0:00:00 (xfer#6, to-check=0/12)
total: matches=0  hash_hits=0  false_alarms=0 data=48

sent 149 bytes  received 533 bytes  454.67 bytes/sec
total size is 48  speedup is 0.07 
```

# html - IE兼容性，保证金问题

> ID：14655251
> 
> 赞同：0
> 
> 时间：2013-02-01T21:22:45.193
> 
> 标签：html, css, internet-explorer, google-chrome, margin

我大约一个月前开始在这家公司工作，我一直在努力清理他们的网站。这真是一团糟。我的老板使用 IE，但我使用的是 Chrome，只是有点跑和枪。jQuery 滑块下方的标题为：“World-Class Mechanical Engineers & Contractors - in Central PA”位于 .h1 的最左侧`<td>`，但另一个 h1 没有。我希望网站在 Chrome 中呈现与在 IE 中相同的效果，但它在 Chrome 中的外观是我想要的。在 Chrome 中，h1 向右拉 40px，以缩进。我在这里错过了什么？

[http://www.enginuity-llc.com/index.htm](http://www.enginuity-llc.com/index.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:36:33.150

您的标记无效。请注意下面代码片段的第二行如何有一个以 h1 作为子元素的 table 元素。

```
<tr>
    <td height="50" colspan="2" valign="bottom"><table width="100%" border="0" cellspacing="0" cellpadding="0">
        <h1 style="margin-left:40px">World-Class Mechanical Engineers & Contractors - in Central PA</h1>
        <p style="margin-left:50px; margin-right:75px">Enginuity, LLC is a local firm with decades of global experience in the HVAC and Plumbing sectors. Whether you're looking for a custom process design/build, a retrofit to existing HVAC equipment, service                  and maintenance, or sustainable energy solutions, Enginuity-LLC is your ultimate one-stop partner. What began in 2002 with four mechanical contracting veterans, has grown into an 85-strong firm that still delivers the best design, service, and                         support in the business.</p>
        <p style="margin-left:50px; margin-right:75px">Enginuity-LLC is more than just your local Energy Star Partner & MSCA Green-Star Recipient; we're your solutions provider for the life of your building. We've worked with large enterprises and small businesses, but regardless of what you need, you'll find a level of professionalism and experience unmatched in the HVAC, Plumbing, and Mechanical Contractor market.</p>
        <h1 style="margin-left:40px">We Specialize in:</h1>
            <table style="margin-left:80px">
                <tr>
                    <td width="180px">
                        <ul>
                        <li>HVAC</li>
                        <li>Plumbing</li>
                        <li>Medical Gas Piping</li>
                        <li>Pneumatic</li>
                        <li>Hydraulics</li>
                        <li>Steam</li>
                        <li>Compressed Air</li>
                        <li>Process Piping</li>
                        <li>Refrigeration</li>
                        <li>Utility Piping</li>
                        <li>Ventilation</li>
                        </ul>               
                    </td>
                    <td width="220px">
                        <ul>
                        <li>Centrifugal Chillers</li>
                        <li>Special Environments</li>
                        <li>Specialty Fabrication</li>
                        <li>Backflow Preventers</li>
                        <li>Fire Damper Inspection</li>
                        <li>Sheet Metal / Ductwork</li>
                        <li>New Construction</li>
                        <li>Tenant Fitouts</li>
                        <li>Restoration</li>
                        <li>Turn-Key Design / Build</li>
                        <li>Preventative Maintenance</li>
                        </ul>               
                    </td>
                    <td width="220px">
                        <ul>
                        <li>Energy Retrofits</li>
                        <li>Energy Optimization</li>
                        <li>Computer Rooms</li>
                        <li>Climate Control</li>
                        <li>Radiant Floor Systems</li>
                        <li>Geothermal Systems</li>
                        <li>Energy Audits / Benchmarking</li>
                        <li>Fire Damper Inspection</li>
                        <li>Liebert Certified Data-Aire</li>
                        <li>Electrical Controls</li>
                        <li>DDC</li>
                        </ul>               
                    </td>
                </tr>
            </table>
            <br>
        </td>
    </tr>

<td align="left" width="800px"> 
```

此外，如果您在 IE (F12) 中打开开发人员工具，您会注意到它在该区域中出现异常（对我来说，它显示了一个 <> 孩子，这是不可能的）

![在此处输入图像描述](../Images/e8d2932ec0a4b58b68934bc1f0c32895.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:26:59.470

您可以使用 CSS 重置，然后设置自己的边距。

> 重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

# wcf - 在 Silverlight 中对多个服务进行身份验证

> ID：14655253
> 
> 赞同：0
> 
> 时间：2013-02-01T21:22:46.717
> 
> 标签：wcf, silverlight-5.0, restsharp

我有以下情况：

1.  与 Silverlight 应用程序位于同一站点的 WCF 服务（称为“数据服务”）
2.  WCF 服务和 Silverlight 主机页面所在的网站受到表单身份验证的保护
3.  WCF 服务位于允许匿名访问的文件夹中
4.  Silverlight 托管页面位于不允许匿名访问的文件夹中
5.  当用户通过表单身份验证登录时，Silverlight 应用程序变得可访问，并且当调用 WCF/数据服务时，WCF 服务可以正确看到表单身份验证用户。

总的来说，这个设置效果很好。但是，我们正在调用需要基本身份验证的第三方 REST 服务，并且我们正在使用 RestSharp 来调用该服务。该代码的一个示例是：

```
Dim url As String = ServicePrefix & ServiceBaseAddress
Dim client As New RestSharp.RestClient(url)
client.Authenticator = New HttpBasicAuthenticator(AccountSID, AuthToken)
Dim request As New RestSharp.RestRequest("Accounts/" & AccountSID & "/SMS/Messages.xml", RestSharp.Method.POST)
request.AddParameter("From", fromPhone)
request.AddParameter("To", toPhone)
request.AddParameter("Body", message)

syncContext = SynchronizationContext.Current
Dim ia = client.ExecuteAsync(request, AddressOf HandleSMSResponse) 
```

在第三方服务调用成功返回，并且我们的消息被发送后，Silverlight 不再在 HttpContext 中发送正确的用户，因此 WCF 服务不再识别表单身份验证用户。

我们目前的想法是 RestSharp 正在控制一些不应该或没有正确恢复状态的东西。有谁知道安全凭证在 Silverlight 中的存储位置，以便我们可以在调用 RestSharp 之前获取它们并在之后恢复它们？

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:55:51.087

*唧唧*喳喳*这里的蟋蟀声音很大。

无论如何，我们最终想出的解决方案是将所有对第三方 REST 服务的调用转移到我们自己的服务中。这使 Silverlight 不会丢失其对我们服务的凭据（因为我们从未从 Silverlight 调用其他服务）。

我希望这对有一天偶然发现这一点的人有所帮助。

# python - 使用 python 转换 SQL 数据时间

> ID：14655254
> 
> 赞同：0
> 
> 时间：2013-02-01T21:22:51.540
> 
> 标签：python, date, time, unix-timestamp

我有一个在 sql 中返回日期时间的查询，例如：

```
+---------------------+
| created             |
+---------------------+
| 2008-07-31 21:42:52 |
+---------------------+ 
```

在我的 python 代码中，我正在执行以下操作以通过调用查询来捕获数据。这是我的python代码：

```
query_item_created_f = None
                    query_item_created_f = query_item_created.format(parent_id=question_id)
                    self.dbCursor.execute(query_item_created_f)
                    created_date = self.dbCursor.fetchall()
                    print created_date 
```

我以以下格式获取数据和时间：

```
({'created': datetime.datetime(2008, 7, 31, 21, 42, 52)},) 
```

如何将其更改为 unix 数据时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:28:01.530

调用对象上的[`.timetuple()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.timetuple)`datetime.datetime`，将其传递[`time.mktime()`](http://docs.python.org/2/library/time.html#time.mktime)给以创建 UNIX 时间戳：

```
>>> import datetime
>>> dt = datetime.datetime(2008, 7, 31, 21, 42, 52)
>>> import time
>>> time.mktime(dt.timetuple())
1217533372.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:27:04.183

尝试`strftime`：

'`datetime.datetime(2008, 7, 31, 21, 42, 52).strftime('%Y-%m-%d %H:%M:%S')`

# php - 过滤 ZendService\Amazon\ResultSet

> ID：14655261
> 
> 赞同：0
> 
> 时间：2013-02-01T21:23:25.213
> 
> 标签：php, amazon, zend-framework2

过滤 a 的最佳方法是`ZendService\Amazon\ResultSet`什么？

我使用 Amazon API（和 Zend Framework 2.0.7）来收集书籍。其中一些既没有 ISBN 也没有 EAN，我想将它们从`ResultSet`. 我可以只过滤它们，`foreach ($results as $result) { if (...) { ... } }`但我想`ResultSet`在过滤过程之后保留一个有效的。因此，我想得到一个`ResultSet`既没有 ISBN 也没有 EAN 的所有项目。

我尝试创建一个`DomDocument`并仅添加有效的项目，但是`ResultSet`-header 丢失了。不幸的是，没有`asXml()`在对象上定义方法`ResultSet`，所以也没有办法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T11:42:02.630

由于没有答案，我必须解决问题，所以我使用了 SplQueue。不理想，但它有效。

# python - 阅读 txt 并制作“列表列表”

> ID：14655266
> 
> 赞同：1
> 
> 时间：2013-02-01T21:23:40.903
> 
> 标签：python, list, configuration-files

我想制作一个读取如下`.txt`文件的程序：

> [清单 1]
> 
> 变量 1、变量 2、变量 3、变量 4
> 
> 变量 5，变量 6
> 
> [清单 2]
> 
> 变量 7、变量 8、变量 9

正如标题所说，我想列出“[”，]”之间的所有术语，并为这些术语中的每一个创建一个列表，由它们下面列出的术语组成（例如：）`LIST2 = [var7, var8, var9]`。

到目前为止，我列出了“[]”之间的术语：

```
try:
f = open("tm.txt", "r")
try:
    string = f.read()       
finally:
    f.close()
except IOError:
    pass

lista = re.findall(re.escape("[")+"(.*)"+re.escape("]"),string)

for i in range(len(lista)):
    vars()[lista[i]] = i   #makes str into var and gives a value to them
    print vars()[lista[i]] #prints what is inside of each var of the list
print lista #prints each var names 
```

如您所见，剩下要做的就是将这些新创建的变量中的每一个分配到`.txt`文件中它们下方的术语列表中。我正在尝试这样做，以便我可以通过`TKinter`我正在制作的独立游戏制作配置器。自己编辑`.txt`文件很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:03:07.573

从[`ConfigParser`](http://docs.python.org/2/library/configparser.html#examples)模块的示例部分：

```
>>> import ConfigParser
>>> import io
>>> s = """[LIST 1]
... 
... var1,var2,var3,var4
... 
... var5,var6
... 
... [LIST 2]
... 
... var7,var8,var9"""
>>> config = ConfigParser.RawConfigParser(allow_no_value=True)
>>> config.readfp(io.BytesIO(s))
>>> config.items('LIST 1')
[('var1,var2,var3,var4', None), ('var5,var6', None)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T08:03:13.567

我认为您可能无意使用模块（如 Myslef），所以我建议：

```
file1 = open('tm.txt')
flist = file1.readlines()
file1.close()
flist = [i.rstrip() for i in flist]
c = 0
final = []
for i in flist:
    if(i == '[LIST {0}]'.format(c+1)):
        temp = []
        final.append(temp)
        c += 1
    else:
        for j in i.split(','):
            temp.append(j)
            final[len(final)-1] = temp
print(final)

# Each Member OF 'final' List is The List You Want! 
```

# javascript - ajax函数内的ajax函数

> ID：14655270
> 
> 赞同：0
> 
> 时间：2013-02-01T21:24:09.060
> 
> 标签：javascript, jquery, ajax

我正在尝试编写实时更新购物车。我试图在另一个函数中运行一个函数，但只能让它在重新加载时工作。我的方法有什么问题？

编辑：我现在已经从 checkKart 编辑到 checkKart();

```
$(function checkKart() {
        $.ajax({
            type: "GET",

            url: "checkCart.php",
            success: function(html) {

                $("#handlevogn").html(html);
           }

        });
});

function addToCart(product_name, design_name, price, qty) {
     $.ajax({
             type: "GET",
             url: 'test.php',
             data: {qty: qty, product_name: product_name, design_name: design_name, price: price},
             success: function(data) {
                  alert("Varen er i handlekurven");
                  checkKart();
             }
           });
    return "Varen er i handlekurven";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:42:27.117

```
function checkKart() {
    $.ajax({
        type: "GET",
        url: "checkCart.php",
        success: function(html) {
            $("#handlevogn").html(html);
        }
    });
};

function addToCart(product_name, design_name, price, qty) {
    $.ajax({
        type: "GET",
        url: 'test.php',
        data: {qty: qty, product_name: product_name, design_name: design_name, price: price},
        success: function(data) {
            alert("Varen er i handlekurven");
            checkKart();
         }
    });

    return "Varen er i handlekurven";
} 
```

那应该行得通。

不知道为什么你的第一个函数包含在 $() 中。如果你想写一个 jQuery 插件，正确的语法是这样的：

```
(function( $ ) {
  $.fn.myPlugin = function() {

    // Do your awesome plugin stuff here

  };
})( jQuery ); 
```

你可以在这里阅读更多关于[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:47:54.793

你的错误控制台*应该*告诉你这`checkKart`是一个未定义的函数，原因是这样写的：

```
$(function checkKart() {
    $.ajax({
        ...
    });
}); 
```

您创建的是“命名函数表达式”，其中名称仅*在*该函数中可见，并且名称不会导出到封闭范围。

如果您在没有`$(...)`包装器的情况下正常定义函数，那么一切都应该正常工作。

# gis - 如何在 OpenLayers 中正确配置 WFS 层？

> ID：14655273
> 
> 赞同：2
> 
> 时间：2013-02-01T21:24:13.660
> 
> 标签：gis, openlayers

我正在尝试在 OpenLayers 地图上显示 WFS 图层。以下是*GETCAPABILITIES*响应的适当部分。

```
<ows:Operation name="GetFeature">
  <ows:DCP>
    <ows:HTTP>
      <ows:Get xlink:href="http://localhost/MapServer/Default.aspx"/>
      <ows:Post xlink:href="http://localhost/MapServer/Default.aspx"/>
    </ows:HTTP>
  </ows:DCP>
  <ows:Parameter name="resultType">
    <ows:Value>results</ows:Value>
    <ows:Value>hits</ows:Value>
  </ows:Parameter>
  <ows:Parameter name="outputFormat">
    <ows:Value>text/xml; subtype=gml/3.1.1</ows:Value>
  </ows:Parameter>
</ows:Operation>
<ows:Parameter name="srsName">
  <ows:Value>EPSG:4326</ows:Value>
</ows:Parameter>
<ows:Constraint name="DefaultMaxFeatures">
  <ows:Value>20000</ows:Value>
</ows:Constraint> 
```

我要显示的功能：

```
<wfs:FeatureType>
  <wfs:Name>Data_ACTIVE</wfs:Name>
  <wfs:Title/>
  <wfs:Abstract/>
  <ows:Keywords/>
  <wfs:DefaultSRS>EPSG:4326</wfs:DefaultSRS>
  <wfs:OutputFormats>
    <wfs:Format>text/xml; subtype=gml/3.1.1</wfs:Format>
  </wfs:OutputFormats>
  <ows:WGS84BoundingBox>
    <ows:LowerCorner>-102.01545715332 28.970645904541</ows:LowerCorner>
    <ows:UpperCorner>-71.021598815918 43.1671752929688</ows:UpperCorner>
  </ows:WGS84BoundingBox>
</wfs:FeatureType> 
```

**这是我正在使用的代码：**

```
$(document).ready(
    function () {
        // allow testing of specific renderers via "?renderer=Canvas", etc
        var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
        renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;
        var geographic = new OpenLayers.Projection("EPSG:4326");
        var mercator = new OpenLayers.Projection("EPSG:900913");

        map = new OpenLayers.Map({
            div: "map",
            layers: [
                new OpenLayers.Layer.WMS("OpenLayers WMS",
                    "http://vmap0.tiles.osgeo.org/wms/vmap0",
                    { layers: "basic" }
                ),
                new OpenLayers.Layer.Vector("GML", {
                    strategies: [new OpenLayers.Strategy.Fixed()],
                    protocol: new OpenLayers.Protocol.WFS({
                            url: "http://localhost/MapServer/Default.aspx",
                            featureType: "Data_ACTIVE",
                            featureNS: "http://www.tstgis.org/gml",
                            version: "1.1.0",
                            geometryName: "line"
                        }),
                        renderers: renderer
                    })
            ],
            zoom: 15
        });

        var bb = new OpenLayers.Bounds(-179.821327209473, 12.1057098342161, -56.5289154052734, 78.1442901657839);
        map.zoomToExtent(bb);
}); 
```

我看到正在向服务器发出该图层的发布请求，结果返回，但根本不显示。为什么图层不显示？任何帮助，将不胜感激。

**注意**
此测试脚本是在 localhost/mapserver 下运行的 HTML shell 的一部分，因此它排除了熟悉的跨域问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:54:44.860

我毫不怀疑这是 OpenLayers 的配置问题。根据我对 OpenLayers 的了解，我已经正确配置了它。事实证明，就我而言，设置 featurePrefix 选项是必不可少的。这样做的原因是每个 FeatureMember 节点的 XML 响应 (GML) 中的名称空间和前缀用于识别响应的适当读取器。默认情况下，featurePrefix 设置为“功能”。如果响应的命名空间 + 前缀与 OpenLayers 中的配置不匹配，则特征不会添加到图层中，因此不会显示。在我的情况下，前缀设置为空字符串，因为服务器不会向响应添加前缀。

此外，设置 geometryName 也很关键。对于 WFS 版本 1.0，geometryName 的默认值是“the_geom”，对于更高版本，默认值为 null。服务器使用geometryName 来实际定位要素。就我而言，服务器上使用的geometryName 是“msGeometry”。

这是工作代码。

```
$(document).ready(
function () {
    // allow testing of specific renderers via "?renderer=Canvas", etc
    var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
    renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;
    var geographic = new OpenLayers.Projection("EPSG:4326");
    var mercator = new OpenLayers.Projection("EPSG:900913");

    map = new OpenLayers.Map({
        div: "map",
        layers: [
            new OpenLayers.Layer.WMS("OpenLayers WMS",
                "http://vmap0.tiles.osgeo.org/wms/vmap0",
                { layers: "basic" }
            ),
            new OpenLayers.Layer.Vector("GML", {
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.WFS({
                        url: "http://localhost/MapServer/Default.aspx",
                        featureType: "Data_ACTIVE",
                        version: "1.1.0",
                        geometryName: "msGeometry",
                        featurePrefix: ""
                    }),
                    renderers: renderer
                })
        ],
        zoom: 15
    });

    var bb = new OpenLayers.Bounds(-179.821327209473, 12.1057098342161, -56.5289154052734, 78.1442901657839);
    map.zoomToExtent(bb); 
```

});

# python - 打开网页到特定的行或段落

> ID：14655274
> 
> 赞同：0
> 
> 时间：2013-02-01T21:24:13.777
> 
> 标签：python, r, web

是否可以在某个点（理想情况下是行号）打开网页，或者在使用 R 或 python 在浏览器中打开 url 的 Xpath 查询（不是锚点）标识的点上打开网页。

```
webbrowser.open(url)

shell.exec(url) 
```

它会取决于使用的浏览器，还是需要由浏览器而不是用于打开它的脚本来控制？

这个想法是在网页中搜索一个词，并在包含搜索词的特定行打开页面，而不是仅仅打开 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:33:56.113

您可能会喜欢 HTML，首先通过在页面上找到您想要的链接，然后使用您命名的特定 ID 创建一个新元素，然后告诉浏览器加载该编辑过的页面。

```
site: www.example.com
<p> lorem ipsum </p> 
```

然后你把`p`'s`id`改成`id="scrollhere"`

```
site: www.example.com
<p id="scrollhere" > lorem ipsum </p> 
```

然后告诉您的浏览器加载`www.example.com/#scrollhere`. 诀窍是将编辑的页面获取到浏览器。

# javascript - 用 Javascript 管理 LinkBut ton？

> ID：14655275
> 
> 赞同：0
> 
> 时间：2013-02-01T21:24:19.073
> 
> 标签：javascript, asp.net

我在视图上有一个`LinkButton`名为“退出聊天”。我将`javascript`代码嵌入到`OnClientClink=javascript:confirm('Are you sure you want to end the session?')`。但是，我无法管理对话框

当用户单击确定按钮时，视图应该被终止。我该怎么做？

```
<asp:LinkButton ID="LinkButton2" runat="server" Font-
    Bold="False" Font-Underline="False" 
    OnClientClick="javascript:confirm('Are you sure you want to end the session?')"
    ViewStateMode="Enabled" OnClick="LinkButton2_Click1" Text="Exit Chat">
</asp:LinkButton> 
```

我写了这个代码部分但没有工作:(

```
if (LinkButton2.CommandName=="OK")
{
    MultiView1.ActiveViewIndex = -1;
}
else if(LinkButton2.CommandName=="Cancel")
{
    MultiView1.ActiveViewIndex = 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:34:32.653

您可以检查确认的结果，如果为真则关闭窗口。

```
<asp:LinkButton ID="DeleteButton" runat="server" CausesValidation="False"
        CommandName="Delete" Text="Delete"
        OnClientClick="return showConfirm();">
</asp:LinkButton>

<script>
function showConfirm()
{
   var ok = confirm('Are you certain you want to delete this product?');

   if (ok)
   {
      window.close();
   }
}
<script> 
```

# c - 图邻接向量 - 文件

> ID：14655276
> 
> 赞同：1
> 
> 时间：2013-02-01T21:24:23.110
> 
> 标签：c, random, graph

我需要一些表示为邻接向量的图。顶点的数量可以达到几万（例如20.000-50.000）。不知道是否重要，我使用的是**C**代码。

你知道我可以检索这些数据文件的任何网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:36:13.370

与实践非常相关的图表是数字路线图。（在导航系统中使用） `OpenStreetMap`提供了这些向量。但是你必须建立自己的邻接关系。

# php - PHP：将整数/字符串变量与 Null 进行比较

> ID：14655279
> 
> 赞同：3
> 
> 时间：2013-02-01T21:24:32.710
> 
> 标签：php, string, comparison, integer

我有一个整数/字符串变量。如果我在 mysqli 语句中有错误，它会变成**String**并且没有错误它会变成[受影响的行](http://php.net/manual/en/mysqli-stmt.affected-rows.php)数（**Integer**）。

但是在 PHP 中，如果我们有这样的东西：

```
$i = 0;
if ( $i < 0 || $i == null ) {
    var_dump($i);
} 
```

我们有这个结果：

```
int 0 
```

*首先*，我想知道为什么会这样？（我的意思是，如果`var_dump`是`int 0`，为什么**if**语句不起作用？）

*其次*，我想要比较的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:26:42.933

您没有进行严格的比较。使用`===`而不是`==`.

`==`将转换类型然后比较

请改用以下方法之一。[`is_null`](http://php.net/manual/en/function.is-null.php)是最干净的 IMO。

```
if ( $i < 0 || $i === null ) {..} 
```

或者

```
if ( $i < 0 || is_null($i)) {..} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T21:26:23.370

您正在比较 if `0 == null`are equal, not same ，根据[文档，这是](http://php.net/manual/en/function.empty.php)[相同](http://php.net/manual/en/language.operators.comparison.php)的：

> 以下内容被认为是空的：
> 
> ```
> ""（一个空字符串）
> 0（0 为整数）
> 0.0（0 作为浮点数）
> "0" (0 作为字符串)
> 空值
> 错误的
> array() （一个空数组）
> $var; （声明的变量，但没有值）
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:26:16.273

那是因为你使用`==`. 只要一个操作数是`null`- 然后另一个操作数被隐式转换为布尔值`0`- >`false`

[http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

> bool 或 null 任何东西 转换为 bool，FALSE < TRUE

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T21:26:51.050

您需要比较类型

```
var_dump($i == null); //true
var_dump($i === null); //false 
```

您可以使用

```
$i = 0;
if ( $i < 0 || $i === null ) {
    var_dump($i);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T21:28:00.160

使用 === 比较器

`if ( $i < 0 || $i === null ) { var_dump($i); }`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-01T21:29:18.097

使用该[`is_null()`](http://www.php.net/manual/en/function.is-null.php)功能。

```
if ( $i < 0 || is_null($i) ) { 
```

# ajax - 在 OnSuccess 中获取调用表单

> ID：14655280
> 
> 赞同：1
> 
> 时间：2013-02-01T21:24:37.447
> 
> 标签：ajax, asp.net-mvc, unobtrusive-ajax

```
<div class=".parentForm'>
    @Ajax.BeginForm(... AjaxOptions { OnSuccess = "submitSuccess" })
    {...}
</div>

function postDone(result,two, three) {
   $('.parentForm').replaceWith(result);
} 
```

我不喜欢这样，因为如果这个部分有多个表单，它们都将具有相同的类，我宁愿不提出一些时髦的方案，在服务器端生成一个 ID，然后将其传递给JS 回调。

使用 .ajax，我可以使用`this`获取提交请求的表单，然后从那里获取父级 .formContainer。有没有办法获得对使用 OnSuccess 提交表单的表单的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:59:41.400

实际上有一种更简单的方法，尽管您仍然需要修改`jquery.unobtrusive-ajax.js`文件。在第 100 行周围添加一行代码。我在[这里提供了相同的答案](https://stackoverflow.com/questions/6630189/how-to-use-this-inside-mvc3-ajax-actionlink-onbegin-oncomplete-events/14611314#14611314)

```
options.data.push({ name: "X-Requested-With", value: "XMLHttpRequest" });

options.context = element; // <--- Add this line

method = options.type.toUpperCase();
if (!isMethodProxySafe(method)) {
    options.type = "POST";
    options.data.push({ name: "X-HTTP-Method-Override", value: method });
} 
```

**更新**：AaronLS 在 codeplex 上创建了一个问题，以查看他们是否会对 jQuery Unobtrusive Ajax 文件本身进行更改，如果您也希望添加此更改，请点赞！

[Codeplex 问题：让“this”引用源元素](http://aspnet.codeplex.com/workitem/10335)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:50:25.133

当然可以，但是需要修改 jquery.unobtrusive-ajax.js 文件。您必须替换以下行：

```
success: function (data, status, xhr) {
    asyncOnSuccess(element, data, xhr.getResponseHeader("Content-Type") || "text/html");       
    getFunction(element.getAttribute("data-ajax-success"), ["data", "status", "xhr"]).apply(this, arguments);
}, 
```

和：

```
success: function (data, status, xhr) {
    asyncOnSuccess(element, data, xhr.getResponseHeader("Content-Type") || "text/html");
    var args = $.merge(arguments, [element]);
    getFunction(element.getAttribute("data-ajax-success"), ["data", "status", "xhr"]).apply(this, args);
}, 
```

可以通过这种方式访问​​表单：

```
function submitSuccess(result, status, xhr, element) {
    // element is your form
} 
```

# android - 如何更改数组适配器中包含的文本视图中的值

> ID：14655281
> 
> 赞同：2
> 
> 时间：2013-02-01T21:24:42.787
> 
> 标签：android, android-listview, android-arrayadapter

我有一个按照 ViewHolder 模式由数组适配器填充的列表视图。当有人单击按钮时，每一行都相当复杂，我想增加该行中显示的计数并更新该行中的文本字符串。

到目前为止，我已经正确填充了所有内容，但是当我单击一个单元格上的按钮时，它也会更改下一行的值（如果已创建）。

我已经尝试过`notifyDataSetChanged()`，但这会重新填充整个列表，这对我的情况并不理想。

因为我`onClick()`在数组适配器中定义我的方法，所以我有一个 RowHolder 类，它保存行`v`以及填充`MainListItem`列表项的该行的项。

```
class RowHolder{
    View v;
    MainListItem i;
    RowHolder(View v, MainListItem i){
        this.v = v;
        this.i=i;
    }
} 
```

这是按钮的片段，`onClick()`其中 h 是持有人

```
 h.loveButton.setBackgroundColor(Color.parseColor(rowHolder.i.brandLoveColor));
    h.loveButton.setImageResource(R.drawable.lovewhite);
    ((ImageView)rowHolder.v.findViewById(R.id.lovebutton)).setImageResource(R.drawable.lovewhite);              
    rowHolder.v.findViewById(R.id.lovebutton).setBackgroundColor(Color.parseColor(rowHolder.i.brandLoveColor));
    String newLovers = getLoverString(rowHolder.i,rowHolder);
    h.lovers.setText(newLovers);
    ((TextView)rowHolder.v.findViewById(R.id.lovers)).setText(newLovers);
    rowHolder.i.loverString = newLovers;
    rowHolder.i.loved = true;
    int tmp = rowHolder.i.loves
    tmp = tmp + 1;
    ((TextView)rowHolder.v.findViewById(R.id.lovecount)).setText(String.valueOf(tmp));
    h.lovecount.setText(String.valueOf(tmp));
    rowHolder.i.loves = tmp; 
```

单击按钮时，我会更改提供列表视图的数据中的值以及持有视图的持有者中的数据以及实际视图中显示的数据。

这个实现工作得很好，除了当我改变实际视图中的值时，它最终会改变所有可见行的值。

如果有人可以帮助我找出更好的方法来实现这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T03:28:22.543

> 我试过 notifyDataSetChanged() 但这会重新填充整个列表，这对我的情况并不理想。

这是您需要解决的一个问题。视图仅显示数据。您可以实现一个快速刷新数据的适配器。例如，如果您加载位图，然后缓存它们以备后用。当然第一次加载可能需要一些时间，但第二次可能是即时的。

> 我有一个 RowHolder 类，它包含行 v 以及填充列表项的 MainListItem 行的项。

像这样将项目和行捆绑在一起并不理想。Android 会回收视图，这使得这很难保持直截了当。正如你所发现的。我发现视图的 settag 方法对于处理此类问题非常方便。如果视图需要知道适配器中与它关联的项，请使用 setTag 来跟踪它。适配器的 getView 方法是设置它的理想场所。我会从设计中完全移除支架。尽量少有数据与视图相关联的地方。

一旦您将数据与视图分离并使适配器快速刷新。您只需要更新数据，其他一切都可以正常工作。

有关更多信息，请阅读模型-视图-控制器设计模式。

# git - 从另一个目录执行 git add

> ID：14655282
> 
> 赞同：0
> 
> 时间：2013-02-01T21:24:54.703
> 
> 标签：git, batch-file

我正在编写一个批处理文件来自动将我修改过的文件添加到 git 中的暂存区域。

批处理文件位于我的 dev/tools 目录中，它将 git repo 的目录作为它的第一个参数。

这是我目前的代码：

```
@echo OFF

IF "%1"=="" (
    echo No directory supplied...
    goto :exit
) ELSE (
    echo Adding all modified files to staged area for %1
    git add %1
)

:exit 
```

但是，当我在 dev/tools 目录中运行时，`./test.bat ../temp`我得到以下输出：

> 将所有修改后的文件添加到 ../temp 的暂存区
> 
> 致命：不是 git 存储库（或任何父目录）：.git

**如何执行“git add”。在使用批处理命令位于我当前不在其中的目录中的存储库上？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:27:02.143

`cd %1`在执行 git add 之前先做一个

# r - 用以前的值替换缺失值

> ID：14655286
> 
> 赞同：9
> 
> 时间：2013-02-01T21:25:18.450
> 
> 标签：r, zoo

```
Event,Time,Bid,Offer
Quote,0.458338,9.77,9.78
Order,0.458338,NA,NA
Order,0.458338,NA,NA
Order,0.458338,NA,NA
Quote,0.458363,9.78,9.79
Order,0.458364,NA,NA 
```

我有一个像这样的数据框我想编写一个有效的代码来用以前的报价报价和报价填充 NA，时间是排序的，只有报价包含报价和报价字段（最好是矢量化）

所以它变成了

```
Event,Time,Bid,Offer
Quote,0.458338,9.77,9.78
Order,0.458338,9.77,9.78
Order,0.458338,9.77,9.78
Order,0.458338,9.77,9.78
Quote,0.458363,9.78,9.79
Order,0.458364,9.78,9.79 
```

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T21:32:24.343

**zoo**包中的`na.locf()`功能是你的朋友。代表“最后一个结转”。使用您的数据：**`locf`**

 **```
dat <- read.table(text = "Event,Time,Bid,Offer
Quote,0.458338,9.77,9.78
Order,0.458338,NA,NA
Order,0.458338,NA,NA
Order,0.458338,NA,NA
Quote,0.458363,9.78,9.79
Order,0.458364,NA,NA
", header = TRUE, sep = ",")

require(zoo)

dat2 <- transform(dat, Bid = na.locf(Bid), Offer = na.locf(Offer)) 
```

产生。

```
> dat2
  Event     Time  Bid Offer
1 Quote 0.458338 9.77  9.78
2 Order 0.458338 9.77  9.78
3 Order 0.458338 9.77  9.78
4 Order 0.458338 9.77  9.78
5 Quote 0.458363 9.78  9.79
6 Order 0.458364 9.78  9.79 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-11T12:29:43.833

尝试这个：

```
# Last Observation Move Forward
na.lomf <- function(object, na.rm = F) {
    na.lomf.0 <- function(object) {
        idx <- which(!is.na(object))
        if (is.na(object[1])) idx <- c(1, idx)
        rep.int(object[idx], diff(c(idx, length(object) + 1)))
    }    
    dimLen <- length(dim(object))
    object <- if (dimLen == 0) na.lomf.0(object) else apply(object, dimLen, na.lomf.0)
    if (na.rm) na.trim(object, sides = "left", is.na = "all") else object
} 
```**

# java - 用于更快开发的 ASP

> ID：14655301
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:26:35.867
> 
> 标签：java, asp.net, .net, jakarta-ee, web-applications

过去 5 年我开发了中型/大型 Java Web 应用程序，我想看看一些用于小型 Web 开发的平台/工具。我想到了 ASP，有时我听说 ASP .net 平台比 Java EE 更好，可以更快地开发中小型 Web 应用程序。这是真的？有人可以争论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:32:00.563

许多人普遍认为 ASP.NET 和 Microsoft 技术更容易学习——因此更容易找到从事该项目的员工。就性能而言，这是有争议的。你大多以无休止的辩论告终。我个人不明白为什么一个明显优于另一个

比较 Java 与 .NET 的普遍看法是：Java 是一种语言（单一规范）但有多个供应商（例如，您有 JBoss、Websphere、Weblogic 等都实现了 Java EE 规范），而 microsoft 是多种语言但单一供应商（您可以编写 ASP + VB 或 C#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:33:02.737

我在 Java/Java EE 和 .NET 3.5 上工作。我注意到，由于 Visual Studio，.NET 的编码和构建速度要快一些。但是，如果您可以编写构建脚本并且确定要使用的服务器[JBOSS、Tomcat 等]，Java EE 看起来会非常简单。总而言之，我会选择 .NET，因为我知道我只能使用 IIS，我只需要右键单击、构建和部署，我不需要学习 ANT、UNIX 脚本，也不需要研究使用哪个服务器.

# java - 向一个组件添加多个 BufferedImage 进行拖动

> ID：14655302
> 
> 赞同：1
> 
> 时间：2013-02-01T21:26:36.837
> 
> 标签：java, swing, jlabel, bufferedimage, drag-and-drop

我希望能够在一个组件上显示两个 BufferedImage，然后可以使用鼠标拖动在组件周围移动，并且如果拖动到另一个图像的顶部也可以相互重叠。

到目前为止，我已经能够通过简单地将它们放在自己的 JLabels 中然后将它们放在同一个 JPanel 上来将两个 BufferedImages 相互叠加显示，但是我担心我可能没有以正确的方式考虑这一点。

对此的任何帮助、建议或示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:25:01.637

对于这种情况，我通常使用 a `JLayeredPane`（它使用无布局，这意味着您必须调用自己`setBounds()`或`setSize()/setLocation()`），但它可以很好地处理分层并且似乎非常适合自由拖动组件。

这是一个小演示示例（显示 10 个可拖动图像（始终相同））。代码可以改进，但它已经给你一个很好的印象，你可以做什么。

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Random;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.SwingUtilities;

public class TestComponentDragging {

    private JLayeredPane contentPane;

    protected void initUI() throws MalformedURLException {
        JFrame frame = new JFrame(TestComponentDragging.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        contentPane = new JLayeredPane();
        contentPane.setBackground(Color.WHITE);
        contentPane.setOpaque(true);
        frame.setContentPane(contentPane);
        frame.setSize(Toolkit.getDefaultToolkit().getScreenSize());
        frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
        frame.setVisible(true);
        ImageIcon image = new ImageIcon(new URL("http://www.lemondedemario.fr/images/dossier/bowser/bowser.png"));
        MouseDragger dragger = new MouseDragger();
        Random random = new Random();
        for (int i = 0; i < 10; i++) {
            JLabel draggableImage = new JLabel(image);
            draggableImage.setSize(draggableImage.getPreferredSize());
            draggableImage.setLocation(random.nextInt(contentPane.getWidth() - draggableImage.getWidth()),
                    random.nextInt(contentPane.getHeight() - draggableImage.getHeight()));

            dragger.makeDraggable(draggableImage);
            contentPane.add(draggableImage);
        }
        contentPane.repaint();
    }

    public static class MouseDragger extends MouseAdapter {
        private Point lastLocation;
        private Component draggedComponent;

        @Override
        public void mousePressed(MouseEvent e) {
            draggedComponent = e.getComponent();
            lastLocation = SwingUtilities.convertPoint(draggedComponent, e.getPoint(), draggedComponent.getParent());
        }

        @Override
        public void mouseDragged(MouseEvent e) {
            Point location = SwingUtilities.convertPoint(draggedComponent, e.getPoint(), draggedComponent.getParent());
            if (draggedComponent.getParent().getBounds().contains(location)) {
                Point newLocation = draggedComponent.getLocation();
                newLocation.translate(location.x - lastLocation.x, location.y - lastLocation.y);
                newLocation.x = Math.max(newLocation.x, 0);
                newLocation.x = Math.min(newLocation.x, draggedComponent.getParent().getWidth() - draggedComponent.getWidth());
                newLocation.y = Math.max(newLocation.y, 0);
                newLocation.y = Math.min(newLocation.y, draggedComponent.getParent().getHeight() - draggedComponent.getHeight());
                draggedComponent.setLocation(newLocation);
                lastLocation = location;
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            lastLocation = null;
            draggedComponent = null;
        }

        public void makeDraggable(Component component) {
            component.addMouseListener(this);
            component.addMouseMotionListener(this);
        }

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestComponentDragging().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

结果（每个“Bowser”都可以用鼠标在框架内自由移动/拖动）： ![结果](../Images/73de1158de33cdb5ef1974d159dafe27.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:38:52.933

我不会使用`JLabel`s 来显示图像并与之交互。你可以做一些事情，但是你突然受到了限制。

我宁愿定义一个`JPanel`，覆盖它的方法并使用该对象`paintComponent(Graphics g)`绘制图像。`Graphics`这样，您可以轻松地应用所有类型的变换，处理鼠标事件以拖动、调整大小、旋转……它们。

# javascript - 无法将项目推送到数组

> ID：14655307
> 
> 赞同：0
> 
> 时间：2013-02-01T21:26:53.433
> 
> 标签：javascript

> **可能重复：**
> [在继续之前等待多个异步调用完成](https://stackoverflow.com/questions/2768293/waiting-on-multiple-asynchronous-calls-to-complete-before-continuing)

更新：

这是允许用户选择一个或多个时间线的 HTML 表单：

```
<form>
  <ul>
    <li>
      <input type="checkbox" id="s-fry" data="stephenfry" />
      <label for="s-fry">Stephen Fry</label>
    </li>
    <li>
      <input type="checkbox" id="r-dawkins" data="richarddawkins" />
      <label for="r-dawkins">Richard Dawkins</label>
    </li>
    <li>
      <input type="checkbox" id="s-macfarlane" data="sethmacfarlane" />
      <label for="s-macfarlane">Seth MacFarlane</label>
    </li>
    <li>
      <input type="checkbox" id="r-gervais" data="rickygervais" />
      <label for="r-gervais">Ricky Gervais</label>
    </li>
  </ul>
  <input type="submit" value="Go" />
</form>
<div id="tweets"></div> 
```

这是JavaScript

```
$('input[type=submit]').on('click', function(e){

// prevent default behavior of the submit button
e.preventDefault();

// empty the div with ID of tweets
$('#tweets').empty();

// create an empty ul
var tweetList = $('<ul id="tweets-list">');

// create an empty array for the tweets
var returnedTweets = [];

// perform a function on all of the checked boxes
$(':checkbox:checked').each( function(){

var twitterID = $(this).attr('data');

// use the "data" attribute to build the query string for getJSON
$.getJSON( 'http://api.twitter.com/1/statuses/user_timeline/'+twitterID+'.json?callback=?', null, function(data){
    $.each(data, function(i, tweet){ 
      returnedTweets.push(tweet); 
    });
    returnedTweets.sort(function(a,b){ return b.id - a.id; });
    $.each(returnedTweets, function(i, tweet){
      var item  = $('<li>');
      var name  = $('<h2>').text(tweet.user.name);
      var date  = $('<small>').text(prettyDate(tweet.created_at));
      var img   = $('<img>').attr('src', tweet.user.profile_image_url);
      var msg   = $('<p>').text(tweet.text);
      item.append(img,name,date,msg);
      tweetList.append(item);
    }); // end of parse
}); // end of getJSON
}); // checkbox.each

$('#tweets').append(tweetList);

function prettyDate(time){
var date = new Date((time || "").replace(/-/g,"/").replace(/[TZ]/g," ")),
diff = (((new Date()).getTime() - date.getTime()) / 1000),
day_diff = Math.floor(diff / 86400);

if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
return;

return day_diff == 0 && (
      diff < 60 && "just now" ||
      diff < 120 && "1 minute ago" ||
      diff < 3600 && Math.floor( diff / 60 ) + " minutes ago" ||
      diff < 7200 && "1 hour ago" ||
      diff < 86400 && Math.floor( diff / 3600 ) + " hours ago") ||
  day_diff == 1 && "Yesterday" ||
  day_diff < 7 && day_diff + " days ago" ||
  day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks ago";
} // end of prettyDate

}); // end of "click" function 
```

它在输出之前对数组进行排序，但它没有按预期按时间顺序排序。这是一个更新的小提琴：http: [//jsfiddle.net/brianeoneill/FsYKg/](http://jsfiddle.net/brianeoneill/FsYKg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:38:35.123

如果您想等到所有回调都完成后再记录，请尝试创建一个 Deferred 数组...然后当它们都完成时，您将拥有一个完全填充的列表。

[http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

像这样的东西可能会起作用：

```
var returnedTweets = [];
var deferreds = [];

$(':checkbox:checked').each( function(){

    deferreds.push($.getJSON( 'http://api.twitter.com/1/statuses/user_timeline/'+$(this).attr('data')+'.json?callback=?', null, function(data){
        $.each(data, function(i, tweet){ 
           returnedTweets.push(tweet); 
        });
    }));

});

$.when(deferreds).then(
    function () {
       console.log(returnedTweets.length);
    }); 
```

# php - 下一页链接显示相同的帖子 Wordpress

> ID：14655308
> 
> 赞同：0
> 
> 时间：2013-02-01T21:26:58.303
> 
> 标签：php, html, wordpress

当我单击下一页时，它会转到下一页（至少在 url 中显示“www.url.com/?s=et&paged=2”），但它显示相同的帖子。我的搜索有什么问题？

搜索.php

[http://pastebin.com/VXkpKqAS](http://pastebin.com/VXkpKqAS)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:34:34.977

您`paged`在 URL 中使用，但您的代码正在寻找`$_GET['page']`

# css - 具有均匀排水沟和全宽网格的 CSS 网格项目

> ID：14655312
> 
> 赞同：0
> 
> 时间：2013-02-01T21:27:08.320
> 
> 标签：css, grid, margins

我正在开发一个布局，其中包含一个类似网格的布局，以展示一组优惠。这是我想要实现的目标：

![客观的](../Images/896723c148d6e405f2c8aa67d8792b12.png)

我的问题是我似乎无法在这个网格中弄平和冲洗排水沟。这是我到目前为止所拥有的：

![当前结果](../Images/6b8fb2aef69d99e1486627cfe8fbb9f7.png)

HTML：

```
<div id="main">
    <div><img src="images/welcomeBanner.jpg"></div>
    <div class="offers">
        <img class="offer" src="images/offer1.jpg">
        <img class="offer" src="images/offer2.jpg">
        <img class="offer" src="images/offerX.jpg">
        <img class="offer" src="images/offerX.jpg">
        <img class="offer" src="images/offerX.jpg">
        <img class="offer" src="images/offerX.jpg">
    </div>
</div> 
```

CSS：

```
div#content div#main div.offers img.offer{ padding-top:20px; padding-right: 20px; } 
```

我正在使用`padding-right:20px;`这些优惠项目中的每一个 ( `img.offer`)。由于这些报价都是内联的，我似乎无法让每一行都与该主列的右侧齐平（用手与较大横幅的右侧对齐）。

我很想用纯 CSS 来实现这一点，但我意识到这可能不会发生。我会尝试`:nth-child(3n)`，但缺乏 IE 支持对我来说是一个交易破坏者。

我无法使用服务器端处理器对网格项的数量进行一些数学运算。我认识到我可能只想使用 javascript 或 jquery 来做这个数学运算，但我想联系看看是否有人有任何其他建议。

TLDR：帮助我获得均匀的排水沟和全宽网格。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:32:39.753

我不知道您的容器的宽度是多少，但这可能会有所帮助：

```
.offer {
    /* some stuff */
    padding-right: 25px; /* You have to find a good value */
}
.offer:nth-child(3n) {
    padding-right: 0;
} 
```

如果您不想使用`nth-child()`，您也可以给每第三张图片（.offer）一个额外的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:31:05.157

您可以使用`img.offer:nth-child(3n) { padding-right: 0; }`它来消除每 3 个 img 右侧的填充

# android - 意外的操作栏行为

> ID：14655313
> 
> 赞同：0
> 
> 时间：2013-02-01T21:27:13.457
> 
> 标签：android, android-actionbar

我刚刚更新了我的应用程序以使用带有导航选项卡的**ActionBar和****splitActionBarWhenNarrow**选项，与**ViewPager**集成以允许在选项卡之间滑动。栏中的主页图标和标题被禁用。它在功能上适用于所有配置，但在一种情况下，它并没有像我预期的那样运行。

在纵向配置的智能手机上，操作栏与顶部栏中的选项卡和底部栏中的菜单/操作项分开。当然，我可以通过点击一个标签来选择一个页面，当我从一个页面滑动到另一个页面时，标签选择突出显示（下栏）会移动到选定的标签。到现在为止还挺好。

当我将设备转到横向位置时，我现在在顶部有一个操作栏。操作和溢出菜单图标位于右侧，Android 已将我的选项卡变成左侧的下拉选择器。当我使用选择器更改页面时，这可以正常工作，但是当我从一个页面滑动到另一个页面时，选择器*不会更改*以指示当前选项卡。

我的代码当然不会根据配置而改变，我设置断点以显示**onPageSelected**被调用，它调用**bar.setSelectedNavigationItem**，导致**onTabSelected**被依次调用。所以预期的动作正在发生，但下拉列表中的选择器没有改变。

有什么想法吗？

（对于它的价值，在平板电脑上的横向位置，我得到了另一个变体：一个单独的操作栏，我的选项卡在左侧，操作项在右侧。在这种情况下，滑动时选项卡突出显示正确。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:31:17.753

> 当我使用选择器更改页面时，这可以正常工作，但是当我从一个页面滑动到另一个页面时，选择器不会更改以指示当前选项卡。

正确的。

> 有什么想法吗？

操作栏标签很糟糕。

具体来说，您遇到了[这个错误](http://code.google.com/p/android/issues/detail?id=38500)。如果我正确阅读[Gerrit 页面](https://android-review.googlesource.com/#/c/32492/)，则 Jake 的补丁（或其修改版本）已被接受，因此 Android 4.3/5.0 在这方面可能会正常工作。

# javascript - 以编程方式读取 Microsoft Word 文档

> ID：14655315
> 
> 赞同：5
> 
> 时间：2013-02-01T21:27:21.187
> 
> 标签：javascript, coldfusion, ms-word

我让我的学生将他们的 Microsoft Word 作业提交到 ColdFusion 10 服务器。我想写一个错误检查器来检查常见的错误，比如标题中没有页码、标题页上的学校名称、标题页上的名字等等。我指定了很多 APA 规则. 示例：短语“Running head:”必须出现在第 1 页的页眉部分，但不能出现在论文的其余部分。我为每个规则分配一个点值。

理想情况下，这个错误检查器会在他们提交作业时运行并立即告诉他们。这可能需要使用

```
parser.parseFromString(str, "text/xml"); 
```

但作为替代方案，如果我可以编写一个程序来检查错误，那将有助于自动评分。换句话说，使用 Microsoft Access 或 Visual Studio。但我不想这样做，因为那样我就必须在服务器上安装 Visual Studio，而且我认为这不可行。

最后一种选择是从服务器下载所有论文并在本地运行程序，这比手动评分要好一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:32:15.563

几年前我使用 VBA 完成了此操作，请参阅[本文](http://visualbasic.ittoolbox.com/groups/technical-functional/vb-vba-l/vba-to-read-line-by-line-from-word-document-1821519#M1822258)。这是解析文档每个段落的摘录：

```
Public Sub ParseLines()
    Dim singleLine As Paragraph
    Dim lineText As String

    For Each singleLine In ActiveDocument.Paragraphs
        lineText = singleLine.Range.Text

        '// parse the text here...

    Next singleLine
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:41:27.137

我知道您已经找到了答案，但我认为 Id 会使用 Apache POI 从 word 文档中提取数据。我知道你可以像这样得到页面的标题

```
fis = createObject("java","java.io.FileInputStream").init(ExpandPath('./mydoc.docx'));
document = createObject("java","org.apache.poi.xwpf.usermodel.XWPFDocument").init(fis);
fis.close();

policy = document.getHeaderFooterPolicy();
firstHeader = policy.getFirstPageHeader().getText();
defaultHeader = policy.getDefaultHeader().getText(); 
```

我知道这只是您请求的标题部分。有一种方法可以查看文档来获取偶数和奇数页眉。

[阿帕奇 POI](http://poi.apache.org/apidocs/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T23:50:36.533

试用：

[http://docxextractor.riaforge.org/](http://docxextractor.riaforge.org/)

我提取所有清晰的和一些格式

免责声明：我写的

# xamarin.ios - 获取 [PrologueSnippet] 以处理属性

> ID：14655316
> 
> 赞同：1
> 
> 时间：2013-02-01T21:27:33.387
> 
> 标签：xamarin.ios

我将库绑定到单点触控。就像`NullReferenceException`在单触上发生的一件非常糟糕的事情一样，我想通过抛出一段`System.InvalidOperationException`时间访问一个会抛出的属性来防止它。

对于方法，我使用`[PrologueSnippetAttribute]`. 但由于显而易见的原因，它不适用于属性。我怎么能对属性有相同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:51:56.420

继承`SnippetAttribute`自的 定义与( [generator.cs](https://github.com/mono/maccore/blob/master/src/generator.cs) ) 源代码不匹配。`PrologueSnippetAttribute``btouch`

生成器只处理方法上的属性，而不是属性（即使属性标有`AttributeTargets.Property`）。因此，您需要执行以下操作：

```
[Export ("position")]
PointF Position {
    [PrologueSnippet ("if (!isInitialized) throw new InvalidOperationException ();")]
    get;
    [PrologueSnippet ("if (!isInitialized) throw new InvalidOperationException ();")]
    set;
} 
```

这比复制属性（带有`[Internal]`版本）更好。我*相信*原因是，大多数时候，相同的逻辑不能用于 getter 和 setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:34:18.783

当然，我可以标记属性 [Internal] 并为它编写一个公共代理作为额外代码，如下所示：

在 ApiDefinition.cs

```
...
[Export ("position")]
[Internal]
PointF PositionInt { get; set; }
... 
```

然后在 Extra.cs

```
...
public PointF Position {
    get {
        if (!isInitialized)
            throw new InvalidOperationException ();
        return PositionInt;
    }
    set {
        if (!isInitialized)
            throw new InvalidOperationException ();
        PositionInt = value
    }
}
... 
```

但是更快，更自动化的东西会很好

# python - Plone：当使用自定义工作流程将项目添加到文件夹类型时，用户角色会下降到匿名

> ID：14655318
> 
> 赞同：1
> 
> 时间：2013-02-01T21:27:46.663
> 
> 标签：python, plone, archetypes

我有一个自定义的基于文件夹原型的类型，并附有两种状态的自定义工作流。此类型将子类型限制为“文件”。

一切似乎都有效，除非我（具有“站点管理员”权限的用户）尝试添加文件类型的实例，我能够进入编辑菜单并保存对象，但是当显示该对象的视图时，引发以下访问冲突错误：

```
Unauthorized: Your user account does not have the required permission.
Access to '@@plone_redirector_view' of (SalesProduct at /testsite/testproduct) denied.
Your user account, Anonymous User, exists at (unknown).
Access requires View_Permission, granted to the following roles:
['Manager', 'Owner', 'Reviewer', 'Site Administrator'].
Your roles in this context are ['Anonymous'].
> /home/alex/projects/eggs/AccessControl-2.13.7-py2.6-linux-x86_64.egg/AccessControl/ImplPython.py(797)raiseVerbose()
-> raise Unauthorized(text) 
```

子对象也不显示工作流菜单。

关于文件夹类型支持有类似的问题[如何在 Plone 中直接发布我的容器类型的子项？](https://stackoverflow.com/questions/6679530/how-to-directly-publish-only-child-items-of-my-container-type-in-plone)但它并没有解决问题，因为在我的情况下，它似乎更像是权限问题而不是工作流程问题。

更新：权限问题掩盖了真正的问题。检查堆栈跟踪以修复它。谢谢马丁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:18:52.197

授权错误掩盖了真正的错误信息。解决方案：在触发授权错误之前检查堆栈并添加一个调试点。

谢谢马丁！

# linq-to-sql - Linq to Sql 缓存

> ID：14655325
> 
> 赞同：1
> 
> 时间：2013-02-01T21:28:03.150
> 
> 标签：linq-to-sql

我在 Linq DataContext 周围有一个装饰器，我想将其用于缓存。存储库返回映射数据库类型之一的 IQueryable。如果我的意图是提高性能，这是一个好主意吗？有时，该方法将返回一个来自 List 的 IQueryable，而其他时候，它会直接来自 DataContext。使用此配置，某些查询会因 Stackoverflow 异常而崩溃。

查询：

```
 IDataContext ctx = DataContextFactory.ctx();
     IQueryable<PositionsVF> positions = from p in ctx.Repository<PositionsVF>()
                                         from c in ctx.Repository<ConfigurationPortefeuillesModule>()

                                         where c.Module.Module1 == ListeModules.POSITIONS_VF.ToString() &&
                                         p.NoPortefeuille_FK == c.NoPortefeuille_FK && 
                                         p.PortefeuillesSpecialise.Categorie != "REGROUPEMENT" &&
                                         p.NoFond_FK == fonds &&
                                         p.Date == dateDonneeBD

                                         orderby c.Ordre
                                         select p; 
```

编码：

```
 Dictionary<string, List<object>> CachedTables = new Dictionary<string, List<object>>();

  // Small tables which are queried against a lot.
  List<string> ShouldCache = new List<string>() { 
     //typeof(DerniersSoldesDAV).Name,
     //typeof(Fond).Name,
     //typeof(PortefeuillesSpecialise).Name,
     //typeof(PortefeuillesSuperposition).Name,
     //typeof(PositionsVF).Name,
     //typeof(PoidsACWI).Name,
     //typeof(PositionsSASMurex).Name,
     //typeof(TypesCompte).Name,
     //typeof(TypesMontant).Name,
     //typeof(Module).Name,

     typeof(CorrespondanceIndice).Name,
     typeof(CorrespondancePortefeuille).Name,
     //typeof(CorrespondancePortefeuillesPGP).Name,
     //typeof(CorrespondanceRegroupement).Name,
     //typeof(CorrespondancesPortefeuillesSuperposition).Name,

     //typeof(ConfigurationFondsModule).Name,
     //typeof(ConfigurationIndicesModule).Name,
     //typeof(ConfigurationPortefeuillesFondsModule).Name,
     //typeof(ConfigurationPortefeuillesModule).Name,

  };

  public IQueryable<T> Repository<T>() where T : class
  {
     ITable table = _context.GetTable(typeof(T));
     string typeName = typeof(T).Name;

     if (ShouldCache.Contains(typeName))
     {
        // Load the mini table.
        if (! CachedTables.ContainsKey(typeName))
        {
           var tableRows = table.Cast<T>().ToList();
           CachedTables.Add(typeName, tableRows.Cast<object>().ToList());
        }

        return CachedTables[typeName].Cast<T>().AsQueryable();
     }

     return table.Cast<T>();
  } 
```

# mod-rewrite - mod_rewrite, $_GET 不传递变量

> ID：14655329
> 
> 赞同：0
> 
> 时间：2013-02-01T21:28:22.857
> 
> 标签：mod-rewrite, get

我正在尝试制作

```
domain.com/notalone/viewpost/5/ 
```

充当

```
domain.com/notalone/viewpost.php?id=5 
```

我当前的 .htaccess 是这样的：

```
RewriteEngine On

RewriteRule ^notalone/viewpost/([0-9]+)/?$ /viewpost.php?id=$1 [QSA] 
```

目前，您访问时页面正常加载`/notalone/viewpost/5/`但未**通过`$_GET['id']`**

**我尝试过的事情**：

*   添加`Options -Multiviews`--->*导致404*
*   使用`Rewritebase /`--->*没有效果*
*   `RewriteRule ^viewpost/([0-9]+)/?$ /viewpost.php?id=$1 [QSA]`--->*没有效果*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:37:57.573

尝试添加传递标志，如下所示：

```
RewriteRule ^notalone/viewpost/([0-9]+)/?$ /viewpost.php?id=$1 [QSA,PT] 
```

'PT' 调整内部 URL，以便以后的处理程序看到 mod_rewrite 工作的结果，而不是原始 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:21:56.777

解决了这个问题。问题显然是我的目录的问题，因为当我将网站移动到它自己的主机（它自己的根目录而不是 notalone 子目录）时，一切似乎都像一个魅力。

# android - Android：Alpha动画未启动

> ID：14655332
> 
> 赞同：3
> 
> 时间：2013-02-01T21:28:53.430
> 
> 标签：android, animation, button, alpha

在我的菜单中，我试图实现一个按钮，当单击该按钮时，会使用 alpha 动画显示另一个按钮。

```
 final Animation animAlphaUp = new AlphaAnimation(0.0f, 1.0f);
    animAlphaUp.setDuration(200);

    ImageButton start_button = (ImageButton) findViewById(R.id.start_button);
    ImageButton options_button = (ImageButton) findViewById(R.id.options_button);
    final ImageButton mute_button = (ImageButton) findViewById(R.id.options_button);

    options_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mute_button.startAnimation(animAlphaUp);
        }
    });

    mute_button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {   
        }
    }); 
```

但是当单击选项按钮时没有任何反应。动画有效，我知道这一点，因为如果我写这个：

```
options_button.setOnClickListener(new View.OnClickListener() {      
    @Override
    public void onClick(View v) {
       options_button.startAnimation(animAlphaUp);
    }
}); 
```

动画适用于单击的按钮。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T10:44:16.527

尝试`your_button_name.startAnimation(your_animation_name);`改用。

为我工作。

# bash - 在 BASH 中重新排列列表

> ID：14655334
> 
> 赞同：1
> 
> 时间：2013-02-01T21:29:03.853
> 
> 标签：bash, awk

我有一个像这样的文件：

文件.dat

```
1 2
1 3
2 1
2 4
2 3
3 4 
```

左列已排序。我想写一个新文件，如下所示：

```
1 2 3
2 1 4 3
3 4 
```

第一列应该是 file.dat 的左列编号，旁边是右列编号。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:41:23.243

```
#!/bin/bash
awk -f <(cat - <<-'EOF'
  {
    b[$1, a[$1]++] = $2;
  }
  END {
    for (i in a) {
      printf "%d ", i;
      for (j = 0; j < a[i]; j++) {
        printf "%d ", b[i, j];
      }
      print ""
    }
  }
EOF
) < /dev/stdin 
```

输出：

```
$ ./script.sh < file.dat 
1 2 3 
2 1 4 3 
3 4 
```

该脚本将与`awk`. 名称如果`file.awk`：

```
{
    b[$1, a[$1]++] = $2;
}
END {
    for (i in a) {
        printf "%d ", i;
        for (j = 0; j < a[i]; j++) {
            printf "%d ", b[i, j];
        }
        print ""
    }
} 
```

像这样运行：

```
 awk -f file.awk < file.dat 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T01:15:59.110

这些答案不需要将整个文件存储在内存中。它们都要求对文件进行排序。

awk：

```
awk '
    $1 != prev {
        if (NR > 1) print ""
        printf "%d %d", $1, $2
        prev=$1
        next
    } 
    {printf " %d", $2} 
    END {print ""}
' file.dat 
```

等效的bash：

```
prev=""
while read a b; do
    if [[ $prev != $a ]]; then
        [[ -n $prev ]] && echo
        printf "%d %d" $a $b
        prev=$a
    else
        printf " %d" $b
    fi
done < file.dat
echo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T00:01:46.133

好吧，您已经接受了答案。但是，我想为您的有趣问题添加另一个更简单（也许）的简短单行。

```
awk '$1 in a{a[$1]=a[$1]" "$2;next}{a[$1]=$0}END{for(i in a)print a[i]}' file 
```

看到它与您的示例一起使用：

```
kent$  cat test.txt
1 2
1 3
2 1
2 4
2 3
3 4

kent$  awk '$1 in a{a[$1]=a[$1]" "$2;next}{a[$1]=$0}END{for(i in a)print a[i]}' test.txt
1 2 3
2 1 4 3
3 4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-02T07:35:30.967

这也有效

`awk '{a[$1]=a[$1]$2" "} END {for (i in a) {print i,a[i]}}' temp.txt`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T01:00:43.397

这是一种使用方法`awk`：

```
awk '{ a[$1] = (a[$1] ? a[$1] FS : "") $2 } END { for (i in a) print i, a[i] | "sort" }' file 
```

结果：

```
1 2 3
2 1 4 3
3 4 
```

# php - 共享网站链接中显示的根目录

> ID：14655337
> 
> 赞同：0
> 
> 时间：2013-02-01T21:29:07.863
> 
> 标签：php, html, facebook

当一个人通过在 fb 上的状态更新中输入网址来分享网站[http://www.fatboyscharity.co.uk/](http://www.fatboyscharity.co.uk/)的链接时，该网站的链接下方会显示以下内容：-

:require(connect.php)[function.require]: 无法打开流：/websites/folder/another_folder/.....etc.../public_html 中没有这样的文件或目录

我真的很担心我的数据库连接的直接链接被显示给全世界在 facebook 上看到 - 特别是因为文件确实存在！

这似乎发生在分享链接的人身上，我们甚至没有尝试在实际网站上实现任何 facebook 的东西。

网站的索引页面由许多包含的 php 文件（例如 head.php、content.php、foot.php 一起组成一个页面）制成，其中一些或全部调用其他文件的函数。

我以前从未见过这种情况发生，并且确实需要以某种方式阻止它。

任何帮助表示赞赏。

谢谢

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:35:45.930

好吧，它试图找到**connect.php**文件但找不到它。这就是错误信息的尖叫。无论如何，在尝试在代码的任何部分打开文件之前，您需要使用**file_exists**检查文件是否确实存在，然后使用它，这样您就可以避免在不同的页面上产生这种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:38:52.030

确保 connect.php 位于正确的文件夹中并且可读，并禁用错误：

```
 <?php display_errors(false); 
```

此外，您不必担心连接的详细信息被暴露，只要您的文件以 .php 结尾（并且您将其放入有效的 php 代码中......）

# c++ - c++和python中的for循环

> ID：14655339
> 
> 赞同：3
> 
> 时间：2013-02-01T21:29:17.960
> 
> 标签：c++, python, for-loop

我对python很陌生。我对c++和python中的for循环有一个小查询。在c，c++中，如果我们`i`如下例所示修改变量，则新值会`i`反映在下一次迭代中，但事实并非如此在python中的for循环中。所以，当真的需要跳过一些迭代而不实际使用诸如`continue`等之类的函数时，如何在python中处理它。

`for loop in c++`

```
for(int i=0;i<5;++i)
{   
   if(i==2)
    i=i+2;

   cout<<i<<endl;
} 
```

`Output`

```
0

1

4 
```

`for loop in python`

```
for i in range(5):
     if i==2:
        i=i+2
     print i 
```

`Output`

```
0

1

4

3

4 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:36:45.117

我一般建议不要在 C++ 中修改迭代变量，因为它会使代码难以理解。

在 python 中，如果您事先知道要迭代哪些值（并且它们数量不多！），您可以构建一个列表。

```
for i in [0,1,4]:
    print i 
```

当然，如果您真的必须更改 Python 中的迭代变量，您可以使用 while 循环来代替。

```
i = 0
while i < 5:
    if i==2:
        i=i+2
    print i
    i = i + 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T21:31:12.087

这是因为在 python 中，在循环的每次迭代中，变量`i`都被选为`range(5)`. 但是，在 C++ 中，变量`i`由循环增量*和*循环内发生的事情管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:31:21.703

在循环的每次迭代中都将`i`变量设置为迭代器的输出`range(5)`。尽管您可以在循环中进行修改，但它会被覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T21:31:22.553

`i`每次迭代都会重置，这意味着对 i 的任何突变都会在下一个循环中被忽略。正如 Daniel Fischer 在评论中所说，如果您想在 Python 中执行此操作，请使用 while 循环。

就像是：

```
for (int i = 0; i < 5; ++i) {
    int x = i;
    if (x == 2) {
        x = x + 2;
    }
    std::cout << x << std::endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T21:31:16.903

这是因为`range(5)`是`[0,1,2,3,4]`,`for i in range(5)`是因此`for i in [0,1,2,3,4]`

# perl - 为什么 Perl 的 DateTime 在尝试使用“小时”选项添加（）时间时会抛出错误？

> ID：14655340
> 
> 赞同：2
> 
> 时间：2013-02-01T21:29:21.610
> 
> 标签：perl

我正在尝试在当前时间上增加一个小时，但出现错误。

我的代码片段是

```
use DateTime;
my $now=DateTime->now(
     time_zone=> 'America/Los_Angeles');
$now->add( hour=>1 ); 
```

我得到的错误是：

```
The following parameter was passed in the call to DateTime::Duration::new but was not listed in the validation options: day at c:\strawberry....
DateTime::Duration::new(undef, 'day', 1) called at c:\strawberry.... 
DateTime::add('DateTime=HASH(0x2e49ae0)', 'day', 1) called at tester.pl line 6 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:38:44.550

查看方法文档：[`DateTime`](http://search.cpan.org/perldoc?DateTime) `add`

> $dt->add(DateTime::Duration->新参数)
> 
> 此方法是 add_duration() 方法的语法糖。它只是使用给定的参数创建一个新的 DateTime::Duration 对象，然后调用 add_duration() 方法。

哦，所以这就像调用 add_duration。方法说明了什么`DateTime->add_duration`？

> $dt->add_duration($duration_object)
> 
> 此方法将 DateTime::Duration 添加到当前日期时间。有关更多详细信息，请参阅 DateTime::Duration 文档。

啊，我们需要 DateTime::Duration 的参数。那些是什么？

[http://metacpan.org/pod/DateTime::Duration](http://metacpan.org/pod/DateTime::Duration)

```
use DateTime::Duration;

$dur = DateTime::Duration->new(
   years       => 3,
   months      => 5,
   weeks       => 1,
   days        => 1,
   hours       => 6,
   minutes     => 15,
   seconds     => 45,
   nanoseconds => 12000
); 
```

哦，`hour`不`hours`。利用

```
$now->add( hours => 1 ); 
```

反而！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:35:15.580

通过将您的呼叫更改为

```
$now->add( hours => 1 ); 
```

# tfs - TFS - 如何在我的测试开始之前运行应用程序？

> ID：14655341
> 
> 赞同：0
> 
> 时间：2013-02-01T21:29:39.700
> 
> 标签：tfs, automated-tests, microsoft-test-manager

我正在使用 Lab Center + TFS 2012 运行我的自动化 GUI 测试。我注意到有一个选项可以在测试开始之前和之后运行脚本：

![实验室中心配置](../Images/1dff1e4e6e23e91d518c2a6769441cc1.png)

*   使用此选项可以运行什么类型的脚本？它是一个VB脚本还是什么？
*   是否可以运行应用程序而不是脚本？

我想在测试开始之前使用此选项恢复数据库，因为我有 2 个测试代理并且它们连接到同一个数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:59:01.500

该脚本可以是任何文本文件，它具有以 (.bat) 扩展名或 Powershell 脚本保存的命令行批处理，当然您可以从该文件调用任何 exe，但首先您需要导航到该 exe 的路径，或者只是在 Windows 的**环境变量**中声明该路径，这是一个带有 (.bat) 扩展名的文件示例，它将播放 Windows Media Player。

> cd "程序文件"
> 
> cd "Windows 媒体播放器"
> 
> wmplayer.exe

您也可以根据需要打开它并发送参数。

# c# - UTF-8 对字节顺序敏感吗？

> ID：14655346
> 
> 赞同：1
> 
> 时间：2013-02-01T21:30:09.000
> 
> 标签：c#, .net, utf-8, uuid, endianness

所以我需要生成一个带有字符串的 UUID 作为哈希函数的输入。

据我了解，MS 的 GUID 实现不是字节序可移植的，因此没有正确实现 RFC 4122。所以我想知道通过将 .NET System.Security.Cryptography.SHA1Managed().ComputeHash(data) 函数传递一个 UTF-8 字符串，我是否落入了基本相同的陷阱。

我相信我很好，因为维基百科似乎表明字节顺序对 UTF-8 无关紧要，并且字节顺序标记本质上被降级为标头，以表示字符串采用 UTF-8 格式。

编辑：注意我正在尝试使用 UTF-8 字符串作为 UUID 中使用的哈希的种子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:55:27.667

字节数组没有字节序问题。每个人都同意数组中的第一个元素具有最低地址，无论机器架构如何。Guid 不是字节数组，它是具有非字节字段的结构。因此对字节序很敏感。

一个 utf-8 编码的字符串是一个 byte[]。ComputeHash() 需要一个字节[]。因此，它们对字节顺序不敏感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:32:50.543

UTF8 没有多字节顺序。
相反，UTF8 规范精确定义了用于编码非 ASCII 字符的字节顺序。

但是，您不能将任意散列解析为 UTF8。

# http - 它可能是一个正确的 http 查询字符串吗？

> ID：14655347
> 
> 赞同：0
> 
> 时间：2013-02-01T21:30:13.570
> 
> 标签：http, url, char, uri, restrictions

URL 中允许使用哪些字符有任何限制吗？

例如这样的字符串：

`http://localhost:8080/auth.dll?[session_id]={762308e9-9c89-47d2-b68f-220dedd0631a}`

是否允许使用字符：`[, ], {, }`

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:31:54.613

您可以使用`[]`但不能使用`{}`. 如果你想在你的 URL 中使用后者，你必须对它们进行编码。使用`%7b`代替`{`和`%7d`代替`}`。

也就是说，某些浏览器可能都不喜欢`[]`它们，因此您也可以对它们进行编码。但是，我会考虑为什么要在变量名中使用可能的数组描述符，如果可以避免这样做，它们会这样做。即使它解析正确，接收此查询字符串的服务器也会出现一些其他问题。

# transactions - 事务范围如何与 `openCursor()` 一起工作？

> ID：14655349
> 
> 赞同：1
> 
> 时间：2013-02-01T21:30:14.870
> 
> 标签：transactions, indexeddb

我有以下代码：

```
transaction = db.transaction("myStore", "readwrite");
objStore = transaction.objectStore(myStore);
Index = objStore.index(key);
request = Index.openCursor(field);
request.onsuccess = function(event) {
  var cursor = event.target.result;
  if (cursor) {
    request = objStore.delete(cursor.value.key);
    request.onsuccess = function(event) {
      console.log("delete successful");
      return;
    }; 
```

交易范围是“myStore”。
我可以继续引用事务以使其保持[活动](https://stackoverflow.com/questions/10385364/how-do-you-keep-an-indexeddb-transaction-alive/10405196#10405196)状态，以便递归删除返回的游标数据。

这是否意味着因为它始终是同一个事务，所以删除数据的任何问题都会回滚所有已删除的事务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T13:22:17.943

事务确保为获得一致状态而需要发生的几个操作是成功的。如果一个失败，意味着你会得到一个不一致的状态，它需要回滚到原始状态。举个具体的例子。如果您将资金从一个帐户转移到另一个帐户，则只有在两个余额中的某些余额相同的情况下，您才能拥有一致的状态。这意味着当一个值从一个帐户中重新提取时，必须将其添加到另一个帐户才能获得一致的状态。如果两者之一失败，则交易将恢复到原始状态。

因此，为了性能或其他目的而保持事务处于活动状态并不是一个好的选择。在 indexeddb API 中，事务也是自动提交的。这意味着当事务不包含任何操作或处于非活动状态时，它将提交更改。

作为最后一点，你的问题。如果在同一事务中删除失败，则在同一事务中执行的所有删除都将回滚。如果您不希望这种行为，您将需要创建多个事务。

# backbone.js - 使用 Backbone Relational+Mongoose，我如何 RESTfully 保存作为模型属性的集合？

> ID：14655355
> 
> 赞同：1
> 
> 时间：2013-02-01T21:31:06.327
> 
> 标签：backbone.js, mongoose, backbone-relational

在主干中，我有一个具有以下结构的模型：

```
m.Survey = m.BaseModel.extend({
        initialize: function() {
            this.saveInvites = _.debounce(this.saveInvites, 1000);
        },
        /**
         * What should this function do?!
         * @return {[type]}
         */
        saveInvites: function(){

        },
        urlRoot: '/api/surveys',
        relations: [{
            type: Backbone.HasMany,
            key: 'invites',
            relatedModel: 'APP.Models.SurveyInvite',
            collectionType: 'APP.Collections.SurveyInvites',
            //save invites separately
            includeInJSON: false, 
            reverseRelation: {
                key: 'survey',
                //We don't want to list the survey when doing toJSON()
                includeInJSON: false
            }
        }]
}); 
```

在服务器端我有相同的架构

```
var SurveyInviteSchema = new Schema({
    account: {type: Schema.Types.ObjectId, ref: 'Account', required: true},
    survey: {type: Schema.Types.ObjectId, ref: 'Survey', required: true},
    key: String 
});

var SurveySchema = new Schema({
    start_date: Date,
    end_date: Date,
    title: String,
    invites: [SurveyInviteSchema],
}); 
```

在我的应用程序中，我创建了邀请模型的集合，然后需要将邀请列表发送到服务器以进行保存。稍后我可能会发送一个新集合来更新邀请（删除或添加）。

1.  我如何告诉 Backbone 仅将邀请属性发送到服务器（例如 /api/survey/[id]/invites
2.  如何告诉服务器清除邀请数组并将其替换为调查输入
3.  服务器应该返回什么到 Backbone，以便它在 Backbone Relational 中正确更新（为我的邀请提供正确的 ID）。

# python - Python 利用拆分列表

> ID：14655382
> 
> 赞同：0
> 
> 时间：2013-02-01T21:32:53.500
> 
> 标签：python, list, if-statement, split, tuples

我如何在 Python 中使用列表的第二部分？

例如，列表包含一个字符串和整数：

```
('helloWorld', 20)
('byeWorld', 10)
('helloagainWorld', 100) 
```

我希望在列表的第二部分（整数）上创建一个 if 语句，最好不要创建一个新列表来存储整数。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:33:54.293

只使用索引

```
>>> a = ('helloWorld', 20)
>>> a[1]
20
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:34:09.363

使用索引：

```
>>> a = (1,2)
>>> a[0]
1
>>> a[1]
2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:36:44.143

您可以使用函数来获取第二个元素`tuple`或使用类似的东西[`operator.itemgetter`](http://docs.python.org/2/library/operator.html#operator.itemgetter)，这是该文档中给出的示例：

```
>>> inventory = [('apple', 3), ('banana', 2), ('pear', 5), ('orange', 1)]
>>> getcount = itemgetter(1)
>>> map(getcount, inventory)
[3, 2, 5, 1]
>>> sorted(inventory, key=getcount)
[('orange', 1), ('banana', 2), ('apple', 3), ('pear', 5)] 
```

# php - PHP：在从 Child 类中调用的 Abstract 方法中调用 property_exists() 函数

> ID：14655384
> 
> 赞同：0
> 
> 时间：2013-02-01T21:32:55.653
> 
> 标签：php, abstract-class, abstract

我想在 Abstract 类中创建 setProperties() 方法，如下所示：

```
public function setProperties($array = null) {

        if (!empty($array)) {
            foreach($array as $key => $value) {
                if (property_exists($this, $key)) {
                    $this->{$key} = $value;
                }
            }
        }

    } 
```

我不太确定的是我是否能够在从这个抽象类继承的类中使用它来设置继承的属性以及特定的子类。

我不确定是否应该在 property_exists() 函数中使用任何其他关键字然后 $this - 也许有一种方法可以使用后期静态绑定 (static::) 关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:36:38.920

`$this`是特定于实例的，因此`property_exists`可以与子类一起正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:43:08.383

您的代码应该基本上可以工作。想象一下这个简单的例子，它输出了两次`true`：

```
abstract class A {

    protected $var1;

    public function exists1() {
        var_dump(property_exists($this, 'var2'));
    }

}

class B extends A {

    protected $var2;

    public function exists2() {
        var_dump(property_exists($this, 'var1'));
    }
}

$o = new B();

$o->exists1();
$o->exists2(); 
```

如您所见，`property_exists()`当子类从父类访问成员时有效，反之亦然，当父类试图访问子类的成员时。

这是抽象的基本概念之一。您正在尝试做的事情绝对没问题。无论如何，如果您遇到错误，那一定是一些被监督的细节

# c# - CustomReflectionContext如何返回动态属性

> ID：14655385
> 
> 赞同：0
> 
> 时间：2013-02-01T21:32:56.453
> 
> 标签：c#, .net, reflection, .net-4.5

我想`Object.GetType()`用我自己的一个来隐藏原件

例如，而不是：

```
[MyCustomAttribute]
public class @Class
{
} 
```

我想动态生成属性，例如：

```
public class @Class
{
     public new Type GetType(){
           return new MyCustomTypeContext().Map(base.GetTypeinfo())
     }
} 
```

`MyCustomTypeContext`将原始类型从哪里包装起来`GetType()`，这样当您调用时`myClassInstance.GetType().Attributes`，我可以在运行时为调用者​​提供一个实例`MyCustomAttribute`（而不是像前一种情况那样静态绑定）。

我一直在研究默认实现，但一无所获，我可以在原始类型实现上创建一个代理——但那工作量太大了。希望有人能够优雅地解决这个问题。

# javascript - 可滚动的 GridView 不适用于 ASP.Net 中的 UpdatePanel

> ID：14655389
> 
> 赞同：2
> 
> 时间：2013-02-01T21:33:07.353
> 
> 标签：javascript, jquery, asp.net, asp.net-ajax

我有 jQuery 函数，它允许我的 gridview 滚动，但是当我添加更新面板时，滚动条消失了，结果只是填满了整个页面。当我添加一个更新面板的触发按钮时，这个问题就发生了。这是我页面标题部分的内容：

```
<script src="Scripts/gridviewScroll.min.js" type="text/javascript"></script>
<script src="Scripts/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $(document).ready(function () {
        gridviewScroll();
    });
    function gridviewScroll() {
        $('#gvMain').gridviewScroll({
            width: 900,
            height: 500,
            arrowsize: 30,
            varrowtopimg: "Images/arrowvt.png",
            varrowbottomimg: "Images/arrowvb.png",
            harrowleftimg: "Images/arrowhl.png",
            harrowrightimg: "Images/arrowhr.png"
        });
    } 
```

这是我的标记：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>

   <div> 

 <asp:GridView ID="gvMain" runat="server" Width="100%" AutoGenerateColumns="False" 
    ......
..........

</asp:GridView> 

    </div>    
     </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnClick" />
        </Triggers>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:09:06.170

那是因为您正在通过 ajax 更新网格，并且当您这样做时，DOM 会被更改，并且您所做的修改会丢失。您需要在每次部分更新后调用 gridviewScroll() 方法来维护更新前已应用的样式。为此，请尝试以下操作：

```
$(document).ready(function () {
    gridviewScroll();
});

Sys.WebForms.PageRequestManager.getInstance().add_endRequest(function(evt, args) {
    gridviewScroll();
}); 
```

这样，在每次部分更新后，都会重新应用样式，因此滚动。

# php - 从 php 读取 XML+RDF 文档

> ID：14655393
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:33:23.197
> 
> 标签：php, xml, rdf

我得到了这个 XML 示例，当它在我的网站上冲浪时从手机中提取，现在我需要从 <prf:CcppAccept 中提取参数 < prf:ScreenSize>320x240< /prf:ScreenSize> 和所有> 参数。

完整文件在这里： http: [//nds1.nds.nokia.com/uaprof/NokiaX2-01r100.xml](http://nds1.nds.nokia.com/uaprof/NokiaX2-01r100.xml)

到目前为止，我已经尝试过，但一点运气都没有，

```
$RDF = file_get_contents("http://nds1.nds.nokia.com/uaprof/NokiaX2-01r100.xml");
$RDF = str_replace('rdf:', 'rdf_', $RDF);
$RDF = str_replace('prf:', 'prf_', $RDF);
$RDF = str_replace('pss6:', 'pss6_', $RDF);

$XML = simplexml_load_string($RDF);print_r($XML);
foreach ($XML->RDF_Description as $num => $description) {
  $attributes = $description->attributes();
  if (isset($attributes['prf_ScreenSize'])) {
    echo "Screen Size = {$attributes['prf_ScreenSize']}; CcppAccept =
{$attributes['rdf_li']}";
  }
} 
```

RDF 文件：

```
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:prf="http://www.openmobilealliance.org/tech/profiles/UAPROF/ccppschema-20021212#" xmlns:mms="http://www.openmobilealliance.org/tech/profiles/MMS/ccppschema_mms-v1_3#" xmlns:pss6="http://www.3gpp.org/profiles/PSS/ccppschema-PSS6#">
<rdf:Description rdf:ID="Profile">
<prf:component>
<rdf:Description rdf:ID="HardwarePlatform">
<rdf:type rdf:resource="http://www.openmobilealliance.org/tech/profiles/UAPROF/ccppschema-20021212#HardwarePlatform"/>
<prf:BluetoothProfile>
<rdf:Bag>
<rdf:li>Advanced Audio Distribution Profile</rdf:li>
<rdf:li>Dial-Up Network Profile</rdf:li>
<rdf:li>FileTransfer Profile</rdf:li>
<rdf:li>Generic Access Profile</rdf:li>
<rdf:li>Generic Object Exchange Profile</rdf:li>
<rdf:li>Hands-Free Profile</rdf:li>
<rdf:li>Headset Profile</rdf:li>
<rdf:li>Object Push Profile</rdf:li>
<rdf:li>Phonebook Access Profile</rdf:li>
<rdf:li>Serial Port Profile</rdf:li>
<rdf:li>Service Discovery Application Profile</rdf:li>
<rdf:li>SIM Access Profile</rdf:li>
<rdf:li>PAN NAP-Role</rdf:li>
</rdf:Bag>
</prf:BluetoothProfile>
<prf:BitsPerPixel>18</prf:BitsPerPixel>
<prf:ColorCapable>Yes</prf:ColorCapable>
<prf:CPU>ARM</prf:CPU>
<prf:ImageCapable>Yes</prf:ImageCapable>
<prf:InputCharSet>
<rdf:Bag>
<rdf:li>ISO-8859-1</rdf:li>
<rdf:li>ISO-10646-UCS-2</rdf:li>
<rdf:li>US-ASCII</rdf:li>
<rdf:li>UTF-8</rdf:li>
</rdf:Bag>
</prf:InputCharSet>
<prf:Keyboard>PhoneKeyPad</prf:Keyboard>
<prf:Model>Nokia X2-01</prf:Model>
<prf:NumberOfSoftKeys>3</prf:NumberOfSoftKeys>
<prf:OutputCharSet>
<rdf:Bag>
<rdf:li>ISO-8859-1</rdf:li>
<rdf:li>ISO-10646-UCS-2</rdf:li>
<rdf:li>US-ASCII</rdf:li>
<rdf:li>UTF-8</rdf:li>
</rdf:Bag>
</prf:OutputCharSet>
<prf:PixelAspectRatio>1x1</prf:PixelAspectRatio>
<prf:ScreenSize>320x240</prf:ScreenSize>
<prf:ScreenSizeChar>15x16</prf:ScreenSizeChar>
<prf:StandardFontProportional>Yes</prf:StandardFontProportional>
<prf:SoundOutputCapable>Yes</prf:SoundOutputCapable>
<prf:TextInputCapable>Yes</prf:TextInputCapable>
<prf:Vendor>Nokia</prf:Vendor>
<prf:VoiceInputCapable>Yes</prf:VoiceInputCapable>
</rdf:Description>
</prf:component>
<prf:component>
<rdf:Description rdf:ID="SoftwarePlatform">
<rdf:type rdf:resource="http://www.openmobilealliance.org/tech/profiles/UAPROF/ccppschema-20021212#SoftwarePlatform"/>
<prf:AcceptDownloadableSoftware>Yes</prf:AcceptDownloadableSoftware>
<prf:AudioInputEncoder>
<rdf:Bag>
<rdf:li>AMR</rdf:li>
<rdf:li>EFR</rdf:li>
<rdf:li>FR</rdf:li>
</rdf:Bag>
</prf:AudioInputEncoder>
<prf:CcppAccept>
<rdf:Bag>
<rdf:li>application/java</rdf:li>
<rdf:li>application/java-archive</rdf:li>
<rdf:li>application/m3g</rdf:li>
<rdf:li>application/sdp</rdf:li>
<rdf:li>application/vnd.ms-wmdrm.lic-chlg-req</rdf:li>
<rdf:li>application/vnd.ms-wmdrm.lic-resp</rdf:li>
<rdf:li>application/vnd.ms-wmdrm.meter-chlg-req</rdf:li>
<rdf:li>application/vnd.ms-wmdrm.meter-resp</rdf:li>
<rdf:li>application/vnd.nokia.flashlite-archive</rdf:li>
<rdf:li>application/vnd.nokia.headwrap</rdf:li>
<rdf:li>application/vnd.nokia.radio-preset</rdf:li>
<rdf:li>application/vnd.nokia.ringing-tone</rdf:li>
<rdf:li>application/vnd.nok-s40theme</rdf:li>
<rdf:li>application/vnd.nokia.swupd.dp2</rdf:li>
<rdf:li>application/vnd.oma.dd+xml</rdf:li>
<rdf:li>application/vnd.oma.drm.content</rdf:li>
<rdf:li>application/vnd.oma.drm.dcf</rdf:li>
<rdf:li>application/vnd.oma.drm.message</rdf:li>
<rdf:li>application/vnd.oma.drm.rights+wbxml</rdf:li>
<rdf:li>application/vnd.oma.drm.rights+xml</rdf:li>
<rdf:li>application/vnd.oma.drm.ro+xml</rdf:li>
<rdf:li>application/vnd.oma.drm.roap-pdu+xml</rdf:li>
<rdf:li>application/vnd.oma.drm.roap-trigger+xml</rdf:li>
<rdf:li>application/vnd.syncml.dm+wbxml</rdf:li>
<rdf:li>application/vnd.syncml.notification</rdf:li>
<rdf:li>application/vnd.syncml+wbxml</rdf:li>
<rdf:li>application/vnd.syncml+xml</rdf:li>
<rdf:li>application/vnd.wap.cert-response</rdf:li>
<rdf:li>application/vnd.wap.connectivity-wbxml</rdf:li>
<rdf:li>application/vnd.wap.hashed-certificate</rdf:li>
<rdf:li>application/vnd.wap.mms-message</rdf:li>
<rdf:li>application/vnd.wap.sic</rdf:li>
<rdf:li>application/vnd.wap.signed-certificate</rdf:li>
<rdf:li>application/vnd.wap.slc</rdf:li>
<rdf:li>application/vnd.wap.wmlc</rdf:li>
<rdf:li>application/vnd.wap.wmlscriptc</rdf:li>
<rdf:li>application/vnd.wap.xhtml+xml</rdf:li>
<rdf:li>application/wml+xml</rdf:li>
<rdf:li>application/xhtml+xml</rdf:li>
<rdf:li>application/x-java-archive</rdf:li>
<rdf:li>application/x-shockwave-flash</rdf:li>
<rdf:li>application/x-wap-prov.browser-bookmarks</rdf:li>
<rdf:li>application/x-x509-ca-cert</rdf:li>
<rdf:li>audio/3gpp</rdf:li>
<rdf:li>audio/3gpp2</rdf:li>
<rdf:li>audio/aac</rdf:li>
<rdf:li>audio/amr</rdf:li>
<rdf:li>audio/amr-wb</rdf:li>
<rdf:li>audio/mid</rdf:li>
<rdf:li>audio/midi</rdf:li>
<rdf:li>audio/mobile-xmf</rdf:li>
<rdf:li>audio/mp3</rdf:li>
<rdf:li>audio/mp4</rdf:li>
<rdf:li>audio/mpeg</rdf:li>
<rdf:li>audio/sp-midi</rdf:li>
<rdf:li>audio/wav</rdf:li>
<rdf:li>audio/x-amr</rdf:li>
<rdf:li>audio/x-mid</rdf:li>
<rdf:li>audio/x-midi</rdf:li>
<rdf:li>audio/x-ms-wma</rdf:li>
<rdf:li>audio/x-wav</rdf:li>
<rdf:li>image/bmp</rdf:li>
<rdf:li>image/gif</rdf:li>
<rdf:li>image/jpeg</rdf:li>
<rdf:li>image/jpg</rdf:li>
<rdf:li>image/pjpeg</rdf:li>
<rdf:li>image/png</rdf:li>
<rdf:li>image/svg+xml</rdf:li>
<rdf:li>image/vnd.nok-oplogo-color</rdf:li>
<rdf:li>image/vnd.nok-wallpaper</rdf:li>
<rdf:li>image/vnd.wap.wbmp</rdf:li>
<rdf:li>multipart/mixed</rdf:li>
<rdf:li>text/css</rdf:li>
<rdf:li>text/ecmascript</rdf:li>
<rdf:li>text/html</rdf:li>
<rdf:li>text/plain</rdf:li>
<rdf:li>text/vnd.sun.j2me.app-descriptor</rdf:li>
<rdf:li>text/vnd.wap.co</rdf:li>
<rdf:li>text/vnd.wap.si</rdf:li>
<rdf:li>text/vnd.wap.sl</rdf:li>
<rdf:li>text/vnd.wap.wml</rdf:li>
<rdf:li>text/vnd.wap.wmlscript</rdf:li>
<rdf:li>text/x-co-desc</rdf:li>
<rdf:li>text/x-vCalendar</rdf:li>
<rdf:li>text/x-vCard</rdf:li>
<rdf:li>video/3gpp</rdf:li>
<rdf:li>video/3gpp2</rdf:li>
<rdf:li>video/mp4</rdf:li>
<rdf:li>video/vnd.rn-realvideo</rdf:li>
<rdf:li>video/x-ms-asf</rdf:li>
<rdf:li>video/x-ms-wmv</rdf:li>
</rdf:Bag>
</prf:CcppAccept>

</rdf:Description>
</prf:component>
</rdf:Description>
</rdf:RDF> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:57:42.187

XML 区分大小写，所以我认为 $XML->RDF_Description 可能需要是 rdf_Description。如果我还有一台带有 php 的服务器，我会进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:01:39.037

```
$file = file_get_contents("http://nds1.nds.nokia.com/uaprof/NokiaX2-01r100.xml");

$screen_size = explode('<prf:ScreenSize>', $file);
$screen_size = explode('</prf:ScreenSize>', $screen_size[1]);
$screen_size = $screen_size[0];

$ccpp = explode('<prf:CcppAccept>', $file);
$ccpp = explode('</prf:CcppAccept>', $ccpp[1]);
$ccpp = str_replace( 
        array("<rdf:Bag>","</rdf:Bag>","rdf:"), 
        array("<ul>","</ul>",""), $ccpp[0]);

echo $screen_size."<br/>".$ccpp; 
```

这将工作......不是很干净，但可以完成工作。

# jsf-2 - h:panelgrid 在 JSF 2.0 中具有多列

> ID：14655397
> 
> 赞同：0
> 
> 时间：2013-02-01T21:33:39.383
> 
> 标签：jsf-2

如何隐藏 h:panelgrid 的第一列（第 2 列）并自动增加第二列的宽度以适应 JSF 2.0 中的整个面板网格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:58:15.050

有两个面板网格并使用渲染 - 使用适合这种情况的一个。或者使用 EL 并在服务器端评估“列”。我想 columnClasses 也可以像这样被评估以获得动态样式。

# ios - AddressBook - iOS 应用程序崩溃，ARC 启用，CF 对象操作附近

> ID：14655399
> 
> 赞同：2
> 
> 时间：2013-02-01T21:33:45.377
> 
> 标签：ios, crash, abaddressbook, core-foundation

我发生了崩溃，很可能与我无法发现的内存管理有关。

崩溃从未发生在我身上，我只知道它发生是因为我收到了崩溃报告。
这也意味着我必须确认崩溃已修复的唯一当前方法是发布应用程序并等待崩溃报告出现（坏消息）或不出现（真高兴！）。

崩溃报告摘录：

```
Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x9
Crashed Thread:  0

Thread 0 Crashed:
0   CoreFoundation                      0x375f29e8 0x375e4000 + 59880
1   MyApp                            0x000bf22f -[UIViewController(AddressPicker) fullNameAndAddressFromPerson:identifier:] (UIViewController+AddressPicker.m:108)
2   MyApp                            0x000bf3f9 -[UIViewController(AddressPicker) guessedUserAddress] (UIViewController+AddressPicker.m:161)
3   MyApp                            0x0009cc99 -[RecipientsViewController loadUserAddressFromMyAppSender] (RecipientsViewController.m:190)
4   MyApp                            0x0009c189 -[RecipientsViewController viewDidLoad] (RecipientsViewController.m:78)
5   UIKit                               0x31a5e541 0x31a3c000 + 140609 
```

**原始代码：**

```
- (NSString *) fullNameAndAddressFromPerson:(ABRecordRef) person identifier:(ABMultiValueIdentifier) identifier {
    NSMutableString *address = [NSMutableString new];

    // Get and add first and last name
    CFStringRef cfFirstName = ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *firstName = (NSString *)CFBridgingRelease(cfFirstName);

    CFStringRef cfLastName = ABRecordCopyValue(person, kABPersonLastNameProperty);
    NSString *lastName = (NSString *)CFBridgingRelease(cfLastName);

    [address appendFormat:@"%@ %@\n", firstName ?: @"", lastName ?: @""];

    // Get and add address
    ABMultiValueRef addressMultiValue = ABRecordCopyValue(person, kABPersonAddressProperty);

    CFTypeRef addressRef = ABMultiValueCopyValueAtIndex(addressMultiValue, ABMultiValueGetIndexForIdentifier(addressMultiValue, identifier)); // This is line 108
    CFRelease(addressMultiValue);

    NSDictionary *addressDictionary = (NSDictionary *) (CFBridgingRelease(addressRef));

    if ([addressDictionary isKindOfClass:NSDictionary.class]) {
        [address appendString:ABCreateStringWithAddressDictionary(addressDictionary, YES)];
    }

    return [address stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
} 
```

**更新了代码**，包括 Nirav 建议的检查：

```
- (NSString *) fullNameAndAddressFromPerson:(ABRecordRef) person identifier:(ABMultiValueIdentifier) identifier {
    NSMutableString *address = [NSMutableString new];
    NSString *firstName, *lastName;

    // Get and add first and last name
    if (person) {
        CFStringRef cfFirstName = ABRecordCopyValue(person, kABPersonFirstNameProperty);
        if (cfFirstName) {
            firstName = (NSString *)CFBridgingRelease(cfFirstName);
        }

        CFStringRef cfLastName = ABRecordCopyValue(person, kABPersonLastNameProperty);

        if (cfLastName) {
            lastName = (NSString *)CFBridgingRelease(cfLastName);
        }
    }

    [address appendFormat:@"%@ %@\n", firstName ?: @"", lastName ?: @""];

    // Get and add address
    ABMultiValueRef addressMultiValue = ABRecordCopyValue(person, kABPersonAddressProperty);

    CFTypeRef addressRef;
    if (addressMultiValue && identifier) {
        addressRef = ABMultiValueCopyValueAtIndex(addressMultiValue, ABMultiValueGetIndexForIdentifier(addressMultiValue, identifier));
        CFRelease(addressMultiValue);
    }

    NSDictionary *addressDictionary;

    if (addressRef) {
        addressDictionary = (NSDictionary *) (CFBridgingRelease(addressRef));

        if ([addressDictionary isKindOfClass:NSDictionary.class]) {
            [address appendString:ABCreateStringWithAddressDictionary(addressDictionary, YES)];
        }
    }

    return [address stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
} 
```

我想我错过了显而易见的事情，所以我不会只是回答“呃，你是对的”，我会接受可能修复错误的答案，**并**指出可以使这段代码更安全和改进的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:01:50.167

我在做类似的事情时遇到了类似的崩溃，这就是我所做的：

*   在使用它们之前对每个 CFStringRef 进行空检查 - 这里：cfFirstName、cfLastName
*   对返回的每个 ABMultiValueRef 进行空检查 - 这里：addressMultiValue

等等。要点是在桥接宏之前执行空值检查。

这是为了处理没有填充某些字段的电话簿记录，就是这样。

# .net - 使用 .NET Simple Membership 提供程序 - 但针对外部服务进行身份验证

> ID：14655400
> 
> 赞同：1
> 
> 时间：2013-02-01T21:33:49.320
> 
> 标签：.net, asp.net-mvc-4, simplemembership

我想在我的 MVC4 应用程序中使用 Simple Membership 提供程序来利用它提供的功能，但我想重定向登录方法以使用外部 Web 服务。

我什至无法在网上找到一个起点。如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:42:41.013

也许这会帮助你开始。

[http://msdn.microsoft.com/en-us/library/bb386424(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386424(v=vs.100).aspx)

# python - Python时间计数器

> ID：14655401
> 
> 赞同：0
> 
> 时间：2013-02-01T21:33:52.993
> 
> 标签：python, python-2.7

我大约每 2.5 秒从外部源（在这种情况下为串行端口）输入数据。
我想每 5 分钟而不是每 2.5 秒存储（在 mysql 中）这个数据的样本。
我将如何在 python 中实现它？
可能不能使用睡眠功能，因为这将停止脚本的其余部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:41:30.380

检查自上次保存每个传入事件以来已经过去了多少时间，并在每次保存后更新上次保存时间戳：

```
import time
lastsave = 0
def SaveEvent(data):
    # do what you need to save it
    ...

# I'm assuming there's some sort of event loop that 
# detects new events and directs them to some HandleEvent function

def HandleEvent(data):
    global lastsave
    if time.time() - lastsave > 300: 
    # this is in seconds, so 5 minutes = 300 seconds
        lastsave = time.time()
        SaveEvent(data) 
```

如果您的应用程序是多线程或多处理的，您还应该考虑在`SaveEvent`函数中实现锁定以避免并发保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:47:14.093

只需使用`Timer`来自`threading`- 之类的类。

```
import time
from threading import Timer

def poll_port():
    print "Getting my data from port", time.time()

def main():
    print "Main:enter", time.time()
    while True:
        t = Timer(5, poll_port)
        t.start()
        t.join()
        print "after join:", time.time()

if __name__ == "__main__":
    main() 
```

示例输出：

```
Main:enter 1359755186.87
Getting my data from port 1359755191.88
after join: 1359755191.88
Getting my data from port 1359755196.88
after join: 1359755196.88
Getting my data from port 1359755201.88
after join: 1359755201.88
Getting my data from port 1359755206.88 
```

# java - 使用 jms spring 和 activemq 队列的聊天应用程序

> ID：14655408
> 
> 赞同：0
> 
> 时间：2013-02-01T21:34:24.547
> 
> 标签：java, spring, queue, jms, activemq

所以这是我的问题......大问题

我有一个名为 Startup 的类，其中包含调用客户端类的主要方法，并且客户端类创建一个窗口 ChatListener 用于收听消息

现在，我需要运行两次启动（实际上不止两次）并执行聊天操作

我的问题是我可以使用队列实现此功能还是应该切换到主题

其他事情我已经部分实现了，但问题是当我发送消息时，我无法在正确的接收器中显示它

代码如下

启动

```
import org.springframework.context.support.ClassPathXmlApplicationContext;

import java.io.IOException;
import java.sql.SQLException;

public class Startup {
static Long id = (long) 0;
public static String[] ARGS;
public static void main(String[] args) throws IOException, InterruptedException, SQLException {
    Startup s = new Startup();
    s.ARGS = args;
    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("SpringContext.xml");
    CClient client = (CClient) context.getBean("simpleClient");
}
} 
```

客户端

```
import org.springframework.jms.core.JmsTemplate;
import org.springframework.jms.core.MessageCreator;

import javax.jms.Destination;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.Session;
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class CClient extends JFrame implements ActionListener {
String identifier;

public CClient(String identifier) {
    this.identifier = identifier;
}
public JTextArea taDisplay;
public void setTfInput(JTextField tfInput) {
    this.tfInput = tfInput;
}

private JTextField tfInput;
private String msg;

public void setTemplate(JmsTemplate template) {
    this.template = template;
}

public void setDestination(Destination destination) {
    this.destination = destination;
}

public JmsTemplate template;
public Destination destination;

public void init() {
    setLayout(new FlowLayout());
    add(new JLabel("Enter Text: "));
    tfInput = new JTextField(10);
    add(tfInput);
    JButton jSend = new JButton("Send");
    add(jSend);
    taDisplay = new JTextArea(6, 30);
    JScrollPane scrollPane = new JScrollPane(taDisplay);
    add(scrollPane);
    jSend.addActionListener(this);
    setTitle("Communicator " + identifier);
    setSize(400, 200);
    setVisible(true);
}

public void actionPerformed(ActionEvent e) {
   try {
       if ("Send".equals(e.getActionCommand())) {
           msg = tfInput.getText();

           template.send(destination, new MessageCreator() {
               public Message createMessage(Session session)
                       throws JMSException {
                   Message message = session.createTextMessage(msg);
                   message.setStringProperty("stringProperty", identifier);
                   return message;
               }
           });
       }

   } catch (Exception e1) {
       e1.printStackTrace();
       System.out.println("Error: " + e1);
   }
  }

} 
```

聊天监听器：

```
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageListener;
import javax.jms.TextMessage;
import java.util.regex.Pattern;

public class ChatListener implements MessageListener {

public CClient cClient;

public void onMessage(Message message) {

    if (message instanceof TextMessage) {
        try {
            System.out.print("hai");
            System.out.println("Received Message is " + ((TextMessage)     message).getText());
            String[] parts = Pattern.compile(":", Pattern.LITERAL).split(((TextMessage) message).getText());
            System.out.println(parts[0]);
            String frmWho = message.getStringProperty("stringProperty");
            System.out.println("From Who " + frmWho);
           cClient.taDisplay.append(((TextMessage) message).getText() + "\n");
        } catch (JMSException ex) {
            throw new RuntimeException(ex);
        }

    }

}

public void setcClient(CClient cClient) {
    this.cClient = cClient;
}
} 
```

弹簧上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jms="http://www.springframework.org/schema/jms"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms-3.0.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd">

<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL">
        <!--<value>vm://localhost</value>-->
        <value>tcp://localhost:61616</value>
    </property>
</bean>

<bean id="destination" class="org.apache.activemq.command.ActiveMQQueue">
    <constructor-arg value="jmsExample" />
</bean>

<bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<util:constant id="constructorarg" static-field="com.communicator.Startup.ARGS"/>

<bean id="simpleClient" class="com.communicator.CClient" init-method="init">
    <constructor-arg><value>#{constructorarg}</value></constructor-arg>
    <property name="template" ref="jmsTemplate"/>
    <property name="destination" ref="destination" />
</bean>

<bean id="messageListener" class="com.communicator.ChatListener">
    <property name="cClient" ref="simpleClient"></property>
</bean>

<bean id="jmsContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="destination" ref="destination"/>
    <property name="messageListener" ref="messageListener" />
</bean> 
```

非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:41:53.657

队列的语义是每条消息都被**消费一次，而且只消费一次**。

我不确定你要做什么：

*   当你说你需要多次调用 Startup 时，你是说你在同一台机器上有效地启动了几个客户端？）
*   您没有描述预期的消息流：您是否尝试将每条消息广播到每个连接的客户端？或者您是否尝试从一个客户端向另一个客户端发送消息？这个问题的答案将允许您在主题和队列之间进行选择（可能是两者的组合，因为大多数聊天系统结合了广播和单播交换）。
*   *您可以*使用的一件事是 JMS 选择器，它允许您过滤特定客户端使用的消息（您可以使用*目标*属性或类似的东西）。

# eclipse - Eclipse 中的超链接在单击时不起作用

> ID：14655413
> 
> 赞同：0
> 
> 时间：2013-02-01T21:34:37.037
> 
> 标签：eclipse, eclipse-plugin, hyperlink, eclipse-rcp

所以，我只想在 Eclipse 中打开一个简单的链接。我做了什么：

```
final Hyperlink link = new Hyperlink(group, SWT.WRAP);
            link.addHyperlinkListener(new HyperlinkAdapter(){
                public void linkActivated(HyperlinkEvent e) {
                    System.out.println("test");

            });
            link.setEnabled(true);
            link.setToolTipText("Test tooltip!");
            link.setForeground(new Color(null, 0, 0, 250));
            link.setText("Text"); 
```

一切都很好，文本以我的颜色显示，但是当我单击文本时，我从来没有得到 System.out.println("test")...我也看到了工具提示。但从不进入 linkActivated 方法。我哪里错了？附加信息：这是在 Dialog->Composite->Group 中完成的

先感谢您！

LE：很抱歉，问题是 当我真正需要*org.eclipse.ui.forms.events.HyperlinkEvent时，Eclipse 自动导入了**javax.swing.event.HyperlinkEvent*。再次对垃圾邮件感到抱歉，但我花了一些时间才发现这一点。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T16:25:55.990

从上面复制：

> 问题是 Eclipse`javax.swing.event.HyperlinkEvent`在我真正需要时自动导入`org.eclipse.ui.forms.events.HyperlinkEvent`。*

# jquery - Jquery animate() 同时在多个 div 上

> ID：14655418
> 
> 赞同：3
> 
> 时间：2013-02-01T21:35:07.567
> 
> 标签：jquery, jquery-animate

我正在尝试在我的窗口中设置 15 个 div 的动画。我首先使用以下代码将这些 div 动画到屏幕中：

```
$('.title2').bind('click',function(){

    $('#i1 div').delay( 0 ).animate({left : 200,    top :210}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i2 div').delay(100).animate({left : 250,    top :350}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i3 div').delay(200).animate({left : 550,    top :200}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i4 div').delay(400).animate({left : 450,    top :70},  {duration: 'slow',easing: 'easeOutBack'});
    $('#i5 div').delay(100).animate({left : 595,    top :60}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i6 div').delay(900).animate({left : 580,    top :410}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i7 div').delay(500).animate({left : 1020,   top :230}, {duration: 'slow',easing: 'easeOutBack'});
    $('#i8 div').delay(600).animate({left : 530,    top :550}, {duration: 'slow',easing: 'easeOutBack'});
    $('#ix div').delay(700).animate({left : 875,    top :270}, {duration: 'slow',easing: 'easeOutBack'});
    $('#v1 div').delay(100).animate({left : 350,    top :200}, {duration: 'slow',easing: 'easeOutBack'});
    $('#v2 div').delay( 0 ).animate({left : 380,    top :395}, {duration: 'slow',easing: 'easeOutBack'});
    $('#v3 div').delay(200).animate({left : 700,    top :150}, {duration: 'slow',easing: 'easeOutBack'});
    $('#v4 div').delay(800).animate({left : 880,    top :70}, {duration: 'slow',easing: 'easeOutBack'});
    $('#t1 div').delay(200).animate({left : 525,    top :335}, {duration: 'slow',easing: 'easeOutBack'});
    $('#t2 div').delay(400).animate({left : 998,    top :370}, {duration: 'slow',easing: 'easeOutBack'});
}); 
```

现在，当我尝试使用单击删除所有这些 div 时，它们仅在 y 轴内移动。

这是返回动画的代码：

```
$('.title1').bind('click',function(){
        var alles = $('#i1 div,#i2 div,#i3 div,#i4 div,#i5 div,#i6 div,#i7 div,#i8 div,#ix div,#v1 div,#v2 div,#v3 div,#v4 div,#t1 div,#t2 div')
        alles.animate({right:0, top:200});
    }); 
```

希望大家能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:58:47.537

试试这个。我相信您遇到的问题是您是先用左再用右进行动画处理，因此旧的左侧位置会被覆盖。您应该通过其中之一制作动画，但不能同时使用两者。在这里，我使用 offsetParent 的宽度来为左侧提供离屏定位。也`bind`已弃用，请`on`改用。

```
$('.title1').on('click',function(){
        $('#i1 div,#i2 div,#i3 div,#i4 div,#i5 div,#i6 div,#i7 div,#i8 div,#ix div,#v1 div,#v2 div,#v3 div,#v4 div,#t1 div,#t2 div').each(function(){
              var that = $(this),
                  WW   = that.offsetParent().width();                  
              that.animate({left:WW, top:200});
        });

}); 
```

* * *

```
$('#i1 div,#i2 div,#i3 div,#i4 div,#i5 div,#i6 div,#i7 div,#i8 div,#ix div,#v1 div,#v2 div,#v3 div,#v4 div,#t1 div,#t2 div').each(function(){
     var that = $(this);
     that.data('origin',[that.css('left'),that.css('top')]);
});

$('.title1').on('click',function(){
        $('#i1 div,#i2 div,#i3 div,#i4 div,#i5 div,#i6 div,#i7 div,#i8 div,#ix div,#v1 div,#v2 div,#v3 div,#v4 div,#t1 div,#t2 div').each(function(){
              var that = $(this),
                  origin = that.data('origin');                  
              that.animate({left:origin[0], top:origin[1]});
        });

}); 
```

# wordpress - mod_rewrite ..隐藏细节？

> ID：14655419
> 
> 赞同：0
> 
> 时间：2013-02-01T21:35:09.110
> 
> 标签：wordpress, apache, mod-rewrite

我已经安装了一个具有投资组合功能的 WP 主题 - 这会创建 /skills（用于类别）和 /portfolio（用于条目）。冒着“破坏”我不理解的东西的风险，我通过浏览代码并将“技能”的每个实例更改为“射击”，有没有办法让 mod_rewrite 将 /skills 更改为其他东西并显示它（甚至虽然实际的“静态网址”仍然是技能？

当前层次结构：

*   /技能
*   /技能/婚礼
*   /技能/爆头

[点击婚礼中的投资组合条目]

*   /投资组合/约翰简

理想情况下：

*   /射击/
*   /拍摄/婚礼
*   /射击/爆头

任何帮助将不胜感激。

当前代码：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
RewriteRule /shooting/(.*)$ skills/$1 [L]
</IfModule>
# END WordPress 
```

我相信它们都需要正常工作，因为 WP 将继续在内部链接到 /skills/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:35:14.653

您当前规则的工作方式，请求`/shooting/weddings`将被发送到 index.php 中的行`RewriteRule . /index.php [L]`，并且不会读取后续行。如果你将这条线移到`RewriteRule ^shooting/(.*)$ /skills/$1`两行之上`RewriteCond`并修改它以像我刚刚写的那样阅读，那应该会`/shooting/weddings`默默地重写为`/skills/weddings`，然后将其提供给 index.php。

编辑：更新了以下规则。最初我以为您只是想添加 /shooting 以与 /skills 做出相同的响应，现在它会这样做，但现在我认为您还希望将加载 /skills 的人也重定向到 /shooting。技能 RewriteRule 将所有 /skills 流量重定向到 /shooting。一旦用户被重定向，他们就会点击 RewriteRule，它会默默地将他们重写到 /skills，然后被 WordPress 接收。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^skills/(.*)$ /shooting/$1 [R=301,L]
RewriteRule ^shooting/(.*)$ /skills/$1
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

# ios - UISwitch：使触摸区域大于默认触摸区域

> ID：14655424
> 
> 赞同：2
> 
> 时间：2013-02-01T21:35:20.883
> 
> 标签：ios, ipad, uiswitch

我想让 UISwitch 周围的触摸区域每边大 10 个点。查看相关帖子中的一些建议（[UIButton：使命中区域大于默认命中区域](https://stackoverflow.com/questions/808503/uibutton-making-the-hit-area-larger-than-the-default-hit-area)），我尝试使用以下方法增加 UISwitch 周围的框架，但是它会导致整个 UISwitch 拉伸填充新框架。

![滑动开始](../Images/18660c809e52c7ec9ed91aa85a0cddfa.png) ![箭](../Images/879fa226c52a6d6b95b10232bd63220d.png) ![带填充物](../Images/598e38cf8264857db947b697fd92db72.png)

有没有更合理的方法可以做到这一点？

```
// Increase margin around switch based on width
const CGFloat desiredWidth = 260.0f;  // real width is 240
const CGFloat margin = 0.5f * (desiredWidth - self.beginSwitch.frame.size.width);

// Add margin on all four sides of the switch
CGRect newFrame = self.beginSwitch.frame;
newFrame.origin.x -= margin;
newFrame.origin.y -= margin;
newFrame.size.width  += 2.0f * margin;
newFrame.size.height += 2.0f * margin;

self.beginSwitch.frame = newFrame; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:41:51.033

我通过在图像（或在您的情况下为开关）前面放置一个不可见的按钮（您的尺寸较大）来完成这些壮举。这样做您可以设置开关的状态，并基于开关当前状态的倒数。还要在隐形按钮的操作代码中执行您的实际操作。

# java - Java：如何干净地处理缺少外部库的情况？

> ID：14655425
> 
> 赞同：2
> 
> 时间：2013-02-01T21:35:22.340
> 
> 标签：java, external

我正在使用一个没有分发许可证的商业 API 库。

我的应用程序的最终用户必须安装库并在类路径中才能使我的应用程序工作。除了 jar，它们还必须在 LD_LIBRARY_PATH 中有一些其他文件。

我更愿意在启动时运行测试，以确保安装了先决条件并且我正在使用的对象正常工作。如果没有，请返回带有说明的用户友好消息或执行某种更正。（比如询问用户库的安装位置并将一些变量写入启动脚本）。

我找到了[ClassLoader.loadClass](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String,%20boolean%29)并且我认为我应该使用它，但是我无法找到一个说明我的用例的示例，我不确定是否可以直接使用它。

我相信如果 loadClass 成功，我需要实例化一个类对象并尝试使用它来确定 LD_LIBRARY_PATH 是否设置正确。

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T21:39:42.953

你需要一个抛出异常的方法，你可以在其中捕获`ClassNotFoundException`或`NoClassDefFoundError`

```
 public void testCatchException() {
            try {
                checkClassesExisting();
            } catch (ClassNotFoundException ex) {
                // TODO handle exception
            } catch (NoClassDefFoundError ex) {
                // TODO handle exception
            } catch (Exception ex) {
                // other error
            }
        }

        public void checkClassesExisting() throws Exception {
            // instantiate here the class in doubt
            Dummy = new Dummy("xx");
        } 
```

[NoClassDefFoundError](http://javafanatics.blogspot.de/2007/03/noclassdeffounderror-vs.html)的附加信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T06:19:12.960

如果您需要购买 3rd 方库才能使用您的库，那么您真的不应该做任何事情。让 ClassNotFoundException 出现在顶部。异常会告诉您缺少哪个库。

如果您确实捕获了 ClassNotFoundException 并且您的库中的某个类存在配置问题，那么它会被您认为缺少的第 3 方库所掩盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:39:02.347

为了查找 jar 是否可用，我会`Class.forName`尝试从该 jar 加载一个类。

如果本地库在包装它们的类中的静态块中被初始化/检查，那么相同的方法也应该适用于它们。

# smartcard - 选择智能卡加密服务提供商

> ID：14655426
> 
> 赞同：1
> 
> 时间：2013-02-01T21:35:27.230
> 
> 标签：smartcard, rsacryptoserviceprovider, smartcard-reader

我正在做一些智能卡编程，并想考虑以下情况：

1.  卡中的证书未导入本地商店（这不是给定的，这是当前问题的根源）

2.  未提供提供者的名称

第二个标准意味着我不能依赖通过创建 RSACryptoServiceProvider 的实例来获取证书，如下所示：

```
CspParameters cspParameters = new CspParameters(1, "provider name");
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(cspParameters); 
```

因此，除了从 HKEY_LOCAL_MACHINE\Software\Microsoft\Cryptography\Defaults\Provider 或 HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\Cryptography\Defaults\Provider 从注册表中读取所有提供程序的名称之外，然后从每个到创建一个 RSACryptoServiceProvider 实例查看容器是否将自己标识为硬件设备，似乎有一种更简单的方法可以直接从读卡器访问证书。

我已经研究过使用 P/Invoke 和 API，但也无法确定我可以为此使用哪些 API 调用。

# c - 在 C 中调试代码

> ID：14655427
> 
> 赞同：0
> 
> 时间：2013-02-01T21:35:38.177
> 
> 标签：c, debugging, output

有人可以告诉我我的代码有什么问题以及为什么它会产生这个输出。

代码：

```
int main(){
  unsigned num;
  char response;

do{
 printf("Please enter a positive integer greater than 1 and less than 2000: ");
 scanf("%d", &num);
 if (num > 1 && num < 2000){
    printf("All the prime factors of %d are given below: \n", num);
    printPrimeFactors(num);
    printf("\n\nThe distinct prime factors of %d are given below: \n", num);
    printDistinctPrimeFactors(num);
 }
 else{
    printf("\nSorry that number does not fall between 1 and 2000.\n");
 }
 printf("\n\nDo you want to try another number? Say Y(es) or N(o): ");
 getchar();
 response = getchar();
}
while(response == 'Y' || response == 'y'); // if response is Y or y then program runs again
printf("Thank you for using my program. Good Bye!\n\n"); //if not Y or y, program terminates
return 0;
} 
```

输出：

```
Please enter a positive integer greater than 1 and less than 2000: 1600
All the prime factors of 1600 are given below: 
2 2 2 2 2 2 5 5 

The distinct prime factors of 1600 are given below: 
2 5 

Do you want to try another number? Say Y(es) or N(o): yes
Please enter a positive integer greater than 1 and less than 2000: All the prime factors of 1600 are given below: 
2 2 2 2 2 2 5 5 

The distinct prime factors of 1600 are given below: 
2 5 

Do you want to try another number? Say Y(es) or N(o): Thank you for using my program. Good     Bye! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:46:47.017

当您询问是否要重复时，您只阅读`y`，而将`es`队列留在标准输入中。当您去读取下一个数字时，`scanf`尝试将其解析为数字，失败并返回而不更改`num`. 当你提示用户时，你需要烧掉整行。

# scala - scala中地图内的排序列表

> ID：14655431
> 
> 赞同：3
> 
> 时间：2013-02-01T21:35:50.890
> 
> 标签：scala

我有一张像这样的地图：

```
val v = Map("01" -> List(34,12,14,23), "11" -> List(22,11,34)) 
```

我根本找不到对地图中的列表项进行排序的方法。

我试过像：

```
v.flatMap(v => v._2.sortBy(list => list._)) 
```

但似乎它不会对列表项进行排序。

有人知道我错在哪里吗？

**更新**：实际上我的列表是元组列表，`List[(Object1, Object2, Object3, Object4)]`为了`int`简单起见。（但我认为`_.sorted`不适用于我的对象案例）。所以我基本上想按此对象列之一进行排序。（例如`Object1.int`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:38:45.523

这似乎有效：

```
v.mapValues(_.sorted)
// Map(01 -> List(12, 14, 23, 34), 11 -> List(11, 22, 34)) 
```

如果您的值是元组，请尝试以下操作：

```
v.mapValues(_.sortBy(_._1)) 
```

这种方法也适用于类，只需说 eg `_.sortBy(_.age)`。

* * *

或者，如果您想要一个合并列表：

```
v.values.flatten.toSeq.sorted
// List(11, 12, 14, 22, 23, 34, 34) 
```

（对于元组列表）：

```
v.values.flatten.toSeq.sortBy(_._1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:37:15.437

你的意思是这样吗？

```
val v = Map("01" -> List(34,12,14,23), "11" -> List(22,11,34))
//v: scala.collection.immutable.Map[String,List[Int]] = Map(01 -> List(34, 12, 14, 23), 11 -> List(22, 11, 34))

v map { case (k, v) => (k -> v.sorted) }
//res0: scala.collection.immutable.Map[String,List[Int]] = Map(01 -> List(12, 14, 23, 34), 11 -> List(11, 22, 34)) 
```

**编辑**或：

```
v mapValues (_ sorted)
//res1: scala.collection.immutable.Map[String,List[Int]] = Map(01 -> List(12, 14, 23, 34), 11 -> List(11, 22, 34)) 
```

**另一个编辑：**

如果`Ordering`您的元组中的所有类型都隐含在范围内，它应该以完全相同的方式工作：

```
val v = Map(
  "01" -> List((34, "thirty-four"), (12, "twelve"), (14, "fourteen"), (23, "twenty-three")), 
  "11" -> List((22, "twenty-two"), (11, "eleven"), (34, "thirty-four")))
//v: scala.collection.immutable.Map[String,List[(Int, String)]] =
//Map(
//  01 -> List((34,thirty-four), (12,twelve), (14,fourteen), (23,twenty-three)), 
//  11 -> List((22,twenty-two), (11,eleven), (34,thirty-four)))

v mapValues (_ sorted)
//res3: scala.collection.immutable.Map[String,List[(Int, String)]] =
//Map(
//  01 -> List((12,twelve), (14,fourteen), (23,twenty-three), (34,thirty-four)),
//  11 -> List((11,eleven), (22,twenty-two), (34,thirty-four))) 
```

如果您只想按元组的一个成员排序（比如......在这种情况下是第二个）：

```
v mapValues (_ sortBy (_ _2))
//res5: scala.collection.immutable.Map[String,List[(Int, String)]] =
//Map(
//  01 -> List((14,fourteen), (34,thirty-four), (12,twelve), (23,twenty-three)),
//  11 -> List((11,eleven), (34,thirty-four), (22,twenty-two))) 
```

# cuda - 我是否需要释放使用 cudaMemcpyToSymbol 分配的常量内存？

> ID：14655432
> 
> 赞同：2
> 
> 时间：2013-02-01T21:35:51.043
> 
> 标签：cuda

我很确定答案是否定的，但我只是想确保因为我不想要内存泄漏。

我正在使用以下代码

```
__constant__ void* VERTEX_NO_CONSTANT_PARAMETER;
HANDLE_ERROR( cudaMemcpyToSymbol( VERTEX_NO_CONSTANT_PARAMETER, &vertexNo, sizeof( int ) ) );
HANDLE_ERROR( cudaFree( VERTEX_NO_CONSTANT_PARAMETER ) ); 
```

它不会向我抛出任何让我怀疑的错误（我希望 cudaFree 会出错）。

谢谢！

凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:07:19.587

在问题中，您声明常量 void* VERTEX_NO_CONSTANT_PARAMETER。声明将 sizeof(void*) 保留在常量内存中。这 4/8 字节由 CUDA 驱动程序在加载 CUDA 模块时分配，并在卸载 CUDA 模块时释放。

如果您在主机代码中调用 cudaMalloc 并使用 cudaMemcpyToSymbol 将设备指针复制到 VERTEX_NO_CONSTANT_PARAMETER ，那么在程序使用设备内存完成后，您仍然有责任使用 cudaFree 释放设备内存。如果您不释放内存，驱动程序将在 CUDA 上下文被销毁时释放内存。

CUDA 不提供动态分配常量内存的 API。常量内存只能使用`__constant__`限定符静态分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T23:13:46.353

不，你没有。根据 NVIDIA cuda 库：

> cudaFree (void *devPtr) 释放 devPtr 指向的内存空间，它必须由先前调用 cudaMalloc() 或 cudaMallocPitch() [...]

# c# - 如何忽略 Silverlight 中的 SSL 证书错误？

> ID：14655433
> 
> 赞同：4
> 
> 时间：2013-02-01T21:36:08.870
> 
> 标签：c#, silverlight

我需要忽略 SSL 证书错误，以便在我们公司内部为 Silverlight 应用程序进行一些 UAT 测试。客户端调用使用自签名证书的资源，并且出于一系列制度原因，简单地将证书添加到希望测试它的人的机器上是不可行的。

在我的 Windows 服务中，我可以简单地使用：

```
ServicePointManager.ServerCertificateValidationCallback +=
            (sender, cert, chain, sslPolicyErrors) => true; 
```

Silverlight 5 中似乎不存在这种情况。如何忽略 Silverlight 客户端中的证书错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:49:52.133

你不能。就那么简单。您将需要找到另一种解决方案。用户验收测试应该包括现实生活中可能发生的场景，所以我不明白为什么在生产环境中需要它时添加证书是不可能的。无论如何，在您的内部测试场景中，也许您的服务可以通过非安全的基本 http 访问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T09:34:48.620

另一种可能的解决方案（仅在开发环境中是）：

1.Trust证书安装在Trusted Root上。

2.  设置为 Etc/Hosts IP - 颁发给证书的名称。

这不允许您忽略证书，但请让您的计算机正确验证它。

# c++ - 拆分函数抛出错误

> ID：14655436
> 
> 赞同：0
> 
> 时间：2013-02-01T21:36:17.877
> 
> 标签：c++, string, split

我正在尝试创建一个函数将字符串“Split At Spaces”拆分为一个包含“Split”“At”“Spaces”的向量。到目前为止，这是我得到的代码。

```
#include <iostream>
#include <utility>
#include <algorithm>

using namespace std;

std::vector<std::string> split(std::string * s, char * tosplit) 
{
    size_t i = 0;
    int count = 0;
    size_t contain;
    std::vector<std::string> split;

    std::cout << "Start" << std::endl;
    std::cout << *s << std::endl;
    std::cout << *tosplit << std::endl;

    while((contain = s->find(*tosplit,i)) != std::string::npos)
    {
        count++;
        i = contain + 1;
    }

    std::cout << "Contains " << count << std::endl;

    if (count == 0)
    {
        std::cout << "Equals 0" << std::endl;
        split = std::vector<std::string>(1);
        split.at(0) = s->c_str();
        return split;
    }

    split = std::vector<std::string>(count + 1);
    split.begin();

    int lasti;
    i = s->find_first_of(*tosplit);
    split.at(0) = s->substr(0, i);
    lasti = i;
    int runs = 1;

    while (runs <= count) 
    {
        i = s->find(*tosplit, lasti + 1);
        std::cout << i << " " << lasti << std::endl;
        split.at(runs) = s->substr(lasti, --i);
        runs++;
        lasti = i;
    }

    split.at(runs) = s->substr(lasti, s->size());

    std::cout << "done, result is" << std::endl;
    i = 0;
    while (i < split.capacity()) 
    {
        std::cout << split.at(i) << std::endl;
        i++;
    }

    return split;
} 
```

它抛出一个 out_of_range 异常。您可以提供的任何帮助将不胜感激。这就像我在函数中使用指针的第一部分，所以我在这里有点猜测。
谢谢！

请不要建议使用 x 或 y 方法，**我想写我自己的**，因为我这样做是为了体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:47:09.167

这实际上很容易使用例如[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)and以及来自[标准迭代器库](http://en.cppreference.com/w/cpp/iterator)[`std::copy`](http://en.cppreference.com/w/cpp/algorithm/copy)的一些帮助来完成。

对于那些想要查看工作代码的人，可以在[这里](http://ideone.com/5WalM7)找到。

对于链接中的代码，*整个程序*18行，其中实际拆分为3行但那是因为我将其拆分为使其更具可读性（实际上是单个函数调用）。

* * *

对于更通用的解决方案，如果 C++11[正则表达式](http://en.cppreference.com/w/cpp/regex)可用（或[Boost regex](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/index.html)或其他一些可用的正则表达式库），则可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:02:20.927

以下是我发现的一些问题：

1.  `s`在检查 NULL 指针之前取消引用。
2.  `tosplit`在检查 NULL 之前取消引用。
3.  不要计算字符串的数量，然后拆分字符串（需要 2 次搜索），而是在搜索时计算。
4.  当您将其传递给循环中的表达式时，该位置`i = contain + 1`可能超出范围。`while`
5.  尝试使用该方法`std::vector::push_back`，而不是在特定的（可能未分配的）位置进行分配。
6.  该语句`return split`返回字符串数组的副本。你真的要返回一个大的数据结构吗？
7.  该语句`split.begin()`将一个迭代器返回到向量的开头；你不使用的。
8.  `split.size()`不使用`split.capacity`。它们是两个不同的概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:47:14.217

与其尝试为您的向量预先分配空间，不如使用 push_back 在您找到它们时附加这些部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:48:57.853

对不起，但我不禁认为您的功能过于复杂。如果你想自己编写逻辑来学习而不是使用一些预先打包的功能，那很好，但这并不意味着你不应该保持你的逻辑**简单**。

我相信您的算法应该看起来更像这样：

```
// Note that the delimiter can be a string as well, not just a char
vector<string> split(string const& s, string const& delimiter)
{
    vector<string> result;

    string::size_type startPos = 0;
    string::size_typepos = s.find(delimiter);
    while (pos != string::npos)
    {
        // Extract token and save it...
        string token = s.substr(startPos, pos - startPos);
        result.push_back(token);

        // Step to next token...
        startPos = pos + 1;
        pos = s.find(delimiter, pos + 1);
    }

    // Parse last token (in case the string is not terminated
    // by the delimiter).
    if (startPos < s.length())
    {
        string lastToken = s.substr(startPos);
        result.push_back(lastToken);
    }

    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T22:23:29.883

**单定界符：**

你写了太多的代码来做到这一点。您可以在几行内完成。你变得*非常*复杂。并且没有理由为此真正使用指针做任何事情。

```
vector<string> Split(string s, char delim)
{
    vector<string> strings;
    for(istringstream ss(s); getline(ss, s, delim); strings.push_back(move(s)));
    return strings;
} 
```

**多个分隔符：**

使用多个分隔符的解决方案更加复杂。您不能再利用 of `getline`，这意味着您基本上是在`getline`自己编写 's 的部分功能。但是，它仍然可以很短。

```
vector<string> Split(const string& s, const char* delims)
{
    vector<string> strings;

    for(string::size_type start = 0, end; end != string::npos && start < s.size(); start = end+1)
    {
        end = s.find_first_of(delims, start);
        strings.push_back(s.substr(start, end-start));
    }

    return strings;
} 
```

当分隔符彼此相邻时，这将添加空白字符串。如果这不是相邻分隔符的期望行为，则可以通过保护`push_back`with轻松避免这种情况`if(start != end)`。

**结论：**

当您开始编写像这样的低级算法时，请在广义上对其进行伪代码，然后在编写任何代码之前检查 C++ 标准库可以提供哪些内容来删除部分或全部工作。您最终会得到更小、更不容易出错且更易于理解的代码。例如，没有人希望看到手动实现`find_first_of`。看字就清楚多了`find_first_of`。很清楚该功能将要做什么，并且它没有错误（希望如此）。

# shell - sqlite 触发输出

> ID：14655439
> 
> 赞同：2
> 
> 时间：2013-02-01T21:36:36.517
> 
> 标签：shell, logging, sqlite, tail

我正在尝试创建一个类似于`tail -f`sqlite 文件的脚本。认为触发器是最好的答案，我尝试了以下方法：

```
CREATE TEMPORARY TRIGGER "tailf" AFTER INSERT ON "my_table"
  BEGIN
    SELECT * FROM "my_table" WHERE rowid = NEW.rowid;
  END; 
```

这个想法是在插入时，它将新行打印到标准输出。不幸的是，当插入表格时，我什么也没得到。

我究竟做错了什么？

另外，假设我可以从 sqlite shell 让它全部工作，当其他进程插入表时它仍然工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T10:52:11.970

当 SQLite 执行`SELECT`命令时，它只是将数据返回给应用程序。应用程序有责任对数据做一些事情（例如在`sqlite3`shell 的情况下打印它）。

在触发器内部，没有应用程序等待 的结果`SELECT`，因此结果被丢弃。触发器内命令的*唯一*目的`SELECT`是调用具有某些副作用的用户定义函数。

理论上，您可以定义自己的用户定义函数来打印一些东西：

```
CREATE TEMPORARY TRIGGER "tailf" AFTER INSERT ON "my_table"
BEGIN
    SELECT print(column1, column2, ...) FROM "my_table" WHERE rowid = NEW.rowid;
END; 
```

但除非您控制其他进程，否则它们不会为您安装该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T19:17:07.340

您可以循环运行 sqlite。

# 双倒车

```
while true; do sqlite3 /tmp/db.db 'select * from (select * from j1939 order by timestamp desc limit 50) order by timestamp asc limit 50'; sleep 1; done | grep -E 
```

# 简单的监控

```
$ while true; do sqlite3 /tmp/db.db 'select * from j1939 where id>(select max(id) from j1939)-50'; sleep 1; done

1621524|LOGIN1|838
1621525|LOGIN2|19
1621526|LOGIN3|839
1621527|LOGIN4|20
1621528|LOGIN5|839 (more...) 
```

## 您可以过滤结果。

```
while true; do sqlite3 /tmp/db.db 'select * from j1939 where id>(select max(id) from j1939)-50'; sleep 1; done | grep -E LOGIN5|LOGIN3

1621526|LOGIN3|839
1621528|LOGIN5|839 
```

## 您可以提取所需的列

```
while true; do sqlite3 /tmp/db.db 'select * from j1939 where id>(select max(id) from j1939)-50'; sleep 1; done | cut -d '|' -f 1-2

1621526|LOGIN3|839
1621528|LOGIN5|839 
```

# 可能的改进

您也可以考虑将其添加到`.bashrc`，因此您可以执行类似的操作

```
sqlitetailf /tmp/db.db j1939

1621524|LOGIN1|838
1621525|LOGIN2|19
1621526|LOGIN3|839
1621527|LOGIN4|20
1621528|LOGIN5|839 
```

2秒后

```
1621524|LOGIN1|838
1621525|LOGIN2|19
1621526|LOGIN3|839
1621527|LOGIN4|20
1621528|LOGIN5|839
1621527|LOGIN6|20
1621528|LOGIN7|839 
```

# wpf - 有没有办法将您自己的控件添加到 Blend 的“组入”和“更改布局类型”选项？

> ID：14655442
> 
> 赞同：1
> 
> 时间：2013-02-01T21:36:40.287
> 
> 标签：wpf, expression-blend, expression-blend-4

在 Expression Blend 4 中，我们可以在“对象和时间轴”面板中右键单击一个对象，以访问方便的功能“组入”和“更改布局类型”：

![在此处输入图像描述](../Images/f32392e4214eb3877130b33c4b33468f.png)

但是，我经常真正想要的是能够“分组”或“将布局类型更改为”**我自己的一些 WPF 内容控件**，例如 SunkenBorder、ClippingBorder、TransitionContentControl 等。有没有办法可以告诉 Blend 在这些列表中还包括我们的一些控件（或任何非标准 WPF 控件）？

**更新：**

在我最初提出这个问题后，我想看看 Expression Blend 确实包含在其列表中的一些面板（Grid、StackPanel 等）的源代码，以尝试找到 Blend 的类元数据属性可能会注意以填充这些列表。我希望找到一些类似于[您可以为自己的附加属性指定的属性](http://blogs.msdn.com/b/jnak/archive/2008/01/17/showing-attached-properties-in-the-cider-wpf-designer.aspx)，这些属性允许它们显示在 Blend 或 Visual Studio 的属性面板中。不幸的是我没有找到任何这样的类属性，所以看起来 Sorskoot 是正确的，我们不能添加到 Blend 显示的这些列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:27:29.690

据我所知，这些值是硬编码的并且是可见的，具体取决于您正在开发的平台。

Expression Blend 4 中仅提供 Grid、StackPanel、DockPanel、Canvas、ScrollViewer、Border、WrapPanel、UniformGrid 和 Viewbox。在 Expression Blend for Visual Studio 2012 中，该列表有所扩展，但仍然是硬编码的。

太糟糕了。我同意能够自定义此功能会很棒。

# visual-studio-2010 - Crystal Reports 中的总和组级别字段

> ID：14655445
> 
> 赞同：4
> 
> 时间：2013-02-01T21:36:52.550
> 
> 标签：visual-studio-2010, crystal-reports, grouping

我正在尝试创建我认为应该是一个非常简单的报告。我有一个与此类似的结果数据表：

```
ID    Amount    ChildID     Name    Discount
1     200       1           Billy   $10
1     200       2           Bobby   $20
2     100       1           Kenny   $10 
```

我需要从组行级别的金额中减去折扣的总和。然后最后我需要总结这些金额。所以它看起来像这样：

```
ID: 1 Amount: $170
    Billy      $10
    Bobby      $20
ID: 2, Amount:$90
    Kenny      $10

Total:        $260 
```

我创建了一个公式，用于从组的金额中减去折扣的总和。现在如何在报表页脚中汇总这些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:12:10.900

您需要通过全局变量来跟踪正在运行的小计。像这样的组页脚公式应该可以做到：

```
whileprintingrecords;
numbervar subtotal;

//Update subtotal with the group's amount minus the total discounts for that group
subtotal := subtotal + ({table.amount} - sum({table.discount},{table.ID})) 
```

在报表页脚中，您现在可以自由使用变量的总计。

# android - SupportMapFragment 找不到 com.google.android.gsf.gservices 的提供商信息？

> ID：14655452
> 
> 赞同：2
> 
> 时间：2013-02-01T21:37:26.783
> 
> 标签：android, google-maps, google-maps-api-2, google-maps-android-api-2

告诉我，为什么不起作用？给予每一秒。并显示一个空白单元格。

![在此处输入图像描述](../Images/499cd1d7a7467bd3d743e32c60da21d6.png)

设置“AndroidManifest”应该没问题，因为工作前几个小时。

```
ActivityThread Failed to find provider info for com.google.android.gsf.gservices 
```

几个小时前，一切正常，没有任何改变。

```
public class TravelMapActivity extends FragmentActivity {

    private GPSTrackerService gpsService;

    private SupportMapFragment mMapFragment;
    private GoogleMap googleMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.travel_map_activity);

        SupportMapFragment supportMapFragment = (SupportMapFragment)
                getSupportFragmentManager().findFragmentById(R.id.map);
                googleMap = supportMapFragment.getMap();

//This option does not work either.

//      mMapFragment = new SupportMapFragment();
//      try {
//          MapsInitializer.initialize(this);
//      } catch (GooglePlayServicesNotAvailableException e) {
//          // TODO handle error
//          e.printStackTrace();
//      }
//      getSupportFragmentManager().beginTransaction().add(android.R.id.content, mMapFragment).commit();

    } 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="ToggleButton" />

    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>
</RelativeLayout> 
```

# facebook - 做facebook弹出登录并在新标签中打开链接

> ID：14655453
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:37:27.587
> 
> 标签：facebook

我有一个链接，例如：

```
<a href="/somepage" target="_blank">Go there</a> 
```

我在这个链接上也有一个点击监听器，它调用`FB.login()`

结果，在 Chrome 中，FB 登录对话框显示为弹出窗口，但新选项卡中的 /somepage 链接被 Chrome 阻止，说这是一个被阻止的弹出窗口

有没有办法让页面在新选项卡中打开，并出现 FB 登录对话框？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:29:12.597

在 Chrome 中无法进行此操作。遭受弹出窗口阻止程序。或在当前窗口中打开链接

设置锚的属性**target="_self"**

```
`<a href="/somepage" target="_self">Go there</a>` 
```

# jquery - jquery jcarousel 并不总是在 IE9 中正确显示

> ID：14655457
> 
> 赞同：0
> 
> 时间：2013-02-01T21:37:56.947
> 
> 标签：jquery, jcarousel

这真的很奇怪。Jan Sorgalla 的 jcarousel 似乎在 Chrome 中运行良好，但在 IE9 中，图像有时是垂直堆叠的，这意味着我可以一次看到所有图像。有时当我点击刷新时，它们会正常显示，但有时它们会继续在列表中分开显示，我可以在其中看到每个项目旁边的项目符号。这是我正在使用的代码：

更新：我更改为实际的 HTML

```
<ul id="mycarousel" class="jcarousel-skin-tango">

                        <li>

                                        <img id="MainContent_Image1b" src="images/img1.png" style="height:275px;width:825px;" />

                        </li>
                        <li>
                            <table style="position: relative">
                                <tr>
                                    <td>
                                        <img id="MainContent_Image8" src="images/img2.png" />
                                        <a href="#">
                                            <img id="MainContent_Image9" src="Images/btn.png" style="border: 0px none; position: absolute;
                                                top: 205px; left: 25px;" />
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </li>
                        <li>
                            <img id="MainContent_Image10" src="images/img3.png" />
                        </li>
                    </ul> 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:15:10.340

我不确定，但是当我使用远程 .css 和 .js 文件时遇到了这样的问题，如果它们是远程的，请尝试将它们复制到您的文件夹中

# php - 使用javascript获取最后添加的字段数

> ID：14655460
> 
> 赞同：0
> 
> 时间：2013-02-01T21:38:14.563
> 
> 标签：php, javascript, jquery, html

我制作了一个表单，您可以通过单击按钮添加更多字段。每次单击按钮时，它都会创建一个新字段，其后面的数字更高。我用 jquery 做这个，我需要用 php 获得最高的数字。所以如果我有 auto_part1 和 auto_part2 我需要用 PHP 获得 2。

这是我的html：

```
<div id="parts">
    Part
    <input type="text" id="auto_part" name="auto_part" />
                <br />
    Description
    <input type="text" id="auto_description" name="auto_description" />
                <br />
</div>
    <a href="#" id="addField">Add another part</a> 
```

jQuery函数：

```
$(function() {
var scntDiv = $('#parts');
var i = $('#parts input').size() + -1;

$('#addField').on('click', function() {
    $('<br /><span>Part</span> <input type="text" id="auto_part'+i+'" name="auto_part'+i+'" /><br />').appendTo(scntDiv);
    $('<span>Description</span> <input type="text" id="auto_description'+i+'" name="auto_description'+i+'" /> <br />').appendTo(scntDiv);
    i++;
    return false;
});

$('#remScnt').on('click', function() { 
    if( i > 2 ) {
            $(this).parents('p').remove();
            i--;
    }
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:41:42.987

创建一个隐藏的输入字段：

```
<input type="hidden" id="row_count" name="row_count" value=""> 
```

并`onsubmit`做：

```
$('#row_count').val(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:41:18.473

如果我没记错请也使用堆栈溢出搜索..

在这里你可以找到一种方法..

[在同一页面上将 jQuery 变量传递给 PHP？](https://stackoverflow.com/questions/7680571/passing-jquery-variable-to-php-on-the-same-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:41:39.773

大概这是最终提交的形式？如果是这样，那么每次添加新的部件字段时，隐藏字段都会增加。然后当它被发送时，PHP 就可以抓住它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:42:37.110

添加一个隐藏字段 ( `<input type="hidden" name="added_counter" id="added_counter" value="0" />`)，使用您的递增/递减函数 ( ) 维护其值`$('added_counter').val(i);`，然后在处理表单提交期间使用 PHP 获取隐藏字段的值。

HTML：

```
<div id="parts">
    Part
    <input type="text" id="auto_part" name="auto_part" />
    <br />
    Description
    <input type="text" id="auto_description" name="auto_description" />
    <br />
</div>
<input type="hidden" name="added_counter" id="added_counter" value="0" />
<a href="#" id="addField">Add another part</a> 
```

jQuery：

```
$(function() {
    var scntDiv = $('#parts');
    var i = $('#parts input').size() + -1;

    $('#addField').on('click', function() {
        $('<br /><span>Part</span> <input type="text" id="auto_part'+i+'" name="auto_part'+i+'" /><br />').appendTo(scntDiv);
        $('<span>Description</span> <input type="text" id="auto_description'+i+'" name="auto_description'+i+'" /> <br />').appendTo(scntDiv);
        i++;
        $('added_counter').val(i);
        return false;
    });

    $('#remScnt').on('click', function() { 
        if( i > 2 ) {
                $(this).parents('p').remove();
                i--;
        }
        $('added_counter').val(i);
        return false;
    });
}); 
```

然后当你将表单提交给 PHP 时，PHP 可以获取新的 added_counter 隐藏字段的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T21:49:36.853

计算发布值的数量以获得最大数量。我将数据作为数组发布，但您不必那样做。

```
$('<br /><span>Part</span> <input type="text" id="auto_part'+i+'" name="parts['+i+'][name]" /><br />').appendTo(scntDiv);
$('<span>Description</span> <input type="text" id="auto_description'+i+'" name="parts['+i+'][description]" /> <br />').appendTo(scntDiv);

$parts=isset($_POST['parts'])?$_POST['parts']:array();
$highest_number=count($parts); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T21:53:12.133

如果您更改了命名添加的输入字段的方式怎么办。而不是使用： auto_part + 我使用 auto_part[]

与 auto_description 相同，将其命名为 auto_description[]。这样，它们将被 php 视为数组，您需要做的就是遍历数组。那对你有用吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T22:04:17.337

在您的 html 表单中添加：

```
<input type="hidden" id="count" value="0"/> 
```

在 onclick 事件中添加您的 javascript：

```
$('#count').val(i); 
```

然后你可以在php中获取你要找的值作为字段计数的值。

# google-visualization - 更改 x 轴标签以显示 Google 可视化气泡图的年份和季度

> ID：14655462
> 
> 赞同：2
> 
> 时间：2013-02-01T21:38:18.950
> 
> 标签：google-visualization

我试图让我的气泡图上的 x 轴按季度显示其标签值，例如“Q1 FY13”，类似于图表轴，如图所示：

![季度演示](../Images/19dd2fadbdd902d16980cd69b938e39a.png)

在 API 中，他们提到使用数据表中的域列作为角色，然后您可以在其中指定字符串，例如“Q1/09”（[https://developers.google.com/chart/interactive/docs/roles](https://developers.google.com/chart/interactive/docs/roles)），

```
role:  domain,   data,       data,   domain,   data,     data
      'Q1/09',   1000,        400,  'Q1/08',    800,      300 
```

但据我所知，这似乎受到您使用的图表类型的限制，气泡图的第一列必须是一个数字。

这是我目前所拥有的图片，以季度为轴，但遗憾的是，您不知道您在看哪一年...

![在此处输入图像描述](../Images/2eb386f4ea9e52e589d64dc8852a11ee.png)

那么有人知道这是否可能吗？如果没有，我可以采取另一种解决方法来显示这些标签吗？

更新：

虽然已接受答案的变通办法应该有效，但这是来自 google 组的答案，显示了如何将标签格式化为 Quarters：

[https://groups.google.com/forum/#!topic/google-visualization-api/_qk7DkPmKxU](https://groups.google.com/forum/#!topic/google-visualization-api/_qk7DkPmKxU)

如果您使用“日期”轴，则可以将轴标签格式化为四分之一（文档中未列出对日期轴的支持，但它可以工作）：http: [//jsfiddle.net/asgallant/m5bsr/](http://jsfiddle.net/asgallant/m5bsr/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:39:58.950

有两种方法可以做到这一点。您不能显示 X 轴标签，然后在其下方添加另一个显示轴类别的 div（例如，使用折线图）。

第二个图表中根本没有数据。可以在[这里](https://stackoverflow.com/questions/14194013/google-chart-how-to-draw-the-vertical-axis-for-linechart/14274651#14274651)找到一个例子：

```
 function drawVisualization() {
    // Create and populate the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('number', 'x');
    data.addColumn('number', 'Cats');
    data.addColumn('number', 'Blanket 1');
    // This dummy series is to extend the chart from 0-5 for padding
    data.addColumn('number', null);
    data.addRows([
      [{v: 1, f:'A'}, 1, 10, null],
      [{v: 2, f:'B'}, 2, 5, null],
      [{v: 3, f:'C'}, 4, 12, null],
      [{v: 4, f:'D'}, 8, 5, null],
      [{v: 5, f:''}, null, null, {v: 0, f:''}]
    ]);

    options = {
      curveType: 'function',
      lineWidth: 2,
      hAxis: {
        // Show a baseline at 0
        baseline: 0,
        // 6 Gridlines, 4 labels + left and right for padding
        gridlines: {
          count: 6
        },
        // Hide our labels
        textPosition: 'none'
      },
      vAxis: {
        baseline: 0,
      },
      series: [
        {},
        {},
        // Hide our dummy series
        {
          lineWidth: 0,
          pointsize: 0,
          visibleInLegend: false
        },
      ]
    };

    // Add dummy data for the axis labels
    var data2 = new google.visualization.DataTable();
    data2.addColumn('string', 'x');
    data2.addColumn('number', 'dummy');
    data2.addRows([
      ['A', null],
      ['B', null],
      ['C', null],
      ['D', null]
    ]);

    chart1 = new google.visualization.LineChart(document.getElementById('visualization'));
    chart1.draw(data, options);

    chart2 = new google.visualization.LineChart(document.getElementById('visualization2'));
    chart2.draw(data2,
                {
                  chartArea: {
                    top:0,
                    height:"0%"
                  },
                  min: 0,
                  max: 0,
                  hAxis: {
                    baselineColor: '#FFFFFF'
                  },
                  vAxis: {
                    baselineColor: '#FFFFFF',
                    direction: -1,
                    textPosition: 'none',
                    gridlines: {
                      color: '#FFFFFF'
                    }
                  }
                });
  } 
```

这可行，但有点烦人，因为您必须使用两个单独的图表，并且对于不知道您在做什么来找出代码的任何人来说，这都是违反直觉的。

所以[jeffery_the_wind 想出了一个很棒的解决方案](https://stackoverflow.com/posts/14605865)，它使用 jquery 来破解 SVG 的轴标签。诀窍是对齐轴标签，`position: in`然后使用 javascript 循环遍历 svg 寻找正确对齐的文本元素，并使用数组的内容更改它们的值。这是他使用的代码示例：

```
/*
 *
 * The following 2 functions are a little hacky, they have to be done after calling the "draw" function
 * The bubble chart originally displays only numbers along the x and y axes instead of customer or product names
 * These 2 functions replace those numbers with the words for the customers and products
 *
 */
for ( var i = -2; i < products.length + 1; i ++ ){
    $('#customer_product_grid svg text[text-anchor="start"]:contains("'+i+'")').text(function(j,t){
        if (t == i){
            if (i >= products.length || i < 0){
                return " ";
            }
            return products[i];
        }
    });
}

for ( var i = -2; i <= customers.length + 3; i ++ ){
    $('#customer_product_grid svg text[text-anchor="end"]:contains("'+i+'")').text(function(j,t){
        if (i >= customers.length + 1 || i <= 0){
            return " ";
        }else if (t == i){                    
            return customers[i-1];
        }
    });
} 
```

这个版本非常棒，而且可用性更好一些。但是，如果您想以某些方式将其他文本添加到图表/对齐事物，它确实会出现问题。

选择你的毒药！

# ruby - 没有数据库的网站搜索

> ID：14655466
> 
> 赞同：2
> 
> 时间：2013-02-01T21:38:36.400
> 
> 标签：ruby, middleman

我目前正在为客户建立一个网站。对于静态内容，我将使用中间人。该网站由一系列类别组成，每个类别中都有几个带有自己 html 页面的产品。例如：cars.html 里面有一系列指向 corolla.html 或accord.html 的链接

我计划只使用中间人来构建网站，并为 yaml 文件中的每个产品项目生成一个 html 页面。这样做确实可以加快开发速度（因为没有定期添加产品，几乎所有产品都会一次添加），但这意味着没有使用数据库。

我遇到的问题是该站点需要有一个搜索框（不是 Google 搜索），以便用户可以快速跳转到相关页面，但是如果没有适当的数据库，我不确定是否可以这样做。我可以用什么工具来归档这个？

我一直在寻找诸如 Ruby on Rails 或 Wordpress 之类的替代品，但我觉得这可能有点矫枉过正。任何帮助是极大的赞赏！谢谢，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T14:48:03.003

这是搜索中间人的潜在有用示例：

[https://github.com/joelhans/middleman-search-example](https://github.com/joelhans/middleman-search-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:37:01.880

您可能想看看[Swifttype](https://swiftype.com/)。应该与启用了 JavaScript 的静态站点一起使用。

不，我不隶属于 Swifttype。我只是认为这是一项很酷的服务，尽管将来可能会花费几美元。

# java - 模拟测试soap界面

> ID：14655469
> 
> 赞同：2
> 
> 时间：2013-02-01T21:38:42.257
> 
> 标签：java, web-services, cxf, response

我有一个网络服务，我正在异步调用它。它返回一个 javax.xml.ws.Response 对象。我试图模拟这个 web 服务接口以返回相同的响应对象。但我无法构建响应对象。

网络服务调用：

```
public Response<com.company.SomeResponse> retrieveSomeValuesAsync(
        @WebParam(name = "arg0", targetNamespace = "")
        com.company.SomeRequestTO arg0
    ); 
```

所以我打电话给这个方法。现在我的观点是如何构建作为 javax.xml.ws.Response 对象的返回对象（响应）。我试图做这样的事情，但它不起作用。它抛出一个 ClassCastException

我的代码：

```
Response<com.company.SomeResponse> someResponse = (Response<com.company.SomeResponse>)new com.company.SomeResponse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T23:07:16.270

[javax.xml.ws.Response](http://docs.oracle.com/javaee/5/api/javax/xml/ws/Response.html)是一个接口。因此，为了模拟它，您必须返回它的实现。只需简单地创建一个类，实现这个接口，覆盖它的方法，然后在你的方法中创建这个类的一个实例并返回它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T14:59:26.087

我建议使用 JaxWsServerFactoryBean 类生成一个 SOAP 端点。我在[这里](https://github.com/skjolber/mockito-soap-cxf)提出了一个示例 JUnit Rule 实现。

# ruby-on-rails - 从大数组中获取属性到 link_to

> ID：14655476
> 
> 赞同：0
> 
> 时间：2013-02-01T21:38:50.210
> 
> 标签：ruby-on-rails, ruby

我正在创建一个列出员工并使用自联接来显示经理和 direct_reports 的应用程序。

在我的模型中，我有：

```
has_many :direct_reports, :class_name => "Person", :foreign_key => "manager_id"
belongs_to :manager, :class_name => "Person" 
```

在我看来，我试图链接到员工的所有 direct_reports，其中他们的姓名（分为 fname 和 lame）构成链接。

目前，在我看来，对于 direct_reports，我有以下 Rails 指南推荐的内容。

```
<%= @person.direct_reports %> 
```

这导致生成这个。

```
 [#<Person id: 3674, fname: "Leland", lname: "Allison", phone: "8474020494", email: 
    "leland.allison@myco.com", ntid: "lalli", address: "3568 Sanders Rd.", city: 
    "Northbrook", state: "IL", zipcode: "60062", country: "USA", suite: nil, column: 
    nil, title: nil, department: nil, created_at: "2013-02-01 19:17:58", updated_at: 
    "2013-02-01 19:17:58", equipment: nil, capacity: nil, latitude: nil, longitude: 
    nil, manager: nil, direct_report: nil, manager_id: 3668>, #<Person id: 3685, fname:
     "Rochelle", lname: "Baldwin", phone: "8474020338", email: "rochelle.baldwin@myco.com",
     ntid: "rbald", address: "3412 Sanders Rd.", city: "Northbrook", state: "IL", 
    zipcode: "60062", country: "USA", suite: nil, column: nil, title: nil, department: 
    nil, created_at: "2013-02-01 19:17:58", updated_at: "2013-02-01 19:17:58", equipment: 
    nil, capacity: nil, latitude: nil, longitude: nil, manager: nil, direct_report: nil,
     manager_id: 3668>, #<Person id: 3692, fname: "Tammy", lname: "Barnett", phone: 
    "8474020275", email: "tammy.barnett@myco.com", ntid: "tbarn", address: "3349 
    Sanders Rd.", city: "Northbrook", state: "IL", zipcode: "60062", country: "USA", 
    suite: nil, column: nil, title: nil, department: nil, created_at: "2013-02-01 19:17:58",
     updated_at: "2013-02-01 19:17:58", equipment: nil, capacity: nil, latitude: nil, 
    longitude: nil, manager: nil, direct_report: nil, manager_id: 3668>] 
```

所以我显然得到了每条记录的整个对象，这比我需要的要多。

我尝试将以下内容放在我的观点中：

```
<% @people.each do |person| %>
  <%= link_to person.lname + ", " + person.fname, person %>
<% end %> 
```

但这行不通。我收到“nil:NilClass 的未定义方法‘每个’”错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:52:49.057

您还没有定义`@People`，所以没有 each 。这将是`@person.direct_reports.each`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:55:54.840

您应该将值保存在任何变量中，然后对其应用每个变量。没有`@people`变量定义，因此`@people`为零。

您的代码在控制器中将如下所示：

```
@people = @person.direct_reports 
```

并查看您的代码将如下所示：

```
 <% @people.each do |person| %>
        <%= link_to person.lname + ", " + person.fname, person %>
    <% end %> 
```

现在可以使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:58:48.170

```
`def people_and_reports(person)
  [person, person.direct_reports.map {|p| people_and_reports(p)}].flatten.uniq
end

@people = people_and_reports(@person)` 

哎呀..只是重读问题..这将递归地从一个人走到所有报告和报告报告。你可能只需要@people = @person.direct_reports 
```

# knockout.js - 工具提示文本绑定和模态对话框不适用于 Knockout

> ID：14655485
> 
> 赞同：0
> 
> 时间：2013-02-01T21:39:29.510
> 
> 标签：knockout.js, tooltip, modal-dialog, qtip

我创建了这个小提琴示例[http://jsfiddle.net/adi85/mBpJB/8/](http://jsfiddle.net/adi85/mBpJB/8/)

我无法将数据绑定到工具提示，并且我正在尝试使用由于模板绑定而无法工作的模态对话框。

```
<table class="tbl" id="dash" >    
    <thead><tr>
        <th>Title</th>
        </tr></thead>
    <tbody data-bind="foreach: course">
        <tr>
          <td><a href="#" id="qtipselector_01" data-bind="text: title, loadqtip: true"></a></td>
          <div id="TooltipContent_01" class="hidden"><!--for each tr there will be a tool tip-->
     <!-- in the below a tag the bidning is not working and also the dialog box is not working for me --> 
            <a data-bind="text: title" data-reveal-id="dialog" data-animation="fade"> Enroll </a>
          </div>
    </tr>   
    </tbody>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:34:15.153

控制台是您的朋友：

未捕获的错误：无法解析绑定。消息：ReferenceError：标题未定义；绑定值：文本：标题

在我看来，您需要访问课程 observableArray 项目略有不同。

[http://jsfiddle.net/mori57/mBpJB/6/](http://jsfiddle.net/mori57/mBpJB/6/)

```
<table class="tbl" id="dash" >    
    <thead><tr>
        <th>Title</th>
        </tr></thead>
    <tbody data-bind="foreach: course">
        <tr>
          <td><a href="#" id="qtipselector_01" data-bind="text: $data.title, loadqtip: true"></a></td>
          <div id="TooltipContent_01" class="hidden">
            <a data-bind="text: $data.title" data-reveal-id="dialog" data-animation="fade"> Enroll </a>
          </div>
    </tr>   
    </tbody>
 </table> 
```

本质上，我所做的只是告诉它访问 $data.title，而不是 title。目前不记得为什么这会起作用，只是调用 title 不会，但看看 Fiddle，也许这会让你到达你需要去的地方。

# c# - 在 OnRowDataBound 事件中格式化 GridView 中的数据

> ID：14655486
> 
> 赞同：1
> 
> 时间：2013-02-01T21:39:31.697
> 
> 标签：c#, asp.net, data-binding, gridview

我有一个`GridView`，其中第一列显示一组三个中的冗余数据。我需要消除这种冗余，以便只显示一个代码实例。

这是看起来的`GridView`样子：

```
A1234 | Total Entries                  | 1    | 7   |     |                   
A1234 | Equipment Entries              | 1    | 7   |     |                 
A1234 | Total Repair Time              | 60   | 140 |     |                   
B9876 | Total Entries                  | 87   | 36  | 14  | 
B9876 | Equipment Entries              | 87   | 36  | 143 | 
B9876 | Total Repair Time              | 2070 | 790 | 370 |   
C3456 | Total Entries                  | 1    |     |     |        
C3456 | Equipment Entries              | 1    |     |     |       
C3456 | Total Repair Time              | 190  |     |     | 
```

我希望它看起来像（而且我似乎无法正确格式化），因此在第一列中，代码 A1234、B9876 和 C3456 只显示一次，而不是显示的三次 - 所以有黑色空间/细胞。

我拥有的最新代码基本上是这样的：

```
protected void gvMetrics_OnRowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {   
        DataRow _data = ((DataRowView)e.Row.DataItem).Row;

        // _lastCode is a clas level variable
        if (_lastCode.ToString() != _data.ItemArray[0].ToString())
        {
            if (_totals == 1)
            {
                _lastCode = _data.ItemArray[0].ToString();
                e.Row.Cells[0].Text = _data.ItemArray[0].ToString();
               _totals++;
            }  
         }
         else
          _totals = 1; // Class level variable initialized to 1.
     }
 } 
```

出于某种原因，我无法格式化代码，但你得到了图片。我在这里的理由是，我会将代码分配给类变量，并且对于每个`OnRowDataBaound`事件，我都会检查该值是否与当前单元格匹配。如果匹配，请跳过写入`GridView`/page。那没有用，所以我想我可以使用一个计数器，在第三次事件后将其重置为 1 - 再次不起作用。

我觉得我很接近但没有雪茄！我会想象这在阳光下没有什么新鲜事，所以如果有人能提出解决方案，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:47:54.483

最好的方法是将第一列变成 a`TemplateField`并添加 a`Literal`并实现`OnDataBinding`事件。

例子：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Literal ID="ltYourField" runat="server"
            OnDataBinding="ltYourField_DataBinding" />
    </ItemTemplate>
</asp:TemplateField> 
```

然后在您的 .cs 代码隐藏中：

```
// Create a global to store last value found for the field
string _lastValueDisplayed = string.Empty; 
```

实施`OnDataBinding`：

```
protected void ltYourField_DataBinding(object sender, System.EventArgs e)
{
    Literal lt = (Literal)sender;
    string displayValue = Eval("yourFieldNameFromResult").ToString();
    lt.Text = _lastValueDisplayed.Equals(displayValue) ?
        string.Empty : displayValue;
    // store value for checking on next row
    _lastValueDisplayed = displayValue;
} 
```

尽量不要在其中做绑定的东西，`OnRowDataBound`因为那样你的代码必须寻找控件。如果您改用 OnDataBinding 将功能与相关控件绑定，则它会将您的代码范围专门用于您想要的控件，并且不会进行搜索。

# objective-c - 我将如何关闭键盘 UITextField

> ID：14655494
> 
> 赞同：0
> 
> 时间：2013-02-01T21:40:25.570
> 
> 标签：objective-c

我想知道如何处理 UITextField 中的关闭键盘，当我通过 Outlets 执行此操作时，我知道该怎么做，但现在我在这样的代码中声明我的文本字段：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
}

cell.accessoryType = UITableViewCellAccessoryNone;

UITextField *playerTextField = [[UITextField alloc] initWithFrame:CGRectMake(10, 10, 185, 30)];
playerTextField.adjustsFontSizeToFitWidth = YES;
playerTextField.textColor = [UIColor blackColor];
if([indexPath row] == 0) {
    playerTextField.placeholder = @"Server Address";
    playerTextField.keyboardType = UIKeyboardTypeDefault;
    playerTextField.returnKeyType = UIReturnKeyDone;
} else if([indexPath row] == 1){
    playerTextField.placeholder = @"Server Port";
    playerTextField.keyboardType = UIKeyboardTypeDecimalPad;
    playerTextField.returnKeyType = UIReturnKeyDone;
} else {
    playerTextField.placeholder = @"Password";
    playerTextField.keyboardType = UIKeyboardTypeDefault;
    playerTextField.returnKeyType = UIReturnKeyDone;
    playerTextField.secureTextEntry = YES;
}

playerTextField.backgroundColor = [UIColor clearColor];
playerTextField.autocorrectionType = UITextAutocorrectionTypeNo;
playerTextField.autocapitalizationType = UITextAutocapitalizationTypeNone;
playerTextField.textAlignment = UITextAlignmentLeft;
playerTextField.tag = 0;

playerTextField.clearButtonMode = UITextFieldViewModeNever;
[playerTextField setEnabled: YES];

[cell.contentView addSubview:playerTextField];

return cell;
} 
```

我将如何管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:19:31.163

因为您的文本字段位于单元格内，所以您需要标记它，您已经是，但是我建议使用不同于`0`. 然后每当您需要辞职时（假设您知道要查找哪个单元格）：

```
 UITextField *myField = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:myRow inSection:mySection]].contentView viewWithTag:myTag];
    [myField resignFirstResponder]; 
```

如果您不知道它是哪个单元格，那么您需要遍历所有单元格。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:18:56.153

似乎您有很多文本字段，每个单元格中都有一个？

您需要添加属性`@property (strong, nonatomic) UITextField *currentTextField`

在您的 textField 创建方法中，您需要将表视图控制器设置为文本字段委托：

```
playerTextField.delegate = self; 
```

然后你必须让你的 tableViewController 实现 UITextFieldDelegate 协议（`<UITextFieldDelegate>`在你的头文件中添加你的类名），然后为这个方法添加实现：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
     self.currentTextField = textField;
} 
```

这意味着当其中一个 textFields 开始编辑时，它会被跟踪。

可能你有事件或按钮会调用类似`(void)save`动作的东西。添加到它的实现：

```
- (void)save {
     [self.currentTextField resignFirstResponder];
} 
```

您还可以跟踪 textField 何时完成编辑：`(void)textFieldDidEndEditing:(UITextField *)textField`

# android - 如何使文本样式看起来蚀刻

> ID：14655495
> 
> 赞同：0
> 
> 时间：2013-02-01T21:40:28.930
> 
> 标签：android, text, styles

有没有办法让文字看起来蚀刻？我希望我的文本视图中的文本看起来蚀刻。我尝试在阴影中使用负值，但 0 似乎是最低值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:44:53.197

您可以使用文本阴影来执行此操作。首先，确保阴影颜色比文本颜色浅，并使用如下内容：

```
.etched {
    color: #222;
    text-shadow: 0px 2px 3px #555;
} 
```

# jquery - 需要帮助在 sharepoint 环境中使用 jquery 解析 CSV 文件

> ID：14655496
> 
> 赞同：2
> 
> 时间：2013-02-01T21:40:34.430
> 
> 标签：jquery, sharepoint, csv

我正在开发一个 html/javascript 中的迷你应用程序，它读取一个 CSV 文件，并在其中直观地输出信息。很简单的东西，至少我是这么认为的。我已经让它在本地（在 Firefox 中）运行良好，并且在所有浏览器中通过 http 运行。但是当我把它交给客户端时，csv 不会加载，大概是因为他们的 Sharepoint 环境中的安全限制。有什么建议么？

我目前正在使用以下方式从 CSV 中读取信息：

```
function openCsv(whichCsv){ //loads the CSV file which.csv
resetApp();
$.ajax({
    type: "GET",
    url: whichCsv,
    dataType: "text",
    success: function(data) {processData(data);}
    });
} 
```

# php - php-form-b uilder-class 文件未上传

> ID：14655499
> 
> 赞同：1
> 
> 时间：2013-02-01T21:40:48.533
> 
> 标签：php, forms, file-upload

我试图让 File 元素在 pfbc 中工作，但除了文件名之外我没有得到任何东西`$_POST['AvatarLrg']`，`$_FILES`是空的。有没有人有一个我可以细读的工作示例？

在顶部：

```
<?php
$form = new Form('trucking_edit');
$form->configure(array( "enctype" => "multipart/form-data" ));
$form->addElement(new Element_File("Profile Avatar:", "AvatarLrg"));
$form->addElement(new Element_Button);
?> 
```

在体内：

```
<?php $form->render(); ?> 
```

表单显示正常，所有其他元素显示并正常工作，只有文件：/任何帮助表示赞赏。

编辑：生成的 HTML：

```
<form method="POST" id="edit_profile" action="profile.php?pid=16&edit=save" name="tf_profileedit">
...
<div class="control-group">
   <label class="control-label" for="trucking_edit-element-3">Profile Avatar:</label>
   <div class="controls">
      <input type="file" name="AvatarLrg" id="trucking_edit-element-3"/>
   </div>
</div>
...
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:14:47.580

我从未使用过该类，但错误原因是表单标记中缺少 enctype 属性。

所以检查`$form->configure(array( "enctype" => "multipart/form-data" ));`你的代码中的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:14:57.233

```
<form method="POST" enctype='multipart/form-data' id="edit_profile" action="profile.php?pid=16&edit=save" name="tf_profileedit">
...
<div class="control-group">
   <label class="control-label" for="trucking_edit-element-3">Profile Avatar:</label>
   <div class="controls">
      <input type="file" name="AvatarLrg" id="trucking_edit-element-3"/>
   </div>
</div>
...
</form> 
```

你忘记了 enctype

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:30:43.270

我发现了问题；页面上的另一个表单正在干扰它（由于旧代码它们重叠）。我删除了另一种形式，它可以工作。我还可以删除 enctype 行，因为当您添加文件元素时 PBFC 会自动更改 enctype。谢谢大家帮助。

# java - 光标生命周期问题

> ID：14655505
> 
> 赞同：0
> 
> 时间：2013-02-01T21:41:31.543
> 
> 标签：java, android

我正在尝试修复我整天都在与之斗争的“最终确定”错误。在我尝试了许多不同的数据库和 cursor'.close()' 方法后，这个问题仍然存在。

显示的代码是它现在的样子。如果有人可以指导我以正确的方式关闭我的光标和数据库，那就太好了，因为目前如果我关闭一个，它似乎与另一个冲突！

目前，我正在尝试使用从对话框列表的 Intent 调用的“AddAppointmentContact”类的“onCreate”方法中设置的对象方法中设置的对象方法设置一个“EditText”。

目前我收到此错误：

错误：

```
02-01 21:23:18.947: E/Cursor(274): Finalizing a Cursor that has not been deactivated or closed. database = /data/data/com.example.flybase2/databases/persons_name, table = contactsTable, query = SELECT _id, persons_name, persons_telephone, persons_email, persons_comments FROM contactsTable WHER 
```

我在我的代码中的其他地方运行类似的代码，这工作正常。

这是与我从包含对话框的列表视图中选择的名称 ID 捆绑在一起的代码：

```
else if (items[item].equals("Add Appointment")) {

Intent conAdd = new Intent("com.example.flybase2.AddAppointmentContact");
conAdd.putExtra("newpassedID", idToPass);
startActivity(conAdd); 
```

以及打开的“AddAppointmentContact”类：

```
Bundle extras = getIntent().getExtras(); 
    sentID = extras.getLong("newPassedID"); 

    DBHandlerApp NameAppointPass = new DBHandlerApp(this, null, null);

    NameAppointPass.open();
    String nameReturned = NameAppointPass.getName(sentID);

    setName = (EditText) findViewById(R.id.inputAppName);
    setName.setText(nameReturned); 
```

和 '.getName()' 方法：

```
public String getName(long passedID) {

String [] columns = new String[]{KEY_ROWAPPID, KEY_NAMEAPP,   KEY_TYPEAPP, KEY_TIMEAPP, KEY_DATEAPP, KEY_COMMENTAPP};
        Cursor c = ourDatabase.query(DATABASE_TABLEAPP, columns, KEY_ROWAPPID + "=" + passedID, null, null, null, null);

        if(c != null && c.getCount() > 0)
        {
        c.moveToFirst();
        String name = c.getString(1);

        return name;
        }

        return null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:43:51.973

您需要关闭光标。

`c.close()`在返回名称或 null 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:47:55.903

还同意您必须关闭您的`Cursor`. 试试这个：

```
 if(c != null) {
        if(c.getCount() > 0 && c.moveToFirst())
        {
            String name = c.getString(1);
            c.close();
            return name;
        }
        c.close();
    }
    return null; 
```

# c# - 发布 Winform 应用程序时，SlowCheetah 2.5.2 损坏

> ID：14655510
> 
> 赞同：0
> 
> 时间：2013-02-01T21:41:47.010
> 
> 标签：c#, visual-studio-2012, publish, visual-studio-extensions, slowcheetah

今天升级到 SlowCheetah 2.5.2 后，将 WinForm 应用程序发布到网络驱动器不再起作用。

由于某些奇怪的原因，必须对其进行一些转换的 App.config 文件不再是部署文件的一部分:-(因此 Winform 应用程序不起作用。

今天早上我确实部署没有任何问题，然后 Visual Studio 2012 通知我有关我安装的 SlowCheetah 的更新，后来通知发布已损坏。

当我进入项目属性设置并选择“发布”并单击“应用程序文件”时，有时会显示 ProgramName.exe.config，有时不显示，它是包含的，必需的，但它最终不会出现在部署的文件中文件夹。

我解决了这个问题，删除了App.config+发布和调试文件，再次添加了一个App.config，从之前发布的版本中获取了ProgramName.exe.config的内容，放到了App.config中。然后它又起作用了。

所以我认为这是某种方式出错的转换:-( 不完全确定它是 SlowCheetah，但我没有在计算机或 Visual Studio 2012 中更改任何其他内容。

有谁知道解决这个问题的方法？我一直无法找到 SlowCheetah 的早期版本 :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:57:46.143

抱歉，我想我在这里引入了一个错误。我已经更新[了 SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)，更新应该可以解决这个问题。您可以尝试一下，如果您有任何其他问题，请告诉我？

它应该通过[这些](https://github.com/sayedihashimi/slow-cheetah/commit/f3cafcc4549f2c0aa26030d92150738ee2277f87) [提交](https://github.com/sayedihashimi/slow-cheetah/commit/1f90325f2d1a72f221fe116289c1a8c14c43ccfa)中的更改来解决。

# c# - 上传图像，图像被保存两次

> ID：14655513
> 
> 赞同：0
> 
> 时间：2013-02-01T21:42:03.100
> 
> 标签：c#, .net

我正在使用 jQuery 上传图像，到目前为止它运行良好。

图像被保存，但它被保存了两次，有两个不同的文件名。文件名是从`DateTime.Now`. 上传控件位于发布到 iframe 的表单中。

保存图像的代码如下所示：

```
int SaveInt = 0;

using (var m = new MemoryStream())
{
    bmp.Save(m, ImageFormat.Png);
    var img = Image.FromStream(m);

    var ratio = (double)1100 / img.Width;
    var newWidth = (int)(img.Width * ratio);
    var newHeight = (int)(img.Height * ratio);
    var newImage = new Bitmap(newWidth, newHeight);

    using (var g = Graphics.FromImage(newImage))
    {
        g.DrawImage(img, 0, 0, newWidth, newHeight);
    }

    img = Bloggdesign.Tools.CropImage(newImage, new Rectangle(0, 0, 1100, 
```

500));

```
 if (SaveInt == 0)
    {
        img.Save(Server.MapPath("~/trashcan/") + NewFilename + ".png");
        SaveInt++;
    }
}

if (FileToDel != null)
{
    File.Delete(Server.MapPath("/trashcan/" + FileToDel + ".png"));
} 
```

该`SaveInt`变量仅用于测试，但即使使用“if（SaveInt ==0”和添加的数字，它仍然会保存图像两次。当我调试时，我注意到第一个图像在`img.Save()`被触发的行之后直接保存，第二个图像在到达最后一个“}”时被保存`Page_Load`。在此之后，代码将一些行跳转到此：

```
if (FileToDel != null)
{
    File.Delete(Server.MapPath("/trashcan/" + FileToDel + ".png"));
} 
```

第二张图片就是在这里保存的。我在代码中遗漏了什么吗？太奇怪了，图像突然被保存了两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:45:27.197

听起来您要触发两次代码。代码看起来不错。您能否发布触发您保存的代码并确保您也没有这样做`Page_Load`。

# delphi - Delphi - X个组件后的TScrollBox问题

> ID：14655516
> 
> 赞同：1
> 
> 时间：2013-02-01T21:42:09.880
> 
> 标签：delphi, delphi-2009

在我向 TScrollBox 添加了如此多的 TPanel 之后，我注意到在我的一个测试应用程序中，我遇到了超过一定数量的问题。我在绘制之前禁用了滚动框，并且在绘制之前它总是被清除，因此没有相对位置问题。最初我想也许我已经达到了某种最大的绘画高度。所以你知道这种排列是垂直堆叠的占据宽度的面板。

所以我创建了一个新项目来尝试识别和解决问题，它揭示了问题的更多细节。当我在家时，我可以提供示例和视频，但我现在将描述。使用 TScrollBox 制作了一个 spinedit 表单，以指定一个按钮在循环中创建面板的数量以及一个用于释放面板并清空数组以供再次尝试的按钮。我将标题设置为循环中的数字以进行识别。

我尝试了 2 种堆叠方式，看看是否重要。一种是设置位置 I 乘以高度，因此如果高度为 200，则 i * 202 给它一个 2px 的空间。我尝试的新方法是使用 align top 。它可能在效果上略有不同，但总的来说问题仍然相同。

新问题是滚动范围。循环完成并启用滚动框后，向下滚动到底部会在最后一个编号的面板处停止。但它的 200 个面板可能有 199 个低于 169 个。然后滚动条调整范围，让我到达底部，只看到最后一个面板 198 的下一个。我相信这是使用 align top 方法发生的，因为它从未在我的应用程序中发生过。我会进一步测试。

底部面板没有放在一边我认为解决这个问题的方法是手动计算和设置范围。

在我的应用程序中设置位置而不是使用 align top 时出现的主要问题是，在一定数量的面板之后，它们都位于同一位置的末尾。在一定数量之前，它的罚款说是 50 或 100，但在发生了这么多之后。我知道 200 乘以 200 是一个很小的整数，但也许有地址限制？

我将继续测试我仍然需要检查面板高度是否添加到其中。但认为这必须是一个已知问题。顺便说一句，德尔福 2009。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T23:20:14.147

这是 Windows 的限制：Windowed 控件的大小不能超过 65,535 像素。

请参阅有关[WM_SIZE 消息](http://msdn.microsoft.com/en-us/library/ms632646(VS.85).aspx)的文档，其中宽度和高度在单个 32 位参数中一起传递：

> 参数
> 
> lParam 的低位字指定客户区的新宽度。
> 
> lParam 的高位字指定客户区的新高度。

因此宽度和高度值限制为 16 位。即：当[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx)涉及到或类似时，由`SetBounds`调用，由设置调用`Top`。

随后，`Top`控件的值（可能为负）被限制为 15 位和 1 个符号位，因此为 +-32,767。具体来说：那是受其`Control.ClientOrigin.X/Y`约束的地方。`Top`例如，对于放置在 1920x1200 像素屏幕中间的控件，因此解析的最大值为 32,167。

这就是为什么最后一个面板出现在滚动框中的同一位置的原因。

请注意，此限制不适用于没有 Windows 句柄的 VCL 控件。

* * *

### 怎么解决？

`Top`滚动框内的子控件的属性是相对于该框的可见客户端区域的；滚动滚动条会重置`Top`所有子项的属性。

所以（就）在达到魔法极限之前，通过滚动滚动框来欺骗 Windows：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  I: Integer;
  J: Integer;
  P: TPanel;
begin
  ScrollBox1.DisableAlign;
  try
    ScrollBox1.VertScrollBar.Range := 400 * 202; // 80,800 ! ;-)
    for I := 0 to 3 do
    begin
      ScrollBox1.VertScrollBar.Position := I * 100 * 202;
      for J := 0 to 99 do
      begin
        P := TPanel.Create(Self);
        P.SetBounds(0, J * 202, 100, 200);
        P.Align := alCustom;
        P.Caption := IntToStr(I * 100 + J);
        P.ParentBackground := False;
        P.Color := Random(clWhite);
        P.Parent := ScrollBox1;
      end;
    end;
  finally
    ScrollBox1.VertScrollBar.Position := 0;
    ScrollBox1.EnableAlign;
  end;
end; 
```

* * *

### 如何更好地解决？

代替`TPanel`(a `TWinControl`)，使用`TControl`衍生产品绕过对`SetWindowPos`.

* * *

### 怎么解决最好？

使用虚拟方法，就像这样`TDBControlGrid`做一样，只显示几个面板，同时给人一种有很多的印象。

# c# - 如何在不使用 LINQ 遍历整个列表的情况下在 c# 列表中找到第一个出现？

> ID：14655519
> 
> 赞同：3
> 
> 时间：2013-02-01T21:42:19.200
> 
> 标签：c#, linq

我有一个清单：`var strings = new List<string>();`

我的列表包含 5 个字符串。

```
 string.Add("Paul");
 string.Add("Darren");
 string.Add("Joe");
 string.Add("Jane");
 string.Add("Sally"); 
```

我想遍历列表，一旦找到以“J”开头的字符串，我就不需要继续处理列表。

LINQ可以做到这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T21:43:45.773

尝试：

```
strings.FirstOrDefault(s=>s.StartsWith("J")); 
```

而且，如果您不熟悉 LINQ，我建议您[在 C# 中阅读 101 个 LINQ 示例。](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T21:43:54.410

您可以使用[`FirstOrDefault`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)：

```
var firstMatch = strings.FirstOrDefault(s => s.StartsWith("J"));
if(firstMatch != null)
{
    Console.WriteLine(firstMatch);
} 
```

[**演示**](http://ideone.com/TPOM13)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:43:27.707

```
bool hasJName = strings.Any(x => x.StartsWith("J")); 
```

这将检查是否存在任何以 J 开头的名称。

```
string jName = strings.FirstOrDefault(x => x.StartsWith("J")); 
```

这将返回以 J 开头的名字。如果找不到以 J 开头的名称，则返回`null`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T21:43:35.683

使用[`First`](http://msdn.microsoft.com/en-us/library/vstudio/bb291976%28v=vs.100%29.aspx)LINQ 方法（在 中`System.Linq`）：

```
strings.First(e => e.StartsWith("J")); 
```

或者`FirstOrDefault`，如果您不确定列表中的任何元素是否满足条件：

```
strings.FirstOrDefault(e => e.StartsWith("J")); 
```

然后，`null`如果没有找到任何元素，则返回。

# css - css3 旋转在 IE9 中不起作用

> ID：14655520
> 
> 赞同：0
> 
> 时间：2013-02-01T21:42:20.653
> 
> 标签：css, rotation, internet-explorer-9

这段代码允许我在鼠标悬停在其中一个上时缓慢旋转图像。

```
 .foo img {
     -webkit-transition: all 0.5s ease;
     -moz-transition: all 0.5s ease;
       -o-transition: all 0.5s ease;
      -ms-transition: all 0.5s ease;
          transition: all 0.5s ease;
    }
     .foo img:hover {
      -webkit-transform: rotate(-10deg);
     -moz-transform: rotate(-10deg);
      -o-transform: rotate(-10deg);
      -ms-transform: rotate(-10deg);
          transform: rotate(-10deg);
    } 
```

它适用于 FF18 和 Opera。但是，我无法让它在 IE9 上运行，即使 -ms-transform 应该是正确的解决方案。IE9 就像没有特定的 CSS`img:hover`规则一样。有什么提示吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:06:37.140

[http://modernizr.com/download/](http://modernizr.com/download/)

Modernizr 应该可以解决问题。

# php - 我的阵列有问题

> ID：14655521
> 
> 赞同：0
> 
> 时间：2013-02-01T21:42:22.297
> 
> 标签：php, arrays

好的，我有一个问题。我想设置一个新闻提要，这将显示用户在放置时收到的问题和评论。我设置了一个函数来完成所有这些。同样，我不知道它是否是最有效的，但我只想让它工作。所以这就是我所拥有的

```
public function foo ()
{
    //Retrieve all of the questions
    $Statement = $this->Database->prepare("SELECT * FROM table WHERE condition = ?");
    $Statement->execute(array($this->variable));

    while ($row = $Statement->fetch(PDO::FETCH_ASSOC))
    {
        $id[]           = $row["id"];
        $question[]     = $row["question"];
        $asker[]        = $row["asker"];
        $timestamp[]    = $row["timestamp"];
        $likes[]        = $row["likes"];
    }

    $iLimit = count($id); //Set a limit based on the size of the array

    if ($iLimit > 0)
    {
                    //Save everything in an array for the questions
        for ($iCount = 0; $iCount < $iLimit; $iCount++)
        {
            $question[$iCount] = Array ( "id"           => $id[$iCount],
                                         "text"         => $question[$iCount],
                                         "username"     => $asker[$iCount],
                                         "timestamp"    => $timestamp[$iCount],
                                         "likes"        => $likes[$iCount] );
        }
    }

    //Retrieve all of the comments
    $Statement = $this->Database->prepare("SELECT * FROM table WHERE condition = ?");
    $Statement->execute(array($this->variable));

    while ($row = $Statement->fetch(PDO::FETCH_ASSOC))
    {
        $id[]           = $row["id"];
        $comment[]      = $row["comment"];
        $commenter[]    = $row["commenter"];
        $timestamp[]    = $row["timestamp"];
        $likes[]        = $row["likes"];
    }

    $iLimit = count($id); //Set a limit based on the size of the array

    if ($iLimit > 0)
    {
                    //Save everything in an array for comments
        for ($iCount = 0; $iCount < $iLimit; $iCount++)
        {
            $comment[$iCount] = Array ( "id"            => $id[$iCount],
                                        "text"          => $comment[$iCount],
                                        "username"      => $commenter[$iCount],
                                        "timestamp"     => $timestamp[$iCount],
                                        "likes"         => $likes[$iCount] );
        }
    }

    //Merge the two arrays
    $aNewsFeed = array_merge($question, $comment);

    foreach ($aNewsFeed as $row) 
    {
        $aOrdered[]  = $row["timestamp"];
    }

    array_multisort($aOrdered, SORT_DESC, $aNewsFeed); //Sort the array

    return $aNewsFeed;
} //end getNewsFeed 
```

然后我使用 foreach 循环调用它

```
foreach ($Class->foo() as $news) 
{
    echo $news["text"]
} 
```

但每次它总是给出两个额外的 foreach 循环的空白运行。或者我不知道它是否实际上是数组的一部分，因为如果它是 foreach 循环的问题，通常它会发出错误。我认为它必须是 array_merge() 函数的问题，但我不完全确定。有任何想法吗？

感谢您的帮助。对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:51:02.317

似乎您正在使用数组`$id`,`$likes`等作为临时变量，但在第二次使用它们之前您没有重置它们，因此`$id`当您开始使用它进行评论时，您的数组中会有问题。

在您（重新）使用它们之前，您应该始终初始化您的数组：

```
$id = array();
// first loop

$id = array();
// second loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:51:15.683

```
foreach ($Class->foo() as $news) 
{
    if($news["text"]!=""){
        echo $news["text"];
    }
} 
```

# ios - 在 touchesMoved 期间取消触摸事件

> ID：14655523
> 
> 赞同：3
> 
> 时间：2013-02-01T21:42:27.037
> 
> 标签：ios, uiview, touch, touch-event

我需要在 touchesMoved 期间取消触摸事件，以便底层 uiviews 可以接收事件。请参阅下面的评论：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    for (UITouch *touch in touches)
    {

        if (touch.view == self.touchOverlay) {
            CGPoint touchLocation = [touch locationInView:touch.view];

            //perform checks on touch location and trip sensor if circumstances are met

            if (self.touchSensorTripped) {
                self.touchOverlay.userInteractionEnabled = NO;
                //NEED TO CANCEL THE TOUCH HERE SO THAT VIEWS UNDERNEATH CAN RECEIVE THE TOUCH EVENTS
            }

        }

    }
} 
```

目前底层视图在触摸结束之前不会接收触摸事件，这为时已晚。一旦覆盖视图被禁用，我需要他们立即开始接收 touchesMoved 事件，而触摸仍在移动。我可以在上面的评论中插入什么来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T20:38:20.140

I just did some simple messing around with a test app, and found that calling `[[self superview]touchesMoved:touches withEvent:event];` seemed to work for a straightforward view hierarchy, if that's what you have. The superview's touchesMoved was definitely called before the view touchesEnded. Calling the superviews touchesMoved prematurely in this way didn't cause it to be called again afterwards

# actionscript-3 - Actionscript 3 在新窗口中打开

> ID：14655528
> 
> 赞同：4
> 
> 时间：2013-02-01T21:43:04.320
> 
> 标签：actionscript-3, flash

我是 Actionscript 的新手，当我说新的时，我的意思是昨天......

我有这个代码在这里打开一个新链接

```
myButton.addEventListener(MouseEvent.CLICK,goThere);
function goThere(e:MouseEvent){
    var request = new URLRequest("http://www.jamessuske.com/freelance/korkis/3DLibrary.php");
    navigateToURL(request);
} 
```

我如何让它在新窗口中打开大小？

谢谢，J

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T22:01:11.203

我认为添加`_blank`到`navigateToURL`将打开一个新窗口（请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)）：

```
function goThere(e:MouseEvent):void
{
    var request = new URLRequest("http://www.jamessuske.com/freelance/korkis/3DLibrary.php");
    navigateToURL(request, "_blank");
}
myButton.addEventListener(MouseEvent.CLICK, goThere); 
```

关于*调整*窗口大小......我认为这是*不可能的*（但是，嘿，有人可以证明我错了；））

## 编辑

好的，也许你也可以使用[ExternalInterface](http://livedocs.adobe.com/flash/9.0_de/ActionScriptLangRefV3/flash/external/ExternalInterface.html)来调整它的大小（看最后的例子）（未经测试）：

编辑您的嵌入 html：添加

```
<param name="allowScriptAccess" value="always" /> 
```

**嵌入 html**并在**AS3**代码的开头添加以下调用：

```
flash.system.Security.allowDomain("*") 
```

那么下面的代码应该可以工作：

```
function goThere(e:MouseEvent):void
{
    ExternalInterface.call("open", "http://www.jamessuske.com/freelance/korkis/3DLibrary.php", "_blank", "width=300,height=400,left=100,top=200");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:03:10.030

我不相信您可以控制新窗口的大小，但是您可以使用该`target`属性在新窗口中打开它。

```
navigateToURL( request, "_blank" ); 
```

请参阅[`navigateToURL()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)LiveDocs。

您还应该注意，在 AS3 中，您**必须始终**在创建的每个对象中包含一个数据类型。

```
function goThere(e:MouseEvent):void {
    var request:URLRequest = new URLRequest("http://www.jamessuske.com/freelance/korkis/3DLibrary.php");
    navigateToURL(request);
} 
```

注意变量声明后和函数声明后的“:DATATYPE”。我不相信 Flash Pro 会向您指出这一点，但是您创建的每个对象都必须进行数据类型化。AS3（连同 Java 和大多数基于 C 的语言）使用严格的数据类型，而 Javascript、PHP 和 AS2 使用松散的数据类型，其中对象采用其值的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:38:19.640

Warappa 的代码可以工作，但可能缺少一些 AS 开发者需要的额外信息。希望评论和完整的代码能让它为你工作。

```
// This makes the ExternalInterface class available
import flash.external.ExternalInterface;

myButton.addEventListener(MouseEvent.CLICK, goThere);
function goThere(e:MouseEvent)
{
    // Store the URL as a variable for readability
    var url : String = "http://www.jamessuske.com/freelance/korkis/3DLibrary.php";

    // Check if we have access to the External interface (are we running in a browser?)
    if (ExternalInterface.available) {
        ExternalInterface.call('window.open', url, '', 'width=400,height=300' );
    }
} 
```

另外，我应该提到，这可能仅在您从网络服务器上运行时才有效。这可以是本地主机或远程网络服务器。这与 Flash 安全模型有关。有关宽度、高度等选项，请查看[https://developer.mozilla.org/en-US/docs/DOM/window.open](https://developer.mozilla.org/en-US/docs/DOM/window.open)

# php - php mysql：不接受未更改的表单输入

> ID：14655531
> 
> 赞同：-1
> 
> 时间：2013-02-01T21:43:20.910
> 
> 标签：php, forms, input, form-submit

我注意到，如果我使用

```
<form method="post" action=""> 
```

并更改至少一个输入值它工作正常，我的意思是我的 save() 函数正在工作并将我的记录保存到数据库。但是，如果没有更改任何输入值，则执行 else {} 块，这对于 save() 为 false。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:55:43.970

您可能正在使用类似的东西

```
if($query->affected_rows()>0){
return true;
}else{
return false
} 
```

做完数据库保存sql查询。因此，当在表单字段中进行更改时，更改将被保存并且第一个条件变为 true 返回 true。但是当没有对表单字段进行更改时，即如果字段保持不变，则不会对数据库进行任何更改，第二个，即执行条件返回 false。

**更新**

如果您发布代码，我可以更清楚地向您解释。您发布的html表单代码没有任何问题。但是您需要发布处理保存操作的 PHP 代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-01T21:46:22.180

您可以将旧值保存在某个地方。当用户发布表单时，您可以检查它是否有任何更改。

# jsf - p：旋转木马内的命令

> ID：14655535
> 
> 赞同：0
> 
> 时间：2013-02-01T21:43:33.037
> 
> 标签：jsf, primefaces

为什么以下工作：

```
<h:form id="form1">
<p:carousel id="carousel" value="#{galleriaBean.paths_tn}" var="img" itemStyle="width: 200px">
<p:graphicImage value="#{img}"/>
</p:carousel>

<p:commandLink id="here" value="click me" update="hello11" oncomplete="dlg.show()">
<f:setPropertyActionListener value="hello!!!" target="#{galleriaBean.selected}"/>
</p:commandLink>

<p:dialog widgetVar="dlg">
<h:outputText id="hello11" value="#{galleriaBean.selected}"/>
</p:dialog>
</h:form> 
```

但是将commandLink移到轮播中，它不起作用吗？*setPropertyActionListener*甚至不设置 bean 中的变量。

@RequestScoped CDI Bean。

```
<p:carousel id="carousel" value="#{galleriaBean.paths_tn}" var="img" itemStyle="width: 200px">
<p:graphicImage value="#{img}"/>
<p:commandLink id="here" value="click me" update=":form1:hello11" oncomplete="dlg.show()">
<f:setPropertyActionListener value="#{img}" target="#{galleriaBean.selected}"/>
</p:commandLink>
</p:carousel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:23:52.740

您没有显示代码的第二个版本（当您放入 时`p:commandLink`）`p:carousel`，但我想您将支持 bean 的一些属性`value`放入`p:commandLink`. 您必须知道 AJAX 请求也是请求，因此您请求的作用域 bean 在每个 AJAX 请求中重新创建。要保留您正在使用的属性状态，`f:setPropertyActionListener`您必须使您的 bean 至少具有视图范围，或者以某种方式保留`@PostConstructor`方法中的状态。如果您可以使用视图范围的 bean，那么应该这样做。

# python - 如何使用 Matploblib 用户定义的颜色图找到白色？

> ID：14655536
> 
> 赞同：2
> 
> 时间：2013-02-01T21:43:32.830
> 
> 标签：python, matplotlib, color-mapping

我用这个构造函数创建了一堆 RegularPolygons -

```
 node.brushShape = RegularPolygon((node.posX, node.posY),
                            6,
                            node.radius * 0.8,
                            linewidth = 3,
                            edgecolor = (1,1,1),
                            facecolor = 'none',
                            zorder = brushz) 
```

如您所见，我希望这些补丁的边缘是白色的。我将它们全部放入一个名为 BrushShapes 的列表中，然后创建一个 PatchCollection -

```
self.brushShapesPC = PatchCollection(self.brushShapes, match_original=True) 
```

这种方法可以很好地保持边缘为白色。但是，现在我想使用用户定义的颜色图 -

```
colormap = {'red':  ((0.0, 0.0, 0.0),
               (0.25,0.0, 0.0),
               (0.5, 0.8, 1.0),
               (0.75,1.0, 1.0),
               (1.0, 0.4, 1.0)),

        'green': ((0.0, 0.0, 0.0),
               (0.25,0.0, 0.0),
               (0.5, 0.9, 0.9),
               (0.75,0.0, 0.0),
               (1.0, 0.0, 0.0)),

        'blue':  ((0.0, 0.0, 0.4),
               (0.25,1.0, 1.0),
               (0.5, 1.0, 0.8),
               (0.75,0.0, 0.0),
               (1.0, 0.0, 0.0))} 
```

所以现在我的 PatchCollection 实例化是 -

```
self.brushShapesPC = PatchCollection(self.brushShapes, cmap=mpl.colors.LinearSegmentedColormap('SOMcolormap', self.colormap)) 
```

但是现在边缘的颜色和脸一样！所以我需要做的是 - 使用新的颜色图确定白色的值是什么......并更改

```
edgecolor = (1,1,1) 
```

到

```
edgecolor = (whatever_white_is) 
```

在这个构造函数中 -

```
node.brushShape = RegularPolygon((node.posX, node.posY),
                        6,
                        node.radius * 0.8,
                        linewidth = 3,
                        edgecolor = (1,1,1),
                        facecolor = 'none',
                        zorder = brushz) 
```

是对的吗？我很难确定白色的价值是什么。当我调出一个颜色条时，它显示白色就在中心...所以我尝试了 (0.5, 0.5, 0.5), (0,1,0) 等。谁能帮我弄清楚我应该怎么做放？有没有一种通用的方法可以知道任何给定颜色图的白色是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T18:03:32.787

我认为你在这方面有点倒退。没有完全通用的方法来确定颜色图中的白色（它可能不止一次存在或根本不存在）。

但是，您可以只指定多边形的边缘在使用 PolyCollection 时应为白色，同时仍使用面的颜色图。只需指定`edgecolors`而不是`edgecolor`. 这有点令人困惑，但想法是它是复数，因为您可以指定多个值。另外，看看[`RegularPolygonCollection`](http://matplotlib.org/api/collections_api.html#matplotlib.collections.RegularPolyCollection)

举个简单的例子：

```
import matplotlib.pyplot as plt
from matplotlib.patches import RegularPolygon
from matplotlib.collections import PatchCollection
import numpy as np

xy = np.random.random((10,2))
z = np.random.random(10)

patches = [RegularPolygon((x,y), 5, 0.1) for x, y in xy]
collection = PatchCollection(patches, array=z, edgecolors='white', lw=2)

fig, ax = plt.subplots()
# So that the white edges show up...
ax.patch.set(facecolor='black')
ax.add_collection(collection)
ax.autoscale()

plt.show() 
```

![在此处输入图像描述](../Images/bf35180acb5ba54579f0f25658fc06cc.png)

# android - 务实地在第二个活动中没有动作时如何返回主要活动

> ID：14655539
> 
> 赞同：1
> 
> 时间：2013-02-01T21:43:47.487
> 
> 标签：android, events, android-activity, timer, back-button

假设用户从主活动中调用了第二个活动。他/她在 $ 一段时间内没有在第二次活动中做任何事情。如何务实地返回主要活动，而不是保持第二个活动显示我正在将其用于信息亭应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:48:27.783

使用处理程序延迟发布可运行文件。

```
Handler h = new Handler();

Runnable r = new Runnable() {

    @Override
    public void run() {
        finish();
    }
};

private void resetTimeout()
{
    h.removeCallbacks(r);
    h.postDelayed(r, 10*60*1000); // delay 10 minutes
}

@Override
protected void onResume() {
    super.onResume();
    resetTimeout();
}; 
```

# regex - 匹配特定的数字模式

> ID：14655544
> 
> 赞同：1
> 
> 时间：2013-02-01T21:44:05.300
> 
> 标签：regex, string, bash, sed, awk

我试图弄清楚如何将文件中的特定模式与正则表达式或类似的匹配。我知道我可以使用 [0-9] 来查找 0 - 9 之间的任何数字，但我如何只提取特定数字？例如，我想要 0 - 14 但想忽略 16 - 60。

我只是在文件的第一列（即 awk '{ print $1 }'）中查找此信息，并且我还需要在其中包含星号 (*) (crontab)。

对此的任何帮助将不胜感激（以及解释此问题的文档链接 - 我无法找到任何涵盖此类问题的内容）。

谢谢

编辑：根据要求，这是我正在寻找的样本。

两个 cron 作业：

```
*/5 * * * * /bin/bash /some/path/script.sh
20 * * * * /bin/bash /home/path/script2.sh 
```

第一个应该被拿起，第二个被忽略。我正在阅读 /var/spool/cron/ 所以我希望输出是这样的：

```
filename
<cron job here>
filename2
<cron job here>
<other cron job here> 
```

等等

我本来打算自己解决这个问题，但这让你知道我要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:49:04.073

正则表达式在匹配数值范围方面非常糟糕。您可以使用 awk 代替：

```
crontab -l | awk '$1 == "*" || $1 ~ /^[0-9]+$/ && $1 < 15 {print}' 
```

将显示所有 crontab 条目，其中分钟部分为 * 或 0-14（含）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:17:46.830

省略从 crontab 获取每一行到 $line 下面的位，这可能会产生您想要的结果（它假设 */20 和 20 就您而言都超过 14 - 换句话说，它测试只有数字部分）。

```
 number="${line%% *}"  # Remove everything from 1st space to right end
  if [ -n "$number" ] ; then
    line="${number//[!0-9]/}"  # Lose anything non-numeric
    if (( ${number:-0} <= 14 )) ; then
      echo "$line"
    fi
  fi 
```

如果您保证 $line 不是空白或所有空格都进入，则不需要外部 if。在任何情况下，您都需要确保 $line 不以空格开头（不应该）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T20:59:04.800

这是怎么回事？它将第一个参数存储在 中`\1`，脚本名称存储在`\2`.

```
^\s*(0?\d|1[0-5]|\*(?:/\d{1,2})?)\s.*\s([/\w.]+)$ 
```

匹配的东西：

```
$ grep -P "^\s*(0?\d|1[0-5]|\*(?:/\d{1,2})?)\s.*\s([/\w.]+)$" fakecrontab.txt
* * * * * /bin/bash /home/path/script.sh
*/5 * * * * /bin/bash /home/path/script.sh
*/15 * * * * /bin/bash /home/path/script.sh
05 * * * * /bin/bash /home/path/script.sh
5 * * * * /bin/bash /home/path/script.sh 
```

不匹配的东西：

```
$ grep -vP "^\s*(0?\d|1[0-5]|\*(?:/\d{1,2})?)\s.*\s([/\w.]+)$" fakecrontab.txt  
25 * * * * /bin/bash /home/path/script.sh 
```

请注意，它假设数据的某些有效性（例如`*/99`匹配）。

# fortran - Linux 上 fortran 代码的 Intel Vtune 奇怪行为

> ID：14655550
> 
> 赞同：1
> 
> 时间：2013-02-01T21:44:30.373
> 
> 标签：fortran, intel-vtune

我已经用不同的优化标志编译了 fortran 程序。我有一个带有默认优化标志 -O2 的程序和另一个带有 -fast 优化标志的编译程序。我能够打开使用优化标志 -O2 编译的程序。那么，当我们尝试在 Vtune 中加载程序时，程序也会执行吗？

但是，当我尝试加载使用优化标志 -fast 编译的程序时，Vtune 会抛出错误“无法最终确定结果”。您打开的结果是空的。这可能是由数据收集过程中的错误引起的。这实际上意味着什么？我浏览了这个论坛的其他帖子，但不太明白这是什么意思。

我得到的收集器消息如下：

错误：分析目标的二进制文件不包含分析所需的符号。有关更多详细信息，请参阅文档。错误：在分析目标的静态二进制文件中找不到有效的 dlopen 符号。

我使用的是 ubuntu 12.04 系统。

非常感谢。请尽快回复。

贾巴巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:29:01.507

我不确定您使用的是什么编译器（一些有`-fast`），但从您所描述的内容中我最好的猜测是`-fast`剥离二进制文件，因此没有调试符号。使用`gcc`or `icc`（可能是`gfortran`or `ifort`）您应该使用 编译`-g`，但我不确定您的 Fortran 编译器中的等价物可能是什么。

# winforms - 单击按钮后如何关闭powershell gui窗口窗体？

> ID：14655552
> 
> 赞同：0
> 
> 时间：2013-02-01T21:44:35.530
> 
> 标签：winforms, user-interface, powershell, onclick, exit

我有一个脚本，它根据场景创建了一个带有按钮的小窗口 gui 表单；

-> 单击时，这些按钮会打开远程文件共享上的相应文件；以下是代码；

```
$run.Add_Click({Invoke-Expression "Powershell \\Fileshare\$Random_File.Doc"}.GetNewClosure()) 
```

-> 我的问题是即使单击文件打开后；形体仍然挂在背后；我想知道如何关闭它（如果我也可以关闭整个 powershell，那就更好了）；我试图在调用中嵌入“;exit”，但它给出了错误，还有其他方法吗？

请询问我是否需要任何问题或澄清。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:49:51.657

我怀疑`Invoke-Item \\fileshare\$file`比为您要打开的任何文档运行新的 PowerShell 效果要好得多。

要关闭表单，您可以添加 $this.Parent (?).Close() 或仅引用 $form 变量 - 这也应该有效：

```
$form = New-Object System.Windows.Forms.Form
$run = New-Object System.Windows.Forms.Button -Property @{
    Location = New-Object System.Drawing.Point -Property @{
        X = 0
        Y = 0
    }
    Text = 'Run'
}
$run.Add_Click({
    Invoke-Item C:\Windows
    $form.Close()
})
$form.Controls.Add($run)
$form.ShowDialog() 
```

# c# - 您可以使用 Linq 查找集合中元素之间的关系吗？

> ID：14655553
> 
> 赞同：0
> 
> 时间：2013-02-01T21:44:36.713
> 
> 标签：c#, linq, querying

我有一个数据列表，我想找到列表中相等的最长元素序列的长度。这很容易通过对集合进行循环来完成，但是我想知道是否有一个 Linq 查询可以做到这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:50:41.197

```
var longest = list.Select((x,i) => list.Skip(i).TakeWhile(c => c == x).Count()).Max(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:55:40.890

只需遍历序列，当一个项目等于前一个时增加一个计数器，如果不是则重置它。

```
public static int LongestSequence<T>(IEnumerable<T> source, IEqualityComparer<T> comparer)
{
    comparer = comparer ?? EqualityComparer<T>.Default;

    using (var iterator = source.GetEnumerator())
    {
        if (!iterator.MoveNext()) //empty sequence
            return 0;
        T previous = iterator.Current;
        int count = 1;
        int maxCount = 1;

        while (iterator.MoveNext())
        {
            if (comparer.Equals(iterator.Current, previous))
            {
                count++;
            }
            else
            {
                maxCount = Math.Max(maxCount, count);
                count = 1;
                previous = iterator.Current;
            }
        }

        return maxCount;
    }
} 
```

# sql - SQL Server 卡住进程

> ID：14655554
> 
> 赞同：0
> 
> 时间：2013-02-01T21:44:45.677
> 
> 标签：sql, sql-server, sql-server-2012

我正在运行 SQL Server 2012。

我使用[sp_whoisactive](http://whoisactive.com)查看 SQL 中正在运行的进程。我有时必须通过这样做来停止卡住的查询，`KILL Session ID`但最近有一些查询卡住并停止其他查询。当我运行 Kill 命令时，它说命令已完成，但进程仍然存在。

我似乎无法停止其中一些查询。

有没有更好的方法来强制终止进程？

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T00:32:30.673

杀死是你所拥有的。请记住，某些进程（尤其是那些已经运行了很长时间的进程）也需要时间来回滚其事务 - 这不一定是立即命令。

# playframework - 将一个简单的 Play 应用程序部署到 CloudFoundry 只是“放弃”

> ID：14655555
> 
> 赞同：2
> 
> 时间：2013-02-01T21:44:50.417
> 
> 标签：playframework, cloud-foundry

我正在按照[CloudFoundry 博客上的说明](http://docs.cloudfoundry.com/frameworks/play/java-getting-started.html)部署一个简单的 Play 应用程序。我选择了“创建一个简单的 Java 应用程序”选项：

```
Simons-MacBook-Pro:tmp simonmacdonald$ play new helloworld-java
       _            _ 
 _ __ | | __ _ _  _| |
| '_ \| |/ _' | || |_|
|  __/|_|\____|\__ (_)
|_|            |__/ 

play! 2.0.4, http://www.playframework.org

The new application will be created in /Users/simonmacdonald/Work/tmp/helloworld-java

What is the application name? 
> helloworld-java

Which template do you want to use for this new application? 

  1 - Create a simple Scala application
  2 - Create a simple Java application
  3 - Create an empty project

> 2

OK, application helloworld-java is created.

Have fun! 
```

然后我就可以验证该应用程序在本地计算机上是否正常工作。下一步是构建发行版：

```
Simons-MacBook-Pro:helloworld-java simonmacdonald$ play dist
[info] Loading project definition from /Users/simonmacdonald/Work/tmp/helloworld-java/project
[info] Set current project to helloworld-java (in build file:/Users/simonmacdonald/Work/tmp/helloworld-java/)
[info] Packaging /Users/simonmacdonald/Work/tmp/helloworld-java/target/scala-2.9.1/helloworld-java_2.9.1-1.0-SNAPSHOT.jar ...
[info] Done packaging.

Your application is ready in /Users/simonmacdonald/Work/tmp/helloworld-java/dist/helloworld-java-1.0-SNAPSHOT.zip

[success] Total time: 2 s, completed 1-Feb-2013 4:35:48 PM 
```

看起来它成功了。然后我做我的目标和登录使用：

```
vmc target api.cloudfoundry.com
vmc login 
```

接下来，我将应用程序推送到服务器：

```
Simons-MacBook-Pro:helloworld-java simonmacdonald$ vmc push --path=dist/helloworld-java-1.0-SNAPSHOT.zip 
Name> helloworld-java

Instances> 1

1: play
2: other
Framework> 1   

1: java
2: java7
3: other
Runtime> 1

1: 64M
2: 128M
3: 256M
4: 512M
Memory Limit> 256M

Creating helloworld-java... OK

1: helloworld-java.cloudfoundry.com
2: none
URL> helloworld-java.cloudfoundry.com

Updating helloworld-java... OK

Create services for application?> n

Bind other services to application?> n

Save configuration?> y

Saving to manifest.yml... OK
Uploading helloworld-java... OK
Using manifest file manifest.yml

Starting helloworld-java... OK
Checking helloworld-java... GAVE UP
Application failed to start. 
```

如您所见，该应用程序无法启动。当我检查状态为 0% 并尝试检索日志时会导致 vmc 崩溃。有人有想法么？

# java - 绘制多个函数时如何消除一组重复的 X 值？

> ID：14655557
> 
> 赞同：1
> 
> 时间：2013-02-01T21:45:04.350
> 
> 标签：java, plot, jfreechart

我是 jfreechart 的新手。我有类似[http://www.java2s.com/Code/Java/Chart/JFreeChartXYLogAxesDemo.htm](http://www.java2s.com/Code/Java/Chart/JFreeChartXYLogAxesDemo.htm)的代码，它在图表中绘制了 4 个函数。

但是，每个 xy 系列的 x 值都是相同的。这似乎是多余的。

有没有办法消除这种重复数据？

我宁愿生成一个 x 系列和许多 y 系列，然后将它们添加到某种系列集合中。

编辑：实现答案非常容易（请参见下文）。

不确定如何处理 getSeriesKey() 吗？

```
import java.util.*;
import org.jfree.chart.*;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.data.xy.AbstractXYDataset;
import org.jfree.ui.ApplicationFrame;
@SuppressWarnings("serial") class XYDatasetWithCommonX extends AbstractXYDataset {
    @SuppressWarnings("unchecked") XYDatasetWithCommonX(int n) {
        this.n=n;
        y=new ArrayList[n];
        for(int i=0;i<n;i++)
            y[i]=new ArrayList<Number>();
    }
    public void add(double x,double[] y) {
        this.x.add(x);
        for(int i=0;i<n;i++)
            this.y[i].add(y[i]);
    }
    @Override public int getSeriesCount() {
        return n;
    }
    @Override public Comparable getSeriesKey(int series) {
        return "Unit";
    }
    @Override public int getItemCount(int series) {
        return y[series].size();
    }
    @Override public Number getX(int series,int item) {
        return x.get(item);
    }
    @Override public Number getY(int series,int item) {
        return y[series].get(item);
    }
    final int n;
    final List<Number> x=new ArrayList<Number>();
    final List<Number>[] y;
}
@SuppressWarnings("serial") public class Main extends ApplicationFrame {
    Main() {
        super("demo");
    }
    public static void main(String[] args) {
        XYDatasetWithCommonX x=new XYDatasetWithCommonX(3);
        double[] y=new double[3];
        for(int i=1;i<=50;i++) {
            y[0]=10*Math.exp(i/5.0);
            y[1]=20*Math.exp(i/5.0);
            y[2]=30*Math.exp(i/5.0);
            x.add(i,y);
        }
        Main main=new Main();
        final JFreeChart chart=ChartFactory.createXYLineChart("my demo","x","y",x,PlotOrientation.VERTICAL,true,true,false);
        final ChartPanel chartPanel=new ChartPanel(chart);
        chartPanel.setPreferredSize(new java.awt.Dimension(500,270));
        main.setContentPane(chartPanel);
        main.pack();
        main.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:59:44.693

> 这似乎是多余的。

是的， , 的选择实现`XYDataset`只是`XYSeriesCollection`众多具体实现之一。对于大量相同的域值，请考虑`XYDataset`包含`List<Number>`所有系列共享的单个域值的自定义。[此处](https://stackoverflow.com/a/14459322/230513)针对单个系列说明了该方法。

# jquery - 何时使用服务器与客户端助手？

> ID：14655558
> 
> 赞同：-3
> 
> 时间：2013-02-01T21:45:14.177
> 
> 标签：jquery, asp.net-mvc

这里有服务器控件

[http://mvccontrolstoolkit.codeplex.com/](http://mvccontrolstoolkit.codeplex.com/)

但是也有 jquery 控件。

谁能告诉我该走哪条路？我宁愿只走一条路或另一条路..似乎做MVC的方法是避免让服务器端代码与创建控件（htmlhelpers？）有任何关系，比如webforms。我想你只想让它通过 jquery ajax 帖子来提供数据，对吗？

所以我试图了解设置该风格项目的基础知识.. 任何简单的例子？我希望有一个简单的 MVC 网站，涵盖以最新的现代方式做基础知识。我有 MVC 音乐商店示例。我有 MVC 书呆子晚餐示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:13:24.410

我认为您的假设不正确。

MVC HTML 助手根据视图模型的属性（和/或您想要的任何东西）生成代码。虽然这有助于模型绑定过程（从而将其松散地耦合到服务器操作），但它与创建 Web 表单服务器控件完全不同：

*   完全控制标记
*   HTTP 之上没有虚假事件模型
*   没有繁重的状态管理
*   视图模型应该在控制器和视图标记之间提供完整的抽象
*   很少或没有服务器逻辑连接到助手生成的输入

确定服务器与客户端的正确问题是它是否符合应用程序要求（包括您是否需要 JavaScript）。渴望/需要高度响应体验的应用程序通常更依赖客户端。

# c++ - C++ std::unordered_set SIGFPE 异常

> ID：14655561
> 
> 赞同：3
> 
> 时间：2013-02-01T21:45:44.130
> 
> 标签：c++, stl, unordered-set, sigfpe

我写了一个程序，我很高兴我会运行它几十次——我什至写下了多次执行的结果——现在它不起作用。

你可能会认为我这么说是高高在上，或者我可能只是改变了一些台词，但我真的**不记得**对程序做过任何改变。

问题是`SIGFPE`，根据输入，在程序的不同执行中出现。尽管**在`std::unordered_set<Point<T> *>`**.

这是我进行此类插入的代码片段：

```
std::vector<Point<T> *> _point, _centroid;
std::vector<std::unordered_set<Point<T> *> > _cluster;

// Main procedure -- pseudocode
for (point in _point) {
    cluster_id = centroid_with_min_distance(point, _centroid);
    has_changed = _change_cluster(point, cluster_id);
}

// Changes from one "point->_cluster's unordered_set" to "c's unordered_set"
bool _change_cluster(Point<T> *point, const unsigned int& c) {

    if ((point->_cluster == c) &&
        (_cluster[c].find(point) != _cluster[c].end())) {
        return false;
    }

    _cluster[point->_cluster].erase(point);
    _cluster[c].insert(point); // Insertion that raises the SIGFPE exception
    point->_cluster = c;
    return true;

} 
```

这是 valgrind 输出的一个重要部分：

```
==17636== Invalid read of size 8
==17636==    at 0x40A758: std::pair<std::__detail::_Hashtable_iterator<
                Point<unsigned int>*, true, false>, bool>
                std::_Hashtable<Point<unsigned int>*, Point<unsigned int>*,
                std::allocator<Point<unsigned int>*>,
                std::_Identity<Point<unsigned int>*>,
                std::equal_to<Point<unsigned int>*>,
                std::hash<Point<unsigned int>*>,
                std::__detail::_Mod_range_hashing,
                std::__detail::_Default_ranged_hash,
                std::__detail::_Prime_rehash_policy, false, true, true>::
                    _M_insert<Point<unsigned int>* const&>(
                        Point<unsigned int>* const&&&,
                        std::integral_constant<bool, true>) (hashtable.h:966)
==17636==    by 0x408EDA: std::_Hashtable<Point<unsigned int>*,
                 Point<unsigned int>*, std::allocator<Point<unsigned int>*>,
                 std::_Identity<Point<unsigned int>*>,
                 std::equal_to<Point<unsigned int>*>,
                 std::hash<Point<unsigned int>*>,
                 std::__detail::_Mod_range_hashing,
                 std::__detail::_Default_ranged_hash,
                 std::__detail::_Prime_rehash_policy, false, true, true>::
                     insert(Point<unsigned int>* const&) (hashtable.h:400)
==17636==  ... (calls from my program) ...
==17636==  Address 0x620a028 is not stack'd, malloc'd or (recently) free'd
==17636== 
==17636== 
==17636== Process terminating with default action of signal 8 (SIGFPE)
==17636==  Integer divide by zero at address 0x402D07D7C
==17636==    at 0x40252F: std::__detail::_Mod_range_hashing::operator()(
                 unsigned long, unsigned long) const (hashtable_policy.h:376)
==17636==    by 0x40A66C: std::__detail::_Hash_code_base<Point<unsigned int>*,
                 Point<unsigned int>*, std::_Identity<Point<unsigned int>*>,
                 std::equal_to<Point<unsigned int>*>,
                 std::hash<Point<unsigned int>*>,
                 std::__detail::_Mod_range_hashing,
                 std::__detail::_Default_ranged_hash, false>::_M_bucket_index(
                     Point<unsigned int>* const&, unsigned long,
                     unsigned long) const (hashtable_policy.h:758)
==17636==    by 0x40A772: std::pair<std::__detail::_Hashtable_iterator<
                 Point<unsigned int>*, true, false>, bool>
                 std::_Hashtable<Point<unsigned int>*, Point<unsigned int>*,
                 std::allocator<Point<unsigned int>*>,
                 std::_Identity<Point<unsigned int>*>,
                 std::equal_to<Point<unsigned int>*>,
                 std::hash<Point<unsigned int>*>,
                 std::__detail::_Mod_range_hashing,
                 std::__detail::_Default_ranged_hash,
                 std::__detail::_Prime_rehash_policy, false, true, true>::
                     _M_insert<Point<unsigned int>* const&>(
                     Point<unsigned int>* const&&&,
                     std::integral_constant<bool, true>) (hashtable.h:966)
==17636==    by 0x408EDA: std::_Hashtable<Point<unsigned int>*,
                 Point<unsigned int>*, std::allocator<Point<unsigned int>*>,
                 std::_Identity<Point<unsigned int>*>,
                 std::equal_to<Point<unsigned int>*>,
                 std::hash<Point<unsigned int>*>,
                 std::__detail::_Mod_range_hashing,
                 std::__detail::_Default_ranged_hash,
                 std::__detail::_Prime_rehash_policy, false, true, true>::
                     insert(Point<unsigned int>* const&) (hashtable.h:400)
==17636==    ... (calls from my program) ... 
```

这里的问题是：由于我的程序中有可能导致除以零的计算——尽管它们与此过程没有直接关系——是否有可能是**错误**被插入所掩盖？或者我应该在插入指针时做一些额外的处理`std::unordered_set<T>`？

我正在编译程序`x86_64 GNU/Linux`，我正在使用`g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:21:42.527

I suspect that 'c' is out of the range of `_cluster`. Can you replace all of the `_cluster[c]` with `_cluster.at(c)`, and see if it finds an out of range error.

The valgrind output indicates that it's an invalid read followed by an integer modulus error. Since it's doing `hash_code % bucket_count`, I suspect that you accessed out of the range of the vector.

As an aside, naming things that start with `_` can be risky, as if it's in the global namespace, it is technically reserved for the implementation.

# sql - 如何根据特定条件从同一个表中删除多余的记录？

> ID：14655564
> 
> 赞同：1
> 
> 时间：2013-02-01T21:45:59.083
> 
> 标签：sql

我有一个临时表#temp，其中包含以下记录：

```
col1    col2
a       11
a       12
a       13
b       5
b       8 
```

我只想保留最大 col2 的记录，结果表应该像

```
col1    col2
a       13
b       8 
```

任何人都可以在不创建另一个临时表的情况下帮助我编写查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:40:58.980

```
DELETE t1
FROM dbo.test74 t1
WHERE NOT EXISTS (
                  SELECT 1
                  FROM dbo.test74 t2
                  WHERE t2.col = t1.col              
                  HAVING MAX(t2.col2) = t1.col2
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/9dc5b/1/0)上的演示[](http://sqlfiddle.com/#!3/9dc5b/1/0)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:49:31.283

```
; WITH CTE AS 
(
    SELECT
        col1,
        col2,
        ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col2 DESC) RowNumber,
        ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col2 DESC) RowRank
    FROM
        #Temp
)
DELETE
    CTE
WHERE
    RowNumber > 1 
```

在这里你可以使用：

```
WHERE
    RowNumber > 1 
```

或者

```
WHERE
    RowRank > 1 
```

在删除语句中。如果您不希望结果中出现重复项，请使用 RowNumber。如果每个 col1 可能有多行且最大 col2 并且您希望同时保留它们，请使用 RowRank。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:52:02.020

您需要使用`Group By`子句：

```
SELECT
    colA,
    MAX(colB)as colB
FROM Tbl

GROUP BY
    ColA 
```

[见小提琴](http://sqlfiddle.com/#!3/0c100/2)**

# c++ - 如果每个文件都包含“assert.h”，是否需要很长时间编译？

> ID：14655567
> 
> 赞同：1
> 
> 时间：2013-02-01T21:46:24.247
> 
> 标签：c++, compilation

根据 Mats Petersson 的结果，我做了一些测试。我不需要通过定义宏来打开和关闭断言。我的结论是：

1.  包括标准头文件，如`<cassert>`,等`<vector>`，`<memory>`编译时间很少。我们不需要关心。
2.  包含您自己的文件时要小心。包括那些真正需要的，因为依赖项在更改依赖项后需要重新编译。
3.  包含类库的集合头时要小心，例如`<QWidgets>`（Qt header to include its all its widgets）。这需要大量的编译时间。

[原帖]

如果每个文件都包含“assert.h”，是否需要很长时间编译？我认为关于“math.h”或其他常见文件的类似问题。我不喜欢预编译的头文件。当我有一个 Vector3D 类时会发生这种情况，该类表示 3D 空间中具有 x、y、z 分量的向量。该类几乎无处不在。我有一个名为`component(int i)`where`i`在 0 和 2 之间断言的函数。出于性能原因，我没有将它的实现放在 cpp 文件中。因此，几乎所有地方都包含“assert.h”。

```
#pragma once

#include <assert.h>

/// A vector in a 3D space with 3 components: x, y, and z.
class Vector3D
{
public:
    Vector3D(float x = 0, float y = 0, float z = 0)
    {
        m_component[0] = x;
        m_component[1] = y;
        m_component[2] = z;
    }

    float x() const    {return m_component[0];}
    float y() const    {return m_component[1];}
    float z() const    {return m_component[2];}

    void setX(float x)    {m_component[0] = x;}
    void setY(float y)    {m_component[1] = y;}
    void setZ(float z)    {m_component[2] = z;}

    float component(int i) const
    {
        assert(i >= 0 && i < 3);
        return m_component[i];
    }

    float& component(int i)
    {
        assert(i >= 0 && i < 3);
        return m_component[i];
    }

private:
    float m_component[3];
}; 
```

受 Floris Velleman 的启发，我添加了一个文件来定义我的 ASSERT 以打开和关闭它。它需要在代码中使用断言更改`assert`为。`ASSERT`谢谢。

```
#ifdef USE_ASSERT
# include <assert.h>
# define ASSERT(statement) assert(statement)
#else
# define ASSERT(statement)
#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:47:47.747

所有标头都使用相同的包含模型，这非常慢。某些标头可能比其他标头更复杂，但一般情况下，您不会包含不需要的标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T22:53:36.763

Yes, it takes, on my machine, 0.03 seconds more per file (0.1s in total, over 30 files, containing either `#include <assert.h>` or `//#include <assert.h>` and a large comment of about 90 lines to fill the file out. I copied that 30 times over to separate .c files, and compile with `gcc -c *.c`.

However, that's pretty much "nothing" compiled. If we instead take some real C++ code, so the compiler has to "think" a bit, what happens:

Baseline (source xx.cpp - around 280 lines of C++ code in a standalone program, copied 30 times to files called xx1.cpp .. xx30.cpp, compile with `g++ -O2 -c *.cpp`):

```
7.722s      7.730s      7.660s 
```

Add `#include <cassert>` at the end of the list of

```
7.734s      7.652s      7.676s 
```

I don't think that's a significant change. I'm sure if you do `#include <assert.h>` in every header file, and include hundreds or thousands of header files, that ALL include assert.h, maybe it will make a difference. But I'm doubting anyone would be able to measure a real difference on a real project.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T21:58:08.413

标准头文件`assert.h`（你使用尖括号而不是引号，所以我假设你在谈论标准 C 断言头文件）是所有标准 C 库中最小的头文件之一，所以在这种情况下它真的没有事情。断言的有用性比你可能获得的速度更重要。

注意：在 C++`cassert`中使用而不是`assert.h`.

另一方面，像 iostream 这样的大而复杂的标头...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T21:48:55.497

```
 #ifndef AssertIncluded
 #define AssertIncluded
 #include "assert.h"
 #endif 
```

不是 100% 确定语法，但这可能会消除双重包括的东西。至于速度，编译时间会根据必须发生的事情的数量而增加。包含更多文件意味着：“更长的编译时间”。

# php - Apache限制视频流速度

> ID：14655576
> 
> 赞同：2
> 
> 时间：2013-02-01T21:47:20.830
> 
> 标签：php, apache, video-streaming

使用 PHP 函数或 Apache 模块在 CentOS + Apache Web 服务器上优化视频流的最佳方法是什么？因此，就术语而言，我想将每个访问者的视频流速度限制为 100kb/s。

有什么建议可以用来做这个>？如果有流媒体模块，请您参考我。

提前致谢。

# java - 使用 Java 的 Selenium WebDriver 和 HTML Window 位置

> ID：14655581
> 
> 赞同：13
> 
> 时间：2013-02-01T21:47:42.770
> 
> 标签：java, selenium, selenium-webdriver

我将 Selenium WebDriver 与 java.awt.Robot 结合使用，以更好地模拟用户与我们的 Web 应用程序的交互。是的，我知道这可能是不必要的，但我服务的客户需要它。

目前一切运作良好，但是我有一个小问题，我似乎无法找到一种让网络元素在屏幕上的位置的好方法。标题栏、菜单栏、导航栏等都将内容向下推送到物理屏幕上（Robot 从中获取坐标），但对 Selenium 报告元素的位置没有影响。

当我调用：`element.getLocation();`在 Selenium WebElement 上时，它总是给我它相对于 HTML 内容呈现窗格的位置，而不是浏览器窗口本身。

一个更好的例子是：`driver.findElement(By.tagName("body")).getLocation();`总是返回 0,0，不管窗口在屏幕上的实际位置。

现在我正在通过在最大化窗口后添加垂直和水平偏移来破解它，但这些在不同浏览器之间并不相同（例如，IE 的顶部装饰比 Firefox 占用更多的空间），并且可能因每个用户而异如果他们添加了书签工具栏、搜索栏等。

是的，我知道我可以在全屏模式下运行，但如果可能的话，我宁愿不这样做。

有没有办法使用 WebDriver 以可靠的方式获取元素在屏幕上的物理位置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-03T21:29:13.840

我相信没有办法获得页面上元素的真实屏幕位置。

我也认为全屏模式是你最好的选择。

也就是说，我编写了一个`RobotCalibration`可以检测当前浏览器实际偏移量的类。它会打开一个特制页面并使用`Robot`该类单击它。该算法从浏览器的中心开始，然后使用二等分来找到浏览器视口的左上角。

在 IE8 和 FF18 上测试。适用于最大化和窗口浏览器。已知问题：如果您启用了顶部书签工具栏，它可能会单击某些书签并因此重定向。它可以很容易地处理，但如果你需要的话，我把它留给你:)。

测试页面：

```
<!DOCTYPE html>
<html lang="en" onclick="document.getElementById('counter').value++">
<head>
    <meta charset="utf-8" />
    <title>Calibration Test</title>
</head>
<body>
    <img height="1" width="1" style="position: absolute; left: 0; top: 0;"
        onclick="document.getElementById('done').value = 'yep'" />
    <input type="text" id="counter" value="0" />
    <input type="text" id="done" value="nope" />
</body>
</html> 
```

`RobotCalibration`班级。它有点长，所以我建议你将它复制粘贴到你最喜欢的 IDE 中并在那里进行探索：

```
import java.awt.AWTException;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Robot;
import java.awt.Toolkit;
import java.awt.event.InputEvent;
import java.nio.file.Paths;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;

public class RobotCalibration {

    public static Point calibrate(WebDriver driver) {
        return new RobotCalibration(driver).calibrate();
    }

    /** Time for which to wait for the page response. */
    private static final long TIMEOUT = 1000;

    private final WebDriver driver;
    private final Robot r;

    private final Point browserCenter;
    private int leftX;
    private int rightX;
    private int midX;
    private int topY;
    private int bottomY;
    private int midY;

    private RobotCalibration(WebDriver driver) {
        this.driver = driver;
        try {
            driver.manage().window().getSize();
        } catch (UnsupportedOperationException headlessBrowserException) {
            throw new IllegalArgumentException("Calibrating a headless browser makes no sense.", headlessBrowserException);
        }

        try {
            this.r = new Robot();
        } catch (AWTException headlessEnvironmentException) {
            throw new IllegalStateException("Robot won't work on headless environments.", headlessEnvironmentException);
        }

        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        org.openqa.selenium.Dimension browserSize = driver.manage().window().getSize();
        org.openqa.selenium.Point browserPos = driver.manage().window().getPosition();

        // a maximized browser returns negative position
        // a maximized browser returns size larger than actual screen size
        // you can't click outside the screen
        leftX = Math.max(0, browserPos.x);
        rightX = Math.min(leftX + browserSize.width, screenSize.width - 1);
        midX = (leftX + rightX) /2;

        topY = Math.max(0, browserPos.y);
        bottomY = Math.min(topY + browserSize.height, screenSize.height - 1);
        midY = (topY + bottomY) /2;

        browserCenter = new Point(midX, midY);
    }

    private Point calibrate() {
        driver.get(Paths.get("files/RobotCalibration.html").toUri().toString());

        // find left border
        while (leftX < rightX) {
            click(midX, midY);
            if (clickWasSuccessful()) {
                rightX = midX;
            } else {
                leftX = midX + 1;
                // close any menu we could have opened
                click(browserCenter.x, browserCenter.y);
            }
            midX = (leftX + rightX) /2;
        }

        // find top border
        while (topY < bottomY) {
            click(midX, midY);
            if (clickWasSuccessful()) {
                bottomY = midY;
            } else {
                topY = midY + 1;
                // close any menu we could have opened
                click(browserCenter.x, browserCenter.y);
            }
            midY = (topY + bottomY) /2;
        }

        if (!isCalibrated()) {
            throw new IllegalStateException("Couldn't calibrate the Robot.");
        }
        return new Point(midX, midY);
    }

    /** clicks on the specified location */
    private void click(int x, int y) {
        r.mouseMove(x, y);
        r.mousePress(InputEvent.BUTTON1_DOWN_MASK);
        r.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);

        // for some reason, my IE8 can't properly register clicks that are close
        // to each other faster than click every half a second
        if (driver instanceof InternetExplorerDriver) {
            sleep(500);
        }
    }

    private static void sleep(int millis) {
        try {
            Thread.sleep(millis);
        } catch (InterruptedException ignored) {
            // nothing to do
        }
    }

    private int counter = 0;
    /** @return whether the click on a page was successful */
    private boolean clickWasSuccessful() {
        counter++;

        long targetTime = System.currentTimeMillis() + TIMEOUT;
        while (System.currentTimeMillis() < targetTime) {
            int pageCounter = Integer.parseInt(driver.findElement(By.id("counter")).getAttribute("value"));
            if (counter == pageCounter) {
                return true;
            }
        }
        return false;
    }

    /** @return whether the top left corner has already been clicked at */
    private boolean isCalibrated() {
        long targetTime = System.currentTimeMillis() + TIMEOUT;
        while (System.currentTimeMillis() < targetTime) {
            if (driver.findElement(By.id("done")).getAttribute("value").equals("yep")) {
                return true;
            }
        }
        return false;
    }

} 
```

示例用法：

```
WebDriver driver = new InternetExplorerDriver();
Point p = RobotCalibration.calibrate(driver);
System.out.println("Left offset: " + p.x + ", top offset: " + p.y);
driver.quit(); 
```

如果有不清楚的地方，请随时提出任何问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-18T17:23:12.023

看起来 selenium 现在有一种方法可以获取元素相对于浏览器窗口的位置。在我的一个测试中，我试图验证页面是否锚定到某个位置，并认为最好的方法是获取相对于窗口的元素位置。这可以使用**getCoordinates().inViewPort()**方法来完成。

下面是一些获取 WebElement 相对位置的示例代码：

```
import org.openqa.selenium.By;
import org.openqa.selenium.Point;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.internal.Locatable;

public class RelativeElementLocation {

private static Point locationPoint;
private static Locatable elementLocation;
WebDriver driver = new FirefoxDriver();
WebElement element;

public Point location() throws Throwable {
    driver.get("Insert your URL here");
    element = driver.findElement(By.id("Insert id/css/xpath/ here"));
    elementLocation = (Locatable) element;
    locationPoint = elementLocation.getCoordinates().inViewPort();
    System.out.println(locationPoint);

    return locationPoint; 
    }
} 
```

**inViewPort()**方法的唯一警告是，如果您尝试获取当前不在页面视图中的元素的相对元素位置，该方法将滚动页面以使该元素在视图中，然后为您提供相对位置。意思是说，如果您尝试获取位于浏览器页面视图上方的元素的相对位置，它不会给您一个负的 y 坐标，而是向上滚动到该元素并使 y 坐标为零。

希望这会有所帮助，我是 Selenium 和 Java 的新手，所以如果我的代码中有任何错误，请原谅我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-18T13:53:44.000

有一种比[Slanec 答案](https://stackoverflow.com/a/14677516/1192811)更简单的方法来获得相对于绝对偏移量。

首先，您需要一个在窗口上[附加了 javascript 的单击侦听](https://stackoverflow.com/a/6348597/1192811)器的空白页面来获取坐标并将它们保存到全局变量中：

```
window.coordinates = [];
window.attachEvent('click', function() {
     window.coordinates = [event.pageX, event.pageY];
}); 
```

然后单击并通过以下方式获取相对单击位置[`JavascriptExecutor`](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/JavascriptExecutor.html)：

```
// browser center
Dimension size = driver.manage().window().getSize();
Point point = driver.manage().window().getPosition()
    .translate(size.width / 2, size.height / 2);

// Click through robot
click(point.x, point.y);
Thread.sleep(500);

// read coordinates
List<Object> coordinates = (List<Object>) ((JavascriptExecutor) driver)
    .executeScript("return window.coordinates;");
if (coordinates.size() != 2)
     throw new IllegalStateException("Javascript did not receive the click");

// point contains screen coordinates of upper left page point
point.translate(-((Integer)coordinates.get(0)),
                -((Integer)coordinates.get(1))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-09T09:07:20.387

当前的 Selenium 没有实现获取 Web 元素绝对位置的 API。但是[SAFS](http://safsdev.sourceforge.net/Default.htm)已经实现了一个版本来获取 web 元素的绝对位置。

思路如下：

1.  获取元素**相**对于框架的位置。因为一个浏览器网页中可能有很多框架。此外，该框架可以植入另一个框架中。因此，最好使用带有父框架的类来递归搜索到最外层的框架位置。

`

```
class FrameElement {
    FrameElement parent;
    Point location;

    FrameElement(FrameElement parent, WebElement frame) throws ... {
        if(parent != null) {
            this.parent = parent;
            location = frame.getLocation().moveBy(parent.getLocation().x, parent.getLocation().y);
        } else {
            location = frame.getLocation();
        }
    }

    public Point getLocation() {return location;} 
}

Point p = webelement.getLocation(); 
```

2.  添加框架的位置，相对于浏览器客户区（部分不包括工具栏、菜单等）。

3.  添加浏览器客户区，相对于浏览器窗口。

4.  添加浏览器窗口的位置，相对于屏幕。

# node.js - 使用 Node.js 提取 .bz2 管道？

> ID：14655582
> 
> 赞同：4
> 
> 时间：2013-02-01T21:47:42.550
> 
> 标签：node.js, stream, gzip, tar, bzip2

我想用 tar.gz 和 node.js 提取**.tar.bz2**，如下所示：

```
request.get("localhost/file.tar.gz")
.pipe(zlib.createGunzip())
.pipe(tar.Extract({path: "./test"}))
.on("error", function(err){
    console.log("Error on extract", err);
})
.on("end", function(){
    console.log("done.");
}); 
```

“zlib.createGunzip()”部分应替换为 bz2-deflator。有谁知道这个问题的工作包？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-31T08:08:38.297

使用[https://github.com/regular/unbzip2-stream](https://github.com/regular/unbzip2-stream)。

然后[https://github.com/mafintosh/tar-fs](https://github.com/mafintosh/tar-fs)。

不是我的回购。

例子：

```
const fs = require('fs');
const bz2 = require('unbzip2-stream');
const tarfs = require('tar-fs');

fs.createReadStream('foo.tar.bz2').pipe(bz2()).pipe(tarfs.extract('data')); 
```

上面的示例将提取`foo.bar.bz2`到`data/`目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T10:22:54.130

他们在这里也讨论了同样的问题：[https ://github.com/cscott/seek-bzip/issues/1](https://github.com/cscott/seek-bzip/issues/1)

# python - 在 numpy 中制作椭圆体

> ID：14655584
> 
> 赞同：0
> 
> 时间：2013-02-01T21:47:47.740
> 
> 标签：python, numpy, geometry

如何使用 NumPy 制作椭圆体？

我有一个球体是这样的：

```
def sphere()
   R = 25
   xx, yy, zz = np.mgrid[:100, :100, :100]
   return ((xx - 50) ** 2 + (yy - 50) ** 2 + (zz - 50)) < R**2 
```

我想将其推广到一个椭圆体，理想情况下它可以有任何旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:50:12.907

试试看这里，我不确定这是否是你需要的[Ellipsoid](https://bitbucket.org/bryancole/raytrace/src/02a66fea3db3/raytrace/ellipsoids.py)类。

# playframework-2.0 - PlayFramework 2.0 内存不足

> ID：14655592
> 
> 赞同：14
> 
> 时间：2013-02-01T21:48:02.293
> 
> 标签：playframework-2.0

如何增加 Play 环境的可用内存？运行测试一段时间后，我的内存不足。

特别是，我收到此错误：

> java.lang.OutOfMemoryError: PermGen 空间

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-10T17:34:47.053

我通过添加解决了这个问题：

```
javaOptions ++= Seq("-Xmx2048M", "-Xms512M", "-XX:MaxPermSize=2048M") 
```

在 Build.scala 中设置。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-04T20:33:49.357

通过设置环境变量“_JAVA_OPTIONS”，可以传入play/sbt在正常使用时会用到的变量。我发现这有助于我在运行开发和测试时避免 PermGen 空间错误。

例如：

导出_JAVA_OPTIONS="-Xms64m -Xmx1024m -Xss2m -XX:MaxPermSize=256m"

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-01T21:51:31.087

用于播放的 Java 启动选项是脚本中的创建者：

> $PLAY_HOME/框架/构建

可以通过修改文件底部的行来增加 PermGen 空间：

> java ${DEBUG_PARAM} -Xms512M -Xmx1536M -Xss1M -XX:+CMSClassUnloadingEnabled -XX:MaxPermSize=384M ...

将 MaxPermSize 变量设置为适当的值。

# jquery - Add class to last element on click JQuery

> ID：14655593
> 
> 赞同：0
> 
> 时间：2013-02-01T21:48:01.960
> 
> 标签：jquery, css-selectors

Basically i'm creating a little to do list app, at the minute I append new list items to a container on button click, this creates the list effect.

What I want to do is add a class to the last element of the list, using last:child works for this but what I need it to do is update the last element when new elements are added, so lets say I have 5 items in a list so the 5th item has class last, when I add a new item I want to remove the class from the old last item and add it to the new last item (that make sense?)

Here's the code I have so far..

```
<div id="list_container">
    <div id="to_do">
        <ul id="tasks" style="padding:0;">      
        </ul>
    </div>
</div>

var items = [];

// Add new item
$('#add_btn').click(function(event){
    event.preventDefault();

    var list_item = $('#new_item').val();

    // Validation
    if(list_item == ""){
        $('#new_item').addClass('empty');
    }else{ 
        $('#new_item').removeClass('empty').addClass('normal');
        items.push(list_item);
        var lastEl = items[items.length-1];
        $('ul#tasks').append('<li><input type="text" class="to_do_item" value="' + lastEl + '"/></input></li>');
    }

    // Clear input field after adding
    $('#new_item').not(':button, :submit, :reset, :hidden').val('');

}); 
```

Anyone know how to achieve this? I'm think it can't be that difficult but I can't seem to think straight right now..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T21:50:24.027

```
...
var lastEl = items[items.length-1];
$('ul#tasks li').removeClass('last');
$('ul#tasks').append('<li class="last"><input type="text" class="to_do_item" value="' + lastEl + '"/></input></li>');
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:52:32.797

```
$('.last').removeClass('last')
$('#new_item').addClass('last'); 
```

this guarentees nothing has the class 'last', then applies .last to the new li

I would even recommend `$(this)` instead of `$('#new_item')`

# spring - dataSource.getConnection 在 Spring 中抛出 NullpointerException

> ID：14655597
> 
> 赞同：0
> 
> 时间：2013-02-01T21:48:21.057
> 
> 标签：spring

我正在尝试在我的 spring 应用程序中连接到 MySQL 数据库。如果我使用`DriverManager.getConnection(DB_URL,USER, PASS)`但无法与配置有 bean 的 dataSource 连接，我可以连接到它。

应用上下文

```
<bean id="jdbcTest" class="org.springdemo.jdbc.JdbcTest">
  <property name="dataSource" ref="dataSource"></property>
</bean>
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="com.mysql.jdbc.Driver"></property>
  <property name="url" value="jdbc:mysql://localhost:3306/test"></property>
  <property name="username" value="xxxx"></property>
  <property name="password" value="xxxx"></property>
</bean> 
```

班级

```
public class JdbcTest {

  private DataSource dataSource;

  public JdbcTest(){
    try {
      Class.forName("com.mysql.jdbc.Driver");
      //conn = DriverManager.getConnection(DB_URL,USER,PASS); This worked!!!!
      conn = dataSource.getConnection(); 
      stmt = conn.createStatement();
    } catch (SQLException e) {
      e.printStackTrace();
    }
  }

  public ResultSet executeQuery(String query){ 
        //executing query; it works as I tested with DriverManager
  }

  public static void main(String[] args) {  
    AbstractApplicationContext context = 
      new ClassPathXmlApplicationContext("spring.xml");
    JdbcTest test = context.getBean("jdbcTest", JdbcTest.class);
    ResultSet rs = test.executeQuery("select * from employee");
    try {
      while(rs.next()){
        System.out.println(rs.getString(1));
      }
    } catch (SQLException e) {
      e.printStackTrace();
    }
  }

} 
```

当我使用它时它工作得非常好`DriverManager`但是，当我使用`DataSource`对象来获取配置了 bean 的连接时，它给出了`NullPointerException`

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcTest' defined in class path resource [spring.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springdemo.jdbc.JdbcTest]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1011)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:957)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:607)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at org.springdemo.DrawingApp.main(DrawingApp.java:21)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springdemo.jdbc.JdbcTest]: Constructor threw exception; nested exception is java.lang.NullPointerException
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:162)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1004)
    ... 13 more
Caused by: java.lang.NullPointerException
    at org.springdemo.jdbc.JdbcTest.<init>(JdbcTest.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    ... 15 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:52:04.770

您无法`dataSource`在构造函数中访问。Spring首先实例化bean（在您的情况下使用默认构造函数），然后连接属性。

有[很多方法](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-initializingbean)可以解决这个问题。

**构造函数注入**

```
<bean id="jdbcTest" class="org.springdemo.jdbc.JdbcTest">
    <constructor-arg ref="dataSource"/>
</bean> 
```

和类

```
public class JdbcTest {
    private DataSource dataSource;

    public JdbcTest(DataSource dataSource) throws SQLException {
        this.dataSource = dataSource;

        conn = dataSource.getConnection(); 
        stmt = conn.createStatement();
    }
} 
```

**初始化Bean**

```
public class JdbcTest implements InitializingBean {
  private DataSource dataSource;

  // setter for dataSource

  public void afterPropertiesSet() {
      // run the actual test
      onn = dataSource.getConnection(); 
      stmt = conn.createStatement();
  }
} 
```

**初始化方法**

```
<bean id="jdbcTest" class="org.springdemo.jdbc.JdbcTest" init-method="runTest">
  <property name="dataSource" ref="dataSource"/>
</bean> 
```

和类

```
public class JdbcTest {
  private DataSource dataSource;

  // setter for dataSource

  public void runTest() {
      // run the actual test
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:52:28.017

当使用 Spring 注入的 DataSource 时，DataSource 直到调用构造函数后才可用。本质上，由于您的配置，Spring 正在执行以下操作：

```
JdbcTest jdbcTest = new JdbcTest(); // NPE
jdbcTest.setDataSource(dataSource); 
```

您可能想要做的是这样的事情：

```
JdbcTest jdbcTest = new JdbcTest(dataSource); 
```

为此，请将您的配置更新为：

```
<bean id="jdbcTest" class="org.springdemo.jdbc.JdbcTest">
    <constructor-arg ref="dataSource"/>
</bean> 
```

你的 JdbcTest 类看起来像：

```
public class JdbcTest {
    private DataSource dataSource;

    pubic JdbcTest(DataSource dataSource) throws SQLException {
        this.dataSource = dataSource;

        conn = dataSource.getConnection(); 
        stmt = conn.createStatement();
    }
} 
```

# google-apps-script - 具有混合二进制和文本负载的 Google Apps 脚本 UrlFetchApp()

> ID：14655600
> 
> 赞同：2
> 
> 时间：2013-02-01T21:48:28.353
> 
> 标签：google-apps-script

我正在尝试从多个文档为[第三方服务创建](http://www.interfax.net/en/dev/rest/reference/2918)[UrlFetchApp()](https://developers.google.com/apps-script/class_urlfetchapp)有效负载。如果我按照他们的示例处理多个内联文档，则 UrlFetchApp() 有效负载应包含二进制（对于每个文件）和文本（以分隔两个内容）。如何将此混合内容提供给有效负载高级参数？

我仅在 blob 上使用 .getBytes() 成功完成了二进制文件，如下所示：

```
function testfax() {
  var faxnum = '12125551234';
  var url = 'https://rest.interfax.net/outbound/faxes?faxNumber=+'+faxnum;
  Logger.log('url='+url)
  Logger.log(" ")

  var varAuthString = AuthString();  //user function to create HTTP simple authorization header
  //Logger.log(varAuthString)
  //Logger.log(" ")

  var accept = "application/xml";
  var meth = 'POST';

  var payloadBlob = testDocBlob("For-Testing-Fax");   //user function returns GAS blob mime type "application/pdf"
  var payload = [];
  payload = payloadBlob.getBytes();
  Logger.log(payload.length)
  var contentType = "application/pdf"
  var ContentLen = 0;
  var headers = 
    {
      "Accept": accept ,
      "Authorization": "Basic " + varAuthString
    }
  //Logger.log("headers= ")
  //Logger.log(headers)
  //Logger.log(" ")
  var options =
    {
      "method" : meth,
      "headers" : headers,
      "contentType":contentType,
      "contentLength": ContentLen,
      "payload" : payload
    };
  //Logger.log("options= ")
  //Logger.log(options)
  //Logger.log(" ")
  var r = UrlFetchApp.fetch(url,options);
  Logger.log(r.getResponseCode());
  Logger.log(r.getContentText());
  Logger.log(r.getHeaders());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:49:50.830

你已经拥有了大部分你需要的代码，你只需要重新安排它并构建多部分处理。

我建议你修改你的传真发送函数来处理一系列文件 blob。这是您的测试函数的代码，构建数组并调用您的`testfax()`函数：

```
function testtestfax() {
  // Build an array with files for faxing.
  var files = [];
  // Repeat push line for multiple files.
  files.push(testDocBlob("For-Testing-Fax"));   //user function returns GAS blob mime type "application/pdf"
  testfax(files);
} 
```

这样，您可以`contentType`根据`length`文件数组进行设置。如果是单个文件，则使用`contentType=fileBlob.getContentType()`，否则`contentType=multipart/mixed...`使用适当的`boundary`参数。

```
 if (files.length == 1) {
    var contentType = "application/pdf"
  }
  else {
    var boundary="265001916915724"
    var contentType = 'multipart/mixed; boundary="'+boundary+'"';
  } 
```

您可以选择使用这样的硬编码边界 - 有趣的是，此示例中的边界在搜索中出现的频率。如果您可以生成自己的随机字符串，那就更好了。这一切都在[RFC2046 的第 5.1 节，多用途 Internet 邮件扩展中进行](https://www.rfc-editor.org/rfc/rfc2046#section-5.1)了描述。

设置好`contentType`后，构建消息的有效负载。如果是单个文件，则`payload`仅包含`files[0].getBytes()`. 否则，循环遍历`files`，附加到`payload`每个。

每个文件的多部分有效负载将包括：

*   一个空行 (CRLF)，后跟..
*   以双连字符开头的`boundary`字符串，后跟...
*   文件的`content-type`标签。`files[i].getContentType()`， 其次是...
*   `files[i].getBytes()`

然后通过以下方式完成多部分有效负载：

*   一个空行 (CRLF)，后跟...
*   `boundary`字符串前后用双连字符括起来，表示结束。

现有函数的最后一部分保持原样，使用上面构建的 设置`options`，`payload`并使用`fetch()`发送它。您现在应该有一个可以处理单个或多个传真的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T17:27:37.630

这是发布 pdf 和文本参数的示例

```
 var the_file = UrlFetchApp.fetch("http://www.education.gov.yk.ca/pdf/pdf-test.pdf").getBlob().setContentTypeFromExtension();
  var the_phone="444-444-4444";
  var the_filename="blaa.pdf";

  var boundary = "auto_filled";

   var requestBody = Utilities.newBlob("--"+boundary+"\r\n"+

  "Content-Disposition: form-data; name=\"api_key\"\r\n\r\n"+phaxio_key+"\r\n"+
  "--"+boundary+"\r\n"+

  "Content-Disposition: form-data; name=\"api_secret\"\r\n\r\n"+phaxio_secret+"\r\n"+
  "--"+boundary+"\r\n"+

  "Content-Disposition: form-data; name=\"to\"\r\n\r\n"+the_phone+"\r\n"+
  "--"+boundary+"\r\n"+      

  "Content-Disposition: form-data; name=\"filename\"; filename=\""+the_filename+"\"\r\n"+
  "Content-Type: "+"application/pdf"+"\r\n\r\n").getBytes();
  requestBody = requestBody.concat(the_file.getBytes());
  requestBody = requestBody.concat(Utilities.newBlob("\r\n--"+boundary+"--\r\n").getBytes());

  var options =
  {
    method: "post",
    contentType: "multipart/form-data; boundary="+boundary,
    payload: requestBody
  };

 //   Logger.log("B: "+JSON.stringify(options));

  var response = UrlFetchApp.fetch(url_endpoint, options); 
```

# javascript - 事件侦听器到首先调用的同一事件目标

> ID：14655601
> 
> 赞同：3
> 
> 时间：2013-02-01T21:48:31.300
> 
> 标签：javascript, dom, javascript-events, event-handling

如果我将两个事件侦听器注册到同一个事件目标。哪个事件处理程序将首先被调用？

例子：

```
document.addEventListener("click", function() {
    // do something 1
}, true); // using the capturing phase

document.addEventListener("click", function() {
    // do something 2
}, true); // using the capturing phase 
```

我没有在 w3c 规范中找到我的答案。

[DOM-Level-3-Events](http://www.w3.org/TR/DOM-Level-3-Events/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:25:36.873

加粗强调以回答问题（通过 w3c 规范：[http](http://www.w3.org/TR/DOM-Level-3-Events/#event-phase) ://www.w3.org/TR/DOM-Level-3-Events/#event-phase ）

> 首先，实施必须确定当前目标。这必须是部分传播路径中的下一个未决事件目标，从第一个开始。从事件侦听器的角度来看，这必须是侦听器已注册的事件目标。
> 
> 接下来，实现必须确定当前目标的候选事件侦听器。这必须是按注册**顺序**在当前目标上注册的所有事件侦听器的列表。[HTML5] 定义了通过事件处理程序属性注册的侦听器的顺序。一旦确定，候选事件监听器不得更改；添加或删除侦听器不会影响当前目标的候选事件侦听器。
> 
> 最后，实现**必须按顺序处理所有候选事件处理程序，**并在满足以下所有条件时触发每个处理程序......

我个人一直依赖这种行为，并且我没有看到现代浏览器的行为与规范描述的不同。

# javascript - Javascript不会加载到ajax div中

> ID：14655605
> 
> 赞同：2
> 
> 时间：2013-02-01T21:48:45.553
> 
> 标签：javascript, jquery, ajax

我有一个非常简单的 ajax 脚本，用于将 HTML 文件加载到 div 中。脚本如下所示：

```
<head>
<script>
function fetchResults(){
/*$(document).ready(function() {*/
                $('#slideshow').cycle({
                fx: 'fade',
                pager: '#smallnav', 
                pause:   1, 
                speed: 1800,
                timeout:  3500 
            });         
        });
</script>
<script type="text/javascript">

var bustcachevar=1 (1=yes, 0=no)
var loadedobjects=""
var rootdomain="http://"+window.location.hostname
var bustcacheparameter=""

function ajaxpage(url, containerid){
var page_request = false
if (window.XMLHttpRequest) // if Mozilla, Safari etc
page_request = new XMLHttpRequest()
else if (window.ActiveXObject){ // if IE
try {
page_request = new ActiveXObject("Msxml2.XMLHTTP")
} 
catch (e){
try{
page_request = new ActiveXObject("Microsoft.XMLHTTP")
}
catch (e){}
}
}
else
return false
page_request.onreadystatechange=function(){
loadpage(page_request, containerid)
}
if (bustcachevar) //if bust caching of external page
bustcacheparameter=(url.indexOf("?")!=-1)? "&"+new Date().getTime() : "?"+new Date().getTime()
page_request.open('GET', url+bustcacheparameter, true)
page_request.send(null)
}

function loadpage(page_request, containerid){
if (page_request.readyState == 4 && (page_request.status==200 || window.location.href.indexOf("http")==-1))
document.getElementById(containerid).innerHTML=page_request.responseText
}

function loadobjs(){
if (!document.getElementById)
return
for (i=0; i<arguments.length; i++){
var file=arguments[i]
var fileref=""
if (loadedobjects.indexOf(file)==-1){
if (file.indexOf(".js")!=-1){ //If object is a js file
fileref=document.createElement('script')
fileref.setAttribute("type","text/javascript");
fileref.setAttribute("src", file);
}
else if (file.indexOf(".css")!=-1){ //If object is a css file
fileref=document.createElement("link")
fileref.setAttribute("rel", "stylesheet");
fileref.setAttribute("type", "text/css");
fileref.setAttribute("href", file);
}
}
if (fileref!=""){
document.getElementsByTagName("head").item(0).appendChild(fileref)
loadedobjects+=file+" " 
}
}
}

</script>
</head> 
```

它将所说的 HTML 文件整齐地加载到这个 div 中：

```
 <div id="rss">
<script type="text/javascript">
            ajaxpage('news.html', 'content');   
        </script>
</div> 
```

但是在其中一个 HTML 文件中，我有一点 javascript 不会加载到 div 中，但在直接查看页面时加载正常。

```
<script src="http://feeds.feedburner.com/xxx/QFMN?format=sigpro" type="text/javascript" ></script> 
```

我知道 ajax 中的 javascript 存在问题，但也知道有一种解决方法。作为 javascript 的菜鸟，我不完全确定如何工作。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:04:23.287

由于您似乎已经在使用 jQuery，请，请，请使用 jQuery 的 Ajax 方法来执行异步请求。您的所有代码都可以替换为

```
$(function () {
    $('#container').html($.get('/some/other/url.html'));
}); 
```

这是一个链接示例，单击该链接会将 a 的内容替换为`div`AJAX 调用的结果：

```
<a class="ajaxLink" href="/some/other/url.html">next</a>
<div id="container">
    Hello there
</div>

<script type="text/javascript">
    $(function () {
        $("a.ajaxLink").click(function () {
            $('#container').load($(this).attr('href'));
            return false;
        });
    });
</script> 
```

请注意我们如何巧妙地使用`href`链接的属性来指定 URL - 如果客户端没有启用 JavaScript，则链接将照常工作。

[关于 AJAX 方法的 JQuery 文档](http://api.jquery.com/category/ajax/)是有价值的信息来源。[请参阅.load() 方法](http://api.jquery.com/load/)的文档中的“加载页面片段”和“脚本执行”，了解加载页面中的脚本是如何执行的。

（另外，使用[jslint](http://www.jslint.com/)或类似的服务非常有帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:28:51.050

实际上，

您不能执行来自 ajax 调用的 Javascript。您可以执行`eval(result)`if `result`is pure javascript，也可以使用`jquery`类似选择器从结果中获取数据。

主要问题是您不应将数据导出为 html 格式，而应以 JSON 或 XML 格式导出

您的代码可能如下所示：

```
$.ajax({
  url: "url",
  type: "GET",
  datatype: "xml",
  cache: false,
  success: function(response) {
    alert($("Result",response).text())
    eval($("Code",response).text())
  }
}); 
```

使用此输出：

`<?xml version='1.0' encoding='UTF-8'?> <Result>Hi</Result> <Code>console.log(1)</Code>`

此代码将警告 Hi 并执行代码 console.log(1)

# javascript - Google Maps API v3 - 如何将 .getBounds() 转换为像素坐标？

> ID：14655614
> 
> 赞同：6
> 
> 时间：2013-02-01T21:49:08.187
> 
> 标签：javascript, google-maps-api-3

我知道如何使用叠加投影来获取 LatLng 对象，然后使用 .fromLatLngToDivPixel() 将该单个 LatLng 转换为像素

但是， .getBounds() 返回一对 LatLng 坐标。我尝试像访问数组一样访问它（例如在指定 index[1] 时），但这不起作用。它似乎不是一个数组。

有没有办法将值从 .getBounds() 转换为像素数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T08:24:46.847

> 但是， .getBounds() 返回一对 LatLng 坐标。我试过像访问数组一样访问它（例如在指定索引[1](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)时），但这不起作用。它似乎不是一个数组。

LatLngBounds**不是一个数组**，它是一个对象，[**文档**](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)向您展示了两种获取坐标的方法：

```
var NE = bounds.getNorthEast();
var SW = bounds.getSouthWest(); 
```

这两种方法返回 LatLng 对象，您可以将其传递给`fromLatLngToDivPixel()` 但是，如果您通过读取获得 LatLngBounds 对象，`map.getBounds()`那么您已经知道像素值应该是什么（地图容器 DIV 的角）。

# vb.net - 位图ctor抛出异常

> ID：14655616
> 
> 赞同：0
> 
> 时间：2013-02-01T21:49:20.037
> 
> 标签：vb.net

我想不出解决办法。这是我的代码：

```
 Dim wbRect As Rectangle = WebBrowser1.ClientRectangle
   Dim wbBm As New Bitmap(WebBrowser1.ClientRectangle.Width, WebBrowser1.ClientRectangle.Height)
   Dim gwb As Graphics = Graphics.FromImage(wbBm)
   gwb.CopyFromScreen(WebBrowser1.PointToScreen(New Point(14, 31)),
   New Point(0, 0),
   New Size(PictureBox1.Width, PictureBox1.Height))
   wbBm.Save("c:\temp1.bmp")
   PictureBox1.ImageLocation = "c:\temp1.bmp"
   PictureBox1.BringToFront()

   Dim bm As New Bitmap("c:\img1.bmp") //here appears an error - Parameter is not valid

   Dim rect As New Rectangle(0, 0, bm.Width, bm.Height)
   Dim bmpData As System.Drawing.Imaging.BitmapData = bm.LockBits(rect, _
   System.Drawing.Imaging.ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb) 
```

我能做些什么来消除错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:04:51.793

如果文件不存在，您将收到此错误。在尝试打开之前检查以确保 img1.bmp 存在：

```
 Dim fn As String = "c:\img1.bmp"
    If File.Exists(fn)
        Dim bm As New Bitmap(fn) ''here appears an error - Parameter is not valid

        Dim rect As New Rectangle(0, 0, bm.Width, bm.Height)
        Dim bmpData As System.Drawing.Imaging.BitmapData = bm.LockBits(rect, _
        System.Drawing.Imaging.ImageLockMode.ReadWrite, PixelFormat.Format24bppRgb)
    End If 
```

# opencv - 带有 mingw 的 cvBlobsLib

> ID：14655622
> 
> 赞同：0
> 
> 时间：2013-02-01T21:49:42.587
> 
> 标签：opencv, mingw, cvblobslib

有人知道如何使用 MinGW 构建 cvBlobsLib 吗？在官方页面***[http://opencv.willowgarage.com/wiki/cvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib)***上只有 VS 的说明。

还有这个库的 linux 版本**[http://opencv.willowgarage.com/wiki/cvBlobsLib?action=AttachFile&do=view&target=cvblobs8.3_linux.tgz](http://opencv.willowgarage.com/wiki/cvBlobsLib?action=AttachFile&do=view&target=cvblobs8.3_linux.tgz)**，但我看到它的makefile不能在windows中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:58:25.287

如果你使用 eclipse 那么你没有很多工作：创建一个新项目，使用 MinGW 工具链。转到项目属性，然后在 C/C++ General >> Paths and Symbols 下添加 openCV 库路径。编译项目，应该没问题。 如果您有更多问题（尤其是注 3），请使用此 [http://opencv.willowgarage.com/wiki/cvBlobsLib#Build_intructions](http://opencv.willowgarage.com/wiki/cvBlobsLib#Build_intructions)

# c - 三重嵌套循环的时间复杂度？

> ID：14655627
> 
> 赞同：5
> 
> 时间：2013-02-01T21:50:09.617
> 
> 标签：c, for-loop, time-complexity, nested-loops

```
for(i=0; i<n; i++)
{
    a[i]=0;
    for(i=0; i<n; i++)
    {
        for(j=0; j<n; j++)
        {
            a=3;
        }
    }
} 
```

这是一个三重嵌套循环。我的书说运行时间是：O(N) + O(N^2) = O(N^2)

不应该是 O(N^3) 吗？所有 3 个循环都相互依赖。它将运行 N*N*N 次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T21:55:16.247

这是因为循环`#1`和循环在比较期间`#2`使用相同的计数变量。`i`

在使用 的第二个循环结束时`i`， 的值为*n*`i` ，这也使其脱离了外循环。**一个循环在那里完全是多余的。**

 **** * *

```
#include <stdio.h>
int main(){
    int x = 0;
    int n = 20;
    int i, j;
    for(i=0; i<n; i++) //this loop runs once
    {
        for(i=0; i<n; i++) //this loop runs n times
        {
            for(j=0; j<n; j++) //this loop also runs n times
            {
                x++;
            }
        }
    }
    printf("%d", x);
} 
```

`O(N^2)`整个运行的时间到了。

**[例子](http://ideone.com/pOCTrU)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:56:53.813

我不认为他们是你书中的错误。您必须更深入地查看您的代码：前两个循环使用相同的变量进行循环，所以会发生以下情况：

在第一个括号之后， i 等于 0，然后进入第二个循环。当第二个循环结束时，第一个循环将结束，因为两个循环都使用条件 i

实际上我看不出 O(N) 来自哪里，但全局复杂度应该是 O(N^2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T21:57:33.773

这不是 n^3，因为变量 i 在内部循环中被重用，使其成为 n^2。不过，不确定这本书在哪里得到 O(n)。***

# python - subprocess.call vs os.system python

> ID：14655629
> 
> 赞同：1
> 
> 时间：2013-02-01T21:50:15.390
> 
> 标签：python, python-2.7, subprocess, os.system

第一次在这里提问：

我需要在 Windows 中映射网络驱动器。该位置是一个内部共享点文档库。

在 cmd 窗口中：

```
net use g: http://na.com/DMP/DMP/programming/ 
```

issuccessful-->命令成功完成

```
os.system('"net use k: http://na.com/DMP/DMP/programming/"') 
```

也是成功的。

但是，如果驱动器已经映射，我想使用 subprocess.call - 我想尝试另一个驱动器

```
call(["net", "use", ":q", '"http://na.com/DMP/DMP/programming/"']) 
```

这失败了“发生了系统错误 67。找不到网络名称”我已经为最后一个列表项尝试了许多选项，但没有成功。

知道我可以在其中填充什么以成功完成此操作或使用不同的方法来映射驱动器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:12:38.810

您的代码中至少有两个问题：

```
call(["net", "use", ":q", '"http://na.com/DMP/DMP/programming/"']) 
```

首先，你有`":q"`你的意思`"q:"`。这可能会导致`net`命令解释`:q`为您的网络位置而不是目标驱动器，这可能会导致错误 67。

其次，您在 URL 周围有一组额外的引号：`'"http://na.com/DMP/DMP/programming/"'`您应该在哪里使用`'http://na.com/DMP/DMP/programming/'`. 当`subprocess`构建要传递给的字符串时`CreateProcess`，它已经引用了您的每个参数。所以，如果你自己引用它们，你最终会用双引号来引用参数。在某些情况下，这在 Windows 中实际上是不可能的，所以你最终会得到垃圾，但我认为这里不是这种情况。您将成功地将这个带引号的字符串获取到`net`，告诉它您要打开以协议开头的相对路径`"http:`或带有协议的 URL `"http`，或类似的东西。不管它是什么，它都不是可用的网络位置，这很可能会导致错误 67。

正如 Ben 指出的那样，您的`system`调用存在类似的问题——您在整个字符串周围添加了一对额外的引号。如果你真的想弄清楚，这可能是有原因的……但我认为你不想弄清楚。就当做“我做错事，但我很幸运”，以后不要那样做。

最后，正如[文档](http://docs.python.org/2/library/subprocess.html#converting-an-argument-sequence-to-a-string-on-windows)所说：

> 在 Windows 上，将 args 序列转换为可以解析的字符串

这意味着，如果您已经有一个适用于 Windows 的命令行，则最好将其用作字符串，而不是尝试将其分解为一个序列以`subprocess`进行重新组合。

（请记住，这仅适用于 Windows！在其他平台上，不是构建命令行字符串以传递给[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)系列中的函数，而是构建字符串`subprocess`数组以传递给`exec`系列中的函数。）

所以，只需这样做：

```
call("net use g: http://na.com/DMP/DMP/programming/") 
```

# mysql - MySQL - 检索每个用户每天的最后更新

> ID：14655633
> 
> 赞同：2
> 
> 时间：2013-02-01T21:50:27.597
> 
> 标签：mysql, sql, greatest-n-per-group

我有一个带有列的假设表“用户”

*   user_id（自动递增）
*   姓名
*   富
*   酒吧
*   最近更新时间

此表每天更新多次。如何查询以获取每个用户每天的最后一次更新，返回 X 天？

示例数据

```
1 John a b "2013-01-31 02:01:12"
2 Rich c d "2013-01-31 22:41:12"
3 John e f "2013-01-31 22:01:15"
4 Rich g h "2013-02-01 16:01:12"
5 John i j "2013-02-01 22:21:12"
6 Rich k m "2013-02-01 22:21:12" 
```

期望的回报集：

```
2 Rich c d 2013-01-31
3 John e f 2013-01-31
5 John i j 2013-02-01
6 Rich k m 2013-02-01 
```

我可以通过以下查询获得每个用户的最后一次更新，它将它应用于我正在努力的每一天。

```
SELECT u1.*
FROM users u1 
    LEFT JOIN users u2
    ON (u1.name = u2.name AND u1.user_id < u2.user_id)
WHERE u2.user_id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:54:04.750

通过在日期级别汇总数据然后再加入来做到这一点：

```
select u.*
from users u join
     (select u.nanme, DATE(last_updated) as thedate, MAX(last_updated) as maxlastupdated
      from users u
      group by u.name, DATE(last_updated)
     ) usum
     on u.name = usum.name and
        u.last_updated = usum.maxlastupdated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:59:14.063

首先，表名`users`非常混乱，因为这些不是用户而是登录名。

除此之外，您走在正确的道路上。您只需要在联接中添加对日期的比较。

```
SELECT u1.*
FROM users u1
    LEFT JOIN users u2
    ON (u1.name = u2.name AND date_format(u1.last_updated, '%Y-%m-%d') = date_format(u2.last_updated, '%Y-%m-%d') AND u1.user_id < u2.user_id)
WHERE u2.user_id IS NULL 
```

看到它在这个[SQL fiddle](http://sqlfiddle.com/#!2/f1b1a/8)中工作。

# c# - 分配一个 lambda 表达式会导致它以后不被执行？

> ID：14655639
> 
> 赞同：5
> 
> 时间：2013-02-01T21:51:07.793
> 
> 标签：c#, .net, linq, lambda, linq-expressions

我似乎无法执行之前分配给变量的 lambda 表达式。这是我整理的一个小型 C# 示例程序：

```
public class Program
{
    public static void Main(string[] args)
    {
        int[] notOrdered = { 3, 2, 5, 8, 1, 4, 7, 9, 6 };
        Print(notOrdered);

        IEnumerable<int> ascOrdered = Order(notOrdered, true);
        Print(ascOrdered);

        IEnumerable<int> descOrdered = Order(notOrdered, false);
        Print(descOrdered);
    }

    static IEnumerable<T> Order<T>(IEnumerable<T> enumerables, bool ascending)
    {
        Expression<Func<T, object>> selector = (z) => z; // simple for demo purposes; pretend it's complex
        if (ascending)
            return enumerables.OrderBy(z => selector);
        else
            return enumerables.OrderByDescending(z => selector);
    }

    static void Print<T>(IEnumerable<T> enumerables)
    {
        foreach(T enumerable in enumerables)
            Console.Write(enumerable.ToString() + " ");
        Console.WriteLine();
    }
} 
```

我希望它产生这个输出：

> 3 2 5 8 1 4 7 9 6
> 
> 1 2 3 4 5 6 7 8 9
> 
> 9 8 7 6 5 4 3 2 1

但是，令人困惑的是，它会产生以下输出：

> 3 2 5 8 1 4 7 9 6
> 
> 3 2 5 8 1 4 7 9 6
> 
> 3 2 5 8 1 4 7 9 6

基本上，我只是希望能够将相同的表达式传递给两个不同的排序操作，而不必输入两次，因此我`selector`事先将其分配给它。我有一个真实的用例，其中 lambda 表达式真的很长/很乱，我不想复制混乱，我宁愿只引用一个变量，就像我在这里一样。

那么，a）是什么导致了电流输出？b）我怎样才能得到我想要的输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T21:57:37.417

在您的代码中，您不使用表达式。

你的代码是这样的：

```
object selector = new object();
if (ascending)
    return enumerables.OrderBy(z => selector);
else
    return enumerables.OrderByDescending(z => selector); 
```

您的代码应该没有表达式：

```
Func<T, object> selector = (z) => z;
if (ascending)
    return objects.OrderBy(selector);
else
    return objects.OrderByDescending(selector); 
```

但是，如果您真的想要一个表达式（出于测试目的或其他任何目的），请先编译它：

```
Expression<Func<T, object>> selector = (z) => z;
var compiledExpression = selector.Compile();
if (ascending)
    return objects.OrderBy(compiledExpression);
else
    return objects.OrderByDescending(compiledExpression); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-01T21:57:46.490

a) 现在，您是按`Expression<Func<T,object>>`（实际的表达式实例）而不是按对象本身排序的。这有效地使排序始终使用相同的对象进行排序，这意味着 order by 子句不会改变任何内容（所有项目都是“相等的”，因为它们等于表达式的同一实例）。

b）我相信你想要：

```
static IEnumerable<T> Order<T>(IEnumerable<T> enumerables, bool ascending)
{
    if (ascending)
        return enumerables.OrderBy(z => z);
    else
        return enumerables.OrderByDescending(z => z);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:03:04.977

您没有调用`selector`，只是比较表达式的*实例*。正确的方法应该是

```
static IEnumerable<T> Order<T>(IEnumerable<T> enumerables, bool ascending)
{
    Func<T, object> selector = (z) => z;
    if (ascending)
        return enumerables.OrderBy(z => selector(z));
    else
        return enumerables.OrderByDescending(z => selector(z));
} 
```

# java - Java：在图像上创建阴影效果

> ID：14655643
> 
> 赞同：2
> 
> 时间：2013-02-01T21:51:47.090
> 
> 标签：java, image, swing

我正在尝试在图像上创建阴影效果（使用 java）。

我已经看到了多个相关的问题，并且我已经实施了几个建议的解决方案。不幸的是，我总是遇到同样的问题：阴影效果将整个图像重新绘制为灰色（即阴影颜色） - 因此原始图像不再可见。

我测试的代码示例（基于 JIDE 免费提供的库）：

```
ShadowFactory sf = new ShadowFactory(2, 0.5f, Color.black);
ImageIO.write(sf.createShadow(ImageIO.read(new File("c:\\out2.png"))), "png", new File("c:\\out3.png")); 
```

不用说我用多个源文件（out2.png）对此进行了测试。

我一无所知：任何提示/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T22:49:59.720

总的理论很简单。基本上，您需要生成图像的蒙版（使用 a`AlphaComposite`并用您想要的颜色填充生成的图像（也使用`AlphaComposite`. 当然，这一切都适用于图像的 alpha 通道......

获得该蒙版后，您需要将两个图像组合在一起（将原始图像与蒙版图像叠加）

此示例使用[JHLabs 过滤器](http://www.jhlabs.com/ip/filters/index.html)来提供模糊...

![在此处输入图像描述](../Images/140ada8b4bfcf4a10f77308e91220fab.png)

```
public class TestImageDropShadow {

    public static void main(String[] args) {
        new TestImageDropShadow();
    }

    public TestImageDropShadow() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ImagePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ImagePane extends JPanel {

        private BufferedImage background;

        public ImagePane() {
            try {
                BufferedImage master = ImageIO.read(getClass().getResource("/Scaled.png"));
                background = applyShadow(master, 5, Color.BLACK, 0.5f);
            } catch (IOException ex) {
                Logger.getLogger(TestImageDropShadow.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g.drawImage(background, x, y, this);
            }
        }

    }

    public static void applyQualityRenderingHints(Graphics2D g2d) {
        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);
        g2d.setRenderingHint(RenderingHints.KEY_FRACTIONALMETRICS, RenderingHints.VALUE_FRACTIONALMETRICS_ON);
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_STROKE_CONTROL, RenderingHints.VALUE_STROKE_PURE);
    }

    public static BufferedImage createCompatibleImage(int width, int height) {
        return createCompatibleImage(width, height, Transparency.TRANSLUCENT);
    }

    public static BufferedImage createCompatibleImage(int width, int height, int transparency) {
        BufferedImage image = getGraphicsConfiguration().createCompatibleImage(width, height, transparency);
        image.coerceData(true);
        return image;
    }

    public static BufferedImage createCompatibleImage(BufferedImage image) {
        return createCompatibleImage(image, image.getWidth(), image.getHeight());
    }

    public static BufferedImage createCompatibleImage(BufferedImage image,
            int width, int height) {
        return getGraphicsConfiguration().createCompatibleImage(width, height, image.getTransparency());
    }

    public static GraphicsConfiguration getGraphicsConfiguration() {
        return GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
    }

    public static BufferedImage generateMask(BufferedImage imgSource, Color color, float alpha) {
        int imgWidth = imgSource.getWidth();
        int imgHeight = imgSource.getHeight();

        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);
        Graphics2D g2 = imgBlur.createGraphics();
        applyQualityRenderingHints(g2);

        g2.drawImage(imgSource, 0, 0, null);
        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
        g2.setColor(color);

        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());
        g2.dispose();

        return imgBlur;
    }

    public static BufferedImage generateBlur(BufferedImage imgSource, int size, Color color, float alpha) {
        GaussianFilter filter = new GaussianFilter(size);

        int imgWidth = imgSource.getWidth();
        int imgHeight = imgSource.getHeight();

        BufferedImage imgBlur = createCompatibleImage(imgWidth, imgHeight);
        Graphics2D g2 = imgBlur.createGraphics();
        applyQualityRenderingHints(g2);

        g2.drawImage(imgSource, 0, 0, null);
        g2.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_IN, alpha));
        g2.setColor(color);

        g2.fillRect(0, 0, imgSource.getWidth(), imgSource.getHeight());
        g2.dispose();

        imgBlur = filter.filter(imgBlur, null);

        return imgBlur;
    }

    public static BufferedImage applyShadow(BufferedImage imgSource, int size, Color color, float alpha) {
        BufferedImage result = createCompatibleImage(imgSource, imgSource.getWidth() + (size * 2), imgSource.getHeight() + (size * 2));
        Graphics2D g2d = result.createGraphics();
        g2d.drawImage(generateShadow(imgSource, size, color, alpha), size, size, null);
        g2d.drawImage(imgSource, 0, 0, null);
        g2d.dispose();

        return result;
    }

    public static BufferedImage generateShadow(BufferedImage imgSource, int size, Color color, float alpha) {
        int imgWidth = imgSource.getWidth() + (size * 2);
        int imgHeight = imgSource.getHeight() + (size * 2);

        BufferedImage imgMask = createCompatibleImage(imgWidth, imgHeight);
        Graphics2D g2 = imgMask.createGraphics();
        applyQualityRenderingHints(g2);

        int x = Math.round((imgWidth - imgSource.getWidth()) / 2f);
        int y = Math.round((imgHeight - imgSource.getHeight()) / 2f);
        g2.drawImage(imgSource, x, y, null);
        g2.dispose();

        // ---- Blur here ---

        BufferedImage imgGlow = generateBlur(imgMask, (size * 2), color, alpha);

        return imgGlow;
    }

    public static Image applyMask(BufferedImage sourceImage, BufferedImage maskImage) {
        return applyMask(sourceImage, maskImage, AlphaComposite.DST_IN);
    }

    public static BufferedImage applyMask(BufferedImage sourceImage, BufferedImage maskImage, int method) {
        BufferedImage maskedImage = null;
        if (sourceImage != null) {

            int width = maskImage.getWidth(null);
            int height = maskImage.getHeight(null);

            maskedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
            Graphics2D mg = maskedImage.createGraphics();

            int x = (width - sourceImage.getWidth(null)) / 2;
            int y = (height - sourceImage.getHeight(null)) / 2;

            mg.drawImage(sourceImage, x, y, null);
            mg.setComposite(AlphaComposite.getInstance(method));

            mg.drawImage(maskImage, 0, 0, null);

            mg.dispose();
        }
        return maskedImage;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-27T20:47:47.960

这是我的版本：

```
private static Image dropShadow(BufferedImage img) {
    // a filter which converts all colors except 0 to black
    ImageProducer prod = new FilteredImageSource(img.getSource(), new RGBImageFilter() {
        @Override
        public int filterRGB(int x, int y, int rgb) {
            if (rgb == 0)
                return 0;
            else
                return 0xff000000;
        }
    });
    // create whe black image
    Image shadow = Toolkit.getDefaultToolkit().createImage(prod);

    // result
    BufferedImage result = new BufferedImage(img.getWidth(), img.getHeight(), img.getType());
    Graphics2D g = (Graphics2D) result.getGraphics();

    // draw shadow with offset
    g.drawImage(shadow, 10, 0, null);
    // draw original image
    g.drawImage(img, 0, 0, null);

    return result;
} 
```

# php - PHP, Sessions, Cookies - 发生了一些不允许某些用户登录的事情？

> ID：14655651
> 
> 赞同：0
> 
> 时间：2013-02-01T21:52:45.530
> 
> 标签：php, cookies, session-cookies

我们每天有大约 100 名用户访问我们的网站。他们中的大多数人在登录时都没有问题。但是，我们每个月都会收到一次电话或电子邮件投诉，抱怨用户只看到登录页面刷新，没有错误消息或任何东西。

所有错误消息都通过 PHP 会话 cookie 发送，当然登录后的所有内容都基于该会话。我认为页面只是刷新的唯一原因是因为他们在本地机器上阻止了该会话 cookie ......

现在大多数情况下，用户都在 Internet Explorer 上，但偶尔也会出现在 Chrome 或 Firefox 上。我什至有一个用户（在 OSX 上）尝试过 Safari、Chrome、FF——它永远不会让他们登录，页面只会刷新。我让用户将该网站添加为受信任的网站，但仍然没有运气。

这是最糟糕的，因为我无法从任何网络或任何浏览器/计算机上复制它。

有谁知道什么可能导致这样的事情？该站点正在强制使用 SSL（HTACCESS 文件重定向到 HTTPS）。该站点强制将会话 cookie 设置为仅 HTTP，并且 Secure 标志也设置为 TRUE（这两个是最近的更改）。

我不确定服务器或 PHP 实例上的其他设置会导致这样的事情，或者它是否只是客户端问题（它似乎是）。如果是客户端，我想了解这个问题和可能的解决方案。

为了抢占所有人，不 - 我不能共享用于调试的网站 URL，因为不幸的是，客户不会欣赏这一点。感谢您的帮助，我很乐意回答我能回答的任何问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:50:20.727

您的会话 cookie 是否具有有效名称？过去我遇到过这个问题，如果会话 cookie 的名称无效，某些浏览器不接受它，但其他浏览器确实接受它们；

[http://php.net/manual/en/function.session-name.php](http://php.net/manual/en/function.session-name.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:08:20.933

负载均衡器后面是否有多个 Web 服务器？PHP 会话是否本地存储在每个 Web 服务器上？如果是这样，负载平衡器的工作就是确保用户在重复访问时不断返回到同一台服务器。如果出现问题，他们可能会被发送到他们没有会话的服务器。可能是一些间歇性故障将用户发送到错误的服务器。

只是猜测，因为正如其他人指出的那样，我们真的没有足够的信息。

# c# - Resharper“如果短则取消”

> ID：14655653
> 
> 赞同：2
> 
> 时间：2013-02-01T21:52:49.193
> 
> 标签：c#, resharper

我正在寻找一个 ReSharper 命令，它将采用这样的方式......

```
MethodWithFewerParametersThanBefore(
    param1,
    param2,
    param3,
    param4,
    param5); 
```

并将其转换为...

```
MethodWithFewerParametersThanBefore(param1, param2, param3, param4, param5); 
```

如果将其内置到代码清理中而不必关闭“保留现有换行符”，那就太好了，但我会满足于让我选择我想要“取消”并运行键盘或菜单命令的文本。

这可能吗？如何？

请注意，我为方法*定义*（而不是调用）找到了这样做的技巧——您只需执行“更改签名”并更改一些无关紧要的东西。这会将参数重置为一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-22T17:37:42.847

从 ReSharper 2017.2 开始：选择代码、Alt-Enter、格式选择 > 压缩格式。

# jquery - JQuery Autocomplete：获取当前焦点

> ID：14655655
> 
> 赞同：7
> 
> 时间：2013-02-01T21:52:54.253
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

`<li>`当用户将鼠标悬停或以其他方式突出显示其选项之一时，JQuery 自动完成会触发焦点事件。在这个事件中，我想引用`<li>`当前关注的那个，但我不知道如何选择它。目前，我有：

```
focus: function( event, ui ) {
  var target = event.currentTarget
  alert($(target).html())
} 
```

但这会返回整个`<li>`s 列表，而不仅仅是当前聚焦的列表。我尝试了其他事件方法，例如 event.delegateTarget 和 event.target，但没有成功。有没有另一种方法来获得焦点元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:09:45.297

你将不得不：

1.  抓住自动完成正在使用的菜单小部件。
2.  获取`li`当前关注的内容（这`li`有一个`a`with 类`ui-state-focus`

    ```
    focus: function (event, ui) {
        var menu = $(this).data("uiAutocomplete").menu.element,
        focused = menu.find("li:has(a.ui-state-focus)");
        // focused is the focused `li`
    } 
    ```

**示例：http:** [//jsfiddle.net/J5rVP/43/](http://jsfiddle.net/J5rVP/43/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:25:20.017

改用以下方法有什么缺点吗？

```
focus: function(event, ui) {
    $(".ui-autocomplete li").removeClass("ui-state-hover");
    $(".ui-autocomplete").find("li:has(a.ui-state-focus)").addClass("ui-state-hover");
} 
```

# sql - SQL Server 将存储过程结果导出为 CSV 文件，保持 char(9) 格式

> ID：14655656
> 
> 赞同：1
> 
> 时间：2013-02-01T21:52:55.440
> 
> 标签：sql, sql-server, tsql, stored-procedures

我在将存储过程的结果导出到 csv 文件并将结果保存为 9 个字符的字符串时遇到问题。存储过程的结果是一个简单的单列输出，在 SSMS 中执行时看起来很好，但 csv 中具有前导零的返回值在返回时没有零。表格列是类型`varchar(13)`，我已经进行了转换以尝试保持前导零不被丢弃但没有运气。

这是存储过程：

```
SELECT DISTINCT
convert(char(8),n.NIIN)
FROM IMMS_ELEC.dbo.NIINList n 
```

这是我正在使用的简单 BCP 脚本：

```
DECLARE @string AS NVARCHAR(4000)
SELECT    @string = 'BCP "exec CPLINK_Dev.dbo.spSelectLOG_NiinDistinct"
QUERYOUT:\data.csv -c -T -t'
exec master.dbo.xp_cmdshell @string 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:30:38.167

Excel 喜欢认为它比您更了解如何格式化您的数据……这里有一个技巧可以用来超越它。打开一个新的电子表格，选择所有单元格并将类型更改为文本（从常规），然后从记事本（或 SSMS）复制数据，将其粘贴到 Excel 中，如果需要，使用文本到列... Excel 应该停止然后弄乱你的格式。

您也可以对从 Excel 导入数据执行相同的操作，但我发现第一个更有效，您也可以使用它直接从 SSMS 网格结果复制和粘贴。

# c# - SQL Server VB .NET（或 C#）日期时间规范

> ID：14655658
> 
> 赞同：1
> 
> 时间：2013-02-01T21:52:59.333
> 
> 标签：c#, sql, sql-server, vb.net

我正在使用格式的规范日期`2011-10-24 00:00:00.000`。

有一个 SQL Server 语句，我可以运行它来获取我需要的格式的日期。

```
SELECT 
   CONVERT(VARCHAR(50), CONVERT(datetime, '2011-10-24 00:00:00.000', 120), 101)` as test 
```

退货

```
10/24/2011. 
```

这是我的问题。

有没有办法做到这一点，在 .Net（C# 或 VB）中将 '2011-10-24 00:00:00.000' 转换为 10/24/2011？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:00:01.177

为什么不直接选择它作为日期而不是转换为 VARCHAR(50) ？

如果这不是一个选项，则将其转换为日期（DateTime.Parse）并使用日期时间的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:01:09.023

在 VB 中

```
Dim dt As Date = Date.Parse("2011-10-24 00:00:00.000")
Dim newDateString as string = dt.ToShortDateString() 
```

在 C# 中

```
System.DateTime dt = System.DateTime.Parse("2011-10-24 00:00:00.000");
string newDateString = dt.ToShortDateString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:01:28.340

您可以将输入字符串解析为`DateTime`对象，[`DateTime.Parse`](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)然后使用[`DateTime.ToString`](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方法根据需要对其进行格式化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T21:59:59.727

VB.Net

```
 Dim newDate As string = CDate(fromdb).ToShortDateString 
```

C＃

```
 string newDate = DateTime.Parse(fromdb).toShortDateString(); 
```

从 db 中将其拉为 DateTime ，让 c#/vb.net 为您转换

# c# - Windows 8 XAML/C# - 如何在画布上绘制动态元素？

> ID：14655660
> 
> 赞同：0
> 
> 时间：2013-02-01T21:53:28.213
> 
> 标签：c#, xaml, gridview, canvas, windows-8

我有用于图形的画布控件，并且需要能够动态地向其中添加可变数量的数据点。也许我不知道有一个很好的控制来做这种事情，但我试图用 GridView 来做这样的事情：

```
<Canvas x:Name="GraphPointsAndLines" Canvas.ZIndex="2">
        <GridView x:Name="gvDataPoints">
            <GridView.ItemTemplate>
                <DataTemplate>
                    <Button IsEnabled="False" Canvas.Left="{Binding PointXValue}" Canvas.Top="{Binding PointYValue}" Content="{Binding Value}" Style="{StaticResource ButtonGraphPoint}" />
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>
    </Canvas> 
```

但是由于 gridview 的性质，它没有认识到子按钮元素是任何此类画布的一部分，最终只是将它们堆叠在一起。任何人都可以提供任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:17:57.090

这可能很有趣：[将数据绑定到 position 的简单技术](http://www.codeproject.com/Articles/139216/A-Simple-Technique-for-Data-binding-to-the-Positio)。

基本上，有一个带有项目源的项目控件并应用数据模板，设置其项目面板并应用项目容器样式。

# node.js - node.js-http：监听本地 unix 管道/套接字

> ID：14655661
> 
> 赞同：9
> 
> 时间：2013-02-01T21:53:44.130
> 
> 标签：node.js, http, sockets, websocket, pipe

是否有可能在本地 unix 管道/套接字上本地侦听 node.js-http 服务器？（例如 /var/tmp/http.sock）。我想将它与[WebSockets](http://einaros.github.com/ws/)和反向代理结合使用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T22:03:53.407

因为 http 基于 net，您可以使用与 net 模块相同的选项。事实上，[http 文档](http://nodejs.org/api/http.html#http_server_listen_path_callback)明确表示您可以在 unix 套接字上进行侦听。

```
var server = http.createServer();
server.listen('/var/tmp/http.sock'); 
```

# batch-file - 停止批处理文件发出哔哔声

> ID：14655662
> 
> 赞同：3
> 
> 时间：2013-02-01T21:53:51.367
> 
> 标签：batch-file, cmd

出于某种原因，在 PAUSE 事件中按 Space 时，我的批处理脚本会发出哔哔声。

我目前有两个：

```
start /wait %comspec% /Q /C "net stop beep" >nul 2>&1
start /wait %comspec% /Q /C "sc stop beep" >nul 2>&1 
```

...在我的脚本开始时，它已成功禁用系统蜂鸣声，但现在它已被 Windows“主题”蜂鸣声所取代。

当我进入 CHOICE 事件并且用户按下 Space 时，也会发生这种情况。

关于如何使批处理脚本完全静音的任何想法，即使在输入“错误”期间也是如此？

感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T13:40:51.897

尝试用这样的`choice`东西替换你的命令。

```
set /p choice="Please enter a choice: " 
```

它需要用户按回车键，但至少它不会发出哔哔声。

如果您真的想以艰难的方式做到这一点并关闭默认声音，我想您会`HKCU\AppEvents\Schemes\Apps\.Default\SystemAsterisk\.Current\(Default)`在`HKCU\AppEvents\Schemes\Apps\.Default\AppGPFault\.Current\(Default)`.

这是一个简短的概念证明。

```
@echo off
setlocal

:: stop bleeping service
start /wait %comspec% /Q /C "sc stop beep" >nul 2>&1

:: store current event setting for Asterisk
set loc=HKCU\AppEvents\Schemes\Apps\.Default\SystemAsterisk\.Current
for /f "tokens=3*" %%I in ('reg query %loc%') do (
    set asterisk=%%I %%J
)

:: choice with service stopped and Windows Asterisk sound event still active
choice

:: set Windows Asterisk event sound to ""
reg add "%loc%" /v "" /t REG_SZ /d "" /f >NUL

:: choice with asterisk set to ""
choice

:: restore the sound
reg add "%loc%" /v "" /t REG_SZ /d "%asterisk%" /f >NUL 
```

如果这不起作用，请尝试替换`SystemAsterisk`为`AppGPFault`. 老实说，我无法重现你的症状。停止哔声服务后，我听到了沉默。所以我不完全确定当用户点击空格键并且哔声服务停止时会触发哪个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T18:28:21.523

您总是可以记录片刻的沉默，然后用它来代替 Windows 主题的哔声之一。

我建议您发布更多代码，以便我们查看导致哔声的原因，因为 PAUSE 不应该这样做。

# c++ - 普通 C 加载 C# dll

> ID：14655668
> 
> 赞同：1
> 
> 时间：2013-02-01T21:54:50.927
> 
> 标签：c++, c

我有一个第三方应用程序，它是一个 C# dll，我正在尝试从纯 C 代码调用它。我已经能够创建一个 C++ 可执行文件并使用我在[此处](http://support.microsoft.com/kb/828736)找到的信息调用一个 C# dll 。但我正在寻找一个普通的C，以前有人做过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:46:42.067

COM 在普通 C 中工作得很好。您的示例应该几乎完全一样，但是您必须使用 C 语法来调用与对象关联的函数。改变

```
pICalc->Add(5, 10, &lResult); 
```

到

```
pICalc->lpVtbl->Add(pICalc, 5, 10, &lResult); // no implicit this pointer, pass explicitly 
```

有关更多示例，请参阅[http://www.codeproject.com/Articles/13601/COM-in-plain-C#C](http://www.codeproject.com/Articles/13601/COM-in-plain-C#C)

# wordpress - WordPress WP_Query

> ID：14655671
> 
> 赞同：0
> 
> 时间：2013-02-01T21:55:05.280
> 
> 标签：wordpress

我在 Wordpress 中有我的轮播代码

```
<?php 
    $the_query = new WP_Query(array(
     'category_name' => 'home-slider', 
     'posts_per_page' => 5  
    )); 
    while ( $the_query->have_posts() ) : 
    $the_query->the_post();
?>
<div class="sl-slide">
 <?php the_post_thumbnail('large');?>
 <div class="sl-slide-inner">
 <?php the_title();?>
 <?php the_excerpt();?>
</div>
</div>
<?php 
endwhile; 
wp_reset_postdata();
?> 
```

我在轮播中显示 5 个帖子。我想要基本的 If-else 语句，我为每个页面创建静态变量。例如：。

```
if (post == 1) {
 $aka = 7;
} else if (post == 2) {
 $aka = 8;
} else if (post == 3) {
 $aka = 9;
} .. and etc. 
```

我不知道如何在 WP 中实现它，怎么说现在是哪个帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:44:36.443

当您在 WP_Query while-loop 中时，您可以通过具有标准 post 对象的 $post 变量访问当前帖子。只是不要忘记在循环之前有以下行：

```
<?php 
    global $post;
    $the_query = new WP_Query(array(
     'category_name' => 'home-slider', 
     'posts_per_page' => 5  
    )); 
    while ( $the_query->have_posts() ) : 
    $the_query->the_post();
?>
<div class="sl-slide">
<?php
if ($post->ID == 1) {
 $aka = 7;
} else if ($post->ID == 2) {
 $aka = 8;
} else if ($post->ID == 3) {
 $aka = 9;
}
?>
 <?php the_post_thumbnail('large');?>
 <div class="sl-slide-inner">
 <?php the_title();?>
 <?php the_excerpt();?>
</div>
</div>
<?php 
endwhile; 
wp_reset_postdata();
?> 
```

# iphone - 为什么 XCode 不允许我将对象拖放到视图上？

> ID：14655672
> 
> 赞同：0
> 
> 时间：2013-02-01T21:55:08.853
> 
> 标签：iphone, xcode, ipad

在视图控制器下使用我的视图时，为什么我不能将对象库中的对象拖放到我的视图上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:55:08.853

如果您的工作空间视图被缩小，XCode 将不允许您拖放。放大，它应该允许您从库中拖放对象。

# java - 可以从Java中该类的枚举中访问类方法吗？

> ID：14655675
> 
> 赞同：3
> 
> 时间：2013-02-01T21:55:12.583
> 
> 标签：java, enums

假设我有一个包含 Java 枚举的类。是否可以从包含枚举的类中访问方法？举个例子：

```
public class Foo {

   private string getClassVal() { return "42"; } 

   public string getOtherClassVal() { return "TheAnswer"; } 

   public enum Things {

         ONE("One"), 
         TWO("Two"), 
         THREE("Three"); 

         private String _val; 

         private Things(String val) { _val = val; } 

         // This method is the problem
         public String getSomeVal() {
             return _val + this.getClassVal(); 
         }

         // And this one doesn't work either
         public String getSomeOtherVal() {
             return _val + this.getOtherClassVal(); 
         }

} 
```

我知道上面带有注释的枚举方法不起作用并导致错误，因为其中的上下文`this`。我正在寻找的是可以从枚举中访问“外部”类方法的东西。或者这甚至是正确的方法？

这样的事情可能吗？或者枚举是否被锁定在外部方法中，即使在一个类中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T21:58:34.843

不。

因为`enum`s 总是`static`，因此没有封闭的实例。

显然他们可以访问`public static`封闭类的方法。

# audio - FLAC 音频格式是否有多种质量设置？

> ID：14655678
> 
> 赞同：0
> 
> 时间：2013-02-01T21:55:21.957
> 
> 标签：audio, encoding, flac

我正在编写一个编码软件并处理未压缩的 wav 和 flac 格式。我的问题是，flac 应该是一种无损格式，类似于 wav 但经过压缩。但是，某些软件（例如 JRiver 的媒体中心）提供了用于编码 flac 文件的“质量”设置。这是否意味着他们提供降低质量预编码或我错过了 flac 标准中的某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T10:01:12.940

FLAC 的质量参数是指压缩的质量，而不是音频。音频将保持无损，但您可以获得更高质量的更好压缩。然而，更高的质量将需要更多的时间来压缩。

请参阅文档[http://wiki.jriver.com/index.php/Encoding_Settings](http://wiki.jriver.com/index.php/Encoding_Settings)

> 免费无损音频编解码器 (FLAC)：FLAC 是一种流行的无损、免费可用的开源编码器。[2] 质量设置：0 - 8。设置压缩质量（而不是声音，它是无损的），8 表示最压缩/时间/努力。

# c++ - 有没有办法在不计算 CDF 的情况下从非标准分布生成随机变量？

> ID：14655681
> 
> 赞同：0
> 
> 时间：2013-02-01T21:55:38.447
> 
> 标签：c++, python, algorithm, random, montecarlo

我正在尝试编写蒙特卡罗模拟。在我的模拟中，我需要从离散概率分布中生成许多随机变量。

我确实有一个封闭形式的分布解决方案，它有有限的支持；但是，它不是标准分布。我知道我可以绘制一个统一的 [0,1) 随机变量并将其与 CDF 进行比较，从我的分布中得到一个随机变量，但分布中的参数总是在变化。使用这种方法太慢了。

所以我想我的问题有两个部分：

1.  是否有一种方法/算法可以在不使用 CDF 的情况下快速生成有限的离散随机变量？

2.  是否有已经具有此功能的 Python 模块和/或 C++ 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:38:28.180

如果您通过分析了解您的pdf，确实接受/拒绝是要走的路。我们称它为 f(x)。找到一个 pdf g(x) 使得存在一个常数 c，这样 cg(x) > f(x)，并且你知道如何用 pdf g(x) 模拟一个变量 - 例如，当你工作时对于具有有限支持的分布，统一将做：g（x）= 1 /（您的域的大小）在域上。

然后画一对 (G, U) 使得 G 用 pdf g(x) 模拟，并且 U 在 [0, cg(G)] 上是均匀的。然后，如果 U < f(G)，接受 U 作为变量。否则重画。您最终将接受的 U 将具有 f 作为 pdf 格式。

请注意，常数 c 决定了该方法的效率。c 越小，你的效率就越高——基本上你需要平均 c 图纸来获得正确的变量。最好让函数 g 足够简单（不要忘记您需要使用 g 作为 pdf 来绘制变量），但将尽可能小的 c.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:08:44.863

Acceptance\Rejection：找到一个总是高于 pdf 的函数。生成 2 个随机变量。第一个缩放以计算值，第二个用于决定是接受还是拒绝选择。冲洗并重复，直到您接受一个值。抱歉，我不能更具体，但我已经有一段时间没有这样做了。它是一个标准算法，但我会亲自从头开始实现它，所以我不知道有任何实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T09:08:27.310

如果接受拒绝也太低效，您也可以尝试一些马尔可夫链 MC 方法，它们会生成一系列样本，每个样本都依赖于前一个样本，因此通过跳过其中的块，可以对子样本进行子采样，从而获得或多或少独立的集合。他们只需要 PDF，甚至只需要 PDF 的倍数。通常它们使用固定分布，但也可以适应缓慢变化的分布。

# java - 仍然是一个问题？- java.util.zip.ZipException：找不到中央目录条目

> ID：14655689
> 
> 赞同：1
> 
> 时间：2013-02-01T21:56:19.770
> 
> 标签：java, android, encoding, archive

作为免责声明，我已经看过[这篇](https://stackoverflow.com/questions/4408841/central-directory-entry-not-found-zipexception)文章以及链接到它的文章。

我有一个托管在服务器上的文件，该文件是 n 个存档文件，我正在尝试使用[此](https://stackoverflow.com/questions/5028421/android-unzip-a-folder)方法将其取消存档。当文件预先下载到设备上并且我在我的应用程序中打开并取消归档它时，通过`intent-filter`from `Downloads`，没有任何问题。但是，当我从我的应用程序中的服务器下载它，然后尝试解压缩它时，我在这一行的标题中得到错误：

```
ZipFile zipfile = new ZipFile(archive); 
```

指向我下载的存档文件的`archive`位置在哪里。`File`我用来下载存档的代码如下：

```
 String urlPath = parameters[0], localPath = parameters[1];

    try
    {
        URL url = new URL(urlPath);
        URLConnection connection = url.openConnection();
        connection.addRequestProperty("Accept-Encoding", "gzip");
        connection.connect();

        int fileLength = connection.getContentLength();

        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new BufferedOutputStream(new FileOutputStream(localPath));

        byte data[] = new byte[1024];
        long total = 0;
        int count;

        while((count = input.read(data)) != -1)
        {
            total += count;
            publishProgress((int)total * 100 / fileLength);
            output.write(data);
        }

        output.flush();
        output.close();
        input.close(); 
```

我最近根据我在顶部引用的帖子添加了编码类型，但我仍然遇到同样的错误。任何帮助都会很棒。

只是为了澄清：

*   我有一个存档文件
*   当文件从外部下载并在我的应用程序中打开/取消归档时，它可以很好地取消归档
*   当*我*下载存档然后尝试取消存档时，我收到错误`java.util.zip.ZipException: Central Directory Entry not found`

我最好的猜测是这是我下载的问题。但是，话虽如此，我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:33:25.327

您没有正确复制下载。你必须使用

```
output.write(data, 0, count); 
```

否则，您正在将任意垃圾写入文件。

# jpa - 使用 JPA 的 Groovy Mixin 持久属性

> ID：14655690
> 
> 赞同：1
> 
> 时间：2013-02-01T21:56:34.930
> 
> 标签：jpa, groovy, mixins

我想在 Groovy Mixin 中定义一个 JPA 持久属性，然后在几个实体类中使用它。我无法让它与 JPA 注释和 Hibernate 一起使用 - 有人成功地使用了这种组合吗？

我有一个示例 Maven 项目，它显示了我正在尝试做的事情，以及一个定义我想要的行为的 JUnit 测试。

[https://github.com/gilday/groovy-mixin-jpa-test](https://github.com/gilday/groovy-mixin-jpa-test)

简要地：

```
@Category(Person) class HasPreferences {

    @ElementCollection
    final Collection<Preference> preferences = []
}

@Entity
@Mixin(HasPreferences)
class Person {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    long id

    String name
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:58:11.720

由于`@Mixin`是动态的，我怀疑 JPA 能否找到您的混合属性。我认为您需要一些编译时代码生成，例如`@Delegate`. 即便如此，JPA 仍会尝试持久化生成的属性。[groovy 邮件列表中](http://groovy.329449.n5.nabble.com/Some-Mixin-woes-td5712770.html)有一个关于创建`@Trait`注释的讨论，这可能是您想要的。

# javascript - 如何在 jquery flexslider 完成加载之前隐藏图像

> ID：14655692
> 
> 赞同：10
> 
> 时间：2013-02-01T21:56:36.850
> 
> 标签：javascript, jquery, flexslider, woothemes

我试图在我的网站上集成 wootheme 的 Flexslider，它看起来/工作得很好，除了它在加载时。

当您使用滑块刷新页面时，在 flexslider 加载之前（大约 1 秒），第一张幻灯片看起来非常大并闪烁为黑色，然后消失，然后出现轮播。

我认为图像加载速度比 jquery 快？如何在 jquery 加载时隐藏图像（就像在演示网站上一样，即使我刷新 30 亿次，问题也不会在他们的网站上重复出现，一切都可以正常加载！-http: [//flexslider.woothemes.com/carousel -min-max.html](http://flexslider.woothemes.com/carousel-min-max.html) )

我在 jquery 之后立即加载了 flexlisder.js 并从演示中复制了相同的 html 代码（以匹配也加载的 .css 文件。这是我正在使用的初始化代码 - 也来自演示站点：

```
$(document).ready(function() {

  $('.flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    itemWidth: 210,
    itemMargin: 5,
    minItems: 2,
    maxItems: 4
  });
}); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T22:04:16.753

您需要处理正在使用的插件的**回调函数**，通过使用一个类来隐藏 CSS 中的所有图像让我们说`flexImages`

```
$(document).ready(function() {

  $('.flexslider').flexslider({
    animation: "slide",
    animationLoop: false,
    itemWidth: 210,
    itemMargin: 5,
    minItems: 2,
    maxItems: 4, 
    start: function(){
         $('.flexImages').show(); 
    },
  });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T22:01:29.230

将“显示”的默认样式设置为“无”。使用 show() 将更改此样式值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T18:01:54.620

还发现幻灯片在加载之前会闪烁，并显示与列表项项目符号一起堆叠在页面下方。

只是一秒钟。然后它工作得很好。我没有意识到我没有包含 flexslider.css 文件，因为我已经关闭了任何会显示损坏的导航 img 链接的导航。

记得包含 CSS！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-21T17:03:18.380

...我遇到了同样的问题，尝试了上面的 js 解决方案 - 它运行良好，但后来我意识到当 js 由于某种原因被禁用时 - 什么都不会显示，所以我决定寻找一个非 js 解决方案：

我只是为特定的滑块放了一些类似的东西：

```
.MySlider {
  .flexslider .slides img { 
  max-height: 400px; 
  width: 940px;
 }
} 
```

工作得很好，甚至反应灵敏。希望这可能会有所帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T16:42:01.440

我只是在包含滑块的 div 的 CSS 中设置： overflow:hidden ；高度：您使用的图像的高度，那么它就完美了！

更新：这不是响应式解决方案，因为滑块会改变大小......我该怎么办？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-29T15:12:47.167

当我忘记包含 flexslider.css 时，我遇到了类似的问题

# c# - 意外的子类型：MyNamespace.MyInheritedClass

> ID：14655695
> 
> 赞同：2
> 
> 时间：2013-02-01T21:56:57.173
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

`Unexpected sub-type: UnnamedGameServer.TrapInstance`在 protobuf-net 中序列化时出现异常。

这是代码：

```
class test
{
    void testMethod(PacketNewTrapResponse packet)
    {
        using (var stream = new MemoryStream())
        {
            Serializer.SerializeWithLengthPrefix<PacketNewTrapResponse>(stream, (PacketNewTrapResponse)packet, PrefixStyle.Base128);
        }
    }
}

[ProtoContract]
public class MapTrap
{
    [ProtoMember(1)]
    public IntegerVector2 Position;
    [ProtoMember(2)]
    public int TrapServerID;
    [ProtoMember(3)]
    public int LocationID;
}

[ProtoContract, ProtoInclude(1, typeof(MapTrap))]
class TrapInstance : MapTrap
{
    public TrapInstance(TrapProperties trap, SessionCharacter session, int serverTrapId, int locationId, IntegerVector2 position)
    {
        TrapServerID = serverTrapId;
        Trap = trap;
        Position = position;
        LocationID = locationId;
        OwnerOfTrap = session;
        LocationID = locationId;
        Position = position;
    }

    public SessionCharacter OwnerOfTrap { get; set; }
    public TrapProperties Trap { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:02:05.917

基类需要被告知子类，而不是相反。从子类中查找基类是*微不足道*的，因为它在运行时很容易获得。

```
[ProtoContract, ProtoInclude(5, typeof(TrapInstance))]
public class MapTrap {...}

[ProtoContract]
class TrapInstance : MapTrap {...} 
```

# nginx - 关于存储桶名称的limit_req_zone

> ID：14655696
> 
> 赞同：0
> 
> 时间：2013-02-01T21:56:57.087
> 
> 标签：nginx

如果我要使用

```
limit_req_zone  $http_api_key  zone=one:10m   rate=1r/s; 
```

如果我没有 api-key 标头会*怎样*？那会是一个集体的空桶，还是不会将自己应用于limit_req_zone？或者我需要一个邪恶的 IF 来检查 $http_api_key 是否存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:53:58.063

对于那些想知道的人，希望这对未来的人有所帮助，我通过源代码找到了答案：

[https://github.com/git-mirror/nginx/blob/a3035758763a75f3df7d529c897528eb65c84c09/src/http/modules/ngx_http_limit_req_module.c#L194](https://github.com/git-mirror/nginx/blob/a3035758763a75f3df7d529c897528eb65c84c09/src/http/modules/ngx_http_limit_req_module.c#L194)

```
 if (vv == NULL || vv->not_found) {
        continue;
    } 
```

vv 是存储桶的值。nginx 将简单地忽略并继续这对我的需求来说是理想的。

# jquery - Rails 和 jQuery

> ID：14655702
> 
> 赞同：0
> 
> 时间：2013-02-01T21:57:57.993
> 
> 标签：jquery, ruby-on-rails

这是我的选择框导轨代码：

```
<%= collection_select(:dimension_version, :dimension_id, Dimension.all, :id, :title) %> 
```

产生：

```
<select id="dimension_version_dimension_id" name="dimension_version[dimension_id]"> 
```

我的 assets/javascripts 文件夹中有 jQuery 1.8.1，我肯定会在我的 application.js*之前调用它。*

这是 application.js 中的内容，但它不起作用：

```
$(document).ready(function() {
$("#dimension_version_dimension_id").change(function() {
    $("#dave").html('Hello');
  });
}); 
```

但是，如果那里没有中介，它会起作用`select.change`：

```
$(document).ready(function() {
    $("#dave").html('Hello');
}); 
```

那么为什么第一个不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:10:55.650

```
$(document).ready(function() {
    $("#dimension_version_dimension_id").bind('change', function()){
        $("#dave").html('Hello');
    }
}); 
```

# jquery - 将选择限制为特定的 div

> ID：14655705
> 
> 赞同：0
> 
> 时间：2013-02-01T21:58:22.050
> 
> 标签：jquery

我有一张桌子，我想找到一个特定的行并将其移到最后。我用这段代码做到这一点：

```
var failLegend = $(".jqplot-table-legend tbody tr").filter(function() {
    return $(this).text() == "GA Fails";
}).closest("tr");

failLegend.insertAfter($(".jqplot-table-legend tbody tr:last")); 
```

只要我只有一张桌子，它就可以正常工作。但是我有多个表都具有相同的类，我最终得到所有表中的所有“GA Fails”行和最后一个表的末尾（而不是每个表上的一个）。每个表都在自己的 div 中，我可以从 $chart 变量中获取 div 名称：

```
$chart
[
<div id=​"chart_0" style=​"width:​ 95%;​ height:​ 450px;​ position:​ relative;​ " class=​"jqplot-target">​…​&lt;/div>​ 
```

但我不知道如何在我的代码中使用它，所以当我找到并移动行时，它只适用于 $chart 中的特定 div。

这是 $chart 的完整值：

```
$chart
[
<div id=​"chart_0" style=​"width:​ 95%;​ height:​ 450px;​ position:​ relative;​ " class=​"jqplot-target">​
<canvas width=​"1300" height=​"450" style=​"position:​ absolute;​ left:​ 0px;​ top:​ 0px;​ " class=​"jqplot-base-canvas">​
<div class=​"jqplot-title" style=​"height:​ 0px;​ width:​ 0px;​ ">​&lt;/div>​
<div class=​"jqplot-axis jqplot-xaxis" style=​"position:​ absolute;​ width:​ 1300px;​ height:​ 66px;​ left:​ 0px;​ bottom:​ 0px;​ ">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 22.5px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"66" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 49.77777777777778px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 77.05555555555556px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 104.33333333333333px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 131.61111111111111px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 158.88888888888889px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 186.16666666666666px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 213.44444444444446px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 240.72222222222223px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 268px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 295.27777777777777px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 322.55555555555554px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 349.8333333333333px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 377.1111111111111px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 404.3888888888889px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 431.6666666666667px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 458.94444444444446px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"66" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 486.22222222222223px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 513.5px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 540.7777777777778px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"66" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 568.0555555555555px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 595.3333333333334px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 622.6111111111111px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 649.8888888888889px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 677.1666666666666px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 704.4444444444445px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 731.7222222222222px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 759px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 786.2777777777778px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 813.5555555555555px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 840.8333333333334px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 868.1111111111111px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"66" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 895.3888888888889px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 922.6666666666666px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 949.9444444444445px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 977.2222222222222px;​ " class=​"jqplot-xaxis-tick">​
<canvas width=​"15" height=​"4" style=​"text-align:​ left;​ position:​ absolute;​ left:​ 1004.5px;​ " class=​"jqplot-xaxis-tick">​
</div>​
<div class=​"jqplot-axis jqplot-yaxis" style=​"position:​ absolute;​ height:​ 450px;​ width:​ 19px;​ left:​ 0px;​ top:​ 0px;​ ">​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 366.5px;​ ">​-0.3​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 306px;​ ">​-0.2​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 245.5px;​ ">​-0.1​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 185px;​ ">​-0.0​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 124.5px;​ ">​0.1​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 64px;​ ">​0.2​&lt;/div>​
<div class=​"jqplot-yaxis-tick" style=​"position:​ absolute;​ top:​ 3.5px;​ ">​0.3​&lt;/div>​
</div>​
<div class=​"jqplot-axis jqplot-y2axis" style=​"position:​ absolute;​ height:​ 450px;​ width:​ 11px;​ right:​ 257px;​ top:​ 0px;​ ">​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 366.5px;​ ">​0​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 330.2px;​ ">​1​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 293.9px;​ ">​2​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 257.6px;​ ">​3​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 221.3px;​ ">​4​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 185px;​ ">​5​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 148.7px;​ ">​6​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 112.4px;​ ">​7​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 76.10000000000002px;​ ">​8​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 39.80000000000001px;​ ">​9​&lt;/div>​
<div class=​"jqplot-y2axis-tick" style=​"position:​ absolute;​ top:​ 3.5px;​ ">​10​&lt;/div>​
</div>​
<canvas width=​"1300" height=​"450" class=​"jqplot-grid-canvas" style=​"position:​ absolute;​ left:​ 0px;​ top:​ 0px;​ ">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-shadowCanvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-shadowCanvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-shadowCanvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-shadowCanvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-series-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-highlight-canvas">​
<div class=​"jqplot-highlighter-tooltip" style=​"position:​ absolute;​ display:​ none;​ ">​&lt;/div>​
<div class=​"jqplot-cursor-tooltip" style=​"position:​ absolute;​ display:​ none;​ ">​&lt;/div>​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-zoom-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-lineRenderer-highlight-canvas">​
<canvas width=​"982" height=​"363" style=​"position:​ absolute;​ left:​ 30px;​ top:​ 10px;​ " class=​"jqplot-event-canvas">​
<table class=​"jqplot-table-legend" style=​"position:​ absolute;​ margin-top:​ 0px;​ z-index:​ 3;​ right:​ 0px;​ top:​ 10px;​ ">​
<tbody>​
<tr class=​"jqplot-table-legend">​
<td class=​"jqplot-table-legend jqplot-table-legend-swatch jqplot-seriesToggle" style=​"text-align:​ center;​ padding-top:​ 0px;​ ">​
<div class=​"jqplot-table-legend-swatch-outline">​
<div class=​"jqplot-table-legend-swatch" style=​"background-color:​ rgb(33, 56, 148)​;​ border-color:​ rgb(33, 56, 148)​;​ ">​&lt;/div>​
</div>​
</td>​
<td class=​"jqplot-table-legend jqplot-table-legend-label jqplot-seriesToggle" style=​"padding-top:​ 0px;​ ">​NOVA_NAV_500_10pt_MCD_VL​&lt;/td>​
</tr>​
<tr class=​"jqplot-table-legend">​
<td class=​"jqplot-table-legend jqplot-table-legend-swatch jqplot-seriesToggle" style=​"text-align:​ center;​ padding-top:​ 0.5em;​ ">​
<div class=​"jqplot-table-legend-swatch-outline">​
<div class=​"jqplot-table-legend-swatch" style=​"background-color:​ rgb(0, 0, 0)​;​ border-color:​ rgb(0, 0, 0)​;​ ">​&lt;/div>​
</div>​
</td>​
<td class=​"jqplot-table-legend jqplot-table-legend-label jqplot-seriesToggle" style=​"padding-top:​ 0.5em;​ ">​GA Fails​&lt;/td>​
</tr>​
<tr class=​"jqplot-table-legend">​
<td class=​"jqplot-table-legend jqplot-table-legend-swatch jqplot-seriesToggle" style=​"text-align:​ center;​ padding-top:​ 0.5em;​ ">​
<div class=​"jqplot-table-legend-swatch-outline">​
<div class=​"jqplot-table-legend-swatch" style=​"background-color:​ rgb(255, 154, 0)​;​ border-color:​ rgb(255, 154, 0)​;​ ">​&lt;/div>​
</div>​
</td>​
<td class=​"jqplot-table-legend jqplot-table-legend-label jqplot-seriesToggle" style=​"padding-top:​ 0.5em;​ ">​NOVA_NAV_500_10pt_MCD_VL_FS_test​&lt;/td>​
</tr>​
<tr class=​"jqplot-table-legend">​
<td class=​"jqplot-table-legend jqplot-table-legend-swatch jqplot-seriesToggle" style=​"text-align:​ center;​ padding-top:​ 0.5em;​ ">​
<div class=​"jqplot-table-legend-swatch-outline">​
<div class=​"jqplot-table-legend-swatch" style=​"background-color:​ rgb(255, 0, 0)​;​ border-color:​ rgb(255, 0, 0)​;​ ">​&lt;/div>​
</div>​
</td>​
<td class=​"jqplot-table-legend jqplot-table-legend-label jqplot-seriesToggle" style=​"padding-top:​ 0.5em;​ ">​NA Count​&lt;/td>​
</tr>​
</tbody>​
</table>​
</div>​
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:05:53.730

得到 div，然后得到它的孩子，然后找到你正在寻找的元素。这应该这样做（未经测试）：

```
$('#$chart').children().find(".jqplot-table-legend tbody tr").filter(function() {
    return $(this).text() == "GA Fails";
}).closest("tr"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:12:31.263

尝试设置上下文：

```
var failLegend = $(".jqplot-table-legend tbody tr", $chart).filter(function() {
    return $(this).text() == "GA Fails";
}).closest("tr");

failLegend.insertAfter($("#chart_0 .jqplot-table-legend tbody tr:last")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:22:44.330

像这样的东西？

```
$(".jqplot-table-legend").each(function(){

    var rows = $(this).find("tbody  tr");
    var failLegend = rows.filter(function() {
      return $(this).text().trim() == "GA Fails";
    });

    failLegend.insertAfter(rows.last());
}) 
```

**示例：** [http ://codepen.io/ByScripts/pen/BEfmg](http://codepen.io/ByScripts/pen/BEfmg)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T22:37:55.190

假设你有你在你的div中使用的chart_id作为id（chart_id = chart_0 for first div and chart_1 for second div）

只需更换

> var failLegend = $(".jqplot-table-legend tbody tr").filter(function() { return $(this).text() == "GA 失败"; }).closest("tr");
> 
> `failLegend.insertAfter($(".jqplot-table-legend tbody tr:last"));`

和

> var failLegend = $("#" + chart_id + ".jqplot-table-legend tbody tr").filter(function() { return $(this).text() == "GA Fails"; }).closest( "tr");
> 
> failLegend.each(function() {
> $(this).insertAfter($(this).parent().find("tr:last")) });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:34:18.517

我在[http://forum.jquery.com/](http://forum.jquery.com/)上得到了一个完美的答案：

```
var rows = $('.jqplot-table-legend tbody tr', $chart);
rows.filter(function() {
      return $(this).text() == 'GA Fails';
}).closest('tr').insertAfter(rows.last()); 
```

感谢大家尝试提供帮助。

# extjs - Sencha Touch - 无法生成第一个应用程序

> ID：14655707
> 
> 赞同：5
> 
> 时间：2013-02-01T21:58:29.693
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-architect

我刚刚下载了 Sencha Touch 2.1.0 和 Sencha CMD v.3.0.2.288。我将 Sencha Touch SDK 提取到 MAMP 的 htdocs 文件夹中。当我尝试按照入门指南进行操作时，

```
sencha app create MyApp ../MyApp 
```

给出错误

```
Sencha Cmd v3.0.2.288
[ERR]       No such property : 'create' 
```

我猜这个`create`参数在这个版本的 Sencha Cmd 中不可用。我试过了

```
sencha app build MyApp ../MyApp 
```

我得到错误

```
Sencha Cmd v3.0.2.288
[ERR]       'MyApp' not in valid range: [native, package, testing, production]
[ERR]       Illegal value : MyApp 
```

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T22:36:36.477

要生成新应用程序，您需要：

`cd path/to/sencha-touch-2.1/directory`然后运行：

`sencha generate app MyApp path/to/MyApp`

然后构建您的应用程序：

`cd path/to/MyApp`并运行：

`sencha app build native`

# .net - 如何删除路线的 /api 部分？

> ID：14655709
> 
> 赞同：1
> 
> 时间：2013-02-01T21:58:39.650
> 
> 标签：.net, web-services, asp.net-mvc-4

我们目前正在尝试在不破坏任何现有端点的情况下将我们的 Web 服务升级到 MVC4/Web Api，但我们对路由功能还很陌生。在实际路由开始之前，它似乎会自动期望您通过将 /api 添加到 url 来开始请求：

目前，我们的路线是“{controller}/{action}/{id}”。请注意，它没有以 api/ 为前缀，而是请求：

```
http://host:port/MyController/MyAction 
```

我们仍然必须要求：

```
http://host:port/api/MyController/MyAction 
```

但这会有效地破坏我们的端点。如何从路由中删除 /api？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:22:34.173

好的，我回答这个问题只是因为有人 +1 了，所以我想这对某人有用。我找错地方了。路由是在 RouteConfig.cs 中设置的，但需要在 WebApiConfig.cs 中进行更改。在那个文件中，前面有“api/”。所以我删除了它，一切都很好。

# ios - iOS 高效地从 Documents Dir 中解析大型 JSON

> ID：14655714
> 
> 赞同：0
> 
> 时间：2013-02-01T21:59:03.237
> 
> 标签：ios, json, ipad, memory-management, nsjsonserialization

当我加载我的应用程序时，我下载了大约 10-15 个 JSON 文件并将它们存储到我的应用程序文档目录中——有些从几 KB 到 30MB 不等。

完成后，我需要从文档目录中获取它们中的每一个，转换为 NSDictionary，然后解析为 NSManagedObjects。

但是，当我使用下面的代码执行此操作时，当它通过每个 JSON 时，它似乎将它们保留在内存中，直到应用程序最终崩溃。Instruments 在“泄漏”工具中没有显示任何内容，但我的应用程序在内存中保留了大量内容。

下面是获取 JSON 文件的代码：

**更新**

```
- (void)parseDownloadedFiles
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];
    docDir = [docDir stringByAppendingString:@"/jsons"];
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;   
    NSArray *files = [fileManager contentsOfDirectoryAtPath:docDir error:&error];
    if (files == nil) {
        // error...
    }

for (NSString *file in files) 
{

    NSString *fileName = [NSString stringWithFormat:@"%@/jsons/%@",
                          docDir, file];
    NSString *content = [[NSString alloc] initWithContentsOfFile:fileName
                                                    usedEncoding:nil
                                                           error:nil];

    NSDictionary *JSON =
    [NSJSONSerialization JSONObjectWithData: [content dataUsingEncoding:NSUTF8StringEncoding]
                                    options: NSJSONReadingMutableContainers
                                      error: &error];

       ...create my NSManagedObjects & store

       JSON = nil;
    }  
} 
```

--

下面看看我的分配： ![在此处输入图像描述](../Images/a1cf8302c830df827db13158e8fb0991.png)

--

深入了解第一个 Malloc 44.79 带来的问题向我展示了这些问题：

![在此处输入图像描述](../Images/b38a67681db199571894e41f9274c3c7.png)

-- 这是在上面代码的for循环中

## ![在此处输入图像描述](../Images/87a29b6968f62ad97a24493c4b497eda.png)

NSLog 真的会导致这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:12:28.360

是的，您的 getContentFromFile... 方法正在返回一个保留的字符串。而且你永远不会在接收端释放它。

您需要在返回时自动释放字符串，或者在将其解析为 JSON 后显式释放。

（我认为 Analyzer 会发现这一点。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T00:16:42.857

您应该将 @autoreleasepool {} 放在读取文件的那个循环中。在方法返回之前，对象不会被释放，因此内存将在循环内累积。

ARC 将通过自动释放对象来帮助您，但您需要它们更快地释放。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

# java - 我无法接收位置

> ID：14655716
> 
> 赞同：0
> 
> 时间：2013-02-01T21:59:32.067
> 
> 标签：java, android, location

我正在构建一个基于位置的应用程序，一切都很好，直到有一天我停止接收位置......我不知道为什么。我将附上重要的代码：

```
private LocationManager mLocationManager;
public void onCreate() 
{
    super.onCreate();
    ...
    // Get a reference to the LocationManager object.
    mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    ...
    setup();
}
private void setup() 
{
    mLocationManager.removeUpdates(listener);

    // Request updates from just the providers.
    if (mLocationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) 
        mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, ONE_MINUTE, 0, listener);

    if (mLocationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) 
        mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, ONE_MINUTE, 0, listener);
}

    @Override
    public void onLocationChanged(Location location) 
    {
        handleLocation(location);
    } 
```

我在 onLocationChanged 上放了一个断点，但什么也没发生。我在我的应用程序的其他行上对其进行了测试，以确保调试配置正在运行并且正在运行。看起来我只是没有收到任何位置。

也许我什么都没看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:53:07.763

I've good code to receive location :

```
public class Locato extends Activity implements LocationListener { 
  LocationManager locman; 
  @Override 
  public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.idlayout); 
    locman = (LocatonManager) getSystemService(Context.LOCATION_SERVICE); 
  } 

  public void onStatusChanged(String pr, int s, Bundle a) {
  } 

  @Override public void onProviderDisabled(String provider)
  { 
    Log.d("MyApp", "Provider disabled : " + provider); 
  }
  @Override public void onProviderEnabled(String provider) {
    Log.d("MyApp", "Provider enabled : " + provider);
  } 
  @Override public void onLocationChanged(Location location) { 
// do something 
  }
} 
```

Try to use this. Don't forget add ACCESS_FINE_LOCATION permission in manifest.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T21:47:54.673

相同的代码现在生成位置，当我说它可能是因为它是多云但现在当云消失时它正在工作时，这是一个笑话。我想不出其他任何事情，只是想澄清一下当时非常多云，甚至可能是一场小风暴。

# shell - 从文本文件列表中提取

> ID：14655717
> 
> 赞同：9
> 
> 时间：2013-02-01T21:59:34.390
> 
> 标签：shell, grep

我知道我可以找到特定类型的文件，然后一口气将它们 grep，即

```
find . -type f -name "*.log" -exec grep -o "some-pattern" {} \; 
```

但我需要分两步完成。这是因为查找操作很昂贵（有很多文件和子目录要搜索）。我想将文件列表保存到一个文本文件中，然后在需要时重复 grep 在这组预先计算的文件上寻找不同的模式。第一部分很简单：

```
find . -type f -name "*.log" > my-file-list.txt 
```

现在我有一个看起来像这样的文件：

```
./logs/log1.log
./logs/log2.log
etc 
```

grep 是什么样的？我尝试了一些组合，但无法正确使用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T22:02:11.813

`xargs grep "your pattern" < my-file-list.txt`

# c# - Webgrid 列 HTML.ActionLinks

> ID：14655720
> 
> 赞同：0
> 
> 时间：2013-02-01T21:59:47.197
> 
> 标签：c#, asp.net-mvc-3, webgrid

这是我的网络网格：

```
{
    var grid = new WebGrid(Model, rowsPerPage: 15, ajaxUpdateContainerId: "PListGrid");
    @grid.GetHtml(
        tableStyle: "webgrid",
        headerStyle: "webgrid-header-a",
        footerStyle: "webgrid-footer",
        alternatingRowStyle: "webgrid-alternating-row",
        selectedRowStyle: "webgrid-selected-row",
        rowStyle: "webgrid-row-style",
        columns: 
            grid.Columns(
                grid.Column("ITEMNMBR", "Part #", canSort: true, 
                   format: (item) => Html.ActionLink(((string)item.ITEMNMBR),
                   "PCreate", "PartsLabor", new { ITEMNMBR = @item.ITEMNMBR }, null)),
                grid.Column("ITEMDESC", "Part Description", canSort: true)
                        ))
 } 
```

当视图加载时，您将鼠标悬停在 ITEMNMBR/Part # 列的链接上，您会看到类似于以下内容的内容：

domain.com/PartsLabor/PCreate?ITEMNMBR=ABCDEFG

我还有一个 viewbag 项目 (CALLNBR)。 **如何让操作链接解析为：**

domain.com/PartsLabor/PCreate?ITEMNMBR=ABCDEFG&CALLNBR=123456

换句话说，如何将多个参数传递给 Html.ActionLink？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:04:06.823

像这样：

```
@Html.ActionLink("Link Text", "ActionName", "ControllerName", new {param = value, param2 = value2}, null) 
```

只需将模型属性插入适当的位置，并注意参数名称必须与 Action 方法签名中的参数名称完全匹配。哦，不要错过最后的 null，你需要它！

# ios - MPMoviePlayerController 不播放 .wmv

> ID：14655722
> 
> 赞同：2
> 
> 时间：2013-02-01T21:59:47.557
> 
> 标签：ios, objective-c, ipad, ios5

我以非常标准的方式使用 MPMoviePlayerController。

```
MPMoviePlayerController *player = [self.movieController moviePlayer];        
player.shouldAutoplay = YES;
player.scalingMode = MPMovieControlModeVolumeOnly;
player.controlStyle = MPMovieControlStyleDefault;
[player play] 
```

我正在播放视频，它可以工作。但是，我无法播放 wmv 视频。它一直在说“正在加载”。该视频在我的 OSX 上运行良好。

是否支持 wmv 格式？这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:39:53.333

iOS 仅支持以下视频容器：

*   .mov
*   .m4v
*   .mp4
*   .3gp

所以无法播放 .wmv 文件。如果他们可以的话，我会感到惊讶，因为这是微软的发明。

更多信息请访问[http://developer.apple.com/library/ios/ipad/#documentation/miscellaneous/conceptual/iphoneostechoverview/MediaLayer/MediaLayer.html](http://developer.apple.com/library/ios/ipad/#documentation/miscellaneous/conceptual/iphoneostechoverview/MediaLayer/MediaLayer.html)

# python - 在 python 中构建解析器

> ID：14655723
> 
> 赞同：-5
> 
> 时间：2013-02-01T21:59:59.317
> 
> 标签：python

我正在尝试在python中制作一个解析器，它可以实现两种类型的功能

```
s1 = foo()
s2 = {'k1':v1,'k2':v2}
s3 = [v1,v2,v3...] 
```

我说两种类型……第一种类型通常是对象，第二种类型有点像变量。现在第一个很容易..

```
def parse_string_to_command(string):
     if "foo" in string:
         #handle this.
     elif # handle s2 
     elif #condition to handle s3 
```

编辑 1：我想我没有明确说明我想要达到的目标。

我要做的就是：

从该函数传递的所有内容都是字符串..有些是方法..而另一些是变量。我只是想相应地处理它们。

基本上这就是用户将要做的事情

```
 > params = {"input":"foobar"}
 > foo = Foo(params) 
```

现在，要处理 Foo 方法.. 我这样做：

```
 if "Foo" in string:
      tokens = string.split("=")
      # I have tokens [foo,Foo(params)]

   But params is a string now..whereas it is needed to be a dictionary. 
```

现在我知道我可以在这里处理它..在 Foo 方法中.. 但总的来说我想在 parse_string_to_command 函数中处理这些变量分配

有没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:56:38.390

您可能想研究使用 pythons [JSON](http://docs.python.org/2/library/json.html)解析器来实现您的目标。

```
>>> import json
>>> a = json.loads('["foo", {"bar": ["baz", null, 1.0, 2]}]')
>>> a
[u'foo', {u'bar': [u'baz', None, 1.0, 2]}]
>>> a[0]
u'foo'
>>> a[1]
{u'bar': [u'baz', None, 1.0, 2]}
>>> a[1]['bar']
[u'baz', None, 1.0, 2]
>>>>>> a[1]['bar'][0]
u'baz' 
```

或者，如果您需要完全自定义...而不打算为您编写完整的解析器，我想使用一些正则表达式将有助于使您的工作更轻松。

```
>>> import re
>>> s1 = "foo()"
>>> s2 = "{'k1':v1,'k2':v2}"
>>> s3 = "[v1,v2,v3]"
>>> re.match('(.*?)\(\)',s1).group(1)
'foo'
>>> re.findall('\{*(.*?):(.*?)[,\}$]+',s2)
[("'k1'", 'v1'), ("'k2'", 'v2')]
>>> re.findall('\[*(.*?)[,\]$]+',s3)
['v1', 'v2', 'v3'] 
```

仅识别 3 种类型的输入字符串：

```
def parse_string_to_command(s):
    if re.match('(.*?\(\))',s):
        print "This is a function"
    elif re.match('^\{.*\}$',s):
        print "This is kind of like variables 1"
    elif re.match('^\[.*\]$',s):
        print "This is kind of like variables 2" 
```

# spring - sts中的spring servlet上下文

> ID：14655727
> 
> 赞同：2
> 
> 时间：2013-02-01T22:00:11.787
> 
> 标签：spring, spring-mvc

在 Eclipse 中使用 STS 创建一个 mvc 项目我注意到 servlet-context.xml 似乎被编写为在根上下文和 dispatcherservlet 上下文中使用。我这样说是因为我注意到里面有 context:component-scan，它通常被加载到根上下文中，但它被加载到了 dispatcherservlet 上下文中。我还注意到一个示例 spring mvc/jpa 项目 - [http://duckranger.com/2012/04/spring-mvc-3-x-with-sts-tutorial-part-iii-add-some-jpa/](http://duckranger.com/2012/04/spring-mvc-3-x-with-sts-tutorial-part-iii-add-some-jpa/) - 特别是将 servlet-context.xml 加载到两个上下文中。我认为这个想法是在上下文之间保持清晰的分离。谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T06:52:41.493

下面的配置是完全错误的

```
 <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            classpath:META-INF\root-context.xml
            classpath:META-INF\servlet-context.xml
            classpath:META-INF\datasource.xml
        </param-value>
    </context-param>

    <!-- Processes application requests -->
    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>classpath:META-INF\servlet-context.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet> 
```

*   您的根上下文和 servlet 上下文不应该导入相同的文件，因为Spring中的[上下文层次结构，根上下文中的 bean 已经在 servlet 上下文中可用。](https://stackoverflow.com/a/11709272/241986)在不同的上下文中创建它们的副本是没有意义的（特别是因为根上下文中的 bean 将被 servlet 上下文中的那些遮蔽，例如，如果您`<tx:annotation-driven>`仅在根上下文中声明它不会影响servlet 上下文 bean，这将迫使您更加纠结配置）。
*   放入 servlet 上下文是非常不合逻辑`<jpa:repositories>`的，因为您很可能会使用服务层的存储库。
*   通常，您不应将 MVC 配置以外的任何内容放入 servlet 上下文。它是服务应该存在的根 Web 应用程序上下文。Servlet 上下文提供了控制器与服务的分离，因此当您使用 Spring Test Context 框架测试您的服务时，您不必创建控制器（如果您想测试映射，您应该使用[Spring MVC 测试框架](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework)）并测试直接应用服务。需要明确的是，如果我们查看 [Hexagonal Architecture 文章中的图](http://alistair.cockburn.us/Hexagonal+architecture) ![在此处输入图像描述](../Images/97151a642123358de0a2c8358e82dffd.png)

servlet 上下文应该只包含与*用户端*API 相关的东西，而不是应用程序。是否应该划分根 Web 应用程序上下文的配置并将*data-side-api*放入单独的配置文件是有争议的，但问题是关于 servlet/根上下文。

只是为了不那么抽象，这里是一些我在配置 Spring 应用程序时通常记住的非正式图表（就 Spring 上下文和 bean 配置文件而言）（当然这都是主观的，它不是一个超级解决方案，实际上有点结束了复杂——我不太可能需要这么多 servlet 和配置文件）

![spring 和六边形架构之间的关系 servlet 处理不同类型的传入请求 - 即用于 mvc 的 servlet、用于 gwt 的 servlet、用于 REST 的 servlet 等，而传出请求是从根应用程序上下文启动的](../Images/475aaba776d4713690212d1a8f4d713b.png)

# delphi - 在没有透明度的情况下将PNG图形绘制到画布上？

> ID：14655732
> 
> 赞同：2
> 
> 时间：2013-02-01T22:00:33.047
> 
> 标签：delphi, drawing, png, delphi-xe2, transparent

我已经看到很多问题询问如何绘制透明图像，但我的情况恰恰相反。我有一个`TPicture`加载任何文件类型的地方，包括`PNG`. 然后我直接在 a的画布中阅读`TPicture.Graphic`和调用。但是，在绘制图像时，它会继承原始图像的透明度。`Draw``TBitmap``PNG`

目前的代码很简单，只是...

```
MyPicture.LoadFromFile(SomeFilename);
MyBitmap.Canvas.StretchDraw(SomeRect, MyPicture.Graphic); 
```

现在的问题是我正在绘制的画布已经有一个图像，并且这个 PNG 被绘制在它的一部分上。当 PNG 具有透明背景时，通常显示为白色。但是，由于它直接在画布上绘制透明图形，因此这些区域保持透明。

`PNG`仅使用画布绘制方法时，如何在没有原始透明度的情况下将 Graphic 直接绘制到画布上？我不想创建太多图形对象并绘制太多次，因此我上面只有 2 行代码。我希望有一种方法可以`BitBlt`为此目的使用一些特殊机制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:10:20.913

Delphi XE2 中预建的唯一方法有缺陷，无法正常工作。相反，在空白画布上绘制空白或您想要的任何背景。然后在顶部绘制透明图像。

如果您没有在空白画布上绘图，您可以`FillRect`为您计划绘制 png 的区域调用位图画布的方法。

# visual-studio-2010 - 使用 Visual Studio 2010 Professional 部署 DirectX/MFC 应用程序

> ID：14655733
> 
> 赞同：1
> 
> 时间：2013-02-01T22:00:36.750
> 
> 标签：visual-studio-2010, deployment, mfc, directx-11

我能够通过 VS2010 环境运行我的应用程序。但不能使其作为独立的 exe 运行（只需双击 exe 即可运行）。不知道需要什么文件。

在 VS 中的附加依赖项中，我有：

```
d3d11.lib
d3dcompiler.lib
d3dx11d.lib
d3dx9d.lib
dxerr.lib
dxguid.lib
winmm.lib
comctl32.lib 
```

我试图将这些文件复制到我的 exe 所在的同一目录中：

```
d3d11.dll
d3dcompier_43.dll
d3dx9d_43.dll
d3dx11d_43.dll 
```

我也尝试找到一些依赖项，但是依赖项walker 崩溃并出现一些错误。所以我在 InstallShield 2010 中使用了依赖扫描器，它说：

```
d3dx11d_43.dll
Microsoft (R) C Runtime Library
Microsoft OLE 2.40 for Windows NT(TM) and Window 95(TM) Operating Systems
VC User gdiPlus RTL X86 
```

最后三件事是什么？我还可以做些什么？

// 编辑

该应用程序是使用 DirectX SDK June 2010 创建的，所以我安装了 DX End User June [http://www.microsoft.com/en-us/download/details.aspx?id=8109](http://www.microsoft.com/en-us/download/details.aspx?id=8109)。

但是，该应用程序正在通过 VS2010 运行，但是独立的 exe（在同一台计算机上）不起作用，所以我认为如果我有 SDK（安装了 Visual C++ Redist）甚至不需要 DX 最终用户也）。

我还尝试通过 VS2010 创建一个设置，它复制了这些文件：

```
COMDLG32.dll
d3d11.dll
d3dx11d_43.dll
IMM32.dll
MSIMG32.dll
OLEACC.dll
oledlg.dll 
```

但它仍然不起作用（单击 exe 时它总是显示：程序 xyz 已停止工作。Windows 可以在线找到此问题的解决方案。查找/关闭/调试按钮。）

也许它与MFC有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:02:45.547

您需要在用户系统上安装[DirectX End-User Runtime](http://www.microsoft.com/en-us/download/details.aspx?id=8109)（与您的开发环境匹配的正确版本）以及[Microsoft Visual C++ Runtime](http://www.microsoft.com/en-us/download/details.aspx?id=5555) ，而不是仅仅复制这些 DLL 。

# r - 在嵌套列表中查找元素的索引？

> ID：14655735
> 
> 赞同：8
> 
> 时间：2013-02-01T22:00:39.723
> 
> 标签：r, list, recursion, nested

我有一个类似的列表：

```
mylist <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3)) 
```

是否有一种（无循环）方法来识别元素的位置，例如，如果我想用 5 替换“C”的值，并且在哪里找到元素“C”并不重要，我可以做点什么吗喜欢：

```
Aindex <- find_index("A", mylist)
mylist[Aindex] <- 5 
```

我已经尝试过`grepl`，在当前示例中，以下将起作用：

```
mylist[grepl("C", mylist)][[1]][["C"]] 
```

但这需要嵌套级别的假设。

我问的原因是我有一个很深的参数值列表和一个替换值的命名向量，我想做类似的事情

```
 replacements <- c(a = 1, C = 5)
 for(i in names(replacements)){ 
    indx <- find_index(i, mylist)
    mylist[indx] <-  replacements[i]
  } 
```

这是对我之前的问题的改编，[在 R 中使用 xpath 更新节点（深度未知）？](https://stackoverflow.com/q/13851890/513006)，使用 R 列表而不是 XML

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T22:45:49.313

一种方法是使用`unlist`and `relist`。

```
mylist <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3))
tmp <- as.relistable(mylist)
tmp <- unlist(tmp)
tmp[grep("(^|.)C$",names(tmp))] <- 5
tmp <- relist(tmp) 
```

因为 unlist 中的列表名称与 a 连接，所以`.`您需要注意`grep`参数的命名方式和命名方式。如果您的任何列表名称中都没有 a `.`，那应该没问题。否则，名称 like`list(.C = 1)`将落入模式并被替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T14:32:27.863

基于[这个问题](https://stackoverflow.com/questions/26154252/easily-finding-and-replacing-every-match-in-a-nested-list)，您可以像这样递归地尝试它：

```
find_and_replace <- function(x, find, replace){
  if(is.list(x)){
    n <- names(x) == find
    x[n] <- replace
    lapply(x, find_and_replace, find=find, replace=replace)
  }else{
    x
  }
} 
```

更深层次的测试`mylist`：

```
mylist <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3, d = list(C=10, D=55)))
find_and_replace(mylist, "C", 5)
$a
[1] 1

$b
$b$A
[1] 1

$b$B
[1] 2

$c
$c$C  ### it worked
[1] 5

$c$D
[1] 3

$c$d
$c$d$C ### it worked
[1] 5

$c$d$D
[1] 55 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-13T08:15:59.337

这现在也可以`rrapply`在`rrapply`-package （base 的扩展版本`rapply`）中使用。要根据名称返回嵌套列表中元素的位置，我们可以使用特殊参数`.xpos`和`.xname`。例如，要查找具有 name 的元素的位置`"C"`：

```
library(rrapply)

mylist <- list(a = 1, b = list(A = 1, B = 2), c = list(C = 1, D = 3))

## get position C-node
(Cindex <- rrapply(mylist, condition = function(x, .xname) .xname == "C", f = function(x, .xpos) .xpos, how = "unlist"))
#> c.C1 c.C2 
#>    3    1 
```

然后我们可以在嵌套列表中更新它的值：

```
## update value C-node
mylist[[Cindex]] <- 5 
```

这两个步骤也可以直接在调用中合并`rrapply`：

```
rrapply(mylist, condition = function(x, .xname) .xname == "C", f = function(x) 5, how = "replace")
#> $a
#> [1] 1
#> 
#> $b
#> $b$A
#> [1] 1
#> 
#> $b$B
#> [1] 2
#> 
#> 
#> $c
#> $c$C
#> [1] 5
#> 
#> $c$D
#> [1] 3 
```

# php - Group By 不起作用

> ID：14655737
> 
> 赞同：0
> 
> 时间：2013-02-01T22:00:58.403
> 
> 标签：php, mysql

我的having子句有问题，这是我遇到的错误：

中的未知`tbl_quotes.tax`列`having clause`

和我的代码：

```
SELECT tbl_quotes.docnumber                                      AS docNumber, 
       tbl_quotes.date                                           AS date, 
       Sum(tbl_quotesitems.price) * ( ( tax + tax2 / 100 ) + 1 ) AS total, 
       ( Sum(tbl_quotesitems.price) * ( ( tax + tax2 / 100 ) + 1 ) ) - 
           (SELECT Sum(tbl_payments.amount) 
            FROM tbl_payments 
            WHERE tbl_payments.quoteid = tbl_quotes.id
           )                                                     AS amtOwing 

FROM   tbl_quotes 
       INNER JOIN tbl_quotesitems 
               ON tbl_quotesitems.quoteid = tbl_quotes.id 
GROUP  BY tbl_quotes.id 
HAVING ( Sum(tbl_quotesitems.price) * ( ( ( tbl_quotes.tax + tbl_quotes.tax2 ) / 
                                          100 ) 
                                               + 
                                               1 ) ) < (SELECT Sum( 
                                                       tbl_payments.amount) 
                                                        FROM   tbl_payments 
                                                        WHERE 
              tbl_payments.quoteid = tbl_quotes.id) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:34:47.230

可能使用连接重写并避免代码和计算的一些重复：（
***[假设：表`tbl_quotes`作为`id`主键）]***

```
SELECT q.docnumber  AS docNumber, 
       q.date       AS date, 
       qi.sum_price * ( ( q.tax + q.tax2 / 100 ) + 1 )
                    AS total, 
       qi.sum_price * ( ( q.tax + q.tax2 / 100 ) + 1 ) - p.sum_amount 
                    AS amtOwing 
FROM   tbl_quotes AS q 
       INNER JOIN 
                  ( SELECT   quoteid,
                             SUM(price) AS sum_price
                    FROM     tbl_quotesitems
                    GROUP BY quoteid
                  ) AS qi 
               ON qi.quoteid = q.id 
       INNER JOIN 
                  ( SELECT   quoteid,
                             SUM(amount) AS sum_amount
                    FROM     tbl_payments 
                    GROUP BY quoteid
                  ) AS p  
               ON p.quoteid = q.id
WHERE  qi.sum_price * ( ( ( q.tax + q.tax2 ) / 100 ) + 1 ) 
       < p.sum_amount ; 
```

# javascript - jQuery on() 事件委托

> ID：14655738
> 
> 赞同：1
> 
> 时间：2013-02-01T22:00:59.077
> 
> 标签：javascript, jquery

以下是跨两个`<div>`标签委托的吗？即：一两个事件处理程序？我需要`data-id`在 event.delegateTarget 上捕获。附加到每个`<div>`标签时这很简单，但我可能有 20 个左右。无论如何猜测都不是什么大问题，但我希望有更好的理解。

jQuery Docs 指出，如果我为该方法提供`selector`该`on`方法，则它是委托的，但我的场景似乎与我附加到多个元素的情况略有不同。有没有办法可以使用我的浏览器调试器工具查看生成的事件处理程序？

如果我将处理程序附加到`document`，有什么简单的方法可以捕获包含的内容`div`吗？我的文档比示例要复杂得多，我不能简单地依赖`div`and associated`data-id`是`input`元素的直接父级这一事实。

```
$(".target").on("change", "input", function (event) {
...
});

<div class="target" data-id="123">
    <input type="checkbox" name="alpha" value="1" />
    <input type="checkbox" name="alpha" value="2" />
</div>

<div class="target" data-id="789">
    <input type="checkbox" name="beta" value="3" />
    <input type="checkbox" name="beta" value="4" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:02:00.987

这是一个处理函数，将`<input>`在两个`<div>`元素中的任何一个元素的“更改”事件中调用。

*真正的*事件处理程序是 jQuery 内部的东西，它检查事件目标并适当地分派。

如果你附加到`<body>`，你会这样做：

```
$('body').on('change', '.target input', function() { ... }); 
```

从处理程序`this`中，您可以`<input>`使用它`.closest('.target')`来查找容器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:08:06.800

我相信这是两个不同的代表团，如果这就是你要问的。对处理函数的单独引用附加到两个`.target`div 中的每一个，每个 div 处理由它们自己的一对复选框触发的事件。

如果您绑定到两个 div 的共同祖先，您始终可以使用 找到包含的 div `$(this).closest('.target')`，正如 Pointy 建议的那样。

# c# - .NET 程序集应该有多大（小）？

> ID：14655742
> 
> 赞同：0
> 
> 时间：2013-02-01T22:01:08.770
> 
> 标签：c#, .net, .net-assembly, internal

不幸的是，C# 没有类似 C++ 的`friend`. 因此，例如，为了解决经典的矩阵/向量乘法示例（其中可以通过使矩阵和向量成为朋友来提高效率，这样每个类都可以访问另一个类的私有成员），我必须定义班级成员`internal`。

现在我了解自己了，不恰当的封装迟早会导致代码乱七八糟。因此，我想让`internal`宇宙尽可能小。

这将导致非常小的组件。

这有什么缺点，还是没关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:31:06.077

回答标题中的问题：组件应该有多小？

对组件的尺寸没有特殊要求或建议*。

*由于需要在更多地方查找信息，理论上疯狂数量的程序集（可能以数千计）可能会减慢加载速度。

挑选尺码时考虑：

*   适当的封装
*   易于编辑（大量解决方案与几个大型解决方案在构建/编辑/部署时都有缺点和优点）
*   技术限制（如 GAC 部署、部分受信任的代码、任何 CPU/x86/x64 要求）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:07:58.340

如果您不喜欢内部原因，它太开放了（对您的 api 的其余部分而言），请将那些需要彼此开放的类作为一个单独的微程序集，其中仅包含这一小组类。您始终可以将该程序集嵌入到您的主 api 程序集中。

这既应该让你的类对彼此开放，又不能让其他任何人进入（除非他们公然忽略你的程序集结构，并且在你的辅助程序集中放置的东西比它的名字所暗示的要多。但是谁会做这样的事情?! :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:13:39.813

除非我不明白：

> 不幸的是，C# 没有像 C++ 的朋友那样的东西。

[Friend 程序集（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/0tke9fxk%28v=vs.110%29.aspx)确实存在。它可能不完全是 C++ 所拥有的，但听起来它会起作用。

# java - 显示到 LCD 披风的 Beaglebone java（运行 ubuntu）

> ID：14655749
> 
> 赞同：0
> 
> 时间：2013-02-01T22:01:33.030
> 
> 标签：java, beagleboard, lcd

硬件：Beaglebone + LCD cap

操作系统：Ubuntu 12.10

问题：将背景设置为颜色的基本 java 应用程序 - 不会从命令行运行：

线程“主”java.lang.InternalError 中的异常：无法使用 '0.0' 作为 DISPLAY 变量的值连接到 X11 窗口服务器......

如何导出 DISPLAY 以便我的 java 应用程序可以访问 LCD Cape？（我认为这是问题所在）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T14:44:21.720

您可能至少需要从图形 shell 中调用的终端调用“xhost +”。可能有某种方法可以将其设为默认值，但通常 X11 会禁用来自不是 GUI 登录控制台的其他控制台的访问，直到您调用该命令。

要让它在启动时工作，您可以查看[此线程](http://ubuntuforums.org/showthread.php?t=1946770)或[此线程](http://www.linuxquestions.org/questions/slackware-14/setting-up-xauth-or-xhost-837610/)。我认为最适合您的方法是添加到您的 .xinitrc 文件中：

```
xhost +local: 
```

# php - 为什么在 PHP 中连接顺序变量很重要？

> ID：14655760
> 
> 赞同：0
> 
> 时间：2013-02-01T22:02:07.920
> 
> 标签：php, forms, concatenation

因此，我正在处理一个显示特定人员页面链接的页面。我正在使用超链接提交我的表格。我在循环中有这段代码，并使用整数为页面上的多个表单`$position`提供不同的 s。`id`

为什么会这样：

```
<form id="<? echo "Form" . $position;?>" method="post" action="../lecture">
<input type="hidden" name="personID" value="<? echo $indexstr;?>">
</form>
<a href="#" onclick="<? echo "Form" . $position ;?>.submit()"  ><? echo $firstname. ' ' . $lastname;?></a> 
```

这不会：

```
<form id="<? echo $position . "Form";?>" method="post" action="../lecture">
<input type="hidden" name="personID" value="<? echo $indexstr;?>">
</form>
<a href="#" onclick="<? echo $position . "Form" ;?>.submit()"  ><? echo $firstname. ' ' .   $lastname;?></a> 
```

如果类型和`$position`整数存在问题，我什至尝试在使用`strval()`. 唯一的区别是我连接“ *Form* ”和`$position`.

我真的只是想明白。预先感谢您对我的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:03:53.263

ID 不能以数字字符开头

[http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name)

# php - php 适合上传视频等大文件吗

> ID：14655765
> 
> 赞同：1
> 
> 时间：2013-02-01T22:02:12.157
> 
> 标签：php, python, web

嗨，我想知道在设置服务器配置（如 max_post_size 、执行时间等）后，从 php 上传视频等大文件（超过 200 mb - 1gb）是否是一个不错的选择。我问这个问题的原因是因为我读了一些地方上传大文件时，最佳做法是将文件分成块并上传（我认为 youtube 会这样做）。我是否需要使用其他语言（如 python 或 C++）来上传大文件或者 php 就足够了。如果我需要使用另一种语言，任何人都可以帮助我阅读相关材料。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:11:13.553

PHP 将在上传时将整个文件保存在内存中。这意味着如果您要并行上传 5 个文件，那么您最多需要 5GB 以上的内存。

这可以在 PHP 中完成，我使用分块方法完成了这项工作。关于这个主题有几个 SO 问题：

*   [文件上传；如何使用“分块”？](https://stackoverflow.com/questions/6375852/file-uploads-how-to-utilize-chunking)
*   [在 PHP 中使用分块上传 1GB 文件](https://stackoverflow.com/questions/2447837/upload-1gb-files-using-chunking-in-php)

但我个人的偏好是使用[plupload](http://www.plupload.com)。它是一个非常完整的跨平台（JS、Flash、Silverlight）上传脚本，带有一个很好的 PHP 代码示例来处理分块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:11:05.763

它不仅`PHP`要考虑用于大文件上传。您的 Web 服务器也需要支持这一点，至少在`nginx`. 我不知道如何`httpd`处理，但正如你所说的分块是可行的解决方案。`FTP`是另一种选择。

# php - 从 PHP glob 函数中取消列出文件

> ID：14655769
> 
> 赞同：0
> 
> 时间：2013-02-01T22:02:31.427
> 
> 标签：php, glob

我在 1 个文件夹下有 25 个文件，我在 PHP 中使用 glob 包含了这些文件

```
 foreach (glob(PATH."*.php") as $filename) {
    require_once $filename; 
    } 
```

我想在测试时从该列表中排除 1 个文件，我该如何实现？
这`preg_grep`将很难一次又一次地改变。我想要实现的不是弄乱当前的东西并在文件夹中添加新文件。我想排除新添加的文件，直到它没有错误并且不会损害当前设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:05:55.673

具体排除文件：

```
foreach (glob(PATH."*.php") as $filename) {
  if ($filename!='excluded_file.php') {
    require_once $filename;
  }
} 
```

如果你想变得非常性感：

```
$exclude_files=array('exclude1.php','exclude2.php');

foreach (glob(PATH."*.php") as $filename) {
  if (!in_array($filename,$exclude_files)) { require_once $filename; }
} 
```

或者只是暂时从目录中删除问题文件。

# php - 基于类从外部html读取

> ID：14655774
> 
> 赞同：0
> 
> 时间：2013-02-01T22:03:01.873
> 
> 标签：php, html, dom

我尝试从 html 页面的外部源中提取`4G Network`实际的整个行，`LTE 700 MHz Class 17 / 1700 / 2100 - for AT&T`但在其他情况下，它可能会更加不同`LTE 850 / 900 / 1700 / 2100`。

我的结果的标题始终是 stable( `4G Network`) 并且它是 under`<td class="ttl">`并且结果是在`<td class="nfo">`class 下，但是它们都在 under `<tr>`，所以我认为基于 title`ttl class`可以阅读基于下的内容`nfo class`

这是外部html的来源：

```
<tr>
<th rowspan="8" scope="row">General</th>
<td class="ttl"><a href="network-bands.php3">2G Network</a></td>
<td class="nfo">CDMA 800 / 1900 </td>
</tr><tr>
<td class="ttl">&nbsp;</td>
<td class="nfo">GSM 900 / 1800 / 1900 </td>
</tr>
<tr>
<td class="ttl"><a href="network-bands.php3">3G Network</a></td>
<td class="nfo">HSDPA 2100 </td>
</tr>
<tr>
<td class="ttl">&nbsp;</td>
<td class="nfo">CDMA2000 1xEV-DO </td>
</tr>
<tr>
<td class="ttl"><a href="network-bands.php3">4G Network</a></td>
<td class="nfo">LTE 700 MHz Class 17 / 1700 / 2100 - for AT&amp;T</td>
</tr><tr>
<td class="ttl"><a href="glossary.php3?term=sim">SIM</a></td>
<td class="nfo">Micro-SIM</td>
</tr><tr>
<td class="ttl"><a href="#" onclick="helpW('h_year.htm');">Announced</a></td>
<td class="nfo">2012, October</td>
</tr> 
```

这是我使用的代码：

```
<?php
include_once('/simple_html_dom.php');
$dom = file_get_html("http://www.externalsite.com/pantech_vega_no_6-5268.php");
// alternatively use str_get_html($html) if you have the html string already...
 foreach ($dom->find('td[class=nfo]') as $node)
{
$result = $node->innertext;
$bresult = explode(",", $result);
echo $bresult[0];
} 
?> 
```

我的代码的结果是这样的：

`CDMA 800 / 1900 GSM 900 / 1800 / 1900 HSDPA 2100 CDMA2000 1xEV-DO LTE 700 MHz Class 17 / 1700 / 2100 - for AT&T Micro-SIM 2012, October`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:04:11.613

如果您只想获得 4G 网络，您应该这样做：

```
<?php
include_once('/simple_html_dom.php');
$dom = file_get_html("http://www.gsmarena.com/pantech_vega_no_6-5268.php");
foreach ($dom->find('tr') as $node) {
    if (is_a($node->children(0), 'simple_html_dom_node')) {
        if ($node->children(0)->plaintext == "4G Network") {
            echo $node->children(1)->plaintext;
        }
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:18:57.013

您正在遍历所有结果，而您只想要第一个结果。所以不要循环并得到第一个结果：

```
$results = $dom->find('td[class=nfo]');
$node = reset($results);    // get the first element of the array
//the rest of your code:
$result = $node->innertext;
// etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:23:15.117

你只想要第一个结果，这样你就可以在找到它后停下来得到你的结果

```
foreach ($dom->find('td[class=nfo]') as $node){
   $result = $node->innertext;
   break;
} 
```

# .htaccess - Mod重写以重定向，除了特定页面

> ID：14655777
> 
> 赞同：0
> 
> 时间：2013-02-01T22:03:12.703
> 
> 标签：.htaccess, mod-rewrite

尝试在我的 htaccess 中编写重写规则，以便对 /en/shop/index.html 或 /fr/shop/index.html 的任何请求都保留在服务器上，但如果用户转到任何其他页面，它会重定向到不同的页面服务器。这是我到目前为止所得到的，但它不起作用。

```
RewriteRule ^(.*)/shop/(.*) [L]
RewriteRule ^(.*)$ http://www.newwebsite.com/$1 [R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:39:41.570

添加破折号以告诉第一个 RewriteRule 您希望匹配通过不变：

`RewriteRule ^.*/shop(/.*)?$ - [L]`

我还删除了第一组括号，因为您没有使用匹配结果，因此无需存储匹配的模式。我假设您可能需要匹配 /shop 而不使用尾部斜杠，这就是该`(/.*)?`部分存在的原因。

# sql-server - RedGate 数据比较可以使用联接吗？

> ID：14655782
> 
> 赞同：3
> 
> 时间：2013-02-01T22:03:30.143
> 
> 标签：sql-server, redgate

使用 Redgate SQL 数据比较 9。

这是我想做的一个简化示例。我有以下表格：

```
Product (ProductId, ProductName)         
ProductDetail (ProductDetailId, ProductId, OtherField) 
```

两个表中的 Id 列都是主键和自增（标识）。Product 对 ProductName 有唯一的约束。我有一个生产系统和一个测试系统，并想使用数据比较来同步两个系统的 ProductDetail 表。

问题是两个系统的 id 列不同步。名为“香蕉”的产品在生产中的 ID 为 1000，在测试中的 ID 为 6。

我想做的是使用连接进行比较——因此，我可以使用 ProductDetail 表和 ProductDetail 表基于字段组合进行比较，而不是使用仅由 ProductDetail 表中的列组成的键。

我看不出有任何方式可以让多个表参与数据比较 UI 中的比较。我想要实现的目标是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T23:02:52.097

使用具有所需连接条件的查询，在每个数据库上创建一个包含结果的表并使用 rg 比较这些表

# mongodb - 将 MongoDB 数据拆分为多个文件

> ID：14655783
> 
> 赞同：1
> 
> 时间：2013-02-01T22:03:30.943
> 
> 标签：mongodb, mongodb-.net-driver

我一直在阅读有关拆分 Mongo 数据库并通过[shards](http://blog.zawodny.com/2011/03/06/mongodb-pre-splitting-for-faster-data-loading-and-importing/)升级的信息，但我正在考虑是否可以将同一服务器中的 mongo 数据库按块拆分并将其存储在不同的文件中，分片键的范围将使用公式计算考虑周数和当前年份，例如 (year)x54 + 当前周数

假设 2010x54 + 11 = 108551

理想情况下，我的想法是按月拆分文件，如下所示：

```
chunk01 (shardKeyID 108551 -> 108555) ----> Server1---> physical file 01
chunk02 (shardKeyID 108556 -> 108560) ----> Server1---> physical file 02
chunk03 (shardKeyID 108561 -> 108565) ----> Server1---> physical file 03 
```

我尝试在单个服务器中执行此操作，但如果我为分片设置，我只会获得数据库中文档的一个子集，这是有道理的，因为另一部分将存储在另一个分片中的不同服务器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:33:28.270

`mongod`您可以通过在不同端口上运行单独的实例来在单个服务器上设置分片集群。说明可以在[本教程](http://docs.mongodb.org/manual/tutorial/convert-replica-set-to-replicated-shard-cluster/)中找到。

关于块的分割，这是由数据库自动处理的。请注意，默认情况下，您的集合将使用 64MB 的默认块大小进行分片。[在此处](http://docs.mongodb.org/manual/core/sharded-clusters/)查看更多详细信息：

> 块大小是用户可配置的。但是，默认值 64 MB 对于大多数部署来说是理想的。

您似乎在描述自己的何时平衡算法，这是不可能的。你真的需要把它留给[集群平衡器](http://docs.mongodb.org/manual/core/sharded-cluster-internals/#sharding-balancing-internals)来为你解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:33:43.723

MongoDB 自动为每个数据库创建数据文件（称为*extents*）；您无法按照您的建议控制哪些文档进入给定的物理数据文件。

[分片](http://docs.mongodb.org/manual/sharding/)将单个逻辑数据库分布在服务器集群中，其中每个分片由副本集（推荐）或单个 mongod 支持。您[选择的分片键](http://docs.mongodb.org/manual/core/sharded-cluster-internals/#choosing-a-shard-key)决定了将用于平衡分片之间数据的属性，但同样您并不能确定数据在物理数据文件中的位置。

# sencha-touch-2 - 如何在 Architect 中打开 Sencha Docs 示例？

> ID：14655799
> 
> 赞同：0
> 
> 时间：2013-02-01T22:04:22.173
> 
> 标签：sencha-touch-2, sencha-architect

我下载了 Sencha Docs 中显示的示例，例如[http://docs.sencha.com/touch/2-1/#!/example/maps](http://docs.sencha.com/touch/2-1/#!/example/maps)，并在我的 Windows 计算机上安装了 Architect。

我想修改此处显示的示例：http: [//dev.sencha.com/deploy/touch/examples/production/index.html](http://dev.sencha.com/deploy/touch/examples/production/index.html)

在 Architect 中，但程序要求提供 .xds 或 .xda 文件。如何生成此文件类型，以便我可以使用所见即所得的编辑器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:53:54.937

您尝试导入的应用程序是 Sencha Touch 项目（不是 Architect 项目），因此无法导入它。

# ios - 如何让这些方法与多点触控一起使用？

> ID：14655802
> 
> 赞同：0
> 
> 时间：2013-02-01T22:04:31.010
> 
> 标签：ios, touch, multi-touch

我在一个教程中找到了这段代码，如果触摸开始于屏幕的特定一侧，则几乎将左侧或右侧 BOOL 设置为 YES，然后检查触摸何时移动以查看它是否在屏幕上改变侧面以使另一个 BOOL 是的。

所以我现在正在尝试实现多点触控，但我不确定它如何与以下代码一起使用？有谁知道我会怎么做？

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    touchStartPoint = [touch locationInView:self.view];
    if (touchStartPoint.x < 160.0) {
        touchLeftDown = TRUE;
    }
    else if (touchStartPoint.x > 160.0) {
        touchRightDown = TRUE;
    } 
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPoint = [touch locationInView:self.view];

    if (touchStartPoint.x < 160.0 && currentTouchPoint.x < 160.0) {
        touchLeftDown = TRUE;
    }
    else if (touchStartPoint.x > 160.0 && currentTouchPoint.x > 160.0)
    {
        touchRightDown = TRUE;
    }
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchLeftDown = touchRightDown = FALSE;
} 
```

谢谢！

编辑1：这些是布尔在游戏循环中所做的事情，我几乎想要实现的是，如果双方同时触摸，TOUCH_INCREMENT 将为 0，因为每一侧的触摸都会取消互相出去。我将如何实现这一目标？无论如何，这是我正在谈论的代码：

```
if (touchLeftDown == TRUE) {
        touchStep -= TOUCH_INCREMENT;
    }
    else if (touchRightDown == TRUE) {
        touchStep += TOUCH_INCREMENT;
    }
    else {
        touchStep = SLOWDOWN_FACTOR * touchStep;
    }
    touchStep = MIN(MAX(touchStep, -MAX_ABS_X_STEP), MAX_ABS_X_STEP);
    pos.x += touchStep; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:59:39.730

您可能可以在没有`touchStartPoint`(i)var 的情况下完成这项工作。重要的是不要使用`-anyObject`，而是检查每次触摸。以下代码修改可能对您有用：

```
-(void) countTouches:(NSSet *)touches withEvent:(UIEvent *)event{

    int leftTouches=0;
    int rightTouches=0;

    for (UITouch *touch in touches) 
    { 
        CGPoint location = [touch locationInView:touch.view];
        //just in case some code uses touchStartPoint
        touchStartPoint=location;

        if (location.x < 160.0) {
            leftTouches++;
        }
        else if (location.x > 160.0) {
            rightTouches++;
        }
    }

    //reset touch state
    touchLeftDown=FALSE;

    //set touch state if touch found
    if(leftTouches>0){
        touchLeftDown=TRUE;
    }

    touchRightDown=FALSE;
    if(rightTouches>0){
        touchRightDown=TRUE;
    }

}
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self countTouches:touches withEvent:event];
}

-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self countTouches:touches withEvent:event];
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    touchLeftDown = touchRightDown = FALSE;
} 
```

在这里，我创建了一个由 touchesBegan 和 touchesMoved 调用的函数，因为它们需要实现相同的逻辑。`touchStartPoint`如果以某种方式在代码中使用，您可能会看到一些意想不到的副作用。

# windows - 没有睡眠的 CPU 空闲循环

> ID：14655812
> 
> 赞同：3
> 
> 时间：2013-02-01T22:05:31.310
> 
> 标签：windows, assembly

我现在正在学习 WIN32 ASM，我想知道是否存在类似“空闲”无限循环的东西，它根本不消耗任何资源。基本上我需要一个正在运行的进程来进行实验，如下所示：

```
loop:
  ; alternative to sleep...
  jmp loop 
```

有什么东西可以让这个过程闲置吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T22:08:42.267

你不能两全其美。您可以消耗 CPU，也可以让它做其他事情。正如 Vlad Lazarenko 建议的那样，您可以使用`rep; nop;`(也称为)来节省电力并避免剥夺其他核心的资源。`pause`但是，如果您在没有将核心让给另一个进程的情况下进行循环，那么至少该虚拟核心不能做任何其他事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:46:18.953

注意：**您不应该使用空循环使应用程序空闲。它会将您的处理器加载到 100%**

当 Win32 环境中没有 GUI 活动时，有几种方法可以使应用程序空闲。主要（记录在 MSDN 中）是在主循环中使用“GetMessage”函数，以便从消息队列中提取消息。当消息队列为空时，该函数将处于空闲状态，消耗非常少的处理器时间，等待消息到达消息队列。

下面是一个使用 FASM 宏库的示例：

```
msg_loop:
      invoke  GetMessage, msg, NULL, 0, 0
      cmp     eax, 1
      jb      end_loop
      jne     msg_loop
      invoke  TranslateMessage, msg
      invoke  DispatchMessage, msg
      jmp     msg_loop 
```

当您想要捕捉应用程序进入空闲状态的时刻并进行一些低优先级的一次性处理（例如，根据应用程序的状态启用/禁用工具栏上的按钮）时，使用另一种方法。

在这种情况下，必须使用 PeekMessage 和 WaitMessage 的组合。PeekMessage 函数会立即返回，即使消息队列为空。这样，您可以检测到这种情况并提供一些要完成的空闲任务，然后您必须调用 WaitMessage 以使等待传入消息的进程空闲。

这是我的代码中的一个简化示例（使用 FreshLib 宏）：

```
; Main message loop
Run:
        invoke  PeekMessageA, msg, 0, 0, 0, PM_REMOVE
        test    eax,eax
        jz      .empty

        cmp     [msg.message], WM_QUIT
        je      .terminate

        invoke  TranslateMessage, msg
        invoke  DispatchMessageA, msg
        jmp     Run

.empty:
        call    OnIdle
        invoke  WaitMessage
        jmp     Run

.terminate:
        FinalizeAll
        stdcall TerminateAll, 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T22:11:28.893

“消耗资源”是什么意思？

如果你只想要一个什么都不做的命令？如果是`nop`这样的话，你可以尽可能多地循环，甚至：`rep; nop`. 但是，CPU实际上会忙于工作：执行“无操作”指令。

如果你想要一条会导致 CPU 本身停止的指令，那么你有点不走运：虽然有办法做到这一点，但你不能从用户空间做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-11T23:08:35.423

使用 ring 0 访问级别（如内核驱动程序），您可以使用 x86 HLT 操作码，但您需要具备系统编程技能才能真正了解如何使用它。以这种方式使用 HLT 需要启用中断（未屏蔽）并保证发生中断（例如系统定时器），因为从中断返回将执行 HLT 之后的下一条指令。

如果没有环 0 访问，您将永远找不到任何 x86 操作码来进入“空闲”模式......您只能找到一些消耗较少功率的指令（无内存访问，无缓存访问，无 FPU 访问，低 ALU 使用率...... .)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T22:08:16.740

是的，有一些架构支持固有空闲状态 AKA `halt`。

例如，在 x86 中[`hlt`](http://en.wikipedia.org/wiki/HLT)，操作码`0xf4`。可能只能在特权模式下调用。

[CPU 从用户模式切换到内核模式：它到底做了什么？它是如何实现这种转变的？](https://stackoverflow.com/questions/2479118/cpu-switches-from-user-mode-to-kernel-mode-what-exactly-does-it-do-how-does-i)

[如何完全挂起处理器？](https://stackoverflow.com/questions/3747847/how-to-completely-suspend-the-processor)

[我在这里](http://www.cs.hmc.edu/~geoff/classes/hmc.cs134.201209/slides/class12_syscalls_beamer.pdf)找到的 Linux 用户空间示例：

```
.section .rodata
greeting:
.string "Hello World\n"
.text
_start:
mov $12,%edx /* write(1, "Hello World\n", 12) */
mov $greeting,%ecx
mov $1,%ebx
mov $4,%eax /* write is syscall 4 */
int $0x80
xorl %ebx, %ebx /* Set exit status and exit */
mov $0xfc,%eax
int $0x80
hlt /* Just in case... */ 
```

# jquery - jquery replaceWith 不使用

> ID：14655815
> 
> 赞同：0
> 
> 时间：2013-02-01T22:05:54.333
> 
> 标签：jquery, replacewith

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:40:19.713

结束标签会自动插入。

您可以以某种方式使用 .wrapInner，或者执行以下操作：

```
html = '';
$("li").each(function() { // I removed the class as I don't know if each li has one or if only headers, etc.
    var li = $(this);
    var span = li.text(); // Same here.. removed the class
    if (span.indexOf("<") == 0) {
        var text = $(this).text();
        text = text.substring(1, text.length);
        html += '<li><div><ul><li class="Mheader">' + text + '</li>';
    }
    else if (span.indexOf(">") == 0) {
        html += '</ul></div></li>';
    } else {
        html += '<li>' + li.html() + '</li>';
    }
});
$('ul').html(html); 
```

# git - 如何将更改提交到另一个预先存在的分支

> ID：14655816
> 
> 赞同：217
> 
> 时间：2013-02-01T22:05:55.273
> 
> 标签：git

我刚刚对分支进行了更改。如何将更改提交到另一个分支？

我正在尝试使用：

```
git checkout "the commmit to the changed branch" -b "the other branch" 
```

但是，我认为这不是正确的做法，因为在这种情况下，我正在创建一个新分支，而不是将更改提交到“另一个分支”。

我应该改用以下命令吗？

```
git merge "the other branch" 
```

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2013-02-01T22:08:38.077

```
git checkout -b your-new-branch
git add <files>
git commit -m <message> 
```

首先，结帐到您的新分支。然后，添加您要提交到暂存的所有文件。最后，提交您刚刚添加的所有文件。您可能想在`git push origin your-new-branch`之后再做一次，这样您的更改就会显示在遥控器上。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2018-05-04T14:43:54.730

## 如果您尚未提交更改

### 如果您的更改与其他分支兼容

问题就是这种情况，因为 OP 希望提交到新分支，并且如果您的更改与目标分支兼容而不会触发覆盖，也适用。

正如约翰布罗迪接受的答案一样，您可以简单地签出新分支并提交工作：

```
git checkout -b branch_name
git add <files>
git commit -m "message" 
```

### 如果您的更改与其他分支不兼容

如果您收到错误消息：

```
error: Your local changes to the following files would be overwritten by checkout:
...
Please commit your changes or stash them before you switch branches 
```

然后你可以存储你的工作，创建一个新分支，然后弹出你的存储更改，并解决冲突：

```
git stash
git checkout -b branch_name
git stash pop 
```

就好像您在创建新分支后进行了这些更改。然后你可以像往常一样提交：

```
git add <files>
git commit -m "message" 
```

## 如果您已提交更改

### 如果您想将提交保留在原始分支中

请参阅 Carl Norum 的答案，在这种情况下，这是正确的工具：

```
git checkout <target name>
git cherry-pick <original branch> 
```

### 如果您不想将提交保留在原始分支中

请参阅 joeytwiddle 对[这个潜在重复项](https://stackoverflow.com/questions/1394797/move-existing-uncommitted-work-to-a-new-branch-in-git)的回答。根据需要执行上述任何步骤，然后回滚原始分支：

```
git branch -f <original branch> <earlier commit id> 
```

如果您已将更改推送到 GitHub 等共享远程，则除非您知道自己在做什么，否则不应尝试此回滚。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-02-01T22:23:09.290

如果我理解正确，您已经做出了承诺`changed_branch`并且您想将该承诺复制到`other_branch`? 简单的：

```
git checkout other_branch
git cherry-pick changed_branch 
```

# javascript - 消失的节点值

> ID：14655821
> 
> 赞同：0
> 
> 时间：2013-02-01T22:06:22.213
> 
> 标签：javascript, html, dom

我正在尝试编写一个对某些段落进行排序的 Javascript。这是我正在排序的 HTML 的一个小片段：

```
<p>Brown, John, 2010, <a href="#">Link</a></p>

<p>Bush, C.A., 2010, <a href="#">Link</a>: More info.</p>

<p><br></p>
<h3><a name="c">C</a></h3>

<p>Caine, J.S., and Minor, S.A., 2010, <a href="#">Link</a>: More</p> 
```

此 Javascript 正在寻找包含“2010”的条目（这是 4 个段落中的 3 个）：

```
var paras = document.getElementsByTagName("p");
alert( paras.length );  // 4, which is what I expect!

for( i=0; i < paras.length ; i++ ) {
    var node0_text = paras[i].childNodes[0].nodeValue;

    if ( node0_text.indexOf('2010') ) {
        alert( node0_text ); // not returning everything that I expect it to.
    };
} 
```

当我运行它时，前 2 个条目（“Brown”和“Bush”）会像我预期的那样在警报框中弹出。然后脚本似乎死了。它不显示第三个（“Caine”）条目。这里出了什么问题？感谢您的任何意见。

它的链接：http: [//jsfiddle.net/Jrmy/6MP2W/5/](http://jsfiddle.net/Jrmy/6MP2W/5/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:09:38.010

“Caine”条目在**第四段**。脚本失败，因为第三段没有文本。

这是第三段：

```
<p><br></p> 
```

文本是`null`这样的，`if`声明获得了尝试访问的异常`.indexOf()`。

（*编辑*——一个好的评论指出它是`<br>`正在检查值的标签，但这也是空的。）

# .htaccess - htaccess 子域不适用于 mod_rewrite enable

> ID：14655824
> 
> 赞同：0
> 
> 时间：2013-02-01T22:06:29.533
> 
> 标签：.htaccess

我已经搜索了很多教程，但对我没有任何帮助。我想用 htacces 创建虚拟子域，但是当我启用 mod_rewrite 时，我的软件会禁用原始 url。例如：

```
mod_rewrite disabled:
http://domain.com/listings.php?category=35

mod_rewrite enabled:
http://domain.com/35-finance/listings.html 
```

启用后，我无法访问[http://domain.com/listings.php?category=35](http://domain.com/listings.php?category=35) ...

在我的 htacces 中，如果 mod_rewrite 被禁用，这有效：

```
RewriteCond %{HTTP_HOST} !www.domain.com$ [NC]
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-_]+).domain.com [NC]
RewriteRule (.*) listings.php?category=%2 [NC,QSA] 
```

但是如果启用，它就不起作用，它不理解“类别”参数。

我试过这个：

```
RewriteRule (.*) http://www.domain.com/%1/listings.html [L] 
```

我被**重定向**到正确的页面，但我想将子域保留在浏览器栏中...

我试过这个：

```
RewriteRule (.*) /%1/listings.html [L] 
```

它导致内部服务器错误。

在这周之前我真的尝试了很多东西，但没有任何效果......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:00:34.803

> RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-_]+).domain.com [NC]
> 
> RewriteRule (.*) Listings.php?category=%2 [NC,QSA]
> 
> 但是如果启用，它就不起作用，它不理解“类别”参数。

`%2`匹配 s 中第二个模式的方法`RewriteCond`。在这种情况下，第二个模式是`([a-z0-9-_]+)`零件。

> 在我的 htacces 中，如果 mod_rewrite 被禁用，这有效：

如果 mod_rewrite 真的被禁用，那么这些规则就不会被使用。

> RewriteRule (.*) [http://www.domain.com/%1/listings.html](http://www.domain.com/%1/listings.html) [L]
> 
> 我被重定向到正确的页面，但我想将子域保留在浏览器栏中...

如果您在 RewriteRule 中提供域，您将**始终**被重定向，您只需提供路径（如`/%1/listings.html`）。如果域都是同一个 VirtualHost 的一部分，这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T02:48:11.347

我用这个 php 代码解决了这个问题：（www.gitme.net/php/ >> Gitme url2subdomain）

```
<?php

// code by büyücü.   www.gitme.net/php/

$full_url = sprintf($HTTP_HOST);
$subdomain = "";

for($i = 0;$i<=strlen($full_url);$i++)
{

  $dummy = substr($full_url,$i,1);

  if($dummy == ".")
  {
   break;
  }

  $subdomain = $subdomain.$dummy;

}

//

if ($subdomain <> "www")
{

  switch($subdomain)
  {
   case "gazeteler":
     $real_url = "http://www.gitme.net/gazeteler.htm";
     break;
   case "guzel-sozler":
     $real_url = "http://www.gitme.net/guzel-sozler.php";
     break;
    case "burclar":
     $real_url = "http://www.gitme.net/burclar.html";
     break;
      default : $real_url="http://www.gitme.net/";

  }

 include "$real_url";
 exit;
}

?> 
```

# oracle - 具有多个数据源的 Tomcat 6/7 JNDI

> ID：14655825
> 
> 赞同：5
> 
> 时间：2013-02-01T22:06:31.060
> 
> 标签：oracle, jakarta-ee, tomcat, ejb, jndi

当`<Resource>`context.xml 中有多个元素并且`<resource-ref>`web.xml 中有多个元素时，我的应用程序开始抛出

```
TNS:no appropriate service handler found 
```

和

```
ORA-01017: invalid username/password; logon denied 
```

但是，如果 JNDI 中只有一个数据源，即另一个使用常规 JDBC 数据源，则应用程序运行起来就像一个魅力

两个数据源都来自相同的数据库 URL，但使用不同的模式。

我的猜测是，它可能是由具有不同用户名/密码（模式）的每个资源的相同数据库 URL 引起的。但是tomcat应该能够处理这种情况，所以我的理由是我可能错过了一些配置？

另一个有趣的发现是：当我使用带有 SQL Developer 的 jdbc url`jdbc:oracle:thin:@myhost:1521:orcl`来建立连接时，有时它会毫无问题地连接，但有时它会因为同样的问题而被拒绝：`appropriate service handler found`而这个 Web 应用程序同时处于活动状态。但是，相同的 JDBC URL 可以在另一个具有常规 JDBC 连接（不是 JNDI）的 Spring 应用程序中正常工作。那么诀窍是什么？

以下是当前配置的详细信息：

在 Context.xml 中

```
<Resource name="jdbc/app_A" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@myhost:1521:orcl"
    username="usernameA" password="passwordA" maxActive="20" maxIdle="10" maxWait="-1" />
<Resource name="jdbc/app_B" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@myhost:1521:orcl"
    username="usernameB" password="usernameB" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

在应用程序的 Web.xml 中：

```
<resource-ref>
    <description>Oracle Datasource for app_A</description>
    <res-ref-name>jdbc/app_A</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref>
<resource-ref>
    <description>Oracle Datasource for app_B</description>
    <res-ref-name>jdbc/app_B</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

在 ApplicationContext.xml 中

```
<jee:jndi-lookup id="dataSource1" jndi-name="java:comp/env/jdbc/app_A" resource-ref="true" />
<jee:jndi-lookup id="dataSource2" jndi-name="java:comp/env/jdbc/app_B" resource-ref="true" /> 
```

最后我得到这样的异常堆积：

```
Jan 31, 2013 3:36:55 PM org.apache.catalina.core.NamingContextListener addResource
WARNING: Failed to register in JMX: javax.naming.NamingException: ORA-01017: invalid username/password; logon denied

Jan 31, 2013 3:36:56 PM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:278)
at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182)
at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:699)
at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:631)
at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:485)
at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:143)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:116)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:103)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:539)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:237)
at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1061)
at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:671)
at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:270)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: oracle.net.ns.NetException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

at oracle.net.ns.NSProtocol.connect(NSProtocol.java:385)
at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
... 38 more
Jan 31, 2013 3:36:56 PM org.apache.catalina.core.NamingContextListener addResource
WARNING: Failed to register in JMX: javax.naming.NamingException: Listener refused the  connection with the following error:
ORA-12519, TNS:no appropriate service handler found

Jan 31, 2013 3:36:56 PM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found 
```

真的不知道为什么会`no appropriate service handler found`弹出错误，似乎连接不被 orcl Listener 接受/理解。

这是我插入persistentence.xml的内容

```
<persistence-unit name="persistenceUnit1">
....
<jta-data-source>jdbc/app_A</jta-data-source>
....
</persistence-unit>

<persistence-unit name="persistenceUnit2">
....
<jta-data-source>jdbc/app_B</jta-data-source>
....
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T22:26:27.263

`ORA-12519, TNS:no appropriate service handler found`错误可能是使用旧式 JDBC 连接字符串的结果。根据 Oracle 11.1 JDBC Developer's Guide and Reference 的第 8 章[数据源和 URL](http://docs.oracle.com/cd/B28359_01/java.111/b31224/urls.htm#BEIJFHHB)，连接字符串格式如下：

```
jdbc:oracle:thin:@//host_name:port_number/service_name 
```

还有一条注释说*“启动 Oracle 数据库 10g，不支持 Oracle 服务 ID”。*因此，您使用的语法一定适用于 Oracle 9i。它可能适用于较新的版本，但不能保证。

因此，请考虑更改 JDBC 连接字符串的格式以遵循指南中建议的格式。

此外，对于 Oracle 9i 及更高版本，您应该使用`oracle.jdbc.OracleDriver`而不是`oracle.jdbc.driver.OracleDriver`Oracle 声明`oracle.jdbc.driver.OracleDriver`已弃用，并且将停止支持此驱动程序类。

# python - 在python中具有多个变量的for循环

> ID：14655832
> 
> 赞同：-3
> 
> 时间：2013-02-01T22:07:36.560
> 
> 标签：python, python-3.x

我需要解析一个文件，它具有以下内容： `result(x1 y1 x2 y2... xn yn)` 这是我用 python 编写的一段代码。我是 python 新手。

```
xs =[] ys=[]

def __init__(self,xs,ys):
        self.xs = xs
        self.ys = ys

def toString(self):
    return "result " + " (" + " ".join([x.toString()+ " " + y.toString() for x,y in zip(self.xs, self.ys)]) + ") " 
```

我`AttributeError: 'str' object has no attribute 'toString'`在运行时遇到错误。请建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:10:14.657

Python 中的字符串没有`toString()`方法。你可以`str(your_variable)`改用。如果变量已经是字符串，你不需要做任何特别的事情。

# bash - rsync --include 选项不排除其他文件

> ID：14655834
> 
> 赞同：29
> 
> 时间：2013-02-01T22:07:40.443
> 
> 标签：bash, rsync

尝试 rsync 某些扩展名（*.sh）的文件，但下面的 bash 脚本仍然传输所有文件，为什么？

```
从=/家/xxx
rsync -zvr --include="*.sh" $from/* root@$host:/home/tmp/

```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-01T22:20:52.743

您需要添加一个 --exclude all 并且它必须在 --include 之后

```
rsync -zvr --include="*.sh" --exclude="*" $from/*  root@$host:/home/tmp/ 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-01T22:23:03.983

`--include`是你不想要的文件`--exclude`。由于您没有在未来的参数中排除任何参数，因此没有效果。你可以做：

```
from=/home/xxx
rsync -zvr --include="*.sh" --include="*/" --exclude="*" "$from" root@$host:/home/tmp/ 
```

递归复制所有 .sh 文件（`--include`不跳过可能包含 .sh 文件的目录的额外内容）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-28T13:42:11.533

要添加的东西，至少在我的机器（FreeBSD 和 OS X）上，这是行不通的：

```
rsync -aP --include=*/ --include=*.txt --exclude=* * /path/to/dest 
```

但这确实：

```
rsync -aP --include=*/ --include=*.txt --exclude=* . /path/to/dest 
```

是的，通配符当前目录似乎覆盖了排除。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-23T10:27:18.510

我修复了通过**--exclude=*.***更改**--exclude=***的问题，我知道 * exclude 包含文件所在的文件夹。

# android - 如何使按钮重定向到另一个xml页面

> ID：14655849
> 
> 赞同：2
> 
> 时间：2013-02-01T22:08:56.910
> 
> 标签：android, xml, eclipse, button

我正在xml中制作一个按钮，如下所示：

```
 <Button
        android:id="@+id/buttondp"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/thisisstringtext" /> 
```

我希望它将它定向到以 xml 编码的另一个页面。谁能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:12:30.487

进行另一个活动并使用

```
setContentView(R.layout.your_other_layout); 
```

在里面。

然后在按钮的 onClickListener 中输入：

```
Intent i = new Intent(YourActivity.this, YourOtherActivity.class);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:19:26.953

您可以将 onclick 侦听器添加到您的按钮，因此：`android:onclick="method_in_your_activity"`.

在您的活动中添加了方法 (method_in_your_activity) 并添加`startActivity(NewActivity)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:15:24.677

如果您想要动态更改活动的内容，您可以随时调用`setContentView(my_layout)`并更改内容。然而; 使用另一个活动的最佳实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-17T09:13:18.453

在 java 文件中使用此代码，您将单击按钮重定向下一页

公共无效 onClick（查看 v）{

```
Intent ia=new Intent(getApplicationContext(),second.class);
startActivity(ia);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T03:16:44.067

您可以为不同的布局使用不同的活动。但是，如果您想为不同的布局使用相同的活动，那么您应该选择`ViewFlipper`. 从一个视图切换到另一个视图时，您还可以获得一些动画。关于相同的教程可以在[这里](http://www.helloandroid.com/tutorials/how-use-viewflipper)找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-11T10:40:00.427

在您的按钮 XML 中，添加：

```
android:onCLick="myRedirectFunction" 
```

在您的 MyMainActivity.java 中，添加名为 myRedirectFunction 的函数并在该函数内：

```
Intent homepage = new Intent(MyMainActivity.this, MySubActivity.class);
startActivity(homepage); 
```

# c - 字符指针被覆盖

> ID：14655851
> 
> 赞同：1
> 
> 时间：2013-02-01T22:09:05.833
> 
> 标签：c, struct

所以在我的程序中有一个结构：

```
typedef struct Point {
    double x, y;
    char *label;
} point; 
```

然后我从文件中读取一些信息，并将各种标签分配给数组中的各种点结构。问题是虽然 x, y 值被正确分配，但内存中每个结构的标签是相同的。

```
point set[3];

FILE *file = fopen(argv[1], "r");

int count = 0;
char *pch;
char line[128];

if(file != NULL){
    while(fgets (line, sizeof line, file) != NULL){
        pch = strtok(line, " ");
        int i = 0;

        while(pch != NULL){
            if(i==0){set[count].label = pch;}
            if(i==1){set[count].x = atof(pch);}
            if(i==2){set[count].y = atof(pch);}
            pch = strtok(NULL, " ");
            i++;
        }
        count++;
    }
    fclose(file);
}

//these values should not be the same, though they are
printf("%s\n", set[0].label); 
printf("%s\n", set[1].label); 
```

是否有某种解决方法可以让我的结构保持不变并正确分配值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:10:35.690

您需要为每个标签分配内存`instance`。要么作为一个数组

```
typedef struct Point {
    double x, y;
    char label[50];
} point;

strcpy(set[count].label, pch); 
```

或者通过为每个`label`实例动态分配内存

```
set[count].label = malloc(strlen(pch)+1);
strcpy(label, pch); 
```

（确保稍后`free(set[count].label)`在后一种情况下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:15:31.993

所有指针都指向同一个内存位置，这可以通过将结构成员标签更改为

```
char label[100]; 
```

或者通过像这样动态分配内存，

```
if(i==0){
    set[count].label = (char *) malloc(sizeof(char)*(strlen(pch)+1));
    strcpy(set[count].label,pch);
} 
```

# iphone - NSError、__autoreleasing 和块

> ID：14655852
> 
> 赞同：-2
> 
> 时间：2013-02-01T22:09:10.420
> 
> 标签：iphone, ios, objective-c, ipad

我有以下代码：

```
__autoreleasing NSError *error = nil;
    __block BOOL isPaidFeed = NO;

    [[MyManager sharedInstance].tempAddedFeeds enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        [[MyManager sharedInstance] addSource:obj toPage:pageTitle error:&error];
        if(error){
            *stop = YES;
        }

    }]; 
```

然而，它给了我一个错误，我在一个块中使用 __autoreleasing。我该如何解决这个问题？不使用枚举器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:35:02.253

尝试移动`error`块内部的声明。

# ruby-on-rails-3 - Rails Jquery 如何通过 ajax 提交多个表单

> ID：14655859
> 
> 赞同：1
> 
> 时间：2013-02-01T22:09:51.107
> 
> 标签：ruby-on-rails-3, jquery, mongoid, nested-forms, has-many

我有一个带有 has_many 关联的表单，我想通过 ajax 提交多个表单，以便可以动态更新父表单的显示页面。

我有以下模型（它们在 mongoid 中，但我认为 mongoid 和 activerecord 之间并不重要）：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
  has_many :tasks
end

class Task
  include Mongoid::Document
  include Mongoid::Timestamps
  belongs_to :user, inverse_of: :tasks
end 
```

我有一个表单，它呈现表单的 n 个部分：

```
<%= form_for @task, remote: true do |f| %>
  <%= f.text_field :name %>
  <%= f.submit %>
<% end %> 
```

通过 ajax 为用户在 show.html.erb 上执行新任务。

我如何在 show.html.erb 上编写一个提交按钮来一次提交所有任务，同时将它们与父用户相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:49:12.163

基于这个问题的第二个答案： [Rails 3: How to trigger a form submit via javascript?](https://stackoverflow.com/questions/4904101/rails-3-how-to-trigger-a-form-submission-via-javascript)

假设您有一个带有 id 的按钮`#multiSubmit`，然后您可以使用以下 JavaScript 在单击它时提交每个表单：

```
$(function() {
  $("#multiSubmit").click( function() {
    $('form').each(function(i, item) {
      $(item).trigger('submit.rails');
    });
  });
}); 
```

# javascript - 根据另一个下拉列表的选定项更改下拉选定项

> ID：14655862
> 
> 赞同：0
> 
> 时间：2013-02-01T22:09:56.063
> 
> 标签：javascript, jquery, html-select

我的 ASP.NET MVC 3 上有两个下拉列表。当其中一个下拉列表设置为“Sole Proprietor”时，另一个需要设置为相同。

我确信 JavaScript 或 jQuery 对于这样的事情非常简单，但是我很难在网络上找到一个好的示例，因为我手动填充下拉列表而不是通过控制器。

有人可以帮助我编写代码或指出一个好的资源吗？

```
<select id="ProducerType" name="nmf" style="float:left;">
    <option value="Principal">Principal</option>
    <option value="Producer">Producer</option>
    <option value="SoleProprietor">Sole Proprietor</option>                
</select>

<select id="Role" name="nmf" style="float:left;">
    <option value="Agent">Agent</option>
    <option value="Financial Advisor">Financial Advisor</option>
    <option value="Platform">Platform</option>
    <option value="Principla_Owner">Principal/Owner</option>
    <option value="Registered Rep">Registered Rep</option>
    <option value="Sole Proprietor">Sole Proprietor</option>              
</select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:18:06.150

jsFiddle 示例：http: [//jsfiddle.net/9GZQ2/](http://jsfiddle.net/9GZQ2/)

我将两个下拉值都设置为`"Sole Proprietor"`您的代码在`ProducerType`选择中缺少空格

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js"></script>
<script type="text/javascript">
    $(function(){
        $("#ProducerType").change(function(){
           var value=$(this).val();
           if(value=="Sole Proprietor") $("#Role").val(value);
        });
        $("#Role").change(function(){
           var value=$(this).val();
           if(value=="Sole Proprietor") $("#ProducerType").val(value);
        });
    });
</script> 
```

# java - Java CSV 读取文件验证不起作用

> ID：14655865
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:10:05.067
> 
> 标签：java, bluej

背景：代码应该通过一个 csv 文件（第二个链接），找到用户名和密码，然后确认并显示所有信息或写入错误。但现在它只说错误。提前喝彩。

[http://pastebin.com/YBpKRKe2](http://pastebin.com/YBpKRKe2) [http://pastebin.com/9K3nwYG3](http://pastebin.com/9K3nwYG3)

```
import java.io.*;
import java.util.*;

public class CSVRead
{
    public static void main(String[] args)
    throws Exception
    {

        BufferedReader CSVFile =
            new BufferedReader(new FileReader("test123.csv"));
        int invalidvar = 1;

        Scanner input = new Scanner(System.in);
        System.out.println("Enter your email");
        String email =input.nextLine();

        System.out.println("Enter your password");
        String password =input.nextLine();

        String dataRow = CSVFile.readLine(); // Read first line.
        // The while checks to see if the data is null. If
        // it is, we've hit the end of the file. If not,
        // process the data.

        while (dataRow != null)
        {
            String[] dataArray = dataRow.split("\\t");

            if ((dataArray[0].equals(email))
            &&(dataArray[1].equals(password)))
            {
                System.out.println("You email is " +dataArray[0]+".");
                System.out.println("You password is " +dataArray[1]+".");
                System.out.println("You first name is " +dataArray[2]+".");
                System.out.println("You second name is " +dataArray[3]+".");
                System.out.println("You street name is " +dataArray[4]+".");
                System.out.println("You city name is " +dataArray[5]+".");
                System.out.println("You postcode is " +dataArray[6]+".");
            }

            else
            {
            System.out.println("Error");
            break;
            }

            dataRow = CSVFile.readLine();
        }
        // Close the file once all data has been read.
        CSVFile.close();

        // End the printout with a blank line.
        System.out.println();

    } //main()
} // CSVRead 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:45:17.160

您只检查 CSV 标头之后的第一条记录。您需要继续检查记录，直到`EOF`达到：

```
boolean found = false;
while (!found && dataRow != null) {
    String[] dataArray = dataRow.split("\\t");

    if ((dataArray[0].equals(email)) && (dataArray[1].equals(password))) {
        System.out.println("You email is " + dataArray[0] + ".");
            ...
        found = true;
    } 

    dataRow = csvFile.readLine();
}

System.out.println("Result of CSV search: " + found); 
```

* * *

*一些旁注：*

*   IO 流应该在一个`finally`块中关闭。
*   [Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)指示变量应以小写字母开头。

# linux - 如何获取 linux 中的组列表？

> ID：14655869
> 
> 赞同：0
> 
> 时间：2013-02-01T22:10:13.270
> 
> 标签：linux, permissions

在 linux 中，我想查看所有用户组。我怎样才能做到这一点？我是否正确理解了组的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:13:38.833

`cat /etc/group |cut -d: -f1`将为您提供所有组的列表。`groups`将为您提供用户所在的所有组的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:13:51.870

```
awk -F: '{print "group name ", $1, " groupid ", $3}' /etc/group 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:15:48.297

您也可以在命令行中键入不带参数的 mkgroup，或者

```
mkgroup --help 
```

更多细节。

# playframework-2.0 - 如何使用 Play 2.0 为每个环境自定义 application.conf？

> ID：14655875
> 
> 赞同：4
> 
> 时间：2013-02-01T22:10:27.023
> 
> 标签：playframework-2.0

我想为每个环境（测试、登台、产品等）设置不同的 application.conf 文件。

[这里](http://www.playframework.org/documentation/2.0/Configuration)的文档表明可以通过传递参数 -Dconfig.resource= 来完成，例如：

> 播放 -Dconfig.resource=application.test.conf 运行

但是，这似乎对我不起作用——无论我输入什么值，我仍然得到我的默认配置（application.conf）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:51:01.950

config.resource 遇到的问题的两种潜在解决方法：
1) 可以使用 -D 命令行选项覆盖特定属性，例如：

> 播放 -Ddb.default.url="mysql://myuser:mypassword@localhost/dev" 运行

2）如果您使用 config.file 属性，则覆盖配置文件有效：

> 播放 -Dconfig.file=/conf/application.test.conf 运行

这需要输入配置文件的完整路径，但至少它可以工作。

# java - 此列表迭代中的错误是什么

> ID：14655879
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:10:37.357
> 
> 标签：java, collections

您好，我编写了以下代码来迭代节点列表

```
public class RootImpl {

    private List nodes = new ArrayList<String>();

    public void processData(Object object) {

        for (String node : nodes){

        }
    }
} 
```

而且这段代码不会编译并给我一行错误： for (String node : nodes)

java：需要不兼容的类型：java.lang.String 找到：java.lang.Object

这段代码错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:12:20.980

`nodes`type 的 if字段`List`，这就是为什么编译器不知道其项目是什么类型的原因。你应该使用`List<String>`：

```
private List<String> nodes = new ArrayList<>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:12:34.353

您必须使用适当的类型定义变量：

```
 private List<String> nodes = new ArrayList<String>(); 
```

编译器无法看到`nodes`已分配的 `ArrayList<String>`，因此它将其解释为泛型`List<Object>`并发出此类错误。

# java - 获取隐藏元素的属性

> ID：14655881
> 
> 赞同：1
> 
> 时间：2013-02-01T22:10:46.827
> 
> 标签：java, testing, selenium, webdriver

我有一张我正在尝试测试的桌子。其中一列是是/否单选按钮，当页面呈现时隐藏在图像下方，以便在选择是或否时有一个复选标记或 X。

选择是时单选按钮的属性`checked="true"`。

我如何`Selenium2`获取该属性以便我可以比较它或对它做出断言？

我尝试了以下方法，这只会导致空指针错误。

```
private void verifyPOEligibleYesNull(String driverName)
{
    int min = 1;
    int max = 6;
    JavascriptExecutor js = (JavascriptExecutor)driver;
    StringBuilder stringBuilder = new StringBuilder();
    //Navigate to System Facing
    driver = browser.getDriver(driverName);
    driver.manage().window().maximize();
    driver.navigate().to("http://theURL");

    //Enter userName
    WebElement userName = driver.findElement(By.id("username"));
    userName.clear();
    userName.sendKeys(user);

    //Enter Password
    WebElement password = driver.findElement(By.id("pword"));
    password.clear();
    password.sendKeys(pwd);

    //Click Login
    WebElement loginBtn = driver.findElement(By.xpath("/html/body/div/div/form/div[3]/div/input"));
    loginBtn.click();
    try 
    {
        Thread.sleep(5000);
    } 
    catch (InterruptedException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    WebElement ivToPoBtn = driver.findElement(By.xpath("/html/body/div/div/div/ul/li/a/img"));
    ivToPoBtn.click();
    try 
    {
        Thread.sleep(5000);
    } 
    catch (InterruptedException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //Grab a random row and determine whether the PO Eligible is "Yes"
    String rowNum = Integer.toString(rand.nextInt(max - min + 1) + min);
    WebElement randomRow = driver.findElement(By.xpath("/html/body/div/div/div/div/form/div/div[2]/div/div[2]/div/div/div/div/div/div/div/table/tbody/tr["+rowNum+"]/td/div/div/input")); 
    String poEligibleChecked = randomRow.getAttribute("checked").toString();
    stringBuilder.append("var x = $(\""+poEligibleChecked+"\");");
    stringBuilder.append("return x.toString();");
    String res  = (String) js.executeScript(stringBuilder.toString());
    System.out.println(res);    
} 
```

我什至尝试了[WebDriver FAQ](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q%3a_Why_is_it_not_possible_to_interact_with_hidden_elements?)中建议的以下内容：

```
 WebElement randomRow = driver.findElement(By.xpath("/html/body/div/div/div/div/form/div/div[2]/div/div[2]/div/div/div/div/div/div/div/table/tbody/tr["+rowNum+"]/td/div/div/input")); 
    String poEligibleChecked = randomRow.getAttribute("checked");
    String element = js.executeScript("return arguments[0].getText();", poEligibleChecked).toString();
    System.out.println(element); 
```

与类似的空指针异常错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T07:43:38.487

你的代码真的没有意义。为了获取`checked`不可见元素的属性，只需使用[`element.getAttribute()`](https://developer.mozilla.org/en-US/docs/DOM/element.getAttribute)：

```
final String scriptGetChecked = "return arguments[0].getAttribute('checked')";

WebElement randomRow = driver.findElement(By.whatever("something"));
String checkedState = (String) js.executeScript(scriptGetChecked, randomRow); 
```

# c# - 将 ASP.Net 应用程序从 Web 连接到我计算机上的我的 sql 数据库

> ID：14655884
> 
> 赞同：0
> 
> 时间：2013-02-01T22:10:57.667
> 
> 标签：c#, asp.net, sql, sql-server

我正在创建两个应用程序：一个 ASP.Net 应用程序和一个 C# 应用程序。我使用 SQL Server 作为数据库。我的 ASP.Net 应用程序应该连接到 Internet，但数据库应该只在我的计算机上。我使用 connectionString 将我的两个应用程序连接到一个数据库 (SQL) 中。有没有办法将我的 ASP.Net 应用程序从 Web 连接到我计算机上的 SQL 数据库？

我已经阅读了很多教程，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:26:31.797

这是我的解决方案：

1.  确保您拥有由 ISP 分配的静态 IP 地址。
2.  确保在计算机中分配静态 IP 地址。
3.  现在，使用“端口转发”技术。将您的路由器配置为将数据包从端口 1433 转发到您的计算机。
4.  接下来要做的是配置或修改部署在网络外部（在托管公司中）的 web.config（ASP.NET 文件），并确保 connectionString 的数据源如下所示： connectionString="data source=214.23.12.21（其中 214.23.12.21 是您的 ISP 分配给您的静态公共 IP）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:15:17.847

普通 SQL Server 对 Web 应用程序来说是本地的（它要么位于同一个 LAN 上，有时甚至位于同一台机器上）。

从技术上讲，可以将 ASP.NET 应用程序连接到远程 SQL 服务器，但不建议这样做，您可以在那里打开一罐蠕虫（防火墙、端口、性能等问题）

# orm - Laravel 4 Eloquent ORM：虚拟表/视图 - 有可能吗？

> ID：14655894
> 
> 赞同：2
> 
> 时间：2013-02-01T22:11:49.770
> 
> 标签：orm, laravel, eloquent, laravel-4

我有一个表事件，我在其中记录不同类型的事件，例如登录、注册等。这是基于`type`列的。

我想为每种事件类型提供不同的模型（或任何其他合适的解决方案），例如`EventLogin`. 因此，看起来我对每种事件类型都有不同的“表”，即使它们保存在同一个表中。

**编辑：**当然，我不想每次都去想它，即我想做`EventLogin->where("user_id", "=", $user->id)`而不必担心记住做`->where("type", "=", "login")`。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T12:34:43.720

认为这会让您感兴趣：

[http://vimeo.com/53183075](http://vimeo.com/53183075)（morphMany() / morphTo() 在 7'00 附近使用）

否则，@TheShiftExchange 是对的，我支持他。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T09:51:52.943

> 是否可以？

是的。

只是有不同的模型文件。您需要设置表名，因为您的模型名称不会相同：

```
protected $table = 'your_table'; 
```

否则它将像普通表一样工作。

您可以将相同的原则应用于表单。与其为每个表设置一个模型，不如为每个表单设置一个模型 - 并将所有表单逻辑保存在一个位置。

# c# - 从 URL 中解析类似的命名参数

> ID：14655899
> 
> 赞同：0
> 
> 时间：2013-02-01T22:12:18.053
> 
> 标签：c#, asp.net, .net, url, parameters

我正在使用如下所示的 URL：

some_site.com/full/path/page.aspx？**标签[0]** =a_value&**标签[1]** =b_value&**标签[2]** =c_value

生成索引号，因此每次都有这些“标签[x]”值的动态数量。

在 ASP/C#.NET 4.0 中将这些全部解析为名为“Label”的 String[] 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:19:25.193

您应该使用一个`NameValueCollection`而不是字符串数组。

```
NameValueCollection queryParameters = new NameValueCollection();
string[] querySegments = queryString.Split('&');
foreach(string segment in querySegments)
{
   string[] parts = segment.Split('=');
   if (parts.Length > 0)
   {
      string key = parts[0].Trim(new char[] { '?', ' ' });
      string val = parts[1].Trim();

      queryParameters.Add(key, val);
   }
} 
```

要获取带有方括号的标签编号，请使用`Regular Expressions`.

```
regxObj = new Regex(@"\[(.*?)\]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:18:28.267

您是否考虑过枚举 Request.Querystring 集合中的条目？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:29:21.933

您可以从“？”的索引中获取子字符串开始。到最后，然后用'&'分隔。

然后，您可以遍历该列表并按“=”拆分并获取第二个元素，或者从“=”的索引之后开始的每个元素的子字符串。

如果出于某种原因您确实希望它只是字符串数组，那么这一行*可能会*起作用。

```
String[] labels = (from substring in s.Substring(s.IndexOf('?') + 1).Split('&') select substring.Substring(substring.IndexOf('=') + 1)).ToArray(); 
```

编辑：请注意，这无视实际标签是什么，以及它们的数字；如果除了命名的、编号的`label[n]`标签之外还有其他东西，它们也会被添加到数组中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T22:15:07.173

制作一个名为length的参数

```
 some_site.com/full/path/page.aspx?length=4&label[0]=a_value&label[1]=b_value&label[2]=c_value... 
```

那么这将很容易在另一边解析已经知道长度

如果你知道长度，那么你就知道循环遍历多少次来读取查询字符串的值

-或者-

没有可变数量的参数，使用一个，并使用任何特殊字符来分隔它们，然后用另一侧的分隔字符分割值

# java - 在不涉及计算的情况下比较两个双精度值是否相等

> ID：14655901
> 
> 赞同：1
> 
> 时间：2013-02-01T22:12:24.690
> 
> 标签：java

我知道在涉及一些计算之后直接比较两个双精度值并不能保存。但是我可以**安全地**比较从文字初始化的值与用于初始化的相同文字的相等性吗？

例如：

```
Double[] dValues = [...];
double minValue = Double.MAX_VALUE;
for(Double d:dValues) {
  if(d!=null)
    minValue = Math.min(d,minValue)
}

//Is that safe?
boolean someValueFound = minValue!=Double.MAX_VALUE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:14:43.027

是的，在这种情况下它将是安全的。

只要您不执行任何计算/转换/等，它总是安全的。在受影响的值上 - 这可能会导致一些舍入。

这也是安全的，因为比较发生在原生/简单类型上，如果使用 Double 而不是 double，结果会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:16:40.103

它的保存。唯一的问题是计算操作时`Float`的`Double`舍入。

如果您想比较这样的计算值，请允许有一点增量差异。

# c - 简单的 C 古怪

> ID：14655909
> 
> 赞同：1
> 
> 时间：2013-02-01T22:12:38.543
> 
> 标签：c

这一点点 C 代码让我发疯。它要求输入电压，但随后它跳过电阻 1 并要求电阻 2。我在这里遗漏了一些非常明显的东西......到底发生了什么......

```
#include <stdio.h>
int main() 
{
    float Vin;
    int R1;  
    int R2;

    printf("Input Voltage: ");
    scanf("%.3f", &Vin);

    printf("\nResistor 1: ");
    scanf("%d", &R1);

    printf("\nResistor 2: ");
    scanf("%d", &R2);

    return(0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T22:18:08.917

删除`.3`部分：

```
scanf("%f", &Vin); 
```

为输入配置十进制位数并没有真正意义:) 因此，`scanf`不支持它。A`float`总是有 8 个十进制数字。提高编译器的警告级别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T22:18:52.693

如果您打开`-Wall`编译器，您会收到以下警告：

> 警告：未知转换类型字符“。” 格式为 [-Wformat]
> 
> 警告：格式参数过多 [-Wformat-extra-args]

因此，只需从 .3 中删除 .3 即可`scanf`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T22:17:07.157

使用简单的 %f。这是示例：

```
printf("Input Voltage: ");
scanf("%f", &Vin);

printf("\nResistor 1: ");
scanf("%d", &R1);

printf("\nResistor 2: ");
scanf("%d", &R2); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T22:19:21.580

在这里从臀部射击-我的直觉说，第一个`scanf`是您的输入字符串“满意”，还有输入，第二个`scanf`是将所有内容都添加到换行符。

尝试替换第一个格式字符串，`"%f"`看看它是否仍然发生。或者，当您看到愚蠢的行为时，打印出电压和 R1 的值。无论如何，在阅读后担心舍入/截断电压输入可能会更好。

# java - Java 8 中“函数式接口”的精确定义

> ID：14655913
> 
> 赞同：78
> 
> 时间：2013-02-01T22:12:48.863
> 
> 标签：java, lambda, java-8, abstract, functional-interface

最近我开始探索 Java 8，我不太了解 Java 实现 lambda 表达式所必需的“函数式接口”的概念。在 Java 中有一个[非常全面](http://www.lambdafaq.org/)的 lambda 函数指南，但我卡在[了定义函数接口概念的那一章](http://www.lambdafaq.org/what-is-a-functional-interface/)。定义如下：

> 更准确地说，函数式接口被定义为只有一个抽象方法的任何接口。

然后他继续举例，其中一个是`Comparator`接口：

> ```
> public interface Comparator<T> {
>     int compare(T o1, T o2);
>     boolean equals(Object obj);
> } 
> ```

我能够测试我可以使用 lambda 函数代替 Comparator 参数并且它可以工作（即`Collections.sort(list, (a, b) -> a-b)`）。

但是在 Comparator 接口中，方法`compare`和`equals`方法都是抽象的，这意味着它有**两个抽象方法**。**那么，如果定义需要一个接口只有一个抽象方法**，这怎么能工作呢？我在这里想念什么？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-01T22:25:14.783

From the [same page you linked to](http://www.lambdafaq.org/what-is-a-functional-interface/):

> The interface Comparator is functional because although it declares two abstract methods, one of these—equals— has a signature corresponding to a public method in Object. Interfaces always declare abstract methods corresponding to the public methods of Object, but they usually do so implicitly. Whether implicitly or explicitly declared, such methods are excluded from the count.

I can't really say it better.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-23T09:54:49.367

[@FunctionalInterface 页面](https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html)中给出了另一种解释：

> 从概念上讲，函数式接口只有一个抽象方法。由于默认方法有一个实现，它们不是抽象的。**如果一个接口声明了一个覆盖 的公共方法之一的抽象方法`java.lang.Object`，那么这也不会计入接口的抽象方法计数，因为该接口的任何实现都将具有来自`java.lang.Object`或其他地方的实现。**

您可以使用 测试哪个接口是正确的**功能接口****`@FunctionalInterface`**。

例如：

*   这行得通

    ```
    @FunctionalInterface
    public interface FunctionalInterf {

        void m();

        boolean equals(Object o);

    } 
    ```

*   这会产生一个错误：

    ```
    @FunctionalInterface
    public interface FunctionalInterf {

        void m();

        boolean equals();

    } 
    ```

    > 在接口 FunctionalInterf 中找到多个非覆盖抽象方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-20T11:10:35.380

Q. 但是在 Comparator 接口中 compare() 和 equals() 方法都是抽象的，这意味着它有两个抽象方法。那么，如果定义要求一个接口只有一个抽象方法，这怎么能工作呢？我在这里想念什么？

一个。

> 功能接口可以指定 Object 定义的任何公共方法，例如 equals()，而不会影响其“功能接口”状态。公共 Object 方法被认为是功能接口的隐式成员，因为它们由功能接口的实例自动实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-03T12:16:28.867

**一个函数式接口只有一个抽象方法，但它可以有多个默认方法和静态方法。**

由于默认方法不是抽象的，因此您可以随意将默认方法添加到您的功能接口中。

```
@FunctionalInterface
public interface MyFuctionalInterface 
{
public void perform();

default void perform1(){
//Method body
}

default void perform2(){
//Method body
}
} 
```

如果一个接口声明了一个覆盖 的公共方法之一的抽象方法`java.lang.Object`，那么这也不会计入接口的抽象方法计数，因为该接口的任何实现都将具有来自`java.lang.Object`或其他地方的实现。

**Comparator**是一个函数式接口，尽管它声明了两个抽象方法。因为这些抽象方法之一“<code>equals()”的签名等于 Object 类中的公共方法。例如下面的接口是一个有效的功能接口。

```
@FunctionalInterface
    public interface MyFuctionalInterface 
    {
    public void perform();

    @Override
    public String toString();                //Overridden from Object class

    @Override
    public boolean equals(Object obj);        //Overridden from Object class
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-29T15:08:52.893

接口不能扩展 Object 类，因为接口必须具有公共和抽象方法。

对于 Object 类中的每个公共方法，接口中都有一个隐式公共和抽象方法。

这是标准的 Java 语言规范，它是这样声明的，

> “如果一个接口没有直接的超接口，那么该接口隐式声明一个公共抽象成员方法 m，其签名为 s，返回类型为 r，并且 throws 子句 t 对应于每个签名为 s、返回类型为 r 和 throws 的公共实例方法 m子句 t 在 Object 中声明，除非接口显式声明了具有相同签名、相同返回类型和兼容 throws 子句的方法。”</p>

这就是在接口中声明 Object 类的方法的方式。根据 JLS，这不算作接口的抽象方法。因此，比较器接口是一个功能接口。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-01T22:19:54.257

Java 文档说：

> 请注意，不要覆盖 Object.equals(Object) 始终是安全的。但是，在某些情况下，重写此方法可能会通过允许程序确定两个不同的比较器施加相同的顺序来提高性能。

也许比较器很特别？也许，即使它是一个接口，也有某种`equals()`调用的默认实现`compare()`？从算法上讲，这是微不足道的。

我认为接口中声明的所有方法都是抽象的（即没有默认实现）。但也许我错过了一些东西。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-12-06T13:24:55.593

**定义：**

如果一个接口只包含一个抽象方法，那么这种类型的接口称为功能接口。

**用法：**

1.  一旦我们编写了 Lambda 表达式“->”来调用它的功能，那么在这种情况下我们需要功能接口。
2.  我们可以使用功能接口引用来引用 Lambda 表达式。
3.  在函数式接口内部，我们可以有一个抽象方法和 n 个默认/静态方法。

**关于继承的功能接口：**

如果一个接口继承了Functional接口，而子接口不包含任何抽象方法，那么子接口也被认为是Functional Interface。

**函数式接口对 java 来说并不新鲜，它已经在以下接口 API 中使用：**

1.  Runnable ：仅包含 run() 方法。
2.  Callable ：仅包含 call() 方法。
3.  Comparable ：仅包含 compareTo() 方法。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-08-11T17:16:46.147

在 Java 8 之前，接口只能声明一个或多个方法，也称为抽象方法（没有实现的方法，只有签名）。从 Java 8 开始，接口还可以实现一个或多个方法（称为接口默认方法）和静态方法以及抽象方法。接口默认方法被标记为默认关键字。

那么问题来了，什么是功能接口？具有单一抽象方法 (SAM) 的接口称为功能接口。

意思是 -

1.  具有单一抽象方法的接口是功能接口
2.  具有单一抽象方法和零个或多个默认方法以及零个或多个静态方法的接口也是有效的功能接口。

示例代码的更多详细信息[https://readtorakesh.com/functional-interface-java8/](https://readtorakesh.com/functional-interface-java8/)

# javascript - JavaScript drawImage（）不起作用

> ID：14655914
> 
> 赞同：0
> 
> 时间：2013-02-01T22:12:50.633
> 
> 标签：javascript, jquery, html, canvas

进入 JS 游戏开发，但遇到了一个小问题。图像不会绘制。它加载正常，控制台中没有错误，但它不会显示。我错过了什么？

**JS**

```
var Game = {
characterSpeed: 2,
characterHorizontalSpeed: this.characterSpeed,
characterVerticalSpeed: this.characterSpeed,
characterX: 400,
characterY: 500,
mouseX: 0,
mouseY: 0,
gameRunning: false,
debug: true,
characterImg: '',
context: '',

init: function() {
    $('#game').mousemove(function(event) {
        Game.mouseX = event.pageX;
        Game.mouseY = event.pageY;
    });

    Game.context = document.getElementById('game').getContext('2d');

    Game.loadImages();
    Game.game();
},

loadImages: function() {
    Game.characterImg = new Image;
    Game.characterImg.src = 'images/character.png';

    Game.characterImg.onload = function() {
        Game.context.drawImage(Game.characterImg, 400, 500);
    }
},
}

$(function() {
Game.init();
}); 
```

**HTML**

```
 <div id="inner">
        <canvas id="game" style="background: white; width: 800px; height: 500px;"></canvas>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:32:21.953

您需要在样式中设置画布大小`width`和`height`不在样式中的属性。

```
<div id="inner">
    <canvas id="game" width="800" height="500"></canvas>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:40:30.487

尝试在最后设置 src 属性，所以在 onload 之后。

```
loadImages: function() {

    Game.characterImg = new Image();

    Game.characterImg.onload = function() {
        Game.context.drawImage(Game.characterImg, 400, 500);
    }

    Game.characterImg.src = 'images/character.png';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:44:41.657

图像可能在您的缓存中，因此当您设置 onload 事件时，图像已经加载，因此不会调用 onload。只需颠倒顺序，如下所示：

```
Game.characterImg.onload = function() {
      Game.context.drawImage(Game.characterImg, 400, 500);
   }
Game.characterImg.src = 'images/character.png'; 
```

# java - 停止媒体播放器

> ID：14655916
> 
> 赞同：1
> 
> 时间：2013-02-01T22:12:56.257
> 
> 标签：java, android, media-player

我制作了一个 android 应用程序，您可以在其中单击按钮来播放声音。每次，您单击按钮，都会创建一个新的 MediaPlayer，问题是，当您在另一个声音仍在播放期间按下按钮时，它们正在同时播放，但我希望，当您按下按钮。我已经尝试过这段代码，但每次按下按钮时我的应用程序都会崩溃：

```
MediaPlayer mp;
Button button;

button = (Button) findViewById(R.id.button);

button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(mp.isPlaying()){

                mp.stop();

            }

            mp = MediaPlayer.create(getApplicationContext(), R.raw.sound);
            mp.start();

        }}); 
```

有没有办法解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:15:24.787

它可能会崩溃，因为 'mp' 未初始化。尝试这个：

```
 @Override
    public void onClick(View v) {
        //if mp exists and is playing...
        if(mp != null && mp.isPlaying()){

            mp.stop();

        }

        mp = MediaPlayer.create(getApplicationContext(), R.raw.sound);
        mp.start();

    }}); 
```

**编辑**您还可以通过在顶部声明'mp'时初始化'mp'来避免检查null。

例如，而不是检查是否 mp != null。将您的“mp”声明更改为：

```
MediaPlayer mp; 
```

至

```
MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.sound); 
```

您的 onclick 方法可能如下所示：

```
public void onClick(View v) {

    if(mp.isPlaying()) {
        mp.stop();
    }

    //start mp from beginning

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T22:44:20.693

似乎启动过多的 MediaPlayer 并不好，因为当我点击几次声音时，应用程序崩溃了。我已经将 mp.start 更改为 mp.reset 并发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-28T07:12:48.727

# 笔记

*   您必须在创建新播放器之前释放播放器
*   我不会赌 isPlaying() 检查来阻止玩家；因为你不需要它释放它！

# 代码

```
 @Override
    public void onClick(View v) {

       if(mp != null) { 
           mp.release(); 
       }
       mp = MediaPlayer.create(getApplicationContext(), R.raw.sound);
       mp.start();

    }}); 
```

# sencha-touch-2 - Sencha Touch 2 带有工具栏的轮播？

> ID：14655917
> 
> 赞同：0
> 
> 时间：2013-02-01T22:13:15.323
> 
> 标签：sencha-touch-2, carousel

嗨，我如何使用工具栏创建轮播，希望可以选择点击以切换视图并滑动以切换视图，这是我的代码，当我运行此代码时，工具栏中的 xtypes 未显示在工具栏中?

谢谢

```
Ext.define("NF.view.tablet.MainH", {
   extend: 'Ext.tab.Panel',
   requires: ['Ext.TitleBar'],

   config: {
   tabBar: {
      hidden: true},    

    items: [

    {
        xtype : 'toolbar',
        docked: 'top',
        title: '',
        layout:'hbox',
        items:[ 

               {xtype: 'home'} ,
               {xtype:'tablet-placesContainer'},
                {xtype:'tablet-About'},
               {text: 'contact'},
               { xtype: 'contactpage'},
                {xtype: 'home3'} ,
               ],

    },  

    {
    xtype:'carousel',
    layout:'fit',
    iconCls: 'home',
        items:[

        {xtype: 'home'} ,

        {xtype:'tablet-placesContainer'},

        {xtype:'tablet-About'},

        {xtype: 'gallery'},

        { xtype: 'contactpage'},

        {xtype: 'home3'} ,

        ]
   }]
   } 
```

});

```
 When I run this the toolbar info is not showing up. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:42:26.773

我可能误解了你的问题，但也许你最好的选择是

1）使每个工具栏项成为一个简单的按钮，带有html作为轮播项的名称

2) 给轮播命名

3) 为每个设置正确活动项的工具栏项设置一个点击事件：

```
Ext.define("NF.view.tablet.MainH", {
   extend: 'Ext.tab.Panel',
   requires: ['Ext.TitleBar'],

   config: {
   tabBar: {
      hidden: true},    

items: [

{
    xtype : 'toolbar',
    docked: 'top',
    title: '',
    layout:'hbox',
    items:[ 

           {xtype:'button',text: 'home', handler:function(){Ext.getCmp('carousel_name').setActiveItem(0)}} ,
           {xtype:'button',text: 'places', handler:function(){Ext.getCmp('carousel_name').setActiveItem(1)}} ,
           ],

},  

{
xtype:'carousel',
id:'carousel_name',
layout:'fit',
iconCls: 'home',
    items:[

    {xtype: 'home'} ,

    {xtype:'tablet-placesContainer'},

    {xtype:'tablet-About'},

    {xtype: 'gallery'},

    { xtype: 'contactpage'},

    {xtype: 'home3'} ,

    ] 
```

}] }

# event-handling - OpenLayers 中某个功能的 Clickhandler

> ID：14655922
> 
> 赞同：0
> 
> 时间：2013-02-01T22:13:39.043
> 
> 标签：event-handling, click, openlayers

我正在尝试在 openlayers 的弹出窗口上有一个点击事件。现在我正在使用该功能中的硬编码 onclick 进行操作：

```
 var vector = new OpenLayers.Layer.Vector("Points",{
            eventListeners:{
                'featureselected':function(evt){
                    var feature = evt.feature;
                    var popup = new OpenLayers.Popup.Anchored("popup",
                        OpenLayers.LonLat.fromString(feature.geometry.toShortString()),
                        new OpenLayers.Size(275,71),
                        '<div id="pincontent" onclick="pindetails()"><h3>' + feature.attributes.title +'</h3><div style="display: none;" id="pindescription">'+  feature.attributes.content +'</div></div>',
                        null,
                        false
                    );
                    popup.imageSrc = 'img/popup.png';
                    popup.autoSize = false;
                    popup.backgroundColor = 'transparent';
                    var offset = {'size':new OpenLayers.Size(0,0),'offset':new OpenLayers.Pixel(-74,-10)};
                    popup.anchor = offset;
                    popup.panMapIfOutOfView = true;
                    popup.imageSize = new OpenLayers.Size(275,71);
                    popup.relativePosition = "br";
                    popup.calculateRelativePosition = function () {
                         return 'tr';
                    };
                    feature.popup = popup;
                    map.addPopup(popup);
     //adding event listener
                    map.events.register('mousedown', popup, function(evt){alert('help')}, false);
                },
                'featureunselected':function(evt){
                    var feature = evt.feature;
                    map.removePopup(feature.popup);
                    feature.popup.destroy();
                    feature.popup = null;
                }

            }
        }); 
```

但是主要的 OpenLayers div 正在拦截点击，所以我必须点击两次。我不确定是否有办法禁用它。我查看了 openLayers 文档，但不确定如何使用他们的 API 添加事件侦听器以单击功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:32:27.317

也许您应该`return false;`在 onclick 中的函数调用之后添加以停止事件传播（这是默认设置）。也看看注册方法：

```
this.map.events.register('click', this.map, function handleMapClick(e) { ... } 
```

[http://dev.openlayers.org/releases/OpenLayers-2.6/doc/apidocs/files/OpenLayers/Events-js.html#OpenLayers.Events.register](http://dev.openlayers.org/releases/OpenLayers-2.6/doc/apidocs/files/OpenLayers/Events-js.html#OpenLayers.Events.register)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-16T15:18:08.200

似乎这`evt.stopPropagation();`行不通。但是`return true;`在`singleclick`事件处理程序中使用可以阻止`Event-Propagation`向下渗透到级联层。

# java - 如何在java中序列化/反序列化对象列表？

> ID：14655926
> 
> 赞同：0
> 
> 时间：2013-02-01T22:13:50.243
> 
> 标签：java, class, serialization, deserialization

如何在 Java 中序列化 Serializable 类的许多对象？

例如

```
public class Personne implements java.io.Serializable {

    String nom;
    String date;

    Personne(String nom,String date)
    {
        this.nom=nom;
        this.date=date;
    }
} 
```

我想创建很多对象：

```
Personne p1 = new  Personne("X","XX");
Personne p2 = new  Personne("Y","ZZ");
Personne p3 = new  Personne("Z","ZZ"); 
```

--> 序列化这些对象的静态函数

--> 静态函数反序列化

完整代码：

```
package game2;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

/**
 * 
 * @author ahmedJ
 */
public class Personne implements java.io.Serializable {

    String nom;
    String date;

    Personne(String nom, String date) {
        this.nom = nom;
        this.date = date;
    }

    public static void Serialiser(Personne sp) {

        try {
            ObjectOutputStream out = new ObjectOutputStream(
                    new FileOutputStream("Score.sp"));
            out.writeObject(sp);
            out.flush();
            out.close();
        } catch (java.io.IOException e) {
            e.printStackTrace();
        }
    }

    public static void Deserialiser() {

        Personne a1, a2, a3;
        try {
            FileInputStream file = new FileInputStream("Score.sp");
            ObjectInputStream in = new ObjectInputStream(file);
            a1 = (Personne) in.readObject();
            a2 = (Personne) in.readObject();
            a3 = (Personne) in.readObject();

            System.out.println(a1.nom);
            System.out.println(a2.nom);
            System.out.println(a3.nom);

            in.close();
            file.close();
        } catch (Exception ex) {
            System.err.println("Erreur de lecture " + ex);
        }

    }

    public static void main(String[] sd) {
        Personne p1 = new Personne("X", "XX");
        Personne p2 = new Personne("Y", "ZZ");
        Personne p3 = new Personne("Z", "ZZ");

        Serialiser(p1);
        Serialiser(p2);
        Serialiser(p3);

        Deserialiser();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T22:18:29.980

使用[ObjectOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)写入，使用[ObjectInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html)读取。非常简单并且有效：

```
 ObjectOutputStream out = new ObjectOutputStream(myFileOutputStream);
  out.writeObject(p1);
  out.writeObject(p2);
  out.writeObject(p3);
  out.close();
  ....
  ObjectInputStream in = new ObjectInputStream(myFileInputStream);
  p1 = (Personne) in.readObject();
  p2 = (Personne) in.readObject();
  p3 = (Personne) in.readObject(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:21:58.107

You could add a static method to Personne like so.

```
public class Personne implements Serializable{
//Other stuff here
    public static void writePersonne(ObjectOutputStream out,Personne p){
        try{
          out.writeObject(p);
          out.flush();
        }catch(Exception e){
           e.printStackTrace();
        }
    }
    public static Personne readPersonne(ObjectInputStream in){
        try{
          return (Personne)in.readObject();
        }catch(Exception e){
           e.printStackTrace();
        }
    } 
```

You would just iterate over an array or a collection of some sort and write each one and on the other side read them in.

# pam - pam_exec 和安全

> ID：14655929
> 
> 赞同：0
> 
> 时间：2013-02-01T22:14:10.557
> 
> 标签：pam

我真的很想`pam_exec`在会话期间使用 PAM 模块进行一些帐户设置和拆卸活动。我编写了一个简单的测试脚本，它运行并记录一些运行时数据，以便我可以看到正在发生的事情。

在我看来，exec'd 脚本必须可由运行触发 PAM 的命令的任何人的有效 UID 执行。这是有道理的。但是，我希望在这个过程中更加安全。例如，在我看来，如果我有一个脚本可以在帐户登录/注销时将记录插入数据库，那么该脚本必须始终由所有用户执行。

我更希望脚本只能由 root 或其他一些特殊用途的帐户可见和可执行，并`pam_exec` `suid`为非特权用户提供脚本。

为什么？在数据库脚本的情况下，我不希望用户登录然后手动执行脚本以看似“注销”。

我曾考虑尝试将脚本放在“sudoers”文件中，但这仍然使任何人都可以随时运行它。

似乎唯一的选择是破解 pam_exec 以允许“运行方式”选项。

星期五下午很晚了，我可能错过了一些琐碎的事情。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T22:54:41.687

> 在我看来，exec'd 脚本必须可由运行触发 PAM 的命令的任何人的有效 UID 执行。这是有道理的。

听起来您正在“会话”行下运行 pam_exec。如果您从“auth”运行 pam_exec 脚本，它将由 root 用户 (UID 0) 运行，因此用户不再需要执行它。这样，用户将无法手动运行脚本来欺骗注销。

您可能还可以从“帐户”行运行您的脚本，我相信只有当它执行 pam_open_session() 或 pam_close_session() 时才使用用户权限执行 pam 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:36:06.447

我不完全确定我理解这个问题。如果您正在跟踪用户登录会话，那是由以 root 身份运行的进程设置的（无论是 sshd 还是 login 或其他类似程序）。PAM 堆栈通常都通过打开会话以 root 身份运行。我不完全确定 UID 在会话创建过程中的哪个位置被永久更改，但在这个过程中已经相当晚了，因为写入 utmp 等，都必须以 root 身份完成。

因此，您不太可能在正常登录会话中遇到此问题。非 root 用户使用 PAM 的主要地方是代表用户运行的屏幕保护程序之类的东西，但这似乎正是您不希望用户运行脚本的情况。

如果您尝试将某些内容作为 sudo 或 su 的一部分运行，则问题可能是`pam_exec`默认情况下将程序作为真实用户 ID 运行。在这些情况下，我认为您可能需要将程序作为有效用户 ID 运行才能完成您想要的操作。有一个`seteuid`PAM 选项可以`pam_exec`告诉`pam_exec`您这样做。

# asp.net-mvc-4 - 基本类型的 ASP.NET MVC 4 编辑器模板

> ID：14655930
> 
> 赞同：45
> 
> 时间：2013-02-01T22:14:11.717
> 
> 标签：asp.net-mvc-4, mvc-editor-templates

我已经为数字输入创建了一个模板，如果我这样做了

```
@Html.EditorFor(model => model.SomeValue, "Number") 
```

它工作正常并且使用了模板。

然而这不起作用：

```
@Html.EditorFor(model => model.SomeValue) 
```

为什么我需要为基本类型指定编辑器模板的名称？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-02-02T22:49:31.730

编辑器模板按惯例工作。模板的名称必须与类型的名称匹配。因此，例如，如果`SomeValue`是一种`int`类型，您可以编写一个`~/Views/Shared/EditorTemplates/Int32.cshtml`将使用的自定义编辑器模板。在这种情况下，所有整数类型都将在您编写时使用此自定义模板`@Html.EditorFor(model => model.SomeValue)`。

如果您不想覆盖整数类型的所有模板，您可以编写一个特定的命名模板`~/Views/Shared/EditorTemplates/Number.cshtml`，您可以通过将此模板名称指定为`EditorFor`助手的第二个参数来仅用于某些属性：`@Html.EditorFor(model => model.SomeValue, "Number")`或者通过使用属性装饰您的视图模型`[UIHint]`属性：

```
[UIHint("Number")]
public int SomeValue { get; set; } 
```

然后简单地使用`@Html.EditorFor(model => model.SomeValue)`将呈现`Number.cshtml`自定义模板。

我还建议您阅读 Brad Wilson[`blog post`](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-3-default-templates.html)关于 ASP.NET MVC 中的默认模板的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T15:34:54.197

在您的编辑器模板中，您必须具有相同的类型 Example ：

model.SomeValue 是 loremIpsumObject 的类型

在您的 EditorTemplate 中，您是：

```
 @model YourNamespaceWhereIsYourClass.loremIpsumObject
  ...And your code in your editorTemplate.... 
```

[您可以在此处](http://geekswithblogs.net/michelotti/archive/2010/02/05/mvc-2-editor-template-with-datetime.aspx)找到日期时间的示例

它对你有帮助吗？

# jquery - jQuery中的闭环

> ID：14655933
> 
> 赞同：1
> 
> 时间：2013-02-01T22:14:21.150
> 
> 标签：jquery, closures

没有回调函数[jsFiddle](http://jsfiddle.net/xspG6/44/)的那个会产生错误的结果。控制台日志应显示 i=0 & j=0，如“group[0] record[0]”所示。因为我试图找到 dd/dt 集：“书：书名”。

我知道我需要包含一个类似于[这篇文章](https://stackoverflow.com/questions/1562127/jquery-callback-function-only-working-on-last-loop)的回调函数。但是我似乎不明白如何正确插入函数。这是我正在研究的一个：

[带有回调的jsfiddle](http://jsfiddle.net/kFsa5/8/)

```
var arrDL = [];
$("dl").each(function(i) {     
   arrDL[i] = [];
   $(this).children("dt").each(function(j){ 
       function(n){
            return function(){
                var $this = $(this); 

                arrDL[n][j] = {
                   title: $this.text(),
                   description: $this.next("dd").text()
                };

                if($this.text() == "Book:" && $this.next("dd").text() == "another book name"){
                   console.log("group 0 record 0: " + n + '-' + j);
                };
           };    
      }(n);               
  });    
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:23:22.260

您正在函数内部（在 inner 的回调内部`each`）创建一个函数并返回它。您正在执行外部函数，但它返回一个您不执行的函数引用，因此内部函数内的代码将永远不会运行。

此外，您将变量发送`n`到外部函数中，但它从未在任何地方定义，所以它只是`undefined`.

实际上不需要外部或内部函数，只需将代码放在回调中即可`each`：

```
var arrDL = [];
$("dl").each(function(i) {     
  arrDL[i] = [];
  $(this).children("dt").each(function(j){ 
    var $this = $(this);
    arrDL[i][j] = {
      title: $this.text(),
      description: $this.next("dd").text()
    };
    if($this.text() == "Book:" && $this.next("dd").text() == "another book name"){
      console.log("group 0 record 0: " + i + '-' + j);
    };
  });    
}); 
```

你得到的结果是正确的，描述“另一个书名”是在第二组中找到的，而不是在第一组中。

# ruby-on-rails - Elasticsearch:Tire - 如果字段丢失，把它放在最后

> ID：14655935
> 
> 赞同：0
> 
> 时间：2013-02-01T22:14:23.200
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我正在使用 rails 和搜索我正在使用 Tire 和 elasticsearch。我有一个字符串类型字段，在某些记录中具有值，在某些记录中为零。

我想排序并显示最后，所有在该字段中具有空值的记录。正如我在当前版本的本期[https://github.com/elasticsearch/elasticsearch/issues/896](https://github.com/elasticsearch/elasticsearch/issues/896)中看到的，这无法通过排序和弹性搜索实现。

有没有使用rails的解决方法？我正在尝试使用两个搜索并使用如下示例的过滤器来做到这一点：

```
 filter :not, :missing => { :field => :video_url } if params[:video].present?
    filter :missing, { :field => :video_url } if params[:video].blank? 
```

但是它没有用（直到现在我才明白为什么，我会继续调试）。

另一个想法是创建两个具有特定字段的方法。还有其他解决方案/想法吗？

**2013 年 2 月 2 日更新**

我终于做到了，如下所示：

```
 if video == "yes"
      filter :not, :missing => { :field => :video_url }
    elsif video == "no"
      filter :missing, { :field => :video_url }
    end 
```

我自己传递视频参数。我正在对搜索进行排序和提升，但另外我希望所有没有 video_url 字段的对象都出现在底部，无论它们有多相关。事实上，我不需要按这个字段排序，只是为了显示最后的 nil 值字段。

所以为了解决这个问题，我调用了两次搜索并添加了上面的代码，它就像一个魅力。

为了完整起见，我的搜索方法如下：

```
 def self.search(params, video = nil)
tire.search do
  query do
    boolean do
      must { string params[:query], default_operator: "AND" } if params[:query].present?
      must { term :active, true }
    end
  end
    sort { by :update_ad => "desc" } unless params[:query].present?
    facet "categories" do
      terms :category_id
    end
    if video == "yes"
      filter :not, :missing => { :field => :video_url }
    elsif video == "no"
      filter :missing, { :field => :video_url }
    end
end 
```

结尾

如果您不传递视频参数，它将不会应用任何过滤器。在我的映射中，我设置了 boost、analyzer 等。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T08:59:18.890

首先，您链接到的 Elasticsearch[问题仍然是开放的，只是一个功能建议。](https://github.com/elasticsearch/elasticsearch/issues/896)

其次，就像一个注释，你真的确定要排序而不是提高某些记录的分数吗？

第三，如果您确实*想*对该字段进行排序，最简单的方法是仅使用最后出现的某个值对该字段进行索引（`"ZZZ"`奇怪的 Unicode 字符，您明白了）。默认情况下，您可能不想这样做，因此使用该[`multi_field`](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)功能是个好主意。当然，您必须重新索引您的语料库以获取新设置。

最后，可以按脚本排序（请参阅[文档](http://www.elasticsearch.org/guide/reference/api/search/sort.html)），但它具有通常且明显的性能影响。

# string - 在perl中提取起点和终点之间的文本

> ID：14655936
> 
> 赞同：1
> 
> 时间：2013-02-01T22:14:25.837
> 
> 标签：string, perl, extract

我根本不习惯 perl 并且语法有问题。我将如何在下面返回“棕色”？从我正在阅读的内容来看，这应该可以..

```
my $text = "the quick brown dog";
print "$text\n";
my $newvar = $text =~ m/quick (.*) dog/;
print "$newvar\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:17:42.530

```
my $newvar = $text =~ m/ quick (.*) dog /; 
```

是标量上下文中的赋值，并赋值`1`或`undef`。

您想在列表上下文中进行此分配

```
my ($newvar) = $text =~ m/ quick (.*) dog /; 
```

它从正则表达式中分配捕获的组。

标量上下文和列表上下文之间的区别是在 Perl 中习惯的最棘手的事情之一。

请注意，从 Perl 中的正则表达式中捕获的组也被分配给特殊变量`$1`, `$2`, ... 。所以你也可以说

```
print "$1\n"; 
```

# variables - 使用 switch-block 删除代码中的临时变量

> ID：14655944
> 
> 赞同：0
> 
> 时间：2013-02-01T22:15:07.317
> 
> 标签：variables, return, switch-statement, break, temporary

在项目中有这样的代码：

```
Cookie CookieCreate(CookiesTypes type)
{
     Cookie user_cookie = null;

     switch (type)
     {
             case CookiesTypes.SessionId:
                  user_cookie = new Cookie("session_id", Convert.ToBase64String(Guid.NewGuid().ToByteArray()));
                  break;
             case CookiesTypes.ClientIp:
                  HttpListenerContext context = listener.GetContext();
                  user_cookie = new Cookie("client_ip", context.Request.RemoteEndPoint.ToString());
                  break;
     }

     return user_cookie;
} 
```

我明白，那个 temp 变量`user_cookie`的语法不好......我`return`在两种情况下都尝试在 switch-block 中使用，但是当我尝试这样做时，我遇到了编译器错误：

伪代码：

```
case ... :
     //some action
    return var; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:21:38.933

Despite the fact that *there's nothing inherently wrong* with temporary variables, if you really want to avoid it you just need to ensure that all code paths return something.

That means (for example) changing your current `return` to:

```
return null; 
```

and having both cases contain:

```
return new Cookie (whatever); 
```

instead of the assignment.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:19:38.763

在最后返回的语句的情况下设置一个临时值并不是一个糟糕的语法，如果您需要在返回之前为所有情况`switch`做一些事情，它也是唯一的选择。`user_cookie`

在您的代码中看到的唯一问题是缺少一个`default`确实有用的案例，因为：

*   要么你可以要求一个`default`案例（以便你在那种情况下做某事）
*   要么开关永远不应该到达一个`default`案例（所以你应该以一种特殊的方式来管理这种情况，例如通过抛出一个异常）

如果你盲目地删除临时变量并像你试图做的那样直接返回值，那么它会给你一个编译器错误，可能是因为不是所有的分支都返回一些东西（因为你缺少一个`default`子句或`return`在 switch 之后缺少一个）。

# c++ - 为什么一个工作，一个崩溃？

> ID：14655949
> 
> 赞同：4
> 
> 时间：2013-02-01T22:15:28.123
> 
> 标签：c++, lua

这已经让我发疯了一个多星期。[下面是来自游戏Bitfighter](http://bitfighter.org)中机器人玩家的两个 Lua 代码片段（用 C++ 编写，使用 LuaWrapper 的变体进行绑定）。

当我第一次启动 Lua 脚本时，两者都按预期工作。但是经过几分钟的强烈对象创建和破坏，变体 2 停止工作，并给我以下错误：

```
robot.lua:253: attempt to call missing or unknown method 'getEnergy' (a nil value) 
```

在我看来，这些功能应该相同。谁能解释一下区别？

注意：目标是表示 C++ 对象的（重）用户数据。getEnergy 和 getHealth 是正确注册的 C++ 函数。我可以轻松地重现这种不同的行为。这是 Lua 5.1，使用 luavec mod。

变体 1 - 始终有效

```
local mt = getmetatable(target)
local pow = mt.getEnergy(target) + mt.getHealth(target) 
```

变体 2 - 在脚本运行任意时间后开始失败

```
 local pow = target:getEnergy() + target:getHealth() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:26:26.733

要跟踪它停止工作时会发生什么，您可以将调用包装起来`pcall`并探索值发生了什么`target`：

```
local ok, res = pcall(function() return target:getEnergy() + target:getHealth() end)
if not ok then
  local s = "Invalid target value: "..tostring(target).." "..type(target).."\n"
  for k, v in pairs(target) do s = s.."target "..tostring(k).." "..tostring(v).."\n" end
  for k, v in pairs(getmetatable(target)) do s = s.."meta "..tostring(k).." "..tostring(v).."\n" end
  -- add anything else that helps you figure out what happened to target
  error(res..s)
end
local pow = res 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T03:48:07.637

我强烈怀疑问题是你有一个类似于这个的类或结构：

```
struct Foo
{
    Bar bar;
    // Other fields follow
} 
```

你已经通过 LuaWrapper 将 Foo 和 Bar 暴露给 Lua。这里重要的一点是，它是结构`bar`上的第一个字段`Foo`。或者，您可能有一些从其他基类继承的类，并且派生类和基类都暴露给 LuaWrapper。

LuaWrapper 使用一个名为 Identifier 的函数来唯一地跟踪每个对象（例如给定对象是否已经添加到 Lua 状态）。默认情况下，它使用对象地址作为键。在上述情况下，Foo 和 Bar 可能在内存中具有相同的地址，因此 LuaWrapper 可能会感到困惑。

这可能会导致在尝试查找方法时抓取错误对象的元表。显然，由于它正在查看错误的元表，它不会找到您想要的方法，因此看起来好像您的元表神秘地丢失了条目。

我检查了一项更改，该更改跟踪每个对象的每种类型的数据，而不是一大堆。如果您将您的 LuaWrapper 副本更新到存储库中的最新版本，我相当肯定您的问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T19:03:17.903

当你说它在某个阶段停止工作，但之前工作正常......难道你在运行时的任何地方覆盖了 .getEnergy 函数？也许您正在运行 a`foo.getEnergy = nil`而不是`foo.getEnergy == nil`某个地方？听起来可能是后期初始化出错了:)

# jsf-2 - 提交 2 个表单时 JSF ViewState 未更新

> ID：14655951
> 
> 赞同：5
> 
> 时间：2013-02-01T22:15:41.180
> 
> 标签：jsf-2, primefaces, mojarra

我对 JSF 2 有一个问题。我使用 Mojarra 2.1.14 和 Primefaces 3.1.4

我有一个包含 2 个表单的页面：**formA**和**formB**。这两个表单在隐藏的输入字段中分别包含 ViewState。

```
<h:form id="formA" binding="#{sessionBean.formA}">
    <h:commandButton value="formA" action="#{sessionBean.actionA}">
        <f:ajax/>
    </h:commandButton>
</h:form>

<h:form id="formB" binding="#{sessionBean.formB}">
    <h:commandButton value="formB" action="#{sessionBean.actionB}">
        <f:ajax/>
    </h:commandButton>
</h:form> 
```

用户使用 Ajax 操作提交**formA 。**在 Java 操作中，我显式更新了**formA**和**formB**（已绑定）。

```
public void actionA(){
    FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add(formA.getClientId());
    FacesContext.getCurrentInstance().getPartialViewContext().getRenderIds().add(formB.getClientId());
    System.out.println("action A!!");
}

public void actionB(){
    System.out.println("action B!!");
} 
```

在 Ajax 响应中有**formA**和**formB**（元素）的 HTML 代码以及 ViewState。

JSF 更新**formA**和**formB**的 HTML并设置调用表单的 ViewState：**formA**。 **formB**不包含任何 ViewState。

用户使用 Ajax 操作提交**formB 。**因为未定义 ViewState，所以 postBack 为 false，并且在 RESTORE 阶段将 renderResponse 设置为 true，跳过了 INVOKE APPLICATION 阶段：未调用该操作。更新响应 VIEW_STATE 后，如果用户**提交 formB**，则调用该操作。

它是 JSF 2 的错误还是限制？还是我做错了什么？

你可以在 GitHub 上找到一个 maven 项目： [https ://github.com/nithril/jsf-multiple-form](https://github.com/nithril/jsf-multiple-form)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T23:04:39.383

您面临的问题与 JSF JavaScript 库的已知问题有关。`rendered`解决方法是在标签的属性中显式设置另一种形式的客户端 ID `f:ajax`：

```
<h:form id="formA" binding="#{sessionBean.formA}">
  <h:commandButton value="formA" action="#{sessionBean.actionA}">
    <f:ajax render=":formB @form"/>
  </h:commandButton>
</h:form>

<h:form id="formB" binding="#{sessionBean.formB}">
  <h:commandButton value="formB" action="#{sessionBean.actionB}">
    <f:ajax render=":formA @form"/>
  </h:commandButton>
</h:form> 
```

更多关于这个：

*   [包含另一种形式的内容的 Ajax 渲染](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxRenderingOfContentWhichContainsAnotherForm)
*   [ajax 渲染后 javax.faces.ViewState 丢失](https://stackoverflow.com/questions/7830795/javax-faces-viewstate-is-missing-after-ajax-render)
*   [通过 ajax 渲染其他表单会导致其视图状态丢失，如何将其添加回来？](https://stackoverflow.com/questions/7807334/rendering-other-form-by-ajax-causes-its-view-state-to-be-lost-how-do-i-add-this)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T00:22:28.440

如果您使用 MyFaces 2.0.x / 2.1.x，还有一个替代技巧可以正确更新表单，添加以下脚本：

```
window.myfaces = window.myfaces || {};
myfaces.config = myfaces.config || {};
//set the config part
myfaces.config.no_portlet_env = true; 
```

请参阅[JSF Ajax 和多种形式](http://www.irian.at/en/blog/-/blogs/jsf-ajax-and-multiple-forms)。

此选项要好得多，因为您无需担心修复 web 应用程序中使用多个表单的每个地方，只需将其添加到主模板即可。

# java - 查找字符串是否包含在枚举中的任何字符串中

> ID：14655953
> 
> 赞同：0
> 
> 时间：2013-02-01T22:15:52.400
> 
> 标签：java

我有一个奇怪的问题要解决，

我有一个带有类似这样的字符串的枚举

```
public enum Enumm{
    Item1("i1"),
    Item2("i2");

    private String itemText;
    private Enumm(String inText){
        this.setitemText(inText);
    }
//  getter and setter for itemText not typing 
} 
```

现在在另一个类中，我想检查字符串 inputString 是否包含“i1”或“i2”，但问题是我不能使用循环。

我知道我能做到

```
 for(Enumm item: Enumm.values()){
        if (inputString.contains(item.getItemText)) {
           // do something
        }
   } 
```

但是我的问题的限制不允许我这样做

我正在寻找类似的东西

```
if(inputString.contains(Enumm.Item1.getItemText||Enumm.Item2.getItemText)){
   //do something
} 
```

但也是动态的，因此它可以找到枚举中的所有项目，任何人都可以帮我找到解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:32:23.207

您可以向您的枚举添加一个静态方法，称为类似的方法`findInString(String s)`，它会为您循环`values()`并返回一个布尔值（如果找到它）。但这取决于您为什么要避免循环。显然，除了将循环松鼠到你看不到的地方之外，这没有任何作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:34:40.693

也许这会有所帮助？

```
List<String> list = Collections.list(enumeration);
boolean b = list.contains("Searchstring"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T22:21:08.543

您可以创建一个项目列表/数组，然后解析该数组以检查 i1 或 i2。

`Item[] string = {"i1","i2"}`

```
if(string.contains("i1")||string.contains("i2"))
{

} 
```

# multithreading - 自托管 pushsharp - Events_OnNotificationSendFailure 失败：线程池中没有足够的空闲线程来完成操作

> ID：14655956
> 
> 赞同：2
> 
> 时间：2013-02-01T22:16:12.537
> 
> 标签：multithreading, windows-services, threadpool, pushsharp

我的 PushSharp 服务是在 Windows 服务中自行托管的，
但不久之后它总是抛出：
Events_OnNotificationSendFailure -**异常是“ThreadPool 中没有足够的空闲线程来完成操作”**。

这样做的正确方法是什么？

```
public partial class PushNotificationService : ServiceBase
{
    private static bool flagNotification = true;
    static PushService push;

    protected override void OnStart(string[] args)
    {
        SetPushService();

        //start console service worker
        Thread t = new Thread(NotificationServiceWorker);
        t.IsBackground = true;
        t.Start();
    }

    private static void NotificationServiceWorker()
    {
        try
        {
            int sendNotificationTimeGap = Convert.ToInt32(ConfigurationManager.AppSettings["SendNotificationTimeGap"]);
            while (flagNotification)
            {
                try
                {
                    /// get IosPushNotificationService
                    IosPushNotificationService pns = new IosPushNotificationService();
                    /// Get The New Notification from db
                    List<NewPushNotifications> notificationToSend = pns.GetIosNotificationsToSend().Where(n => (n.CreatedDate ?? DateTime.Now) > DateTime.Now.AddMinutes(-5)).ToList();

                    if (notificationToSend != null && notificationToSend.Count > 0)
                    {
                        SendNotificationToIphone(notificationToSend.Where(gn => gn.deviceType.Value == (int)DeviceType.Iphone).ToList());
                        SendNotificationToAndroid(notificationToSend.Where(gn => gn.deviceType.Value == (int)DeviceType.Android).ToList());
                    }

                    Thread.Sleep(sendNotificationTimeGap);
                }
                catch (Exception ex)
                {
                    CustomError.Error("error in flagNotification loop", ex);
                }
            }
        }
        catch (Exception ex)
        {
            CustomError.Error("error in NotificationServiceWorker", ex);
        }
    }

    private static void SetPushService()
    {
        push = new PushService();

        push.Events.OnDeviceSubscriptionIdChanged += new PushSharp.Common.ChannelEvents.DeviceSubscriptionIdChanged(Events_OnDeviceSubscriptionIdChanged);
        push.Events.OnDeviceSubscriptionExpired += new PushSharp.Common.ChannelEvents.DeviceSubscriptionExpired(Events_OnDeviceSubscriptionExpired);
        push.Events.OnChannelException += new PushSharp.Common.ChannelEvents.ChannelExceptionDelegate(Events_OnChannelException);
        push.Events.OnNotificationSendFailure += new PushSharp.Common.ChannelEvents.NotificationSendFailureDelegate(Events_OnNotificationSendFailure);
        push.Events.OnNotificationSent += new PushSharp.Common.ChannelEvents.NotificationSentDelegate(Events_OnNotificationSent);

        string androidSenderId = ConfigurationManager.AppSettings["AndroidSenderId"];
        string androidSenderAuthToken = ConfigurationManager.AppSettings["AndroidSenderAuthToken"];
        string androidPackage = ConfigurationManager.AppSettings["androidPackage"];

        push.StartGoogleCloudMessagingPushService(new GcmPushChannelSettings(androidSenderId, androidSenderAuthToken, androidPackage), new PushSharp.Common.PushServiceSettings() { AutoScaleChannels = false });

        string appleCertificates = ConfigurationManager.AppSettings["AppleCertificates"];
        var appleCert = File.ReadAllBytes(appleCertificates);
        var appleCertPassword = ConfigurationManager.AppSettings["AppleCertPassword"];
        var appleIsProduction = ConfigurationManager.AppSettings["AppleIsProduction"].ToLower() == bool.TrueString;

        push.StartApplePushService(new ApplePushChannelSettings(appleIsProduction, appleCert, appleCertPassword));

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:08:26.590

不要使用线程，而是可以使用这样的计时器

```
protected override void OnStart(string[] args)
    {
        NotificationServiceEventLog.WriteEntry("Service Started at"+DateTime.Now);

        if (oNotificationComponent ==null)
        oNotificationComponent = new NotificationComponent(); 
```

## 标题

```
 try
        {

            if (StartAppleNotificationService())
                StartTimer();

        }
        catch (Exception ex)
        {

            NotificationServiceEventLog.WriteEntry(ex.Message);
        }

       base.OnStart(args);
    } 
```

私人布尔 StartAppleNotificationService() {

```
 bool IsStarted = false;
        try
        {

            if (oPushService == null)
            oPushService = new PushService();

            NotificationServiceEventLog.WriteEntry("Apple Notification Service started successfully");
            oPushService.Events.OnChannelCreated += new PushSharp.Common.ChannelEvents.ChannelCreatedDelegate(Events_OnChannelCreated);
            oPushService.Events.OnChannelDestroyed += new PushSharp.Common.ChannelEvents.ChannelDestroyedDelegate(Events_OnChannelDestroyed);
            oPushService.Events.OnChannelException += new PushSharp.Common.ChannelEvents.ChannelExceptionDelegate(Events_OnChannelException);
            oPushService.Events.OnDeviceSubscriptionExpired += new PushSharp.Common.ChannelEvents.DeviceSubscriptionExpired(Events_OnDeviceSubscriptionExpired);
            oPushService.Events.OnDeviceSubscriptionIdChanged += new PushSharp.Common.ChannelEvents.DeviceSubscriptionIdChanged(Events_OnDeviceSubscriptionIdChanged);
            oPushService.Events.OnNotificationSendFailure += new PushSharp.Common.ChannelEvents.NotificationSendFailureDelegate(Events_OnNotificationSendFailure);
            oPushService.Events.OnNotificationSent += new PushSharp.Common.ChannelEvents.NotificationSentDelegate(Events_OnNotificationSent);

            byte[] appleCert = File.ReadAllBytes("PushNSCert.p12");
            var settings = new ApplePushChannelSettings(true, appleCert, "123456");
            oPushService.StartApplePushService(settings);

            IsStarted = true;

        }
        catch (Exception ex)
        {

           throw new Exception("Exception in starting Apple Service :" + ex.Message + Environment.NewLine + ex.StackTrace);
        }

        return IsStarted;
    }
    private bool StartTimer() {

        try
        {
            Double Ms = Convert.ToDouble(ConfigurationManager.AppSettings["TickInterval"]);
            NotificationServiceEventLog.WriteEntry("Time Interval" + Ms.ToString());
            MyTimer = new Timer();
            MyTimer.Interval += (1)*(60)*(1000);
            MyTimer.Enabled = true;
            MyTimer.Elapsed += new ElapsedEventHandler(ServiceTimer_Tick);
        }
        catch (Exception ex) {

            throw ex;

        }
        return true;
    } 
    private void ServiceTimer_Tick(object sender, System.Timers.ElapsedEventArgs e)
    {
        string SentNotificationIDz = "";
        try
        {
            MyTimer.Enabled = false;

            string szConnectionString = @"Server=.\SQL2K8;Database=PaychecksDB_Live;User Id=sa;Password=tdsadmin@321";
            //ConfigurationManager.AppSettings["connString"];

            lNotifictaion = oNotificationComponent.GetNotificationsList(szConnectionString);

            foreach (NotificationModel oNotificationModel in lNotifictaion)
            {
                SendNotification(oNotificationModel.DeviceToken, oNotificationModel.NotificationMessage + " (" + oNotificationModel.NotificationTitle + ")");
                if (SentNotificationIDz == null)
                    SentNotificationIDz += oNotificationModel.Oid;
                else
                    SentNotificationIDz += "," + oNotificationModel.Oid;
            }
            oNotificationComponent.DeleteSentNotifications(SentNotificationIDz, szConnectionString);
            MyTimer.Enabled = true;
        }
        catch (Exception ex) {
            throw ex;
        }

      //  
    }
    private void SendNotification(string p_szDeviceToken,string p_szAlert)
    {

        try
        {

            oPushService.QueueNotification(NotificationFactory.Apple()
                                                      .ForDeviceToken(p_szDeviceToken)
                                                      .WithAlert(p_szAlert)
                                                      .WithBadge(2)
                                                      .WithSound("default")
                                                      .WithExpiry(DateTime.Now.AddDays(1))
                                                       );
        }
        catch (Exception ex)
        {
            throw new Exception("Error in sending Push Notification:" + ex.Message + Environment.NewLine + ex.StackTrace);
        }
    } 
```

# google-maps-api-3 - Gviz 仅在 Google Map 上显示融合表的第一部分

> ID：14655958
> 
> 赞同：-1
> 
> 时间：2013-02-01T22:16:22.690
> 
> 标签：google-maps-api-3, google-fusion-tables

我修改了 Geocodezip 的一个示例以使用我的融合表。该表有 40 多行，但只有前 11 行显示在地图上。融合表中的所有内容都可以进行地理编码，但此处不行。有人可以解释为什么。

[http://6tango.com/Map_Examples/fusion_with_geocode.html](http://6tango.com/Map_Examples/fusion_with_geocode.html)

[编辑] 我刚刚注意到 Geocodezip 的示例只有 11 分。猜猜我最好仔细看看他的javascript。

另一方面，是否有一种简单的方法可以在此处显示代码块而无需在每行手动添加空格？（请原谅我的无知）

PS - 感谢 Geocodezip 提供的所有示例。对于像我这样的新手来说，它们是天赐之物！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:45:06.710

您正在动态地对表中的条目进行地理编码，检查状态！= google.maps.GeocoderStatus.OK 时的情况，您会发现您收到了 OVER_QUERY_LIMIT 响应。

我建议离线对地址进行地理编码（或从显示的点捕获坐标）并将结果坐标添加到表格的其他列中以避免出现问题。

# python-2.7 - Python - Lotus Notes（发送电子邮件）

> ID：14655961
> 
> 赞同：2
> 
> 时间：2013-02-01T22:16:40.770
> 
> 标签：python-2.7, lotus-notes

我正在尝试使用 Python 2.7.3.2 通过 Lotus Notes 8.5 发送电子邮件。

有很多关于如何在其他语言中执行此操作的示例，我自己在 VBA 中完成了它，但是在使用 Python 时遇到了困难。

```
self.db = self.session.getDatabase(server, dbfile)
# ...
mailDoc         = self.db.CreateDocument
mailDoc.Form    = "Memo"
mailDoc.sendto  = recipientList
mailDoc.subject = subject
mailDoc.Body    = bodytext 
```

返回错误：`AttributeError: Property 'CreateDocument.Form' can not be set.`

我试图跳过设置表单，但设置任何这些属性也失败。

任何人都会有这方面的代码，或者关于尝试解决它的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T03:16:17.980

我对 Python 一无所知，但我的猜测`document.item = "foo"`是不支持设置项目值的速记符号。最有可能的是，您需要这样做：

```
mailDoc.AppendItemValue("Form","Memo") 
```

（您也可以使用 ReplaceItemValue，它等效于新创建的文档，也适用于更新现有文档，因此许多人更喜欢只记住一个方法名称。）

# c++ - BOOST_STATIC_ASSERT 不在 gcc 4.2 上编译，而在 3.4.6 上编译

> ID：14655963
> 
> 赞同：1
> 
> 时间：2013-02-01T22:16:51.307
> 
> 标签：c++, boost, gcc4

我正在移植项目以使用 4.2 与 3.4.6 进行编译

在 gcc 4.2 中编译以下代码时出现错误，而它在 gcc3.4.6 中工作正常

我尝试使用 BOOST_MPL_ASSERT 但没有成功。

```
template< uint64_t N , class T >
    struct count
    {
        BOOST_STATIC_ASSERT( _to_bool_< typename _is_integer_<T>::value >::VALUE == true );
        //BOOST_MPL_ASSERT( ( bool_< _to_bool_< typename _is_integer_<T>::value >::VALUE == true > ) );

        static
        uint64_t compute( T const & p_arg ) {
            enum { VALUE = (  N >> 1 ),
                   MASK  = ( ( ( 1UL << VALUE ) - 1 )  ) } ;

            return   count < VALUE, T >::compute( MASK & ( p_arg >> VALUE ) )
                   + count < VALUE, T >::compute( p_arg & MASK  );
        }
    }; 
```

导致错误的代码行

```
if( count< static_cast< uint64_t >( 64 ), uint64_t >::compute( p_max_block_size ) > 1 ) {
                    set_fail_bit();
                    return 0;
                } 
```

# c++ - 当我对此日期输出的一部分应用偏移量时会发生什么？

> ID：14655964
> 
> 赞同：1
> 
> 时间：2013-02-01T22:16:55.223
> 
> 标签：c++, date

我正在尝试编写一个函数，该函数接受一个参数，即偏移天数，并返回从现在起许多偏移天的日期。我可以从下面轻松获取当前日期

```
#include <ctime>
#include <iostream>
using namespace std;

int main() {
time_t t = time(0);   // get time now
struct tm * now = localtime( & t );
cout << (now->tm_year + 1900) << '-' 
     << (now->tm_mon + 1) << '-'
     <<  now->tm_mday
     << endl;
} 
```

我的问题是，如果我将 now->tm_mday 更改为 now->tm_mday - offset，是否足够聪明地更改月份或年份，因为它们可能会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:19:19.827

不 - `(now->tm_year + 1900)`，`(now->tm_mon + 1)`并且`now->tm_mday`是单独的表达式，向其中添加新的算术运算不会影响其他表达式。

`t`相反，应用偏移量，它是一个整数值，表示自 UNIX 纪元以来的秒数。然后更改将传递到`tm`结构，并最终传递到您的每个输出表达式：

```
time_t t0 = time(0);               // now
time_t t1 = time(0) - 5;           // five seconds ago
time_t t2 = time(0) - 60*60*2;     // two hours ago
time_t t3 = time(0) - 60*60*24*5;  // five days ago

// (do try to avoid "magic numbers", though) 
```

# asp.net-mvc-4 - 带有复合键的 MVC4 导航属性

> ID：14655965
> 
> 赞同：1
> 
> 时间：2013-02-01T22:16:59.840
> 
> 标签：asp.net-mvc-4, composite-key, navigation-properties, ef-database-first

我使用 EF-database-first 创建了一个 MVC4 Web 应用程序。这些表具有复合键 [ID、Name、EffDate]，并且没有在数据库中定义外键：例如，Department 部分类：

```
[MetadataType(typeof(DepartmentMetadata))]
public partial class Department
{
    public int DeptID { get; set; }
    public string DeptName { get; set; }
    public System.DateTime EffDate { get; set; }
    public string Status { get; set; }
    public string RevenueAccount { get; set; }
} 
```

部门元数据类：

```
public class DepartmentMetadata
{
    [Required]
    public int DeptID { get; set; }

    [Required]
    [Display(Name = "Department Name")]
    public string DeptName { get; set; }

    [Required]
    [Display(Name = "Effective Date")]
    [DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", NullDisplayText = "--", ConvertEmptyStringToNull = true)]
    public System.DateTime EffDate { get; set; }

    [Required]
    public string Status { get; set; }

    [Display(Name = "Revenue Account")]
    [StringLength(10)]
    public string RevenueAccount { get; set; }
} 
```

分配表，指的是部门表。它还有一个复合键 [DeptID, ProjectID, BillableUnitID, EffDate]。如果可以的话，我会将 DeptID 字段声明为外键......但我不控制数据库，更重要的是我相信 T-SQL 不会允许外键成为复合键的一部分：

```
[MetadataType(typeof(AllocationMetadata))]
public partial class Allocation
{
    public int DeptID { get; set; }
    public int ProjectID { get; set; }
    public int BillableUnitID { get; set; }
    public System.DateTime EffDate { get; set; }
    public string Status { get; set; }
    public decimal Allocation1 { get; set; }
} 
```

这可行，但我得到一列 DeptID 编号。我想要的是一列部门名称。

上一个[问题](https://stackoverflow.com/questions/14616624/mvc4-how-to-load-related-data-without-navigation-properties)将我引导到虚拟导航属性，所以我添加了它们：

```
[MetadataType(typeof(AllocationMetadata))]
public partial class Allocation
{
    [ForeignKey("Department")]
    public int DeptID { get; set; }
    public int ProjectID { get; set; }
    public int BillableUnitID { get; set; }
    public System.DateTime EffDate { get; set; }
    public string Status { get; set; }
    public decimal Allocation1 { get; set; }

    public virtual Department Department { get; set; } /* navigation property */
} 
```

AllocationController 中 Index 的代码是： public ActionResult Index() { return View(db.Allocation.Include(a => a.Department).ToList()); }

当我单击分配索引视图的链接时，我收到此错误消息（在我停止调试之后）：

> “/”应用程序中的服务器错误。
> 
> 指定的包含路径无效。EntityType 'KC_BillableUnit_TESTModel.Allocation' 未声明名为“Department”的导航属性。
> 
> 堆栈跟踪 [InvalidOperationException：指定的包含路径无效。EntityType 'KC_BillableUnit_TESTModel.Allocation' 未声明名为 'Department' 的导航属性。]
> System.Data.Objects.Internal.ObjectFullSpanRewriter.ConvertSpanPath(SpanPathInfo parentInfo, List`1 navPropNames, Int32 pos) +8355128
> System.Data。 Objects.Internal.ObjectFullSpanRewriter..ctor（DbCommandTree 树，DbExpression toRewrite，Span span）+256 ....继续....

我尝试了各种注释组合，但都导致相同的错误。

如何让我的分配列表显示部门名称而不是 DeptID 编号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T02:22:23.027

当然可以！我认为问题在于您仅在一侧（分配）声明了导航属性，但是您必须在两侧（也是部门）声明。

以下必须解决您的问题：

```
[MetadataType(typeof(DepartmentMetadata))]
public partial class Department
{
    public Department()
    {
        this.Allocations = new HashSet<Allocation>();
    }

    // properties ...

    public virtual ICollection<Allocation> Allocations { get; set; }
} 
```

# javascript - 如何配置 Express 响应对象自动向 JSON 添加属性？

> ID：14655968
> 
> 赞同：7
> 
> 时间：2013-02-01T22:17:22.397
> 
> 标签：javascript, node.js, express, connect

我有一个对象：

```
var obj = { "stuff": "stuff" } 
```

在 Express 中，我将它发送给客户端，如下所示：

```
res.json(obj); 
```

有没有办法配置响应对象以自动将属性添加到它生成的 json 中？例如，要输出：

```
{
  "status": "ok",
  "data": { "stuff": "stuff" }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T01:30:34.090

一旦数据被添加到流中，重新包装它已经太晚了，所以你必须先做。

要么简单地使用一个功能：

```
res.json(wrap(obj)); 
```

您还可以添加自己的 json 方法

```
express.response.wrap_json = function(obj) {
  this.json(wrap(obj));
}; 
```

所以你现在可以打电话

```
res.wrap_json(obj); 
```

或者你可以用你的替换 express json 实现

```
var original = express.response.json;
express.response.json = function(obj) {
  original.call(this, wrap(obj));
}; 
```

如果您想覆盖所有 json 调用，我只会使用最后一个。

# python - OpenCV报错：功能未实现

> ID：14655969
> 
> 赞同：61
> 
> 时间：2013-02-01T22:17:22.840
> 
> 标签：python, opencv

我试图让 OpenCV 在我的 Ubuntu 机器上与 Python 一起工作。我已经下载并安装了 OpenCV，但是当我尝试运行以下 python 代码时（它应该从网络摄像头捕获图像并将它们推送到屏幕上）

```
import cv

cv.NamedWindow("w1", cv.CV_WINDOW_AUTOSIZE)
capture = cv.CaptureFromCAM(0)

def repeat():
    frame = cv.QueryFrame(capture)
    cv.ShowImage("w1", frame)
    time.sleep(10)

while True:
    repeat() 
```

我收到以下错误：

```
The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or
Carbon support. If you are on Ubuntu or Debian, install libgtk2.0-dev and
pkg-config, then re-run cmake or configure script 
```

所以我按照他们的要求做：安装软件包，移动到我安装 OpenCV 的文件夹，然后运行

```
sudo make uninstall
make
sudo make install 
```

但是当我尝试运行 python 时，它给了我同样的错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-01T23:07:52.060

如果 gtk 出现错误，请尝试 qt。

```
sudo apt-get install libqt4-dev
cmake -D WITH_QT=ON ..
make
sudo make install 
```

如果这不起作用，有一个简单的方法。

```
sudo apt-get install libopencv-* 
```

这将下载所有必需的依赖项（尽管您似乎已经安装了所有必需的库，但您仍然可以尝试一次）。这可能会安装 OpenCV 2.3.1 (Ubuntu 12.04)。但是因为你有 OpenCV 2.4.3`/usr/local/lib`包含这个路径`/etc/ld.so.conf`并做`ldconfig`. 因此，现在无论何时使用 OpenCV，都将使用最新版本。这不是最好的方法，但如果您仍然遇到 qt 或 gtk 的问题，请尝试一次。这应该有效。

**更新**- 2019 年 6 月 18 日

我在 openCV 3.4.2 的 Ubuntu（18.04.1 LTS）系统上收到此错误，因为方法调用`cv2.imshow`失败（例如，在 cv2.namedWindow(name) 行出现错误：cv2.error: OpenCV(3.4 .2).该功能未实现。)。我正在使用蟒蛇。仅以下 2 个步骤帮助我解决了问题：

```
conda remove opencv
conda install -c conda-forge opencv=4.1.0 
```

如果你使用 pip，你可以试试

```
pip install opencv-contrib-python 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2017-12-14T20:04:25.097

不要浪费时间试图解决这个问题，制造商自己已经明确了这一点。而不是`cv2.imshow()`使用这个：

```
img = cv2.imread('path_to_image')
plt.imshow(img, cmap = 'gray', interpolation = 'bicubic')
plt.xticks([]), plt.yticks([])  # to hide tick values on X and Y axis
plt.show() 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-04-21T00:16:09.610

如果您在任何时候使用 opencv-python pip 包安装 OpenCV，请注意以下注释，取自[https://pypi.python.org/pypi/opencv-python](https://pypi.python.org/pypi/opencv-python)

> **重要提示** MacOS 和 Linux 轮子目前有一些限制：
> 
> *   不支持视频相关功能（不使用 FFmpeg 编译）
> *   例如`cv2.imshow()`不起作用（未使用 GTK+ 2.x 或 Carbon 支持编译）

另请注意，要从其他来源安装，首先必须删除 opencv-python 包

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-26T16:05:45.500

我希望这个答案仍然有用，尽管问题似乎很老了。

如果您安装了 Anaconda，并且您的 OpenCV 不支持 GTK+（如本例所示），您只需键入

```
conda install -c menpo opencv=2.4.11 
```

它将安装不会产生上述错误的合适 OpenCV 版本。此外，如果有一个作为 Anaconda 一部分的 OpenCV，它将重新安装以前安装的 OpenCV。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-10T14:44:23.197

这是因为'opencv-python-headless'。卸载它！

```
pip uninstall opencv-python-headless 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-11T09:42:47.817

在安装 libgtk2.0-dev 和 pkg-config 或 libqt4-dev 之前。确保您已卸载 opencv。您可以通过在 python shell 上运行 import cv2 来确认这一点。如果失败，则安装所需的软件包并重新运行 cmake 。

# tridion - 什么是未交付自定义渲染器？

> ID：14655972
> 
> 赞同：2
> 
> 时间：2013-02-01T22:17:32.943
> 
> 标签：tridion

[SDL Live Content](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_B8ABDA514B24443EBCDB4AE382387553)将渲染器的用例描述为“操纵渲染过程产生的输出”用于组件演示。这属于内容管理器和内容交付之间，特别是在内容分发/发布下。

我们可以使用自定义渲染器“全局”更改所有 CP 的输出，而不是向所有模板添加模板构建块 (TBB)。我们还可以使用渲染器发布当前未渲染的项目类型。我们可以为该项目类型添加自定义解析器以及自定义渲染器和 CD 端代码。

我们将在 .NET 项目中实现`IRenderer`，`Tridion.ContentManager.Publishing.Rendering`并将生成的 dll 添加到 CMS 的 GAC。

## 问题

我可以看到我们将如何使用渲染器来操纵甚至包装所有输出的标记，或者包装所有 CP。

*   这是为了对我们的模板输出进行“原始”操作吗？换句话说，**我们是否可以访问任何 CM 或 CD API？**
*   **此渲染器逻辑是否适用于给定 CMS 实例中的*所有发布和模板？***
*   文档中提到了*项目类型*，**是那些*Tridion*项目类型，例如 TBB**吗？

[Bart Koopman 还在SDLTridionWorld 上的 How To Tackle Integrations 文章中](http://sdltridionworld.com/articles/sdltridion2011/tutorials/tackleintegrations.aspx)描述了自定义渲染器如何在其他扩展点的上下文中工作。

我了解与[Jaime Santos Alcón 描述的交付方渲染器](http://jaimesantosalcon.blogspot.com/2011/02/tridion-2011-ga-content-delivery.html)不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:56:45.127

这确实是每次调用标准渲染器时都会执行的操作。虽然自定义**解析器**的用例更容易理解，但原理是相同的，它们都是发布管道的一部分。

我总是建议不要创建每次渲染模板时都会执行的自定义渲染器，而应该使用添加到所有具有相同功能的模板的模板构建块。创建自定义渲染器可能会在某个时间点*被遗忘，然后您会想知道为什么在**没有任何变化*的情况下输出突然不同。

# c# - 通用列表 类级变量

> ID：14655973
> 
> 赞同：0
> 
> 时间：2013-02-01T22:17:38.610
> 
> 标签：c#, winforms, c#-4.0, generics

我正在尝试创建一个用户通过从UI 上`List<T>`选择数据类型来指定数据类型的位置。`ComboBox`我已经设法创建了一个包含 的对象`CustomEntity`，`List<T>`但是一旦我退出`Button1_Click`事件处理程序，`CustomEntity`就会超出范围。是否可以创建类级别变量？我尝试过，但不得不将其注释掉，因为它导致了错误。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace CustomClassWithGenericList
{
    public partial class Form1 : Form
    {
        //The following error is created: Cannot implicitly convert type
        //CustomClassWithGenericList.CustomEntity<decimal> to
        //CustomClassWithGenericList.CustomEntity<object>

        //private CustomEntity<object> input1;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (cb1.SelectedItem.ToString().ToUpper() == "DECIMAL")
            {
                input1 = new CustomEntity<decimal>();

                string[] temp = textBox1.Text.Split(',');

                foreach (string s in temp)
                {
                    decimal number;

                    if (decimal.TryParse(s, out number))
                    {
                        input1.inputValue.Add(number);
                    }
                    else
                    {
                        MessageBox.Show("Error occured.");
                    }
                }
            }
            else if(cb1.SelectedItem.ToString().ToUpper() == "INT")
            {
            }
            else if(cb1.SelectedItem.ToString().ToUpper() == "TIMESPAN")
            {
            }
        }
    }

    public class CustomEntity<T>
    {
        public List<T> inputValue; 

        public CustomEntity()
        {
            inputValue = new List<T>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:22:36.553

注释掉的行使用类型 T，它不是定义的类型。并不是说您需要在声明时指定泛型的类型参数列表，而不是在其他任何地方。

如果您希望泛型能够容纳任何对象，您应该简单地将类型“对象”作为类型参数传递给它。

但是，如果它只能是几种不同的类型，则为每种类型创建一个成员变量可能是首选选项，具体取决于您以后打算如何使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T22:23:28.903

那里可以使用很多技术。首先，您可以创建`Object`或[动态](http://msdn.microsoft.com/en-us/library/dd264741.aspx)类型变量，然后随意转换它。

您还可以将数据以某种状态存储在内存中（例如某些会话或应用程序状态，或缓存等），在这种情况下，只需从该源获取。

# python - 在 python 中读取/压缩一个大文件的更简洁的方法

> ID：14655982
> 
> 赞同：17
> 
> 时间：2013-02-01T22:18:20.767
> 
> 标签：python, gzip, subprocess, gunzip

所以我有一些相当大的 .gz 文件——解压后每个文件 10 到 20 GB。

我需要遍历它们的每一行，所以我使用的是标准：

```
import gzip
f = gzip.open(path+myFile, 'r')
for line in f.readlines():
    #(yadda yadda)
f.close() 
```

但是，`open()`和`close()`命令都占用了 AGES，占用了 98% 的内存+CPU。以至于程序退出并打印`Killed`到终端。也许它将整个提取的文件加载到内存中？

我现在正在使用类似的东西：

```
from subprocess import call
f = open(path+'myfile.txt', 'w')
call(['gunzip', '-c', path+myfile], stdout=f)
#do some looping through the file
f.close()
#then delete extracted file 
```

这行得通。但是有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-02-01T22:26:12.803

我 99% 确定您的问题`gzip.open()`不在`readlines()`.

正如[文档](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)所解释的：

> f.readlines() 返回一个包含文件中所有数据行的列表。

显然，这需要阅读和解压整个文件，并建立一个绝对庞大的列表。

最有可能的是，实际上是`malloc`分配所有内存的调用将永远占用。然后，在这个范围的末尾（假设您使用的是 CPython），它必须对整个巨大的列表进行 GC，这也将花费很长时间。

你几乎从不想使用`readlines`. 除非您使用的是非常旧的 Python，否则请执行以下操作：

```
for line in f: 
```

A`file`是一个完整的可迭代行，就像 —`list`返回的`readlines`一样，除了它实际上不是 a 之外`list`，它通过读取缓冲区来动态生成更多行。因此，在任何给定时间，您将只有一行和几个缓冲区，每个缓冲区大约 10MB，而不是 25GB `list`。并且读取和解压缩将在循环的整个生命周期中展开，而不是一次完成。

通过快速测试，使用 3.5GB 的 gzip 文件，`gzip.open()`实际上是即时的，`for line in f: pass`需要几秒钟，`gzip.close()`实际上是即时的。但是如果我这样做`for line in f.readlines(): pass`了，它需要……好吧，我不确定要多长时间，因为大约一分钟后，我的系统进入了交换系统的颠簸地狱，我不得不强行杀死解释器以使其响应任何事情……</p >

* * *

由于这个答案已经出现了十几次，我写了[这篇博客文章](http://stupidpythonideas.blogspot.com/2013/06/readlines-considered-silly.html)，解释了更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T22:28:36.340

看看[pandas，尤其是 IO tools](http://pandas.pydata.org/pandas-docs/stable/io.html)。它们在读取文件时支持 gzip 压缩，您可以分块读取文件。此外，pandas 速度非常快且内存效率很高。

因为我从未尝试过，我不知道压缩和读取块的效果如何，但可能值得一试

# javascript - Jquery src 和 load() 的更多问题

> ID：14655985
> 
> 赞同：0
> 
> 时间：2013-02-01T22:18:34.957
> 
> 标签：javascript, jquery

关于为什么这些脚本中的一个有效，而另一个无效，我正在大发雷霆。单击文本后，图像应更改。另外，load() 命令看起来还可以吗？

使第一个工作和第二个故障的这两个有什么区别？

功能性：

```
CageImg=new Image();
CageImg.src="http://cageme.herokuapp.com/css/mrcage.jpg"

function buttonInCompany() 
{
$('#desc').load('incompany.html'); 
$('#midimg').attr("src",CageImg.src); } 

$(document).ready(function() { $("#someID").click(function() { buttonInCompany(); }); }); </script>

<div id='someID'>Everything is cage's cage.<br><br></div>

<img id="midimg" src="http://3.bp.blogspot.com/-BdfyYy_Y0gY/UP_3y3F2RDI/AAAAAAAAC-Q/eHPCltO8bG8/s1600/TomEngelsnicolas+thing.jpg"> 
```

非功能性：

```
 <script src="jquery.src"></script>
        <script>
        incompanyImage=new Image(); 
        incompanyImage.src= "images/16581370-group-of-happy-young-business-people-in-a-meeting-at-office.jpg" 

function buttonInCompany()

        {
        $('#desc').load('desc.html #incompany');
        $('#midimg').attr("src",incompanyImage.src); } 

        $(document).ready(function() { $("#incompany").click(function() { buttonInCompany(); }); }); 

        </script>

        <div id="incompany" class="art-button">Aulas in-Company</div>

        <img id="midimg" width="233" height="350" src="images/Fotolia_5170186_X-01.jpg"><br></p> 
```

# php - WooCommerce，插入多个产品

> ID：14655986
> 
> 赞同：0
> 
> 时间：2013-02-01T22:18:35.047
> 
> 标签：php, sql, wordpress, woocommerce

我在 WordPress 中使用 WooCommerce 插件，我必须在一个类别中插入 1000 种产品。但是所有这些产品都有相同的名称。我有什么方法可以同时插入多个产品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:10:32.993

它可以具有相同的名称，也可以属于同一类别。SKU 编号应该是唯一的。手动创建页面。使用 Woocommerce 简码：例如：

```
[products skus="

SKU1000
,SKU1001
,SKU1002
,SKU1003

" orderby="sku" order="asc" ] 
```

这应该工作，希望它有所帮助。

# java - java程序在同一个jar中调用另一个程序时冻结

> ID：14655987
> 
> 赞同：-2
> 
> 时间：2013-02-01T22:18:39.903
> 
> 标签：java

我只是想将太空入侵者作为复活节彩蛋添加到我制作的程序中。[我在这里](http://www.cokeandcode.com/info/tut2d.html)找到了一个开源代码

游戏本身运行良好。但是，当我尝试从程序中的按钮运行它时，它会使我的程序和游戏冻结。我只是把他的源代码添加到我的源代码中，所以它在同一个 jar 文件中。

我尝试了 2 种方法来启动它。

```
java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {         
                Game.main(null);
                }
        });           
        } 
```

和

朴素的旧`Game.main(null);`

我应该以其他方式开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:57:44.170

```
public static void main() {  

        // Start the main game loop, note: this method will not
        // return until the game has finished running. Hence we are
        // using the actual main thread to run the game.    
        SpaceInvaders si = new SpaceInvaders();
        Thread SpaceInvaders = new Thread(si);
        SpaceInvaders.start();          
        }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        new SpaceInvaders().gameLoop();
    }
} 
```

只需要为它创建自己的线程。

# jquery - 提取过滤后的表数据

> ID：14655988
> 
> 赞同：0
> 
> 时间：2013-02-01T22:18:41.013
> 
> 标签：jquery, jquery-plugins, tablesorter

我想知道是否可以从使用 JQuery tableSorter 插件/小部件过滤的表中提取过滤后的数据。

我显示了一个大表，然后我使用普通的 tablesorter 功能对其进行过滤/排序 - 但我想做的是能够获取这个较小的表并从中导出一些数据

这是一个成员列表 - 所以我希望能够从过滤的（例如，超过一定年龄的）数据中导出数据（例如电子邮件地址），这样我就可以向这些选定的人发送电子邮件，而无需手动输入等。

这很容易做到吗？如果有人能指出我从哪里开始等正确的方向，我不介意我是否必须自己写一些东西？

感谢您提供的任何帮助，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T22:07:55.890

您需要做的就是找到可见的表格单元格并保存它们的数据。

我不确定您希望如何导出数据，因此我在[此演示](http://jsfiddle.net/Mottie/abkNM/369/)中选择了 csv ：

```
$('.export').on('click', function(){
    var csv = [];
    // find only visible rows; we're ignoring filtered/hidden rows
    $('table').find('tbody tr:visible').find('td').each(function(){
        csv.push( $(this).text() );
    });
    // do what you want with the csv data here
    $('textarea').val( csv.join(',') )
}); 
```

# delphi - 从资源文件递归导入 Delphi 2007

> ID：14655994
> 
> 赞同：0
> 
> 时间：2013-02-01T22:18:57.823
> 
> 标签：delphi, delphi-2007

我为 Delphi 2007 应用程序创建了一个资源文件。资源文件包含 10 个位图条目。我想知道是否有一种方法可以通过递归地遍历资源文件将所有位图加载到 Imagelist 中，或者我是否必须一次将它们拉出来。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T23:45:07.443

要将`RT_BITMAP`当前模块中的所有资源类型图像添加到图像列表中，我将使用以下命令：

```
uses
  CommCtrl;

function EnumResNameProc(hModule: HMODULE; lpszType: LPCTSTR; lpszName: LPTSTR;
  lParam: LONG_PTR): BOOL; stdcall;
var
  BitmapHandle: HBITMAP;
begin
  Result := True;
  BitmapHandle := LoadBitmap(HInstance, lpszName);
  if (BitmapHandle <> 0) then
  begin
    ImageList_Add(HIMAGELIST(lParam), BitmapHandle, 0);
    DeleteObject(BitmapHandle);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  EnumResourceNames(HInstance, RT_BITMAP, @EnumResNameProc,
    LONG_PTR(ImageList1.Handle));
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T23:27:12.520

我猜想通过“递归遍历资源文件”，您想问是否可以在不知道资源名称的情况下加载资源。为此，有一类 API 函数允许您枚举给定模块中的资源。有关更多信息，请参阅[“资源概述，枚举资源”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648005%28v=vs.85%29.aspx)主题。

但是，由于您自己将位图嵌入到 exe 中，因此更容易为它们命名以便于迭代，即在`RC`文件中：

```
img1 BITMAP foo.bmp
img2 BITMAP bar.bmp 
```

这里名称“模式”是`img`+数字。现在很容易循环加载图像：

```
var x: Integer;
    ResName: string;
begin
  x := 1;
  ResName := 'img1';
  while(FindResource(hInstance, PChar(ResName), RT_BITMAP) <> 0)do begin
     // load the resource and do something with it
     ...
     // name for the next resource
     Inc(x);
     ResName := 'img' + IntToStr(x);
  end; 
```

# xampp - Windows 7 中的 XAMPP 端口 80 错误

> ID：14655998
> 
> 赞同：4
> 
> 时间：2013-02-01T22:19:21.483
> 
> 标签：xampp, port80

XAMPP 3.1.0 不工作，因为端口 80 正在使用中。我环顾四周，这似乎是一个常见问题。我已经停止了 IIS，skype 没有运行，web 部署代理服务正在运行，我已经更改了 Apache 的 httpd.conf 的配置以根据这个问题的第二个答案监听端口 80：[XAMPP PORT 80 is Busy / Apache 配置文件中的 EasyPHP 错误：](https://stackoverflow.com/questions/8103924/xampp-port-80-is-busy-easyphp-error-in-apache-configuration-file)但仍然没有运气。以下是 XAMPP 控制面板中的错误消息：

```
2:03:49 PM [Apache] Problem detected!
2:03:49 PM [Apache] Port 80 in use by "system"!
2:03:49 PM [Apache] Apache WILL NOT start without the configured ports free!
2:03:49 PM [Apache] You need to uninstall/disable/reconfigure the blocking application
2:03:49 PM [Apache] or reconfigure Apache to listen on a different port
2:03:49 PM [Apache] XAMPP Apache is already running on port 443
2:03:49 PM [mysql]  MySQL Service detected with wrong path
2:03:49 PM [mysql]  Change XAMPP MySQL settings or
2:03:49 PM [mysql]  Uninstall/disable the other service manually first
2:03:49 PM [mysql]  Found Path: ERROR: Not Able To Open Service Manager
2:03:49 PM [mysql]  Expected Path: c:\xampp\mysql\bin\mysqld.exe --defaults-file=c:\xampp\mysql\bin\my.ini mysql
2:03:49 PM [mysql]  Problem detected!
2:03:49 PM [mysql]  Port 3306 in use by "mysqld.exe"!
2:03:49 PM [mysql]  MySQL WILL NOT start without the configured ports free!
2:03:49 PM [mysql]  You need to uninstall/disable/reconfigure the blocking application
2:03:49 PM [mysql]  or reconfigure MySQL to listen on a different port
2:03:49 PM [Tomcat] Problem detected!
2:03:49 PM [Tomcat] Port 8080 in use by "c:\xampp\apache\bin\httpd.exe"!
2:03:49 PM [Tomcat] Tomcat WILL NOT start without the configured ports free!
2:03:49 PM [Tomcat] You need to uninstall/disable/reconfigure the blocking application
2:03:49 PM [Tomcat] or reconfigure Tomcat to listen on a different port 
```

当我转到 localhost 时，即使该服务在控制面板中停止，它也会将我带到 IIS7 屏幕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-09T09:45:00.027

在提升的命令提示符中使用`netstat -bano`以查看哪些应用正在侦听哪些端口。

但通常，以下应用程序在 Windows 中使用端口 80：

```
IIS
World Wide Web Publishing service
IIS Admin Service
SQL Server Reporting services
Web Deployment Agent Service 
```

停止上述任何正在运行的应用程序。您可以在任务管理器的服务选项卡上执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T17:59:32.330

请参阅此链接上 The Computer Hugger 的答案（我希望它有帮助） [由 Apache 和端口 80 工作](https://stackoverflow.com/questions/8722447/work-by-apache-and-port-80?answertab=active#tab-top)

如果没有，请尝试以下操作，因为它对我的情况有所帮助：错误的原因是 SQL 报告服务正在使用 Apache 使用的 PORT 80。禁用 SQL Reporting Services 自动启动肯定会解决问题。

停止 SQL 报告服务，开始，然后键入管理工具，单击名称，选择计算机管理，然后选择服务和应用程序> SQL Server 配置> 服务并查找 SQL 报告服务，将其设置为手动启动，然后停止。

重新启动您的 XAMPP 服务器，希望您一切顺利 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-27T16:00:57.133

**在 Windows 8 上安装 XAMPP 后，我也遇到了这个错误：**

```
[Apache]    You need to uninstall/disable/reconfigure the blocking application
[Apache]    or reconfigure Apache to listen on a different port 
```

**这是我为解决它所做的：**

1.  转到 Windows 更新并确保已处理所有 Windows 更新。

2.  重新启动计算机。并启动 XAMPP 控制面板。然后错误消失并显示：

    ```
    [main]  Windows Version: Windows 8 Pro  64-bit
    [main]  XAMPP Version: 1.8.3
    [main]  Control Panel Version: 3.2.1  [ Compiled: May 7th 2013 ]
    [main]  You are not running with administrator rights! This will work for
    [main]  most application stuff but whenever you do something with services
    [main]  there will be a security dialogue or things will break! So think 
    [main]  about running this application with administrator rights!
    [main]  XAMPP Installation Directory: "c:\xampp\"
    [main]  Checking for prerequisites
    [main]  All prerequisites found
    [main]  Initializing Modules
    [main]  Starting Check-Timer
    [main]  Control Panel Ready 
    ```

所以一些警告，但它开始正常。