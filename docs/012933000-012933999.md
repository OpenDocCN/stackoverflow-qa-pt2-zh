# StackOverflow 问答 12933000-12933999

# backbone.js - 异步添加骨干路由。

> ID：12933005
> 
> 赞同：3
> 
> 时间：2012-10-17T11:10:15.010
> 
> 标签：backbone.js, requirejs, backbone-routing

我被一个大的主干应用程序困住了。

它在主应用程序中运行不同的应用程序。我们希望将应用程序和路由异步添加到大应用程序中。

我现在要做的是在加载主应用程序后使用 Require.JS 异步添加不同的应用程序。要将新路线添加到主要路线，我会停止历史并添加新路线并重新开始历史。这可行，但它有一个主要缺点。每次我去 (app.navigate('x',true);) 时，一条新的现有路径都会触发路由，因为我有 history.started 的次数。还有所有的视图渲染。

这会大大降低应用程序的速度，并且完全低效。

有没有办法动态添加新路线而无需 history.stop/start？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:58:06.510

您不必在`Backbone.history`每次添加新路由时停止/启动，Backbone 会在您调用`router.route`或创建新路由器时修改其状态。

所以，要么手动添加路由到你的路由器：

```
var R = Backbone.Router.extend({
    routes: {
    }
});

var r = new R();
Backbone.history.start();

r.route('added', 'added', function() {
    console.log('added : '+window.location.hash);
}); 
```

或实例化一个新的路由器

```
var R = Backbone.Router.extend({
  routes: {
  }
});

var r = new R();
Backbone.history.start();

var R2 = Backbone.Router.extend({
    routes: {
        'added': 'added'
    },
    added: function() {
        console.log('added: '+window.location.hash);
    }
});
var r2 = new R2(); 
```

和一个演示

```
var R = Backbone.Router.extend({
  routes: {
    "help": "help"
  },
  help: function() {
      console.log('help : '+window.location.hash);
  }
});

var r = new R();
Backbone.history.start();
r.navigate('help', {trigger: true});

var R2 = Backbone.Router.extend({
  routes: {
    "r2": "r2"
  },
  r2: function() {
    console.log('r2 : '+window.location.hash);
  }
});
var r2 = new R2();
r2.navigate('r2', {trigger: true});

r.route('added', 'added', function() {
    console.log('added : '+window.location.hash);
});

r.navigate('added', {trigger: true});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>

<a href='#help'>help</a>
<a href='#r2'>r2</a>
<a href='#added'>added</a>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T23:57:13.123

我写了一个带有路由器的小 .js 文件。它应该可用于不同的目的，因此您可以在 init 上传递所需的回调（路由）。init 接受一个参数 routes （一个数组），其中包含以下信息：

```
routeId:"book/:id",
routeName:"routeBooks",
routeCallback: $.proxy(function(id){ 
 // $.proxy() is a jQuery function that ensures you call the callback in the right context
      // do fandy stuff here.
}) 
```

要解析路线，我使用以下内容：

```
for( route in routes ){
    routesFromConfig[routes[route].routeId.toString()] = routes[route].routeName;
}
var ModalRouter = Backbone.Router.extend({
    routes:routesFromConfig
});
router = new ModalRouter();
for( route in routes ){
    // test if the callback is a function
    if(_.isFunction(routes[route].routeCallback)){
        router.on('route:'+routes[route].routeName.toString(), routes[route].routeCallback);
    }
}

Backbone.history.start(); 
```

我希望这有助于从您的应用程序中其他地方传递的路由设置路由器

# java - Primefaces DataTable - rowSelectListener 在行内隐藏命令按钮

> ID：12933006
> 
> 赞同：1
> 
> 时间：2012-10-17T11:10:16.183
> 
> 标签：java, datatable, primefaces

我有一个 PrimeFaces DataTable，其中每一行都有一个**save**、**delete**和另一个**commandButton**。dataTable 有`selectionMode="single"`一个`rowSelectListener`. 当我单击命令按钮时，`rowSelectListener`会触发，但不会触发 commandButton 的操作。

该怎么办？我需要两个都开火！

我不能使用`immediate="true"`，因为在 dataTable 之外有一些表单字段必须提交。它适用`immediate="true"`于在命令按钮中添加。

Primafaces 版本：2.2.1 JSF 版本：2.0.3

提前感谢您提供任何线索！

代码：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
            xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:v="http://java.sun.com/jsf/composite/composite"
            xmlns:p="http://primefaces.prime.com.tr/ui">
    <h:form id="contractReasonAddFormId">
            <span class="error">
                <h:messages /> 
            </span>
    <h:panelGrid columns="2" cellspacing="5" >
        <h:outputLabel class="label" value="#{resourceBundle.coAddReason_coStatus_label_Key}" />
        <h:outputText class="output" value="#{selectedContractService != null ? selectedContractService.COS_STATUS_DESC : contract.CO_STATUS_DESC}" />
        <h:outputLabel class="label" for="reasonId" value="#{resourceBundle.contractChangeStatus_NewReason_Key}:" />
        <h:selectOneMenu id="reasonId" value="#{bbNewStatusReason.selectedString}" required="true" requiredMessage="#{resourceBundle.contractChangeStatus_NewReason_Key} #{resourceBundle.valueIsRequired}">
            <f:selectItem itemValue="" itemLabel="- #{resourceBundle.contractChangeStatus_SelectReason_Key} -" />
            <f:selectItems value="#{bbNewStatusReason.list}" var="r" itemValue="#{r.REASON}" itemLabel="#{r.RS_DES}" />
        </h:selectOneMenu>
    </h:panelGrid>
    <!-- some other form fields --->
    <h:panelGrid>
        <p:dataTable 
        id="currentStatusReasonTable" 
        value="${bbCurrentStatusReason.list}" 
        var="currStReason"
        selectionMode="single"
        selection="#{bbCurrentStatusReason.selectedItem}"
        rowSelectListener="#{contractAddReasonAction.selectReason}" onRowSelectUpdate="reasonValidityTimes"         
        >
            <p:column sortBy="#{currStReason.RS_DES}" headerText="#{resourceBundle.coAddReason_currStReason_label_Key}">
                <h:outputText value="#{currStReason.RS_DES}: "/>
            </p:column>
            <!-- Other columns -->
            <p:column headerText="#{resourceBundle.coAddReason_action_facet_Key}">
                <p:commandButton id="updateReasonId" action="dlgUpdate" image="ui-icon ui-icon-pencil" title='#{resourceBundle["button.save"]}' disabled="#{selectedContractService != null ? currStReason.LEVEL == 'C' : false}" >
                    <f:setPropertyActionListener target="#{bbCurrentStatusReason.selectedItem}" value="#{currStReason}" />
                </p:commandButton>
                <p:commandButton id="deleteReasonId" action="dlgDelete" image="ui-icon ui-icon-circle-minus" title='#{resourceBundle["button.delete"]}' disabled="#{selectedContractService != null ? currStReason.LEVEL == 'C' : false}" >
                    <f:setPropertyActionListener target="#{bbCurrentStatusReason.selectedItem}" value="#{currStReason}" />
                </p:commandButton>
                <p:commandButton id="generateDeleteDocumentsId" action="generateDeleteDocuments" image="ui-icon" title='#{resourceBundle["button.generateDocumentsForDel"]}' immediate="true" rendered="#{showPrintDocument != null}" >
                    <f:setPropertyActionListener target="#{bbCurrentStatusReason.selectedItem}" value="#{currStReason}" />
                </p:commandButton>
            </p:column>

        </p:dataTable>

    </h:panelGrid>
    </h:form> 
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:26:06.790

我遇到了同样的问题。我最终在 commandButton 上使用的是 onclick 属性中的 event.stopPropagation() 。这是我的删除按钮。

```
<p:commandButton icon="ui-icon-trash"
                             onclick="connDelConfirm.show(); event.stopPropagation();" 
                             actionListener="#{connectionController.setSelectedConnection(connection)}"
                             disabled="#{connection.deleted}"/> 
```

onclick 属性上的其他操作打开删除操作的确认对话框。由于事件的传播已停止。我需要一种方法来仍然设置要删除的选定项目。这是通过动作监听器完成的。我只是简单地调用了 bean 中的 setSelectedItem 方法，并将 dataTable 中的 'var' 属性传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:11:58.427

谢谢你的回答。然而，我面临的问题的根本原因却完全是另外一回事。

发生的事情是动作被触发了，但是有一个带有“required = true”的jsf元素——这引发了一个验证错误，它没有出现在任何地方——甚至在控制台中也没有。更新（在 primaface 命令按钮，ajax - 使用 'update=' 属性）页面布局的错误消息显示窗格后，可以看到错误消息。

谢谢你，拉贾希·穆克吉

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:31:42.553

对带有 .的输入组件使用**组件绑定**`immediate="true"`。

您必须使用. 在**输入组件**和**操作组件**`immediate="true"`之间播放。

您需要参考[JSF Lifecycle](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html)的效果`immediate="true"`；

BeanOne.java

```
@ManagedBean(name="BeanOne")
@RequestScoped
public class BeanOne {
    private HtmlInputText inputText;

    public HtmlInputText getInputText() {
        return inputText;
    }

    public void setInputText(HtmlInputText inputText) {
        this.inputText = inputText;
    }

    public void show() {
        System.out.println("HtmlInputText ==>" + inputText.getValue());
    }
} 
```

pageOne.xml

```
<h:inputText binding="#{BeanOne.inputText}" immediate="true"/><br/>
<h:commandButton value="Show_1" action="#{BeanOne.show}" immediate="true"/>
<h:commandButton value="Show_2" action="#{BeanOne.show}"/> 
```

# iphone - 如何在 NavigationController 上弹出 UIViewController 并同时推送 UIView

> ID：12933007
> 
> 赞同：0
> 
> 时间：2012-10-17T11:10:16.067
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller

我在`UINavigationController`...上遇到问题

我有这个层次结构

```
UINavigationController
 |- root controller
 |- ViewController A 
```

我有一个按钮可以`ViewController A`做某事并按下`ViewController B`，但我想`ViewController A`在添加之前删除`ViewController B`

所以层次结构在这个过程之后是这样的

```
UINavigationController
 |- root controller
 |- ViewController B 
```

它应该从`ViewController A`to滑动`ViewController B`，但如果你按回，它会返回到`root Controller`

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:23:06.160

您应该使用 UINavigationController 的 setViewControllers 方法，只需将 root 和 viewController B 作为数组添加

```
//get the existing navigationController view stack
NSMutableArray* newViewControllers = [NSMutableArray arrayWithArray:self.navigationController.viewControllers];

//drop the last viewController and replace it with the new one!
ViewControllerB *childController = [[ViewControllerB alloc] initWithNibName:@"ViewControllerB" bundle:nil];
[newViewControllers replaceObjectAtIndex:newViewControllers.count-1 withObject:self];

//set the new view Controllers in the navigationController Stack
[self.navigationController setViewControllers:newViewControllers animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:19:42.187

可能这可能会帮助你。

[iphone NavigationController 清除视图堆栈](https://stackoverflow.com/questions/10923732/iphone-navigationcontroller-clear-views-stack)

这是解决问题的一种不同的方法。如果您有可用的所需视图控制器的实例，您可以随时弹出它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:25:06.740

看一下`[UINavigationController setViewControllers:animated:]`

```
[self.navigationController setViewControllers:@[rootViewController, viewControllerB] animated:YES]; 
```

这应该会产生一个推送动画。

但说实话：如果你有这样的 UI，你最喜欢一开始就不想使用 NavigationController，因为这会让用户感到困惑。UINavigationController 实现的比喻非常简单。你真的不想惹这个。您可能想查看 Apple 人机界面指南，然后选择另一种展示您的观点的选项！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-17T11:14:08.250

最好的方法是使用新的 ViewController 启动 navigationController，而不是同时删除和推送。

从 ViewController A 推送时，

```
[self.navigationController initWithRootViewController:ViewControllerB]; 
```

# sip - LYNC - SIP“413 - 请求实体太大”错误订阅请求

> ID：12933008
> 
> 赞同：3
> 
> 时间：2012-10-17T11:10:24.753
> 
> 标签：sip, lync, lync-2010, lync-server-2010

我目前正在尝试将两个 Lync 域与中间的一个自定义 SIP 代理联合起来。问题是 Lync 服务器在通过代理后将回复“413 - 实体太大”以订阅来自其他 Lync 域的请求 (msrtc-adrl-categorylist)。

但是，当我使用 SIP 模拟器 SIPp 发送类似的消息时，即使它通过 SIP 代理，订阅也会被接受。

这两条消息非常相似。代理添加一条记录路由，并在 From 标记的末尾附加一个 ID。它不会把手放在身体上。

内容长度的不同是因为 SIPp 在正文末尾添加了一个 CRLF，而 Lync 没有。

我看不出这个请求有什么问题。在目标域的 Lync Edge 上记录了以下消息。

LYNC 订阅 - 被拒绝

```
Start-Line: SUBSCRIBE sip:ragg@lync2.com SIP/2.0
From: <sip:mdef@lync1.com>;epid=75bdd22553;tag=vl57cpy2rb72lu15i7awk22h0100003f1410
To: <sip:ragg@lync2.com>
CSeq: 1 SUBSCRIBE
Call-ID: 3ad1662aa2d84bc5a7de15f5d2ecd0be
Record-Route: <sip:smf1.testucfed.com:5061;lr>
Max-Forwards: 68
Via: SIP/2.0/TLS smf1.testucfed.com:5061;branch=z9hG4bKfspbWpOjnrsr3kELP8S9
Via: SIP/2.0/TCP 10.0.0.6:5060;branch=z9hG4bKfspbkK8M7FQrQmqN99a9
User-Agent: UCCAPI/4.0.7577.4103 OC/4.0.7577.4109 (Microsoft Lync 2010)
Event: presence
Accept: application/msrtc-event-categories+xml, application/xpidf+xml,     text/xml+msrtc.pidf, application/pidf+xml, application/rlmi+xml, multipart/related
Supported: com.microsoft.autoextend
Supported: ms-piggyback-first-notify
ms-asserted-verification-level: ms-source-verified-user=verified
Content-Type: application/msrtc-adrl-categorylist+xml
Content-Length: 464
Contact: <sip:smf1.testucfed.com:5061>
Message-Body: 
<batchSub xmlns="http://schemas.microsoft.com/2006/01/sip/batch-subscribe"                uri="sip:mdef@lync1.com" name="">
    <action name="subscribe" id="104999392">
        <adhocList>    
            <resource uri="sip:ragg@lync2.com"/>
        </adhocList>
        <categoryList xmlns="http://schemas.microsoft.com/2006/09/sip/categorylist">
            <category name="state"/>
            <category name="note"/>
            <category name="services"/>
            <category name="contactCard"/>
            <category name="calendarData"/>
        </categoryList>
    </action>
</batchSub> 
```

SIPp 订阅 - 接受

```
Start-Line: SUBSCRIBE sip:ragg@lync2.com SIP/2.0
From: <sip:mdef@lync1.com>;epid=75bdd22553;tag=1iy5s1s4humjf184oeqyeitztd0100003f1410
To: <sip:ragg@lync2.com>
CSeq: 1 SUBSCRIBE
Call-ID: 1-32615@212.166.45.124
Record-Route: <sip:smf1.testucfed.com:5061;lr>
Max-Forwards: 68
Via: SIP/2.0/TLS smf1.testucfed.com:5061;branch=z9hG4bKfspbIP0PgNyO4vZelNvG
Via: SIP/2.0/TCP 10.0.0.6:5060;branch=z9hG4bKfspbWS366kCidcbxJt9m
Event: presence
Accept: application/msrtc-event-categories+xml, application/xpidf+xml,     text/xml+msrtc.pidf, application/pidf+xml, application/rlmi+xml, multipart/related
User-Agent: UCCAPI/4.0.7577.4103 OC/4.0.7577.4109 (Microsoft Lync 2010)
Supported: com.microsoft.autoextend
Supported: ms-piggyback-first-notify
ms-asserted-verification-level: ms-source-verified-user=verified
Content-Type: application/msrtc-adrl-categorylist+xml
Content-Length: 466
Contact: <sip:smf1.testucfed.com:5061>
Message-Body: 
<batchSub xmlns="http://schemas.microsoft.com/2006/01/sip/batch-subscribe"     uri="sip:mdef@lync1.com" name="">
    <action name="subscribe" id="104999648">
        <adhocList>
            <resource uri="sip:ragg@lync2.com"/>
        </adhocList>
        <categoryList xmlns="http://schemas.microsoft.com/2006/09/sip/categorylist">
            <category name="state"/>
            <category name="note"/>
            <category name="services"/>
            <category name="contactCard"/>
            <category name="calendarData"/>
        </categoryList>
    </action>
</batchSub> 
```

回复

```
Start-Line: SIP/2.0 413 Request entity too large
From: <sip:mdef@lync1.com>;epid=75bdd22553;tag=vl57cpy2rb72lu15i7awk22h0100003f1410
To: <sip:ragg@lync2.com>;tag=5F72F2201902C33E22FE6C4063EC56AD
CSeq: 1 SUBSCRIBE
Call-ID: 3ad1662aa2d84bc5a7de15f5d2ecd0be
Via: SIP/2.0/TLS     10.0.0.7:38020;branch=z9hG4bKDA21D3D8.2E84E1112774D915;branched=FALSE;ms-received-    port=38020;ms-received-cid=400
Via: SIP/2.0/TLS     smf1.testucfed.com:5061;branch=z9hG4bKfspbWpOjnrsr3kELP8S9;received=212.166.45.124;ms-received-port=51456;ms-received-cid=A3300
Via: SIP/2.0/TCP 10.0.0.6:5060;branch=z9hG4bKfspbkK8M7FQrQmqN99a9
ms-diagnostics: 4008;reason="Input data too large - One of the paramaters to the sproc     exceeds limit";source="ARIW002.lync2.com"
Server: RTC/4.0
Content-Length: 0
Message-Body: – 
```

有人知道什么会触发此错误吗？错误消息在这里并没有太大帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:33:18.360

我终于设法发现了问题。

Lync 服务器存储“对话 ID”，即“呼叫 ID”+“发件人标签”+“收件人标签”。通过在“From 标记”的末尾附加一些额外的数据，“Dialog ID”的大小超过了它的限制大小。

# c++ - 我从 std::multimap.lower_bound 得到一个无效指针

> ID：12933012
> 
> 赞同：0
> 
> 时间：2012-10-17T11:10:33.563
> 
> 标签：c++, multimap

我使用 std::multimap.lower_bound 方法返回范围结果。但是在容器的相同内容中，有时我得到了错误的迭代器对，它使我的程序崩溃。我可以用visual studio看到容器中的内容，它们都是正确的。而且我使用了multimap的find方法，效果也很好。它只是返回**该死的无效迭代器对**并使我的程序崩溃，最重要的是，我无法进行任何测试来跳过这种情况。这种情况有什么问题？

我的示例代码如下：

```
std::multimap<std::string,std::string>::iterator it = tagged_files.lower_bound("vocal");
std::multimap<std::string,std::string>::iterator it_end = tagged_files.upper_bound("vocal"); 
```

在大多数情况下，他们运作良好。当我打印`it`并`it_end`使用 %p（使用 printf）时，它们的结果是 8f98ab9（一个指针值）和 0（同一个键）。当我得到无效的迭代器时，调试消息将显示 8f98ab9（相同值）和 2b8a839（奇怪值）。

此外，大小`tagged_files`始终相同。在整个会话期间根本没有插入任何项目，即使收到无效的迭代器也是如此。printf %d with 也证明了这一点`tagged_files.size()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:15:11.397

当我在 90% 的情况下使用诸如 map、multimaps 之类的 std 容器的无效迭代器时，原因是我在删除该容器中的项目时正在迭代容器。

一旦一个项目在容器中被移除（或者甚至被插入到其他容器中），迭代器的有效状态**就不再得到保证**。

编辑：就像下面的评论所说，迭代器的无效规则因容器而异。cf[这个问题](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

edit2：你没有向我们展示你如何取消引用你的迭代器。您的迭代器是一个 std::pair，**您应该**在取消引用之前检查返回的迭代器不等于 yourContainer.end() 。但是由于您没有向我们展示您取消对迭代器的引用的代码，因此很难说。你没有向我们展示你输出痕迹的方式。

# database-design - 如何设计产品集/包的数据库

> ID：12933020
> 
> 赞同：2
> 
> 时间：2012-10-17T11:11:00.630
> 
> 标签：database-design, inventory-management

我正在为库存系统设计一个数据库。我的客户以两种不同的方式销售产品：

1.  整套（如浴缸配件包中的 8 件套）
2.  这些零件中的任何一个都可以单独出售

如果已售出一个或任意数量的零件，他们需要一份报告来了解他们总共有多少整套库存。

例如：

如果`part-a`、`part-b`、`part-c`和`part-d`已从一个包装中出售，并且 `part-e`、`part-f`、`part-g`和`part-h`已从另一包装中出售，则库存状态报告应显示`ONE COMPLETE PACK`8 个部件。

我试图通过将产品划分为类别和子类别来做到这一点，但无法准确获取库存状态报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:19:23.243

您所描述的通常被称为[“材料清单”](http://en.wikipedia.org/wiki/Bill_of_materials)。

有几种方法可以在数据库中实现这一点 -[这](http://www.tdan.com/view-special-features/5400/)是一个不错的概述。

# java - 挂毯中的 Raty 组件

> ID：12933022
> 
> 赞同：0
> 
> 时间：2012-10-17T11:11:08.367
> 
> 标签：java, jquery, web-frameworks, tapestry

我想实现比率组件并将其绑定到现有数据库。我已经看到了 JQUERY 项目的 raty 组件并且似乎没问题，但是没有演示在任何地方出现，我无法弄清楚它是如何正确工作的。

[http://tapestry5-jquery.com/mixins/docsraty](http://tapestry5-jquery.com/mixins/docsraty)

以前有人处理过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T13:26:30.583

尝试这个

```
<div t:type="any" t:mixins="jquery/raty" t:ratyValue="4"></div> 
```

# android - 如何在 Android 应用程序中做（或避免）永久运行的服务？

> ID：12933027
> 
> 赞同：3
> 
> 时间：2012-10-17T11:11:17.790
> 
> 标签：android, android-service

这个问题是在如何编写好程序的更哲学问题与如何保护电池和系统资源的基于事实的问题之间的一种平衡行为。具体来说，它与 Android 服务有关，为了执行所需的任务，必须在手机的后台永久运行。

就我而言，我有几个服务在后台运行。一个扫描手机是否连接到 WiFi，如果是，设置一个变量，一个检查位置并在找到足够精确的位置时更新位置，一个检查接近传感器，一个分析噪音水平，打开检查 RSS-Feed 以获取更新...

该应用程序有几个问题，我认为它们可能源于这个设计决定。大多数情况下，（除了通过 SensorEventListener 提供更新的位置服务和接近传感器）我所有服务的架构看起来像这样

```
public class ArchetypicalService extends Service
{
Checker checker;

public SharedPreferences prefs;
public final static String PREFS = Constants.PREFS;

@Override
public IBinder onBind(Intent intent) 
{
    return null;
}

@Override
public void onCreate() 
{
    prefs = getSharedPreferences(PREFS, 0);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) 
{
    checker = new Checker();
    checker.run();
    return START_STICKY;
}

@Override
public void onDestroy() 
{
    super.onDestroy();
}

private class Checker implements Runnable
{
    private Handler handler = new Handler();
    public static final int checkingDelay = 1000; // this number varies depending on what purpose this service has
    @Override
    public void run() 
    {
        //what happends here depends on what the service does
        handler.postDelayed(this, checkingDelay);
    }
}
} 
```

这些服务在应用程序启动时启动。像这样：

```
Intent intent = new Intent(this,ArchetypicalService.class);
startService(intent); 
```

感谢 START_STICKY，即使我们停止活动，该服务也会继续运行。当我写这一切时，这一切对我来说似乎是教科书，但我使用 android 工作的次数越多，我遇到的博客条目就越多，这些博客条目告诉我不应该实现永久运行的服务。它们不仅是糟糕的风格，还使应用程序更有可能崩溃并耗尽电池和手机资源。这可能是对的：我的应用程序经常崩溃并耗尽电池。

所以，我的问题是：**如果一个功能，比如传感器扫描或检查互联网上的数据，必须在后台定期完成，即使所有活动都已关闭，有没有更好的方法来实现它？**（虽然我欢迎所有答案或想法，但我更欢迎那些提供一些有用示例代码的答案或想法）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:41:03.047

> 如果一个功能，如传感器扫描或检查互联网上的数据，必须在后台定期完成，即使所有活动都已关闭，有没有更好的方法来实现它？

用于`AlarmManager`安排工作定期发生。

例如，以“检查 RSS-Feed 的更新”为例。将服务保存在内存中，玩弄它的虚拟拇指，等待时间过去，直到再次检查 RSS 提要，这对你来说是荒谬的。在其他平台上，您将使用类似`cron`或 Windows 计划任务 - 在 Android 上，相当于`AlarmManager`.

几乎所有流程是“做工作，等待某个固定时间段，完成工作，等待某个固定时间段，......”的情况都应该使用`AlarmManager`and来实现`IntentService`，后者给你一个后台线程并自动工作完成后关闭。这样，您只有在主动向用户交付价值时才会消耗 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:23:48.317

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)。服务不创建单独的线程。如果它是一个长时间运行的操作，你需要在线程中运行它们。因此，如果有很多服务，那么在主 ui 线程上运行所有内容都会消耗内存。确保在线程中运行。可能会解决您的应用程序崩溃问题。另请检查此链接。[我怎样才能保持每 5 秒请求一个页面而不耗尽电池？](https://stackoverflow.com/questions/6847526/how-can-i-keep-requesting-a-page-every-5-seconds-and-not-kill-the-battery).

# android - 版本 >= 蜂窝的背景图片

> ID：12933032
> 
> 赞同：1
> 
> 时间：2012-10-17T11:11:45.310
> 
> 标签：android, android-layout

我的应用在不同 Android 版本上的布局存在问题。我想向我的片段添加背景图像。在 Android 2.3.3 上它可以工作，但在版本 > 3 上我可以做我想做的事，它不会出现。

我的 Activity 的 activity_main.xml 看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
>
    <TexView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World"
        />
</LinearLayout> 
```

我的活动看起来像这样：

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}
} 
```

我也尝试使用样式，但没有帮助：

```
<style name="AppTheme" parent="android:Theme.Light">
    <item name="android:background">@drawable/background</item>
</style> 
```

有没有其他方法可以解决这个问题？

# c# - 这个正则表达式是什么意思

> ID：12933034
> 
> 赞同：7
> 
> 时间：2012-10-17T11:12:08.923
> 
> 标签：c#, regex

我真正需要知道的是：

1.  是什么`(?(`意思？
2.  是什么`?:`意思？

我想弄清楚的正则表达式是：

（注意以下正则表达式中的上述符号）

```
(?(?=and )(and )|(blah))(?:[1][9]|[2][0])[0-9][0-9] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:15:37.740

`(?(?=and )(and )|(blah))`模式的使用就像 if-then-else 一样 `(?(expression)yes|no)` ie`and`将被匹配 if `and`is there else`blah`将被匹配

`(?:)`是一个非捕获组。因此它不会包含在组中或用作反向引用 \1

所以，

```
(?(?=and )(and )|(blah))(?:[1][9]|[2][0])[0-9][0-9] 
```

会匹配

```
and 1900
blah2000
and 2012
blah2013 
```

**注意**（这都是关于组的）

使用这个 regex 可以实现同样的目的 `(and |blah)(?:[1][9]|[2][0])[0-9][0-9]`。这些正则表达式唯一不同的是所形成的组数。

所以我的正则表达式将形成 1 个组，其中包含`and`或`blah`

您的正则表达式不会形成任何组。只有匹配时才会形成一个组`blah`..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:16:43.790

以下是一些模式的快速参考：

```
.   Any character except newline.
\.  A period (and so on for \*, \(, \\, etc.)
^   The start of the string.
$   The end of the string.
\d,\w,\s    A digit, word character [A-Za-z0-9_], or whitespace.
\D,\W,\S    Anything except a digit, word character, or whitespace.
[abc]   Character a, b, or c.
[a-z]   a through z.
[^abc]  Any character except a, b, or c.
aa|bb   Either aa or bb.
?   Zero or one of the preceding element.
*   Zero or more of the preceding element.
+   One or more of the preceding element.
{n} Exactly n of the preceding element.
{n,}    n or more of the preceding element.
{m,n}   Between m and n of the preceding element.
??,*?,+?,
{n}?, etc.  Same as above, but as few as possible.
(expr)  Capture expr for use with \1, etc.
(?:expr)    Non-capturing group.
(?=expr)    Followed by expr.
(?!expr)    Not followed by expr. 
```

表达式`(?(?=and )(and )|(blah))`是`if-else`表达式:)

你可以在这里测试正则表达式：[Regexpal.com](http://regexpal.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T11:17:46.160

```
(?:...) 
```

是一个非捕获[组](http://www.regular-expressions.info/brackets.html)。它的工作方式与 类似`(...)`，但不会创建反向引用（`\1`等）以供以后重用。

```
(?(condition)true|else) 
```

是一个尝试匹配的[条件](http://www.regular-expressions.info/conditional.html)`condition`；如果成功，它将尝试匹配`true`，如果不成功，它将尝试匹配`else`。

这是一个很少见的正则表达式构造，因为它没有太多用例。在你的情况下，

```
(?(?=and )(and )|(blah)) 
```

可以改写为

```
(and |blah) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:16:18.097

`?:`是非捕获组。 `(?ifthen|else)`用于构造 if, then 表达式。

你可以在这里阅读更多关于这些的信息。

[http://www.regular-expressions.info/conditional.html](http://www.regular-expressions.info/conditional.html)

# css - Float:right div 不会显示内联

> ID：12933038
> 
> 赞同：0
> 
> 时间：2012-10-17T11:12:27.150
> 
> 标签：css, google-chrome, css-float

我刚刚将我的网站上传到主机，但当我从我的桌面查看它时出现了一个问题。

应该向右浮动的“侧边栏”类似乎将其自身发送到页面底部。

当我重新调整浏览器的大小以测试站点并检查媒体查询是否正常工作，然后再次最大化浏览器时，“关于”部分将自身定位在它最初应该具有的位置。

该问题似乎只发生在`Chrome`. （已经在 IE 和 FF 中测试过，看起来都很好）

[http://barbsbristol.co.uk/](http://barbsbristol.co.uk/)

是网站和样式表是

[http://barbsbristol.co.uk/style.css](http://barbsbristol.co.uk/style.css)

&`css`侧边栏类的在下面

```
.sidebar 
 {
     float:right; 
     display:inline-block;  
     margin-top:50px;  
     width:150px; 
     height:100px; 
     text-align:center;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:20:50.113

它在 chrome 和其他浏览器中对我来说也可以正常工作.. 很少有样式可能会被相同的浏览器但不同的版本搞砸.. 我已经在相同的浏览器不同版本中遇到了这些问题..

为什么不使用检查元素并通过减小宽度来检查？因为它对我来说很好用，所以我不能建议其他任何东西。

# sencha-touch-2 - Sencha 2 原生 iOS 构建拷贝操作失败

> ID：12933041
> 
> 赞同：0
> 
> 时间：2012-10-17T11:12:42.157
> 
> 标签：sencha-touch-2

我不明白为什么我会收到此错误。以及为什么尝试将“../webapp”文件夹复制到icon.png图像，看起来目标和源文件夹已切换。

```
C:\projectsGit\mybipper\portal\bk-servlets\src\main\webapp\parentapp>sencha package build packager.json
[INFO] Can not open source file
The application was successfully packaged
Bundle Seed ID is missing from config file
Failed to package application

[ERROR] Copy operation failed src=../build\MobileKids.app\webapp\ dst=../build\MobileKids.app\icon.png 
```

我的打包程序配置：

```
{
    "applicationName":"MobileKids",
    "applicationId":"TC3BU5LD52.com.bipper.mobilekids",
    "versionString":"1.1",
    "iconName:":"icon.png",
    "inputPath":".",
    "outputPath":"../build",
    "configuration":"Debug",
    "platform":"iOS",
    "deviceType":"Universal",
    "certificatePath":"Certificate_key.p12",
    "certificateAlias":"iPhone Developer: Thomas Vervik (TC3BU5LD52)",
    "sdkPath":"C:/Program Files (x86)/Android/android-sdk",
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:27:36.130

呵呵，没关系，是我自己的错误，我在 iconName 中有一个 : ，如下所示：

```
"iconName:":"icon.png", 
```

# mysql - mysql修复无效日期

> ID：12933042
> 
> 赞同：6
> 
> 时间：2012-10-17T11:12:58.937
> 
> 标签：mysql

我的表中有一些无效日期。我听说我可以禁用严格模式或使用不起作用的 sql_mode ALLOW_INVALID_DATES（已通过选择 @@global.sql_mode 确认并重新启动服务器）。

我的问题是，我不能修复这些“无效”日期吗？我将无法在每台服务器上禁用严格模式。

```
select * from table
>> Mysql2::Error: Invalid date: 1900-00-00

mysql --version
mysql  Ver 14.14 Distrib 5.1.61, for debian-linux-gnu (i686) using readline 6.1

mysql> select @@global.sql_mode;
+---------------------+
| @@global.sql_mode   |
+---------------------+
| ALLOW_INVALID_DATES | 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T12:56:31.427

看起来您的错误消息来自您的 MySQL 客户端，而不是服务器。因此，设置服务器严格模式不会帮助您使用此客户端显示这些日期。

您的数据中似乎有一些 2012-09-31 或 2013-02-29 样式的日期。它们的格式正确，但其他方面是错误的。在 MySQL 的 5.0.2 之前的版本中，这些没有被正确地捕获到您的数据中。现在，您的服务器设置`ALLOW_INVALID_DATES`为不会对它们作呕，而是将它们转换为“0000-00-00”。客户正在嘲笑他们。

清理它的第一步是识别有问题的行。你可以试试这个。

首先，开启`ALLOW_INVALID_DATES`

然后，运行此查询以查看您的表。不要使用`SELECT *`

```
 SELECT col,col,col,DATE_FORMAT(datecol,'%Y-%m-%d') 
    FROM mytable
   ORDER BY DATE_FORMAT(datecol,'%Y-%m-%d') 
```

尝试从结果集中找出哪些日期是垃圾。它们可能会放在此 select 语句中的第一个位置，但您将不得不费力地寻找它们。

接下来，弄清楚你想如何修复它们。删除行？将日期更改为 1941-12-07（臭名昭著的日期）？我们无法告诉您您需要在这里做什么。

然后，修复它们。如果只有一两个，就一个一个修复。

```
 UPDATE mytable
     SET datecol='whatever replacement date'
   WHERE id='the id of the offending row.' 
```

或者

```
 DELETE FROM mytable
        WHERE id='the id of the offending row.' 
```

如果有数千个，你可以用这样的东西批量修复它们。*但是，如果没有首先在测试服务器上非常仔细地解决问题，请不要这样做。如果你犯了一个错误，你会毁了你的桌子。*

```
 UPDATE mytable
     SET datecol='whatever replacement date'
   WHERE '0000-00-00' = DATE_FORMAT(datecol,'%Y-%m-%d') 
```

在你纠正完你的问题后，回去做你的`SELECT *`，以确保你得到了所有的问题。

然后禁用`ALLOW_INVALID_DATES`并且永远不再重新启用它。

那应该收拾烂摊子。请注意，现实世界的数据总是有些行并不完美。

# java - 休眠，一对多，孩子不与父母一起插入

> ID：12933043
> 
> 赞同：0
> 
> 时间：2012-10-17T11:12:59.020
> 
> 标签：java, hibernate

我有一个双向的一对多关系，即一个父母可以有很多孩子，一个孩子必须有一个父母，很多孩子可以有同一个父母。

请参阅以下休眠 xml 配置。这适用于加载对象。通过 id 选择父对象成功返回包含一组子对象（如果有）的父对象。

但是，当我创建一个新的父级，添加一些子级，然后要求休眠创建父级时，子级不会随之保存。我会认为hibernate会为我解决这个问题？

我怀疑我的问题是因为父级有一个 db 托管序列作为 id，所以在插入父级之前，子级不能拥有父级的 id。但是，这对hibernate来说应该不会太难处理吧？

父.hbm.xml；

```
<hibernate-mapping default-cascade="none">
    <class name="com.mydomain.ParentImpl" table="PARENT" dynamic-insert="false" dynamic-update="false">
        <id name="id" type="java.lang.Long" unsaved-value="null">
            <column name="ID" sql-type="BIGINT"/>
            <generator class="sequence">
                <param name="sequence">PARENT_SEQ</param>
            </generator>
        </id>
        ....
        lots of other properties
        ...
        <set name="children" lazy="true" fetch="select" inverse="true">
            <key foreign-key="parent_child_fkc">
                <column name="PARENT_FK" sql-type="BIGINT"/>
            </key>
            <one-to-many class="com.mydomain.ChildImpl" not-found="exception"/>
        </set>
   </class>
</hibernate-mapping> 
```

Child.hbm.xml；

```
<hibernate-mapping default-cascade="none">
    <class name="com.mydomain.ChildImpl" table="CHILD" dynamic-insert="false" dynamic-update="false">
        <id name="id" type="java.lang.Integer" unsaved-value="null">
            <column name="ID" sql-type="INTEGER"/>
            <generator class="sequence">
                <param name="sequence">child_seq</param>
            </generator>
        </id>
        <many-to-one name="parent" class="com.mydomain.ParentImpl" foreign-key="parent_child_fkc" not-null="true" lazy="proxy" fetch="select">
            <column name="PARENT_FK" not-null="true" sql-type="BIGINT"/>
        </many-to-one>
        ...
        lots of other properties
        ...
    </class>
</hibernate-mapping> 
```

假设 Parent 类有一个方法；

```
public void addChild(Child child){
    if(children == null) {
        children = new HashSet<Child>();
    }
    children.add(child);
    child.setParent(this);
} 
```

然后在某处的代码中；

```
Parent parent = new Parent();
parent.addChild(new Child());
parent.addChild(new Child());
getHibernateTemplate().save(parent); 
```

结果是 Parent 被保存到 PARENT 表，CHILD 表保持为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:34:45.667

您需要使用映射和级联来保存子对象。

IE

```
<set name="children" inverse="true" cascade="all-delete-orphan">
<key column="parent_id"/>
<one-to-many class="Child"/> 
```

看这里：

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/example-parentchild.html#example-parentchild-update](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/example-parentchild.html#example-parentchild-update)

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html)

# primefaces - 根据用户角色混淆/隐藏/屏蔽用户界面中的机密信息

> ID：12933050
> 
> 赞同：0
> 
> 时间：2012-10-17T11:13:24.963
> 
> 标签：primefaces, composite-component

我正在研究 Primefaces。在显示客户信息时，对于某些客户，有些字段是保密的，应该显示为XXXXXXXXXX，对于某些客户，这些字段可以显示值。

我想有一个复合组件来接受渲染和价值对象。根据客户，我将显示带有静态文本“XXXXXXXXXX”的 outputText 和带有绑定到支持 bean 属性的值的 inputText。

```
//Composite component code
<composite:interface>
    <composite:attribute name="render" />
    <composite:attribute name="value" />
</composite:interface>
<composite:implementation>
    <h:outputText value=" XXXXXXXXXX " rendered="#{cc.attrs.render}" />
    <p:inputText value="#{cc.attrs.value}" rendered="#{!cc.attrs.render}">
        <f:convertNumber type="currency" />
    </p:inputText>
</composite:implementation>

//Using composite component
<util:input id="accountBalance" render="#{myBean.vipCustomer}" value="#{ myBean.value}" />

//myBean    
public class Account implements Serializable {
    private double value;
    private boolean vipCustomer = false;
// getter's and setter's goes here.....
} 
```

这是安全的方法吗？由于 JSF 或 Primefaces 的未来版本，是否会有任何维护问题？有没有更好的办法？感谢您的任何意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:50:46.027

我想我会尝试仅使用一个组件而不是 2 个组件来完成此操作。例如：`<p:inputText value="#{cc.attrs.render ? cc.attrs.value : 'XXXXX'}"> <f:convertNumber type="currency" /> </p:inputText>`

在您的 bean 中，在设置新值之前检查“XXXXX”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:31:02.340

使用 preRenderView 监听器将机密字段的值设置为 XXXXXXXXXX

# thread-safety - SDN中的线程安全域模型getOrCreate？

> ID：12933052
> 
> 赞同：0
> 
> 时间：2012-10-17T11:13:40.277
> 
> 标签：thread-safety, neo4j, spring-data-neo4j

使用 SDN 2.1.0.BUILD-SNAPSHOT

是否有执行 getOrCreate 的域级线程安全方式？

我有

```
@NodeEntity
public class ResourceEntity  extends Entity {

@Fetch
@Indexed(unique=true)
String url;

@Fetch
String platform;
} 
```

我想要的是能够访问neo4j REST数据库，并添加一个新的ResourceEntity，或者已经在那里检索一个，如果已经有一个具有指定url字段的...

我找不到的是一种以原子方式执行此操作的方法。它需要以原子方式工作，因为将有多个线程调用此代码。

```
neo4jTemplate.save(resourceEntity); 
```

如果我尝试插入具有重复键的 ResourceEntity，则抛出（应该如此） org.springframework.dao.DataIntegrityViolationException，但在域级别的 Neo4jTemplate 上*未*公开的是 getOrCreate，这正是我想要的。我如何在SDN中实现这一点而不必做一些不整洁的事情

```
Map<String, Object> properties = new HashMap<String, Object>();
properties.put("url", url);
properties.put("__type__", "com.mydomain.analysis.thingie.dao.ResourceEntity");

Node node = neo4jTemplate.getOrCreateNode("ResourceEntity", "url", "url", properties); 
```

...然后从存储库或类似的东西中拉回新的 ResourceEntity ......讨厌！（我没有测试过，但我认为这会起作用） - 但它非常难看！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:31:58.497

你有没有找到你的问题的答案？我们面临着类似的问题，实际上已经实现了您提出的解决方法：一个 getOrCreate 函数，它尝试使用存储库 findByPropertyValue 函数从图中检索节点/边。如果没有找到节点/边，则创建一个新的。

此解决方法的问题在于，使用例如单独的 JSON 调用调用 getOrCreate 函数会导致执行不同的 getOrCreate 事务。如果这些不同的事务在节点/边缘方面重叠，则如果事务同时运行，则会创建重复的节点/边缘。

处理这种副作用的一种方法是对节点/边缘唯一 ID 使用唯一索引：@Indexed(unique = true)

尽管这似乎是一个更大的解决方法。

Neo4j/Spring/SDG 人员的任何想法/最佳实践？

# c++ - 流迭代器的结尾是可配置的？

> ID：12933053
> 
> 赞同：2
> 
> 时间：2012-10-17T11:13:42.803
> 
> 标签：c++, std, istream-iterator

请考虑以下代码：

```
vector<__int64> vNumbers;   
copy(istream_iterator<__int64>(cin), istream_iterator<__int64>(), back_inserter(vNumbers)); 
```

如果我输入`1 23 45`并按下`Enter`向量，将填充 45、23、1、数字。现在是一个简单的问题。如何更改代码，以便如果我按下`Enter`并输入新数字，数字也会添加到向量中？换句话说，如何配置流迭代器的结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:03:52.103

您遇到的问题是流在没有再次阻塞的情况下尽可能地读取。只要您按下`[Enter]`，stdin 就会被操作系统刷新（在某些情况下，并非在所有情况下）。流读取直到 EOF 或直到没有任何内容可读取。这就是每次刷新时都会发生的情况（一次可用的新数据束）。

这就是为什么不同的人观察不同的行为。将文件通过管道传输到流中后，它将立即使整个文件可用，并且仅在文件末尾停止。换行符只是流的空白，就像空格和制表符一样。

如果不控制较低级别的输入，您将无法解决此问题。

# sql-server-2008 - Tempdb 已满

> ID：12933056
> 
> 赞同：2
> 
> 时间：2012-10-17T11:13:55.797
> 
> 标签：sql-server-2008, ssis, tempdb

我目前正在处理的 BI 项目从基于 SP 的复杂流程接收数据，这些流程使用（太多）临时表。这是我们无法控制的（或者我会改变它）。
我们在这个项目中的部分主要是基于SSIS。

进程运行良好，但 tempdb 填满的速度相对较快，然后我们开始出现错误。

我正在寻找两件事：

1.  如何防止 tempdb “溢出”（或至少减慢速度）？
2.  溢出时如何清理tempdb？（最好使用 SSIS）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:31:50.537

第一个问题是为什么 tempdb 正在填充，但您已经确定填充的来源很可能是由于临时表使用过多。听起来好像重新编写存储过程以使用更少的资源不是一种选择（如果我错了，请纠正我）。

我接下来要看的是为 tempdb 添加更多空间，但那是绷带，我相信您已经尝试过。

您可以做的是查看您的 tempdb 是如何定义的。您的初始规模是多少，增长模式是什么？右键单击 tempdb 并选择属性或让 DBA 执行此操作。每次 SQL Server 服务重新启动时，都会删除并重新创建 tempdb，并且调整大小和增长的默认值对于生产框来说是不合理的值。如果您看到 8 MB 的数据和 1MB 的日志以 10% 的增长模式，那么您有一个很好的机会来提高使用该实例的每个人的性能。我不会详细介绍，但这会导致很多小文件增长，这对性能很不利。通过正确的初始大小和 msdn[优化 tempdb 性能](http://msdn.microsoft.com/en-us/library/ms175527%28v=sql.105%29.aspx)[来最大化 TempDB性能](http://sqlserverperformance.idera.com/io-performance/maximizing-tempdb-performance-correct-initial-sizing-2/). 修复 tempdb 增长不会神奇地让你的问题消失，但如果你正在修补一些东西，它不会受到伤害。

您可以控制的一件事是 SSIS。我假设 SSIS 正在为您正在加载的每个表调用这些存储过程等？假设您有多个并行运行的包和/或数据流，您可以查看对它们进行序列化。这将增加您的总运行时间，但应该将您的 tempdb 成本分摊到更长的时间段内。

另一种选择是查看包中的隔离级别。我在这方面很弱，但我的理解是不同的隔离级别对 tempdb 的使用有不同的影响。我的，可能有缺陷的理解是，快照基本上会复制您在 tempdb 中更新的表，以允许其他人继续访问该表，并且只有在您完成后，它才会将这些更改推回真实表中。这将比不同的隔离级别花费更多的 tempdb 空间。虽然没有免费赠品，因此如果将其切换到默认的 Serializable 可能会降低 tempdb 的使用率，但代价是更高的阻塞/更少的并发访问。

## 参考

*   [优化 tempdb](http://bradmcgehee.com/wp-content/uploads/presentations/How_to_Optimize_tempdb_Performance_PASS_Fall_2010.pdf) (pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:22:47.653

你不能！如果您有一个在 tempDB 上创建大量数据的进程 A（您提到的复杂进程），您可以使用进程 B 来清理该数据，否则您可能会破坏进程 A。

我知道你说你不能，但唯一的解决方案是找到一种改进过程 A 的方法，这样它就不会占用太多空间。或者增加临时数据库的空间

# wix - WIX中的{{Action [2], location: [3], command: [4] }}是什么意思

> ID：12933057
> 
> 赞同：3
> 
> 时间：2012-10-17T11:14:01.273
> 
> 标签：wix

我读过一个wix文件。在错误的最后，他们提到了“{{Action [2]，位置：[3]，命令：[4] }}”。它代表什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:13:15.747

请参阅[格式化](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368609.aspx)。`[2]`等等是指为此消息提供的记录中的字段。一组花括号意味着只有在里面引用的所有属性或字段都有效时，它们所包含的整个子字符串才会保留。不过，我不清楚双花括号是什么意思；外部可能意味着内部保持不变，或者它可能不会在这里改变任何东西。

当错误发生并被报告时，报告者将创建一条记录，其中包含一些带有附加信息的字段。在问题中的情况下，字段 2 应包含操作名称，字段 3 包含位置，字段 4 包含命令。对于评论中询问的示例`{[2]}{, [3]}{, [4]}`，记录将填充一些记录。如果仅填写字段 2，它将提供整个格式化消息（将省略 3 和 4）。如果填写了字段 2 和 3，您将看到字段 2 的内容、逗号和空格以及字段 3 的内容。[错误格式字符串](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372835.aspx)旨在使事情比

```
1: [ErrorNumber] 2: [SomeInfo] 3: [MoreInfo] 4: [Etc] 
```

# internet-explorer - 禁止在 IE 开发人员工具栏中显示“文本 - 空文本节点”

> ID：12933058
> 
> 赞同：7
> 
> 时间：2012-10-17T11:14:03.590
> 
> 标签：internet-explorer, ie-developer-tools

在我开发的几乎所有网站上，我在 IE 的开发人员工具栏中获得了大量的“文本 - 空文本节点”行。我不介意它们的存在，但它使查找代码变得更加困难。有没有办法隐藏“文本 - 空文本节点”的显示？

PS：这是IE9里面的“F12开发者工具”。

PPS：我不是在寻找“重写代码以防止出现‘文本 - 空文本节点’”的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T23:51:40.753

不，这是不可能的。对不起。它展示了真正的 DOM 树，而不是其他开发工具如何简化结果。Opera Dragonfly 可以选择切换到类似的样式，但 F12 没有相反的选项。

但是，IE11 将有一个新版本的 F12，看起来它具有相同的、更简化的视图： http: [//mcakins.wordpress.com/2013/05/02/internet-explorer-11-brings-massive-upgrade -to-f12-开发者工具/](http://mcakins.wordpress.com/2013/05/02/internet-explorer-11-brings-massive-upgrade-to-f12-developer-tools/)

# java - 使用 ActionListener 到另一个 ActionListener

> ID：12933060
> 
> 赞同：1
> 
> 时间：2012-10-17T11:14:08.990
> 
> 标签：java, actionlistener

我想将第一个 ActionListener (About) 用于第二个 ActionListener (About2) 而不将第一个 ActionListener 复制到第二个中，有什么办法吗？

```
About.addActionListener(new ActionListener(){
        @Override
       public void actionPerformed(ActionEvent ae){
          AboutMe.setLocation(470,250);
          AboutMe.setSize(400, 200);
          AboutMe.setVisible(true);
          AboutMe.setResizable(false);
          AboutMe.add(panel5);
          panel5.setLayout(null);
          panel5.add(ta);

         ta.setBounds(15, 15, 350, 130);
         ta.setBorder(BorderFactory.createEtchedBorder());
         ta.setText("...................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................");
         ta.setEditable(false);
       }
       }
   );

About2.addActionListener(new ActionListener(){
        @Override
       public void actionPerformed(ActionEvent ae){

                  ////////code here///////////////
       }
       }
   ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:19:39.263

在这里要做的最简单的事情就是将该匿名对象的引用复制到一个临时变量中并传递该引用。

```
ActionListener temp= new ActionListener(){
        @Override
       public void actionPerformed(ActionEvent ae){
          AboutMe.setLocation(470,250);
          AboutMe.setSize(400, 200);
          AboutMe.setVisible(true);
          AboutMe.setResizable(false);
          AboutMe.add(panel5);
          panel5.setLayout(null);
          panel5.add(ta);

         ta.setBounds(15, 15, 350, 130);
         ta.setBorder(BorderFactory.createEtchedBorder());
         ta.setText("...................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................");
         ta.setEditable(false);
       }
       };

About.AddActionListener(temp);
About2.AddActionListener(temp); 
```

另一种选择是让你的类实现 ActionListener 并简单地做：

```
About.AddActionListener(this)
About2.AddActionListener(this); 
```

虽然您可以按照评论中的说明执行上述操作，但这并不是最好的主意。另一种选择是创建另一个类来实现 ActionListener 并创建该类的实例。

```
public class ReusableListener implements ActionListener

ActionListener listener = new ReusableListener() ;//as a field

About.addActionListener(listener) ;
About2.addActionListener(listener) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:16:12.557

只要你不使用`ActionEvent`参数，你就可以在你的类中创建一个这样的方法，

```
public void doAction() {
 AboutMe.setLocation(470,250);
          AboutMe.setSize(400, 200);
          AboutMe.setVisible(true);
          AboutMe.setResizable(false);
          AboutMe.add(panel5);
          panel5.setLayout(null);
          panel5.add(ta);

         ta.setBounds(15, 15, 350, 130);
         ta.setBorder(BorderFactory.createEtchedBorder());
         ta.setText("...................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................\n"
                 +  "....................................");
         ta.setEditable(false);
} 
```

在你的`actionPerformed`方法中，只需调用

```
doAction(); 
```

所以像这样，

```
About.addActionListener(new ActionListener(){
        @Override
       public void actionPerformed(ActionEvent ae){
doAction();

   ); 
```

# jquery - jQuery backgroundPosition 插件

> ID：12933061
> 
> 赞同：0
> 
> 时间：2012-10-17T11:14:12.657
> 
> 标签：jquery, plugins, internet-explorer-8, background, jquery-animate

我正在使用 Alexander Farkas 的插件，它可以很好地为背景设置动画。

它甚至在 IE9 中也能正常工作，但在 IE8 和 IE7 中给了我这个错误：'SCRIPT5007: Unable to get value of the property'replace': object is null or undefined'

不知何故，在 IE8 中，他无法转换赋予函数的值（我的意思是像素）......

有人可以看看吗？我不想发布洞 js，但你可以在这里查看：

[http://factorystore.hu/test/](http://factorystore.hu/test/)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:18:16.457

确保没有尾随逗号的 IE 不喜欢数组/对象中的尾随逗号。

检查这两行

```
start = toArray(start);
 var end = toArray(fx.end); 
```

**更新的解决方案**

粘贴此代码

```
if(!document.defaultView || !document.defaultView.getComputedStyle){ // IE6-IE8
        var oldCurCSS = jQuery.curCSS;
        jQuery.curCSS = function(elem, name, force){
            if(name === 'background-position'){
                name = 'backgroundPosition';
            }
            if(name !== 'backgroundPosition' || !elem.currentStyle || elem.currentStyle[ name ]){
                return oldCurCSS.apply(this, arguments);
            }
            var style = elem.style;
            if ( !force && style && style[ name ] ){
                return style[ name ];
            }
            return oldCurCSS(elem, 'backgroundPositionX', force) +' '+ oldCurCSS(elem, 'backgroundPositionY', force);
        };
    } 
```

在这条线之上

```
$.extend($.fx.step,{ 
```

# android - 了解图像处理代码

> ID：12933065
> 
> 赞同：1
> 
> 时间：2012-10-17T11:14:35.243
> 
> 标签：android, c++, c, image-processing, android-ndk

我是 android ndk 的新手。我已经开始通过
[ruckus](http://ruckus.tumblr.com/post/18055652108/writing-a-basic-image-filter-in-android-using-ndk)和[IBM 博客](http://www.ibm.com/developerworks/opensource/tutorials/os-androidndk/section5.html)的图像处理示例进行学习。我没有得到下面几行。任何人都可以帮助我理解代码片段吗？

```
static void brightness(AndroidBitmapInfo* info, void* pixels, float brightnessValue){
    int xx, yy, red, green, blue;
    uint32_t* line;

    for(yy = 0; yy < info->height; yy++){
            line = (uint32_t*)pixels;
            for(xx =0; xx < info->width; xx++){

              //extract the RGB values from the pixel
                red     = (int) ((line[xx] & 0x00FF0000) >> 16);
                green   = (int)((line[xx] & 0x0000FF00) >> 8);
                blue    = (int) (line[xx] & 0x00000FF );

        //manipulate each value
        red = rgb_clamp((int)(red * brightnessValue));
        green = rgb_clamp((int)(green * brightnessValue));
        blue = rgb_clamp((int)(blue * brightnessValue));

        // set the new pixel back in
        line[xx] =
          ((red << 16) & 0x00FF0000) |
          ((green << 8) & 0x0000FF00) |
          (blue & 0x000000FF);
            }

            pixels = (char*)pixels + info->stride;
        }
}
`
    static int rgb_clamp(int value) {
  if(value > 255) {
    return 255;
  }
  if(value < 0) {
    return 0;
  }
  return value;
} 
```

RGB 值是如何被提取的，这个 rgb_clamp 做了什么。为什么我们要设置新的 Pixell 以及像素 = (char*)pixels + info->stride; 作品？我不是 ac/c++ 人，对图像处理了解不多。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:07:31.070

首先让我们谈谈一个像素。据我所见，它是至少 3 个通道的组合：r、g 和 b，它们都存储在一个`uint32_t`值中，格式为 0x00RRGGBB(32bit / 4 个通道 = 8bit 每通道，因此值范围为0..255）。因此，要获得分离的 r、g 和 b 值，您需要将它们屏蔽掉，这在下面的三行中完成`//extract the RGB values`。例如红色组件... 使用掩码 0x00FF0000 和`&`运算符，您将除红色通道中设置的位之外的每个位都设置为 0。但是当你只是用 来掩盖它们时`0x00RRGGBB & 0x00FF0000 = 0x00RR0000`，你会得到一个非常大的数字。要获得 0 到 255 之间的值，您还必须将位向右移动，这就是使用`>>`-操作员。`>> 16`因此对于后一个示例：应用掩码后，您得到`0x000000RR`0x00RR0000 ，然后将这 16 位右移（由于蓝色值已经在“正确”位位置，因此无需移位。

第二个问题：做什么`rgb_clamp`很容易解释。它确保您的 r、g 或 b 值乘以您的亮度因子，不会超过值范围 0..255。

在与亮度因子相乘之后，新值被写回内存，这与上述提取的顺序相反，这次将它们向左移动并删除位，这是我们不希望使用掩码的。

处理完图像的一行后，`info->stride`将添加指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:59:09.127

首先，我建议你在这里阅读 C 书：[http ://publications.gbdirect.co.uk/c_book/](http://publications.gbdirect.co.uk/c_book/)

接下来，我将解决您的问题。

1.  如何提取 RGB 值

    `line`设置为指向像素参数：

    `line = (uint32_t*)pixels;`

    那是`pixels`一个 32 位无符号整数数组

    `&`然后对于位图的高度和宽度，使用按位与 ( ) 和位移右 ( )的组合提取 RGB 值`>>`。

    让我们看看你是如何变红的：

    `red = (int) ((line[xx] & 0x00FF0000) >> 16);`

    在这里，我们得到当前行，然后与`0x00FF0000`作为掩码的 AND，这从`line`. 因此，以 RGB 代码 #123456 为例，我们将保留`0x00120000`在`red`变量中。但它仍然在 24-16 位位置，所以我们右移 16 位以将位向下移动到`0x00000012`.

    我们对绿色和蓝色值执行此操作，调整 AND 掩码和位数以右移。

    有关二进制算术的更多信息，请参见：[http ://publications.gbdirect.co.uk/c_book/chapter2/expressions_and_arithmetic.html](http://publications.gbdirect.co.uk/c_book/chapter2/expressions_and_arithmetic.html)

2.  `rgb_clamp`做什么

    此函数仅确保红色、绿色或蓝色值为 0 或以上或 255 及以下。

    如果参数 to`rbg_clamp`为 -20 则返回 0，用于设置 RGB 值。如果参数是`rbg_clamp`270，它将返回 255。

    每种颜色的 RGB 值不得超过 225 或低于 0。在此示例中，255 是最亮的值，0 是最暗的值。

3.  为什么我们要设置像素回来

    看来我们正在更改像素的亮度，并将值设置回准备显示。

4.  如何`pixels = (char*)pixels + info->stride;`工作？

    在不知道类型`info`变量的结构的情况下`AndroidBitmapInfo`，我猜想`info->stride`是指位图的宽度（以字节为单位），因此`line`将成为下一次循环迭代的下一行。

希望有帮助

# cuda - 将 device_vectors 数组推入 raw_pointer

> ID：12933068
> 
> 赞同：1
> 
> 时间：2012-10-17T11:14:54.663
> 
> 标签：cuda, gpu, gpgpu, nvidia, thrust

使用 device_vector：

```
thrust::device_vector< int > iVec;
int* iArray = thrust::raw_pointer_cast( &iVec[0] ); 
```

但是如果我有一个 device_vectors 数组，我该怎么做呢？

```
thrust::device_vector<int> iVec[10]; 
```

理想情况下，我想将我的 device_vector 数组传递给一维数组，以便在 CUDA 内核上处理。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:33:37.633

如果我正确理解了您的问题，那么您真正想做的是从`thrust::device_vectors`. 您应该可以这样做：

```
const int N = 10;
thrust::device_vector<int> iVec[N];

int * iRaw[N];
for(int i=0; i<N; i++)
    iRaw[i] = thrust::raw_pointer_cast(iVec[i].data());

int ** _iRaw;
size_t sz = sizeof(int *) * N;
cudaMalloc((void ***)&_iRaw, sz);
cudaMemcpy(_iRaw, iRaw, sz, cudaMemcpyHostToDevice); 
```

[免责声明：用浏览器编写，从未编译，从未测试，使用风险自负]

在上面的代码片段中，`_iRaw`将每个设备向量的原始指针保存在`iVec`. 如果你真的想的话，你可以把它传递给内核。

# jquery - 滚动时jQuery下拉菜单位置

> ID：12933070
> 
> 赞同：2
> 
> 时间：2012-10-17T11:14:59.533
> 
> 标签：jquery, css, drop-down-menu

我是 jQuery 新手，正在学习 jQuery 概念。目前，我正在尝试设计一个包含长列表项的自定义下拉菜单。我想在鼠标悬停到主菜单时滚动菜单。我正在尝试使用[此处](http://css-tricks.com/examples/LongDropdowns/)描述的 jquery 滚动菜单以新的外观和感觉自定义 CSS。

我已经尝试过该脚本，但我发现其中存在一些问题。[您可以在此处](http://jsfiddle.net/bUxDE/1/)的 jsfiddle 中检查它。当初始鼠标悬停到第一个列表项时，下拉列表项根本不显示（在初始页面加载中）。其次，第二级 UL 项的宽度被隐藏。

任何人都可以检查小提琴并纠正它吗？另外，请让我知道我在哪里做错了，以便我将来尝试纠正自己。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:49:56.897

看看这个可能有帮助

```
ul.dropdown li:last-child a
{
  border-right: none;
} /* Doesn't work in IE */
ul.dropdown li.hover, ul.dropdown li:hover
{
  background: #F3D673;
  color: black;
  position: relative;
  z-index:1;
}
ul.dropdown li a:hover{background: #F3D673;} 
```

查询：

```
.mousemove(function(e) {
                var offset = $container.offset();
                var relativeY = ((e.pageY - offset.top) * multiplier) -   ($container.data("origHeight") * multiplier)+50;
                if (relativeY > $container.data("origHeight")) {
                    $list.css("top", -relativeY);
                    $list.css("zIndex", "-1"); //add this line 
                };
            }); 
```

[演示](http://jsfiddle.net/bUxDE/22/)

# java - 如何在 Struts 1.x 中检查 Ajax 弹出 JSP 页面的验证

> ID：12933071
> 
> 赞同：1
> 
> 时间：2012-10-17T11:15:00.110
> 
> 标签：java, ajax, jsp, struts

我在验证 Struts 1.x 时遇到了一些问题。我在 Ajax 调用上打开一个 JSP 页面。在这个 JSP 页面（打开的弹出窗口）中，如果我想进行一些验证，比如需要用户标题等，并且在提交表单时，我直接将详细信息提交给所需的操作类方法。提交时我没有使用 Ajax 提交。我也尝试过使用 Ajax 提交，但它对我不起作用。下面的代码是我的动作类方法和 JSP 页面：

```
Action class
public ActionForward saveNotificationsFormDetails(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) {
        DynaValidatorActionForm notificationsForm=(DynaValidatorActionForm)form;
        log.info("In saveNotificationsFormDetails method of NotificationsManagementAction");
        String forwardName="failure";
        String filePath = null;
        String webPath = null;
        FileOutputStream outputStream = null;
        ActionMessages messages = new ActionMessages();     
        User user=null;     
        try
        {
            int userId=0;
            HttpSession session=request.getSession(false);
            if(session!=null)
            {
                user=(User)session.getAttribute("user");
                if(user!=null)
                {

                    if(user.isAdmin()==true)
                    {
                        userId=user.getPrimaryKey();
                        log.info("user is admin");
                    }
                    else
                    {
                        log.info("User has no rights to access this page ");
                        return mapping.findForward("userrestricted");
                    }
                }
                else
                {
                    return mapping.findForward("login");    
                }
            }
            log.info("The user id -"+userId+"-- is is requesting to Notification Details.");

            NotificationsDto notificationsDto = new NotificationsDto();
            NotificationsDao notificationsDao = NotificationsDao.getInstance();
            String  title =  (String) notificationsForm.get("title");
            String  content =  (String) notificationsForm.get("content");

            // uploading the file to notifications directory.
            FormFile url =(FormFile)notificationsForm.get("url");
            String fileName = url.getFileName();
            filePath = getServlet().getServletContext().getRealPath("")+"/notifications/"+ fileName;

            if(fileName != null && !fileName.equals("")) {
                outputStream = new FileOutputStream(new File(filePath));
                outputStream.write(url.getFileData());

                // getting the web path for the uploaded file
                //String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+request.getContextPath();
                webPath =request.getContextPath()+"/notifications/"+url.getFileName();
            }
            String fromDate = (String) notificationsForm.get("fromDate");
            String toDate = (String) notificationsForm.get("toDate");
            String notifyUsersFlag = (String) notificationsForm.get("notifyUsersFlag");

            boolean notifyUsers = (notifyUsersFlag!=null && notifyUsersFlag.trim().length() > 0 && ( (notifyUsersFlag.trim().equals("on")) || (notifyUsersFlag.trim().equals("true")) ) ) ? true : false;

            //code written for sending the mails to user, if user click on notification checkbox

            if(notifyUsers){
                //NotificationEmailDispatcherJob();
                UserDao userDao = new UserDao();
                try {

                    Properties pro = new Properties();
                    InputStream in = PropertiesFileReader.getInstance().getInputStreamInstance("mail.properties");
                    pro.load(in);
                    String basePath = pro.getProperty("basePath");

                    // Algorithm Steps:
                    /*
                     * Step1: Get all the notifications which are still available to show.
                     * Step2: If notifications size > 0 do the steps(3,4,5) else stop processing.
                     * Step3: Get all users registered and activated in prep511.
                     * Step4: Prepare email content to be sent for each user.
                     * Step5: Validate the email content and send it to user. 
                     */ 

                    // Get all the notifications which are still available to show.
                    List<NotificationsDto> notifications = NotificationsDao.getInstance().getDisplayNotifications();

                    if(notifications !=null && notifications.size() > 0){
                        List<User> activatedUsers = userDao.getAllUsersForAnnoucement();

                        for (Iterator<NotificationsDto> iterator = notifications.iterator(); iterator
                                .hasNext();) {
                            notificationsDto =  iterator.next();
                            Iterator<User> usersIterator = activatedUsers.iterator();
                            while( usersIterator.hasNext() ) {
                                user =  usersIterator.next();

                                String emailContent = getEmailContent(user, basePath, notificationsDto);

                                //verify the emailContent for validness before sendig email.

                                if(emailContent !=null && emailContent.trim().length()>0 && !emailContent.contains("Due to internal server problems your request could not be completed.") && emailContent.contains("Wayne Jones") ){
                                    // send email
                                    String subject = "Prep511 Announcement: "+notificationsDto.getTitle();
                                    sendAnnouncementEmail(pro, basePath, user, emailContent, subject);

                                }
                                else{
                                    // send an email or notification to ven regarding the exception.
                                    // continue for other users.
                                    continue;
                                }

                            }
                        }
                    }

                } catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }
            }
            /*if(title == null || title.equals("")){
                ActionMessage message = new ActionMessage("NotificationForm.title.required");
                messages.add("NotificationForm.title.required", message);//jsp
                saveMessages(request, messages);
                return mapping.findForward("NotificationForm.title.required");
            } */

            content = content.replace("\n", "<br />");
            notificationsForm.set("path",filePath);

            notificationsDto.setTitle(title);
            notificationsDto.setContent(content);
            notificationsDto.setFromDate(DateUtils.convertDateFormat(fromDate, "MMM dd, yyyy", "yyyy-MM-dd HH:mm:ss", false) );
            notificationsDto.setToDate(DateUtils.convertDateFormat(toDate, "MMM dd, yyyy", "yyyy-MM-dd HH:mm:ss", false) );
            notificationsDto.setUrl(webPath);
            notificationsDto.setCreatedBy(user);
            notificationsDto.setLastModifiedBy(user);
            notificationsDto.setNotifyUsersFlag(notifyUsers);
            notificationsDto = notificationsDao.insertRecord(notificationsDto);

            if (notificationsDto.getNotificationsId() > 0 ) {
                //forward to notificationsList.jsp
                // reload notifications
                ServletContext application = this.getServlet().getServletContext();
                new NotificationsLoader().reloadNotifications(application);

                return mapping.findForward("success");
            } else {
                // forward display VendorForm
                // Add action message also
                //record insertion failed.
                ActionMessage message = new ActionMessage("request.process.failed");// resources.properties
                messages.add("request.process.failed", message);//jsp
                saveMessages(request, messages);
                return mapping.findForward(forwardName);
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
            log.error(e.getMessage());
            return mapping.findForward(forwardName);
        }
    }

jsp page code is and it is a child page ..

<html:form action="processNotifications.do?processName=saveNotificationsFormDetails" styleId="NotificationForm" method="POST" enctype="multipart/form-data"> 

            <%-- <html:form action="/processNotifications" styleId="NotificationForm" method="POST" enctype="multipart/form-data"> --%> 

                <table width="100%" border="0" cellspacing="6" cellpadding="1" class="tabcont">
                  <tr>
                    <td align="right">Title<span style="color:red">*</span></td>
                    <td>
                    <html:text property="title" styleClass="registration_form_text1"></html:text>
                    </td>
                  </tr>

                  <tr>
                    <td align="right">Content<span style="color:red">*</span></td>
                    <td>
                        <html:textarea property="content" styleClass="registration_form_textArea"></html:textarea>
                    </td>
                  </tr>

                  <tr>
                    <td align="right">Url</td>
                    <td>
                        <html:file property="url" />
                   <%--<html:text property="url" styleClass="registration_form_text"></html:text> --%>
                    </td>
                  </tr>

                  <tr>
                    <td align="right">From Date<span style="color:red">*</span></td>
                    <td><html:text property="fromDate" styleClass="registration_form_text1" styleId="fromDate" style="autocomplete:off"></html:text>
                    </td>
                  </tr>

                  <tr>
                    <td align="right">To Date<span style="color:red">*</span></td>
                    <td>                   
                        <html:text property="toDate" styleClass="registration_form_text1" styleId="toDate" style="autocomplete:off"></html:text>
                    </td>
                  </tr>

                  <tr>
                    <td align="right">&nbsp;</td>
                    <td>                   
                        <html:checkbox property="notifyUsersFlag" styleId="notifyUsersFlag" ></html:checkbox>&nbsp; Notify All Users.
                    </td>
                  </tr>
                    <tr>
                    <td colspan="2">&nbsp;</td>
                  </tr>
                  <tr>
                  <tr>
                  <td></td>
                    <td colspan="2"  align="left">
                   <%--  <input type="button" value="Save" onclick="submitNotificationForm();">  --%>
                   <input type="submit" value="Save">
                    </td>
                  </tr>               
                  </table>               
              </html:form>

the required ajax call for calling this page is in parent class and the code for this is ........

function displayNotificationForm(){
        var basePath='<%=basePath%>';
        j("#notificationFormDetails").html(waitImage);
        j('#notificationFormDetails').dialog('open');
        j('#notificationFormDetails').dialog('option', 'title', 'Add Home Page Announcement');

        j.ajax({
        type : "GET",
        url : "notifications.do?processName=displayNotificationsFormDetails",
        success : function(data) {
             j("#notificationFormDetails").html(data);
        },
        error : function(jqXHR, textStatus) {
            alert("error" + textStatus);
            j("#notificationFormDetails").dialog('close');
        }

        });
    } 
```

# php - 数据不正确时如何重新填写表单字段

> ID：12933072
> 
> 赞同：1
> 
> 时间：2012-10-17T11:15:09.653
> 
> 标签：php, forms, session, redirect

如果值的格式不正确，则用于处理我的表单操作的脚本将重定向到表单页面。我想用用户在重定向到表单页面时输入的错误数据填充文本字段和文本区域。我编写了以下脚本，该脚本在提交错误值时重定向页面，但此后不填写字段。

表单页面上的脚本：

```
<?php
if(session_id('stat')=="true")
{
$isbn=$_SESSION['var1'] ;
$name=$_SESSION['var2'] ;
$author=$_SESSION['var3'] ;
$publisher=$_SESSION['var4'];
$price=$_SESSION['var5'];
$descrip=$_SESSION['var6'];
$status=$_SESSION['stat'];
}
else
{
$isbn="";
$name="";
$author="";
$publisher="";
$price="";
$descrip="";
$status=false;
}
?> 
```

表单的html部分：

```
<form action="scripts/addscript.php" method="POST" enctype="multipart/form-data" name="form1" id="form1">

<label for="isbn">ISBN</label>
<input type="text" name="isbn" id="isbn" value="<?php $isbn ?>"/>
 <p>
 <label for="name">Name</label>
 <input type="text" name="name" id="name"  value="<?php echo $name; ?>"/>
 </p>
 <p>
 <label for="author">Author</label>
 <input type="text" name="author" id="author" value="<?php echo $author; ?>"/>
 </p>
<p>
<label for="publisher">Publisher</label>
<input type="text" name="publisher" id="publisher" value="<?php echo $publisher; ?>"/>
</p>
<p>
<label for="price">Price</label>
<input type="text" name="price" id="price" value="<?php echo $price;?>"/>
</p>
<p>
<label for="description">Description</label>
<textarea name="description" id="description" cols="45" rows="5"><?php echo $descrip; ?></textarea>
</p>
 <p>
 <label for="img">Select an image for the book:
<input type="file" name="img" id="img" />
</label>
<input type="submit" name="submit" id="submit" value="Submit"/>
</p>
</form> 
```

表单值提交到的 addscript.php 上的重定向脚本：

```
<?php
// Get values from form 
$isbn=$_POST['isbn'];
$name=$_POST['name'];
$author=$_POST['author'];
$publisher=$_POST['publisher'];
$price=$_POST['price'];
$descrip=$_POST['description'];

$_SESSION['var1'] = $isbn;
$_SESSION['var2'] = $name;
$_SESSION['var3'] = $author;
$_SESSION['var4'] = $publisher;
$_SESSION['var5'] = $price;
$_SESSION['var6'] = $descrip;
if(strlen($isbn)==0||strlen($name)==0||strlen($author)==0||strlen($publisher)==0||strlen($price)==0)
{
$_SESSION['stat']="true";
header('Location: ' . $_SERVER['HTTP_REFERER']);
} 
```

请告诉我问题出在哪里，我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:39:15.197

`session_start()`必须在 PHP 脚本的顶部调用才能使用该`$_SESSION`变量。

# awk - AWK-如何改进这个例子？

> ID：12933075
> 
> 赞同：1
> 
> 时间：2012-10-17T11:15:24.820
> 
> 标签：awk

我有一个文件：

```
AA  jeden
BB  dwa
CC  trzy
DD  cztery
EE  piec
FF  szesc
to  ttttttt
GG  siedem
HH  osiem
II  dziewiec
JJ dziesiec
JJ jola 
EE ela 
BB baska 
FF flora 
II irga 
AA adam 
to llll 
DD darek 
CC celina 
HH hela 
GG gosia 
```

此命令打印：

```
$ awk '{ count[$1] = count[$1] " " $2 }; END { for (key in count) { print count[key] }}' file
 jeden adam
 dwa baska
 ttttttt llll
 trzy celina
 cztery darek
 piec ela
 szesc flora
 siedem gosia
 osiem hela
 dziewiec irga
 dziesiec jola 
```

我想打印：

```
jeden adam
dwa baska
ttttttt llll
trzy celina
cztery darek
piec ela
szesc flora
siedem gosia
osiem hela
dziewiec irga
dziesiec jola 
```

如何删除字段 $1 前面的空白空间？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:18:42.853

```
awk '{ count[$1]=(count[$1])?count[$1] " " $2 :$2 }; END { for (key in count) { print count[key] }}' file 
```

如果为空分配，则附加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T11:22:11.600

```
awk '{ count[$1] = count[$1] sep[$1] $2; sep[$1] = " " } END { for (key in count) { print count[key] }}' file 
```

# javascript - Javascript函数延迟

> ID：12933079
> 
> 赞同：2
> 
> 时间：2012-10-17T11:15:37.690
> 
> 标签：javascript, jquery, function, timer

我做了一个小javascript。像这样：

```
content.css('height', contentHeight, function() {
    alert("test");
     $("body").scrollTo("#main", 600);
}); 
```

我希望在设置内容高度后执行警报。但是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:16:57.113

该`.css()`功能是即时的。

```
content.css('height', contentHeight);
alert("test");
$("body").scrollTo("#main", 600); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:29:02.667

使用动画，完成时调用回调。

```
content.animate({
    height: contentHeight
}, 0, function() {
    alert("test");
    $("body").scrollTo("#main", 600);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:22:21.973

jquery css方法中的函数含义不同：

```
content.css('height', function(){
    return contentHeight;
}); 
```

内容是一个数组，上面的代码设置了这个数组中所有元素的高度。这个函数的用法可能是这样的：

```
content.css('height', function(index){
    return index * contentHeight;
}); 
```

在这种情况下，每个下一个元素的高度将增加 contentHeight 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:30:01.530

尝试使用

```
content.animate(
    {height : 100}, 
    5000,
    function() {
        //Animation complete.
        alert("test");
        $("body").scrollTo("#main", 600);
    }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:17:10.300

像这样的方法没有*“完成”*处理程序`css()`。它立即执行。

所以你必须编写如下代码：

```
content.css("height", contentHeight);
alert("test");
$("body").scrollTo("#main", 600); 
```

但是，如果您需要在设置高度后添加一些延迟，您可以使用`setTimeout()`：

```
content.css("height", contentHeight);
setTimeout(function() {
    alert("test");
    $("body").scrollTo("#main", 600);
}, 1000);   // 1000 is number of milliseconds 
```

# c++ - 如何克隆包含指针的对象？

> ID：12933080
> 
> 赞同：3
> 
> 时间：2012-10-17T11:15:47.240
> 
> 标签：c++, oop, class

我有个问题。我需要克隆包含指针的对象类。问题的一个示例在以下代码中：

```
#include "stdafx.h"
#include <iostream>
#include <string.h>
#include <vector>

class CPoint
{
protected:
    int m_x;
    int m_y;

    int *m_p;

public:
    CPoint();
    CPoint(int x, int y);
    ~CPoint();

    CPoint*         clone();
    static CPoint*  clone(CPoint& p);

    int getX();
    int getY();
    void setX(int x);
    void setY(int y);

    void toString();
};

int CPoint::getX()
{
    return m_x;
}

int CPoint::getY()
{
    return m_y;
}

void CPoint::setX( int x )
{
    m_x = x;
}

void CPoint::setY( int y )
{
    m_y = y;
}

void CPoint::toString()
{
    std::cout << "(" << m_x << ", " << m_y<< ", " << *m_p << ")" << std::endl;
}

CPoint::CPoint( int x, int y )
{
    m_x = x;
    m_y = y;    

    m_p = new int();
    *m_p = x + y;
}

CPoint::CPoint()
{
    m_p = new int();
    *m_p = 1000;
}

CPoint* CPoint::clone()
{
    CPoint *p = new CPoint();
    *p = *this;
    return p;
}

CPoint* CPoint::clone( CPoint& p )
{
    CPoint *q = new CPoint();
    *q = p;
    return q;
}

CPoint::~CPoint()
{
    if (m_p) {
        delete m_p;
        m_p = NULL;
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    CPoint *p1 = new CPoint(10, 20);
    CPoint *p2 = new CPoint(30, 40);

    p1->toString();
    p2->toString();

    CPoint *p3;
    p3 = CPoint::clone(*p1);

    p3->toString();

    CPoint *p4;
    p4 = p2->clone();

    p4->toString();

    p1->setX(50);
    p1->setY(60);
    p2->setX(80);
    p2->setY(90);

    p3->toString();
    p4->toString();

    delete p1;
    delete p2;
    delete p3;
    delete p4;

    int a;
    std::cin >> a;

    return 0;
} 
```

我对变量的问题`m_p`。当 clone objects `p1`and `p2`on `p3`and`p4`时，内存地址`p1`and`p3`不同但`m_p`地址相同。显然，当 remove 时`p1`，`p3`删除失败。与`p2`和`p4`是一样的。

如何克隆 CPoint 类对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:17:20.523

您似乎正在将其他一些*类似 Java 的*语言的规则应用于 C++。
这是一个根本问题，从长远来看会导致各种问题。

你需要学习 C++ 的习语。

在 C++ 中，您想使用 C++ 字符串 (std::string) 而不是 C-String 接口。

```
#include <string.h>   // C-Interface

// What you really want
#include <string>     // C++ Interface 
```

如果你的类包含一个指针，那么你可能做错了什么。RAW 指针应包装在智能指针（或容器）中，以正确控制其寿命。如果您将指针放入业务类，则您正在破坏关注点分离原则。

```
class CPoint
{
    protected:
        int m_x;
        int m_y;

        int *m_p;  // What is it supposed to be?
                   // Who owns it? 
```

由于您的班级有一个指针，因此违反了三规则。
如果您想管理此类中的指针（而您不想（破坏关注点分离）），那么您应该已经实现了三规则（C++ 11 中的五规则）（查找）。如果您想了解如何处理 RAW 指针，请看这里[https://stackoverflow.com/a/1846409/14065](https://stackoverflow.com/a/1846409/14065)

不需要克隆方法。这就是复制构造函数的用途。您不是在编写需要克隆的类（否则它会有一个虚拟的析构函数）。您的类不是多态的，不会派生自。因此，复制构造函数将完美地工作。

```
CPoint*         clone();
static CPoint*  clone(CPoint& p);

// Copy constructor looks like this:
CPoint(CPoint const& rjs)

// Assignment operator looks like this:
CPoint& operator=(CPoint& rhs) 
```

但是，如果将 RAW 指针正确包装在适当的类中，则不需要这样做。编译器生成的这些方法的默认版本可以正常工作。

完全破坏封装的好方法。

```
int getX();
int getY();
void setX(int x);
void setY(int y); 
```

串起来！船尾。你真正想要的是一种序列化方法。

```
void toString();

// serializer look like this:

friend std::ostream& operator<<(std::ostream& stream, CPoint const& data)
{
     // Convert CPoint (data) to the stream.
     return stream;
} 
```

在 C++ 中，除非需要，否则我们不会动态创建对象。
在这里你不需要。创建本地对象效果更好，因为即使存在异常也可以保证它们的生命周期。

```
// Rather than dynamically creating them
CPoint *p1 = new CPoint(10, 20);
CPoint *p2 = new CPoint(30, 40);

// Just declare two local variables:
CPoint  p1 = CPoint(10, 20);
CPoint  p2(30, 40);           // Alternative to the above but means the same.

// Much better to use operator<<
// Also shows the functions are badly named. You are not converting to string.
// but rather printing them to a stream.
p1->toString();
p2->toString();

std::cout << p1;
myFileStream << p2;  // allows you to easily specify the actual stream. 
```

复制构造函数在复制对象时效果更好

```
CPoint *p3;
p3 = CPoint::clone(*p1);

// If we were still using pointers. 
CPoint* p3 = new CPoint(p1);

// But much nicer to not even use pointers
CPoint  p3(p1); 
```

如果您在函数中看到手动调用删除，这通常是设计错误。

```
delete p1;
delete p2;
delete p3;
delete p4; 
```

如果您有指针将它们包装在智能指针（或容器）中，例如类，则它们可以安全使用。这是因为对于本地对象，保证会调用析构函数，因此当指针超出范围时，您的对象将正确删除指针。目前，此代码不是异常安全的，如果异常传播通过它们，则会泄漏。

小提示： main() 是特殊的。如果您不指定返回值，编译器`return 0;`会为您创建。如果您的应用程序没有错误状态，最好使用此功能作为向其他开发人员表明您的代码将始终干净退出的标志。

```
return 0; 
```

我会这样重写：

```
#include <iostream>
#include <string>
#include <vector>

class CPoint
{
protected:
    int m_x;
    int m_y;

    std::vector<int> m_p;

public:
    // If you don't explicitly initialize m_x and m_y them
    // they will have indeterminate (random) values.
    CPoint()             : m_x(0), m_y(0) {m_p.push_back(1000);}
    CPoint(int x, int y) : m_x(x), m_y(y) {m_p.push_back(x + y);}

    int getX()        { return m_x;}
    int getY()        { return m_y;}
    void setX(int x)  { m_x = x;}
    void setY(int y)  { m_y = y;}

    friend std::ostream& operator<<(std::ostream& stream, CPoint const& d)
    {
        return stream << "(" << d.m_x << ", " << d.m_y<< ", " << d.m_p[0] << ")" << std::endl;
    }
};

int main(int argc, char* argv[])
{
    CPoint p1(10, 20);
    CPoint p2(30, 40);

    std::cout << p1 << p2;

    CPoint p3(p1);

    std::cout << p3;

    CPoint p4(p2);
    std::cout << p4;

    p1.setX(50);
    p1.setY(60);
    p2.setX(80);
    p2.setY(90);

    std::cout << p1 << p2 << p3 << p4;
    int a;
    std::cin >> a;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:27:29.740

除了浅拷贝直接数据成员`m_x`和`m_y`，您还需要深拷贝指针成员`m_p`。由于您尚未显示此类的构造函数或`m_p`真正指向的内容，因此我将假设它`m_p`指向`int`. 深度复制需要：

1.  实例化一个`int`与原始数组大小相同（或更大）的新数组
2.  将原始数组中的每个元素复制到新数组中
3.  在克隆对象中设置`m_p`指向这个新数组的第一个元素

如何做到这一点的一个例子：

```
CPoint* CPoint::clone(CPoint& rhs)
{
  CPoint* ret = new CPoint;
  ret->m_x = rhs.m_x;
  ret->m_y = rhs.m_y;

  size_t m_p_count = /* somehow determine the size of rhs.m_p */;
  ret->m_p = new int[m_p_count];
  std::copy(&rhs.m_p[0], &rhs.m_p[m_p_count], ret->m_p);

  return ret;
} 
```

关于您的代码的一些注意事项：

1.  最好使用 a`vector<int>`而不是指向`int`.
2.  除了＃1，您应该使用智能指针而不是原始指针
3.  我在上面的代码中看不到任何确定数组大小的方法。如果您使用`vector<int>`--just call ，这将很容易`vecctor<int>::size()`。显然，您需要知道数组的大小才能复制它。
4.  `clone()`类型函数通常仅在通过基类指针复制多态对象时才有用。由于您的课程以及您对它的使用不属于这一类，因此`clone()`函数首先不是正确的方法。考虑使用复制构造函数和复制赋值运算符，不要忘记也实现析构函数。更好的是，完全避免所有这些东西并遵循[零规则](http://rmartinho.github.com/2012/08/15/rule-of-zero.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T13:52:06.137

> 在这个例子中是一个整数，但可以是任何类型。我的问题是克隆一个包含指向另一种类型的指针的对象。

我相信这里基本上有两种情况：您希望包含对象拥有指向的对象；或者您不希望包含对象拥有指向的对象。

让我们从非拥有开始。C++ 提供什么工具来表示非拥有指针？好吧，常规指针是非拥有的。以及如何复制常规指针？你什么都不做。您让编译器处理它，生成您可以随意使用的正确复制构造函数（当您使用它时，让编译器也生成一个析构函数）。

那么拥有呢？拥有指针的工具是什么？好吧，在大多数情况下，您甚至不需要指针：只需直接存储一个值，然后再次让编译器生成正确的复制构造函数（以及析构函数！）。在提供的示例`int m_p;`中会很好地工作。

当涉及多态基类时，这种情况有一个烦恼：复制可能会导致切片。C++ 是否为这种情况提供了工具？可悲的是，它没有。你必须手写。但请帮自己一个忙，不要将这些问题与课堂上的其他人混为一谈（单一职责原则）。

编写一个拥有单个指针的可重用类（加分项：使其成为模板），在销毁时清理它，并在复制构造函数中执行多态复制（常见的习惯用法涉及虚拟克隆函数）。然后将那个可重用类的值放在你的`CPoint`和......你猜对了！让编译器生成正确的复制构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:19:59.607

您必须问自己：您的对象的每个实例是否“拥有”它所指向的对象，或者它们是否都引用了由其他东西拥有的公共对象？

当您拥有所有权案例时，每个实例都必须指向一个单独的副本。这意味着您不必复制指针，您必须创建它指向的对象的克隆并将这个新对象分配给副本的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:20:06.897

您必须为其中的所有指针重新分配内存`CPoint`并将其数据复制到新内存中。在您的情况下，您必须执行以下操作：

```
CPoint clone()
{
   CPoint p;
   p = *this;
   p.m_p = new int();
   *p.m_p = *m_p;
   return p;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T11:21:00.877

假设 m_p 只指向一个整数（而不是整个数组），克隆可以这样完成：

```
CPoint* CPoint::clone()
{
    CPoint* cloned = new CPoint(m_x, m_y);
    if (m_p)
    {
        cloned->m_p = new int;
        *cloned->m_p = *m_p;
    }
    return cloned;
} 
```

请注意，这样的成员指针的唯一目的是增加具有 NULL 值的额外可能性 - 这可能具有单独的含义。

另请注意，必须执行以下操作以避免内存泄漏和堆损坏：

*   复制构造函数和赋值运算符必须“禁用”（声明为私有）
*   析构函数必须删除 m_p。

# spring - IoC 如何为 bean 创建实例

> ID：12933081
> 
> 赞同：2
> 
> 时间：2012-10-17T11:15:54.303
> 
> 标签：spring, dependency-injection, inversion-of-control, ioc-container

我了解到，当 IoC 容器初始化时，它会创建实例并注入依赖项。

它是如何创建对象的？是使用 new 运算符创建它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:19:23.467

在 Java 中，实例化对象的唯一方法是调用构造函数。`new`您可以使用运算符或通过反射调用构造函数。

Spring 使用反射来实例化对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:45:08.047

1 如果类定义了非私有构造函数并且在配置元数据中声明了相同的类，则使用反射进行实例化。[`getDeclaredConstructor()`类](http://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html) [API](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredConstructor%28java.lang.Class...%29)

1.  如果在元数据中定义了一些类，则使用静态或非静态工厂方法进行实例化。

[请阅读Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-class)中的第 4.3.2 节实例化 bean

# html - 在 Drupal CKEditor 中出现在文本上的 HTML 标签

> ID：12933084
> 
> 赞同：0
> 
> 时间：2012-10-17T11:16:02.810
> 
> 标签：html, drupal, drupal-6, tags, ckeditor

我的 Drupal 站点上的某些页面在活动页面上显示 HTML 标记。

我为此使用CKEditor。

[这是这里](http://www.ifpsm.org/directory/norpo)的一个例子

查看此页面上的“活动”部分。

谁能让我知道这里有什么问题以及为什么会出现这些标签？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:51:01.503

如果您在 CKEditor 上未处于查看源代码模式时包含 Html 标签，它将为您转义这些标签。进入查看源代码模式并检查显示的标签是否已经转义，然后将它们转换回 Html。

# android - Android相机意图在拍摄肖像时保存图像风景

> ID：12933085
> 
> 赞同：39
> 
> 时间：2012-10-17T11:16:08.113
> 
> 标签：android, android-intent, android-camera, android-camera-intent

我环顾四周，但似乎没有一个可靠的答案/解决方案来解决这个非常令人恼火的问题。

我以纵向拍摄照片，当我点击保存/丢弃时，按钮的方向也正确。问题是当我稍后检索图像时，它是横向的（图片已逆时针旋转 90 度）

我不想强迫用户在某个方向使用相机。

有没有办法检测照片是否是在纵向模式下拍摄的，然后解码位图并以正确的方式向上翻转？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-17T11:49:17.473

始终按照相机内置在设备中的方向拍摄照片。要正确旋转图像，您必须读取存储在图片中的方向信息（EXIF 元数据）。那里存储了拍摄图像时设备的方向。

下面是一些读取 EXIF 数据并相应地旋转图像的代码： `file`是图像文件的名称。

```
BitmapFactory.Options bounds = new BitmapFactory.Options();
bounds.inJustDecodeBounds = true;
BitmapFactory.decodeFile(file, bounds);

BitmapFactory.Options opts = new BitmapFactory.Options();
Bitmap bm = BitmapFactory.decodeFile(file, opts);
ExifInterface exif = new ExifInterface(file);
String orientString = exif.getAttribute(ExifInterface.TAG_ORIENTATION);
int orientation = orientString != null ? Integer.parseInt(orientString) :  ExifInterface.ORIENTATION_NORMAL;

int rotationAngle = 0;
if (orientation == ExifInterface.ORIENTATION_ROTATE_90) rotationAngle = 90;
if (orientation == ExifInterface.ORIENTATION_ROTATE_180) rotationAngle = 180;
if (orientation == ExifInterface.ORIENTATION_ROTATE_270) rotationAngle = 270;

Matrix matrix = new Matrix();
matrix.setRotate(rotationAngle, (float) bm.getWidth() / 2, (float) bm.getHeight() / 2);
Bitmap rotatedBitmap = Bitmap.createBitmap(bm, 0, 0, bounds.outWidth, bounds.outHeight, matrix, true); 
```

**更新 2017-01-16**

随着 25.1.0 支持库的发布，引入了 ExifInterface 支持库，这可能会使访问 Exif 属性更容易。有关它的文章，请参阅[Android 开发者博客](https://android-developers.googleblog.com/2016/12/introducing-the-exifinterface-support-library.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-30T03:02:37.707

所选答案使用对此问题和类似问题的最常用回答方法。但是，它不适用于三星的前置和后置摄像头。对于那些需要适用于三星和其他主要制造商的前置和后置摄像头的另一种解决方案的人来说，nvhausid 的这个答案非常棒：

[https://stackoverflow.com/a/18915443/6080472](https://stackoverflow.com/a/18915443/6080472)

对于那些不想点击的人来说，相关的魔法是使用 CameraInfo 而不是依赖 EXIF 或 Cursor 来处理媒体文件。

```
Bitmap realImage = BitmapFactory.decodeByteArray(data, 0, data.length);
android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();
android.hardware.Camera.getCameraInfo(mCurrentCameraId, info);
Bitmap bitmap = rotate(realImage, info.orientation); 
```

链接中的完整代码。

# ruby-on-rails-3 - 我可以通过 Graph API 创建 Page Tab 吗？

> ID：12933088
> 
> 赞同：0
> 
> 时间：2012-10-17T11:16:22.543
> 
> 标签：ruby-on-rails-3, facebook-graph-api, koala

我目前正在 Rails 上开发一个 Web 应用程序。我希望用户能够创建自己的 Facebook 页面。我想在我的主应用程序或页面上为他创建自定义选项卡。

Graph API 可以以编程方式创建页面选项卡吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:23:18.420

我不相信可以通过 API实际*创建一个新应用程序。*这将为可能的垃圾邮件打开一个闸门。

您将能够做的是允许用户将您的选项卡应用程序添加到他们的页面，然后为他们提供一些自定义。您可以使用与此类似的 post call 以编程方式将选项卡添加到页面 -

```
https://graph.facebook.com/PAGE_ID/tabs 
```

连同这些参数 -

*   `app_id`- 要添加的标签应用程序。
*   `access_token`- 具有管理页面权限的访问令牌 ( `manage_pages`)。

参考 -

*   [页面文档](https://developers.facebook.com/docs/reference/api/page/#tabs)
*   [权限文档](https://developers.facebook.com/docs/reference/api/permissions/)

# iphone - 我只想在 ios (ios 5 和 ios 6) 中横向应用我的应用程序

> ID：12933089
> 
> 赞同：4
> 
> 时间：2012-10-17T11:16:25.823
> 
> 标签：iphone, landscape, uiinterfaceorientation

我已经使用了 Xcode 4.5.1 并使用了这个条件

```
#define IOS_OLDER_THAN_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 )

#ifdef IOS_OLDER_THAN_6
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    [image_signature setImage:[self resizeImage:image_signature.image]];
    return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);
}
#endif
#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    [image_signature setImage:[self resizeImage:image_signature.image]];
    return UIInterfaceOrientationMaskLandscapeLeft;
}
#endif 
```

我已经在 info.plist 中添加了密钥。 ![在此处输入图像描述](../Images/17e610450097381a963f980b9e837710.png)

```
<key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationLandscapeRight</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
    </array> 
```

并设置支持界面方向

如果我在 info.plist 中添加了密钥并设置了支持方向并且不使用以下代码，则应用程序在 ios 5.0 中不起作用

此代码有效，但我想使用小的替代概念..请帮助我..

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:20:20.337

你的方法不健康。只有当#ifdef 语句为真时，预处理器块才会被编译。您所做的是使预处理器语句依赖于运行时参数。

您可以尝试删除所有预处理器块。将您的部署目标设为 5.0。

**编辑：**仅供参考，这些方法是回调方法，因此如果需要，它们将被系统调用。iOS5 会调用 shouldAutorotateToInterfaceOrientation 方法，同样 iOS6 会调用supportedInterfaceOrientations 和iOS6 的rotation 方法。因此，您应该在运行时而不是编译时处理所有系统差异，除非您故意为两个不同的系统编译两个不同版本的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:26:47.177

谢谢先生。basar...我解决了我的问题...我解释了如何解决我的问题...

如果您在 IOS 5 和 IOs 6 中的应用程序中设置方向

然后按照步骤

1）转到项目 - >选择支持界面方向

示例：-您要选择横向左和横向右.. 看图片 ![在此处输入图像描述](../Images/6444236f82a1b1f9683af305bc9a92c3.png)

2）当您选择方向时，然后自动在 info.plist 中添加密钥（检查 info.plist ）如果没有添加，那么您在 info.plist 中添加密钥

例子：-

```
<key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationLandscapeRight</string>
        <string>UIInterfaceOrientationLandscapeLeft</string>
    </array> 
```

3）在每个viewcontroller中添加代码

// 对于IOS 5

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
        [image_signature setImage:[self resizeImage:image_signature.image]];
        return (toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft);
    } 
```

// 对于IOS 6

```
-(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {
    [image_signature setImage:[self resizeImage:image_signature.image]];
    return UIInterfaceOrientationMaskLandscapeLeft;
} 
```

笔记：-

1）不需要条件（IOS版本）......因为两者`shouldAutorotateToInterfaceOrientation (IOs 5`）`supportedInterfaceOrientations (IOS 6)`都是委托并且它是调用运行时...... **（见basar答案）。**

2）如果你只工作 IOS 6 那么不需要代码。仅适用于第 1 步和第 2 步

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:19:13.003

还有另一种方法 - 没有设置允许的方向：

试试这个解决方案 - 它适用于 iOS 5 和 iOS 6。

[UINavigationController 强制旋转](https://stackoverflow.com/questions/9826920/uinavigationcontroller-force-rotate/10146334#10146334)

然后，您可以实现 shouldRotate .. 委托方法，以允许它仅在横向之间旋转。

祝你好运！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-08-22T07:34:10.907

删除那些预处理器块并添加它以支持 ios5 和 ios6 中的自动旋转，我们需要在 ios6 的情况下提供回调......`[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

我们需要打电话

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait; 
```

}

```
-(BOOL)shouldAutoRotate{
    return YES;
  } 
```

适用于 iOS5

```
 (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
        {
            return ((toInterfaceOrientation == UIInterfaceOrientationPortrait) || (toInterfaceOrientation ==
        UIInterfaceOrientationPortraitUpsideDown)); } 
```

# c# - async/await 与 ConfigureAwait 的 continueOnCapturedContext 参数和用于异步延续的 SynchronizationContext

> ID：12933090
> 
> 赞同：11
> 
> 时间：2012-10-17T11:16:27.147
> 
> 标签：c#, asynchronous, task-parallel-library, async-await, synchronizationcontext

我想先放代码，然后解释情况并据此提出我的问题：

```
public partial class MainWindow : Window {

    public MainWindow() {
        InitializeComponent();
    }

    private async void Button_Click_2(object sender, RoutedEventArgs e) {

        var result = await GetValuesAsync();
        Foo.Text += result;
    }

    public async Task<string> GetValuesAsync() {           

        using (var httpClient = new HttpClient()) {

            var response = await httpClient
                .GetAsync("http://www.google.com")
                .ConfigureAwait(continueOnCapturedContext: false);

            // This is the continuation for the httpClient.GetAsync method.
            // We shouldn't get back to sync context here
            // Cuz the continueOnCapturedContext is set to *false*
            // for the Task which is returned from httpClient.GetAsync method
            var html = await GetStringAsync();

            // This is the continuation for the GetStringAsync method.
            // Should I get back to sync context here?
            // Cuz the continueOnCapturedContext is set to *true*
            // for the Task which is returned from GetStringAsync 

            // However, GetStringAsync may be executed in another thread
            // which has no knowledge for the sync context 
            // because the continueOnCapturedContext is set to *false*
            // for the Task which is returned from httpClient.GetAsync method.

            // But, on the other hand, GetStringAsync method also has a 
            // chance to be executed in the UI thread but we shouldn't be
            // relying on that. 
            html += "Hey...";
            Foo.Text = html;

            return html;
        }
    }

    public async Task<string> GetStringAsync() {

        await Task.Delay(1000);
        return "Done...";
    }
} 
```

这是一个相当简单的 WPF 示例，它在 .NET 4.5 上运行，可能没有多大意义，但这应该有助于我解释我的情况。

我在屏幕上有一个按钮，它有一个异步点击事件。查看`GetValuesAsync`代码时，您会看到`await`两次关键字的用法。第一次使用时，我将方法的`continueOnCapturedContext`参数设置为. 所以，这表明我**不一定希望**我的延续在. 到目前为止，一切都很好。`Task.ConfigureAwait``false`**`SynchronizationContext.Current`**

 **在第二次`await`使用（使用`GetStringAsync`方法）时，我没有调用该`ConfigureAwait`方法。所以，我基本上表示我**想**回到当前的同步上下文以继续该`GetStringAsync`方法。因此，如您所见，我尝试`TextBlock.Text`在延续中设置（属于 UI 线程）属性。

当我运行应用程序并单击按钮时，我得到一个异常，给我以下消息：

> 调用线程无法访问此对象，因为不同的线程拥有它。

起初，这对我来说毫无意义，我认为我发现了一个错误，但后来，我意识到它`GetStringAsync`可能会在另一个不同于 UI 线程并且不知道同步上下文的线程中执行（很可能），因为`continueOnCapturedContext`设置`false`为`Task`从`httpClient.GetAsync`方法返回的。

这是这里的情况吗？此外，在这种情况下，是否有机`GetStringAsync`会将方法发布回 UI 线程，因为 httpClient.GetAsync 方法的延续可能在 UI 线程内执行？

我在代码中也有一些评论。鉴于我的问题和代码中的评论，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T11:44:46.517

当您调用`ConfigureAwait(false)`时，该方法的其余部分将在线程池线程上执行，除非*您*`Task`已经`await`完成。

由于`GetAsync`几乎肯定会异步运行，我希望`GetStringAsync`在线程池线程上运行。

```
public async Task<string> GetValuesAsync() {           

    using (var httpClient = new HttpClient()) {

        var response = await httpClient
            .GetAsync("http://www.google.com")
            .ConfigureAwait(continueOnCapturedContext: false);

        // And now we're on the thread pool thread.

        // This "await" will capture the current SynchronizationContext...
        var html = await GetStringAsync();
        // ... and resume it here.

        // But it's not the UI SynchronizationContext.
        // It's the ThreadPool SynchronizationContext.
        // So we're back on a thread pool thread here.

        // So this will raise an exception.
        html += "Hey...";
        Foo.Text = html;

        return html;
    }
} 
```

> 此外，在这种情况下，是否有机会将 GetStringAsync 方法发回 UI 线程，因为 httpClient.GetAsync 方法的延续可能在 UI 线程内执行？

`GetStringAsync`在 UI 线程上运行的唯一方法是在实际编辑`GetAsync`之前完成。*极*不可能。`await`

 *出于这个原因，我更喜欢`ConfigureAwait(false)`for *every* `await` once 不再需要上下文。***

# android - 当我单击另一个自定义列表视图项时填充自定义列表视图

> ID：12933091
> 
> 赞同：1
> 
> 时间：2012-10-17T11:16:34.117
> 
> 标签：android, listview, android-activity, custom-adapter

我有两个带有自定义适配器的列表视图。第一个列表视图包含列表的名称。当我单击列表的名称时，必须使用单击列表的内容填充第二个列表视图。我需要从位于 assets 中的本地 SQLite 数据库中读取列表的内容，但这并不重要。假设我有内容数组。如果我必须在按钮单击时填充它们，我知道该怎么做，但我不知道这样做。两个列表视图都在同一个活动中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:06:07.527

通过使用**listview**的**onItemClickListener**你可以做到这一点。

 **在第一个列表视图的 onitemclickListener 上，**您****为第二个****列表视图**设置适配器

 ******您可以使用一个customadapetr**来做到这一点，并且您可以为两者编写单独的**customadapter**

**列表视图**。

如果您发布一些示例代码，我将尝试给出更具体的答案******

# .net - oracle vb.net 数据集填充

> ID：12933102
> 
> 赞同：1
> 
> 时间：2012-10-17T11:17:02.887
> 
> 标签：.net, oracle, datagridview, dataset

这段代码有什么问题？没有错误，但没有结果。我的 DataGridView_sent 没有被填满。

```
Dim objConn As New System.Data.OracleClient.OracleConnection
Dim objCmd As New System.Data.OracleClient.OracleCommand
Dim dtAdapter As New System.Data.OracleClient.OracleDataAdapter

Dim ds As New DataSet
Dim strConnString, strSQL As String

strConnString = "Data Source=db;User Id=user;Password=pass;"
strSQL = "select * from table where sentdate between '" & date1 & "' and '" & date2 & "'"

 objConn.ConnectionString = strConnString
 With objCmd
     .Connection = objConn
     .CommandText = strSQL
     .CommandType = CommandType.Text
  End With
  dtAdapter.SelectCommand = objCmd

  dtAdapter.Fill(ds)
  DataGridView_sent.DataSource = ds

  dtAdapter = Nothing
  objConn.Close()
  objConn = Nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:19:29.890

这可能是由于日期的不正确表示引起的。
您应该使用参数化查询并让 Oracle Provider 以正确的模式呈现您的日期字段值

```
....
strSQL = "select * from table where sentdate between :date1 and :date2" 
objConn.ConnectionString = strConnString 
With objCmd 
   .Connection = objConn 
   .CommandText = strSQL 
   .CommandType = CommandType.Text 
   .Parameters.AddWithValue(":date1", Convert.ToDateTime(date1));
   .Parameters.AddWithValue(":date2", Convert.ToDateTime(date2));
End With 
dtAdapter.SelectCommand = objCmd 
..... 
```

# java - java.io.IOException：访问被拒绝（H2 + Hibernate）

> ID：12933106
> 
> 赞同：1
> 
> 时间：2012-10-17T11:17:15.603
> 
> 标签：java, windows, permissions, administrator

表大小超过 10,000 行

提交请求，每 6 秒读取最后 100 行，
并在记录 中读取 1 行

但有时会出现错误

```
17:34:49,549 WARN SqlExceptionHelper:143 - SQL Error: 90031, SQLState: 90031
17:34:49,549 ERROR SqlExceptionHelper:144 - Ошибка ввода/вывода: "java.io.IOException: Access denied";
"C:/Users/name/Documents/NetBeansProjects/project/base.0b6276e133678305.1105.temp.db" IO Exception: "java.io.IOException: Access denied";
"C:/Users/name/Documents/NetBeansProjects/project/base.0b6276e133678305.1105.temp.db";
    SQL statement: select this_.id as id0_0_, this_.broker as broker0_0_, this_.potential
    as potential0_0_, this_.quote as quote0_0_, this_.symbol as symbol0_0_,
    this_.timeQuote as timeQuote0_0_ from history this_ order by this_.id desc limit ? [90031-169] 
```

全部以管理员权限运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:20:00.897

错误是`java.io.IOException: Access denied`

这与 Hibernate 和 H2 无关。由于某种原因，不允许 Java 进程创建/修改文件。可能的原因：

1.  父文件夹不存在
2.  您不能在该文件夹中创建/读取/修改文件。不像在 Unix 上，`Administrator`不能在 Windows 上做所有事情。如果文件夹不属于您，您必须先接管该文件夹。在这种情况下，该文件夹可能属于用户`name`，如果他不允许访问`Administrator`，那么您会收到错误消息。
3.  文件名包含非法字符。在你的情况下不太可能。
4.  有一个目录`C:/Users/name/Documents/NetBeansProjects/project/base.0b6276e133678305.1105.temp.db`。

# sql-server - 在 SQL Server 中按日期范围检索数据，其中包含中断

> ID：12933108
> 
> 赞同：1
> 
> 时间：2012-10-17T11:17:26.490
> 
> 标签：sql-server, sql-server-2008, tsql

我需要按选定日期检索数据。有一个主要的细节：用户可以连续选择两天，然后可以跳过一些天，然后再选择另一个。

将选定日期传递到存储过程并按此类日期范围组织过滤器的最佳方法是什么？

例如，我有具有以下结构的表：

```
CREATE TABLE [dbo].[Events](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [EventDate] [datetime] NOT NULL,
    [Amount] [float] NOT NULL,
 CONSTRAINT [PK_Events] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

使用以下数据：

```
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-01-01 10:00', 12)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-01-01 11:00', 154)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-01-01 12:00', 4)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-02-01 10:00', 132)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-02-01 11:00', 212)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-03-01 10:00', 712)
INSERT [dbo].[Events] ([EventDate], [Amount]) VALUES ('2012-03-01 20:00', 892) 
```

用户想要检索事件日期为 2012-01-01 10:00 和 2012-01-01 11:00，从 2012-03-01 09:00 到 2012-03-01 19:00 等的数据。

用户可以选择不同的间隔计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:40:03.780

如果您想将多个“相同”参数发送到存储过程，这通常表明您应该使用[表值参数](http://msdn.microsoft.com/en-us/library/bb510489.aspx)(TVP)。

在存储过程中，您可以将 TVP 视为表变量，因此您的查询如下所示：

```
SELECT
    *
FROM
    Events e
        inner join
    @MyTVP t
        on
            e.EventDate between t.FromDate and t.ToDate 
```

假设您的 TVP 有两列，`FromDate`并且`ToDate`具有明显的定义。

# apache - Apache 在 www.example.com/dir/.php 上抛出 403

> ID：12933109
> 
> 赞同：0
> 
> 时间：2012-10-17T11:17:28.740
> 
> 标签：apache, .htaccess, apache2

我从 Google 网站管理员工具中发现，Google 在某处发现了一个错误链接，该链接在我的服务器上引发了 403 错误。

网址是这样的：

[http://www.example.com/directory/.php](http://www.example.com/directory/.php)

我不知道该网址是如何产生的，而且该网站太复杂了，我无法找到，但我想简单地将 301 重定向到：

[http://www.example.com/directory/](http://www.example.com/directory/)

我已经在 .htaccess 中为重定向设置了正确的规则，但它似乎没有被触发。几乎就像在处理 .htaccess 之前生成 403 一样。有谁知道为什么会这样以及如何成功地将用户重定向到新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:00:18.423

除了规则可能确实不正确之外，这也可能是因为这涉及查找文件名以 . 开头的文件`.`。这些文件通常对外界“隐藏”，因此可能是您的 Apache（配置）或您的操作系统不允许提供此文件。

在不了解配置的情况下，无法对此进行分析。你可以通过创建一个名为“.test”的文件来测试它，看看它是否可以访问。

# jquery - jQuery子表ID

> ID：12933111
> 
> 赞同：0
> 
> 时间：2012-10-17T11:17:34.257
> 
> 标签：jquery

尝试在单击帐户或账单链接时从下面的 html / 脚本中的表 id="1" 中获取表 ID 我想获取表 ID，以便我可以将该表 ID 传递给另一个函数以获取 AJAX 数据。表 ID 是装箱测功机。这是测试数据

```
<html>
<head>
<script src="jquery-1.8.2.min.js"></script>
<script type = "text/javascript">
$(document).ready(function() {                  
                $('.toggler').click(function(event){
                    event.preventDefault();
                    $(this).parent().find('.content').slideToggle();
                    var a = $(this).next("div").find(".content").children().attr("id");
                    alert(a);

                }); 
</script>
</head>
<body>
<table border="1">
    <tr>
        <td>
            <table id="MainTable">
                <tr>
                    <td>
                        <div class="toggler-wrap">
                            <a href="#" class="toggler">Account </a>
                            <a href="#" class="toggler">Bill</a>
                            <div class="content">   
                                <table id="1">
                                    <tr><td>Content will come here</td></tr>                                    
                                </table>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            <table id="MainTable">
                <tr>
                    <td>
                        <div class="toggler-wrap">
                            <a href="#" class="toggler">Account</a>
                            <a href="#" class="toggler">Bill</a>
                            <div class="content">   
                                <table id="2">
                                    <tr><td>Content will come here</td></tr>                                    
                                </table>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:20:09.670

你可以像这样得到它

```
$('.content').find('table').attr('id'); 
```

**更新代码：**

```
 $('.toggler').click(function(event){
      event.preventDefault();
      $(this).parent().find('.content').slideToggle();
      var a = $(this).parent().find(".content").find('table').attr('id');
      alert(a);
 }); 
```

[更新了 Jsfiddle](http://jsfiddle.net/RpakG/60/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:27:30.283

```
$('.toggler').click(function(event){
   event.preventDefault();
   $(this).parent().find('.content').slideToggle();
   var a = $(this).parent().find('table').attr("id");
   alert(a);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:34:27.590

我会为每个包含您要搜索的 Id 的链接添加一个属性，然后使用它来查找您要查找的特定表。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type = "text/javascript">
$(document).ready(function() {                  
                $('.toggler').click(function(event){
                    event.preventDefault();
                    var targetId = $(this).attr('data-id');
                    //Call ajax with the target Id

                    var content = $('table[id="' + targetId + '"] td').text();
                    alert(content);

                    $(this).parent().find('.content').slideToggle();
                }); 
            });
</script>
</head>
<body>
<table border="1">
    <tr>
        <td>
            <table id="MainTable">
                <tr>
                    <td>
                        <div class="toggler-wrap">
                            <a href="#" class="toggler" data-id="1">Account </a>
                            <a href="#" class="toggler" data-id="1">Bill</a>
                            <div class="content">   
                                <table id="1">
                                    <tr><td>Content for id 1</td></tr>                                    
                                </table>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td>
            <table id="MainTable">
                <tr>
                    <td>
                        <div class="toggler-wrap">
                            <a href="#" class="toggler" data-id="2">Account</a>
                            <a href="#" class="toggler" data-id="2">Bill</a>
                            <div class="content">   
                                <table id="2">
                                    <tr><td>Content for id 2</td></tr>                                    
                                </table>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    </table>
</body>
</html> 
```

# web-services - 移动网络服务服务器

> ID：12933112
> 
> 赞同：0
> 
> 时间：2012-10-17T11:17:34.740
> 
> 标签：web-services, windows-mobile

我有一个在 windows ce 6.0 上运行的设备我希望客户能够转到设备 ip 并查看 simlpe 报告或更改基本设置。设备中有没有一个简单的 asp 网站选项？还是只有一个 Web 服务来下载设备中发生的 xml 文件？

我不想将此信息放在服务器中，我希望客户端直接访问他的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:10:58.733

如果使用 args 调用设备的网站，我已经为 WM 制作了一个 Web 服务器，该服务器在设备上执行特殊操作。该代码可以使设备发出哔哔声或报告设备的一些信息。

如果您愿意，我可以发布代码等。

~约瑟夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:15:38.680

有一个[名为 Padarn 的商业产品](http://www.opennetcf.com/Products/Padarn.aspx)，它是一个轻量级的 ASP.NET Web 服务器，可以做到这一点。

为了充分披露，我是编写并出售 Padarn 的人。

# java - 更好的理解——Class.forName("com.mysql.jdbc.Driver").newInstance();

> ID：12933113
> 
> 赞同：8
> 
> 时间：2012-10-17T11:17:38.267
> 
> 标签：java, mysql

我遇到了[这个有用的代码链接，](http://discussion.accuwebhost.com/how-tos/697-how-connect-mysql-database-java.html)当更新到我的网络服务器时，它工作得很好。我绝对可以做任何事情。

现在，我唯一不完全理解的是`Class.forName()`.

为什么要使用这个？这可以做不同的吗？这是解决其他问题的方法吗？添加参考？创建一个类作为实现/扩展另一个类？

我想完全了解发生了什么，但这是我的方式。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T11:19:37.190

该代码强制表示 MySQL 驱动程序的类加载和初始化。在 Java 中，除非有*必要*加载类，否则不会加载类。`Class.forName`由于 JDBC 代码通常从不直接引用驱动程序，因此如果没有（或其他一些等效的替代方案）就不会加载它。

请注意，有必要*加载*和*初始化*类，这是两件不同的事情。

另外，请注意没有必要调用`.newInstance()`——驱动程序的静态初始化程序已经将自己注册为 JDBC 驱动程序。

最后，请注意，使用**Service Loader API**通常不需要调用 Class.forName() 来加载驱动程序：它可以自动加载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T11:25:38.557

`Class.forName(className)`加载具有指定的类`className`。

JDBC 驱动程序以这种方式加载以避免编译时依赖于特定的 JDBC 驱动程序。这个想法是您使用 Java 的 JDBC API（包中定义的类和接口`java.sql`）`javax.sql`而不必直接引用特定的 JDBC 驱动程序。

当您让 Java 通过调用加载驱动程序类时`forName`，驱动程序将自己注册以便可以使用它。

请注意，对于大多数 JDBC 驱动程序来说，没有必要显式地创建驱动程序类的新实例。你可以`.newInstance()`挂断电话。

请注意，从 JDBC 版本 4.0 开始，`Class.forName()`不再需要调用 - 发现驱动程序的过程已得到改进，JDBC 可以自动加载它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T11:25:04.240

所有 JDBC 驱动程序都有一个向 DriverManager 注册自身的静态块，而 DriverManager 仅具有静态初始化程序。

MySQL JDBC 驱动程序有一个静态初始化程序，如下所示：

```
static {
    try {
        java.sql.DriverManager.registerDriver(new Driver());
    } catch (SQLException E) {
        throw new RuntimeException("Can't register driver!");
    }
} 
```

JVM 执行静态块，Driver 向 DriverManager 注册自己。您需要一个数据库连接来操作数据库。为了创建与数据库的连接，DriverManager 类必须知道您要使用哪个数据库驱动程序。它通过遍历已注册的驱动程序数组（内部是一个 Vector）并在数组中的每个驱动程序上调用 acceptURL(url) 方法来实现这一点，有效地要求驱动程序告诉它它是否可以处理 JDBC网址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:24:18.023

您可以使用例如：

```
import com.mysql.jdbc.Driver;

public class MyClass {
   //[...]
   public void myMethod() {
        Class<Driver> clz = Driver.class;
        Driver driver = clz.newInstance();
   }
} 
```

但这不是那么灵活；例如，您可以从配置文件中读取名称“com.mysql.jdbc.Driver”。也许您想使用其他驱动程序（来自 Oracle）并且您不想更改代码；在上面介绍的方式中，这是不可能的，因此正确的方法是使用`Class.forName(name)`.

# java - 使用 Observer 观察属性

> ID：12933116
> 
> 赞同：2
> 
> 时间：2012-10-17T11:17:46.037
> 
> 标签：java, observer-pattern

我可以使用Java中的**哪个属性更改**`Observer`以及**旧值是什么？**`Observable`

 **`notifyObservers`只获得一个属性，即新值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:21:49.787

在 notifyObservers(Object obj) 方法中，您可以将任何对象传递给您的观察者。您可以将此对象用作您想要交流的任何数据的容器（如旧值或新值）。你只需要把它放回观察者中就可以了。**

# javascript - 仅在有足够空间时才显示 div

> ID：12933117
> 
> 赞同：2
> 
> 时间：2012-10-17T11:17:48.397
> 
> 标签：javascript

我正在寻找一种仅在有空间的情况下才显示 div 的解决方案。

在我博客的帖子页面上，我在左侧边栏中显示最新帖子，就像这样......

[不不不从不发布页面](http://nonaynever.net/12286/manager-vacancy-a-long-shortlist/)

我想根据帖子的长度显示不同数量的侧边栏项目。目前我有三个 div 显示不同数量的项目并运行此脚本。

```
 if ($("#contentheight").height()>960 && $("#contentheight").height()<1200) {
  document.getElementById("threeposts").className += "hide";
}
else if ($("#contentheight").height()>1200 && $("#contentheight").height()<1880) {
  document.getElementById("fiveposts").className += "hide";
}
else if ($("#contentheight").height()>1880) {
  document.getElementById("sevenposts").className += "hide";
} 
```

然而，这并不方便，而且对于非常短的帖子，它根本不显示任何项目。

是否有一种解决方法，例如，我可以为 7 个项目编写代码，但只显示父 div 可以占用的数量？我尝试使用溢出：隐藏，但最终你将最终项目切成两半。

例如，如果有足够的空间容纳三个完整的项目，它们将被显示，但之后的任何项目都不会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:23:14.043

您可以创建一个隐藏的 div 或未插入 DOM 的具有所需宽度的 div。

然后逐项插入，直到此 div 的高度超过您的帖子的长度。
现在您知道有多少项目可以放入 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:25:55.277

尝试这样的事情：

```
$('#container').children().each( function() {
  var top = $(this).top;
  var height = $(this).height;
  if (top + height > $(this).parent().height()) {
    $(this).className += "hide";
  }
}); 
```

# uiview - UIPanGestureRecognizer : 在视图中处理 UIPanGestureRecognizer

> ID：12933120
> 
> 赞同：2
> 
> 时间：2012-10-17T11:17:56.457
> 
> 标签：uiview, pull, uipangesturerecognizer

我有一个 UIView。我需要将该视图从上到下和从下到上移动，例如“像 iPhone 的通知中心这样的可拉视图”。我怎样才能做到这一点 ？是否可以使用 UIPanGestureRecognizer？

# servlets - 在jsp中导入创建的类

> ID：12933123
> 
> 赞同：0
> 
> 时间：2012-10-17T11:18:16.663
> 
> 标签：servlets

我得到了一个 servlet，其类文件包含在文件路径 webapps/ass2/WEB-INF/classes/User.class 中，该类代表我的应用程序所需的用户 bean。在 jsp 中，我将导入组织为 `<%@page import="mypck.User" %>。当我尝试加载页面时，我被 apache tomcat 抛出一个错误，

```
An error occurred at line: 12 in the jsp file: /fourm.jsp
User cannot be resolved to a type
9: 
10: <head>
11: <%
12: User user = (User)session.getAttribute("userBean");
13: 
14: String username = user.getName();
15: 
```

我想我还没有正确导入课程？我的问题是：如何将此类导入到 jsp 文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:12:18.853

> *包含在文件路径 webapps/ass2/WEB-INF/classes/User.class 中的类文件*
> 
> ...
> 
> `<%@page import="mypck.User" %>`

这不匹配。`User.class`必须放在`mypck`代表包的文件夹中。相应地修复它：`webapps/ass2/WEB-INF/classes/mypck/User.class`.

* * *

**与具体问题**无关**，十年以来一直不鼓励使用*scriptlet 。*我建议暂停 JSP 并花一些时间学习 taglibs 和 EL。使用 EL，您可以只显示用户名，如下所示：**

 **```
<p>Welcome, ${userBean.name}</p> 
```

### 也可以看看：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)
*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:23:24.500

您的导入在语法上是正确的，但是包声明是否正确？**

# jquery - jquery 显示/隐藏评论回复

> ID：12933124
> 
> 赞同：0
> 
> 时间：2012-10-17T11:18:20.997
> 
> 标签：jquery

你好我试图想出代码来显示隐藏评论 ID 特定的文本区域。

我已经成功地能够在页面加载时为每个评论分配一个文本区域，然后在单击时隐藏和显示。但我不知道如何再次隐藏它们。到目前为止，这是我想出的：

```
$('#show-reply-comment').each(function(){
    $(this).click(function(e){
        e.preventDefault();
        var commentid = $(this).data('commentid');
        $('#'+commentid+'').show();
        $(this).unbind('click');
        $(this).attr('id', 'hide-reply-comment');
    });
});

$('#hide-reply-comment').each(function(){
    $(this).click(function(e){
        e.preventDefault();
        var commentid = $(this).data('commentid');
        $('#'+commentid+'').hide();
        $(this).unbind('click');
        $(this).attr('id', 'show-reply-comment');
    });
}); 
```

用户应该能够同时打开多个评论回复文本区域。如果有人能给我关于如何继续的提示，将不胜感激。

编辑：我忘了 return false; 但我不想弄乱代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:20:15.127

jQuery`#id`选择器只返回第一个匹配的元素。

您应该使用`.class`选择器返回所有匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:22:22.223

无需尝试更改元素的 id 并重复绑定和取消绑定事件处理程序，您只需将整个代码替换为

```
$('.show-hide-reply-comment').click(function(){
   var commentid = $(this).data('commentid');
   $('#'+commentid).toggle();
}); 
```

请注意，我使用“show-hide-reply-comment”类替换了按钮的 ID，因为只能将 ID 赋予一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:30:46.533

如前所述，#id 必须是唯一的。但它不仅与 jquery 相关，而且与 javascript 相关。只有 css 不关心唯一 ID 选择器。这当然不会使它有效...

# java - Ubuntu：从 /X11/Xsession.d 中启动的 java 启动 firefox 正在运行但不可见

> ID：12933127
> 
> 赞同：1
> 
> 时间：2012-10-17T11:18:27.913
> 
> 标签：java, linux, firefox, ubuntu, x11

我的 Ubuntu Linux 目录 /etc/X11/Xsession.d/98start 中有一个脚本，它看起来像这样启动诊断 Java 应用程序：

```
nohup /usr/bin/java -jar /opt/diagnostics/diagnostic.jar /opt/diagnostics 2>> /dev/null >> /dev/null & 
```

在此应用程序中检查了许多内容，并在从服务器接收到一些命令后（不到 10 秒）使用以下命令启动浏览器：

```
firefox http://10.0.0.1:8080/client.html 
```

问题是firefox正确启动，“ps aux”显示它正在运行，但屏幕上什么都看不到。

当我终止 firefox 进程时，Java 应用程序会重新启动它，然后它就可见了。所以看起来第一次启动“太快了”，firefox 正在后台某处运行，或者在 X11 之后的其他级别上运行......

在启动命令中添加 --display 也没有成功

```
firefox http://172.24.17.10:8080/client/index.shtml --display :0.0 
```

所以也许我应该质疑这些：

*   X11 是启动我的 Java 应用程序的正确位置吗？我已经用 98 把它放在最后一个了，但也许那还很快？
*   他们是另一种启动firefox以将其强制到前台的方法吗？

提前感谢您的帮助！坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T15:11:58.377

通过启动firefox两次解决...

# bash - bash IFS 在这个例子中是如何工作的？

> ID：12933132
> 
> 赞同：3
> 
> 时间：2012-10-17T11:18:46.423
> 
> 标签：bash, ifs

我正在阅读有关[bash 内部变量](http://tldp.org/LDP/abs/html/internalvariables.html)的信息，并遇到了以下`IFS`示例：

```
output_args_one_per_line()
{
  for arg
  do
    echo "[$arg]"
  done #  ^    ^   Embed within brackets, for your viewing pleasure.
} 
```

**情况1**

```
IFS=" "
var=" a  b c   "

output_args_one_per_line $var
#OUTPUT
# [a]
# [b]
# [c] 
```

**案例2**

```
IFS=:
var=":a::b:c:::"               # Same pattern as above
CASE2   
                        # but substituting ":" for " "  ...
output_args_one_per_line $var
# []
# [a]
# []
# [b]
# [c]
# []
# [] 
```

现在，根据我的理解，如果值`IFS`是默认值，那么`\t\n`前导和尾随空格将被删除。因此，对于 case1 bash `var`，`a b c`因此输出。

根据我的说法，对于 case2，bash 将`var`其视为此处的`|a||b|c|||`处理`|`方式。`space`我检查了它使用

```
Noob@Noob:~/tmp$ IFS=$':' FOO=$":a::b:c:::"; echo $FOO $'x'
 a  b c   x 
```

所以，我对案例 2 的预期输出是

```
# []
# [a]
# []
# []
# [b]
# [c]
# []
# []
# [] 
```

那么，有人可以在内部向我解释 bash`var`在案例 2 中的处理方式以及我的理解哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:46:27.047

您的声明（编辑为使用“：”而不是“|”）：

> 根据我的案例 2，bash 将 var 视为 :a::b:c::: 将 : 视为空格。

是假的。`IFS`导致`bash`将`:`其视为单词分隔符，而不是空格。不要仅仅因为空格是*默认*的单词分隔符而将两者混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:41:40.420

`:`是分隔符。`a:b`分为`a`and `b`，中间没有。在您预期的行为中，您将如何编码以下内容？

```
[a]
[]
[b] 
```

唯一奇怪的是最后没有三个空字符串。这可能是因为

> 不带引号的隐式空参数由没有值的参数的扩展产生，被删除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T11:52:50.767

在*案例 2*`":a::b:c:::"`中，您`IFS=:`
正在做的是在每个遇到的情况下拆分字符串`:`

所以，从字符串的开头，直到`:`你拥有的第一个*什么都不*`":`
是，因此*`[]`*

 *从第一个`:`到下一个`:`你拥有`:a:`
的是`a`，因此`[a]`

从那里到下一个`:`你*什么都不*`::`
是，因此*`[]`*

 *从那里到下一个`:`你拥有`:b:`
的是`b`，因此`[b]`

从那里到下一个`:`你拥有`:c:`
的是`c`，因此`[c]`

从那里到下一个`:`你*什么都不*`::`
是，因此*`[]`*

 *从那里到下一个`:`你*什么都不*`::"`
是，因此*`[]`*

 *所以你得到那个结果..

* * *

正如@Mark Reed 在评论中提到的，您可以`printf`
与您一起使用`bash -x`：

```
$ bash -x
$ IFS=':'; var=':a::b:c:::'; printf "[%s]\n" $var
[12]+ IFS=:
[12]+ var=:a::b:c:::
[12]+ printf '[%s]\n' '' a '' b c '' ''     # notice this
[]
[a]
[]
[b]
[c]
[]
[] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:08:44.380

原因很简单：

```
IFS=" "
var=" a  b c   "

output_args_one_per_line $var 
```

这意味着`output_args_one_per_line`用这个参数调用：

```
output_args_one_per_line  a  b c 
```

在解析命令行时，BASH 会移除额外的空格，所以实际调用会使用

```
output_args_one_per_line a b c 
```

即多个空格合并为一个，前面的空格`a`将成为命令和第一个参数之间的空格。

这意味着空间将在应用*之前* `IFS`消失。这也意味着你不能写

```
IFS=:
output_args_one_per_line:$var 
```

命令后必须有空格，而不是单词分隔符。

您可以运行脚本`set -x`以查看跟踪输出（即 BASH 如何扩展行）。

在第二种情况下，单词分隔符不是空格字符，因此命令和第一个参数之间的必要空格不会与参数合并，并且该行变为

```
output_args_one_per_line :a::b:c::: 
```

唯一奇怪的是输出应该是三个空参数，`c`但这可能是因为空的尾随参数被删除（就像 BASH 删除参数后的空格一样）。这是另一个奇怪的输出：

```
IFS=:
var=":a::b:c::: "   # Blank after C
> output_args_one_per_line $var
[]
[a]
[]
[b]
[c]
[]
[]
[ ] 
```

因此，如果`var`在最后一个冒号之后确实包含任何内容，我们会得到缺少的参数。****

# java - Java：PhantomReference、ReferenceQueue 和 finalize

> ID：12933134
> 
> 赞同：5
> 
> 时间：2012-10-17T11:19:00.137
> 
> 标签：java, garbage-collection, phantom-reference

我有一个 PR，一个 PR 指向的对象 O，以及一个为 PR 设置的 RQ。我有一个线程不断轮询 RQ，并且在它在 RQ 中找到的第一个引用时，线程打印它找到它的时间，然后退出。

一切正常，但是当 O 完成最终确定（无论多么微不足道）时，线程不再在 RQ 中找到引用并无限期地继续运行。

问题：为什么会这样？我正在使用 Sun JDK 1.6。

这是代码：

`good case`

```
public class MyGCPhantom 
{   
    public static void main(String[] args) throws InterruptedException 
    {       
        GCPhantomObject p = new GCPhantomObject();
        ReferenceQueue phantomQueue = new ReferenceQueue();
        PhantomReference<GCPhantomObject> pr = new PhantomReference<GCPhantomObject>(p, phantomQueue);      
        new GCPhantomThread(phantomQueue, "Phantom").start();
        p = null;

        System.gc();
    }
}

class GCPhantomObject
{   
    @Override
    protected void finalize()
    {
        //System.out.println("GCPhantom finalized " + System.currentTimeMillis());      
    }
}

class GCPhantomThread extends Thread
{
    private ReferenceQueue referenceQueue;
    private String name;

    GCPhantomThread(ReferenceQueue referenceQueue, String name)
    {
        this.referenceQueue = referenceQueue;
        this.name = name;
    }

    @Override
    public void run()
    {
        while(referenceQueue.poll() == null);       
        System.out.println(name + " found at " + System.currentTimeMillis());
    }
} 
```

`bad case`

只需取消注释 中的 SOP`finalize()`即可`GCPhantomObject`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:45:36.093

你的分析有点不对劲。在好的情况和坏的情况下，您的对象*都会*`finalize`实现。在好的情况下，它实现起来很简单；在糟糕的情况下，非常重要。因此，显而易见的问题在于`finalize`.

我看不出为什么 JVM 会被规范强制让你的 ref 入队。您执行一次 GC 运行，然后继续等待某些事情发生。众所周知，任何重要的终结器都可能使对象复活，因此在入队之前可能需要更多的 GC 周期。我建议添加更多的 GC 调用。

另请注意，不建议您决定使用`poll`而`remove`不是。您应该使用阻塞呼叫来防止忙轮询。

作为参考，这些是文档中的相关定义：

> 如果垃圾收集器在某个时间点确定幻影引用的所指对象是幻影可到达的，那么在那个时间或稍后的某个时间它将将该引用入队。

* * *

> 如果一个对象既不是强、软或弱可达的，它是最终确定的，并且一些幻象引用引用它，它就是幻象可达的。

* * *

> 已完成的对象已自动调用其终结器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:32:28.153

在对象完成之前，幻影引用不会出现在 ReferenceQueue 中。你正在做一个繁忙的循环，所以它是有问题的。请注意，最终确定至少需要两个 gcs。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:07:44.790

我刚刚尝试了在我的系统上发布的代码，即使在两次 System.gc() 调用之后它也不起作用。即使将 System.gc() 调用放在 GCPhantomThread 类的 while 循环中，它也不会终止。

在我看来，这里的问题是您正在创建的对象永远不会被放置在 ReferenceQueue 中，因为在 GCPhantomThread 运行时它甚至都无法通过幻像访问。main() 方法中对对象的 PhantomReference 超出了范围，因此当您运行 GCPhantomThread 时，该对象甚至无法幻像访问。根据文档，对于要排队的幻像引用，完成和幻像可达性是必要的。

当我将幻像引用传递给 GCPhantomThread 时，它可以工作。在我的机器上，这段代码总是终止：

```
 import java.lang.ref.PhantomReference;
    import java.lang.ref.ReferenceQueue;
    import java.util.ArrayList;
    import java.util.List;
    import java.util.Random;

    public class MyGCPhantom {
        public static void main(String[] args) throws InterruptedException {
            GCPhantomObject p = new GCPhantomObject();
            ReferenceQueue phantomQueue = new ReferenceQueue();
            PhantomReference pr = new PhantomReference(p, phantomQueue);
            new GCPhantomThread(pr, phantomQueue, "Phantom").start();
            p = null;
            pr = null;
            System.gc();
            System.out.println("main thread done ...");
        }
    }

    class GCPhantomObject {
        @Override
        protected void finalize() {
            System.out.println("GCPhantom finalized at " + System.nanoTime());
        }
    }

    class GCPhantomThread extends Thread {
        private ReferenceQueue referenceQueue;
        private String name;
        private PhantomReference pr;

        GCPhantomThread(PhantomReference pr, ReferenceQueue referenceQueue, String name) {
            this.referenceQueue = referenceQueue;
            this.name = name;
            this.pr = pr;
        }

        @Override
        public void run() {
            try {
                while (referenceQueue.remove(5000) == null) {
                    System.gc();
                }
                System.out.println(name + " found at " + System.nanoTime());
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-31T14:05:15.027

发现 Jack Shirazi 关于 Finalizer 的优秀文章。一旦我们阅读完这篇文章，这个问题就会自行回答。

[http://www.fasterj.com/articles/finalizer1.shtml](http://www.fasterj.com/articles/finalizer1.shtml)

简而言之：在非平凡的 finalize() 方法的情况下，即使对象在第一次 GC 运行中被“收集”，当时它也不会被物理删除。这发生在下一次 GC 运行时。这就是为什么 PR 对象会在第二次 GC 期间出现在队列中的原因。

# java - 使用 java 代码读取存储在 hdfs 中的 .properties 文件

> ID：12933135
> 
> 赞同：4
> 
> 时间：2012-10-17T11:19:04.837
> 
> 标签：java, hadoop, workflow, oozie

我需要阅读 hdfs 中可用的 .properties 文件。我正在使用下面的代码，但它会引发运行时错误。

```
FileSystem fs = FileSystem.get(config);

    Properties conf = wc.createConfiguration();
    Properties prop = new Properties();
    String appPath = "hdfs://clusterdb05.com:8020/user/cmahajan/" + version + "/apps/apps/";
    conf.setProperty(OozieClient.APP_PATH,appPath);
    FileInputStream f = new FileInputStream("hdfs://clusterdb05.com:8020/user/cmahajan/app.properties");
    ObjectInputStream f = new ObjectInputStream(fs.open(new Path("/user/cmahajan/app.properties"))); 
```

运行时错误是：

```
LaunchJob.java:28: cannot find symbol

symbol  : class ObjectInputStream
location: class LaunchJob
    ObjectInputStream f = new ObjectInputStream(fs.open(new Path("/user/cmahajan/app.properties")));
    ^
LaunchJob.java:28: cannot find symbol
symbol  : class ObjectInputStream
location: class LaunchJob
    ObjectInputStream f = new ObjectInputStream(fs.open(new Path("/user/cmahajan/app.properties"))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-27T12:08:47.073

从 hdfs 加载属性文件：

1.  确保你**的 core-site.xml**，**hdfs-site xml**文件路径
2.  hdfs 端口号（它将在**core-site.xml**中可用）
3.  替换**getProperty**中的键。

    ```
     String CURRENCIES_DIM1 = null;
           String DATES_DIM2 = null; 
           Configuration conf = new Configuration();
            conf.addResource(new Path("/usr/local/hadoop/etc/hadoop/core-site.xml"));
            conf.addResource(new Path("/usr/local/hadoop/etc/hadoop/hdfs-site.xml"));
            String filePath = "hdfs://localhost:54310/user/CurrencyCache.properties";
            Path path = new Path(filePath);
            FileSystem fs = path.getFileSystem(conf);
            try (FSDataInputStream currencyInputStream = fs.open(path)) {
                Properties currencyProp = new Properties();
                currencyProp.load(currencyInputStream);
                CURRENCIES_DIM1= currencyProp.getProperty("key");//getting the 'CURRENCIES_DIM' file path from properties file
                DATES_DIM2= currencyProp.getProperty("key");            //getting the 'DATES_DIM' file path from properties file

            } catch (IOException e) {

                e.printStackTrace();
            }
            fs.close(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:26:34.353

使用类的完全限定名称：

```
java.io.ObjectInputStream 
```

或者

使用以下行导入类：

```
import java.io.ObjectInputStream; 
```

# ruby-on-rails - 带有 grub 的 Google Analytic 给了我 404 错误。

> ID：12933138
> 
> 赞同：1
> 
> 时间：2012-10-17T11:19:14.647
> 
> 标签：ruby-on-rails, rubygems, google-analytics, garb-gem

我是 ror 开发的初学者。我正在开发小型 RoR 应用程序，我想在其中集成 Google 分析。我正在使用 [Garb gem](https://github.com/vigetlabs/garb) 根据我使用的 gem

```
Garb::Session.login(username, password)// for initial session setup 
```

之后选择正确的配置文件

```
profile = Garb::Management::Profile.all.detect {|p| p.web_property_id == 'UA-XXXXXXX-X'} 
```

但是当我试图获取数据时，它给了我错误

```
Exits.results(profile, :filters => {:page_path.eql => '/'})

// error
Error 404 (Not Found)!!1
The requested URL /analytics/feeds/accounts/default was not found on this server. 
```

如何解决这个问题有什么办法可以处理这种情况。还是我做错了什么？

需要帮助......谢谢......

# dart - Dart - 隔离跨窗口通信

> ID：12933142
> 
> 赞同：3
> 
> 时间：2012-10-17T11:19:32.943
> 
> 标签：dart, dart-isolates

Dart 隔离是否可以进行跨窗口通信？这是我的场景：用户在浏览器窗口 A 中打开网站，窗口 A 生成一个新的隔离区。然后，用户单击创建新选项卡的链接并打开浏览器窗口 B（假设该链接位于同一域中，等等...）。浏览器窗口 B 是否可以从浏览器窗口 A 生成的隔离区发送和接收消息，如果可以，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:53:30.493

仅使用隔离消息传递是不可能进行跨窗口通信的。但是，您可以按照[此处](http://ejohn.org/blog/cross-window-messaging/)所述使用**postMessage**进行跨窗口通信，然后设置与每个隔离区通信的消息处理程序（通过使用 postMessage 作为每个隔离区之间的一种消息总线）。

# ruby-on-rails - NoMethodError（nil:NilClass 的未定义方法“service_options”）

> ID：12933150
> 
> 赞同：1
> 
> 时间：2012-10-17T11:19:56.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3, radiant

我正在使用 rails 2.3.4，我面临“无方法错误”

有可能找不到方法，但我的问题是 - 是否有可能因为空表而发生错误？或另一个控制器或助手中的错误？

错误跟踪：

处理 QuoteRequestsController#create (for 127.0.0.1 at 2012-10-17 16:07:34) [POST] 参数：{"controller"=>"quote_requests", "quote_request"=>{"packing_required"=>"", "move_steps_number"=>"", "phone_day"=>"", "pickup_region_id"=>"", "email"=>"", "move_to_street"=>"", "move_from_suburb"=>"", "title "=>"", "quick_estimate"=>"true", "room_counts"=>{"9"=>"0", "8"=>"0", "5"=>"0", "2 "=>"0", "3"=>"0", "6"=>"0", "7"=>"0", "1"=>"0", "4"=>"", "11"=>"0"}, "arrive_parking_notes"=>"", "first_name"=>"", "arrive_date_flexible"=>"false", " insurance_value"=>"", "arrive_steps_number"=>"", "move_parking_notes"=>"", "last_name"=>"", "move_region_id"=>"", "move_date_flexible"=>"false", "move_type_id "=>"26", "move_to_city"=>"", "arrive_date"=>"", "move_from_street"=>"", "move_date"=>"", "move_to_suburb"=>"", "move_from_city" =>"", "phone_mobile"=>""}, "authenticity_token"=>"U42qF1c0FJXvnC1SCNNYWzxKN3Pem7dC6L01LbTQD7E=", "commit"=>"Submit", "action"=>"create"}

NoMethodError（未定义的方法`service_options' for nil:NilClass): vendor/extensions/smartmove/app/controllers/quote_requests_controller.rb:136:in`load_regions'

供应商/辐射/供应商/插件/haml/rails/./lib/sass/plugin/rails.rb:19:in `process'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:104:in `服务'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/httpserver.rb:65:在“运行”中

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:95:in `start'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `每个'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:92:in `start'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:23:in `start'

/home/bacancy/.rvm/rubies/ruby-1.8.7-p370/lib/ruby/1.8/webrick/server.rb:82:in `start'

在“vendor/extensions/smartmove/app/controllers/quote_requests_controller.rb”第 136 行是

@regions = ServiceDescription.find_by_name('region').service_options

在我的数据库表中有 service_descriptions 和 service_options。是否与mysql或控制器有关？请指导我，我很困惑。这是我必须在本地和服务器上配置的现有应用程序

先感谢您

谢谢你尼拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:21:55.453

您收到错误是因为`ServiceDescription.find_by_name('region')`返回`nil`（这只是意味着您的`service_descriptions`表中没有带有 name的数据`'region'`）然后您正在调用`service_options`它（即`nil`）

避免这种情况的最好方法是在应用任何方法之前检查 value 是否为 nil。

```
@regions = ServiceDescription.find_by_name('region')
@service_options = @regions ? @regions.service_options : nil 
```

# sql - 无法正确 GROUP BY (SQL)

> ID：12933160
> 
> 赞同：1
> 
> 时间：2012-10-17T11:20:34.380
> 
> 标签：sql, oracle

我有一个 SQL 查询，该查询当前显示表`HOTEL`中预订了 260 美元到 350 美元之间酒店的所有人员。我正在使用 ORACLE

```
SELECT guest.guest_name "GUEST NAME", 
       Count(guest.guest_no), 
       guest.guest_no   "GUEST           NUMBER", 
       room.r_price     "ROOM PRICE" 
FROM   room, 
       guest, 
       booking 
WHERE  r_price >= 260 
       AND r_price <= 350 
       AND guest.guest_no = booking.guest_no 
GROUP  BY guest.guest_no, 
       guest.guest_name, 
       room.room_price 
ORDER  BY guest.guest_name; 
```

我认为我可以仅按 GUEST.GUEST_NAME 进行分组（因此它将所有计数放在一个名称下，而不是将客人姓名加倍）。

编辑：查询的当前结果如下所示：

```
 GUEST NAME    COUNT   GUEST_NO R_PRICE
    Jenny Freeman   2   G003    260
    Jenny Freeman   2   G003    295
    Jenny Freeman   2   G003    310
    Martin Ferguson 3   G006    260
    Martin Ferguson 3   G006    295
    Martin Ferguson 3   G006    310
    Paul Happy  3   G002    260
    Paul Happy  3   G002    295
    Paul Happy  3   G002    310
    Steve Kirkwood  3   G005    260
    Steve Kirkwood  3   G005    295
    Steve Kirkwood  3   G005    310
    Tina Duncan 2   G001    260
    Tina Duncan 2   G001    295
    Tina Duncan 2   G001    310
    Vanessa Horton  1   G007    260
    Vanessa Horton  1   G007    295
    Vanessa Horton  1   G007    310 
```

但我期待这样的事情：

```
 GUEST NAME    COUNT   GUEST_NO R_PRICE
    Jenny Freeman   6   G003    260
    Martin Ferguson 9   G006    310
    Paul Happy  9   G002    310
    Steve Kirkwood  9   G005    260
    Tina Duncan 6   G001    310
    Vanessa Horton  3   G007    260 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:29:50.247

好吧，我认为您只需要按语句更改分组就可以了，对我来说休息看起来还可以。只是不要在 Group By 声明中包含房价，如果我的问题正确，我认为这会给你带来问题......

```
 GROUP BY GUEST.GUEST_NO,
          GUEST.GUEST_NAME 
```

和

```
 MAX(R_PRICE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:24:08.443

可能是您忘记通过 ROOM_NO（或其他字段）通过 BOOKING 加入 ROOM？
我已经从 group by 中删除了 ROOM PRICE，现在查询将返回唯一的客人和他们以给定范围内的价格预订的房间数量，以及每位客人的最高价格。

```
SELECT
    GUEST.GUEST_NAME "GUEST NAME",
    GUEST.GUEST_NO "GUEST NUMBER",
    COUNT(*) "CNT",
    MAX(R.R_PRICE) "ROOM PRICE"
FROM BOOKING B
    inner join ROOM R on R.ROOM_NO = B.ROOM_NO
    inner join GUEST G on G.GUEST_NO  = B.GUEST_NO
WHERE R.R_PRICE>=260 and R.R_PRICE<=350
GROUP BY G.GUEST_NO, G.GUEST_NAME
ORDER BY G.GUEST_NAME; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-17T11:26:15.727

您可以尝试以下 sql 查询：

```
SELECT GUEST.GUEST_NAME "GUEST NAME", COUNT(GUEST.GUEST_NO), GUEST.GUEST_NO "GUEST NUMBER", ROOM.R_PRICE "ROOM PRICE"
FROM ROOM, GUEST,BOOKING
WHERE ROOM.R_PRICE>=260
AND ROOM.R_PRICE<=350
AND GUEST.GUEST_NO = BOOKING.GUEST_NO
GROUP BY GUEST.GUEST_NAME
ORDER BY GUEST.GUEST_NAME; 
```

# c# - 继承列表的自定义序列化

> ID：12933165
> 
> 赞同：1
> 
> 时间：2012-10-17T11:20:59.473
> 
> 标签：c#, vb.net, inheritance, xml-serialization

如果我有一个从通用列表继承的基类，并且派生类需要使用列表条目的自定义名称进行序列化，我该如何输入正确的序列化属性和/或引用基列表？

```
Public MustInherit Class SpecialList(Of T)
   Inherits List(Of T)
   'Other methods here
End Class

Public Class Cache
   Inherits SpecialList(Of CacheEntry)

   <XmlElementAttribute("CustomName")> _
   Public Property Entries() As List(Of CacheEntry)
      Get
         Return ???
      End Get
      Set(value As List(Of CacheEntry))
         ??? = value
      End Set
   End Property
End Class 
```

在不覆盖基类方法、编写自定义序列化或实现 IXmlSerializable 的情况下，这实际上是否可行？

我期望得到这样的输出 XML：

```
<cache>
    <customname></customname>
    <customname></customname>
</cache> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:24:35.623

添加[`XmlRootAttribute`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlrootattribute.aspx)到`CacheEntry`：

```
<XmlRootAttribute(ElementName:="customname")>
Public Class CacheEntry 
```

作为一个附带问题，如果从（通过）`Cache`继承，那么为什么你有一个也是 a 的属性？ `List``SpecialList``Entries``List`

# sql - 最少 3 列（phpmyAdmin SQL 数据库）

> ID：12933167
> 
> 赞同：0
> 
> 时间：2012-10-17T11:21:01.937
> 
> 标签：sql, phpmyadmin

我在同一张表上有 3 个整数列，我只需要在选择中选择最小值

```
 (price 1) (price 2) (price 3)

 result1:   3           4            5
 result2:   8           1            9 
```

.

我怎样才能得到每个结果的最小数量？

我与 phpMyAdmin 一起工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:28:19.653

尝试这个

```
select least('price1','price2','price3') from table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:30:59.613

使用[`least`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_least)功能

```
select result, least (price1,price2,price3) from yourtable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:29:24.437

```
SELECT LEAST(price1, price2, price3)
FROM Table 
```

# css - 具有连续背景图像但内容居中的布局？

> ID：12933168
> 
> 赞同：1
> 
> 时间：2012-10-17T11:21:08.760
> 
> 标签：css, html, layout

我正在尝试如何创建一个网站，该网站有 3 个单独的“层”（顶部导航，然后是内容，然后是页脚），每个层都有不同的背景图像，平铺到 100% 宽度......但我想要我的内容要居中（好像包含的 div 有 margin: 0 auto apply）。

到目前为止，我一直在尝试仅为背景图像创建 div，然后绝对定位我的内容 div，但允许它们自动居中。

但事实上，我正在从那里的文档“流”中取出元素，因此我的背景图像 div 最终会相互堆叠。

这真的很难解释，所以希望这个例子会有所帮助：

[http://jsfiddle.net/RB46S/](http://jsfiddle.net/RB46S/)

如您所见，我有我的蓝色 div，背景延伸到 100%，但我希望我的导航和大图像在此处居中。

我的身体是绿色的，然后是一个 hp_content div，这将是我所有内容所在的位置，居中，这里的问题是你不能应用边距或填充值（我已经应用它们来显示它们不工作） ，只有父/浏览器顶部的位置，我相信这会导致我的网站响应时出现问题。

然后我有我的红色 div，它与顶部导航（蓝色）div 相同，它有 100% 的边框，但我希望页脚的东西（推特提要、最新的博客文章和联系方式）在此处居中。

希望有人理解我想要实现的目标并知道如何正确设置这样的页面，非常感谢任何帮助！

乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:29:07.377

好的！尝试像这样构建您的 HTML：

```
<html>
<head></head>

<body class="index">

    <section class="top">
        <header class="content">
            <nav>
                <ul id="">
                    <li><a href="" id="">link 1</a></li>
                    <li><a href="" id="">link 2</a></li>  
                </ul>
            </nav>
        </header>
    </section>

    <section class="main">
        <div class="content">
            <h2>Whatever</h2>
            <div class="something">This is something else</div>
        </div>        
    </section>

    <section class="footer">
        <footer class="content">
            Footer content
        </footer>
    </section>

</body>
</html>​ 
```

然后是一些CSS，例如：

```
body, html{    
    width:100%;   
}

body {
    background: green;
}

body > section{
    width:100%;
}

/* this style will set all the section .content(s) to be 400px wide */
body > section > .content{
    display:block;
    margin:0 auto;
    width:400px;    
}

section.top {
    height: 510px;
    background: blue;
}

/* if you want to individually change widths for each section, do something like this:*/

section.top .content{
    width:100%;
}    

/* or not! */

section.main {
    height:200px;
}

section.footer {
    height: 400px;
    background: red;
} 
```

玩转：http: [//jsfiddle.net/FC2Ea/](http://jsfiddle.net/FC2Ea/)

因此，对于每个站点部分，您将拥有一个包含该部分所有内容的容器，该容器具有易于记忆的类名，例如“.content”。您可以将所有内容设置为相同的宽度，或者将每个部分的内容设置为不同的宽度，具体取决于您的目标。无论哪种方式，这些部分都将占据浏览器宽度的 100%。祝你好运！:)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:13:11.060

如果您在每个主 Div 中添加另一个 Div 并将样式用作

```
<div style="Width: 80%; float:right; margin-right: 150px;"> 
```

我想这可能在一定程度上有所帮助？

```
<div class="top_shade">  
    <div style="Width: 80%; float:right; margin-right: 150px;">      
    <header>
                <nav>
                    <ul id="">
                        <li><a href="" id=""></a></li>
                        <li><a href="" id=""></a></li>
                        <li><a href="" id=""></a></li>
                        <li><a href="" id=""></a></li>
                        <li><a href="" id=""></a></li>     
                    </ul>
                </nav>
    </header>
    </div>
    </div> 
```

# wordpress - wordpress query_posts 没有按预期工作，带减号

> ID：12933169
> 
> 赞同：0
> 
> 时间：2012-10-17T11:21:09.083
> 
> 标签：wordpress

我使用 wp_query 从某个分类中查询帖子，如下所示：

```
 $location=urldecode($_GET['location']);
        $property_type=urldecode($_GET['propertyType']);

        query_posts(array(
                    'numberposts'=>-1,
                    'post_type'=>'property',
                    'property-type'=>$property_type,
                    'location'=>$location,
                    'meta_query'=>array(
                        array('key'=>'wpcf-price','value'=>$amount[0],'compare'=>'>=','type' => 'numeric'),
                        array('key'=>'wpcf-price','value'=>$amount[1],'compare'=>'<=','type' => 'numeric')
                    ),
                    'suppress_filters'=>false
        )); 
```

除了这个字符串（它是

> תל - אביב יפו

似乎减号以某种方式混淆了搜索，我该如何解决？

有没有办法在这里使用“LIKE”语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:59:21.623

发现了问题，

我使用 $term->name 而不是 $teadm->slug 查询了位置元数据，这解决了这个问题。

# mysql - 将 VARCHAR 时间戳转换为 TIMESTAMP？

> ID：12933170
> 
> 赞同：10
> 
> 时间：2012-10-17T11:21:12.357
> 
> 标签：mysql, datetime, time, timestamp

我在 MySQL 数据库中有一个格式为“17:16:28 Sep 13, 2011 PDT”的时间戳。数据库中字段的类型是 VARCHAR。我想将此 VARCHAR 转换为 MySQL 中 TIMESTAMP 类型的字段。

我尝试了[本网站其他地方建议的一些解决方案](https://stackoverflow.com/questions/8356128/mysql-how-to-convert-varchar10-to-timestamp "mysql如何将varchar（10）转换为TIMESTAMP？")，例如使用 string_to_time 函数，但这些解决方案都从不同类型的时间戳开始。

如何将上面提到的 VARCHAR 时间戳转换为 MySQL 识别的 TIMESTAMP，以便我可以按日期对数据进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T11:31:17.443

您可以通过在 MySQL 中使用[STR_TO_DATE函数来做到这一点，试试这个：](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

```
SELECT STR_TO_DATE("17:16:28 Sep 13, 2011 PDT", '%H:%i:%s %b %d, %Y PDT'); 
```

# 编辑：

```
SELECT STR_TO_DATE(field_name, '%H:%i:%s %b %d, %Y PDT') AS new_time
FROM table_name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:36:18.050

使用带格式的 str_to_date：

```
select unix_timestamp(str_to_date("17:16:28 Sep 13, 2011 PDT","%T %b %d, %Y PDT")); 
```

如果日部分（例如：13）不表示为 01、02..等。但是 1, 2, 3 当它只有一位时，将 %d 更改为 %e

请注意，因为时区将无法识别，它只是用于格式化的字符串文字！如果您对不同的记录有不同的时区，您应该使用 convert_tz() 函数来获取正确的时间戳。

# java - 选择的 TimeUnit 是否会影响 Java 实用程序类的精度？

> ID：12933172
> 
> 赞同：4
> 
> 时间：2012-10-17T11:21:19.900
> 
> 标签：java, precision, timeunit

当我使用带有 TimeUnit.MINUTES 且值为 3 的 ScheduledExecutor 时，作业的执行延迟从 3 分钟到大约 3 分 10 秒不等。是的，我正在使用 scheduleWithFixedDelay()，但该作业应该只运行几毫秒。

我没有从 java.util.concurrent 的文档中找到任何明确的迹象表明 TimeUnit.MINUTES * 3 不等于 TimeUnit.SECONDS * 180 但它也使计时不太精确。

在我的情况下，分钟刻度的精度是完全可以接受的。我只是想知道是否有人知道这是否真的是预期的行为，或者我应该担心的事情......

即使我的问题得到了回答，如果有人可能有兴趣对其进行测试，我也会在此处包含一些示例代码：

```
public static void main(String[] args) {

    ScheduledExecutorService exec = Executors
            .newSingleThreadScheduledExecutor();

    exec.scheduleWithFixedDelay(new UpdateTask(), 0, 3, TimeUnit.MINUTES);

    Scanner sc = new Scanner(System.in);

    boolean quitted = false;
    while (!quitted) {
        String command = sc.nextLine();
        if (command.equals("q"))
            quitted = true;
    }
    exec.shutdown();

}

private static final class UpdateTask implements Runnable {

    @Override
    public void run() {
        System.out.println("bg process running (" + (new Date()) + ")");
    }
} 
```

该代码片段导致（当在我系统的后台进行各种其他操作时）：

```
bg process running (Thu Oct 18 10:49:48 EEST 2012)
bg process running (Thu Oct 18 10:52:54 EEST 2012)
bg process running (Thu Oct 18 10:55:57 EEST 2012)
bg process running (Thu Oct 18 10:58:59 EEST 2012)
bg process running (Thu Oct 18 11:02:02 EEST 2012)
bg process running (Thu Oct 18 11:05:05 EEST 2012)
bg process running (Thu Oct 18 11:08:07 EEST 2012) 
```

问题不应该是 Quoi 建议的（谢谢），因为我正在运行 Win7，所以它可能与 Win7 线程调度、优先级和我的机器上相当重的负载有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:32:18.817

[`toNanos()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html#toNanos%28long%29)方法被使用[`ScheduledThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)并且以下表达式都计算为完全相同的`180000000000`值：

```
TimeUnit.MINUTES.toNanos(3) 
```

和

```
TimeUnit.SECONDS.toNanos(180) 
```

因此，错误必须在其他地方，最有可能在旅游代码中或系统处于高负载状态。

# sql-server-2008 - 将 SQL Server 2012 Express 创建的数据库文件移动到 SQL Standard 2008

> ID：12933173
> 
> 赞同：2
> 
> 时间：2012-10-17T11:21:25.700
> 
> 标签：sql-server-2008, sql-server-2012-express

我计划在我的笔记本电脑上使用 DotNetNuke 和 SQL Server Express 2012 构建数据库驱动的网站，然后将其托管在具有 SQL Server 2008 标准版的 Web 服务器上。

SQL Server 2008 是否与 Server 2012 创建的数据库文件兼容？

因为我可以使用 SQL Server 2008 Express Edition 安装和构建网站并上传到托管服务提供商服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:30:14.037

> *SQL Server 2008 是否与 Server 2012 创建的数据库文件兼容？*

**不。**

SQL Server 数据库文件***永远不会***向后兼容 - 如果您在 SQL Server 2012 上创建数据库 - 没有办法，没有黑客，没有技巧，没有方法可以恢复或附加到早期版本（例如 2008 /2008 R2) 的 SQL Server。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:35:04.263

不，如果您考虑一下，这没有多大意义。如果反过来，“也许”可以做到（我实际上从未尝试过），因为 2012 会以某种方式知道 2008 结构，但 2008 引擎不知道 2012 数据库结构。

# java - 压缩存在于一个 FTP 位置的文件并直接复制到另一个 FTP 位置

> ID：12933180
> 
> 赞同：4
> 
> 时间：2012-10-17T11:21:51.137
> 
> 标签：java, ftp, zip

我想**创建存在于一个 ftp 位置的文件的 zip 文件，并将此 zip 文件复制到其他 ftp 位置而不在本地保存。**

我能够处理小文件。它适用于 1 mb 等小文件

但是，如果文件大小很大，例如 100 MB、200 MB、300 MB，那么它给出的错误是，

```
java.io.FileNotFoundException: STOR myfile.zip : 550 The process cannot access the 
file because it is being used by another process. 
at sun.net.ftp.FtpClient.readReply(FtpClient.java:251)
at sun.net.ftp.FtpClient.issueCommand(FtpClient.java:208)
at sun.net.ftp.FtpClient.openDataConnection(FtpClient.java:398) 
at sun.net.ftp.FtpClient.put(FtpClient.java:609) 
```

我的代码是

```
 URLConnection  urlConnection=null;
    ZipOutputStream zipOutputStream=null;
    InputStream inputStream = null;
    byte[] buf;
    int ByteRead,ByteWritten=0; 
    ***Destination where file will be zipped***
    URL url = new URL("ftp://" + ftpuser+ ":" + ftppass + "@"+ ftppass + "/" +
            fileNameToStore + ";type=i");
    urlConnection=url.openConnection();         
    OutputStream outputStream = urlConnection.getOutputStream();
    zipOutputStream = new ZipOutputStream(outputStream);
    buf = new byte[size];
    for (int i=0; i<li.size(); i++) 
    {
        try
        {
            ***Souce from where file will be read***
            URL u= new URL((String)li.get(i));  // this li has values http://xyz.com/folder
            /myPDF.pdf
            URLConnection uCon = u.openConnection();
            inputStream = uCon.getInputStream();
            zipOutputStream.putNextEntry(new ZipEntry((String)li.get(i).substring((int)li.get(i).lastIndexOf("/")+1).trim()));
            while ((ByteRead = inputStream .read(buf)) != -1)    
            {       
                zipOutputStream.write(buf, 0, ByteRead);
                ByteWritten += ByteRead;
            }
            zipOutputStream.closeEntry();
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
    if (inputStream  != null) {
        try { 
            inputStream .close(); 
        } 
        catch (Exception e) { 
            e.printStackTrace();
        }
    }
    if (zipOutputStream != null) {
        try { 
            zipOutputStream.close(); 
        } catch (Exception e){
            e.printStackTrace(); 
        }     
    } 
```

谁能让我知道如何避免此错误并处理大文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:14:15.377

这与文件大小无关；正如错误所说，您无法替换该文件，因为其他一些进程当前正在锁定它。

您经常看到大文件的原因是因为这些文件需要更长的时间来传输，因此并发访问的机会更高。

因此，唯一的解决方案是确保在您尝试传输文件时没有人使用该文件。祝你好运。

可能的其他解决方案：

1.  不要在服务器上使用 Windows。
2.  以临时名称传输文件并在完成后重命名。这样，其他进程就不会看到不完整的文件。总是一件好事。
3.  使用[rsync](http://en.wikipedia.org/wiki/Rsync)而不是再次发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:21:15.057

过去，在我们拥有网络安全之前，有允许第三方传输的 FTP 服务器。您可以使用特定于站点的命令并将文件直接发送到另一个 FTP 服务器。那些日子已经一去不回。叹。

好吧，也许不会很久了。一些 FTP 服务器支持*代理*命令。这里有一个讨论：http: [//www.math.iitb.ac.in/resources/manuals/Unix_Unleashed/Vol_1/ch27.htm](http://www.math.iitb.ac.in/resources/manuals/Unix_Unleashed/Vol_1/ch27.htm)

# ruby - 如何在 gem 中定义资产依赖关系？

> ID：12933185
> 
> 赞同：1
> 
> 时间：2012-10-17T11:22:03.087
> 
> 标签：ruby, ruby-on-rails-3, rubygems, asset-pipeline

我想知道是否有一种方法可以将 gem 依赖项“绑定”到捆绑程序组。

我认为它的`add_development_dependency`行为有点像`gem "foo", group: [:test, :development]`

因此，如果我制作了一个依赖于 jquery 的 gem（我知道这是个坏例子），我应该添加这个依赖项吗？我对此的看法：

*   **正常依赖**：只有在资产编译阶段才需要 gem，但即使不需要，也会安装正常的依赖
*   **开发依赖**：至少会指出需要什么，但不能解决实际问题
*   **无依赖性**：用户必须小心

我可以或应该做什么？我知道资产管道与 Rails 非常相关，但是有没有办法使用捆绑器组来实现 gem 依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T23:33:49.683

尽管这种需求并不常见，但您始终可以`Gemfile`自行编写 ruby​​ eval 代码。

这对它来说不是一个坏地方，因为这是`rubygems`and的“域” `Bundler`——因此您可以利用他们的 API 来验证 gem 版本（如果它们已加载）以及目标组的存在。

然后，您可以将这些目标组定义为 gem 的 API 的一部分，并为其他工程师记录下来

# android - 在 MAT 中获取“java.io.IOException”？

> ID：12933191
> 
> 赞同：2
> 
> 时间：2012-10-17T11:22:29.217
> 
> 标签：android, memory-leaks

我遇到了内存不足异常错误。我知道我的应用程序中有内存泄漏。这就是我安装 MAT 的原因。我转储了`hprof`文件。

但是在打开那个 .hprof 文件时，我遇到了类似的错误...

```
Error opening heap dump 'ind.hprof'. Check the error log for further details.
Unknown HPROF Version (JAVA PROFILE 1.0.3) (java.io.IOException)
Unknown HPROF Version (JAVA PROFILE 1.0.3)". 
```

我已经使用“ `hprof-conv fil.hprof file2.hprof`”转换了 hprof 文件。它的显示像“ `hprof-conv`”命令不存在。我尝试通过`Hprof`在 DDMS 中将操作设置为在 Eclipse 中打开。但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:53:29.367

您必须先转换它才能在 MAT 中使用它。

您可以使用位于 AndroidSDK/platform-tools/ **hprof-conv的 hprof-conv 工具**

> hprof-conv android.hprof mat.hprof

然后尝试在 MAT 中打开转换后的文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:45:50.287

我得到了解决方案。我使用“./hprof-conv file.hprof mat.hprof”而不是“hprof-conv file.hprof mat.hprof”谢谢

# javascript - 如何改变asp.net中标签的方向？

> ID：12933193
> 
> 赞同：0
> 
> 时间：2012-10-17T11:22:34.593
> 
> 标签：javascript, jquery, css

我有一个标签，可以从 DB 中读取它的数据。（数据是波斯语的日期。）。
默认情况下它显示 LTR 但我想写它 RTL。
欲了解更多信息：
它显示：01/05/1999
但我想显示它：
1399/01/08
怎么做？（使用 Javascript、jQuery 或对 CSS 更好）
注意：我没有任何问题将波斯日期转换为公历日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:25:09.467

有两种方法。以编程方式，您可以添加一个`dir`属性

```
myLabel.Attributes.Add("dir", "rtl"); 
```

或在[此处](http://msdn.microsoft.com/en-us/library/twe16yc2.aspx)`HTML`显示的本身。

```
<asp:Label dir="rtl" > 
```

根据评论，这样反转的日期不是`right to left`格式。RTL 适用于字母和数字的顺序不变，但句子本身是从右到左书写的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T11:26:06.737

创建一个 CSS 类，例如

```
.lbl_rtl
{
  direction:rtl;
} 
```

接着

```
<asp:Label CssClass="lbl_rtl" ID="Label1" runat="server" Text="Label"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:34:05.790

salam，baraye inke kolan 隐蔽 konibayad 代码 c# estefade koni ama baraye rtl kafie 方向 ro rtl koni，ham 代码 barat mizaram ke miladio tabdil koni be shamsi，ham 风格

```
.lblDirection{
  direction:rtl;
} 
```

baraye codet ke tabdil kone

```
public string SetShamsiDate(string DateTimeLoc)
        {
            DateTime DT = DateTime.Parse(DateTimeLoc.ToString());
            System.Globalization.PersianCalendar pc = new System.Globalization.PersianCalendar();
            string DaySprated = pc.GetDayOfMonth(DT).ToString();

        } 
```

哈拉米托尼玛雅萨尔罗贝吉里

你想用这种风格来指导

```
.lblDirection{
  direction:rtl;
} 
```

并将miladi日期转换为波斯日历使用此代码

```
public string SetShamsiDate(string DateTimeLoc)
        {
            DateTime DT = DateTime.Parse(DateTimeLoc.ToString());
            System.Globalization.PersianCalendar pc = new System.Globalization.PersianCalendar();
            string DaySprated = pc.GetDayOfMonth(DT).ToString();

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:29:47.300

您可能想做两件事 * 根据特定文化格式化输出 * 还要设置标签的方向

```
//format the date string according to persian culture 
var dateString = date.ToShortDateString(new CultureInfo(“fa-Ir”));
myLabel.Text = dateString;
//set the direct to right-to-left
myLabel.Attribute.Add("dir","rtl"); 
```

如果您需要在很多元素上设置 rtl，您应该更喜欢使用 css 来执行此操作。

```
.rtl {
   direction:rtl;
} 
```

将为所有具有类的元素设置方向`rtl`

# php - 是否可以在公共服务器上安装 sql？

> ID：12933194
> 
> 赞同：3
> 
> 时间：2012-10-17T11:22:42.253
> 
> 标签：php, sql, localhost

我可以访问具有读/写权限的公共服务器。唯一的问题是我无法访问服务器上的 sql。所以我的问题是，有什么方法可以远程安装 sql，或者当我在服务器中只有有限的读写权限时访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:30:01.663

您需要管理员权限或特定权限才能安装软件。

有一些云服务允许您为服务器安装所需的任何软件，并允许您公开打开它。Heroku 就是其中一项服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:24:16.447

不，这绝对不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:24:37.227

不，您不能安装具有有限读/写权限的程序。您需要权限才能在机器上安装软件包。

您可以尝试将二进制文件上传到您的主目录，但我不知道这是否可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:25:07.023

是的。如果您可以通过远程桌面连接系统并且您需要管理员权限来安装它，则可以这样做。

# iphone - 如何在不缩放 iPhone 中的子视图的情况下缩放图像？

> ID：12933196
> 
> 赞同：0
> 
> 时间：2012-10-17T11:22:46.777
> 
> 标签：iphone, ios, xcode, ios-simulator

我有 UIImageView init 的滚动视图。我在 UIImageView 上添加了一个按钮。当我缩放图像时，我的按钮也执行缩放。我怎样才能只缩放图像而不是按钮。提前感谢您的时间。

![在此处输入图像描述](../Images/7f0386ff2eaaad0d19a3c9bb57cabe67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:58:18.563

将按钮和您不希望受`UIScrollView`缩放影响的任何其他视图放置在与 相同级别的视图中`UIScrollView`。这是一个为此目的而设置的示例视图层次结构。

![在此处输入图像描述](../Images/a70a92ecc7cbfce4e0753ee8f30d08a1.png)

滚动视图和其中的任何内容都会缩放（在本例中为图像视图）。在滚动视图下方的 UIView 中（在这种情况下，具有 Default.png 图像的图像视图）在滚动视图缩放时不会缩放。

**编辑：**

要让按钮相对于图像保持在同一位置，请将其作为子视图添加到滚动视图，添加`UIScrollViewDelegate`到视图控制器标题。在您的视图控制器实现中：捕获初始`UIButton`框架`viewWillAppear`，并使用滚动视图委托`scrollViewDidZoom`方法更新按钮框架，使其保持原位。这也将允许按钮在平移时随图像移动。

这是更新的视图结构：

![在此处输入图像描述](../Images/7264892d1d3da58546e8ed6856f3ece8.png)

适用的视图控制器代码段：

```
@interface MyViewController () {
    CGRect initialButtonFrame;

    ...
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    initialButtonFrame = self.button.frame;

    ...
}

- (void)scrollViewDidZoom:(UIScrollView *)sv
{

        self.button.frame = CGRectMake((initialButtonFrame.origin.x * self.scrollView.zoomScale),
                               (initialButtonFrame.origin.y * self.scrollView.zoomScale),
                               initialButtonFrame.size.width,
                               initialButtonFrame.size.height);

...
} 
```

这里有几张图片显示了按钮相对于它在图片中的位置保持在适当的位置。请注意，当未缩放（第一张图像）和缩放时（第二张图像）时，按钮原点位于靠近消防员外套中心底部的红色区域的左上角。

![在此处输入图像描述](../Images/a014008c993f562b2649f0ff942bf611.png)

![在此处输入图像描述](../Images/16334fcd9bcfff3da93fadf4e85e12e6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:54:23.027

`imageScrollView`在superview 之后添加按钮，`imageScrollView`使按钮不是滚动视图的子视图。

# android - ViewPagerIndicator 选项卡成为横向的 ActionBarSherlock 微调器

> ID：12933197
> 
> 赞同：1
> 
> 时间：2012-10-17T11:22:48.837
> 
> 标签：android, actionbarsherlock, viewpagerindicator

我在我的项目中同时使用 ViewPagerIndicator 和 ActionBarSherlock。

当设备旋转到横向时，是否有一种简单的方法可以使 ViewPagerIndicator 选项卡成为 ActionBarSherlock 中的微调器？您知道，以便为其余内容腾出更多空间。

我是否必须手动完成所有工作来捕获事件`@onConfigurationChanged`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:36:04.940

如果这确实是您想要的，而不是使用`ViewPagerIndicator`，您应该使用操作栏中的选项卡。在不同情况下，这些将自动转换为操作栏中的下拉列表。这是一个演示绑定`ViewPager`到操作栏选项卡的示例项目：[https ://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/TabPager](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/TabPager)

但请注意，Android 中存在一个错误，该错误在 ActionBarSherlock 中重现以实现兼容性，这意味着`ViewPager`在下拉列表模式下，滑动事件不会反映在操作栏中。

如果您*真的*想使用 ViewPagerIndicator 而不是操作栏选项卡，那么您不仅要靠自己，而且还会遇到我在上一段中提到的相同错误。

就个人而言，我建议`PagerTabStrip`在所有情况下都使用选项卡（无论是 ViewPagerIndicator 还是 ViewPagerIndicator），而不是来回切换。

# xslt - XSL：读取 DIV 类属性以创建 HTML 表属性

> ID：12933204
> 
> 赞同：1
> 
> 时间：2012-10-17T11:23:10.903
> 
> 标签：xslt, xslt-1.0

我需要使用 XSLT 1.0 将基于 div 的 XHTML 布局转换为基于表格的布局。对于基本转换，我有一个样式表（如下），可以很好地创建表结构。

我无法弄清楚如何解析输入 XHTML 上的多个类属性以将特定于表的属性添加到输出中。（是的，我希望这些作为新的表属性，即使类被复制）

我的示例 XHTML 是：

```
<div class="table align-center">
    <div class="tr">
        <div class="td"><p>Table Cell 1</p></div>
        <div class="td"><p>Table Cell 2</p></div>
    </div>
</div> 
```

构建表结构OK的基本XSL如下：

```
<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="div[contains(@class, 'table')]">
    <table>
        <xsl:copy-of select="attribute::node()"/>
        <xsl:apply-templates/>
    </table>
</xsl:template>

<xsl:template match="div[contains(@class, 'tr')]">
    <tr>
        <xsl:copy-of select="attribute::node()"/>
        <xsl:apply-templates/>
    </tr>
</xsl:template>

<xsl:template match="div[contains(@class, 'td')]">
    <td>
        <xsl:copy-of select="attribute::node()"/>
        <xsl:apply-templates/>
    </td>
</xsl:template> 
```

此样式表产生：

```
<table class="table align-center">
    <tr class="tr">
        <td class="td"><p>Table Cell 1</p></td>
        <td class="td"><p>Table Cell 2</p></td>
    </tr>
</table> 
```

我想制作的是这样的：

```
<table class="table align-center" align="center">
    <tr class="tr">
        <td class="td"><p>Table Cell 1</p></td>
        <td class="td"><p>Table Cell 2</p></td>
    </tr>
</table> 
```

是否可以使用 XSLT 1.0 做到这一点？我希望解决方案足够通用，可以添加 2 个或更多类并解析它们以添加所需的表属性。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:12:39.297

**这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes"/>
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

  <xsl:template match="div[starts-with(@class, 'table ')]">
    <table>
        <xsl:call-template name="extract-class">
          <xsl:with-param name="class-list" select="normalize-space( substring-after(@class,'table '))" />
        </xsl:call-template>
        <xsl:apply-templates select="@*|node()"/>
    </table>
</xsl:template>

<xsl:template match="div[starts-with(@class, 'tr ')]">
    <tr>
        <xsl:apply-templates select="@*|node()"/>
    </tr>
</xsl:template>

<xsl:template match="div[starts-with(@class, 'td ')]">
    <td>
        <xsl:apply-templates select="@*|node()"/>
    </td>
</xsl:template>

<xsl:template name="extract-class">
  <xsl:param name="class-list" />
  <xsl:if test="contains($class-list,'-')">
    <xsl:variable name="name-value" select="substring-before(concat($class-list,' '),' ')" />
    <xsl:attribute name="{substring-before($name-value,'-')}">
      <xsl:value-of select="substring-after($name-value,'-')" />
    </xsl:attribute>
    <xsl:call-template name="extract-class">
      <xsl:with-param name="class-list" select="normalize-space(substring-after($class-list,' '))" />
    </xsl:call-template> 
  </xsl:if>  
</xsl:template>

</xsl:stylesheet> 
```

**...当应用于此文档时...**

```
<div class="table align-center border-1 cellspacing-5">
    <div class="tr">
        <div class="td"><p>Table Cell 1</p></div>
        <div class="td"><p>Table Cell 2</p></div>
    </div>
</div> 
```

**...产量...***

```
<table align="center" border="1" cellspacing="5" class="table align-center border-1 cellspacing-5">
  <tr class="tr">
    <td class="td">
      <p>Table Cell 1</p>
    </td>
    <td class="td">
      <p>Table Cell 2</p>
    </td>
  </tr>
</table> 
```

# css - ul、li 菜单上的向右浮动和悬停事件

> ID：12933209
> 
> 赞同：0
> 
> 时间：2012-10-17T11:23:23.953
> 
> 标签：css, css-float, stylesheet, right-to-left

我不知道为什么，当我将方向：“rtl”添加到主体标签并将浮动：“右”添加到我的主菜单容器时，子菜单项变得不可见，并且在悬停事件时子菜单容器出现，但是每当鼠标移动时，它们就会再次变得不可见！我检查了主菜单容器是否有浮动：左，它工作正常。

```
<li class=" menu" id="menu1" style="cursor: pointer;">
    <span class="menuText">Personal</span>
    <script>menuCount++;</script>
    <ul style="left: 762px; top: 165px; display: none;" class="subMenuContainer">
        <li linkurl="/URL?fromMenu=true" class="subMenu" id="submenu" style="cursor: pointer; width: 210px;">
            <span class="subMenuText">Profile</span>
        </li>
    </ul>
</li> 
```

此行样式="left: 762px; top: 165px;" 当 float:right 添加到菜单容器时添加到页面，这是 css 类：

```
.menuHolder {
   border:      0px;
   padding:     0px;
   vertical-align:  top;
   width:       210px !important;
   float:               right;
   margin-top:      10px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T06:32:15.830

我发现了问题，我的页面中有一个 javascript 函数，用于检查菜单容器是否具有正确的左浮动显示内容，否则没有，我只是评论了这个函数，现在它可以正常工作了。

# python - 如何翻译 OpenERP 本地化模块的内容

> ID：12933211
> 
> 赞同：2
> 
> 时间：2012-10-17T11:23:23.917
> 
> 标签：python, translation, openerp

我想为我的国家创建一个 OpenERP l10n 模块（会计科目表）。我需要把它翻译成两种语言。在`account_chart.xml`我用英语输入单词。所以，词是静态的。`name`在以下示例中，如何转换帐户的值：

```
<record id="chart01" model="account.account.template">
     <field name="code">01</field>
     <field name="parent_id" ref="chart0"/>
     <field name="type">view</field>
     <field name="user_type" ref="account.data_account_type_view"/>
     <field name="name">Expenses</field>
  </record> 
```

例如，我想翻译单词*Expenses*。我不知道如何在 *.po 文件中配置它。有人可以给我看一些例子吗？干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:50:56.400

好问题！创建 OpenERP 本地化模块的官方参考是[文档的这个页面](http://doc.openerp.com/v6.1/contribute/15_guidelines/l10n_guidelines.html)。但是它没有解释如何翻译本地化模块，因为具有讽刺意味的是，*本地化*模块很少需要*翻译*。

**一点上下文：**与通用OpenERP模块的编写方式相比，单语国家的本地化模块具有直接用该国语言定义的税名、总账科目等名称，而不是用英语定义然后翻译在 .po 文件中。事实上，本地化数据（税务模板、帐户模板等）的 OpenERP 模型自动关闭了翻译标志。原因很简单：如果这些项目的名称总是可翻译的，它们就会出现在所有 OpenERP 翻译的要翻译的术语列表中！想象一下，如果每个翻译团队都被要求用他们的语言翻译世界上所有税收和总账账户的名称，这完全没用。

比利时是幸运的多语言国家之一，但是有一种（实验性的）方法可以使您的会计科目表可翻译。

**解决方案有三个**：

1.  您的 l10n_xx 模块必须依赖于该`l10n_multilang`模块。这个小模块为您希望在会计科目表中翻译的大多数字段打开[翻译标志。](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/head:/l10n_multilang/account.py)它还`spoken_languages`在会计科目表模板模型上添加了一个特殊字段，并在安装该会计科目表时自动尝试加载相应的翻译（前提是这些语言之前已安装在同一数据库中）

2.  您必须`spoken_languages`在会计科目表的 XML 声明中添加一个字段。它的值必须是以分号分隔的语言代码列表，其中每个代码都是该`code`语言在 OpenERP 中安装时的字段值。[您可以在源](http://bazaar.launchpad.net/~openerp/openobject-server/trunk/view/4489/openerp/tools/misc.py#L601)代码中看到所有可用语言代码的列表。例如，如果您想为您的会计科目表添加法语和德语翻译，您可以使用以下值 XML 字段：
    `<field name="spoken_languages">fr_FR;de_DE</field>`

3.  最后但同样重要的是，您需要实际创建翻译文件，这与您为任何其他 OpenERP 模块所做的类似。理想情况下，您应该在主数据文件中使用英文名称，如果英语不是官方国家语言之一，这可能会很尴尬，因此使用您所在国家/地区的官方语言之一也可以。然后`l10n_xx.pot`使用 OpenERP 内部的翻译导出向导导出 PO 模板文件（在导出向导中选择您的模块，不选择语言），并将其放在`l10n_xx/i18n/`您的模块目录中。最后，您可以通过复制`l10n_xx.pot`每种所需语言（例如`fr.po`法语等）的 初始翻译，并使用 PO 编辑器（如[Poedit](http://www.poedit.net/) ）填写翻译。
    查看有关的文档[OpenERP 翻译](http://doc.openerp.com/v6.1/contribute/07_improving_translations.html)了解更多关于 PO/POT 文件格式和组织的详细信息，以及[DReispt 的相关问题](https://stackoverflow.com/questions/11556502/how-to-translate-an-openerp-module)（已经提到）。

执行上述步骤后，翻译应自动加载到您安装本地化模块的每个数据库中（但请确保在安装会计科目表**之前**安装所有相关语言）

这种技术仍然有点实验性，所以如果它看起来不像描述的那样工作，请不要犹豫报告错误。

PS：显然所有这些都应该在[OpenERP 官方本地化](http://doc.openerp.com/v6.1/contribute/15_guidelines/l10n_guidelines.html)文档中提及，所以如果有人愿意这样做，请记住[文档是开放](https://launchpad.net/openobject-doc)的，任何人都可以直接为它做出贡献；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:34:22.750

我的经验是 OpenERP 导出的 .po 文件包含数据 XML 文件中的文本。我认为，为了将`name`字段值包含在 .po 文件中，它需要是可翻译的，也就是说，`translated=True`在它的模型中（`account.account.template`在这种情况下）。

您可能还会发现[如何翻译 OpenERP 模块？](https://stackoverflow.com/q/11556502/959570)问题有用。

# objective-c - 为基于报亭的应用订阅恢复购买的问题

> ID：12933213
> 
> 赞同：1
> 
> 时间：2012-10-17T11:23:27.147
> 
> 标签：objective-c, ios5, storekit

我正在开发一个基于报亭的应用程序。我阅读了很多教程来了解基于报亭订阅的应用程序背后的逻辑。但是我仍然不清楚报亭应用程序的所有想法。

我的疑问是，如果我从我的一个设备进行基于订阅的购买，而且我还有另一台设备。如果我需要将以前购买的内容下载到我的新设备上，该怎么做？当我提到以下站点时，它说可以恢复。

[http://www.ilounge.com/index.php/articles/comments/using-newsstand-subscriptions-on-multiple-devices/](http://www.ilounge.com/index.php/articles/comments/using-newsstand-subscriptions-on-multiple-devices/)

任何人都可以简要介绍恢复以前购买时发生的程序。

我想知道的另一件事是，考虑到这种情况，如果用户尝试订阅任何其他选项（如 6 个月、1 年等），用户已经订阅了 1 个月又一次。这种情况应该如何处理？Apple 自己管理这种情况还是需要手动处理？

提前致谢

# java - Lucene updateDocument 删除文档，但计数不断增加

> ID：12933215
> 
> 赞同：0
> 
> 时间：2012-10-17T11:23:36.387
> 
> 标签：java, lucene

我正在使用`updateDocument()`方法来更新我在 lucene 索引中的文档。这是我的做法。

```
writer.updateDocument(new Term(Constants.DOC_ID_FIELD, doc.get(Constants.DOC_ID_FIELD)), doc); 
```

我用 Luke 检查了我的索引数据，发现在第二次索引运行时，Luke 告诉了`Deleted Document - not available`. 所以基本上，文档被标记为已删除，但它仍然驻留在索引中。

我不想保留这些标记为已删除的文档。我做错了吗？

另外，我的理解是，当我更新文档时，它会删除旧文档，然后添加新文档。不是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:46:07.537

从邮件列表中得到了答案。

> > `IndexWriter.updateDocument()`删除然后添加。因此，您的索引将删除文档。你为什么在乎？随着细分市场的合并，它们最终会消失。
> > 
> > 如果你真的在乎，请看`IndexWriter,forceMergeDeletes()`。另请参阅 javadoc：这通常是一项非常昂贵的操作；很少有理由这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:30:14.543

以下应从索引中删除文档：

```
public static void deleteDocumentsFromIndexUsingTerm(Term term) throws IOException, ParseException {

        System.out.println("Deleting documents with field '" + term.field() + "' with text '" + term.text() + "'");
        Directory directory = FSDirectory.getDirectory(INDEX_DIRECTORY);
        IndexReader indexReader = IndexReader.open(directory);
        indexReader.deleteDocuments(term);
        indexReader.close();

    } 
```

参考：[http ://www.avajava.com/tutorials/lessons/how-do-i-delete-a-document-from-a-lucene-index-using-the-value-of-a-field.html](http://www.avajava.com/tutorials/lessons/how-do-i-delete-a-document-from-a-lucene-index-using-the-value-of-a-field.html)

# google-chrome - 专注于停靠的开发工具的键盘快捷键。铬合金。操作系统

> ID：12933220
> 
> 赞同：2
> 
> 时间：2012-10-17T11:23:44.153
> 
> 标签：google-chrome, google-chrome-devtools, keyboard-shortcuts

尝试谷歌搜索没有成功。

如果我将 chrome 开发工具停靠在浏览器窗口的右侧并且我的焦点在网页上，是否有键盘快捷键可以将我的焦点设置到开发工具？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T16:07:45.660

`Cmd` `Alt` `i`打开 Chrome DevTools 并关注它（如果它已经打开）。

# objective-c - NSString输入转换目标c

> ID：12933221
> 
> 赞同：0
> 
> 时间：2012-10-17T11:23:44.670
> 
> 标签：objective-c, nsstring, decimal, nstextfield

您好我想知道如何让我的 NSString 将 5.11 读取为 5.11 而不是 5.1。我能做到这一点的必要条件是我从这个字段中读取英尺和英寸而不是十进制格式。此代码适用于计算

```
 CGFloat hInInches = [height floatValue];
    CGFloat hInCms = hInInches *0.393700787;
    CGFloat decimalHeight = hInInches;
    NSInteger feet = (int)decimalHeight;
    CGFloat feetToInch = feet*12;
    CGFloat fractionHeight = decimalHeight - feet;
    NSInteger inches = (int)(12.0 * fractionHeight);
    CGFloat allInInches = feetToInch + inches;
    CGFloat hInFeet = allInInches; 
```

但它不允许您以正确的方式读取从 nstextfield 获取的值。

任何帮助从 nstextfield 读取正确信息将不胜感激。感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:29:16.233

如果我理解这一点，你想要做的是让用户在一个被读取为 NSString 的输入中输入“5.11”，并且你希望它的意思是“5 英尺 11 英寸”而不是“5 英尺加 0.11英尺”（约 5 英尺 1 英尺）。

作为旁注，我建议从 UI 的角度不要这样做。话虽这么说...如果您想这样做，获取“英尺”和“英寸”值的最简单方法是直接从 NSString 获取它们，而不是等到转换它们之后到数字。浮点数不是一个精确的值，如果你试图假装浮点数是小数点两边的两个整数，你可能会遇到问题。

相反，试试这个：

```
NSString* rawString = [MyNSTextField stringValue]; // "5.11"
NSInteger feet;
NSInteger inches;

// Find the position of the decimal point

NSRange decimalPointRange = [rawString rangeOfString:@"."];

// If there is no decimal point, treat the string as an integer

if(decimalPointRange.location == NSNotFound) {
    {
    feet = [rawString integerValue];
    inches = 0;
    }

// If there is a decimal point, split the string into two strings, 
// one before and one after the decimal point

else
    {
    feet = [[rawString substringToIndex:decimalPointRange.location] integerValue];
    inches = [[rawString substringFromIndex:(decimalPointRange.location + 1)] integerValue];
    } 
```

您现在有了英尺和英寸的整数值，从那时起，您想做的其余转换就变得微不足道了：

```
NSInteger heightInInches = feet + (inches * 12);
CGFloat heightInCentimeters = (heightInInches * 2.54); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:31:46.383

您可以调用字符串的 doubleValue 方法来获取精确值。

```
NSString *text = textField.text;
double value = [text doubleValue]; 
```

# database - 这种优化总是有效吗

> ID：12933223
> 
> 赞同：2
> 
> 时间：2012-10-17T11:23:53.467
> 
> 标签：database, optimization, indexing, sql-server-2000

一位数据库专家建议重构查询：

```
SELECT * FROM MyTable 
WHERE UnIndexedDate 
BETWEEN '2012-08-01' AND '2012-09-01' 
```

至

```
SELECT * FROM MyTable
WHERE IndexedID 
BETWEEN (SELECT MIN(IndexedID) FROM MyTable WHERE UnIndexedDate BETWEEN '2012-08-01' AND  '2012-08-30')
AND (SELECT MAX(IndexedID) FROM MyTable WHERE UnIndexedDate BETWEEN '2012-08-01' AND  '2012-08-30') 
```

请注意，该表未在`UnIndexedDate`列上编制索引，而是在列上编制索引`IndexedID`。这个表有几百万条记录。

它显然确实提高了查询的速度，我怀疑这是因为子查询只会执行一次，甚至可能在某种程度上更有效，因为它们涉及索引字段。

我的问题是，这通常适用于大多数数据库还是仅适用于这里的 SQL2000 数据库。

**补充：** BTW IndexedID 是数字，唯一且严格递增。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:33:01.300

只有当未索引的日期列与索引的 id 列一起增加时，您的优化才会起作用；这是 DESIGN 的假设，而不是它运行的平台的假设。换句话说，听起来未索引日期与索引 ID 相关，因为 ID 是插入时插入的自动编号，未索引日期是插入时间。在那种狭隘的情况下，@MartinSmith 的评论将成立；如果未索引的日期列和索引的列没有相关性，您的结果可能会有所不同。

在不查看执行计划的情况下，我敢打赌您会在表上看到两次扫描以检索 ID（一个非常狭窄且很小的数据集），然后是一个索引以返回实际行。只要假定的关系成立，它就会起作用。但是，如果有人更新为日期列（并破坏了日期和 id 之间的关系），您的结果将不再准确，因为 MIN 或 MAX id 值可能不再在该范围内。

# mysql - Mysql选择不在表中的行错误

> ID：12933224
> 
> 赞同：1
> 
> 时间：2012-10-17T11:23:57.100
> 
> 标签：mysql

我有以下架构：

```
product: id , title
client: id, name
client_has_product:id, id_product, id_client, date. 
```

我想获取不属于某个客户的所有产品的列表。

我正在运行以下查询：

```
SELECT DISTINCT product.id, product.title, client.id
FROM product,client
WHERE product.id NOT IN (
SELECT id_product FROM client_has_product WHERE id_client = 1)
GROUP BY product.id 
```

问题是，如果 client_has_product 表为空，则查询不会返回任何内容，但如果 client_has_product 表中甚至只有一行，则查询有效。

有人可以解释一下我在这里缺少什么和/或为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:34:40.367

这里有问题的行是

```
WHERE product.id NOT IN (
SELECT id_product FROM client_has_produc WHERE id_client) 
```

因为这将始终返回 false 时

```
WHERE product.id NOT IN ( null ) 
```

此外，这个没有交集的表联合将返回所有行的配对。

```
FROM product,client 
```

即使有 2 个或更多客户拥有相同的产品，这也将始终生产一种产品。

```
GROUP BY product.id 
```

解决方案是`join`对所有表执行 a，然后过滤掉特定的客户端。

```
SELECT DISTINCT product.id, product.title, client.id
FROM product
LEFT JOIN client_has_produc ON product.id = client_has_produc.id_product
LEFT JOIN client ON client.id = client_has_produc.id_client
WHERE client_has_product.id_client <> 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:34:48.470

您应该替换 NOT IN WITH JOIN，以下是一个示例：

/ *NOT IN 查询*/

```
USE AdventureWorks;
GO
SELECT ProductID
FROM Production.Product
WHERE ProductID
NOT IN (
SELECT ProductID
FROM Production.WorkOrder); 
```

/*加入查询*/:-

```
SELECT p.ProductID
FROM Production.Product p
LEFT JOIN Production.WorkOrder w ON p.ProductID = w.ProductID
WHERE w.ProductID IS NULL; 
```

希望有帮助！

# java - 维护hadoop中文件创建的顺序-hdfs

> ID：12933230
> 
> 赞同：0
> 
> 时间：2012-10-17T11:24:26.033
> 
> 标签：java, hadoop, hdfs

我有一个在 Hadoop dfs 中创建文件的代码。这些文件的名称是递增的（如 1、2、3 等）。这样做是为了保持创建的文件的正确顺序。但是当我查看文件时，这些文件以随机顺序显示（可能是由于文件大小的变化）。

我还有一个代码，它作为输入目录路径并读取其下的所有文件。但我担心的是，文件的读取顺序与写入的顺序不同（读取顺序与 UI 上看到的顺序相同）。

我应该如何实现这一目标？在编写文件本身以保留顺序时我可以做些什么，还是在阅读时需要处理它？

**org.apache.hadoop.fs.FileStatus.getModificationTime()**给出了表示上次修改文件时间的长值。这可用于对文件进行排序。但似乎不是一个可行的解决方案，因为我可能有任意数量的文件。

我们是否有任何 API 类可以为我做到这一点，甚至可以保留订单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:54:54.267

您可以像这样从目录中订购文件：

```
File file = new File( path );
File[] list = file.listFiles();   

    Arrays.sort(list, new Comparator<File>(){
        public int compare(File f1, File f2)
        {
            return Long.valueOf(f1.lastModified()).compareTo(f2.lastModified());
        } }); 
```

现在列表包含所有那些被 lastModified 缩短的文件。也许您可能需要以不同的方式订购它们，例如我们按名称或注册。需要 1,2,3 段的表达式。数字。

至于管理文件的写入方式，打败了我。除了创建一个可能在您的应用程序中造成瓶颈的同步方法之外，我想不出任何办法。

我希望这有帮助！

# visual-studio - Visual Studio 自定义工具构建事件

> ID：12933233
> 
> 赞同：1
> 
> 时间：2012-10-17T11:24:49.347
> 
> 标签：visual-studio, visual-studio-2012, customtool

每次在 Visual Studio 中运行自定义工具时，是否可以构建一个项目（而不是解决方案）？

# php - 当 csv 文件中的字段为空时打印“文本”

> ID：12933237
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:24:59.583
> 
> 标签：php, arrays, csv

观察代码

```
if($line[$x]==1 and !empty($cat_ids[$x]))
    array_push($cat1,$cat_ids[$x]);
    elseif($line[$x]==1 and $cat_ids[$x]="")
    array_push($cat1,"id not allocated"); 
```

`$line[$x]`包含 1 并`$cat_ids[$x]`包含 id。

当 id 为空时，我想将“未分配的 id”推送到特定的数组中`$line[$x]`。请帮我...

我编写的代码是跳过空字段而不是打印“未分配的 ID”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:27:02.873

尝试改变

```
elseif($line[$x]==1 and $cat_ids[$x]="") 
```

到

```
elseif($line[$x]==1 and $cat_ids[$x]=="") 
```

as`$cat_ids[$x]=""`语句会将值 null 分配给`$cat_ids[$x]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:32:17.967

首先存储决策的结果，然后根据该结果分配新值：

```
$filled = ($line[$x] == 1 and !empty($cat_ids[$x]));
$cat1[] = $filled ? $cat_ids[$x] : "id not allocated"; 
```

由于它存储到变量中，因此您也可以轻松地对其进行调试：

```
$filled = ($line[$x] == 1 and !empty($cat_ids[$x]));
var_dump($filled);
$cat1[] = $filled ? $cat_ids[$x] : "id not allocated"; 
```

因此，您可以更好地检查代码是否确实符合您的预期。

# c++ - 指向成员基函数的模板指针

> ID：12933241
> 
> 赞同：1
> 
> 时间：2012-10-17T11:25:04.433
> 
> 标签：c++, templates

我正在尝试创建一个模板函数，它接受指向成员函数（非虚拟）的指针。我正在使用 MSVC2010

以下代码在有问题的行被注释掉时有效。编译器报告的错误非常解释，但我不知道不知何故仍然令人惊讶。你会如何建议解决这个问题。

谢谢！

```
class Foo{ 
public:
    virtual void doFoo() {
        std::cout << "In foo" << std::endl;
    }
};

class Bar : public Foo{ 
public:
    void doBar() {
        std::cout << "In bar" << std::endl;
    }

};

template<class A>
void caller(A &a, void (A::*func)()) {
    (a.*func)();
}

int _tmain(int argc, _TCHAR* argv[])
{
    Bar bar;
    bar.doFoo();
    caller(bar, &Bar::doBar);
    caller(bar, &Bar::doFoo); // this line causes a compiler error
} 
```

这会因以下错误而失败。

```
error C2782: 'void caller(A &,void (__thiscall A::* )(void))' : template parameter 'A' is ambiguous
1>          c:\test\test\test.cpp(23) : see declaration of 'caller'
1>          could be 'Foo'
1>          or       'Bar' 
```

我可以通过将调用者更改为来解决该错误

```
template<class A, class B>
void caller(A &a, void (B::*func)()) {
    (a.*func)();
} 
```

但这在考虑重载决议时会引入其他微妙的决议错误。理想情况下，我只想考虑实际上可以应用于 A 的函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:31:40.297

您可以使用 SFINAE 来限制第二个模板的适用性

```
template<class A, class B>
void caller(A &a, void (B::*func)(), typename std::enable_if<std::is_base_of<B, A>::value, void>::type* =0) 
```

这样，重载将不影响参数，否则会导致编译错误。供参考，请参阅[`std::is_base_of`](http://msdn.microsoft.com/en-us/library/bb982243.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:07:00.420

据我所知，您必须使用不需要的版本。

```
template<class A, class B>
void caller(A &a, void (B::*func)()) {
    (a.*func)();
} 
```

因为该函数未在该对象上定义，因此类型解析不能干净地应用。

但我一般不建议使用这种类型的回调示意图。要么使用良好的旧 C 风格回调；带有`void*`数据指针或类似[sigc++](http://libsigc.sourceforge.net/)的函数。

sigc++ 的巨大优势是您拥有可以绑定到几乎任何东西、函数、方法或函数以及所有类型安全的通用信号。

（请原谅，这不是对您问题的直接回答，而是关于如何更进一步的提示。）

# android - 以编程方式将背景图像添加到 android seekbar

> ID：12933245
> 
> 赞同：0
> 
> 时间：2012-10-17T11:25:19.330
> 
> 标签：android

我想通过 java 代码而不是通过 xml 将背景图像添加到我的搜索栏。我希望我的搜索栏看起来像下图。

[http://imageshack.us/a/img32/3834/sliderbar.png](http://imageshack.us/a/img32/3834/sliderbar.png)

我的搜索栏也是通过 java 代码创建的，但不使用任何 xml 文件。

我不想引用任何 xml 文件来做到这一点，一切都应该通过代码来完成。！

有人可以帮助做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:40:27.880

尝试使用`setThumb`，`setProgressDrawable`或者`setBackground`你的方法`SeekBar`！如果你真的想要这样一个很酷的自定义搜索栏[，](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)我建议你尝试引用 xml 文件。它会让你的生活更轻松。

我写了一个简单的例子，它会给你一个起点。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);//the layout that has your seekbar

        SeekBar mSeekBar = (SeekBar)findViewById(R.id.seek_bar);//your seek bar

        mSeekBar.setThumb(R.drawable.thumb_image);//your thumb image
        mSeekBar.setProgressDrawable(R.drawable.progress_image);//your progress image
        mSeekBar.setBackground(R.drawable.background_image);//your background image
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T06:53:23.900

试试这个搜索栏剪辑

```
Drawable thumb = ContextCompat.getDrawable(getActivity(), R.mipmap.cir_32);
mSeekBar.setThumb(thumb); 
```

# ios - 在后台运行Phonegap，在前台运行本机

> ID：12933248
> 
> 赞同：1
> 
> 时间：2012-10-17T11:25:44.840
> 
> 标签：ios, cordova, plugins

如何在后台运行 Phonegap 以允许 iOS 插件在前台工作？

我的插件用于增强现实。

谢谢！

# html - 仅显示具有背景色的 Div

> ID：12933257
> 
> 赞同：2
> 
> 时间：2012-10-17T11:26:21.063
> 
> 标签：html, css

以下是我的 HTML 代码，

```
 <body>
 <div id="wrapper">
 <div id="left_border"></div>
 <div id="main_content">
 some text </br>
 some text </br>
 some text </br>
 some text </br>
 </div>
 <div id="right_border"></div>
 </div>
 </body> 
```

这是我的CSS，

```
 #wrapper {
  margin: 25px 20px;
  height: auto;
  }

  #left_border, #right_border {
  display: block;
  width: 20px;
  background-color: #ff0000;
  }

  #left_border {
  float: left;
  }

  #right_border {
  float: right;
  } 
```

我的问题是，我无法展示我的边框 div。我需要显示两个边界，直到我的 main_content div 的长度。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:30:50.813

最好使用`border`css属性。例如：

```
div#main_content {
    border-left: 20px solid #ff0000;
    border-right: 20px solid #ff0000;
} 
```

并且没有假`div`的边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:33:44.167

像这样的东西？[http://jsfiddle.net/6ZGXd/3/](http://jsfiddle.net/6ZGXd/3/)边框将与内容 div 的高度相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:32:26.217

如果您确实要创建边框，psur 是正确的，但如果您的目的是向左和向右创建内容，则将两个边框移动到 main_content 内并将它们的高度设置为 100%。仍然存在一些边际问题，但这会让你上路……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:33:08.467

为了显示您的背景，您需要在 div 中添加一些内容。添加   在左右边框打开和关闭 div 之间

hth

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:31:45.690

设置高度`#left_border, #right_border`

```
#left_border, #right_border {
display: block;
width: 20px;
height: 80px;
background-color: red;
} 
```

这段代码 #main_content{ width: 200px; 向左飘浮; }

[演示链接：](http://jsfiddle.net/RB46S/1/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-17T11:31:03.600

实际上，您做了一些错误的标记，您应该像这样编写标记：-

**HTML**

```
<div id="wrapper">
     <div id="main_content">
     some text </br>
     some text </br>
     some text </br>
     some text </br> some text </br> some text </br> some text </br> some text </br> some text </br>    some text </br>
     </div>
     </div> 
```

**CSS**

```
#wrapper {
  margin: 25px 20px;
  }

#main_content {
  border-right:2px solid red;
  border-left:2px solid red;
} 
```

[http://tinkerbin.com/IwKyVILk](http://tinkerbin.com/IwKyVILk)

# python - 将 Matplotlib 错误栏放置在栏的中心

> ID：12933259
> 
> 赞同：3
> 
> 时间：2012-10-17T11:26:54.887
> 
> 标签：python, matplotlib

我在 Matplotlib 中生成带有误差线的堆积条形图。不幸的是，一些层级相对较小，数据多样，因此多个层级的误差线可能重叠，使它们难以阅读或无法阅读。

例子：

![示例截图](../Images/fd3732691a6e65fd56b3a38d5dbd812b.png)

有没有办法为每个误差条设置位置（即沿着 x 轴移动它），所以重叠线显示在旁边而不是彼此之上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T07:42:58.447

感谢 tcaswell 的评论，我想通了：诀窍是不在栏中包含错误栏（通过 yerr kword），而是分别绘制栏和错误栏。这样您就可以指定误差线的 x 和 y 位置。

它还有助于清晰地仅使用 向上绘制误差线`yerr= numpy.vstack([[0]*len(std), std])`。

[从这里](https://stackoverflow.com/a/12899825/1413513)合并到绘图函数中，我的代码如下所示：

```
for j in range(set_count):
    tmp_accum = numpy.zeros(len(props[0]))
    for k in range(len(props)):
        ax1.bar(ind + j*b_width, props[k][set_label==j], width=b_width, color=color_sets[j][k], bottom=tmp_accum[set_label==j],label=labels[k])
        ax1.errorbar(ind + j*b_width +(1+k)*0.01, props[k][set_label==j]+tmp_accum[set_label==j],yerr= numpy.vstack([[0]*1, std_devs[k][j]]), ecolor="black",elinewidth =3)
        tmp_accum += props[k] 
```

# java - 在 mongodb 中执行 isMaster 命令时出现异常

> ID：12933273
> 
> 赞同：2
> 
> 时间：2012-10-17T11:27:45.977
> 
> 标签：java, mongodb

我正在尝试从部署在 JBOSS 中的应用程序写入 mongodb，这就是我得到的，我需要在 mongodb 中做些什么吗？这似乎是论坛讨论的并发问题。

```
14:00:07,083 WARNING [com.mongodb.tcp] (Camel (camel-2) thread #3 - JmsConsumer[barTopic]) Exception executing isMaster command on /127.0.0.1:27017: java.lang.NullPointerException
        at com.mongodb.DBPort._open(DBPort.java:203) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBPort.go(DBPort.java:107) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBPort.go(DBPort.java:88) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBPort.findOne(DBPort.java:143) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBPort.runCommand(DBPort.java:148) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBTCPConnector.initDirectConnection(DBTCPConnector.java:539) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.Mongo.getMaxBsonObjectSize(Mongo.java:600) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:233) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBApiLayer$MyCollection.insert(DBApiLayer.java:205) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBCollection.insert(DBCollection.java:57) [mongo-java-driver-2.9.1.jar:]
        at com.mongodb.DBCollection.insert(DBCollection.java:100) [mongo-java-driver-2.9.1.jar:]
        at com.magick.magicktrader.BarServiceBean.addBarToMongoDB(BarServiceBean.java:196) [magicktrader.jar:0.6.0-SNAPSHOT]
        at com.magick.magicktrader.BarServiceBean.getBar(BarServiceBean.java:40) [magicktrader.jar:0.6.0-SNAPSHOT]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.6.0_10]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [rt.jar:1.6.0_10]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [rt.jar:1.6.0_10]
        at java.lang.reflect.Method.invoke(Method.java:597) [rt.jar:1.6.0_10] 
```

**方法调用**

```
 MongoURI uri = null;
        uri = new MongoURI("mongodb://localhost:27017");

        try{
    mongo = new Mongo(uri);
    } catch (NumberFormatException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (UnknownHostException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}       
    //prop.getProperty("database")
    db = mongo.getDB("charts");
    db.requestStart();
    //prop.getProperty("collection")
    dbCollection = db.getCollection("bars");

    /**
     * Bar Structure - attributes
     * 
     * symbol,low,high
     * open,close,time
     * volume;
     **/
    for (Bar bar : barList) {
        document = new BasicDBObject();
        document.put("symbol", bar.getSymbol());
        document.put("low", bar.getLow());
        document.put("high", bar.getHigh());
        document.put("open", bar.getOpen());
        document.put("close", bar.getClose());
        document.put("time", bar.getTime());
        document.put("volume", bar.getVolume());
        //dbCollection.insert(document);
        //prop.getProperty("collection").trim()
        dbCollection.getCollection("bars");
        dbCollection.save(document, WriteConcern.NORMAL);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T11:25:20.607

1>这可能是不同连接的问题，我遇到了同样的问题，因为“我多次调用同一个connectionClass”。我通过将连接类设为单例来修复它。我使用 MongoClient 类进行连接。所以我会用文字解释，第一次获取mongoDb的连接，第二次使用相同的连接。我也是 Mongos 的新手，希望这有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T08:39:35.290

# 1 最好的检查是

*   检查 mongodb 是否正在运行
*   检查用户名和密码是否正确
*   检查您尝试用于访问数据库的用户名是否具有正确的所有者或

    必须像这样添加

    ```
    db.addUser("test","test") ------- this will add the default username and password in which the app uses.
    check if the user is created properly db.system.users.find()   ----- you should see you new user in the returned list
    log out .... db.runCommand({"logout":1})
    use databasename
    db.auth("test","test") //do the authorizxation 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T10:10:44.597

我有同样的问题，我解决了编辑配置文件：/etc/mongod.conf 并进行此更改：

```
#port = 27017 -> port = 27017
bind_ip = 127.0.0.1 -> #bind_ip = 127.0.0.1 
```

有了这个，所有机器都可以连接到你的 mongoDB。

记得重启mongoDB（“sudo service mongod restart”）

在此之后，我更新了最新版本的驱动程序（2.12.0），这就是工作。

# c++ - 罗德里格斯到欧拉角，反之亦然

> ID：12933284
> 
> 赞同：17
> 
> 时间：2012-10-17T11:28:41.360
> 
> 标签：c++, opencv, rotation

我正在使用solvePnP，我得到了一个翻译向量。现在我需要将一些欧拉角与solvePnP的结果进行比较。我想/需要将欧拉角转换为“罗德里格斯”；

来自solvePnP的平移向量是否等于欧拉角。翻译矩阵是唯一与罗德里格斯有关的东西吗？还是有与 3 个欧拉角完全不同的特殊罗德里格斯角？两者之间的数学如何？有没有我找不到的 OpenCV 函数？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-19T15:07:27.070

首先，忘记**平移**向量，因为它与**旋转**无关：平移移动物体，旋转改变它们的方向。

Rodrigues 参数也称为[轴角旋转](http://euclideanspace.com/maths/geometry/rotations/axisAngle/index.htm)。它们由 4 个数字组成`[theta, x, y, z]`，这意味着您必须围绕单位向量描述的轴旋转一个角度“theta” `v=[x, y, z]`。查看[cv::Rodrigues](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#rodrigues)函数参考，似乎 OpenCV 使用 Rodrigues 符号的“紧凑”表示作为具有 3 个元素的向量`rod2=[a, b, c]`，其中：

*   旋转的角度`theta`是输入向量的模块`theta = sqrt(a^2 + b^2 + c^2)`
*   旋转轴`v`是归一化的输入向量：`v = rod2/theta = [a/theta, b/theta, c/theta]`

因此，**solvePnP 中的 Rodrigues 向量与欧拉角符号甚至没有一点关系，[欧拉角](http://euclideanspace.com/maths/geometry/rotations/euler/index.htm)**符号表示围绕 X、Y 和 Z 轴组合的三个连续旋转。

如何比较两个旋转？这是一个很好的问题。Euler 和 Rodrigues 表示都有奇点和其他问题。例如，如果您比较两个欧拉燕鸥或两个罗德里格斯参数，它们可能看起来完全不同，但实际上表示几乎相同的旋转。如果您只需要检查两个旋转是否相同（或近似），您可以按照下一个方法：

1.  将两个旋转都转换为矩阵表示法（四元数也是有效的）
    *   OpenCV Rodrigues 向量可以使用[cv::Rodrigues](https://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#rodrigues)函数转换为矩阵
    *   对于将欧拉转换为矩阵，我建议您查看euclideanspace.com的[转换部分](http://euclideanspace.com/maths/geometry/rotations/conversions/index.htm)
2.  从另一个旋转中“减去”一个旋转，即将一个旋转与另一个旋转连接起来
    *   使用旋转矩阵，将一个乘以另一个的转置（逆旋转）。空旋转是单位矩阵。
    *   使用四元数，将一个乘以另一个的复共轭（否定最后三个分量）。
3.  检查结果是否接近零旋转：
    *   空旋转矩阵是恒等式。
    *   空四元数在第一个分量中有 1 或 -1

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-08T18:29:26.340

添加到@dunadar 的出色答案：

`Rodrigues`转换`rvec`为旋转矩阵 R（反之亦然）。您可以直接使用 R，就像使用由欧拉角构造的旋转矩阵一样，通过将点积与您正在旋转的（平移）向量进行运算：`v_rotate = R*v`

您*可以*将 Rodrigues 旋转矩阵转换为欧拉角，但有多种解决方案。原因是欧拉旋转的顺序（俯仰、偏航、滚动）很重要，因此有不止一种方法可以表示罗德里格斯旋转。见： http: [//www.staff.city.ac.uk/~sbbh653/publications/euler.pdf](http://www.staff.city.ac.uk/~sbbh653/publications/euler.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-04T08:43:32.880

添加更具体的答案以补充此处的其他答案。如果你想要一个方向向量而不是欧拉角，这个过程确实可以通过矩阵乘法来简化，这里有一个快速的解决方案：

```
// The output is a direction vector in OpenGL coordinate system:
// +X is Right on the screen, +Y is Up, +Z is INTO the screen
static Vector3 ToDirectionVectorGL(const Mat& rodrigues1x3) noexcept
{
    Mat rotation3x3;
    cv::Rodrigues(rodrigues1x3, rotation3x3);

    // direction OUT of the screen in CV coordinate system, because we care
    // about objects facing towards us - you can change this to anything
    // OpenCV coordsys: +X is Right on the screen, +Y is Down on the screen,
    //                  +Z is INTO the screen
    Vec3d axis{ 0, 0, -1 }; 
    Mat direction = rotation3x3 * Mat(axis, false);

    // normalize to a unit vector
    double dirX = direction.at<double>(0);
    double dirY = direction.at<double>(1);
    double dirZ = direction.at<double>(2);
    double len = sqrt(dirX*dirX + dirY*dirY + dirZ*dirZ);
    dirX /= len;
    dirY /= len;
    dirZ /= len;
    // Convert from OpenCV to OpenGL 3D coordinate system
    return { float(dirX), float(-dirY), float(dirZ) };
} 
```

如果您将其用于头部姿势估计，请确保在 {0,0,0} 周围正确形成 Rodrigues 1x3 旋转，否则您可能会得到奇怪的结果。

# javascript - 使用正则表达式验证日期

> ID：12933290
> 
> 赞同：1
> 
> 时间：2012-10-17T11:29:11.360
> 
> 标签：javascript, regex, validation

我需要一个正则表达式来匹配以下内容 -

```
mm/dd/yyyy 
```

以下日期条目应通过验证：

*   2012 年 5 月 3 日
*   2012 年 5 月 3 日
*   2012 年 5 月 3 日
*   2012 年 5 月 3 日

另外，在验证上述之后`regex`，将上述日期转换`string`为`Date`对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:33:36.187

您应该使用 split、parseInt 和[Date 构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)一次性完成检查和解析：

```
function toDate(s) {
  var t = s.split('/');
  try {
     if (t.length!=3) return null;
     var d = parseInt(t[1],10);
     var m = parseInt(t[0],10);
     var y = parseInt(t[2],10);
     if (d>0 && d<32 && m>0 && m<13) return new Date(y, m-1, d);
  } catch (e){}
}

var date = toDate(somestring);
if (date) // ok
else // not ok 
```

[演示：](http://jsfiddle.net/wjCgL/)

```
01/22/2012 ==> Sun Jan 22 2012 00:00:00 GMT+0100 (CET)
07/5/1972 ==> Wed Jul 05 1972 00:00:00 GMT+0100 (CEST)
999/99/1972 ==> invalid 
```

作为本页的其他答案，这不会在 2 月 31 日窒息。这就是为什么出于所有严肃的目的，您应该改用像[Datejs](http://www.datejs.com/)这样的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:32:27.823

这个应该这样做：

```
((?:[0]?[1-9]|[1][012])[-:\\/.](?:(?:[0-2]?\\d{1})|(?:[3][01]{1}))[-:\\/.](?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3})))(?![\\d]) 
```

*（取自 txt2re.com）*

您还应该看看[这个链接](https://stackoverflow.com/questions/476105/how-can-i-convert-string-to-datetime-with-format-specification-in-javascript)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:36:39.650

```
"/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/" 
```

链接： [Javascript 日期正则表达式 DD/MM/YYYY](https://stackoverflow.com/questions/5465375/javascript-date-regex-dd-mm-yyyy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:41:43.167

```
var dateStr = '01/01/1901',
    dateObj = null,
    dateReg = /^(?:0[1-9]|1[012]|[1-9])\/(?:[012][1-9]|3[01]|[1-9])\/(?:19|20)\d\d$/;
    //             01 to 12 or 1 to 9   /    01 to 31  or  1 to 9   /  1900 to 2099

if( dateStr.match( dateReg ) ){
    dateObj = new Date( dateStr ); // this will be in the local timezone
} 
```

# c# - 未能限制滑块值的小数点 + 在 ToggleButtons 上设置 IsChecked 一次一个

> ID：12933291
> 
> 赞同：3
> 
> 时间：2012-10-17T11:29:35.847
> 
> 标签：c#, .net, wpf, slider, togglebutton

好吧，伙计们，我很抱歉这个奇怪的标题，但找不到更好的标题。好吧，我正在开发一个 WPF 应用程序。我正在研究滑块和切换按钮。这是一个愚蠢的情况。让我向您展示我的代码：

**XAML：**

```
<ToggleButton Name="OneSixBit" Content="16 Bit" />
<ToggleButton Name="ThreeTwoBit" Content="32 Bit" />
<ToggleButton Name="TwentyBit" Content="20 Bit" />
<ToggleButton Name="TwentyFourBit" Content="24 Bit" />

<Label Name="BitDelay" Content="Bit Delay" />
<Slider Minimum="0.0" Maximum="255.0" TickFrequency="1.0" Name="bitdelayslider" />
<TextBox Name="BitDelayValue" IsReadOnly="True" Text="{Binding ElementName=bitdelayslider,Path=Value}" /> 
```

我这里有两个问题：

1.  在 Togglebuttons 中，我想将切换状态设置为`checked=true`一次一个按钮。即，如果 Btn1 的切换状态是`checked=true`并且我单击任何其他切换按钮，它不应该检查，除非我`checked=false`在 btn1 上进行。

2.  我有一个滑块，它的最大值从 0.0 到 255.0，它应该以 1 的频率移动。每当我移动滑块时，我都能在文本框中显示该值，但它显示的小数点超过 1 个。即当我从 0.0 移动时，显示的值为 2.3456.... 等。如何确保只看到一个小数点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T11:36:05.683

1.  使用`RadioButton`而不是`ToggleButton`，它们具有您想要的行为（一次检查一个）开箱即用。如果需要，您可以[将它们设置为按钮](https://stackoverflow.com/questions/2362641/how-to-get-a-group-of-toggle-buttons-to-act-like-radio-buttons-in-wpf)。

2.  `StringFormat`在您的`Binding`:中添加一个`{Binding ElementName=bitdelayslider, Path=Value, StringFormat=0.0}`。

# php - 如何根据参数属性从xml中获取特定值？

> ID：12933294
> 
> 赞同：0
> 
> 时间：2012-10-17T11:29:48.383
> 
> 标签：php, simplexml

XML 文件包含：

```
<list1>
  <dzial>
    <ofert>
      <param name="surname" type="text">Something</param>
      <param name="number" type="text">4234-343-3</param>
    </ofert>
  </dzial>
</list1> 
```

如果我想获得“姓氏”参数，那么我可以使用以下代码：

```
$xml = simplexml_load_file('test.xml');

if ($xml->list1[0]->dzial[0]->ofert[0]->param[0]=="Something") 
  echo "works!"; 
```

但我想以不同的方式做到这一点。我想根据其属性选择参数`name="surname"`。我怎样才能做到这一点？

```
echo $xml->list1[0]->dzial[0]->ofert[0]->param[???]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:39:47.017

您可以使用 xpath，如此答案中所述： [SimpleXML：选择具有特定属性值的元素](https://stackoverflow.com/questions/992450/simplexml-selecting-elements-which-have-a-certain-attribute-value)

```
$simplexml->xpath('/object/data[@attribute="value"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:34:11.263

使用[XPath](http://php.net/manual/en/simplexmlelement.xpath.php)：

```
$xml = simplexml_load_file('test.xml');
$nodes = $xml->xpath('//param[@name="surname"]');

if (!empty($nodes)) {
    echo $nodes[0];
} 
```

# r - S4 类定义是如何在包中完成的，它是如何正确记录的？

> ID：12933301
> 
> 赞同：1
> 
> 时间：2012-10-17T11:30:13.930
> 
> 标签：r, documentation, s4

一旦我定义了一个类，我就想知道在包中的哪个位置。应该只创建一个`classDefintions.R`包含我的 S4 类定义的文件并将其放入 R 文件夹吗？如果是这样，我怎样才能正确记录它？周围有`.rd`S4 类的文件模板吗？

[我在 Roxygen2 上](https://stackoverflow.com/questions/7368262/how-to-properly-document-s4-class-slots-using-roxygen2)找到了这篇文章，但我可能落后了几步。它基本上是如何完成和定位的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:53:08.307

就像其他 R 对象一样，S4 类和方法定义使用存储在包源的 man 子目录中的 *.Rd 文件进行记录。

除了阅读[R-exts 的相关部分](http://cran.r-project.org/doc/manuals/R-exts.html#Documenting-S4-classes-and-methods)之外，我建议下载并查看您熟悉的编写良好的基于​​ S4 的软件包的源代码。（对我来说可能是**sp**、**lme4**或**Matrix**。）

最后，**methods**包包括两个漂亮的实用函数，`promptClass()`它们`promptMethods()`将为当前 R 会话中定义的任何 S4 类或方法填写一个骨架 *.Rd 文件。

作为使用**sp**包中定义的 R 对象的示例，您可以这样做：

```
library(sp)     ## for some example S4 classes and methods

promptClass("SpatialPolygons")
# A shell of class documentation has been written to the file
# ‘SpatialPolygons-class.Rd’.

promptMethods("bbox")
# A shell of methods documentation has been written to the file
# ‘bbox-methods.Rd’. 
```

然后查看这些文件`SpatialPolygons-class.Rd`，`bbox-methods.Rd`看看这些功能将为您节省多少工作量！

* * *

**编辑：** 快速重读您的问题后，我看到您还询问如何包含方法和类本身。我的建议基本相同：阅读手册并“使用源代码”（确保还查看文件中的指令`exportClasses()`和`exportMethods()`指令如何`NAMESPACE`用于导出 S4 对象。）

# android - 带有 NDK 的 Tesseract 不能与 Cygwin 一起使用

> ID：12933304
> 
> 赞同：1
> 
> 时间：2012-10-17T11:30:27.423
> 
> 标签：android, android-ndk, cygwin

我正在使用下面的链接在 windows xp 上运行代码。我已经下载了 cygwin 和 android ndk 8 我被困在下面链接的第 6 步。

[android图像到文本的OCR](http://kurup87.blogspot.in/2012/03/android-ocr-tutorial-image-to-text.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:50:22.397

*   NDK 的最新版本不需要 Cygwin
*   您还应该避免以各种可能的方式将 Cygwin 用于开发目的
*   该指南不仅关于Cygwin而且关于JDK版本都是错误的，Android SDK需要Oracle JDK 1.6，不支持或不需要JDK 1.7

您应该阅读有关 Android 工具的要求并找到更好的指南。

# parsing - Haskell 解析为自定义数据类型

> ID：12933305
> 
> 赞同：2
> 
> 时间：2012-10-17T11:30:28.717
> 
> 标签：parsing, haskell, instance, where

我对 Haskell 比较陌生。这是我想做的：

我想将字符串解析为棋子。我的代码非常简单，所以我希望它会自我解释：

```
data ChessPiece = King | ... etc
data DraughtPiece = DKing | ... etc
data Player = Black | White deriving (Show, Eq)
data Piece a = Piece (a, Player) 
```

所以一个棋子可以是任何 2 场比赛，或者 2 名玩家。我想要一个字符串“k”或“K”分别解析为一个黑色或白色的国王，所以我做了这个：

```
class Parse a where
  parse :: String -> a

instance Parse ChessPiece where
  parse a = case a of 
    "k" -> King 
```

到目前为止一切都很好..我可以打电话`> parse "k" :: ChessPiece`。这行得通！

```
instance Parse a => Parse (Piece a) where
   parse x | isLowercase x = Piece (parse             x, White)
           | otherwise     = Piece (parse $ lowercase x, Black) 
```

这必须适用于任何一块。大写和小写规则适用于 DraughtPiece 和 ChessPiece。我如何告诉 Haskell 将 x 解析为正确的类型 (a)。省略演员表`parse x`会给我带来非详尽的模式错误，将其更改为`parse x :: a`让我“无法从上下文中使用“解析”（解析 a）中推断出（解析 a1）”

我如何告诉 Haskell to `parse "K" :: Piece ChessPiece`to `(parse "k" :: ChessPiece, Black)`to `(King, Black)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:10:38.637

> 我如何告诉 Haskell 将 x 解析为正确的类型 (a)。

如果你指的是

```
instance Parse a => Parse (Piece a) where
   parse x | isLowercase x = Piece (parse             x, White)
           | otherwise     = Piece (parse $ lowercase x, Black) 
```

你不需要。递归调用的类型`parse`由上下文确定，它是参数类型`a`。

但是当你想解析任何东西时，必须有足够的上下文来告诉 GHC 结果应该是什么类型。在典型的程序中，这通常可以从上下文中确定。如果您有`let p = parse input`然后`p`在需要具有某种类型的上下文中使用`p`，则告诉编译器应解析哪种类型。但是在 ghci 提示符下，没有这样的上下文，你必须明确告诉 ghci 你想要什么类型

```
ghci> parse "K" :: Piece ChessPiece 
```

> 省略'parse x'的演员表会给我非详尽的模式错误，

如果您尝试`parse`使用未明确处理的输入字符串进行调用，您将收到非详尽的模式错误。单独的编译会给你一个警告（如果你要求警告），例如

```
Pieces.hs:14:13: Warning:
    Pattern match(es) are non-exhaustive
    In a case alternative:
        Patterns not matched:
            []
            (GHC.Types.C# #x) : _ with #x `notElem` ['k']
            (GHC.Types.C# 'k') : (_ : _) 
```

这意味着在 中`instance Parse Piece`，您只`parse`为单个输入字符串定义`"k"`。`error`您当然应该为其他输入字符串提供定义（包括调用无效字符串的显式包罗万象的分支）。

> 将其更改为“解析 x :: a”给了我“无法从上下文中使用“解析”推断出（解析 a1）（解析 a）

这是一个有点不明显的事情。类型变量是隐式量化的，所以当你写

```
instance Parse a => Parse (Piece a) where
    parse x | isLowercase x = Piece (parse x :: a, White) 
```

的`a`定义中的 the`parse`是一个新的 forall 量化类型变量，并且您实际上说该对的第一个组件可以具有*任何*类型，就好像您说

```
instance Parse a => Parse (Piece a) where
    parse x | isLowercase x = Piece (parse x :: anyType, White) 
```

当然，没有任何`instance Parse anyType`可以从上下文中推断出来的`Parse a`。

您可以使用扩展名告诉 GHC`a`元组中的 应该表示与实例头部中的类型相同的类型`ScopedTypeVariables`，但最好暂时保留它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:04:25.287

您需要`ScopedTypeVariables`pragma 以允许使用诸如在函数类型中`parse x :: a`使用 typevariable的位置。`a`

如果您想为每种情况定义更具体的内容，您还可以使用它`FlexibleInstances`来定义实例。`Piece ChessPiece``Piece DraughtPiece`

```
instance Parse (Piece ChessPiece) where
   parse x = -- return Piece ChessPiece here 

instance Parse (Piece DraughtPiece) where
   parse x = -- return Piece DrauPiece here 
```

在任何情况下，ghc 都需要足够的上下文来知道要解析的类型，因此您将需要类似`parse "k" :: Piece ChessPiece`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:14:01.440

由于您`DraughtPiece`与 几乎相同`ChessPiece`，因此我建议您将它们放入相同的数据类型中，原因相同，您不会`Maybe`每次都发明新类型`Nothing`似乎是错误的*词*。另一个好处是，当您想要增加游戏数量时，代码可以更好地扩展。

```
data ChessPiece = King | ... etc
data Game = Game Int
data Player = Black | White
data Piece = Piece ChessPiece Player Game 
```

您现在必须调整数据表示。如果您可以调整要解析的文件的表示形式，则可以将“黑板之王”编码为`nk`.

```
import Data.Char

instance Parse Piece where
      parse x = case x of
            [n,p] | isLower p -> Piece (parse [p]) White (parse [n])
                  | otherwise -> Piece (parse [p]) Black (parse [n])
            _ -> [Parse error]

instance Parse ChessPiece where
      parse [p] = case toLower p of
            'k' -> King
            ...
            _ -> [Parse error]

instance Parse Game where
      parse = Game . digitToInt 
```

最后一点：您的问题的主要困难在于您的数据不是原子存储的：一个标记包含有关图形颜色和类型的信息。当您设计自己的文件时，请尝试将不同的东西分开。

# .net - Parallel.ForEach() - How many threads?

> ID：12933308
> 
> 赞同：4
> 
> 时间：2012-10-17T11:30:42.640
> 
> 标签：.net, parallel-processing, parallel.foreach

I am downloading files which means that even though I had only 2 cores, it would improve performance to make more than two threads.

Does the `Parallel.ForEach()` only make as many threads as the amount of cores, even though I set ParallelOptions.MaxDegreeOfParallelism to a higher value?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:19:38.453

From documentation:

> The MaxDegreeOfParallelism limits the number of concurrent operations run by Parallel method calls that are passed this ParallelOptions instance to the set value, if it is positive. If MaxDegreeOfParallelism is -1, then there is no limit placed on the number of concurrently running operations.

This function throw only `ArgumentOutOfRangeException` and type of `MaxDegreeOfParalleism` is int. So it means, that it can create more threads than count of cores.

I can confirm it, because I've ran a lot of xml generation processes and Task Manager shown count of processes exactly as I've set before.

# c - libpng.lib 中的链接器错误“未解析的外部符号 __imp___iob_func”

> ID：12933309
> 
> 赞同：3
> 
> 时间：2012-10-17T11:30:45.213
> 
> 标签：c, windows-mobile, libpng

我正在尝试为 Windows Mobile 6 编译 libpng，但我不断收到以下链接器错误：

```
error LNK2019: unresolved external symbol __imp___iob_func referenced in function png_default_error libpng.lib
error LNK2019: unresolved external symbol __imp_abort referenced in function png_longjmp 
```

编译是使用 /MD 选项完成的，在我的主项目之间也是如此。zlib 和 libpng。

改用 /MT 时，仍然有错误，但略有不同：

```
error LNK2019: unresolved external symbol __iob_func referenced in function png_default_error
error LNK2019: unresolved external symbol abort referenced in function png_longjmp 
```

这带来了几个问题。

1.  `__imp___iob_func`和是什么`__imp_abort`？
2.  它们在哪里实施？或者，如何排除对它们的引用？

我的 libpng 编译器选项：

```
/Od /I "..\lib\zlib-1.2.7" /I "..\lib\lpng1512" /D "_DEBUG" /D "_WIN32_WCE=0x502" /D "UNDER_CE" /D "WIN32_PLATFORM_PSPC" /D "WINCE" /D "DEBUG" /D "_WINDOWS" /D "_USRDLL" /D "LIBPNG_EXPORTS" /D "ARM" /D "_ARM_" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /MDd /fp:fast /GR- /Fo"Windows Mobile 6 Professional SDK (ARMV4I)\Debug/" /Fd"Windows Mobile 6 Professional SDK (ARMV4I)\Debug/vc80.pdb" /W3 /nologo /c /Zi /TC /QMFPE- 
```

图书管理员选项：

```
/OUT:"Windows Mobile 6 Professional SDK (ARMV4I)\Debug\libpng.lib" /LIBPATH:"C:\Program Files\Windows Mobile 6 SDK\PocketPC\Lib\Armv4i" /NOLOGO /NODEFAULTLIB Coredll.lib /SUBSYSTEM:WINDOWSCE,5.02 
```

我的项目（libpngStreamWrap）编译器选项：

```
/Od /I "..\lib\lpng1512" /D "_DEBUG" /D "_WIN32_WCE=0x502" /D "UNDER_CE" /D "WIN32_PLATFORM_PSPC" /D "WINCE" /D "DEBUG" /D "_LIB" /D "ARM" /D "_ARM_" /D "_UNICODE" /D "UNICODE" /D "_WINDLL" /Gm /EHsc /MDd /fp:fast /GR- /Yu"stdafx.h" /Fp"Windows Mobile 6 Professional SDK (ARMV4I)\Debug/libpngStreamWrap.pch" /Fo"Windows Mobile 6 Professional SDK (ARMV4I)\Debug/" /Fd"Windows Mobile 6 Professional SDK (ARMV4I)\Debug/vc80.pdb" /W3 /nologo /c /Zi /TP 
```

链接器选项：

```
/OUT:"Windows Mobile 6 Professional SDK (ARMV4I)\Debug\libpngStreamWrap.dll" /NOLOGO /DLL /MANIFEST:NO /NODEFAULTLIB:"oldnames.lib" /DYNAMICBASE /NXCOMPAT /ERRORREPORT:PROMPT coredll.lib corelibc.lib ole32.lib oleaut32.lib uuid.lib commctrl.lib "..\libpng\windows mobile 6 professional sdk (armv4i)\debug\libpng.lib" "..\zlib\windows mobile 6 professional sdk (armv4i)\debug\zlib.lib"  /SUBSYSTEM:WINDOWSCE,5.02 /VERBOSE:lib 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T21:44:09.100

最近在 sourceforge.net 的 png-mng-implement 列表中讨论了这一点（主题 libpng Visual Studio 2010 项目）：

> 经过几次长时间的谷歌搜索，结果发现原因是 libpng 调试配置文件“运行时库”设置没有设置为“多线程调试 DLL”作为例外，而是设置为“多线程 DLL”，这是相同的配置文件在发布版本中使用。

这是一个错误。这似乎是对 vcxproj 项目文件的错误手动编辑的结果 - 如果 RuntimeLibrary 元素被删除或无效，它将被设置为默认值，即 /MD 用于 DLL。

它可以在 libpng 1.5 中修复，但这将是一个 API 更改，并且会破坏现有的、工作的 libpng 1.5 项目。因此，我认为最好的办法是在项目/vstudio 中添加一个警告通知（可能在单独的文件 WARNING 中）指出问题。一旦人们知道设置可能是错误的，就很容易更改设置。

# c++ - ProcessExit - DLL 卸载和静态的顺序

> ID：12933310
> 
> 赞同：1
> 
> 时间：2012-10-17T11:30:46.070
> 
> 标签：c++, windows, visual-c++, dll, static

有一个隐式加载某些 DLL 和其他显式 (LoadLibrary) 的 EXE。这个EXE正在执行它的ExitProcess（剩下的进程中的1个线程），并且作为忙于卸载DLL的一部分，比如A.DLL。

A.DLL（不幸的是）有一个静态的。调用 atexit 回调并开始调用此静态的析构函数，留下一系列析构函数，直到析构函数决定进行一些清理并加载 DLL 来执行此操作。此 DLL 执行某些方法，直到由于内存访问冲突而发生崩溃，因为它要在此 DLL 中使用的静态不再存在。查看此静态的堆栈跟踪，它的析构函数已作为其 DLL 卸载的一部分被调用。

发生了什么？DLL 被加载，执行了一些方法，去使用一个静态的（在同一个 DLL 中），但这已经被破坏了（静态只有在 dll 被卸载时被破坏）。那么它是否处于执行方法的半不确定状态但也正在被破坏？

EXE 似乎在 __tmainCRTStartup 的上下文中，这意味着用户创建的 main 已返回？在用户 main 或 tmainCRTStartup 的上下文中是否卸载了 DLL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:11:33.947

就这么简单：静态对象的析构函数按照它们创建的相反顺序调用，这是通过注册 atexit 回调在内部完成的。唯一不同的情况是您手动卸载 (FreeLibrary) DLL。

您描述的问题仅表明您具有循环依赖关系，静态构造函数/析构函数很容易发生这种情况。你应该小心你在析构函数中所做的事情，尤其是此时加载一个 DLL 对我来说似乎很危险。

# objective-c - MKMapVIew 的问题，我的针点未按正确的方向显示（我正在为 mkmapview 使用指南针模式）

> ID：12933315
> 
> 赞同：3
> 
> 时间：2012-10-17T11:30:56.040
> 
> 标签：objective-c, google-maps, mkmapview, compass-geolocation

我正在开发一个适用于地图的 iPhone 应用程序。在这个应用程序中，我需要根据它们的纬度和经度显示一些停车位（地址）。至此，我成功完成了，但我想显示相对于用户方向（SE、SW、NE、NW）的 Pin Point。我尝试在 MKMapview 中使用指南针模式，但它显示的针点方向错误。

我的代码有错误还是网络服务有问题？我将用户位置 LAT 和 LONG 以及用户方向传递给 Web 服务。

我现在给你看屏幕截图。![在此处输入图像描述](../Images/756a1ebc86270151d0acf3b04dffe560.png)

![在此处输入图像描述](../Images/d490282e79b232cf3ccda0957b8a68c9.png)

```
- (void)updateHeading:(CLHeading *) newHeading {
NSLog(@"New magnetic heading: %f", newHeading.magneticHeading);
NSLog(@"New true heading: %f", newHeading.trueHeading);
double rotation = newHeading.magneticHeading * 3.14159 / 180;
NSLog(@"rotation ========> %f",rotation);
[mapView setTransform:CGAffineTransformMakeRotation(rotation)];

[[mapView annotations] enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    MKAnnotationView * view = [mapView viewForAnnotation:obj];

    [view setTransform:CGAffineTransformMakeRotation(rotation)];
}];
//NSLog(@"newlocation course : %f",mapView.userLocation.location.course);
float mHeading = newHeading.magneticHeading;
NSLog(@"mHeading %f",mHeading);
//direction is a string
if(mHeading > 0 && mHeading <90) {
    // north east
    NSLog(@"~~~~~~~~~~~~~~~~north east");
    direction = @"North East";
}
else if(mHeading > 90 && mHeading < 180)  {
    // south east
    NSLog(@"~~~~~~~~~~~~~~~~south east");
    direction = @"South East";
}
else if(mHeading > 180 && mHeading < 270) {
    // south west
    NSLog(@"~~~~~~~~~~~~~~~~south west");
    direction = @"South West";
}
else if(mHeading > 270 && mHeading < 360) {
    // north west
    NSLog(@"~~~~~~~~~~~~~~~~north west");
    direction = @"North West";
}

if([changedDirction isEqualToString:direction])
{
    NSLog(@"called nothing/changedDirction.....");
}
else
{
  NSURL *url = [NSURL URLWithString:@"http://www.charlottecentercity.org/services/nearbylocations.php"];
  NSLog(@"url is---%@",url);
  directionsRequest = [[ASIFormDataRequest alloc] initWithURL:url];
 [directionsRequest setPostValue:[NSString stringWithFormat:@"%f", appdelegate.currentLocation.latitude] forKey:@"lat"];
 [directionsRequest setPostValue:[NSString stringWithFormat:@"%f", appdelegate.currentLocation.longitude] forKey:@"long"];
 directionLabel.text = direction;
[directionsRequest setPostValue:direction forKey:@"direction"];
[directionsRequest setPostValue:self.mapID forKey:@"id"];
 directionsRequest.delegate = self;
[directionsRequest startAsynchronous];
 changedDirction = direction;
 } }

-(void)requestFinished:(ASIHTTPRequest *)request {
NSLog(@"request finished is calling....");
if ([venuDescArray count]>0)
{
    [venuDescArray removeAllObjects]; 

}

NSError *error = [request error];
NSLog(@"error is%@",error);
if (!error) 
{
    NSString *responseString = [request responseString];
    NSMutableArray *array = [responseString JSONValue];
    NSLog(@"response array for category wise pin--%@",array);
    for (int i = 0; i<[array count]; i++) 
    {
        NSMutableDictionary *theDict = [array objectAtIndex:i];
        PlacesObject *aVenue = [[PlacesObject alloc] init];
        aVenue.venueDetailsplaceID = [theDict objectForKey:@"placeid"];
        aVenue.venueDetailsname = [theDict objectForKey:@"name"];
        aVenue.venueDetailsaddress = [theDict objectForKey:@"address"];
        aVenue.venueDetailslatitude = [theDict objectForKey:@"latitude"];
        aVenue.venueDetailslongitude = [theDict objectForKey:@"longitude"];

        [venuDescArray addObject:aVenue];
    }

    NSLog(@"venuDescArray count is---%d",[venuDescArray count]);
}
[self setLocations]; }

-(void)setLocations {

[annotaionsArray11 removeAllObjects];
[mapView removeAnnotations:mapView.annotations];
 NSLog(@"annotations removed....");

self.mapView.mapType = MKMapTypeStandard;
self.mapView.delegate = self;

MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];

float lati_new =appdelegate.currentLocation.latitude;//35.227087;
float longi_new =appdelegate.currentLocation.longitude;//-80.843127; 

myAnnotation.annType=@"Current";
myAnnotation.title1 =@"Current our Location";

myAnnotation.latitude=[NSNumber numberWithFloat:lati_new];
myAnnotation.longitude =[NSNumber numberWithFloat:longi_new];
NSLog(@"myAnnotation.latitude/float---%@",myAnnotation.latitude);
NSLog(@"myAnnotation.longitude/float---%@",myAnnotation.longitude);

[annotaionsArray11 addObject:myAnnotation];

[myAnnotation setButtonTag:0];

 NSLog(@"self.venuDescArray count:%d",[self.venuDescArray count]);

PlacesObject *placesObj=[[PlacesObject alloc] init];

for (int i=0; i<[self.venuDescArray count]; i++) 
{
    placesObj=[self.venuDescArray objectAtIndex:i];

    MyAnnotation *myAnnotation = [[MyAnnotation alloc] init];

    myAnnotation.annType=@"Points";

    myAnnotation.title1 =placesObj.venueDetailsname;
    NSLog(@"myAnnotation.title1's is---%@",myAnnotation.title1);
    myAnnotation.subTitle =placesObj.venueDetailsaddress;
    NSLog(@"myAnnotation.subTitle is---%@",myAnnotation.subTitle);
    myAnnotation.latitude =[NSNumber numberWithFloat:[placesObj.venueDetailslatitude floatValue]];
    NSLog(@"myAnnotation.latitudes is ----%@",myAnnotation.latitude);
    myAnnotation.longitude =[NSNumber numberWithFloat:[placesObj.venueDetailslongitude floatValue]];
    NSLog(@"myAnnotation.longitude is ----%@",myAnnotation.longitude);
    [annotaionsArray11 addObject:myAnnotation];
    NSLog(@"annotaionsArray11---%d",[annotaionsArray11 count]);

    [myAnnotation setButtonTag:i];
}

NSLog(@"annotaionsArray count after adding all locations..%d",[annotaionsArray11 count]);
 [mapView addAnnotations:annotaionsArray11];  } 
```

在此先感谢@harikrishna 的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T01:57:43.633

由于这个问题在某种程度上是特定的，并不是所有的代码都在这里显示，我只能尝试从当前可用的信息中推断出来。您想根据用户的航向显示四组不同的停车位置之一，但是在更改航向时，注释不会更改。

基于 web 服务返回正确结果的假设，问题可能是由您使用的方式引起的

```
MKAnnotationView * view = [mapView viewForAnnotation:obj]; 
```

请检查您是否在代码中使用了**reuseIdentifier**。

# java - 红帽 OpenShift 上的 PHP 前端 Java REST 后端

> ID：12933319
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:31:10.877
> 
> 标签：java, php, rest, openshift

我想用 Java REST 后端和 PHP 网络前端创建宠物项目（我的朋友将在 PHP 方面）。

是否可以在 Red Hat OpenShift 上使用这种架构构建应用程序？

它会是可扩展的吗？

成本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:37:48.087

> 是否可以在 Red Hat OpenShift 上使用这种架构构建应用程序？

是的，OpenShift 支持 Java 和 PHP。

> 它会是可扩展的吗？

是的，如果 PHP 应用程序和 Java 应用程序允许这样做。OpenShift 平台本身是可扩展的。

> 成本呢？

OpenShift 的价格列表在他们的网站上有概述：[https ://openshift.redhat.com/community/developers/pricing](https://openshift.redhat.com/community/developers/pricing)

# android - 为 Android 选择热敏打印机

> ID：12933320
> 
> 赞同：1
> 
> 时间：2012-10-17T11:31:15.677
> 
> 标签：android, printing, zebra-printers

什么是适用于 Android 的最兼容、易于接口的标签打印机。我一直在浏览 Zebra、Star、Epson 和 Brother。Zebra SDK 是一个 exe，我无法在我的 mac 中探索它。爱普生主要支持热敏票据打印机，但我需要标签打印机。

为了帮助我的研究，如果我可以选择一台打印机，我应该考虑哪台打印机对 Android 有最好的支持（开发）。我可以通过 USB 或 Wifi/蓝牙连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:37:55.323

我已经成功使用了 Zebra 打印机。他们有一个用于打印到设备的 SDK，该 SDK 管理一些通过蓝牙连接的更精细点。虽然我在 Windows 上尝试过许多其他打印机，但 Zebra 是我在 Android 上尝试过的唯一一款，而且它似乎对我们的项目运行良好。

# php - 要加密的 iPhone XML 数据

> ID：12933322
> 
> 赞同：0
> 
> 时间：2012-10-17T11:31:21.017
> 
> 标签：php, iphone, security, encryption

我们的应用程序以 XML 格式从 PHP/Mysql 服务器获取所有数据

但是现在客户不希望数据按原样出现，他担心，任何知道这些 .php 文件链接的人都可以访问服务器上的所有数据，并成为他的竞争对手。

所以我想知道是否有任何可用的加密可以在 php 中使用并在 ios 中解密。

还是 SSL 是唯一的选择？

编辑：我们的 php 文件返回 XML 数据，客户端很烦竞争对手可以获取数据，所以我想将加密数据发送到 XML 并在 iPhone 中解密，那么有什么好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:35:10.927

SSL 是最直接的选项，但您可能还应该添加一个质询/响应，以便每个请求都伴随一个一次性哈希。这意味着只有可以创建有效“密钥”的设备才能访问数据，而不是任何可以看到 URL 端点的设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:36:41.263

您可以添加某种授权机制（类似于 oauth 或更基本的机制），这样只有授权的应用程序才能从服务器获取 XML 数据。

# python - 多个 CSV Python 排序

> ID：12933323
> 
> 赞同：1
> 
> 时间：2012-10-17T11:31:24.550
> 
> 标签：python, sorting

感谢你目前的帮助！我在代码中达到了这一点。

```
import glob
import csv
import sys
import array

x=1
signs=array.array('i',(0,)*31) 
files = glob.glob('./*.csv')
file = open("all.csv", 'w') 

for row in files: 
    if x<30: 
        signs[x]= x 
        x=x+1 

print (signs[x])
file.close() 
```

我在打印整个数组时遇到问题。正如我所说，模型中有 29 个文件，每个文件有 30 个值：
1,2
2,9
3,20
4,6
5,2
没有特定的顺序或任何东西，数字会重复。我需要打印出数字以及其中有多少实际上重复了自己。我似乎创建了 all.csv 文件，但它似乎是空的。我对python真的很陌生，请不要生我的气。我现在搜索了大约 8 个小时（包括我删除的以前的代码块），但我似乎被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:49:25.760

一种选择：遍历每个文件中的每个数字并增加一个存储在字典中的计数器。打印出按字典键排序的结果（即 csv 文件中遇到的数字）。

```
import csv, glob, sys

from collections import defaultdict

files = [open(f) for f in glob.glob('user./[1-29].csv')]
#files = [open('input1','r')]
counts = defaultdict(int)

for f in files:
    r = csv.reader(f)
    for line in r:
        for num in line:
            counts[int(num)] += 1

for key,val in sorted(counts.items()):
    print key, val 
```

# spring - Spring 数据规范或 QueryDSL

> ID：12933327
> 
> 赞同：14
> 
> 时间：2012-10-17T11:31:38.003
> 
> 标签：spring, specifications, spring-data, querydsl

在其中一个项目中，我们使用的是 Spring Data。现在查询变得越来越复杂，我们考虑添加 Spring Data Specification 或 QueryDSL。

但是，不确定前进的最佳方式。我认为它们都有相同的目的。有没有比其他更推荐的？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T07:36:48.947

与 Querydsl 相比，Spring Data 规范有点冗长

```
public CustomerSpecifications {

  public static Specification<Customer> customerHasBirthday() {
    return new Specification<Customer> {
      public Predicate toPredicate(Root<T> root, CriteriaQuery query, CriteriaBuilder cb) {
        return cb.equal(root.get(Customer_.birthday), today);
      }
    };
  }

  public static Specification<Customer> isLongTermCustomer() {
    return new Specification<Customer> {
      public Predicate toPredicate(Root<T> root, CriteriaQuery query, CriteriaBuilder cb) {
        return cb.lessThan(root.get(Customer_.createdAt), new LocalDate.minusYears(2));
      }
    };
  }
} 
```

与此相比

```
QCustomer customer = QCustomer.customer;
LocalDate today = new LocalDate();
BooleanExpression customerHasBirthday = customer.birthday.eq(today);
BooleanExpression isLongTermCustomer = customer.createdAt.lt(today.minusYears(2)); 
```

如果您要处理复杂的查询，您可能需要选择 Querydsl。我相信它会更好地扩展，因为它更紧凑。

这个答案是有偏见的，因为我是 Querydsl 的维护者。

# matplotlib - tkagg 后端问题

> ID：12933335
> 
> 赞同：15
> 
> 时间：2012-10-17T11:31:54.027
> 
> 标签：matplotlib

我需要使用 Tkagg 后端在 Tkinter 程序中使用 matplotlib，并且收到“ImportError：没有名为 backend_tkagg 的模块”错误消息。

环顾四周，我发现我添加了一种可能的解决方案来安装 agg-dev 库，所以我这样做了（这里是 Fedora fc13）：*yum install agg agg-devel* ...但问题仍然存在。

我想也许我必须重新安装 matplotlib，所以我发出了 *easy_install -m matplotlib*，但没有运气（尽管现在相同的错误消息似乎来自不同的文件，即 /usr/lib64/python2.6/site -packages/matplotlib/backends/ **init** .py)

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T12:04:52.903

我通过`matplotlib`从源代码编译解决了它。默认情况下，它使 Tkagg 处于活动状态。唯一的问题是它没有编译 Tkagg，因为我没有安装 tk-devel ......安装后一切正常。

所以我仍然不知道是否`easy_install matplotlib`不按设计使用 TkAgg，或者它是否也检查并注意到我没有`Tk.h`安装，但无论如何这是要走的路。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-20T05:45:22.897

我今天遇到了这个问题。

默认情况下，Tkagg 对我不可用（Ubuntu 14.04），所以我运行：

```
sudo apt-get install tk-dev libpng-dev libffi-dev dvipng texlive-latex-base 
```

然后卸载并重新安装matplotlib：

```
pip uninstall matplotlib
pip install matplotlib 
```

# object - JQgrid从列中保存和恢复对象

> ID：12933337
> 
> 赞同：4
> 
> 时间：2012-10-17T11:32:15.987
> 
> 标签：object, jqgrid, hidden

可以将复杂的对象保存到列中并在之后将其恢复。

这是一个例子：Json：

```
[{"datamain":"mydata",
       "address":{"data1":15,"data2":0.0,"data3":"1000"}}
}] 
```

Jqgrid：

```
jQuery("#rowed5").jqGrid({  
        datatype: "local",
        loadtext:"Loading...",
        colNames:['Name',
                  'obaddress'],
        colModel:[
        {name:'datamain',index:'datamain', width:200,editable: true,edittype:'text'},
        {name:'address',index:'address', width:30, editable: false,hidden : true,edittype:'text'}
                ],
        cellsubmit: "clientArray",  
        pager:"#pager"
    }); 
```

如果我尝试访问地址：

```
 var rowData = $("#rowed5").getRowData(rowid);
var myaddress= rowData['address']; 
```

然后我得到 '[object Object]' 但它是一个字符串！！！我不能做：`myaddress.data1`

有什么推荐？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:16:00.960

如果我正确理解您的问题，您可以执行以下操作：

```
var rowData = $("#rowed5").jqGrid("getLocalRow", rowid);
alert("data3=" + rowData.address.data3); 
```

顺便保存`address`不需要创建隐藏列的部分`"address"`。因此*，您无需在表中创建任何隐藏列来保存任何行特定的自定义数据*。您应该像往常一样填写数据：使用`data`jqGrid 选项：

```
var mydata = [
    {
        id: "10",
        "datamain": "mydata",
        "address": {"data1": 15, "data2": 0.0, "data3": "1000"}
    },
    {
        id: "20",
        "datamain": "mydata2",
        "address": {"data1": 18, "data2": 0.1, "data3": "3000"}
    }
];

$("#rowed5").jqGrid({
    datatype: "local",
    data: mydata,
    colNames: ['Name'],
    colModel: [
        {name: 'datamain', width: 300, editable: true}
    ],
    height: "auto",
    ...
}); 
```

在这种情况下**，所有数据**都将保存在`data`jqGrid 的内部参数中。可以`$("#rowed5").jqGrid("getGridParam", "data")`用来返回所有数据，也可以 `$("#rowed5").jqGrid("getLocalRow", rowid)`用来只返回指定行的数据。

[小型演示](http://www.ok-soft-gmbh.com/jqGrid/complexlocaldata.htm)现场演示了该方法。数据每页显示一行。因此，您可以转到下一页并使用单元格编辑修改数据。保存后将显示当前单元格中的“地址”信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:08:55.947

我刚刚解决了这个问题。主要问题是我必须以这种方式加载数据：

```
 jQuery("#rowed5")
        .jqGrid('setGridParam',
            { 
                datatype: 'local',
                data:mydata
            })
        .trigger("reloadGrid"); 
```

您不必这样做：

```
 jQuery("#rowed5").jqGrid("clearGridData", true);
        for(var i=0;i < data.item.length;i++){
            jQuery("#rowed5").jqGrid('addRowData',i,data.item[i]);
        } 
```

# javascript - dojox 增强网格覆盖 canEdit 函数

> ID：12933346
> 
> 赞同：0
> 
> 时间：2012-10-17T11:32:43.643
> 
> 标签：javascript, datagrid, dojo

我试图覆盖`canEdit(inCell, inRowIndex)`并设置禁用字段，`canEdit(3, 0);`因此第 0 行和第 3 行不再可编辑。我使用道场 1.8。

我有一个问题，它要么不起作用，要么将整个网格设置为不可编辑。

```
var index = grid.selection.selectedIndex;

grid.canEdit = function(inCell, inRowIndex) {
  console.log("inCell = " + inCell);
  if(inCell == 3)
    return false;
  else
    return true;
};

grid.canEdit(3, index); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:46:34.530

inCell 变量是一个对象而不是整数。您应该改用*inCell.index*或*inCell.layoutIndex*

```
grid.canEdit = function(inCell, inRowIndex) {
  console.log("inCell = ", inCell);
  if(inCell.index == 3)
    return false;
  else
    return true;
}; 
```

# sql-server-2008 - 如何更改sql server触发器中的插入行

> ID：12933348
> 
> 赞同：0
> 
> 时间：2012-10-17T11:33:01.867
> 
> 标签：sql-server-2008, triggers

这给出了一个错误

> 消息 156，级别 15，状态 1，过程 Trig_Insert_Serials_Null，第 30 行
> 关键字“插入”附近的语法不正确。

表结构：

```
Serials (CurrencyId, DivisionId, BranchId, NewSerialNumber, Display, TypeId) 
```

我想在 ( `CurrencyId, DivisionId, BranchId`) 中将 0 更改为 null。

```
CREATE TRIGGER Trig_Insert_Serials_Null
   ON  Serials
   INSTEAD OF INSERT   
AS 
BEGIN

DECLARE @currencyId int;
DECLARE @branchId int;
DECLARE @divisionId int;

SELECT @currencyId = INSERTED.CurrenceyId FROM INSERTED;
SELECT @branchId = INSERTED.BranchId FROM INSERTED;
SELECT @divisionId = INSERTED.DivisionId FROM INSERTED;

IF @currencyId = 0 
    SET @currencyId = NULL;
END

IF @branchId = 0 
    SET @branchId = NULL;
END

IF @divisionId = 0 
    SET @divisionId = NULL;
END

INSERT INTO Serials (CurrenceyId,DivisionId,BranchId,NewSerialNumber,
                         Display, TypeId)
VALUES (INSERTED.CurrenceyId,INSERTED.DivisionId, INSERTED.BranchId,
         INSERTED.NewSerialNumber, INSERTED.Display,INSERTED.TypeId)

END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:43:09.107

删除您在 3 个 IF 语句中的 3 个 END 。

END 应该以 BEGIN 开头

您的触发器中有 4 个 END 并且只有一个 BEGIN

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:45:56.047

您假设触发器**每行触发一次**- 这是**错误**的。

**触发器每批次**触发一次，并且可以为`INSERT`插入 50 行的单个语句触发。

因此，您的陈述如下：

```
SELECT @currencyId = INSERTED.CurrenceyId FROM INSERTED; 
```

会惨败。

您需要重新编写触发器以考虑到这一点 -`Inserted`表可以包含一行**或多**行 - 您不能简单地假设它始终是单行。

基本上，您需要执行以下操作：

```
 INSERT INTO Serials (CurrenceyId, DivisionId, BranchId, NewSerialNumber, Display, TypeId)
    SELECT
       CASE i.CurrenceyId WHEN 0 THEN NULL ELSE i.CurrenceyId END,
       CASE i.DivisionId WHEN 0 THEN NULL ELSE i.DivisionId END,
       CASE i.BranchId WHEN 0 THEN NULL ELSE i.BranchId END,
       i.NewSerialNumber, i.Display, i.TypeId
    FROM Inserted i 
```

# vmware - 在数据存储 esxi 4 VHD 之间复制文件需要完整大小，而不仅仅是使用的大小？

> ID：12933352
> 
> 赞同：0
> 
> 时间：2012-10-17T11:33:12.140
> 
> 标签：vmware, virtualization, virtual-machine, esxi

在 2 个 NAS 存储之间复制 VM 时，它会占用完整的 VHD 大小，而不是唯一使用的一个。如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:33:54.790

您可以将 VM 文件冷存储到目标 NAS 存储上的另一个卷并指定“瘦磁盘”格式。

# c# - 以编程方式将数据插入到 FusionTables

> ID：12933355
> 
> 赞同：2
> 
> 时间：2012-10-17T11:33:27.350
> 
> 标签：c#, javascript, google-fusion-tables

如何通过（JavaScript，C#）之类的编码将数据插入我的融合表中？通常，当我们有数据时，我们可以通过创建一个 .csv 文件手动将其插入到融合表中，并将其作为新行导入。但是，我正在处理的数据是在线的，所以我不能每次都手动将数据上传到我的融合表中。

所以，我想通过使用 JavaScript 或 C# 以编程方式进行。我在 Google FusionTables 中创建了一个 Google 帐户、一个 csv 表和一个身份验证密钥，供我的站点访问它。但我不知道如何实现所有这些以便将数据上传到我的表格 FusionTables。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:20:42.977

使用[Google Fusion Table API](https://developers.google.com/fusiontables/docs/v1/getting_started)。

周围有很多示例，我建议使用可用于多种不同语言的[Google API 客户端库之一，包括](https://developers.google.com/fusiontables/docs/v1/libraries)[JavaScript](http://code.google.com/p/google-api-javascript-client/)和[.NET (C#)](http://code.google.com/p/google-api-dotnet-client/)。

前段时间我已经[回答了一个关于纯 JavaScript 解决方案的类似问题。](https://stackoverflow.com/a/11619373/549755)

# css - 更改响应式设计的 Div 顺序

> ID：12933356
> 
> 赞同：4
> 
> 时间：2012-10-17T11:33:29.560
> 
> 标签：css, html, responsive-design

我正在创建一个响应式设计网站。

基本上当视口低于 XI 时，希望在页面底部显示菜单。

示例链接失效 - 我不再拥有的站点

如果您调整浏览器窗口的大小，您会注意到 3 种不同的设计（基于最终目标设计而不是设备类型）

V1：大于999px，你会看到左上角的红框，红框旁边的蓝框。

V2：在 600px 和 999px 之间，你会注意到红色框变小了，蓝色框现在位于红色框下方

v3：小于 600px，你会再次注意到红色框变小了，蓝色框现在变黄了。

基本上，在 V3 中，我想做现在的黄色盒子，坐在绿色盒子下面，灰色盒子上面

所以订单是红色盒子绿色盒子黄色盒子灰色盒子

除了讨厌的 hide old div，show new div hack（技术）或 JS 版本（远离 CSS Responsive）有没有办法移动这个。

CSS 在文件中，因此查看源代码会显示所有内容。

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T12:00:39.583

老实说，我想不出单独在 CSS 中做到这一点的方法，但在 jQuery 中很容易做到这一点，而不会破坏您的响应式设计。除了从 #top-links div 中删除 margin-top 之外，您的 CSS 不需要更改。

```
 <script type="text/javascript">
$(document).load($(window).bind("resize", listenWidth));

    function listenWidth( e ) {
        if($(window).width()<600)
        {
            $("#topLinks").remove().insertAfter($("#content"));
        } else {
            $("#topLinks").remove().insertBefore($("#content"));
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-09T13:03:20.517

我刚刚实施了一个解决方案

[http://www.jtudsbury.com/thoughts/rearrange-div-order.php](http://www.jtudsbury.com/thoughts/rearrange-div-order.php)

使用`display: table-header-group;`和`display: table-footer-group;`

这是我在缩小窗口宽度时切换到左上方右上方的两个水平 50% 宽度框的示例：

```
.box-container {
    display: table;
}

.box-50 {
    width: 50%;
    display: table-cell;
    padding: 0 20px;
}

@media only screen and (max-width : 700px) {

    .box-container {
        display: block;
    }
    .box-50 {
        display: block;
        width: 100%;
    }

    /* http://www.jtudsbury.com/thoughts/rearrange-div-order.php */
    .box-50.left {
        display: table-footer-group;
    }

    .box-50.right {
        display: table-header-group;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:12:20.827

试试这个也许有帮助

```
 @media (min-width:1px) and (max-width:599px) {
        #pageFrame {
            width:100%;

        }
        #logo {
            margin:0 auto;
            width:50px;
            height:50px;
        }
        #topLinks {
            position:absolute;
             top:250px;
            float:right;
            width:100%;
            background-color:yellow;

        }
        #content {
            position:absolute;
            top:100px;
            clear:none;
            float:left;
            width:100%;
        }
        #footer {
            position:absolute;
            top:350px;        
            clear:both;
            width:100%;
        } 
```

[演示](http://jsfiddle.net/bUxDE/24/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-28T08:28:23.487

Flex-Box 是您正在寻找的答案。查看（此链接现已损坏 - [http://www.jordanm.co.uk/lab/contentchoreography](http://www.jordanm.co.uk/lab/contentchoreography)）以获取所有 Flexbox 功能的完整说明[https://css-tricks.com/snippets/css/a- flexbox指南/](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-22T09:59:47.240

是的，更改容器中 div 的顺序非常简单。请查看我的工作 HTML css 代码。

```
<html>
    <head>
        <style type="text/css">
            #nav_bar{
                width:100%;
                height:50px;
                background:red;
            }
            #container{
                width:100%;
                height:500px;
            }

            #left_panel {
                position:relative;
                float:left;
                width:250px;
                border:0px solid black;
                background:#ccc;
                height:100%;
            }
            #right_panel{
                width:100%;
                background:#666;
                height:100%;
            }
            #inner_container{
                height:100%;    
            }
            .center {
                margin-left: auto;
                margin-right: auto;
                width: 40%;
                padding-top:50px;
            }
            .data_container{
                border:1px solid black;
                float:left;
                position:relative;
                padding:10px;
            }
            #footer{
                width:100%;
                height:50px;
                background:blue;
            }
            @media all and (max-width: 700px) {
                #container {
                    width: 100%; 
                    height: 500px;
                    display: flex;
                    flex-flow: column-reverse ;
                }
                #left_panel {
                    width:100%;
                    height:200px;
                }
                #right_panel{
                    width:100%;
                    height:300px;
                }
            }
        </style>
    </head>
    <body>
        <div id="nav_bar">Nav</div>
        <div id="container">
            <div id="left_panel">
                <div class="center">
                    Left Panel content
                </div>
            </div>
            <div id="right_panel">
                <div id="inner_container" class="center">
                    <div class="data_container">
                        Action Item 1
                    </div>
                    <div class="data_container">
                        Action Item 2
                    </div>
                    <div class="data_container">
                        Action Item 3
                    </div>
                </div>
            </div>  
        </div>
        <div id="footer">Footer</div>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-20T08:31:41.330

尝试创建两个 div，一个在页脚中，一个在页眉中，当屏幕小于 X 时，“display:none”底部的一个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-24T12:51:23.607

你应该看看`direction`css 属性。 [https://developer.mozilla.org/en-US/docs/Web/CSS/direction](https://developer.mozilla.org/en-US/docs/Web/CSS/direction)

你可以做的是：

1.  `direction: rtl;`在您的父容器上：`.container { direction: rtl; }`
2.  在直接孩子上将其重置为正常：`.container > * { direction: ltr; }`
3.  更改 HTML 中 div 的顺序，以便在桌面版本上以正确的顺序显示内容

这适用于每个浏览器，因为到处都支持此属性（从 IE 5.5...）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-24T10:49:05.673

使用 EventListener 和 matchMedia：

```
 //on load
 responsive_change_box_order();
 //on resize
 window.addEventListener('resize', responsive_change_box_order );

 function responsive_change_box_order() {
       if (window.matchMedia("(max-width: 1118px)").matches) {
           jQuery("#block-menu-block-1").remove().insertBefore(jQuery("#content"));
       }
       else{
           jQuery("#block-menu-block-1").remove().prependTo(jQuery(".region-sidebar-second .region-inner"));
       }
   } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-22T20:02:30.960

如果您使用的是 Bootstrap 4，我创建了一个简单的插件来检查当前的媒体查询断点，然后将其设置为变量。

然后你可以做类似的事情

```
 if ( xs == true ) { 
    $("#topLinks").remove().insertAfter($("#content"));
  } 
```

你可以在这里得到它：[https ://jacoblett.github.io/IfBreakpoint/](https://jacoblett.github.io/IfBreakpoint/)

# c# - 智能网页抓取 c#

> ID：12933359
> 
> 赞同：0
> 
> 时间：2012-10-17T11:33:35.867
> 
> 标签：c#, html, web-scraping

有许多产品提供了一个 gui 来挑选你想从网页中抓取的标签。（例如 WebHarvy 之类的东西）

我之前看过 HTML Agility Pack 以获取 DOM。我只是想检查是否有人知道任何用于在 HTML 页面中自动查找有用内容并创建所需 XPath 的不错的库或流程。

类似于 Evernote 和 iOS 如何知道“文章”在页面上的位置。然而，理想的工作是重复区域和分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:00:02.417

不确定这是否是您要查找的内容：
[http ://www.diffbot.com/](http://www.diffbot.com/)

但 Diffbot 擅长从网站上抓取内容。

# bash - 在查找文件时让 compgen 在目录中包含斜杠

> ID：12933362
> 
> 赞同：26
> 
> 时间：2012-10-17T11:33:43.803
> 
> 标签：bash, autocomplete, bash-completion

我想从我的自定义完成中获得以下行为

给定

```
$ mkdir foo
$ touch foo faz/bar faz/baz 
```

我想得到这个

```
$ foo -u <tab><tab> =>
foo faz/

$ foo -u fa<tab><tab> =>
foo -u faz/

$ foo -u faz/<tab><tab> =>
bar baz 
```

我认为那`compgen -f f`会输出`foo faz/`，但它输出`foo faz`对我没有多大帮助。

我是否需要对输出进行后处理，或者是否有一些神奇的选项组合来完成这项工作？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-09-28T03:35:46.520

我遇到了同样的问题。这是我正在使用的解决方法：

1.  用 注册完成函数`-o default`，例如`complete -o default -F _my_completion`。
2.  当你想完成一个文件名时，只需设置`COMPREPLY=()`并让 Readline 接管（这就是它的`-o default`作用）。

这有一个潜在的问题——你可能会`COMPREPLY=()`在不合适的地方拒绝完成，现在这不再起作用了。在 Bash 4.0 及更高版本中，您可以使用`compopt`以下方法解决此问题：

1.  在完成函数的顶部，始终运行`compopt +o default`. `COMPREPLY`这会在为空时禁用 Readline 文件名完成。
2.  当您想要完成文件名时，请使用`compopt -o default; COMPREPLY=()`. 换句话说，仅在需要时启用 Readline 文件名完成。

我还没有为 4.0 之前的 Bash 找到完整的解决方法，但我有一些对我来说足够好的东西。如果有人真的关心，我可以描述这一点，但希望这些旧的 Bash 版本很快就会不再常用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-10-24T20:45:05.380

以前的答案需要 bash 4，或者不能与同一命令的其他基于 compgen 的完成组合。以下解决方案不需要 compopt（因此它适用于 bash 3.2）并且它是可组合的（例如，您可以轻松添加额外的过滤以仅匹配某些文件扩展名）。如果不耐烦，请跳到底部。

* * *

您可以通过直接在命令行上运行 compgen 来测试它：

```
compgen -f -- $cur 
```

`$cur`到目前为止，您在交互式制表符完成过程中输入的单词在哪里。

如果我在一个有文件`afile.py`和子目录的目录`adir`中，`cur=a`那么上面的命令会显示以下内容：

```
$ cur=a
$ compgen -f -- $cur
adir
afile 
```

注意`compgen -f`显示文件*和*目录。`compgen -d`仅显示目录：

```
$ compgen -d -- $cur
adir 
```

添加`-S /`将为每个结果添加一个斜杠：

```
$ compgen -d -S / -- $cur
adir/ 
```

现在，我们可以尝试列出所有文件和所有目录：

```
$ compgen -f -- $cur; compgen -d -S / -- $cur
adir
afile.py
adir/ 
```

请注意，没有什么能阻止您多次调用 compgen！在您的完成脚本中，您将像这样使用它：

```
cur=${COMP_WORDS[COMP_CWORD]}
COMPREPLY=( $(compgen -f -- "$cur"; compgen -d -S / -- "$cur") ) 
```

不幸的是，这仍然没有给我们想要的行为，因为如果你键入`ad<TAB>`你有两个可能的完成：`adir`和`adir/`. 所以`ad<TAB>`将完成到`adir`，此时您仍然需要输入`/`来消除歧义。

我们现在需要的是一个返回所有文件但不返回目录的函数。这里是：

```
$ grep -v -F -f <(compgen -d -P '^' -S '$' -- "$cur") \
>     <(compgen -f -P '^' -S '$' -- "$cur") |
>     sed -e 's/^\^//' -e 's/\$$//'
afile.py 
```

让我们分解一下：

*   `grep -f file1 file2`表示显示 file2 中与 file1 中的任何模式匹配的行。
*   `-F`表示 file1 中的模式必须完全匹配（作为子字符串）；它们不是正则表达式。
*   `-v`表示反转匹配：仅显示*不在*file1 中的行。
*   `<(...)`是 bash[进程替换](https://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html)。它允许您在预期文件的位置运行任何命令。

所以我们告诉 grep：这是一个文件列表——删除与这个目录列表匹配的任何文件。

```
$ grep -v -F -f <(compgen -d -P '^' -S '$' -- "$cur") \
>     <(compgen -f -P '^' -S '$' -- "$cur")
^afile.py$ 
```

我用 compgen 添加了开始和结束标记，`-P ^`因为`-S '$'`grep`-F`进行子字符串匹配，我们不想删除文件名`a-file-with-adir-in-the-middle`，因为它的中间部分匹配目录的名称。获得文件列表后，我们使用 sed 删除这些标记。

现在我们可以编写一个函数来做我们想做的事：

```
# Returns filenames and directories, appending a slash to directory names.
_mycmd_compgen_filenames() {
    local cur="$1"

    # Files, excluding directories:
    grep -v -F -f <(compgen -d -P ^ -S '$' -- "$cur") \
        <(compgen -f -P ^ -S '$' -- "$cur") |
        sed -e 's/^\^//' -e 's/\$$/ /'

    # Directories:
    compgen -d -S / -- "$cur"
} 
```

你像这样使用它：

```
_mycmd_complete() {
    local cur=${COMP_WORDS[COMP_CWORD]}
    COMPREPLY=( $(_mycmd_compgen_filenames "$cur") )
}
complete -o nospace -F _mycmd_complete mycmd 
```

请注意，这`-o nospace`意味着您在目录的`/`. 对于普通文件，我们用 sed 在末尾添加了一个空格。

将它放在一个单独的函数中的一个好处是它很容易测试！例如，这是一个自动化测试：

```
diff -u <(printf "afile.py \nadir/\n") <(_mycmd_compgen_filenames "a") \
    || { echo "error: unexpected completions"; exit 1; } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T17:02:17.480

此行为受**readline**变量`mark-directories`（和相关的`mark-symlinked-directories`）的影响。我相信应该设置该变量以在目录名称**上**`complete`打印一个斜杠（bash v3.00.16 中的默认值）。似乎相关的行为`compgen`不会在目录名称后附加斜杠：-\

将值`mark-directories`交替设置为`on`，`off`然后重试您的测试：-

```
bind 'set mark-directories on'
bind 'set mark-directories off' 
```

要使更改永久用于将来的调用`bash`，请将以下内容添加到您的 INPUTRC 文件中，通常是`~/.inputrc`：-

```
$if Bash
# append '/' to dirnames
set mark-directories on
$endif 
```

在当前 shell 中设置 readline 变量的提示可在此处找到：[https](https://unix.stackexchange.com/a/27545) ://unix.stackexchange.com/a/27545 。我没有确定如何测试 readline 变量的当前值。

## 其他想法

*也许只是学术兴趣...*

仅创建目录名称列表并附加斜杠：-

```
compgen -d -S / f 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-07T00:17:10.507

使用`-o filenames`传递给`complete`指令的选项。只要 的内容`COMPREPLY`是有效的路径，斜线就会被适当地附加，同时在完成非目录匹配后仍然添加一个空格。（适用于 bash 3.2。）

```
_cmd() {
  COMPREPLY=( $( compgen -f -- "$cur" ))
  COMPREPLY=( $( compgen -A file -- "$cur" ))  # same thing
}

complete -o filenames -F _cmd cmd 
```

见`info -n "(bash)Programmable Completion Builtins"`：

> 完全的
> 
> > ... -o 组合选项 ...
> > 
> > > ```
> > >  filenames
> > >            Tell Readline that the compspec generates filenames, so
> > >            it can perform any filename-specific processing (like
> > >            adding a slash to directory names or suppressing
> > >            trailing spaces).  This option is intended to be used
> > >            with shell functions specified with `-F'. 
> > > ```

和：

> ```
> -A ACTION 
> ```
> 
> > ... '文件'
> > 
> > > ```
> > >  File names.  May also be specified as -f. 
> > > ```

注意：`compgen`和`complete`具有相同的论点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-14T10:57:45.153

这对我有用：

```
_my_completion() { 
  compopt -o nospace 
  COMPREPLY=( $(compgen -S "/" -d "${COMP_WORDS[$COMP_CWORD]}") )
}

complete -F _my_completion foo 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-28T07:29:07.703

如果您希望在目录完成后能够继续使用选项卡；这是完整的解决方案：

```
cur=${COMP_WORDS[COMP_CWORD]}
COMPREPLY=( $(compgen -S "/" -d -- ${cur}) ); 
compopt -o nospace; 
```

首先在答案中添加一个斜杠。然后运行`compopt -o nospace`命令以删除尾随空格。现在，如果您只有`foo/bar`在您的目录中，两个选项卡就足以输入它们！

# f# - F# Func 类型推断 Seq 和 PSeq ToDictionary 的区别

> ID：12933366
> 
> 赞同：7
> 
> 时间：2012-10-17T11:33:53.727
> 
> 标签：f#, f#-3.0, f#-powerpack

给定一个简单的元组序列，以及一个使用 F# PowerPack 的 PSeq 的并行序列：

```
let a = Seq.singleton (1,"a")  --> val a: seq<int * string>
let b = a |> PSeq.map id       --> val b: pseq<int * string> 
```

现在我想从他们创建一个 .Net BCL 字典：

```
let bd = b.ToDictionary(fst, snd, HashIdentity.Structural)
let ad = a.ToDictionary(fst, snd, HashIdentity.Structural)
let ad2 = a.ToDictionary(fst, snd)
let ad3 = a.ToDictionary((fun (x,y) -> x), (fun (x,y) -> y), HashIdentity.Structural) 
```

虽然`let bd`有效，`let ad`但无法编译，因为它无法推断类型并正确转换为 BCL 的 Func。有趣的是，如果我省略第三个参数（如 in `let ad2`，或者如果我写出`fst`并`snd`手动内联in ），它工作得很好`let ad3`。

> 这个表达式应该有类型 Func<(int * string),'a> 但这里有类型 'b * 'c -> 'b

*   为什么不`let ad`编译，而所有替代方案都可以正常工作？
*   有没有办法在`let ad`不提供内联函数或类型注释的情况下进行编译？

PS：我需要 HashIdentity.Structural 因为在实际代码中，键不是整数，而是元组或记录

更新：我现在已经定义`let dictionary (s : ('a * 'b) seq) = s.ToDictionary((fun (x,y)->x), (fun (x,y)->y), HashIdentity.Structural)`了，所以我可以写`let ad = a |> dictionary`，但我仍然对它为什么不能用`fst`and`snd`函数编译感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T14:49:56.470

我相信这并不完全是一个错误，而只是 F# 类型推断算法的一个非常丑陋的极端案例，其中涉及重载和类型定向转换。奇怪的是，编译器`ad2`正确地推断出绑定的类型，因为第二个重载`ToDictionary`有两个参数，这会在推断过程中导致额外的重载解析步骤。另一方面，只有一个带有三个参数的重载，因此在尝试推断`ad`的类型时不使用重载解析步骤。

正如我所提到的，难题的另一部分是从 F# 函数到 .NET 委托类型的类型定向转换（这就是您可以在`Func<_,_>`预期 a 的地方传递 F# 函数的方式）。基本上，如果您使用显式 lambda 或有多个重载，则考虑此转换，但如果只有一个重载且没有显式 lambda，则不考虑转换。这意味着以下内容也将起作用：

```
let ad3 = a.ToDictionary(System.Func<_,_>(fst), 
                         System.Func<_,_>(snd), HashIdentity.Structural) 
```

因为现在不需要执行类型定向转换。

这个结果肯定是违反直觉的，所以我希望有一些方法可以调整类型推断算法以更好地处理这些极端情况。不幸的是，与 .NET 类型系统的某些方面（例如命名的委托类型、子类型化、重载等）进行互操作会使推理变得比其他方式困难得多，并且可能有一些原因导致算法不容易修改以处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:17:10.460

看起来像一个错误（或重载解决边缘情况），但您可以通过使用内置[`dict`](http://msdn.microsoft.com/en-us/library/ee353774.aspx)函数来避免这个问题：

```
let a = Seq.singleton (1,"a")  
let b = a |> PSeq.map id 
let bd = dict b
let ad = dict a 
```

# c# - 如何使文件路径到达解决方案特定文件夹中的文件？

> ID：12933369
> 
> 赞同：2
> 
> 时间：2012-10-17T11:34:08.370
> 
> 标签：c#, filepath

我有一些文件路径，如下所示：

```
StreamReader fileStream = new StreamReader(@"C:\Projects\SisStuff\SIS\SIS.Core\Models\CreateEditTemplate.cshtml"); 
```

现在我想删除 c:Project\SisStuff 部分以使其独立于我计算机中的文件路径，我尝试 @"~\Models\CreateEditTemplate.cshtml" 但在调试文件夹中找到它，我怎样才能让它工作?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:38:25.053

能够跨系统工作的唯一方法是构建一个已知的系统变量。例如，您可以使用`%windir%`right?获取 Windows 目录。那是因为它是一个定义良好的系统变量。

但是，如果您只是想进入项目的根目录，您可以记住它**总是**从您正在执行的目录开始。因此，在您想要的 Visual Studio 中运行时（假设您使用项目模板中的默认路径设置）`..\..\Models\CreateEditTemplate.cshtml`。

但是，如果您出于某种原因在生产中需要它，它可能看起来更像是`..\Models\CreateEditTemplate.cshtml`因为默认情况下`bin`，生产中只有一个文件夹，您需要从中升级。

# android - Android反射混淆

> ID：12933372
> 
> 赞同：2
> 
> 时间：2012-10-17T11:34:21.763
> 
> 标签：android, reflection

我试图反映一个 Android 类，我们知道它可以完成，因为其他应用程序正在这样做，但我们自己却在努力实现结果。

我们被困在下面

```
Class<?> myClass = Class.forName("android.content.pm.PackageManager");
Method method = myClass.getMethod("deleteApplicationCacheFiles", String.class,IPackageDataObserver.class); 
```

IPackageDataObserver.class 不存在

```
import android.content.pm.IPackageDataObserver; 
```

也不起作用，我可以手动从 Google 获取接口代码并将它们放入包中，但这似乎有点 OTT，想知道我是否遗漏了一些东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:55:55.663

**编辑：**

将 IPackageDataObserver 类添加到您自己的项目中，这是唯一的方法。

在你的源文件夹中创建一个包，命名为“android.content.pm”并将这个类添加到它，这个类只是原始的android源代码：

```
/*
 * This file is auto-generated.  DO NOT MODIFY.
 * Original file: frameworks/base/core/java/android/content/pm/IPackageDataObserver.aidl
 */
package android.content.pm;
/**
 * API for package data change related callbacks from the Package Manager.
 * Some usage scenarios include deletion of cache directory, generate
 * statistics related to code, data, cache usage(TODO)
 * {@hide}
 */
public interface IPackageDataObserver extends android.os.IInterface
{
/** Local-side IPC implementation stub class. */
public static abstract class Stub extends android.os.Binder implements android.content.pm.IPackageDataObserver
{
private static final java.lang.String DESCRIPTOR = "android.content.pm.IPackageDataObserver";
/** Construct the stub at attach it to the interface. */
public Stub()
{
this.attachInterface(this, DESCRIPTOR);
}
/**
 * Cast an IBinder object into an android.content.pm.IPackageDataObserver interface,
 * generating a proxy if needed.
 */
public static android.content.pm.IPackageDataObserver asInterface(android.os.IBinder obj)
{
if ((obj==null)) {
return null;
}
android.os.IInterface iin = (android.os.IInterface)obj.queryLocalInterface(DESCRIPTOR);
if (((iin!=null)&&(iin instanceof android.content.pm.IPackageDataObserver))) {
return ((android.content.pm.IPackageDataObserver)iin);
}
return new android.content.pm.IPackageDataObserver.Stub.Proxy(obj);
}
public android.os.IBinder asBinder()
{
return this;
}
@Override public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException
{
switch (code)
{
case INTERFACE_TRANSACTION:
{
reply.writeString(DESCRIPTOR);
return true;
}
case TRANSACTION_onRemoveCompleted:
{
data.enforceInterface(DESCRIPTOR);
java.lang.String _arg0;
_arg0 = data.readString();
boolean _arg1;
_arg1 = (0!=data.readInt());
this.onRemoveCompleted(_arg0, _arg1);
return true;
}
}
return super.onTransact(code, data, reply, flags);
}
private static class Proxy implements android.content.pm.IPackageDataObserver
{
private android.os.IBinder mRemote;
Proxy(android.os.IBinder remote)
{
mRemote = remote;
}
public android.os.IBinder asBinder()
{
return mRemote;
}
public java.lang.String getInterfaceDescriptor()
{
return DESCRIPTOR;
}
public void onRemoveCompleted(java.lang.String packageName, boolean succeeded) throws android.os.RemoteException
{
android.os.Parcel _data = android.os.Parcel.obtain();
try {
_data.writeInterfaceToken(DESCRIPTOR);
_data.writeString(packageName);
_data.writeInt(((succeeded)?(1):(0)));
mRemote.transact(Stub.TRANSACTION_onRemoveCompleted, _data, null, android.os.IBinder.FLAG_ONEWAY);
}
finally {
_data.recycle();
}
}
}
static final int TRANSACTION_onRemoveCompleted = (android.os.IBinder.FIRST_CALL_TRANSACTION + 0);
}
public void onRemoveCompleted(java.lang.String packageName, boolean succeeded) throws android.os.RemoteException;
} 
```

罗尔夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T18:05:21.013

这个问题有 1 年，但我喜欢用一些有用的信息来完成它，其他解决方案是添加到您的项目中的 lib layoutlib.jar，它位于 plaform//data 中并按提供的方式编译（这不包括在您的二进制文件中），在这样你的项目就可以解决依赖关系，因为这个类不在公共 sdk 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:20:19.837

我认为问题是`IPackageDataObserver`原始`AIDL`文件，因此它在运行时在`gen`文件夹而不是`src`文件夹中生成。所以解决方案是添加`IPackageDataObserver.aidl`到您的项目中，并记住保持此文件是最新的。您可以获得[IPackageDataObserver](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/pm/IPackageDataObserver.aidl)的内容。

```
/*
**
** Copyright 2007, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
** http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/

package android.content.pm;

/**
 * API for package data change related callbacks from the Package Manager.
 * Some usage scenarios include deletion of cache directory, generate
 * statistics related to code, data, cache usage(TODO)
 * {@hide}
 */
oneway interface IPackageDataObserver {
    void onRemoveCompleted(in String packageName, boolean succeeded);
} 
```

另一个类似的SO[问题](https://stackoverflow.com/q/9971524/1050058)

# python - Python：使用存储在 CSV 中的正则表达式

> ID：12933374
> 
> 赞同：0
> 
> 时间：2012-10-17T11:34:25.350
> 
> 标签：python, regex, csv

我只是在测试一个小的 python 脚本，我将在更大的脚本中使用它的一部分。基本上我正在尝试在 CSV 文件中查找一个字段（其中包含一个正则表达式），并在正则表达式测试中使用它。原因是（一个非常奇怪的用例的一部分）并且可以更轻松地维护 CSV 文件而不是脚本。以下是我缺少的东西....

测试.csv：

```
field0,field1,field2
foo,bar,"\d+\.\d+"
bar,foo,"\w+" 
```

test.py （额外`print`用于测试）：

```
import sys
import re
import csv

input = sys.argv[1]
print input

reader = csv.reader(open('test.csv','rb'), delimiter=',', quotechar="\"")
for row in reader:
        print row
        value = row[0]
        print value
        if value in input:
                regex = row[2]
                print regex

                pat = re.compile(regex)
                test = re.match(pat,input)
                out = test.group(1)
                print out 
```

如果我将像 " `foo blah 38902462986.328946239846`" 这样的值传递给脚本，我希望它能够获取它包含的内容`foo`，然后使用正则表达式`\d+\.\d+`, 来提取`38902462986.328946239846`. 但是，当我运行脚本时，我得到以下信息：

```
foo blah 0920390239.90239029
['field0', 'field1', 'field2']
field0
['foo', 'bar', '\\d+\\.\\d+']
foo
\d+\.\d+
Traceback (most recent call last):
  File "reg.py", line 19, in <module>
    out = test.group(1)
AttributeError: 'NoneType' object has no attribute 'group' 
```

不知道到底发生了什么。

PS Python 是一个很大的世界，***还在***学习中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:48:25.403

根据`re.match`输入字符串开头的文档匹配。你需要使用`re.search`. 此外，如果您以后不重用它们，则无需编译。就说吧`test = re.search(regex, input)`。

在您示例的正则表达式中，您没有任何捕获组，因此`test.group(1)`即使`input`.

```
import sys
import re
import csv

input = 'foo blah 38902462986.328946239846'

reader = csv.reader(open('test.csv','rb'), delimiter=',', quotechar="\"")
for row in reader:
    value = row[0]
    if value in input:
        regex = row[2]
        test = re.search(regex, input)
        print input[test.start():test.end()] 
```

印刷：

```
38902462986.328946239846 
```

# c# - 如何在 WP7 中更改 VisualState

> ID：12933377
> 
> 赞同：7
> 
> 时间：2012-10-17T11:34:29.667
> 
> 标签：c#, windows-phone-7, visualstatemanager

我在 Expression Blend 中定义了以下两种状态。我一直在尝试遵循[本](http://dotneteers.net/blogs/vbandi/archive/2011/03/08/handling-wp7-orientation-changes-via-visual-states.aspx)指南，但当我需要有关如何以及何时更改状态的信息时，我觉得它让我束手无策。

![在此处输入图像描述](../Images/e726dbb438cc92b07bdb77a7dc725809.png)

根据指南，我要将行为（我假设“GotoState”）附加到我的`UserControl`- 不幸的是我认为我实际上没有`User Control`- 即使我这样做了，我是否必须将行为附加到 my`PortraitState`和 my `LandscapeState`？

看来我可以将 a 附加`GotoState`到我的`LayoutRoot`元素上。那么我是否将我的行为与这两个州的行为联系起来？任何帮助将不胜感激。

*编辑：我在我的 xaml.cs 文件中玩耍，并认为这可能是以编程方式进行的方式。在调试和更改方向时，我进入我的开关盒并找到正确的方向。但是，状态永远不会切换。我究竟做错了什么？

```
 protected override void OnOrientationChanged(OrientationChangedEventArgs e)
    {
        switch (e.Orientation)
        {
            case PageOrientation.Landscape:
                ExtendedVisualStateManager.GoToElementState(root:this.LayoutRoot, stateName: "LandscapeState", useTransitions: true);
                break;
            case PageOrientation.LandscapeRight:
                ExtendedVisualStateManager.GoToElementState(root:this.LayoutRoot, stateName: "LandscapeState", useTransitions: true);
                break;
            case PageOrientation.LandscapeLeft:
                ExtendedVisualStateManager.GoToElementState(root:LayoutRoot, stateName: "LandscapeState", useTransitions: true);
                break;
            case PageOrientation.Portrait:
                ExtendedVisualStateManager.GoToElementState(root:this.LayoutRoot, stateName: "PortraitState", useTransitions: true);
                break;
            case PageOrientation.PortraitUp:
                ExtendedVisualStateManager.GoToElementState(root:this.LayoutRoot, stateName: "PortraitState", useTransitions: true);
                break;
            case PageOrientation.PortraitDown:
                ExtendedVisualStateManager.GoToElementState(root:this.LayoutRoot, stateName: "PortraitState", useTransitions: true);
                break;
            default:
                break;
        }
    } 
```

编辑2：尝试上述操作时，似乎 GotoElementState 返回 false，并且根据 MSDN：“如果控件成功转换到新状态，则返回 true；否则返回 false。”

现在我有一个问题：什么会导致我的状态转换失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:12:40.867

像这样更改 WP7 中的 VisualState：

 **```
 switch (e.Orientation)
    {
        case PageOrientation.Landscape:

           VisualStateManager.GoToState(this, "LandscapeState", true);

            break;

        case PageOrientation.Portrait:

            VisualStateManager.GoToElementState(this,"PortraitState", true);

            break;

       default:

            break;
    } 
```*  ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:16:22.967

通过执行以下操作，我设法找到了解决我自己问题的方法。

事实证明，目前使用 ExtendedVisualStateManager.GotoElementState(UIElement, String, bool) 并不能很好地工作，所以我不得不寻找一种使用 VisualStateManager.GotoState 的方法。

我通过简单地将我的 LayoutRoot 包装在 UserControl 中解决了我的问题：

```
<UserControl x:Name="userControl">
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <VisualStateManager.VisualStateGroups>
    ...
</UserControl> 
```

切换状态现在只是一个调用 VisualStateManager.GotoState 的问题，就像我最初尝试做的那样。

```
 protected override void OnOrientationChanged(OrientationChangedEventArgs e)
    {
        base.OnOrientationChanged(e);

        switch (e.Orientation)
        {
            case PageOrientation.Landscape:
            case PageOrientation.LandscapeRight:
            case PageOrientation.LandscapeLeft:
                VisualStateManager.GoToState(control: userControl,
                                                        stateName: "LandscapeState", 
                                                        useTransitions: true);
                break;
            case PageOrientation.Portrait:
            case PageOrientation.PortraitUp:
            case PageOrientation.PortraitDown:
                VisualStateManager.GoToState(control: userControl,
                                                        stateName: "PortraitState", 
                                                        useTransitions: true);
                break;
            default:
                VisualStateManager.GoToState(control: userControl,
                                    stateName: "PortraitState",
                                    useTransitions: true);
                break;
        }
    } 
```**

# php - 提交表单时出现空查询错误

> ID：12933379
> 
> 赞同：0
> 
> 时间：2012-10-17T11:34:32.230
> 
> 标签：php, sql, mysqli

抱歉，这是一个重复的问题，但由于某种原因，我无法对收到的答案发表任何评论，并且该问题尚未得到解答。

当我的表单被提交（通过 Ajax）时，我收到以下错误消息：

> **PHP 警告：** `mysqli_query()` [function.mysqli-query]：第 32 行 /home1/xenongro/public_html/testing/enrolment/thanks.php 中的空查询

我怀疑这与 if/else 语句有关，但不确定实际问题是什么。作为测试，我删除了 if/else 语句并成功地从表单中提交了一些值。不幸的是，当我使它成为条件时，它出现了上述错误。

任何人都可以帮忙吗？

```
<?php

$firstname = htmlspecialchars(trim($_POST['fname']));
$lastname = htmlspecialchars(trim($_POST['lname']));
$worktel = htmlspecialchars(trim($_POST['worktel']));
$funding = htmlspecialchars(trim($_POST['funding']));
$level = htmlspecialchars(trim($_POST['level']));

$dbc = mysqli_connect('localhost', 'xxxxx', '<xxxx>', 'xxxx')
or die ('Could not connect to MySQL server.');

if ($level != "IOSH Managing Safely"){
    if ($funding == "Self Funding"){
        $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
        "VALUES ('$firstname', '$lastname', '$worktel')";
    }
    else if ($funding == "Employer Funding"){
        $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
        "VALUES ('$firstname', '$lastname', '$worktel')";
    }
}
else if ($level == "IOSH Managing Safely"){
    if ($funding == "Self Funding"){
        $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
        "VALUES ('$firstname', '$lastname', '$worktel')";
    }
    else if ($funding == "Employer Funding"){
        $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
        "VALUES ('$firstname', '$lastname', '$worktel')";
    }
}

$result = mysqli_query($dbc, $query)
or die ('error querying database');
mysqli_close($dbc);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:38:38.327

当您使用 else if 在 else if 块内执行查询并在注释中恢复时

```
$result = mysqli_query($dbc, $query) //Inside the else if block 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:45:51.030

如果`$funding`不等于“Self Funding”和“Employer Funding”，`$query`将为空。
否则`$query`不能为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:40:57.987

如果您通过 ajax 发布并使用 jquery，您应该首先像这样提交，否则它不会将任何 post 值带到 ajax url

```
$.ajax ({
        type:'post',
        url:"domainPath",
        success: function(response) {
            if(!response.trim()) { .... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:51:33.637

试试这个解决方案（在 $ErrorsRow 中，您可以标记所有表单错误）：

```
if(isset($_POST['submit_button'])){
    $Data = $_POST;
    foreach ($Data as $key => $value) {
        if(!empty($value)) {
            $DataRow[$key] = htmlspecialchars(trim($value));
        } else {
            $ErrorsRow[] = 'Empty field '. $key;
        }
    }

    if($DataRow && !isset($ErrorsRow)){
        $firstname = $DataRow['fname'];
        $lastname  = $DataRow['lname'];
        $worktel   = $DataRow['worktel'];
        $funding   = $DataRow['funding'];
        $level     = $DataRow['level'];

    $dbc = mysqli_connect('localhost', 'xxxxx', '<xxxx>', 'xxxx')
    or die ('Could not connect to MySQL server.');

    if ($level != "IOSH Managing Safely"){
     if ($funding == "Self Funding"){
      $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
    "VALUES ('$firstname', '$lastname', '$worktel')";
    }
    else if ($funding == "Employer Funding"){
    $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
    "VALUES ('$firstname', '$lastname', '$worktel')";
    }
    }
    else if ($level == "IOSH Managing Safely"){
    if ($funding == "Self Funding"){
    $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
    "VALUES ('$firstname', '$lastname', '$worktel')";
    }
    else if ($funding == "Employer Funding"){
    $query = "INSERT INTO enrolments (fname, lname, worktel)" . 
    "VALUES ('$firstname', '$lastname', '$worktel')";
        }
        }
    if(isset($query)) {
        $result = mysqli_query($dbc, $query) or die ('error querying database');
        mysqli_close($dbc);
    }

    } else {
        if(isset($ErrorsRow) && !empty(implode($ErrorsRow))){
            $Errors = implode(',', $ErrorsRow);
            echo 'some error message'. $Errors; 
        }

    } 
} 
```

# vb.net - VB 访问动态创建的文本框

> ID：12933380
> 
> 赞同：2
> 
> 时间：2012-10-17T11:34:36.467
> 
> 标签：vb.net

我有一个 VB 表单，它在运行时动态创建 4 个组合框，分别称为 1、2、3 和 4。问题是当涉及到访问它们时，我阅读最好的方法是执行以下操作，但当然这根本不起作用，有什么想法吗？

谢谢，山姆。

```
Public Class Form1
Dim x As Integer
Dim y As Integer

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    x = 4
    y = 0
    Dim MyLocationX As Integer = 25
    Dim MyLocationY As Integer = 25
    Do While y <> x
        Dim DropDownlist As New ComboBox
        DropDownlist.Name = x
        DropDownlist.Location = New Point(MyLocationX, MyLocationY)
        Me.Controls.Add(DropDownlist)
        y = y + 1
        MyLocationY = MyLocationY + 30
    Loop
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim z as Integer = 0
    Do While z <> x
    Dim z As New ComboBox
    MsgBox(z.SelectedValue)
    z++
    Loop

End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:34:49.427

您还可以使用[Controls.Find](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find.aspx)方法在 Forms ControlCollection 中定位您的 ComboBox

```
Public Class Form1
    Dim maxDropDowns, y As Integer
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        maxDropDowns = 4
        y = 0
        Dim MyLocationX As Integer = 25
        Dim MyLocationY As Integer = 25
        Do While y < maxDropDowns
            Dim DropDownlist As New ComboBox
            DropDownlist.Name = (y + 1).ToString
            DropDownlist.Location = New Point(MyLocationX, MyLocationY)
            Me.Controls.Add(DropDownlist)
            y = y + 1
            MyLocationY = MyLocationY + 30
        Loop

    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Dim cntrls() As Control
        For z = 1 To maxDropDowns
            cntrls = Controls.Find(z.ToString, True)
            If cntrls.Count > 0 Then
                MsgBox(CType(cntrls(0), ComboBox).SelectedValue)
            End If
        Next
    End Sub
End Class 
```

* * *

或者您可以使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx#Y0)，您有许多不同的选项，这完全取决于您想要做什么，我的偏好是创建一个控件数组，分配公共事件处理程序并从发送者对象中提取启动事件的控件。

```
Public Class Form1
    Dim maxDropDowns, y As Integer
    Dim myControls As Dictionary(Of Integer, ComboBox) = New Dictionary(Of Integer, ComboBox)
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
        maxDropDowns = 25
        y = 0
        Dim MyLocationX As Integer = 25
        Dim MyLocationY As Integer = 25
        Do While y < maxDropDowns
            Dim DropDownlist As New ComboBox
            DropDownlist.Name = (y + 1).ToString
            DropDownlist.Location = New Point(MyLocationX, MyLocationY)
            myControls.Add(y, DropDownlist)
            Me.Controls.Add(DropDownlist)
            MyLocationY = MyLocationY + 30
            y = y + 1
        Loop
    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        For z = 0 To maxDropDowns - 1
            MsgBox(myControls(z).SelectedValue)
        Next
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:50:03.263

比我的第一个建议更强大一点：

```
 Public Class Form1
    Private _comboBoxes(3) As ComboBox

    Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Dim MyLocationX As Integer = 25
        Dim MyLocationY As Integer = 25

        For i As Integer = 1 To 4
            Dim DropDownlist As New ComboBox()

            DropDownlist.Name = i.ToString()
            DropDownlist.Location = New Point(MyLocationX, MyLocationY)

            _comboBoxes(i - 1) = DropDownlist

            Me.Controls.Add(DropDownlist)

            MyLocationY = MyLocationY + 30
        Next

    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        For i As Integer = 1 To 4
            MessageBox.Show(_comboBoxes(i - 1).SelectedValue)
        Next
    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:34:46.220

我会用 AddHandler 做不同的事情。因为这样你就可以避免有一个按钮来收集值。只需有一个包含所有值的列表，如果发生更改，请更改列表中的值。如果您仍然想要我在代码末尾添加的按钮

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
x = 4
y = 0
Dim MyLocationX As Integer = 25
Dim MyLocationY As Integer = 25
Do While y <> x
    Dim DropDownlist As New ComboBox
    DropDownlist.Name = x
    DropDownlist.Location = New Point(MyLocationX, MyLocationY)
    '------
    AddHandler DropDownlist.SelectedIndexChanged, AddressOf controlValueChanged
    '-------
    Me.Controls.Add(DropDownlist)
    y = y + 1
    MyLocationY = MyLocationY + 30
Loop
End Sub

  Private Sub controlValueChanged(sender As System.Object, e As System.EventArgs)
   'This event is fired when you change the selection in one of your comboboxes
   Dim cbo As combobox= sender 'Sender is the combobox that you change its selection
   'Do whatever you like with cbo

  End Sub 
```

不要忘记清除自定义事件（非托管内存）

```
 Private Sub removeControlValueChangedEvents()
    'Call that Sub when your form is closed
       For each cbo as combobox in Me.Controls
          RemoveHandler DirectCast(cbo , ComboBOx).SelectedIndexChanged, AddressOf controlValueChanged
       Next

   End Sub

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    For each cbo as combobox in Me.Controls
        MessageBox.Show(cbo.SelectedValue)
    Next
   End Sub 
```

# spring - 如何解决无法初始化类org.springframework.web.context.ContextLoader？

> ID：12933389
> 
> 赞同：0
> 
> 时间：2012-10-17T11:34:58.323
> 
> 标签：spring, struts2

我想将 struts2 与 spring 集成。所以我在我的 web-inf/classes 文件夹中使用以下代码。

应用程序上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
    <beans>
     <bean id="helloWorldClass" class="com.test.spring.HelloWorld" >
          <property name="message" value="Hello World!" />
     </bean>
     </beans> 
```

struts.xml

```
 <!DOCTYPE struts PUBLIC 
         "-//Apache Software Foundation//DTD Struts Configuration  2.0//EN"
         "http://struts.apache.org/dtds/struts-2.0.dtd">
    <struts>    
    <struts-config>
    <!-- Spring Struts plugin -->
<plug-in className="org.springframework.web.struts.ContextLoaderPlugIn">
    <set-property property="contextConfigLocation"
        value="/WEB-INF/classes/applicationContext.xml" />
</plug-in>
    </struts-config>
    <constant name="struts.devMode" value="false" />
    <constant name="struts.objectFactory" value="spring" />
    <package name="default" extends="struts-default">
    <action name="helloWorld" class="helloWorldClass">
        <result name="SUCCESS">/success.jsp</result>
    </action>
    </package>
    </struts> 
```

我已经使用了这些文件和一个类，即 helloWorld，包为 com.test.spring。类中仅包含变量消息的 getter/setter 方法。

pom.xml 文件中的内容：

```
 <repositories>
    <repository>
        <id>jboss-snapshots</id>
        <url>http://snapshots.jboss.org/maven2</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>opensymphony-releases</id>
        <name>Opensymphony Releases</name>
<url>https://oss.sonatype.org/content/repositories/opensymphony-releases</url>
    </repository>
    <repository>
        <id>mvn-adamgent</id>
        <url>http://mvn-adamgent.googlecode.com/svn/maven/release</url>
        <name>Adam Gent Maven Repository</name>
    </repository>

    <repository>
        <id>maven2-repository.dev.java.net</id>
        <name>Java.net Repository for Maven</name>
        <url>http://download.java.net/maven/2/</url>
        <layout>default</layout>
    </repository>

     <repository>
    <id>springsource-milestones</id>
    <name>SpringSource Milestones Proxy</name>
    <url>https://oss.sonatype.org/content/repositories/springsource-milestones</url>
     </repository>      
</repositories> 
     <dependencies>
      <dependency>
         <groupId>junit</groupId>
          <artifactId>junit</artifactId>
           <version>3.8.1</version>
          <scope>test</scope>
       </dependency>    
        <dependency>
      <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.2.1</version>
        </dependency>   
        <dependency>
          <groupId>org.apache.commons</groupId>
      <artifactId>commons-io</artifactId>
      <version>1.3.2</version>
    </dependency>   
        <dependency>
       <groupId>commons-logging</groupId>
 <artifactId>commons-logging</artifactId>
<version>1.1.1</version>
</dependency>   
    <dependency>
<groupId>org.freemarker</groupId>
<artifactId>freemarker</artifactId>
<version>2.3.13</version>
   </dependency>            
   <dependency>
<groupId>opensymphony</groupId>
<artifactId>ognl</artifactId>
<version>2.6.11</version>
   </dependency>            
    <dependency>
<groupId>org.apache.struts</groupId>
<artifactId>struts2-convention-plugin</artifactId>
<version>2.1.6</version>
   </dependency>           
<dependency>
<groupId>org.apache.struts</groupId>
<artifactId>struts2-core</artifactId>
<version>2.1.6</version>
  </dependency>            
<dependency>
<groupId>com.opensymphony</groupId>
<artifactId>xwork</artifactId>
<version>2.1.2</version>
   </dependency>            
<dependency>
<groupId>org.apache.struts</groupId>
<artifactId>struts2-spring-plugin</artifactId>
<version>2.1.6</version>
 </dependency>            
<dependency>
<groupId>org.antlr</groupId>
<artifactId>antlr-runtime</artifactId>
<version>3.1.3</version>
  </dependency>          
<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-context</artifactId>
<version>3.0.5.RELEASE</version>
  </dependency>                
<dependency>
<groupId>org.springframework</groupId>
<artifactId>spring-core</artifactId>
<version>3.0.5.RELEASE</version>
 </dependency>            
<!-- Spring framework --> 
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring</artifactId>
    <version>2.5.6</version>
</dependency> 
    <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>2.5.6</version>
</dependency> 
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-struts</artifactId>
    <version>2.0.8</version>
</dependency>
     <dependency>
         <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
         <version>2.5.6</version>
       </dependency>
      </dependencies>
    <build>
        <finalName>testspring</finalName>
       </build>
    </project> 
```

通过使用这个文件，我已经在目标的 web-inf/lib 文件夹中下载了 jar 文件。

当我在 glassfish 服务器上上传这个战争文件时，它显示以下错误消息。

**部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException：ContainerBase.addChild：开始：org.apache.catalina.LifecycleException：java.lang.NoClassDefFoundError：无法初始化类org.springframework.web.context.ContextLoader . 有关详细信息，请参阅 server.log。**

谁能帮我解决这个错误以及如何将struts2与spring集成。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:21:33.933

ContextLoaderPlugin is used with Struts 1\. From the DOCTYPE in your struts.xml you're using Struts 2\.

See here:

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/web-integration.html#struts](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/web-integration.html#struts)

For Struts 2 you should use the Struts2-Spring plugin.

# javascript - 如何通过 Javascript 或 RoR 中的 id 获取其他字段值？

> ID：12933392
> 
> 赞同：-2
> 
> 时间：2012-10-17T11:35:03.543
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

在数据库中，我有一个名为`Questions`. 它有`four columns`喜欢

```
Id, Question_text, Question_type, Answer_table 
```

用户只能选择`id`和`question_text`。我能够得到`Id`和`question_text`价值。我需要从中`Question_type`获得`Answer_table`价值`Id`。

例如，

如果用户选择`question_text = 'City'`with `Id = 5`。

我想要this的其他列的`question_type`值。存储在单独的变量中。`Answer_table``params``id`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:41:09.653

通过使用ruby on rails中的Map方法通过关联获取其他列的值得到它。谢谢！！

# json - Jackson 将 "" 反序列化为空列表

> ID：12933394
> 
> 赞同：5
> 
> 时间：2012-10-17T11:35:08.970
> 
> 标签：json, spring, jackson, deserialization

我有一个 JSON 字符串，它将空列表标记为`""`而不是`[]`. 例如，如果我有一个没有孩子的对象，我会收到这样的字符串：

```
{"id":13, "children":""} 
```

我想将其反序列化为 Parent 类，并将孩子正确设置为空的孩子列表。

```
public class Parent {

    private Long id;
    private List<Child> children;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public List<Child> getChildren() {
        return children;
    }

    public void setChildren(List<Child> children) {
        this.children = children;
    }
} 
```

对于上面的 JSON 字符串，我想要一个将其设置为 的对象，并将`id`其`13`设置`children`为`new ArrayList<Child>()`

```
Parent
    id <- 13
    children <- new ArrayList<Child>() 
```

我会知道如何为整个班级使用注释

```
@JsonDeserialize(using = ParentDeserializer.class)
public class Parent { 
    ...
} 
```

进而

```
public class ParentDeserializer extends JsonDeserializer<Parent> {
    public Parent deserialize(JsonParser parser, DeserializationContext context) {
        ...    
    }
} 
```

但是，我想解决从`""`字符串正确实例化列表的一般问题：

```
public class Parent {
    ...
    // Can I get something like this?
    @JsonDeserialize(using = EmptyArrayDeserializer<Child>.class) 
    public void setChildren(List<Child> children) {
        this.children = children;
    }
} 
```

我能得到这样的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:26:49.190

几个选项；首先，您要启用“ACCEPT_EMPTY_STRING_AS_NULL_OBJECT”：

```
mapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT); 
```

使空字符串变为空。如果您希望它转换为实际的空列表，请覆盖 setter：

```
public void setChildren(List<Child> c) {
    if (c == null) {
       children = Collections.emptyList();
    } else {
       chidlren = c;
    }
} 
```

# iphone - 在 iOS 上将消息从后台线程发送到主线程

> ID：12933397
> 
> 赞同：5
> 
> 时间：2012-10-17T11:35:13.090
> 
> 标签：iphone, objective-c, ios, xcode, multithreading

我有一个 iOS 应用程序，我正在其中完成后台线程上的任务。随着每个任务的完成，我想向主线程发送一条消息，这样我就可以沿着我的自定义进度条移动到适当的阶段。

实现这一目标的最简单但最安全的方法是什么？

**编辑 1**

这是我正在使用的方法：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
                                         (unsigned long)NULL), ^(void) {

     // get background tasks done. 
     [self.background backgroundMethod];

}); 
```

**编辑 2**

这是我尝试使用@Madboy 的答案的示例。在我在后台执行方法的类中，我有一个指向我的进度条的指针。我们认为这行得通吗？**（请注意对 EDIT 1 的更改）。**

```
@implementation BackgroundClass
@synthesize delegate;
@synthesize customProgressBar

- (void)backgroundMethod
{
    // Run tasks
}

- (void)delegateSaysBackgroundMethodIsFinished
{
    [self performSelectorOnMainThread:@selector(tasksDone:) withObject:self.customProgressBar waitUntilDone:NO];

}

@implementation CustomProgressBar

- (void)tasksDone
{
    // change UI to reflect progress done. 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T11:41:42.513

这取决于你在做什么。您是否使用 GCD 在后台执行任务？然后你可以简单地调用：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //your main thread task here
}); 
```

如果你在 NSThread 中运行，你可以这样做：

```
[myObject performSelectorOnMainThread:YOURSELECTOR withObject:YOUROBJECT waitUntilDone:NO]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T11:41:18.843

您可以使用[NSObject](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)`performSelectorOnMainThread:withObject:waitUntilDone:`的方法。

waitUntilDone 参数是一个布尔值。您可以通过 YES 让您的后台线程等待，直到主线程上的方法完成。您可以传递 NO 来触发该方法并继续在后台线程上与主线程同时执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:40:40.233

`NSNotificationCenter`允许线程之间的消息传递。您设置了一个“侦听器”，然后可以广播通知 - Apple 文档非常好，而且很容易上手。

# mysql - CFSCRIPT 中的事务性能缓慢

> ID：12933399
> 
> 赞同：0
> 
> 时间：2012-10-17T11:35:33.413
> 
> 标签：mysql, coldfusion, coldfusion-9

我最近注意到我们的产品对于一些“短”邮政编码的邮政编码位置（纬度和长坐标）不正确 - 即“AB10”而不是“ABD 1PT”等。

邮政编码数据库/表用于在谷歌地图上生成图钉，我现在已经计算出，当我们将短邮政编码与完整邮政编码的表合并时，一些（大约 2200 年）被错误地输入了经度和纬度绕错路。

显然这是一个简单的修复，所以我决定编写一个小脚本来处理不正确的值（基本上交换它们）。

这是我所拥有的：

```
<cfscript>

  /** Fetch the wrong postcodes data **/
  db  = "postcodes";
  sql = "
    SELECT
      postcode, longitude, latitude
    FROM
      postcodes
    WHERE
      longitude > latitude
  ";
  q    = new Query(sql = trim(sql), datasource = db);
  data = q.execute().getResult();

  if (structKeyExists(form, "execute")) {
    if (isQuery(data) && data.recordCount > 0) {
      transaction action="begin" 
      { 
        try {
          qUpdate = new Query(
            datasource = db, 
            sql = "UPDATE postcodes SET longitude = :longitude, latitude = :latitude WHERE postcode = :postcode"
          );
          for (x = 1; x <= data.recordCount; x++) {
            writeOutput("<p>" & data["postcode"][x] & "</p>");

            qUpdate.addParam(name = "longitude", value = data["latitude"][x], cfsqltype = "CF_SQL_DOUBLE");
            qUpdate.addParam(name = "latitude", value  = data["longitude"][x], cfsqltype = "CF_SQL_DOUBLE");
            qUpdate.addParam(name = "postcode", value  = data["postcode"][x], cfsqltype = "CF_SQL_VARCHAR");

            qUpdate.execute();
            qUpdate.clearParams();
          }
          transactionCommit();
        } catch (any e) {
          transactionRollback();
          writeOutput("<p>The database transaction failed, rolling back changes</p>");
          writeDump(e);
        }
      }
      writeOutput("#data.recordCount# postcodes have been updated");  
    } else {
      writeOutput("There were no incorrect postcodes found in the database");
    }
  }
</cfscript>
<cfoutput>
  <form name="update" action="" method="post">
    <input type="hidden" name="execute" value="1"/>
    <input type="submit" name="update" value="Update #val(data.recordCount)# Postcodes"/>
  </form>
</cfoutput>

<!--- <cfdump var="#data#"/> ---> 
```

该脚本包含在事务中，因为我计划在实时服务器上运行它，但是在本地测试脚本后，它继续运行了一个多小时！

邮政编码数据库包含近 170 万条记录，只有三列全部正确索引`postcode, longitude, latitude`，第一个查询返回正确的 2,200 个结果。

我已经检查了 ColdFusion 管理员中的组件缓存设置，看看我的本地是否缺少它，但是它已打开！

所以我的问题 - 为什么这需要这么长时间才能执行？

我们正在使用 mysql 和 ACF 9。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:40:35.690

为什么要在 CF 中这样做？只需在 SQL 中完成所有操作，它会快得多。我不使用 mysql，但有点像这样：

```
UPDATE postcodes 
SET longitude = newlongitude,
latitude = newlatitude 
FROM (SELECT latitude AS newlongitude, longitude AS newlatitude FROM postcodes 
         WHERE longitude > latitude) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:24:54.640

执行需要这么长时间的原因可能是因为您在该位上循环了 2,200 次：

```
writeOutput("<p>" & data["postcode"][x] & "</p>");

qUpdate.addParam(name = "longitude", value = data["latitude"][x], cfsqltype = "CF_SQL_DOUBLE");
qUpdate.addParam(name = "latitude", value  = data["longitude"][x], cfsqltype = "CF_SQL_DOUBLE");
qUpdate.addParam(name = "postcode", value  = data["postcode"][x], cfsqltype = "CF_SQL_VARCHAR");

qUpdate.execute();
qUpdate.clearParams(); 
```

改用 SQL 解决这个问题，你就不会遇到这个问题。

# php - Windows IIS6.0 (PHP) 服务器不接受任何以 http 开头的 POST 或 GET 变量值：

> ID：12933401
> 
> 赞同：1
> 
> 时间：2012-10-17T11:35:38.320
> 
> 标签：php, variables, iis-6, global

我的一个客户 php 脚本/网络服务器遇到了一个奇怪的问题。它是 Windows IIS6。没有一个 PHP 脚本接受以 'http:' 开头的**POST/GET 变量值。**

让我通过一个例子来解释一下：假设一个名为 A.php 的文件有一个表单（POST 或 GET），其变量值为“http://www.google.com”。当通过单击提交按钮提交表单时，脚本只会卡住并且永远不会继续。只需等待几分钟即可超时。

但是，如果我在 'http:' 值之前插入一个或空格，它就可以工作。但是它不能通过支付网关服务工作。

PS：直到昨天，该脚本都运行良好。并且脚本没有任何变化。我也在另一台服务器上测试了同样的东西，它工作得很好。

任何帮助都会很棒！

# javascript - 是否可以在 youtube-api 中使用谦虚品牌？

> ID：12933402
> 
> 赞同：9
> 
> 时间：2012-10-17T11:35:41.623
> 
> 标签：javascript, youtube-api

我正在尝试使用 Youtube API 将视频加载到我的页面上。

Youtube 指定您可以通过将参数“&modestbranding=1”附加到嵌入网址来启用“适度品牌”（即删除 youtube 徽标）。

我遇到的问题是新的 youtube API 使用 javascript 嵌入视频，例如：

```
 player = new YT.Player('player', {
    height: videoHeight,
    width: videoWidth,
    videoId: videoID,        
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange
    }
  }); 
```

然后生成相关的 iframe 脚本，但是我希望能够在这些参数中指定适度的品牌。我尝试添加一个额外的参数：

```
modestbranding: 1 
```

和

```
modestbranding: '1' 
```

但似乎都没有任何效果。

我意识到一种选择是从最终呈现的脚本中获取嵌入 url，然后将参数附加到 src：

```
<iframe frameborder="0" allowfullscreen="" id="player" title="YouTube video player" height="368" width="640" src="http://www.youtube.com/embed/<id>?enablejsapi=1"></iframe> 
```

但是，我认为 youtube 会以某种方式允许指定参数，而不必使用一些肮脏的技巧。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T17:07:20.857

`modestbranding`是一个播放器变量，因此应该添加“playerVars”属性。详细信息可以在开发者文档中找到。 [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

这是一个关于如何包含`modestedbranding`或其他播放器变量的示例。

```
player = new YT.Player('player', {
  playerVars: {
    modestbranding: true
  },
  height: videoHeight,
  width: videoWidth,
  videoId: videoID,        
  events: {
    'onReady': onPlayerReady,
    'onStateChange': onPlayerStateChange
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-20T16:22:11.723

经过一些测试

如果您将 showinfo 设置为 0，那么即使 modebranding 为 true，您也会获得 youtube 徽标。

似乎没有办法让视频完全清晰。

这将显示徽标但不显示标题

```
 Youtubeplayer = new YT.Player('ytplayer', 
    {
        height: "100%",
        width: '100%',
        videoId: videoid,
        playerVars: {
            autoplay: 1, controls: 0, modestbranding: true, showinfo: 1
        },
        events: 
        {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    }); 
```

这将显示标题但不显示徽标

```
 Youtubeplayer = new YT.Player('ytplayer', 
    {
        height: "100%",
        width: '100%',
        videoId: videoid,
        playerVars: {
            autoplay: 1, controls: 0, modestbranding: true, showinfo: 0
        },
        events: 
        {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
        }
    }); 
```

# php - 从 Smarty 阵列显示

> ID：12933404
> 
> 赞同：0
> 
> 时间：2012-10-17T11:35:45.497
> 
> 标签：php, multidimensional-array, foreach, smarty

我在 smarty 中关注数组类型。

```
[Main_array] => Array
(
    [splitlist] => 1
    [counter] => 2
    [listNames] => Array
        (
            [0] => Material
            [1] => Color
        )

    [splittedLists] => Array
        (
            [Material_item_1] => Array
                (
                    [White] => Array
                        ( 
                            [image] => /img/thumbnail.gif
                            [imageLink] => /static/white.html
                        )

                    [Black] => Array
                        (

                            [image] => /img/no-image.gif
                            [imageLink] => /static/black.html
                        )
                )

            [Material_item_2] => Array
                (
                    [Red] => Array
                        (
                            [image] => /img/no-image.gif
                            [imageLink] => /static/Red.html
                        )

                    [Yellow] => Array
                        (
                            [image] => /img/no-image.gif
                            [imageLink] => /static/yellow.html
                        )

                )
        )
) 
```

我想关注这个数组的输出

```
*  Material
    -  Material_item_1
    -  Material_item_2
*  Color
    -  Nude
    -  Black
    -  Red
    -  Yellow 
```

到目前为止我所做的如下..

```
[{foreach from=$item2.listNames key=subKey1 item=subItem1 name=subLp1}]
   <h2>
       <label>[{$subItem1|replace:"-":" "}]</label>
   </h2>
   <ul style="margin-left:20px;display:block;">
      [{foreach from=$item2.splittedLists key=subKey2 item=subItem2 name=subLp2}]
         <li style="float:none;"><strong>[{$subKey2|replace:"-":" "}]</strong></li>
      [{/foreach}]
   </ul>
[{/foreach}] 
```

而且我越来越......

```
*  Material
    -   Material_item_1
    -   Material_item_1
    -   Material_item_2
    -   Material_item_2
*  Color
    -   Material_item_1
    -   Material_item_1
    -   Material_item_2
    -   Material_item_2 
```

我正在使用 PHP - OXID 和 Smarty。我应该在这里提到的一件事是元素`[splittedLists]`可能大于或小于 2。但也欢迎 2 元素的逻辑。

**更新：**我已经和客户谈过了，所以现在也欢迎任何关于结构变化的建议。请帮忙

**UPDATE2：**下面是 PHP 数组。

```
$arr = array(
    'Main_array' => array
    (
        'splitlist' => 1,
        'counter' => 2,
        'listNames' => array
        (
            '0' => "Material",
            '1' => "Color"
        ),
        'splittedLists' => array
        (
            'Material_item_1' => array
            (
                'White' => array
                ( 
                   'image' => "/img/thumbnail.gif",
                   'imageLink' => "/static/white.html"
                ),
                'Black' => array
                (
                   'image' => "/img/no-image.gif",
                   'imageLink' => "/static/black.html"
                 )
            ),

            'Material_item_2' => array
                (
                    'Red' => array
                        (
                            'image' => "/img/no-image.gif",
                            'imageLink' => "/static/Red.html"
                        ),

                    'Yellow' => array
                        (
                            'image' => "/img/no-image.gif",
                            'imageLink' => "/static/yellow.html"
                        )
                )
        )
)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-10T15:01:25.307

对于您在 Smarty 3.1.18 中使用 PHP 提供的数组，它应该如下所示：

```
{foreach $item2.listNames as $listType}
   <h2>
       <label>{$listType}</label>
   </h2>

   <ul style="margin-left:20px;display:block;">

      {if $listType eq 'Material'}
                {foreach $item2.splittedLists as $k => $v}
                    <li style="float:none;"><strong>{$k}</strong></li>
                {/foreach}
      {elseif $listType eq 'Color'}
               {foreach $item2.splittedLists as $k => $v}
                  {foreach $v as $colour => $versions}
                    <li style="float:none;"><strong>{$colour}</strong></li>
                  {/foreach}
               {/foreach}
      {/if}
   </ul>   
{/foreach} 
```

输出将是：

```
 Material

    Material_item_1
    Material_item_2

Color

    White
    Black
    Red
    Yellow 
```

（当然没有显示“Nude”，因为它不在数组中）

# xcode - 在 iphone 的 UItableview 中自动取消选择上一个选择的按钮

> ID：12933407
> 
> 赞同：0
> 
> 时间：2012-10-17T11:35:54.140
> 
> 标签：xcode, uitableview, uibutton

我有一个带有多个自定义按钮的表格视图。当我选择一个按钮时，该按钮应突出显示，如果我选择任何其他按钮，则前一个选择的按钮应自动取消突出显示，从而突出显示当前选择的按钮。我该怎么做....？

```
-(IBAction)buttonPressed:(UIButton *)sender {

 tempBtn.selected = NO;
    if (tempBtn != sender){
       tempBtn = sender;
        tempBtn.selected =YES;
       [ tempBtn setBackgroundColor:[UIColor redColor]];
    }
    else{
        tempBtn = nil;
    }
} 
```

我正在这样做，但是在这里我单击的所有按钮都更改为红色，而不是删除以前的选择颜色（红色）..我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:25:57.727

你是说如果它已经是红色的，它就会变红，但是如果按钮已经是红色的，你希望它变成另一种颜色/清除？好像您选择了多行？

```
tempBtn.selected = !tempBtn.selected;
if(tempBtn.selected)
{
   tempBtn.backgroundcolor = [UIColor redColor];
}
else
{
   tempBtn.backgroundcolor = [UIColor clearColor];
} 
```

编辑：由于轻微的问题改变

在您的按钮按下：

```
-(void)buttonPress:(id)sender
{
  //Change Color to Red
   if([myMutableArray count] > 0
    {
      UIButton* button = (UIButton *)[self.view viewWithTag:[myMutableArray objectAtIndex:0];
       button.setBackgroundColor = [UIColor clearColor];
       [myMutableArray removeAllObjects];
    }
    [myMutableArray addObject:[sender tag]];
} 
```

# business-process-management - 在集群环境中安装 BPM 10.3

> ID：12933408
> 
> 赞同：0
> 
> 时间：2012-10-17T11:35:58.323
> 
> 标签：business-process-management

我正在 Windows 机器上执行 BPM 10.3 的安装。我有两个 Windows 框，我需要在集群环境中运行 BPM。

我已经在我的第一个窗口框上安装了 weblogic 和 BPM 服务器，现在我很困惑是否要在第二个窗口框上安装 BPM 服务器。然后我将如何将数据库模式用于 BPM 引擎和目录服务（我在第一个盒子上安装 BPM 服务器时创建的）。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:30:24.303

您能否准确说明您正在使用的 BPMS ？根据您部署的解决方案，它可能会有所不同。

干杯

# java - 在 Enterprise Architect 中将 java 代码转换为序列图

> ID：12933415
> 
> 赞同：4
> 
> 时间：2012-10-17T11:36:14.780
> 
> 标签：java, eclipse, reverse-engineering, enterprise-architect

是否可以将 Java 代码转换为 Enterprisse Architect 中的序列图？如果是怎么办？

# html - 页脚不会到底部

> ID：12933418
> 
> 赞同：4
> 
> 时间：2012-10-17T11:36:26.877
> 
> 标签：html, wrapper, footer, jsfiddle

我需要一些快速帮助。我的页脚根本不会在站点的末尾出现。它在包装内等等。我根本找不到错误（长时间查看相同的代码）

我已将代码放入 Jsfiddle：http: [//jsfiddle.net/heNuB/](http://jsfiddle.net/heNuB/)

不要介意其他代码，我已经用 background-color:black; 标记了页脚。所以你可以看到页脚试图去哪里。它试图进入我的 3 个盒子的“后面”。

希望你们中的一些人有时间研究它。我知道这是一个小问题。

祝大家有美好的一天！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:39:28.847

在页脚之前放置一个清除 div，它应该到底部。

```
<div style="clear: both"></div> 
```

您的浮动框正在推过主包装器。

供参考：[http ://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:43:35.300

采用`clear: both;`

```
footer
{
    font-size:small;
    text-align:center;
    height:50px;
    background-color:black;
    clear: both;

} 
```

**演示**：http: [//jsfiddle.net/Sudjy/](http://jsfiddle.net/Sudjy/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T22:35:42.883

或者您可以只增加 margin-top 属性，这是我的代码：

```
 .footer {
background-color: #717164;
margin-top: 50px;  
border: 1px solid black;
float: left;
width:99%;
height: 10%;
position: fixed;
clear: both;
margin-top: 565px;
} 
```

.footer 是因为我给了我的页脚 div 一类页脚，以防你不知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:42:35.767

为什么不给页脚一个 margin-top 属性 .footer { margin-top: 50px; //或什么 } 它应该下降。

# selenium - Ember：使用 Selenium 在浏览器中进行集成测试的最佳实践

> ID：12933422
> 
> 赞同：1
> 
> 时间：2012-10-17T11:36:42.063
> 
> 标签：selenium, ember.js

您有任何使用 ember.js 进行 Selenium 测试的经验/示例吗？

我无法“获取”视图（我使用路由器），因为它们具有不确定的 ID。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:04:20.553

您可以为视图元素显式设置自己的 id。直接来自车把，例如：

```
{{#view Ember.TextField elementId="my_id"}} 
```

或从您的视图对象：

```
MyApp.MyView = Ember.View.Extend({
  elemntId: "my_id"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-05T14:24:13.477

[EmberJS](https://emberjs.com/)为属性生成/分配动态值`id`，例如 、、`ember32`等。在这些情况下，您将无法使用属性的完整值来定位/单击元素。例如，考虑以下元素：`ember33``ember34``id`

```
<input placeholder="" id="ember32" class="ssRegistrationField ssEmailTextboxField ember-text-field ember-view" type="email"> 
```

*每次您访问AUT(Application Under Test)*时，该属性的值`id`都会动态变化。因此，要交互/单击这些元素，解决方案是构造**动态**[定位器策略](https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890)，以诱导[WebDriverWait](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html)与[ExpectedConditions](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)结合，如下所示： ***`visibilityOfElementLocated()`***

 ****   `cssSelector`：

    ```
    new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.cssSelector("input.ssRegistrationField.ssEmailTextboxField.ember-text-field.ember-view[id^='ember']"))).click(); 
    ```

*   `xpath`：

    ```
    new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath("//input[starts-with(@id, 'ember') and @class='ssRegistrationField ssEmailTextboxField ember-text-field ember-view']"))).click(); 
    ```***

# checkbox - 取消选中访问复选框

> ID：12933423
> 
> 赞同：1
> 
> 时间：2012-10-17T11:36:47.807
> 
> 标签：checkbox, ms-access-2007

我在选项组中有 2 个复选框，“我练习”和“我想练习”。多亏了选项组，如果勾选了一个复选框，则未勾选另一个。

但是，我还希望能够通过再次单击复选框来取消选中它......但我不知道该怎么做。

如果有人有想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:28:47.080

由于您只有 2 个复选框，因此您可以分别将此子例程添加到每个复选框：

```
Private Sub Check1_MouseUp(Button As Integer, Shift As Integer, X As Single, Y As Single)

    If Not Frame0 = 0 Then Frame0 = 0

End Sub 
```

这假设帧被称为**Frame0**，但可以很容易地修改。

我很惊讶没有默认功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:38:17.780

添加第三个复选框：以上都不是，或者我不练习

# xml - XML标签中的最后一个元素？

> ID：12933430
> 
> 赞同：0
> 
> 时间：2012-10-17T11:37:24.647
> 
> 标签：xml

```
<Object ID="320">
  <Document Name="A" />
  <Document Name="B" />
  <Document Name="C" />
  <Document Name="D" />
  <book>1</book>
  <book>2</book>
  <book>8</book>
</Object> 
```

对于这个 XML 结构，我想达到名称的最后一个索引吗？

```
 Name="D" 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:41:13.543

如果您正在寻找 xslt：

```
<xsl:template match="Object">
    <xsl:value-of select="descendant::Document[last()]"/>
</xsl:template> 
```

# tomcat - servlet 中的 JOptionPane 不适用于 tomcat

> ID：12933435
> 
> 赞同：-2
> 
> 时间：2012-10-17T11:37:38.817
> 
> 标签：tomcat, joptionpane

我在我的 servlet 中使用**JOptionPane作为**

```
JoptionPane.showMessageDailog(null,"Request is submitted","Done",JOptionPane.INFORMATION_MESSAGE); 
```

向用户显示请求已提交。尝试在Netbeans IDE和eclipse IDE上运行但直接在tomcat 7.0.32版本服务器上部署war文件时不起作用，如果Joption不起作用如何解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:45:26.693

它在 IDE 中工作但不能直接在服务器中工作的原因是因为 IDE 安装了 swing 组件。服务器没有！

但是，您应该知道，即使您使它在服务器中工作，它也不会显示给最终用户，而是在服务器本身中显示（这对于在同一台机器上进行测试很好，但不是在部署应用程序时） . 它还将无限期地停止应用程序，直到您关闭该框。

Joptionpane 用于使用 Swing 制作的桌面应用程序。不是网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:46:04.347

您不能在 servlet 中使用 JOptionPane。所有 Package javax.swing 和 java.awt 都不能使用。

# c# - Fxcop 自定义规则未显示在 Fxcop GUI 中

> ID：12933439
> 
> 赞同：1
> 
> 时间：2012-10-17T11:38:11.813
> 
> 标签：c#, fxcop

我创建了 Fxcop 自定义规则并定义了 xml 文件。当我在 Fxcop GUI 中添加自定义规则程序集时，它没有显示规则。请在下面找到相关信息：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.FxCop.Sdk;

namespace TestCustomRules
{
    public class TestRule : BaseIntrospectionRule
    {
        public TestRule() : base("TestRule", "TestCustomRules.TestRules", typeof(TestRule).Assembly) { }

        public override ProblemCollection Check(Member member)
        {
            Problems.Add(new Problem(new Resolution("TEST Rule {0}", "Chill out")));
            return Problems;
        }
    }
} 
```

xml文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Rules FriendlyName="Test Rules">
  <Rule TypeName="TestRule" Category="TestRule" CheckId="TR1000">
    <Name>Test Rule</Name>
    <Description>Test Rule</Description>
    <Owner>Vibgy Joseph</Owner>
    <Url />
    <Resolution>This is just a test rule.</Resolution>
    <Email />
    <MessageLevel Certainty="99"> Warning</MessageLevel>
    <FixCategories> Breaking </FixCategories>
  </Rule>
</Rules> 
```

以下是我添加时在 Fxcop 中显示的信息。请注意，Total Children 为 0。

```
FxCop Rule Assembly c:\users\vibgy.j\documents\projects\01_common\testcustomrules\testcustomrules\bin\debug\testcustomrules.dll
{
    Checked              : True   (Boolean)
    Children             : Count == 1  (NodeBaseDictionaryCollection)
    Container            : Count == 10  (NodeBaseDictionary)
    DefaultCheckState    : True   (Boolean)
    DisplayName          : TestCustomRules.dll  (String)
    FileIdentifier       : C:\Users\vibgy.j\Documents\Projects\01_Common\TestCustomRules\TestCustomRules\bin\Debug\TestCustomRules.dll  (String)
    FileName             : C:\Users\vibgy.j\Documents\Projects\01_Common\TestCustomRules\TestCustomRules\bin\Debug\TestCustomRules.dll  (String)
    FullyQualifiedName   : C:\Users\vibgy.j\Documents\Projects\01_Common\TestCustomRules\TestCustomRules\bin\Debug\TestCustomRules.dll  (String)
    HasChildren          : True   (Boolean)
    HasMessages          : True   (Boolean)
    ImageIndex           : 1  (Int32)
    LoadExceptions       : Microsoft.FxCop.Common.ExceptionCollection  (ExceptionCollection)
    LocalFileName        : TestCustomRules.dll  (String)
    Messages             : Count == 0  (MessageStatusNodeBaseMessageDictionary)
    Metadata             : <null>  (Object)
    Name                 : c:\users\vibgy.j\documents\projects\01_common\testcustomrules\testcustomrules\bin\debug\testcustomrules.dll  (String)
    Rules                : Count == 0  (RuleDictionary)
    Status               : New  (NodeStatus)
    TotalChildren        : 0  (Int32)
    TotalChildrenChecked : 0  (Int32)
    Version              : 1.0.0.0  (String)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:42:38.580

哎呀！我错过了将 xml 文件的属性“构建操作”设置为“嵌入式资源”。现在它显示在 Fxcop 中。

# java - Android：如何在 listfragment 中获取视图

> ID：12933440
> 
> 赞同：1
> 
> 时间：2012-10-17T11:38:11.547
> 
> 标签：java, android, listview, android-listview, android-listfragment

嗨，我想使用此代码，它在 onclick 方法中工作，因为（查看 v）但是我如何在活动的其他地方使用此代码？

这是代码

```
 ListView list= getListView();
        int position = list.getPositionForView(v);
        switch (position) {
        case 1:
                ImageView arrow = (ImageView) getView().findViewById(R.id.arrow);
                arrow.setVisibility(View.VISIBLE);
            break;

        default:
            break;
        } 
```

**那么在这种情况下如何获取 View v 呢？**

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-29T18:39:00.043

我遇到过同样的问题。我不确定这种方式是否是最好的方式，但对我来说效果很好。创建所有视图后，创建监听 **器 onLayoutChangeListener**并将您想要为项目视图实现的逻辑放在您想要的特定位置。

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {

    setOnLayoutChangeListener(getListView());

    super.onViewCreated(view, savedInstanceState);
}

private void setOnLayoutChangeListener(final ListView listview) {
    if (listview != null) {
	listview.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {

	   @Override
	   public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {

	       changeFirstListItemView(listview);

	   }
       });
    }
}

private void changeFirstListItemView(final ListView listview) {
   if (listview != null) {
	try {
	   int listFirstPosition = 1;
	   View view = listview.getChildAt(listFirstPosition);

	   if (view != null) {
		   setHiddenViewVisible(view);
	   }

	} catch (Exception e) {
		// Print some debug info.
		String msg = "An error occurred while trying to set onFocusChange listener.";
		Log.e(TAG, msg, e);
	}
      }
   }

private void setHiddenButtonVisible(View listItem) {
    Button button = null;
	try {
	   buttonId = R.id.listButton;
	   button = (Button) listItem.findViewById(buttonId);
	} catch (Resources.NotFoundException nfe) {
           // Print some debug info.
	}

	if (button != null) {
	   button.setVisibility(View.VISIBLE);
           // Optional, add here button listener, or something else...
        }
}
```

# jakarta-ee - 可嵌入的，嵌入式的

> ID：12933441
> 
> 赞同：0
> 
> 时间：2012-10-17T11:38:14.337
> 
> 标签：jakarta-ee, jpa

我想实现嵌套一个标记为 Embeddable 的元素，该元素已经嵌入了元素：

```
@Embeddable
public class A implements Serializable {

private int a;
private int b;
}

@Embeddable
public class B implements Serializable {

@Embedded
protected A sum;
@Embedded
protected A value; 
```

... }

```
@Entity
public class C implements Serializable{
@Embedded
@AttributeOverrides({
    @AttributeOverride(name = "sum.a", column =
    @Column(name = "SUM_COL_A", precision = 12, scale = 2, nullable = false)),
    @AttributeOverride(name = "sum.b", column =
    @Column(name = "SUM_COL_B", precision = 12, scale = 2, nullable = false)),
    @AttributeOverride(name = "value.a", column =
    @Column(name = "VALUE_COL_A", precision = 12, scale = 2, nullable = false)),
    @AttributeOverride(name = "value.b", column =
    @Column(name = "VALUE_COL_B", precision = 12, scale = 2, nullable = false))
private B property;
})
} 
```

执行后，我创建了两列（VALUE_COL_A 和 VALUE_COL_B），前两列根本不存在。

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:10:36.627

您的代码看起来正确。这可能是您的持久性提供程序中的错误。检查您是否使用最新版本/补丁，或记录错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:15:31.720

我的理解是B属性是序列化的，没有子嵌入对象。所以应该只有一个列，其中包含 B 的所有内容。您将无法搜索嵌入 B 对象的任何属性，仅供参考。

# cordova - 如何在 jQuery Mobile 中设置主页？

> ID：12933443
> 
> 赞同：0
> 
> 时间：2012-10-17T11:38:17.517
> 
> 标签：cordova, jquery-mobile

> **可能重复：**
> [从以前的位置恢复 webapp？](https://stackoverflow.com/questions/12816286/resume-webapp-from-previous-position)

我希望用户回来时看到他们访问的最后一页。示例：用户加载我的应用程序（我正在使用 PhoneGap），点击#second_page，关闭应用程序，再次打开应用程序。而不是#home page，我想立即向他展示#second_page。

我正在使用 localStorage 来保存页面：

```
$(document).on('pagechange', function() {
    localStorage.setItem('lastPage',window.location.hash);
}); 
```

我试过这个：

```
$(document).bind("mobileinit", function(){
    var lastPage = localStorage.getItem('lastPage');
    if(lastPage) {
        $.mobile.changePage(lastPage);
    }
}); 
```

但我在 jquery.mobile-1.2.0.min.js:2 中收到“未捕获的类型错误：无法调用未定义的方法‘触发器’”错误。

另一个想法是按照以下方式做一些事情：

```
var redirectedToLastPage = false;
$(document).bind("pageinit", function(){
    var lastPage = localStorage.getItem('lastPage');
    if(lastPage && !redirectedToLastPage) {
        $.mobile.changePage(lastPage);
        redirectedToLastPage = true;
    }
}); 
```

但它似乎不是很优雅。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:21:17.047

我最终得到了这个解决方案：

```
$(document).on('pagechange', function() {
    var lastPage = '#'+$.mobile.activePage.attr('id');
    // console.log('setting last page to '+lastPage);
    localStorage.setItem('lastPage',lastPage);
});

var redirectedToLastPage = false;
$(document).bind("pagecreate", function(){
    var lastPage = localStorage.getItem('lastPage');
    if(lastPage // lastPage needs to be set
        && !redirectedToLastPage  // only do it on first pageload
        &&!window.location.hash // we don't want to redirect from pages other than the homepage
    ) {
        if($("div[data-role='page']"+lastPage).length) { // make sure a "page" div with that ID exists!
            // console.log('redirecting to '+lastPage);
            $.mobile.changePage(lastPage);
        } 
        // else {
        //  console.log(lastPage+' does not exist!');
        // }
    }
    redirectedToLastPage = true;
}); 
```

请随时指出我可能做错的任何事情:)

# css - Wordpress 为整个主题编辑 css

> ID：12933445
> 
> 赞同：1
> 
> 时间：2012-10-17T11:38:22.507
> 
> 标签：css, wordpress

我安装了 WordPress 多站点，并且所有相同的站点都使用一个主题。我更改了主站点的 css 文件，甚至希望更改安装在主站点下的所有其他站点，但没有任何变化。主站点正在更改，但其他站点未更改 如何使 css 适用于所有其他站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:23:30.940

一个站点会反映更改而其他站点不会反映更改是没有意义的，因为它们都使用相同的主题文件。

如果您使用的是缓存插件，请尝试在 WP 管理面板中清除它（在插件选项中，或者大多数流行的缓存插件只需一个选项即可在页面顶部的 WP 管理栏中清除缓存浏览它登录）。

如果这不是问题，请清除浏览器的缓存并在主题 css 未正确更新的站点上尝试刷新 (Ctrl+F5) 几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:16:06.063

添加 IMPORTANT 属性与您的更改，例如如果您要更改高度

然后像这样使用

高度：10px！重要；

可能这对你有用......

# java - 在无穷无尽的流中保持 n 个最大频率的数字

> ID：12933449
> 
> 赞同：0
> 
> 时间：2012-10-17T11:38:35.600
> 
> 标签：java, algorithm

给定**无穷无尽**的数字流（BigInteger），如何检测和存储具有**前 N 次出现（频率）的数字？**

内存有限（不能存储每个数字的计数器）。

**编辑：**

频率值不能超过大小`long`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T11:46:17.803

在您拥有所有数据（或大部分数据）之前，无法确定前 N 次出现

您可以通过计算它们出现的频率并按计数对它们进行排序来确定到目前为止的 N 次出现。如果您不能存储太多，这可能是一个问题，在这种情况下，您必须决定要做出哪些妥协来节省空间。

我认为`long`不够大。你在计算什么样的数据？

* * *

一个简单的例子，展示了你面临的问题。

假设您源源不断的帐户 ID 都是不同的。这意味着记录前 N 个的*唯一方法是将它们全部记录下来。*没有一些捷径，就没有其他可能的解决方案。

注意：这可能是您真正想要的衰减平均值，因此如果用户已经出现一段时间，您希望减轻他们的体重。您不希望顶级用户成为不再活跃的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:49:09.667

如果流是无穷无尽的，一些较低频率的数字会变得更加频繁。这意味着您必须更新所有数字的频率。

另一方面，由于没有限制 for `BigIntegers`，因此您有无限的存储需求：对于每个 number `n`，您必须至少存储一些信息（比方说一点）。如果内存是有限的`f`，那么还有另一个整数`m`使得`m * n > f`.

如果没有一些额外的限制，这个问题就无法解决。

## 编辑

正如您所指出的，您希望跟踪访问者数量。只计算过去一年或一个月的数据不是更容易吗？你只需要一个字典 (visitor,visits) 对。至于 BigIntegers - 您计划拥有超过 2^63-1 个用户吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:56:45.673

如果您可以假设分布是平稳的并且您接受近似结果，则可以根据流中的有限数字样本来估计结果。

# apache-fop - 用于 PDF 叠印的 Apache FOP

> ID：12933451
> 
> 赞同：0
> 
> 时间：2012-10-17T11:39:01.093
> 
> 标签：apache-fop

我有以下情况：

我有一个没有表单域的 PDF 文档。但是，PDF 文档有点像套用信函，其中的各个部分需要在确切的位置“叠印”。

这可以通过 FOP 和自定义 XSLT 样式表来完成吗？

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:52:05.170

使用有什么特殊要求`Apache FOP`吗？我对两者都进行了评估`FOP`，`apache PDFBox`发现`PDFBox`甚至更适合您的要求。

以下是 PDFBox 的一些有用链接 ： 用户指南： [http](http://pdfbox.apache.org/userguide/index.html)
: //pdfbox.apache.org/userguide/index.html一些功能的教程：http: [//www.printmyfolders.com/Home/PDFBox-Tutorial](http://www.printmyfolders.com/Home/PDFBox-Tutorial)

# c# - Ajax Control Toolkit 自动完成扩展器

> ID：12933452
> 
> 赞同：2
> 
> 时间：2012-10-17T11:39:05.697
> 
> 标签：c#, asp.net, .net, autocomplete, ajaxcontroltoolkit

我已经按照本指南（http://www.asp.net/ajaxlibrary/act_AutoComplete_simple.ashx）使用了自动完成扩展器，但是当我实施到我的大型项目时，我无法终生看到差异. 将扩展器嵌套在表格元素中是否有问题？

无论如何，我有自动完成扩展器从教程中调用一个哑巴方法只是为了开始。不使用网络服务，而只是一种方法（如指南中所示）。该页面使用母版页，是否已知会导致问题？这是标题

```
<%@ Page Title="Report" Language="C#" MasterPageFile="~/Doctors/MasterPage.master" AutoEventWireup="true" CodeFile="generateReport.aspx.cs" Inherits="Doctors_generateReport"
maintainScrollPositionOnPostBack="true" %>
<style>...</style>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
<asp:toolkitscriptmanager ID="ToolkitScriptManager1" runat="server" >
</asp:toolkitscriptmanager>
    <p class="headingStyle"><strong><em>Clinical Report</em></strong></p>
<table> 
```

和文本框：

```
<td class=logicalDivide>Current Medication:</td>
<td class=logicalDivide>
    <asp:TextBox ID="tbCMed" runat="server" CssClass="textbox" Width="178px" MaxLength="30" Font-Names="Calibri" onfocus="{ this.value = ''; }"></asp:TextBox>
    <asp:autocompleteextender
        ID="AutoCompleteExtender1" 
        runat="server"
        TargetControlID="tbCMed"
        ServiceMethod="GetCompletionList4" UseContextKey="True">
    </asp:autocompleteextender>
</td> 
```

以及背后的代码：

```
[WebMethod]
[ScriptMethod]
public static string[] GetCompletionList4(string prefixText, int count, string contextKey)
{
   // Create array of movies  
   string[] movies = { "Star Wars", "Star Trek", "Superman", "Memento", "Shrek", "Shrek II" };

   // Return matching movies  
   return movies.Where(m => m.StartsWith(prefixText, StringComparison.CurrentCultureIgnoreCase)
                .Take(count)
                .ToArray();
} 
```

编辑1：这个问题类似（http://stackoverflow.com/questions/791361/trying-to-get-a-simple-example-of-asp-net-ajax-dropdownlist-autocomplete-extende?rq=1）但就像演示一样，它可以独立运行，但不能在我的应用程序中运行。

因此，它们必须是 Masterpage 或 web.config 中改变工具包行为的一些设置。有任何想法吗 ？

编辑 2：我刚刚尝试将 ToolScriptManager 放在母版页中 - 没有骰子；和...添加

```
EnabledPageMethods="true" 
```

到 ToolScriptManager - 仍然没有骰子。

web.config 中的最后一个相关片段：

```
<pages>
  <controls>
    <add tagPrefix="asp" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit"/>
  </controls>
</pages>
<identity impersonate="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:03:41.220

我放弃了 Ajax Control Toolkit。这是一个 jQuery 解决方案（明显快于控制工具包......在它停止工作之前！！）：

```
<div class="ui-widget">

    <asp:TextBox ID="tbScripts" ClientIDMode="static" runat="server" CssClass="textbox" 
            Width="340px" MaxLength="20" Font-Names="Calibri"  onfocus="{ this.value = ''; }"
                ToolTip="add a medication/script to the managment plan"></asp:TextBox> 
```

```
 <script type="text/javascript" >
        PageMethods.GetMeds(function (results) {
            $('#tbScripts').autocomplete({
                source: results,
                minLength: 3
            });
        }); 
```

...以及背后的代码：

```
 [System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]
   public static string[] GetMeds()//prefixText)//string prefixText, int count, string contextKey)
   {
      /* ------ database query goes here ----------- */
      return results[];
   } 
```

并将这些放在 scriptManager 中：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="Stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T21:33:37.623

这是我的解决方案，我使用网络服务来调用自动完成功能。

假设您正确安装了 AjaxControlToolKit，请按照以下步骤操作

在母版页中

**1\. 在您的 .aspx 页面顶部添加以下行**

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %> 
```

**2\. 在form id="form1" runat="server" 后添加以下行**

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
   <Services>
      <asp:ServiceReference Path="~/AutoComplete.asmx" />
   </Services>
</asp:ToolkitScriptManager> 
```

**3\. 添加你的文本框和 AutoCompleteExtender**

```
<asp:TextBox ID="tbSearch" runat="server"></asp:TextBox>

<asp:AutoCompleteExtender 
                    TargetControlID="tbSearch"
                    ServicePath="AutoComplete.asmx"
                    ServiceMethod="GetCompletionList"
                    MinimumPrefixLength="3"
                    CompletionInterval="100"
                    CompletionSetCount="5"
                    EnableCaching="false"
                    CompletionListCssClass="CompletionList"
                    CompletionListItemCssClass="CompletionListItem"
                    CompletionListHighlightedItemCssClass="CompletionListHighlightedItem"
                    UseContextKey="True"
                    ID="AutoCompleteExtender1" 
                    runat="server"></asp:AutoCompleteExtender> 
```

**4\. 创建网络服务**

解决方案资源管理器 -> 右键单击​​ -> 添加新项目... -> Web 服务（我将其重新命名为 AutoComplete.asmx），然后按下按钮添加

在 Web 服务 AutoComplete.asmx 中

**5\. 打开 AutoComplete.vb 文件并取消注释以下行**

`'<System.Web.Script.Services.ScriptService()> _`

在 VB 中，此行默认为注释，并且需要允许从脚本调用 Web 服务，使用 ASP.NET AJAX

**6\. 添加你的 asp:AutoCompleteExtender ServiceMethod 调用 Public Function GetCompletionList**

```
<System.Web.Services.WebMethod()>
    <System.Web.Script.Services.ScriptMethodAttribute()>
    Public Function GetCompletionList(ByVal prefixText As String, ByVal count As Integer, ByVal contextKey As String) As String()
        ' Create array of movies
        Dim movies() As String = {"Star Wars", "Star Wars 1", "Star Wars 2", "Star Trek 3", "Star Wars", "Star Wars", "Superman", "Super woman", "Memento", "Shrek", "Shrek II"}

        ' Return matching movies
        Return (
            From m In movies
            Where m.StartsWith(prefixText, StringComparison.CurrentCultureIgnoreCase)
            Select m).Take(count).ToArray()

    End Function 
```

注意：照顾

```
<System.Web.Services.WebMethod()> 
```

和

```
<System.Web.Script.Services.ScriptMethodAttribute()> 
```

刷新您的网页并进行测试

我希望对您和未来的其他人有所帮助。

# ruby-on-rails - gmaps4rails detect_location 在刷新时跳转

> ID：12933460
> 
> 赞同：0
> 
> 时间：2012-10-17T11:39:33.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, geolocation, gmaps4rails

我在 Rails 3.1.3 应用程序中使用 gmaps4rails，我在 gmaps4rails.base.js.coffee 文件中设置了位置检测，如下所示；

```
@default_map_options =
  id: 'map'
  draggable: true
  detect_location: true  # should the browser attempt to use geolocation detection features of HTML5?
  center_on_user: true   # centers map on the location detected through the browser
  center_latitude: 0
  center_longitude: 0
  zoom: 7
  maxZoom: null
  minZoom: 10
  auto_adjust : true      # adjust the map to the markers if set to true
  auto_zoom: true         # zoom given by auto-adjust
  bounds: []              # adjust map to these limits. Should be [{"lat": , "lng": }]
  raw: {}                  # raw json to pass additional options 
```

这有一半的时间。我注意到当我按 F5 或 Ctrl+r 刷新浏览器时，它有时会将我置于 Broken Hill，而我应该在墨尔本（相差 840 公里）。

有时我看到它很快就去了布罗肯希尔，然后在装载时切换到墨尔本。以下是我安装的所有其他插件：

```
#= require gmaps4rails/gmaps4rails.base
#= require gmaps4rails/gmaps4rails.googlemaps
#= require jquery
#= require jquery_ujs
#= require jquery.ui.datepicker
#= require jquery-ui-timepicker-addon
#= require jquery.ui.autocomplete
#= require jquery.ui.slider
#= require jquery.flexslider
#= require jquery.ui.widget
#= require jquery.ui.mouse
#= require jquery.ui.touch-punch.min
#= require jQuery.BlackAndWhite
#= require form-accordion
#= require modernizr
#= require lovesjavascript
#= require jquery.tokeninput
#= require authentications
#= require inquiries
#= require registrations
#= require search
#= require tinymce-jquery
#= require jquery.sticky
#= require_self 
```

我只尝试了 gmaps4rails base & googlemaps，但仍然有问题。

# jsf - valueChangeListener 方法是否每次都创建一个新的 bean 实例？

> ID：12933461
> 
> 赞同：1
> 
> 时间：2012-10-17T11:39:34.303
> 
> 标签：jsf, managed-bean, valuechangelistener

我有一个`<p:selectOneMenu>`条目`String`和一个`valueChangeListener`关于它的。

看法：

```
<p:selectOneMenu value="#{myLdapEntry.oneMenuselectedValue}" effect="fade" style="font-size:12px;"
    valueChangeListener="#{myLdapEntry.menuValueChanged}">
    <f:selectItem itemLabel="" itemValue=""/>
    <f:selectItems value="#{treeBean.objclasslist}" var="objclass"
    itemLabel="#{objclass}" itemValue="#{objclass}" />
    <p:column>   
        #{o}  #{objclass}
    </p:column>
    <f:ajax event="change" render=":form:objclassAttrsValstab" />
</p:selectOneMenu> 
```

模型：

```
List<String> objectClassList = new ArrayList<String>();

public void menuValueChanged(ValueChangeEvent vce) {
    String newValue = vce.getNewValue().toString();
    objectClassList.add(newValue);
    System.out.println(objectClassList);
} 
```

我想记住`objectClassList`. 但问题是它总是只包含最后一个选定的项目，而不是之前的项目。我什至尝试过使用 a`Vector`而不是 a `List`，但仍然得到相同的结果。

我认为该`valueChangeListener`方法每次都会创建一个新的 bean 实例，以便`objectClassList`每次都重新初始化。

这是真的？这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:45:36.427

如果 bean 是请求范围的，那确实会发生。然后，每个 HTTP**请求**都会创建一个全新的 bean 实例。就那么简单。如果您需要在同一个视图上交互时拥有相同的 bean 实例，那么它应该被放置在视图范围内。

```
@ManagedBean
@ViewScoped
public class MyLdapEntry {
   // ... 
} 
```

这个问题与你是否使用完全无关`valueChangeListener`。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

* * *

**与具体问题**无关**`valueChangeListener`，这并不完全是执行业务操作和模型值操作的正确位置。而是使用`<p:ajax listener>`代替`valueChangeListener`(and `<f:ajax>`)。**

 **```
<p:ajax listener="#{myLdapEntry.menuValueChanged}" update=":form:objclassAttrsValstab" /> 
```

和

```
public void menuValueChanged() {
    objectClassList.add(oneMenuselectedValue);
} 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)**

# mobile - 如何以编程方式从英国电话号码中找到手机运营商

> ID：12933462
> 
> 赞同：0
> 
> 时间：2012-10-17T11:39:41.683
> 
> 标签：mobile

最近我正在开发一个 SMS 门户，它将 SMS 发送到从 Web 发送的用户手机。

我的客户向我提供了发送 SMS 和消息的电话号码。

从这个信息中，我必须识别出这个电话号码是哪个运营商的。

谁能告诉我如何找到英国号码的运营商？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:51:11.797

我怀疑你会找到一个 100% 的机制。数字现在是可移植的。

[http://www.ofcom.org.uk/static/archive/oftel/ind_info/numbering/mnp1199.htm](http://www.ofcom.org.uk/static/archive/oftel/ind_info/numbering/mnp1199.htm)

> 号码可携带性是一种受监管的设施，它使公共电话服务（包括移动服务）的订户能够在保留现有电话号码的同时更改其服务提供商。其目的是通过使用户能够在提供商之间切换而无需更改电话号码的成本和不便，从而促进消费者的选择和有效的竞争。

但是，您可以在此处获取一些信息：

[http://www.ukphoneinfo.com/locator.php](http://www.ukphoneinfo.com/locator.php)

> 英国电话代码定位器获取电话号码、标准代码、访问/短代码、交换名称或位置名称。返回的详细信息可能包括：有关该区域的位置信息、地图位置、BT 收费信息和附近的交易所名称。

```
SABC    D/DE    Status  Date    Communications Provider Use             Notes                Change
7790    0-9  Allocated  N/A     Orange                  Mobile services 10 Digit Numbers    08/1999 
```

但由于移植，特定号码可能不再与最初分配给它的运营商相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T04:43:31.767

我找到了提供 API 以非常低的价格从全世界的电话号码中收集移动运营商的网站。为您的解决方案尝试[InfoBip](http://www.infobip.com/services/hlr/)。

# ruby-on-rails - Ruby on Rails：使用布尔值搜索 - postgres

> ID：12933465
> 
> 赞同：1
> 
> 时间：2012-10-17T11:39:48.247
> 
> 标签：ruby-on-rails, ruby, postgresql, boolean

我有一个允许用户在数据库中输入、编辑和搜索项目的应用程序。

在我的搜索功能中，您可以通过在搜索中添加参数来进行复杂的搜索。

```
def self.like(text); "%#{text}%"; end

  def self.search(search_archive, search_client, search_status, search_fullname)
    # start with a scoped query, to apply more scopes on it afterwards
    _projects = Project.scoped 
    # then, for each of the parameters, apply the scope only if present

    if search_archive.present?
      _projects = _projects.where ['archive LIKE ?', like(search_archive)] 
    end
    if search_client.present?
      _projects = _projects.where ['client LIKE ?', like(search_client)] 
    end

     if search_status.present?
      _projects = _projects.where ['status LIKE ?', like(search_status)]
    end

if search_fullname.present?
      _projects = _projects.where ['fullname LIKE ?', like(search_fullname)]
    end
    # now you have applied only the present scopes. return the result, and watch 
    # the query as it executes.

    _projects

  end 
```

现在我最近添加了存档项目的选项，该选项作为布尔值进入项目表。

我知道我的搜索功能是错误的，因为我认为我无法按照我尝试过的方式处理布尔值。

```
if search_archive.present?
          _projects = _projects.where ['archive LIKE ?', like(search_archive)] 
        end 
```

这是错误：

```
PG::Error: ERROR:  operator does not exist: boolean ~~ unknown
LINE 1: SELECT COUNT(*) FROM "projects"  WHERE (archive LIKE '%{"{:c... 
```

有任何想法吗？提前致谢。

**更新：**

更改为以下建议，

```
if search_archive.present?
  _projects = _projects.where(:archive => search_archive)
end 
```

我收到此错误：

```
PG::Error: ERROR:  missing FROM-clause entry for table "archive"
LINE 1: SELECT COUNT(*) FROM "projects"  WHERE "archive"."{:class=>"...
                                               ^
: SELECT COUNT(*) FROM "projects"  WHERE "archive"."{:class=>""archive""}" = '1' 
```

**这是我的搜索操作：**

```
def search

    @search = params[:archive], params[:client], params[:status], params[:fullname]

    @project_search = Project.search(*@search).order(sort_column + ' ' + sort_direction).paginated_for_index(per_page, page)

    @search_performed = !@search.reject! { |c| c.blank? }.empty? 

  @project = Project.new(params[:project])

respond_to do |format|
      format.html # search.html.erb
      format.json { render :json => @project }
    end

end 
```

**添加部分搜索视图**

```
<%= form_tag search_path, method: :get do %>

<% if current_user.try(:admin?) %>
Archive:
<%= check_box :archive, :class => "archive" %></H2>
<% end %>
<% if !current_user.try(:admin?) %>
<%= hidden_field :archive, :value => false %>
<% end %>

<div class="client">
Client : 
<%= select(@projects, :client, Project.order("client").map{|p| [p.client]}.uniq, :prompt => "-Any-", :selected => params[:client]) %></br>
</div>

<div class="buttons">
<div id="search_button">
<%= submit_tag "Search", name: nil, :class => "button" %>
</div>

<% end %> 
```

**解释**

如果我是管理员，并且未选中存档复选框，我希望查看所有未存档的项目。如果我检查它，我只想查看存档的，包含在我搜索的其他参数中。

如果我是普通用户，我应该看不到存档复选框，并且我所做的每次搜索都应该在幕后存档错误的项目上进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:49:21.383

if`archive`是一个布尔值，并且您想在其上搜索 true 或 false，并且`search_archive`它也是一个布尔值，这就是您需要做的所有事情：

```
if search_archive.present?
  _projects = _projects.where(:archive => search_archive)
end 
```

更新：

您的复选框语法错误，需要类似于：

`check_box("project", "archive", {:class => 'archive'})`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:03:25.727

if `archive`is Boolean 添加如下内容

```
if search_archive.present?
  _projects = _projects.where(:archive => search_archive != "false")
end 
```

改变

```
<% if current_user.try(:admin?) %>
Archive:
<%= check_box :archive, :class => "archive" %></H2>
<% end %>
<% if !current_user.try(:admin?) %>
<%= hidden_field :archive, :value => false %>
<% end %> 
```

到

```
<% if current_user.try(:admin?) %>
  Archive: <%= check_box_tag :archive, true, false, :class => "archive" %></H2>
<% else %>
  <%= hidden_field :archive, :value => false %>
<% end %> 
```

# javascript - 将 require.js 与 Twitter Boostrap API 和主干一起使用

> ID：12933466
> 
> 赞同：2
> 
> 时间：2012-10-17T11:39:48.483
> 
> 标签：javascript, jquery, backbone.js, twitter-bootstrap, requirejs

关于这个条目[Loading Backbone and Underscore using RequireJS](https://stackoverflow.com/questions/8131265/loading-backbone-and-underscore-using-requirejs/8156341#8156341)我很清楚如何配置`Backbone`特定脚本和`JQuery`.

但是我该怎么做：

*   配置`Twitter bootstrap.js`？
*   怎么样`json2.js`？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T13:44:54.120

除了您对路径配置选项的了解之外，您还应该查看 shim 配置选项[http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)。

许多插件还没有准备好 AMD，所以你有两个选择。将其配置为 shim（适用于大多数插件），或编写自己的适配器，如[https://github.com/amdjs上的努力](https://github.com/amdjs)

简单的例子：

```
require.config({
    shim: {
        'bootstrap': ['jquery'], // no exports
        'underscore': { exports: '_' }, // no dependencies
        'backbone.layoutmanager': {
            deps: ['backbone']
            exports: 'Backbone.LayoutManager'
        } // a mix of exports and dependencies
     }
}); 
```

对于像 json2 这样没有依赖关系并且只有在浏览器没有本机实现时才会激活的东西，您可以简单地将其列为您的主应用程序的依赖项，而无需包装器/垫片。

# c# - 注销时停止 Windows 服务

> ID：12933468
> 
> 赞同：0
> 
> 时间：2012-10-17T11:39:57.533
> 
> 标签：c#, .net, windows-services

我们的项目中有一个正在运行的服务，我们需要它来获取注销命令。我们可以通过控制台发送命令，但控制台是一个无法运行的单独程序。它不一定需要停止，但它确实需要获得某种命令。服务中有什么东西可以捕获注销事件吗？

[10/17/12 10:45] - 服务作为本地系统运行。

[10/17/12 12:07] - 我添加了以下方法，但是当我注销或登录计算机时没有得到任何输出，即使我成功地使用此消息写入日志我将再次尝试重建我的解决方案，但想在这里发布，以防我做错了什么。

```
protected override void OnSessionChange(SessionChangeDescription changeDescription)
{
        WriteToDebugLog(new string[] { "OnSessionChange()",
                                        DateTime.Now.ToLongTimeString() + " - Session change notice received: " + changeDescription.Reason.ToString() + "  Session ID: " + changeDescription.SessionId.ToString(),
                                       "Information" });
        base.OnSessionChange(changeDescription);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:52:40.483

不幸的是，服务不能按用户运行，它们是系统范围的。您可以修改您的服务以检测用户何时注销，但当用户再次登录时它不会再次启动。作为替代方案，您可以使用第二个服务来监控登录活动（使用[@rene](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onsessionchange%28v=vs.100%29.aspx)指出的 OnSessionChanged）并根据该服务启动/停止第一个服务。

这有点棘手，您必须安装第二个服务，我更喜欢使用脚本的更简单的解决方案。

## 电源外壳

您可以使用两个 PowerShell 脚本，这是启动服务：

```
Start-Service -name "YourServiceName" 
```

这是停止服务：

```
Stop-Service -name "YourServiceName" 
```

要配置要执行的此脚本，请查看[此处](http://www.group-policy.com/ref/policy/2490/)。简而言之，您必须在需要`HKLM\Software\Microsoft\Windows\CurrentVersion\Policies\System!RunUserPSScriptsFirst`时更改策略配置才能运行脚本。

## “旧”壳

您不必强制使用 PowerShell，可以使用 shell 命令来启动/停止服务：

```
sc start YourServiceName 
```

和

```
sc stop YourServiceName 
```

请参阅[这篇文章](https://superuser.com/questions/345298/running-a-batch-file-on-logoff)，了解如何在注销时执行批处理文件（或命令）。简而言之，您必须`HKCU\Software\Policies\Microsoft\Windows\System\Scripts\Logoff`为注销和`HKCU\Software\Policies\Microsoft\Windows\System\Scripts\Logon`登录添加一个条目（但是有许多不同的地方可以放置您的脚本以进行登录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:08:43.897

添加组策略会有所帮助吗？如果您使用的是 Windows 7，请单击开始，编写“组策略”并单击“编辑组策略”选项。从那里，转到用户配置 > Windows 设置 > 脚本（登录/注销）

在这里，您可以添加启动或停止服务的脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:34:48.130

您可以让您的服务一直工作并检查特定用户是否已登录，请查看此 SO answer 如何检查已登录用户

[https://stackoverflow.com/a/7065660/351383](https://stackoverflow.com/a/7065660/351383)

# cuda - cuda 常量内存引用

> ID：12933469
> 
> 赞同：4
> 
> 时间：2012-10-17T11:39:57.970
> 
> 标签：cuda, gpu-constant-memory

我在常量内存中有一个数组（它是一个全局变量），并通过函数调用 cudaGetSymbolAddress 获得了对它的引用。当我使用这个引用来获取常量数据而不是使用全局变量时，我的内核运行缓慢。这是什么原因？

```
__constant__ int g[2] = {1,2};
// __device__ int g[2] = {1,2};

// kernel: use by reference
__global__ void add_1( int *a, int *b, int *c, int *f )
{
    int tid = blockIdx.x * blockDim.x + threadIdx.x;
    c[tid] = f[0] * a[tid] + f[1] * b[tid];
}

// kernel: use global variable
__global__ void add_2( int *a, int *b, int *c, int *f )
{
    int tid = blockIdx.x * blockDim.x + threadIdx.x;
    c[tid] = g[0] * a[tid] + f[1] * b[tid];
}

int main()
{
    ......
    // a,b,c are large arrays in device memory of size 40960.

    int *f;
    cudaGetSymbolAddress( (void **)&f, (char *)&g);

    add_1 <<< 160, 256 >>> ( a, b, c, f );

    ......
} 
```

这是示例代码，warp 中的所有线程同时加载相同的位置。注释代码是通过直接访问常量内存

**解释为什么不使用常量内存缓存**（由*talonmies*）

原因是缺少常量缓存。仅当编译器在显式标记为处于常量状态空间中的变量上发出特定的 PTX 指令 (ld.const) 时，才会发生缓存访问。编译器知道这样做的方式是在声明变量时`__constant__`——它是一个影响代码生成的静态编译时属性。相同的过程不能在运行时发生。

如果您在全局内存中传递一个指针并且编译器无法确定该指针在常量状态空间中，则它不会生成正确的 PTX 以通过常量缓存访问该内存。结果访问速度会变慢。

**没有回答的问题**

为什么即使将数组`g`声明为`__device__`变量，使用引用它时代码也会变慢。通过查看`PTX`代码，将全局内存加载到寄存器：

*   使用了 2 条指令`ld.global.s32`，将 4 个字节加载到寄存器中。（在使用参考的代码中）
*   使用1 条指令`ld.global.v2.s32`，将 8 个字节加载到 2 个寄存器，（在使用全局变量的代码中）

有什么区别，任何文档参考将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:10:11.773

与全局内存不同，对常量内存的访问将被序列化（分成多个事务），如果它们不统一（一个（半计算能力 1.x）warp 的所有线程访问相同的地址。

因此，如果访问可能是统一的，则仅使用常量内存。

# iphone - Instruments 表示堆正在增长

> ID：12933470
> 
> 赞同：2
> 
> 时间：2012-10-17T11:40:03.213
> 
> 标签：iphone, ios, xcode, memory-management, instruments

我正在通过带有分配配置文件的 Instruments 在 Xcode 4.5 中运行我的应用程序。这个项目是非ARC的。每分钟，我的应用程序都会调用以下代码。请注意，此方法的调用者在后台线程中运行，并且它被 NSAutoReleasePool 包围。

```
-(void)saveCurrentlyCachedMinute
{
    NSCalendarUnit units = NSHourCalendarUnit | NSMinuteCalendarUnit;
    NSDateComponents *now = [[NSCalendarcurrentCalendar] components:units fromDate:[NSDate date]];
    self.cachedTimeImages = now;
} 
```

其中 cachedTimeImages 是一个声明如下的属性：

```
@property (nonatomic, retain) NSDateComponents *cachedTimeImages; 
```

每分钟后，我单击 Instruments 中的 Mark Heap 按钮。Instruments 说我的堆随着`NSDateComponents`对象的增长而增长。我在上面的代码中做错了什么？

# ios - ios5：停止视图被卸载/停止 viewDidUnload 被调用

> ID：12933471
> 
> 赞同：0
> 
> 时间：2012-10-17T11:40:10.063
> 
> 标签：ios, ios5, uiviewcontroller, ios6, viewdidunload

鉴于 iOS6 不再卸载视图，因此不再调用`UIViewController`'s `viewDidUnload`，我想知道是否有可靠的方法在 iOS5 上导致同样的行为？

也就是说，我真的很想停止在 iOS5 上卸载我的视图，原因与 Apple 给出的不再在 iOS 6 上卸载视图的原因相同（因为它不再节省任何大量内存，而且几乎总是额外错误的来源）。我宁愿把时间花在开发有用的功能上，也不愿测试很多现在只能在 iOS5 上发生并且只能在低内存中发生的案例！

我四处搜索，找不到以前问过这个问题的人，这让我感到惊讶。是否可以像在中保留对 self.view 的额外引用一样简单`viewDidLoad`（并且仅在中释放它`dealloc`）？有没有可能的陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:47:44.570

在 iOS5 上，不支持停止卸载视图，这也会导致巨大的内存问题，因为 iOS6 处理视图的方式完全不同。在 iOS6 中，视图的后备存储仍会在必要时从内存中删除 - 或者至少它被标记为能够从内存中删除。据我所知，在 iOS5 上并非如此。仅当视图本身被移除时，后备存储才会被移除，即使视图本身的大小只有几个字节。

看看这篇很棒的帖子：[iOS 6 中的 View Controller Lifecycle](http://thejoeconwayblog.wordpress.com/2012/10/04/view-controller-lifecycle-in-ios-6/?utm_source=iOS+Dev+Weekly&utm_campaign=196e322709-iOS_Dev_Weekly_Issue_62&utm_medium=email) 这可能会让您了解您的要求有多复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:49:42.487

现在的主要区别是视图不会在 中自动卸载`didReceiveMemoryWarning`，`viewDidUnload`也不会被调用。

**这并不意味着您不应该卸载您的视图**- 事实上，在 WWDC 视频中他们建议在`didReceiveMemoryWarning`. 现在的主要区别是您完全可以控制发生的事情和时间。许多人依赖的代码`viewDidUnload`通常不会按预期调用——例如，当只是删除视图并释放控制器时。

如果您不想发布您对内存警告的看法（这可能是也可能不是您想要的），您可以不将 view 属性设置为 nil。如果您`didReceiveMemoryWarning`的控制器中有一个空的，这也将在 iOS 5 中工作（无需调用 `super`）。

不过，我认真建议认真对待这些警告。它们是您清理可能未使用的内存的唯一点，并且视图的后备存储可能会变得非常大。

编辑：只有在视图很少、经常使用且内存占用低的情况下，您才应该考虑*不卸载视图。*

# web-services - Webservices 服务器-客户端，RabbitMQ

> ID：12933473
> 
> 赞同：1
> 
> 时间：2012-10-17T11:40:14.010
> 
> 标签：web-services, apache-flex, rabbitmq

尊敬的stackoverflow大师，

我想在服务器端构建一个应用程序，Spring-WS，在客户端构建 Flex。我将把 RabbitMQ 放在中间。

我已经阅读了 RabbitMQ 中的教程。我读过 Spring-AMQP。

我的问题是：
1\. Flex 作为客户端是否也需要实现 RabbitMQ？
2、如果需要，如何用RabbitMQ实现FLex Webservices？
3\. Apache Servicemix 怎么样？客户是否也需要安装/实施 Servicemix？

我将非常感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:03:57.147

RabbitMQ 是一个消息代理，它为快速消息通信提供了基础设施。

如果你想在你的节点之间进行一些实时通信，你应该使用它。

如果您考虑将 RabbitMQ 与 Flex 一起使用，那么我为 AMQP 0.9.1 协议（最新的 RabbitMQ）创建了一个 Flex/ActionScript 库： [https](https://github.com/mexxik/strymqp-as) ://github.com/mexxik/strymqp-as 在 flex-demo 文件夹下可以找到关于如何使用该库的简单示例。如果您对此有任何疑问，我将提供更详细的教程。

但一般来说，如果您只想在 Flex 中从 Spring 中检索数据，您可以使用 BlazeDS 的简单远程处理（使用 j RabbitMQ 进行远程处理并不那么容易）。此外，您可以考虑在服务器端创建 RESTful Web 服务。好的选择是 Spring MVC，并在 Flex 端使用它们。

# c# - 使用 SOAP 和 c# 对 Magento 进行编程

> ID：12933474
> 
> 赞同：1
> 
> 时间：2012-10-17T11:40:15.243
> 
> 标签：c#, .net, magento, soap

我正在尝试从 c# 对 Magento 进行编程。在第一步中，我将服务引用添加到 Visual Studio 中的项目。但我没有 MagentoService 类。当我下载 wdsl 文件并通过 Visual Studio 命令行中的 wsdl.exe 转换它时，我就有了它。因此，在服务引用的情况下，我的代码如下所示：

```
MagentoSer.Mage_Api_Model_Server_HandlerPortTypeClient client = new MagentoSer.Mage_Api_Model_Server_HandlerPortTypeClient();
var session= client.login("id", "password");
client.call(session, "catalog_category.tree", null);
client.endSession(session); 
```

一切正常。但是当我尝试使用

```
MagentoSer.Mage_Api_Model_Server_HandlerPortTypeClient client = new MagentoSer.Mage_Api_Model_Server_HandlerPortTypeClient();
var session= client.login("id", "password");
client.call(session, "product_stock.list", "qqaz");
client.endSession(session); 
```

出现异常“反序列化操作'call'的回复消息正文时出错”指定的类型未被识别：name='Map'，namespace='<a href="http://xml.apache.org/xml-soap " rel="nofollow noreferrer">http://xml.apache.org/xml-soap', at ."}

从 PHP 测试时，一切正常。我发现这两篇文章 [http://codeblow.com/questions/php-web-service-in-c-invoke-function-returns-null/](http://codeblow.com/questions/php-web-service-in-c-invoke-function-returns-null/) [C# 中的 PHP Web 服务：Invoke() 函数返回 null](https://stackoverflow.com/questions/733303/php-web-service-in-c-sharp-invoke-function-returns-null) 但我不能把握大局。

那些关于对象参数的

```
public object call(string sessionId, string resourcePath, object args); 
```

或者关于函数的输出？还有一件事情。在网上搜索时，我发现了使用奇怪数组（如 complexFilter）的代码示例（Magneto 帮助）。如果我通过 Visual Studio 连接到 wsdl 文件，如何获取它们？这是在 Magento 管理员权限中向我公开它们吗？

最好的祝福

普热梅斯瓦夫·斯坦尼斯谢夫斯基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:33:23.400

在 Magento 管理面板中尝试[打开 WSI 合规模式](http://www.magentocommerce.com/api/soap/wsi_compliance.html)。

# c# - 如何通过 CultureInfo.GetCultures 访问国家名称

> ID：12933475
> 
> 赞同：-2
> 
> 时间：2012-10-17T11:40:18.937
> 
> 标签：c#, .net

我想通过 c# 代码访问国家、州和引用名称。到目前为止，我已通过 CultureInfo 类成功访问了国家名称，我的国家名称代码：

```
 public string[] Get()
    {
        Dictionary<string, string> CountryNameDictonary = new Dictionary<string, string>();

        foreach (System.Globalization.CultureInfo ci in System.Globalization.CultureInfo.GetCultures(System.Globalization.CultureTypes.SpecificCultures))
        {
            System.Globalization.RegionInfo ri = new System.Globalization.RegionInfo(ci.Name);
            if (!CountryNameDictonary.ContainsKey(ri.EnglishName))
            {
                CountryNameDictonary.Add(ri.EnglishName, ri.TwoLetterISORegionName);
            }
        }

        var OrderedNames = CountryNameDictonary.OrderBy(p => p.Key);

        Dictionary<string, string> Countries = new Dictionary<string, string>();
        foreach (KeyValuePair<string, string> val in OrderedNames)
        {
            Countries.Add(val.Key, val.Value);
        }

        return Countries.Keys.ToArray();
    } 
```

现在我被困住了，不知道如何访问州和引用名称。我希望以最简单的方式列出每个选定国家/地区的州和城市列表，而无需返回编辑数据源（数据库或 XML） .我该怎么做，请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:50:47.717

在这个美国政府网站上，您可以获得城市列表和其他地理特征：[http](http://earth-info.nga.mil/gns/html/namefiles.htm) ://earth-info.nga.mil/gns/html/namefiles.htm 。

您可以从文件中提取数据并用它们填充您自己的数据库，然后从您的应用程序中查询它。

您无法`CultureInfo`从 .NET 框架中执行任何操作，因为它不提供此类功能。

# visual-c++ - 如何从 WTL 中的 ListViewCtrl 多选中获取项目？

> ID：12933477
> 
> 赞同：0
> 
> 时间：2012-10-17T11:40:26.990
> 
> 标签：visual-c++, listview, wtl

我有`ListViewCtrl` 一个**WTL**程序。

我需要获取用户选择的项目（多选）。

我只能使用`GetSelectedCount()`.

`GetSelectedItem()`不适用于多项选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:46:05.213

现在这就是我这样做的方式：

```
for(int j=0;j<list.GetCount();j++)
{
    if(list.GetSel(j))
    {
        list.GetText(j,strTemp);
        doSomething(strTemp); //maybe put in an array
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:44:10.980

看看这里：

```
CListViewCtrl ListView = ...
for(INT nItem = ListView.GetNextItem(-1, LVNI_SELECTED); nItem >= 0; nItem = ListView.GetNextItem(nItem, LVNI_SELECTED))
{
  // Here you go with nItem
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-27T13:46:45.473

最短路径：

```
int nItem = -1; 
while ( (nItem = m_lvList.GetNextItem(nItem, LVIS_SELECTED)) != -1 ) 
{ 
...
} 
```

# facebook - Facebook 元标签，正文错误中的元标签

> ID：12933481
> 
> 赞同：0
> 
> 时间：2012-10-17T11:40:46.220
> 
> 标签：facebook, meta-tags

facebook 元标签有问题。已经看到这样的问题，并检查并重新检查了元标记，但看不到问题，我是编写代码的新手，所以这可能是问题，即将代码放在错误的地方，网站是 www.candcautos.ie，将不胜感激如果有人可以看看问题是什么，例如头部之外的标签等。喜欢按钮工作，但当他们点击喜欢按钮时，它不会显示在“喜欢”新闻源上。下面的错误是当我使用 facebook 调试/linter 时出现的错误，以及元标记警告和推断属性警告，但我认为如果我先修复，其他人应该自己修复。非常感谢一些帮助。谢谢

“您的 . "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:46:23.363

看起来您已经将一个完整的 HTML 文档嵌入到另一个文档中——这当然是不允许的。一个 HTML 文档只能包含一次 Elements `html`, `body`, `head`。

去修复你的 HTML 错误——验证器会为你列出它们， http: [//validator.w3.org/check ?uri=http://www.candcautos.ie/home/](http://validator.w3.org/check?uri=http://www.candcautos.ie/home/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T00:28:28.927

你使用 AddThis 吗？该附加组件将完全按照上一张海报的描述进行。您只能运行一项喜欢/发送服务。

如果您想直接使用 Facebook 按钮，您需要查看停止使用 AddThis 或类似服务。

# c# - 创建目录结构的 XDocument

> ID：12933500
> 
> 赞同：1
> 
> 时间：2012-10-17T11:41:44.850
> 
> 标签：c#, xml, linq-to-xml, directoryinfo, xmldom

我想创建一个目录结构的 XMLDom，如下所示

```
<ROOT>
 <NAME>MainFolder</NAME>
 <Path>C:\MainFolder</Path>
 <Level1>
 <Name>Folder 1</Name>
 <Path>C:\MainFolder\Folder 1</Path>
 <Level2>
  <Name>Folder 1 1</Name>
  <Path>C:\MainFolder\Folder 1\Folder 1 1</Path>
 </Level2>
 <Level2>
  <Name>Folder 1 2</Name>
  <Path>C:\MainFolder\Folder 1\Folder 1 2</Path>
 </Level2>
 </Level1>
</ROOT> 
```

如果我试图做的事情会起作用，我不使用，但下面的代码给出了一个错误，说我试图输入非法字符

```
private static XElement DirToXml(DirectoryInfo dir ,int level)
        {
            string slevel;
            switch (level)
            {
                case 1:
                    slevel = "Level1";
                    break;
                case 2:
                    slevel = "Level2";
                    break;
                case 3:
                    slevel = "Level3";
                    break;
                default:
                    slevel = "SoOn";
                    break;
            }
            XElement mdoc = XElement.Load("<test></test>");
            foreach (var tdir in dir.GetDirectories())
            {
                XElement doc = XElement.Load("<" + slevel +"> \n <Name>" + dir.Name +"</Name>\n <Path>"+ dir.FullName +"</Path>\n </"+slevel+">");
                tdir.GetDirectories().Select(d => DirToXml(d, level++));
                mdoc.Add(doc);
            }

            return mdoc;
            //return new XElement("Level1", new XAttribute("Name", dir.Name), dir.GetDirectories().Select(d => DirToXml(d, level ++)));

        } 
```

这就是我用来调用 DirToXml 的东西

```
XDocument xdoc = new XDocument(
                    new XElement("Root", DirToXml(new DirectoryInfo(@"C:\MainFolder"), 0))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:49:18.753

你可能打算打电话`XElement.Parse(("<test></test>");`，不是`XElement.Load("<test></test>");`。您的主要错误`<test>`是不是（部分）有效文件名。

避免所有其他字符和语法问题的方法是不使用`Parse(somString)`但添加适当的元素：

```
 //XElement doc = XElement.Load("<" + slevel +"> \n <Name>" +
 //      dir.Name +"</Name>\n <Path>"+ dir.FullName +"</Path>\n </"+slevel+">");

 XElement doc = new XElement(slevel, 
          new XElement("Name", dir.Name),
          new XElement("Path", dir.FullName) ); 
```

这样，`dir.Name`和 Path 中的（非法）路径字符将自动进行 XML 编码。

关于你的递归方法，

```
// untested
XElement doc = ...;
var subs = tdir.GetDirectories().Select(d => DirToXml(d, level++));
foreach (var sub in subs)
   doc.Add(sub);
mdoc.Add(doc); 
```

# ruby-on-rails - 修改 Ransack gem

> ID：12933502
> 
> 赞同：0
> 
> 时间：2012-10-17T11:41:48.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

我正在使用 Ransack gem，但我想修改它。因此，我将 Ransack gem 文件夹从 C 驱动器复制到该`vendor/plugins/static_gem`文件夹​​并尝试对其进行编辑，但是当我启动服务器时，它给了我错误：

```
 D:/Shrikant/Ruby Projects/fIT_Arms/vendor/static_gem/ransack-0.7.0/ransack.gemsp
     ec:25:in ``': No such file or directory - git ls-files (Errno::ENOENT)
     from D:/Shrikant/Ruby Projects/fIT_Arms/vendor/static_gem/ransack-0.7.0/
     ransack.gemspec:25:in `block in <main>'

          from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1368:
    in `initialize'
            from D:/Shrikant/Ruby Projects/fIT_Arms/vendor/static_gem/ransack-0.7.0/ransac

k.gemspec:5:in `new'
        from D:/Shrikant/Ruby Projects/fIT_Arms/vendor/static_gem/ransack-0.7.0/ransack.gemspec:5:in `<main>'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:280:in `eval'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:280:in `rescue in block in load_gemspec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:275:in `block in load_gemspec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:273:in `chdir'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:273:in `load_gemspec'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/source.rb:340:in `block in load_spec_files'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/source.rb:339:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/source.rb:339:in `load_spec_files'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/source.rb:372:in `local_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:430:in `block in converge_locked_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:419:in `each'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:419:in `converge_locked_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:180:in `resolve'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:127:in `specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:172:in `specs_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/definition.rb:161:in `requested_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/environment.rb:23:in `requested_specs'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/runtime.rb:11:in `setup'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler.rb:107:in `setup'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.5/lib/bundler/setup.rb:7:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from D:/Shrikant/Ruby Projects/fIT_Arms/config/boot.rb:6:in `<top (required)>'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from script/rails:5:in `<main>' 
```

它在这些行给了我一个错误

```
s.files         = `git ls-files`.split("\n")
  s.test_files    = `git ls-files -- {test,spec,features}/*`.split("\n")
  s.executables   = `git ls-files -- bin/*`.split("\n").map{ |f| File.basename(f) }
  s.require_paths = ["lib"] 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:26:16.237

不确定这是否是问题，但尝试删除路径“D:/Shrikant/Ruby Projects/fIT_A”中的空格并重试

即将文件夹 Ruby Projects 重命名为 ruby​​_projects..

你的开发环境是什么

# sql - 关于如何从数据库 T-SQL 备份中自动删除信用卡详细信息的想法

> ID：12933504
> 
> 赞同：1
> 
> 时间：2012-10-17T11:41:59.687
> 
> 标签：sql, sql-server, database, tsql, sql-server-2008-r2

我一直在研究一个新的数据库，呼叫中心代理使用它来销售各种产品。白天，这些代理将接受信用卡详细信息并在处理前临时存储它们。晚上会备份数据库，但出于明显的安全原因，我们无法备份信用卡详细信息。起初我想只是在使用标准 BACKUP 过程备份之前将信用卡字段更新为 NULL，但事实证明，这些详细信息需要保存在原始数据库中，以防当天没有处理它们。所有敏感的信用卡详细信息都包含在一张表的一栏中。这应该很简单，但我是数据库和 T-SQL 的新手（本周）——非常感谢任何提示或指示。

**编辑：附加要求**

任何解决方案的要求是不修改主数据库的结构。这意味着将客户详细信息表中的信用卡 ID 更改为与信用卡表键控的信用卡 ID，然后可以将其从备份中排除，不幸的是，这不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:36:21.573

首先。您不能更改备份的内容（根据设计）。您唯一合理的选择是 a) 在备份之前准备（更改）数据或 b) 备份除 CC 编号之外的所有内容或 c) 恢复备份，删除 CC 编号并进行另一个备份。

在这些情况下，我使用了以下过程： 1\. 制作/维护数据库的副本/副本（经常通过 ETL/SSIS 或备份/恢复或日志传送或复制同步）作为备份的缓冲区。2\. 从缓冲区/副本中擦除 CC 编号。3.备份。

对于我的同步过程，我更喜欢 ETL/SSIS，因为它给了我更多的控制权（并且没有暂停，就像在复制和日志传送中一样）。然而，ETL/SSIS 需要更多的努力来设置。备份/恢复是最快/最简单的。

抱歉，我的解决方案听起来很麻烦。这就是我学会处理这种情况的方式。

# marklogic - Marklogic: cts:and-query 在同一个节点中搜索两个属性

> ID：12933510
> 
> 赞同：2
> 
> 时间：2012-10-17T11:42:23.477
> 
> 标签：marklogic

我想为`cts:and-query`同一个节点中的两个属性做。 `cts:and-query`正在单独搜索文档中的测试条件，而不是在同一个节点中。

有没有办法限制搜索在同一个节点上应用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:54:48.533

根据您的 XML 结构，您可以通过使用`cts:near-query()`距离为零的 a 而不是使用`cts:and-query()`. 前段时间我写了一篇关于[近查询距离](http://blog.davidcassel.net/2012/08/a-trick-with-ctsnear-query/)的帖子。简而言之，距离取决于元素内部的单词，但不受属性中单词的影响。这应该可以解决问题：

```
cts:near-query(
  (cts:element-attribute-value-query($element-qname, $attr1-qname),
   cts:element-attribute-value-query($element-qname, $attr2-qname)),
  0
) 
```

请注意，如果没有`element-level`单词将一个元素的属性与另一个元素的属性分开，则此方法将不起作用。例如：

```
<doc>
  <stuff a="1" b="2">some text</stuff>
  <stuff a="3" b="4">some other text</stuff>
</doc> 
```

`/doc/stuff\[1\]`stuff 元素内的文本提供了' 属性和`/doc/stuff\[2\]`' 属性之间的距离。a 和 b 属性之间没有距离。`/doc/stuff\[1\]`如果 stuff 元素没有文本，那么' 属性和`/doc/stuff\[2\]`' 属性之间不会有距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:48:47.110

将 and-query 包装在 element-query 中，如此处第二个示例中所述：

[http://docs.marklogic.com/cts:element-query?q=cts:element-query](http://docs.marklogic.com/cts:element-query?q=cts:element-query)

它不必限制直接元素本身，后代也包含在匹配中，但根据您的内容结构，这可能就足够了。

如果不是，请使用 XPath 谓词从搜索结果中过滤掉误报。使计算搜索总数等变得更加困难，但至少给出了正确的结果。

！

# xml - 如何解决“指定资源下载失败”错误？

> ID：12933511
> 
> 赞同：4
> 
> 时间：2012-10-17T11:42:23.567
> 
> 标签：xml, xpath, asp-classic

```
<%
        set xd= server.createobject("msxml2.domdocument.6.0")
        xd.async = false
        xd.load("http://example.com/test.xml")

        set errorlist= xd.selectnodes("/XMLResponse/ServiceList/")

        if errorlist.length <> 0 then 
        response.write "FILE EXIST"
        else
        Response.Write xd.parseError.reason
        end if
    %> 
```

当我运行上面的代码时，出现错误“指定资源的下载失败”

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T10:27:25.790

我有同样的问题，并认为这是一个权限错误（可能是跨域？）从另一个域访问 RSS 提要。我能够很好地在浏览器中提取 RSS 提要的内容。我对服务器的访问权限有限，而且它是高度安全的，所以我认为这是一些安全设置。

我发现这种替代方法可以让我解决这个问题：

```
Set xHttp = CreateObject("MSXML2.XMLHTTP")
xHttp.open "GET", "http://example.com/test.xml", False
xHttp.send

Set xd = Server.CreateObject("Microsoft.XMLDOM")
xd.loadxml(xHttp.responseText)

[rest of your code] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:13:19.957

首先尝试找出您尝试取消引用的 URI 是否可以在其他上下文中成功取消引用。

例如，尝试使用浏览器、curl 或 wget 取消引用它。如果您可以使用这些工具检索资源，那么您的问题在于您要求 ASP 检索它的方式，您需要查看 API 文档以了解您做错了什么。如果您无法使用这些工具检索资源（`curl http://example.com/test.xml`例如对我来说失败了），那么问题出在服务器端，并且您有一组不同的可能原因和不同的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T05:53:01.977

我将 Windows 7 更新为 Windows 7 SP1，将 Internet Explorer 8 更新为 Internet Explorer 11。它解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-10T05:58:23.030

我也面临同样的问题，

问题是由于我在同一个盒子里做的其他一些事情，我已经超出了雅虎地理编码 API 的允许限制。一旦重置 - 第二天 - 它再次按预期工作。

下载“失败”的错误消息在技术上是正确的，但不是特别具有描述性。这似乎也是雅虎 API 的一个失败，因为我没有被明确地（在 XML 中）告知我已经超过了限制，它只是没有返回任何东西。

# c# - app.config 有问题（SQL Server Express）

> ID：12933512
> 
> 赞同：0
> 
> 时间：2012-10-17T11:42:30.967
> 
> 标签：c#, .net, sql-server, connection-string

在我的 app.config 中：

```
<add name ="connSpionshopString" connectionString="Data
Source=.\SQLEXPRESS;;AttachDbFileName=|DataDictionary|Spionshop.mdf;
Integrated Security=True;User Instance=True"/> 
```

在我的 form.cs 中：

```
SqlConnection conn2 = new SqlConnection();
        conn2.ConnectionString = ConfigurationManager
                                 .ConnectionStrings["connSpionshopString"]
                                 .ConnectionString; 
```

这总是会出现错误：“键'attachdbfilename'的值无效。”

我不知道这有什么问题.. :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:47:14.377

您应该能够通过稍微修改它来修复它：

```
<add name ="connSpionshopString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|Spionshop.mdf;Integrated Security=True;User Instance=True"/> 
```

你有`DataDictionary`而不是`DataDirectory`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:45:00.267

如果 SqlConnection 类认为数据库服务器/主机名不正确，则可能会引发键“attachdbfilename”错误的无效值。使用 SQL Server Express 时，您只能使用本地主机的实例（.、（本地）或 NETBIOS 或本地机器的 DNS 名称）。

这意味着要么像这样使用

```
<add name ="connSpionshopString" connectionString="Data 
Source=.;AttachDbFileName=|DataDictionary|Spionshop.mdf;Integrated Security=True;User 
Instance=True"/> 
```

或者

```
<add name ="connSpionshopString" connectionString="Data 
Source=machinename;AttachDbFileName=|DataDictionary|Spionshop.mdf;Integrated Security=True;User 
Instance=True"/> 
```

或者

```
<add name ="connSpionshopString" connectionString="Data 
Source=(local);AttachDbFileName=|DataDictionary|Spionshop.mdf;Integrated Security=True;User 
Instance=True"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:44:39.793

我相信你有一个错字：

```
connectionString="Data Source=.\SQLEXPRESS; **HERE!! ;** 
                  AttachDbFileName=|DataDictionary|Spionshop.mdf;
                  Integrated Security=True;User Instance=True" 
```

你放了 2 个分号而不是 1 个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:45:46.687

我想期望 sql 数据库的服务器名称是本地地址，而不是 DataSource 变量中的 /sqlexpress

# sql - 排序表数据问题

> ID：12933514
> 
> 赞同：0
> 
> 时间：2012-10-17T11:42:36.910
> 
> 标签：sql, sql-server-2008, sorting

我在数据库表中有相当大的数据，我想根据它们的 ID（主键）对数据进行排序。键列中的数据可能是：

```
001/2011,
002/2011,
001/2012 
```

当我使用 ' `order by id`' 时，它会像这样对行进行排序

```
001/2011,
001/2012,
002/2011 
```

但是，我正在寻找的是

```
001/2011,
002/2011,
001/2012 
```

id 列的数据类型是`varchar(50)`. 我应该使用特殊的 SQL 函数对此类数据进行排序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:44:17.593

```
ORDER BY RIGHT(ID,4)+LEFT(ID,3) 
```

这会重新排列 varchar 数据，以便首先出现年份，然后是序列/月份/日期。

如果您的数据有其他格式，请按照相同的思路进行思考。[使用SUBSTRING](http://msdn.microsoft.com/en-us/library/ms187748.aspx)移动字符串，其中 LEFT 和 RIGHT 只是 2 个特定版本。

# php - Doctrine2 计数结果返回错误的数字

> ID：12933520
> 
> 赞同：1
> 
> 时间：2012-10-17T11:43:15.117
> 
> 标签：php, symfony, doctrine-orm, dql

```
$em = $this->getDoctrine()->getEntityManager();
$qb = $em->createQueryBuilder();

$tickets = $qb->select('COUNT(ticket.id)')->from('MyBundle:Ticket', 'ticket');
var_dump($tickets->getQuery()->getSingleScalarResult()); 
```

返回

```
array(1) {
  [0]=&gt;
  array(1) {
    [1]=&gt;
    string(3) "125"
  }
} 
```

但在数据库中只有 5 个条目。有什么想法有什么问题吗？

```
var_dump($tickets->getQuery()->getSql()); 
```

给

> SELECT COUNT(t0_.id) AS sclr0 FROM ticket t1_, ticket t2_, ticket t0_ GROUP BY t0_.id ORDER BY t2_.created_at ASC LIMIT 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:04:49.450

你可以试试：

```
$em = $this->getDoctrine()->getEntityManager();
$query = "SELECT count(s) FROM MyBundle:Ticket s ";
$queryObj = $em->createQuery($query);
$result = $queryObj->execute(); 
```

我没有测试这段代码。但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T05:17:18.750

实际上，在此查询之前，还有两个使用相同查询构建器实例的查询。这可能是问题所在。我删除了查询，现在计数查询工作得很好。

# java - 如何在程序代码之外的 Swing 应用程序中维护硬编码值

> ID：12933522
> 
> 赞同：3
> 
> 时间：2012-10-17T11:43:24.447
> 
> 标签：java, swing, design-patterns, properties, internationalization

有人可以给我设计如何分别维护所有硬编码值。

我目前正在使用一些设计模式，这些可以吗？为了更好地设计我的应用程序代码，我还能做些什么。

我使用的设计模式是（我的应用程序有多个屏幕类似的向导）：

1.  对用户可见的所有字符串使用 ResourceBundle（用于国际化）
2.  使用属性文件保存特定屏幕的所有值，以便其他屏幕可以访问（这些值用于程序的内部目的，用户不可见）。我不断在程序中的各个位置加载这些属性以获取更新的值，例如，从第一个屏幕转到第二个屏幕（面板）以获取第二个屏幕中第一个屏幕的值。
3.  我正在考虑使用资源包将日志消息外部化。

有没有更好的设计方法？与程序代码分开，A.“用户可见的消息”，B.日志消息，C.可用性值（屏幕尺寸，字体等），用户在屏幕中输入的值，目录/文件路径......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:08:09.853

你的 GUI 应该有一个完整的数据模型。该模型可以读取 I18n 资源文件和常规资源文件来填充模型的一部分。数据模型是一个或多个 Java 类，它们在应用程序运行时保存对应用程序很重要的数据。

例如，这是我创建的秒表 GUI。

![在此处输入图像描述](../Images/a54fb2470d17a74601f1fe29a9c85be4.png)

这是与秒表 GUI 关联的数据模型类。

```
import java.util.ArrayList;
import java.util.List;

import javax.swing.table.DefaultTableModel;

public class StopwatchModel {

    protected boolean isSplitTime;

    protected long startTime;

    protected long endTime;

    protected DefaultTableModel tableModel;

    protected List<Long> splitTimes;

    protected String[] columnNames = {"", "Increment", "Cumulative"};

    public StopwatchModel() {
        this.splitTimes = new ArrayList<Long>();
        this.isSplitTime = false;
        this.startTime = 0;
        this.endTime = 0;
        setTableModel();
    }

    public void resetTimes() {
        this.splitTimes.clear();
        this.isSplitTime = false;
        this.startTime = 0;
        this.endTime = 0;
    }

    public boolean isSplitTime() {
        return isSplitTime;
    }

    public long getStartTime() {
        return startTime;
    }

    public long getEndTime() {
        return endTime;
    }

    public long getLastSplitTime() {
        int size = splitTimes.size();
        if (size < 1) {
            return getStartTime();
        } else {
            return splitTimes.get(size - 1);
        }
    }

    public long getPenultimateSplitTime() {
        int size = splitTimes.size();
        if (size < 2) {
            return getStartTime();
        } else {
            return splitTimes.get(size - 2);
        }
    }

    public DefaultTableModel getTableModel() {
        return tableModel;
    }

    public int getTableModelRowCount() {
        return tableModel.getRowCount();
    }

    public void clearTableModel() {
        tableModel.setRowCount(0);
    }

    public int addTableModelRow(long startTime, long previousSplitTime, 
            long currentSplitTime, int splitCount) {
        String[] row = new String[3];

        row[0] = "Split " + ++splitCount;
        row[1] = formatTime(previousSplitTime, currentSplitTime, false);
        row[2] = formatTime(startTime, currentSplitTime, false);

        tableModel.addRow(row);

        return splitCount;
    }

    public void setStartTime() {
        if (getStartTime() == 0L) {
            this.startTime = System.currentTimeMillis();
        } else {
            long currentTime = System.currentTimeMillis();
            int size = splitTimes.size();
            if (size > 0) {
                long splitTime = splitTimes.get(size - 1);
                splitTime = splitTime - getEndTime() + currentTime;
                splitTimes.set(size - 1, splitTime);
            }
            this.startTime = currentTime - getEndTime() + getStartTime();
        }
    }

    protected void setTableModel() {
        this.tableModel = new DefaultTableModel();
        this.tableModel.addColumn(columnNames[0]);
        this.tableModel.addColumn(columnNames[1]);
        this.tableModel.addColumn(columnNames[2]);
    }

    public void setSplitTime() {
        this.splitTimes.add(System.currentTimeMillis());
        isSplitTime = true;
    }

    public void setEndTime() {
        Long split = System.currentTimeMillis();
        if (isSplitTime) {
            this.splitTimes.add(split);
        }
        this.endTime = split;
    }

    public String formatTime(long startTime, long time, boolean isTenths) {
        long elapsedTime = time - startTime;

        int seconds = (int) (elapsedTime / 1000L);

        int fraction = (int) (elapsedTime - ((long) seconds * 1000L));
        fraction = (fraction + 5) / 10;
        if (fraction > 99) {
            fraction = 0;
        }
        if (isTenths) {
            fraction = (fraction + 5) / 10;
            if (fraction > 9) {
                fraction = 0;
            }
        }

        int hours = seconds / 3600;
        seconds -= hours * 3600;

        int minutes = seconds / 60;
        seconds -= minutes * 60;

        StringBuilder builder = new StringBuilder();

        builder.append(hours);
        builder.append(":");
        if (minutes < 10) builder.append("0");
        builder.append(minutes);
        builder.append(":");
        if (seconds < 10) builder.append("0");
        builder.append(seconds);
        builder.append(".");
        if ((!isTenths) && (fraction < 10)) builder.append("0");
        builder.append(fraction);

        return builder.toString();
    }

} 
```

该模型还将包含让您从一个`JPanel`到另一个的瞬态数据`JPanel`。瞬态数据是只需要在短时间内存在的数据，通常只要 GUI 处于活动状态。退出 GUI 后不必保存它。

使用模型/视图来构建 GUI 的原因是关注点分离。应用程序的其余部分访问数据模型，而不是任何 GUI 组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:48:03.017

我会查看[Java Preferences API，](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)它允许您存储系统范围的默认值、每个用户的默认值，并在没有配置值的情况下使用硬编码的默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T11:49:28.887

I18N 的资源包是完全正确的。属性文件做得很好，但如果您更改它们，您将不得不重新打包和重新部署。将其他项目放入数据库通常更灵活，因为您可以通过推送数据来更改应用程序，而无需重新打包和重新部署。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:04:12.560

对于“可用性值”，我使用了单例模式。创建一个名为 Configuration 的类，然后创建一个`Configuration.getConfig()`调用私有构造函数的静态方法。您的程序需要的所有对象都可以存储为此类中的字段。构造函数使用首选项 API 加载值。[我在最近的 SO 帖子](https://stackoverflow.com/questions/12877346/send-userid-at-java-web-start-from-web-page/12882087#12882087)中为此发布了一些示例代码。

将所有配置数据放在一个负责加载它的类中的优点是，现在您存储此数据的方法已从其余代码中抽象出来。如果您决定使用数据库或 ResourceBundle 进行存储，则只需更改配置。

# regex - 正则表达式模式以匹配来自文本的图像 url

> ID：12933528
> 
> 赞同：1
> 
> 时间：2012-10-17T11:43:56.423
> 
> 标签：regex

我正在使用这个正则表达式，但不将 url 与子域匹配。

```
(https?://[^\s]+(?=\.(jpe?g|png|gif))).(jpe?g|png|gif) 
```

匹配：`http://domain.com/folder1/folder2/folder3/image.jpg`

不匹配：`http://sub.domain.com/folder1/folder2/folder3/image.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:55:30.763

此正则表达式匹配**格式良好**的 JPG、PNG 和 GIF 图像的 URL（包括具有子域、端口号和查询字符串的 URL）：

`((?:https?\:\/\/)(?:[a-zA-Z]{1}(?:[\w\-]+\.)+(?:[\w]{2,5}))(?:\:[\d]{1,5})?\/(?:[^\s\/]+\/)*(?:[^\s]+\.(?:jpe?g|gif|png))(?:\?\w+=\w+(?:&\w+=\w+)*)?)`

PHP 示例：

```
<?php

$str = 'Lorem ipsum http://example.com/img.jpg dolor sit http://www.aaa.cc/this/is/not/an/image.html amet, consectetur http://my.domain.com/path/to/nothing.gif adipiscing elit http://www.imgbucket.com/some/other/image.png';

preg_match_all('@((?:https?\:\/\/)(?:[a-zA-Z]{1}(?:[\w\-]+\.)+(?:[\w]{2,5}))(?:\:[\d]{1,5})?\/(?:[^\s\/]+\/)*(?:[^\s]+\.(?:jpe?g|gif|png))(?:\?\w+=\w+(?:&\w+=\w+)*)?)@', $str, $matches);

print_r($matches[1]); 
```

输出：

```
Array
(
    [0] => http://example.com/img.jpg
    [1] => http://my.domain.com/path/to/nothing.gif
    [2] => http://www.imgbucket.com/some/other/image.png
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T11:57:04.640

```
https?://\w+\.\w+/\S+\.(jpe?g|png|gif) 
```

将只匹配第一个之前的一个点`/`。

`\S`与 相同`[^\s]`，只是更短。

# sql - Dynamics CRM 2011 自定义实体：创建与我的 SQL Server 外键和主键关系匹配的模型

> ID：12933530
> 
> 赞同：3
> 
> 时间：2012-10-17T11:44:01.890
> 
> 标签：sql, dynamics-crm-2011

我有一个很好的 SQL Server 数据库设置，其中包含 2 个具有一对多关系的表。像这样的东西：

**类型：**

```
ID   Type
===========
1    mammal    
2    fish    
3    insect 
```

**宠物：**

```
ID    Name   Foreign Key
=======================
1    Paris   1 (mammal)    
2    Michael 2 (fish)    
3    Mardy   1 (mammal) 
```

我到底如何在 CRM 中重新创建它？我知道 CRM 喜欢创建自己的主键 GUID 和关系字段。我想保持我的表格关系的完整性，特别是因为我将通过脚本定期导入大量数据（100 万+记录），而不是通过 crm gui 创建记录和关系。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:15:29.637

在同样的情况下，我创建了两个带有附加字段的实体 - 整数 ID。关系是 CRM 默认的一种。如果您想在“宠物”表单上“保留”“类型”实体的 ID，您可以在“宠物”表单上添加额外的隐藏字段（整数 - Type_ID）。并在类型更改时更新此内容。

如果您仅从脚本中使用这些实体，我认为这个隐藏的 Type_ID 是不必要的。也许查询性能不会很理想，但这有效:)

编辑：还有一件事，如果您需要在 CRM 中生成 ID，则必须创建用于生成唯一 ID 的插件，该插件将在实体创建时执行。

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:24:47.800

由于 CRM 将其 PK 存储为 GUID，因此您只能通过这些 GUID 定义 FK。

正如 lazarus 所说，创建 Pets 和 PetTypes 实体都包含一个`ExternalID int`字段。

您的导入脚本需要查找要导入的每条记录的两个 GUID：

```
read record
lookup PetTypes Guid for PetTypes.ExternalID = [pettype.id from record]
create if not exists
lookup Pets Guid for Pets.ExternalID = [id from record]
create if not exists
set Pets.PetTypes = new EntityReference() with PetTypes.ID (=guid)
save crm record 
```

# wpf - 我应该使用 MVVM 还是只使用 ContentControl 来加载屏幕？

> ID：12933531
> 
> 赞同：0
> 
> 时间：2012-10-17T11:44:02.180
> 
> 标签：wpf, mvvm, prism, mvvm-light

我正在开发一个具有以下布局的应用程序，我不了解 MVVM，而且时间紧迫。右边的红色区域是一个 ContentControl。左侧区域将是导航的侧边栏

![在此处输入图像描述](../Images/6c83e331eb7754f06f904c89bec432d3.png)

我的问题是

1.  我应该遵循这种方法 [http://channs.blogspot.com/2010/09/wpf-navigation.html](http://channs.blogspot.com/2010/09/wpf-navigation.html)或
2.  我应该使用 MVVM 灯/棱镜还是
3.  我应该使用 WPF 页面吗？

我目前倾向于选项1。它有什么优点和缺点吗？你会推荐哪个选项？我的应用程序将始终只有一个开发人员，即我，它将包含大约 30 个屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:07:46.687

由于您的日程安排很紧，并且不了解 MVVM（或 Prism？），那么使用选项 3 和 1 会更好。根据我的经验，开发人员需要很长时间才能加快速度MVVM 和棱镜。某些被认为是理所当然的事情，在 MVVM/Prism 世界中变得更加困难。

话虽如此，我是 MVVM/Prism 的大力倡导者，并且觉得付出额外的努力是值得的，尤其是对于您这样规模的项目。但是，由于您时间紧迫，请不要打扰，只需执行代码隐藏即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:30:21.383

Prism 需要时间来学习，如果你的期限很紧，那么我认为你应该按照你所知道的去做，当你有时间阅读 prism 书时，尤其是导航部分会很有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:16:48.197

不要使用 PRISM，这对于此类不复杂的应用程序来说太过分了。如果你熟悉`DataBinding`MVVM 的话，即使没有 MVVM 也能节省你很多时间。既然你赶时间，我觉得你应该从你已经知道的开始，从容地开始学习 MVVM。
祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:08:00.267

mvvm 并不难。在您的情况下，您首先需要一个主视图模型。

```
public class MainViewModel
{
   private ICollectionView _myView {get;set;}
   public ObservableCollection<MyModulWrapper> MyModules{get;set;}
   public MyModulWrapper SelectedModul {get;set;}

    public MainViewModel()
    {
       this.MyModules = new ObservableCollection<MyModulWrapper>();
       //i use icollectionview because i often need sorting or filtering
       this._myView = = CollectionViewSource.GetDefaultView(this.MyModules);
       this._myView .CurrentChanged += (s, e) => { this.SelectedModul = this._myView .CurrentItem as MyModulWrapper; };
    }
} 
```

你必须用你想在顶部屏幕上显示的所有模块（视图模型）填充（以任何方式 - 我将 mef 用于我的应用程序，但硬编码它也可以）你的集合。MyModulWrapper 只包含您的模块的视图模型和一个不错的导航显示名称。

```
public class MyModulWrapper
{
   public string Displayname {get;set;}
   public object Modul {get;set;}//instead of object you can take an interface or base class or whatever
} 
```

现在您可以让 mainview 运行了 :) 您只需将 MainWindow 的数据上下文设置为您的 MainViewModel。

主窗口.xaml

```
 <Window.Resources>
   <!--for each viewmodel you wanna show create a datatemplate. so wpf knows how to render your viewmodel-->
   <DataTemplate DataType={x:Type local:MyViewmodel4FirstButton>
     <local:MyFirstButtonView />
   </DataTemplate>
 </Window.Resources>

 <!-- for navigation -->
 <ListBox ItemsSource="{Binding MyModules}" 
          SelectedItem="{Binding SelectedModul , Mode=OneWay}"
          IsSynchronizedWithCurrentItem="true">
   <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Displayname}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
  </ListBox>

  <!-- all you need to show your selected modul - if you have a DATATEMPLATEs!! -->
  <ContentControl Content="{Binding SelectedModul }"/> 
```

当然，您所有的视图模型都必须实现 INotifyPropertyChanged 并正确提升它。

ps：代码是在没有IDE的情况下编写的，所以忽略错误^^

# google-app-engine - Amazon RDS 实例的性能预期

> ID：12933537
> 
> 赞同：0
> 
> 时间：2012-10-17T11:44:15.863
> 
> 标签：google-app-engine, amazon-rds, amazon-elastic-beanstalk

我正在为一个应用程序使用 Google App Engine，该应用程序目前以每天大约 250 万行写入和 450 万行读取的速度访问数据存储区。

由于在 GAE 上运行应用程序的成本非常高，我目前正在将该应用程序移植到 Amazon Elastic Beanstalk 和 Amazon RDS。

根据上述值，我如何找出/估计我需要哪种类型的 RDS 实例来满足我的要求？上面的处理量是否相当大，比如说一个小型或微型 MySQL RDS 实例要在一天内处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:04:45.067

完全取决于许多因素：

*   行大小。
*   字段类型和大小。
*   查询的复杂性（连接等）。
*   正确使用索引。
*   行争用和其他可能的瓶颈。

真的很难说。但是根据经验，如果您不需要花哨的复制或分片，GAE 数据存储的成本通常会更高，因为它提供了完全冗余、分布、可扩展性等。

我的建议是编写一个快速程序来对 RDS 上的负载进行基准测试，以复制您的期望。如果您放弃所有业务规则等，并且只是进行虚假但随机的读取和写入，应该很容易编写。

# c# - Java vs .NET(Visual Studio) vs Mono

> ID：12933539
> 
> 赞同：2
> 
> 时间：2012-10-17T11:44:22.630
> 
> 标签：c#, ide, mono, cross-platform, choice

我正在研究我将使用哪种 IDE/语言来开发我们的下一个项目。创建该工具是为了监视和对自定义设备的一些设置进行编程。通过 windows 的通信是通过 Virtual Com Port 驱动程序完成的。该应用程序必须在 Windows 7 和 XP 上运行，如果可能无需太多额外工作，则可以在其他操作系统上运行。我是否缺少应该考虑的开发工具？

我发现每个选项的优点和缺点。主要问题：

*   我是否缺少我应该考虑的开发工具？

*   mono/java 的跨平台程度如何？我可以开发一次应用程序，然后将其移植到其他操作系统上，或者不做任何更改，或者对代码进行大量更改吗？移植时应用程序有多少错误？

*   选择哪个平台？我是想花更多时间立即使应用程序跨平台，还是使用 MonoDevelop/VisualStudio 并只创建一个 .NET 应用程序更好？

非常欢迎任何见解:) 我会发布最终结果。

附言。我对 Java 没有经验，开发人员也不应该维护。我们都有更多的 C# 经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:07:18.860

我发现在 Visual Studio 中使用 C# 是控制基本 Windows 功能的最佳解决方案。使用 Microsoft 的某种“本地”语言是有意义的，但请记住，您必须在安装到的计算机上安装 .net 框架。

关于 Java，我喜欢 Java。大多数计算机都安装了 Java 框架，而且（在我看来）它比 c# 更容易。它是按照“一劳永逸”的理念制作的，所以如果兼容性是主要因素，那么 Java 就是您的朋友。我个人使用 Eclipse IDE，有一个适用于所有操作系统的构建。我发现它比 Netbeans 轻。Eclipse也可以做C#

关于 Mono，如果您只想为 windows 构建，我不建议使用它，如果您使用的是 Linux 并且需要为 Windows 构建，那么我宁愿使用 VM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:21:14.460

显然，有大量用 Java 编写的跨平台应用程序。还有很多是用 Mono 编写的——似乎有很多移动开发使用 Mono 来针对 iOS 和/或 Android。

任何特定于平台的东西——硬件和/或操作系统——在不同平台上的行为可能至少略有不同。因此，线程和锁定行为在跨平台甚至不同的 JVM 实现（“一次编写，随处测试”）之间并不相同也就不足为奇了……开发人员有时会发现自己进行了重大更改。

对于 Mono/.NET，您没有听到太多关于此的消息……但恕我直言，很大程度上是因为 .NET 是特定于 Windows 的，而且 Mono 社区比 UNIX/Linux 空间之外的 Java 社区小。

但我认为真正的症结可能是通信端口驱动程序。这些将必须存在于目标系统上（即有人将不得不移植它们）......并且吞吐量和延迟可能会随着硬件/操作系统/版本的不同而变化，可能会很大。

所以我会首先检查那里有什么样的示例/开源代码（如果有的话）来做你想做的事情——特别是与通信端口（虚拟或非虚拟）的接口。这应该让你对相对难度有一个感觉。

然后尝试编写一个简单的“控制台”应用程序，每隔几秒轮询一次端口。两种方式都做，看看哪个“感觉”更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:59:44.877

我更喜欢使用 C# 作为语言和 .NET/Mono 作为框架[（恕我直言，它们几乎相同）](http://www.mono-project.com/Compatibility)。但这是一个哲学问题。许多人更喜欢 Java，其他人更喜欢 C#/.NET。你们都有更多的 C# 经验，所以最好留在那里。

有多个环境。你可能会考虑。

*   [http://www.icsharpcode.net/opensource/sd/](http://www.icsharpcode.net/opensource/sd/)
*   视觉工作室
*   单开发

我已经和他们所有人一起工作过。

*以我个人的经验，为 .NET/Mono 编写跨平台代码并不难。*

# python - 由于 urllib.error.HTTPError，脚本随机失败：HTTP 错误 302

> ID：12933541
> 
> 赞同：0
> 
> 时间：2012-10-17T11:44:34.010
> 
> 标签：python, http, cookies, web-scraping, urllib

我有一个奇怪的问题，我一直在尝试“google-out”几个小时。
我也尝试了**堆栈**上类似主题的解决方案，但仍然没有积极的结果：

> [如何使用 Python urlopen 设置 cookie？](https://stackoverflow.com/questions/9113652/how-do-i-set-cookies-using-python-urlopen)
> [使用 Python/urllib2 处理 rss 重定向](https://stackoverflow.com/questions/9926023/handling-rss-redirects-with-python-urllib2)

所以情况是我想从某个网页下载整套文章。它具有正确内容的子链接只有一个数字，所以我循环整个范围（1到400 000）并将html写入文件。这里重要的是这个网页需要重新发送 cookie 以获取正确的 url，并且在讲完 [如何使用 Python 登录网页并检索 cookie 以供以后使用？](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage)我已经完成了。

但有时我的脚本会返回错误：

> response = meth(req, response)
> File "/usr/lib/python3.1/urllib/request.py", line 468, in http_response
> 'http', request, response, code, msg, hdrs)
> ....
> 文件“/usr/lib/python3.1/urllib/request.py”，第 553 行，在 http_error_302 self.inf_msg + msg, headers, fp)
> **urllib.error.HTTPError: HTTP Error 302: HTTP 服务器返回了一个重定向错误会导致无限循环。**
> **最后 30x 错误消息是：**
> **找到**

这个问题很难重现，因为脚本通常可以正常工作，但它会在数千个“for 循环”之后随机发生。

这是来自服务器的 curl 输出：
`$ curl -I "http://my.url/"
HTTP/1.1 200 OK
Date: Wed, 17 Oct 2012 10:14:13 GMT
Server: Apache/2.2.15 (Oracle)
X-Powered-By: PHP/5.3.3
Set-Cookie: Kuuxk=ae7s3isu2cEshhijte4nb1clk5; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding
Connection: close
Content-Type: text/html; charset=UTF-8`

有些人建议使用机械化或尝试捕获异常，但我不知道如何做到这一点，其他人说错误是由错误的 cookie 处理引起的，但我也尝试使用 urllib2“手动”获取和发送 cookie `add_header('cookie', cookie)`，结果相似。我想知道我的`for`循环和短暂睡眠是否会导致脚本有时失败..
Anwyay -**任何**帮助表示赞赏。

编辑：
如果这可能有效 - 如何捕获异常并尝试忽略它？

编辑：

只需忽略此错误即可解决。没有一切顺利。
我用了

```
    尝试：  
        #这里打开网址  
    除了 any_HTTPError：  
        经过  

```

每次我使用 url.open 指令。

关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-17T05:12:55.077

让我建议另一种解决方案：HTTP 状态代码 302 表示`Found redirection`（参见：[https](https://en.wikipedia.org/wiki/HTTP_302) ://en.wikipedia.org/wiki/HTTP_302 ）。

例如： `HTTP/1.1 302 Found Location: http://www.iana.org/domains/example/`

您可以抓取`Location`标题并尝试获取此网址。

有 8 个重定向状态代码 (301-308)。如果 301 <= 状态码 <= 308 ，您可以使用`Location`标题。

# php - 检查 $_REQUEST 变量的更好方法

> ID：12933550
> 
> 赞同：8
> 
> 时间：2012-10-17T11:44:55.303
> 
> 标签：php, request

```
$p = (isset($_REQUEST["p"])?$_REQUEST["p"]:""); 
```

这是我通常在我的 php 代码中使用的常用行。我一直认为是否有更好（小而快）的方式来编写相同的内容？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T11:49:42.480

创建自己的功能：

```
function getIfSet(&$value, $default = null)
{
    return isset($value) ? $value : $default;
}

$p = getIfSet($_REQUEST['p']); 
```

没有其他干净的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T11:49:31.730

你想要多短？

当然，如果您**每次**访问请求值时都使用它，您应该在某处创建一个函数，然后使用它：

```
function reqVal( $val, $default = "", $no_sql = true )
{
    $var = isset( $_REQUEST[$val] ) ? $_REQUEST[$val] : $default;
    $var = $no_sql ? nosql( $var ) : $var;
    return $var;
}

function getVal( $val, $default = "", $no_sql = true )
{
    $var = isset( $_GET[$val] ) ? $_GET[$val] : $default;
    $var = $no_sql ? nosql( $var ) : $var;
    return $var;
}

function postVal( $val, $default = "", $no_sql = true )
{
    $var = isset( $_POST[$val] ) ? $_POST[$val] : $default;
    $var = $no_sql ? nosql( $var ) : $var;
    return $var;
} 
```

现在添加 sql 注入检查：

```
function nosql( $var )
{
    if ( is_array( $var ) ) {
        foreach ( $var as $key => $elem ) $var[$key] = nosql( $elem );
    } else if ( $var === null ) {
        return null;
    } else {
        if ( get_magic_quotes_gpc() ) $var = stripslashes( $var );
        $var = mysql_real_escape_string( $var );
    }
    return $var;
} 
```

并且总是像这样简单地访问它：

```
$p = reqVal( 'p', 0 );
$p = getVal( 'p', 'something', false );
$p = postVal( 'p' ); // or just forget the 2nd and 3rd parameter 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-17T16:50:13.967

编辑：PHP 7 添加了一个空合并运算符（“??”）

```
$p = $_REQUEST["p"] ?? ''; 
```

[https://www.php.net/manual/en/migration70.new-features.php](https://www.php.net/manual/en/migration70.new-features.php)

* * *

原来的：

如果您想要更短的内容，并且满足于空（字符串）默认值，则可以使用以下方法：

```
$p = @$_REQUEST['p']; 
```

@ 是错误抑制运算符，如果未设置该值，它将阻止表达式发出警告。

[http://www.php.net/manual/en/language.operators.errorcontrol.php](http://www.php.net/manual/en/language.operators.errorcontrol.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T11:50:42.030

我通常利用 PHP 类型松散的事实，然后简单地执行以下操作：

```
$p = (string) $_REQUEST['p']; 
```

这样，即使`$_REQUEST['p']`未设置，空字符串仍会存储到`$p`. 请记住，这仅在您的错误处理程序忽略通知时才有效，因为访问未设置的键将触发类似于`E_NOTICE`“ `undefined index`”的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T11:52:34.183

这确实很常见，我想知道在 PHP 中没有本地方法。大多数开发人员编写自己的函数来安全地从数组中读取。

```
/**
 * Gets the value associated with the specified key from an array.
 * @param array $array The array to search for the key.
 * @param mixed $key The key of the value to get.
 * @param mixed $default The default value to return, if the
 *   specified key does not exist.
 * @return mixed Value that is associated with the specified
 *   key, or the default value, if no such key exists.
 */
function getValueFromArray($array, $key, $default = null)
{
  $containsKey = isset($array[$key]);
  if ($containsKey)
    return $array[$key];
  else
    return $default;
}

/**
 * Gets the value associated with the specified key from an array.
 * @param array $array The array to search for the key.
 * @param mixed $key The key of the value to get.
 * @param mixed $value Retrieves the found value, or is set to null
 *   if the key could not be found.
 * @return bool Returns true if the key could be found, otherwise false.
 */
public function tryGetValueFromArray($array, $key, &$value)
{
  $containsKey = isset($array[$key]);
  if ($containsKey)
    $value = $array[$key];
  else
    $value = null;
  return $containsKey;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T12:01:43.530

[您可以在http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)的**User Contributed Notes**部分找到许多不同解决方案的示例。

试试这个：

```
function get_if_set( $varname, $parent=null ) { 
    if ( !is_array( $parent ) && !is_object($parent) ) { 
        $parent = $GLOBALS; 
    }
    return array_key_exists( $varname, $parent ) ? $parent[$varname] : null; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T12:08:40.327

将现有代码包装在函数中的答案很好——如果你有一堆代码，它们确实会整理代码。

然而，更好的解决方案是在开始之前根据一组预期值清理整个请求数组。

例如：

```
function sanitiseRequest() {
    $expected = array(
        'p' => '',
        'id' => 0,
        //etc
    );

    //throw away any input that wasn't expected...
    foreach($_REQUEST as $key=>$value) {
        if(!isset($expected[$key]) { unset $_REQUEST[$key]; }
    }
    //and for any expected values that weren't passed, set them to the defaults.
    foreach($expected as $key=>$defvalue) {
        if(!isset($_REQUEST[$key]) { $_REQUEST[$key] = $defvalue; }
    }
} 
```

然后只需在代码的开头添加对该函数的调用，您就不必担心`isset($_REQUEST[..])`在代码中的其他任何地方做任何事情。

可以扩展此概念以强制传入的参数也是正确的数据类型，或者您可能想要执行的任何其他数据清理。这可以让您完全相信传入的数据是按预期填充的。

希望有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-12T17:16:03.067

这个对我很有效。而且你不必写两次名字。如果已设置，它不会更改 var。因此，使用 register_globals 对旧应用程序进行快速 n 脏转换是安全的。

```
function getIfSet($key, $default = null)
{
    global $$key;

    if(!isset($$key)){
        if(isset($_REQUEST[$key])){
            $$key=$_REQUEST[$key];
        }else{
            if(!is_null($default)){
                $$key = $default;
            }
        }
    }
}
function getIfSetArray($list){
    foreach($list as $item){
        getIfSet($item);
    }
}

getIfSet('varname');
getIfSetArray(['varname_1','varname_2']);

echo $varname;
echo $varname_1; 
```

# ssas - ssas 2008 如何删除非层次维度属性的总计

> ID：12933552
> 
> 赞同：0
> 
> 时间：2012-10-17T11:44:56.750
> 
> 标签：ssas

如您所见，自动添加了总计。出生日期和全名不是层次结构属性。他们都来自同一个维度。我想显示出生日期和全名。如何摆脱总数？

![在此处输入图像描述](../Images/603dfced629ea0be527a72656285857c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:55:20.567

一种方法是在您的 DSV 上计算一个计算成员。您可以命名它，例如 Birth-Name。

去做这个

1.  打开您的数据源视图
2.  右键单击维度名称
3.  新名称计算
4.  姓名：出生名
5.  表达：`birthday+' '+fullname`
6.  将新字段添加到您的维度
7.  使用新的计算成员和货币度量预览多维数据集

通过这种方式，您可以查看您的数据和所有数据的总数。还有其他方法可以做到这一点，但这是我能想到的最简单的方法。总数不能完全从立方体中删除，因为这才是它真正的工作。进行数据聚合。

# visual-studio-2008 - SSRS：从数据集的不同行获取特定值

> ID：12933562
> 
> 赞同：3
> 
> 时间：2012-10-17T11:45:40.760
> 
> 标签：visual-studio-2008, reporting-services, ssrs-tablix

我坐在这里，使用 SQL Server Reporting Services，但遇到以下问题：

我写了一个 SQL 语句，如果客户缺席与否，它会在一年中的每一天为客户返回。

例如，结果可能如下所示：

```
-------------------
| Date   | Absent |
-------------------
| 01.01\. | True   |
| 02.01\. | False  |
|    .   |   .    |
|    .   |   .    |
| 31.12\. | False  |
------------------- 
```

现在对于报告，我想使用 Tablix，其中我将日期作为列标题，将月份作为行标题，并在右侧单元格中标记一个值，该值标记客户是否缺席一天（例如，我使用： ) 在这里和 :( 缺席):

```
-------------------------------
|    | 01 | 02 | .  | .  | 31 |
|Jan | :( | :) | .  | .  | :) |
|Feb | .  | .  | .  | .  | .  |
| .  | .  | .  | .  | .  | .  |
| .  | .  | .  | .  | .  | .  |
|Dec | .  | .  | .  | .  | :( |
------------------------------- 
```

我只是无法为我的问题想出任何解决方案，所以任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:05:04.900

创建一个 Tablix，列按表达式`=Day(Fields!Date.Value)`分组，行按表达式分组`=Month(Fields!Date.Value)`

对于单元格值，将源设置为表达式：

```
=IIF(SUM(Fields!Absent.Value)>0, ":(" , ":)" ) 
```

当然，你可以添加一个图像，并用类似的表达式动态更改图像源。

# eclipse - Java 类中的 JUnit 分叉模式

> ID：12933565
> 
> 赞同：2
> 
> 时间：2012-10-17T11:45:46.997
> 
> 标签：eclipse, unit-testing, junit

`forkMode`在 Ant 和 Maven 中有对 的支持，有时我们将它与 value 一起使用`perTest`。但是，当我们在类或项目上运行测试时（运行方式 -> JUnit 测试），Eclipse 中的 JUnit 测试仍然失败。显然，JUnit 使用默认设置或行为并并行执行测试，导致 JUnit 视图中出现一些红叉。

1.  有没有办法将一些东西编码到测试类中，让 JUnit 表现得像`forkMode`设置？我们不介意是否有一个仅限 Eclipse 的解决方案。
2.  或者这可以通过 Eclipse 中的运行配置来完成吗？

编辑：
我知道问题是基于测试后剩余的数据，因此进一步的测试将失败。虽然这是有道理的，但请理解这并不能回答我的问题。把我的情况想象成某种老虎队的一部分。我们有很多问题，修复现有测试的那部分只是其中之一。相信我，我们会尽力涵盖所有内容......（*我有一段时间没听说过*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:12:14.840

Eclipse 在同一个 JVM 中的单个线程中串行运行 JUnit 测试。如果您有通常并行运行的测试，这不应影响测试行为。但是，如果您假设您可以更改 VM 中的设置，例如系统属性或类静态变量，并且下一个测试不会有这些更改，那将破坏您的测试。

经验法则是，每个测试都应该让系统（虚拟机、数据库、文件系统）完全保持原样，这样每个测试都可以在任何时间以任何顺序运行。

# php - 处理 http 请求时如何执行插件脚本？

> ID：12933567
> 
> 赞同：0
> 
> 时间：2012-10-17T11:45:50.227
> 
> 标签：php, wordpress

我写了一个插件来执行一些通知任务。这很好用。现在，我想在处理 HTTP 请求时执行主插件脚本。说到这里，我有点困惑：

我的插件源代码位于经典的 WP 插件目录：/wp-content/plugins/my-plugin

这是处理 http 请求时要执行的主脚本的源代码：

```
<?php
require_once('../wp-load.php');
require_once(ABSPATH."wp-content/plugins/my-plugin/classes/Model.class.php") ;
require_once(ABSPATH."wp-content/plugins/my-plugin/classes/MailNotifier.class.php") ;

$mailNotif= new MailNotifier('myadress@foo.bar');
$mailNotif->sendMailToRecipient() ;
?> 
```

实际上，这个脚本位于：`WordpressRoot/script/main.php`这工作，但我想从 WP 核心文件中删除它，只在我的插件目录中获取文件。

我实际上执行了这个脚本来解决以下 http 请求：`http://example.com/script/main.php`但这只是为了测试目的。

**我想要的是使用 http 请求执行位于我的插件目录中的主程序。我试图做一个符号链接，但这是不允许的：**

```
ln -s /wp-content/plugins/my-plugin/script/main.php script 
```

我应该怎么做：

*   我应该在 wordpress 中编写一个网络服务吗（我对此并不熟悉）？
*   我应该在 wordpress 中使用重定向规则吗？

正确执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:57:49.857

你可以试试

```
$request = wp_remote_get('http://mydomain.com/script/main.php')
$theBody = wp_remote_retrieve_body($request); 
```

[http://codex.wordpress.org/HTTP_API](http://codex.wordpress.org/HTTP_API)

# javascript - 在剔除中选中的复选框更改 tr 颜色

> ID：12933568
> 
> 赞同：1
> 
> 时间：2012-10-17T11:45:52.473
> 
> 标签：javascript, knockout.js

我创建了一个这样的表结构：

```
<table><tr data-bind="css: {success: status}">
         <td>
          <input type="checkbox" onclick="this.disabled = 'disabled';" data-bind="checked: status, disable: status, click: $root.UpdateStatus" />
         </td>
         <td>
            <span style="width: 80%" data-bind="text: goals" />
         </td>
         <td>
            <input type="text" style="width: 80%" data-bind="value: notes , event: { blur: $root.UpdateNote}" />
         </td>
        </tr></table> 
```

在此表中，每一行都有一个复选框。我的问题是我想在选中复选框时更改行颜色。我已经在 tr 中完成了 css 绑定，但是如果我再次重新加载页面，它就可以工作。这是[jsfiddle 链接](http://jsfiddle.net/gkyGN/)，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:09:20.780

我清理了你的小提琴并使它工作：

[http://jsfiddle.net/vyshniakov/gkyGN/3/](http://jsfiddle.net/vyshniakov/gkyGN/3/)

编辑

对于来自服务器的映射数据，请使用以下`arrayMap`功能`ko.utils`：

```
 $.ajax({
        url: 'ajax/test.html',
        success: function(data) { // in data should come tblGoals.
            var mappedData = ko.utils.arrayMap(data, function(item) {
                // Change property names if necessary 
                return new Goal(data.GoalId, data.Goals, data.Notes, data.Status);
            });

            var viewModel = new ViewModel(mappedData);
            ko.applyBindings(viewModel);
        }
    }); 
```

# magento - Magento 税收计算突然计算了两次

> ID：12933571
> 
> 赞同：3
> 
> 时间：2012-10-17T11:46:01.903
> 
> 标签：magento

我的一个客户突然有一个奇怪的问题。

例如：产品 A = 121,-- 税金 = 21,-

所以小计应该是121，-包括。税和总计也应该是 121，- 包括。税。

但是现在的总数是100，包括。税，所以计算有问题。

看起来税收是从产品中计算出来的：

产品成本 23,95 包括。21% 税
小计不包括。税收超过 19,79
小计，包括。税是 23,95

现在的问题是：
不包括最终总数。税是 15,63 （所以税计算两次）
总计包括。税为 19,79（这是小计中的不含税价格）。

任何人？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T11:51:01.563

好的，这必须是一个猜测，而不是一个明确的答案，但是当您没有设置运输来源时，可能会导致在显示含税产品时导致销售税翻倍的经典陷阱。

系统 -> 配置 -> 销售 -> 运输设置，然后将原产地设置为您实际发货的国家（即您的商店通常），而不是默认的美国。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T11:56:36.180

转到系统-> 配置

销售中 -> 增值税

在计算设置下

将税金计算基于设置为发货地。

# javascript - 如何使用回调 javascript 函数创建自定义 html 助手？

> ID：12933575
> 
> 赞同：2
> 
> 时间：2012-10-17T11:46:07.297
> 
> 标签：javascript, asp.net, asp.net-mvc, callback, html-helper

我知道存在**Ajax.ActionLink**函数，其签名如下：

```
@Ajax.ActionLink(
    "click me", 
    "SomeAction",
    "SomeController",
    new AjaxOptions { 
        HttpMethod = "POST", 
        OnSuccess = "success" 
    }
) 
```

我可以附加我的回调，例如：

```
function success(data) {
    var json = $.parseJSON(data.responseText);
    alert(json.someProperty);
} 
```

我知道 html 助手是扩展方法。问题：如何创建像 Ajax.ActionLink 这样的自定义 html 助手，我可以在其中指定回调函数。谁能给我举例说明如何使该扩展方法能够将回调函数作为参数并执行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:34:13.150

> 谁能给我举例说明如何使该扩展方法能够将回调函数作为参数并执行它。

这里：

```
public static class HtmlExtensions
{
    public static IHtmlString ExecuteCallback(this HtmlHelper helper, string callback)
    {
        var script = new TagBuilder("script");
        script.Attributes["type"] = "text/javascript";
        script.InnerHtml = string.Format("{0}();", callback);
        return new HtmlString(script.ToString(TagRenderMode.Normal));
    }
} 
```

然后在您看来，您可以调用助手：

```
<script type="text/javascript">
    function someCallback() {
        alert('the callback is executed');
    }
</script>
@Html.ExecuteCallback("someCallback") 
```

# java - 多个域上的会话共享但tomcat中的IP地址相同

> ID：12933580
> 
> 赞同：3
> 
> 时间：2012-10-17T11:46:24.550
> 
> 标签：java, session, tomcat

我有两个域，一个是`example.com`，两个域中的第二个`mydomain.com`都托管在同一个 IP 地址中。我有一个功能，比如在网站上添加到购物车，它存储在会话中。当我将值存储在会话中`example.com`并且我进入`mydomain.com`会话时没有进入`mydomain.com`域。这里的问题是域名不同，但域都加载相同的内容或相同的 ip。仔细观察，我可以发现`jsessionid`为不同域生成的内容是不同的。所以我的问题是，有没有办法在两个域之间共享会话？这个问题是否可以通过`jsessionid`对两个域进行相同的处理来解决？我已经在 java 的 struts 框架中实现了我的项目。

# xamarin.ios - MonoTouch.Dialog：如何从 Element 中访问父 DialogViewController？Tapped 事件和 Selected() 方法之间的区别？

> ID：12933581
> 
> 赞同：1
> 
> 时间：2012-10-17T11:46:26.227
> 
> 标签：xamarin.ios, monotouch.dialog

我正在继承一个`StringElement`in `MonoTouch.Dialog`。在那里我可以附加到`Tapped`事件或者我可以覆盖`Selected()`. 如果我点击元素，两者都会触发。但是，`Selected()`是让我访问`DialogViewController`该元素的成员，该信息不会传递给`Tapped`事件。

这里的逻辑是什么？一个元素是否应该知道它`DialogViewController`？如果是：那么如何从事件中获取控制器`Tapped`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:38:39.163

在我编写该代码时，想法很简单，即使用 lambda，您可以将所需的任何状态传递给您的 Tapped 处理程序，而无需使用 object/EventArgs 模式。

所以你会做这样的事情：

```
var dialogViewController = CreateDvC ();
new StringElement ("....", () => { 
    // reference any variables here
    // my container is:
    Console.Writeline (dialogViewController); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:55:57.677

通过查看 Github 上的源代码发现了自己。触发事件的唯一地方`Tapped`是 from `Selected()`。所以我认为 Tapped 真的应该按类型`EventHandler`而不是 Action。

```
public override void Selected (DialogViewController dvc, UITableView tableView, NSIndexPath indexPath)
{
    if (Tapped != null)
        Tapped ();
    tableView.DeselectRow (indexPath, true);
} 
```

# javascript - 无法解析 dhtmlx 网格中的报告

> ID：12933587
> 
> 赞同：2
> 
> 时间：2012-10-17T11:46:54.423
> 
> 标签：javascript, dhtmlx

在调用`grid.parse(jsonstr, 'json')`js 代码时，报告没有显示，也没有抛出任何错误，尽管所有标题都显示出来了。下面的代码：

```
function getReportData(data) {
    var gr = new dhtmlXGridObject('gridbox');
    gr.selMultiRows = true;
    gr.setHeader(data['tVals']['header']);
    gr.setInitWidths(data['tVals']['init_widths']);
    gr.setColAlign(data['tVals']['col_align']);
    gr.setColTypes(data['tVals']['col_types']);
    gr.setColSorting("str,str");
    gr.init();
    gr.parse(data['gData'], 'json');
} 
```

PS：数据有代码要求的所有相关信息。我的 html 也有以下 js 导入：

```
dhtmlxcommon.js
dhtmlxgrid.js
dhtmlxgridcell.js
dhtmlxtreegrid.js
dhtmlxgrid_json.js
dhtmlxgrid_hextra.js
jquery version 1.6.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:12:51.263

问题似乎在于您的 JSON 格式。你能提供一个 JSON 字符串的样本吗？您可以在此处找到 dhtmlxGrid 支持的有效 JSON 示例：http://docs.dhtmlx.com/doku.php?id=dhtmlxgrid:syntax_templates# [json_format_details](http://docs.dhtmlx.com/doku.php?id=dhtmlxgrid:syntax_templates#json_format_details)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T08:32:43.387

如果您发布您的 JSON 格式会非常有帮助，但是我想我知道您的问题是什么：

您可以在 DHTMLX 中使用两种格式的 JSON（有关[https://docs.dhtmlx.com/grid__data_formats.html#jsonformat](https://docs.dhtmlx.com/grid__data_formats.html#jsonformat)的更多详细信息）

因此，您的问题的解决方案应该非常简单。

改变

```
gr.parse(data['gData'], 'json'); 
```

至

```
gr.parse(data['gData'], 'js'); 
```

# java - 在 Eclipse 中安装 J9 JRE

> ID：12933588
> 
> 赞同：1
> 
> 时间：2012-10-17T11:46:57.910
> 
> 标签：java, eclipse, eclipse-plugin, j9

在网上搜索有关如何在 Eclipse 中将 J9 用作 JRE 的教程，我发现了一些网站和论坛，如下所示：

[http://www.javalobby.org/java/forums/t98578.html](http://www.javalobby.org/java/forums/t98578.html)

[http://www.ibm.com/developerworks/lotus/library/sametime-eclipse-pt1/](http://www.ibm.com/developerworks/lotus/library/sametime-eclipse-pt1/)

解决方案是向 Eclipse 添加一个 j9 启动器插件 - 根据教程 - 可以从以下链接下载： http: [//dev.eclipse.org/viewcvs/index.cgi/org.eclipse.ercp/org。 eclipse.jdt.launching.j9/org.eclipse.jdt.launching.j9-plugin.zip?root=DSDP_Project&view=log](http://dev.eclipse.org/viewcvs/index.cgi/org.eclipse.ercp/org.eclipse.jdt.launching.j9/org.eclipse.jdt.launching.j9-plugin.zip?root=DSDP_Project&view=log)

问题是这个链接已经失效，我在其他任何地方都找不到这个文件。谁能告诉我从哪里得到这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:36:35.430

J9 启动器插件现在不可用。相反，您可以使用“执行环境描述”文件 - .ee 文件在 Eclipse 中将 j9 配置为 JRE。

[http://wiki.eclipse.org/index.php/J9](http://wiki.eclipse.org/index.php/J9)

您可以在上面的链接中找到详细信息。但我不确定它在最新的 eclipse 版本中是否仍然有效。

# javascript - 在我的图中圈，从圈中获取节点

> ID：12933590
> 
> 赞同：0
> 
> 时间：2012-10-17T11:47:04.720
> 
> 标签：javascript, algorithm, extjs, graph

我有一些“随机”图：有些节点有一些连接，有些没有，而且它可以是，我的图中有一个或多个圆圈。

我需要得到圆的节点：例如我有这个节点（A）。“A”在圈子里？这个圆的节点是什么，“A”是什么？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:56:46.867

进行深度优先遍历 DFS。最初所有节点都是白色的。探索给定节点时，将其标记为灰色。完成后将其标记为黑色。只访问白色的节点。如果你遇到灰色节点，那就是你的循环。您可以在网络上阅读有关 DFS 的更多信息。例如[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)

# java - 单击绘制的对象

> ID：12933592
> 
> 赞同：6
> 
> 时间：2012-10-17T11:47:09.497
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我有一个`Shape`继承自 JPanel 的类。

许多子类依次扩展了这些`Shape`类，一种用于每种形状。

每个形状都有自己的覆盖`paint()`方法，用于绘制相应的形状。

我希望能够单击任何形状，并且现在正在尝试实现此逻辑。请注意，每个形状都已添加到 arrayList。

但是，包含语句总是返回 false，即使我已经清楚地单击了形状内部。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T12:52:54.080

永远不要覆盖`paint()`而`JPanel`不是`paintComponent(..)`

我不太确定我是否理解，但是我做了一个简短的示例，希望对您有所帮助。基本上它是一个简单`JFrame`的`DrawingPanel`（我自己的类扩展`JPanel`并绘制形状）。此面板将创建形状（仅 2 个用于测试）将它们添加到一个`ArrayList`并将它们绘制到`JPanel`通孔`paintComponent(..)`和一个`for`循环，它还有一个`MouseAdapter`用于`mouseClicked(..)`检查`JPanel`. 当单击时，我们遍历每个`Shape`中的`ArrayList`并检查是否`Shape`包含该点，如果是，则打印其类名并用于`instance of`检查`Shape`单击的类型并打印适当的消息：

![在此处输入图像描述](../Images/47a3c371ff57ac7816122a7936f508ca.png)

**输出**（单击两个形状后）：

> 单击了 java.awt.geom.Rectangle2D$Double
> 
> 单击了一个矩形
> 
> 单击了 java.awt.geom.Ellipse2D$Double
> 
> 点击了一个圈子

**ShapeClicker.java：**

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Rectangle2D;
import java.util.ArrayList;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class ShapeClicker {

    public ShapeClicker() {
        JFrame frame = new JFrame();
        frame.setTitle("Shape Clicker");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);

        initComponents(frame);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        //create frame and components on EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShapeClicker();
            }
        });
    }

    private void initComponents(JFrame frame) {
        frame.add(new ShapePanel());
    }
}

//custom panel
class ShapePanel extends JPanel {

    private Shape rect = new Rectangle2D.Double(50, 100, 200, 100);
    private Shape cirlce = new Ellipse2D.Double(260, 100, 100, 100);
    private Dimension dim = new Dimension(450, 300);
    private final ArrayList<Shape> shapes;

    public ShapePanel() {
        shapes = new ArrayList<>();
        shapes.add(rect);
        shapes.add(cirlce);
        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);
                for (Shape s : shapes) {

                    if (s.contains(me.getPoint())) {//check if mouse is clicked within shape

                        //we can either just print out the object class name
                        System.out.println("Clicked a "+s.getClass().getName());

                        //or check the shape class we are dealing with using instance of with nested if
                        if (s instanceof Rectangle2D) {
                            System.out.println("Clicked a rectangle");
                        } else if (s instanceof Ellipse2D) {
                            System.out.println("Clicked a circle");
                        }

                    }
                }
            }
        });
    }

    @Override
    protected void paintComponent(Graphics grphcs) {
        super.paintComponent(grphcs);
        Graphics2D g2d = (Graphics2D) grphcs;
        for (Shape s : shapes) {
            g2d.draw(s);
        }
    }

    @Override
    public Dimension getPreferredSize() {
        return dim;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T12:11:04.783

如果您正在实施`Shape`，则必须自己实施该`contains`方法。`Shape`总是返回的默认实现`false`。

如果您`Shape`的边界是您知道如何相交的曲线（或确定一个点是否在一侧或另一侧），您可以使用[奇偶规则](http://en.wikipedia.org/wiki/Even-odd_rule)。从测试点向任何不平行于直线的方向投射光线。如果交叉点的数量是奇数，则该点在内部。如果交叉点的数量是偶数，则该点在外部。

内置类实现了此方法，因此您可以使用/扩展[`Polygon`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Polygon.html),[`Ellipse2D.Double`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Ellipse2D.html)或[`RoundRectangle2D.Double`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/RoundRectangle2D.html)类，并拥有一个知道其内部的填充多边形/椭圆/圆形矩形。

# python - 让while循环在Python中继续

> ID：12933593
> 
> 赞同：0
> 
> 时间：2012-10-17T11:47:09.853
> 
> 标签：python, loops, while-loop

我正在尝试制作一个小程序，它可以判断是否输入了正确的密码，并一直要求输入正确的密码，直到输入。正确的密码是“秘密”。

我已经创建了我的 while 循环。它会要求输入密码并要求再次输入，但无论您是否第一次输入正确的密码，它都会这样做。我哪里错了？如果第一次输入正确的密码，我怎样才能让它破解？我如何保持它要求输入密码，直到输入正确？

到目前为止，这是我的代码：

```
password = raw_input('What is the password? ')
correctPassword = 'Secret'
tryAgain = raw_input ('Enter password again ')

password
while password == False:
    print 'Enter password again '
    if password == correctPassword:
        print 'You are in!'
        break 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:50:53.957

试试下面的代码： -

```
password= raw_input('What is the password? ')
correctPassword= 'Secret'

while password != correctPassword:
    password = raw_input ('Enter password again ')

print "Success" 
```

这将执行while循环，直到while循环中的`password`输入不等于正确的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T11:55:35.453

这是正确的代码。

```
correctPassword= 'Secret'
while True:
    password= raw_input('What is the password? ')
    if password == correctPassword:
        print 'You are in!'
        break
    print 'Enter password again ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T18:33:40.937

这是我的代码

```
password = 'password'
Get_password = input("Enter the password: ")
while Get_password != password:
     print("the password you entered is not correct, enter the correct   password")
     break
print("You are logged in!") 
```

# apache - Pound & Apache：REMOTE_HOST 包含代理主机

> ID：12933597
> 
> 赞同：0
> 
> 时间：2012-10-17T11:47:32.270
> 
> 标签：apache, localhost, reverse-proxy

我有一台运行 Ubuntu 12.04 LTS、Pound 2.6 和 Apache 2.2 的服务器。我还安装并启用了 apache 模块 mod_rpaf（从[https://github.com/gnif/mod_rpaf](https://github.com/gnif/mod_rpaf)安装）以确保在变量 REMOTE_ADDR 中出现真实的用户 IP 地址而不是代理的地址。这工作正常，但变量 REMOTE_HOST 不会被 mod_rpaf 更改。此变量包含“localhost”，而不是给定用户 IP 地址的主机。

你能帮我吗？

这是我的 mod_rpaf 配置：

```
root@perseus ~ # cat /etc/apache2/mods-enabled/rpaf.conf 
RPAF_Enable       On
RPAF_ProxyIPs     127.0.0.1
RPAF_Header       X-Forwarded-For
RPAF_SetHostName  On
RPAF_SetHTTPS     On
RPAF_SetPort      On 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T10:17:01.193

Ubuntu LTS 12.04 中存在一个错误，它完全阻止 rpaf 工作。

[https://bugs.launchpad.net/ubuntu/+source/libapache2-mod-rpaf/+bug/1002571](https://bugs.launchpad.net/ubuntu/+source/libapache2-mod-rpaf/+bug/1002571)

解决方法

在 rpaf.conf 中替换

```
<IfModule mod_rpaf.c> 
```

经过

```
<IfModule mod_rpaf-2.0.c> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:13:03.353

检查有关缺少 REMOTE_HOST 的先前问题的[这些答案：](https://stackoverflow.com/questions/4178827/message-undefined-index-remote-host-in-server)

REMOTE_HOSTS 是一个变量，可能会或可能不会由 apache 填充（如果不设置它会更好，否则它意味着 apache 对每个传入请求进行 DNS 查询）。因此，您的代码中的任何内容都不应依赖 REMOTE_HOST。任何应用程序都不应假定此变量将存在并正确填充。

mod_rpaf 做了它的设计，文档：

> 将 REMOTE_ADDR、HTTPS 和 HTTP_PORT 设置为上游代理提供的值。

现在您有一个工作的 REMOTE_ADDR，这是您应该信任的唯一变量，如果您真的需要，请在 REMOTE_HOST 中复制它，然后在您的应用程序代码中简单地进行操作。

# linux - 如何在 Linux 上将 RaspberryPi 的 I2C 时钟配置为 100K

> ID：12933599
> 
> 赞同：5
> 
> 时间：2012-10-17T11:47:45.120
> 
> 标签：linux, linux-device-driver, raspberry-pi

有人可以帮助将 RaspberryPi 上的 I2C 时钟设置为 100kHz 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:59:51.950

Afaik GPIO 定时器中断尚未进入稳定内核，但您可以查看[http://www.raspberrypi.org/phpBB3/viewtopic.php?f=44&t=7509](http://www.raspberrypi.org/phpBB3/viewtopic.php?f=44&t=7509)

# regex - Perl：用文件中的另一个相应的数组元素替换许多数组元素

> ID：12933603
> 
> 赞同：0
> 
> 时间：2012-10-17T11:47:57.770
> 
> 标签：regex, perl

我正在尝试用文件中另一个相应的数组元素替换许多数组元素，但它需要很长时间才能执行。有没有更简单的方法？下面是我的代码：

```
open( my $in,  '<', "Test.txt")  or die "cannot open Test.txt $!";
open( my $out, '>', "TestFinal.txt") or die "cannot create TestFinal $!";
while( <$in>)
{ 
    for(my $i=2 ; $i<=$LastRowGlossary; $i++)
    {
        s/$variable[$i]/$vardescription[$i]/g;
    }
    for(my $j=2 ; $j<=$LastRowTable; $j++)
    {
        s/$COVERAGE_TYPE_CODE[$j]/$TCOVERAGE[$j]/g;
        s/$CVG_TEST_CRIT_CD[$j]/$TCVG_TEST_CRIT_TYP[$j]/g;
    }

    print {$out} $_;

}
close $in; 
close $out; 
```

请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:43:58.237

有时，生成正则表达式可以帮助：

```
#!/usr/bin/perl
use warnings;
use strict;

my @variables =    qw/a b c d e f g h/;
my @descriptions = qw/A B C D E F G H/;

my %replace;
@replace{@variables} = @descriptions;

my $string = 'xaxbxcxdxexfxgxhx';

my $pattern = '(' . join('|', map quotemeta, @variables) . ')';

$string =~ s/$pattern/$replace{$1}/g;

print "$string\n"; 
```

# iphone - 苹果地图：获取方向

> ID：12933604
> 
> 赞同：0
> 
> 时间：2012-10-17T11:47:59.503
> 
> 标签：iphone, dictionary

如何使用 Apple 地图获取两地之间的方向？我可以提供那两个地方的经纬度吗？是否可以在我的应用程序本身中显示方向？或者我是否需要在苹果 iPhone 的内置地图应用程序中显示方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:05:49.767

您可以将用户发送到 iOS6 中的导航应用程序或 iOS6 之前的谷歌地图。

这是一个示例代码：

```
 Class itemClass = [MKMapItem class];
        if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
            // iOS 6 MKMapItem available
            MKPlacemark* place = [[MKPlacemark alloc] initWithCoordinate:_targetLocation addressDictionary:nil];
            MKMapItem* destination = [[MKMapItem alloc] initWithPlacemark:place];
            destination.name = @"Name Here!";
            NSArray* items = [[NSArray alloc] initWithObjects: destination, nil];
            NSDictionary* options = [[NSDictionary alloc] initWithObjectsAndKeys:
                                     MKLaunchOptionsDirectionsModeDriving,
                                     MKLaunchOptionsDirectionsModeKey, nil];
            [MKMapItem openMapsWithItems:items launchOptions:options];
        } else {
            // Pre-iOS 6
            CLLocationCoordinate2D coords = _lastLocation.coordinate;

            NSString *stringURL = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%g,%g&daddr=%g,%g", coords.latitude, coords.longitude, _targetLocation.latitude, _targetLocation.longitude];
            NSURL *url = [NSURL URLWithString:stringURL];
            [[UIApplication sharedApplication] openURL:url];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T14:50:30.537

这是在 Apple 地图上显示方向的工作代码。它适用于当前地点到您的目的地，您只需要传递目的地的纬度和经度。

```
double destinationLatitude, destinationLongitude;
destinationLatitude=// Latitude of destination place.
destinationLongitude=// Longitude of destination place.

Class mapItemClass = [MKMapItem class];
        if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
        {

            // Create an MKMapItem to pass to the Maps app
            CLLocationCoordinate2D coordinate =
            CLLocationCoordinate2DMake(destinationLatitude,destinationLongitude);
            MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate
                                                           addressDictionary:nil];
            MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
            [mapItem setName:@"Name/text on destination annotation pin"];

            // Set the directions mode to "Driving"
            // Can use MKLaunchOptionsDirectionsModeDriving instead
            NSDictionary *launchOptions = @{MKLaunchOptionsDirectionsModeKey : MKLaunchOptionsDirectionsModeDriving};
            // Get the "Current User Location" MKMapItem
           MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];
            // Pass the current location and destination map items to the Maps app
            // Set the direction mode in the launchOptions dictionary
            [MKMapItem openMapsWithItems:@[currentLocationMapItem, mapItem]
                           launchOptions:launchOptions]; 
```

# c# - sql server 中 System.Version 的数据类型

> ID：12933610
> 
> 赞同：28
> 
> 时间：2012-10-17T11:48:16.100
> 
> 标签：c#, .net, sql-server, system.version

在 SQL Server中存储[System.Version](http://msdn.microsoft.com/en-us/library/system.version.aspx)的最佳方式是什么？

当我使用 varchar 类型时，按 asc 排序的结果是：

```
1.0.0.0
11.0.0.0
12.0.0.0
2.0.0.0 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T11:58:28.370

您可以使用 varchar 列

你可以这样订购

```
SELECT *
FROM t_version 
ORDER BY CAST('/' + vid + '/' AS HIERARCHYID) 
```

SQL fiddle 今天不工作，否则我可以展示一个演示

请运行它进行测试

```
 SELECT * FROM 
( VALUES 
        ( '1.0.0.0' ),
        ( '11.0.0.0' ),
        ('12.0.0.0'),
        ('2.0.0.0') ) AS vid ( vid ) 
ORDER BY CAST('/' + vid + '/' AS HIERARCHYID) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T11:58:46.483

只需将其存储为普通 varchar，这对于使用 PARSENAME 将字符串和顺序拆分为 4 个单独列的最多 4 个部分的版本非常有用。

IE

```
ORDER BY PARSENAME(version,4),
         PARSENAME(version,3),
         PARSENAME(version,2),
         PARSENAME(version,1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T22:01:01.700

为了支持混合长度版本之间的排序（例如“1.2”与“1.2.3.4”），可以执行到小数的映射（作为内联表值函数）。

```
create function Common.ufn_OrderableVersion(@pVersion nvarchar(100))
returns table
as
/*---------------------------------------------------------------------------------------------------------------------
    Purpose:  Provide a mapping from Versions of the form 'a.b.c.d', 'a.b.c, 'a.b', 'a', null to 
              an orderable decimal(25, 0) 

              Since Parsename() doesn't apply easily to mixed length comparisions (1.2 vs 1.2.3.4)

 Test Cases:
              select * from Common.ufn_OrderableVersion(null);       -- null
              select * from Common.ufn_OrderableVersion('0');        -- 1000000000000000000000000
              select * from Common.ufn_OrderableVersion('1');        -- 1000001000000000000000000
              select * from Common.ufn_OrderableVersion('1.2.3.4');  -- 1000001000002000003000004

              select Version
                from 
                   (
                      select '1.3.5.3' as Version
                      union all
                      select '1.2.5.3' as Version
                      union all
                      select '1.1.5.3' as Version
                      union all
                      select '1.3.5.2' as Version
                      union all
                      select null as Version
                      union all                      
                      select '' as Version
                      union all
                      select '2' as Version
                      union all
                      select '1.2' as Version
                      union all
                      select '1' as Version                      
                   ) v 
               order by (select Value from Common.ufn_OrderableVersion(Version))

    Modified    By              Description
    ----------  --------------  ---------------------------------------------------------------------------------------
    2015.08.24  crokusek        Initial Version
  ---------------------------------------------------------------------------------------------------------------------*/
return         
    -- 25 = 1 + VersionPositions * MaxDigitsPerSegment
    select convert(decimal(25,0), '1' + 
           stuff((select format(Value, '000000')
                    from 
                       (
                          select convert(int, Value) as Value, RowNumber 
                              -- Support empty string and partial versions. Null maps to null
                            from Common.ufn_SplitUsingXml(@pVersion + '.0.0.0.0', '.') -- pad right
                           where RowNumber <= 4 -- trim right
                       ) as v
                   order by RowNumber
                     for xml path ('')
                ), 1, 0, '')
           ) as Value
go 
```

依赖：

```
create function Common.ufn_SplitUsingXml
(
   @pList       nvarchar(max),
   @pDelimiter  nvarchar(255)
)
returns table
as
/*---------------------------------------------------------------------------------------------------------------------
    Purpose:  Split an Identifier using XML as an inline table valued function.  
              Using the SQL Server CLR (C#) capability would be the most efficient way to support this.

   Warnings:  Will not work if the input contains special XML characters like '<', '>' or '&'.
              Caller must add "option (maxrecursion 0)" for lists greater than 100 (it can't be added within the ufn)                  

    Modified    By              Description
    ----------  --------------  ---------------------------------------------------------------------------------------
    2015.08.24  inet            http://sqlperformance.com/2012/07/t-sql-queries/split-strings
  ---------------------------------------------------------------------------------------------------------------------*/
return 
(  
  select Value = y.i.value('(./text())[1]', 'nvarchar(4000)'),
         row_number() over (order by (select null)) as RowNumber 
  from 
  (  
    select x = convert(XML, '<i>' 
       + replace(@pList, @pDelimiter, '</i><i>') 
       + '</i>').query('.')
  ) AS a cross apply x.nodes('i') AS y(i)
  -- option (maxrecursion 0) must be added by caller for lists greater than 100
);
go 
```

比较：

```
alter function Common.ufn_CompareVersions
(
   @pVersionA nvarchar(100),
   @pVersionB nvarchar(100)
)
returns table
as
/*---------------------------------------------------------------------------------------------------------------------
    Purpose:  Compare Version of the form 'A.B.C.D'.  
              Comparing versions of different lengths is also supported 'A.B'.

 Test Cases:
              select Result from Common.ufn_CompareVersions('1', null) -- 1
              select Result from Common.ufn_CompareVersions(null, '1') -- -1
              select Result from Common.ufn_CompareVersions('1', '1') -- 0
              select Result from Common.ufn_CompareVersions('1', '2') -- -1
              select Result from Common.ufn_CompareVersions('2', '1') -- 1
              select Result from Common.ufn_CompareVersions('1', '1.2') -- -1
              select Result from Common.ufn_CompareVersions('1.2', '1') -- 1
              select Result from Common.ufn_CompareVersions('1.2.3.4', '1.2.3.4') -- 0
              select Result from Common.ufn_CompareVersions('1.2.3', '1.2.3.4') -- -1
              select Result from Common.ufn_CompareVersions('1.2.3.4', '1.2.3') -- 1
              select Result from Common.ufn_CompareVersions('1.9.3.4', '1.2.3.4') -- 1
              select Result from Common.ufn_CompareVersions('1.2.3.4', '1.9.3.4') -- -1
              select Result from Common.ufn_CompareVersions('1.002', '1.2') -- 0
              select Result from Common.ufn_CompareVersions('1.2', '1.2.0') -- 0

    Modified    By           Description
    ----------  -----------  ------------------------------------------------------------------------------------------
    2015.08.24  crokusek     Initial Version
  ---------------------------------------------------------------------------------------------------------------------*/
return    
    with Compares as
    (
      select (select IsNull(Value, 0) from Common.ufn_OrderableVersion(@pVersionA)) as A,
             (select IsNull(Value, 0) from Common.ufn_OrderableVersion(@pVersionB)) as B
    )
    select case when A > B then 1
                when A < B then -1
                else 0
           end as Result
      from Compares
go 
```

# magento - magento 将上次登录添加到客户网格

> ID：12933611
> 
> 赞同：0
> 
> 时间：2012-10-17T11:48:18.007
> 
> 标签：magento, login, grid

我是 Magento 的新手。我正在尝试添加显示在客户网格上的最后一个登录值。它返回一个空值。我已经阅读了其他教程，但它并没有太大帮助。Magento 版本是 1.7。这是我的代码：

```
 $customer = Mage::getSingleton('customer/session')->getCustomer();  
        $logCustomer = Mage::getModel('log/customer')->load($customer  ->getId());  
        $lastVisited = $logCustomer->getLoginAt();

    $this->addColumn('$lastVisited', array(
        'header'    => Mage::helper('customer')->__('Last Login'),
        'type'      => 'datetime',
        'align'     => 'center',
        'index'     => '$lastVisited',
        'gmtoffset' => true
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:15:32.023

Magento 将登录时间存储在下表中： `log_customer` 而且，此数据会定期清理（请参阅：`Mage_Log_Model_Resource_Log::_cleanCustomers`通过 Magento cron 触发）。

有不同的方法来处理你的任务。

1）非持久性 - 我只是想看看最近的数据（我可以忽略 log_customer 定期清理）

在这种情况下，您可以只依赖来自`log_customer`管理客户网格的数据并将其显示在其中。扩展 Mage_Adminhtml_Block_Customer_Grid 并在 _prepareCollection 中添加以下内容：

```
$collection->getSelect()->columns(array('last_login_at' => new Zend_Db_Expr ("(SELECT login_at
FROM  `log_customer` 
WHERE customer_id =e.entity_id
ORDER BY log_id DESC 
LIMIT 1)"))); 
```

前：`$this->setCollection($collection);`

注意：使用适当的 Magento 函数来获取 log_customer 表名，我的查询只是举例

2) Persistent - 我想一直看到数据

1.  向客户实体添加一个新属性，称为：（`last_login_at` 日期时间）。
2.  向事件添加观察者以`custom_login`更新此属性。
3.  使用`addColumn`网格中的函数来显示这个新属性。

@user1414056

关于您的代码：

*   bixe 提出了一个公平的观点`'$lastVisited'`（这只是表明缺乏 php 编程经验
*   您似乎对编程也很陌生（通常），因为 addColumn 只被调用一次......您如何期望您的代码有意义？

有了对 Zend 框架和 OOP 编程的更好理解，您将能够使用 Magento 实际工作并完成工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T12:18:37.147

你的 '$lastVisited' 不能工作：在 php 变量中，只有当它们在双引号中时才会在字符串中进行评估。

**编辑：**

好的，magento 的列系统仅在链接到网格的集合中可用时才显示值..

您必须添加要在网格集合中显示的日志信息。例如，看看`Mage_Adminhtml_Block_Customer_Online_Grid::_prepareCollection()`

完成后，您将添加您的列：

```
$this->addColumn('login_at', array(
        'header'    => Mage::helper('customer')->__('Last Login'),
        'type'      => 'datetime',
        'align'     => 'center',
        'index'     => 'login_at',
        'gmtoffset' => true
    )); 
```

# c# - ShowDialog 未进入 MDI 表单

> ID：12933613
> 
> 赞同：1
> 
> 时间：2012-10-17T11:48:24.987
> 
> 标签：c#, winforms

我正在使用 MDI 来做学术项目。

我的问题是我不能调用带有异常的表单对象，`ShowDialog()`如下所示，任何人都可以帮助解决这个问题。

![在此处输入图像描述](../Images/cb32059acbc201b288ebfa60153d14b5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:53:42.520

您收到错误是因为您正在调用的表单是 MDI 应用程序的 mdichild。摆脱`TopLevel`您的 Child 表单的错误设置属性为`false`.

```
frm.TopLevel = false; 
```

# c# - 在 C# 中使用 Lua 协程时，是否有可能让 Lua 协程返回到 C#？

> ID：12933621
> 
> 赞同：0
> 
> 时间：2012-10-17T11:48:53.503
> 
> 标签：c#, lua

在我正在制作的游戏中，我主要使用 C# 开发它，但我想使用 Lua 协程处理一些游戏逻辑，因为它们可以很好地表示跨多个帧的动作。我以前从未真正使用过 Lua，所以我不确定这是否可行。理想情况下，我希望 C# 游戏更新功能能够将一个或多个 Lua 协程添加到队列中，然后在每一帧中迭代队列，执行每个协程直到它产生或完成。我只想知道这是否可行，如果可以，如何实现，因为它似乎不符合 Lua 使用的“lua_dofile”范式。

这是一些 C# 伪代码来说明我的意思：

```
GameUpdate()
{
  // Update game logic
  // (which may add one or more Lua coroutines to the queue)

  // Update input, physics, sound, etc

  // In Lua:
  //  For each coroutine in queue,
  //  execute it until it reaches a yield,
  //  or it finishes, whichever comes first
}

GameRender()
{
  // Render a frame
} 
```

更新：这篇文章（http://www.gamedev.net/topic/585128-luainterface-and-coroutines/）给出了我正在寻找的答案。简而言之，这是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:30:43.887

是的，这是可能的。它非常适合“dofile 范例”：宿主应用程序公开了一种方法，让脚本注册回调以供宿主调用；例如`RegisterEventHandler(foo)`,`hostTypeInstance.OnFoo = foo`等。

当宿主运行用户脚本时，脚本可以传递宿主回调函数/协程，宿主将句柄保存给它们。

主机可以在每一帧调用/恢复函数/协程，无论何时单击鼠标，或者您为调用它们而提出的任何其他要求。

# java - Java dom4j org/jaxen/NamespaceContext 异常

> ID：12933622
> 
> 赞同：10
> 
> 时间：2012-10-17T11:48:54.307
> 
> 标签：java, dom4j

我已经下载了[dom4j-1.6.1](http://downloads.sourceforge.net/project/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar?r=http://sourceforge.net/projects/dom4j/files/dom4j/1.6.1/&ts=1350474200&use_mirror=garr)并将其添加到 java 的构建路径中。我也熟悉[java.lang.NoClassDefFoundError: org/saxpath/SAXPathException](https://stackoverflow.com/questions/10897922/java-lang-noclassdeffounderror-org-saxpath-saxpathexception)但我不断收到异常。

附上一个片段：

```
public class Parser {
    public static void parse(final String path) throws Exception {
        final SAXReader reader = new SAXReader();
        final Document document = reader.read(new File(path).toURI().toURL());
        if (document == null) return;
        List list = document.selectNodes("/");
        for (Object o : list)
            System.out.println(o);
    }
} 
```

当我运行它时，我得到以下堆栈跟踪

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jaxen/NamespaceContext
    at org.dom4j.DocumentFactory.createXPath(DocumentFactory.java:230)
    at org.dom4j.tree.AbstractNode.createXPath(AbstractNode.java:207)
    at org.dom4j.tree.AbstractNode.selectNodes(AbstractNode.java:164)
    at Parser.parse(Parser.java:15)
    at Main.main(Main.java:6)
Caused by: java.lang.ClassNotFoundException: org.jaxen.NamespaceContext
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 5 more 
```

任何线索是什么导致错误？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-17T11:51:16.687

**例外：**

```
java.lang.ClassNotFoundException: org.jaxen.NamespaceContext 
```

也许您忘记将 包含`jaxen.jar`在您的 Java 构建路径中。

有关使用 SAXReader 解析某些 XML 并遍历节点的更具体说明： [https ://stackoverflow.com/a/24959790/445131](https://stackoverflow.com/a/24959790/445131)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T11:52:03.743

找到了解决方案。我必须在 java 的构建路径中下载并包含[jaxen 。](http://jaxen.codehaus.org/releases.html)

# c# - 由于 C# 中的自定义光标路径，可移植性问题

> ID：12933623
> 
> 赞同：0
> 
> 时间：2012-10-17T11:48:54.773
> 
> 标签：c#, wpf, clickonce, custom-cursor

我正在使用`hand2.cur`在我的 C#-WPF 应用程序中命名的自定义光标。我已将光标添加到一个名为的文件夹中，该文件夹`Images`包含我在应用程序中使用的所有图像。但是我意识到我不能添加相对路径来使用我的自定义光标：

```
 Cursor newCur = new Cursor("Images\\hand2.cur");
    window.Cursor = newCur; 
```

所以我用了这个：

```
 string absolute = System.IO.Path.GetFullPath("hand2.cur");
    Cursor newCur = new Cursor(absolute);
    window.Cursor = newCur; 
```

这会尝试在文件夹中查找`hand2.cur`文件`\bin\Release`。所以我在那里添加了文件，我让它工作了。

但问题是，如果我`Publish`这个应用程序并在另一台计算机上使用它，它就不起作用。现在问题出在光标文件路径上，因为如果我在评论这 3 行之后部署它，它就可以正常工作。那么我该怎么做才能纠正这个问题呢？

我`Image`在我的 XAML 代码中使用该文件夹中的其他图像，它们似乎可以正常移植。但话又说回来，我对 WPF 的了解是有限的，所以如果有人有任何想法，那会有所帮助。

编辑：我已将我的图像文件夹添加到项目中。我还将光标文件的构建操作设置`hand2.cur`为`Embedded Resource`. 但是，当我使用以下两行时，我得到一个`XAMLParseException`.

```
 System.Windows.Resources.StreamResourceInfo info = Application.GetResourceStream(new Uri("pack://application:,,,/Slideshow;component/Images/hand2.cur"));
        window.Cursor = new System.Windows.Input.Cursor(info.Stream); 
```

`Inner Exception`我查看错误详细信息时的字段为：`{"Cannot locate resource 'images/hand2.cur'."}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:27:29.740

您可以使光标成为您的应用程序/程序集中的资源，然后将[GetResourceStream](http://msdn.microsoft.com/en-us/library/ms596994%28v=vs.110%29.aspx)与[pack Uri](http://msdn.microsoft.com/en-us/library/aa970069.aspx)一起使用到资源位置。将 StreamResourceInfo 的 Stream 传递给 Cursor 的 ctor。例如

```
var info = Application.GetResourceStream(new Uri("pack://application:,,,/Images/hand2.cur"));
var cursor = new Cursor(info.Stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:19:36.833

`hand2.cur`将光标文件添加到`Resource1.resx`资源文件后，我已经完成了这项工作。然后我在我的代码中使用了以下语句：

```
window.Cursor = new Cursor(new System.IO.MemoryStream(MyNameSpace.Resource1.hand2)); 
```

# javascript - 单击打印按钮后如何将用户发送到页面

> ID：12933624
> 
> 赞同：0
> 
> 时间：2012-10-17T11:48:54.753
> 
> 标签：javascript, button, printing, onclick

```
<button type="button" onClick="window.location.href='http://mywebsite.com';window.print();return false;">Print</button> 
```

以上工作，但我想先打印，然后有一个短暂的延迟，然后将用户发送到指定的页面。

我试过这个没有成功：

```
<button type="button" onClick="setTimeout('window.location.href='http://mywebsite.com', 100);window.print();return false;">Print</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:00:32.833

此代码需要 jquery [http://jquery.com/](http://jquery.com/)

请注意，setTimeout() 以毫秒为单位，100 毫秒的延迟不会被用户察觉。

```
<button type="button" id="print_button">Print</button>

<script>
$().ready(function() {
  $(document.getElementById('print_button')).click(function() {
    window.print()

    setTimeout(function() {
       window.location.href = 'http://mywebsite.com'
    }, 5000)

    return false
  })
})
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:11:27.423

试试这个代码，这和你用的代码一样，我刚刚编辑过

```
<button type="button" onClick="setTimeout('window.location.href=\'http://www.google.com\'', 3000);window.print();return false;">Print</button> 
```

这对我有用。

# javascript - IE 中的 typeof<=8 用于本机函数

> ID：12933625
> 
> 赞同：5
> 
> 时间：2012-10-17T11:48:59.593
> 
> 标签：javascript, internet-explorer

我有一个变量 obj

obj 可以是任何东西，我想检测 obj 是否是一个函数。通常我会做

```
typeof obj === 'function' 
```

当 obj 是本机函数时，问题出在 IE <= 8 中（至少知道它发生在 window.open 和 window.alert 中）。当对象为 window.open === 'object' 时，在 IE typeof obj 中

**有没有一种可靠的方法来检查 window.open 是否真的是一个函数？**

我看到 jQuery 在这方面也失败了

```
$.isFunction(window.open) => false //in IE 
```

这显然在 jquery 1.3 或其他版本中被删除，不知道在此之前他们是如何测试它的。

**补充：** 一种方法似乎是打电话

```
Function.prototype.apply.apply(window.open) 
```

如果这不会引发错误，则 window open 是一个函数。如果你这样做

```
Function.prototype.apply.apply({}) 
```

然后 IE 抛出错误“预期功能”。但是打开一个窗口来检查一个变量是否是一个函数并不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T15:50:25.097

说到原生浏览器功能，特征检测就足够了：

```
if (window.open) {
    window.open(...)
} 
```

如果有人覆盖了本机函数，请不要使用他们的代码。他们不应该这样做，而您是在自找麻烦。

没有上下文也很难回答这个问题。您正在传入`obj`并将其作为函数调用。如果您传入多种数据类型并根据类型执行不同的操作，我认为您不应该在这里处理函数。由于浏览器的怪癖，显式创建一个函数来动态调用另一个函数并且不进行错误检查。

# c++ - C++ 使用字符串和类实例作为指针向 STL 映射添加条目

> ID：12933627
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:49:03.977
> 
> 标签：c++, stl, map, insert

您好，这是我第一次使用 STL 地图，我想知道如何在地图中添加新条目。

这是我的代码：

```
map<string, Account *> accounts;
string key = "blah";

accounts[key] = Acc;

error: expected primary-expression before ‘;’ token 
```

我应该使用 .insert() 函数还是这种方法相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:11:39.213

我解决了以下问题

```
Account* Acc;
Acc = new Account(args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:50:39.440

`*`之后的 Acc真的没有任何必要。编译器已经知道它是一个指针，因为您将它声明为一个。

```
map<string, Account *> accounts;
Account* Acc = ...;
string key = "blah";
accounts[key] = Acc; // Fine 
```

# c++ - C++：强制模板类型实现方法

> ID：12933634
> 
> 赞同：4
> 
> 时间：2012-10-17T11:49:19.917
> 
> 标签：c++, templates, interface

我有一个模板类，我想知道是否可以强制模板类类型实现某个接口，特别是我想强制类型重载`operator=`方法。在Java中我会写：

```
public class Tree<T implements IComparable>{
    public Tree(Vector<T> x){...}
} 
```

C ++中的替代方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:56:59.370

只需编写代码假设它确实如此。如果没有，当用户传入不符合的类型时，它将无法编译。这里不需要明确的特征。但是到底为什么你需要一个像 IComparable 这样的接口呢？模板是鸭子类型的。

但是模板错误可能会很糟糕。您可以使用类型特征和静态断言来简化此操作。但是，标准没有提供这样的特征，因此您必须使用 SFINAE 编写一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T11:53:16.810

## 简短的回答：

不; 没有语言功能可以做到这一点。

## 肖战回答：

可以使用`SFINAE`静态断言（在编译时评估的断言）来实现您想要的效果。不幸的是，这是一个不平凡的过程，需要对模板元编程有很好的理解。

## 长篇回答：

这些功能被建议用于新的 C++11 标准，但没有通过审查过程。在此处阅读更多信息[http://en.wikipedia.org/wiki/Concepts_(C%2B%2B)](http://en.wikipedia.org/wiki/Concepts_(C%2B%2B))。在当前会议（波特兰 10 月 12 日至 19 日）上，Herb Sutter 建议我们应该尝试一个两阶段的发布（一个次要版本，然后是一个新功能版本），并且概念将包含在第一个次要版本中。该提案是否被接受将在会后公布。

# sql-server - How do I create an Outlook calendar subscription from my web/app server?

> ID：12933644
> 
> 赞同：1
> 
> 时间：2012-10-17T11:49:45.127
> 
> 标签：sql-server, asp.net-mvc, calendar, outlook, icalendar

I have a website that is a calendar with all the basic features (ASP.NET MVC and SQL Server). People can enter events, view others events, etc. One person asked me if there was a way they can see these events in their Outlook calendar - as a second calendar.

I have all of the data on the server. Is there a recommended way to have Outlook point to my web server or DB for a calendar? I see there are ways to [generate iCal files](http://sourceforge.net/projects/dday-ical/) from C#.

If so, how would this data stay in sync as new events are created, deleted, etc? A one time dump would be ok but the concern would be that the data would get stale. Is there a solution that would keep the reference dynamic to keep them in sync. (it would only need to be a one way transfer, i don't expect the need to create or delete from Outlook, so outlook is just read only)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:39:48.303

I think you can create [iCalendar](http://en.wikipedia.org/wiki/ICalendar) file,then [publish](http://office.microsoft.com/en-us/outlook-help/introduction-to-publishing-internet-calendars-HA010174355.aspx?CTT=3) it ,so let clients subscribe your internet calendar because internet calendar subscription is periodically synchronized with a calendar that is saved on a web server,and any updates to the internet calendar are downloaded automatically into MS Outlook.

You can use [DDay.Ical](http://sourceforge.net/projects/dday-ical/) library for creating (.ics) files using C#.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:19:53.557

assuming your question is about how to keep the client and server side synched, and since you only mention outlook as client, there is a custom way to control the update frequency: microsoft has a custom calendar property: X-PUBLISHED-TTL (see [microsoft msdn calendar](http://msdn.microsoft.com/en-us/library/ee178699%28v=exchg.80%29.aspx))

> 2.1.3.1.1.15 Property: X-PUBLISHED-TTL
> 
> Brief Description: Specifies a suggested iCalendar file download frequency for clients and servers with sync capabilities.

however note that this property being custom will be ignored by other calendars

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-26T13:04:50.573

You could try to keep track of the SEQUENCE of updates to each calendar entry in your database, and add a trigger on your table of calendar events so that it would automatically send event updates when something changes. Each update would have a higher SEQUENCE property than the updates that came before it, but the UID (the event's unique identifier) would remain the same.

For this to work, though, you'd need to be able to send iCalendar events from within your SQL Server, which can be possible using the following CLR project:

[github.com/EitanBlumin/sql-clr-ics](https://github.com/EitanBlumin/sql-clr-ics)

# c# - 用于解析完全限定类型名称的现有类/方法

> ID：12933646
> 
> 赞同：7
> 
> 时间：2012-10-17T11:49:48.040
> 
> 标签：c#, .net, reflection

**鉴于**我有一个存在于程序集“Foo.Bar”中的“Wibble.Wobble”类型

**并且**该程序集未加载到主应用程序加载上下文中

是否存在将以下字符串解析为其后续部分的现有公共机制：

```
"Wibble.Wobble, Foo.Bar, Version=1.0.0.0, Culture=neutral, PublicKeyToken=xyz" 
```

问的原因是我需要在运行时加载各种类型，其中一些可能在当前加载上下文中。其他的可能需要从外部程序集加载。

我知道如何从当前加载上下文中加载类型`Type.GetType("typename")`，我知道如何加载程序集并从中获取类型`Assembly.LoadFile("xyz").GetType("abc")`。我遇到的问题是，如果您尝试从程序集中加载类型，**它不应该是一个完全限定的名称**，因为您可以在使用`Type.GetType`.

解决方案本身不应该那么复杂，它只是在第一个逗号之前拆分字符串。但是我想知道是否有办法将完全限定名称作为对象表示，所以我不必这样做，它有助于定位正确的程序集，而不必遍历整个目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:55:36.717

经过我所有的挖掘，我不相信框架中有任何公开可用的东西可以做到这一点。我希望有人能向我展示不同的东西，因为我更喜欢使用经过（或应该）由比我更了解框架的人更好地测试和编写的核心功能。

因此，我推出了自己的强类型`TypeName`对象。

```
class TypeName
{
    public TypeName(string name)
    {
        var index = name.LastIndexOf(',');
        if (index > 0)
        {
            Name = name.Substring(0, index).Trim();

            AssemblyName = new AssemblyName(name.Substring(index + 1).Trim());
        }
        else
        {
            Name = name;    
        }
    }

    public string Name { get; private set; }

    public AssemblyName AssemblyName { get; private set; }
} 
```

该对象接受`string`一个类型名称或完全限定类型名称。如果它是完全限定的类型名称，则使用 AssemblyName 类设置 AssemblyName 属性，否则将其保留为 null。

# tshark - 带有 Tshark 的 Voip 通话信息

> ID：12933650
> 
> 赞同：1
> 
> 时间：2012-10-17T11:49:57.187
> 
> 标签：tshark

是否有命令使用 tshark 获取由 Wireshark“电话 > VoIP 呼叫”GUI 选项提供的信息？

# php - phpStorm，不索引文件夹/树

> ID：12933651
> 
> 赞同：34
> 
> 时间：2012-10-17T11:50:02.137
> 
> 标签：php, deployment, ide, phpstorm

我找不到 phpStorm 5 避免索引特定文件夹的能力。我不想将它从项目视图中排除，只是不想让 phpStorm 索引包含的文件夹、类、函数等。

这怎么可能？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-17T11:52:45.700

从他们的文档看来，实现这一目标的唯一方法是排除将其从项目树中隐藏的目录...

[PhpStorm 文档](http://www.jetbrains.com/phpstorm/webhelp/configuring-folders-within-a-content-root.html)

> 要让 PhpStorm 在索引、解析、代码完成等过程中忽略所选目录，请单击“排除”工具栏按钮或在所选内容的上下文菜单中选择“排除”。

# javascript - GetUserProfileByName 属性不一致

> ID：12933656
> 
> 赞同：4
> 
> 时间：2012-10-17T11:50:14.017
> 
> 标签：javascript, active-directory, user-profile

我只是想使用 GetUserProfileByName 服务从 AD 中获取有关用户的一些详细信息。为此，我选择使用 javascript。经过一些研究和大量修补后，我设法连接到 Web 服务并成功检索数据。

我使用了一个简单的 if 语句来比较属性的“名称”，以获得我想要的特定值。

```
if(xmlDoc.getElementsByTagName("Name")[i].childNodes[0].nodeValue == "Department")
{
    property = xmlDoc.getElementsByTagName("Value")[i].childNodes[0].nodeValue;
} 
```

在这一点上，我开始注意到一些差异。我似乎没有得到我在比较中指定的属性。例如，如果我指定“部门”，它会返回电子邮件。经过一番挣扎后，我最终决定将所有“名称”和“值”字段放入两个数组中而不进行任何比较，并将它们彼此相邻显示。

```
for(i = 0; i < 13 ; i++)
{
    description[i] = xmlDoc.getElementsByTagName("Name")[i].childNodes[0].nodeValue;
    elements[i] = xmlDoc.getElementsByTagName("Value")[i].childNodes[0].nodeValue;
} 
```

我从中得到的结论是，这两个字段显然不匹配：

> **UserProfile_GUID:** 65f017dc-b892-4afa-8730-5e8f73aa7b86
> **AccountName:** CAPETOWN\ANEL5
> **FirstName:** Abraham
> **SPS-PhoneticFirstName:** Nel
> **LastName:** Abraham Nel
> **SPS-PhoneticLastName:** 021 ### ####
> **PreferredName:** CRS - Info Sys & Tech
> **SPS- PhoneticDisplayName:** Contractor
> **WorkPhone:** Contractor
> **Department:** ANEL5
> **Title:** CN=Abraham Nel,OU=Standard,OU=Users,OU=End-User Services,DC=###,DC=###,DC=###
> **SPS-职位名称：** ###@###.###
> **经理：**开普敦市民中心讲台座

知道为什么会发生这种情况吗？

*尝试将整个 XML 文档解析为字符串的结果：*

> falsefalseUserProfile_GUIDNotSetb21ec99c-2ad9-40a8-9d45-a3273c92ee5afalsefalseAccountNameNotSetCAPETOWN \ AHEYNESfalsefalseFirstNameNotSetAshleyfalsefalseSPS-PhoneticFirstNameNotSetfalsefalseLastNameNotSetHeynesfalsefalseSPS-PhoneticLastNameNotSetfalsefalsePreferredNameNotSetAshley HeynesfalsefalseSPS-PhoneticDisplayNameNotSetfalsefalseWorkPhoneNotSet021 400个#### falsefalseDepartmentNotSetCRS - 信息Sys系统＆TechfalsefalseTitleNotSetAssistant Professional OfficerfalsefalseSPS-JobTitleNotSetAssistant ProfessionalOfficerfalsefalseManagerNotSetCAPETOWN \ DSISSINGfalsefalseAboutMeNotSetfalsefalsePersonalSpaceNotSetfalsefalsePictureURLNotSetfalsefalseUserNameNotSetAHEYNESfalsefalseQuickLinksNotSetfalsefalseWebSiteNotSetfalsefalsePublicSiteRedirectNotSetfalsefalseSPS-虚线-lineNotSetfalsefalseSPS-PeersNotSetfalsefalseSPS-ResponsibilityNotSetfalsefalseSPS-SipAddressNotSetfalsefalseSPS-MySiteUpgradeNotSetfalsefalseSPS-ProxyAddressesNotSetfalsefalseSPS-HireDateNotSetfalsefalseSPS-DisplayOrderNotSetfalsefalseSPS-ClaimIDNotSetfalsefalseSPS-ClaimProviderIDNotSetfalsefalseSPS-ClaimProviderTypeNotSetfalsefalseSPS-SavedAccountNameNotSetfalsefalseSPS-ResourceAccountNameNotSetfalsefalseSPS-ObjectExistsNotSetfalsefalseSPS-MasterAccountNameNotSetfalsefalseSPS-DistinguishedNameNotSetCN =阿什利Heynes，OU =开发人员，OU =用户，OU =最终用户服务,DC=##,DC=##,DC=##falsefalseSPS-SourceObjectDNNotSetfalsefalseWorkEmailNotSet##.##@##.##.##falsefalseCellPhoneNotSetfalsefalseFaxNotSetfalsefalseOfficeNotSetCape镇保萨澳BuildingfalsefalseSPS-LocationNotSetfalsefalseSPS-TimeZoneNotSetfalsefalseAssistantNotSetfalsefalseSPS-PastProjectsNotSetfalsefalseSPS-SkillsNotSetfalsefalseSPS-SchoolNotSetfalsefalseSPS-BirthdayNotSetfalsefalseSPS-StatusNotesNotSetfalsefalseSPS-InterestsNotSetfalsefalseSPS-EmailOptinNotSet##falsefalseCellPhoneNotSetfalsefalseFaxNotSetfalsefalseOfficeNotSet 开普敦 Paul Sauer BuildingfalsefalseSPS-LocationNotSetfalsefalseSPS-TimeZoneNotSetfalsefalseAssistantNotSetfalsefalseSPS-PastProjectsNotSetfalsefalseSPS-SkillsNotSetfalsefalseSPS-SchoolNotSetfalsefalseSPS-BirthdayNotSetfalsefalseSPS-StatusNotesNotSetfalsefalseSPS-InterestsNotSetfalsefalseSPS-EmailOptinNotSet##falsefalseCellPhoneNotSetfalsefalseFaxNotSetfalsefalseOfficeNotSet开普敦 Paul Sauer BuildingfalsefalseSPS-LocationNotSetfalsefalseSPS-TimeZoneNotSetfalseAssistantNotSetfalsefalseSPS-PastProjectsNotSetfalsefalseSPS-SkillsNotSetfalsefalseSPS-SchoolNotSetfalsefalseSPS-BirthdayNotSetfalsefalseSPS-StatusNotesNotSetfalsefalseSPS-InterestsNotSetfalsefalseSPS-EmailOptinNotSet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:12:41.190

搜索了一下，似乎 XML 结构不适合您使用的逻辑。XML 如下所示：

```
PropertyData*
    Name
    Values
        ValueData
            Value 
```

我不确定每个的基数，但我认为迭代`xmlDoc.getElementsByTagName('PropertyData')`然后在该块中找到`Name`and （可能是多个）`Value`元素更安全。

```
var properties = xmlDoc.getElementsByTagName("PropertyData");

for (var i = 0, item; item = properties[i]; ++i) {
    // search for Name and Value inside here
} 
```

**更新**

`FirstName`它很可能是由:`Abraham`和的多个值引起`Nel`的`Abraham Nel`。

# c# - 允许空值时如何将 nvarchar(x) 读入字符串？

> ID：12933658
> 
> 赞同：3
> 
> 时间：2012-10-17T11:50:14.707
> 
> 标签：c#, .net, sql-server

我有一个带有类型列的 SQL 表，`nvarchar(20)`并希望使用`SqlDataReader`. 看起来这样做的唯一方法是使用`GetSqlChars()`后跟`ToSqlString()`：

```
 String result = reader.GetSqlChars(index).ToSqlString().Value 
```

问题是，如果存储的值恰好为空（这对我的情况有效）我得到

```
[SqlNullValueException: Data is Null. This method or property cannot be called on Null values.]
System.Data.SqlTypes.SqlString.get_Value() +3212527 
```

所以我必须首先检查返回的值是`ToSqlString()`什么`IsNull()`：

```
SqlString asSqlString = reader.GetSqlChars(index).ToSqlString();
String result = asSqlString.IsNull() ? null : asSqlString.Value; 
```

这可行，但需要大量额外的代码，而且看起来很不优雅。

有没有更优雅的方式来达到同样的效果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T11:55:13.443

也许：

```
var value = reader.IsDBNull(index) ? null : reader.GetString(index); 
```

甚至更短：

```
var value = reader[index] as string; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T11:57:05.627

您可以使用以下[`GetValue()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getvalue.aspx)方法：

```
// define your query
string query = "SELECT YourField FROM dbo.YourTable WHERE ID = 1";

using(SqlConnection conn = new SqlConnection("......"))
using(SqlCommand cmd = new SqlCommand(query, conn))
{
   conn.Open();

   using(SqlDataReader rdr = cmd.ExecuteReader())
   {
       if(rdr.Read())
       {
          string fieldValue = rdr.GetValue(2).ToString();
       }
   }

   conn.Close();
} 
```

[`GetString`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getstring.aspx)如果数据库值为空，则方法被专门编码为抛出异常。这是设计使然。GetString 状态的文档：调用 IsDBNull 以在调用此方法之前检查空值

另一方面，如果您使用`GetValue()`并且最终以一个`DBNull`对象作为您的值，则该`DBNull.ToString`方法会自动返回`String.Empty`.

# c# - EF 4.3+ 如何获取当前数据库初始化程序

> ID：12933661
> 
> 赞同：1
> 
> 时间：2012-10-17T11:50:23.670
> 
> 标签：c#, entity-framework

如何获取当前的数据库初始化程序，以便在自动发布之前测试是否设置了正确的初始化程序？

**编辑**：我想创建一个测试用例来测试团队成员是否忘记删除这样的行：

```
Database.SetInitializer<SomeModel>(new DropCreateDatabaseAlways<SomeModel>()); 
```

但是没有像 Database.GetInitializer() 这样的方法或属性。

有没有办法获得当前的数据库初始化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:16:43.143

如果您依靠开发人员记住提交或不提交一行，我认为您会犯这个错误。

您应该考虑通过在 web.config 或 app.config 中进行设置来将初始化与代码解耦。使用 web.config 转换或对 app.config 使用[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)，您将对每个配置进行转换，例如调试、测试、生产。

在 Web.Debug.Config 中，您将指定用于该配置的初始化程序：

```
 <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
    <contexts>
      <context type="Company.Product.Infrastructure.BoundedContext, Company.Product.Infrastructure" disableDatabaseInitialization="false" xdt:Transform="Replace">
        <databaseInitializer type="Company.Product.Infrastructure.DatabaseInitializers.DebugDatabaseInitializer, Company.Product.Infrastructure" />
      </context>
    </contexts>
  </entityFramework> 
```

对于其他配置，您将替换`//entityFramework/contexts/context/databaseInitializer/@type`上述配置中的配置以使用另一个数据库初始化程序。这将允许您使用 DropCreateDatabaseAlways 进行调试，使用 DropCreateDatabaseIfModelChanges 进行测试，并禁用生产的初始化。

作为测试，我尝试在代码和 .config 中添加数据库初始化，并且 .config 优先。

# android - 安卓的人脸识别器opencv类

> ID：12933677
> 
> 赞同：1
> 
> 时间：2012-10-17T11:51:25.583
> 
> 标签：android, opencv, computer-vision, android-camera, face-recognition

我正在尝试为 Android 构建一个人脸识别应用程序。根据此链接：

[http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/index.html)

有一个名为 FaceRecognizer 的类，它是人脸识别功能的一个很好的抽象层。

在这个链接：[http](http://docs.opencv.org/) ://docs.opencv.org/它说这个 FaceRecognizer 类在“contrib”文件夹中。但是，当我下载适用于 Android 的 OpenCV 并将其导入到我的 Eclipse 工作区时，我看不到“contrib”文件夹。因此，我无法继续使用此应用程序。

你知道 FaceRecognizer 类是否可用于 Android 的 OpenCV？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:05:46.657

OpenCV4Android 绑定由包装器生成器脚本生成，因此尚不支持整个 OpenCV 库。不久前，我与 OpenCV4Android 维护者之一 Kirill Kornyakov 进行了交谈，这是他在 FaceRecognizer for OpenCV4Android 上所说的话：

> 我决定与 OpenCV 的 Java 绑定的私人开发人员 Andrey Pavlenko 再次确认。他说，为了获得全面支持，他需要修复一些问题，以帮助包装生成器脚本理解某些数据类型。这不是 FaceRecognizer 特有的，这是我们路线图中的一项普遍且非常重要的任务。所以，希望这将在即将到来的 2.4.3 之前完成，即 11 月 1 日。我们也收到了很多关于 Android 上的 FaceRec 的问题，这将是我们下一个版本的优先事项之一。

# iphone - 应用程序版本兼容性

> ID：12933679
> 
> 赞同：0
> 
> 时间：2012-10-17T11:51:30.563
> 
> 标签：iphone, ios, app-store

将 iPhone App 上传到 Appstore 后，Appstore 将如何处理设备的版本兼容性？例如“Twitter”应用程序，当单击“安装”时，它会弹出消息说“应用程序在 ios5 中兼容”如何在我要上传到 AppStore 的 iPhone 应用程序中完成？这将由 APPLE 完成，还是我们需要从头开始编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:54:06.147

它将由您为应用程序的部署目标选择的值自动设置。检查目标的构建设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:08:09.327

每当您使用来自新 SDK 版本的类并且针对的是较旧版本的操作系统时，您应该在运行时检查类是否可用。

例如：

```
if (NSClassFromString(@"TWTweetComposeViewController") != nil) {"
     TWTweetComposeViewController *twViewcontroller = ....
} else {
     // Some other twitter library
} 
```

这是检查对特定类的支持的保存方法。

# html - 选择框文本粘在FF中的框顶部

> ID：12933680
> 
> 赞同：2
> 
> 时间：2012-10-17T11:51:32.323
> 
> 标签：html, css, firefox, html-select

我有一个选择字段，无论我做什么，我都无法让文本停止粘在框的顶部。

这是它的外观示例：

![在此处输入图像描述](../Images/0ba3fd20a236d063a03cca65d82dfd11.png)

如果我使用`padding-top`它，它也会按下箭头按钮，这是我不想要的。我也试过`line-height`没有效果。

这是相关的CSS：

```
#header .nav .misc .search .search_holder .cats select {
    width: 111px;
    height: 29px;
    border-top: 1px solid #97ad00;
    border-bottom: 1px solid #97ad00;
    border-left: none;
    border-right: none;
    padding-left: 8px;
    font-family: Roboto, Arial;
    font-size: 14px;
    background: url('../images/search-cats-bg.png') 0 0 repeat-x;
    color: #b2b2b2;
}

#header .nav .misc .search .search_holder .cats select option {
    padding-top: 5px;
}

#header .nav .misc .search .search_holder .cats select option.last {
    padding-bottom: 5px;
} 
```

**编辑：**添加了 HTML。

HTML：

```
<div class="cats">
    <select id="search_cats" class="search_cats" name="cat">
        <option value="all">All Categories</option>
        <option value="sports">Sports Cards</option>
        <option value="gaming">Gaming Cards</option>
        <option value="non-sport">Non-Sport Cards</option>
        <option value="supplies" class="last">Supplies & Storage</option>
    </select>
</div> 
```

为什么会这样，我该如何解决？

**编辑：**似乎无法真正修复，发现了这个问题：

[我想在选择框中垂直对齐文本](https://stackoverflow.com/questions/5439782/i-want-to-vertical-align-text-in-select-box)

如果您查看“Shelly Skeens”的答案，那么您会发现 FF 决定将内置设置`line-height`为`normal !important`，因此它不能被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:01:41.233

在谷歌浏览器和谷歌开发者工具上运行良好![回答选择框问题](../Images/45d93c4768761a71e322f6ad098befb1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:01:21.570

尝试添加

```
.cats * { line-height: 16px; } 
```

# android - jQuery移动图像被像素化

> ID：12933683
> 
> 赞同：0
> 
> 时间：2012-10-17T11:51:35.320
> 
> 标签：android, cordova, jquery-mobile

我注意到 phonegap 中的 JQuery Mobile 在 iphone 上运行良好。但是，当我在 android 上运行类似的应用程序时，尤其是 Ldpi(320X240)，它无法正常工作。按钮等图像是像素化的。对此的任何帮助都非常感谢。

感谢广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:55:07.513

在 android 应用程序中，您可以为每个屏幕密度提供多个位图`res/drawable-ldpi` `res/drawable-hdpi`，等等...

但它在这里不起作用，因为 phonegap 将从资产文件夹加载位图。但是您可以使用 css3 媒体查询完全像 android 在您的网页中所做的那样。

例子：

*   对于 100 像素的图像，将其命名为 btn-mdpi.png，
*   创建一个 75px 的图像，命名为 btn-ldpi.png，
*   创建一个 150px 的图像，命名为 btn-hdpi.png，
*   然后创建一个 200px 的图像，命名为 btn-xhdpi.png

这是`<head>`您的网页：

```
<head>
  <meta name="viewport" content="width=device-width, target-densitydpi=device-dpi">
  <style>
    input {
        background: transparent url(btn-mdpi.png);
        height: 100px;
    }

    @media screen and (-webkit-max-device-pixel-ratio:0.75) {
        input {
        background: transparent url(assets/btn-ldpi.png);
        height: 75px;
        }
    }
    @media screen and (-webkit-max-device-pixel-ratio:1.0) {
        input {
        background: transparent url(assets/btn-mdpi.png);
        height: 100px;
        }
    }
    @media screen and (-webkit-max-device-pixel-ratio:1.5) {
        input {
        background: transparent url(assets/btn-hdpi.png);
        height: 150px;
        }
    }
    @media screen and (-webkit-max-device-pixel-ratio:2.0) {
        input {
        background: transparent url(assets/btn-xhpi.png);
        height: 200px;
        }
    }
  </style>
</head> 
```

对于每个密度，将使用与屏幕密度匹配的不同位图。好消息它也适用于 iphone 4+ 及其视网膜显示屏！

您可以阅读这篇旧的 romain nurik 帖子以了解更多信息：[http ://designbycode.tumblr.com/post/1127120282/pixel-perfect-android-web-ui](http://designbycode.tumblr.com/post/1127120282/pixel-perfect-android-web-ui)

# javascript - 如何给模块起别名？

> ID：12933688
> 
> 赞同：0
> 
> 时间：2012-10-17T11:52:03.700
> 
> 标签：javascript, html, requirejs, require, js-amd

是否可以为模块添加别名？

例如我定义了一个模块

`define('X')`

我想像这样要求它

`require(['Y'])`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:14:32.560

这应该可以解决问题：

```
require.config({
    baseUrl: 'js/',
    paths: {
        jquery: 'lib/jquery-1.8.0.min'
    }
    , urlArgs: urlArgs
});
require( ["jquery"],    function() {}); 
```

# objective-c - 分段控制不起作用

> ID：12933691
> 
> 赞同：0
> 
> 时间：2012-10-17T11:52:10.517
> 
> 标签：objective-c, ios, uisegmentedcontrol

我一直在学习 raywenderlich.com 上的一个名为 Objectively speak: [A Crash Course in Objective-C](http://www.raywenderlich.com/12444/objectively-speaking-a-crash-course-in-objective-c)的教程。在本教程中，他们使用分段控件，据我了解，我已在 IB 中正确连接。我已经尝试发布我的问题，但 5 天后我仍然没有任何帮助。

我怀疑这个问题类似于连接问题。有人可以看看我的项目，让我知道我哪里出错了。可以在此处找到 zip 文件：[选项、选项、选项](http://www.raywenderlich.com/forums//viewtopic.php?f=20&t=3663&start=20#p29950)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:16:45.417

您的 XIB 中有两个分段控件，一个在另一个之上。

问题是底部分段控件是通过 IBOutlet 连接的，但您实际上是在选择顶部分段控件的分段索引。

要修复它，请删除底部分段控件（没有约束的那个）并将 IBOutlet 连接到剩余的单个分段控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:06:16.800

在`appDelegate.m`课堂上这样做，它会奏效。它的发生是因为您不低于 iOS 5。

```
@synthesize window;
@synthesize viewController; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:08:31.230

你需要自己写你的听众。

```
[urSegmentControl addTarget:self action:@selector(segmentControlValueChangedListener:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T12:08:55.423

如果您想在界面生成器中执行此操作：

首先 - 打开 ViewController.m 类文件并创建这样的函数 - 当您更改段时，它将被调用：

![在此处输入图像描述](../Images/e293fc25e2114ee0f75000969e061cc8.png)

然后打开 ViewController.xib 并用第二个鼠标按钮点击并按住 Segmented Control 实例 - 并拉到文件响应程序。释放。它将显示如下视图：

![在此处输入图像描述](../Images/6806d0a650c6b8839e187776b14cb6d9.png)

选择新创建的函数名称。就是这样 - 现在，当值段值将被更改时，将调用**quote_opt_touch**函数，并且在调试器中您将看到“abc”。

另外-您有两个分段控件。删除其中之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:19:42.913

查看您的 xib 文件。您有两个`segmentedcontrol`声明的实例。您需要卸下底部的并将顶部的重新连接到插座。

# javascript - 使用哈希获取锚标记 ( ) 的 href

> ID：12933692
> 
> 赞同：0
> 
> 时间：2012-10-17T11:52:11.997
> 
> 标签：javascript, jquery, href

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:54:41.240

尝试这个：

```
$('a').attr('href'); 
```

如果你想选择一个更具体的添加一个类，像这样`<a href="#main" class="main"/></a>`

然后得到然后得到href 这样做`$('a.main').attr('href');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:55:25.307

做这个

```
var container = $('a').attr('href'); 
```

**或者**

```
<a href="#main" id="button"> </a> 
```

和

```
var container = $('a#button').attr('href'); 
```

这将解决您的问题

# knockout.js - 使用 express 实时更新您的网站的最佳模板引擎是什么？

> ID：12933693
> 
> 赞同：1
> 
> 时间：2012-10-17T11:52:13.560
> 
> 标签：knockout.js, express, pug

我正在使用 express，我听说过[KnockOutJS](http://knockoutjs.com/)女巫允许您绑定 dom 元素和您的 javascript 对象。

我正在使用带有 express 的 JADE 模板引擎。我认为同时使用jade和knockOut可能会很棘手。

在您看来，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:43:18.377

好吧，我不是一个真正的 Knockout 人，也不是一个熟练的 Jade 用户，但它可能是可行的，虽然我不会这样做，但归根结底，这只是一个选择和支持的问题。

对我来说合适的解决方案是使用用 Hogan 编译的 mustache 模板，并使用 Backbone 或 Spine 作为 MVVM。但是最近我做了很多 Ruby 而不是 node，我发现自己在客户端使用 Eco，因为它使用与 Erb 完全相同的语法，所以我的模板在双方都可重用，因为它们应该带有小胡子，但开销是比编译完全不同的模板语言要低得多，而且渲染速度要快一些。

但是，正如我所说，这只是一个选择问题，以及您团队中的人员如何能够高效地使用您使用的工具。这就是为什么我倾向于避免使用抽象很多东西的模板语言，例如 Jade 或 Haml，因为对于只使用 HTML（即使在那些日子很少见）而不是包装一小组模板特定代码的人来说开销可能太高了围绕 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:05:13.717

Jade 与 KnockoutJS 完全兼容，我实际上更喜欢使用两者的语法。

```
label Description
            input(data-bind="value: description") 
```

它非常干净，我之前成功使用过它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T09:03:12.567

您可以查看由 Express 团队基于 JADE 构建的实时模板化的 nodestream。我正在基于 swig 构建类似的东西。

[https://github.com/LearnBoost/nodestream](https://github.com/LearnBoost/nodestream)

# visual-studio-2010 - 将已发布的 Web 应用程序添加到安装项目？

> ID：12933710
> 
> 赞同：1
> 
> 时间：2012-10-17T11:53:09.690
> 
> 标签：visual-studio-2010, visual-studio-setup-proje

我有两个项目的解决方案 1\. WCF 服务应用程序 2\. 设置项目

我想在每次构建时将 WCF 服务应用程序的已发布输出添加到安装项目中提到的某个文件夹中。因此，当我安装由 Setup 项目生成的 msi 时，WCF 服务应用程序的已发布输出将存储在某个预定义的文件夹中。

稍后，我想通过其他方式将预定义的文件夹发布到某些 IIS。

目前，我可以手动将 WCF 服务应用程序发布到某个文件夹。但是如何自动化这个过程，以便发布的应用程序存储在安装项目的一些预定义文件夹中。

# javascript - jQuery getJSON 没有正确填充 HTML 选择

> ID：12933713
> 
> 赞同：0
> 
> 时间：2012-10-17T11:53:20.983
> 
> 标签：javascript, jquery

我有一个 HTML `<select>`：

```
<div id="content">
    <input type="button" id="get-btn" onclick="getData();"/>
    <select id="attrib-type-sel"></select>
</div> 
```

当用户单击以下按钮时，我想使用 jQuery 的`getJSON`方法来访问我的服务器，拉回数据并填充`<select>`选项：

```
$(document).ready(function() {
    $.getJSON(
        "some/url/on/my/server",
        function(data) {
        var optionsHTML = "";
        var len = data.length;
        for(var i = 0; i < len; i++) {
            optionsHTML += '<option value="' + data[i] + '">'
                + data[i] + '</option>';
        }

        $('#attrib-type-sel').html(optionsHTML);
    });
}); 
```

当我在 Firebug 中运行此代码时，我看到 AJAX 调用成功并返回以下 JSON：

```
[
    {
        "id":1,
        "name":"Snoopy",
        "tag":"SNOOPY",
        "allowsAll":false
    }
] 
```

（仅返回 1 条记录）。

但是，当返回 UI 时，当此代码触发时，它会创建一个`<select>`具有 1 个选项的选项，其内部 HTML 读取为`[object Object]`.

谁能发现这里发生了什么？看起来我`getJSON`的没问题，但是从结果中提取 JSON 并使用它来填充我的选择的代码有问题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:55:00.923

这是因为 data[i] 是一个对象。尝试使用`console.log(data[i])`来查看它的外观。

`data[i].id`并且`data[i].name`很可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:56:02.570

你需要`data[i].id`&`data[i].name`来构建你的选择。

```
for(var i = 0; i < len; i++) {
        optionsHTML += '<option value="' + data[i].id + '">'
            + data[i].name + '</option>';
} 
```

# javascript - 使用 javascript 在 webview 中更改元素高度时出错

> ID：12933718
> 
> 赞同：0
> 
> 时间：2012-10-17T11:53:49.753
> 
> 标签：javascript, android, webview

我想更改 webView(Android) 中字段的高度。我尝试使用 javascript 执行此操作，但它不起作用。

```
webView.loadUrl("javascript:(var field = document.getElementById("targetdiv");field.style.height='50px;);"); 
```

我还启用了 javascript：

```
WebSettings ws = webView.getSettings();
ws.setJavaScriptEnabled(true); 
```

还是不行。请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:57:34.963

这像这样工作

```
myWebView.loadUrl("javascript:showString('Hello World!')"); 
```

其中 showString 是一个输出给定字符串的函数（此处未显示）。

# java - 自动更新 OpenJPA 表

> ID：12933719
> 
> 赞同：1
> 
> 时间：2012-10-17T11:54:00.947
> 
> 标签：java, hibernate, jpa, openjpa

有没有办法告诉`OpenJPA`在应用程序部署时自动更新数据库中的表？

我知道hibernate有一个属性：

```
<prop key="hibernate.hbm2ddl.auto">update</prop> 
```

有没有类似的东西`OpenJPA`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:37:29.960

是的：

```
<property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema"/> 
```

[http://openjpa.apache.org/builds/2.2.0/apache-openjpa/docs/ref_guide_conf_jdbc.html#openjpa.jdbc.SynchronizeMappings](http://openjpa.apache.org/builds/2.2.0/apache-openjpa/docs/ref_guide_conf_jdbc.html#openjpa.jdbc.SynchronizeMappings)

塞巴斯蒂安

# jquery - 计算属性值总计的最佳方法

> ID：12933720
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:54:03.520
> 
> 标签：jquery

我正在尝试获取属性值的总和。该值是货币总和，例如。`$29.99`，或文本字符串，例如。`sold`.

我正在使用以下代码，我确定这是不正确的。我得到一个返回值`NaN`，我知道这意味着“不是数字”。我有一种感觉，我可能没有正确删除文本字符串、美元符号、逗号或全部三个。

非常感谢提供适当解决方案的任何帮助。谢谢。

```
var total = parseFloat($('span.buyoffer').attr('data-price').replace(/[A-Za-z$-]/g, "")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:59:26.997

```
var total;
$.each($('span.buyoffer'), function(i,v) {
    var val = $(v).attr('data-price');
    if ($.isNumeric(val)) {
        total = total + val
    }
});
//here you will have the total value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:00:23.843

`parseFloat('')`返回 NaN - 您必须先将空字符串转换为数字。最简单的方法是从中减去`0`：

```
var total = parseFloat(($('span.buyoffer').attr('data-price').replace(/[A-Za-z$-]/g, "")) - 0); 
```

@Rory McCrossan 也是正确的，使用`.data()`是首选，所以：

```
var total = parseFloat(($('span.buyoffer').data('price').replace(/[A-Za-z$-]/g, "")) - 0); 
```

但是，仅当您只有一个`<span class="buyoffer">`元素时，这仍然有效。要计算所有匹配元素的总数，您需要遍历每个元素：

```
var total = 0;
$('span.buyoffer').each(function(index, element) {
    total += $(element).data('price').replace(/[A-Za-z$-]/g, "") - 0;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:04:57.427

[http://jsfiddle.net/p324u/](http://jsfiddle.net/p324u/)

```
var sum = 0;
$("span.buyoffer").each(function() {
  var price = +($(this).attr("data-price").replace(/[^\d\.]/g, ""));
  sum += price;
}); 
```

# tridion - TaxonomyDAO 设置为文件系统，不支持

> ID：12933722
> 
> 赞同：4
> 
> 时间：2012-10-17T11:54:16.460
> 
> 标签：tridion

我正在运行 Tridion 2011 SP1，并且在我的 cd_core.xxxx.xx.xx.log 文件中收到以下警告。

```
2012-10-17 12:37:50,298 WARN  FSTaxonomyDAO - TaxonomyDAO is set to File System, which is not supported. Check your bindings settings and/or license file. 
```

我从 cd_deployer_conf.xml 中删除了以下元素

```
<Module Type="TaxonomyDeploy" Class="com.tridion.deployer.modules.TaxonomyDeploy"/> 
```

但我仍然收到警告。

我认为这个问题导致我的许多多媒体组件在发布时出现故障。如果修复这些警告的原因没有帮助，那么我至少会缩小范围。

**编辑**

我忘了提到我使用文件系统作为内容数据存储

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T11:56:20.683

存储绑定在 cd_storage_conf.xml 中。您需要检查存储配置，并且应该存储到 db。此外，如果您使用分类法，则不应从部署程序中删除。

**更新**：

据我所知，不支持到文件系统绑定的分类存储，它只能用于 DB，它与 2009 版相同，您看到的是您正在使用不支持的警告消息。我不确定您是否可以禁用此绑定。

此外，存储在本地文件系统上的元数据自 SDL Tridion 2011 SP1 起已弃用，以支持将元数据存储在数据库中。SDL 文档参考[链接](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=File%2520System%2520storage%2520of%2520Metadata%2520is%2520deprecated.%2520&sid=lcSearch.runSearch1350482590518&eventType=lcContent.loadDocconcept_CD_62F595D87FB747D9B7D370A00C529084&query=File%2520System%2520storage%2520of%2520Metadata%2520is%2520deprecated.%2520&scope=&filename=CDDepStatusFeatures.xml&docid=concept_CD_62F595D87FB747D9B7D370A00C529084&inner_id=&tid=4474dab4-eb72-4361-af76-2d0850644e38&addHistory=true&resource=)。

# graph - 在 Maple 中绘制有向平面图

> ID：12933727
> 
> 赞同：0
> 
> 时间：2012-10-17T11:54:23.690
> 
> 标签：graph, maple

我正在尝试在 Maple 中绘制有向平面图，但该命令仅接受无向图。文档没有提到这个限制。有没有办法在枫树中绘制它们？

一个小的工作示例：

```
restart:
with(GraphTheory):
G:=Graph({{1,2},{2,3},{3,4}});
DrawPlanar(G); 
```

这有效，但定义了一个无向图。通过将 {1,2} 更改为 [1,2]，边缘变为定向，并且 DrawPlanar 失败。有谁知道如何创建有向图的平面图？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T22:24:36.860

你可以使用`GraphTheory:-DrawGraph`命令。

该`DrawGraph`命令的各种显示选项不会产生与执行方式完全相同的布局`DrawPlanar`。

我不知道有什么理由`DrawPlanar`不支持有向图；它似乎只是它的编程方式。我认为`DrawPlanar`可以（重新）编程为使用`HasArc`和`HasEdge`命令等的混合，并获得更广泛的功能。

# opengl - 狮子：在全屏过渡期间连续渲染

> ID：12933728
> 
> 赞同：2
> 
> 时间：2012-10-17T11:54:24.360
> 
> 标签：opengl, osx-lion, fullscreen

在向/从全屏转换期间，我必须做什么才能继续使用 opengl 进行渲染？目前，狮子淡入淡出到白色屏幕，一旦过渡完成，我自己的渲染就会再次可见。

# java - 有谁知道用于 JSONPify 响应的 Restlet 过滤器？

> ID：12933729
> 
> 赞同：1
> 
> 时间：2012-10-17T11:54:24.457
> 
> 标签：java, jsonp, restlet

我需要通过我的 Restlet JAX-RS 服务器支持 JSONP，而实现它的最自然和不引人注目的方法是拥有一个专用的 Restlet `Filter`。

所以，我突然想到，我不可能是第一个需要它的人。另一方面，谷歌搜索结果为零。

有人知道吗？

附言

我知道怎么写，事实上我现在就在做。但是，有太多细节需要处理，看起来我要硬编码一些仅与我的服务器相关的期望。自然，我更喜欢准备好并经过测试的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T19:36:36.920

现在在 org.restlet.ext.json 模块中提供了 JsonpRepresentation 和 JsonpFilter 类，由 Mark 提供。

# google-chrome-devtools - Chrome 控制台 + 文本编辑器

> ID：12933730
> 
> 赞同：5
> 
> 时间：2012-10-17T11:54:35.577
> 
> 标签：google-chrome-devtools

我发现自己在控制台中输入了很多 javascript。例如，如果我更改某个对象的属性，我很快想查看结果。但是，每次刷新页面时，我都必须重新定义变量等。我通过使用向上键来执行此操作，因此我不必重新输入，但这会花费很多时间。我想知道其他人是怎么做到的？

终极酷炫将是一个像崇高文本这样的环境，您可以在其中编写多行代码并从那里直接在浏览器中执行它......并且仍然具有对象所有方法的自动完成列表（如在控制台中） . 显然这是不可用的，但我在控制台中输入 javascript 时对其他人的工作流程非常感兴趣。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T12:10:57.280

在 Chrome 24 的`Sources`面板中，使用`Snippets`选项卡。右键单击左侧（空白）树并`New`从上下文菜单中选择。

# hibernate - 为什么休眠中的某些关联非常不寻常，它们不寻常的原因是什么

> ID：12933731
> 
> 赞同：0
> 
> 时间：2012-10-17T11:54:35.457
> 
> 标签：hibernate, hibernate-mapping

我正在浏览hibernate文档，我得到了以下信息

***UNI = 单向*** 和***Bi = 双向***

```
 OneToOne      OneToMany         ManyToOne       ManyToMany 
Uni                  ok                UNUSUAL       MOST COMMON      
Uni with Join Tbl    UNUSUAL                        Common whn optional
Bi                   COMMON        <------ Most Common ------------>  
Bi with Join Tbl   Possible bt Unusual 
```

因此，如果我们有 Person 和 Phone Table 并且我希望只有一个人知道它的所有电话而不是相同的电话（他的所有者），为什么它不寻常？

或者为什么某些映射在其类别中更受欢迎（例如 Uni 、 Uni 与 Join 表、Bi、Bi 与 Join 表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:58:56.203

这里的关键是确保您的映射尽可能与您的架构同步。

您将 Person 和 PhoneNumber 关联的示例作为单向 OneToMany 映射。不建议这样做，因为 PhoneNumber 表不可避免地具有 Person 表的外键。因此，PhoneNumber 非常了解它的所有者。但是，如果您使用单向映射，您会假装 PhoneNumber 不知道哪个 Person 拥有它。正如 Hibernate 注释文档中所述，没有什么可以阻止您这样做。

这种方法的缺点是当你添加一个PhoneNumber 和一个Person Hibernate 时必须插入两条记录，然后更新PhoneNumber 来设置外键。三种说法。但是，如果您使用双向链接，Hibernate 可以插入已设置外键的 PhoneNumber。只需要两个语句。

# javascript - 仅使用最右边的小数点作为数值，删除其余部分

> ID：12933733
> 
> 赞同：0
> 
> 时间：2012-10-17T11:54:37.830
> 
> 标签：javascript, numbers, decimal

当用户不小心再输入两个小数点时，我只想使用最右边的小数点。

所以：1234..55 等于 1234.55

打错字很容易，但我没有看到任何好的代码来处理这个在 Javascript

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:02:33.387

找到最后一个句点，在那里拆分字符串，从第一个字符串中删除句点，然后再次将它们放在一起：

```
var index = input.lastIndexOf('.');
if (index != -1) {
    input = input.substr(0, index).replace(/\./g, '') + input.substr(index);
} 
```

演示：http: [//jsfiddle.net/Guffa/3jBb5/](http://jsfiddle.net/Guffa/3jBb5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:21:01.410

您可以简单地替换多次出现的 . （点）单。（点）

通过这种方式，它将能够处理更多的案件。

```
var str='1234...55';
var n=str.replace(/(\.)+/,".");
alert(n); 
```

*演示：http:* [//jsfiddle.net/DxKx7/](http://jsfiddle.net/DxKx7/)

# iphone - 使用旧版 Xcode 为 iOS 编程

> ID：12933734
> 
> 赞同：1
> 
> 时间：2012-10-17T11:54:39.233
> 
> 标签：iphone, ios, xcode

我对 iOS 编码很陌生，我有一个关于设置我的开发组件的问题。

我有 10.5.8 Leopard 的 MacBook Air。所以我们的问题是：编写具有 iPhone SDK 3.1.3 和 XCode 3.1.4 for Leopard (10.5.7) 的应用程序是否没有问题？创建的应用程序是否适用于所有 iphone 版本？有可能升级到山狮并使用最新的 xcode，但值得吗？考虑到我要先升级到雪豹，然后再升级到山狮。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:59:32.293

如果你想将它们发送到应用商店，这些应用必须用最新的 iOS（现在是 iOS6）编译，所以你不能用 xcode 3.1.4 编译它们。

您需要 lion 下载包含 iOS 6 sdk 的 xcode 4.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:42:25.180

看起来您的 MAC 机器的配置与最新的 Mountain Lion 操作系统不兼容。即使它支持Lion OS，这本身也很重要。

无论如何，使用 leopard，您只能开发**iOS 版本 3.2**的应用程序。因此，除非您使用最新的 SDK 编译它，否则您将无法将您的应用程序提交到 App Store。

为此，您至少需要 Lion OS（如果升级与 Mountain Lion 兼容的硬件会更好）。这样您就可以安装最新的 XCode（当前为 4.5 版）。它将允许您开发具有最新功能的功能齐全的 iOS 应用程序，并将它们上传到 Apple App Store。

希望能帮助到你。让我知道是否还有其他需要。

# iphone - 按钮按下动画

> ID：12933736
> 
> 赞同：3
> 
> 时间：2012-10-17T11:54:42.137
> 
> 标签：iphone, objective-c, ios, ipad, uianimation

所以我搜索了很多，但我没有找到我的问题的答案。

我想制作一个有两个图像的按钮，第一个图像是按钮处于正常状态时的图像，另一个图像是处于突出显示状态时的图像。问题是我希望这些图像以动画方式变化，例如，当第二个图像淡入时，第一个图像淡出。并且它们以动画时间保持不变的方式变化。

我认为的唯一方法是，制作一个自定义按钮，添加几个`ImageViews`按钮触摸事件，一个`ImageView`淡入，另一个淡出，按钮触摸事件，我可以做相反的事情。但这种方法似乎不是最合适的。有没有更好的选择，我没有看到？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:25:27.000

```
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame = CGRectMake(80, 50, 150, 40);
    [myButton setTitle:@"Say, Hi!" forState:UIControlStateNormal];
    [myButton setBackgroundImage:[UIImage imageNamed:@"xyz.png"] forState:UIControlStateNormal];
    [myButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:myButton];

-(IBAction)buttonClicked:(UIButton *)sender
{
    [UIView animateWithDuration:0.7f
                     animations:^
     {
         [sender setAlpha:0.5f];
     }
                     completion:^(BOOL finished)
     {
         [sender setAlpha:1.0f];
        [sender setBackgroundImage:[UIImage imageNamed:@"abc.png"] forState:UIControlStateNormal];   }
     ];
} 
```

您可以相应地设置动画持续时间和 alpha。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T12:17:22.297

我已经按照以下方式完成了它，就像 Ilker Baltaci 描述的那样：我将 UIButton 子类化（尽管不建议这样做，因为它是一个类集群）并向它添加了一个函数：

```
- (void) blinkAndFlipButtonAnimationWithText: (NSString*) buttonText {
    [UIView animateWithDuration: 0.2 delay: 0 options: UIViewAnimationOptionCurveLinear 
                     animations: ^{ 
                         self.alpha = 0.1;
                     } 
                     completion: ^(BOOL finished) {
                         [UIView animateWithDuration: 0.2 delay: 0 options: UIViewAnimationOptionCurveLinear 
                                          animations: ^{ 
                                              self.alpha = 1;
                                          } 
                                          completion: ^(BOOL finished) {
                                              [UIView transitionWithView: self duration: 0.25 options: (UIViewAnimationOptionTransitionFlipFromBottom | UIViewAnimationOptionCurveEaseInOut)
                                                              animations: ^{ 
                                                                  [self setTitle: buttonText forState: UIControlStateNormal];
                                                              } 
                                                              completion: ^(BOOL finished) { 
                                                                  if ([self.delegate respondsToSelector: @selector(primaCustomButtonDidFinishFlipAnimation:)]) {
                                                                      [self.delegate primaCustomButtonDidFinishFlipAnimation: self];
                                                                  } 
                                                              }
                                               ];
                                          }
                          ];
                     }
     ];
} 
```

很多块动画级联，我知道很难看！但无论如何，您可以根据需要调整动画块并排除委托回调。

然后在按钮按下的 IBAction/target-action 方法中调用该方法，例如：

```
- (IBAction) facebookButtonPresse: (id) sender {
    [self.facebookButton blinkAndFlipButtonAnimationWithText: @"+3"];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T12:05:10.600

如果您想要按钮的淡出/淡入动画，我可以用 UIImageview 替换您的自定义按钮，该 UIImageview 具有与初始 uibutton 相同的背景图像。这将是按钮操作中的第一件事。当按钮替换为 uiview cou 可以将淡出动画从初始背景图像应用到 UIImageview 到新的（选定版本）。当动画结束时，在完成块中开始另一个动画，它将所选的 iamge 淡出到正常背景 iamge。然后第二个动画结束删除你的 uiimageview 并添加你的按钮。

//将你的uiimageviews声明为ivars

```
 UIImageView *imageViewnormal = [[UIimageView alloc] initWithImage:normalIamge];
            UIImageView *imageViewhighlighted = [[UIimageView alloc] initWithImage:highlightImage]; 
```

在`UIControlEventTouchDown`按钮的操作中

```
 // make your button invisible
             yourbutton.alpha = 0;
             //add to same rect 2 imageviews with initial and selected backgrounds of uibutton

            imageViewnormal.alpha = 1;
            imageViewhighlighted.alpha = 0;

           [self.view addSubview:imageViewhighlighted];
           [self.view addSubview:imageViewnormal];

            // newImageViewWithInitialBackground needs to be inserted secondly and alpha value 1
           // newImageViewWithSelectedBackground has alpha 0 and is behind newImageViewWithInitialBackground

        [UIView animateWithDuration:0.3
                         animations:^
         {
             imageViewnormalalpha = 0;
             imageViewhighlighted.alpha = 1;
         }
                         completion:^(BOOL finished)
         {

         }]; 
```

在按钮的 UIControlEventTouchUpInside 的操作中

```
[UIView animateWithDuration:0.3
                              animations:^
              {

             imageViewnormal.alpha = 1;
             imageViewhighlighted.alpha = 0;                  

              }
                              completion:^(BOOL finished)
              {

               //Remove both of the uiimageviews aand make your button visible
             [imageViewnormal removeFromSuperview];
             [mageViewhighlighted removeFromSuperview];
             yourbutton.alpha  = 1;     

              }]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T13:08:39.667

使用下面的代码，它工作正常，我在我的项目中使用了这个代码：

```
 UIButton *myButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    myButton.frame=CGRectMake(40, 20, 80, 25);
    [myButton setImage:[UIImage imageNamed:@"normalImage.png"] forState:UIControlStateNormal];
    [myButton setImage:[UIImage imageNamed:@"highlightedImage.png"] forState:UIControlStateHighlighted];
    [myButton addTarget:self action:nil forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:myButton]; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-16T10:04:21.817

xCode 7,iOS9

```
//for zoom in
    [UIView animateWithDuration:0.5f animations:^{

        self.sendButton.transform = CGAffineTransformMakeScale(1.5, 1.5);
    } completion:^(BOOL finished){}];
// for zoom out
        [UIView animateWithDuration:0.5f animations:^{

            self.sendButton.transform = CGAffineTransformMakeScale(1, 1);
        }completion:^(BOOL finished){}]; 
```

# php - php rename 在文件名周围添加双引号

> ID：12933738
> 
> 赞同：-1
> 
> 时间：2012-10-17T11:54:44.520
> 
> 标签：php, image, rename, jpeg, double-quotes

我正在尝试重命名单个目录中的一些 jpeg。代码一半的工作原理是使用正确的文件名重命名它们，但由于某种原因，新文件名用双引号括起来，这使得它们无法从我的网页访问。

任何帮助表示赞赏！

```
$i = 10000;

foreach ($imgArray as $v) {

    $html_file_name = basename($v).PHP_EOL;
    $html_file_name =  str_replace(range(0,9),'', $html_file_name);

    $path = pathinfo($v, PATHINFO_DIRNAME);

    $target = ++$i . $html_file_name;

    rename ($v, $path . '/' . $target);

} 
```

好的，这里是 var_dump($imgArray)：

```
array(3) { [0]=> string(47) "../img/gallery/this-is-the-first/10002-vddf.jpg" [1]=> string(51) "../img/gallery/this-is-the-first/10001-vfdssddf.jpg" [2]=> string(50) "../img/gallery/this-is-the-first/10003-vddsvsf.jpg" } 
```

序列化：

```
a:3:{i:0;s:47:"../img/gallery/this-is-the-first/10002-vddf.jpg";i:1;s:51:"../img/gallery/this-is-the-first/10001-vfdssddf.jpg";i:2;s:50:"../img/gallery/this-is-the-first/10003-vddsvsf.jpg";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:18:05.460

您在文件名中有新行问题

```
 $html_file_name = basename($v).PHP_EOL;
                                    ^-------- Appending End of Line to File Name 
```

所有你需要的是

```
$i = 10000;
foreach ($imgArray as $v) {
    rename($v, pathinfo($v, PATHINFO_DIRNAME) . '/' . (++$i . str_replace(range(0,9),'',  basename($v))));
} 
```

# git - Git：使用在分支上完成的工作更新 Master

> ID：12933750
> 
> 赞同：0
> 
> 时间：2012-10-17T11:55:26.647
> 
> 标签：git, branch, master

我对 Git 很陌生。我创建了一个存储库并将一些文件添加到主分支。之后，每次想要处理特定的子项目时，我一直在做“创建新分支”，名称例如“csv_reader_branch”、“datetime_object”。

现在我有很多分支，想将这些分支推送到主分支。通常项目是不重叠的，但我希望能够在合并之前进行比较。

最佳做法是什么？

PS：我还看到许多类似问题上提到了“fork”，但我在本地运行 git，在 github 菜单中找不到任何“fork”。我错过了什么吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:41:00.500

`git diff branchname files`您可以将当前分支与存储库的其他分支进行比较。

要将分支的更改应用到您的 master，您必须签出到您的 master 分支并使用`git merge branchname`. 另一种可能性是“挑选”一个特定的提交，但请注意，它不仅适用于挑选出来的提交，还适用于所有先前的提交，因为您的分支从主分支中分离出来。

第三种可能性，如果您只想应用一个提交，并且只应用一个，是`git format-patch`在您的分支中使用并将生成的文件应用到您的目标分支`git apply`。

编辑：我忘记了，使用`git rebase`而不是第四种可能性，`git merge`但老实说，在真正擅长使用 git 之前，我会避免使用它。

无论如何，困难在于解决在两个分支中编辑文件的相同部分时发生的合并冲突。

# java - 将一组标记匹配到适当的方法/构造函数的 OO 策略

> ID：12933752
> 
> 赞同：1
> 
> 时间：2012-10-17T11:55:31.363
> 
> 标签：java, parsing, tokenize

这个问题不是专门关于使用正则表达式执行标记化的，而是关于如何匹配适当类型的对象（或对象的适当构造函数）以处理标记器输出的标记。

为了解释更多，我的目标是将包含标记行的文本文件解析为描述数据的适当对象。我的解析器实际上已经完成了，但目前是一堆`switch`...`case`语句，我的问题的重点是如何使用一个好的 OO 方法来重构它。

首先，这里有一个例子来说明我在做什么。想象一个包含许多条目的文本文件，如下两个：

```
cat    50    100    "abc"
dog    40    "foo"  "bar"   90 
```

在解析文件的这两个特定行时，我需要分别创建类`Cat`和实例`Dog`。实际上，有大量不同的对象类型被描述，有时参数数量的不同变化，如果值不存在以明确说明它们，则通常假定默认值（这意味着通常适合使用构建器创建对象时的模式，或者某些类有多个构造函数）。

每行的初始标记化是使用`Tokenizer`我创建的一个类完成的，该类使用与每种可能的标记（整数、字符串和与此应用程序相关的一些其他特殊标记类型）匹配的正则表达式组以及`Pattern`和`Matcher`。这个标记器类的最终结果是，对于它解析的每一行，它都会返回一个`Token`对象列表，其中每个对象`Token`都有一个`.type`属性（指定整数、字符串等）以及原始值属性。

对于解析的每一行，我必须：

*   `switch`...`case`关于对象类型（第一个标记）；
*   `switch`关于参数的数量并为该数量的参数选择适当的构造函数；
*   检查每个标记类型是否适合构造对象所需的参数类型；
*   如果参数类型的数量或组合不适合所调用的对象类型，则记录错误。

我目前拥有的解析器有很多`switch`/`case`或`if`/`else`到处都可以处理这个问题，虽然它可以工作，但有相当多的对象类型，它变得有点笨拙。

有人可以建议一种替代、更清洁和更“面向对象”的模式将标记列表与适当的方法调用匹配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:09:04.510

我做了类似的事情，我将解析器与代码发射器分离，我认为除了解析本身之外还有其他任何东西。我所做的是引入一个接口，解析器在它认为找到语句或类似程序元素时使用该接口调用方法。在您的情况下，这些很可能是您在问题示例中显示的单独行。因此，每当您解析了一行时，您就会调用接口上的一个方法，该方法的实现将负责其余的工作。这样您就可以将程序生成与解析隔离开来，并且两者都可以自己做得很好（好吧，至少解析器，因为程序生成将实现解析器将使用的接口）。一些代码来说明我的思路：

```
interface CodeGenerator
{
     void onParseCat(int a, int b, String c); ///As per your line starting with "cat..."
     void onParseDog(int a, String b, String c, int d); /// In same manner
}

class Parser
{
    final CodeGenerator cg;

    Parser(CodeGenerator cg)
    {
        this.cg = cg;
    }

    void parseCat() /// When you already know that the sequence of tokens matches a "cat" line
    {
         /// ...

         cg.onParseCat(/* variable values you have obtained during parsing/tokenizing */);
    }
} 
```

这为您提供了几个优势，其中之一是您不需要复杂的`switch`逻辑，因为您已经确定了语句/表达式/元素的类型并调用了正确的方法。`onParse`如果您想始终使用相同的方法，您甚至可以在接口中使用类似的东西`CodeGenerator`，依靠 Java 方法覆盖。还请记住，您可以在运行时使用 Java 查询方法，这可以帮助您进一步删除`switch`逻辑。

```
getClass().getMethod("onParse", Integer.class, Integer.class, String.class).invoke(this, catStmt, a, b, c); 
```

请注意，上面使用`Integer`类而不是原始类型`int`，并且您的方法必须根据参数类型和计数进行覆盖 - 如果您有两个使用相同参数序列的不同语句，上述可能会失败，因为至少会有两种方法具有相同的签名。这当然是 Java（和许多其他语言）中方法覆盖的限制。

无论如何，您有几种方法可以实现您想要的。要避免的关键`switch`是实现某种形式的虚拟方法调用，依赖内置的虚拟方法调用工具，或者使用静态绑定为特定程序元素类型调用特定方法。

当然，您至少需要一个**语句**`switch`，根据行开头的字符串来确定实际调用的方法。要么是这样，要么是引入 a `Map<String,Method>`，它为您提供了运行时切换工具，其中映射会将字符串映射到您可以调用的正确方法`invoke`（Java 的一部分）。我更喜欢保留`switch`在没有大量案例的地方，并`Map`为更复杂的运行时场景保留 Java。

但是既然您谈论“相当大量的对象类型”，我建议您引入一个运行时映射并`Map`确实使用该类。这取决于您的语言有多复杂，以及以您的行开头的字符串是关键字还是更大集合中的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:25:49.327

答案就在问题中；你想要一个策略，基本上是一个映射，其中键是，例如“猫”，值是一个实例：

```
final class CatCreator implements Creator {
    final Argument<Integer> length = intArgument("length");
    final Argument<Integer> width = intArgument("width");
    final Argument<String> name = stringArgument("length");

    public List<Argument<?>> arguments() {
        return asList(length, width, name);
    }

    public Cat create(Map<Argument<?>, String> arguments) {
        return new Cat(length.get(arguments), width.get(arguments), name.get(arguments));
    }
} 
```

您将在各种对象类型之间重用的支持代码：

```
abstract class Argument<T> {
    abstract T get(Map<Argument<?>, String> arguments);
    private Argument() {
    }

    static Argument<Integer> intArgument(String name) {
        return new Argument<Integer>() {
            Integer get(Map<Argument<?>, String> arguments) {
                return Integer.parseInt(arguments.get(this));
            }
        });
    }

    static Argument<String> stringArgument(String name) {
        return new Argument<String>() {
            String get(Map<Argument<?>, String> arguments) {
                return arguments.get(this);
            }
        });
    }
} 
```

我相信有人会发布一个需要更少代码但使用反射的版本。选择其中之一，但请记住编程错误的额外可能性，使其通过反射编译。

# ios6 - UISplitViewController 详细视图投影

> ID：12933756
> 
> 赞同：5
> 
> 时间：2012-10-17T11:55:41.187
> 
> 标签：ios6, uisplitviewcontroller

我试图在我的 UISplitViewController 的详细视图上设置一个阴影，我希望在 iOS 6 中的主视图上可见。

在我的详细视图控制器中：

```
 self.view.layer.shadowColor = [[UIColor blackColor] CGColor];
 self.view.layer.shadowOffset = CGSizeMake(-3.0f, 0.0f);
 self.view.layer.shadowRadius = 3.0f;
 self.view.layer.shadowOpacity = 1.0f;
 self.view.layer.masksToBounds = NO;
 self.view.clipsToBounds = NO; 
```

但是，即使我在上面的代码中将其设置为 NO，SplitVC 也会自动裁剪其子视图，并且没有阴影。

谁能让我知道实现这一目标的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-07T22:03:39.887

我发现做到这一点的最好方法是向主视图控制器添加一个 1px 视图并将其对齐到右边缘，然后将阴影应用到该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:20:46.040

似乎在层次结构下方的某个超级视图正在执行剪辑。

尝试这个：

```
UIView *v = self.view;
do
{
    v.clipsToBounds = NO;
    v = v.superview;
}
while(v != nil); 
```

请注意，这将对层次结构中的所有视图进行剪辑！- 这可能比您要求的要多:-)。

# ios - 如何在 iPhone 中以编程方式保存带有时间戳的屏幕截图？

> ID：12933757
> 
> 赞同：2
> 
> 时间：2012-10-17T11:55:40.773
> 
> 标签：ios, datetime, screenshot

嗨，我正在开发一个 iPad 应用程序，该应用程序需要自动截取屏幕截图，并且图像应该以屏幕名称的名称保存，并带有设备中的当前日期和当前时间。有人帮我做这件事。

我尝试了以下代码。在该代码中截取了屏幕截图，我将在该视图的标签中打印名称。但是标签中的时间不准确，所以我想以附加时间的屏幕名称的名称保存图像。

```
 //-- Screen Capture --------------------------------------------------------------------//

UIImage *image = nil;

UIGraphicsBeginImageContext(loginBgImgVw.frame.size);

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"MM-dd-yyyy HH:MM:SS"];
[formatter setTimeZone:[NSTimeZone localTimeZone]];

NSString *dateToday = [formatter stringFromDate:[NSDate date]];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(100, 0, 600, 44)];
[label setText:dateToday];
NSString *fileNameStr = [NSString stringWithFormat:@"%@_Login_%@",providerIdStr,dateToday];

[label setText:fileNameStr];
label.backgroundColor = [UIColor clearColor];
[loginBgImgVw addSubview:label];
[formatter release];

[loginBgImgVw.layer renderInContext: UIGraphicsGetCurrentContext()];     
image = UIGraphicsGetImageFromCurrentImageContext();        
UIGraphicsEndImageContext();        

//=--

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docspath = [paths objectAtIndex:0];
NSLog(@"path=--%@",paths);

NSString *dataPath = [docspath stringByAppendingPathComponent:[NSString stringWithFormat:@"ProviderID_%@",providerIdStr]];
if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
{
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];
}

NSString *savedImagePath = [dataPath stringByAppendingPathComponent:@"Login_Provider.png"];
NSData *imageData = UIImageJPEGRepresentation(image, 0.2);
[imageData writeToFile:savedImagePath atomically:NO];

UIImageWriteToSavedPhotosAlbum(image,self,@selector(image:didFinishSavingWithError:contextInfo:),NULL);

//--------------------------------------------------------------------------------------// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:06:41.427

您需要将日期格式化程序更改为，

```
[formatter setDateFormat:@"MM-dd-yyyy HH:mm:ss"]; 
```

`MM`代表月份和`mm`分钟。

# android - android中的SQLiteDatabase查询

> ID：12933758
> 
> 赞同：1
> 
> 时间：2012-10-17T11:55:42.483
> 
> 标签：android, sql, database

我有一张带有列**ID、名称、内容、状态、日期的表格****卡片。**

 **我想获取**id,name,content**条件是**status <= cards.STATUS**也必须**按日期排序**

我必须如何做到这一点。我做的像，

```
private Cursor c;

String[] cols = { id,name, content };
c = cardsDB.query(CARDS_TABLE_NAME, cols, "status <=" + Card.STATUS, null, null, null, "date desc");

if (c.moveToFirst()) {
            do {
                CardArray.add(new Card(c.getInt(0), c.getInt(1), c.getString(2)));
            } while (c.moveToNext());
        }
        c.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:13:55.643

当您有复杂的查询时，最好使用原始查询而不是查询方法。

这是如何实现原始查询的示例：

```
String query= "Select id,name ,content  from CARDS_TABLE_NAME Where status <= ? date desc";
Cursor c= database.rawQuery(query, new String[]{Card.STATUS}); 
```**

# android - 如何管理在 GCM 服务器端的多播消息服务中添加注册 ID？

> ID：12933759
> 
> 赞同：1
> 
> 时间：2012-10-17T11:55:42.730
> 
> 标签：android, queue, double

我开始在 GCM 上进行探索。请澄清以下事项。

通过使用 SenderID 向 GCM 服务器注册（项目 ID 从谷歌 API 控制台获取），不同的设备将提供唯一的注册 ID。我已使用以下代码通过在 devicelist 中添加注册 id 作为 deviceid 将消息从服​​务器发送到所有设备。我通过登录logcat获得了设备的注册ID。

```
 Sender sender = new Sender("MY_API_KEY");

            Message message = new Message.Builder().collapseKey("1")
                    .timeToLive(3)
                    .delayWhileIdle(true)
                    .addData("message",
                      "this text will be seen in notification bar!!")
                    .build();

       MulticastResult result; 

ArrayList<String> devicesList = new ArrayList<String>();
             devicesList.add(deviceid1);

             devicesList.add(deviceid2);

            result = sender.send(message, devicesList, 1); 
```

像上面提到的那样发送消息是正确的方式吗？

如果是这种情况，如何设计代码在发布特定应用程序后将起作用？发布后如何获取所有设备的注册ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T21:16:37.060

您的服务器需要跟踪来自设备的所有注册 ID。因此，您需要一个数据库表来存储这些注册 ID。然后，您需要公开一个 Web 服务或一个 HTTP POST 入口点，让您的客户上传他们的注册 ID。

设备成功注册到 Google GCM 服务器后，您会在 GCMBaseIntentService 的 onRegistered() 回调方法中收到注册 id。这是您要将注册 ID 上传到服务器的位置。

# cakephp - 更新记录时丢失 hasAndBelongsToMany 关系中的数据

> ID：12933764
> 
> 赞同：0
> 
> 时间：2012-10-17T11:55:58.313
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我在 Post 和 User 之间有一个 hasAndBelongsToMany 关系，称为“订阅”。（而不是posts_users）它包含user_id 和post_id。

我让它工作，但是当我更新 Post 模型的字段时，记录会从 Subscriptions 表中删除。为什么会这样？

更新是这样的（在我的 Post 模型中）：

```
public function markAsRead(){       
    $this->read(null, $this->id);
    $this->set('user_read', 1);

    return $this->save();
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-17T15:53:36.107

请检查在线[文档](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-habtm)，因为我怀疑您可能以错误的方式进行操作？

# visual-studio-2012 - Visual Studio 2012 Professional 中缺少 ADO.NET 实体数据模型模板

> ID：12933767
> 
> 赞同：28
> 
> 时间：2012-10-17T11:56:04.413
> 
> 标签：visual-studio-2012

Visual Studio 2012 Professional 中缺少 ADO.NET 实体数据模型模板。我什至没有 Visual Studio 模板类别中的“数据”类别。

我修改了 Visual Studio 2012 安装，并选择了所有可用的包进行安装。但即便如此，也没有运气。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-06T15:51:04.543

我在 C:\ProgramData\Package Cache 中搜索了“eftools.msi”

有三个版本（我猜来自不同的 beta/RC）

我选择了最新的并安装了它。

这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-13T15:22:09.153

首先，您可以在解决方案中添加 ClassLibrary。然后，将新项目添加到 ClassLibrary，您可以添加 Data>ADO.NET Entity Data Model

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-21T16:34:15.040

我通过进入项目属性并更改目标框架解决了这个问题。在我的例子中，该项目的默认目标框架是 2.0（不知道为什么——我原以为 4.5 是默认的）。我将其更改为 4.5，并且能够看到“ADO.Net 实体数据模型”选项。我认为这一切都是为了为您所针对的 CLR 版本安装正确的 EF 工具。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-05T12:20:54.900

关闭 Visual Studio，然后从该位置安装“ **Entity Framework Tools for Visual Studio ”：**

> ► **[Visual Studio 磁盘或安装程序文件夹]\packages\EFTools\EFTools.msi"**

我这样做了，我得到了结果。

* * *

您也可以从[*此处*](https://www.microsoft.com/en-us/download/details.aspx?id=40762)下载此工具。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-15T21:08:53.943

1.  右键单击现有项目

2.  选择“添加”->“新项目...”

3.  在“数据”节点下，您可以选择“ADO.NET 实体数据模型”

[在这里我找到了解决方案](http://chanmingman.wordpress.com/2013/04/21/creating-ado-net-entity-data-model-in-vs-2012/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-09T03:48:48.113

我在我的包文件夹中找到了 EFTools.msi 文件，然后运行它然后选择卸载，然后再次运行它并选择安装。重新安装后，模板出现了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-07T19:14:07.170

如果您安装了新的 EFTools6.1.3ForVS2013.msi，然后将其卸载，则会删除 ADO.net 实体模型选项。微软从不放回旧版本。谢谢海恩西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-07T07:16:42.427

我在使用 Visual Studio Express 2013 时遇到了同样的问题。如果您有这个问题，请不要重新安装 Visual Studio，您必须修复 EF 工具：

搜索`C:\ProgramData\Package Cache for "eftools.msi"`

选择最新的，运行它并选择修复。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-08T03:50:01.513

我今天遇到了同样的问题。但是在我的 C:\ProgramData\Package Cache 文件夹**中只有一个 eftools.msi**文件。我安装了它。仍然缺少模板。**然后我使用修复选项**再次安装了相同的 msi 文件。然后模板出现了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-15T11:11:26.617

当您单击添加新项目时，您将获得模板的一般列表。当您打开它时，“Visual c#”可能会在左侧菜单中突出显示。从那里你必须点击“数据”菜单。现在您可以看到 ADO.NET 实体数据模型 :)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-26T16:06:25.633

它以刚刚从给定链接[https://www.microsoft.com/en-in/download/details.aspx?id=40762](https://www.microsoft.com/en-in/download/details.aspx?id=40762)**下载**并**运行以修复**实体框架的方式成功。

 *** * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-05-15T03:07:48.120

1.  右键单击解决方案资源管理器中的项目
2.  添加 > 新项目 > 数据 > ADO.NET 实体数据模型您可以[在此处更新](https://www.microsoft.com/en-in/download/details.aspx?id=40762)

[![在此处输入图像描述](../Images/91d7ff7fb2310d65c1b0527dcef87527.png)](https://i.stack.imgur.com/05Pji.png)**

# php - 嵌套选择框

> ID：12933771
> 
> 赞同：1
> 
> 时间：2012-10-17T11:56:16.233
> 
> 标签：php, javascript, mysql

我正在寻找一种嵌套选择元素的方法，这意味着我想让父框中的选择确定在子框中找到的选项。例如，父框将包含美国各州的列表，而子框应仅包含所选州中的城市，即如果父框是加利福尼亚州，则城市选择框中可用的城市应仅是加利福尼亚州的城市。我知道这是可能的，但我想知道完成这种嵌套选择框的最简单方法是什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:28:50.863

我想你对Ajax很熟悉，可以使用Ajax调用，

```
 <script>
        function getCities(stateID){
           // your ajax code stuff here

      }
  </script>

<select onselect="getCities(this.value)">
<options value="1">State A </option>
<options value="2">State B </option>
<options value="3">State C </option>
</select>

<div class="citieslist">

</div> 
```

使用ajax显示**Citieslist** div中的城市

# java - 如果从 JAR 启动，Jetty + Jersey 嵌入式服务器将无法工作

> ID：12933776
> 
> 赞同：1
> 
> 时间：2012-10-17T11:56:37.697
> 
> 标签：java, eclipse, jar, jetty, jersey

我正在尝试从班级启动 Jetty 服务器。当我尝试从 Eclipse 运行它时，它工作正常。如果我将它嵌入到 JAR 中，码头服务器会启动，但是当我发出请求时，它会返回 500 代码响应。这是我的课：

```
@GET
    @Path("test")
    @Produces(MediaType.APPLICATION_JSON)
    public String echo(@QueryParam("testParam")String test){
        return test;
    }

    private Server server; 

    public synchronized void start(int port) throws Exception {
        if (server != null) {
                throw new IllegalStateException("Server is already running");
            }

            ServletContextHandler context = new ServletContextHandler();
            context.setContextPath("/");
        Map<String,Object> initMap = new HashMap<String, Object>();
        initMap.put("com.sun.jersey.api.json.POJOMappingFeature", "true");
        initMap.put("com.sun.jersey.config.property.packages", "the.class.package");           
        context.addServlet(new ServletHolder(new ServletContainer(new PackagesResourceConfig(initMap))), "/*");

        this.server = new Server(port);
        this.server.setHandler(context);
        this.server.start();                   
    }

       public static void main(String[] args) throws Exception {
        if(args.length != 1) {
                System.out.println("AnnotatorServer <port>");
                System.exit(-1);
        }
        JettyServer server = new JettyServer();        
        server.start(Integer.parseInt(args[0]));
    } 
```

当我尝试在 JAR 中启动它时，服务器会启动，但是当我访问该方法时，会出现以下异常：

```
 Caused by: com.sun.jersey.api.MessageException: A message body writer for Java   class java.lang.String, and Java type class java.lang.String, and MIME media     type application/octet-stream was not found 
```

你知道为什么会这样吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:28:43.757

问题出在 POM 文件上。依赖项覆盖了 Meta-Inf/service 中的一些文件。发现[仅当依赖项组装到单个 jar 时才抛出 Jersey 异常的解决方案](https://stackoverflow.com/questions/12611213/jersey-exception-only-thrown-when-depencencies-assembled-into-a-single-jar)

# sencha-touch-2 - 使用 numberfield 时，0 值将在序列的开头被删除

> ID：12933777
> 
> 赞同：0
> 
> 时间：2012-10-17T11:56:40.397
> 
> 标签：sencha-touch-2, phone-number

我有一个如下所示的数字字段

```
 {
                    xtype: 'numberfield',
                    name: 'phoneNumber',
                    label: 'Phonenumber',
                    required: false
                } 
```

当用户插入一个像 3832 这样的值时，它将被正确保存，但是当用户在像 0123 这样的序列的开头设置一个值为 0 的值时，将删除零，只保存 123。

就我而言，我想存储一些开头值为 0 的电话号码。

PS。模型中的phoneNumber是字符串，所以会保存为字符串

```
{ name: 'phoneNumber', type: 'string' } 
```

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:44:42.503

您应该在控制器中使用`textfield`and 来检查`Ext.isNumeric(phoneNumberValue)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:43:15.670

我已经解决了你的问题。像这样使用你的模型。也使用**textfield**而不是**numberfield**。

```
 {
                xtype: 'textfield',
                name: 'phoneNumber',
                label: 'Phonenumber',
                required: false
            } 
```

**我的模型.js**

```
 Ext.define("Stackoverflow.model.mymodel", {
            extend: "Ext.data.Model",
            config: {

                fields: [
                    { name: 'phoneNumber', type: 'string' },

                ],
                validations: [

                    { type: 'presence', field: 'phoneNumber', message: 'Enter a Phone number.' },
                    { type: 'format', field: 'phoneNumber', matcher: /[0-9]{1,20}/}

                ]
            }
        }); 
```

然后在您的控制器中验证这一点。我希望你有模型验证的代码。（如果没有发表评论）

# c - Tor之上的程序

> ID：12933780
> 
> 赞同：0
> 
> 时间：2012-10-17T11:56:51.017
> 
> 标签：c, network-programming, tor

有没有办法在tor之上编写程序？

我想写一个使用tor进行连接的ncurses邮件程序；我的程序的基础将使用 GPGME api 完成 - 用于加密和解密电子邮件 - 因此我会将我的邮件客户端连接到 tor 网络上以发送电子邮件。

这个概念很简单：

```
alice : Mail -> encrypting (bob pulic key) > Tor network -> Bob
bob: decrypting mail -> new mail -> encrypting (alice pub key)  -> Tor network -> Alice 
```

这些天我正在学习 GPGME，但我的问题是 Tor，有没有办法做到这一点？蜜蜂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:02:42.527

如果每个使用它的程序都必须意识到它，那么 Tor 将毫无用处。Tor 只是充当代理服务器。让您的邮件客户端能够使用代理服务器 ( `SOCKS`)，它将自动能够使用 tor。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:46:57.770

您可以查看 tor 控制协议。有两个 Python 库可以通过这个协议与 Tor 通信（一个同步的称为 Stem，一个在 Twisted 之上的异步称为 txtorcon）。使用这些，您可以重新配置底层 Tor 以设置指向本地端点的隐藏服务。

# java - 我需要阻止某些键序列发生

> ID：12933782
> 
> 赞同：2
> 
> 时间：2012-10-17T11:56:51.797
> 
> 标签：java, keyboard, keyboard-shortcuts

我需要阻止某些关键序列的发生。我正在构建一个`kiosk`用于练习的类型应用程序，并且在该应用程序运行时，我需要锁定`Alt`+`Tab`组合以及其他类似`Ctrl`+的`Shift`组合`Esc`。

我找到[了这个链接](https://stackoverflow.com/questions/6127709/remove-the-possibility-of-using-alt-f4-and-alt-tab-in-java-gui)，但我试图将它作为一个单独的类运行并将其合并到我的主类中，我仍然可以按`tab`.

任何和所有的帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:25:00.467

如果不是唯一的赌注（不导致 JNI），您最好的方法是使用 KeyListener 或 KeyAdapter 拦截 KeyEvents，并过滤掉您想要阻止的那些。
这也可以防止这些击键被操作系统拦截，但正如 Jesper 所指出的，这是否真的会发生还远未确定。
为了有效拦截此类事情，您将不得不安装更接近操作系统的特殊软件，例如定制的键盘驱动程序。

# android - 在 listView 中加载异步图像

> ID：12933783
> 
> 赞同：9
> 
> 时间：2012-10-17T11:56:57.123
> 
> 标签：android, listview, asynchronous

我想在列表视图中加载数据之后从服务器加载图像。我知道这个问题存在很多主题，但我还没有找到解决方案......

所以这是我的代码：

```
//asyncTackClass for loadingpictures
public class LoadImagesThread extends AsyncTask<Bundle, Void, Bitmap> {
    private ImageView view;
    private Bitmap bm;
    private Context context;
    private final WeakReference<ImageView> imageViewReference;

    private final String BUNDLE_URL = "url";
    private final String BUNDLE_NAME = "name";
    private final String BUNDLE_BM = "bm";

    public LoadImagesThread(Context context, ImageView view) {
        this.context=context;
        imageViewReference = new WeakReference<ImageView>(view);
    }

    @Override
    protected Bitmap doInBackground(Bundle... b) {

        Bitmap bm =null;
        if (StorageHelper.getBitmap(b[0].getString(BUNDLE_NAME)) != null) { // Check the sdcard
            bm = StorageHelper.getBitmap(b[0].getString(BUNDLE_NAME));
            Log.w("LoadImagesThread", "Get image from sdcard : "+b[0].getString(BUNDLE_NAME));
        } else { // Check the server
            bm = ServiceHelper.getBitmapFromURL(b[0].getString(BUNDLE_URL));
            StorageHelper.saveBitmap(bm, b[0].getString(BUNDLE_NAME)); // Save image on sdcard   
            Log.w("LoadImagesThread", "Get image from server : "+b[0].getString(BUNDLE_NAME));
        }

        return bm;
    }

    @Override
    protected void onPostExecute(final Bitmap bm) {
        super.onPostExecute(bm);        
        if (bm != null){ //if bitmap exists...
            view = imageViewReference.get();
            // Fade out
            Animation fadeOutAnimation = AnimationUtils.loadAnimation(context, R.anim.fadeoutimage);
            fadeOutAnimation.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {

            }

            public void onAnimationRepeat(Animation animation) {

            }

            public void onAnimationEnd(Animation animation) {
                // Fade in
                view.setImageBitmap(bm);
                Animation fadeInAnimation = AnimationUtils.loadAnimation(context, R.anim.fadeinimage);
                view.startAnimation(fadeInAnimation);
            }
        });

            // Launch the fadeout
            view.startAnimation(fadeOutAnimation);

        }else{ //if not picture, display the default ressource
            view.setImageResource(R.drawable.productcarre);
        }

    }

} 
```

该代码用于在 ImageView 中显示 Bitmap

这是适配器：

```
public class ListViewShoplistStoresAdapter extends BaseAdapter {

private ArrayList<Shop> shopList;
private Activity activity;

private HashMap<Integer, ImageView> views;
private final String BUNDLE_URL = "url";
private final String BUNDLE_NAME = "name";
private final String BUNDLE_POS = "pos";
private final String BUNDLE_ID = "id";

public ListViewShoplistStoresAdapter(Activity activity, ArrayList<Shop> shopList) {
    super();
    this.activity = activity;
    this.shopList = shopList;
    this.views = new HashMap<Integer, ImageView>();
}

public int getCount() {
    return shopList.size();
}

public Object getItem(int position) {
    return shopList.get(position);
}

public long getItemId(int position) {
    return shopList.get(position).getId();
}

private class ViewHolder {
    public TextView store;
    public TextView name;
    public ImageView ImageStore;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder view;
    LayoutInflater inflator = activity.getLayoutInflater();

    if(convertView == null) {
        view = new ViewHolder();
        convertView = inflator.inflate(R.layout.listviewshops, null);

        view.store = (TextView) convertView.findViewById(R.id.store);
        view.name = (TextView) convertView.findViewById(R.id.name);
        view.ImageStore = (ImageView) convertView.findViewById(R.id.imgstore);

        convertView.setTag(view);
    }else {
        view = (ViewHolder) convertView.getTag();
    }

    Typeface regular=Typeface.createFromAsset(activity.getAssets(), "fonts/RobotoRegular.ttf");
    view.store.setTypeface(regular);

    Typeface light=Typeface.createFromAsset(activity.getAssets(), "fonts/RobotoLight.ttf");
    view.store.setTypeface(light);
    Brand brand = StorageHelper.getBrand(activity, shopList.get(position).getBrandId());
    if (brand == null) {
        Log.e("SetShopInAdapter","Brand null");
        Toast.makeText(activity, "Impossible d'afficher la liste de magasins", Toast.LENGTH_LONG).show();
    } else {
        view.store.setText(brand.getName());
        view.name.setText(shopList.get(position).getName());
        view.ImageStore.setImageResource(R.drawable.productcarre);
    }

    Bundle b = new Bundle();

    //url of the pict
    b.putString(BUNDLE_URL, ServiceHelper.getImageUrl("brand", brand.getName()));

    // name of image
    b.putString(BUNDLE_NAME, ServiceHelper.getCleanImageName(brand.getName()));

    //position in the listView
    b.putInt(BUNDLE_POS, position);

    //id of the current object
    b.putInt(BUNDLE_ID, brand.getId());

    //put info in the map in order to display in the onPostExecute
    if(views.get(position)==null){
        views.put(position, view.ImageStore);
        // launch thread
        new LoadImagesThread(activity.getApplicationContext(), view.ImageStore).execute(b);
    }

    return convertView;

}

} 
```

因此，当我使用 GridView 时，没有任何问题，但是当我使用 ListView 时，图像仅在第一项中更改！

**示例**：我想显示“汽车”、“房子”和“苹果”项目的产品图像。代码将启动线程，所有图像（汽车然后是房子，最后是苹果）将显示在第一个项目（汽车项目）中......而房子和苹果虽然没有图像！

你知道我应该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:00:20.623

SO上有很多关于这方面的内容。像这样的异步加载称为“延迟加载”

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

使用列表全面实施此类流程

对于一般加载图像，我建议这样做：

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-26T14:05:39.987

您可以使用 volley 来提高列表视图的性能。看看这个简单的例子：[Android Custom ListView with Image and Text using Volley](http://www.androidhive.info/2014/07/android-custom-listview-with-image-and-text-using-volley/)

# ios - iOS自动@synthesize而不创建ivar

> ID：12933785
> 
> 赞同：15
> 
> 时间：2012-10-17T11:57:01.727
> 
> 标签：ios, ivar

如果我有一个`@property`我不想通过 an 支持的，`ivar`我只是省略了`@synthesize`并且有返回计算值的手动 getter。

但是，现在从 Xcode 4.4 开始，如果我不指定`@synthesize`do 编译器将自动生成它。这是否意味着它也会产生一个`ivar`我不需要/使用它的偶数？

我最终可以通过使用强制不自动合成`dynamic`。然而这是错误的，因为如果[getter 和 setter 在其他地方或在运行时实现](https://stackoverflow.com/a/1160526/184367)`@dynamic`，则应该用于关闭警告。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T12:06:39.487

在我的工作中，我注意到以下行为。

1.  如果你有一个读写属性，没有一个`@synthesize`，有一个getter并且没有一个setter，那么它将生成iVar。
2.  如果你有一个读写属性，没有一个`@synthesize`，没有一个getter，并且有一个setter，那么它将生成iVar。
3.  如果你有一个读写属性，没有 a`@synthesize`并且同时有一个 getter 和一个 setter，那么它不会生成 iVar。
4.  如果你有一个只读属性，没有 a`@synthesize`也没有 getter，那么它将生成 iVar。
5.  如果你有一个只读属性，没有 a`@synthesize`并且有一个 getter，那么它不会生成 iVar。

据此，我认为一般规则是，如果您没有 a `@synthesize`，并且拥有完全实现该属性所需的所有方法，则假定它是动态的并且不会生成 iVar。

无论如何，如果您想确保不生成 iVar，请将其声明为`@dynamic`.

* * *

**澄清@dynamic**

来自[Objective-C 编程语言](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)中的[声明属性](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)：

> 您使用 @dynamic 关键字告诉编译器您将通过直接提供方法实现或在运行时使用其他机制（例如动态加载代码或动态方法解析）来履行属性所暗示的 API 协定。

对我来说，即使您直接实现 getter 和 setter，也可以将属性标记为 @dynamic。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:10:40.663

如果将属性标记为只读并自己实现getter，似乎不会创建iVar。

接口声明：

```
@property (nonatomic, readonly) BOOL myBoolProp; 
```

实施：

```
- (BOOL)myBoolProp {
    return true;
} 
```

试试这个：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    _myBoolProp = true;
} 
```

将产生错误：使用未声明的标识符 '_myBoolProp'

删除自定义 getter 方法也会删除错误，似乎表明 iVar 现已生成。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T12:07:30.437

是的 - iVars 仍然由`clang`（不是 Xcode，因为它是 IDE，clang 是真正重要的编译器）生成。

如果你真的不想要 iVars，也不想要一个实现，有一个有点过时的`@dynamic`关键字可以做你想做的事，或者你可以在协议中指定属性，这不会使其自动合成：

```
// .h
@property (nonatomic, retain) NSObject *someProp;

//.m
@dynamic someProp; // no iVars generated

// other solution
@protocol MyObjectProtcol<NSObject>

@property (nonatomic, retain) NSObject *someProp;

@end

// now, when you implement the MyObjectProtocol protocol, the property won't auto-synthesize. 
```

# input - 可以输入 DD-MMM-YYYY 日期格式

> ID：12933786
> 
> 赞同：1
> 
> 时间：2012-10-17T11:57:01.507
> 
> 标签：input, date-format, orbeon, xforms

是否`DD-MMM-YYYY`可以输入（2012 年 10 月 17 日）日期格式？

我试图在 properties-local.xml 中为 Input Date 字段添加以下属性。

`<property as="xs:string" name="oxf.xforms.format.input.date" value="[D01]-[MNn,*-3]-[Y0001]"/>`

从日历中选择日期后，日期字段为：17-10-2012。

对于 xforms:output，同样`[D01]-[MNn,*-3]-[Y0001]`显示：2012 年 10 月 17 日

请建议。`[D01]-[MNn,*-3]-[Y0001]`oxf.xforms.format.input.date 可以接受这种格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T07:17:53.037

不要为输入添加属性，而是执行以下可能对您有所帮助的操作。

在选择日期选择器后，使用`xxf:format`输入控件的属性和使用`format-date`函数来获取预期的格式。

> 前任：-

xxf:format = format-date(.,'[D01]-[MNn,*-3]-[Y]')

问候， 阿琼

# c++ - 同一进程中是否可以有多个 ORB 对象？

> ID：12933790
> 
> 赞同：1
> 
> 时间：2012-10-17T11:57:09.340
> 
> 标签：c++, multithreading, corba, orbacus

我使用[ORBacus](http://www.progress.com/en/orbacus/index.html)。我有一个多线程应用程序，我想**在同一个进程中有多个 ORB 对象**。这个想法是：**每个线程都有自己的 ORB 并连接到*不同的*服务器**。

这甚至可能吗？如果是这样 - 如何？

* * *

“*你试过什么？* ”：我有

```
CORBA::ORB_var m_varOrb; 
```

在每个线程中。每个线程调用。每个线程都有`Reconnect`方法，该方法执行：

```
// ...
m_varOrb = CORBA::ORB_init( argc, argv ); 
```

这些问题，我有：

*   当多个线程同时尝试重新连接时，应用程序在`m_varOrb->destroy();`或 中崩溃`CORBA::ORB_init`。

*   我尝试同步线程，以便所有线程尝试一一重新连接到配置的服务器（使用 a `static mutex`）-仍然无法正常工作-当一个线程尝试销毁“其” ORB对象时-再次崩溃`destroy`（某些断言失败，因为某些引用计数 > 1；看起来像是指向真实 ORB 对象的引用计数指针）

*   我添加了一个*条件等待*，所以线程`ORB_init`只有在所有线程都执行后才开始调用`destroy`；在 ORB 周围制作了一个**单例**包装类，同步线程以一个接一个地连接，一切都开始工作得很好。**但这意味着 - 只有一个 ORB，所以*只有一个服务器。*坏的。**

所以，所有这些事情都让我觉得，我被允许**每个进程只有一个 ORB 对象**。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:26:57.807

默认情况下，如果您在使用`ORB_init()`. 但是，您可能每次都传递相同的参数，这意味着 ORB 假定您希望所有这些线程共享相同的底层 ORB 实例。

因此，您需要做的第一件事是在 ORBacus 的文档中找到如何在每个线程中传递唯一的 ORB ID。也许使用线程 ID 作为判别。

也就是说，您的方法可以使用改进。在每个线程中创建一个 ORB 是一项非常昂贵的操作。相反，在应用程序启动时创建一个共享 ORB，然后允许每个线程访问它。它应该已经受到 ORBacus 的保护以防止并发访问。确保您也只在主线中执行 ORB 关闭/销毁，而不是在线程中。

# mysql - MySQL 中的 MyISAM 表是否自动锁定？

> ID：12933791
> 
> 赞同：0
> 
> 时间：2012-10-17T11:57:09.850
> 
> 标签：mysql, myisam

MySQL 会自动对 MyIsam 表执行读/写表锁定，还是我必须显式锁定表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:00:19.883

除了做出合理的努力使某些语句原子化之外，MyISAM 没有事务的概念及其相关的行级锁定。

因此，当您使用多个语句（例如，一个语句后跟多个相关语句）时，应该使用`LOCK TABLES`以避免竞争条件或数据不一致。`SELECT``UPDATE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:00:57.550

请参阅此处了解[MyISAM 的优点和缺点](http://www.sitepoint.com/mysql-myisam-table-pros-con/)

[MyISAM 关于内部锁定](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)

MyISAM 使用表级锁定。当插入或更新一行时，对该表的所有其他更改都将暂停，直到该请求完成。

如果错了请纠正我

# c# - Linq to SQL 一对多关系

> ID：12933794
> 
> 赞同：3
> 
> 时间：2012-10-17T11:57:32.433
> 
> 标签：c#, sql, performance, linq, linq-to-sql

过去几天我一直在努力解决 linq 查询性能问题：

```
LinqConnectionDataContext context = new LinqConnectionDataContext();
System.Data.Linq.DataLoadOptions options = new System.Data.Linq.DataLoadOptions();
options.LoadWith<Question>(x => x.Answers);
options.LoadWith<Question>(x => x.QuestionVotes);
options.LoadWith<Answer>(x => x.AnswerVotes);
context.LoadOptions = options;
var query =( from c in context.Questions
            where c.UidUser == userGuid
            && c.Answers.Any() == true
            select new
            {
                c.Uid,
                c.Content,
                c.UidUser,
                QuestionVote = from qv in c.QuestionVotes where qv.UidQuestion == c.Uid && qv.UidUser == userGuid select new {qv.UidQuestion, qv.UidUser },
                Answer = from d in c.Answers
                         where d.UidQuestion == c.Uid
                         select new
                         {
                             d.Uid,
                             d.UidUser,
                             d.Conetent,
                             AnswerVote = from av in d.AnswerVotes where av.UidAnswer == d.Uid && av.UidUser == userGuid select new { av.UidAnswer, av.UidUser }
                         }
            }).ToList(); 
```

查询必须运行 5000 行，最多需要 1 分钟。如何提高此查询的性能？

**更新：**

![在此处输入图像描述](../Images/8ed0bd9399cd07a23ada7b7e51505825.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:12:18.980

[使用sql-debug-visualizer](http://weblogs.asp.net/scottgu/archive/2007/07/31/linq-to-sql-debug-visualizer.aspx)检查生成的 sql ，然后复制生成的 SQL 并从 SQL 客户端运行它，看看它需要多少时间。如果需要将近 1 分钟，您需要通过添加索引和/或存储过程或创建视图等来提高 DB 级别的性能。

如果上面不需要太多时间，您总是可以创建存储过程并使用 LINQ to SQ L[调用它。](http://www.codeproject.com/Questions/328009/Use-stored-procedure-with-linq-to-sql)

[如果您可以更改为，](https://softwareengineering.stackexchange.com/questions/123569/entity-framework-vs-linq-to-sql)另一项建议是使用实体框架，因为它是未来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:21:12.353

让你开始的东西。

```
CREATE PROCEDURE GetQuestionsAndAnswers
(
    @UserGuid VARCHAR(100)
)
AS
BEGIN

SELECT 
c.Uid, 
c.Content, 
c.UidUser, 
qv.UidQuestion, 
qv.UidUser, 
av.UidAnswer, 
av.UidUser, 
av.Content,
d.Uid,
d.UidUser,
d.Content
FROM Question c
INNER JOIN QuestionVotes qv ON qv.UidQuestion = c.Uid AND qv.UidUser = @UserGuid
INNER JOIN Answers d ON d.UidQuestion = c.Uid
INNER JOIN AnswerVotes av ON av.UidAnswer = d.Uid AND av.UidUser = @UserGuid
WHERE c.UidUser = @UserGuid

END 
```

默认情况下，您已经在主列上拥有聚集索引（只需在数据库端确认这一点），并且您希望在 QuestionVote - UidUser 列、AnswerVote - UidUser 列和 Answer - UidQuestion 列上使用非聚集索引。

也看看这里。您可能希望使用`.AsQueryable()`而不是`ToList()`延迟执行

[你 ToList() 吗？](https://stackoverflow.com/questions/334579/do-you-tolist)

# javascript - 是否可以在不知道 objectId 的情况下从 parse.com 检索记录

> ID：12933796
> 
> 赞同：6
> 
> 时间：2012-10-17T11:57:36.313
> 
> 标签：javascript, parse-platform

请参阅下面的示例代码 - 在这种情况下，我尝试检索的记录的 objectId 是已知的。

我的问题是，如果我不知道 Parse.com objectId，我将如何实现下面的代码？

```
var Artwork = Parse.Object.extend("Artwork");
var query = new Parse.Query(Artwork);
query.get(objectId, {
  success: function(artwork) {
    // The object was retrieved successfully.
    // do something with it
  },
  error: function(object, error) {
    // The object was not retrieved successfully.
    // warn the user
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-19T12:07:22.050

询问。当您已经知道 Parse 对象 ID 时使用**get() 。**否则，可以使用查询。**find()**根据查询参数获取对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T19:50:43.453

当然，您可以使用[Parse Query](https://www.parse.com/docs/js_guide/#queries)根据对象的属性来搜索对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:50:44.033

我在文档中不清楚的是，一旦您在查询中获取对象，您需要执行以下操作：

使用查询（可以返回多个对象）：

```
artwork[0].get('someField'); 
```

使用“第一”或“获得”：

```
artwork.get('someField'); 
```

你不能`artwork.someField`像我想象的那样做

# android - Changes in LogCat from Android 4.0.4 to Android 4.1

> ID：12933799
> 
> 赞同：0
> 
> 时间：2012-10-17T11:57:48.907
> 
> 标签：android, logcat

I've just tried Android Jelly Bean, and I noticed that the `LogCat` has changed appearance in `Eclipse`. Usualy a

```
try {
  ..
} catch(Exception e) {
   Log.e("Tag here", e.getMessage());
} 
```

Will be marked with the color red, and a

```
int i = 5;
int j = 5;
int k = i * j; 

Log.i("Sum is: ", Integer.toString(k)); 
```

will be marked with the color green.

When I develop applications for Android 4.1 in Eclipse the LogCat will just show a questionmark under the section

1.  Level
2.  Time
3.  PID
4.  Tag

And everything outputted to `LogCat` will be marked as a Waring(W), no matter what I'm logging out. And everything will have to color orange. This is pretty annoying when I try to locate what I outputted to `LogCat`.

Does anybody "suffer" from the same problem? Is there any fixes to this, if so how?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:02:45.943

Update Android SDK tools and the Android-Eclipse plugin to the latest versions and the problems will go away.

# sql - 使用PostgreSQL全文搜索排名的最佳方式

> ID：12933805
> 
> 赞同：19
> 
> 时间：2012-10-17T11:58:20.900
> 
> 标签：sql, postgresql, full-text-search, ranking

从[这个答案](https://stackoverflow.com/a/4014625/265521)开始，我想知道使用 PostgreSQL 内置全文搜索的最佳方法是如果我想按排名排序，*并且*仅限于匹配查询。

让我们假设一个非常简单的表。

```
CREATE TABLE pictures (
  id SERIAL PRIMARY KEY,
  title varchar(300),
  ...
) 
```

管他呢。现在我想搜索该`title`领域。首先我创建一个索引：

```
CREATE INDEX pictures_title ON pictures 
  USING gin(to_tsvector('english', title)); 
```

现在我想搜索`'small dog'`. 这有效：

```
SELECT pictures.id, 
       ts_rank_cd(
         to_tsvector('english', pictures.title), 'small dog'
       ) AS score
FROM pictures
ORDER BY score DESC 
```

但我真正想要的是：

```
SELECT pictures.id, 
       ts_rank_cd(
         to_tsvector('english', pictures.title), to_tsquery('small dog')
       ) AS score
FROM pictures 
WHERE to_tsvector('english', pictures.title) @@ to_tsquery('small dog')
ORDER BY score DESC 
```

或者这个（不起作用 - 不能`score`在`WHERE`子句中使用）：

```
SELECT pictures.id, 
       ts_rank_cd(
         to_tsvector('english', pictures.title), to_tsquery('small dog')
       ) AS score
FROM pictures WHERE score > 0
ORDER BY score DESC 
```

最好的方法是什么？我的问题是多方面的：

1.  如果我使用重复的版本，`to_tsvector(...)`它会调用两次，还是足够聪明地以某种方式缓存结果？
2.  有没有办法在不重复`to_ts...`函数调用的情况下做到这一点？
3.  有没有办法`score`在`WHERE`子句中使用？
4.  `score > 0`如果有，过滤或使用该`@@`东西会更好吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-07-05T20:21:00.920

运算符的使用`@@`将使用全文 GIN 索引，而测试则`score > 0`不会。

我在问题中创建了一个表，但添加了一个名为`title_tsv`：

```
CREATE TABLE test_pictures (
  id        BIGSERIAL,
  title     text,
  title_tsv tsvector
);

CREATE INDEX ix_pictures_title_tsv ON test_pictures 
    USING gin(title_tsv); 
```

我用一些测试数据填充了表格：

```
INSERT INTO test_pictures(title, title_tsv)
SELECT T.data, to_tsvector(T.data) 
FROM   some_table T; 
```

然后我运行了以前接受的答案`explain analyze`：

```
EXPLAIN ANALYZE 
SELECT  score, id, title
FROM (
    SELECT ts_rank_cd(P.title_tsv, to_tsquery('address & shipping')) AS score
        ,P.id        
        ,P.title
    FROM test_pictures as P
) S
WHERE score > 0
ORDER BY score DESC; 
```

并得到以下。注意**5,015 毫秒的执行时间**

```
QUERY PLAN                                                                                                                                    |
----------------------------------------------------------------------------------------------------------------------------------------------|
Gather Merge  (cost=274895.48..323298.03 rows=414850 width=60) (actual time=5010.844..5011.330 rows=1477 loops=1)                             |
  Workers Planned: 2                                                                                                                          |
  Workers Launched: 2                                                                                                                         |
  ->  Sort  (cost=273895.46..274414.02 rows=207425 width=60) (actual time=4994.539..4994.555 rows=492 loops=3)                                |
        Sort Key: (ts_rank_cd(p.title_tsv, to_tsquery('address & shipping'::text))) DESC                                                      |
        Sort Method: quicksort  Memory: 131kB                                                                                                 |
        ->  Parallel Seq Scan on test_pictures p  (cost=0.00..247776.02 rows=207425 width=60) (actual time=17.672..4993.997 rows=492 loops=3) |
              Filter: (ts_rank_cd(title_tsv, to_tsquery('address & shipping'::text)) > '0'::double precision)                                 |
              Rows Removed by Filter: 497296                                                                                                  |
Planning time: 0.159 ms                                                                                                                       |
Execution time: 5015.664 ms                                                                                                                   | 
```

现在将其与`@@`运算符进行比较：

```
EXPLAIN ANALYZE
SELECT ts_rank_cd(to_tsvector(P.title), to_tsquery('address & shipping')) AS score
    ,P.id
    ,P.title
FROM    test_pictures as P
WHERE P.title_tsv @@ to_tsquery('address & shipping')
ORDER BY score DESC; 
```

**执行时间约为 29 ms**的结果：

```
QUERY PLAN                                                                                                                                       |
-------------------------------------------------------------------------------------------------------------------------------------------------|
Gather Merge  (cost=13884.42..14288.35 rows=3462 width=60) (actual time=26.472..26.942 rows=1477 loops=1)                                        |
  Workers Planned: 2                                                                                                                             |
  Workers Launched: 2                                                                                                                            |
  ->  Sort  (cost=12884.40..12888.73 rows=1731 width=60) (actual time=17.507..17.524 rows=492 loops=3)                                           |
        Sort Key: (ts_rank_cd(to_tsvector(title), to_tsquery('address & shipping'::text))) DESC                                                  |
        Sort Method: quicksort  Memory: 171kB                                                                                                    |
        ->  Parallel Bitmap Heap Scan on test_pictures p  (cost=72.45..12791.29 rows=1731 width=60) (actual time=1.781..17.268 rows=492 loops=3) |
              Recheck Cond: (title_tsv @@ to_tsquery('address & shipping'::text))                                                                |
              Heap Blocks: exact=625                                                                                                             |
              ->  Bitmap Index Scan on ix_pictures_title_tsv  (cost=0.00..71.41 rows=4155 width=0) (actual time=3.765..3.765 rows=1477 loops=1)  |
                    Index Cond: (title_tsv @@ to_tsquery('address & shipping'::text))                                                            |
Planning time: 0.214 ms                                                                                                                          |
Execution time: 28.995 ms                                                                                                                        | 
```

正如您在执行计划中看到的，`ix_pictures_title_tsv`在第二个查询中使用了索引，但在第一个查询中没有使用，这使得使用`@@`运算符的查询快了 172 倍！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T12:18:53.690

```
select *
from (
    SELECT
        pictures.id,
        ts_rank_cd(to_tsvector('english', pictures.title), 
        to_tsquery('small dog')) AS score
    FROM pictures
) s
WHERE score > 0
ORDER BY score DESC 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T00:57:18.070

**如果我使用带有重复 to_tsvector(...) 的版本，它会调用两次，还是足够聪明地以某种方式缓存结果？**

注意这些事情的最好方法是做一个简单的解释，尽管这些可能很难阅读。

长话短说，是的，PostgreSQL 足够聪明，可以重用计算结果。

**有没有办法在不重复 to_ts... 函数调用的情况下做到这一点？**

我通常做的是添加一个`tsv`作为文本搜索向量的列。如果您使用触发器进行此自动更新，它会立即为您提供易于访问的向量，但它还允许您通过使触发器具有选择性来选择性地更新搜索索引。

**有没有办法在 WHERE 子句中使用分数？**

是的，但不是那个名字。或者，您可以创建一个子查询，但我个人会重复它。

**如果有，按分数 > 0 过滤或使用 @@ 东西会更好吗？**

我能想到的最简单的版本是这样的：

```
SELECT *
FROM pictures
WHERE 'small dog' @@ text_search_vector 
```

显然可以用类似的`text_search_vector`东西代替`to_tsvector('english', pictures.title)`

# javascript - 为 google 搜索 api 框和搜索按钮设置样式

> ID：12933806
> 
> 赞同：2
> 
> 时间：2012-10-17T11:58:22.187
> 
> 标签：javascript, html, css, google-api

我正在尝试在 Google 搜索中使用我自己的 CSS，但我所做的一切都没有留下。我怎样才能把我自己的CSS放在上面？它是通过api、css等吗？每当我进行更改时，整个页面都会重新加载，但“搜索框”会恢复为其原始样式。

接口：

```
<script>
  (function() {
    var cx = '005780201047221652427:jopxospdjss';
    var gcse = document.createElement('script'); 
    gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.co.uk/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script> 
```

我不知道我是否必须在 JS 或其他地方进行样式设置。

谢谢你的帮助

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:33:08.483

你可以试试下面的代码...

```
<div id="quicksearch">
<form id="cse-search-box" action="search.html">
<div style="float:left">
<input type="hidden" value="005780201047221652427:jopxospdjss" name="cx">
<input type="hidden" value="FORID:10" name="cof">
<input type="hidden" value="UTF-8" name="ie">
<input type="text" onblur="if(this.value=='')value='Search Site';" onfocus="if(this.value=='Search Site')value=''" value="Search Site" class="searchBox" size="28" name="q">
</div>
<div style="float:left;">
<input class="image" type="submit" value="" name="sa">
</div>
</form>
</div> 
```

您可以尝试使用自己的 css，如下所示：-

```
#quicksearch .searchBox{background:#666666; border:#666666 0px solid; height:22px; color:#CCCCCC; font-size:12px; padding-left:6px;}
#quicksearch .image {
    background: url("search.png") no-repeat scroll center top transparent;
    border: 0 none;
    cursor: pointer;
    display: block !important;
    height: 23px;
    width: 23px;
} 
```

为了显示搜索记录，创建一个名为“search.html”的新文件并将下面的代码粘贴到那里。搜索记录将显示在此页面下方。

```
<div id="cse-search-results"></div>
            <script type="text/javascript">
              var googleSearchIframeName = "cse-search-results";
              var googleSearchFormName = "cse-search-box";
              var googleSearchFrameWidth = 800;
              var googleSearchDomain = "www.google.com";
              var googleSearchPath = "/cse";
            </script>
        <script type="text/javascript" src="http://www.google.com/afsonline/show_afs_search.js"></script> 
```

# dynamics-crm - 将参数传递给视图 ms crm 2011

> ID：12933809
> 
> 赞同：0
> 
> 时间：2012-10-17T11:58:25.370
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm

我有帐户实体的自定义视图，我想动态地将参数传递给该视图。当我尝试如下传递参数时，出现错误。有没有最好的方法将参数传递给像单个记录这样的视图。

[http://mycrm/myorg/main.aspx?etc=1&extraqs=address1_postalcode%3DCB4&pagetype=entitylist&viewid=%7b12EC908C-44CB-E111-911F-F04DA2F5F23E%7d&viewtype=4230]

有什么建议么

基兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:18:02.867

我认为将动态参数传递给视图是不可能的。在这种情况下，您可以使用高级查找、过滤器或创建报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T04:39:55.493

我们有一个类似的需求：我们有一个功能区按钮，点击按钮弹出一个silverlight页面，这是一个搜索屏幕，你可以输入搜索条件然后点击那个页面上的搜索按钮。搜索结果将返回到 CRM 主页。（不是高级查找，它会将结果返回到 CRM 主页）。

实际上，我们要做的是从 silverlight 创建 QueryExpression，然后将其转换为 fetch xml 查询，使用此 fetch xml 查询创建自定义视图，将自定义视图附加到主页。

# string - 在 myBatis 动态 SQL 中使用枚举参数

> ID：12933813
> 
> 赞同：13
> 
> 时间：2012-10-17T11:58:33.623
> 
> 标签：string, enums, ibatis, dynamic-sql, mybatis

myBatis 3.1.1中如何基于枚举常量参数做动态SQL？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T11:58:33.623

**如何基于枚举常量做动态SQL**

```
public enum Test {
    A, B;
}

Mapper.java:
    int test(@Param("t") Test t);

Mapper.xml:
    <select id="test" resultType="int">
        select
        <choose>
            <when test='t.name().equals("A")'>65</when>
            <when test='t.name().equals("B")'>66</when>
            <otherwise>0</otherwise>
        </choose>
    </select> 
```

**笔记**

*   测试表达式必须使用双引号而不是单引号引用字符串。
*   您不能比较常量，只能比较字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-18T12:21:01.980

MyBatis 允许在（或）语句中`==`代替`equals`for 字符串。所以以下也可以工作（引号无关紧要）：`if``when`

```
public enum Test {
    A, B;
} 
```

映射器.java：

```
int test(@Param("t") Test t); 
```

映射器.xml：

```
<select id="test" resultType="int">
    select
    <choose>
        <when test="t.name() == 'A'">65</when>
        <when test="t.name() == 'B'">66</when>
        <otherwise>0</otherwise>
    </choose>
</select> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-27T13:59:21.390

除了 Tomer 的回答（效果很好）之外，您还可以使用[OGNL](https://commons.apache.org/proper/commons-ognl/)表示法比较枚举值。

（直接比较枚举值具有编译时优势，即如果更改枚举成员，查询将很快失败。）

如果 Test 枚举作为公共类 Test.java 存在于 full.package.name 中，那么在 mapper.xml 中，您将拥有：

```
<when test='t == @full.package.name.Test@A'> 
```

如果 Test 枚举在另一个类中，如下所示：

```
package full.package.name;

public class ExampleClass {
    public enum Test {
        A, B
    }
} 
```

然后，在 mapper.xml 中，您将拥有：

```
<when test='t == @full.package.name.ExampleClass$Test@A'> 
```

$ 符号在 OGNL 规范中没有记录，我 [在 MyBatis 问题页面中找到了它](https://github.com/mybatis/mybatis-3/issues/810)

PS：如果 OGNL 字符串不正确（如 NullPointerException），旧版本的 MyBatis（例如，3.2.3）会显示丑陋的错误。较新的版本显示更容易理解的错误。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-09T02:55:53.110

```
public enum Test {
    A, B;
}

Mapper.java:
    int test(@Param("t") Test t);

Mapper.xml:
    <select id="test" resultType="int">
        select
        <choose>
            **<when test='t.name() == &quot;A&quot;'>65</when>
            <when test='t.name() == &quot;A&quot;'>66</when>**
            <otherwise>0</otherwise>
        </choose>
    </select>   

is another solution. 
```

# regex - 正则表达式删除 TextWrangler 中两个字符串之间的文本

> ID：12933827
> 
> 赞同：1
> 
> 时间：2012-10-17T11:59:11.887
> 
> 标签：regex, grep, vcf-vcard, textwrangler

我已经非常努力地寻找答案。

基本上，我要做的是删除一些导出的 vCard 中的某些字段，这些 vCard 是我通过 Automator 使用 Mac 的联系人应用程序导出的。

我设法删除了那些单行字段，例如生日和社交网络。但是，有一个特定的字段占用多行，我假设它是原始图像的 base64 编码版本 - PHOTO 字段。

这是字段开始的示例： `PHOTO;ENCODING=b;TYPE=JPEG:/9j/4AAQSkZJRgABAQAAAQABAAD/4gxYSUNDX1BST0ZJTEUA`

结尾各不相同，所以我用下一行的开头作为结尾： `CATEGORIES`

我最接近的是`PHOTO;ENCODING.*CATEGORIES`

不幸的是，它似乎只选择了整个块的第一行。

有没有办法解决？我正在尝试在我的 Mac 上的 TextWrangler 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:30:39.193

而不是 .* 您需要：-

```
(.+[\r\n]+).* 
```

因为 。不匹配换行符。

括号中的模式匹配由以换行符结尾的字符序列组成的多行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T22:19:11.620

在朋友的帮助下，我尝试了 TextWrangler

```
ATTACH;ENCODING=BASE64([^\n]*\n )*[^\n]*\n 
```

它匹配每个附件

# javascript - 使用 jQuery / 原型解析 onclick="setLocation(...)"

> ID：12933837
> 
> 赞同：6
> 
> 时间：2012-10-17T11:59:53.767
> 
> 标签：javascript, jquery, prototype

我在示例中有这个标签：

`<button onclick="setLocation('http://mysite.com/checkout/cart/add/product/17/')" />`

我需要做的是在按钮单击时启动 ajax 请求。我需要将上面的 URL 段“product/17”附加到我的 ajax url。有什么聪明的方法可以在不使用正则表达式的情况下提取它？HTML 是不可更改的 -**但是**我可以修改 URL，在这种情况下，我需要从 onclick 属性中提取确切的 URL。

所以我需要从 onclick 属性中提取的 URL 或“product/17”，希望不使用正则表达式。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:03:35.007

因此，如果没有使用 RegExp，也没有解析字符串的标准，这是最简单的解决方案：

```
var str = ​$("button").attr("onclick"​​​​);
str = str.substring(str.lastIndexOf("add/") + 4, str.length - 3);​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T12:04:29.487

您可以尝试使用 split() 函数：

```
var url = 'http://mysite.com/checkout/cart/add/product/17';
var array = url.split('add/');
alert(array[1]);​​​​​​​​​​​ 
```

# javascript - 带有类别选项的自动完成功能不起作用

> ID：12933844
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:00:17.867
> 
> 标签：javascript, jquery-ui, autocomplete

我正在尝试使用类别选项创建一个自动完成功能，但是当我使用 catcomplete 尝试它时，我遇到了错误；

1.  TypeError: $.widget is not a function "localhost/php25/js/jquery.ui.widget.js" 第 67 行

2.  TypeError: base is not a constructor "localhost/php25/js/jquery.ui.widget.js" 第 67 行

3.  TypeError: $("#search").catcomplete is not a function "localhost/php25/index.php" 第 50 行

这是我的代码：

```
<html>
<head>
    <meta charset="utf-8">
    <title>Hello</title>
    <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="js/jquery.ui.autocomplete.js"></script>
    <script type="text/javascript" src="js/jquery.ui.core.js"></script>
    <script type="text/javascript" src="js/jquery.ui.position.js"></script>
    <script type="text/javascript" src="js/jquery.ui.widget.js"></script>

    <style type="text/css">
        .ui-autocomplete{
            padding: .2em .4em;
            margin: .8em 0 .2em;
            line-height: 1.5;
        }
    </style>

    <script type="text/javascript">
        $.widget( "custom.catcomplete", $.ui.autocomplete, {
            _renderMenu: function( ul, items) {
                var self = this, 
                currentCategory = "";
                $.each( items, function(index, item){
                    if( item.category != currentCategory){
                        ul.append( "<li class='ui-category'>" + item.category + "</li>");
                        currentCategory = item.category;
                    }
                    self._renderItem( ui, item);
                });
            }
        });
    </script>

    <script type="text/javascript">
        $( function(){
            var data =  [
                {label:"London Biggin Hill Arpt,BQH,United Kingdom",category:"airport"},
                {label:"Longvic Airport,DIJ,France",category:"airport"},
                {label:"Long Island Arpt,HAP,Australia",category:"airport"},
                {label:"Long Island Macarthur Arpt,ISP,United States",category:"airport"},
                {label:"Long Banga Airfield Arpt,LBP,Malaysia",category:"airport"},
                {label:"Longview,United States",category:"city"},
                {label:"Long Island,Australia",category:"city"},
                {label:"Long Banga,Malaysia",category:"city"},
                {label:"Long Bawan,Indonesia",category:"city"},
                {label:"Londrina,Brazil",category:"city"}
            ]; 
            $('#search').catcomplete({
                source: data 
            });
        });
    </script>
</head>

<body>
    <label for="search">Search: </label>
    <input id="search" type="text" />
</body>
</html> 
```

我刚刚编写了类似于[http://jqueryui.com/autocomplete/#categories中所示的代码](http://jqueryui.com/autocomplete/#categories)

谁能帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:14:59.093

您的 JavaScript 包含顺序错误。将 autocomplete.js 移动到脚本标签的末尾。

# bash - 使程序在文件更改时重新加载已打开的文件

> ID：12933849
> 
> 赞同：1
> 
> 时间：2012-10-17T12:00:24.293
> 
> 标签：bash, ubuntu, reload

我需要播放一个`.swf`文件，然后当文件被更改以重新加载播放器的新内容时。可悲的是，我选择的程序不会监视文件的更改。我想出了一个有点复杂的解决方案：

```
sudo apt-get install incron gtk-gnash
echo "my_username" | sudo tee -a /etc/incron.allow # allow my_username to run incron
incrontab -e 
```

将以下内容添加到 incrontab：

```
/home/my_username/path/myfile.swf IN_MODIFY /home/my_username/path/run.sh 
```

并且`run.sh`包含：（也`chmod 700 run.sh`）

```
#!/bin/sh
killall gtk-gnash
gtk-gnash /home/my_username/path/myfile.swf 
```

如您所见，这远非优雅。我还能怎么做呢？

如果这对您很重要，这在 Ubuntu 12.04 上。这是我自己在 askubuntu 上的[问题的副本](https://askubuntu.com/questions/201708/swf-player-aware-of-file-changes/202040)

**编辑：**澄清，我选择使用独立播放器 gtk-gnash，这不是必需的，网络浏览器也可以，但似乎没有必要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:59:27.170

您所描述的是[File Alteration Monitor](http://en.wikipedia.org/wiki/File_Alteration_Monitor)的工作。

首先，鉴于您是从 shell 启动的，您现有的“incrontab”解决方案是一个很好的起点。incrontab 是基于[inotify(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/inotify.7.html)的解决方案这一事实是一个巨大的优势。这意味着您没有轮询，这可以节省 CPU。

您要求的是 shell 和系统级解决方案，而我不是 Flash 程序员，所以我会坚持您的问题，尽管我认为更好的解决方案是创建一个可能使用 AS3 的 Flash“包装器”加载器类来吸收你现有的 SWF 并从 incrontab 启动的东西接收通知。Flash 编程超出了这个答案的范围，尽管它可能会提供一个更优雅的解决方案。

所以...

您当前的方法包含一个启动脚本，该脚本首先终止任何现有`gtk-gnash`进程，然后运行一个新进程。当 incrontab 看到文件发生更改时，它会从头开始重新启动。如果您相信您的闪存应用程序永远不会崩溃和退出，并且您总是有完美的时机，那么这是一个可行的解决方案。它的一个问题是你在一个进程的死亡和下一个进程的开始之间有一个未知的延迟。您`killall`发送的信号`gtk-gnash`可能会立即响应，也可能会在暂停后响应。稍作停顿，您可能会发现自己在旧的 SWF 完全消失之前启动了 SWF。暂停时间较长，您可能会短暂显示您的桌面。

更好的解决方案可能是简单地在循环中启动 SWF：

```
#!/bin/sh

while true; do
    date '+[%Y-%m-%d %T] myfile.swf relaunched' >> /var/log/swf.log
    gtk-gnash /home/my_username/path/myfile.swf
done 
```

然后让 incrontab 仅仅杀死现有的进程：

```
/home/my_username/path/myfile.swf IN_MODIFY killall gtk-gnash 
```

通过将 killall 与启动分开，您可以确保 gtk-gnash 的新实例在旧实例实际退出并将控制权返回给包装它的 shell 脚本之前不会启动。

当然，您也可以不使用 incrontab，而是安装`inotify-tools`软件包并让循环运行：

```
#!/bin/sh
while inotifywait -e modify /home/my_username/path/myfile.swf; do
    killall gtk-gnash
done 
```

相同的系统调用，相同的效果，不同的前端。

如果你想非常小心你正在杀死的进程，你也可以将 gtk-gnash 的 pid 存储在一个临时文件中。这是对 Flash 播放器包装器的另一种看法：

```
#!/bin/sh

while true; do
    date '+[%Y-%m-%d %T] myfile.swf relaunched' >> /var/log/swf.log
    gtk-gnash /home/my_username/path/myfile.swf &
    echo $! > /var/run/gtk-gnash.pid
    wait
done 
```

而 incrontab 行：

```
/home/my_username/path/myfile.swf IN_MODIFY xargs kill < /var/run/gtk-gnash.pid 
```

您可能会采用的另一种减少终止/重新启动的*可见*效果的策略是，在 myfile.swf 以最少内容或没有内容运行时对其进行截图，然后将其用作播放器的桌面壁纸。（或等效的。我不知道你是如何设置的。）我为几年前设置的数字标牌解决方案做了类似的事情——有时我们需要杀死并重新启动一个独立的播放器，所以我们只制作了显示的第一页的“框架”。当我们终止 flashplayer 进程时，系统“似乎”在其框中没有内容的情况下重置……然后，一秒钟后，内容会出现。（是的，这是一个黑客。）

另一个提示：我一直发现 Adob​​e 的独立 Flash 播放器（“投影仪”）比 gtk-gnash 更可靠、更兼容。[您可以在Adob​​e 支持中心下载页面](http://www.adobe.com/support/flashplayer/downloads.html)找到 Adob​​e 的独立播放器，该页面不同于其标准的 Flash Player 下载页面。

# sharepoint - SharePoint 2010 访问被拒绝 - 登录用户无权查看此共享点组的成员身份

> ID：12933850
> 
> 赞同：1
> 
> 时间：2012-10-17T12:00:28.330
> 
> 标签：sharepoint, sharepoint-2010, web-parts, access-denied

我的自定义可视化 Web 部件中有一个场景，我需要检查登录用户是否是共享点组的成员（共享点组或用户存储在共享点列表中）。实际上，如果列表中存在登录用户，他将在我的自定义 Web 部件中获得编辑访问权限。

由于我创建了一个组名“SharePoint_Owners”，组设置为“谁可以查看该组的成员资格”到“组成员”，所以站点抛出错误，因为登录用户没有查看权限。我的代码执行时出错，SPGroup oGroup = oWebsite.SiteGroups[strgroup];///strgroup 是一个组名 foreach (SPUser oUser in oGroup.Users) { }

当我尝试打开包含我的 webpart 的页面时，站点会引发此错误。

有人可以建议我如何进行吗？有没有办法以编程方式解决这个问题，而无需为每个组实际授予“每个人”的查看权限？我认为 RunWithElevatedPrivileges 完成了我的工作，但没有运气！

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:16:32.823

尝试这个：

```
SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                string siteURL = SPContext.Current.Site.Url;
                using (SPSite safeSite = new SPSite(siteURL))
                {
                    using (SPWeb safeWeb = safeSite.OpenWeb())
                    {
                        SPGroup group = safeWeb.Groups["SharePoint_Owners"];
                        bool isMember = safeWeb.IsCurrentUserMemberOfGroup(group.ID);                       
                    }
                }
            }); 
```

# iis-7 - 将多个 IIS7 重写规则（重定向）合并为一个

> ID：12933851
> 
> 赞同：4
> 
> 时间：2012-10-17T12:00:31.393
> 
> 标签：iis-7, url-rewriting

我正在使用 iis7 的 URL 重写模块来完成几件事：

*   301 重定向规则从非 www 到 www
*   301 将规则 .info 重定向到 .com（移动到我的域的 .com 版本）
*   301 将规则从旧页面（例如 /page-name.asp）重定向到 /page-name

我已经能够将前两个组合成一个规则，第三项是它自己的规则。问题是在请求如下网址的情况下会生成两个 301 重定向：

site.info/page-name.asp/

首先执行 301 以：

www.site.com/page-name.asp（例如，添加了 www 并将 .info 转到 .com）

然后从那里完成第二个 301：

www.site.com/page-name

我的问题是：我怎样才能将这些组合起来，以便只发生一个 301 重定向而不是两个？以下是它们当前位于我的 web.config 中的两条规则：

```
<rule name="SEO - 301 Redirect - .info to .com AND force WWW" stopProcessing="false">
    <match url="(.*)" ignoreCase="true" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^site\.info$" />
    </conditions>
    <action type="Redirect" url="{ToLower:http://www.site.com/{R:1}}" redirectType="Permanent" />
</rule>
<rule name=".aspVersion-to-friendlyvia301" stopProcessing="false">
        <match url="(.*).asp" />
        <action type="Redirect" url="{R:1}" />
</rule> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T20:17:41.017

我似乎找到了自己问题的答案。这有点小技巧，但完成了所有必需的 url 转换（例如，删除尾部斜线、非 www 到 www、toLowerCase、删除目录的默认文档以及任何其他必要的重定向，例如页面名称更改）。

我正在谈论的问题实际上称为“301 重定向链接”，并且解决方案相当优雅地呈现在这里：

[http://www.seomoz.org/blog/what-every-seo-should-know-about-iis#chaining](http://www.seomoz.org/blog/what-every-seo-should-know-about-iis#chaining)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-06T10:39:16.023

此解决方案来自先前的评论：

1）而不是**重定向**应用**重写**附加符号_

2）添加将赶上以 _ 开头的 URL 并应用重定向的新规则

```
<rule name="LowerCaseRule1" stopProcessing="false">
      <match url="(.*)" ignoreCase="false" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_METHOD}" pattern="GET" />
        <add input="{R:1}" pattern="[A-Z]" ignoreCase="false" />
      </conditions>
      <action type="Rewrite" url="_{ToLower:{R:1}}" />
</rule>
<rule name="RemoveTrailingSlashRule1" stopProcessing="false">
      <match url="(.*)/$" />
      <conditions  logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_METHOD}" pattern="GET" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
      </conditions>
      <action type="Rewrite" url="_{R:1}" />
    </rule>
<rule name="Final redirect" stopProcessing="true">
      <match url="^(_+)(.*)" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_METHOD}" pattern="GET" />
      </conditions>
      <action type="Redirect" url="{R:2}" />
</rule> 
```

# mysql - 我想使用 SELECT 对表中的某些字段执行 UPDATE

> ID：12933856
> 
> 赞同：0
> 
> 时间：2012-10-17T12:00:40.860
> 
> 标签：mysql

// 这是我试图编译的整个查询

//下面是有错误的代码。我无法弄清楚。

//查询开始

//错误：从“UPDATE d FROM....”开始，这个语法正确吗？

```
UPDATE d FROM Deployment d INNER JOIN Employment e ON d.employment_id = e.employment_id where e.consultant_id=14
   SET d.date_end = '2012-10-17',
       d.updated_by = 4,
       d.updated_date = SYSDATE()
 WHERE e.consultant_id = 14
   AND date_end IS NULL; 
```

//代码到此结束

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:21:20.443

```
UPDATE Deployment d 
INNER JOIN Employment e ON d.employment_id = e.employment_id SET d.date_end = p_date_e`nd, 
d.updated_by = p_loggedin_user_id, d.updated_date = SYSDATE() 
WHERE e.consultant_id = p_consultant_id
AND d.date_end IS NULL; 
```

# vb.net - Screen.width/Screen.TwipsperpixelX - 相同的不同值

> ID：12933858
> 
> 赞同：1
> 
> 时间：2012-10-17T12:00:52.080
> 
> 标签：vb.net, screen, screen-resolution

我有 VB 应用程序，它在加载时将系统的分辨率从 1280*1024 更改为 1024*768 。当我停止应用程序时，它将分辨率恢复为定义为的正常分辨率`NormalRes = Screen.Width / Screen.TwipsPerPixelX`。但是当我第二次同时这样做时，它并没有恢复分辨率。

我检查了代码，返回的分辨率是 1024(horizo​​ntal=1280)*1024，因此它无法更改分辨率并保持为 1024*768。

让我烦恼的是，当正常分辨率定义为`Screen.Width/Screen.TwipsPerPixelX`.

为什么它给出了不同的值（而不是 1280 它给出了 1024）。是因为当我第一次更改分辨率时，它的值会发生变化吗？
什么情况下的值可以有不同的值？?

寻求你的帮助，萨蒂什·库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:32:11.013

与其尝试重新计算屏幕分辨率，不如在更改分辨率之前保存分辨率，然后在关闭应用程序时恢复旧分辨率。

例子：

```
Public Class Form1
    Dim oldSize As Size

    Public Sub Form_Load() Handles Form1.Load
        oldSize = Screen.PrimaryScreen.Bounds.Size
    End Sub

    Public Sub Form_Closed() Handles Form1.Closed
        SetScreenResolution(oldSize)
    End Sub

    Public Sub SetScreenResolution(size As Size)
        ' write your code to change the screen size here
    End Sub
End Class 
```

# git - 显示跟踪的分支

> ID：12933862
> 
> 赞同：0
> 
> 时间：2012-10-17T12:01:15.057
> 
> 标签：git

> **可能重复：**
> [我如何让 git 告诉我哪些分支正在跟踪什么？](https://stackoverflow.com/questions/4950725/how-do-i-get-git-to-show-me-which-branches-are-tracking-what)

我在我的 Git 项目中添加了两个远程仓库

```
$ git remote show
cavneb
origin 
```

我设置我的主分支来跟踪`cavneb/master`

```
$ git branch --set-upstream master cavneb/master 
```

每个其他分支都从原点跟踪相应的分支。有什么方法可以让我看到每个本地分支正在跟踪哪个远程分支？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T12:17:44.100

从[这个答案](https://stackoverflow.com/questions/4950725/how-do-i-get-git-to-show-me-which-branches-are-tracking-what)

```
$ git branch -vv   # doubly verbose! 
```

# c++ - 如何在 boost 1.37 中获得正则表达式反序列？

> ID：12933863
> 
> 赞同：0
> 
> 时间：2012-10-17T12:01:16.137
> 
> 标签：c++, regex, boost

在 Ruby 中，当我将“12a”之类的字符串与正则表达式 /1(2)(a)/ 匹配时，我可以在 $1 和 $2 变量中找到第二个和第三个字符。像这样：

```
"12a" =~ /1(2)(a)/
> $1
=> "2"
> $2
=> "a" 
```

我可以在 c++ Boost 1.37 中做这样的事情吗？我在 Borland C++ 6 中编程，所以最后一个版本的 boost 可以工作 1.37.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:58:33.070

是的你可以。为此使用库`#include <boost/regex.hpp>`。

请参阅此示例：[使用 Boost Regex 的 C++ 正则表达式](https://stackoverflow.com/questions/5804453/c-regular-expressions-with-boost-regex)

# jquery - 访问被拒绝。关于 IE 中的 jquery.form.js

> ID：12933868
> 
> 赞同：4
> 
> 时间：2012-10-17T12:01:32.637
> 
> 标签：jquery, forms, internet-explorer, access-denied

我该如何解决这个问题？IE 上的访问被拒绝：(jquery.form.js)

```
 =>   if (io.contentWindow.document.execCommand) {
        try { // #214
            io.contentWindow.document.execCommand('Stop');
        } catch(ignore) {}
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:43:07.953

我今天遇到了同样的问题。

[但是，此问题已记录在案](https://github.com/malsup/form/issues/214)

问题是代码在IE9中被破坏了。来自链接的评论者解释了这个问题：

> 这是因为 IE 的“友好错误消息”“功能”。对于 HTTP 4xx 和 5xx 响应，IE 将 IFRAME 的内容替换为其友好的错误消息，从而更改帧的域。当插件尝试访问响应文档时，由于同源策略而失败，这导致插件将请求视为中止

由于这种安全限制，IE js 解释器从访问 io.contentWindow.document 的那一刻起就会发出安全异常。

快速修复/破解（如果在 try 块内调用，则移动）：

```
try { // #214
  if (io.contentWindow.document.execCommand) 
   io.contentWindow.document.execCommand('Stop');
} catch (ignore) { } 
```

我在生产中进行了此修复，但在 IE8/IE9 中没有发现任何负面影响

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:04:38.167

根据您提供的最少信息，听起来您正试图在一个窗口中使用 JavaScript 来访问来自不同*来源*的窗口。你不能这样做，[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)不允许这样做。“解决”它的唯一方法是做其他事情。

# sorting - SharePoint 2010 OOTB 筛选和排序在阿拉伯语的 XsltListViewWebPart 中不起作用

> ID：12933869
> 
> 赞同：1
> 
> 时间：2012-10-17T12:01:41.713
> 
> 标签：sorting, sharepoint-2010, filtering

我正在开发一个英语和阿拉伯语的多语言网站。我有一些带有 XsltListViewWebPart 的页面来查看不超过 12 个要显示的字段的自定义列表。这些是连接 webpart 并向同一页面上的另一个 XsltListViewWebPart 提供过滤器值。

当我用阿拉伯语打开此页面时，它的 OOTB 过滤和排序不起作用，当我单击任何列表项的标题时，它也不显示显示表单。

当我单击任何列标题时，它会显示包含所有选项和过滤值的过滤和排序菜单，但单击后没有任何反应。

但是，如果同一 webpart 中有任何查找字段，并且当我单击它时，它会显示该特定查找项的显示形式。

仅当我用阿拉伯语打开这些页面时才会发生这种情况。在英语中一切正常。

没有什么是自定义的，而是在一列上进行条件格式化并在 web 部件之间添加了连接。

# ruby-on-rails - Ruby path_to 仅在显式时有效

> ID：12933873
> 
> 赞同：1
> 
> 时间：2012-10-17T12:02:01.003
> 
> 标签：ruby-on-rails, ruby, path, link-to

学习 ruby​​ on rails，玩转路线和路径方法。我用“Book”和“Author”模型构建了一个相当简单的应用程序。每个作者可以有很多本书，每本书都属于一个作者，等等。

我有一个作者控制器，其方法 #list 列出了所有作者。当它这样做时，它也会呼应他们所有的书。现在我希望每本书都使用我找到的这种漂亮的路径方法指向书籍#show。

这是我的片段：

```
<% @authors.each do |author| %>
    <li><%= author.name %></li>
    <ul>
        <% author.books.all.each do |book| %>
            <li><%= link_to book.name, controller: :books, action: :show, id: book.id %></li>
        <% end %>
    </ul>
<% end %> 
```

有了这个`link_to book.name, controller: :books, action: :show, id: book.id`它可以正常工作，但有些事情告诉我可以更容易地实现相同的目标。如果我用`books_show_path(book)`它就行不通。

我的路线如下所示：

根到：'作者#list'

```
match 'authors/list' => 'authors#list'
match 'books/list' => 'books#list'
match 'authors/:id/delete' => 'authors#delete'
match 'authors/:id/show' => 'authors#show'
match 'books/:id/show' => 'books#show' 
```

我在这里做错了什么？我需要做什么才能`books_show_path(book)`工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:09:07.923

查看Rails 指南的[资源路由](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)部分。

简而言之，约定是您`resources :books`在路由中定义，将 /books 路由到索引操作，将 /books/123 路由到显示操作等。您还将有一些帮助方法来生成路径：

```
book_path(book) #=> /books/123
books_path #=> /books 
```

实际上，link_to 和一堆其他方法可以从对象本身生成路径：

```
link_to book.name, book # will also call book_path(book) under the hood 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:06:01.980

`as`选项用于路线名称

```
 match 'books/:id/show' => 'books#show', as: :books_show 
```

但我强烈建议您阅读[资源路由](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)

# reverse-proxy - 如何阻止用户访问部署在 Cloudfoundry 上的应用程序

> ID：12933874
> 
> 赞同：2
> 
> 时间：2012-10-17T12:02:00.947
> 
> 标签：reverse-proxy, cloud-foundry

如何防止用户直接访问我在 Cloudfoundry 上的 Web 应用程序？

例如：我在 Cloudfoundry 上部署了一个 spring 应用程序，可以使用 url myapp.cloudfoundry.com 访问它（这只是一个示例）。

然后，我使用另一个 Web 应用程序，部署在 Google App Engine 上，它就像部署在 cloudfoundry 上的那个的反向代理（就像在这个例子中[http://programming.mvergel.com/2011/11/cloud-foundry-and -custom-domain.html](http://programming.mvergel.com/2011/11/cloud-foundry-and-custom-domain.html)），用户可以访问，比如说 myapp.appspot.com

现在，我的问题是：是否有一种优雅的方法可以防止用户使用链接 myapp.cloudfoundry.com 访问我的应用程序并允许他们只使用 myapp.appspot.com ？从appspot重定向到cloudfoundry时，我正在考虑在请求标头中添加某种令牌，但我认为这不是最好的解决方案。

有人可以给我一个关于这个的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T09:06:37.923

正如您所指出的，无法阻止某人从 Cloudfoundry.com 请求应用程序。

也许最好的方法是检查请求来自的 IP 范围，如果不是来自 apppot.com，则返回 404？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T05:10:25.243

也许实现 HMAC [http://en.wikipedia.org/wiki/HMAC](http://en.wikipedia.org/wiki/HMAC)作为服务之间的身份验证；并拒绝访问您的应用程序的任何其他公共访问权限？

# webfaction - 未提供 Webfaction 上的 Askbot 静态文件

> ID：12933876
> 
> 赞同：2
> 
> 时间：2012-10-17T12:02:15.977
> 
> 标签：webfaction, askbot

[我按照http://community.webfaction.com/questions/8400/need-help-for-askbot-installation](http://community.webfaction.com/questions/8400/need-help-for-askbot-installation)上的说明在 webfaction 服务器上部署了 askbot 脚本。我也已经完成了运行 python2.7 manage.py collectstatic 并且 DEBUG 设置为 False。

当我访问我的网站时，它看起来像下图：[http ://dl.dropbox.com/u/750152/askbot.png](http://dl.dropbox.com/u/750152/askbot.png)

所有的 css 和图像渲染都消失了。我错过了一些步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:41:27.500

您还没有创建一个仅限静态的应用程序来指向您的静态内容。静态内容将由 nginx 前端服务器呈现。

以下是步骤-

```
In the control panel, create a new app 
```

即作为“到静态应用程序的符号链接”使用

/home/username/webapps/askbot_server/myask/static 作为符号链接路径。

```
Add the symlink app to your askbot site using '/m' as the URL path. 
```

然后，

编辑 /home/username/webapps/askbot_server/apache2/conf/httpd.conf 将其更改为 -

```
<Directory /home/username/webapps/askbot_server/htdocs>
    AddHandler wsgi-script .py
</Directory>
to 

WSGIScriptAlias / /home/username/webapps/askbot_server/myask/django.wsgi
Restart your Apache with /home/username/webapps/askbot_server/apache2/bin/restart 
```

此外，如果您使用 posgresql 作为数据库，启用全文搜索然后运行

```
python manage.py init_postgresql_full_text_search 
```

# mysql - 关系数据库设计场景

> ID：12933877
> 
> 赞同：1
> 
> 时间：2012-10-17T12:02:18.377
> 
> 标签：mysql, sql, database, database-design, erd

考虑我们有 2 个如下表：

```
products:       id, name
                  (PK = id)
product_group1: product_id
                  (PK = a1_id)
                  (FK = a1_id REFRENCES a1)
product_group2: product_id
                  (PK = a1_id)
                  (FK = a1_id REFRENCES a1)
product_group3: product_id
                  (PK = a1_id)
                  (FK = a1_id REFRENCES a1) 
```

问题是，我想设计一个`approved_products`只接受来自 group1 和 group2（不是 group3）的产品的表格。

我怎样才能设计这样的桌子？（我正在使用 mysql 顺便说一句）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:05:38.890

您想要的是“负”外键约束，即拒绝此表中存在的产品 ID。

但是，这是不可能的。您必须自己维护这样一个表 - 仅包含来自第 1 组和第 2 组的 ID；你可以为此使用触发器。之后，您将使用该表作为外键引用表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:20:54.320

你应该设计你的表格，就像那个“规则”不存在一样（因为，让我们面对现实吧，它最终会改变）

然后，您可以使用其他机制来实现此约束。如果要在数据库级别执行此操作，可以在表上使用插入前触发器，或者对调用验证数据的函数的列进行检查。但是为什么不在你的应用程序上做呢？对我来说，这似乎是一条商业规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:46:42.113

如果不在触发器或应用程序级别插入一些逻辑，您将无法使用当前设计解决此问题。 `FOREIGN KEY`s 不能引用超过一张表（我理解您的设计是每个产品组使用一张表，如果我错了，请告诉我）。此外，它们不能包含任何条件逻辑，因此即使您只有一个`product_groups`表，也无法创建`FOREIGN KEY`只允许该表中的 G1 和 G2 记录的表。

为了使用标准的关系完整性约束来实现这一点，您需要一个名为类似的附加表`approvable_products`，其中包含第一`product_ids`组或第二组中的那些产品。

# jquery - 带有ajax数据源的jquery ui自动完成

> ID：12933881
> 
> 赞同：2
> 
> 时间：2012-10-17T12:02:28.667
> 
> 标签：jquery, jquery-ui-autocomplete

我正在尝试将 jquery ui 自动完成功能与 ajax 数据源一起使用，但我看不出我的代码有什么问题。

这是我的代码

```
$(document).ready(function () {

        var data = new Portalen.LitteraNumberData();

        $("#LitteraNumber").autocomplete({
            minLength: 1,
            source : function (request, response) {
                var customerId = $("#CustomerId").val();
                return response(data.loadLitteraNumbers(customerId));
            }
        });
    }); 
```

在一个 js 文件中我有这个：

```
Portalen.LitteraNumberData = function () { };

Portalen.LitteraNumberData.prototype = function() {

var loadLitteraNumbers = function(customerId) {
    $.get("/Orders/GetLitteraNumbers", { customerId: customerId }, function (response) {
        return response;
    });
};

return {
    loadLitteraNumbers: loadLitteraNumbers
};
}(); 
```

ajax 调用正在工作，我得到了正确的响应，但自动完成功能不会发生。LitteraNumberData 返回错误的东西吗？所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:43:59.187

尝试这个：

```
$(document).ready(function () {
    var data = new Portalen.LitteraNumberData();
    $("#LitteraNumber").autocomplete({
        minLength: 1,
        source : function (request, response) {
            $.get("/Orders/GetLitteraNumbers", { customerId: request.term }, function (data) {
                response(data);
            });
        }
    });
}); 
```

我已经替换`$("#CustomerId").val()`为`request.term`. 此外，该函数不需要返回响应。

该`$.get`函数是异步的，因此您不能将其放在其他地方。

# matlab - 频率生成

> ID：12933891
> 
> 赞同：2
> 
> 时间：2012-10-17T12:03:03.123
> 
> 标签：matlab, linear-algebra

我正在编写一个 MATLAB 程序，用于查找满足以下约束的频率 f_i 的所有可能值：

```
f1+f2+f3+f4+f5+f6=100 
f2+2*f3+3*f4+4*f5+5*f6=95 
```

由于巨大的嵌套 for 循环，该程序需要大量时间，但我无法得到答案，那么解决这个问题的可能方法是什么？

此外，我真正的问题要大得多，我需要具有类似约束的 150 f_i 的所有可能频率

```
f1+f2+...+f150=10,000,000
f2+3*f3+...+17*f150=9,500,000 
```

那么，是否有任何方法或技术来解决此类问题，如果是，那么如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:13:01.210

你不需要循环，你需要线性代数。您有 2 个线性方程和 6 个变量。这为您留下了 4 个自由度。

我假设您的变量是限制在某个范围内的整数，否则会有无限数量的解决方案。

将整数值赋给`f1`、`f2`、`f3`，`f4`并求解其余方程。一种方法是生成某个范围内所有整数的 4D 网格，并求解线性系统。

```
[f1,f2,f3,f4] = ndgrid(1:10,1:10,1:10,1:10);
res = [1 1; 4 5] \ ([100-f1(:)-f2(:)-f3(:)-f4(:)  95-f2(:)-2*f3(:)-3*f4(:)]');
f5 = res(1,:);
f6 = res(2,:);

solutions = [f1(:) f2(:) f3(:) f4(:) f5(:) f6(:)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:53:04.310

您给出的示例问题有 6 个未知数，只有 2 个方程。在你真正的问题中，你说你可以有 150 个变量，但仍然只有 2 个方程。

这些问题严重不足，您可以分配无限数量的不同值来`f1--f150`满足这两个约束。列举所有可能的解决方案是没有意义的——你最好为每个频率生成一个数组，并在使用特定组合时检查约束。这要高效得多，因为开始时的限制很少。

现在，你说所有`f_i`都是非零正整数。这仍然没有帮助，因为`1/0`它也是一个整数。我假设还有一个额外的限制，那就是所有频率都不能大于某个预定义的最大值。

我将向您说明我的担忧。假设最大值为 100。那么有多少种不同的组合？对于 6 个不同的频率（如示例中所示），

```
num_fi = 100*100*100*100*100*100 = 100^6 = 10^12 = 1 trillion 
```

组合。对于, `f_i`_`i = 150`

```
num_fi = 100*100*...150 times...*100 = 100^150 = 10 ^ 300 
```

（这是 300 的 10 倍！）不同的组合。

假设你想存储它们。由于 1 到 100 之间的整数只占用 1 个字节，因此您必须存储

```
[number of combinations] * [number of f_i in the set] * [number of bytes]  
    = [num_fi] * i * 1byte 
    = (10^300 * 150) bytes
    = 1.5 * 10^290 TERABYTES. 
```

假设你使用 4TB 硬盘，每个硬盘高 1cm，你需要

```
3.75 * 10^289 
```

4TB 硬盘。这些硬盘驱动器堆叠在一起时，将形成一个可以到达的塔

```
(3.75*0.01*10^289)/384400000/2 = 4.87 * 10^278 
```

[往返月球的](https://www.google.nl/search?client=ubuntu&channel=fs&q=distance+to+the+moon&ie=utf-8&oe=utf-8&redir_esc=&ei=3lqBUIqBGtLM0AXJlYG4Cw)次数，或

```
(3.75*0.01*10^289)/2.54e6/9.4605284e15/2 = 7.80 * 10^264 
```

多次往返[仙女座星系](http://en.wikipedia.org/wiki/Andromeda_Galaxy)，或

```
(3.75*0.01*10^289)/13.2e9/9.4605284e15/2    
= 1.50 * 10^261 
```

多次到[UDFj-39546284](http://en.wikipedia.org/wiki/UDFj-39546284) *并返回*。

既然是星期五，我将投入一些奖金：

硬盘驱动器将填满：

*   1.59e+247 倍球体，以太阳为中心，半径为 39AU（至冥王星）
*   3.75e+222 倍球体，以银河系中心的 SMB 为中心，半径 100,000 光年（整个银河系）
*   1.39e+207倍球体，以地球为中心，半径139亿光年（可观测宇宙）

这只是最大值为 100。

所以我们在这里真的无能为力，除非**你给我们更多关于你试图用`f_i`'s**完成什么的上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:15:02.260

你的问题是线性的。

因此，您可能做的是以矩阵形式编写问题，然后寻找矩阵内核 - matlab 计算所做的（至少在找到它的方向方面，参见例如[http://www.mathworks.de/matlabcentral /newsreader/view_thread/45457](http://www.mathworks.de/matlabcentral/newsreader/view_thread/45457)）。

但是，在这里，我们假设频率是真实的（只要它具有物理意义）。否则问题就更难了。

# python - 读取 csv 标头空白和不区分大小写

> ID：12933895
> 
> 赞同：5
> 
> 时间：2012-10-17T12:03:17.180
> 
> 标签：python, csv, python-3.x

是否有可能读取 CSV 文件的标题空白和不区分大小写？至于现在我`csv.dictreader`这样使用：

```
import csv
csvDict = csv.DictReader(open('csv-file.csv', 'rU'))

# determine column_A name
if 'column_A' in csvDict.fieldnames:
    column_A = 'column_A'
elif ' column_A' in csvDict.fieldnames:
    # extra space
    column_A = ' column_A'
elif 'Column_A' in csvDict.fieldnames:
    # capital A
    column_A = 'Column_A'

# get column_A data
for lineDict in csvDict:
    print(lineDict[column_A]) 
```

从代码中可以看出，我的 csv 文件有时会在额外的空格或大写字母方面有所不同，例如

*   “列_A”
*   “列_A”
*   “列_A”
*   “列_A”
*   ...

我想使用这样的东西：

```
 column_A = ' Column_A'.strip().lower()
    print(lineDict[column_A]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T12:16:15.400

您可以重新定义`reader.fieldnames`：

```
import csv
import io

content = '''column_A " column_B"
1 2'''
reader = csv.DictReader(io.BytesIO(content), delimiter = ' ')
reader.fieldnames = [field.strip().lower() for field in reader.fieldnames]
for line in reader:
    print(line) 
```

产量

```
{'column_b': '2', 'column_a': '1'} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T12:14:54.943

覆盖`DictReader.fieldnames`属性怎么样？

```
class MyDictReader(DictReader):

    @property
    def fieldnames(self):
        return [field.strip().lower() for field in super(MyDictReader, self).fieldnames] 
```

# c# - 如何在资源/常量/字符串/其他中嵌入 AssemblyFileVersion？

> ID：12933896
> 
> 赞同：4
> 
> 时间：2012-10-17T12:03:17.413
> 
> 标签：c#, .net, visual-studio, msbuild

我一直在阅读[与此类似的](https://stackoverflow.com/questions/699580/c-sharp-assemblyfileversion-usage-within-a-program)`AssemblyFileVersion`using 代码，但由于安全限制，无法再使用（或 Assembly 命名空间中的任何方法）。`Assembly.GetExecutingAssembly`

*（顺便说一句 - 这是 SharePoint Online 施加的安全限制，它会在上传时对您的程序集进行一些询问，如果您使用框架的某些禁止部分，则会拒绝它）*

那么还有其他获取程序集文件版本的方法吗？

我猜不是，那么有什么方法可以将 AssemblyInfo.cs 中的 AssemblyFileVersion 属性放入资源文件或常量之类的东西中，这样就可以在运行时访问它而不使用 GetExectingAssembly？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T13:23:34.757

这就是我想出的。丑陋但满足目标（定义 AssemblyFileVersion 的单一位置），没有任何 MSBuild 技巧将 AssemblyFileVersion 写入资源文件。

**文件：AssemblyInfo.cs**

```
// General Information about an assembly is controlled through the following 
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("MyProject")]
...
[assembly: AssemblyFileVersion(MyProject.AssemblyInfo.AssemblyFileVersion)]

namespace MyProject
{
    static internal class AssemblyInfo
    {
        /// <summary>
        /// The AssemblyFileVersion of this web part
        /// </summary>
        internal const string AssemblyFileVersion = "1.0.3.0";
    }
} 
```

# c++ - Sphinx 是否已经适用于 C++ 文档？

> ID：12933900
> 
> 赞同：44
> 
> 时间：2012-10-17T12:03:26.063
> 
> 标签：c++, python-sphinx, doxygen, documentation-generation

我想在 C++ 中尝试一个新项目的文档生成器。我认为我的选择是 Doxygen 或 Sphinx。由于我在 Python 中有想要使用 Sphinx 的项目，我想知道 Sphinx 是否也是 C++ 的正确选择。[Sphinx](https://www.sphinx-doc.org)网站声明支持 C++，但我找不到让我开始使用 C++ 文档的文档。

Stackoverflow 上已经[讨论了](https://stackoverflow.com/questions/835043/has-anyone-used-sphinx-to-document-a-c-project)一个类似的问题，主要答案得出结论：

> 尚未完全可用，
> 但请继续关注

由于讨论已经**有一年多了**，我想知道这个结论是否仍然有效。我应该为我的 C++ 文档选择 Doxygen 而不是 Sphinx 吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T12:05:35.467

Sphinx 不能单独从 C++ 源代码中提取文档。但是，有一些扩展，最显着的是[Breathe](http://breathe.readthedocs.org/en/latest/)，它利用 Doxygen 从 C++ 中提取文档。我没有测试过这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:27:18.060

对于 C++ Doxygen 非常好；C++ 的 Sphinx 支持是通过 Doxygen 完成的（使用[Breathe](http://michaeljones.github.com/breathe/)）。

您希望两种语言只有一个工具，以提高可维护性。**[Doxygen 可以从 Python 代码生成文档](https://stackoverflow.com/questions/58622/can-i-document-python-code-with-doxygen-and-does-it-make-sense)**，因此我建议您尽可能将 Doxygen 用于这两个源。[这是 Doxygen 和 Python 的教程](http://engtech.wordpress.com/2007/03/20/automatic_documentation_python_doxygen/)。

# hyperlink - TinyMce ImageManager 图像上传到单个/多个文件夹，可以被 2 个不同的网站访问

> ID：12933901
> 
> 赞同：0
> 
> 时间：2012-10-17T12:03:26.177
> 
> 标签：hyperlink, tinymce, image-uploading, mcimagemanager

我正在使用 TinyMce 图像管理器，并使用它来将图像上传到可以由 2 个不同网站访问的单个/多个文件夹。

例如。:- 我有 xyz.com 和 abc.com

我希望每当我使用 imagemanager 上传图像时，它都能完美地显示在这两个图像中。这怎么可能实现。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:26:50.607

您可以在您的服务器（托管两个网站）上使用软链接，以使该文件夹对两个网站都可用。

# android - 在android中创建自己的动作栏

> ID：12933905
> 
> 赞同：3
> 
> 时间：2012-10-17T12:03:35.963
> 
> 标签：android, android-layout

我在android中的操作栏有一些问题。我想在左侧和右侧有一些图标。在左侧我想要 2 个图标和文本，在右侧我想要 6 个图标，但是当文本很长时，我想在右侧隐藏一些图标。在标准操作栏中，我只能从右到左添加项目，所以我决定创建自己的操作栏。我该如何开始？我需要知道什么才能做到这一点。你能给我一些建议或例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T12:08:25.053

它非常简单。创建将从某些布局扩展的新类。将具有图标和按钮的 xml 膨胀。并为逻辑显示\隐藏\设置侦听器等方法。我很早就做了，但现在我可以说这不是一个好主意。有一些指导方针，创建应用程序非常重要，因为它必须是。

我的旧项目示例：

```
public class ActionBar extends RelativeLayout {
    private ToggleButton buttonSave;
    private ToggleButton buttonClear;
    private ToggleButton buttonHelp;
    private ToggleButton buttonBack;
    private FrameLayout sepparator;
    private TextView textview;
    private ImageView imageViewIcon;

    public ActionBar(Context context, AttributeSet attrs) {
        super(context, attrs);

        LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        layoutInflater.inflate(R.layout.actionbar, this);

        initView();
    }

    private void initView () {
        buttonSave = (ToggleButton) findViewById(R.id.actionbar_togglebutton_save);
        buttonBack = (ToggleButton) findViewById(R.id.actionbar_togglebutton_back);
        buttonHelp = (ToggleButton) findViewById(R.id.actionbar_togglebutton_help);
        textview = (TextView) findViewById(R.id.actionbar_textview);
        imageViewIcon = (ImageView) findViewById(R.id.actionbar_imageview_icon);
        buttonClear = (ToggleButton) findViewById(R.id.actionbar_togglebutton_clear);
        sepparator = (FrameLayout) findViewById(R.id.actionbar_sepparator);
    }

    public void setOnSaveButtonClickListener (OnClickListener listener) {
        buttonSave.setOnClickListener(listener);
    }

    public void setSaveButtonDrawable (Drawable d) {
        buttonSave.setBackgroundDrawable(d);
        buttonSave.setVisibility(View.VISIBLE);
    }

    public void setOnHelpButtonClickListener (OnClickListener listener) {
        buttonHelp.setOnClickListener(listener);
    }
    public void setHelpButtonDrawable (Drawable d) {
        buttonHelp.setBackgroundDrawable(d);
        buttonHelp.setVisibility(View.VISIBLE);
    }

    public void setOnBackButtonClickListener (OnClickListener listener) {
        buttonBack.setOnClickListener(listener);
    }

    public void setBackButtonDrawable (Drawable d) {
        buttonBack.setBackgroundDrawable(d);
        buttonBack.setVisibility(View.VISIBLE);
    }

    public void setClearButtonDrawable (Drawable d) {
        buttonClear.setBackgroundDrawable(d);
        buttonClear.setVisibility(View.VISIBLE);
    }

    public void setOnClearButtonClickListener (OnClickListener listener) {
        buttonClear.setOnClickListener(listener);
    }

    public void setTitle (String value) {
        textview.setText(value);
    }

    public void setIcon (int resId) {
        imageViewIcon.setImageDrawable(getResources().getDrawable(resId));
    }

    public void setOnIconClickListener (OnClickListener listener) {
        imageViewIcon.setOnClickListener(listener);
    }

    public void setSaveButtonChecked (boolean value) {
        buttonSave.setChecked(value);
    }

    public void setSeporatorVisible (int visibility) {
        sepparator.setVisibility(visibility);
    }

    public void setOnIconListener (OnClickListener listener) {
        imageViewIcon.setOnClickListener(listener);
    }
} 
```

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="60dp"
    android:background="@drawable/avtion_bar_bg" >

    <ToggleButton 
        android:id="@+id/actionbar_togglebutton_back"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:visibility="gone"
        android:background="@drawable/arrow_back_button_drawable"
        android:textOn=""
        android:textOff="" />

     <ImageView 
        android:id="@+id/actionbar_imageview_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/actionbar_togglebutton_back"
        android:layout_marginLeft="19.1dp"/>

    <TextView 
        android:id="@+id/actionbar_textview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:textColor="@color/actionbar_text"
        android:textSize="16dp"
        android:layout_toRightOf="@id/actionbar_imageview_icon"
        android:layout_marginLeft="56.1dp" /> 

   <RelativeLayout 
       android:id="@+id/actionbar_relativelayout_saveconteiner"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentRight="true"
       android:layout_centerVertical="true">

       <ToggleButton 
           android:id="@+id/actionbar_togglebutton_save"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:visibility="gone"
           android:layout_alignParentRight="true"
           android:layout_centerVertical="true"
           android:background="@drawable/save_btn_drawable"
           android:textOn=""
           android:textOff=""/>

       <FrameLayout 
           android:id="@+id/actionbar_sepparator"
           android:layout_width="0.5dp"
           android:background="@color/white25transpert"
           android:layout_toLeftOf="@id/actionbar_togglebutton_save"
           android:layout_height="35dp"
           android:layout_centerInParent="true">     
       </FrameLayout>

       <ToggleButton 
           android:id="@+id/actionbar_togglebutton_clear"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content" 
           android:visibility="gone"
           android:layout_toLeftOf="@id/actionbar_sepparator"
           android:layout_marginRight="4dp"
           android:layout_centerVertical="true"
           android:background="@drawable/clear_button_drawable"
           android:textOn=""
           android:textOff=""/>

   </RelativeLayout> 

   <ToggleButton 
      android:id="@+id/actionbar_togglebutton_help"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" 
      android:visibility="gone"
      android:layout_alignParentRight="true"
      android:layout_centerVertical="true"
      android:background="@drawable/save_btn_drawable"
      android:layout_marginRight="10dp"
      android:textOn=""
      android:textOff=""/>

</RelativeLayout> 
```

祝你好运！

# actionscript-3 - 动作脚本循环第二次工作

> ID：12933906
> 
> 赞同：0
> 
> 时间：2012-10-17T12:03:42.090
> 
> 标签：actionscript-3

我有一个带有 SQLite 数据库的移动应用程序来在手机上存储详细信息，我想通过 PHP 将此表的内容同步到远程 mySQL 服务器。

我使用以下内容将行写入远程服务器。

```
protected function button_clickHandler(event:MouseEvent):void
        {
            var result:SQLResult;
            var numRows:int ;
            conn = new SQLConnection();
            conn.open(file, SQLMode.CREATE);
            selectStmt.sqlConnection = conn; 
            var sql:String =  "SELECT * FROM surveyResponseHeader"; 
            selectStmt.text = sql; 
            selectStmt.execute(); 
            result = selectStmt.getResult(); 
            numRows = result.data.length; 
            trace (result.data.length);
            trace (numRows);
            for (var i:int = 0; i< numRows; i++){

                surveyresponse.surveyID = parseInt(result.data[i]["surveyID"]);
                surveyresponse.surveySite =result.data[i]["surveySite"];
                surveyresponse.surveyReference = result.data[i]["surveyReference"];
                surveyresponse.siteManager =result.data[i]["siteManager"];
                surveyresponse.surveyDate = result.data[i]["surveyDate"];
                surveyresponse.surveyNextVisit = result.data[i]["surveyNextVisit"];
                surveyresponse.surveySignature = result.data[i]["surveySignature"];
                surveyresponse.surveyImage =result.data[i]["surveyImage"];
                surveyresponseheaderService.createSurveyresponseheader(surveyresponse);

            }

        } 
```

我的问题：

在第一次运行时只发布最后一行，并且根据 SQLLite 查询返回的行数多次发布，在第二次运行时它正确发布，这是为什么呢？

我已经盯着这个看了好几个小时，看不出我哪里出错了。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:31:45.747

您希望对其进行排序，但不包含 ORDER BY 语句。
默认情况下，SQL 将按主键排序。

要对除该键之外的其他内容进行排序，您需要使用 ORDER BY 表达式指定它。一个 ORDER BY 表达式可以可选地后跟关键字 ASC（首先返回较小的值）或 DESC（首先返回较大的值）之一。如果既未指定 ASC 也未指定 DESC，则默认情况下按升序（较小的值在前）对行进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:39:50.293

我建议你添加事件监听器：

```
dbStatement.addEventListener(SQLEvent.RESULT, resultHandler);
dbStatement.addEventListener(SQLErrorEvent.ERROR, errorHandler);
dbStatement.execute(); 
```

然后在处理程序检查结果中：

```
function resultHandler(event:SQLEvent):void
{
    var result:SQLResult = dbStatement.getResult();
    if (result != null)
    {
        var numRows:int = result.data.length;
        for (var i:int = 0; i < numRows; i++)
        {
            var row:Object = result.data[i];
            trace("id:", row.id, ", name:", row.name, ", ssn:", row.ssn);
        }
    }
}

function errorHandler(event:SQLErrorEvent):void
{
    trace("An error occured while executing the statement.");
} 
```

如[execute() 方法的帮助中所述](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/data/SQLStatement.html#execute%28%29)

# css - Less/CSS : 获取该属性的值

> ID：12933908
> 
> 赞同：5
> 
> 时间：2012-10-17T12:03:54.620
> 
> 标签：css, this, less, addition

我想在 less 中实现以下目标：

```
.bar {
    width: 100px;
}

.foo .bar {
    width: this + 20px // 120px
} 
```

使用 Less 是否可行？如果可以，怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:12:21.663

这不行吗？

```
@width: 100px;

.bar {
    width: @width
}

.foo .bar {
    width: @width + 20px
} 
```

# mongodb - 无法在 Mongo 中更新数组

> ID：12933909
> 
> 赞同：2
> 
> 时间：2012-10-17T12:03:55.383
> 
> 标签：mongodb, express, mongoose

İ 根据其 ID 找到特定的书。但我无法更新该集合所有者数组。该数组已经有一些值，但我想用下面的新值更新它。

```
 Book.find({_id: "5423"},function(err,usr){
    usr[0].update($set:{owner:["123","145"]}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:07:11.147

[官方文档](http://www.mongodb.org/display/DOCS/Updating#Updating-%24push)中给出了答案。这是一个可以在 Mongo shell 中执行的示例：

```
b1 = { 'name' : 'Introduction to MongoDB', owners : [1, 10] }
b2 = { 'name' : 'SQL for Dummies', owners : [5] }

db.Books.save(b1)
db.Books.save(b2)

book = db.Books.find().next() // just picking first available book
db.Books.update({ _id : book._id }, { $pushAll : { owner : [123, 145]} }) 
```

请注意，MongoDB 不会返回您和更新的文档（同样，这就是 DB 的设计方式和工作方式）。

# android - 我们必须在 Android 的 Twitter Api 的回调 URL 中写什么？

> ID：12933913
> 
> 赞同：0
> 
> 时间：2012-10-17T12:04:06.787
> 
> 标签：android, twitter

我们必须在 Android 的 Twitter Api 的回调 URL 中写什么？下面是我的代码。请任何人告诉我这段代码有什么问题？

```
public class second extends Activity {

static String TWITTER_CONSUMER_KEY = "pHdHjwLS3D1iItAnMQTKA";
static String TWITTER_CONSUMER_SECRET = "37x7RiVdITp7jrgqXcBqR1eL1evVmmwOcxbwUxVPI6w";

// Preference Constants
static String PREFERENCE_NAME = "twitter_oauth";
static final String PREF_KEY_OAUTH_TOKEN = "859240052-4bb3qfkDhKu61xLC4ueTonaulj4Mp2k7QMRgqrF1";
static final String PREF_KEY_OAUTH_SECRET = "y3gVcOvZmTWuZqjFe9y66z1imVNUEungZmPemm8Q";
static final String PREF_KEY_TWITTER_LOGIN = "isTwitterLogedIn"; 
```

// 静态最终字符串 TWITTER_CALLBACK_URL = "oauth://t4jsample";

```
public static final String OAUTH_CALLBACK_SCHEME = "x-news-oauth-twitter";
public static final String OAUTH_CALLBACK_HOST = "callback";
public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME
        + "://" + OAUTH_CALLBACK_HOST;
// Twitter oauth urls
static final String URL_TWITTER_AUTH = "auth_url";
static final String URL_TWITTER_OAUTH_VERIFIER = "oauth_verifier";
static final String URL_TWITTER_OAUTH_TOKEN = "oauth_token";

TextView txt_title, txt_desc, txt_link, txt_comment, txt_date,
        txt_username, txt_updatestatus;
String title, desc, link, comment, date, description;
Button btn_twit, btn_update, btn_logout;
EditText edt_status;

// Progress dialog
ProgressDialog pDialog;

// Twitter
private static Twitter twitter;
private static RequestToken requestToken;

// Shared Preferences
private static SharedPreferences mSharedPreferences;

// Internet Connection detector
private ConnectionDetector cd;

// Alert Dialog Manager
AlertDialogManager alert = new AlertDialogManager();

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.second);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    cd = new ConnectionDetector(getApplicationContext());

    // Check if Internet present
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(second.this, "Internet Connection Error",
                "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    }

    // Check if twitter keys are set
    if (TWITTER_CONSUMER_KEY.trim().length() == 0
            || TWITTER_CONSUMER_SECRET.trim().length() == 0) {
        // Internet Connection is not present
        alert.showAlertDialog(second.this, "Twitter oAuth tokens",
                "Please set your twitter oauth tokens first!", false);
        // stop executing code by return
        return;
    }

    txt_title = (TextView) findViewById(R.id.txt_title);
    txt_desc = (TextView) findViewById(R.id.txt_desc);
    txt_link = (TextView) findViewById(R.id.txt_link_second);
    txt_comment = (TextView) findViewById(R.id.txt_comments_second);
    txt_date = (TextView) findViewById(R.id.txt_pubdate_second);
    btn_twit = (Button) findViewById(R.id.btn_twit);
    btn_update = (Button) findViewById(R.id.btnUpdateStatus);
    btn_logout = (Button) findViewById(R.id.btnLogoutTwitter);
    txt_username = (TextView) findViewById(R.id.lblUserName);
    edt_status = (EditText) findViewById(R.id.edt_txtUpdateStatus);
    txt_updatestatus = (TextView) findViewById(R.id.lblUpdate);

    // Shared Preferences
    mSharedPreferences = getApplicationContext().getSharedPreferences(
            "MyPref", 0);

    Bundle mbunle = getIntent().getExtras();
    title = mbunle.getString("title");
    txt_title.setText(title);

    desc = mbunle.getString("desc");
    txt_desc.setText(desc);
    link = mbunle.getString("link");
    System.out.println("Link is:----" + link);
    txt_link.setText(link);
    MatchFilter matchFilter = new MatchFilter() {
        public final boolean acceptMatch(CharSequence s, int start, int end) {
            // you can compare match over here
            // return s.toString().equals("@Bharat");
            return true;
        }
    };
    TransformFilter transformFilter = new TransformFilter() {
        public final String transformUrl(final Matcher match, String url) {
            return "";
            // www.android-geek.blogspot.com/2011/04/linkify-text-in-android.html
        }
    };

    Pattern pattern = Pattern.compile(link);
    // String scheme = "http://";
    Linkify.addLinks(txt_link, pattern, link, matchFilter, transformFilter);
    txt_link.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Intent in = new Intent(second.this, web.class);
            in.putExtra("link", link);
            startActivity(in);
        }
    });

    comment = mbunle.getString("comment");
    txt_comment.setText(comment);

    date = mbunle.getString("date");
    txt_date.setText(date);

    btn_twit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call login twitter function
            loginToTwitter();
        }
    });

    /**
     * Button click event to Update Status, will call updateTwitterStatus()
     * function
     * */
    btn_update.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // Call update status function
            // Get the status from EditText
            Bundle bundle = getIntent().getExtras();
            String status = bundle.getString("desc");
            System.out.println("Status is:-----" + status);
            edt_status.setText(status);

            // Check for blank text
            if (status.trim().length() > 0) {
                // update status
                new updateTwitterStatus().execute(status);
            } else {
                // EditText is empty
                Toast.makeText(getApplicationContext(),
                        "Please enter status message", Toast.LENGTH_SHORT)
                        .show();
            }
        }
    });
    /**
     * Button click event for logout from twitter
     * */
    btn_logout.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // Call logout twitter function
            logoutFromTwitter();
        }
    });
    /**
     * This if conditions is tested once is redirected from twitter page.
     * Parse the uri to get oAuth Verifier
     * */
    if (!isTwitterLoggedInAlready()) {
        Uri uri = getIntent().getData();
        if (uri != null && uri.toString().startsWith(OAUTH_CALLBACK_URL)) {
            // oAuth verifier
            String verifier = uri
                    .getQueryParameter(URL_TWITTER_OAUTH_VERIFIER);

            try {
                // Get the access token
                AccessToken accessToken = twitter.getOAuthAccessToken(
                        requestToken, verifier);

                // Shared Preferences
                Editor e = mSharedPreferences.edit();

                // After getting access token, access token secret
                // store them in application preferences
                e.putString(PREF_KEY_OAUTH_TOKEN, accessToken.getToken());
                e.putString(PREF_KEY_OAUTH_SECRET,
                        accessToken.getTokenSecret());
                // Store login status - true
                e.putBoolean(PREF_KEY_TWITTER_LOGIN, true);
                e.commit(); // save changes

                Log.e("Twitter OAuth Token", "> " + accessToken.getToken());

                // Getting user details from twitter
                // For now i am getting his name only
                int userID = accessToken.getUserId();
                User user = twitter.showUser(userID);
                String username = user.getName();

                // Displaying in xml ui
                txt_username.setText(Html.fromHtml("<b>Welcome " + username
                        + "</b>"));

                // Hide login button
                btn_twit.setVisibility(View.GONE);

                // Show Update Twitter

                txt_updatestatus.setVisibility(View.VISIBLE);
                edt_status.setVisibility(View.VISIBLE);
                btn_update.setVisibility(View.VISIBLE);
                btn_logout.setVisibility(View.VISIBLE);

                Log.e("Visibility", "" + txt_updatestatus.getVisibility());
                Log.e("Visibility", "" + btn_update.getVisibility());
                Log.e("Visibility", "" + btn_logout.getVisibility());

            } catch (Exception e) {
                // Check log for login errors
                Log.e("Twitter Login Error", "> " + e.getMessage());
            }
        }
    }

}

/**
 * Function to login twitter
 * */
private void loginToTwitter() {
    // Check if already logged in
    if (!isTwitterLoggedInAlready()) {
        ConfigurationBuilder builder = new ConfigurationBuilder();
        builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
        builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
        Configuration configuration = builder.build();

        TwitterFactory factory = new TwitterFactory(configuration);
        twitter = factory.getInstance();

        try {
            requestToken = twitter
                    .getOAuthRequestToken(OAUTH_CALLBACK_URL);
            this.startActivity(new Intent(Intent.ACTION_VIEW, Uri
                    .parse(requestToken.getAuthenticationURL())));
        } catch (TwitterException e) {
            e.printStackTrace();
        }
    } else {
        // user already logged into twitter
        Toast.makeText(getApplicationContext(),
                "Already Logged into twitter", Toast.LENGTH_LONG).show();
    }
}

/**
 * Function to update status
 * */
class updateTwitterStatus extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(second.this);
        pDialog.setMessage("Updating to twitter...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Places JSON
     * */
    protected String doInBackground(String... args) {
        Log.d("Tweet Text", "> " + args[0]);
        String status = args[0];
        try {
            ConfigurationBuilder builder = new ConfigurationBuilder();
            builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
            builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);

            // Access Token
            String access_token = mSharedPreferences.getString(
                    PREF_KEY_OAUTH_TOKEN, "");
            // Access Token Secret
            String access_token_secret = mSharedPreferences.getString(
                    PREF_KEY_OAUTH_SECRET, "");

            AccessToken accessToken = new AccessToken(access_token,
                    access_token_secret);
            Twitter twitter = new TwitterFactory(builder.build())
                    .getInstance(accessToken);

            // Update status
            twitter4j.Status response = twitter.updateStatus(status);

            Log.d("Status", "> " + response.getText());
        } catch (TwitterException e) {
            // Error in updating status
            Log.d("Twitter Update Error", e.getMessage());
        }
        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog and show
     * the data in UI Always use runOnUiThread(new Runnable()) to update UI
     * from background thread, otherwise you will get error
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                Toast.makeText(getApplicationContext(),
                        "Status tweeted successfully", Toast.LENGTH_SHORT)
                        .show();
                // Clearing EditText field
                // txtUpdate.setText("");
            }
        });
    }

}

/**
 * Function to logout from twitter It will just clear the application shared
 * preferences
 * */
private void logoutFromTwitter() {
    // Clear the shared preferences
    Editor e = mSharedPreferences.edit();
    e.remove(PREF_KEY_OAUTH_TOKEN);
    e.remove(PREF_KEY_OAUTH_SECRET);
    e.remove(PREF_KEY_TWITTER_LOGIN);
    e.commit();

    // After this take the appropriate action
    // I am showing the hiding/showing buttons again
    // You might not needed this code
    btn_logout.setVisibility(View.GONE);
    btn_update.setVisibility(View.GONE);
    edt_status.setVisibility(View.GONE);
    txt_updatestatus.setVisibility(View.GONE);
    txt_username.setText("");
    txt_username.setVisibility(View.GONE);

    btn_twit.setVisibility(View.VISIBLE);
}

/**
 * Check user already logged in your application using twitter Login flag is
 * fetched from Shared Preferences
 * */
private boolean isTwitterLoggedInAlready() {
    // return twitter login status from Shared Preferences
    return mSharedPreferences.getBoolean(PREF_KEY_TWITTER_LOGIN, false);
}

protected void onResume() {
    super.onResume();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:27:58.237

当您在 twitter 应用程序上注册您的应用程序时，写下您提供的 url，或者什么都没有`""`。

如果您无法得到我的答案，请单击此链接[https://dev.twitter.com/](https://dev.twitter.com/)并在此处登录并单击您的应用程序，那里已经存在您的`callback URL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:17:14.567

```
 "type in your Second Activity Class"    
        public static final String  OAUTH_CALLBACK_SCHEME   = "XYZ";
        public static final String  OAUTH_CALLBACK_HOST     = "callback";
        public static final String  TWITTER_CALLBACK_URL        = OAUTH_CALLBACK_SCHEME + "://" + OAUTH_CALLBACK_HOST;
   // and also you have to upgrade your Manifest with same names .... you dont have to type same callback URL from which you type from Dev.twitter.com
     ` {  
    <activity>
    <data
            android:host="callback"
            android:scheme="XYZ" />
                </intent-filter
    </activity> }` 
```

# layout - TableView 的列数超过指定的列数

> ID：12933918
> 
> 赞同：16
> 
> 时间：2012-10-17T12:04:14.813
> 
> 标签：layout, tableview, javafx-2

在 JavaFX 2 中使用 TableView 时，似乎神奇地添加了一列，而不是调整现有列的大小。请看下面的截图。

我期望/想要的：两列都应有 50% 的空间，不应添加第三列（未命名/空）。

![在此处输入图像描述](../Images/5d63567f42209245da78b84c88d32e18.png)

使用 Scene Builder 创建，FXML 代码：

```
<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<BorderPane id="BorderPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
  <top>
    <TableView prefHeight="200.0" prefWidth="200.0">
      <columns>
        <TableColumn prefWidth="75.0" text="Column X" />
        <TableColumn prefWidth="75.0" text="Column X" />
      </columns>
    </TableView>
  </top>
</BorderPane> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-18T08:16:43.263

采用

```
table.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY); 
```

通过这样做，您可以确保表列标题中的额外空间将分布在列之间。在这个分布中，列的最大和最小宽度当然被考虑在内。
默认情况下`TableView.UNCONSTRAINED_RESIZE_POLICY`，在表格列最初采用其首选宽度的情况下使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-05T23:14:13.857

Uluk Bly 的答案对于代码是绝对正确的。

此外，使用 Scenebuilder 时，请确保将“属性”下拉窗口中的策略设置为相同（CONSTRAINED），并且它应该显示在您的 FXML 文件中，如下所示：

```
 <columnResizePolicy>
    <TableView fx:constant = "CONSTRAINED_RESIZE_POLICY"/>
    </columnResizePolicy> 
```

# freeswitch - 设置freeswitch通话时长

> ID：12933919
> 
> 赞同：0
> 
> 时间：2012-10-17T12:04:22.043
> 
> 标签：freeswitch

我对freeswitch有点陌生，但我想拨打一个号码，播放声音并在一定时间后挂断。通话持续时间可能比声音文件更长或更短。

我希望用 Javascript 来做到这一点，我做到了

```
session.waitForAnswer(10000);

if (session.ready()) {
    session.streamFile('/path-to-sound.wav');
    session.hangup();
} 
```

有没有办法可以通过javascript设置自动挂断时间，因为我可以通过循环静音声音文件来保持通话打开。

我正在使用 javascript，因为我想将声音文件和持续时间保留为变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:36:44.523

使用“sched_api”调用，您可以安排执行“挂断”调用。那是你要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:13:52.043

您在下面有一个实施示例。

```
 <action application="set" data="execute_on_answer=sched_hangup+60alloted_timeout" /> 
  <action application="bridge" data="sofia/external/1234567@10.10.10.10"/> 
```

从：

[http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup](http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_sched_hangup)

# python - 连接字符串 MAKO

> ID：12933922
> 
> 赞同：2
> 
> 时间：2012-10-17T12:04:29.143
> 
> 标签：python, cherrypy, mako

这是我的 Mako 代码，但是当我将此代码与我的服务器 Cherrypy 一起使用时出现错误。错误是

```
SyntaxException: (SyntaxError) invalid syntax (<unknown>, line 1) (u"c=inputp${k}_id\nsomeval= ${urld['kwargs']['${c}']}") in file '/home/user/Scaricati/prototypefin/template/web_editor_parameter_settings.html' at line: 164 char: 1 
```

当我错了这段代码？我必须尝试，如果有相关值并打印其内容

```
 <div id="sortparam" >

<%
    k = 1
    a=99
%>
<ul  class="ui-sortable" id="sorpara">
    % for k in a:
        <% 
        c=inputp${k}_id
        someval= ${urld['kwargs']['${someval}']} 
        %>
        % if someval is UNDEFINED:
                    <% break %> 
        %     else:
<li id="inputp${id}_id" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>${someval}</li>

        %     endif
        % endfor
  </ul>
</div> 
```

啊，我想念什么是变量 kwargs？Kwargs 是我的文件的内容

```
{'demo_title': 'Demo title', 'demo_input_description': 'hola mundo ', 'demo_params_description': '  ', 'demo_wait_description': ' ', 'demo_result_description': '  ', 'images_config_file': 'cfgmydemo.cfg', 'demo_data_filename': 'data_saved.cfg', 'tag': '', 'inputdata1_id': 'id_lsd', 'inputdata1_max_pixels': '1024000' } 
```

我哪里错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:35:15.197

试试这个代码：

```
<div id="sortparam" >

<%
    k = 1
    a=99
%>
<ul  class="ui-sortable" id="sorpara">
    % for k in a:
        <% 
        c='inputp'+k+'_id' 
        %>
        % if c in urld['kwargs'] :

<li id="inputp${k}_id" class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>${urld['kwargs']['${c}']}</li>

        %     endif
        % endfor
  </ul>
</div> 
```

# java - 不可变到可变

> ID：12933926
> 
> 赞同：-1
> 
> 时间：2012-10-17T12:04:42.390
> 
> 标签：java, immutability, mutable

如何将不可变类包装在可变类中？
例如包装`Integer`and`String`和创建`MutableInteger`and `MutableString`。

似乎有多种方法可以做到这一点。我想在保持可读性的同时减少编码方面的工作量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:12:44.610

您可能有一个*可变伴生*类，它可以查看不可变对象的内部结构并提供公共 mutator 方法。实现这一点的最佳方法是使可变伴侣成为不可变类中的嵌套类。

但是，不要期望真正改变 JDK 的标准类，如`Integer`or `String`。那是不可能的。您只能编写在突变时用新实例替换其内部`String`s 或s 的外观类。`Integer`

# android - 如何通过更改黑白横向和纵向方向在android中播放视频？

> ID：12933931
> 
> 赞同：0
> 
> 时间：2012-10-17T12:05:12.957
> 
> 标签：android

我是android应用程序开发的新手。

在我的应用程序中，我播放一个视频文件。当我开始我的活动时，视频文件可以正常播放。

在播放视频时，如果我将方向从横向更改为纵向或反向，则播放视频再次从头开始说明。

请帮助我前进。

谢谢你，

再见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:16:36.580

实际上发生的事情是，当您更改屏幕方向时，活动正在刷新。您必须停止刷新有关方向更改的活动。为此，您可以参考：

[方向改变时不要重新加载应用程序](https://stackoverflow.com/questions/5913130/dont-reload-application-when-orientation-changes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:16:41.133

使用 getLastNonConfigurationInstance() 方法防止再次恢复媒体。

[getLastNonConfigurationInstance()](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T12:20:44.570

如果您想在更改方向时继续播放视频，那么

在您的清单文件中添加

```
<activity android:name=".youractivityname"
              android:label="activity"
              android:configChanges="keyboardHidden|orientation"/> 
```

因此，如果您也更改方向，则将播放视频

# android - MapActivity 有时会在没有任何反应的情况下关闭

> ID：12933933
> 
> 赞同：0
> 
> 时间：2012-10-17T12:05:24.930
> 
> 标签：android, android-mapview

`MapActivity`通常只是无缘无故地关闭。没有例外。没有消息`logcat`！没有“强制关闭”消息。它正在消失。

另一个奇怪的地方是它可以在不与它进行任何交互的情况下自行关闭（Activity 启动 -> 30 秒 -> Activity 自行关闭）。

有没有人有同样的问题？任何解决方法？我该如何解决这个问题？

附言`api level - 7`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:06:49.000

`mapView`看起来问题是我正在使用调试 API 密钥并对(`addView`和`removeView`)发出太多请求

# jquery - 对简单 Js 的 if 验证使用 jquery

> ID：12933935
> 
> 赞同：1
> 
> 时间：2012-10-17T12:05:27.427
> 
> 标签：jquery

我有这行代码

```
 if (document.getElementById("nosok").value==""
    ||document.getElementById("hnosok").value=="0")
  { 
    $( function() {jAlert("blabla!", "blabla")});
   return false;
  } 
```

IE 上的问题是，模式窗口在单击“确定”按钮后并没有关闭，而且它在页面的整个宽度上传播。

我只是想用 jquery 更优雅的方式替换 alert() 行，从而丢失丑陋的弹出框。

有任何想法吗？

# java - 我的 Java 代码没有输出

> ID：12933938
> 
> 赞同：1
> 
> 时间：2012-10-17T12:05:30.103
> 
> 标签：java, jakarta-ee, javax.comm

我想找到 Windows 7 中存在的端口，并且我已经为它编写了代码。它成功编译，但没有输出。我已经在 Netbeans 中编译

这是我的代码：

```
import java.util.*;  
import javax.comm.*;

public class PortLister {  
    public static void main(String[] args) {  
        Enumeration e = CommPortIdentifier.getPortIdentifiers();  
        while (e.hasMoreElements()) {  
            System.out.println((CommPortIdentifier) e.nextElement());  
        } 
    }  
} 
```

# eclipse - tomcat HTTP状态404错误请求的资源（）在eclipse中不可用，但可以在浏览器中使用

> ID：12933942
> 
> 赞同：0
> 
> 时间：2012-10-17T12:05:48.317
> 
> 标签：eclipse, tomcat

当我尝试从 Eclipse 运行 jsp 程序时出现此错误。

网址 http://localhost:8090/form1/META-INF/form.jsp

tomcat HTTP 状态错误 404 请求的资源（）不可用。

但是当从浏览器 http://localhost:8090/form1/form.jsp 运行相同的 jsp 程序时

有用。

使用日食伽利略，tomcat6，ubuntu 11.10。我已经创建了我的 tomcat 实例（用户实例），并且有 tomcats webapps/WEB-INF 目录，在 webapps form.jsp 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:06:07.587

路径中的 META-INF 似乎是您的问题： http ://localhost:8090/form1/ **META-INF** /form.jsp 而不是工作 http ://localhost:8090/form1/form.jsp

# javascript - Jquery在菜单选择时替换div并重置代码

> ID：12933946
> 
> 赞同：0
> 
> 时间：2012-10-17T12:05:53.213
> 
> 标签：javascript, jquery, html, menu

我有 jquery 脚本，它在`a href="#1"`选择时替换 div。`a href="#1"`也被替换，`a href="#2"`反之亦然。这是jQuery：

```
$('.child2, a[href="#1"]').hide()

$('#replacepagelinks a').click(function(){
    $(this).hide().siblings().show()
    var w = this.hash.replace('#', '');
    $('#parent div.child'+w).show().siblings().hide()
}) 
```

这是HTML。

```
<div id="parent">
<div class="child1">Child 1 Contents</div>
<div class="child2">Child 2 Contents</div>
</div>
<div id="replacepagelinks">
<a href="#1">Replace Child 1 with Child 2</a>
<a href="#2">Replace Child 2 with Child 1</a>
</div> 
```

这是 jfiddle 工作示例[http://jsfiddle.net/KaqZ5/](http://jsfiddle.net/KaqZ5/)

这适用于 1 个实例。但是我在 jquery 菜单中多次定位这些，这会导致问题。如果我单击第一个菜单项，它会显示 child1，然后单击`a href="#1"`显示 child2 会按预期进行。但是现在如果我进入第二个菜单项 child2 仍然显示（不是应该的 child1！），因为 jquery 代码尚未重置。这是我的html设置：

```
<div id=menu">
     <div class="menu_item">
          <a href="#" class="drop_menu"></a>
           <div id="parent">
              <div class="child1">Child 1 Contents</div>
              <div class="child2">Child 2 Contents</div>
           </div>
           <div id="replacepagelinks">
              <a href="#1">Replace Child 1 with Child 2</a>
              <a href="#2">Replace Child 2 with Child 1</a>
           </div>
     </div>
     <div class="menu_item">
          <a href="#" class="drop_menu"></a>
           <div id="parent">
              <div class="child1">Child 1 Contents</div>
              <div class="child2">Child 2 Contents</div>
           </div>
           <div id="replacepagelinks">
              <a href="#1">Replace Child 1 with Child 2</a>
              <a href="#2">Replace Child 2 with Child 1</a>
           </div>
     </div>
     <div class="menu_item"> etc.. </div>
</div> 
```

为了删除显示每个 menu_item 我有一个`a href="#" class="drop_menu`执行菜单删除 jquery 的。有没有办法让相同的`a href="#" class="drop_menu"`链接也重置'replace div jquery script'（本页顶部），以便每次选择菜单项时 child1 是第一个出现的？多谢了。皮亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:17:04.107

你是这个意思吗？[http://jsfiddle.net/KaqZ5/3/](http://jsfiddle.net/KaqZ5/3/)

我将函数的第一行更改`click`为：

```
 $('a[href="' + this.hash + '"]').hide().siblings().show() 
```

例如：这将隐藏所有`#1`链接并显示链接`#2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:23:31.803

如果我理解正确，您想确保单击 a 时始终显示`class=child1`and并且隐藏其他？然后这会做的伎俩：`href=#2``drop_menu`

```
$(".drop_menu").on('click', function() {
    $(this).parent().find('.child1, a[href="#2"]').show().siblings().hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T12:23:44.127

你永远不应该有两个具有相同 id 的标签（你有不止一次的 #parent 和 #replacepagelinks），id 应该是唯一的，如果你需要多个标签，那么你有一个类

```
$('#replacepagelinks a').click(function(){
  $(this).hide().siblings().show()
  var w = this.hash.replace('#', '');
  item = $(this).parents('.menu_item'); /*get the parent .menu_item*/
  $(item).find('.child'+w).show().siblings().hide(); /*find the .child and show it*/
}) 
```

# linq - 在 nhibernate 3.3.1.4000 中没有显式关系的左连接

> ID：12933947
> 
> 赞同：1
> 
> 时间：2012-10-17T12:05:54.360
> 
> 标签：linq, nhibernate

我有这两个简化的实体：

```
public class Measurement : Entity
{
    public virtual float DisplayValue { get; set; }
    private DateTime _timeStamp;
    public virtual DateTime TimeStamp
    {
        get { return _timeStamp; }
        set { _timeStamp = value.ToUniversalTime(); }
    }
}

public class TimeStamp : Entity
{
    public virtual DateTime TimeStampEntry { get; set; }
} 
```

我正在使用这个（我的）sql代码来确定一个范围内的缺失值：

```
SET time_zone='+0:00';  
select 
    a.TimeStampEntry,
    b.DisplayValue
from timestamps as a 
left outer join  
(
    select
        TimeStamp,
        DisplayValue
    from measurements 
) as b on a.TimeStampEntry = b.TimeStamp
where a.TimeStampEntry>='2010-01-01 00:00:00' and a.TimeStampEntry<'2010-01-31 23:59:59' and b.DisplayValue is null
order by a.TimeStampEntry asc 
```

我只是想知道如何在 Nhibernate 3.x 中实现这一点，最好是在 Linq 中。

顺便说一句，我没有尝试过任何严重的事情，因为日期时间字段之间的关系没有在流畅的 nhibernate 中定义。不确定我是否必须定义它才能使用 ICriteria、Linq、HQL 或其他任何东西。任何反馈将不胜感激。谢谢。

PS：

我已经开始使用这个（不工作的代码）：

```
var x = (from ts in NHibernateSession.Current.Query<TimeStamp>()
                         join m in NHibernateSession.Current.Query<Measurement>()
                         on ts.TimeStampEntry equals m.TimeStamp into ps
                         from m in ps.DefaultIfEmpty()
                         select new { m.TimeStamp }).ToList(); 
```

PP:

堆栈跟踪：

```
at NHibernate.Linq.Visitors.QueryModelVisitor.VisitGroupJoinClause(GroupJoinClause groupJoinClause, QueryModel queryModel, Int32 index)
   at Remotion.Linq.Clauses.GroupJoinClause.Accept(IQueryModelVisitor visitor, QueryModel queryModel, Int32 index)
   at Remotion.Linq.QueryModelVisitorBase.VisitBodyClauses(ObservableCollection`1 bodyClauses, QueryModel queryModel)
   at Remotion.Linq.QueryModelVisitorBase.VisitQueryModel(QueryModel queryModel)
   at NHibernate.Linq.Visitors.QueryModelVisitor.Visit()
   at NHibernate.Linq.Visitors.QueryModelVisitor.GenerateHqlQuery(QueryModel queryModel, VisitorParameters parameters, Boolean root)
   at NHibernate.Linq.NhLinqExpression.Translate(ISessionFactoryImplementor sessionFactory)
   at NHibernate.Hql.Ast.ANTLR.ASTQueryTranslatorFactory.CreateQueryTranslators(String queryIdentifier, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 filters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan.CreateTranslators(String expressionStr, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan..ctor(String expressionStr, IQueryExpression queryExpression, String collectionRole, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.HQLExpressionQueryPlan..ctor(String expressionStr, IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters, ISessionFactoryImplementor factory)
   at NHibernate.Engine.Query.QueryPlanCache.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow, IDictionary`2 enabledFilters)
   at NHibernate.Impl.AbstractSessionImpl.GetHQLQueryPlan(IQueryExpression queryExpression, Boolean shallow)
   at NHibernate.Impl.AbstractSessionImpl.CreateQuery(IQueryExpression queryExpression)
   at NHibernate.Linq.DefaultQueryProvider.PrepareQuery(Expression expression, IQuery& query, NhLinqExpression& nhQuery)
   at NHibernate.Linq.DefaultQueryProvider.Execute(Expression expression)
   at NHibernate.Linq.DefaultQueryProvider.Execute[TResult](Expression expression)
   at Remotion.Linq.QueryableBase`1.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:10:34.120

看起来你真的不需要左连接——你只是在聚合使用右表。这是一个更简单（在 LINQ 中）组加入的好地方：

```
DateTime start = DateTime.new(year, month, 1);
DateTime end = start.AddMonths(1);

var x =
    from ts in NHibernateSession.Current.Query<TimeStamp>()
    join m in NHibernateSession.Current.Query<Measurement>()
        on ts.TimeStampEntry equals m.TimeStamp
        into ps
    where
        ts.TimeStampEntry >= start &&
        ts.TimeStampEntry < end &&
        ! ps.Any()
    orderby ts.TimeStampEntry
    select ts.TimeStampEntry; 
```

# ios - iOS Safari中视频上的图像叠加

> ID：12933949
> 
> 赞同：2
> 
> 时间：2012-10-17T12:05:58.987
> 
> 标签：ios, html, video

iOS系统似乎控制了浏览器中的视频播放。它会将视频“提升”到最前面。

那么，有没有什么方法可以在iOS播放的视频上叠加图像呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:29:06.080

不，不是来自 HTML5。iPhone 上的移动 Safari 将始终全屏播放电影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T02:13:40.000

If you're looking to just overlay an image, this works:

[http://jsbin.com/ajivex/1](http://jsbin.com/ajivex/1)

Unfortunately it's not clickable, which is my current problem.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-28T04:23:07.310

在 iOS 10 及更高版本中，您可以使用该`playsinline`属性，然后显示叠加层。虽然没有检查交互性。

来自[https://webkit.org/blog/6784/new-video-policies-for-ios/](https://webkit.org/blog/6784/new-video-policies-for-ios/)：

> 在 iPhone 上，`<video playsinline>`元素现在可以内联播放，并且在播放开始时不会自动进入全屏模式。

# c# - 如何将绑定添加到数据网格中的列？

> ID：12933951
> 
> 赞同：2
> 
> 时间：2012-10-17T12:06:00.953
> 
> 标签：c#, wpf, xaml, binding, datagrid

我在我的项目中遇到了绑定问题。我有一个数据网格，默认情况下我定义了 2 列。ItemsSource 绑定到列表 (ListeGrilleTarifaire)，列的内容绑定到包含在第一个列表中的第二个列表 (ListeTranche) 的元素。

```
<techuc:DataGridM Name="dg_HeaderTranche" AutoGenerateColumns="False" ItemsSource="{Binding ListeGrilleTarifaire}" CanUserAddRows="False" CanUserDeleteRows="False" Visibility="{Binding accesGrilleMultiDepartement}" Height="42"  Margin="440,0,0,0" VerticalAlignment="Top">
<DataGrid.Columns>                                                   
    <DataGridTextColumn Header="{x:Static trad:Langues.lblTranche1}" Binding="{Binding ListeTranche[0],Mode=TwoWay}" Width="80"/>
    <DataGridTextColumn Header="{x:Static trad:Langues.lblTranche2}" Binding="{Binding ListeTranche[1],Mode=TwoWay}" Width="80"/>
</DataGrid.Columns> 
```

我希望有可能使用按钮添加列并将新列与第二个列表绑定。

我的代码在后面，当我单击按钮时，我将一个元素添加到我的第二个列表中，并执行以下代码

```
DataGridTextColumn textColumnTranche = new DataGridTextColumn();
textColumnTranche.Header = "Tranche X";
textColumnTranche.Binding = new Binding("ListeTranche[3]");
dg_HeaderTranche.Columns.Add(textColumnTranche); 
```

我的新列已创建，我可以填充它，但是当我将数据保存在数据库中时，值仍为 0。我认为这是因为我没有将绑定模式配置为 TwoWay，但我不知道该怎么做后面的代码。

我的列表在 ViewModel 中定义和使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:12:33.523

如何设置 BindingMode = TwoWay：

```
textColumnTranche.Binding = new Binding("ListeTranche[3]") { Mode = BindingMode.TwoWay }; 
```

# python - _portaudio.so：通用包装器中没有匹配的架构

> ID：12933955
> 
> 赞同：3
> 
> 时间：2012-10-17T12:06:33.510
> 
> 标签：python, portaudio, pyaudio

我的系统是 Mac OS 10.8.2、Python 2.7.3、Xcode 4.5.1。

我正在尝试`import pyaudio`在 python 中。`import pyaudio`给`Please build and install the PortAudio Python bindings first`. 考虑到错误是由于`portaudio`.

我安装`portaudio`使用`brew install portaudio`成功。这是该`site-packages`文件夹的屏幕截图。![在此处输入图像描述](../Images/98aaf4545cc52635b36a5973f1a7d4b2.png)

但`import pyaudio`仍然导致`Please build and install the PortAudio Python bindings first`. 虽然`import _portaudio`给`no matching architecture in universal wrapper` ![在此处输入图像描述](../Images/25eab51a1e314307812a46716a205518.png)

我如何`import pyaudio`在 Python 中成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:17:21.383

1.  如果您最初安装了 PortAudio 和 PyAudio，请将它们都删除
2.  在终端，`brew install portaudio`
3.  `easy_intall pyaudio`

我删除了所有错误

# entity-framework - 在调用 SaveChanges() 之前添加实体的访问 id

> ID：12933960
> 
> 赞同：2
> 
> 时间：2012-10-17T12:06:51.590
> 
> 标签：entity-framework, savechanges, audit-logging

我正在使用 EF 4.3.1，我已经覆盖了上下文中的 SaveChanges()，以便我可以获得对象及其状态的列表并在我的审计日志表中创建条目。我需要将记录的 id 存储在审计日志表中，以便对其进行引用。这是插入记录时出现的问题，因为在保存之前我无法访问 id。有什么方法可以在那时获得 id 吗？

```
public override int SaveChanges()
{
        ChangeTracker.DetectChanges();

        var objectStateManager = ((IObjectContextAdapter)this).ObjectContext.ObjectStateManager;
        var modifiedAuditableEntities = objectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Added).Where(e => (IAuditable)e.Entity != null);

        foreach (var entry in modifiedAuditableEntities)
        {
            var entity = (IAuditable)entry.Entity;

            if (entity != null)
            {
                switch (entry.State)
                {
                    case EntityState.Added:
                        entity.IsAdded = true;
                        break;
                    case EntityState.Deleted:
                        entity.IsDeleted = true;
                        break;
                    case EntityState.Modified:
                        entity.IsModified = true;
                        break;
                }

                this.EntitySet<AuditLogEntry>().Add(this.auditLogService.CreateAuditLogEntryForEntity((IAuditable)entry.Entity));
            }
        return base.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:35:43.837

如果您的目标是希望同时创建保存和审核日志，则可以将其包装在事务范围内，以便您的方法是原子的。

```
 public override int SaveChanges()
    {
        ChangeTracker.DetectChanges();
        using (var scope = new TransactionScope())
        {
            var objectStateManager = ((IObjectContextAdapter) this).ObjectContext.ObjectStateManager;
            var modifiedAuditableEntities =
                objectStateManager.GetObjectStateEntries(EntityState.Modified | EntityState.Added).Where(
                    e => (IAuditable) e.Entity != null);
            var result = base.SaveChanges();
            foreach (var entry in modifiedAuditableEntities)
            {
                var entity = (IAuditable) entry.Entity;

                if (entity != null)
                {
                    switch (entry.State)
                    {
                        case EntityState.Added:
                            entity.IsAdded = true;
                            break;
                        case EntityState.Deleted:
                            entity.IsDeleted = true;
                            break;
                        case EntityState.Modified:
                            entity.IsModified = true;
                            break;
                    }

                    this.EntitySet<AuditLogEntry>().Add(
                        this.auditLogService.CreateAuditLogEntryForEntity((IAuditable) entry.Entity));
                }
            }
            base.SaveChanges();

            scope.Complete();
            return result;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T12:30:27.363

Id Id 是数据库生成的整数，在调​​用保存更改之前没有任何方法可以获取它。可能的解决方案包括：

*   触发器
*   使用 Guid 作为主键
*   使用不受数据库管理的密钥生成策略（NHibernate 中的 HiLo）
*   首先调用 base.SaveChanges() 然后检查结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:38:42.577

我建议在数据库级别使用存储过程来执行插入/审核功能（和其他数据库更改），并撤销用户的插入/更新/删除权限。因此，您可以保证更新过程和审计表的完整性。

# json - 将谷歌分析与我的 REST API 一起使用

> ID：12933961
> 
> 赞同：1
> 
> 时间：2012-10-17T12:06:57.067
> 
> 标签：json, rest, google-analytics, analytics

我的网站提供公共 JSON API。我想用谷歌分析跟踪这个 API 的使用情况（就像我对网页做的那样）。如何跟踪 API 使用情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:13:32.660

也许你可以看看[这样](http://code.google.com/p/php-ga/)或[这样](http://blog.maartenballiauw.be/post/2012/01/20/Tracking-API-usage-with-Google-Analytics.aspx)的东西？当然，这取决于您的实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:00:07.467

似乎我可以将 GA 用于移动应用程序。是服务器端。文档：[https ://developers.google.com/analytics/devguides/collection/other/mobileWebsites](https://developers.google.com/analytics/devguides/collection/other/mobileWebsites)

好吧，我想，在我的情况下，我必须将 ga lib 移植到 python :)

UPD：哦，b1tr0t 已经为我们完成了：[https ://github.com/b1tr0t/Google-Analytics-for-Mobile--python-](https://github.com/b1tr0t/Google-Analytics-for-Mobile--python-)

UPD2：找到了一个似乎更有用的分叉：[https ://github.com/singhj/Google-Analytics-for-Mobile--Google-App-Engine](https://github.com/singhj/Google-Analytics-for-Mobile--Google-App-Engine)

**UPD3：**我基于上面提到的做了一个小库，它更 Pythonic，并且对烧瓶和 django 有开箱即用的支持 - [https://bitbucket.org/DataGreed/pyga/](https://bitbucket.org/DataGreed/pyga/)

# orientation - 如何从旋转矩阵计算偏航，俯仰滚动？

> ID：12933962
> 
> 赞同：2
> 
> 时间：2012-10-17T12:06:57.190
> 
> 标签：orientation, gyroscope, pitch, rotational-matrices

我必须从陀螺仪的智能手机输出中计算 Android 偏航、滚动、俯仰，我编写了以下代码：

if(event.sensor.getType()==Sensor.TYPE_GYROSCOPE){

```
 float xgyr=event.values[0];                //rotation around x-axis  [rad/sec]
        float ygyr=event.values[1];                // rotation around y-axis
        float zgyr=event.values[2];               // rotation around z-axis

        // This timestep's delta rotation to be multiplied by the current rotation
         // after computing it from the gyro sample data.

        double EPSILON = 0.0;           //EPSILON value to be defined
         if (timestamp != 0) {
             final float dT = (event.timestamp - timestamp) * NS2S;
             // Axis of the rotation sample, not normalized yet.
             float axisX = event.values[0];
             float axisY = event.values[1];
             float axisZ = event.values[2];

             // Calculate the angular speed of the sample, teta is the vector length 
             float omegaMagnitude = (float) Math.sqrt(axisX*axisX + axisY*axisY + axisZ*axisZ);

             // Normalize the rotation vector if it's big enough to get the axis
             if (omegaMagnitude > EPSILON) {                  //EPSILON TO BE DEFINED
                 axisX /= omegaMagnitude;
                 axisY /= omegaMagnitude;
                 axisZ /= omegaMagnitude;
             } 
```

你好，我必须使用陀螺仪的输出来计算偏航角和俯仰角，我写了这段代码：

```
 float thetaOverTwo = omegaMagnitude * dT / 2.0f;      //Insert initial value for orientation omegaMagnitude
             float sinThetaOverTwo = (float) Math.sin(thetaOverTwo);
             float cosThetaOverTwo = (float) Math.cos(thetaOverTwo);

             /*rotation vector, a non-normalized three-dimensional vector the direction of which specifies the rotation axis,
             and the length of which is teta,    Combining two consecutive quaternion rotations is therefore just as simple as using the rotation matrix. 
             Remember that two successive rotation matrices, A1 , A2 are combined A3 = A2*A1*/ 

             //Quaternions
             deltaRotationVector[0] = sinThetaOverTwo * axisX;
             deltaRotationVector[1] = sinThetaOverTwo * axisY;
             deltaRotationVector[2] = sinThetaOverTwo * axisZ;
             deltaRotationVector[3] = cosThetaOverTwo;
         }
         timestamp = event.timestamp;
         float[] deltaRotationMatrix = new float[9];
         SensorManager.getRotationMatrixFromVector(deltaRotationMatrix, deltaRotationVector);
         // User code should concatenate the delta rotation we computed with the current rotation
         // in order to get the updated rotation.
         // rotationCurrent = rotationCurrent * deltaRotationMatrix; The initial rotation has to be computedand then at each step updated
         /*Rotation current is a vector with rotation on pitch, roll, yaw (3x1) multiplied by 3x3 rotation matrix i have the new orientation*/

         /*In the "xyz (pitch-roll-yaw) convention," theta is pitch, psi is roll, and phi is yaw. */

         double pitch = Math.atan2(deltaRotationMatrix[6], deltaRotationMatrix[7]);
         double roll = Math.acos(deltaRotationMatrix[8]);
         double yaw = - Math.atan2(deltaRotationMatrix[2], deltaRotationMatrix[5]); 
```

我不知道问题出在哪里，但是我使用此代码获得的偏航、滚动、俯仰值是错误的，因为即使手机处于相同的方向，我也获得了完全不同的值。我从最后三行代码中的旋转矩阵计算它们。还有偏航的值，公式中写的俯仰滚转，是弧度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:04:36.200

我在 Android 上的经验有限，但根据参考手册，您无需任何计算即可从[SensorManager.getOrientation (...)获取这些值。](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation%28float%5B%5D,%20float%5B%5D%29)如果这是正确的，我建议使用它而不是任何自制的计算，因为由于传感器融合算法在引擎盖下工作，这些值应该更精确。

# python - Printing a list of objects of user defined class

> ID：12933964
> 
> 赞同：67
> 
> 时间：2012-10-17T12:07:10.310
> 
> 标签：python

So I have a class, called `Vertex`.

```
class Vertex:
    '''
    This class is the vertex class. It represents a vertex.
    '''

    def __init__(self, label):
        self.label = label
        self.neighbours = []

    def __str__(self):
        return("Vertex "+str(self.label)+":"+str(self.neighbours)) 
```

I want to print a list of objects of this class, like this:

```
x = [Vertex(1), Vertex(2)]
print x 
```

but it shows me output like this:

```
[<__main__.Vertex instance at 0xb76ed84c>, <__main__.Vertex instance at 0xb76ed86c>] 
```

Actually, I wanted to print the value of `Vertex.label` for each object. Is there any way to do it?

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-17T12:10:17.763

If you just want to print the label for each object, you could use a loop or a list comprehension:

```
print [vertex.label for vertex in x] 
```

But to answer your original question, you need to define the `__repr__` method to get the list output right. It could be something as simple as this:

```
def __repr__(self):
    return str(self) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-17T12:28:25.973

If you want a little more infos in addition of Daniel Roseman answer:

`__repr__` and `__str__` are two different things in python. (note, however, that if you have defined only `__repr__`, a call to `class.__str__` will translate into a call to `class.__repr__`)

The goal of `__repr__` is to be unambiguous. Plus, whenerver possible, you should define repr so that(in your case) `eval(repr(instance)) == instance`

On the other hand, the goal of `__str__` is to be redeable; so it matter if you have to print the instance on screen (for the user, probably), if you don't need to do it, then do not implement it (and again, if str in not implemented will be called repr)

Plus, when type things in the Idle interpreter, it automatically calls the repr representation of your object. Or when you print a list, it calls `list.__str__` (which is identical to `list.__repr__`) that calls in his turn the repr representaion of any element the list contains. This explains the behaviour you get and hopefully how to fix it

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-19T13:16:55.500

```
def __ str __ (self):
    return f"Vertex: {self.label} {self.neighbours}"

#In most cases, this is probably the easiest and cleanest way to do it. Not fully sure how this code will interact with your list []. Lastly, any words or commas needed, just add them between the brackets; no further quotes needed. 
```

# python - PyGTK 多处理和更新 GUI

> ID：12933970
> 
> 赞同：6
> 
> 时间：2012-10-17T12:07:25.570
> 
> 标签：python, multithreading, gtk, pygtk, multiprocessing

我正在尝试在使用 Glade PyGTK 2.0 创建的 GUI 中启用和禁用音频播放的停止按钮。

该程序基本上通过运行和外部进程来播放音频。

我正在使用多处理（因为线程太慢）并且我无法禁用停止按钮。我知道这是由于进程无法访问 gtk 小部件线程共享的内存。

我做错了什么，或者有什么方法可以在进程退出后启用按钮？

```
#!/usr/bin/python
import pygtk
import multiprocessing
import gobject
from subprocess import Popen, PIPE
pygtk.require("2.0")
import gtk
import threading

gtk.threads_init()

class Foo:
    def __init__(self): 
        #Load Glade file and initialize stuff

    def FooBar(self,widget):
        self.stopButton.set_sensitive(True)#make the Stop button visible in the user section
        def startProgram():
            #run program
            gtk.threads_enter()
            try:
                self.stopButton.set_sensitive(False) 
            finally:
                gtk.threads_leave()
            print "Should be done now"

        thread = multiprocessing.Process(target=startProgram)
        thread.start()

if __name__ == "__main__":
prog = Foo()
gtk.threads_enter()
gtk.main()
gtk.threads_leave() 
```

**编辑：**没关系，我想通了。我没有正确实现线程，这导致了滞后。它现在工作正常。只需将 FooBar 方法更改为：

```
 def FooBar(self,widget):
        self.stopButton.set_sensitive(True)#make the Stop button visible in the user section
        def startProgram():
            #run program
            Popen.wait() #wait until process has terminated
            gtk.threads_enter()
            try:
                self.stopButton.set_sensitive(False) 
            finally:
                gtk.threads_leave()
            print "Should be done now"

        thread = threading.Thread(target=startProgram)
        thread.start() 
```

# oracle - 闪回存档正在插入数据，即使更新语句后没有数据更改

> ID：12933974
> 
> 赞同：1
> 
> 时间：2012-10-17T12:07:35.827
> 
> 标签：oracle, oracle11gr2, flashback

我在一张桌子上启用了闪回存档。即使更新记录后表中没有记录更改，Oracle 也会在闪回中插入数据。

例如

```
Update Dept set DEPTNO = '10' WHERE DEPTNO = '10'; 
```

当我使用闪回查询来提取所有记录时，它显示添加了 1 条记录。

```
SELECT  versions_startscn, versions_starttime,
       versions_endscn, versions_endtime,
       versions_xid, versions_operation,
       dept.*
  FROM dept
  VERSIONS BETWEEN  SCN MINVALUE AND MAXVALUE; 
```

FlashBack Archive 是否有任何设置，它只存储更改的记录。？

# apache-flex - 如何使用 getStyle 在 Flex 中将字符串替换为常量引用？

> ID：12933978
> 
> 赞同：1
> 
> 时间：2012-10-17T12:08:01.653
> 
> 标签：apache-flex, mxml

我想用`getStyle('someStyle')`mxml替换

```
private static const SOMESTYLE:String = "someStyle";
[..]
<mx:Image source="{getStyle(SOMESTYLE)}" /> 
```

在我的 CSS 中定义了 someStyle。

这可以编译，但在运行时给我错误：错误 #1069：在 package.class 上找不到属性 SOMESTYLE 并且没有默认值。

从 mxml 引用类常量的适当方法是什么？

编辑：我使用的是 Flex 4.6。这在 Flex 3.5 中运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:39:13.000

类上存在静态变量或方法；不在类的实例上。所以你必须使用类名来引用它们；不是实例名称。您没有在代码中指定类名。

```
<mx:Image source="{getStyle(ClassName.SOMESTYLE)}" /> 
```

* * *

下面是一些代码，显示了在定义它的同一个类中访问静态常量。此文件名为 StaticVariablesInSameClass_SO：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="application1_creationCompleteHandler(event)">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        s|Application{
            someStyle : 'https://www.flextras.com/Assets/images/flextras_logo3.gif';
        }
    </fx:Style>

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            private static const SOMESTYLE:String = "someStyle";

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                trace(this.getStyle('someStyle'));
                trace(this.getStyle(StaticVariablesInSameClass_SO.SOMESTYLE));
            }

        ]]>
    </fx:Script>

</s:Application> 
```

# validation - 输入字段的验证顺序是什么？

> ID：12933982
> 
> 赞同：2
> 
> 时间：2012-10-17T12:08:10.577
> 
> 标签：validation, jsf

在 JSF 验证阶段，输入字段的验证顺序是什么？

我想尝试的是以下内容：我有一组可能通过或失败转换/验证的输入字段。另外，我想使用自定义验证器进行一些输入，该验证器会根据所有其他字段是否通过验证而产生不同的结果。我可以检查 FacesContext 是否有任何先前的消息，但我必须确保在检查所有其他字段*之后*调用此自定义转换器，因此上述问题。仅仅是它们在 Facelets-Page 中定义的顺序吗？如果是这样，这个订单会得到保证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:22:20.513

> *仅仅是它们在 Facelets-Page 中定义的顺序吗？*

基本上，是的。组件树将以“通常的方式”递归处理。对于每个组件，首先将处理组件本身，然后依次处理其每个子组件。

* * *

> *如果是这样，这个订单会得到保证吗？*

是的。这在[JSF 2.0 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)中有说明：

> ## 2.2.3 过程验证
> 
> ...
> 
> 在请求处理生命周期的流程验证阶段，JSF 实现必须调用树的`processValidators()`方法`UIViewRoot`。这通常会导致`processValidators()`树中每个组件的方法被**递归调用**，如该`UIComponent.processValidators()`方法的 API 参考中所述。
> 
> ...

因此，自定义转换器应由最后一个组件或在所有所需组件*之后*`<h:inputHidden>`的“存根”组件引用。所需的组件可以通过组件绑定传递。另请参阅此相关答案：[JSF 不支持跨字段验证，是否有解决方法？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround/6282509#6282509)

 *作为一种完全不同的选择，您可以考虑将整个事物包装在一个复合材料中。*

# ruby-on-rails - 使用 RGhost 创建条形码 jpg

> ID：12933984
> 
> 赞同：2
> 
> 时间：2012-10-17T12:08:20.730
> 
> 标签：ruby-on-rails, ruby

我想通过 rghost 在 RoR 上创建条形码 jpg 文件。

当我渲染 RGhost 条形码内容时，出现以下异常...

```
failed created_jpg_new: private method `readlines' called for nil:NilClass
image file is an unrecognised format 
```

我的编码开始`create_jpg(code_word)`

```
def create_jpg(code_word)
  begin
    img = encode(code_word)
  rescue => exc
          Rails.logger.info("failed create_jpg: #{exc}")
     else
           File.open(img_path, "w+b") { |f|
                 f << img
          }
    end
end

def encode(code_word)
    doc = RGhost::Document.new
    doc.barcode_rationalizedCodabar code_word
    return doc.render_stream(:jpg)
end 
```

有什么问题`doc.render_stream(:jpg)`吗？

# javascript - 流体背景图像

> ID：12933989
> 
> 赞同：1
> 
> 时间：2012-10-17T12:08:37.253
> 
> 标签：javascript, html, css

我正在尝试确定是否可以使用“img”作为标题使用流体背景图像，同时保持菜单和页面内容直接位于其下方，与流体调整大小一致。

CSS是：

```
img#header-wrapper {
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
        z-index:10;
}

#content-wrapper {padding-top:266px;float:left;overflow: hidden;border-bottom: 0;position: relative;background-color:white;height: 100%;} 
```

的HTML：

```
<div id="header-wrapper" class="clearfix">
<img id="header-wrapper" src="/images/new-header.jpg" alt="" />
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:14:10.957

您已经使此负载比绝对定位所需的负载更复杂。您需要的只是`height: auto`图像。

**[现场演示 >](http://jsfiddle.net/spacebeers/cDvYQ/)**

```
<div class="header">
    <img src="http://www.dev.inside-guides.co.uk/images/new-header.jpg" />
</div>
<div class="nav">
    NAV
</div>​

.header {
    width: 100%;
    margin 0 0 10px 0;
}

.header img {
    width: 100%;
    height: auto;
}

.nav {
    background: red;
    width: 100%;
} 
```

# c# - C# 鼠标拾取 XNA

> ID：12933992
> 
> 赞同：2
> 
> 时间：2012-10-17T12:08:40.180
> 
> 标签：c#, xna

我有一个游戏菜单（目前）有 1 张图片（按钮）。这是一个texture2D，我把它放在一个数组中。我想知道鼠标何时悬停在我的图片上。Actionscript 有一个名为“hitTestObject”的内置函数。但它开始看起来像我必须检查图像的每个像素以查看鼠标是否在那里。我愿意改变一切，我只想能够挑选不同的照片。

```
Texture2D[] clickable_objects = new Texture2D[1];

clickable_objects[0] = Content.Load<Texture2D>("brain-icon");

public bool Intersects(Vector2 mouse_loc, Texture2D[] _objects)
{
   int X = (int) mouse_loc.X;
   int Y = (int) mouse_loc.Y;

   if ()  //Mouse hovers over object[0]
     return true;
   else 
     return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:28:32.480

Texture2D 只是图像的表示 - 它只有一个 2D 纹理像素网格。它在屏幕上没有位置，因此您无法对其进行鼠标点击检查。

您将需要一些包含类，例如 Sprite，它包含纹理和位置。然后您可以向该类添加一个 hittest() 函数，该函数将检查纹理的位置和大小。

或者更好的是，找到一些现有的精灵库供 XNA 使用。我敢肯定有一些可以为您提供此功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T21:21:38.513

# 1.创建一个Button类

你如何添加这样简单的东西：

```
public delegate void ButtonEvent(Button sender);

public class Button
{
    public Vector2 Position { get; set; }
    public int Width
    {
        get
        {
            return _texture.Width;
        }
    }

    public int Height
    {
        get
        {
            return _texture.Height;
        }
    }

    public bool IsMouseOver { get; private set; }

    public event ButtonEvent OnClick;
    public event ButtonEvent OnMouseEnter;
    public event ButtonEvent OnMouseLeave;

    Texture2D _texture;
    MouseState _previousState;

    public Button(Texture2D texture, Vector2 position)
    {
        _texture = texture;
        this.Position = position;
        _previousState = Mouse.GetState();
    }

    public Button(Texture2D texture) : this(texture, Vector2.Zero) { }

    public void Update(MouseState mouseState)
    {
        Rectangle buttonRect = new Rectangle((int)this.Position.X, (int)this.Position.Y, this.Width, this.Height);
        Point mousePoint = new Point(mouseState.X, mouseState.Y);
        Point previousPoint = new Point(_previousState.X, _previousState.Y);

        this.IsMouseOver = false;

        if (buttonRect.Contains(mousePoint))
        {
            this.IsMouseOver = true;

            if (!buttonRect.Contains(previousPoint))
                if (OnMouseEnter != null)
                    OnMouseEnter(this);

            if (_previousState.LeftButton == ButtonState.Released && mouseState.LeftButton == ButtonState.Pressed)
                if (OnClick != null)
                    OnClick(this);
        }
        else if (buttonRect.Contains(previousPoint))
        {
            if (OnMouseLeave != null)
                OnMouseLeave(this);
        }

        _previousState = mouseState;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        //spritebatch has to be started! (.Begin() already called)
        spriteBatch.Draw(_texture, Position, Color.White);
    }
} 
```

* * *

# 2\. 设置

要使用它，您需要在某处提供参考

```
Button _button; 
```

在你的`LoadContent`，你可能会做类似的事情

```
button = new Button(Content.Load<Texture2D>("Textures\\Button"), new Vector2(100, 100));
button.OnClick += new ButtonEvent(button_OnClick);
button.OnMouseEnter += new ButtonEvent(button_OnMouseEnter);
button.OnMouseLeave += new ButtonEvent(button_OnMouseLeave); 
```

在`Update`你打电话

```
button.Update(Mouse.GetState()); 
```

在`Draw`你打电话

```
spriteBatch.Begin();
button.Draw(spriteBatch);
spriteBatch.End(); 
```

* * *

# 3.使用它

代替一个按钮，使用一组按钮（或者，如果我可以推荐的话，一个`List<Button>`），然后循环更新并以类似的方式绘制它们。

然后很容易在**事件处理程序**上调用自定义代码：

```
void button_OnClick(Button sender)
{
    _gameState = GameStates.MainScreen; //or whatever else you might need
} 
```

如果鼠标悬停，您甚至可以考虑更改纹理，或者使用时尚的淡入淡出 - 如果您可以编码，可能性是无穷无尽的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:37:18.550

使用 Rectangle.Intersects

```
 int X = (int) mouse_loc.X;
   int Y = (int) mouse_loc.Y;
   Rectangle MouseRect = new Rectangle(X,Y,1,1) 
   if (MouseRect.Intersects(TexturePosition.X,TexturePosition.Y,Texture.Width,Texture.Height))  //Mouse hovers over object[0]
     return true;
   else 
     return false; 
```

# symfony - Symfony2：访问网络外部文件夹中的文件

> ID：12933993
> 
> 赞同：0
> 
> 时间：2012-10-17T12:08:39.743
> 
> 标签：symfony, twig, symfony-2.1

我在 symfony2 中有一个页面，其中包含一个 Java 小程序和使 Java 小程序加载文件的 javascript 函数。这些文件是用户相关的，每个文件都必须存储在用户文件夹中。

用户的文件夹位于 symfony 文件夹 (/temp/) 的根目录中。现在我需要这些文件夹中的文件可用（比如资产？）。

```
// Controler ( What i have now )
$filepath = $this->get('kernel')->getRootDir().'/../temp/'.$userfolder;

// View ( what i would like -using twig )
{% set path = userfolder ~ '/' ~ filename %}
<a href="javascript:document.jmol.script('load {{ asset(path) }}; frame all');">link</a> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-17T12:20:12.320

如果您的 doc 根目录位于 web 目录中，则您无法执行您正在尝试执行的操作。这是“根”目录，这意味着您无法从浏览器访问任何内容。这是一件好事，否则浏览您网站的人将能够访问其他目录，例如您的应用安全配置等...

你有几个选择：

a) 使用 web 的子目录来保存您的用户文件，例如 web/temp

b) 将它们保存在其他地方并根据需要将它们复制到网络子文件夹中。这就是 symfony 对资产所做的

c) 创建一个新的控制器，它拦截像“temp/{user}/{filename}”这样的路由，然后从你保存文件的目录中提供这些文件。

# jquery - 预先使用发布的变量

> ID：12933996
> 
> 赞同：0
> 
> 时间：2012-10-17T12:08:47.220
> 
> 标签：jquery, ajax, prepend

我有一个使用 ajax 发布的表单，因此没有页面刷新

当表单发布后，我想使用用户刚刚发布的一些变量来预先显示 html。

所以，一个名为评论的字段，我想将评论添加到数据库中，然后在 html 前面添加评论以在顶部显示评论，但是我如何使用用户刚刚发布的变量？

该表单具有名为评论的文本输入 - 我接受评论：

```
var comment = $("#comment").val(); 
```

然后将其发送到 php 脚本以添加到 db

```
$.ajax({
type: "POST", // form method
url: "/pages/test/test_comments.php",// destination
data: dataString,
cache: false,
success: function(html){ 
```

然后我想将评论添加到 div (id=test) 的顶部 - 我已经尝试过：

```
$('#test').prepend('<div style="width:100%; overflow:auto;">comment</div>'); 
```

并且

```
$('#test').prepend('<div style="width:100%; overflow:auto;">'comment'</div>'); 
```

但是两者都不能正常工作-这可能还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:11:35.457

您的代码有语法错误，您应该`+`用于连接：

```
$('#test').prepend('<div style="width:100%; overflow:auto;">' + comment + '</div>'); 
```

# python - 在 virtualenv 中安装 PyQt4

> ID：12933997
> 
> 赞同：2
> 
> 时间：2012-10-17T12:08:52.290
> 
> 标签：python, ubuntu, installation, pyqt4, python-3.2

我正在尝试在 virtualenv 中安装 PyQT4。我正在运行 Python3.2.1。

这是我到目前为止所做的：

```
sudo apt-get install qt4-dev-tools 
```

这很好用

我下载了 PyQt-x11-gpl-4.9.5 和 sip-4.14

在 virtualenv 里面我安装了 sip。没有出现错误。

当我尝试打电话时：

```
python3.2 configure.py 
```

对于我的 PyQt，它让我接受许可证，做一堆没有错误的东西然后说：

```
Generating the C++ source for the QtCore module...
sip: Usage: sip [-h] [-V] [-a file] [-b file] [-c dir] [-d file] [-e] [-g] [-I dir] [-j #] [-k] [-m file] [-o] [-p module] [-P] [-r] [-s suffix] [-t tag] [-T] [-w] [-x feature] [-X id:file] [-z file] [file]
Error: Unable to create the C++ code. 
```

据我所知，我的问题来自于我运行了错误版本的 Qt。我不太确定如何检查我的 Qt 版本，但我安装了 QtAssistant，它指的是 Qt4.8，所以我假设我有那个。

所以如果是版本问题：

```
1\. how do I reliably check what version of Qt I'm running?
2\. What version should I be running 
```

否则：

```
1\. Wtf? 
```

任何帮助将不胜感激。

附言

我查看了[如何在 Ubuntu 中为 Python 3 配置 PyQt4？](https://stackoverflow.com/questions/7942887/how-to-configure-pyqt4-for-python-3-in-ubuntu)已经。没有什么可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:45:23.023

我总是在安装 PyQt4 之前安装所有这些库：

```
sudo apt-get install libqt4-assistant libqt4-core \
libqt4-dbg libqt4-dbus libqt4-designer libqt4-dev \
libqt4-gui libqt4-help libqt4-network libqt4-opengl \
libqt4-qt3support libqt4-script \
libqt4-svg libqt4-test libqt4-webkit libqt4-webkit-dbg \
libqt4-xml libqt4-xmlpatterns libqt4-xmlpatterns-dbg \
libqtcore4 libqtgui4 qt4-demos qt4-designer qt4-dev-tools \
qt4-doc qt4-doc-html qt4-qtconfig qtcreator libqtwebkit-dev \
qt4-qmake cmake r-base-dev libcurl4-gnutls-dev 
```

您可以通过以下方式验证 qt 版本：

```
qmake --version 
```

除此之外，我没有看到任何问题，我将其发布为答案只是因为库列表不能很好地适合评论......哦，还有一件事，你应该先编译和安装 sip，然后是 PyQt4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T14:59:42.977

It seems the problem is a bug in configure.py file. To solve it simply make sure PyQt source files are located in a path without spaces.

See here for more info: [How to install PyQt on Mac OS X 10.6](https://stackoverflow.com/questions/2583092/how-to-install-pyqt-on-mac-os-x-10-6)