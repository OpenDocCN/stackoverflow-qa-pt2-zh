# StackOverflow 问答 13831000-13831999

# ruby-on-rails - 简单形式的验证

> ID：13831007
> 
> 赞同：0
> 
> 时间：2012-12-12T00:48:47.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我正在尝试使用 simple_form gem 来创建表单。我还在使用 twitter bootstrap 进行样式设置，因此在某些情况下 simple_form 过于僵化而无法执行我想做的事情（并非总是如此）。

我正在提交一个验证失败的表单，它确实如此。但是，当它再次渲染页面时，它不会在输入附近显示错误消息，并且页面只渲染了一半。

**控制器代码**：（注意，我本质上使用的是相同的显示/编辑操作）

```
def update
  @contact = current_resource
  authorize! :update, @contact

  respond_to do |format|
    if @contact.update_attributes(params[:customer_relationship_contact])
      format.html { redirect_to customer_relationship_contact_url(@contact), notice: "#{@contact.to_s} was successfully updated." }
      format.json { head :no_content }
    else
      format.html { render :edit }
      format.json { render json: @contact.errors, status: :unprocessable_entity }
    end
  end
end

def show
  @contact = current_resource
  authorize! :show, @contact

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @contact }
  end
end 
```

**查看/表格代码**：

```
<%= simple_form_for @contact, :html => {:novalidate => true} do |f| %>
<%= f.error_notification %>
<fieldset>

  <legend>Contract</legend>
  <div class="controls controls-row">
    <div class="span3">
      <div class="controls controls-row">
        <%= f.label :tax_id_number, 'Social Security No.' %>
        <%= f.text_field :tax_id_number, class: 'span12', placeholder: 'Social Security No.' %>
      </div>
    </div>
  </div>
  </div>
</fieldset>

<div class="form-actions">
  <%= f.button :submit, :class => 'btn-primary' %>
  <%= link_to "Cancel", customer_relationship_contacts_path, :class => 'btn' %>
</div> 
```

**模型验证**：

```
 validates :tax_id_number, format: { with: /\A[0-9]+\z/, message: "Please enter only numbers without dashes." }, allow_blank: true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-08T11:53:03.750

这里的问题是您正在使用`f.label`并且`f.text_field`在您看来 - 简单的表单被构建为简单，所以您需要的是`f.input`- 所以在这种情况下：

```
<%= f.input :tax_id_number, label: 'Social Security No.', placeholder: 'Social Security No.' %> 
```

这是发生的事情 -`f.input`将创建一个带有输入类的环绕 div。在那个 div 中是标签和输入。如果有任何错误，简单的表单会将类添加`field_with_errors`到周围的 div 中，并在输入后添加一个包含消息的 span 与 class `error`。如果您不使用，则不会发生这种情况`f.input`

剩下的就是用 css 设置它们的样式。

# usb - USB 3.0 的最小延迟是多少

> ID：13831008
> 
> 赞同：32
> 
> 时间：2012-12-12T00:48:54.287
> 
> 标签：usb, hardware

首先，我对USB了解不多，所以如果我的问题是错误的，请提前道歉。

在 USB 2.0 中，轮询间隔为 0.125 毫秒，因此主机从设备读取某些数据的最佳可能延迟为 0.125 毫秒。我希望减少 USB 3.0 设备的延迟，但我发现很难了解最小延迟是多少。USB 3.0 规范说，“USB 2.0 风格的轮询已被异步通知取代”，这意味着 0.125 毫秒的轮询间隔可能不再是一个限制。

我发现了一些针对 USB 3.0 SSD 的基准测试，看起来数据可以在略低于 0.125 毫秒的时间内从设备读取，这包括在主机操作系统和设备闪存控制器上花费的所有时间。

[http://www.guru3d.com/articles_pages/ocz_enyo_usb_3_portable_ssd_review,8.html](http://www.guru3d.com/articles_pages/ocz_enyo_usb_3_portable_ssd_review,8.html)

有人能告诉我最低可能的延迟是多少吗？理论上的答案很好。包括各种版本的 Linux 和 Windows USB 堆栈的实际限制的答案会很棒。

为了避免“告诉我你想要实现什么”的问题，我正在为我公司设计的 ASIC 创建一个调试接口。即，PC 通过调试加密狗连接到我们的一个 ASIC。一种可能的用例是在 ASIC 硬件仅实现简单断点时实现条件断点。为此，我需要确定何时命中了一个简单的断点，评估条件，如果为 false，则设置处理器再次运行。在条件变为真之前，简单的断点可能会被命中数百万次。我们可以在 FPGA 或现成的支持 USB 3.0 的微控制器上实现调试加密狗。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-13T21:43:48.370

回答我自己的问题...

我开始意识到这个问题有点忽略了 USB 3.0 的意义。与 2.0 不同，它不是共享总线系统。相反，它使用主机和每个设备之间的点对点链接（我过于简单化了，但要点是正确的）。对于 USB 2.0，125 us 的轮询间隔对于总线如何在设备之间进行时分复用至关重要。但是，由于 3.0 使用点对点链路，因此无需进行多路复用，因此轮询间隔不再存在。因此，数据包传输的延迟*远*低于 USB 2.0。

在我使用 Cypress FX-3 开发套件的实验中，我发现从 Windows 应用程序到设备的平均往返行程很容易，**平均延迟为 30 us**。我怀疑大部分时间都花在了各种操作系统延迟上，例如用户空间到内核空间模式的切换以及驱动程序中的 DPC 延迟。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T19:14:26.407

我为您准备了一些资源，我刚刚下载了一个完整的[规格...几个](http://www.usb.org/developers/docs/usb_30_spec_122012.zip)用于 USB3 的 pdf 压缩包，这里是第 58,59 页的简短摘录（USB 3_r1.0_06_06_2011.pdf） ：

> USB 2.0 以固定的 1 ms/125 μs 间隔传输 SOF/uSOF。取决于主机和系统软件的实现，设备驱动程序可以通过小的有限调整来改变间隔。USB 3.0 增加了设备发送总线间隔调整消息的机制，主机使用该消息将其 125 μs 总线间隔调整到 +/-13.333 μs。
> 
> 此外，主机可以在一个宽松的时序窗口内从总线间隔边界发送一个同步时间戳包 (ITP)。

[这](http://gnuradio.microembedded.com/usrpfaqlatency)是另一个看起来很有趣的资源，它处理计算延迟。

您对操作系统延迟问题提出了很好的看法，尤其是在非实时操作系统中。

我可能会建议您也检查一下 SuperUser，也许有人有其他想法。干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-15T08:59:55.083

我对标记的答案提出异议。

在 Windows 上，无法通过 USB 实现规定的往返延迟。SuperSpeed (3.0) 与否。该文档指出：

```
The number of isochronous packets must be a multiple of the number of packets per frame. 
```

[https://docs.microsoft.com/en-us/windows-hardware/drivers/usbcon/transfer-data-to-isochronous-endpoints](https://docs.microsoft.com/en-us/windows-hardware/drivers/usbcon/transfer-data-to-isochronous-endpoints)

每帧的数据包由 给出，`bInterval`也决定了轮询间隔。例如，如果您想实现每`microframe`（125 微秒）传输一次，则*需要*为每个 URB（USB 请求块）提交 8 次传输，这意味着调度服务间隔为**1ms**。

其他任何东西都需要您自己的内核模式驱动程序或超出规范。

在 RT Linux 上，我可以确认 2*125usec 的往返 + 一些开销。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-13T20:10:05.147

摘自 Embedded.com：“USB [3.0 与 USB 2.0：忙碌工程师的快速参考摘要”](https://www.embedded.com/design/connectivity/4437961/USB-3-0-vs-USB-2-0--A-quick-reference-summary-for-the-busy-engineer)

> **通信架构差异** USB 2.0 采用一种通信架构，其中数据事务必须由主机发起。主机会频繁地轮询设备并请求数据，并且设备只有在主机请求后才可以传输数据。高轮询频率不仅会增加功耗，还会增加传输延迟，因为只有在主机轮询设备时才能传输数据。USB 3.0 改进了这种通信模型，并通过最大限度地减少轮询并允许设备在**数据准备好后立即传输数据来****减少传输延迟**。
> 
>  **...
> 
> **时间戳增强**
> 
> 与精度范围为 0 到 125 us 的 USB 2.0 摄像头不同，来自 USB 3.0 摄像头的时间戳更精确，并且模仿了 FireWire 摄像头的 1394 周期计时器的精度。
> 
> ...
> 
> USB 3.0 - 或超高速 USB - 克服了其他规范的关键限制，所有这些限制具有 6 倍（超过 IEEE 1394b）到 9 倍（超过 USB 2.0）更高的带宽、更好的错误管理、更高的电源......**更低的延迟和抖动时间**。**

 **PS 还说 USB 3.0 的“电缆长度更长”，但其他段落与此相矛盾，并说 USB 2.0 最长为 5m，USB 3.0 最长为 3m。**

# google-apps-script - google drive 的 mimetype 如何影响我的真实文件？

> ID：13831009
> 
> 赞同：1
> 
> 时间：2012-12-12T00:49:23.677
> 
> 标签：google-apps-script, google-drive-api

首先，感谢您的阅读。

我试图弄清楚谷歌文档应用于文件的 mimetype 如何影响我计算机中的“真实”文件。

我有两个具有相同扩展名 VBS 的文件（是的，Visual Basic 脚本）。一个是我上传的，另一个是用code mirror google drive app创建的。

我可以用任何谷歌驱动器应用程序打开第二个进行编辑，我想它有文本 mimetipe，但我无法打开另一个文件（记住，相同的 vbs 扩展名）。

我的问题是，如何更改我所有 VBS 文件的 mimetipe，以及与我的计算机同步时它将如何影响真实文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:31:33.637

好吧，正如我之前所说，我不明白为什么 google 会根据他的扩展名更改文件的 mimetype，但这里有一个解决方法，它可能对我这种情况的人有用。

最简单的示例是当您的驱动器文件夹中有脚本文件时，这些文件不是纯文本文件（作为 Visual Basic 脚本，甚至是 bash 文件），但谷歌驱动器会根据其扩展名分配不同的 mymetype。

这个函数会复制，因为我不能 100% 确定它是安全的。在函数结束时，我必须添加到一个新文件夹（原始文件所在的位置）并删除旧文件夹（根文件夹），因为我不知道如何移动它。如果有人知道如何改进它，请随意做。

```
function changeMymeType(fileId){

  var file = DocsList.getFileById(fileId);
  var content = file.getContentAsString();
  var name="copy_"+file.getName();
  var folder = file.getParents();

  var newfile = DocsList.createFile(name, content, "text/plain");
  var oldFolder = newfile.getParents()[0];

  newfile.addToFolder(folder[0]);
  newfile.removeFromFolder(oldFolder);
}; 
```

# c++ - C++ 宏扩展为函数体

> ID：13831014
> 
> 赞同：1
> 
> 时间：2012-12-12T00:50:10.060
> 
> 标签：c++, macros, c-preprocessor

我希望能够编写一个宏`CONDITIONALFUNCTION`，以便

```
CONDITIONALFUNCTION( FunctionName )
{
    ConditionalExpression()
} 
```

扩展到

```
bool FunctionName( const Arguments& args )
{
    return ConditionalExpression();
} 
```

这甚至可能吗？

我能在 SO 上找到的最接近的是这个线程：

[可以用变量体定义类似函数的宏吗？](https://stackoverflow.com/questions/4037001/possible-to-define-a-function-like-macro-with-a-variable-body)

除了与该线程不同，我还有一个额外的要求，即大括号内的“主体”不是完整有效的 C++ 语句，而是要（有效）包装在“if”语句中的表达式。

请假设我已经知道这可能是不可能的，而且几乎可以肯定是愚蠢和邪恶的 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:58:21.840

我将假设您首先有充分的理由使用宏...

您在问题中给出的语法是不可能的。

最接近的可行宏语法是：

```
#define CONDITIONALEXPRESSION(f, c) \
bool f( const Arguments& args ) \
{ return c; }

CONDITIONALEXPRESSION(FunctionName, ConditionalExpression()) 
```

这将扩展为与问题中的扩展功能相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:33:08.053

je4d 已经提供了一种替代方案。我超过了其他一些变化：

```
#define CONDITIONALEXPRESSION(f) \
bool f( const Arguments& args )

#define CONDITIONALRETURN(c) \ 
return (c)

CONDITIONALEXPRESSION(FunctionName)
{
  CONDITIONALRETURN(ConditionalExpression())
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T00:53:32.433

为什么必须在宏中定义函数体？在 Microsoft C++ 中，宏就像`ASSERT()`单独定义实际函数，然后从宏中引用它。

所以函数总是被定义，但宏要么等于调用函数，要么什么都没有。

除此之外，对于 C++，我可能会使用内联函数。

# ios - 如何在monodevelop中禁用“配置文件”

> ID：13831016
> 
> 赞同：1
> 
> 时间：2012-12-12T00:50:13.153
> 
> 标签：ios, debugging, xamarin.ios, monodevelop, profiler

在 monodevelop 尝试菜单 > 项目 > 配置文件单 ...，在尝试之前，一切正常，但现在对我来说在 iphone 调试模拟器中调试是不可能的。总是相同的错误

在发布模拟器中工作正常在 iphone 真实设备中工作正常在调试模拟器中的错误：

我认为禁用个人资料单...，但不可行，我不知道原因，谢谢。

```
Native stacktrace:

0   myprogram                          0x0009524c mono_handle_native_sigsegv + 284
1   myprogram                          0x0000bb38 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                  0x9ae6059b _sigtramp + 43
3   ???                                0xffffffff 0x0 + 4294967295
4   myprogram                          0x001a4a62 single_arg_user_copy_or_mark + 34
5   myprogram                          0x001ce400 mark_tls_slots + 128
6   myprogram                          0x001a81b0 scan_from_registered_roots + 336
7   myprogram                          0x001b4356 major_collection + 2886
8   myprogram                          0x001b5098 mono_gc_collect + 88
9   myprogram                          0x002233a6 monotouch_pump_gc + 38
10  libsystem_c.dylib                  0x9ae08ed9 _pthread_start + 335
11  libsystem_c.dylib                  0x9ae0c6de thread_start + 34

=================================================================
Got a SIGSEGV while executing native code. This usually indicates
a fatal error in the mono runtime or one of the native libraries 
used by your application.
================================================================= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:43:24.020

为了使用 MonoDevelop 的分析器，您必须启用 SGEN 垃圾收集器 (GC)。这是（来自堆栈跟踪）导致您崩溃的原因。

您需要返回到项目的选项（MonoTouch Build），然后在“高级”选项卡下，取消选择“使用 SGEN 分代垃圾收集器”。

更改此设置后，重新构建您的解决方案，它应该可以正常工作（它适用于发布构建的原因是因为 GC 设置与大多数设置一样，在调试和发布构建之间保持分离）。

现在可能有一些东西坏了，因为它不应该像这样崩溃。您是否可以将此问题（带有测试用例）报告给[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)，以便我们的 GC 开发人员可以了解导致此问题的原因？谢谢！

# windows - 在 Google 地球中处理带有 windows 文件夹路径的 href 的空白

> ID：13831023
> 
> 赞同：1
> 
> 时间：2012-12-12T00:51:20.433
> 
> 标签：windows, kml

我正在使用 Google Earth 生成一个 KML 文件，其中包含从 AutoCAD 图纸生成的地标。这些地标每个都包含指向绘图的 windows 文件夹位置的 href。到目前为止，这在大多数情况下都可以正常工作，除了我面临的问题是处理 Windows 文件路径中的空白。

例如。S:/job/13/13347/项目 1/

我知道包含空格的文件路径的 Windows 8.3 别名。

但是想知道除了使用

~1 约定，因为这将难以编码并且会产生不一致的结果。

我正在使用 ESRI 弧视图从和 ArcGIS shapefile 创建 kml 文件

干杯：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:55:16.720

URL转义空间是`%20`，所以`S:/job/13/13347/item%201/`应该工作

# n-tier-architecture - n 层 c# 中的 UI

> ID：13831025
> 
> 赞同：1
> 
> 时间：2012-12-12T00:51:32.990
> 
> 标签：n-tier-architecture

再会，

我在使用 n 层架构时遇到问题。这是我的问题

我想创建一个简单的基于 n 层 Web 的应用程序，我已经添加了来自我们之前项目的 DAL 和 BAL。现在我添加了一个项目来保存我的 UI。我想重用我们之前项目中的 DAL 和 BAL。当我将现有项目（DAL 和 BAL）添加到我的 Web 应用程序项目时，一切运行顺利。我已经分别引用了他们的dll。

我已经在我的 webconfig 上创建了数据库路径，并在我的应用程序中使用了该路径。当我在我的 UI 中创建一个将提取我的表记录的方法时。没有问题，但是当我生成在 UI 中创建的方法时。生成的方法不在 BAL 项目中，但它是在 BAL 元数据中生成的。我的 UI 项目有什么问题吗？

谢谢

# php - Magento 模块 PHP 缓存？还是服务器缓存 PHP？

> ID：13831027
> 
> 赞同：0
> 
> 时间：2012-12-12T00:51:48.477
> 
> 标签：php, apache, magento, caching, magento-1.5

Magento 是否缓存已安装模块的 php？

我有一个导出到 CSV 模块，我已经以多种方式进行了修改，但根本没有结果。最后我删除了编写（Csv.php）的模块主要部分的内容，并且在管理员中我仍然可以导出到CSV？

那么magento缓存模块或模块的php在任何地方，如果是这样，我怎样才能清除它/重置模块以进行修改？

谢谢。

编辑：我在本地主机版本的 Magento 上进行了相同的更改，并得到了我想要的结果。所以第二个问题是如果 Magento 没有 - 我的服务器会缓存 PHP 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:07:32.623

是的。转到**系统 > 工具 > 编译**，然后单击**禁用**按钮。

* * *

采取 2： 中的文件`app/code/core/`可以被覆盖`app/code/community/`，同样被`app/code/local`. 如果您编辑`core`存在于其他目录之一中的文件，则您的编辑无效。

* * *

采取 3：如果您的服务器上安装了 APC 或 XCache，那么它*可能*不会注意到文件的变化。重新启动 apache 或 php-cgi 进程。

# c++ - 无法访问矢量大小

> ID：13831031
> 
> 赞同：2
> 
> 时间：2012-12-12T00:52:10.853
> 
> 标签：c++, vector

```
 #include <vector>
        using namespace std;
        int main(){
        vector<double> one;

        one.size;
        return 0;
    } 
```

.

```
 error C3867: 'std::vector<_Ty>::size': function call missing argument list; use '&std::vector<_Ty>::size' to create a pointer to member
1>          with
1>          [
1>              _Ty=std::vector<double>
1>          ] 
```

我正在使用 Visual Studio 2012。任何想法是什么导致了这些错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T00:54:14.167

std::vector 没有 size 成员，但它具有 size() 成员函数。你需要`one.size;`改为`one.size();`

# ios6 - 重新加载 UICollectionView 页眉或页脚？

> ID：13831035
> 
> 赞同：42
> 
> 时间：2012-12-12T00:52:35.610
> 
> 标签：ios6, uicollectionview

我有一些数据是在另一个更新 UICollectionView 标头的线程中获取的。但是，我还没有找到重新加载补充视图（例如页眉或页脚）的有效方法。

我可以打电话`collectionView reloadSections:`，但这会重新加载整个部分，这是不必要的。`collectionView reloadItemsAtIndexPaths:`似乎只针对细胞（不是补充观点）。并且调用`setNeedsDisplay`标题本身似乎也不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-02-20T15:42:39.347

你也可以使用（懒惰的方式）

```
collectionView.collectionViewLayout.invalidateLayout() // swift

[[_collectionView collectionViewLayout] invalidateLayout] // objc 
```

更复杂的是提供上下文

```
collectionView.collectionViewLayout.invalidateLayout(with: context) // swift

[[_collectionView collectionViewLayout] invalidateLayoutWithContext:context] // objc 
```

然后，您可以自己创建或配置上下文以告知应更新的内容：[UICollectionViewLayoutInvalidationContext](https://developer.apple.com/documentation/uikit/uicollectionviewlayoutinvalidationcontext#//apple_ref/occ/instm/UICollectionViewLayoutInvalidationContext/invalidateSupplementaryElementsOfKind:atIndexPaths:)

它有一个可以覆盖的功能：

```
invalidateSupplementaryElements(ofKind:at:) // swift 
```

另一种选择是（如果您已经加载了正确的页眉/页脚/补充视图）并且您只想使用新数据更新视图，而不是可以使用以下函数之一来检索它：

`supplementaryView(forElementKind:at:) // get specific one` `visibleSupplementaryViews(ofKind:) // all visible ones`

可见单元格也是如此`visibleCells`。仅获取视图而不完全重新加载视图的优点是单元格保留了它的状态。当表格视图单元格使用滑动来删除/编辑/等时，这特别好，因为重新加载单元格后该状态会丢失。

如果您感到狂热，您当然也可以编写一些扩展来使用泛型仅检索给定类型的单元格/补充视图

```
if let view = supplementaryView(forType: MySupplementaryView.self, at: indexPath) {
    configure(view, at indexPath)
} 
```

这假设您有一个函数，该函数在示例中使用其类名注册/出列视图。[我在这里](https://stackoverflow.com/questions/55964080/register-and-dequeue-uitableviewcell-of-specific-type/55964081)发了一篇关于这个的帖子

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-13T00:36:55.257

我刚刚遇到了同样的问题，最后我使用它的标签来查找视图来编辑标签：

```
UICollectionReusableView *footer = (UICollectionReusableView*)[self.collectionView viewWithTag:999];
UILabel *footerLabel = (UILabel*)[footer viewWithTag:100]; 
```

就像你说的，没有必要重新加载整个部分，这也会取消单元格上的任何动画。我的解决方案并不理想，但很简单。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-06-29T09:10:36.560

**斯威夫特 3/4/5**版本：

```
collectionView.collectionViewLayout.invalidateLayout() 
```

**警告！**

如果您`collectionView`同时更改项目数（例如，仅当所有单元格都已加载时才显示页脚），它将**崩溃**。您需要先重新加载数据，以确保前后的项目数相同`invalidateLayout()`：

```
collectionView.reloadData()
collectionView.collectionViewLayout.invalidateLayout() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-27T23:11:00.190

我遇到了同样的问题。我尝试了@BobVorks 的答案，它工作正常，如果只有单元被重用，否则它不会。因此，我尝试找到一种更简洁的方法来实现这一点，并且在 performBatchUpdate （完成块）之后重新加载了整个 UICollectionView 并且效果很好。它重新加载集合而不取消 insertItemsAtIndexPath 中的动画。实际上，我个人对最近的 2 个答案投了赞成票，因为我发现它有效，但就我而言，这是最干净的方法。

```
[self.collectionView performBatchUpdates:^{
     // perform indexpaths insertion
} completion:^(BOOL finished) {
     [self.collectionView reloadData];
}]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-21T15:49:08.520

```
[UIView performWithoutAnimation:^{
    [self.collectionView reloadSections:[NSIndexSet indexSetWithIndex:4]];
}];

[UIView performWithoutAnimation:^{
    [self.collectionView reloadData];
}]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-12T17:03:43.587

这里有两种方法可以做到。

1\. 创建一个可变模型来支持最终可用的数据。在 UICollectionReusableView 的继承类中使用 KVO 来观察变化并在新数据可用时使用新数据更新标题视图。

```
[model addObserver:headerView
        forKeyPath:@"path_To_Header_Data_I_care_about"
           options:(NSKeyValueObservingOptionNew |
                    NSKeyValueObservingOptionOld)
           context:NULL]; 
```

然后在标题视图中实现监听器方法

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context 
```

2\. 向视图添加通知侦听器，并在数据成功可用时发布通知。缺点是这是应用范围，而不是干净的设计。

```
// place in shared header file
#define HEADER_DATA_AVAILABLE @"Header Data Available Notification Name"

// object can contain userData property which could hole data needed. 
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(headerDataAvailable:) name:HEADER_DATA_AVAILABLE object:nil];

[[NSNotificationCenter defaultCenter] postNotificationName:HEADER_DATA_AVAILABLE object:nil]; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-08T03:36:57.090

```
let headerView = collectionView.visibleSupplementaryViews(ofKind: UICollectionView.elementKindSectionHeader)[0] as! UICollectionReusableView 
```

我已经使用上述方法获取当前标题，并成功更新了子视图。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-05T17:06:01.910

这是我为仅更新当前加载到内存中的节标题所做的操作：

*   添加一个 weakToStrong `NSMapTable`。创建标头时，将标头添加为弱保留键，并带有 indexPath 对象。如果我们重用标头，我们将更新 indexPath。
*   当您需要更新标头时，您现在可以`NSMapTable`根据需要枚举对象/键。

```
 @interface YourCVController ()
        @property (nonatomic, strong) NSMapTable *sectionHeaders;
    @end

    @implementation YourCVContoller

    - (void)viewDidLoad {
        [super viewDidLoad];
        // This will weakly hold on to the KEYS and strongly hold on to the OBJECTS
        // keys == HeaderView, object == indexPath
        self.sectionHeaders = [NSMapTable weakToStrongObjectsMapTable];
    }

    // Creating a Header. Shove it into our map so we can update on the fly
    - (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
    {
        PresentationSectionHeader *header = [collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"presentationHeader" forIndexPath:indexPath];
        // Shove data into header here
        ...
        // Use header as our weak key. If it goes away we don't care about it
        // Set indexPath as object so we can easily find our indexPath if we need it
        [self.sectionHeaders setObject:indexPath forKey:header];
        return header;
    }

    // Update Received, need to update our headers
    - (void) updateHeaders {
        NSEnumerator *enumerator = self.sectionHeaders.keyEnumerator;
        PresentationSectionHeader *header = nil;
        while ((header = enumerator.nextObject)) {
            // Update the header as needed here
            NSIndexPath *indexPath = [self.sectionHeaders objectForKey:header];
        }
    }

    @end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-05T22:05:54.277

这个问题很老了，但一个简单的方法是设置一个延迟，涵盖您的视图动画并在您更新视图时禁用动画的时间......通常删除或插入大约需要 0.35 秒，所以只需做：

```
 delay(0.35){
            UIView.performWithoutAnimation{
            self.collectionView.reloadSections(NSIndexSet(index: 1))  
            } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-03T14:21:33.820

当补充视图的帧大小在布局无效时发生变化时，我的问题就出现了。补充意见似乎并不令人耳目一新*。*事实证明它们是，但我正在以`UICollectionReusableView`编程方式构建对象，并且我没有删除旧的`UILabel`子视图。因此，当集合视图将每个标题视图出列时，UILabels 会堆积起来，导致外观不稳定。

解决方案是在方法中完全构建每个 UICollectionReusableView `viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath`，首先 a) 从出队的单元格中删除所有子视图，然后 b) 从项目的布局属性中获取框架大小以允许添加新的子视图。

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath 
{
     yourClass *header = (yourClass *)[collectionView dequeueReusableSupplementaryViewOfKind:kind withReuseIdentifier:@"identifier" forIndexPath:indexPath];
     [[header viewWithTag:1] removeFromSuperview]; // remove additional subviews as required
     UICollectionViewLayoutAttributes *attributes = [collectionView layoutAttributesForSupplementaryElementOfKind:kind atIndexPath:indexPath];
     CGRect frame = attributes.frame;
     UILabel *label = [[UILabel alloc] initWithFrame: // CGRectMake based on header frame
     label.tag = 1;
     [header addSubview:label];
     // configure label
     return header;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-07T15:09:23.843

if let footerView = collectionView.subviews.first(where: {$0 is LoadingFooterCell}) as？LoadingFooterCell { footerView.isLoading = .loading }

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-02-25T14:15:24.303

我有一个**完美的解决方案**：

```
let footerView = self.collectionView.visibleSupplementaryViews(ofKind: UICollectionView.elementKindSectionFooter) 
```

现在您可以使用以下**命令访问 footerView**的所有子视图：

```
footerView[0].subviews[0] 
```

如果您**的 footerView 中有标签，**则：

```
let label: UILabel = footerView[0].subviews[0] as? UILabel ?? UILabel() 
```

**最后一步：**

```
label.text = "Successfully Updated Footer." 
```

# javascript - 在Javascript（jQuery）中将数组推入数组

> ID：13831037
> 
> 赞同：7
> 
> 时间：2012-12-12T00:52:44.733
> 
> 标签：javascript, jquery, arrays, push, multidimensional-array

我一直在尝试在循环中获取 push() 方法以构建如下结构：

```
var locations2 = [
    ['User', position.coords.latitude, position.coords.longitude, 1],
    ['Bondi Beach', -33.890542, 151.274856, 2],
    ['Coogee Beach', -33.923036, 151.259052, 3],
    ['Cronulla Beach', -34.028249, 151.157507, 4],
    ['Manly Beach', -33.80010128657071, 151.28747820854187, 5],
    ['Maroubra Beach', -33.950198, 151.259302, 6]
]; 
```

这是我的代码：

```
var locations = [];

$.ajax({
    type: "POST",
    url: "/ajax/map.php",
    data: "name=test",
    dataType: "json",
    cache: false,
    success: function(data){
        $.each(data.points, function(i,item){
            array_push = ["test", parseFloat(item.origem_lat), parseFloat(item.origem_lng), i];
            locations.push(array_push);
        });               
    }
}); 
```

但是，位置的 Javascript console.log 显示一个空数组。

我尝试以多种不同的方式使用 push()，但我无法获得与 location2 相同的结构。这里最大的问题是我不知道在循环之前将有多少个数组位于位置数组中，所以我无法事先对其进行初始化。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T00:32:58.777

我弄清楚了问题所在。它与 push() 方法本身无关。显然 ajax 调用不是按顺序执行的（这就是它是异步的原因）。我在 ajax 调用选项中添加了**async: false**，现在一切正常。

感谢大家的投入。

# sql-server - 抑制来自嵌套存储过程调用的虚假结果集

> ID：13831040
> 
> 赞同：5
> 
> 时间：2012-12-12T00:52:58.490
> 
> 标签：sql-server

根据要求，编辑以提供更多详细信息

我有一个存储过程（让我们称之为`spOuter`），如下所示：

```
ALTER PROCEDURE [dbo].[spOuter]
(@SelFromDateUTC smalldatetime  
,@SelToDateUTC smalldatetime  
,@SelDriverId int = null
) AS
DECLARE @SelDriverName varchar(40)
Set Nocount on

exec dbo.spInner --<<<<<<<<<<<<<<<<<<<<<<<<<<<

Select @SelDriverName = DriverName
  From dbo.tblDrivers
 Where DriverID = @SelDriverId

Set Nocount off  

Select @SelToDateUTC as @SelShiftDateUTC
      ,@SelDriverName  as SelDriverName
      , *
  From dbo.vwRptDriverProgress
 Where ActionTimeUTC between @SelFromDateUTC and @SelToDateUTC
   and DriverId = coalesce(@SelDriverId, DriverId)
 Order by DriverName,ActionTimeUTC,DriverLogId 
```

当我`spInner`从 SSMS 运行时，它不会返回任何结果集。但是，当我从中运行它时，`spOuter`我得到两个结果集，一个来自`spInner`，一个来自`spOuter`（注释掉`spInner`删除多余结果集的调用）。

`spInner`如下：

```
ALTER PROCEDURE [dbo].[spInner] AS
set nocount on
Declare @CutoffDate smalldatetime
Set @CutoffDate = DateAdd(Month, -1, getUTCDate()) -- no need to keep reprocessing the whole table.
if @CutoffDate < '11/1/2008'
    Set @CutoffDate = '11/1/2008'

Insert dbo.tblADIShifts  (PU.DriverId, PU.PunchInTimeUTC, PU.PunchInLocationId)
Select DriverId, PunchInTimeUTC, PunchInLocationId 
  From vwUpdDriverLogsAddShifts PU -- Distinct Driver,PunchInTimeUTC combinations.
 Where PU.PunchInTimeUTC > @CutoffDate
   and not exists (Select *
                     from dbo.tblADIShifts SH
                    Where SH.DriverId=PU.DriverId
                      and SH.PunchInTimeUTc = PU.PunchInTimeUtC)
 Order By PU.DriverId, PU.PunchInTimeUTC

Update dbo.tblADIShifts Set
       PunchOutTimeUTC = PU.PunchOutTimeUTC
      ,PunchOutLocationId = PU.PunchOutLocationId
  From vwUpdDriverLogsNewPunchOuts PU
 Where dbo.tblADIShifts.ShiftId = PU.ShiftId and PU.PunchInTimeUTC  > @CutoffDate

Insert dbo.tblDriverLogs (DriverId, ActionId, ActionTimeUTC, ShiftId, LocationId)
Select DriverId, ActionId, PunchInTimeUTC, ShiftId, PunchInLocationId
  From dbo.vwUPDDriverLogsSP

Insert dbo.tblDriverLogs (DriverId, ActionId, ActionTimeUTC, ShiftId, LocationId)
Select DriverId, ActionId, PunchOutTimeUTC, ShiftId, PunchOutLocationId
  From dbo.vwUPDDriverLogsFP

Update dbo.tblDriverLogs Set
       ShiftId = SH.ShiftId
  From dbo.vwUpdDriverLogsAssignShifts SH 
 Where SH.PunchInTimeUTC > @CutoffDate
   and dbo.tblDriverLogs.DriverLogId = SH.DriverLogId

Update dbo.tblDriverLogs Set
       ShiftId = PrevShiftId
  From dbo.vwUpdDriverLogsShiftless3 SH
 Where dbo.tblDriverLogs.DriverLogId = SH.DriverLogId

--<<<<<<<<< The bogus (and empty) result set has the columns
--<<<<<<<<< of tblMovementLocations which is only referenced here:
Update dbo.tblMovementLocations Set
       Distance = CalcDistance
  From vwExcessiveOrderDistances vw
 Where dbo.tblMovementLocations.MovementLocationId = vw.MovementLocationId

Update dbo.tblDriverLogs Set
       DriveTimeMinutes = VW.DriveTimeMinutes
      ,BreakTimeMinutes = VW.BreakTimeMinutes
      ,DelayTimeMinutes = VW.DelayTimeMinutes
      ,LocationId = VW.LocationId
  From dbo.vwUpdDriverLogs VW
 Where dbo.tblDriverLogs.DriverLogId = VW.DriverLogId
   and VW.ActionTimeUTC > @CutoffDate
   and (dbo.tblDriverLogs.DriveTimeMinutes <> VW.DriveTimeMinutes
    or dbo.tblDriverLogs.BreakTimeMinutes <> VW.BreakTimeMinutes
    or dbo.tblDriverLogs.DelayTimeMinutes <> VW.DelayTimeMinutes
    or coalesce(dbo.tblDriverLogs.LocationId,-1) <> VW.LocationId) 
```

当然，这些选择是插入/更新语句的一部分，不应该返回结果集？有没有办法解决？

SQLServer 2005 SP2 版本 9.00.4035.00

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:48:29.923

也许将更新语句的语法更改`spInner`为使用[别名](http://msdn.microsoft.com/en-us/library/ms187455.aspx)（请参阅[在 Update 语句中使用表别名的好方法？](https://stackoverflow.com/questions/31551/good-way-to-use-table-alias-in-update-statement)），并且`JOIN`可能会改变行为 - 像这样，例如：

```
UPDATE [locations]
   SET Distance = CalcDistance
  FROM dbo.tblMovementLocations AS [locations]
 INNER JOIN vwExcessiveOrderDistances AS [vw]
         ON [locations].MovementLocationId = [vw].MovementLocationId; 
```

思考过程是可能没有任何对应的记录 in`vwExcessiveOrderDistances`与 in 匹配，这可能导致数据库引擎通过将语句视为on`dbo.tblMovementLocations`语句来返回空结果集。如果真是这样，那肯定会很奇怪！`SELECT``dbo.tblMovementLocations`

虽然这只是我的猜测...

# haskell - Haskell：LDAP 身份验证

> ID：13831041
> 
> 赞同：3
> 
> 时间：2012-12-12T00:52:59.463
> 
> 标签：haskell

我正在尝试编写一个简单的函数，该函数将绑定到 LDAP 服务器并返回一个 IO Bool 值，以便稍后在条件语句中分析返回。如果绑定失败，下面的这个小片段可以工作并打印错误，但这不是我需要的。

```
import LDAP.Init
import LDAP.Exceptions

auth :: IO ()
auth = do
  c <- ldapOpen "10.1.1.11" 3268
  let bnd =ldapSimpleBind c "myusername@domain.local" "mypassword"
  catchLDAP bnd (\_ -> error "Wrong user name or password") 
```

如果我尝试通过处理异常的函数返回除 IO () 之外的任何内容，我会收到错误消息。我需要它来返回 IO Bool。

如果不成功，'ldapSimpleBind' 只会引发异常，仅此而已。捕获异常只会让我返回一个 IO() 我需要的是返回一些有意义的东西，以便我可以对返回值做一些有用的事情。我显然遗漏了一些东西，因为文档中 catchLDAP 的签名是 :: IO a -> (LDAPException -> IO a) -> IO a

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T01:22:07.667

您的`bnd`操作成功后不会返回`true`，错误处理程序只是调用`error`,

`let bnd' = bnd >> return true`所以看起来你可以

那么，`catchLDAP bnd' $ \_ -> return false`.

# html - 为什么要使用 html5 画布而不是使用 html5 画布来绘制图像？

> ID：13831042
> 
> 赞同：1
> 
> 时间：2012-12-12T00:53:01.750
> 
> 标签：html, html5-canvas

我正在[阅读关于 html5 canvas 的教程](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)。其中一个部分是教你如何根据图像绘制画布。虽然一切正常，但我对为什么使用画布而不是简单地使用`<img>`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:55:18.997

您可以通过这种方式对原始图像进行图像处理：想想 Instagram 风格的滤镜或 ChromaKey（绿屏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:26:01.080

使用精灵的
游戏、带有纹理多边形的 3D 游戏、
图像编辑功能、
实时裁剪和缩放、实时
图像过滤器......

如果您***只是***使用画布来加载图像，那将是一项绝对没有回报的大量工作，因为您实际上必须先将***图像加载到`img`元素或`Image()`对象中，然后才能在画布上使用它***.

# rabbitmq - 使用 RabbitMQ STOMP 对单个队列的多个订阅

> ID：13831047
> 
> 赞同：4
> 
> 时间：2012-12-12T00:53:50.217
> 
> 标签：rabbitmq, stomp

是否可以使用 RabbitMQ STOMP 客户端将单个队列绑定到多个主题？
每次发送 SUBSCRIBE 帧服务器的客户端为其创建一个新队列时，它都会使“预取计数”的使用对我毫无用处，因为它单独适用于每个订阅。
我只是在寻找通过 RabbitMQ Web-STOMP 在单个队列中获取具有许多主题的消息的任何方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-09-10T05:15:11.477

请参阅文档：[用户为主题和交换目标生成的队列名称](https://www.rabbitmq.com/stomp.html#d.ugqn)

`x-queue-name`如果存在，则指定队列名称的标头应绑定到同一队列，但客户端上将存在多个订阅。

AMQP 和 STOMP 概念之间的差异在某些方面不兼容。

# java - 在Java中解析字符串的开始和结束

> ID：13831052
> 
> 赞同：1
> 
> 时间：2012-12-12T00:54:15.423
> 
> 标签：java, string, parsing, webpage

我根本找不到任何关于我需要为 Java 字符串执行的解析类型的文档。

所以，这不是像用行或逗号之类的解析那样简单，它有点复杂。

我的程序抓取网页的源代码，我需要解析它以获取视图标签的内容。

像解析它之间的东西

```
<input name="sid" type="hidden" value=" 
```

和

```
" /> 
```

所以，如果网页有这个字符串：

```
<input name="sid" type="hidden" value="stringvaluehere" /> 
```

它会输出

```
stringvaluehere 
```

任何人都可以帮忙吗？我根本没有找到任何关于此类的文档，并且在其他来源处询问也无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T00:57:59.917

如果要解析 HTML，我建议使用 HTML 解析器而不是使用字符串操作。将文档解析为字符串只是在遇到意外的奇怪输入时提出问题。

这个问题对潜在的 Java HTML Parsers 进行了一些讨论：[Java HTML Parsing](https://stackoverflow.com/questions/238036/java-html-parsing)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T01:00:44.217

您可以为此使用库，例如[​​ JSoup](http://jsoup.org/)。它通常比尝试手动解析 DOM 容易得多。

```
Document doc = Jsoup.connect("http://www.example.com").get();
Elements inputs = doc.select("input#sid");
for(Element input : inputs) {
    System.out.println(input.attr("value"));
} 
```

易于使用，重要的是易于阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T00:58:17.093

这有点笨拙，可能有一个非常酷和古怪的正则表达式可以做得更好，但是......

```
String value = "<input name=\"sid\" type=\"hidden\" value=\"stringvaluehere\" />";
value = value.substring(value.indexOf("value=\"") + "value=\"".length());
value = value.substring(0, value.indexOf("\""));
System.out.println(value); 
```

印刷`stringvaluehere`

**更新**

另一种方法是让您将 HTML 文本视为 XML，并使用 XML 解析器来查找元素的属性。虽然听起来很复杂，但它是一个更简单的解决方案，尤其是当您倾向于解析多个网页时。

两个可能有帮助的解决方案是[jsoup](http://jsoup.org/)和[Cobra](http://lobobrowser.org/cobra/java-html-parser.jsp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T00:59:58.537

如果页面是格式良好的 XML，您可以为此目的使用 XPATH 查询语言。它比低级别正则表达式匹配更清洁。或一些现有的用于解析 HTML 的库。

# azure - Azure startup.cmd 添加新用户脚本

> ID：13831055
> 
> 赞同：0
> 
> 时间：2012-12-12T00:54:34.393
> 
> 标签：azure, startupscript, startup.cmd

我有一个简单的 startup.cmd 脚本，它运行一些网络命令来创建一个新用户并将用户添加到管理员组。

我从[这个博客](http://devlicio.us/blogs/vinull/archive/2011/10/23/moving-to-azure-worker-roles-for-nothing-and-tasks-for-free.aspx)得到了脚本。我在提升的 CMD 会话中运行了 net 命令，它们可以正常工作。但是在我的开发人员机器上运行它只会看到角色挂起。

我缺少一些技巧吗？

startup.cmd 文件内容： net user dataAdmin thepassword /add net localgroup Administrators dataAdmin /add

servicedefinition 文件中的相关片段：

startup.cmd 设置为 build action = Content and Copy Always 用于复制到输出目录

我还没有在天蓝色的生产中尝试过这个。我将尝试在今天晚些时候将其推入舞台。

**更新** 根据 BStateham 的建议，我检查了我机器上的事件日志：在“Windows Azure”下记录了一个错误：

用户程序“..\SLC.DataRole\approot\bin\startup.cmd”以非零退出代码 1 退出

知道这应该是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T09:09:21.767

根据您的评论，您似乎发现了这一点，但关键要求是启动 cmd 文件具有正确的编码，并且

> “请务必使用记事本或其他 ASCII 文本编辑器创建它……在 Visual Studio 中创建的批处理文件似乎在顶部有一个字节顺序标记，这使得它们在执行时会失败。”

此外， [this](http://blog.smarx.com/posts/windows-azure-startup-tasks-tips-tricks-and-gotchas)和 this [this](http://msdn.microsoft.com/en-us/library/windowsazure/jj129545.aspx)是有关启动命令的其他一些常见问题的很好参考。

# android - 使用画布绘图时分别更改文本高度和宽度

> ID：13831056
> 
> 赞同：7
> 
> 时间：2012-12-12T00:54:37.153
> 
> 标签：android, text, canvas, text-size

我想知道在用画布绘制时是否有任何方法可以分别修改文本的高度和宽度。要设置文本大小，您可以简单地执行此操作`paint.setTextSize(x);`，但它会更改 X 和 Y 中的文本大小，我需要像您一样分别更改 X 和 Y 中的文本大小，`paint.setTextScaleX(x);`但没有类似`paint.setTextScaleY(y);`.

有什么方法可以实现这一点，或者它是否已经存在于 Android 中？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T01:41:50.753

没有`setTextScaleY`方法，因为*不需要一个*。`setTextSize`将 X 和 Y 比例因子`setTextScaleX`相乘，并且仅将 X 比例因子相乘。`scaleX`因此，您可以通过以下方式达到任何所需的缩放比例`scaleY`：

```
setTextSize(scaleY);
setTextScaleX(scaleX/scaleY); //setTextScaleX scales according to the CURRENT size (setTextScaleX(1) does nothing). 
```

# objective-c - NSNumber 限制？

> ID：13831061
> 
> 赞同：1
> 
> 时间：2012-12-12T00:55:17.993
> 
> 标签：objective-c, ios

NSNumber 允许的最高 int 是多少？我已经在这些论坛的其他地方看到了答案，因此我在这里深感困惑。

```
int miles = 35000;
vehicle.mileage = [NSNumber numberWithInt:miles];
NSLog(@"int value = %d", miles);
NSLog(@"mileage = %@", vehicle.mileage); 
```

输出是：

```
int value = 35000
mileage = -30536 
```

我必须在这里错过一些可怕的简单，但是有人可以向我解释为什么这不能正常工作吗？

**更新：** 进一步查看后，vehicle.mileage 被正确设置为 35000，但是当我通过 NSLog(@"%@", vehicle.mileage) 显示它时，它的输出不正确。当它停止工作时，我还没有找到“神奇”值，因为到目前为止，它适用于高达 ~30,000 的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:00:11.950

NSNumber 只是一个包装器，因此当包装的原始类型溢出时它会溢出。
因此，如果您使用*numberWithInt*，则允许的最大数量为 INT_MAX（在 limits.h 中定义），如果您使用*numberWithFloat*，则允许的最大数量为 FLOAT_MAX，依此类推。
所以在这种情况下你不会溢出，我怀疑 INT_MAX 会这么低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:25:02.120

> **概述**
> 
> NSNumber 是 NSValue 的子类，它提供任何 C 标量（数字）类型的值。它定义了一组专门用于将值设置和访问为有符号或无符号 char、short int、int、long int、long long int、float 或 double 或作为 BOOL 的方法。（请注意，number 对象不一定保留创建它们的类型。）它还定义了一个 compare: 方法来确定两个 NSNumber 对象的顺序。

所以`NSNumber`和它包装的一样大。对于您意想不到的结果，您可以查看@sjs 的问题下方的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:11:15.353

`+numberWithInt:`将值解释为带符号的 int。里程永远不会是负数，所以我建议使用`[NSNumber numberWithUnsignedInt:]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T01:21:01.710

整数可以具有的极限`NSNumber`已知为`INT_MAX`35，但 000 远不及此。问题必须与`vehicle`对象或 中的`mileage`属性有关`vehicle`，它们中的任何一个都可能是`nil`

因此，继续并使用以下条件语句进行记录：

```
if (!vehicle) {
 NSLog(@"Vehicle is nil");
}
else if (!vehicle.mileage) {
 NSLog(@"Vehicle's mileage is nil");
} 
```

告诉我你的结果

# javascript - 切换 - 在 div 外部单击时隐藏项目

> ID：13831064
> 
> 赞同：13
> 
> 时间：2012-12-12T00:55:39.760
> 
> 标签：javascript, jquery

我正在使用jquery的slidetoggle，想学习如何`showup`在DIV之外的任何地方单击时使类隐藏。谢谢！

在线示例：http: [//jsfiddle.net/evGd6/](http://jsfiddle.net/evGd6/)

```
<div class="click">click me</div>
<div class="showup">something I want to show</div>​ 
```

```
$(document).ready(function(){
    $('.click').click(function(){
        $(".showup").slideToggle("fast");
    });
});​ 
```

```
.showup {
    width: 100px;
    height: 100px; 
    background: red; 
    display:none;
}
.click {
    cursor: pointer;
}
    ​ 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-12T00:58:02.080

停止`.showup`区域内的事件传播：

```
$(document).on("click", function () {
    $(".showup").hide();
}); 
```

然后防止这些点击`.showup`冒泡到`document`：

```
$(".showup").on("click", function (event) {
    event.stopPropagation();
}); 
```

任何到达 的点击事件`document`都将导致`.showup`元素被隐藏。任何从内部开始的点击事件都`.showup`将被阻止在 DOM 树上继续向上，因此永远不会到达`document`.

您还需要停止对按钮的任何点击，直至到达`document`：

```
$(".click").on("click", function (event) {
    event.stopPropagation();
    $(".showup").slideToggle("fast");
}); 
```

否则该点击事件将冒泡到`document`并导致`.showup`立即隐藏。

演示：http: [//jsfiddle.net/evGd6/2/](http://jsfiddle.net/evGd6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T08:27:39.353

如果您仍想记录`.showup`面板上的点击（假设您希望它不仅仅是一个简单的信息面板），那么`event.stopPropagation()`点击它会使该面板无法触摸/无用。改用`event.cancelBubble = true`它会让事件发生在`.showup`孩子身上。

```
$('.click').click(function(){
    $(".showup").toggle();
});

$(".showup").on("click", function (/*nothing here*/) {
    event.cancelBubble = true
});

$(document).on("click", function () {
    $(".showup").hide();
}); 
```

# return - if(function(s)) { statement } (C语言) (标准返回) (+newbie) (+缩写表达式)

> ID：13831065
> 
> 赞同：-1
> 
> 时间：2012-12-12T00:55:43.657
> 
> 标签：return

你好吗？

```
int stack_empty(stack *s){
         return (s == NULL); /* I dont get this part, it returns what if its null? */
}

int main(){
         stack *s;
         if(stack_empty(s)){ /* what it means? like... whats the standard return of a function? */
               printf("its empty");
         }
         return 0;
} 
```

我的问题在代码的注释中。简而言之，它们是： -> 函数的标准返回是什么？-> return something == NULL 是什么意思？

*我知道 NULL、s 或 == 是什么意思……我的问题在于那些缩写词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:02:31.200

`==`是对平等的测试。

如果 s 为 null`s == null`则为真，则表达式具有非零值，因此`stack_empty`将返回非零（可能为 1）。如果 s 不为 null，`s == null`则为 false，因此该方法将返回 0。

if 语句实际上是在说`if expression is not 0`.

# android - 使用按钮在类之间切换——Android Eclipse

> ID：13831067
> 
> 赞同：0
> 
> 时间：2012-12-12T00:56:05.720
> 
> 标签：android, eclipse, class, button

我想点击暂停按钮，然后在点击按钮时返回上一课。我去 Pause 课没有问题，但是我不能回来。一切看起来都一样，所以我认为这可能是一个一般的层次结构问题或类似的问题，但我不确定。

暂停类被调用并正确运行，但是当我按下按钮时，程序崩溃了。我正试图回到我刚离开的同一个班级。我正在使用 Eclipse。谢谢你的帮助！这是我的非工作代码：

```
package com.evorlor.counter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.widget.TextView;

public class Pause extends Activity {

    @Override
    protected void onCreate(Bundle instPause) {

        super.onCreate(instPause);

        setContentView(R.layout.activity_counter);
        findViewById(R.id.textView1);
        TextView tv = (TextView) findViewById(R.id.textView1);

        tv.setGravity(Gravity.CENTER);
        tv.setTextSize(150);
        tv.setText("PAUSE");
    }

    public void resumeCounter(View view) {
        Intent resume = new Intent(Pause.this, Counter.class);
        startActivity(resume);
    }
} 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Pause" >

    <TextView
        android:id="@+id/tvPause"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

    <Button
        android:id="@+id/btnResume"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="resumeCounter" />

</RelativeLayout> 
```

* * *

```
12-12 01:02:27.796: E/AndroidRuntime(1883): FATAL EXCEPTION: main
12-12 01:02:27.796: E/AndroidRuntime(1883): java.lang.IllegalStateException: Could not find a method pauseCounter(View) in the activity class com.evorlor.counter.Pause for onClick handler on view class android.widget.Button with id 'button1'
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.view.View$1.onClick(View.java:3584)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.view.View.performClick(View.java:4202)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.view.View$PerformClick.run(View.java:17340)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.os.Handler.handleCallback(Handler.java:725)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.os.Looper.loop(Looper.java:137)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at java.lang.reflect.Method.invoke(Method.java:511)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at dalvik.system.NativeStart.main(Native Method)
12-12 01:02:27.796: E/AndroidRuntime(1883): Caused by: java.lang.NoSuchMethodException: pauseCounter [class android.view.View]
12-12 01:02:27.796: E/AndroidRuntime(1883):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at java.lang.Class.getMethod(Class.java:915)
12-12 01:02:27.796: E/AndroidRuntime(1883):     at android.view.View$1.onClick(View.java:3577)
12-12 01:02:27.796: E/AndroidRuntime(1883):     ... 11 more 
```

* * *

计数器类

```
package com.evorlor.counter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.widget.TextView;

public class Counter extends Activity {

    private int count = 0;
    private int hiCount = 0;
    private boolean capCount = false;

    @Override
    protected void onCreate(Bundle instCounter) {

        super.onCreate(instCounter);

        setContentView(R.layout.activity_counter);
        findViewById(R.id.textView1);
        TextView tv = (TextView) findViewById(R.id.textView1);

        tv.setTextSize(250);
        if (count < 10000 && capCount == false) {

            tv.setText(Integer.toString(count));
        } else {
            capCount = true;
            if (count >= 10000) {
                hiCount += 10;
                count -= 10000;
            }
            if (hiCount < 100) {

                tv.setText(hiCount + "k+" + count);
            } else {
                tv.setText("Over\n100k");
            }
        }
        tv.setGravity(Gravity.CENTER);

    }

    public void pauseCounter(View view) {
        Intent pause = new Intent(Counter.this, Pause.class);
        startActivity(pause);
    }

} 
```

* * *

柜台布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Counter" >

    <TextView
        android:id="@+id/tvCounter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" />

    <Button
        android:id="@+id/btnPause"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="pauseCounter" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:14:19.437

您对两个按钮使用相同的 id。更改其中一个 ID。举`button2`个例子。与您的 TextViews 相同，但它们不是引用方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:10:14.370

您是否尝试将 onclick 侦听器设置为 tv

```
tv.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent resume = new Intent(Pause.this, Counter.class);
            startActivity(resume);

        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T01:03:19.210

```
Caused by: java.lang.NoSuchMethodException: pauseCounter 
```

您是否在某个地方引用了一个名为 pauseCounter() 的方法？你的问题就在那里。

此外，您需要在参考之前先设置布局（findViewById）

```
public class Pause extends Activity {

    @Override
    protected void onCreate(Bundle instPause) {

        super.onCreate(instPause);

        setContentView(R.layout.activity_counter);
        findViewById(R.id.textView1); // move this here

        TextView tv = (TextView) findViewById(R.id.textView1);

        tv.setGravity(Gravity.CENTER);
        tv.setTextSize(150);
        tv.setText("PAUSE");
        Button resume = (Button) findViewById(R.id.button1);
    resume.setOnClickListener( new OnClickListener() {

        @Override
        public void onClick(View v) {
            finish();               
        }
    });
    }

  } 
```

> 边注：

尝试命名您的按钮 ID。不要使用默认值，它可能会导致很难跟踪的问题。尝试像这样重命名它们 idBtnPause, idBtnResume 并确保不要重复名称

# c++ - C++ Mutex 语法和用法

> ID：13831071
> 
> 赞同：0
> 
> 时间：2012-12-12T00:56:38.590
> 
> 标签：c++, multithreading, winapi, mutex

我一直在使用 C++ 对多线程解决方案进行大量研究，但由于某种原因，我无法找到任何具体的语法来使用（而不使用任何库）我正在将图像渲染到屏幕并分离屏幕空间对于每个线程。

我想要发生的是让线程增加一个值并挂起，一旦所有线程都通过它将显示到屏幕上，并释放线程重新开始。

```
void WaitForThreads(){
    WaitForSingleObject( hCompleteThread, INFINITE );
    IdleThreads++;
    if(IdleThreads==CoreMax){
        //Copy image to screen
        ReleaseMutex( hRelease);
    }
    ReleaseMutex( hCompleteThread);
    WaitForSingleObject( hRelease, INFINITE );
    IdleThreads--;
    if(IdleThreads>0){
        ReleaseMutex( hRelease);
    }
} 
```

我不确定我是否使用了不正确的语法，或者只是没有完全掌握正在发生的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:27:03.323

没有更多的上下文，就不可能说出你在做什么。hCompleteThread 和 hRelease 是如何创建的？- 也就是说，它们是什么？

无论如何，您可以使用信号量。信号量为您计算。它们非常适合这种生产者/消费者的东西。

# c# - 我如何保证 Ninject 会自动调用 Disposable() ？

> ID：13831075
> 
> 赞同：4
> 
> 时间：2012-12-12T00:56:52.427
> 
> 标签：c#, ninject

**1)**

```
public class DataProvider : IProvider , IDisposable{

       private SqlConnection connection = null;
       public DataProvider(string ConnectionString) {
            this.connection = new SqlConnection(ConnectionString);
           this.connection.Open();
       }

       public object GetUniqueData(SqlCommand CommandSql){}

       public void ExecuteInsertDeleteUpdate(SqlCommand CommandSql){}

       public void Dispose(){
          if (this.connection != null) {
              this.connection.Close();
              this.connection.Dispose();
          }
       }
} 
```

**2)**

```
public class ManageBrandDAL : IManageBrandDAL {

      private IProvider provider = null;

      [Inject]
      public ManageBrandDAL (IProvider provider_){
           this.provider  = provider_;
      }

      public void RegisterBrand(string a_BrandName){
           SqlCommand SQLCommand =
               new SqlCommand("INSERT INTO Brand(name) VALUES(@pm_brandname)");
           SqlParameter pm_brandname= new SqlParameter();
           pm_brandname.ParameterName = "@pm_brandname";
           pm_brandname.DbType = DbType.String;
           pm_brandname.Value = a_BrandName;
           SQLCommand.Parameters.Add(pm_brandname);
           this.provider.ExecuteInsertDeleteUpdate(SQLCommand);
       } 
```

**3)**

```
public class ModuleInfra : Ninject.Modules.NinjectModule
{
      public override void Load(){
            Bind<IProvider>()
                .To<ProvedorDados()
                .InTransientScope()
                .WithConstructorArgument("ConnectionString", Manage.ConnectionString);
      }
} 
```

如何保证 Ninject Container 在使用对象后会调用`Dispose()`类中`DataProvider`的方法？`ManageBrandDAL``DataProvider`

这种`InTransientScope()`情况的最佳生命周期是什么？如果不是，什么更合适？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T21:45:30.203

当你绑定你的`DataProvider` `InTransientScope()`时，它不会被 Ninject 处理，因为实际上瞬态作用域根本就没有作用域。Ninject 在为您创建对象后，不会跟踪绑定在瞬态范围内的对象。

Ninject`IDisposable`在底层范围对象被 GC 收集后立即处理实现的对象实例（但正如我所说，这不适用于绑定到瞬态范围的对象，因为没有这样的范围对象）。

您应该绑定`DataProvider`适合您的应用程序的范围。它可能是：

*   `InRequestScope()`对于 Web 应用程序（Ninject 将`IDisposable`在 http 请求结束后处理实现的对象实例 - 不要忘记包含`OncePerWebRequest`模块）
*   `InSingletonScope()`- 在应用程序的整个生命周期中，对象的实例将被重新用于所有后续请求 - 从我的角度来看，它不是持有资源的对象的选项，例如`SqlConnection`
*   `InThreadScope()`- 对象的实例将在同一个线程中重复使用
*   `InScope()`- 这可用于创建自定义范围，因此根据您的应用程序类型，您可以考虑创建适合您需要的自定义范围。

Ninject 还有一些有趣的扩展，提供额外的范围定义：[https ://github.com/ninject/ninject.extensions.namedscope/wiki](https://github.com/ninject/ninject.extensions.namedscope/wiki)

*提示*

*   您无需同时调用`Close()`和`Dispose()`在您的`SqlConnection`. `Dispose()`就足够了，因为它在`Close()`内部调用。
*   我没有看到整个代码，但也不要忘记处理`SqlCommand`。
*   如果您让创建`ManageBrandDAL`on Ninject 的实例，则不需要`InjectAttribute`在其构造函数上使用。它将使您摆脱使用特定 IOC 提供商的束缚。

# c# - 无法使用 FindControl() 访问子控件

> ID：13831077
> 
> 赞同：0
> 
> 时间：2012-12-12T00:56:57.480
> 
> 标签：c#, asp.net, findcontrol

所有这些都发生在同一个用户控件中，因此不应该有所作为。

```
<asp:Repeater ID="rptActivity" runat="server" OnItemCreated="rptActivity_ItemCreated">
    <ItemTemplate>
        <div class="under-label">
            <div class="activity">
                <%#Eval("ActivityName")%>
                <input type="hidden" name="activityId" value='<%#Eval("ActivityId")%>' />
            </div>

            <div class="status">
                <asp:DropDownList ID="ddlStatuses" DataSourceID="SqlDataSource1"  DataTextField="Name" DataValueField="Id"  runat="server"></asp:DropDownList>
            </div>
            <div class="comment">
                <textarea name="comments" cols="35" rows="3" name="comment" style="float: left; margin: 0px 0px 0px 25px; font-family: Geneva, Arial, Helvetica, sans-serif;"><%#Eval("Comment")%></textarea>
            </div>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我在转发器的 itemcreated 事件中有以下代码：

```
 protected void rptActivity_ItemCreated(object sender, RepeaterItemEventArgs e)
        {
            var helper = (UpdateActivitiesHelper)e.Item.DataItem;

            DropDownList ddl = (DropDownList)FindControl("ddlStatuses");
            ddl.SelectedValue = helper.StatusId.ToString();
        } 
```

当我尝试使用 ddl 时，它会抛出`NullReferenceException`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:17:51.340

由于您的下拉列表位于中继器内，因此请确保您引用`DataItem`来查找控件。

确保使用`e.Item.FindControl`而不是`Page.FindControl`-- `Page.FindControl`will not find this item 因为它不会递归搜索页面

```
protected void rptActivity_ItemCreated(object sender, RepeaterItemEventArgs e)
{
    var helper = (UpdateActivitiesHelper)e.Item.DataItem;
    DropDownList ddl = (DropDownList)e.Item.FindControl("ddlStatuses");
    ddl.SelectedValue = helper.StatusId.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:14:57.207

尝试修改您的 ItemCreated eventHandler 如下所示，看看它是否有效。

```
protected void rptActivity_ItemCreated(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item){
        var helper = (UpdateActivitiesHelper)e.Item.DataItem;
        DropDownList ddl = (DropDownList)e.Item.FindControl("ddlStatuses");
        ddl.SelectedValue = helper.StatusId.ToString();
    }
} 
```

# java - 对 BYE 消息的 JAIN SIP 481 响应

> ID：13831078
> 
> 赞同：1
> 
> 时间：2012-12-12T00:57:04.320
> 
> 标签：java, android, sip, jain-sip

所以我在我的一些自定义 VOIP 应用程序中使用 JAIN-SIP API 进行呼叫设置，我遇到了一个困扰我好几天的问题：我不能用 BYE 消息挂断电话。更准确地说，我不断收到来自被调用者的 481 Call/Transaction Does Not Exist 响应代码。我不明白为什么。

下面是被调用方的堆栈服务器日志。如果需要，我可以为您提供源代码和调试日志，但请注意源代码很长。

```
<!-- Use the  Trace Viewer in src/tools/tracesviewer to view this  trace  
Here are the stack configuration properties 
javax.sip.IP_ADDRESS= 192.168.1.103
javax.sip.STACK_NAME= vm.nist
javax.sip.ROUTER_PATH= null
javax.sip.OUTBOUND_PROXY= null
-->
<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272841980"
isSender="true" 
transactionId="z9hg4bk-cf90a986-d7f9-44a9-bd63-efb74ecc36e9" 
callId="f8270729014d0c5b17c759f60ea6510f@192.168.1.103" 
firstLine="REGISTER sip:test14.d@talk-place.com SIP/2.0" 
>
<![CDATA[REGISTER sip:test14.d@talk-place.com SIP/2.0
Call-ID: f8270729014d0c5b17c759f60ea6510f@192.168.1.103
CSeq: 366 REGISTER
From: "Test14d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
To: "Test14d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 212.200.115.198:51060;rport;branch=z9hG4bK-cf90a986-d7f9-44a9-bd63-efb74ecc36e9
Max-Forwards: 70
Contact: <sip:test14.d@212.200.115.198:51060;transport=udp>
Allow: INVITE,ACK,BYE,MESSAGE
User-Agent: Talk-Place
Content-Length: 0

]]>
</message>

<message
from="5.9.109.239:5060" 
to="192.168.1.103:51060" 
time="1355272842063"
isSender="false" 
transactionId="z9hg4bk-cf90a986-d7f9-44a9-bd63-efb74ecc36e9" 
callId="f8270729014d0c5b17c759f60ea6510f@192.168.1.103" 
firstLine="SIP/2.0 401 Unauthorized" 
>
<![CDATA[SIP/2.0 401 Unauthorized
Call-ID: f8270729014d0c5b17c759f60ea6510f@192.168.1.103
CSeq: 366 REGISTER
From: "Test14d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
To: "Test14d" <sip:test14.d@talk-place.com>;tag=b27e1a1d33761e85846fc98f5f3a7e58.6828
Via: SIP/2.0/UDP 192.168.1.103:51060;rport=51060;branch=z9hG4bK-cf90a986-d7f9-44a9-bd63-efb74ecc36e9
WWW-Authenticate: Digest nonce="UMfTtVDH0okwmWYROC4r29415DGDKaqM",realm="talk-place.com"
Server: kamailio (3.3.2 (x86_64/linux))
Content-Length: 0

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272842069"
isSender="true" 
transactionId="z9hg4bk-cf90a986-d7f9-44a9-bd63-efb74ecc36e9" 
callId="f8270729014d0c5b17c759f60ea6510f@192.168.1.103" 
firstLine="REGISTER sip:test14.d@talk-place.com SIP/2.0" 
>
<![CDATA[REGISTER sip:test14.d@talk-place.com SIP/2.0
Call-ID: f8270729014d0c5b17c759f60ea6510f@192.168.1.103
CSeq: 367 REGISTER
From: "Test14d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
To: "Test14d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 212.200.115.198:51060;rport;branch=z9hG4bK-cf90a986-d7f9-44a9-bd63-efb74ecc36e9
Max-Forwards: 70
Contact: <sip:test14.d@212.200.115.198:51060;transport=udp>
Allow: INVITE,ACK,BYE,MESSAGE
User-Agent: Talk-Place
Authorization: Digest response="ec655ebc2eb8685de4fb7d739f3f0acf",username="test14.d",nonce="UMfTtVDH0okwmWYROC4r29415DGDKaqM",realm="talk-place.com",uri="sip:test14.d@talk-place.com",algorithm=MD5
Content-Length: 0

]]>
</message>

<message
from="5.9.109.239:5060" 
to="192.168.1.103:51060" 
time="1355272842118"
isSender="false" 
transactionId="z9hg4bk-cf90a986-d7f9-44a9-bd63-efb74ecc36e9" 
callId="f8270729014d0c5b17c759f60ea6510f@192.168.1.103" 
firstLine="SIP/2.0 200 OK" 
>
<![CDATA[SIP/2.0 200 OK
Call-ID: f8270729014d0c5b17c759f60ea6510f@192.168.1.103
CSeq: 367 REGISTER
From: "Test14d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
To: "Test14d" <sip:test14.d@talk-place.com>;tag=b27e1a1d33761e85846fc98f5f3a7e58.6828
Via: SIP/2.0/UDP 192.168.1.103:51060;rport=51060;branch=z9hG4bK-cf90a986-d7f9-44a9-bd63-efb74ecc36e9
Contact: <sip:test14.d@192.168.1.103:51060;transport=udp>;expires=3600
Server: kamailio (3.3.2 (x86_64/linux))
Content-Length: 0

]]>
</message>

<message
from="5.9.109.239:5060" 
to="192.168.1.103:51060" 
time="1355272852008"
isSender="false" 
transactionId="z9hg4bkbd3c.62eea493.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="INVITE sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0" 
>
<![CDATA[INVITE sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0
Record-Route: <sip:5.9.109.239;lr=on>
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 116 INVITE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKbd3c.62eea493.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Max-Forwards: 69
Contact: <sip:test14.f@77.243.22.4:36238;transport=udp>
Allow: INVITE,ACK,BYE,CANCEL,OPTIONS,PRACK,REFER,NOTIFY,SUBSCRIBE,INFO,MESSAGE
User-Agent: Talk-Place
Content-Type: application/sdp
Content-Length: 206

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272852027"
isSender="true" 
transactionId="z9hg4bkbd3c.62eea493.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="SIP/2.0 100 Trying" 
>
<![CDATA[SIP/2.0 100 Trying
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 116 INVITE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKbd3c.62eea493.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Content-Length: 0

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272854032"
isSender="true" 
transactionId="z9hg4bkbd3c.62eea493.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="SIP/2.0 180 Ringing" 
>
<![CDATA[SIP/2.0 180 Ringing
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 116 INVITE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKbd3c.62eea493.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Contact: <sip:test14.d@212.200.115.198;transport=udp>
Content-Length: 0

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272856037"
isSender="true" 
transactionId="z9hg4bkbd3c.62eea493.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="SIP/2.0 200 OK" 
>
<![CDATA[SIP/2.0 200 OK
Record-Route: <sip:5.9.109.239;lr=on>
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 116 INVITE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>;tag=18faf7d44db09f903ff5895b78787911
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKbd3c.62eea493.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Contact: <sip:test14.d@212.200.115.198;transport=udp>
Content-Type: application/sdp
Content-Length: 218

]]>
</message>

<message
from="5.9.109.239:5060" 
to="192.168.1.103:51060" 
time="1355272856327"
isSender="false" 
transactionId="z9hg4bkcydzigwkx" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="ACK sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0" 
>
<![CDATA[ACK sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 117 ACK
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKcydzigwkX,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Max-Forwards: 69
Allow: INVITE,ACK,BYE,CANCEL,OPTIONS,PRACK,REFER,NOTIFY,SUBSCRIBE,INFO,MESSAGE
User-Agent: Talk-Place
Content-Length: 0

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272856339"
isSender="true" 
transactionId="z9hg4bkcydzigwkx" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="SIP/2.0 200 OK" 
>
<![CDATA[SIP/2.0 200 OK
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 117 ACK
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bKcydzigwkX,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Content-Length: 0

]]>
</message>

<message
from="5.9.109.239:5060" 
to="192.168.1.103:51060" 
time="1355272856728"
isSender="false" 
transactionId="z9hg4bk9e3c.74261c85.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="BYE sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0" 
>
<![CDATA[BYE sip:test14.d@192.168.1.103:51060;transport=udp SIP/2.0
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 119 BYE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bK9e3c.74261c85.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Max-Forwards: 69
Allow: INVITE,ACK,BYE,CANCEL,OPTIONS,PRACK,REFER,NOTIFY,SUBSCRIBE,INFO,MESSAGE
User-Agent: Talk-Place
Content-Length: 0

]]>
</message>

<message
from="192.168.1.103:51060" 
to="5.9.109.239:5060" 
time="1355272856738"
isSender="true" 
transactionId="z9hg4bk9e3c.74261c85.0" 
callId="2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204" 
firstLine="SIP/2.0 481 Call leg/Transaction does not exist" 
>
<![CDATA[SIP/2.0 481 Call leg/Transaction does not exist
Call-ID: 2b10b9f3880ef078cb20cd9ae7075591@10.86.183.204
CSeq: 119 BYE
From: "test14.f" <sip:test14.f@talk-place.com>;tag=32f8bc24842d02d1357bd2345c542659
To: "test14.d" <sip:test14.d@talk-place.com>
Via: SIP/2.0/UDP 5.9.109.239;branch=z9hG4bK9e3c.74261c85.0,SIP/2.0/UDP 77.243.22.4:36238;rport=36238;branch=z9hG4bK-f7a17df9-2242-4785-80cd-25993986008b
Server: vm.nist
Content-Length: 0

]]>
</message> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:52:43.120

UAS 拒绝该请求，因为它在标头`BYE`中不包含。该请求还应具有. 你是如何创建这些请求的？`tag``To``ACK``tag`

# python - 使用指向运算符的变量进行评估

> ID：13831081
> 
> 赞同：1
> 
> 时间：2012-12-12T00:57:15.577
> 
> 标签：python

评估条件时是否可以将运算符包含在变量中。像这样：

```
>>> one = 1
>>> two = 2
>>> lessthan = '<'

>>> if one lessthan two: print 'yes' 
```

有没有办法在表达式期间返回变量？我也尝试通过函数返回它。

```
def operator(op):
    return op

if one operator(lessthan) two: print 'yes' 
```

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:00:59.490

你可以使用[`operator`](http://docs.python.org/2/library/operator.html)：

```
import operator

lessthan = operator.lt

one = 1
two = 2

if lessthan(one, two):
    print 'yes' 
```

您还可以在字符串和操作之间进行映射：

```
operators = {
    '<': operator.lt,
    '>': operator.gt,
    '>=': operator.ge,
    '<=': operator.le,
} 
```

然后调用函数：

```
>>> operators['<'](123, 456)
True 
```

# iphone - RestKit 到 Core Data 的映射和加载零对象。RKManagedObjectLoader

> ID：13831091
> 
> 赞同：0
> 
> 时间：2012-12-12T00:58:09.307
> 
> 标签：iphone, ios, rest, core-data, restkit

我一直在努力让我的项目使用 RestKit 将我的 JSON 对象保存到 Core Data 中。我有 RestKit 0.10.2 并且经历了大杂烩的教程并在这里拼凑了一些东西。当我的 Event 是一个 NSObject 时，我之前已经取得了成功，并且我没有实现 Core Data。现在我使用 Core Data 进行持久性，我在将 JSON 导入数据库时​​遇到了问题。我尝试过的所有操作要么用 [0] 对象调用 objecLoader，要么像现在这样，我无法调用 objectLoader。

显示 JSON 后我的 Xcode 控制台输出显示以下消息：

```
2012-12-11 19:44:43.508 fish[19404:15b03] I restkit.core_data:RKInMemoryManagedObjectCache.m:34 Creating thread-local entity cache for managed object context: <NSManagedObjectContext: 0x11249470>
2012-12-11 19:44:43.508 fish[19404:15b03] I restkit.core_data:RKInMemoryManagedObjectCache.m:50 Caching instances of Entity 'Event' by primary key attribute 'eventId' 
```

并在此时挂起：

```
 libobjc.A.dylib`property_getAttributes:
0x1cecd27:  pushl  %ebp
0x1cecd28:  movl   %esp, %ebp
0x1cecd2a:  movl   8(%ebp), %eax
0x1cecd2d:  movl   4(%eax), %eax
0x1cecd30:  popl   %ebp
0x1cecd31:  ret 
```

根视图控制器.h

```
 @interface RootViewController : UITableViewController <CLLocationManagerDelegate, RKObjectLoaderDelegate> {

    NSArray *eventsArray;

    NSManagedObjectContext *managedObjectContext;

    CLLocationManager *locationManager;
    UIBarButtonItem *addButton;

    User *user;
    RKClient *client;
    RKObjectManager *objectManager;
    NSArray *data;

}

@property (nonatomic, retain) NSArray *eventsArray;
@property (nonatomic, retain) NSArray *data;
@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;     

@property (nonatomic, retain) CLLocationManager *locationManager;
@property (nonatomic, retain) UIBarButtonItem *addButton;
@property (nonatomic, retain) User *user;
@property (nonatomic, retain) RKClient *client;
@property (nonatomic, retain) RKObjectManager *objectManager;

rootViewcontroller.m

    @implementation RootViewController

@synthesize eventsArray, managedObjectContext, addButton, locationManager;
@synthesize objectManager;
@synthesize user, client, data;

#pragma mark -
#pragma mark View lifecycle
- (User *)user {
    if (user == nil) {
        //NSURL *url = [NSURL URLWithString:[ObjectiveResourceConfig getSite]];
        self.user = [User currentUserForSite:gBaseURL];
        [user addObserver:self];
    }
    return user;
}

- (void)viewDidLoad {
    LocationsAppDelegate *appDelegate = (LocationsAppDelegate *)[[UIApplication sharedApplication] delegate];
    managedObjectContext = [appDelegate managedObjectContext];

    [self configureRestKit];
    client = appDelegate.client;

    // Initialize RestKit
    RKURL *baseURL = [RKURL URLWithBaseURL:gBaseURL];
    objectManager = [RKObjectManager sharedManager];
    objectManager = [RKObjectManager managerWithBaseURL:gBaseURL];
    objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;
    objectManager.client.baseURL = baseURL;
    objectManager.client.username = self.user.login;
    objectManager.client.password = self.user.password;

    NSError *error = nil;
    NSManagedObjectModel *managedObjectModel = appDelegate.managedObjectModel;

    NSString *databaseName = @"Fishn.sqlite";
    //RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
    RKManagedObjectStore *managedObjectStore =[[RKManagedObjectStore alloc] init];
    objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:databaseName usingSeedDatabaseName:nil managedObjectModel:managedObjectModel delegate:self];
    objectManager.objectStore = managedObjectStore;

    [super viewDidLoad];

    // Enable automatic network activity indicator management
    objectManager.client.requestQueue.showsNetworkActivityIndicatorWhenBusy = YES;

    //NSLog(@"===> %@ / %@",objectManager.client.username,objectManager.client.password);
    objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"Fishn.sqlite"];

    [self setupMapping];

    [self sendRequest];
}

    - (void)configureRestKit {
#if TARGET_IPHONE_SIMULATOR
    gBaseURL = [[NSURL alloc] initWithString:@"http://localhost:3000"];
#else
    gBaseURL = [[NSURL alloc] initWithString:@"http://localhost:3000"];
#endif
    //self.user.login = @"user@example.com";
    //self.user.password = @"please";

}

- (void)sendRequest
{

    [objectManager loadObjectsAtResourcePath:@"/events.json" delegate:self];
}

- (void)objectLoader:(RKManagedObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
    NSLog(@"Error: %@", [error localizedDescription]);
}

- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {
    if ([request isGET]) {
        if ([response isOK]) {
            NSLog(@"Data returned: %@", [response bodyAsString]);
        }
    } else if ([request isPOST]) {
        if ([response isJSON]) {
            NSLog(@"POST returned a JSON response");
        }
    } else if ([request isDELETE]) {
        if ([response isNotFound]) {
            NSLog(@"Resource '%@' not exists", [request resourcePath]);
        }
    }
}

- (void)objectLoader:(RKManagedObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    NSLog(@"Number of objects [%d]", [objects count]);
    data = objects;
    self.eventsArray = objects;
    [self.tableView reloadData];
}

- (void)setupMapping {
    RKObjectMappingProvider *omp = [RKObjectManager sharedManager].mappingProvider;
    RKManagedObjectMapping *eventMapping = [RKManagedObjectMapping mappingForClass:[Event class] inManagedObjectStore:objectManager.objectStore];
    [eventMapping mapKeyPathsToAttributes:
     @"id",@"eventId",
     @"name",@"name",
     @"amount",@"amount",
     @"length",@"length",
     @"updated_at",@"updatedAt",
     @"created_at",@"createdAt",
     @"latitude",@"latitude",
     @"longitude",@"longitude",
     @"thumbnail",@"thumbnail",
     @"airTemp",@"airTemp", nil];
    eventMapping.primaryKeyAttribute = @"eventId";
    eventMapping.rootKeyPath = @"event";

    [omp addObjectMapping:eventMapping];
    [omp setObjectMapping:eventMapping forResourcePathPattern:@"/events.json"];
    //[objectManager loadObjectsAtResourcePath:@"/events.json" delegate:self];

    //[eventMapping mapAttributes:@"name", @"amount", @"latitude", @"longitude", @"airTemp", @"length",@"thumbnail", nil];
    //[eventMapping mapKeyPathsToAttributes:
    // @"created_at", @"createdAt",
    // @"updated_at", @"updatedAt",
    // @"id", @"eventId",
    // nil];
}

Event.h

    @class Photo;

@interface Event : NSManagedObject  {

    NSNumber *eventId;
    NSString *name;
    NSString *amount;
    NSDate   *updatedAt;
    NSDate   *createdAt;
    NSNumber    *latitude;
    NSNumber    *longitude;
    NSNumber    *airTemp;
    NSNumber    *length;
    UIImage *thumbnail;
}

@property (nonatomic, retain) UIImage *thumbnail;
//@property (nonatomic, retain) NSDate *creationDate;
@property (nonatomic, retain) Photo *photo;

@property (nonatomic, retain) NSNumber *eventId;
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *amount;
@property (nonatomic, retain) NSDate *updatedAt;
@property (nonatomic, retain) NSDate *createdAt;
@property (nonatomic, strong) NSNumber *latitude;
@property (nonatomic, retain) NSNumber *longitude;
@property (nonatomic, retain) NSNumber *airTemp;
@property (nonatomic, retain) NSNumber *length;

@end 
```

这是我的控制台日志：

```
 2012-12-12 21:46:03.144 fish[30797:11f03] I restkit:RKLog.m:33 RestKit initialized...
2012-12-12 21:46:03.256 fish[30797:11f03] AppDelegeate I am your RKClient singleton : <RKClient: 0x9838ee0>
2012-12-12 21:46:03.257 fish[30797:11f03] Uname and PW = user@example.com , please
2012-12-12 21:46:03.264 fish[30797:11f03] User has street cred
2012-12-12 21:46:03.265 fish[30797:11f03] Application windows are expected to have a root view controller at the end of application launch
2012-12-12 21:46:03.266 fish[30797:11f03] I restkit.support:RKCache.m:189 Invalidating cache at path: /Users/yoshi/Library/Application Support/iPhone Simulator/6.0/Applications/6BB57AD9-7949-4B0B-A1B5-4441005FA87A/Library/Caches/RKClientRequestCache-localhost/SessionStore
2012-12-12 21:46:03.267 fish[30797:11f03] I restkit.network.reachability:RKReachabilityObserver.m:162 Reachability observer initialized with hostname localhost
2012-12-12 21:46:03.268 fish[30797:11f03] D restkit.network:RKClient.m:294 Reachability observer changed for client <RKClient: 0x79542b0>, suspending queue <RKRequestQueue: 0x79543f0 name=(null) suspended=YES requestCount=0 loadingCount=0/5> until reachability to host 'localhost' can be determined
2012-12-12 21:46:03.268 fish[30797:11f03] I restkit.support:RKCache.m:189 Invalidating cache at path: /Users/yoshi/Library/Application Support/iPhone Simulator/6.0/Applications/6BB57AD9-7949-4B0B-A1B5-4441005FA87A/Library/Caches/RKClientRequestCache-localhost/SessionStore
2012-12-12 21:46:03.294 fish[30797:11f03] I restkit.network.reachability:RKReachabilityObserver.m:391 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x983d860 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=NO reachabilityFlags=-R -----ld>
2012-12-12 21:46:03.294 fish[30797:11f03] D restkit.network:RKClient.m:437 Reachability to host 'localhost' determined for client <RKClient: 0x9838ee0>, unsuspending queue <RKRequestQueue: 0x9839300 name=(null) suspended=YES requestCount=0 loadingCount=0/5>
2012-12-12 21:46:03.295 fish[30797:11f03] D restkit.network.queue:RKRequestQueue.m:338 Queue <RKRequestQueue: 0x9839300 name=(null) suspended=YES requestCount=0 loadingCount=0/5> has been unsuspended
2012-12-12 21:46:03.295 fish[30797:11f03] I restkit.network.reachability:RKReachabilityObserver.m:391 Network availability has been determined for reachability observer <RKReachabilityObserver: 0x983c6c0 host=localhost isReachabilityDetermined=YES isMonitoringLocalWiFi=NO reachabilityFlags=-R -----ld>
2012-12-12 21:46:03.296 fish[30797:11f03] D restkit.network:RKClient.m:437 Reachability to host 'localhost' determined for client <RKClient: 0x79542b0>, unsuspending queue <RKRequestQueue: 0x79543f0 name=(null) suspended=YES requestCount=1 loadingCount=0/5>
2012-12-12 21:46:03.296 fish[30797:11f03] D restkit.network.queue:RKRequestQueue.m:338 Queue <RKRequestQueue: 0x79543f0 name=(null) suspended=YES requestCount=1 loadingCount=0/5> has been unsuspended
2012-12-12 21:46:03.297 fish[30797:11f03] D restkit.network.queue:RKRequestQueue.m:309 Sent request <RKManagedObjectLoader: 0x7c5c860> from queue <RKRequestQueue: 0x79543f0 name=(null) suspended=NO requestCount=1 loadingCount=1/5>. Loading count = 1 of 5
2012-12-12 21:46:03.299 fish[30797:11f03] D restkit.network:RKRequest.m:437 Sending asynchronous GET request to URL http://localhost:3000/events.json.
2012-12-12 21:46:03.301 fish[30797:11f03] D restkit.network:RKResponse.m:198 Proceeding with request to <NSURLRequest http://localhost:3000/events.json>
2012-12-12 21:46:03.315 fish[30797:11f03] D restkit.network:RKResponse.m:175 Asked if canAuthenticateAgainstProtectionSpace: with authenticationMethod = NSURLAuthenticationMethodDefault
2012-12-12 21:46:03.315 fish[30797:11f03] D restkit.network:RKResponse.m:147 Received authentication challenge
2012-12-12 21:46:03.418 fish[30797:11f03] D restkit.network:RKResponse.m:219 NSHTTPURLResponse Status Code: 304
2012-12-12 21:46:03.419 fish[30797:11f03] D restkit.network:RKResponse.m:220 Headers: {
    "Cache-Control" = "max-age=0, private, must-revalidate";
    Connection = close;
    Date = "Thu, 13 Dec 2012 02:46:03 GMT";
    Etag = "\"1a8ebe93a30136774e4a26d6f0d3b714\"";
    Server = "WEBrick/1.3.1 (Ruby/1.9.3/2012-02-16)";
    "X-Request-Id" = 404311fe98d4bf07e27c13171346a593;
    "X-Runtime" = "0.097077";
    "X-Ua-Compatible" = "IE=Edge";
}
2012-12-12 21:46:03.420 fish[30797:11f03] I restkit.network:RKRequest.m:680 Updating cache date for request <RKManagedObjectLoader: 0x7c5c860> to 2012-12-13 02:46:03 +0000
2012-12-12 21:46:03.421 fish[30797:11f03] Data returned: [{"event":{"airTemp":72.1,"amount":1,"created_at":"2012-11-25T01:21:29Z","id":1,"latitude":55.5555,"length":22.0,"longitude":-88.88888,"name":"Grouper","thumbnail":null,"updated_at":"2012-11-25T01:21:29Z","user_id":1}},{"event":{"airTemp":69.1,"amount":2,"created_at":"2012-11-27T16:30:51Z","id":2,"latitude":33.333,"length":36.0,"longitude":124.4555555,"name":"Haddock","thumbnail":null,"updated_at":"2012-11-27T16:30:51Z","user_id":null}}]
2012-12-12 21:46:03.421 fish[30797:11f03] D restkit.network.queue:RKRequestQueue.m:501 Received response for request <RKManagedObjectLoader: 0x7c5c860>, removing from queue. (Now loading 1 of 5)
2012-12-12 21:46:03.422 fish[30797:16707] D restkit.network:RKObjectLoader.m:280 Beginning object mapping activities within GCD queue labeled: org.restkit.ObjectMapping
2012-12-12 21:46:03.422 fish[30797:16707] D restkit.network:RKObjectLoader.m:267 No object mapping provider, using mapping provider from parent object manager to perform KVC mapping
2012-12-12 21:46:03.423 fish[30797:16707] D restkit.object_mapping:RKObjectMapper.m:336 Performing object mapping sourceObject: (
        {
        event =         {
            airTemp = "72.09999999999999";
            amount = 1;
            "created_at" = "2012-11-25T01:21:29Z";
            id = 1;
            latitude = "55.5555";
            length = 22;
            longitude = "-88.88888";
            name = Grouper;
            thumbnail = "<null>";
            "updated_at" = "2012-11-25T01:21:29Z";
            "user_id" = 1;
        };
    },
        {
        event =         {
            airTemp = "69.09999999999999";
            amount = 2;
            "created_at" = "2012-11-27T16:30:51Z";
            id = 2;
            latitude = "33.333";
            length = 36;
            longitude = "124.4555555";
            name = Haddock;
            thumbnail = "<null>";
            "updated_at" = "2012-11-27T16:30:51Z";
            "user_id" = "<null>";
        };
    }
)
 and targetObject: (null)
2012-12-12 21:46:03.423 fish[30797:16707] D restkit.object_mapping:RKObjectMapper.m:275 Found mappable collection at keyPath 'event': (
        {
        airTemp = "72.09999999999999";
        amount = 1;
        "created_at" = "2012-11-25T01:21:29Z";
        id = 1;
        latitude = "55.5555";
        length = 22;
        longitude = "-88.88888";
        name = Grouper;
        thumbnail = "<null>";
        "updated_at" = "2012-11-25T01:21:29Z";
        "user_id" = 1;
    },
        {
        airTemp = "69.09999999999999";
        amount = 2;
        "created_at" = "2012-11-27T16:30:51Z";
        id = 2;
        latitude = "33.333";
        length = 36;
        longitude = "124.4555555";
        name = Haddock;
        thumbnail = "<null>";
        "updated_at" = "2012-11-27T16:30:51Z";
        "user_id" = "<null>";
    }
)
2012-12-12 21:46:03.424 fish[30797:16707] I restkit.core_data:RKInMemoryManagedObjectCache.m:34 Creating thread-local entity cache for managed object context: <NSManagedObjectContext: 0x795c1a0>
2012-12-12 21:46:03.424 fish[30797:16707] I restkit.core_data:RKInMemoryManagedObjectCache.m:50 Caching instances of Entity 'Event' by primary key attribute 'eventId' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:52:00.633

自从我搬到 RestKit 0.20pre4 后就放弃了这个问题，它与 0.10.2 不同

# sql - 如何为某些列保持不变的连续记录合并有效_dt 和过期_dt 时间片？

> ID：13831093
> 
> 赞同：4
> 
> 时间：2012-12-12T00:58:14.823
> 
> 标签：sql, oracle

有人对这个问题有建议吗？我正在尝试使用 oracle SQL 来合并`effective_dt`到`expiration_dt`where 中的值的范围`col_a`，`col_b`并`col_c`保持不变，但仅适用于其中 3 列中的任何一个都没有变化的连续记录。

如果有帮助，可以安全地假设下一个记录（按员工）的生效日期等于上一个记录加上 1 天。

我尝试了`min()`,`max()`和`group by`，但问题是下面的场景将返回 12/1-12/31。然后我尝试了`lead()`函数，但问题是我事先不知道我需要合并多少条记录。

假设我可以将数据转换为以下形式：

```
+----------+--------------+---------------+---------+---------+---------+
| employee | effective_dt | expiration_dt |  col_a  |  col_b  |  col_c  |
+----------+--------------+---------------+---------+---------+---------+
|     0001 | 12/1/2012    | 12/4/2012     | value_a | value_a | value_a |
|     0001 | 12/5/2012    | 12/6/2012     | value_a | value_a | value_a |
|     0001 | 12/7/2012    | 12/10/2012    | value_a | value_a | value_a |
|     0001 | 12/11/2012   | 12/17/2012    | value_a | value_b | value_a |
|     0001 | 12/18/2012   | 12/31/2012    | value_a | value_a | value_a |
+----------+--------------+---------------+---------+---------+---------+ 
```

预期结果：

```
+----------+--------------+---------------+---------+---------+---------+
| employee | effective_dt | expiration_dt |  col_a  |  col_b  |  col_c  |
+----------+--------------+---------------+---------+---------+---------+
|     0001 | 12/1/2012    | 12/10/2012    | value_a | value_a | value_a |
|     0001 | 12/11/2012   | 12/17/2012    | value_a | value_b | value_a |
|     0001 | 12/18/2012   | 12/31/2012    | value_a | value_a | value_a |
+----------+--------------+---------------+---------+---------+---------+ 
```

尝试1：

```
SELECT employee,
  MIN(effective_dt),
  MAX(expiration_dt),
  col_a,
  col_b,
  col_c
FROM
  (SELECT employee, effective_dt, ... FROM table_x, table_y, ... where...
  ) table_a
GROUP BY employee,
  col_a,
  col_b,
  col_c; 
```

尝试2：

```
SELECT employee,
  effective_dt,
  lead(expiration_dt, 1) over (partition BY employee, col_a, col_b, col_c order by effective_dt) expiration_dt,
  col_a,
  col_b,
  col_c
FROM
  (SELECT employee, effective_dt, ... FROM table_x, table_y, ... where...
  ) table_a; 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:14:07.007

如您所说，如果我们可以安全地假设下一条记录等于上一条记录 + 1 天，那么我们可以将这些记录链接起来：

[SQL小提琴](http://sqlfiddle.com/#!4/5b0eb/7)

**Oracle 11g R2 模式设置**：

```
CREATE TABLE t
    (employee int, effective_dt timestamp, expiration_dt timestamp, col_a varchar2(7), col_b varchar2(7), col_c varchar2(7))
;

INSERT ALL 
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '01-Dec-2012 12:00:00 AM', '04-Dec-2012 12:00:00 AM', 'value_a', 'value_a', 'value_a')
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '05-Dec-2012 12:00:00 AM', '06-Dec-2012 12:00:00 AM', 'value_a', 'value_a', 'value_a')
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '07-Dec-2012 12:00:00 AM', '10-Dec-2012 12:00:00 AM', 'value_a', 'value_a', 'value_a')
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '11-Dec-2012 12:00:00 AM', '17-Dec-2012 12:00:00 AM', 'value_a', 'value_b', 'value_a')
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '18-Dec-2012 12:00:00 AM', '19-Dec-2012 12:00:00 AM', 'value_a', 'value_b', 'value_a')
    INTO t (employee, effective_dt, expiration_dt, col_a, col_b, col_c)
         VALUES (0001, '20-Dec-2012 12:00:00 AM', '31-Dec-2012 12:00:00 AM', 'value_a', 'value_a', 'value_a')
SELECT * FROM dual
; 
```

**查询 1**：

```
select employee, min(effective_dt), max(expiration_dt), col_a, col_b, col_c 
  from ( select t.*, 
                case when
                     col_a = lag(col_a) over (partition by employee order by expiration_dt asc)    
                 and col_b = lag(col_b) over (partition by employee order by expiration_dt asc) 
                 and col_c = lag(col_c) over (partition by employee order by expiration_dt asc) 
                then 0 else 1 end start_of_chain 
           from t
  )
 connect by effective_dt = prior expiration_dt + 1  and start_of_chain = 0  
   start with start_of_chain = 1
   group by connect_by_root(effective_dt), employee, col_a, col_b, col_c
order by 2 
```

**[结果](http://sqlfiddle.com/#!4/5b0eb/7/0)**：

```
| EMPLOYEE |               MIN(EFFECTIVE_DT) |              MAX(EXPIRATION_DT) |   COL_A |   COL_B |   COL_C |
--------------------------------------------------------------------------------------------------------------
|        1 | December, 01 2012 00:00:00+0000 | December, 10 2012 00:00:00+0000 | value_a | value_a | value_a |
|        1 | December, 11 2012 00:00:00+0000 | December, 19 2012 00:00:00+0000 | value_a | value_b | value_a |
|        1 | December, 20 2012 00:00:00+0000 | December, 31 2012 00:00:00+0000 | value_a | value_a | value_a | 
```

# android - 方向改变时出现内存不足错误

> ID：13831101
> 
> 赞同：1
> 
> 时间：2012-12-12T00:59:33.373
> 
> 标签：android, memory-leaks, screen-orientation, osmdroid

我有一个使用 osmdroid mapactivity 的应用程序。

每次屏幕方向堆大小都会增加并且经过几次方向更改后，我会收到以下错误：

```
12-12 00:53:08.990: E/dalvikvm-heap(6712): Out of memory on a 262160-byte allocation.
12-12 00:53:08.990: I/dalvikvm(6712): "filesystem" prio=5 tid=46 RUNNABLE
12-12 00:53:08.990: I/dalvikvm(6712):   | group="main" sCount=0 dsCount=0 obj=0x43057e08 self=0x571583c8
12-12 00:53:08.990: I/dalvikvm(6712):   | sysTid=8674 nice=0 sched=0/0 cgrp=apps handle=1487255264
12-12 00:53:08.990: I/dalvikvm(6712):   | schedstat=( 298265664 165380214 301 ) utm=25 stm=4 core=0
12-12 00:53:08.990: I/dalvikvm(6712):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
12-12 00:53:08.995: I/dalvikvm(6712):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:650)
12-12 00:53:08.995: I/dalvikvm(6712):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:389)
12-12 00:53:08.995: I/dalvikvm(6712):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:449)
12-12 00:53:08.995: I/dalvikvm(6712):   at org.osmdroid.tileprovider.tilesource.BitmapTileSourceBase.getDrawable(BitmapTileSourceBase.java:93)
12-12 00:53:08.995: I/dalvikvm(6712):   at org.osmdroid.tileprovider.modules.MapTileFilesystemProvider$TileLoader.loadTile(MapTileFilesystemProvider.java:142)
12-12 00:53:08.995: I/dalvikvm(6712):   at org.osmdroid.tileprovider.modules.MapTileModuleProviderBase$TileLoader.run(MapTileModuleProviderBase.java:241)
12-12 00:53:08.995: I/dalvikvm(6712):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
12-12 00:53:08.995: I/dalvikvm(6712):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
12-12 00:53:08.995: I/dalvikvm(6712):   at java.lang.Thread.run(Thread.java:856)
12-12 00:53:09.020: I/dalvikvm-heap(6712): Clamp target GC heap from 64.436MB to 64.000MB
12-12 00:53:09.050: I/dalvikvm-heap(6712): Forcing collection of SoftReferences for 262160-byte allocation
12-12 00:53:09.095: I/dalvikvm-heap(6712): Clamp target GC heap from 64.436MB to 64.000MB 
```

我有一个包含两个片段的活动，并且这两个片段都扩展了一个初始化 MapActivity 的抽象片段。

我已经阅读了很多其他有同样问题的人的帖子。我最终在抽象片段中实现了以下内容：

```
 @Override
    public void onDestroyView() {
        super.onDestroyView();

        unbindDrawables(con.findViewById(R.id.main_layout));
        System.gc();
    }

    private void unbindDrawables(View view) {
        if (view.getBackground() != null) {
            view.getBackground().setCallback(null);
        }
        if (view instanceof ViewGroup) {
            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
                unbindDrawables(((ViewGroup) view).getChildAt(i));
            }
            ((ViewGroup) view).removeAllViews();
        }
    } 
```

这是我的 onCreateView 初始化 con：

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        con = container;
        return inflater.inflate(R.layout.main_fragment,container, false);
    } 
```

我不确定我还能做什么。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:00:30.503

尝试自己处理屏幕旋转，将以下代码添加到活动中

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

并将以下内容添加到清单文件中的活动标签中

android:configChanges="方向|keyboardHidden|screenSize"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-27T06:20:21.520

始终让操作系统处理您的方向更改！

如果有配置更改（例如方向更改），您的活动将被重新创建。大多数内存泄漏的原因是有一些异步操作持有对您的视图的（隐式/显式）引用，这会阻止您的视图被垃圾收集。例如，如果您使用 CountDownTimer 或非静态内部可运行。

# java - 使用代码构建 HTML

> ID：13831108
> 
> 赞同：0
> 
> 时间：2012-12-12T01:00:15.887
> 
> 标签：java, html, string, stringbuilder

我在这里有一个员工记录，我需要让 if 通过一个函数，该函数会吐出用 HTML 标记很好地格式化的员工记录。

例子

```
staff id = 23422
first name = Herbert
surname = Dominos
department = Purchasing 
```

函数输出类似于

```
<label>staff id</label><div class="some class">23422</div>
<label>First namelabel><div class="some class">Herbert</div>
<label>Surname</label><div class="some class">Dominos</div>
<label>Department</label><div class="some class">Purchasing</div> 
```

似乎只是通过 string 或 stringbuilder 连接它们并不是正确的方法。

有什么建议么？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:07:25.803

也许[Java 反模板语言 (JATL)](http://code.google.com/p/jatl/)会为您工作。它使用流畅的 API 语法进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:36:22.407

我会做这样的事情

```
<label>staff id </label><div class="some class">#staff id#</div>
<label>First namelabel><div class="some class">#First namelabel#</div>
<label>Surname</label><div class="some class">#Surname#</div>
<label>Department</label><div class="some class">#Department#</div> 
```

然后我将使用替换功能将示例#Staff id# 替换为 23422。

快速，肮脏，容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:26:34.873

我会使用 apache [velocity](http://velocity.apache.org/)来实现这一点。

例子：

```
#foreach($staffInfo in $staffList.iterator())
<label>$staffInfo.getStaffId()</label>
#end 
```

您可以尝试类似的方法来构建您的 html 代码。

# css - SASS mixin中的背景位置问题

> ID：13831109
> 
> 赞同：3
> 
> 时间：2012-12-12T01:00:17.227
> 
> 标签：css, sass, background-image, mixins, background-position

我正在创建一个 SASS mixin，它可以让我获取社交媒体图标的精灵表并显示它们，但是当它悬停在背景位置时我遇到了问题，这是 SASS 代码：

```
@mixin social-button($imgurl,$xpos,$ypos,$height,$width) {
  background-image: url($imgurl);
  background-position: $xpos $ypos;
  display: block;
  float: left;
  height: $height;
  width: $width;    

  &:hover {
    background-position: 0px -$height;
  }

  & span {
    position: absolute;
    top: -999em;
  }
} 
```

我的包括：

```
a.facebook {
  @include social-button("../img/social-buttons.png",0px,0px,26px,26px);
} 
```

如果您想查看/使用精灵表，我已将其上传到此处：http: [//i49.tinypic.com/2evtbwp.png](http://i49.tinypic.com/2evtbwp.png)

这也是HTML：

```
<a class="facebook" href="#"><span>Facebook</span></a> 
```

本质上，悬停的 CSS 输出显示如下：

```
a.facebook:hover {
  background-position: -26px;
} 
```

在 Firebug 中显示如下：

```
a.facebook:hover {
    background-position: -26px center;
} 
```

任何帮助都非常感谢，我很困惑我在这一点上做错了什么..谢谢！

PS。我将创建其中的 5 个，所以我不介意创建一个可以为我自动生成的循环，但目前这并不是什么大不了的事，只需要先让悬停工作！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T01:29:54.667

当您将变量更改为负数时，您必须在变量周围添加括号，否则它只会进行数学运算（0px - $height）：

```
background-position: 0px (-$height); 
```

您可能也想修复`0px`.

# c++ - c++ newbie - pthread 将其状态提供给另一个 pthread

> ID：13831110
> 
> 赞同：1
> 
> 时间：2012-12-12T01:00:18.693
> 
> 标签：c++, pthreads

我是 C++ 的新手，正在研究应该是一个非常基本的文件读取然后处理数据功能，我一直坚持能够至少向另一个线程提供“状态”，以便可以使用数据。这可能只是我忽略的一些非常基本的东西 - 可以使用一些洞察力来了解在 c++ 中使用 pthreads。

Bellow 是一些基本的提取代码，可以正常运行，读取文件并提供要处理的数据。另一个将处理数据的线程需要知道这个线程的状态。最好的策略是什么？我试图通过另一个线程的函数请求线程的状态，但收到不正确的响应。

```
Reader::Reader(){

    _threadId = 1; 
    _msg = NONE; // enum NONE, READ, STOP
    active = false;
    pthread_mutex_init(&_mutex, 0);
}

Reader::~Reader(){

    pthread_mutex_destroy(&_mutex);
}

void Reader::read(){

    _msg = READ;
    active = true;

    pthread_create(&_threadId, 0, work, this);
}

void * Reader::work(void *myselfreader){

    Reader * reader = (Reader*)myselfreader;

    reader->loop();

    pthread_exit(0);

    return 0;
}

void Reader::loop(){

    while(active){

            pthread_mutex_lock(&_mutex);

            switch(_msg){

                case READ:

                    // do the reading of the IO file - which works fine                 
                    // once done reading the file - the _msg is set to STOP

                    break;

                case STOP:

                    stopThread();

                    break;

                default:
                        break;
            }

            pthread_mutex_unlock(&_mutex);
        }

    return;
}

void Reader::stopThread(){

    active = false;

    _msg = ENC_NONE;

    pthread_join(_threadId, 0);
}

/*****************/

int Reader::getReaderState(){

    // another thread needs to know the state of this thread
    // 
    return _msg // ??
    return active // ??
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:37:07.673

您的代码中似乎有竞争条件。

您需要`_msg`使用互斥锁保护您的变量。每次需要更新`_msg`变量请求互斥体时，更新变量并关闭互斥体。您需要为读取`getReaderState()`函数做同样的事情 - 获取互斥锁，将变量复制到 temp，释放互斥锁并返回 temp 变量。

为了易于使用且容易出错，您应该创建 getter 和 setter 函数来访问`_msg`将由相同的互斥锁（而不是您已经使用的互斥锁）保护的字段：

```
void setMsg(int msg)
{
    pthread_mutex_lock(&msg_mutex);
    _msg = msg;
    pthread_mutex_unlock(&msg_mutex);
}

int getMsg()
{
    int tmp;
    pthread_mutex_lock(&msg_mutex);
    tmp = _msg;
    pthread_mutex_unlock(&msg_mutex);
    return tmp;
} 
```

# c++ - c ++排序向量的指针错误

> ID：13831113
> 
> 赞同：3
> 
> 时间：2012-12-12T01:00:39.243
> 
> 标签：c++, sorting, stl, vector, runtime-error

我有一个向量 vec，每次在其中放入元素时都需要对其进行排序

所以当我将第一个 Upgrade* 放在向量中时，我没有问题

但是当我将第二个 Upgrade* 放入其中并调用排序例程时，我遇到了运行时错误

这就是我每次插入时放置元素并调用排序的方式

```
std::vector<Upgrade*> stack = getStack();

stack.push_back(element);

std::sort(stack.begin(), stack.end(), CostBenefitUpgradeOrder()); 
```

这是我的比较器

```
struct CostBenefitUpgradeOrder {
    bool operator ()(const Upgrade * u1, const Upgrade * u2) const {

        const UpgradeType upgradeType1 = u1->getUpgradeType();
        const UpgradeType upgradeType2 = u2->getUpgradeType();

        int price1 = PriceUtil::getPrice(upgradeType1);
        int price2 = PriceUtil::getPrice(upgradeType2);

        if (price2 < price1)
            return true;
        else
            return false;
    }
} 
```

这就是错误

![运行时错误](../Images/7c0e4dedffb34a325f7fea0c22036abd.png)

**我注意到它只发生在我在调试模式下执行程序时！**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T01:10:11.533

您的比较功能已损坏。您不能有一个`true`同时返回`u1 < u2`和的谓词`u2 < u1`。

`return u1 < u2;`如果您只需要一些东西进行快速测试，请将 return 语句替换为。

另外，您确定需要使用`vector`? 除非您需要将指针存储在连续的内存中，否则最好使用`std::set`带有适当比较器的代替。将`set`在每次插入/删除后保持元素有序。

此外，由于您使用的是原始指针，因此如果您使用的是分配对象，请`new`确保`delete`在从容器中删除元素之前。更好的是，使用 an`std::set<std::unique_ptr<Upgrade>, CostBenefitUpgradeOrder>`而不必担心删除分配的内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T01:07:51.190

您需要将“严格弱排序”（小于）运算符传递给该 `std::sort`方法，并且该运算符必须是“有效的”。

有效的 operator< 具有以下属性：

*   对于所有人来说![X](../Images/f388c9c90464c3ce13e163688361b658.png)，情况并非如此![X](../Images/f388c9c90464c3ce13e163688361b658.png)< ![X](../Images/f388c9c90464c3ce13e163688361b658.png)（非自反性）。对所有人来说![X](../Images/6eae31fab96ec16a2ab752bfd88349c1.png)，
*   ![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png), 如果![X](../Images/f388c9c90464c3ce13e163688361b658.png)<![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png)则不是 y < x （不对称）。对所有人
*   ![X](../Images/f388c9c90464c3ce13e163688361b658.png), ![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png), and ![z](../Images/fe772ad3d4c3285099eac700e1425018.png), if ![X](../Images/f388c9c90464c3ce13e163688361b658.png)< ![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png)and ![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png)< ![z](../Images/fe772ad3d4c3285099eac700e1425018.png)then ![X](../Images/f388c9c90464c3ce13e163688361b658.png)< ![z](../Images/fe772ad3d4c3285099eac700e1425018.png)(传递性)。对所有人来说![X](../Images/f388c9c90464c3ce13e163688361b658.png)，
*   ![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png), 和![z](../Images/fe772ad3d4c3285099eac700e1425018.png), 如果![X](../Images/f388c9c90464c3ce13e163688361b658.png)与 不可比![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png), 且 与![是的](../Images/5b3757c472816017efd32a4bd87e0df1.png)不可比![z](../Images/fe772ad3d4c3285099eac700e1425018.png), 则不![X](../Images/f388c9c90464c3ce13e163688361b658.png)可比![z](../Images/fe772ad3d4c3285099eac700e1425018.png)(transitivity of incomparability).

您可以看到您的操作员在第一点（`CostBenefitUpgradeOrder(x, x) == true`在您的情况下为 ）（以及大多数其他点）失败。

# c - mt.exe 不显示

> ID：13831114
> 
> 赞同：4
> 
> 时间：2012-12-12T01:00:43.313
> 
> 标签：c, visual-studio, manifest

我试图让我的程序弹出 UAC 并在使用清单文件执行时要求以管理员身份运行。

我正在使用以下命令...

```
mt.exe -manifest hi.exe.manifest -outputresource:hi.exe;1 
```

该命令通过，但是当我实际运行可执行文件时，它并不要求管理员权限。清单文件如下。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
   <ms_asmv2:trustInfo xmlns:ms_asmv2="urn:schemas-microsoft- 
     com:asm.v2">
      <assemblyIdentity version="1.0.0.0"
     processorArchitecture="X64"
     name="hi"
     type="win32"/> 
      <description>Description of your application</description> 
      <ms_asmv2:security>
         <ms_asmv2:requestedPrivileges>
            <ms_asmv2:requestedExecutionLevel level="requireAdministrator" uiAccess="false">
            </ms_asmv2:requestedExecutionLevel>
         </ms_asmv2:requestedPrivileges>
      </ms_asmv2:security>
   </ms_asmv2:trustInfo>
</assembly> 
```

# ruby-on-rails-3.2 - Rails 3.2.8+ 和 MySQL 的一些组合不能很好地一起玩

> ID：13831125
> 
> 赞同：0
> 
> 时间：2012-12-12T01:01:16.497
> 
> 标签：ruby-on-rails-3.2, ruby-1.9.3, mysql2

我们正在从 1.8.7 升级到 Ruby 1.9.3 并尝试将 Rails 从 3.2.1 更新到 3.2.8 或 9。我们的应用程序适用于 Ruby 1.9.3-p327 和 Rails 3.2.1，但作为当我将 Rails 升级到更高版本时，我开始看到 MySQL 错误：

```
(0.2ms)  BEGIN
  SQL (0.5ms)  INSERT INTO `orders` (`cancelled_at`, `completed_at`, `created_at`, `customer_id`, `refunded_at`, `updated_at`, `uuid`, `website_id`, `workflow_state`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?, ?, ?, ?, ?, ?, ?, ?, ?)' at line 1: INSERT INTO `orders` (`cancelled_at`, `completed_at`, `created_at`, `customer_id`, `refunded_at`, `updated_at`, `uuid`, `website_id`, `workflow_state`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
   (0.1ms)  ROLLBACK
Completed 500 Internal Server Error in 194ms

ActiveRecord::StatementInvalid (Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?, ?, ?, ?, ?, ?, ?, ?, ?)' at line 1: INSERT INTO `orders` (`cancelled_at`, `completed_at`, `created_at`, `customer_id`, `refunded_at`, `updated_at`, `uuid`, `website_id`, `workflow_state`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)):
  app/controllers/search_controller.rb:231:in `build_new_order'
  app/controllers/search_controller.rb:432:in `add_to_cart?'
  app/controllers/search_controller.rb:37:in `new' 
```

我们所做的只是一个基本的：

```
@order = Order.create! @website 
```

如果我们只是调用 Order.new 或 Order.create 并检查@order 的有效性，它就会通过（@website 也是有效的）。调用 save!，我们得到 MySQL 错误。我们可以运行相同的 Order.create！在控制台中，它通过了！

此外，一旦我们看到错误，那么整个站点都会出错。我们已经看到了 Workflow 的一些问题，并将其“降级”到 0.8.1。我尝试过不同版本的 MySQL2（目前使用 0.3.11）。我尝试过使用 activerecord-mysql2-adapter ，但网站完全崩溃了。我没有尝试过不同版本的 Paper Trail（目前使用 2.6.4），也许我过于专注于模型，因为它可以在控制台中运行。但是，在我们尝试向购物车中添加一些东西并创建订单之前，控制器确实可以工作。

搜索 web、rails 网站、工作流、mysql2 和堆栈溢出没有发现任何东西。

有没有其他人遇到过类似的事情？任何其他建议将不胜感激。谢谢！

编辑：

3.2.2 的发行说明说“查询缓存检测包括有效负载中的绑定”。所以我搜索了“缓存检测”并找到了这个：

[https://github.com/orslumen/record-cache/issues/21](https://github.com/orslumen/record-cache/issues/21)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:07:21.637

删除记录缓存后，一切都按预期工作。我们只在一个模型上使用它，所以我们没有损失太多性能。奇怪的是，它不在我们的 Order 模型上，而是在我们的 Product 模型上。

# android - 是否可以在不跳过方向更改的情况下在 Android 上播放 HLS 视频？

> ID：13831128
> 
> 赞同：0
> 
> 时间：2012-12-12T01:01:20.543
> 
> 标签：android, http-live-streaming

我想编写将播放 HLS 视频的 Android 应用程序。我为此使用默认的 VideoView 控件：

```
VideoView player = (VideoView) findViewById(R.id.player);
String httpLiveUrl = "http://example.com/playlist.m3u8";

player.setVideoURI(Uri.parse(httpLiveUrl));
player.setMediaController(new MediaController(this));
player.requestFocus();
player.start(); 
```

一切正常，直到您更改设备方向（旋转它）。在这种情况下，Android 将使用 VideoView 实例和下载的 HLS 片段销毁当前活动。将从头开始创建新的活动实例。因此，VideoView (MediaPlayer) 必须建立连接并再次下载 HLS 片段（这需要大量时间）。此外，视频不会从当前位置开始，而是从头开始。

我知道有助于保存/恢复活动状态的活动方法，例如 onSaveInstancestate/onRestoreInstanceState，但我不知道如何序列化 VideoView 以使他通过方向更改。

我什至考虑过用于 MediaPlayer 的 Android 服务......但我认为在视频播放器的情况下这是不好的和不正确的方式。

那么，有人知道吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:34:09.153

你可以 ：

1：通过在清单文件中指定方向来修复方向：

```
 <activity
    android:screenOrientation="landscape">
...
</activity> 
```

2：您可以告诉 android 即使在方向更改后也保持您的应用程序运行。在这种情况下，活动将不会被销毁和重新创建。

```
 <activity
    android:configChanges="orientation">
...
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:57:28.093

将此添加到清单文件中的活动标记中：

```
android:configChanges="orientation|keyboardHidden" 
```

例子：

```
 <activity android:name=".MainActivity"
    android:configChanges="orientation|keyboardHidden"
    android:label="@string/title_activity" /> 
```

这对我有用，但我使用了 MediaPlayer 类。

# asp.net - 删除行后，中继器项目内的文本框失去其文本属性

> ID：13831130
> 
> 赞同：0
> 
> 时间：2012-12-12T01:02:00.453
> 
> 标签：asp.net, data-binding, repeater, viewstate

我有一个中继器，它的数据被绑定在页面加载上。此外，转发器内部的控件是在页面加载时动态创建的（文本框、dropownlist 等）

用户填写文本框，当他想删除转发器中的一行时，他可以删除数据源上的条目（正在从 Web 服务检索数据源）。删除操作后，repeater 被反弹到数据源。

此时，在删除行之后排序的文本框的文本值正在消失。只有在删除行之前的文本框才保护它们的文本值。

例如：我在转发器中有 5 行。我填充了行内的所有文本框。当我删除第 3 行时，第 2 行的文本框文本再次出现，但第 4 行和第 5 行的文本框文本为空。

我认为这是因为视图状态和控件的 id 不匹配而发生的，但是如何防止这种情况并在删除后获取所有文本框的文本？

# performance - 如何将 JUnit 测试用例作为 Maven 构建的一部分？

> ID：13831133
> 
> 赞同：1
> 
> 时间：2012-12-12T01:02:12.367
> 
> 标签：performance, testing, maven, junit

我有现有的 JUnit4 测试用例，我从 Eclipse 运行并作为 Maven 的一部分。现在我希望通过利用它们来进行压力测试。我注意到 Maven 没有将它们打包为构建的一部分。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:50:53.083

这会将测试（及其来源）附加到一个单独的 jar 中：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <executions>
        <execution>
            <id>attach-sources</id>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
        <execution>
            <id>attach-test-sources</id>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
        <execution>
            <id>test-jar</id>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

之后，您可以使用 type 将它们用作依赖项`test-jar`。

# sql - SQL 查询：复杂的内连接和外连接

> ID：13831145
> 
> 赞同：1
> 
> 时间：2012-12-12T01:03:53.133
> 
> 标签：sql, inner-join, outer-join

大家好，我目前正在做一个 SQL 示例项目，试图学习 SQL 的基础知识和一般的内外部连接。

这是我当前的数据库图：

[http://imgur.com/z0Ger](http://imgur.com/z0Ger)

我目前被困在两个不同的查询上，我在编写时遇到了困难。

```
1\. Given a puppy name show all the tricks it knows. 

Include:
Dog id & name
Trick id & name
Date learned & skill level

2\. Given a kennel show all the puppies that have been there to learn a trick.

Include:
Kennel id & name
Date learned & trick id
Dog id & dog name 
```

我真的对这些感到困惑，如果您能帮助我找到正确的答案，我将不胜感激。任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:47:27.310

首先，您在 Junction_Table 和 Tricks 之间缺少一个外键，但是由于您将其他键包含在内，因此我认为您可以解决此问题。

其次，学习日期和技能水平属于联结表，而不是技巧表，因为这些是狗，狗窝和技巧的组合，而不是单独的技巧。

解决了这个问题，第一个给所有狗和技巧的查询是：

```
SELECT  d.Dog_ID
       ,d.Dog_Name
       ,t.Trick_ID
       ,t.Trick_Name
       ,j.Skill_Level
       ,j.Date_Learned
FROM   Dogs d
       INNER JOIN
       Junction_Table j ON d.Dog_ID=j.Dog_ID
       INNER JOIN
       Tricks t ON t.Trick_ID=j.Trick_ID 
```

这些将为您提供每一个至少学会了一个技巧的人所学到的所有技巧。

如果您将 Dogs 和 Junction_Table 之间的 INNER JOIN 更改为 LEFT JOIN，那么您将获得上述所有内容以及没有技巧的狗。

如果您将其更改为 RIGHT JOIN，您将获得具有 1+ 技巧的狗以及所有技巧，包括那些没有狗的技巧。

如果您将其更改为 FULL JOIN，您将从 Dogs and Tricks 获得一切。

如果您将其更改为 CROSS JOIN（并删除了 ON 语句），您将得到一条针对每只狗的线来对抗每一个技巧。

第二个查询我会让你弄清楚。

连接没有什么棘手的 - 从所有表中您需要的字段开始，然后通过连接将它们联系在一起。

# php - JavaScript / PHP：使用 JS 获取客户的月份和日期，将值传递给 PHP 变量

> ID：13831148
> 
> 赞同：0
> 
> 时间：2012-12-12T01:04:14.543
> 
> 标签：php, javascript

我想从客户端的计算机上获取日期和月份，然后将其以两个单独的变量传递给 PHP，这将导致如下所示：

```
$day_num = 11;
$month_num = 12; 
```

我需要 JavaScript 函数和 PHP 函数是单独的文件，并且我需要传递不在 URL 中的值。

我将不胜感激专家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:08:57.583

## Javascript：

如果您使用 jQuery，将其返回到服务器非常 *容易*（如果您不这样做，请参阅：[如何在没有 jQuery 的情况下进行 AJAX 调用？](https://stackoverflow.com/questions/8567114/how-to-make-an-ajax-call-without-jquery)）：

```
<script language="javascript">
var date = new Date(),
    month = date.getMonth(),
    day = date.getDate();

    $.post('path-to-php.php', { day: day, month: month});  
</script> 
```

## PHP：

```
<?php
    var_dump($_POST['day']);
    var_dump($_POST['month']);
?> 
```

## 编辑：

`path-to-php.php`是您的 php 文件的文件名。它可以是绝对的或相对的，具体取决于您的应用程序。如果您想将其发布到同一个文件，您可以使用它而不是`path-to-php.php`：`<?php echo $_SERVER['PHP_SELF'];?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T05:29:45.397

使用 javascript：

```
function executeAjax()  { 
var date = new Date(),
var month = date.getMonth(),
var day = date.getDate();

var url="daymonth.php?month="+month+"&day="+day;
var objX=new XMLHttpRequest();
objX.open("GET",url,false);
objX.send(null);
var response=objX.responseText;

} 
```

**日月.php**

```
<?php
    $day=$_GET['day'];
    $month=$_GET['month'];
?> 
```

# java - 对数算法

> ID：13831150
> 
> 赞同：42
> 
> 时间：2012-12-12T01:04:41.380
> 
> 标签：java, algorithm, math, logarithm

我需要以某种精度评估任何底数的对数，这并不重要。有这个算法吗？我用Java编程，所以我对Java代码很好。

[如何快速找到二进制对数？（充其量是 O(1)）](https://stackoverflow.com/questions/2668248/how-to-find-a-binary-logarithm-very-fast-o1-at-best)也许能够回答我的问题，但我不明白。可以澄清一下吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-12T01:07:20.597

使用此身份：

> log [b] (n) = log [e] (n) / log [e] (b)

其中`log`可以是任何底数的对数函数，`n`是数，`b`是底数。例如，在 Java 中，这将找到 256 的以 2 为底的对数：

```
Math.log(256) / Math.log(2)
=> 8.0 
```

[`Math.log()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#log(double))顺便说一句，使用 base `e`。还有[`Math.log10()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#log10(double))，它使用 base `10`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-01T03:06:13.203

我知道这已经很晚了，但这可能对某些人有用，因为这里的问题是精确的。这样做的一种方法本质上是实现一个寻根算法，该算法从它的基础上使用您可能想要使用的高精度类型，包括简单的 +-x/ 操作。

我建议使用牛顿法，因为它需要的迭代次数相对较少，而且收敛性很好。对于这类应用程序，我相信可以公平地说，只要实现了良好的输入验证，它将始终提供正确的结果。

考虑一个简单的常数“a”，其中 ![log_b(x) = a](../Images/3bed7394e639d478349e094e9a9ecf02.png)

如果寻求解决 a 以使其服从，则 ![x - b^a = 0](../Images/9e124a53b980517134a96e86949ed90b.png)

我们可以迭代地使用[牛顿法](https://en.wikipedia.org/wiki/Newton%27s_method)在任何指定的容差内找到“a”，其中每个第 i 个迭代可以通过下式计算 ![a_i = a_{i-1} - \frac{x - b^a}{-ab^{a-1}}](../Images/0aa8fa74523ede72f9e0e078fbe7b506.png)

分母是

![-ab^{a-1} = \frac{\partial}{\partial a}](../Images/c478a83036249dc75a090079a9390c99.png),

因为这是函数的一阶导数，这是牛顿法所必需的。一旦解决了这个问题，“a”就是“a = log,b(x)”问题的直接答案，可以通过简单的 +-x/ 操作获得，所以你已经可以开始了。“等等，那里有力量？” 是的。如果您可以依靠自己的幂函数足够准确，那么继续在那里使用它就没有问题。[否则，您可以使用这些方法](https://www.wikihow.com/Solve-Decimal-Exponents)将电源操作进一步分解为一系列其他+-x/操作将幂上的任何十进制数简化为两个整数幂运算，可以通过一系列乘法运算轻松计算。这个过程最终会给你留下 nth-roots 来解决，你也可以用 Newton 方法找到它。如果您确实走那条路，则可以将其用于牛顿法

![\frac{\partial (\sqrt[b]{x})}{\partial x} = \frac{\sqrt[b]{x}}{bx}](../Images/8a09463722196a37b7cd096b71ba41f9.png)

如您所见，必须递归求解，直到达到 b = 1。

呸，但是，是的，就是这样。这是您可以通过确保在整个过程中仅使用 +-x/ 操作来解决问题的方法。下面是我在 Excel 中解决 log,2(3) 的快速实现，与软件原始功能给出的解决方案相比。正如你所看到的，我可以通过监控优化函数给我的内容来不断完善“a”，直到达到我想要的容差。在此，我使用 a=2 作为初始猜测，您可以使用它并且在大多数情况下应该没问题。

![牛顿法求解对数运算](../Images/15087cdba8c6969f71be225918fac446.png)

# libgit2sharp - 提交树包含完整的工作树

> ID：13831154
> 
> 赞同：-1
> 
> 时间：2012-12-12T01:05:23.247
> 
> 标签：libgit2sharp

我试图检索提交特定文件的最后一次提交（类似于“git log foo.cc”）。获取所有提交并通过它们。在提交树中寻找文件。问题是所有提交都包含我感兴趣的文件。提交树是否假设包含仅提交的文件，还是假设树包含提交时的完整树？

如果树应该是满的：我怎么知道文件（TreeEntry）是否在特定的提交中被修改？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:18:27.440

在 git 中，每个提交都包含整个存储库的表示状态。更多信息请看[这里](http://git-scm.com/book/en/Getting-Started-Git-Basics)。段落快照没有差异清楚地说明了为什么做出这种选择。请注意，如果文件在两次提交之间没有更改，则最后一次提交仅包含指向上一次提交中文件的指针。您可以比较两个连续提交的指针以发现差异。另一种方法是使用 Edward Thomson 的评论中提到的差异工具。

# jekyll - 杰基尔厨师食谱

> ID：13831158
> 
> 赞同：1
> 
> 时间：2012-12-12T01:06:04.180
> 
> 标签：jekyll, chef-infra, chef-recipe

在某些方面，这是厨师问题的开始。但是，我正在尝试创建一个简单的方法来从 github 签出我的 jekyll 代码，然后运行 ​​jekyll 在本地构建它。我还没有开始担心让 nginx 配置运行，但我已经尝试了大约 100 种不同的“before_migrate”脚本排列，还没有找到一种方法将 jekyll 加载到可用的 gem 中或加载到路径中做一个`command "jekyll ..."`

这是目前的配方：

```
include_recipe "git"

application "corpsite" do
  path "/opt/tubularlabs/corpsite"
  repository "git@github.com:Tubular/corpsite.git"
  revision "master"

  deploy_key <<EOF
-----BEGIN RSA PRIVATE KEY-----
...
-----END RSA PRIVATE KEY-----
EOF

  before_migrate do
    execute 'Deploy Jekyll blog' do
      chef_gem "jekyll" do
        action :install
      end

      require "jekyll"

      command "jekyll"
      action :run
    end
  end
end 
```

更新：

事实证明，这个问题根本不是配方问题，而是其中一个 HTML 文档包含一个 UTF-8 字符，并且 jekyll 正在运行，`LC_ALL=C`因此令人讨厌。这当然是我尝试写的第一个食谱，这并没有帮助。

出于历史原因，这是最终脚本

```
before_migrate do
  chef_gem "jekyll"

  execute 'Deploy Jekyll blog' do
    cwd  release_path
    environment ({"LC_ALL" => "en_US.UTF-8"})
    command "jekyll"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:45:33.697

我已经安装了 gems 并且像这样之前需要它们

```
gem_package "nokogiri" do
  action :nothing
end.run_action(:install)

gem 'nokogiri'
require 'nokogiri' 
```

希望这对你有用（用 jekyll 尝试过并且有效）

# android - 具有整数状态的 Android 自定义选择器

> ID：13831161
> 
> 赞同：6
> 
> 时间：2012-12-12T01:06:21.003
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:app="http://schemas.android.com/apk/res/com.example.app">
    <item app:remainingUse="2" android:drawable="@drawable/blabla2" />
    <item app:remainingUse="1" android:drawable="@drawable/blabla1" />
    <item app:remainingUse="0" android:drawable="@drawable/blabla0" />
    <item android:drawable="@drawable/blabla3" />
</selector> 
```

是否可以在上面的自定义选择器中使用整数值作为控制状态？

（remainingUse 是 attrs.xml 中定义的自定义整数变量）

# c - 如何使用 for() 表达式枚举循环链表？

> ID：13831162
> 
> 赞同：2
> 
> 时间：2012-12-12T01:06:40.673
> 
> 标签：c, list, collections, linked-list, containers

我经常在 C 中使用线性链表结构

```
typedef struct _node {
    ...node guts...
    struct _node *next
} node; 
```

和枚举成语

```
for (node *each = headNode; each != NULL; each = each->next) 
```

我现在处于一种情况，循环列表对我很有吸引力（例如，最后一个节点的下一个节点设置为 headNode）。天真地，我以为我会使用类似于那里的`for`表达式的东西，而且我盯着它看的次数越多，我想我已经说服自己你不能用循环链表做这样的事情。

似乎无论我为结束条件想出什么样的表达式，我都会遇到一个基本问题，即我希望所说的条件在第一次遇到相同节点时评估为真，第二次为假。我可以做一些有循环副作用的事情：

```
for (BOOL traversed = FALSE, node *each = headNode;
    traversed && each != headNode;
    traversed = TRUE, each = each->next) 
```

但这肯定会失去空终止列表方法的优雅/简单性。这么晚了，有什么逻辑技巧让我无法理解吗？

显然我可以使用 while() 构造，也许这是唯一的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T04:00:34.087

假设如下：

*   空列表意味着起点为 NULL。
*   最后一个节点将是`next`指针引用您的起点的节点，包括`next`指针自引用的单节点列表。
*   NO`next`指针为 NULL。

然后以下将使用三次表达式作为增量步骤来执行您想要的操作。

```
// node* start comes from "somewhere'
for (node *p=start; p; p = (p->next==start ? NULL : p->next))
{
    // do something with p
} 
```

注意：`p`当它以一种或另一种方式退出时将为 NULL；`start`将保持不变，并且`start`可以接受 NULL，就像单自引用节点一样。

也就是说，我会使用 while 循环来执行此操作，但是由于您特别要求使用 for 循环，因此您得到了 =P。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:34:28.653

正如您已经指出的那样，任何“当前”指针都将简单地循环遍历整个列表，第二次与第一次没有什么不同。

因此，您必须使用其他一些信息。由于您承认最简单/最小的附加变量布尔值太复杂或不优雅，因此可以推断出这是无法完成的。

...除非您已经使用了一些额外的数据，否则说一个最初为 null 的“prev”指针（在这种情况下，`traversed`可以使用与您的示例非常相似的东西）。

为了记录，我会使用 do...while：

```
struct _node *node = head;
do {
    ...
    node = node->next;
} while (node != head); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:11:19.473

```
p = (pointer to some node)
pfirst = p
while true:
    do whatever with node (p)...
    p = p->next
    if (p==pfirst)  break 
```

请注意，这适用于一个元素列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T01:11:28.730

以下重新安排的循环看起来并不太糟糕：

```
for (node * n = head; ; )
{
    // process n

    if ((n = n->next) == head) { break; }
} 
```

顺便说一句，这只适用于非空列表。无论您的空虚概念是什么，都应该作为初始检查添加 - 除非您通过使用*虚拟*头节点来避免该问题（以便空列表包含一个`n`带有的节点`n == head == n.next`，在这种情况下，您实际上并不想打印虚拟头节点完全可以使用真正的`for`循环（只需将上述条件放回循环语句中）！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T01:15:12.457

我建议不要只是循环链条。它本身并不美丽。你如何检查你没有在链的第二个元素处循环等等？

如果我们有 a 的概念，`head`那么我们应该在每个节点中保存一个指向 a 的指针，`head`或者让它成为静态的。此外，我们应该有特殊的标志，而不是循环到头部。

# javascript - NodeJS 'http' 对象应该有一个名为 get() 的方法，但它在哪里？

> ID：13831163
> 
> 赞同：0
> 
> 时间：2012-12-12T01:06:58.787
> 
> 标签：javascript, node.js, http, http-request

我想在我的控制台中看到“得到响应”或“得到错误”。

[我一直在尝试使用http.get()](http://nodejs.org/docs/v0.8.15/api/http.html#http_http_get_options_callback)执行 HTTP 请求，但尝试时出现以下错误。

```
D:\wamp\www\Chat\server\test.js:19
http.get("http://google.com", function(res) {
     ^
TypeError: Object #<Server> has no method 'get'
    at Object.<anonymous> (D:\wamp\www\Chat\server\test.js:19:6)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

这是完整的 test.js：

```
var http = require('http').createServer(handler);

var fs = require('fs');

http.listen(9090);

function handler(req, res) {
    fs.readFile(__dirname + '/index.html', function(err, data) {
        if (err) {
            res.writeHead(500);
            return res.end('Error loading index.html');
        }

        res.writeHead(200);
        res.end(data);
    });
}

http.get("http://google.com", function(res) {
    console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
    console.log("Got error: " + e.message);
}); 
```

`node --version`在cmd中执行返回`v0.8.15`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:14:23.553

您正在调用`get()`您创建的服务器，而不是 http 对象：

```
var http = require('http').createServer(handler); 
```

你的http应该是：

```
var http = require('http'); 
```

那么你可以使用`http.get();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:17:27.987

该`http`模块确实有一个顶级`get`方法，但是您的变量`http`是对一个实例的引用，`http.Server`而不是对模块本身的引用。服务器没有发出客户端请求的方法。将前几行更改为

```
var http = require('http');

var fs = require('fs');

http.createServer(handler).listen(9090); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T01:18:20.693

您的问题是您要求 httpServer 进行获取，而不是 http 本身！如果您这样做，get 方法将起作用：

```
var http = require('http');

http.get("http://google.com", function(res) {
    console.log("Got response: " + res.statusCode);
}).on('error', function(e) {
    console.log("Got error: " + e.message);
}); 
```

这不需要创建服务器。

# git - OSX 上的 Git 挂在每个命令上：如何修复它？

> ID：13831165
> 
> 赞同：4
> 
> 时间：2012-12-12T01:07:13.920
> 
> 标签：git

我正在运行 mac osx lion。

我的问题是在我输入每个命令后 git 挂起。

如果我输入`git`然后我得到`Usage: git credential-osxkeychain <get|store|erase>`

当我尝试输入其他内容时，例如`git status`终端只是挂起，但是一旦我再次按 Enter 键，它就会返回到正常的终端提示符，但命令永远不会通过。

我如何让 git 工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:42:42.180

似乎与您安装 git 的特定方法一样，您可能需要遵循以下说明： [https ://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)

```
# Test for the cred helper
git credential-osxkeychain

# Download the helper
curl -s -O \
  http://github-media-downloads.s3.amazonaws.com/osx/git-credential-osxkeychain

# Fix the permissions on the file so it can be run
chmod u+x git-credential-osxkeychain

# Now you need to install the helper into the 
# same directory where Git itself is installed.

# Find where git is installed
which git

# Move the file to the path `which git` returned so git can access it
sudo mv git-credential-osxkeychain /usr/local/git/bin/

# Set git to use the osxkeychain credential helper
git config --global credential.helper osxkeychain 
```

就个人而言，我只是使用[`homebrew`](http://mxcl.github.com/homebrew/)它，它就像`brew install git`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-07T01:47:09.900

我遇到过同样的问题。我相信 Jdi 的答案已经过时，因为它对我不起作用。

我的解决方案是重新安装 git

```
brew uninstall git
brew install git
git config --global credential.helper osxkeychain
git push 
```

Git 提示我输入我输入的用户名和密码。为了检查它是否有效，我再次运行 git push 并且它没有要求我提供凭据，世界再次一切都很好:)。

# graph-databases - 在 Gremlin 的用户定义步骤中传递参数的奇怪结果

> ID：13831169
> 
> 赞同：1
> 
> 时间：2012-12-12T01:07:30.953
> 
> 标签：graph-databases, gremlin

我创建了一个名为的用户定义步骤`otherV`，它从一条边 ( `e`) 开始，采用单个 Vertex 参数（要么 要么`e.inV`）`e.outV`，然后输出该边上的*另一个顶点。*

```
Gremlin.defineStep('otherV', [Edge, Pipe], {Vertex v -> _().bothV.filter{!v.equals(it)}}) 
```

我有`g=TinkerGraphFactory.createTinkerGraph();`

当我像这样传递参数顶点时，该`otherV`步骤会给出正确的结果：

```
g.v(1).bothE('knows').otherV(g.v(1)).path{it.name}{it.label}
==>[marko, knows, vadas]
==>[marko, knows, josh] 
```

`x`但是，当我第一次在一个步骤中将参数 vertex 分配给一个变量（例如） `sideEffect`，然后`x`作为参数传递给我的步骤时，它会失败并显示 ERROR `No such property: x for class: groovysh_evaluate`。

```
g.v(1).sideEffect{marko=it}.bothE('knows').otherV(marko).path{it.name}{it.label}
No such property: marko for class: groovysh_evaluate 
```

我做错了什么？

* * *

`otherV`这是自定义步骤应该如何工作的简单说明：

```
// g is the TinkerGraph
marko = g.v(1); vadas = g.v(2); 
edge = g.e(7); // e[7][1-knows->2]

gremlin> edge.otherV(marko).map
==>{name=vadas, age=27}

gremlin> edge.otherV(vadas).map
==>{name=marko, age=29} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:58:02.500

看起来问题与闭包内变量的范围有关。我已经重组了你的 defineStep 以希望能捕捉到你所追求的：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()                                                                                     
==>tinkergraph[vertices:6 edges:6]
gremlin> Gremlin.defineStep('otherV', [Vertex, Pipe], {l -> _().sideEffect{x=it}.bothE(l).bothV.filter{!x.equals(it)}})                          
==>null
gremlin> g.v(1).otherV("knows").path{it.name}{it.label}
==>[marko, knows, vadas]
==>[marko, knows, josh] 
```

这似乎也是一种更简洁的方式来定义您的自定义步骤。

* * *

这是 otherV 步骤的另一种方法，它采用任意边并输出另一个顶点：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()                                  
==>tinkergraph[vertices:6 edges:6]
gremlin> Gremlin.defineStep('otherV', [Edge, Pipe], {v -> l=[v];_().bothV.except(l).gather.transform{it.size()>1?null:it[0]}})
==>null
gremlin> g.e(11).otherV(g.v(3))
==>v[4]
gremlin> g.e(11).otherV(g.v(4))
==>v[3]
gremlin> g.e(11).otherV(g.v(5))
==>null 
```

有人可能会想出一个更好的方法来做到这一点，但基本上我意识到仅仅评估 defineStep 中来自 bothV 的顶点是否与传入的相反是不够的，因为它可能既不匹配头部也不匹配尾巴。基本上，我使用 except() 来获取传入的顶点的相反顶点，然后将不匹配的任何内容收集到列表中，然后检查列表以查看大小是否大于 1。如果是，则表示传入的顶点既不在边的头部也不在尾部（我返回 null），否则列表中的单个顶点是相反的顶点。

# c# - 如何在 UML 中表示索引或参数化的属性？

> ID：13831170
> 
> 赞同：2
> 
> 时间：2012-12-12T01:07:30.767
> 
> 标签：c#, java, parameters, uml, indexer

如何在 UML 中表示索引或参数化的属性？

例如，如何反转以下`Java`代码：

```
 class MyClass {

       Object getValue(String key);
       void setValue(String key, Object value);

 } 
```

一方面我可以简单地描述它

![在此处输入图像描述](../Images/cb3e8a9cc931e878fae7a671f9e03391.png)

但这不会表明这两种方法是相关的。

另一方面，我可以描述它

![在此处输入图像描述](../Images/1597abfb67a7457b46f3901fa360ca15.png)

但这将隐藏一个事实，即一个值的多个实例由 key 参数命名。

以下`C#`代码会出现类似的问题：

```
class MyClass
{
    public string this[int i]
    {
        get
        {
        }
        set
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:32:58.240

没有一个很好的答案，因为这个类实际上是一个字典/哈希。您可以在此处找到有关您可以选择的选项的讨论：

[如何在 UML 中表示 .NET 字典类型？](https://stackoverflow.com/questions/11689672/how-to-represent-a-net-dictionary-type-in-uml) 或者可能是这个（如引用的）： [如何在 UML 类图中描述包含的映射？](https://stackoverflow.com/questions/1192606/how-to-describe-a-contained-map-in-uml-class-diagram)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:57:36.493

如果我理解，您现在关心您的类的实例（每个键/值的实例）。实例以冒号为前缀。要使用您的示例，它们可能看起来像 MyClass:MyInstance

# php - “加入”查询的 ECHO 结果

> ID：13831174
> 
> 赞同：1
> 
> 时间：2012-12-12T01:08:22.237
> 
> 标签：php

我没有成功显示查询结果。我在终端中使用 mysql 客户端检查了查询，并且数据如我所愿。但是，我似乎无法让 php 正确显示数据。我想要所有行的用户名和用户名 comment_copy 下面。这是我从 php 手册中获得的编码，但它不起作用。任何建议将不胜感激。

```
$query2 = "SELECT u.username, c.comment_copy FROM comments AS c
           INNER JOIN userlogin AS u USING (user_id) 
           WHERE blog_id = 1 AND c.comment_archived = 0"; 
$result2 = mysql_query($query2);

if(!$result2)  die ("Database access failed: " . mysql_error());
/*$contents = mysql_num_rows($result2);*/

while ($content = mysql_fetch_assoc($result2)); {
    echo $content['username'] ;
    echo $content['comment_copy']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:10:46.780

```
while ($content = mysql_fetch_assoc($result2)); { 
```

这是一个空循环，后面跟着一个块；所以所有的行都将被读取并且没有对它们做任何事情，然后你会尝试`echo`从 中获取值`false`，这不会做任何事情。取出分号：

```
while ($content = mysql_fetch_assoc($result2)) { 
```

# android - 改变android中活动的焦点

> ID：13831177
> 
> 赞同：0
> 
> 时间：2012-12-12T01:08:36.960
> 
> 标签：android

我在 android 中使用以对话框为主题的活动来显示来自应用程序上下文的弹出窗口。该对话框有一个透明的主题，但问题是我希望底层活动具有焦点而不是弹出窗口，尽管弹出窗口必须是可见的。我如何在android中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:13:06.473

我认为您必须使用 Fragment 并使其看起来像一个弹出对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:17:30.673

您不能在活动之间切换焦点。当时只有一项“焦点”活动，并且是当时正在显示的一项活动。透明背景并不意味着您可以访问下面的活动。

如果我没有弄错，您希望能够在屏幕上显示“对话框”的同时与活动的控件进行交互。Android 的任何类型的 Dialog 类都无济于事，因为它们会转移焦点。不太确定 PopupWindow，但我猜这将与文档中所说的[“出现在当前活动之上”相同。](http://developer.android.com/reference/android/widget/PopupWindow.html)

您将不得不在您的活动中使用 RelativeLayout/FrameLayout 创建一个自定义对话框。

# java - 强制上界通配符的类型？

> ID：13831178
> 
> 赞同：2
> 
> 时间：2012-12-12T01:08:52.707
> 
> 标签：java, generics

我有一个具有多个上限通配符的变量，如下所示：

```
private Map< Class< ? extends MyClass1 >, List< ? extends MyClass2< ? extends MyClass3, ? extends  MyClass1> > > _variableName; 
```

有没有办法强制`? extends MyClass1`Class 类的 Type 和 MyClass2 类的第二个参数的绑定值相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:13:34.163

是的：

```
 public class Foo<T extends MyClass1> {
        private Map< Class<T>, List<? extends MyClass2<? extends MyClass3, T>>> bar;
        ...
    } 
```

您也可以使用通用方法来执行此操作。这取决于您要在哪里做出保证（以及在哪里实例化 Map）、定义类或调用实例化此 Map 的方法时。

更新：

为了回应（正确的）观察，这张地图将只包含一个元素，也许提问者已经想到了这一点：

```
 public class Foo {
        private Map<Class<? extends MyClass1>, List<? extends MyClass2<? extends MyClass3, ? extends MyClass1>>> bar;

        public <T extends MyClass1> void add(Class<T> myClass, List<? extends MyClass2<? extends MyClass3, T>>> myList) {
            bar.put(myClass, myList);
        }

        ...
    } 
```

假设这是将元素添加到您的私有地图的唯一方法，则可以确保类型始终匹配。

# c++ - 线程构建块与 pthread 相结合

> ID：13831181
> 
> 赞同：1
> 
> 时间：2012-12-12T01:09:13.107
> 
> 标签：c++, parallel-processing, pthreads, openmp, tbb

我有一个包含需要处理的元素的队列。我想并行处理这些元素。这将是需要同步的每个元素的一些部分。在任何时间点都可以有最大**num_threads 个**正在运行的线程。

我将提供一个**模板**，让您了解我想要实现的目标。

```
queue q

process_element(e)
{
    lock()
    some synchronized area
    // a matrix access performed here so a spin lock would do
    unlock()
    ...
    unsynchronized area
    ...
    if( condition )
    {
        new_element = generate_new_element()
        q.push(new_element) // synchonized access to queue
    }
}

process_queue()
{
    while( elements in q ) // algorithm is finished condition
    {
         e = get_elem_from_queue(q) // synchronized access to queue
         process_element(e)
    }
} 
```

**我可以用**

*   线程
*   开放式
*   英特尔线程构建块

**我遇到的主要问题**

*   确保在任何时候我都有最大**num_threads**运行线程
*   用于队列的轻量级同步方法

我的计划是 intel tbb concurrent_queue 用于队列容器。但是，我可以使用 pthreads 函数（互斥体、条件）吗？让我们假设这有效（它应该）。那么，如何使用 pthreads 在某个时间点拥有 max num_threads 呢？我想创建一次线程，然后在一个元素是进程之后，访问队列并获取下一个元素。但是，如果它更复杂，因为我不能保证如果队列中没有元素，算法就完成了。

**我的问题**

在我开始实施之前，我想知道是否有一种简单的方法可以使用 intel tbb 或 pthreads 来获得我想要的行为？更精确地并行处理队列中的元素

**注意：**我尝试使用任务但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:05:43.250

首先，pthreads 为您提供了难以摆脱的可移植性。从您的问题来看，以下内容似乎是正确的 - 如果这些不正确，请告诉我们，因为答案将会改变：1）您有一个运行代码的多核处理器 2）您想要由于 (1)，线程数不超过**num_threads**

假设上述情况属实，以下方法可能适合您：

1.  使用 pthread_create创建**num_threads 个pthread**
2.  （可选）将每个线程绑定到不同的核心
3.  q.push(new_element) 以原子方式将 new_element 添加到队列中。pthreads_mutex_lock 和 pthreads_mutex_unlock 可以在这里为您提供帮助。这里的例子：http: [//pages.cs.wisc.edu/~travitch/pthreads_primer.html](http://pages.cs.wisc.edu/~travitch/pthreads_primer.html)
4.  使用 pthreads_mutexes 使元素出队
5.  终止是棘手的 - 一种方法是在队列中添加一个 TERMINATE 元素，它在出队时会导致出队者排队另一个 TERMINATE 元素（用于下一个出队者）然后终止。您最终会在队列中得到一个额外的 TERMINATE 元素，您可以通过在所有线程完成后让一个命名线程将其出列来删除它。

根据您从队列中添加/删除元素的频率，您可能希望使用比 pthread_mutex_... 更轻的东西来使元素入队/出队。这是您可能想要使用更特定于机器的构造的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:07:39.680

我的建议是看看`tbb::parallel_do`。它旨在并行处理来自容器的元素，即使容器本身不是并发的；ie`parallel_do`可以在`std::queue`没有任何用户同步的情况下正常工作（当然，您仍然需要保护内部的矩阵访问`process_element()`。此外，`parallel_do`您可以动态添加更多工作，这看起来就像您需要的那样，`process_element()`创建并向工作队列（唯一要注意的是新添加的工作将立即处理，不像放入队列会推迟处理直到所有“旧”项目之后）。此外，您不必担心终止：`parallel_do`将自动完成一旦处理了所有初始队列项目和动态创建的新项目。

但是，如果除了计算本身之外，工作队列可以同时从另一个源（例如，从 I/O 处理线程）馈送，则`parallel_do`不合适。`parallel_pipeline`在这种情况下，查看或者更好的是 TBB 流程图可能是有意义的。

最后，应用程序可以使用 TBB 控制活动线程的数量，尽管这不是推荐的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:33:31.800

TBB 与其他线程包兼容。

TBB 还强调可扩展性。因此，当您将程序从双核移植到四核时，您无需调整程序。通过数据并行编程，程序性能会随着您添加处理器而提高（扩展）。

Cilk Plus 也是另一个提供良好结果的运行时。

www.cilkplus.org

由于 pThreads 是一个低级线程库，因此您必须决定在应用程序中需要多少控制，因为它确实提供了灵活性，但在程序员工作量、调试时间和维护成本方面的成本很高。

# ios - 使用 Facebook IOS SDK 共享到提要时更改 defaultAudience

> ID：13831188
> 
> 赞同：1
> 
> 时间：2012-12-12T01:10:21.227
> 
> 标签：ios, facebook

使用 IOS SDK for Facebook (3.1) ，我发现一旦我设置了我的项目，我就无法更改默认受众。

例如，我将我的测试项目设置为发布到“Only Me”。它工作正常。我正在研究这个例子，做出改变，我从观众“只有我”开始。

[http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)

然后我安排拨打以下电话：

```
 [FBSession.activeSession
         reauthorizeWithPublishPermissions:
         [NSArray arrayWithObject:@"publish_actions"]
         defaultAudience:FBSessionDefaultAudienceFriends
         completionHandler:^(FBSession *session, NSError *error) {
             if (!error) {
                 // If permissions granted, publish the story
                 NSLog (@"Here goes nothing");
                 [self publishStory];
             }
         }]; 
```

这应该将故事发布到 DefaultAudienceFriends。但是，它会继续向 Only Me 发布。

这不应该工作吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:04:34.380

好的，这是我想出的答案，它解决了我的特殊需求。我在 Facebook 中更改了应用程序的隐私设置：

[http://www.facebook.com/settings?tab=applications](http://www.facebook.com/settings?tab=applications)

想想看，这是有道理的。我，作为这个应用程序的用户（我碰巧创建了它，但这可能不相关），正在指定它代表我发布时显示的行为。

所以我很高兴，因为现在我可以在我的应用程序上工作，自由地测试它，而不会打扰任何人。当我准备好时，我可以将其更改为更广泛地发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:27:01.330

在授权流程中，您设置了默认受众，在您的情况下为“只有我”。既然您的应用程序具有尝试重新授权的权限，则可能什么都不做，除非您可能注销并重新登录。您可以尝试做的是将您想要的受众作为 post 参数的一部分传递。

因此，根据示例，假设您想要“只有我”，您将添加：

```
[self.postParams setObject:@"{'value':'SELF'}",
                        forKey:@"privacy"]; 
```

如果你想要“朋友”，你会使用：

```
[self.postParams setObject:@"{'value':'ALL_FRIENDS'}",
                        forKey:@"privacy"]; 
```

# jaxb - @XmlDiscriminatorNode/@XmlDecriminatorValue 在 WebLogic Server 上不起作用

> ID：13831189
> 
> 赞同：5
> 
> 时间：2012-12-12T01:10:24.917
> 
> 标签：jaxb, eclipselink, weblogic-10.x, moxy

以下是我用于在 WebLogic 10.3.2 版本上使用 MOXy JAXB 转换创建子类的类。我正在使用 EclipseLink 2.4.1 MOXy 来生成 XML。我无法在以下代码中生成类型属性。如果我在这里做错了什么，请告诉我。

我正在使用 EclipseLink MOXy 2.4.1 和 WebLogic 10.3.2，并且 MOXy 2.4.1 在 WebLogic 中配置

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;

@XmlAccessorType(XmlAccessType.PROPERTY)
@XmlDiscriminatorNode("@type")
public abstract class BaseEntity {

    private String firstName;
    private String lastName;

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

} 
```

**子类**

```
package forum13831189;

import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlDiscriminatorValue("xyz")
public class XyzEntity extends BaseEntity {

    public XyzEntity() {
        super();
    }

} 
```

**另一个子类**

```
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorValue;

@XmlDiscriminatorValue("Abc")
public class AbcEntity extends BaseEntity {
} 
```

**RESTful Web 服务类：**

```
@GET
@Path("/xyz")
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public Representation getAccount() throws CPAException {
    Representation rep = new Representation();
    BaseEntity entity = new XyzEntity();
    entity.setFirstName("first-name");
    entity.setLastName("last-name");
    rep.setEntity(entity);
    return rep;
}

@XmlRootElement
static class Representation {
    private BaseEntity entity;

    public BaseEntity getEntity() {
        return entity;
    }

    public void setEntity(BaseEntity entity) {
        this.entity = entity;
    }
} 
```

以上正在生成以下 XML。

```
<representation>
     <firstName>first-name</firstName>
      <lastName>last-name</lastName>
 </representation> 
```

上面没有生成属性类型。

* * *

非常感谢。是的，我错过了上面的 jaxb.properties。此外，是的，当我使用 PUT 或 POST 时，当反序列化 XML 时，如果不存在 @XmlSeeAlso，则无法创建子类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:50:20.073

有几个项目可能会导致您出现问题。

**基础实体**

默认情况下，JAX-RS 实现`JAXBContext`在服务方法的返回类型或参数上创建一个，在本例中为`Represenatation`。在处理域模型时，JAXB impl 还将引入引用类型，例如`BaseEntity`. 它不能自动引入子类，因此我们可以使用`@XmlSeeAlso`注释来引用它们。

```
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlDiscriminatorNode;

@XmlAccessorType(XmlAccessType.PROPERTY)
@XmlDiscriminatorNode("@type")
@XmlSeeAlso({AbcEntity.class, XyzEntity.class})
public abstract class BaseEntity {

    private String firstName;
    private String lastName;

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

} 
```

**jaxb.properties**

此外，由于`@XmlDescriminatorNode`/`@XmlDescriminatorValue`是 MOXy 扩展，您需要确保将 MOXy 指定为您的 JAXB 提供程序。这是通过`jaxb.properties`使用以下条目添加与域模型在同一包中命名的文件来完成的。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是一个模拟 RESTful 服务功能的独立示例。

```
import javax.xml.bind.*;
import javax.xml.bind.annotation.XmlRootElement;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Representation.class);

        Representation rep = new Representation();
        BaseEntity entity = new XyzEntity();
        entity.setFirstName("first-name");
        entity.setLastName("last-name");
        rep.setEntity(entity);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(rep, System.out);
    }

    @XmlRootElement
    static class Representation {
        private BaseEntity entity;

        public BaseEntity getEntity() {
            return entity;
        }

        public void setEntity(BaseEntity entity) {
            this.entity = entity;
        }
    }

} 
```

**输出**

下面是运行演示代码的输出。看到该`type`属性现在存在。

```
<?xml version="1.0" encoding="UTF-8"?>
<representation>
   <entity type="xyz">
      <firstName>first-name</firstName>
      <lastName>last-name</lastName>
   </entity>
</representation> 
```

**了解更多信息**

*   [将 EclipseLink MOXy 指定为您的 JAXB 提供程序](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [JAXB 和继承 - MOXy 扩展 @XmlDescriminatorNode/@XmlDescrimintatorValue](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-moxy-extension.html)
*   [在 WebLogic 中更新 EclipseLink](http://blog.bdoughan.com/2012/10/updating-eclipselink-in-weblogic.html)

# python - 在 pymongo 中使用 ñ 或 é 等特殊字符时出现问题

> ID：13831192
> 
> 赞同：-1
> 
> 时间：2012-12-12T01:10:36.497
> 
> 标签：python, mongodb, unicode

使用 pymongo 我无法处理带有 ñ 或 é 等特殊字符的插入。我添加了我的代码和调用我的 python 脚本的错误

```
# -*- coding: utf-8 -*-
import sys
import pymongo
import codecs

UTF8Writer = codecs.getwriter('utf8')
sys.stdout = UTF8Writer(sys.stdout)

class item(object):
    def __init__(self, categoria, nombre, cantidad, foto, comentario):
        self.categoria = categoria
        self.nombre = nombre
        self.cantidad = cantidad
        self.foto = foto
        self.comentario = comentario

    def getItem(self):
        return {'categoria':self.categoria, 
                'nombre':self.nombre, 
                'cantidad':self.cantidad, 
                'foto':self.foto, 
                'comentario':self.comentario}

def main():
    mongodb_uri = 'mongodb://localhost:27017'
    db_name = 'inventario'
    try:
        connection = pymongo.Connection(mongodb_uri)
        database = connection[db_name]
    except:
        print('Error: Unable to connect to database.')
        connection = None
    if connection is not None:      
    continuar = True
    while continuar:

        categoria = raw_input('Categoria: ')
        nombre = raw_input('Nombre: ')
        cantidad = raw_input('Cantidad: ')
        foto = raw_input('Foto: ')
        comentario = raw_input('Comentario: ')
        a = item(categoria, nombre, cantidad, foto, comentario)
        #print a.getItem()
        database.equipo.insert(a.getItem())
        c = str((raw_input('Otro objeto S/N: ').lower()))
        if c == 'n':
            continuar = False
main()

C:\Users\felipillo\Documents\GitHub\Inventario>python inventario.py
Categoria: Biología
Nombre: Modelo Riñón
Cantidad: 2
Foto:
Comentario:
Traceback (most recent call last):
  File "inventario.py", line 49, in <module>
    main()
  File "inventario.py", line 45, in main
    database.equipo.insert(a.getItem())
  File "C:\Python27\lib\site-packages\pymongo-2.4.1-py2.7-win32.egg\pymongo\coll
ection.py", line 359, in insert
bson.errors.InvalidStringData: strings in documents must be valid UTF-8 
```

C:\Users\felipillo\Documents\GitHub\Inventario>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:47:53.220

你可以试试这个：

```
enc = sys.stdin.encoding

categoria = raw_input('Categoria: ').decode(enc)
nombre = raw_input('Nombre: ').decode(enc)
cantidad = raw_input('Cantidad: ').decode(enc)
foto = raw_input('Foto: ').decode(enc)
comentario = raw_input('Comentario: ').decode(enc) 
```

# java - 找不到taskdef ant任务

> ID：13831194
> 
> 赞同：12
> 
> 时间：2012-12-12T01:10:45.470
> 
> 标签：java, ant, task

全部 -

我正在遵循此页面上最简单的说明：

[http://ant.apache.org/manual/develop.html](http://ant.apache.org/manual/develop.html)

但是，当我尝试执行目标“main”时，我在 netbeans 中收到此错误：

> ```
> taskdef class dec102012.MyAntTask cannot be found using the classloader AntClassLoader[] 
> ```

但是这个错误没有意义，因为我扩展“Task”的新 Java 类如下所示：

```
package dec102012;

import org.apache.tools.ant.BuildException;

public class MyAntTask extends org.apache.tools.ant.Task{
    private String msg;

    // The method executing the task
    public void execute() throws BuildException {
        System.out.println(msg);
    }

    // The setter for the "message" attribute
    public void setMessage(String msg) {
        this.msg = msg;
    }
} 
```

我的 build.xml 中的相关部分如下所示：

```
<taskdef name="mytask" classname="dec102012.MyAntTask" classpath="dec102012"/>

<target name="main">
    <mytask message="Hello World! MyVeryOwnTask works!"/>
</target> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T01:32:18.170

问题是 Ant 类加载器需要知道 *.class 文件的位置。

一旦我将 build.xml 更改为如下所示：

```
<taskdef name="mytask" classname="dec102012.MyAntTask" classpath="build/classes"/>

  <target name="main">
    <mytask message="Hello World! MyVeryOwnTask works!"/>
  </target> 
```

它起作用了（即它打印出 Hello World 消息）。

# c++ - 移动语义和窗口句柄。DeleteObject 安全句柄？

> ID：13831200
> 
> 赞同：4
> 
> 时间：2012-12-12T01:11:04.900
> 
> 标签：c++, windows, bitmap, move-semantics

Windows 中是否有某种 NULL 句柄？如果我通过创建 bmp`CreateCompatibleBitmap()`并通过删除它`DeleteObject()`并想要使用移动语义，我想确保位图没有被破坏。因此，我必须将 设置为`HBITMAP`可以安全删除的值。喜欢`delete nullptr`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:25:52.990

先说坏消息。由于历史原因，Windows API 中没有普遍有效的“无效句柄”值。Windows 中的不同子系统将`NULL`或`INVALID_HANDLE_VALUE`视为无效句柄值（用于返回无效句柄值和获取一个）。[关于旧新事物的相关文章](http://blogs.msdn.com/b/oldnewthing/archive/2004/03/02/82639.aspx)。

然而，**好消息**是，尽管您仍然需要为意外的返回值做好准备（除非您仔细阅读所使用的每个函数的文档），但提供任一无效值在实践中仍然始终“有效”。
您可能没有使用正确的指定“无效”值，但它仍然无效，因此该函数将失败。您的应用程序不会崩溃，除了浪费几个 CPU 周期外，没有其他负面后果。

因此，继续使用`NULL`（或`nullptr`），您对此很满意。如果不出意外，以后阅读您的代码的人会很直观。在您的具体示例中，*这也是正确的*，因为 GDI 函数假定`NULL`为无效。

您几乎可以依赖这两者`NULL`并且`INVALID_HANDLE_VALUE`都是无效值。尽管我不知道有效值`HANDLE`必须非零的要求（如文档中明确说明的那样），但实际上它们总是如此。我敢打赌，你永远不会找到值为零的句柄（只需尝试使用 Sysinternals 的`handle`工具，你计算机上的单个进程的句柄可能不会低于 20）。

但是即使假设它`NULL`可以是一个有效的句柄值，你也必须考虑一些句柄在被调用或全局构造函数运行之前已经打开和关闭`main`，你真的别无选择。这意味着假设`NULL`可能是一个有效的句柄，并且假设它在您的程序运行时仍然有效，那么这个假设的句柄偶然属于与 API 函数兼容的类型的可能性非常低。

另一方面，有人可能会争辩说应用程序可能已经`(unsigned) -1`打开了句柄，从而呈现`INVALID_HANDLE_VALUE`了一个*有效值*。

除非您正在泄漏句柄，否则我无法想象您将如何获得那么多打开的句柄。但更重要的是，早在达到这个数字之前，您可能会在 64 位系统上耗尽内存，并且在 32 位系统上肯定会耗尽地址空间。
如果`INVALID_HANDLE_VALUE`成为一个有效的句柄曾经成为一个问题，那么你有一个更严重的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:32:38.557

没有这样的安全值。传递除了有效的任何东西`HGDIOBJ`，特别是“逻辑笔、画笔、字体、位图、区域或调色板的句柄”，以`DeleteObject`破坏合同并可能使您的程序崩溃。或者它可能会闯入调试器，尤其是在操作系统的检查版本上。或者它可以用日志消息填充您的硬盘。否则可能会导致您无法通过 AppVerifier 并阻止徽标认证。或者它可能会为您的进程触发“appcompat”规则并禁用新的 Windows 功能“以实现向后兼容性”。不要这样做。

您可以用作占位符，但要测试该值，如果您的句柄是.`0`则不要调用。这与前面的测试被认为是对代码的浪费相反。`DeleteObject``0``if (p) delete p;`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T01:24:18.767

通常 0 是无效句柄，类似于空指针。

例如`CreateBitmap`，如果失败，则返回 0 作为无效的位图句柄。

因此，您可以使用空句柄安全地调用`DeleteObject`。

从以下[文档`DeleteObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183539%28v=vs.85%29.aspx)：

> 如果指定的句柄无效或当前被选入 DC，则返回值为零。

一个例外是文件句柄，由 返回`CreateFile`，其中`INVALID_HANDLE_VALUE`定义为`-1`。

# android - GCM生命周期混乱，想一直注册

> ID：13831205
> 
> 赞同：2
> 
> 时间：2012-12-12T01:11:56.923
> 
> 标签：android, google-cloud-messaging

我有 GCM 完全工作。我的问题是，当我使用 android BACK 键退出我的应用程序时，我看到调用了 onDestroy() 并且为了避免泄漏，我取消了 gcm 的接收器，因此调用了 onUnregister()。但我希望能够在开机时注册一次 gcm（启动完成？），然后能够随时收到通知。我知道当谷歌可能刷新注册意图时，我仍然需要处理。但我不清楚是否需要在其 onCreate() 中创建一个新服务来注册 gcm？现在我在主要活动的 onCreate() 中注册 gcm。

谢谢你的帮助！！

贾斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:38:47.777

如果不查看您的代码，这有点难以分辨，但您不应该在每次离开应用程序时从 GCM 注销。典型的 GCM App 生命周期（如果您使用 GCM jar）如下所示：

1.  应用程序启动并检查它是否具有 GCM 注册 ID（这意味着它已向 GCM 注册）然后检查它是否已向您的服务器注册。
2.  如果它有一个registrationID，但尚未在您的服务器上注册，它会尝试这样做。
3.  如果它没有registrationID，它会尝试向GCM注册，然后当它获得registrationID时，它将尝试向您的服务器注册

当他们关闭从接收通知中注销的首选项时，数字 4 可能会从 GCM 注销。

看看 Google 的客户端示例 DemoActivity：[http ://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/DemoActivity .java](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/DemoActivity.java)

请注意，它们不会从 GCM 中取消注册。如果您遵循他们的示例，您将在设备启动后收到通知，而无需自己做任何其他事情。

# sed - unix sed，替换同一文件中特定行和列的字段

> ID：13831207
> 
> 赞同：0
> 
> 时间：2012-12-12T01:11:57.950
> 
> 标签：sed, awk

我有一个由逗号分隔的 4 列的文本文件。当我在循环中读取每条记录时，我想根据条件向第 5 列添加一个值。因此，如果我知道行号和列号，如何在不使用临时文件的情况下使用 awk/sed 命令替换/设置该特定字段的值？我想（直接）更新我正在读取的文件

```
inp.txt
a,b,c,d
e,f,g,h
i,j,k,l 
```

谢谢，-sri

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:24:30.717

您不能使用`awk`或直接编辑文件`sed`。某些版本`sed`的选项 ( `-i`) 可以处理临时文件并覆盖原始文件，但实际上并没有就地编辑文件。这没什么大不了的。做就是了：

```
$ awk 'NR==5{ $(NF+1) = "new value"}1' OFS=, FS=, input-file > tmp.$$
$ mv tmp.$$ input-file 
```

将新列添加到 的第 5 行`input-file`。如果您愿意，可以使用`ed`来编辑文件，但使用临时文件更有意义。如果你想假装你没有使用临时文件，并且你的 sed 支持`-i`，你可以做同样的事情：

```
sed -i '5s/$/,new value/' input-file 
```

尽管大多数实用程序不允许对文件进行就地修改，但使用以下`sh`函数之一使用临时文件来模拟该行为很简单：

```
edit() { local f=$1; shift; "$@" < $f > $f.$$ && mv $f.$$ $f; }  # Break hard links
edit() { local f=$1; shift; "$@" < $f > $f.$$ && cat $f.$$ > $f && rm $f.$$; } 
```

使用其中任何一个，您都可以`awk`使用`edit filename awk awk-cmds`. 第一个版本中断了硬链接，但使用的 IO 略少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:26:23.337

我不能代表 sed，但 awk 的目的不是编辑文件，而是写入标准输出。

但无论如何，这是一个不需要循环的解决方案，假设条件是第 4 列中的条目是 h。

```
awk -F ',' '{ if ($4 == "h") print $0",z"; else print $0","}' inp.txt > out.txt 
```

输出：

```
a,b,c,d,
e,f,g,h,z
i,j,k,l, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T06:19:25.750

```
perl -i -F, -lane 'if($.==<row number>){$F[<column_number>-1]+=<add your stuff here>}print join(",",@F)' your_file 
```

测试如下：

```
>cat temp
b,c,d,g
r,g,d,s 
```

执行以更改第二行中的第三列：

```
>perl -i -F, -lane 'if($.==2){$F[2]=10}print join(",",@F)' temp
> cat temp
b,c,d,g
r,g,10,s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T01:34:43.273

你的意思是这样吗？这是不使用任何临时文件的版本。

```
[a@b ~]$ cat tmp | sed 's_^\(.*\),\(.*\),\(.*\),\(.*\)_\1,\2,\3,\4_g' 
inp.txt
a,b,c,d
e,f,g,h
i,j,k,l

[a@b ~]$ cat tmp | sed 's_^\(.*\),\(.*\),\(.*\),\(.*\)_\1,sth,\3,\4_g'
inp.txt
a,sth,c,d
e,sth,g,h
i,sth,k,l

[a@b ~]$ sed -ie 's_^\(.*\),\(.*\),\(.*\),\(.*\)_\1,sth,\3,\4_g' tmp
[a@b ~]$ cat tmp
inp.txt
a,sth,c,d
e,sth,g,h
i,sth,k,l 
```

干杯，

# php - 我看不到一些 PHP 错误

> ID：13831208
> 
> 赞同：1
> 
> 时间：2012-12-12T01:12:11.847
> 
> 标签：php

> **可能重复：**
> [header() 错误未显示在 php 中](https://stackoverflow.com/questions/13508426/header-error-not-shown-in-php)

我的`/etc/php5/apache2/php.ini`文件具有以下配置：

```
display_errors = On
log_errors = On
error_reporting = E_ALL | E_STRICT 
```

我可以在浏览器中查看诸如`Undenifed variable`,之类的错误，但使用下一个代码`Parse error`

```
<!DOCTYPE html>
<?php
   header('hola: adios');
?> 
```

我看不到`Headers already sent`错误。同样使用 Chrome 的开发人员工具，我可以看到标题`hola: adios`已设置。我怎么能看到这些类型的错误？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:24:07.940

它没有向您显示错误，因为它不是！功能是

```
header(string,replace,http_response_code) 
```

其中字符串可能是您想要设置为标题字段的任何内容：值。没有可以使用或不可以使用的列表。您始终可以拥有自定义标题字段。

检查手册 - h​​ttp: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)。

```
<?php
header('inappropriate stuff');
?> 
```

试试这个，你不会在标头数据包中得到任何东西，因为 php 在将标头字段与值分开的字符串中找不到冒号“：”作为分隔符。

注意：如果您打算将它与会话一起使用，则**session_start()**必须是在执行开始时运行的第一个函数。

# c# - 如何在代码隐藏中使用 GridView 数据源不修剪文本？

> ID：13831209
> 
> 赞同：0
> 
> 时间：2012-12-12T01:12:13.897
> 
> 标签：c#, gridview, eval, code-behind, rowdatabound

嗨，感谢您的关注。

我有一个 GridView，它的数据源设置为一个返回 ArrayList 的外部类。现在，在 aspx 页面中，我有一个 TemplateField，并且 Text 属性设置为

```
Text = '<%#Eval("Name") %>' 
```

除了名称总是被截断，即使数据库中的名称具有更大的值。我猜gridview/databinding出于某种原因截断了名称？无论如何，我想在悬停时显示全名，所以在 _RowDataBound 事件上，我有 e.Row.Cells[2].ToolTip = something，我不确定那个“东西”应该是什么。

在这种情况下我也可以使用 Eval 吗？如果是这样，语法会是什么样的？如果没有，我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:37:28.520

*很少玩*和`CSS`设置`tooltip`会解决这个问题

**代码背后：**

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {   for(int i =0;i <GridView1.Rows.Count;i++)
        {
           Label lblName = (Label)GridView1.Rows[i].Cells[1].FindControl("lblname");
           lblName.ToolTip = "This is my toolTip";//  You can set tooltip as Fullname  
        }
    } 
```

**默认.aspx：**

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" CssClass="gridMyClass"
        Width="125px" onrowdatabound="GridView1_RowDataBound">
        <Columns>
            <asp:TemplateField HeaderText="ID">
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%#Eval("Id") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Name">
                <ItemTemplate>
                  <asp:Label ID="lblname" CssClass="myTxtClass"  runat="server" Text='<%#Eval("name")%>'></asp:Label>

                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

**CSS：**

```
.myTxtClass{
    display:inline;
    position: relative;
    text-decoration:none;
    cursor:pointer;
}

.myTxtClass:hover:before{
    border: solid;
    border-color: red transparent;
    border-width: 6px 6px 0 6px;
    bottom: 20px;
    content: "";
    left: 50%;
    position: absolute;
    z-index: 99;
}

.myTxtClass:hover:after{
    background-color: red;
    opacity:0.7;
    border-radius: 5px;
    bottom: 26px;
    color: #fff;
    content: attr(title);
    left: 20%;
    padding: 5px 15px;
    position: absolute;
    z-index: 98;
    width: 220px;
} 
```

**截屏：**

![工作示例截图](../Images/4919c6ccccc45bdc30e0a43581929980.png)

# sql - 如何根据最常见的值填写空白字段？

> ID：13831214
> 
> 赞同：0
> 
> 时间：2012-12-12T01:12:41.367
> 
> 标签：sql, sql-server

我是 SQL 新手，需要一些有关此查询的帮助：

```
UPDATE student
SET s.date_of_birth= SELECT count(*) max date_of_birth 
FROM student WHERE batch =st.batch
FROM student s, student st
WHERE st.date_of_birth IS NULL 
```

我所需要的只是通过计算该批次`date_of_birth`中最常见的来填充它是空的。`date_of_birth`鉴于我所展示的，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:20:22.510

按日期分组并按计数排序以获得最常见的日期：

```
UPDATE s
SET s.date_of_birth = (
  SELECT top 1 date_of_birth
  FROM student
  WHERE batch = s.batch
  GROUP BY date_of_birth
  ORDER BY count(*) desc
)
FROM student s
WHERE s.date_of_birth IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:22:28.980

让我们分解你想要做的事情。您想找到所有`student`没有出生日期的 s，并将他们的出生日期设置为他们批次中最常见的出生日期。在集合中，“最常见的”被称为众数（你应该记住学校里的“平均值、中位数和众数”）。

所以你想要做的是这样的（伪代码）：

```
UPDATE s
SET s.date_of_birth = (
    SELECT mode(date_of_birthday)
    FROM student 
    WHERE batch = s.batch
)
FROM student s
WHERE s.date_of_birth IS NULL 
```

但是，`mode`它不是 sql server 中的函数，因此我们必须创建自己的获取模式的方式。那么，如果不只是最高频率的项目，模式是什么？为此，让我们计算一下，只抓取最大的一个：

```
UPDATE s
SET s.date_of_birth = (
    SELECT TOP 1 date_of_birthday
    FROM student
    WHERE batch = s.batch
    GROUP BY date_of_birthday
    ORDER BY count(*) DESC
)
FROM student s
WHERE s.date_of_birth IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:28:15.157

我明白这个问题。您正在尝试在 SET 语句中执行子查询，但这不是它的工作方式。如果要动态执行此操作，则需要首先创建子查询并确保其正常工作。您想要从学生中选择 date_of_birth，您想要值的计数而不是值本身，您想要按计数对它们进行排序，并且您只想要该结果的第一行。因此子查询是：

```
select date_of_birth from student group by date_of_birth order by count(date_of_birth) desc limit 1; 
```

现在您可以简单地将其放入您的更新语句中来代替值：

```
SET s.date_of_birth=(select date_of_birth from student group by date_of_birth order by count(date_of_birth) desc limit 1) 
```

但是这个值是一个常数，那么为什么要在每个更新语句上运行查询呢？只需先运行该查询，获取结果，然后在更新查询中使用它。

（在某些情况下，也许您希望以后的更新根据以前的更新设置不同的值，但在这种情况下，最常用的 DOB 将被更频繁地使用，因此查询将始终返回相同的内容。）

# android - 如何在应用程序中显示 .docx 文件？

> ID：13831215
> 
> 赞同：-3
> 
> 时间：2012-12-12T01:13:01.320
> 
> 标签：android, webview, doc

如果您通过 WebView 进行操作，从我所读到的可能。问题是我需要在本地获取文件，我没有互联网连接。如何使用 WebView 离线显示文档？代码示例会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:29:15.900

> 如何使用 WebView 离线显示文档？

你不能。用于查看此类文档格式的唯一方法`WebView`是将其上传到 Google Docs 等服务。`WebView`不能直接显示 DOCX，就像不能直接显示 Photoshop PSD 文件一样。

欢迎您在支持 DOCX 格式的第三方 Android 应用程序中打开文档，提供帮助用户从 Play 商店安装一个（如果他们还没有）。这对您是免费的，而且相当容易实现。

否则，我希望你有一百年左右的开发时间来编写你自己的 DOCX 解析器和渲染器。

# for-loop - 批量 ping 计算机名称列表并将结果写入文件

> ID：13831218
> 
> 赞同：1
> 
> 时间：2012-12-12T01:13:24.627
> 
> 标签：for-loop, batch-file, ping

下面的代码会将计算机名称和 IP 地址写入文件，但我希望它也写入它无法 ping 的计算机的名称，并在其旁边显示失败。我不知道如何修改批处理文件来做到这一点。

```
@echo off

Echo Pinging list...

set ComputerList=list.txt

Echo Computername,IP Address>Final.csv
setlocal enabledelayedexpansion

for /f "usebackq tokens=*" %%A in ("%ComputerList%") do (
for /f "tokens=3" %%B in ('ping -n 1 -l 1 %%A ^|findstr Reply') do (
set IPadd=%%B
echo %%A,!IPadd:~0, -1!>>Results.csv
))

pause 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:39:50.263

如果未找到“回复” ，您可以使用设置的错误级别`findstr`替换返回字符串：

```
('ping -n 1 -l 1 %%A ^|findstr Reply ^|^| echo Not found Failed:') 
```

其中`||`（由于`for`上下文而在此处转义`^`）表示仅在上一个命令失败时才执行。

作为旁注，您应该知道`ping`消息取决于系统语言（它们被翻译为操作系统的语言），因此“回复”作为成功指示器仅适用于英文版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-31T11:24:15.910

这可能不是您正在寻找的直接内容，但我有一个类似的任务：运行 ping 并报告成功或失败。我将把提取 IP 地址的工作留给你——你已经完成了。

ping 的问题在于它在名称解析时返回成功，无论数据包丢失还是主机无法访问（将报告 0% 丢失）都无关紧要。

```
FOR %%a IN (
 google.com
 a.b.c.d
) DO @FOR /F "delims=" %%p IN (
     'PING -w 100 -n 1 %%a ^| findstr ^"Reply Request fail name^"'
   ) DO @(
     ECHO "%%p" | FINDSTR TTL >2 && echo %%a, success, %%p || echo %%a, failed, %%p
   ) >> Results.csv 
```

逻辑：Ping 一次，只过滤带有所列单词之一的行。如果结果行中存在 TTL（输出到 STDERR 或 NUL 以避免输出污染）回显成功，否则回显失败。

我在英文 Windows 上，必须针对其他语言调整单词。

编辑：

```
FOR %%a IN (
 google.com
 a.b.c.d
) DO @FOR /F "delims=" %%p IN ('PING -n 1 %%a ^| findstr TTL ^|^| echo Failed') DO @(
       ECHO "%%p" | FINDSTR TTL >2 && (for /f "tokens=3" %%b IN ("%%p") do @echo %%a, %%b) || echo %%a, failed, %%p
     ) 
```

较少依赖语言，仅适用于 IPv4，添加了 IP 提取。过滤 TTL 的 ping 输出，如果未找到 TTL，则将输出设置为“失败”。如果输出字符串包含 TTL，则提取 IP 并回显主机和 IP，否则回显主机名和输出字符串。

# ruby-on-rails - Ruby on Rails 可以自动生成文章链接吗？

> ID：13831227
> 
> 赞同：0
> 
> 时间：2012-12-12T01:14:37.300
> 
> 标签：ruby-on-rails

所以我的问题是在我生成一个脚手架并且我有能力将文章发布到我的网站之后它通常是一个像 www.mysite.com/articles/1 这样的链接

我的问题是...是否可以让您的应用程序自动生成指向您的 www.mysite.com/articles/1 页面的链接

因为现在我必须手动进入 HTML 并添加链接

```
=link_to 'my article', /articles/1 
```

我只是想知道是否可以让应用程序自动为您生成链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:00:25.067

是的，这是可能的。根据您的问题，我不知道您想链接哪些文章，但是如果您`resources`在路线中使用了此设置，则应该可以：

```
<ul>
  <% Article.all do |article| %>
    <li><%= link_to article.title, article %></li>
  <% end %>
</ul> 
```

或者，如果您使用的是 HAML（看起来您是基于问题的格式，但您没有指定：

```
%ul
  - Article.all do |article|
    %li= link_to article.title, article 
```

您可以根据需要修改查询以限制结果、对结果进行分页、排序等。

# c# - NUnit 用于与类库的集成测试

> ID：13831234
> 
> 赞同：5
> 
> 时间：2012-12-12T01:15:19.610
> 
> 标签：c#, .net, testing, .net-3.5, nunit

我是 NUnit 的新手，但是由于旧项目的时间限制，我正在做一些快速的集成测试。我已经创建了一个测试数据库来进行测试，但是如何连接到它？

我的 NUnit 项目是一个类库，它不能有 web.config 或 app.config 来从中提取连接字符串。我是否将其更改为 Web 项目或某个应用程序项目（现在它只是一个类库）还是有一些为什么要在 NUnit 代码中连接到数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:30:26.217

事实上，您的测试项目可以有一个 app.config 文件。NUnit 会正确加载它。

[http://blog.coryfoy.com/2005/08/nunit-app-config-files-its-all-about-the-nunit-file/](http://blog.coryfoy.com/2005/08/nunit-app-config-files-its-all-about-the-nunit-file/)

这也可能有用：[https ://stackoverflow.com/a/5821939/1373170](https://stackoverflow.com/a/5821939/1373170)

# ruby-on-rails-3 - Rails：相同collection_select的两个（或更多）实例？

> ID：13831235
> 
> 赞同：0
> 
> 时间：2012-12-12T01:15:21.373
> 
> 标签：ruby-on-rails-3

我`collection_select`在表单中有一个实例，我想知道是否可以在同一个表单中有两个或多个实例。它们将由相同的模型构建，并且它们会像在`Article.all.each`循环中构造的复选框一样保存。有这些工作

```
<%= f.collection_select("article_ids", Article.where(:page => 1), :id, :name) %>
<%= f.collection_select("article_ids", Article.where(:page => 2), :id, :name) %>
<%= f.collection_select("article_ids", Article.where(:page => 3), :id, :name) %> 
```

形式上几乎就是我所追求的。它本质上是一个多重选择，但分布在几个选择中。该字段已经接受多个结果，但是当我将表单保存为上方时，它只记录最终选择的选项。有什么想法吗？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:27:15.067

```
<%= select_tag "article_ids[]",options_from_collection_for_select(Article.all.collect{|i| [i.name,i.id]),:multiple => true %> 
```

在选择列表中选择多个选项时，只需给出 article_ids[] ，它会将所有 id 存储在此数组中，然后在您编写查询后如何存储在数据库中。
如果**将选择标签设置为多个 true**，那么**您将选择多个选项，**否则您只会**获得一个选定的值。**
或者
只是阅读下面的链接
[http://api.rubyonrails.org/?q=collection%20select](http://api.rubyonrails.org/?q=collection%20select)

如果你想给 f.select 那么你必须像这样给

```
<%= f.collection_select :article_id, Article.all, :id , :name %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:08:20.917

我只是用复选框来解决这个问题，因为它确实是噩梦。

```
<% @articles.each do |a| %>
  <%= check_box_tag("doc[article_ids][]", a.id, @doc.articles.include?(a.id), :class => "article_chooser") %> <a id="<%= a.id %>" class="name"><%= a.name %></a><br />
<% end %> 
```

# c# - 是否可以强制显式实现接口（或部分接口）？

> ID：13831237
> 
> 赞同：10
> 
> 时间：2012-12-12T01:15:41.140
> 
> 标签：c#, .net

假设我有一个这样的界面：

```
public interface MyInterface
{
    int Property1
    {
        get;
    }

    void Method1();
    void Method2();
} 
```

有没有办法强制接口的实现者显式地实现它的一部分？就像是：

```
public interface MyInterface
{
    int Property1
    {
        get;
    }

    explicit void Method1();
    explicit void Method2();
} 
```

编辑：至于为什么我关心接口是否显式实现；就功能而言，这并不重要，但向使用代码的人隐藏一些不必要的细节可能会有所帮助。

我正在尝试使用以下模式在我的系统中模拟多重继承：

```
public interface IMovable
{
    MovableComponent MovableComponent
    {
         get;
    }
}

public struct MovableComponent
{
    private Vector2 position;
    private Vector2 velocity;
    private Vector2 acceleration;

    public int Method1() 
    {
        // Implementation
    }

    public int Method2() 
    {
        // Implementation
    }

}

public static IMovableExtensions
{
    public static void Method1(this IMovable movableObject) 
    {
        movableObject.MovableComponent.Method1();
    }

    public static void Method2(this IMovable movableObject) 
    {
        movableObject.MovableComponent.Method2();
    }
}

public class MovableObject : IMovable
{
    private readonly MovableComponent movableComponent = new MovableComponent();

    public MovableComponent MovableComponent 
    {
        get { return movableComponent; }  // Preferably hiddem, all it's methods are available through extension methods.
    } 
}

class Program
{
     static void Main(string[] args)
     {
          MovableObject movableObject = new MovableObject();
          movableObject.Method1();   // Extension method
          movableObject.Method2();   // Extension method
          movableObject.MovableComponent    // Should preferably be hidden.

     }
} 
```

如果 MovableComponent 属性是显式实现的，那么在大多数情况下，它会对使用该类的任何人隐藏。希望这个解释不要太可怕。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T01:19:03.557

不，不可能强制实现者选择接口的显式或隐式实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:20:58.063

您正在寻找的东西称为抽象类

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-23T07:50:57.513

> 如果 MovableComponent 属性是显式实现的，那么在大多数情况下，它会对使用该类的任何人隐藏。

显式接口实现的目标不是*隐藏*实现，而是允许定义相同约束但不能遵守相同实现的接口之间的冲突。
因此，在使用真实类型时，不可避免地需要隐藏除一个冲突实现之外的所有实现，而仅在使用特定接口类型时才“显示”它。但这不是主要目的，它只是必须以某种方式解决歧义的逻辑结果，开发人员可以在正确的时间主动选择正确的实现。

其次，作为接口设计者，您应该担心具体的实现，也不担心第三方如何处理实现类。您在这里跨越了一些界限，并试图从错误的原点进行更改。

# ruby - 什么是在前台运行后台进程以在 Ruby 中进行测试的好方法？

> ID：13831238
> 
> 赞同：1
> 
> 时间：2012-12-12T01:15:41.513
> 
> 标签：ruby, rspec, tdd, sinatra, backgroundworker

使用 Sinatra 应用程序，发现了 3 种运行后台进程的方法：

1.  `Thread.new`
2.  `Process.fork`
3.  `Process.spawn`

想出了如何让前两个工作，但现在的挑战是测试需要同步运行（有几个原因）。

在生产中异步运行作业但强制测试同步运行的好方法是什么？最好在`spec_helper`...中打电话？

Ruby 1.9.3、Sinatra 应用程序、RSpec。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:38:57.713

我推荐以下混合方法：

1.  编写简单的单元测试并将您正在测试的内容重构为同步的。换句话说，将所有后台功能放入可以轻松进行单元测试的简单类和方法中。然后后台进程可以调用已经过单元测试的相同功能。您不必对后台线程/进程创建本身进行单元测试，因为这已经在 ruby​​（或其他库，如`god`,`bluepill`或`Daemons`.

2.  对于功能和集成测试，遵循 的方法`delayed_job`并提供一种方法来同步完成所有后台工作，例如`Delayed::Worker.new.work_off`

您可能还需要考虑使用 EventMachine（如在[任何成功与 Sinatra 与 EventMachine WebSockets 一起工作？](https://stackoverflow.com/questions/2999430/any-success-with-sinatra-working-together-with-eventmachine-websockets)）而不是产生线程或进程，特别是如果后台进程是 IO 密集型的（例如，发出 http 或数据库请求）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:00:57.740

这是我想出的：

```
process_in_background { slow_method }

def process_in_background
  Rails.env == 'test' ? yield : Thread.new { yield }
end

def slow_method
  ...code that takes a long time to run...
end 
```

我喜欢这个解决方案，因为它是透明的：它运行***完全相同的代码***，只是同步运行。

有什么建议/问题吗？有必要管理僵尸吗？如何？

# r - 从列（数据框）中选择匹配的行值以使用 R 中的循环创建图

> ID：13831240
> 
> 赞同：1
> 
> 时间：2012-12-12T01:15:54.400
> 
> 标签：r, function, loops, match, boxplot

我有一组看起来像这样的数据，

> ```
> species<-"ABC"
> ind<-rep(1:4,each=24)
> hour<-rep(seq(0,23,by=1),4)
> depth<-runif(length(ind),1,50)
> 
> df<-data.frame(cbind(species,ind,hour,depth))
> df$depth<-as.numeric(df$depth) 
> ```

在此示例中，“ind”列具有更多级别，并且它们的长度并不总是相同（这里每个人都有 4 个级别，但实际上有些人有数千行数据，而其他人只有几行）。

我想做的是有一个外部循环或函数，它将从每个人（“ind”）中选择所有行，并使用深度/小时列生成一个箱线图。

这是我心中的想法，

> ```
> for (i in 1:length(unique(df$ind))){
> 
>   data<-df[df$ind==df$ind[i],]
>   individual[i]<-data
> 
>   plot.boxplot<-function(data){
>   boxplot(depth~hour,dat=data,xlab="Hour of day",ylab="Depth (m)")
> 
>   }
> 
> }
> 
> par(mfrow=c(2,2),mar=c(5,4,3,1))
> plot.boxplot(individual) 
> ```

我意识到这个循环可能不合适，但我仍在学习。我可以一次为每个人绘制箱线图，但我想要一种更快、更有效的方式来为每个人选择数据并创建或存储箱线图结果。当我有更多人时（而不是一次做一个......），这将非常有用。提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:37:46.637

这样的事情呢？

```
par(mfrow=c(2,2))
invisible(
  by(df,df$ind,
    function(x)
      boxplot(depth~hour,data=x,xlab="Hour of day",ylab="Depth (m)")
    )
) 
```

为了提供一些解释，这对已定义`boxplot`的每组案例运行一个。包装器只是使用于 的输出束不会写入控制台。`df``by` `df$ind``invisible``boxplot`

# javascript - 如何使用 Chrome 扩展程序自动将 youtube 主页按钮重定向到“/feed/subscriptions/u”？

> ID：13831242
> 
> 赞同：1
> 
> 时间：2012-12-12T01:16:16.130
> 
> 标签：javascript, google-chrome-extension

我想创建一个扩展程序，它会自动将 youtube 主页按钮重定向到“/feed/subscriptions/u”，而不是通常的主页。

我只有两个文件 manifest.json 和 background.js

清单包含这个

```
{
  "name": "Youtube Home Redirector",
  "version": "1.0",
  "description": "Redirects Youtube Home Page automatically to subscriptions",
  "background": {
    "scripts": ["background.js"]
  },
  "manifest_version": 2
} 
```

我的 background.js 包含

```
$('a[title*="Youtube home"]').attr('href', function(i,href) {
    return href.replace('/', '/feed/subscriptions/u');
}); 
```

我知道这不起作用....我想知道是否有人可以指出我如何做到这一点的正确方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:18:45.780

*您的代码几乎没有问题*

a）您在后台页面而不是您正在浏览的选项卡中

b) $.attr() 不被后台页面识别。

c) 您对正在更新的选项卡没有权限。

以下示例可以实现您的功能。

## 参考：

a)[清单文件](https://developer.chrome.com/extensions/manifest.html)和[模式](https://developer.chrome.com/extensions/match_patterns.html)

b) [tabs.query()](https://developer.chrome.com/extensions/tabs.html#method-query) *：用于在安装前获取所有选项卡*

c) [tabs.onUpdated.addListener](https://developer.chrome.com/extensions/tabs.html#event-onUpdated) *：用于在安装后获取新选项卡*

d) [chrome.tabs.update](https://developer.chrome.com/extensions/tabs.html#method-update) *：用于更改所有选项卡 URL。*

# 示范

### 清单.json

确保所有权限都可用于清单

```
{
    "name": "URL Change",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "This demonstrates how chrome extension Changes URL",
    "background":{
        "scripts":["background.js"]
    },

    "permissions": ["tabs","http://www.youtube.com/*"]
} 
```

### 背景.js

[这可确保使用http://www.youtube.com/](http://www.youtube.com/)安装后的所有现有标签和所有新创建的标签都更新为[http://www.youtube.com/feed/subscriptions/u](http://www.youtube.com/feed/subscriptions/u)

```
//Take tabId as input and change its URL
var changeURL = function (tabId) {
    //Update its URL
    chrome.tabs.update(tabId, {
        "url": "http://www.youtube.com/feed/subscriptions/u"
    }, function (tab) {
        //Notification for success
        console.log("Tab Updated");
    });

}

//Query  All tabs with URL's http://www.youtube.com/ when extension is installed for first time
chrome.tabs.query({
    "url": "http://www.youtube.com/"
}, function (tabs) {
    //For every tab change URL by Passing Id
    for (tab in tabs) {
        changeURL(tabs[tab].id);
    }
});

//When ever a new tab is created this changes URL
chrome.tabs.onUpdated.addListener(function (tabId, info, tab) {
    //Fetch a tab where URL is http://www.youtube.com/ and is not loaded yet
    if (info.status == "loading" && info.url == "http://www.youtube.com/") {
        //Change URL by passing Id of tab
        changeURL(tabId);
    }
}); 
```

## 输出：

![在此处输入图像描述](../Images/19e78bddc1189c5e2c7cc59ba845a5fe.png)

如果您需要更多信息，请与我们联系。

# cocoa - Cocoa 程序无法停止

> ID：13831247
> 
> 赞同：0
> 
> 时间：2012-12-12T01:16:34.553
> 
> 标签：cocoa, debugging, xcode4, exception-handling

我正在尝试编写一个使用串行端口的 OS X 应用程序。我找到了一个示例（可可）并让它在 Xcode 4 中运行。在第一次运行时，它打开了端口，我能够与硬件交换数据。

如果我尝试更改端口，程序就会变得流氓。风车启动，用户界面无响应。我无法从 Xcode 中停止程序，也无法从终端或强制退出中杀死它。Xcode 的强制退出不会这样做。尽管 PID 随着终端的杀戮而消失，但 UI 仍然存在，并伴随着旋转的风车。

唯一的出路是重新启动。欢迎任何关于如何追踪错误代码的想法。我是 Cocoa/Objective C 的新手，所以简单的术语更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:54:49.390

很可能它变成了僵尸。它应该`ps auxww`以“Z”的状态显示（或类似的）。活动监视器也可能仍会显示它。

这在使用硬件（例如串行端口）时比较常见。僵尸的出现可能有两个原因，在这种情况下很可能是第一个：

1.  该进程在某种内核调用中被阻塞，这是不可中断的。
2.  该进程已退出，但其父进程尚未确认（通过 wait() 或类似方法）。

在第一种情况下，它通常是某种基本错误或设计缺陷，除了弄清楚到底是什么代码路径解决了问题并避免这种情况之外，您可能没有任何好的选择。

在第二种情况下，解决方案通常很简单——找到你的僵尸的父进程并杀死它。根据需要重复，直到你的僵尸被调用 wait() 的父进程收养（如果没有别的，launchd 会这样做）。

# java - 异构 Java EE 集群

> ID：13831249
> 
> 赞同：1
> 
> 时间：2012-12-12T01:16:40.720
> 
> 标签：java, jakarta-ee, jboss, glassfish, ejb-3.0

是否可以形成一个集群，其中有不同类型的应用服务器？例如，1 个**JBoss**、1 个**Glassfish**和 1 个**WebSphere**？假设我们使用的是**EJB3.0**。无状态会话 bean 应该相对容易，并且实例之间的简单负载平衡应该可以完成工作，但是*SFSB*和会话复制呢？是否可以使用一些像 infinispan 这样的缓存存储？

我将不胜感激任何评论或分享您对此主题的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T01:24:24.063

我认为如果您使用一些与应用程序服务器无关的解决方案，例如[Hazelcast](http://www.hazelcast.com/) ，这可能是可能的。根据[其文档](http://www.hazelcast.com/use-cases/web-session-clustering/)，配置 Web 会话复制非常容易，它的唯一要求是

*   目标应用程序或 Web 服务器应支持 Java 1.5+
*   目标应用程序或 Web 服务器应支持 Servlet 2.4+ 规范
*   需要集群的会话对象必须是可序列化的

我没有尝试按照您描述的方式配置集群，但是我认为它可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:44:25.923

答案很简单。集群是一个非标准特性，它取决于 Java EE 实现来提供集群保持标准行为（具有非常小的约束，因为预计粘性和会话对象预计是可序列化的）并且没有预见到互操作性。

您当然可以将集群设置为您自己，设置一个外部数据网格作为会话存储并管理您自己的缓存，但是您将失去与会话相关的任何框架功能（您需要通过您的self) 以及使用完整的 Java EE 应用程序服务器还有什么意义。是的，您将需要忘记 SFSB。

我已经准备好想知道你想通过这种类型的架构解决什么问题。我没有看到任何可以超过维护 3 个不同应用程序的成本（应用程序服务器在开发端有一些差异），更重要的是 3 个不同的基础设施操作堆栈（在这方面有很多差异，所以你需要增加运营团队的知识）。

# python - 烧瓶登录：Chrome 忽略 cookie 过期？

> ID：13831251
> 
> 赞同：10
> 
> 时间：2012-12-12T01:16:45.037
> 
> 标签：python, web-applications, python-2.7, flask, flask-login

我已经使用烧瓶登录进行身份验证，但似乎无论我在烧瓶中使用 cookie 持续时间是什么，会话仍然是经过身份验证的。我是否为烧瓶登录正确设置了配置变量？我试过了

```
app.REMEMBER_COOKIE_DURATION = datetime.timedelta(seconds=30)
app.config["REMEMBER_COOKIE_DURATION"] = datetime.timedelta(seconds=30) 
```

即使我关闭浏览器，稍等片刻，然后点击应该保护的 url，我仍然可以访问它。这[与chrome的这个问题有关吗？](https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies). 如果我清除我的 cookie，我会得到预期的登录页面。这一切让我觉得 cookie 超时没有得到尊重。

另外，`PERMANENT_SESSION_LIFETIME`烧瓶中的作用是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T12:19:18.997

`REMEMBER_COOKIE_DURATION`用于“记住我”功能，即即使关闭浏览器，登录用户也要记住多长时间。单独的 cookie 用于此目的，其名称可以由`REMEMBER_COOKIE_NAME`(`remember_token`默认情况下) 设置。要强制登录会话在一段时间后过期（即使浏览器仍在运行），请设置`PERMANENT_SESSION_LIFETIME`您保留应用设置的位置：

```
PERMANENT_SESSION_LIFETIME = datetime.timedelta(minutes=30) 
```

在您的登录视图集中`session.permanent = True`：

```
from flask import session

@app.route('/login')
def login():
    # ...
    if login_user(user):
        session.permanent = True
        return redirect(request.args.get('next') or url_for('index'))
    # ... 
```

# jquery - 重定向页面在 IE 中不起作用

> ID：13831252
> 
> 赞同：0
> 
> 时间：2012-12-12T01:16:53.247
> 
> 标签：jquery, redirect

我有这个代码..

```
jQuery('#button_search').click(function(event){
    event.preventDefault();

    var propertyUrl = getBaseURL()+'public/Property/view-property';
    var locationUrl = getBaseURL()+'public/Property/view-location';

    if($('#propl').is(':checked')) 
    { 

        var selectedLoc = jQuery('#select_location').val();

        if(selectedLoc == 'default'){
            alert('Please Select Location');
        }else{
            $().redirect(locationUrl, {'arg1': 'value1', 'arg2': 'value2'});
        }

    }
    else if($('#propn').is(':checked')) 
    {

        var selectedProp = jQuery('#select_properties').val();

        if(selectedProp == 'default'){
            alert('Please Select Property');
        }else{
            $().redirect(propertyUrl, {'propertyId': selectedProp});
        }
    }
    else{
        alert('Select property or location');
    }

}); 
```

我使用自定义按钮作为事件的持有者..当我在选择某个项目后单击该按钮时，它应该重定向到另一个页面..它在 Firefox、chrome 和 opera 中运行良好，但在 IE 中不起作用. 可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:24:43.430

从您的问题中不清楚 IE 除了重定向之外还在做什么，但是如果您将此按钮放在表单中，那么我的猜测是表单正在提交。您应该`return false`在单击处理程序结束时确保单击按钮（提交表单）的默认操作不会发生。否则，某些浏览器可能会进行表单提交，导致重定向不再发生。

# asp.net-mvc - 将表单身份验证集成到 mvc4 站点

> ID：13831253
> 
> 赞同：0
> 
> 时间：2012-12-12T01:17:11.220
> 
> 标签：asp.net-mvc, asp.net-mvc-4, forms-authentication

我目前正在使用 MVC4，并且该站点有一个安全区域。为了管理这个，我正在使用 Windows 身份验证。前段时间我已经在 Web 表单中实现了这一点，但这是我第一次在 MVC 方面使用它。

我正在使用 cookie 来存储身份验证。因此，当用户进行身份验证时，它会被持久化到 cookie。一个用户可能有许多不同的角色。这也应该持久化到 cookie 中吗？

身份验证后，如果用户已登录并且他们是某个角色的成员，我如何检查控制器、过滤器等？是否需要将此类信息加载到每个请求的用户上下文中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:13:31.317

如果您使用的是成员资格提供程序，那么您应该能够使用控制器方法上的操作过滤器属性来做您想做的事情。

```
[Authorize]
public ActionResult SomeControllerAction()
{
    return View();
} 
```

或测试特定角色：

```
[Authorize(Roles = "Administrator,Moderator")]
public ActionResult SomeControllerActionRequiringSpecificRoles()
{
    return View();
} 
```

# jquery - 更改选择框选项的背景颜色

> ID：13831255
> 
> 赞同：0
> 
> 时间：2012-12-12T01:17:13.670
> 
> 标签：jquery, html, css, forms

我在网站上的表单中有一个下拉菜单，我想将选项的背景更改为像初始选择一样透明。

我使用`background:rgba(255, 255, 255, 0.2)`它，但我如何将它应用到`<option>`'s.

注意：[这是一个 Wordpress 站点](http://winghammotel.com.au/bookings)，表单由插件生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:26:08.460

您不能以跨浏览器的方式做到这一点，所有浏览器都有不同的默认“不可覆盖”样式，它们应用于选择。

如果您愿意在选择框顶部应用一个 javascript 层，用更多样式元素替换它，则可以使用 javascript/jquery 插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T01:37:41.690

尝试更改选项的 css ：

```
$(document).ready(function(){
    $("option").css("background", "none repeat scroll 0 0 rgba(255, 255, 255, 0.2");
}); 
```

# php - 用 PHP 更新 MySQL

> ID：13831256
> 
> 赞同：2
> 
> 时间：2012-12-12T01:17:18.937
> 
> 标签：php, mysql, sql

我想用输入表单更新 MySQL 数据库，本质上是一个设置页面，用户可以在其中更新/更改他们的信息。使用下面的代码，底部的回显运行并且我没有收到任何错误，但数据库没有更新。我在本地机器和服务器上都对其进行了测试，但两者都无法使用，尽管我不确定这与它有什么关系。`$_SESSION['yourName']`用户登录时已设置，因此它将等于数据库中的当前值。我知道这里有大量的 sql 注入漏洞，但这只是一个概念验证代码，还没有准备好上线。我尝试在 phpMyAdmin 中运行查询，它运行良好。

PHP

```
if(isset($_POST['name']) || isset($_POST['password']) || isset($_POST['location']) || isset($_POST['img'])) {
 //put this in an external file for a little extra security
 $username = "my_username";
 $password = "my_password";
 $database = "database_name";
 $con = mysql_connect('localhost',$username,$password);
 if (!$con) {
    die('Oh poop.... Could not connect: ' . mysql_error());
 }
 //print item from database
 mysql_select_db($database, $con);

 if(isset($_POST['name'])) {
    $query = 'UPDATE users SET username=' . $_POST['name'] . 'WHERE username=' . $_SESSION['yourName'];
    mysql_query($query);
    $_SESSION['yourName'] = $_POST['name'];
 }
 if(isset($_POST['password'])) {
    $query = 'UPDATE users SET password=' . $_POST['password'] . 'WHERE username=' . $_SESSION['yourName'];
    mysql_query($query);
 }
 if(isset($_POST['location'])) {
    $query = 'UPDATE users SET location=' . $_POST['location'] . 'WHERE username=' . $_SESSION['yourName'];
    mysql_query($query);
    $_SESSION['location'] = $_POST['location'];
 }
 if(isset($_POST['img'])) {
    $query = 'UPDATE users SET img=' . $_POST['img'] . 'WHERE username=' . $_SESSION['yourName'];
    mysql_query($query);
    $_SESSION['img'] = $_POST['img'];
 }
 echo '<script type="text/javascript">alert("changes saved")</script>';
} 
```

HTML

```
<form method="post">
    new name: <input type="text" name="name" /><br />
    new password: <input type="text" name="password" /><br />
    new location: <input type="text" name="location" /><br />
    new img: <input type="text" name="img" /><br />
    <input type='submit' name='save' value='save' />
    <input type='submit' name='logout' value='logout' />
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T01:19:36.280

尝试使用双引号而不是单引号来修改您的 php 语句。

```
$query = "UPDATE users SET username='" . $_POST['name'] . "' WHERE username= '" . $_SESSION['yourName'] . "'"; 
```

但是上面的查询是易受攻击的`SQL Injection`，请阅读下面的文章，

*   [如何**防止**PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T01:59:29.323

我建议使用 PDO。不鼓励使用 php mysql 对象以支持 PDO 或 mysqli。

PDO： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

此外，您还需要更新 WHERE 语句的主键列（id 或 user_id）上的行，或者您可能允许影响多个用户行。

根据您的应用程序，我建议不要将密码存储在您的数据库中。存储他们输入的密码的加盐哈希。

密码哈希： http: [//php.net/manual/en/faq.passwords.php](http://php.net/manual/en/faq.passwords.php)

```
if(isset($_POST['name']) || isset($_POST['password']) || isset($_POST['location']) || isset($_POST['img'])){
//put this in an external file for a little extra security  
$username = "my_username";
$password = "my_password";
$database = "database_name";                                
try{
    $conn=new PDO('mysql:dbname='.$database.';host=localhost;port=3306',$username,$password);
}
catch(PDOException $ex){
    die('Could not connect: '.$ex->getMessage());
}
$stm = $conn->prepare("UPDATE users SET username=?,password=?,location=?,img=? WHERE user_id=?");
$stm->execute(array($_POST['name'],$_POST['password'],$_POST['location'],$_POST['img'],$_SESSION['user_id']));
} 
```

# prolog - 在 Prolog 中的列表上应用谓词

> ID：13831272
> 
> 赞同：2
> 
> 时间：2012-12-12T01:18:51.347
> 
> 标签：prolog, swi-prolog

我是 SWI-Prolog 的新手（5.10.5 在 win 7 上运行）。

我正在学习的应用程序中有 3 个文件：a.pl 和 b.pl 和 c.pl

a.pl 使用谓词 foldl/4，它似乎在[apply.pl](http://www.swi-prolog.org/pldoc/doc/home/swipl/lib/swipl/library/apply.pl?show=src#foldl/4)中。

c.pl，使用以下内容：

```
:- ensure_loaded('a.pl').
:- ensure_loaded('b.pl'). 
```

然后在这些文件中调用一些谓词。

当我运行 c.pl 时，出现未定义 foldl/4 的异常。我尝试将以下内容添加到 a.pl：

```
:- use_module(library(apply)). 
```

和

```
:- [library(apply)]. 
```

但没有用。

你能帮忙吗？

提前感谢苏子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:42:21.667

我在 Ubuntu 上运行 5.10.4，我的版本没有`apply:foldl`，尽管它在`apply`. 网上资料显示，`foldl`仅在 2012-06-05 上添加，但版本 5.10.X 已超过 2 年。

所以看起来在线文档适用于更新的版本，您需要升级才能拥有此谓词。

# asp.net-mvc - 使用 Mongo Db 和 MVC

> ID：13831286
> 
> 赞同：0
> 
> 时间：2012-12-12T01:20:08.813
> 
> 标签：asp.net-mvc, mongodb

我最近开始从事一个项目，我使用 Mongo Db 与 MVC4 Web 应用程序进行交互。

我对 Mongo Db 的了解有限，所以在 .net 和 Mongo 的上下文中是否有任何可用资源推荐？有什么书可以推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:00:46.893

我建议您从[此处](http://www.mongodb.org/display/DOCS/CSharp+Language+Center)找到的 10gen 的官方 C# 驱动程序开始。

没有专门针对 .NET 和 MongoDB 的书籍。由于驱动程序变得非常相似（尽可能地相似，但特定语言/平台存在差异），您应该能够从 Internet 上的许多可用示例和其他资源中学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:10:35.970

我建议[这个](http://www.codeproject.com/Articles/273145/Using-MongoDB-with-the-Official-Csharp-Driver)和[这个](http://weblogs.asp.net/shijuvarghese/archive/2010/04/16/nosql-with-mongodb-norm-and-asp-net-mvc.aspx)，对于我的一些朋友来说，这些文章是有益的。

但是当您想使用 mongo 时 - [Little MongoDB book](http://openmymind.net/mongodb.pdf)是您必须阅读的东西。

# java - java.util.NoSuchElementException：找不到行

> ID：13831287
> 
> 赞同：1
> 
> 时间：2012-12-12T01:20:21.100
> 
> 标签：java, file, exception, file-io, java.util.scanner

### 信息 ：

当我执行我的程序时，一个简单的文件阅读器，我得到一个异常。

我的文件保存在 .java 文件旁边。

### 输出 ：

> 运行：
> 名称：Koen
> 得分：44
> 线程“main”中的异常 java.util.NoSuchElementException：找不到行
> 名称：Kevin
> 得分：55
> at java.util.Scanner.nextLine(Scanner.java:1585)
> at tetris.FileIO.loadHighscores (FileIO.java:41)
> at tetris.FileIO.getLineScores(FileIO.java:28)
> at tetris.FileIO.main(FileIO.java:62)
> Java 结果：1
> 构建成功（总时间：0 秒）

### 代码：

```
package tetris;

import java.io.File;
import java.io.InputStream;
import java.io.Writer;
import java.util.Scanner;

public class FileIO   {
    private File file;
    private Scanner filescScanner, lineScanner;
    private Writer fileWriter, lineWriter;
    private String[][] data;

    public FileIO () {
        String[][] data = new String[100][1];
    }
    public String[][] getLineScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("LineHighscores.txt"));
    }
    public String[][] getTimeScores(){
        return this.loadHighscores(this.getClass().getResourceAsStream("TimeHighscores.txt"));
    }

    public String[][] loadHighscores( InputStream resourceStream){

        int x=0;
        String test = "";

        filescScanner = new Scanner(resourceStream);

        while((test=filescScanner.nextLine())!=null) {

            lineScanner = new Scanner(test);
            lineScanner.useDelimiter("-/-");
            System.out.println("name : "+lineScanner.next());
            System.out.println("score : " +lineScanner.next());

            x++;
        }
        lineScanner.close();
        filescScanner.close();
        return data;    
    }

    public static void main(String[] args){
        FileIO file = new FileIO();
        System.out.println(file.getLineScores());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T01:23:39.280

当您调用 nextLine() 时：

```
 while((test=filescScanner.nextLine())!=null) 
```

它抛出[异常](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/NoSuchElementException.html)以指示扫描仪没有更多的输入行。因此，它永远不会返回 null。

尝试改为使用`hasNextLine()`来检查是否有下一行。

```
while(filescScanner.hasNextLine())
{
    test=filescScanner.nextline();
    ...
} 
```

有下一行

**公共布尔 hasNextLine()**

> 返回：当且仅当此扫描仪有另一行输入（[source](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)）时为真

因此，当扫描仪没有更多的输入行读取时，`hasNextLine()`将返回`false`. 因此，终止循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:37:14.220

如果我对您的理解正确，您希望 while 循环在文件中没有更多行可读取时终止。Scanner 类实现了一个 hasNextLine 方法，当有一行要读取时返回 true，否则返回 false。我认为您可以用scanner.hasNextLine() 替换while 条件，这将解决第41 行引发的NoElementException。我希望这个答案对您有所帮助。

好运尼古拉

# loops - 只打印 groovy 循环中的值

> ID：13831296
> 
> 赞同：0
> 
> 时间：2012-12-12T01:21:08.990
> 
> 标签：loops, groovy

控制器中的代码

```
 def sql = groovy.sql.Sql.newInstance ( dbUrl, dbUser, dbPassword, dbDriver )
    String[] allUser = sql.rows("select user_id from users")
    allUser.each()
    {
        print "${it}"
    } 
```

控制台中的输出

```
{user_id=9}
{user_id=10}
{user_id=11}
{user_id=12}
{user_id=13}
{user_id=14} 
```

如何以仅显示值的方式打印它？例子：

```
9
10
11
12
13
14 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T04:13:51.247

这使得它比它需要的更复杂一些。 `Sql.rows()`将返回一个[`GroovyRowResult`](http://groovy.codehaus.org/api/groovy/sql/GroovyRowResult.html)对象列表，这使得检索字段变得容易；`String[]`根据您的变量声明，您有一个隐式转换为。您可以按如下方式更改它：

```
def allUser = sql.rows("select user_id from users") 
```

或者，如果您愿意，

```
List allUser = sql.rows("select user_id from users") 
```

然后你可以像这样打印用户ID：

```
allUser.each {
    println it["user_id"]
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T02:52:18.733

```
 String userid = "${it}".substring(0, "${it}".length()-1);
   String[] test = userid.split("=") 
```

# rest - 从 Ruby 调用的 Redmine REST API 忽略了对某些字段的更新

> ID：13831297
> 
> 赞同：3
> 
> 时间：2012-12-12T01:21:16.907
> 
> 标签：rest, redmine

我有一些代码在某个时候工作但不再工作，这强烈表明 redmine 配置以某种方式涉及（我不是 redmine 管理员），但是缺少任何错误消息使得很难确定什么是错误的. 这是代码：

```
#!/usr/bin/env ruby
require "rubygems"
gem "activeresource", "2.3.14"
require "active_resource"

class Issue < ActiveResource::Base
  self.site = "https://redmine.mydomain.com/"
end

Issue.user = "myname"
Issue.password = "mypassword"  # Don't hard-code real passwords :-)

issue = Issue.find 19342  # Created manually to avoid messing up real tickets.
field = issue.custom_fields.select { |x| x.name == "Release Number" }.first
issue.notes = "Testing at #{Time.now}"
issue.custom_field_values = { field.id => "Release-1.2.3" }
success = issue.save
puts "field.id: #{field.id}"
puts "success: #{success}"
puts "errors: #{issue.errors.full_messages}" 
```

运行时，输出为：

```
field.id: 40
success: true
errors: [] 
```

到目前为止一切顺利，除了当我返回 GUI 并查看这张票时，“注释”部分已正确更新，但自定义字段未更改。我确实在 ActiveRecord 代码中添加了一些跟踪，这似乎正在发送我想要的更新，所以我怀疑问题出在服务器端。

顺便说一句，如果您知道使用 REST API 从 Ruby 访问 Redmine 的任何好的示例集合，那也会很有帮助。我可能只是在错误的地方寻找，但我发现的只是一些微不足道的，足以激起人们对更多的兴趣，而且我在 redmine 网站上看到的文档甚至没有列出所有可用字段。（理想情况下，如果示例还指定了它们使用的 redmine 版本，那就太好了。）

# html - 我需要关于第 n 个孩子的帮助

> ID：13831302
> 
> 赞同：0
> 
> 时间：2012-12-12T01:22:15.863
> 
> 标签：html, css, css-selectors

`:first-child`除了and之外，nth-child 从来都不是很好`:last-child`，但我需要一些帮助来创建这种类型的布局：

![布局示例](../Images/054e0c3da8f25abdcec0e9bad71e2b4a.png)

每个“帖子”都将被包装在一个名为 的 div 中`.summary-item`。我正在使用流畅的布局，并且我的网站的内容宽度为`max-width: 1020px`.

有谁可以帮我离开这里吗？非常感激！

```
<div class="summary-item">
First Post
</div>

<div class="summary-item">
Second
</div>

<div class="summary-item">
Third
</div>

<div class="summary-item">
Fourth
</div>

<div class="summary-item">
Fifth
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:37:03.357

由于您的周期为 5（“一旦完成第五篇文章，我需要重复整个结构”），您所有的`nth-child`调用都将基于`5n`. 之后它只是添加：

```
:nth-child(5n+1) {/* first block */}
:nth-child(5n+2) {/* second block */}
:nth-child(5n+3) {/* third block */}
:nth-child(5n+4) {/* fourth block */}
:nth-child(5n+5) {/* fifth block - could also be :nth-child(5n)
                            but the +5 improves readability */} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:06:36.500

我使用了稍微不同的标记（[最终结果](http://jsfiddle.net/ZLVV2/2/show/)）：

```
<article>
    <header>
        <h3>First Post</h3>
    </header>
</article>
<!-- fill in the gap -->
<article>
    <header>
        <h3>Fifth Post</h3>
    </header>
</article>​ 
```

以及以下规则：

```
article {
    height: 10em;
    box-sizing: border-box;
    border: 5px solid #FFF;
}

article:nth-child(5n+1) { 
    width: 70%;
}

article:nth-child(5n+2) { 
    width: 30%; 
    margin: -10em 0 0 70%;
}

article:nth-child(5n+3) {
    width: 50%;
}

article:nth-child(5n+4) {
    width: 50%;
    margin-right: 50%;
}

article:nth-child(5n+5) {
    width: 50%;
    height: 20em;
    margin: -20em 0 0 50%;
} 
```

这给了我你的概念图像中呈现的布局。

小提琴：http: [//jsfiddle.net/ZLVV2/2/](http://jsfiddle.net/ZLVV2/2/)

# c++ - 调试难以发现的异常

> ID：13831304
> 
> 赞同：2
> 
> 时间：2012-12-12T01:22:37.420
> 
> 标签：c++, visual-studio-2010, debugging

首先，感谢您花时间查看我的问题和帮助。我注意到这里的很多提问者很少或根本没有表示赞赏，但我真诚地感谢这里的帮助和社区:)

我为一个我没有源代码的应用程序（它是一个视频游戏）编写了一个 C++ 插件（包含数百个源文件）。换句话说，我只有插件的源代码，但没有游戏。现在，在我插件的数千行中，某处导致游戏引擎抛出异常（可能是访问冲突），我不知道在哪里。到调试器中断时，堆栈已损坏，我得到的只是我没有源代码的 DLL 的十六进制地址（但肯定会在我的 DLL 中发生异常）。我尝试了一切......我似乎无法找到异常发生的位置。有时调试器指向一个“内存重定位”函数（我从未在我的插件中使用过），有时它指向引擎的 GameFrame()，

我几乎尝试了一切......我搜索了几个小时试图找出如何使用其他调试器，如 WinDbg 和 Microsoft Application Verifier。我试图注释掉调试器指向的一个或另一个，或两者，但它仍然崩溃。我什`OUTPUT("The name of the last executed function is: %s", __FUNCTION__)`至在我的应用程序中插入了每个函数，希望煞费苦心地捕捉最后一个函数，但似乎任何类型的 I/O 都因某种原因阻止了异常的发生......并且 10 分钟的调试和崩溃发生在最后一次随机执行功能。

我无法找出这种访问冲突发生在哪里，或者在哪里删除了一些临时对象以导致这些错误指针（我在使用它之前检查了每个指针），但是该死的，我在这里达到了我的极限。

那么，如何调试不可能的事情......一个带有蹩脚的调试器调用堆栈的随机崩溃？提前感谢您的耐心和善意的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:05:51.813

我的建议：尝试不同的调试器（非 MS），它们会捕获不同的东西。我的经验：我有源代码和完整调试符号的程序损坏了堆栈，VS 和 WinDbg 都可以提供帮助，但 Ollydbg 注释了一个值为“r for pattern.”的非字符串 var，所以我在这个 var 上覆盖了一些字符串缓冲区. Ollydbg 也可以选择以艰难的方式遍历堆栈（不使用 dbghelp.dll）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:51:23.133

根据我的经验，“预防胜于治疗”这句古老的格言非常相关。最好通过遵循良好的软件开发实践（单元测试、回归、代码审查等）来防止错误蔓延，而不是在错误出现后才解决。

当然，现实世界并不完美，并且确实会出现错误。要调试内存损坏，您可以使用一些不错的工具，例如 valgrind，它至少可以缩小问题部分，以便您仔细查看。调试一个复杂的程序并不容易，如果你的调试器出错了，你需要大量的坚持。我发现一种有用的技术是选择性地启用或禁用某些模块，以缩小模块的范围。

有时您需要使用“引用透明性”来卸载某些模块。给你一个精简的例子，考虑：

```
int foo = factorial(3); 
```

如果我怀疑这段代码有问题（调试器在我看到调用堆栈之前就崩溃了），我必须尝试删除这段代码，看看问题是否仍然存在。但是，`foo`以后可能会用到，所以我不能直接删除它。相反，我可以将其替换为`int foo = 6;`并继续。

另一个重要的一点是始终维护一个跟踪文件，您的代码会在其中记录它正在做的事情。当程序崩溃时，跟踪文件通常可以帮助缩小问题范围。当然，您默认禁用跟踪，以免造成性能瓶颈。

# php - 无法强制下载 - PHP curl

> ID：13831305
> 
> 赞同：0
> 
> 时间：2012-12-12T01:22:39.493
> 
> 标签：php, curl, fopen

我们将一些数据导出为 csv，并通过 jQuery ajax 表单提交来触发它。我可以得到它的基本工作，我似乎无法得到的是在文件写入后强制下载文件。PHP

```
<?php
session_start();
echo $_SESSION['payerEmail'];
echo $_SESSION['password']; 
$url = 'http://www.ninjatrader-support2.com/sugar/FXCMLicense.php';
$FXCMAction = $_REQUEST["FXCMAction"];
$payerEmail = $_SESSION['payerEmail'];
$password = $_SESSION['password'];
$fields = array(
'FXCMAction'=>urlencode($FXCMAction),
'payerEmail'=>urldecode($payerEmail),
'password'=>urldecode($password)
);
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
$fields_string = rtrim($fields_string,'& ');

$ch = curl_init($url);
session_write_close();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
$directory='/home/ninja002/public_html/FXCMReports/';
$filename = 'XCMLicense.csv';
$handle = fopen($directory.$filename, 'w');
fwrite($handle, $output);
echo $output;
curl_close($ch);

?> 
```

与往常一样，非常感谢任何建议。泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:34:06.943

希望这可以避免它给我带来的头痛。这是如何做到的（至少在我的情况下）：

```
<?php
    session_start();
    $url = 'http://www.remotesite/script.php';
    $Foo = $_REQUEST["Foo"];
    $Bar = $_SESSION['Bar'];
    $password = $_SESSION['password'];
    $fields = array(
        'Foo'=>urlencode($Foo),
        'Bar'=>urldecode($Bar),
        'password'=>urldecode($password)
    );
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    $fields_string = rtrim($fields_string,'& ');
    $ch = curl_init($url);
    session_write_close();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);
    $directory='/home/usr/public_html/Directory/';
    $filename = 'AwesomeData.csv';
    $handle = fopen($directory.$filename, 'w');
    fwrite($handle, $output);
    header('Content-type: application/octet-stream');
    header('Content-Disposition: attachment; filename="AwesomeData.csv"');
    echo $output;
?> 
```

# c - 编写字符设备驱动程序，ioctl() 与普通读/写？

> ID：13831307
> 
> 赞同：4
> 
> 时间：2012-12-12T01:23:23.290
> 
> 标签：c, linux-kernel, operating-system, driver

我一直在为 linux 内核编写一个字符设备模块，但我有点困惑。

我在网上看到有人谈论使用`ioctl()`将命令/数据从用户程序传输到内核空间，反之亦然。但是，用`file_operations struct`

```
// structure containing callbacks
static struct file_operations fops = 
{
    .read = dev_read, // address of dev_read
    .open = dev_open,  // address of dev_open
    .write = dev_write, // address of dev_write 
    .release = dev_rls, // address of dev_rls
}; 
```

`ioctl()`使用而不是使用定义的函数`dev_read()`以及`dev_write()`简单地将数据块复制到用户区/从用户区复制数据块`copy_to_user()`有什么好处`copy_from_user()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T01:30:06.793

`ioctl`应该只用于内核默认不提供的那些操作。

在使用简单或调用时，必须调用`ioctl`以读取或写入数据到您的设备会大大降低您的易用性。`read``write`

我所说的非标准操作是指在终端设备驱动程序中设置自动 ASCII/EBCDIC 转换，或从 DVD 块设备中弹出磁盘，或修改串行通信设备的串行通信参数（波特率、停止位等） .

无论如何都要使用`ioctl`将命令传输到设备驱动程序（或从中获取非数据信息，如当前参数或统计信息）（另一种方法是在数据中使用一些复杂的转义方案，如`AT`调制解调器的命令集或（这是显示我的年龄）`CTRL-D`Apple ][磁盘子系统，这很少漂亮。

将数据传输留给标准调用。

# python - Python中的基本正则表达式操作

> ID：13831308
> 
> 赞同：1
> 
> 时间：2012-12-12T01:23:25.990
> 
> 标签：python, regex

我正在关注有关正则表达式的教程。执行以下操作时出现错误：

```
regex = r'(+|-)?\d*\.?\d*' 
```

显然，Python 不喜欢 (+|-)。可能是什么问题呢？
另外，在正则表达式之前不添加 r 可能会出现什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:25:23.743

`+`是一个特殊字符。您可以使用方括号来指定字符范围，这比在这种情况下使用带有管道字符的“或”更好：

```
regex = r'([+-])?\d*\.?\d*' 
```

否则，您只需要在原始版本中转义它：

```
regex = r'(\+|-)?\d*\.?\d*' 
```

使用`r`是在 python 中指定正则表达式字符串的首选方式，因为它指示原始字符串，不应解释它并减少必须使用反斜杠执行的转义量。它只是一个随处可见的 python 正则表达式习语。

```
r'(\+|-)?\d*\.?\d*'
#'(\\+|-)?\\d*\\.?\\d*' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T01:26:19.440

您需要`+`在正则表达式中转义以获得文字`+`，因为它通常表示“某事的一个或多个实例”：

```
regex = r'(\+|-)?\d*\.?\d*' 
```

并`r`使其成为“原始”字符串。如果没有`r`，正则表达式转义序列将被解释为字符串转义序列，它们会导致各种问题。（`\b`作为退格而不是单词边界，以及那种东西。）

# scala - scala中下划线的归属分组

> ID：13831313
> 
> 赞同：0
> 
> 时间：2012-12-12T01:23:57.187
> 
> 标签：scala, scala-placeholder-syntax, ascription

我正在尝试做：

`MyObject.myMethod(_:MyType.myAttribute)`

这失败了

`type myAttribute is not a member of object MyObject`

哪个是对的。问题是我想调用`myMethod`的`myAttribute`，而`_:MyType`不是归于。我可以以某种方式对类型归属进行分组吗？返回 type ，这不是我想要的。`MyType:myAttribute``_``_:MyType``(_:MyType).myAttribute``MyType => classOf(myAttribute)`

编辑：我更改了这篇文章的标题和文本，不再将其称为点的关联性，我认为这是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:39:05.683

您是否尝试`(m: MyType) => MyObject.myMethod(m.myAttribute)`使用[下划线](https://stackoverflow.com/a/8001065/406435)创建函数？

如果是这样，那么问题就在于`MyObject.myMethod((_:MyType).myAttribute)`意味着`MyObject.myMethod((m:MyType) => m.myAttribute)`.

您可以使用中缀表示法：

```
MyObject myMethod (_:MyType).myAttribute 
```

证明它有效：

```
scala> case class MyType(myAttribute: Int)
defined class MyType

scala> object MyObject {
     |   def myMethod(a: Int) = a.toString
     | }
defined module MyObject

scala> MyObject myMethod (_:MyType).myAttribute
res0: MyType => java.lang.String = <function1>

scala> res0(MyType(1))
res1: java.lang.String = 1

scala> MyObject myMethod (MyType(1))
<console>:1: error: type mismatch;
 found   : MyType
 required: Int
              MyObject myMethod (_:MyType)
                                  ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T04:34:48.417

我不确定这是否说明或回答了您的问题，但这是真的。

我的猜测是，您希望您的 ab(_.i) 在添加属性（键入参数）后成为匿名函数。

但是 subexpr 通过`there is no other expression of syntactic category Expr which is properly contained in e and which itself properly contains u.`(SLS 6.23)挫败了你

此外，您可以使用`scalac -Xprint:parser`它来查看它是如何拍摄的。

```
object Foo {
  def m(k: Int) = 7 * k
}
class Bar {
  val i = 5
  val What = i
}
object Bar {
  type What = Int
}

object Test extends App {
  Foo.m(_:Bar.What)
  // this is not anon func placeholder syntax...
  //Foo.m((_:Bar).What)  // _ is in a subexpr
  //Foo.m(_.i)
  // ...for this
  val f = (x: Bar) => Foo.m(x.i)
  // InfixExpr is ok
  val g = Foo m (_: Bar).i
  val b = new Bar
  println(f(b))
  println(g(b))
} 
```

对比，说明什么是被限制的：

```
scala> val f: (Int,Int)=>Int = _+_
f: (Int, Int) => Int = <function2>

scala> val g: Int=>Int = if (_ > 0) 1 else 2
<console>:7: error: missing parameter type for expanded function ((x$1) => x$1.$greater(0)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:46:35.447

```
List(1,2,3).map((i: Int) => i * i) 
```

**编辑**

```
List(1,2,3).map((_: Int).unary_-) 
```

**编辑 2**

```
implicit class MyAttribute(i: Int) { def myMethod() = i * i }
List(1,2,3).map((_: Int).myMethod.unary_-) 
```

**解释**

在对结果执行一元“-”操作之后，我使用隐式类（Scala-2.10）在 Int 上添加 myMethod。例如，您可以添加类似`def wrap: MyAttribute`to 的`MyAttribute`内容，并使用类似`(_: Int).wrap.method1.method2.method3.result.abs`的内容。

# sass - 在 sassscript 变量中存储任意字符串？

> ID：13831318
> 
> 赞同：1
> 
> 时间：2012-12-12T01:24:23.320
> 
> 标签：sass

是否可以在 scss 中呈现任意字符串？您可以呈现属性值：

```
/*source scss*/
$some-color: #123456;
a {color: $some-color;}

/*compiled css*/
a {color: #123456;} 
```

[`#{}`或使用插值语法](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)的选择器/属性名称：

```
/*source scss*/
$some-class: 'my-awesome-link';
$some-attribute: border;
a.#{$some-class} {#{$some-attribute}-color: #000;}

/*compiled css*/
a.my-awesome-link {border-color: #000;} 
```

但我不能使用以下内容：

```
/*source scss*/
$some-css: 'text-decoration:none;color:#000';
a {$some-css}  //breaks
a {#{$some-css}}  //breaks 
```

这似乎是香草字符串处理和允许的极其微不足道的事情。我是否忽略了不同的语法，还是在当前的 scss 中不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:07:47.507

最接近你想要的东西是这样的：

```
@mixin property-list($list) {
    @each $i in $list {
        #{nth($i, 1)}: nth($i, 2);
    }
}

$links: color red, border (1px solid);

a {
    @include property-list($links);
} 
```

编译为：

```
a {
  color: red;
  border: 1px solid;
} 
```

# javascript - 从顶点和仅面创建边

> ID：13831321
> 
> 赞同：0
> 
> 时间：2012-12-12T01:24:37.737
> 
> 标签：javascript, graphics, 3d

我需要尝试在 OBJ 文件中使用边缘，现在 OBJ 文件不包含边缘，因此仅使用顶点和面，我需要创建边缘以适应我的模型结构。

如何仅使用面创建边缘？

顶点数据片段

```
v  1.6946 0.0000 -39.7987 //V1
v  8.5498 6.3593 -32.5369 //V2
v  10.1957 0.0000 -38.6795 //V3
v  1.6946 6.3593 -33.4394 //V4
v  6.9039 -0.0000 -26.3943 //V5 
```

人脸数据片段

```
f 1 2 3 
f 1 4 2 
f 4 5 2 
f 4 6 5 
```

所以面 1 由顶点 1、2 和 3 组成，我应该只创建边，即 1 到 2、2 到 3 和 3 到 1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:16:47.077

我找到了该怎么做，我取了前两个顶点，然后做了一个 for 循环来检查它们是否是我制作的边缘数组，如果不是，那么只需将它们推到数组上，如果它们不是，然后告诉我的脸结构像这样采用for循环“i”值

```
var tempVer1 = faces[i][0];
            var tempVer2 = faces[i][1];

            tempEdge1 = tempEdges.length;
            var change = false;
            for(k=0;k<tempEdges.length;k++)
            {
                if(tempEdges[k][0] == tempVer1 && tempEdges[k][1] == tempVer2) 
                    {
                    change = true;
                    tempEdge1 = k;
                    }
                    else if(tempEdges[k][0] == tempVer2 && tempEdges[k][1] == tempVer1)
                    {
                    change = true;
                    tempEdge1 = -k;
                    }
            } 
```

希望这可以帮助其他需要它的人:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:29:21.593

你是对的。第 1 面是 (v1,v2,v3)，第 2 面是 (v2,v3,v4)，以此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:29:34.987

是的，为每个面创建从 1 到 2、2 到 3 和 3 到 1 的边，将为您提供对象中的所有边。请注意，当某些边缘用于多个面时，可能（并且可能会有）重复。

# java - 使用 Rhino 在不同的上下文中获取函数

> ID：13831324
> 
> 赞同：1
> 
> 时间：2012-12-12T01:25:17.990
> 
> 标签：java, javascript, rhino

我有一些代码可以从脚本文件中加载一堆函数并将生成的 Scriptable 范围缓存在内存中：

```
Scriptable loadScript(File file)
{
  Context ctx = _contextFactory.enterContext();
  ctx.setOptimizationLevel(9);
  Scriptable scope = ctx.initStandardObjects();
  InputStreamReader reader = new FileReader(file);
  ctx.evaluateReader(scope, reader, scriptPath.getName(), 0, null)
  Context.exit();
  return scope;
}

Scriptable parentScope = loadScript(...); 
```

然后我有另一个例程，它在整个执行过程中任意调用这些函数。这些例程可能有多个实例并行运行，我不希望它们相互干扰，因此对于每次执行，我加载一个子 Scriptable 范围并将其父范围设置为加载文件中的缓存范围：

```
Context ctx = _contextFactory.enterContext();
Scriptable childScope = ctx.newObject(parentScope);
childScope.setParentScope(parentScope); 
```

要在 Java 中调用 JavaScript 函数，我执行以下操作：

```
Function f = (Function)parentScope.get(methodName, childScope);
f.call(...); 
```

我的问题是关于最后`get()`一种方法。为什么，如果它是 Scriptable 的实例方法，它是否将另一个 Scriptable 对象作为第二个参数？换句话说，它对 Scriptable`this`实例和作为参数传入的实例有什么作用？文档对此并不清楚。

# mod-rewrite - mod_rewrite 使用查询字符串重定向 URL

> ID：13831328
> 
> 赞同：0
> 
> 时间：2012-12-12T01:25:53.450
> 
> 标签：mod-rewrite, query-string

我的`httpd.conf` 文件中已经有很多有效的 mod_rewrite 规则。我最近才发现 Google 已将我的一个未重写的 URL 编入索引，其中包含一个查询字符串：

`http://example.com/?state=arizona`

我想使用 mod_rewrite 做一个 301 重定向到这个 URL：

`http://example.com/arizona`

问题是稍后在我的重写规则中，第二个 URL 被重写以将查询变量传递给 WordPress。它最终被重写为：

`http://example.com/index.php?state=arizona`

这是正确的功能。到目前为止，我所尝试的一切要么根本不起作用，要么让我陷入无休止的重写循环。这就是我现在所拥有的，它陷入了一个循环：

```
RewriteCond %{QUERY_STRING} state=arizona [NC]
RewriteRule .*   http://example.com/arizona [R=301,L]
#older rewrite rule that passes query string based on URL:
RewriteRule ^([A-Za-z-]+)$ index.php?state=$1 [L] 
```

这给了我一个无休止的重写循环并将我带到这个 URL： `http://example.com/arizona?state=arizona`

然后我尝试了这个：

```
RewriteRule .*   http://example.com/arizona? [R=301,L] 
```

它摆脱了 URL 中的查询字符串，但仍然创建了一个循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:31:24.000

好的，添加第二个 RewriteCond 终于修复了它 - 现在重写正确并且没有循环：

```
# redirect dynamic URL: ?state=arizona
RewriteCond %{QUERY_STRING} state=arizona [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteRule .*   http://domain.com/arizona? [R=301,L]
# older rewrite rule that passes query string based on URL:
RewriteRule ^([A-Za-z-]+)$ index.php?state=$1 [L] 
```

这是使它适用于任何状态值的代码，而不仅仅是亚利桑那州：

```
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} ^state=([A-Za-z-]+)$ [NC]
RewriteRule .*   http://domain.com/%1? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:31:00.517

`RewriteCond %{REQUEST_URI} ^/\?state=arizona$ [NC]`

应该

`RewriteCond %{QUERY_STRING} state=arizona [NC]`

request_uri 结束于 ? 令牌。

# javascript - 如何检查 DOM 元素的 header (h1, h2, h3) 属性？

> ID：13831332
> 
> 赞同：2
> 
> 时间：2012-12-12T01:26:07.863
> 
> 标签：javascript, jquery, html, dom

如果我有对 Javascript / jQuery 中的链接的引用，我如何检查它是否是`<h1>`,`<h2>`等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:30:27.303

我假设您的意思是*在*标题内。您可以`:header`为此使用，例如：

```
<h1><a href="#" id="link">link</a></h1>

var isHeading = !!$('#link').closest(':header').length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:29:11.990

使用[`jQuery.is()`](http://api.jquery.com/is/)方法：

`element$.is('h1'); // will return true or false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T01:35:44.390

这将为您提供大写元素的标签名称

```
$('.myClassName').get(0).tagName 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T09:11:05.217

你使用[Jquery.is](http://api.jquery.com/is/)

这将检查它是否是标题类型（H1，H2，H3 ...）

```
$('.myClassName').is(':header') 
```

或者

这将检查它是否是 H1

```
$('.myClassName').is('h1') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-31T11:14:59.327

如果你想知道它是否是一个标题标签：

```
$(element).is('h1,h2,h3,h4,h5'); 
```

# wpf - ContentControl 在不知道名称的情况下获取 DataTemplate 中的所有元素？

> ID：13831337
> 
> 赞同：1
> 
> 时间：2012-12-12T01:26:26.947
> 
> 标签：wpf, xaml, datatemplate, contentcontrol, visual-tree

我想获得一个包含我当前用户控件的所有元素的列表。不仅LogicalTree中的一个，用户控件中定义和使用的数据模板中的所有元素。

当 iam 迭代抛出 VisualTree 时，它​​在 ContentControl 中没有 VisualTree 项。我认为 VisualTree 包含所有元素？

所以最后我需要在我的列表中的 DataTemplate 中的 TextBox 和 Button。但我不知道元素的 x:Name。

有人可以帮忙吗？

```
<UserControl
    x:Class="DataTemplate.Test"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Grid x:Name="LayoutRoot">
      <ContentControl>
        <ContentControl.ContentTemplate>
          <DataTemplate>
            <Grid VerticalAlignment="Stretch">
              <Button x:Name="btn_1" />
              <TextBlock x:Name="tb_1" />
            </Grid>
          </DataTemplate>
        </ContentControl.ContentTemplate>
      </ContentControl>
  </Grid>
</UserControl> 
```

在代码中，当 UserControl.Loaded 事件被触发时，我迭代抛出它......

```
public void OnUserControlLoaded(object sender, EventArgs e)
{
    BindChildren(LayoutRoot);
}

List<object> list = new List<object>();
private void BindChildren(object target)        {
        try
        {
                var count = VisualTreeHelper.GetChildrenCount(target as FrameworkElement);
                if(count < 1)
                {
                    foreach (var child in LogicalTreeHelper.GetChildren(_currentElement))
                    {
                        list.Add(child);

            BindChildren(child);
                    }
                }
                else
                {
                    for (int i = 0; i < count; i++)
                    {
                        list.Add(VisualTreeHelper.GetChild(target as FrameworkElement, i));

            BindChildren(VisualTreeHelper.GetChild(target as FrameworkElement, i));
                    }
                }
        }
        catch (InvalidCastException exc)
        {
            throw;
        }
    } 
```

# objective-c - 识别传入的 segue

> ID：13831338
> 
> 赞同：1
> 
> 时间：2012-12-12T01:26:34.167
> 
> 标签：objective-c, ios

所以，我正在阅读[这个相关的 SO](https://stackoverflow.com/questions/10629399/can-a-viewcontroller-access-the-identifier-of-an-incoming-segue)，因为它最终也是我想做的事情。

我在destinationViewController 的头文件中添加了一个属性：

```
@property (nonatomic, strong) NSString *incomingSegue; 
```

我已经在destinationViewController的实现文件中合成了它：

```
@synthesize incomingSegue = _incomingSegue; 
```

我在我的 prepareForSegue 方法中添加了以下几行，用于 sourceViewController（取决于触发 segue 的）：

```
[segue.destinationViewController setIncomingSegue:@"edit"];
[segue.destinationViewController setIncomingSegue:@"add"]; 
```

最后，我有一个过程来检查我的destinationViewController 的实现文件中设置了哪个值：

```
if (_incomingSegue == @"add")
    {
        //snipped code here
    }
    else if (_incomingSegue == @"edit")
    {
        //snipped code here
    } 
```

所以，显然我错过了一些东西。当我尝试执行 segue 时，我得到一个错误，在 SO 中出现了大约 1000 次，这使得很难弄清楚我忽略了哪些细节。这件事在我的 sourceViewController 上的 prepareForSegue 方法中触发（根据断点）：

> 无法识别的选择器发送到实例

我可以不使用文字字符串（@“string”）代替（NSString *），还是其他引发错误的东西？

**更新（已解决）：**

我的 prepareForSegue 方法的更详细描述：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"editSegue"])
    {
        //snipped
        [segue.destinationViewController setIncomingSegue:@"edit"];
    }

    else if ([[segue identifier] isEqualToString:@"addSegue"])
    {
        //snipped
        DestinationViewController *dtv = (DestinationViewController *)[[segue destinationViewController]topViewController];
        [dvc setIncomingSegue:@"add"]
    }
} 
```

事实证明，我必须使用我声明的 DestinationViewController 类对象来设置值。而不是像我对 editSegue 所做的那样仅引用 segue.destinationViewController。我没有为editSegue 声明的DestinationViewController 类对象，所以一个是/正在按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:31:57.753

You should add a condition around the line that sets the incoming segue:

```
if ([segue.identifier isEqualToString:@"SegueToControllerThatSupportsIncomingSegue"]) {
    [segue.destinationViewController setIncomingSegue:@"edit"];
} 
```

The idea is to call `setIncomingSegue:` only on the destination view controller that supports your added method.

You should also change the code in the destination view controller to check string equality with `isEqualToString:`

```
if ([_incomingSegue isEqualToString:@"add"])
{
    //snipped code here
}
else if ([_incomingSegue isEqualToString:@"edit"])
{
    //snipped code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T03:06:35.250

When you call `@synthesize incomingSegue = _incomingSegue;`

You really only need to call

`@synthesize incomingSegue;`

# javascript - Javascript 正则表达式数组不匹配

> ID：13831344
> 
> 赞同：0
> 
> 时间：2012-12-12T01:27:21.517
> 
> 标签：javascript, regex

我的模式在第一次匹配后停止，并且在那里有全局匹配。

```
//When I add [*]* like var pattern=/([^A-z0-9]|^|[*]*)_(\S.*?)_((?!\S)|\W)/g;
//  it works, but when I try to match "1_test1_" and "a_test1_" it matches "_test1_"
//  which I don't want. I know [*]* will match 0 or more instances of literal *
//  but [*]+ won't work due to the first match being "_test1_*"

var pattern=/([^A-z0-9]|^)_(\S.*?)_((?!\S)|\W)/g;

alert("_test1_*_test2_".match(pattern)); //=> _test1_*
    //This should match "_test1_*" first then it should also add to the array with "_test2_" 
```

**问题开始**

我希望上面的*（第一个代码块）*提醒“_test1_*，_test2_”，我希望下面的*（第二个代码块）*保持不变（如注释部分所示）。

我不知道为什么 _test2_ 不匹配，因为它与下面显示的测试完全匹配。

**问题完成**

以下是应有的测试和工作。

```
alert("_test1_ _test2_".match(pattern)); //=> _test1_, _test2_
alert("_test1_*".match(pattern)); //=> _test1_*
alert("_test2_".match(pattern)); //=> _test2_
alert("*_test2_".match(pattern)); //=> *_test2_
alert("1_test1_".match(pattern)); //=> null
alert("a_test1_".match(pattern)); //=> null
alert("_test1_1".match(pattern)); //=> null
alert("_test1_a".match(pattern)); //=> null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:44:39.980

我认为模式应该改变。这个怎么样？在下划线之前需要可选符号字符的部分之后放置一个问号：

```
([^A-z0-9]|^)?_(\S.*?)_((?!\S)|\W) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:04:12.417

好的，那么如何使用这个序列，不知道它是否是你正在寻找的：

`([^A-z0-9]|^|)_(\S.*?)_((?!\S)|\W)`

我刚刚在正则表达式中的字符串开头符号之后添加了一个额外的 vert 行，正在测试您的非工作案例并且可以正常工作。

顺便说一句，我使用 regexpal.com 来测试正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T22:30:10.533

经过多次反复试验，我终于通过添加 |\b 找到了答案。感谢@Alih Nehpets 尝试回答我的问题。

```
([^A-z0-9]|^|\b)_(\S.*?)_((?!\S)|\W) 
```

# php - Mysql日期在php中显示为单词

> ID：13831345
> 
> 赞同：0
> 
> 时间：2012-12-12T01:27:30.550
> 
> 标签：php, mysql

我有一个包含日期格式（mysql）的日期字段的表。但是，我希望日期出现在 php.ini 中。如果我想选择那些：例如2011-05-15（mysql），应该显示为2011年5月15日...

```
$query = "select Date_Hired from registration where IdNum = '".$IdNum."' "; 
```

我希望 Date_Hired 以文字形式出现在页面中。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:30:36.950

```
select date_format(Date_Hired, '%M %d %Y') from registration 
```

[MySQL DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:30:03.127

查看 MySQL`DATE_FORMAT()`函数。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

例子：

```
mysql> SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');
    -> 'Sunday October 2009'
mysql> SELECT DATE_FORMAT('2007-10-04 22:23:00', '%H:%i:%s');
    -> '22:23:00' 
```

# javascript - 如何有条件地显示阻止页面提交的 Javascript alert()，直到用户单击“确定”？

> ID：13831348
> 
> 赞同：0
> 
> 时间：2012-12-12T01:28:11.797
> 
> 标签：javascript, ajax, jsf, primefaces

我有一个这样的命令按钮：

```
<p:commandButton value="Save" actionListener="#{bean.checkDetails}" action="#{bean.save}" /> 
```

我的 checkDetails() 方法检查页面上的某些字段，如果未填写，则使用 RequestContext 触发 Javascript alert()，我想用它来阻止 bean.save 被调用，直到用户单击“确定”。RequestContext 部分如下所示：

```
RequestContext context = RequestContext.getCurrentInstance();
context.execute("alert('Details are not Complete.')"); 
```

我的问题是我没有看到 alert() 对话框，并且无论 checkDetails() 方法的状态如何，都会调用 bean.save。

我会以完全错误的方式解决这个问题吗？到目前为止，我已经花了三个小时在这上面，我完全被困住了。如果我删除 action 方法，alert() 会弹出就好了。

请，任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:38:44.263

> 我的 checkDetails() 方法检查页面上的某些字段，如果它们没有填写...

正如 BalusC 所说，这可以通过添加这些字段很容易地解决`required="true"`，无需为此编写 Java。

如果您想将其与“old-scool”混合`alert()`使用，可以使用`validationFailed`回调参数：

```
<h:form>
    <p:inputText required="true" />
    <p:commandButton value="submit" oncomplete="handleValidation(xhr, status, args)" />
</h:form>
<script type="text/javascript">
    function handleValidation(xhr, status, args)
    {
        if(args.validationFailed)
        {
            alert('Details are not Complete.');
        }
    }
</script> 
```

# javascript - 如何为可调整大小的 jQuery UI 元素启动调整大小功能（触发手柄拖动）

> ID：13831361
> 
> 赞同：5
> 
> 时间：2012-12-12T01:29:52.460
> 
> 标签：javascript, jquery, jquery-ui, event-handling, resize

当前在我单击屏幕时动态创建[可调整大小](http://jqueryui.com/resizable/)的元素。`mousedown`

jQuery UI 自动添加句柄以允许用户在之后单击并拖动以调整元素大小。

我想触发句柄，这样只要用户没有触发`mouseup`他们就已经在调整新创建的元素的大小。

我在文档中找不到任何显示单击这些句柄时触发了哪些事件的内容。在创建元素`mousedown`、`click`放置在屏幕上并设置为`resizable`. 这些都不起作用。

有谁知道如何触发调整大小动作的开始？或者，如果有人知道如何记录 jQuery UI 事件，我可以使用它来查看单击句柄时发生的操作，遵循相同的路径，并在此处发布我的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-04T12:48:36.667

[Michael L](https://stackoverflow.com/a/15871032/1300910)的回答中的小提琴涵盖了基本要素，但仍然包含一些错误/限制。因此，我在这里添加我的修改版本作为答案。

**HTML**

```
<div id='container'></div> 
```

**CSS**

```
#container {
    position: relative;
    width: 500px;
    height: 500px;
    background-color: #eee;
}

.block {
    position: absolute;
    width: 5px;
    height: 5px;
    background-color: red;
    opacity: 0.2;
} 
```

**JavaScript**

```
$("#container").on("mousedown", function(event){
    if (event.target !== this) {
        return;
    }
    var $target = $(event.target),
        $block = $("<div />")
            .addClass("block")
            .css({
                top: event.pageY - $target.offset().top,
                left: event.pageX - $target.offset().left
            })
            .resizable()
            .draggable({ containment: $target });
    $target.append($block);
    simulateHandleEvent($block, "se", event);
})

function simulateHandleEvent($item, handle, event){
    $item.find(".ui-resizable-" + handle)
        .trigger("mouseover")
        .trigger({
            type: "mousedown", 
            which: 1,
            pageX: event.pageX,
            pageY: event.pageY
    });
} 
```

看看[这个 JSFiddle](http://jsfiddle.net/UMKjm/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T04:00:46.977

我遇到了同样的问题，终于找到了答案。您必须将附加信息传递给该`trigger()`函数。请参阅[JS 小提琴](http://jsfiddle.net/hTfmM/19/)。

# c - ANSI C 编译错误：“，”标记之前的预期表达式

> ID：13831363
> 
> 赞同：1
> 
> 时间：2012-12-12T01:29:54.403
> 
> 标签：c, compiler-errors, c89

尝试编译我编写的一些代码时，我继续收到此错误，文件中的位置完全没有帮助。这使用 gtk 2.0。

以下是我在编译时收到的内容：

> charles@draton-generico:~/Documents/C89$ gcc -xc -ansi -g bahbahbah.c -o bahbahbah`pkg-config --cflags --libs gtk+-2.0`
> 
> bahbahbah.c：在函数'main'中：
> 
> bahbahbah.c:28:1：错误：“，”标记之前的预期表达式

以下是我要编译的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <gtk/gtk.h>

#define EXIT_SUCCESS 0
#define EXIT_FAILURE 1

void closure(void)
{
    gtk_main_quit();
    printf("gtk_main_quit() has been called.\n");
}

void main(int argc, char* argv[])
{
    gboolean check = gtk_init_check(&argc, &argv);
    if (check == FALSE)
    {
        printf("Failed to initialize toolkit.\nTerminating.\n");
        exit(EXIT_FAILURE);
    }
    else
    {
        printf("Initialized toolkit.\n");
        GtkWidget* main_window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
        gtk_window_set_title((GtkWindow*)main_window, "BLAH");
        gtk_window_set_default_size((GtkWindow*)main_window, 700, 700);
        g_signal_connect(main_window, "delete-event", closure, void);
        gtk_widget_show(main_window);
        printf("Window created, sleeping in gtk_main().\n");
        gtk_main();
    }       
    printf("Exiting.\n");
    exit(EXIT_SUCCESS);
} 
```

请帮忙。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:36:12.390

在第 28 行使用`NULL`替换`void`。

```
g_signal_connect(main_window, "delete-event", closure, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:52:15.880

`void`是一个`Key-word`！有以下描述`g_signal_connect()`：

```
#define             g_signal_connect(instance, detailed_signal, c_handler, data)

Connects a GCallback function to a signal for a particular object.

The handler will be called before the default handler of the signal.

instance :
    the instance to connect to.

detailed_signal :
    a string of the form "signal-name::detail".

c_handler :
    the GCallback to connect.

data :
    data to pass to c_handler calls.

Returns :
    the handler id 
```

所以，你只想不向这个函数传递任何东西？那么你应该使用`NULL`.

# c++ - 在 VS2003 中使用项目前部分解决方案打开 C++ 项目

> ID：13831364
> 
> 赞同：2
> 
> 时间：2012-12-12T01:30:01.390
> 
> 标签：c++, visual-c++, projects-and-solutions

我继承了一个 C++ 项目，该项目可能是用 VC++ 编写的，甚至更早于该项目，然后被转换为更高版本的 Visual Studio。我没有任何文档，也没有人告诉我使用哪个版本的 VS 升级项目失败。我的要求是现在在 VS.Net 2003 中升级项目（编译和运行），当然还要修复一系列错误。到目前为止，我已经能够修复正确的引用并更新记事本中的 SLN 文件以在 VS.Net 2003 Pro 版中打开。但是，有一个项目的 preProject 部分引用了我无法弄清楚的一堆批处理、一个 vsd 和一个 WSE（我认为是明智的脚本）文件。

```
Project("{2150E333-8FDC-42A3-9474-1A3956D46DE8}") = "Solution Items", "Solution Items", "{7F317834-B915-4666-9882-64E4C8E6CF11}"
    ProjectSection(SolutionItems) = preProject
        Build\file1.bat = Build\file1.bat
        ...
        Build\Project1.vsd = Build\Project1.vsd
        Build\Project.wse = Build\Project.wse
        #more batch file referecnes
    EndProjectSection
EndProject 
```

以前一直报错，现在可以打开所有项目，但上面的“解决方案项”部分仍然导致项目未安装错误：“项目的应用程序未安装。请确保项目的应用程序类型 () 已安装。”

有没有办法可以修复上面给出的解决方案文件以打开和编译解决方案？我将 SLN 中列出的每个文件都放在正确的位置？也有人可以解释这个 preProject 部分到底是什么以及上面引用的所有文件会发生什么？TIA 寻求帮助。

# haskell - 共轭梯度法收敛

> ID：13831368
> 
> 赞同：2
> 
> 时间：2012-12-12T01:30:16.887
> 
> 标签：haskell, matrix, linear-algebra, sparse-matrix

我已经编写了 Gauss Seidel 和 Conjugate Gradient 迭代算法来解决 Haskell 中的矩阵（但这个问题与方法有关，而不是语言）。我的理解是，这两种算法都应该具有相似的收敛特性，并且在大多数情况下，CG 方法应该更快。[我已经对来自http://math.nist.gov/MatrixMarket/](http://math.nist.gov/MatrixMarket/)的对称正定矩阵进行了许多测试而且我几乎永远无法获得CG算法。收敛，而 GS 几乎总是这样。我找不到任何带有右侧向量的对称正定矩阵用于在线测试目的，所以我一直在任意创建自己的 RHS（也许这是问题的一部分？）。如果我在 Ax = b 中使用 (transpose A) * A 而不是 A，我可以让 CG 方法收敛，这只是迫使矩阵对称。我在这里包含了 CG 代码。它显然不会按原样编译。如果有人需要它来提供帮助，我会全部发布。对于来自[（伪代码和示例）的简单示例](http://en.wikipedia.org/wiki/Conjugate_gradient_method)[（类似问题）](https://stackoverflow.com/questions/12027026/incremental-conjugate-gradient-algorithm) ，它可以正常工作. 关于共轭梯度与高斯赛德尔收敛标准，我有什么遗漏吗？谁能指出我正确的方向来完成这项工作？谢谢。

```
conjGrad :: (Floating a, Ord a, Show a) => a -> SpMCR a -> SpVCR a -> SpVCR a -> (SpVCR a, Int)
conjGrad tol mA b x0 = loop x0 r0 r0 rs0 1
  where r0  = b - (mulMV mA x0)        
        rs0 = dot r0 r0
        loop x r p rs i
          | (varLog "residual = " $ sqrt rs') < tol = (x',i)          
          | otherwise                               = loop x' r' p' rs' (i+1)
          where mAp = mulMV mA p
                alpha = rs / (dot p mAp)
                x' = x + (alpha .* p)
                r' = r - (alpha .* mAp)
                rs' = dot r' r'
                beta = rs' / rs
                p'  = r' + (beta .* p)

(.*) :: (Num a) => a -> SpVCR a -> SpVCR a
(.*) s v = fmap (s *) v 
```

**编辑：**果然，我没有考虑到 MM 文件格式只包含对称矩阵的下对角线这一事实。谢谢。现在算法收敛了，但似乎比它应该进行的迭代次数更多。我的理解是，当使用精确算术时，CG 应该始终以少于矩阵顺序的迭代次数收敛。使用浮点 (Double) 的事实是否会产生如此大的差异（1.5 - 2 x 矩阵阶数是合理收敛所需的迭代）？

**跟进：**对于任何可能偶然发现这一点的人，事实证明我的大部分问题都与我用于测试的矩阵有关。似乎它们对于使用 CG 算法进行求解的条件很差。在某些情况下，简单的预处理会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:06:06.527

您可以从这里使用带有浮动的精确库（例如 CReal）来回答您的第二个问题：http://hackage.haskell.org/package/numbers[或](http://hackage.haskell.org/package/numbers)摆脱您的日志记录（我认为这是引入浮动约束的原因）和仅使用 Data.Ratio 中的有理数。

这当然会非常缓慢。但它应该让您研究浮点近似对收敛的影响。

# jakarta-ee - com.google.gwt.user.client.rpc.StatusCodeException：404

> ID：13831369
> 
> 赞同：0
> 
> 时间：2012-12-12T01:30:21.817
> 
> 标签：jakarta-ee, gwt, error-handling

我在 google GWT 中有以下错误 404：“Google App Engine Java 和 GWT 应用程序开发代码”。

该程序称为 connactr。

```
[ERROR] [connectr] - com.google.gwt.user.client.rpc.StatusCodeException: 404 <html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 404 NOT_FOUND</title>
</head>
<body>
<h2>HTTP ERROR: 404</h2>
<p>Problem accessing /connectr/loginService. Reason:
<pre>    NOT_FOUND</pre></p>
<hr /><i><small>Powered by Jetty://</small></i>                                                                   
</body>
</html> 
```

我的 web.xml：

```
 <!-- ===================== Login Service ===================== -->
  <servlet>
  <servlet-name>loginService</servlet-name>
  <servlet-class>com.metadot.book.connectr.server.LoginServiceImpl</servlet-class>

  </servlet>

 <servlet-mapping>
<servlet-name>loginService</servlet-name>
  <url-pattern>/connectr/loginService</url-pattern>
</servlet-mapping> 
```

Jetty给出的例外：

```
 java.lang.VerifyError: Expecting a stackmap frame at branch target 188 in method     com.metadot.book.connectr.server.servlets.LoginFilter.doFilter(Ljavax/servlet/ServletReques
t;Ljavax/servlet/ServletResponse;Ljavax/servlet/FilterChain;)V at offset 8
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
at java.lang.Class.getConstructor0(Class.java:2714)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:92)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:662)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
at org.mortbay.jetty.Server.doStart(Server.java:224)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:197)
at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:241)
at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148)
at com.google.appengine.tools.development.gwt.AppEngineLauncher.start(AppEngineLauncher.java:97)
at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1068)
at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
at com.google.gwt.dev.DevMode.main(DevMode.java:311) 
```

有相关的 impl 类。知道有什么问题吗？

提前谢谢你，伊丹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:16:41.437

您分享的 404 错误信息太少了。您需要在服务器端共享 gwt 抛出的确切异常以获得明确的答案。

1.  首先检查您是否有相关的 impl 类以及它是否在 claaspath 中，即码头应该加载它。

2.  检查客户端rpc调用时是否实例化。您的 rpc 服务调用是否达到了正确的服务实现。

3.  检查并解决服务器端抛出的任何异常服务 impl。

# algorithm - 循环第一次迭代的哨兵值？

> ID：13831384
> 
> 赞同：3
> 
> 时间：2012-12-12T01:31:41.233
> 
> 标签：algorithm, pseudocode, sentinel

想象一下下面的伪代码

```
objects[i], 1 <= i <= n 

objects[0] = 0

for i from 1 to n
  if(objects[i] - objects[i-1] > constant)
    do something 
```

我想知道这个任务是否有一个具体的名字`objects[0] = 0`。我知道当像这样的值用于停止循环时，它们被称为哨兵值。然而，在这种情况下，我使用它以便评估的第一个对象 (objects[1]) 将有一些可比较的东西 - 显然，`objects[0]`它不是一个真实的对象，只是一个标志。它仍然被称为哨兵值吗？这个还有别的名字吗？还是我根本不应该这样做？

如果我没有说清楚，请告诉我，我应该尝试以另一种方式解释我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:37:14.133

科门等人。在第 238 页*的算法简介*（第 3 版）中写道：

> 哨兵是一个虚拟对象，它允许我们简化边界条件。

这个定义足够宽泛，足以说明您的使用情况（例如，在 CLRS 中使用无穷大的标记值来简化合并排序的合并例程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:35:28.260

我一直称它为“哨兵”，无论是开始还是结束，还没有因此被解雇。

# wolfram-mathematica - NIntegrate 将明显非零的积分评估为零。被积函数是一组变形为分布的数据点

> ID：13831385
> 
> 赞同：1
> 
> 时间：2012-12-12T01:31:43.950
> 
> 标签：wolfram-mathematica, integration, distribution

我有一个代表概率分布的数据点列表。我需要整合这个分布。但是，由于我没有函数并且只有一组数据点，因此我想出了以下代码来表示概率分布：

```
dList1 = Import["Z-1.txt", "Table"];
dList2 = Import["Z_over-1.txt", "Table"];

dDist[X_,sym_] := (

  dList = 0;

  If[sym,
    dList = dList1;
  ,
    dList = dList2;
  ];

  val = 0;

  If[Abs[X] < Pi,
    i = 2;
    While[dList[[i]][[1]] < X, i++];

    width = dList[[i]][[1]] - dList[[i-1]][[1]];

    difX = dList[[i]][[1]] - X;
    difY = dList[[i]][[2]] - dList[[i-1]][[2]];

    val = dList[[i-1]][[2]] + (1-(difX/width)) difY;
  ];

  Return[val];
); 
```

其中数据点集在文本文件中。

执行以下命令：

```
Plot[dDist[x, True], {x, -1, 1}] 
```

给出了这个：

![绘图[dDist[x, True], {x, -1, 1}]](../Images/4de2aba687da616e5f657ab7922efbc5.png)

鉴于，执行此操作：

```
NIntegrate[dDist[x, True], {x, -1, 1}] 
```

评估为零，以及此警告： ![警告](../Images/47ef1cd0c0f8902394ae1e779daf067c.png)

我尝试增加 MinRecursion 无济于事。我不确定该怎么做，并且愿意接受任何建议，包括修改 dDist 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:47:40.017

没有您的数据可玩，我建议使用表格来创建在不连续处分离的分段函数。NIntegrate 应该处理那些没有问题的。

# oracle-sqldeveloper - 需要帮助使用带有 Oracle Database 11G 2 版本的 Oracle SQL Developer 3.2 创建新连接

> ID：13831387
> 
> 赞同：1
> 
> 时间：2012-12-12T01:32:00.550
> 
> 标签：oracle-sqldeveloper

我有 Windows 7 Home Premium（64 位）我尝试安装和卸载 Oracle Database XE，每次安装它时都会遇到两条错误消息。第一条 eroor 消息告诉我文件 C:\Users\Chris\AppData\Local\Temp{9D21B7C5-5DF8-450-B84A-48908DFACA7F}\ 之类的文件，当我单击它两次时它消失了，安装完成但是当我尝试运行 oracle 数据库 xe 时，它​​告诉我 http:\127.0.0.1%HTTPPORT%\apex\f?p=4950 找不到什么的。我不知道该怎么办。此外，一旦 igve 解决了这些问题并修复了它们，我将如何继续创建数据库。这是我的最终目标，即使用 oracle sql developer 和 oracle database xe 创建数据库以开始创建表和查询。如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:25:24.370

我遇到了和你一样的问题，我通过以下步骤解决了：

1.  在错误消息框仍然打开的情况下，单击 Windows 开始按钮并在搜索框中键入“regedit”。按回车。注册表编辑器将打开。

2.  在左侧列中，按如下方式展开文件夹：HKEY_CLASSES_ROOT -> Installer -> Products -> 266B7A….. -> SourceList-> Media

3.  在右列的名称下查找“1”。在同一行的“数据”下，该值应为“磁盘 1”或类似的值。右键单击该行，然后单击“修改”。

4.  将打开一个名为“编辑字符串”的窗口并输入您从 Oracle 安装程序获得的错误窗口中指示的地址，在“KEY_XE.reg”之前结束。它应该以一行数字/字母结尾，然后是“}\”。

5.  单击确定并关闭注册表编辑器。

6.  返回 Oracle 安装程序并单击错误消息框上的确定。

7.  这将需要一段时间，但最终，安装程序将指示安装完成。

8.  要检查一切是否正常，请单击 windows 开始按钮 -> 所有程序 -> Oracle Database 11g Express Edition -> 开始使用。

9.  将出现一个 Web 浏览器并加载 Oracle Database Get Started 页面。

    希望对你有帮助！

# gwt - GWT rpc 失败 - 基本 url 不是我所期望的

> ID：13831388
> 
> 赞同：0
> 
> 时间：2012-12-12T01:32:02.993
> 
> 标签：gwt, resources, rpc

我正在尝试熟悉使用 GWT api 创建基于 Web 的应用程序。我一直在关注一些关于 GWT 的教程，但还不能进行 RPC 调用。从广泛的角度来看问题，我的目标是进行服务器调用以运行我知道有效的一系列数据库测试（我测试了此代码）。

- -编辑 - -

我认为这里的问题是正在这里寻找资源：/MatesWeb/org.matesweb.Main/peopleService

当我认为应该在这里寻找它时：/MatesWeb/peopleService

---END_EDIT---

这是我认为相关的信息和代码：

- 使用 netbeans

- 我得到的错误是“/MatesWeb/org.matesweb.Main/PeopleService - 描述 - 请求的资源不可用。”

-GWT.getModuleBaseURL() 返回：:8080/MatesWeb/org.matesweb.Main/

- 浏览器中的 URL 为：:8080/MatesWeb/

来自 web.xml 文件

```
<servlet>
    <servlet-name>peopleService</servlet-name>
    <servlet-class>org.matesweb.server.PeopleServiceImpl</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>peopleService</servlet-name>
    <url-pattern>/peopleService</url-pattern>
</servlet-mapping> 
```

来自 PeopleService 服务包 org.matesweb.client；

```
import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("PeopleService")
public interface PeopleService extends RemoteService {

String[] saveGetPerson(String[] persInfo);
int runTests();

} 
```

来自 PeopleServiceImpl 包 org.matesweb.server；

```
import com.google.gwt.user.server.rpc.RemoteServiceServlet;
import org.matesweb.client.PeopleService;

import org.matesweb.server.tests.DbTest;

class PeopleServiceImpl extends RemoteServiceServlet implements PeopleService {

    @Override
    public String[] saveGetPerson(String[] persInfo) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public int runTests()
    {
        int retInt;

        DbTest dbTest = new DbTest();
        retInt = dbTest.runTests();
        return retInt;
    }

} 
```

来自 PeopleServiceAsync

```
package org.matesweb.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface PeopleServiceAsync
{
  void saveGetPerson(String[] persInfo, AsyncCallback<String[]> persInformation);
  void runTests(AsyncCallback<Integer> retInt);
} 
```

知道这里发生了什么吗？

干杯，尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:03:01.080

```
@RemoteServiceRelativePath("PeopleService") 
```

`@RemoteServiceRelativePath`注释用于决定要点击的 url 。服务器的这个*路径*是*相*对于编译模块本身的 - 从路径加载的 gwt 应用程序`/MatesWeb/org.matesweb.Main/`，因此正在寻找服务`/MatesWeb/org.matesweb.Main/PeopleService`。我假设这意味着您在`MatesWeb/`目录中有一个 html 文件（可能 .war 文件称为 MatesWeb？），其中存在已编译的应用程序`org.matesweb.Main/`，包括初始 JS 文件`org.matesweb.Main.nocache.js`.

如果您想告诉在 找到该服务`/MatesWeb/peopleService`，您有两种选择。首先是修改注解来备份一个目录，像这样：

```
@RemoteServiceRelativePath("../peopleService") 
```

使用`..`，我表示父目录，并且我还更改了路径部分“peopleService”的大小写 - 这可能会或可能不会重要。第二种选择是以编程方式设置 url：

```
PeopleServiceAsync service = GWT.create(PeopleService.class);
((ServiceDefTarget)service).setServiceEntryPoint("/MatesWeb/peopleService"); 
```

`@RemoteServiceRelativePath`如javadocs [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/RemoteServiceRelativePath.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/rpc/RemoteServiceRelativePath.html)中所引用。

相反，如果您希望让客户端保持原样并告诉服务器该服务应该位于客户端期望的路径中，您可以修改`web.xml`以使 servlet 在客户端当前期望找到的路径上可用：

```
<servlet-mapping>
    <servlet-name>peopleService</servlet-name>
    <url-pattern>/MatesWeb/org.matesweb.Main/PeopleService</url-pattern>
</servlet-mapping> 
```

再次注意我已经改变了情况 - 这可能无关紧要，但我通常喜欢保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:07:59.597

首先预感 PeopleService 必须是 @RemoteServiceRelativePath 中的 peopleService。请使用 firebug 监控您的 rpc 请求。您可以轻松地观察和验证此类请求 url 问题。

在 web.xml 中更新您的 URL 模式，如下所示

```
<url-pattern>/org.matesweb.Main/greet</url-pattern> 
```

# objective-c - 在第一个 NSTableCellView 上方画一条线

> ID：13831389
> 
> 赞同：1
> 
> 时间：2012-12-12T01:32:11.367
> 
> 标签：objective-c, macos, nstableview, nstablecellview

如何在我的 NSTableCellView 上方画一条线？

我知道在 iOS 上我可能会使用部分标题，但我宁愿不使用 NoodleKit 之类的东西来处理黑线。

我想到了一些我不喜欢的替代方案：

1）自定义背景图像仅用于绘制暗线的第一行。

2）添加1px黑线作为自定义单元格作为NSTableView中的第一个单元格。

有没有更好的解决方案？

# google-bigquery - bigquery url 解码

> ID：13831391
> 
> 赞同：9
> 
> 时间：2012-12-12T01:32:31.570
> 
> 标签：google-bigquery

有没有一种简单的方法可以在 BigQuery 查询语言中进行 URL 解码？我正在使用一个表，该表有一列包含某些值中的 URL 编码字符串。例如：

```
http://xyz.com/example.php?url=http%3A%2F%2Fwww.example.com%2Fhello%3Fv%3D12345&foo=bar&abc=xyz 
```

我像这样提取“url”参数：

```
SELECT REGEXP_EXTRACT(column_name, "url=([^&]+)") as url 
from [mydataset.mytable] 
```

这给了我：

```
http%3A%2F%2Fwww.example.com%2Fhello%3Fv%3D12345 
```

我想做的是：

```
SELECT URL_DECODE(REGEXP_EXTRACT(column_name, "url=([^&]+)")) as url 
from [mydataset.mytable] 
```

从而返回：

```
http://www.example.com/hello?v=12345 
```

如果可能，我想避免使用多个 REGEXP_REPLACE() 语句（替换 %20、%3A 等）。

想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-07-06T22:26:42.473

下面是在@sigpwned 答案之上构建的，但稍微重构并用 SQL UDF 包装（它没有限制 JS UDF 可以安全使用）

```
#standardSQL
CREATE TEMP FUNCTION URLDECODE(url STRING) AS ((
  SELECT SAFE_CONVERT_BYTES_TO_STRING(
    ARRAY_TO_STRING(ARRAY_AGG(
        IF(STARTS_WITH(y, '%'), FROM_HEX(SUBSTR(y, 2)), CAST(y AS BYTES)) ORDER BY i
      ), b''))
  FROM UNNEST(REGEXP_EXTRACT_ALL(url, r"%[0-9a-fA-F]{2}|[^%]+")) AS y WITH OFFSET AS i 
));
SELECT 
  column_name, 
  URLDECODE(REGEXP_EXTRACT(column_name, "url=([^&]+)")) AS url
FROM `project.dataset.table` 
```

可以通过以下问题的示例进行测试

```
#standardSQL
CREATE TEMP FUNCTION URLDECODE(url STRING) AS ((
  SELECT SAFE_CONVERT_BYTES_TO_STRING(
    ARRAY_TO_STRING(ARRAY_AGG(
        IF(STARTS_WITH(y, '%'), FROM_HEX(SUBSTR(y, 2)), CAST(y AS BYTES)) ORDER BY i
      ), b''))
  FROM UNNEST(REGEXP_EXTRACT_ALL(url, r"%[0-9a-fA-F]{2}|[^%]+")) AS y WITH OFFSET AS i 
));
WITH `project.dataset.table` AS (
  SELECT 'http://example.com/example.php?url=http%3A%2F%2Fwww.example.com%2Fhello%3Fv%3D12345&foo=bar&abc=xyz' column_name
)
SELECT 
  URLDECODE(REGEXP_EXTRACT(column_name, "url=([^&]+)")) AS url,
  column_name
FROM `project.dataset.table` 
```

结果

```
Row url                                     column_name  
1   http://www.example.com/hello?v=12345    http://example.com/example.php?url=http%3A%2F%2Fwww.example.com%2Fhello%3Fv%3D12345&foo=bar&abc=xyz 
```

> 使用进一步优化的 SQL UDF 进行更新

```
CREATE TEMP FUNCTION URLDECODE(url STRING) AS ((
  SELECT STRING_AGG(
    IF(REGEXP_CONTAINS(y, r'^%[0-9a-fA-F]{2}'), 
      SAFE_CONVERT_BYTES_TO_STRING(FROM_HEX(REPLACE(y, '%', ''))), y), '' 
    ORDER BY i
    )
  FROM UNNEST(REGEXP_EXTRACT_ALL(url, r"%[0-9a-fA-F]{2}(?:%[0-9a-fA-F]{2})*|[^%]+")) y
  WITH OFFSET AS i 
)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:08:30.757

这是一个很好的功能请求，但目前没有提供 URL 解码的内置 BigQuery 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-28T01:09:35.767

另一种解决方法是使用用户定义的函数。

```
#standardSQL
CREATE TEMPORARY FUNCTION URL_DECODE(enc STRING)
RETURNS STRING
LANGUAGE js AS """
  try { 
    return decodeURI(enc);;
  } catch (e) { return null }
  return null;
""";

SELECT ven_session, 
  URL_DECODE(REGEXP_EXTRACT(para,r'&kw=(\w|[^&]*)')) AS q
FROM raas_system.weblog_20170327 
WHERE para like '%&kw=%'
LIMIT 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-06T19:12:40.043

我同意这里的每个人都`URLDECODE`应该是本机功能。但是，在这种情况发生之前，可以编写“本机” `URLDECODE`：

```
SELECT id, SAFE_CONVERT_BYTES_TO_STRING(ARRAY_TO_STRING(ps, b'')) FROM (SELECT
  id,
  ARRAY_AGG(CASE
    WHEN REGEXP_CONTAINS(y, r"^%") THEN FROM_HEX(SUBSTR(y, 2))
    ELSE CAST(y AS bytes)
  END ORDER BY i) AS ps
  FROM (SELECT x AS id, REGEXP_EXTRACT_ALL(x, r"%[0-9a-fA-F]{2}|[^%]+") AS element FROM UNNEST(ARRAY['domodossola%e2%80%93locarno railway', 'gabu%c5%82t%c3%b3w']) AS x) AS x
  CROSS JOIN UNNEST(x.element) AS y WITH OFFSET AS i GROUP BY id); 
```

在此示例中，我尝试并测试了使用来自 Wikipedia 的几个百分比编码的页面名称作为输入的实现。它也应该适用于您的输入。

显然，这是极其笨拙的！出于这个原因，我建议构建一个物化连接表，或者将它包装在一个视图中，而不是在查询中使用这个表达式“naked”。但是，它似乎确实完成了工作，并且没有达到 UDF 限制。

编辑：[@MikhailBerylyant 下面的帖子](https://stackoverflow.com/questions/13831391/bigquery-url-decode/51218333#51218333)将这个繁琐的实现包装成一个漂亮、整洁的小 SQL UDF。这是处理这个问题的更好方法！

# php - PHP zip 解压和重命名

> ID：13831396
> 
> 赞同：4
> 
> 时间：2012-12-12T01:33:00.950
> 
> 标签：php, zip, file-rename

下面的代码有点工作。

```
$zip = new ZipArchive;
if($zip->open($path) === TRUE) {
   $zip->renameName('list.csv', 'list'.$batch_id.'.csv');
   $zip->extractTo('list_output');
   $zip->close();
} 
```

zip 内的文件已重命名，但不会解压缩。如果我删除 renameName 行，那么它可以很好地提取。我需要它来做这两件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:36:04.047

关于什么？

```
$zip = new ZipArchive;
if($zip->open($path) === TRUE) {
   $zip->extractTo('list_output');
   $zip->close();
}

rename('list_output/list.csv', 'list_output/list'.$batch_id.'.csv'); 
```

在 CPU/内存上也会更容易。

# java - 获取 FinalizableDelegatedExecutorService 的状态

> ID：13831398
> 
> 赞同：4
> 
> 时间：2012-12-12T01:33:19.480
> 
> 标签：java, multithreading, executorservice

我正在使用此代码`ExecutorService`在 java 中获取：

`this.exec = Executors.newSingleThreadExecutor();`

现在我想知道它处理了多少工作，有多少在队列中（最重要的是！），以及基本上我能得到的所有信息。但是普通人`ExecutorService`没有这个信息。但是根据[这个问题的答案](https://stackoverflow.com/questions/2265869/elegantly-implementing-queue-length-indicators-to-executorservices/2266421#comment18986560_2266421)，我可以将其类型转换为，`ThreadPoolExecutor`因为这就是它返回的内容。嗯，这听起来很容易……但有一个问题。**我的机器不回来了`ThreadPoolExecutor`！**

相反，我得到了一个`java.util.concurrent.Executors$FinalizableDelegatedExecutorService`，当尝试对其进行类型转换时，这是不可能的，因为该类是不可见的。

那么如何才能知道我的状态`ExecutorService`呢？

*如果您非常好奇并想知道我在使用我`ExecutorService`的什么（如果这很重要），请阅读我之前提出的[这个问题。](https://stackoverflow.com/questions/13145588/java-single-worker-thread-for-sql-update-statements)它基本上用于 SQL 语句。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:34:34.687

选项1

您可以创建自己的 ThreadPoolExecutor - 这就是`newFixedThreadPool`：

```
ExecutorService executor = new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue<Runnable>()); 
```

然后，您可以保留对队列的引用以查看它有多满。您甚至可以传入一个修改后的版本，该版本会记录收到的作业数量。

选项 2

您可以使用[可以`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)帮助您知道任务何时完成的 —— 然后您可以计算您已提交的作业数/已完成的作业数。

# javascript - 无依赖的 JavaScript onLoad

> ID：13831399
> 
> 赞同：0
> 
> 时间：2012-12-12T01:33:21.213
> 
> 标签：javascript, onload, library-design

我正在开发一个 JavaScript 库，它需要让用户能够在加载时运行一些代码。当然，我熟悉jQuery之类的`window.onload`东西。`$(function() {});`但是我不想依赖另一个库，我希望这个特定的函数（当然还有其他的库）是跨浏览器的。

那么是否有一种可接受的方式来附加到`onload`函数而不覆盖另一个库的加载功能（或者如果它们在我的之后包含另一个库，则覆盖我的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:01:51.743

公开一个初始化/加载方法，并要求消费者在加载时调用它。换句话说，将问题推给使用该库的任何人，并且可能会使用 jQuery 提供的便捷方法。

这是一个已解决的问题，但并不简单：[“$(document).ready equivalent without jQuery”的答案有 jQuery 如何做到这一点的代码](https://stackoverflow.com/questions/799981/document-ready-equivalent-without-jquery/800010#800010)。

更多点击：[没有 jQuery 的 javascript onload](https://www.google.com/search?q=javascript+onload+without+jquery)

# python - 在 Python 中：创建表格以可视化成对数据

> ID：13831400
> 
> 赞同：1
> 
> 时间：2012-12-12T01:33:50.777
> 
> 标签：python

我已经进行了一堆成对比较（准确地说是 241 x 241）。
生成的文件如下所示：

```
A,X,10
A,Y,20
X,Y,15 
```

我想将其转换为显示所有成对比较的表格。即这样的东西

```
,A,X,Y
A,,10,20
X,10,,15
Y,20,15,, 
```

我什至不知道如何开始解决这个问题。任何帮助，建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:51:22.080

将配对数据存储到字典中：

```
result_dict = {
    (A, X): 10,
    (A, Y): 20,
    (X, Y): 15,
} 
```

和行/列标签：

```
cols = sorted(set(a for a, b in result_dict.iterkeys()))
rows = sorted(set(b for a, b in result_dict.iterkeys())) 
```

那么这就是你要打印行的方式......

```
for b in rows:
    row = list(result_dict.get((a, b), None) for a in cols)
    # print the row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:51:32.983

我觉得有更有效的方法，但你可以试一试。它使用`csv`模块来加载/解析您的数据，然后也将其写回`csv`（假设您希望在文件中输出，即 - 如果没有，可以调整）：

```
import csv
from collections import defaultdict

# Open the input file and read it all into a defaultdict
with open('table.csv', 'rb') as f:
  reader = csv.reader(f)

  # Dictionary to hold the nested values
  # This will be keyed by the letter ID, and each line of
  # the file will be written twice (so A,X,10 will be represented
  # as {'A': {'X': 10}, 'X': {'A': 10}}
  d = defaultdict(dict)
  for row in reader:
    d[row[0]][row[1]] = row[2]
    d[row[1]][row[0]] = row[2]

# Now we open the output file and write out our defaultdict
with open('t_out.csv', 'wb') as o:
  # Here our fieldnames will start with the 'empty' first header
  # and then be comprised of the keys of the dictionary (which
  # should contain all possible values for the table)
  fieldnames = [' '] + d.keys()
  writer = csv.DictWriter(o, fieldnames=fieldnames)

  # In Python 2.7, you can use writer.writeheaders()
  writer.writerow(dict((h, h) for h in fieldnames))

  # Now iterate through our dictionary, creating a row
  # dictionary that will contain the information to be written
  for k, v in d.iteritems():
    # Here we are putting the key in the 'empty' first column
    v[' '] = k
    writer.writerow(v) 
```

# php - 在 Cygwin 中编译 PHP IMAP 扩展：缺少 U8T_CANONICAL？

> ID：13831401
> 
> 赞同：0
> 
> 时间：2012-12-12T01:33:53.757
> 
> 标签：php, cygwin, php-extension

我已经在我的 Windows 7 64 位系统上成功安装了 Cygwin。

我已经安装并编译了很多东西，没有任何问题。

*   `--with-imap and --with-imap-ssl`使用选项编译 PHP 5.4.9 时出现错误。
*   我已经安装`c-client`在 Cygwin 中，它似乎安装在`/usr/include/c-client`.
*   然后，我`./configure`使用 .php 将 for PHP 指向该位置`--with-imap=/usr/include/c-client`。

即使这样做了，我在配置过程中也会收到以下错误：

```
configure: error: utf8_mime2text() has new signature, but U8T_CANONICAL is missing. This should not happen. Check config.log for additional information. 
```

我找不到任何关于 Cygwin 的更多信息。Linux 的大多数来源/信息都说这是因为缺少 c-client，但就我而言，我安装了 c-client。

这是因为 Cygwin 不支持 PHP 的 IMAP 扩展吗？有没有人在 Cygwin 上成功编译了 PHP 的 IMAP 扩展？

* * *

更新：刚刚从[这里](http://www.washington.edu/imap/)下载了 c-client，希望如果我自己编译它，我会得到所需的一切，包括`libc-client.a`.

该软件包看起来很有希望，因为它包含 Cygwin 的构建目标。但是，如果我运行`make cyg`，我最终会出现此错误：

```
In file included from /usr/include/openssl/crypto.h:131,
                 from /usr/include/openssl/bio.h:69,
                 from /usr/include/openssl/x509v3.h:61,
                 from osdep.c:210:
/usr/include/openssl/ossl_typ.h:153: error: parse error before numeric constant
/usr/include/openssl/ossl_typ.h:199: error: parse error before numeric constant
In file included from /usr/include/openssl/x509v3.h:62,
                 from osdep.c:210:
/usr/include/openssl/x509.h:199:1: pasting "stack_st_" and "(" does not give a valid preprocessing token
In file included from /usr/include/openssl/x509v3.h:62,
                 from osdep.c:210:
/usr/include/openssl/x509.h:199: error: parse error before numeric constant
/usr/include/openssl/x509.h:210: error: parse error before numeric constant
/usr/include/openssl/x509.h:235: error: parse error before '(' token
/usr/include/openssl/x509.h:239: error: parse error before '}' token
/usr/include/openssl/x509.h:243: error: parse error before "X509_REQ_INFO"
/usr/include/openssl/x509.h:247: error: parse error before '}' token
/usr/include/openssl/x509.h:254: error: parse error before '(' token
/usr/include/openssl/x509.h:256: error: parse error before "LPCSTR"
/usr/include/openssl/x509.h:262: error: parse error before '}' token
/usr/include/openssl/x509.h:281: error: parse error before "X509_CINF"
/usr/include/openssl/x509.h:309: error: parse error before '}' token
/usr/include/openssl/x509.h:330: error: parse error before numeric constant
/usr/include/openssl/x509.h:453: error: parse error before '(' token
/usr/include/openssl/x509.h:459: error: parse error before '}' token
/usr/include/openssl/x509.h:464: error: parse error before "X509_CRL_INFO"
/usr/include/openssl/x509.h:484: error: parse error before '}' token
In file included from /usr/include/openssl/x509.h:600,
                 from /usr/include/openssl/x509v3.h:62,
                 from osdep.c:210:
/usr/include/openssl/x509_vfy.h:150: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:152: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:159: error: parse error before '}' token
/usr/include/openssl/x509_vfy.h:203: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:204: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:209: error: parse error before '}' token
/usr/include/openssl/x509_vfy.h:221: error: parse error before "X509_LOOKUP_METHOD"
/usr/include/openssl/x509_vfy.h:225: error: parse error before '}' token
/usr/include/openssl/x509_vfy.h:253: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:254: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:278: error: parse error before '}' token
/usr/include/openssl/x509_vfy.h:407: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:408: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:415: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:416: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:435: error: parse error before "X509_LOOKUP_METHOD"
/usr/include/openssl/x509_vfy.h:437: error: parse error before '*' token
/usr/include/openssl/x509_vfy.h:438: error: parse error before '*' token
/usr/include/openssl/x509_vfy.h:443: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:456: error: parse error before '*' token
/usr/include/openssl/x509_vfy.h:459: error: parse error before '(' token
/usr/include/openssl/x509_vfy.h:461: error: parse error before '(' token
In file included from /usr/include/openssl/x509.h:601,
                 from /usr/include/openssl/x509v3.h:62,
                 from osdep.c:210:
/usr/include/openssl/pkcs7.h:88: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:90: error: parse error before '}' token
/usr/include/openssl/pkcs7.h:95: error: parse error before "PKCS7_ISSUER_AND_SERIAL"
/usr/include/openssl/pkcs7.h:104: error: parse error before '}' token
/usr/include/openssl/pkcs7.h:104: error: parse error before "LPCSTR"
In file included from /usr/include/openssl/x509.h:601,
                 from /usr/include/openssl/x509v3.h:62,
                 from osdep.c:210:
/usr/include/openssl/pkcs7.h:106:1: pasting "stack_st_" and "(" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:106: error: parse error before numeric constant
/usr/include/openssl/pkcs7.h:112: error: parse error before "PKCS7_ISSUER_AND_SERIAL"
/usr/include/openssl/pkcs7.h:116: error: parse error before '}' token
/usr/include/openssl/pkcs7.h:279: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:279: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:279: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:279: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:279: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:281: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:293: error: parse error before "LPCSTR"
/usr/include/openssl/pkcs7.h:293:1: pasting ")" and "_new" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:293: error: parse error before numeric constant
/usr/include/openssl/pkcs7.h:293:1: pasting ")" and "_free" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:293: error: parse error before "LPCSTR"
/usr/include/openssl/pkcs7.h:293:1: pasting "d2i_" and "(" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:293:1: pasting "i2d_" and "(" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:293: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:293: error: parse error before numeric constant
/usr/include/openssl/pkcs7.h:293:1: pasting ")" and "_it" does not give a valid preprocessing token
/usr/include/openssl/pkcs7.h:294: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:294: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:294: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:294: error: parse error before '*' token
/usr/include/openssl/pkcs7.h:314: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:316: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:317: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:322: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:323: error: parse error before '(' token
/usr/include/openssl/pkcs7.h:331: error: parse error before "LPCSTR"

.... 
```

在这一点上，我不知道问题出在 openssl 头文件还是 libc-client 上。我的 OpenSSL 版本是`OpenSSL 1.0.1c 10 May 2012`.

任何输入表示赞赏。

我通过设置 SSLTYPE=none 尝试在不使用 SSL 的情况下进行构建，并且构建成功。但是，我需要 SSL 支持，所以我仍在尝试找到一种使用 SSL 构建的方法。

# sql-server - 如何在 SQL server 2008 报表服务中同时通过电子邮件和 Windows 文件发送报表

> ID：13831412
> 
> 赞同：-1
> 
> 时间：2012-12-12T01:34:53.767
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

我正在使用 SQL Server 2008。

场景是：我们每天要生成大约两百份报告，需要大量的时间在数据库中查询和细化数据。我们希望报告可以通过电子邮件发送并同时保存在 windows 文件系统中。所以该方法需要两种不同的订阅方式，对于两种传递方式是不可接受的。

想知道我们是否可以通过直接自定义订阅或编写一些 dll 来增强它（比如允许我们在编辑订阅时选择新的自定义交付）。你能给我一些想法吗？如果没有，我们必须编写一个新程序来完成它..但这需要努力..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:39:59.627

一种选择是[缓存报告](http://msdn.microsoft.com/en-us/library/ms155927.aspx)，以便它们在第二次快速运行。

另一种选择是将文件放在 Windows 文件共享中，然后使用[SSIS SendMail](http://msdn.microsoft.com/en-us/library/ms142165%28v=sql.105%29.aspx)获取文件并通过电子邮件发送出去。

另一种选择是编写您自己的报表运行器来运行报表并根据需要处理它们。我对 Reporting Services 调度程序选项不满意，就这样做了。这并不像您想象的那么难，[Microsoft 有一些代码可以帮助您入门](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render%28v=sql.105%29.aspx)。

# rest - 无法删除最后一个联系人 - 什么 Http 状态代码？

> ID：13831429
> 
> 赞同：8
> 
> 时间：2012-12-12T01:36:25.560
> 
> 标签：rest, http-status-codes, asp.net-web-api

我目前正在构建一个 Web API，并且有一个特定的场景，我无法确定哪个 HTTP 状态代码最适合返回。

**情景**

我有一个“客户”资源，它拥有一组联系人资源。

不变的是客户必须始终至少有一个联系人。因此，如果请求删除联系人并且此联系人是给定客户端的最后一个联系人，我需要返回一个适当的 HTTP 响应，指示该请求无法完成，因为您“无法删除最后一个联系人”。

我的感觉是这应该属于“4xx 客户端错误”的类别

我考虑了以下状态代码：

**400 Bad Request** - 我已经排除了这一点，因为它专门针对服务器无法理解的格式错误的请求。

**405 Method Not Allowed** - 起初这似乎很合适，但我认为 405 表示永远不应该允许这种方法，但是上述情况只是暂时的。想法？

**409 Conflict** - 我一直倾向于这个，但是这个代码给出的常见示例通常是并发异常/编辑冲突。

有人对我在这种情况下应该如何应对有任何指导吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T02:32:06.570

关键是在使用特定状态代码时查看客户端和缓存的期望。

以下是一些有用的 RFC2616 块：

> 10.4.1\. 400 错误请求
> 
> 由于语法错误，服务器无法理解该请求。客户端不应该在没有修改的情况下重复请求。

这表明请求本身是完全错误的——无论是语法还是协议。您的具体情况确实是应用程序协议错误，因此这可能确实是合适的。

> 10.4.6。405 方法不允许
> 
> Request-URI 所标识的资源不允许使用 Request-Line 中指定的方法。响应必须包含一个 Allow 标头，其中包含所请求资源的有效方法列表。

这是一个瞬态状态代码。如果`DELETE`特指联系人资源本身（例如，`DELETE /contacts/D9DF5176-EEE4-4C70-8DA7-BA57B82027A8`），那么这可能是最合适的状态代码。但是，如果`DELETE`它位于不同的资源或带有查询的资源（例如，`DELETE /contacts?index=12`）上，那么我不会返回 405。再说一次，我通常避免`DELETE`与任何类似查询的东西一起使用。

> 10.4.10。409 冲突
> 
> 由于与资源的当前状态冲突，无法完成请求。仅在预期用户可能能够解决冲突并重新提交请求的情况下才允许使用此代码。响应正文应该包含足够的信息让用户识别冲突的来源。理想情况下，响应实体将包含足够的信息供用户或用户代理解决问题；但是，这可能是不可能的，也不是必需的。

乍一看，这似乎是最合适的状态。在你的情况下，我可能更喜欢 400。409 将清楚地表明与资源存在冲突，但除了完全改变资源（即，首先添加联系人）之外，请求者实际上无法做任何事情来改变结果。大多数 409 响应是乐观并发失败，例如尝试修改自检索后已修改的资源。例如，查看基于[Apache Adbera 构建的 AtomServer 返回的并发故障](http://atomserver.codehaus.org/docs/protocol_reference.html)。

因此，所有这些。我可能会使用类似的东西`400 Cannot Delete Last Contact`作为响应线。请记住，您可以更改与状态代码相关的短语。现在是做这种事情的好时机。

# nhibernate - 转换为按代码映射会导致主要的性能问题

> ID：13831430
> 
> 赞同：1
> 
> 时间：2012-12-12T01:36:25.813
> 
> 标签：nhibernate, mapping-by-code

我有一个使用映射配置文件的 NHibernate 项目。我正在使用 SQL Server 数据库。

我想通过代码切换到映射。我的方法是一次做一堂课，确认每次转换都通过了所有测试。

混合这两个映射非常简单：

```
 public static ISessionFactory SessionFactory
  {
     get
     {
        if (_sessionFactory == null)
        {
           var configuration = new Configuration();

           configuration.Configure();
           configuration.AddAssembly(typeof(Entities.Player).Assembly);

           var mapper = new NHibernate.Mapping.ByCode.ModelMapper();
           // Here are the entities I've switched to mapping-by-code
           DATMedia.CMS.EntityLibrary.Mappings.ScheduleMediaItem.Map(mapper);
           DATMedia.CMS.EntityLibrary.Mappings.Schedule.Map(mapper);

           configuration.AddMapping(mapper.CompileMappingForAllExplicitlyAddedEntities());
           _sessionFactory = configuration.BuildSessionFactory();
        }
        return _sessionFactory;
     }
  } 
```

但是，当我将`Schedule`映射更改为按代码映射时，我遇到了主要的性能问题。调用`Session.Flush`将需要 12 秒，这超出了微不足道的测试数据量。

我切换回 XML 映射，性能问题就消失了。

有没有其他人遇到过这个问题？

我将包括之前和之后的映射`schedule`，以防万一有明显的缺陷：

通过配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
   <class name="DATMedia.CMS.EntityLibrary.Entities.Schedule, DATMedia.CMS.EntityLibrary" table="cms_Schedule">
      <id name="Id" column="Id" type="Int64">
         <generator class="identity" />
      </id>
      <property name="Date" column="Date" type="Timestamp" />
      <many-to-one name="SourceTemplate" column="SourceTemplate_Id" class="DATMedia.CMS.EntityLibrary.Entities.ScheduleTemplate, DATMedia.CMS.EntityLibrary" cascade="none" fetch="join" lazy="proxy"/>
     <!-- 
      Note that we are not using cascading deletes here.
      This will be handled by SQL Server through ON DELETE CASCADE foreign key constraints     
     -->
      <bag name="MediaItems" inverse="true" cascade="save-update" lazy="true" order-by="PlayIndex">
         <key column="Schedule_Id" />
         <one-to-many class="DATMedia.CMS.EntityLibrary.Entities.ScheduleMediaItem, DATMedia.CMS.EntityLibrary"/>
      </bag>
     <bag name="PlayerGroups" table="cms_ManyToMany_PlayerGroupSchedules_PlayerGroup_Schedule" lazy="true" cascade="save-update">
       <key column="Schedule_Id" />
       <many-to-many column="PlayerGroup_Id"
                     class="DATMedia.CMS.EntityLibrary.Entities.PlayerGroup, NHibernateManyToMany" />
     </bag>
   </class>
</hibernate-mapping> 
```

并通过代码进行映射：

```
 public static void Map(ModelMapper mapper)
    {
        mapper.Class<DATMedia.CMS.EntityLibrary.Entities.Schedule>(
            classMapper =>
            {
                classMapper.Table("cms_Schedule");
                classMapper.Id(x => x.Id, map =>
                    {
                        map.Column("Id");
                        map.Generator(Generators.Identity);
                    });
                classMapper.Property(
                        s => s.Date,
                        propertyMapper =>
                        {
                            propertyMapper.Column("Date");
                            propertyMapper.NotNullable(true);
                        }
                );
                classMapper.ManyToOne(
                                s => s.SourceTemplate,
                                manyToOneMapper =>
                                {
                                    manyToOneMapper.Column("SourceTemplate_Id");
                                    manyToOneMapper.Cascade(Cascade.None);
                                    manyToOneMapper.Fetch(FetchKind.Join);
                                    manyToOneMapper.Lazy(LazyRelation.Proxy);
                                }
                );
                classMapper.Bag(
                            s => s.MediaItems,
                            bagPropertyMapper =>
                            {
                                bagPropertyMapper.Key(keyMapper =>
                                                    {
                                                        keyMapper.Column("Schedule_Id");

                                                    }
                                );
                                bagPropertyMapper.Inverse(true);
                                bagPropertyMapper.Cascade(Cascade.Persist);
                                bagPropertyMapper.Lazy(CollectionLazy.Lazy);
                                bagPropertyMapper.OrderBy(smi => smi.PlayIndex);
                            }
                );
                classMapper.Bag(
                        s => s.PlayerGroups,
                        bagPropertyMapper =>
                        {
                            bagPropertyMapper.Key(keyMapper =>
                                {
                                    keyMapper.Column("Schedule_Id");
                                });

                            bagPropertyMapper.Table("cms_ManyToMany_PlayerGroupSchedules_PlayerGroup_Schedule");
                            bagPropertyMapper.Lazy(CollectionLazy.Extra);
                            bagPropertyMapper.Cascade(Cascade.Persist);
                        },
                        collectionElementRelation =>
                            {
                                collectionElementRelation.ManyToMany(manyToManyMapper =>
                                    {
                                        manyToManyMapper.Column("PlayerGroup_Id");
                                    }
                                );
                            }
                    );
            }

            );
    } 
```

* * *

**稍后编辑**

我通过不在`Flush`事务中调用来解决问题。

我试图创建一些更简单的测试代码来复制问题，但没有成功（我所有的测试代码都运行得非常快，无论我调用 Flush 多少次）。这可能是因为我将某些实体的密钥生成从 转换`Identity`为`HiLo`.

所以在我看来，我的代码正在创建一个导致问题的特定配置，希望这不会再次困扰我。

如果我猜到了，我会说导致问题的配置涉及对长时间运行的事务的轻率使用与身份密钥生成的结合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:00:15.680

我在很多项目中使用了混合映射，并且没有遇到您描述的任何问题。我不明白为什么冲洗需要 12 秒。

我的混合映射技术与您的略有不同，我不能 100% 确定`order`您的配置是否重要，值得一试。见[http://puredotnetcoder.blogspot.co.uk/2011/07/mixed-mappings-with-hbm-and-mapping-by.html](http://puredotnetcoder.blogspot.co.uk/2011/07/mixed-mappings-with-hbm-and-mapping-by.html)

我认为您已导出所有映射并仔细检查它们**前后**是否相同。见[http://puredotnetcoder.blogspot.co.uk/2011/07/view-xml-generated-when-mapping-by-code.html](http://puredotnetcoder.blogspot.co.uk/2011/07/view-xml-generated-when-mapping-by-code.html)

# java - 我需要在 java 中找到一个带有 where 子句的平均值并返回值的 sql 语句

> ID：13831438
> 
> 赞同：0
> 
> 时间：2012-12-12T01:37:35.403
> 
> 标签：java, sql, average

到目前为止，我的代码是：

```
try{

    stmt = con.createStatement();

    String sql = "SELECT AVG(WPM) FROM Attempts WHERE Username = ('" + Login.loginUsername + "');

    rs = stmt.executeQuery(sql);

    int add1 = rs.getInt("AVG(WPM)");

        System.out.println("avg temp is " + add1);
    }

    catch (SQLException err) {
        System.out.println(err.getMessage());
    } 
```

我的数据库是这样设置的：

*   (PK) 'AttemptID' 整数自动增量

*   'WPM' 整数

*   (FK) '用户名' Varchar(45)

我希望它根据每个用户名返回平均 WPM。如果我换行

```
int add1 = rs.getInt("AVG(WPM)"); 
```

到

```
String add1 = rs.getString("AVG(WPM)"); 
```

没有区别。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:39:09.633

尝试`double add1 = rs.getDouble(1);`

说明：`rs.get...(1)`根据列索引获取列，而不是根据列名。在您的选择中使用函数时，数据库可能会更改此设置。此外，使用 double 而不是 int，因为 AVG 返回一个 double。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:41:35.890

看起来您忘记了语句**rs.next()** ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:44:32.890

1.  你的 sql 有 SQL 注入 ..

2.  AVG 函数结果可能为 float 或 double 。

**浮动 f = rs.getFloat(1);//**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T01:47:49.540

我认为您只需要在您的 select 语句中添加一个 group by 子句。然后，您的 select 语句将显示为： select avg(WPD) from Attempts group by Usename where Username = ... 这应该正确计算每个用户的平均 WPD。由于您使用的是平均值，我认为返回的值可能是两倍。在这种情况下，您应该使用 rs.getDouble。查询中只选择了一个值，因此您可以使用列的索引来访问它。然后调用将是 rs.getDouble(0)。我希望你觉得这个答案有帮助。

祝你好运，尼古拉

# java - 将多个向量添加到向量的向量不起作用，Java

> ID：13831444
> 
> 赞同：1
> 
> 时间：2012-12-12T01:38:15.870
> 
> 标签：java, vector

我想将一些向量放入向量的向量中。我在一个循环中执行此操作，最后只有最后一个添加的向量，但与我要添加的向量的计数一样频繁。

```
public void initVectors() {

    rows = new Vector<Vector<String>>();
    Vector<String> data = new Vector<String>();

    Vector<String> t = new Vector<String>();
    String aLine;
    try {
        FileInputStream fin = new FileInputStream("module.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fin));
        // extract data
        while ((aLine = br.readLine()) != null) {
            StringTokenizer st = new StringTokenizer(aLine, ",");
            t.clear();
            while (st.hasMoreTokens()) {
                t.addElement(st.nextToken());
                // System.out.println(st.nextToken());
            }

            System.out.println(t);
            System.out.println("add it");
            rows.addElement(t);

        }

        Enumeration vEnum = rows.elements();
        System.out.println("Elements in vector:");
        while (vEnum.hasMoreElements()) {
            System.out.print(vEnum.nextElement());
            System.out.println();
        }

        br.close();

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

我的输出是：
[GDI 1, 4, 1.0]
添加它
[Physik, 6, 1.3]
添加它
向量中的元素：
[Physik, 6, 1.3]
[Physik, 6, 1.3]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:44:07.587

仅保留对的`Vector` `row`引用`t`，不会复制其元素。当您`t`在外部进行更改时，您正在影响`row`.

而不是使用`t.clear()`use`t = new Vector()`来创建一个新对象并且不影响已添加到`rows`.

# ocaml - 加载|使用|需要 Ocaml 源文件中的库对象文件

> ID：13831447
> 
> 赞同：4
> 
> 时间：2012-12-12T01:38:31.300
> 
> 标签：ocaml

Ocaml 手册包含一个练习（[此处](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual003.html#toc11)），其中库对象文件以下列方式加载到顶层循环（ocaml 交互式解释器）中：

```
#load "dynlink.cma";;
#load "camlp4o.cma";; 
```

我正在尝试将后续代码复制到可编译的源文件中，并且该代码需要上述库对象文件。我可以用源文件中的一行代码加载这些文件并用ocamlc编译吗？我试过“#load”、“load”、“#use”、“use”、“#require”、“require”，所有这些都由“#directory”和“directory”处理。我知道您可以使用“include ;;”来包含模块，但这也不应该起作用，因为它们只是库文件，而不是模块。我试图在手册中找到一种方法来做到这一点，但无济于事。

我需要在编译命令中引用文件吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:42:05.870

以 # 字符开头的指令仅在顶层使用，严格来说不是 OCaml 语言的一部分。在要编译的文件中，不要使用 # 指令。请参阅 OCaml 手册[第 9 章](http://caml.inria.fr/pub/docs/manual-ocaml/manual023.html)。#load 指令用于加载库。编译文件时，您必须告诉编译器使用该库（在命令行上，而不是在文件中）。一开始直接学习编译器命令很好，但最终你应该使用[ocamlfind](http://projects.camlcity.org/projects/findlib.html)和[oasis](http://oasis.forge.ocamlcore.org/quickstart.html)，这使得编译更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:03:34.953

我假设您的源代码是使用由camlp4o 实现的扩展编写的。要编译你的源代码，你可以说：

```
ocamlc -pp camlp4o -o myfile myfile.ml 
```

我相信只有当您想在顶层（解释器）中使用扩展时才需要 #load 命令的复杂性。

# java - BufferedImage 的透明区域正在写出黑色

> ID：13831448
> 
> 赞同：0
> 
> 时间：2012-12-12T01:38:37.820
> 
> 标签：java, image, compositing

我知道这与合成有关，但我不知道是什么。在前面的代码部分中，将 BufferedImage 中的特定像素列表设置为透明黑色：

```
 for(Pixel p : closed){
            Color c = new Color(image.getRGB(p.x, p.y));
            Color newC = new Color(0,0,0, 0);
            image.setRGB(p.x, p.y, newC.getRGB() & 0x00000000);
        }

        if(andCrop){
            image = image.getSubimage(left, top, right-left, bottom-top);
        }

        return image; 
```

然后我尝试写出图像：

```
try {

            BufferedImage out = new BufferedImage(image.getWidth(), image.getHeight(), java.awt.Transparency.TRANSLUCENT);
            Graphics2D g2d = out.createGraphics();
            g2d.setComposite(AlphaComposite.Clear);
            g2d.fillRect(0, 0, image.getWidth(), image.getHeight());
            g2d.setComposite(AlphaComposite.Src);
            g2d.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), null);
            g2d.dispose();

            File outputfile = new File(file);
            ImageIO.write(out, "png", outputfile);
        } catch (IOException e) {

        } 
```

现在，在我尝试将图像绘制到上面之前，我知道“out”已经很清楚了。我没有得到的是我的合成出了什么问题。我不是透明的，而是全黑的。

使用的所有缓冲图像都是 INT_ARGB。

编辑 - 这已经解决了。图像源来自 ImageIO.read，返回的 BufferedImage 不支持 alpha。快速的读取后转换让其余代码顺利运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:07:48.093

我想到的事情......（感谢安德鲁）：

```
java.awt.Transparency.TRANSLUCENT = 3
TYPE_INT_ARGB = 2
TYPE_INT_ARGB_PRE = 3

public BufferedImage(int width,
                 int height,
                 int imageType)

Constructs a BufferedImage of one of the predefined image types. (TYPE_...) 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)

所以它似乎基本上是一个混淆。

另外，你想要达到的效果*是什么？*您清除一个空图像，然后为其绘制完全透明的像素……我只是不明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:19:41.427

Whelp，这已经被否决了，所以我不确定这是否相关，但问题是**ImageIO 正在读取原始 BufferedImage ，并且该图像不支持 ARGB**。快速的读取后转换允许其余代码工作。

# ruby - Ruby比较总是返回true

> ID：13831449
> 
> 赞同：1
> 
> 时间：2012-12-12T01:38:42.050
> 
> 标签：ruby

我正在分析来自 HTTP 请求的响应代码，并根据该响应代码确定我如何记录该信息。问题是数据总是被记录为真。例如，当我收到 500 响应代码时，我想记录失败。当我得到200时，我想要成功。不过，我总能成功。有人可以看看我的代码并告诉我我做错了什么，或者我能做些什么来解决它？

这是给我一个问题的代码：

```
if response.code == "200" or "201" or "202" or "203" or "204" 
```

我考虑过我正在传递一个字符串，因此当 Ruby 评估条件时，它返回 true，但我尝试添加：但`.to_i(base=10)`没有成功。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T01:50:11.700

如前所述，它的 if 语句：`if response.code == "200" or "201" or "202" or "203" or "204"`

一个优雅的解决方法是：

```
if ('200'..'204').include? response.code 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T01:47:09.827

问题在于使用`or`. 请参阅[http://www.coshx.com/blog/2012/10/31/rubys-and-and-or-operators-explained](http://www.coshx.com/blog/2012/10/31/rubys-and-and-or-operators-explained)以更详细地解释和之间的区别`or`，`||`但这里的问题更加基本。好像你写的

```
if response.code == "200" or true 
```

这将始终评估为`true`. 您需要将其更改为

```
if response.code == "200" or response.code == "201" or ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T01:47:06.133

错误是这个表达式 `response.code == "200" or "201" or "202" or "203" or "204"` 如果响应代码是'200'，它将返回true

如果响应代码是“201”，它将返回“201”

如果响应代码是“500”，它也会返回“201”

如果要匹配以 20 开头的响应码，可以使用 regex 或 start_with? 方法。

例如`response.code =~ /^20\d$/`或 response.code.start_with?('20')

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T05:09:28.787

当您想针对多个可能的值进行测试时，您有多种方法，每种方法都有其优点和缺点。

*当列表很小*并且不一定事先知道时，对范围或列表进行测试`include?`是合适的。更好的版本使用 Hash 代替 Array，因为对于超过 ~10 个条目的任何内容，Hash 中的查找时间通常要快得多。请记住，数组是从开始扫描到匹配的，这在最坏的情况下意味着测试每个元素的等价性。

 *更固定逻辑的更好方法是`case`：

```
 case (response.code)
 when '200', '201', '202', '203', '204'
   # ...
 else
   # ...
 end 
```

这些都经过优化并且执行速度惊人。它们也足够灵活，可以处理各种匹配类型。在您的情况下，由于您已经阐明了逻辑，因此这可能是最接近有效的模拟。

请记住，`x == 'a' or 'b'`等价于`(x == 'a') or 'b'`which 将始终评估为 true，因为`'b'`is not`nil`或`false`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T01:53:36.333

正如其他人所说，您的条件返回“201”，因为这是一个“真”值，非真值只有 nil 和 false。

一种方法可能是

```
if ['200','201','202','203','204'].include? response.code 
```*

# python - Sqlalchemy 一对多插入

> ID：13831451
> 
> 赞同：1
> 
> 时间：2012-12-12T01:38:51.207
> 
> 标签：python, sqlalchemy

我有一个字典和一个（字典）变量列表，我将一些数据解析为这些变量，这两个变量彼此之间具有一对多的关系。我想知道是否有任何方法可以将这些字典放入表类并将它们存储到数据库中。我希望 sqlalchemy 能够处理外键详细信息。字典也有很多键，所以它应该从字典中填充对象字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:13:14.437

[在 SQLAlchemy 中创建多对一关系](http://docs.sqlalchemy.org/en/latest/orm/relationships.html#many-to-one)涉及两个步骤：

1.  [`Dependent`在对象上创建约束](http://docs.sqlalchemy.org/en/latest/core/constraints.html#defining-foreign-keys)。这将确保`Dependent`s 仅引用有效`Master`的 s。为此，您将需要对象上的[主键](http://docs.sqlalchemy.org/en/latest/core/schema.html)`Master`。
2.  [创建一个引用](http://docs.sqlalchemy.org/en/latest/orm/basic_relationships.html#many-to-one)，以便您可以`Master`从`Dependent`.

* * *

注意：不要混淆。SQLAlchemy 文档使用了一个示例，其中关系是父母 (n) -> 孩子 (1)。为避免混淆，我使用了 Dependent (n) -> Master (1) 的措辞。

# javascript - jQuery: Why the click function is not called on generated button

> ID：13831452
> 
> 赞同：1
> 
> 时间：2012-12-12T01:38:52.330
> 
> 标签：javascript, jquery, html, button

Here is a [jsFiddle](http://jsfiddle.net/DarkJaff/cgDeV/) to explain my problem. If you try to click on the button "Add an ingredient", the button click event is called. My problem is that when I click on the "Create a subtitle", it dynamically created "Add an ingredient" button for each sub-categories. All button have the same id beginning with "create-ingredient" concatenated with a unique ID so it creates a unique ID for the button. I then use a "start with" selector in jQuery to select all button that start with "create-ingredient". It just doesn't select the ones that are dynamically created, it just work with the one that was originally in the html page.

Here is the click event not firing up on the dynamic ones:

```
$("[name^='create-ingredient']").click(function() {
    alert('ingredient clicked');
    return false;
});​ 
```

What do I need to change so the dynamically created button event gets called?

Thanks!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T01:39:56.063

[`click`](http://api.jquery.com/click/) wires up the event statically. You want [`on`](http://api.jquery.com/on/), which triggers the event even on added elements.

Note that the syntax for `on` is slightly different than `click`. You typically use:

```
$("container").on("click", "selector", handler); 
```

where "container" selects a static container element (can just be "document"), and "selector" is the element you want to target.

[Forked Fiddle.](http://jsfiddle.net/fRssf/5/)

* * *

**Edit**

Clarifying the above per David's comment: the use of `on` actually attaches an event handler to "container", and delegates the callback to any elements inside the container that match "selector". This is a case where it's well worth reading the [JQuery docs](http://api.jquery.com/on/):

> When a selector is provided, the event handler is referred to as delegated. The handler is not called when the event occurs directly on the bound element, but only for descendants (inner elements) that match the selector. jQuery bubbles the event from the event target up to the element where the handler is attached (i.e., innermost to outermost element) and runs the handler for any elements along that path matching the selector.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:40:51.570

Try: jQuery (>1.7 )

```
$(document).on('click', '[name^="create-ingredient"]', function() {
    alert('ingredient clicked');
    return false;
}); 
```

Or for older jquery (<1.7)

```
$("[name^='create-ingredient']").live(function() {
    alert('ingredient clicked');
    return false;
}); 
```

# mongodb - 删除 MongoDB 文档数组中的条目

> ID：13831459
> 
> 赞同：0
> 
> 时间：2012-12-12T01:39:33.020
> 
> 标签：mongodb

假设我有一个看起来像这样的文档：

```
{
  "_id": ObjectId("50b6a7416cb035b629000001"),
  "businesses": [{
    "name": "Biz1",
    "id": ObjectId("50b6bc953e47dc923e000001")
  }, {
    "name": "Biz2",
    "id": ObjectId("50b6ccebae0513bf52000001")
  }, {
    "name": "Biz3",
    "id": ObjectId("50b6d015c58b414156000001")
  }, {
    "name": "Biz4",
    "id": ObjectId("50b6d0c8a4cdd5e356000001")
  }]
} 
```

我想删除

```
{
        "name": "Biz3",
        "id": ObjectId("50b6d015c58b414156000001")
      } 
```

从一系列业务中。我试过这个（为了清楚起见，使用企业名称而不是 id）：

```
db.users.update({'businesses.name':'Biz3'},{$pull:{'businesses.name':'Biz3'}}) 
```

但当然它没有用。我知道查询部分是正确的，因为我在执行此操作时会取回文档：

```
db.users.find({'businesses.name' : 'Biz3'}) 
```

所以问题出在更新部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:42:49.543

刚刚进行了一次快速的 lil 测试，这很有效

我认为尝试`db.users.update({'businesses.name':'Biz3'},{$pull:{'businesses':{'name':'Biz3'}}})`应该这样做

# linker - 了解 GNU 链接描述文件的位置计数器

> ID：13831462
> 
> 赞同：18
> 
> 时间：2012-12-12T01:39:44.360
> 
> 标签：linker, embedded, arm, gnu, linker-scripts

我正在从事一个大学项目，我正在从头开始为 Atmel SAM7S256 微控制器编写软件。这比我以前使用过的其他 MCU 更深入，因为这次需要了解链接器脚本和汇编语言。

我一直在仔细研究 SAM7S 芯片的示例项目，以便完全了解如何从头开始启动 SAM7/ARM 项目。一个值得注意的例子是 Miro Samek 的“使用 GNU 构建裸机 ARM 系统”教程，可在[此处](http://www.state-machine.com/resources/articles.php#ARM "这里")找到（此问题中的代码来自哪里）。我还花了很多时间阅读 sourceware.org 上的链接器和汇编器文档。

我很高兴我在很大程度上理解了以下链接器脚本。只有一件事涉及位置计数器，这对我来说没有意义。以下是上述教程提供的链接器脚本：

```
OUTPUT_FORMAT("elf32-littlearm", "elf32-bigarm", "elf32-littlearm")
OUTPUT_ARCH(arm)
ENTRY(_vectors)

MEMORY {                                       /* memory map of AT91SAM7S64 */
    ROM (rx)  : ORIGIN = 0x00100000, LENGTH = 64k
    RAM (rwx) : ORIGIN = 0x00200000, LENGTH = 16k
}

/* The sizes of the stacks used by the application. NOTE: you need to adjust */
C_STACK_SIZE   = 512;
IRQ_STACK_SIZE = 0;
FIQ_STACK_SIZE = 0;
SVC_STACK_SIZE = 0;
ABT_STACK_SIZE = 0;
UND_STACK_SIZE = 0;

/* The size of the heap used by the application. NOTE: you need to adjust   */
HEAP_SIZE = 0;

SECTIONS {

    .reset : {
        *startup.o (.text)  /* startup code (ARM vectors and reset handler) */
        . = ALIGN(0x4);
     } >ROM

    .ramvect : {                        /* used for vectors remapped to RAM */
        __ram_start = .;
        . = 0x40;
    } >RAM

    .fastcode : {
        __fastcode_load = LOADADDR (.fastcode);
        __fastcode_start = .;

        *(.glue_7t) *(.glue_7)
        *isr.o (.text.*)
        *(.text.fastcode)
        *(.text.Blinky_dispatch)
        /* add other modules here ... */

        . = ALIGN (4);
        __fastcode_end = .;
    } >RAM AT>ROM

    .text : {
        . = ALIGN(4);
        *(.text)                                   /* .text sections (code) */
        *(.text*)                                 /* .text* sections (code) */
        *(.rodata)           /* .rodata sections (constants, strings, etc.) */
        *(.rodata*)         /* .rodata* sections (constants, strings, etc.) */
        *(.glue_7) /* glue arm to thumb (NOTE: placed already in .fastcode) */
        *(.glue_7t)/* glue thumb to arm (NOTE: placed already in .fastcode) */

        KEEP (*(.init))
        KEEP (*(.fini))

        . = ALIGN(4);
        _etext = .;                         /* global symbol at end of code */
    } >ROM

    .preinit_array : {
        PROVIDE_HIDDEN (__preinit_array_start = .);
        KEEP (*(SORT(.preinit_array.*)))
        KEEP (*(.preinit_array*))
        PROVIDE_HIDDEN (__preinit_array_end = .);
    } >ROM

    .init_array : {
        PROVIDE_HIDDEN (__init_array_start = .);
        KEEP (*(SORT(.init_array.*)))
        KEEP (*(.init_array*))
        PROVIDE_HIDDEN (__init_array_end = .);
    } >ROM

    .fini_array : {
        PROVIDE_HIDDEN (__fini_array_start = .);
        KEEP (*(.fini_array*))
        KEEP (*(SORT(.fini_array.*)))
        PROVIDE_HIDDEN (__fini_array_end = .);
    } >ROM

    .data : {
        __data_load = LOADADDR (.data);
        __data_start = .;
        *(.data)                                          /* .data sections */
        *(.data*)                                        /* .data* sections */
        . = ALIGN(4);
        _edata = .;
    } >RAM AT>ROM

    .bss : {
        __bss_start__ = . ;
        *(.bss)
        *(.bss*)
        *(COMMON)
        . = ALIGN(4);
        _ebss = .;                     /* define a global symbol at bss end */
        __bss_end__ = .;
    } >RAM

    PROVIDE ( end = _ebss );
    PROVIDE ( _end = _ebss );
    PROVIDE ( __end__ = _ebss );

    .heap : {
        __heap_start__ = . ;
        . = . + HEAP_SIZE;
        . = ALIGN(4);
        __heap_end__ = . ;
    } >RAM

    .stack : {
        __stack_start__ = . ;

        . += IRQ_STACK_SIZE;
        . = ALIGN (4);
        __irq_stack_top__ = . ;

        . += FIQ_STACK_SIZE;
        . = ALIGN (4);
        __fiq_stack_top__ = . ;

        . += SVC_STACK_SIZE;
        . = ALIGN (4);
        __svc_stack_top__ = . ;

        . += ABT_STACK_SIZE;
        . = ALIGN (4);
        __abt_stack_top__ = . ;

        . += UND_STACK_SIZE;
        . = ALIGN (4);
        __und_stack_top__ = . ;

        . += C_STACK_SIZE;
        . = ALIGN (4);
        __c_stack_top__ = . ;

        __stack_end__ = .;
    } >RAM

    /* Remove information from the standard libraries */
    /DISCARD/ : {
        libc.a ( * )
        libm.a ( * )
        libgcc.a ( * )
    }
} 
```

在整个示例中（例如在 .ramvect、.fastcode 和 .stack 部分中）都有符号定义，例如`__ram_start = .;`. 启动汇编代码和初始化 C 代码使用这些地址来初始化 MCU RAM 中的正确位置。

我有一个问题理解是这些符号定义如何导致分配正确的值。这确实发生了，脚本是正确的，我只是不明白如何。

按照我的理解，当您在一个部分中使用位置计数器时，它只包含与该部分本身的虚拟内存地址 (VMA) 的相对偏移量。

因此，例如，在该行`__ram_start = .;`中，我希望 __ram_start 被分配一个值 0x0 - 因为它在 .ramvect 部分的最开头被分配了位置计数器的值。但是，为了使初始化代码正常工作（确实如此），必须将 __ram_start 分配为 0x00200000（RAM 开头的地址）。

我原以为这只会按预期工作，如果该行改为`__ram_start = ABSOLUTE(.);`或`__ram_start = ADDR(.ramvect);`.

`__fastcode_start`和也是如此`__stack_start__`。它们不能都被定义为地址 0x0，否则程序将无法运行。但是[此处链接](http://sourceware.org/binutils/docs-2.21/ld/Location-Counter.html#Location-Counter "链接在这里")的文档似乎表明这就是应该发生的事情。这是文档中的引用：

> 笔记： 。实际上是指从当前包含对象开始的字节偏移量。通常这是 SECTIONS 语句，其起始地址为 0，因此 . 可以用作绝对地址。如果 。但是，在节描述中使用，它指的是从该节开始的字节偏移量，而不是绝对地址。

因此，在这些符号分配期间的位置计数器值应该从相应的部分 VMA 偏移。所以那些“_start”符号应该*都*设置为0x0。这会破坏程序。

所以很明显我错过了一些东西。我想这可能只是将位置计数器值分配给一个符号（在一个部分内）导致 ABSOLUTE() 默认使用。但我无法在任何地方找到明确的解释来证实这一点。

如果有人可以解决这个问题，请提前感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T08:49:02.817

我想我可能已经找到了自己问题的答案。我不确定我是对的，但这是我能想到的第一个解释实际上是有道理的。让我重新思考[的是文档的这一页](http://sourceware.org/binutils/docs-2.21/ld/Expression-Section.html#Expression-Section "文档的这一页")。特别是这句话：

> 地址和符号可以是相对的，也可以是绝对的。节相关符号是可重定位的。如果您使用 `-r' 选项请求可重定位输出，则进一步的链接操作可能会更改节相对符号的值。另一方面，绝对符号将在任何进一步的链接操作中保持相同的值。

和这句话：

> 您可以使用内置函数 ABSOLUTE 强制一个表达式是绝对的，否则它是相对的。例如，要创建一个绝对符号集到输出节末尾的地址 `.data`：
> 
> ```
>  SECTIONS
>    {
>      .data : { *(.data) _edata = ABSOLUTE(.); }
>    } 
> ```
> 
> 如果`ABSOLUTE`不使用，`_edata`将与该`.data` 部分相关。

我以前读过它们，但这次我从一个新的角度看待它们。

所以我认为我的误解是认为符号在分配一个相对字节偏移地址时，只是简单地设置为该偏移量的值，而基地址信息丢失。

这是基于我原来的问题中的这句话：

> 笔记： 。实际上是指从当前包含对象开始的字节偏移量。通常这是 SECTIONS 语句，其起始地址为 0，因此 . 可以用作绝对地址。如果 。但是，在节描述中使用，它指的是从该节开始的字节偏移量，而不是绝对地址。

相反，我现在理解正在发生的是基地址信息不会丢失。符号并不是简单地被分配到基地址的偏移值。该符号最终仍将解析为绝对地址，但前提是它的基地址不可能改变。

因此，在我认为`__stack_start__ = . ;`应该将之类的东西更改为`__stack_start__ = ABSOLUTE(.) ;`确实有效的地方，我现在认为这是不必要的。更重要的是，我从这个回复的第一句话中了解到您可以重新链接 ELF 文件？

因此，如果我使用`__stack_start__ = ABSOLUTE(.) ;`，运行链接器脚本来创建 ELF 可执行文件，然后尝试重新链接它并将 .stack 部分移动到其他位置，该`__stack_start__`符号仍将指向第一个链接的相同绝对地址，因此是不正确的。

这可能很难理解，但我已经尽可能清楚地写了。我怀疑我已经接近正确的想法，但我仍然需要真正了解这些东西的人来确认或否认这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T11:06:58.053

该部分的位置由右大括号 ( `>RAM AT>ROM`) 之后的内存区域确定。因此，执行地址在 RAM 中的 0x00200000 及其后，但加载地址在 ROM（闪存）中的 0x00100000。启动代码必须将`.fastcode`输出部分从其加载复制到其执行地址，这就是符号的用途。

请注意，这些不必位于地址 0，因为 AT91SAM7S 将 RAM 或 ROM 重新映射到地址 0。通常它以 ROM 映射启动，然后启动代码将其切换到 RAM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-24T09:15:07.997

这个问题也让我很困扰，给出我的理解：</p>

```
.ramvect : {                        /* used for vectors remapped to RAM */
    __ram_start = .;
    . = 0x40;
} >RAM 
```

上面的语句告诉链接器将 __ram_start 符号放在位置计数器，即 .ramvect 段的开头。

由于__ram_start符号位于.ramvect段的头部，所以在使用C代码获取__ramvect地址时，会得到.ramvect段的起始地址，即其绝对地址。

# web-services - 针对多个依赖资源的 REST 式 URI 设计

> ID：13831465
> 
> 赞同：4
> 
> 时间：2012-12-12T01:39:58.880
> 
> 标签：web-services, api, rest

我正在尝试设计一个基于 REST 的 Web 服务来与我正在开发的农场动物管理系统交互。

为了详细解释这个问题，我收集了属于农场的**动物。**每只动物都有自己的信息 - 例如名称、身份证号、品种年龄等。因此，我假设如下 URI 适合：

```
/animals               <- retrieve list of animals
/animals/{animal-id}   <- Retrieve only one animal
/animals?breed=sheep   <- Search/query 
```

当我尝试将其他依赖资源链接到每只动物时，问题就出现了。动物**可以**有一组*体重*信息，以及我所说的*评论*（对特定动物的观察）。这些中的每一个都依赖于并且只存在于那个特定的动物，但它们本身就是我想要访问的资源。

IMO 最简单的方法是将资源嵌套在动物 URI 中：

```
/animals/{animal-id}/weights
/animals/{animal-id}/comments 
```

但是，我认为需要直接访问和查询*权重*和*评论*，而不参考动物。使用示例是从特定品种的所有动物中检索最近的（或所有）重量，`...?breed=sheep`甚至返回选择单个动物 ID 的重量/评论`...?animals={ID1},{ID2},{...}`。

当我想一次向多只动物添加一条评论时，会出现进一步的复杂情况。（请原谅我对 POST 和 JSON 的表示）

```
POST ....
{
  "comment":"Animal moved to paddock B",
  "animals":[{id1}, {id2}, ...]
} 
```

我知道这个问题的明显解决方案是对我想要检索/编辑的**每只动物进行 GET 和 POST（例如）。**不过，我不希望这样做，因为最终我希望从移动设备访问此服务，因此减少呼叫次数似乎是明智之举。

我相信网络标准允许在 URI 中使用 CSV，所以这样的东西可以工作，

```
/animals/{id1},{id2},{..}/weights 
```

但是，我预计可能需要一次引用（或查询）十个动物的情况，这将导致混乱和不友好的 URI。

我目前认为的解决方案是将*权重*和*评论*作为自己的资源公开，这样我就可以直接访问和查询它们

```
/weights
/weights/{weight-id}
/weights?breed=sheep 
```

甚至直接发布到收藏

```
POST /comments
{
  "comment":"Animal moved to paddock B",
  "animals":[{id1}, {id2}, ...]
} 
```

但是会`/animals/{animal-id}/weights`返回什么？它甚至需要，还是我只是引用`/weights?animal={animal-id}`资源本身的链接？但是可以链接到查询的资源吗？

我是在做一个多余的，还是只是提供“另一种”访问信息的方式？

我做错了什么，是让我的数据库影响我的服务模型，还是我完全错过了重点？

我对此很陌生，并且已经阅读了很多关于这些问题的相互矛盾的论点，因此对于什么最适合我的要求感到很困惑。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:47:11.080

如果您想这样处理其他实体（等）`/weights`，最好为其他实体定义顶级资源。`/comments`然后，您可以批量方式 POST 到这些端点。

```
POST /comments

{
    "animals" : [
        {"id" : 1},
        {"id" : 2},
        {"id" : 3},
        {"id" : 4},
    ],
    "commentText" : "Sent to Hamburger Hamlet"
} 
```

请注意，在您的 URL 中包含长的 id 列表并不是一个好的设计，原因有很多，包括大多数浏览器和 HTML 代理对 URL 长度有限制（好的经验法则是尝试将 URL 长度保持在 2083 个字符或更少）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:46:09.383

我也遇到过类似的问题，但最终我们能够通过使用 API 为不同的用户类型设置特定的 url 命名空间（可以这么说）来消除您所遇到的复杂性。

例如，它可能是一个农场工人客户端应用程序，它将执行您所描述的 /weights、/comments 操作（POST、PUT、DELETE 等），因此您可以通过以下方式保持其功能清洁：

```
/farmworkers/comments
/farmworkers/weights 
```

然后仍然将`/animals/{animal-id}/weights`URL 保留在其他一些“命名空间”中。

要考虑的另一件事是使用 HAL 格式 (http://stateless.co/hal_specification.html) 之类的嵌入资源，这可以让您在请求等中嵌入多个动物资源。希望这会有所帮助。

# iphone - 当 UIView 在窗口中的位置发生变化时是否有通知？

> ID：13831467
> 
> 赞同：3
> 
> 时间：2012-12-12T01:40:08.847
> 
> 标签：iphone, ios, uiview, uiwindow, uiaccessibility

我有一个自定义`UIView`，它是一个可访问性容器。它所容纳的每个`UIAccessibilityElement`s 都有一个相对于窗户的框架。因为框架是相对于窗口而言的，所以只要窗口中视图的位置发生变化，就需要对其进行更新。

有没有办法在窗口中视图的位置发生变化时得到通知？这将允许我保留此类中的所有代码，既美观又可重用，而不是在整个视图层次结构中蔓延。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:18:14.880

这里[介绍 Key-Value Observing 编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)

KVO 可以监控 UIView 的帧变化。

# java.util.scanner - 偶数扫描码

> ID：13831470
> 
> 赞同：-3
> 
> 时间：2012-12-12T01:40:38.217
> 
> 标签：java.util.scanner

我正在创建扫描仪测试。我设法打印了偶数 1-50。我想做一个扫描代码，这样当用户输入 8 时，它将打印 8-50 的所有偶数。

导入 java.util.Scanner；

公共类 ModulusCalculation {

```
public static void main(String[] args)
{
    int endLimit = 50;

    System.out.println("WE ARE GOING TO PRINT EVEN NUMBER FROM 1 AND " + endLimit);
    Scanner input = new Scanner(System.in); 
    for (int startingPoint = 1; startingPoint <= endLimit; startingPoint++)
    {
        if (startingPoint % 2 == 0)
        {
            input.nextLine();
            System.out.println(+startingPoint);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:51:59.423

不需要阅读 **input.nextLine();** 在 for 循环中。

**第 1 步：**读取一个起始整数值

**第 2 步：** for (int startPoint = startinteger;startingPoint <= endLimit;startingPoint++)

**STEP3：**根据for循环内的条件打印所有偶数

# sql - 在 OPENROWSET 查询中使用变量

> ID：13831472
> 
> 赞同：35
> 
> 时间：2012-12-12T01:40:54.300
> 
> 标签：sql, sql-server, sql-server-2008, openrowset

我在处理这个查询时遇到了问题：

```
SELECT * 
FROM OPENROWSET(
    'SQLNCLI',
    'DRIVER={SQL Server};',
    'EXEC dbo.sProc1 @ID = ' + @id 
 ) 
```

给出一个错误：

> '+' 附近的语法不正确。

有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-12T02:22:22.103

正如 Scott 所建议的，您不能在`OPENROWSET`.Try 中使用表达式。尝试创建动态 sql 来传递参数

```
Declare @ID int
Declare @sql nvarchar(max)
Set @ID=1
Set @sql='SELECT * 
FROM OPENROWSET(
               ''SQLNCLI'',
               ''DRIVER={SQL Server};'',
               ''EXEC dbo.usp_SO @ID =' + convert(varchar(10),@ID) + ''')'

-- Print @sql
 Exec(@sql) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-12T01:56:59.243

OPENROWSET 需要字符串文字，而不是表达式。它抱怨加号，因为它只期望字符串文字，并且您使用运算符跟随字符串文字。

请参阅[http://msdn.microsoft.com/en-us/library/ms190312.aspx](http://msdn.microsoft.com/en-us/library/ms190312.aspx)其中指出：

> '询问'
> 
> 是一个字符串常量发送到提供者并由提供者执行...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-06T20:31:21.733

```
Declare @Route VARCHAR(200)
Declare @sql nvarchar(max)
Set @Route='C:\OCRevisiones.xlsx;'
Set @sql='SELECT * INTO FFFF
FROM OPENROWSET(
               ''Microsoft.ACE.OLEDB.12.0'',
               ''Excel 12.0;HDR=YES;Database=' + @Route + ''',
               ''SELECT * FROM [Sheet1$]'')'

 Print @sql
 --Exec(@sql) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-16T17:41:09.783

如果您需要参数，您还可以使用`sp_executesql`：

```
BEGIN

DECLARE
@p_path varchar(200)='D:\Sample\test.xml',  
@v_xmlfile xml,
@v_sql nvarchar(1000)

SET @v_sql=N'select @v_xmlfile= CONVERT(XML, BulkColumn) FROM 
OPENROWSET(BULK '''+@p_path+''', SINGLE_BLOB) AS x;'

EXEC sp_executesql @v_sql,N'@v_xmlfile xml output',@v_xmlfile output;

SELECT @v_xmlfile

END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-12T17:24:04.097

对于它的价值.. 我们使用 openrowset 而不是直接链接服务器查询的原因是链接服务器查询的处理发生在本地服务器上。（缓慢且经常带回大部分桌子）

是的，我们可以像上面那样进行字符串连接。

一个不同的选项，您可以轻松地使用语法和强大的参数。

在远程盒子上创建一个存储过程，该过程具有您需要的所有参数。使用标准链接服务器查询调用存储的过程（性能相同或比上述灵魂更好，并且更容易编码。

例如linkedservername.database.dbo.myproc 123,'abc','someparam',getdate()

只是一种选择......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-19T04:06:58.050

您可以使用`Char(39)`而不是`'`

```
set @lcSql= 'SELECT production_pbook_uq,variety_uq,color_uq,grade_uq,diff_qty
            FROM OPENROWSET("SQLNCLI",
            "Server=.;Trusted_Connection=yes;",
            "EXEC serversql.dbo.sp_flower_production_varieties_consolidated @lcproduction_pbook_uq='+char(39)+@lcWo_uq+char(39)+', @lcproduct_piso_uq ='+char(39)+@lcpiso_uq+char(39)+'")'
            +'where diff_qty>0'

print @lcSql 
```

# android - VideoView 为 HLS 过早触发 OnPreparedListener

> ID：13831473
> 
> 赞同：10
> 
> 时间：2012-12-12T01:41:02.823
> 
> 标签：android, http-live-streaming

我想在用户等待 VideoView 开始播放 HLS 时向他展示一些 ProgressDialog。我尝试为此使用 OnPreparedListener，但他提前触发（在播放器下载 m3u8 文件后，而不是在视频开始时）。

```
VideoView player = (VideoView) findViewById(R.id.player);
String httpLiveUrl = "http://example.com/playlist.m3u8";

player.setVideoURI(Uri.parse(httpLiveUrl));
player.setMediaController(new MediaController(this));
player.requestFocus();

player.setOnPreparedListener(new OnPreparedListener() {
public void onPrepared(MediaPlayer mp) {
    progress.dismiss();
}
});

progress.show();
player.start(); 
```

我没有找到另一个合适的听众......可能有人知道sloution吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T12:25:56.187

谢谢大家。我用下一个 hack 解决了我的问题：

```
videoView.setOnPreparedListener(new OnPreparedListener() {
    public void onPrepared(MediaPlayer mp) {

        final Handler handler = new Handler();
        videoPositionThread = new Runnable() {
             public void run() {
                try {
                    int duration = videoView.getCurrentPosition();
                    if (!(videoPosition == duration && videoView.isPlaying())) {
                        progress.dismiss();
                    }
                    videoPosition = duration;
                    handler.postDelayed(videoPositionThread, 1000);
                } catch (IllegalArgumentException e) {
                    Log.d(TAG, e.getMessage(), e);
                }
            }
        };
        handler.postDelayed(videoPositionThread, 0);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-18T08:47:48.743

我遇到了同样的问题，只是找到了满足我需求的解决方案。也许这也适合你。至少它已经过测试并适用于 Android 2.2、2.3 和 4.2。

这个想法是定期检查 videoView 当前位置是否大于零。这是对米哈伊尔答案的修改。也感谢米哈伊尔:)

```
public class VideoViewActivity extends Activity {

    // Declare variables
    ProgressDialog pDialog;
    VideoView videoview;
    Runnable videoPositionThread;

    // Insert your Video URL
    String VideoURL = "enter your video rtsp url here";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.videoview_main);
        videoview = (VideoView) findViewById(R.id.VideoView);

        pDialog = new ProgressDialog(VideoViewActivity.this);
        pDialog.setTitle("Android Video Streaming Tutorial");
        pDialog.setMessage("Buffering...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();

        Uri video = Uri.parse(VideoURL);
        videoview.setVideoURI(video);
        videoview.start();

        final Handler handler = new Handler();
        videoPositionThread = new Runnable() {
            public void run() {
                int currentPosition = videoview.getCurrentPosition();

                if (currentPosition > 0)
                    pDialog.dismiss();
                else
                    handler.postDelayed(videoPositionThread, 1000);
            }
        };

        handler.postDelayed(videoPositionThread, 0);
    }
} 
```

# c# - 在 C# 中将信息从一个类传递到另一个类的最佳方法

> ID：13831474
> 
> 赞同：0
> 
> 时间：2012-12-12T01:41:07.037
> 
> 标签：c#, class

我有一个问题，将信息从班级转移到班级的最佳方式是什么。我的意思是，我尝试使用返回字符串，其中我在列表框中有 3 个项目，它们被命名为 eg `Easy` `Normal`，`Hard`然后字符串被命名为项目。它对我来说效果不佳，因为我加载了方法，他返回了字符串，但我不能在其他类中使用它。我这样做是通过在第一堂课中创建的：

```
if(listBox1.SelectedItem.ToString() == "Easy")
{
return "Easy";
} 
```

然后，在二等舱：

```
if(class.string1() == "Easy")
{
Do something.
} 
```

它不起作用。你们可以帮助我吗？或者这个问题太新手了，还得多学习多搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:52:32.150

我更喜欢使用枚举而不是“[魔术字符串](http://en.wikipedia.org/wiki/Magic_string)”。它们是类型安全的并且不易出错。您也可以将字符串转换为枚举，这很适合您的问题：

```
 public enum DifficultyEnum {
        NULL,
        Easy,
        Medium,
        Hard
    }

    public DifficultyEnum GetDifficulty() {
        var difficulty = DifficultyEnum.NULL;
        var selItem = listBox1.SelectedItem.ToString();
        Enum.TryParse<DifficultyEnum>(selItem, out difficulty);
        return difficulty;           
    } 
```

然后在你的另一个班级：

```
 swtich (classInstance.GetDifficulty()) {
        case Easy:
            break;
        case Medium:
            break;
        case Hard:
            break;

        case NULL: /*Hopefully you don't get here but be defensive and expect that somehow they'll manage to do so =P */
            break;
    } 
```

**编辑：**

这是一个偏好问题，但您也可以将其设置`GetDifficulty()`为属性，如下所示：

```
 public DifficultyEnum Difficulty {
        get {
            var difficulty = DifficultyEnum.NULL;
            var selItem = listBox1.SelectedItem.ToString();
            Enum.TryParse<DifficultyEnum>(selItem, out difficulty);
            return difficulty;           
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:50:59.410

你似乎在这里问了几个不同的问题。

您在类之间传输信息的方式取决于您使用的类的类型和您要传输的数据类型。共享数据的最简单方法可能是使用提供数据的方法（作为返回值、引用参数或返回的包含数据的类）。

除此之外，您需要更具体地了解“不起作用”的含义。假设它设置正确，我可以看到它会起作用。但是，它不是很有效，因为比较字符串需要比较字符串中的每个字符。定义一个枚举会更有意义。

```
public enum Difficulty
{
    Easy,
    Normal,
    Hard
} 
```

并像这样比较它：

```
if(classInstance.Difficulty == Difficulty.Easy)
{
    // Do something.
} 
```

当然，您的班级需要确定选择了哪个列表项并将其转换为枚举。

# android - 在android中保存了多个首选项

> ID：13831476
> 
> 赞同：0
> 
> 时间：2012-12-12T01:41:34.020
> 
> 标签：android

我对 java 和 android 非常陌生，但尽我所能制作一个应用程序，基本上我想要一个带有 6 个文本框的页面，每个文本框都允许用户在每个文本框中键入一个 3 位数的唯一值，选中一个确认框，然后一个保存按钮，然后当用户重新访问应用程序的这一部分时，数据仍然存在，我设法让它为 1 个盒子工作，但如果我添加另一个它只是重复盒子 1s 的值，这是我的类代码

公共类设置扩展活动实现 OnClickListener {

```
CheckBox cb;
EditText et, et1;
Button b;
String test;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    cb = (CheckBox) findViewById(R.id.checkBox1);
    et = (EditText) findViewById(R.id.editText1);
    b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(this);
    loadPrefs();
    cb.setChecked(false);       

}

private void loadPrefs() {

    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    boolean cbValue = sp.getBoolean("CHECKBOX", false);
    String name = sp.getString("NAME", "Kg");
    if(cbValue){
        cb.setChecked(true);
    }else{
        cb.setChecked(false);
    }
    et.setText(name + (" kg"));
    }

private void savePrefs(String key, boolean value) {
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Editor edit = sp.edit();
    edit.putBoolean(key, value);
    edit.commit();
}

private void savePrefs(String key, String value) {
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Editor edit = sp.edit();
    edit.putString(key, value);
    edit.commit();
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    savePrefs("CHECKBOX", cb.isChecked());
    if (cb.isChecked())
        savePrefs("NAME", et.getText().toString());

    finish();
} 
```

}

由于时间很短，任何帮助将不胜感激:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:49:59.423

读[这个](http://developer.android.com/guide/topics/data/data-storage.html#pref)。

您没有编码的是保存数据。

```
 SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
 boolean cbValue = sp.getBoolean("CHECKBOX", false); 
```

第二行的意思是，“CHECKBOX”是保存的共享首选项吗？不，不是。好的，让我们获取默认值 false 。

您需要做的是使用以下方法保存它：

```
SharedPreferences.editor Editor = sp.edit();
Editor.putBoolean("CHECKBOX",true);
Editor.commit(); 
```

第一行定义了 sharedpreference 编辑器。下一行将布尔值 true 保存在 CHECKBOX 的有效文件名（键）下，然后提交行说，好的，请执行上述操作并完成它，以便现在每当我调用时：

```
sp.getBoolean("CHECKBOX",false); 
```

我会得到真实的，因为我不必使用默认值 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:50:08.973

试着让这对你来说很容易......

首先，在您的偏好 xml 中，每个文本框和复选框都需要它自己的键。

其次，为了便于您阅读/理解，您应该为 pref save 方法 void savePrefs(String key, String value) 分配一个不同的名称。

例如字符串： void savePrefsString(String key, String value)

例如布尔值： void savePrefsBoolean(String key, boolean value)

确保每一个都被正确调用（savePrefsBoolean 用于布尔值，savePrefsString 用于编辑文本）。

然后对于每个编辑文本，您将要从该编辑文本的首选项中检索密钥。

例子：

```
String name1 = sp.getString("NAME1", "Kg");
String name2 = sp.getString("NAME2", "Kg");
String name3 = sp.getString("NAME3", "Kg"); 
```

然后：

```
et1.setText(name1 + (" kg"));
et2.setText(name2 + (" kg"));
et3.setText(name1 + (" kg")); 
```

对您的复选框执行相同的操作（它们实际上是真/假布尔值）。

例子：

```
boolean cb1 = sp.getBoolean("CHECKBOX1", false); //false is default value
boolean cb2 = sp.getBoolean("CHECKBOX1", false);
boolean cb3 = sp.getBoolean("CHECKBOX1", false); 
```

然后从首选项设置值：

```
if(cb1){
        cb1.setChecked(true);
    }else{
        cb1.setChecked(false);
    } 
```

并保存用户按下的内容：

```
savePrefsBoolean("CHECKBOX1", cb1.isChecked()); // get check value of checkbox 
savePrefsBoolean("CHECKBOX2", cb2.isChecked());
savePrefsBoolean("CHECKBOX3", cb3.isChecked()); 
```

# c - 由于 20mb 长的 int 导致浮点异常（核心转储）/分段错误（核心转储）

> ID：13831488
> 
> 赞同：-1
> 
> 时间：2012-12-12T01:42:29.857
> 
> 标签：c, segmentation-fault

```
a = sbrk(20*1024*1024+8192);
        a=(int *)((((int)a>>13)<<13)+8192);
    gettimeofday(&start,NULL);
    ARRAY_SIZE = 20*1024*1024+8192;
    for (times=0; times<SOME_LARGE_NUMBER; times++){
            for (i=0; i<ARRAY_SIZE; i=i+SOME_ACCESS_SIZE){
                         dummy=a[i];
                 }
    } 
```

显然我得到了上面代码的浮点异常，这是因为 ARRAY_SIZE 是 20mb，我怎么不会得到段错误或浮点异常但仍然有 20mb 的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:12:08.240

有很多问题：

*   您没有展示如何`a`声明，因此我们不知道它的类型，也无法分析涉及它的表达式是如何计算的。
*   `sbrk`是一个过时的电话。除特殊情况外，`malloc`应改为使用。
*   该语句`a=(int *)((((int)a>>13)<<13)+8192);`尝试与`a`8192 字节的倍数对齐，但至少应该使用`uintptr_t`而不是`int`.
*   to 的参数`sbrk`是字节数，但`(int *)`演员表建议`a`是指向`int`. 在任何情况下，您都应该将分配乘以`sizeof *a`.
*   在`a`对齐到 8192 字节的倍数之后，在它之后不再有`20*1024*1024+8192`可用的字节，因为其中一些已用于对齐。Yet`ARRAY_SIZE`设置为`20*1024*1024+8192`并在循环中使用，从而确保数组将被溢出。可能，`ARRAY_SIZE`应该设置为`20*1024*1024`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:12:03.660

您正在分配一个`20*1024*1024+8192` **字节长的内存块，然后将其视为**`20*1024*1024+8192` **ints**数组。请尝试以下操作：

```
ARRAY_SIZE = (20*1024*1024+8192) / sizeof(int); 
```

# ruby-on-rails - 通过 cron、curl 和 when gem 加载路由会导致问题吗？

> ID：13831489
> 
> 赞同：0
> 
> 时间：2012-12-12T01:42:31.593
> 
> 标签：ruby-on-rails, ruby, cron, whenever

我需要在我的 rails 应用程序中定期运行后台任务。我做了一些研究，似乎没有标准的方法可以做到这一点。

我不想生成一个新的应用程序上下文，所以跑步者似乎是不可能的。如果不需要，我宁愿不运行我自己的线程处理程序。（看起来这可能是目前最有希望的选择，而不是下面的）。

使用无论何时我在 schedule.rb 中执行以下操作：

```
every 15.minutes do
    command "curl http://127.0.0.1:3000/periodic"
end 
```

这感觉有点像 hack，但我找不到比这更直接的东西了——我能找到的所有其他东西似乎都是为了一些看似基本的东西付出了很多努力。

我应该注意，这是一个内部项目，将在防火墙和无头自动化中间件后面，因此用户直接访问该项目的期望很低。

我是否遗漏了某些东西，或者后台处理或定时事件真的不支持开箱即用的导轨？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:54:09.997

经过一番研究，阿马丹关于铁路的建议可能会让我在这里得到我想要的。作为一个理想的解决方案，它并不完美，尽管取决于上下文（即一个可公开访问的 Rails 项目），这是要走的路。对于我正在处理的项目，它有点笨拙，因为我正在做一个 Rails 应用程序，它是两个系统之间的桥梁，无头运行，防火墙后面没有用户输入。

# ruby-on-rails - Auto_html 表示未提供块

> ID：13831490
> 
> 赞同：1
> 
> 时间：2012-12-12T01:42:40.060
> 
> 标签：ruby-on-rails, ruby, embed, soundcloud

我有一个允许用户发布链接的网站。我正在尝试让 soundcloud 链接嵌入媒体文件，因此我正在尝试使用 AutoHtml Gem。我做了 gem install Autohtml，把它放在我的 gemfile 和 config/application.rb 中，然后运行 ​​bundle install。为什么 Auto_html() 不起作用。

```
GEMFILE

source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.4'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'
gem 'pg', '0.12.2'
gem 'rails_autolink', '~> 1.0.9'
gem 'rinku', '~> 1.5.0', :require => 'rails_rinku'
gem 'auto_html', '1.6.0'

CONFIG/APPLICATION.RB

require File.expand_path('../boot', __FILE__)

require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
require "rails_autolink"
require "rails_rinku"
require "auto_html"

VIEW/MICROPOSTS/_MICROPOST.HTML.ERB

<% if micropost.url.include? 'soundcloud' %>
  <%= auto_html(micropost.url)  %>
<% end %> 
```

抱歉，我是 Ror 的新手，我很感谢您的帮助。我只想 Auto_html 这里特别是 soundcloud。我忘了做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:03:17.800

它是辅助方法，因此您需要以下几行：

```
# app/helpers/application_helper.rb

module ApplicationHelper
  include AutoHtml
end

# app/controllers/application_controller.rb

class ApplicationController < ActionController::Base # or something like that
  helper ApplicationHelper
end 
```

**如果您阅读该页面，请进行编辑**，给出了一个示例块：[https ://github.com/dejan/auto_html](https://github.com/dejan/auto_html)

`auto_html(str) { simple_format; link(:target => 'blank')`

对于 soundcloud 使用

`auto_html(str) { soundcloud }`

# php - 想要从另一个页面回显一个 php 变量

> ID：13831493
> 
> 赞同：-2
> 
> 时间：2012-12-12T01:42:54.793
> 
> 标签：php, include, echo

我想在一个页面上回显一个变量，我已经从另一个页面中包含了这个变量。这是为了节省空间并尽可能地将 php 代码与文本数据分开。

在我从中获取变量的页面中（我们称之为“aa.php”）我有：

```
if ($whatever=="A") echo "somethingA";
if ($whatever=="B") echo "somethingB";
if ($whatever=="C") echo "somethingC"; 
```

我将它包含在我希望显示数据的页面上（我们称之为“data.php”）：

```
include 'aa.php';
$whatever = "B"; 
```

我希望“B”显示在 data.php 上，但它根本没有在页面上回显（我猜是因为它实际上在另一页上？） - 我如何在我想要的页面上回显它要显示的数据，尽可能少的混乱？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:45:13.623

顺序似乎是问题：

```
$whatever = "B";
include 'aa.php'; 
```

# r - 识别变量中项目的出现次数

> ID：13831496
> 
> 赞同：4
> 
> 时间：2012-12-12T01:43:15.993
> 
> 标签：r

## 背景

现在，我有一个形状如下的数据框：

```
example = structure(list(sid = c(39, 40, 41, 42, 42, 43, 43, 44, 45, 45, 
46, 46, 47, 48, 49, 49, 50, 51, 52, 52, 53), monthday = c("42", 
"44", "46", "410", "428", "423", "49", "411", "416", "430", "418", 
"426", "419", "420", "420", "53", "421", "424", "425", "53", 
"511")), .Names = c("sid", "monthday"), row.names = c(301L, 300L, 
298L, 296L, 282L, 288L, 297L, 295L, 294L, 281L, 293L, 285L, 292L, 
291L, 290L, 278L, 289L, 287L, 286L, 279L, 270L), class = "data.frame") 
```

换句话说，它很高：

```
sid   monthday  
39     42        
40     44         
41     46        
42    410        
42    428
43    423        
43     49 
```

最终，我想把它变成一个宽格式：

```
sid   monthday1  monthday2
39     42         NA
40     44         NA
41     46         NA
42    410        428
43    423        49 
```

ETC

我一直在尝试使用 reshape 和 reshape2 包以及聚合，例如：

```
library(reshape2)
temp = melt(example,id.vars=c("sid"))
data.wide <- dcast(temp, sid ~ variable, value.var="value") 
```

但无法将我的大脑包裹在它周围。我突然想到，如果我能确定每个 sid 的出现，我就能解决我的问题。

## 即时问题

那么如何取上面的高数据 sid 列我创建一个新变量来指示每个 sid 的出现：

```
sid   occur 
39     1   
40     1   
41     1   
42     1
42     2 
43     1
43     2 
```

该`occur`变量表明 sid 值 39、40 和 41 仅出现一次，而 42 和 43 具有第一个和第二个实例。如果我只有两个实例，我可以使用 duplicated() 并将其转换为数字，但是可以推广到任意数量的实例的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:28:36.453

您可以使用`ave`来生成您的“时间”：

```
example$time <- ave(example$sid, example$sid, FUN = seq_along)
head(example)
#     sid monthday time
# 301  39       42    1
# 300  40       44    1
# 298  41       46    1
# 296  42      410    1
# 282  42      428    2
# 288  43      423    1
reshape(example, direction = "wide", idvar="sid", timevar="time")
#    sid monthday.1 monthday.2
# 301  39         42       <NA>
# 300  40         44       <NA>
# 298  41         46       <NA>
# 296  42        410        428
# 288  43        423         49
# 295  44        411       <NA>
# 294  45        416        430
# 293  46        418        426
# 292  47        419       <NA>
# 291  48        420       <NA>
# 290  49        420         53
# 289  50        421       <NA>
# 287  51        424       <NA>
# 286  52        425         53
# 270  53        511       <NA> 
```

或者，`dcast`在添加时间变量后使用“reshape2”：

```
dcast(example, sid ~ time, value.var="monthday") 
```

# apache - 在大量 EC2 实例上大规模重启 httpd

> ID：13831497
> 
> 赞同：0
> 
> 时间：2012-12-12T01:43:17.993
> 
> 标签：apache, amazon-web-services, amazon-ec2

我正在运行可变数量的 EC2 实例（CentOS 64），其中包含一个 apache Web 服务器，该服务器在生产模式下缓存了一堆代码。

现在每次我对代码进行一些更改（通常每周一次）我都必须登录到每个实例并执行“su”然后“service httpd restart”

有没有办法自动执行此操作，以便我可以在它连接到所有其他实例的一个实例上运行单个命令并重新启动它？变得非常耗时，尤其是当应用程序自己产生了大约 20-30 个实例时（发生在我们获得高流量的某些日子）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T17:38:14.430

[Dancer's shell](http://www.netfort.gr.jp/~dancer/software/dsh.html.en) , `dsh`, 是专门为此提供的。不需要“脚本”。正如@tix3 建议的那样，您可能还应该说服`sudo`那些机器（`/etc/sudoers`使用配置`visudo`）将它们配置为接受您的重启命令。

# c# - C#文件打开频繁，已经打开异常

> ID：13831498
> 
> 赞同：0
> 
> 时间：2012-12-12T01:43:21.243
> 
> 标签：c#, exception

嘿，所以我有一个经常调用的记录器类，有时当它快速重复调用时，它会抛出一个异常，即该文件已打开并被另一个应用程序使用。我们找到解决此问题的唯一方法是捕获异常然后尝试再次打开它......我不确定如何正确处理这个问题。

```
 /// <summary>
    /// Open a log file based on a date
    /// </summary>
    /// <param name="date"> Date of the file to open </param>
    public static void OpenLogFile(DateTime date)
    {
        while (true)
        {
            try
            {
                logStream = File.Open("Logs/ems." + date.ToString("yyyy-MM-dd") + ".log", FileMode.Append);
                break;
            }
            catch
            {
                continue;
            }
        }
    }

    /// <summary>
    /// Writes to a log file the specified input
    /// </summary>
    /// <param name="input"> Content to write to the log file </param>
    public static void Log(string className, string methodName, string input)
    {
            OpenLogFile(DateTime.Now);

            using (StreamWriter s = new StreamWriter(logStream))
            {
                s.WriteLine(DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") + '[' + className + '.' + methodName + "] " + input);
            }

            CloseLogFile(); 
    }

    /// <summary>
    /// Closes the current log file
    /// </summary>
    public static void CloseLogFile()
    {
        if (logStream != null)
        {
            logStream.Close();
            logStream = null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:45:12.170

由于这是一个日志文件，我认为明显（且正确）的解决方案是在程序执行期间保持文件打开。

如果您不想使用已经实现的 3rd 方记录器，例如 Apache 的[log4net](http://logging.apache.org/log4net/)，您可以编写自己的小记录器类，它使用线程安全机制将行写入文件。

它可能是一个`static`类或单例。通常，程序开始和结束时的执行是可以预测的，因此应该清楚在哪里初始化，并关闭对象/类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:47:32.933

需要一点顺序，而不是免费的磁盘。将日志消息存储在队列中，并具有单线程出列和写入项目。

# grails - 保存实例时解决异常的 Grails 映射

> ID：13831499
> 
> 赞同：0
> 
> 时间：2012-12-12T01:43:32.740
> 
> 标签：grails, mapping, hibernate-mapping

我有以下域类：

```
class Team{   
    static hasMany = [localMatches: Match, visitingMatches: Match]
    static mappedBy = [localMatches: 'localTeam', visitingMatches: 'visitingTeam']

    List<Match> localMatches = new ArrayList<Match>()
    List<Match> visitingMatches = new ArrayList<Match>()
}

class Match{
    Team localTeam
    Team visitingTeam
} 
```

当我运行以下命令时：

```
Match match = new Match(localTeam: aLocalTeam, visitingTeam: aVisitingTeam)
match.save(flush: true, failOnError: true) 
```

我收到异常“原因：org.h2.jdbc.JdbcSQLException：列“LOCAL_TEAM_ID”不允许使用 NULL；SQL 语句：”

所以我需要在保存比赛之前在每个团队中设置比赛以避免异常：

```
Match match = new Match(localTeam: aLocalTeam, visitingTeam: aVisitingTeam)
aLocalTeam.localMatches.add(match)
aVisitingTeam.localMatches.add(match)
match.save(flush: true, failOnError: true) 
```

有什么方法可以映射类，所以我不需要在保存之前将匹配添加到每个团队？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:49:41.633

该`hasMany`块定义 a`Match`有 many `localMatches`，但随后在下面重新定义`localMatches`为与 single 的关系`Match`。我相信你的真正意思是：

```
class Team {   
    static hasMany = [localMatches: Match, visitingMatches: Match]
    static mappedBy = [localMatches: 'localTeam', visitingMatches: 'visitingTeam']
}

class Match {
    Team localTeam
    Team visitingTeam
} 
```

以这种方式映射，`Team`将有两个集合，`Matches`每个集合`Match`都有一个`local`和`visiting Team`。

# .net - Azure 云服务工作者角色崩溃和不健康

> ID：13831500
> 
> 赞同：2
> 
> 时间：2012-12-12T01:43:40.983
> 
> 标签：.net, azure, azure-storage, azure-worker-roles

我有一个具有一个 Web 角色和一个 Worker 角色的项目。每当我在本地测试时，我的 web 和 worker 角色都会按预期工作。（注意，虽然本地版本使用 Azure Compute Emulator，但服务总线队列和消息队列使用实时云版本。）但是，云服务工作者角色在某些操作期间有崩溃的趋势。它会导致实例“回收”并且消息卡在 Azure 服务总线队列中。直到我在本地运行云服务，它才成功处理了消息，然后将其从队列中删除。即使角色正常工作，Azure 也经常在仪表板上告诉我辅助角色运行“不健康”。

有一次，Azure 门户打印了这个错误：

> 未处理的异常：System.Reflection.ReflectionTypeLoadException

为此，我在我的项目中添加了异常处理，并在将更新部署到云后再次尝试，但同样的事情一直在发生。当我将异常处理添加到我的项目时，我不得不将 System.Reflection 库添加到我的工作角色中，但这让我更加困惑。我不明白为什么我在调用我什至最初没有在我的项目中使用的库时收到错误。

有人对这个问题可能是什么有任何想法吗？

**更新：**

我做了一些手动调试，并注意到异常在 Worker Role 的 Run() 中被调用。导致问题的代码行涉及使用实体框架调用数据库。具体线路是：

> 图片 imageEntity = db.Images.Find(ImgViewFromQueue.Id);

我想知道这个问题是否与 Azure 服务器上未正确启用或配置实体框架有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:39:33.837

我在 OSFamily=3（Server 2012）上运行工作者角色时遇到了类似的问题。如果您在 3 上运行并且可以回滚到 2，您可能会发现 worker 角色工作得很好。我在 Azure 支持工程师的帮助下回答了我的问题 - [Azure Worker Role 在 osFamily="2" (Server 2008R2) 上运行，但在 osFamily="3" (Server 2012) 上运行失败](https://stackoverflow.com/questions/13757127/azure-worker-role-runs-on-osfamily-2-server-2008r2-but-fails-on-osfamily-3)

区别：在 OS Family 2 中，WaWorkerHost 运行在 Role 初始化过程生成的临时帐户（带有 GUID 名称）下，该帐户具有特殊权限；在 OS Family 3 中，WaWorkerHost 由“NETWORK SERVICE”帐户运行，该帐户缺少一些工人角色的权限。

如果您必须拥有 OSfamily 3，您可以尝试使用提升的权限运行。在您的 cscfg 文件的`<WorkerRole>`元素中，添加子项：

```
<Runtime executionContext="elevated" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:44:57.340

不确定您是否可以启用 InelliTrace 并重新部署您的包，那么希望您会在系统中找到实际的异常。只是我的2美分。

# graph - HighCharts 将折线图的动画设为 false

> ID：13831501
> 
> 赞同：55
> 
> 时间：2012-12-12T01:44:07.157
> 
> 标签：graph, highcharts

我是 highCharts 的新手，想知道如何关闭折线图的动画。

我尝试在情节线中将其设置为 false，但没有成功。

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-12T02:50:26.993

这与我[在这里](http://jsfiddle.net/huBLe/)回答的相同，但您必须更改`column`为`line`.

```
plotOptions: {
    line: {
        animation: false
    }
} 
```

[**演示**](http://jsfiddle.net/ks87S/)

如果要从所有类型中删除动画，则可以`series`改用。

```
plotOptions: {
    series: {
        animation: false
    }
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-10-15T14:30:09.000

如果您想完全禁用 Highcharts 中的所有动画（在打开或关闭线条时也会发生这些动画），请使用以下命令：

```
chart: {
    animation: false
} 
```

有关更多信息，请参阅[http://api.highcharts.com/highcharts#chart.animation](http://api.highcharts.com/highcharts#chart.animation)。（**[演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/animation-none/)**）

# android - IabHelper 购买FinishedListener

> ID：13831503
> 
> 赞同：22
> 
> 时间：2012-12-12T01:44:16.757
> 
> 标签：android, listener, in-app-billing

如果我通过标准发送购买意向

```
String mySku = "android.test.purchased";

mHelper.launchPurchaseFlow(this, mySku, 10001, mPurchaseFinishedListener); 
```

我可以购买该物品，它会存储，我可以查询该物品，而且效果也很好。唯一不起作用的是 PurchaseFinishedListener。我的代码与示例应用程序几乎相同，但它似乎根本没有被调用。

```
12-12 01:40:47.248: D/IabHelper(23502): Calling getPurchases with continuation token: null
12-12 01:40:50.116: D/IabHelper(23502): Starting async operation: launchPurchaseFlow 
```

这些是最后两个被调用的方法，之后当我完成购买时它不会调用 purchasefinishedlistener

```
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new OnIabPurchaseFinishedListener() {

    @Override
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
        Log.d(TAG, "Purchase finished: " + result + ", purchase: "
                + purchase);
        if (result.isFailure()) {
            complain("Error purchasing: " + result);
            // setWaitScreen(false);
            return;
        }

        if (purchase.getSku().equals(mySku)) {
            Log.d(TAG, "mySku is being consumed.");
            mHelper.consumeAsync(purchase, mConsumeFinishedListener);
        }
        Log.d(TAG, "Purchase successful.");
        new AsyncQuestionsActivity().doInBackground();
    }
}; 
```

从日志到最后没有任何效果。有什么我只是想念的东西吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-12T04:10:45.490

我发现了如何解决它。在onActivityResult 中实现handleActivityResult。它需要在听众和已启动的购买流程之间架起一座桥梁。

下面给出的是我使用的代码：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + ","
                + data);

        // Pass on the activity result to the helper for handling
        if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
            super.onActivityResult(requestCode, resultCode, data);
        } else {
            Log.d(TAG, "onActivityResult handled by IABUtil.");
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T19:40:31.730

AndroidPenguin，我遇到了和你一样的问题，但是我正确设置了活动结果，但我的 purchasefinishedlistener 没有执行。

这是我的 onActivityResult

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (SettingsManager.getBooleanSetting(rootId, "inapppurchase", false)){
        Log.d(TAG, "take care of activity result with billing helper");
        if (!mBillingService.handleActivityResult(requestCode, resultCode, data)) {
            // not handled, so handle it ourselves (here's where you'd
            // perform any handling of activity results not related to in-app
            // billing...
            super.onActivityResult(requestCode, resultCode, data);
        }
        else {
            Log.d(TAG, "onActivityResult handled by IABUtil.");
        }
    }
    else
        super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T11:47:22.843

就我而言，它正在像这样尝试，等到谷歌播放对话框自行关闭。然后，监听器将被调用

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-14T16:46:39.033

对于那些与我遇到同样问题的人......

**我刚刚将我的成员变量 IabHelper 设为静态，这解决了这个问题。**

我已经添加了 AndroidPenguin 的代码，并且在我购买了一个项目之后仍然从一个空的 IabHelper 崩溃（所以 onActivityResult 从来没有机会调用 handleActivityResult，因为 mHelper 是空的）。

# windows - MSYS 错误“rem：找不到命令”

> ID：13831504
> 
> 赞同：4
> 
> 时间：2012-12-12T01:44:26.127
> 
> 标签：windows, makefile, cygwin, msys

我在批处理文件中收到此错误“rem:command not found”。也找不到其他dos 命令（例如echo）。

我的 makefile 正在调用这个批处理文件。这以前在我使用 cygwin 时有效。但是当我更改为 MSYS 时，我收到了这个错误。有谁知道这是为什么？

我在 Windows 电脑上使用 MSYS 版本 1.0.17。但是，我没有安装 Mingw。我也应该安装它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T06:53:58.017

看起来好像您正在尝试使用 Bash 运行“批处理”文件。这行不通。虽然批处理文件解释`rem`为注释，但 Bash 只是认为它是一个命令并尝试运行它。

我的建议是将其重写为 Bash 脚本，也许[**这**](http://ss64.com/nt/rem.html)可能是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T10:47:49.827

尝试使用 **cmd //c [path_to_bat file]**后，它对我有用。这是因为 mingw 在使用 cmd 运行 *.bat 文件后无法直接运行 *.bat 文件。

我发现以下有关此类问题的邮件线程 [https://lists.gnu.org/archive/html/help-gnu-emacs/2003-10/msg00323.html](https://lists.gnu.org/archive/html/help-gnu-emacs/2003-10/msg00323.html)

# memory - __attribute__((packed,aligned(n))) 和 __attribute__((aligned(n))) 有什么区别？

> ID：13831505
> 
> 赞同：2
> 
> 时间：2012-12-12T01:44:31.360
> 
> 标签：memory, gcc, memory-alignment

**属性**((packed,aligned(n))) 和 **属性**((aligned(n)))之间有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:57:16.393

该`aligned`属性指定变量/字段必须具有的*最小对齐方式。*该`packed`属性要求变量/字段应具有最小可能的对齐方式。因此，仅使用`__attribute__((aligned(n))`将最小对齐设置为`n`，但不能保证它不会更大。但是使用`__attribute__((packed,aligned(n)))`将对齐设置为精确`n`。

# java - 空指针异常

> ID：13831511
> 
> 赞同：-3
> 
> 时间：2012-12-12T01:45:44.560
> 
> 标签：java, android, bluetooth, nullpointerexception

我无缘无故地得到这个 NullPointerException 。我正在尝试将加速度计“x”值发送到通过蓝牙连接到我的手机的 MCU。一切似乎都很好，直到它开始发送字节。

MainActivity.class：

```
 private void getAccelerometer(SensorEvent event) {

        float[] values = event.values;
        // Movement
        float x = values[0];
        float y = values[1];
        float z = values[2]; 

        // Convert float value to integer for progress bars because 
        // they dont't support float value
        int mProgressStatus_x = (int)x;
        int mProgressStatus_y = (int)y;
        int mProgressStatus_z = (int)z;

        // Set converted x, y and z values to progress bars
        // Add to each progress bar value 10 because progress bar dosen't support negative value
        mProgressBar_x.setProgress(mProgressStatus_x + 10); 
        mProgressBar_y.setProgress(mProgressStatus_y + 10);
        mProgressBar_z.setProgress(mProgressStatus_z + 10);
        mX = Float.toString(x);
        SendBytes(mX); 
}
    private void SendBytes (String mX) {

        if (mConnectionStatus == 1 && mX != null) {

            // mX is the accelerometer value which is converted to the String
            byte[] out = mX.getBytes();
            // mBluetoothService is BluetoothService.java   
            mBluetoothService.write(out); // Line 150
                }

    } 
```

蓝牙服务类：

```
 public synchronized void connected(BluetoothSocket socket, BluetoothDevice device) {

         // Cancel the thread that completed the connection
         if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null; }
         // Cancel the ConnectedThread to make sure that it's not running currently connection
         if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}
         // Start the ConnectedThread to manage connection and perform transmission 
         mConnectedThread = new ConnectedThread(socket);
         mConnectedThread.start();
         // Send the name of the connected device back to the UI Activity
         Message msg = mHandler.obtainMessage(MainActivity.MESSAGE_DEVICE_NAME);
         Bundle bundle = new Bundle();
         bundle.putString(MainActivity.DEVICE_NAME, device.getName());
         msg.setData(bundle);
         mHandler.sendMessage(msg);
         // Set state of connection to STATE_CONNECTED
         setState(STATE_CONNECTED);
         mmConnectionStatus = 1;
         System.out.println("State connected");
     }

public void write(byte[] out) {
     ConnectedThread r;
     // Synchronize a copy of the ConnectedThread
     synchronized (this) {

         r = mConnectedThread;
     }
     if(out != null){   
     r.write(out); } // Line 133
    }

private class ConnectedThread extends Thread {
        private final BluetoothSocket mmSocket;
        private final InputStream mmInStream;
        private final OutputStream mmOutStream;

    // Thread for managing connection 
    public ConnectedThread(BluetoothSocket socket) {
        System.out.println("ConnectedThread started");
        mmSocket = socket;  
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        try { // Get the input and output streams, using temp objects because
              // member streams are final
              tmpIn = socket.getInputStream();
              tmpOut = socket.getOutputStream(); 
              System.out.println("creating socket");
              }
        catch (IOException e) {
            System.out.println("tmp socket not created");
        }
    mmInStream = tmpIn;
    mmOutStream = tmpOut;
    }

    public void run() {
        System.out.println("ConnectedThread status" + mConnectedThread);

        // Buffer store for the stream
        byte[] buffer = new byte[1024];
        // Bytes returned from the read()
        int bytesIn;
        // Keep listening until an  occurs
        while(true) {
            try {
                bytesIn = mmInStream.read(buffer);
            } catch (IOException e) {
                break;
            }

        }
    }
    // Call this from the MainActivity to send data to the remote device
    public void write(byte[] bytes) {
        System.out.println(bytes);
            if(mState == STATE_CONNECTED && bytes != null){
            try {
                mmOutStream.write(bytes);
                mmOutStream.flush();
            } catch (IOException e) {
                System.out.println("Exception during write" + e);
            }
            }
}
    // Call this from the MainActivity to shutdown the connection
    public void cancel() {

        try {
            mmSocket.close();

        } catch (IOException e) {}

    }
} 
```

日志：

```
12-12 03:22:59.228: D/libEGL(12554): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
12-12 03:22:59.228: D/libEGL(12554): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
12-12 03:22:59.228: D/libEGL(12554): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
12-12 03:22:59.368: D/OpenGLRenderer(12554): Enabling debug mode 0
12-12 03:23:01.767: D/dalvikvm(12554): GC_CONCURRENT freed 111K, 2% free 9181K/9324K, paused 4ms+7ms, total 33ms
12-12 03:23:01.892: D/BluetoothAdapter(12554): enable(): BT is already enabled..!
12-12 03:23:08.509: I/System.out(12554): ConnectThread statusThread[Thread-919,5,main]
12-12 03:23:08.509: W/BluetoothAdapter(12554): getBluetoothService() called with no BluetoothManagerCallback
12-12 03:23:08.517: D/BluetoothSocket(12554): connect(), SocketState: INIT, mPfd: {ParcelFileDescriptor: FileDescriptor[46]}
12-12 03:23:09.017: E/ActivityThread(12554): Activity com.example.bluetoothc.settings has leaked IntentReceiver com.example.bluetoothc.settings$2@4151ecb8 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-12 03:23:09.017: E/ActivityThread(12554): android.app.IntentReceiverLeaked: Activity com.example.bluetoothc.settings has leaked IntentReceiver com.example.bluetoothc.settings$2@4151ecb8 that was originally registered here. Are you missing a call to unregisterReceiver()?
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:795)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:596)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1316)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1296)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:1290)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:423)
12-12 03:23:09.017: E/ActivityThread(12554):    at com.example.bluetoothc.settings.onCreate(settings.java:106)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.Activity.performCreate(Activity.java:5104)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.os.Looper.loop(Looper.java:137)
12-12 03:23:09.017: E/ActivityThread(12554):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 03:23:09.017: E/ActivityThread(12554):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 03:23:09.017: E/ActivityThread(12554):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 03:23:09.017: E/ActivityThread(12554):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 03:23:09.017: E/ActivityThread(12554):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 03:23:09.017: E/ActivityThread(12554):    at dalvik.system.NativeStart.main(Native Method)
12-12 03:23:09.814: I/System.out(12554): making connection to remote device
12-12 03:23:09.814: I/System.out(12554): ConnectedThread started
12-12 03:23:09.814: I/System.out(12554): creating socket
12-12 03:23:09.822: I/System.out(12554): ConnectedThread statusThread[Thread-920,5,main]
12-12 03:23:09.822: I/System.out(12554): State connected
12-12 03:23:09.837: I/System.out(12554): 1
12-12 03:23:09.876: D/AndroidRuntime(12554): Shutting down VM
12-12 03:23:09.876: W/dalvikvm(12554): threadid=1: thread exiting with uncaught exception (group=0x40c25930)
12-12 03:23:09.876: E/AndroidRuntime(12554): FATAL EXCEPTION: main
12-12 03:23:09.876: E/AndroidRuntime(12554): java.lang.NullPointerException
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.example.bluetoothc.BluetoothService.write(BluetoothService.java:133)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.example.bluetoothc.MainActivity.SendBytes(MainActivity.java:150)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.example.bluetoothc.MainActivity.getAccelerometer(MainActivity.java:140)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.example.bluetoothc.MainActivity.onSensorChanged(MainActivity.java:111)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at android.hardware.SystemSensorManager$ListenerDelegate$1.handleMessage(SystemSensorManager.java:204)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at android.os.Looper.loop(Looper.java:137)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-12 03:23:09.876: E/AndroidRuntime(12554):    at dalvik.system.NativeStart.main(Native Method)
12-12 03:23:13.884: I/Process(12554): Sending signal. PID: 12554 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:51:56.693

有一个非常明确的原因。

```
Activity com.example.bluetoothc.settings has leaked IntentReceiver com.example.bluetoothc.settings$2@4151ecb8 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

您正在泄漏 IntentReceiver。当一个事件被路由到接收器（因为您没有取消注册它）很可能在活动暂停/销毁之后，它会在某处抛出 NullPointerException，因为它已经丢失了所有上下文引用，或者它们不再有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:49:05.073

对象“r”的实例为空？检查 mConnectedThread 是否为空。如果你调用空引用函数-> 你得到 NullPointerException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:07:14.570

这里可能`r`是 null 或者可能没有被初始化

# powershell - 通过 jmeter/BSF 采样器/beanshell 运行时的 powershell/powershell 挂起

> ID：13831513
> 
> 赞同：3
> 
> 时间：2012-12-12T01:46:16.093
> 
> 标签：powershell, jmeter, powercli

我希望有人遇到了这个问题，并且可以给我一些关于下一步尝试的提示。

我正在尝试在 jmeter 中运行一些 powercli 脚本（在 powershell 中运行）。我正在使用 beanshell 在 jmeter 中使用 BSF 采样器

我正在使用这个脚本：

```
exec("powershell.exe -PSConsoleFile "C:\Program Files\VMware\InfrastructurVSphere PowerCLI\vim.psc1"
 - command .\CoreApplAdmin.ps1"); 
```

测试运行（我在屏幕上看到了测试的输出），但运行后测试没有返回。基本上，挂了。我不得不杀死jmeter。我在 jmeter 日志中看不到任何内容。

有任何想法吗？非常感谢您提供任何信息/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T08:03:40.090

使用 Os Process 采样器，它更适合您的要求

*   [http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler](http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler)

# mysql - 在 WHERE 之前应用 DISTINCT

> ID：13831514
> 
> 赞同：0
> 
> 时间：2012-12-12T01:46:25.263
> 
> 标签：mysql

假设我有一张这样的桌子：

```
model_id | object_id | date_modified
1        | 123       | NULL
1        | 123       | 2012-12-11 16:55:21
1        | 456       | 2012-12-11 16:52:21
1        | 789       | NULL 
```

我想返回没有修改的object_ids。这是我迄今为止尝试过的：

```
SELECT object_id from Table WHERE date_modified IS NULL 
```

这将返回 123 和 789，我只想要 789。

```
SELECT DISTINCT object_id from Table WHERE date_modified IS NULL 
```

这也返回 123 和 789，因为在 WHERE 过滤结果之后应用了 DISTINCT 子句。

有没有办法通过单个查询来实现这一点，或者我应该只返回一个不同的 object_ids 列表并以编程方式循环和过滤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T01:58:29.540

```
SELECT object_id from Table GROUP BY object_id HAVING MAX(date_modified) IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:54:23.287

询问：

[SQLFIDDLE示例](http://sqlfiddle.com/#!2/d98ea/10)

```
SELECT DISTINCT t.object_id 
from Table1 t
WHERE t.object_id NOT IN (SELECT t1.object_id 
                          FROM Table1 t1
                          WHERE t1.date_modified IS NOT NULL) 
```

结果：

```
| OBJECT_ID |
-------------
|       789 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T01:52:21.670

嵌套查询会有所帮助。内部查询选择所有已修改的object_id，然后外部查询选择所有日期为空但object_id 不在修改列表中的记录。

```
SELECT object_id FROM table
  WHERE date_modified IS NULL AND object_id NOT IN (
    SELECT object_id FROM table
      WHERE date_modified IS NOT NULL
  ) 
```

# sql - 从一个表中选择所有记录并在第二个表中没有另一条记录的情况下返回空值

> ID：13831516
> 
> 赞同：1
> 
> 时间：2012-12-12T01:46:43.560
> 
> 标签：sql

对于这个特定的查询，我已经高高在上，但没有看到它。

我们有两张桌子；帐户表，然后访问表。我想返回完整的帐户名称列表，并用 null 或正确的年份等填写相应的字段。此数据用于 SSRS 的矩阵报告中。

样本：

```
Acounts:
AccountName  AccountGroup  Location
Brown Jug    Brown Group   Auckland
Top Shop     Top Group     Wellington
Super Shop   Super Group   Christchurch

Visit:
AcccountName  VisitDate   VisitAction
Brown Jug     12/12/2012  complete
Super Shop    1/10/2012   complete 
```

我需要选择每周访问并显示那些已经完成访问的帐户，然后是没有访问的帐户。

```
e.g.
Year  Week  AccountName  VisitStatus       for week 10/12/2012 should show
2012    50  Brown Jug    complete
2012    50  Top Group    not complete
2012    50  Super Shop   not complete

e.g.
Year  Week  AccountName  VisitStatus      for week 1/10/2012 should show
2012     2  Brown Jug    not complete
2012     2  Top Group    not complete
2012     2  Super Shop   complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:45:22.827

以下答案假设

A）您想查看给定范围内的每周，该周是否访问过任何帐户。
B) 您希望查看每周的所有帐户
C) 对于在给定一周内访问过的帐户，显示其实际的 VisitAction。
D) 对于在给定周内未访问的帐户，将“未完成”显示为 VisitAction。

如果所有这些都是这种情况，那么以下查询可能会满足您的需求。有一个正常运行的 sqlfiddle 示例，您可以在此处使用：[http ://sqlfiddle.com/#!3/4aac0/7](http://sqlfiddle.com/#!3/4aac0/7)

```
--First, get all the dates in the current year.
--This uses a Recursive CTE to generate a date 
--for each week between a start date and an end date
--In SSRS you could create report parameters to replace
--these values.
WITH WeekDates AS
(
  SELECT CAST('1/1/2012' AS DateTime) AS WeekDate
  UNION ALL
  SELECT DATEADD(WEEK,1,WeekDate) AS WeekDate
  FROM WeekDates
  WHERE DATEADD(WEEK,1,WeekDate) <= CAST('12/31/2012' AS DateTime)
),
--Next, add meta data to the weeks from above. 
--Get the WeekYear and WeekNumber for each week.
--Note, you could skip this as a separate query 
--and just included these in the next query, 
--I've included it this way for clarity
Weeks AS
(
  SELECT
    WeekDate,
    DATEPART(Year,WeekDate) AS WeekYear,
    DATEPART(WEEK,WeekDate) AS WeekNumber
  FROM WeekDates
), 
--Cross join the weeks data from above with the
--Accounts table.  This will make sure that we 
--get a row for each account for each week.  
--Be aware, this will be a large result set 
--if there are a lot of weeks & accounts (weeks * account)
AccountWeeks AS 
(
  SELECT 
    * 
  FROM Weeks AS W
  CROSS JOIN Accounts AS A
)
--Finally LEFT JOIN the AccountWeek data from above
--to the Visits table.  This will ensure that we 
--see each account/week, and we'll get nulls for 
--the visit data for any accounts that were not visited
--in a given week.
SELECT 
  A.WeekYear,
  A.WeekNumber,
  A.AccountName,
  A.AccountGroup,
  IsNull(V.VisitAction,'not complete') AS VisitAction
FROM AccountWeeks AS A
LEFT JOIN Visits AS V
ON A.AccountName = V.AccountName
AND A.WeekNumber = DATEPART(WEEK,V.VisitDate)
--Set the maxrecursion number to a number 
--larger than the number of weeks you will return
OPTION (MAXRECURSION 200); 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:34:28.610

如果我穿了，请纠正我

选择 to_char(v.visitdate,'YYYY') 年份，

to_char(v.visitdate,'WW') WEAK,a.accountname,v.visitaction

从账户 a，访问 v

其中 a.accountname=v.ACCCOUNTNAME

和 to_char(v.visitdate,'WW')=to_char(sysdate,'WW')

联合所有

选择 to_char(sysdate,'YYYY') 年份，

to_char(sysdate,'WW') WEAK,a.accountname,'完成中'

从账户 a

其中 a.accountname 不在（选择 v.ACCCOUNTNAME

从访问 v where to_char(v.visitdate,'WW')=to_char(sysdate,'WW'));

# mysql - 如何找出我的数据库中有多少表和哪些表？

> ID：13831521
> 
> 赞同：3
> 
> 时间：2012-12-12T01:47:18.243
> 
> 标签：mysql

我想知道我的数据库服务器中有多少表，它们是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T01:50:14.787

您可以通过执行以下 SQL 命令从某个数据库请求表：

```
USE <database-name>;
SHOW TABLES; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T01:49:38.793

您可以按以下方式触发查询

```
SELECT * from information_schema.tables; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-09-04T05:08:40.737

**-- 在 MS-SQL Server 中，从数据库中检索所有 TableName。**

选择 * 从 sys.tables;

# jquery - CSS：使用浮动时的 z-index：留在图片库中

> ID：13831527
> 
> 赞同：1
> 
> 时间：2012-12-12T01:48:02.263
> 
> 标签：jquery, html, css, css-float, z-index

我有一个包含随机生成内容的图片库：定位这些图片的 CSS 是：

```
.item {
  width: 200px;
  margin: 10px;
  float: left;
} 
```

我有一些 JQuery 随机选择画廊中的这些图像之一，并通过使用 .addClass 和以下 CSS 将其长度加倍：

```
.frontpageimagelong {
    height: 200px;
    width: 420px;
} 
```

问题是较长的图像隐藏在下图中。我需要将其覆盖或出现在下图上方。

我考虑过使用 Z-Index ：

```
.item {
  width: 200px;
  margin: 10px;
  float: left;
  position: relative;
  z-index: 1;
}

.frontpageimagelong {
height: 200px;
width: 420px;
position: relative;
z-index: 99;
} 
```

但这并没有改变什么。有人对解决此问题的好方法有任何建议吗？谢谢

编辑：添加问题图片：

![在此处输入图像描述](../Images/f07a1703ac414f76233d206d6441b646.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:22:57.287

感谢大家的帮助。我没有解决这个问题，但我解决了这个问题。我使用一些 JQuery 来查找 longimage 右侧的图像，然后再次使用 JQ 删除图像。所以 .item div 仍然存在，只是里面没有图像，所以是不可见的

# c# - C# MySQL - 从特定列中检索数据并插入变量

> ID：13831528
> 
> 赞同：0
> 
> 时间：2012-12-12T01:48:05.860
> 
> 标签：c#, mysql

我正在尝试从数据集中返回一个 int 值。

```
private int AccountID()
    {var ds = new DataSet();
        var da = new MySqlDataAdapter(
                "(SELECT * FROM table WHERE id = 1", databaseCon);
        da.Fill(ds);
        var id= ds.Tables[0].Columns[0];

        return id;
    } 
```

但是我无法返回 id，因为它“无法转换表达式”。

返回 int 后，我​​希望将其插入到其他地方使用的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:51:16.730

这将由 ExecuteScalar() 更好地服务：

```
var cmd = new MySqlCommand("SELECT 1 FROM table WHERE id = 1", databaseCon);
int id = (int)cmd.ExecuteScalar(); 
```

# java - 动态更新 JTable 时出现空指针异常

> ID：13831530
> 
> 赞同：-1
> 
> 时间：2012-12-12T01:48:12.813
> 
> 标签：java, swing, nullpointerexception, jtable

晚上好，我正在使用 JTable，从以前的创建中获取代码。我想做的是动态更新表格。我的做法是将信息存储在链表中，然后通过列表拉取信息以填充表格。问题是我得到一个空指针，我很困惑为什么。我的堆栈跟踪的开始是：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at main$CoverSelection.actionPerformed(main.java:225)
   at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source) 
```

显然它发生在第 225 行，内容如下：

```
CartTable.setModel(new DefaultTableModel(data,ColumnNames)); 
```

回顾过去类似的问题，我不断看到人们提到要确保一切都已初始化，我有。完整代码：

```
data = new Object[1][4];
            //CartTable.setModel(new DefaultTableModel(data,ColumnNames));
            while(abc<OrderList.size())
            {
                System.out.println(OrderList.get(abc).getIsbn());
                System.out.println(OrderList.get(abc).GetTitle());
                System.out.println(OrderList.get(abc).getQuantity());
                System.out.println(Double.toString(OrderList.get(abc).getPrice()));
                //data = new Object[1][4];
                //CartTable.setModel(new DefaultTableModel(data,ColumnNames));
                if (data== null)
                {
                    data = new Object[1][4];
                    data[0][0] = OrderList.get(abc).getIsbn();
                    data[0][1] = OrderList.get(abc).GetTitle();
                    data[0][2] = OrderList.get(abc).getQuantity();
                    data[0][3] = Double.toString(OrderList.get(abc).getPrice());
                    CartTable.setModel(new DefaultTableModel(data,ColumnNames));
                }
                else
                {
                    System.out.println("In the else part");

                    Object [][] temp = new Object[data.length+1][4];
                    for (int rowCt =0; rowCt < data.length; rowCt++)
                    {
                        for (int colCt=0; colCt< 4; colCt++)
                        {
                            temp[rowCt][colCt] = data[rowCt][colCt];
                        }
                    }
                    temp[data.length][0] = OrderList.get(abc).getIsbn();
                    temp[data.length][1] = OrderList.get(abc).GetTitle();
                    temp[data.length][2] = OrderList.get(abc).getQuantity();
                    temp[data.length][3] = OrderList.get(abc).getPrice();
                    data = temp;
                    System.out.println("data length in else: "+data.length);
                    CartTable.setModel(new DefaultTableModel(data,ColumnNames));//line 225
            } 
```

如果数据为空，该代码将通过第一个 if 语句循环运行，但是当它再次通过它以通过 else 语句获取另一行时，它给了我错误。我的初始化程序是：

```
private Object[][] data = null;
private JTable CartTable;
String[] ColumnNames=new String[4]; 
```

有什么帮助或建议吗？我想我已经看过并覆盖了我所有的基地，只是看不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:35:21.247

A) Java 不是 C/C++。Java 中没有“为局部变量自动创建对象”的概念。所有对象都必须显式创建。所以，总是

```
Object o = new Object(); 
```

如果您不想在稍后执行 o.something() 时获得 NPEx。

而且，在这里你必须：

```
private JTable CartTable = new JTable(/*Object[][]*/ rowData, /*Object[]*/ columnNames); 
```

B) 仅使用一次 OrderList.get(abc) 并存储结果。一遍又一遍地做是低效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T04:01:51.633

线路的问题是，

```
CartTable.setModel(new DefaultTableModel(data,ColumnNames)); 
```

您只是在声明 a`JTable CartTable`并且您没有在任何地方为它创建对象。在设置`model`刚刚创建表对象之前，

```
JTable CartTable = new JTable(); 
```

无需设置`data`，`column names`稍后您可以立即使用数据和列名创建一个`model`，然后将此模型设置为表。

**PS：**请阅读@Vincent Ramdhanie 的回答帖子[什么是空指针异常？](https://stackoverflow.com/questions/218384/what-is-a-null-pointer-exception). `NPE`发生的事情解释得很好。

# objective-c - NSMutableArray 到 NSData 到 .txt 文件 - 输出不可读

> ID：13831532
> 
> 赞同：1
> 
> 时间：2012-12-12T01:48:17.130
> 
> 标签：objective-c, nsmutablearray, nsfilemanager, type-conversion

我创建了一个 NSMutableArray，用于存储歌曲名称和艺术家。我正在尝试将此数组转换为 NSData 格式，以便可以将其保存到文本文件中。尝试这样做时，我得到的输出是不可读的：

bplist00ÔghX$versionX$objectsY$archiverT$top †¯$ !")-./3459:;?@AEFGKLMQRSWXY]^_cU$nullÒ R$0V$class€€#Ò ZNS.objectsª€€€€ ...等。

我用来从 NSMutableArray 转换为 NSData 的代码是：

```
NSFileManager *fm;

NSData *dataCache = [NSKeyedArchiver archivedDataWithRootObject:myList];

fm = [NSFileManager defaultManager];

if ([fm createFileAtPath:@"/users/nicholasvogler/desktop/Mysongs.txt" contents:dataCache  attributes:nil] == NO)

    {
        NSLog (@"Could not create data file");
        return 1;
    } 
```

数组中的所有对象都是 NSStrings，我为字符串和数组添加了以下方法：

```
-(void) encodeWithCoder:(NSCoder *)encoder
{

    [encoder encodeObject: songname];
    [encoder encodeObject: artist];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T02:00:29.373

您到底期望输出是什么？你有一个二进制plist。这就是归档数据（例如`NSKeyedArchiver`）发出的内容。还有一种 XML 格式，可以通过 访问`NSPropertyListSerialization`，尽管没有人将 XML 格式用于存档数据，因为实际的 plist 表示是一个实现细节。

因此，尽管它对您来说是一个不可读的二进制 blob，但它仍然会编码您想要的内容，您可以使用`NSKeyedUnarchiver`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:04:47.047

如果数组中的所有对象都是字符串（或包含字符串的字典），那么在我看来，将其保存为 JSON 会更有意义。

# c++ - 指针，C++ ...代码不起作用

> ID：13831533
> 
> 赞同：1
> 
> 时间：2012-12-12T01:48:23.707
> 
> 标签：c++

这就是问题：编写一个具有五个参数的函数 minMax 的定义。前三个参数是整数。最后两个由函数设置为前三个参数值中的最大值和最小值。该函数不返回值。

该函数可以按如下方式使用：

```
int a = 31, b = 5, c = 19, big, small; 
minMax(a, b, c, &big, &small); /* big is now 31; small is now 5 */ 
```

这是我的代码：

```
void minMax(int x, int y, int z, int* big, int* small)
{
  if (x < y && x < z)

    *small = x;

  else if (y < x && y < z)

    *small = y;

  else if (z < x && z < y)

    *small = z;

  if (x > y && x > z)

    *big = x;

    else if (y > x && y > z)

    *big = y;

  else if (z > x && z > y)

    *big = z;
  } 
```

这是我得到的错误：

您的函数没有更改 的值`small`。确保在函数中取消引用它。

不知道出了什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T01:54:05.177

我看到一个*直接*的问题。

你认为当你传递数字时会`1`发生`1`什么`7`？

也许您可能要考虑使用`<=`and`>=`而不仅仅是`<`and `>`。

由于该错误消息看起来与我以前见过的任何编译器错误都不一样（并且代码在语法上*是*有效的），我建议该消息来自一个测试工具，它可能：

*   将`big/small`值设置为传入的数字以外的数字（例如，`-9999`）。
*   使用测试数据（例如`1,1,7`）调用函数。
*   检查输出变量以确保它们已更改为正确的值。

此外，它不是世界上最*易读*的代码（无意冒犯）。如果您可以以一种一目了然的方式构建代码（包括适当的注释），那么您将有成群的未来程序员歌颂您并崇拜您的名字:-)

像这样的东西比许多这些`else if`结构更清楚地显示了意图（IMNSHO）：

```
// Populate big/small based on max/min of x, y and z.

void minMax (int x, int y, int z, int *big, int *small) {
    // Set by default to x, only change if others are bigger.

    *big = x;
     if (y > *big)   *big = y;
     if (z > *big)   *big = z;

    // Same for small but with reversed comparisons.

    *small = x;
     if (y < *small) *small = y;
     if (z < *small) *small = z;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T01:56:34.753

我不确定什么不起作用。看起来这基本上可以工作，但结构可以更好。

也许是这样的：

```
void minMax(int x, int y, int z, int* big, int* small)
{
    *big = *small = x;

    if (y > *big)
        *big = y;
    if (y < *small)
        *small = y;
    if (z > *big)
        *big = z;
    if (z < *small)
        *small = z;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:01:58.983

错误信息

> 您的函数没有更改 的值`small`。确保在函数中取消引用它。

…似乎来自您的老师提供给您的测试工具。

无论如何，这是正确的：您可以选择一些值，您的函数*不会*将任何内容分配给`*small`.

例如，使用`a`,`b`和*相同*`c`的值，您的函数将什么都不做。

 ** * *

反正，

对于未来的问题，请提供一个**完整的示例程序**来演示该问题。

这样人们就不必猜测和使用不可靠的心灵感应。

* * *

此外，作业要求您实现一个*签名不好*的函数。

它教授了一种 Bad Way™ 来设计功能。

这是一个可能的普通 C++ 函数签名：

```
void getMinAndMax( int& smallest, int& largest, int a, int b, int c ) 
```

这是现代 C++ 技术的一个更好的签名：

```
std::pair<int, int> minAndMax( int a, int b, int c ) 
```

后一个函数的名称没有`get`前缀是因为它是一个面向表达式的函数，比如`sin`and `cos`（你不会写`getSin`or `getCos`，对吗？），而第一个函数的前缀的存在仅仅是为了使命名命令，以反映它不是面向表达式的函数，而是面向动作的函数。

当然，使用 C++11 可以让函数接受任意数量的参数。除了在我写这篇文章时，Visual C++ 还不能正确地支持它。例如，这里是`std::min`来自 C++11 标准库的签名：

```
template<class T, class Compare>
T min(initializer_list<T> t, Compare comp); 
```

使用 C++03，可以通过接受模板类型的单个容器参数*在某种程度上*做到这一点。*

# mysql - SELECT DISTINCT 返回重复值

> ID：13831537
> 
> 赞同：-2
> 
> 时间：2012-12-12T01:48:57.853
> 
> 标签：mysql, sql

我有 3 张桌子`players` `positions` `players_national`

我需要`SELECT DISTINCT`定位`players_national`player_positon 与`players`表相关联的位置。

我的表是这样的：

```
Players Table
-----------------------------------------------------------------------
| player_id         player_name     player_team     player_position   |
-----------------------------------------------------------------------
    1               KAKA                12              1
    2               Ronaldo             7               2
    3               Adriano             10              2

Positions Table
-------------------------------------------------------
| position_id         position_name                   |
-------------------------------------------------------
     1                  Midfield            
     2                  Forward         

Players_national Table
-------------------------------------------------------------------
| player_id             player_team         player_national_team  |
-------------------------------------------------------------------
     1                       12                         4
     2                       7                          4
     3                       19                         4

My Dream output is this
---------------------------------------------------
| player_national_team          position          |
---------------------------------------------------
          4                         1                           
          4                         2 
```

我的查询是这样的：

```
SELECT DISTINCT players. * , positions. * , players_national. * 
FROM players
LEFT JOIN positions ON positions.position_id = players.player_position
LEFT JOIN players_national ON players_national.player_id = players.player_id
WHERE players_national.player_id = players.player_id AND players_national.player_national_team = 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:55:35.300

如果您从每个表中选择所有内容，那么每一行都将是`DISTINCT`；您需要将您的`SELECT`条款限制在您想要成为的领域`DISTINCT`

```
SELECT DISTINCT positions.position_id, players_national.player_national_team
FROM            players
                LEFT JOIN positions ON positions.position_id = players.player_position
                LEFT JOIN players_national ON players_national.player_id = players.player_id
WHERE           players_national.player_id = players.player_id AND players_national.player_national_team = 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:13:27.983

桌面玩家上不同的 player_position，加入到桌面 player_national 的位置

```
SELECT 
  DISTINCT(players.player_position),
  players_national.player_national_team
FROM players INNER JOIN players_national; 
```

### 结果：

```
+-----------------+----------------------+
| player_position | player_national_team |
+-----------------+----------------------+
|               1 |                    4 |
|               2 |                    4 |
+-----------------+----------------------+
2 rows in set 
```

# c++ - 增强精神辅助功能（具有模板化返回类型的模板）

> ID：13831538
> 
> 赞同：3
> 
> 时间：2012-12-12T01:49:02.783
> 
> 标签：c++, templates, boost, boost-spirit

我正在使用 boost spirit，为了简化对多个解析器组件的测试，我希望有一个像这样的辅助函数（不起作用）

```
namespace qi = boost::spirit::qi;
namespace tests {
 template <typename P, typename Attr>
 Attr parse(P const& p, const string& input)
 {
  string::const_iterator f = input.begin();
  string::const_iterator l = input.end();
  Attr parsed;
  qi::phrase_parse(f, l, p, boost::spirit::ascii::space, parsed);
  return parsed;
 }
} 
```

后来这样称呼它

```
 BOOST_CHECK_EQUAL(parse(qi::int_, "23" ), 23); 
```

编译器错误是这样的

```
 template<class P, class Attr> Attr tests::parse(const P&, const string&)
 template argument deduction/substitution failed:
 couldn't deduce template parameter ‘Attr’ 
```

一种解决方案是更改函数解析，以便它通过引用返回参数中的解析值。但我想知道是否还有其他方法。

也许 P 和 Attr 是相关的，我在文档中找不到它（因为 Attr 是解析器 P 返回的类型），所以这可能是只有一种类型的模板？

我可以改为保留定义原样，并将调用更改为

```
 BOOST_CHECK_EQUAL(parse<X,Y>(qi::int_, "23" ), 23); 
```

但是，X 类型是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T05:36:37.790

并非总是可以从解析器计算出兼容的属性类型，因为“上下文”通常取决于属性类型。如果您坚持 Spirit 的延续风格约定，您将面临更少的麻烦。例如，请参阅文档中的测试工具：http: [//www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/basics.html#spirit.qi。参考.basics.examples](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/reference/basics.html#spirit.qi.reference.basics.examples)

您可以像这样集成升压测试：

```
template <typename P, typename F>
void parse(P const& p, const string& input, F f)
{
  qi::phrase_parse(input.begin(), input.end(), p[f], boost::spirit::ascii::space);
}

BOOST_AUTO_TEST_CASE(parse_int)
{
  parse(qi::int_, "23", [] (int x) { BOOST_CHECK_EQUAL( x, 23 ); } );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:56:43.387

`attribute_of_qi_component`您可以从[此处](http://article.gmane.org/gmane.comp.parsers.spirit.general/18387)使用 Hartmut Kaiser 的元函数。这在内部使用了 il​​djarn 为各个解析器建议的内容，除此之外，还适用于`qi::int_ >> qi::lexeme[ qi::as_string[+qi::char_] ]`如下表达式。

```
#define BOOST_TEST_MODULE attr_of_qi_parsers

#include <boost/test/included/unit_test.hpp>

#include <boost/spirit/include/qi.hpp>
#include <string>
#include <utility>
#include <boost/fusion/include/adapted.hpp>

namespace qi = boost::spirit::qi;

typedef std::pair<int,int> pair_type;
typedef boost::fusion::vector2<int,std::string> vector_int_string;

struct data
{
    data(){}
    data(int m1, int m2): member1(m1), member2(m2) {}

    int member1;
    int member2;
};

std::ostream& operator<<(std::ostream& os, const data& d)
{
    os << "{ 1st: " << d.member1 << ", 2nd: " << d.member2 << " }";
    return os;
}

bool operator==(const data& lhs, const data& rhs)
{
    return lhs.member1 == rhs.member1 && lhs.member2 == rhs.member2;
}

BOOST_FUSION_ADAPT_STRUCT(data,
        (int, member1)
        (int, member2)
)

//BOOST_CHECK_EQUAL requires that the arguments have defined operator<<
//You can either use in the global namespace 
BOOST_TEST_DONT_PRINT_LOG_VALUE(pair_type);

//or define operator<< in the namespace std. This is technically illegal but it works
//namespace std
//{
//  std::ostream& operator<<(std::ostream& os, const std::pair<int,int>& p)
//  {
//      os << "<" << p.first << "," << p.second << ">";
//      return os;
//  }
//}

namespace tests {

    template <typename Expr, typename Iterator = boost::spirit::unused_type>
    struct attribute_of_qi_component
    {
        typedef typename boost::spirit::result_of::compile<
            qi::domain, Expr
        >::type parser_expression_type;

        typedef typename boost::spirit::traits::attribute_of<
            parser_expression_type, 
            boost::spirit::unused_type, Iterator
        >::type type;
    };

    template <typename P>
    typename attribute_of_qi_component<P>::type parse(P const& p, const std::string& input)
    {
        std::string::const_iterator f = input.begin();
        std::string::const_iterator l = input.end();
        typename attribute_of_qi_component<P>::type parsed;
        qi::phrase_parse(f, l, p, boost::spirit::ascii::space, parsed);
        return parsed;
     }

BOOST_AUTO_TEST_CASE(int_parser) {
    BOOST_CHECK_EQUAL(parse(qi::int_, "23" ), 23);
}

BOOST_AUTO_TEST_CASE(int_and_string_parser) {
    BOOST_CHECK_EQUAL(parse(qi::int_ >> qi::lexeme[ qi::as_string[+qi::char_] ], "23 is a number"), vector_int_string(23,"is a number"));
}

BOOST_AUTO_TEST_CASE(pair_rule_parser){
    qi::rule<std::string::const_iterator,pair_type(),boost::spirit::ascii::space_type> pair_rule = qi::int_ >> ',' >> qi::int_;
    BOOST_CHECK_EQUAL(parse(pair_rule,"1, 2"), std::make_pair(1,2));
}

BOOST_AUTO_TEST_CASE(data_rule_parser){
    qi::rule<std::string::const_iterator,data(),boost::spirit::ascii::space_type> data_rule = qi::int_ >> ',' >> qi::int_;
    BOOST_CHECK_EQUAL(parse(data_rule,"2, 4"), data(2,4));
}

}//end of tests namespace 
```

# python - 获取 matplotlib 颜色循环状态

> ID：13831549
> 
> 赞同：96
> 
> 时间：2012-12-12T01:50:07.087
> 
> 标签：python, matplotlib

是否可以查询 matplotlib 颜色循环的当前状态？换句话说，是否有一个函数`get_cycle_state`会以下列方式运行？

```
>>> plot(x1, y1)
>>> plot(x2, y2)
>>> state = get_cycle_state()
>>> print state
2 
```

我希望状态成为将在图中使用的下一种颜色的索引。或者，如果它返回下一个颜色（上例中默认循环的“r”），那也可以。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-12-12T02:24:48.283

### 访问颜色循环迭代器

没有“面向用户”（又名“公共”）方法来访问底层迭代器，但您可以通过“私有”（按照约定）方法访问它。`iterator`但是，如果不更改它，您将无法获得状态。

### 设置颜色循环

顺便说一句：您可以通过多种方式设置颜色/属性循环（例如`ax.set_color_cycle`，在 <1.5 或`ax.set_prop_cycler`>=1.5 的版本中）。请查看[此处的示例，了解版本 1.5 或更高版本](http://matplotlib.org/examples/color/color_cycle_demo.html)，或[查看以前的样式](http://matplotlib.org/1.4.3/examples/color/color_cycle_demo.html)。

### 访问底层迭代器

但是，虽然没有面向公众的方法来访问可迭代对象，但您可以通过帮助程序类实例 为给定的轴对象 ( `ax`)访问它。名称有点令人困惑，但它是幕后机器，它允许命令处理所有可以调用的奇怪和多样的方式。除此之外，它还可以跟踪自动分配的颜色。同样，可以通过默认填充颜色和补丁属性来控制循环。`_get_lines``ax._get_lines``plot``plot``ax._get_patches_for_fill`

无论如何，可迭代的颜色循环`ax._get_lines.color_cycle`适用于线条和`ax._get_patches_for_fill.color_cycle`补丁。在 matplotlib >=1.5 上，这已更改为[使用`cycler`library](http://matplotlib.org/cycler/)，并且调用 iterable`prop_cycler`而不是`color_cycle`并产生 a `dict`of 属性而不是仅颜色。

总而言之，你会做这样的事情：

```
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
color_cycle = ax._get_lines.color_cycle
# or ax._get_lines.prop_cycler on version >= 1.5
# Note that prop_cycler cycles over dicts, so you'll want next(cycle)['color'] 
```

### 您无法查看状态`iterator`

但是，这个对象是“裸”的`iterator`。我们可以很容易地获得下一个项目（例如`next_color = next(color_cycle)`，但这意味着*之后*的下一个颜色将被绘制。根据设计，没有办法在不更改迭代器的情况下获取它的当前状态。

In`v1.5`或更大，获得使用的对象会很好`cycler`，因为我们可以推断出它的当前状态。但是，`cycler`对象本身在任何地方都无法访问（公开或私下）。相反，只有`itertools.cycle`从对象创建的实例`cycler`是可访问的。无论哪种方式，都无法进入颜色/属性循环器的底层状态。

### 改为匹配先前绘制的项目的颜色

在你的情况下，听起来你想要匹配刚刚绘制的东西的颜色。与其尝试确定颜色/属性是什么，不如根据绘制的属性设置新项目的颜色/等。

例如，在你描述的情况下，我会做这样的事情：

```
import matplotlib.pyplot as plt
import numpy as np

def custom_plot(x, y, **kwargs):
    ax = kwargs.pop('ax', plt.gca())
    base_line, = ax.plot(x, y, **kwargs)
    ax.fill_between(x, 0.9*y, 1.1*y, facecolor=base_line.get_color(), alpha=0.5)

x = np.linspace(0, 1, 10)
custom_plot(x, x)
custom_plot(x, 2*x)
custom_plot(x, -x, color='yellow', lw=3)

plt.show() 
```

![在此处输入图像描述](../Images/7b9b122a20291707c3d53844e4e35ac0.png)

在这种情况下，这不是唯一的方法，但它比尝试事先获取绘制线的颜色更干净。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-07-23T06:47:35.213

这是一种适用于 1.5 的方法，它有望在未来得到验证，因为它不依赖于带有下划线的方法：

```
colors = plt.rcParams["axes.prop_cycle"].by_key()["color"] 
```

这将为您提供按当前样式定义的颜色列表。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-11-09T11:56:30.150

注意：在最新版本的 matplotlib (>= 1.5)`_get_lines`中发生了变化。您现在需要`next(ax._get_lines.prop_cycler)['color']`在 Python 2 或 3（或`ax._get_lines.prop_cycler.next()['color']`在[Python 2](https://stackoverflow.com/questions/5237611/itertools-cycle-next)中）使用从颜色循环中获取下一个颜色。

尽可能使用@joe-kington 答案下部显示的更直接的方法。由于`_get_lines`它不是面向 API 的，因此将来可能会以不向后兼容的方式再次更改。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-12T02:20:38.827

当然，这会做到。

```
#rainbow

import matplotlib.pyplot as plt
import numpy as np

x = np.linspace(0,2*np.pi)
ax= plt.subplot(1,1,1)
ax.plot(np.sin(x))
ax.plot(np.cos(x))

rainbow = ax._get_lines.color_cycle
print rainbow
for i, color in enumerate(rainbow):
    if i<10:
        print color, 
```

给出：

```
<itertools.cycle object at 0x034CB288>
r c m y k b g r c m 
```

这是matplotlib使用[itertools.cycle的itertools函数](http://docs.python.org/2/library/itertools.html#itertools.cycle)

编辑：感谢您的评论，似乎无法复制迭代器。一个想法是转储一个完整的周期并跟踪您正在使用的值，让我重新讨论一下。

Edit2：好的，这将为您提供下一种颜色并创建一个新的迭代器，其行为就像未调用 next 一样。这不会保留着色顺序，只是下一个颜色值，我把它留给你。

这给出了以下输出，请注意图中的陡度对应于索引，例如第一个 g 是最底部的图，依此类推。

```
#rainbow

import matplotlib.pyplot as plt
import numpy as np
import collections
import itertools

x = np.linspace(0,2*np.pi)
ax= plt.subplot(1,1,1)

def create_rainbow():
    rainbow = [ax._get_lines.color_cycle.next()]
    while True:
        nextval = ax._get_lines.color_cycle.next()
        if nextval not in rainbow:
            rainbow.append(nextval)
        else:
            return rainbow

def next_color(axis_handle=ax):
    rainbow = create_rainbow()
    double_rainbow = collections.deque(rainbow)
    nextval = ax._get_lines.color_cycle.next()
    double_rainbow.rotate(-1)
    return nextval, itertools.cycle(double_rainbow)

for i in range(1,10):
    nextval, ax._get_lines.color_cycle = next_color(ax)
    print "Next color is: ", nextval
    ax.plot(i*(x))

plt.savefig("SO_rotate_color.png")
plt.show() 
```

安慰

```
Next color is:  g
Next color is:  c
Next color is:  y
Next color is:  b
Next color is:  r
Next color is:  m
Next color is:  k
Next color is:  g
Next color is:  c 
```

![旋转颜色](../Images/b82e913f0181bb8f62b7184233a08b4b.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-12-15T17:20:45.030

我只想补充上面@Andi 所说的内容。由于`color_cycle`在 matplotlib 1.5 中已弃用，因此您必须使用`prop_cycler`，但是，Andi 的解决方案 ( `ax._get_lines.prop_cycler.next()['color']`) 为我返回了此错误：

> AttributeError：“itertools.cycle”对象没有属性“next”

对我有用的代码是: `next(ax._get_lines.prop_cycler)`，实际上与@joe-kington 的原始响应相差不远。

就个人而言，我在制作 twinx() 轴时遇到了这个问题，它重置了颜色循环器。我需要一种使颜色正确循环的方法，因为我使用的是`style.use('ggplot')`. 可能有更简单/更好的方法来做到这一点，所以请随时纠正我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-22T08:38:25.553

由于 matplotlib 使用`itertools.cycle`我们实际上可以查看整个颜色循环，然后将迭代器恢复到之前的状态：

```
def list_from_cycle(cycle):
    first = next(cycle)
    result = [first]
    for current in cycle:
        if current == first:
            break
        result.append(current)

    # Reset iterator state:
    for current in cycle:
        if current == result[-1]:
            break
    return result 
```

这应该返回列表而不改变迭代器的状态。

与 matplotlib >= 1.5 一起使用：

```
>>> list_from_cycle(ax._get_lines.prop_cycler)
[{'color': 'r'}, {'color': 'g'}, {'color': 'b'}] 
```

或使用 matplotlib < 1.5：

```
>>> list_from_cycle(ax._get_lines.color_cycle)
['r', 'g', 'b'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-26T20:30:03.463

在不通过循环器进行整个循环的情况下，我能找到的最简单的方法是`ax1.lines[-1].get_color()`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-22T08:32:43.433

**如何访问颜色（和完整的样式）循环？**

当前状态存储在`ax._get_lines.prop_cycler`. 没有内置方法可以公开泛型的“基本列表” [`itertools.cycle`](https://docs.python.org/2/library/itertools.html#itertools.cycle)，尤其是`ax._get_lines.prop_cycler`（见下文）。

我在[这里](https://stackoverflow.com/a/59442656/2707864)发布了一些函数来获取关于`itertools.cycle`. 然后可以使用

```
style_cycle = ax._get_lines.prop_cycler
curr_style = get_cycle_state(style_cycle)  # <-- my (non-builtin) function
curr_color = curr_style['color'] 
```

**在不改变循环状态的情况下**获取当前颜色。

* * *

**TL;博士**

**颜色（和完整的样式）循环存储在哪里？**

样式循环存储在两个不同的位置，一个用于*default*，一个用于*当前*轴（假设`import matplotlib.pyplot as plt`和`ax`是轴处理程序）：

```
default_prop_cycler = plt.rcParams['axes.prop_cycle']
current_prop_cycle = ax._get_lines.prop_cycler 
```

注意这些有不同的类。默认是“基本循环设置”，它不知道任何轴的任何当前状态，而当前知道要遵循的循环及其当前状态：

```
print('type(default_prop_cycler) =', type(default_prop_cycler))
print('type(current_prop_cycle) =', type(current_prop_cycle))

[]: type(default_prop_cycler) = <class 'cycler.Cycler'>
[]: type(current_prop_cycle) = <class 'itertools.cycle'> 
```

默认循环可能有几个键（属性）循环，一个只能得到颜色：

```
print('default_prop_cycler.keys =', default_prop_cycler.keys)
default_prop_cycler2 = plt.rcParams['axes.prop_cycle'].by_key()
print(default_prop_cycler2)
print('colors =', default_prop_cycler2['color'])

[]: default_prop_cycler.keys = {'color', 'linestyle'}
[]: {'color': ['r', 'g', 'b', 'y'], 'linestyle': ['-', '--', ':', '-.']}
[]: colors = ['r', 'g', 'b', 'y'] 
```

在定义之后，甚至可以更改`cycler`用于给定的`axes``custom_prop_cycler`

```
ax.set_prop_cycle(custom_prop_cycler) 
```

但是没有内置方法可以公开泛型的“基本列表” `itertools.cycle`，尤其是`ax._get_lines.prop_cycler`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-12-10T13:52:57.310

在 matplotlib 2.2.3 版中，属性`get_next_color()`上有一个方法`_get_lines`：

```
import from matplotlib import pyplot as plt
fig, ax = plt.subplots()
next_color = ax._get_lines.get_next_color() 
```

`get_next_color()`返回一个 html 颜色字符串，并推进颜色循环迭代器。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-03-04T09:39:51.490

# 最小的工作示例

我已经为此苦苦挣扎了好几次。这是[Andis answer](https://stackoverflow.com/a/33608574/7128154)的最小工作示例。 [![在此处输入图像描述](../Images/788fc79dcceb7269d10ee72358f2a0dd.png)](https://i.stack.imgur.com/MG4L5.png)

## 代码

```
import numpy as np
import matplotlib.pyplot as plt

xs = np.arange(10)

fig, ax = plt.subplots()

for ii in range(3):
    color = next(ax._get_lines.prop_cycler)['color']
    lbl = 'line {:d}, color {:}'.format(ii, color)
    ys = np.random.rand(len(xs))
    ax.plot(xs, ys, color=color, label=lbl)
ax.legend() 
```

# uiwebview - 如何将身份验证令牌传递给 UIWebView？

> ID：13831555
> 
> 赞同：1
> 
> 时间：2012-12-12T01:50:14.747
> 
> 标签：uiwebview, youtube

我想通过 UIWebView 在我的应用程序中播放你的私人视频。要求是不应询问用户播放该视频的用户名和密码。所以我在我的代码中完成了谷歌身份验证，并获得了身份验证令牌。我需要将该身份验证令牌发送到 UIWebView 以便它可以播放该私人视频而无需询问用户用户名和密码（因为我们已经在您的管上制作了频道并且我们有用户名和密码）。如果任何机构有解决方案，请提供。谢谢

# xcode - Xcode 卡在索引上

> ID：13831559
> 
> 赞同：133
> 
> 时间：2012-12-12T01:50:42.827
> 
> 标签：xcode, indexing, freeze

我已经工作了 2 个月的项目无缘无故停止工作，因为 Xcode 卡在“索引”上。我不能再构建项目了。如果我尝试构建，Xcode 会冻结，我必须强制退出。这只发生在这个项目中。

我尝试清理所有派生数据，但没有帮助。

我正在使用 Xcode 4.5.2。

有任何想法吗？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-12-12T07:17:55.940

1.  打开您的项目文件夹。
2.  找到 ProjectName.xcodeproj 文件。
3.  右键单击复制并粘贴到安全位置。
4.  右键单击显示包内容。
5.  找到 project.xcworkspace 文件并删除该文件。
6.  重新打开您的项目并清理和重建。

如果您的问题没有解决，请用您的备份文件替换该文件。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2014-09-13T09:11:55.937

1.  从 Xcode 关闭该项目
2.  打开 Xcode Organizer，找到有问题的项目
3.  删除管理器中的派生数据文件夹
4.  关闭/重新打开 Xcode

Nuking 派生数据是在所有 Xcode 行为不端的情况下尝试的第一件事

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-02-17T01:05:33.363

我遇到了这个确切的问题，它是由 20 项数组文字引起的。不得不切换到不同的语法。很傻。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-09-25T08:31:51.423

1.  关闭任何打开的 Xcode
2.  `rm -rf ~/Library/Developer/Xcode/DerivedData`
3.  右键单击您的 PROJECT_NAME.xcworkspace，选择“显示内容”，然后删除“xcuserdata”文件夹

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-08T13:40:17.867

我有一个类似的问题，发现我不小心将一个类定义为它自己的子类。我没有收到任何警告或错误，但编译卡住了。

```
class mainClass : mainClass
{
    ...
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-04-23T21:32:32.553

如果您尝试解决索引问题并且您在页面下方这么远，请尝试另一件事！

尝试将此标志添加到您的构建设置中。

`-Xfrontend -warn-long-expression-type-checking=400`

![构建设置标志](../Images/0da14921681d9833fdd9bf38e524c313.png)

如果编译器需要很长时间才能推断出复杂的表达式，则会导致警告。

![警告](../Images/c56dac54807bc4ee271f1f126a449e35.png)

这可能会导致构建错误，在您找到慢速表达式然后删除构建标志后该错误就会消失。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-07-17T20:37:24.683

使用 Xcode 6 时，它说

> 等待制作

可能是 make 的一个实例已经在运行。终止进程和索引继续进行。愚蠢，但为我工作。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-08-10T11:19:29.923

*   首先，断开网络。您的有线网络和无线网络都应该关闭。
*   第二，杀死`com.apple.dt.SourceKitService`进程。然后 XCode 将重新开始索引而不是卡住。

[![在此处输入图像描述](../Images/14ecd72f3da73defe718e3f4283dc013.png)](https://i.stack.imgur.com/4m2Xd.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-07-11T13:38:57.577

按住 alt > 产品 > 清理构建文件夹

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-02-08T08:01:01.273

这是一个 Xcode 错误（Xcode 8.2.1），我已经向 Apple 报告过，当你有一个大字典文字或嵌套字典文字时，它会发生。您必须将您的字典分解成更小的部分并使用 append 方法添加它们，直到 Apple 修复该错误。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-04-02T08:51:17.017

这发生在我身上。如果您使用的是 cocoapods，请执行以下操作：

1.  删除 project.xcworkspace
2.  在终端上使用“pod install”重新安装 pod
3.  它将创建一个新的 project.xcworkspace
4.  打开新的 project.xcworkspace -> Clean -> Build

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-12-04T07:04:37.380

对我来说，完全关闭 Xcode 然后重新启动项目是可行的。

这不是原始问题的解决方案，我不相信，但在删除文件和文件夹等之前尝试更简单的事情。感谢这个想法的[答案](https://stackoverflow.com/a/16745826/3681880)。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-01-10T23:56:28.237

我有一个类似的问题，Xcode 会花费大量时间进行索引，并且会经常挂起构建项目，此时我不得不强制退出并重新启动 Xcode。这很烦人。

然后我注意到项目中有一个关于不正确分配`self`为代表的警告。果然，类声明中缺少协议。请注意，OP 的示例代码中有类似的分配（尽管无法从示例中判断是否声明了正确的协议）：

```
leaderboardController.leaderboardDelegate == self; 
```

解决该警告后（通过正确声明实现的协议），Xcode 停止了行为不端。另外，我应该注意到，自从协议方法*被*实现以来，该项目确实执行正确。只是 Xcode 无法*确认*该协议实际上应该由该类实现。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-10-31T12:14:54.393

对我来说，我犯了一个愚蠢的错误。我写了一个这样的类：

```
class A: A {
.......
} 
```

一个类继承自身导致冻结。Xcode 没有消息提示。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-12-07T09:26:59.800

没有什么对我有用，我的项目太大（将目标`c`、、、和文件与 j2obj 合并）。我已经禁用了 Xcode 索引并且几个月没有代码完成工作（这很痛苦）。但最后我找到了解决方法。这个想法是保持 Xcode 对代码进行索引，但使用外部工具（如.`c++``swift``java``cputhrottle`

所以首先你需要在终端安装 cputhrottle

> 冲泡安装 cputhrottle

然后像这样限制Xcode索引过程（20 = 20%）

> sudo cputhrottle $(pgrep -f com.apple.dt.SKAgent) 20

我在这里用模式细节公开了我的“解决方案”：[How to prevent Xcode using 100% of CPU when indexing large projects](http://jpsarda-blog.tumblr.com/post/180886458652/how-to-prevent-xcode-using-100-of-cpu-when)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-08-02T21:23:02.903

我正在使用 Xcode 11.4.1，我在几个项目中遇到了同样的问题。每次，当互联网连接丢失时，索引就会启动。最好的解决方案（这只是我基于观察这个问题的意见）：

**- 关闭互联网并终止“com.apple....”进程，然后重新启动 Xcode（打开连接）**

或更容易

**- 只需重新启动 Mac（通过互联网）**

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-07-03T23:21:24.187

在 Xcode 6.4 中有类似的问题。进度条指示“索引”已“暂停”。尝试删除 project.xcworkspace，然后如上所述删除派生数据。似乎没有帮助。注意到上面的帖子还建议修复警告，并且由于我继承了这个有 180 条警告的庞大项目，我对自己说，“这到底是什么看起来像是修复警告的好日子”。当我修复警告时，半小时后，我注意到“索引”进度条从 10% 增加到大约 20%。一个小时后，到了50%，又一个小时到了80%，又过了半个小时就完成了！结论：在上述建议中添加“吃午饭或午睡”。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-09-01T00:49:00.180

我在 Xcode 7.0 beta 中遇到了同样的问题。就我而言，PROJECT 和 TARGETS 的“构建设置”的“配置文件”和“产品包标识符”的值不同。我为它们设置了相同的值。而且我还对“appName”和“appNameTest”的目标使用了相同的值。然后关闭项目并重新打开它。这解决了我的情况。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-03-01T02:31:34.933

就我而言，删除派生数据目录没有帮助。显然我有一个文件被另一个进程锁定，因为在关闭了几个终端窗口和 emacs 并终止了 react-native 打包程序进程之后，一切都解决了。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-05-26T10:28:09.653

我在一些使用 Xcode 9.3.1 的项目中遇到过这个问题，在我的情况下，问题是由于某些原因 Xcode 不喜欢的一些快速代码。这个问题很难解决，因为很难找到导致问题的文件。

当我遇到这个问题时，我从 Xcode 项目中删除了一些文件（删除引用）并尝试测试索引是否有效。我这样做的过程

1.  删除一些文件
2.  关闭 Xcode
3.  打开 Xcode
4.  如果索引完成尝试重命名某些方法，如果可行，那么您删除的文件可能对 Xcode 有一些奇怪的东西。

在我的情况下，我在同一个文件中有一个带有响应式扩展的类定义，由于某种原因 Xcode 不喜欢它，我将响应式扩展移动到另一个文件，现在索引工作正常。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-10-01T02:52:37.173

也停止运行应用程序。如果您的 xcode 正在运行另一个应用程序，请先停止它，然后您应该继续索引。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-03-08T22:52:27.837

对我来说，原因是我同时在*主编辑器*和*助理编辑器中打开了***同一个**文件。一旦我关闭了助理编辑器，它就通过了。（Xcode 版本 7.2.1）

 *** * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-05-28T18:21:44.277

关闭您的 Xcode ，关闭任何 git 客户端（源代码树或终端）（如果已打开），最后重新启动您的项目。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-07-18T11:29:29.717

最近在 XCode 7.3.1 上遇到了这个问题——对我来说，我注意到 CleanMyMac3 的 RAM 使用率达到 100%。在我重新启动机器后，这个问题神奇地自行解决了。然而，平心而论，我已经尝试了接受的答案，所以你需要在重新启动之前做同样的事情以防万一:-)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-09-07T10:20:37.427

我通过简单地从我的设备中删除应用程序并重建来解决这个问题。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-09-17T16:11:52.607

我在 swift 2.2 中遇到了同样的问题

它与泛型函数重载函数有关

```
func warnLog() {
    print("Warning line: \(#line) file: \(#file) ")
}

func warnLog<T>(input:T? = nil) -> T? {
    print("Warning line: \(#line) file: \(#file) ")
    return input
}

func warnLog<T>(input:T) -> T {
    print("Warning line: \(#line) file: \(#file) ")
    return input
} 
```

我需要做的就是删除一个未使用的重载

```
func warnLog<T>(input:T? = nil) -> T? {
    print("Warning line: \(#line) file: \(#file) ")
    return input
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-05-03T22:49:46.247

我的情况：不是 project.xcworkspace 文件，也不是 Derived Data 文件夹。

我已经浪费了很多时间。更糟糕的是，没有错误消息。Xcode 方面没有任何线索。完全输了。

最后这个函数（有10多个参数）负责。

```
func animationFrames(level: Float,
                     image: String,
                     frame0: String,
                     frame1: String,
                     frame2: String,
                     frame3: String,
                     frame4: String,
                     frame5: String,
                     frame6: String,
                     frame7: String,
                     frame8: String,
                     frame9: String,
                     frame10: String) {
} 
```

要疯了！事实是令人担忧（因为没有语法错误，或者任何类型）

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-04-05T18:18:55.297

对于 XCode 9.3 索引问题 - 卸载 XCode 并从零重新安装。为我工作。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-05-12T11:56:52.750

当我的机器没有交换空间时，这个问题发生在我身上。关闭了几个程序和浏览器选项卡，构建在 30 分钟后突然成功。与我这边的派生数据、锁定文件等无关。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-05-20T20:37:14.127

我已经尝试了所有列出的东西，索引一直冻结。这对我有帮助：如果您的索引被冻结，并且您有一个或多个 swift 进程占用 99% 的 cpu - 只需终止这个 swift 任务，稍等一下，进度应该会移动。它可以重复，直到完成，在我的情况下，我杀死了该过程 7 次，但最后，索引已完成！

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-06-30T01:20:46.080

在 SwiftUI 项目中遇到了这个问题。结果我的一个 SwiftUI 视图有一个错误声明的变量。我有：

```
@EnvironmentObject var roomViewModel 
```

我需要的地方：

```
@EnvironmentObject var roomViewModel: RoomViewModel 
```

没有编译器错误，只是无休止的索引。在我修复了错误之后，项目很快就建成了。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-07-27T14:01:15.227

是的，每次我尝试打开我的 Main.Storyboard Xcode 都会突然冻结。这仅发生在我的一个项目中，然后发生在我在 Xcode 上的所有项目中。

尝试了以下*没有运气*：

1.  删除 Xcode 并重新安装它。

2.  因素重置我的mac。

3.  创建一个新项目并将文件夹移动到新项目。也不适合我。

**解决方案**[就我而言]，我相信你们大多数人都会遇到这种情况。

我注意到名为**“IBAgent-iOS”的**进程消耗了我大部分的 CPU 资源。每次我想打开情节提要时，它都会消耗高达 97% 的 CPU 资源！

所以我需要去活动监视器>搜索这个进程名称**“IBAgent-iOS”**（主要出现在顶部）>点击它并强制退出。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-12-30T06:03:52.003

# 2022 | 算法做什么：

1.  打开活动监视器并在那里杀死`com.apple.dt.SKAgent`

* * *

如果没有帮助：

2.  关闭 Xcode(cmd+Q)。在终端运行命令：

`rm -rf ~/Library/Developer/Xcode/DerivedData`

* * *

如果没有帮助：

3.  重启电脑

* * *

如果没有帮助：

4.  右键单击您的 PROJECT_NAME.xcworkspace，选择“显示内容”，然后删除“xcuserdata”文件夹

* * *

如果没有帮助：

5.  运行您的项目构建并附加警告。为此，您需要编写：

    `-Xfrontend -warn-long-expression-type-checking=100`

    到以下地方：

[![在此处输入图像描述](../Images/6efe23e63fe0e6e28bbd26b783c8764a.png)](https://i.stack.imgur.com/Gjg9j.png)

并在所有地方优化代码。

* * *

如果没有帮助：

Z. 卸载 XCode 并从头开始安装

* * *

如果没有帮助：

Z+1。El Belga 的答案[https://stackoverflow.com/a/50541767/4423545](https://stackoverflow.com/a/50541767/4423545)

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2022-01-06T02:31:14.260

我知道这是一个很老的问题，但问题仍然存在。这是我发现的经历。

在 NavigationLink 中，我给了一个不带参数的 View 参数。它挂起构建和索引，但没有引发编译器错误。那**不**酷。

这是我复制它的方式。在包含导航视图的顶级视图中，我在堆栈内的列表中有以下块。所以我的顶级视图的层次结构类似于（伪代码）：

```
Body {
    VStack {
        [CustomViewForPageHeader]
        List {
            (the code block pasted below)
            (some other things)
        }
    }
} 
```

有问题的部分是这样的：

```
 if 0 < viewModel.taskUpdates.count {
                Section( "Chore updates"){
                    ForEach(viewModel.taskUpdates, id:\.id){ update in
                        if "complete" == update.statusType {
                            NavigationLink {
                                CompletedTaskApprovalView( update: update )
                            } label: {
                                Text(update.formattedMessage)
                                    .padding(.vertical)
                            }
                        }
                        if "reject" == update.statusType {
                            Text(update.formattedMessage)
                                .padding(.vertical)
                        }
                    }
                }
            } 
```

记得我在重组一些数据时删除了参数，我很沮丧编译器没有对此表示不满。我注释掉了整行，所以它看起来像：

```
 if 0 < viewModel.taskUpdates.count {
                Section( "Chore updates"){
                    ForEach(viewModel.taskUpdates, id:\.id){ update in
                        if "complete" == update.statusType {
                            NavigationLink {
                                //CompletedTaskApprovalView( update: update )
                            } label: {
                                Text(update.formattedMessage)
                                    .padding(.vertical)
                            }
                        }
                        if "reject" == update.statusType {
                            Text(update.formattedMessage)
                                .padding(.vertical)
                        }
                    }
                }
            } 
```

你瞧，哇，它工作得很好。

取消注释*并*删除参数...

```
 if 0 < viewModel.taskUpdates.count {
                Section( "Chore updates"){
                    ForEach(viewModel.taskUpdates, id:\.id){ update in
                        if "complete" == update.statusType {
                            NavigationLink {
                                CompletedTaskApprovalView()
                            } label: {
                                Text(update.formattedMessage)
                                    .padding(.vertical)
                            }
                        }
                        if "reject" == update.statusType {
                            Text(update.formattedMessage)
                                .padding(.vertical)
                        }
                    }
                }
            } 
```

whammo，redux 再次运行良好。

当我稍微修改数据模型时，我从 CompletedTaskApprovalView 中删除了所有内容，所以它看起来像这样（实际上只是一个占位符）：

导入 SwiftUI

```
struct CompletedTaskApprovalView: View {

    var body: some View {
        Text("Approve chores")
            .font(.title)
    }
} 
```

编译器不应该让我尝试给它一个参数。所以我觉得这很奇怪，我想知道我的视图的代码文件是否有某种时髦的不可见损坏。在顶层视图的文件中，我在底部添加了一个新视图（SomeTestView）......

```
struct SomeTestView: View {
    var body: some View {
        Text("this is just a thing")
    }
} 
```

并将其添加到我的循环中..

```
 if 0 < viewModel.taskUpdates.count {
                Section( "Chore updates"){
                    ForEach(viewModel.taskUpdates, id:\.id){ update in
                        if "complete" == update.statusType {
                            NavigationLink {
                                //CompletedTaskApprovalView()
                                SomeTestView()
                            } label: {
                                Text(update.formattedMessage)
                                    .padding(.vertical)
                            }
                        }
                        if "reject" == update.statusType {
                            Text(update.formattedMessage)
                                .padding(.vertical)
                        }
                    }
                }
            } 
```

工作正常。

在上面的实例化中添加了一个参数（但没有**在**视图的 Struct 定义中添加一个参数）......它的行为与原始问题相同 - 似乎无休止地挂起构建和索引，并且从不吐出参数错误我会期待的。

```
 if 0 < viewModel.taskUpdates.count {
                Section( "Chore updates"){
                    ForEach(viewModel.taskUpdates, id:\.id){ update in
                        if "complete" == update.statusType {
                            NavigationLink {
                                //CompletedTaskApprovalView()
                                SomeTestView( fish: "sandwich" )
                            } label: {
                                Text(update.formattedMessage)
                                    .padding(.vertical)
                            }
                        }
                        if "reject" == update.statusType {
                            Text(update.formattedMessage)
                                .padding(.vertical)
                        }
                    }
                }
            } 
```

所以这很奇怪，而且 100% 令人失望。我不想进一步诊断它，但是......如果有人仍然遇到这个问题，请尝试一下；仔细检查您的参数和声明，也许您会发现类似的问题。

奇怪的。令人沮丧。令人困惑。恼人的。

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2016-05-20T01:14:11.823

Command-Option-Shift-K 清理构建文件夹。

* * *

## 回答 #36

> 赞同：-2
> 
> 时间：2016-06-02T21:48:47.063

我也面临这个问题。我注意到我已经打开了同一个项目两次。

所以 QuitXCode > 打开你的项目并确保只打开一个实例 > Clean > CleanBuild Folder in some cases > build.

它应该工作**

# lucene.net - Lucene.net：如何使用多个术语控制操作顺序

> ID：13831561
> 
> 赞同：0
> 
> 时间：2012-12-12T01:51:00.037
> 
> 标签：lucene.net

使用多个术语时是否可以控制操作顺序？

例如，

```
Lucene.Net.Search.TermQuery tq1 = new Lucene.Net.Search.TermQuery(new Lucene.Net.Index.Term("location", "seattle"));
Lucene.Net.Search.TermQuery tq2 = new Lucene.Net.Search.TermQuery(new Lucene.Net.Index.Term("location", "portland"));
Lucene.Net.Search.TermQuery tq3 = new Lucene.Net.Search.TermQuery(new Lucene.Net.Index.Term("location", "spokane"));
Lucene.Net.Search.TermQuery tq4 = new Lucene.Net.Search.TermQuery(new Lucene.Net.Index.Term("type", "city")); 
```

当我应用搜索时，假设我想应用上述术语来过滤我的搜索，让我们搜索食物......所以我的查询格式如下所示

食物 AND ((tq1 OR tq2 OR tq3) AND tq4)

目前我已经能够以以下格式构建它

```
{+xml:food +(location:seattle location:portland location:spokane +location:city)} 
```

但是，我正在尝试以以下格式获取它

```
{+xml:food +(+(location:seattle location:portland location:spokane) +location:city)} 
```

基本上，我所做的是这样的......

```
Lucene.Net.Search.BooleanQuery bq = new Lucene.Net.Search.BooleanQuery();
Lucene.Net.Search.BooleanQuery innerBQ = new Lucene.Net.Search.BooleanQuery();
bq.Add("xml:food", Lucene.Net.Search.BooleanClause.Occur.MUST);
foreach (Lucene.Net.Index.Term term in listOfTerms)
{
    Lucene.Net.Search.TermQuery tq = new Lucene.Net.Search.TermQuery(term));
    innerBQ.Add(tq, Lucene.Net.Search.BooleanClause.Occur.SHOULD);
}
innerBQ.Add("location:city", Lucene.Net.Search.BooleanClause.Occur.MUST);
bq.Add(innerBQ, Lucene.Net.Search.BooleanClause.Occur.MUST); 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:13:12.293

您需要将您的`location:city`子句添加到`bq`而不是`innerBQ`

# ruby-on-rails - 用于自定义身份验证的 Rails gem

> ID：13831566
> 
> 赞同：0
> 
> 时间：2012-12-12T01:51:43.483
> 
> 标签：ruby-on-rails, authentication

我是 Rails 新手，想制作一个培训计划应用程序。我需要一个用户管理系统，并且确信它是作为宝石存在的，但我似乎无法找到一个具有所有这些所需功能的系统。

*   多个访问级别（用户、培训师、经理、管理员）
*   没有用户注册（培训师、经理、管理员将创建帐户并将信息通过电子邮件发送给用户）
*   用户组（User、Trainer、Manager）属于组，只能管理这些组中的用户。管理员可以管理任何组中的任何人。
*   用户可以更改其帐户的详细信息并更改其密码。
*   管理员可以确定用户将如何登录（自定义字段、用户名、电子邮件）
*   可以使用mysql数据库

当前是否有任何具有所有这些功能的宝石，或者是否需要创建自定义宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:07:29.423

您在这里结合了两个概念，**用户身份验证**和**基于角色的访问控制**。考虑使用[devise](https://github.com/plataformatec/devise)进行身份验证，因为它非常可配置（例如，您可以禁用 sign_up 路由并只允许 sign_in），以及类似[cancan](https://github.com/ryanb/cancan)的 rbac。

另外，你真的需要让管理员决定用户如何登录吗？考虑只选择一种方法开始，如果它是一个真正的优先级，则稍后添加此功能。

# excel - 旋转图表的 X 轴和 Y 轴

> ID：13831581
> 
> 赞同：0
> 
> 时间：2012-12-12T01:53:39.327
> 
> 标签：excel, vba

我正在尝试旋转我的 3D 柱形图。到目前为止，我有以下内容：

```
ActiveChart.Name = "44 Chart 7"

With ActiveChart
    .SetSourceData Source:=pzx.Range("L126:M135")
    .HasTitle = False
    .HasTitle = True
    .Shapes("44 Chart 7").ThreeD.RotationX = 0
    .ChartTitle.Text = "Classification Actions"
    .ChartArea.Font.Color = RGB(0, 0, 140)
    .ChartTitle.Font.Name = "Arial"
    .ChartTitle.Font.Size = 10
    .Legend.Font.Size = 8
    .Legend.Font.Name = "Arial"
    .ChartStyle = 11
    .ChartArea.Format.Line.Visible = msoFalse
   End With 
```

我有两个问题——

1）如果您自己不主动命名图表，是什么决定了图表的命名方式 2）您知道为什么此代码不起作用

这是我收到的错误 -

运行时错误 7 内存不足

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T06:46:14.600

命名对象具有您必须遵循的**命名约定。**对于图表：当图表在工作表上时，该`Name`属性适用于作为图表**容器**`ChartObject`的对象。

 **```
With Chart
   .Parent.Name = "myChartName"
End With 
```

或者

```
`Sheets(1).ChartObjects(3).Name = "Name of my Chart"` 
```

或者

```
`Sheets(1).Charts("My old Chart Name").Name = "Name of my Chart"` 
```

如果您知道图表所在的位置，请指向带有工作表参考的图表，而不是使用`ActiveChart`. 如果您不主动命名图表，则必须使用图表的默认原始名称来引用它。或者它的索引。

请在你的最后尝试这个代码片段。

```
Option Explicit

Sub createMyCharts
Dim mySheet As Worksheet
Dim mychtObject As ChartObject
Dim myChart As Chart

'-- put anything else you need to delcare and set

Set mySheet = Worksheets(1) '-- set according to your sheet

'-- delete any old leftovers to clean up
For Each mychtObject In mySheet.ChartObjects
  mychtObject.Delete
Next

'-- create new chart
Set myChart = mySheet.ChartObjects.Add(Left:=30, Width:=500, Top:=30, Height:=200).Chart

With myChart
  .ChartType = Excel.XlChartType.xl3DColumn '-- the full chart Type
  .SetSourceData(mySheet.Range("L126", "M135"), Excel.XlRowCol.xlColumns)
  .Rotation = 30
End With

'-- do anything else you need to do 
```

结束子

参考[MSDN Chart Rotation](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.chart.rotation%28v=vs.80%29.aspx)

试用后，如果您有任何问题，您可以发表评论并很乐意为您提供帮助。:)**

# php - ZF2 中的 Zend\Db 如何控制事务？

> ID：13831582
> 
> 赞同：19
> 
> 时间：2012-12-12T01:53:58.593
> 
> 标签：php, mysql, transactions, zend-framework2, zend-db

ZF1 Zend_Db 参考手册有一[整节](http://framework.zend.com/manual/1.12/en/zend.db.adapter.html#zend.db.adapter.transactions)关于执行事务。

ZF2 [Zend\Db 参考手册](http://framework.zend.com/manual/2.0/en/modules/zend.db.adapter.html)缺少关于事务的任何文档。

如何在 ZF2 中执行交易？示例代码会有所帮助。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-13T15:10:45.410

你明白了。开始、提交和回滚事务的正确方法如下：

```
$this->getAdapter()->getDriver()->getConnection()->beginTransaction();

$this->getAdapter()->getDriver()->getConnection()->commit();

$this->getAdapter()->getDriver()->getConnection()->rollback(); 
```

只是为了把它放在那里，您还可以获得由以下人员创建的 Last ID：

```
$this->getAdapter()->getDriver()->getConnection()->getLastGeneratedValue() 
```

如果您使用 pgSQL，则需要添加序列以返回创建的 Last ID：

```
$this->getAdapter()->getDriver()->getConnection()->getLastGeneratedValue('mail_mailid_seq') 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-12T02:44:29.293

缺少的文档很奇怪。

为了弄清楚发生了什么，我不得不深入研究 Zend\Db\Adapter 的[API 文档](http://framework.zend.com/apidoc/2.0/namespaces/Zend.Db.Adapter.html)。

它看起来像`beginTransaction`，`rollback`并且`commit`在[Zend\Db\Adapter\Driver\ConnectionInterface](http://framework.zend.com/apidoc/2.0/classes/Zend.Db.Adapter.Driver.ConnectionInterface.html)中定义。这意味着它们是可在每个适配器连接上调用的方法。不幸的是，连接本身被埋没了。

我不清楚——目前也无法提供一个例子——是弄清楚你实际上调用了哪个对象上的这些方法。在最坏的情况下，您可能想要调用`$adapter->getDriver()->getConnection()->beginTransaction()`.

*哇。*

我希望其他有更多知识的人，以及方便的 ZF2 副本，会看到这一点并提供更好的选择。

不要忘记您可以自己发出`BEGIN TRANSACTION`// SQL语句`ROLLBACK`。这*可能*没问题，因为它看起来不像 Zend\Db 跟踪事务状态。`COMMIT``SET autocommit=...`

 ** * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-09T10:25:32.460

做交易有两件事。
1 - MyISAM 不是事务引擎，因此将表引擎更改为 InnoDB。
2 - 事务查询（`"START TRANSACTION;"`或`"ROLLBACK;"`）连接必须与其他查询（插入或更新）相同。
为了在 ZF2 中执行此操作，您应该获取当前的数据库适配器并在所有查询中使用它。

此代码**将无法正常工作**：

```
 $this->getAdapter()->getDriver()->getConnection()->beginTransaction();  
    //do some jobs - e.g : multiple tables update or insert.  
    $this->getAdapter()->getDriver()->getConnection()->rollback(); 
```

由于`$this->getAdapter()->getDriver()->getConnection()`创建新的数据库连接。

请改用以下代码：

```
 $connection = $this->getAdapter()->getDriver()->getConnection();
    $connection->beginTransaction();
    //do some jobs - e.g : multiple tables update or insert. 
    $connection->rollback(); 
```

要检查您的连接是否正确，只需在 mysql 中启用查询日志。
运行查询后，您将在 mysql 日志中的每个查询之前看到连接号。所有事务查询中的连接号必须相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-12T07:14:08.580

我使用 `beginTransaction`,`rollback`和`commit`在控制器中。

我在不同模型上执行了许多事务，其中我使用预定义的函数而没有任何控制事务（单个数据库事务不需要）。

使用 会在方法`$this->getAdapter()->getDriver()->getConnection()->beginTransaction();`
上产生错误。`undefined getAdapter()`

所以我执行以下方式，

```
 //begain tarnsaction
                $db = Zend_Db_Table_Abstract::getDefaultAdapter();

                $db->beginTransaction();

//rollback

                $db->rollback();

//commit db changes

                $db->commit(); 
```

希望对解决问题有用。*

# vb.net - 如何在form2（VB.NET）中引用来自form1的标签页集合

> ID：13831590
> 
> 赞同：0
> 
> 时间：2012-12-12T01:55:36.423
> 
> 标签：vb.net, collections

我试过跟随，

在表格 1 上，

```
Dim removedtabs as New Collection() 
```

在form2上，我尝试如下引用它，

```
form1.ControlCollection(removedtabs) 
```

但它给出了一个错误。

我是 vb.net 的新手，从未使用过控件集合。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:02:55.397

请记住，Forms 只是普通的类，类的成员默认为**Private**。您至少需要使用关键字`Public`而不是`Dim`. 但让我们再深入一点。我看到需要指出的其他几点：

*   您使用了 Collection 对象。没有充分的理由**使用**这个对象。它的存在主要是为了向后兼容旧代码。您确实应该使用其中一种通用集合类型。
*   看起来您正在使用默认的 form1 实例。与 Collection 类一样，这些默认实例的存在主要是为了向后兼容。您真的应该创建自己的表单对象实例（没有人说过您只能拥有一个表单副本）并将对这些实例的引用发送给其他类。
*   与其直接公开对象，不如保持声明为私有。添加一个只有 get 部分的属性来返回集合。

# javascript - 浏览器如何包含 javascript 文件？

> ID：13831596
> 
> 赞同：1
> 
> 时间：2012-12-12T01:56:17.060
> 
> 标签：javascript, firefox

当您添加一个`script`带有指向 javascript 文件的 src 字段的标签时，浏览器会获取它并执行它。

我想知道这个过程是如何工作的。文件是否被获取然后以某种方式`eval()`编辑？这是一个发生在我们可以访问的范围之外的神秘过程吗？或者我们可以监控/干预这个吗？

解释我想要实现的目标：我想通过链接到他们自己的 javascript 文件来授予第三方访问权限，以在我的网站上自定义他们的页面。我希望能够集中记录阻止这些外部脚本加载的任何错误（即他们的服务器已关闭，解析错误等）。是否可以？

谢谢！

*   显然还有其他方法可以解决这个问题，例如在我的服务器上托管他们的脚本并为他们提供更新它们的方法，但我很想知道我目前的方法是否可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:01:51.870

您可以使用一些 grep 魔法查看 Firefox 和 Chromium 源中的特定实现，对于您的特定场景，我会通过动态插入脚本标签并从那里监听全局错误/事件（例如 window.onerror）来异步子加载这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T01:58:00.743

它在加载页面时加载 java 脚本文件并将该脚本存储在其缓存中。如果您再次加载页面，那么它将从缓存中获取该 js。

# javascript - 禁用和启用 html 输入按钮

> ID：13831601
> 
> 赞同：322
> 
> 时间：2012-12-12T01:57:14.753
> 
> 标签：javascript, jquery

所以我有一个这样的按钮：

```
<input id="Button" type="button" value="+" style="background-color:grey" onclick="Me();"/> 
```

如何在需要时禁用和启用它？我已经尝试过`disabled="disable"`，但重新启用它是一个问题。我尝试将其设置回 false 但这并没有启用它。

* * *

## 回答 #1

> 赞同：596
> 
> 时间：2012-12-12T02:16:20.727

## 使用 Javascript

*   禁用 html 按钮

    ```
    document.getElementById("Button").disabled = true; 
    ```

*   启用 html 按钮

    ```
    document.getElementById("Button").disabled = false; 
    ```

*   [**在这里演示**](http://jsfiddle.net/SPddm/300/)

* * *

## 使用 jQuery

**1.6 之前的所有 jQuery 版本**

*   禁用 html 按钮

    ```
    $('#Button').attr('disabled','disabled'); 
    ```

*   启用 html 按钮

    ```
    $('#Button').removeAttr('disabled'); 
    ```

*   [**在这里演示**](http://jsfiddle.net/SPddm/)

**jQuery 1.6 之后的所有版本**

*   禁用 html 按钮

    ```
    $('#Button').prop('disabled', true); 
    ```

*   启用 html 按钮

    ```
    $('#Button').prop('disabled', false); 
    ```

*   [**在这里演示**](http://jsfiddle.net/SPddm/1/)

**PS 根据[jquery 1.6.1 的变化](http://blog.jquery.com/2011/05/12/jquery-1-6-1-released/)更新了代码。作为建议，请始终使用最新的 jquery 文件和`prop()`方法。**

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-12T01:58:26.117

由于您首先禁用它，因此启用它的方法是将其`disabled`属性设置为`false`.

要在 Javascript 中更改其`disabled`属性，请使用以下命令：

```
var btn = document.getElementById("Button");
btn.disabled = false; 
```

显然要再次禁用它，您会改用它`true`。

由于您还使用 jQuery 标记了问题，因此您可以使用该`.prop`方法。就像是：

```
var btn = $("#Button");
btn.prop("disabled", true);   // Or `false` 
```

这是在较新版本的 jQuery 中。较旧的方法是添加或删除一个属性，如下所示：

```
var btn = $("#Button");
btn.attr("disabled", "disabled");
// or
btn.removeAttr("disabled"); 
```

该`disabled`属性的存在会禁用该元素，因此您不能将其值设置为“false”。即使以下内容也应该禁用该元素

```
<input type="button" value="Submit" disabled="" /> 
```

您需要完全删除该属性**或**设置其属性。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-04-17T21:42:55.873

只需直接使用 JavaScript，您就可以相当轻松地做到这一点，不需要任何库。

**启用按钮**

```
document.getElementById("Button").disabled=false; 
```

**禁用按钮**

```
 document.getElementById("Button").disabled=true; 
```

不需要外部库。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T01:59:12.543

disable 属性只有一个参数。如果要重新启用它，则必须删除整个内容，而不仅仅是更改值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-22T08:32:24.013

```
$(".btncancel").button({ disabled: true }); 
```

这里的 'btncancel' 是按钮的类名。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-08-25T05:58:05.480

使用 jQuery，您可以在一行中完成

```
//Enable
$('#Button').prop('disabled', false)

//Disable
$('#Button').prop('disabled', true) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-19T10:35:25.943

没有 jQuery 禁用输入会更简单

```
Button.disabled=1; 
```

```
function dis() {
  Button.disabled= !Button.disabled;
}
```

```
<input id="Button" type="button" value="+" style="background-color:grey" onclick="Me();"/>

<button onclick="dis()">Toggle disable</button>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-14T05:42:30.120

```
 <!--Button Disable Script-->
    <script type="text/javascript">
        function DisableButton() {
            document.getElementById("<%=btnSave.ClientID %>").disabled = true;
        }
        window.onbeforeunload = DisableButton;
    </script>
    <!--Button Disable Script--> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-26T10:23:22.650

虽然与问题没有直接关系，但如果您跳到这个问题上希望禁用除典型输入元素以外的其他内容`button, input, textarea`，则语法将不起作用。

要禁用 div 或 span，请使用[setAttribute](https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute)

```
document.querySelector('#somedivorspan').setAttribute('disabled', true); 
```

PS：知道了，只有在你打算禁用时才调用它。chrome 版本 83 中的一个错误导致即使第二个参数为 false 也始终禁用此功能。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-18T14:49:38.460

使用 JavaScript 禁用/启用 html 输入按钮：

（和 React 与 refs。如果不使用 React，请将“elementRef.current”替换为元素选择）

```
 elementRef.current.setAttribute('disabled', 'disabled'); 
```

使能够：

```
 elementRef.current.removeAttribute('disabled'); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-08-02T10:23:24.157

这肯定会奏效。

**禁用按钮**

```
$('#btn_id').button('disable'); 
```

**启用按钮**

```
$('#btn_id').button('enable'); 
```

* * *

## 回答 #12

> 赞同：-7
> 
> 时间：2018-03-31T14:39:02.263

坚持php...

一旦满足上述条件，为什么不只允许按钮出现。

```
<?
if (whatever == something) {
    $display = '<input id="Button" type="button" value="+" style="background-color:grey" onclick="Me();"/>';
    return $display;
}
?> 
```

# dart - 使用 F5 发送垃圾邮件时 Web 服务器崩溃

> ID：13831604
> 
> 赞同：4
> 
> 时间：2012-12-12T01:57:39.197
> 
> 标签：dart

我做了一个简单的网络服务器，但每次我在短时间内多次刷新页面时它都会崩溃。我只是在浏览器中输入 127.0.0.1:8080，然后按 F5 发送垃圾邮件。这是重现此问题的代码：

```
void main()
{
  HttpServer server = new HttpServer();
  server.addRequestHandler((req) => true, handleGET);
  server.listen('127.0.0.1', 8080);
}

void handleGET(HttpRequest req, HttpResponse res)
{
  var requestedFile = ".${req.path}";

  if(req.path == "/")
  {
    requestedFile = requestedFile.concat("index.html");
  }

  File file = new File(requestedFile);
  file.exists().then((bool found) {
    if(found)
    {
      file.openInputStream().pipe(res.outputStream);
    }
    else
    {
      res.statusCode = HttpStatus.NOT_FOUND;
      res.outputStream.close();
    }
  });
} 
```

我得到的错误如下：

```
Unhandled exception:
StreamException: Stream closed
#0      _SocketOutputStream._write (dart:io:6017:30)
#1      _HttpResponse._writeHeader (dart:io:5981:18)
#2      _HttpRequestResponseBase._ensureHeadersSent (dart:io:2696:19)
#3      _HttpResponse._streamClose (dart:io:2921:23)
#4      _HttpOutputStream.close (dart:io:3078:36)
#5      _pipe.<anonymous closure> (dart:io:6271:28)
#6      _BaseDataInputStream._checkScheduleCallbacks.issueCloseCallback (dart:io:6231:59)
#7      _Timer._createTimerHandler._handleTimeout (dart:io:6804:28)
#8      _Timer._createTimerHandler._handleTimeout (dart:io:6812:7)
#9      _Timer._createTimerHandler.<anonymous closure> (dart:io:6820:23)
#10     _ReceivePortImpl._handleMessage (dart:isolate-patch:37:92) 
```

通常在此市长例外之前，我会收到一堆警告，例如 WSASend failed: 10053 但这些不会使服务器崩溃。如果此问题与某些特定实现有关，我在 Windows 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:52:52.240

因为您的重载速度非常快，所以您的代码最终会尝试写入已经关闭的套接字。因此，您可能应该捕获 StreamException 并忽略它。可以说 io 库应该可以帮助您更多。我刚刚提交了这个错误：

[http://code.google.com/p/dart/issues/detail?id=7334&thanks=7334&ts=1355280746](http://code.google.com/p/dart/issues/detail?id=7334&thanks=7334&ts=1355280746)

# sql - Django：使 auth_user.email 不区分大小写唯一且可为空

> ID：13831617
> 
> 赞同：2
> 
> 时间：2012-12-12T01:59:41.433
> 
> 标签：sql, django, sqlite, unit-testing, django-models

我想让`auth_user.email`不区分大小写的唯一、可为空且默认为空。以下几乎可以工作：

```
from django.db.models.signals import post_syncdb
import app.models

SQLITE_AUTH_REFORM = [
"PRAGMA writable_schema = 1;",
"""UPDATE SQLITE_MASTER SET SQL =
'CREATE TABLE auth_user (
    "id" integer NOT NULL PRIMARY KEY,
    "username" varchar(30) NOT NULL UNIQUE,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL,
    "email" varchar(75) DEFAULT NULL,
    "password" varchar(128) NOT NULL,
    "is_staff" bool NOT NULL,
    "is_active" bool NOT NULL,
    "is_superuser" bool NOT NULL,
    "last_login" datetime NOT NULL,
    "date_joined" datetime NOT NULL
)' WHERE NAME = 'auth_user';""",
"PRAGMA writable_schema = 0;",
]

def post_syncdb_callback(sender, **kwargs):
    from django.db import connections
    from django.conf import settings
    cursor = connections['default'].cursor()

    if 'sqlite' in settings.DATABASES['default']['ENGINE']:
        for stmt in SQLITE_AUTH_REFORM:
            cursor.execute(stmt)
        cursor.execute(
            "CREATE UNIQUE INDEX IF NOT EXISTS auth_user_email_unique "
            "ON auth_user (email COLLATE NOCASE);"
        )
    else:  # Oracle
        cursor.execute(
            "CREATE UNIQUE INDEX auth_user_email_unique "
            "ON auth_user (upper(email));"
        )
    cursor.cursor.close()

post_syncdb.connect(post_syncdb_callback, sender=app.models) 
```

我可以

```
User.objects.create(username=str(random.random()), email=None) 
```

让我心满意足。并且，

```
User.objects.create(username=str(random.random()), email='Foo')
User.objects.create(username=str(random.random()), email='foo')
...
IntegrityError: column email is not unique 
```

唯一的问题是它`DEFAULT NULL`似乎不起作用：`User.objects.create(username=str(random.random()))`使用空字符串电子邮件创建用户。

但是，在单元测试中，我相信正在发生的事情会阻止 post-syncdb 挂钩工作：

```
class DjangoUserTest(TestCase):

    def test_unique_nullable_email(self):
        import IPython; IPython.embed()
        u1 = User.objects.create(username="u1", email=None)
        u2 = User.objects.create(username="u2", email=None) 
```

我可以进入 ipython shell 并看到该表已明显修改：

```
In [1]: from django.db import connection

In [2]: c = connection.cursor()

In [3]: r = c.execute("select `sql` from sqlite_master WHERE tbl_name = 'auth_user';")

In [4]: r.fetchall()
Out[4]: 
[(u'CREATE TABLE auth_user (\n    "id" integer NOT NULL PRIMARY KEY,\n    "username" varchar(30) NOT NULL UNIQUE,\n    "first_name" varchar(30) NOT NULL,\n    "last_name" varchar(30) NOT NULL,\n    "email" varchar(75) DEFAULT NULL,\n    "password" varchar(128) NOT NULL,\n    "is_staff" bool NOT NULL,\n    "is_active" bool NOT NULL,\n    "is_superuser" bool NOT NULL,\n    "last_login" datetime NOT NULL,\n    "date_joined" datetime NOT NULL\n)',),
 (None,),
 (u'CREATE UNIQUE INDEX auth_user_email_unique ON auth_user (email COLLATE NOCASE)',)] 
```

但是，在尝试进行创建时，我得到`IntegrityError: auth_user.email may not be NULL`. `select sql from sqlite_master WHERE tbl_name = 'auth_user';`明明说的时候怎么会这样`"email" varchar(75) DEFAULT NULL`。我觉得我只需要提交 post_syncdb 的东西或某事。有任何想法吗？

更新：没有任何帮助`connection.commit()`，`cursor.close()`使用`TransactionTestCase`无济于事。

# php - PHP标头和Javascript window.location有什么区别？

> ID：13831618
> 
> 赞同：0
> 
> 时间：2012-12-12T01:59:49.030
> 
> 标签：php, javascript, header, window.location

所以是的，当我教某人如何重定向他们的页面时，我突然想到了这一点。我不太确定主要区别是什么......你有理由使用一个而不是另一个吗？我想如果你不是用 PHP 编码，你将不得不使用 Javascript`window.location`来重定向，但如果你用`window.location`PHP`header`开发，你会使用 PHP 吗？我觉得它们的功能非常相似，但也许我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T02:05:46.703

浏览器将立即处理标头重定向，而 Javascript 重定向在页面加载之前不会执行（或者至少足够运行 Javascript）。此外，它将是执行重定向的 Javascript 引擎，而不是浏览器本身。

通过标题执行此操作会更好。（反正有点……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:07:53.867

PHP 的服务器端标头只能发送其他标头`Location`。Javascripts 客户端`window.location`可用于读取、检查和更改（部分）当前 url，包括哈希。真的，他们可以做完全不同的事情，而且他们*唯一*的重叠之处就是都能够重定向。

# c# - ASP.NET Web 表单网站性能

> ID：13831619
> 
> 赞同：0
> 
> 时间：2012-12-12T01:59:52.413
> 
> 标签：c#, asp.net, performance, iis

我获得了一个由一些合同开发人员构建的 ASP.NET Web 表单网站。该网站一开始很糟糕，运行速度也很慢，但经过调整，在一个孤立的环境中运行正常。

该站点位于单个（强大的）Web 服务器上，并连接到 Oracle 数据库。该站点位于一个非常大的组织数据中心内，但未进行负载平衡。最近，该网站收到的流量大约是其通常看到的流量的 3-4 倍，并且该网站每天有大约 4k 的独立用户进行爬网。顺便说一句，IIS6。IT部门 已经检查了 CPU 和内存级别，它们看起来很好。我知道我可以对 IIS 进行一些其他调整以缓存静态文件，并且我正在添加 OutputCache 以控制有意义的位置。但是，还有什么可能是由负载引起的减速的原因？我不确定应用程序池是否需要分配更多内存，或者该站点是否只是一块垃圾。我知道后者是正确的，但令我惊讶的是，大量负载将是一个纯代码问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:41:03.773

查看索引是否应用于正在运行的查询/存储过程。另外，查看页面是否正在进行选择或更新/删除。当您应用索引时，它会减慢删除/更新速度并加快选择速度。

通常数据库中有可以在查询上运行的分析器，它们会指示哪些索引应该应用于哪个表。见数据库管理员，看看是否可以在您使用的存储过程上运行。

# java - NetworkInterface.getNetworkInterfaces() 在 JDK 1.7 OS X 上不起作用？

> ID：13831620
> 
> 赞同：2
> 
> 时间：2012-12-12T02:00:03.937
> 
> 标签：java

运行以下代码，我得到了`SocketException`：

```
import java.net.NetworkInterface;
import java.net.SocketException;
import java.util.Collections;
import java.util.Enumeration;

public class interfaces {
    public static void main(String[] args) throws SocketException {
        Enumeration<NetworkInterface> inters = NetworkInterface.getNetworkInterfaces();
        for (NetworkInterface iface : Collections.list(inters)) {
            System.out.println(iface.getDisplayName());
        }
    }
} 
```

我正在使用带有 JDK 1.7.0_09-b05 的 OS X 10.8.2。

它在使用 THIS JDK VERSION 的 Windows 上运行良好，在使用 JDK 1.6 的 OS X 上也运行良好。任何人都可以帮我测试一下并检查它是否是JDK的错误吗？

这是堆栈跟踪：

```
Exception in thread "main"
java.net.SocketException: Can't assign requested address
    at java.net.NetworkInterface.getAll(Native Method)
    at java.net.NetworkInterface.getNetworkInterfaces(NetworkInterface.java:334) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T16:53:46.577

我有一个类似的问题，这是由从`java.net.NetworkInterface.getDefault()`. 我在 Macbook 上并且正在使用无线 - p2p0（用于 AirDrop）作为默认值返回，但我`ether`在运行时只有一个 ipv6 条目`ipconfig`（否`inet`）。

两个解决方案，这两个都对我有用（我更喜欢第一个）

1.  使用`-Djava.net.preferIPv4Stack=true`. 这导致`java.net.NetworkInterface.getDefault()`返回我的 vboxnet0 网络接口——如果你没有运行仅主机的虚拟机，不确定你会得到什么。
2.  关闭无线并使用有线连接

# spring - 如何让 Spring 安全性生成与 Jasypt 命令行工具生成的密码相同的密码？

> ID：13831621
> 
> 赞同：1
> 
> 时间：2012-12-12T02:00:11.620
> 
> 标签：spring, spring-security, jasypt

我正在使用 Jasypt 1.9.0、Spring 3.1.1.RELEASE 和 Maven 3.0.3。使用 Jasypt 命令行工具，我生成了类似这样的密码……</p>

```
./digest.sh input=admin providerClassName=org.bouncycastle.jce.provider.BouncyCastleProvider algorithm=SHA-256  saltGeneratorClassName=org.jasypt.salt.ZeroSaltGenerator 
```

但是，当我配置 Spring 安全性以尝试匹配某人在登录屏幕上输入的密码时……</p>

```
<beans:bean id="bcProvider" class="org.bouncycastle.jce.provider.BouncyCastleProvider" />

<beans:bean id="jasyptStringDigester" class="org.jasypt.digest.StandardStringDigester">
    <beans:property name="algorithm">
        <beans:value>SHA-256</beans:value>
    </beans:property>
    <beans:property name="provider">
        <beans:ref bean="bcProvider" />
    </beans:property>
    <beans:property name="saltGenerator">
        <beans:bean id="saltGenerator" class="org.jasypt.salt.ZeroSaltGenerator"/>
    </beans:property>
</beans:bean>

<!-- This Spring Security-friendly PasswordEncoder implementation will -->
<!-- wrap the StringDigester instance so that it can be used from -->
<!-- the security framework. -->
<beans:bean id="passwordEncoder" class="org.jasypt.spring.security3.PasswordEncoder">
    <property name="stringDigester">
        <ref bean="jasyptStringDigester" />
    </property>
</beans:bean>

<authentication-manager alias="authenticationManager" id="authenticationManager">
    <authentication-provider user-service-ref="sbdUserDetailsService">
        <password-encoder ref="passwordEncoder" />
    </authentication-provider>
</authentication-manager> 
```

Spring 生成的密码与存储的密码不同，因此我无法验证我的用户。我缺少一些配置吗？为什么在身份验证期间，SPring 会生成与 Jasypt 不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:43:25.920

如果您`digest.sh`多次运行，您将获得相同输入值的不同哈希值。我假设 Jasypt 使用时间戳或随机字符串作为[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

为了能够生成相同的哈希，您必须知道使用的盐或控制它的生成方式。有一个 cli 参数称为`saltGeneratorClassName`. 通过提供一个实现[SaltGenerator](http://www.jasypt.org/api/jasypt/1.8/org/jasypt/salt/SaltGenerator.html)接口的类，您可以控制盐的生成。

**更新：**

忘记我所说的盐的位置。你只需要改变`jasyptStringDigester`一点：

```
<beans:bean id="jasyptStringDigester" class="org.jasypt.digest.StandardStringDigester">
    <beans:property name="algorithm">
        <beans:value>SHA-256</beans:value>
    </beans:property>
    <beans:property name="provider">
        <beans:ref bean="bcProvider" />
    </beans:property>
    <beans:property name="saltGenerator">
        <beans:ref bean="saltGenerator" />
    </beans:property>
</beans:bean>

<beans:bean class="impl.of.your.SaltGenerator" id="saltGenerator" /> 
```

然后您需要提供`impl.of.your.SaltGenerator`给`digest.sh`：

```
./digest.sh input=admin \
    providerClassName=org.bouncycastle.jce.provider.BouncyCastleProvider \
    algorithm=SHA-256 \
    saltGeneratorClassName=impl.of.your.SaltGenerator 
```

# javascript - 依赖于 Javascript 的输入验证

> ID：13831624
> 
> 赞同：0
> 
> 时间：2012-12-12T02:00:23.073
> 
> 标签：javascript, validation

我想验证名为 A 的无线电组的输入，有 2 个无线电：1 和 2。一旦选中无线电 2，我希望启用文本框 B（默认为禁用）。我的 JavaScript 很弱。有人帮我写下面的代码吗？到目前为止，我可以去：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#form").validate({
        rules: {
            A: "required",
        }
    });  
});
</script>

<form id="form" name="form" method="post" action="">
<table><tr>
<td width><input type="radio" name="A" id="1" value="1" />1</td>
<td width><input type="radio" name="A" id="2" value="2" />2</td>
</tr></table>
</form>

<input name="B" type="text" id="B" disabled="disabled"/> 
```

我想要消息“此字段为必填项”。显示在单选组下方的一行中：

```
<tr><td colspan="2">This field is required.</tr></td> 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:09:13.407

符合以下条件的东西：

```
​$(':radio').change(function() {
    $('#B').prop('disabled', !(this.value == '2' && this.checked));
})​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​; 
```

演示：http: [//jsfiddle.net/5PMLr/](http://jsfiddle.net/5PMLr/)

旁注：您的 ID 应该有多个字符，并且不要以数字开头。

# php - Facebook OAUTH 令牌始终为 NULL

> ID：13831627
> 
> 赞同：2
> 
> 时间：2012-12-12T02:00:29.487
> 
> 标签：php, facebook, oauth, facebook-oauth

每当我向 Facebook 发送令牌请求时，我都会收到`NULL`响应。不是异常或成功响应。总是`NULL`

```
$this->facebook = new Facebook(array(
    'appId'  => 'APP ID', 
    'secret' => 'APP SECRET',
    'cookie' => true
));

if(isset($_GET['code'])) {
    $token = $this->facebook->api('/oauth/access_token', 'GET', array(
        'client_id' => 'APP ID',
        'client_secret' => 'APP SECRET',
        'redirect_uri' => 'http://mywebsite.com?route=' . urlencode('account/connect/facebook/'),
        'code' => $_GET['code']
    ));

    print_r($token); // NULL
    exit;
} else {
    $this->redirect($this->facebook->getLoginUrl(array(
                'redirect_uri' => 'http://mywebsite.com?route=' . urlencode('account/connect/facebook/')
            )
        )
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:07:17.447

```
$token = $this->facebook->api('/oauth/access_token', 
```

您不能使用 Facebook::api 进行此调用，因为该方法需要 JSON 响应，而此端点不会*响应*。

但是你为什么要这样做呢？PHP SDK 已经具有检测传递`code`参数并将其交换为包含的访问令牌的功能，并且会自动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:09:39.490

我认为你可以这样做：

```
$token = $this->facebook->getAccessToken(); 
```

[http://developers.facebook.com/docs/reference/php/facebook-getAccessToken/](http://developers.facebook.com/docs/reference/php/facebook-getAccessToken/)

# html - 在 a:hover 上更改 a:link 背景图像

> ID：13831635
> 
> 赞同：1
> 
> 时间：2012-12-12T02:01:42.917
> 
> 标签：html, css

我正在尝试获取背景图像以在链接悬停时更改链接。本质上，悬停图像是一种不同的颜色，所以我只是想改变图像的颜色（我知道这是不可能的，所以我只是交换图像）。

显示标志的代码：

```
<a href="/" id="logo"></a> 
```

和CSS：

```
#logo {
position: absolute;
display: block;
margin-top: 10px;
margin-left: 10px;
background: url('../img/logo.png') no-repeat;
width: 60px;
height: 60px;
}

#logo a:hover {
background: url('../img/logo-blue.png') no-repeat;
} 
```

有没有更好的方法来显示更容易促进这种悬停的徽标？

编辑（添加标题 CSS）：

```
#header {
height: 75px;
text-align: right;
position: relative;
}

#header h2 {
font-size: 2.5em;
font-weight: 400;
text-transform: uppercase;
letter-spacing: 0.1em;
padding-top: 15px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:19:17.150

将其从 更改`#logo a:hover`为`#logo:hover`，因为您的元素`<a>`就是*元素*`#logo`。

此外，还有一些其他提示：

*   缩进你的 CSS 以便更容易地将属性与选择器和其他规则集区分开来。
*   将您的 CSS 引用的图像和其他资产与样式表放在同一目录中，这样您就不需要相对 URI 并将所有内容放在一起。
*   你为什么在`position: absolute;`没有`top/right/bottom/left`属性的情况下使用？你想达到什么效果？

# javascript - 在移动浏览器中拖放

> ID：13831636
> 
> 赞同：0
> 
> 时间：2012-12-12T02:01:48.617
> 
> 标签：javascript, drag-and-drop, touch

所以我最近发现原生拖放实际上是由 IE5 引入的（我之前认为它是最近添加的，并且只在 IE9 中......简直错得离谱！）

无论如何，我已经在一组元素上实现了拖放，但我很快发现移动设备似乎不支持拖放事件。

我对 Touch 事件知之甚少，而且我能找到的关于它们的信息非常混乱。

是否有可能我只是在拖放方面做错了，或者有人可以指出我对触摸事件的可理解介绍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:42:06.403

我了解您不喜欢使用 jQuery。下面的资源可能会帮助您在不使用 jQuery 的情况下处理 Touch 事件。

**1\. W3C**

[http://www.w3.org/TR/touch-events/#dfn-touch-point](http://www.w3.org/TR/touch-events/#dfn-touch-point)

W3C 于 2011 年 12 月 15 日发布了候选推荐“触摸事件版本 1”。在此推荐中提到了 4 种类型的触摸事件。

```
touchstart event
touchend event
touchmove event
touchcancel event 
```

**2\. Mozilla 开发者网络**

[https://developer.mozilla.org/en-US/docs/DOM/Touch_events](https://developer.mozilla.org/en-US/docs/DOM/Touch_events)

在 Mozilla 开发者网络上，您可以看到“触摸事件”的定义和处理触摸事件的示例代码。

```
function startup() {
  var el = document.getElementsByTagName("canvas")[0];
  el.addEventListener("touchstart", handleStart, false);
  el.addEventListener("touchend", handleEnd, false);
  el.addEventListener("touchcancel", handleCancel, false);
  el.addEventListener("touchleave", handleLeave, false);
  el.addEventListener("touchmove", handleMove, false);
} 
```

**3\. iOS 开发者库**

[http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW5](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW5)

Apple 的文档可能会帮助您了解 iOS 上的“支持的事件”。

**4\. 关于 HTML5 ROCKS 教程**

[http://www.html5rocks.com/en/mobile/touch/](http://www.html5rocks.com/en/mobile/touch/)

文章“MULTI-TOUCH WEB DEVELOPMENT”展示了一个没有 jQuery 的有用示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:57:42.177

jQuery 可能是一个很好的解决方案[How to use jQuery Mobile only for its touch event support (no UI enhancements)?](https://stackoverflow.com/questions/8648596/how-to-use-jquery-mobile-for-its-touch-event-support-only-no-ui-enhancements) 最好使用 js UI 库而不是基本的事件系统来管理触摸事件。

# json - 返回 JSON 实体的正确 MIME 类型

> ID：13831642
> 
> 赞同：-3
> 
> 时间：2012-12-12T02:02:03.033
> 
> 标签：json, mime-types

> **可能重复：**
> [*正确* JSON 内容类型？](https://stackoverflow.com/questions/477816/the-right-json-content-type)

我正在使用 Java 进行服务器端编程，我想从服务器端返回 JSON 数据。我遇到了以下几种 JSON 的返回格式

```
application/json
text/javascript
text/x-json
application/x-javascript
text/x-javascript 
```

其中，根据标准，应该使用什么作为 MIME 类型的正确格式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T02:03:28.247

在这里，作为 JSON 的 MIME 类型的行业标准的[RFC 4627](http://www.ietf.org/rfc/rfc4627.txt)指出，JSON 响应 MIME 类型的当前格式应该是`application/json`.

# jquery - 在对话框中提交触发器失败的 Jquery（模式）

> ID：13831644
> 
> 赞同：0
> 
> 时间：2012-12-12T02:02:37.380
> 
> 标签：jquery, html, triggers

我完全确定如何完整地描述我的问题。不过，我会试一试。

我有几个使用 Jquery 分配给 HTML 元素的触发器。触发器 1，专门为此特定表单验证项目。第二个触发器是触发器 1 的验证确定后的触发器。

发生了什么，您将看到下面的代码是否会`if ($(".Reason").val() == 4) {`打开一个对话框窗口，该窗口将依次提供两个选项，是/否。是的将调用触发器 2（提交），否则关闭以进行更正...

如果不满足条件，则 trigger2（提交）正确处理并提交表单。但是，`return false`如果满足条件，就好像在阻止。

有些台词是不敬的，但我把它们留在了那里……如果要删除共识，我会的。

抱歉，代码量很大。

希望有人能帮忙！

```
$(".validateForm").click(function () {

        if ($(".Reason").val() == 4) {
            //bankingModal
            ExpectedAmount = $(".CloseAmount").val();  
            cashTotal = parseInt($(".cashtotal").val());                  
            chequeTotal = parseInt($(".chequeTotal").val());         

            formTotal = cashTotal + chequeTotal;
            formTotal = parseFloat(formTotal).toFixed(2);

            if (formTotal !== ExpectedAmount ) {
                $(".bankModal").dialog({
                    resizable: false,
                    height: 210,
                    width: 400,
                    modal: true,
                    position: 'center',
                    buttons: {
                        'Yes - Submit': function () {
                             $('.submit').click()
                            $(this).dialog("close");

                        },
                        'No - Cancel': function () {
                            $(this).dialog("close");
                        }
                    }
                })
            }
        } else {
            //submitBanking();
            $('.submit').click()
        }
        return false;
})

// The following is the second trigger.

$('.submit').click(function () {

// Unset error

        formErr = false;
        window.onbeforeunload = null;

        // Validation for Change Request
        if ($(".outgoing").length > 0) {
            if (validateChangeRequest()) {
                formErr = true;
            }
        }

        // If text box is empty change values to 0.00
        $('.cashSum', '.cashSumOut').each(function () {
            if (!$(this).val()) {
                $(this).val('0.00');
            }

        });

        // Check if numeric values are ok prior to submit.
        $(".cashAmount").each(function () {
            if (isNaN($(this).val())) {
                modal("", "Only numbers are permitted");
                formErr = true;
            }
            if (checkNegatives($(this))) {
                modal($(this), "Negative values are not permitted");
                formErr = true;
            }
        });
        if (formErr) {
            return false;
        }
        if ($("#cashCheque").length != 0) {          
            return false;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:10:15.207

为什么每次满足条件时都创建对话框。

只需创建一次，`DOM ready handler`然后在满足条件时打开对话框。

```
$(".validateForm").click(function() {

    if ($(".Reason").val() == 4) {
        //bankingModal
        ExpectedAmount = $(".CloseAmount").val();
        cashTotal = parseInt($(".cashtotal").val());
        chequeTotal = parseInt($(".chequeTotal").val());

        formTotal = cashTotal + chequeTotal;
        formTotal = parseFloat(formTotal).toFixed(2);

        if (formTotal !== ExpectedAmount) {
            $(".bankModal").dialog('open');
        }
    } else {
        //submitBanking();
        $('.submit').click()
    }
    return false;
});

$(".bankModal").dialog({
    resizable: false,
    height: 210,
    width: 400,
    modal: true,
    position: 'center',
    autoOpen : false,
    buttons: {
        'Yes - Submit': function() {
            $('.submit').click()
            $(this).dialog("close");

        },
        'No - Cancel': function() {
            $(this).dialog("close");
        }
    }
});​ 
```

**更新**

应该在没有错误的情况下提交表单

```
if (formErr) {
    return false;
}
if ($("#cashCheque").length != 0) {          
    return false;
}

$('form').submit(); // submit when no errors 
```

# jquery-ui - jQuery UI 日期选择器与工具提示冲突

> ID：13831647
> 
> 赞同：3
> 
> 时间：2012-12-12T02:03:00.717
> 
> 标签：jquery-ui, jquery-ui-datepicker, jquery-ui-tooltip

我正在使用同一个集合中的 jQuery UI datepicker 和 tooltip 函数。两者都非常适合我的应用程序。除了他们都试图工作的地方。当我将鼠标悬停在上个月或下个月的图标上时，会弹出一个工具提示，上面写着*“上一个”*或*“下一个”*。当我点击上个月的图标时，工具提示仍然可见，完全覆盖了月份和年份的标题。（在下个月的图标上，它仍然可见，但不会干扰。很多。）

这些图标的功能在没有工具提示的情况下是绝对清楚的，并且被它严重破坏了，但我想不出一种方法来禁用`title="Prev"`和`title="Next"`代码。

实际上，我在日期选择器中的任何地方都不需要工具提示，因为我严格使用它来设置日期而不是在日历中显示事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:57:37.220

解决方案是在“工具提示”选择器中更具体。

我从：

```
$(document).tooltip(); 
```

至：

```
$("span.ui-icon").tooltip(); 
```

它现在对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T23:30:48.707

初始化我的日期选择器后，我使用：

`$('.ui-datepicker-trigger').prop('title','');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T01:03:45.950

您可以为 datepicker() 添加选项：

```
$(".datepicker").datepicker({ 
hideIfNoPrevNext: true,
minDate: "-2Y"
}); 
```

# android - Android - 从设备中完全删除 SMS 并使 SMS 不可恢复

> ID：13831648
> 
> 赞同：1
> 
> 时间：2012-12-12T02:03:08.843
> 
> 标签：android, message, permission-denied

我想通过我的应用程序从手机中删除所有短信。目前，我正在使用以下代码删除消息。

```
 Uri uriSms = Uri.parse("content://sms/");
        Cursor c = getContentResolver().query(uriSms,
            new String[] { "_id", "thread_id", "address","person", "date", "body" }, null, null, null);

        if (c != null && c.moveToFirst()) {
            do {
                long id = c.getLong(0);
                getContentResolver().delete(Uri.parse("content://sms/" + id), null, null);
            } while (c.moveToNext());
        } 
```

我可以从手机中删除消息。

但是通过使用一些恢复应用程序，它们会被恢复。

我试图通过从路径中删除文件来完全删除它

“数据/数据/com.android.providers.telephony/databases/mmssms.db”

但它给了我以下权限被拒绝错误。

```
12-12 00:37:29.673: W/System.err(9724): java.io.FileNotFoundException: /data/data/com.android.providers.telephony/databases/mmssms.db (Permission denied) 
```

如何从我的设备中完全删除消息？使用一些安全的删除方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:04:59.997

您无法删除存储在另一个应用程序沙箱（如 com.android.providers.telephony）上的文件，除非设备已植根。

# r - cbind(1, ) 和 cbind(1, )?

> ID：13831649
> 
> 赞同：0
> 
> 时间：2012-12-12T02:03:11.340
> 
> 标签：r

我正在使用一些与以下简单脚本有重要相似之处的代码：

```
scores <- matrix(rnorm(4*20), ncol=4,nrow=20)
result <- matrix(NA, ncol=2, nrow=20)
index <- as.logical(rbinom(20,1,.2))
result[index, 1:3] <- cbind(1, scores[index,3:4]) 
```

其中 index 是一个逻辑向量，`sum(index)`通常大于`1`但偶尔可以是`1`or `0`。

脚本在以下情况下失败`sum(index) == 1`：

```
> scores <- matrix(rnorm(4*20), ncol=4,nrow=20)
> result <- matrix(NA, ncol=3, nrow=20)
> index <- c(rep(FALSE, 19),TRUE)
> result[index, 1:3] <- cbind(1, scores[index,3:4])
Error in result[index, 1:3] <- cbind(1, scores[index, 3:4]) : 
  number of items to replace is not a multiple of replacement length
> cbind(1, scores[index,3:4])
     [,1]       [,2]
[1,]    1 -0.1780255
[2,]    1 -0.6840048
> #should be:
> c(1, scores[index,3:4])
[1]  1.0000000 -0.1780255 -0.6840048 
```

并且在哪里`sum(index) ==0`：

```
> scores <- matrix(rnorm(4*20), ncol=4,nrow=20)
> result <- matrix(NA, ncol=3, nrow=20)
> index <- rep(FALSE, 20)
> result[index, 1:3] <- cbind(1, scores[index,3:4])
Warning message:
In cbind(1, scores[index, 3:4]) :
  number of rows of result is not a multiple of vector length (arg 1)
> #cbinding to a zero-row matrix returns an error 
```

这个问题的明显解决方案如下：

```
scores <- matrix(rnorm(4*20), ncol=4,nrow=20)
result <- matrix(NA, ncol=3, nrow=20)
index <- as.logical(rbinom(20,1,.1))
if(sum(index) > 1){
    result[index, 1:3] <- cbind(1, scores[index,3:4])
}else{
    if(sum(index) ==1){
        result[index, 1:3] <- c(1, scores[index,3:4])
    }
} 
```

但是，我对如何编写代码以避免此错误而无需编写一堆`if`语句的建议很感兴趣。将原子向量绑定到 nx2 矩阵或 2 长度向量 (n=1) 是否有技巧，以使结果始终是 nx3 矩阵？如果脚本可以在 n=0 时执行此操作而不会产生错误，则加分。

如果不是一个小时的调试，我就不会发现这个问题——它在批处理脚本中隐藏了相当多的功能。关于避免这种“陷阱”的编码方式有什么一般性建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:09:17.350

通常添加`drop=FALSE`到`mtx[1,]`调用将避免单行提取和假定矩阵结构的后续操作出现的困难：

```
result[index, 1:2] <- cbind(1, scores[1, 3:4, drop=FALSE])  # no error
# Also adding a third column to avoid dimension mismatch
scores <- matrix(rnorm(4*20), ncol=4,nrow=20)
result <- matrix(NA, ncol=3, nrow=20)
index <- as.logical(rbinom(20,1,.2))
result[index, 1:3] <- cbind(1, scores[index,3:4, drop=FALSE]) 
```

我还没有完全弄清楚您希望我们如何避免将零行对象分配给零行对象的错误。您应该改为检查`length(index)==0`

（真正的问题是你将一个三列矩阵分配给一个两列目标。哦，我看到你试图解决这个问题，但你仍然试图分配给维度中不存在的第三列。）

# c# - 鼠标悬停时展开 treeViewItem

> ID：13831652
> 
> 赞同：0
> 
> 时间：2012-12-12T02:03:22.887
> 
> 标签：c#, wpf, xaml, treeview, mouseover

我正在使用 WPF，并且正在处理 treeViewItem。我正在寻找一种在鼠标悬停在该节点上时扩展节点的方法，并`IsExpand=false`在鼠标不在该节点上时设置属性。功能很简单。

如果我应该使用触发器或事件，我对使用此控件的事件有点迷失。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:37:10.747

像这样的东西应该指向正确的方向

```
<Grid>
    <TreeView Margin="0,40,0,0">
        <TreeViewItem Header="Level 1">
            <TreeViewItem Header="Level 2" />
        </TreeViewItem>

        <TreeView.ItemContainerStyle>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="IsExpanded" Value="False" />
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="IsExpanded" Value="True" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </TreeView.ItemContainerStyle>
    </TreeView>
</Grid> 
```

# c# - 搜索 C# 代码以查找调用的数据库查询/存储过程？

> ID：13831667
> 
> 赞同：0
> 
> 时间：2012-12-12T02:05:27.147
> 
> 标签：c#, reporting-services, datatable

我正在尝试从一些在 EXcel 中生成数据报告的 C# 代码进行回溯。它首先在 ASPX 网页中调用。这是一些代码：

```
 dtClientSideData = SessionReport.SelectClientIncidenceReport(
                    sSurveyID != "-1" ? sSurveyID : null,
                    sSupplierID != "-1" ? sSupplierID : null,
                    ddlLinkType.SelectedValue != "-1" ? ddlLinkType.SelectedValue : null,
                    ddlTargetType.SelectedValue != "-1" ? ddlTargetType.SelectedValue : null
                    ); 
```

所以 dtClientSideData 是一个 DataTable，如下所示：

```
 DataTable  dtClientSideData; 
```

在类中的某处，它调用了一个名为 SessionReport 的类，而该类直接使用 SQL 的东西。我这么说是因为它有这些进口：

```
using System.Data.SqlClient; 
```

在那里我看到了这段代码：

```
StoredProcedure sp = new StoredProcedure();
sp.ConnectionType = Connections.ConnectionStringType.IncidenceReport;
sp.ProcedureName = "prc_SelectSurveyIncidenceReport";
sp.Parameters = lstParameters.ToArray(); 
```

当我输入这个时，我相信我想通了：p，所以我只需要按照`sp`这里，对吗？我的最终目标是将代码复制到[SSRS](http://en.wikipedia.org/wiki/SQL_Server_Reporting_Services) 中。

# .htaccess - 一台主机使用 htaccess 的多站点。需要创建图像文件夹重写

> ID：13831671
> 
> 赞同：2
> 
> 时间：2012-12-12T02:05:49.733
> 
> 标签：.htaccess, mod-rewrite

我有一个用于运行多个站点的托管帐户 masterhost.com。在 masterhost.com 下，我有 site1.com、site2.com 等......并且正在使用 masterhost 目录中的这段代码将域请求从 masterhost 目录重新路由到 site1 目录。

```
RewriteCond %{HTTP_HOST} ^(www.)?site1.com$
RewriteCond %{REQUEST_URI} !^/site1/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /site1/$1/
RewriteCond %{HTTP_HOST} ^(www.)?site1.com$
RewriteRule ^(/)?$ site1/index.php 
```

然而，site1.com 上的 Joomla 对此存在一些问题，并将默认图像路径路由回 masterhost.com/images。

我可以使用重写来识别任何请求[http://www.site1.com/images](http://www.site1.com/images)并将其写入[http://www.masterhost.com/site1/images](http://www.masterhost.com/site1/images)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:27:36.463

我相信问题出在这两行：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

基本上，如果图像存在于 mainsite.com，这些规则将阻止请求被重定向到 site1。因此，例如，如果您有 mainsite.com/img/logo.png 和 site1.com/img/logo.png，site1.com 将显示 mainsite.com 的徽标。

此外，使用此规则：

```
RewriteRule ^(.*)$ /site1/$1/ 
```

我不相信结尾的斜杠应该在那里。

最后，你没有问，但最后一条规则可能也不起作用？如果是这样，删除上面的 !-f 和 !-d 检查会破坏它。这是因为如果用户请求 site1.com/，第一条规则会将其重定向到 /site1/，而后者永远不会匹配该规则`^(/)?$`。因此，该规则需要更改为：

```
RewriteRule ^site1(/)?$ site1/index.php 
```

您可能需要也可能不需要该规则中的 ^ 和 site1 之间的斜杠，具体取决于您的 RewriteBase 指令。

# node.js - Browserify/Jadeify：不再支持需要地图

> ID：13831672
> 
> 赞同：1
> 
> 时间：2012-12-12T02:05:55.057
> 
> 标签：node.js, browserify

我正在尝试在我的 ExpressJS 项目中使用[browserify](https://github.com/substack/node-browserify) / [jadeify ：](https://github.com/substack/node-jadeify)

**`server.coffee`**

```
browserify = require "browserify"
jadeify = require "jadeify"

bundle = browserify()
    .use(jadeify(__dirname + "/client/jade/templates"))
    .addEntry(__dirname + "/public/js/app/main.js")
app.use bundle 
```

**`main.coffee`（客户端）**

```
$ = require "jquery"
jadeify = require "jadeify"

html = jadeify "test.jade", 
    title: "Hello World"
console.log html 
```

我得到的是：

```
Error: require maps no longer supported
    at Function.Wrap.require (/labs/Projects/Nodebook/node_modules/browserify/lib/wrap.js:410:15)
    at Function.module.exports.Object.keys.forEach.self.(anonymous function) [as require] (/labs/Projects/Nodebook/node_modules/browserify/index.js:158:28)
    at module.exports (/labs/Projects/Nodebook/node_modules/jadeify/index.js:53:16)
    at Function.Wrap.use (/labs/Projects/Nodebook/node_modules/browserify/lib/wrap.js:105:5)
    at Function.module.exports.Object.keys.forEach.self.(anonymous function) [as use] (/labs/Projects/Nodebook/node_modules/browserify/index.js:158:28)
    at Object.<anonymous> (/labs/Projects/Nodebook/server.coffee:55:25)
    at Object.<anonymous> (/labs/Projects/Nodebook/server.coffee:63:4)
    at Module._compile (module.js:449:26)
    at Object.exports.run (/usr/lib/node_modules/coffee-script/lib/coffee-script/coffee-script.js:83:25)
    at compileScript (/usr/lib/node_modules/coffee-script/lib/coffee-script/command.js:177:29) 
```

似乎服务器不想启动。我怎样才能让它工作？我认为代码与文档中的代码基本相同。出了什么问题，我该如何解决？

# javascript - for循环后重定向到不同的网页

> ID：13831674
> 
> 赞同：0
> 
> 时间：2012-12-12T02:06:19.377
> 
> 标签：javascript, html, for-loop, callback

我试图让一些javascript运行一个`for`循环，该循环将创建一个xml文件，然后在循环完成后访问一个允许用户下载文件的链接。目前发生的情况是它在创建文件的过程中完成了一半，然后向用户发送了下载文件的链接。

我按照[这个问题的建议](https://stackoverflow.com/questions/5653627/wait-for-loop-to-finish-before-passing-the-value-in-javascript-also-google-maps)创建了一个回调变量并将下载链接移动到另一个函数，但这也没有解决问题。还有其他人知道怎么做吗？我的代码是：

```
var callbackcount=0;
function populateTemplate(numResults) {
  for (i=1; i < numResults; i++) {
    $.post('linkToTheFileThatCreatesTheXMLFile', {WithSomeParameters};
    download(numResults);
  }
}

function download(numResults) {
  callbackcount++;
  if (callbackcount == numResults) {
    window.location.href="linkToPHPThatDownloadsFile";
  }
} 
```

非常感谢

**编辑：** *Console.log 结果：*

```
LOG: 230 LOG: 330 LOG: 230 LOG: 330 
LOG: 430 LOG: 530 LOG: 630 LOG: 730 
LOG: 830 LOG: 930 LOG: 1030 LOG: 1130 
LOG: 1230 LOG: 1330 
```

*如果 numResults = 7*

```
LOG: 27 LOG: 37 LOG: 47 
```

*或者*

```
LOG: 27 LOG: 37 LOG: 47 LOG: 57 
```

等等

**编辑：** *新代码：*

```
function populateTemplate(numResults) {
  var callbackcount = 1;
  for (i=1; i < numResults; i++) {
    $.post('linkToTheFileThatCreatesTheXMLFile', {WithSomeParameters}, function() {
      callbackcount++;
      console.log(callbackcount, numResults);
      if(callbackcount === numResults - 1) {
        window.location.href="linkToPHPThatDownloadsFile";
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:17:19.040

`$.post`是异步调用。所以当你到达最后一个循环时，闭包中的`callbackcount`所有`numResults`帖子都还没有通过。绝对不是最后一个。

`$.post`允许在帖子完成后调用回调。这个回调应该调用你的`download`方法。

```
var callbackcount=0;
function populateTemplate(numResults) {
  for (i=1; i < numResults; i++) {
    $.post('linkToTheFileThatCreatesTheXMLFile', {WithSomeParameters}, function() {

      callbackcount++;
      if (callbackcount === numResults) {
        window.location.href="linkToPHPThatDownloadsFile";
      }

    });
  }
} 
```

这样，您可以在帖子完成时评估功能。我还内联了它以使变量的访问更简单。

顺便说一句：总是在 JavaScript 中使用`===`over[看看为什么](https://stackoverflow.com/questions/523643/difference-between-and-in-javascript)`==`

**编辑**

循环索引`i`应从 0 开始。还应将其声明为局部变量，而不是全局变量。

`for ( var i = 0; i < numResults; i++ )`

否则循环将只运行 5 次， a`numResults`为 6。

**编辑 2 - 第二种方法**

如果它与每帧的请求太多（我怀疑）有关，你也可以试试这个，看看它是否有所作为。

```
var callbackcount=0;
function populateTemplate(numResults) {
  for (i=1; i < numResults; i++) {

    setTimeout( function() {

      $.post('linkToTheFileThatCreatesTheXMLFile', {WithSomeParameters}, function() {

        callbackcount++;
          if (callbackcount === numResults) {
            window.location.href="linkToPHPThatDownloadsFile";
          }

      });

    }, 100);
  }
} 
```

这会延迟每个请求，因此并不是每个请求都在一帧中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:18:08.417

看起来您正在使用 jQuery。您发布的代码不正确，应该是这样的：

```
$.post( 'linkToTheFileThatCreatesTheXMLFile', {Parameters}, function() {
    download(numResults);
}); 
```

（除非你的代码格式搞砸了）

另外，请确保`numResults`由 callbackcount 定义和初始化。（可能是范围问题）

# llvm - 使用 indvars 优化过程在 llvm/opt 中查找规范归纳变量

> ID：13831678
> 
> 赞同：4
> 
> 时间：2012-12-12T02:06:47.503
> 
> 标签：llvm, llvm-clang

我正在尝试使用 L->getCanonicalInductionVariable() 在给定其参考 L* 的情况下获取循环传递中循环的规范归纳变量。

但是我遇到的许多循环都不是规范的形式。例如：

```
for (int i = 10; i < 20 ; i++) {
    ....
} 
```

根据 llvm 文档[http://llvm.org/docs/Passes.html#indvars-canonicalize-induction-variables](http://llvm.org/docs/Passes.html#indvars-canonicalize-induction-variables)），使用“opt”中的“indvars”传递应该通过将循环归纳变量转换为规范形式来解决问题. 我试过运行：

```
opt -mem2reg -indvars < test.bc > optTest.bc 
```

其中“test.bc”是上述for循环的位代码格式。但是indvars pass好像没有效果（这里我省略了汇编代码，但是我查过了）。

稍后，使用 L->getCanonicalInductionVariable() 返回 null。我也尝试过将“indvars”与“loops”、“loop-simplify”等其他通行证一起使用，但无济于事。

关于如何让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T08:19:51.413

如果您使用的是早于 r153260 的 LLVM 版本，您可以通过添加`-enable-iv-rewrite`命令行选项来启用归纳变量重写，它应该会生成您期望看到的结果。

此选项自 3.0 起已弃用，并在上述版本之后完全删除；没有它，通行证不会根据其文档表现。如果你现在想这样做，那么我认为你必须添加一个 pass 来自己实现它——尽管你当然可以使用旧的（删除的）代码作为参考。我相信它被删除是因为（1）更多的通行证被改变，以便能够在没有规范归纳变量的情况下处理循环，以及（2）规范化导致其他性能影响；所以我想在添加类似的通行证之前三思而后行是明智的。

# css - Wordpress 特色图片调整大小和裁剪不起作用

> ID：13831679
> 
> 赞同：0
> 
> 时间：2012-12-12T02:07:02.117
> 
> 标签：css, wordpress, wordpress-theming, crop, image-resizing

我无法在我的 wordpress 博客中调用博客文章的特色图片。我已经在网站上搜索了该教程，但结果都是一样的。

它不遵循我指定的 200x180px 大小，然后裁剪其余部分。为了更好地了解我正在尝试做的事情，您可以参考这个网站：

[http://freakify.com/](http://freakify.com/)

我正在尝试使所有特色图像的尺寸相同（200x180）。在一个非常相关的主题上，我的特色图像的尺寸不同，但不低于 500 像素且不超过 650 像素。我试图在不同的地方显示它，例如我的索引文件和侧栏.php 文件

```
add_theme_support( 'post-thumbnails' );
set_post_thumbnail_size( 200, 180, true ); // 50 pixels wide by 50 pixels tall, crop mode
add_image_size( 'post-thumbnails', 200, 180  ); 
```

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:24:46.113

首先，`add_image_size`如果您打算只使用一个缩略图大小，则不需要，仅使用前两行就足够了。其次，使用“真实”声明，您是在“告诉”wordpress 硬裁剪图像，因此它只是将图像缩小为 200x180。另一方面，如果您将“真”更改为“假”，那么您的图像将被调整为它们可以达到的最大宽度或高度，以保持纵横比。这是在不改变图像外观的情况下调整图像大小的两种方法，因为如果不保持纵横比，图像就会被拉伸。我的建议是使用 200px 作为绝对值，并动态更改高度。为此，您可以这样做：

```
set_post_thumbnail_size( 200, 9999, false ); 
```

这样您就可以拥有原始图像，满足 200 像素的要求，但不改变它们的高度，这样您就可以保持纵横比。

查看[http://dfine.me](http://dfine.me)以了解此操作，您只需要修改 css 即可以正确的方式获取项目。

# winforms - DataGridViewComboBoxColumn 设置选中索引

> ID：13831686
> 
> 赞同：2
> 
> 时间：2012-12-12T02:07:34.793
> 
> 标签：winforms, datagridview, indexing, datagridviewcombobox

我只是不能让它工作。我在 winforms 中有一个 datagridview，在我的这一列中是一个 DataGridViewComboBoxColumn。

在我的构造函数中，我像这样设置它

```
DataGridViewComboBoxColumn column = (DataGridViewComboBoxColumn)RectangleGrid.Columns["Material"];

        DataTable data = new DataTable();

        data.Columns.Add(new DataColumn("Value", typeof(int)));
        data.Columns.Add(new DataColumn("Description", typeof(string)));

        foreach (Materials M in DataStructure.Active.Active_Materials)
        {
            data.Rows.Add(M.MaterialNr, (M.MaterialNr + 1).ToString() + " " + M.Material.Name);
        }

        column.DataSource = data;
        column.ValueMember = "Value";
        column.DisplayMember = "Description"; 
```

它实际上运行良好，只是在我想要的下拉框中没有选择任何内容。我已经用谷歌搜索了这个，例如尝试了这种方法： http: [//goo.gl/kBy8W](http://goo.gl/kBy8W)但没有成功，因为 EditingControlShowing 仅在我单击该框时发生，而不是在它第一次出现时发生（因此我可以设置选定的索引一旦它被点击但那不好）。CellFormatting 版本至少会更改值，但它只是将一个字符串放在那里，而不是我的数据源中的第一个索引。

我也试过这个

```
column.DefaultCellStyle.NullValue = data.Rows[0]["Description"];
column.DefaultCellStyle.DataSourceNullValue = data.Rows[0]["Value"]; 
```

这似乎有效，但是当我在下拉列表中选择第一个索引时（所以下拉下拉列表，然后选择第一个索引，然后取消选择单元格）我从 ParseFormattedValue 收到一个错误，它说它不能将“值”转换为系统.字符串。

这似乎是在正确的轨道上，但我无法让它工作：http: [//goo.gl/VevA3](http://goo.gl/VevA3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:43:09.403

我最终以一个我不喜欢的非常肮脏的解决方案“解决”它，但它有点工作。

我将 datagridview 绑定到数据表（不是数据库），所以我所做的就是将事件处理程序连接到数据表中的 TableNewRow 事件。

然后我在那个事件处理程序中做了这个

```
 private void NewRectangleInserted(Object sender, DataTableNewRowEventArgs e)
    {
        if (e.Row[0].ToString() == "")
        {
            e.Row[0] = 0;
        }
    } 
```

所以基本上当创建一个新行时，我将组合框的值设置为 0，除非用户通过在该特定单元格中添加一个值来创建该行（为什么我检查它是否等于“”）

结果是，只要您突出显示新行或行中的任何单元格，组合框就会被填充。但是，底部的新行仍然有一个空白组合框，直到您突出显示它。

不完美但好多了。糟糕的是，它必须通过黑客来完成！

# ruby-on-rails - Heroku 上的延迟作业间歇性地因“未初始化常量”而失败

> ID：13831693
> 
> 赞同：0
> 
> 时间：2012-12-12T02:08:14.593
> 
> 标签：ruby-on-rails, ruby, heroku, delayed-job

我在 Heroku 上有一个 Rails 3.2.6 应用程序，有一个用于 Delayed Job 2.1.4 的工人测功机。当我在本地运行工人时，不会出现任何问题。但是当我在 Heroku 上运行它时，它似乎会表现得不规律，并导致一些工作失败。起初我认为这种模式与工人测功机旋转并重新启动有关，因为经过几次尝试，工作又开始工作了。如果等待时间过长，作业就会开始失败。但现在我不确定这与减速有关，因为作业之间仅 5 分钟就再次导致错误。然而，让工作彼此靠近似乎会增加成功执行的机会。

错误如下：

```
irb(main):052:0> Delayed::Job.last.last_error
  Delayed::Backend::ActiveRecord::Job Load (9.9ms)  SELECT `delayed_jobs`.* FROM `delayed_jobs` ORDER BY `delayed_jobs`.`id` DESC LIMIT 1
=> "{Job failed to load: uninitialized constant FacebookTimelinePublisher. ... 
```

在这种情况下，为了安全起见，我已将其包含在自动加载路径`FacebookTimelinePublisher`中的目录中的 PORO 类。`app/publishers`

感谢您提出的任何建议。

[更新]

我已经更改了设置延迟作业以使用`Delayed::Job.enqueue`而不是`#delay`. 现在这已经将问题向前推进了，因为 Delayed Job 正确地找到了 Job 类，但是现在当它初始化自身时，它没有找到 Rails 模型。尽管如此，问题的“间歇性”性质仍然存在，因为有时工作执行顺利。

```
"{Job failed to load: uninitialized constant ShareObject. Handler: \"--- !ruby/struct:FacebookTimelinePublisher \\nshare_object: !ruby/ActiveRecord:ShareObject \\n  attributes: \\n  ...." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:45:43.187

不确定 Heroku 环境，但我通过在初始化程序中要求自定义类解决了类似的问题（我使用了延迟作业配置初始化程序）：

`require "#{Rails.root}/app/publishers/facebook_timeline_publisher.rb"`

参见：[Delayed::Job with modules](https://stackoverflow.com/questions/4467527/delayedjob-with-modules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:26:08.220

似乎问题与gem版本有关。我升级到了delayed_job 3.0.4 并安装了delayed_job_active_record (0.3.3)，所以我不确定这两个中的哪一个解决了问题，但现在所有作业都成功执行了。

希望这可以帮助某人。

# cuda - 对于相同数量的粒子，内核时间会增加

> ID：13831694
> 
> 赞同：4
> 
> 时间：2012-12-12T02:08:15.207
> 
> 标签：cuda

我正在尝试在 NVIDIA 的 K10 GPU 上运行我的代码。我正在使用 5.0 CUDA 驱动程序和 4.2 CUDA 运行时。问题是内核所花费的时间随着迭代而增加，其中每次迭代使用相同数量的源和目标（或粒子）。正因为如此，内核最终会花费大量时间，并且代码会因运行时错误而崩溃，这类似于“GPU 从总线上掉下来”。

可以在此处看到显示随着迭代次数增加内核运行时间的行为的图：

[https://docs.google.com/open?id=0B5QLL4ig3LVqODdmVjNBTlp5UFU](https://docs.google.com/open?id=0B5QLL4ig3LVqODdmVjNBTlp5UFU)

我尝试运行 NVIDIA “nbody” 示例来了解这里是否也发生了同样的事情，是的。对于粒子/物体的数量 (Np) = 1e5 和 10 次迭代，代码运行良好。对于 Np=1e5 和迭代 = 100，或 Np=1e6 和迭代 = 10，代码进入挂起整个系统的模式。

当我在使用 Tesla C2050 NVIDIA 卡（CUDA 驱动程序版本：3.2，运行时版本：3.2）的另一台机器上运行我自己的内核以及 NVIDIA 的 nbody 示例时，没有问题，并且内核每次都花费相同的时间迭代。

我试图了解装有 K10 GPU 的机器上发生了什么。我在这台机器上尝试了 CUDA 驱动程序和运行时版本的不同组合，这就是我得到的：

对于 5.0 CUDA 驱动程序，4.2 运行时，它只是挂起，有时会说“GPU 从总线上掉下来”。

对于 4.2 CUDA 驱动程序、4.2 运行时，代码（nbody 以及我的代码）崩溃并出现错误：“CUDA 运行时 API 错误 39：遇到不可纠正的 ECC 错误。”

对于 5.0 CUDA 驱动程序，5.0 运行时，它只是挂起，有时会说“GPU 从总线上掉下来”。

这是一台 64 位的 linux 机器，我们最近组装了 NVIDIA K10 GPU 卡。我正在使用 gfortran44 和 gcc44。

如果有任何其他信息，请告诉我。需要跟踪问题。

在此先感谢您的帮助！

米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:22:19.910

我主要只是创建一个答案，因此我们可以将此问题称为已关闭，但我会尝试添加一些细节。

Tesla GPU 有 2 个不同的类别：有风扇的和没有风扇的。那些有风扇的人（此时）带有“C”名称，尽管 K20 产品系列的命名会略有不同：

这些不是详尽的列表：

1.  带风扇的 Tesla GPU：C870、C1060、C2050、C2070、C2075、K20c（“C 级”）
2.  不带风扇的 Tesla GPU：M1060、M2050、M2070、M2075、M2090、K10、K20、K20X（“M 级”）

（请注意，目前没有带有风扇或“C”标识的 K10 类型产品）

**带风扇**的Tesla GPU旨在插入各种 PC 盒和机箱，包括各种工作站和服务器变体。由于他们有自己的风扇，他们需要低于一定温度水平的进气供应，但鉴于此，他们会保持自己凉爽。随着工作量的增加，产生的热量增加，他们会转动自己的风扇来保持凉爽。搞砸此过程的主要方法是限制进气流量或将其置于比其最大进气规格更热的环境空气环境中。

**没有风扇**的特斯拉 GPU有一个叫做被动散热器的东西，它们*不能*独立保持冷却并采取*被动*冷却过程中的作用。他们仍然有一个温度传感器，但是服务器 BMC（基板管理控制器）负责监控这个温度传感器（这直接在硬件/固件级别完成，独立于任何操作系统或任何针对 GPU 的活动)，并根据其指示的温度在卡上引导足以保持卡冷却的气流水平。BMC 通过增加服务器机箱中设计的任何风扇来控制 GPU 上的气流来做到这一点。通常情况下，机箱内会有护罩/管道以帮助完成此过程。集成这些卡的服务器制造商承担着各种责任，并且必须遵循 NVIDIA 的各种技术规范才能完成这项工作。

如果您碰巧在没有风扇的情况下使用 Tesla GPU，并且只是将其放在某个随机机箱中，那么您几乎**可以保证**具有此问题中描述的行为。出于这个原因，特斯拉“M”系列和“K”系列 GPU 通常只出售给经过认证流程的 OEM。

由于普通的系统管理员/系统组装人员不太可能设计出合适的闭环风扇控制系统，并且通常无法轻松访问定义温度传感器和访问方法的必要规范，因此如果您有其中一个，则唯一的 klugey 解决方法只是必须玩，就是在卡上引导*高水平的连续气流*，无论您放置它的任何设置。请注意，这很可能会很吵。如果您没有嘈杂的气流水平，则可能没有足够的气流来保持处于高工作负载情况下的卡冷却。此外，您可能应该留意 GPU 温度。请注意，`nvidia-smi`监控 GPU 温度的方法不适用于所有 M 级 GPU（即没有风扇的 GPU）。不幸的是，M 级 GPU（不同于 C 级 GPU）的 Fermi 和之前的温度传感器访问方法无法通过 nvidia-smi 命令在系统内轻松监控，因此在这些情况下，您将无法从 nvidia-smi 获得温度读数，这使得这种方法更难管理。随着 Kepler 一代的出现，情况发生了变化，因此现在可以通过 nvidia-smi 方法和服务器 BMC 在硬件/固件级别监控温度。

带有风扇的 C 级产品的温度可以通过 nvidia-smi 进行监控，无论代数如何。但这通常不是必需的，因为该卡有自己的控制系统来保持自身凉爽。

正如评论中提到的，所有的 GPU 还具有多种保护机制，但没有一种可以保证防止损坏。（如果你把卡扔进火里，就没有办法了。）但是第一个典型的机制是热节流。在接近 GPU 最大安全工作范围的某个预定义高温下，GPU 固件将独立降低其时钟以试图防止进一步的温度升高。（如果显卡的时钟速度较慢，那么它产生热量的能力通常也会有所降低。）这是一个粗略的机制，当这种热节流发生时，冷却领域中的某些东西*已经*错误的。该卡设计为在正常操作条件下永远不会进入热节流。如果温度继续升高（此时没有太多的净空），卡将进入其最终保护模式，即自行停止。此时 GPU 已对系统无响应，并且在操作系统级别，诸如“gpu has fall of the bus”之类的消息是典型的。这意味着冷却*失效*，保护机制*失效*。

# java - Java：将光标保持在一个区域中

> ID：13831695
> 
> 赞同：3
> 
> 时间：2012-12-12T02:08:19.567
> 
> 标签：java, cursor, awt

对于玩过 Madness Interactive 的玩家来说，最令人沮丧的事情之一就是当光标离开游戏区域时，你不小心点击了。这会导致游戏散焦，您的角色会在几秒钟内死亡。为了解决这个问题，我想制作一个可以在后台运行的 java 应用程序，它将光标保持在屏幕内，直到我按下一个键，比如 ESC 或其他东西。

我看到了两种实现方式，但我不知道它们是否可行。

1.  制作一个与 Madness Interactive 的渲染区域大小相匹配的 AWT 帧，并使用它来控制光标。
2.  使用一些脱离上下文的操作系统调用将光标保持在给定区域。

方法#1的优点：更容易实现框架的大小调整，以便用户可以看到封闭区域的形状和位置。

方法 #1 的潜在问题：AWT 框架可能需要从运行游戏的浏览器窗口中窃取焦点，从而使整个解决方案毫无意义。

我的问题是，这些方法中的任何一种都可行吗？如果没有，是否有可行的选择？

编辑：如有必要，我愿意使用另一种编程语言。

EDIT2：我可能会为此开发一个浏览器插件，但我以前从未做过这种开发。我会研究一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:30:10.020

如果您仍然对使用 Java 工作感兴趣，这里有一个可能的解决方案。

首先，为了将光标限制在一个区域内，您可以使用 Java Robot 类。

```
mouseMove(int x, int y); 
```

然后，您可以使用 AWT 的 MouseInfo 来获取鼠标光标的位置。

```
PointerInfo mouseInfo = MouseInfo.getPointerInfo();
Point point = mouseInfo.getLocation();
int x = (int) point.getX();
int y = (int) point.getY(); 
```

然后，每当鼠标光标的`x`和`y`值超过某个点时，使用 Java Robot 类将它们移回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:26:28.757

如果这是针对基于浏览器的游戏，请考虑编写一个greasemonkey 脚本，该脚本充当浏览器扩展，可以过滤为仅在游戏站点上运行。

在最简单的情况下，假设可点击区域是`(0,0) - (300,400)`，那么您可以将以下事件处理程序添加到页面：

```
$(document).on('click', function(event) {
  if (event.pageX > 300 || event.pageY > 400) {
    return false;
  }
}); 
```

您可以进一步优化您的脚本以执行以下操作：

1.  将浏览器调整为适合玩游戏的大小
2.  而不是检查点击的绝对 x,y 坐标，而是检查它是否在您不想接收点击的页面元素内
3.  将自定义键绑定添加到 umm.. 帮助您在游戏中
4.  编写一个可以自己玩游戏的 javascript 机器人

# assembly - G++ -S 在 Linux 中不输出汇编文件

> ID：13831697
> 
> 赞同：0
> 
> 时间：2012-12-12T02:08:56.897
> 
> 标签：assembly, g++

在过去的一个小时里，我一直在尝试输出我使用 g++ -s fileName.cpp 编写的 cpp 文件的汇编文件。终端中的命令执行，但文件目录中不存在程序集文件。帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:20:22.393

这有效：

```
g++ -S -o asm.s fileName.cpp 
```

（根据评论创建答案，因此可以将问题标记为已回答）

# java - 应用设计模式以减少代码重复

> ID：13831698
> 
> 赞同：2
> 
> 时间：2012-12-12T02:09:11.063
> 
> 标签：java, android, design-patterns

我有以下所有其他活动扩展的类。这是一些伪代码：

```
public class CommonActivity extends Activity
{
    //class member variables

    protected void setupInterface(String activityName)
    {
        //a bunch of setup code here
        Button select = new Button;
        Button create = new Button;
        Button delete = new Button;
    }
    protected void resetScreen()
    {
        selectButton.highlight();
        createButton.unhighlight();
        deleteButton.unhighlight();
    }
} 
```

我有五六个其他类扩展 CommonActivity，并执行以下操作：

```
 public class SectionActivity extends CommonActivity
{
    //class member variables

    protected void onCreate()
    {
        setupInterface("sectionActivity");
    }
} 
```

现在我有另一个从 CommonActivity 扩展的 Activity，它与其他 Activity 略有不同。我发现自己正在编写以下代码：

```
public class ExActivity extends CommonActivity
{
    //class member variables

    protected void onCreate()
    {
        setupInterface2("sectionActivity");
    }
} 
```

然后将以下方法添加到 CommonActivity（除了已经存在的方法）：

```
protected void setupInterface2(string activityName)
    {
        //a bunch of setup code here
        Button select = new Button;
    }
protected void resetScreen2()
    {
        selectButton.highlight();
    } 
```

现在我发现自己想知道消除代码重复的最佳方法。代码中的注释说“一堆设置代码”永远不会在活动之间改变。我应该在这里使用某种设计模式吗？我玩弄了模板模式的想法，但是对于 setupInterface 使用相同代码的五个类中的每一个都会在各自的类中具有重复的代码，而 ExActivity 将有自己的实现（希望这句话甚至有意义）。我也想过用 Strategy Pattern 将 setupInterface 中的唯一代码封装到自己的类中。这对我来说似乎很合理，但我觉得可能会有更优雅的东西。在这一点上，我什至认为我应该从 CommonActivity 中删除 setupInterface2 和 resetScreen2 并在 ExActivity 中简单地覆盖这些方法。这似乎是最简单的解决方案。这里的任何建议都会很棒！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T02:39:36.193

我建议不要从设计模式的角度考虑问题，而是清楚地描述你的类，以便你可以实现它们之间自然存在的模式。当您有 6 个类从一个类扩展而来，其中 5 个具有相似行为而一个没有类似行为时，您的类的继承模型可能不正确。也许将这5个类组合成一个实现通用逻辑的类是有意义的，而害群之马可以自己实现其特殊逻辑。

只是一个想法，但我会首先用一个简单的句子清楚地描述这些类，然后实现可能自然产生的任何模式，而不是试图将它们融入一个或另一个预定义的模式。

# php - 通过作曲家的学说mongodb安装错误

> ID：13831701
> 
> 赞同：5
> 
> 时间：2012-12-12T02:09:31.907
> 
> 标签：php, mongodb, zend-framework2, composer-php, doctrine-odm

我正在尝试在本地计算机上通过带有 Zend Framework 2 的作曲家安装 Doctrine MongoDB ODM[模块](https://github.com/doctrine/DoctrineMongoODMModule)，但我不断收到错误消息，指出我的计算机中缺少 PHP 扩展 mango。我正在使用安装了 WAMP 2.2 的 Windows 7 x64。我最初安装的是 1.3.1 的 mongodb php 驱动程序。但是，我发现[MongoDB ODM](https://github.com/doctrine/mongodb-odm/commit/29c6b58c9e65f5717aaea147600c702a4083b9c8)还不支持这个驱动程序，所以我降级到 1.2.12。在我再次尝试安装后，我一直收到同样的错误：

```
Your requirements could not be resolved to an installable set of packages.

  Problem 1
    - doctrine/mongodb 1.0.0-BETA3 requires ext-mongo >=1.3.1,<1.4-dev -> the re
quested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA2 requires ext-mongo >=1.2.12,<1.3-dev -> the r
equested PHP extension mongo is missing from your system.
    - doctrine/mongodb 1.0.0-BETA1 requires ext-mongo * -> the requested PHP ext
ension mongo is missing from your system.
    - doctrine/doctrine-mongo-odm-module dev-master requires doctrine/mongodb-od
m 1.* -> satisfiable by doctrine/mongodb-odm 1.0.0-BETA4, doctrine/mongodb-odm 1
.0.0-BETA5, doctrine/mongodb-odm 1.0.0-BETA6.
    - doctrine/mongodb-odm 1.0.0-BETA4 requires doctrine/mongodb 1.0.0-BETA1 ->
satisfiable by doctrine/mongodb 1.0.0-BETA1.
    - doctrine/mongodb-odm 1.0.0-BETA5 requires doctrine/mongodb 1.0.0-BETA1 ->
satisfiable by doctrine/mongodb 1.0.0-BETA1.
    - doctrine/mongodb-odm 1.0.0-BETA6 requires doctrine/mongodb >=1.0.0-beta1,<
1.1-dev -> satisfiable by doctrine/mongodb 1.0.0-BETA1, doctrine/mongodb 1.0.0-B
ETA2, doctrine/mongodb 1.0.0-BETA3.
    - Installation request for doctrine/doctrine-mongo-odm-module dev-master ->
satisfiable by doctrine/doctrine-mongo-odm-module dev-master. 
```

我检查了 phpinfo，MongoDB 出现在那里。我成功地使用简单的 php 脚本连接到本地数据库，而无需教义。所以我知道 Wamp 和 mongoDB 工作正常。问题是在整合学说时。非常感谢任何解决此问题的想法或建议。谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T19:59:37.877

我发现 Composer 在 PHP-CLI 上运行，在 wamp 的情况下，有两个 php.ini 文件：一个在 php 文件夹中，一个在 apache 文件夹中。apache 目录中的一个与 web 服务器一起使用，这是从 wamp 访问 php.ini 时编辑的内容。我通常从 wamp 编辑我的 php.ini，所以实际上我最终在 apache 中编辑了 php.ini。

另一个中的作曲家正在访问位于 php 目录中的 php.ini。这个 php.ini 不知道 mongo 扩展，因此会出现关于缺少扩展的错误。为了解决这个问题，我在 php 目录下的 php.ini 中添加了 mongodb 的扩展名。重新启动 wamp 并再次运行作曲家。结果，模块安装成功！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:25:21.883

你必须安装 mongo php 扩展

[https://github.com/mongodb/mongo-php-driver/downloads](https://github.com/mongodb/mongo-php-driver/downloads)

# java - Android：默认构造函数未定义的隐式超级构造函数

> ID：13831703
> 
> 赞同：1
> 
> 时间：2012-12-12T02:09:49.663
> 
> 标签：java, android, constructor

好的，首先，我知道你以前见过这个问题，我会告诉你为什么这是不同的。我有一个类，DrawView（遵循一些 Canvas 教程），它扩展了 View。好的，但我想要一个单独的类来处理所有动画，所以我可以调用 mainMenuAnimation()，它会绘制它而不是将其编码到实际的游戏循环中。好吧，如果我创建一个用于保存动画的类 Animations.java 并扩展 DrawView，我会从 Eclipse 中得到一个错误：

```
Implicit super constructor DrawView() is undefined for default constructor. Must define an explicit constructor 
```

问题是，如果我调用 DrawView() 构造函数，它会生成一个新的 Animations.java，依此类推。（也许我应该定义 Animations a = new Animations()？不确定我以后是否会遇到问题）。所以，如果我在 DrawView() 中添加一个空的构造函数，它会给我这个错误：

```
 Implicit super constructor View() is undefined for default constructor. Must define an explicit constructor 
```

我不知道该怎么办，求助？

好的，我在 DrawView() 构造函数中实例化 Animations 的原因是因为 Animations 的构造函数必须是 super(context) 并且访问上下文的唯一方法是通过 DrawView() 构造函数。

DrawView 构造函数代码：

```
Paint paint; //initialize EVERYTHING
Resources res;
Bitmap title;
Rect titleRect;
boolean inMainMenu, issetBackgroundDrawableSupported;
List<BitmapDrawable> mainMenuAnimation;

int mainMenuAnimationIndex = 0;

public DrawView(Context context) {
    super(context);  
    res = getResources(); //required stuff

    title = BitmapFactory.decodeResource(getResources(),R.drawable.title); //title stuff
    titleRect = new Rect(res.getDisplayMetrics().widthPixels/2 - title.getWidth()*10 , 100, res.getDisplayMetrics().widthPixels/2 + title.getWidth()*10, 200); //left, top, right, bottom

    inMainMenu = false; //main menu stuff
    issetBackgroundDrawableSupported = true;
    mainMenuAnimation = new ArrayList<BitmapDrawable>();
    mainMenuAnimation.add(new BitmapDrawable(getResources(), BitmapFactory.decodeResource(res, R.drawable.mainmenu_background_1)));
    mainMenuAnimation.add(new BitmapDrawable(getResources(), BitmapFactory.decodeResource(res, R.drawable.mainmenu_background_2)));
    mainMenuAnimation.add(new BitmapDrawable(getResources(), BitmapFactory.decodeResource(res, R.drawable.mainmenu_background_3)));

    Animations animations = new Animations(getApplication());
} 
```

和 Animations.java 代码：

```
public class Animations extends DrawView {
//define animations
@SuppressLint("NewApi")
public void mainMenuScroll(Canvas canvas) {
    inMainMenu = true;
    //draw main menu here
    if (inMainMenu = true) { //main menu loop
        if (issetBackgroundDrawableSupported) { //check if background drawing is supported
            try {
                setBackgroundDrawable(mainMenuAnimation.get(mainMenuAnimationIndex));
            } catch (Exception e){
                issetBackgroundDrawableSupported = false; //say it is unsupported
                setBackground(mainMenuAnimation.get(mainMenuAnimationIndex));
            }
        }

        else {
            setBackground(mainMenuAnimation.get(mainMenuAnimationIndex));
        }

        mainMenuAnimationIndex++;
        if (mainMenuAnimationIndex == 3) { //restart main menu animation
            mainMenuAnimationIndex = 0;
        }
    }
} 
```

}

好的，我意识到另一个 Eclipse 通知，可能有用。它说：

```
Custom view com/spng453/agenericrpg/Animations is missing constructor used by tools: (Context) or (Context,AttributeSet) or (Context,AttributeSet,int) 
```

听起来很相关，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:38:02.800

所有`View`的 s 都在一个 Context 的上下文中运行。（我想这就是为什么它被称为=P）。**这包括您的自定义 View**。

您将要定义一个`Animations`接受 a 的构造函数`Context`，因此您可以将它传递给超级构造函数。这是摆脱错误的最干净的方法，并且还将解决您提到的最后一个问题（即，Android 系统正在尝试实例化您的类，但它不知道如何处理不需要`View`的a`Context`在其构造函数中）。

```
public Animations(Context context) {
    super(context);  
} 
```

# java - 将 fxml 与 jruby 一起使用

> ID：13831708
> 
> 赞同：3
> 
> 时间：2012-12-12T02:10:57.790
> 
> 标签：java, ruby, jruby, javafx-2, fxml

我已经看到如何在 Java 中编写原始 JavaFX 代码，如何在 Java 中编写 FXML 代码，如何[在 JRuby 中编写原始 JavaFX 代码](https://github.com/jruby/jrubyfx)，但似乎找不到将 FXML 与 JRuby 一起使用的任何内容。目前是否可以将 FXML 与 JRuby 一起使用？如果是这样，有什么好的教程吗？

更新：[JRubyFX 0.9.1 及更高版本支持 FXML](https://github.com/jruby/jrubyfx)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T02:34:52.543

可以将 fxml 与 jruby 一起使用。

我找不到任何教程，所以我编写了我的第一个 Ruby 程序。该程序[演示了将 fxml 与 jruby 一起使用](https://gist.github.com/4266740)。[它是我为演示使用 fxml 和 java](https://gist.github.com/3062859)编写的早期演示的转换。

程序的 ruby​​ 版本的输出：

![jrubyfxml截图](../Images/76a598d9876b4342762b39909343f3d8.png)

# actionscript-3 - Starling Feathers tilerow 可点击

> ID：13831711
> 
> 赞同：1
> 
> 时间：2012-12-12T02:11:20.393
> 
> 标签：actionscript-3, starling-framework

我正在制作基于 tileRow 布局的数据视图，我将有 3-5 列

```
col1     col2     col3     col4
---------------------------------------
row1-1   row1-2   row1-3   row1-4
row2-1   row2-2   row2-3   row2-4 
```

ETC

目前，我已将其设置为使用 for 循环来创建项目并将每个项目的宽度设置为容器总大小的 1/4，这非常有效，可以用 4 个四边形填充整行，所以布局确实是像：

```
col1    col2    col3    col4
---------------------------------------
tile1   tile2   tile3   tile4
tile5   tile6   tile7   tile8 
```

我想添加一个事件侦听器以在单击一行时触发一个函数。我假设我无法真正做到这一点，因为每一行都由 4 个单独的图块组成。

有没有更好的方法来达到预期的效果，或者我应该只添加一个带有可点击按钮的第五列？

我不能真正使用该列表，因为我需要多个列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:11:46.593

我会创建一个代表一行的新 Sprite。从池中取出 rowSprite，并将每一行的项目添加到其中。然后您可以在该行上放置一个单击处理程序，并获取事件的 currentTarget 的子项。

# javascript - RequireJS 库在 Spring MVC 应用程序中加载缓慢

> ID：13831712
> 
> 赞同：1
> 
> 时间：2012-12-12T02:11:21.130
> 
> 标签：javascript, jquery, jquery-ui, spring-mvc, requirejs

我已将 RequireJS 放入我的 Spring MVC 应用程序中，以便对我的库进行依赖管理。我正在使用 jQuery 和 jQuery UI 等。我已经让它工作了，但是每当我加载/刷新页面时，页面将首先显示而没有加载任何库（一切都显示不正确），然后页面将闪烁并且一切都会正确显示。这正常吗？这是我到目前为止所拥有的：

**主.js：**

```
require([ "jquery-1.8.3", "jquery-ui-1.9.2.custom", "newsearch" ], function() {

}); 
```

**mysearch.jsp：**

```
<%@ page session="true"%>
<%@page contentType="text/html;charset=UTF-8"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<html>
<head>
<title>MyApp</title>

<!-- CSS is loaded here -->

<!-- JavaScript -->
<c:url value="/resources/scripts/main" var="main" />
<c:url value="/resources/scripts/require-jquery.js"
var="require" />

<script data-main="${main}" src="${require}"></script>

... 
```

**新搜索.jsp：**

```
$(document).ready(
    function() {
        // JS Code
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:05:48.703

下面的代码通常适用于我的 Spring MVC。请注意，$(document).ready(...) 调用将位于 mysearch.jsp 的底部。

```
<script type="text/javascript" src="${pageContext.request.contextPath}/path/to/require-2.0.2.min.js"></script>
<script type="text/javascript" src="${pageContext.request.contextPath}/path/to/jquery-1.7.1.min.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        require(["${pageContext.request.contextPath}/path/to/a-dependency.js", 
                 "${pageContext.request.contextPath}/path/to/another-dependency.js"],

            function() {
              console.log('Page dependencies loaded...');
              // More initialization code...
            }
        );              
  });
 </script> 
```

# javascript - 在 python 中使用 JavaScript 函数抓取页面的问题

> ID：13831716
> 
> 赞同：0
> 
> 时间：2012-12-12T02:11:38.053
> 
> 标签：javascript, python, beautifulsoup, mechanize

我被python问题困住了，看。

我必须废弃一个具有 JS 函数的页面，但这不是真正的问题，真正的问题是我需要的信息是由函数提供的。所以我需要运行该函数以确保它会构建 HTML我需要的代码，然后处理它以获得我想要的东西..

只是为了确保我清楚，JS函数构建HTML代码，但是当我废弃它时，它没有得到HTML buid，它只是返回JS函数......

我正在使用 mechanize 和 beautifulSoup 进行抓取过程。有谁知道我必须做什么来模拟 JS 函数来获取我需要的 HTML 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:15:56.483

您需要一个支持 javascript 的报废框架。[Selenium](http://seleniumhq.org/)就是其中之一，与 BeautifulSoup 一起使用时我得到了很好的结果。

如果您打算将[Selenium 与 Mozilla Firefox](http://coreygoldberg.blogspot.com.br/2011/06/python-headless-selenium-webdriver.html)一起使用，您可能需要检查[PyVirtualDisplay](https://github.com/ponty/PyVirtualDisplay)。

# r - 如何将附加参数传递给函数内部生成的 ggplot？

> ID：13831717
> 
> 赞同：2
> 
> 时间：2012-12-12T02:11:38.637
> 
> 标签：r, ggplot2

我写了很多包，其中的`generic`情节是`ggplot2`. 与其他 R 函数调用不同，调用是分层的`ggplot`，因此最终可以有多个选项（用`+`符号分隔）来使绘图看起来恰到好处。但是，我不希望有人因我的预定义选项而受苦，并希望他们能够自定义它而无需从头开始重新编写我的函数。我该如何做到这一点？

使用传统函数，我可以使用`three dot`运算符来传递可选参数。这似乎更难使用`ggplot`.

**可重现的例子**

```
f <- function(df) {
 custom_plot <-  ggplot(df, aes(mpg, disp, color = gear)) + 
geom_point(size = 3) +  
theme(panel.background = element_blank(), panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(), panel.border = element_blank(),
        axis.line = element_line(colour = "black"))
        return(custom_plot)
} 
```

生成绘图

```
f(mtcars) 
```

产生这个：

![测试图](../Images/2bd3d721329a664c9ec0f56c2100651c.png)

我如何概括这个函数，以便有人可以向这个图传递额外的或不同的选项（特别是在它是通用图的情况下）？

如果我的函数定义为：

```
f <- function(df, ...) 
```

我如何将这些传递给我的`ggplot`电话？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T03:09:20.467

任何知道 ggplot 的人都应该可以修改函数返回的图 - 除非您能想到无法通过 using 修复的特定情况，否则`+`更好的解决方案可能是尽可能少地进行主题化和自定义，并让人们添加到地块本身。

所有这些自定义都可以正常工作，例如：

```
mtplot <- f(mtcars)
mtplot + theme_bw()
mtplot + scale_colour_gradientn(colours=c("red", "purple"))
mtplot + labs(title="Add a title!")
mtplot + geom_point(size=5) 
```

# sql - 我试图在每一行中返回某个值，这取决于该行中的不同值是否已经在不同的表中

> ID：13831722
> 
> 赞同：1
> 
> 时间：2012-12-12T02:12:10.213
> 
> 标签：sql, conditional, row

我仍然是 SQL 的 n00b 并且遇到了障碍。我所拥有的是根据某些条件将某些 ID 初始选择到临时表中：

```
SELECT DISTINCT ID
INTO #TEMPTABLE
FROM ICC
WHERE ICC_Code = 1 AND ICC_State = 'CA' 
```

稍后在查询中，我选择了一个不同且更长的 ID 列表以及来自其他表的其他数据。该 SELECT 大约有 20 列宽，是我的结果集。我想做的是向该结果集中添加一个额外的列，该列的每个值都是 TRUE 或 FALSE。如果行中的 ID 在#TEMPTABLE 中，则附加列的值应为 TRUE。如果不是，则为假。这样，添加的列将在每行上准备好 TRUE 或 FALSE，具体取决于每行中的 ID 是否在`#TEMPTABLE`.

第二个 SELECT 将类似于：

```
SELECT ID,
       ColumnA,
       ColumnB,
       ...
       NEWCOLUMN
FROM ... 
```

NEWCOLUMN 的每一行的值取决于返回的行中的 ID 是否在 #TEMPTABLE 中。

有人在这里有什么建议吗？

谢谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:21:21.423

如果您离开加入#TEMPTABLE，您将获得一个 NULL，其中 ID 不存在

```
SELECT ID,
       ColumnA,
       ColumnB,
       ...
       T.ID IS NOT NULL AS NEWCOLUMN -- Gives 1 or 0 or True/false as a bit
FROM ... X
LEFT JOIN #TEMPTABLE T
ON T.ID = X.ID -- DEFINE how the two rows can be related unquiley 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:24:14.997

您可以使用联合和子查询。

```
Select . . . . , 'TRUE'
From . . .
Where ID in 
(Select id FROM #temptable)
UNION
SELECT . . . , 'FALSE'
FROM . . .
WHERE ID NOT in 
(Select id FROM #temptable) 
```

因此，如果 ID 在您的临时表中，则顶部部分 SELECT ... FROM ... WHERE ID IN ( *Subquery ) 会执行 SELECT 。*

**如果 ID不在**temptable 中，则底部执行 SELECT 。

UNION 运算符很好地连接了两个结果，因为两个 SELECT 语句将返回相同数量的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:20:12.877

您需要将您的结果查询左连接到#TEMPTABLE ON ID，如果有 ID，这将为您提供 ID，`NULL`如果没有，如果您想要 1 或 0，则可以这样做（对于 SQL Server）ISNULL(#TEMPTABLE .ID,0)<>0。

关于性能编码的一些注意事项：

1.  根据定义，ID 列是唯一的，因此它`DISTINCT`是多余的并导致不必要的处理（除非它是来自另一个表的 ID）

2.  为什么要将它存储到临时表中而不是直接在查询中使用它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:34:46.360

要扩展其他人对 Union 所说的内容，只需执行类似的操作

```
SELECT id, TRUE AS myColumn FROM  `table1` 
UNION 
SELECT id, FALSE AS myColumn FROM  `table2` 
```

# c# - IEqualityComparer.Equals 的实现是否应该允许空值？

> ID：13831725
> 
> 赞同：26
> 
> 时间：2012-12-12T02:12:58.533
> 
> 标签：c#, generics, equality

我有一个包含 Find 方法的自定义通用数据结构：

```
public bool Find(TValue value, IEqualityComparer<TValue> comparer)
{
    foreach (var x in items)
    {
        if (comparer.Equals(value, x))
            return true;
    }
    return false;
} 
```

我最近从一位客户那里得到了一份报告，他说这会导致他的相等比较器抛出`NullReferenceException`if `value`is`null`或如果集合中的一个项目 is `null`。

我最初的反应是他的`IEqualityComparer<T>.Equals`实现是错误的，因为它没有优雅地处理`null`值。但是我找不到任何文件来明确支持我。我有一些证据表明我是对的，但没有明确的证据。

首先，我将这个简单的调用更改`comparer.Equals`为：

```
if (x == null)
{
    if (value == null)
        return true;
}
else if (value != null && comparer.Equals(value, x))
    return true; 
```

其次，[Object.Equals](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)的文档除其他外说：

*   `x.Equals(null)`返回`false`。
*   的实现`Equals`不得抛出异常。

对我来说，这有力地证明了[IEqualityComparer<T>.Equals](http://msdn.microsoft.com/en-us/library/ms132154.aspx)应该优雅地处理空参数。

其他证据是[IComparer.Compare](http://msdn.microsoft.com/en-us/library/xh5ks3b3.aspx)的文档说：

> 允许将 null 与任何引用类型进行比较，并且不会产生异常。空引用被认为小于任何非空引用。

人们会期望`IEqualityComparer<T>.Equals`采取类似的行动。不过，有趣的是，`NullReferenceException`如果任一参数为`null`.

我浏览了 、 、 和 的文档`Object.Equals`以及`IEquatable<T>`无数`IEqualityComparer<T>`的`IEqualityComparer`博客文章、文章和 SO 问题。没有任何关于如何处理`null`参数的具体指导。

有这样的指导方针吗？如果没有，大师们有什么建议，为什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T02:25:26.037

.NET 框架本身中最接近的方法`IEqualityComparer.Equals`是静态方法，所有方法都应在该方法之后建模[`Object.Equals(object,object)`](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)。根据文档，此方法可以`null`优雅地处理 s。我认为这为 .NET 设计者的意图提供了足够的指示：`IEqualityComparer.Equals`也应该处理空值，并且应该以类似的方式处理它们（即，将两个`null`s 视为彼此相等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T02:17:25.640

FxCop 使用的准则包括一项规定，即公共类型的每个公共方法都必须处理空参数，例如通过抛出`ArgumentNullException`. 在您的情况下，鉴于`Object.Equals`您指出，那么您只需要进行 null 测试并返回 false - 因为只有 null 等于 null :)

这记录在这里：http: [//msdn.microsoft.com/en-us/library/ms182182 (v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms182182(v=VS.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T02:40:13.603

好吧，`EqualityComparer<T>`抽象基类（不是接口，但确实实现了它）对其`Equals`方法有一些注释。

因为`EqualityComparer<T>.Equals(T, T)`MSDN 没有说明通常会抛出任何已知的异常（而且 MSDN 通常非常擅长列出异常）。当然，传入任何类（自定义或 BCL）并将其与它进行比较`null`不会引发任何异常。

[http://msdn.microsoft.com/en-us/library/ms132154.aspx](http://msdn.microsoft.com/en-us/library/ms132154.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T21:18:51.777

的值`null`应被视为任何其他值。如果你被问到两个盒子的内容是否应该被认为是相同的，即使其中一个或两个盒子都是空的，这个问题也是完全有效的。如果两个盒子都是空的，它们的（非）内容是相等的。如果一个是空的而另一个不是，那么它们显然不是完全等价的，并且可能不会比较相等，但在某些情况下它们是合法的。

`Object.Equals(Object)`由and定义的默认等价关系`IEquatable<T>.Equals(T)`（如果定义了后者，则应使用与前者相同的关系）仅当事物基本上在所有方面都相等时才应将其视为相等，并且根据该定义，没有非空对象可以被认为等同于 null（因为`null`无法将自身与非 null 对象进行比较）。另一方面，将 的`IEqualityComparer<T>`两个实例定义*为就其目的而言*`T`是等价的，这是完全正常的，即使它们明显不相同，特别是如果在每个实例上调用的某个函数会产生相同的值。如果所讨论的函数被视为合法值，那么函数返回的值与它返回的值相同的非空值*`null``null`应该比较等于`null`。*

# css - :first-child 针对所有子元素

> ID：13831727
> 
> 赞同：1
> 
> 时间：2012-12-12T02:13:02.917
> 
> 标签：css, css-selectors

我有一个 ID 为“导航”的无序列表和一些子列表项元素。

我试图只选择第一项，`:first-child`但它将我使用的 CSS 应用于所有其他列表项。

```
ul#navigation li:first-child{
    background:#fff;
} 
```

所以，重申一下：这是给每个列表项一个白色背景。我只想选择第一个元素。出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T02:14:38.860

根据评论，您的问题是您的标记如下所示：

```
<ul id="navigation">
    <a href="http://google.com">
        <li>Google</li>
    </a>
</ul> 
```

请注意在此模型下，every`li`将如何成为 a 。`:first-child`我建议您使用更合适的结构，将锚点嵌套在列表项中。如果您希望锚点填满列表项，请将其显示设置为阻止：

```
<ul id="navigation">
    <li><a href="http://google.com">Google</a></li>
</ul> 
```

使用随附的 CSS：

```
#navigation a { display: block } 
```

完成这些结构更改后，您的选择器应针对第一个列表项：

```
/* > to target only immediate list items */
#navigation > li:first-child {
    background: red;
} 
```

# python - python：为什么在装饰器中使用包装器？

> ID：13831730
> 
> 赞同：0
> 
> 时间：2012-12-12T02:13:29.793
> 
> 标签：python, decorator

```
def synchronized(func):
    """Decorator for storage-access methods, which synchronizes on a threading
    lock. The parent object must have 'is_closed' and '_sync_lock' attributes.
    """

    @wraps(func)
    def synchronized_wrapper(self, *args, **kwargs):
        with self._sync_lock:
           return func(self, *args, **kwargs)

    return synchronized_wrapper 
```

代码在 whoosh/src/util.py 中，我无法理解 synchronized_wrapper 的效果和 synchronized_wrapper(self, *args, **kwargs) 中的参数从哪里来。谁能给我一些指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:57:53.993

装饰器只是带有参数转发的函数闭包的`@wraps`语法糖。`*args`引用位置参数的元组，并`**kwargs`引用已传递给的所有关键字参数的字典`func`。

因此，如果您有：

```
def f(foo, bar=None):
    ... 
```

并做了：

```
sync_f = someinst.synchronized(f)
sync_f(a, bar=z) 
```

基本上就像调用：

```
f(a, bar=z) 
```

但在“ `with self._sync_lock:`”上下文管理器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:06:08.063

装饰函数会导致基于反射的操作出现问题，并且`@wraps`旨在使包装函数真正模拟原始函数。 [提供的链接](https://stackoverflow.com/questions/308999/what-does-functools-wraps-do%20%E2%80%93)lucemia 具有适用的信息。

# ios - 准备出售时重新提交应用程序

> ID：13831731
> 
> 赞同：0
> 
> 时间：2012-12-12T02:13:47.250
> 
> 标签：ios, app-store-connect

我们现在有一个困境..

我们的应用程序已成功通过认证，`ready for sale`并且将于下周推出。

我们现在意识到我们要更改主屏幕上的图标和需要重新提交的加载图像……</p>

*   是否可以与正在销售的当前应用程序并行执行？IE。我可以在不影响现有应用程序的情况下进行更改并再次提交应用程序吗？

*   如果新应用提交失败，是否会影响即将启动的现有应用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T02:54:25.887

我不记得是否允许您提交尚未出售的应用程序的另一个版本，但我认为您可以。很容易判断，如果可以的话，主页上会有一个“添加版本”按钮，用于在 iTunes 连接中管理您的应用程序。

假设您可以添加另一个版本，那么新版本失败不会影响批准的版本。

如果你不能添加另一个版本，那么你将不得不拒绝你当前的版本重新提交，在这种情况下，新版本失败会让你回到第 0 格，你必须重新提交。另外，在新版本获得批准之前，您将无法发布，因此即使您没有问题，它也可能在下周之前无法获得批准。

# r - 将线/方程添加到散点图

> ID：13831744
> 
> 赞同：1
> 
> 时间：2012-12-12T02:16:45.610
> 
> 标签：r, linear-regression

我有 3 个模型，它们都很重要，我想用我的数据创建一个线性图。这是我到目前为止所拥有的：

```
>morpho<-read.table("C:\\Users\\Jess\\Dropbox\\Monochamus\\Morphometrics.csv",header=T,sep=",")
> attach(morpho)
> wtpro<-lm(weight~pronotum)
> plot(weight,pronotum)
> abline(wtpro) 
```

我尝试输入 abline 为：

```
abline(lm(weight~pronotum)) 
```

我无法弄清楚我做错了什么。我想添加我的方程，我有我所有的系数，但无法越过这条线......我什至开始思考也许我一路上搞砸了，但它仍然不起作用。我缺少一个单独的包裹吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:24:09.593

尝试：

```
abline(coef(lm(weight~pronotum))  # works if dataframe is attached. 
```

我尽量避免 attach()。随着您进行更多的回归工作，它会产生各种异常情况。更好的是：

```
wtpro<-lm(weight~pronotum, data= morpho)
with( morpho ,  plot(weight,pronotum) )
abline( coef(wtpro) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T02:30:30.813

绘图的格式为 plot(x, y, ...) ，看起来您已经先订购了因变量。容易犯错误。

例如：

设置一些数据

```
y <- rnorm(10)
x <- rnorm(10) + 5 
```

将因变量放置在 x 轴上的图将不会显示回归线，因为它位于可见平面之外。

```
plot(y,x)
abline(lm(y~x), col='red', main='Check the axis labels') 
```

翻转 plot 命令中的变量。现在它将是可见的。

```
plot(x,y)
abline(lm(y~x), col='red', main='Check the axis labels') 
```

# ruby-on-rails - Rails - has_many：通过不保存属性

> ID：13831747
> 
> 赞同：0
> 
> 时间：2012-12-12T02:16:58.840
> 
> 标签：ruby-on-rails, ruby, has-many-through

这是我的模型和关联：

**项目**

```
class Project < ActiveRecord::Base
   ...
   has_many :projectmemberizations
   has_many :users, :through => :projectmemberizations
   has_many :project_comments
   ...
end 
```

**项目评论**

```
class ProjectComment < ActiveRecord::Base
   attr_accessible :comment, :created_at, :project_id, :user_id, :user_name
   belongs_to :project
   has_many :projectcommentations
   has_many :users, :through => :projectcommentations

   def user
     self.user
   end
end 
```

**项目评论**

```
class Projectcommentation < ActiveRecord::Base
   attr_accessible :comment_id, :project_id, :user_id, :user_name
   belongs_to :project_comment
   belongs_to :user
end 
```

**用户**

```
class User < ActiveRecord::Base
   belongs_to :account
   has_many :projectmemberizations
   has_many :projects, :through => :projectmemberizations
   has_many :projectcommentations
   has_many :project_comments, :through => :projectcommentations
end 
```

## 问题

如您所见，用户可以对项目发表评论。这工作正常。但我试图开始工作的是在 WHO 创建评论的视图中显示。现在我正在尝试这样做，它没有产生任何错误，但只是没有为 user_name 显示任何内容。

```
<% @project.project_comments.each do |comment|%>
   <div class="comment">
      <%= image_tag current_user.photo.url(:small) %>
      <strong><%= comment.user_name %></strong>
      <%= comment.comment %>
</div>
<% end %> 
```

最后，如果我这样做，我可以在 Rails 控制台中使用它：

```
comment = ProjectComment.first
comment.user_id = 1
comment.save
comment.user.name 
```

那么显然添加评论时它没有保存user_id？顺便说一下，很抱歉这篇文章的长度！

PS这里是她的节目和project_comments控制器中的新动作：

```
def show
    @project_comment = ProjectComment.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @project_comment }
    end

  end

  def new
    @project_comment = ProjectComment.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @project_comment }
    end
  end 
```

## ProjectComment 创建方法

```
 def create
    @project_comment = ProjectComment.new(params[:project_comment])

    respond_to do |format|
      if @project_comment.save
        format.html { redirect_to project_url(@project_comment.project_id), :notice => 'Project comment was successfully created.' }
        format.json { render :json => @project_comment, :status => :created, :location => @project_comment }
      else
        format.html { render :action => "new" }
        format.json { render :json => @project_comment.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

## 来自创建评论的视图中的代码

```
<%= form_for(@project_comment) do |f| %>
   <%= f.hidden_field :project_id, :value => @project.id %>
   <%= image_tag current_user.photo.url(:small) %>
   <%= f.text_area :comment, :class => "addcomment" %>
   <%= f.submit :value => "Comment", :class => "tagbtn" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:43:42.353

您的模板当前正在显示 comment.user_name 的内容。您正在运行的 Rails 控制台示例使用了 comment.user.name。您在 ProjectComment 模型的 attr_accessible 属性列表中确实有 user_name，但没有任何已发布的代码填充该属性的值。

我相信根据您的描述，您的 ProjectCommentation 模型是不必要的。以下模型应该为您提供所需的内容：

```
class Project < ActiveRecord::Base
    ...
    has_many :projectmemberizations
    has_many :users, :through => :projectmemberizations
    has_many :project_comments
    ...
end

class ProjectComment < ActiveRecord::Base
    ...
    attr_accessible :comment, :created_at, :project_id, :user_id, :user_name
    belongs_to :project
    belongs_to :user
    ...
end

class User < ActiveRecord::Base
    belongs_to :account
    has_many :projectmemberizations
    has_many :projects, :through => :projectmemberizations
    has_many :project_comments
end 
```

在 ProjectComment 控制器中：

```
def create
    # If params[:project_comment] contains the user_id, it will be set here
    @project_comment = ProjectComment.new(params[:project_comment])

    # If your user id comes from somewhere else (like the user that is signed in)
    @project_comment.user_id = <user id here>

    # Normal save logic here
end 
```

# video.js - VideoJS，没有来源？

> ID：13831749
> 
> 赞同：0
> 
> 时间：2012-12-12T02:17:16.593
> 
> 标签：video.js

我正在动态加载视频，一切正常。目前，我用一个小的“占位符”循环加载播放器，它看起来像一个海报框架，但实际上是一个视频。我这样做的原因是因为如果我有一个标签，没有来源（事实上，我希望在页面加载和视频完成后），事情就会变得奇怪。

但是，在某些 iOS 设备上，这会导致问题，因为视频会立即全屏运行。

有没有办法在页面上有一个 VideoJS 的实例，没有源代码，并且没有错误？当我动态加载视频时，我最好简单地附加一个播放器吗？

# java - 极长的 GC 时间

> ID：13831750
> 
> 赞同：3
> 
> 时间：2012-12-12T02:17:17.983
> 
> 标签：java, garbage-collection, jvm-arguments

我们正在使用以下启动参数运行 JBoss，但在 GC 时间长（> 5 分钟）方面存在问题。

```
-Xms116042m -Xmx116042m -XX:PermSize=256M -XX:MaxPermSize=256M -XX:+UseConcMarkSweepGC -verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -XX:MaxHeapFreeRatio=95 
```

关于我们如何最小化 GC 时间的任何建议？

注意：这些是 16 个四核 cpu，128GB linux 机器。

GC 日志：

`"CMSbailing out to foreground collection"`我在 GC 日志中看到许多消息：

```
130904.206: [GC 130904.206: [ParNew: 240819K->25522K(249216K), 0.2391170 secs] 80798776K->80588205K(118799360K), 0.2395380 secs] [Times: user=2.56 sys=0.01, real=0.24 secs] 
130904.799: [GC 130904.799: [ParNew: 247018K->27648K(249216K), 0.2071170 secs] 80809700K->80601600K(118799360K), 0.2075260 secs] [Times: user=2.61 sys=0.00, real=0.21 secs] 
130905.455: [GC 130905.455: [ParNew: 249216K->27648K(249216K), 0.2808950 secs] 80823168K->80644147K(118799360K), 0.2813140 secs] [Times: user=2.66 sys=0.00, real=0.28 secs] 
130905.765: [Full GC (System) 130905.765: [**CMSbailing out to foreground collection**
131167.602: [CMS-concurrent-mark: 284.753/303.276 secs] [Times: user=909.49 sys=193.05, real=303.23 secs] 
 (concurrent mode interrupted): 80616499K->74658646K(118550144K), 554.7507700 secs] 80651365K->74658646K(118799360K), [CMS Perm : 112620K->112582K(262144K)], 554.7511550 secs] [Times: user=784.15 sys=175.10, real=554.65 secs] 
131461.127: [GC 131461.128: [ParNew: 221568K->27648K(249216K), 0.2620780 secs] 74880214K->74691531K(118799360K), 0.2624960 secs] [Times: user=2.28 sys=0.00, real=0.27 secs] 
131461.698: [GC 131461.699: [ParNew: 249216K->27647K(249216K), 0.3827130 secs] 74913099K->74807895K(118799360K), 0.3829550 secs] [Times: user=3.52 sys=0.41, real=0.39 secs] 
131462.754: [GC 131462.754: [ParNew: 249215K->27648K(249216K), 0.3022410 secs] 75029463K->74827673K(118799360K), 0.3026050 secs] [Times: user=2.36 sys=0.02, real=0.30 secs] 
131463.789: [GC 131463.790: [ParNew: 249216K->22291K(249216K), 0.2396390 secs] 75049241K->74841234K(118799360K), 0.2400980 secs] [Times: user=2.38 sys=0.06, real=0.24 secs] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:39:45.510

无论您使用 conc 标记还是并行 gc，清除 116 Gb 的垃圾总是会花费很多时间。我总是发现[这个文档](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)是调整 GC 最有用的信息来源。GC 调整将根据您的应用程序需求而定，没有通用的解决方案，但有很多可用的选项。

你可能对 G1GC 有更多的运气，因为它将堆分成许多小部分并独立地清扫它们，但它仍然可能容易受到随机 OOME 的影响。

如果调整 GC 无法产生足够的响应时间，请将机器拆分为多个 16 到 32 Gb RAM 的虚拟机并将其集群化。如果它是一个 EJB 应用程序，并且你正确地烤了你的 bean，它可能不像看起来那么痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:33:58.287

您可以将初始堆设置为较小的值。通过这样做，启动时间将减少。由于java不想在启动时分配一个非常大的堆。这将为 GC 节省一些时间，因为它通常会运行相对较小的堆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:00:31.247

我观察到发生完全 GC 的一个原因是因为你的年轻代比要求的更快被填满，这需要将对象复制到老一代。所以我们可以尝试以下选项

1.  为年轻代设置初始大小，如下所示 -XX:NewSize=500m -XX:MaxNewSize=500m

2.  您可以为年轻代设置一个配给作为老年代的一个因素 –XX:NewRatio=3

希望这可以帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-11T13:36:24.490

将 Java 堆大小设置得如此接近物理可用内存并不是一个好主意，除了使用 -Xmx 配置的内容之外，总是会使用相当多的开销。如果您有很多线程，则堆栈将需要相当多的时间。您是否查看过例如“vmstat 1”的输出以查看它是否正在交换？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T15:13:01.957

由于您看到消息“并发模式中断”，并且在 GC 时似乎您的世代都没有满，我认为有一个明确的 System.gc() 调用导致您的完整 GC。尝试添加 JVM 参数 -XX:+ExplicitGCInvokesConcurrent 以使 System.gc() 调用调用 CMS。此外，如果您自己调用 System.gc()，请确定原因并尽可能删除。

# php - 向 Wordpress 管理员显示待处理的未批准评论

> ID：13831754
> 
> 赞同：0
> 
> 时间：2012-12-12T02:17:39.223
> 
> 标签：php, wordpress, wordpress-theming

当管理员登录并查看页面时，它应该显示待处理的评论。

我认为这个功能已经存在于 Wordpress 中，或者它可能在我前一段时间使用的主题中？

这是任何地方的内置功能，还是需要在 PHP 中从头开始编码，使用[wp_list_comments](https://codex.wordpress.org/Function_Reference/wp_list_comments)，在主题 comments.php 中重写等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:24:56.797

它似乎不是内置功能，不是我知道的，我也没有找到用于此的插件。您可以为主题编写一个函数，检查用户是否是管理员，然后显示待处理的评论编号。

如果您正在创建自己的函数以滑入主题模板，请尝试使用[http://wordpress.org/extend/plugins/show-pending-comments-count/中的部分代码](http://wordpress.org/extend/plugins/show-pending-comments-count/)

这只是更新管理员中的数字，但功能应该相似。例如 is_admin() 然后查找并显示该页面的待处理评论。

可以使用第三方网站的插件或其他功能发表评论，因此请先查看您使用的评论。

我不知道这是否能让你走上正轨，但下载和查看该插件确实有助于我更好地理解这一点。如果我尝试这个，我将如何处理它。

您当然要先检查并确保他们是管理员。

# ios - UIGestureRecognizers 没有响应

> ID：13831755
> 
> 赞同：0
> 
> 时间：2012-12-12T02:17:50.227
> 
> 标签：ios, uiview, uigesturerecognizer

我有许多弹出视图保存为视图控制器的属性。它们仅在呈现时添加到视图中，并在隐藏时从视图中移除。一切正常，但我更改了代码以简化事情，但它不再起作用。

以下是我如何创建和添加手势识别器的示例：

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hidePopUpView:)];
[self.totalPowerPopUpView addGestureRecognizer:tapGestureRecognizer];
[self.co2PopUpView addGestureRecognizer:tapGestureRecognizer]; 
```

视图由按下 UIButton 触发的选择器呈现（在设置自定义视图属性的 if 语句中通常有其他代码，但为简单起见，我将其删除）：

```
- (void)showPopUpView:(UIButton*)sender
{
    CGRect endFrame = CGRectMake(10, 10, 300, 400);
    UIView *popUpView;

    if (sender == self.totalPowerInfoButton)
    {
        [self.view addSubview:self.totalPowerPopUpView];
        popUpView = self.totalPowerPopUpView;
    }
    if (sender == self.co2LevelInfoButton)
    {
        [self.view addSubview:self.co2PopUpView];
        popUpView = self.co2PopUpView;
    }

    [UIView animateWithDuration:0.5
                     animations:^ {
                         popUpView.alpha = 1.0;
                         popUpView.frame = endFrame;
                     }];
} 
```

popUpView 存在，但是当我点击它们时不会调用手势识别器选择器。为什么不？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T02:31:35.530

这是否有效：

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc]     initWithTarget:self action:@selector(hidePopUpView:)];
[self.totalPowerPopUpView addGestureRecognizer:tapGestureRecognizer];

tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hidePopUpView:)];
[self.co2PopUpView addGestureRecognizer:tapGestureRecognizer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T08:27:34.717

仔细检查并确保您添加 UIGestureRecognizer 的 UIView 已`UserInteractionEnabled`设置为`YES`. IE

`[self.imageView setUserInteractionEnabled:YES];`

# objective-c - 使用 addObject 时 M_PI 转换为字符串

> ID：13831756
> 
> 赞同：0
> 
> 时间：2012-12-12T02:17:50.073
> 
> 标签：objective-c

为什么这会将 M_PI 作为字符串“3.141593”添加到 NSMutableArray？如何将 M_PI 作为浮点数添加到数组中？

```
- (void)pushOperand:(float)operand
{
    [self.operandStack addObject:[NSNumber numberWithFloat:operand]];
}

[self pushOperand:M_PI]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:46:29.747

正如其他人所说，您不能将浮点数直接存储在`NSMutableArray`. 但是，您的代码已经将值作为 的实例插入`NSNumber`，这就是您想要的。稍后，当您将对象从数组中拉出时，您可以将其恢复为 POD 类型，如下所示：

```
double value = 0;

id topOfStack = [stack popOperand];

if ([topOfStack isKindOfClass:[NSNumber class]]) 
    result = [topOfStack doubleValue]; 
```

顺便说一句，感谢您参加斯坦福 iOS 课程 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:26:10.030

您不能将 POD 类型添加到`NSMutableArray`NSObject 和后代中。这是因为在添加和删除`retain`对象时会向对象发送消息。`release`如果你想按原样使用浮点数，那么你应该考虑一下。喜欢`std::vector<float>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:20:05.810

M_PI 转换为 NSObject，它是一个对象但不是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:38:45.790

最接近浮点数的是 NSNumber：

```
NSNumber* mpi= @(M_PI); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T02:44:23.210

你的代码看起来不错。是什么让您在添加到数组时认为它是一个 NSString？

# c# - 符号链接到父文件夹中的文件的 CreateFile 失败

> ID：13831759
> 
> 赞同：1
> 
> 时间：2012-12-12T02:18:26.560
> 
> 标签：c#, .net, winapi, exception-handling, symlink

关于这个问题：

[File.Copy() 和符号链接](https://stackoverflow.com/q/13829522/141172)

我发现这条线

```
SafeFileHandle fileHandle = 
    CreateFile(symlink.FullName, 0, 2, 
               IntPtr.Zero, 
               CREATION_DISPOSITION_OPEN_EXISTING, 
               FILE_FLAG_BACKUP_SEMANTICS, 
               IntPtr.Zero); 
```

因错误而失败

> 该系统找不到指定的文件

对于以下非常具体的情况：

原始文件在父目录中

> C:\Temp\SymlinkUnitTest\Original.txt [真实文件]

符号链接位于真实子目录中

> C:\Temp\SymlinkUnitTest\Work\Symlink.txt [上述文件的符号链接]

它似乎在许多其他情况下都有效（引用的 post pass 中的所有单元测试）。

这个特殊案例有什么特别之处吗？

作为参考，这是失败的单元测试：

```
[TestMethod]
public void FileSymlinkWork()
{
    string file = @"C:\Temp\SymlinkUnitTest\Work\Symlink.txt";
    Assert.IsTrue(File.Exists(file)); // Succeeds 

    // Following line throws Exception:
    string actual = new FileInfo(file).GetSymbolicLinkTarget();
    Assert.IsTrue(actual.EndsWith(@"SymlinkUnitTest\Original.txt"));
} 
```

# javascript - 如何通过 Javascript 访问 HTML DOM 中的 Elements 字段？

> ID：13831760
> 
> 赞同：0
> 
> 时间：2012-12-12T02:18:35.920
> 
> 标签：javascript, html, dom

我是 HTML DOM 操作的新手。即使是简单的例子，我也失败了。

这是我的代码：

```
<h1>head 1</h1>
<h2>head 2</h2>
<script type="text/javascript">
var h1 = document.getElementsByTagName('h1');
alert("tagName : "+h1.getTagName());
h1.parentNode.removeChild(h1);
</script>
<h3>head 3</h3> 
```

上面的代码甚至没有弹出任何“警报”。

我也试过：

```
alert("nodeType: "+h1.nodeType);
alert("nodeName: "+h1.nodeName);
alert("nodeValue: "+h1.nodeValue);
alert("tagName: "+h1.tagName); 
```

不过，他们都反应过来了`undefined`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:19:39.793

您忘记了参数周围的引号：

```
var h1 = document.getElementsByTagName(h1); 
```

应该：

```
var h1 = document.getElementsByTagName('h1'); 
```

你使用[萤火虫](http://getfirebug.com/)吗？如果不是，你应该。它会让你知道你有这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:26:32.560

这个网站真的很有用。 [http://www.w3schools.com/jsref/dom_obj_node.asp](http://www.w3schools.com/jsref/dom_obj_node.asp)

一旦掌握了它，请务必使用 jquery 或其他一些库来处理 dom（让生活更轻松）：http: [//jquery.com/](http://jquery.com/)

```
<h1>head 1</h1>
<h2>head 2</h2>
<script type="text/javascript">
var h1 = document.getElementsByTagName('h1')[0];
alert("tagName : "+h1.localName);
h1.parentNode.removeChild(h1);
</script>
<h3>head 3</h3> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T03:06:04.867

它应该是：

```
var h1 = document.getElementsByTagName('h1')[0]; 
```

**解释：**

每当您使用 getElements...（注意 s）时，您实际上都会得到一个数组。`[0]`在它之后使用它`var h1 = document.getElementsByTagName('h1')`实际上意味着*让我得到第一个带有 TagName = 'h1' 的元素*

您的其他选项是在此数组上循环然后使用`h1[i]`（例如）或在实际使用时选择该数组的正确成员 -

```
alert("tag name: ",h1[0]); 
```

只是为了比较，当你使用时`getElementById`你只得到一个元素，因此你可以直接使用它。

# android - 通过 FTP 上传文件比 HTTP 更快

> ID：13831764
> 
> 赞同：0
> 
> 时间：2012-12-12T02:19:00.723
> 
> 标签：android, http, ftp

我在 Android 平台上有一个应用程序，它具有使用 HTTP 协议的“*上传文件”功能。*不幸的是，有时我的用户决定上传大文件，上传所有数据需要很长时间。

我只是想提高我的应用程序的性能，但我不确定 FTP 是否是比 HTTP 更快的文件上传协议。

有谁知道哪个协议更快？

# android - @android:stye/Theme.Dialog 的样式在哪里定义

> ID：13831765
> 
> 赞同：0
> 
> 时间：2012-12-12T02:19:10.273
> 
> 标签：android

定义的样式属性在哪里`@android:style/Theme.Dialog`？还有任何中心位置记录了“样式元素”的所有属性吗？我已经看过[这个](http://developer.android.com/reference/android/view/View.html)，但它有`windowframe`几个属性缺失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:01:23.777

您可以在 Android SDK 目录中找到它，位于`"android-sdks\platforms\android-17\data\res\values\themes.xml"`

# asp.net-mvc-4 - ASP.NET Unobtrusive 同时执行客户端和服务器端验证？

> ID：13831767
> 
> 赞同：0
> 
> 时间：2012-12-12T02:19:24.270
> 
> 标签：asp.net-mvc-4, validation

asp.net MVC 不显眼的验证数据注释是否仅具有客户端验证或它也执行服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T04:20:53.207

数据注释还执行客户端验证。例如，假设您在`FirstName`用于表单的模型属性上有以下数据注释：

```
[Required(ErrorMessage = "Please enter your first name.")]
public string FirstName { get; set; } 
```

如果启用了 javascript，验证将在客户端进行，除非用户在文本框中输入内容，否则表单将不会提交。如果禁用了 javascript，或者如果您缺少执行客户端验证的适当脚本，则验证将在服务器端进行。但是，您必须检查是否`ModelState`有效，如果无效则返回视图：

```
if (!ModelState.IsValid)
{
    // Do something here if you need to, then return the view
    return View();
} 
```

# c++ - 可执行文件无法在双击执行时创建新文件

> ID：13831768
> 
> 赞同：1
> 
> 时间：2012-12-12T02:19:34.547
> 
> 标签：c++, macos, fstream

我正在编写一个在执行时创建一个新文本文件的程序。没什么太复杂的。编译程序后，我注意到它在使用终端执行时会按预期创建一个新文件，但无法使用双击执行创建一个新文件。
这是我正在使用的代码示例：

```
#include <fstream>
#include <iostream>
using namespace std;

int main() {
    ofstream outputFile("NewFile.txt");
    outputFile << "Some text";
    outputFile.close();
    printf("File created successfully!\n");
    return 0;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:40:10.330

我设法通过以下方式解决了这个问题：

```
#include <fstream>
#include <iostream>
using namespace std;

int main(int argc,char *argv[]) {

    // dirsep is a pointer to the file name
    char *dirsep = strrchr( argv[0], '/' );
    // If it's not null, set the value to 0, seperating the directory
    // from the file name
    if( dirsep != NULL ) *dirsep = 0;

    // Change the current working directory to the path of the executable
    if(chdir(argv[0]) != 0) printf("The file will be created in the home directory");

    ofstream outputFile("NewFile.txt");
    outputFile << "Some text";
    outputFile.close();
    printf("File created successfully!\n");
    return 0;
} 
```

非常感谢@jogojapan 为我指明了正确的方向。

# php - 我应该如何将个人资料的画廊图像保存到数据库中？

> ID：13831771
> 
> 赞同：0
> 
> 时间：2012-12-12T02:19:44.800
> 
> 标签：php, codeigniter, gallery

我目前正在开发一个允许您上传到屏幕的画廊，我想知道我应该如何将图像保存到数据库中，以便每个选择的图像都特定于每个用户。我已经完成了个人资料图片上传，它将每个用户的文件链接保存在数据库中，现在由于我试图为每个用户保存一组图像，我不确定你将如何存储一组图像一个身份证。怎么可能做到这一点？目前我的画廊数据库有 2 个字段，用户和画廊图像，但我认为这应该成为画廊图像，因为它包含图像名称的选择。在将文件名位置存储为 varchar 之前，我的个人资料图像。请指出我应该如何在一个字段中保存一组图像，或者如果它不可能。

这是我到目前为止所拥有的：

控制器：

```
class Gallery extends CI_Controller {

  function __construct()
   {
    // Call the parent construct
    parent::__construct();

    $this->load->model("profiles");
    $this->load->model("gal_model");
    $this->load->helper(array('form', 'url'));

   }

  function index()
  {

            //The commented out lines below signify what I have so far and when I uncomment them the image will no longer upload
            // At the moment the images just upload to the page
    //$this->load->library('upload');
    $username = $this->session->userdata('username');

    //$file_data = $this->upload->data();

    //$image = 'gallery_path'.$file_data['file_name'];

    //$data['image'] = 'gallery_path'.$file_data['file_name'];

    if($this->input->post('upload'))
    {

        $this->gal_model->do_upload();

    }

    //$this->gal_model->putGalleryImage($username, $image);

    $viewData['username'] = $username;

    $data['images'] = $this->gal_model->get_images();

    $this->load->view('shared/header');
    $this->load->view('gallery/galtitle', $viewData);
    $this->load->view('shared/nav');
    $this->load->view('gallery/galview', $data);
    $this->load->view('shared/footer');

}

} 
```

模型：

```
class Gal_model extends CI_Model
{
var $gallery_path;
var $gallery_path_url;

function Gal_model()
{
    parent::__construct();

    $this->gallery_path = 'web-project-jb/assets/gallery';
    $this->gallery_path_url = base_url().'web-project-jb/assets/gallery/';
}   

function exists($username)
{
    $this->db->select('*')->from("gallery")->where('user', $username);
    $query = $this->db->get();

    if ($query->num_rows() > 0)
    {

        return true;
        /*
         echo "user $user exists!";
        $row = $query->row();
        echo " and his profileimage is $row->profileimage";
        */
    }

    else

    {

        return false;
        //echo "no such user as $user!";
    }

}

    //this function is aiming to put the galleryimages into the database
function putGalleryImage($username, $image)
{

    $record = array('user' => $username, 'galleryimage' => $image);
    //$this->session->set_userdata($image);
    if ($this->exists($username))
    {
        $this->db->where('user', $username)->update('gallery', $record);

    }
    else
    {
        $this->db->where('user', $username)->insert('gallery', $record);

    }

}

function do_upload ()
{
   $config = array(
  'allowed_types' => 'gif|jpg|jpeg|png',
  'upload_path' => $this->gallery_path,
  'max_size'   => 10000     
            );

    $this->load->library("upload", $config);
    $this->upload->do_upload();
    $image_data = $this->upload->data();

    $config = array(
        'source_image'  => $image_data["full_path"],
        'new_image'     => $this->gallery_path. '/thumbs',
        'maintain_ration'   => true,
        'width' => 150,
        'height' => 100     

            );

    $this->load->library("image_lib", $config);
   $this->image_lib->resize();
}

function get_images()
{
    $files = scandir($this->gallery_path);
    $files = array_diff($files, array('.', '..', 'thumbs'));

    $images = array();

    foreach ($files as $file){
        $images[] = array(
            'url'   => $this->gallery_path_url.$file,
            'thumb_url' => $this->gallery_path_url.'thumbs/'.$file

                );

    }

    return $images;
}

 } 
```

我的画廊视图：

```
 <?php if ( is_array($images) && (count($images)>0) ):
   foreach($images as $image): ?>
   <div class="thumb">
       <a href="<?php echo $image['url']; ?>">
          <img src ="<?php echo $image['thumb_url']; ?>"/>
       </a> 
       <br>
   </div>
<?php endforeach; else:  ?>
    <div id = "blank_gallery">Please upload an Image</div>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:49:06.963

您可以简单地使用唯一的名称（例如当前的 unix 时间戳）命名每个上传，并将用户 ID 添加到名称的前面。现在您可以调用任何图片，因为您知道文件名的一部分是用户 ID。您不需要将链接存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:28:33.217

您可以将图像路径数组转换为逗号分隔的字符串。然后，您可以轻松地将其保存到数据库中。

# graphics - 图形管线如何使用共享内存？

> ID：13831772
> 
> 赞同：2
> 
> 时间：2012-12-12T02:19:47.437
> 
> 标签：graphics, gpu, gpgpu, pipeline

在 GPGPU 算法中，使用共享或本地内存对于实现高性能很重要。由于 GPU 是用来运行图形管道的，因此共享内存必须有一些重要的用途，但我不知道是什么。

阅读过英特尔图形驱动程序文档的人可能对此有答案。

# .net - 如何正确访问 c++/CLI initonly TimeSpan 字段？

> ID：13831773
> 
> 赞同：10
> 
> 时间：2012-12-12T02:20:02.150
> 
> 标签：.net, visual-c++, .net-4.0, c++-cli

以下代码编译时出现警告和智能感知错误：

```
ref class Test {
    initonly static TimeSpan Delay = TimeSpan(1,1,1); 

    Test() {
        long long ticks = Delay.Ticks; // << problem
    }
}; 
```

问题是：

*   警告 C4395：“System::TimeSpan::Ticks::get”：将在 initonly 数据成员“Test::Delay”的副本上调用成员函数
*   IntelliSense：不允许获取 initonly 字段的地址

如何正确访问 Ticks？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T03:01:47.200

嗯，这是相当大的失败鲸鱼。警告是准确的，编译器对 TimeSpan::Tick 属性获取器的了解不够。它不能确保 getter 不做任何可能改变结构值的事情，从而使*initonly*合同无效。它通过复制结构并警告它来解决它，因为这可能是一个性能问题。这有点笨拙，其他托管编译器制作副本而不说任何内容。我只是`#pragma warning(disable:4395)`在它前面放了一个，所以警告被抑制了。

IntelliSense 错误仅在我在 VS2012 中尝试时出现。那是一个错误。您可以在 connect.microsoft.com 上报告它。

考虑到痛苦并且这似乎是一个私人班级成员，我只会放弃*initonly*以取得成功。如果这不是可取的，那么您可以用属性包装该字段，故意创建副本，从而摆脱这两个问题，如下所示：

```
ref class Test {
    initonly static TimeSpan _delay = TimeSpan(1,1,1); 
    static property TimeSpan Delay { 
        TimeSpan get() { return _delay; }
    }

    Test() {
        long long ticks = Delay.Ticks;
    }
}; 
```

抖动优化器将摆脱它，所以不用担心开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T11:27:14.117

感谢 Hans Passant 的解释，我现在更好地理解了上下文

我刚刚遇到了同样的问题。

我的解决方案是

*   将 'initonly' 替换为 'const'
*   访问时，只要把 const 扔掉，就不会留下任何错误/警告

也许这不是“最先进的”编码，但它工作正常，请参见[此处](https://stackoverflow.com/questions/52137406/c-cli-access-structure-member/52148534#52148534) （VisualStudio2017 仍然暴露此行为/问题）

# android - Android 应用使用照片作为好友列表

> ID：13831774
> 
> 赞同：4
> 
> 时间：2012-12-12T02:20:03.097
> 
> 标签：android, list, photo

我正在尝试在一个 android 应用程序中创建一个朋友列表，我想将我手机上相册中的照片用作其他人可以看到的照片。我不知道如何解决这个问题，但我知道如何创建朋友列表。我只是不知道如何建立添加照片供其他人查看的联系。

目前使用 eclipse 来编写我的 android 应用程序。

# php - 目录内的 Mod_Rewrite 不正确匹配

> ID：13831782
> 
> 赞同：0
> 
> 时间：2012-12-12T02:20:59.523
> 
> 标签：php, mod-rewrite

所以我有一个根文件夹，因为它是 .htaccess （它是一个 WordPress 版本）：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我在其中有一个名为 safetytraining-2 的子目录。对子目录的请求工作正常，我在 safetytraining-2 中有一个名为 true.php 的文件，它的内容是这样的：

```
<html>
   <body>
      <?php var_dump($_GET);
      ?>
   </body>
</html> 
```

现在在 safetytraining-2 中，我有一个 .htaccess，我正在尝试用它来测试 mod_rewrite。这是它的内容：

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond  %{THE_REQUEST}      ^true\.php(.*)$
   RewriteRule  ^true\.php(.*)$     -                   [L]

   RewriteRule  ^(.*)$          true.php?p=$1       [L]
</IfModule> 
```

现在问题来了。当我访问 website.com/safetytraining-2/foobar 时，我得到以下输出：

```
array(1) { ["p"]=> string(8) "true.php" } 
```

这真的让我很困惑。我在第一条规则中加入了尝试阻止 apache 递归应用重写规则的条件，但我猜它没有帮助。无论我在 /safetytraining/ 之后放了什么，我都会不断得到这个输出。这里有什么帮助吗？您可以在 athanclark.com/safetytraining-2 查看该页面。任何帮助都是极好的！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:18:17.007

我刚刚想通了。**确保检查您的 Apache 版本！！！**1.x 版本不识别 Perl 兼容的正则表达式，而是使用 POSIX 扩展正则表达式。重写`.*`上面的 s`[A-Za-z0-9/=-_']+`为我工作。我将不得不阅读更多关于 POSIX 风格的内容，以了解如何接受句点 (.)，但它现在有效。

# java - Jasperreports - 两个子报表，相同的 jrxml，相同的 pojo 数据源

> ID：13831784
> 
> 赞同：0
> 
> 时间：2012-12-12T02:21:16.807
> 
> 标签：java, jasper-reports, datasource, ireport, pojo

我有一个使用 iReport 在 jasperreports 2.0.4 中创建的报告。我有两个子报告。这两个子报表共享相同的 jrxml。我将 jrxml 作为参数中的子报表的报表表达式传递。我有这个参数的代码

```
<parameter name="SUB_EXP" class="net.sf.jasperreports.engine.JasperReport"/> 
```

一切正常。问题在于两个子报表数据源

这些子报表的数据源来自作为参数传递的**相同POJO 列表**

```
<parameter name="SUB_SRC" class="com.mycompany.myapplication.core.persistence.MyListDataSource"/> 
```

这是两个子报表的子报表 jrxml 代码

第一

```
<subreport>
    <reportElement positionType="Float" x="0" y="0" width="570" height="1"/>
    <dataSourceExpression>
        <![CDATA[$P{SUB_SRC}]]>
    </dataSourceExpression>
    <subreportExpression class="net.sf.jasperreports.engine.JasperReport">
        <![CDATA[$P{SUB_EXP}]]>
    </subreportExpression>
</subreport> 
```

第二

```
<subreport>
    <reportElement positionType="Float" x="0" y="1" width="570" height="1"/>
    <dataSourceExpression>
        <![CDATA[$P{SUB_SRC}]]>
    </dataSourceExpression>
    <subreportExpression class="net.sf.jasperreports.engine.JasperReport">               
        <![CDATA[$P{SUB_EXP}]]>
    </subreportExpression>
</subreport> 
```

您会看到，这两个子报表具有相同的代码。

奇怪的是，两个子报表显示，但第一个子报表的数据不完整，而那些丢失的数据在第二个子报表中。预期的行为是，两个子报表应该是两个相同的完整数据。

我在这里面临某种并发问题吗？如果有人可以验证...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:46:44.780

只是在这里猜测，但也许您只看到完整的第一个子报告..？您不能在不倒带的情况下使用相同的数据源两次，请参阅： [如何在 JasperReports/iReport 中使用相同的数据源两次](https://stackoverflow.com/questions/7577409/how-to-use-the-same-datasource-twice-in-jasperreports-ireport)

# jquery - 文本和图像在同一行

> ID：13831797
> 
> 赞同：-1
> 
> 时间：2012-12-12T02:22:45.950
> 
> 标签：jquery, image, menu

我在修复基本代码时遇到了麻烦，我想也许你可以帮助我......请查看示例代码

```
<http://jsfiddle.net/Alidad/kkaYc/> 
```

如您所见，当您从菜单中选择图像时，它会在黄色背景上显示图像，然后您可以将标题名称放在文本字段中，它将如何在图像顶部显示标题名称。

但是，我试图弄清楚如何修复在同一行中显示所有内容，而不是第一行标题和第二行图像，而是首先显示标题名称和同一行中的图像！

我试图四处走动它不起作用。

任何想法！

是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:27:38.670

使用`span`代替`div`：

```
<span id="Displaytitle"></span>
<span id="image"></span> 
```

[http://jsfiddle.net/kkaYc/1/](http://jsfiddle.net/kkaYc/1/)

# rendering - 为什么一个人的身高 或者 不是 line-height CSS 属性的倍数？

> ID：13831801
> 
> 赞同：2
> 
> 时间：2012-12-12T02:23:26.103
> 
> 标签：rendering, css

我正在尝试为我的个人博客制作横格纸效果，但我遇到了一个障碍，让每一行都呈现在纸上的实际线条之一上。一切开始时都恰到好处，但随着行向下移动，舍入错误似乎越来越多。我将行高设置为 24px，并为 24px 的元素添加了填充，基本上只是试图确保任何增加高度的东西都是 24 的倍数，以便所有行都正确渲染。但我发现 chrome 并没有完全尊重 line height 属性。谁能解释下面的截图？

这基本上是我想要的效果，你可以看到它非常接近。 ![所需效果的插图](../Images/ca2afe97d003b6580f5aa2d153b84819.png)

但是如果你看一下 height 属性，它是 70.909...，而实际上它应该是 72 (24 * 3)。所以基本上我的问题是，为什么`<p>`[6char] 的高度不是行高的倍数？

![高度不是行高的倍数](../Images/1ddcf0f5ce916eaebb8578cfdb95083f.png)

`<p>`这是文本中元素的 CSS 计算样式：

```
font-size:16.363px;
height:70.909088;
line-height: 24px;
padding-top: 24px;
margin:0px;
padding-bottom:0px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:43:12.557

这是因为您的浏览器覆盖了默认文本大小。这很可能是由于您的缩放级别或您可能已打开的任何可访问性选项。

我创建了这个（你可以[在 jsFiddle 上查看](http://jsfiddle.net/FTNHw/1/)）：

```
<html>
<head>
<style type="text/css">
p {
    line-height: 24px;
}
</style>
</head>
<body>
<p>
three<br>
lines<br>
of text<br>
</p>
</body>
</html> 
```

Chrome 中的计算样式为：

```
display: block;
height: 72px;
line-height: 24px;
width: 1584px; 
```

按下`crtl+-`并重新加载页面会产生以下计算样式：

```
display: block;
height: 70px;
line-height: 23.981483459472656px;
width: 1761.8148193359375px; 
```

* * *

我能想到制作缩放级别不可知的横格纸主题的唯一方法是使用Javascript和[画布](http://www.w3.org/TR/html5/the-canvas-element.html#the-canvas-element)自己渲染纸张（或简单地根据行高[生成图像数据](http://www.codeproject.com/Articles/221941/HTMLImage-Generating-Dynamic-Image-using-Plain-Jav)）或者，自己调整缩放级别详细在这里：

[如何检测所有现代浏览器中的页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers)

# emacs - 向 emacs 主要模式添加功能

> ID：13831803
> 
> 赞同：1
> 
> 时间：2012-12-12T02:23:38.933
> 
> 标签：emacs, elisp

我写了一个 elisp 函数和一些`defvar`用于交互式添加 boost 单元测试宏的函数。由于它与 Boost 一起使用，因此只有在 c++ 模式下才需要它。目前它在我的初始化文件中，所以它总是在每种模式下加载。

我该如何做到这一点，以便此功能仅在 c++ 模式下可用，即好像我将它添加到主模式本身一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:04:16.190

如果您希望仅在需要时加载您编写的代码，您可以将其放入自己的文件中（例如`boost-unit-test.el`），然后`.emacs`您可以添加：

```
(eval-after-load "cc-mode" '(require 'boost-unit-test)) 
```

请注意，这假设文件在您的文件中，[`load-path`](https://stackoverflow.com/questions/7322246/adding-subdirectories-to-load-path)并且`(provide 'boost-unit-test)`是其中的一行。

现在，一旦这个文件被加载，那些变量和那些命令就会被全局定义，这就是 Emacs 的方式。这与您将代码留在`.emacs`文件中没有什么不同。而且，无论哪种方式，它只会被加载/评估一次（除非你强制它加载多次 - 但你必须努力做到这一点）。

# computer-science - dfa 的奇怪空字符串闭包

> ID：13831806
> 
> 赞同：0
> 
> 时间：2012-12-12T02:23:48.083
> 
> 标签：computer-science, finite-automata

[http://imgur.com/oQ6Yv](http://imgur.com/oQ6Yv)

有问题的闭包是该最终状态的闭包，我认为这与第一个状态的闭包相同，因为它们都缺少在空字符串上从各自状态的转换。最后的状态是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:06:32.233

什么都没有发生。如您所想，最终状态的关闭是状态本身 ( `q2`)。该行中的其他文本描述了符号`a`和状态的转换函数，`q0`与闭包 imo 无关。

# javascript - 尝试通过单击 jquery 幻灯片中的链接图像来更新页面的#content div的内容

> ID：13831808
> 
> 赞同：0
> 
> 时间：2012-12-12T02:24:12.497
> 
> 标签：javascript, jquery

尽管我是 jquery 的新手，但我真的很难过这一点。

我正在尝试创建一个页面，在该页面的顶部有产品的幻灯片放映，并且通过单击其中一个产品，该页面将使用来自我的服务器的页面更新主#content div。我正在使用 .load() 函数来获取 ajax 调用来调出页面。此外，我正在使用 event.preventDefault() 以便单击链接不会完全更改页面。

不知道我在这一点上做错了什么。任何帮助将不胜感激。

此外，我还在寻找其他插件来做我想做的事情，但没有成功。

到目前为止我所做的：

代码被粘贴到这个 jsfiddle 中，因为 stackoverflow 一直抱怨我没有正确格式化它。旋转木马也有 css，但这似乎工作正常。如果需要，我可以包含它

[http://jsfiddle.net/WDXMU/1/](http://jsfiddle.net/WDXMU/1/)

`<div id="wrap">`

`<div id="mycarousel" class="jcarousel-skin-tango">`

```
<ul>
  <li><a href="page1.html"><img src="img1.png"alt="" /></a></li>
  <li><a href="page2.html"><img src="img2.png"alt="" /></a></li>
  <li><a href="page3.html"><img src="img3.png"alt="" /></a></li>
  <li><a href="page4.html"><img src="img4.png"alt="" /></a></li>
  <li><a href="page5.html"><img src="img5.png"alt="" /></a></li>
</ul> 
```

`<div class="jcarousel-scroll">` `<form action="">` `<a href="#" id="mycarousel-prev">&laquo; Prev</a>` `<a href="#" id="mycarousel-next">Next &raquo;</a>` `</form>` `</div>`

`</div>` `<div id="content">` `Show the content` `</div>`

`</div>`

jquery 代码在小提琴中，因为堆栈溢出不喜欢它，即使前后有转义字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:51:09.413

我对您的 jsfiddle 进行了几处更改，首先将框架设置为 jQuery，这修复了`a`导航离开页面的标签，我从 javascript 窗口中删除了脚本标签，这清除了开头的垃圾输出，当您尝试获取 id 的元素时，我已经修复了 jQuery 选择器中缺少的 # `content`。

我已经在 jsfiddle 之外测试了代码，并且可以确认它现在对我有用，但在 jsfiddle 中不起作用，因为您链接到的页面在 jsfiddle 域中不存在。

[http://jsfiddle.net/WDXMU/11/](http://jsfiddle.net/WDXMU/11/)

# javascript - 创建一个由其他元素组成的临时元素 X？

> ID：13831810
> 
> 赞同：1
> 
> 时间：2012-12-12T02:24:17.193
> 
> 标签：javascript, jquery

我正在使用一个 jquery 打印插件，它能够从页面中打印出特定的元素。

如果我调用`$('.main-container').print();`它，它将打印出主容器中的所有元素。

但是，“主容器”中有许多元素我不想包含在传递给 print() 函数的元素中。

我的问题是，有没有一种方法可以将 3-4 个元素组合成一个元素并将该元素存储在一个变量中，这样我就可以将这个新元素传递给 print() 函数，而忽略所有我不想打印的元素？

就像是：

```
var $printThis = $('header').html();
$printThis += $('.middle-column').html();
$printThis += $('.footer').html();
$printThis.print(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-03T19:01:49.997

您可以使用 jQuery 函数`.append()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T02:30:25.837

使用 CSS @media 打印并隐藏您不想显示的节点。

# iphone - 为什么 MKMapView 不会停止显示用户位置？

> ID：13831812
> 
> 赞同：3
> 
> 时间：2012-12-12T02:24:30.377
> 
> 标签：iphone, ios, mkmapview

这与该主题的大多数问题有点相反。我的问题是没有让用户的位置显示；它让它停止显示。

我有一个 MKMapView 的视图。我将其区域设置为等于用户的当前位置，然后将其设置为不显示用户位置：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    AppDelegate *appDelegate=(id)[[UIApplication sharedApplication] delegate];
    [self.mapView setShowsUserLocation:NO];
    [self.mapView setRegion:MKCoordinateRegionMakeWithDistance([appDelegate.locationManager location].coordinate, 1000, 1000)];
    [self.mapView setUserTrackingMode:MKUserTrackingModeNone];
    /*Unrelated code*/
} 
```

即使我将此代码移至 ViewWill/DidAppear，它也不起作用。

我究竟做错了什么？我已经测试了 self.mapView 存在并且不为空——我什至运行了一个调试器命令“po [self.mapView removeFromSuperview]”来确认我拥有正确的 MKMapView（它消失了，正如预期的那样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:55:59.197

这实际上是一个模拟器错误。

事实证明，iOS 5 模拟器将位置引脚放入，即使它们不应该这样做。不会发生在设备上。

# ruby-on-rails - 使用 Rails 进行移动地理定位？

> ID：13831813
> 
> 赞同：1
> 
> 时间：2012-12-12T02:24:35.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, geolocation

目前我正在使用[Ruby Geocoder](https://github.com/alexreisner/geocoder)和[Sunspot](https://github.com/sunspot/sunspot)进行地理定位搜索。它适用于桌面浏览器，因为 IP 地址具有特定的坐标。但是对于移动浏览器，除非设备连接到 wifi，否则它不起作用，获取移动设备的纬度和经度坐标的最佳方法是什么？我希望有一个适用于台式机和移动设备的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:09:40.003

您可以使用 HTML 5 Geolocation，它不适用于旧浏览器，但对于那些不支持 Geolocation 的浏览器，您仍然可以使用 IP Geolocation 作为备份。

```
 if (navigator.geolocation) {
   var timeoutVal = 10 * 1000 * 1000;
   navigator.geolocation.getCurrentPosition(
     displayPosition, 
     displayError,
     { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
   );
 } else {
   alert("Geolocation is not supported by this browser");
 }

 function displayPosition(position) {
   alert("Latitude: " + position.coords.latitude + ", Longitude: " + position.coords.longitude);
 }

 function displayError(error) {
   var errors = { 
     1: 'Permission denied',
     2: 'Position unavailable',
     3: 'Request timeout'
   };
   alert("Error: " + errors[error.code]);
 } 
```

不知道你在做什么，但是通过js你可以尝试将用户位置和纬度存储在一个隐藏变量中，当他提交时，如果你收到纬度和经度，你就存储它，否则，你检查远程ip和通过 ip 进行地理定位（所以通过 ip 进行地理定位只是一个备份）。

# jquery - 如何解决“304未修改”警告？（jQuery UI，Ruby on Rails）

> ID：13831815
> 
> 赞同：-1
> 
> 时间：2012-12-12T02:24:43.357
> 
> 标签：jquery, ruby-on-rails, jquery-ui, ruby-on-rails-3.2

*注意：问题已被编辑。*

# 问题：

的添加`jQuery UI 1.9`导致网页***加载时间变慢***`Ruby on Rails 3.2`。

 **# 警告信息：

```
Started GET "/assets/jquery-ui-1.9.2.custom/development-bundle/ui/minified/i18n/
jquery.ui.datepicker-tj.min.js?body=1" for *[localhost]*
Served asset /jquery-ui-1.9.2.custom/development-bundle/ui/minified/i18n/jquery.
ui.datepicker-tj.min.js - 304 Not Modified (15ms) 
```

此协议消息确实会重复出现。如何`304 Not Modified`解决此警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:28:13.010

这是 Webrick 的一个问题。如果你`thin`改用，问题就会停止（而且，`thin`通常更快）

[https://rubygems.org/gems/thin](https://rubygems.org/gems/thin)

如果你完全准备使用 Webrick，你可以尝试使用[这个补丁](https://bugs.ruby-lang.org/attachments/2300/204_304_keep_alive.patch)

以后发帖时请只问一个问题。如果出现另一个错误，请将其附加到当前问题（如果它是相关的）（通常这是调试信息之类的东西）。否则，为它打开一个新问题。

就 304 而言，它并不是真正的警告，而只是信息。如果事情表现不正常，这可能是一个警告，但通常没关系。在这种情况下，304 告诉您的是内容被缓存并且没有被对服务器的请求修改。这样做是出于性能原因。如果你想让 304 消失，你可以尝试关闭 rails 中的缓存。但是，通常，rails 足够聪明，可以在您修改它时破坏缓存并将新资产发送给您。

这是[状态代码的参考](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

有关缓存的参考，您可能希望从[Rails Guide on Caching开始](http://guides.rubyonrails.org/caching_with_rails.html)**

# html - 50% 的内联块不相邻显示

> ID：13831819
> 
> 赞同：6
> 
> 时间：2012-12-12T02:25:44.060
> 
> 标签：html, css

说我有

```
<span class="ib-half"></span>
<span class="ib-half"></span> 
```

和

```
.ib-half {
    display: inline-block;
    width: 50%;
} 
```

我希望这两个跨度并排显示，但它们不会。没有边距、内边距或边框，那么问题出在哪里？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T02:50:28.577

Setting the **font-size** of the parent element to zero may be a fix.

HTML :

```
<div class = "parent">
    <span class="ib-half">Left</span>
    <span class="ib-half">Right</span>
</div> 
```

CSS:

```
span{
    background:#bdbdbd;
}

.ib-half {
    display: inline-block;
    width: 50%;
    font-size:10px;
}

.parent {
    font-size: 0;
} 
```

Check this fiddle. [http://jsfiddle.net/YpTMh/9/](http://jsfiddle.net/YpTMh/9/)

For more options please refer to [http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-12T02:25:44.060

实际问题是两个元素之间的空格（换行符）。因为它是一个 inline-block 元素，它注册了空间，所以它是 50% + 空间。

一些可能性：

```
<span class='left'>Left</span><!--
--><span class='right'>Right</span> 
```

或者`<span class='left'>Left</span><span class='right'>Right</span>`

或者

```
<span class='left'>Left</span><span
class='right'>Right</span> 
```

**`float: left;`或者对我来说，将其更改为`display: block`元素**可能最有意义。**我相信内联元素的本质是与带有一些额外空间信息的文本以相同的方式操作，那么为什么在没有理由的情况下变得 hacky 呢？**

 *** * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-03T19:14:04.900

good answer in css3 is:

```
white-space: nowrap; 
```

in parent node, and :

```
white-space: normal;
vertical-align: top; 
```

in div (or other) at 50%

exemple : [http://jsfiddle.net/YpTMh/19/](http://jsfiddle.net/YpTMh/19/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:47:33.997

希望这会有所帮助

```
 <div>    
        <span class="ib-half"></span>
        <span class="ib-half"></span>
    </div>

​
       div{
           width:50%;
           display:block;
       }
       .ib-half {
           margin:0;
           display:inline-block;
           width: 49%;
           height:100px;
          }​ 
```

here i am using a parent div and setting its width and display property to block. In the child block u can set the display property to inline-block, and if u want more span to be added the u can add by decreasing the width of the span block 100/(no: of blocks) -1 . You can also use float property to get the result.**

# python - 如何防止 matplotlib 注释被其他轴剪切

> ID：13831824
> 
> 赞同：6
> 
> 时间：2012-12-12T02:26:14.167
> 
> 标签：python, matplotlib

我在 matplotlib 中有一个带有多个子图（轴）的图，我想注释轴内的点。但是，后续轴会覆盖先前轴的注释（例如，subplot(4,4,1) 上的注释位于 subplot(4,4,2) 下）。我已经将注释 zorder 设置得又好又高，但无济于事：/

我使用了[Joe Kington](https://stackoverflow.com/users/325565/joe-kington)很棒的[DataCursor](https://stackoverflow.com/questions/4652439/is-there-a-matplotlib-equivalent-of-matlabs-datacursormode/4674445#4674445)的修改版本来进行注释。

任何帮助将不胜感激

这是一个例子： ![在此处输入图像描述](../Images/38c2c12943a22e2920b4b4a78626c5b9.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T03:38:28.210

一种方法是`annotate`从轴中弹出由创建的文本并将其添加到图形中。这样它将显示在所有子图的顶部。

作为您遇到的问题的一个简单示例：

```
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=5, ncols=5)
plt.setp(axes.flat, xticks=[], yticks=[], zorder=0)

ax = axes[0,0]
ax.annotate('Testing this out and seeing what happens', xy=(0.5, 0.5), 
            xytext=(1.1, .5), textcoords='axes fraction', zorder=100)

plt.show() 
```

![在此处输入图像描述](../Images/5bf7589762ea62bc0148451a95c9c1d3.png)

如果我们只是将文本对象从轴中弹出并将其添加到图形中，它将位于顶部：

```
import matplotlib.pyplot as plt

fig, axes = plt.subplots(nrows=5, ncols=5)
plt.setp(axes.flat, xticks=[], yticks=[], zorder=0)

ax = axes[0,0]
ax.annotate('Testing this out and seeing what happens', xy=(0.5, 0.5), 
            xytext=(1.1, .5), textcoords='axes fraction', zorder=100)

fig.texts.append(ax.texts.pop())

plt.show() 
```

![在此处输入图像描述](../Images/af2a36a6eb334241f22ed742bab0fdf1.png)

您提到了该`DataCursor`片段，并且您想更改`annotate`方法：

```
def annotate(self, ax):
    """Draws and hides the annotation box for the given axis "ax"."""
    annotation = ax.annotate(self.template, xy=(0, 0), ha='right',
            xytext=self.offsets, textcoords='offset points', va='bottom',
            bbox=dict(boxstyle='round,pad=0.5', fc='yellow', alpha=0.5),
            arrowprops=dict(arrowstyle='->', connectionstyle='arc3,rad=0')
            )
    # Put the annotation in the figure instead of the axes so that it will be on
    # top of other subplots.
    ax.figure.texts.append(ax.texts.pop())

    annotation.set_visible(False)
    return annotation 
```

我还没有测试最后一点，但它应该可以工作......

# hibernate - Hibernate Search 是否允许集成 lucene 收集器？

> ID：13831830
> 
> 赞同：2
> 
> 时间：2012-12-12T02:26:46.603
> 
> 标签：hibernate, search, hibernate-search

我们正在使用 Hibernate Search 在我们的应用程序中进行全文搜索。自定义字段被标记到 lucene 索引中。数据库中的自定义字段实际上包含诸如“材料：铁、银；颜色：红、蓝”之类的值。我怎样才能得到像铁（7），银（6），红（1），蓝（9）这样的刻面结果。

我做了一些研究，表明我们可以在 lucene 中使用 Collector 来实现这一点。但我不确定 Hibernate Search 是否支持 Collector 集成。

# eclipse - Eclipse - Clojure - 逆时针插件 - 在 REPL 命名空间（不是文件命名空间）中评估选择的快捷方式

> ID：13831833
> 
> 赞同：0
> 
> 时间：2012-12-12T02:26:59.857
> 
> 标签：eclipse, clojure, shortcut, read-eval-print-loop, counterclockwise

假设我的第一个文件/命名空间包含以下内容：

```
(ns a) 
```

我运行它来获得一个带有“Clojure/Load File in REPL”的repl

然后我使用以下内容打开第二个文件/命名空间：

```
(ns b)

(ns c)

(println *ns*) 
```

假设我选择`(ns b)`并按下 Command-Enter（在我的 Mac 上 - 在 Windows 上将是 CTRL-enter）。然后我选择`(ns c)`并按Command-Enter。

然后我选择`(println *ns*)`并点击 command-enter - 然后我得到：

```
#<Namespace b> 
```

因为快捷方式 Command-Enter 不是在 repl 命名空间中而是在文件命名空间中计算突出显示的文本。

是否有评估 repl 命名空间中选择的快捷方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:40:17.413

看起来不像[，](https://code.google.com/p/counterclockwise/wiki/EditorKeyBindingsFeatures#Interaction_with_the_REPL)不是直接的。但是，有一个快捷方式可以将 repl 切换到当前文件的命名空间，然后您就可以执行代码了。

# python - 在 Python 中准确地将 19 位字符串转换为数字

> ID：13831836
> 
> 赞同：0
> 
> 时间：2012-12-12T02:27:12.030
> 
> 标签：python, numpy

我有一个大数据文件，其中的数字列由空格分隔。我想将它们作为一个 numpy 数组读入。

我曾经`numpy.loadtxt(filename)`读过文件。当代码试图将这个 19 位字符串转换为数字时，问题就出现了；看来只能准确表示前17位数字了。

这是一个简化的示例：

```
from StringIO import StringIO
import numpy as np 

#use this s string to mimick the input txt file
s = StringIO('1237657220412736271 39843.3948')
arr = np.loadtxt(s)
print int(arr[0]) 
```

如果你运行它，你会得到

```
1237657220412736256 
```

我知道可以指定您所拥有的数据类型`np.loadtxt()`，但即使我指定它以将第一个数字读取为长整数，它仍然无法准确表示 19 位数字字符串。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:40:30.390

> 即使我指定它将第一个数字读取为长整数

好吧，鉴于您的第二个值是浮点数，我不确定您是如何使用单一类型做到这一点的。但是把它拿走，你*可以*将第一个数字读为更长的整数类型，一切正常：

```
>>> s = cStringIO.StringIO('1237657220412736271 39843')
>>> arr = np.loadtxt(s, dtype='i8')
>>> int(arr[0])
1237657220412736271 
```

同样，如果您指定异构格式，例如`('i8', 'f8')`并输入原始字符串，则可以很好地处理原始字符串。

所以，我怀疑你没有做你认为你做的事，这就是为什么它没有奏效。

另一种可能性是，“长整数”的字面意思是“C long”，并且您使用的是 32 位平台或 64 位 Windows，这意味着 32 位数字。但我敢肯定`numpy`，这种类型又被淘汰了很久——而且，如果他们不这样做，它会给你带来与你所看到的不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:49:41.933

当您调用 时`np.loadtxt`，它假定文件中的所有元素都是浮点数。当您将其转换回整数时，这会导致精度问题。您可以指定一个结构化数组 read in `np.loadtxt`，这将使它能够读取具有不同数据类型的不同列：

```
arr = np.loadtxt(s, dtype={'names': ('ints', 'floats'),
                                     'formats': ('i8', 'f8')}) 
```

这里的区别是你得到一个结构化数组而不是给定数据类型的二维数组。您必须以不同的方式对其进行索引（按名称或索引号），但您可以检查整数是否被正确读取：

```
>>> int(arr[0][0])
1237657220412736271
>>> int(arr['ints'][0])
1237657220412736271 
```

（请注意，此语法会因您的特定字符串而失败，`s`因为它只有一行并且会给出一个 0-d 数组，但它适用于多于一行的文件。）

另一种选择是执行两次加载`np.loadtxt`，每列一个：

```
arr1 = np.loadtxt(s, dtype='i8', usecols=(0,))
arr2 = np.loadtxt(s, dtype='f8', usecols=(1,)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:42:42.867

我试过这个：

```
>>> s = '1237657220412736271 39843.3948'
>>> a = s.split()
>>> int(a[0])
1237657220412736271 
```

不幸的是，当 numpy 将 19 位数字读取为浮点数时，没有足够的精度来获取所有有效数字，因此存在舍入误差。如果你知道这个数字总是适合一个`int`但太大而不能精确地用双精度表示，你可能需要像我上面所做的那样做一些事情来解决这个限制。

# php - PHP HTML表格语法错误

> ID：13831839
> 
> 赞同：-1
> 
> 时间：2012-12-12T02:27:38.747
> 
> 标签：php, html, mysql, html-table

我正在尝试将这些数据放入表格中，以便在我的网站上更好地查看它，但我并不真正了解如何将 PHP 和 HTML 结合起来，我收到了这个错误：

> 解析错误：语法错误，意外的 ';'

我不知道我是否将它们组合错了所以这是我的代码并告诉我是否需要提供比这行代码更多的内容：

```
<h2>Featured Event's</h2>
<body>
<table cellpadding="10">
<tbody>
<?php echo ?><td><?php $eventname ?></td><?php echo?><td><?php $row_id ?></td><?php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:29:06.247

```
<td><?php echo $eventname ?></td><td><?php echo $row_id ?></td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:33:19.233

您可以这样做或这样做：

```
<td><?php echo $eventname ?></td><td><?php echo $row_id ?></td> 
```

或者

```
<?php echo "<td>$eventname</td><td>$row_id</td>"; ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T02:35:01.097

你不能`"`用`?>`. `?>` *结束*PHP 上下文并终止打开的任何语句。`<?php`和之间的一切都`?>`需要是一个或多个*完整*的陈述。

选择以下之一：

```
<?php

echo "<td>$eventname</td><td>$row_id</td></tr>" 
```

或者

```
<tr>
  <td><?= $eventname ?></td>
  <td><?= $row_id ?></td>
</tr> 
```

* * *

您还缺少一个 opening `<tr>`，这不是可选的。

# c++ - 为结构动态分配内存

> ID：13831840
> 
> 赞同：2
> 
> 时间：2012-12-12T02:27:54.437
> 
> 标签：c++, memory, structure

我正在尝试动态分配一个结构，并且需要知道我是否做得对。根据我的书，我是。但是我的编译器给了我一个错误。以下是相关代码：

```
#include <iostream>
#include <string>
#include <cstdlib>  
#include <iomanip>

using namespace std;

//Declare structure
struct Airports{
    string name;
    string airID;
    double elevation;
    double runway;};

Airports *airptr;

airptr = new Airports[3];//This is where the error is happening 
```

编译器似乎认为 airptr “没有存储类或类型说明符”。当我定义一个结构，然后将 airptr 定义为指向该结构的指针时，我不明白这是怎么回事。我在这里错过了什么吗？

提前感谢您的任何回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:44:45.177

在我写这篇文章时，问题中提供的代码是……

```
#include <iostream>
#include <string>
#include <cstdlib>  
#include <iomanip>

using namespace std;

//Declare structure
struct Airports{
    string name;
    string airID;
    double elevation;
    double runway;};

Airports *airptr;

airptr = new Airports[3];//This is where the error is happening 
```

对于函数外部的非声明语句，编译器尝试将其解释为声明，但失败了。

把它放在一个`main`函数中。

* * *

此外，通过使用`std::vector`而不是原始数组、指针和`new`，您将避免很多错误和痛苦的工作。

# python - 链接到 Excel 工作表并检查条件何时为真的 Python 脚本

> ID：13831841
> 
> 赞同：1
> 
> 时间：2012-12-12T02:27:56.090
> 
> 标签：python, excel

我正在尝试编写一个 python 脚本，该脚本链接到一个带有温度列表的不断更新的 Excel 表。我们在 15 个国家/地区设有站点，它们每隔 10 分钟记录一次海洋/大气温度并将其发送给我们，它每天 24/7/365 运行。excel 文件有 10 列宽和几千行长，每 10 分钟就有一个新行带有新数字。当温度之间的差异变化太快或太慢时，我们会担心，我们会不断地手动检查。我们有几十个条件，我们不断地手动监控和检查，通常只是检查一列中的最新行，看看它是否在某个（2 度）范围内，从比最新行高 50 或 100 或 1000 行的行排。有没有人用过类似的东西？我基本上想编写一个始终运行并检查几个条件是否为真的脚本。我希望能够将 40 或 50 个条件写入脚本，只要其中一个条件为真，我就会收到诸如“条件编号 8 现在为真”之类的通知。关于我可以使用的专门用于此目的的 python 库或书籍的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:34:24.320

首先，如果它是一个由实际数据库支持的 web 应用程序，听起来你的系统会好得多。到目前为止，根据您的问题描述创建这将是微不足道的。除此之外，这看起来像你想要的：http: [//www.python-excel.org/](http://www.python-excel.org/)

使用 cron 作业（或计划任务，如果你在 Windows 上）运行你的脚本，你应该是黄金。

# java - 如何在我的 Java 代码中使用 Apache Ant 的任务

> ID：13831846
> 
> 赞同：2
> 
> 时间：2012-12-12T02:28:31.973
> 
> 标签：java, ant, scp

我想在我的代码中使用 Ant 的一项任务 (scp)。有什么办法吗？

我是否应该简单地引用 Ant 的库之一并直接从我的代码中调用 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T03:02:19.103

是的，您可以很容易地从您的代码中调用 Ant 任务。

下面是一个如何扩展 Ant 任务的示例：

```
import org.apache.tools.ant.Project;
import org.apache.tools.ant.Target;
import org.apache.tools.ant.taskdefs.Copy;

public class MyCopyTask extends Copy {
    public MyCopyTask() {
        setProject(new Project());
        getProject().init();
        setTaskName("MyCopy");
        setTaskType("MyCopy");
        setOwningTarget(new Target());
    }
} 
```

以下是如何在您的代码中使用它：

```
MyCopyTask copier = new MyCopyTask();
copier.setFile(srcFile);
copier.setTofile(toFile);
copier.execute(); 
```

* * *

这里有更多信息：

*   [http://ant.apache.org/manual/antexternal.html](http://ant.apache.org/manual/antexternal.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:39:29.737

这肯定会在您的 Java 代码中包含 Ant 任务。作为最后的手段，我们以前曾这样做过。一个问题是您可能会设置一些 Ant 特定的属性（例如 setProject）以使任务实际工作。这可能会使其使用起来有点尴尬。此外，正如您所提到的，您可能需要 Ant 运行时库来运行它。

我的第一个建议是看看是否有一种方法可以直接调用您想要的实际 SCP 代码，而无需 Ant 开销。第二种选择是寻找 Java SCP 库或找出 Ant scp 任务正在使用什么。有关更多示例，请参阅[scp via java 。](https://stackoverflow.com/questions/199624/scp-via-java)最后的建议是包含上述 Ant 任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:39:32.060

我认为调用系统调用会更简单：

```
try {
            Runtime.getRuntime().exec("ant scpTask");
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:49:22.327

我认为`Runtime.getRuntime().exec("ant deploy");`取决于您的操作系统，如果您只是在一个固定的操作系统中运行它，这确实是一种更简单的方法来获得您想要的东西。:)

# php - php ecplise 断点不会停止

> ID：13831849
> 
> 赞同：1
> 
> 时间：2012-12-12T02:28:42.720
> 
> 标签：php, eclipse, joomla, xampp, xdebug

我第一次尝试使用调试器。在 Windows 7 上，eclipse 版本：Juno Service Release 1。我正在尝试使用我的本地主机服务器。为此，我安装了 XAMPP 1.8.0 和 PHP 5.4.4。

我正在按照以下示例进行操作

[http://docs.joomla.org/Setting_up_your_workstation_for_Joomla!_development](http://docs.joomla.org/Setting_up_your_workstation_for_Joomla!_development)

特别是第三步，“为 joomla 开发配置 eclipse”（如您所见，这是一个非常详细的示例）。

所以，我也设置了 php 行

```
[XDebug]
;; Only Zend OR (!) XDebug
zend_extension = C:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll
xdebug.remote_enable=true
xdebug.remote_host=localhost
xdebug.remote_port=10000
xdebug.remote_handler=dbgp
xdebug.profiler_enable=0
xdebug.profiler_output_dir="C:\xampp\tmp" 
```

并在 Windows->Preferences-> PHP -> Debug / Default Setting / PHP Debugger = XDebug 中相应地设置了端口号，并配置了端口，XDebug 为 100000，Zend Debugger 为 10001，就像在示例中一样。

还访问了[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)并给出了整个 phpinfo() 输出。他们建议下载 php_xdebug-2.2.1-5.4-vc9.dll。完成后放入

```
C:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll 
```

并从 XAMPP 控制面板 V3.0.12 重新启动 apache。我做对了，因为在 xdebug.org 上重复了测试，它现在给了我：

```
"You're already running the latest Xdebug version". 
```

因此，问题不是这样出现的。

毕竟，当我在文件 test.php 的第二行设置断点时，读取

```
"echo this is a test of XDebug" 
```

运行到执行结束，显示 phpinfo() 输出。还检查了 Windows -> Preferences -> PHP -> Debug / Break 在第一行。

没什么，我已经在里面呆了 3 天了！拜托，任何人都可以告诉我为什么调试器在任何情况下都不会停止（既不在第一行，也不在断点处）。

任何帮助将不胜感激，请帮助。谢谢你的时间。

卡尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T18:19:13.210

我在 Windows 系统上遇到过类似的问题。Eclipse 断点适用于任何 php 命令行项目，但不适用于任何 Web 应用程序。我花了两个小时来解决这个问题。请检查您的 Web 服务器是否正在侦听 127.0.0.1 地址而不是“localhost”。为什么 ？因为从 Vista 开始，Windows 使用 ipv4 连接到 127.0.0.1，而使用 ipv6 连接到“localhost”地址。

因此，解决方案是在所有调试堆栈上使用 ipv4：

启动 php 内置网络服务器（任何或其他）以侦听 127.0.0.1

php -S 127.0.0.1:80 c:\Users\Borgo\workspace

此外考虑将其添加到您的 eclipse.ini 中：

-Djava.net.preferIPv4Stack=true

我希望这会帮助你

来自意大利的问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T00:38:52.367

我已经让断点与 Eclipse 和 XDebug（Xamp 服务器）一起工作。以下是详细步骤

[http://programmersjunk.blogspot.com/2013/05/eclipse-and-xdebug.html](http://programmersjunk.blogspot.com/2013/05/eclipse-and-xdebug.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T12:48:47.620

似乎有几个问题可能是这个问题的根源。就我而言，*路径映射*是问题所在。要修复它，请访问：

`Debug Configurations -> PHP Web Application -> Server -> Configure -> Path Mapping`

并选择

*不要映射以下...*

因为 Eclipse 可以自己完成这一切。因此，删除映射使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T04:22:41.913

您没有指定如何在 Eclipse 中启动调试会话。所以，让我们从那里开始：

有两种启动方式：

1.  `Run->Debug`使用Eclipse 确定调试/运行的菜单选项或
2.  `Run->Debug Configurations...->Debug button`您指定流程的位置

通常使用 Joomla 之类的应用程序！您需要指定前端调试配置和单独的后端调试配置（因为它们具有不同的入口点）。

对于您的测试文件，您应该能够右键单击它并选择该`Debug as...`选项并让它在第一个断点处停止。

如果您正在执行所有这些操作但仍然无法正常工作，那么我首先要检查的是`Run`菜单并确保`Skip All Breakpoints`未检查菜单项。

之后检查`phpinfo()`一个**`xdebug`**部分的结果（我意识到你已经表明你已经设置`php.ini`了 xdebug 参数，但值得检查）。

如果失败，请搜索您并查找可能有冲突`php.ini`的其他条目...`zend_extension`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-25T17:51:05.303

按照以下说明检查您的 xdebug 是否工作正常（php -i）：[https ://xdebug.org/wizard.php](https://xdebug.org/wizard.php)

在 Eclips 上，单击窗口 > 显示视图 > 断点。然后单击“添加 PHP 异常断点”。选择你想要的。

开始调试。

# database - magento 可以为产品使用不同的多个数据库吗？

> ID：13831851
> 
> 赞同：0
> 
> 时间：2012-12-12T02:28:58.990
> 
> 标签：database, magento

我在 Magento 有多家商店，每家商店都有不同的域名。

我想知道 Magento 是否可以读取 2 个或更多不同的数据库，例如每个商店的产品和目录？

因为默认的 Magento 只是在一个数据库中输入每个商店的所有产品，我认为这很慢......

有谁能够帮我？

谢谢

问候

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:39:46.567

我不熟悉 Magento，也不喜欢使用多个数据库，但你可以在这里查看这篇文章：

[如何在一个网页上连接多个 MySQL 数据库？](https://stackoverflow.com/questions/274892/how-do-you-connect-to-multiple-mysql-databases-on-a-single-webpage)

您也可以在数据库中使用不同的表并在查询中输入如下内容：

```
$query = mysql_query("SELECT * FROM table1") 
```

类似的东西

# java - 在 Java 中使用 Iterator 的多个 If 条件

> ID：13831852
> 
> 赞同：1
> 
> 时间：2012-12-12T02:29:00.220
> 
> 标签：java, collections, iterator

我有一个包含元素 1 到 10 的列表。我尝试从中删除素数 2、3、5、7，然后使用迭代器打印列表的其余部分。但是这段代码抛出了 **NoSuchElementException**。这是我的代码：

```
public static void editerate2(Collection<Integer> list3)
{
    Iterator<Integer> it=list3.iterator();
    while(it.hasNext())
    {
        if(it.next()==2 || it.next()==3 || it.next() ==5 || it.next()==7 ) 
        {
            it.remove();
        }
    }
    System.out.println("List 3:");
    System.out.println("After removing prime numbers  : " + list3);
} 
```

这样做的正确方法是什么？还有使用“|”有什么区别 和“||” ？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T02:30:44.687

每次调用`it.next()`迭代器时都会前进到下一个元素。

我假设这**不是**你想做的。

你应该这样做：

```
Iterator<Integer> it = list.iterator();

while (it.hasNext()) {
    Integer thisInt = it.next();
    if (thisInt == 2 || thisInt == 3 || thisInt == 5 || thisInt == 7) {
       it.remove();
    }
} 
```

* * *

## 之间的区别 | 和||：

如果您使用`||`并且第一部分为真，则不会评估第二部分。

如果您使用`|`这两个部分，将始终进行评估。

这对于这样的情况很方便：

```
if (person == null || person.getName() == null) {
    // do something
} 
```

`|`如果您使用并且 person 为 null ，上述代码段将抛出 NullPointerException 。

那是因为它将评估条件的两个部分，而后半部分将取消引用空对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:33:53.940

您希望避免多次调用您的迭代器，因为这会将其推进到下一个元素。

您*可以*做的是保留每次迭代获得的值，然后进行比较。

```
while(it.hasNext()) {
    Integer next = it.next();
    if(next == 2 || next == 3 || next == 5 || next == 7 ) {
        it.remove();
    }
} 
```

# java - JButton 与 JPanel 上的图像与图像未正确呈现

> ID：13831854
> 
> 赞同：2
> 
> 时间：2012-12-12T02:29:12.443
> 
> 标签：java, swing, jpanel, jbutton, paintcomponent

好的，我又来了。

我有一个 JPanel，我在其上覆盖`paintComponent()`并绘制了一个自定义 bufferedImage，以为我的 JPanel 提供背景图像。我也有一个 JButton，我做了同样的事情，以便创建一个具有自定义形状的按钮。问题是，虽然 JButton 似乎已正确添加到带有背景图像的 JPanel，但它没有正确绘制。

我可以从按钮获取输入，就好像它确实存在一样，但它实际上并没有显示出来，而它在标准 JPanel 上显示。下面是一个例子。

提前感谢您的帮助。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Test {
    public static void main (String[] args){
        final JFrame frame = new JFrame();
        DrawPanel panel1 = new DrawPanel(createBufferedImage("background.png"));
        JPanel panel2 = new JPanel();

        DrawButton button1 = new DrawButton(createBufferedImage("button.png"));
        button1.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae){
                JOptionPane.showMessageDialog(frame, "input detected, button1");
            }
        });

        DrawButton button2 = new DrawButton(createBufferedImage("button.png"));
        button2.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae){
                JOptionPane.showMessageDialog(frame, "input detected, button2");
            }
        });

        panel1.add(button1);
        panel2.add(button2);
        frame.getContentPane().add(panel1, BorderLayout.NORTH);
        frame.getContentPane().add(panel2, BorderLayout.CENTER);
        frame.validate();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    protected static BufferedImage createBufferedImage(String path){
        File img = new File(path);
        BufferedImage bi = null;
        try{
            bi = ImageIO.read(img);
        }
        catch (IOException ioe){
            throw new RuntimeException();
        }
        BufferedImage newImage = new BufferedImage(bi.getWidth(), bi.getHeight(), BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = newImage.createGraphics();
        g2d.drawImage(bi, 0, 0, null);
        g2d.dispose();  
        return newImage;
    }
}

class DrawPanel extends JPanel{

    private BufferedImage bg; 

    public DrawPanel(BufferedImage bg){
        this.bg = bg;
        new JPanel();
        setPreferredSize(new Dimension(bg.getWidth(), bg.getHeight()));
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(bg, 0, 0, null);
        g.dispose();
    }
}

class DrawButton extends JButton{

    private BufferedImage bi;

    public DrawButton(BufferedImage bi){
        setPreferredSize(new Dimension(bi.getWidth(), bi.getHeight()));
        this.bi = (BufferedImage) bi;
        setContentAreaFilled(false);
    }

    @Override
    public Dimension getPreferredSize(){
        return new Dimension(bi.getWidth(), bi.getHeight());
    }

    public BufferedImage getIconImage(){
        return bi;
    }

    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(bi, 0, 0, null);
        g.dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T02:31:33.970

切勿对 JVM 提供给您的 Graphics 对象调用 dispose，仅对您自己创建的 Graphics 对象调用。

所以这没关系：

```
 BufferedImage newImage = new BufferedImage(bi.getWidth(), bi.getHeight(), 
         BufferedImage.TYPE_INT_ARGB);
    Graphics2D g2d = newImage.createGraphics();
    g2d.drawImage(bi, 0, 0, null);
    g2d.dispose(); 
```

但这不是：

```
protected void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawImage(bg, 0, 0, null);
    g.dispose();
} 
```

JVM 可能（并且可能会）需要使用该对象进行进一步的绘制，包括绘制容器的子组件，如果您将其丢弃，则可以防止这种情况发生。

另一个建议：考虑覆盖 getPreferredSize，而不是 setPreferredSize。所以而不是这个：

```
setPreferredSize(new Dimension(bg.getWidth(), bg.getHeight())); 
```

考虑：

```
@Override
public Dimension getPreferredSize() {
  if (bg == null) {
    return super.getPreferredSize();
  } else {
    return new Dimension(bg.getWidth(), bg.getHeight());
  }
} 
```

这样，组件的首选大小就可以可靠地设置，并且组件的任何用户都无法更改它。

# c++ - 在多个自动重置事件上使用 WaitForMultipleObjects

> ID：13831855
> 
> 赞同：1
> 
> 时间：2012-12-12T02:29:13.640
> 
> 标签：c++, windows, multithreading, winapi

在我的一个项目中，我创建了多个`auto reset events`和两个线程，这些线程用于`WaitForMultipleObjects`在继续运行之前等待某些事件，例如：

```
HANDLE  hTerminateEvent = CreateEvent(...); // auto reset
HANDLE  hStateChangedEvent = CreateEvent(...); // auto reset

void thread1Func()
{
    HANDLE  handles[2] = { hTerminateEvent, hStateChangedEvent };
    WaitForMultipleObjects(2, handles, FALSE/*bWaitAll*/, INFINITE);
    ...
}

void thread2Func()
{
    HANDLE  handles[2] = { hTerminateEvent, hStateChangedEvent };
    WaitForMultipleObjects(2, handles, FALSE/*bWaitAll*/, INFINITE);
    ...
} 
```

我以前认为一旦`hTerminateEvent`被单打，两个线程都会被唤醒，但对于自动重置事件似乎并非如此，一个被唤醒的事件是随机的，在一个唤醒后，它将重置`hTerminateEvent`为未发出信号。

我的问题是如何解决这个问题：通过使用手动重置事件？或者是否有任何设计可以解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:59:12.123

如果您希望两个线程都做出反应，`hTerminateEvent`则必须将其设置为手动重置。大概您将它用作告诉多个线程自行终止的信号，因此无论如何将其设置为自动重置是没有意义的。与 相同`hStateChangedEvent`。

如果您阅读[`CreateEvent()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396.aspx)文档，它会说：

> bManualReset [in]
> 
> 如果此参数为 TRUE，则该函数创建一个手动重置事件对象，该对象需要使用 ResetEvent 函数将事件状态设置为无信号。如果此参数为 FALSE，则该函数创建一个自动重置事件对象，**系统会在释放单个等待线程后自动将事件状态重置为 nonsignaled**。
> 
> ...
> 
> 当**手动重置**事件对象的状态发出信号时，**它会一直保持信号状态，直到它被 ResetEvent 函数显式重置为非信号状态。任何数量的等待线程，或随后开始为指定事件对象等待操作的线程，都可以在对象状态发出信号时被释放**。
> 
> 当**自动重置**事件对象的状态发出信号时，**它会保持信号状态，直到释放单个等待线程；然后系统自动将状态重置为 nonsignaled**。如果没有线程在等待，则事件对象的状态保持信号状态。

因此，当使用自动重置事件时，您无法唤醒同时等待它的多个线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:42:55.193

您可以使用信号量代替事件，并使用 ReleaseSemaphore() 并传入等于线程数的计数。

# c - c语言中的二进制数转换

> ID：13831859
> 
> 赞同：0
> 
> 时间：2012-12-12T02:30:06.747
> 
> 标签：c

> **可能重复：**
> [是否有 printf 转换器以二进制格式打印？](https://stackoverflow.com/questions/111928/is-there-a-printf-converter-to-print-in-binary-format)

是否有任何内置函数可以将十进制数转换为二进制数？二进制数是否有任何格式说明符？对于十六进制它是 %x 和二进制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:31:08.220

不，C 没有内置的二进制转换函数。但是，它们并不难编写，并且是一个很好的练习，可以证明您对二进制算术的理解。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T03:12:04.693

一些 libc 将其作为扩展名（您可以 printf a %b ）但是如果您只需要二进制文件的字符串表示，这里是一个基本的宏实现

```
#define putbin(d) do{ \ 
  unsigned long long i=1ULL<<63; \ 
  while (!((unsigned long long) d & (i/=2))); /* optional - remove leading zeroes */ \ 
    do { ( (unsigned long long) d & i) ? write(1,"1",1) : write(1,"0",1); } \
    while (i/=2); \ 
write(1,"\n",1); /* optional - add new line */ \ 
} while (0) 
```

# php - 有没有在不使用临时目录的情况下上传文件？

> ID：13831867
> 
> 赞同：2
> 
> 时间：2012-12-12T02:30:55.327
> 
> 标签：php, file-upload

我使用 http 使用 HTML5 分块文件 api 创建了文件传输网站。它工作正常，除了在上传文件期间，服务器的 CPU 使用率几乎是 100%。此文件传输将用于平均上传文件 4GB 左右。

我的猜测是它几乎占用了 100% 的 cpu 使用率，因为它试图将文件从 tmp 目录移动到目标目录。

有没有在不使用临时目录的情况下上传文件？

我的问题是针对 PHP 但其他语言将被接受

这是上传文件期间“top”命令的结果（18mb、38mb、60mb、33mb）

```
 1904 apache    20   0 33504 5740 1952 R 28.3  0.2   0:02.19 httpd
 1905 apache    20   0 33504 5740 1952 R 28.3  0.2   0:01.99 httpd
 1903 apache    20   0 33232 6968 3060 R 28.0  0.2   0:01.98 httpd
 1910 apache    20   0 33240 6020 2248 S 11.5  0.2   0:02.85 httpd
 2133 root      20   0  2656 1124  896 R  1.6  0.0   0:00.71 top
    1 root      20   0  2864 1404 1188 S  0.0  0.0   0:03.99 init 
```

它表明 httpd 占用了所有资源。如果不是因为将文件复制或上传到服务器，有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:45:42.930

如果您确定从 tmp 移动到目标是问题，您可以更改 php.ini 设置 (upload_tmp_dir) 以将 tmp 目录移动到与目标目录相同的目录中的另一个目录。

不要只是在您的脚本中更改它，当您的脚本运行时，该文件已经上传。

只需在 php.ini 中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:45:50.613

我认为您应该对您的应用程序进行更多分析，因为移动文件不会显着占用 CPU。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T04:42:11.223

对于 4GB 这么大的文件，您可能会考虑设置一个 websocket 来为您的应用程序流式传输。

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-resumable-video-uploade-in-node-js/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:42:29.433

您可以使用 http put 方法来处理文件上传。在这种方法中，数据直接流式传输到 PHP 脚本，您可以使用文件函数处理它：

```
<?php
$f = fopen('php://input','r');
while(!feof($f)){
    $chunk = fread($f,CHUNK_SIZE);
    [Handle the uploading file here]
}
fclose($f);
?> 
```

（将 CHUNK_SIZE 替换为您的值）

# c++ - C++ 字符串为什么不能用作 char 数组？

> ID：13831869
> 
> 赞同：7
> 
> 时间：2012-12-12T02:31:07.410
> 
> 标签：c++

```
int main()
{    
    string a;

    a[0] = '1';
    a[1] = '2';
    a[2] = '\0';

    cout << a;
} 
```

为什么这段代码不起作用？为什么不打印字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T02:36:06.563

因为`a`是空的。如果您尝试对空数组执行相同的操作，则会遇到同样的问题。你需要给它一些大小：

```
a.resize(5); // Now a is 5 chars long, and you can set them however you want 
```

或者，您可以在实例化时设置大小`a`：

```
std::string a(5, ' '); // Now there are 5 spaces, and you can use operator[] to overwrite them 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T02:38:06.717

首先，我认为你的意思是`std::string`。

其次，您的字符串为空。

第三，虽然您可以使用 operator[] 更改字符串中的元素，但不能使用它插入不存在的元素：

```
std::string a = "12";
a[0] = '3'; //a is now "32"
a[2] = '4'; //doesn't work 
```

为此，您需要先确保您的字符串已分配足够的内存。因此，

```
std::string a = "12";
a[0] = '3'; //a is now "32"
a.resize(3); //a is still "32"
a[2] = '4'; //a is now "324" 
```

第四，您可能想要的是：

```
#include <string>
#include <iostream>
int main()
{    
    std::string a = "12";    
    std::cout << a;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T02:34:40.107

不支持使用`operator[]`向字符串添加字符。出现这种情况有多种原因，但其中之一是：

```
string a;
a[1] = 12; 
```

应该`a[0]`是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T02:34:50.000

在 C++ 中，字符串是对象，而不是数组。尝试：

```
string a = "12";
cout << a; 
```

如果您愿意，您仍然可以使用旧式 C 字符串，因此：

```
char a[3];
a[0] = '1';
a[1] = '2';
a[2] = '\0';
... 
```

您要做的是混合这两种模式，这就是它不起作用的原因。

*编辑：*正如其他人指出的那样，`std::string`只要字符串已被初始化为具有足够的容量，就可以为对象下标。在这种情况下，字符串为空，因此所有下标都超出范围。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T02:43:37.173

根据 std::string 上的下标运算符的定义：

```
const char& operator[] ( size_t pos ) const;
      char& operator[] ( size_t pos ); 
```

非常量下标是可能的。所以以下应该可以正常工作：

```
std::string a;
a.resize(2);

a[0] = '1';
a[1] = '2';

std::cout << a; 
```

不过，这似乎是一种迂回的方式。

# ruby - 为什么活动记录宝石中没有任务文件夹

> ID：13831878
> 
> 赞同：0
> 
> 时间：2012-12-12T02:32:13.940
> 
> 标签：ruby, gem

当我阅读 github repo 上的活动记录源时，我可以在那里找到 active_record/tasks 文件夹，但是在我通过安装的 gem 中`gem install`，该文件夹丢失了。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T07:11:56.367

那是因为它在 Rails 4 中是新的，因此仅在 master 分支上，如果您查看您安装的版本的标签（例如[，此处为 3.2.9](https://github.com/rails/rails/tree/v3.2.9/activerecord/lib/active_record)），您会看到该文件夹​​也不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:45:46.200

您不希望整个 repo 进入 gem（例如 .git 文件夹） gemspec 中有一个 files var，您可以在其中设置进入的内容。

# android - 在android中执行sql

> ID：13831880
> 
> 赞同：3
> 
> 时间：2012-12-12T02:32:29.113
> 
> 标签：android, sqlite

我正在尝试在 sqlite android 开发中创建表。我的问题是，只创建了一张表，但没有创建另一张表。

这是我创建它们的方法。

```
 @Override
    public void onCreate(SQLiteDatabase db) 
    {
        try
        {
            db.execSQL(DATABASE_CREATE);
            db.execSQL(DATABASE_CREATE2);
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    } 
```

变量：

```
private static final String DATABASE_CREATE =
    "create table if not exists profiles (_id integer primary key autoincrement, "
    + "firstname VARCHAR not null, age VARCHAR not null, " 
    + "heightft VARCHAR not null, heightin VARCHAR not null, weight VARCHAR not null, duration VARCHAR not null, bmi VARCHAR not null);";

private static final String DATABASE_CREATE2 =
        "create table if not exists routines (_id integer primary key autoincrement, "
        + "weightclass VARCHAR not null, musclegroup VARCHAR not null, " 
        + "exercise VARCHAR not null, numberofsets VARCHAR not null, numeberofrepitition VARCHAR not null, day VARCHAR not null);"; 
```

关于问题是什么的任何想法？谢谢！

更新：

```
private static final String DATABASE_NAME = "fgtDB";
private static final String DATABASE_TABLE = "profiles";
private static final String DATABASE_TABLE2 = "routines";
private static final int DATABASE_VERSION = 2;

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        try
        {
            db.execSQL(DATABASE_CREATE);
                    db.execSQL(DATABASE_CREATE2);
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion 
                + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS profiles");
        onCreate(db);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:39:21.137

可能是您先创建了一个表，然后在创建数据库时添加了另一个表。
如果是这种情况，请尝试更改数据库版本，因为 onCreate(SQLiteDatabase db) 方法只调用一次，如果版本相同。

# xaml - Silverlight TextBox 文本清晰度与 TextBlock 清晰度不匹配 - 为什么？

> ID：13831882
> 
> 赞同：3
> 
> 时间：2012-12-12T02:32:39.733
> 
> 标签：xaml, silverlight-5.0

我在 Silverlight 5 应用程序中全局设置以下文本选项：

```
TextOptions.TextFormattingMode = Display
TextOptions.TextHintingMode = Fixed
TextOptions.TextRenderingMode = ClearType 
```

这使 TextBlock 元素具有更清晰的文本。

但是，TextBox 似乎没有选择这些选项，因此在相同的字体大小和系列（Segoe UI 13px）下，文本的颗粒感要大得多。这些选项肯定是被继承的，我已经检查过了。

这只是 Silverlight 文本框的内置限制吗？或者是否有一种解决方法可以获得与 TextBlock 相同的结果？理想情况下，我们希望文本在任何地方看起来都一样，无论如何。

编辑：

我尝试将 UseLayoutRounding 设置为 False，这解决了控件初始显示的问题，但是一旦我选择或编辑文本，它就会恢复到最初的颗粒质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T14:53:15.667

属性“VisualTextRenderingMode”会解决您面临的问题吗？

# verilog - 卡在while循环verilog中

> ID：13831883
> 
> 赞同：2
> 
> 时间：2012-12-12T02:32:57.993
> 
> 标签：verilog

我似乎把自己写进了一个无限循环，或者那个或者那个 Modelsim 不知道如何处理这个 while 循环中的条件：

```
i = 0;
while(i < 8'b01100100 && !(mem[i] == RC)) begin
   i <= i + 1;
end 
```

模拟只是无法通过这个while循环中的条件行，谁能指出我做错了什么？

-edit：包含while循环的代码部分：

```
//if remove credential enable is high
if(RCE == 1'b1) begin
  $display ("%d", RC);
  $display ("%d", mem[i]);
  $display ("%b", !(mem[i] == RC));
    while(i < 8'b01100100 && mem[i] != RC) begin
      i <= i + 1;
    end
    if(i < 8'b01100100) begin
        mem[i] <= 24'b111111111111111111111111;
    end else begin
        //do nothing
    end
    i = 0;
    end else begin
        //do nothing
    end 
```

这部分位于一个 always 块内，其中包含 posedge clk 和 posedge rst 的敏感度列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:41:40.167

您需要在 while 循环中使用阻塞赋值而不是非阻塞赋值（请参阅[如何在 Verilog 中解释阻塞与非阻塞赋值？](https://stackoverflow.com/questions/4653284/how-to-interpret-blocking-vs-non-blocking-assignments-in-verilog)）。

`i`活动事件处理完成后要更新的非阻塞分配计划。但是，活动事件处理永远不会完成，因为`while`条件将继续评估为真。

或者，您可以在 while 循环中添加延迟：`@(posedge clk) i <= i + 1`.

# python - 将电影文件与文本文件合并

> ID：13831884
> 
> 赞同：2
> 
> 时间：2012-12-12T02:33:06.513
> 
> 标签：python, ffmpeg, drawtext

**当前状态：**我有一部在显微镜上录制的电影和一个包含两列的 .txt 文件：时间和温度。该文件与视频同步。我想“编辑”视频，所以有一个文本框，温度会随着电影的播放而更新。

目前，我的方法是使用`ffmpeg`. 我设法画了一些文字，似乎一切都按预期工作。

**问题**是：我找不到有关如何动态更新该文本的任何参考。我正在使用一些 Python 来读取文件并`ffmpeg`使用*subprocess*启动。

我想问是否有人知道一些解决方法。也许其他一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:01:27.077

# pysrt - 用于创建 .srt 文件的 Python 模块

在@cherhan 所说的基础上，考虑使用 pysrt 库。

你可以在这里找到图书馆：http: [//pypi.python.org/pypi/pysrt/0.2.2](http://pypi.python.org/pypi/pysrt/0.2.2)

如果您在使用该库时遇到问题，请在下面发表评论，也许我可以编写一些代码来演示如何在这种特殊情况下使用它（尽管我觉得此时问题很简单）。

# c# - 使用 system.reflection 列出类文件

> ID：13831888
> 
> 赞同：0
> 
> 时间：2012-12-12T02:33:55.107
> 
> 标签：c#, .net, reflection

我需要一个列表来存储所有字段 - 一个类中的值

该类只是`const string`我在下面粘贴的几个公共变量。

```
public class HTDB_Cols
{
    public class TblCustomers
    {
        public const string CustID  = "custID",
               Name  = "name",
         CustType  = "custType",
         AddDate  = "addDate",
         Address  = "address",
         City  = "city",
         Phone  = "phone",
         Cell  = "cell";
    }
} 
```

这是一个返回字符串列表的方法，它使我能够拥有代表我所有表列名称的字符串列表，尽管由于出现错误，因此某些东西无法使用此代码

“*非静态字段需要一个目标*”。

```
public class GetClassFields
{

        public static List<string> AsList(string TableName)
        {

                    return typeof(HTDB_Cols).GetNestedTypes()
                    .First(t => String.Compare(t.Name, TableName, true) == 0)
                    .GetFields()
                    .Select(f => f.GetValue(null) as string)
                    .ToList();

        }
} 
```

尝试按如下方式使用它：

```
foreach (string tblCol in RobCS_212a.Utils.Reflct.GetClassFields.AsList      (DBSchema.HTDB_Tables.TblCustomers))
{
    Response.Write(string.Concat(tblCol, "<br />"));
} 
```

在“DBSchema.HTDB_Cols+TblTimeCPAReport”类型上定义的字段“tbName”不是“DBSchema.HTDB_Cols”类型的目标对象上的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:52:32.057

你的代码很接近。有两个问题，都位于您的 linq select 方法调用的参数中：

*   您的类 HTDB_Cols 是一个非静态类，您尝试检索的字符串值是实例成员。因此，当您尝试从类中提取实例成员时，您必须将该类的实例传递给 FieldInof.GetValue 方法。在下面的代码中，我在变量“instanceOfClass”中创建了您的类的实例。[您可以在FieldInfo 类](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx)的文档中看到这一点

*   从 FieldInfo.GetValue 返回的值是一个对象。您必须使用 ToString 方法或 (string) cast 将其显式转换为字符串。

通过这两个更改，您的方法有效。清单如下：

```
public class GetClassFields
{
    public static List<string> AsList(string tbl)
    {
        var instanceOfClass = new HTDB_Cols();
        return typeof(HTDB_Cols).GetNestedTypes()
                                .First(t => String.Compare(t.Name, tbl, true) == 0)
                                .GetFields()
                                .Select(f => f.GetValue(instanceOfClass).ToString())
                                .ToList<String>();
    }
} 
```

您可以按如下方式调用此函数：

```
var fields = GetClassFields.AsList("TblCustomers"); 
```

它返回所需的信息：

![在此处输入图像描述](../Images/3cb7e32994a2409f9e200cf718bc8bf1.png)

# c# - DBF 到 SQL 迁移实用程序 - 解决解决方案的最佳方法

> ID：13831889
> 
> 赞同：0
> 
> 时间：2012-12-12T02:33:55.293
> 
> 标签：c#, exception, memory, data-migration, memory-management

我有一个非常冗长的问题。我的雇主最近给了我一项任务，我要在 C# 中从 117 个 *.dbf 文件创建自定义 DBF 到 SQL 迁移实用程序。每个表大约有 40-50 列和 100 多行。（例如物业管理数据库）

我如何处理它如下：

1.  将 dbf 文件转换为 DataTable 对象。
2.  将 DataTable 对象添加到`List<DataTable>`模型对象中包含的 a 中。
3.  将列表绑定到 DataGridView 以进行列查看。

这一切都是在一个工作正常的后台工作人员中完成的。

我需要做的下一件事是允许用户将此列表转换并保存到一个非常大的 *.sql 文件中（或者，可以选择将其直接迁移到 SQL Express）。同样，我尝试在后台线程中执行此操作。

这是我遇到问题的地方。我有一个接受 DataTable 对象并返回字符串的方法。在其中，我有一个 stringbuilder 对象，它将所有列连接成一个“创建表”语句并附加相关的插入语句以包含数据。

`List<DataTable>`此方法在循环中执行，同时传递存储在模型对象中的每个 DataTable 的实例。

现在这工作正常，直到大约第四个或第五个 DataTable 在引发“内存不足”异常之前。我一定会启动并处理我不使用的任何对象。我什至将所有字符串连接更改为 stringbuilder 附加逻辑，以利用 stringbuilders 更好的内存管理。

我很确定我的所有对象都被释放并被垃圾回收，所以我假设问题在于我将所有 117 个表存储在模型对象列表中。每当我需要访问这个列表时，我只需传递一个对模型对象的引用。一旦我开始为所有表、DataTables 列表和 Stringbuilder 对象之间的组合构建一个 sql 语句，它就会耗尽内存。

因为我刚从大学毕业，所以我忽略了告诉我我是这个行业的新手。我已经编程了很多年，直到最近我一直在遵循“最佳实践”。所以我的问题是对你们所有人，我是否以错误的方式处理这个项目？有没有更好的方法可以做到这一点，如果是这样，您能否帮助阐明您将在我的位置上做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:02:03.540

好吧，我做了有意义的事。我只是将 SQL 直接写入文件，而不是将其写入字符串，然后将该字符串写入文件。这似乎成功了。不知道为什么我没有早点想到。

# ajax - 使用 jquery ajax 控制执行顺序

> ID：13831890
> 
> 赞同：1
> 
> 时间：2012-12-12T02:33:58.430
> 
> 标签：ajax, jquery, asynchronous

这应该很简单，但很多关于 SO 的旧答案似乎有点错误。我希望能够异步*加载*库、一些插件和一些代码，但要确保它们按顺序*执行*。

这种事情是行不通的，因为脚本在加载时执行，可能不在列出的顺序中：

```
if (someCondition) {
  $.ajax({
    url: "theLibrary.js",
    dataType: "script",
    cache: true,
    success: function(data) {
      console.log("library loaded and executed");
    }
  });
  $.ajax({
    url: "thePlugin.js",
    dataType: "script",
    cache: true,
    success: function(data) {
      console.log("plugin loaded and executed");
    }
  });
  $.ajax({
    url: "theCode.js",
    dataType: "script",
    cache: true,
    success: function(data) {
      console.log("code loaded and executed");
    }
  });
} 
```

对此的第一个尝试可能是将依赖项嵌套在回调中，如下所示：

```
if (someCondition) {
  $.ajax({
    url: "theLibrary.js",
    dataType: "script",
    cache: true,
    success: function(data) {
      console.log("library loaded and executed");
        $.ajax({
          url: "thePlugin.js",
          dataType: "script",
          cache: true,
          success: function(data) {
            console.log("plugin loaded and executed");
            $.ajax({
              url: "theCode.js",
              dataType: "script",
              cache: true,
              success: function(data) {
                console.log("code loaded and executed");
              }
            });
          }
        });
    }
  });
} 
```

现在这解决了*执行*问题（虽然读起来很麻烦），但现在的问题是`loading`第二个和第三个脚本在加载和执行前一个脚本时被搁置了。换句话说，加载和执行没有完全解耦。

似乎没有延迟执行的选项`.ajax`或其速记继子。`.getScript`从文档：

> dataType: "script": 将响应评估为 JavaScript 并将其作为纯文本返回。

换句话说，加载和执行似乎是完全耦合的。有没有一种干净的方法来处理这种深度嵌套依赖关系的情况，只使用 jquery，**而不需要额外的脚本加载库**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T10:41:07.297

您可以尝试使用[Async.js](https://github.com/caolan/async#series)系列方法，尽管最初对于 Node.js 它也适用于浏览器。

所以基本上你可以做类似的事情

```
async.series([
    function(callback){
        // do some stuff ...
        callback(null, 'one');
    },
    function(callback){
        // do some more stuff ...
        callback(null, 'two');
    }
],// optional callback
function(err, results){
        // results is now equal to ['one', 'two']
}); 
```

# javascript - 为什么需要刷新页面才能计算元素尺寸

> ID：13831891
> 
> 赞同：1
> 
> 时间：2012-12-12T02:33:58.087
> 
> 标签：javascript, jquery

我最近制作的脚本有问题。这个想法是让图像跟随鼠标，但不要离开屏幕。 [http://nemanjamilosavljevic.com/javascript/gallery_view](http://nemanjamilosavljevic.com/javascript/gallery_view)

当您第一次加载页面时，它不会计算元素的尺寸，但是当您刷新页面时，它们会被计算出来。元素不会立即显示在页面上，因为需要计算的内容是弹出窗口。我曾尝试立即显示它们，但它仍然没有成功。

这是我正在使用的代码：

```
.popup-image-cnt {
    display:none; 
    position:fixed; 
    z-index:10;
    border:2px solid #fff;
    box-shadow:0 0 15px rgba(0,0,0,.7);
}
.popup-image-cnt img {display:block;} 
```

标记：

```
<ul id="fnc-preview-this-design">
    <li><a href="#" rel="gallery/1-3.jpg"><img src="gallery/1-1.jpg" /></a></li>
    <li><a href="#" rel="gallery/2-3.jpg"><img src="gallery/2-1.jpg" /></a></li>
    <li><a href="#" rel="gallery/3-3.jpg"><img src="gallery/3-1.jpg" /></a></li>
</ul> 
```

包括：

```
<script src="jquery/jquery-1.8.3.min.js"></script>
<script src="jquery/jquery-gallery-view-1.0.0.js"></script>
<script type="text/javascript">   
    $(document).ready(function() {
        gallery_popup({
            actionElement: '#fnc-preview-this-design a'
    }); 
});
</script> 
```

图库弹出脚本：

```
function gallery_popup (elementsObj){
    $(window).load(function(){
        // Define a screen's bottom position
        var bottomPosition = $(window).height() + $(document).scrollTop();

        // Define a screen's right position
        var sidePosition = $(window).width();

        // Generate popup images for every item that is needed
        $(elementsObj.actionElement).each(function (i) {
            // Append
            var image     = $(this),
            originalSrc = image.attr('rel');

            $(this).append('<span class="popup-image-cnt"><img src="' + originalSrc + '" alt="" /></span>');

            // Calculate images width and height after it is added and loaded
            var imgH = $(this).children('.popup-image-cnt').height();
            var imgW = $(this).children('.popup-image-cnt').width();

            $(this).bind('mousemove', function(e){
                // Define a position where the images bottom side is
                var mouseYPosLimiter = Math.round(parseFloat(e.pageY) + parseFloat(imgH));

                // Define a position where the images right side is
                var mouseXPosLimiter = Math.round(parseFloat(e.pageX) + parseFloat(imgW));

                // See if it fits vertically, and if it doesn't, stick it to the bottom
                if (mouseYPosLimiter > bottomPosition) {
                    var topPos = bottomPosition - imgH - 4
                } else {
                    var topPos = e.pageY + 20
                }

                // See if it fits horizontally, and if it doesn't, stick it to the right
                if (mouseXPosLimiter > sidePosition) {
                    var sidePos = sidePosition - imgW - 4
                } else {
                    var sidePos = e.pageX + 10
                }

                // Move the popup along with the mouse
                $('.popup-image-cnt').offset({
                   left:  sidePos,
                   top:   topPos
                });

            });

            // mouse action
            $(this).mouseenter(function() {
                // Show the popup
                $(this).children('.popup-image-cnt').fadeIn('fast');
            });

            $(this).mouseleave(function() {
                // Hide the popup
                $(this).children('.popup-image-cnt').fadeOut('fast');
            });

        });        
    });    
} 
```

# xcode - 如何在 xcode 4.5.1 上使用 WebView

> ID：13831896
> 
> 赞同：7
> 
> 时间：2012-12-12T02:34:25.980
> 
> 标签：xcode, cocoa, webview, nsapplication

我是编程新手，我需要在我的应用程序中嵌入一个网站（这是空白的；我现在只想嵌入该网站）。我从下午 5:00（现在是晚上 9:30）开始一直在寻找它，但我仍然没有找到任何相关信息。

我需要什么代码以及我需要在什么文件中编写它？我必须将什么链接在一起？

我使用 Xcode 4.5.1，并且正在*尝试*为 Mac OS X（不适用于 iOS）做一个 Cocoa 应用程序。

如果我的某些句子不清楚，我很抱歉，但英语不是我的主要语言。

如果您需要更多信息来帮助我，请询问。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T03:40:00.420

在您的 AppDelegate.h 文件中，将此行添加到以下`#import <Cocoa/Cocoa.h>`行：

```
#import <WebKit/WebKit.h> 
```

并在该行下方添加此`@property (assign) IBOutlet NSWindow *window;`行：

```
@property (assign) IBOutlet WebView *webView; 
```

选择您的 MainMenu.xib 文件。

打开其中的窗口，然后将 WebView 从对象库浏览器拖到窗口中。对齐并调整大小。

`AppController`在UI 布局的左侧应该有一个代表您的对象的图标。按住 Control 从它拖动到您`WebView`的窗口内部。（不要*从*您的图标上控制拖动`File's Owner`！）释放鼠标按钮。应出现一个上下文菜单，其中包含单词`webView`。选择它。

将框架添加`WebKit.framework`到您的项目中。右键单击 Xcode 窗口左侧资源列表中的 Frameworks 文件夹。选择“将文件添加到“<您的项目名称>”...并使用以下路径选择框架：`/System/Library/Frameworks/WebKit.framework`.

选择您的 AppDelegate.m 文件。

在您的 -applicationDidFinishLaunching: 方法中，将注释替换为以下代码：

```
// I provided Apple's URL, but this is where you provide your own instead.
NSURL *url = [NSURL URLWithString:@"http://www.apple.com"];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
[[[self webView] mainFrame] loadRequest:urlRequest]; 
```

构建并运行。当窗口出现时，您应该会看到它加载了您在 URL 中描述的网页。

最后几句话：

我看你是新来的。在 Stack Overflow 的背景下，我刚刚所做的就是给你一份礼物。您需要更加努力地在 Web 上寻找资源。我自己找到了两个，但是因为它们有点旧（并且开发工具看起来很不同），所以我开始着手这个答案。我希望你保证你会更加努力地为自己寻找答案。一个很好的起点是阅读 Apple 自己[非常出色的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/SimpleBrowsing.html#//apple_ref/doc/uid/20002025-CJBEHAAG)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T03:37:26.350

你有没有找到[关于这个主题的 Apple 教程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DisplayWebContent/Tasks/SimpleBrowsing.html#//apple_ref/doc/uid/20002025-CJBEHAAG)：

```
WebView *webview = [[WebView alloc] init]; // or initialise using the modern-equivalent of InterfaceBuilder
[[webView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]]; 
```

# python - TypeError: 不支持的操作数类型 -: 'int' 和 'str'

> ID：13831905
> 
> 赞同：2
> 
> 时间：2012-12-12T02:35:41.357
> 
> 标签：python, string, int, typeerror

好的，所以我正在编写一个程序来查找星期几，并且程序运行顺利，直到这个块

```
D = input()

A = ( (14 - 'month') /12)

Y = ( 'Year' - 'A' )

MonthProblem = ( 'month' + 12 * 'A' - 2 )

week = ( ('D' + 'Y' + 'Y'/4 - 'Y'/100 + 'Y'/400 + 31 * 'MonthProblem'/12) % 7 ) 
```

错误是 TypeError: unsupported operand type(s) for -: 'int' and 'str'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T02:49:38.777

当你把逗号放在一个东西周围时，它会变成一个字符串，所以`'month'`表示这个词，而`month`表示名为月份的变量中的值。

如果您删除`'`s，您的程序将停止给您该特定错误：

```
D = input()

A = ( (14 - month) /12)

Y = ( Year - A )

MonthProblem = ( month + 12 * A - 2 )

week = ( (D + Y + Y/4 - Y/100 + Y/400 + 31 * MonthProblem/12) % 7 ) 
```

你之前定义过`month`etc 的值吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:43:58.750

直接按名称使用变量，不带`''`. 单词 in`''`表示一个字符串，而不是一个变量。

例如：

```
A = 1
print(A,'A') 
```

它会输出`1, A`

对于您的情况，代码应修改为：

```
D = input()
A = ( (14 - month) /12)
Y = ( Year - A )
MonthProblem = ( month + 12 * A - 2 )
week = ( (D + Y + Y/4 - Y/100 + Y/400 + 31 * MonthProblem/12) % 7 ) 
```

如果您确实定义了您使用的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T02:44:23.303

此代码示例存在许多问题，并且在您解决问题时，错误只是众多错误中的第一个。

`'month'`似乎它应该是某种变量，而不是字符串。实际错误发生在该行：

`A = ( (14 - 'month') /12)`

您正在获取[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)14 并从中减去一个字符串。你根本做不到。您不能从整数中减去字符串。用单引号括起来的月份使其成为文字字符串。正如 AndrewC 所提到的，如果您从月份中删除单引号，它将成为一个变量，但它需要有一个值才能在其中执行操作，例如减法。

如果您可以在此处添加一些有关您要执行的操作的上下文，这可能会使我们更容易为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T02:40:05.317

这种类型的错误可能是由以下几点引起的：

```
"some string" + anInt - anotherInt 
```

问题是由于此语句中的 String 引起的 - 编译器将加号解释为将 String 和 int 组合在一起。但是，在这种情况下，它不知道如何处理减号 - 您不能从字符串中减去 int。

您的问题可以通过将整数运算放在括号内来解决，即，

```
"some string" + (anInt - anotherInt) 
```

如果您仍然遇到问题，我们可以查看您的确切代码并查看应该在哪里添加这些括号 - 但这可能足以让您自己解决，这总是更可取的！

* * *

**编辑：**如果它也是问题的一部分，我会留下上面的帖子，但是在再次查看代码之后，你有这行代码：

```
A = ( (14 - 'month') /12) 
```

您`String`从 14 中减去“月份” `int`。这可能是个问题。

# php - WordPress $wpdb->update 将浮动设置为空？

> ID：13831906
> 
> 赞同：0
> 
> 时间：2012-12-12T02:35:47.337
> 
> 标签：php, wordpress

有没有办法设置要`NULL`使用的列`$wpdb->update();`？

当我尝试这样做时，WordPress 会尝试将该列类型转换为浮点数，然后转换`NULL`为`0`.

我检查了核心代码和内部`$wpdb->update()`，`$format`参数只需要 %s、%f 和 %d。我什至设置`$wpdb->field_types['myCol']`为`'NULL'`，但两者都只用于 break`$wpdb->update()`的查询（有趣的是，它会将每列的值转移到 之后`NULL`）。

这里有一个相关的问题，但该答案仅涉及`INSERT`，**而不** `UPDATE`涉及。

从数据完整性的角度来看，`NULL`这对于本专栏非常重要，因此我必须能够在必要时进行设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:33:48.277

正如您自己注意到的那样，该`$format`参数仅期望`%s`,`%f`和`%d`。整个事情将通过[`prepare`](http://core.trac.wordpress.org/browser/trunk/wp-includes/wp-db.php)它也不需要`null`格式说明符，因为它基本上接受相同的格式说明符，[`(v)(s)printf`](http://php.net/manual/en/function.sprintf.php)但没有参数交换。你不能通过`NULL`。`update`您具有与帖子中提到的相同的选择，[建议为可能的重复项](https://stackoverflow.com/questions/2596962/wordpress-database-insert-and-update-using-null-values)，本质上是这样。

1.  只是不要使用该`update`功能。编写您自己的 SQL 并将其与`$wpdb->query`. 如果您正在处理自己的表格，那应该没问题。
2.  创建您自己的数据库类，*它将*执行您想要的操作。一个鲜为人知的事实是，您可以将 WordPress' 替换`$wpdb`为[drop-in](http://hakre.wordpress.com/2010/05/01/must-use-and-drop-ins-plugins/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T16:38:21.973

这是一个从最新版本的 wordpress 修改 wpdb 的解决方案，以便允许使用 insert() 和 update() 将空值插入和更新到 SQL 表中：

```
/*
 * Fix wpdb to allow inserting/updating of null values into tables
 */
class wpdbfixed extends wpdb
{
    function insert($table, $data, $format = null) {
        $type = 'INSERT';
        if ( ! in_array( strtoupper( $type ), array( 'REPLACE', 'INSERT' ) ) )
            return false;
        $this->insert_id = 0;
        $formats = $format = (array) $format;
        $fields = array_keys( $data );
        $formatted_fields = array();
        foreach ( $fields as $field ) {
            if ( !empty( $format ) )
                $form = ( $form = array_shift( $formats ) ) ? $form : $format[0];
            elseif ( isset( $this->field_types[$field] ) )
                $form = $this->field_types[$field];
            else
                $form = '%s';

            //***edit begin here***
            if ($data[$field]===null) {
                unset($data[$field]); //Remove this element from array, so we don't try to insert its value into the %s/%d/%f parts during prepare().  Without this, array would become shifted.
                $formatted_fields[] = 'NULL';
            } else {
                $formatted_fields[] = $form; //Original line of code
            }
            //***edit ends here***
        }
        $sql = "{$type} INTO `$table` (`" . implode( '`,`', $fields ) . "`) VALUES (" . implode( ",", $formatted_fields ) . ")";
        return $this->query( $this->prepare( $sql, $data ) );
    }

    function update($table, $data, $where, $format = null, $where_format = null)
    {
        if ( ! is_array( $data ) || ! is_array( $where ) )
            return false;

        $formats = $format = (array) $format;
        $bits = $wheres = array();
        foreach ( (array) array_keys( $data ) as $field ) {
            if ( !empty( $format ) )
                $form = ( $form = array_shift( $formats ) ) ? $form : $format[0];
            elseif ( isset($this->field_types[$field]) )
                $form = $this->field_types[$field];
            else
                $form = '%s';

            //***edit begin here***
            if ($data[$field]===null)
            {
                unset($data[$field]); //Remove this element from array, so we don't try to insert its value into the %s/%d/%f parts during prepare().  Without this, array would become shifted.
                $bits[] = "`$field` = NULL";
            } else {
                $bits[] = "`$field` = {$form}"; //Original line of code
            }
            //***edit ends here***
        }

        $where_formats = $where_format = (array) $where_format;
        foreach ( (array) array_keys( $where ) as $field ) {
            if ( !empty( $where_format ) )
                $form = ( $form = array_shift( $where_formats ) ) ? $form : $where_format[0];
            elseif ( isset( $this->field_types[$field] ) )
                $form = $this->field_types[$field];
            else
                $form = '%s';
            $wheres[] = "`$field` = {$form}";
        }

        $sql = "UPDATE `$table` SET " . implode( ', ', $bits ) . ' WHERE ' . implode( ' AND ', $wheres );
        return $this->query( $this->prepare( $sql, array_merge( array_values( $data ), array_values( $where ) ) ) );
    }

}
global $wpdb_allow_null;
$wpdb_allow_null = new wpdbfixed(DB_USER, DB_PASSWORD, DB_NAME, DB_HOST); 
```

将此代码插入始终运行的地方，例如您的functions.php，然后照常使用新的全局$wpdb_allowed_null->insert() 和->update()。

我更喜欢这样做而不是覆盖默认的 $wpdb，以保留其余 Wordpress 和其他插件所期望的 DB 行为。

# regex - Vim 正则表达式，反向引用 `[^s]` 匹配

> ID：13831910
> 
> 赞同：0
> 
> 时间：2012-12-12T02:36:18.113
> 
> 标签：regex, vim, backreference

在类似以下内容的文件中：

```
self.phrase
self.phrases
self.phrase.lower()
self.phrase_lowered
self.phrases[self.phrase] 
```

我想用 替换所有`self.phrase`，`self._phrase`除了`self.phrases`得到：

```
self._phrase
self.phrases
self._phrase.lower()
self._phrase_lowered
self.phrases[self._phrase] 
```

在我尝试过的正则表达式中，第一个（也是我认为可行的）是：

```
:%s/self\.phrase[^s]/self\._phrase\1/gc 
```

但它没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T02:39:27.433

用于`\>`标记单词的结尾：

```
1,$s/self\.phrase\>/self._phrase/g 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T03:45:50.270

它通常用负前瞻来表示，而不是像这样的原子`[^s]`：

```
%s/self\.phrases\@!/self._phrase/g 
```

. `\zs`在/或后视的帮助下，`\ze`您可以缩小要键入的字符数：

```
%s/self\.\zs\zephrases\@!/_/g

%s/\v(self\.)@<=(phrases@!)@=/_/g 
```

（尽管后者仅比原始字符少 1 个字符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T02:38:09.890

要使您的反向引用正常工作，请使用捕获组：

```
:%s/self\.phrase\([^s]\)/self\._phrase\1/gc 
```

但是，正如@gits 指出的那样，这并不能解决您的问题。我个人建议使用@perreal 的答案。它更灵活，因此更有可能在未来发挥作用。但是，如果您决心像上述那样做，那么以下内容将起作用：

```
%s/self\.phrase\([^s]\|\s*$\)/self\._phrase\1/gc 
```

# php - 什么是 php.ini 以及它在 CentOS 中的位置

> ID：13831912
> 
> 赞同：15
> 
> 时间：2012-12-12T02:36:30.797
> 
> 标签：php

我是 php 新手。我在我的**CentOS 6.2**机器上安装了 php。我添加了一个扩展，但是当我安装它时，我收到一个警告，我应该将“ **extension=mongo.so** ”添加到 php.ini。我找不到 php.ini。就在上面有一个警告，即 php_ini 未设置为 php.ini 位置。所以php甚至不知道它在哪里。什么是 php.ini，它应该放在哪里？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-12T02:39:23.273

您可以通过 phpinfo(); 来确认 php.ini 的位置。在我的centos中，我发现如下。

```
Configuration File (php.ini) Path => /etc 
```

在大多数 Linux 中，php.ini 似乎位于“/etc/php.ini”

# cordova - 如何加载Phonegap中www文件夹之外的html文件？

> ID：13831913
> 
> 赞同：0
> 
> 时间：2012-12-12T02:36:39.977
> 
> 标签：cordova

是否可以加载位于 www 文件夹之外的位置的 html 文件。

**案例 A**：让我们考虑 www 文件夹包含两个文件，即**1.index.html 2.profile.html**在这里我们可以通过 index.html**中** 的 锚标记访问 profile.html****`<a href="profile.html">Profile</a>`****

 ****案例 B**：这里我们的 www 文件夹包含一个文件，即 index.html，而**profile.html**位于**www**文件夹之外的位置，因为我们会将这个**profile.html**文件从服务器下载到我们的手机，让我们说 profile.html驻留在我们的**SD 卡**上。那么我们如何在案例 B 中从 index.html 访问或加载 profile.html 呢？

*   这可能吗，访问 www 文件夹之外的文件？
*   或者是否可以从服务器下载文件并将其直接放在 www 文件夹中？

我对此很陌生，我相信有人可以就这个话题分享见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:51:04.553

www 文件夹与应用程序资源一起放置，不能更改。

一种方法是在 SD 卡中创建一个文件夹（我们称之为 sd_www），然后将 www 文件夹的内容移动到这个 sd_www。而不是从 www 文件夹加载 index.html，您将从 sd_www 文件夹加载 index.html。

这样，每次从服务器下载新文件时，都可以从 index.html 访问它**

# batch-file - 递归删除具有特定扩展名的文件夹

> ID：13831916
> 
> 赞同：0
> 
> 时间：2012-12-12T02:37:05.170
> 
> 标签：batch-file, file-management

我有一个相当平坦的图像文件结构，虽然很大（只有 3-4 层深）。在这个结构中，我想删除所有以“.files”结尾的文件夹（不带引号）。

请注意，我要删除的文件是隐藏的。

我看到了一个相关的问题（链接如下），它建议了以下批处理文件（使用'_svn'除外）

[在Windows中递归删除具有指定名称的文件夹的命令行工具？](https://stackoverflow.com/questions/521382/command-line-tool-to-delete-folder-with-a-specified-name-recursively-in-windows/521433#521433)

`for /d /r . %d in (_svn) do @if exist "%d" rd /s/q "%d"`

但它并不适合我。在要启动的目录中运行时出现以下错误： `d" rd /s/q "d" was unexpected at this time.`

所以要清楚，我正在寻找一个可以放入批处理文件的命令，我可以 cd 到我想要的目录，运行命令，并删除当前目录下以“.files”结尾的目录

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:59:24.597

```
for /f %a in ('dir C:\yourdir\*.files /b /s /a:hd') do rd /s /q "%a" 
```

或者如果从批处理文件运行它使用`%`2

```
for /f %%a in ('dir C:\yourdir\*.files /b /s /a:hd') do rd /s /q "%%a" 
```

# html - 有序列表 Html 页面选项卡以在同一页面中打开网页

> ID：13831919
> 
> 赞同：0
> 
> 时间：2012-12-12T02:37:14.367
> 
> 标签：html, css

所以我正在构建一个网站，我希望在右侧有一些小标签，可以更改主页上的内容，而无需刷新整个页面，就像主页中的嵌入页面一样。我正在使用模板（HTML 和 CS）并尝试修改现有内容。在代码中，您可以注意到有一个定义按钮（如主页等）的有序列表，当将鼠标悬停在它们上时，它们会改变背景并看起来很漂亮，但它们实际上并没有做任何事情。我一直在阅读有关如何让他们更改页面（通过链接）的信息，但我很困惑，不知道该怎么做。我希望你们能帮助我。我对 HTML 和 CSS 非常陌生，只是试图将一些东西放在一起并从示例中学习，同时还建立一个私人网站。

**索引.HTML：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>/rootbox</title>
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css'>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<div id="wrapper">
    <div id="header-wrapper">
        <div id="header" class="container">
            <div id="logo">
                <h1><a href="#">Rootbox</a></h1>
            </div>
            <div id="menu">
                <ul>
                    <li class="current_page_item"><a href="#">Homepage</a></li>
                    <li><a href="#">Distros</a></li>
                    <li><a href="#">Wifi</a></li>
                    <li><a href="#">Tools</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        <div id="banner">
            <div class="content"><img src="images/title.png" width="1000" height="300" alt="" /></div>
        </div>
    </div>
    <!-- end #header -->

    <div id="page">
        <div id="content">
            <div class="post">
                <h2 class="title"><a href="#">Welcome to /rootbox</a></h2>
                <div style="clear: both;">&nbsp;</div>
                <div class="entry">
                    <p>/rootbox is a collection of Security oriented Tools, Tutorials, Resources and Websites.This site offers a collection of well documented and freely available tools and resources for both a begginer pen-tester and the professional white-hat. Everything on this site is simply a collection, thus no original content is posted. All links have been tested and properly checked for security. All software published here is free and available directly from the author's site. Tutorials are often updated and deprecated software is removed.
                    </br></br>
                    This site is hosted on Panckake.io - A web framework which allows for publishing websites directly from Dropbox. For more information go <a href="http://pancake.io">here</a>.If you need any additional help, or have any feedback or suggestions, send an email to rushone2010@gmail.com.
                    </p>
                </div>
            </div>
        </div>
    </div>
        <!-- end #content -->
</div>
<div id="footer">
    <p>Copyright (c) 2012\. All rights reserved. Design by <a href="http://www.freecsstemplates.org">FCT</a></p>
</div>
<!-- end #footer -->
</body>
</html> 
```

**样式.CSS**

```
body {
    margin: 0;
    padding: 0;
    background: #050505 url(images/img01.jpg) repeat;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    color: #5B5B5B;
}

h1, h2, h3 {
    margin: 0;
    padding: 0;
    text-transform: uppercase;
    font-weight: normal;
    font-family: 'Oswald', sans-serif;
    font-weight: 200;
    color: #222222;
}

h1 {
    font-size: 2em;
}

h2 {
    font-size: 2.8em;
}

h3 {
    font-size: 1.6em;
}

p, ul, ol {
    margin-top: 0;
    line-height: 180%;
}

ul, ol {
}

a {
    color: #5E5E5E;
}

a:hover {
}

#wrapper {
    background: #FFFFFF url(images/img05.jpg) repeat;
}

.container {
    width: 1000px;
    margin: 0px auto;
}

/* Header */

#header-wrapper {
    overflow: hidden;
}

#header {
    width: 1000px;
    height: 150px;
    margin: 0 auto;
    padding: 0px 0px;
}

/* Logo */

#logo {
    float: left;
    width: 300px;
    margin: 0;
    padding: 0;
    color: #FFFFFF;
}

#logo h1, #logo p {
}

#logo h1 {
    line-height: 120px;
    letter-spacing: -2px;
    font-size: 3.8em;
}

#logo h1 a {
    color: #1F1F1F;
    text-shadow: 1px 1px 0px rgba(0,0,0,.2);
}

#logo p {
    margin: 0;
    padding: 0px 0 0 0px;
    letter-spacing: -1px;
    font: normal 18px Georgia, "Times New Roman", Times, serif;
    font-style: italic;
    color: #8E8E8E;
}

#logo p a {
    color: #8E8E8E;
}

#logo a {
    border: none;
    background: none;
    text-decoration: none;
    color: #000000;
}

/* Splash */

#splash {
    width: 960px;
    height: 300px;
    margin: 0px auto;
}

/* Search */

#search {
    float: right;
    width: 280px;
    height: 60px;
    padding: 20px 0px 0px 0px;
}

#search form {
    height: 41px;
    margin: 0;
    padding: 10px 0 0 20px;
}

#search fieldset {
    margin: 0;
    padding: 0;
    border: none;
}

#search-text {
    width: 170px;
    padding: 6px 5px 2px 5px;
    border: 1px solid #E7EBED;
    background: #FFFFFF;
    text-transform: lowercase;
    font: normal 11px Arial, Helvetica, sans-serif;
    color: #5D781D;
}

#search-submit {
    width: 50px;
    height: 22px;
    border: none;
    background: #B9B9B9;
    color: #000000;
}

/* Menu */

#menu {
    float: right;
    width: 500px;
    height: 90px;
    margin: 0 auto;
    padding: 0;
}

#menu ul {
    float: right;
    margin: 0;
    padding: 20px 0px 0px 0px;
    list-style: none;
    line-height: normal;
}

#menu li {
    float: right;
}

#menu a {
    display: block;
    line-height: 100px;
    margin-right: 1px;
    padding: 0px 20px 0px 20px;
    text-decoration: none;
    text-align: center;
    text-shadow: 1px 1px 0px rgba(0,0,0,.2);
    text-transform: uppercase;
    font-family: 'Oswald', sans-serif;
    font-size: 16px;
    font-weight: 300;
    color: #1F1F1F;
    border: none;
}

#menu a:hover, #menu .current_page_item a {
    background: url(images/img01.jpg) repeat;
    text-decoration: none;
    color: #FFFFFF;
}

#menu .current_page_item a {
}

/* Page */

#page {
    width: 1000px;
    margin: 0 auto;
    padding: 30px 0px;
}

/* Content */

#content {

    padding: 0px 0px 0px 0px;
}

.post {
    overflow: hidden;
    margin-bottom: 40px;
    border-bottom: 1px solid #E7EBED;
}

.post .title {
    padding: 0px 0px 0px 0px;
    letter-spacing: -1px;
}

.post .title a {
    border: none;
    text-decoration: none;
    color: #222222;
}

.post .meta {
    margin-bottom: 30px;
    padding: 10px 0px 0px 0px;
    text-align: left;
    font-family: 'Abel', sans-serif;
    font-size: 16px;
    font-weight: 300;
}

.post .meta .date {
    float: left;
}

.post .meta .posted {
    float: right;
}

.post .meta a {
}

.post .entry {
    padding: 0px 0px 40px 0px;
    text-align: justify;
}

.links {
    padding-top: 20px;
    margin-bottom: 30px;
}

.more {
    display: block;
    float: left;
    width: 88px;
    padding: 5px 5px;
    margin-right: 10px;
    background: #222222;
    color: #FFFFFF;
    text-align: center;
    text-decoration: none;
}

.comments {
    display: block;
    float: left;
    width: 88px;
    padding: 5px 5px;
    background: #222222;
    color: #FFFFFF;
    text-align: center;
    text-decoration: none;
}

/* Sidebar */

#sidebar {
    float: left;
    width: 270px;
    margin: 0px;
    padding: 30px 0px 0px 0px;
}

#sidebar ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

#sidebar li {
    margin: 0;
    padding: 0;
}

#sidebar li ul {
    margin: 0px 0px;
    padding-bottom: 30px;
}

#sidebar li li {
    line-height: 40px;
    border-bottom: 1px solid #E7EBED;
    margin: 0px 0px;
    border-left: none;
}

#sidebar li li span {
    display: block;
    margin-top: -20px;
    padding: 0;
    font-size: 11px;
    font-style: italic;
}

#sidebar li li a {
    padding: 0px 0px 0px 20px;
    background: url(images/img04.jpg) no-repeat left 50%;
}

#sidebar h2 {
    height: 38px;
    padding: 0px 0px 30px 0px;
    letter-spacing: -.5px;
    font-size: 1.8em;
    color: #222222;
}

#sidebar p {
    margin: 0 0px;
    padding: 0px 30px 20px 30px;
    text-align: justify;
}

#sidebar a {
    border: none;
}

#sidebar a:hover {
    text-decoration: underline;
}

/* Calendar */

#calendar {
}

#calendar_wrap {
    padding: 20px;
}

#calendar table {
    width: 100%;
}

#calendar tbody td {
    text-align: center;
}

#calendar #next {
    text-align: right;
}

/* Three Column Footer Content */

#footer-content {
    overflow: hidden;
    width: 1000px;
    margin: 0px auto;
    color: #D6E2F0;
}

#footer-content a {
    color: #92A9B6;
}

#footer-bg {
    overflow: hidden;
    padding: 30px 0px;
    background: #E8E8E8;
}

#footer-content h2 {
    margin: 0px;
    padding: 0px 0px 20px 0px;
    letter-spacing: -1px;
    font-size: 26px;
    color: #262626;
}

#footer-content #fbox1 {
    float: left;
    width: 300px;
    margin-right: 50px;
}

#footer-content #fbox2 {
    float: left;
    width: 300px;
}

#footer-content #fbox3 {
    float: right;
    width: 300px;
}

#footer-content a {
}

#column1 {
    float: left;
    width: 290px;
    margin-right: 30px;
}

#column2 {
    float: left;
    width: 280px;
}

#column3 {
    float: right;
    width: 260px;
}

/* Footer */

#footer {
    height: 140px;
    margin: 0 auto;
    padding: 50px 0 15px 0;
    font-family: 'Abel', sans-serif;
}

#footer p {
    margin: 0;
    padding-top: 10px;
    letter-spacing: 1px;
    line-height: normal;
    font-size: 14px;
    text-transform: uppercase;
    text-align: center;
    color: #5E5E5E;
}

#footer a {
    color: #5E5E5E;
}

#marketing {
    overflow: hidden;
    margin-bottom: 30px;
    padding: 20px 0px 10px 0px;
    border-top: 1px solid #E7EBED;
    border-bottom: 1px solid #E7EBED;
}

#marketing .text1 {
    float: left;
    margin: 0px;
    padding: 0px;
    letter-spacing: -2px;
    text-transform: lowercase;
    font-size: 34px;
    color: #345E9B;
}

#marketing .text2 {
    float: right;
}

#marketing .text2 a {
    display: block;
    width: 252px;
    height: 38px;
    padding: 15px 0px 0px 0px;
    background: url(images/img07.jpg) no-repeat left top;
    letter-spacing: -2px;
    text-align: center;
    text-transform: lowercase;
    font-size: 30px;
    color: #FFFFFF;
}

#banner {
    margin: 0px auto;
    width: 1000px;
    height: 340px;
    background: url(images/img03.png) no-repeat left bottom;
}

#banner .content {
}

.list-style1 {
    margin: 0px;
    padding: 0px;
    list-style: none;
}

.list-style1 a {
    color: #7F7F7F;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:38:14.960

```
<script type='text/javascript'>  
    $(document).ready(function() {
                $('#menu #tab1').on('mouseover', function () {
                    $('#page').show();
                    $('#page2,#page3,#page4,#page5').hide();    
                }); 
                $('#menu #tab2').on('mouseover', function () {
                    $('#page2').show();
                    $('#page,#page3,#page4,#page5').hide(); 
                });
                $('#menu #tab3').on('mouseover', function () {
                    $('#page3').show();
                    $('#page,#page2,#page4,#page5').hide(); 
                });
                $('#menu #tab4').on('mouseover', function () {
                    $('#page4').show();
                    $('#page,#page2,#page3,#page5').hide(); 
                });
                $('#menu #tab5').on('mouseover', function () {
                    $('#page5').show();
                    $('#page,#page2,#page3,#page4').hide(); 
                });

    });
</script> 
```

在你的脚本和 html 上试试这个。

```
<div id="wrapper">
    <div id="header-wrapper">
        <div id="header" class="container">
            <div id="logo">
                <h1><a href="#">Rootbox</a></h1>
            </div>
            <div id="menu">
                <ul>
                    <li class="current_page_item" id="tab1"><a href="#">Homepage</a></li>
                    <li id="tab2"><a href="#">Distros</a></li>
                    <li id="tab3"><a href="#">Wifi</a></li>
                    <li id="tab4"><a href="#">Tools</a></li>
                    <li id="tab5"><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        <div id="banner">
            <div class="content"><img src="images/title.png" width="1000" height="300" alt="" /></div>
        </div>
    </div>
    <!-- end #header -->

    <div id="page">
        <div class="content">
            <div class="post">
                <h2 class="title"><a href="#">Welcome to /rootbox</a></h2>
                <div style="clear: both;">&nbsp;</div>
                <div class="entry">
                    <p>/rootbox is a collection of Security oriented Tools, Tutorials, Resources and Websites.This site offers a collection of well documented and freely available tools and resources for both a begginer pen-tester and the professional white-hat. Everything on this site is simply a collection, thus no original content is posted. All links have been tested and properly checked for security. All software published here is free and available directly from the author's site. Tutorials are often updated and deprecated software is removed.
                    </br></br>
                    This site is hosted on Panckake.io - A web framework which allows for publishing websites directly from Dropbox. For more information go <a href="http://pancake.io">here</a>.If you need any additional help, or have any feedback or suggestions, send an email to rushone2010@gmail.com.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="page2">
        <div class="content">
            <div class="post">
                <h2 class="title"><a href="#">page2</a></h2>
            </div>
        </div>
    </div>
     <div id="page3">
        <div class="content">
            <div class="post">
                <h2 class="title"><a href="#">page3</a></h2>
            </div>
        </div>
    </div>
    <div id="page4">
        <div class="content">
            <div class="post">
                <h2 class="title"><a href="#">page4</a></h2>
            </div>
        </div>
    </div>
    <div id="page5">
        <div class="content">
            <div class="post">
                <h2 class="title"><a href="#">page5</a></h2>
            </div>
        </div>
    </div>
</div> 
```

将此添加到您的样式中..

```
#page2, #page3, #page4, #page5{
display:none;
    width: 1000px;
    margin: 0 auto;
    padding: 30px 0px;
} 
```

注意：将#content更改为类类型..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T03:21:45.203

如果您正在寻找一种在鼠标悬停时加载内容的方法，我建议您这样做：

使用一点点 jQuery 和 AJAX：

```
$("#menu a").on("mouseover",function(){
//Get url of link
var url = $(this).attr('href');
//Perform ajax call to said link
$.ajax(
    {
    url:"/echo/json",
    success:function(data){
        //USED FOR MOCKING PURPOSES ONLY
       data = exampleContent; 

        //Append the data to your content wrapper
        $("#page #content").html(data[url]);
    }
});
}); 
```

**[这是一个工作示例](http://jsfiddle.net/TNCodeMonkey/5EZNy/)**

**[这是一个带有褪色的更高级的版本。我称之为很棒的飞溅](http://jsfiddle.net/TNCodeMonkey/Dk8GP/1/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T03:27:42.023

如果我是你，我会使用 css 属性

```
display: none; 
```

在您最初隐藏的元素上，然后使用 jquery

```
.toggle() 
```

当用户单击链接时淡入元素的方法。如在

```
$('.target').toggle(); 
```

其中 target 是您的 div id 的名称。

# java - 操作栏/Viewpager？

> ID：13831920
> 
> 赞同：-1
> 
> 时间：2012-12-12T02:37:20.170
> 
> 标签：java, android

操作栏/Viewpager 的用途是什么，它可以用于浏览页面吗？

如果它用于在屏幕中导航，我如何禁用在我的代码中的部分中滑动，以便只能通过单击操作栏中的部分按钮来完成导航？

[我的操作栏 Java 代码](http://pastebin.com/CxMCdf4F)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:44:59.493

操作栏的主要目标是：

> 为识别应用品牌和用户位置提供专用空间。这是通过左侧的应用程序图标或徽标和活动标题来完成的。但是，如果当前视图由导航标签（例如当前选定的选项卡）标识，您可以选择删除活动标题。跨不同应用程序提供一致的导航和视图优化。操作栏提供用于在片段之间切换的内置选项卡导航。它还提供了一个下拉列表，您可以将其用作替代导航模式或优化当前视图（例如按不同标准对列表进行排序）。使活动的关键操作（例如“搜索”、“创建”、“分享”等）以可预测的方式突出并可供用户访问。您可以通过将选项菜单中的项目直接放在操作栏中作为“操作项”来提供对关键用户操作的即时访问。动作项还可以提供“动作视图”，它为更直接的动作行为提供嵌入式小部件。未提升为操作项的菜单项在溢出菜单中可用，由设备菜单按钮（如果可用）或操作栏中的“溢出菜单”按钮（当设备不包含菜单按钮时）显示）。

来自[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

# redis - 确保redis中排序集的唯一性

> ID：13831926
> 
> 赞同：7
> 
> 时间：2012-12-12T02:38:07.207
> 
> 标签：redis

我正在尝试存储媒体对象并通过redis在一定的时间范围内检索它们。我选择了一个排序集数据类型来执行此操作。我正在添加如下元素：

```
zAdd: key: media:552672 score: 1355264694
zAdd: key: media:552672 score: 1355248565
zAdd: key: media:552672 score: 1355209157
zAdd: key: media:552672 score: 1355208992
zAdd: key: media:552672 score: 1355208888
zAdd: key: media:552672 score: 1355208815 
```

其中 key 对获取媒体的位置 id 是唯一的，并且 score 是媒体对象的创建时间。该值是媒体对象的 json_decode。

当我使用 检索时`zRevRangeByScore`，偶尔会有重复的条目。我本质上是使用 Redis 作为外部 API 的缓冲区，如果用户在 X 秒内进行两次相同的 API 调用，那么我将从缓存中检索结果，否则，我会将其添加到缓存中，而不是检查查看它是否由于定义了不包含重复项的集合而已经存在。可能的已知问题：如果媒体对象属性在缓存之间发生变化，它将显示为重复

有没有更好的方法来存储这种类型的数据而无需在 redis 客户端进行检查？

**TLDR；** 在 Redis 中存储和检索对象的最佳方式是什么，您可以通过时间戳选择一系列对象并确保它们是唯一的？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-13T16:06:08.720

让我们确保我们谈论的是相同的事情，所以这里是 Redis 排序集的术语：

```
ZADD key score member [score] [member]
summary: Add one or more members to a sorted set, or update its score if it already exists 
```

*   `key`- 排序集的“名称”
*   `score`- 分数（在我们的例子中是时间戳）
*   `member`- 与分数相关的字符串
*   一个有序集合有很多成员，每个成员都有一个分数

听起来您正在使用对象的 JSON 编码字符串作为成员。成员是排序集中的唯一成员。正如您所说，如果对象发生更改，它将作为新成员添加到排序集中。那可能不是你想要的。

排序集是 Redis 按时间戳存储数据的方式，但存储在集合中的成员通常是指向 Redis 中另一个键的“指针”。

根据您的描述，我认为您需要这种数据结构：

*   按创建的时间戳存储所有媒体的排序集
*   每个唯一媒体的字符串或哈希

我建议将媒体对象存储在散列中，因为这样可以提供更大的灵活性。例子：

```
# add some members to our sorted set
redis 127.0.0.1:6379> ZADD media 1000 media:1 1003 media:2 1001 media:3
(integer) 3
# create hashes for our members
redis 127.0.0.1:6379> HMSET media:1 id 1 name "media one" content "content string for one"
OK
redis 127.0.0.1:6379> HMSET media:2 id 2 name "media two" content "content string for two"
OK
redis 127.0.0.1:6379> HMSET media:3 id 3 name "media three" content "content string for three"
OK 
```

有两种方法可以检索以这种方式存储的数据。如果您需要获取特定时间戳范围内的成员（例如：过去 7 天），则必须使用它`ZREVRANGEBYSCORE`来检索成员，然后遍历这些成员以获取每个哈希值`HGETALL`或类似值。请参阅[流水线](http://www.redis.io/topics/pipelining)以了解如何通过一次调用服务器来执行循环。

```
redis 127.0.0.1:6379> ZREVRANGEBYSCORE media +inf -inf
1) "media:2"
2) "media:3"
3) "media:1"
redis 127.0.0.1:6379> HGETALL media:2
1) "id"
2) "2"
3) "name"
4) "media two"
5) "content"
6) "content string for two" 
```

如果您只想获取最后 n 个成员（或例如：第 10 个最近到第 100 个最近的成员），您可以使用`SORT`来获取项目。请参阅[排序文档](http://www.redis.io/commands/sort)以了解语法以及如何检索不同的哈希字段、限制结果和其他选项。

```
redis 127.0.0.1:6379> SORT media BY nosort GET # GET *->name GET *->content1) DESC
1) "media:2"
2) "media two"
3) "content string for two"
4) "media:3"
5) "media three"
6) "content string for three"
7) "media:1"
8) "media one"
9) "content string for one" 
```

**注意：**按分数 ( ) 对已排序的哈希进行排序`BY nosort`仅适用于 Redis 2.6。

如果您计划获取最后一天、一周、一个月等的媒体。我建议为每个媒体使用单独的排序集，并用于`ZREMRANGEBYSCORE`删除旧成员。然后，您可以只使用`SORT`这些排序集来检索数据。

# sql-server-2008 - 如何将连接与两个表和一个参数一起使用

> ID：13831928
> 
> 赞同：0
> 
> 时间：2012-12-12T02:38:11.037
> 
> 标签：sql-server-2008, join

我有这 4 列的表 1

```
FirstName LastName State ID 
```

包含这 2 列的表 2

```
ID Phone 
```

如何使用这样的参数加入它们

```
SELECT Table1.FirstName, Table1.LastName FROM Table1 INNER JOIN Table2 ON Table1.ID = Table2.ID WHERE FirstName = @FirstName 
```

这样做没有给我任何东西。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:50:26.670

```
SELECT FirstName, LastName FROM Table1 INNER JOIN Table2 ON Table1.ID = Table2.ID AND FirstName = @FirstName 
```

# asp.net-mvc - MVC 4 全局异常过滤器如何实现？

> ID：13831933
> 
> 赞同：17
> 
> 时间：2012-12-12T02:38:50.587
> 
> 标签：asp.net-mvc, asp.net-mvc-4

如何在 MVC4 中实现全局异常处理程序，因为它似乎与 MVC3 不同。

不知道如何实现以下内容：

```
public class ErrorHandlerAttribute: System.Web.Mvc.FilterAttribute, 
                                    IExceptionFilter
{
    public Task ExecuteExceptionFilterAsync(
            HttpActionExecutedContext actionExecutedContext, 
            CancellationToken cancellationToken)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-20T17:27:25.277

不幸的是，Eric Leschinski 的评论中提供的链接仅显示了如何实现[System.Web.Mvc.IExceptionFilter](http://msdn.microsoft.com/en-us/library/system.web.mvc.iexceptionfilter%28v=vs.108%29.aspx)接口，而不是[System.Web.Http.Filters.IExceptionFilter](http://msdn.microsoft.com/pt-br/library/system.web.http.filters.iexceptionfilter%28v=vs.108%29.aspx)接口。第一个用于常规 MVC 控制器，而第二个针对[ApiCorollers](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)。

这是我想出的一个简单的类示例，用于记录我的 ApiControllers 中抛出的未处理异常：

```
public class ExceptionLoggerFilter: IExceptionFilter
{
    public ExceptionLoggerFilter(Logger logger)
    {
        this.logger = logger;
    }

    public bool AllowMultiple { get { return true; } }

    public Task ExecuteExceptionFilterAsync(
            HttpActionExecutedContext actionExecutedContext,
            CancellationToken cancellationToken)
    {
        return Task.Factory.StartNew(() =>
        {
            logger.Error("web service error", actionExecutedContext.Exception);
        }, cancellationToken);
    }

    private Logger logger;
} 
```

启用此过滤器所需要做的就是在您的 Global.asax Application_Start 方法中注册它：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    // allocate filter and add it to global configuration
    var exceptionLogger = new ExceptionLoggerFilter(Container.Get<Logger>());
    GlobalConfiguration.Configuration.Filters.Add(exceptionLogger);

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
} 
```

我希望这可以帮助其他谷歌员工！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-31T15:26:37.467

我为它的 MVC 部分创建异常处理程序的方式，我创建了一个实现 IExceptionFilter 的类

```
public class MVCExceptionFilter : IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        Trace.TraceError(filterContext.Exception.ToString());
    }
} 
```

然后你在 Global.asax.cs 里面注册它`protected void Application_Start()`

该方法已经包含该行

```
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters); 
```

所以，你需要在它上面添加这一**行**

```
GlobalFilters.Filters.Add(new MVCExceptionFilter()); 
```

# asp.net - 潜在危险值，错误不会消失

> ID：13831947
> 
> 赞同：1
> 
> 时间：2012-12-12T02:40:12.773
> 
> 标签：asp.net, validation, error-handling, web-config, webmatrix

“从客户端检测到潜在危险的 Request.Form 值”

我知道出现此错误屏幕的原因，并且我已经阅读了此处提出的所有其他问题，并且大多数答案以及错误屏幕上的建议都说：

```
<httpRuntime requestValidationMode="2.0" /> 
```

和

```
<pages validateRequest="false" /> 
```

在我已经完成的 Web.Config 文件中，您可以在此处看到：

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <system.web>
  <httpRuntime requestValidationMode="2.0" /><pages validateRequest="false" />
    <compilation debug="true" targetFramework="4.0"><assemblies><add assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" /></assemblies></compilation>
 <customErrors mode="Off" />
 </system.web>
    <system.data>
      <DbProviderFactories>
         <remove invariant="System.Data.SqlServerCe.4.0" />
        <add invariant="System.Data.SqlServerCe.4.0" name="Microsoft® SQL Server® Compact 4.0" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=4.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data>
</configuration> 
```

如果有任何帮助，我在 Webmatrix 2.0 中使用 asp.net。我到处搜索以找到不同的解决方案，但每个人都在说验证模式和验证请求的事情，但仍然无法正常工作，有没有人知道其他可能的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T08:01:51.863

使用网页，您可以使用 Request.Unvalidated() 方法为单个表单字段关闭请求验证。

阅读 Mike Brind 的这篇优秀文章的“HTML 输入和 XSS 攻击”一章：[WebMatrix - 保护您的网页站点](http://www.mikesdotnetting.com/Article/159/WebMatrix-Protecting-Your-Web-Pages-Site)。

# objective-c - 使用目标 zip 解压缩 NSData

> ID：13831953
> 
> 赞同：0
> 
> 时间：2012-12-12T02:41:04.210
> 
> 标签：objective-c, ios, zlib, unzip

我最近才发现[Objective Zip](https://github.com/flyingdolphinstudio/Objective-Zip) 我一直在阅读说明以在我的项目中设置它。但是我不确定如何使用它来解压缩我想要解压缩的一些 NSData。

我查看了示例解决方案，它似乎正在对 zip 文件执行解压缩，代码看起来大致像这样

```
ZipFile *unzipFile= [[ZipFile alloc] initWithFileName:filePath mode:ZipFileModeUnzip];

[unzipFile goToFirstFileInZip];
ZipReadStream *read1= [unzipFile readCurrentFileInZip]; 
```

给出或接受一些其他说明，这是他们向您展示如何使用它，他们的示例代码在[这里](https://github.com/flyingdolphinstudio/Objective-Zip/blob/master/Classes/Objective_ZipViewController.m)

我想知道如何做同样的事情，但使用 NSData？还是我必须将 NSData 转换为 zipFile？如果是这样，如何正确执行？

如果 zlib 压缩，我试图解压缩的 NSData...任何示例代码都会有所帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:10:26.137

这是[https://stackoverflow.com/a/6466832/751885](https://stackoverflow.com/a/6466832/751885)

我使用以下两种方法处理 NSData

并打电话

```
saveToFile 
```

方法写入磁盘。

```
[[self compressData:uncompressedData] writeToFile:@"fileName.zip" atomically:YES]; 
```

压缩：

```
-(NSData*) compressData:(NSData* )uncompressedData {
if ([uncompressedData length] == 0) return uncompressedData;

z_stream strm;

strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;
strm.opaque = Z_NULL;
strm.total_out = 0;
strm.next_in=(Bytef *)[uncompressedData bytes];
strm.avail_in = (unsigned int)[uncompressedData length];

// Compresssion Levels:
//   Z_NO_COMPRESSION
//   Z_BEST_SPEED
//   Z_BEST_COMPRESSION
//   Z_DEFAULT_COMPRESSION

if (deflateInit2(&strm, Z_DEFAULT_COMPRESSION, Z_DEFLATED, (15+16), 8, Z_DEFAULT_STRATEGY) != Z_OK) return nil;

NSMutableData *compressed = [NSMutableData dataWithLength:16384];  // 16K chunks for expansion

do {

    if (strm.total_out >= [compressed length])
        [compressed increaseLengthBy: 16384];

    strm.next_out = [compressed mutableBytes] + strm.total_out;
    strm.avail_out = (unsigned int)([compressed length] - strm.total_out);

    deflate(&strm, Z_FINISH);  

} while (strm.avail_out == 0);

deflateEnd(&strm);

[compressed setLength: strm.total_out];
return [NSData dataWithData:compressed];
} 
```

解压缩：

```
-(NSData*) uncompressGZip:(NSData*) compressedData {
if ([compressedData length] == 0) return compressedData;

NSUInteger full_length = [compressedData length];
NSUInteger half_length = [compressedData length] / 2;

NSMutableData *decompressed = [NSMutableData dataWithLength: full_length + half_length];
BOOL done = NO;
int status;

z_stream strm;
strm.next_in = (Bytef *)[compressedData bytes];
strm.avail_in = (unsigned int)[compressedData length];
strm.total_out = 0;
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;

if (inflateInit2(&strm, (15+32)) != Z_OK) return nil;

while (!done) {
    // Make sure we have enough room and reset the lengths.
    if (strm.total_out >= [decompressed length]) {
        [decompressed increaseLengthBy: half_length];
    }
    strm.next_out = [decompressed mutableBytes] + strm.total_out;
    strm.avail_out = (unsigned int)([decompressed length] - strm.total_out);

    // Inflate another chunk.
    status = inflate (&strm, Z_SYNC_FLUSH);
    if (status == Z_STREAM_END) {
        done = YES;
    } else if (status != Z_OK) {
        break;
    }
}
if (inflateEnd (&strm) != Z_OK) return nil;

// Set real length.
if (done) {
    [decompressed setLength: strm.total_out];
    return [NSData dataWithData: decompressed];
} else {
    return nil;
}
} 
```

# android - 在 Android 中一起使用 textAutoCorrect 和 textAutoComplete

> ID：13831955
> 
> 赞同：3
> 
> 时间：2012-12-12T02:41:07.687
> 
> 标签：android, android-layout, autocomplete, android-edittext

我试图创建一个 EditText `android:inputType="textMultiLine|textAutoCorrect|textCapSentences|textAutoComplete"`

不幸的是，Android 不允许我同时使用*`textAutoCorrect`*和*`textAutoComplete`*。*`textAutoCorrect`*使我能够在键入时选择多个选项（用于拼写检查），并*`textAutoComplete`*允许我添加一个下拉列表来为单个单词提供自定义完成选项。

但是，当两者都添加时，*`textAutoComplete`*似乎优先。由于这是一个多行编辑文本，我希望能够提供拼写检查以及自定义选项。我认为这是可能的，因为 Google+ 的作曲家允许拼写检查，但它也让我提及用户（这将是自定义选择）。MultiAutoCompleteTextViews 将*`textAutoComplete`*inputType 添加到视图中，所以我也不能使用它们。

任何人都可以帮我想出一个解决我的问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:16:37.120

查看文档我会说这是不可能的。

```
textAutoCorrect     0x00008001   Can be combined with text and its variations to request auto-correction of text being input. Corresponds to TYPE_TEXT_FLAG_AUTO_CORRECT.
textAutoComplete    0x00010001   Can be combined with text and its variations to specify that this field will be doing its own auto-completion and talking with the input method appropriately. Corresponds to TYPE_TEXT_FLAG_AUTO_COMPLETE. 
```

您可以在这里阅读更多相关信息：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

# kinect - 身体超出范围时的关节值

> ID：13831956
> 
> 赞同：0
> 
> 时间：2012-12-12T02:41:10.810
> 
> 标签：kinect, kinect-sdk, skeleton-code

我试图让 Kinect 能够自动调整其角度以能够检测到所有骨架关节，我使用循环遍历所有关节并检查它们的值，但是我不知道存储的值是什么 -例如："skeleton.Joints[JointID.HandRight]" - 如果没有检测到关节。有人可以使用官方 Kinect SDK 帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:56:06.093

在每个关节上使用枚举将允许您确定是否正在跟踪`JointTrackingState`特定对象。`Joint`

例如：`skeleton.Joints[JointID.HandRight].TrackingState`会告诉你关节是否是：

*   *已跟踪*：SDK 正在积极跟踪关节，并返回可信任的数据。
*   *推断*：SDK 对关节的位置没有信心，但可以做出有根据的猜测。
*   *NotTracked*：关节没有被跟踪，没有可用的数据。

您可以循环浏览每个关节并检查它们的状态。根据是否是`Tracked`，`Inferred`或者`NotTracked`您可以采取适当的措施。

Kinect for Windows Developer Toolkit 中的“Skeleton Basics”示例演示了如何根据这些值调整绘制的骨架。

# java - 应用程序构建成功但没有输出

> ID：13831959
> 
> 赞同：-5
> 
> 时间：2012-12-12T02:41:16.110
> 
> 标签：java

我将继续从电子书“Java 编程简介”中学习。在那本电子书中，我使用了这种方法：

```
/**
 * This method scans the array of cards in a for loop.
 */
public void getDetialsOfCards() {
    // Declare a local variable.
    MembershipCard card = null;

    // note the use of the instanceof operator
    for (int i = 0; i < noOfCards; i++) {
        if (cards[i] instanceof DvdMembershipCard) {
            card = cards[i];
            System.out.println("This is a DVD card with " + getNoOnLoan()
                    + " DVDs currently on loan.");

        } else if (cards[i] instanceof GameMembershipCard) {

            card = cards[i];
            System.out.println("This is a games card with " +
                    getNoOnLoan() + " CDs currently on loan");

        } else {
            System.out.println("Neither type of card.");

        }
    } // End of for loop.

} 
```

这是我的主要方法：

```
public class CompundIfElsegetDetialsOfCards {

    // private static int noOfCards = 2;
    private static int NoOnLoan;
    private static Object[] cards;

    private static DvdMembershipCard[] dvd = new DvdMembershipCard[6];
    private static GameMembershipCard[] game = new GameMembershipCard[6];
    private static MembershipCard card;

    public static void getDetialsOfCards() {
        // Declare a local variable.

        int noOfCards = 6;

        // note the use of the instanceof operator
        for (int i = 0; i < noOfCards; i++) {
            if (cards[i] instanceof DvdMembershipCard) {
                card.equals(cards[i]);

                System.out.println("This is a DVD card with " + getNoOnLoan()
                        + " DVDs currently on loan.");

            } else if (cards[i] instanceof GameMembershipCard) {
                card.equals(cards[i]);

                System.out.println("This is a games card with " +
                        getNoOnLoan() + " CDs currently on loan");

            } else {
                System.out.println("Neither type of card.");

            }

        } // End of for loop.

    }

    public static void main(String[] args) {
        CompundIfElsegetDetialsOfCards.getDetialsOfCards();
    }

    private static int getNoOnLoan() {

        System.out.println("jumlah Loan ");
        return NoOnLoan;
    }

    private static class MembershipCard {

        public MembershipCard() {

        }
    }

    private int i;

    private static class DvdMembershipCard {
        public DvdMembershipCard() {

        }
    }

    private static class GameMembershipCard {
        public GameMembershipCard() {

        }
    }
} 
```

代码编译成功，但没有输出。我必须添加什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:56:00.780

你确定你没有收到任何异常。

您将`java.lang.NullPointerException`在以下行中收到

```
if (cards[i] instanceof DvdMembershipCard) 
```

您尚未将任何对象分配给`static Object[] cards;`参数，您将收到 Null 指针异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T02:57:20.580

你永远不会用元素填充数组。没有`instanceof`匹配项`null`......它只会跳过整个代码（没有任何异常）。

您调用的代码的另一个缺陷（在第二个块中）`card.equals(cards[i])`如果`card = cards[i]`没有分配新值。

# jquery - 使用 jQuery 读取存储在我的响应标头中的 JSON

> ID：13831962
> 
> 赞同：2
> 
> 时间：2012-12-12T02:41:33.077
> 
> 标签：jquery, ruby-on-rails

我希望能够使用 jquery 读取我的应用程序的响应标头，具体来说，我将标头“X-Messages”设置为 rail 的 flash 消息哈希的字符串表示形式。

我的问题与此类似： [https ://stackoverflow.com/a/2729454/103739](https://stackoverflow.com/a/2729454/103739)

然而，我有一个主要区别，这不是 JSON 响应。我只想用 jQuery 读取我的 HTML 页面中返回的标题，并为 JSON 对象中的每个项目记录一些内容。

这是我在控制器中所做的事情：

```
class ApplicationController < ActionController::Base
  after_filter :flash_to_headers

  # ...

  def flash_to_headers
    response.headers['X-Messages'] = flash.to_hash.to_json.to_s
  end
end 
```

然后这就是我难过的地方，我想在页面加载时获取这个 JSON 对象并只显示一个常规的`alert`，或者`console.log`：

```
$(document).ready(function() {
  var messages = document.getResponseHeader('X-Messages');
  console.log(messages);
}); 
```

好的，现在显然`getResponseHeader()`, 不是一个函数 on `document`，但是我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T03:14:08.760

您可以使用这样的 Ajax 调用来获取它：

```
var xhr = $.ajax({
        type: "POST",
        data: {},
        url: "yoururl.html",
        success: function(output, status) {
            var messages = $.parseJSON(xhr.getResponseHeader('X-Messages'));
            console.log(messages);
        },
        error: function(output) {
            console.log(output);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T03:09:07.563

HTML DOM 旨在访问和操作 HTML 文档。

HTTP 标头存在于 HTTP 协议中，而不是 HTML 文档中。

我不认为您可以从 HTML DOM 中获取 HTTP 标头，因为您可以通过 FTP 或其他方法获取 HTML DOM，您是如何从 FTP 中获取 HTTP 标头的？

如果要获取此标头，则必须使用 ajax 调用来获取它。

但是，有一个例外：如果您正在编写 chrome（或其他浏览器）扩展程序，您可以从 chrome API 获取 headers。

# c# - 如何从后面的代码中打开日期选择器的日历？

> ID：13831963
> 
> 赞同：1
> 
> 时间：2012-12-12T02:41:33.493
> 
> 标签：c#, wpf, datepicker

我正在使用 WPF 和 C# 来开发我的应用程序。在我的应用程序中，我有两个日期选择器。第一个日期选择器要求用户选择出发日期，第二个日历要求用户选择返回日期。所以我想要做的是，在用户选择出发日期后，第二个日期选择器的日历将打开。我可以知道打开日历的事件是什么吗？

```
 <DatePicker Name="departDate" SelectedDateChanged="departDate_SelectedDateChanged">   
 <DatePicker Name="returnDate" > 
```

C# 代码片段

```
private void departDate_SelectedDateChanged(object sender, SelectionChangedEventArgs e)
{
    //returnDate.calendarOpen??
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T03:43:27.450

我找到了答案，使用 isDropDownOpen ：

```
private void departDate_SelectedDateChanged(object sender, SelectionChangedEventArgs e)
{
   returnDate.isDropDownOpen = true;
} 
```

# ios - 如何在 Xcode 中添加此约束？看来我的relatedBy: 论点是错误的

> ID：13831964
> 
> 赞同：0
> 
> 时间：2012-12-12T02:41:35.877
> 
> 标签：ios, xcode, ios6

我的代码如下，以及我的应用程序的图像。基本上我想在`viewDidLoad`这个视图控制器的方法中添加一个约束来对齐两个标签，以便它们从相同的 x 位置开始。但是，无论出于何种原因，我都会收到此警告：

> 指向整数转换的不兼容指针将“UIView *”发送到“NSLayoutRelation”类型的参数（又名“枚举 NSLayoutRelation”）；

当我运行该应用程序时，我收到以下错误：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** +[NSLayoutConstraint constraintWithItem:attribute:relatedBy:toItem:attribute:multiplier:constant:]: Unknown layout attribute”

![在此处输入图像描述](../Images/24fa9a8436602c5649ffa5a58b1a88e8.png)

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:self.carMakeLabel attribute:NSLayoutRelationEqual relatedBy:self.view toItem:self.carModelLabel attribute:NSLayoutAttributeLeading multiplier:1.0 constant:0];

[self.view addConstraint:constraint]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T03:03:53.787

尝试：

```
NSLayoutConstraint *constraint = [NSLayoutConstraint constraintWithItem:self.carMakeLabel attribute:NSLayoutAttributeLeading relatedBy:NSLayoutRelationEqual toItem:self.carModelLabel attribute:NSLayoutAttributeLeading multiplier:1.0 constant:0];

[self.view addConstraint:constraint]; 
```

确保 self.carModelLabel 和 self.carMakeLabel 都在 self.view 的视图层次结构中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T02:56:47.787

该方法的签名是

```
+(id)constraintWithItem:(id)view1 attribute:(NSLayoutAttribute)attr1 relatedBy:(NSLayoutRelation)relation toItem:(id)view2 attribute:(NSLayoutAttribute)attr2 multiplier:(CGFloat)multiplier constant:(CGFloat)c; 
```

你用过

```
 constraintWithItem:self.carMakeLabel attribute:NSLayoutRelationEqual relatedBy:self.view toItem:self.carModelLabel attribute:NSLayoutAttributeLeading multiplier:1.0 constant:0]; 
```

发送到属性的数据类型是关系类型：NSLayoutRelationEqual

我认为您的第一个属性和 relatedBy 参数已切换。

你可能需要纠正那个

# tcp - lo 64k mtu 的优势？

> ID：13831965
> 
> 赞同：1
> 
> 时间：2012-12-12T02:41:36.677
> 
> 标签：tcp, mtu

我在 Linux 内核中看到了[这个提交](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=0cf833aefaa85bbfce3ff70485e5534e09254773)并被它弄糊涂了：

> 16436 字节的环回当前 mtu 允许每帧不超过 3 个 MSS TCP 段，即 48 KB。将 mtu 更改为 64K 允许 TCP 堆栈构建大帧并显着减少堆栈开销。
> 
> 批量 TCP 传输的性能提升可高达 30%，部分原因是我们现在有两个 64KB 段的一个 ACK​​ 消息，并且达到 /proc/sys/net/ipv4/tcp_reordering 默认限制的可能性较低。

```
--- a/drivers/net/loopback.c
+++ b/drivers/net/loopback.c
static void loopback_setup(struct net_device *dev)
{
-       dev->mtu                = (16 * 1024) + 20 + 20 + 12;
+       dev->mtu                = 64 * 1024; 
```

lo 与 TCP 传输有什么关系？它不只是一个环回地址，无论出于何种原因，您都可以在其中查看以太网流量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:44:28.390

由于这是对环回接口的更改，因此可以提高*本地接口上的*传输性能。例如，如果您 FTP 到 127.0.0.1。

# file - htaccess url 重写（没有 301！），但重复的内容

> ID：13831967
> 
> 赞同：0
> 
> 时间：2012-12-12T02:42:12.807
> 
> 标签：file, .htaccess, duplicates

我有一个名为“abc.html”的文件。在过去，这被称为“abc.cfm”。从局外人的角度来看，我希望它看起来像 abc.cfm 仍然存在（它应该是 abc.html 的内容）。

目前我的 htaccess 中有这个：RewriteRule ^abc.cfm$ abc.html [L]

这完美地工作。每当您访问 abc.cfm 时，它都会显示 abc.html 的内容，没有我们的重定向（来自用户的 POV）。

问题是我现在也可以访问 abc.html，这是重复的内容。我可以通过添加一个规范的说法来解决这个问题 abc.cfm 是原始 URL。我只是想知道是否有可能从 html 到 cfm 文件有一个 301（它在内部再次调用 html）。当然没有进入无限循环:-)

我也愿意接受其他解决方案。（但我无法更改指向 abc.cfm 文件的链接，并且我不希望 301 重定向到 abc.html 文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:03:30.180

```
Redirect 301 /abc.html /abc.cfm 
```

将此行放在您的`RewriteEngine on`指令之前。

如果您想在 mod_rewrite 中执行此操作，则可以改用以下内容：

```
RewriteRule ^abc.html$ abc.cfm [R=301, L] 
```

这将强制用户的浏览器只能请求 .cfm 页面，而内部服务器知道从 .html 页面获取内容。此规则需要在您上面列出的内部重写规则之前，但在`RewriteEngine on`指令之后。

# javascript - 仅返回 JavaScript 字符串中最后一个下划线后的文本

> ID：13831974
> 
> 赞同：9
> 
> 时间：2012-12-12T02:43:20.587
> 
> 标签：javascript

如果我有这样的字符串：

```
var str = 'Arthropoda_Arachnida_Zodariidae_Habronestes_hunti'; 
```

我怎样才能在最后一个下划线之后得到字符串的最后一部分？

在没有下划线的情况下，只返回原始字符串。

在这种情况下，我只想`'hunti'`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T02:46:59.590

```
var index = str.lastIndexOf("_");
var result = str.substr(index+1); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-12T02:44:51.897

这很简单。用下划线分割字符串，取最后一个元素。

```
var last = str.split("_").pop(); 
```

当字符串不包含任何下划线时，这甚至会起作用（它会根据需要返回原始字符串）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T03:03:57.977

您可以使用正则表达式：

```
'Arthropoda_Arachnida_Zodariidae_Habronestes_hunti'.match(/[^_]*$/)[0]; 
```

# elasticsearch - Elasticsearch 高更新索引压缩

> ID：13831976
> 
> 赞同：1
> 
> 时间：2012-12-12T02:43:35.470
> 
> 标签：elasticsearch

ES 是否对其近乎实时的索引进行定期压缩？它多久会发生一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:09:36.377

我认为您必须自己调用[优化 API](http://www.elasticsearch.org/guide/reference/api/admin-indices-optimize.html)。

# android - html5视频android：全屏保持纵横比

> ID：13831979
> 
> 赞同：0
> 
> 时间：2012-12-12T02:43:38.060
> 
> 标签：android, html5-video

我正在使用视频标签在 iPad 和 Android 设备中流式传输 hls。
我在 Android 中遇到一个问题，在进入全屏模式后，视频被拉伸以填满设备的屏幕，这打破了原来的宽高比。

旋转后它会走正确的路。

这是我正在使用的示例代码，虽然它是 hls，但我相信普通视频文件也存在同样的问题。

```
<video id="main-video" src="my_hls_link.m3u8" style="width:100%; height:270px;">
</video> 
```

和 javascript：

```
var player = document.getElementById("main-video");
player.addEventListener('webkitbeginfullscreen', function(){
            this.load();
            this.play();
          }, false); 
```

在 Nexus 7 Android 4.1 和 kindlefire Android 4.0 中使用 chrome 进行了测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:31:47.603

我可以解决这个问题：

```
//fixing the bug in android that stretch video on load
      function fix_stretch_video(){
        var check_interval = setInterval(function(){
          $('.pl-loading-btn').css('display', 'block');
          if (player.videoWidth != 0) {
            $('.pl-loading-btn').css('display', 'none');
            $('video').css('width', '99%');
            $('video').css('width', '100%');
            clearInterval(check_interval);
          }
        },100);
      } 
```

你不能在某些设备（或安卓版本）上工作。至少它适用于我的nexus 7

# gnuplot - 为什么 gnuplot 网格不延伸到整个地块？

> ID：13831981
> 
> 赞同：5
> 
> 时间：2012-12-12T02:44:13.310
> 
> 标签：gnuplot

使用 gnuplot 4.6 patchlevel 1，使用以下命令，

```
set grid linewidth 1 linecolor rgb"#888888"
set datafile separator ","
plot for [n=2:100] "data.csv" using 1:(column(n)) with lines linewidth 2 
```

以及文件“data.csv”中的以下示例数据，

```
time,S1,S2
0,0.00015,0
0.1,0.0001357256127053939,1.427438729460607e-005
0.2,0.0001228096129616973,2.719038703830272e-005
0.3,0.0001111227331022577,3.887726689774233e-005
0.4,0.0001005480069053459,4.945199309465411e-005
0.5,9.097959895689501e-005,5.902040104310499e-005
0.6,8.232174541410396e-005,6.767825458589604e-005
0.7,7.448779556871142e-005,7.551220443128858e-005
0.8,6.739934461758323e-005,8.260065538241677e-005
0.9,6.098544896108986e-005,8.901455103891014e-005
1,5.518191617571635e-005,9.481808382428365e-005 
```

结果图如下所示：

![在此处输入图像描述](../Images/dfe9df0b26e1017a646fd99940cd72be.png)

问题：为什么网格只从底部延伸一部分，而不是覆盖整个情节？我对 set xtics 和 ytics 命令、网格参数等进行了大量实验，但未能让网格覆盖整个情节。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:35:51.127

好问题！事实上，答案是网格*确实覆盖了整个情节*。问题是关键正在接管。再试一次，但`unset key`在你的 plot 命令之前有一个 in 。

发生的事情是 gnuplot 在键中为所有没有数据的列保留空间。由于没有找到合理的数据，因此保留的空间中没有任何内容。最终，这也会将可见的 2 行推出可视画布区域。

我已经使用 x11、png、postscript 和 pngcairo 终端复制了这个。

请注意，此行为似乎取决于版本：

使用 gnuplot 4.4.2（OS-X，png 终端）

![在此处输入图像描述](../Images/00fd8c71d8502f818c68a251e2e41c92.png)

使用 gnuplot 4.6.0（OS-X，png 终端）

![在此处输入图像描述](../Images/84dfca4d5fb5669736e30bb5a5738e2e.png)

对于那些使用 gnuplot 4.4.4 的人，也许有一个错误修复使它适用于 gnuplot 4.4.4，然后是回归。它似乎也持续存在于 gnuplot 4.7.0 中。我可能会提交错误报告。

# php - 注意：未定义的索引虽然仍然放 isset

> ID：13831986
> 
> 赞同：0
> 
> 时间：2012-12-12T02:44:29.190
> 
> 标签：php, mysql

我会尝试 put isset 但仍然给我一个通知，你们能帮帮我吗..就像我在学习 php 之前所说的那样，我可以通过输入 error _reporting (E_ALL & ~E_NOTICE) 来使通知消失；但我还是想修...

```
 Notice: Undefined index: IdUser in C:\wamp\www\contract\content\maintanace\add_newUser.php on line 9
        Notice: Undefined index: Categori in C:\wamp\www\contract\content\maintanace\add_newUser.php on line 10

       $IdUser= isset($_POST['IdUser']);
       $Categori= isset($_POST['Categori']); 

       $IdUser= $_SESSION['IdUser'];
       $Categori= $_SESSION['Categori'];

       $IdUser= (isset($_SESSION['IdUser'])) ? $_SESSION['IdUser'] : false;
       $Categori= (isset($_SESSION['Categori'])) ? $_SESSION['Categori'] : false;

       if($IdUser!='' && $Categori= '1')

            {
                    $apply = mysql_query("SELECT * FROM user WHERE IdUser=    '".$IdUser."' AND Categori='".$Categori."'");
                    $result = mysql_fetch_array($apply);
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:11:02.513

您可以这样做，也可以使用三元语句

```
 if(isset($_POST['IdUser']) || isset($_POST['Categori']))
        {
        $IdUser = $_POST['IdUser'];
        $Categori= $_POST['Categori']; 
        }
        elseif(isset($_SESSION['IdUser']) || isset($_SESSION['Categori']))
            {
                $IdUser = $_SESSION['IdUser'];
                $Categori= $_SESSION['Categori'];
            }
            else
                {
                    $IdUser = "";
                    $Categori= "";
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T02:46:35.470

isset 返回一个真或假值，因此

```
$IdUser= isset($_POST['IdUser']); 
```

将 $IdUser 设置为 true 或 false。这不是你想要完成的。

也许尝试这样的事情？虽然我仍然不完全确定你在问什么。

```
if(!isset($_SESSION['IdUser'])){
//Register SESSION variables.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T02:46:46.980

您没有在会话索引上检查 isset。

你可以尝试这样的事情：

```
$IdUser= (isset($_SESSION['IdUser'])) ? $_SESSION['IdUser'] : false;
$Categori= (isset($_SESSION['Categori'])) ? $_SESSION['Categori'] : false; 
```

# javascript - 什么可能导致我的 javascript 中出现大量内存峰值？

> ID：13831993
> 
> 赞同：0
> 
> 时间：2012-12-12T02:45:01.930
> 
> 标签：javascript, html, memory, optimization

运行我的代码后，我得到： ![这](../Images/b7ea48df04278b36bc50cb5486993511.png)

每秒多次在 4 到 12MB 之间不断达到峰值。

[这是完整的东西。](http://reasoner.comoj.com/swarm/)

我已经将它缩小到可能在 draw() 函数或 settarget() 函数中，但我无法弄清楚是什么导致了这么多垃圾。

[这是代码](http://reasoner.comoj.com/swarm/swarm.js)

是什么导致了这么多垃圾？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:11:49.780

从我可以使用[Chrome 的堆分析器](https://developers.google.com/chrome-developer-tools/docs/heap-profiling)收集到的信息来看，您似乎正在创建大量的数组、数字和字符串。（这样的动画并不奇怪。）这条线对我来说很可疑：

```
rgbcolor = 'rgb('+Math.floor(Math.random()*256)+','+Math.floor(Math.random()*256)+','+Math.floor(Math.random()*256)+')'; 
```

每个帧上的每个点都会调用它，并创建（至少）一个新的 String 对象，以及 Math 在后台执行的各种与 Number 相关的东西。

也就是说，这会给您带来实际问题，还是只是锯齿状内存配置文件困扰着您？这种内存配置文件对于垃圾收集运行时并不少见，而且锯齿波的峰值不会随着时间的推移而增加这一事实似乎表明您实际上并没有在任何地方发生内存泄漏。而且，Chrome（和大多数现代浏览器）也非常擅长优化创建此类瞬态对象的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T03:03:52.667

我实际上认为它的这条线在这里：

```
 window.setTimeout(callback, 1000/60);. 
```

如果您查看`Memory`控制台工具中的详细信息，您将看到动画帧正在被触发，然后重新触发，然后重新触发每个`17ms`恰好被`1000/60`舍入的帧。

您可以打开初始呼叫：

```
(function animloop() {
window.requestAnimFrame(animloop); 
```

你会看到，`17ms`在这之后你的进程再次产生了自己。

# windows - DwmIsCompositionEnabled 是否仍在 Windows 8 中使用？

> ID：13831997
> 
> 赞同：5
> 
> 时间：2012-12-12T02:45:49.713
> 
> 标签：windows, dwm

根据[启用和控制 DWM 组成](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969538.aspx)：

> **注意** 从 Windows 8 开始，本节中的信息不再有效。DWM 不能再以编程方式被禁用，也不能在应用程序尝试绘制到主显示表面时被禁用。以下信息仅适用于 Windows 7 和更早的系统。

好的。所以我们不能再以*编程*方式禁用 DWM。但它仍然可以禁用吗？DwmIsCompositionEnabled在 Windows 8`pfEnabled`上[是否](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969518.aspx)始终设置为 TRUE？

如果*可以*以某种方式禁用合成，那么 DwmIsCompositionEnabled 在任何方面仍然有用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T04:13:16.183

根据MSDN上的[Desktop Window Manager is always on (Windows) ：](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848042.aspx)

> 在 Windows 8 中，桌面窗口管理器 (DWM)**始终处于打开状态，最终用户和应用程序无法禁用**。
> 
> 在 Windows 8 中，DWM 桌面组合是一个核心操作系统组件，**不能被禁用**。除了少数例外，桌面 **组合始终处于打开状态**；它在用户登录之前启动，并在会话期间保持活动状态。
> 
> Window 7 中存在的所有用于禁用桌面合成的选项都已删除
> 
> 应用程序不能使用 DwmEnableComposition 来禁用桌面合成。为了保持向后兼容性，调用此 API 将返回成功；但是，**桌面合成没有被禁用**

嗯，有一个非常确定的答案。我有点好奇“除了少数例外”是什么意思，不过……如果您碰巧知道，请添加评论。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T07:59:34.863

与人们提到的相反（“他们删除了代码”、“Basic 主题不再存在”等），旧的视觉风格在 Windows 8 中仍然存在并且很好。

唯一的问题是，如何将它用于普通应用程序还不是很清楚！

这本身并没有禁用*DWM*，但肯定会禁用合成：只需下载适用于 Windows XP 的 PowerToy 计算器并尝试在 Windows 8 中以兼容模式运行它，您会看到旧主题仍然存在：

[![](../Images/5e1d4940c9597ddd014a9a746b63a28c.png)](https://i.stack.imgur.com/epPmz.png)

# android - 已经为这个 Intent 安排了一个警报，我想再添加一个

> ID：13831998
> 
> 赞同：0
> 
> 时间：2012-12-12T02:45:50.070
> 
> 标签：android, android-intent, broadcastreceiver, alarmmanager

我注册了`broadcastreceiver`一个`AndroidMainfest.xml`

在我的应用程序中，一个功能是用户可以设置时间，此时应用程序将发送通知。我得到参数 User set ，并用于`alarmManager`设置将在用户设置时发生的任务。

但我发现 GOOGLE API 说：

```
If there is already an alarm for this Intent scheduled (with the equality of two intents being defined by filterEquals(Intent)), then it will be removed and replaced by this one. 
```

所以如果我想设置两个或更多任务，Intent 将被替换，最后我只能得到一个通知，这不是我想要的结果。

然后我发现intent是通过action、data、type、class和categories来识别的，但是我不能改变action（intent的action是intent-filter的action注册在AndroidMainfest.xml中），但是当时我更改了其他参数，我什至无法接收广播。

我以为有四种方法可以解决这个问题，但我只做了一个..

1.  创建很多`broadcastreceiver`并在其中注册它们 `AndroidMainfest.xml`，这样我就可以改变意图的动作
2.  在程序中注册`broadcastreceiver`，但我没有成功
3.  使用服务+定时器类..
4.  在不改变行动的情况下使两个意图不同。

任何帮助将不胜感激！！

```
Intent intent = new Intent("aaa");    //there was a broadcastreceiver's intent-filter "aaa"
intent.putExtra("title", title);
intent.putExtra("table", "计划");
PendingIntent pi = PendingIntent.getBroadcast(Alarm.this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager am = (AlarmManager)getSystemService(Alarm.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP,  System.currentTimeMillis()+time, pi); 
```

代码在 onClickListener{onClick(){}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:14:49.330

除了不允许您设置重复闹钟的广播之外，您还可以使用日历对象并在任何需要的时间设置闹钟。一旦警报打开，您的代码将自动运行，并且您设置了警报的次数。您还可以参考以下教程。我相信它会以某种方式帮助你。

[http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/](http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/)

# netbeans - 在 netbeans 上运行导入的项目无法构建

> ID：13831999
> 
> 赞同：2
> 
> 时间：2012-12-12T02:46:10.200
> 
> 标签：netbeans, build, import, project

当我将我的项目导出为 zip，然后尝试在另一台计算机上导入它时，我总是会收到此错误：

```
Created dir: C:\Users\martins0011\Documents\NetBeansProjects\Movicol\build\web\WEB-INF\classes
Created dir: C:\Users\martins0011\Documents\NetBeansProjects\Movicol\build\web\META-INF
Copying 1 file to C:\Users\martins0011\Documents\NetBeansProjects\Movicol\build\web\META-INF
Copying 63 files to C:\Users\martins0011\Documents\NetBeansProjects\Movicol\build\web
C:\Users\martins0011\Documents\NetBeansProjects\Movicol\nbproject\build-impl.xml:846: C:\Users\martins0011\Documents\NetBeansProjects\Movicol\web\WEB-INF does not exist.
BUILD FAILED (total time: 0 seconds) 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:48:09.920

我修复了它在项目目录上手动创建文件夹 WEB-INF ......奇怪的错误，但解决了，我现在可以运行它！无论如何，非常感谢埃里克！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:01:13.520

我在 netbeans 7.2 上构建 Web 项目（JSP）时遇到了同样的问题，然后我手动创建了 WEB_INF 并成功重建了项目。请注意，至少在我的情况下，这个丢失的文件在获取 Web 项目时来自 GIT 中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-14T21:19:50.823

我在今年（2020 年）遇到了同样的问题，**我通过将 webinf 文件复制并添加到我项目中的 web 文件中来解决**。你把这个文件（webinf）放在哪里并不重要，它可以在你选择复制它的每个项目中工作。